var GT=Object.defineProperty;var WT=(it,g,et)=>g in it?GT(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et;var jn=(it,g,et)=>(WT(it,typeof g!="symbol"?g+"":g,et),et),YS=(it,g,et)=>{if(!g.has(it))throw TypeError("Cannot "+et)};var zt=(it,g,et)=>(YS(it,g,"read from private field"),et?et.call(it):g.get(it)),cn=(it,g,et)=>{if(g.has(it))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(it):g.set(it,et)},fn=(it,g,et,ot)=>(YS(it,g,"write to private field"),ot?ot.call(it,et):g.set(it,et),et);var kr=(it,g,et,ot)=>({set _(ct){fn(it,g,ct,et)},get _(){return zt(it,g,ot)}}),bn=(it,g,et)=>(YS(it,g,"access private method"),et);function _mergeNamespaces(it,g){for(var et=0;et<g.length;et++){const ot=g[et];if(typeof ot!="string"&&!Array.isArray(ot)){for(const ct in ot)if(ct!=="default"&&!(ct in it)){const ut=Object.getOwnPropertyDescriptor(ot,ct);ut&&Object.defineProperty(it,ct,ut.get?ut:{enumerable:!0,get:()=>ot[ct]})}}}return Object.freeze(Object.defineProperty(it,Symbol.toStringTag,{value:"Module"}))}(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const ct of document.querySelectorAll('link[rel="modulepreload"]'))ot(ct);new MutationObserver(ct=>{for(const ut of ct)if(ut.type==="childList")for(const dt of ut.addedNodes)dt.tagName==="LINK"&&dt.rel==="modulepreload"&&ot(dt)}).observe(document,{childList:!0,subtree:!0});function et(ct){const ut={};return ct.integrity&&(ut.integrity=ct.integrity),ct.referrerPolicy&&(ut.referrerPolicy=ct.referrerPolicy),ct.crossOrigin==="use-credentials"?ut.credentials="include":ct.crossOrigin==="anonymous"?ut.credentials="omit":ut.credentials="same-origin",ut}function ot(ct){if(ct.ep)return;ct.ep=!0;const ut=et(ct);fetch(ct.href,ut)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(it){return it&&it.__esModule&&Object.prototype.hasOwnProperty.call(it,"default")?it.default:it}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$6=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$5=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(it){return it===null||typeof it!="object"?null:(it=z$2&&it[z$2]||it["@@iterator"],typeof it=="function"?it:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$2={};function E$3(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(it,g){if(typeof it!="object"&&typeof it!="function"&&it!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,it,g,"setState")};E$3.prototype.forceUpdate=function(it){this.updater.enqueueForceUpdate(this,it,"forceUpdate")};function F$3(){}F$3.prototype=E$3.prototype;function G$2(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}var H$4=G$2.prototype=new F$3;H$4.constructor=G$2;C$5(H$4,E$3.prototype);H$4.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$4(it,g,et){var ot,ct={},ut=null,dt=null;if(g!=null)for(ot in g.ref!==void 0&&(dt=g.ref),g.key!==void 0&&(ut=""+g.key),g)J$2.call(g,ot)&&!L$4.hasOwnProperty(ot)&&(ct[ot]=g[ot]);var ft=arguments.length-2;if(ft===1)ct.children=et;else if(1<ft){for(var St=Array(ft),kt=0;kt<ft;kt++)St[kt]=arguments[kt+2];ct.children=St}if(it&&it.defaultProps)for(ot in ft=it.defaultProps,ft)ct[ot]===void 0&&(ct[ot]=ft[ot]);return{$$typeof:l$4,type:it,key:ut,ref:dt,props:ct,_owner:K$3.current}}function N$3(it,g){return{$$typeof:l$4,type:it.type,key:g,ref:it.ref,props:it.props,_owner:it._owner}}function O$5(it){return typeof it=="object"&&it!==null&&it.$$typeof===l$4}function escape$1(it){var g={"=":"=0",":":"=2"};return"$"+it.replace(/[=:]/g,function(et){return g[et]})}var P$4=/\/+/g;function Q$2(it,g){return typeof it=="object"&&it!==null&&it.key!=null?escape$1(""+it.key):g.toString(36)}function R$4(it,g,et,ot,ct){var ut=typeof it;(ut==="undefined"||ut==="boolean")&&(it=null);var dt=!1;if(it===null)dt=!0;else switch(ut){case"string":case"number":dt=!0;break;case"object":switch(it.$$typeof){case l$4:case n$5:dt=!0}}if(dt)return dt=it,ct=ct(dt),it=ot===""?"."+Q$2(dt,0):ot,I$5(ct)?(et="",it!=null&&(et=it.replace(P$4,"$&/")+"/"),R$4(ct,g,et,"",function(kt){return kt})):ct!=null&&(O$5(ct)&&(ct=N$3(ct,et+(!ct.key||dt&&dt.key===ct.key?"":(""+ct.key).replace(P$4,"$&/")+"/")+it)),g.push(ct)),1;if(dt=0,ot=ot===""?".":ot+":",I$5(it))for(var ft=0;ft<it.length;ft++){ut=it[ft];var St=ot+Q$2(ut,ft);dt+=R$4(ut,g,et,St,ct)}else if(St=A$3(it),typeof St=="function")for(it=St.call(it),ft=0;!(ut=it.next()).done;)ut=ut.value,St=ot+Q$2(ut,ft++),dt+=R$4(ut,g,et,St,ct);else if(ut==="object")throw g=String(it),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(it).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return dt}function S$4(it,g,et){if(it==null)return it;var ot=[],ct=0;return R$4(it,ot,"","",function(ut){return g.call(et,ut,ct++)}),ot}function T$4(it){if(it._status===-1){var g=it._result;g=g(),g.then(function(et){(it._status===0||it._status===-1)&&(it._status=1,it._result=et)},function(et){(it._status===0||it._status===-1)&&(it._status=2,it._result=et)}),it._status===-1&&(it._status=0,it._result=g)}if(it._status===1)return it._result.default;throw it._result}var U$5={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};function X$5(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$4,forEach:function(it,g,et){S$4(it,function(){g.apply(this,arguments)},et)},count:function(it){var g=0;return S$4(it,function(){g++}),g},toArray:function(it){return S$4(it,function(g){return g})||[]},only:function(it){if(!O$5(it))throw Error("React.Children.only expected to receive a single React element child.");return it}};react_production_min.Component=E$3;react_production_min.Fragment=p$5;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$5;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$5;react_production_min.cloneElement=function(it,g,et){if(it==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+it+".");var ot=C$5({},it.props),ct=it.key,ut=it.ref,dt=it._owner;if(g!=null){if(g.ref!==void 0&&(ut=g.ref,dt=K$3.current),g.key!==void 0&&(ct=""+g.key),it.type&&it.type.defaultProps)var ft=it.type.defaultProps;for(St in g)J$2.call(g,St)&&!L$4.hasOwnProperty(St)&&(ot[St]=g[St]===void 0&&ft!==void 0?ft[St]:g[St])}var St=arguments.length-2;if(St===1)ot.children=et;else if(1<St){ft=Array(St);for(var kt=0;kt<St;kt++)ft[kt]=arguments[kt+2];ot.children=ft}return{$$typeof:l$4,type:it.type,key:ct,ref:ut,props:ot,_owner:dt}};react_production_min.createContext=function(it){return it={$$typeof:u$6,_currentValue:it,_currentValue2:it,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},it.Provider={$$typeof:t$6,_context:it},it.Consumer=it};react_production_min.createElement=M$4;react_production_min.createFactory=function(it){var g=M$4.bind(null,it);return g.type=it,g};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(it){return{$$typeof:v$3,render:it}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(it){return{$$typeof:y$5,_payload:{_status:-1,_result:it},_init:T$4}};react_production_min.memo=function(it,g){return{$$typeof:x$3,type:it,compare:g===void 0?null:g}};react_production_min.startTransition=function(it){var g=V$3.transition;V$3.transition={};try{it()}finally{V$3.transition=g}};react_production_min.unstable_act=X$5;react_production_min.useCallback=function(it,g){return U$5.current.useCallback(it,g)};react_production_min.useContext=function(it){return U$5.current.useContext(it)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(it){return U$5.current.useDeferredValue(it)};react_production_min.useEffect=function(it,g){return U$5.current.useEffect(it,g)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(it,g,et){return U$5.current.useImperativeHandle(it,g,et)};react_production_min.useInsertionEffect=function(it,g){return U$5.current.useInsertionEffect(it,g)};react_production_min.useLayoutEffect=function(it,g){return U$5.current.useLayoutEffect(it,g)};react_production_min.useMemo=function(it,g){return U$5.current.useMemo(it,g)};react_production_min.useReducer=function(it,g,et){return U$5.current.useReducer(it,g,et)};react_production_min.useRef=function(it){return U$5.current.useRef(it)};react_production_min.useState=function(it){return U$5.current.useState(it)};react_production_min.useSyncExternalStore=function(it,g,et){return U$5.current.useSyncExternalStore(it,g,et)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React4=getDefaultExportFromCjs(reactExports),t$5=_mergeNamespaces({__proto__:null,default:React4},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$1=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$6=Object.prototype.hasOwnProperty,n$4=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q(it,g,et){var ot,ct={},ut=null,dt=null;et!==void 0&&(ut=""+et),g.key!==void 0&&(ut=""+g.key),g.ref!==void 0&&(dt=g.ref);for(ot in g)m$6.call(g,ot)&&!p$4.hasOwnProperty(ot)&&(ct[ot]=g[ot]);if(it&&it.defaultProps)for(ot in g=it.defaultProps,g)ct[ot]===void 0&&(ct[ot]=g[ot]);return{$$typeof:k$1,type:it,key:ut,ref:dt,props:ct,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(it){function g(rn,on){var gn=rn.length;rn.push(on);e:for(;0<gn;){var un=gn-1>>>1,xn=rn[un];if(0<ct(xn,on))rn[un]=on,rn[gn]=xn,gn=un;else break e}}function et(rn){return rn.length===0?null:rn[0]}function ot(rn){if(rn.length===0)return null;var on=rn[0],gn=rn.pop();if(gn!==on){rn[0]=gn;e:for(var un=0,xn=rn.length,En=xn>>>1;un<En;){var wn=2*(un+1)-1,kn=rn[wn],Sn=wn+1,An=rn[Sn];if(0>ct(kn,gn))Sn<xn&&0>ct(An,kn)?(rn[un]=An,rn[Sn]=gn,un=Sn):(rn[un]=kn,rn[wn]=gn,un=wn);else if(Sn<xn&&0>ct(An,gn))rn[un]=An,rn[Sn]=gn,un=Sn;else break e}}return on}function ct(rn,on){var gn=rn.sortIndex-on.sortIndex;return gn!==0?gn:rn.id-on.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ut=performance;it.unstable_now=function(){return ut.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,Rt=null,jt=3,$t=!1,Ft=!1,Ht=!1,Kt=typeof setTimeout=="function"?setTimeout:null,Bt=typeof clearTimeout=="function"?clearTimeout:null,Ut=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Yt(rn){for(var on=et(kt);on!==null;){if(on.callback===null)ot(kt);else if(on.startTime<=rn)ot(kt),on.sortIndex=on.expirationTime,g(St,on);else break;on=et(kt)}}function Jt(rn){if(Ht=!1,Yt(rn),!Ft)if(et(St)!==null)Ft=!0,hn(Zt);else{var on=et(kt);on!==null&&pn(Jt,on.startTime-rn)}}function Zt(rn,on){Ft=!1,Ht&&(Ht=!1,Bt(nn),nn=-1),$t=!0;var gn=jt;try{for(Yt(on),Rt=et(St);Rt!==null&&(!(Rt.expirationTime>on)||rn&&!sn());){var un=Rt.callback;if(typeof un=="function"){Rt.callback=null,jt=Rt.priorityLevel;var xn=un(Rt.expirationTime<=on);on=it.unstable_now(),typeof xn=="function"?Rt.callback=xn:Rt===et(St)&&ot(St),Yt(on)}else ot(St);Rt=et(St)}if(Rt!==null)var En=!0;else{var wn=et(kt);wn!==null&&pn(Jt,wn.startTime-on),En=!1}return En}finally{Rt=null,jt=gn,$t=!1}}var en=!1,tn=null,nn=-1,ln=5,an=-1;function sn(){return!(it.unstable_now()-an<ln)}function dn(){if(tn!==null){var rn=it.unstable_now();an=rn;var on=!0;try{on=tn(!0,rn)}finally{on?mn():(en=!1,tn=null)}}else en=!1}var mn;if(typeof Ut=="function")mn=function(){Ut(dn)};else if(typeof MessageChannel<"u"){var yn=new MessageChannel,vn=yn.port2;yn.port1.onmessage=dn,mn=function(){vn.postMessage(null)}}else mn=function(){Kt(dn,0)};function hn(rn){tn=rn,en||(en=!0,mn())}function pn(rn,on){nn=Kt(function(){rn(it.unstable_now())},on)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(rn){rn.callback=null},it.unstable_continueExecution=function(){Ft||$t||(Ft=!0,hn(Zt))},it.unstable_forceFrameRate=function(rn){0>rn||125<rn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ln=0<rn?Math.floor(1e3/rn):5},it.unstable_getCurrentPriorityLevel=function(){return jt},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(rn){switch(jt){case 1:case 2:case 3:var on=3;break;default:on=jt}var gn=jt;jt=on;try{return rn()}finally{jt=gn}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(rn,on){switch(rn){case 1:case 2:case 3:case 4:case 5:break;default:rn=3}var gn=jt;jt=rn;try{return on()}finally{jt=gn}},it.unstable_scheduleCallback=function(rn,on,gn){var un=it.unstable_now();switch(typeof gn=="object"&&gn!==null?(gn=gn.delay,gn=typeof gn=="number"&&0<gn?un+gn:un):gn=un,rn){case 1:var xn=-1;break;case 2:xn=250;break;case 5:xn=1073741823;break;case 4:xn=1e4;break;default:xn=5e3}return xn=gn+xn,rn={id:Tt++,callback:on,priorityLevel:rn,startTime:gn,expirationTime:xn,sortIndex:-1},gn>un?(rn.sortIndex=gn,g(kt,rn),et(St)===null&&rn===et(kt)&&(Ht?(Bt(nn),nn=-1):Ht=!0,pn(Jt,gn-un))):(rn.sortIndex=xn,g(St,rn),Ft||$t||(Ft=!0,hn(Zt))),rn},it.unstable_shouldYield=sn,it.unstable_wrapCallback=function(rn){var on=jt;return function(){var gn=jt;jt=on;try{return rn.apply(this,arguments)}finally{jt=gn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$3(it){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+it,et=1;et<arguments.length;et++)g+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+it+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(it,g){ha(it,g),ha(it+"Capture",g)}function ha(it,g){for(ea[it]=g,it=0;it<g.length;it++)da.add(g[it])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(it){return ja.call(ma,it)?!0:ja.call(la,it)?!1:ka.test(it)?ma[it]=!0:(la[it]=!0,!1)}function pa(it,g,et,ot){if(et!==null&&et.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return ot?!1:et!==null?!et.acceptsBooleans:(it=it.toLowerCase().slice(0,5),it!=="data-"&&it!=="aria-");default:return!1}}function qa(it,g,et,ot){if(g===null||typeof g>"u"||pa(it,g,et,ot))return!0;if(ot)return!1;if(et!==null)switch(et.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v$2(it,g,et,ot,ct,ut,dt){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=ot,this.attributeNamespace=ct,this.mustUseProperty=et,this.propertyName=it,this.type=g,this.sanitizeURL=ut,this.removeEmptyString=dt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(it){z$1[it]=new v$2(it,0,!1,it,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(it){var g=it[0];z$1[g]=new v$2(g,1,!1,it[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(it){z$1[it]=new v$2(it,3,!1,it.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(it){z$1[it]=new v$2(it,3,!0,it,null,!1,!1)});["capture","download"].forEach(function(it){z$1[it]=new v$2(it,4,!1,it,null,!1,!1)});["cols","rows","size","span"].forEach(function(it){z$1[it]=new v$2(it,6,!1,it,null,!1,!1)});["rowSpan","start"].forEach(function(it){z$1[it]=new v$2(it,5,!1,it.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(it){return it[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!0,!0)});function ta$1(it,g,et,ot){var ct=z$1.hasOwnProperty(g)?z$1[g]:null;(ct!==null?ct.type!==0:ot||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(qa(g,et,ct,ot)&&(et=null),ot||ct===null?oa(g)&&(et===null?it.removeAttribute(g):it.setAttribute(g,""+et)):ct.mustUseProperty?it[ct.propertyName]=et===null?ct.type===3?!1:"":et:(g=ct.attributeName,ot=ct.attributeNamespace,et===null?it.removeAttribute(g):(ct=ct.type,et=ct===3||ct===4&&et===!0?"":""+et,ot?it.setAttributeNS(ot,g,et):it.setAttribute(g,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(it){return it===null||typeof it!="object"?null:(it=Ja&&it[Ja]||it["@@iterator"],typeof it=="function"?it:null)}var A$2=Object.assign,La;function Ma(it){if(La===void 0)try{throw Error()}catch(et){var g=et.stack.trim().match(/\n( *(at )?)/);La=g&&g[1]||""}return`
`+La+it}var Na=!1;function Oa(it,g){if(!it||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(kt){var ot=kt}Reflect.construct(it,[],g)}else{try{g.call()}catch(kt){ot=kt}it.call(g.prototype)}else{try{throw Error()}catch(kt){ot=kt}it()}}catch(kt){if(kt&&ot&&typeof kt.stack=="string"){for(var ct=kt.stack.split(`
`),ut=ot.stack.split(`
`),dt=ct.length-1,ft=ut.length-1;1<=dt&&0<=ft&&ct[dt]!==ut[ft];)ft--;for(;1<=dt&&0<=ft;dt--,ft--)if(ct[dt]!==ut[ft]){if(dt!==1||ft!==1)do if(dt--,ft--,0>ft||ct[dt]!==ut[ft]){var St=`
`+ct[dt].replace(" at new "," at ");return it.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",it.displayName)),St}while(1<=dt&&0<=ft);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(it=it?it.displayName||it.name:"")?Ma(it):""}function Pa(it){switch(it.tag){case 5:return Ma(it.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return it=Oa(it.type,!1),it;case 11:return it=Oa(it.type.render,!1),it;case 1:return it=Oa(it.type,!0),it;default:return""}}function Qa(it){if(it==null)return null;if(typeof it=="function")return it.displayName||it.name||null;if(typeof it=="string")return it;switch(it){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof it=="object")switch(it.$$typeof){case Ca:return(it.displayName||"Context")+".Consumer";case Ba:return(it._context.displayName||"Context")+".Provider";case Da:var g=it.render;return it=it.displayName,it||(it=g.displayName||g.name||"",it=it!==""?"ForwardRef("+it+")":"ForwardRef"),it;case Ga:return g=it.displayName||null,g!==null?g:Qa(it.type)||"Memo";case Ha:g=it._payload,it=it._init;try{return Qa(it(g))}catch{}}return null}function Ra(it){var g=it.type;switch(it.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return it=g.render,it=it.displayName||it.name||"",g.displayName||(it!==""?"ForwardRef("+it+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(g);case 8:return g===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Sa(it){switch(typeof it){case"boolean":case"number":case"string":case"undefined":return it;case"object":return it;default:return""}}function Ta(it){var g=it.type;return(it=it.nodeName)&&it.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ua(it){var g=Ta(it)?"checked":"value",et=Object.getOwnPropertyDescriptor(it.constructor.prototype,g),ot=""+it[g];if(!it.hasOwnProperty(g)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var ct=et.get,ut=et.set;return Object.defineProperty(it,g,{configurable:!0,get:function(){return ct.call(this)},set:function(dt){ot=""+dt,ut.call(this,dt)}}),Object.defineProperty(it,g,{enumerable:et.enumerable}),{getValue:function(){return ot},setValue:function(dt){ot=""+dt},stopTracking:function(){it._valueTracker=null,delete it[g]}}}}function Va(it){it._valueTracker||(it._valueTracker=Ua(it))}function Wa(it){if(!it)return!1;var g=it._valueTracker;if(!g)return!0;var et=g.getValue(),ot="";return it&&(ot=Ta(it)?it.checked?"true":"false":it.value),it=ot,it!==et?(g.setValue(it),!0):!1}function Xa(it){if(it=it||(typeof document<"u"?document:void 0),typeof it>"u")return null;try{return it.activeElement||it.body}catch{return it.body}}function Ya(it,g){var et=g.checked;return A$2({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??it._wrapperState.initialChecked})}function Za(it,g){var et=g.defaultValue==null?"":g.defaultValue,ot=g.checked!=null?g.checked:g.defaultChecked;et=Sa(g.value!=null?g.value:et),it._wrapperState={initialChecked:ot,initialValue:et,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ab(it,g){g=g.checked,g!=null&&ta$1(it,"checked",g,!1)}function bb(it,g){ab(it,g);var et=Sa(g.value),ot=g.type;if(et!=null)ot==="number"?(et===0&&it.value===""||it.value!=et)&&(it.value=""+et):it.value!==""+et&&(it.value=""+et);else if(ot==="submit"||ot==="reset"){it.removeAttribute("value");return}g.hasOwnProperty("value")?cb(it,g.type,et):g.hasOwnProperty("defaultValue")&&cb(it,g.type,Sa(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(it.defaultChecked=!!g.defaultChecked)}function db(it,g,et){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var ot=g.type;if(!(ot!=="submit"&&ot!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+it._wrapperState.initialValue,et||g===it.value||(it.value=g),it.defaultValue=g}et=it.name,et!==""&&(it.name=""),it.defaultChecked=!!it._wrapperState.initialChecked,et!==""&&(it.name=et)}function cb(it,g,et){(g!=="number"||Xa(it.ownerDocument)!==it)&&(et==null?it.defaultValue=""+it._wrapperState.initialValue:it.defaultValue!==""+et&&(it.defaultValue=""+et))}var eb=Array.isArray;function fb(it,g,et,ot){if(it=it.options,g){g={};for(var ct=0;ct<et.length;ct++)g["$"+et[ct]]=!0;for(et=0;et<it.length;et++)ct=g.hasOwnProperty("$"+it[et].value),it[et].selected!==ct&&(it[et].selected=ct),ct&&ot&&(it[et].defaultSelected=!0)}else{for(et=""+Sa(et),g=null,ct=0;ct<it.length;ct++){if(it[ct].value===et){it[ct].selected=!0,ot&&(it[ct].defaultSelected=!0);return}g!==null||it[ct].disabled||(g=it[ct])}g!==null&&(g.selected=!0)}}function gb(it,g){if(g.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$2({},g,{value:void 0,defaultValue:void 0,children:""+it._wrapperState.initialValue})}function hb(it,g){var et=g.value;if(et==null){if(et=g.children,g=g.defaultValue,et!=null){if(g!=null)throw Error(p$3(92));if(eb(et)){if(1<et.length)throw Error(p$3(93));et=et[0]}g=et}g==null&&(g=""),et=g}it._wrapperState={initialValue:Sa(et)}}function ib(it,g){var et=Sa(g.value),ot=Sa(g.defaultValue);et!=null&&(et=""+et,et!==it.value&&(it.value=et),g.defaultValue==null&&it.defaultValue!==et&&(it.defaultValue=et)),ot!=null&&(it.defaultValue=""+ot)}function jb(it){var g=it.textContent;g===it._wrapperState.initialValue&&g!==""&&g!==null&&(it.value=g)}function kb(it){switch(it){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(it,g){return it==null||it==="http://www.w3.org/1999/xhtml"?kb(g):it==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":it}var mb,nb=function(it){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,et,ot,ct){MSApp.execUnsafeLocalFunction(function(){return it(g,et,ot,ct)})}:it}(function(it,g){if(it.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in it)it.innerHTML=g;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=mb.firstChild;it.firstChild;)it.removeChild(it.firstChild);for(;g.firstChild;)it.appendChild(g.firstChild)}});function ob(it,g){if(g){var et=it.firstChild;if(et&&et===it.lastChild&&et.nodeType===3){et.nodeValue=g;return}}it.textContent=g}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(it){qb.forEach(function(g){g=g+it.charAt(0).toUpperCase()+it.substring(1),pb[g]=pb[it]})});function rb(it,g,et){return g==null||typeof g=="boolean"||g===""?"":et||typeof g!="number"||g===0||pb.hasOwnProperty(it)&&pb[it]?(""+g).trim():g+"px"}function sb(it,g){it=it.style;for(var et in g)if(g.hasOwnProperty(et)){var ot=et.indexOf("--")===0,ct=rb(et,g[et],ot);et==="float"&&(et="cssFloat"),ot?it.setProperty(et,ct):it[et]=ct}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(it,g){if(g){if(tb[it]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(p$3(137,it));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(p$3(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(p$3(61))}if(g.style!=null&&typeof g.style!="object")throw Error(p$3(62))}}function vb(it,g){if(it.indexOf("-")===-1)return typeof g.is=="string";switch(it){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(it){return it=it.target||it.srcElement||window,it.correspondingUseElement&&(it=it.correspondingUseElement),it.nodeType===3?it.parentNode:it}var yb=null,zb=null,Ab=null;function Bb(it){if(it=Cb(it)){if(typeof yb!="function")throw Error(p$3(280));var g=it.stateNode;g&&(g=Db(g),yb(it.stateNode,it.type,g))}}function Eb(it){zb?Ab?Ab.push(it):Ab=[it]:zb=it}function Fb(){if(zb){var it=zb,g=Ab;if(Ab=zb=null,Bb(it),g)for(it=0;it<g.length;it++)Bb(g[it])}}function Gb(it,g){return it(g)}function Hb(){}var Ib=!1;function Jb(it,g,et){if(Ib)return it(g,et);Ib=!0;try{return Gb(it,g,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(it,g){var et=it.stateNode;if(et===null)return null;var ot=Db(et);if(ot===null)return null;et=ot[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ot=!ot.disabled)||(it=it.type,ot=!(it==="button"||it==="input"||it==="select"||it==="textarea")),it=!ot;break e;default:it=!1}if(it)return null;if(et&&typeof et!="function")throw Error(p$3(231,g,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(it,g,et,ot,ct,ut,dt,ft,St){var kt=Array.prototype.slice.call(arguments,3);try{g.apply(et,kt)}catch(Tt){this.onError(Tt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(it){Ob=!0,Pb=it}};function Tb(it,g,et,ot,ct,ut,dt,ft,St){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(it,g,et,ot,ct,ut,dt,ft,St){if(Tb.apply(this,arguments),Ob){if(Ob){var kt=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=kt)}}function Vb(it){var g=it,et=it;if(it.alternate)for(;g.return;)g=g.return;else{it=g;do g=it,g.flags&4098&&(et=g.return),it=g.return;while(it)}return g.tag===3?et:null}function Wb(it){if(it.tag===13){var g=it.memoizedState;if(g===null&&(it=it.alternate,it!==null&&(g=it.memoizedState)),g!==null)return g.dehydrated}return null}function Xb(it){if(Vb(it)!==it)throw Error(p$3(188))}function Yb(it){var g=it.alternate;if(!g){if(g=Vb(it),g===null)throw Error(p$3(188));return g!==it?null:it}for(var et=it,ot=g;;){var ct=et.return;if(ct===null)break;var ut=ct.alternate;if(ut===null){if(ot=ct.return,ot!==null){et=ot;continue}break}if(ct.child===ut.child){for(ut=ct.child;ut;){if(ut===et)return Xb(ct),it;if(ut===ot)return Xb(ct),g;ut=ut.sibling}throw Error(p$3(188))}if(et.return!==ot.return)et=ct,ot=ut;else{for(var dt=!1,ft=ct.child;ft;){if(ft===et){dt=!0,et=ct,ot=ut;break}if(ft===ot){dt=!0,ot=ct,et=ut;break}ft=ft.sibling}if(!dt){for(ft=ut.child;ft;){if(ft===et){dt=!0,et=ut,ot=ct;break}if(ft===ot){dt=!0,ot=ut,et=ct;break}ft=ft.sibling}if(!dt)throw Error(p$3(189))}}if(et.alternate!==ot)throw Error(p$3(190))}if(et.tag!==3)throw Error(p$3(188));return et.stateNode.current===et?it:g}function Zb(it){return it=Yb(it),it!==null?$b(it):null}function $b(it){if(it.tag===5||it.tag===6)return it;for(it=it.child;it!==null;){var g=$b(it);if(g!==null)return g;it=it.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(it){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,it,void 0,(it.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(it){return it>>>=0,it===0?32:31-(pc(it)/qc|0)|0}var rc=64,sc=4194304;function tc(it){switch(it&-it){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return it&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return it&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return it}}function uc(it,g){var et=it.pendingLanes;if(et===0)return 0;var ot=0,ct=it.suspendedLanes,ut=it.pingedLanes,dt=et&268435455;if(dt!==0){var ft=dt&~ct;ft!==0?ot=tc(ft):(ut&=dt,ut!==0&&(ot=tc(ut)))}else dt=et&~ct,dt!==0?ot=tc(dt):ut!==0&&(ot=tc(ut));if(ot===0)return 0;if(g!==0&&g!==ot&&!(g&ct)&&(ct=ot&-ot,ut=g&-g,ct>=ut||ct===16&&(ut&4194240)!==0))return g;if(ot&4&&(ot|=et&16),g=it.entangledLanes,g!==0)for(it=it.entanglements,g&=ot;0<g;)et=31-oc(g),ct=1<<et,ot|=it[et],g&=~ct;return ot}function vc(it,g){switch(it){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(it,g){for(var et=it.suspendedLanes,ot=it.pingedLanes,ct=it.expirationTimes,ut=it.pendingLanes;0<ut;){var dt=31-oc(ut),ft=1<<dt,St=ct[dt];St===-1?(!(ft&et)||ft&ot)&&(ct[dt]=vc(ft,g)):St<=g&&(it.expiredLanes|=ft),ut&=~ft}}function xc(it){return it=it.pendingLanes&-1073741825,it!==0?it:it&1073741824?1073741824:0}function yc(){var it=rc;return rc<<=1,!(rc&4194240)&&(rc=64),it}function zc(it){for(var g=[],et=0;31>et;et++)g.push(it);return g}function Ac(it,g,et){it.pendingLanes|=g,g!==536870912&&(it.suspendedLanes=0,it.pingedLanes=0),it=it.eventTimes,g=31-oc(g),it[g]=et}function Bc(it,g){var et=it.pendingLanes&~g;it.pendingLanes=g,it.suspendedLanes=0,it.pingedLanes=0,it.expiredLanes&=g,it.mutableReadLanes&=g,it.entangledLanes&=g,g=it.entanglements;var ot=it.eventTimes;for(it=it.expirationTimes;0<et;){var ct=31-oc(et),ut=1<<ct;g[ct]=0,ot[ct]=-1,it[ct]=-1,et&=~ut}}function Cc(it,g){var et=it.entangledLanes|=g;for(it=it.entanglements;et;){var ot=31-oc(et),ct=1<<ot;ct&g|it[ot]&g&&(it[ot]|=g),et&=~ct}}var C$4=0;function Dc(it){return it&=-it,1<it?4<it?it&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(it,g){switch(it){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(g.pointerId)}}function Tc(it,g,et,ot,ct,ut){return it===null||it.nativeEvent!==ut?(it={blockedOn:g,domEventName:et,eventSystemFlags:ot,nativeEvent:ut,targetContainers:[ct]},g!==null&&(g=Cb(g),g!==null&&Fc(g)),it):(it.eventSystemFlags|=ot,g=it.targetContainers,ct!==null&&g.indexOf(ct)===-1&&g.push(ct),it)}function Uc(it,g,et,ot,ct){switch(g){case"focusin":return Lc=Tc(Lc,it,g,et,ot,ct),!0;case"dragenter":return Mc=Tc(Mc,it,g,et,ot,ct),!0;case"mouseover":return Nc=Tc(Nc,it,g,et,ot,ct),!0;case"pointerover":var ut=ct.pointerId;return Oc.set(ut,Tc(Oc.get(ut)||null,it,g,et,ot,ct)),!0;case"gotpointercapture":return ut=ct.pointerId,Pc.set(ut,Tc(Pc.get(ut)||null,it,g,et,ot,ct)),!0}return!1}function Vc(it){var g=Wc(it.target);if(g!==null){var et=Vb(g);if(et!==null){if(g=et.tag,g===13){if(g=Wb(et),g!==null){it.blockedOn=g,Ic(it.priority,function(){Gc(et)});return}}else if(g===3&&et.stateNode.current.memoizedState.isDehydrated){it.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}it.blockedOn=null}function Xc(it){if(it.blockedOn!==null)return!1;for(var g=it.targetContainers;0<g.length;){var et=Yc(it.domEventName,it.eventSystemFlags,g[0],it.nativeEvent);if(et===null){et=it.nativeEvent;var ot=new et.constructor(et.type,et);wb=ot,et.target.dispatchEvent(ot),wb=null}else return g=Cb(et),g!==null&&Fc(g),it.blockedOn=et,!1;g.shift()}return!0}function Zc(it,g,et){Xc(it)&&et.delete(g)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(it,g){it.blockedOn===g&&(it.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(it){function g(ct){return ad(ct,it)}if(0<Kc.length){ad(Kc[0],it);for(var et=1;et<Kc.length;et++){var ot=Kc[et];ot.blockedOn===it&&(ot.blockedOn=null)}}for(Lc!==null&&ad(Lc,it),Mc!==null&&ad(Mc,it),Nc!==null&&ad(Nc,it),Oc.forEach(g),Pc.forEach(g),et=0;et<Qc.length;et++)ot=Qc[et],ot.blockedOn===it&&(ot.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(it,g,et,ot){var ct=C$4,ut=cd.transition;cd.transition=null;try{C$4=1,fd(it,g,et,ot)}finally{C$4=ct,cd.transition=ut}}function gd(it,g,et,ot){var ct=C$4,ut=cd.transition;cd.transition=null;try{C$4=4,fd(it,g,et,ot)}finally{C$4=ct,cd.transition=ut}}function fd(it,g,et,ot){if(dd){var ct=Yc(it,g,et,ot);if(ct===null)hd(it,g,ot,id$2,et),Sc(it,ot);else if(Uc(ct,it,g,et,ot))ot.stopPropagation();else if(Sc(it,ot),g&4&&-1<Rc.indexOf(it)){for(;ct!==null;){var ut=Cb(ct);if(ut!==null&&Ec(ut),ut=Yc(it,g,et,ot),ut===null&&hd(it,g,ot,id$2,et),ut===ct)break;ct=ut}ct!==null&&ot.stopPropagation()}else hd(it,g,ot,null,et)}}var id$2=null;function Yc(it,g,et,ot){if(id$2=null,it=xb(ot),it=Wc(it),it!==null)if(g=Vb(it),g===null)it=null;else if(et=g.tag,et===13){if(it=Wb(g),it!==null)return it;it=null}else if(et===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;it=null}else g!==it&&(it=null);return id$2=it,null}function jd(it){switch(it){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var it,g=ld,et=g.length,ot,ct="value"in kd?kd.value:kd.textContent,ut=ct.length;for(it=0;it<et&&g[it]===ct[it];it++);var dt=et-it;for(ot=1;ot<=dt&&g[et-ot]===ct[ut-ot];ot++);return md=ct.slice(it,1<ot?1-ot:void 0)}function od(it){var g=it.keyCode;return"charCode"in it?(it=it.charCode,it===0&&g===13&&(it=13)):it=g,it===10&&(it=13),32<=it||it===13?it:0}function pd(){return!0}function qd(){return!1}function rd(it){function g(et,ot,ct,ut,dt){this._reactName=et,this._targetInst=ct,this.type=ot,this.nativeEvent=ut,this.target=dt,this.currentTarget=null;for(var ft in it)it.hasOwnProperty(ft)&&(et=it[ft],this[ft]=et?et(ut):ut[ft]);return this.isDefaultPrevented=(ut.defaultPrevented!=null?ut.defaultPrevented:ut.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),g}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(it){return it.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(it){return it.relatedTarget===void 0?it.fromElement===it.srcElement?it.toElement:it.fromElement:it.relatedTarget},movementX:function(it){return"movementX"in it?it.movementX:(it!==yd&&(yd&&it.type==="mousemove"?(wd=it.screenX-yd.screenX,xd=it.screenY-yd.screenY):xd=wd=0,yd=it),wd)},movementY:function(it){return"movementY"in it?it.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(it){return"clipboardData"in it?it.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(it){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(it):(it=Od[it])?!!g[it]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(it){if(it.key){var g=Md[it.key]||it.key;if(g!=="Unidentified")return g}return it.type==="keypress"?(it=od(it),it===13?"Enter":String.fromCharCode(it)):it.type==="keydown"||it.type==="keyup"?Nd[it.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(it){return it.type==="keypress"?od(it):0},keyCode:function(it){return it.type==="keydown"||it.type==="keyup"?it.keyCode:0},which:function(it){return it.type==="keypress"?od(it):it.type==="keydown"||it.type==="keyup"?it.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(it){return"deltaX"in it?it.deltaX:"wheelDeltaX"in it?-it.wheelDeltaX:0},deltaY:function(it){return"deltaY"in it?it.deltaY:"wheelDeltaY"in it?-it.wheelDeltaY:"wheelDelta"in it?-it.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de$1=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe$1=!1;function ge(it,g){switch(it){case"keyup":return $d.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(it){return it=it.detail,typeof it=="object"&&"data"in it?it.data:null}var ie$2=!1;function je$1(it,g){switch(it){case"compositionend":return he$1(g);case"keypress":return g.which!==32?null:(fe$1=!0,ee$1);case"textInput":return it=g.data,it===ee$1&&fe$1?null:it;default:return null}}function ke$1(it,g){if(ie$2)return it==="compositionend"||!ae&&ge(it,g)?(it=nd(),md=ld=kd=null,ie$2=!1,it):null;switch(it){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return de$1&&g.locale!=="ko"?null:g.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g==="input"?!!le[it.type]:g==="textarea"}function ne(it,g,et,ot){Eb(ot),g=oe(g,"onChange"),0<g.length&&(et=new td("onChange","change",null,et,ot),it.push({event:et,listeners:g}))}var pe=null,qe=null;function re$2(it){se(it,0)}function te$2(it){var g=ue$1(it);if(Wa(g))return it}function ve(it,g){if(it==="change")return g}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be$1),qe=pe=null)}function Be$1(it){if(it.propertyName==="value"&&te$2(qe)){var g=[];ne(g,qe,it,xb(it)),Jb(re$2,g)}}function Ce(it,g,et){it==="focusin"?(Ae$1(),pe=g,qe=et,pe.attachEvent("onpropertychange",Be$1)):it==="focusout"&&Ae$1()}function De$1(it){if(it==="selectionchange"||it==="keyup"||it==="keydown")return te$2(qe)}function Ee(it,g){if(it==="click")return te$2(g)}function Fe$1(it,g){if(it==="input"||it==="change")return te$2(g)}function Ge$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(it,g){if(He$2(it,g))return!0;if(typeof it!="object"||it===null||typeof g!="object"||g===null)return!1;var et=Object.keys(it),ot=Object.keys(g);if(et.length!==ot.length)return!1;for(ot=0;ot<et.length;ot++){var ct=et[ot];if(!ja.call(g,ct)||!He$2(it[ct],g[ct]))return!1}return!0}function Je(it){for(;it&&it.firstChild;)it=it.firstChild;return it}function Ke(it,g){var et=Je(it);it=0;for(var ot;et;){if(et.nodeType===3){if(ot=it+et.textContent.length,it<=g&&ot>=g)return{node:et,offset:g-it};it=ot}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le$1(it,g){return it&&g?it===g?!0:it&&it.nodeType===3?!1:g&&g.nodeType===3?Le$1(it,g.parentNode):"contains"in it?it.contains(g):it.compareDocumentPosition?!!(it.compareDocumentPosition(g)&16):!1:!1}function Me$1(){for(var it=window,g=Xa();g instanceof it.HTMLIFrameElement;){try{var et=typeof g.contentWindow.location.href=="string"}catch{et=!1}if(et)it=g.contentWindow;else break;g=Xa(it.document)}return g}function Ne$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g&&(g==="input"&&(it.type==="text"||it.type==="search"||it.type==="tel"||it.type==="url"||it.type==="password")||g==="textarea"||it.contentEditable==="true")}function Oe$1(it){var g=Me$1(),et=it.focusedElem,ot=it.selectionRange;if(g!==et&&et&&et.ownerDocument&&Le$1(et.ownerDocument.documentElement,et)){if(ot!==null&&Ne$1(et)){if(g=ot.start,it=ot.end,it===void 0&&(it=g),"selectionStart"in et)et.selectionStart=g,et.selectionEnd=Math.min(it,et.value.length);else if(it=(g=et.ownerDocument||document)&&g.defaultView||window,it.getSelection){it=it.getSelection();var ct=et.textContent.length,ut=Math.min(ot.start,ct);ot=ot.end===void 0?ut:Math.min(ot.end,ct),!it.extend&&ut>ot&&(ct=ot,ot=ut,ut=ct),ct=Ke(et,ut);var dt=Ke(et,ot);ct&&dt&&(it.rangeCount!==1||it.anchorNode!==ct.node||it.anchorOffset!==ct.offset||it.focusNode!==dt.node||it.focusOffset!==dt.offset)&&(g=g.createRange(),g.setStart(ct.node,ct.offset),it.removeAllRanges(),ut>ot?(it.addRange(g),it.extend(dt.node,dt.offset)):(g.setEnd(dt.node,dt.offset),it.addRange(g)))}}for(g=[],it=et;it=it.parentNode;)it.nodeType===1&&g.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<g.length;et++)it=g[et],it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se$1=null,Te$1=!1;function Ue$1(it,g,et){var ot=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te$1||Qe==null||Qe!==Xa(ot)||(ot=Qe,"selectionStart"in ot&&Ne$1(ot)?ot={start:ot.selectionStart,end:ot.selectionEnd}:(ot=(ot.ownerDocument&&ot.ownerDocument.defaultView||window).getSelection(),ot={anchorNode:ot.anchorNode,anchorOffset:ot.anchorOffset,focusNode:ot.focusNode,focusOffset:ot.focusOffset}),Se$1&&Ie$2(Se$1,ot)||(Se$1=ot,ot=oe(Re,"onSelect"),0<ot.length&&(g=new td("onSelect","select",null,g,et),it.push({event:g,listeners:ot}),g.target=Qe)))}function Ve(it,g){var et={};return et[it.toLowerCase()]=g.toLowerCase(),et["Webkit"+it]="webkit"+g,et["Moz"+it]="moz"+g,et}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(it){if(Xe[it])return Xe[it];if(!We$1[it])return it;var g=We$1[it],et;for(et in g)if(g.hasOwnProperty(et)&&et in Ye$1)return Xe[it]=g[et];return it}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(it,g){df.set(it,g),fa(g,[it])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(it,g,et){var ot=it.type||"unknown-event";it.currentTarget=et,Ub(ot,g,void 0,it),it.currentTarget=null}function se(it,g){g=(g&4)!==0;for(var et=0;et<it.length;et++){var ot=it[et],ct=ot.event;ot=ot.listeners;e:{var ut=void 0;if(g)for(var dt=ot.length-1;0<=dt;dt--){var ft=ot[dt],St=ft.instance,kt=ft.currentTarget;if(ft=ft.listener,St!==ut&&ct.isPropagationStopped())break e;nf(ct,ft,kt),ut=St}else for(dt=0;dt<ot.length;dt++){if(ft=ot[dt],St=ft.instance,kt=ft.currentTarget,ft=ft.listener,St!==ut&&ct.isPropagationStopped())break e;nf(ct,ft,kt),ut=St}}}if(Qb)throw it=Rb,Qb=!1,Rb=null,it}function D$1(it,g){var et=g[of];et===void 0&&(et=g[of]=new Set);var ot=it+"__bubble";et.has(ot)||(pf(g,it,2,!1),et.add(ot))}function qf(it,g,et){var ot=0;g&&(ot|=4),pf(et,it,ot,g)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(it){if(!it[rf]){it[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,it),qf(et,!0,it))});var g=it.nodeType===9?it:it.ownerDocument;g===null||g[rf]||(g[rf]=!0,qf("selectionchange",!1,g))}}function pf(it,g,et,ot){switch(jd(g)){case 1:var ct=ed;break;case 4:ct=gd;break;default:ct=fd}et=ct.bind(null,g,et,it),ct=void 0,!Lb||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(ct=!0),ot?ct!==void 0?it.addEventListener(g,et,{capture:!0,passive:ct}):it.addEventListener(g,et,!0):ct!==void 0?it.addEventListener(g,et,{passive:ct}):it.addEventListener(g,et,!1)}function hd(it,g,et,ot,ct){var ut=ot;if(!(g&1)&&!(g&2)&&ot!==null)e:for(;;){if(ot===null)return;var dt=ot.tag;if(dt===3||dt===4){var ft=ot.stateNode.containerInfo;if(ft===ct||ft.nodeType===8&&ft.parentNode===ct)break;if(dt===4)for(dt=ot.return;dt!==null;){var St=dt.tag;if((St===3||St===4)&&(St=dt.stateNode.containerInfo,St===ct||St.nodeType===8&&St.parentNode===ct))return;dt=dt.return}for(;ft!==null;){if(dt=Wc(ft),dt===null)return;if(St=dt.tag,St===5||St===6){ot=ut=dt;continue e}ft=ft.parentNode}}ot=ot.return}Jb(function(){var kt=ut,Tt=xb(et),Rt=[];e:{var jt=df.get(it);if(jt!==void 0){var $t=td,Ft=it;switch(it){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":$t=Rd;break;case"focusin":Ft="focus",$t=Fd;break;case"focusout":Ft="blur",$t=Fd;break;case"beforeblur":case"afterblur":$t=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=Vd;break;case $e$1:case af:case bf:$t=Hd;break;case cf:$t=Xd;break;case"scroll":$t=vd;break;case"wheel":$t=Zd;break;case"copy":case"cut":case"paste":$t=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=Td}var Ht=(g&4)!==0,Kt=!Ht&&it==="scroll",Bt=Ht?jt!==null?jt+"Capture":null:jt;Ht=[];for(var Ut=kt,Yt;Ut!==null;){Yt=Ut;var Jt=Yt.stateNode;if(Yt.tag===5&&Jt!==null&&(Yt=Jt,Bt!==null&&(Jt=Kb(Ut,Bt),Jt!=null&&Ht.push(tf(Ut,Jt,Yt)))),Kt)break;Ut=Ut.return}0<Ht.length&&(jt=new $t(jt,Ft,null,et,Tt),Rt.push({event:jt,listeners:Ht}))}}if(!(g&7)){e:{if(jt=it==="mouseover"||it==="pointerover",$t=it==="mouseout"||it==="pointerout",jt&&et!==wb&&(Ft=et.relatedTarget||et.fromElement)&&(Wc(Ft)||Ft[uf]))break e;if(($t||jt)&&(jt=Tt.window===Tt?Tt:(jt=Tt.ownerDocument)?jt.defaultView||jt.parentWindow:window,$t?(Ft=et.relatedTarget||et.toElement,$t=kt,Ft=Ft?Wc(Ft):null,Ft!==null&&(Kt=Vb(Ft),Ft!==Kt||Ft.tag!==5&&Ft.tag!==6)&&(Ft=null)):($t=null,Ft=kt),$t!==Ft)){if(Ht=Bd,Jt="onMouseLeave",Bt="onMouseEnter",Ut="mouse",(it==="pointerout"||it==="pointerover")&&(Ht=Td,Jt="onPointerLeave",Bt="onPointerEnter",Ut="pointer"),Kt=$t==null?jt:ue$1($t),Yt=Ft==null?jt:ue$1(Ft),jt=new Ht(Jt,Ut+"leave",$t,et,Tt),jt.target=Kt,jt.relatedTarget=Yt,Jt=null,Wc(Tt)===kt&&(Ht=new Ht(Bt,Ut+"enter",Ft,et,Tt),Ht.target=Yt,Ht.relatedTarget=Kt,Jt=Ht),Kt=Jt,$t&&Ft)t:{for(Ht=$t,Bt=Ft,Ut=0,Yt=Ht;Yt;Yt=vf(Yt))Ut++;for(Yt=0,Jt=Bt;Jt;Jt=vf(Jt))Yt++;for(;0<Ut-Yt;)Ht=vf(Ht),Ut--;for(;0<Yt-Ut;)Bt=vf(Bt),Yt--;for(;Ut--;){if(Ht===Bt||Bt!==null&&Ht===Bt.alternate)break t;Ht=vf(Ht),Bt=vf(Bt)}Ht=null}else Ht=null;$t!==null&&wf(Rt,jt,$t,Ht,!1),Ft!==null&&Kt!==null&&wf(Rt,Kt,Ft,Ht,!0)}}e:{if(jt=kt?ue$1(kt):window,$t=jt.nodeName&&jt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&jt.type==="file")var Zt=ve;else if(me$1(jt))if(we$1)Zt=Fe$1;else{Zt=De$1;var en=Ce}else($t=jt.nodeName)&&$t.toLowerCase()==="input"&&(jt.type==="checkbox"||jt.type==="radio")&&(Zt=Ee);if(Zt&&(Zt=Zt(it,kt))){ne(Rt,Zt,et,Tt);break e}en&&en(it,jt,kt),it==="focusout"&&(en=jt._wrapperState)&&en.controlled&&jt.type==="number"&&cb(jt,"number",jt.value)}switch(en=kt?ue$1(kt):window,it){case"focusin":(me$1(en)||en.contentEditable==="true")&&(Qe=en,Re=kt,Se$1=null);break;case"focusout":Se$1=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(Rt,et,Tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue$1(Rt,et,Tt)}var tn;if(ae)e:{switch(it){case"compositionstart":var nn="onCompositionStart";break e;case"compositionend":nn="onCompositionEnd";break e;case"compositionupdate":nn="onCompositionUpdate";break e}nn=void 0}else ie$2?ge(it,et)&&(nn="onCompositionEnd"):it==="keydown"&&et.keyCode===229&&(nn="onCompositionStart");nn&&(de$1&&et.locale!=="ko"&&(ie$2||nn!=="onCompositionStart"?nn==="onCompositionEnd"&&ie$2&&(tn=nd()):(kd=Tt,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),en=oe(kt,nn),0<en.length&&(nn=new Ld(nn,it,null,et,Tt),Rt.push({event:nn,listeners:en}),tn?nn.data=tn:(tn=he$1(et),tn!==null&&(nn.data=tn)))),(tn=ce?je$1(it,et):ke$1(it,et))&&(kt=oe(kt,"onBeforeInput"),0<kt.length&&(Tt=new Ld("onBeforeInput","beforeinput",null,et,Tt),Rt.push({event:Tt,listeners:kt}),Tt.data=tn))}se(Rt,g)})}function tf(it,g,et){return{instance:it,listener:g,currentTarget:et}}function oe(it,g){for(var et=g+"Capture",ot=[];it!==null;){var ct=it,ut=ct.stateNode;ct.tag===5&&ut!==null&&(ct=ut,ut=Kb(it,et),ut!=null&&ot.unshift(tf(it,ut,ct)),ut=Kb(it,g),ut!=null&&ot.push(tf(it,ut,ct))),it=it.return}return ot}function vf(it){if(it===null)return null;do it=it.return;while(it&&it.tag!==5);return it||null}function wf(it,g,et,ot,ct){for(var ut=g._reactName,dt=[];et!==null&&et!==ot;){var ft=et,St=ft.alternate,kt=ft.stateNode;if(St!==null&&St===ot)break;ft.tag===5&&kt!==null&&(ft=kt,ct?(St=Kb(et,ut),St!=null&&dt.unshift(tf(et,St,ft))):ct||(St=Kb(et,ut),St!=null&&dt.push(tf(et,St,ft)))),et=et.return}dt.length!==0&&it.push({event:g,listeners:dt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(it){return(typeof it=="string"?it:""+it).replace(xf,`
`).replace(yf,"")}function Af(it,g,et){if(g=zf(g),zf(it)!==g&&et)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(it,g){return it==="textarea"||it==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(it){return Hf.resolve(null).then(it).catch(If)}:Ff;function If(it){setTimeout(function(){throw it})}function Kf(it,g){var et=g,ot=0;do{var ct=et.nextSibling;if(it.removeChild(et),ct&&ct.nodeType===8)if(et=ct.data,et==="/$"){if(ot===0){it.removeChild(ct),bd(g);return}ot--}else et!=="$"&&et!=="$?"&&et!=="$!"||ot++;et=ct}while(et);bd(g)}function Lf(it){for(;it!=null;it=it.nextSibling){var g=it.nodeType;if(g===1||g===3)break;if(g===8){if(g=it.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return it}function Mf(it){it=it.previousSibling;for(var g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="$"||et==="$!"||et==="$?"){if(g===0)return it;g--}else et==="/$"&&g++}it=it.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(it){var g=it[Of];if(g)return g;for(var et=it.parentNode;et;){if(g=et[uf]||et[Of]){if(et=g.alternate,g.child!==null||et!==null&&et.child!==null)for(it=Mf(it);it!==null;){if(et=it[Of])return et;it=Mf(it)}return g}it=et,et=it.parentNode}return null}function Cb(it){return it=it[Of]||it[uf],!it||it.tag!==5&&it.tag!==6&&it.tag!==13&&it.tag!==3?null:it}function ue$1(it){if(it.tag===5||it.tag===6)return it.stateNode;throw Error(p$3(33))}function Db(it){return it[Pf]||null}var Sf=[],Tf=-1;function Uf(it){return{current:it}}function E$2(it){0>Tf||(it.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(it,g){Tf++,Sf[Tf]=it.current,it.current=g}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(it,g){var et=it.type.contextTypes;if(!et)return Vf;var ot=it.stateNode;if(ot&&ot.__reactInternalMemoizedUnmaskedChildContext===g)return ot.__reactInternalMemoizedMaskedChildContext;var ct={},ut;for(ut in et)ct[ut]=g[ut];return ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=g,it.__reactInternalMemoizedMaskedChildContext=ct),ct}function Zf(it){return it=it.childContextTypes,it!=null}function $f(){E$2(Wf),E$2(H$3)}function ag(it,g,et){if(H$3.current!==Vf)throw Error(p$3(168));G$1(H$3,g),G$1(Wf,et)}function bg(it,g,et){var ot=it.stateNode;if(g=g.childContextTypes,typeof ot.getChildContext!="function")return et;ot=ot.getChildContext();for(var ct in ot)if(!(ct in g))throw Error(p$3(108,Ra(it)||"Unknown",ct));return A$2({},et,ot)}function cg(it){return it=(it=it.stateNode)&&it.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$1(H$3,it),G$1(Wf,Wf.current),!0}function dg(it,g,et){var ot=it.stateNode;if(!ot)throw Error(p$3(169));et?(it=bg(it,g,Xf),ot.__reactInternalMemoizedMergedChildContext=it,E$2(Wf),E$2(H$3),G$1(H$3,it)):E$2(Wf),G$1(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(it){eg===null?eg=[it]:eg.push(it)}function ig(it){fg=!0,hg(it)}function jg(){if(!gg&&eg!==null){gg=!0;var it=0,g=C$4;try{var et=eg;for(C$4=1;it<et.length;it++){var ot=et[it];do ot=ot(!0);while(ot!==null)}eg=null,fg=!1}catch(ct){throw eg!==null&&(eg=eg.slice(it+1)),ac(fc,jg),ct}finally{C$4=g,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(it,g){kg[lg++]=ng,kg[lg++]=mg,mg=it,ng=g}function ug(it,g,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=it;var ot=rg;it=sg;var ct=32-oc(ot)-1;ot&=~(1<<ct),et+=1;var ut=32-oc(g)+ct;if(30<ut){var dt=ct-ct%5;ut=(ot&(1<<dt)-1).toString(32),ot>>=dt,ct-=dt,rg=1<<32-oc(g)+ct|et<<ct|ot,sg=ut+it}else rg=1<<ut|et<<ct|ot,sg=it}function vg(it){it.return!==null&&(tg(it,1),ug(it,1,0))}function wg(it){for(;it===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;it===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(it,g){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=g,et.return=it,g=it.deletions,g===null?(it.deletions=[et],it.flags|=16):g.push(et)}function Cg(it,g){switch(it.tag){case 5:var et=it.type;return g=g.nodeType!==1||et.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(it.stateNode=g,xg=it,yg=Lf(g.firstChild),!0):!1;case 6:return g=it.pendingProps===""||g.nodeType!==3?null:g,g!==null?(it.stateNode=g,xg=it,yg=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(et=qg!==null?{id:rg,overflow:sg}:null,it.memoizedState={dehydrated:g,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=g,et.return=it,it.child=et,xg=it,yg=null,!0):!1;default:return!1}}function Dg(it){return(it.mode&1)!==0&&(it.flags&128)===0}function Eg(it){if(I$4){var g=yg;if(g){var et=g;if(!Cg(it,g)){if(Dg(it))throw Error(p$3(418));g=Lf(et.nextSibling);var ot=xg;g&&Cg(it,g)?Ag(ot,et):(it.flags=it.flags&-4097|2,I$4=!1,xg=it)}}else{if(Dg(it))throw Error(p$3(418));it.flags=it.flags&-4097|2,I$4=!1,xg=it}}}function Fg(it){for(it=it.return;it!==null&&it.tag!==5&&it.tag!==3&&it.tag!==13;)it=it.return;xg=it}function Gg(it){if(it!==xg)return!1;if(!I$4)return Fg(it),I$4=!0,!1;var g;if((g=it.tag!==3)&&!(g=it.tag!==5)&&(g=it.type,g=g!=="head"&&g!=="body"&&!Ef(it.type,it.memoizedProps)),g&&(g=yg)){if(Dg(it))throw Hg(),Error(p$3(418));for(;g;)Ag(it,g),g=Lf(g.nextSibling)}if(Fg(it),it.tag===13){if(it=it.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$3(317));e:{for(it=it.nextSibling,g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="/$"){if(g===0){yg=Lf(it.nextSibling);break e}g--}else et!=="$"&&et!=="$!"&&et!=="$?"||g++}it=it.nextSibling}yg=null}}else yg=xg?Lf(it.stateNode.nextSibling):null;return!0}function Hg(){for(var it=yg;it;)it=Lf(it.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(it){zg===null?zg=[it]:zg.push(it)}var Kg=ua.ReactCurrentBatchConfig;function Lg(it,g,et){if(it=et.ref,it!==null&&typeof it!="function"&&typeof it!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$3(309));var ot=et.stateNode}if(!ot)throw Error(p$3(147,it));var ct=ot,ut=""+it;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===ut?g.ref:(g=function(dt){var ft=ct.refs;dt===null?delete ft[ut]:ft[ut]=dt},g._stringRef=ut,g)}if(typeof it!="string")throw Error(p$3(284));if(!et._owner)throw Error(p$3(290,it))}return it}function Mg(it,g){throw it=Object.prototype.toString.call(g),Error(p$3(31,it==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":it))}function Ng(it){var g=it._init;return g(it._payload)}function Og(it){function g(Bt,Ut){if(it){var Yt=Bt.deletions;Yt===null?(Bt.deletions=[Ut],Bt.flags|=16):Yt.push(Ut)}}function et(Bt,Ut){if(!it)return null;for(;Ut!==null;)g(Bt,Ut),Ut=Ut.sibling;return null}function ot(Bt,Ut){for(Bt=new Map;Ut!==null;)Ut.key!==null?Bt.set(Ut.key,Ut):Bt.set(Ut.index,Ut),Ut=Ut.sibling;return Bt}function ct(Bt,Ut){return Bt=Pg(Bt,Ut),Bt.index=0,Bt.sibling=null,Bt}function ut(Bt,Ut,Yt){return Bt.index=Yt,it?(Yt=Bt.alternate,Yt!==null?(Yt=Yt.index,Yt<Ut?(Bt.flags|=2,Ut):Yt):(Bt.flags|=2,Ut)):(Bt.flags|=1048576,Ut)}function dt(Bt){return it&&Bt.alternate===null&&(Bt.flags|=2),Bt}function ft(Bt,Ut,Yt,Jt){return Ut===null||Ut.tag!==6?(Ut=Qg(Yt,Bt.mode,Jt),Ut.return=Bt,Ut):(Ut=ct(Ut,Yt),Ut.return=Bt,Ut)}function St(Bt,Ut,Yt,Jt){var Zt=Yt.type;return Zt===ya?Tt(Bt,Ut,Yt.props.children,Jt,Yt.key):Ut!==null&&(Ut.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===Ha&&Ng(Zt)===Ut.type)?(Jt=ct(Ut,Yt.props),Jt.ref=Lg(Bt,Ut,Yt),Jt.return=Bt,Jt):(Jt=Rg(Yt.type,Yt.key,Yt.props,null,Bt.mode,Jt),Jt.ref=Lg(Bt,Ut,Yt),Jt.return=Bt,Jt)}function kt(Bt,Ut,Yt,Jt){return Ut===null||Ut.tag!==4||Ut.stateNode.containerInfo!==Yt.containerInfo||Ut.stateNode.implementation!==Yt.implementation?(Ut=Sg(Yt,Bt.mode,Jt),Ut.return=Bt,Ut):(Ut=ct(Ut,Yt.children||[]),Ut.return=Bt,Ut)}function Tt(Bt,Ut,Yt,Jt,Zt){return Ut===null||Ut.tag!==7?(Ut=Tg(Yt,Bt.mode,Jt,Zt),Ut.return=Bt,Ut):(Ut=ct(Ut,Yt),Ut.return=Bt,Ut)}function Rt(Bt,Ut,Yt){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number")return Ut=Qg(""+Ut,Bt.mode,Yt),Ut.return=Bt,Ut;if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case va:return Yt=Rg(Ut.type,Ut.key,Ut.props,null,Bt.mode,Yt),Yt.ref=Lg(Bt,null,Ut),Yt.return=Bt,Yt;case wa:return Ut=Sg(Ut,Bt.mode,Yt),Ut.return=Bt,Ut;case Ha:var Jt=Ut._init;return Rt(Bt,Jt(Ut._payload),Yt)}if(eb(Ut)||Ka(Ut))return Ut=Tg(Ut,Bt.mode,Yt,null),Ut.return=Bt,Ut;Mg(Bt,Ut)}return null}function jt(Bt,Ut,Yt,Jt){var Zt=Ut!==null?Ut.key:null;if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return Zt!==null?null:ft(Bt,Ut,""+Yt,Jt);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case va:return Yt.key===Zt?St(Bt,Ut,Yt,Jt):null;case wa:return Yt.key===Zt?kt(Bt,Ut,Yt,Jt):null;case Ha:return Zt=Yt._init,jt(Bt,Ut,Zt(Yt._payload),Jt)}if(eb(Yt)||Ka(Yt))return Zt!==null?null:Tt(Bt,Ut,Yt,Jt,null);Mg(Bt,Yt)}return null}function $t(Bt,Ut,Yt,Jt,Zt){if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return Bt=Bt.get(Yt)||null,ft(Ut,Bt,""+Jt,Zt);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case va:return Bt=Bt.get(Jt.key===null?Yt:Jt.key)||null,St(Ut,Bt,Jt,Zt);case wa:return Bt=Bt.get(Jt.key===null?Yt:Jt.key)||null,kt(Ut,Bt,Jt,Zt);case Ha:var en=Jt._init;return $t(Bt,Ut,Yt,en(Jt._payload),Zt)}if(eb(Jt)||Ka(Jt))return Bt=Bt.get(Yt)||null,Tt(Ut,Bt,Jt,Zt,null);Mg(Ut,Jt)}return null}function Ft(Bt,Ut,Yt,Jt){for(var Zt=null,en=null,tn=Ut,nn=Ut=0,ln=null;tn!==null&&nn<Yt.length;nn++){tn.index>nn?(ln=tn,tn=null):ln=tn.sibling;var an=jt(Bt,tn,Yt[nn],Jt);if(an===null){tn===null&&(tn=ln);break}it&&tn&&an.alternate===null&&g(Bt,tn),Ut=ut(an,Ut,nn),en===null?Zt=an:en.sibling=an,en=an,tn=ln}if(nn===Yt.length)return et(Bt,tn),I$4&&tg(Bt,nn),Zt;if(tn===null){for(;nn<Yt.length;nn++)tn=Rt(Bt,Yt[nn],Jt),tn!==null&&(Ut=ut(tn,Ut,nn),en===null?Zt=tn:en.sibling=tn,en=tn);return I$4&&tg(Bt,nn),Zt}for(tn=ot(Bt,tn);nn<Yt.length;nn++)ln=$t(tn,Bt,nn,Yt[nn],Jt),ln!==null&&(it&&ln.alternate!==null&&tn.delete(ln.key===null?nn:ln.key),Ut=ut(ln,Ut,nn),en===null?Zt=ln:en.sibling=ln,en=ln);return it&&tn.forEach(function(sn){return g(Bt,sn)}),I$4&&tg(Bt,nn),Zt}function Ht(Bt,Ut,Yt,Jt){var Zt=Ka(Yt);if(typeof Zt!="function")throw Error(p$3(150));if(Yt=Zt.call(Yt),Yt==null)throw Error(p$3(151));for(var en=Zt=null,tn=Ut,nn=Ut=0,ln=null,an=Yt.next();tn!==null&&!an.done;nn++,an=Yt.next()){tn.index>nn?(ln=tn,tn=null):ln=tn.sibling;var sn=jt(Bt,tn,an.value,Jt);if(sn===null){tn===null&&(tn=ln);break}it&&tn&&sn.alternate===null&&g(Bt,tn),Ut=ut(sn,Ut,nn),en===null?Zt=sn:en.sibling=sn,en=sn,tn=ln}if(an.done)return et(Bt,tn),I$4&&tg(Bt,nn),Zt;if(tn===null){for(;!an.done;nn++,an=Yt.next())an=Rt(Bt,an.value,Jt),an!==null&&(Ut=ut(an,Ut,nn),en===null?Zt=an:en.sibling=an,en=an);return I$4&&tg(Bt,nn),Zt}for(tn=ot(Bt,tn);!an.done;nn++,an=Yt.next())an=$t(tn,Bt,nn,an.value,Jt),an!==null&&(it&&an.alternate!==null&&tn.delete(an.key===null?nn:an.key),Ut=ut(an,Ut,nn),en===null?Zt=an:en.sibling=an,en=an);return it&&tn.forEach(function(dn){return g(Bt,dn)}),I$4&&tg(Bt,nn),Zt}function Kt(Bt,Ut,Yt,Jt){if(typeof Yt=="object"&&Yt!==null&&Yt.type===ya&&Yt.key===null&&(Yt=Yt.props.children),typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case va:e:{for(var Zt=Yt.key,en=Ut;en!==null;){if(en.key===Zt){if(Zt=Yt.type,Zt===ya){if(en.tag===7){et(Bt,en.sibling),Ut=ct(en,Yt.props.children),Ut.return=Bt,Bt=Ut;break e}}else if(en.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===Ha&&Ng(Zt)===en.type){et(Bt,en.sibling),Ut=ct(en,Yt.props),Ut.ref=Lg(Bt,en,Yt),Ut.return=Bt,Bt=Ut;break e}et(Bt,en);break}else g(Bt,en);en=en.sibling}Yt.type===ya?(Ut=Tg(Yt.props.children,Bt.mode,Jt,Yt.key),Ut.return=Bt,Bt=Ut):(Jt=Rg(Yt.type,Yt.key,Yt.props,null,Bt.mode,Jt),Jt.ref=Lg(Bt,Ut,Yt),Jt.return=Bt,Bt=Jt)}return dt(Bt);case wa:e:{for(en=Yt.key;Ut!==null;){if(Ut.key===en)if(Ut.tag===4&&Ut.stateNode.containerInfo===Yt.containerInfo&&Ut.stateNode.implementation===Yt.implementation){et(Bt,Ut.sibling),Ut=ct(Ut,Yt.children||[]),Ut.return=Bt,Bt=Ut;break e}else{et(Bt,Ut);break}else g(Bt,Ut);Ut=Ut.sibling}Ut=Sg(Yt,Bt.mode,Jt),Ut.return=Bt,Bt=Ut}return dt(Bt);case Ha:return en=Yt._init,Kt(Bt,Ut,en(Yt._payload),Jt)}if(eb(Yt))return Ft(Bt,Ut,Yt,Jt);if(Ka(Yt))return Ht(Bt,Ut,Yt,Jt);Mg(Bt,Yt)}return typeof Yt=="string"&&Yt!==""||typeof Yt=="number"?(Yt=""+Yt,Ut!==null&&Ut.tag===6?(et(Bt,Ut.sibling),Ut=ct(Ut,Yt),Ut.return=Bt,Bt=Ut):(et(Bt,Ut),Ut=Qg(Yt,Bt.mode,Jt),Ut.return=Bt,Bt=Ut),dt(Bt)):et(Bt,Ut)}return Kt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(it){var g=Wg.current;E$2(Wg),it._currentValue=g}function bh(it,g,et){for(;it!==null;){var ot=it.alternate;if((it.childLanes&g)!==g?(it.childLanes|=g,ot!==null&&(ot.childLanes|=g)):ot!==null&&(ot.childLanes&g)!==g&&(ot.childLanes|=g),it===et)break;it=it.return}}function ch(it,g){Xg=it,Zg=Yg=null,it=it.dependencies,it!==null&&it.firstContext!==null&&(it.lanes&g&&(dh=!0),it.firstContext=null)}function eh(it){var g=it._currentValue;if(Zg!==it)if(it={context:it,memoizedValue:g,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=it,Xg.dependencies={lanes:0,firstContext:it}}else Yg=Yg.next=it;return g}var fh=null;function gh(it){fh===null?fh=[it]:fh.push(it)}function hh(it,g,et,ot){var ct=g.interleaved;return ct===null?(et.next=et,gh(g)):(et.next=ct.next,ct.next=et),g.interleaved=et,ih(it,ot)}function ih(it,g){it.lanes|=g;var et=it.alternate;for(et!==null&&(et.lanes|=g),et=it,it=it.return;it!==null;)it.childLanes|=g,et=it.alternate,et!==null&&(et.childLanes|=g),et=it,it=it.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(it){it.updateQueue={baseState:it.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(it,g){it=it.updateQueue,g.updateQueue===it&&(g.updateQueue={baseState:it.baseState,firstBaseUpdate:it.firstBaseUpdate,lastBaseUpdate:it.lastBaseUpdate,shared:it.shared,effects:it.effects})}function mh(it,g){return{eventTime:it,lane:g,tag:0,payload:null,callback:null,next:null}}function nh(it,g,et){var ot=it.updateQueue;if(ot===null)return null;if(ot=ot.shared,K$2&2){var ct=ot.pending;return ct===null?g.next=g:(g.next=ct.next,ct.next=g),ot.pending=g,ih(it,et)}return ct=ot.interleaved,ct===null?(g.next=g,gh(ot)):(g.next=ct.next,ct.next=g),ot.interleaved=g,ih(it,et)}function oh(it,g,et){if(g=g.updateQueue,g!==null&&(g=g.shared,(et&4194240)!==0)){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}function ph(it,g){var et=it.updateQueue,ot=it.alternate;if(ot!==null&&(ot=ot.updateQueue,et===ot)){var ct=null,ut=null;if(et=et.firstBaseUpdate,et!==null){do{var dt={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};ut===null?ct=ut=dt:ut=ut.next=dt,et=et.next}while(et!==null);ut===null?ct=ut=g:ut=ut.next=g}else ct=ut=g;et={baseState:ot.baseState,firstBaseUpdate:ct,lastBaseUpdate:ut,shared:ot.shared,effects:ot.effects},it.updateQueue=et;return}it=et.lastBaseUpdate,it===null?et.firstBaseUpdate=g:it.next=g,et.lastBaseUpdate=g}function qh(it,g,et,ot){var ct=it.updateQueue;jh=!1;var ut=ct.firstBaseUpdate,dt=ct.lastBaseUpdate,ft=ct.shared.pending;if(ft!==null){ct.shared.pending=null;var St=ft,kt=St.next;St.next=null,dt===null?ut=kt:dt.next=kt,dt=St;var Tt=it.alternate;Tt!==null&&(Tt=Tt.updateQueue,ft=Tt.lastBaseUpdate,ft!==dt&&(ft===null?Tt.firstBaseUpdate=kt:ft.next=kt,Tt.lastBaseUpdate=St))}if(ut!==null){var Rt=ct.baseState;dt=0,Tt=kt=St=null,ft=ut;do{var jt=ft.lane,$t=ft.eventTime;if((ot&jt)===jt){Tt!==null&&(Tt=Tt.next={eventTime:$t,lane:0,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null});e:{var Ft=it,Ht=ft;switch(jt=g,$t=et,Ht.tag){case 1:if(Ft=Ht.payload,typeof Ft=="function"){Rt=Ft.call($t,Rt,jt);break e}Rt=Ft;break e;case 3:Ft.flags=Ft.flags&-65537|128;case 0:if(Ft=Ht.payload,jt=typeof Ft=="function"?Ft.call($t,Rt,jt):Ft,jt==null)break e;Rt=A$2({},Rt,jt);break e;case 2:jh=!0}}ft.callback!==null&&ft.lane!==0&&(it.flags|=64,jt=ct.effects,jt===null?ct.effects=[ft]:jt.push(ft))}else $t={eventTime:$t,lane:jt,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},Tt===null?(kt=Tt=$t,St=Rt):Tt=Tt.next=$t,dt|=jt;if(ft=ft.next,ft===null){if(ft=ct.shared.pending,ft===null)break;jt=ft,ft=jt.next,jt.next=null,ct.lastBaseUpdate=jt,ct.shared.pending=null}}while(1);if(Tt===null&&(St=Rt),ct.baseState=St,ct.firstBaseUpdate=kt,ct.lastBaseUpdate=Tt,g=ct.shared.interleaved,g!==null){ct=g;do dt|=ct.lane,ct=ct.next;while(ct!==g)}else ut===null&&(ct.shared.lanes=0);rh|=dt,it.lanes=dt,it.memoizedState=Rt}}function sh(it,g,et){if(it=g.effects,g.effects=null,it!==null)for(g=0;g<it.length;g++){var ot=it[g],ct=ot.callback;if(ct!==null){if(ot.callback=null,ot=et,typeof ct!="function")throw Error(p$3(191,ct));ct.call(ot)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(it){if(it===th)throw Error(p$3(174));return it}function yh(it,g){switch(G$1(wh,g),G$1(vh$1,it),G$1(uh,th),it=g.nodeType,it){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:lb(null,"");break;default:it=it===8?g.parentNode:g,g=it.namespaceURI||null,it=it.tagName,g=lb(g,it)}E$2(uh),G$1(uh,g)}function zh(){E$2(uh),E$2(vh$1),E$2(wh)}function Ah(it){xh(wh.current);var g=xh(uh.current),et=lb(g,it.type);g!==et&&(G$1(vh$1,it),G$1(uh,et))}function Bh(it){vh$1.current===it&&(E$2(uh),E$2(vh$1))}var L$3=Uf(0);function Ch(it){for(var g=it;g!==null;){if(g.tag===13){var et=g.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Dh=[];function Eh(){for(var it=0;it<Dh.length;it++)Dh[it]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$3=null,N$2=null,O$4=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$3(){throw Error(p$3(321))}function Mh(it,g){if(g===null)return!1;for(var et=0;et<g.length&&et<it.length;et++)if(!He$2(it[et],g[et]))return!1;return!0}function Nh(it,g,et,ot,ct,ut){if(Hh=ut,M$3=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Fh.current=it===null||it.memoizedState===null?Oh:Ph,it=et(ot,ct),Jh){ut=0;do{if(Jh=!1,Kh=0,25<=ut)throw Error(p$3(301));ut+=1,O$4=N$2=null,g.updateQueue=null,Fh.current=Qh,it=et(ot,ct)}while(Jh)}if(Fh.current=Rh,g=N$2!==null&&N$2.next!==null,Hh=0,O$4=N$2=M$3=null,Ih=!1,g)throw Error(p$3(300));return it}function Sh(){var it=Kh!==0;return Kh=0,it}function Th(){var it={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it,O$4}function Uh(){if(N$2===null){var it=M$3.alternate;it=it!==null?it.memoizedState:null}else it=N$2.next;var g=O$4===null?M$3.memoizedState:O$4.next;if(g!==null)O$4=g,N$2=it;else{if(it===null)throw Error(p$3(310));N$2=it,it={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it}return O$4}function Vh(it,g){return typeof g=="function"?g(it):g}function Wh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=N$2,ct=ot.baseQueue,ut=et.pending;if(ut!==null){if(ct!==null){var dt=ct.next;ct.next=ut.next,ut.next=dt}ot.baseQueue=ct=ut,et.pending=null}if(ct!==null){ut=ct.next,ot=ot.baseState;var ft=dt=null,St=null,kt=ut;do{var Tt=kt.lane;if((Hh&Tt)===Tt)St!==null&&(St=St.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),ot=kt.hasEagerState?kt.eagerState:it(ot,kt.action);else{var Rt={lane:Tt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};St===null?(ft=St=Rt,dt=ot):St=St.next=Rt,M$3.lanes|=Tt,rh|=Tt}kt=kt.next}while(kt!==null&&kt!==ut);St===null?dt=ot:St.next=ft,He$2(ot,g.memoizedState)||(dh=!0),g.memoizedState=ot,g.baseState=dt,g.baseQueue=St,et.lastRenderedState=ot}if(it=et.interleaved,it!==null){ct=it;do ut=ct.lane,M$3.lanes|=ut,rh|=ut,ct=ct.next;while(ct!==it)}else ct===null&&(et.lanes=0);return[g.memoizedState,et.dispatch]}function Xh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=et.dispatch,ct=et.pending,ut=g.memoizedState;if(ct!==null){et.pending=null;var dt=ct=ct.next;do ut=it(ut,dt.action),dt=dt.next;while(dt!==ct);He$2(ut,g.memoizedState)||(dh=!0),g.memoizedState=ut,g.baseQueue===null&&(g.baseState=ut),et.lastRenderedState=ut}return[ut,ot]}function Yh(){}function Zh(it,g){var et=M$3,ot=Uh(),ct=g(),ut=!He$2(ot.memoizedState,ct);if(ut&&(ot.memoizedState=ct,dh=!0),ot=ot.queue,$h(ai.bind(null,et,ot,it),[it]),ot.getSnapshot!==g||ut||O$4!==null&&O$4.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,ot,ct,g),void 0,null),Q$1===null)throw Error(p$3(349));Hh&30||di(et,g,ct)}return ct}function di(it,g,et){it.flags|=16384,it={getSnapshot:g,value:et},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.stores=[it]):(et=g.stores,et===null?g.stores=[it]:et.push(it))}function ci(it,g,et,ot){g.value=et,g.getSnapshot=ot,ei(g)&&fi(it)}function ai(it,g,et){return et(function(){ei(g)&&fi(it)})}function ei(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!He$2(it,et)}catch{return!0}}function fi(it){var g=ih(it,1);g!==null&&gi(g,it,1,-1)}function hi(it){var g=Th();return typeof it=="function"&&(it=it()),g.memoizedState=g.baseState=it,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:it},g.queue=it,it=it.dispatch=ii.bind(null,M$3,it),[g.memoizedState,it]}function bi(it,g,et,ot){return it={tag:it,create:g,destroy:et,deps:ot,next:null},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.lastEffect=it.next=it):(et=g.lastEffect,et===null?g.lastEffect=it.next=it:(ot=et.next,et.next=it,it.next=ot,g.lastEffect=it)),it}function ji(){return Uh().memoizedState}function ki(it,g,et,ot){var ct=Th();M$3.flags|=it,ct.memoizedState=bi(1|g,et,void 0,ot===void 0?null:ot)}function li(it,g,et,ot){var ct=Uh();ot=ot===void 0?null:ot;var ut=void 0;if(N$2!==null){var dt=N$2.memoizedState;if(ut=dt.destroy,ot!==null&&Mh(ot,dt.deps)){ct.memoizedState=bi(g,et,ut,ot);return}}M$3.flags|=it,ct.memoizedState=bi(1|g,et,ut,ot)}function mi(it,g){return ki(8390656,8,it,g)}function $h(it,g){return li(2048,8,it,g)}function ni(it,g){return li(4,2,it,g)}function oi(it,g){return li(4,4,it,g)}function pi(it,g){if(typeof g=="function")return it=it(),g(it),function(){g(null)};if(g!=null)return it=it(),g.current=it,function(){g.current=null}}function qi(it,g,et){return et=et!=null?et.concat([it]):null,li(4,4,pi.bind(null,g,it),et)}function ri(){}function si(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(et.memoizedState=[it,g],it)}function ti(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(it=it(),et.memoizedState=[it,g],it)}function ui(it,g,et){return Hh&21?(He$2(et,g)||(et=yc(),M$3.lanes|=et,rh|=et,it.baseState=!0),g):(it.baseState&&(it.baseState=!1,dh=!0),it.memoizedState=et)}function vi(it,g){var et=C$4;C$4=et!==0&&4>et?et:4,it(!0);var ot=Gh.transition;Gh.transition={};try{it(!1),g()}finally{C$4=et,Gh.transition=ot}}function wi(){return Uh().memoizedState}function xi(it,g,et){var ot=yi(it);if(et={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null},zi(it))Ai(g,et);else if(et=hh(it,g,et,ot),et!==null){var ct=R$3();gi(et,it,ot,ct),Bi(et,g,ot)}}function ii(it,g,et){var ot=yi(it),ct={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(it))Ai(g,ct);else{var ut=it.alternate;if(it.lanes===0&&(ut===null||ut.lanes===0)&&(ut=g.lastRenderedReducer,ut!==null))try{var dt=g.lastRenderedState,ft=ut(dt,et);if(ct.hasEagerState=!0,ct.eagerState=ft,He$2(ft,dt)){var St=g.interleaved;St===null?(ct.next=ct,gh(g)):(ct.next=St.next,St.next=ct),g.interleaved=ct;return}}catch{}finally{}et=hh(it,g,ct,ot),et!==null&&(ct=R$3(),gi(et,it,ot,ct),Bi(et,g,ot))}}function zi(it){var g=it.alternate;return it===M$3||g!==null&&g===M$3}function Ai(it,g){Jh=Ih=!0;var et=it.pending;et===null?g.next=g:(g.next=et.next,et.next=g),it.pending=g}function Bi(it,g,et){if(et&4194240){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}var Rh={readContext:eh,useCallback:P$3,useContext:P$3,useEffect:P$3,useImperativeHandle:P$3,useInsertionEffect:P$3,useLayoutEffect:P$3,useMemo:P$3,useReducer:P$3,useRef:P$3,useState:P$3,useDebugValue:P$3,useDeferredValue:P$3,useTransition:P$3,useMutableSource:P$3,useSyncExternalStore:P$3,useId:P$3,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(it,g){return Th().memoizedState=[it,g===void 0?null:g],it},useContext:eh,useEffect:mi,useImperativeHandle:function(it,g,et){return et=et!=null?et.concat([it]):null,ki(4194308,4,pi.bind(null,g,it),et)},useLayoutEffect:function(it,g){return ki(4194308,4,it,g)},useInsertionEffect:function(it,g){return ki(4,2,it,g)},useMemo:function(it,g){var et=Th();return g=g===void 0?null:g,it=it(),et.memoizedState=[it,g],it},useReducer:function(it,g,et){var ot=Th();return g=et!==void 0?et(g):g,ot.memoizedState=ot.baseState=g,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:g},ot.queue=it,it=it.dispatch=xi.bind(null,M$3,it),[ot.memoizedState,it]},useRef:function(it){var g=Th();return it={current:it},g.memoizedState=it},useState:hi,useDebugValue:ri,useDeferredValue:function(it){return Th().memoizedState=it},useTransition:function(){var it=hi(!1),g=it[0];return it=vi.bind(null,it[1]),Th().memoizedState=it,[g,it]},useMutableSource:function(){},useSyncExternalStore:function(it,g,et){var ot=M$3,ct=Th();if(I$4){if(et===void 0)throw Error(p$3(407));et=et()}else{if(et=g(),Q$1===null)throw Error(p$3(349));Hh&30||di(ot,g,et)}ct.memoizedState=et;var ut={value:et,getSnapshot:g};return ct.queue=ut,mi(ai.bind(null,ot,ut,it),[it]),ot.flags|=2048,bi(9,ci.bind(null,ot,ut,et,g),void 0,null),et},useId:function(){var it=Th(),g=Q$1.identifierPrefix;if(I$4){var et=sg,ot=rg;et=(ot&~(1<<32-oc(ot)-1)).toString(32)+et,g=":"+g+"R"+et,et=Kh++,0<et&&(g+="H"+et.toString(32)),g+=":"}else et=Lh++,g=":"+g+"r"+et.toString(32)+":";return it.memoizedState=g},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Wh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return N$2===null?g.memoizedState=it:ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Xh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(it,g){if(it&&it.defaultProps){g=A$2({},g),it=it.defaultProps;for(var et in it)g[et]===void 0&&(g[et]=it[et]);return g}return g}function Di(it,g,et,ot){g=it.memoizedState,et=et(ot,g),et=et==null?g:A$2({},g,et),it.memoizedState=et,it.lanes===0&&(it.updateQueue.baseState=et)}var Ei={isMounted:function(it){return(it=it._reactInternals)?Vb(it)===it:!1},enqueueSetState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ct=yi(it),ut=mh(ot,ct);ut.payload=g,et!=null&&(ut.callback=et),g=nh(it,ut,ct),g!==null&&(gi(g,it,ct,ot),oh(g,it,ct))},enqueueReplaceState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ct=yi(it),ut=mh(ot,ct);ut.tag=1,ut.payload=g,et!=null&&(ut.callback=et),g=nh(it,ut,ct),g!==null&&(gi(g,it,ct,ot),oh(g,it,ct))},enqueueForceUpdate:function(it,g){it=it._reactInternals;var et=R$3(),ot=yi(it),ct=mh(et,ot);ct.tag=2,g!=null&&(ct.callback=g),g=nh(it,ct,ot),g!==null&&(gi(g,it,ot,et),oh(g,it,ot))}};function Fi(it,g,et,ot,ct,ut,dt){return it=it.stateNode,typeof it.shouldComponentUpdate=="function"?it.shouldComponentUpdate(ot,ut,dt):g.prototype&&g.prototype.isPureReactComponent?!Ie$2(et,ot)||!Ie$2(ct,ut):!0}function Gi(it,g,et){var ot=!1,ct=Vf,ut=g.contextType;return typeof ut=="object"&&ut!==null?ut=eh(ut):(ct=Zf(g)?Xf:H$3.current,ot=g.contextTypes,ut=(ot=ot!=null)?Yf(it,ct):Vf),g=new g(et,ut),it.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ei,it.stateNode=g,g._reactInternals=it,ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=ct,it.__reactInternalMemoizedMaskedChildContext=ut),g}function Hi(it,g,et,ot){it=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(et,ot),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(et,ot),g.state!==it&&Ei.enqueueReplaceState(g,g.state,null)}function Ii(it,g,et,ot){var ct=it.stateNode;ct.props=et,ct.state=it.memoizedState,ct.refs={},kh(it);var ut=g.contextType;typeof ut=="object"&&ut!==null?ct.context=eh(ut):(ut=Zf(g)?Xf:H$3.current,ct.context=Yf(it,ut)),ct.state=it.memoizedState,ut=g.getDerivedStateFromProps,typeof ut=="function"&&(Di(it,g,ut,et),ct.state=it.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof ct.getSnapshotBeforeUpdate=="function"||typeof ct.UNSAFE_componentWillMount!="function"&&typeof ct.componentWillMount!="function"||(g=ct.state,typeof ct.componentWillMount=="function"&&ct.componentWillMount(),typeof ct.UNSAFE_componentWillMount=="function"&&ct.UNSAFE_componentWillMount(),g!==ct.state&&Ei.enqueueReplaceState(ct,ct.state,null),qh(it,et,ct,ot),ct.state=it.memoizedState),typeof ct.componentDidMount=="function"&&(it.flags|=4194308)}function Ji(it,g){try{var et="",ot=g;do et+=Pa(ot),ot=ot.return;while(ot);var ct=et}catch(ut){ct=`
Error generating stack: `+ut.message+`
`+ut.stack}return{value:it,source:g,stack:ct,digest:null}}function Ki(it,g,et){return{value:it,source:null,stack:et??null,digest:g??null}}function Li(it,g){try{console.error(g.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(it,g,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var ot=g.value;return et.callback=function(){Oi||(Oi=!0,Pi=ot),Li(it,g)},et}function Qi(it,g,et){et=mh(-1,et),et.tag=3;var ot=it.type.getDerivedStateFromError;if(typeof ot=="function"){var ct=g.value;et.payload=function(){return ot(ct)},et.callback=function(){Li(it,g)}}var ut=it.stateNode;return ut!==null&&typeof ut.componentDidCatch=="function"&&(et.callback=function(){Li(it,g),typeof ot!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var dt=g.stack;this.componentDidCatch(g.value,{componentStack:dt!==null?dt:""})}),et}function Si(it,g,et){var ot=it.pingCache;if(ot===null){ot=it.pingCache=new Mi;var ct=new Set;ot.set(g,ct)}else ct=ot.get(g),ct===void 0&&(ct=new Set,ot.set(g,ct));ct.has(et)||(ct.add(et),it=Ti.bind(null,it,g,et),g.then(it,it))}function Ui(it){do{var g;if((g=it.tag===13)&&(g=it.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return it;it=it.return}while(it!==null);return null}function Vi(it,g,et,ot,ct){return it.mode&1?(it.flags|=65536,it.lanes=ct,it):(it===g?it.flags|=65536:(it.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(g=mh(-1,1),g.tag=2,nh(et,g,1))),et.lanes|=1),it)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(it,g,et,ot){g.child=it===null?Vg(g,null,et,ot):Ug(g,it.child,et,ot)}function Yi(it,g,et,ot,ct){et=et.render;var ut=g.ref;return ch(g,ct),ot=Nh(it,g,et,ot,ut,ct),et=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ct,Zi(it,g,ct)):(I$4&&et&&vg(g),g.flags|=1,Xi(it,g,ot,ct),g.child)}function $i(it,g,et,ot,ct){if(it===null){var ut=et.type;return typeof ut=="function"&&!aj(ut)&&ut.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(g.tag=15,g.type=ut,bj(it,g,ut,ot,ct)):(it=Rg(et.type,null,ot,g,g.mode,ct),it.ref=g.ref,it.return=g,g.child=it)}if(ut=it.child,!(it.lanes&ct)){var dt=ut.memoizedProps;if(et=et.compare,et=et!==null?et:Ie$2,et(dt,ot)&&it.ref===g.ref)return Zi(it,g,ct)}return g.flags|=1,it=Pg(ut,ot),it.ref=g.ref,it.return=g,g.child=it}function bj(it,g,et,ot,ct){if(it!==null){var ut=it.memoizedProps;if(Ie$2(ut,ot)&&it.ref===g.ref)if(dh=!1,g.pendingProps=ot=ut,(it.lanes&ct)!==0)it.flags&131072&&(dh=!0);else return g.lanes=it.lanes,Zi(it,g,ct)}return cj(it,g,et,ot,ct)}function dj(it,g,et){var ot=g.pendingProps,ct=ot.children,ut=it!==null?it.memoizedState:null;if(ot.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=et;else{if(!(et&1073741824))return it=ut!==null?ut.baseLanes|et:et,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:it,cachePool:null,transitions:null},g.updateQueue=null,G$1(ej,fj),fj|=it,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot=ut!==null?ut.baseLanes:et,G$1(ej,fj),fj|=ot}else ut!==null?(ot=ut.baseLanes|et,g.memoizedState=null):ot=et,G$1(ej,fj),fj|=ot;return Xi(it,g,ct,et),g.child}function gj(it,g){var et=g.ref;(it===null&&et!==null||it!==null&&it.ref!==et)&&(g.flags|=512,g.flags|=2097152)}function cj(it,g,et,ot,ct){var ut=Zf(et)?Xf:H$3.current;return ut=Yf(g,ut),ch(g,ct),et=Nh(it,g,et,ot,ut,ct),ot=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ct,Zi(it,g,ct)):(I$4&&ot&&vg(g),g.flags|=1,Xi(it,g,et,ct),g.child)}function hj(it,g,et,ot,ct){if(Zf(et)){var ut=!0;cg(g)}else ut=!1;if(ch(g,ct),g.stateNode===null)ij(it,g),Gi(g,et,ot),Ii(g,et,ot,ct),ot=!0;else if(it===null){var dt=g.stateNode,ft=g.memoizedProps;dt.props=ft;var St=dt.context,kt=et.contextType;typeof kt=="object"&&kt!==null?kt=eh(kt):(kt=Zf(et)?Xf:H$3.current,kt=Yf(g,kt));var Tt=et.getDerivedStateFromProps,Rt=typeof Tt=="function"||typeof dt.getSnapshotBeforeUpdate=="function";Rt||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==ot||St!==kt)&&Hi(g,dt,ot,kt),jh=!1;var jt=g.memoizedState;dt.state=jt,qh(g,ot,dt,ct),St=g.memoizedState,ft!==ot||jt!==St||Wf.current||jh?(typeof Tt=="function"&&(Di(g,et,Tt,ot),St=g.memoizedState),(ft=jh||Fi(g,et,ft,ot,jt,St,kt))?(Rt||typeof dt.UNSAFE_componentWillMount!="function"&&typeof dt.componentWillMount!="function"||(typeof dt.componentWillMount=="function"&&dt.componentWillMount(),typeof dt.UNSAFE_componentWillMount=="function"&&dt.UNSAFE_componentWillMount()),typeof dt.componentDidMount=="function"&&(g.flags|=4194308)):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=ot,g.memoizedState=St),dt.props=ot,dt.state=St,dt.context=kt,ot=ft):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),ot=!1)}else{dt=g.stateNode,lh(it,g),ft=g.memoizedProps,kt=g.type===g.elementType?ft:Ci(g.type,ft),dt.props=kt,Rt=g.pendingProps,jt=dt.context,St=et.contextType,typeof St=="object"&&St!==null?St=eh(St):(St=Zf(et)?Xf:H$3.current,St=Yf(g,St));var $t=et.getDerivedStateFromProps;(Tt=typeof $t=="function"||typeof dt.getSnapshotBeforeUpdate=="function")||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==Rt||jt!==St)&&Hi(g,dt,ot,St),jh=!1,jt=g.memoizedState,dt.state=jt,qh(g,ot,dt,ct);var Ft=g.memoizedState;ft!==Rt||jt!==Ft||Wf.current||jh?(typeof $t=="function"&&(Di(g,et,$t,ot),Ft=g.memoizedState),(kt=jh||Fi(g,et,kt,ot,jt,Ft,St)||!1)?(Tt||typeof dt.UNSAFE_componentWillUpdate!="function"&&typeof dt.componentWillUpdate!="function"||(typeof dt.componentWillUpdate=="function"&&dt.componentWillUpdate(ot,Ft,St),typeof dt.UNSAFE_componentWillUpdate=="function"&&dt.UNSAFE_componentWillUpdate(ot,Ft,St)),typeof dt.componentDidUpdate=="function"&&(g.flags|=4),typeof dt.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=1024),g.memoizedProps=ot,g.memoizedState=Ft),dt.props=ot,dt.state=Ft,dt.context=St,ot=kt):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&jt===it.memoizedState||(g.flags|=1024),ot=!1)}return jj(it,g,et,ot,ut,ct)}function jj(it,g,et,ot,ct,ut){gj(it,g);var dt=(g.flags&128)!==0;if(!ot&&!dt)return ct&&dg(g,et,!1),Zi(it,g,ut);ot=g.stateNode,Wi.current=g;var ft=dt&&typeof et.getDerivedStateFromError!="function"?null:ot.render();return g.flags|=1,it!==null&&dt?(g.child=Ug(g,it.child,null,ut),g.child=Ug(g,null,ft,ut)):Xi(it,g,ft,ut),g.memoizedState=ot.state,ct&&dg(g,et,!0),g.child}function kj(it){var g=it.stateNode;g.pendingContext?ag(it,g.pendingContext,g.pendingContext!==g.context):g.context&&ag(it,g.context,!1),yh(it,g.containerInfo)}function lj(it,g,et,ot,ct){return Ig(),Jg(ct),g.flags|=256,Xi(it,g,et,ot),g.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(it){return{baseLanes:it,cachePool:null,transitions:null}}function oj(it,g,et){var ot=g.pendingProps,ct=L$3.current,ut=!1,dt=(g.flags&128)!==0,ft;if((ft=dt)||(ft=it!==null&&it.memoizedState===null?!1:(ct&2)!==0),ft?(ut=!0,g.flags&=-129):(it===null||it.memoizedState!==null)&&(ct|=1),G$1(L$3,ct&1),it===null)return Eg(g),it=g.memoizedState,it!==null&&(it=it.dehydrated,it!==null)?(g.mode&1?it.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(dt=ot.children,it=ot.fallback,ut?(ot=g.mode,ut=g.child,dt={mode:"hidden",children:dt},!(ot&1)&&ut!==null?(ut.childLanes=0,ut.pendingProps=dt):ut=pj(dt,ot,0,null),it=Tg(it,ot,et,null),ut.return=g,it.return=g,ut.sibling=it,g.child=ut,g.child.memoizedState=nj(et),g.memoizedState=mj,it):qj(g,dt));if(ct=it.memoizedState,ct!==null&&(ft=ct.dehydrated,ft!==null))return rj(it,g,dt,ot,ft,ct,et);if(ut){ut=ot.fallback,dt=g.mode,ct=it.child,ft=ct.sibling;var St={mode:"hidden",children:ot.children};return!(dt&1)&&g.child!==ct?(ot=g.child,ot.childLanes=0,ot.pendingProps=St,g.deletions=null):(ot=Pg(ct,St),ot.subtreeFlags=ct.subtreeFlags&14680064),ft!==null?ut=Pg(ft,ut):(ut=Tg(ut,dt,et,null),ut.flags|=2),ut.return=g,ot.return=g,ot.sibling=ut,g.child=ot,ot=ut,ut=g.child,dt=it.child.memoizedState,dt=dt===null?nj(et):{baseLanes:dt.baseLanes|et,cachePool:null,transitions:dt.transitions},ut.memoizedState=dt,ut.childLanes=it.childLanes&~et,g.memoizedState=mj,ot}return ut=it.child,it=ut.sibling,ot=Pg(ut,{mode:"visible",children:ot.children}),!(g.mode&1)&&(ot.lanes=et),ot.return=g,ot.sibling=null,it!==null&&(et=g.deletions,et===null?(g.deletions=[it],g.flags|=16):et.push(it)),g.child=ot,g.memoizedState=null,ot}function qj(it,g){return g=pj({mode:"visible",children:g},it.mode,0,null),g.return=it,it.child=g}function sj(it,g,et,ot){return ot!==null&&Jg(ot),Ug(g,it.child,null,et),it=qj(g,g.pendingProps.children),it.flags|=2,g.memoizedState=null,it}function rj(it,g,et,ot,ct,ut,dt){if(et)return g.flags&256?(g.flags&=-257,ot=Ki(Error(p$3(422))),sj(it,g,dt,ot)):g.memoizedState!==null?(g.child=it.child,g.flags|=128,null):(ut=ot.fallback,ct=g.mode,ot=pj({mode:"visible",children:ot.children},ct,0,null),ut=Tg(ut,ct,dt,null),ut.flags|=2,ot.return=g,ut.return=g,ot.sibling=ut,g.child=ot,g.mode&1&&Ug(g,it.child,null,dt),g.child.memoizedState=nj(dt),g.memoizedState=mj,ut);if(!(g.mode&1))return sj(it,g,dt,null);if(ct.data==="$!"){if(ot=ct.nextSibling&&ct.nextSibling.dataset,ot)var ft=ot.dgst;return ot=ft,ut=Error(p$3(419)),ot=Ki(ut,ot,void 0),sj(it,g,dt,ot)}if(ft=(dt&it.childLanes)!==0,dh||ft){if(ot=Q$1,ot!==null){switch(dt&-dt){case 4:ct=2;break;case 16:ct=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ct=32;break;case 536870912:ct=268435456;break;default:ct=0}ct=ct&(ot.suspendedLanes|dt)?0:ct,ct!==0&&ct!==ut.retryLane&&(ut.retryLane=ct,ih(it,ct),gi(ot,it,ct,-1))}return tj(),ot=Ki(Error(p$3(421))),sj(it,g,dt,ot)}return ct.data==="$?"?(g.flags|=128,g.child=it.child,g=uj.bind(null,it),ct._reactRetry=g,null):(it=ut.treeContext,yg=Lf(ct.nextSibling),xg=g,I$4=!0,zg=null,it!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=it.id,sg=it.overflow,qg=g),g=qj(g,ot.children),g.flags|=4096,g)}function vj(it,g,et){it.lanes|=g;var ot=it.alternate;ot!==null&&(ot.lanes|=g),bh(it.return,g,et)}function wj(it,g,et,ot,ct){var ut=it.memoizedState;ut===null?it.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:ot,tail:et,tailMode:ct}:(ut.isBackwards=g,ut.rendering=null,ut.renderingStartTime=0,ut.last=ot,ut.tail=et,ut.tailMode=ct)}function xj(it,g,et){var ot=g.pendingProps,ct=ot.revealOrder,ut=ot.tail;if(Xi(it,g,ot.children,et),ot=L$3.current,ot&2)ot=ot&1|2,g.flags|=128;else{if(it!==null&&it.flags&128)e:for(it=g.child;it!==null;){if(it.tag===13)it.memoizedState!==null&&vj(it,et,g);else if(it.tag===19)vj(it,et,g);else if(it.child!==null){it.child.return=it,it=it.child;continue}if(it===g)break e;for(;it.sibling===null;){if(it.return===null||it.return===g)break e;it=it.return}it.sibling.return=it.return,it=it.sibling}ot&=1}if(G$1(L$3,ot),!(g.mode&1))g.memoizedState=null;else switch(ct){case"forwards":for(et=g.child,ct=null;et!==null;)it=et.alternate,it!==null&&Ch(it)===null&&(ct=et),et=et.sibling;et=ct,et===null?(ct=g.child,g.child=null):(ct=et.sibling,et.sibling=null),wj(g,!1,ct,et,ut);break;case"backwards":for(et=null,ct=g.child,g.child=null;ct!==null;){if(it=ct.alternate,it!==null&&Ch(it)===null){g.child=ct;break}it=ct.sibling,ct.sibling=et,et=ct,ct=it}wj(g,!0,et,null,ut);break;case"together":wj(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ij(it,g){!(g.mode&1)&&it!==null&&(it.alternate=null,g.alternate=null,g.flags|=2)}function Zi(it,g,et){if(it!==null&&(g.dependencies=it.dependencies),rh|=g.lanes,!(et&g.childLanes))return null;if(it!==null&&g.child!==it.child)throw Error(p$3(153));if(g.child!==null){for(it=g.child,et=Pg(it,it.pendingProps),g.child=et,et.return=g;it.sibling!==null;)it=it.sibling,et=et.sibling=Pg(it,it.pendingProps),et.return=g;et.sibling=null}return g.child}function yj(it,g,et){switch(g.tag){case 3:kj(g),Ig();break;case 5:Ah(g);break;case 1:Zf(g.type)&&cg(g);break;case 4:yh(g,g.stateNode.containerInfo);break;case 10:var ot=g.type._context,ct=g.memoizedProps.value;G$1(Wg,ot._currentValue),ot._currentValue=ct;break;case 13:if(ot=g.memoizedState,ot!==null)return ot.dehydrated!==null?(G$1(L$3,L$3.current&1),g.flags|=128,null):et&g.child.childLanes?oj(it,g,et):(G$1(L$3,L$3.current&1),it=Zi(it,g,et),it!==null?it.sibling:null);G$1(L$3,L$3.current&1);break;case 19:if(ot=(et&g.childLanes)!==0,it.flags&128){if(ot)return xj(it,g,et);g.flags|=128}if(ct=g.memoizedState,ct!==null&&(ct.rendering=null,ct.tail=null,ct.lastEffect=null),G$1(L$3,L$3.current),ot)break;return null;case 22:case 23:return g.lanes=0,dj(it,g,et)}return Zi(it,g,et)}var zj,Aj,Bj,Cj;zj=function(it,g){for(var et=g.child;et!==null;){if(et.tag===5||et.tag===6)it.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===g)break;for(;et.sibling===null;){if(et.return===null||et.return===g)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(it,g,et,ot){var ct=it.memoizedProps;if(ct!==ot){it=g.stateNode,xh(uh.current);var ut=null;switch(et){case"input":ct=Ya(it,ct),ot=Ya(it,ot),ut=[];break;case"select":ct=A$2({},ct,{value:void 0}),ot=A$2({},ot,{value:void 0}),ut=[];break;case"textarea":ct=gb(it,ct),ot=gb(it,ot),ut=[];break;default:typeof ct.onClick!="function"&&typeof ot.onClick=="function"&&(it.onclick=Bf)}ub(et,ot);var dt;et=null;for(kt in ct)if(!ot.hasOwnProperty(kt)&&ct.hasOwnProperty(kt)&&ct[kt]!=null)if(kt==="style"){var ft=ct[kt];for(dt in ft)ft.hasOwnProperty(dt)&&(et||(et={}),et[dt]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(ea.hasOwnProperty(kt)?ut||(ut=[]):(ut=ut||[]).push(kt,null));for(kt in ot){var St=ot[kt];if(ft=ct!=null?ct[kt]:void 0,ot.hasOwnProperty(kt)&&St!==ft&&(St!=null||ft!=null))if(kt==="style")if(ft){for(dt in ft)!ft.hasOwnProperty(dt)||St&&St.hasOwnProperty(dt)||(et||(et={}),et[dt]="");for(dt in St)St.hasOwnProperty(dt)&&ft[dt]!==St[dt]&&(et||(et={}),et[dt]=St[dt])}else et||(ut||(ut=[]),ut.push(kt,et)),et=St;else kt==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,ft=ft?ft.__html:void 0,St!=null&&ft!==St&&(ut=ut||[]).push(kt,St)):kt==="children"?typeof St!="string"&&typeof St!="number"||(ut=ut||[]).push(kt,""+St):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(kt)?(St!=null&&kt==="onScroll"&&D$1("scroll",it),ut||ft===St||(ut=[])):(ut=ut||[]).push(kt,St))}et&&(ut=ut||[]).push("style",et);var kt=ut;(g.updateQueue=kt)&&(g.flags|=4)}};Cj=function(it,g,et,ot){et!==ot&&(g.flags|=4)};function Dj(it,g){if(!I$4)switch(it.tailMode){case"hidden":g=it.tail;for(var et=null;g!==null;)g.alternate!==null&&(et=g),g=g.sibling;et===null?it.tail=null:et.sibling=null;break;case"collapsed":et=it.tail;for(var ot=null;et!==null;)et.alternate!==null&&(ot=et),et=et.sibling;ot===null?g||it.tail===null?it.tail=null:it.tail.sibling=null:ot.sibling=null}}function S$3(it){var g=it.alternate!==null&&it.alternate.child===it.child,et=0,ot=0;if(g)for(var ct=it.child;ct!==null;)et|=ct.lanes|ct.childLanes,ot|=ct.subtreeFlags&14680064,ot|=ct.flags&14680064,ct.return=it,ct=ct.sibling;else for(ct=it.child;ct!==null;)et|=ct.lanes|ct.childLanes,ot|=ct.subtreeFlags,ot|=ct.flags,ct.return=it,ct=ct.sibling;return it.subtreeFlags|=ot,it.childLanes=et,g}function Ej(it,g,et){var ot=g.pendingProps;switch(wg(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(g),null;case 1:return Zf(g.type)&&$f(),S$3(g),null;case 3:return ot=g.stateNode,zh(),E$2(Wf),E$2(H$3),Eh(),ot.pendingContext&&(ot.context=ot.pendingContext,ot.pendingContext=null),(it===null||it.child===null)&&(Gg(g)?g.flags|=4:it===null||it.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(it,g),S$3(g),null;case 5:Bh(g);var ct=xh(wh.current);if(et=g.type,it!==null&&g.stateNode!=null)Bj(it,g,et,ot,ct),it.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!ot){if(g.stateNode===null)throw Error(p$3(166));return S$3(g),null}if(it=xh(uh.current),Gg(g)){ot=g.stateNode,et=g.type;var ut=g.memoizedProps;switch(ot[Of]=g,ot[Pf]=ut,it=(g.mode&1)!==0,et){case"dialog":D$1("cancel",ot),D$1("close",ot);break;case"iframe":case"object":case"embed":D$1("load",ot);break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],ot);break;case"source":D$1("error",ot);break;case"img":case"image":case"link":D$1("error",ot),D$1("load",ot);break;case"details":D$1("toggle",ot);break;case"input":Za(ot,ut),D$1("invalid",ot);break;case"select":ot._wrapperState={wasMultiple:!!ut.multiple},D$1("invalid",ot);break;case"textarea":hb(ot,ut),D$1("invalid",ot)}ub(et,ut),ct=null;for(var dt in ut)if(ut.hasOwnProperty(dt)){var ft=ut[dt];dt==="children"?typeof ft=="string"?ot.textContent!==ft&&(ut.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ct=["children",ft]):typeof ft=="number"&&ot.textContent!==""+ft&&(ut.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ct=["children",""+ft]):ea.hasOwnProperty(dt)&&ft!=null&&dt==="onScroll"&&D$1("scroll",ot)}switch(et){case"input":Va(ot),db(ot,ut,!0);break;case"textarea":Va(ot),jb(ot);break;case"select":case"option":break;default:typeof ut.onClick=="function"&&(ot.onclick=Bf)}ot=ct,g.updateQueue=ot,ot!==null&&(g.flags|=4)}else{dt=ct.nodeType===9?ct:ct.ownerDocument,it==="http://www.w3.org/1999/xhtml"&&(it=kb(et)),it==="http://www.w3.org/1999/xhtml"?et==="script"?(it=dt.createElement("div"),it.innerHTML="<script><\/script>",it=it.removeChild(it.firstChild)):typeof ot.is=="string"?it=dt.createElement(et,{is:ot.is}):(it=dt.createElement(et),et==="select"&&(dt=it,ot.multiple?dt.multiple=!0:ot.size&&(dt.size=ot.size))):it=dt.createElementNS(it,et),it[Of]=g,it[Pf]=ot,zj(it,g,!1,!1),g.stateNode=it;e:{switch(dt=vb(et,ot),et){case"dialog":D$1("cancel",it),D$1("close",it),ct=ot;break;case"iframe":case"object":case"embed":D$1("load",it),ct=ot;break;case"video":case"audio":for(ct=0;ct<lf.length;ct++)D$1(lf[ct],it);ct=ot;break;case"source":D$1("error",it),ct=ot;break;case"img":case"image":case"link":D$1("error",it),D$1("load",it),ct=ot;break;case"details":D$1("toggle",it),ct=ot;break;case"input":Za(it,ot),ct=Ya(it,ot),D$1("invalid",it);break;case"option":ct=ot;break;case"select":it._wrapperState={wasMultiple:!!ot.multiple},ct=A$2({},ot,{value:void 0}),D$1("invalid",it);break;case"textarea":hb(it,ot),ct=gb(it,ot),D$1("invalid",it);break;default:ct=ot}ub(et,ct),ft=ct;for(ut in ft)if(ft.hasOwnProperty(ut)){var St=ft[ut];ut==="style"?sb(it,St):ut==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,St!=null&&nb(it,St)):ut==="children"?typeof St=="string"?(et!=="textarea"||St!=="")&&ob(it,St):typeof St=="number"&&ob(it,""+St):ut!=="suppressContentEditableWarning"&&ut!=="suppressHydrationWarning"&&ut!=="autoFocus"&&(ea.hasOwnProperty(ut)?St!=null&&ut==="onScroll"&&D$1("scroll",it):St!=null&&ta$1(it,ut,St,dt))}switch(et){case"input":Va(it),db(it,ot,!1);break;case"textarea":Va(it),jb(it);break;case"option":ot.value!=null&&it.setAttribute("value",""+Sa(ot.value));break;case"select":it.multiple=!!ot.multiple,ut=ot.value,ut!=null?fb(it,!!ot.multiple,ut,!1):ot.defaultValue!=null&&fb(it,!!ot.multiple,ot.defaultValue,!0);break;default:typeof ct.onClick=="function"&&(it.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":ot=!!ot.autoFocus;break e;case"img":ot=!0;break e;default:ot=!1}}ot&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return S$3(g),null;case 6:if(it&&g.stateNode!=null)Cj(it,g,it.memoizedProps,ot);else{if(typeof ot!="string"&&g.stateNode===null)throw Error(p$3(166));if(et=xh(wh.current),xh(uh.current),Gg(g)){if(ot=g.stateNode,et=g.memoizedProps,ot[Of]=g,(ut=ot.nodeValue!==et)&&(it=xg,it!==null))switch(it.tag){case 3:Af(ot.nodeValue,et,(it.mode&1)!==0);break;case 5:it.memoizedProps.suppressHydrationWarning!==!0&&Af(ot.nodeValue,et,(it.mode&1)!==0)}ut&&(g.flags|=4)}else ot=(et.nodeType===9?et:et.ownerDocument).createTextNode(ot),ot[Of]=g,g.stateNode=ot}return S$3(g),null;case 13:if(E$2(L$3),ot=g.memoizedState,it===null||it.memoizedState!==null&&it.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&g.mode&1&&!(g.flags&128))Hg(),Ig(),g.flags|=98560,ut=!1;else if(ut=Gg(g),ot!==null&&ot.dehydrated!==null){if(it===null){if(!ut)throw Error(p$3(318));if(ut=g.memoizedState,ut=ut!==null?ut.dehydrated:null,!ut)throw Error(p$3(317));ut[Of]=g}else Ig(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;S$3(g),ut=!1}else zg!==null&&(Fj(zg),zg=null),ut=!0;if(!ut)return g.flags&65536?g:null}return g.flags&128?(g.lanes=et,g):(ot=ot!==null,ot!==(it!==null&&it.memoizedState!==null)&&ot&&(g.child.flags|=8192,g.mode&1&&(it===null||L$3.current&1?T$3===0&&(T$3=3):tj())),g.updateQueue!==null&&(g.flags|=4),S$3(g),null);case 4:return zh(),Aj(it,g),it===null&&sf(g.stateNode.containerInfo),S$3(g),null;case 10:return ah(g.type._context),S$3(g),null;case 17:return Zf(g.type)&&$f(),S$3(g),null;case 19:if(E$2(L$3),ut=g.memoizedState,ut===null)return S$3(g),null;if(ot=(g.flags&128)!==0,dt=ut.rendering,dt===null)if(ot)Dj(ut,!1);else{if(T$3!==0||it!==null&&it.flags&128)for(it=g.child;it!==null;){if(dt=Ch(it),dt!==null){for(g.flags|=128,Dj(ut,!1),ot=dt.updateQueue,ot!==null&&(g.updateQueue=ot,g.flags|=4),g.subtreeFlags=0,ot=et,et=g.child;et!==null;)ut=et,it=ot,ut.flags&=14680066,dt=ut.alternate,dt===null?(ut.childLanes=0,ut.lanes=it,ut.child=null,ut.subtreeFlags=0,ut.memoizedProps=null,ut.memoizedState=null,ut.updateQueue=null,ut.dependencies=null,ut.stateNode=null):(ut.childLanes=dt.childLanes,ut.lanes=dt.lanes,ut.child=dt.child,ut.subtreeFlags=0,ut.deletions=null,ut.memoizedProps=dt.memoizedProps,ut.memoizedState=dt.memoizedState,ut.updateQueue=dt.updateQueue,ut.type=dt.type,it=dt.dependencies,ut.dependencies=it===null?null:{lanes:it.lanes,firstContext:it.firstContext}),et=et.sibling;return G$1(L$3,L$3.current&1|2),g.child}it=it.sibling}ut.tail!==null&&B$1()>Gj&&(g.flags|=128,ot=!0,Dj(ut,!1),g.lanes=4194304)}else{if(!ot)if(it=Ch(dt),it!==null){if(g.flags|=128,ot=!0,et=it.updateQueue,et!==null&&(g.updateQueue=et,g.flags|=4),Dj(ut,!0),ut.tail===null&&ut.tailMode==="hidden"&&!dt.alternate&&!I$4)return S$3(g),null}else 2*B$1()-ut.renderingStartTime>Gj&&et!==1073741824&&(g.flags|=128,ot=!0,Dj(ut,!1),g.lanes=4194304);ut.isBackwards?(dt.sibling=g.child,g.child=dt):(et=ut.last,et!==null?et.sibling=dt:g.child=dt,ut.last=dt)}return ut.tail!==null?(g=ut.tail,ut.rendering=g,ut.tail=g.sibling,ut.renderingStartTime=B$1(),g.sibling=null,et=L$3.current,G$1(L$3,ot?et&1|2:et&1),g):(S$3(g),null);case 22:case 23:return Hj(),ot=g.memoizedState!==null,it!==null&&it.memoizedState!==null!==ot&&(g.flags|=8192),ot&&g.mode&1?fj&1073741824&&(S$3(g),g.subtreeFlags&6&&(g.flags|=8192)):S$3(g),null;case 24:return null;case 25:return null}throw Error(p$3(156,g.tag))}function Ij(it,g){switch(wg(g),g.tag){case 1:return Zf(g.type)&&$f(),it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 3:return zh(),E$2(Wf),E$2(H$3),Eh(),it=g.flags,it&65536&&!(it&128)?(g.flags=it&-65537|128,g):null;case 5:return Bh(g),null;case 13:if(E$2(L$3),it=g.memoizedState,it!==null&&it.dehydrated!==null){if(g.alternate===null)throw Error(p$3(340));Ig()}return it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 19:return E$2(L$3),null;case 4:return zh(),null;case 10:return ah(g.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$4=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(it,g){var et=it.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(ot){W$2(it,g,ot)}else et.current=null}function Mj(it,g,et){try{et()}catch(ot){W$2(it,g,ot)}}var Nj=!1;function Oj(it,g){if(Cf=dd,it=Me$1(),Ne$1(it)){if("selectionStart"in it)var et={start:it.selectionStart,end:it.selectionEnd};else e:{et=(et=it.ownerDocument)&&et.defaultView||window;var ot=et.getSelection&&et.getSelection();if(ot&&ot.rangeCount!==0){et=ot.anchorNode;var ct=ot.anchorOffset,ut=ot.focusNode;ot=ot.focusOffset;try{et.nodeType,ut.nodeType}catch{et=null;break e}var dt=0,ft=-1,St=-1,kt=0,Tt=0,Rt=it,jt=null;t:for(;;){for(var $t;Rt!==et||ct!==0&&Rt.nodeType!==3||(ft=dt+ct),Rt!==ut||ot!==0&&Rt.nodeType!==3||(St=dt+ot),Rt.nodeType===3&&(dt+=Rt.nodeValue.length),($t=Rt.firstChild)!==null;)jt=Rt,Rt=$t;for(;;){if(Rt===it)break t;if(jt===et&&++kt===ct&&(ft=dt),jt===ut&&++Tt===ot&&(St=dt),($t=Rt.nextSibling)!==null)break;Rt=jt,jt=Rt.parentNode}Rt=$t}et=ft===-1||St===-1?null:{start:ft,end:St}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:it,selectionRange:et},dd=!1,V$2=g;V$2!==null;)if(g=V$2,it=g.child,(g.subtreeFlags&1028)!==0&&it!==null)it.return=g,V$2=it;else for(;V$2!==null;){g=V$2;try{var Ft=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Ft!==null){var Ht=Ft.memoizedProps,Kt=Ft.memoizedState,Bt=g.stateNode,Ut=Bt.getSnapshotBeforeUpdate(g.elementType===g.type?Ht:Ci(g.type,Ht),Kt);Bt.__reactInternalSnapshotBeforeUpdate=Ut}break;case 3:var Yt=g.stateNode.containerInfo;Yt.nodeType===1?Yt.textContent="":Yt.nodeType===9&&Yt.documentElement&&Yt.removeChild(Yt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(Jt){W$2(g,g.return,Jt)}if(it=g.sibling,it!==null){it.return=g.return,V$2=it;break}V$2=g.return}return Ft=Nj,Nj=!1,Ft}function Pj(it,g,et){var ot=g.updateQueue;if(ot=ot!==null?ot.lastEffect:null,ot!==null){var ct=ot=ot.next;do{if((ct.tag&it)===it){var ut=ct.destroy;ct.destroy=void 0,ut!==void 0&&Mj(g,et,ut)}ct=ct.next}while(ct!==ot)}}function Qj(it,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var et=g=g.next;do{if((et.tag&it)===it){var ot=et.create;et.destroy=ot()}et=et.next}while(et!==g)}}function Rj(it){var g=it.ref;if(g!==null){var et=it.stateNode;switch(it.tag){case 5:it=et;break;default:it=et}typeof g=="function"?g(it):g.current=it}}function Sj(it){var g=it.alternate;g!==null&&(it.alternate=null,Sj(g)),it.child=null,it.deletions=null,it.sibling=null,it.tag===5&&(g=it.stateNode,g!==null&&(delete g[Of],delete g[Pf],delete g[of],delete g[Qf],delete g[Rf])),it.stateNode=null,it.return=null,it.dependencies=null,it.memoizedProps=null,it.memoizedState=null,it.pendingProps=null,it.stateNode=null,it.updateQueue=null}function Tj(it){return it.tag===5||it.tag===3||it.tag===4}function Uj(it){e:for(;;){for(;it.sibling===null;){if(it.return===null||Tj(it.return))return null;it=it.return}for(it.sibling.return=it.return,it=it.sibling;it.tag!==5&&it.tag!==6&&it.tag!==18;){if(it.flags&2||it.child===null||it.tag===4)continue e;it.child.return=it,it=it.child}if(!(it.flags&2))return it.stateNode}}function Vj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.nodeType===8?et.parentNode.insertBefore(it,g):et.insertBefore(it,g):(et.nodeType===8?(g=et.parentNode,g.insertBefore(it,et)):(g=et,g.appendChild(it)),et=et._reactRootContainer,et!=null||g.onclick!==null||(g.onclick=Bf));else if(ot!==4&&(it=it.child,it!==null))for(Vj(it,g,et),it=it.sibling;it!==null;)Vj(it,g,et),it=it.sibling}function Wj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.insertBefore(it,g):et.appendChild(it);else if(ot!==4&&(it=it.child,it!==null))for(Wj(it,g,et),it=it.sibling;it!==null;)Wj(it,g,et),it=it.sibling}var X$4=null,Xj=!1;function Yj(it,g,et){for(et=et.child;et!==null;)Zj(it,g,et),et=et.sibling}function Zj(it,g,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U$4||Lj(et,g);case 6:var ot=X$4,ct=Xj;X$4=null,Yj(it,g,et),X$4=ot,Xj=ct,X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?it.parentNode.removeChild(et):it.removeChild(et)):X$4.removeChild(et.stateNode));break;case 18:X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?Kf(it.parentNode,et):it.nodeType===1&&Kf(it,et),bd(it)):Kf(X$4,et.stateNode));break;case 4:ot=X$4,ct=Xj,X$4=et.stateNode.containerInfo,Xj=!0,Yj(it,g,et),X$4=ot,Xj=ct;break;case 0:case 11:case 14:case 15:if(!U$4&&(ot=et.updateQueue,ot!==null&&(ot=ot.lastEffect,ot!==null))){ct=ot=ot.next;do{var ut=ct,dt=ut.destroy;ut=ut.tag,dt!==void 0&&(ut&2||ut&4)&&Mj(et,g,dt),ct=ct.next}while(ct!==ot)}Yj(it,g,et);break;case 1:if(!U$4&&(Lj(et,g),ot=et.stateNode,typeof ot.componentWillUnmount=="function"))try{ot.props=et.memoizedProps,ot.state=et.memoizedState,ot.componentWillUnmount()}catch(ft){W$2(et,g,ft)}Yj(it,g,et);break;case 21:Yj(it,g,et);break;case 22:et.mode&1?(U$4=(ot=U$4)||et.memoizedState!==null,Yj(it,g,et),U$4=ot):Yj(it,g,et);break;default:Yj(it,g,et)}}function ak(it){var g=it.updateQueue;if(g!==null){it.updateQueue=null;var et=it.stateNode;et===null&&(et=it.stateNode=new Kj),g.forEach(function(ot){var ct=bk.bind(null,it,ot);et.has(ot)||(et.add(ot),ot.then(ct,ct))})}}function ck(it,g){var et=g.deletions;if(et!==null)for(var ot=0;ot<et.length;ot++){var ct=et[ot];try{var ut=it,dt=g,ft=dt;e:for(;ft!==null;){switch(ft.tag){case 5:X$4=ft.stateNode,Xj=!1;break e;case 3:X$4=ft.stateNode.containerInfo,Xj=!0;break e;case 4:X$4=ft.stateNode.containerInfo,Xj=!0;break e}ft=ft.return}if(X$4===null)throw Error(p$3(160));Zj(ut,dt,ct),X$4=null,Xj=!1;var St=ct.alternate;St!==null&&(St.return=null),ct.return=null}catch(kt){W$2(ct,g,kt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)dk(g,it),g=g.sibling}function dk(it,g){var et=it.alternate,ot=it.flags;switch(it.tag){case 0:case 11:case 14:case 15:if(ck(g,it),ek(it),ot&4){try{Pj(3,it,it.return),Qj(3,it)}catch(Ht){W$2(it,it.return,Ht)}try{Pj(5,it,it.return)}catch(Ht){W$2(it,it.return,Ht)}}break;case 1:ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return),it.flags&32){var ct=it.stateNode;try{ob(ct,"")}catch(Ht){W$2(it,it.return,Ht)}}if(ot&4&&(ct=it.stateNode,ct!=null)){var ut=it.memoizedProps,dt=et!==null?et.memoizedProps:ut,ft=it.type,St=it.updateQueue;if(it.updateQueue=null,St!==null)try{ft==="input"&&ut.type==="radio"&&ut.name!=null&&ab(ct,ut),vb(ft,dt);var kt=vb(ft,ut);for(dt=0;dt<St.length;dt+=2){var Tt=St[dt],Rt=St[dt+1];Tt==="style"?sb(ct,Rt):Tt==="dangerouslySetInnerHTML"?nb(ct,Rt):Tt==="children"?ob(ct,Rt):ta$1(ct,Tt,Rt,kt)}switch(ft){case"input":bb(ct,ut);break;case"textarea":ib(ct,ut);break;case"select":var jt=ct._wrapperState.wasMultiple;ct._wrapperState.wasMultiple=!!ut.multiple;var $t=ut.value;$t!=null?fb(ct,!!ut.multiple,$t,!1):jt!==!!ut.multiple&&(ut.defaultValue!=null?fb(ct,!!ut.multiple,ut.defaultValue,!0):fb(ct,!!ut.multiple,ut.multiple?[]:"",!1))}ct[Pf]=ut}catch(Ht){W$2(it,it.return,Ht)}}break;case 6:if(ck(g,it),ek(it),ot&4){if(it.stateNode===null)throw Error(p$3(162));ct=it.stateNode,ut=it.memoizedProps;try{ct.nodeValue=ut}catch(Ht){W$2(it,it.return,Ht)}}break;case 3:if(ck(g,it),ek(it),ot&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(g.containerInfo)}catch(Ht){W$2(it,it.return,Ht)}break;case 4:ck(g,it),ek(it);break;case 13:ck(g,it),ek(it),ct=it.child,ct.flags&8192&&(ut=ct.memoizedState!==null,ct.stateNode.isHidden=ut,!ut||ct.alternate!==null&&ct.alternate.memoizedState!==null||(fk=B$1())),ot&4&&ak(it);break;case 22:if(Tt=et!==null&&et.memoizedState!==null,it.mode&1?(U$4=(kt=U$4)||Tt,ck(g,it),U$4=kt):ck(g,it),ek(it),ot&8192){if(kt=it.memoizedState!==null,(it.stateNode.isHidden=kt)&&!Tt&&it.mode&1)for(V$2=it,Tt=it.child;Tt!==null;){for(Rt=V$2=Tt;V$2!==null;){switch(jt=V$2,$t=jt.child,jt.tag){case 0:case 11:case 14:case 15:Pj(4,jt,jt.return);break;case 1:Lj(jt,jt.return);var Ft=jt.stateNode;if(typeof Ft.componentWillUnmount=="function"){ot=jt,et=jt.return;try{g=ot,Ft.props=g.memoizedProps,Ft.state=g.memoizedState,Ft.componentWillUnmount()}catch(Ht){W$2(ot,et,Ht)}}break;case 5:Lj(jt,jt.return);break;case 22:if(jt.memoizedState!==null){gk(Rt);continue}}$t!==null?($t.return=jt,V$2=$t):gk(Rt)}Tt=Tt.sibling}e:for(Tt=null,Rt=it;;){if(Rt.tag===5){if(Tt===null){Tt=Rt;try{ct=Rt.stateNode,kt?(ut=ct.style,typeof ut.setProperty=="function"?ut.setProperty("display","none","important"):ut.display="none"):(ft=Rt.stateNode,St=Rt.memoizedProps.style,dt=St!=null&&St.hasOwnProperty("display")?St.display:null,ft.style.display=rb("display",dt))}catch(Ht){W$2(it,it.return,Ht)}}}else if(Rt.tag===6){if(Tt===null)try{Rt.stateNode.nodeValue=kt?"":Rt.memoizedProps}catch(Ht){W$2(it,it.return,Ht)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===it)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===it)break e;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===it)break e;Tt===Rt&&(Tt=null),Rt=Rt.return}Tt===Rt&&(Tt=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}break;case 19:ck(g,it),ek(it),ot&4&&ak(it);break;case 21:break;default:ck(g,it),ek(it)}}function ek(it){var g=it.flags;if(g&2){try{e:{for(var et=it.return;et!==null;){if(Tj(et)){var ot=et;break e}et=et.return}throw Error(p$3(160))}switch(ot.tag){case 5:var ct=ot.stateNode;ot.flags&32&&(ob(ct,""),ot.flags&=-33);var ut=Uj(it);Wj(it,ut,ct);break;case 3:case 4:var dt=ot.stateNode.containerInfo,ft=Uj(it);Vj(it,ft,dt);break;default:throw Error(p$3(161))}}catch(St){W$2(it,it.return,St)}it.flags&=-3}g&4096&&(it.flags&=-4097)}function hk(it,g,et){V$2=it,ik(it)}function ik(it,g,et){for(var ot=(it.mode&1)!==0;V$2!==null;){var ct=V$2,ut=ct.child;if(ct.tag===22&&ot){var dt=ct.memoizedState!==null||Jj;if(!dt){var ft=ct.alternate,St=ft!==null&&ft.memoizedState!==null||U$4;ft=Jj;var kt=U$4;if(Jj=dt,(U$4=St)&&!kt)for(V$2=ct;V$2!==null;)dt=V$2,St=dt.child,dt.tag===22&&dt.memoizedState!==null?jk(ct):St!==null?(St.return=dt,V$2=St):jk(ct);for(;ut!==null;)V$2=ut,ik(ut),ut=ut.sibling;V$2=ct,Jj=ft,U$4=kt}kk(it)}else ct.subtreeFlags&8772&&ut!==null?(ut.return=ct,V$2=ut):kk(it)}}function kk(it){for(;V$2!==null;){var g=V$2;if(g.flags&8772){var et=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:U$4||Qj(5,g);break;case 1:var ot=g.stateNode;if(g.flags&4&&!U$4)if(et===null)ot.componentDidMount();else{var ct=g.elementType===g.type?et.memoizedProps:Ci(g.type,et.memoizedProps);ot.componentDidUpdate(ct,et.memoizedState,ot.__reactInternalSnapshotBeforeUpdate)}var ut=g.updateQueue;ut!==null&&sh(g,ut,ot);break;case 3:var dt=g.updateQueue;if(dt!==null){if(et=null,g.child!==null)switch(g.child.tag){case 5:et=g.child.stateNode;break;case 1:et=g.child.stateNode}sh(g,dt,et)}break;case 5:var ft=g.stateNode;if(et===null&&g.flags&4){et=ft;var St=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":St.autoFocus&&et.focus();break;case"img":St.src&&(et.src=St.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var kt=g.alternate;if(kt!==null){var Tt=kt.memoizedState;if(Tt!==null){var Rt=Tt.dehydrated;Rt!==null&&bd(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$4||g.flags&512&&Rj(g)}catch(jt){W$2(g,g.return,jt)}}if(g===it){V$2=null;break}if(et=g.sibling,et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function gk(it){for(;V$2!==null;){var g=V$2;if(g===it){V$2=null;break}var et=g.sibling;if(et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function jk(it){for(;V$2!==null;){var g=V$2;try{switch(g.tag){case 0:case 11:case 15:var et=g.return;try{Qj(4,g)}catch(St){W$2(g,et,St)}break;case 1:var ot=g.stateNode;if(typeof ot.componentDidMount=="function"){var ct=g.return;try{ot.componentDidMount()}catch(St){W$2(g,ct,St)}}var ut=g.return;try{Rj(g)}catch(St){W$2(g,ut,St)}break;case 5:var dt=g.return;try{Rj(g)}catch(St){W$2(g,dt,St)}}}catch(St){W$2(g,g.return,St)}if(g===it){V$2=null;break}var ft=g.sibling;if(ft!==null){ft.return=g.return,V$2=ft;break}V$2=g.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$2=0,Q$1=null,Y=null,Z$2=0,fj=0,ej=Uf(0),T$3=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk$1=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$3(){return K$2&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(it){return it.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(it=C$4,it!==0||(it=window.event,it=it===void 0?16:jd(it.type)),it):1}function gi(it,g,et,ot){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac(it,et,ot),(!(K$2&2)||it!==Q$1)&&(it===Q$1&&(!(K$2&2)&&(qk|=et),T$3===4&&Ck(it,Z$2)),Dk(it,ot),et===1&&K$2===0&&!(g.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(it,g){var et=it.callbackNode;wc(it,g);var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)et!==null&&bc(et),it.callbackNode=null,it.callbackPriority=0;else if(g=ot&-ot,it.callbackPriority!==g){if(et!=null&&bc(et),g===1)it.tag===0?ig(Ek.bind(null,it)):hg(Ek.bind(null,it)),Jf(function(){!(K$2&6)&&jg()}),et=null;else{switch(Dc(ot)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,it))}it.callbackPriority=g,it.callbackNode=et}}function Gk(it,g){if(Ak=-1,Bk=0,K$2&6)throw Error(p$3(327));var et=it.callbackNode;if(Hk()&&it.callbackNode!==et)return null;var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)return null;if(ot&30||ot&it.expiredLanes||g)g=Ik(it,ot);else{g=ot;var ct=K$2;K$2|=2;var ut=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Gj=B$1()+500,Kk(it,g));do try{Lk();break}catch(ft){Mk(it,ft)}while(1);$g(),mk.current=ut,K$2=ct,Y!==null?g=0:(Q$1=null,Z$2=0,g=T$3)}if(g!==0){if(g===2&&(ct=xc(it),ct!==0&&(ot=ct,g=Nk(it,ct))),g===1)throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;if(g===6)Ck(it,ot);else{if(ct=it.current.alternate,!(ot&30)&&!Ok(ct)&&(g=Ik(it,ot),g===2&&(ut=xc(it),ut!==0&&(ot=ut,g=Nk(it,ut))),g===1))throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;switch(it.finishedWork=ct,it.finishedLanes=ot,g){case 0:case 1:throw Error(p$3(345));case 2:Pk(it,tk$1,uk);break;case 3:if(Ck(it,ot),(ot&130023424)===ot&&(g=fk+500-B$1(),10<g)){if(uc(it,0)!==0)break;if(ct=it.suspendedLanes,(ct&ot)!==ot){R$3(),it.pingedLanes|=it.suspendedLanes&ct;break}it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),g);break}Pk(it,tk$1,uk);break;case 4:if(Ck(it,ot),(ot&4194240)===ot)break;for(g=it.eventTimes,ct=-1;0<ot;){var dt=31-oc(ot);ut=1<<dt,dt=g[dt],dt>ct&&(ct=dt),ot&=~ut}if(ot=ct,ot=B$1()-ot,ot=(120>ot?120:480>ot?480:1080>ot?1080:1920>ot?1920:3e3>ot?3e3:4320>ot?4320:1960*lk(ot/1960))-ot,10<ot){it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),ot);break}Pk(it,tk$1,uk);break;case 5:Pk(it,tk$1,uk);break;default:throw Error(p$3(329))}}}return Dk(it,B$1()),it.callbackNode===et?Gk.bind(null,it):null}function Nk(it,g){var et=sk;return it.current.memoizedState.isDehydrated&&(Kk(it,g).flags|=256),it=Ik(it,g),it!==2&&(g=tk$1,tk$1=et,g!==null&&Fj(g)),it}function Fj(it){tk$1===null?tk$1=it:tk$1.push.apply(tk$1,it)}function Ok(it){for(var g=it;;){if(g.flags&16384){var et=g.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var ot=0;ot<et.length;ot++){var ct=et[ot],ut=ct.getSnapshot;ct=ct.value;try{if(!He$2(ut(),ct))return!1}catch{return!1}}}if(et=g.child,g.subtreeFlags&16384&&et!==null)et.return=g,g=et;else{if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ck(it,g){for(g&=~rk,g&=~qk,it.suspendedLanes|=g,it.pingedLanes&=~g,it=it.expirationTimes;0<g;){var et=31-oc(g),ot=1<<et;it[et]=-1,g&=~ot}}function Ek(it){if(K$2&6)throw Error(p$3(327));Hk();var g=uc(it,0);if(!(g&1))return Dk(it,B$1()),null;var et=Ik(it,g);if(it.tag!==0&&et===2){var ot=xc(it);ot!==0&&(g=ot,et=Nk(it,ot))}if(et===1)throw et=pk,Kk(it,0),Ck(it,g),Dk(it,B$1()),et;if(et===6)throw Error(p$3(345));return it.finishedWork=it.current.alternate,it.finishedLanes=g,Pk(it,tk$1,uk),Dk(it,B$1()),null}function Qk(it,g){var et=K$2;K$2|=1;try{return it(g)}finally{K$2=et,K$2===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(it){wk!==null&&wk.tag===0&&!(K$2&6)&&Hk();var g=K$2;K$2|=1;var et=ok.transition,ot=C$4;try{if(ok.transition=null,C$4=1,it)return it()}finally{C$4=ot,ok.transition=et,K$2=g,!(K$2&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(it,g){it.finishedWork=null,it.finishedLanes=0;var et=it.timeoutHandle;if(et!==-1&&(it.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var ot=et;switch(wg(ot),ot.tag){case 1:ot=ot.type.childContextTypes,ot!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$3),Eh();break;case 5:Bh(ot);break;case 4:zh();break;case 13:E$2(L$3);break;case 19:E$2(L$3);break;case 10:ah(ot.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q$1=it,Y=it=Pg(it.current,null),Z$2=fj=g,T$3=0,pk=null,rk=qk=rh=0,tk$1=sk=null,fh!==null){for(g=0;g<fh.length;g++)if(et=fh[g],ot=et.interleaved,ot!==null){et.interleaved=null;var ct=ot.next,ut=et.pending;if(ut!==null){var dt=ut.next;ut.next=ct,ot.next=dt}et.pending=ot}fh=null}return it}function Mk(it,g){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var ot=M$3.memoizedState;ot!==null;){var ct=ot.queue;ct!==null&&(ct.pending=null),ot=ot.next}Ih=!1}if(Hh=0,O$4=N$2=M$3=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T$3=1,pk=g,Y=null;break}e:{var ut=it,dt=et.return,ft=et,St=g;if(g=Z$2,ft.flags|=32768,St!==null&&typeof St=="object"&&typeof St.then=="function"){var kt=St,Tt=ft,Rt=Tt.tag;if(!(Tt.mode&1)&&(Rt===0||Rt===11||Rt===15)){var jt=Tt.alternate;jt?(Tt.updateQueue=jt.updateQueue,Tt.memoizedState=jt.memoizedState,Tt.lanes=jt.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var $t=Ui(dt);if($t!==null){$t.flags&=-257,Vi($t,dt,ft,ut,g),$t.mode&1&&Si(ut,kt,g),g=$t,St=kt;var Ft=g.updateQueue;if(Ft===null){var Ht=new Set;Ht.add(St),g.updateQueue=Ht}else Ft.add(St);break e}else{if(!(g&1)){Si(ut,kt,g),tj();break e}St=Error(p$3(426))}}else if(I$4&&ft.mode&1){var Kt=Ui(dt);if(Kt!==null){!(Kt.flags&65536)&&(Kt.flags|=256),Vi(Kt,dt,ft,ut,g),Jg(Ji(St,ft));break e}}ut=St=Ji(St,ft),T$3!==4&&(T$3=2),sk===null?sk=[ut]:sk.push(ut),ut=dt;do{switch(ut.tag){case 3:ut.flags|=65536,g&=-g,ut.lanes|=g;var Bt=Ni(ut,St,g);ph(ut,Bt);break e;case 1:ft=St;var Ut=ut.type,Yt=ut.stateNode;if(!(ut.flags&128)&&(typeof Ut.getDerivedStateFromError=="function"||Yt!==null&&typeof Yt.componentDidCatch=="function"&&(Ri===null||!Ri.has(Yt)))){ut.flags|=65536,g&=-g,ut.lanes|=g;var Jt=Qi(ut,ft,g);ph(ut,Jt);break e}}ut=ut.return}while(ut!==null)}Sk(et)}catch(Zt){g=Zt,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(1)}function Jk(){var it=mk.current;return mk.current=Rh,it===null?Rh:it}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$2)}function Ik(it,g){var et=K$2;K$2|=2;var ot=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Kk(it,g));do try{Tk();break}catch(ct){Mk(it,ct)}while(1);if($g(),K$2=et,mk.current=ot,Y!==null)throw Error(p$3(261));return Q$1=null,Z$2=0,T$3}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(it){var g=Vk(it.alternate,it,fj);it.memoizedProps=it.pendingProps,g===null?Sk(it):Y=g,nk.current=null}function Sk(it){var g=it;do{var et=g.alternate;if(it=g.return,g.flags&32768){if(et=Ij(et,g),et!==null){et.flags&=32767,Y=et;return}if(it!==null)it.flags|=32768,it.subtreeFlags=0,it.deletions=null;else{T$3=6,Y=null;return}}else if(et=Ej(et,g,fj),et!==null){Y=et;return}if(g=g.sibling,g!==null){Y=g;return}Y=g=it}while(g!==null);T$3===0&&(T$3=5)}function Pk(it,g,et){var ot=C$4,ct=ok.transition;try{ok.transition=null,C$4=1,Wk(it,g,et,ot)}finally{ok.transition=ct,C$4=ot}return null}function Wk(it,g,et,ot){do Hk();while(wk!==null);if(K$2&6)throw Error(p$3(327));et=it.finishedWork;var ct=it.finishedLanes;if(et===null)return null;if(it.finishedWork=null,it.finishedLanes=0,et===it.current)throw Error(p$3(177));it.callbackNode=null,it.callbackPriority=0;var ut=et.lanes|et.childLanes;if(Bc(it,ut),it===Q$1&&(Y=Q$1=null,Z$2=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),ut=(et.flags&15990)!==0,et.subtreeFlags&15990||ut){ut=ok.transition,ok.transition=null;var dt=C$4;C$4=1;var ft=K$2;K$2|=4,nk.current=null,Oj(it,et),dk(et,it),Oe$1(Df),dd=!!Cf,Df=Cf=null,it.current=et,hk(et),dc(),K$2=ft,C$4=dt,ok.transition=ut}else it.current=et;if(vk&&(vk=!1,wk=it,xk=ct),ut=it.pendingLanes,ut===0&&(Ri=null),mc(et.stateNode),Dk(it,B$1()),g!==null)for(ot=it.onRecoverableError,et=0;et<g.length;et++)ct=g[et],ot(ct.value,{componentStack:ct.stack,digest:ct.digest});if(Oi)throw Oi=!1,it=Pi,Pi=null,it;return xk&1&&it.tag!==0&&Hk(),ut=it.pendingLanes,ut&1?it===zk?yk++:(yk=0,zk=it):yk=0,jg(),null}function Hk(){if(wk!==null){var it=Dc(xk),g=ok.transition,et=C$4;try{if(ok.transition=null,C$4=16>it?16:it,wk===null)var ot=!1;else{if(it=wk,wk=null,xk=0,K$2&6)throw Error(p$3(331));var ct=K$2;for(K$2|=4,V$2=it.current;V$2!==null;){var ut=V$2,dt=ut.child;if(V$2.flags&16){var ft=ut.deletions;if(ft!==null){for(var St=0;St<ft.length;St++){var kt=ft[St];for(V$2=kt;V$2!==null;){var Tt=V$2;switch(Tt.tag){case 0:case 11:case 15:Pj(8,Tt,ut)}var Rt=Tt.child;if(Rt!==null)Rt.return=Tt,V$2=Rt;else for(;V$2!==null;){Tt=V$2;var jt=Tt.sibling,$t=Tt.return;if(Sj(Tt),Tt===kt){V$2=null;break}if(jt!==null){jt.return=$t,V$2=jt;break}V$2=$t}}}var Ft=ut.alternate;if(Ft!==null){var Ht=Ft.child;if(Ht!==null){Ft.child=null;do{var Kt=Ht.sibling;Ht.sibling=null,Ht=Kt}while(Ht!==null)}}V$2=ut}}if(ut.subtreeFlags&2064&&dt!==null)dt.return=ut,V$2=dt;else e:for(;V$2!==null;){if(ut=V$2,ut.flags&2048)switch(ut.tag){case 0:case 11:case 15:Pj(9,ut,ut.return)}var Bt=ut.sibling;if(Bt!==null){Bt.return=ut.return,V$2=Bt;break e}V$2=ut.return}}var Ut=it.current;for(V$2=Ut;V$2!==null;){dt=V$2;var Yt=dt.child;if(dt.subtreeFlags&2064&&Yt!==null)Yt.return=dt,V$2=Yt;else e:for(dt=Ut;V$2!==null;){if(ft=V$2,ft.flags&2048)try{switch(ft.tag){case 0:case 11:case 15:Qj(9,ft)}}catch(Zt){W$2(ft,ft.return,Zt)}if(ft===dt){V$2=null;break e}var Jt=ft.sibling;if(Jt!==null){Jt.return=ft.return,V$2=Jt;break e}V$2=ft.return}}if(K$2=ct,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,it)}catch{}ot=!0}return ot}finally{C$4=et,ok.transition=g}}return!1}function Xk(it,g,et){g=Ji(et,g),g=Ni(it,g,1),it=nh(it,g,1),g=R$3(),it!==null&&(Ac(it,1,g),Dk(it,g))}function W$2(it,g,et){if(it.tag===3)Xk(it,it,et);else for(;g!==null;){if(g.tag===3){Xk(g,it,et);break}else if(g.tag===1){var ot=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof ot.componentDidCatch=="function"&&(Ri===null||!Ri.has(ot))){it=Ji(et,it),it=Qi(g,it,1),g=nh(g,it,1),it=R$3(),g!==null&&(Ac(g,1,it),Dk(g,it));break}}g=g.return}}function Ti(it,g,et){var ot=it.pingCache;ot!==null&&ot.delete(g),g=R$3(),it.pingedLanes|=it.suspendedLanes&et,Q$1===it&&(Z$2&et)===et&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$1()-fk?Kk(it,0):rk|=et),Dk(it,g)}function Yk(it,g){g===0&&(it.mode&1?(g=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):g=1);var et=R$3();it=ih(it,g),it!==null&&(Ac(it,g,et),Dk(it,et))}function uj(it){var g=it.memoizedState,et=0;g!==null&&(et=g.retryLane),Yk(it,et)}function bk(it,g){var et=0;switch(it.tag){case 13:var ot=it.stateNode,ct=it.memoizedState;ct!==null&&(et=ct.retryLane);break;case 19:ot=it.stateNode;break;default:throw Error(p$3(314))}ot!==null&&ot.delete(g),Yk(it,et)}var Vk;Vk=function(it,g,et){if(it!==null)if(it.memoizedProps!==g.pendingProps||Wf.current)dh=!0;else{if(!(it.lanes&et)&&!(g.flags&128))return dh=!1,yj(it,g,et);dh=!!(it.flags&131072)}else dh=!1,I$4&&g.flags&1048576&&ug(g,ng,g.index);switch(g.lanes=0,g.tag){case 2:var ot=g.type;ij(it,g),it=g.pendingProps;var ct=Yf(g,H$3.current);ch(g,et),ct=Nh(null,g,ot,it,ct,et);var ut=Sh();return g.flags|=1,typeof ct=="object"&&ct!==null&&typeof ct.render=="function"&&ct.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Zf(ot)?(ut=!0,cg(g)):ut=!1,g.memoizedState=ct.state!==null&&ct.state!==void 0?ct.state:null,kh(g),ct.updater=Ei,g.stateNode=ct,ct._reactInternals=g,Ii(g,ot,it,et),g=jj(null,g,ot,!0,ut,et)):(g.tag=0,I$4&&ut&&vg(g),Xi(null,g,ct,et),g=g.child),g;case 16:ot=g.elementType;e:{switch(ij(it,g),it=g.pendingProps,ct=ot._init,ot=ct(ot._payload),g.type=ot,ct=g.tag=Zk(ot),it=Ci(ot,it),ct){case 0:g=cj(null,g,ot,it,et);break e;case 1:g=hj(null,g,ot,it,et);break e;case 11:g=Yi(null,g,ot,it,et);break e;case 14:g=$i(null,g,ot,Ci(ot.type,it),et);break e}throw Error(p$3(306,ot,""))}return g;case 0:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),cj(it,g,ot,ct,et);case 1:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),hj(it,g,ot,ct,et);case 3:e:{if(kj(g),it===null)throw Error(p$3(387));ot=g.pendingProps,ut=g.memoizedState,ct=ut.element,lh(it,g),qh(g,ot,null,et);var dt=g.memoizedState;if(ot=dt.element,ut.isDehydrated)if(ut={element:ot,isDehydrated:!1,cache:dt.cache,pendingSuspenseBoundaries:dt.pendingSuspenseBoundaries,transitions:dt.transitions},g.updateQueue.baseState=ut,g.memoizedState=ut,g.flags&256){ct=Ji(Error(p$3(423)),g),g=lj(it,g,ot,et,ct);break e}else if(ot!==ct){ct=Ji(Error(p$3(424)),g),g=lj(it,g,ot,et,ct);break e}else for(yg=Lf(g.stateNode.containerInfo.firstChild),xg=g,I$4=!0,zg=null,et=Vg(g,null,ot,et),g.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),ot===ct){g=Zi(it,g,et);break e}Xi(it,g,ot,et)}g=g.child}return g;case 5:return Ah(g),it===null&&Eg(g),ot=g.type,ct=g.pendingProps,ut=it!==null?it.memoizedProps:null,dt=ct.children,Ef(ot,ct)?dt=null:ut!==null&&Ef(ot,ut)&&(g.flags|=32),gj(it,g),Xi(it,g,dt,et),g.child;case 6:return it===null&&Eg(g),null;case 13:return oj(it,g,et);case 4:return yh(g,g.stateNode.containerInfo),ot=g.pendingProps,it===null?g.child=Ug(g,null,ot,et):Xi(it,g,ot,et),g.child;case 11:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),Yi(it,g,ot,ct,et);case 7:return Xi(it,g,g.pendingProps,et),g.child;case 8:return Xi(it,g,g.pendingProps.children,et),g.child;case 12:return Xi(it,g,g.pendingProps.children,et),g.child;case 10:e:{if(ot=g.type._context,ct=g.pendingProps,ut=g.memoizedProps,dt=ct.value,G$1(Wg,ot._currentValue),ot._currentValue=dt,ut!==null)if(He$2(ut.value,dt)){if(ut.children===ct.children&&!Wf.current){g=Zi(it,g,et);break e}}else for(ut=g.child,ut!==null&&(ut.return=g);ut!==null;){var ft=ut.dependencies;if(ft!==null){dt=ut.child;for(var St=ft.firstContext;St!==null;){if(St.context===ot){if(ut.tag===1){St=mh(-1,et&-et),St.tag=2;var kt=ut.updateQueue;if(kt!==null){kt=kt.shared;var Tt=kt.pending;Tt===null?St.next=St:(St.next=Tt.next,Tt.next=St),kt.pending=St}}ut.lanes|=et,St=ut.alternate,St!==null&&(St.lanes|=et),bh(ut.return,et,g),ft.lanes|=et;break}St=St.next}}else if(ut.tag===10)dt=ut.type===g.type?null:ut.child;else if(ut.tag===18){if(dt=ut.return,dt===null)throw Error(p$3(341));dt.lanes|=et,ft=dt.alternate,ft!==null&&(ft.lanes|=et),bh(dt,et,g),dt=ut.sibling}else dt=ut.child;if(dt!==null)dt.return=ut;else for(dt=ut;dt!==null;){if(dt===g){dt=null;break}if(ut=dt.sibling,ut!==null){ut.return=dt.return,dt=ut;break}dt=dt.return}ut=dt}Xi(it,g,ct.children,et),g=g.child}return g;case 9:return ct=g.type,ot=g.pendingProps.children,ch(g,et),ct=eh(ct),ot=ot(ct),g.flags|=1,Xi(it,g,ot,et),g.child;case 14:return ot=g.type,ct=Ci(ot,g.pendingProps),ct=Ci(ot.type,ct),$i(it,g,ot,ct,et);case 15:return bj(it,g,g.type,g.pendingProps,et);case 17:return ot=g.type,ct=g.pendingProps,ct=g.elementType===ot?ct:Ci(ot,ct),ij(it,g),g.tag=1,Zf(ot)?(it=!0,cg(g)):it=!1,ch(g,et),Gi(g,ot,ct),Ii(g,ot,ct,et),jj(null,g,ot,!0,it,et);case 19:return xj(it,g,et);case 22:return dj(it,g,et)}throw Error(p$3(156,g.tag))};function Fk(it,g){return ac(it,g)}function $k(it,g,et,ot){this.tag=it,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ot,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(it,g,et,ot){return new $k(it,g,et,ot)}function aj(it){return it=it.prototype,!(!it||!it.isReactComponent)}function Zk(it){if(typeof it=="function")return aj(it)?1:0;if(it!=null){if(it=it.$$typeof,it===Da)return 11;if(it===Ga)return 14}return 2}function Pg(it,g){var et=it.alternate;return et===null?(et=Bg(it.tag,g,it.key,it.mode),et.elementType=it.elementType,et.type=it.type,et.stateNode=it.stateNode,et.alternate=it,it.alternate=et):(et.pendingProps=g,et.type=it.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=it.flags&14680064,et.childLanes=it.childLanes,et.lanes=it.lanes,et.child=it.child,et.memoizedProps=it.memoizedProps,et.memoizedState=it.memoizedState,et.updateQueue=it.updateQueue,g=it.dependencies,et.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},et.sibling=it.sibling,et.index=it.index,et.ref=it.ref,et}function Rg(it,g,et,ot,ct,ut){var dt=2;if(ot=it,typeof it=="function")aj(it)&&(dt=1);else if(typeof it=="string")dt=5;else e:switch(it){case ya:return Tg(et.children,ct,ut,g);case za:dt=8,ct|=8;break;case Aa:return it=Bg(12,et,g,ct|2),it.elementType=Aa,it.lanes=ut,it;case Ea:return it=Bg(13,et,g,ct),it.elementType=Ea,it.lanes=ut,it;case Fa:return it=Bg(19,et,g,ct),it.elementType=Fa,it.lanes=ut,it;case Ia:return pj(et,ct,ut,g);default:if(typeof it=="object"&&it!==null)switch(it.$$typeof){case Ba:dt=10;break e;case Ca:dt=9;break e;case Da:dt=11;break e;case Ga:dt=14;break e;case Ha:dt=16,ot=null;break e}throw Error(p$3(130,it==null?it:typeof it,""))}return g=Bg(dt,et,g,ct),g.elementType=it,g.type=ot,g.lanes=ut,g}function Tg(it,g,et,ot){return it=Bg(7,it,ot,g),it.lanes=et,it}function pj(it,g,et,ot){return it=Bg(22,it,ot,g),it.elementType=Ia,it.lanes=et,it.stateNode={isHidden:!1},it}function Qg(it,g,et){return it=Bg(6,it,null,g),it.lanes=et,it}function Sg(it,g,et){return g=Bg(4,it.children!==null?it.children:[],it.key,g),g.lanes=et,g.stateNode={containerInfo:it.containerInfo,pendingChildren:null,implementation:it.implementation},g}function al(it,g,et,ot,ct){this.tag=g,this.containerInfo=it,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=ot,this.onRecoverableError=ct,this.mutableSourceEagerHydrationData=null}function bl(it,g,et,ot,ct,ut,dt,ft,St){return it=new al(it,g,et,ft,St),g===1?(g=1,ut===!0&&(g|=8)):g=0,ut=Bg(3,null,null,g),it.current=ut,ut.stateNode=it,ut.memoizedState={element:ot,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(ut),it}function cl(it,g,et){var ot=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:ot==null?null:""+ot,children:it,containerInfo:g,implementation:et}}function dl(it){if(!it)return Vf;it=it._reactInternals;e:{if(Vb(it)!==it||it.tag!==1)throw Error(p$3(170));var g=it;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Zf(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(p$3(171))}if(it.tag===1){var et=it.type;if(Zf(et))return bg(it,et,g)}return g}function el(it,g,et,ot,ct,ut,dt,ft,St){return it=bl(et,ot,!0,it,ct,ut,dt,ft,St),it.context=dl(null),et=it.current,ot=R$3(),ct=yi(et),ut=mh(ot,ct),ut.callback=g??null,nh(et,ut,ct),it.current.lanes=ct,Ac(it,ct,ot),Dk(it,ot),it}function fl(it,g,et,ot){var ct=g.current,ut=R$3(),dt=yi(ct);return et=dl(et),g.context===null?g.context=et:g.pendingContext=et,g=mh(ut,dt),g.payload={element:it},ot=ot===void 0?null:ot,ot!==null&&(g.callback=ot),it=nh(ct,g,dt),it!==null&&(gi(it,ct,dt,ut),oh(it,ct,dt)),dt}function gl(it){if(it=it.current,!it.child)return null;switch(it.child.tag){case 5:return it.child.stateNode;default:return it.child.stateNode}}function hl(it,g){if(it=it.memoizedState,it!==null&&it.dehydrated!==null){var et=it.retryLane;it.retryLane=et!==0&&et<g?et:g}}function il(it,g){hl(it,g),(it=it.alternate)&&hl(it,g)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(it){console.error(it)};function ll(it){this._internalRoot=it}ml.prototype.render=ll.prototype.render=function(it){var g=this._internalRoot;if(g===null)throw Error(p$3(409));fl(it,g,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var it=this._internalRoot;if(it!==null){this._internalRoot=null;var g=it.containerInfo;Rk(function(){fl(null,it,null,null)}),g[uf]=null}};function ml(it){this._internalRoot=it}ml.prototype.unstable_scheduleHydration=function(it){if(it){var g=Hc();it={blockedOn:null,target:it,priority:g};for(var et=0;et<Qc.length&&g!==0&&g<Qc[et].priority;et++);Qc.splice(et,0,it),et===0&&Vc(it)}};function nl(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11)}function ol(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11&&(it.nodeType!==8||it.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(it,g,et,ot,ct){if(ct){if(typeof ot=="function"){var ut=ot;ot=function(){var kt=gl(dt);ut.call(kt)}}var dt=el(g,ot,it,0,null,!1,!1,"",pl);return it._reactRootContainer=dt,it[uf]=dt.current,sf(it.nodeType===8?it.parentNode:it),Rk(),dt}for(;ct=it.lastChild;)it.removeChild(ct);if(typeof ot=="function"){var ft=ot;ot=function(){var kt=gl(St);ft.call(kt)}}var St=bl(it,0,!1,null,null,!1,!1,"",pl);return it._reactRootContainer=St,it[uf]=St.current,sf(it.nodeType===8?it.parentNode:it),Rk(function(){fl(g,St,et,ot)}),St}function rl(it,g,et,ot,ct){var ut=et._reactRootContainer;if(ut){var dt=ut;if(typeof ct=="function"){var ft=ct;ct=function(){var St=gl(dt);ft.call(St)}}fl(g,dt,it,ct)}else dt=ql(et,g,it,ct,ot);return gl(dt)}Ec=function(it){switch(it.tag){case 3:var g=it.stateNode;if(g.current.memoizedState.isDehydrated){var et=tc(g.pendingLanes);et!==0&&(Cc(g,et|1),Dk(g,B$1()),!(K$2&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var ot=ih(it,1);if(ot!==null){var ct=R$3();gi(ot,it,1,ct)}}),il(it,1)}};Fc=function(it){if(it.tag===13){var g=ih(it,134217728);if(g!==null){var et=R$3();gi(g,it,134217728,et)}il(it,134217728)}};Gc=function(it){if(it.tag===13){var g=yi(it),et=ih(it,g);if(et!==null){var ot=R$3();gi(et,it,g,ot)}il(it,g)}};Hc=function(){return C$4};Ic=function(it,g){var et=C$4;try{return C$4=it,g()}finally{C$4=et}};yb=function(it,g,et){switch(g){case"input":if(bb(it,et),g=et.name,et.type==="radio"&&g!=null){for(et=it;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<et.length;g++){var ot=et[g];if(ot!==it&&ot.form===it.form){var ct=Db(ot);if(!ct)throw Error(p$3(90));Wa(ot),bb(ot,ct)}}}break;case"textarea":ib(it,et);break;case"select":g=et.value,g!=null&&fb(it,!!et.multiple,g,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(it){return it=Zb(it),it===null?null:it.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(it,g){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(g))throw Error(p$3(200));return cl(it,g,null,et)};reactDom_production_min.createRoot=function(it,g){if(!nl(it))throw Error(p$3(299));var et=!1,ot="",ct=kl;return g!=null&&(g.unstable_strictMode===!0&&(et=!0),g.identifierPrefix!==void 0&&(ot=g.identifierPrefix),g.onRecoverableError!==void 0&&(ct=g.onRecoverableError)),g=bl(it,1,!1,null,null,et,!1,ot,ct),it[uf]=g.current,sf(it.nodeType===8?it.parentNode:it),new ll(g)};reactDom_production_min.findDOMNode=function(it){if(it==null)return null;if(it.nodeType===1)return it;var g=it._reactInternals;if(g===void 0)throw typeof it.render=="function"?Error(p$3(188)):(it=Object.keys(it).join(","),Error(p$3(268,it)));return it=Zb(g),it=it===null?null:it.stateNode,it};reactDom_production_min.flushSync=function(it){return Rk(it)};reactDom_production_min.hydrate=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!0,et)};reactDom_production_min.hydrateRoot=function(it,g,et){if(!nl(it))throw Error(p$3(405));var ot=et!=null&&et.hydratedSources||null,ct=!1,ut="",dt=kl;if(et!=null&&(et.unstable_strictMode===!0&&(ct=!0),et.identifierPrefix!==void 0&&(ut=et.identifierPrefix),et.onRecoverableError!==void 0&&(dt=et.onRecoverableError)),g=el(g,null,it,1,et??null,ct,!1,ut,dt),it[uf]=g.current,sf(it),ot)for(it=0;it<ot.length;it++)et=ot[it],ct=et._getVersion,ct=ct(et._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[et,ct]:g.mutableSourceEagerHydrationData.push(et,ct);return new ml(g)};reactDom_production_min.render=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!1,et)};reactDom_production_min.unmountComponentAtNode=function(it){if(!ol(it))throw Error(p$3(40));return it._reactRootContainer?(Rk(function(){rl(null,null,it,!1,function(){it._reactRootContainer=null,it[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(it,g,et,ot){if(!ol(et))throw Error(p$3(200));if(it==null||it._reactInternals===void 0)throw Error(p$3(38));return rl(it,g,et,!1,ot)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(it){console.error(it)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$5=reactDomExports;createRoot=m$5.createRoot,m$5.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$2.apply(this,arguments)}var Action;(function(it){it.Pop="POP",it.Push="PUSH",it.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(it){it===void 0&&(it={});function g(ot,ct){let{pathname:ut,search:dt,hash:ft}=ot.location;return createLocation("",{pathname:ut,search:dt,hash:ft},ct.state&&ct.state.usr||null,ct.state&&ct.state.key||"default")}function et(ot,ct){return typeof ct=="string"?ct:createPath(ct)}return getUrlBasedHistory(g,et,null,it)}function invariant$2(it,g){if(it===!1||it===null||typeof it>"u")throw new Error(g)}function warning$2(it,g){if(!it){typeof console<"u"&&console.warn(g);try{throw new Error(g)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(it,g){return{usr:it.state,key:it.key,idx:g}}function createLocation(it,g,et,ot){return et===void 0&&(et=null),_extends$2({pathname:typeof it=="string"?it:it.pathname,search:"",hash:""},typeof g=="string"?parsePath(g):g,{state:et,key:g&&g.key||ot||createKey$1()})}function createPath(it){let{pathname:g="/",search:et="",hash:ot=""}=it;return et&&et!=="?"&&(g+=et.charAt(0)==="?"?et:"?"+et),ot&&ot!=="#"&&(g+=ot.charAt(0)==="#"?ot:"#"+ot),g}function parsePath(it){let g={};if(it){let et=it.indexOf("#");et>=0&&(g.hash=it.substr(et),it=it.substr(0,et));let ot=it.indexOf("?");ot>=0&&(g.search=it.substr(ot),it=it.substr(0,ot)),it&&(g.pathname=it)}return g}function getUrlBasedHistory(it,g,et,ot){ot===void 0&&(ot={});let{window:ct=document.defaultView,v5Compat:ut=!1}=ot,dt=ct.history,ft=Action.Pop,St=null,kt=Tt();kt==null&&(kt=0,dt.replaceState(_extends$2({},dt.state,{idx:kt}),""));function Tt(){return(dt.state||{idx:null}).idx}function Rt(){ft=Action.Pop;let Kt=Tt(),Bt=Kt==null?null:Kt-kt;kt=Kt,St&&St({action:ft,location:Ht.location,delta:Bt})}function jt(Kt,Bt){ft=Action.Push;let Ut=createLocation(Ht.location,Kt,Bt);et&&et(Ut,Kt),kt=Tt()+1;let Yt=getHistoryState(Ut,kt),Jt=Ht.createHref(Ut);try{dt.pushState(Yt,"",Jt)}catch(Zt){if(Zt instanceof DOMException&&Zt.name==="DataCloneError")throw Zt;ct.location.assign(Jt)}ut&&St&&St({action:ft,location:Ht.location,delta:1})}function $t(Kt,Bt){ft=Action.Replace;let Ut=createLocation(Ht.location,Kt,Bt);et&&et(Ut,Kt),kt=Tt();let Yt=getHistoryState(Ut,kt),Jt=Ht.createHref(Ut);dt.replaceState(Yt,"",Jt),ut&&St&&St({action:ft,location:Ht.location,delta:0})}function Ft(Kt){let Bt=ct.location.origin!=="null"?ct.location.origin:ct.location.href,Ut=typeof Kt=="string"?Kt:createPath(Kt);return Ut=Ut.replace(/ $/,"%20"),invariant$2(Bt,"No window.location.(origin|href) available to create URL for href: "+Ut),new URL(Ut,Bt)}let Ht={get action(){return ft},get location(){return it(ct,dt)},listen(Kt){if(St)throw new Error("A history only accepts one active listener");return ct.addEventListener(PopStateEventType,Rt),St=Kt,()=>{ct.removeEventListener(PopStateEventType,Rt),St=null}},createHref(Kt){return g(ct,Kt)},createURL:Ft,encodeLocation(Kt){let Bt=Ft(Kt);return{pathname:Bt.pathname,search:Bt.search,hash:Bt.hash}},push:jt,replace:$t,go(Kt){return dt.go(Kt)}};return Ht}var ResultType;(function(it){it.data="data",it.deferred="deferred",it.redirect="redirect",it.error="error"})(ResultType||(ResultType={}));function matchRoutes(it,g,et){return et===void 0&&(et="/"),matchRoutesImpl(it,g,et,!1)}function matchRoutesImpl(it,g,et,ot){let ct=typeof g=="string"?parsePath(g):g,ut=stripBasename(ct.pathname||"/",et);if(ut==null)return null;let dt=flattenRoutes(it);rankRouteBranches(dt);let ft=null;for(let St=0;ft==null&&St<dt.length;++St){let kt=decodePath(ut);ft=matchRouteBranch(dt[St],kt,ot)}return ft}function flattenRoutes(it,g,et,ot){g===void 0&&(g=[]),et===void 0&&(et=[]),ot===void 0&&(ot="");let ct=(ut,dt,ft)=>{let St={relativePath:ft===void 0?ut.path||"":ft,caseSensitive:ut.caseSensitive===!0,childrenIndex:dt,route:ut};St.relativePath.startsWith("/")&&(invariant$2(St.relativePath.startsWith(ot),'Absolute route path "'+St.relativePath+'" nested under path '+('"'+ot+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),St.relativePath=St.relativePath.slice(ot.length));let kt=joinPaths([ot,St.relativePath]),Tt=et.concat(St);ut.children&&ut.children.length>0&&(invariant$2(ut.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+kt+'".')),flattenRoutes(ut.children,g,Tt,kt)),!(ut.path==null&&!ut.index)&&g.push({path:kt,score:computeScore(kt,ut.index),routesMeta:Tt})};return it.forEach((ut,dt)=>{var ft;if(ut.path===""||!((ft=ut.path)!=null&&ft.includes("?")))ct(ut,dt);else for(let St of explodeOptionalSegments(ut.path))ct(ut,dt,St)}),g}function explodeOptionalSegments(it){let g=it.split("/");if(g.length===0)return[];let[et,...ot]=g,ct=et.endsWith("?"),ut=et.replace(/\?$/,"");if(ot.length===0)return ct?[ut,""]:[ut];let dt=explodeOptionalSegments(ot.join("/")),ft=[];return ft.push(...dt.map(St=>St===""?ut:[ut,St].join("/"))),ct&&ft.push(...dt),ft.map(St=>it.startsWith("/")&&St===""?"/":St)}function rankRouteBranches(it){it.sort((g,et)=>g.score!==et.score?et.score-g.score:compareIndexes(g.routesMeta.map(ot=>ot.childrenIndex),et.routesMeta.map(ot=>ot.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=it=>it==="*";function computeScore(it,g){let et=it.split("/"),ot=et.length;return et.some(isSplat)&&(ot+=splatPenalty),g&&(ot+=indexRouteValue),et.filter(ct=>!isSplat(ct)).reduce((ct,ut)=>ct+(paramRe.test(ut)?dynamicSegmentValue:ut===""?emptySegmentValue:staticSegmentValue),ot)}function compareIndexes(it,g){return it.length===g.length&&it.slice(0,-1).every((ot,ct)=>ot===g[ct])?it[it.length-1]-g[g.length-1]:0}function matchRouteBranch(it,g,et){et===void 0&&(et=!1);let{routesMeta:ot}=it,ct={},ut="/",dt=[];for(let ft=0;ft<ot.length;++ft){let St=ot[ft],kt=ft===ot.length-1,Tt=ut==="/"?g:g.slice(ut.length)||"/",Rt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:kt},Tt),jt=St.route;if(!Rt&&kt&&et&&!ot[ot.length-1].route.index&&(Rt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:!1},Tt)),!Rt)return null;Object.assign(ct,Rt.params),dt.push({params:ct,pathname:joinPaths([ut,Rt.pathname]),pathnameBase:normalizePathname(joinPaths([ut,Rt.pathnameBase])),route:jt}),Rt.pathnameBase!=="/"&&(ut=joinPaths([ut,Rt.pathnameBase]))}return dt}function matchPath(it,g){typeof it=="string"&&(it={path:it,caseSensitive:!1,end:!0});let[et,ot]=compilePath(it.path,it.caseSensitive,it.end),ct=g.match(et);if(!ct)return null;let ut=ct[0],dt=ut.replace(/(.)\/+$/,"$1"),ft=ct.slice(1);return{params:ot.reduce((kt,Tt,Rt)=>{let{paramName:jt,isOptional:$t}=Tt;if(jt==="*"){let Ht=ft[Rt]||"";dt=ut.slice(0,ut.length-Ht.length).replace(/(.)\/+$/,"$1")}const Ft=ft[Rt];return $t&&!Ft?kt[jt]=void 0:kt[jt]=(Ft||"").replace(/%2F/g,"/"),kt},{}),pathname:ut,pathnameBase:dt,pattern:it}}function compilePath(it,g,et){g===void 0&&(g=!1),et===void 0&&(et=!0),warning$2(it==="*"||!it.endsWith("*")||it.endsWith("/*"),'Route path "'+it+'" will be treated as if it were '+('"'+it.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+it.replace(/\*$/,"/*")+'".'));let ot=[],ct="^"+it.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(dt,ft,St)=>(ot.push({paramName:ft,isOptional:St!=null}),St?"/?([^\\/]+)?":"/([^\\/]+)"));return it.endsWith("*")?(ot.push({paramName:"*"}),ct+=it==="*"||it==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):et?ct+="\\/*$":it!==""&&it!=="/"&&(ct+="(?:(?=\\/|$))"),[new RegExp(ct,g?void 0:"i"),ot]}function decodePath(it){try{return it.split("/").map(g=>decodeURIComponent(g).replace(/\//g,"%2F")).join("/")}catch(g){return warning$2(!1,'The URL path "'+it+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+g+").")),it}}function stripBasename(it,g){if(g==="/")return it;if(!it.toLowerCase().startsWith(g.toLowerCase()))return null;let et=g.endsWith("/")?g.length-1:g.length,ot=it.charAt(et);return ot&&ot!=="/"?null:it.slice(et)||"/"}function resolvePath(it,g){g===void 0&&(g="/");let{pathname:et,search:ot="",hash:ct=""}=typeof it=="string"?parsePath(it):it;return{pathname:et?et.startsWith("/")?et:resolvePathname(et,g):g,search:normalizeSearch(ot),hash:normalizeHash(ct)}}function resolvePathname(it,g){let et=g.replace(/\/+$/,"").split("/");return it.split("/").forEach(ct=>{ct===".."?et.length>1&&et.pop():ct!=="."&&et.push(ct)}),et.length>1?et.join("/"):"/"}function getInvalidPathError(it,g,et,ot){return"Cannot include a '"+it+"' character in a manually specified "+("`to."+g+"` field ["+JSON.stringify(ot)+"].  Please separate it out to the ")+("`to."+et+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(it){return it.filter((g,et)=>et===0||g.route.path&&g.route.path.length>0)}function getResolveToMatches(it,g){let et=getPathContributingMatches(it);return g?et.map((ot,ct)=>ct===et.length-1?ot.pathname:ot.pathnameBase):et.map(ot=>ot.pathnameBase)}function resolveTo(it,g,et,ot){ot===void 0&&(ot=!1);let ct;typeof it=="string"?ct=parsePath(it):(ct=_extends$2({},it),invariant$2(!ct.pathname||!ct.pathname.includes("?"),getInvalidPathError("?","pathname","search",ct)),invariant$2(!ct.pathname||!ct.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ct)),invariant$2(!ct.search||!ct.search.includes("#"),getInvalidPathError("#","search","hash",ct)));let ut=it===""||ct.pathname==="",dt=ut?"/":ct.pathname,ft;if(dt==null)ft=et;else{let Rt=g.length-1;if(!ot&&dt.startsWith("..")){let jt=dt.split("/");for(;jt[0]==="..";)jt.shift(),Rt-=1;ct.pathname=jt.join("/")}ft=Rt>=0?g[Rt]:"/"}let St=resolvePath(ct,ft),kt=dt&&dt!=="/"&&dt.endsWith("/"),Tt=(ut||dt===".")&&et.endsWith("/");return!St.pathname.endsWith("/")&&(kt||Tt)&&(St.pathname+="/"),St}const joinPaths=it=>it.join("/").replace(/\/\/+/g,"/"),normalizePathname=it=>it.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=it=>!it||it==="?"?"":it.startsWith("?")?it:"?"+it,normalizeHash=it=>!it||it==="#"?"":it.startsWith("#")?it:"#"+it;function isRouteErrorResponse(it){return it!=null&&typeof it.status=="number"&&typeof it.statusText=="string"&&typeof it.internal=="boolean"&&"data"in it}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(it,g){let{relative:et}=g===void 0?{}:g;useInRouterContext()||invariant$2(!1);let{basename:ot,navigator:ct}=reactExports.useContext(NavigationContext),{hash:ut,pathname:dt,search:ft}=useResolvedPath(it,{relative:et}),St=dt;return ot!=="/"&&(St=dt==="/"?ot:joinPaths([ot,dt])),ct.createHref({pathname:St,search:ft,hash:ut})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(it){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(it)}function useNavigate(){let{isDataRoute:it}=reactExports.useContext(RouteContext);return it?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let it=reactExports.useContext(DataRouterContext),{basename:g,future:et,navigator:ot}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),{pathname:ut}=useLocation(),dt=JSON.stringify(getResolveToMatches(ct,et.v7_relativeSplatPath)),ft=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{ft.current=!0}),reactExports.useCallback(function(kt,Tt){if(Tt===void 0&&(Tt={}),!ft.current)return;if(typeof kt=="number"){ot.go(kt);return}let Rt=resolveTo(kt,JSON.parse(dt),ut,Tt.relative==="path");it==null&&g!=="/"&&(Rt.pathname=Rt.pathname==="/"?g:joinPaths([g,Rt.pathname])),(Tt.replace?ot.replace:ot.push)(Rt,Tt.state,Tt)},[g,ot,dt,ut,it])}function useResolvedPath(it,g){let{relative:et}=g===void 0?{}:g,{future:ot}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),{pathname:ut}=useLocation(),dt=JSON.stringify(getResolveToMatches(ct,ot.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(it,JSON.parse(dt),ut,et==="path"),[it,dt,ut,et])}function useRoutes(it,g){return useRoutesImpl(it,g)}function useRoutesImpl(it,g,et,ot){useInRouterContext()||invariant$2(!1);let{navigator:ct}=reactExports.useContext(NavigationContext),{matches:ut}=reactExports.useContext(RouteContext),dt=ut[ut.length-1],ft=dt?dt.params:{};dt&&dt.pathname;let St=dt?dt.pathnameBase:"/";dt&&dt.route;let kt=useLocation(),Tt;if(g){var Rt;let Kt=typeof g=="string"?parsePath(g):g;St==="/"||(Rt=Kt.pathname)!=null&&Rt.startsWith(St)||invariant$2(!1),Tt=Kt}else Tt=kt;let jt=Tt.pathname||"/",$t=jt;if(St!=="/"){let Kt=St.replace(/^\//,"").split("/");$t="/"+jt.replace(/^\//,"").split("/").slice(Kt.length).join("/")}let Ft=matchRoutes(it,{pathname:$t}),Ht=_renderMatches(Ft&&Ft.map(Kt=>Object.assign({},Kt,{params:Object.assign({},ft,Kt.params),pathname:joinPaths([St,ct.encodeLocation?ct.encodeLocation(Kt.pathname).pathname:Kt.pathname]),pathnameBase:Kt.pathnameBase==="/"?St:joinPaths([St,ct.encodeLocation?ct.encodeLocation(Kt.pathnameBase).pathname:Kt.pathnameBase])})),ut,et,ot);return g&&Ht?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},Tt),navigationType:Action.Pop}},Ht):Ht}function DefaultErrorComponent(){let it=useRouteError(),g=isRouteErrorResponse(it)?it.status+" "+it.statusText:it instanceof Error?it.message:JSON.stringify(it),et=it instanceof Error?it.stack:null,ct={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},ut=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},g),et?reactExports.createElement("pre",{style:ct},et):null,ut)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,et){return et.location!==g.location||et.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:et.error,location:et.location,revalidation:g.revalidation||et.revalidation}}componentDidCatch(g,et){console.error("React Router caught the following error during render",g,et)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(it){let{routeContext:g,match:et,children:ot}=it,ct=reactExports.useContext(DataRouterContext);return ct&&ct.static&&ct.staticContext&&(et.route.errorElement||et.route.ErrorBoundary)&&(ct.staticContext._deepestRenderedBoundaryId=et.route.id),reactExports.createElement(RouteContext.Provider,{value:g},ot)}function _renderMatches(it,g,et,ot){var ct;if(g===void 0&&(g=[]),et===void 0&&(et=null),ot===void 0&&(ot=null),it==null){var ut;if(!et)return null;if(et.errors)it=et.matches;else if((ut=ot)!=null&&ut.v7_partialHydration&&g.length===0&&!et.initialized&&et.matches.length>0)it=et.matches;else return null}let dt=it,ft=(ct=et)==null?void 0:ct.errors;if(ft!=null){let Tt=dt.findIndex(Rt=>Rt.route.id&&(ft==null?void 0:ft[Rt.route.id])!==void 0);Tt>=0||invariant$2(!1),dt=dt.slice(0,Math.min(dt.length,Tt+1))}let St=!1,kt=-1;if(et&&ot&&ot.v7_partialHydration)for(let Tt=0;Tt<dt.length;Tt++){let Rt=dt[Tt];if((Rt.route.HydrateFallback||Rt.route.hydrateFallbackElement)&&(kt=Tt),Rt.route.id){let{loaderData:jt,errors:$t}=et,Ft=Rt.route.loader&&jt[Rt.route.id]===void 0&&(!$t||$t[Rt.route.id]===void 0);if(Rt.route.lazy||Ft){St=!0,kt>=0?dt=dt.slice(0,kt+1):dt=[dt[0]];break}}}return dt.reduceRight((Tt,Rt,jt)=>{let $t,Ft=!1,Ht=null,Kt=null;et&&($t=ft&&Rt.route.id?ft[Rt.route.id]:void 0,Ht=Rt.route.errorElement||defaultErrorElement,St&&(kt<0&&jt===0?(warningOnce("route-fallback",!1),Ft=!0,Kt=null):kt===jt&&(Ft=!0,Kt=Rt.route.hydrateFallbackElement||null)));let Bt=g.concat(dt.slice(0,jt+1)),Ut=()=>{let Yt;return $t?Yt=Ht:Ft?Yt=Kt:Rt.route.Component?Yt=reactExports.createElement(Rt.route.Component,null):Rt.route.element?Yt=Rt.route.element:Yt=Tt,reactExports.createElement(RenderedRoute,{match:Rt,routeContext:{outlet:Tt,matches:Bt,isDataRoute:et!=null},children:Yt})};return et&&(Rt.route.ErrorBoundary||Rt.route.errorElement||jt===0)?reactExports.createElement(RenderErrorBoundary,{location:et.location,revalidation:et.revalidation,component:Ht,error:$t,children:Ut(),routeContext:{outlet:null,matches:Bt,isDataRoute:!0}}):Ut()},null)}var DataRouterHook$1=function(it){return it.UseBlocker="useBlocker",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it}(DataRouterHook$1||{}),DataRouterStateHook$1=function(it){return it.UseBlocker="useBlocker",it.UseLoaderData="useLoaderData",it.UseActionData="useActionData",it.UseRouteError="useRouteError",it.UseNavigation="useNavigation",it.UseRouteLoaderData="useRouteLoaderData",it.UseMatches="useMatches",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it.UseRouteId="useRouteId",it}(DataRouterStateHook$1||{});function useDataRouterContext(it){let g=reactExports.useContext(DataRouterContext);return g||invariant$2(!1),g}function useDataRouterState(it){let g=reactExports.useContext(DataRouterStateContext);return g||invariant$2(!1),g}function useRouteContext(it){let g=reactExports.useContext(RouteContext);return g||invariant$2(!1),g}function useCurrentRouteId(it){let g=useRouteContext(),et=g.matches[g.matches.length-1];return et.route.id||invariant$2(!1),et.route.id}function useRouteError(){var it;let g=reactExports.useContext(RouteErrorContext),et=useDataRouterState(DataRouterStateHook$1.UseRouteError),ot=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return g!==void 0?g:(it=et.errors)==null?void 0:it[ot]}function useNavigateStable(){let{router:it}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),g=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{et.current=!0}),reactExports.useCallback(function(ct,ut){ut===void 0&&(ut={}),et.current&&(typeof ct=="number"?it.navigate(ct):it.navigate(ct,_extends$1({fromRouteId:g},ut)))},[it,g])}const alreadyWarned$1={};function warningOnce(it,g,et){!g&&!alreadyWarned$1[it]&&(alreadyWarned$1[it]=!0)}const alreadyWarned={};function warnOnce(it,g){alreadyWarned[g]||(alreadyWarned[g]=!0,console.warn(g))}const logDeprecation=(it,g,et)=>warnOnce(it," React Router Future Flag Warning: "+g+". "+("You can use the `"+it+"` future flag to opt-in early. ")+("For more information, see "+et+"."));function logV6DeprecationWarnings(it,g){(it==null?void 0:it.v7_startTransition)===void 0&&logDeprecation("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(it==null?void 0:it.v7_relativeSplatPath)===void 0&&(!g||!g.v7_relativeSplatPath)&&logDeprecation("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),g&&(g.v7_fetcherPersist===void 0&&logDeprecation("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),g.v7_normalizeFormMethod===void 0&&logDeprecation("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),g.v7_partialHydration===void 0&&logDeprecation("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),g.v7_skipActionErrorRevalidation===void 0&&logDeprecation("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Navigate(it){let{to:g,replace:et,state:ot,relative:ct}=it;useInRouterContext()||invariant$2(!1);let{future:ut,static:dt}=reactExports.useContext(NavigationContext),{matches:ft}=reactExports.useContext(RouteContext),{pathname:St}=useLocation(),kt=useNavigate(),Tt=resolveTo(g,getResolveToMatches(ft,ut.v7_relativeSplatPath),St,ct==="path"),Rt=JSON.stringify(Tt);return reactExports.useEffect(()=>kt(JSON.parse(Rt),{replace:et,state:ot,relative:ct}),[kt,Rt,ct,et,ot]),null}function Route(it){invariant$2(!1)}function Router(it){let{basename:g="/",children:et=null,location:ot,navigationType:ct=Action.Pop,navigator:ut,static:dt=!1,future:ft}=it;useInRouterContext()&&invariant$2(!1);let St=g.replace(/^\/*/,"/"),kt=reactExports.useMemo(()=>({basename:St,navigator:ut,static:dt,future:_extends$1({v7_relativeSplatPath:!1},ft)}),[St,ft,ut,dt]);typeof ot=="string"&&(ot=parsePath(ot));let{pathname:Tt="/",search:Rt="",hash:jt="",state:$t=null,key:Ft="default"}=ot,Ht=reactExports.useMemo(()=>{let Kt=stripBasename(Tt,St);return Kt==null?null:{location:{pathname:Kt,search:Rt,hash:jt,state:$t,key:Ft},navigationType:ct}},[St,Tt,Rt,jt,$t,Ft,ct]);return Ht==null?null:reactExports.createElement(NavigationContext.Provider,{value:kt},reactExports.createElement(LocationContext.Provider,{children:et,value:Ht}))}function Routes(it){let{children:g,location:et}=it;return useRoutes(createRoutesFromChildren(g),et)}new Promise(()=>{});function createRoutesFromChildren(it,g){g===void 0&&(g=[]);let et=[];return reactExports.Children.forEach(it,(ot,ct)=>{if(!reactExports.isValidElement(ot))return;let ut=[...g,ct];if(ot.type===reactExports.Fragment){et.push.apply(et,createRoutesFromChildren(ot.props.children,ut));return}ot.type!==Route&&invariant$2(!1),!ot.props.index||!ot.props.children||invariant$2(!1);let dt={id:ot.props.id||ut.join("-"),caseSensitive:ot.props.caseSensitive,element:ot.props.element,Component:ot.props.Component,index:ot.props.index,path:ot.props.path,loader:ot.props.loader,action:ot.props.action,errorElement:ot.props.errorElement,ErrorBoundary:ot.props.ErrorBoundary,hasErrorBoundary:ot.props.ErrorBoundary!=null||ot.props.errorElement!=null,shouldRevalidate:ot.props.shouldRevalidate,handle:ot.props.handle,lazy:ot.props.lazy};ot.props.children&&(dt.children=createRoutesFromChildren(ot.props.children,ut)),et.push(dt)}),et}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ct,ut;for(ut=0;ut<ot.length;ut++)ct=ot[ut],!(g.indexOf(ct)>=0)&&(et[ct]=it[ct]);return et}function isModifiedEvent(it){return!!(it.metaKey||it.altKey||it.ctrlKey||it.shiftKey)}function shouldProcessLinkClick(it,g){return it.button===0&&(!g||g==="_self")&&!isModifiedEvent(it)}function createSearchParams(it){return it===void 0&&(it=""),new URLSearchParams(typeof it=="string"||Array.isArray(it)||it instanceof URLSearchParams?it:Object.keys(it).reduce((g,et)=>{let ot=it[et];return g.concat(Array.isArray(ot)?ot.map(ct=>[et,ct]):[[et,ot]])},[]))}function getSearchParamsForLocation(it,g){let et=createSearchParams(it);return g&&g.forEach((ot,ct)=>{et.has(ct)||g.getAll(ct).forEach(ut=>{et.append(ct,ut)})}),et}const _excluded$2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=t$5[START_TRANSITION];function BrowserRouter(it){let{basename:g,children:et,future:ot,window:ct}=it,ut=reactExports.useRef();ut.current==null&&(ut.current=createBrowserHistory({window:ct,v5Compat:!0}));let dt=ut.current,[ft,St]=reactExports.useState({action:dt.action,location:dt.location}),{v7_startTransition:kt}=ot||{},Tt=reactExports.useCallback(Rt=>{kt&&startTransitionImpl?startTransitionImpl(()=>St(Rt)):St(Rt)},[St,kt]);return reactExports.useLayoutEffect(()=>dt.listen(Tt),[dt,Tt]),reactExports.useEffect(()=>logV6DeprecationWarnings(ot),[ot]),reactExports.createElement(Router,{basename:g,children:et,location:ft.location,navigationType:ft.action,navigator:dt,future:ot})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(g,et){let{onClick:ot,relative:ct,reloadDocument:ut,replace:dt,state:ft,target:St,to:kt,preventScrollReset:Tt,viewTransition:Rt}=g,jt=_objectWithoutPropertiesLoose$1(g,_excluded$2),{basename:$t}=reactExports.useContext(NavigationContext),Ft,Ht=!1;if(typeof kt=="string"&&ABSOLUTE_URL_REGEX.test(kt)&&(Ft=kt,isBrowser$2))try{let Yt=new URL(window.location.href),Jt=kt.startsWith("//")?new URL(Yt.protocol+kt):new URL(kt),Zt=stripBasename(Jt.pathname,$t);Jt.origin===Yt.origin&&Zt!=null?kt=Zt+Jt.search+Jt.hash:Ht=!0}catch{}let Kt=useHref(kt,{relative:ct}),Bt=useLinkClickHandler(kt,{replace:dt,state:ft,target:St,preventScrollReset:Tt,relative:ct,viewTransition:Rt});function Ut(Yt){ot&&ot(Yt),Yt.defaultPrevented||Bt(Yt)}return reactExports.createElement("a",_extends({},jt,{href:Ft||Kt,onClick:Ht||ut?ot:Ut,ref:et,target:St}))});var DataRouterHook;(function(it){it.UseScrollRestoration="useScrollRestoration",it.UseSubmit="useSubmit",it.UseSubmitFetcher="useSubmitFetcher",it.UseFetcher="useFetcher",it.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(it){it.UseFetcher="useFetcher",it.UseFetchers="useFetchers",it.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(it,g){let{target:et,replace:ot,state:ct,preventScrollReset:ut,relative:dt,viewTransition:ft}=g===void 0?{}:g,St=useNavigate(),kt=useLocation(),Tt=useResolvedPath(it,{relative:dt});return reactExports.useCallback(Rt=>{if(shouldProcessLinkClick(Rt,et)){Rt.preventDefault();let jt=ot!==void 0?ot:createPath(kt)===createPath(Tt);St(it,{replace:jt,state:ct,preventScrollReset:ut,relative:dt,viewTransition:ft})}},[kt,St,Tt,ot,ct,et,it,ut,dt,ft])}function useSearchParams(it){let g=reactExports.useRef(createSearchParams(it)),et=reactExports.useRef(!1),ot=useLocation(),ct=reactExports.useMemo(()=>getSearchParamsForLocation(ot.search,et.current?null:g.current),[ot.search]),ut=useNavigate(),dt=reactExports.useCallback((ft,St)=>{const kt=createSearchParams(typeof ft=="function"?ft(ct):ft);et.current=!0,ut("?"+kt,St)},[ut,ct]);return[ct,dt]}function createDOMMotionComponentProxy(it){if(typeof Proxy>"u")return it;const g=new Map,et=(...ot)=>it(...ot);return new Proxy(et,{get:(ot,ct)=>ct==="create"?it:(g.has(ct)||g.set(ct,it(ct)),g.get(ct))})}function isAnimationControls(it){return it!==null&&typeof it=="object"&&typeof it.start=="function"}const isKeyframesTarget=it=>Array.isArray(it);function shallowCompare(it,g){if(!Array.isArray(g))return!1;const et=g.length;if(et!==it.length)return!1;for(let ot=0;ot<et;ot++)if(g[ot]!==it[ot])return!1;return!0}function isVariantLabel(it){return typeof it=="string"||Array.isArray(it)}function getValueState(it){const g=[{},{}];return it==null||it.values.forEach((et,ot)=>{g[0][ot]=et.get(),g[1][ot]=et.getVelocity()}),g}function resolveVariantFromProps(it,g,et,ot){if(typeof g=="function"){const[ct,ut]=getValueState(ot);g=g(et!==void 0?et:it.custom,ct,ut)}if(typeof g=="string"&&(g=it.variants&&it.variants[g]),typeof g=="function"){const[ct,ut]=getValueState(ot);g=g(et!==void 0?et:it.custom,ct,ut)}return g}function resolveVariant(it,g,et){const ot=it.getProps();return resolveVariantFromProps(ot,g,et!==void 0?et:ot.custom,it)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=it=>it*1e3,millisecondsToSeconds=it=>it/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=it=>({type:"spring",stiffness:550,damping:it===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(it,{keyframes:g})=>g.length>2?keyframesTransition:transformProps.has(it)?it.startsWith("scale")?criticallyDampedSpring(g[1]):underDampedSpring:ease;function getValueTransition(it,g){return it?it[g]||it.default||it:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull=it=>it!==null;function getFinalKeyframe(it,{repeat:g,repeatType:et="loop"},ot){const ct=it.filter(isNotNull),ut=g&&et!=="loop"&&g%2===1?0:ct.length-1;return!ut||ot===void 0?ct[ut]:ot}const noop$2=it=>it;let invariant$1=noop$2;function createRenderStep(it){let g=new Set,et=new Set,ot=!1,ct=!1;const ut=new WeakSet;let dt={delta:0,timestamp:0,isProcessing:!1};function ft(kt){ut.has(kt)&&(St.schedule(kt),it()),kt(dt)}const St={schedule:(kt,Tt=!1,Rt=!1)=>{const $t=Rt&&ot?g:et;return Tt&&ut.add(kt),$t.has(kt)||$t.add(kt),kt},cancel:kt=>{et.delete(kt),ut.delete(kt)},process:kt=>{if(dt=kt,ot){ct=!0;return}ot=!0,[g,et]=[et,g],g.forEach(ft),g.clear(),ot=!1,ct&&(ct=!1,St.process(kt))}};return St}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(it,g){let et=!1,ot=!0;const ct={delta:0,timestamp:0,isProcessing:!1},ut=()=>et=!0,dt=stepsOrder.reduce((Bt,Ut)=>(Bt[Ut]=createRenderStep(ut),Bt),{}),{read:ft,resolveKeyframes:St,update:kt,preRender:Tt,render:Rt,postRender:jt}=dt,$t=()=>{const Bt=performance.now();et=!1,ct.delta=ot?1e3/60:Math.max(Math.min(Bt-ct.timestamp,maxElapsed),1),ct.timestamp=Bt,ct.isProcessing=!0,ft.process(ct),St.process(ct),kt.process(ct),Tt.process(ct),Rt.process(ct),jt.process(ct),ct.isProcessing=!1,et&&g&&(ot=!1,it($t))},Ft=()=>{et=!0,ot=!0,ct.isProcessing||it($t)};return{schedule:stepsOrder.reduce((Bt,Ut)=>{const Yt=dt[Ut];return Bt[Ut]=(Jt,Zt=!1,en=!1)=>(et||Ft(),Yt.schedule(Jt,Zt,en)),Bt},{}),cancel:Bt=>{for(let Ut=0;Ut<stepsOrder.length;Ut++)dt[stepsOrder[Ut]].cancel(Bt)},state:ct,steps:dt}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0),calcBezier=(it,g,et)=>(((1-3*et+3*g)*it+(3*et-6*g))*it+3*g)*it,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(it,g,et,ot,ct){let ut,dt,ft=0;do dt=g+(et-g)/2,ut=calcBezier(dt,ot,ct)-it,ut>0?et=dt:g=dt;while(Math.abs(ut)>subdivisionPrecision&&++ft<subdivisionMaxIterations);return dt}function cubicBezier(it,g,et,ot){if(it===g&&et===ot)return noop$2;const ct=ut=>binarySubdivide(ut,0,1,it,et);return ut=>ut===0||ut===1?ut:calcBezier(ct(ut),g,ot)}const mirrorEasing=it=>g=>g<=.5?it(2*g)/2:(2-it(2*(1-g)))/2,reverseEasing=it=>g=>1-it(1-g),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=it=>(it*=2)<1?.5*backIn(it):.5*(2-Math.pow(2,-10*(it-1))),circIn=it=>1-Math.sin(Math.acos(it)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=it=>/^0[^.\s]+$/u.test(it);function isNone(it){return typeof it=="number"?it===0:it!==null?it==="none"||it==="0"||isZeroValueString(it):!0}const isNumericalString=it=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(it),checkStringStartsWith=it=>g=>typeof g=="string"&&g.startsWith(it),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=it=>startsAsVariableToken(it)?singleCssVariableRegex.test(it.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(it){const g=splitCSSVariableRegex.exec(it);if(!g)return[,];const[,et,ot,ct]=g;return[`--${et??ot}`,ct]}function getVariableValue(it,g,et=1){const[ot,ct]=parseCSSVariable(it);if(!ot)return;const ut=window.getComputedStyle(g).getPropertyValue(ot);if(ut){const dt=ut.trim();return isNumericalString(dt)?parseFloat(dt):dt}return isCSSVariableToken(ct)?getVariableValue(ct,g,et+1):ct}const clamp=(it,g,et)=>et>g?g:et<it?it:et,number={test:it=>typeof it=="number",parse:parseFloat,transform:it=>it},alpha$1={...number,transform:it=>clamp(0,1,it)},scale={...number,default:1},createUnitType=it=>({test:g=>typeof g=="string"&&g.endsWith(it)&&g.split(" ").length===1,parse:parseFloat,transform:g=>`${g}${it}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:it=>percent.parse(it)/100,transform:it=>percent.transform(it*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=it=>it===number||it===px,getPosFromMatrix=(it,g)=>parseFloat(it.split(", ")[g]),getTranslateFromMatrix=(it,g)=>(et,{transform:ot})=>{if(ot==="none"||!ot)return 0;const ct=ot.match(/^matrix3d\((.+)\)$/u);if(ct)return getPosFromMatrix(ct[1],g);{const ut=ot.match(/^matrix\((.+)\)$/u);return ut?getPosFromMatrix(ut[1],it):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(it=>!transformKeys.has(it));function removeNonTranslationalTransform(it){const g=[];return nonTranslationalTransformKeys.forEach(et=>{const ot=it.getValue(et);ot!==void 0&&(g.push([et,ot.get()]),ot.set(et.startsWith("scale")?1:0))}),g}const positionalValues={width:({x:it},{paddingLeft:g="0",paddingRight:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),height:({y:it},{paddingTop:g="0",paddingBottom:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),top:(it,{top:g})=>parseFloat(g),left:(it,{left:g})=>parseFloat(g),bottom:({y:it},{top:g})=>parseFloat(g)+(it.max-it.min),right:({x:it},{left:g})=>parseFloat(g)+(it.max-it.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=it=>g=>g.test(it),auto={test:it=>it==="auto",parse:it=>it},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=it=>dimensionValueTypes.find(testValueType(it)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const it=Array.from(toResolve).filter(ot=>ot.needsMeasurement),g=new Set(it.map(ot=>ot.element)),et=new Map;g.forEach(ot=>{const ct=removeNonTranslationalTransform(ot);ct.length&&(et.set(ot,ct),ot.render())}),it.forEach(ot=>ot.measureInitialState()),g.forEach(ot=>{ot.render();const ct=et.get(ot);ct&&ct.forEach(([ut,dt])=>{var ft;(ft=ot.getValue(ut))===null||ft===void 0||ft.set(dt)})}),it.forEach(ot=>ot.measureEndState()),it.forEach(ot=>{ot.suspendedScrollY!==void 0&&window.scrollTo(0,ot.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(it=>it.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(it=>{it.readKeyframes(),it.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(g,et,ot,ct,ut,dt=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...g],this.onComplete=et,this.name=ot,this.motionValue=ct,this.element=ut,this.isAsync=dt}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:g,name:et,element:ot,motionValue:ct}=this;for(let ut=0;ut<g.length;ut++)if(g[ut]===null)if(ut===0){const dt=ct==null?void 0:ct.get(),ft=g[g.length-1];if(dt!==void 0)g[0]=dt;else if(ot&&et){const St=ot.readValue(et,ft);St!=null&&(g[0]=St)}g[0]===void 0&&(g[0]=ft),ct&&dt===void 0&&ct.set(g[0])}else g[ut]=g[ut-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=it=>Math.round(it*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(it){return it==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(it,g)=>et=>!!(typeof et=="string"&&singleColorRegex.test(et)&&et.startsWith(it)||g&&!isNullish(et)&&Object.prototype.hasOwnProperty.call(et,g)),splitColor=(it,g,et)=>ot=>{if(typeof ot!="string")return ot;const[ct,ut,dt,ft]=ot.match(floatRegex);return{[it]:parseFloat(ct),[g]:parseFloat(ut),[et]:parseFloat(dt),alpha:ft!==void 0?parseFloat(ft):1}},clampRgbUnit=it=>clamp(0,255,it),rgbUnit={...number,transform:it=>Math.round(clampRgbUnit(it))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:it,green:g,blue:et,alpha:ot=1})=>"rgba("+rgbUnit.transform(it)+", "+rgbUnit.transform(g)+", "+rgbUnit.transform(et)+", "+sanitize(alpha$1.transform(ot))+")"};function parseHex(it){let g="",et="",ot="",ct="";return it.length>5?(g=it.substring(1,3),et=it.substring(3,5),ot=it.substring(5,7),ct=it.substring(7,9)):(g=it.substring(1,2),et=it.substring(2,3),ot=it.substring(3,4),ct=it.substring(4,5),g+=g,et+=et,ot+=ot,ct+=ct),{red:parseInt(g,16),green:parseInt(et,16),blue:parseInt(ot,16),alpha:ct?parseInt(ct,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:it,saturation:g,lightness:et,alpha:ot=1})=>"hsla("+Math.round(it)+", "+percent.transform(sanitize(g))+", "+percent.transform(sanitize(et))+", "+sanitize(alpha$1.transform(ot))+")"},color={test:it=>rgba.test(it)||hex.test(it)||hsla.test(it),parse:it=>rgba.test(it)?rgba.parse(it):hsla.test(it)?hsla.parse(it):hex.parse(it),transform:it=>typeof it=="string"?it:it.hasOwnProperty("red")?rgba.transform(it):hsla.transform(it)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(it){var g,et;return isNaN(it)&&typeof it=="string"&&(((g=it.match(floatRegex))===null||g===void 0?void 0:g.length)||0)+(((et=it.match(colorRegex))===null||et===void 0?void 0:et.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(it){const g=it.toString(),et=[],ot={color:[],number:[],var:[]},ct=[];let ut=0;const ft=g.replace(complexRegex,St=>(color.test(St)?(ot.color.push(ut),ct.push(COLOR_TOKEN),et.push(color.parse(St))):St.startsWith(VAR_FUNCTION_TOKEN)?(ot.var.push(ut),ct.push(VAR_TOKEN),et.push(St)):(ot.number.push(ut),ct.push(NUMBER_TOKEN),et.push(parseFloat(St))),++ut,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:et,split:ft,indexes:ot,types:ct}}function parseComplexValue(it){return analyseComplexValue(it).values}function createTransformer(it){const{split:g,types:et}=analyseComplexValue(it),ot=g.length;return ct=>{let ut="";for(let dt=0;dt<ot;dt++)if(ut+=g[dt],ct[dt]!==void 0){const ft=et[dt];ft===NUMBER_TOKEN?ut+=sanitize(ct[dt]):ft===COLOR_TOKEN?ut+=color.transform(ct[dt]):ut+=ct[dt]}return ut}}const convertNumbersToZero=it=>typeof it=="number"?0:it;function getAnimatableNone$1(it){const g=parseComplexValue(it);return createTransformer(it)(g.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(it){const[g,et]=it.slice(0,-1).split("(");if(g==="drop-shadow")return it;const[ot]=et.match(floatRegex)||[];if(!ot)return it;const ct=et.replace(ot,"");let ut=maxDefaults.has(g)?1:0;return ot!==et&&(ut*=100),g+"("+ut+ct+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:it=>{const g=it.match(functionRegex);return g?g.map(applyDefaultFilter).join(" "):it}},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=it=>defaultValueTypes[it];function getAnimatableNone(it,g){let et=getDefaultValueType(it);return et!==filter&&(et=complex),et.getAnimatableNone?et.getAnimatableNone(g):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(it,g,et){let ot=0,ct;for(;ot<it.length&&!ct;){const ut=it[ot];typeof ut=="string"&&!invalidTemplates.has(ut)&&analyseComplexValue(ut).values.length&&(ct=it[ot]),ot++}if(ct&&et)for(const ut of g)it[ut]=getAnimatableNone(et,ct)}class DOMKeyframesResolver extends KeyframeResolver{constructor(g,et,ot,ct,ut){super(g,et,ot,ct,ut,!0)}readKeyframes(){const{unresolvedKeyframes:g,element:et,name:ot}=this;if(!et||!et.current)return;super.readKeyframes();for(let St=0;St<g.length;St++){let kt=g[St];if(typeof kt=="string"&&(kt=kt.trim(),isCSSVariableToken(kt))){const Tt=getVariableValue(kt,et.current);Tt!==void 0&&(g[St]=Tt),St===g.length-1&&(this.finalKeyframe=kt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(ot)||g.length!==2)return;const[ct,ut]=g,dt=findDimensionValueType(ct),ft=findDimensionValueType(ut);if(dt!==ft)if(isNumOrPxType(dt)&&isNumOrPxType(ft))for(let St=0;St<g.length;St++){const kt=g[St];typeof kt=="string"&&(g[St]=parseFloat(kt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:g,name:et}=this,ot=[];for(let ct=0;ct<g.length;ct++)isNone(g[ct])&&ot.push(ct);ot.length&&makeNoneKeyframesAnimatable(g,ot,et)}measureInitialState(){const{element:g,unresolvedKeyframes:et,name:ot}=this;if(!g||!g.current)return;ot==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[ot](g.measureViewportBox(),window.getComputedStyle(g.current)),et[0]=this.measuredOrigin;const ct=et[et.length-1];ct!==void 0&&g.getValue(ot,ct).jump(ct,!1)}measureEndState(){var g;const{element:et,name:ot,unresolvedKeyframes:ct}=this;if(!et||!et.current)return;const ut=et.getValue(ot);ut&&ut.jump(this.measuredOrigin,!1);const dt=ct.length-1,ft=ct[dt];ct[dt]=positionalValues[ot](et.measureViewportBox(),window.getComputedStyle(et.current)),ft!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=ft),!((g=this.removedTransforms)===null||g===void 0)&&g.length&&this.removedTransforms.forEach(([St,kt])=>{et.getValue(St).set(kt)}),this.resolveNoneKeyframes()}}function isGenerator(it){return typeof it=="function"}let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:it=>{now=it,queueMicrotask(clearTime)}},isAnimatable=(it,g)=>g==="zIndex"?!1:!!(typeof it=="number"||Array.isArray(it)||typeof it=="string"&&(complex.test(it)||it==="0")&&!it.startsWith("url("));function hasKeyframesChanged(it){const g=it[0];if(it.length===1)return!0;for(let et=0;et<it.length;et++)if(it[et]!==g)return!0}function canAnimate(it,g,et,ot){const ct=it[0];if(ct===null)return!1;if(g==="display"||g==="visibility")return!0;const ut=it[it.length-1],dt=isAnimatable(ct,g),ft=isAnimatable(ut,g);return!dt||!ft?!1:hasKeyframesChanged(it)||(et==="spring"||isGenerator(et))&&ot}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:g=!0,delay:et=0,type:ot="keyframes",repeat:ct=0,repeatDelay:ut=0,repeatType:dt="loop",...ft}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:g,delay:et,type:ot,repeat:ct,repeatDelay:ut,repeatType:dt,...ft},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(g,et){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:ot,type:ct,velocity:ut,delay:dt,onComplete:ft,onUpdate:St,isGenerator:kt}=this.options;if(!kt&&!canAnimate(g,ot,ct,ut))if(dt)this.options.duration=0;else{St==null||St(getFinalKeyframe(g,this.options,et)),ft==null||ft(),this.resolveFinishedPromise();return}const Tt=this.initPlayback(g,et);Tt!==!1&&(this._resolved={keyframes:g,finalKeyframe:et,...Tt},this.onPostResolved())}onPostResolved(){}then(g,et){return this.currentFinishedPromise.then(g,et)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(g=>{this.resolveFinishedPromise=g})}}const progress=(it,g,et)=>{const ot=g-it;return ot===0?1:(et-it)/ot},generateLinearEasing=(it,g,et=10)=>{let ot="";const ct=Math.max(Math.round(g/et),2);for(let ut=0;ut<ct;ut++)ot+=it(progress(0,ct-1,ut))+", ";return`linear(${ot.substring(0,ot.length-2)})`};function velocityPerSecond(it,g){return g?it*(1e3/g):0}const velocitySampleDuration=5;function calcGeneratorVelocity(it,g,et){const ot=Math.max(g-velocitySampleDuration,0);return velocityPerSecond(et-it(ot),g-ot)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:it=springDefaults.duration,bounce:g=springDefaults.bounce,velocity:et=springDefaults.velocity,mass:ot=springDefaults.mass}){let ct,ut,dt=1-g;dt=clamp(springDefaults.minDamping,springDefaults.maxDamping,dt),it=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(it)),dt<1?(ct=kt=>{const Tt=kt*dt,Rt=Tt*it,jt=Tt-et,$t=calcAngularFreq(kt,dt),Ft=Math.exp(-Rt);return safeMin-jt/$t*Ft},ut=kt=>{const Rt=kt*dt*it,jt=Rt*et+et,$t=Math.pow(dt,2)*Math.pow(kt,2)*it,Ft=Math.exp(-Rt),Ht=calcAngularFreq(Math.pow(kt,2),dt);return(-ct(kt)+safeMin>0?-1:1)*((jt-$t)*Ft)/Ht}):(ct=kt=>{const Tt=Math.exp(-kt*it),Rt=(kt-et)*it+1;return-safeMin+Tt*Rt},ut=kt=>{const Tt=Math.exp(-kt*it),Rt=(et-kt)*(it*it);return Tt*Rt});const ft=5/it,St=approximateRoot(ct,ut,ft);if(it=secondsToMilliseconds(it),isNaN(St))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:it};{const kt=Math.pow(St,2)*ot;return{stiffness:kt,damping:dt*2*Math.sqrt(ot*kt),duration:it}}}const rootIterations=12;function approximateRoot(it,g,et){let ot=et;for(let ct=1;ct<rootIterations;ct++)ot=ot-it(ot)/g(ot);return ot}function calcAngularFreq(it,g){return it*Math.sqrt(1-g*g)}const maxGeneratorDuration=2e4;function calcGeneratorDuration(it){let g=0;const et=50;let ot=it.next(g);for(;!ot.done&&g<maxGeneratorDuration;)g+=et,ot=it.next(g);return g>=maxGeneratorDuration?1/0:g}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(it,g){return g.some(et=>it[et]!==void 0)}function getSpringOptions(it){let g={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...it};if(!isSpringType(it,physicsKeys)&&isSpringType(it,durationKeys))if(it.visualDuration){const et=it.visualDuration,ot=2*Math.PI/(et*1.2),ct=ot*ot,ut=2*clamp(.05,1,1-it.bounce)*Math.sqrt(ct);g={...g,mass:springDefaults.mass,stiffness:ct,damping:ut}}else{const et=findSpring(it);g={...g,...et,mass:springDefaults.mass},g.isResolvedFromDuration=!0}return g}function spring(it=springDefaults.visualDuration,g=springDefaults.bounce){const et=typeof it!="object"?{visualDuration:it,keyframes:[0,1],bounce:g}:it;let{restSpeed:ot,restDelta:ct}=et;const ut=et.keyframes[0],dt=et.keyframes[et.keyframes.length-1],ft={done:!1,value:ut},{stiffness:St,damping:kt,mass:Tt,duration:Rt,velocity:jt,isResolvedFromDuration:$t}=getSpringOptions({...et,velocity:-millisecondsToSeconds(et.velocity||0)}),Ft=jt||0,Ht=kt/(2*Math.sqrt(St*Tt)),Kt=dt-ut,Bt=millisecondsToSeconds(Math.sqrt(St/Tt)),Ut=Math.abs(Kt)<5;ot||(ot=Ut?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),ct||(ct=Ut?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Yt;if(Ht<1){const Zt=calcAngularFreq(Bt,Ht);Yt=en=>{const tn=Math.exp(-Ht*Bt*en);return dt-tn*((Ft+Ht*Bt*Kt)/Zt*Math.sin(Zt*en)+Kt*Math.cos(Zt*en))}}else if(Ht===1)Yt=Zt=>dt-Math.exp(-Bt*Zt)*(Kt+(Ft+Bt*Kt)*Zt);else{const Zt=Bt*Math.sqrt(Ht*Ht-1);Yt=en=>{const tn=Math.exp(-Ht*Bt*en),nn=Math.min(Zt*en,300);return dt-tn*((Ft+Ht*Bt*Kt)*Math.sinh(nn)+Zt*Kt*Math.cosh(nn))/Zt}}const Jt={calculatedDuration:$t&&Rt||null,next:Zt=>{const en=Yt(Zt);if($t)ft.done=Zt>=Rt;else{let tn=0;Ht<1&&(tn=Zt===0?secondsToMilliseconds(Ft):calcGeneratorVelocity(Yt,Zt,en));const nn=Math.abs(tn)<=ot,ln=Math.abs(dt-en)<=ct;ft.done=nn&&ln}return ft.value=ft.done?dt:en,ft},toString:()=>{const Zt=Math.min(calcGeneratorDuration(Jt),maxGeneratorDuration),en=generateLinearEasing(tn=>Jt.next(Zt*tn).value,Zt,30);return Zt+"ms "+en}};return Jt}function inertia({keyframes:it,velocity:g=0,power:et=.8,timeConstant:ot=325,bounceDamping:ct=10,bounceStiffness:ut=500,modifyTarget:dt,min:ft,max:St,restDelta:kt=.5,restSpeed:Tt}){const Rt=it[0],jt={done:!1,value:Rt},$t=nn=>ft!==void 0&&nn<ft||St!==void 0&&nn>St,Ft=nn=>ft===void 0?St:St===void 0||Math.abs(ft-nn)<Math.abs(St-nn)?ft:St;let Ht=et*g;const Kt=Rt+Ht,Bt=dt===void 0?Kt:dt(Kt);Bt!==Kt&&(Ht=Bt-Rt);const Ut=nn=>-Ht*Math.exp(-nn/ot),Yt=nn=>Bt+Ut(nn),Jt=nn=>{const ln=Ut(nn),an=Yt(nn);jt.done=Math.abs(ln)<=kt,jt.value=jt.done?Bt:an};let Zt,en;const tn=nn=>{$t(jt.value)&&(Zt=nn,en=spring({keyframes:[jt.value,Ft(jt.value)],velocity:calcGeneratorVelocity(Yt,nn,jt.value),damping:ct,stiffness:ut,restDelta:kt,restSpeed:Tt}))};return tn(0),{calculatedDuration:null,next:nn=>{let ln=!1;return!en&&Zt===void 0&&(ln=!0,Jt(nn),tn(nn)),Zt!==void 0&&nn>=Zt?en.next(nn-Zt):(!ln&&Jt(nn),jt)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=it=>Array.isArray(it)&&typeof it[0]!="number",isBezierDefinition=it=>Array.isArray(it)&&typeof it[0]=="number",easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=it=>{if(isBezierDefinition(it)){invariant$1(it.length===4);const[g,et,ot,ct]=it;return cubicBezier(g,et,ot,ct)}else if(typeof it=="string")return easingLookup[it];return it},combineFunctions=(it,g)=>et=>g(it(et)),pipe=(...it)=>it.reduce(combineFunctions),mixNumber$1=(it,g,et)=>it+(g-it)*et;function hueToRgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslaToRgba({hue:it,saturation:g,lightness:et,alpha:ot}){it/=360,g/=100,et/=100;let ct=0,ut=0,dt=0;if(!g)ct=ut=dt=et;else{const ft=et<.5?et*(1+g):et+g-et*g,St=2*et-ft;ct=hueToRgb(St,ft,it+1/3),ut=hueToRgb(St,ft,it),dt=hueToRgb(St,ft,it-1/3)}return{red:Math.round(ct*255),green:Math.round(ut*255),blue:Math.round(dt*255),alpha:ot}}function mixImmediate(it,g){return et=>et>0?g:it}const mixLinearColor=(it,g,et)=>{const ot=it*it,ct=et*(g*g-ot)+ot;return ct<0?0:Math.sqrt(ct)},colorTypes=[hex,rgba,hsla],getColorType=it=>colorTypes.find(g=>g.test(it));function asRGBA(it){const g=getColorType(it);if(!g)return!1;let et=g.parse(it);return g===hsla&&(et=hslaToRgba(et)),et}const mixColor=(it,g)=>{const et=asRGBA(it),ot=asRGBA(g);if(!et||!ot)return mixImmediate(it,g);const ct={...et};return ut=>(ct.red=mixLinearColor(et.red,ot.red,ut),ct.green=mixLinearColor(et.green,ot.green,ut),ct.blue=mixLinearColor(et.blue,ot.blue,ut),ct.alpha=mixNumber$1(et.alpha,ot.alpha,ut),rgba.transform(ct))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(it,g){return invisibleValues.has(it)?et=>et<=0?it:g:et=>et>=1?g:it}function mixNumber(it,g){return et=>mixNumber$1(it,g,et)}function getMixer(it){return typeof it=="number"?mixNumber:typeof it=="string"?isCSSVariableToken(it)?mixImmediate:color.test(it)?mixColor:mixComplex:Array.isArray(it)?mixArray:typeof it=="object"?color.test(it)?mixColor:mixObject:mixImmediate}function mixArray(it,g){const et=[...it],ot=et.length,ct=it.map((ut,dt)=>getMixer(ut)(ut,g[dt]));return ut=>{for(let dt=0;dt<ot;dt++)et[dt]=ct[dt](ut);return et}}function mixObject(it,g){const et={...it,...g},ot={};for(const ct in et)it[ct]!==void 0&&g[ct]!==void 0&&(ot[ct]=getMixer(it[ct])(it[ct],g[ct]));return ct=>{for(const ut in ot)et[ut]=ot[ut](ct);return et}}function matchOrder(it,g){var et;const ot=[],ct={color:0,var:0,number:0};for(let ut=0;ut<g.values.length;ut++){const dt=g.types[ut],ft=it.indexes[dt][ct[dt]],St=(et=it.values[ft])!==null&&et!==void 0?et:0;ot[ut]=St,ct[dt]++}return ot}const mixComplex=(it,g)=>{const et=complex.createTransformer(g),ot=analyseComplexValue(it),ct=analyseComplexValue(g);return ot.indexes.var.length===ct.indexes.var.length&&ot.indexes.color.length===ct.indexes.color.length&&ot.indexes.number.length>=ct.indexes.number.length?invisibleValues.has(it)&&!ct.values.length||invisibleValues.has(g)&&!ot.values.length?mixVisibility(it,g):pipe(mixArray(matchOrder(ot,ct),ct.values),et):mixImmediate(it,g)};function mix(it,g,et){return typeof it=="number"&&typeof g=="number"&&typeof et=="number"?mixNumber$1(it,g,et):getMixer(it)(it,g)}function createMixers(it,g,et){const ot=[],ct=et||mix,ut=it.length-1;for(let dt=0;dt<ut;dt++){let ft=ct(it[dt],it[dt+1]);if(g){const St=Array.isArray(g)?g[dt]||noop$2:g;ft=pipe(St,ft)}ot.push(ft)}return ot}function interpolate(it,g,{clamp:et=!0,ease:ot,mixer:ct}={}){const ut=it.length;if(invariant$1(ut===g.length),ut===1)return()=>g[0];if(ut===2&&it[0]===it[1])return()=>g[1];it[0]>it[ut-1]&&(it=[...it].reverse(),g=[...g].reverse());const dt=createMixers(g,ot,ct),ft=dt.length,St=kt=>{let Tt=0;if(ft>1)for(;Tt<it.length-2&&!(kt<it[Tt+1]);Tt++);const Rt=progress(it[Tt],it[Tt+1],kt);return dt[Tt](Rt)};return et?kt=>St(clamp(it[0],it[ut-1],kt)):St}function fillOffset(it,g){const et=it[it.length-1];for(let ot=1;ot<=g;ot++){const ct=progress(0,g,ot);it.push(mixNumber$1(et,1,ct))}}function defaultOffset(it){const g=[0];return fillOffset(g,it.length-1),g}function convertOffsetToTimes(it,g){return it.map(et=>et*g)}function defaultEasing(it,g){return it.map(()=>g||easeInOut).splice(0,it.length-1)}function keyframes({duration:it=300,keyframes:g,times:et,ease:ot="easeInOut"}){const ct=isEasingArray(ot)?ot.map(easingDefinitionToFunction):easingDefinitionToFunction(ot),ut={done:!1,value:g[0]},dt=convertOffsetToTimes(et&&et.length===g.length?et:defaultOffset(g),it),ft=interpolate(dt,g,{ease:Array.isArray(ct)?ct:defaultEasing(g,ct)});return{calculatedDuration:it,next:St=>(ut.value=ft(St),ut.done=St>=it,ut)}}const frameloopDriver=it=>{const g=({timestamp:et})=>it(et);return{start:()=>frame.update(g,!0),stop:()=>cancelFrame(g),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=it=>it/100;class MainThreadAnimation extends BaseAnimation{constructor(g){super(g),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:St}=this.options;St&&St()};const{name:et,motionValue:ot,element:ct,keyframes:ut}=this.options,dt=(ct==null?void 0:ct.KeyframeResolver)||KeyframeResolver,ft=(St,kt)=>this.onKeyframesResolved(St,kt);this.resolver=new dt(ut,ft,et,ot,ct),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(g){const{type:et="keyframes",repeat:ot=0,repeatDelay:ct=0,repeatType:ut,velocity:dt=0}=this.options,ft=isGenerator(et)?et:generators[et]||keyframes;let St,kt;ft!==keyframes&&typeof g[0]!="number"&&(St=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const Tt=ft({...this.options,keyframes:g});ut==="mirror"&&(kt=ft({...this.options,keyframes:[...g].reverse(),velocity:-dt})),Tt.calculatedDuration===null&&(Tt.calculatedDuration=calcGeneratorDuration(Tt));const{calculatedDuration:Rt}=Tt,jt=Rt+ct,$t=jt*(ot+1)-ct;return{generator:Tt,mirroredGenerator:kt,mapPercentToKeyframes:St,calculatedDuration:Rt,resolvedDuration:jt,totalDuration:$t}}onPostResolved(){const{autoplay:g=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!g?this.pause():this.state=this.pendingPlayState}tick(g,et=!1){const{resolved:ot}=this;if(!ot){const{keyframes:nn}=this.options;return{done:!0,value:nn[nn.length-1]}}const{finalKeyframe:ct,generator:ut,mirroredGenerator:dt,mapPercentToKeyframes:ft,keyframes:St,calculatedDuration:kt,totalDuration:Tt,resolvedDuration:Rt}=ot;if(this.startTime===null)return ut.next(0);const{delay:jt,repeat:$t,repeatType:Ft,repeatDelay:Ht,onUpdate:Kt}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,g):this.speed<0&&(this.startTime=Math.min(g-Tt/this.speed,this.startTime)),et?this.currentTime=g:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(g-this.startTime)*this.speed;const Bt=this.currentTime-jt*(this.speed>=0?1:-1),Ut=this.speed>=0?Bt<0:Bt>Tt;this.currentTime=Math.max(Bt,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Tt);let Yt=this.currentTime,Jt=ut;if($t){const nn=Math.min(this.currentTime,Tt)/Rt;let ln=Math.floor(nn),an=nn%1;!an&&nn>=1&&(an=1),an===1&&ln--,ln=Math.min(ln,$t+1),!!(ln%2)&&(Ft==="reverse"?(an=1-an,Ht&&(an-=Ht/Rt)):Ft==="mirror"&&(Jt=dt)),Yt=clamp(0,1,an)*Rt}const Zt=Ut?{done:!1,value:St[0]}:Jt.next(Yt);ft&&(Zt.value=ft(Zt.value));let{done:en}=Zt;!Ut&&kt!==null&&(en=this.speed>=0?this.currentTime>=Tt:this.currentTime<=0);const tn=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&en);return tn&&ct!==void 0&&(Zt.value=getFinalKeyframe(St,this.options,ct)),Kt&&Kt(Zt.value),tn&&this.finish(),Zt}get duration(){const{resolved:g}=this;return g?millisecondsToSeconds(g.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(g){g=secondsToMilliseconds(g),this.currentTime=g,this.holdTime!==null||this.speed===0?this.holdTime=g:this.driver&&(this.startTime=this.driver.now()-g/this.speed)}get speed(){return this.playbackSpeed}set speed(g){const et=this.playbackSpeed!==g;this.playbackSpeed=g,et&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:g=frameloopDriver,onPlay:et,startTime:ot}=this.options;this.driver||(this.driver=g(ut=>this.tick(ut))),et&&et();const ct=this.driver.now();this.holdTime!==null?this.startTime=ct-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=ct):this.startTime=ot??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var g;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(g=this.currentTime)!==null&&g!==void 0?g:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:g}=this.options;g&&g()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(g){return this.startTime=0,this.tick(g,!0)}}function animateValue(it){return new MainThreadAnimation(it)}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function memo(it){let g;return()=>(g===void 0&&(g=it()),g)}const supportsFlags={linearEasing:void 0};function memoSupports(it,g){const et=memo(it);return()=>{var ot;return(ot=supportsFlags[g])!==null&&ot!==void 0?ot:et()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(it){return!!(typeof it=="function"&&supportsLinearEasing()||!it||typeof it=="string"&&(it in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(it)||Array.isArray(it)&&it.every(isWaapiSupportedEasing))}const cubicBezierAsString=([it,g,et,ot])=>`cubic-bezier(${it}, ${g}, ${et}, ${ot})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(it,g){if(it)return typeof it=="function"&&supportsLinearEasing()?generateLinearEasing(it,g):isBezierDefinition(it)?cubicBezierAsString(it):Array.isArray(it)?it.map(et=>mapEasingToNativeEasing(et,g)||supportedWaapiEasing.easeOut):supportedWaapiEasing[it]}function startWaapiAnimation(it,g,et,{delay:ot=0,duration:ct=300,repeat:ut=0,repeatType:dt="loop",ease:ft="easeInOut",times:St}={}){const kt={[g]:et};St&&(kt.offset=St);const Tt=mapEasingToNativeEasing(ft,ct);return Array.isArray(Tt)&&(kt.easing=Tt),it.animate(kt,{delay:ot,duration:ct,easing:Array.isArray(Tt)?"linear":Tt,fill:"both",iterations:ut+1,direction:dt==="reverse"?"alternate":"normal"})}function attachTimeline(it,g){it.timeline=g,it.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(it){return isGenerator(it.type)||it.type==="spring"||!isWaapiSupportedEasing(it.ease)}function pregenerateKeyframes(it,g){const et=new MainThreadAnimation({...g,keyframes:it,repeat:0,delay:0,isGenerator:!0});let ot={done:!1,value:it[0]};const ct=[];let ut=0;for(;!ot.done&&ut<maxDuration;)ot=et.sample(ut),ct.push(ot.value),ut+=sampleDelta;return{times:void 0,keyframes:ct,duration:ut-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(it){return it in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(g){super(g);const{name:et,motionValue:ot,element:ct,keyframes:ut}=this.options;this.resolver=new DOMKeyframesResolver(ut,(dt,ft)=>this.onKeyframesResolved(dt,ft),et,ot,ct),this.resolver.scheduleResolve()}initPlayback(g,et){var ot;let{duration:ct=300,times:ut,ease:dt,type:ft,motionValue:St,name:kt,startTime:Tt}=this.options;if(!(!((ot=St.owner)===null||ot===void 0)&&ot.current))return!1;if(typeof dt=="string"&&supportsLinearEasing()&&isUnsupportedEase(dt)&&(dt=unsupportedEasingFunctions[dt]),requiresPregeneratedKeyframes(this.options)){const{onComplete:jt,onUpdate:$t,motionValue:Ft,element:Ht,...Kt}=this.options,Bt=pregenerateKeyframes(g,Kt);g=Bt.keyframes,g.length===1&&(g[1]=g[0]),ct=Bt.duration,ut=Bt.times,dt=Bt.ease,ft="keyframes"}const Rt=startWaapiAnimation(St.owner.current,kt,g,{...this.options,duration:ct,times:ut,ease:dt});return Rt.startTime=Tt??this.calcStartTime(),this.pendingTimeline?(attachTimeline(Rt,this.pendingTimeline),this.pendingTimeline=void 0):Rt.onfinish=()=>{const{onComplete:jt}=this.options;St.set(getFinalKeyframe(g,this.options,et)),jt&&jt(),this.cancel(),this.resolveFinishedPromise()},{animation:Rt,duration:ct,times:ut,type:ft,ease:dt,keyframes:g}}get duration(){const{resolved:g}=this;if(!g)return 0;const{duration:et}=g;return millisecondsToSeconds(et)}get time(){const{resolved:g}=this;if(!g)return 0;const{animation:et}=g;return millisecondsToSeconds(et.currentTime||0)}set time(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.currentTime=secondsToMilliseconds(g)}get speed(){const{resolved:g}=this;if(!g)return 1;const{animation:et}=g;return et.playbackRate}set speed(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.playbackRate=g}get state(){const{resolved:g}=this;if(!g)return"idle";const{animation:et}=g;return et.playState}get startTime(){const{resolved:g}=this;if(!g)return null;const{animation:et}=g;return et.startTime}attachTimeline(g){if(!this._resolved)this.pendingTimeline=g;else{const{resolved:et}=this;if(!et)return noop$2;const{animation:ot}=et;attachTimeline(ot,g)}return noop$2}play(){if(this.isStopped)return;const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.playState==="finished"&&this.updateFinishedPromise(),et.play()}pause(){const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:g}=this;if(!g)return;const{animation:et,keyframes:ot,duration:ct,type:ut,ease:dt,times:ft}=g;if(et.playState==="idle"||et.playState==="finished")return;if(this.time){const{motionValue:kt,onUpdate:Tt,onComplete:Rt,element:jt,...$t}=this.options,Ft=new MainThreadAnimation({...$t,keyframes:ot,duration:ct,type:ut,ease:dt,times:ft,isGenerator:!0}),Ht=secondsToMilliseconds(this.time);kt.setWithVelocity(Ft.sample(Ht-sampleDelta).value,Ft.sample(Ht).value,sampleDelta)}const{onStop:St}=this.options;St&&St(),this.cancel()}complete(){const{resolved:g}=this;g&&g.animation.finish()}cancel(){const{resolved:g}=this;g&&g.animation.cancel()}static supports(g){const{motionValue:et,name:ot,repeatDelay:ct,repeatType:ut,damping:dt,type:ft}=g;return supportsWaapi()&&ot&&acceleratedValues.has(ot)&&et&&et.owner&&et.owner.current instanceof HTMLElement&&!et.owner.getProps().onUpdate&&!ct&&ut!=="mirror"&&dt!==0&&ft!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(g){this.stop=()=>this.runAll("stop"),this.animations=g.filter(Boolean)}then(g,et){return Promise.all(this.animations).then(g).catch(et)}getAll(g){return this.animations[0][g]}setAll(g,et){for(let ot=0;ot<this.animations.length;ot++)this.animations[ot][g]=et}attachTimeline(g,et){const ot=this.animations.map(ct=>supportsScrollTimeline()&&ct.attachTimeline?ct.attachTimeline(g):et(ct));return()=>{ot.forEach((ct,ut)=>{ct&&ct(),this.animations[ut].stop()})}}get time(){return this.getAll("time")}set time(g){this.setAll("time",g)}get speed(){return this.getAll("speed")}set speed(g){this.setAll("speed",g)}get startTime(){return this.getAll("startTime")}get duration(){let g=0;for(let et=0;et<this.animations.length;et++)g=Math.max(g,this.animations[et].duration);return g}runAll(g){this.animations.forEach(et=>et[g]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:it,delay:g,delayChildren:et,staggerChildren:ot,staggerDirection:ct,repeat:ut,repeatType:dt,repeatDelay:ft,from:St,elapsed:kt,...Tt}){return!!Object.keys(Tt).length}const animateMotionValue=(it,g,et,ot={},ct,ut)=>dt=>{const ft=getValueTransition(ot,it)||{},St=ft.delay||ot.delay||0;let{elapsed:kt=0}=ot;kt=kt-secondsToMilliseconds(St);let Tt={keyframes:Array.isArray(et)?et:[null,et],ease:"easeOut",velocity:g.getVelocity(),...ft,delay:-kt,onUpdate:jt=>{g.set(jt),ft.onUpdate&&ft.onUpdate(jt)},onComplete:()=>{dt(),ft.onComplete&&ft.onComplete()},name:it,motionValue:g,element:ut?void 0:ct};isTransitionDefined(ft)||(Tt={...Tt,...getDefaultTransition(it,Tt)}),Tt.duration&&(Tt.duration=secondsToMilliseconds(Tt.duration)),Tt.repeatDelay&&(Tt.repeatDelay=secondsToMilliseconds(Tt.repeatDelay)),Tt.from!==void 0&&(Tt.keyframes[0]=Tt.from);let Rt=!1;if((Tt.type===!1||Tt.duration===0&&!Tt.repeatDelay)&&(Tt.duration=0,Tt.delay===0&&(Rt=!0)),Rt&&!ut&&g.get()!==void 0){const jt=getFinalKeyframe(Tt.keyframes,ft);if(jt!==void 0)return frame.update(()=>{Tt.onUpdate(jt),Tt.onComplete()}),new GroupPlaybackControls([])}return!ut&&AcceleratedAnimation.supports(Tt)?new AcceleratedAnimation(Tt):new MainThreadAnimation(Tt)},isCustomValue=it=>!!(it&&typeof it=="object"&&it.mix&&it.toValue),resolveFinalValueInKeyframes=it=>isKeyframesTarget(it)?it[it.length-1]||0:it;function addUniqueItem(it,g){it.indexOf(g)===-1&&it.push(g)}function removeItem(it,g){const et=it.indexOf(g);et>-1&&it.splice(et,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(g){return addUniqueItem(this.subscriptions,g),()=>removeItem(this.subscriptions,g)}notify(g,et,ot){const ct=this.subscriptions.length;if(ct)if(ct===1)this.subscriptions[0](g,et,ot);else for(let ut=0;ut<ct;ut++){const dt=this.subscriptions[ut];dt&&dt(g,et,ot)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=it=>!isNaN(parseFloat(it));class MotionValue{constructor(g,et={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(ot,ct=!0)=>{const ut=time.now();this.updatedAt!==ut&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(ot),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),ct&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(g),this.owner=et.owner}setCurrent(g){this.current=g,this.updatedAt=time.now(),this.canTrackVelocity===null&&g!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(g=this.current){this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt}onChange(g){return this.on("change",g)}on(g,et){this.events[g]||(this.events[g]=new SubscriptionManager);const ot=this.events[g].add(et);return g==="change"?()=>{ot(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:ot}clearListeners(){for(const g in this.events)this.events[g].clear()}attach(g,et){this.passiveEffect=g,this.stopPassiveEffect=et}set(g,et=!0){!et||!this.passiveEffect?this.updateAndNotify(g,et):this.passiveEffect(g,this.updateAndNotify)}setWithVelocity(g,et,ot){this.set(et),this.prev=void 0,this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt-ot}jump(g,et=!0){this.updateAndNotify(g),this.prev=g,this.prevUpdatedAt=this.prevFrameValue=void 0,et&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const g=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||g-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const et=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),et)}start(g){return this.stop(),new Promise(et=>{this.hasAnimated=!0,this.animation=g(et),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(it,g){return new MotionValue(it,g)}function setMotionValue(it,g,et){it.hasValue(g)?it.getValue(g).set(et):it.addValue(g,motionValue(et))}function setTarget(it,g){const et=resolveVariant(it,g);let{transitionEnd:ot={},transition:ct={},...ut}=et||{};ut={...ut,...ot};for(const dt in ut){const ft=resolveFinalValueInKeyframes(ut[dt]);setMotionValue(it,dt,ft)}}const camelToDash=it=>it.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(it){return it.props[optimizedAppearDataAttribute]}const isMotionValue=it=>!!(it&&it.getVelocity);function isWillChangeMotionValue(it){return!!(isMotionValue(it)&&it.add)}function addValueToWillChange(it,g){const et=it.getValue("willChange");if(isWillChangeMotionValue(et))return et.add(g)}function shouldBlockAnimation({protectedKeys:it,needsAnimating:g},et){const ot=it.hasOwnProperty(et)&&g[et]!==!0;return g[et]=!1,ot}function animateTarget(it,g,{delay:et=0,transitionOverride:ot,type:ct}={}){var ut;let{transition:dt=it.getDefaultTransition(),transitionEnd:ft,...St}=g;ot&&(dt=ot);const kt=[],Tt=ct&&it.animationState&&it.animationState.getState()[ct];for(const Rt in St){const jt=it.getValue(Rt,(ut=it.latestValues[Rt])!==null&&ut!==void 0?ut:null),$t=St[Rt];if($t===void 0||Tt&&shouldBlockAnimation(Tt,Rt))continue;const Ft={delay:et,...getValueTransition(dt||{},Rt)};let Ht=!1;if(window.MotionHandoffAnimation){const Bt=getOptimisedAppearId(it);if(Bt){const Ut=window.MotionHandoffAnimation(Bt,Rt,frame);Ut!==null&&(Ft.startTime=Ut,Ht=!0)}}addValueToWillChange(it,Rt),jt.start(animateMotionValue(Rt,jt,$t,it.shouldReduceMotion&&transformProps.has(Rt)?{type:!1}:Ft,it,Ht));const Kt=jt.animation;Kt&&kt.push(Kt)}return ft&&Promise.all(kt).then(()=>{frame.update(()=>{ft&&setTarget(it,ft)})}),kt}function animateVariant(it,g,et={}){var ot;const ct=resolveVariant(it,g,et.type==="exit"?(ot=it.presenceContext)===null||ot===void 0?void 0:ot.custom:void 0);let{transition:ut=it.getDefaultTransition()||{}}=ct||{};et.transitionOverride&&(ut=et.transitionOverride);const dt=ct?()=>Promise.all(animateTarget(it,ct,et)):()=>Promise.resolve(),ft=it.variantChildren&&it.variantChildren.size?(kt=0)=>{const{delayChildren:Tt=0,staggerChildren:Rt,staggerDirection:jt}=ut;return animateChildren(it,g,Tt+kt,Rt,jt,et)}:()=>Promise.resolve(),{when:St}=ut;if(St){const[kt,Tt]=St==="beforeChildren"?[dt,ft]:[ft,dt];return kt().then(()=>Tt())}else return Promise.all([dt(),ft(et.delay)])}function animateChildren(it,g,et=0,ot=0,ct=1,ut){const dt=[],ft=(it.variantChildren.size-1)*ot,St=ct===1?(kt=0)=>kt*ot:(kt=0)=>ft-kt*ot;return Array.from(it.variantChildren).sort(sortByTreeOrder).forEach((kt,Tt)=>{kt.notify("AnimationStart",g),dt.push(animateVariant(kt,g,{...ut,delay:et+St(Tt)}).then(()=>kt.notify("AnimationComplete",g)))}),Promise.all(dt)}function sortByTreeOrder(it,g){return it.sortNodePosition(g)}function animateVisualElement(it,g,et={}){it.notify("AnimationStart",g);let ot;if(Array.isArray(g)){const ct=g.map(ut=>animateVariant(it,ut,et));ot=Promise.all(ct)}else if(typeof g=="string")ot=animateVariant(it,g,et);else{const ct=typeof g=="function"?resolveVariant(it,g,et.custom):g;ot=Promise.all(animateTarget(it,ct,et))}return ot.then(()=>{it.notify("AnimationComplete",g)})}const numVariantProps=variantProps.length;function getVariantContext(it){if(!it)return;if(!it.isControllingVariants){const et=it.parent?getVariantContext(it.parent)||{}:{};return it.props.initial!==void 0&&(et.initial=it.props.initial),et}const g={};for(let et=0;et<numVariantProps;et++){const ot=variantProps[et],ct=it.props[ot];(isVariantLabel(ct)||ct===!1)&&(g[ot]=ct)}return g}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(it){return g=>Promise.all(g.map(({animation:et,options:ot})=>animateVisualElement(it,et,ot)))}function createAnimationState(it){let g=animateList(it),et=createState(),ot=!0;const ct=St=>(kt,Tt)=>{var Rt;const jt=resolveVariant(it,Tt,St==="exit"?(Rt=it.presenceContext)===null||Rt===void 0?void 0:Rt.custom:void 0);if(jt){const{transition:$t,transitionEnd:Ft,...Ht}=jt;kt={...kt,...Ht,...Ft}}return kt};function ut(St){g=St(it)}function dt(St){const{props:kt}=it,Tt=getVariantContext(it.parent)||{},Rt=[],jt=new Set;let $t={},Ft=1/0;for(let Kt=0;Kt<numAnimationTypes;Kt++){const Bt=reversePriorityOrder[Kt],Ut=et[Bt],Yt=kt[Bt]!==void 0?kt[Bt]:Tt[Bt],Jt=isVariantLabel(Yt),Zt=Bt===St?Ut.isActive:null;Zt===!1&&(Ft=Kt);let en=Yt===Tt[Bt]&&Yt!==kt[Bt]&&Jt;if(en&&ot&&it.manuallyAnimateOnMount&&(en=!1),Ut.protectedKeys={...$t},!Ut.isActive&&Zt===null||!Yt&&!Ut.prevProp||isAnimationControls(Yt)||typeof Yt=="boolean")continue;const tn=checkVariantsDidChange(Ut.prevProp,Yt);let nn=tn||Bt===St&&Ut.isActive&&!en&&Jt||Kt>Ft&&Jt,ln=!1;const an=Array.isArray(Yt)?Yt:[Yt];let sn=an.reduce(ct(Bt),{});Zt===!1&&(sn={});const{prevResolvedValues:dn={}}=Ut,mn={...dn,...sn},yn=pn=>{nn=!0,jt.has(pn)&&(ln=!0,jt.delete(pn)),Ut.needsAnimating[pn]=!0;const rn=it.getValue(pn);rn&&(rn.liveStyle=!1)};for(const pn in mn){const rn=sn[pn],on=dn[pn];if($t.hasOwnProperty(pn))continue;let gn=!1;isKeyframesTarget(rn)&&isKeyframesTarget(on)?gn=!shallowCompare(rn,on):gn=rn!==on,gn?rn!=null?yn(pn):jt.add(pn):rn!==void 0&&jt.has(pn)?yn(pn):Ut.protectedKeys[pn]=!0}Ut.prevProp=Yt,Ut.prevResolvedValues=sn,Ut.isActive&&($t={...$t,...sn}),ot&&it.blockInitialAnimation&&(nn=!1),nn&&(!(en&&tn)||ln)&&Rt.push(...an.map(pn=>({animation:pn,options:{type:Bt}})))}if(jt.size){const Kt={};jt.forEach(Bt=>{const Ut=it.getBaseTarget(Bt),Yt=it.getValue(Bt);Yt&&(Yt.liveStyle=!0),Kt[Bt]=Ut??null}),Rt.push({animation:Kt})}let Ht=!!Rt.length;return ot&&(kt.initial===!1||kt.initial===kt.animate)&&!it.manuallyAnimateOnMount&&(Ht=!1),ot=!1,Ht?g(Rt):Promise.resolve()}function ft(St,kt){var Tt;if(et[St].isActive===kt)return Promise.resolve();(Tt=it.variantChildren)===null||Tt===void 0||Tt.forEach(jt=>{var $t;return($t=jt.animationState)===null||$t===void 0?void 0:$t.setActive(St,kt)}),et[St].isActive=kt;const Rt=dt(St);for(const jt in et)et[jt].protectedKeys={};return Rt}return{animateChanges:dt,setActive:ft,setAnimateFunction:ut,getState:()=>et,reset:()=>{et=createState(),ot=!0}}}function checkVariantsDidChange(it,g){return typeof g=="string"?g!==it:Array.isArray(g)?!shallowCompare(g,it):!1}function createTypeState(it=!1){return{isActive:it,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(g){this.isMounted=!1,this.node=g}update(){}}class AnimationFeature extends Feature{constructor(g){super(g),g.animationState||(g.animationState=createAnimationState(g))}updateAnimationControlsSubscription(){const{animate:g}=this.node.getProps();isAnimationControls(g)&&(this.unmountControls=g.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:g}=this.node.getProps(),{animate:et}=this.node.prevProps||{};g!==et&&this.updateAnimationControlsSubscription()}unmount(){var g;this.node.animationState.reset(),(g=this.unmountControls)===null||g===void 0||g.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:g,onExitComplete:et}=this.node.presenceContext,{isPresent:ot}=this.node.prevPresenceContext||{};if(!this.node.animationState||g===ot)return;const ct=this.node.animationState.setActive("exit",!g);et&&!g&&ct.then(()=>et(this.id))}mount(){const{register:g}=this.node.presenceContext||{};g&&(this.unmount=g(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(it,g,et){var ot;if(it instanceof Element)return[it];if(typeof it=="string"){let ct=document;g&&(ct=g.current);const ut=(ot=et==null?void 0:et[it])!==null&&ot!==void 0?ot:ct.querySelectorAll(it);return ut?Array.from(ut):[]}return Array.from(it)}function setupGesture(it,g){const et=resolveElements(it),ot=new AbortController,ct={passive:!0,...g,signal:ot.signal};return[et,ct,()=>ot.abort()]}function filterEvents$1(it){return g=>{g.pointerType==="touch"||isDragActive()||it(g)}}function hover(it,g,et={}){const[ot,ct,ut]=setupGesture(it,et),dt=filterEvents$1(ft=>{const{target:St}=ft,kt=g(ft);if(!kt||!St)return;const Tt=filterEvents$1(Rt=>{kt(Rt),St.removeEventListener("pointerleave",Tt)});St.addEventListener("pointerleave",Tt,ct)});return ot.forEach(ft=>{ft.addEventListener("pointerenter",dt,ct)}),ut}const isPrimaryPointer=it=>it.pointerType==="mouse"?typeof it.button!="number"||it.button<=0:it.isPrimary!==!1,isPressing=new WeakSet;function filterEvents(it){return g=>{g.key==="Enter"&&it(g)}}function firePointerEvent(it,g){it.dispatchEvent(new PointerEvent("pointer"+g,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(it,g)=>{const et=it.currentTarget;if(!et)return;const ot=filterEvents(()=>{if(isPressing.has(et))return;firePointerEvent(et,"down");const ct=filterEvents(()=>{firePointerEvent(et,"up")}),ut=()=>firePointerEvent(et,"cancel");et.addEventListener("keyup",ct,g),et.addEventListener("blur",ut,g)});et.addEventListener("keydown",ot,g),et.addEventListener("blur",()=>et.removeEventListener("keydown",ot),g)},focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(it){return focusableElements.has(it.tagName)||it.tabIndex!==-1}const isNodeOrChild=(it,g)=>g?it===g?!0:isNodeOrChild(it,g.parentElement):!1;function isValidPressEvent(it){return isPrimaryPointer(it)&&!isDragActive()}function press(it,g,et={}){const[ot,ct,ut]=setupGesture(it,et),dt=ft=>{const St=ft.currentTarget;if(!isValidPressEvent(ft)||isPressing.has(St))return;isPressing.add(St);const kt=g(ft),Tt=($t,Ft)=>{window.removeEventListener("pointerup",Rt),window.removeEventListener("pointercancel",jt),!(!isValidPressEvent($t)||!isPressing.has(St))&&(isPressing.delete(St),kt&&kt($t,{success:Ft}))},Rt=$t=>{Tt($t,et.useGlobalTarget||isNodeOrChild(St,$t.target))},jt=$t=>{Tt($t,!1)};window.addEventListener("pointerup",Rt,ct),window.addEventListener("pointercancel",jt,ct)};return ot.forEach(ft=>{isElementKeyboardAccessible(ft)||(ft.tabIndex=0),(et.useGlobalTarget?window:ft).addEventListener("pointerdown",dt,ct),ft.addEventListener("focus",kt=>enableKeyboardPress(kt,ct),ct)}),ut}function setDragLock(it){return it==="x"||it==="y"?isDragging[it]?null:(isDragging[it]=!0,()=>{isDragging[it]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function extractEventInfo(it){return{point:{x:it.pageX,y:it.pageY}}}const addPointerInfo=it=>g=>isPrimaryPointer(g)&&it(g,extractEventInfo(g));function addDomEvent(it,g,et,ot={passive:!0}){return it.addEventListener(g,et,ot),()=>it.removeEventListener(g,et)}function addPointerEvent(it,g,et,ot){return addDomEvent(it,g,addPointerInfo(et),ot)}const distance=(it,g)=>Math.abs(it-g);function distance2D(it,g){const et=distance(it.x,g.x),ot=distance(it.y,g.y);return Math.sqrt(et**2+ot**2)}class PanSession{constructor(g,et,{transformPagePoint:ot,contextWindow:ct,dragSnapToOrigin:ut=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Rt=getPanInfo(this.lastMoveEventInfo,this.history),jt=this.startEvent!==null,$t=distance2D(Rt.offset,{x:0,y:0})>=3;if(!jt&&!$t)return;const{point:Ft}=Rt,{timestamp:Ht}=frameData;this.history.push({...Ft,timestamp:Ht});const{onStart:Kt,onMove:Bt}=this.handlers;jt||(Kt&&Kt(this.lastMoveEvent,Rt),this.startEvent=this.lastMoveEvent),Bt&&Bt(this.lastMoveEvent,Rt)},this.handlePointerMove=(Rt,jt)=>{this.lastMoveEvent=Rt,this.lastMoveEventInfo=transformPoint(jt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Rt,jt)=>{this.end();const{onEnd:$t,onSessionEnd:Ft,resumeAnimation:Ht}=this.handlers;if(this.dragSnapToOrigin&&Ht&&Ht(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Kt=getPanInfo(Rt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(jt,this.transformPagePoint),this.history);this.startEvent&&$t&&$t(Rt,Kt),Ft&&Ft(Rt,Kt)},!isPrimaryPointer(g))return;this.dragSnapToOrigin=ut,this.handlers=et,this.transformPagePoint=ot,this.contextWindow=ct||window;const dt=extractEventInfo(g),ft=transformPoint(dt,this.transformPagePoint),{point:St}=ft,{timestamp:kt}=frameData;this.history=[{...St,timestamp:kt}];const{onSessionStart:Tt}=et;Tt&&Tt(g,getPanInfo(ft,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(g){this.handlers=g}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(it,g){return g?{point:g(it.point)}:it}function subtractPoint(it,g){return{x:it.x-g.x,y:it.y-g.y}}function getPanInfo({point:it},g){return{point:it,delta:subtractPoint(it,lastDevicePoint(g)),offset:subtractPoint(it,startDevicePoint(g)),velocity:getVelocity(g,.1)}}function startDevicePoint(it){return it[0]}function lastDevicePoint(it){return it[it.length-1]}function getVelocity(it,g){if(it.length<2)return{x:0,y:0};let et=it.length-1,ot=null;const ct=lastDevicePoint(it);for(;et>=0&&(ot=it[et],!(ct.timestamp-ot.timestamp>secondsToMilliseconds(g)));)et--;if(!ot)return{x:0,y:0};const ut=millisecondsToSeconds(ct.timestamp-ot.timestamp);if(ut===0)return{x:0,y:0};const dt={x:(ct.x-ot.x)/ut,y:(ct.y-ot.y)/ut};return dt.x===1/0&&(dt.x=0),dt.y===1/0&&(dt.y=0),dt}function isRefObject(it){return it&&typeof it=="object"&&Object.prototype.hasOwnProperty.call(it,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(it){return it.max-it.min}function isNear$1(it,g,et){return Math.abs(it-g)<=et}function calcAxisDelta(it,g,et,ot=.5){it.origin=ot,it.originPoint=mixNumber$1(g.min,g.max,it.origin),it.scale=calcLength(et)/calcLength(g),it.translate=mixNumber$1(et.min,et.max,it.origin)-it.originPoint,(it.scale>=SCALE_MIN&&it.scale<=SCALE_MAX||isNaN(it.scale))&&(it.scale=1),(it.translate>=TRANSLATE_MIN&&it.translate<=TRANSLATE_MAX||isNaN(it.translate))&&(it.translate=0)}function calcBoxDelta(it,g,et,ot){calcAxisDelta(it.x,g.x,et.x,ot?ot.originX:void 0),calcAxisDelta(it.y,g.y,et.y,ot?ot.originY:void 0)}function calcRelativeAxis(it,g,et){it.min=et.min+g.min,it.max=it.min+calcLength(g)}function calcRelativeBox(it,g,et){calcRelativeAxis(it.x,g.x,et.x),calcRelativeAxis(it.y,g.y,et.y)}function calcRelativeAxisPosition(it,g,et){it.min=g.min-et.min,it.max=it.min+calcLength(g)}function calcRelativePosition(it,g,et){calcRelativeAxisPosition(it.x,g.x,et.x),calcRelativeAxisPosition(it.y,g.y,et.y)}function applyConstraints(it,{min:g,max:et},ot){return g!==void 0&&it<g?it=ot?mixNumber$1(g,it,ot.min):Math.max(it,g):et!==void 0&&it>et&&(it=ot?mixNumber$1(et,it,ot.max):Math.min(it,et)),it}function calcRelativeAxisConstraints(it,g,et){return{min:g!==void 0?it.min+g:void 0,max:et!==void 0?it.max+et-(it.max-it.min):void 0}}function calcRelativeConstraints(it,{top:g,left:et,bottom:ot,right:ct}){return{x:calcRelativeAxisConstraints(it.x,et,ct),y:calcRelativeAxisConstraints(it.y,g,ot)}}function calcViewportAxisConstraints(it,g){let et=g.min-it.min,ot=g.max-it.max;return g.max-g.min<it.max-it.min&&([et,ot]=[ot,et]),{min:et,max:ot}}function calcViewportConstraints(it,g){return{x:calcViewportAxisConstraints(it.x,g.x),y:calcViewportAxisConstraints(it.y,g.y)}}function calcOrigin$1(it,g){let et=.5;const ot=calcLength(it),ct=calcLength(g);return ct>ot?et=progress(g.min,g.max-ot,it.min):ot>ct&&(et=progress(it.min,it.max-ct,g.min)),clamp(0,1,et)}function rebaseAxisConstraints(it,g){const et={};return g.min!==void 0&&(et.min=g.min-it.min),g.max!==void 0&&(et.max=g.max-it.min),et}const defaultElastic=.35;function resolveDragElastic(it=defaultElastic){return it===!1?it=0:it===!0&&(it=defaultElastic),{x:resolveAxisElastic(it,"left","right"),y:resolveAxisElastic(it,"top","bottom")}}function resolveAxisElastic(it,g,et){return{min:resolvePointElastic(it,g),max:resolvePointElastic(it,et)}}function resolvePointElastic(it,g){return typeof it=="number"?it:it[g]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(it){return[it("x"),it("y")]}function convertBoundingBoxToBox({top:it,left:g,right:et,bottom:ot}){return{x:{min:g,max:et},y:{min:it,max:ot}}}function convertBoxToBoundingBox({x:it,y:g}){return{top:g.min,right:it.max,bottom:g.max,left:it.min}}function transformBoxPoints(it,g){if(!g)return it;const et=g({x:it.left,y:it.top}),ot=g({x:it.right,y:it.bottom});return{top:et.y,left:et.x,bottom:ot.y,right:ot.x}}function isIdentityScale(it){return it===void 0||it===1}function hasScale({scale:it,scaleX:g,scaleY:et}){return!isIdentityScale(it)||!isIdentityScale(g)||!isIdentityScale(et)}function hasTransform(it){return hasScale(it)||has2DTranslate(it)||it.z||it.rotate||it.rotateX||it.rotateY||it.skewX||it.skewY}function has2DTranslate(it){return is2DTranslate(it.x)||is2DTranslate(it.y)}function is2DTranslate(it){return it&&it!=="0%"}function scalePoint(it,g,et){const ot=it-et,ct=g*ot;return et+ct}function applyPointDelta(it,g,et,ot,ct){return ct!==void 0&&(it=scalePoint(it,ct,ot)),scalePoint(it,et,ot)+g}function applyAxisDelta(it,g=0,et=1,ot,ct){it.min=applyPointDelta(it.min,g,et,ot,ct),it.max=applyPointDelta(it.max,g,et,ot,ct)}function applyBoxDelta(it,{x:g,y:et}){applyAxisDelta(it.x,g.translate,g.scale,g.originPoint),applyAxisDelta(it.y,et.translate,et.scale,et.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(it,g,et,ot=!1){const ct=et.length;if(!ct)return;g.x=g.y=1;let ut,dt;for(let ft=0;ft<ct;ft++){ut=et[ft],dt=ut.projectionDelta;const{visualElement:St}=ut.options;St&&St.props.style&&St.props.style.display==="contents"||(ot&&ut.options.layoutScroll&&ut.scroll&&ut!==ut.root&&transformBox(it,{x:-ut.scroll.offset.x,y:-ut.scroll.offset.y}),dt&&(g.x*=dt.x.scale,g.y*=dt.y.scale,applyBoxDelta(it,dt)),ot&&hasTransform(ut.latestValues)&&transformBox(it,ut.latestValues))}g.x<TREE_SCALE_SNAP_MAX&&g.x>TREE_SCALE_SNAP_MIN&&(g.x=1),g.y<TREE_SCALE_SNAP_MAX&&g.y>TREE_SCALE_SNAP_MIN&&(g.y=1)}function translateAxis(it,g){it.min=it.min+g,it.max=it.max+g}function transformAxis(it,g,et,ot,ct=.5){const ut=mixNumber$1(it.min,it.max,ct);applyAxisDelta(it,g,et,ut,ot)}function transformBox(it,g){transformAxis(it.x,g.x,g.scaleX,g.scale,g.originX),transformAxis(it.y,g.y,g.scaleY,g.scale,g.originY)}function measureViewportBox(it,g){return convertBoundingBoxToBox(transformBoxPoints(it.getBoundingClientRect(),g))}function measurePageBox(it,g,et){const ot=measureViewportBox(it,et),{scroll:ct}=g;return ct&&(translateAxis(ot.x,ct.offset.x),translateAxis(ot.y,ct.offset.y)),ot}const getContextWindow=({current:it})=>it?it.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(g){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=g}start(g,{snapToCursor:et=!1}={}){const{presenceContext:ot}=this.visualElement;if(ot&&ot.isPresent===!1)return;const ct=Tt=>{const{dragSnapToOrigin:Rt}=this.getProps();Rt?this.pauseAnimation():this.stopAnimation(),et&&this.snapToCursor(extractEventInfo(Tt).point)},ut=(Tt,Rt)=>{const{drag:jt,dragPropagation:$t,onDragStart:Ft}=this.getProps();if(jt&&!$t&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(jt),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Kt=>{let Bt=this.getAxisMotionValue(Kt).get()||0;if(percent.test(Bt)){const{projection:Ut}=this.visualElement;if(Ut&&Ut.layout){const Yt=Ut.layout.layoutBox[Kt];Yt&&(Bt=calcLength(Yt)*(parseFloat(Bt)/100))}}this.originPoint[Kt]=Bt}),Ft&&frame.postRender(()=>Ft(Tt,Rt)),addValueToWillChange(this.visualElement,"transform");const{animationState:Ht}=this.visualElement;Ht&&Ht.setActive("whileDrag",!0)},dt=(Tt,Rt)=>{const{dragPropagation:jt,dragDirectionLock:$t,onDirectionLock:Ft,onDrag:Ht}=this.getProps();if(!jt&&!this.openDragLock)return;const{offset:Kt}=Rt;if($t&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Kt),this.currentDirection!==null&&Ft&&Ft(this.currentDirection);return}this.updateAxis("x",Rt.point,Kt),this.updateAxis("y",Rt.point,Kt),this.visualElement.render(),Ht&&Ht(Tt,Rt)},ft=(Tt,Rt)=>this.stop(Tt,Rt),St=()=>eachAxis(Tt=>{var Rt;return this.getAnimationState(Tt)==="paused"&&((Rt=this.getAxisMotionValue(Tt).animation)===null||Rt===void 0?void 0:Rt.play())}),{dragSnapToOrigin:kt}=this.getProps();this.panSession=new PanSession(g,{onSessionStart:ct,onStart:ut,onMove:dt,onSessionEnd:ft,resumeAnimation:St},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:kt,contextWindow:getContextWindow(this.visualElement)})}stop(g,et){const ot=this.isDragging;if(this.cancel(),!ot)return;const{velocity:ct}=et;this.startAnimation(ct);const{onDragEnd:ut}=this.getProps();ut&&frame.postRender(()=>ut(g,et))}cancel(){this.isDragging=!1;const{projection:g,animationState:et}=this.visualElement;g&&(g.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:ot}=this.getProps();!ot&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),et&&et.setActive("whileDrag",!1)}updateAxis(g,et,ot){const{drag:ct}=this.getProps();if(!ot||!shouldDrag(g,ct,this.currentDirection))return;const ut=this.getAxisMotionValue(g);let dt=this.originPoint[g]+ot[g];this.constraints&&this.constraints[g]&&(dt=applyConstraints(dt,this.constraints[g],this.elastic[g])),ut.set(dt)}resolveConstraints(){var g;const{dragConstraints:et,dragElastic:ot}=this.getProps(),ct=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(g=this.visualElement.projection)===null||g===void 0?void 0:g.layout,ut=this.constraints;et&&isRefObject(et)?this.constraints||(this.constraints=this.resolveRefConstraints()):et&&ct?this.constraints=calcRelativeConstraints(ct.layoutBox,et):this.constraints=!1,this.elastic=resolveDragElastic(ot),ut!==this.constraints&&ct&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(dt=>{this.constraints!==!1&&this.getAxisMotionValue(dt)&&(this.constraints[dt]=rebaseAxisConstraints(ct.layoutBox[dt],this.constraints[dt]))})}resolveRefConstraints(){const{dragConstraints:g,onMeasureDragConstraints:et}=this.getProps();if(!g||!isRefObject(g))return!1;const ot=g.current,{projection:ct}=this.visualElement;if(!ct||!ct.layout)return!1;const ut=measurePageBox(ot,ct.root,this.visualElement.getTransformPagePoint());let dt=calcViewportConstraints(ct.layout.layoutBox,ut);if(et){const ft=et(convertBoxToBoundingBox(dt));this.hasMutatedConstraints=!!ft,ft&&(dt=convertBoundingBoxToBox(ft))}return dt}startAnimation(g){const{drag:et,dragMomentum:ot,dragElastic:ct,dragTransition:ut,dragSnapToOrigin:dt,onDragTransitionEnd:ft}=this.getProps(),St=this.constraints||{},kt=eachAxis(Tt=>{if(!shouldDrag(Tt,et,this.currentDirection))return;let Rt=St&&St[Tt]||{};dt&&(Rt={min:0,max:0});const jt=ct?200:1e6,$t=ct?40:1e7,Ft={type:"inertia",velocity:ot?g[Tt]:0,bounceStiffness:jt,bounceDamping:$t,timeConstant:750,restDelta:1,restSpeed:10,...ut,...Rt};return this.startAxisValueAnimation(Tt,Ft)});return Promise.all(kt).then(ft)}startAxisValueAnimation(g,et){const ot=this.getAxisMotionValue(g);return addValueToWillChange(this.visualElement,g),ot.start(animateMotionValue(g,ot,0,et,this.visualElement,!1))}stopAnimation(){eachAxis(g=>this.getAxisMotionValue(g).stop())}pauseAnimation(){eachAxis(g=>{var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.pause()})}getAnimationState(g){var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.state}getAxisMotionValue(g){const et=`_drag${g.toUpperCase()}`,ot=this.visualElement.getProps(),ct=ot[et];return ct||this.visualElement.getValue(g,(ot.initial?ot.initial[g]:void 0)||0)}snapToCursor(g){eachAxis(et=>{const{drag:ot}=this.getProps();if(!shouldDrag(et,ot,this.currentDirection))return;const{projection:ct}=this.visualElement,ut=this.getAxisMotionValue(et);if(ct&&ct.layout){const{min:dt,max:ft}=ct.layout.layoutBox[et];ut.set(g[et]-mixNumber$1(dt,ft,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:g,dragConstraints:et}=this.getProps(),{projection:ot}=this.visualElement;if(!isRefObject(et)||!ot||!this.constraints)return;this.stopAnimation();const ct={x:0,y:0};eachAxis(dt=>{const ft=this.getAxisMotionValue(dt);if(ft&&this.constraints!==!1){const St=ft.get();ct[dt]=calcOrigin$1({min:St,max:St},this.constraints[dt])}});const{transformTemplate:ut}=this.visualElement.getProps();this.visualElement.current.style.transform=ut?ut({},""):"none",ot.root&&ot.root.updateScroll(),ot.updateLayout(),this.resolveConstraints(),eachAxis(dt=>{if(!shouldDrag(dt,g,null))return;const ft=this.getAxisMotionValue(dt),{min:St,max:kt}=this.constraints[dt];ft.set(mixNumber$1(St,kt,ct[dt]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const g=this.visualElement.current,et=addPointerEvent(g,"pointerdown",St=>{const{drag:kt,dragListener:Tt=!0}=this.getProps();kt&&Tt&&this.start(St)}),ot=()=>{const{dragConstraints:St}=this.getProps();isRefObject(St)&&St.current&&(this.constraints=this.resolveRefConstraints())},{projection:ct}=this.visualElement,ut=ct.addEventListener("measure",ot);ct&&!ct.layout&&(ct.root&&ct.root.updateScroll(),ct.updateLayout()),frame.read(ot);const dt=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),ft=ct.addEventListener("didUpdate",({delta:St,hasLayoutChanged:kt})=>{this.isDragging&&kt&&(eachAxis(Tt=>{const Rt=this.getAxisMotionValue(Tt);Rt&&(this.originPoint[Tt]+=St[Tt].translate,Rt.set(Rt.get()+St[Tt].translate))}),this.visualElement.render())});return()=>{dt(),et(),ut(),ft&&ft()}}getProps(){const g=this.visualElement.getProps(),{drag:et=!1,dragDirectionLock:ot=!1,dragPropagation:ct=!1,dragConstraints:ut=!1,dragElastic:dt=defaultElastic,dragMomentum:ft=!0}=g;return{...g,drag:et,dragDirectionLock:ot,dragPropagation:ct,dragConstraints:ut,dragElastic:dt,dragMomentum:ft}}}function shouldDrag(it,g,et){return(g===!0||g===it)&&(et===null||et===it)}function getCurrentDirection(it,g=10){let et=null;return Math.abs(it.y)>g?et="y":Math.abs(it.x)>g&&(et="x"),et}class DragGesture extends Feature{constructor(g){super(g),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(g)}mount(){const{dragControls:g}=this.node.getProps();g&&(this.removeGroupControls=g.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=it=>(g,et)=>{it&&frame.postRender(()=>it(g,et))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(g){this.session=new PanSession(g,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:g,onPanStart:et,onPan:ot,onPanEnd:ct}=this.node.getProps();return{onSessionStart:asyncHandler(g),onStart:asyncHandler(et),onMove:ot,onEnd:(ut,dt)=>{delete this.session,ct&&frame.postRender(()=>ct(ut,dt))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",g=>this.onPointerDown(g))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence(){const it=reactExports.useContext(PresenceContext);if(it===null)return[!0,null];const{isPresent:g,onExitComplete:et,register:ot}=it,ct=reactExports.useId();reactExports.useEffect(()=>ot(ct),[]);const ut=reactExports.useCallback(()=>et&&et(ct),[ct,et]);return!g&&et?[!1,ut]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(it,g){return g.max===g.min?0:it/(g.max-g.min)*100}const correctBorderRadius={correct:(it,g)=>{if(!g.target)return it;if(typeof it=="string")if(px.test(it))it=parseFloat(it);else return it;const et=pixelsToPercent(it,g.target.x),ot=pixelsToPercent(it,g.target.y);return`${et}% ${ot}%`}},correctBoxShadow={correct:(it,{treeScale:g,projectionDelta:et})=>{const ot=it,ct=complex.parse(it);if(ct.length>5)return ot;const ut=complex.createTransformer(it),dt=typeof ct[0]!="number"?1:0,ft=et.x.scale*g.x,St=et.y.scale*g.y;ct[0+dt]/=ft,ct[1+dt]/=St;const kt=mixNumber$1(ft,St,.5);return typeof ct[2+dt]=="number"&&(ct[2+dt]/=kt),typeof ct[3+dt]=="number"&&(ct[3+dt]/=kt),ut(ct)}},scaleCorrectors={};function addScaleCorrector(it){Object.assign(scaleCorrectors,it)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot,layoutId:ct}=this.props,{projection:ut}=g;addScaleCorrector(defaultScaleCorrectors),ut&&(et.group&&et.group.add(ut),ot&&ot.register&&ct&&ot.register(ut),ut.root.didUpdate(),ut.addEventListener("animationComplete",()=>{this.safeToRemove()}),ut.setOptions({...ut.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(g){const{layoutDependency:et,visualElement:ot,drag:ct,isPresent:ut}=this.props,dt=ot.projection;return dt&&(dt.isPresent=ut,ct||g.layoutDependency!==et||et===void 0?dt.willUpdate():this.safeToRemove(),g.isPresent!==ut&&(ut?dt.promote():dt.relegate()||frame.postRender(()=>{const ft=dt.getStack();(!ft||!ft.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:g}=this.props.visualElement;g&&(g.root.didUpdate(),microtask.postRender(()=>{!g.currentAnimation&&g.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot}=this.props,{projection:ct}=g;ct&&(ct.scheduleCheckAfterUnmount(),et&&et.group&&et.group.remove(ct),ot&&ot.deregister&&ot.deregister(ct))}safeToRemove(){const{safeToRemove:g}=this.props;g&&g()}render(){return null}}function MeasureLayout(it){const[g,et]=usePresence(),ot=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...it,layoutGroup:ot,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:g,safeToRemove:et})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=it=>typeof it=="string"?parseFloat(it):it,isPx=it=>typeof it=="number"||px.test(it);function mixValues(it,g,et,ot,ct,ut){ct?(it.opacity=mixNumber$1(0,et.opacity!==void 0?et.opacity:1,easeCrossfadeIn(ot)),it.opacityExit=mixNumber$1(g.opacity!==void 0?g.opacity:1,0,easeCrossfadeOut(ot))):ut&&(it.opacity=mixNumber$1(g.opacity!==void 0?g.opacity:1,et.opacity!==void 0?et.opacity:1,ot));for(let dt=0;dt<numBorders;dt++){const ft=`border${borders[dt]}Radius`;let St=getRadius(g,ft),kt=getRadius(et,ft);if(St===void 0&&kt===void 0)continue;St||(St=0),kt||(kt=0),St===0||kt===0||isPx(St)===isPx(kt)?(it[ft]=Math.max(mixNumber$1(asNumber(St),asNumber(kt),ot),0),(percent.test(kt)||percent.test(St))&&(it[ft]+="%")):it[ft]=kt}(g.rotate||et.rotate)&&(it.rotate=mixNumber$1(g.rotate||0,et.rotate||0,ot))}function getRadius(it,g){return it[g]!==void 0?it[g]:it.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(it,g,et){return ot=>ot<it?0:ot>g?1:et(progress(it,g,ot))}function copyAxisInto(it,g){it.min=g.min,it.max=g.max}function copyBoxInto(it,g){copyAxisInto(it.x,g.x),copyAxisInto(it.y,g.y)}function copyAxisDeltaInto(it,g){it.translate=g.translate,it.scale=g.scale,it.originPoint=g.originPoint,it.origin=g.origin}function removePointDelta(it,g,et,ot,ct){return it-=g,it=scalePoint(it,1/et,ot),ct!==void 0&&(it=scalePoint(it,1/ct,ot)),it}function removeAxisDelta(it,g=0,et=1,ot=.5,ct,ut=it,dt=it){if(percent.test(g)&&(g=parseFloat(g),g=mixNumber$1(dt.min,dt.max,g/100)-dt.min),typeof g!="number")return;let ft=mixNumber$1(ut.min,ut.max,ot);it===ut&&(ft-=g),it.min=removePointDelta(it.min,g,et,ft,ct),it.max=removePointDelta(it.max,g,et,ft,ct)}function removeAxisTransforms(it,g,[et,ot,ct],ut,dt){removeAxisDelta(it,g[et],g[ot],g[ct],g.scale,ut,dt)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(it,g,et,ot){removeAxisTransforms(it.x,g,xKeys,et?et.x:void 0,ot?ot.x:void 0),removeAxisTransforms(it.y,g,yKeys,et?et.y:void 0,ot?ot.y:void 0)}function isAxisDeltaZero(it){return it.translate===0&&it.scale===1}function isDeltaZero(it){return isAxisDeltaZero(it.x)&&isAxisDeltaZero(it.y)}function axisEquals(it,g){return it.min===g.min&&it.max===g.max}function boxEquals(it,g){return axisEquals(it.x,g.x)&&axisEquals(it.y,g.y)}function axisEqualsRounded(it,g){return Math.round(it.min)===Math.round(g.min)&&Math.round(it.max)===Math.round(g.max)}function boxEqualsRounded(it,g){return axisEqualsRounded(it.x,g.x)&&axisEqualsRounded(it.y,g.y)}function aspectRatio(it){return calcLength(it.x)/calcLength(it.y)}function axisDeltaEquals(it,g){return it.translate===g.translate&&it.scale===g.scale&&it.originPoint===g.originPoint}class NodeStack{constructor(){this.members=[]}add(g){addUniqueItem(this.members,g),g.scheduleRender()}remove(g){if(removeItem(this.members,g),g===this.prevLead&&(this.prevLead=void 0),g===this.lead){const et=this.members[this.members.length-1];et&&this.promote(et)}}relegate(g){const et=this.members.findIndex(ct=>g===ct);if(et===0)return!1;let ot;for(let ct=et;ct>=0;ct--){const ut=this.members[ct];if(ut.isPresent!==!1){ot=ut;break}}return ot?(this.promote(ot),!0):!1}promote(g,et){const ot=this.lead;if(g!==ot&&(this.prevLead=ot,this.lead=g,g.show(),ot)){ot.instance&&ot.scheduleRender(),g.scheduleRender(),g.resumeFrom=ot,et&&(g.resumeFrom.preserveOpacity=!0),ot.snapshot&&(g.snapshot=ot.snapshot,g.snapshot.latestValues=ot.animationValues||ot.latestValues),g.root&&g.root.isUpdating&&(g.isLayoutDirty=!0);const{crossfade:ct}=g.options;ct===!1&&ot.hide()}}exitAnimationComplete(){this.members.forEach(g=>{const{options:et,resumingFrom:ot}=g;et.onExitComplete&&et.onExitComplete(),ot&&ot.options.onExitComplete&&ot.options.onExitComplete()})}scheduleRender(){this.members.forEach(g=>{g.instance&&g.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(it,g,et){let ot="";const ct=it.x.translate/g.x,ut=it.y.translate/g.y,dt=(et==null?void 0:et.z)||0;if((ct||ut||dt)&&(ot=`translate3d(${ct}px, ${ut}px, ${dt}px) `),(g.x!==1||g.y!==1)&&(ot+=`scale(${1/g.x}, ${1/g.y}) `),et){const{transformPerspective:kt,rotate:Tt,rotateX:Rt,rotateY:jt,skewX:$t,skewY:Ft}=et;kt&&(ot=`perspective(${kt}px) ${ot}`),Tt&&(ot+=`rotate(${Tt}deg) `),Rt&&(ot+=`rotateX(${Rt}deg) `),jt&&(ot+=`rotateY(${jt}deg) `),$t&&(ot+=`skewX(${$t}deg) `),Ft&&(ot+=`skewY(${Ft}deg) `)}const ft=it.x.scale*g.x,St=it.y.scale*g.y;return(ft!==1||St!==1)&&(ot+=`scale(${ft}, ${St})`),ot||"none"}const compareByDepth=(it,g)=>it.depth-g.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(g){addUniqueItem(this.children,g),this.isDirty=!0}remove(g){removeItem(this.children,g),this.isDirty=!0}forEach(g){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(g)}}function resolveMotionValue(it){const g=isMotionValue(it)?it.get():it;return isCustomValue(g)?g.toValue():g}function delay(it,g){const et=time.now(),ot=({timestamp:ct})=>{const ut=ct-et;ut>=g&&(cancelFrame(ot),it(ut-g))};return frame.read(ot,!0),()=>cancelFrame(ot)}function isSVGElement(it){return it instanceof SVGElement&&it.tagName!=="svg"}function animateSingleValue(it,g,et){const ot=isMotionValue(it)?it:motionValue(it);return ot.start(animateMotionValue("",ot,g,et)),ot.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(it,g,et,ot){const{latestValues:ct}=g;ct[it]&&(et[it]=ct[it],g.setStaticValue(it,0),ot&&(ot[it]=0))}function cancelTreeOptimisedTransformAnimations(it){if(it.hasCheckedOptimisedAppear=!0,it.root===it)return;const{visualElement:g}=it.options;if(!g)return;const et=getOptimisedAppearId(g);if(window.MotionHasOptimisedAnimation(et,"transform")){const{layout:ct,layoutId:ut}=it.options;window.MotionCancelOptimisedAnimation(et,"transform",frame,!(ct||ut))}const{parent:ot}=it;ot&&!ot.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(ot)}function createProjectionNode$1({attachResizeListener:it,defaultParent:g,measureScroll:et,checkIsScrollRoot:ot,resetTransform:ct}){return class{constructor(dt={},ft=g==null?void 0:g()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=dt,this.root=ft?ft.root||ft:this,this.path=ft?[...ft.path,ft]:[],this.parent=ft,this.depth=ft?ft.depth+1:0;for(let St=0;St<this.path.length;St++)this.path[St].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(dt,ft){return this.eventHandlers.has(dt)||this.eventHandlers.set(dt,new SubscriptionManager),this.eventHandlers.get(dt).add(ft)}notifyListeners(dt,...ft){const St=this.eventHandlers.get(dt);St&&St.notify(...ft)}hasListeners(dt){return this.eventHandlers.has(dt)}mount(dt,ft=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(dt),this.instance=dt;const{layoutId:St,layout:kt,visualElement:Tt}=this.options;if(Tt&&!Tt.current&&Tt.mount(dt),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),ft&&(kt||St)&&(this.isLayoutDirty=!0),it){let Rt;const jt=()=>this.root.updateBlockedByResize=!1;it(dt,()=>{this.root.updateBlockedByResize=!0,Rt&&Rt(),Rt=delay(jt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}St&&this.root.registerSharedNode(St,this),this.options.animate!==!1&&Tt&&(St||kt)&&this.addEventListener("didUpdate",({delta:Rt,hasLayoutChanged:jt,hasRelativeTargetChanged:$t,layout:Ft})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Ht=this.options.transition||Tt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:Kt,onLayoutAnimationComplete:Bt}=Tt.getProps(),Ut=!this.targetLayout||!boxEqualsRounded(this.targetLayout,Ft)||$t,Yt=!jt&&$t;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Yt||jt&&(Ut||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(Rt,Yt);const Jt={...getValueTransition(Ht,"layout"),onPlay:Kt,onComplete:Bt};(Tt.shouldReduceMotion||this.options.layoutRoot)&&(Jt.delay=0,Jt.type=!1),this.startAnimation(Jt)}else jt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Ft})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const dt=this.getStack();dt&&dt.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:dt}=this.options;return dt&&dt.getProps().transformTemplate}willUpdate(dt=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Tt=0;Tt<this.path.length;Tt++){const Rt=this.path[Tt];Rt.shouldResetTransform=!0,Rt.updateScroll("snapshot"),Rt.options.layoutRoot&&Rt.willUpdate(!1)}const{layoutId:ft,layout:St}=this.options;if(ft===void 0&&!St)return;const kt=this.getTransformTemplate();this.prevTransformTemplateValue=kt?kt(this.latestValues,""):void 0,this.updateSnapshot(),dt&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const ft=time.now();frameData.delta=clamp(0,1e3/60,ft-frameData.timestamp),frameData.timestamp=ft,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let St=0;St<this.path.length;St++)this.path[St].updateScroll();const dt=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:ft}=this.options;ft&&ft.notify("LayoutMeasure",this.layout.layoutBox,dt?dt.layoutBox:void 0)}updateScroll(dt="measure"){let ft=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===dt&&(ft=!1),ft){const St=ot(this.instance);this.scroll={animationId:this.root.animationId,phase:dt,isRoot:St,offset:et(this.instance),wasRoot:this.scroll?this.scroll.isRoot:St}}}resetTransform(){if(!ct)return;const dt=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,ft=this.projectionDelta&&!isDeltaZero(this.projectionDelta),St=this.getTransformTemplate(),kt=St?St(this.latestValues,""):void 0,Tt=kt!==this.prevTransformTemplateValue;dt&&(ft||hasTransform(this.latestValues)||Tt)&&(ct(this.instance,kt),this.shouldResetTransform=!1,this.scheduleRender())}measure(dt=!0){const ft=this.measurePageBox();let St=this.removeElementScroll(ft);return dt&&(St=this.removeTransform(St)),roundBox(St),{animationId:this.root.animationId,measuredBox:ft,layoutBox:St,latestValues:{},source:this.id}}measurePageBox(){var dt;const{visualElement:ft}=this.options;if(!ft)return createBox();const St=ft.measureViewportBox();if(!(((dt=this.scroll)===null||dt===void 0?void 0:dt.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:Tt}=this.root;Tt&&(translateAxis(St.x,Tt.offset.x),translateAxis(St.y,Tt.offset.y))}return St}removeElementScroll(dt){var ft;const St=createBox();if(copyBoxInto(St,dt),!((ft=this.scroll)===null||ft===void 0)&&ft.wasRoot)return St;for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt],{scroll:Rt,options:jt}=Tt;Tt!==this.root&&Rt&&jt.layoutScroll&&(Rt.wasRoot&&copyBoxInto(St,dt),translateAxis(St.x,Rt.offset.x),translateAxis(St.y,Rt.offset.y))}return St}applyTransform(dt,ft=!1){const St=createBox();copyBoxInto(St,dt);for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt];!ft&&Tt.options.layoutScroll&&Tt.scroll&&Tt!==Tt.root&&transformBox(St,{x:-Tt.scroll.offset.x,y:-Tt.scroll.offset.y}),hasTransform(Tt.latestValues)&&transformBox(St,Tt.latestValues)}return hasTransform(this.latestValues)&&transformBox(St,this.latestValues),St}removeTransform(dt){const ft=createBox();copyBoxInto(ft,dt);for(let St=0;St<this.path.length;St++){const kt=this.path[St];if(!kt.instance||!hasTransform(kt.latestValues))continue;hasScale(kt.latestValues)&&kt.updateSnapshot();const Tt=createBox(),Rt=kt.measurePageBox();copyBoxInto(Tt,Rt),removeBoxTransforms(ft,kt.latestValues,kt.snapshot?kt.snapshot.layoutBox:void 0,Tt)}return hasTransform(this.latestValues)&&removeBoxTransforms(ft,this.latestValues),ft}setTargetDelta(dt){this.targetDelta=dt,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(dt){this.options={...this.options,...dt,crossfade:dt.crossfade!==void 0?dt.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(dt=!1){var ft;const St=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=St.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=St.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=St.isSharedProjectionDirty);const kt=!!this.resumingFrom||this!==St;if(!(dt||kt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((ft=this.parent)===null||ft===void 0)&&ft.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Rt,layoutId:jt}=this.options;if(!(!this.layout||!(Rt||jt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const $t=this.getClosestProjectingParent();$t&&$t.layout&&this.animationProgress!==1?(this.relativeParent=$t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,$t.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const $t=this.getClosestProjectingParent();$t&&!!$t.resumingFrom==!!this.resumingFrom&&!$t.options.layoutScroll&&$t.target&&this.animationProgress!==1?(this.relativeParent=$t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,$t.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var dt;const ft=this.getLead(),St=!!this.resumingFrom||this!==ft;let kt=!0;if((this.isProjectionDirty||!((dt=this.parent)===null||dt===void 0)&&dt.isProjectionDirty)&&(kt=!1),St&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(kt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(kt=!1),kt)return;const{layout:Tt,layoutId:Rt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Tt||Rt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const jt=this.treeScale.x,$t=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,St),ft.layout&&!ft.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(ft.target=ft.layout.layoutBox,ft.targetWithTransforms=createBox());const{target:Ft}=ft;if(!Ft){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,Ft,this.latestValues),(this.treeScale.x!==jt||this.treeScale.y!==$t||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Ft)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(dt=!0){var ft;if((ft=this.options.visualElement)===null||ft===void 0||ft.scheduleRender(),dt){const St=this.getStack();St&&St.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(dt,ft=!1){const St=this.snapshot,kt=St?St.latestValues:{},Tt={...this.latestValues},Rt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!ft;const jt=createBox(),$t=St?St.source:void 0,Ft=this.layout?this.layout.source:void 0,Ht=$t!==Ft,Kt=this.getStack(),Bt=!Kt||Kt.members.length<=1,Ut=!!(Ht&&!Bt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Yt;this.mixTargetDelta=Jt=>{const Zt=Jt/1e3;mixAxisDelta(Rt.x,dt.x,Zt),mixAxisDelta(Rt.y,dt.y,Zt),this.setTargetDelta(Rt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(jt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,jt,Zt),Yt&&boxEquals(this.relativeTarget,Yt)&&(this.isProjectionDirty=!1),Yt||(Yt=createBox()),copyBoxInto(Yt,this.relativeTarget)),Ht&&(this.animationValues=Tt,mixValues(Tt,kt,this.latestValues,Zt,Ut,Bt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Zt},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(dt){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...dt,onUpdate:ft=>{this.mixTargetDelta(ft),dt.onUpdate&&dt.onUpdate(ft)},onComplete:()=>{dt.onComplete&&dt.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const dt=this.getStack();dt&&dt.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const dt=this.getLead();let{targetWithTransforms:ft,target:St,layout:kt,latestValues:Tt}=dt;if(!(!ft||!St||!kt)){if(this!==dt&&this.layout&&kt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,kt.layoutBox)){St=this.target||createBox();const Rt=calcLength(this.layout.layoutBox.x);St.x.min=dt.target.x.min,St.x.max=St.x.min+Rt;const jt=calcLength(this.layout.layoutBox.y);St.y.min=dt.target.y.min,St.y.max=St.y.min+jt}copyBoxInto(ft,St),transformBox(ft,Tt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,ft,Tt)}}registerSharedNode(dt,ft){this.sharedNodes.has(dt)||this.sharedNodes.set(dt,new NodeStack),this.sharedNodes.get(dt).add(ft);const kt=ft.options.initialPromotionConfig;ft.promote({transition:kt?kt.transition:void 0,preserveFollowOpacity:kt&&kt.shouldPreserveFollowOpacity?kt.shouldPreserveFollowOpacity(ft):void 0})}isLead(){const dt=this.getStack();return dt?dt.lead===this:!0}getLead(){var dt;const{layoutId:ft}=this.options;return ft?((dt=this.getStack())===null||dt===void 0?void 0:dt.lead)||this:this}getPrevLead(){var dt;const{layoutId:ft}=this.options;return ft?(dt=this.getStack())===null||dt===void 0?void 0:dt.prevLead:void 0}getStack(){const{layoutId:dt}=this.options;if(dt)return this.root.sharedNodes.get(dt)}promote({needsReset:dt,transition:ft,preserveFollowOpacity:St}={}){const kt=this.getStack();kt&&kt.promote(this,St),dt&&(this.projectionDelta=void 0,this.needsReset=!0),ft&&this.setOptions({transition:ft})}relegate(){const dt=this.getStack();return dt?dt.relegate(this):!1}resetSkewAndRotation(){const{visualElement:dt}=this.options;if(!dt)return;let ft=!1;const{latestValues:St}=dt;if((St.z||St.rotate||St.rotateX||St.rotateY||St.rotateZ||St.skewX||St.skewY)&&(ft=!0),!ft)return;const kt={};St.z&&resetDistortingTransform("z",dt,kt,this.animationValues);for(let Tt=0;Tt<transformAxes.length;Tt++)resetDistortingTransform(`rotate${transformAxes[Tt]}`,dt,kt,this.animationValues),resetDistortingTransform(`skew${transformAxes[Tt]}`,dt,kt,this.animationValues);dt.render();for(const Tt in kt)dt.setStaticValue(Tt,kt[Tt]),this.animationValues&&(this.animationValues[Tt]=kt[Tt]);dt.scheduleRender()}getProjectionStyles(dt){var ft,St;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const kt={visibility:""},Tt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,kt.opacity="",kt.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"",kt.transform=Tt?Tt(this.latestValues,""):"none",kt;const Rt=this.getLead();if(!this.projectionDelta||!this.layout||!Rt.target){const Ht={};return this.options.layoutId&&(Ht.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Ht.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(Ht.transform=Tt?Tt({},""):"none",this.hasProjected=!1),Ht}const jt=Rt.animationValues||Rt.latestValues;this.applyTransformsToTarget(),kt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,jt),Tt&&(kt.transform=Tt(jt,kt.transform));const{x:$t,y:Ft}=this.projectionDelta;kt.transformOrigin=`${$t.origin*100}% ${Ft.origin*100}% 0`,Rt.animationValues?kt.opacity=Rt===this?(St=(ft=jt.opacity)!==null&&ft!==void 0?ft:this.latestValues.opacity)!==null&&St!==void 0?St:1:this.preserveOpacity?this.latestValues.opacity:jt.opacityExit:kt.opacity=Rt===this?jt.opacity!==void 0?jt.opacity:"":jt.opacityExit!==void 0?jt.opacityExit:0;for(const Ht in scaleCorrectors){if(jt[Ht]===void 0)continue;const{correct:Kt,applyTo:Bt}=scaleCorrectors[Ht],Ut=kt.transform==="none"?jt[Ht]:Kt(jt[Ht],Rt);if(Bt){const Yt=Bt.length;for(let Jt=0;Jt<Yt;Jt++)kt[Bt[Jt]]=Ut}else kt[Ht]=Ut}return this.options.layoutId&&(kt.pointerEvents=Rt===this?resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"":"none"),kt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(dt=>{var ft;return(ft=dt.currentAnimation)===null||ft===void 0?void 0:ft.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(it){it.updateLayout()}function notifyLayoutUpdate(it){var g;const et=((g=it.resumeFrom)===null||g===void 0?void 0:g.snapshot)||it.snapshot;if(it.isLead()&&it.layout&&et&&it.hasListeners("didUpdate")){const{layoutBox:ot,measuredBox:ct}=it.layout,{animationType:ut}=it.options,dt=et.source!==it.layout.source;ut==="size"?eachAxis(Rt=>{const jt=dt?et.measuredBox[Rt]:et.layoutBox[Rt],$t=calcLength(jt);jt.min=ot[Rt].min,jt.max=jt.min+$t}):shouldAnimatePositionOnly(ut,et.layoutBox,ot)&&eachAxis(Rt=>{const jt=dt?et.measuredBox[Rt]:et.layoutBox[Rt],$t=calcLength(ot[Rt]);jt.max=jt.min+$t,it.relativeTarget&&!it.currentAnimation&&(it.isProjectionDirty=!0,it.relativeTarget[Rt].max=it.relativeTarget[Rt].min+$t)});const ft=createDelta();calcBoxDelta(ft,ot,et.layoutBox);const St=createDelta();dt?calcBoxDelta(St,it.applyTransform(ct,!0),et.measuredBox):calcBoxDelta(St,ot,et.layoutBox);const kt=!isDeltaZero(ft);let Tt=!1;if(!it.resumeFrom){const Rt=it.getClosestProjectingParent();if(Rt&&!Rt.resumeFrom){const{snapshot:jt,layout:$t}=Rt;if(jt&&$t){const Ft=createBox();calcRelativePosition(Ft,et.layoutBox,jt.layoutBox);const Ht=createBox();calcRelativePosition(Ht,ot,$t.layoutBox),boxEqualsRounded(Ft,Ht)||(Tt=!0),Rt.options.layoutRoot&&(it.relativeTarget=Ht,it.relativeTargetOrigin=Ft,it.relativeParent=Rt)}}}it.notifyListeners("didUpdate",{layout:ot,snapshot:et,delta:St,layoutDelta:ft,hasLayoutChanged:kt,hasRelativeTargetChanged:Tt})}else if(it.isLead()){const{onExitComplete:ot}=it.options;ot&&ot()}it.options.transition=void 0}function propagateDirtyNodes(it){isDebug&&metrics.totalNodes++,it.parent&&(it.isProjecting()||(it.isProjectionDirty=it.parent.isProjectionDirty),it.isSharedProjectionDirty||(it.isSharedProjectionDirty=!!(it.isProjectionDirty||it.parent.isProjectionDirty||it.parent.isSharedProjectionDirty)),it.isTransformDirty||(it.isTransformDirty=it.parent.isTransformDirty))}function cleanDirtyNodes(it){it.isProjectionDirty=it.isSharedProjectionDirty=it.isTransformDirty=!1}function clearSnapshot(it){it.clearSnapshot()}function clearMeasurements(it){it.clearMeasurements()}function clearIsLayoutDirty(it){it.isLayoutDirty=!1}function resetTransformStyle(it){const{visualElement:g}=it.options;g&&g.getProps().onBeforeLayoutMeasure&&g.notify("BeforeLayoutMeasure"),it.resetTransform()}function finishAnimation(it){it.finishAnimation(),it.targetDelta=it.relativeTarget=it.target=void 0,it.isProjectionDirty=!0}function resolveTargetDelta(it){it.resolveTargetDelta()}function calcProjection(it){it.calcProjection()}function resetSkewAndRotation(it){it.resetSkewAndRotation()}function removeLeadSnapshots(it){it.removeLeadSnapshot()}function mixAxisDelta(it,g,et){it.translate=mixNumber$1(g.translate,0,et),it.scale=mixNumber$1(g.scale,1,et),it.origin=g.origin,it.originPoint=g.originPoint}function mixAxis(it,g,et,ot){it.min=mixNumber$1(g.min,et.min,ot),it.max=mixNumber$1(g.max,et.max,ot)}function mixBox(it,g,et,ot){mixAxis(it.x,g.x,et.x,ot),mixAxis(it.y,g.y,et.y,ot)}function hasOpacityCrossfade(it){return it.animationValues&&it.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=it=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(it),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(it){it.min=roundPoint(it.min),it.max=roundPoint(it.max)}function roundBox(it){roundAxis(it.x),roundAxis(it.y)}function shouldAnimatePositionOnly(it,g,et){return it==="position"||it==="preserve-aspect"&&!isNear$1(aspectRatio(g),aspectRatio(et),.2)}function checkNodeWasScrollRoot(it){var g;return it!==it.root&&((g=it.scroll)===null||g===void 0?void 0:g.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(it,g)=>addDomEvent(it,"resize",g),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:it=>({x:it.scrollLeft,y:it.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const it=new DocumentProjectionNode({});it.mount(window),it.setOptions({layoutScroll:!0}),rootProjectionNode.current=it}return rootProjectionNode.current},resetTransform:(it,g)=>{it.style.transform=g!==void 0?g:"none"},checkIsScrollRoot:it=>window.getComputedStyle(it).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileHover&&it.animationState.setActive("whileHover",et==="Start");const ct="onHover"+et,ut=ot[ct];ut&&frame.postRender(()=>ut(g,extractEventInfo(g)))}class HoverGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=hover(g,et=>(handleHoverEvent(this.node,et,"Start"),ot=>handleHoverEvent(this.node,ot,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let g=!1;try{g=this.node.current.matches(":focus-visible")}catch{g=!0}!g||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileTap&&it.animationState.setActive("whileTap",et==="Start");const ct="onTap"+(et==="End"?"":et),ut=ot[ct];ut&&frame.postRender(()=>ut(g,extractEventInfo(g)))}class PressGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=press(g,et=>(handlePressEvent(this.node,et,"Start"),(ot,{success:ct})=>handlePressEvent(this.node,ot,ct?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=it=>{const g=observerCallbacks.get(it.target);g&&g(it)},fireAllObserverCallbacks=it=>{it.forEach(fireObserverCallback)};function initIntersectionObserver({root:it,...g}){const et=it||document;observers.has(et)||observers.set(et,{});const ot=observers.get(et),ct=JSON.stringify(g);return ot[ct]||(ot[ct]=new IntersectionObserver(fireAllObserverCallbacks,{root:it,...g})),ot[ct]}function observeIntersection(it,g,et){const ot=initIntersectionObserver(g);return observerCallbacks.set(it,et),ot.observe(it),()=>{observerCallbacks.delete(it),ot.unobserve(it)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:g={}}=this.node.getProps(),{root:et,margin:ot,amount:ct="some",once:ut}=g,dt={root:et?et.current:void 0,rootMargin:ot,threshold:typeof ct=="number"?ct:thresholdNames[ct]},ft=St=>{const{isIntersecting:kt}=St;if(this.isInView===kt||(this.isInView=kt,ut&&!kt&&this.hasEnteredView))return;kt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",kt);const{onViewportEnter:Tt,onViewportLeave:Rt}=this.node.getProps(),jt=kt?Tt:Rt;jt&&jt(St)};return observeIntersection(this.node.current,dt,ft)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:g,prevProps:et}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(g,et))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:it={}},{viewport:g={}}={}){return et=>it[et]!==g[et]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:it=>it,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(it,g,et,ot,ct){var ut,dt;const{visualElement:ft}=reactExports.useContext(MotionContext),St=reactExports.useContext(LazyContext),kt=reactExports.useContext(PresenceContext),Tt=reactExports.useContext(MotionConfigContext).reducedMotion,Rt=reactExports.useRef(null);ot=ot||St.renderer,!Rt.current&&ot&&(Rt.current=ot(it,{visualState:g,parent:ft,props:et,presenceContext:kt,blockInitialAnimation:kt?kt.initial===!1:!1,reducedMotionConfig:Tt}));const jt=Rt.current,$t=reactExports.useContext(SwitchLayoutGroupContext);jt&&!jt.projection&&ct&&(jt.type==="html"||jt.type==="svg")&&createProjectionNode(Rt.current,et,ct,$t);const Ft=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{jt&&Ft.current&&jt.update(et,kt)});const Ht=et[optimizedAppearDataAttribute],Kt=reactExports.useRef(!!Ht&&!(!((ut=window.MotionHandoffIsComplete)===null||ut===void 0)&&ut.call(window,Ht))&&((dt=window.MotionHasOptimisedAnimation)===null||dt===void 0?void 0:dt.call(window,Ht)));return useIsomorphicLayoutEffect$1(()=>{jt&&(Ft.current=!0,window.MotionIsMounted=!0,jt.updateFeatures(),microtask.render(jt.render),Kt.current&&jt.animationState&&jt.animationState.animateChanges())}),reactExports.useEffect(()=>{jt&&(!Kt.current&&jt.animationState&&jt.animationState.animateChanges(),Kt.current&&(queueMicrotask(()=>{var Bt;(Bt=window.MotionHandoffMarkAsComplete)===null||Bt===void 0||Bt.call(window,Ht)}),Kt.current=!1))}),jt}function createProjectionNode(it,g,et,ot){const{layoutId:ct,layout:ut,drag:dt,dragConstraints:ft,layoutScroll:St,layoutRoot:kt}=g;it.projection=new et(it.latestValues,g["data-framer-portal-id"]?void 0:getClosestProjectingNode(it.parent)),it.projection.setOptions({layoutId:ct,layout:ut,alwaysMeasureLayout:!!dt||ft&&isRefObject(ft),visualElement:it,animationType:typeof ut=="string"?ut:"both",initialPromotionConfig:ot,layoutScroll:St,layoutRoot:kt})}function getClosestProjectingNode(it){if(it)return it.options.allowProjection!==!1?it.projection:getClosestProjectingNode(it.parent)}function useMotionRef(it,g,et){return reactExports.useCallback(ot=>{ot&&it.mount&&it.mount(ot),g&&(ot?g.mount(ot):g.unmount()),et&&(typeof et=="function"?et(ot):isRefObject(et)&&(et.current=ot))},[g])}function isControllingVariants(it){return isAnimationControls(it.animate)||variantProps.some(g=>isVariantLabel(it[g]))}function isVariantNode(it){return!!(isControllingVariants(it)||it.variants)}function getCurrentTreeVariants(it,g){if(isControllingVariants(it)){const{initial:et,animate:ot}=it;return{initial:et===!1||isVariantLabel(et)?et:void 0,animate:isVariantLabel(ot)?ot:void 0}}return it.inherit!==!1?g:{}}function useCreateMotionContext(it){const{initial:g,animate:et}=getCurrentTreeVariants(it,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:g,animate:et}),[variantLabelsAsDependency(g),variantLabelsAsDependency(et)])}function variantLabelsAsDependency(it){return Array.isArray(it)?it.join(" "):it}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const it in featureProps)featureDefinitions[it]={isEnabled:g=>featureProps[it].some(et=>!!g[et])};function loadFeatures(it){for(const g in it)featureDefinitions[g]={...featureDefinitions[g],...it[g]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:it,createVisualElement:g,useRender:et,useVisualState:ot,Component:ct}){it&&loadFeatures(it);function ut(ft,St){let kt;const Tt={...reactExports.useContext(MotionConfigContext),...ft,layoutId:useLayoutId(ft)},{isStatic:Rt}=Tt,jt=useCreateMotionContext(ft),$t=ot(ft,Rt);if(!Rt&&isBrowser$1){useStrictMode();const Ft=getProjectionFunctionality(Tt);kt=Ft.MeasureLayout,jt.visualElement=useVisualElement(ct,$t,Tt,g,Ft.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:jt,children:[kt&&jt.visualElement?jsxRuntimeExports.jsx(kt,{visualElement:jt.visualElement,...Tt}):null,et(ct,ft,useMotionRef($t,jt.visualElement,St),$t,Rt,jt.visualElement)]})}const dt=reactExports.forwardRef(ut);return dt[motionComponentSymbol]=ct,dt}function useLayoutId({layoutId:it}){const g=reactExports.useContext(LayoutGroupContext).id;return g&&it!==void 0?g+"-"+it:it}function useStrictMode(it,g){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(it){const{drag:g,layout:et}=featureDefinitions;if(!g&&!et)return{};const ot={...g,...et};return{MeasureLayout:g!=null&&g.isEnabled(it)||et!=null&&et.isEnabled(it)?ot.MeasureLayout:void 0,ProjectionNode:ot.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(it){return typeof it!="string"||it.includes("-")?!1:!!(lowercaseSVGElements.indexOf(it)>-1||/[A-Z]/u.test(it))}function renderHTML(it,{style:g,vars:et},ot,ct){Object.assign(it.style,g,ct&&ct.getProjectionStyles(ot));for(const ut in et)it.style.setProperty(ut,et[ut])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(it,g,et,ot){renderHTML(it,g,void 0,ot);for(const ct in g.attrs)it.setAttribute(camelCaseAttributes.has(ct)?ct:camelToDash(ct),g.attrs[ct])}function isForcedMotionValue(it,{layout:g,layoutId:et}){return transformProps.has(it)||it.startsWith("origin")||(g||et!==void 0)&&(!!scaleCorrectors[it]||it==="opacity")}function scrapeMotionValuesFromProps$1(it,g,et){var ot;const{style:ct}=it,ut={};for(const dt in ct)(isMotionValue(ct[dt])||g.style&&isMotionValue(g.style[dt])||isForcedMotionValue(dt,it)||((ot=et==null?void 0:et.getValue(dt))===null||ot===void 0?void 0:ot.liveStyle)!==void 0)&&(ut[dt]=ct[dt]);return ut}function scrapeMotionValuesFromProps(it,g,et){const ot=scrapeMotionValuesFromProps$1(it,g,et);for(const ct in it)if(isMotionValue(it[ct])||isMotionValue(g[ct])){const ut=transformPropOrder.indexOf(ct)!==-1?"attr"+ct.charAt(0).toUpperCase()+ct.substring(1):ct;ot[ut]=it[ct]}return ot}function useConstant(it){const g=reactExports.useRef(null);return g.current===null&&(g.current=it()),g.current}function makeState$1({scrapeMotionValuesFromProps:it,createRenderState:g,onMount:et},ot,ct,ut){const dt={latestValues:makeLatestValues(ot,ct,ut,it),renderState:g()};return et&&(dt.mount=ft=>et(ot,ft,dt)),dt}const makeUseVisualState=it=>(g,et)=>{const ot=reactExports.useContext(MotionContext),ct=reactExports.useContext(PresenceContext),ut=()=>makeState$1(it,g,ot,ct);return et?ut():useConstant(ut)};function makeLatestValues(it,g,et,ot){const ct={},ut=ot(it,{});for(const jt in ut)ct[jt]=resolveMotionValue(ut[jt]);let{initial:dt,animate:ft}=it;const St=isControllingVariants(it),kt=isVariantNode(it);g&&kt&&!St&&it.inherit!==!1&&(dt===void 0&&(dt=g.initial),ft===void 0&&(ft=g.animate));let Tt=et?et.initial===!1:!1;Tt=Tt||dt===!1;const Rt=Tt?ft:dt;if(Rt&&typeof Rt!="boolean"&&!isAnimationControls(Rt)){const jt=Array.isArray(Rt)?Rt:[Rt];for(let $t=0;$t<jt.length;$t++){const Ft=resolveVariantFromProps(it,jt[$t]);if(Ft){const{transitionEnd:Ht,transition:Kt,...Bt}=Ft;for(const Ut in Bt){let Yt=Bt[Ut];if(Array.isArray(Yt)){const Jt=Tt?Yt.length-1:0;Yt=Yt[Jt]}Yt!==null&&(ct[Ut]=Yt)}for(const Ut in Ht)ct[Ut]=Ht[Ut]}}}return ct}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(it,g)=>g&&typeof it=="number"?g.transform(it):it,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(it,g,et){let ot="",ct=!0;for(let ut=0;ut<numTransforms;ut++){const dt=transformPropOrder[ut],ft=it[dt];if(ft===void 0)continue;let St=!0;if(typeof ft=="number"?St=ft===(dt.startsWith("scale")?1:0):St=parseFloat(ft)===0,!St||et){const kt=getValueAsType(ft,numberValueTypes[dt]);if(!St){ct=!1;const Tt=translateAlias[dt]||dt;ot+=`${Tt}(${kt}) `}et&&(g[dt]=kt)}}return ot=ot.trim(),et?ot=et(g,ct?"":ot):ct&&(ot="none"),ot}function buildHTMLStyles(it,g,et){const{style:ot,vars:ct,transformOrigin:ut}=it;let dt=!1,ft=!1;for(const St in g){const kt=g[St];if(transformProps.has(St)){dt=!0;continue}else if(isCSSVariableName(St)){ct[St]=kt;continue}else{const Tt=getValueAsType(kt,numberValueTypes[St]);St.startsWith("origin")?(ft=!0,ut[St]=Tt):ot[St]=Tt}}if(g.transform||(dt||et?ot.transform=buildTransform(g,it.transform,et):ot.transform&&(ot.transform="none")),ft){const{originX:St="50%",originY:kt="50%",originZ:Tt=0}=ut;ot.transformOrigin=`${St} ${kt} ${Tt}`}}function calcOrigin(it,g,et){return typeof it=="string"?it:px.transform(g+et*it)}function calcSVGTransformOrigin(it,g,et){const ot=calcOrigin(g,it.x,it.width),ct=calcOrigin(et,it.y,it.height);return`${ot} ${ct}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(it,g,et=1,ot=0,ct=!0){it.pathLength=1;const ut=ct?dashKeys:camelKeys;it[ut.offset]=px.transform(-ot);const dt=px.transform(g),ft=px.transform(et);it[ut.array]=`${dt} ${ft}`}function buildSVGAttrs(it,{attrX:g,attrY:et,attrScale:ot,originX:ct,originY:ut,pathLength:dt,pathSpacing:ft=1,pathOffset:St=0,...kt},Tt,Rt){if(buildHTMLStyles(it,kt,Rt),Tt){it.style.viewBox&&(it.attrs.viewBox=it.style.viewBox);return}it.attrs=it.style,it.style={};const{attrs:jt,style:$t,dimensions:Ft}=it;jt.transform&&(Ft&&($t.transform=jt.transform),delete jt.transform),Ft&&(ct!==void 0||ut!==void 0||$t.transform)&&($t.transformOrigin=calcSVGTransformOrigin(Ft,ct!==void 0?ct:.5,ut!==void 0?ut:.5)),g!==void 0&&(jt.x=g),et!==void 0&&(jt.y=et),ot!==void 0&&(jt.scale=ot),dt!==void 0&&buildSVGPath(jt,dt,ft,St,!1)}const isSVGTag=it=>typeof it=="string"&&it.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(it,g,{renderState:et,latestValues:ot})=>{frame.read(()=>{try{et.dimensions=typeof g.getBBox=="function"?g.getBBox():g.getBoundingClientRect()}catch{et.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(et,ot,isSVGTag(g.tagName),it.transformTemplate),renderSVG(g,et)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(it,g,et){for(const ot in g)!isMotionValue(g[ot])&&!isForcedMotionValue(ot,et)&&(it[ot]=g[ot])}function useInitialMotionValues({transformTemplate:it},g){return reactExports.useMemo(()=>{const et=createHtmlRenderState();return buildHTMLStyles(et,g,it),Object.assign({},et.vars,et.style)},[g])}function useStyle(it,g){const et=it.style||{},ot={};return copyRawValuesOnly(ot,et,it),Object.assign(ot,useInitialMotionValues(it,g)),ot}function useHTMLProps(it,g){const et={},ot=useStyle(it,g);return it.drag&&it.dragListener!==!1&&(et.draggable=!1,ot.userSelect=ot.WebkitUserSelect=ot.WebkitTouchCallout="none",ot.touchAction=it.drag===!0?"none":`pan-${it.drag==="x"?"y":"x"}`),it.tabIndex===void 0&&(it.onTap||it.onTapStart||it.whileTap)&&(et.tabIndex=0),et.style=ot,et}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(it){return it.startsWith("while")||it.startsWith("drag")&&it!=="draggable"||it.startsWith("layout")||it.startsWith("onTap")||it.startsWith("onPan")||it.startsWith("onLayout")||validMotionProps.has(it)}let shouldForward=it=>!isValidMotionProp(it);function loadExternalIsValidProp(it){it&&(shouldForward=g=>g.startsWith("on")?!isValidMotionProp(g):it(g))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(it,g,et){const ot={};for(const ct in it)ct==="values"&&typeof it.values=="object"||(shouldForward(ct)||et===!0&&isValidMotionProp(ct)||!g&&!isValidMotionProp(ct)||it.draggable&&ct.startsWith("onDrag"))&&(ot[ct]=it[ct]);return ot}function useSVGProps(it,g,et,ot){const ct=reactExports.useMemo(()=>{const ut=createSvgRenderState();return buildSVGAttrs(ut,g,isSVGTag(ot),it.transformTemplate),{...ut.attrs,style:{...ut.style}}},[g]);if(it.style){const ut={};copyRawValuesOnly(ut,it.style,it),ct.style={...ut,...ct.style}}return ct}function createUseRender(it=!1){return(et,ot,ct,{latestValues:ut},dt)=>{const St=(isSVGComponent(et)?useSVGProps:useHTMLProps)(ot,ut,dt,et),kt=filterProps(ot,typeof et=="string",it),Tt=et!==reactExports.Fragment?{...kt,...St,ref:ct}:{},{children:Rt}=ot,jt=reactExports.useMemo(()=>isMotionValue(Rt)?Rt.get():Rt,[Rt]);return reactExports.createElement(et,{...Tt,children:jt})}}function createMotionComponentFactory(it,g){return function(ot,{forwardMotionProps:ct}={forwardMotionProps:!1}){const dt={...isSVGComponent(ot)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:it,useRender:createUseRender(ct),createVisualElement:g,Component:ot};return createRendererMotionComponent(dt)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const it=window.matchMedia("(prefers-reduced-motion)"),g=()=>prefersReducedMotion.current=it.matches;it.addListener(g),g()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(it,g,et){for(const ot in g){const ct=g[ot],ut=et[ot];if(isMotionValue(ct))it.addValue(ot,ct);else if(isMotionValue(ut))it.addValue(ot,motionValue(ct,{owner:it}));else if(ut!==ct)if(it.hasValue(ot)){const dt=it.getValue(ot);dt.liveStyle===!0?dt.jump(ct):dt.hasAnimated||dt.set(ct)}else{const dt=it.getStaticValue(ot);it.addValue(ot,motionValue(dt!==void 0?dt:ct,{owner:it}))}}for(const ot in et)g[ot]===void 0&&it.removeValue(ot);return g}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color,complex],findValueType=it=>valueTypes.find(testValueType(it)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(g,et,ot){return{}}constructor({parent:g,props:et,presenceContext:ot,reducedMotionConfig:ct,blockInitialAnimation:ut,visualState:dt},ft={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const jt=time.now();this.renderScheduledAt<jt&&(this.renderScheduledAt=jt,frame.render(this.render,!1,!0))};const{latestValues:St,renderState:kt}=dt;this.latestValues=St,this.baseTarget={...St},this.initialValues=et.initial?{...St}:{},this.renderState=kt,this.parent=g,this.props=et,this.presenceContext=ot,this.depth=g?g.depth+1:0,this.reducedMotionConfig=ct,this.options=ft,this.blockInitialAnimation=!!ut,this.isControllingVariants=isControllingVariants(et),this.isVariantNode=isVariantNode(et),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(g&&g.current);const{willChange:Tt,...Rt}=this.scrapeMotionValuesFromProps(et,{},this);for(const jt in Rt){const $t=Rt[jt];St[jt]!==void 0&&isMotionValue($t)&&$t.set(St[jt],!1)}}mount(g){this.current=g,visualElementStore.set(g,this),this.projection&&!this.projection.instance&&this.projection.mount(g),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((et,ot)=>this.bindToMotionValue(ot,et)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(g=>g()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const g in this.events)this.events[g].clear();for(const g in this.features){const et=this.features[g];et&&(et.unmount(),et.isMounted=!1)}this.current=null}bindToMotionValue(g,et){this.valueSubscriptions.has(g)&&this.valueSubscriptions.get(g)();const ot=transformProps.has(g),ct=et.on("change",ft=>{this.latestValues[g]=ft,this.props.onUpdate&&frame.preRender(this.notifyUpdate),ot&&this.projection&&(this.projection.isTransformDirty=!0)}),ut=et.on("renderRequest",this.scheduleRender);let dt;window.MotionCheckAppearSync&&(dt=window.MotionCheckAppearSync(this,g,et)),this.valueSubscriptions.set(g,()=>{ct(),ut(),dt&&dt(),et.owner&&et.stop()})}sortNodePosition(g){return!this.current||!this.sortInstanceNodePosition||this.type!==g.type?0:this.sortInstanceNodePosition(this.current,g.current)}updateFeatures(){let g="animation";for(g in featureDefinitions){const et=featureDefinitions[g];if(!et)continue;const{isEnabled:ot,Feature:ct}=et;if(!this.features[g]&&ct&&ot(this.props)&&(this.features[g]=new ct(this)),this.features[g]){const ut=this.features[g];ut.isMounted?ut.update():(ut.mount(),ut.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(g){return this.latestValues[g]}setStaticValue(g,et){this.latestValues[g]=et}update(g,et){(g.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=g,this.prevPresenceContext=this.presenceContext,this.presenceContext=et;for(let ot=0;ot<propEventHandlers.length;ot++){const ct=propEventHandlers[ot];this.propEventSubscriptions[ct]&&(this.propEventSubscriptions[ct](),delete this.propEventSubscriptions[ct]);const ut="on"+ct,dt=g[ut];dt&&(this.propEventSubscriptions[ct]=this.on(ct,dt))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(g,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(g){return this.props.variants?this.props.variants[g]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(g){const et=this.getClosestVariantNode();if(et)return et.variantChildren&&et.variantChildren.add(g),()=>et.variantChildren.delete(g)}addValue(g,et){const ot=this.values.get(g);et!==ot&&(ot&&this.removeValue(g),this.bindToMotionValue(g,et),this.values.set(g,et),this.latestValues[g]=et.get())}removeValue(g){this.values.delete(g);const et=this.valueSubscriptions.get(g);et&&(et(),this.valueSubscriptions.delete(g)),delete this.latestValues[g],this.removeValueFromRenderState(g,this.renderState)}hasValue(g){return this.values.has(g)}getValue(g,et){if(this.props.values&&this.props.values[g])return this.props.values[g];let ot=this.values.get(g);return ot===void 0&&et!==void 0&&(ot=motionValue(et===null?void 0:et,{owner:this}),this.addValue(g,ot)),ot}readValue(g,et){var ot;let ct=this.latestValues[g]!==void 0||!this.current?this.latestValues[g]:(ot=this.getBaseTargetFromProps(this.props,g))!==null&&ot!==void 0?ot:this.readValueFromInstance(this.current,g,this.options);return ct!=null&&(typeof ct=="string"&&(isNumericalString(ct)||isZeroValueString(ct))?ct=parseFloat(ct):!findValueType(ct)&&complex.test(et)&&(ct=getAnimatableNone(g,et)),this.setBaseTarget(g,isMotionValue(ct)?ct.get():ct)),isMotionValue(ct)?ct.get():ct}setBaseTarget(g,et){this.baseTarget[g]=et}getBaseTarget(g){var et;const{initial:ot}=this.props;let ct;if(typeof ot=="string"||typeof ot=="object"){const dt=resolveVariantFromProps(this.props,ot,(et=this.presenceContext)===null||et===void 0?void 0:et.custom);dt&&(ct=dt[g])}if(ot&&ct!==void 0)return ct;const ut=this.getBaseTargetFromProps(this.props,g);return ut!==void 0&&!isMotionValue(ut)?ut:this.initialValues[g]!==void 0&&ct===void 0?void 0:this.baseTarget[g]}on(g,et){return this.events[g]||(this.events[g]=new SubscriptionManager),this.events[g].add(et)}notify(g,...et){this.events[g]&&this.events[g].notify(...et)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(g,et){return g.compareDocumentPosition(et)&2?1:-1}getBaseTargetFromProps(g,et){return g.style?g.style[et]:void 0}removeValueFromRenderState(g,{vars:et,style:ot}){delete et[g],delete ot[g]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:g}=this.props;isMotionValue(g)&&(this.childSubscription=g.on("change",et=>{this.current&&(this.current.textContent=`${et}`)}))}}function getComputedStyle$1(it){return window.getComputedStyle(it)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}else{const ot=getComputedStyle$1(g),ct=(isCSSVariableName(et)?ot.getPropertyValue(et):ot[et])||0;return typeof ct=="string"?ct.trim():ct}}measureInstanceViewportBox(g,{transformPagePoint:et}){return measureViewportBox(g,et)}build(g,et,ot){buildHTMLStyles(g,et,ot.transformTemplate)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps$1(g,et,ot)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(g,et){return g[et]}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}return et=camelCaseAttributes.has(et)?et:camelToDash(et),g.getAttribute(et)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps(g,et,ot)}build(g,et,ot){buildSVGAttrs(g,et,this.isSVGTag,ot.transformTemplate)}renderInstance(g,et,ot,ct){renderSVG(g,et,ot,ct)}mount(g){this.isSVGTag=isSVGTag(g.tagName),super.mount(g)}}const createDomVisualElement=(it,g)=>isSVGComponent(it)?new SVGVisualElement(g):new HTMLVisualElement(g,{allowProjection:it!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(g){const et=this.props.childRef.current;if(et&&g.isPresent&&!this.props.isPresent){const ot=this.props.sizeRef.current;ot.height=et.offsetHeight||0,ot.width=et.offsetWidth||0,ot.top=et.offsetTop,ot.left=et.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:it,isPresent:g}){const et=reactExports.useId(),ot=reactExports.useRef(null),ct=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:ut}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:dt,height:ft,top:St,left:kt}=ct.current;if(g||!ot.current||!dt||!ft)return;ot.current.dataset.motionPopId=et;const Tt=document.createElement("style");return ut&&(Tt.nonce=ut),document.head.appendChild(Tt),Tt.sheet&&Tt.sheet.insertRule(`
          [data-motion-pop-id="${et}"] {
            position: absolute !important;
            width: ${dt}px !important;
            height: ${ft}px !important;
            top: ${St}px !important;
            left: ${kt}px !important;
          }
        `),()=>{document.head.removeChild(Tt)}},[g]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:g,childRef:ot,sizeRef:ct,children:reactExports.cloneElement(it,{ref:ot})})}const PresenceChild=({children:it,initial:g,isPresent:et,onExitComplete:ot,custom:ct,presenceAffectsLayout:ut,mode:dt})=>{const ft=useConstant(newChildrenMap),St=reactExports.useId(),kt=reactExports.useCallback(Rt=>{ft.set(Rt,!0);for(const jt of ft.values())if(!jt)return;ot&&ot()},[ft,ot]),Tt=reactExports.useMemo(()=>({id:St,initial:g,isPresent:et,custom:ct,onExitComplete:kt,register:Rt=>(ft.set(Rt,!1),()=>ft.delete(Rt))}),ut?[Math.random(),kt]:[et,kt]);return reactExports.useMemo(()=>{ft.forEach((Rt,jt)=>ft.set(jt,!1))},[et]),reactExports.useEffect(()=>{!et&&!ft.size&&ot&&ot()},[et]),dt==="popLayout"&&(it=jsxRuntimeExports.jsx(PopChild,{isPresent:et,children:it})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Tt,children:it})};function newChildrenMap(){return new Map}const getChildKey=it=>it.key||"";function onlyElements(it){const g=[];return reactExports.Children.forEach(it,et=>{reactExports.isValidElement(et)&&g.push(et)}),g}const AnimatePresence=({children:it,exitBeforeEnter:g,custom:et,initial:ot=!0,onExitComplete:ct,presenceAffectsLayout:ut=!0,mode:dt="sync"})=>{const ft=reactExports.useMemo(()=>onlyElements(it),[it]),St=ft.map(getChildKey),kt=reactExports.useRef(!0),Tt=reactExports.useRef(ft),Rt=useConstant(()=>new Map),[jt,$t]=reactExports.useState(ft),[Ft,Ht]=reactExports.useState(ft);useIsomorphicLayoutEffect$1(()=>{kt.current=!1,Tt.current=ft;for(let Ut=0;Ut<Ft.length;Ut++){const Yt=getChildKey(Ft[Ut]);St.includes(Yt)?Rt.delete(Yt):Rt.get(Yt)!==!0&&Rt.set(Yt,!1)}},[Ft,St.length,St.join("-")]);const Kt=[];if(ft!==jt){let Ut=[...ft];for(let Yt=0;Yt<Ft.length;Yt++){const Jt=Ft[Yt],Zt=getChildKey(Jt);St.includes(Zt)||(Ut.splice(Yt,0,Jt),Kt.push(Jt))}dt==="wait"&&Kt.length&&(Ut=Kt),Ht(onlyElements(Ut)),$t(ft);return}const{forceRender:Bt}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Ft.map(Ut=>{const Yt=getChildKey(Ut),Jt=ft===Ft||St.includes(Yt),Zt=()=>{if(Rt.has(Yt))Rt.set(Yt,!0);else return;let en=!0;Rt.forEach(tn=>{tn||(en=!1)}),en&&(Bt==null||Bt(),Ht(Tt.current),ct&&ct())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:Jt,initial:!kt.current||ot?void 0:!1,custom:Jt?void 0:et,presenceAffectsLayout:ut,mode:dt,onExitComplete:Jt?void 0:Zt,children:Ut},Yt)})})};function useMotionValue(it){const g=useConstant(()=>motionValue(it)),{isStatic:et}=reactExports.useContext(MotionConfigContext);if(et){const[,ot]=reactExports.useState(it);reactExports.useEffect(()=>g.on("change",ot),[])}return g}function toNumber(it){return typeof it=="number"?it:parseFloat(it)}function useSpring(it,g={}){const{isStatic:et}=reactExports.useContext(MotionConfigContext),ot=reactExports.useRef(null),ct=useMotionValue(isMotionValue(it)?toNumber(it.get()):it),ut=reactExports.useRef(ct.get()),dt=reactExports.useRef(()=>{}),ft=()=>{const kt=ot.current;kt&&kt.time===0&&kt.sample(frameData.delta),St(),ot.current=animateValue({keyframes:[ct.get(),ut.current],velocity:ct.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...g,onUpdate:dt.current})},St=()=>{ot.current&&ot.current.stop()};return reactExports.useInsertionEffect(()=>ct.attach((kt,Tt)=>et?Tt(kt):(ut.current=kt,dt.current=Tt,frame.update(ft),ct.get()),St),[JSON.stringify(g)]),useIsomorphicLayoutEffect$1(()=>{if(isMotionValue(it))return it.on("change",kt=>ct.set(toNumber(kt)))},[ct]),ct}function bind$1(it,g){return function(){return it.apply(g,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(it=>g=>{const et=toString.call(g);return it[et]||(it[et]=et.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=it=>(it=it.toLowerCase(),g=>kindOf(g)===it),typeOfTest=it=>g=>typeof g===it,{isArray:isArray$4}=Array,isUndefined=typeOfTest("undefined");function isBuffer$3(it){return it!==null&&!isUndefined(it)&&it.constructor!==null&&!isUndefined(it.constructor)&&isFunction$4(it.constructor.isBuffer)&&it.constructor.isBuffer(it)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(it){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(it):g=it&&it.buffer&&isArrayBuffer$1(it.buffer),g}const isString$1=typeOfTest("string"),isFunction$4=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$3=it=>it!==null&&typeof it=="object",isBoolean=it=>it===!0||it===!1,isPlainObject$1=it=>{if(kindOf(it)!=="object")return!1;const g=getPrototypeOf(it);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in it)&&!(Symbol.iterator in it)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=it=>isObject$3(it)&&isFunction$4(it.pipe),isFormData=it=>{let g;return it&&(typeof FormData=="function"&&it instanceof FormData||isFunction$4(it.append)&&((g=kindOf(it))==="formdata"||g==="object"&&isFunction$4(it.toString)&&it.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=it=>it.trim?it.trim():it.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(it,g,{allOwnKeys:et=!1}={}){if(it===null||typeof it>"u")return;let ot,ct;if(typeof it!="object"&&(it=[it]),isArray$4(it))for(ot=0,ct=it.length;ot<ct;ot++)g.call(null,it[ot],ot,it);else{const ut=et?Object.getOwnPropertyNames(it):Object.keys(it),dt=ut.length;let ft;for(ot=0;ot<dt;ot++)ft=ut[ot],g.call(null,it[ft],ft,it)}}function findKey(it,g){g=g.toLowerCase();const et=Object.keys(it);let ot=et.length,ct;for(;ot-- >0;)if(ct=et[ot],g===ct.toLowerCase())return ct;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=it=>!isUndefined(it)&&it!==_global;function merge(){const{caseless:it}=isContextDefined(this)&&this||{},g={},et=(ot,ct)=>{const ut=it&&findKey(g,ct)||ct;isPlainObject$1(g[ut])&&isPlainObject$1(ot)?g[ut]=merge(g[ut],ot):isPlainObject$1(ot)?g[ut]=merge({},ot):isArray$4(ot)?g[ut]=ot.slice():g[ut]=ot};for(let ot=0,ct=arguments.length;ot<ct;ot++)arguments[ot]&&forEach$1(arguments[ot],et);return g}const extend=(it,g,et,{allOwnKeys:ot}={})=>(forEach$1(g,(ct,ut)=>{et&&isFunction$4(ct)?it[ut]=bind$1(ct,et):it[ut]=ct},{allOwnKeys:ot}),it),stripBOM=it=>(it.charCodeAt(0)===65279&&(it=it.slice(1)),it),inherits=(it,g,et,ot)=>{it.prototype=Object.create(g.prototype,ot),it.prototype.constructor=it,Object.defineProperty(it,"super",{value:g.prototype}),et&&Object.assign(it.prototype,et)},toFlatObject=(it,g,et,ot)=>{let ct,ut,dt;const ft={};if(g=g||{},it==null)return g;do{for(ct=Object.getOwnPropertyNames(it),ut=ct.length;ut-- >0;)dt=ct[ut],(!ot||ot(dt,it,g))&&!ft[dt]&&(g[dt]=it[dt],ft[dt]=!0);it=et!==!1&&getPrototypeOf(it)}while(it&&(!et||et(it,g))&&it!==Object.prototype);return g},endsWith=(it,g,et)=>{it=String(it),(et===void 0||et>it.length)&&(et=it.length),et-=g.length;const ot=it.indexOf(g,et);return ot!==-1&&ot===et},toArray=it=>{if(!it)return null;if(isArray$4(it))return it;let g=it.length;if(!isNumber$1(g))return null;const et=new Array(g);for(;g-- >0;)et[g]=it[g];return et},isTypedArray$3=(it=>g=>it&&g instanceof it)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(it,g)=>{const ot=(it&&it[Symbol.iterator]).call(it);let ct;for(;(ct=ot.next())&&!ct.done;){const ut=ct.value;g.call(it,ut[0],ut[1])}},matchAll=(it,g)=>{let et;const ot=[];for(;(et=it.exec(g))!==null;)ot.push(et);return ot},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=it=>it.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(et,ot,ct){return ot.toUpperCase()+ct}),hasOwnProperty$9=(({hasOwnProperty:it})=>(g,et)=>it.call(g,et))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(it,g)=>{const et=Object.getOwnPropertyDescriptors(it),ot={};forEach$1(et,(ct,ut)=>{let dt;(dt=g(ct,ut,it))!==!1&&(ot[ut]=dt||ct)}),Object.defineProperties(it,ot)},freezeMethods=it=>{reduceDescriptors(it,(g,et)=>{if(isFunction$4(it)&&["arguments","caller","callee"].indexOf(et)!==-1)return!1;const ot=it[et];if(isFunction$4(ot)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+et+"'")})}})},toObjectSet=(it,g)=>{const et={},ot=ct=>{ct.forEach(ut=>{et[ut]=!0})};return isArray$4(it)?ot(it):ot(String(it).split(g)),et},noop$1=()=>{},toFiniteNumber=(it,g)=>it!=null&&Number.isFinite(it=+it)?it:g,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET={DIGIT:DIGIT$1,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT$1},generateString=(it=16,g=ALPHABET.ALPHA_DIGIT)=>{let et="";const{length:ot}=g;for(;it--;)et+=g[Math.random()*ot|0];return et};function isSpecCompliantForm(it){return!!(it&&isFunction$4(it.append)&&it[Symbol.toStringTag]==="FormData"&&it[Symbol.iterator])}const toJSONObject=it=>{const g=new Array(10),et=(ot,ct)=>{if(isObject$3(ot)){if(g.indexOf(ot)>=0)return;if(!("toJSON"in ot)){g[ct]=ot;const ut=isArray$4(ot)?[]:{};return forEach$1(ot,(dt,ft)=>{const St=et(dt,ct+1);!isUndefined(St)&&(ut[ft]=St)}),g[ct]=void 0,ut}}return ot};return et(it,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=it=>it&&(isObject$3(it)||isFunction$4(it))&&isFunction$4(it.then)&&isFunction$4(it.catch),_setImmediate=((it,g)=>it?setImmediate:g?((et,ot)=>(_global.addEventListener("message",({source:ct,data:ut})=>{ct===_global&&ut===et&&ot.length&&ot.shift()()},!1),ct=>{ot.push(ct),_global.postMessage(et,"*")}))(`axios@${Math.random()}`,[]):et=>setTimeout(et))(typeof setImmediate=="function",isFunction$4(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$4,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$3,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$3,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$4,isStream,isURLSearchParams,isTypedArray:isTypedArray$3,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$9,hasOwnProp:hasOwnProperty$9,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(it,g,et,ot,ct){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=it,this.name="AxiosError",g&&(this.code=g),et&&(this.config=et),ot&&(this.request=ot),ct&&(this.response=ct,this.status=ct.status?ct.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(it=>{descriptors[it]={value:it}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(it,g,et,ot,ct,ut)=>{const dt=Object.create(prototype$1);return utils$1.toFlatObject(it,dt,function(St){return St!==Error.prototype},ft=>ft!=="isAxiosError"),AxiosError.call(dt,it.message,g,et,ot,ct),dt.cause=it,dt.name=it.name,ut&&Object.assign(dt,ut),dt};const httpAdapter=null;function isVisitable(it){return utils$1.isPlainObject(it)||utils$1.isArray(it)}function removeBrackets(it){return utils$1.endsWith(it,"[]")?it.slice(0,-2):it}function renderKey(it,g,et){return it?it.concat(g).map(function(ct,ut){return ct=removeBrackets(ct),!et&&ut?"["+ct+"]":ct}).join(et?".":""):g}function isFlatArray(it){return utils$1.isArray(it)&&!it.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(g){return/^is[A-Z]/.test(g)});function toFormData(it,g,et){if(!utils$1.isObject(it))throw new TypeError("target must be an object");g=g||new FormData,et=utils$1.toFlatObject(et,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ht,Kt){return!utils$1.isUndefined(Kt[Ht])});const ot=et.metaTokens,ct=et.visitor||Tt,ut=et.dots,dt=et.indexes,St=(et.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(g);if(!utils$1.isFunction(ct))throw new TypeError("visitor must be a function");function kt(Ft){if(Ft===null)return"";if(utils$1.isDate(Ft))return Ft.toISOString();if(!St&&utils$1.isBlob(Ft))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Ft)||utils$1.isTypedArray(Ft)?St&&typeof Blob=="function"?new Blob([Ft]):Buffer.from(Ft):Ft}function Tt(Ft,Ht,Kt){let Bt=Ft;if(Ft&&!Kt&&typeof Ft=="object"){if(utils$1.endsWith(Ht,"{}"))Ht=ot?Ht:Ht.slice(0,-2),Ft=JSON.stringify(Ft);else if(utils$1.isArray(Ft)&&isFlatArray(Ft)||(utils$1.isFileList(Ft)||utils$1.endsWith(Ht,"[]"))&&(Bt=utils$1.toArray(Ft)))return Ht=removeBrackets(Ht),Bt.forEach(function(Yt,Jt){!(utils$1.isUndefined(Yt)||Yt===null)&&g.append(dt===!0?renderKey([Ht],Jt,ut):dt===null?Ht:Ht+"[]",kt(Yt))}),!1}return isVisitable(Ft)?!0:(g.append(renderKey(Kt,Ht,ut),kt(Ft)),!1)}const Rt=[],jt=Object.assign(predicates,{defaultVisitor:Tt,convertValue:kt,isVisitable});function $t(Ft,Ht){if(!utils$1.isUndefined(Ft)){if(Rt.indexOf(Ft)!==-1)throw Error("Circular reference detected in "+Ht.join("."));Rt.push(Ft),utils$1.forEach(Ft,function(Bt,Ut){(!(utils$1.isUndefined(Bt)||Bt===null)&&ct.call(g,Bt,utils$1.isString(Ut)?Ut.trim():Ut,Ht,jt))===!0&&$t(Bt,Ht?Ht.concat(Ut):[Ut])}),Rt.pop()}}if(!utils$1.isObject(it))throw new TypeError("data must be an object");return $t(it),g}function encode$1(it){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(it).replace(/[!'()~]|%20|%00/g,function(ot){return g[ot]})}function AxiosURLSearchParams(it,g){this._pairs=[],it&&toFormData(it,this,g)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(g,et){this._pairs.push([g,et])};prototype.toString=function(g){const et=g?function(ot){return g.call(this,ot,encode$1)}:encode$1;return this._pairs.map(function(ct){return et(ct[0])+"="+et(ct[1])},"").join("&")};function encode(it){return encodeURIComponent(it).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(it,g,et){if(!g)return it;const ot=et&&et.encode||encode;utils$1.isFunction(et)&&(et={serialize:et});const ct=et&&et.serialize;let ut;if(ct?ut=ct(g,et):ut=utils$1.isURLSearchParams(g)?g.toString():new AxiosURLSearchParams(g,et).toString(ot),ut){const dt=it.indexOf("#");dt!==-1&&(it=it.slice(0,dt)),it+=(it.indexOf("?")===-1?"?":"&")+ut}return it}class InterceptorManager{constructor(){this.handlers=[]}use(g,et,ot){return this.handlers.push({fulfilled:g,rejected:et,synchronous:ot?ot.synchronous:!1,runWhen:ot?ot.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){utils$1.forEach(this.handlers,function(ot){ot!==null&&g(ot)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(it,g){return toFormData(it,new platform.classes.URLSearchParams,Object.assign({visitor:function(et,ot,ct,ut){return platform.isNode&&utils$1.isBuffer(et)?(this.append(ot,et.toString("base64")),!1):ut.defaultVisitor.apply(this,arguments)}},g))}function parsePropPath(it){return utils$1.matchAll(/\w+|\[(\w*)]/g,it).map(g=>g[0]==="[]"?"":g[1]||g[0])}function arrayToObject(it){const g={},et=Object.keys(it);let ot;const ct=et.length;let ut;for(ot=0;ot<ct;ot++)ut=et[ot],g[ut]=it[ut];return g}function formDataToJSON(it){function g(et,ot,ct,ut){let dt=et[ut++];if(dt==="__proto__")return!0;const ft=Number.isFinite(+dt),St=ut>=et.length;return dt=!dt&&utils$1.isArray(ct)?ct.length:dt,St?(utils$1.hasOwnProp(ct,dt)?ct[dt]=[ct[dt],ot]:ct[dt]=ot,!ft):((!ct[dt]||!utils$1.isObject(ct[dt]))&&(ct[dt]=[]),g(et,ot,ct[dt],ut)&&utils$1.isArray(ct[dt])&&(ct[dt]=arrayToObject(ct[dt])),!ft)}if(utils$1.isFormData(it)&&utils$1.isFunction(it.entries)){const et={};return utils$1.forEachEntry(it,(ot,ct)=>{g(parsePropPath(ot),ct,et,0)}),et}return null}function stringifySafely(it,g,et){if(utils$1.isString(it))try{return(g||JSON.parse)(it),utils$1.trim(it)}catch(ot){if(ot.name!=="SyntaxError")throw ot}return(et||JSON.stringify)(it)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(g,et){const ot=et.getContentType()||"",ct=ot.indexOf("application/json")>-1,ut=utils$1.isObject(g);if(ut&&utils$1.isHTMLForm(g)&&(g=new FormData(g)),utils$1.isFormData(g))return ct?JSON.stringify(formDataToJSON(g)):g;if(utils$1.isArrayBuffer(g)||utils$1.isBuffer(g)||utils$1.isStream(g)||utils$1.isFile(g)||utils$1.isBlob(g)||utils$1.isReadableStream(g))return g;if(utils$1.isArrayBufferView(g))return g.buffer;if(utils$1.isURLSearchParams(g))return et.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let ft;if(ut){if(ot.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(g,this.formSerializer).toString();if((ft=utils$1.isFileList(g))||ot.indexOf("multipart/form-data")>-1){const St=this.env&&this.env.FormData;return toFormData(ft?{"files[]":g}:g,St&&new St,this.formSerializer)}}return ut||ct?(et.setContentType("application/json",!1),stringifySafely(g)):g}],transformResponse:[function(g){const et=this.transitional||defaults$1.transitional,ot=et&&et.forcedJSONParsing,ct=this.responseType==="json";if(utils$1.isResponse(g)||utils$1.isReadableStream(g))return g;if(g&&utils$1.isString(g)&&(ot&&!this.responseType||ct)){const dt=!(et&&et.silentJSONParsing)&&ct;try{return JSON.parse(g)}catch(ft){if(dt)throw ft.name==="SyntaxError"?AxiosError.from(ft,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):ft}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],it=>{defaults$1.headers[it]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=it=>{const g={};let et,ot,ct;return it&&it.split(`
`).forEach(function(dt){ct=dt.indexOf(":"),et=dt.substring(0,ct).trim().toLowerCase(),ot=dt.substring(ct+1).trim(),!(!et||g[et]&&ignoreDuplicateOf[et])&&(et==="set-cookie"?g[et]?g[et].push(ot):g[et]=[ot]:g[et]=g[et]?g[et]+", "+ot:ot)}),g},$internals=Symbol("internals");function normalizeHeader(it){return it&&String(it).trim().toLowerCase()}function normalizeValue(it){return it===!1||it==null?it:utils$1.isArray(it)?it.map(normalizeValue):String(it)}function parseTokens(it){const g=Object.create(null),et=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let ot;for(;ot=et.exec(it);)g[ot[1]]=ot[2];return g}const isValidHeaderName=it=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(it.trim());function matchHeaderValue(it,g,et,ot,ct){if(utils$1.isFunction(ot))return ot.call(this,g,et);if(ct&&(g=et),!!utils$1.isString(g)){if(utils$1.isString(ot))return g.indexOf(ot)!==-1;if(utils$1.isRegExp(ot))return ot.test(g)}}function formatHeader(it){return it.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,et,ot)=>et.toUpperCase()+ot)}function buildAccessors(it,g){const et=utils$1.toCamelCase(" "+g);["get","set","has"].forEach(ot=>{Object.defineProperty(it,ot+et,{value:function(ct,ut,dt){return this[ot].call(this,g,ct,ut,dt)},configurable:!0})})}class AxiosHeaders{constructor(g){g&&this.set(g)}set(g,et,ot){const ct=this;function ut(ft,St,kt){const Tt=normalizeHeader(St);if(!Tt)throw new Error("header name must be a non-empty string");const Rt=utils$1.findKey(ct,Tt);(!Rt||ct[Rt]===void 0||kt===!0||kt===void 0&&ct[Rt]!==!1)&&(ct[Rt||St]=normalizeValue(ft))}const dt=(ft,St)=>utils$1.forEach(ft,(kt,Tt)=>ut(kt,Tt,St));if(utils$1.isPlainObject(g)||g instanceof this.constructor)dt(g,et);else if(utils$1.isString(g)&&(g=g.trim())&&!isValidHeaderName(g))dt(parseHeaders(g),et);else if(utils$1.isHeaders(g))for(const[ft,St]of g.entries())ut(St,ft,ot);else g!=null&&ut(et,g,ot);return this}get(g,et){if(g=normalizeHeader(g),g){const ot=utils$1.findKey(this,g);if(ot){const ct=this[ot];if(!et)return ct;if(et===!0)return parseTokens(ct);if(utils$1.isFunction(et))return et.call(this,ct,ot);if(utils$1.isRegExp(et))return et.exec(ct);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,et){if(g=normalizeHeader(g),g){const ot=utils$1.findKey(this,g);return!!(ot&&this[ot]!==void 0&&(!et||matchHeaderValue(this,this[ot],ot,et)))}return!1}delete(g,et){const ot=this;let ct=!1;function ut(dt){if(dt=normalizeHeader(dt),dt){const ft=utils$1.findKey(ot,dt);ft&&(!et||matchHeaderValue(ot,ot[ft],ft,et))&&(delete ot[ft],ct=!0)}}return utils$1.isArray(g)?g.forEach(ut):ut(g),ct}clear(g){const et=Object.keys(this);let ot=et.length,ct=!1;for(;ot--;){const ut=et[ot];(!g||matchHeaderValue(this,this[ut],ut,g,!0))&&(delete this[ut],ct=!0)}return ct}normalize(g){const et=this,ot={};return utils$1.forEach(this,(ct,ut)=>{const dt=utils$1.findKey(ot,ut);if(dt){et[dt]=normalizeValue(ct),delete et[ut];return}const ft=g?formatHeader(ut):String(ut).trim();ft!==ut&&delete et[ut],et[ft]=normalizeValue(ct),ot[ft]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const et=Object.create(null);return utils$1.forEach(this,(ot,ct)=>{ot!=null&&ot!==!1&&(et[ct]=g&&utils$1.isArray(ot)?ot.join(", "):ot)}),et}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,et])=>g+": "+et).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...et){const ot=new this(g);return et.forEach(ct=>ot.set(ct)),ot}static accessor(g){const ot=(this[$internals]=this[$internals]={accessors:{}}).accessors,ct=this.prototype;function ut(dt){const ft=normalizeHeader(dt);ot[ft]||(buildAccessors(ct,dt),ot[ft]=!0)}return utils$1.isArray(g)?g.forEach(ut):ut(g),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:it},g)=>{let et=g[0].toUpperCase()+g.slice(1);return{get:()=>it,set(ot){this[et]=ot}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(it,g){const et=this||defaults$2,ot=g||et,ct=AxiosHeaders$1.from(ot.headers);let ut=ot.data;return utils$1.forEach(it,function(ft){ut=ft.call(et,ut,ct.normalize(),g?g.status:void 0)}),ct.normalize(),ut}function isCancel(it){return!!(it&&it.__CANCEL__)}function CanceledError(it,g,et){AxiosError.call(this,it??"canceled",AxiosError.ERR_CANCELED,g,et),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(it,g,et){const ot=et.config.validateStatus;!et.status||!ot||ot(et.status)?it(et):g(new AxiosError("Request failed with status code "+et.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(et.status/100)-4],et.config,et.request,et))}function parseProtocol(it){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(it);return g&&g[1]||""}function speedometer(it,g){it=it||10;const et=new Array(it),ot=new Array(it);let ct=0,ut=0,dt;return g=g!==void 0?g:1e3,function(St){const kt=Date.now(),Tt=ot[ut];dt||(dt=kt),et[ct]=St,ot[ct]=kt;let Rt=ut,jt=0;for(;Rt!==ct;)jt+=et[Rt++],Rt=Rt%it;if(ct=(ct+1)%it,ct===ut&&(ut=(ut+1)%it),kt-dt<g)return;const $t=Tt&&kt-Tt;return $t?Math.round(jt*1e3/$t):void 0}}function throttle(it,g){let et=0,ot=1e3/g,ct,ut;const dt=(kt,Tt=Date.now())=>{et=Tt,ct=null,ut&&(clearTimeout(ut),ut=null),it.apply(null,kt)};return[(...kt)=>{const Tt=Date.now(),Rt=Tt-et;Rt>=ot?dt(kt,Tt):(ct=kt,ut||(ut=setTimeout(()=>{ut=null,dt(ct)},ot-Rt)))},()=>ct&&dt(ct)]}const progressEventReducer=(it,g,et=3)=>{let ot=0;const ct=speedometer(50,250);return throttle(ut=>{const dt=ut.loaded,ft=ut.lengthComputable?ut.total:void 0,St=dt-ot,kt=ct(St),Tt=dt<=ft;ot=dt;const Rt={loaded:dt,total:ft,progress:ft?dt/ft:void 0,bytes:St,rate:kt||void 0,estimated:kt&&ft&&Tt?(ft-dt)/kt:void 0,event:ut,lengthComputable:ft!=null,[g?"download":"upload"]:!0};it(Rt)},et)},progressEventDecorator=(it,g)=>{const et=it!=null;return[ot=>g[0]({lengthComputable:et,total:it,loaded:ot}),g[1]]},asyncDecorator=it=>(...g)=>utils$1.asap(()=>it(...g)),isURLSameOrigin=platform.hasStandardBrowserEnv?((it,g)=>et=>(et=new URL(et,platform.origin),it.protocol===et.protocol&&it.host===et.host&&(g||it.port===et.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(it,g,et,ot,ct,ut){const dt=[it+"="+encodeURIComponent(g)];utils$1.isNumber(et)&&dt.push("expires="+new Date(et).toGMTString()),utils$1.isString(ot)&&dt.push("path="+ot),utils$1.isString(ct)&&dt.push("domain="+ct),ut===!0&&dt.push("secure"),document.cookie=dt.join("; ")},read(it){const g=document.cookie.match(new RegExp("(^|;\\s*)("+it+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(it){this.write(it,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(it){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(it)}function combineURLs(it,g){return g?it.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):it}function buildFullPath(it,g){return it&&!isAbsoluteURL(g)?combineURLs(it,g):g}const headersToObject=it=>it instanceof AxiosHeaders$1?{...it}:it;function mergeConfig(it,g){g=g||{};const et={};function ot(kt,Tt,Rt,jt){return utils$1.isPlainObject(kt)&&utils$1.isPlainObject(Tt)?utils$1.merge.call({caseless:jt},kt,Tt):utils$1.isPlainObject(Tt)?utils$1.merge({},Tt):utils$1.isArray(Tt)?Tt.slice():Tt}function ct(kt,Tt,Rt,jt){if(utils$1.isUndefined(Tt)){if(!utils$1.isUndefined(kt))return ot(void 0,kt,Rt,jt)}else return ot(kt,Tt,Rt,jt)}function ut(kt,Tt){if(!utils$1.isUndefined(Tt))return ot(void 0,Tt)}function dt(kt,Tt){if(utils$1.isUndefined(Tt)){if(!utils$1.isUndefined(kt))return ot(void 0,kt)}else return ot(void 0,Tt)}function ft(kt,Tt,Rt){if(Rt in g)return ot(kt,Tt);if(Rt in it)return ot(void 0,kt)}const St={url:ut,method:ut,data:ut,baseURL:dt,transformRequest:dt,transformResponse:dt,paramsSerializer:dt,timeout:dt,timeoutMessage:dt,withCredentials:dt,withXSRFToken:dt,adapter:dt,responseType:dt,xsrfCookieName:dt,xsrfHeaderName:dt,onUploadProgress:dt,onDownloadProgress:dt,decompress:dt,maxContentLength:dt,maxBodyLength:dt,beforeRedirect:dt,transport:dt,httpAgent:dt,httpsAgent:dt,cancelToken:dt,socketPath:dt,responseEncoding:dt,validateStatus:ft,headers:(kt,Tt,Rt)=>ct(headersToObject(kt),headersToObject(Tt),Rt,!0)};return utils$1.forEach(Object.keys(Object.assign({},it,g)),function(Tt){const Rt=St[Tt]||ct,jt=Rt(it[Tt],g[Tt],Tt);utils$1.isUndefined(jt)&&Rt!==ft||(et[Tt]=jt)}),et}const resolveConfig=it=>{const g=mergeConfig({},it);let{data:et,withXSRFToken:ot,xsrfHeaderName:ct,xsrfCookieName:ut,headers:dt,auth:ft}=g;g.headers=dt=AxiosHeaders$1.from(dt),g.url=buildURL(buildFullPath(g.baseURL,g.url),it.params,it.paramsSerializer),ft&&dt.set("Authorization","Basic "+btoa((ft.username||"")+":"+(ft.password?unescape(encodeURIComponent(ft.password)):"")));let St;if(utils$1.isFormData(et)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)dt.setContentType(void 0);else if((St=dt.getContentType())!==!1){const[kt,...Tt]=St?St.split(";").map(Rt=>Rt.trim()).filter(Boolean):[];dt.setContentType([kt||"multipart/form-data",...Tt].join("; "))}}if(platform.hasStandardBrowserEnv&&(ot&&utils$1.isFunction(ot)&&(ot=ot(g)),ot||ot!==!1&&isURLSameOrigin(g.url))){const kt=ct&&ut&&cookies.read(ut);kt&&dt.set(ct,kt)}return g},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(it){return new Promise(function(et,ot){const ct=resolveConfig(it);let ut=ct.data;const dt=AxiosHeaders$1.from(ct.headers).normalize();let{responseType:ft,onUploadProgress:St,onDownloadProgress:kt}=ct,Tt,Rt,jt,$t,Ft;function Ht(){$t&&$t(),Ft&&Ft(),ct.cancelToken&&ct.cancelToken.unsubscribe(Tt),ct.signal&&ct.signal.removeEventListener("abort",Tt)}let Kt=new XMLHttpRequest;Kt.open(ct.method.toUpperCase(),ct.url,!0),Kt.timeout=ct.timeout;function Bt(){if(!Kt)return;const Yt=AxiosHeaders$1.from("getAllResponseHeaders"in Kt&&Kt.getAllResponseHeaders()),Zt={data:!ft||ft==="text"||ft==="json"?Kt.responseText:Kt.response,status:Kt.status,statusText:Kt.statusText,headers:Yt,config:it,request:Kt};settle(function(tn){et(tn),Ht()},function(tn){ot(tn),Ht()},Zt),Kt=null}"onloadend"in Kt?Kt.onloadend=Bt:Kt.onreadystatechange=function(){!Kt||Kt.readyState!==4||Kt.status===0&&!(Kt.responseURL&&Kt.responseURL.indexOf("file:")===0)||setTimeout(Bt)},Kt.onabort=function(){Kt&&(ot(new AxiosError("Request aborted",AxiosError.ECONNABORTED,it,Kt)),Kt=null)},Kt.onerror=function(){ot(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,Kt)),Kt=null},Kt.ontimeout=function(){let Jt=ct.timeout?"timeout of "+ct.timeout+"ms exceeded":"timeout exceeded";const Zt=ct.transitional||transitionalDefaults;ct.timeoutErrorMessage&&(Jt=ct.timeoutErrorMessage),ot(new AxiosError(Jt,Zt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,it,Kt)),Kt=null},ut===void 0&&dt.setContentType(null),"setRequestHeader"in Kt&&utils$1.forEach(dt.toJSON(),function(Jt,Zt){Kt.setRequestHeader(Zt,Jt)}),utils$1.isUndefined(ct.withCredentials)||(Kt.withCredentials=!!ct.withCredentials),ft&&ft!=="json"&&(Kt.responseType=ct.responseType),kt&&([jt,Ft]=progressEventReducer(kt,!0),Kt.addEventListener("progress",jt)),St&&Kt.upload&&([Rt,$t]=progressEventReducer(St),Kt.upload.addEventListener("progress",Rt),Kt.upload.addEventListener("loadend",$t)),(ct.cancelToken||ct.signal)&&(Tt=Yt=>{Kt&&(ot(!Yt||Yt.type?new CanceledError(null,it,Kt):Yt),Kt.abort(),Kt=null)},ct.cancelToken&&ct.cancelToken.subscribe(Tt),ct.signal&&(ct.signal.aborted?Tt():ct.signal.addEventListener("abort",Tt)));const Ut=parseProtocol(ct.url);if(Ut&&platform.protocols.indexOf(Ut)===-1){ot(new AxiosError("Unsupported protocol "+Ut+":",AxiosError.ERR_BAD_REQUEST,it));return}Kt.send(ut||null)})},composeSignals=(it,g)=>{const{length:et}=it=it?it.filter(Boolean):[];if(g||et){let ot=new AbortController,ct;const ut=function(kt){if(!ct){ct=!0,ft();const Tt=kt instanceof Error?kt:this.reason;ot.abort(Tt instanceof AxiosError?Tt:new CanceledError(Tt instanceof Error?Tt.message:Tt))}};let dt=g&&setTimeout(()=>{dt=null,ut(new AxiosError(`timeout ${g} of ms exceeded`,AxiosError.ETIMEDOUT))},g);const ft=()=>{it&&(dt&&clearTimeout(dt),dt=null,it.forEach(kt=>{kt.unsubscribe?kt.unsubscribe(ut):kt.removeEventListener("abort",ut)}),it=null)};it.forEach(kt=>kt.addEventListener("abort",ut));const{signal:St}=ot;return St.unsubscribe=()=>utils$1.asap(ft),St}},composeSignals$1=composeSignals,streamChunk=function*(it,g){let et=it.byteLength;if(!g||et<g){yield it;return}let ot=0,ct;for(;ot<et;)ct=ot+g,yield it.slice(ot,ct),ot=ct},readBytes=async function*(it,g){for await(const et of readStream(it))yield*streamChunk(et,g)},readStream=async function*(it){if(it[Symbol.asyncIterator]){yield*it;return}const g=it.getReader();try{for(;;){const{done:et,value:ot}=await g.read();if(et)break;yield ot}}finally{await g.cancel()}},trackStream=(it,g,et,ot)=>{const ct=readBytes(it,g);let ut=0,dt,ft=St=>{dt||(dt=!0,ot&&ot(St))};return new ReadableStream({async pull(St){try{const{done:kt,value:Tt}=await ct.next();if(kt){ft(),St.close();return}let Rt=Tt.byteLength;if(et){let jt=ut+=Rt;et(jt)}St.enqueue(new Uint8Array(Tt))}catch(kt){throw ft(kt),kt}},cancel(St){return ft(St),ct.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(it=>g=>it.encode(g))(new TextEncoder):async it=>new Uint8Array(await new Response(it).arrayBuffer())),test=(it,...g)=>{try{return!!it(...g)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let it=!1;const g=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return it=!0,"half"}}).headers.has("Content-Type");return it&&!g}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(it=>it.body)};isFetchSupported&&(it=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!resolvers[g]&&(resolvers[g]=utils$1.isFunction(it[g])?et=>et[g]():(et,ot)=>{throw new AxiosError(`Response type '${g}' is not supported`,AxiosError.ERR_NOT_SUPPORT,ot)})})})(new Response);const getBodyLength=async it=>{if(it==null)return 0;if(utils$1.isBlob(it))return it.size;if(utils$1.isSpecCompliantForm(it))return(await new Request(platform.origin,{method:"POST",body:it}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(it)||utils$1.isArrayBuffer(it))return it.byteLength;if(utils$1.isURLSearchParams(it)&&(it=it+""),utils$1.isString(it))return(await encodeText(it)).byteLength},resolveBodyLength=async(it,g)=>{const et=utils$1.toFiniteNumber(it.getContentLength());return et??getBodyLength(g)},fetchAdapter=isFetchSupported&&(async it=>{let{url:g,method:et,data:ot,signal:ct,cancelToken:ut,timeout:dt,onDownloadProgress:ft,onUploadProgress:St,responseType:kt,headers:Tt,withCredentials:Rt="same-origin",fetchOptions:jt}=resolveConfig(it);kt=kt?(kt+"").toLowerCase():"text";let $t=composeSignals$1([ct,ut&&ut.toAbortSignal()],dt),Ft;const Ht=$t&&$t.unsubscribe&&(()=>{$t.unsubscribe()});let Kt;try{if(St&&supportsRequestStream&&et!=="get"&&et!=="head"&&(Kt=await resolveBodyLength(Tt,ot))!==0){let Zt=new Request(g,{method:"POST",body:ot,duplex:"half"}),en;if(utils$1.isFormData(ot)&&(en=Zt.headers.get("content-type"))&&Tt.setContentType(en),Zt.body){const[tn,nn]=progressEventDecorator(Kt,progressEventReducer(asyncDecorator(St)));ot=trackStream(Zt.body,DEFAULT_CHUNK_SIZE,tn,nn)}}utils$1.isString(Rt)||(Rt=Rt?"include":"omit");const Bt="credentials"in Request.prototype;Ft=new Request(g,{...jt,signal:$t,method:et.toUpperCase(),headers:Tt.normalize().toJSON(),body:ot,duplex:"half",credentials:Bt?Rt:void 0});let Ut=await fetch(Ft);const Yt=supportsResponseStream&&(kt==="stream"||kt==="response");if(supportsResponseStream&&(ft||Yt&&Ht)){const Zt={};["status","statusText","headers"].forEach(ln=>{Zt[ln]=Ut[ln]});const en=utils$1.toFiniteNumber(Ut.headers.get("content-length")),[tn,nn]=ft&&progressEventDecorator(en,progressEventReducer(asyncDecorator(ft),!0))||[];Ut=new Response(trackStream(Ut.body,DEFAULT_CHUNK_SIZE,tn,()=>{nn&&nn(),Ht&&Ht()}),Zt)}kt=kt||"text";let Jt=await resolvers[utils$1.findKey(resolvers,kt)||"text"](Ut,it);return!Yt&&Ht&&Ht(),await new Promise((Zt,en)=>{settle(Zt,en,{data:Jt,headers:AxiosHeaders$1.from(Ut.headers),status:Ut.status,statusText:Ut.statusText,config:it,request:Ft})})}catch(Bt){throw Ht&&Ht(),Bt&&Bt.name==="TypeError"&&/fetch/i.test(Bt.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,Ft),{cause:Bt.cause||Bt}):AxiosError.from(Bt,Bt&&Bt.code,it,Ft)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(it,g)=>{if(it){try{Object.defineProperty(it,"name",{value:g})}catch{}Object.defineProperty(it,"adapterName",{value:g})}});const renderReason=it=>`- ${it}`,isResolvedHandle=it=>utils$1.isFunction(it)||it===null||it===!1,adapters={getAdapter:it=>{it=utils$1.isArray(it)?it:[it];const{length:g}=it;let et,ot;const ct={};for(let ut=0;ut<g;ut++){et=it[ut];let dt;if(ot=et,!isResolvedHandle(et)&&(ot=knownAdapters[(dt=String(et)).toLowerCase()],ot===void 0))throw new AxiosError(`Unknown adapter '${dt}'`);if(ot)break;ct[dt||"#"+ut]=ot}if(!ot){const ut=Object.entries(ct).map(([ft,St])=>`adapter ${ft} `+(St===!1?"is not supported by the environment":"is not available in the build"));let dt=g?ut.length>1?`since :
`+ut.map(renderReason).join(`
`):" "+renderReason(ut[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+dt,"ERR_NOT_SUPPORT")}return ot},adapters:knownAdapters};function throwIfCancellationRequested(it){if(it.cancelToken&&it.cancelToken.throwIfRequested(),it.signal&&it.signal.aborted)throw new CanceledError(null,it)}function dispatchRequest(it){return throwIfCancellationRequested(it),it.headers=AxiosHeaders$1.from(it.headers),it.data=transformData.call(it,it.transformRequest),["post","put","patch"].indexOf(it.method)!==-1&&it.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(it.adapter||defaults$2.adapter)(it).then(function(ot){return throwIfCancellationRequested(it),ot.data=transformData.call(it,it.transformResponse,ot),ot.headers=AxiosHeaders$1.from(ot.headers),ot},function(ot){return isCancel(ot)||(throwIfCancellationRequested(it),ot&&ot.response&&(ot.response.data=transformData.call(it,it.transformResponse,ot.response),ot.response.headers=AxiosHeaders$1.from(ot.response.headers))),Promise.reject(ot)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((it,g)=>{validators$1[it]=function(ot){return typeof ot===it||"a"+(g<1?"n ":" ")+it}});const deprecatedWarnings={};validators$1.transitional=function(g,et,ot){function ct(ut,dt){return"[Axios v"+VERSION+"] Transitional option '"+ut+"'"+dt+(ot?". "+ot:"")}return(ut,dt,ft)=>{if(g===!1)throw new AxiosError(ct(dt," has been removed"+(et?" in "+et:"")),AxiosError.ERR_DEPRECATED);return et&&!deprecatedWarnings[dt]&&(deprecatedWarnings[dt]=!0,console.warn(ct(dt," has been deprecated since v"+et+" and will be removed in the near future"))),g?g(ut,dt,ft):!0}};validators$1.spelling=function(g){return(et,ot)=>(console.warn(`${ot} is likely a misspelling of ${g}`),!0)};function assertOptions(it,g,et){if(typeof it!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const ot=Object.keys(it);let ct=ot.length;for(;ct-- >0;){const ut=ot[ct],dt=g[ut];if(dt){const ft=it[ut],St=ft===void 0||dt(ft,ut,it);if(St!==!0)throw new AxiosError("option "+ut+" must be "+St,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(et!==!0)throw new AxiosError("Unknown option "+ut,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(g){this.defaults=g,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(g,et){try{return await this._request(g,et)}catch(ot){if(ot instanceof Error){let ct={};Error.captureStackTrace?Error.captureStackTrace(ct):ct=new Error;const ut=ct.stack?ct.stack.replace(/^.+\n/,""):"";try{ot.stack?ut&&!String(ot.stack).endsWith(ut.replace(/^.+\n.+\n/,""))&&(ot.stack+=`
`+ut):ot.stack=ut}catch{}}throw ot}}_request(g,et){typeof g=="string"?(et=et||{},et.url=g):et=g||{},et=mergeConfig(this.defaults,et);const{transitional:ot,paramsSerializer:ct,headers:ut}=et;ot!==void 0&&validator.assertOptions(ot,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),ct!=null&&(utils$1.isFunction(ct)?et.paramsSerializer={serialize:ct}:validator.assertOptions(ct,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(et,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),et.method=(et.method||this.defaults.method||"get").toLowerCase();let dt=ut&&utils$1.merge(ut.common,ut[et.method]);ut&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Ft=>{delete ut[Ft]}),et.headers=AxiosHeaders$1.concat(dt,ut);const ft=[];let St=!0;this.interceptors.request.forEach(function(Ht){typeof Ht.runWhen=="function"&&Ht.runWhen(et)===!1||(St=St&&Ht.synchronous,ft.unshift(Ht.fulfilled,Ht.rejected))});const kt=[];this.interceptors.response.forEach(function(Ht){kt.push(Ht.fulfilled,Ht.rejected)});let Tt,Rt=0,jt;if(!St){const Ft=[dispatchRequest.bind(this),void 0];for(Ft.unshift.apply(Ft,ft),Ft.push.apply(Ft,kt),jt=Ft.length,Tt=Promise.resolve(et);Rt<jt;)Tt=Tt.then(Ft[Rt++],Ft[Rt++]);return Tt}jt=ft.length;let $t=et;for(Rt=0;Rt<jt;){const Ft=ft[Rt++],Ht=ft[Rt++];try{$t=Ft($t)}catch(Kt){Ht.call(this,Kt);break}}try{Tt=dispatchRequest.call(this,$t)}catch(Ft){return Promise.reject(Ft)}for(Rt=0,jt=kt.length;Rt<jt;)Tt=Tt.then(kt[Rt++],kt[Rt++]);return Tt}getUri(g){g=mergeConfig(this.defaults,g);const et=buildFullPath(g.baseURL,g.url);return buildURL(et,g.params,g.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(g){Axios.prototype[g]=function(et,ot){return this.request(mergeConfig(ot||{},{method:g,url:et,data:(ot||{}).data}))}});utils$1.forEach(["post","put","patch"],function(g){function et(ot){return function(ut,dt,ft){return this.request(mergeConfig(ft||{},{method:g,headers:ot?{"Content-Type":"multipart/form-data"}:{},url:ut,data:dt}))}}Axios.prototype[g]=et(),Axios.prototype[g+"Form"]=et(!0)});const Axios$1=Axios;class CancelToken{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let et;this.promise=new Promise(function(ut){et=ut});const ot=this;this.promise.then(ct=>{if(!ot._listeners)return;let ut=ot._listeners.length;for(;ut-- >0;)ot._listeners[ut](ct);ot._listeners=null}),this.promise.then=ct=>{let ut;const dt=new Promise(ft=>{ot.subscribe(ft),ut=ft}).then(ct);return dt.cancel=function(){ot.unsubscribe(ut)},dt},g(function(ut,dt,ft){ot.reason||(ot.reason=new CanceledError(ut,dt,ft),et(ot.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const et=this._listeners.indexOf(g);et!==-1&&this._listeners.splice(et,1)}toAbortSignal(){const g=new AbortController,et=ot=>{g.abort(ot)};return this.subscribe(et),g.signal.unsubscribe=()=>this.unsubscribe(et),g.signal}static source(){let g;return{token:new CancelToken(function(ct){g=ct}),cancel:g}}}const CancelToken$1=CancelToken;function spread(it){return function(et){return it.apply(null,et)}}function isAxiosError(it){return utils$1.isObject(it)&&it.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([it,g])=>{HttpStatusCode[g]=it});const HttpStatusCode$1=HttpStatusCode;function createInstance(it){const g=new Axios$1(it),et=bind$1(Axios$1.prototype.request,g);return utils$1.extend(et,Axios$1.prototype,g,{allOwnKeys:!0}),utils$1.extend(et,g,null,{allOwnKeys:!0}),et.create=function(ct){return createInstance(mergeConfig(it,ct))},et}const axios=createInstance(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(g){return Promise.all(g)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=it=>formDataToJSON(utils$1.isHTMLForm(it)?new FormData(it):it);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;function r$3(it){var g,et,ot="";if(typeof it=="string"||typeof it=="number")ot+=it;else if(typeof it=="object")if(Array.isArray(it)){var ct=it.length;for(g=0;g<ct;g++)it[g]&&(et=r$3(it[g]))&&(ot&&(ot+=" "),ot+=et)}else for(et in it)it[et]&&(ot&&(ot+=" "),ot+=et);return ot}function clsx(){for(var it,g,et=0,ot="",ct=arguments.length;et<ct;et++)(it=arguments[et])&&(g=r$3(it))&&(ot&&(ot+=" "),ot+=g);return ot}function Mt(it){if(!it||typeof document>"u")return;let g=document.head||document.getElementsByTagName("head")[0],et=document.createElement("style");et.type="text/css",g.firstChild?g.insertBefore(et,g.firstChild):g.appendChild(et),et.styleSheet?et.styleSheet.cssText=it:et.appendChild(document.createTextNode(it))}Mt(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$2=it=>typeof it=="number"&&!isNaN(it),N$1=it=>typeof it=="string",P$2=it=>typeof it=="function",mt=it=>N$1(it)||L$2(it),B=it=>N$1(it)||P$2(it)?it:null,pt=(it,g)=>it===!1||L$2(it)&&it>0?it:g,z=it=>reactExports.isValidElement(it)||N$1(it)||P$2(it)||L$2(it);function Z$1(it,g,et=300){let{scrollHeight:ot,style:ct}=it;requestAnimationFrame(()=>{ct.minHeight="initial",ct.height=ot+"px",ct.transition=`all ${et}ms`,requestAnimationFrame(()=>{ct.height="0",ct.padding="0",ct.margin="0",setTimeout(g,et)})})}function $$2({enter:it,exit:g,appendPosition:et=!1,collapse:ot=!0,collapseDuration:ct=300}){return function({children:ut,position:dt,preventExitTransition:ft,done:St,nodeRef:kt,isIn:Tt,playToast:Rt}){let jt=et?`${it}--${dt}`:it,$t=et?`${g}--${dt}`:g,Ft=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let Ht=kt.current,Kt=jt.split(" "),Bt=Ut=>{Ut.target===kt.current&&(Rt(),Ht.removeEventListener("animationend",Bt),Ht.removeEventListener("animationcancel",Bt),Ft.current===0&&Ut.type!=="animationcancel"&&Ht.classList.remove(...Kt))};Ht.classList.add(...Kt),Ht.addEventListener("animationend",Bt),Ht.addEventListener("animationcancel",Bt)},[]),reactExports.useEffect(()=>{let Ht=kt.current,Kt=()=>{Ht.removeEventListener("animationend",Kt),ot?Z$1(Ht,St,ct):St()};Tt||(ft?Kt():(Ft.current=1,Ht.className+=` ${$t}`,Ht.addEventListener("animationend",Kt)))},[Tt]),React4.createElement(React4.Fragment,null,ut)}}function J$1(it,g){return{content:tt$1(it.content,it.props),containerId:it.props.containerId,id:it.props.toastId,theme:it.props.theme,type:it.props.type,data:it.props.data||{},isLoading:it.props.isLoading,icon:it.props.icon,reason:it.removalReason,status:g}}function tt$1(it,g,et=!1){return reactExports.isValidElement(it)&&!N$1(it.type)?reactExports.cloneElement(it,{closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):P$2(it)?it({closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):it}function yt$1({closeToast:it,theme:g,ariaLabel:et="close"}){return React4.createElement("button",{className:`Toastify__close-button Toastify__close-button--${g}`,type:"button",onClick:ot=>{ot.stopPropagation(),it(!0)},"aria-label":et},React4.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React4.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt({delay:it,isRunning:g,closeToast:et,type:ot="default",hide:ct,className:ut,controlledProgress:dt,progress:ft,rtl:St,isIn:kt,theme:Tt}){let Rt=ct||dt&&ft===0,jt={animationDuration:`${it}ms`,animationPlayState:g?"running":"paused"};dt&&(jt.transform=`scaleX(${ft})`);let $t=clsx("Toastify__progress-bar",dt?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Tt}`,`Toastify__progress-bar--${ot}`,{"Toastify__progress-bar--rtl":St}),Ft=P$2(ut)?ut({rtl:St,type:ot,defaultClassName:$t}):clsx($t,ut),Ht={[dt&&ft>=1?"onTransitionEnd":"onAnimationEnd"]:dt&&ft<1?null:()=>{kt&&et()}};return React4.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":Rt},React4.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${Tt} Toastify__progress-bar--${ot}`}),React4.createElement("div",{role:"progressbar","aria-hidden":Rt?"true":"false","aria-label":"notification timer",className:Ft,style:jt,...Ht}))}var Xt=1,at=()=>`${Xt++}`;function _t(it,g,et){let ot=1,ct=0,ut=[],dt=[],ft=g,St=new Map,kt=new Set,Tt=Ut=>(kt.add(Ut),()=>kt.delete(Ut)),Rt=()=>{dt=Array.from(St.values()),kt.forEach(Ut=>Ut())},jt=({containerId:Ut,toastId:Yt,updateId:Jt})=>{let Zt=Ut?Ut!==it:it!==1,en=St.has(Yt)&&Jt==null;return Zt||en},$t=(Ut,Yt)=>{St.forEach(Jt=>{var Zt;(Yt==null||Yt===Jt.props.toastId)&&((Zt=Jt.toggle)==null||Zt.call(Jt,Ut))})},Ft=Ut=>{var Yt,Jt;(Jt=(Yt=Ut.props)==null?void 0:Yt.onClose)==null||Jt.call(Yt,Ut.removalReason),Ut.isActive=!1},Ht=Ut=>{if(Ut==null)St.forEach(Ft);else{let Yt=St.get(Ut);Yt&&Ft(Yt)}Rt()},Kt=()=>{ct-=ut.length,ut=[]},Bt=Ut=>{var Yt,Jt;let{toastId:Zt,updateId:en}=Ut.props,tn=en==null;Ut.staleId&&St.delete(Ut.staleId),Ut.isActive=!0,St.set(Zt,Ut),Rt(),et(J$1(Ut,tn?"added":"updated")),tn&&((Jt=(Yt=Ut.props).onOpen)==null||Jt.call(Yt))};return{id:it,props:ft,observe:Tt,toggle:$t,removeToast:Ht,toasts:St,clearQueue:Kt,buildToast:(Ut,Yt)=>{if(jt(Yt))return;let{toastId:Jt,updateId:Zt,data:en,staleId:tn,delay:nn}=Yt,ln=Zt==null;ln&&ct++;let an={...ft,style:ft.toastStyle,key:ot++,...Object.fromEntries(Object.entries(Yt).filter(([dn,mn])=>mn!=null)),toastId:Jt,updateId:Zt,data:en,isIn:!1,className:B(Yt.className||ft.toastClassName),progressClassName:B(Yt.progressClassName||ft.progressClassName),autoClose:Yt.isLoading?!1:pt(Yt.autoClose,ft.autoClose),closeToast(dn){St.get(Jt).removalReason=dn,Ht(Jt)},deleteToast(){let dn=St.get(Jt);if(dn!=null){if(et(J$1(dn,"removed")),St.delete(Jt),ct--,ct<0&&(ct=0),ut.length>0){Bt(ut.shift());return}Rt()}}};an.closeButton=ft.closeButton,Yt.closeButton===!1||z(Yt.closeButton)?an.closeButton=Yt.closeButton:Yt.closeButton===!0&&(an.closeButton=z(ft.closeButton)?ft.closeButton:!0);let sn={content:Ut,props:an,staleId:tn};ft.limit&&ft.limit>0&&ct>ft.limit&&ln?ut.push(sn):L$2(nn)?setTimeout(()=>{Bt(sn)},nn):Bt(sn)},setProps(Ut){ft=Ut},setToggle:(Ut,Yt)=>{let Jt=St.get(Ut);Jt&&(Jt.toggle=Yt)},isToastActive:Ut=>{var Yt;return(Yt=St.get(Ut))==null?void 0:Yt.isActive},getSnapshot:()=>dt}}var I$3=new Map,F$2=[],st=new Set,Vt=it=>st.forEach(g=>g(it)),bt=()=>I$3.size>0;function Qt(){F$2.forEach(it=>nt(it.content,it.options)),F$2=[]}var vt=(it,{containerId:g})=>{var et;return(et=I$3.get(g||1))==null?void 0:et.toasts.get(it)};function X$3(it,g){var et;if(g)return!!((et=I$3.get(g))!=null&&et.isToastActive(it));let ot=!1;return I$3.forEach(ct=>{ct.isToastActive(it)&&(ot=!0)}),ot}function ht(it){if(!bt()){F$2=F$2.filter(g=>it!=null&&g.options.toastId!==it);return}if(it==null||mt(it))I$3.forEach(g=>{g.removeToast(it)});else if(it&&("containerId"in it||"id"in it)){let g=I$3.get(it.containerId);g?g.removeToast(it.id):I$3.forEach(et=>{et.removeToast(it.id)})}}var Ct=(it={})=>{I$3.forEach(g=>{g.props.limit&&(!it.containerId||g.id===it.containerId)&&g.clearQueue()})};function nt(it,g){z(it)&&(bt()||F$2.push({content:it,options:g}),I$3.forEach(et=>{et.buildToast(it,g)}))}function xt(it){var g;(g=I$3.get(it.containerId||1))==null||g.setToggle(it.id,it.fn)}function rt(it,g){I$3.forEach(et=>{(g==null||!(g!=null&&g.containerId)||(g==null?void 0:g.containerId)===et.id)&&et.toggle(it,g==null?void 0:g.id)})}function Et(it){let g=it.containerId||1;return{subscribe(et){let ot=_t(g,it,Vt);I$3.set(g,ot);let ct=ot.observe(et);return Qt(),()=>{ct(),I$3.delete(g)}},setProps(et){var ot;(ot=I$3.get(g))==null||ot.setProps(et)},getSnapshot(){var et;return(et=I$3.get(g))==null?void 0:et.getSnapshot()}}}function Pt(it){return st.add(it),()=>{st.delete(it)}}function Wt(it){return it&&(N$1(it.toastId)||L$2(it.toastId))?it.toastId:at()}function U$3(it,g){return nt(it,g),g.toastId}function V$1(it,g){return{...g,type:g&&g.type||it,toastId:Wt(g)}}function Q(it){return(g,et)=>U$3(g,V$1(it,et))}function y$4(it,g){return U$3(it,V$1("default",g))}y$4.loading=(it,g)=>U$3(it,V$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...g}));function Gt(it,{pending:g,error:et,success:ot},ct){let ut;g&&(ut=N$1(g)?y$4.loading(g,ct):y$4.loading(g.render,{...ct,...g}));let dt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ft=(kt,Tt,Rt)=>{if(Tt==null){y$4.dismiss(ut);return}let jt={type:kt,...dt,...ct,data:Rt},$t=N$1(Tt)?{render:Tt}:Tt;return ut?y$4.update(ut,{...jt,...$t}):y$4($t.render,{...jt,...$t}),Rt},St=P$2(it)?it():it;return St.then(kt=>ft("success",ot,kt)).catch(kt=>ft("error",et,kt)),St}y$4.promise=Gt;y$4.success=Q("success");y$4.info=Q("info");y$4.error=Q("error");y$4.warning=Q("warning");y$4.warn=y$4.warning;y$4.dark=(it,g)=>U$3(it,V$1("default",{theme:"dark",...g}));function qt(it){ht(it)}y$4.dismiss=qt;y$4.clearWaitingQueue=Ct;y$4.isActive=X$3;y$4.update=(it,g={})=>{let et=vt(it,g);if(et){let{props:ot,content:ct}=et,ut={delay:100,...ot,...g,toastId:g.toastId||it,updateId:at()};ut.toastId!==it&&(ut.staleId=it);let dt=ut.render||ct;delete ut.render,U$3(dt,ut)}};y$4.done=it=>{y$4.update(it,{progress:1})};y$4.onChange=Pt;y$4.play=it=>rt(!0,it);y$4.pause=it=>rt(!1,it);function It(it){var g;let{subscribe:et,getSnapshot:ot,setProps:ct}=reactExports.useRef(Et(it)).current;ct(it);let ut=(g=reactExports.useSyncExternalStore(et,ot,ot))==null?void 0:g.slice();function dt(ft){if(!ut)return[];let St=new Map;return it.newestOnTop&&ut.reverse(),ut.forEach(kt=>{let{position:Tt}=kt.props;St.has(Tt)||St.set(Tt,[]),St.get(Tt).push(kt)}),Array.from(St,kt=>ft(kt[0],kt[1]))}return{getToastToRender:dt,isToastActive:X$3,count:ut==null?void 0:ut.length}}function At(it){let[g,et]=reactExports.useState(!1),[ot,ct]=reactExports.useState(!1),ut=reactExports.useRef(null),dt=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:ft,pauseOnHover:St,closeToast:kt,onClick:Tt,closeOnClick:Rt}=it;xt({id:it.toastId,containerId:it.containerId,fn:et}),reactExports.useEffect(()=>{if(it.pauseOnFocusLoss)return jt(),()=>{$t()}},[it.pauseOnFocusLoss]);function jt(){document.hasFocus()||Bt(),window.addEventListener("focus",Kt),window.addEventListener("blur",Bt)}function $t(){window.removeEventListener("focus",Kt),window.removeEventListener("blur",Bt)}function Ft(tn){if(it.draggable===!0||it.draggable===tn.pointerType){Ut();let nn=ut.current;dt.canCloseOnClick=!0,dt.canDrag=!0,nn.style.transition="none",it.draggableDirection==="x"?(dt.start=tn.clientX,dt.removalDistance=nn.offsetWidth*(it.draggablePercent/100)):(dt.start=tn.clientY,dt.removalDistance=nn.offsetHeight*(it.draggablePercent===80?it.draggablePercent*1.5:it.draggablePercent)/100)}}function Ht(tn){let{top:nn,bottom:ln,left:an,right:sn}=ut.current.getBoundingClientRect();tn.nativeEvent.type!=="touchend"&&it.pauseOnHover&&tn.clientX>=an&&tn.clientX<=sn&&tn.clientY>=nn&&tn.clientY<=ln?Bt():Kt()}function Kt(){et(!0)}function Bt(){et(!1)}function Ut(){dt.didMove=!1,document.addEventListener("pointermove",Jt),document.addEventListener("pointerup",Zt)}function Yt(){document.removeEventListener("pointermove",Jt),document.removeEventListener("pointerup",Zt)}function Jt(tn){let nn=ut.current;if(dt.canDrag&&nn){dt.didMove=!0,g&&Bt(),it.draggableDirection==="x"?dt.delta=tn.clientX-dt.start:dt.delta=tn.clientY-dt.start,dt.start!==tn.clientX&&(dt.canCloseOnClick=!1);let ln=it.draggableDirection==="x"?`${dt.delta}px, var(--y)`:`0, calc(${dt.delta}px + var(--y))`;nn.style.transform=`translate3d(${ln},0)`,nn.style.opacity=`${1-Math.abs(dt.delta/dt.removalDistance)}`}}function Zt(){Yt();let tn=ut.current;if(dt.canDrag&&dt.didMove&&tn){if(dt.canDrag=!1,Math.abs(dt.delta)>dt.removalDistance){ct(!0),it.closeToast(!0),it.collapseAll();return}tn.style.transition="transform 0.2s, opacity 0.2s",tn.style.removeProperty("transform"),tn.style.removeProperty("opacity")}}let en={onPointerDown:Ft,onPointerUp:Ht};return ft&&St&&(en.onMouseEnter=Bt,it.stacked||(en.onMouseLeave=Kt)),Rt&&(en.onClick=tn=>{Tt&&Tt(tn),dt.canCloseOnClick&&kt(!0)}),{playToast:Kt,pauseToast:Bt,isRunning:g,preventExitTransition:ot,toastRef:ut,eventHandlers:en}}var Ot=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G=({theme:it,type:g,isLoading:et,...ot})=>React4.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:it==="colored"?"currentColor":`var(--toastify-icon-color-${g})`,...ot});function ao(it){return React4.createElement(G,{...it},React4.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(it){return React4.createElement(G,{...it},React4.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(it){return React4.createElement(G,{...it},React4.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(it){return React4.createElement(G,{...it},React4.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React4.createElement("div",{className:"Toastify__spinner"})}var W$1={info:so,warning:ao,success:no,error:ro,spinner:io},lo=it=>it in W$1;function Nt({theme:it,type:g,isLoading:et,icon:ot}){let ct=null,ut={theme:it,type:g};return ot===!1||(P$2(ot)?ct=ot({...ut,isLoading:et}):reactExports.isValidElement(ot)?ct=reactExports.cloneElement(ot,ut):et?ct=W$1.spinner():lo(g)&&(ct=W$1[g](ut))),ct}var wt=it=>{let{isRunning:g,preventExitTransition:et,toastRef:ot,eventHandlers:ct,playToast:ut}=At(it),{closeButton:dt,children:ft,autoClose:St,onClick:kt,type:Tt,hideProgressBar:Rt,closeToast:jt,transition:$t,position:Ft,className:Ht,style:Kt,progressClassName:Bt,updateId:Ut,role:Yt,progress:Jt,rtl:Zt,toastId:en,deleteToast:tn,isIn:nn,isLoading:ln,closeOnClick:an,theme:sn,ariaLabel:dn}=it,mn=clsx("Toastify__toast",`Toastify__toast-theme--${sn}`,`Toastify__toast--${Tt}`,{"Toastify__toast--rtl":Zt},{"Toastify__toast--close-on-click":an}),yn=P$2(Ht)?Ht({rtl:Zt,position:Ft,type:Tt,defaultClassName:mn}):clsx(mn,Ht),vn=Nt(it),hn=!!Jt||!St,pn={closeToast:jt,type:Tt,theme:sn},rn=null;return dt===!1||(P$2(dt)?rn=dt(pn):reactExports.isValidElement(dt)?rn=reactExports.cloneElement(dt,pn):rn=yt$1(pn)),React4.createElement($t,{isIn:nn,done:tn,position:Ft,preventExitTransition:et,nodeRef:ot,playToast:ut},React4.createElement("div",{id:en,tabIndex:0,onClick:kt,"data-in":nn,className:yn,...ct,style:Kt,ref:ot,...nn&&{role:Yt,"aria-label":dn}},vn!=null&&React4.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!ln})},vn),tt$1(ft,it,!g),rn,!it.customProgressBar&&React4.createElement(gt,{...Ut&&!hn?{key:`p-${Ut}`}:{},rtl:Zt,theme:sn,delay:St,isRunning:g,isIn:nn,closeToast:jt,hide:Rt,type:Tt,className:Bt,controlledProgress:hn,progress:Jt||0})))},K$1=(it,g=!1)=>({enter:`Toastify--animate Toastify__${it}-enter`,exit:`Toastify--animate Toastify__${it}-exit`,appendPosition:g}),lt=$$2(K$1("bounce",!0)),_o={position:"top-right",transition:lt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:it=>it.altKey&&it.code==="KeyT"};function Lt(it){let g={..._o,...it},et=it.stacked,[ot,ct]=reactExports.useState(!0),ut=reactExports.useRef(null),{getToastToRender:dt,isToastActive:ft,count:St}=It(g),{className:kt,style:Tt,rtl:Rt,containerId:jt,hotKeys:$t}=g;function Ft(Kt){let Bt=clsx("Toastify__toast-container",`Toastify__toast-container--${Kt}`,{"Toastify__toast-container--rtl":Rt});return P$2(kt)?kt({position:Kt,rtl:Rt,defaultClassName:Bt}):clsx(Bt,B(kt))}function Ht(){et&&(ct(!0),y$4.play())}return Ot(()=>{var Kt;if(et){let Bt=ut.current.querySelectorAll('[data-in="true"]'),Ut=12,Yt=(Kt=g.position)==null?void 0:Kt.includes("top"),Jt=0,Zt=0;Array.from(Bt).reverse().forEach((en,tn)=>{let nn=en;nn.classList.add("Toastify__toast--stacked"),tn>0&&(nn.dataset.collapsed=`${ot}`),nn.dataset.pos||(nn.dataset.pos=Yt?"top":"bot");let ln=Jt*(ot?.2:1)+(ot?0:Ut*tn);nn.style.setProperty("--y",`${Yt?ln:ln*-1}px`),nn.style.setProperty("--g",`${Ut}`),nn.style.setProperty("--s",`${1-(ot?Zt:0)}`),Jt+=nn.offsetHeight,Zt+=.025})}},[ot,St,et]),reactExports.useEffect(()=>{function Kt(Bt){var Ut;let Yt=ut.current;$t(Bt)&&((Ut=Yt.querySelector('[tabIndex="0"]'))==null||Ut.focus(),ct(!1),y$4.pause()),Bt.key==="Escape"&&(document.activeElement===Yt||Yt!=null&&Yt.contains(document.activeElement))&&(ct(!0),y$4.play())}return document.addEventListener("keydown",Kt),()=>{document.removeEventListener("keydown",Kt)}},[$t]),React4.createElement("section",{ref:ut,className:"Toastify",id:jt,onMouseEnter:()=>{et&&(ct(!1),y$4.pause())},onMouseLeave:Ht,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":g["aria-label"]},dt((Kt,Bt)=>{let Ut=Bt.length?{...Tt}:{...Tt,pointerEvents:"none"};return React4.createElement("div",{tabIndex:-1,className:Ft(Kt),"data-stacked":et,style:Ut,key:`c-${Kt}`},Bt.map(({content:Yt,props:Jt})=>React4.createElement(wt,{...Jt,stacked:et,collapseAll:Ht,isIn:ft(Jt.toastId,Jt.containerId),key:`t-${Jt.key}`},Yt)))}))}const BASE_URL="https://cre8tlystudio.com/api",axiosInstance=axios$1.create({baseURL:BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});console.log("Base URL:",axiosInstance.defaults.baseURL);let isRefreshing=!1,refreshSubscribers=[];function onRefreshed(it){refreshSubscribers.forEach(g=>g(it)),refreshSubscribers=[]}axiosInstance.interceptors.request.use(it=>{const g=localStorage.getItem("accessToken");return g&&(it.headers.Authorization=`Bearer ${g}`),it});async function refreshToken(){if(isRefreshing)return new Promise(it=>{refreshSubscribers.push(it)});isRefreshing=!0;try{const it=localStorage.getItem("refreshToken");if(!it)throw new Error("No refresh token found");const g=await axios$1.post(`${BASE_URL}/auth/refresh`,{token:it}),{accessToken:et,refreshToken:ot}=g.data;return localStorage.setItem("accessToken",et),ot&&localStorage.setItem("refreshToken",ot),axiosInstance.defaults.headers.Authorization=`Bearer ${et}`,onRefreshed(et),et}catch(it){throw console.error("Token refresh failed:",it),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),it}finally{isRefreshing=!1}}axiosInstance.interceptors.response.use(it=>it,async it=>{var et;const g=it.config;if(((et=it.response)==null?void 0:et.status)===401&&!g._retry){g._retry=!0;try{const ot=await refreshToken();return ot?(g.headers.Authorization=`Bearer ${ot}`,axiosInstance(g)):new Promise(ct=>{refreshSubscribers.push(ut=>{g.headers.Authorization=`Bearer ${ut}`,ct(axiosInstance(g))})})}catch(ot){return console.error("Refresh retry failed:",ot),Promise.reject(ot)}}return Promise.reject(it)});axiosInstance.interceptors.response.use(it=>it,it=>{var g;return((g=it.response)==null?void 0:g.status)===403&&(y$4.warning("Your session expired. Please log in again."),localStorage.clear(),window.location.href="/"),Promise.reject(it)});const AuthContext=reactExports.createContext();function AuthProvider({children:it,navigate:g}){const[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0);function St($t,Ft,Ht){ot($t),ut(Ft),localStorage.setItem("user",JSON.stringify($t)),localStorage.setItem("accessToken",Ft),Ht&&localStorage.setItem("refreshToken",Ht)}async function kt($t,Ft){try{const Kt=(await axiosInstance.post("/auth/login",{email:$t,password:Ft})).data;St(Kt.user,Kt.accessToken,Kt.refreshToken);try{const Bt=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Kt.accessToken}`}});ot(Bt.data),localStorage.setItem("user",JSON.stringify(Bt.data))}catch(Bt){console.error("Failed to fetch fresh user data after login:",Bt)}}catch(Ht){throw Ht}}async function Tt(){var Ft,Ht;const $t=localStorage.getItem("refreshToken");if(!$t)return null;try{const Bt=(await axiosInstance.post("/auth/refresh",{token:$t})).data;return ut(Bt.accessToken),localStorage.setItem("accessToken",Bt.accessToken),Bt.refreshToken&&localStorage.setItem("refreshToken",Bt.refreshToken),Bt.accessToken}catch(Kt){return console.error("Refresh failed:",Kt),(((Ft=Kt.response)==null?void 0:Ft.status)===401||((Ht=Kt.response)==null?void 0:Ht.status)===403)&&Rt(),null}}function Rt(){try{axiosInstance.post("/auth/logout")}catch{}ot(null),ut(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),g("/")}reactExports.useEffect(()=>{const $t=setTimeout(()=>Tt(),1500);return()=>clearTimeout($t)},[]),reactExports.useEffect(()=>{async function $t(){try{const Ft=localStorage.getItem("user"),Ht=localStorage.getItem("accessToken"),Kt=localStorage.getItem("refreshToken");if(Ft&&ot(JSON.parse(Ft)),Ht&&ut(Ht),!Ht&&Kt){const Bt=await Tt();if(Bt){const Ut=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Bt}`}});ot(Ut.data),localStorage.setItem("user",JSON.stringify(Ut.data))}}}catch(Ft){console.error("Failed to restore user:",Ft)}finally{ft(!1)}}$t()},[]);async function jt(){try{const $t=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${ct}`}});return ot($t.data),localStorage.setItem("user",JSON.stringify($t.data)),$t.data}catch($t){return console.error("Failed to refresh user data:",$t),y$4.error("Failed to refresh user data"),null}}return reactExports.useEffect(()=>{const $t=setInterval(()=>{Tt()},72e4);return()=>clearInterval($t)},[]),jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:et,setUser:ot,accessToken:ct,authLoading:dt,login:kt,logout:Rt,refreshAccessToken:Tt,refreshUser:jt},children:it})}function useAuth(){return reactExports.useContext(AuthContext)}function AuthProviderWithRouter({children:it}){const g=useNavigate();return jsxRuntimeExports.jsx(AuthProvider,{navigate:g,children:it})}const MagnetContext=reactExports.createContext();function MagnetProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState({magnets:[],summary:{}}),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const Tt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,Rt=Array.isArray(Tt)?{magnets:Tt,summary:{}}:Tt;ot(Rt)}catch(kt){console.error("Error fetching lead magnets:",kt),ft(kt)}finally{ut(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Rt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,jt=Array.isArray(Rt)?{magnets:Rt,summary:{}}:Rt;ot($t=>JSON.stringify($t)===JSON.stringify(jt)?$t:jt)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(MagnetContext.Provider,{value:{magnets:et,setMagnets:ot,fetchMagnets:St,loading:ct,error:dt},children:it})}function useMagnets(){return reactExports.useContext(MagnetContext)}function LoadingOverlay(){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-purple-500 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-white font-semibold",children:"Restoring your session..."})]})})}function PrivateRoute({children:it,role:g}){const{user:et,authLoading:ot}=useAuth();return ot?jsxRuntimeExports.jsx(LoadingOverlay,{}):et?g&&!(Array.isArray(g)?g:[g]).includes(et.role)?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):it:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(it,g){module.exports=g()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(g){_useWebWorker=!!g},getWebWorker=function(){return _useWebWorker},setLocationHref=function(g){locationHref=g},getLocationHref=function(){return locationHref};function createTag(it){return document.createElement(it)}function extendPrototype(it,g){var et,ot=it.length,ct;for(et=0;et<ot;et+=1){ct=it[et].prototype;for(var ut in ct)Object.prototype.hasOwnProperty.call(ct,ut)&&(g.prototype[ut]=ct[ut])}}function getDescriptor(it,g){return Object.getOwnPropertyDescriptor(it,g)}function createProxyFunction(it){function g(){}return g.prototype=it,g}var audioControllerFactory=function(){function it(g){this.audios=[],this.audioFactory=g,this._volume=1,this._isMuted=!1}return it.prototype={addAudio:function(et){this.audios.push(et)},pause:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].pause()},resume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].resume()},setRate:function(et){var ot,ct=this.audios.length;for(ot=0;ot<ct;ot+=1)this.audios[ot].setRate(et)},createAudio:function(et){return this.audioFactory?this.audioFactory(et):window.Howl?new window.Howl({src:[et]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(et){this.audioFactory=et},setVolume:function(et){this._volume=et,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].volume(this._volume*(this._isMuted?0:1))}},function(){return new it}}(),createTypedArray=function(){function it(et,ot){var ct=0,ut=[],dt;switch(et){case"int16":case"uint8c":dt=1;break;default:dt=1.1;break}for(ct=0;ct<ot;ct+=1)ut.push(dt);return ut}function g(et,ot){return et==="float32"?new Float32Array(ot):et==="int16"?new Int16Array(ot):et==="uint8c"?new Uint8ClampedArray(ot):it(et,ot)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?g:it}();function createSizedArray(it){return Array.apply(null,{length:it})}function _typeof$6(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(et){return typeof et}:_typeof$6=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$6(it)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var it=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],g,et=it.length;for(g=0;g<et;g+=1)BMMath[it[g]]=Math[it[g]]})(),BMMath.random=Math.random,BMMath.abs=function(it){var g=_typeof$6(it);if(g==="object"&&it.length){var et=createSizedArray(it.length),ot,ct=it.length;for(ot=0;ot<ct;ot+=1)et[ot]=Math.abs(it[ot]);return et}return Math.abs(it)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(it){it.style.position="absolute",it.style.top=0,it.style.left=0,it.style.display="block",it.style.transformOrigin="0 0",it.style.webkitTransformOrigin="0 0",it.style.backfaceVisibility="visible",it.style.webkitBackfaceVisibility="visible",it.style.transformStyle="preserve-3d",it.style.webkitTransformStyle="preserve-3d",it.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(it,g,et,ot){this.type=it,this.currentTime=g,this.totalTime=et,this.direction=ot<0?-1:1}function BMCompleteEvent(it,g){this.type=it,this.direction=g<0?-1:1}function BMCompleteLoopEvent(it,g,et,ot){this.type=it,this.currentLoop=et,this.totalLoops=g,this.direction=ot<0?-1:1}function BMSegmentStartEvent(it,g,et){this.type=it,this.firstFrame=g,this.totalFrames=et}function BMDestroyEvent(it,g){this.type=it,this.target=g}function BMRenderFrameErrorEvent(it,g){this.type="renderFrameError",this.nativeError=it,this.currentTime=g}function BMConfigErrorEvent(it){this.type="configError",this.nativeError=it}var createElementID=function(){var it=0;return function(){return it+=1,idPrefix$1+"__lottie_element_"+it}}();function HSVtoRGB(it,g,et){var ot,ct,ut,dt,ft,St,kt,Tt;switch(dt=Math.floor(it*6),ft=it*6-dt,St=et*(1-g),kt=et*(1-ft*g),Tt=et*(1-(1-ft)*g),dt%6){case 0:ot=et,ct=Tt,ut=St;break;case 1:ot=kt,ct=et,ut=St;break;case 2:ot=St,ct=et,ut=Tt;break;case 3:ot=St,ct=kt,ut=et;break;case 4:ot=Tt,ct=St,ut=et;break;case 5:ot=et,ct=St,ut=kt;break}return[ot,ct,ut]}function RGBtoHSV(it,g,et){var ot=Math.max(it,g,et),ct=Math.min(it,g,et),ut=ot-ct,dt,ft=ot===0?0:ut/ot,St=ot/255;switch(ot){case ct:dt=0;break;case it:dt=g-et+ut*(g<et?6:0),dt/=6*ut;break;case g:dt=et-it+ut*2,dt/=6*ut;break;case et:dt=it-g+ut*4,dt/=6*ut;break}return[dt,ft,St]}function addSaturationToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[1]+=g,et[1]>1?et[1]=1:et[1]<=0&&(et[1]=0),HSVtoRGB(et[0],et[1],et[2])}function addBrightnessToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[2]+=g,et[2]>1?et[2]=1:et[2]<0&&(et[2]=0),HSVtoRGB(et[0],et[1],et[2])}function addHueToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[0]+=g/360,et[0]>1?et[0]-=1:et[0]<0&&(et[0]+=1),HSVtoRGB(et[0],et[1],et[2])}var rgbToHex=function(){var it=[],g,et;for(g=0;g<256;g+=1)et=g.toString(16),it[g]=et.length===1?"0"+et:et;return function(ot,ct,ut){return ot<0&&(ot=0),ct<0&&(ct=0),ut<0&&(ut=0),"#"+it[ot]+it[ct]+it[ut]}}(),setSubframeEnabled=function(g){subframeEnabled=!!g},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(g){expressionsPlugin=g},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(g){expressionsInterfaces=g},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(g){defaultCurveSegments=g},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(g){idPrefix$1=g};function createNS(it){return document.createElementNS(svgNS,it)}function _typeof$5(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(et){return typeof et}:_typeof$5=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$5(it)}var dataManager=function(){var it=1,g=[],et,ot,ct={onmessage:function(){},postMessage:function($t){et({data:$t})}},ut={postMessage:function($t){ct.onmessage({data:$t})}};function dt(jt){if(window.Worker&&window.Blob&&getWebWorker()){var $t=new Blob(["var _workerSelf = self; self.onmessage = ",jt.toString()],{type:"text/javascript"}),Ft=URL.createObjectURL($t);return new Worker(Ft)}return et=jt,ct}function ft(){ot||(ot=dt(function($t){function Ft(){function Kt(vn,hn){var pn,rn,on=vn.length,gn,un,xn,En;for(rn=0;rn<on;rn+=1)if(pn=vn[rn],"ks"in pn&&!pn.completed){if(pn.completed=!0,pn.hasMask){var wn=pn.masksProperties;for(un=wn.length,gn=0;gn<un;gn+=1)if(wn[gn].pt.k.i)Zt(wn[gn].pt.k);else for(En=wn[gn].pt.k.length,xn=0;xn<En;xn+=1)wn[gn].pt.k[xn].s&&Zt(wn[gn].pt.k[xn].s[0]),wn[gn].pt.k[xn].e&&Zt(wn[gn].pt.k[xn].e[0])}pn.ty===0?(pn.layers=Yt(pn.refId,hn),Kt(pn.layers,hn)):pn.ty===4?Jt(pn.shapes):pn.ty===5&&mn(pn)}}function Bt(vn,hn){if(vn){var pn=0,rn=vn.length;for(pn=0;pn<rn;pn+=1)vn[pn].t===1&&(vn[pn].data.layers=Yt(vn[pn].data.refId,hn),Kt(vn[pn].data.layers,hn))}}function Ut(vn,hn){for(var pn=0,rn=hn.length;pn<rn;){if(hn[pn].id===vn)return hn[pn];pn+=1}return null}function Yt(vn,hn){var pn=Ut(vn,hn);return pn?pn.layers.__used?JSON.parse(JSON.stringify(pn.layers)):(pn.layers.__used=!0,pn.layers):null}function Jt(vn){var hn,pn=vn.length,rn,on;for(hn=pn-1;hn>=0;hn-=1)if(vn[hn].ty==="sh")if(vn[hn].ks.k.i)Zt(vn[hn].ks.k);else for(on=vn[hn].ks.k.length,rn=0;rn<on;rn+=1)vn[hn].ks.k[rn].s&&Zt(vn[hn].ks.k[rn].s[0]),vn[hn].ks.k[rn].e&&Zt(vn[hn].ks.k[rn].e[0]);else vn[hn].ty==="gr"&&Jt(vn[hn].it)}function Zt(vn){var hn,pn=vn.i.length;for(hn=0;hn<pn;hn+=1)vn.i[hn][0]+=vn.v[hn][0],vn.i[hn][1]+=vn.v[hn][1],vn.o[hn][0]+=vn.v[hn][0],vn.o[hn][1]+=vn.v[hn][1]}function en(vn,hn){var pn=hn?hn.split("."):[100,100,100];return vn[0]>pn[0]?!0:pn[0]>vn[0]?!1:vn[1]>pn[1]?!0:pn[1]>vn[1]?!1:vn[2]>pn[2]?!0:pn[2]>vn[2]?!1:null}var tn=function(){var vn=[4,4,14];function hn(rn){var on=rn.t.d;rn.t.d={k:[{s:on,t:0}]}}function pn(rn){var on,gn=rn.length;for(on=0;on<gn;on+=1)rn[on].ty===5&&hn(rn[on])}return function(rn){if(en(vn,rn.v)&&(pn(rn.layers),rn.assets)){var on,gn=rn.assets.length;for(on=0;on<gn;on+=1)rn.assets[on].layers&&pn(rn.assets[on].layers)}}}(),nn=function(){var vn=[4,7,99];return function(hn){if(hn.chars&&!en(vn,hn.v)){var pn,rn=hn.chars.length;for(pn=0;pn<rn;pn+=1){var on=hn.chars[pn];on.data&&on.data.shapes&&(Jt(on.data.shapes),on.data.ip=0,on.data.op=99999,on.data.st=0,on.data.sr=1,on.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},hn.chars[pn].t||(on.data.shapes.push({ty:"no"}),on.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),ln=function(){var vn=[5,7,15];function hn(rn){var on=rn.t.p;typeof on.a=="number"&&(on.a={a:0,k:on.a}),typeof on.p=="number"&&(on.p={a:0,k:on.p}),typeof on.r=="number"&&(on.r={a:0,k:on.r})}function pn(rn){var on,gn=rn.length;for(on=0;on<gn;on+=1)rn[on].ty===5&&hn(rn[on])}return function(rn){if(en(vn,rn.v)&&(pn(rn.layers),rn.assets)){var on,gn=rn.assets.length;for(on=0;on<gn;on+=1)rn.assets[on].layers&&pn(rn.assets[on].layers)}}}(),an=function(){var vn=[4,1,9];function hn(rn){var on,gn=rn.length,un,xn;for(on=0;on<gn;on+=1)if(rn[on].ty==="gr")hn(rn[on].it);else if(rn[on].ty==="fl"||rn[on].ty==="st")if(rn[on].c.k&&rn[on].c.k[0].i)for(xn=rn[on].c.k.length,un=0;un<xn;un+=1)rn[on].c.k[un].s&&(rn[on].c.k[un].s[0]/=255,rn[on].c.k[un].s[1]/=255,rn[on].c.k[un].s[2]/=255,rn[on].c.k[un].s[3]/=255),rn[on].c.k[un].e&&(rn[on].c.k[un].e[0]/=255,rn[on].c.k[un].e[1]/=255,rn[on].c.k[un].e[2]/=255,rn[on].c.k[un].e[3]/=255);else rn[on].c.k[0]/=255,rn[on].c.k[1]/=255,rn[on].c.k[2]/=255,rn[on].c.k[3]/=255}function pn(rn){var on,gn=rn.length;for(on=0;on<gn;on+=1)rn[on].ty===4&&hn(rn[on].shapes)}return function(rn){if(en(vn,rn.v)&&(pn(rn.layers),rn.assets)){var on,gn=rn.assets.length;for(on=0;on<gn;on+=1)rn.assets[on].layers&&pn(rn.assets[on].layers)}}}(),sn=function(){var vn=[4,4,18];function hn(rn){var on,gn=rn.length,un,xn;for(on=gn-1;on>=0;on-=1)if(rn[on].ty==="sh")if(rn[on].ks.k.i)rn[on].ks.k.c=rn[on].closed;else for(xn=rn[on].ks.k.length,un=0;un<xn;un+=1)rn[on].ks.k[un].s&&(rn[on].ks.k[un].s[0].c=rn[on].closed),rn[on].ks.k[un].e&&(rn[on].ks.k[un].e[0].c=rn[on].closed);else rn[on].ty==="gr"&&hn(rn[on].it)}function pn(rn){var on,gn,un=rn.length,xn,En,wn,kn;for(gn=0;gn<un;gn+=1){if(on=rn[gn],on.hasMask){var Sn=on.masksProperties;for(En=Sn.length,xn=0;xn<En;xn+=1)if(Sn[xn].pt.k.i)Sn[xn].pt.k.c=Sn[xn].cl;else for(kn=Sn[xn].pt.k.length,wn=0;wn<kn;wn+=1)Sn[xn].pt.k[wn].s&&(Sn[xn].pt.k[wn].s[0].c=Sn[xn].cl),Sn[xn].pt.k[wn].e&&(Sn[xn].pt.k[wn].e[0].c=Sn[xn].cl)}on.ty===4&&hn(on.shapes)}}return function(rn){if(en(vn,rn.v)&&(pn(rn.layers),rn.assets)){var on,gn=rn.assets.length;for(on=0;on<gn;on+=1)rn.assets[on].layers&&pn(rn.assets[on].layers)}}}();function dn(vn){vn.__complete||(an(vn),tn(vn),nn(vn),ln(vn),sn(vn),Kt(vn.layers,vn.assets),Bt(vn.chars,vn.assets),vn.__complete=!0)}function mn(vn){vn.t.a.length===0&&"m"in vn.t.p}var yn={};return yn.completeData=dn,yn.checkColors=an,yn.checkChars=nn,yn.checkPathProperties=ln,yn.checkShapes=sn,yn.completeLayers=Kt,yn}if(ut.dataManager||(ut.dataManager=Ft()),ut.assetLoader||(ut.assetLoader=function(){function Kt(Ut){var Yt=Ut.getResponseHeader("content-type");return Yt&&Ut.responseType==="json"&&Yt.indexOf("json")!==-1||Ut.response&&_typeof$5(Ut.response)==="object"?Ut.response:Ut.response&&typeof Ut.response=="string"?JSON.parse(Ut.response):Ut.responseText?JSON.parse(Ut.responseText):null}function Bt(Ut,Yt,Jt,Zt){var en,tn=new XMLHttpRequest;try{tn.responseType="json"}catch{}tn.onreadystatechange=function(){if(tn.readyState===4)if(tn.status===200)en=Kt(tn),Jt(en);else try{en=Kt(tn),Jt(en)}catch(nn){Zt&&Zt(nn)}};try{tn.open(["G","E","T"].join(""),Ut,!0)}catch{tn.open(["G","E","T"].join(""),Yt+"/"+Ut,!0)}tn.send()}return{load:Bt}}()),$t.data.type==="loadAnimation")ut.assetLoader.load($t.data.path,$t.data.fullPath,function(Kt){ut.dataManager.completeData(Kt),ut.postMessage({id:$t.data.id,payload:Kt,status:"success"})},function(){ut.postMessage({id:$t.data.id,status:"error"})});else if($t.data.type==="complete"){var Ht=$t.data.animation;ut.dataManager.completeData(Ht),ut.postMessage({id:$t.data.id,payload:Ht,status:"success"})}else $t.data.type==="loadData"&&ut.assetLoader.load($t.data.path,$t.data.fullPath,function(Kt){ut.postMessage({id:$t.data.id,payload:Kt,status:"success"})},function(){ut.postMessage({id:$t.data.id,status:"error"})})}),ot.onmessage=function(jt){var $t=jt.data,Ft=$t.id,Ht=g[Ft];g[Ft]=null,$t.status==="success"?Ht.onComplete($t.payload):Ht.onError&&Ht.onError()})}function St(jt,$t){it+=1;var Ft="processId_"+it;return g[Ft]={onComplete:jt,onError:$t},Ft}function kt(jt,$t,Ft){ft();var Ht=St($t,Ft);ot.postMessage({type:"loadAnimation",path:jt,fullPath:window.location.origin+window.location.pathname,id:Ht})}function Tt(jt,$t,Ft){ft();var Ht=St($t,Ft);ot.postMessage({type:"loadData",path:jt,fullPath:window.location.origin+window.location.pathname,id:Ht})}function Rt(jt,$t,Ft){ft();var Ht=St($t,Ft);ot.postMessage({type:"complete",animation:jt,id:Ht})}return{loadAnimation:kt,loadData:Tt,completeAnimation:Rt}}(),ImagePreloader=function(){var it=function(){var Bt=createTag("canvas");Bt.width=1,Bt.height=1;var Ut=Bt.getContext("2d");return Ut.fillStyle="rgba(0,0,0,0)",Ut.fillRect(0,0,1,1),Bt}();function g(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function et(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ot(Bt,Ut,Yt){var Jt="";if(Bt.e)Jt=Bt.p;else if(Ut){var Zt=Bt.p;Zt.indexOf("images/")!==-1&&(Zt=Zt.split("/")[1]),Jt=Ut+Zt}else Jt=Yt,Jt+=Bt.u?Bt.u:"",Jt+=Bt.p;return Jt}function ct(Bt){var Ut=0,Yt=setInterval((function(){var Jt=Bt.getBBox();(Jt.width||Ut>500)&&(this._imageLoaded(),clearInterval(Yt)),Ut+=1}).bind(this),50)}function ut(Bt){var Ut=ot(Bt,this.assetsPath,this.path),Yt=createNS("image");isSafari?this.testImageLoaded(Yt):Yt.addEventListener("load",this._imageLoaded,!1),Yt.addEventListener("error",(function(){Jt.img=it,this._imageLoaded()}).bind(this),!1),Yt.setAttributeNS("http://www.w3.org/1999/xlink","href",Ut),this._elementHelper.append?this._elementHelper.append(Yt):this._elementHelper.appendChild(Yt);var Jt={img:Yt,assetData:Bt};return Jt}function dt(Bt){var Ut=ot(Bt,this.assetsPath,this.path),Yt=createTag("img");Yt.crossOrigin="anonymous",Yt.addEventListener("load",this._imageLoaded,!1),Yt.addEventListener("error",(function(){Jt.img=it,this._imageLoaded()}).bind(this),!1),Yt.src=Ut;var Jt={img:Yt,assetData:Bt};return Jt}function ft(Bt){var Ut={assetData:Bt},Yt=ot(Bt,this.assetsPath,this.path);return dataManager.loadData(Yt,(function(Jt){Ut.img=Jt,this._footageLoaded()}).bind(this),(function(){Ut.img={},this._footageLoaded()}).bind(this)),Ut}function St(Bt,Ut){this.imagesLoadedCb=Ut;var Yt,Jt=Bt.length;for(Yt=0;Yt<Jt;Yt+=1)Bt[Yt].layers||(!Bt[Yt].t||Bt[Yt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Bt[Yt]))):Bt[Yt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Bt[Yt]))))}function kt(Bt){this.path=Bt||""}function Tt(Bt){this.assetsPath=Bt||""}function Rt(Bt){for(var Ut=0,Yt=this.images.length;Ut<Yt;){if(this.images[Ut].assetData===Bt)return this.images[Ut].img;Ut+=1}return null}function jt(){this.imagesLoadedCb=null,this.images.length=0}function $t(){return this.totalImages===this.loadedAssets}function Ft(){return this.totalFootages===this.loadedFootagesCount}function Ht(Bt,Ut){Bt==="svg"?(this._elementHelper=Ut,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Kt(){this._imageLoaded=g.bind(this),this._footageLoaded=et.bind(this),this.testImageLoaded=ct.bind(this),this.createFootageData=ft.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Kt.prototype={loadAssets:St,setAssetsPath:Tt,setPath:kt,loadedImages:$t,loadedFootages:Ft,destroy:jt,getAsset:Rt,createImgData:dt,createImageData:ut,imageLoaded:g,footageLoaded:et,setCacheType:Ht},Kt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(g,et){if(this._cbs[g])for(var ot=this._cbs[g],ct=0;ct<ot.length;ct+=1)ot[ct](et)},addEventListener:function(g,et){return this._cbs[g]||(this._cbs[g]=[]),this._cbs[g].push(et),(function(){this.removeEventListener(g,et)}).bind(this)},removeEventListener:function(g,et){if(!et)this._cbs[g]=null;else if(this._cbs[g]){for(var ot=0,ct=this._cbs[g].length;ot<ct;)this._cbs[g][ot]===et&&(this._cbs[g].splice(ot,1),ot-=1,ct-=1),ot+=1;this._cbs[g].length||(this._cbs[g]=null)}}};var markerParser=function(){function it(g){for(var et=g.split(`\r
`),ot={},ct,ut=0,dt=0;dt<et.length;dt+=1)ct=et[dt].split(":"),ct.length===2&&(ot[ct[0]]=ct[1].trim(),ut+=1);if(ut===0)throw new Error;return ot}return function(g){for(var et=[],ot=0;ot<g.length;ot+=1){var ct=g[ot],ut={time:ct.tm,duration:ct.dr};try{ut.payload=JSON.parse(g[ot].cm)}catch{try{ut.payload=it(g[ot].cm)}catch{ut.payload={name:g[ot].cm}}}et.push(ut)}return et}}(),ProjectInterface=function(){function it(g){this.compositions.push(g)}return function(){function g(et){for(var ot=0,ct=this.compositions.length;ot<ct;){if(this.compositions[ot].data&&this.compositions[ot].data.nm===et)return this.compositions[ot].prepareFrame&&this.compositions[ot].data.xt&&this.compositions[ot].prepareFrame(this.currentFrame),this.compositions[ot].compInterface;ot+=1}return null}return g.compositions=[],g.currentFrame=0,g.registerComposition=it,g}}(),renderers={},registerRenderer=function(g,et){renderers[g]=et};function getRenderer(it){return renderers[it]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var it in renderers)if(renderers[it])return it;return""}function _typeof$4(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(et){return typeof et}:_typeof$4=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$4(it)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(it){(it.wrapper||it.container)&&(this.wrapper=it.wrapper||it.container);var g="svg";it.animType?g=it.animType:it.renderer&&(g=it.renderer);var et=getRenderer(g);this.renderer=new et(this,it.rendererSettings),this.imagePreloader.setCacheType(g,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=g,it.loop===""||it.loop===null||it.loop===void 0||it.loop===!0?this.loop=!0:it.loop===!1?this.loop=!1:this.loop=parseInt(it.loop,10),this.autoplay="autoplay"in it?it.autoplay:!0,this.name=it.name?it.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(it,"autoloadSegments")?it.autoloadSegments:!0,this.assetsPath=it.assetsPath,this.initialSegment=it.initialSegment,it.audioFactory&&this.audioController.setAudioFactory(it.audioFactory),it.animationData?this.setupAnimation(it.animationData):it.path&&(it.path.lastIndexOf("\\")!==-1?this.path=it.path.substr(0,it.path.lastIndexOf("\\")+1):this.path=it.path.substr(0,it.path.lastIndexOf("/")+1),this.fileName=it.path.substr(it.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(it.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(it){dataManager.completeAnimation(it,this.configAnimation)},AnimationItem.prototype.setData=function(it,g){g&&_typeof$4(g)!=="object"&&(g=JSON.parse(g));var et={wrapper:it,animationData:g},ot=it.attributes;et.path=ot.getNamedItem("data-animation-path")?ot.getNamedItem("data-animation-path").value:ot.getNamedItem("data-bm-path")?ot.getNamedItem("data-bm-path").value:ot.getNamedItem("bm-path")?ot.getNamedItem("bm-path").value:"",et.animType=ot.getNamedItem("data-anim-type")?ot.getNamedItem("data-anim-type").value:ot.getNamedItem("data-bm-type")?ot.getNamedItem("data-bm-type").value:ot.getNamedItem("bm-type")?ot.getNamedItem("bm-type").value:ot.getNamedItem("data-bm-renderer")?ot.getNamedItem("data-bm-renderer").value:ot.getNamedItem("bm-renderer")?ot.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var ct=ot.getNamedItem("data-anim-loop")?ot.getNamedItem("data-anim-loop").value:ot.getNamedItem("data-bm-loop")?ot.getNamedItem("data-bm-loop").value:ot.getNamedItem("bm-loop")?ot.getNamedItem("bm-loop").value:"";ct==="false"?et.loop=!1:ct==="true"?et.loop=!0:ct!==""&&(et.loop=parseInt(ct,10));var ut=ot.getNamedItem("data-anim-autoplay")?ot.getNamedItem("data-anim-autoplay").value:ot.getNamedItem("data-bm-autoplay")?ot.getNamedItem("data-bm-autoplay").value:ot.getNamedItem("bm-autoplay")?ot.getNamedItem("bm-autoplay").value:!0;et.autoplay=ut!=="false",et.name=ot.getNamedItem("data-name")?ot.getNamedItem("data-name").value:ot.getNamedItem("data-bm-name")?ot.getNamedItem("data-bm-name").value:ot.getNamedItem("bm-name")?ot.getNamedItem("bm-name").value:"";var dt=ot.getNamedItem("data-anim-prerender")?ot.getNamedItem("data-anim-prerender").value:ot.getNamedItem("data-bm-prerender")?ot.getNamedItem("data-bm-prerender").value:ot.getNamedItem("bm-prerender")?ot.getNamedItem("bm-prerender").value:"";dt==="false"&&(et.prerender=!1),et.path?this.setParams(et):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(it){it.op>this.animationData.op&&(this.animationData.op=it.op,this.totalFrames=Math.floor(it.op-this.animationData.ip));var g=this.animationData.layers,et,ot=g.length,ct=it.layers,ut,dt=ct.length;for(ut=0;ut<dt;ut+=1)for(et=0;et<ot;){if(g[et].id===ct[ut].id){g[et]=ct[ut];break}et+=1}if((it.chars||it.fonts)&&(this.renderer.globalData.fontManager.addChars(it.chars),this.renderer.globalData.fontManager.addFonts(it.fonts,this.renderer.globalData.defs)),it.assets)for(ot=it.assets.length,et=0;et<ot;et+=1)this.animationData.assets.push(it.assets[et]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(it){this.animationData=it;var g=getExpressionsPlugin();g&&g.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var it=this.animationData.segments;if(!it||it.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var g=it.shift();this.timeCompleted=g.time*this.frameRate;var et=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(et,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var it=this.animationData.segments;it||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(it){if(this.renderer)try{this.animationData=it,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(it),it.assets||(it.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(it.assets),this.markers=markerParser(it.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(g){this.triggerConfigError(g)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var it=getExpressionsPlugin();it&&it.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(it,g){var et=typeof it=="number"?it:void 0,ot=typeof g=="number"?g:void 0;this.renderer.updateContainerSize(et,ot)},AnimationItem.prototype.setSubframe=function(it){this.isSubframeEnabled=!!it},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(it){this.triggerRenderFrameError(it)}},AnimationItem.prototype.play=function(it){it&&this.name!==it||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(it){it&&this.name!==it||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(it){it&&this.name!==it||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(it){it&&this.name!==it||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(it){for(var g,et=0;et<this.markers.length;et+=1)if(g=this.markers[et],g.payload&&g.payload.name===it)return g;return null},AnimationItem.prototype.goToAndStop=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ct=this.getMarkerData(it);ct&&this.goToAndStop(ct.time,!0)}else g?this.setCurrentRawFrameValue(it):this.setCurrentRawFrameValue(it*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ct=this.getMarkerData(it);ct&&(ct.duration?this.playSegments([ct.time,ct.time+ct.duration],!0):this.goToAndStop(ct.time,!0))}else this.goToAndStop(ot,g,et);this.play()}},AnimationItem.prototype.advanceTime=function(it){if(!(this.isPaused===!0||this.isLoaded===!1)){var g=this.currentRawFrame+it*this.frameModifier,et=!1;g>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(g>this.totalFrames?g%this.totalFrames:0)||(et=!0,g=this.totalFrames-1):g>=this.totalFrames?(this.playCount+=1,this.checkSegments(g%this.totalFrames)||(this.setCurrentRawFrameValue(g%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(g):g<0?this.checkSegments(g%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+g%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(et=!0,g=0)):this.setCurrentRawFrameValue(g),et&&(this.setCurrentRawFrameValue(g),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(it,g){this.playCount=0,it[1]<it[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=it[0]-it[1],this.timeCompleted=this.totalFrames,this.firstFrame=it[1],this.setCurrentRawFrameValue(this.totalFrames-.001-g)):it[1]>it[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=it[1]-it[0],this.timeCompleted=this.totalFrames,this.firstFrame=it[0],this.setCurrentRawFrameValue(.001+g)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(it,g){var et=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<it?et=it:this.currentRawFrame+this.firstFrame>g&&(et=g-it)),this.firstFrame=it,this.totalFrames=g-it,this.timeCompleted=this.totalFrames,et!==-1&&this.goToAndStop(et,!0)},AnimationItem.prototype.playSegments=function(it,g){if(g&&(this.segments.length=0),_typeof$4(it[0])==="object"){var et,ot=it.length;for(et=0;et<ot;et+=1)this.segments.push(it[et])}else this.segments.push(it);this.segments.length&&g&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(it){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),it&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(it){return this.segments.length?(this.adjustSegment(this.segments.shift(),it),!0):!1},AnimationItem.prototype.destroy=function(it){it&&this.name!==it||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(it){this.currentRawFrame=it,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(it){this.playSpeed=it,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(it){this.playDirection=it<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(it){this.loop=it},AnimationItem.prototype.setVolume=function(it,g){g&&this.name!==g||this.audioController.setVolume(it)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(it){it&&this.name!==it||this.audioController.mute()},AnimationItem.prototype.unmute=function(it){it&&this.name!==it||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(it){var g="";if(it.e)g=it.p;else if(this.assetsPath){var et=it.p;et.indexOf("images/")!==-1&&(et=et.split("/")[1]),g=this.assetsPath+et}else g=this.path,g+=it.u?it.u:"",g+=it.p;return g},AnimationItem.prototype.getAssetData=function(it){for(var g=0,et=this.assets.length;g<et;){if(it===this.assets[g].id)return this.assets[g];g+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(it){return it?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(it,g,et){try{var ot=this.renderer.getElementByPath(it);ot.updateDocumentData(g,et)}catch{}},AnimationItem.prototype.trigger=function(it){if(this._cbs&&this._cbs[it])switch(it){case"enterFrame":this.triggerEvent(it,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(it,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(it,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(it,new BMCompleteEvent(it,this.frameMult));break;case"segmentStart":this.triggerEvent(it,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(it,new BMDestroyEvent(it,this));break;default:this.triggerEvent(it)}it==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameMult)),it==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult)),it==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(it,this.frameMult)),it==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames)),it==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(it,this))},AnimationItem.prototype.triggerRenderFrameError=function(it){var g=new BMRenderFrameErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)},AnimationItem.prototype.triggerConfigError=function(it){var g=new BMConfigErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)};var animationManager=function(){var it={},g=[],et=0,ot=0,ct=0,ut=!0,dt=!1;function ft(hn){for(var pn=0,rn=hn.target;pn<ot;)g[pn].animation===rn&&(g.splice(pn,1),pn-=1,ot-=1,rn.isPaused||Rt()),pn+=1}function St(hn,pn){if(!hn)return null;for(var rn=0;rn<ot;){if(g[rn].elem===hn&&g[rn].elem!==null)return g[rn].animation;rn+=1}var on=new AnimationItem;return jt(on,hn),on.setData(hn,pn),on}function kt(){var hn,pn=g.length,rn=[];for(hn=0;hn<pn;hn+=1)rn.push(g[hn].animation);return rn}function Tt(){ct+=1,an()}function Rt(){ct-=1}function jt(hn,pn){hn.addEventListener("destroy",ft),hn.addEventListener("_active",Tt),hn.addEventListener("_idle",Rt),g.push({elem:pn,animation:hn}),ot+=1}function $t(hn){var pn=new AnimationItem;return jt(pn,null),pn.setParams(hn),pn}function Ft(hn,pn){var rn;for(rn=0;rn<ot;rn+=1)g[rn].animation.setSpeed(hn,pn)}function Ht(hn,pn){var rn;for(rn=0;rn<ot;rn+=1)g[rn].animation.setDirection(hn,pn)}function Kt(hn){var pn;for(pn=0;pn<ot;pn+=1)g[pn].animation.play(hn)}function Bt(hn){var pn=hn-et,rn;for(rn=0;rn<ot;rn+=1)g[rn].animation.advanceTime(pn);et=hn,ct&&!dt?window.requestAnimationFrame(Bt):ut=!0}function Ut(hn){et=hn,window.requestAnimationFrame(Bt)}function Yt(hn){var pn;for(pn=0;pn<ot;pn+=1)g[pn].animation.pause(hn)}function Jt(hn,pn,rn){var on;for(on=0;on<ot;on+=1)g[on].animation.goToAndStop(hn,pn,rn)}function Zt(hn){var pn;for(pn=0;pn<ot;pn+=1)g[pn].animation.stop(hn)}function en(hn){var pn;for(pn=0;pn<ot;pn+=1)g[pn].animation.togglePause(hn)}function tn(hn){var pn;for(pn=ot-1;pn>=0;pn-=1)g[pn].animation.destroy(hn)}function nn(hn,pn,rn){var on=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),gn,un=on.length;for(gn=0;gn<un;gn+=1)rn&&on[gn].setAttribute("data-bm-type",rn),St(on[gn],hn);if(pn&&un===0){rn||(rn="svg");var xn=document.getElementsByTagName("body")[0];xn.innerText="";var En=createTag("div");En.style.width="100%",En.style.height="100%",En.setAttribute("data-bm-type",rn),xn.appendChild(En),St(En,hn)}}function ln(){var hn;for(hn=0;hn<ot;hn+=1)g[hn].animation.resize()}function an(){!dt&&ct&&ut&&(window.requestAnimationFrame(Ut),ut=!1)}function sn(){dt=!0}function dn(){dt=!1,an()}function mn(hn,pn){var rn;for(rn=0;rn<ot;rn+=1)g[rn].animation.setVolume(hn,pn)}function yn(hn){var pn;for(pn=0;pn<ot;pn+=1)g[pn].animation.mute(hn)}function vn(hn){var pn;for(pn=0;pn<ot;pn+=1)g[pn].animation.unmute(hn)}return it.registerAnimation=St,it.loadAnimation=$t,it.setSpeed=Ft,it.setDirection=Ht,it.play=Kt,it.pause=Yt,it.stop=Zt,it.togglePause=en,it.searchAnimations=nn,it.resize=ln,it.goToAndStop=Jt,it.destroy=tn,it.freeze=sn,it.unfreeze=dn,it.setVolume=mn,it.mute=yn,it.unmute=vn,it.getRegisteredAnimations=kt,it}(),BezierFactory=function(){var it={};it.getBezierEasing=et;var g={};function et(Ut,Yt,Jt,Zt,en){var tn=en||("bez_"+Ut+"_"+Yt+"_"+Jt+"_"+Zt).replace(/\./g,"p");if(g[tn])return g[tn];var nn=new Bt([Ut,Yt,Jt,Zt]);return g[tn]=nn,nn}var ot=4,ct=.001,ut=1e-7,dt=10,ft=11,St=1/(ft-1),kt=typeof Float32Array=="function";function Tt(Ut,Yt){return 1-3*Yt+3*Ut}function Rt(Ut,Yt){return 3*Yt-6*Ut}function jt(Ut){return 3*Ut}function $t(Ut,Yt,Jt){return((Tt(Yt,Jt)*Ut+Rt(Yt,Jt))*Ut+jt(Yt))*Ut}function Ft(Ut,Yt,Jt){return 3*Tt(Yt,Jt)*Ut*Ut+2*Rt(Yt,Jt)*Ut+jt(Yt)}function Ht(Ut,Yt,Jt,Zt,en){var tn,nn,ln=0;do nn=Yt+(Jt-Yt)/2,tn=$t(nn,Zt,en)-Ut,tn>0?Jt=nn:Yt=nn;while(Math.abs(tn)>ut&&++ln<dt);return nn}function Kt(Ut,Yt,Jt,Zt){for(var en=0;en<ot;++en){var tn=Ft(Yt,Jt,Zt);if(tn===0)return Yt;var nn=$t(Yt,Jt,Zt)-Ut;Yt-=nn/tn}return Yt}function Bt(Ut){this._p=Ut,this._mSampleValues=kt?new Float32Array(ft):new Array(ft),this._precomputed=!1,this.get=this.get.bind(this)}return Bt.prototype={get:function(Yt){var Jt=this._p[0],Zt=this._p[1],en=this._p[2],tn=this._p[3];return this._precomputed||this._precompute(),Jt===Zt&&en===tn?Yt:Yt===0?0:Yt===1?1:$t(this._getTForX(Yt),Zt,tn)},_precompute:function(){var Yt=this._p[0],Jt=this._p[1],Zt=this._p[2],en=this._p[3];this._precomputed=!0,(Yt!==Jt||Zt!==en)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Yt=this._p[0],Jt=this._p[2],Zt=0;Zt<ft;++Zt)this._mSampleValues[Zt]=$t(Zt*St,Yt,Jt)},_getTForX:function(Yt){for(var Jt=this._p[0],Zt=this._p[2],en=this._mSampleValues,tn=0,nn=1,ln=ft-1;nn!==ln&&en[nn]<=Yt;++nn)tn+=St;--nn;var an=(Yt-en[nn])/(en[nn+1]-en[nn]),sn=tn+an*St,dn=Ft(sn,Jt,Zt);return dn>=ct?Kt(Yt,sn,Jt,Zt):dn===0?sn:Ht(Yt,tn,tn+St,Jt,Zt)}},it}(),pooling=function(){function it(g){return g.concat(createSizedArray(g.length))}return{double:it}}(),poolFactory=function(){return function(it,g,et){var ot=0,ct=it,ut=createSizedArray(ct),dt={newElement:ft,release:St};function ft(){var kt;return ot?(ot-=1,kt=ut[ot]):kt=g(),kt}function St(kt){ot===ct&&(ut=pooling.double(ut),ct*=2),et&&et(kt),ut[ot]=kt,ot+=1}return dt}}(),bezierLengthPool=function(){function it(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,it)}(),segmentsLengthPool=function(){function it(){return{lengths:[],totalLength:0}}function g(et){var ot,ct=et.lengths.length;for(ot=0;ot<ct;ot+=1)bezierLengthPool.release(et.lengths[ot]);et.lengths.length=0}return poolFactory(8,it,g)}();function bezFunction(){var it=Math;function g(jt,$t,Ft,Ht,Kt,Bt){var Ut=jt*Ht+$t*Kt+Ft*Bt-Kt*Ht-Bt*jt-Ft*$t;return Ut>-.001&&Ut<.001}function et(jt,$t,Ft,Ht,Kt,Bt,Ut,Yt,Jt){if(Ft===0&&Bt===0&&Jt===0)return g(jt,$t,Ht,Kt,Ut,Yt);var Zt=it.sqrt(it.pow(Ht-jt,2)+it.pow(Kt-$t,2)+it.pow(Bt-Ft,2)),en=it.sqrt(it.pow(Ut-jt,2)+it.pow(Yt-$t,2)+it.pow(Jt-Ft,2)),tn=it.sqrt(it.pow(Ut-Ht,2)+it.pow(Yt-Kt,2)+it.pow(Jt-Bt,2)),nn;return Zt>en?Zt>tn?nn=Zt-en-tn:nn=tn-en-Zt:tn>en?nn=tn-en-Zt:nn=en-Zt-tn,nn>-1e-4&&nn<1e-4}var ot=function(){return function(jt,$t,Ft,Ht){var Kt=getDefaultCurveSegments(),Bt,Ut,Yt,Jt,Zt,en=0,tn,nn=[],ln=[],an=bezierLengthPool.newElement();for(Yt=Ft.length,Bt=0;Bt<Kt;Bt+=1){for(Zt=Bt/(Kt-1),tn=0,Ut=0;Ut<Yt;Ut+=1)Jt=bmPow(1-Zt,3)*jt[Ut]+3*bmPow(1-Zt,2)*Zt*Ft[Ut]+3*(1-Zt)*bmPow(Zt,2)*Ht[Ut]+bmPow(Zt,3)*$t[Ut],nn[Ut]=Jt,ln[Ut]!==null&&(tn+=bmPow(nn[Ut]-ln[Ut],2)),ln[Ut]=nn[Ut];tn&&(tn=bmSqrt(tn),en+=tn),an.percents[Bt]=Zt,an.lengths[Bt]=en}return an.addedLength=en,an}}();function ct(jt){var $t=segmentsLengthPool.newElement(),Ft=jt.c,Ht=jt.v,Kt=jt.o,Bt=jt.i,Ut,Yt=jt._length,Jt=$t.lengths,Zt=0;for(Ut=0;Ut<Yt-1;Ut+=1)Jt[Ut]=ot(Ht[Ut],Ht[Ut+1],Kt[Ut],Bt[Ut+1]),Zt+=Jt[Ut].addedLength;return Ft&&Yt&&(Jt[Ut]=ot(Ht[Ut],Ht[0],Kt[Ut],Bt[0]),Zt+=Jt[Ut].addedLength),$t.totalLength=Zt,$t}function ut(jt){this.segmentLength=0,this.points=new Array(jt)}function dt(jt,$t){this.partialLength=jt,this.point=$t}var ft=function(){var jt={};return function($t,Ft,Ht,Kt){var Bt=($t[0]+"_"+$t[1]+"_"+Ft[0]+"_"+Ft[1]+"_"+Ht[0]+"_"+Ht[1]+"_"+Kt[0]+"_"+Kt[1]).replace(/\./g,"p");if(!jt[Bt]){var Ut=getDefaultCurveSegments(),Yt,Jt,Zt,en,tn,nn=0,ln,an,sn=null;$t.length===2&&($t[0]!==Ft[0]||$t[1]!==Ft[1])&&g($t[0],$t[1],Ft[0],Ft[1],$t[0]+Ht[0],$t[1]+Ht[1])&&g($t[0],$t[1],Ft[0],Ft[1],Ft[0]+Kt[0],Ft[1]+Kt[1])&&(Ut=2);var dn=new ut(Ut);for(Zt=Ht.length,Yt=0;Yt<Ut;Yt+=1){for(an=createSizedArray(Zt),tn=Yt/(Ut-1),ln=0,Jt=0;Jt<Zt;Jt+=1)en=bmPow(1-tn,3)*$t[Jt]+3*bmPow(1-tn,2)*tn*($t[Jt]+Ht[Jt])+3*(1-tn)*bmPow(tn,2)*(Ft[Jt]+Kt[Jt])+bmPow(tn,3)*Ft[Jt],an[Jt]=en,sn!==null&&(ln+=bmPow(an[Jt]-sn[Jt],2));ln=bmSqrt(ln),nn+=ln,dn.points[Yt]=new dt(ln,an),sn=an}dn.segmentLength=nn,jt[Bt]=dn}return jt[Bt]}}();function St(jt,$t){var Ft=$t.percents,Ht=$t.lengths,Kt=Ft.length,Bt=bmFloor((Kt-1)*jt),Ut=jt*$t.addedLength,Yt=0;if(Bt===Kt-1||Bt===0||Ut===Ht[Bt])return Ft[Bt];for(var Jt=Ht[Bt]>Ut?-1:1,Zt=!0;Zt;)if(Ht[Bt]<=Ut&&Ht[Bt+1]>Ut?(Yt=(Ut-Ht[Bt])/(Ht[Bt+1]-Ht[Bt]),Zt=!1):Bt+=Jt,Bt<0||Bt>=Kt-1){if(Bt===Kt-1)return Ft[Bt];Zt=!1}return Ft[Bt]+(Ft[Bt+1]-Ft[Bt])*Yt}function kt(jt,$t,Ft,Ht,Kt,Bt){var Ut=St(Kt,Bt),Yt=1-Ut,Jt=it.round((Yt*Yt*Yt*jt[0]+(Ut*Yt*Yt+Yt*Ut*Yt+Yt*Yt*Ut)*Ft[0]+(Ut*Ut*Yt+Yt*Ut*Ut+Ut*Yt*Ut)*Ht[0]+Ut*Ut*Ut*$t[0])*1e3)/1e3,Zt=it.round((Yt*Yt*Yt*jt[1]+(Ut*Yt*Yt+Yt*Ut*Yt+Yt*Yt*Ut)*Ft[1]+(Ut*Ut*Yt+Yt*Ut*Ut+Ut*Yt*Ut)*Ht[1]+Ut*Ut*Ut*$t[1])*1e3)/1e3;return[Jt,Zt]}var Tt=createTypedArray("float32",8);function Rt(jt,$t,Ft,Ht,Kt,Bt,Ut){Kt<0?Kt=0:Kt>1&&(Kt=1);var Yt=St(Kt,Ut);Bt=Bt>1?1:Bt;var Jt=St(Bt,Ut),Zt,en=jt.length,tn=1-Yt,nn=1-Jt,ln=tn*tn*tn,an=Yt*tn*tn*3,sn=Yt*Yt*tn*3,dn=Yt*Yt*Yt,mn=tn*tn*nn,yn=Yt*tn*nn+tn*Yt*nn+tn*tn*Jt,vn=Yt*Yt*nn+tn*Yt*Jt+Yt*tn*Jt,hn=Yt*Yt*Jt,pn=tn*nn*nn,rn=Yt*nn*nn+tn*Jt*nn+tn*nn*Jt,on=Yt*Jt*nn+tn*Jt*Jt+Yt*nn*Jt,gn=Yt*Jt*Jt,un=nn*nn*nn,xn=Jt*nn*nn+nn*Jt*nn+nn*nn*Jt,En=Jt*Jt*nn+nn*Jt*Jt+Jt*nn*Jt,wn=Jt*Jt*Jt;for(Zt=0;Zt<en;Zt+=1)Tt[Zt*4]=it.round((ln*jt[Zt]+an*Ft[Zt]+sn*Ht[Zt]+dn*$t[Zt])*1e3)/1e3,Tt[Zt*4+1]=it.round((mn*jt[Zt]+yn*Ft[Zt]+vn*Ht[Zt]+hn*$t[Zt])*1e3)/1e3,Tt[Zt*4+2]=it.round((pn*jt[Zt]+rn*Ft[Zt]+on*Ht[Zt]+gn*$t[Zt])*1e3)/1e3,Tt[Zt*4+3]=it.round((un*jt[Zt]+xn*Ft[Zt]+En*Ht[Zt]+wn*$t[Zt])*1e3)/1e3;return Tt}return{getSegmentsLength:ct,getNewSegment:Rt,getPointInSegment:kt,buildBezierData:ft,pointOnLine2D:g,pointOnLine3D:et}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(it,g){var et=this.offsetTime,ot;this.propType==="multidimensional"&&(ot=createTypedArray("float32",this.pv.length));for(var ct=g.lastIndex,ut=ct,dt=this.keyframes.length-1,ft=!0,St,kt,Tt;ft;){if(St=this.keyframes[ut],kt=this.keyframes[ut+1],ut===dt-1&&it>=kt.t-et){St.h&&(St=kt),ct=0;break}if(kt.t-et>it){ct=ut;break}ut<dt-1?ut+=1:(ct=0,ft=!1)}Tt=this.keyframesMetadata[ut]||{};var Rt,jt,$t,Ft,Ht,Kt,Bt=kt.t-et,Ut=St.t-et,Yt;if(St.to){Tt.bezierData||(Tt.bezierData=bez.buildBezierData(St.s,kt.s||St.e,St.to,St.ti));var Jt=Tt.bezierData;if(it>=Bt||it<Ut){var Zt=it>=Bt?Jt.points.length-1:0;for(jt=Jt.points[Zt].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=Jt.points[Zt].point[Rt]}else{Tt.__fnct?Kt=Tt.__fnct:(Kt=BezierFactory.getBezierEasing(St.o.x,St.o.y,St.i.x,St.i.y,St.n).get,Tt.__fnct=Kt),$t=Kt((it-Ut)/(Bt-Ut));var en=Jt.segmentLength*$t,tn,nn=g.lastFrame<it&&g._lastKeyframeIndex===ut?g._lastAddedLength:0;for(Ht=g.lastFrame<it&&g._lastKeyframeIndex===ut?g._lastPoint:0,ft=!0,Ft=Jt.points.length;ft;){if(nn+=Jt.points[Ht].partialLength,en===0||$t===0||Ht===Jt.points.length-1){for(jt=Jt.points[Ht].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=Jt.points[Ht].point[Rt];break}else if(en>=nn&&en<nn+Jt.points[Ht+1].partialLength){for(tn=(en-nn)/Jt.points[Ht+1].partialLength,jt=Jt.points[Ht].point.length,Rt=0;Rt<jt;Rt+=1)ot[Rt]=Jt.points[Ht].point[Rt]+(Jt.points[Ht+1].point[Rt]-Jt.points[Ht].point[Rt])*tn;break}Ht<Ft-1?Ht+=1:ft=!1}g._lastPoint=Ht,g._lastAddedLength=nn-Jt.points[Ht].partialLength,g._lastKeyframeIndex=ut}}else{var ln,an,sn,dn,mn;if(dt=St.s.length,Yt=kt.s||St.e,this.sh&&St.h!==1)if(it>=Bt)ot[0]=Yt[0],ot[1]=Yt[1],ot[2]=Yt[2];else if(it<=Ut)ot[0]=St.s[0],ot[1]=St.s[1],ot[2]=St.s[2];else{var yn=createQuaternion(St.s),vn=createQuaternion(Yt),hn=(it-Ut)/(Bt-Ut);quaternionToEuler(ot,slerp(yn,vn,hn))}else for(ut=0;ut<dt;ut+=1)St.h!==1&&(it>=Bt?$t=1:it<Ut?$t=0:(St.o.x.constructor===Array?(Tt.__fnct||(Tt.__fnct=[]),Tt.__fnct[ut]?Kt=Tt.__fnct[ut]:(ln=St.o.x[ut]===void 0?St.o.x[0]:St.o.x[ut],an=St.o.y[ut]===void 0?St.o.y[0]:St.o.y[ut],sn=St.i.x[ut]===void 0?St.i.x[0]:St.i.x[ut],dn=St.i.y[ut]===void 0?St.i.y[0]:St.i.y[ut],Kt=BezierFactory.getBezierEasing(ln,an,sn,dn).get,Tt.__fnct[ut]=Kt)):Tt.__fnct?Kt=Tt.__fnct:(ln=St.o.x,an=St.o.y,sn=St.i.x,dn=St.i.y,Kt=BezierFactory.getBezierEasing(ln,an,sn,dn).get,St.keyframeMetadata=Kt),$t=Kt((it-Ut)/(Bt-Ut)))),Yt=kt.s||St.e,mn=St.h===1?St.s[ut]:St.s[ut]+(Yt[ut]-St.s[ut])*$t,this.propType==="multidimensional"?ot[ut]=mn:ot=mn}return g.lastIndex=ct,ot}function slerp(it,g,et){var ot=[],ct=it[0],ut=it[1],dt=it[2],ft=it[3],St=g[0],kt=g[1],Tt=g[2],Rt=g[3],jt,$t,Ft,Ht,Kt;return $t=ct*St+ut*kt+dt*Tt+ft*Rt,$t<0&&($t=-$t,St=-St,kt=-kt,Tt=-Tt,Rt=-Rt),1-$t>1e-6?(jt=Math.acos($t),Ft=Math.sin(jt),Ht=Math.sin((1-et)*jt)/Ft,Kt=Math.sin(et*jt)/Ft):(Ht=1-et,Kt=et),ot[0]=Ht*ct+Kt*St,ot[1]=Ht*ut+Kt*kt,ot[2]=Ht*dt+Kt*Tt,ot[3]=Ht*ft+Kt*Rt,ot}function quaternionToEuler(it,g){var et=g[0],ot=g[1],ct=g[2],ut=g[3],dt=Math.atan2(2*ot*ut-2*et*ct,1-2*ot*ot-2*ct*ct),ft=Math.asin(2*et*ot+2*ct*ut),St=Math.atan2(2*et*ut-2*ot*ct,1-2*et*et-2*ct*ct);it[0]=dt/degToRads,it[1]=ft/degToRads,it[2]=St/degToRads}function createQuaternion(it){var g=it[0]*degToRads,et=it[1]*degToRads,ot=it[2]*degToRads,ct=Math.cos(g/2),ut=Math.cos(et/2),dt=Math.cos(ot/2),ft=Math.sin(g/2),St=Math.sin(et/2),kt=Math.sin(ot/2),Tt=ct*ut*dt-ft*St*kt,Rt=ft*St*dt+ct*ut*kt,jt=ft*ut*dt+ct*St*kt,$t=ct*St*dt-ft*ut*kt;return[Rt,jt,$t,Tt]}function getValueAtCurrentTime(){var it=this.comp.renderedFrame-this.offsetTime,g=this.keyframes[0].t-this.offsetTime,et=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(it===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=et&&it>=et||this._caching.lastFrame<g&&it<g))){this._caching.lastFrame>=it&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ot=this.interpolateValue(it,this._caching);this.pv=ot}return this._caching.lastFrame=it,this.pv}function setVValue(it){var g;if(this.propType==="unidimensional")g=it*this.mult,mathAbs(this.v-g)>1e-5&&(this.v=g,this._mdf=!0);else for(var et=0,ot=this.v.length;et<ot;)g=it[et]*this.mult,mathAbs(this.v[et]-g)>1e-5&&(this.v[et]=g,this._mdf=!0),et+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var it,g=this.effectsSequence.length,et=this.kf?this.pv:this.data.k;for(it=0;it<g;it+=1)et=this.effectsSequence[it](et);this.setVValue(et),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(it){this.effectsSequence.push(it),this.container.addDynamicProperty(this)}function ValueProperty(it,g,et,ot){this.propType="unidimensional",this.mult=et||1,this.data=g,this.v=et?g.k*et:g.k,this.pv=g.k,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(it,g,et,ot){this.propType="multidimensional",this.mult=et||1,this.data=g,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ct,ut=g.k.length;for(this.v=createTypedArray("float32",ut),this.pv=createTypedArray("float32",ut),this.vel=createTypedArray("float32",ut),ct=0;ct<ut;ct+=1)this.v[ct]=g.k[ct]*this.mult,this.pv[ct]=g.k[ct];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(it,g,et,ot){this.propType="unidimensional",this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=g,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(it,g,et,ot){this.propType="multidimensional";var ct,ut=g.k.length,dt,ft,St,kt;for(ct=0;ct<ut-1;ct+=1)g.k[ct].to&&g.k[ct].s&&g.k[ct+1]&&g.k[ct+1].s&&(dt=g.k[ct].s,ft=g.k[ct+1].s,St=g.k[ct].to,kt=g.k[ct].ti,(dt.length===2&&!(dt[0]===ft[0]&&dt[1]===ft[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],dt[0]+St[0],dt[1]+St[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],ft[0]+kt[0],ft[1]+kt[1])||dt.length===3&&!(dt[0]===ft[0]&&dt[1]===ft[1]&&dt[2]===ft[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],dt[0]+St[0],dt[1]+St[1],dt[2]+St[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],ft[0]+kt[0],ft[1]+kt[1],ft[2]+kt[2]))&&(g.k[ct].to=null,g.k[ct].ti=null),dt[0]===ft[0]&&dt[1]===ft[1]&&St[0]===0&&St[1]===0&&kt[0]===0&&kt[1]===0&&(dt.length===2||dt[2]===ft[2]&&St[2]===0&&kt[2]===0)&&(g.k[ct].to=null,g.k[ct].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=g,this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Tt=g.k[0].s.length;for(this.v=createTypedArray("float32",Tt),this.pv=createTypedArray("float32",Tt),ct=0;ct<Tt;ct+=1)this.v[ct]=initFrame,this.pv[ct]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Tt)},this.addEffect=addEffect}var PropertyFactory=function(){function it(et,ot,ct,ut,dt){ot.sid&&(ot=et.globalData.slotManager.getProp(ot));var ft;if(!ot.k.length)ft=new ValueProperty(et,ot,ut,dt);else if(typeof ot.k[0]=="number")ft=new MultiDimensionalProperty(et,ot,ut,dt);else switch(ct){case 0:ft=new KeyframedValueProperty(et,ot,ut,dt);break;case 1:ft=new KeyframedMultidimensionalProperty(et,ot,ut,dt);break}return ft.effectsSequence.length&&dt.addDynamicProperty(ft),ft}var g={getProp:it};return g}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&(this.dynamicProperties.push(g),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var g,et=this.dynamicProperties.length;for(g=0;g<et;g+=1)this.dynamicProperties[g].getValue(),this.dynamicProperties[g]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(g){this.container=g,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function it(){return createTypedArray("float32",2)}return poolFactory(8,it)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(it,g){this.c=it,this.setLength(g);for(var et=0;et<g;)this.v[et]=pointPool.newElement(),this.o[et]=pointPool.newElement(),this.i[et]=pointPool.newElement(),et+=1},ShapePath.prototype.setLength=function(it){for(;this._maxLength<it;)this.doubleArrayLength();this._length=it},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(it,g,et,ot,ct){var ut;switch(this._length=Math.max(this._length,ot+1),this._length>=this._maxLength&&this.doubleArrayLength(),et){case"v":ut=this.v;break;case"i":ut=this.i;break;case"o":ut=this.o;break;default:ut=[];break}(!ut[ot]||ut[ot]&&!ct)&&(ut[ot]=pointPool.newElement()),ut[ot][0]=it,ut[ot][1]=g},ShapePath.prototype.setTripleAt=function(it,g,et,ot,ct,ut,dt,ft){this.setXYAt(it,g,"v",dt,ft),this.setXYAt(et,ot,"o",dt,ft),this.setXYAt(ct,ut,"i",dt,ft)},ShapePath.prototype.reverse=function(){var it=new ShapePath;it.setPathData(this.c,this._length);var g=this.v,et=this.o,ot=this.i,ct=0;this.c&&(it.setTripleAt(g[0][0],g[0][1],ot[0][0],ot[0][1],et[0][0],et[0][1],0,!1),ct=1);var ut=this._length-1,dt=this._length,ft;for(ft=ct;ft<dt;ft+=1)it.setTripleAt(g[ut][0],g[ut][1],ot[ut][0],ot[ut][1],et[ut][0],et[ut][1],ft,!1),ut-=1;return it},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function it(){return new ShapePath}function g(ct){var ut=ct._length,dt;for(dt=0;dt<ut;dt+=1)pointPool.release(ct.v[dt]),pointPool.release(ct.i[dt]),pointPool.release(ct.o[dt]),ct.v[dt]=null,ct.i[dt]=null,ct.o[dt]=null;ct._length=0,ct.c=!1}function et(ct){var ut=ot.newElement(),dt,ft=ct._length===void 0?ct.v.length:ct._length;for(ut.setLength(ft),ut.c=ct.c,dt=0;dt<ft;dt+=1)ut.setTripleAt(ct.v[dt][0],ct.v[dt][1],ct.o[dt][0],ct.o[dt][1],ct.i[dt][0],ct.i[dt][1],dt);return ut}var ot=poolFactory(4,it,g);return ot.clone=et,ot}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(it){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=it,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var it;for(it=0;it<this._length;it+=1)shapePool.release(this.shapes[it]);this._length=0};var shapeCollectionPool=function(){var it={newShapeCollection:ct,release:ut},g=0,et=4,ot=createSizedArray(et);function ct(){var dt;return g?(g-=1,dt=ot[g]):dt=new ShapeCollection,dt}function ut(dt){var ft,St=dt._length;for(ft=0;ft<St;ft+=1)shapePool.release(dt.shapes[ft]);dt._length=0,g===et&&(ot=pooling.double(ot),et*=2),ot[g]=dt,g+=1}return it}(),ShapePropertyFactory=function(){var it=-999999;function g(Bt,Ut,Yt){var Jt=Yt.lastIndex,Zt,en,tn,nn,ln,an,sn,dn,mn,yn=this.keyframes;if(Bt<yn[0].t-this.offsetTime)Zt=yn[0].s[0],tn=!0,Jt=0;else if(Bt>=yn[yn.length-1].t-this.offsetTime)Zt=yn[yn.length-1].s?yn[yn.length-1].s[0]:yn[yn.length-2].e[0],tn=!0;else{for(var vn=Jt,hn=yn.length-1,pn=!0,rn,on,gn;pn&&(rn=yn[vn],on=yn[vn+1],!(on.t-this.offsetTime>Bt));)vn<hn-1?vn+=1:pn=!1;if(gn=this.keyframesMetadata[vn]||{},tn=rn.h===1,Jt=vn,!tn){if(Bt>=on.t-this.offsetTime)dn=1;else if(Bt<rn.t-this.offsetTime)dn=0;else{var un;gn.__fnct?un=gn.__fnct:(un=BezierFactory.getBezierEasing(rn.o.x,rn.o.y,rn.i.x,rn.i.y).get,gn.__fnct=un),dn=un((Bt-(rn.t-this.offsetTime))/(on.t-this.offsetTime-(rn.t-this.offsetTime)))}en=on.s?on.s[0]:rn.e[0]}Zt=rn.s[0]}for(an=Ut._length,sn=Zt.i[0].length,Yt.lastIndex=Jt,nn=0;nn<an;nn+=1)for(ln=0;ln<sn;ln+=1)mn=tn?Zt.i[nn][ln]:Zt.i[nn][ln]+(en.i[nn][ln]-Zt.i[nn][ln])*dn,Ut.i[nn][ln]=mn,mn=tn?Zt.o[nn][ln]:Zt.o[nn][ln]+(en.o[nn][ln]-Zt.o[nn][ln])*dn,Ut.o[nn][ln]=mn,mn=tn?Zt.v[nn][ln]:Zt.v[nn][ln]+(en.v[nn][ln]-Zt.v[nn][ln])*dn,Ut.v[nn][ln]=mn}function et(){var Bt=this.comp.renderedFrame-this.offsetTime,Ut=this.keyframes[0].t-this.offsetTime,Yt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Jt=this._caching.lastFrame;return Jt!==it&&(Jt<Ut&&Bt<Ut||Jt>Yt&&Bt>Yt)||(this._caching.lastIndex=Jt<Bt?this._caching.lastIndex:0,this.interpolateShape(Bt,this.pv,this._caching)),this._caching.lastFrame=Bt,this.pv}function ot(){this.paths=this.localShapeCollection}function ct(Bt,Ut){if(Bt._length!==Ut._length||Bt.c!==Ut.c)return!1;var Yt,Jt=Bt._length;for(Yt=0;Yt<Jt;Yt+=1)if(Bt.v[Yt][0]!==Ut.v[Yt][0]||Bt.v[Yt][1]!==Ut.v[Yt][1]||Bt.o[Yt][0]!==Ut.o[Yt][0]||Bt.o[Yt][1]!==Ut.o[Yt][1]||Bt.i[Yt][0]!==Ut.i[Yt][0]||Bt.i[Yt][1]!==Ut.i[Yt][1])return!1;return!0}function ut(Bt){ct(this.v,Bt)||(this.v=shapePool.clone(Bt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function dt(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Bt;this.kf?Bt=this.pv:this.data.ks?Bt=this.data.ks.k:Bt=this.data.pt.k;var Ut,Yt=this.effectsSequence.length;for(Ut=0;Ut<Yt;Ut+=1)Bt=this.effectsSequence[Ut](Bt);this.setVValue(Bt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function ft(Bt,Ut,Yt){this.propType="shape",this.comp=Bt.comp,this.container=Bt,this.elem=Bt,this.data=Ut,this.k=!1,this.kf=!1,this._mdf=!1;var Jt=Yt===3?Ut.pt.k:Ut.ks.k;this.v=shapePool.clone(Jt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=ot,this.effectsSequence=[]}function St(Bt){this.effectsSequence.push(Bt),this.container.addDynamicProperty(this)}ft.prototype.interpolateShape=g,ft.prototype.getValue=dt,ft.prototype.setVValue=ut,ft.prototype.addEffect=St;function kt(Bt,Ut,Yt){this.propType="shape",this.comp=Bt.comp,this.elem=Bt,this.container=Bt,this.offsetTime=Bt.data.st,this.keyframes=Yt===3?Ut.pt.k:Ut.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Jt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Jt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=it,this.reset=ot,this._caching={lastFrame:it,lastIndex:0},this.effectsSequence=[et.bind(this)]}kt.prototype.getValue=dt,kt.prototype.interpolateShape=g,kt.prototype.setVValue=ut,kt.prototype.addEffect=St;var Tt=function(){var Bt=roundCorner;function Ut(Yt,Jt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Jt.d,this.elem=Yt,this.comp=Yt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Yt),this.p=PropertyFactory.getProp(Yt,Jt.p,1,0,this),this.s=PropertyFactory.getProp(Yt,Jt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Ut.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Jt=this.p.v[0],Zt=this.p.v[1],en=this.s.v[0]/2,tn=this.s.v[1]/2,nn=this.d!==3,ln=this.v;ln.v[0][0]=Jt,ln.v[0][1]=Zt-tn,ln.v[1][0]=nn?Jt+en:Jt-en,ln.v[1][1]=Zt,ln.v[2][0]=Jt,ln.v[2][1]=Zt+tn,ln.v[3][0]=nn?Jt-en:Jt+en,ln.v[3][1]=Zt,ln.i[0][0]=nn?Jt-en*Bt:Jt+en*Bt,ln.i[0][1]=Zt-tn,ln.i[1][0]=nn?Jt+en:Jt-en,ln.i[1][1]=Zt-tn*Bt,ln.i[2][0]=nn?Jt+en*Bt:Jt-en*Bt,ln.i[2][1]=Zt+tn,ln.i[3][0]=nn?Jt-en:Jt+en,ln.i[3][1]=Zt+tn*Bt,ln.o[0][0]=nn?Jt+en*Bt:Jt-en*Bt,ln.o[0][1]=Zt-tn,ln.o[1][0]=nn?Jt+en:Jt-en,ln.o[1][1]=Zt+tn*Bt,ln.o[2][0]=nn?Jt-en*Bt:Jt+en*Bt,ln.o[2][1]=Zt+tn,ln.o[3][0]=nn?Jt-en:Jt+en,ln.o[3][1]=Zt-tn*Bt}},extendPrototype([DynamicPropertyContainer],Ut),Ut}(),Rt=function(){function Bt(Ut,Yt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Ut,this.comp=Ut.comp,this.data=Yt,this.frameId=-1,this.d=Yt.d,this.initDynamicPropertyContainer(Ut),Yt.sy===1?(this.ir=PropertyFactory.getProp(Ut,Yt.ir,0,0,this),this.is=PropertyFactory.getProp(Ut,Yt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Ut,Yt.pt,0,0,this),this.p=PropertyFactory.getProp(Ut,Yt.p,1,0,this),this.r=PropertyFactory.getProp(Ut,Yt.r,0,degToRads,this),this.or=PropertyFactory.getProp(Ut,Yt.or,0,0,this),this.os=PropertyFactory.getProp(Ut,Yt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Bt.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Yt=Math.floor(this.pt.v)*2,Jt=Math.PI*2/Yt,Zt=!0,en=this.or.v,tn=this.ir.v,nn=this.os.v,ln=this.is.v,an=2*Math.PI*en/(Yt*2),sn=2*Math.PI*tn/(Yt*2),dn,mn,yn,vn,hn=-Math.PI/2;hn+=this.r.v;var pn=this.data.d===3?-1:1;for(this.v._length=0,dn=0;dn<Yt;dn+=1){mn=Zt?en:tn,yn=Zt?nn:ln,vn=Zt?an:sn;var rn=mn*Math.cos(hn),on=mn*Math.sin(hn),gn=rn===0&&on===0?0:on/Math.sqrt(rn*rn+on*on),un=rn===0&&on===0?0:-rn/Math.sqrt(rn*rn+on*on);rn+=+this.p.v[0],on+=+this.p.v[1],this.v.setTripleAt(rn,on,rn-gn*vn*yn*pn,on-un*vn*yn*pn,rn+gn*vn*yn*pn,on+un*vn*yn*pn,dn,!0),Zt=!Zt,hn+=Jt*pn}},convertPolygonToPath:function(){var Yt=Math.floor(this.pt.v),Jt=Math.PI*2/Yt,Zt=this.or.v,en=this.os.v,tn=2*Math.PI*Zt/(Yt*4),nn,ln=-Math.PI*.5,an=this.data.d===3?-1:1;for(ln+=this.r.v,this.v._length=0,nn=0;nn<Yt;nn+=1){var sn=Zt*Math.cos(ln),dn=Zt*Math.sin(ln),mn=sn===0&&dn===0?0:dn/Math.sqrt(sn*sn+dn*dn),yn=sn===0&&dn===0?0:-sn/Math.sqrt(sn*sn+dn*dn);sn+=+this.p.v[0],dn+=+this.p.v[1],this.v.setTripleAt(sn,dn,sn-mn*tn*en*an,dn-yn*tn*en*an,sn+mn*tn*en*an,dn+yn*tn*en*an,nn,!0),ln+=Jt*an}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Bt),Bt}(),jt=function(){function Bt(Ut,Yt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Ut,this.comp=Ut.comp,this.frameId=-1,this.d=Yt.d,this.initDynamicPropertyContainer(Ut),this.p=PropertyFactory.getProp(Ut,Yt.p,1,0,this),this.s=PropertyFactory.getProp(Ut,Yt.s,1,0,this),this.r=PropertyFactory.getProp(Ut,Yt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Bt.prototype={convertRectToPath:function(){var Yt=this.p.v[0],Jt=this.p.v[1],Zt=this.s.v[0]/2,en=this.s.v[1]/2,tn=bmMin(Zt,en,this.r.v),nn=tn*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Yt+Zt,Jt-en+tn,Yt+Zt,Jt-en+tn,Yt+Zt,Jt-en+nn,0,!0),this.v.setTripleAt(Yt+Zt,Jt+en-tn,Yt+Zt,Jt+en-nn,Yt+Zt,Jt+en-tn,1,!0),tn!==0?(this.v.setTripleAt(Yt+Zt-tn,Jt+en,Yt+Zt-tn,Jt+en,Yt+Zt-nn,Jt+en,2,!0),this.v.setTripleAt(Yt-Zt+tn,Jt+en,Yt-Zt+nn,Jt+en,Yt-Zt+tn,Jt+en,3,!0),this.v.setTripleAt(Yt-Zt,Jt+en-tn,Yt-Zt,Jt+en-tn,Yt-Zt,Jt+en-nn,4,!0),this.v.setTripleAt(Yt-Zt,Jt-en+tn,Yt-Zt,Jt-en+nn,Yt-Zt,Jt-en+tn,5,!0),this.v.setTripleAt(Yt-Zt+tn,Jt-en,Yt-Zt+tn,Jt-en,Yt-Zt+nn,Jt-en,6,!0),this.v.setTripleAt(Yt+Zt-tn,Jt-en,Yt+Zt-nn,Jt-en,Yt+Zt-tn,Jt-en,7,!0)):(this.v.setTripleAt(Yt-Zt,Jt+en,Yt-Zt+nn,Jt+en,Yt-Zt,Jt+en,2),this.v.setTripleAt(Yt-Zt,Jt-en,Yt-Zt,Jt-en+nn,Yt-Zt,Jt-en,3))):(this.v.setTripleAt(Yt+Zt,Jt-en+tn,Yt+Zt,Jt-en+nn,Yt+Zt,Jt-en+tn,0,!0),tn!==0?(this.v.setTripleAt(Yt+Zt-tn,Jt-en,Yt+Zt-tn,Jt-en,Yt+Zt-nn,Jt-en,1,!0),this.v.setTripleAt(Yt-Zt+tn,Jt-en,Yt-Zt+nn,Jt-en,Yt-Zt+tn,Jt-en,2,!0),this.v.setTripleAt(Yt-Zt,Jt-en+tn,Yt-Zt,Jt-en+tn,Yt-Zt,Jt-en+nn,3,!0),this.v.setTripleAt(Yt-Zt,Jt+en-tn,Yt-Zt,Jt+en-nn,Yt-Zt,Jt+en-tn,4,!0),this.v.setTripleAt(Yt-Zt+tn,Jt+en,Yt-Zt+tn,Jt+en,Yt-Zt+nn,Jt+en,5,!0),this.v.setTripleAt(Yt+Zt-tn,Jt+en,Yt+Zt-nn,Jt+en,Yt+Zt-tn,Jt+en,6,!0),this.v.setTripleAt(Yt+Zt,Jt+en-tn,Yt+Zt,Jt+en-tn,Yt+Zt,Jt+en-nn,7,!0)):(this.v.setTripleAt(Yt-Zt,Jt-en,Yt-Zt+nn,Jt-en,Yt-Zt,Jt-en,1,!0),this.v.setTripleAt(Yt-Zt,Jt+en,Yt-Zt,Jt+en-nn,Yt-Zt,Jt+en,2,!0),this.v.setTripleAt(Yt+Zt,Jt+en,Yt+Zt-nn,Jt+en,Yt+Zt,Jt+en,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:ot},extendPrototype([DynamicPropertyContainer],Bt),Bt}();function $t(Bt,Ut,Yt){var Jt;if(Yt===3||Yt===4){var Zt=Yt===3?Ut.pt:Ut.ks,en=Zt.k;en.length?Jt=new kt(Bt,Ut,Yt):Jt=new ft(Bt,Ut,Yt)}else Yt===5?Jt=new jt(Bt,Ut):Yt===6?Jt=new Tt(Bt,Ut):Yt===7&&(Jt=new Rt(Bt,Ut));return Jt.k&&Bt.addDynamicProperty(Jt),Jt}function Ft(){return ft}function Ht(){return kt}var Kt={};return Kt.getShapeProp=$t,Kt.getConstructorFunction=Ft,Kt.getKeyframedConstructorFunction=Ht,Kt}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var it=Math.cos,g=Math.sin,et=Math.tan,ot=Math.round;function ct(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ut(rn){if(rn===0)return this;var on=it(rn),gn=g(rn);return this._t(on,-gn,0,0,gn,on,0,0,0,0,1,0,0,0,0,1)}function dt(rn){if(rn===0)return this;var on=it(rn),gn=g(rn);return this._t(1,0,0,0,0,on,-gn,0,0,gn,on,0,0,0,0,1)}function ft(rn){if(rn===0)return this;var on=it(rn),gn=g(rn);return this._t(on,0,gn,0,0,1,0,0,-gn,0,on,0,0,0,0,1)}function St(rn){if(rn===0)return this;var on=it(rn),gn=g(rn);return this._t(on,-gn,0,0,gn,on,0,0,0,0,1,0,0,0,0,1)}function kt(rn,on){return this._t(1,on,rn,1,0,0)}function Tt(rn,on){return this.shear(et(rn),et(on))}function Rt(rn,on){var gn=it(on),un=g(on);return this._t(gn,un,0,0,-un,gn,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,et(rn),1,0,0,0,0,1,0,0,0,0,1)._t(gn,-un,0,0,un,gn,0,0,0,0,1,0,0,0,0,1)}function jt(rn,on,gn){return!gn&&gn!==0&&(gn=1),rn===1&&on===1&&gn===1?this:this._t(rn,0,0,0,0,on,0,0,0,0,gn,0,0,0,0,1)}function $t(rn,on,gn,un,xn,En,wn,kn,Sn,An,Cn,Tn,_n,Dn,$n,On){return this.props[0]=rn,this.props[1]=on,this.props[2]=gn,this.props[3]=un,this.props[4]=xn,this.props[5]=En,this.props[6]=wn,this.props[7]=kn,this.props[8]=Sn,this.props[9]=An,this.props[10]=Cn,this.props[11]=Tn,this.props[12]=_n,this.props[13]=Dn,this.props[14]=$n,this.props[15]=On,this}function Ft(rn,on,gn){return gn=gn||0,rn!==0||on!==0||gn!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,rn,on,gn,1):this}function Ht(rn,on,gn,un,xn,En,wn,kn,Sn,An,Cn,Tn,_n,Dn,$n,On){var Mn=this.props;if(rn===1&&on===0&&gn===0&&un===0&&xn===0&&En===1&&wn===0&&kn===0&&Sn===0&&An===0&&Cn===1&&Tn===0)return Mn[12]=Mn[12]*rn+Mn[15]*_n,Mn[13]=Mn[13]*En+Mn[15]*Dn,Mn[14]=Mn[14]*Cn+Mn[15]*$n,Mn[15]*=On,this._identityCalculated=!1,this;var Vn=Mn[0],Wn=Mn[1],Yn=Mn[2],Rn=Mn[3],Pn=Mn[4],Ln=Mn[5],In=Mn[6],Nn=Mn[7],Hn=Mn[8],zn=Mn[9],Un=Mn[10],lr=Mn[11],cr=Mn[12],Xn=Mn[13],Yr=Mn[14],Zn=Mn[15];return Mn[0]=Vn*rn+Wn*xn+Yn*Sn+Rn*_n,Mn[1]=Vn*on+Wn*En+Yn*An+Rn*Dn,Mn[2]=Vn*gn+Wn*wn+Yn*Cn+Rn*$n,Mn[3]=Vn*un+Wn*kn+Yn*Tn+Rn*On,Mn[4]=Pn*rn+Ln*xn+In*Sn+Nn*_n,Mn[5]=Pn*on+Ln*En+In*An+Nn*Dn,Mn[6]=Pn*gn+Ln*wn+In*Cn+Nn*$n,Mn[7]=Pn*un+Ln*kn+In*Tn+Nn*On,Mn[8]=Hn*rn+zn*xn+Un*Sn+lr*_n,Mn[9]=Hn*on+zn*En+Un*An+lr*Dn,Mn[10]=Hn*gn+zn*wn+Un*Cn+lr*$n,Mn[11]=Hn*un+zn*kn+Un*Tn+lr*On,Mn[12]=cr*rn+Xn*xn+Yr*Sn+Zn*_n,Mn[13]=cr*on+Xn*En+Yr*An+Zn*Dn,Mn[14]=cr*gn+Xn*wn+Yr*Cn+Zn*$n,Mn[15]=cr*un+Xn*kn+Yr*Tn+Zn*On,this._identityCalculated=!1,this}function Kt(rn){var on=rn.props;return this.transform(on[0],on[1],on[2],on[3],on[4],on[5],on[6],on[7],on[8],on[9],on[10],on[11],on[12],on[13],on[14],on[15])}function Bt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Ut(rn){for(var on=0;on<16;){if(rn.props[on]!==this.props[on])return!1;on+=1}return!0}function Yt(rn){var on;for(on=0;on<16;on+=1)rn.props[on]=this.props[on];return rn}function Jt(rn){var on;for(on=0;on<16;on+=1)this.props[on]=rn[on]}function Zt(rn,on,gn){return{x:rn*this.props[0]+on*this.props[4]+gn*this.props[8]+this.props[12],y:rn*this.props[1]+on*this.props[5]+gn*this.props[9]+this.props[13],z:rn*this.props[2]+on*this.props[6]+gn*this.props[10]+this.props[14]}}function en(rn,on,gn){return rn*this.props[0]+on*this.props[4]+gn*this.props[8]+this.props[12]}function tn(rn,on,gn){return rn*this.props[1]+on*this.props[5]+gn*this.props[9]+this.props[13]}function nn(rn,on,gn){return rn*this.props[2]+on*this.props[6]+gn*this.props[10]+this.props[14]}function ln(){var rn=this.props[0]*this.props[5]-this.props[1]*this.props[4],on=this.props[5]/rn,gn=-this.props[1]/rn,un=-this.props[4]/rn,xn=this.props[0]/rn,En=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/rn,wn=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/rn,kn=new Matrix;return kn.props[0]=on,kn.props[1]=gn,kn.props[4]=un,kn.props[5]=xn,kn.props[12]=En,kn.props[13]=wn,kn}function an(rn){var on=this.getInverseMatrix();return on.applyToPointArray(rn[0],rn[1],rn[2]||0)}function sn(rn){var on,gn=rn.length,un=[];for(on=0;on<gn;on+=1)un[on]=an(rn[on]);return un}function dn(rn,on,gn){var un=createTypedArray("float32",6);if(this.isIdentity())un[0]=rn[0],un[1]=rn[1],un[2]=on[0],un[3]=on[1],un[4]=gn[0],un[5]=gn[1];else{var xn=this.props[0],En=this.props[1],wn=this.props[4],kn=this.props[5],Sn=this.props[12],An=this.props[13];un[0]=rn[0]*xn+rn[1]*wn+Sn,un[1]=rn[0]*En+rn[1]*kn+An,un[2]=on[0]*xn+on[1]*wn+Sn,un[3]=on[0]*En+on[1]*kn+An,un[4]=gn[0]*xn+gn[1]*wn+Sn,un[5]=gn[0]*En+gn[1]*kn+An}return un}function mn(rn,on,gn){var un;return this.isIdentity()?un=[rn,on,gn]:un=[rn*this.props[0]+on*this.props[4]+gn*this.props[8]+this.props[12],rn*this.props[1]+on*this.props[5]+gn*this.props[9]+this.props[13],rn*this.props[2]+on*this.props[6]+gn*this.props[10]+this.props[14]],un}function yn(rn,on){if(this.isIdentity())return rn+","+on;var gn=this.props;return Math.round((rn*gn[0]+on*gn[4]+gn[12])*100)/100+","+Math.round((rn*gn[1]+on*gn[5]+gn[13])*100)/100}function vn(){for(var rn=0,on=this.props,gn="matrix3d(",un=1e4;rn<16;)gn+=ot(on[rn]*un)/un,gn+=rn===15?")":",",rn+=1;return gn}function hn(rn){var on=1e4;return rn<1e-6&&rn>0||rn>-1e-6&&rn<0?ot(rn*on)/on:rn}function pn(){var rn=this.props,on=hn(rn[0]),gn=hn(rn[1]),un=hn(rn[4]),xn=hn(rn[5]),En=hn(rn[12]),wn=hn(rn[13]);return"matrix("+on+","+gn+","+un+","+xn+","+En+","+wn+")"}return function(){this.reset=ct,this.rotate=ut,this.rotateX=dt,this.rotateY=ft,this.rotateZ=St,this.skew=Tt,this.skewFromAxis=Rt,this.shear=kt,this.scale=jt,this.setTransform=$t,this.translate=Ft,this.transform=Ht,this.multiply=Kt,this.applyToPoint=Zt,this.applyToX=en,this.applyToY=tn,this.applyToZ=nn,this.applyToPointArray=mn,this.applyToTriplePoints=dn,this.applyToPointStringified=yn,this.toCSS=vn,this.to2dCSS=pn,this.clone=Yt,this.cloneFromProps=Jt,this.equals=Ut,this.inversePoints=sn,this.inversePoint=an,this.getInverseMatrix=ln,this._t=this.transform,this.isIdentity=Bt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(et){return typeof et}:_typeof$3=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$3(it)}var lottie={};function setLocation(it){setLocationHref(it)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(it){setSubframeEnabled(it)}function setPrefix(it){setIdPrefix(it)}function loadAnimation(it){return animationManager.loadAnimation(it)}function setQuality(it){if(typeof it=="string")switch(it){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(it)&&it>1&&setDefaultCurveSegments(it)}function inBrowser(){return typeof navigator<"u"}function installPlugin(it,g){it==="expressions"&&setExpressionsPlugin(g)}function getFactory(it){switch(it){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(it){for(var g=queryString.split("&"),et=0;et<g.length;et+=1){var ot=g[et].split("=");if(decodeURIComponent(ot[0])==it)return decodeURIComponent(ot[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(it){}var ShapeModifiers=function(){var it={},g={};it.registerModifier=et,it.getModifier=ot;function et(ct,ut){g[ct]||(g[ct]=ut)}function ot(ct,ut,dt){return new g[ct](ut,dt)}return it}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(it){if(!this.closed){it.sh.container.addDynamicProperty(it.sh);var g={shape:it.sh,data:it,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(g),this.addShapeToModifier(g),this._isAnimated&&it.setAsAnimated()}},ShapeModifier.prototype.init=function(it,g){this.shapes=[],this.elem=it,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(it,g){this.s=PropertyFactory.getProp(it,g.s,0,.01,this),this.e=PropertyFactory.getProp(it,g.e,0,.01,this),this.o=PropertyFactory.getProp(it,g.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=g.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(it){it.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(it,g,et,ot,ct){var ut=[];g<=1?ut.push({s:it,e:g}):it>=1?ut.push({s:it-1,e:g-1}):(ut.push({s:it,e:1}),ut.push({s:0,e:g-1}));var dt=[],ft,St=ut.length,kt;for(ft=0;ft<St;ft+=1)if(kt=ut[ft],!(kt.e*ct<ot||kt.s*ct>ot+et)){var Tt,Rt;kt.s*ct<=ot?Tt=0:Tt=(kt.s*ct-ot)/et,kt.e*ct>=ot+et?Rt=1:Rt=(kt.e*ct-ot)/et,dt.push([Tt,Rt])}return dt.length||dt.push([0,0]),dt},TrimModifier.prototype.releasePathsData=function(it){var g,et=it.length;for(g=0;g<et;g+=1)segmentsLengthPool.release(it[g]);return it.length=0,it},TrimModifier.prototype.processShapes=function(it){var g,et;if(this._mdf||it){var ot=this.o.v%360/360;if(ot<0&&(ot+=1),this.s.v>1?g=1+ot:this.s.v<0?g=0+ot:g=this.s.v+ot,this.e.v>1?et=1+ot:this.e.v<0?et=0+ot:et=this.e.v+ot,g>et){var ct=g;g=et,et=ct}g=Math.round(g*1e4)*1e-4,et=Math.round(et*1e4)*1e-4,this.sValue=g,this.eValue=et}else g=this.sValue,et=this.eValue;var ut,dt,ft=this.shapes.length,St,kt,Tt,Rt,jt,$t=0;if(et===g)for(dt=0;dt<ft;dt+=1)this.shapes[dt].localShapeCollection.releaseShapes(),this.shapes[dt].shape._mdf=!0,this.shapes[dt].shape.paths=this.shapes[dt].localShapeCollection,this._mdf&&(this.shapes[dt].pathsData.length=0);else if(et===1&&g===0||et===0&&g===1){if(this._mdf)for(dt=0;dt<ft;dt+=1)this.shapes[dt].pathsData.length=0,this.shapes[dt].shape._mdf=!0}else{var Ft=[],Ht,Kt;for(dt=0;dt<ft;dt+=1)if(Ht=this.shapes[dt],!Ht.shape._mdf&&!this._mdf&&!it&&this.m!==2)Ht.shape.paths=Ht.localShapeCollection;else{if(ut=Ht.shape.paths,kt=ut._length,jt=0,!Ht.shape._mdf&&Ht.pathsData.length)jt=Ht.totalShapeLength;else{for(Tt=this.releasePathsData(Ht.pathsData),St=0;St<kt;St+=1)Rt=bez.getSegmentsLength(ut.shapes[St]),Tt.push(Rt),jt+=Rt.totalLength;Ht.totalShapeLength=jt,Ht.pathsData=Tt}$t+=jt,Ht.shape._mdf=!0}var Bt=g,Ut=et,Yt=0,Jt;for(dt=ft-1;dt>=0;dt-=1)if(Ht=this.shapes[dt],Ht.shape._mdf){for(Kt=Ht.localShapeCollection,Kt.releaseShapes(),this.m===2&&ft>1?(Jt=this.calculateShapeEdges(g,et,Ht.totalShapeLength,Yt,$t),Yt+=Ht.totalShapeLength):Jt=[[Bt,Ut]],kt=Jt.length,St=0;St<kt;St+=1){Bt=Jt[St][0],Ut=Jt[St][1],Ft.length=0,Ut<=1?Ft.push({s:Ht.totalShapeLength*Bt,e:Ht.totalShapeLength*Ut}):Bt>=1?Ft.push({s:Ht.totalShapeLength*(Bt-1),e:Ht.totalShapeLength*(Ut-1)}):(Ft.push({s:Ht.totalShapeLength*Bt,e:Ht.totalShapeLength}),Ft.push({s:0,e:Ht.totalShapeLength*(Ut-1)}));var Zt=this.addShapes(Ht,Ft[0]);if(Ft[0].s!==Ft[0].e){if(Ft.length>1){var en=Ht.shape.paths.shapes[Ht.shape.paths._length-1];if(en.c){var tn=Zt.pop();this.addPaths(Zt,Kt),Zt=this.addShapes(Ht,Ft[1],tn)}else this.addPaths(Zt,Kt),Zt=this.addShapes(Ht,Ft[1])}this.addPaths(Zt,Kt)}}Ht.shape.paths=Kt}}},TrimModifier.prototype.addPaths=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g.addShape(it[et])},TrimModifier.prototype.addSegment=function(it,g,et,ot,ct,ut,dt){ct.setXYAt(g[0],g[1],"o",ut),ct.setXYAt(et[0],et[1],"i",ut+1),dt&&ct.setXYAt(it[0],it[1],"v",ut),ct.setXYAt(ot[0],ot[1],"v",ut+1)},TrimModifier.prototype.addSegmentFromArray=function(it,g,et,ot){g.setXYAt(it[1],it[5],"o",et),g.setXYAt(it[2],it[6],"i",et+1),ot&&g.setXYAt(it[0],it[4],"v",et),g.setXYAt(it[3],it[7],"v",et+1)},TrimModifier.prototype.addShapes=function(it,g,et){var ot=it.pathsData,ct=it.shape.paths.shapes,ut,dt=it.shape.paths._length,ft,St,kt=0,Tt,Rt,jt,$t,Ft=[],Ht,Kt=!0;for(et?(Rt=et._length,Ht=et._length):(et=shapePool.newElement(),Rt=0,Ht=0),Ft.push(et),ut=0;ut<dt;ut+=1){for(jt=ot[ut].lengths,et.c=ct[ut].c,St=ct[ut].c?jt.length:jt.length+1,ft=1;ft<St;ft+=1)if(Tt=jt[ft-1],kt+Tt.addedLength<g.s)kt+=Tt.addedLength,et.c=!1;else if(kt>g.e){et.c=!1;break}else g.s<=kt&&g.e>=kt+Tt.addedLength?(this.addSegment(ct[ut].v[ft-1],ct[ut].o[ft-1],ct[ut].i[ft],ct[ut].v[ft],et,Rt,Kt),Kt=!1):($t=bez.getNewSegment(ct[ut].v[ft-1],ct[ut].v[ft],ct[ut].o[ft-1],ct[ut].i[ft],(g.s-kt)/Tt.addedLength,(g.e-kt)/Tt.addedLength,jt[ft-1]),this.addSegmentFromArray($t,et,Rt,Kt),Kt=!1,et.c=!1),kt+=Tt.addedLength,Rt+=1;if(ct[ut].c&&jt.length){if(Tt=jt[ft-1],kt<=g.e){var Bt=jt[ft-1].addedLength;g.s<=kt&&g.e>=kt+Bt?(this.addSegment(ct[ut].v[ft-1],ct[ut].o[ft-1],ct[ut].i[0],ct[ut].v[0],et,Rt,Kt),Kt=!1):($t=bez.getNewSegment(ct[ut].v[ft-1],ct[ut].v[0],ct[ut].o[ft-1],ct[ut].i[0],(g.s-kt)/Bt,(g.e-kt)/Bt,jt[ft-1]),this.addSegmentFromArray($t,et,Rt,Kt),Kt=!1,et.c=!1)}else et.c=!1;kt+=Tt.addedLength,Rt+=1}if(et._length&&(et.setXYAt(et.v[Ht][0],et.v[Ht][1],"i",Ht),et.setXYAt(et.v[et._length-1][0],et.v[et._length-1][1],"o",et._length-1)),kt>g.e)break;ut<dt-1&&(et=shapePool.newElement(),Kt=!0,Ft.push(et),Rt=0)}return Ft};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(it,g){var et=g/100,ot=[0,0],ct=it._length,ut=0;for(ut=0;ut<ct;ut+=1)ot[0]+=it.v[ut][0],ot[1]+=it.v[ut][1];ot[0]/=ct,ot[1]/=ct;var dt=shapePool.newElement();dt.c=it.c;var ft,St,kt,Tt,Rt,jt;for(ut=0;ut<ct;ut+=1)ft=it.v[ut][0]+(ot[0]-it.v[ut][0])*et,St=it.v[ut][1]+(ot[1]-it.v[ut][1])*et,kt=it.o[ut][0]+(ot[0]-it.o[ut][0])*-et,Tt=it.o[ut][1]+(ot[1]-it.o[ut][1])*-et,Rt=it.i[ut][0]+(ot[0]-it.i[ut][0])*-et,jt=it.i[ut][1]+(ot[1]-it.i[ut][1])*-et,dt.setTripleAt(ft,St,kt,Tt,Rt,jt,ut);return dt},PuckerAndBloatModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amount.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ut=ft.shape.paths._length,ct=0;ct<ut;ct+=1)St.addShape(this.processPath(g[ct],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var it=[0,0];function g(St){var kt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||kt,this.a&&St.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&St.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&St.skewFromAxis(-this.sk.v,this.sa.v),this.r?St.rotate(-this.r.v):St.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?St.translate(this.px.v,this.py.v,-this.pz.v):St.translate(this.px.v,this.py.v,0):St.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function et(St){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||St){var kt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Tt,Rt;if(kt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Tt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/kt,0),Rt=this.p.getValueAtTime(this.p.keyframes[0].t/kt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Tt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/kt,0),Rt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/kt,0)):(Tt=this.p.pv,Rt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/kt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Tt=[],Rt=[];var jt=this.px,$t=this.py;jt._caching.lastFrame+jt.offsetTime<=jt.keyframes[0].t?(Tt[0]=jt.getValueAtTime((jt.keyframes[0].t+.01)/kt,0),Tt[1]=$t.getValueAtTime(($t.keyframes[0].t+.01)/kt,0),Rt[0]=jt.getValueAtTime(jt.keyframes[0].t/kt,0),Rt[1]=$t.getValueAtTime($t.keyframes[0].t/kt,0)):jt._caching.lastFrame+jt.offsetTime>=jt.keyframes[jt.keyframes.length-1].t?(Tt[0]=jt.getValueAtTime(jt.keyframes[jt.keyframes.length-1].t/kt,0),Tt[1]=$t.getValueAtTime($t.keyframes[$t.keyframes.length-1].t/kt,0),Rt[0]=jt.getValueAtTime((jt.keyframes[jt.keyframes.length-1].t-.01)/kt,0),Rt[1]=$t.getValueAtTime(($t.keyframes[$t.keyframes.length-1].t-.01)/kt,0)):(Tt=[jt.pv,$t.pv],Rt[0]=jt.getValueAtTime((jt._caching.lastFrame+jt.offsetTime-.01)/kt,jt.offsetTime),Rt[1]=$t.getValueAtTime(($t._caching.lastFrame+$t.offsetTime-.01)/kt,$t.offsetTime))}else Rt=it,Tt=Rt;this.v.rotate(-Math.atan2(Tt[1]-Rt[1],Tt[0]-Rt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function ot(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function ct(){}function ut(St){this._addDynamicProperty(St),this.elem.addDynamicProperty(St),this._isDirty=!0}function dt(St,kt,Tt){if(this.elem=St,this.frameId=-1,this.propType="transform",this.data=kt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Tt||St),kt.p&&kt.p.s?(this.px=PropertyFactory.getProp(St,kt.p.x,0,0,this),this.py=PropertyFactory.getProp(St,kt.p.y,0,0,this),kt.p.z&&(this.pz=PropertyFactory.getProp(St,kt.p.z,0,0,this))):this.p=PropertyFactory.getProp(St,kt.p||{k:[0,0,0]},1,0,this),kt.rx){if(this.rx=PropertyFactory.getProp(St,kt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(St,kt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(St,kt.rz,0,degToRads,this),kt.or.k[0].ti){var Rt,jt=kt.or.k.length;for(Rt=0;Rt<jt;Rt+=1)kt.or.k[Rt].to=null,kt.or.k[Rt].ti=null}this.or=PropertyFactory.getProp(St,kt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(St,kt.r||{k:0},0,degToRads,this);kt.sk&&(this.sk=PropertyFactory.getProp(St,kt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(St,kt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(St,kt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(St,kt.s||{k:[100,100,100]},1,.01,this),kt.o?this.o=PropertyFactory.getProp(St,kt.o,0,.01,St):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}dt.prototype={applyToMatrix:g,getValue:et,precalculateMatrix:ot,autoOrient:ct},extendPrototype([DynamicPropertyContainer],dt),dt.prototype.addDynamicProperty=ut,dt.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function ft(St,kt,Tt){return new dt(St,kt,Tt)}return{getTransformProperty:ft}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(it,g.c,0,null,this),this.o=PropertyFactory.getProp(it,g.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(it,g.tr,this),this.so=PropertyFactory.getProp(it,g.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(it,g.tr.eo,0,.01,this),this.data=g,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(it,g,et,ot,ct,ut){var dt=ut?-1:1,ft=ot.s.v[0]+(1-ot.s.v[0])*(1-ct),St=ot.s.v[1]+(1-ot.s.v[1])*(1-ct);it.translate(ot.p.v[0]*dt*ct,ot.p.v[1]*dt*ct,ot.p.v[2]),g.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),g.rotate(-ot.r.v*dt*ct),g.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2]),et.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),et.scale(ut?1/ft:ft,ut?1/St:St),et.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])},RepeaterModifier.prototype.init=function(it,g,et,ot){for(this.elem=it,this.arr=g,this.pos=et,this.elemsData=ot,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g[et]);et>0;)et-=1,this._elements.unshift(g[et]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g]._processed=!1,it[g].ty==="gr"&&this.resetElements(it[g].it)},RepeaterModifier.prototype.cloneElements=function(it){var g=JSON.parse(JSON.stringify(it));return this.resetElements(g),g},RepeaterModifier.prototype.changeGroupRender=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]._render=g,it[et].ty==="gr"&&this.changeGroupRender(it[et].it,g)},RepeaterModifier.prototype.processShapes=function(it){var g,et,ot,ct,ut,dt=!1;if(this._mdf||it){var ft=Math.ceil(this.c.v);if(this._groups.length<ft){for(;this._groups.length<ft;){var St={it:this.cloneElements(this._elements),ty:"gr"};St.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,St),this._groups.splice(0,0,St),this._currentCopies+=1}this.elem.reloadShapes(),dt=!0}ut=0;var kt;for(ot=0;ot<=this._groups.length-1;ot+=1){if(kt=ut<ft,this._groups[ot]._render=kt,this.changeGroupRender(this._groups[ot].it,kt),!kt){var Tt=this.elemsData[ot].it,Rt=Tt[Tt.length-1];Rt.transform.op.v!==0?(Rt.transform.op._mdf=!0,Rt.transform.op.v=0):Rt.transform.op._mdf=!1}ut+=1}this._currentCopies=ft;var jt=this.o.v,$t=jt%1,Ft=jt>0?Math.floor(jt):Math.ceil(jt),Ht=this.pMatrix.props,Kt=this.rMatrix.props,Bt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Ut=0;if(jt>0){for(;Ut<Ft;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ut+=1;$t&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,$t,!1),Ut+=$t)}else if(jt<0){for(;Ut>Ft;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ut-=1;$t&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-$t,!0),Ut-=$t)}ot=this.data.m===1?0:this._currentCopies-1,ct=this.data.m===1?1:-1,ut=this._currentCopies;for(var Yt,Jt;ut;){if(g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,Jt=et.length,g[g.length-1].transform.mProps._mdf=!0,g[g.length-1].transform.op._mdf=!0,g[g.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(ot/(this._currentCopies-1)),Ut!==0){for((ot!==0&&ct===1||ot!==this._currentCopies-1&&ct===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Kt[0],Kt[1],Kt[2],Kt[3],Kt[4],Kt[5],Kt[6],Kt[7],Kt[8],Kt[9],Kt[10],Kt[11],Kt[12],Kt[13],Kt[14],Kt[15]),this.matrix.transform(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5],Bt[6],Bt[7],Bt[8],Bt[9],Bt[10],Bt[11],Bt[12],Bt[13],Bt[14],Bt[15]),this.matrix.transform(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5],Ht[6],Ht[7],Ht[8],Ht[9],Ht[10],Ht[11],Ht[12],Ht[13],Ht[14],Ht[15]),Yt=0;Yt<Jt;Yt+=1)et[Yt]=this.matrix.props[Yt];this.matrix.reset()}else for(this.matrix.reset(),Yt=0;Yt<Jt;Yt+=1)et[Yt]=this.matrix.props[Yt];Ut+=1,ut-=1,ot+=ct}}else for(ut=this._currentCopies,ot=0,ct=1;ut;)g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,g[g.length-1].transform.mProps._mdf=!1,g[g.length-1].transform.op._mdf=!1,ut-=1,ot+=ct;return dt},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(it,g.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(it,g){var et=shapePool.newElement();et.c=it.c;var ot,ct=it._length,ut,dt,ft,St,kt,Tt,Rt=0,jt,$t,Ft,Ht,Kt,Bt;for(ot=0;ot<ct;ot+=1)ut=it.v[ot],ft=it.o[ot],dt=it.i[ot],ut[0]===ft[0]&&ut[1]===ft[1]&&ut[0]===dt[0]&&ut[1]===dt[1]?(ot===0||ot===ct-1)&&!it.c?(et.setTripleAt(ut[0],ut[1],ft[0],ft[1],dt[0],dt[1],Rt),Rt+=1):(ot===0?St=it.v[ct-1]:St=it.v[ot-1],kt=Math.sqrt(Math.pow(ut[0]-St[0],2)+Math.pow(ut[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,Kt=ut[0]+(St[0]-ut[0])*Tt,jt=Kt,Bt=ut[1]-(ut[1]-St[1])*Tt,$t=Bt,Ft=jt-(jt-ut[0])*roundCorner,Ht=$t-($t-ut[1])*roundCorner,et.setTripleAt(jt,$t,Ft,Ht,Kt,Bt,Rt),Rt+=1,ot===ct-1?St=it.v[0]:St=it.v[ot+1],kt=Math.sqrt(Math.pow(ut[0]-St[0],2)+Math.pow(ut[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,Ft=ut[0]+(St[0]-ut[0])*Tt,jt=Ft,Ht=ut[1]+(St[1]-ut[1])*Tt,$t=Ht,Kt=jt-(jt-ut[0])*roundCorner,Bt=$t-($t-ut[1])*roundCorner,et.setTripleAt(jt,$t,Ft,Ht,Kt,Bt,Rt),Rt+=1):(et.setTripleAt(it.v[ot][0],it.v[ot][1],it.o[ot][0],it.o[ot][1],it.i[ot][0],it.i[ot][1],Rt),Rt+=1);return et},RoundCornersModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.rd.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ut=ft.shape.paths._length,ct=0;ct<ut;ct+=1)St.addShape(this.processPath(g[ct],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(it,g){return Math.abs(it-g)*1e5<=Math.min(Math.abs(it),Math.abs(g))}function floatZero(it){return Math.abs(it)<=1e-5}function lerp(it,g,et){return it*(1-et)+g*et}function lerpPoint(it,g,et){return[lerp(it[0],g[0],et),lerp(it[1],g[1],et)]}function quadRoots(it,g,et){if(it===0)return[];var ot=g*g-4*it*et;if(ot<0)return[];var ct=-g/(2*it);if(ot===0)return[ct];var ut=Math.sqrt(ot)/(2*it);return[ct-ut,ct+ut]}function polynomialCoefficients(it,g,et,ot){return[-it+3*g-3*et+ot,3*it-6*g+3*et,-3*it+3*g,it]}function singlePoint(it){return new PolynomialBezier(it,it,it,it,!1)}function PolynomialBezier(it,g,et,ot,ct){ct&&pointEqual(it,g)&&(g=lerpPoint(it,ot,1/3)),ct&&pointEqual(et,ot)&&(et=lerpPoint(it,ot,2/3));var ut=polynomialCoefficients(it[0],g[0],et[0],ot[0]),dt=polynomialCoefficients(it[1],g[1],et[1],ot[1]);this.a=[ut[0],dt[0]],this.b=[ut[1],dt[1]],this.c=[ut[2],dt[2]],this.d=[ut[3],dt[3]],this.points=[it,g,et,ot]}PolynomialBezier.prototype.point=function(it){return[((this.a[0]*it+this.b[0])*it+this.c[0])*it+this.d[0],((this.a[1]*it+this.b[1])*it+this.c[1])*it+this.d[1]]},PolynomialBezier.prototype.derivative=function(it){return[(3*it*this.a[0]+2*this.b[0])*it+this.c[0],(3*it*this.a[1]+2*this.b[1])*it+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(it){var g=this.derivative(it);return Math.atan2(g[1],g[0])},PolynomialBezier.prototype.normalAngle=function(it){var g=this.derivative(it);return Math.atan2(g[0],g[1])},PolynomialBezier.prototype.inflectionPoints=function(){var it=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(it))return[];var g=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/it,et=g*g-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/it;if(et<0)return[];var ot=Math.sqrt(et);return floatZero(ot)?ot>0&&ot<1?[g]:[]:[g-ot,g+ot].filter(function(ct){return ct>0&&ct<1})},PolynomialBezier.prototype.split=function(it){if(it<=0)return[singlePoint(this.points[0]),this];if(it>=1)return[this,singlePoint(this.points[this.points.length-1])];var g=lerpPoint(this.points[0],this.points[1],it),et=lerpPoint(this.points[1],this.points[2],it),ot=lerpPoint(this.points[2],this.points[3],it),ct=lerpPoint(g,et,it),ut=lerpPoint(et,ot,it),dt=lerpPoint(ct,ut,it);return[new PolynomialBezier(this.points[0],g,ct,dt,!0),new PolynomialBezier(dt,ut,ot,this.points[3],!0)]};function extrema(it,g){var et=it.points[0][g],ot=it.points[it.points.length-1][g];if(et>ot){var ct=ot;ot=et,et=ct}for(var ut=quadRoots(3*it.a[g],2*it.b[g],it.c[g]),dt=0;dt<ut.length;dt+=1)if(ut[dt]>0&&ut[dt]<1){var ft=it.point(ut[dt])[g];ft<et?et=ft:ft>ot&&(ot=ft)}return{min:et,max:ot}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var it=this.bounds();return{left:it.x.min,right:it.x.max,top:it.y.min,bottom:it.y.max,width:it.x.max-it.x.min,height:it.y.max-it.y.min,cx:(it.x.max+it.x.min)/2,cy:(it.y.max+it.y.min)/2}};function intersectData(it,g,et){var ot=it.boundingBox();return{cx:ot.cx,cy:ot.cy,width:ot.width,height:ot.height,bez:it,t:(g+et)/2,t1:g,t2:et}}function splitData(it){var g=it.bez.split(.5);return[intersectData(g[0],it.t1,it.t),intersectData(g[1],it.t,it.t2)]}function boxIntersect(it,g){return Math.abs(it.cx-g.cx)*2<it.width+g.width&&Math.abs(it.cy-g.cy)*2<it.height+g.height}function intersectsImpl(it,g,et,ot,ct,ut){if(boxIntersect(it,g)){if(et>=ut||it.width<=ot&&it.height<=ot&&g.width<=ot&&g.height<=ot){ct.push([it.t,g.t]);return}var dt=splitData(it),ft=splitData(g);intersectsImpl(dt[0],ft[0],et+1,ot,ct,ut),intersectsImpl(dt[0],ft[1],et+1,ot,ct,ut),intersectsImpl(dt[1],ft[0],et+1,ot,ct,ut),intersectsImpl(dt[1],ft[1],et+1,ot,ct,ut)}}PolynomialBezier.prototype.intersections=function(it,g,et){g===void 0&&(g=2),et===void 0&&(et=7);var ot=[];return intersectsImpl(intersectData(this,0,1),intersectData(it,0,1),0,g,ot,et),ot},PolynomialBezier.shapeSegment=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[g],it.o[g],it.i[et],it.v[et],!0)},PolynomialBezier.shapeSegmentInverted=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[et],it.i[et],it.o[g],it.v[g],!0)};function crossProduct(it,g){return[it[1]*g[2]-it[2]*g[1],it[2]*g[0]-it[0]*g[2],it[0]*g[1]-it[1]*g[0]]}function lineIntersection(it,g,et,ot){var ct=[it[0],it[1],1],ut=[g[0],g[1],1],dt=[et[0],et[1],1],ft=[ot[0],ot[1],1],St=crossProduct(crossProduct(ct,ut),crossProduct(dt,ft));return floatZero(St[2])?null:[St[0]/St[2],St[1]/St[2]]}function polarOffset(it,g,et){return[it[0]+Math.cos(g)*et,it[1]-Math.sin(g)*et]}function pointDistance(it,g){return Math.hypot(it[0]-g[0],it[1]-g[1])}function pointEqual(it,g){return floatEqual(it[0],g[0])&&floatEqual(it[1],g[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(it,g.s,0,null,this),this.frequency=PropertyFactory.getProp(it,g.r,0,null,this),this.pointsType=PropertyFactory.getProp(it,g.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(it,g,et,ot,ct,ut,dt){var ft=et-Math.PI/2,St=et+Math.PI/2,kt=g[0]+Math.cos(et)*ot*ct,Tt=g[1]-Math.sin(et)*ot*ct;it.setTripleAt(kt,Tt,kt+Math.cos(ft)*ut,Tt-Math.sin(ft)*ut,kt+Math.cos(St)*dt,Tt-Math.sin(St)*dt,it.length())}function getPerpendicularVector(it,g){var et=[g[0]-it[0],g[1]-it[1]],ot=-Math.PI*.5,ct=[Math.cos(ot)*et[0]-Math.sin(ot)*et[1],Math.sin(ot)*et[0]+Math.cos(ot)*et[1]];return ct}function getProjectingAngle(it,g){var et=g===0?it.length()-1:g-1,ot=(g+1)%it.length(),ct=it.v[et],ut=it.v[ot],dt=getPerpendicularVector(ct,ut);return Math.atan2(0,1)-Math.atan2(dt[1],dt[0])}function zigZagCorner(it,g,et,ot,ct,ut,dt){var ft=getProjectingAngle(g,et),St=g.v[et%g._length],kt=g.v[et===0?g._length-1:et-1],Tt=g.v[(et+1)%g._length],Rt=ut===2?Math.sqrt(Math.pow(St[0]-kt[0],2)+Math.pow(St[1]-kt[1],2)):0,jt=ut===2?Math.sqrt(Math.pow(St[0]-Tt[0],2)+Math.pow(St[1]-Tt[1],2)):0;setPoint(it,g.v[et%g._length],ft,dt,ot,jt/((ct+1)*2),Rt/((ct+1)*2))}function zigZagSegment(it,g,et,ot,ct,ut){for(var dt=0;dt<ot;dt+=1){var ft=(dt+1)/(ot+1),St=ct===2?Math.sqrt(Math.pow(g.points[3][0]-g.points[0][0],2)+Math.pow(g.points[3][1]-g.points[0][1],2)):0,kt=g.normalAngle(ft),Tt=g.point(ft);setPoint(it,Tt,kt,ut,et,St/((ot+1)*2),St/((ot+1)*2)),ut=-ut}return ut}ZigZagModifier.prototype.processPath=function(it,g,et,ot){var ct=it._length,ut=shapePool.newElement();if(ut.c=it.c,it.c||(ct-=1),ct===0)return ut;var dt=-1,ft=PolynomialBezier.shapeSegment(it,0);zigZagCorner(ut,it,0,g,et,ot,dt);for(var St=0;St<ct;St+=1)dt=zigZagSegment(ut,ft,g,et,ot,-dt),St===ct-1&&!it.c?ft=null:ft=PolynomialBezier.shapeSegment(it,(St+1)%ct),zigZagCorner(ut,it,St+1,g,et,ot,dt);return ut},ZigZagModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amplitude.v,ft=Math.max(0,Math.round(this.frequency.v)),St=this.pointsType.v;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ut=kt.shape.paths._length,ct=0;ct<ut;ct+=1)Tt.addShape(this.processPath(g[ct],dt,ft,St));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(it,g,et){var ot=Math.atan2(g[0]-it[0],g[1]-it[1]);return[polarOffset(it,ot,et),polarOffset(g,ot,et)]}function offsetSegment(it,g){var et,ot,ct,ut,dt,ft,St;St=linearOffset(it.points[0],it.points[1],g),et=St[0],ot=St[1],St=linearOffset(it.points[1],it.points[2],g),ct=St[0],ut=St[1],St=linearOffset(it.points[2],it.points[3],g),dt=St[0],ft=St[1];var kt=lineIntersection(et,ot,ct,ut);kt===null&&(kt=ot);var Tt=lineIntersection(dt,ft,ct,ut);return Tt===null&&(Tt=dt),new PolynomialBezier(et,kt,Tt,ft)}function joinLines(it,g,et,ot,ct){var ut=g.points[3],dt=et.points[0];if(ot===3||pointEqual(ut,dt))return ut;if(ot===2){var ft=-g.tangentAngle(1),St=-et.tangentAngle(0)+Math.PI,kt=lineIntersection(ut,polarOffset(ut,ft+Math.PI/2,100),dt,polarOffset(dt,ft+Math.PI/2,100)),Tt=kt?pointDistance(kt,ut):pointDistance(ut,dt)/2,Rt=polarOffset(ut,ft,2*Tt*roundCorner);return it.setXYAt(Rt[0],Rt[1],"o",it.length()-1),Rt=polarOffset(dt,St,2*Tt*roundCorner),it.setTripleAt(dt[0],dt[1],dt[0],dt[1],Rt[0],Rt[1],it.length()),dt}var jt=pointEqual(ut,g.points[2])?g.points[0]:g.points[2],$t=pointEqual(dt,et.points[1])?et.points[3]:et.points[1],Ft=lineIntersection(jt,ut,dt,$t);return Ft&&pointDistance(Ft,ut)<ct?(it.setTripleAt(Ft[0],Ft[1],Ft[0],Ft[1],Ft[0],Ft[1],it.length()),Ft):ut}function getIntersection(it,g){var et=it.intersections(g);return et.length&&floatEqual(et[0][0],1)&&et.shift(),et.length?et[0]:null}function pruneSegmentIntersection(it,g){var et=it.slice(),ot=g.slice(),ct=getIntersection(it[it.length-1],g[0]);return ct&&(et[it.length-1]=it[it.length-1].split(ct[0])[0],ot[0]=g[0].split(ct[1])[1]),it.length>1&&g.length>1&&(ct=getIntersection(it[0],g[g.length-1]),ct)?[[it[0].split(ct[0])[0]],[g[g.length-1].split(ct[1])[1]]]:[et,ot]}function pruneIntersections(it){for(var g,et=1;et<it.length;et+=1)g=pruneSegmentIntersection(it[et-1],it[et]),it[et-1]=g[0],it[et]=g[1];return it.length>1&&(g=pruneSegmentIntersection(it[it.length-1],it[0]),it[it.length-1]=g[0],it[0]=g[1]),it}function offsetSegmentSplit(it,g){var et=it.inflectionPoints(),ot,ct,ut,dt;if(et.length===0)return[offsetSegment(it,g)];if(et.length===1||floatEqual(et[1],1))return ut=it.split(et[0]),ot=ut[0],ct=ut[1],[offsetSegment(ot,g),offsetSegment(ct,g)];ut=it.split(et[0]),ot=ut[0];var ft=(et[1]-et[0])/(1-et[0]);return ut=ut[1].split(ft),dt=ut[0],ct=ut[1],[offsetSegment(ot,g),offsetSegment(dt,g),offsetSegment(ct,g)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this.miterLimit=PropertyFactory.getProp(it,g.ml,0,null,this),this.lineJoin=g.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(it,g,et,ot){var ct=shapePool.newElement();ct.c=it.c;var ut=it.length();it.c||(ut-=1);var dt,ft,St,kt=[];for(dt=0;dt<ut;dt+=1)St=PolynomialBezier.shapeSegment(it,dt),kt.push(offsetSegmentSplit(St,g));if(!it.c)for(dt=ut-1;dt>=0;dt-=1)St=PolynomialBezier.shapeSegmentInverted(it,dt),kt.push(offsetSegmentSplit(St,g));kt=pruneIntersections(kt);var Tt=null,Rt=null;for(dt=0;dt<kt.length;dt+=1){var jt=kt[dt];for(Rt&&(Tt=joinLines(ct,Rt,jt[0],et,ot)),Rt=jt[jt.length-1],ft=0;ft<jt.length;ft+=1)St=jt[ft],Tt&&pointEqual(St.points[0],Tt)?ct.setXYAt(St.points[1][0],St.points[1][1],"o",ct.length()-1):ct.setTripleAt(St.points[0][0],St.points[0][1],St.points[1][0],St.points[1][1],St.points[0][0],St.points[0][1],ct.length()),ct.setTripleAt(St.points[3][0],St.points[3][1],St.points[3][0],St.points[3][1],St.points[2][0],St.points[2][1],ct.length()),Tt=St.points[3]}return kt.length&&joinLines(ct,Rt,kt[0][0],et,ot),ct},OffsetPathModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ct,ut,dt=this.amount.v,ft=this.miterLimit.v,St=this.lineJoin;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ut=kt.shape.paths._length,ct=0;ct<ut;ct+=1)Tt.addShape(this.processPath(g[ct],dt,St,ft));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(it){for(var g=it.fStyle?it.fStyle.split(" "):[],et="normal",ot="normal",ct=g.length,ut,dt=0;dt<ct;dt+=1)switch(ut=g[dt].toLowerCase(),ut){case"italic":ot="italic";break;case"bold":et="700";break;case"black":et="900";break;case"medium":et="500";break;case"regular":case"normal":et="400";break;case"light":case"thin":et="200";break}return{style:ot,weight:it.fWeight||et}}var FontManager=function(){var it=5e3,g={w:0,size:0,shapes:[],data:{shapes:[]}},et=[];et=et.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var ot=127988,ct=917631,ut=917601,dt=917626,ft=65039,St=8205,kt=127462,Tt=127487,Rt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function jt(hn){var pn=hn.split(","),rn,on=pn.length,gn=[];for(rn=0;rn<on;rn+=1)pn[rn]!=="sans-serif"&&pn[rn]!=="monospace"&&gn.push(pn[rn]);return gn.join(",")}function $t(hn,pn){var rn=createTag("span");rn.setAttribute("aria-hidden",!0),rn.style.fontFamily=pn;var on=createTag("span");on.innerText="giItT1WQy@!-/#",rn.style.position="absolute",rn.style.left="-10000px",rn.style.top="-10000px",rn.style.fontSize="300px",rn.style.fontVariant="normal",rn.style.fontStyle="normal",rn.style.fontWeight="normal",rn.style.letterSpacing="0",rn.appendChild(on),document.body.appendChild(rn);var gn=on.offsetWidth;return on.style.fontFamily=jt(hn)+", "+pn,{node:on,w:gn,parent:rn}}function Ft(){var hn,pn=this.fonts.length,rn,on,gn=pn;for(hn=0;hn<pn;hn+=1)this.fonts[hn].loaded?gn-=1:this.fonts[hn].fOrigin==="n"||this.fonts[hn].origin===0?this.fonts[hn].loaded=!0:(rn=this.fonts[hn].monoCase.node,on=this.fonts[hn].monoCase.w,rn.offsetWidth!==on?(gn-=1,this.fonts[hn].loaded=!0):(rn=this.fonts[hn].sansCase.node,on=this.fonts[hn].sansCase.w,rn.offsetWidth!==on&&(gn-=1,this.fonts[hn].loaded=!0)),this.fonts[hn].loaded&&(this.fonts[hn].sansCase.parent.parentNode.removeChild(this.fonts[hn].sansCase.parent),this.fonts[hn].monoCase.parent.parentNode.removeChild(this.fonts[hn].monoCase.parent)));gn!==0&&Date.now()-this.initTime<it?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function Ht(hn,pn){var rn=document.body&&pn?"svg":"canvas",on,gn=getFontProperties(hn);if(rn==="svg"){var un=createNS("text");un.style.fontSize="100px",un.setAttribute("font-family",hn.fFamily),un.setAttribute("font-style",gn.style),un.setAttribute("font-weight",gn.weight),un.textContent="1",hn.fClass?(un.style.fontFamily="inherit",un.setAttribute("class",hn.fClass)):un.style.fontFamily=hn.fFamily,pn.appendChild(un),on=un}else{var xn=new OffscreenCanvas(500,500).getContext("2d");xn.font=gn.style+" "+gn.weight+" 100px "+hn.fFamily,on=xn}function En(wn){return rn==="svg"?(on.textContent=wn,on.getComputedTextLength()):on.measureText(wn).width}return{measureText:En}}function Kt(hn,pn){if(!hn){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=hn.list;return}if(!document.body){this.isLoaded=!0,hn.list.forEach(function(Cn){Cn.helper=Ht(Cn),Cn.cache={}}),this.fonts=hn.list;return}var rn=hn.list,on,gn=rn.length,un=gn;for(on=0;on<gn;on+=1){var xn=!0,En,wn;if(rn[on].loaded=!1,rn[on].monoCase=$t(rn[on].fFamily,"monospace"),rn[on].sansCase=$t(rn[on].fFamily,"sans-serif"),!rn[on].fPath)rn[on].loaded=!0,un-=1;else if(rn[on].fOrigin==="p"||rn[on].origin===3){if(En=document.querySelectorAll('style[f-forigin="p"][f-family="'+rn[on].fFamily+'"], style[f-origin="3"][f-family="'+rn[on].fFamily+'"]'),En.length>0&&(xn=!1),xn){var kn=createTag("style");kn.setAttribute("f-forigin",rn[on].fOrigin),kn.setAttribute("f-origin",rn[on].origin),kn.setAttribute("f-family",rn[on].fFamily),kn.type="text/css",kn.innerText="@font-face {font-family: "+rn[on].fFamily+"; font-style: normal; src: url('"+rn[on].fPath+"');}",pn.appendChild(kn)}}else if(rn[on].fOrigin==="g"||rn[on].origin===1){for(En=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),wn=0;wn<En.length;wn+=1)En[wn].href.indexOf(rn[on].fPath)!==-1&&(xn=!1);if(xn){var Sn=createTag("link");Sn.setAttribute("f-forigin",rn[on].fOrigin),Sn.setAttribute("f-origin",rn[on].origin),Sn.type="text/css",Sn.rel="stylesheet",Sn.href=rn[on].fPath,document.body.appendChild(Sn)}}else if(rn[on].fOrigin==="t"||rn[on].origin===2){for(En=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),wn=0;wn<En.length;wn+=1)rn[on].fPath===En[wn].src&&(xn=!1);if(xn){var An=createTag("link");An.setAttribute("f-forigin",rn[on].fOrigin),An.setAttribute("f-origin",rn[on].origin),An.setAttribute("rel","stylesheet"),An.setAttribute("href",rn[on].fPath),pn.appendChild(An)}}rn[on].helper=Ht(rn[on],pn),rn[on].cache={},this.fonts.push(rn[on])}un===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Bt(hn){if(hn){this.chars||(this.chars=[]);var pn,rn=hn.length,on,gn=this.chars.length,un;for(pn=0;pn<rn;pn+=1){for(on=0,un=!1;on<gn;)this.chars[on].style===hn[pn].style&&this.chars[on].fFamily===hn[pn].fFamily&&this.chars[on].ch===hn[pn].ch&&(un=!0),on+=1;un||(this.chars.push(hn[pn]),gn+=1)}}}function Ut(hn,pn,rn){for(var on=0,gn=this.chars.length;on<gn;){if(this.chars[on].ch===hn&&this.chars[on].style===pn&&this.chars[on].fFamily===rn)return this.chars[on];on+=1}return(typeof hn=="string"&&hn.charCodeAt(0)!==13||!hn)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",hn,pn,rn)),g}function Yt(hn,pn,rn){var on=this.getFontByName(pn),gn=hn;if(!on.cache[gn]){var un=on.helper;if(hn===" "){var xn=un.measureText("|"+hn+"|"),En=un.measureText("||");on.cache[gn]=(xn-En)/100}else on.cache[gn]=un.measureText(hn)/100}return on.cache[gn]*rn}function Jt(hn){for(var pn=0,rn=this.fonts.length;pn<rn;){if(this.fonts[pn].fName===hn)return this.fonts[pn];pn+=1}return this.fonts[0]}function Zt(hn){var pn=0,rn=hn.charCodeAt(0);if(rn>=55296&&rn<=56319){var on=hn.charCodeAt(1);on>=56320&&on<=57343&&(pn=(rn-55296)*1024+on-56320+65536)}return pn}function en(hn,pn){var rn=hn.toString(16)+pn.toString(16);return Rt.indexOf(rn)!==-1}function tn(hn){return hn===St}function nn(hn){return hn===ft}function ln(hn){var pn=Zt(hn);return pn>=kt&&pn<=Tt}function an(hn){return ln(hn.substr(0,2))&&ln(hn.substr(2,2))}function sn(hn){return et.indexOf(hn)!==-1}function dn(hn,pn){var rn=Zt(hn.substr(pn,2));if(rn!==ot)return!1;var on=0;for(pn+=2;on<5;){if(rn=Zt(hn.substr(pn,2)),rn<ut||rn>dt)return!1;on+=1,pn+=2}return Zt(hn.substr(pn,2))===ct}function mn(){this.isLoaded=!0}var yn=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};yn.isModifier=en,yn.isZeroWidthJoiner=tn,yn.isFlagEmoji=an,yn.isRegionalCode=ln,yn.isCombinedCharacter=sn,yn.isRegionalFlag=dn,yn.isVariationSelector=nn,yn.BLACK_FLAG_CODE_POINT=ot;var vn={addChars:Bt,addFonts:Kt,getCharData:Ut,getFontByName:Jt,measureText:Yt,checkLoadedFonts:Ft,setIsLoaded:mn};return yn.prototype=vn,yn}();function SlotManager(it){this.animationData=it}SlotManager.prototype.getProp=function(it){return this.animationData.slots&&this.animationData.slots[it.sid]?Object.assign(it,this.animationData.slots[it.sid].p):it};function slotFactory(it){return new SlotManager(it)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(g){this.renderableComponents.indexOf(g)===-1&&this.renderableComponents.push(g)},removeRenderableComponent:function(g){this.renderableComponents.indexOf(g)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(g),1)},prepareRenderableFrame:function(g){this.checkLayerLimits(g)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(g){this.data.ip-this.data.st<=g&&this.data.op-this.data.st>g?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var g,et=this.renderableComponents.length;for(g=0;g<et;g+=1)this.renderableComponents[g].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var it={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(g){return it[g]||""}}();function SliderEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function AngleEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function ColorEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function PointEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function LayerIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function MaskIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function CheckboxEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function NoValueEffect(){this.p={}}function EffectsManager(it,g){var et=it.ef||[];this.effectElements=[];var ot,ct=et.length,ut;for(ot=0;ot<ct;ot+=1)ut=new GroupEffect(et[ot],g),this.effectElements.push(ut)}function GroupEffect(it,g){this.init(it,g)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(it,g){this.data=it,this.effectElements=[],this.initDynamicPropertyContainer(g);var et,ot=this.data.ef.length,ct,ut=this.data.ef;for(et=0;et<ot;et+=1){switch(ct=null,ut[et].ty){case 0:ct=new SliderEffect(ut[et],g,this);break;case 1:ct=new AngleEffect(ut[et],g,this);break;case 2:ct=new ColorEffect(ut[et],g,this);break;case 3:ct=new PointEffect(ut[et],g,this);break;case 4:case 7:ct=new CheckboxEffect(ut[et],g,this);break;case 10:ct=new LayerIndexEffect(ut[et],g,this);break;case 11:ct=new MaskIndexEffect(ut[et],g,this);break;case 5:ct=new EffectsManager(ut[et],g);break;default:ct=new NoValueEffect(ut[et]);break}ct&&this.effectElements.push(ct)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var g=0,et=this.data.masksProperties.length;g<et;){if(this.data.masksProperties[g].mode!=="n"&&this.data.masksProperties[g].cl!==!1)return!0;g+=1}return!1},initExpressions:function(){var g=getExpressionInterfaces();if(g){var et=g("layer"),ot=g("effects"),ct=g("shape"),ut=g("text"),dt=g("comp");this.layerInterface=et(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var ft=ot.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(ft),this.data.ty===0||this.data.xt?this.compInterface=dt(this):this.data.ty===4?(this.layerInterface.shapeInterface=ct(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=ut(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var g=getBlendMode(this.data.bm),et=this.baseElement||this.layerElement;et.style["mix-blend-mode"]=g},initBaseData:function(g,et,ot){this.globalData=et,this.comp=ot,this.data=g,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(g,et){var ot,ct=this.dynamicProperties.length;for(ot=0;ot<ct;ot+=1)(et||this._isParent&&this.dynamicProperties[ot].propType==="transform")&&(this.dynamicProperties[ot].getValue(),this.dynamicProperties[ot]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&this.dynamicProperties.push(g)}};function FootageElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.footageData=g.imageLoader.getAsset(this.assetData),this.initBaseData(it,g,et)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var it=getExpressionInterfaces();if(it){var g=it("footage");this.layerInterface=g(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.initBaseData(it,g,et),this._isPlaying=!1,this._canPlay=!1;var ot=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(ot),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,it.au&&it.au.lv?it.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(it){if(this.prepareRenderableFrame(it,!0),this.prepareProperties(it,!0),this.tm._placeholder)this._currentTime=it/this.data.sr;else{var g=this.tm.v;this._currentTime=g}this._volume=this.lv.v[0];var et=this._volume*this._volumeMultiplier;this._previousVolume!==et&&(this._previousVolume=et,this.audio.volume(et))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(it){this.audio.rate(it)},AudioElement.prototype.volume=function(it){this._volumeMultiplier=it,this._previousVolume=it*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(it){var g,et=this.layers.length,ot;for(this.completeLayers=!0,g=et-1;g>=0;g-=1)this.elements[g]||(ot=this.layers[g],ot.ip-ot.st<=it-this.layers[g].st&&ot.op-ot.st>it-this.layers[g].st&&this.buildItem(g)),this.completeLayers=this.elements[g]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(it){switch(it.ty){case 2:return this.createImage(it);case 0:return this.createComp(it);case 1:return this.createSolid(it);case 3:return this.createNull(it);case 4:return this.createShape(it);case 5:return this.createText(it);case 6:return this.createAudio(it);case 13:return this.createCamera(it);case 15:return this.createFootage(it);default:return this.createNull(it)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(it){return new AudioElement(it,this.globalData,this)},BaseRenderer.prototype.createFootage=function(it){return new FootageElement(it,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.buildItem(it);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(it){this.completeLayers=!1;var g,et=it.length,ot,ct=this.layers.length;for(g=0;g<et;g+=1)for(ot=0;ot<ct;){if(this.layers[ot].id===it[g].id){this.layers[ot]=it[g];break}ot+=1}},BaseRenderer.prototype.setProjectInterface=function(it){this.globalData.projectInterface=it},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(it,g,et){for(var ot=this.elements,ct=this.layers,ut=0,dt=ct.length;ut<dt;)ct[ut].ind==g&&(!ot[ut]||ot[ut]===!0?(this.buildItem(ut),this.addPendingElement(it)):(et.push(ot[ut]),ot[ut].setAsParent(),ct[ut].parent!==void 0?this.buildElementParenting(it,ct[ut].parent,et):it.setHierarchy(et))),ut+=1},BaseRenderer.prototype.addPendingElement=function(it){this.pendingElements.push(it)},BaseRenderer.prototype.searchExtraCompositions=function(it){var g,et=it.length;for(g=0;g<et;g+=1)if(it[g].xt){var ot=this.createComp(it[g]);ot.initExpressions(),this.globalData.projectInterface.registerComposition(ot)}},BaseRenderer.prototype.getElementById=function(it){var g,et=this.elements.length;for(g=0;g<et;g+=1)if(this.elements[g].data.ind===it)return this.elements[g];return null},BaseRenderer.prototype.getElementByPath=function(it){var g=it.shift(),et;if(typeof g=="number")et=this.elements[g];else{var ot,ct=this.elements.length;for(ot=0;ot<ct;ot+=1)if(this.elements[ot].data.nm===g){et=this.elements[ot];break}}return it.length===0?et:et.getElementByPath(it)},BaseRenderer.prototype.setupGlobalData=function(it,g){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(it),this.globalData.fontManager.addChars(it.chars),this.globalData.fontManager.addFonts(it.fonts,g),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=it.fr,this.globalData.nm=it.nm,this.globalData.compSize={w:it.w,h:it.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var g=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:g,localMat:g,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var g,et=this.finalTransform.mat,ot=0,ct=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;ot<ct;){if(this.hierarchy[ot].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}ot+=1}if(this.finalTransform._matMdf)for(g=this.finalTransform.mProp.v.props,et.cloneFromProps(g),ot=0;ot<ct;ot+=1)et.multiply(this.hierarchy[ot].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var g=0,et=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;g<et;)this.localTransforms[g]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[g]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),g+=1;if(this.finalTransform._localMatMdf){var ot=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(ot),g=1;g<et;g+=1){var ct=this.localTransforms[g].matrix;ot.multiply(ct)}ot.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var ut=this.finalTransform.localOpacity;for(g=0;g<et;g+=1)ut*=this.localTransforms[g].opacity*.01;this.finalTransform.localOpacity=ut}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var g=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(g.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var et=0,ot=g.length;for(et=0;et<ot;et+=1)this.localTransforms.push(g[et])}}},globalToLocal:function(g){var et=[];et.push(this.finalTransform);for(var ot=!0,ct=this.comp;ot;)ct.finalTransform?(ct.data.hasMask&&et.splice(0,0,ct.finalTransform),ct=ct.comp):ot=!1;var ut,dt=et.length,ft;for(ut=0;ut<dt;ut+=1)ft=et[ut].mat.applyToPointArray(0,0,0),g=[g[0]-ft[0],g[1]-ft[1],0];return g},mHelper:new Matrix};function MaskElement(it,g,et){this.data=it,this.element=g,this.globalData=et,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var ot=this.globalData.defs,ct,ut=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(ut),this.solidPath="";var dt,ft=this.masksProperties,St=0,kt=[],Tt,Rt,jt=createElementID(),$t,Ft,Ht,Kt,Bt="clipPath",Ut="clip-path";for(ct=0;ct<ut;ct+=1)if((ft[ct].mode!=="a"&&ft[ct].mode!=="n"||ft[ct].inv||ft[ct].o.k!==100||ft[ct].o.x)&&(Bt="mask",Ut="mask"),(ft[ct].mode==="s"||ft[ct].mode==="i")&&St===0?($t=createNS("rect"),$t.setAttribute("fill","#ffffff"),$t.setAttribute("width",this.element.comp.data.w||0),$t.setAttribute("height",this.element.comp.data.h||0),kt.push($t)):$t=null,dt=createNS("path"),ft[ct].mode==="n")this.viewData[ct]={op:PropertyFactory.getProp(this.element,ft[ct].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ct],3),elem:dt,lastPath:""},ot.appendChild(dt);else{St+=1,dt.setAttribute("fill",ft[ct].mode==="s"?"#000000":"#ffffff"),dt.setAttribute("clip-rule","nonzero");var Yt;if(ft[ct].x.k!==0?(Bt="mask",Ut="mask",Kt=PropertyFactory.getProp(this.element,ft[ct].x,0,null,this.element),Yt=createElementID(),Ft=createNS("filter"),Ft.setAttribute("id",Yt),Ht=createNS("feMorphology"),Ht.setAttribute("operator","erode"),Ht.setAttribute("in","SourceGraphic"),Ht.setAttribute("radius","0"),Ft.appendChild(Ht),ot.appendChild(Ft),dt.setAttribute("stroke",ft[ct].mode==="s"?"#000000":"#ffffff")):(Ht=null,Kt=null),this.storedData[ct]={elem:dt,x:Kt,expan:Ht,lastPath:"",lastOperator:"",filterId:Yt,lastRadius:0},ft[ct].mode==="i"){Rt=kt.length;var Jt=createNS("g");for(Tt=0;Tt<Rt;Tt+=1)Jt.appendChild(kt[Tt]);var Zt=createNS("mask");Zt.setAttribute("mask-type","alpha"),Zt.setAttribute("id",jt+"_"+St),Zt.appendChild(dt),ot.appendChild(Zt),Jt.setAttribute("mask","url("+getLocationHref()+"#"+jt+"_"+St+")"),kt.length=0,kt.push(Jt)}else kt.push(dt);ft[ct].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[ct]={elem:dt,lastPath:"",op:PropertyFactory.getProp(this.element,ft[ct].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ct],3),invRect:$t},this.viewData[ct].prop.k||this.drawPath(ft[ct],this.viewData[ct].prop.v,this.viewData[ct])}for(this.maskElement=createNS(Bt),ut=kt.length,ct=0;ct<ut;ct+=1)this.maskElement.appendChild(kt[ct]);St>0&&(this.maskElement.setAttribute("id",jt),this.element.maskedElement.setAttribute(Ut,"url("+getLocationHref()+"#"+jt+")"),ot.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(it){return this.viewData[it].prop},MaskElement.prototype.renderFrame=function(it){var g=this.element.finalTransform.mat,et,ot=this.masksProperties.length;for(et=0;et<ot;et+=1)if((this.viewData[et].prop._mdf||it)&&this.drawPath(this.masksProperties[et],this.viewData[et].prop.v,this.viewData[et]),(this.viewData[et].op._mdf||it)&&this.viewData[et].elem.setAttribute("fill-opacity",this.viewData[et].op.v),this.masksProperties[et].mode!=="n"&&(this.viewData[et].invRect&&(this.element.finalTransform.mProp._mdf||it)&&this.viewData[et].invRect.setAttribute("transform",g.getInverseMatrix().to2dCSS()),this.storedData[et].x&&(this.storedData[et].x._mdf||it))){var ct=this.storedData[et].expan;this.storedData[et].x.v<0?(this.storedData[et].lastOperator!=="erode"&&(this.storedData[et].lastOperator="erode",this.storedData[et].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[et].filterId+")")),ct.setAttribute("radius",-this.storedData[et].x.v)):(this.storedData[et].lastOperator!=="dilate"&&(this.storedData[et].lastOperator="dilate",this.storedData[et].elem.setAttribute("filter",null)),this.storedData[et].elem.setAttribute("stroke-width",this.storedData[et].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var it="M0,0 ";return it+=" h"+this.globalData.compSize.w,it+=" v"+this.globalData.compSize.h,it+=" h-"+this.globalData.compSize.w,it+=" v-"+this.globalData.compSize.h+" ",it},MaskElement.prototype.drawPath=function(it,g,et){var ot=" M"+g.v[0][0]+","+g.v[0][1],ct,ut;for(ut=g._length,ct=1;ct<ut;ct+=1)ot+=" C"+g.o[ct-1][0]+","+g.o[ct-1][1]+" "+g.i[ct][0]+","+g.i[ct][1]+" "+g.v[ct][0]+","+g.v[ct][1];if(g.c&&ut>1&&(ot+=" C"+g.o[ct-1][0]+","+g.o[ct-1][1]+" "+g.i[0][0]+","+g.i[0][1]+" "+g.v[0][0]+","+g.v[0][1]),et.lastPath!==ot){var dt="";et.elem&&(g.c&&(dt=it.inv?this.solidPath+ot:ot),et.elem.setAttribute("d",dt)),et.lastPath=ot}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var it={};it.createFilter=g,it.createAlphaToLuminanceFilter=et;function g(ot,ct){var ut=createNS("filter");return ut.setAttribute("id",ot),ct!==!0&&(ut.setAttribute("filterUnits","objectBoundingBox"),ut.setAttribute("x","0%"),ut.setAttribute("y","0%"),ut.setAttribute("width","100%"),ut.setAttribute("height","100%")),ut}function et(){var ot=createNS("feColorMatrix");return ot.setAttribute("type","matrix"),ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),ot}return it}(),featureSupport=function(){var it={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(it.maskType=!1),/firefox/i.test(navigator.userAgent)&&(it.svgLumaHidden=!1),it}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(it){var g,et="SourceGraphic",ot=it.data.ef?it.data.ef.length:0,ct=createElementID(),ut=filtersFactory.createFilter(ct,!0),dt=0;this.filters=[];var ft;for(g=0;g<ot;g+=1){ft=null;var St=it.data.ef[g].ty;if(registeredEffects$1[St]){var kt=registeredEffects$1[St].effect;ft=new kt(ut,it.effectsManager.effectElements[g],it,idPrefix+dt,et),et=idPrefix+dt,registeredEffects$1[St].countsAsEffect&&(dt+=1)}ft&&this.filters.push(ft)}dt&&(it.globalData.defs.appendChild(ut),it.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ct+")")),this.filters.length&&it.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},SVGEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect$1(it,g,et){registeredEffects$1[it]={effect:g,countsAsEffect:et}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var g=null;if(this.data.td){this.matteMasks={};var et=createNS("g");et.setAttribute("id",this.layerId),et.appendChild(this.layerElement),g=et,this.globalData.defs.appendChild(et)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),g=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var ot=createNS("clipPath"),ct=createNS("path");ct.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var ut=createElementID();if(ot.setAttribute("id",ut),ot.appendChild(ct),this.globalData.defs.appendChild(ot),this.checkMasks()){var dt=createNS("g");dt.setAttribute("clip-path","url("+getLocationHref()+"#"+ut+")"),dt.appendChild(this.layerElement),this.transformedElement=dt,g?g.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ut+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(g){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[g]){var et=this.layerId+"_"+g,ot,ct,ut,dt;if(g===1||g===3){var ft=createNS("mask");ft.setAttribute("id",et),ft.setAttribute("mask-type",g===3?"luminance":"alpha"),ut=createNS("use"),ut.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ft.appendChild(ut),this.globalData.defs.appendChild(ft),!featureSupport.maskType&&g===1&&(ft.setAttribute("mask-type","luminance"),ot=createElementID(),ct=filtersFactory.createFilter(ot),this.globalData.defs.appendChild(ct),ct.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),dt.appendChild(ut),ft.appendChild(dt),dt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"))}else if(g===2){var St=createNS("mask");St.setAttribute("id",et),St.setAttribute("mask-type","alpha");var kt=createNS("g");St.appendChild(kt),ot=createElementID(),ct=filtersFactory.createFilter(ot);var Tt=createNS("feComponentTransfer");Tt.setAttribute("in","SourceGraphic"),ct.appendChild(Tt);var Rt=createNS("feFuncA");Rt.setAttribute("type","table"),Rt.setAttribute("tableValues","1.0 0.0"),Tt.appendChild(Rt),this.globalData.defs.appendChild(ct);var jt=createNS("rect");jt.setAttribute("width",this.comp.data.w),jt.setAttribute("height",this.comp.data.h),jt.setAttribute("x","0"),jt.setAttribute("y","0"),jt.setAttribute("fill","#ffffff"),jt.setAttribute("opacity","0"),kt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"),kt.appendChild(jt),ut=createNS("use"),ut.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),kt.appendChild(ut),featureSupport.maskType||(St.setAttribute("mask-type","luminance"),ct.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),kt.appendChild(jt),dt.appendChild(this.layerElement),kt.appendChild(dt)),this.globalData.defs.appendChild(St)}this.matteMasks[g]=et}return this.matteMasks[g]},setMatte:function(g){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+g+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(g){this.hierarchy=g},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var it={initElement:function(et,ot,ct){this.initFrame(),this.initBaseData(et,ot,ct),this.initTransform(et,ot,ct),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var et=this.baseElement||this.layerElement;et.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var et=this.baseElement||this.layerElement;et.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(et){this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(it)],RenderableDOMElement)})();function IImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.assetData&&this.assetData.sid&&(this.assetData=g.slotManager.getProp(this.assetData)),this.initElement(it,g,et),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(it,g){this.elem=it,this.pos=g}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(g){var et,ot=this.shapeModifiers.length;for(et=0;et<ot;et+=1)this.shapeModifiers[et].addShape(g)},isShapeInAnimatedModifiers:function(g){for(var et=0,ot=this.shapeModifiers.length;et<ot;)if(this.shapeModifiers[et].isAnimatedWithShape(g))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var g,et=this.shapes.length;for(g=0;g<et;g+=1)this.shapes[g].sh.reset();et=this.shapeModifiers.length;var ot;for(g=et-1;g>=0&&(ot=this.shapeModifiers[g].processShapes(this._isFirstFrame),!ot);g-=1);}},searchProcessedElement:function(g){for(var et=this.processedElements,ot=0,ct=et.length;ot<ct;){if(et[ot].elem===g)return et[ot].pos;ot+=1}return 0},addProcessedElement:function(g,et){for(var ot=this.processedElements,ct=ot.length;ct;)if(ct-=1,ot[ct].elem===g){ot[ct].pos=et;return}ot.push(new ProcessedElement(g,et))},prepareFrame:function(g){this.prepareRenderableFrame(g),this.prepareProperties(g,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(it,g,et){this.caches=[],this.styles=[],this.transformers=it,this.lStr="",this.sh=et,this.lvl=g,this._isAnimated=!!et.k;for(var ot=0,ct=it.length;ot<ct;){if(it[ot].mProps.dynamicProperties.length){this._isAnimated=!0;break}ot+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(it,g){this.data=it,this.type=it.ty,this.d="",this.lvl=g,this._mdf=!1,this.closed=it.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(it,g,et,ot){this.elem=it,this.frameId=-1,this.dataProps=createSizedArray(g.length),this.renderer=et,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",g.length?g.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(ot);var ct,ut=g.length||0,dt;for(ct=0;ct<ut;ct+=1)dt=PropertyFactory.getProp(it,g[ct].v,0,0,this),this.k=dt.k||this.k,this.dataProps[ct]={n:g[ct].n,p:dt};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(it){if(!(this.elem.globalData.frameId===this.frameId&&!it)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||it,this._mdf)){var g=0,et=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),g=0;g<et;g+=1)this.dataProps[g].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[g].p.v:this.dashArray[g]=this.dataProps[g].p.v:this.dashoffset[0]=this.dataProps[g].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.style=et}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(it,g,et){this.data=g,this.c=createTypedArray("uint8c",g.p*4);var ot=g.k.k[0].s?g.k.k[0].s.length-g.p*4:g.k.k.length-g.p*4;this.o=createTypedArray("float32",ot),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=ot,this.initDynamicPropertyContainer(et),this.prop=PropertyFactory.getProp(it,g.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(it,g){for(var et=0,ot=this.o.length/2,ct;et<ot;){if(ct=Math.abs(it[et*4]-it[g*4+et*2]),ct>.01)return!1;et+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var it=0,g=this.data.k.k.length;it<g;){if(!this.comparePoints(this.data.k.k[it].s,this.data.p))return!1;it+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(it){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||it){var g,et=this.data.p*4,ot,ct;for(g=0;g<et;g+=1)ot=g%4===0?100:255,ct=Math.round(this.prop.v[g]*ot),this.c[g]!==ct&&(this.c[g]=ct,this._cmdf=!it);if(this.o.length)for(et=this.prop.v.length,g=this.data.p*4;g<et;g+=1)ot=g%2===0?100:1,ct=g%2===0?Math.round(this.prop.v[g]*100):this.prop.v[g],this.o[g-this.data.p*4]!==ct&&(this.o[g-this.data.p*4]=ct,this._omdf=!it);this._mdf=!it}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.initGradientData(it,g,et)}SVGGradientFillStyleData.prototype.initGradientData=function(it,g,et){this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.s=PropertyFactory.getProp(it,g.s,1,null,this),this.e=PropertyFactory.getProp(it,g.e,1,null,this),this.h=PropertyFactory.getProp(it,g.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(it,g.a||{k:0},0,degToRads,this),this.g=new GradientProperty(it,g.g,this),this.style=et,this.stops=[],this.setGradientData(et.pElem,g),this.setGradientOpacity(g,et),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(it,g){var et=createElementID(),ot=createNS(g.t===1?"linearGradient":"radialGradient");ot.setAttribute("id",et),ot.setAttribute("spreadMethod","pad"),ot.setAttribute("gradientUnits","userSpaceOnUse");var ct=[],ut,dt,ft;for(ft=g.g.p*4,dt=0;dt<ft;dt+=4)ut=createNS("stop"),ot.appendChild(ut),ct.push(ut);it.setAttribute(g.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+et+")"),this.gf=ot,this.cst=ct},SVGGradientFillStyleData.prototype.setGradientOpacity=function(it,g){if(this.g._hasOpacity&&!this.g._collapsable){var et,ot,ct,ut=createNS("mask"),dt=createNS("path");ut.appendChild(dt);var ft=createElementID(),St=createElementID();ut.setAttribute("id",St);var kt=createNS(it.t===1?"linearGradient":"radialGradient");kt.setAttribute("id",ft),kt.setAttribute("spreadMethod","pad"),kt.setAttribute("gradientUnits","userSpaceOnUse"),ct=it.g.k.k[0].s?it.g.k.k[0].s.length:it.g.k.k.length;var Tt=this.stops;for(ot=it.g.p*4;ot<ct;ot+=2)et=createNS("stop"),et.setAttribute("stop-color","rgb(255,255,255)"),kt.appendChild(et),Tt.push(et);dt.setAttribute(it.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+ft+")"),it.ty==="gs"&&(dt.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),dt.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),it.lj===1&&dt.setAttribute("stroke-miterlimit",it.ml)),this.of=kt,this.ms=ut,this.ost=Tt,this.maskId=St,g.msElem=dt}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.initGradientData(it,g,et),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(it,g,et){this.transform={mProps:it,op:g,container:et},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(g,et,ot,ct){if(et===0)return"";var ut=g.o,dt=g.i,ft=g.v,St,kt=" M"+ct.applyToPointStringified(ft[0][0],ft[0][1]);for(St=1;St<et;St+=1)kt+=" C"+ct.applyToPointStringified(ut[St-1][0],ut[St-1][1])+" "+ct.applyToPointStringified(dt[St][0],dt[St][1])+" "+ct.applyToPointStringified(ft[St][0],ft[St][1]);return ot&&et&&(kt+=" C"+ct.applyToPointStringified(ut[St-1][0],ut[St-1][1])+" "+ct.applyToPointStringified(dt[0][0],dt[0][1])+" "+ct.applyToPointStringified(ft[0][0],ft[0][1]),kt+="z"),kt},SVGElementsRenderer=function(){var it=new Matrix,g=new Matrix,et={createRenderFunction:ot};function ot(Rt){switch(Rt.ty){case"fl":return ft;case"gf":return kt;case"gs":return St;case"st":return Tt;case"sh":case"el":case"rc":case"sr":return dt;case"tr":return ct;case"no":return ut;default:return null}}function ct(Rt,jt,$t){($t||jt.transform.op._mdf)&&jt.transform.container.setAttribute("opacity",jt.transform.op.v),($t||jt.transform.mProps._mdf)&&jt.transform.container.setAttribute("transform",jt.transform.mProps.v.to2dCSS())}function ut(){}function dt(Rt,jt,$t){var Ft,Ht,Kt,Bt,Ut,Yt,Jt=jt.styles.length,Zt=jt.lvl,en,tn,nn,ln;for(Yt=0;Yt<Jt;Yt+=1){if(Bt=jt.sh._mdf||$t,jt.styles[Yt].lvl<Zt){for(tn=g.reset(),nn=Zt-jt.styles[Yt].lvl,ln=jt.transformers.length-1;!Bt&&nn>0;)Bt=jt.transformers[ln].mProps._mdf||Bt,nn-=1,ln-=1;if(Bt)for(nn=Zt-jt.styles[Yt].lvl,ln=jt.transformers.length-1;nn>0;)tn.multiply(jt.transformers[ln].mProps.v),nn-=1,ln-=1}else tn=it;if(en=jt.sh.paths,Ht=en._length,Bt){for(Kt="",Ft=0;Ft<Ht;Ft+=1)Ut=en.shapes[Ft],Ut&&Ut._length&&(Kt+=buildShapeString(Ut,Ut._length,Ut.c,tn));jt.caches[Yt]=Kt}else Kt=jt.caches[Yt];jt.styles[Yt].d+=Rt.hd===!0?"":Kt,jt.styles[Yt]._mdf=Bt||jt.styles[Yt]._mdf}}function ft(Rt,jt,$t){var Ft=jt.style;(jt.c._mdf||$t)&&Ft.pElem.setAttribute("fill","rgb("+bmFloor(jt.c.v[0])+","+bmFloor(jt.c.v[1])+","+bmFloor(jt.c.v[2])+")"),(jt.o._mdf||$t)&&Ft.pElem.setAttribute("fill-opacity",jt.o.v)}function St(Rt,jt,$t){kt(Rt,jt,$t),Tt(Rt,jt,$t)}function kt(Rt,jt,$t){var Ft=jt.gf,Ht=jt.g._hasOpacity,Kt=jt.s.v,Bt=jt.e.v;if(jt.o._mdf||$t){var Ut=Rt.ty==="gf"?"fill-opacity":"stroke-opacity";jt.style.pElem.setAttribute(Ut,jt.o.v)}if(jt.s._mdf||$t){var Yt=Rt.t===1?"x1":"cx",Jt=Yt==="x1"?"y1":"cy";Ft.setAttribute(Yt,Kt[0]),Ft.setAttribute(Jt,Kt[1]),Ht&&!jt.g._collapsable&&(jt.of.setAttribute(Yt,Kt[0]),jt.of.setAttribute(Jt,Kt[1]))}var Zt,en,tn,nn;if(jt.g._cmdf||$t){Zt=jt.cst;var ln=jt.g.c;for(tn=Zt.length,en=0;en<tn;en+=1)nn=Zt[en],nn.setAttribute("offset",ln[en*4]+"%"),nn.setAttribute("stop-color","rgb("+ln[en*4+1]+","+ln[en*4+2]+","+ln[en*4+3]+")")}if(Ht&&(jt.g._omdf||$t)){var an=jt.g.o;for(jt.g._collapsable?Zt=jt.cst:Zt=jt.ost,tn=Zt.length,en=0;en<tn;en+=1)nn=Zt[en],jt.g._collapsable||nn.setAttribute("offset",an[en*2]+"%"),nn.setAttribute("stop-opacity",an[en*2+1])}if(Rt.t===1)(jt.e._mdf||$t)&&(Ft.setAttribute("x2",Bt[0]),Ft.setAttribute("y2",Bt[1]),Ht&&!jt.g._collapsable&&(jt.of.setAttribute("x2",Bt[0]),jt.of.setAttribute("y2",Bt[1])));else{var sn;if((jt.s._mdf||jt.e._mdf||$t)&&(sn=Math.sqrt(Math.pow(Kt[0]-Bt[0],2)+Math.pow(Kt[1]-Bt[1],2)),Ft.setAttribute("r",sn),Ht&&!jt.g._collapsable&&jt.of.setAttribute("r",sn)),jt.e._mdf||jt.h._mdf||jt.a._mdf||$t){sn||(sn=Math.sqrt(Math.pow(Kt[0]-Bt[0],2)+Math.pow(Kt[1]-Bt[1],2)));var dn=Math.atan2(Bt[1]-Kt[1],Bt[0]-Kt[0]),mn=jt.h.v;mn>=1?mn=.99:mn<=-1&&(mn=-.99);var yn=sn*mn,vn=Math.cos(dn+jt.a.v)*yn+Kt[0],hn=Math.sin(dn+jt.a.v)*yn+Kt[1];Ft.setAttribute("fx",vn),Ft.setAttribute("fy",hn),Ht&&!jt.g._collapsable&&(jt.of.setAttribute("fx",vn),jt.of.setAttribute("fy",hn))}}}function Tt(Rt,jt,$t){var Ft=jt.style,Ht=jt.d;Ht&&(Ht._mdf||$t)&&Ht.dashStr&&(Ft.pElem.setAttribute("stroke-dasharray",Ht.dashStr),Ft.pElem.setAttribute("stroke-dashoffset",Ht.dashoffset[0])),jt.c&&(jt.c._mdf||$t)&&Ft.pElem.setAttribute("stroke","rgb("+bmFloor(jt.c.v[0])+","+bmFloor(jt.c.v[1])+","+bmFloor(jt.c.v[2])+")"),(jt.o._mdf||$t)&&Ft.pElem.setAttribute("stroke-opacity",jt.o.v),(jt.w._mdf||$t)&&(Ft.pElem.setAttribute("stroke-width",jt.w.v),Ft.msElem&&Ft.msElem.setAttribute("stroke-width",jt.w.v))}return et}();function SVGShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(it,g,et),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var it,g=this.shapes.length,et,ot,ct=this.stylesList.length,ut,dt=[],ft=!1;for(ot=0;ot<ct;ot+=1){for(ut=this.stylesList[ot],ft=!1,dt.length=0,it=0;it<g;it+=1)et=this.shapes[it],et.styles.indexOf(ut)!==-1&&(dt.push(et),ft=et._isAnimated||ft);dt.length>1&&ft&&this.setShapesAsAnimated(dt)}},SVGShapeElement.prototype.setShapesAsAnimated=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(it,g){var et,ot=new SVGStyleData(it,g),ct=ot.pElem;if(it.ty==="st")et=new SVGStrokeStyleData(this,it,ot);else if(it.ty==="fl")et=new SVGFillStyleData(this,it,ot);else if(it.ty==="gf"||it.ty==="gs"){var ut=it.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;et=new ut(this,it,ot),this.globalData.defs.appendChild(et.gf),et.maskId&&(this.globalData.defs.appendChild(et.ms),this.globalData.defs.appendChild(et.of),ct.setAttribute("mask","url("+getLocationHref()+"#"+et.maskId+")"))}else it.ty==="no"&&(et=new SVGNoStyleData(this,it,ot));return(it.ty==="st"||it.ty==="gs")&&(ct.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),ct.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),ct.setAttribute("fill-opacity","0"),it.lj===1&&ct.setAttribute("stroke-miterlimit",it.ml)),it.r===2&&ct.setAttribute("fill-rule","evenodd"),it.ln&&ct.setAttribute("id",it.ln),it.cl&&ct.setAttribute("class",it.cl),it.bm&&(ct.style["mix-blend-mode"]=getBlendMode(it.bm)),this.stylesList.push(ot),this.addToAnimatedContents(it,et),et},SVGShapeElement.prototype.createGroupElement=function(it){var g=new ShapeGroupData;return it.ln&&g.gr.setAttribute("id",it.ln),it.cl&&g.gr.setAttribute("class",it.cl),it.bm&&(g.gr.style["mix-blend-mode"]=getBlendMode(it.bm)),g},SVGShapeElement.prototype.createTransformElement=function(it,g){var et=TransformPropertyFactory.getTransformProperty(this,it,this),ot=new SVGTransformData(et,et.o,g);return this.addToAnimatedContents(it,ot),ot},SVGShapeElement.prototype.createShapeElement=function(it,g,et){var ot=4;it.ty==="rc"?ot=5:it.ty==="el"?ot=6:it.ty==="sr"&&(ot=7);var ct=ShapePropertyFactory.getShapeProp(this,it,ot,this),ut=new SVGShapeData(g,et,ct);return this.shapes.push(ut),this.addShapeToModifiers(ut),this.addToAnimatedContents(it,ut),ut},SVGShapeElement.prototype.addToAnimatedContents=function(it,g){for(var et=0,ot=this.animatedContents.length;et<ot;){if(this.animatedContents[et].element===g)return;et+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(it),element:g,data:it})},SVGShapeElement.prototype.setElementStyles=function(it){var g=it.styles,et,ot=this.stylesList.length;for(et=0;et<ot;et+=1)this.stylesList[et].closed||g.push(this.stylesList[et])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(it,g,et,ot,ct,ut,dt){var ft=[].concat(ut),St,kt=it.length-1,Tt,Rt,jt=[],$t=[],Ft,Ht,Kt;for(St=kt;St>=0;St-=1){if(Kt=this.searchProcessedElement(it[St]),Kt?g[St]=et[Kt-1]:it[St]._render=dt,it[St].ty==="fl"||it[St].ty==="st"||it[St].ty==="gf"||it[St].ty==="gs"||it[St].ty==="no")Kt?g[St].style.closed=!1:g[St]=this.createStyleElement(it[St],ct),it[St]._render&&g[St].style.pElem.parentNode!==ot&&ot.appendChild(g[St].style.pElem),jt.push(g[St].style);else if(it[St].ty==="gr"){if(!Kt)g[St]=this.createGroupElement(it[St]);else for(Rt=g[St].it.length,Tt=0;Tt<Rt;Tt+=1)g[St].prevViewData[Tt]=g[St].it[Tt];this.searchShapes(it[St].it,g[St].it,g[St].prevViewData,g[St].gr,ct+1,ft,dt),it[St]._render&&g[St].gr.parentNode!==ot&&ot.appendChild(g[St].gr)}else it[St].ty==="tr"?(Kt||(g[St]=this.createTransformElement(it[St],ot)),Ft=g[St].transform,ft.push(Ft)):it[St].ty==="sh"||it[St].ty==="rc"||it[St].ty==="el"||it[St].ty==="sr"?(Kt||(g[St]=this.createShapeElement(it[St],ft,ct)),this.setElementStyles(g[St])):it[St].ty==="tm"||it[St].ty==="rd"||it[St].ty==="ms"||it[St].ty==="pb"||it[St].ty==="zz"||it[St].ty==="op"?(Kt?(Ht=g[St],Ht.closed=!1):(Ht=ShapeModifiers.getModifier(it[St].ty),Ht.init(this,it[St]),g[St]=Ht,this.shapeModifiers.push(Ht)),$t.push(Ht)):it[St].ty==="rp"&&(Kt?(Ht=g[St],Ht.closed=!0):(Ht=ShapeModifiers.getModifier(it[St].ty),g[St]=Ht,Ht.init(this,it,St,g),this.shapeModifiers.push(Ht),dt=!1),$t.push(Ht));this.addProcessedElement(it[St],St+1)}for(kt=jt.length,St=0;St<kt;St+=1)jt[St].closed=!0;for(kt=$t.length,St=0;St<kt;St+=1)$t[St].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].reset();for(this.renderShape(),it=0;it<g;it+=1)(this.stylesList[it]._mdf||this._isFirstFrame)&&(this.stylesList[it].msElem&&(this.stylesList[it].msElem.setAttribute("d",this.stylesList[it].d),this.stylesList[it].d="M0 0"+this.stylesList[it].d),this.stylesList[it].pElem.setAttribute("d",this.stylesList[it].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var it,g=this.animatedContents.length,et;for(it=0;it<g;it+=1)et=this.animatedContents[it],(this._isFirstFrame||et.element._isAnimated)&&et.data!==!0&&et.fn(et.data,et.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(it,g,et,ot,ct,ut){this.o=it,this.sw=g,this.sc=et,this.fc=ot,this.m=ct,this.p=ut,this._mdf={o:!0,sw:!!g,sc:!!et,fc:!!ot,m:!0,p:!0}}LetterProps.prototype.update=function(it,g,et,ot,ct,ut){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var dt=!1;return this.o!==it&&(this.o=it,this._mdf.o=!0,dt=!0),this.sw!==g&&(this.sw=g,this._mdf.sw=!0,dt=!0),this.sc!==et&&(this.sc=et,this._mdf.sc=!0,dt=!0),this.fc!==ot&&(this.fc=ot,this._mdf.fc=!0,dt=!0),this.m!==ct&&(this.m=ct,this._mdf.m=!0,dt=!0),ut.length&&(this.p[0]!==ut[0]||this.p[1]!==ut[1]||this.p[4]!==ut[4]||this.p[5]!==ut[5]||this.p[12]!==ut[12]||this.p[13]!==ut[13])&&(this.p=ut,this._mdf.p=!0,dt=!0),dt};function TextProperty(it,g){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,g.d&&g.d.sid&&(g.d=it.globalData.slotManager.getProp(g.d)),this.data=g,this.elem=it,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(it,g){for(var et in g)Object.prototype.hasOwnProperty.call(g,et)&&(it[et]=g[et]);return it},TextProperty.prototype.setCurrentData=function(it){it.__complete||this.completeTextData(it),this.currentData=it,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(it){this.effectsSequence.push(it),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(it){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!it)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var g=this.currentData,et=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var ot,ct=this.effectsSequence.length,ut=it||this.data.d.k[this.keysIndex].s;for(ot=0;ot<ct;ot+=1)et!==this.keysIndex?ut=this.effectsSequence[ot](ut,ut.t):ut=this.effectsSequence[ot](this.currentData,ut.t);g!==ut&&this.setCurrentData(ut),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var it=this.data.d.k,g=this.elem.comp.renderedFrame,et=0,ot=it.length;et<=ot-1&&!(et===ot-1||it[et+1].t>g);)et+=1;return this.keysIndex!==et&&(this.keysIndex=et),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(it){for(var g=[],et=0,ot=it.length,ct,ut,dt=!1,ft=!1,St="";et<ot;)dt=ft,ft=!1,ct=it.charCodeAt(et),St=it.charAt(et),FontManager.isCombinedCharacter(ct)?dt=!0:ct>=55296&&ct<=56319?FontManager.isRegionalFlag(it,et)?St=it.substr(et,14):(ut=it.charCodeAt(et+1),ut>=56320&&ut<=57343&&(FontManager.isModifier(ct,ut)?(St=it.substr(et,2),dt=!0):FontManager.isFlagEmoji(it.substr(et,4))?St=it.substr(et,4):St=it.substr(et,2))):ct>56319?(ut=it.charCodeAt(et+1),FontManager.isVariationSelector(ct)&&(dt=!0)):FontManager.isZeroWidthJoiner(ct)&&(dt=!0,ft=!0),dt?(g[g.length-1]+=St,dt=!1):g.push(St),et+=St.length;return g},TextProperty.prototype.completeTextData=function(it){it.__complete=!0;var g=this.elem.globalData.fontManager,et=this.data,ot=[],ct,ut,dt,ft=0,St,kt=et.m.g,Tt=0,Rt=0,jt=0,$t=[],Ft=0,Ht=0,Kt,Bt,Ut=g.getFontByName(it.f),Yt,Jt=0,Zt=getFontProperties(Ut);it.fWeight=Zt.weight,it.fStyle=Zt.style,it.finalSize=it.s,it.finalText=this.buildFinalText(it.t),ut=it.finalText.length,it.finalLineHeight=it.lh;var en=it.tr/1e3*it.finalSize,tn;if(it.sz)for(var nn=!0,ln=it.sz[0],an=it.sz[1],sn,dn;nn;){dn=this.buildFinalText(it.t),sn=0,Ft=0,ut=dn.length,en=it.tr/1e3*it.finalSize;var mn=-1;for(ct=0;ct<ut;ct+=1)tn=dn[ct].charCodeAt(0),dt=!1,dn[ct]===" "?mn=ct:(tn===13||tn===3)&&(Ft=0,dt=!0,sn+=it.finalLineHeight||it.finalSize*1.2),g.chars?(Yt=g.getCharData(dn[ct],Ut.fStyle,Ut.fFamily),Jt=dt?0:Yt.w*it.finalSize/100):Jt=g.measureText(dn[ct],it.f,it.finalSize),Ft+Jt>ln&&dn[ct]!==" "?(mn===-1?ut+=1:ct=mn,sn+=it.finalLineHeight||it.finalSize*1.2,dn.splice(ct,mn===ct?1:0,"\r"),mn=-1,Ft=0):(Ft+=Jt,Ft+=en);sn+=Ut.ascent*it.finalSize/100,this.canResize&&it.finalSize>this.minimumFontSize&&an<sn?(it.finalSize-=1,it.finalLineHeight=it.finalSize*it.lh/it.s):(it.finalText=dn,ut=it.finalText.length,nn=!1)}Ft=-en,Jt=0;var yn=0,vn;for(ct=0;ct<ut;ct+=1)if(dt=!1,vn=it.finalText[ct],tn=vn.charCodeAt(0),tn===13||tn===3?(yn=0,$t.push(Ft),Ht=Ft>Ht?Ft:Ht,Ft=-2*en,St="",dt=!0,jt+=1):St=vn,g.chars?(Yt=g.getCharData(vn,Ut.fStyle,g.getFontByName(it.f).fFamily),Jt=dt?0:Yt.w*it.finalSize/100):Jt=g.measureText(St,it.f,it.finalSize),vn===" "?yn+=Jt+en:(Ft+=Jt+en+yn,yn=0),ot.push({l:Jt,an:Jt,add:Tt,n:dt,anIndexes:[],val:St,line:jt,animatorJustifyOffset:0}),kt==2){if(Tt+=Jt,St===""||St===" "||ct===ut-1){for((St===""||St===" ")&&(Tt-=Jt);Rt<=ct;)ot[Rt].an=Tt,ot[Rt].ind=ft,ot[Rt].extra=Jt,Rt+=1;ft+=1,Tt=0}}else if(kt==3){if(Tt+=Jt,St===""||ct===ut-1){for(St===""&&(Tt-=Jt);Rt<=ct;)ot[Rt].an=Tt,ot[Rt].ind=ft,ot[Rt].extra=Jt,Rt+=1;Tt=0,ft+=1}}else ot[ft].ind=ft,ot[ft].extra=0,ft+=1;if(it.l=ot,Ht=Ft>Ht?Ft:Ht,$t.push(Ft),it.sz)it.boxWidth=it.sz[0],it.justifyOffset=0;else switch(it.boxWidth=Ht,it.j){case 1:it.justifyOffset=-it.boxWidth;break;case 2:it.justifyOffset=-it.boxWidth/2;break;default:it.justifyOffset=0}it.lineWidths=$t;var hn=et.a,pn,rn;Bt=hn.length;var on,gn,un=[];for(Kt=0;Kt<Bt;Kt+=1){for(pn=hn[Kt],pn.a.sc&&(it.strokeColorAnim=!0),pn.a.sw&&(it.strokeWidthAnim=!0),(pn.a.fc||pn.a.fh||pn.a.fs||pn.a.fb)&&(it.fillColorAnim=!0),gn=0,on=pn.s.b,ct=0;ct<ut;ct+=1)rn=ot[ct],rn.anIndexes[Kt]=gn,(on==1&&rn.val!==""||on==2&&rn.val!==""&&rn.val!==" "||on==3&&(rn.n||rn.val==" "||ct==ut-1)||on==4&&(rn.n||ct==ut-1))&&(pn.s.rn===1&&un.push(gn),gn+=1);et.a[Kt].s.totalChars=gn;var xn=-1,En;if(pn.s.rn===1)for(ct=0;ct<ut;ct+=1)rn=ot[ct],xn!=rn.anIndexes[Kt]&&(xn=rn.anIndexes[Kt],En=un.splice(Math.floor(Math.random()*un.length),1)[0]),rn.anIndexes[Kt]=En}it.yOffset=it.finalLineHeight||it.finalSize*1.2,it.ls=it.ls||0,it.ascent=Ut.ascent*it.finalSize/100},TextProperty.prototype.updateDocumentData=function(it,g){g=g===void 0?this.keysIndex:g;var et=this.copyData({},this.data.d.k[g].s);et=this.copyData(et,it),this.data.d.k[g].s=et,this.recalculate(g),this.setCurrentData(et),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(it){var g=this.data.d.k[it].s;g.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(g)},TextProperty.prototype.canResizeFont=function(it){this.canResize=it,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(it){this.minimumFontSize=Math.floor(it)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var it=Math.max,g=Math.min,et=Math.floor;function ot(ut,dt){this._currentTextLength=-1,this.k=!1,this.data=dt,this.elem=ut,this.comp=ut.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(ut),this.s=PropertyFactory.getProp(ut,dt.s||{k:0},0,0,this),"e"in dt?this.e=PropertyFactory.getProp(ut,dt.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(ut,dt.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(ut,dt.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(ut,dt.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(ut,dt.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(ut,dt.a,0,.01,this),this.dynamicProperties.length||this.getValue()}ot.prototype={getMult:function(dt){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var ft=0,St=0,kt=1,Tt=1;this.ne.v>0?ft=this.ne.v/100:St=-this.ne.v/100,this.xe.v>0?kt=1-this.xe.v/100:Tt=1+this.xe.v/100;var Rt=BezierFactory.getBezierEasing(ft,St,kt,Tt).get,jt=0,$t=this.finalS,Ft=this.finalE,Ht=this.data.sh;if(Ht===2)Ft===$t?jt=dt>=Ft?1:0:jt=it(0,g(.5/(Ft-$t)+(dt-$t)/(Ft-$t),1)),jt=Rt(jt);else if(Ht===3)Ft===$t?jt=dt>=Ft?0:1:jt=1-it(0,g(.5/(Ft-$t)+(dt-$t)/(Ft-$t),1)),jt=Rt(jt);else if(Ht===4)Ft===$t?jt=0:(jt=it(0,g(.5/(Ft-$t)+(dt-$t)/(Ft-$t),1)),jt<.5?jt*=2:jt=1-2*(jt-.5)),jt=Rt(jt);else if(Ht===5){if(Ft===$t)jt=0;else{var Kt=Ft-$t;dt=g(it(0,dt+.5-$t),Ft-$t);var Bt=-Kt/2+dt,Ut=Kt/2;jt=Math.sqrt(1-Bt*Bt/(Ut*Ut))}jt=Rt(jt)}else Ht===6?(Ft===$t?jt=0:(dt=g(it(0,dt+.5-$t),Ft-$t),jt=(1+Math.cos(Math.PI+Math.PI*2*dt/(Ft-$t)))/2),jt=Rt(jt)):(dt>=et($t)&&(dt-$t<0?jt=it(0,g(g(Ft,1)-($t-dt),1)):jt=it(0,g(Ft-dt,1))),jt=Rt(jt));if(this.sm.v!==100){var Yt=this.sm.v*.01;Yt===0&&(Yt=1e-8);var Jt=.5-Yt*.5;jt<Jt?jt=0:(jt=(jt-Jt)/Yt,jt>1&&(jt=1))}return jt*this.a.v},getValue:function(dt){this.iterateDynamicProperties(),this._mdf=dt||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,dt&&this.data.r===2&&(this.e.v=this._currentTextLength);var ft=this.data.r===2?1:100/this.data.totalChars,St=this.o.v/ft,kt=this.s.v/ft+St,Tt=this.e.v/ft+St;if(kt>Tt){var Rt=kt;kt=Tt,Tt=Rt}this.finalS=kt,this.finalE=Tt}},extendPrototype([DynamicPropertyContainer],ot);function ct(ut,dt,ft){return new ot(ut,dt)}return{getTextSelectorProp:ct}}();function TextAnimatorDataProperty(it,g,et){var ot={propType:!1},ct=PropertyFactory.getProp,ut=g.a;this.a={r:ut.r?ct(it,ut.r,0,degToRads,et):ot,rx:ut.rx?ct(it,ut.rx,0,degToRads,et):ot,ry:ut.ry?ct(it,ut.ry,0,degToRads,et):ot,sk:ut.sk?ct(it,ut.sk,0,degToRads,et):ot,sa:ut.sa?ct(it,ut.sa,0,degToRads,et):ot,s:ut.s?ct(it,ut.s,1,.01,et):ot,a:ut.a?ct(it,ut.a,1,0,et):ot,o:ut.o?ct(it,ut.o,0,.01,et):ot,p:ut.p?ct(it,ut.p,1,0,et):ot,sw:ut.sw?ct(it,ut.sw,0,0,et):ot,sc:ut.sc?ct(it,ut.sc,1,0,et):ot,fc:ut.fc?ct(it,ut.fc,1,0,et):ot,fh:ut.fh?ct(it,ut.fh,0,0,et):ot,fs:ut.fs?ct(it,ut.fs,0,.01,et):ot,fb:ut.fb?ct(it,ut.fb,0,.01,et):ot,t:ut.t?ct(it,ut.t,0,0,et):ot},this.s=TextSelectorProp.getTextSelectorProp(it,g.s,et),this.s.t=g.s.t}function TextAnimatorProperty(it,g,et){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=it,this._renderType=g,this._elem=et,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(et)}TextAnimatorProperty.prototype.searchProperties=function(){var it,g=this._textData.a.length,et,ot=PropertyFactory.getProp;for(it=0;it<g;it+=1)et=this._textData.a[it],this._animatorsData[it]=new TextAnimatorDataProperty(this._elem,et,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:ot(this._elem,this._textData.p.a,0,0,this),f:ot(this._elem,this._textData.p.f,0,0,this),l:ot(this._elem,this._textData.p.l,0,0,this),r:ot(this._elem,this._textData.p.r,0,0,this),p:ot(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=ot(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(it,g){if(this.lettersChangedFlag=g,!(!this._mdf&&!this._isFirstFrame&&!g&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var et=this._moreOptions.alignment.v,ot=this._animatorsData,ct=this._textData,ut=this.mHelper,dt=this._renderType,ft=this.renderedLetters.length,St,kt,Tt,Rt,jt=it.l,$t,Ft,Ht,Kt,Bt,Ut,Yt,Jt,Zt,en,tn,nn,ln,an,sn;if(this._hasMaskedPath){if(sn=this._pathData.m,!this._pathData.n||this._pathData._mdf){var dn=sn.v;this._pathData.r.v&&(dn=dn.reverse()),$t={tLength:0,segments:[]},Rt=dn._length-1;var mn;for(nn=0,Tt=0;Tt<Rt;Tt+=1)mn=bez.buildBezierData(dn.v[Tt],dn.v[Tt+1],[dn.o[Tt][0]-dn.v[Tt][0],dn.o[Tt][1]-dn.v[Tt][1]],[dn.i[Tt+1][0]-dn.v[Tt+1][0],dn.i[Tt+1][1]-dn.v[Tt+1][1]]),$t.tLength+=mn.segmentLength,$t.segments.push(mn),nn+=mn.segmentLength;Tt=Rt,sn.v.c&&(mn=bez.buildBezierData(dn.v[Tt],dn.v[0],[dn.o[Tt][0]-dn.v[Tt][0],dn.o[Tt][1]-dn.v[Tt][1]],[dn.i[0][0]-dn.v[0][0],dn.i[0][1]-dn.v[0][1]]),$t.tLength+=mn.segmentLength,$t.segments.push(mn),nn+=mn.segmentLength),this._pathData.pi=$t}if($t=this._pathData.pi,Ft=this._pathData.f.v,Yt=0,Ut=1,Kt=0,Bt=!0,en=$t.segments,Ft<0&&sn.v.c)for($t.tLength<Math.abs(Ft)&&(Ft=-Math.abs(Ft)%$t.tLength),Yt=en.length-1,Zt=en[Yt].points,Ut=Zt.length-1;Ft<0;)Ft+=Zt[Ut].partialLength,Ut-=1,Ut<0&&(Yt-=1,Zt=en[Yt].points,Ut=Zt.length-1);Zt=en[Yt].points,Jt=Zt[Ut-1],Ht=Zt[Ut],tn=Ht.partialLength}Rt=jt.length,St=0,kt=0;var yn=it.finalSize*1.2*.714,vn=!0,hn,pn,rn,on,gn;on=ot.length;var un,xn=-1,En,wn,kn,Sn=Ft,An=Yt,Cn=Ut,Tn=-1,_n,Dn,$n,On,Mn,Vn,Wn,Yn,Rn="",Pn=this.defaultPropsArray,Ln;if(it.j===2||it.j===1){var In=0,Nn=0,Hn=it.j===2?-.5:-1,zn=0,Un=!0;for(Tt=0;Tt<Rt;Tt+=1)if(jt[Tt].n){for(In&&(In+=Nn);zn<Tt;)jt[zn].animatorJustifyOffset=In,zn+=1;In=0,Un=!0}else{for(rn=0;rn<on;rn+=1)hn=ot[rn].a,hn.t.propType&&(Un&&it.j===2&&(Nn+=hn.t.v*Hn),pn=ot[rn].s,un=pn.getMult(jt[Tt].anIndexes[rn],ct.a[rn].s.totalChars),un.length?In+=hn.t.v*un[0]*Hn:In+=hn.t.v*un*Hn);Un=!1}for(In&&(In+=Nn);zn<Tt;)jt[zn].animatorJustifyOffset=In,zn+=1}for(Tt=0;Tt<Rt;Tt+=1){if(ut.reset(),_n=1,jt[Tt].n)St=0,kt+=it.yOffset,kt+=vn?1:0,Ft=Sn,vn=!1,this._hasMaskedPath&&(Yt=An,Ut=Cn,Zt=en[Yt].points,Jt=Zt[Ut-1],Ht=Zt[Ut],tn=Ht.partialLength,Kt=0),Rn="",Yn="",Vn="",Ln="",Pn=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Tn!==jt[Tt].line){switch(it.j){case 1:Ft+=nn-it.lineWidths[jt[Tt].line];break;case 2:Ft+=(nn-it.lineWidths[jt[Tt].line])/2;break}Tn=jt[Tt].line}xn!==jt[Tt].ind&&(jt[xn]&&(Ft+=jt[xn].extra),Ft+=jt[Tt].an/2,xn=jt[Tt].ind),Ft+=et[0]*jt[Tt].an*.005;var lr=0;for(rn=0;rn<on;rn+=1)hn=ot[rn].a,hn.p.propType&&(pn=ot[rn].s,un=pn.getMult(jt[Tt].anIndexes[rn],ct.a[rn].s.totalChars),un.length?lr+=hn.p.v[0]*un[0]:lr+=hn.p.v[0]*un),hn.a.propType&&(pn=ot[rn].s,un=pn.getMult(jt[Tt].anIndexes[rn],ct.a[rn].s.totalChars),un.length?lr+=hn.a.v[0]*un[0]:lr+=hn.a.v[0]*un);for(Bt=!0,this._pathData.a.v&&(Ft=jt[0].an*.5+(nn-this._pathData.f.v-jt[0].an*.5-jt[jt.length-1].an*.5)*xn/(Rt-1),Ft+=this._pathData.f.v);Bt;)Kt+tn>=Ft+lr||!Zt?(ln=(Ft+lr-Kt)/Ht.partialLength,wn=Jt.point[0]+(Ht.point[0]-Jt.point[0])*ln,kn=Jt.point[1]+(Ht.point[1]-Jt.point[1])*ln,ut.translate(-et[0]*jt[Tt].an*.005,-(et[1]*yn)*.01),Bt=!1):Zt&&(Kt+=Ht.partialLength,Ut+=1,Ut>=Zt.length&&(Ut=0,Yt+=1,en[Yt]?Zt=en[Yt].points:sn.v.c?(Ut=0,Yt=0,Zt=en[Yt].points):(Kt-=Ht.partialLength,Zt=null)),Zt&&(Jt=Ht,Ht=Zt[Ut],tn=Ht.partialLength));En=jt[Tt].an/2-jt[Tt].add,ut.translate(-En,0,0)}else En=jt[Tt].an/2-jt[Tt].add,ut.translate(-En,0,0),ut.translate(-et[0]*jt[Tt].an*.005,-et[1]*yn*.01,0);for(rn=0;rn<on;rn+=1)hn=ot[rn].a,hn.t.propType&&(pn=ot[rn].s,un=pn.getMult(jt[Tt].anIndexes[rn],ct.a[rn].s.totalChars),(St!==0||it.j!==0)&&(this._hasMaskedPath?un.length?Ft+=hn.t.v*un[0]:Ft+=hn.t.v*un:un.length?St+=hn.t.v*un[0]:St+=hn.t.v*un));for(it.strokeWidthAnim&&($n=it.sw||0),it.strokeColorAnim&&(it.sc?Dn=[it.sc[0],it.sc[1],it.sc[2]]:Dn=[0,0,0]),it.fillColorAnim&&it.fc&&(On=[it.fc[0],it.fc[1],it.fc[2]]),rn=0;rn<on;rn+=1)hn=ot[rn].a,hn.a.propType&&(pn=ot[rn].s,un=pn.getMult(jt[Tt].anIndexes[rn],ct.a[rn].s.totalChars),un.length?ut.translate(-hn.a.v[0]*un[0],-hn.a.v[1]*un[1],hn.a.v[2]*un[2]):ut.translate(-hn.a.v[0]*un,-hn.a.v[1]*un,hn.a.v[2]*un));for(rn=0;rn<on;rn+=1)hn=ot[rn].a,hn.s.propType&&(pn=ot[rn].s,un=pn.getMult(jt[Tt].anIndexes[rn],ct.a[rn].s.totalChars),un.length?ut.scale(1+(hn.s.v[0]-1)*un[0],1+(hn.s.v[1]-1)*un[1],1):ut.scale(1+(hn.s.v[0]-1)*un,1+(hn.s.v[1]-1)*un,1));for(rn=0;rn<on;rn+=1){if(hn=ot[rn].a,pn=ot[rn].s,un=pn.getMult(jt[Tt].anIndexes[rn],ct.a[rn].s.totalChars),hn.sk.propType&&(un.length?ut.skewFromAxis(-hn.sk.v*un[0],hn.sa.v*un[1]):ut.skewFromAxis(-hn.sk.v*un,hn.sa.v*un)),hn.r.propType&&(un.length?ut.rotateZ(-hn.r.v*un[2]):ut.rotateZ(-hn.r.v*un)),hn.ry.propType&&(un.length?ut.rotateY(hn.ry.v*un[1]):ut.rotateY(hn.ry.v*un)),hn.rx.propType&&(un.length?ut.rotateX(hn.rx.v*un[0]):ut.rotateX(hn.rx.v*un)),hn.o.propType&&(un.length?_n+=(hn.o.v*un[0]-_n)*un[0]:_n+=(hn.o.v*un-_n)*un),it.strokeWidthAnim&&hn.sw.propType&&(un.length?$n+=hn.sw.v*un[0]:$n+=hn.sw.v*un),it.strokeColorAnim&&hn.sc.propType)for(Mn=0;Mn<3;Mn+=1)un.length?Dn[Mn]+=(hn.sc.v[Mn]-Dn[Mn])*un[0]:Dn[Mn]+=(hn.sc.v[Mn]-Dn[Mn])*un;if(it.fillColorAnim&&it.fc){if(hn.fc.propType)for(Mn=0;Mn<3;Mn+=1)un.length?On[Mn]+=(hn.fc.v[Mn]-On[Mn])*un[0]:On[Mn]+=(hn.fc.v[Mn]-On[Mn])*un;hn.fh.propType&&(un.length?On=addHueToRGB(On,hn.fh.v*un[0]):On=addHueToRGB(On,hn.fh.v*un)),hn.fs.propType&&(un.length?On=addSaturationToRGB(On,hn.fs.v*un[0]):On=addSaturationToRGB(On,hn.fs.v*un)),hn.fb.propType&&(un.length?On=addBrightnessToRGB(On,hn.fb.v*un[0]):On=addBrightnessToRGB(On,hn.fb.v*un))}}for(rn=0;rn<on;rn+=1)hn=ot[rn].a,hn.p.propType&&(pn=ot[rn].s,un=pn.getMult(jt[Tt].anIndexes[rn],ct.a[rn].s.totalChars),this._hasMaskedPath?un.length?ut.translate(0,hn.p.v[1]*un[0],-hn.p.v[2]*un[1]):ut.translate(0,hn.p.v[1]*un,-hn.p.v[2]*un):un.length?ut.translate(hn.p.v[0]*un[0],hn.p.v[1]*un[1],-hn.p.v[2]*un[2]):ut.translate(hn.p.v[0]*un,hn.p.v[1]*un,-hn.p.v[2]*un));if(it.strokeWidthAnim&&(Vn=$n<0?0:$n),it.strokeColorAnim&&(Wn="rgb("+Math.round(Dn[0]*255)+","+Math.round(Dn[1]*255)+","+Math.round(Dn[2]*255)+")"),it.fillColorAnim&&it.fc&&(Yn="rgb("+Math.round(On[0]*255)+","+Math.round(On[1]*255)+","+Math.round(On[2]*255)+")"),this._hasMaskedPath){if(ut.translate(0,-it.ls),ut.translate(0,et[1]*yn*.01+kt,0),this._pathData.p.v){an=(Ht.point[1]-Jt.point[1])/(Ht.point[0]-Jt.point[0]);var cr=Math.atan(an)*180/Math.PI;Ht.point[0]<Jt.point[0]&&(cr+=180),ut.rotate(-cr*Math.PI/180)}ut.translate(wn,kn,0),Ft-=et[0]*jt[Tt].an*.005,jt[Tt+1]&&xn!==jt[Tt+1].ind&&(Ft+=jt[Tt].an/2,Ft+=it.tr*.001*it.finalSize)}else{switch(ut.translate(St,kt,0),it.ps&&ut.translate(it.ps[0],it.ps[1]+it.ascent,0),it.j){case 1:ut.translate(jt[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[jt[Tt].line]),0,0);break;case 2:ut.translate(jt[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[jt[Tt].line])/2,0,0);break}ut.translate(0,-it.ls),ut.translate(En,0,0),ut.translate(et[0]*jt[Tt].an*.005,et[1]*yn*.01,0),St+=jt[Tt].l+it.tr*.001*it.finalSize}dt==="html"?Rn=ut.toCSS():dt==="svg"?Rn=ut.to2dCSS():Pn=[ut.props[0],ut.props[1],ut.props[2],ut.props[3],ut.props[4],ut.props[5],ut.props[6],ut.props[7],ut.props[8],ut.props[9],ut.props[10],ut.props[11],ut.props[12],ut.props[13],ut.props[14],ut.props[15]],Ln=_n}ft<=Tt?(gn=new LetterProps(Ln,Vn,Wn,Yn,Rn,Pn),this.renderedLetters.push(gn),ft+=1,this.lettersChangedFlag=!0):(gn=this.renderedLetters[Tt],this.lettersChangedFlag=gn.update(Ln,Vn,Wn,Yn,Rn,Pn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(it,g,et){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(it,g,et),this.textProperty=new TextProperty(this,it.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(it.t,this.renderType,this),this.initTransform(it,g,et),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(it){this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange)},ITextElement.prototype.createPathShape=function(it,g){var et,ot=g.length,ct,ut="";for(et=0;et<ot;et+=1)g[et].ty==="sh"&&(ct=g[et].ks.k,ut+=buildShapeString(ct,ct.i.length,!0,it));return ut},ITextElement.prototype.updateDocumentData=function(it,g){this.textProperty.updateDocumentData(it,g)},ITextElement.prototype.canResizeFont=function(it){this.textProperty.canResizeFont(it)},ITextElement.prototype.setMinimumFontSize=function(it){this.textProperty.setMinimumFontSize(it)},ITextElement.prototype.applyTextPropertiesToMatrix=function(it,g,et,ot,ct){switch(it.ps&&g.translate(it.ps[0],it.ps[1]+it.ascent,0),g.translate(0,-it.ls,0),it.j){case 1:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et]),0,0);break;case 2:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et])/2,0,0);break}g.translate(ot,ct,0)},ITextElement.prototype.buildColor=function(it){return"rgb("+Math.round(it[0]*255)+","+Math.round(it[1]*255)+","+Math.round(it[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(it,g,et){this.textSpans=[],this.renderType="svg",this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(it){for(var g=0,et=it.length,ot=[],ct="";g<et;)it[g]===String.fromCharCode(13)||it[g]===String.fromCharCode(3)?(ot.push(ct),ct=""):ct+=it[g],g+=1;return ot.push(ct),ot},SVGTextLottieElement.prototype.buildShapeData=function(it,g){if(it.shapes&&it.shapes.length){var et=it.shapes[0];if(et.it){var ot=et.it[et.it.length-1];ot.s&&(ot.s.k[0]=g,ot.s.k[1]=g)}}return it},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var it,g,et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et?et.l.length:0),et.fc?this.layerElement.setAttribute("fill",this.buildColor(et.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),et.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(et.sc)),this.layerElement.setAttribute("stroke-width",et.sw)),this.layerElement.setAttribute("font-size",et.finalSize);var ot=this.globalData.fontManager.getFontByName(et.f);if(ot.fClass)this.layerElement.setAttribute("class",ot.fClass);else{this.layerElement.setAttribute("font-family",ot.fFamily);var ct=et.fWeight,ut=et.fStyle;this.layerElement.setAttribute("font-style",ut),this.layerElement.setAttribute("font-weight",ct)}this.layerElement.setAttribute("aria-label",et.t);var dt=et.l||[],ft=!!this.globalData.fontManager.chars;g=dt.length;var St,kt=this.mHelper,Tt="",Rt=this.data.singleShape,jt=0,$t=0,Ft=!0,Ht=et.tr*.001*et.finalSize;if(Rt&&!ft&&!et.sz){var Kt=this.textContainer,Bt="start";switch(et.j){case 1:Bt="end";break;case 2:Bt="middle";break;default:Bt="start";break}Kt.setAttribute("text-anchor",Bt),Kt.setAttribute("letter-spacing",Ht);var Ut=this.buildTextContents(et.finalText);for(g=Ut.length,$t=et.ps?et.ps[1]+et.ascent:0,it=0;it<g;it+=1)St=this.textSpans[it].span||createNS("tspan"),St.textContent=Ut[it],St.setAttribute("x",0),St.setAttribute("y",$t),St.style.display="inherit",Kt.appendChild(St),this.textSpans[it]||(this.textSpans[it]={span:null,glyph:null}),this.textSpans[it].span=St,$t+=et.finalLineHeight;this.layerElement.appendChild(Kt)}else{var Yt=this.textSpans.length,Jt;for(it=0;it<g;it+=1){if(this.textSpans[it]||(this.textSpans[it]={span:null,childSpan:null,glyph:null}),!ft||!Rt||it===0){if(St=Yt>it?this.textSpans[it].span:createNS(ft?"g":"text"),Yt<=it){if(St.setAttribute("stroke-linecap","butt"),St.setAttribute("stroke-linejoin","round"),St.setAttribute("stroke-miterlimit","4"),this.textSpans[it].span=St,ft){var Zt=createNS("g");St.appendChild(Zt),this.textSpans[it].childSpan=Zt}this.textSpans[it].span=St,this.layerElement.appendChild(St)}St.style.display="inherit"}if(kt.reset(),Rt&&(dt[it].n&&(jt=-Ht,$t+=et.yOffset,$t+=Ft?1:0,Ft=!1),this.applyTextPropertiesToMatrix(et,kt,dt[it].line,jt,$t),jt+=dt[it].l||0,jt+=Ht),ft){Jt=this.globalData.fontManager.getCharData(et.finalText[it],ot.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily);var en;if(Jt.t===1)en=new SVGCompElement(Jt.data,this.globalData,this);else{var tn=emptyShapeData;Jt.data&&Jt.data.shapes&&(tn=this.buildShapeData(Jt.data,et.finalSize)),en=new SVGShapeElement(tn,this.globalData,this)}if(this.textSpans[it].glyph){var nn=this.textSpans[it].glyph;this.textSpans[it].childSpan.removeChild(nn.layerElement),nn.destroy()}this.textSpans[it].glyph=en,en._debug=!0,en.prepareFrame(0),en.renderFrame(),this.textSpans[it].childSpan.appendChild(en.layerElement),Jt.t===1&&this.textSpans[it].childSpan.setAttribute("transform","scale("+et.finalSize/100+","+et.finalSize/100+")")}else Rt&&St.setAttribute("transform","translate("+kt.props[12]+","+kt.props[13]+")"),St.textContent=dt[it].val,St.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Rt&&St&&St.setAttribute("d",Tt)}for(;it<this.textSpans.length;)this.textSpans[it].span.style.display="none",it+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var it=this.layerElement.getBBox();this.bbox={top:it.y,left:it.x,width:it.width,height:it.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var it,g=this.textSpans.length,et;for(this.renderedFrame=this.comp.renderedFrame,it=0;it<g;it+=1)et=this.textSpans[it].glyph,et&&(et.prepareFrame(this.comp.renderedFrame-this.data.st),et._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var it,g,et=this.textAnimator.renderedLetters,ot=this.textProperty.currentData.l;g=ot.length;var ct,ut,dt;for(it=0;it<g;it+=1)ot[it].n||(ct=et[it],ut=this.textSpans[it].span,dt=this.textSpans[it].glyph,dt&&dt.renderFrame(),ct._mdf.m&&ut.setAttribute("transform",ct.m),ct._mdf.o&&ut.setAttribute("opacity",ct.o),ct._mdf.sw&&ut.setAttribute("stroke-width",ct.sw),ct._mdf.sc&&ut.setAttribute("stroke",ct.sc),ct._mdf.fc&&ut.setAttribute("fill",ct.fc))}};function ISolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var it=createNS("rect");it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.layerElement.appendChild(it)};function NullElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initFrame(),this.initTransform(it,g,et),this.initHierarchy()}NullElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(it){return new NullElement(it,this.globalData,this)},SVGRendererBase.prototype.createShape=function(it){return new SVGShapeElement(it,this.globalData,this)},SVGRendererBase.prototype.createText=function(it){return new SVGTextLottieElement(it,this.globalData,this)},SVGRendererBase.prototype.createImage=function(it){return new IImageElement(it,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(it){return new ISolidElement(it,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(it){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+it.w+" "+it.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",it.w),this.svgElement.setAttribute("height",it.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var g=this.globalData.defs;this.setupGlobalData(it,g),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=it;var et=createNS("clipPath"),ot=createNS("rect");ot.setAttribute("width",it.w),ot.setAttribute("height",it.h),ot.setAttribute("x",0),ot.setAttribute("y",0);var ct=createElementID();et.setAttribute("id",ct),et.appendChild(ot),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")"),g.appendChild(et),this.layers=it.layers,this.elements=createSizedArray(it.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(it){var g=0,et=this.layers.length;for(g=0;g<et;g+=1)if(this.layers[g].ind===it)return g;return-1},SVGRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){g[it]=!0;var et=this.createItem(this.layers[it]);if(g[it]=et,getExpressionsPlugin()&&(this.layers[it].ty===0&&this.globalData.projectInterface.registerComposition(et),et.initExpressions()),this.appendElementInPos(et,it),this.layers[it].tt){var ot="tp"in this.layers[it]?this.findIndexByInd(this.layers[it].tp):it-1;if(ot===-1)return;if(!this.elements[ot]||this.elements[ot]===!0)this.buildItem(ot),this.addPendingElement(et);else{var ct=g[ot],ut=ct.getMatte(this.layers[it].tt);et.setMatte(ut)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();if(it.checkParenting(),it.data.tt)for(var g=0,et=this.elements.length;g<et;){if(this.elements[g]===it){var ot="tp"in it.data?this.findIndexByInd(it.data.tp):g-1,ct=this.elements[ot],ut=ct.getMatte(this.layers[g].tt);it.setMatte(ut);break}g+=1}}},SVGRendererBase.prototype.renderFrame=function(it){if(!(this.renderedFrame===it||this.destroyed)){it===null?it=this.renderedFrame:this.renderedFrame=it,this.globalData.frameNum=it,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=it,this.globalData._mdf=!1;var g,et=this.layers.length;for(this.completeLayers||this.checkLayers(it),g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].prepareFrame(it-this.layers[g].st);if(this.globalData._mdf)for(g=0;g<et;g+=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){for(var ot=0,ct;ot<g;)this.elements[ot]&&this.elements[ot]!==!0&&this.elements[ot].getBaseElement()&&(ct=this.elements[ot].getBaseElement()),ot+=1;ct?this.layerElement.insertBefore(et,ct):this.layerElement.appendChild(et)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initTransform(it,g,et),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!g.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(it){if(this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=it/this.data.sr;else{var g=this.tm.v;g===this.data.op&&(g=this.data.op-1),this.renderedFrame=g}var et,ot=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&(this.elements[et].prepareFrame(this.renderedFrame-this.layers[et].st),this.elements[et]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)(this.completeLayers||this.elements[it])&&this.elements[it].renderFrame()},ICompElement.prototype.setElements=function(it){this.elements=it},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(it,g,et){this.layers=it.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function SVGRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var et="";if(g&&g.title){var ot=createNS("title"),ct=createElementID();ot.setAttribute("id",ct),ot.textContent=g.title,this.svgElement.appendChild(ot),et+=ct}if(g&&g.description){var ut=createNS("desc"),dt=createElementID();ut.setAttribute("id",dt),ut.textContent=g.description,this.svgElement.appendChild(ut),et+=" "+dt}et&&this.svgElement.setAttribute("aria-labelledby",et);var ft=createNS("defs");this.svgElement.appendChild(ft);var St=createNS("g");this.svgElement.appendChild(St),this.layerElement=St,this.renderConfig={preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",progressiveLoad:g&&g.progressiveLoad||!1,hideOnTransparent:!(g&&g.hideOnTransparent===!1),viewBoxOnly:g&&g.viewBoxOnly||!1,viewBoxSize:g&&g.viewBoxSize||!1,className:g&&g.className||"",id:g&&g.id||"",focusable:g&&g.focusable,filterSize:{width:g&&g.filterSize&&g.filterSize.width||"100%",height:g&&g.filterSize&&g.filterSize.height||"100%",x:g&&g.filterSize&&g.filterSize.x||"0%",y:g&&g.filterSize&&g.filterSize.y||"0%"},width:g&&g.width,height:g&&g.height,runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:ft,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(g){var et,ot=g.length,ct="_";for(et=0;et<ot;et+=1)ct+=g[et].transform.key+"_";var ut=this.sequences[ct];return ut||(ut={transforms:[].concat(g),finalTransform:new Matrix,_mdf:!1},this.sequences[ct]=ut,this.sequenceList.push(ut)),ut},processSequence:function(g,et){for(var ot=0,ct=g.transforms.length,ut=et;ot<ct&&!et;){if(g.transforms[ot].transform.mProps._mdf){ut=!0;break}ot+=1}if(ut)for(g.finalTransform.reset(),ot=ct-1;ot>=0;ot-=1)g.finalTransform.multiply(g.transforms[ot].transform.mProps.v);g._mdf=ut},processSequences:function(g){var et,ot=this.sequenceList.length;for(et=0;et<ot;et+=1)this.processSequence(this.sequenceList[et],g)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var g="__lottie_element_luma_buffer",et=null,ot=null,ct=null;function ut(){var St=createNS("svg"),kt=createNS("filter"),Tt=createNS("feColorMatrix");return kt.setAttribute("id",g),Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),kt.appendChild(Tt),St.appendChild(kt),St.setAttribute("id",g+"_svg"),featureSupport.svgLumaHidden&&(St.style.display="none"),St}function dt(){et||(ct=ut(),document.body.appendChild(ct),et=createTag("canvas"),ot=et.getContext("2d"),ot.filter="url(#"+g+")",ot.fillStyle="rgba(0,0,0,0)",ot.fillRect(0,0,1,1))}function ft(St){return et||dt(),et.width=St.width,et.height=St.height,ot.filter="url(#"+g+")",et}return{load:dt,get:ft}};function createCanvas(it,g){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(it,g);var et=createTag("canvas");return et.width=it,et.height=g,et}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(it){var g,et=it.data.ef?it.data.ef.length:0;this.filters=[];var ot;for(g=0;g<et;g+=1){ot=null;var ct=it.data.ef[g].ty;if(registeredEffects[ct]){var ut=registeredEffects[ct].effect;ot=new ut(it.effectsManager.effectElements[g],it)}ot&&this.filters.push(ot)}this.filters.length&&it.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},CVEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect(it,g){registeredEffects[it]={effect:g}}function CVMaskElement(it,g){this.data=it,this.element=g,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var et,ot=this.masksProperties.length,ct=!1;for(et=0;et<ot;et+=1)this.masksProperties[et].mode!=="n"&&(ct=!0),this.viewData[et]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[et],3);this.hasMasks=ct,ct&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var it=this.element.finalTransform.mat,g=this.element.canvasContext,et,ot=this.masksProperties.length,ct,ut,dt;for(g.beginPath(),et=0;et<ot;et+=1)if(this.masksProperties[et].mode!=="n"){this.masksProperties[et].inv&&(g.moveTo(0,0),g.lineTo(this.element.globalData.compSize.w,0),g.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),g.lineTo(0,this.element.globalData.compSize.h),g.lineTo(0,0)),dt=this.viewData[et].v,ct=it.applyToPointArray(dt.v[0][0],dt.v[0][1],0),g.moveTo(ct[0],ct[1]);var ft,St=dt._length;for(ft=1;ft<St;ft+=1)ut=it.applyToTriplePoints(dt.o[ft-1],dt.i[ft],dt.v[ft]),g.bezierCurveTo(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5]);ut=it.applyToTriplePoints(dt.o[ft-1],dt.i[0],dt.v[0]),g.bezierCurveTo(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5])}this.element.globalData.renderer.save(!0),g.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var g=this.globalData.canvasContext,et=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(et);var ot=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(ot),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var g=this.globalData;if(g.blendMode!==this.data.bm){g.blendMode=this.data.bm;var et=getBlendMode(this.data.bm);g.canvasContext.globalCompositeOperation=et}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(g){g.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var g=this.buffers[0],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var g=this.buffers[1],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var ot=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(ot.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var ct=assetLoader.getLumaCanvas(this.canvasContext.canvas),ut=ct.getContext("2d");ut.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(ct,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(g,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(g){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!g)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var et=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(et),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(et),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(it,g,et,ot){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ct=4;g.ty==="rc"?ct=5:g.ty==="el"?ct=6:g.ty==="sr"&&(ct=7),this.sh=ShapePropertyFactory.getShapeProp(it,g,ct,it);var ut,dt=et.length,ft;for(ut=0;ut<dt;ut+=1)et[ut].closed||(ft={transforms:ot.addTransformSequence(et[ut].transforms),trNodes:[]},this.styledShapes.push(ft),et[ut].elements.push(ft))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(it,g){var et={data:it,type:it.ty,preTransforms:this.transformsManager.addTransformSequence(g),transforms:[],elements:[],closed:it.hd===!0},ot={};if(it.ty==="fl"||it.ty==="st"?(ot.c=PropertyFactory.getProp(this,it.c,1,255,this),ot.c.k||(et.co="rgb("+bmFloor(ot.c.v[0])+","+bmFloor(ot.c.v[1])+","+bmFloor(ot.c.v[2])+")")):(it.ty==="gf"||it.ty==="gs")&&(ot.s=PropertyFactory.getProp(this,it.s,1,null,this),ot.e=PropertyFactory.getProp(this,it.e,1,null,this),ot.h=PropertyFactory.getProp(this,it.h||{k:0},0,.01,this),ot.a=PropertyFactory.getProp(this,it.a||{k:0},0,degToRads,this),ot.g=new GradientProperty(this,it.g,this)),ot.o=PropertyFactory.getProp(this,it.o,0,.01,this),it.ty==="st"||it.ty==="gs"){if(et.lc=lineCapEnum[it.lc||2],et.lj=lineJoinEnum[it.lj||2],it.lj==1&&(et.ml=it.ml),ot.w=PropertyFactory.getProp(this,it.w,0,null,this),ot.w.k||(et.wi=ot.w.v),it.d){var ct=new DashProperty(this,it.d,"canvas",this);ot.d=ct,ot.d.k||(et.da=ot.d.dashArray,et.do=ot.d.dashoffset[0])}}else et.r=it.r===2?"evenodd":"nonzero";return this.stylesList.push(et),ot.style=et,ot},CVShapeElement.prototype.createGroupElement=function(){var it={it:[],prevViewData:[]};return it},CVShapeElement.prototype.createTransformElement=function(it){var g={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,it.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,it,this)}};return g},CVShapeElement.prototype.createShapeElement=function(it){var g=new CVShapeData(this,it,this.stylesList,this.transformsManager);return this.shapes.push(g),this.addShapeToModifiers(g),g},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(it){var g,et=this.stylesList.length;for(g=0;g<et;g+=1)this.stylesList[g].closed||this.stylesList[g].transforms.push(it)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].closed||this.stylesList[it].transforms.pop()},CVShapeElement.prototype.closeStyles=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].closed=!0},CVShapeElement.prototype.searchShapes=function(it,g,et,ot,ct){var ut,dt=it.length-1,ft,St,kt=[],Tt=[],Rt,jt,$t,Ft=[].concat(ct);for(ut=dt;ut>=0;ut-=1){if(Rt=this.searchProcessedElement(it[ut]),Rt?g[ut]=et[Rt-1]:it[ut]._shouldRender=ot,it[ut].ty==="fl"||it[ut].ty==="st"||it[ut].ty==="gf"||it[ut].ty==="gs")Rt?g[ut].style.closed=!1:g[ut]=this.createStyleElement(it[ut],Ft),kt.push(g[ut].style);else if(it[ut].ty==="gr"){if(!Rt)g[ut]=this.createGroupElement(it[ut]);else for(St=g[ut].it.length,ft=0;ft<St;ft+=1)g[ut].prevViewData[ft]=g[ut].it[ft];this.searchShapes(it[ut].it,g[ut].it,g[ut].prevViewData,ot,Ft)}else it[ut].ty==="tr"?(Rt||($t=this.createTransformElement(it[ut]),g[ut]=$t),Ft.push(g[ut]),this.addTransformToStyleList(g[ut])):it[ut].ty==="sh"||it[ut].ty==="rc"||it[ut].ty==="el"||it[ut].ty==="sr"?Rt||(g[ut]=this.createShapeElement(it[ut])):it[ut].ty==="tm"||it[ut].ty==="rd"||it[ut].ty==="pb"||it[ut].ty==="zz"||it[ut].ty==="op"?(Rt?(jt=g[ut],jt.closed=!1):(jt=ShapeModifiers.getModifier(it[ut].ty),jt.init(this,it[ut]),g[ut]=jt,this.shapeModifiers.push(jt)),Tt.push(jt)):it[ut].ty==="rp"&&(Rt?(jt=g[ut],jt.closed=!0):(jt=ShapeModifiers.getModifier(it[ut].ty),g[ut]=jt,jt.init(this,it,ut,g),this.shapeModifiers.push(jt),ot=!1),Tt.push(jt));this.addProcessedElement(it[ut],ut+1)}for(this.removeTransformFromStyleList(),this.closeStyles(kt),dt=Tt.length,ut=0;ut<dt;ut+=1)Tt[ut].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(it,g){(it._opMdf||g.op._mdf||this._isFirstFrame)&&(g.opacity=it.opacity,g.opacity*=g.op.v,g._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var it,g=this.stylesList.length,et,ot,ct,ut,dt,ft,St=this.globalData.renderer,kt=this.globalData.canvasContext,Tt,Rt;for(it=0;it<g;it+=1)if(Rt=this.stylesList[it],Tt=Rt.type,!((Tt==="st"||Tt==="gs")&&Rt.wi===0||!Rt.data._shouldRender||Rt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(St.save(),dt=Rt.elements,Tt==="st"||Tt==="gs"?(St.ctxStrokeStyle(Tt==="st"?Rt.co:Rt.grd),St.ctxLineWidth(Rt.wi),St.ctxLineCap(Rt.lc),St.ctxLineJoin(Rt.lj),St.ctxMiterLimit(Rt.ml||0)):St.ctxFillStyle(Tt==="fl"?Rt.co:Rt.grd),St.ctxOpacity(Rt.coOp),Tt!=="st"&&Tt!=="gs"&&kt.beginPath(),St.ctxTransform(Rt.preTransforms.finalTransform.props),ot=dt.length,et=0;et<ot;et+=1){for((Tt==="st"||Tt==="gs")&&(kt.beginPath(),Rt.da&&(kt.setLineDash(Rt.da),kt.lineDashOffset=Rt.do)),ft=dt[et].trNodes,ut=ft.length,ct=0;ct<ut;ct+=1)ft[ct].t==="m"?kt.moveTo(ft[ct].p[0],ft[ct].p[1]):ft[ct].t==="c"?kt.bezierCurveTo(ft[ct].pts[0],ft[ct].pts[1],ft[ct].pts[2],ft[ct].pts[3],ft[ct].pts[4],ft[ct].pts[5]):kt.closePath();(Tt==="st"||Tt==="gs")&&(St.ctxStroke(),Rt.da&&kt.setLineDash(this.dashResetter))}Tt!=="st"&&Tt!=="gs"&&this.globalData.renderer.ctxFill(Rt.r),St.restore()}},CVShapeElement.prototype.renderShape=function(it,g,et,ot){var ct,ut=g.length-1,dt;for(dt=it,ct=ut;ct>=0;ct-=1)g[ct].ty==="tr"?(dt=et[ct].transform,this.renderShapeTransform(it,dt)):g[ct].ty==="sh"||g[ct].ty==="el"||g[ct].ty==="rc"||g[ct].ty==="sr"?this.renderPath(g[ct],et[ct]):g[ct].ty==="fl"?this.renderFill(g[ct],et[ct],dt):g[ct].ty==="st"?this.renderStroke(g[ct],et[ct],dt):g[ct].ty==="gf"||g[ct].ty==="gs"?this.renderGradientFill(g[ct],et[ct],dt):g[ct].ty==="gr"?this.renderShape(dt,g[ct].it,et[ct].it):g[ct].ty;ot&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(it,g){if(this._isFirstFrame||g._mdf||it.transforms._mdf){var et=it.trNodes,ot=g.paths,ct,ut,dt,ft=ot._length;et.length=0;var St=it.transforms.finalTransform;for(dt=0;dt<ft;dt+=1){var kt=ot.shapes[dt];if(kt&&kt.v){for(ut=kt._length,ct=1;ct<ut;ct+=1)ct===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ct-1],kt.i[ct],kt.v[ct])});ut===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),kt.c&&ut&&(et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ct-1],kt.i[0],kt.v[0])}),et.push({t:"z"}))}}it.trNodes=et}},CVShapeElement.prototype.renderPath=function(it,g){if(it.hd!==!0&&it._shouldRender){var et,ot=g.styledShapes.length;for(et=0;et<ot;et+=1)this.renderStyledShape(g.styledShapes[et],g.sh)}},CVShapeElement.prototype.renderFill=function(it,g,et){var ot=g.style;(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity)},CVShapeElement.prototype.renderGradientFill=function(it,g,et){var ot=g.style,ct;if(!ot.grd||g.g._mdf||g.s._mdf||g.e._mdf||it.t!==1&&(g.h._mdf||g.a._mdf)){var ut=this.globalData.canvasContext,dt=g.s.v,ft=g.e.v;if(it.t===1)ct=ut.createLinearGradient(dt[0],dt[1],ft[0],ft[1]);else{var St=Math.sqrt(Math.pow(dt[0]-ft[0],2)+Math.pow(dt[1]-ft[1],2)),kt=Math.atan2(ft[1]-dt[1],ft[0]-dt[0]),Tt=g.h.v;Tt>=1?Tt=.99:Tt<=-1&&(Tt=-.99);var Rt=St*Tt,jt=Math.cos(kt+g.a.v)*Rt+dt[0],$t=Math.sin(kt+g.a.v)*Rt+dt[1];ct=ut.createRadialGradient(jt,$t,0,dt[0],dt[1],St)}var Ft,Ht=it.g.p,Kt=g.g.c,Bt=1;for(Ft=0;Ft<Ht;Ft+=1)g.g._hasOpacity&&g.g._collapsable&&(Bt=g.g.o[Ft*2+1]),ct.addColorStop(Kt[Ft*4]/100,"rgba("+Kt[Ft*4+1]+","+Kt[Ft*4+2]+","+Kt[Ft*4+3]+","+Bt+")");ot.grd=ct}ot.coOp=g.o.v*et.opacity},CVShapeElement.prototype.renderStroke=function(it,g,et){var ot=g.style,ct=g.d;ct&&(ct._mdf||this._isFirstFrame)&&(ot.da=ct.dashArray,ot.do=ct.dashoffset[0]),(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity),(g.w._mdf||this._isFirstFrame)&&(ot.wi=g.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(it,g,et){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=!1;it.fc?(g=!0,this.values.fill=this.buildColor(it.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=g;var et=!1;it.sc&&(et=!0,this.values.stroke=this.buildColor(it.sc),this.values.sWidth=it.sw);var ot=this.globalData.fontManager.getFontByName(it.f),ct,ut,dt=it.l,ft=this.mHelper;this.stroke=et,this.values.fValue=it.finalSize+"px "+this.globalData.fontManager.getFontByName(it.f).fFamily,ut=it.finalText.length;var St,kt,Tt,Rt,jt,$t,Ft,Ht,Kt,Bt,Ut=this.data.singleShape,Yt=it.tr*.001*it.finalSize,Jt=0,Zt=0,en=!0,tn=0;for(ct=0;ct<ut;ct+=1){St=this.globalData.fontManager.getCharData(it.finalText[ct],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),kt=St&&St.data||{},ft.reset(),Ut&&dt[ct].n&&(Jt=-Yt,Zt+=it.yOffset,Zt+=en?1:0,en=!1),jt=kt.shapes?kt.shapes[0].it:[],Ft=jt.length,ft.scale(it.finalSize/100,it.finalSize/100),Ut&&this.applyTextPropertiesToMatrix(it,ft,dt[ct].line,Jt,Zt),Kt=createSizedArray(Ft-1);var nn=0;for($t=0;$t<Ft;$t+=1)if(jt[$t].ty==="sh"){for(Rt=jt[$t].ks.k.i.length,Ht=jt[$t].ks.k,Bt=[],Tt=1;Tt<Rt;Tt+=1)Tt===1&&Bt.push(ft.applyToX(Ht.v[0][0],Ht.v[0][1],0),ft.applyToY(Ht.v[0][0],Ht.v[0][1],0)),Bt.push(ft.applyToX(Ht.o[Tt-1][0],Ht.o[Tt-1][1],0),ft.applyToY(Ht.o[Tt-1][0],Ht.o[Tt-1][1],0),ft.applyToX(Ht.i[Tt][0],Ht.i[Tt][1],0),ft.applyToY(Ht.i[Tt][0],Ht.i[Tt][1],0),ft.applyToX(Ht.v[Tt][0],Ht.v[Tt][1],0),ft.applyToY(Ht.v[Tt][0],Ht.v[Tt][1],0));Bt.push(ft.applyToX(Ht.o[Tt-1][0],Ht.o[Tt-1][1],0),ft.applyToY(Ht.o[Tt-1][0],Ht.o[Tt-1][1],0),ft.applyToX(Ht.i[0][0],Ht.i[0][1],0),ft.applyToY(Ht.i[0][0],Ht.i[0][1],0),ft.applyToX(Ht.v[0][0],Ht.v[0][1],0),ft.applyToY(Ht.v[0][0],Ht.v[0][1],0)),Kt[nn]=Bt,nn+=1}Ut&&(Jt+=dt[ct].l,Jt+=Yt),this.textSpans[tn]?this.textSpans[tn].elem=Kt:this.textSpans[tn]={elem:Kt},tn+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var it=this.canvasContext;it.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var g,et,ot,ct,ut,dt,ft=this.textAnimator.renderedLetters,St=this.textProperty.currentData.l;et=St.length;var kt,Tt=null,Rt=null,jt=null,$t,Ft,Ht=this.globalData.renderer;for(g=0;g<et;g+=1)if(!St[g].n){if(kt=ft[g],kt&&(Ht.save(),Ht.ctxTransform(kt.p),Ht.ctxOpacity(kt.o)),this.fill){for(kt&&kt.fc?Tt!==kt.fc&&(Ht.ctxFillStyle(kt.fc),Tt=kt.fc):Tt!==this.values.fill&&(Tt=this.values.fill,Ht.ctxFillStyle(this.values.fill)),$t=this.textSpans[g].elem,ct=$t.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ct;ot+=1)for(Ft=$t[ot],dt=Ft.length,this.globalData.canvasContext.moveTo(Ft[0],Ft[1]),ut=2;ut<dt;ut+=6)this.globalData.canvasContext.bezierCurveTo(Ft[ut],Ft[ut+1],Ft[ut+2],Ft[ut+3],Ft[ut+4],Ft[ut+5]);this.globalData.canvasContext.closePath(),Ht.ctxFill()}if(this.stroke){for(kt&&kt.sw?jt!==kt.sw&&(jt=kt.sw,Ht.ctxLineWidth(kt.sw)):jt!==this.values.sWidth&&(jt=this.values.sWidth,Ht.ctxLineWidth(this.values.sWidth)),kt&&kt.sc?Rt!==kt.sc&&(Rt=kt.sc,Ht.ctxStrokeStyle(kt.sc)):Rt!==this.values.stroke&&(Rt=this.values.stroke,Ht.ctxStrokeStyle(this.values.stroke)),$t=this.textSpans[g].elem,ct=$t.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ct;ot+=1)for(Ft=$t[ot],dt=Ft.length,this.globalData.canvasContext.moveTo(Ft[0],Ft[1]),ut=2;ut<dt;ut+=6)this.globalData.canvasContext.bezierCurveTo(Ft[ut],Ft[ut+1],Ft[ut+2],Ft[ut+3],Ft[ut+4],Ft[ut+5]);this.globalData.canvasContext.closePath(),Ht.ctxStroke()}kt&&this.globalData.renderer.restore()}};function CVImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.img=g.imageLoader.getAsset(this.assetData),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var it=createTag("canvas");it.width=this.assetData.w,it.height=this.assetData.h;var g=it.getContext("2d"),et=this.img.width,ot=this.img.height,ct=et/ot,ut=this.assetData.w/this.assetData.h,dt,ft,St=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;ct>ut&&St==="xMidYMid slice"||ct<ut&&St!=="xMidYMid slice"?(ft=ot,dt=ft*ut):(dt=et,ft=dt/ut),g.drawImage(this.img,(et-dt)/2,(ot-ft)/2,dt,ft,0,0,this.assetData.w,this.assetData.h),this.img=it}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(it){return new CVShapeElement(it,this.globalData,this)},CanvasRendererBase.prototype.createText=function(it){return new CVTextElement(it,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(it){return new CVImageElement(it,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(it){return new CVSolidElement(it,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(it){it[0]===1&&it[1]===0&&it[4]===0&&it[5]===1&&it[12]===0&&it[13]===0||this.canvasContext.transform(it[0],it[1],it[4],it[5],it[12],it[13])},CanvasRendererBase.prototype.ctxOpacity=function(it){this.canvasContext.globalAlpha*=it<0?0:it},CanvasRendererBase.prototype.ctxFillStyle=function(it){this.canvasContext.fillStyle=it},CanvasRendererBase.prototype.ctxStrokeStyle=function(it){this.canvasContext.strokeStyle=it},CanvasRendererBase.prototype.ctxLineWidth=function(it){this.canvasContext.lineWidth=it},CanvasRendererBase.prototype.ctxLineCap=function(it){this.canvasContext.lineCap=it},CanvasRendererBase.prototype.ctxLineJoin=function(it){this.canvasContext.lineJoin=it},CanvasRendererBase.prototype.ctxMiterLimit=function(it){this.canvasContext.miterLimit=it},CanvasRendererBase.prototype.ctxFill=function(it){this.canvasContext.fill(it)},CanvasRendererBase.prototype.ctxFillRect=function(it,g,et,ot){this.canvasContext.fillRect(it,g,et,ot)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(it){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}it&&(this.globalData.blendMode="source-over"),this.contextData.restore(it)},CanvasRendererBase.prototype.configAnimation=function(it){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var g=this.animationItem.container.style;g.width="100%",g.height="100%";var et="0px 0px 0px";g.transformOrigin=et,g.mozTransformOrigin=et,g.webkitTransformOrigin=et,g["-webkit-transform"]=et,g.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=it,this.layers=it.layers,this.transformCanvas={w:it.w,h:it.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(it,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(it.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(it,g){this.reset();var et,ot;it?(et=it,ot=g,this.canvasContext.canvas.width=et,this.canvasContext.canvas.height=ot):(this.animationItem.wrapper&&this.animationItem.container?(et=this.animationItem.wrapper.offsetWidth,ot=this.animationItem.wrapper.offsetHeight):(et=this.canvasContext.canvas.width,ot=this.canvasContext.canvas.height),this.canvasContext.canvas.width=et*this.renderConfig.dpr,this.canvasContext.canvas.height=ot*this.renderConfig.dpr);var ct,ut;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var dt=this.renderConfig.preserveAspectRatio.split(" "),ft=dt[1]||"meet",St=dt[0]||"xMidYMid",kt=St.substr(0,4),Tt=St.substr(4);ct=et/ot,ut=this.transformCanvas.w/this.transformCanvas.h,ut>ct&&ft==="meet"||ut<ct&&ft==="slice"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=et/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr)),kt==="xMid"&&(ut<ct&&ft==="meet"||ut>ct&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))/2*this.renderConfig.dpr:kt==="xMax"&&(ut<ct&&ft==="meet"||ut>ct&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Tt==="YMid"&&(ut>ct&&ft==="meet"||ut<ct&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))/2*this.renderConfig.dpr:Tt==="YMax"&&(ut>ct&&ft==="meet"||ut<ct&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var it,g=this.layers?this.layers.length:0;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(it,g){if(!(this.renderedFrame===it&&this.renderConfig.clearCanvas===!0&&!g||this.destroyed||it===-1)){this.renderedFrame=it,this.globalData.frameNum=it-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||g,this.globalData.projectInterface.currentFrame=it;var et,ot=this.layers.length;for(this.completeLayers||this.checkLayers(it),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].prepareFrame(it-this.layers[et].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){var et=this.createItem(this.layers[it],this,this.globalData);g[it]=et,et.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var it,g=15;for(it=0;it<g;it+=1){var et=new CanvasContext;this.stack[it]=et}this._length=g,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var it=this._length*2,g=0;for(g=this._length;g<it;g+=1)this.stack[g]=new CanvasContext;this._length=it},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(it){this.cArrPos-=1;var g=this.stack[this.cArrPos],et=g.transform,ot,ct=this.cTr.props;for(ot=0;ot<16;ot+=1)ct[ot]=et[ot];if(it){this.nativeContext.restore();var ut=this.stack[this.cArrPos+1];this.appliedFillStyle=ut.fillStyle,this.appliedStrokeStyle=ut.strokeStyle,this.appliedLineWidth=ut.lineWidth,this.appliedLineCap=ut.lineCap,this.appliedLineJoin=ut.lineJoin,this.appliedMiterLimit=ut.miterLimit}this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13]),(it||g.opacity!==-1&&this.currentOpacity!==g.opacity)&&(this.nativeContext.globalAlpha=g.opacity,this.currentOpacity=g.opacity),this.currentFillStyle=g.fillStyle,this.currentStrokeStyle=g.strokeStyle,this.currentLineWidth=g.lineWidth,this.currentLineCap=g.lineCap,this.currentLineJoin=g.lineJoin,this.currentMiterLimit=g.miterLimit},CVContextData.prototype.save=function(it){it&&this.nativeContext.save();var g=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var et=this.stack[this.cArrPos],ot;for(ot=0;ot<16;ot+=1)et.transform[ot]=g[ot];this.cArrPos+=1;var ct=this.stack[this.cArrPos];ct.opacity=et.opacity,ct.fillStyle=et.fillStyle,ct.strokeStyle=et.strokeStyle,ct.lineWidth=et.lineWidth,ct.lineCap=et.lineCap,ct.lineJoin=et.lineJoin,ct.miterLimit=et.miterLimit},CVContextData.prototype.setOpacity=function(it){this.stack[this.cArrPos].opacity=it},CVContextData.prototype.setContext=function(it){this.nativeContext=it},CVContextData.prototype.fillStyle=function(it){this.stack[this.cArrPos].fillStyle!==it&&(this.currentFillStyle=it,this.stack[this.cArrPos].fillStyle=it)},CVContextData.prototype.strokeStyle=function(it){this.stack[this.cArrPos].strokeStyle!==it&&(this.currentStrokeStyle=it,this.stack[this.cArrPos].strokeStyle=it)},CVContextData.prototype.lineWidth=function(it){this.stack[this.cArrPos].lineWidth!==it&&(this.currentLineWidth=it,this.stack[this.cArrPos].lineWidth=it)},CVContextData.prototype.lineCap=function(it){this.stack[this.cArrPos].lineCap!==it&&(this.currentLineCap=it,this.stack[this.cArrPos].lineCap=it)},CVContextData.prototype.lineJoin=function(it){this.stack[this.cArrPos].lineJoin!==it&&(this.currentLineJoin=it,this.stack[this.cArrPos].lineJoin=it)},CVContextData.prototype.miterLimit=function(it){this.stack[this.cArrPos].miterLimit!==it&&(this.currentMiterLimit=it,this.stack[this.cArrPos].miterLimit=it)},CVContextData.prototype.transform=function(it){this.transformMat.cloneFromProps(it);var g=this.cTr;this.transformMat.multiply(g),g.cloneFromProps(this.transformMat.props);var et=g.props;this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13])},CVContextData.prototype.opacity=function(it){var g=this.stack[this.cArrPos].opacity;g*=it<0?0:it,this.stack[this.cArrPos].opacity!==g&&(this.currentOpacity!==it&&(this.nativeContext.globalAlpha=it,this.currentOpacity=it),this.stack[this.cArrPos].opacity=g)},CVContextData.prototype.fill=function(it){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(it)},CVContextData.prototype.fillRect=function(it,g,et,ot){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(it,g,et,ot)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(it,g,et){this.completeLayers=!1,this.layers=it.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var it=this.canvasContext;it.beginPath(),it.moveTo(0,0),it.lineTo(this.data.w,0),it.lineTo(this.data.w,this.data.h),it.lineTo(0,this.data.h),it.lineTo(0,0),it.clip();var g,et=this.layers.length;for(g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()},CVCompElement.prototype.destroy=function(){var it,g=this.layers.length;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function CanvasRenderer(it,g){this.animationItem=it,this.renderConfig={clearCanvas:g&&g.clearCanvas!==void 0?g.clearCanvas:!0,context:g&&g.context||null,progressiveLoad:g&&g.progressiveLoad||!1,preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",className:g&&g.className||"",id:g&&g.id||"",runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.renderConfig.dpr=g&&g.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=g&&g.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var g=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var et=this.finalTransform.mat.toCSS();g.transform=et,g.webkitTransform=et}this.finalTransform._opMdf&&(g.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var it;this.data.hasMask?(it=createNS("rect"),it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(it=createTag("div"),it.style.width=this.data.sw+"px",it.style.height=this.data.sh+"px",it.style.backgroundColor=this.data.sc),this.layerElement.appendChild(it)};function HShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(it,g,et),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var it;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),it=this.svgElement;else{it=createNS("svg");var g=this.comp.data?this.comp.data:this.globalData.compSize;it.setAttribute("width",g.w),it.setAttribute("height",g.h),it.appendChild(this.shapesContainer),this.layerElement.appendChild(it)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=it},HShapeElement.prototype.getTransformedPoint=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g=it[et].mProps.v.applyToPointArray(g[0],g[1],0);return g},HShapeElement.prototype.calculateShapeBoundingBox=function(it,g){var et=it.sh.v,ot=it.transformers,ct,ut=et._length,dt,ft,St,kt;if(!(ut<=1)){for(ct=0;ct<ut-1;ct+=1)dt=this.getTransformedPoint(ot,et.v[ct]),ft=this.getTransformedPoint(ot,et.o[ct]),St=this.getTransformedPoint(ot,et.i[ct+1]),kt=this.getTransformedPoint(ot,et.v[ct+1]),this.checkBounds(dt,ft,St,kt,g);et.c&&(dt=this.getTransformedPoint(ot,et.v[ct]),ft=this.getTransformedPoint(ot,et.o[ct]),St=this.getTransformedPoint(ot,et.i[0]),kt=this.getTransformedPoint(ot,et.v[0]),this.checkBounds(dt,ft,St,kt,g))}},HShapeElement.prototype.checkBounds=function(it,g,et,ot,ct){this.getBoundsOfCurve(it,g,et,ot);var ut=this.shapeBoundingBox;ct.x=bmMin(ut.left,ct.x),ct.xMax=bmMax(ut.right,ct.xMax),ct.y=bmMin(ut.top,ct.y),ct.yMax=bmMax(ut.bottom,ct.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(it,g,et,ot){for(var ct=[[it[0],ot[0]],[it[1],ot[1]]],ut,dt,ft,St,kt,Tt,Rt,jt=0;jt<2;++jt)dt=6*it[jt]-12*g[jt]+6*et[jt],ut=-3*it[jt]+9*g[jt]-9*et[jt]+3*ot[jt],ft=3*g[jt]-3*it[jt],dt|=0,ut|=0,ft|=0,ut===0&&dt===0||(ut===0?(St=-ft/dt,St>0&&St<1&&ct[jt].push(this.calculateF(St,it,g,et,ot,jt))):(kt=dt*dt-4*ft*ut,kt>=0&&(Tt=(-dt+bmSqrt(kt))/(2*ut),Tt>0&&Tt<1&&ct[jt].push(this.calculateF(Tt,it,g,et,ot,jt)),Rt=(-dt-bmSqrt(kt))/(2*ut),Rt>0&&Rt<1&&ct[jt].push(this.calculateF(Rt,it,g,et,ot,jt)))));this.shapeBoundingBox.left=bmMin.apply(null,ct[0]),this.shapeBoundingBox.top=bmMin.apply(null,ct[1]),this.shapeBoundingBox.right=bmMax.apply(null,ct[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ct[1])},HShapeElement.prototype.calculateF=function(it,g,et,ot,ct,ut){return bmPow(1-it,3)*g[ut]+3*bmPow(1-it,2)*it*et[ut]+3*(1-it)*bmPow(it,2)*ot[ut]+bmPow(it,3)*ct[ut]},HShapeElement.prototype.calculateBoundingBox=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]&&it[et].sh?this.calculateShapeBoundingBox(it[et],g):it[et]&&it[et].it?this.calculateBoundingBox(it[et].it,g):it[et]&&it[et].style&&it[et].w&&this.expandStrokeBoundingBox(it[et].w,g)},HShapeElement.prototype.expandStrokeBoundingBox=function(it,g){var et=0;if(it.keyframes){for(var ot=0;ot<it.keyframes.length;ot+=1){var ct=it.keyframes[ot].s;ct>et&&(et=ct)}et*=it.mult}else et=it.v*it.mult;g.x-=et,g.xMax+=et,g.y-=et,g.yMax+=et},HShapeElement.prototype.currentBoxContains=function(it){return this.currentBBox.x<=it.x&&this.currentBBox.y<=it.y&&this.currentBBox.width+this.currentBBox.x>=it.x+it.width&&this.currentBBox.height+this.currentBBox.y>=it.y+it.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var it=this.tempBoundingBox,g=999999;if(it.x=g,it.xMax=-g,it.y=g,it.yMax=-g,this.calculateBoundingBox(this.itemsData,it),it.width=it.xMax<it.x?0:it.xMax-it.x,it.height=it.yMax<it.y?0:it.yMax-it.y,this.currentBoxContains(it))return;var et=!1;if(this.currentBBox.w!==it.width&&(this.currentBBox.w=it.width,this.shapeCont.setAttribute("width",it.width),et=!0),this.currentBBox.h!==it.height&&(this.currentBBox.h=it.height,this.shapeCont.setAttribute("height",it.height),et=!0),et||this.currentBBox.x!==it.x||this.currentBBox.y!==it.y){this.currentBBox.w=it.width,this.currentBBox.h=it.height,this.currentBBox.x=it.x,this.currentBBox.y=it.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var ot=this.shapeCont.style,ct="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ot.transform=ct,ot.webkitTransform=ct}}};function HTextElement(it,g,et){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var it=createNS("g");this.maskedElement.appendChild(it),this.innerElem=it}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=this.innerElem.style,et=it.fc?this.buildColor(it.fc):"rgba(0,0,0,0)";g.fill=et,g.color=et,it.sc&&(g.stroke=this.buildColor(it.sc),g.strokeWidth=it.sw+"px");var ot=this.globalData.fontManager.getFontByName(it.f);if(!this.globalData.fontManager.chars)if(g.fontSize=it.finalSize+"px",g.lineHeight=it.finalSize+"px",ot.fClass)this.innerElem.className=ot.fClass;else{g.fontFamily=ot.fFamily;var ct=it.fWeight,ut=it.fStyle;g.fontStyle=ut,g.fontWeight=ct}var dt,ft,St=it.l;ft=St.length;var kt,Tt,Rt,jt=this.mHelper,$t,Ft="",Ht=0;for(dt=0;dt<ft;dt+=1){if(this.globalData.fontManager.chars?(this.textPaths[Ht]?kt=this.textPaths[Ht]:(kt=createNS("path"),kt.setAttribute("stroke-linecap",lineCapEnum[1]),kt.setAttribute("stroke-linejoin",lineJoinEnum[2]),kt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[Ht]?(Tt=this.textSpans[Ht],Rt=Tt.children[0]):(Tt=createTag("div"),Tt.style.lineHeight=0,Rt=createNS("svg"),Rt.appendChild(kt),styleDiv(Tt)))):this.isMasked?kt=this.textPaths[Ht]?this.textPaths[Ht]:createNS("text"):this.textSpans[Ht]?(Tt=this.textSpans[Ht],kt=this.textPaths[Ht]):(Tt=createTag("span"),styleDiv(Tt),kt=createTag("span"),styleDiv(kt),Tt.appendChild(kt)),this.globalData.fontManager.chars){var Kt=this.globalData.fontManager.getCharData(it.finalText[dt],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),Bt;if(Kt?Bt=Kt.data:Bt=null,jt.reset(),Bt&&Bt.shapes&&Bt.shapes.length&&($t=Bt.shapes[0].it,jt.scale(it.finalSize/100,it.finalSize/100),Ft=this.createPathShape(jt,$t),kt.setAttribute("d",Ft)),this.isMasked)this.innerElem.appendChild(kt);else{if(this.innerElem.appendChild(Tt),Bt&&Bt.shapes){document.body.appendChild(Rt);var Ut=Rt.getBBox();Rt.setAttribute("width",Ut.width+2),Rt.setAttribute("height",Ut.height+2),Rt.setAttribute("viewBox",Ut.x-1+" "+(Ut.y-1)+" "+(Ut.width+2)+" "+(Ut.height+2));var Yt=Rt.style,Jt="translate("+(Ut.x-1)+"px,"+(Ut.y-1)+"px)";Yt.transform=Jt,Yt.webkitTransform=Jt,St[dt].yOffset=Ut.y-1}else Rt.setAttribute("width",1),Rt.setAttribute("height",1);Tt.appendChild(Rt)}}else if(kt.textContent=St[dt].val,kt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(kt);else{this.innerElem.appendChild(Tt);var Zt=kt.style,en="translate3d(0,"+-it.finalSize/1.2+"px,0)";Zt.transform=en,Zt.webkitTransform=en}this.isMasked?this.textSpans[Ht]=kt:this.textSpans[Ht]=Tt,this.textSpans[Ht].style.display="block",this.textPaths[Ht]=kt,Ht+=1}for(;Ht<this.textSpans.length;)this.textSpans[Ht].style.display="none",Ht+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var it;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),it=this.svgElement.style;var g="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";it.transform=g,it.webkitTransform=g}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var et,ot,ct=0,ut=this.textAnimator.renderedLetters,dt=this.textProperty.currentData.l;ot=dt.length;var ft,St,kt;for(et=0;et<ot;et+=1)dt[et].n?ct+=1:(St=this.textSpans[et],kt=this.textPaths[et],ft=ut[ct],ct+=1,ft._mdf.m&&(this.isMasked?St.setAttribute("transform",ft.m):(St.style.webkitTransform=ft.m,St.style.transform=ft.m)),St.style.opacity=ft.o,ft.sw&&ft._mdf.sw&&kt.setAttribute("stroke-width",ft.sw),ft.sc&&ft._mdf.sc&&kt.setAttribute("stroke",ft.sc),ft.fc&&ft._mdf.fc&&(kt.setAttribute("fill",ft.fc),kt.style.color=ft.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Tt=this.innerElem.getBBox();this.currentBBox.w!==Tt.width&&(this.currentBBox.w=Tt.width,this.svgElement.setAttribute("width",Tt.width)),this.currentBBox.h!==Tt.height&&(this.currentBBox.h=Tt.height,this.svgElement.setAttribute("height",Tt.height));var Rt=1;if(this.currentBBox.w!==Tt.width+Rt*2||this.currentBBox.h!==Tt.height+Rt*2||this.currentBBox.x!==Tt.x-Rt||this.currentBBox.y!==Tt.y-Rt){this.currentBBox.w=Tt.width+Rt*2,this.currentBBox.h=Tt.height+Rt*2,this.currentBBox.x=Tt.x-Rt,this.currentBBox.y=Tt.y-Rt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),it=this.svgElement.style;var jt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";it.transform=jt,it.webkitTransform=jt}}}};function HCameraElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initHierarchy();var ot=PropertyFactory.getProp;if(this.pe=ot(this,it.pe,0,0,this),it.ks.p.s?(this.px=ot(this,it.ks.p.x,1,0,this),this.py=ot(this,it.ks.p.y,1,0,this),this.pz=ot(this,it.ks.p.z,1,0,this)):this.p=ot(this,it.ks.p,1,0,this),it.ks.a&&(this.a=ot(this,it.ks.a,1,0,this)),it.ks.or.k.length&&it.ks.or.k[0].to){var ct,ut=it.ks.or.k.length;for(ct=0;ct<ut;ct+=1)it.ks.or.k[ct].to=null,it.ks.or.k[ct].ti=null}this.or=ot(this,it.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=ot(this,it.ks.rx,0,degToRads,this),this.ry=ot(this,it.ks.ry,0,degToRads,this),this.rz=ot(this,it.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var it,g=this.comp.threeDElements.length,et,ot,ct;for(it=0;it<g;it+=1)if(et=this.comp.threeDElements[it],et.type==="3d"){ot=et.perspectiveElem.style,ct=et.container.style;var ut=this.pe.v+"px",dt="0px 0px 0px",ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ot.perspective=ut,ot.webkitPerspective=ut,ct.transformOrigin=dt,ct.mozTransformOrigin=dt,ct.webkitTransformOrigin=dt,ot.transform=ft,ot.webkitTransform=ft}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var it=this._isFirstFrame,g,et;if(this.hierarchy)for(et=this.hierarchy.length,g=0;g<et;g+=1)it=this.hierarchy[g].finalTransform.mProp._mdf||it;if(it||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(et=this.hierarchy.length-1,g=et;g>=0;g-=1){var ot=this.hierarchy[g].finalTransform.mProp;this.mat.translate(-ot.p.v[0],-ot.p.v[1],ot.p.v[2]),this.mat.rotateX(-ot.or.v[0]).rotateY(-ot.or.v[1]).rotateZ(ot.or.v[2]),this.mat.rotateX(-ot.rx.v).rotateY(-ot.ry.v).rotateZ(ot.rz.v),this.mat.scale(1/ot.s.v[0],1/ot.s.v[1],1/ot.s.v[2]),this.mat.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var ct;this.p?ct=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:ct=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ut=Math.sqrt(Math.pow(ct[0],2)+Math.pow(ct[1],2)+Math.pow(ct[2],2)),dt=[ct[0]/ut,ct[1]/ut,ct[2]/ut],ft=Math.sqrt(dt[2]*dt[2]+dt[0]*dt[0]),St=Math.atan2(dt[1],ft),kt=Math.atan2(dt[0],-dt[2]);this.mat.rotateY(kt).rotateX(-St)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Tt=!this._prevMat.equals(this.mat);if((Tt||this.pe._mdf)&&this.comp.threeDElements){et=this.comp.threeDElements.length;var Rt,jt,$t;for(g=0;g<et;g+=1)if(Rt=this.comp.threeDElements[g],Rt.type==="3d"){if(Tt){var Ft=this.mat.toCSS();$t=Rt.container.style,$t.transform=Ft,$t.webkitTransform=Ft}this.pe._mdf&&(jt=Rt.perspectiveElem.style,jt.perspective=this.pe.v+"px",jt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData),g=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(g),g.crossOrigin="anonymous",g.src=it,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){var ot=this.layers[g];if(!ot.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(et,g);else{for(var ct=0,ut,dt,ft;ct<g;)this.elements[ct]&&this.elements[ct]!==!0&&this.elements[ct].getBaseElement&&(dt=this.elements[ct],ft=this.layers[ct].ddd?this.getThreeDContainerByPos(ct):dt.getBaseElement(),ut=ft||ut),ct+=1;ut?(!ot.ddd||!this.supports3d)&&this.layerElement.insertBefore(et,ut):(!ot.ddd||!this.supports3d)&&this.layerElement.appendChild(et)}else this.addTo3dContainer(et,g)}},HybridRendererBase.prototype.createShape=function(it){return this.supports3d?new HShapeElement(it,this.globalData,this):new SVGShapeElement(it,this.globalData,this)},HybridRendererBase.prototype.createText=function(it){return this.supports3d?new HTextElement(it,this.globalData,this):new SVGTextLottieElement(it,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(it){return this.camera=new HCameraElement(it,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(it){return this.supports3d?new HImageElement(it,this.globalData,this):new IImageElement(it,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(it){return this.supports3d?new HSolidElement(it,this.globalData,this):new ISolidElement(it,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(it){for(var g=0,et=this.threeDElements.length;g<et;){if(this.threeDElements[g].startPos<=it&&this.threeDElements[g].endPos>=it)return this.threeDElements[g].perspectiveElem;g+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(it,g){var et=createTag("div"),ot,ct;styleDiv(et);var ut=createTag("div");if(styleDiv(ut),g==="3d"){ot=et.style,ot.width=this.globalData.compSize.w+"px",ot.height=this.globalData.compSize.h+"px";var dt="50% 50%";ot.webkitTransformOrigin=dt,ot.mozTransformOrigin=dt,ot.transformOrigin=dt,ct=ut.style;var ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ct.transform=ft,ct.webkitTransform=ft}et.appendChild(ut);var St={container:ut,perspectiveElem:et,startPos:it,endPos:it,type:g};return this.threeDElements.push(St),St},HybridRendererBase.prototype.build3dContainers=function(){var it,g=this.layers.length,et,ot="";for(it=0;it<g;it+=1)this.layers[it].ddd&&this.layers[it].ty!==3?(ot!=="3d"&&(ot="3d",et=this.createThreeDContainer(it,"3d")),et.endPos=Math.max(et.endPos,it)):(ot!=="2d"&&(ot="2d",et=this.createThreeDContainer(it,"2d")),et.endPos=Math.max(et.endPos,it));for(g=this.threeDElements.length,it=g-1;it>=0;it-=1)this.resizerElem.appendChild(this.threeDElements[it].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(it,g){for(var et=0,ot=this.threeDElements.length;et<ot;){if(g<=this.threeDElements[et].endPos){for(var ct=this.threeDElements[et].startPos,ut;ct<g;)this.elements[ct]&&this.elements[ct].getBaseElement&&(ut=this.elements[ct].getBaseElement()),ct+=1;ut?this.threeDElements[et].container.insertBefore(it,ut):this.threeDElements[et].container.appendChild(it);break}et+=1}},HybridRendererBase.prototype.configAnimation=function(it){var g=createTag("div"),et=this.animationItem.wrapper,ot=g.style;ot.width=it.w+"px",ot.height=it.h+"px",this.resizerElem=g,styleDiv(g),ot.transformStyle="flat",ot.mozTransformStyle="flat",ot.webkitTransformStyle="flat",this.renderConfig.className&&g.setAttribute("class",this.renderConfig.className),et.appendChild(g),ot.overflow="hidden";var ct=createNS("svg");ct.setAttribute("width","1"),ct.setAttribute("height","1"),styleDiv(ct),this.resizerElem.appendChild(ct);var ut=createNS("defs");ct.appendChild(ut),this.data=it,this.setupGlobalData(it,ct),this.globalData.defs=ut,this.layers=it.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var it=this.animationItem.wrapper.offsetWidth,g=this.animationItem.wrapper.offsetHeight,et=it/g,ot=this.globalData.compSize.w/this.globalData.compSize.h,ct,ut,dt,ft;ot>et?(ct=it/this.globalData.compSize.w,ut=it/this.globalData.compSize.w,dt=0,ft=(g-this.globalData.compSize.h*(it/this.globalData.compSize.w))/2):(ct=g/this.globalData.compSize.h,ut=g/this.globalData.compSize.h,dt=(it-this.globalData.compSize.w*(g/this.globalData.compSize.h))/2,ft=0);var St=this.resizerElem.style;St.webkitTransform="matrix3d("+ct+",0,0,0,0,"+ut+",0,0,0,0,1,0,"+dt+","+ft+",0,1)",St.transform=St.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var it=this.globalData.compSize.w,g=this.globalData.compSize.h,et,ot=this.threeDElements.length;for(et=0;et<ot;et+=1){var ct=this.threeDElements[et].perspectiveElem.style;ct.webkitPerspective=Math.sqrt(Math.pow(it,2)+Math.pow(g,2))+"px",ct.perspective=ct.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(it){var g,et=it.length,ot=createTag("div");for(g=0;g<et;g+=1)if(it[g].xt){var ct=this.createComp(it[g],ot,this.globalData.comp,null);ct.initExpressions(),this.globalData.projectInterface.registerComposition(ct)}};function HCompElement(it,g,et){this.layers=it.layers,this.supports3d=!it.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(it,g){for(var et=0,ot;et<g;)this.elements[et]&&this.elements[et].getBaseElement&&(ot=this.elements[et].getBaseElement()),et+=1;ot?this.layerElement.insertBefore(it,ot):this.layerElement.appendChild(it)},HCompElement.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};function HybridRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"},runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};var CompExpressionInterface=function(){return function(it){function g(et){for(var ot=0,ct=it.layers.length;ot<ct;){if(it.layers[ot].nm===et||it.layers[ot].ind===et)return it.elements[ot].layerInterface;ot+=1}return null}return Object.defineProperty(g,"_name",{value:it.data.nm}),g.layer=g,g.pixelAspect=1,g.height=it.data.h||it.globalData.compSize.h,g.width=it.data.w||it.globalData.compSize.w,g.pixelAspect=1,g.frameDuration=1/it.globalData.frameRate,g.displayStartTime=0,g.numLayers=it.layers.length,g}}();function _typeof$2(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(et){return typeof et}:_typeof$2=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$2(it)}function seedRandom(it,g){var et=this,ot=256,ct=6,ut=52,dt="random",ft=g.pow(ot,ct),St=g.pow(2,ut),kt=St*2,Tt=ot-1,Rt;function jt(Yt,Jt,Zt){var en=[];Jt=Jt===!0?{entropy:!0}:Jt||{};var tn=Kt(Ht(Jt.entropy?[Yt,Ut(it)]:Yt===null?Bt():Yt,3),en),nn=new $t(en),ln=function(){for(var sn=nn.g(ct),dn=ft,mn=0;sn<St;)sn=(sn+mn)*ot,dn*=ot,mn=nn.g(1);for(;sn>=kt;)sn/=2,dn/=2,mn>>>=1;return(sn+mn)/dn};return ln.int32=function(){return nn.g(4)|0},ln.quick=function(){return nn.g(4)/4294967296},ln.double=ln,Kt(Ut(nn.S),it),(Jt.pass||Zt||function(an,sn,dn,mn){return mn&&(mn.S&&Ft(mn,nn),an.state=function(){return Ft(nn,{})}),dn?(g[dt]=an,sn):an})(ln,tn,"global"in Jt?Jt.global:this==g,Jt.state)}g["seed"+dt]=jt;function $t(Yt){var Jt,Zt=Yt.length,en=this,tn=0,nn=en.i=en.j=0,ln=en.S=[];for(Zt||(Yt=[Zt++]);tn<ot;)ln[tn]=tn++;for(tn=0;tn<ot;tn++)ln[tn]=ln[nn=Tt&nn+Yt[tn%Zt]+(Jt=ln[tn])],ln[nn]=Jt;en.g=function(an){for(var sn,dn=0,mn=en.i,yn=en.j,vn=en.S;an--;)sn=vn[mn=Tt&mn+1],dn=dn*ot+vn[Tt&(vn[mn]=vn[yn=Tt&yn+sn])+(vn[yn]=sn)];return en.i=mn,en.j=yn,dn}}function Ft(Yt,Jt){return Jt.i=Yt.i,Jt.j=Yt.j,Jt.S=Yt.S.slice(),Jt}function Ht(Yt,Jt){var Zt=[],en=_typeof$2(Yt),tn;if(Jt&&en=="object")for(tn in Yt)try{Zt.push(Ht(Yt[tn],Jt-1))}catch{}return Zt.length?Zt:en=="string"?Yt:Yt+"\0"}function Kt(Yt,Jt){for(var Zt=Yt+"",en,tn=0;tn<Zt.length;)Jt[Tt&tn]=Tt&(en^=Jt[Tt&tn]*19)+Zt.charCodeAt(tn++);return Ut(Jt)}function Bt(){try{var Yt=new Uint8Array(ot);return(et.crypto||et.msCrypto).getRandomValues(Yt),Ut(Yt)}catch{var Jt=et.navigator,Zt=Jt&&Jt.plugins;return[+new Date,et,Zt,et.screen,Ut(it)]}}function Ut(Yt){return String.fromCharCode.apply(0,Yt)}Kt(g.random(),it)}function initialize$2(it){seedRandom([],it)}var propTypes={SHAPE:"shape"};function _typeof$1(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(et){return typeof et}:_typeof$1=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$1(it)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(it){return it.constructor===Array||it.constructor===Float32Array}function isNumerable(it,g){return it==="number"||g instanceof Number||it==="boolean"||it==="string"}function $bm_neg(it){var g=_typeof$1(it);if(g==="number"||it instanceof Number||g==="boolean")return-it;if($bm_isInstanceOfArray(it)){var et,ot=it.length,ct=[];for(et=0;et<ot;et+=1)ct[et]=-it[et];return ct}return it.propType?it.v:-it}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g)||et==="string"||ot==="string")return it+g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]+=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it+g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ct=0,ut=it.length,dt=g.length,ft=[];ct<ut||ct<dt;)(typeof it[ct]=="number"||it[ct]instanceof Number)&&(typeof g[ct]=="number"||g[ct]instanceof Number)?ft[ct]=it[ct]+g[ct]:ft[ct]=g[ct]===void 0?it[ct]:it[ct]||g[ct],ct+=1;return ft}return 0}var add=sum;function sub(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g))return et==="string"&&(it=parseInt(it,10)),ot==="string"&&(g=parseInt(g,10)),it-g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]-=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it-g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ct=0,ut=it.length,dt=g.length,ft=[];ct<ut||ct<dt;)(typeof it[ct]=="number"||it[ct]instanceof Number)&&(typeof g[ct]=="number"||g[ct]instanceof Number)?ft[ct]=it[ct]-g[ct]:ft[ct]=g[ct]===void 0?it[ct]:it[ct]||g[ct],ct+=1;return ft}return 0}function mul(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ct;if(isNumerable(et,it)&&isNumerable(ot,g))return it*g;var ut,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it[ut]*g;return ct}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it*g[ut];return ct}return 0}function div(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ct;if(isNumerable(et,it)&&isNumerable(ot,g))return it/g;var ut,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it[ut]/g;return ct}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ct=createTypedArray("float32",dt),ut=0;ut<dt;ut+=1)ct[ut]=it/g[ut];return ct}return 0}function mod(it,g){return typeof it=="string"&&(it=parseInt(it,10)),typeof g=="string"&&(g=parseInt(g,10)),it%g}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(it,g,et){if(g>et){var ot=et;et=g,g=ot}return Math.min(Math.max(it,g),et)}function radiansToDegrees(it){return it/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(it){return it*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(it,g){if(typeof it=="number"||it instanceof Number)return g=g||0,Math.abs(it-g);g||(g=helperLengthArray);var et,ot=Math.min(it.length,g.length),ct=0;for(et=0;et<ot;et+=1)ct+=Math.pow(g[et]-it[et],2);return Math.sqrt(ct)}function normalize(it){return div(it,length(it))}function rgbToHsl(it){var g=it[0],et=it[1],ot=it[2],ct=Math.max(g,et,ot),ut=Math.min(g,et,ot),dt,ft,St=(ct+ut)/2;if(ct===ut)dt=0,ft=0;else{var kt=ct-ut;switch(ft=St>.5?kt/(2-ct-ut):kt/(ct+ut),ct){case g:dt=(et-ot)/kt+(et<ot?6:0);break;case et:dt=(ot-g)/kt+2;break;case ot:dt=(g-et)/kt+4;break}dt/=6}return[dt,ft,St,it[3]]}function hue2rgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslToRgb(it){var g=it[0],et=it[1],ot=it[2],ct,ut,dt;if(et===0)ct=ot,dt=ot,ut=ot;else{var ft=ot<.5?ot*(1+et):ot+et-ot*et,St=2*ot-ft;ct=hue2rgb(St,ft,g+1/3),ut=hue2rgb(St,ft,g),dt=hue2rgb(St,ft,g-1/3)}return[ct,ut,dt,it[3]]}function linear(it,g,et,ot,ct){if((ot===void 0||ct===void 0)&&(ot=g,ct=et,g=0,et=1),et<g){var ut=et;et=g,g=ut}if(it<=g)return ot;if(it>=et)return ct;var dt=et===g?0:(it-g)/(et-g);if(!ot.length)return ot+(ct-ot)*dt;var ft,St=ot.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=ot[ft]+(ct[ft]-ot[ft])*dt;return kt}function random(it,g){if(g===void 0&&(it===void 0?(it=0,g=1):(g=it,it=void 0)),g.length){var et,ot=g.length;it||(it=createTypedArray("float32",ot));var ct=createTypedArray("float32",ot),ut=BMMath.random();for(et=0;et<ot;et+=1)ct[et]=it[et]+ut*(g[et]-it[et]);return ct}it===void 0&&(it=0);var dt=BMMath.random();return it+dt*(g-it)}function createPath(it,g,et,ot){var ct,ut=it.length,dt=shapePool.newElement();dt.setPathData(!!ot,ut);var ft=[0,0],St,kt;for(ct=0;ct<ut;ct+=1)St=g&&g[ct]?g[ct]:ft,kt=et&&et[ct]?et[ct]:ft,dt.setTripleAt(it[ct][0],it[ct][1],kt[0]+it[ct][0],kt[1]+it[ct][1],St[0]+it[ct][0],St[1]+it[ct][1],ct,!0);return dt}function initiateExpression(elem,data,property){function noOp(it){return it}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function it(g,et){var ot,ct,ut=this.pv.length?this.pv.length:1,dt=createTypedArray("float32",ut);g=5;var ft=Math.floor(time*g);for(ot=0,ct=0;ot<ft;){for(ct=0;ct<ut;ct+=1)dt[ct]+=-et+et*2*BMMath.random();ot+=1}var St=time*g,kt=St-Math.floor(St),Tt=createTypedArray("float32",ut);if(ut>1){for(ct=0;ct<ut;ct+=1)Tt[ct]=this.pv[ct]+dt[ct]+(-et+et*2*BMMath.random())*kt;return Tt}return this.pv+dt[0]+(-et+et*2*BMMath.random())*kt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(it,g){return loopIn(it,g,!0)}function loopOutDuration(it,g){return loopOut(it,g,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(it,g){var et=[g[0]-it[0],g[1]-it[1],g[2]-it[2]],ot=Math.atan2(et[0],Math.sqrt(et[1]*et[1]+et[2]*et[2]))/degToRads,ct=-Math.atan2(et[1],et[2])/degToRads;return[ct,ot,0]}function easeOut(it,g,et,ot,ct){return applyEase(easeOutBez,it,g,et,ot,ct)}function easeIn(it,g,et,ot,ct){return applyEase(easeInBez,it,g,et,ot,ct)}function ease(it,g,et,ot,ct){return applyEase(easeInOutBez,it,g,et,ot,ct)}function applyEase(it,g,et,ot,ct,ut){ct===void 0?(ct=et,ut=ot):g=(g-et)/(ot-et),g>1?g=1:g<0&&(g=0);var dt=it(g);if($bm_isInstanceOfArray(ct)){var ft,St=ct.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=(ut[ft]-ct[ft])*dt+ct[ft];return kt}return(ut-ct)*dt+ct}function nearestKey(it){var g,et=data.k.length,ot,ct;if(!data.k.length||typeof data.k[0]=="number")ot=0,ct=0;else if(ot=-1,it*=elem.comp.globalData.frameRate,it<data.k[0].t)ot=1,ct=data.k[0].t;else{for(g=0;g<et-1;g+=1)if(it===data.k[g].t){ot=g+1,ct=data.k[g].t;break}else if(it>data.k[g].t&&it<data.k[g+1].t){it-data.k[g].t>data.k[g+1].t-it?(ot=g+2,ct=data.k[g+1].t):(ot=g+1,ct=data.k[g].t);break}ot===-1&&(ot=g+1,ct=data.k[g].t)}var ut={};return ut.index=ot,ut.time=ct/elem.comp.globalData.frameRate,ut}function key(it){var g,et,ot;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+it);it-=1,g={time:data.k[it].t/elem.comp.globalData.frameRate,value:[]};var ct=Object.prototype.hasOwnProperty.call(data.k[it],"s")?data.k[it].s:data.k[it-1].e;for(ot=ct.length,et=0;et<ot;et+=1)g[et]=ct[et],g.value[et]=ct[et];return g}function framesToTime(it,g){return g||(g=elem.comp.globalData.frameRate),it/g}function timeToFrames(it,g){return!it&&it!==0&&(it=time),g||(g=elem.comp.globalData.frameRate),it*g}function seedRandom(it){BMMath.seedrandom(randSeed+it)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(it,g){return typeof value=="string"?g===void 0?value.substring(it):value.substring(it,g):""}function substr(it,g){return typeof value=="string"?g===void 0?value.substr(it):value.substr(it,g):""}function posterizeTime(it){time=it===0?0:Math.floor(time*it)/it,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(it){return value=it,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var it={};it.initExpressions=g,it.resetFrame=ExpressionManager.resetFrame;function g(et){var ot=0,ct=[];function ut(){ot+=1}function dt(){ot-=1,ot===0&&St()}function ft(kt){ct.indexOf(kt)===-1&&ct.push(kt)}function St(){var kt,Tt=ct.length;for(kt=0;kt<Tt;kt+=1)ct[kt].release();ct.length=0}et.renderer.compInterface=CompExpressionInterface(et.renderer),et.renderer.globalData.projectInterface.registerComposition(et.renderer),et.renderer.globalData.pushExpression=ut,et.renderer.globalData.popExpression=dt,et.renderer.globalData.registerExpressionProperty=ft}return it}(),MaskManagerInterface=function(){function it(et,ot){this._mask=et,this._data=ot}Object.defineProperty(it.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(it.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var g=function(ot){var ct=createSizedArray(ot.viewData.length),ut,dt=ot.viewData.length;for(ut=0;ut<dt;ut+=1)ct[ut]=new it(ot.viewData[ut],ot.masksProperties[ut]);var ft=function(kt){for(ut=0;ut<dt;){if(ot.masksProperties[ut].nm===kt)return ct[ut];ut+=1}return null};return ft};return g}(),ExpressionPropertyInterface=function(){var it={pv:0,v:0,mult:1},g={pv:[0,0,0],v:[0,0,0],mult:1};function et(dt,ft,St){Object.defineProperty(dt,"velocity",{get:function(){return ft.getVelocityAtTime(ft.comp.currentFrame)}}),dt.numKeys=ft.keyframes?ft.keyframes.length:0,dt.key=function(kt){if(!dt.numKeys)return 0;var Tt="";"s"in ft.keyframes[kt-1]?Tt=ft.keyframes[kt-1].s:"e"in ft.keyframes[kt-2]?Tt=ft.keyframes[kt-2].e:Tt=ft.keyframes[kt-2].s;var Rt=St==="unidimensional"?new Number(Tt):Object.assign({},Tt);return Rt.time=ft.keyframes[kt-1].t/ft.elem.comp.globalData.frameRate,Rt.value=St==="unidimensional"?Tt[0]:Tt,Rt},dt.valueAtTime=ft.getValueAtTime,dt.speedAtTime=ft.getSpeedAtTime,dt.velocityAtTime=ft.getVelocityAtTime,dt.propertyGroup=ft.propertyGroup}function ot(dt){(!dt||!("pv"in dt))&&(dt=it);var ft=1/dt.mult,St=dt.pv*ft,kt=new Number(St);return kt.value=St,et(kt,dt,"unidimensional"),function(){return dt.k&&dt.getValue(),St=dt.v*ft,kt.value!==St&&(kt=new Number(St),kt.value=St,et(kt,dt,"unidimensional")),kt}}function ct(dt){(!dt||!("pv"in dt))&&(dt=g);var ft=1/dt.mult,St=dt.data&&dt.data.l||dt.pv.length,kt=createTypedArray("float32",St),Tt=createTypedArray("float32",St);return kt.value=Tt,et(kt,dt,"multidimensional"),function(){dt.k&&dt.getValue();for(var Rt=0;Rt<St;Rt+=1)Tt[Rt]=dt.v[Rt]*ft,kt[Rt]=Tt[Rt];return kt}}function ut(){return it}return function(dt){return dt?dt.propType==="unidimensional"?ot(dt):ct(dt):ut}}(),TransformExpressionInterface=function(){return function(it){function g(dt){switch(dt){case"scale":case"Scale":case"ADBE Scale":case 6:return g.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return g.rotation;case"ADBE Rotate X":return g.xRotation;case"ADBE Rotate Y":return g.yRotation;case"position":case"Position":case"ADBE Position":case 2:return g.position;case"ADBE Position_0":return g.xPosition;case"ADBE Position_1":return g.yPosition;case"ADBE Position_2":return g.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return g.anchorPoint;case"opacity":case"Opacity":case 11:return g.opacity;default:return null}}Object.defineProperty(g,"rotation",{get:ExpressionPropertyInterface(it.r||it.rz)}),Object.defineProperty(g,"zRotation",{get:ExpressionPropertyInterface(it.rz||it.r)}),Object.defineProperty(g,"xRotation",{get:ExpressionPropertyInterface(it.rx)}),Object.defineProperty(g,"yRotation",{get:ExpressionPropertyInterface(it.ry)}),Object.defineProperty(g,"scale",{get:ExpressionPropertyInterface(it.s)});var et,ot,ct,ut;return it.p?ut=ExpressionPropertyInterface(it.p):(et=ExpressionPropertyInterface(it.px),ot=ExpressionPropertyInterface(it.py),it.pz&&(ct=ExpressionPropertyInterface(it.pz))),Object.defineProperty(g,"position",{get:function(){return it.p?ut():[et(),ot(),ct?ct():0]}}),Object.defineProperty(g,"xPosition",{get:ExpressionPropertyInterface(it.px)}),Object.defineProperty(g,"yPosition",{get:ExpressionPropertyInterface(it.py)}),Object.defineProperty(g,"zPosition",{get:ExpressionPropertyInterface(it.pz)}),Object.defineProperty(g,"anchorPoint",{get:ExpressionPropertyInterface(it.a)}),Object.defineProperty(g,"opacity",{get:ExpressionPropertyInterface(it.o)}),Object.defineProperty(g,"skew",{get:ExpressionPropertyInterface(it.sk)}),Object.defineProperty(g,"skewAxis",{get:ExpressionPropertyInterface(it.sa)}),Object.defineProperty(g,"orientation",{get:ExpressionPropertyInterface(it.or)}),g}}(),LayerExpressionInterface=function(){function it(kt){var Tt=new Matrix;if(kt!==void 0){var Rt=this._elem.finalTransform.mProp.getValueAtTime(kt);Rt.clone(Tt)}else{var jt=this._elem.finalTransform.mProp;jt.applyToMatrix(Tt)}return Tt}function g(kt,Tt){var Rt=this.getMatrix(Tt);return Rt.props[12]=0,Rt.props[13]=0,Rt.props[14]=0,this.applyPoint(Rt,kt)}function et(kt,Tt){var Rt=this.getMatrix(Tt);return this.applyPoint(Rt,kt)}function ot(kt,Tt){var Rt=this.getMatrix(Tt);return Rt.props[12]=0,Rt.props[13]=0,Rt.props[14]=0,this.invertPoint(Rt,kt)}function ct(kt,Tt){var Rt=this.getMatrix(Tt);return this.invertPoint(Rt,kt)}function ut(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(kt)}return kt.applyToPointArray(Tt[0],Tt[1],Tt[2]||0)}function dt(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(kt)}return kt.inversePoint(Tt)}function ft(kt){var Tt=new Matrix;if(Tt.reset(),this._elem.finalTransform.mProp.applyToMatrix(Tt),this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,jt=this._elem.hierarchy.length;for(Rt=0;Rt<jt;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(Tt);return Tt.inversePoint(kt)}return Tt.inversePoint(kt)}function St(){return[1,1,1,1]}return function(kt){var Tt;function Rt(Ht){$t.mask=new MaskManagerInterface(Ht,kt)}function jt(Ht){$t.effect=Ht}function $t(Ht){switch(Ht){case"ADBE Root Vectors Group":case"Contents":case 2:return $t.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Tt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return $t.effect;case"ADBE Text Properties":return $t.textInterface;default:return null}}$t.getMatrix=it,$t.invertPoint=dt,$t.applyPoint=ut,$t.toWorld=et,$t.toWorldVec=g,$t.fromWorld=ct,$t.fromWorldVec=ot,$t.toComp=et,$t.fromComp=ft,$t.sampleImage=St,$t.sourceRectAtTime=kt.sourceRectAtTime.bind(kt),$t._elem=kt,Tt=TransformExpressionInterface(kt.finalTransform.mProp);var Ft=getDescriptor(Tt,"anchorPoint");return Object.defineProperties($t,{hasParent:{get:function(){return kt.hierarchy.length}},parent:{get:function(){return kt.hierarchy[0].layerInterface}},rotation:getDescriptor(Tt,"rotation"),scale:getDescriptor(Tt,"scale"),position:getDescriptor(Tt,"position"),opacity:getDescriptor(Tt,"opacity"),anchorPoint:Ft,anchor_point:Ft,transform:{get:function(){return Tt}},active:{get:function(){return kt.isInRange}}}),$t.startTime=kt.data.st,$t.index=kt.data.ind,$t.source=kt.data.refId,$t.height=kt.data.ty===0?kt.data.h:100,$t.width=kt.data.ty===0?kt.data.w:100,$t.inPoint=kt.data.ip/kt.comp.globalData.frameRate,$t.outPoint=kt.data.op/kt.comp.globalData.frameRate,$t._name=kt.data.nm,$t.registerMaskInterface=Rt,$t.registerEffectsInterface=jt,$t}}(),propertyGroupFactory=function(){return function(it,g){return function(et){return et=et===void 0?1:et,et<=0?it:g(et-1)}}}(),PropertyInterface=function(){return function(it,g){var et={_name:it};function ot(ct){return ct=ct===void 0?1:ct,ct<=0?et:g(ct-1)}return ot}}(),EffectsExpressionInterface=function(){var it={createEffectsInterface:g};function g(ct,ut){if(ct.effectsManager){var dt=[],ft=ct.data.ef,St,kt=ct.effectsManager.effectElements.length;for(St=0;St<kt;St+=1)dt.push(et(ft[St],ct.effectsManager.effectElements[St],ut,ct));var Tt=ct.data.ef||[],Rt=function($t){for(St=0,kt=Tt.length;St<kt;){if($t===Tt[St].nm||$t===Tt[St].mn||$t===Tt[St].ix)return dt[St];St+=1}return null};return Object.defineProperty(Rt,"numProperties",{get:function(){return Tt.length}}),Rt}return null}function et(ct,ut,dt,ft){function St($t){for(var Ft=ct.ef,Ht=0,Kt=Ft.length;Ht<Kt;){if($t===Ft[Ht].nm||$t===Ft[Ht].mn||$t===Ft[Ht].ix)return Ft[Ht].ty===5?Tt[Ht]:Tt[Ht]();Ht+=1}throw new Error}var kt=propertyGroupFactory(St,dt),Tt=[],Rt,jt=ct.ef.length;for(Rt=0;Rt<jt;Rt+=1)ct.ef[Rt].ty===5?Tt.push(et(ct.ef[Rt],ut.effectElements[Rt],ut.effectElements[Rt].propertyGroup,ft)):Tt.push(ot(ut.effectElements[Rt],ct.ef[Rt].ty,ft,kt));return ct.mn==="ADBE Color Control"&&Object.defineProperty(St,"color",{get:function(){return Tt[0]()}}),Object.defineProperties(St,{numProperties:{get:function(){return ct.np}},_name:{value:ct.nm},propertyGroup:{value:kt}}),St.enabled=ct.en!==0,St.active=St.enabled,St}function ot(ct,ut,dt,ft){var St=ExpressionPropertyInterface(ct.p);function kt(){return ut===10?dt.comp.compInterface(ct.p.v):St()}return ct.p.setGroupProperty&&ct.p.setGroupProperty(PropertyInterface("",ft)),kt}return it}(),ShapePathInterface=function(){return function(g,et,ot){var ct=et.sh;function ut(ft){return ft==="Shape"||ft==="shape"||ft==="Path"||ft==="path"||ft==="ADBE Vector Shape"||ft===2?ut.path:null}var dt=propertyGroupFactory(ut,ot);return ct.setGroupProperty(PropertyInterface("Path",dt)),Object.defineProperties(ut,{path:{get:function(){return ct.k&&ct.getValue(),ct}},shape:{get:function(){return ct.k&&ct.getValue(),ct}},_name:{value:g.nm},ix:{value:g.ix},propertyIndex:{value:g.ix},mn:{value:g.mn},propertyGroup:{value:ot}}),ut}}(),ShapeExpressionInterface=function(){function it(Ft,Ht,Kt){var Bt=[],Ut,Yt=Ft?Ft.length:0;for(Ut=0;Ut<Yt;Ut+=1)Ft[Ut].ty==="gr"?Bt.push(et(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="fl"?Bt.push(ot(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="st"?Bt.push(dt(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="tm"?Bt.push(ft(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="tr"||(Ft[Ut].ty==="el"?Bt.push(kt(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="sr"?Bt.push(Tt(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="sh"?Bt.push(ShapePathInterface(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="rc"?Bt.push(Rt(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="rd"?Bt.push(jt(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="rp"?Bt.push($t(Ft[Ut],Ht[Ut],Kt)):Ft[Ut].ty==="gf"?Bt.push(ct(Ft[Ut],Ht[Ut],Kt)):Bt.push(ut(Ft[Ut],Ht[Ut])));return Bt}function g(Ft,Ht,Kt){var Bt,Ut=function(Zt){for(var en=0,tn=Bt.length;en<tn;){if(Bt[en]._name===Zt||Bt[en].mn===Zt||Bt[en].propertyIndex===Zt||Bt[en].ix===Zt||Bt[en].ind===Zt)return Bt[en];en+=1}return typeof Zt=="number"?Bt[Zt-1]:null};Ut.propertyGroup=propertyGroupFactory(Ut,Kt),Bt=it(Ft.it,Ht.it,Ut.propertyGroup),Ut.numProperties=Bt.length;var Yt=St(Ft.it[Ft.it.length-1],Ht.it[Ht.it.length-1],Ut.propertyGroup);return Ut.transform=Yt,Ut.propertyIndex=Ft.cix,Ut._name=Ft.nm,Ut}function et(Ft,Ht,Kt){var Bt=function(Zt){switch(Zt){case"ADBE Vectors Group":case"Contents":case 2:return Bt.content;default:return Bt.transform}};Bt.propertyGroup=propertyGroupFactory(Bt,Kt);var Ut=g(Ft,Ht,Bt.propertyGroup),Yt=St(Ft.it[Ft.it.length-1],Ht.it[Ht.it.length-1],Bt.propertyGroup);return Bt.content=Ut,Bt.transform=Yt,Object.defineProperty(Bt,"_name",{get:function(){return Ft.nm}}),Bt.numProperties=Ft.np,Bt.propertyIndex=Ft.ix,Bt.nm=Ft.nm,Bt.mn=Ft.mn,Bt}function ot(Ft,Ht,Kt){function Bt(Ut){return Ut==="Color"||Ut==="color"?Bt.color:Ut==="Opacity"||Ut==="opacity"?Bt.opacity:null}return Object.defineProperties(Bt,{color:{get:ExpressionPropertyInterface(Ht.c)},opacity:{get:ExpressionPropertyInterface(Ht.o)},_name:{value:Ft.nm},mn:{value:Ft.mn}}),Ht.c.setGroupProperty(PropertyInterface("Color",Kt)),Ht.o.setGroupProperty(PropertyInterface("Opacity",Kt)),Bt}function ct(Ft,Ht,Kt){function Bt(Ut){return Ut==="Start Point"||Ut==="start point"?Bt.startPoint:Ut==="End Point"||Ut==="end point"?Bt.endPoint:Ut==="Opacity"||Ut==="opacity"?Bt.opacity:null}return Object.defineProperties(Bt,{startPoint:{get:ExpressionPropertyInterface(Ht.s)},endPoint:{get:ExpressionPropertyInterface(Ht.e)},opacity:{get:ExpressionPropertyInterface(Ht.o)},type:{get:function(){return"a"}},_name:{value:Ft.nm},mn:{value:Ft.mn}}),Ht.s.setGroupProperty(PropertyInterface("Start Point",Kt)),Ht.e.setGroupProperty(PropertyInterface("End Point",Kt)),Ht.o.setGroupProperty(PropertyInterface("Opacity",Kt)),Bt}function ut(){function Ft(){return null}return Ft}function dt(Ft,Ht,Kt){var Bt=propertyGroupFactory(tn,Kt),Ut=propertyGroupFactory(en,Bt);function Yt(nn){Object.defineProperty(en,Ft.d[nn].nm,{get:ExpressionPropertyInterface(Ht.d.dataProps[nn].p)})}var Jt,Zt=Ft.d?Ft.d.length:0,en={};for(Jt=0;Jt<Zt;Jt+=1)Yt(Jt),Ht.d.dataProps[Jt].p.setGroupProperty(Ut);function tn(nn){return nn==="Color"||nn==="color"?tn.color:nn==="Opacity"||nn==="opacity"?tn.opacity:nn==="Stroke Width"||nn==="stroke width"?tn.strokeWidth:null}return Object.defineProperties(tn,{color:{get:ExpressionPropertyInterface(Ht.c)},opacity:{get:ExpressionPropertyInterface(Ht.o)},strokeWidth:{get:ExpressionPropertyInterface(Ht.w)},dash:{get:function(){return en}},_name:{value:Ft.nm},mn:{value:Ft.mn}}),Ht.c.setGroupProperty(PropertyInterface("Color",Bt)),Ht.o.setGroupProperty(PropertyInterface("Opacity",Bt)),Ht.w.setGroupProperty(PropertyInterface("Stroke Width",Bt)),tn}function ft(Ft,Ht,Kt){function Bt(Yt){return Yt===Ft.e.ix||Yt==="End"||Yt==="end"?Bt.end:Yt===Ft.s.ix?Bt.start:Yt===Ft.o.ix?Bt.offset:null}var Ut=propertyGroupFactory(Bt,Kt);return Bt.propertyIndex=Ft.ix,Ht.s.setGroupProperty(PropertyInterface("Start",Ut)),Ht.e.setGroupProperty(PropertyInterface("End",Ut)),Ht.o.setGroupProperty(PropertyInterface("Offset",Ut)),Bt.propertyIndex=Ft.ix,Bt.propertyGroup=Kt,Object.defineProperties(Bt,{start:{get:ExpressionPropertyInterface(Ht.s)},end:{get:ExpressionPropertyInterface(Ht.e)},offset:{get:ExpressionPropertyInterface(Ht.o)},_name:{value:Ft.nm}}),Bt.mn=Ft.mn,Bt}function St(Ft,Ht,Kt){function Bt(Yt){return Ft.a.ix===Yt||Yt==="Anchor Point"?Bt.anchorPoint:Ft.o.ix===Yt||Yt==="Opacity"?Bt.opacity:Ft.p.ix===Yt||Yt==="Position"?Bt.position:Ft.r.ix===Yt||Yt==="Rotation"||Yt==="ADBE Vector Rotation"?Bt.rotation:Ft.s.ix===Yt||Yt==="Scale"?Bt.scale:Ft.sk&&Ft.sk.ix===Yt||Yt==="Skew"?Bt.skew:Ft.sa&&Ft.sa.ix===Yt||Yt==="Skew Axis"?Bt.skewAxis:null}var Ut=propertyGroupFactory(Bt,Kt);return Ht.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Ut)),Ht.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Ut)),Ht.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Ut)),Ht.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Ut)),Ht.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Ut)),Ht.transform.mProps.sk&&(Ht.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Ut)),Ht.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Ut))),Ht.transform.op.setGroupProperty(PropertyInterface("Opacity",Ut)),Object.defineProperties(Bt,{opacity:{get:ExpressionPropertyInterface(Ht.transform.mProps.o)},position:{get:ExpressionPropertyInterface(Ht.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(Ht.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(Ht.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(Ht.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(Ht.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(Ht.transform.mProps.sa)},_name:{value:Ft.nm}}),Bt.ty="tr",Bt.mn=Ft.mn,Bt.propertyGroup=Kt,Bt}function kt(Ft,Ht,Kt){function Bt(Jt){return Ft.p.ix===Jt?Bt.position:Ft.s.ix===Jt?Bt.size:null}var Ut=propertyGroupFactory(Bt,Kt);Bt.propertyIndex=Ft.ix;var Yt=Ht.sh.ty==="tm"?Ht.sh.prop:Ht.sh;return Yt.s.setGroupProperty(PropertyInterface("Size",Ut)),Yt.p.setGroupProperty(PropertyInterface("Position",Ut)),Object.defineProperties(Bt,{size:{get:ExpressionPropertyInterface(Yt.s)},position:{get:ExpressionPropertyInterface(Yt.p)},_name:{value:Ft.nm}}),Bt.mn=Ft.mn,Bt}function Tt(Ft,Ht,Kt){function Bt(Jt){return Ft.p.ix===Jt?Bt.position:Ft.r.ix===Jt?Bt.rotation:Ft.pt.ix===Jt?Bt.points:Ft.or.ix===Jt||Jt==="ADBE Vector Star Outer Radius"?Bt.outerRadius:Ft.os.ix===Jt?Bt.outerRoundness:Ft.ir&&(Ft.ir.ix===Jt||Jt==="ADBE Vector Star Inner Radius")?Bt.innerRadius:Ft.is&&Ft.is.ix===Jt?Bt.innerRoundness:null}var Ut=propertyGroupFactory(Bt,Kt),Yt=Ht.sh.ty==="tm"?Ht.sh.prop:Ht.sh;return Bt.propertyIndex=Ft.ix,Yt.or.setGroupProperty(PropertyInterface("Outer Radius",Ut)),Yt.os.setGroupProperty(PropertyInterface("Outer Roundness",Ut)),Yt.pt.setGroupProperty(PropertyInterface("Points",Ut)),Yt.p.setGroupProperty(PropertyInterface("Position",Ut)),Yt.r.setGroupProperty(PropertyInterface("Rotation",Ut)),Ft.ir&&(Yt.ir.setGroupProperty(PropertyInterface("Inner Radius",Ut)),Yt.is.setGroupProperty(PropertyInterface("Inner Roundness",Ut))),Object.defineProperties(Bt,{position:{get:ExpressionPropertyInterface(Yt.p)},rotation:{get:ExpressionPropertyInterface(Yt.r)},points:{get:ExpressionPropertyInterface(Yt.pt)},outerRadius:{get:ExpressionPropertyInterface(Yt.or)},outerRoundness:{get:ExpressionPropertyInterface(Yt.os)},innerRadius:{get:ExpressionPropertyInterface(Yt.ir)},innerRoundness:{get:ExpressionPropertyInterface(Yt.is)},_name:{value:Ft.nm}}),Bt.mn=Ft.mn,Bt}function Rt(Ft,Ht,Kt){function Bt(Jt){return Ft.p.ix===Jt?Bt.position:Ft.r.ix===Jt?Bt.roundness:Ft.s.ix===Jt||Jt==="Size"||Jt==="ADBE Vector Rect Size"?Bt.size:null}var Ut=propertyGroupFactory(Bt,Kt),Yt=Ht.sh.ty==="tm"?Ht.sh.prop:Ht.sh;return Bt.propertyIndex=Ft.ix,Yt.p.setGroupProperty(PropertyInterface("Position",Ut)),Yt.s.setGroupProperty(PropertyInterface("Size",Ut)),Yt.r.setGroupProperty(PropertyInterface("Rotation",Ut)),Object.defineProperties(Bt,{position:{get:ExpressionPropertyInterface(Yt.p)},roundness:{get:ExpressionPropertyInterface(Yt.r)},size:{get:ExpressionPropertyInterface(Yt.s)},_name:{value:Ft.nm}}),Bt.mn=Ft.mn,Bt}function jt(Ft,Ht,Kt){function Bt(Jt){return Ft.r.ix===Jt||Jt==="Round Corners 1"?Bt.radius:null}var Ut=propertyGroupFactory(Bt,Kt),Yt=Ht;return Bt.propertyIndex=Ft.ix,Yt.rd.setGroupProperty(PropertyInterface("Radius",Ut)),Object.defineProperties(Bt,{radius:{get:ExpressionPropertyInterface(Yt.rd)},_name:{value:Ft.nm}}),Bt.mn=Ft.mn,Bt}function $t(Ft,Ht,Kt){function Bt(Jt){return Ft.c.ix===Jt||Jt==="Copies"?Bt.copies:Ft.o.ix===Jt||Jt==="Offset"?Bt.offset:null}var Ut=propertyGroupFactory(Bt,Kt),Yt=Ht;return Bt.propertyIndex=Ft.ix,Yt.c.setGroupProperty(PropertyInterface("Copies",Ut)),Yt.o.setGroupProperty(PropertyInterface("Offset",Ut)),Object.defineProperties(Bt,{copies:{get:ExpressionPropertyInterface(Yt.c)},offset:{get:ExpressionPropertyInterface(Yt.o)},_name:{value:Ft.nm}}),Bt.mn=Ft.mn,Bt}return function(Ft,Ht,Kt){var Bt;function Ut(Jt){if(typeof Jt=="number")return Jt=Jt===void 0?1:Jt,Jt===0?Kt:Bt[Jt-1];for(var Zt=0,en=Bt.length;Zt<en;){if(Bt[Zt]._name===Jt)return Bt[Zt];Zt+=1}return null}function Yt(){return Kt}return Ut.propertyGroup=propertyGroupFactory(Ut,Yt),Bt=it(Ft,Ht,Ut.propertyGroup),Ut.numProperties=Bt.length,Ut._name="Contents",Ut}}(),TextExpressionInterface=function(){return function(it){var g;function et(ot){switch(ot){case"ADBE Text Document":return et.sourceText;default:return null}}return Object.defineProperty(et,"sourceText",{get:function(){it.textProperty.getValue();var ct=it.textProperty.currentData.t;return(!g||ct!==g.value)&&(g=new String(ct),g.value=ct||new String(ct),Object.defineProperty(g,"style",{get:function(){return{fillColor:it.textProperty.currentData.fc}}})),g}}),et}}();function _typeof(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(et){return typeof et}:_typeof=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof(it)}var FootageInterface=function(){var it=function(ot){var ct="",ut=ot.getFootageData();function dt(){return ct="",ut=ot.getFootageData(),ft}function ft(St){if(ut[St])return ct=St,ut=ut[St],_typeof(ut)==="object"?ft:ut;var kt=St.indexOf(ct);if(kt!==-1){var Tt=parseInt(St.substr(kt+ct.length),10);return ut=ut[Tt],_typeof(ut)==="object"?ft:ut}return""}return dt},g=function(ot){function ct(ut){return ut==="Outline"?ct.outlineInterface():null}return ct._name="Outline",ct.outlineInterface=it(ot),ct};return function(et){function ot(ct){return ct==="Data"?ot.dataInterface:null}return ot._name="Data",ot.dataInterface=g(et),ot}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(it){return interfaces[it]||null}var expressionHelpers=function(){function it(dt,ft,St){ft.x&&(St.k=!0,St.x=!0,St.initiateExpression=ExpressionManager.initiateExpression,St.effectsSequence.push(St.initiateExpression(dt,ft,St).bind(St)))}function g(dt){return dt*=this.elem.globalData.frameRate,dt-=this.offsetTime,dt!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<dt?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(dt,this._cachingAtTime),this._cachingAtTime.lastFrame=dt),this._cachingAtTime.value}function et(dt){var ft=-.01,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt=0;if(St.length){var Rt;for(Rt=0;Rt<St.length;Rt+=1)Tt+=Math.pow(kt[Rt]-St[Rt],2);Tt=Math.sqrt(Tt)*100}else Tt=0;return Tt}function ot(dt){if(this.vel!==void 0)return this.vel;var ft=-.001,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt;if(St.length){Tt=createTypedArray("float32",St.length);var Rt;for(Rt=0;Rt<St.length;Rt+=1)Tt[Rt]=(kt[Rt]-St[Rt])/ft}else Tt=(kt-St)/ft;return Tt}function ct(){return this.pv}function ut(dt){this.propertyGroup=dt}return{searchExpressions:it,getSpeedAtTime:et,getVelocityAtTime:ot,getValueAtTime:g,getStaticValueAtTime:ct,setGroupProperty:ut}}();function addPropertyDecorator(){function it(jt,$t,Ft){if(!this.k||!this.keyframes)return this.pv;jt=jt?jt.toLowerCase():"";var Ht=this.comp.renderedFrame,Kt=this.keyframes,Bt=Kt[Kt.length-1].t;if(Ht<=Bt)return this.pv;var Ut,Yt;Ft?($t?Ut=Math.abs(Bt-this.elem.comp.globalData.frameRate*$t):Ut=Math.max(0,Bt-this.elem.data.ip),Yt=Bt-Ut):((!$t||$t>Kt.length-1)&&($t=Kt.length-1),Yt=Kt[Kt.length-1-$t].t,Ut=Bt-Yt);var Jt,Zt,en;if(jt==="pingpong"){var tn=Math.floor((Ht-Yt)/Ut);if(tn%2!==0)return this.getValueAtTime((Ut-(Ht-Yt)%Ut+Yt)/this.comp.globalData.frameRate,0)}else if(jt==="offset"){var nn=this.getValueAtTime(Yt/this.comp.globalData.frameRate,0),ln=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),an=this.getValueAtTime(((Ht-Yt)%Ut+Yt)/this.comp.globalData.frameRate,0),sn=Math.floor((Ht-Yt)/Ut);if(this.pv.length){for(en=new Array(nn.length),Zt=en.length,Jt=0;Jt<Zt;Jt+=1)en[Jt]=(ln[Jt]-nn[Jt])*sn+an[Jt];return en}return(ln-nn)*sn+an}else if(jt==="continue"){var dn=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),mn=this.getValueAtTime((Bt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(en=new Array(dn.length),Zt=en.length,Jt=0;Jt<Zt;Jt+=1)en[Jt]=dn[Jt]+(dn[Jt]-mn[Jt])*((Ht-Bt)/this.comp.globalData.frameRate)/5e-4;return en}return dn+(dn-mn)*((Ht-Bt)/.001)}return this.getValueAtTime(((Ht-Yt)%Ut+Yt)/this.comp.globalData.frameRate,0)}function g(jt,$t,Ft){if(!this.k)return this.pv;jt=jt?jt.toLowerCase():"";var Ht=this.comp.renderedFrame,Kt=this.keyframes,Bt=Kt[0].t;if(Ht>=Bt)return this.pv;var Ut,Yt;Ft?($t?Ut=Math.abs(this.elem.comp.globalData.frameRate*$t):Ut=Math.max(0,this.elem.data.op-Bt),Yt=Bt+Ut):((!$t||$t>Kt.length-1)&&($t=Kt.length-1),Yt=Kt[$t].t,Ut=Yt-Bt);var Jt,Zt,en;if(jt==="pingpong"){var tn=Math.floor((Bt-Ht)/Ut);if(tn%2===0)return this.getValueAtTime(((Bt-Ht)%Ut+Bt)/this.comp.globalData.frameRate,0)}else if(jt==="offset"){var nn=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),ln=this.getValueAtTime(Yt/this.comp.globalData.frameRate,0),an=this.getValueAtTime((Ut-(Bt-Ht)%Ut+Bt)/this.comp.globalData.frameRate,0),sn=Math.floor((Bt-Ht)/Ut)+1;if(this.pv.length){for(en=new Array(nn.length),Zt=en.length,Jt=0;Jt<Zt;Jt+=1)en[Jt]=an[Jt]-(ln[Jt]-nn[Jt])*sn;return en}return an-(ln-nn)*sn}else if(jt==="continue"){var dn=this.getValueAtTime(Bt/this.comp.globalData.frameRate,0),mn=this.getValueAtTime((Bt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(en=new Array(dn.length),Zt=en.length,Jt=0;Jt<Zt;Jt+=1)en[Jt]=dn[Jt]+(dn[Jt]-mn[Jt])*(Bt-Ht)/.001;return en}return dn+(dn-mn)*(Bt-Ht)/.001}return this.getValueAtTime((Ut-((Bt-Ht)%Ut+Bt))/this.comp.globalData.frameRate,0)}function et(jt,$t){if(!this.k)return this.pv;if(jt=(jt||.4)*.5,$t=Math.floor($t||5),$t<=1)return this.pv;var Ft=this.comp.renderedFrame/this.comp.globalData.frameRate,Ht=Ft-jt,Kt=Ft+jt,Bt=$t>1?(Kt-Ht)/($t-1):1,Ut=0,Yt=0,Jt;this.pv.length?Jt=createTypedArray("float32",this.pv.length):Jt=0;for(var Zt;Ut<$t;){if(Zt=this.getValueAtTime(Ht+Ut*Bt),this.pv.length)for(Yt=0;Yt<this.pv.length;Yt+=1)Jt[Yt]+=Zt[Yt];else Jt+=Zt;Ut+=1}if(this.pv.length)for(Yt=0;Yt<this.pv.length;Yt+=1)Jt[Yt]/=$t;else Jt/=$t;return Jt}function ot(jt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var $t=this._transformCachingAtTime.v;if($t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Ft=this.a.getValueAtTime(jt);$t.translate(-Ft[0]*this.a.mult,-Ft[1]*this.a.mult,Ft[2]*this.a.mult)}if(this.appliedTransformations<2){var Ht=this.s.getValueAtTime(jt);$t.scale(Ht[0]*this.s.mult,Ht[1]*this.s.mult,Ht[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Kt=this.sk.getValueAtTime(jt),Bt=this.sa.getValueAtTime(jt);$t.skewFromAxis(-Kt*this.sk.mult,Bt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Ut=this.r.getValueAtTime(jt);$t.rotate(-Ut*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Yt=this.rz.getValueAtTime(jt),Jt=this.ry.getValueAtTime(jt),Zt=this.rx.getValueAtTime(jt),en=this.or.getValueAtTime(jt);$t.rotateZ(-Yt*this.rz.mult).rotateY(Jt*this.ry.mult).rotateX(Zt*this.rx.mult).rotateZ(-en[2]*this.or.mult).rotateY(en[1]*this.or.mult).rotateX(en[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var tn=this.px.getValueAtTime(jt),nn=this.py.getValueAtTime(jt);if(this.data.p.z){var ln=this.pz.getValueAtTime(jt);$t.translate(tn*this.px.mult,nn*this.py.mult,-ln*this.pz.mult)}else $t.translate(tn*this.px.mult,nn*this.py.mult,0)}else{var an=this.p.getValueAtTime(jt);$t.translate(an[0]*this.p.mult,an[1]*this.p.mult,-an[2]*this.p.mult)}return $t}function ct(){return this.v.clone(new Matrix)}var ut=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(jt,$t,Ft){var Ht=ut(jt,$t,Ft);return Ht.dynamicProperties.length?Ht.getValueAtTime=ot.bind(Ht):Ht.getValueAtTime=ct.bind(Ht),Ht.setGroupProperty=expressionHelpers.setGroupProperty,Ht};var dt=PropertyFactory.getProp;PropertyFactory.getProp=function(jt,$t,Ft,Ht,Kt){var Bt=dt(jt,$t,Ft,Ht,Kt);Bt.kf?Bt.getValueAtTime=expressionHelpers.getValueAtTime.bind(Bt):Bt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Bt),Bt.setGroupProperty=expressionHelpers.setGroupProperty,Bt.loopOut=it,Bt.loopIn=g,Bt.smooth=et,Bt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Bt),Bt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Bt),Bt.numKeys=$t.a===1?$t.k.length:0,Bt.propertyIndex=$t.ix;var Ut=0;return Ft!==0&&(Ut=createTypedArray("float32",$t.a===1?$t.k[0].s.length:$t.k.length)),Bt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Ut},expressionHelpers.searchExpressions(jt,$t,Bt),Bt.k&&Kt.addDynamicProperty(Bt),Bt};function ft(jt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),jt*=this.elem.globalData.frameRate,jt-=this.offsetTime,jt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<jt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=jt,this.interpolateShape(jt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var St=ShapePropertyFactory.getConstructorFunction(),kt=ShapePropertyFactory.getKeyframedConstructorFunction();function Tt(){}Tt.prototype={vertices:function($t,Ft){this.k&&this.getValue();var Ht=this.v;Ft!==void 0&&(Ht=this.getValueAtTime(Ft,0));var Kt,Bt=Ht._length,Ut=Ht[$t],Yt=Ht.v,Jt=createSizedArray(Bt);for(Kt=0;Kt<Bt;Kt+=1)$t==="i"||$t==="o"?Jt[Kt]=[Ut[Kt][0]-Yt[Kt][0],Ut[Kt][1]-Yt[Kt][1]]:Jt[Kt]=[Ut[Kt][0],Ut[Kt][1]];return Jt},points:function($t){return this.vertices("v",$t)},inTangents:function($t){return this.vertices("i",$t)},outTangents:function($t){return this.vertices("o",$t)},isClosed:function(){return this.v.c},pointOnPath:function($t,Ft){var Ht=this.v;Ft!==void 0&&(Ht=this.getValueAtTime(Ft,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(Ht));for(var Kt=this._segmentsLength,Bt=Kt.lengths,Ut=Kt.totalLength*$t,Yt=0,Jt=Bt.length,Zt=0,en;Yt<Jt;){if(Zt+Bt[Yt].addedLength>Ut){var tn=Yt,nn=Ht.c&&Yt===Jt-1?0:Yt+1,ln=(Ut-Zt)/Bt[Yt].addedLength;en=bez.getPointInSegment(Ht.v[tn],Ht.v[nn],Ht.o[tn],Ht.i[nn],ln,Bt[Yt]);break}else Zt+=Bt[Yt].addedLength;Yt+=1}return en||(en=Ht.c?[Ht.v[0][0],Ht.v[0][1]]:[Ht.v[Ht._length-1][0],Ht.v[Ht._length-1][1]]),en},vectorOnPath:function($t,Ft,Ht){$t==1?$t=this.v.c:$t==0&&($t=.999);var Kt=this.pointOnPath($t,Ft),Bt=this.pointOnPath($t+.001,Ft),Ut=Bt[0]-Kt[0],Yt=Bt[1]-Kt[1],Jt=Math.sqrt(Math.pow(Ut,2)+Math.pow(Yt,2));if(Jt===0)return[0,0];var Zt=Ht==="tangent"?[Ut/Jt,Yt/Jt]:[-Yt/Jt,Ut/Jt];return Zt},tangentOnPath:function($t,Ft){return this.vectorOnPath($t,Ft,"tangent")},normalOnPath:function($t,Ft){return this.vectorOnPath($t,Ft,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Tt],St),extendPrototype([Tt],kt),kt.prototype.getValueAtTime=ft,kt.prototype.initiateExpression=ExpressionManager.initiateExpression;var Rt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(jt,$t,Ft,Ht,Kt){var Bt=Rt(jt,$t,Ft,Ht,Kt);return Bt.propertyIndex=$t.ix,Bt.lock=!1,Ft===3?expressionHelpers.searchExpressions(jt,$t.pt,Bt):Ft===4&&expressionHelpers.searchExpressions(jt,$t.ks,Bt),Bt.k&&jt.addDynamicProperty(Bt),Bt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function it(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(g,et){var ot=this.calculateExpression(et);if(g.t!==ot){var ct={};return this.copyData(ct,g),ct.t=ot.toString(),ct.__complete=!1,ct}return g},TextProperty.prototype.searchProperty=function(){var g=this.searchKeyframes(),et=this.searchExpressions();return this.kf=g||et,this.kf},TextProperty.prototype.searchExpressions=it}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function it(g,et){var ot=createNS("feMerge");ot.setAttribute("result",g);var ct,ut;for(ut=0;ut<et.length;ut+=1)ct=createNS("feMergeNode"),ct.setAttribute("in",et[ut]),ot.appendChild(ct),ot.appendChild(ct);return ot}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(it,g,et,ot,ct){this.filterManager=g;var ut=createNS("feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","linearRGB"),ut.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ut,ut.setAttribute("result",ot+"_tint_1"),it.appendChild(ut),ut=createNS("feColorMatrix"),ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ut.setAttribute("result",ot+"_tint_2"),it.appendChild(ut),this.matrixFilter=ut;var dt=this.createMergeNode(ot,[ct,ot+"_tint_1",ot+"_tint_2"]);it.appendChild(dt)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+ot+" 0"),this.matrixFilter.setAttribute("values",et[0]-g[0]+" 0 0 0 "+g[0]+" "+(et[1]-g[1])+" 0 0 0 "+g[1]+" "+(et[2]-g[2])+" 0 0 0 "+g[2]+" 0 0 0 1 0")}};function SVGFillFilter(it,g,et,ot){this.filterManager=g;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ct.setAttribute("result",ot),it.appendChild(ct),this.matrixFilter=ct}SVGFillFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[2].p.v,et=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+g[0]+" 0 0 0 0 "+g[1]+" 0 0 0 0 "+g[2]+" 0 0 0 "+et+" 0")}};function SVGStrokeEffect(it,g,et){this.initialized=!1,this.filterManager=g,this.elem=et,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var it=this.elem.layerElement.children||this.elem.layerElement.childNodes,g,et,ot,ct;for(this.filterManager.effectElements[1].p.v===1?(ct=this.elem.maskManager.masksProperties.length,ot=0):(ot=this.filterManager.effectElements[0].p.v-1,ct=ot+1),et=createNS("g"),et.setAttribute("fill","none"),et.setAttribute("stroke-linecap","round"),et.setAttribute("stroke-dashoffset",1),ot;ot<ct;ot+=1)g=createNS("path"),et.appendChild(g),this.paths.push({p:g,m:ot});if(this.filterManager.effectElements[10].p.v===3){var ut=createNS("mask"),dt=createElementID();ut.setAttribute("id",dt),ut.setAttribute("mask-type","alpha"),ut.appendChild(et),this.elem.globalData.defs.appendChild(ut);var ft=createNS("g");for(ft.setAttribute("mask","url("+getLocationHref()+"#"+dt+")");it[0];)ft.appendChild(it[0]);this.elem.layerElement.appendChild(ft),this.masker=ut,et.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(it=this.elem.layerElement.children||this.elem.layerElement.childNodes;it.length;)this.elem.layerElement.removeChild(it[0]);this.elem.layerElement.appendChild(et),this.elem.layerElement.removeAttribute("mask"),et.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=et},SVGStrokeEffect.prototype.renderFrame=function(it){this.initialized||this.initialize();var g,et=this.paths.length,ot,ct;for(g=0;g<et;g+=1)if(this.paths[g].m!==-1&&(ot=this.elem.maskManager.viewData[this.paths[g].m],ct=this.paths[g].p,(it||this.filterManager._mdf||ot.prop._mdf)&&ct.setAttribute("d",ot.lastPath),it||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||ot.prop._mdf)){var ut;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var dt=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ft=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,St=ct.getTotalLength();ut="0 0 0 "+St*dt+" ";var kt=St*(ft-dt),Tt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Rt=Math.floor(kt/Tt),jt;for(jt=0;jt<Rt;jt+=1)ut+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";ut+="0 "+St*10+" 0 0"}else ut="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;ct.setAttribute("stroke-dasharray",ut)}if((it||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(it||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(it||this.filterManager.effectElements[3].p._mdf)){var $t=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor($t[0]*255)+","+bmFloor($t[1]*255)+","+bmFloor($t[2]*255)+")")}};function SVGTritoneFilter(it,g,et,ot){this.filterManager=g;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","linearRGB"),ct.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),it.appendChild(ct);var ut=createNS("feComponentTransfer");ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("result",ot),this.matrixFilter=ut;var dt=createNS("feFuncR");dt.setAttribute("type","table"),ut.appendChild(dt),this.feFuncR=dt;var ft=createNS("feFuncG");ft.setAttribute("type","table"),ut.appendChild(ft),this.feFuncG=ft;var St=createNS("feFuncB");St.setAttribute("type","table"),ut.appendChild(St),this.feFuncB=St,it.appendChild(ut)}SVGTritoneFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v,ct=ot[0]+" "+et[0]+" "+g[0],ut=ot[1]+" "+et[1]+" "+g[1],dt=ot[2]+" "+et[2]+" "+g[2];this.feFuncR.setAttribute("tableValues",ct),this.feFuncG.setAttribute("tableValues",ut),this.feFuncB.setAttribute("tableValues",dt)}};function SVGProLevelsFilter(it,g,et,ot){this.filterManager=g;var ct=this.filterManager.effectElements,ut=createNS("feComponentTransfer");(ct[10].p.k||ct[10].p.v!==0||ct[11].p.k||ct[11].p.v!==1||ct[12].p.k||ct[12].p.v!==1||ct[13].p.k||ct[13].p.v!==0||ct[14].p.k||ct[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ut)),(ct[17].p.k||ct[17].p.v!==0||ct[18].p.k||ct[18].p.v!==1||ct[19].p.k||ct[19].p.v!==1||ct[20].p.k||ct[20].p.v!==0||ct[21].p.k||ct[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ut)),(ct[24].p.k||ct[24].p.v!==0||ct[25].p.k||ct[25].p.v!==1||ct[26].p.k||ct[26].p.v!==1||ct[27].p.k||ct[27].p.v!==0||ct[28].p.k||ct[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ut)),(ct[31].p.k||ct[31].p.v!==0||ct[32].p.k||ct[32].p.v!==1||ct[33].p.k||ct[33].p.v!==1||ct[34].p.k||ct[34].p.v!==0||ct[35].p.k||ct[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ut)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ut.setAttribute("color-interpolation-filters","sRGB"),it.appendChild(ut)),(ct[3].p.k||ct[3].p.v!==0||ct[4].p.k||ct[4].p.v!==1||ct[5].p.k||ct[5].p.v!==1||ct[6].p.k||ct[6].p.v!==0||ct[7].p.k||ct[7].p.v!==1)&&(ut=createNS("feComponentTransfer"),ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("result",ot),it.appendChild(ut),this.feFuncRComposed=this.createFeFunc("feFuncR",ut),this.feFuncGComposed=this.createFeFunc("feFuncG",ut),this.feFuncBComposed=this.createFeFunc("feFuncB",ut))}SVGProLevelsFilter.prototype.createFeFunc=function(it,g){var et=createNS(it);return et.setAttribute("type","table"),g.appendChild(et),et},SVGProLevelsFilter.prototype.getTableValue=function(it,g,et,ot,ct){for(var ut=0,dt=256,ft,St=Math.min(it,g),kt=Math.max(it,g),Tt=Array.call(null,{length:dt}),Rt,jt=0,$t=ct-ot,Ft=g-it;ut<=256;)ft=ut/256,ft<=St?Rt=Ft<0?ct:ot:ft>=kt?Rt=Ft<0?ot:ct:Rt=ot+$t*Math.pow((ft-it)/Ft,1/et),Tt[jt]=Rt,jt+=1,ut+=256/(dt-1);return Tt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g,et=this.filterManager.effectElements;this.feFuncRComposed&&(it||et[3].p._mdf||et[4].p._mdf||et[5].p._mdf||et[6].p._mdf||et[7].p._mdf)&&(g=this.getTableValue(et[3].p.v,et[4].p.v,et[5].p.v,et[6].p.v,et[7].p.v),this.feFuncRComposed.setAttribute("tableValues",g),this.feFuncGComposed.setAttribute("tableValues",g),this.feFuncBComposed.setAttribute("tableValues",g)),this.feFuncR&&(it||et[10].p._mdf||et[11].p._mdf||et[12].p._mdf||et[13].p._mdf||et[14].p._mdf)&&(g=this.getTableValue(et[10].p.v,et[11].p.v,et[12].p.v,et[13].p.v,et[14].p.v),this.feFuncR.setAttribute("tableValues",g)),this.feFuncG&&(it||et[17].p._mdf||et[18].p._mdf||et[19].p._mdf||et[20].p._mdf||et[21].p._mdf)&&(g=this.getTableValue(et[17].p.v,et[18].p.v,et[19].p.v,et[20].p.v,et[21].p.v),this.feFuncG.setAttribute("tableValues",g)),this.feFuncB&&(it||et[24].p._mdf||et[25].p._mdf||et[26].p._mdf||et[27].p._mdf||et[28].p._mdf)&&(g=this.getTableValue(et[24].p.v,et[25].p.v,et[26].p.v,et[27].p.v,et[28].p.v),this.feFuncB.setAttribute("tableValues",g)),this.feFuncA&&(it||et[31].p._mdf||et[32].p._mdf||et[33].p._mdf||et[34].p._mdf||et[35].p._mdf)&&(g=this.getTableValue(et[31].p.v,et[32].p.v,et[33].p.v,et[34].p.v,et[35].p.v),this.feFuncA.setAttribute("tableValues",g))}};function SVGDropShadowEffect(it,g,et,ot,ct){var ut=g.container.globalData.renderConfig.filterSize,dt=g.data.fs||ut;it.setAttribute("x",dt.x||ut.x),it.setAttribute("y",dt.y||ut.y),it.setAttribute("width",dt.width||ut.width),it.setAttribute("height",dt.height||ut.height),this.filterManager=g;var ft=createNS("feGaussianBlur");ft.setAttribute("in","SourceAlpha"),ft.setAttribute("result",ot+"_drop_shadow_1"),ft.setAttribute("stdDeviation","0"),this.feGaussianBlur=ft,it.appendChild(ft);var St=createNS("feOffset");St.setAttribute("dx","25"),St.setAttribute("dy","0"),St.setAttribute("in",ot+"_drop_shadow_1"),St.setAttribute("result",ot+"_drop_shadow_2"),this.feOffset=St,it.appendChild(St);var kt=createNS("feFlood");kt.setAttribute("flood-color","#00ff00"),kt.setAttribute("flood-opacity","1"),kt.setAttribute("result",ot+"_drop_shadow_3"),this.feFlood=kt,it.appendChild(kt);var Tt=createNS("feComposite");Tt.setAttribute("in",ot+"_drop_shadow_3"),Tt.setAttribute("in2",ot+"_drop_shadow_2"),Tt.setAttribute("operator","in"),Tt.setAttribute("result",ot+"_drop_shadow_4"),it.appendChild(Tt);var Rt=this.createMergeNode(ot,[ot+"_drop_shadow_4",ct]);it.appendChild(Rt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){if((it||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),it||this.filterManager.effectElements[0].p._mdf){var g=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(g[0]*255),Math.round(g[1]*255),Math.round(g[2]*255)))}if((it||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),it||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var et=this.filterManager.effectElements[3].p.v,ot=(this.filterManager.effectElements[2].p.v-90)*degToRads,ct=et*Math.cos(ot),ut=et*Math.sin(ot);this.feOffset.setAttribute("dx",ct),this.feOffset.setAttribute("dy",ut)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(it,g,et){this.initialized=!1,this.filterManager=g,this.filterElem=it,this.elem=et,et.matteElement=createNS("g"),et.matteElement.appendChild(et.layerElement),et.matteElement.appendChild(et.transformedElement),et.baseElement=et.matteElement}SVGMatte3Effect.prototype.findSymbol=function(it){for(var g=0,et=_svgMatteSymbols.length;g<et;){if(_svgMatteSymbols[g]===it)return _svgMatteSymbols[g];g+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(it,g){var et=it.layerElement.parentNode;if(et){for(var ot=et.children,ct=0,ut=ot.length;ct<ut&&ot[ct]!==it.layerElement;)ct+=1;var dt;ct<=ut-2&&(dt=ot[ct+1]);var ft=createNS("use");ft.setAttribute("href","#"+g),dt?et.insertBefore(ft,dt):et.appendChild(ft)}},SVGMatte3Effect.prototype.setElementAsMask=function(it,g){if(!this.findSymbol(g)){var et=createElementID(),ot=createNS("mask");ot.setAttribute("id",g.layerId),ot.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(g);var ct=it.globalData.defs;ct.appendChild(ot);var ut=createNS("symbol");ut.setAttribute("id",et),this.replaceInParent(g,et),ut.appendChild(g.layerElement),ct.appendChild(ut);var dt=createNS("use");dt.setAttribute("href","#"+et),ot.appendChild(dt),g.data.hd=!1,g.show()}it.setMatte(g.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var it=this.filterManager.effectElements[0].p.v,g=this.elem.comp.elements,et=0,ot=g.length;et<ot;)g[et]&&g[et].data.ind===it&&this.setElementAsMask(this.elem,g[et]),et+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(it,g,et,ot){it.setAttribute("x","-100%"),it.setAttribute("y","-100%"),it.setAttribute("width","300%"),it.setAttribute("height","300%"),this.filterManager=g;var ct=createNS("feGaussianBlur");ct.setAttribute("result",ot),it.appendChild(ct),this.feGaussianBlur=ct}SVGGaussianBlurEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=.3,et=this.filterManager.effectElements[0].p.v*g,ot=this.filterManager.effectElements[1].p.v,ct=ot==3?0:et,ut=ot==2?0:et;this.feGaussianBlur.setAttribute("stdDeviation",ct+" "+ut);var dt=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",dt)}};function TransformEffect(){}TransformEffect.prototype.init=function(it){this.effectsManager=it,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(it){if(this._opMdf=!1,this._mdf=!1,it||this.effectsManager._mdf){var g=this.effectsManager.effectElements,et=g[0].p.v,ot=g[1].p.v,ct=g[2].p.v===1,ut=g[3].p.v,dt=ct?ut:g[4].p.v,ft=g[5].p.v,St=g[6].p.v,kt=g[7].p.v;this.matrix.reset(),this.matrix.translate(-et[0],-et[1],et[2]),this.matrix.scale(dt*.01,ut*.01,1),this.matrix.rotate(-kt*degToRads),this.matrix.skewFromAxis(-ft*degToRads,(St+90)*degToRads),this.matrix.translate(ot[0],ot[1],0),this._mdf=!0,this.opacity!==g[8].p.v&&(this.opacity=g[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(it,g){this.init(g)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(it){this.init(it)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(it,g){var et=it==null?null:typeof Symbol<"u"&&it[Symbol.iterator]||it["@@iterator"];if(et!=null){var ot,ct,ut,dt,ft=[],St=!0,kt=!1;try{if(ut=(et=et.call(it)).next,g===0){if(Object(et)!==et)return;St=!1}else for(;!(St=(ot=ut.call(et)).done)&&(ft.push(ot.value),ft.length!==g);St=!0);}catch(Tt){kt=!0,ct=Tt}finally{try{if(!St&&et.return!=null&&(dt=et.return(),Object(dt)!==dt))return}finally{if(kt)throw ct}}return ft}}function ownKeys(it,g){var et=Object.keys(it);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(it);g&&(ot=ot.filter(function(ct){return Object.getOwnPropertyDescriptor(it,ct).enumerable})),et.push.apply(et,ot)}return et}function _objectSpread2(it){for(var g=1;g<arguments.length;g++){var et=arguments[g]!=null?arguments[g]:{};g%2?ownKeys(Object(et),!0).forEach(function(ot){_defineProperty(it,ot,et[ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(it,Object.getOwnPropertyDescriptors(et)):ownKeys(Object(et)).forEach(function(ot){Object.defineProperty(it,ot,Object.getOwnPropertyDescriptor(et,ot))})}return it}function _defineProperty(it,g,et){return g=_toPropertyKey(g),g in it?Object.defineProperty(it,g,{value:et,enumerable:!0,configurable:!0,writable:!0}):it[g]=et,it}function _objectWithoutPropertiesLoose(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ct,ut;for(ut=0;ut<ot.length;ut++)ct=ot[ut],!(g.indexOf(ct)>=0)&&(et[ct]=it[ct]);return et}function _objectWithoutProperties(it,g){if(it==null)return{};var et=_objectWithoutPropertiesLoose(it,g),ot,ct;if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(it);for(ct=0;ct<ut.length;ct++)ot=ut[ct],!(g.indexOf(ot)>=0)&&Object.prototype.propertyIsEnumerable.call(it,ot)&&(et[ot]=it[ot])}return et}function _slicedToArray(it,g){return _arrayWithHoles(it)||_iterableToArrayLimit(it,g)||_unsupportedIterableToArray(it,g)||_nonIterableRest()}function _arrayWithHoles(it){if(Array.isArray(it))return it}function _unsupportedIterableToArray(it,g){if(it){if(typeof it=="string")return _arrayLikeToArray(it,g);var et=Object.prototype.toString.call(it).slice(8,-1);if(et==="Object"&&it.constructor&&(et=it.constructor.name),et==="Map"||et==="Set")return Array.from(it);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray(it,g)}}function _arrayLikeToArray(it,g){(g==null||g>it.length)&&(g=it.length);for(var et=0,ot=new Array(g);et<g;et++)ot[et]=it[et];return ot}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(it,g){if(typeof it!="object"||it===null)return it;var et=it[Symbol.toPrimitive];if(et!==void 0){var ot=et.call(it,g||"default");if(typeof ot!="object")return ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(it)}function _toPropertyKey(it){var g=_toPrimitive(it,"string");return typeof g=="symbol"?g:String(g)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function it(g,et){var ot=g.animationData,ct=g.loop,ut=g.autoplay,dt=g.initialSegment,ft=g.onComplete,St=g.onLoopComplete,kt=g.onEnterFrame,Tt=g.onSegmentStart,Rt=g.onConfigReady,jt=g.onDataReady,$t=g.onDataFailed,Ft=g.onLoadedImages,Ht=g.onDOMLoaded,Kt=g.onDestroy;g.lottieRef,g.renderer,g.name,g.assetsPath,g.rendererSettings;var Bt=_objectWithoutProperties(g,_excluded$1),Ut=reactExports.useState(!1),Yt=_slicedToArray(Ut,2),Jt=Yt[0],Zt=Yt[1],en=reactExports.useRef(),tn=reactExports.useRef(null),nn=function(){var xn;(xn=en.current)===null||xn===void 0||xn.play()},ln=function(){var xn;(xn=en.current)===null||xn===void 0||xn.stop()},an=function(){var xn;(xn=en.current)===null||xn===void 0||xn.pause()},sn=function(xn){var En;(En=en.current)===null||En===void 0||En.setSpeed(xn)},dn=function(xn,En){var wn;(wn=en.current)===null||wn===void 0||wn.goToAndPlay(xn,En)},mn=function(xn,En){var wn;(wn=en.current)===null||wn===void 0||wn.goToAndStop(xn,En)},yn=function(xn){var En;(En=en.current)===null||En===void 0||En.setDirection(xn)},vn=function(xn,En){var wn;(wn=en.current)===null||wn===void 0||wn.playSegments(xn,En)},hn=function(xn){var En;(En=en.current)===null||En===void 0||En.setSubframe(xn)},pn=function(xn){var En;return(En=en.current)===null||En===void 0?void 0:En.getDuration(xn)},rn=function(){var xn;(xn=en.current)===null||xn===void 0||xn.destroy(),en.current=void 0},on=function(){var xn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},En;if(tn.current){(En=en.current)===null||En===void 0||En.destroy();var wn=_objectSpread2(_objectSpread2(_objectSpread2({},g),xn),{},{container:tn.current});return en.current=lottie.loadAnimation(wn),Zt(!!en.current),function(){var kn;(kn=en.current)===null||kn===void 0||kn.destroy(),en.current=void 0}}};reactExports.useEffect(function(){var un=on();return function(){return un==null?void 0:un()}},[ot,ct]),reactExports.useEffect(function(){en.current&&(en.current.autoplay=!!ut)},[ut]),reactExports.useEffect(function(){if(en.current){if(!dt){en.current.resetSegments(!0);return}!Array.isArray(dt)||!dt.length||((en.current.currentRawFrame<dt[0]||en.current.currentRawFrame>dt[1])&&(en.current.currentRawFrame=dt[0]),en.current.setSegment(dt[0],dt[1]))}},[dt]),reactExports.useEffect(function(){var un=[{name:"complete",handler:ft},{name:"loopComplete",handler:St},{name:"enterFrame",handler:kt},{name:"segmentStart",handler:Tt},{name:"config_ready",handler:Rt},{name:"data_ready",handler:jt},{name:"data_failed",handler:$t},{name:"loaded_images",handler:Ft},{name:"DOMLoaded",handler:Ht},{name:"destroy",handler:Kt}],xn=un.filter(function(wn){return wn.handler!=null});if(xn.length){var En=xn.map(function(wn){var kn;return(kn=en.current)===null||kn===void 0||kn.addEventListener(wn.name,wn.handler),function(){var Sn;(Sn=en.current)===null||Sn===void 0||Sn.removeEventListener(wn.name,wn.handler)}});return function(){En.forEach(function(wn){return wn()})}}},[ft,St,kt,Tt,Rt,jt,$t,Ft,Ht,Kt]);var gn=React4.createElement("div",_objectSpread2({style:et,ref:tn},Bt));return{View:gn,play:nn,stop:ln,pause:an,setSpeed:sn,goToAndStop:mn,goToAndPlay:dn,setDirection:yn,playSegments:vn,setSubframe:hn,getDuration:pn,destroy:rn,animationContainerRef:tn,animationLoaded:Jt,animationItem:en.current}};function getContainerVisibility(it){var g=it.getBoundingClientRect(),et=g.top,ot=g.height,ct=window.innerHeight-et,ut=window.innerHeight+ot;return ct/ut}function getContainerCursorPosition(it,g,et){var ot=it.getBoundingClientRect(),ct=ot.top,ut=ot.left,dt=ot.width,ft=ot.height,St=(g-ut)/dt,kt=(et-ct)/ft;return{x:St,y:kt}}var useInitInteractivity=function it(g){var et=g.wrapperRef,ot=g.animationItem,ct=g.mode,ut=g.actions;reactExports.useEffect(function(){var dt=et.current;if(!(!dt||!ot||!ut.length)){ot.stop();var ft=function(){var Tt=null,Rt=function(){var $t=getContainerVisibility(dt),Ft=ut.find(function(Kt){var Bt=Kt.visibility;return Bt&&$t>=Bt[0]&&$t<=Bt[1]});if(Ft){if(Ft.type==="seek"&&Ft.visibility&&Ft.frames.length===2){var Ht=Ft.frames[0]+Math.ceil(($t-Ft.visibility[0])/(Ft.visibility[1]-Ft.visibility[0])*Ft.frames[1]);//! goToAndStop must be relative to the start of the current segment
ot.goToAndStop(Ht-ot.firstFrame-1,!0)}Ft.type==="loop"&&(Tt===null||Tt!==Ft.frames||ot.isPaused)&&(ot.playSegments(Ft.frames,!0),Tt=Ft.frames),Ft.type==="play"&&ot.isPaused&&(ot.resetSegments(!0),ot.play()),Ft.type==="stop"&&ot.goToAndStop(Ft.frames[0]-ot.firstFrame-1,!0)}};return document.addEventListener("scroll",Rt),function(){document.removeEventListener("scroll",Rt)}},St=function(){var Tt=function(Ft,Ht){var Kt=Ft,Bt=Ht;if(Kt!==-1&&Bt!==-1){var Ut=getContainerCursorPosition(dt,Kt,Bt);Kt=Ut.x,Bt=Ut.y}var Yt=ut.find(function(en){var tn=en.position;return tn&&Array.isArray(tn.x)&&Array.isArray(tn.y)?Kt>=tn.x[0]&&Kt<=tn.x[1]&&Bt>=tn.y[0]&&Bt<=tn.y[1]:tn&&!Number.isNaN(tn.x)&&!Number.isNaN(tn.y)?Kt===tn.x&&Bt===tn.y:!1});if(Yt){if(Yt.type==="seek"&&Yt.position&&Array.isArray(Yt.position.x)&&Array.isArray(Yt.position.y)&&Yt.frames.length===2){var Jt=(Kt-Yt.position.x[0])/(Yt.position.x[1]-Yt.position.x[0]),Zt=(Bt-Yt.position.y[0])/(Yt.position.y[1]-Yt.position.y[0]);ot.playSegments(Yt.frames,!0),ot.goToAndStop(Math.ceil((Jt+Zt)/2*(Yt.frames[1]-Yt.frames[0])),!0)}Yt.type==="loop"&&ot.playSegments(Yt.frames,!0),Yt.type==="play"&&(ot.isPaused&&ot.resetSegments(!1),ot.playSegments(Yt.frames)),Yt.type==="stop"&&ot.goToAndStop(Yt.frames[0],!0)}},Rt=function(Ft){Tt(Ft.clientX,Ft.clientY)},jt=function(){Tt(-1,-1)};return dt.addEventListener("mousemove",Rt),dt.addEventListener("mouseout",jt),function(){dt.removeEventListener("mousemove",Rt),dt.removeEventListener("mouseout",jt)}};switch(ct){case"scroll":return ft();case"cursor":return St()}}},[ct,ot])},useLottieInteractivity=function it(g){var et=g.actions,ot=g.mode,ct=g.lottieObj,ut=ct.animationItem,dt=ct.View,ft=ct.animationContainerRef;return useInitInteractivity({actions:et,animationItem:ut,mode:ot,wrapperRef:ft}),dt},_excluded=["style","interactivity"],Lottie=function it(g){var et,ot,ct,ut=g.style,dt=g.interactivity,ft=_objectWithoutProperties(g,_excluded),St=useLottie(ft,ut),kt=St.View,Tt=St.play,Rt=St.stop,jt=St.pause,$t=St.setSpeed,Ft=St.goToAndStop,Ht=St.goToAndPlay,Kt=St.setDirection,Bt=St.playSegments,Ut=St.setSubframe,Yt=St.getDuration,Jt=St.destroy,Zt=St.animationContainerRef,en=St.animationLoaded,tn=St.animationItem;return reactExports.useEffect(function(){g.lottieRef&&(g.lottieRef.current={play:Tt,stop:Rt,pause:jt,setSpeed:$t,goToAndPlay:Ht,goToAndStop:Ft,setDirection:Kt,playSegments:Bt,setSubframe:Ut,getDuration:Yt,destroy:Jt,animationContainerRef:Zt,animationLoaded:en,animationItem:tn})},[(et=g.lottieRef)===null||et===void 0?void 0:et.current]),useLottieInteractivity({lottieObj:{View:kt,play:Tt,stop:Rt,pause:jt,setSpeed:$t,goToAndStop:Ft,goToAndPlay:Ht,setDirection:Kt,playSegments:Bt,setSubframe:Ut,getDuration:Yt,destroy:Jt,animationContainerRef:Zt,animationLoaded:en,animationItem:tn},actions:(ot=dt==null?void 0:dt.actions)!==null&&ot!==void 0?ot:[],mode:(ct=dt==null?void 0:dt.mode)!==null&&ct!==void 0?ct:"scroll"})};const nm="error",ddd=0,h$4=495,w$4=610,meta={g:"@lottiefiles/toolkit-js 0.26.1"},layers=[{ty:4,nm:"onda contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[215.177,7.452,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100,100,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[98,98,100],t:25},{s:[100,100,100],t:50}],ix:6},sk:{a:0,k:0},p:{a:0,k:[290.23,391.787,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.019,-3.444],[11.925,3.71],[15.246,-5.628],[13.16,-1.326],[6.095,1.06],[18.549,-4.579],[20.669,-11.401],[0,0]],o:[[-18.019,3.445],[-11.924,-3.71],[-15.247,5.627],[-13.16,1.325],[-6.094,-1.06],[-18.549,4.579],[0,0],[0,0]],v:[[172.782,-2.665],[120.58,-2.135],[64.933,1.575],[-12.001,-5.314],[-55.9,2.105],[-108.102,-.619],[-214.927,4.199],[214.927,4.171]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.7608,.7961,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[215.177,7.452],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"mascara contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,td:1,ao:0,ks:{a:{a:0,k:[236.75,48.666,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[306.5,443.092,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[236.5,48.416],[-236.5,48.416],[-236.5,-48.416],[236.5,-48.416]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[236.75,48.666],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"barco contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,tt:2,hasMask:!1,ao:0,ks:{a:{a:0,k:[238.525,103.168,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,340.028,0],t:0,ti:[0,0,0],to:[0,.995,0]},{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,346,0],t:25,ti:[0,.995,0],to:[0,0,0]},{s:[298.895,340.028,0],t:50}],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[1],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[34.934,18.014],[.174,.101],[0,0],[-20.846,-10.75],[-11.059,-3.23],[0,0]],o:[[-8.314,-1.72],[-20.869,-10.761],[0,0],[.173,.102],[27.561,14.213],[0,0],[0,0]],v:[[50.064,23.648],[-12.12,-2.247],[-50.064,-23.648],[-48.52,-23.283],[-11.623,-3.201],[48.425,22.504],[48.994,22.88]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[50.595,73.639],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.734,-5.533],[2.44,-4.275],[0,0],[-.479,3.608],[.983,3.414],[0,0]],o:[[-.688,5.183],[0,0],[1.73,-2.956],[.497,-3.745],[0,0],[1.453,5.042]],v:[[7.355,.862],[2.555,15.132],[-8.089,9.167],[-4.699,-.739],[-5.492,-11.566],[6.178,-15.132]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[115.743,122.502],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.194,-3.664],[0,0],[-.797,6.003],[-2.282,4.144],[0,0],[.434,-3.271]],o:[[0,0],[-1.756,-5.397],[.66,-4.971],[0,0],[-1.473,2.748],[-.541,4.075]],v:[[6.506,11.687],[-6,15.504],[-7.563,-1.76],[-3.057,-15.504],[8.36,-9.109],[5.44,-.034]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.884,114.798],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[5.822,.774],[4.058,2.181],[0,0],[-3.355,-.445],[-3.466,1.022]],o:[[-5.262,1.636],[-4.837,-.641],[0,0],[2.8,1.537],[3.812,.506],[0,0]],v:[[15.093,5.954],[-1.685,7.362],[-15.093,3.043],[-8.832,-8.136],[.45,-5.101],[11.458,-5.945]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[80.698,149.982],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-4.76,-3.116],[0,0],[4.006,.532],[3.244,-.853],[0,0],[-5.01,-.665]],o:[[0,0],[-3.188,-2.051],[-3.528,-.468],[0,0],[4.627,-1.143],[6.014,.799]],v:[[15.421,-1.916],[8.808,8.618],[-2.064,4.637],[-12.292,5.268],[-15.421,-7.166],[-.872,-7.954]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[90.212,87.524],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:6,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.729,-2.957],[6.489,-1.913],[3.812,.506],[2.799,1.537],[2.086,6.41],[-.541,4.074],[-1.472,2.748],[-7.128,1.866],[-3.527,-.468],[-3.188,-2.051],[-1.781,-6.203],[.498,-3.746]],o:[[-3.416,5.852],[-3.466,1.023],[-3.355,-.445],[-5.946,-3.261],[-1.194,-3.663],[.435,-3.273],[3.497,-6.508],[3.244,-.852],[4.007,.532],[5.417,3.48],[.983,3.413],[-.479,3.607]],v:[[23.477,13.415],[8.012,25.525],[-2.997,26.37],[-12.279,23.335],[-24.788,8.229],[-25.854,-3.49],[-22.934,-12.566],[-6.225,-25.72],[4.003,-26.349],[14.876,-22.368],[26.073,-7.317],[26.865,3.51]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[1.452,5.041],[7.856,5.136],[6.015,.797],[4.626,-1.143],[5.274,-9.583],[.66,-4.971],[-1.756,-5.399],[-8.926,-4.799],[-4.837,-.642],[-5.262,1.636],[-4.931,8.644],[-.688,5.182]],o:[[-2.601,-9.045],[-4.761,-3.117],[-5.009,-.667],[-10.62,2.619],[-2.282,4.144],[-.797,6.003],[3.109,9.567],[4.058,2.18],[5.822,.773],[9.469,-2.94],[2.439,-4.276],[.735,-5.533]],v:[[37.744,-10.884],[21.488,-32.902],[5.196,-38.939],[-9.353,-38.152],[-34.352,-18.961],[-38.856,-5.217],[-37.294,12.048],[-18.539,34.514],[-5.132,38.833],[11.646,37.425],[34.121,19.379],[38.919,5.11]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Mesclar caminhos 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8784,.8784,.8784],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.144,118.511],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.726,2.442],[0,0],[-.705,.04],[0,0]],o:[[0,0],[18.626,2.429],[0,0],[-.706,.041]],v:[[-45.038,-.021],[-44.899,-1.085],[43.292,-2.421],[45.038,-2.008]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[147.494,97.467],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[130.107,-38.817],[35.758,50.211],[-130.107,28.187],[-111.111,-50.211]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[346.693,155.875],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[238.275,-10.946],[143.925,78.082],[-158.527,37.921],[-238.275,-78.082],[-2.944,-22.34]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[238.525,128.004],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-30.452,-11.733],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[22.546,8.675]],v:[[54.447,15.708],[-29.446,6.601],[-54.448,2.22],[-45.036,-5.08],[-31.336,-15.708]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[181.186,89.557],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[64.818,58.717],[-64.818,-61.806],[.327,61.806]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[309.542,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[91.565,61.805],[16.21,48.604],[-66.562,34.103],[-91.564,29.721],[-82.154,22.422],[-68.452,11.794],[-64.768,8.934],[26.419,-61.805],[75.721,31.747]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[218.304,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"bandeira contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[3.333,103.527,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[508.393,364.277,0],ix:2},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[-2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.658,-2.953],[0,0],[0,0],[1.126,4.839]],o:[[-.67,2.999],[0,0],[1.614,-1.725],[.1,.1]],v:[[3.548,.438],[-4.206,5.982],[-4.206,5.979],[.835,-5.982]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[40.042,10.085],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[7.587,6.536],[2.491,-.102],[.116,.13],[0,0],[-.384,.003],[0,0],[0,-.002],[1.614,-1.724],[0,0],[0,0],[0,0],[0,0],[0,0],[-.505,-.066],[0,0],[-7.421,-5.626],[0,0],[0,0]],o:[[0,0],[-6.49,-5.591],[-.022,-.006],[0,0],[0,0],[0,0],[0,.001],[1.126,4.839],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.297,-.311],[8.902,6.748],[0,0],[0,0]],v:[[19.81,-1.324],[4.701,-6.806],[-13.361,-12.344],[-14.212,-12.72],[-14.578,-11.828],[-13.731,-11.387],[-13.729,-11.388],[-13.729,-11.384],[-18.77,.577],[-18.77,.58],[-18.771,.58],[-19.525,.237],[-19.809,.93],[-19.81,.932],[-18.689,1.354],[-18.549,1.01],[-1.682,5.948],[16.577,12.72],[14.09,4.741]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[54.606,15.487],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.027,-.206],[.013,-.035],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.219,-.085]],o:[[-.005,.036],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.089,-.218],[.201,.081]],v:[[20.93,-49.702],[20.902,-49.594],[20.04,-47.383],[20.04,-47.382],[19.668,-46.43],[19.668,-46.428],[15.306,-35.217],[15.079,-34.632],[14.954,-34.311],[14.71,-33.687],[-17.967,50.277],[-20.956,50.137],[13.589,-34.109],[13.59,-34.111],[13.874,-34.805],[18.821,-46.868],[19.188,-47.762],[20.087,-49.956],[20.641,-50.193]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8118,.8314,.9255],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[21.206,50.527],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"hominho contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[61,205,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[153.864,377.089,0],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.986,-3.765],[-.075,4.263],[-3.986,-.553],[-3.493,-4.263]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9176,.5529,.3059],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[97.339,38.926],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.562,-8.323],[0,0],[0,0],[1.36,.35],[0,0],[5.078,1.566],[0,0],[.814,1.124],[-5.522,-2.048]],o:[[0,0],[-.808,.107],[0,0],[-1.359,-.356],[0,0],[0,0],[-1.596,-.485],[-3.418,-4.711],[5.522,2.048]],v:[[13.008,-2.493],[12.001,4.652],[10.312,5.359],[7.791,10.466],[6.728,.137],[-5.829,-.359],[-5.828,-.365],[-9.59,-2.727],[-5.788,-7.58]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.2,.2,.2],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[95.438,17.148],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.809,.107],[-.116,-.991],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.629,4.74],[-.194,.58],[0,0],[0,0],[-1.359,-.356],[0,0]],o:[[.624,-.087],[.272,2.269],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.146,-1.094],[0,0],[5.078,1.566],[0,0],[1.359,.35],[0,0]],v:[[8.821,-8.33],[10.152,-7.222],[7.611,-2.644],[6.924,7.179],[-1.544,13.34],[2.518,5.313],[-4.963,4.813],[-9.338,3.738],[-10.424,2.403],[-9.585,-10.532],[-9.079,-13.115],[-9.01,-13.34],[3.549,-12.844],[4.611,-2.515],[7.132,-7.623]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[98.577,30.124],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[-27.616,-9.801],[0,0],[0,0],[0,0]],v:[[9.572,21.137],[-18.343,-21.136],[-3.118,6.541],[18.343,4.45]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.057,55.643],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.764,.72],[-.083,1.851],[1.039,2.566],[-.396,.279],[-1.226,.312],[-.102,-1.634],[-.007,-.046],[-.404,-1.421]],o:[[0,0],[0,0],[-.996,-.933],[.115,-2.484],[-.334,-.82],[.504,-.363],[2.714,-.681],[.001,.039],[.064,.647],[1.219,4.354]],v:[[6.884,6.578],[1.556,9.341],[.103,8.224],[-1.936,3.969],[-6.475,-5.63],[-6.488,-7.344],[-3.696,-8.419],[2.648,-7.707],[2.663,-7.576],[3.415,-4.318]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[78.549,23.927],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-3.947,.211],[0,0],[0,0],[1.336,-.011],[10.934,5.859],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[-6.258,.062],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.764,.719],[0,0],[0,0],[0,0]],v:[[40.412,1.789],[31.641,18.477],[28.509,35.442],[26.4,35.488],[-9.476,29.344],[-2.174,8.72],[-2.025,-8.292],[-27.405,-8.849],[-40.412,-31.214],[-38.108,-32.53],[-32.811,-35.549],[-19.9,-19.09],[4.664,-26.152],[6.117,-25.035],[3.726,-23.797],[18.953,3.862]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.989,58.304],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.27,.029],[0,0],[0,0]],o:[[0,0],[-.244,-.072],[-3.801,-.447],[0,0],[0,0]],v:[[-1.025,-5.379],[9.493,.432],[8.726,.278],[-5.761,5.379],[-9.493,.782]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[106.756,42.408],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-3.801,-.446],[-.244,-.072],[1.081,-3.632],[3.946,-.205],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[.269,.029],[3.283,.917],[-1.164,3.914],[-3.947,.211],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-6.037,-7.682],[-2.126,-2.866],[1.606,1.731],[16.092,-3.37],[16.859,-3.216],[20.594,5.476],[15.011,14.038],[-6.449,16.11],[-21.675,-11.549],[-19.284,-12.787],[-13.956,-15.55],[-12.88,-16.11],[-11.005,-13.804],[-9.919,-12.469]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[99.39,46.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[2.188,-1.317],[1.694,2.393],[-2.188,-2.393]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[91.658,35.98],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[-.65,3.078],[0,0],[-.889,.37],[-1.354,-1.521],[-.21,-.673]],o:[[0,0],[0,0],[0,0],[.065,-1.079],[1.178,-.489],[.277,.317],[.805,2.561]],v:[[5.163,4.06],[-.135,7.082],[-4.512,-2.895],[-1.344,-2.878],[-.154,-6.592],[3.301,-4.383],[4.035,-2.846]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.015,18.694],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[10.718,3.027],[10.627,3.713],[-11.228,.811],[-10.627,-3.713],[11.228,-.811],[11.13,-.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.567,14.101],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.063,.647],[0,0]],o:[[0,0],[0,0],[-.404,-1.421],[0,0],[0,0]],v:[[3.357,.796],[3.193,2.03],[-2.853,1.228],[-3.605,-2.03],[3.605,-1.072]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.818,18.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 13",ix:13,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.504,-.363],[-.334,-.819],[0,0]],o:[[0,0],[-1.226,.313],[-.395,.279],[0,0],[0,0]],v:[[-5.372,-2.135],[5.785,-.654],[2.992,.421],[3.005,2.135],[-5.785,.968]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[69.069,16.161],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 14",ix:14,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.021,.206],[.454,1.336],[.738,.319],[0,0],[.701,-3.656],[.043,-.319],[-.212,-1.246],[-1.247,-.166],[-.132,.015],[-.518,3.902]],o:[[.185,-1.929],[-.388,-1.146],[0,0],[-1.798,-.141],[-.066,.304],[-.204,1.542],[.366,2.145],[.135,.017],[1.848,-.184],[.028,-.211]],v:[[3.624,-.078],[3.172,-5.105],[1.451,-7.391],[.883,-7.532],[-3.448,-1.343],[-3.605,-.407],[-3.57,3.843],[-1.036,7.656],[-.626,7.658],[3.554,.544]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[4.059,7.923],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 15",ix:15,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.277,.317],[1.178,-.488],[.065,-1.079],[0,0],[0,0],[0,0],[-.518,3.902],[1.686,.732],[0,0],[0,0]],o:[[0,0],[0,0],[-.21,-.673],[-1.354,-1.521],[-.889,.371],[0,0],[0,0],[0,0],[1.848,-.185],[.512,-3.851],[0,0],[0,0],[0,0]],v:[[18.604,6.72],[18.479,7.66],[17.313,7.656],[16.58,6.119],[13.124,3.909],[11.934,7.625],[8.766,7.608],[-19.296,7.443],[-19.303,7.39],[-15.124,.276],[-17.227,-7.66],[19.303,1.449],[19.204,2.197]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[22.736,8.191],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 16",ix:16,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[-7.889,-.188],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[-1.424,-7.763],[0,0],[0,0],[17.34,5.523],[0,0]],v:[[15.789,-4.481],[-5.23,-8.073],[-6.092,24.732],[-21.09,27.96],[-24.038,-13.084],[-11.495,-27.772],[-5.111,-27.618],[-5.104,-27.617],[25.462,-3.139]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.459,114.844],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 17",ix:17,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[1.246,-7.213],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.821,-6.273],[-4.877,-2.729],[-11.295,4.52],[1.911,6.273],[10.017,.222],[11.295,-4.265]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[82.042,197.797],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 18",ix:18,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-2.653,-12.601],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-.527,-11.795],[-9.312,13.551],[11.965,-10.136],[10.064,-13.551]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[34.803,153.627],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 19",ix:19,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[17.34,5.522],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[20.148,53.268],[3.293,51.029],[2.995,-28.791],[-27.572,-53.268],[-10.414,-52.845],[27.572,-46.748]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[74.927,140.495],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"nuvem contornos 3",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[173,173,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[441.196,174.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"nuvem contornos 2",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[248,248,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[171.196,120.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:4,nm:"nuvem contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[532.196,98.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8}],v$1="5.7.3",fr=25,op=50,ip=0,assets=[],notFound={nm,ddd,h:h$4,w:w$4,meta,layers,v:v$1,fr,op,ip,assets},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"max-xl h-screen bg-gradient-to-r from-black to-silver",children:[jsxRuntimeExports.jsx("div",{className:" flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{className:"w-[500px] h-[500px]",animationData:notFound,loop:!0})}),jsxRuntimeExports.jsx("h3",{className:"font-palanquin padding-x text-center text-8xl font-bold text-phlokkGreen",children:"4 0 4"}),jsxRuntimeExports.jsx("p",{className:"m-auto mt-4 max-w-lg text-center notFound-text",children:"Page does not exist!"}),jsxRuntimeExports.jsx("div",{className:"mt-24 flex-1 justify-center items-center text-center text-white max-lg:flex-col gap-14",children:jsxRuntimeExports.jsxs("h1",{children:["Go back to ",jsxRuntimeExports.jsxs(Link$1,{to:"/",children:[" ",jsxRuntimeExports.jsx("span",{className:"text-phlokkGreen",children:"Homepage"})]})]})})]});function ThankYou(){const{search:it}=useLocation(),g=reactExports.useMemo(()=>new URLSearchParams(it).get("session_id"),[it]),et=g?`/api/downloads/${g}`:null;return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#0b0b0b] text-white flex items-center justify-center px-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Thank you for your purchase!"}),jsxRuntimeExports.jsxs("p",{className:"mt-3 text-slate-300",children:["Your download is ready",et?"":", but we couldnt find a session id","."]}),et?jsxRuntimeExports.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[jsxRuntimeExports.jsx("a",{href:et,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold bg-phlokkGreen text-black hover:opacity-90 transition",children:"Download Now"}),jsxRuntimeExports.jsx("a",{href:et,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Open in New Tab"})]}):jsxRuntimeExports.jsxs("div",{className:"mt-8 space-y-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["We expected a URL like ",jsxRuntimeExports.jsx("code",{children:"/thank-you?session_id=cs_..."}),"."]}),jsxRuntimeExports.jsx(Link$1,{to:"/",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Go Home"})]}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-xs text-slate-500",children:"Having trouble? Forward your receipt email to support and well help."})]})})}const Terms=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Terms and Conditions"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"These Terms and Conditions (Agreement) govern your access to and use of the Cre8tly Studio website, platform, and all related products and services (collectively, Services). By creating an account, making a purchase, or otherwise using our Services, you (User, you, or your) agree to be legally bound by this Agreement. If you do not agree, you must discontinue use of our Services immediately."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Ownership and License"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio owns and retains all rights, title, and interest in the Services, including all software, source code, algorithms, designs, trade secrets, and intellectual property. Your purchase provides a limited, non-transferable, non-exclusive license to use the Services for your personal or business needs in accordance with this Agreement. No ownership rights are transferred to you. Any attempt to copy, reverse-engineer, resell, or distribute the software or digital output without written permission is strictly prohibited."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Accounts and Membership"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You must be at least 18 years old to use our Services. You are responsible for providing accurate account information and maintaining the confidentiality of your login credentials. You are fully responsible for all activity that occurs under your account. We reserve the right to suspend or terminate accounts that provide false information, violate these terms, or attempt to bypass usage limits (including the maximum 25-page PDF limit per slot)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Purchases and Payments"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All purchases, subscriptions, and credits made through our platform are final, as outlined in our Refund Policy. By making a purchase, you agree to provide valid and accurate payment details. We reserve the right to refuse or cancel any order suspected of fraud or unauthorized use. Pricing is subject to change at our discretion."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Digital Products and Slots"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Lead magnet slots and generated PDFs are digital products licensed for your own use. You may not resell, redistribute, or use them for automated scraping or mass content generation beyond what is permitted by your plan. Slots cannot be exchanged, refunded, or rolled over once purchased. Misuse of slots, including attempts to exceed system safeguards, may result in account suspension without refund."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Prohibited Uses"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You may not use our Services for any unlawful purpose, to attempt unauthorized access to our systems, to exceed usage caps, to infringe on intellectual property rights, or to interfere with the operation of the Services. We reserve the right to suspend or terminate accounts engaged in abuse, fraud, or misuse."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Intellectual Property"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All software, designs, branding, content, and related intellectual property are owned exclusively by Cre8tly Studio or its licensors. You may not reproduce, republish, modify, or exploit any part of the Services without our express written consent."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Disclaimer of Warranties"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Services are provided as is and as available without any warranties of any kind, express or implied. We do not guarantee that the Services will be uninterrupted, error-free, or suitable for your specific purpose. You assume full responsibility for your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Limitation of Liability"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"To the fullest extent permitted by law, Cre8tly Studio, its owners, employees, and affiliates shall not be liable for any indirect, incidental, consequential, or punitive damages, including but not limited to loss of profits, business interruption, or data loss, arising out of or related to your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to Terms"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may revise these Terms at any time by posting an updated version on our website. Continued use of the Services after updates constitutes acceptance of the revised Terms."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Governing Law"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Agreement shall be governed by and construed under the laws of Tennessee, United States, without regard to its conflict of law principles. Any disputes shall be resolved exclusively in the courts of Tennessee, United States."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions regarding these Terms and Conditions, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Privacy=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Privacy Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio respects your privacy and is committed to protecting it in accordance with this Privacy Policy (Policy). This Policy explains how we collect, use, and safeguard your personal information when you visit our website, purchase subscriptions or credits, or use any of our software services (Services)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"By accessing or using Cre8tly Studios Services, you acknowledge that you have read and understood this Policy and agree to its terms. If you do not agree, please do not use our Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Information We Collect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may collect personal information you provide directly to us, such as:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Name and contact information (email, phone, billing address)",jsxRuntimeExports.jsx("br",{})," Account login details (if you create an account)",jsxRuntimeExports.jsx("br",{})," Payment and billing information (processed securely by third-party providers)",jsxRuntimeExports.jsx("br",{})," Prompts, themes, and preferences you submit to generate lead magnets or PDFs",jsxRuntimeExports.jsx("br",{})," Device and usage data (IP address, browser type, access times)",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"How We Use Your Information"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may use the information we collect for purposes including:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," To process payments and deliver your purchased slots or PDFs",jsxRuntimeExports.jsx("br",{})," To provide, operate, and improve our Services",jsxRuntimeExports.jsx("br",{})," To personalize your experience (themes, saved prompts)",jsxRuntimeExports.jsx("br",{})," To respond to customer inquiries and provide support",jsxRuntimeExports.jsx("br",{})," To send updates, promotional offers, or newsletters (with your consent)",jsxRuntimeExports.jsx("br",{})," To comply with legal obligations",jsxRuntimeExports.jsx("br",{})," To detect and prevent fraud or misuse of our Services",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Payment Processing"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Payments for subscriptions, slots, or digital products are processed securely through third-party providers (such as Stripe). Cre8tly Studio does not store your full payment details. Payment providers may collect certain personal data in accordance with their own privacy policies, which we encourage you to review."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Cookies and Tracking"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Our website may use cookies and similar technologies to improve your experience, analyze site traffic, and deliver personalized content. You can control cookie preferences through your browser settings."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Data Retention"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We will retain your personal information only for as long as necessary to fulfill the purposes outlined in this Policy, comply with legal obligations, resolve disputes, and enforce agreements. After this period, your data will be securely deleted or anonymized."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Your Rights"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Depending on your location, you may have rights under applicable data protection laws (such as GDPR or CCPA). These may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," The right to access, correct, or delete your personal information",jsxRuntimeExports.jsx("br",{})," The right to object to processing or withdraw consent",jsxRuntimeExports.jsx("br",{})," The right to request data portability",jsxRuntimeExports.jsx("br",{})," The right to lodge a complaint with a data protection authority",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Childrens Privacy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio does not knowingly collect personal information from children under the age of 18. If you believe we may have collected such information, please contact us immediately and we will delete it."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Security"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We implement reasonable technical and organizational measures to protect your personal information. However, no system can be 100% secure. You are responsible for maintaining the confidentiality of any account credentials and taking steps to protect your devices."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to This Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Privacy Policy from time to time. Updates will be posted on this page with a revised last updated date. Continued use of our Services after changes indicates acceptance of the revised Policy."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions, concerns, or requests regarding this Privacy Policy, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"privacy@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Refund=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Refund Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["At Cre8tly Studio, all purchases of subscriptions, credits, and lead magnet slots are final. Because our Services involve the instant creation and delivery of digital content, ",jsxRuntimeExports.jsx("strong",{children:"no refunds will be issued under any circumstances."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"All Sales Are Final"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["By completing a purchase, you acknowledge and agree that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," You are purchasing access to digital services and instantly usable content.",jsxRuntimeExports.jsx("br",{})," We do not provide refunds or exchanges for unused slots, cancelled accounts, or change of mind.",jsxRuntimeExports.jsx("br",{})," Errors caused by incorrect prompt entry, theme selection, or user setup are not eligible for refunds.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Service Quality"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"While no refunds are available, if you experience a technical problem with your order (such as the PDF not generating correctly), please contact us. Our team will investigate and, where appropriate, provide a replacement or re-issue the digital content you purchased."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions or technical support regarding your order, you can reach us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"support@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Cookie=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Cookie Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Cookie Policy (Policy) explains how Cre8tly Studio (we, us, or our) uses cookies and similar technologies when you visit our website (Website) or use our related products and services (Services), including generating lead magnets, accessing customer dashboards, or making purchases. By using our Website, you agree to the use of cookies as described in this Policy. For details on how we handle personal data, please also review our Privacy Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Types of cookies we use"}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Essential cookies"}),": Required for logging into your account, keeping sessions secure, processing payments, and generating your purchased lead magnets.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Preferences cookies"}),": Remember your settings (such as selected themes or region) to make your experience smoother.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Analytics cookies"}),": Help us understand how customers use dashboards, downloads, and checkout so we can improve our Services.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Marketing cookies"}),": May be used (if you opt in) to deliver personalized offers or measure the performance of ad campaigns."]}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Managing cookies"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You can control or disable cookies in your browser settings. Please note that blocking essential cookies may prevent checkout, login, or access to your purchased lead magnets from working properly."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to this Policy"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Cookie Policy from time to time. Any updates will be posted on this page with a new last revised date. Continued use of our Website after changes means you accept the updated Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions about this Cookie Policy, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on October 3rd, 2025."}),jsxRuntimeExports.jsx("br",{})]})});function PromptPage(){const[it]=useSearchParams(),g=it.get("session_id"),et=reactExports.useRef(null),[ot,ct]=reactExports.useState(!0),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(!1),[$t,Ft]=reactExports.useState(null);reactExports.useEffect(()=>{if(ft&&et.current){const Kt=et.current.getEditor();setTimeout(()=>{Kt.root.scrollTop=0,Kt.root.dispatchEvent(new Event("input"))},100)}},[ft]),reactExports.useEffect(()=>{g?(async()=>{var Bt;try{const Ut=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Ut.data&&(dt(!0),Ut.data.status==="completed"&&Ut.data.pdf_url&&(Ft(Ut.data.pdf_url),jt(!0)))}catch(Ut){console.error("Invalid session:",((Bt=Ut.response)==null?void 0:Bt.data)||Ut.message),dt(!1)}finally{ct(!1)}})():ct(!1)},[g]);const Ht=async()=>{var Kt;if(ft.trim()){Tt(!0);try{await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{sessionId:g,prompt:ft}),jt(!0);const Bt=setInterval(async()=>{try{const Ut=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Ut.data.status==="completed"&&Ut.data.pdf_url&&(Ft(Ut.data.pdf_url),clearInterval(Bt))}catch(Ut){console.error("Polling failed:",Ut.message)}},5e3)}catch(Bt){console.error(" Request failed:",((Kt=Bt.response)==null?void 0:Kt.data)||Bt.message)}finally{Tt(!1)}}};return ot?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen text-xl text-gray-400",children:"Validating session..."}):ut?jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto py-20 px-6 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Enter Your Prompt"}),Rt?jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-green mb-6",children:" Your prompt was submitted!"}),$t?jsxRuntimeExports.jsx("a",{href:$t,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-gradient-to-r from-[#1DA1F2] to-purple-600 text-white px-8 py-4 rounded-xl shadow-lg hover:opacity-90 transition",children:"Download PDF"}):jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Your PDF is being generated... Please wait."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:ft,onChange:Kt=>St(Kt.target.value),placeholder:"Describe your audience or offer...",className:"w-full h-[500px] bg-white text-black text-left rounded-lg p-4 leading-relaxed font-montserrat border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 shadow-inner resize-none overflow-y-auto"}),jsxRuntimeExports.jsx("button",{onClick:Ht,disabled:kt||!ft||ft.trim()==="<p><br></p>",className:`w-full py-4 rounded-xl font-semibold text-lg transition shadow-lg ${kt||!ft?"bg-gray-600 cursor-not-allowed":"bg-black border border-green-400 text-white hover:opacity-90"}`,children:kt?"Generating...":"Generate PDF"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Invalid or expired session"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Please purchase a lead magnet to access this page."})]})}const headerLogo="/assets/cre8tly-logo-ab122ab2.svg",ebookCover="/assets/ultimate-branding-d456799d.jpg",Footer=()=>jsxRuntimeExports.jsx("footer",{className:"text-white py-8 px-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center text-xs text-white/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-4 md:gap-6",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly Studio Logo",width:50,height:50})}),jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," Alure Digital. All rights reserved"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:items-end gap-2 mt-6 md:mt-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Link$1,{to:"/terms",className:"hover:text-white transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/privacy-policy",className:"hover:text-white transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/cookie-policy",className:"hover:text-white transition-colors",children:"Cookies"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/refund-policy",className:"hover:text-white transition-colors",children:"Refunds"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-white/40",children:["Designed by"," ",jsxRuntimeExports.jsx("a",{href:"https://aluredigital.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"Alure Digital"})]})]})]})});function CustomCursor(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!1),ct=useMotionValue(-100),ut=useMotionValue(-100),dt=useSpring(ct,{stiffness:225,damping:30}),ft=useSpring(ut,{stiffness:225,damping:30});return reactExports.useEffect(()=>{const St=Tt=>{et||ot(!0),ct.set(Tt.clientX),ut.set(Tt.clientY)};window.addEventListener("mousemove",St);const kt=document.querySelectorAll("a, button, .clickable");return kt.forEach(Tt=>{Tt.addEventListener("mouseenter",()=>g(!0)),Tt.addEventListener("mouseleave",()=>g(!1))}),()=>{window.removeEventListener("mousemove",St),kt.forEach(Tt=>{Tt.removeEventListener("mouseenter",()=>g(!0)),Tt.removeEventListener("mouseleave",()=>g(!1))})}},[et]),jsxRuntimeExports.jsx(motion.div,{className:"fixed top-0 left-0 z-[9999] pointer-events-none",initial:{opacity:0,scale:.6},animate:{opacity:et?1:0,scale:et?1:.6},transition:{duration:.6,ease:"easeOut"},style:{translateX:dt,translateY:ft},children:jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-200 ${it?"bg-[#7bed9f]/80 shadow-[0_0_15px_rgba(123,237,159,0.5)]":"bg-[#7bed9f]/70 shadow-[0_0_10px_rgba(123,237,159,0.5)]"}`})})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=it=>it.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=it=>it.replace(/^([A-Z])|[\s-_]+(\w)/g,(g,et,ot)=>ot?ot.toUpperCase():et.toLowerCase()),toPascalCase=it=>{const g=toCamelCase(it);return g.charAt(0).toUpperCase()+g.slice(1)},mergeClasses=(...it)=>it.filter((g,et,ot)=>!!g&&g.trim()!==""&&ot.indexOf(g)===et).join(" ").trim(),hasA11yProp=it=>{for(const g in it)if(g.startsWith("aria-")||g==="role"||g==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:it="currentColor",size:g=24,strokeWidth:et=2,absoluteStrokeWidth:ot,className:ct="",children:ut,iconNode:dt,...ft},St)=>reactExports.createElement("svg",{ref:St,...defaultAttributes,width:g,height:g,stroke:it,strokeWidth:ot?Number(et)*24/Number(g):et,className:mergeClasses("lucide",ct),...!ut&&!hasA11yProp(ft)&&{"aria-hidden":"true"},...ft},[...dt.map(([kt,Tt])=>reactExports.createElement(kt,Tt)),...Array.isArray(ut)?ut:[ut]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(it,g)=>{const et=reactExports.forwardRef(({className:ot,...ct},ut)=>reactExports.createElement(Icon,{ref:ut,iconNode:g,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(it))}`,`lucide-${it}`,ot),...ct}));return et.displayName=toPascalCase(it),et};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bot=createLucideIcon("bot",__iconNode$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Cog=createLucideIcon("cog",__iconNode$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$2=createLucideIcon("image",__iconNode$q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Inbox$1=createLucideIcon("inbox",__iconNode$p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LayoutDashboard=createLucideIcon("layout-dashboard",__iconNode$n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ListOrdered=createLucideIcon("list-ordered",__iconNode$m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],List=createLucideIcon("list",__iconNode$l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MessageCircleQuestionMark=createLucideIcon("message-circle-question-mark",__iconNode$g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Package=createLucideIcon("package",__iconNode$f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rocket=createLucideIcon("rocket",__iconNode$c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],SquareTerminal=createLucideIcon("square-terminal",__iconNode$a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Store=createLucideIcon("store",__iconNode$9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],TextAlignCenter=createLucideIcon("text-align-center",__iconNode$8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],TextAlignEnd=createLucideIcon("text-align-end",__iconNode$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],TextAlignStart=createLucideIcon("text-align-start",__iconNode$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Timer=createLucideIcon("timer",__iconNode$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$2=createLucideIcon("x",__iconNode$2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode);function SignupPage(){const{login:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=useNavigate(),[ct,ut]=reactExports.useState({name:"",email:"",password:""}),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState("");reactExports.useEffect(()=>{if(St){const jt=setTimeout(()=>kt(""),5e3);return()=>clearTimeout(jt)}},[St]);const Tt=jt=>ut({...ct,[jt.target.name]:jt.target.value}),Rt=async jt=>{var $t,Ft;jt.preventDefault(),ft(!0),kt("");try{const Ht=await axios$1.post("https://cre8tlystudio.com/api/auth/signup",ct);Ht.status===201?(await it(ct.email,ct.password),ot("/dashboard")):kt(Ht.data.message||"Something went wrong")}catch(Ht){(Ft=($t=Ht.response)==null?void 0:$t.data)!=null&&Ft.message?kt(Ht.response.data.message):kt("Signup failed. Please try again later.")}finally{ft(!1)}};return jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Create Your Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Join Cre8tly Studio and start creating digital products instantly."}),St&&jsxRuntimeExports.jsx("div",{className:"bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-700",children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:Rt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:ct.name,onChange:Tt,placeholder:"Full Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:ct.email,onChange:Tt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:g?"text":"password",name:"password",value:ct.password,onChange:Tt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>et(!g),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":g?"Hide password":"Show password",children:g?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:dt,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:dt?"Creating Account...":"Sign Up"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Log In"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}var i$4=Object.defineProperty,d$2=(it,g,et)=>g in it?i$4(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,r$2=(it,g,et)=>(d$2(it,typeof g!="symbol"?g+"":g,et),et);let o$4=class{constructor(){r$2(this,"current",this.detect()),r$2(this,"handoffState","pending"),r$2(this,"currentId",0)}set(g){this.current!==g&&(this.handoffState="pending",this.currentId=0,this.current=g)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$5=new o$4;function u$5(it){return s$5.isServer?null:it instanceof Node?it.ownerDocument:it!=null&&it.hasOwnProperty("current")&&it.current instanceof Node?it.current.ownerDocument:document}function t$4(it){typeof queueMicrotask=="function"?queueMicrotask(it):Promise.resolve().then(it).catch(g=>setTimeout(()=>{throw g}))}function o$3(){let it=[],g={addEventListener(et,ot,ct,ut){return et.addEventListener(ot,ct,ut),g.add(()=>et.removeEventListener(ot,ct,ut))},requestAnimationFrame(...et){let ot=requestAnimationFrame(...et);return g.add(()=>cancelAnimationFrame(ot))},nextFrame(...et){return g.requestAnimationFrame(()=>g.requestAnimationFrame(...et))},setTimeout(...et){let ot=setTimeout(...et);return g.add(()=>clearTimeout(ot))},microTask(...et){let ot={current:!0};return t$4(()=>{ot.current&&et[0]()}),g.add(()=>{ot.current=!1})},style(et,ot,ct){let ut=et.style.getPropertyValue(ot);return Object.assign(et.style,{[ot]:ct}),this.add(()=>{Object.assign(et.style,{[ot]:ut})})},group(et){let ot=o$3();return et(ot),this.add(()=>ot.dispose())},add(et){return it.includes(et)||it.push(et),()=>{let ot=it.indexOf(et);if(ot>=0)for(let ct of it.splice(ot,1))ct()}},dispose(){for(let et of it.splice(0))et()}};return g}function p$2(){let[it]=reactExports.useState(o$3);return reactExports.useEffect(()=>()=>it.dispose(),[it]),it}let n$3=(it,g)=>{s$5.isServer?reactExports.useEffect(it,g):reactExports.useLayoutEffect(it,g)};function s$4(it){let g=reactExports.useRef(it);return n$3(()=>{g.current=it},[it]),g}let o$2=function(it){let g=s$4(it);return React4.useCallback((...et)=>g.current(...et),[g])},e$3=reactExports.createContext(void 0);function a$a(){return reactExports.useContext(e$3)}function t$3(...it){return Array.from(new Set(it.flatMap(g=>typeof g=="string"?g.split(" "):[]))).filter(Boolean).join(" ")}function u$4(it,g,...et){if(it in g){let ct=g[it];return typeof ct=="function"?ct(...et):ct}let ot=new Error(`Tried to handle "${it}" but there is no handler defined. Only defined handlers are: ${Object.keys(g).map(ct=>`"${ct}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(ot,u$4),ot}var O$3=(it=>(it[it.None=0]="None",it[it.RenderStrategy=1]="RenderStrategy",it[it.Static=2]="Static",it))(O$3||{}),A$1=(it=>(it[it.Unmount=0]="Unmount",it[it.Hidden=1]="Hidden",it))(A$1||{});function L$1(){let it=U$2();return reactExports.useCallback(g=>C$3({mergeRefs:it,...g}),[it])}function C$3({ourProps:it,theirProps:g,slot:et,defaultTag:ot,features:ct,visible:ut=!0,name:dt,mergeRefs:ft}){ft=ft??$$1;let St=P$1(g,it);if(ut)return F$1(St,et,ot,dt,ft);let kt=ct??0;if(kt&2){let{static:Tt=!1,...Rt}=St;if(Tt)return F$1(Rt,et,ot,dt,ft)}if(kt&1){let{unmount:Tt=!0,...Rt}=St;return u$4(Tt?0:1,{0(){return null},1(){return F$1({...Rt,hidden:!0,style:{display:"none"}},et,ot,dt,ft)}})}return F$1(St,et,ot,dt,ft)}function F$1(it,g={},et,ot,ct){let{as:ut=et,children:dt,refName:ft="ref",...St}=h$3(it,["unmount","static"]),kt=it.ref!==void 0?{[ft]:it.ref}:{},Tt=typeof dt=="function"?dt(g):dt;"className"in St&&St.className&&typeof St.className=="function"&&(St.className=St.className(g)),St["aria-labelledby"]&&St["aria-labelledby"]===St.id&&(St["aria-labelledby"]=void 0);let Rt={};if(g){let jt=!1,$t=[];for(let[Ft,Ht]of Object.entries(g))typeof Ht=="boolean"&&(jt=!0),Ht===!0&&$t.push(Ft.replace(/([A-Z])/g,Kt=>`-${Kt.toLowerCase()}`));if(jt){Rt["data-headlessui-state"]=$t.join(" ");for(let Ft of $t)Rt[`data-${Ft}`]=""}}if(ut===reactExports.Fragment&&(Object.keys(m$4(St)).length>0||Object.keys(m$4(Rt)).length>0))if(!reactExports.isValidElement(Tt)||Array.isArray(Tt)&&Tt.length>1){if(Object.keys(m$4(St)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${ot} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$4(St)).concat(Object.keys(m$4(Rt))).map(jt=>`  - ${jt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(jt=>`  - ${jt}`).join(`
`)].join(`
`))}else{let jt=Tt.props,$t=jt==null?void 0:jt.className,Ft=typeof $t=="function"?(...Bt)=>t$3($t(...Bt),St.className):t$3($t,St.className),Ht=Ft?{className:Ft}:{},Kt=P$1(Tt.props,m$4(h$3(St,["ref"])));for(let Bt in Rt)Bt in Kt&&delete Rt[Bt];return reactExports.cloneElement(Tt,Object.assign({},Kt,Rt,kt,{ref:ct(H$2(Tt),kt.ref)},Ht))}return reactExports.createElement(ut,Object.assign({},h$3(St,["ref"]),ut!==reactExports.Fragment&&kt,ut!==reactExports.Fragment&&Rt),Tt)}function U$2(){let it=reactExports.useRef([]),g=reactExports.useCallback(et=>{for(let ot of it.current)ot!=null&&(typeof ot=="function"?ot(et):ot.current=et)},[]);return(...et)=>{if(!et.every(ot=>ot==null))return it.current=et,g}}function $$1(...it){return it.every(g=>g==null)?void 0:g=>{for(let et of it)et!=null&&(typeof et=="function"?et(g):et.current=g)}}function P$1(...it){if(it.length===0)return{};if(it.length===1)return it[0];let g={},et={};for(let ot of it)for(let ct in ot)ct.startsWith("on")&&typeof ot[ct]=="function"?(et[ct]!=null||(et[ct]=[]),et[ct].push(ot[ct])):g[ct]=ot[ct];if(g.disabled||g["aria-disabled"])for(let ot in et)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(ot)&&(et[ot]=[ct=>{var ut;return(ut=ct==null?void 0:ct.preventDefault)==null?void 0:ut.call(ct)}]);for(let ot in et)Object.assign(g,{[ot](ct,...ut){let dt=et[ot];for(let ft of dt){if((ct instanceof Event||(ct==null?void 0:ct.nativeEvent)instanceof Event)&&ct.defaultPrevented)return;ft(ct,...ut)}}});return g}function K(it){var g;return Object.assign(reactExports.forwardRef(it),{displayName:(g=it.displayName)!=null?g:it.name})}function m$4(it){let g=Object.assign({},it);for(let et in g)g[et]===void 0&&delete g[et];return g}function h$3(it,g=[]){let et=Object.assign({},it);for(let ot of g)ot in et&&delete et[ot];return et}function H$2(it){return React4.version.split(".")[0]>="19"?it.props.ref:it.ref}let a$9="span";var s$3=(it=>(it[it.None=1]="None",it[it.Focusable=2]="Focusable",it[it.Hidden=4]="Hidden",it))(s$3||{});function l$2(it,g){var et;let{features:ot=1,...ct}=it,ut={ref:g,"aria-hidden":(ot&2)===2?!0:(et=ct["aria-hidden"])!=null?et:void 0,hidden:(ot&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(ot&4)===4&&(ot&2)!==2&&{display:"none"}}};return L$1()({ourProps:ut,theirProps:ct,slot:{},defaultTag:a$9,name:"Hidden"})}let f$6=K(l$2),u$3=Symbol();function T$2(it,g=!0){return Object.assign(it,{[u$3]:g})}function y$3(...it){let g=reactExports.useRef(it);reactExports.useEffect(()=>{g.current=it},[it]);let et=o$2(ot=>{for(let ct of g.current)ct!=null&&(typeof ct=="function"?ct(ot):ct.current=ot)});return it.every(ot=>ot==null||(ot==null?void 0:ot[u$3]))?void 0:et}let a$8=reactExports.createContext(null);a$8.displayName="DescriptionContext";function f$5(){let it=reactExports.useContext(a$8);if(it===null){let g=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(g,f$5),g}return it}function w$3(){let[it,g]=reactExports.useState([]);return[it.length>0?it.join(" "):void 0,reactExports.useMemo(()=>function(et){let ot=o$2(ut=>(g(dt=>[...dt,ut]),()=>g(dt=>{let ft=dt.slice(),St=ft.indexOf(ut);return St!==-1&&ft.splice(St,1),ft}))),ct=reactExports.useMemo(()=>({register:ot,slot:et.slot,name:et.name,props:et.props,value:et.value}),[ot,et.slot,et.name,et.props,et.value]);return React4.createElement(a$8.Provider,{value:ct},et.children)},[g])]}let S$2="p";function C$2(it,g){let et=reactExports.useId(),ot=a$a(),{id:ct=`headlessui-description-${et}`,...ut}=it,dt=f$5(),ft=y$3(g);n$3(()=>dt.register(ct),[ct,dt.register]);let St=ot||!1,kt=reactExports.useMemo(()=>({...dt.slot,disabled:St}),[dt.slot,St]),Tt={ref:ft,...dt.props,id:ct};return L$1()({ourProps:Tt,theirProps:ut,slot:kt,defaultTag:S$2,name:dt.name||"Description"})}let _$1=K(C$2),H$1=Object.assign(_$1,{});var o$1=(it=>(it.Space=" ",it.Enter="Enter",it.Escape="Escape",it.Backspace="Backspace",it.Delete="Delete",it.ArrowLeft="ArrowLeft",it.ArrowUp="ArrowUp",it.ArrowRight="ArrowRight",it.ArrowDown="ArrowDown",it.Home="Home",it.End="End",it.PageUp="PageUp",it.PageDown="PageDown",it.Tab="Tab",it))(o$1||{});let e$2=reactExports.createContext(()=>{});function C$1({value:it,children:g}){return React4.createElement(e$2.Provider,{value:it},g)}let a$7=class extends Map{constructor(g){super(),this.factory=g}get(g){let et=super.get(g);return et===void 0&&(et=this.factory(g),this.set(g,et)),et}};function a$6(it,g){let et=it(),ot=new Set;return{getSnapshot(){return et},subscribe(ct){return ot.add(ct),()=>ot.delete(ct)},dispatch(ct,...ut){let dt=g[ct].call(et,...ut);dt&&(et=dt,ot.forEach(ft=>ft()))}}}function o(it){return reactExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getSnapshot)}let p$1=new a$7(()=>a$6(()=>[],{ADD(it){return this.includes(it)?this:[...this,it]},REMOVE(it){let g=this.indexOf(it);if(g===-1)return this;let et=this.slice();return et.splice(g,1),et}}));function x$2(it,g){let et=p$1.get(g),ot=reactExports.useId(),ct=o(et);if(n$3(()=>{if(it)return et.dispatch("ADD",ot),()=>et.dispatch("REMOVE",ot)},[et,it]),!it)return!1;let ut=ct.indexOf(ot),dt=ct.length;return ut===-1&&(ut=dt,dt+=1),ut===dt-1}let f$4=new Map,u$2=new Map;function h$2(it){var g;let et=(g=u$2.get(it))!=null?g:0;return u$2.set(it,et+1),et!==0?()=>m$3(it):(f$4.set(it,{"aria-hidden":it.getAttribute("aria-hidden"),inert:it.inert}),it.setAttribute("aria-hidden","true"),it.inert=!0,()=>m$3(it))}function m$3(it){var g;let et=(g=u$2.get(it))!=null?g:1;if(et===1?u$2.delete(it):u$2.set(it,et-1),et!==1)return;let ot=f$4.get(it);ot&&(ot["aria-hidden"]===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",ot["aria-hidden"]),it.inert=ot.inert,f$4.delete(it))}function y$2(it,{allowed:g,disallowed:et}={}){let ot=x$2(it,"inert-others");n$3(()=>{var ct,ut;if(!ot)return;let dt=o$3();for(let St of(ct=et==null?void 0:et())!=null?ct:[])St&&dt.add(h$2(St));let ft=(ut=g==null?void 0:g())!=null?ut:[];for(let St of ft){if(!St)continue;let kt=u$5(St);if(!kt)continue;let Tt=St.parentElement;for(;Tt&&Tt!==kt.body;){for(let Rt of Tt.children)ft.some(jt=>Rt.contains(jt))||dt.add(h$2(Rt));Tt=Tt.parentElement}}return dt.dispose},[ot,g,et])}function m$2(it,g,et){let ot=s$4(ct=>{let ut=ct.getBoundingClientRect();ut.x===0&&ut.y===0&&ut.width===0&&ut.height===0&&et()});reactExports.useEffect(()=>{if(!it)return;let ct=g===null?null:g instanceof HTMLElement?g:g.current;if(!ct)return;let ut=o$3();if(typeof ResizeObserver<"u"){let dt=new ResizeObserver(()=>ot.current(ct));dt.observe(ct),ut.add(()=>dt.disconnect())}if(typeof IntersectionObserver<"u"){let dt=new IntersectionObserver(()=>ot.current(ct));dt.observe(ct),ut.add(()=>dt.disconnect())}return()=>ut.dispose()},[g,ot,it])}let f$3=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(it=>`${it}:not([tabindex='-1'])`).join(","),p=["[data-autofocus]"].map(it=>`${it}:not([tabindex='-1'])`).join(",");var F=(it=>(it[it.First=1]="First",it[it.Previous=2]="Previous",it[it.Next=4]="Next",it[it.Last=8]="Last",it[it.WrapAround=16]="WrapAround",it[it.NoScroll=32]="NoScroll",it[it.AutoFocus=64]="AutoFocus",it))(F||{}),T$1=(it=>(it[it.Error=0]="Error",it[it.Overflow=1]="Overflow",it[it.Success=2]="Success",it[it.Underflow=3]="Underflow",it))(T$1||{}),y$1=(it=>(it[it.Previous=-1]="Previous",it[it.Next=1]="Next",it))(y$1||{});function b$2(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(f$3)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}function S$1(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(p)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}var h$1=(it=>(it[it.Strict=0]="Strict",it[it.Loose=1]="Loose",it))(h$1||{});function A(it,g=0){var et;return it===((et=u$5(it))==null?void 0:et.body)?!1:u$4(g,{0(){return it.matches(f$3)},1(){let ot=it;for(;ot!==null;){if(ot.matches(f$3))return!0;ot=ot.parentElement}return!1}})}var H=(it=>(it[it.Keyboard=0]="Keyboard",it[it.Mouse=1]="Mouse",it))(H||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",it=>{it.metaKey||it.altKey||it.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",it=>{it.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:it.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function I$2(it){it==null||it.focus({preventScroll:!0})}let w$2=["textarea","input"].join(",");function O$2(it){var g,et;return(et=(g=it==null?void 0:it.matches)==null?void 0:g.call(it,w$2))!=null?et:!1}function _(it,g=et=>et){return it.slice().sort((et,ot)=>{let ct=g(et),ut=g(ot);if(ct===null||ut===null)return 0;let dt=ct.compareDocumentPosition(ut);return dt&Node.DOCUMENT_POSITION_FOLLOWING?-1:dt&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function P(it,g,{sorted:et=!0,relativeTo:ot=null,skipElements:ct=[]}={}){let ut=Array.isArray(it)?it.length>0?it[0].ownerDocument:document:it.ownerDocument,dt=Array.isArray(it)?et?_(it):it:g&64?S$1(it):b$2(it);ct.length>0&&dt.length>1&&(dt=dt.filter($t=>!ct.some(Ft=>Ft!=null&&"current"in Ft?(Ft==null?void 0:Ft.current)===$t:Ft===$t))),ot=ot??ut.activeElement;let ft=(()=>{if(g&5)return 1;if(g&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),St=(()=>{if(g&1)return 0;if(g&2)return Math.max(0,dt.indexOf(ot))-1;if(g&4)return Math.max(0,dt.indexOf(ot))+1;if(g&8)return dt.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),kt=g&32?{preventScroll:!0}:{},Tt=0,Rt=dt.length,jt;do{if(Tt>=Rt||Tt+Rt<=0)return 0;let $t=St+Tt;if(g&16)$t=($t+Rt)%Rt;else{if($t<0)return 3;if($t>=Rt)return 1}jt=dt[$t],jt==null||jt.focus(kt),Tt+=ft}while(jt!==ut.activeElement);return g&6&&O$2(jt)&&jt.select(),2}function t$2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$3(){return/Android/gi.test(window.navigator.userAgent)}function n$2(){return t$2()||i$3()}function i$2(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ut(dt){ct.current(dt)}return document.addEventListener(g,ut,ot),()=>document.removeEventListener(g,ut,ot)},[it,g,ot])}function s$2(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ut(dt){ct.current(dt)}return window.addEventListener(g,ut,ot),()=>window.removeEventListener(g,ut,ot)},[it,g,ot])}const E$1=30;function R$2(it,g,et){let ot=x$2(it,"outside-click"),ct=s$4(et),ut=reactExports.useCallback(function(St,kt){if(St.defaultPrevented)return;let Tt=kt(St);if(Tt===null||!Tt.getRootNode().contains(Tt)||!Tt.isConnected)return;let Rt=function jt($t){return typeof $t=="function"?jt($t()):Array.isArray($t)||$t instanceof Set?$t:[$t]}(g);for(let jt of Rt)if(jt!==null&&(jt.contains(Tt)||St.composed&&St.composedPath().includes(jt)))return;return!A(Tt,h$1.Loose)&&Tt.tabIndex!==-1&&St.preventDefault(),ct.current(St,Tt)},[ct,g]),dt=reactExports.useRef(null);i$2(ot,"pointerdown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$2(ot,"mousedown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$2(ot,"click",St=>{n$2()||dt.current&&(ut(St,()=>dt.current),dt.current=null)},!0);let ft=reactExports.useRef({x:0,y:0});i$2(ot,"touchstart",St=>{ft.current.x=St.touches[0].clientX,ft.current.y=St.touches[0].clientY},!0),i$2(ot,"touchend",St=>{let kt={x:St.changedTouches[0].clientX,y:St.changedTouches[0].clientY};if(!(Math.abs(kt.x-ft.current.x)>=E$1||Math.abs(kt.y-ft.current.y)>=E$1))return ut(St,()=>St.target instanceof HTMLElement?St.target:null)},!0),s$2(ot,"blur",St=>ut(St,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$1(...it){return reactExports.useMemo(()=>u$5(...it),[...it])}function E(it,g,et,ot){let ct=s$4(et);reactExports.useEffect(()=>{it=it??window;function ut(dt){ct.current(dt)}return it.addEventListener(g,ut,ot),()=>it.removeEventListener(g,ut,ot)},[it,g,ot])}function d$1(){let it;return{before({doc:g}){var et;let ot=g.documentElement,ct=(et=g.defaultView)!=null?et:window;it=Math.max(0,ct.innerWidth-ot.clientWidth)},after({doc:g,d:et}){let ot=g.documentElement,ct=Math.max(0,ot.clientWidth-ot.offsetWidth),ut=Math.max(0,it-ct);et.style(ot,"paddingRight",`${ut}px`)}}}function d(){return t$2()?{before({doc:it,d:g,meta:et}){function ot(ct){return et.containers.flatMap(ut=>ut()).some(ut=>ut.contains(ct))}g.microTask(()=>{var ct;if(window.getComputedStyle(it.documentElement).scrollBehavior!=="auto"){let ft=o$3();ft.style(it.documentElement,"scrollBehavior","auto"),g.add(()=>g.microTask(()=>ft.dispose()))}let ut=(ct=window.scrollY)!=null?ct:window.pageYOffset,dt=null;g.addEventListener(it,"click",ft=>{if(ft.target instanceof HTMLElement)try{let St=ft.target.closest("a");if(!St)return;let{hash:kt}=new URL(St.href),Tt=it.querySelector(kt);Tt&&!ot(Tt)&&(dt=Tt)}catch{}},!0),g.addEventListener(it,"touchstart",ft=>{if(ft.target instanceof HTMLElement)if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&ot(St.parentElement);)St=St.parentElement;g.style(St,"overscrollBehavior","contain")}else g.style(ft.target,"touchAction","none")}),g.addEventListener(it,"touchmove",ft=>{if(ft.target instanceof HTMLElement){if(ft.target.tagName==="INPUT")return;if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&St.dataset.headlessuiPortal!==""&&!(St.scrollHeight>St.clientHeight||St.scrollWidth>St.clientWidth);)St=St.parentElement;St.dataset.headlessuiPortal===""&&ft.preventDefault()}else ft.preventDefault()}},{passive:!1}),g.add(()=>{var ft;let St=(ft=window.scrollY)!=null?ft:window.pageYOffset;ut!==St&&window.scrollTo(0,ut),dt&&dt.isConnected&&(dt.scrollIntoView({block:"nearest"}),dt=null)})})}}:{}}function r$1(){return{before({doc:it,d:g}){g.style(it.documentElement,"overflow","hidden")}}}function m$1(it){let g={};for(let et of it)Object.assign(g,et(g));return g}let a$5=a$6(()=>new Map,{PUSH(it,g){var et;let ot=(et=this.get(it))!=null?et:{doc:it,count:0,d:o$3(),meta:new Set};return ot.count++,ot.meta.add(g),this.set(it,ot),this},POP(it,g){let et=this.get(it);return et&&(et.count--,et.meta.delete(g)),this},SCROLL_PREVENT({doc:it,d:g,meta:et}){let ot={doc:it,d:g,meta:m$1(et)},ct=[d(),d$1(),r$1()];ct.forEach(({before:ut})=>ut==null?void 0:ut(ot)),ct.forEach(({after:ut})=>ut==null?void 0:ut(ot))},SCROLL_ALLOW({d:it}){it.dispose()},TEARDOWN({doc:it}){this.delete(it)}});a$5.subscribe(()=>{let it=a$5.getSnapshot(),g=new Map;for(let[et]of it)g.set(et,et.documentElement.style.overflow);for(let et of it.values()){let ot=g.get(et.doc)==="hidden",ct=et.count!==0;(ct&&!ot||!ct&&ot)&&a$5.dispatch(et.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",et),et.count===0&&a$5.dispatch("TEARDOWN",et)}});function a$4(it,g,et=()=>({containers:[]})){let ot=o(a$5),ct=g?ot.get(g):void 0,ut=ct?ct.count>0:!1;return n$3(()=>{if(!(!g||!it))return a$5.dispatch("PUSH",g,et),()=>a$5.dispatch("POP",g,et)},[it,g]),ut}function f$2(it,g,et=()=>[document.body]){let ot=x$2(it,"scroll-lock");a$4(ot,g,ct=>{var ut;return{containers:[...(ut=ct.containers)!=null?ut:[],et]}})}function c$2(it=0){let[g,et]=reactExports.useState(it),ot=reactExports.useCallback(St=>et(St),[g]),ct=reactExports.useCallback(St=>et(kt=>kt|St),[g]),ut=reactExports.useCallback(St=>(g&St)===St,[g]),dt=reactExports.useCallback(St=>et(kt=>kt&~St),[et]),ft=reactExports.useCallback(St=>et(kt=>kt^St),[et]);return{flags:g,setFlag:ot,addFlag:ct,hasFlag:ut,removeFlag:dt,toggleFlag:ft}}var T,b$1;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((T=process==null?void 0:process.env)==null?void 0:T.NODE_ENV)==="test"&&typeof((b$1=Element==null?void 0:Element.prototype)==null?void 0:b$1.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var L=(it=>(it[it.None=0]="None",it[it.Closed=1]="Closed",it[it.Enter=2]="Enter",it[it.Leave=4]="Leave",it))(L||{});function R$1(it){let g={};for(let et in it)it[et]===!0&&(g[`data-${et}`]="");return g}function x$1(it,g,et,ot){let[ct,ut]=reactExports.useState(et),{hasFlag:dt,addFlag:ft,removeFlag:St}=c$2(it&&ct?3:0),kt=reactExports.useRef(!1),Tt=reactExports.useRef(!1),Rt=p$2();return n$3(()=>{var jt;if(it){if(et&&ut(!0),!g){et&&ft(3);return}return(jt=ot==null?void 0:ot.start)==null||jt.call(ot,et),C(g,{inFlight:kt,prepare(){Tt.current?Tt.current=!1:Tt.current=kt.current,kt.current=!0,!Tt.current&&(et?(ft(3),St(4)):(ft(4),St(2)))},run(){Tt.current?et?(St(3),ft(4)):(St(4),ft(3)):et?St(1):ft(1)},done(){var $t;Tt.current&&typeof g.getAnimations=="function"&&g.getAnimations().length>0||(kt.current=!1,St(7),et||ut(!1),($t=ot==null?void 0:ot.end)==null||$t.call(ot,et))}})}},[it,et,g,Rt]),it?[ct,{closed:dt(1),enter:dt(2),leave:dt(4),transition:dt(2)||dt(4)}]:[et,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function C(it,{prepare:g,run:et,done:ot,inFlight:ct}){let ut=o$3();return j$1(it,{prepare:g,inFlight:ct}),ut.nextFrame(()=>{et(),ut.requestAnimationFrame(()=>{ut.add(M$2(it,ot))})}),ut.dispose}function M$2(it,g){var et,ot;let ct=o$3();if(!it)return ct.dispose;let ut=!1;ct.add(()=>{ut=!0});let dt=(ot=(et=it.getAnimations)==null?void 0:et.call(it).filter(ft=>ft instanceof CSSTransition))!=null?ot:[];return dt.length===0?(g(),ct.dispose):(Promise.allSettled(dt.map(ft=>ft.finished)).then(()=>{ut||g()}),ct.dispose)}function j$1(it,{inFlight:g,prepare:et}){if(g!=null&&g.current){et();return}let ot=it.style.transition;it.style.transition="none",et(),it.offsetHeight,it.style.transition=ot}function m(it,g){let et=reactExports.useRef([]),ot=o$2(it);reactExports.useEffect(()=>{let ct=[...et.current];for(let[ut,dt]of g.entries())if(et.current[ut]!==dt){let ft=ot(g,ct);return et.current=g,ft}},[ot,...g])}let n=reactExports.createContext(null);n.displayName="OpenClosedContext";var i$1=(it=>(it[it.Open=1]="Open",it[it.Closed=2]="Closed",it[it.Closing=4]="Closing",it[it.Opening=8]="Opening",it))(i$1||{});function u$1(){return reactExports.useContext(n)}function c$1({value:it,children:g}){return React4.createElement(n.Provider,{value:it},g)}function s$1({children:it}){return React4.createElement(n.Provider,{value:null},it)}function t$1(it){function g(){document.readyState!=="loading"&&(it(),document.removeEventListener("DOMContentLoaded",g))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",g),g())}let r=[];t$1(()=>{function it(g){if(!(g.target instanceof HTMLElement)||g.target===document.body||r[0]===g.target)return;let et=g.target;et=et.closest(f$3),r.unshift(et??g.target),r=r.filter(ot=>ot!=null&&ot.isConnected),r.splice(10)}window.addEventListener("click",it,{capture:!0}),window.addEventListener("mousedown",it,{capture:!0}),window.addEventListener("focus",it,{capture:!0}),document.body.addEventListener("click",it,{capture:!0}),document.body.addEventListener("mousedown",it,{capture:!0}),document.body.addEventListener("focus",it,{capture:!0})});function c(it){let g=o$2(it),et=reactExports.useRef(!1);reactExports.useEffect(()=>(et.current=!1,()=>{et.current=!0,t$4(()=>{et.current&&g()})}),[g])}function s(){let it=typeof document>"u";return"useSyncExternalStore"in t$5?(g=>g.useSyncExternalStore)(t$5)(()=>()=>{},()=>!1,()=>!it):!1}function l$1(){let it=s(),[g,et]=reactExports.useState(s$5.isHandoffComplete);return g&&s$5.isHandoffComplete===!1&&et(!1),reactExports.useEffect(()=>{g!==!0&&et(!0)},[g]),reactExports.useEffect(()=>s$5.handoff(),[]),it?!1:g}let e$1=reactExports.createContext(!1);function a$3(){return reactExports.useContext(e$1)}function l(it){return React4.createElement(e$1.Provider,{value:it.force},it.children)}function N(it){let g=a$3(),et=reactExports.useContext(v),ot=n$1(it),[ct,ut]=reactExports.useState(()=>{var dt;if(!g&&et!==null)return(dt=et.current)!=null?dt:null;if(s$5.isServer)return null;let ft=ot==null?void 0:ot.getElementById("headlessui-portal-root");if(ft)return ft;if(ot===null)return null;let St=ot.createElement("div");return St.setAttribute("id","headlessui-portal-root"),ot.body.appendChild(St)});return reactExports.useEffect(()=>{ct!==null&&(ot!=null&&ot.body.contains(ct)||ot==null||ot.body.appendChild(ct))},[ct,ot]),reactExports.useEffect(()=>{g||et!==null&&ut(et.current)},[et,ut,g]),ct}let M$1=reactExports.Fragment,S=K(function(it,g){let et=it,ot=reactExports.useRef(null),ct=y$3(T$2(Rt=>{ot.current=Rt}),g),ut=n$1(ot),dt=N(ot),[ft]=reactExports.useState(()=>{var Rt;return s$5.isServer?null:(Rt=ut==null?void 0:ut.createElement("div"))!=null?Rt:null}),St=reactExports.useContext(y),kt=l$1();n$3(()=>{!dt||!ft||dt.contains(ft)||(ft.setAttribute("data-headlessui-portal",""),dt.appendChild(ft))},[dt,ft]),n$3(()=>{if(ft&&St)return St.register(ft)},[St,ft]),c(()=>{var Rt;!dt||!ft||(ft instanceof Node&&dt.contains(ft)&&dt.removeChild(ft),dt.childNodes.length<=0&&((Rt=dt.parentElement)==null||Rt.removeChild(dt)))});let Tt=L$1();return kt?!dt||!ft?null:reactDomExports.createPortal(Tt({ourProps:{ref:ct},theirProps:et,slot:{},defaultTag:M$1,name:"Portal"}),ft):null});function j(it,g){let et=y$3(g),{enabled:ot=!0,...ct}=it,ut=L$1();return ot?React4.createElement(S,{...ct,ref:et}):ut({ourProps:{ref:et},theirProps:ct,slot:{},defaultTag:M$1,name:"Portal"})}let W=reactExports.Fragment,v=reactExports.createContext(null);function I$1(it,g){let{target:et,...ot}=it,ct={ref:y$3(g)},ut=L$1();return React4.createElement(v.Provider,{value:et},ut({ourProps:ct,theirProps:ot,defaultTag:W,name:"Popover.Group"}))}let y=reactExports.createContext(null);function te$1(){let it=reactExports.useContext(y),g=reactExports.useRef([]),et=o$2(ut=>(g.current.push(ut),it&&it.register(ut),()=>ot(ut))),ot=o$2(ut=>{let dt=g.current.indexOf(ut);dt!==-1&&g.current.splice(dt,1),it&&it.unregister(ut)}),ct=reactExports.useMemo(()=>({register:et,unregister:ot,portals:g}),[et,ot,g]);return[g,reactExports.useMemo(()=>function({children:ut}){return React4.createElement(y.Provider,{value:ct},ut)},[ct])]}let J=K(j),X$1=K(I$1),re$1=Object.assign(J,{Group:X$1});function a$2(it,g=typeof document<"u"?document.defaultView:null,et){let ot=x$2(it,"escape");E(g,"keydown",ct=>{ot&&(ct.defaultPrevented||ct.key===o$1.Escape&&et(ct))})}function f$1(){var it;let[g]=reactExports.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[et,ot]=reactExports.useState((it=g==null?void 0:g.matches)!=null?it:!1);return n$3(()=>{if(!g)return;function ct(ut){ot(ut.matches)}return g.addEventListener("change",ct),()=>g.removeEventListener("change",ct)},[g]),et}function R({defaultContainers:it=[],portals:g,mainTreeNode:et}={}){let ot=n$1(et),ct=o$2(()=>{var ut,dt;let ft=[];for(let St of it)St!==null&&(St instanceof HTMLElement?ft.push(St):"current"in St&&St.current instanceof HTMLElement&&ft.push(St.current));if(g!=null&&g.current)for(let St of g.current)ft.push(St);for(let St of(ut=ot==null?void 0:ot.querySelectorAll("html > *, body > *"))!=null?ut:[])St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St.id!=="headlessui-portal-root"&&(et&&(St.contains(et)||St.contains((dt=et==null?void 0:et.getRootNode())==null?void 0:dt.host))||ft.some(kt=>St.contains(kt))||ft.push(St));return ft});return{resolveContainers:ct,contains:o$2(ut=>ct().some(dt=>dt.contains(ut)))}}let a$1=reactExports.createContext(null);function O$1({children:it,node:g}){let[et,ot]=reactExports.useState(null),ct=b(g??et);return React4.createElement(a$1.Provider,{value:ct},it,ct===null&&React4.createElement(f$6,{features:s$3.Hidden,ref:ut=>{var dt,ft;if(ut){for(let St of(ft=(dt=u$5(ut))==null?void 0:dt.querySelectorAll("html > *, body > *"))!=null?ft:[])if(St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St!=null&&St.contains(ut)){ot(St);break}}}}))}function b(it=null){var g;return(g=reactExports.useContext(a$1))!=null?g:it}function f(){let it=reactExports.useRef(!1);return n$3(()=>(it.current=!0,()=>{it.current=!1}),[]),it}var a=(it=>(it[it.Forwards=0]="Forwards",it[it.Backwards=1]="Backwards",it))(a||{});function u(){let it=reactExports.useRef(0);return s$2(!0,"keydown",g=>{g.key==="Tab"&&(it.current=g.shiftKey?1:0)},!0),it}function U$1(it){if(!it)return new Set;if(typeof it=="function")return new Set(it());let g=new Set;for(let et of it.current)et.current instanceof HTMLElement&&g.add(et.current);return g}let Z="div";var x=(it=>(it[it.None=0]="None",it[it.InitialFocus=1]="InitialFocus",it[it.TabLock=2]="TabLock",it[it.FocusLock=4]="FocusLock",it[it.RestoreFocus=8]="RestoreFocus",it[it.AutoFocus=16]="AutoFocus",it))(x||{});function $(it,g){let et=reactExports.useRef(null),ot=y$3(et,g),{initialFocus:ct,initialFocusFallback:ut,containers:dt,features:ft=15,...St}=it;l$1()||(ft=0);let kt=n$1(et);ee(ft,{ownerDocument:kt});let Tt=te(ft,{ownerDocument:kt,container:et,initialFocus:ct,initialFocusFallback:ut});re(ft,{ownerDocument:kt,container:et,containers:dt,previousActiveElement:Tt});let Rt=u(),jt=o$2(Ut=>{let Yt=et.current;Yt&&(Jt=>Jt())(()=>{u$4(Rt.current,{[a.Forwards]:()=>{P(Yt,F.First,{skipElements:[Ut.relatedTarget,ut]})},[a.Backwards]:()=>{P(Yt,F.Last,{skipElements:[Ut.relatedTarget,ut]})}})})}),$t=x$2(!!(ft&2),"focus-trap#tab-lock"),Ft=p$2(),Ht=reactExports.useRef(!1),Kt={ref:ot,onKeyDown(Ut){Ut.key=="Tab"&&(Ht.current=!0,Ft.requestAnimationFrame(()=>{Ht.current=!1}))},onBlur(Ut){if(!(ft&4))return;let Yt=U$1(dt);et.current instanceof HTMLElement&&Yt.add(et.current);let Jt=Ut.relatedTarget;Jt instanceof HTMLElement&&Jt.dataset.headlessuiFocusGuard!=="true"&&(I(Yt,Jt)||(Ht.current?P(et.current,u$4(Rt.current,{[a.Forwards]:()=>F.Next,[a.Backwards]:()=>F.Previous})|F.WrapAround,{relativeTo:Ut.target}):Ut.target instanceof HTMLElement&&I$2(Ut.target)))}},Bt=L$1();return React4.createElement(React4.Fragment,null,$t&&React4.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:jt,features:s$3.Focusable}),Bt({ourProps:Kt,theirProps:St,defaultTag:Z,name:"FocusTrap"}),$t&&React4.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:jt,features:s$3.Focusable}))}let D=K($),ye=Object.assign(D,{features:x});function w$1(it=!0){let g=reactExports.useRef(r.slice());return m(([et],[ot])=>{ot===!0&&et===!1&&t$4(()=>{g.current.splice(0)}),ot===!1&&et===!0&&(g.current=r.slice())},[it,r,g]),o$2(()=>{var et;return(et=g.current.find(ot=>ot!=null&&ot.isConnected))!=null?et:null})}function ee(it,{ownerDocument:g}){let et=!!(it&8),ot=w$1(et);m(()=>{et||(g==null?void 0:g.activeElement)===(g==null?void 0:g.body)&&I$2(ot())},[et]),c(()=>{et&&I$2(ot())})}function te(it,{ownerDocument:g,container:et,initialFocus:ot,initialFocusFallback:ct}){let ut=reactExports.useRef(null),dt=x$2(!!(it&1),"focus-trap#initial-focus"),ft=f();return m(()=>{if(it===0)return;if(!dt){ct!=null&&ct.current&&I$2(ct.current);return}let St=et.current;St&&t$4(()=>{if(!ft.current)return;let kt=g==null?void 0:g.activeElement;if(ot!=null&&ot.current){if((ot==null?void 0:ot.current)===kt){ut.current=kt;return}}else if(St.contains(kt)){ut.current=kt;return}if(ot!=null&&ot.current)I$2(ot.current);else{if(it&16){if(P(St,F.First|F.AutoFocus)!==T$1.Error)return}else if(P(St,F.First)!==T$1.Error)return;if(ct!=null&&ct.current&&(I$2(ct.current),(g==null?void 0:g.activeElement)===ct.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}ut.current=g==null?void 0:g.activeElement})},[ct,dt,it]),ut}function re(it,{ownerDocument:g,container:et,containers:ot,previousActiveElement:ct}){let ut=f(),dt=!!(it&4);E(g==null?void 0:g.defaultView,"focus",ft=>{if(!dt||!ut.current)return;let St=U$1(ot);et.current instanceof HTMLElement&&St.add(et.current);let kt=ct.current;if(!kt)return;let Tt=ft.target;Tt&&Tt instanceof HTMLElement?I(St,Tt)?(ct.current=Tt,I$2(Tt)):(ft.preventDefault(),ft.stopPropagation(),I$2(kt)):I$2(ct.current)},!0)}function I(it,g){for(let et of it)if(et.contains(g))return!0;return!1}function ue(it){var g;return!!(it.enter||it.enterFrom||it.enterTo||it.leave||it.leaveFrom||it.leaveTo)||((g=it.as)!=null?g:de)!==reactExports.Fragment||React4.Children.count(it.children)===1}let w=reactExports.createContext(null);w.displayName="TransitionContext";var _e=(it=>(it.Visible="visible",it.Hidden="hidden",it))(_e||{});function De(){let it=reactExports.useContext(w);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}function He$1(){let it=reactExports.useContext(M);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}let M=reactExports.createContext(null);M.displayName="NestingContext";function U(it){return"children"in it?U(it.children):it.current.filter(({el:g})=>g.current!==null).filter(({state:g})=>g==="visible").length>0}function Te(it,g){let et=s$4(it),ot=reactExports.useRef([]),ct=f(),ut=p$2(),dt=o$2(($t,Ft=A$1.Hidden)=>{let Ht=ot.current.findIndex(({el:Kt})=>Kt===$t);Ht!==-1&&(u$4(Ft,{[A$1.Unmount](){ot.current.splice(Ht,1)},[A$1.Hidden](){ot.current[Ht].state="hidden"}}),ut.microTask(()=>{var Kt;!U(ot)&&ct.current&&((Kt=et.current)==null||Kt.call(et))}))}),ft=o$2($t=>{let Ft=ot.current.find(({el:Ht})=>Ht===$t);return Ft?Ft.state!=="visible"&&(Ft.state="visible"):ot.current.push({el:$t,state:"visible"}),()=>dt($t,A$1.Unmount)}),St=reactExports.useRef([]),kt=reactExports.useRef(Promise.resolve()),Tt=reactExports.useRef({enter:[],leave:[]}),Rt=o$2(($t,Ft,Ht)=>{St.current.splice(0),g&&(g.chains.current[Ft]=g.chains.current[Ft].filter(([Kt])=>Kt!==$t)),g==null||g.chains.current[Ft].push([$t,new Promise(Kt=>{St.current.push(Kt)})]),g==null||g.chains.current[Ft].push([$t,new Promise(Kt=>{Promise.all(Tt.current[Ft].map(([Bt,Ut])=>Ut)).then(()=>Kt())})]),Ft==="enter"?kt.current=kt.current.then(()=>g==null?void 0:g.wait.current).then(()=>Ht(Ft)):Ht(Ft)}),jt=o$2(($t,Ft,Ht)=>{Promise.all(Tt.current[Ft].splice(0).map(([Kt,Bt])=>Bt)).then(()=>{var Kt;(Kt=St.current.shift())==null||Kt()}).then(()=>Ht(Ft))});return reactExports.useMemo(()=>({children:ot,register:ft,unregister:dt,onStart:Rt,onStop:jt,wait:kt,chains:Tt}),[ft,dt,ot,Rt,jt,Tt,kt])}let de=reactExports.Fragment,fe=O$3.RenderStrategy;function Ae(it,g){var et,ot;let{transition:ct=!0,beforeEnter:ut,afterEnter:dt,beforeLeave:ft,afterLeave:St,enter:kt,enterFrom:Tt,enterTo:Rt,entered:jt,leave:$t,leaveFrom:Ft,leaveTo:Ht,...Kt}=it,[Bt,Ut]=reactExports.useState(null),Yt=reactExports.useRef(null),Jt=ue(it),Zt=y$3(...Jt?[Yt,g,Ut]:g===null?[]:[g]),en=(et=Kt.unmount)==null||et?A$1.Unmount:A$1.Hidden,{show:tn,appear:nn,initial:ln}=De(),[an,sn]=reactExports.useState(tn?"visible":"hidden"),dn=He$1(),{register:mn,unregister:yn}=dn;n$3(()=>mn(Yt),[mn,Yt]),n$3(()=>{if(en===A$1.Hidden&&Yt.current){if(tn&&an!=="visible"){sn("visible");return}return u$4(an,{hidden:()=>yn(Yt),visible:()=>mn(Yt)})}},[an,Yt,mn,yn,tn,en]);let vn=l$1();n$3(()=>{if(Jt&&vn&&an==="visible"&&Yt.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[Yt,an,vn,Jt]);let hn=ln&&!nn,pn=nn&&tn&&ln,rn=reactExports.useRef(!1),on=Te(()=>{rn.current||(sn("hidden"),yn(Yt))},dn),gn=o$2(An=>{rn.current=!0;let Cn=An?"enter":"leave";on.onStart(Yt,Cn,Tn=>{Tn==="enter"?ut==null||ut():Tn==="leave"&&(ft==null||ft())})}),un=o$2(An=>{let Cn=An?"enter":"leave";rn.current=!1,on.onStop(Yt,Cn,Tn=>{Tn==="enter"?dt==null||dt():Tn==="leave"&&(St==null||St())}),Cn==="leave"&&!U(on)&&(sn("hidden"),yn(Yt))});reactExports.useEffect(()=>{Jt&&ct||(gn(tn),un(tn))},[tn,Jt,ct]);let xn=(()=>!(!ct||!Jt||!vn||hn))(),[,En]=x$1(xn,Bt,tn,{start:gn,end:un}),wn=m$4({ref:Zt,className:((ot=t$3(Kt.className,pn&&kt,pn&&Tt,En.enter&&kt,En.enter&&En.closed&&Tt,En.enter&&!En.closed&&Rt,En.leave&&$t,En.leave&&!En.closed&&Ft,En.leave&&En.closed&&Ht,!En.transition&&tn&&jt))==null?void 0:ot.trim())||void 0,...R$1(En)}),kn=0;an==="visible"&&(kn|=i$1.Open),an==="hidden"&&(kn|=i$1.Closed),En.enter&&(kn|=i$1.Opening),En.leave&&(kn|=i$1.Closing);let Sn=L$1();return React4.createElement(M.Provider,{value:on},React4.createElement(c$1,{value:kn},Sn({ourProps:wn,theirProps:Kt,defaultTag:de,features:fe,visible:an==="visible",name:"Transition.Child"})))}function Ie$1(it,g){let{show:et,appear:ot=!1,unmount:ct=!0,...ut}=it,dt=reactExports.useRef(null),ft=ue(it),St=y$3(...ft?[dt,g]:g===null?[]:[g]);l$1();let kt=u$1();if(et===void 0&&kt!==null&&(et=(kt&i$1.Open)===i$1.Open),et===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Tt,Rt]=reactExports.useState(et?"visible":"hidden"),jt=Te(()=>{et||Rt("hidden")}),[$t,Ft]=reactExports.useState(!0),Ht=reactExports.useRef([et]);n$3(()=>{$t!==!1&&Ht.current[Ht.current.length-1]!==et&&(Ht.current.push(et),Ft(!1))},[Ht,et]);let Kt=reactExports.useMemo(()=>({show:et,appear:ot,initial:$t}),[et,ot,$t]);n$3(()=>{et?Rt("visible"):!U(jt)&&dt.current!==null&&Rt("hidden")},[et,jt]);let Bt={unmount:ct},Ut=o$2(()=>{var Zt;$t&&Ft(!1),(Zt=it.beforeEnter)==null||Zt.call(it)}),Yt=o$2(()=>{var Zt;$t&&Ft(!1),(Zt=it.beforeLeave)==null||Zt.call(it)}),Jt=L$1();return React4.createElement(M.Provider,{value:jt},React4.createElement(w.Provider,{value:Kt},Jt({ourProps:{...Bt,as:reactExports.Fragment,children:React4.createElement(me,{ref:St,...Bt,...ut,beforeEnter:Ut,beforeLeave:Yt})},theirProps:{},defaultTag:reactExports.Fragment,features:fe,visible:Tt==="visible",name:"Transition"})))}function Le(it,g){let et=reactExports.useContext(w)!==null,ot=u$1()!==null;return React4.createElement(React4.Fragment,null,!et&&ot?React4.createElement(X,{ref:g,...it}):React4.createElement(me,{ref:g,...it}))}let X=K(Ie$1),me=K(Ae),Fe=K(Le),ze=Object.assign(X,{Child:Fe,Root:X});var Oe=(it=>(it[it.Open=0]="Open",it[it.Closed=1]="Closed",it))(Oe||{}),he=(it=>(it[it.SetTitleId=0]="SetTitleId",it))(he||{});let Se={0(it,g){return it.titleId===g.id?it:{...it,titleId:g.id}}},k=reactExports.createContext(null);k.displayName="DialogContext";function O(it){let g=reactExports.useContext(k);if(g===null){let et=new Error(`<${it} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(et,O),et}return g}function Ie(it,g){return u$4(g.type,Se,it,g)}let V=K(function(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-${et}`,open:ct,onClose:ut,initialFocus:dt,role:ft="dialog",autoFocus:St=!0,__demoMode:kt=!1,unmount:Tt=!1,...Rt}=it,jt=reactExports.useRef(!1);ft=function(){return ft==="dialog"||ft==="alertdialog"?ft:(jt.current||(jt.current=!0,console.warn(`Invalid role [${ft}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let $t=u$1();ct===void 0&&$t!==null&&(ct=($t&i$1.Open)===i$1.Open);let Ft=reactExports.useRef(null),Ht=y$3(Ft,g),Kt=n$1(Ft),Bt=ct?0:1,[Ut,Yt]=reactExports.useReducer(Ie,{titleId:null,descriptionId:null,panelRef:reactExports.createRef()}),Jt=o$2(()=>ut(!1)),Zt=o$2(un=>Yt({type:0,id:un})),en=l$1()?Bt===0:!1,[tn,nn]=te$1(),ln={get current(){var un;return(un=Ut.panelRef.current)!=null?un:Ft.current}},an=b(),{resolveContainers:sn}=R({mainTreeNode:an,portals:tn,defaultContainers:[ln]}),dn=$t!==null?($t&i$1.Closing)===i$1.Closing:!1;y$2(kt||dn?!1:en,{allowed:o$2(()=>{var un,xn;return[(xn=(un=Ft.current)==null?void 0:un.closest("[data-headlessui-portal]"))!=null?xn:null]}),disallowed:o$2(()=>{var un;return[(un=an==null?void 0:an.closest("body > *:not(#headlessui-portal-root)"))!=null?un:null]})}),R$2(en,sn,un=>{un.preventDefault(),Jt()}),a$2(en,Kt==null?void 0:Kt.defaultView,un=>{un.preventDefault(),un.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),Jt()}),f$2(kt||dn?!1:en,Kt,sn),m$2(en,Ft,Jt);let[mn,yn]=w$3(),vn=reactExports.useMemo(()=>[{dialogState:Bt,close:Jt,setTitleId:Zt,unmount:Tt},Ut],[Bt,Ut,Jt,Zt,Tt]),hn=reactExports.useMemo(()=>({open:Bt===0}),[Bt]),pn={ref:Ht,id:ot,role:ft,tabIndex:-1,"aria-modal":kt?void 0:Bt===0?!0:void 0,"aria-labelledby":Ut.titleId,"aria-describedby":mn,unmount:Tt},rn=!f$1(),on=x.None;en&&!kt&&(on|=x.RestoreFocus,on|=x.TabLock,St&&(on|=x.AutoFocus),rn&&(on|=x.InitialFocus));let gn=L$1();return React4.createElement(s$1,null,React4.createElement(l,{force:!0},React4.createElement(re$1,null,React4.createElement(k.Provider,{value:vn},React4.createElement(X$1,{target:Ft},React4.createElement(l,{force:!1},React4.createElement(yn,{slot:hn},React4.createElement(nn,null,React4.createElement(ye,{initialFocus:dt,initialFocusFallback:Ft,containers:sn,features:on},React4.createElement(C$1,{value:Jt},gn({ourProps:pn,theirProps:Rt,slot:hn,defaultTag:Me,features:Ge,visible:Bt===0,name:"Dialog"})))))))))))}),Me="div",Ge=O$3.RenderStrategy|O$3.Static;function ke(it,g){let{transition:et=!1,open:ot,...ct}=it,ut=u$1(),dt=it.hasOwnProperty("open")||ut!==null,ft=it.hasOwnProperty("onClose");if(!dt&&!ft)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!dt)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!ft)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!ut&&typeof it.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${it.open}`);if(typeof it.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${it.onClose}`);return(ot!==void 0||et)&&!ct.static?React4.createElement(O$1,null,React4.createElement(ze,{show:ot,transition:et,unmount:ct.unmount},React4.createElement(V,{ref:g,...ct}))):React4.createElement(O$1,null,React4.createElement(V,{ref:g,open:ot,...ct}))}let we="div";function Be(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-panel-${et}`,transition:ct=!1,...ut}=it,[{dialogState:dt,unmount:ft},St]=O("Dialog.Panel"),kt=y$3(g,St.panelRef),Tt=reactExports.useMemo(()=>({open:dt===0}),[dt]),Rt=o$2(Kt=>{Kt.stopPropagation()}),jt={ref:kt,id:ot,onClick:Rt},$t=ct?Fe:reactExports.Fragment,Ft=ct?{unmount:ft}:{},Ht=L$1();return React4.createElement($t,{...Ft},Ht({ourProps:jt,theirProps:ut,slot:Tt,defaultTag:we,name:"Dialog.Panel"}))}let Ue="div";function He(it,g){let{transition:et=!1,...ot}=it,[{dialogState:ct,unmount:ut}]=O("Dialog.Backdrop"),dt=reactExports.useMemo(()=>({open:ct===0}),[ct]),ft={ref:g,"aria-hidden":!0},St=et?Fe:reactExports.Fragment,kt=et?{unmount:ut}:{},Tt=L$1();return React4.createElement(St,{...kt},Tt({ourProps:ft,theirProps:ot,slot:dt,defaultTag:Ue,name:"Dialog.Backdrop"}))}let Ne="h2";function We(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-title-${et}`,...ct}=it,[{dialogState:ut,setTitleId:dt}]=O("Dialog.Title"),ft=y$3(g);reactExports.useEffect(()=>(dt(ot),()=>dt(null)),[ot,dt]);let St=reactExports.useMemo(()=>({open:ut===0}),[ut]),kt={ref:ft,id:ot};return L$1()({ourProps:kt,theirProps:ct,slot:St,defaultTag:Ne,name:"Dialog.Title"})}let $e=K(ke),je=K(Be),Dt=K(He),Ye=K(We),yt=Object.assign($e,{Panel:je,Title:Ye,Description:H$1});const navLinks=[{href:"/",label:"Home"},{href:"sign-up",label:"Sign Up"},{href:"contact",label:"Contact Us"},{href:"shop",label:"Shop"},{href:"login",label:"Login"}],cannedPrompts={beginner:[{label:" Social Media Growth Guide",text:"Write a 5-page lead magnet teaching small business owners how to grow their social media following with organic content, engagement, and consistency strategies."},{label:" Email Marketing Mastery",text:"Create a detailed guide on building and nurturing an email list that converts leads into loyal customers with proven automation techniques."},{label:" Personal Branding Blueprint",text:"Write a 5-page blueprint showing entrepreneurs how to define their brand identity, build authority online, and attract ideal clients."},{label:" Design Secrets for Non-Designers",text:"Generate a lead magnet teaching beginners how to design professional graphics using free tools like Canva, including typography and color tips."},{label:" Content Creation Starter Pack",text:"Write a detailed guide helping creators build a content calendar, repurpose videos, and plan content for multiple platforms efficiently."},{label:" The Beginners Guide to Digital Products",text:"Create a 5-page guide explaining how to turn skills into profitable digital products like eBooks, courses, or templates."},{label:" Productivity Hacks for Creators",text:"Generate a guide full of time-saving systems, tools, and automation tricks that help creators stay consistent and organized."},{label:" 7 Steps to Launch Your Online Business",text:"Write a step-by-step roadmap for beginners to start an online business, from idea validation to first sale."},{label:" The Ultimate AI Prompt Guide",text:"Create a 5-page lead magnet showing users how to craft better AI prompts for marketing, writing, and design workflows."},{label:" Monetize Your Music Online",text:"Write a guide showing independent musicians how to sell music, build fanbases, and create recurring revenue from digital content."}],professional:[{label:" Build Your First Website",text:"Create a simple 5-page beginner guide teaching small businesses how to plan, design, and launch their first website using modern no-code tools."},{label:" Create & Sell Digital Templates",text:"Write a guide explaining how to design and sell Canva, Notion, or Google Docs templates that bring consistent passive income."},{label:" Mastering Video Marketing",text:"Generate a 5-page lead magnet teaching creators how to plan, shoot, and promote short-form videos that build trust and conversions."},{label:" Branding Psychology 101",text:"Write a lead magnet breaking down the psychology of color, typography, and emotion in brand design."},{label:" Freelancer Success Playbook",text:"Create a guide showing freelancers how to price their services, close clients, and scale into an agency model."},{label:" The Digital Marketing Roadmap",text:"Write a complete 5-step roadmap for entrepreneurs to master content, SEO, ads, and email marketing for consistent traffic."},{label:" Copywriting for Conversions",text:"Generate a guide that teaches beginners the art of persuasive writing  from headlines to calls-to-action."},{label:" Funnel Building Simplified",text:"Write a 5-page walkthrough on building high-converting funnels using lead magnets, tripwires, and upsells."},{label:" Automate Your Business",text:"Create a guide showing small business owners how to automate repetitive tasks using Zapier, AI, and scheduling tools."},{label:" Data-Driven Marketing",text:"Write a beginner-friendly guide teaching business owners how to track analytics, interpret data, and improve conversions."}],expert:[{label:" The Psychology of Persuasion in Marketing",text:"Write a 5-page academic-style guide exploring how cognitive biases, emotional triggers, and storytelling affect consumer decision-making in marketing and branding."},{label:" The Science of Habit-Building for Creators",text:"Develop a 5-page guide teaching creators how to build long-term consistency by applying behavioral science and habit-formation frameworks to their creative routines."},{label:" The Economics of Attention",text:"Write a thought-provoking lead magnet analyzing how attention has become a modern currency, explaining scarcity, virality, and monetization in the digital economy."},{label:" Design Thinking for Business Innovation",text:"Generate a 5-page teaching resource showing entrepreneurs how to use design thinking methodology to solve business problems and create user-centered products."},{label:" Strategic Positioning for Small Brands",text:"Write an MBA-level breakdown of how to position a brand within competitive markets using differentiation, value perception, and storytelling."},{label:" The Art of Thought Leadership",text:"Create a guide for experts on how to transform knowledge into influence by publishing insights, frameworks, and educational content that attract authority."},{label:" The Systems of Scale",text:"Write a detailed 5-page framework teaching small teams how to transition from chaos to structure using documented workflows, automation, and SOPs."},{label:" Pricing Psychology & Value Perception",text:"Develop a lead magnet explaining how anchoring, decoy pricing, and perceived value shape buyer decisions  with real-world examples and ethical applications."},{label:" The Future of AI in Creative Work",text:"Write an educational report exploring how AI tools are transforming creative industries, ethics, and productivity  with actionable guidance for adaptation."},{label:" Web Design Principles That Convert",text:"Generate a professional-level guide that breaks down visual hierarchy, white space, and conversion-driven design for modern web experiences."},{label:" The Strategic Content Framework",text:"Write a 5-page plan teaching creators how to map content pillars, storytelling arcs, and audience journeys for consistent long-term growth."},{label:" The History of Branding  and What It Teaches Modern Creators",text:"Develop a mini-course-style lead magnet that compares legacy branding (Coca-Cola, Nike, Apple) with modern personal branding on social platforms."},{label:" Ethics & Authenticity in Digital Marketing",text:"Write a reflective guide on maintaining authenticity, transparency, and trust in a world of automation, influencer deals, and AI content."},{label:" Business Models for the Digital Age",text:"Create a 5-page breakdown of proven online business models  subscription, affiliate, info-products, SaaS  including their pros, cons, and margins."},{label:" The Creators Intellectual Property Handbook",text:"Write a guide explaining copyright, licensing, and how creators can protect their work legally when distributing digital products and media."},{label:" Storytelling Frameworks That Sell",text:"Generate a 5-page educational guide unpacking narrative structures like the Heros Journey, PAS, and StoryBrand for use in sales pages and videos."},{label:" The Analytics of Growth",text:"Teach business owners how to interpret engagement metrics, user cohorts, and conversion funnels like a data scientist to make smarter creative decisions."},{label:" Building Community-Driven Brands",text:"Write a 5-page resource on fostering belonging, trust, and shared identity around a brand or product using modern community platforms."},{label:" The Architecture of Influence",text:"Develop a high-level guide mapping how influence spreads through networks, social proof, and credibility  with tactics for ethical persuasion."},{label:" The Modern Creative MBA",text:"Write a 5-page masterclass that condenses key principles of marketing, finance, operations, and leadership for modern digital creators running personal brands."}]},themes=[{label:"Modern Minimal",value:"modern",textColor:"#ffffff",bg:"#fefefe"},{label:"Classic Elegant",value:"classic",textColor:"#ffffff",bg:"#000000"},{label:"Bold Creative",value:"bold",textColor:"#fff",bg:"#0f0f0f"}],themeStyles=[],colorThemes=[{name:"modern",label:"Modern",preview:"#e2e8f0"},{name:"classic",label:"Classic",preview:"#fffaf5"},{name:"bold",label:"Bold",preview:"#f9e8ff"},{name:"dark",label:"Dark",preview:"#030712"},{name:"royal",label:"Royal",preview:"#2E026D"},{name:"mint",label:"Mint",preview:"#d1fae5"},{name:"sunrise",label:"Sunrise",preview:"#fed7aa"},{name:"ocean",label:"Ocean",preview:"#bae6fd"},{name:"rose",label:"Rose",preview:"#fce7f3"},{name:"graphite",label:"Graphite",preview:"#1f2937"},{name:"forest",label:"Forest",preview:"#065f46"},{name:"gold",label:"Gold",preview:"#f59e0b"},{name:"lavender",label:"Lavender",preview:"#c084fc"},{name:"peach",label:"Peach",preview:"#f97316"},{name:"midnight",label:"Midnight",preview:"#1e293b"},{name:"aqua",label:"Aqua",preview:"#0ea5e9"},{name:"berry",label:"Berry",preview:"#7e22ce"},{name:"lime",label:"Lime",preview:"#65a30d"},{name:"sand",label:"Sand",preview:"#fcd34d"},{name:"sky",label:"Sky",preview:"#60a5fa"},{name:"copper",label:"Copper",preview:"#b45309"},{name:"ice",label:"Ice",preview:"#e0f2fe"},{name:"steel",label:"Steel",preview:"#475569"},{name:"coral",label:"Coral",preview:"#fb7185"},{name:"emerald",label:"Emerald",preview:"#10b981"},{name:"bronze",label:"Bronze",preview:"#78350f"},{name:"onyx",label:"Onyx",preview:"#0f172a"},{name:"blush",label:"Blush",preview:"#fecdd3"},{name:"arctic",label:"Arctic",preview:"#bae6fd"},{name:"wine",label:"Wine",preview:"#7f1d1d"},{name:"charcoal",label:"Charcoal",preview:"#111827"},{name:"platinum",label:"Platinum",preview:"#f3f4f6"},{name:"amber",label:"Amber",preview:"#fbbf24"},{name:"mocha",label:"Mocha",preview:"#78350f"},{name:"slate",label:"Slate",preview:"#334155"},{name:"sapphire",label:"Sapphire",preview:"#0ea5e9"},{name:"ruby",label:"Ruby",preview:"#be123c"},{name:"ivory",label:"Ivory",preview:"#fefce8"},{name:"cherry",label:"Cherry",preview:"#991b1b"},{name:"storm",label:"Storm",preview:"#64748b"},{name:"sunset",label:"Sunset",preview:"#fb923c"},{name:"arcticBlue",label:"Arctic Blue",preview:"#7dd3fc"},{name:"teal",label:"Teal",preview:"#0d9488"},{name:"velvet",label:"Velvet",preview:"#581c87"},{name:"tangerine",label:"Tangerine",preview:"#f97316"},{name:"fog",label:"Fog",preview:"#cbd5e1"},{name:"carbon",label:"Carbon",preview:"#1e293b"},{name:"moss",label:"Moss",preview:"#14532d"},{name:"cream",label:"Cream",preview:"#fef9c3"},{name:"iris",label:"Iris",preview:"#6366f1"},{name:"candy",label:"Candy",preview:"#ec4899"},{name:"coffee",label:"Coffee",preview:"#6b4f4f"},{name:"periwinkle",label:"Periwinkle",preview:"#a5b4fc"},{name:"smoke",label:"Smoke",preview:"#737373"},{name:"jet",label:"Jet",preview:"#0a0a0a"},{name:"rosewood",label:"Rosewood",preview:"#4a0404"},{name:"stone",label:"Stone",preview:"#d6d3d1"},{name:"mintCream",label:"Mint Cream",preview:"#dcfce7"},{name:"navy",label:"Navy",preview:"#1e3a8a"},{name:"orchid",label:"Orchid",preview:"#d8b4fe"},{name:"pine",label:"Pine",preview:"#064e3b"},{name:"wineGold",label:"Wine Gold",preview:"#854d0e"},{name:"opal",label:"Opal",preview:"#a7f3d0"},{name:"denim",label:"Denim",preview:"#1d4ed8"},{name:"shadow",label:"Shadow",preview:"#171717"},{name:"honey",label:"Honey",preview:"#facc15"},{name:"ultraviolet",label:"Ultraviolet",preview:"#6d28d9"}],fontThemes={modern:{name:"Montserrat",file:"/fonts/Montserrat-Regular.ttf"},classic:{name:"AdobeArabic",file:"/fonts/AdobeArabic-Regular.ttf"},bold:{name:"Bebas Neue",file:"/fonts/Roboto-Regular.ttf"}},Nav=()=>{const{user:it,logout:g}=useAuth(),et=useNavigate(),[ot,ct]=reactExports.useState(!1),ut=useLocation();if(reactExports.useEffect(()=>{ot?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="")},[ot]),["/dashboard","/books","/settings","/prompts","/notifications"].includes(ut.pathname))return null;const dt=navLinks.filter(ft=>!(ft.label==="Home"&&ut.pathname==="/home"||ft.label==="Contact Us"&&ut.pathname==="/contact"));return jsxRuntimeExports.jsxs("div",{className:"fixed top-0 left-0 w-full z-50",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("nav",{onClick:ft=>ft.stopPropagation(),className:"flex items-center justify-between px-4 h-[72px]",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Link$1,{to:"/",preventScrollReset:!0,children:jsxRuntimeExports.jsx(motion.img,{src:headerLogo,width:50,height:50,initial:{opacity:0},animate:{opacity:1},transition:{duration:4.5,delay:2}})})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block relative",onMouseEnter:()=>ct(!0),onMouseLeave:()=>ct(!1),children:[jsxRuntimeExports.jsx("button",{type:"button",className:`p-3 bg-muteGrey hover:bg-gray-800 text-white shadow-md transition
      ${ot?"rounded-t-lg":"rounded-lg"}`,children:jsxRuntimeExports.jsx(Cog,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:`absolute right-0 top-full flex flex-col items-center gap-2 
                 bg-muteGrey  shadow-xl
                py-2 px-1 mt-[-2px] z-50
                transition-all duration-150 ease-out rounded-b-lg 
                ${ot?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/home"),className:"p-2 hover:bg-gray-800/60  transition",title:"Home",children:jsxRuntimeExports.jsx(House,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),it?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/dashboard"),className:"p-2 hover:bg-gray-800/60  transition",title:"Dashboard",children:jsxRuntimeExports.jsx(LayoutDashboard,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Help",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>g(),className:"p-2 hover:bg-gray-800/60  transition",title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/sign-up"),className:"p-2 hover:bg-gray-800/60  transition",title:"Sign Up",children:jsxRuntimeExports.jsx(Crown,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/shop"),className:"p-2 hover:bg-gray-800/60  transition",title:"Shop",children:jsxRuntimeExports.jsx(Store,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/login"),className:"p-2 hover:bg-gray-800/60  transition",title:"Login",children:jsxRuntimeExports.jsx(User,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Contact",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("button",{onClick:()=>ct(!ot),className:"text-white focus:outline-none z-50 relative",children:ot?jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})})]})}),jsxRuntimeExports.jsx(ze,{show:ot&&window.innerWidth<768,enter:"transition duration-300 ease-out",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition duration-200 ease-in",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:ft=>jsxRuntimeExports.jsxs("div",{ref:ft,className:"md:hidden fixed top-0 left-0 w-full h-screen bg-bioModal z-40 flex flex-col items-center pt-24 space-y-4 lead-text",children:[dt.map(St=>St.label==="Home"&&ut.pathname==="/home"||it&&(St.label==="Sign Up"||St.label==="Contact Us"||St.label==="Shop")?null:St.label==="Login"&&it?jsxRuntimeExports.jsx(Link$1,{to:"/dashboard",onClick:()=>ct(!1),className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Dashboard"},"user-dashboard"):jsxRuntimeExports.jsx("a",{href:St.href,onClick:kt=>handleNavClick(kt,St.href),className:"font-montserrat text-md text-white-400 hover:text-white transition-all cursor-pointer",children:St.label},St.label)),it&&jsxRuntimeExports.jsx("button",{onClick:()=>{g(),ct(!1)},className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Logout"})]})})]})};function OutOfSlotsModal({open:it,onClose:g,onRefresh:et,isFirstTime:ot=!1}){if(!it)return null;const ct=ot?"Welcome to Cre8tly Studio":"Out of Lead Magnet Slots",ut=ot?`Welcome to Cre8tly Studio, your creative command center for building
       high-converting lead magnets in minutes. 
       To start creating, visit Cre8tlyStudio.com in your browser and
       purchase your first token pack. 
       Once purchased, click below to refresh your account and begin.`:`Youve reached your current plans limit.
       To purchase more tokens or lifetime unlocks, visit Cre8tlyStudio.com
       in your browser and log in with the same account.
       Once purchased, click below to refresh your slots instantly.`;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 animate-fadeIn font-montserrat",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-br from-[#0b0b0b] via-[#111827] to-[#1f2937] border border-[#00E07A]/40 shadow-[0_0_25px_rgba(0,224,122,0.3)] rounded-2xl p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] opacity-20 blur-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] bg-clip-text text-transparent",children:ct}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed text-[15px] whitespace-pre-line",children:ut}),jsxRuntimeExports.jsx("button",{onClick:async()=>{et&&await et(),g&&g()},className:"bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] text-white px-8 py-3 rounded-xl font-semibold tracking-wide shadow-[0_0_12px_rgba(0,224,122,0.6)] hover:shadow-[0_0_20px_rgba(106,90,205,0.8)] hover:scale-[1.03] transition-all duration-200",children:ot?"Ive Purchased My First Pack":"Ive Purchased Tokens"}),jsxRuntimeExports.jsx("button",{onClick:g,className:"block mx-auto mt-4 text-sm text-gray-400 hover:text-white transition",children:"Cancel"})]})]})})}const PricingSection=()=>{const{user:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=()=>{window.location.href="/sign-up"};return jsxRuntimeExports.jsxs("section",{id:"pricing",className:"px-6 py-24 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-10 design-text",children:"Simple Pricing"}),jsxRuntimeExports.jsxs(motion.div,{className:"relative rounded-2xl max-w-md mx-auto overflow-hidden",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 p-[2px] rounded-2xl 
              bg-[linear-gradient(90deg,#00ff99,#7bed9f,#00ff99)] 
              bg-[length:200%_200%] 
              animate-gradientPulse`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-2xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-10 border border-transparent rounded-2xl shadow-xl",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-blue to-purple-500 bg-clip-text text-white design-text",children:"$47"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-8 type-text",children:"One-time payment for 5 lead magnet slots"}),jsxRuntimeExports.jsx("button",{onClick:ot,className:`w-full bg-royalPurple 
                text-white text-xl font-semibold py-4 rounded-xl 
                hover:opacity-90 hover:shadow-[0_0_20px_rgba(255,255,255,0.2)]
                transition shadow-lg design-text`,children:"Sign Up"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-silver mt-3",children:" Secure checkout"})]}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:g,onClose:()=>et(!1),isFirstTime:!it||!it.slot_count||it.slot_count===0})]})},steps=[{icon:jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,-4,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"},children:jsxRuntimeExports.jsx(SquareTerminal,{className:"w-10 h-10 text-white drop-shadow-[0_0_6px_rgba(255,255,255,0.5)]"})}),title:"1. Add Your Prompt",desc:"Describe your audience, product, or idea in one line, our AI expands it into full content instantly."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2.8,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Bot,{className:"w-10 h-10 text-white drop-shadow-[0_0_8px_rgba(103,15,231,0.6)]"})}),title:"2. AI Creates Your Digital Product",desc:"We generate up to 50 full A4 pages with examples, insights, and structure, styled with professional themes."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:[0,10,-10,0]},transition:{repeat:1/0,duration:5,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Download,{className:"w-10 h-10 text-green drop-shadow-[0_0_8px_rgba(123,237,159,0.6)]"})}),title:"3. Download & Launch",desc:"Receive a polished PDF ready to use instantly, perfect for selling, sharing, or capturing new leads."}];function HowItWorks(){return jsxRuntimeExports.jsxs("section",{id:"how",className:"px-6 py-24 text-center bg-metalBlack relative overflow-hidden rounded-2xl",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-gradient-to-br from-[#0b0f1a] via-[#111827] to-[#0b0f1a] opacity-40",animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{repeat:1/0,duration:20,ease:"linear"}}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-16 text-white font-semibold design-text",children:"How It Works"}),jsxRuntimeExports.jsx("div",{className:"grid gap-10 sm:grid-cols-3",children:steps.map((it,g)=>jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:20},className:"relative rounded-xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 rounded-xl p-[2px] 
                bg-[linear-gradient(270deg,#7bed9f,#670fe7,#7bed9f)] 
                bg-[length:300%_300%] animate-shine`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-800 mb-6 mx-auto shadow-[0_0_20px_rgba(100,255,200,0.25)]",children:it.icon}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-white lead-text",children:it.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed lead-text",children:it.desc})]})]},g))}),jsxRuntimeExports.jsx(PricingSection,{})]})]})}function VideoPlayer(){const it=reactExports.useRef(null),[g,et]=reactExports.useState(!0),[ot,ct]=reactExports.useState(!1),ut=()=>et(St=>!St),dt=async()=>{const St=it.current;if(St)if(St.requestFullscreen){await St.requestFullscreen(),ct(!0);try{await screen.orientation.lock("landscape")}catch{}}else St.webkitEnterFullscreen&&(St.webkitEnterFullscreen(),ct(!0))},ft=()=>{const St=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ct(!!St)};return typeof window<"u"&&(document.onfullscreenchange=ft,document.onwebkitfullscreenchange=ft),jsxRuntimeExports.jsxs("section",{className:"relative bg-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800 mt-10",children:[jsxRuntimeExports.jsxs("video",{ref:it,className:"w-full h-full object-cover rounded-2xl",autoPlay:!0,loop:!0,playsInline:!0,muted:g,preload:"metadata",poster:"/assets/video-thumbnail.jpg",children:[jsxRuntimeExports.jsx("source",{src:"https://cre8tlystudio.nyc3.cdn.digitaloceanspaces.com/Videos/new_cre8tly_video_v2.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:ut,className:"bg-black/60 text-white px-4 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:g?" Unmute":" Mute"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-black/60 text-white px-3 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:ot?" Exit":" Fullscreen"})]})]})}function PremiumEbooksCTA(){return jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"relative mt-28 mb-20 rounded-2xl overflow-hidden bg-metalBlack p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 blur-3xl opacity-40"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center justify-between gap-10 text-center lg:text-left",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl sm:text-5xl font-extrabold mb-6 bg-white bg-clip-text text-transparent design-text leading-[1.25] pb-1",children:"Ready to Go Deeper?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:["Unlock our full library of"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"premium guides"})," ","designed to help entrepreneurs, marketers, and creators dominate their niche. Each guide is downloadable instantly."]}),jsxRuntimeExports.jsx("a",{href:"/shop",className:"inline-block px-8 py-4 bg-royalPurple text-white text-xl font-semibold rounded-lg shadow-lg hover:opacity-90 transition-all duration-300 transform hover:scale-[1.03] design-text",children:" Browse Premium Guides"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full lg:w-auto",children:jsxRuntimeExports.jsx("img",{src:ebookCover,alt:"Ebook Collection Preview",className:"rounded-xl w-80 sm:w-96 border border-white/10 "})})]})]})}function AnimatedLogo(){return jsxRuntimeExports.jsx(motion.img,{src:headerLogo,alt:"Logo",className:"w-32 h-32 relative z-10",initial:{scale:.98,filter:"drop-shadow(0 0 0px rgba(0,255,204,0))"},animate:{scale:[1,1.05,1],filter:["drop-shadow(0 0 0px rgba(0,255,204,0))","drop-shadow(0 0 12px rgba(24, 0, 156, 1))","drop-shadow(0 0 0px rgba(0,255,204,0))"]},transition:{duration:5,ease:"easeInOut",repeat:1/0},whileHover:{scale:1.1,filter:"drop-shadow(0 0 16px rgba(0,255,204,1))",transition:{type:"spring",stiffness:150}}})}const Landing=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full text-white flex flex-col font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col items-center justify-center text-center px-4 sm:px-6 py-32 relative overflow-hidden",children:[jsxRuntimeExports.jsx(AnimatedLogo,{}),jsxRuntimeExports.jsxs("h1",{className:"relative inline-block text-white text-3xl sm:text-6xl lg:text-8xl font-extrabold design-text ",children:["Cre8tly Studio",jsxRuntimeExports.jsx("span",{className:"absolute -top-2 sm:-top-1 -right-8 sm:-right-10 text-green text-2xl sm:text-3xl font-bold lead-text",children:"AI"})]}),jsxRuntimeExports.jsx(motion.h2,{className:"text-5xl sm:text-7xl font-extrabold leading-tight bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1},children:"Create High-Converting Lead Magnets in Seconds"}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-6 text-xl sm:text-2xl text-gray-300 max-w-2xl lead-text",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:["The fastest way to turn your idea into a",jsxRuntimeExports.jsx("br",{})," sellable digital product."]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-8 text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto font-light leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:["Cre8tly Studio is an ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"AI-powered  digital product builder"})," that helps ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"creators, coaches, and entrepreneurs"})," design professional digital products, eBooks, and brand assets in seconds. Boost conversions, grow your email list, and sell faster with ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"automated content creation"}),", pro-level cover design, and ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"instant PDF generation"})," all in one platform built for modern online businesses."]}),jsxRuntimeExports.jsx("div",{className:"w-full max-w-5xl mt-12 rounded-2xl overflow-hidden",children:jsxRuntimeExports.jsx(VideoPlayer,{})})]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-16 mb-10 text-3xl sm:text-4xl text-center font-semibold leading-snug text-green tracking-tight max-w-4xl mx-auto design-text",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},children:["Creators dont dream about success",jsxRuntimeExports.jsx("br",{})," they generate it"]}),jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 60",className:"w-56 sm:w-72 mx-auto mt-2 mb-20",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"underline-gradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.9"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0"})]})}),jsxRuntimeExports.jsx("path",{d:"M10 25 Q200 -10 390 25",stroke:"url(#underline-gradient)",strokeWidth:"5",fill:"transparent",strokeLinecap:"round"})]}),jsxRuntimeExports.jsx(HowItWorks,{}),jsxRuntimeExports.jsx(PremiumEbooksCTA,{})]});function LoginPage(){const{login:it}=useAuth(),g=useNavigate(),[et,ot]=reactExports.useState({email:"",password:""}),[ct,ut]=reactExports.useState(!1),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(""),[Tt,Rt]=reactExports.useState(!1),jt=Ft=>{ot({...et,[Ft.target.name]:Ft.target.value})},$t=async Ft=>{var Ht,Kt;Ft.preventDefault(),ut(!0),kt("");try{await it(et.email,et.password),g("/dashboard")}catch(Bt){(Kt=(Ht=Bt.response)==null?void 0:Ht.data)!=null&&Kt.message?kt(Bt.response.data.message):kt("Login failed. Please try again later.")}finally{ut(!1)}};return reactExports.useEffect(()=>{if(St){Rt(!1);const Ft=setTimeout(()=>Rt(!0),4e3),Ht=setTimeout(()=>kt(""),5e3);return()=>{clearTimeout(Ft),clearTimeout(Ht)}}},[St]),jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Log in to your account to continue creating and managing your digital products."}),St&&jsxRuntimeExports.jsx("div",{className:`bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-1000 ${Tt?"opacity-0":"opacity-100"}`,children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:$t,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:et.email,onChange:jt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:et.password,onChange:jt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ft(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":dt?"Hide password":"Show password",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ct,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ct?"Logging In...":"Log In"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-4",children:jsxRuntimeExports.jsx("a",{href:"/forgot-password",className:"text-green hover:underline",children:"Forgot Password?"})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Dont have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/sign-up",className:"text-green hover:underline",children:"Sign Up"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$2(it,g){return it===g||it!==it&&g!==g}var eq_1=eq$2,eq$1=eq_1;function assocIndexOf$4(it,g){for(var et=it.length;et--;)if(eq$1(it[et][0],g))return et;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(it){var g=this.__data__,et=assocIndexOf$3(g,it);if(et<0)return!1;var ot=g.length-1;return et==ot?g.pop():splice.call(g,et,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(it){var g=this.__data__,et=assocIndexOf$2(g,it);return et<0?void 0:g[et][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(it){return assocIndexOf$1(this.__data__,it)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(it,g){var et=this.__data__,ot=assocIndexOf(et,it);return ot<0?(++this.size,et.push([it,g])):et[ot][1]=g,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(it){var g=this.__data__,et=g.delete(it);return this.size=g.size,et}var _stackDelete=stackDelete$1;function stackGet$1(it){return this.__data__.get(it)}var _stackGet=stackGet$1;function stackHas$1(it){return this.__data__.has(it)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$4=root$8.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(it){var g=hasOwnProperty$8.call(it,symToStringTag$1),et=it[symToStringTag$1];try{it[symToStringTag$1]=void 0;var ot=!0}catch{}var ct=nativeObjectToString$1.call(it);return ot&&(g?it[symToStringTag$1]=et:delete it[symToStringTag$1]),ct}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(it){return nativeObjectToString.call(it)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$4(it){return it==null?it===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(it)?getRawTag(it):objectToString(it)}var _baseGetTag=baseGetTag$4;function isObject$2(it){var g=typeof it;return it!=null&&(g=="object"||g=="function")}var isObject_1=isObject$2,baseGetTag$3=_baseGetTag,isObject$1=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(it){if(!isObject$1(it))return!1;var g=baseGetTag$3(it);return g==funcTag$1||g==genTag||g==asyncTag||g==proxyTag}var isFunction_1=isFunction$3,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var it=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return it?"Symbol(src)_1."+it:""}();function isMasked$1(it){return!!maskSrcKey&&maskSrcKey in it}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(it){if(it!=null){try{return funcToString$1.call(it)}catch{}try{return it+""}catch{}}return""}var _toSource=toSource$2,isFunction$2=isFunction_1,isMasked=_isMasked,isObject=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(it){if(!isObject(it)||isMasked(it))return!1;var g=isFunction$2(it)?reIsNative:reIsHostCtor;return g.test(toSource$1(it))}var _baseIsNative=baseIsNative$1;function getValue$1(it,g){return it==null?void 0:it[g]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(it,g){var et=getValue(it,g);return baseIsNative(et)?et:void 0}var _getNative=getNative$6,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(it){var g=this.has(it)&&delete this.__data__[it];return this.size-=g?1:0,g}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashGet$1(it){var g=this.__data__;if(nativeCreate$2){var et=g[it];return et===HASH_UNDEFINED$2?void 0:et}return hasOwnProperty$6.call(g,it)?g[it]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashHas$1(it){var g=this.__data__;return nativeCreate$1?g[it]!==void 0:hasOwnProperty$5.call(g,it)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(it,g){var et=this.__data__;return this.size+=this.has(it)?0:1,et[it]=nativeCreate&&g===void 0?HASH_UNDEFINED$1:g,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(it){var g=typeof it;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?it!=="__proto__":it===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(it,g){var et=it.__data__;return isKeyable(g)?et[typeof g=="string"?"string":"hash"]:et.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(it){var g=getMapData$3(this,it).delete(it);return this.size-=g?1:0,g}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(it){return getMapData$2(this,it).get(it)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(it){return getMapData$1(this,it).has(it)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(it,g){var et=getMapData(this,it),ot=et.size;return et.set(it,g),this.size+=et.size==ot?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$2(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}MapCache$2.prototype.clear=mapCacheClear;MapCache$2.prototype.delete=mapCacheDelete;MapCache$2.prototype.get=mapCacheGet;MapCache$2.prototype.has=mapCacheHas;MapCache$2.prototype.set=mapCacheSet;var _MapCache=MapCache$2,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(it,g){var et=this.__data__;if(et instanceof ListCache$1){var ot=et.__data__;if(!Map$2||ot.length<LARGE_ARRAY_SIZE-1)return ot.push([it,g]),this.size=++et.size,this;et=this.__data__=new MapCache$1(ot)}return et.set(it,g),this.size=et.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(it){var g=this.__data__=new ListCache(it);this.size=g.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(it){return this.__data__.set(it,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(it){return this.__data__.has(it)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(it){var g=-1,et=it==null?0:it.length;for(this.__data__=new MapCache;++g<et;)this.add(it[g])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(it,g){for(var et=-1,ot=it==null?0:it.length;++et<ot;)if(g(it[et],et,it))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(it,g){return it.has(g)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(it,g,et,ot,ct,ut){var dt=et&COMPARE_PARTIAL_FLAG$3,ft=it.length,St=g.length;if(ft!=St&&!(dt&&St>ft))return!1;var kt=ut.get(it),Tt=ut.get(g);if(kt&&Tt)return kt==g&&Tt==it;var Rt=-1,jt=!0,$t=et&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(ut.set(it,g),ut.set(g,it);++Rt<ft;){var Ft=it[Rt],Ht=g[Rt];if(ot)var Kt=dt?ot(Ht,Ft,Rt,g,it,ut):ot(Ft,Ht,Rt,it,g,ut);if(Kt!==void 0){if(Kt)continue;jt=!1;break}if($t){if(!arraySome(g,function(Bt,Ut){if(!cacheHas($t,Ut)&&(Ft===Bt||ct(Ft,Bt,et,ot,ut)))return $t.push(Ut)})){jt=!1;break}}else if(!(Ft===Ht||ct(Ft,Ht,et,ot,ut))){jt=!1;break}}return ut.delete(it),ut.delete(g),jt}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot,ct){et[++g]=[ct,ot]}),et}var _mapToArray=mapToArray$1;function setToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot){et[++g]=ot}),et}var _setToArray=setToArray$1,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(it,g,et,ot,ct,ut,dt){switch(et){case dataViewTag$2:if(it.byteLength!=g.byteLength||it.byteOffset!=g.byteOffset)return!1;it=it.buffer,g=g.buffer;case arrayBufferTag$1:return!(it.byteLength!=g.byteLength||!ut(new Uint8Array$1(it),new Uint8Array$1(g)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+it,+g);case errorTag$1:return it.name==g.name&&it.message==g.message;case regexpTag$1:case stringTag$1:return it==g+"";case mapTag$2:var ft=mapToArray;case setTag$2:var St=ot&COMPARE_PARTIAL_FLAG$2;if(ft||(ft=setToArray),it.size!=g.size&&!St)return!1;var kt=dt.get(it);if(kt)return kt==g;ot|=COMPARE_UNORDERED_FLAG,dt.set(it,g);var Tt=equalArrays$1(ft(it),ft(g),ot,ct,ut,dt);return dt.delete(it),Tt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(it)==symbolValueOf.call(g)}return!1}var _equalByTag=equalByTag$1;function arrayPush$1(it,g){for(var et=-1,ot=g.length,ct=it.length;++et<ot;)it[ct+et]=g[et];return it}var _arrayPush=arrayPush$1,isArray$3=Array.isArray,isArray_1=isArray$3,arrayPush=_arrayPush,isArray$2=isArray_1;function baseGetAllKeys$1(it,g,et){var ot=g(it);return isArray$2(it)?ot:arrayPush(ot,et(it))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(it,g){for(var et=-1,ot=it==null?0:it.length,ct=0,ut=[];++et<ot;){var dt=it[et];g(dt,et,it)&&(ut[ct++]=dt)}return ut}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$6=Object.prototype,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(it){return it==null?[]:(it=Object(it),arrayFilter(nativeGetSymbols(it),function(g){return propertyIsEnumerable$1.call(it,g)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(it,g){for(var et=-1,ot=Array(it);++et<it;)ot[et]=g(et);return ot}var _baseTimes=baseTimes$1;function isObjectLike$4(it){return it!=null&&typeof it=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(it){return isObjectLike$3(it)&&baseGetTag$2(it)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$2=isObjectLike_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(it){return isObjectLike$2(it)&&hasOwnProperty$4.call(it,"callee")&&!propertyIsEnumerable.call(it,"callee")},isArguments_1=isArguments$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(it,g){var et=_root,ot=stubFalse_1,ct=g&&!g.nodeType&&g,ut=ct&&!0&&it&&!it.nodeType&&it,dt=ut&&ut.exports===ct,ft=dt?et.Buffer:void 0,St=ft?ft.isBuffer:void 0,kt=St||ot;it.exports=kt})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(it,g){var et=typeof it;return g=g??MAX_SAFE_INTEGER$1,!!g&&(et=="number"||et!="symbol"&&reIsUint.test(it))&&it>-1&&it%1==0&&it<g}var _isIndex=isIndex$1,MAX_SAFE_INTEGER=9007199254740991;function isLength$2(it){return typeof it=="number"&&it>-1&&it%1==0&&it<=MAX_SAFE_INTEGER}var isLength_1=isLength$2,baseGetTag$1=_baseGetTag,isLength$1=isLength_1,isObjectLike$1=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(it){return isObjectLike$1(it)&&isLength$1(it.length)&&!!typedArrayTags[baseGetTag$1(it)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(it){return function(g){return it(g)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(it,g){var et=_freeGlobal,ot=g&&!g.nodeType&&g,ct=ot&&!0&&it&&!it.nodeType&&it,ut=ct&&ct.exports===ot,dt=ut&&et.process,ft=function(){try{var St=ct&&ct.require&&ct.require("util").types;return St||dt&&dt.binding&&dt.binding("util")}catch{}}();it.exports=ft})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$1=isArray_1,isBuffer$1=isBufferExports,isIndex=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(it,g){var et=isArray$1(it),ot=!et&&isArguments(it),ct=!et&&!ot&&isBuffer$1(it),ut=!et&&!ot&&!ct&&isTypedArray$1(it),dt=et||ot||ct||ut,ft=dt?baseTimes(it.length,String):[],St=ft.length;for(var kt in it)(g||hasOwnProperty$3.call(it,kt))&&!(dt&&(kt=="length"||ct&&(kt=="offset"||kt=="parent")||ut&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||isIndex(kt,St)))&&ft.push(kt);return ft}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(it){var g=it&&it.constructor,et=typeof g=="function"&&g.prototype||objectProto$3;return it===et}var _isPrototype=isPrototype$1;function overArg$1(it,g){return function(et){return it(g(et))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(it){if(!isPrototype(it))return nativeKeys(it);var g=[];for(var et in Object(it))hasOwnProperty$2.call(it,et)&&et!="constructor"&&g.push(et);return g}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength=isLength_1;function isArrayLike$1(it){return it!=null&&isLength(it.length)&&!isFunction$1(it)}var isArrayLike_1=isArrayLike$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike=isArrayLike_1;function keys$2(it){return isArrayLike(it)?arrayLikeKeys(it):baseKeys(it)}var keys_1=keys$2,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$1=keys_1;function getAllKeys$1(it){return baseGetAllKeys(it,keys$1,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(it,g,et,ot,ct,ut){var dt=et&COMPARE_PARTIAL_FLAG$1,ft=getAllKeys(it),St=ft.length,kt=getAllKeys(g),Tt=kt.length;if(St!=Tt&&!dt)return!1;for(var Rt=St;Rt--;){var jt=ft[Rt];if(!(dt?jt in g:hasOwnProperty$1.call(g,jt)))return!1}var $t=ut.get(it),Ft=ut.get(g);if($t&&Ft)return $t==g&&Ft==it;var Ht=!0;ut.set(it,g),ut.set(g,it);for(var Kt=dt;++Rt<St;){jt=ft[Rt];var Bt=it[jt],Ut=g[jt];if(ot)var Yt=dt?ot(Ut,Bt,jt,g,it,ut):ot(Bt,Ut,jt,it,g,ut);if(!(Yt===void 0?Bt===Ut||ct(Bt,Ut,et,ot,ut):Yt)){Ht=!1;break}Kt||(Kt=jt=="constructor")}if(Ht&&!Kt){var Jt=it.constructor,Zt=g.constructor;Jt!=Zt&&"constructor"in it&&"constructor"in g&&!(typeof Jt=="function"&&Jt instanceof Jt&&typeof Zt=="function"&&Zt instanceof Zt)&&(Ht=!1)}return ut.delete(it),ut.delete(g),Ht}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$2=getNative$1(root$2,"Set"),_Set=Set$2,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(it){var g=baseGetTag(it),et=g==objectTag$1?it.constructor:void 0,ot=et?toSource(et):"";if(ot)switch(ot){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return g});var _getTag=getTag$1,Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(it,g,et,ot,ct,ut){var dt=isArray(it),ft=isArray(g),St=dt?arrayTag:getTag(it),kt=ft?arrayTag:getTag(g);St=St==argsTag?objectTag:St,kt=kt==argsTag?objectTag:kt;var Tt=St==objectTag,Rt=kt==objectTag,jt=St==kt;if(jt&&isBuffer(it)){if(!isBuffer(g))return!1;dt=!0,Tt=!1}if(jt&&!Tt)return ut||(ut=new Stack),dt||isTypedArray(it)?equalArrays(it,g,et,ot,ct,ut):equalByTag(it,g,St,et,ot,ct,ut);if(!(et&COMPARE_PARTIAL_FLAG)){var $t=Tt&&hasOwnProperty.call(it,"__wrapped__"),Ft=Rt&&hasOwnProperty.call(g,"__wrapped__");if($t||Ft){var Ht=$t?it.value():it,Kt=Ft?g.value():g;return ut||(ut=new Stack),ct(Ht,Kt,et,ot,ut)}}return jt?(ut||(ut=new Stack),equalObjects(it,g,et,ot,ct,ut)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(it,g,et,ot,ct){return it===g?!0:it==null||g==null||!isObjectLike(it)&&!isObjectLike(g)?it!==it&&g!==g:baseIsEqualDeep(it,g,et,ot,baseIsEqual$1,ct)}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(it,g){return baseIsEqual(it,g)}var isEqual_1$1=isEqual,quill={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(it,g){(function(ot,ct){it.exports=ct()})(typeof self<"u"?self:commonjsGlobal,function(){return function(et){var ot={};function ct(ut){if(ot[ut])return ot[ut].exports;var dt=ot[ut]={i:ut,l:!1,exports:{}};return et[ut].call(dt.exports,dt,dt.exports,ct),dt.l=!0,dt.exports}return ct.m=et,ct.c=ot,ct.d=function(ut,dt,ft){ct.o(ut,dt)||Object.defineProperty(ut,dt,{configurable:!1,enumerable:!0,get:ft})},ct.n=function(ut){var dt=ut&&ut.__esModule?function(){return ut.default}:function(){return ut};return ct.d(dt,"a",dt),dt},ct.o=function(ut,dt){return Object.prototype.hasOwnProperty.call(ut,dt)},ct.p="",ct(ct.s=109)}([function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(17),dt=ct(18),ft=ct(19),St=ct(45),kt=ct(46),Tt=ct(47),Rt=ct(48),jt=ct(49),$t=ct(12),Ft=ct(32),Ht=ct(33),Kt=ct(31),Bt=ct(1),Ut={Scope:Bt.Scope,create:Bt.create,find:Bt.find,query:Bt.query,register:Bt.register,Container:ut.default,Format:dt.default,Leaf:ft.default,Embed:Rt.default,Scroll:St.default,Block:Tt.default,Inline:kt.default,Text:jt.default,Attributor:{Attribute:$t.default,Class:Ft.default,Style:Ht.default,Store:Kt.default}};ot.default=Ut},function(et,ot,ct){var ut=this&&this.__extends||function(){var Kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bt,Ut){Bt.__proto__=Ut}||function(Bt,Ut){for(var Yt in Ut)Ut.hasOwnProperty(Yt)&&(Bt[Yt]=Ut[Yt])};return function(Bt,Ut){Kt(Bt,Ut);function Yt(){this.constructor=Bt}Bt.prototype=Ut===null?Object.create(Ut):(Yt.prototype=Ut.prototype,new Yt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=function(Kt){ut(Bt,Kt);function Bt(Ut){var Yt=this;return Ut="[Parchment] "+Ut,Yt=Kt.call(this,Ut)||this,Yt.message=Ut,Yt.name=Yt.constructor.name,Yt}return Bt}(Error);ot.ParchmentError=dt;var ft={},St={},kt={},Tt={};ot.DATA_KEY="__blot";var Rt;(function(Kt){Kt[Kt.TYPE=3]="TYPE",Kt[Kt.LEVEL=12]="LEVEL",Kt[Kt.ATTRIBUTE=13]="ATTRIBUTE",Kt[Kt.BLOT=14]="BLOT",Kt[Kt.INLINE=7]="INLINE",Kt[Kt.BLOCK=11]="BLOCK",Kt[Kt.BLOCK_BLOT=10]="BLOCK_BLOT",Kt[Kt.INLINE_BLOT=6]="INLINE_BLOT",Kt[Kt.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Kt[Kt.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Kt[Kt.ANY=15]="ANY"})(Rt=ot.Scope||(ot.Scope={}));function jt(Kt,Bt){var Ut=Ft(Kt);if(Ut==null)throw new dt("Unable to create "+Kt+" blot");var Yt=Ut,Jt=Kt instanceof Node||Kt.nodeType===Node.TEXT_NODE?Kt:Yt.create(Bt);return new Yt(Jt,Bt)}ot.create=jt;function $t(Kt,Bt){return Bt===void 0&&(Bt=!1),Kt==null?null:Kt[ot.DATA_KEY]!=null?Kt[ot.DATA_KEY].blot:Bt?$t(Kt.parentNode,Bt):null}ot.find=$t;function Ft(Kt,Bt){Bt===void 0&&(Bt=Rt.ANY);var Ut;if(typeof Kt=="string")Ut=Tt[Kt]||ft[Kt];else if(Kt instanceof Text||Kt.nodeType===Node.TEXT_NODE)Ut=Tt.text;else if(typeof Kt=="number")Kt&Rt.LEVEL&Rt.BLOCK?Ut=Tt.block:Kt&Rt.LEVEL&Rt.INLINE&&(Ut=Tt.inline);else if(Kt instanceof HTMLElement){var Yt=(Kt.getAttribute("class")||"").split(/\s+/);for(var Jt in Yt)if(Ut=St[Yt[Jt]],Ut)break;Ut=Ut||kt[Kt.tagName]}return Ut==null?null:Bt&Rt.LEVEL&Ut.scope&&Bt&Rt.TYPE&Ut.scope?Ut:null}ot.query=Ft;function Ht(){for(var Kt=[],Bt=0;Bt<arguments.length;Bt++)Kt[Bt]=arguments[Bt];if(Kt.length>1)return Kt.map(function(Jt){return Ht(Jt)});var Ut=Kt[0];if(typeof Ut.blotName!="string"&&typeof Ut.attrName!="string")throw new dt("Invalid definition");if(Ut.blotName==="abstract")throw new dt("Cannot register abstract class");if(Tt[Ut.blotName||Ut.attrName]=Ut,typeof Ut.keyName=="string")ft[Ut.keyName]=Ut;else if(Ut.className!=null&&(St[Ut.className]=Ut),Ut.tagName!=null){Array.isArray(Ut.tagName)?Ut.tagName=Ut.tagName.map(function(Jt){return Jt.toUpperCase()}):Ut.tagName=Ut.tagName.toUpperCase();var Yt=Array.isArray(Ut.tagName)?Ut.tagName:[Ut.tagName];Yt.forEach(function(Jt){(kt[Jt]==null||Ut.className==null)&&(kt[Jt]=Ut)})}return Ut}ot.register=Ht},function(et,ot,ct){var ut=ct(51),dt=ct(11),ft=ct(3),St=ct(20),kt=String.fromCharCode(0),Tt=function(Rt){Array.isArray(Rt)?this.ops=Rt:Rt!=null&&Array.isArray(Rt.ops)?this.ops=Rt.ops:this.ops=[]};Tt.prototype.insert=function(Rt,jt){var $t={};return Rt.length===0?this:($t.insert=Rt,jt!=null&&typeof jt=="object"&&Object.keys(jt).length>0&&($t.attributes=jt),this.push($t))},Tt.prototype.delete=function(Rt){return Rt<=0?this:this.push({delete:Rt})},Tt.prototype.retain=function(Rt,jt){if(Rt<=0)return this;var $t={retain:Rt};return jt!=null&&typeof jt=="object"&&Object.keys(jt).length>0&&($t.attributes=jt),this.push($t)},Tt.prototype.push=function(Rt){var jt=this.ops.length,$t=this.ops[jt-1];if(Rt=ft(!0,{},Rt),typeof $t=="object"){if(typeof Rt.delete=="number"&&typeof $t.delete=="number")return this.ops[jt-1]={delete:$t.delete+Rt.delete},this;if(typeof $t.delete=="number"&&Rt.insert!=null&&(jt-=1,$t=this.ops[jt-1],typeof $t!="object"))return this.ops.unshift(Rt),this;if(dt(Rt.attributes,$t.attributes)){if(typeof Rt.insert=="string"&&typeof $t.insert=="string")return this.ops[jt-1]={insert:$t.insert+Rt.insert},typeof Rt.attributes=="object"&&(this.ops[jt-1].attributes=Rt.attributes),this;if(typeof Rt.retain=="number"&&typeof $t.retain=="number")return this.ops[jt-1]={retain:$t.retain+Rt.retain},typeof Rt.attributes=="object"&&(this.ops[jt-1].attributes=Rt.attributes),this}}return jt===this.ops.length?this.ops.push(Rt):this.ops.splice(jt,0,Rt),this},Tt.prototype.chop=function(){var Rt=this.ops[this.ops.length-1];return Rt&&Rt.retain&&!Rt.attributes&&this.ops.pop(),this},Tt.prototype.filter=function(Rt){return this.ops.filter(Rt)},Tt.prototype.forEach=function(Rt){this.ops.forEach(Rt)},Tt.prototype.map=function(Rt){return this.ops.map(Rt)},Tt.prototype.partition=function(Rt){var jt=[],$t=[];return this.forEach(function(Ft){var Ht=Rt(Ft)?jt:$t;Ht.push(Ft)}),[jt,$t]},Tt.prototype.reduce=function(Rt,jt){return this.ops.reduce(Rt,jt)},Tt.prototype.changeLength=function(){return this.reduce(function(Rt,jt){return jt.insert?Rt+St.length(jt):jt.delete?Rt-jt.delete:Rt},0)},Tt.prototype.length=function(){return this.reduce(function(Rt,jt){return Rt+St.length(jt)},0)},Tt.prototype.slice=function(Rt,jt){Rt=Rt||0,typeof jt!="number"&&(jt=1/0);for(var $t=[],Ft=St.iterator(this.ops),Ht=0;Ht<jt&&Ft.hasNext();){var Kt;Ht<Rt?Kt=Ft.next(Rt-Ht):(Kt=Ft.next(jt-Ht),$t.push(Kt)),Ht+=St.length(Kt)}return new Tt($t)},Tt.prototype.compose=function(Rt){var jt=St.iterator(this.ops),$t=St.iterator(Rt.ops),Ft=[],Ht=$t.peek();if(Ht!=null&&typeof Ht.retain=="number"&&Ht.attributes==null){for(var Kt=Ht.retain;jt.peekType()==="insert"&&jt.peekLength()<=Kt;)Kt-=jt.peekLength(),Ft.push(jt.next());Ht.retain-Kt>0&&$t.next(Ht.retain-Kt)}for(var Bt=new Tt(Ft);jt.hasNext()||$t.hasNext();)if($t.peekType()==="insert")Bt.push($t.next());else if(jt.peekType()==="delete")Bt.push(jt.next());else{var Ut=Math.min(jt.peekLength(),$t.peekLength()),Yt=jt.next(Ut),Jt=$t.next(Ut);if(typeof Jt.retain=="number"){var Zt={};typeof Yt.retain=="number"?Zt.retain=Ut:Zt.insert=Yt.insert;var en=St.attributes.compose(Yt.attributes,Jt.attributes,typeof Yt.retain=="number");if(en&&(Zt.attributes=en),Bt.push(Zt),!$t.hasNext()&&dt(Bt.ops[Bt.ops.length-1],Zt)){var tn=new Tt(jt.rest());return Bt.concat(tn).chop()}}else typeof Jt.delete=="number"&&typeof Yt.retain=="number"&&Bt.push(Jt)}return Bt.chop()},Tt.prototype.concat=function(Rt){var jt=new Tt(this.ops.slice());return Rt.ops.length>0&&(jt.push(Rt.ops[0]),jt.ops=jt.ops.concat(Rt.ops.slice(1))),jt},Tt.prototype.diff=function(Rt,jt){if(this.ops===Rt.ops)return new Tt;var $t=[this,Rt].map(function(Ut){return Ut.map(function(Yt){if(Yt.insert!=null)return typeof Yt.insert=="string"?Yt.insert:kt;var Jt=Ut===Rt?"on":"with";throw new Error("diff() called "+Jt+" non-document")}).join("")}),Ft=new Tt,Ht=ut($t[0],$t[1],jt),Kt=St.iterator(this.ops),Bt=St.iterator(Rt.ops);return Ht.forEach(function(Ut){for(var Yt=Ut[1].length;Yt>0;){var Jt=0;switch(Ut[0]){case ut.INSERT:Jt=Math.min(Bt.peekLength(),Yt),Ft.push(Bt.next(Jt));break;case ut.DELETE:Jt=Math.min(Yt,Kt.peekLength()),Kt.next(Jt),Ft.delete(Jt);break;case ut.EQUAL:Jt=Math.min(Kt.peekLength(),Bt.peekLength(),Yt);var Zt=Kt.next(Jt),en=Bt.next(Jt);dt(Zt.insert,en.insert)?Ft.retain(Jt,St.attributes.diff(Zt.attributes,en.attributes)):Ft.push(en).delete(Jt);break}Yt-=Jt}}),Ft.chop()},Tt.prototype.eachLine=function(Rt,jt){jt=jt||`
`;for(var $t=St.iterator(this.ops),Ft=new Tt,Ht=0;$t.hasNext();){if($t.peekType()!=="insert")return;var Kt=$t.peek(),Bt=St.length(Kt)-$t.peekLength(),Ut=typeof Kt.insert=="string"?Kt.insert.indexOf(jt,Bt)-Bt:-1;if(Ut<0)Ft.push($t.next());else if(Ut>0)Ft.push($t.next(Ut));else{if(Rt(Ft,$t.next(1).attributes||{},Ht)===!1)return;Ht+=1,Ft=new Tt}}Ft.length()>0&&Rt(Ft,{},Ht)},Tt.prototype.transform=function(Rt,jt){if(jt=!!jt,typeof Rt=="number")return this.transformPosition(Rt,jt);for(var $t=St.iterator(this.ops),Ft=St.iterator(Rt.ops),Ht=new Tt;$t.hasNext()||Ft.hasNext();)if($t.peekType()==="insert"&&(jt||Ft.peekType()!=="insert"))Ht.retain(St.length($t.next()));else if(Ft.peekType()==="insert")Ht.push(Ft.next());else{var Kt=Math.min($t.peekLength(),Ft.peekLength()),Bt=$t.next(Kt),Ut=Ft.next(Kt);if(Bt.delete)continue;Ut.delete?Ht.push(Ut):Ht.retain(Kt,St.attributes.transform(Bt.attributes,Ut.attributes,jt))}return Ht.chop()},Tt.prototype.transformPosition=function(Rt,jt){jt=!!jt;for(var $t=St.iterator(this.ops),Ft=0;$t.hasNext()&&Ft<=Rt;){var Ht=$t.peekLength(),Kt=$t.peekType();if($t.next(),Kt==="delete"){Rt-=Math.min(Ht,Rt-Ft);continue}else Kt==="insert"&&(Ft<Rt||!jt)&&(Rt+=Ht);Ft+=Ht}return Rt},et.exports=Tt},function(et,ot){var ct=Object.prototype.hasOwnProperty,ut=Object.prototype.toString,dt=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,St=function($t){return typeof Array.isArray=="function"?Array.isArray($t):ut.call($t)==="[object Array]"},kt=function($t){if(!$t||ut.call($t)!=="[object Object]")return!1;var Ft=ct.call($t,"constructor"),Ht=$t.constructor&&$t.constructor.prototype&&ct.call($t.constructor.prototype,"isPrototypeOf");if($t.constructor&&!Ft&&!Ht)return!1;var Kt;for(Kt in $t);return typeof Kt>"u"||ct.call($t,Kt)},Tt=function($t,Ft){dt&&Ft.name==="__proto__"?dt($t,Ft.name,{enumerable:!0,configurable:!0,value:Ft.newValue,writable:!0}):$t[Ft.name]=Ft.newValue},Rt=function($t,Ft){if(Ft==="__proto__")if(ct.call($t,Ft)){if(ft)return ft($t,Ft).value}else return;return $t[Ft]};et.exports=function jt(){var $t,Ft,Ht,Kt,Bt,Ut,Yt=arguments[0],Jt=1,Zt=arguments.length,en=!1;for(typeof Yt=="boolean"&&(en=Yt,Yt=arguments[1]||{},Jt=2),(Yt==null||typeof Yt!="object"&&typeof Yt!="function")&&(Yt={});Jt<Zt;++Jt)if($t=arguments[Jt],$t!=null)for(Ft in $t)Ht=Rt(Yt,Ft),Kt=Rt($t,Ft),Yt!==Kt&&(en&&Kt&&(kt(Kt)||(Bt=St(Kt)))?(Bt?(Bt=!1,Ut=Ht&&St(Ht)?Ht:[]):Ut=Ht&&kt(Ht)?Ht:{},Tt(Yt,{name:Ft,newValue:jt(en,Ut,Kt)})):typeof Kt<"u"&&Tt(Yt,{name:Ft,newValue:Kt}));return Yt}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BlockEmbed=ot.bubbleFormats=void 0;var ut=function(){function sn(dn,mn){for(var yn=0;yn<mn.length;yn++){var vn=mn[yn];vn.enumerable=vn.enumerable||!1,vn.configurable=!0,"value"in vn&&(vn.writable=!0),Object.defineProperty(dn,vn.key,vn)}}return function(dn,mn,yn){return mn&&sn(dn.prototype,mn),yn&&sn(dn,yn),dn}}(),dt=function sn(dn,mn,yn){dn===null&&(dn=Function.prototype);var vn=Object.getOwnPropertyDescriptor(dn,mn);if(vn===void 0){var hn=Object.getPrototypeOf(dn);return hn===null?void 0:sn(hn,mn,yn)}else{if("value"in vn)return vn.value;var pn=vn.get;return pn===void 0?void 0:pn.call(yn)}},ft=ct(3),St=Yt(ft),kt=ct(2),Tt=Yt(kt),Rt=ct(0),jt=Yt(Rt),$t=ct(16),Ft=Yt($t),Ht=ct(6),Kt=Yt(Ht),Bt=ct(7),Ut=Yt(Bt);function Yt(sn){return sn&&sn.__esModule?sn:{default:sn}}function Jt(sn,dn){if(!(sn instanceof dn))throw new TypeError("Cannot call a class as a function")}function Zt(sn,dn){if(!sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dn&&(typeof dn=="object"||typeof dn=="function")?dn:sn}function en(sn,dn){if(typeof dn!="function"&&dn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof dn);sn.prototype=Object.create(dn&&dn.prototype,{constructor:{value:sn,enumerable:!1,writable:!0,configurable:!0}}),dn&&(Object.setPrototypeOf?Object.setPrototypeOf(sn,dn):sn.__proto__=dn)}var tn=1,nn=function(sn){en(dn,sn);function dn(){return Jt(this,dn),Zt(this,(dn.__proto__||Object.getPrototypeOf(dn)).apply(this,arguments))}return ut(dn,[{key:"attach",value:function(){dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"attach",this).call(this),this.attributes=new jt.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new Tt.default().insert(this.value(),(0,St.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(yn,vn){var hn=jt.default.query(yn,jt.default.Scope.BLOCK_ATTRIBUTE);hn!=null&&this.attributes.attribute(hn,vn)}},{key:"formatAt",value:function(yn,vn,hn,pn){this.format(hn,pn)}},{key:"insertAt",value:function(yn,vn,hn){if(typeof vn=="string"&&vn.endsWith(`
`)){var pn=jt.default.create(ln.blotName);this.parent.insertBefore(pn,yn===0?this:this.next),pn.insertAt(0,vn.slice(0,-1))}else dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"insertAt",this).call(this,yn,vn,hn)}}]),dn}(jt.default.Embed);nn.scope=jt.default.Scope.BLOCK_BLOT;var ln=function(sn){en(dn,sn);function dn(mn){Jt(this,dn);var yn=Zt(this,(dn.__proto__||Object.getPrototypeOf(dn)).call(this,mn));return yn.cache={},yn}return ut(dn,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(jt.default.Leaf).reduce(function(yn,vn){return vn.length()===0?yn:yn.insert(vn.value(),an(vn))},new Tt.default).insert(`
`,an(this))),this.cache.delta}},{key:"deleteAt",value:function(yn,vn){dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"deleteAt",this).call(this,yn,vn),this.cache={}}},{key:"formatAt",value:function(yn,vn,hn,pn){vn<=0||(jt.default.query(hn,jt.default.Scope.BLOCK)?yn+vn===this.length()&&this.format(hn,pn):dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"formatAt",this).call(this,yn,Math.min(vn,this.length()-yn-1),hn,pn),this.cache={})}},{key:"insertAt",value:function(yn,vn,hn){if(hn!=null)return dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"insertAt",this).call(this,yn,vn,hn);if(vn.length!==0){var pn=vn.split(`
`),rn=pn.shift();rn.length>0&&(yn<this.length()-1||this.children.tail==null?dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"insertAt",this).call(this,Math.min(yn,this.length()-1),rn):this.children.tail.insertAt(this.children.tail.length(),rn),this.cache={});var on=this;pn.reduce(function(gn,un){return on=on.split(gn,!0),on.insertAt(0,un),un.length},yn+rn.length)}}},{key:"insertBefore",value:function(yn,vn){var hn=this.children.head;dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"insertBefore",this).call(this,yn,vn),hn instanceof Ft.default&&hn.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"length",this).call(this)+tn),this.cache.length}},{key:"moveChildren",value:function(yn,vn){dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"moveChildren",this).call(this,yn,vn),this.cache={}}},{key:"optimize",value:function(yn){dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"optimize",this).call(this,yn),this.cache={}}},{key:"path",value:function(yn){return dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"path",this).call(this,yn,!0)}},{key:"removeChild",value:function(yn){dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"removeChild",this).call(this,yn),this.cache={}}},{key:"split",value:function(yn){var vn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(vn&&(yn===0||yn>=this.length()-tn)){var hn=this.clone();return yn===0?(this.parent.insertBefore(hn,this),this):(this.parent.insertBefore(hn,this.next),hn)}else{var pn=dt(dn.prototype.__proto__||Object.getPrototypeOf(dn.prototype),"split",this).call(this,yn,vn);return this.cache={},pn}}}]),dn}(jt.default.Block);ln.blotName="block",ln.tagName="P",ln.defaultChild="break",ln.allowedChildren=[Kt.default,jt.default.Embed,Ut.default];function an(sn){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return sn==null||(typeof sn.formats=="function"&&(dn=(0,St.default)(dn,sn.formats())),sn.parent==null||sn.parent.blotName=="scroll"||sn.parent.statics.scope!==sn.statics.scope)?dn:an(sn.parent,dn)}ot.bubbleFormats=an,ot.BlockEmbed=nn,ot.default=ln},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.overload=ot.expandConfig=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(on){return typeof on}:function(on){return on&&typeof Symbol=="function"&&on.constructor===Symbol&&on!==Symbol.prototype?"symbol":typeof on},dt=function(){function on(gn,un){var xn=[],En=!0,wn=!1,kn=void 0;try{for(var Sn=gn[Symbol.iterator](),An;!(En=(An=Sn.next()).done)&&(xn.push(An.value),!(un&&xn.length===un));En=!0);}catch(Cn){wn=!0,kn=Cn}finally{try{!En&&Sn.return&&Sn.return()}finally{if(wn)throw kn}}return xn}return function(gn,un){if(Array.isArray(gn))return gn;if(Symbol.iterator in Object(gn))return on(gn,un);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function on(gn,un){for(var xn=0;xn<un.length;xn++){var En=un[xn];En.enumerable=En.enumerable||!1,En.configurable=!0,"value"in En&&(En.writable=!0),Object.defineProperty(gn,En.key,En)}}return function(gn,un,xn){return un&&on(gn.prototype,un),xn&&on(gn,xn),gn}}();ct(50);var St=ct(2),kt=an(St),Tt=ct(14),Rt=an(Tt),jt=ct(8),$t=an(jt),Ft=ct(9),Ht=an(Ft),Kt=ct(0),Bt=an(Kt),Ut=ct(15),Yt=an(Ut),Jt=ct(3),Zt=an(Jt),en=ct(10),tn=an(en),nn=ct(34),ln=an(nn);function an(on){return on&&on.__esModule?on:{default:on}}function sn(on,gn,un){return gn in on?Object.defineProperty(on,gn,{value:un,enumerable:!0,configurable:!0,writable:!0}):on[gn]=un,on}function dn(on,gn){if(!(on instanceof gn))throw new TypeError("Cannot call a class as a function")}var mn=(0,tn.default)("quill"),yn=function(){ft(on,null,[{key:"debug",value:function(un){un===!0&&(un="log"),tn.default.level(un)}},{key:"find",value:function(un){return un.__quill||Bt.default.find(un)}},{key:"import",value:function(un){return this.imports[un]==null&&mn.error("Cannot import "+un+". Are you sure it was registered?"),this.imports[un]}},{key:"register",value:function(un,xn){var En=this,wn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof un!="string"){var kn=un.attrName||un.blotName;typeof kn=="string"?this.register("formats/"+kn,un,xn):Object.keys(un).forEach(function(Sn){En.register(Sn,un[Sn],xn)})}else this.imports[un]!=null&&!wn&&mn.warn("Overwriting "+un+" with",xn),this.imports[un]=xn,(un.startsWith("blots/")||un.startsWith("formats/"))&&xn.blotName!=="abstract"?Bt.default.register(xn):un.startsWith("modules")&&typeof xn.register=="function"&&xn.register()}}]);function on(gn){var un=this,xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(dn(this,on),this.options=vn(gn,xn),this.container=this.options.container,this.container==null)return mn.error("Invalid Quill container",gn);this.options.debug&&on.debug(this.options.debug);var En=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new $t.default,this.scroll=Bt.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new Rt.default(this.scroll),this.selection=new Yt.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on($t.default.events.EDITOR_CHANGE,function(kn){kn===$t.default.events.TEXT_CHANGE&&un.root.classList.toggle("ql-blank",un.editor.isBlank())}),this.emitter.on($t.default.events.SCROLL_UPDATE,function(kn,Sn){var An=un.selection.lastRange,Cn=An&&An.length===0?An.index:void 0;hn.call(un,function(){return un.editor.update(null,Sn,Cn)},kn)});var wn=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+En+"<p><br></p></div>");this.setContents(wn),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return ft(on,[{key:"addContainer",value:function(un){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof un=="string"){var En=un;un=document.createElement("div"),un.classList.add(En)}return this.container.insertBefore(un,xn),un}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(un,xn,En){var wn=this,kn=pn(un,xn,En),Sn=dt(kn,4);return un=Sn[0],xn=Sn[1],En=Sn[3],hn.call(this,function(){return wn.editor.deleteText(un,xn)},En,un,-1*xn)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(un),this.container.classList.toggle("ql-disabled",!un)}},{key:"focus",value:function(){var un=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=un,this.scrollIntoView()}},{key:"format",value:function(un,xn){var En=this,wn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$t.default.sources.API;return hn.call(this,function(){var kn=En.getSelection(!0),Sn=new kt.default;if(kn==null)return Sn;if(Bt.default.query(un,Bt.default.Scope.BLOCK))Sn=En.editor.formatLine(kn.index,kn.length,sn({},un,xn));else{if(kn.length===0)return En.selection.format(un,xn),Sn;Sn=En.editor.formatText(kn.index,kn.length,sn({},un,xn))}return En.setSelection(kn,$t.default.sources.SILENT),Sn},wn)}},{key:"formatLine",value:function(un,xn,En,wn,kn){var Sn=this,An=void 0,Cn=pn(un,xn,En,wn,kn),Tn=dt(Cn,4);return un=Tn[0],xn=Tn[1],An=Tn[2],kn=Tn[3],hn.call(this,function(){return Sn.editor.formatLine(un,xn,An)},kn,un,0)}},{key:"formatText",value:function(un,xn,En,wn,kn){var Sn=this,An=void 0,Cn=pn(un,xn,En,wn,kn),Tn=dt(Cn,4);return un=Tn[0],xn=Tn[1],An=Tn[2],kn=Tn[3],hn.call(this,function(){return Sn.editor.formatText(un,xn,An)},kn,un,0)}},{key:"getBounds",value:function(un){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,En=void 0;typeof un=="number"?En=this.selection.getBounds(un,xn):En=this.selection.getBounds(un.index,un.length);var wn=this.container.getBoundingClientRect();return{bottom:En.bottom-wn.top,height:En.height,left:En.left-wn.left,right:En.right-wn.left,top:En.top-wn.top,width:En.width}}},{key:"getContents",value:function(){var un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-un,En=pn(un,xn),wn=dt(En,2);return un=wn[0],xn=wn[1],this.editor.getContents(un,xn)}},{key:"getFormat",value:function(){var un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof un=="number"?this.editor.getFormat(un,xn):this.editor.getFormat(un.index,un.length)}},{key:"getIndex",value:function(un){return un.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(un){return this.scroll.leaf(un)}},{key:"getLine",value:function(un){return this.scroll.line(un)}},{key:"getLines",value:function(){var un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof un!="number"?this.scroll.lines(un.index,un.length):this.scroll.lines(un,xn)}},{key:"getModule",value:function(un){return this.theme.modules[un]}},{key:"getSelection",value:function(){var un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return un&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-un,En=pn(un,xn),wn=dt(En,2);return un=wn[0],xn=wn[1],this.editor.getText(un,xn)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(un,xn,En){var wn=this,kn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:on.sources.API;return hn.call(this,function(){return wn.editor.insertEmbed(un,xn,En)},kn,un)}},{key:"insertText",value:function(un,xn,En,wn,kn){var Sn=this,An=void 0,Cn=pn(un,0,En,wn,kn),Tn=dt(Cn,4);return un=Tn[0],An=Tn[2],kn=Tn[3],hn.call(this,function(){return Sn.editor.insertText(un,xn,An)},kn,un,xn.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(un,xn,En){this.clipboard.dangerouslyPasteHTML(un,xn,En)}},{key:"removeFormat",value:function(un,xn,En){var wn=this,kn=pn(un,xn,En),Sn=dt(kn,4);return un=Sn[0],xn=Sn[1],En=Sn[3],hn.call(this,function(){return wn.editor.removeFormat(un,xn)},En,un)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(un){var xn=this,En=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$t.default.sources.API;return hn.call(this,function(){un=new kt.default(un);var wn=xn.getLength(),kn=xn.editor.deleteText(0,wn),Sn=xn.editor.applyDelta(un),An=Sn.ops[Sn.ops.length-1];An!=null&&typeof An.insert=="string"&&An.insert[An.insert.length-1]===`
`&&(xn.editor.deleteText(xn.getLength()-1,1),Sn.delete(1));var Cn=kn.compose(Sn);return Cn},En)}},{key:"setSelection",value:function(un,xn,En){if(un==null)this.selection.setRange(null,xn||on.sources.API);else{var wn=pn(un,xn,En),kn=dt(wn,4);un=kn[0],xn=kn[1],En=kn[3],this.selection.setRange(new Ut.Range(un,xn),En),En!==$t.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(un){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$t.default.sources.API,En=new kt.default().insert(un);return this.setContents(En,xn)}},{key:"update",value:function(){var un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$t.default.sources.USER,xn=this.scroll.update(un);return this.selection.update(un),xn}},{key:"updateContents",value:function(un){var xn=this,En=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$t.default.sources.API;return hn.call(this,function(){return un=new kt.default(un),xn.editor.applyDelta(un,En)},En,!0)}}]),on}();yn.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},yn.events=$t.default.events,yn.sources=$t.default.sources,yn.version="1.3.7",yn.imports={delta:kt.default,parchment:Bt.default,"core/module":Ht.default,"core/theme":ln.default};function vn(on,gn){if(gn=(0,Zt.default)(!0,{container:on,modules:{clipboard:!0,keyboard:!0,history:!0}},gn),!gn.theme||gn.theme===yn.DEFAULTS.theme)gn.theme=ln.default;else if(gn.theme=yn.import("themes/"+gn.theme),gn.theme==null)throw new Error("Invalid theme "+gn.theme+". Did you register it?");var un=(0,Zt.default)(!0,{},gn.theme.DEFAULTS);[un,gn].forEach(function(wn){wn.modules=wn.modules||{},Object.keys(wn.modules).forEach(function(kn){wn.modules[kn]===!0&&(wn.modules[kn]={})})});var xn=Object.keys(un.modules).concat(Object.keys(gn.modules)),En=xn.reduce(function(wn,kn){var Sn=yn.import("modules/"+kn);return Sn==null?mn.error("Cannot load "+kn+" module. Are you sure you registered it?"):wn[kn]=Sn.DEFAULTS||{},wn},{});return gn.modules!=null&&gn.modules.toolbar&&gn.modules.toolbar.constructor!==Object&&(gn.modules.toolbar={container:gn.modules.toolbar}),gn=(0,Zt.default)(!0,{},yn.DEFAULTS,{modules:En},un,gn),["bounds","container","scrollingContainer"].forEach(function(wn){typeof gn[wn]=="string"&&(gn[wn]=document.querySelector(gn[wn]))}),gn.modules=Object.keys(gn.modules).reduce(function(wn,kn){return gn.modules[kn]&&(wn[kn]=gn.modules[kn]),wn},{}),gn}function hn(on,gn,un,xn){if(this.options.strict&&!this.isEnabled()&&gn===$t.default.sources.USER)return new kt.default;var En=un==null?null:this.getSelection(),wn=this.editor.delta,kn=on();if(En!=null&&(un===!0&&(un=En.index),xn==null?En=rn(En,kn,gn):xn!==0&&(En=rn(En,un,xn,gn)),this.setSelection(En,$t.default.sources.SILENT)),kn.length()>0){var Sn,An=[$t.default.events.TEXT_CHANGE,kn,wn,gn];if((Sn=this.emitter).emit.apply(Sn,[$t.default.events.EDITOR_CHANGE].concat(An)),gn!==$t.default.sources.SILENT){var Cn;(Cn=this.emitter).emit.apply(Cn,An)}}return kn}function pn(on,gn,un,xn,En){var wn={};return typeof on.index=="number"&&typeof on.length=="number"?typeof gn!="number"?(En=xn,xn=un,un=gn,gn=on.length,on=on.index):(gn=on.length,on=on.index):typeof gn!="number"&&(En=xn,xn=un,un=gn,gn=0),(typeof un>"u"?"undefined":ut(un))==="object"?(wn=un,En=xn):typeof un=="string"&&(xn!=null?wn[un]=xn:En=un),En=En||$t.default.sources.API,[on,gn,wn,En]}function rn(on,gn,un,xn){if(on==null)return null;var En=void 0,wn=void 0;if(gn instanceof kt.default){var kn=[on.index,on.index+on.length].map(function(Tn){return gn.transformPosition(Tn,xn!==$t.default.sources.USER)}),Sn=dt(kn,2);En=Sn[0],wn=Sn[1]}else{var An=[on.index,on.index+on.length].map(function(Tn){return Tn<gn||Tn===gn&&xn===$t.default.sources.USER?Tn:un>=0?Tn+un:Math.max(gn,Tn+un)}),Cn=dt(An,2);En=Cn[0],wn=Cn[1]}return new Ut.Range(En,wn-En)}ot.expandConfig=vn,ot.overload=pn,ot.default=yn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Kt(Bt,Ut){for(var Yt=0;Yt<Ut.length;Yt++){var Jt=Ut[Yt];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Bt,Jt.key,Jt)}}return function(Bt,Ut,Yt){return Ut&&Kt(Bt.prototype,Ut),Yt&&Kt(Bt,Yt),Bt}}(),dt=function Kt(Bt,Ut,Yt){Bt===null&&(Bt=Function.prototype);var Jt=Object.getOwnPropertyDescriptor(Bt,Ut);if(Jt===void 0){var Zt=Object.getPrototypeOf(Bt);return Zt===null?void 0:Kt(Zt,Ut,Yt)}else{if("value"in Jt)return Jt.value;var en=Jt.get;return en===void 0?void 0:en.call(Yt)}},ft=ct(7),St=Rt(ft),kt=ct(0),Tt=Rt(kt);function Rt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function jt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function $t(Kt,Bt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Kt}function Ft(Kt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Kt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Bt):Kt.__proto__=Bt)}var Ht=function(Kt){Ft(Bt,Kt);function Bt(){return jt(this,Bt),$t(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"formatAt",value:function(Yt,Jt,Zt,en){if(Bt.compare(this.statics.blotName,Zt)<0&&Tt.default.query(Zt,Tt.default.Scope.BLOT)){var tn=this.isolate(Yt,Jt);en&&tn.wrap(Zt,en)}else dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"formatAt",this).call(this,Yt,Jt,Zt,en)}},{key:"optimize",value:function(Yt){if(dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"optimize",this).call(this,Yt),this.parent instanceof Bt&&Bt.compare(this.statics.blotName,this.parent.statics.blotName)>0){var Jt=this.parent.isolate(this.offset(),this.length());this.moveChildren(Jt),Jt.wrap(this)}}}],[{key:"compare",value:function(Yt,Jt){var Zt=Bt.order.indexOf(Yt),en=Bt.order.indexOf(Jt);return Zt>=0||en>=0?Zt-en:Yt===Jt?0:Yt<Jt?-1:1}}]),Bt}(Tt.default.Inline);Ht.allowedChildren=[Ht,Tt.default.Embed,St.default],Ht.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],ot.default=Ht},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,$t){if(!(jt instanceof $t))throw new TypeError("Cannot call a class as a function")}function kt(jt,$t){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&(typeof $t=="object"||typeof $t=="function")?$t:jt}function Tt(jt,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $t);jt.prototype=Object.create($t&&$t.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),$t&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,$t):jt.__proto__=$t)}var Rt=function(jt){Tt($t,jt);function $t(){return St(this,$t),kt(this,($t.__proto__||Object.getPrototypeOf($t)).apply(this,arguments))}return $t}(dt.default.Text);ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ut(Yt,Jt){for(var Zt=0;Zt<Jt.length;Zt++){var en=Jt[Zt];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Yt,en.key,en)}}return function(Yt,Jt,Zt){return Jt&&Ut(Yt.prototype,Jt),Zt&&Ut(Yt,Zt),Yt}}(),dt=function Ut(Yt,Jt,Zt){Yt===null&&(Yt=Function.prototype);var en=Object.getOwnPropertyDescriptor(Yt,Jt);if(en===void 0){var tn=Object.getPrototypeOf(Yt);return tn===null?void 0:Ut(tn,Jt,Zt)}else{if("value"in en)return en.value;var nn=en.get;return nn===void 0?void 0:nn.call(Zt)}},ft=ct(54),St=Rt(ft),kt=ct(10),Tt=Rt(kt);function Rt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function jt(Ut,Yt){if(!(Ut instanceof Yt))throw new TypeError("Cannot call a class as a function")}function $t(Ut,Yt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Yt&&(typeof Yt=="object"||typeof Yt=="function")?Yt:Ut}function Ft(Ut,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Yt);Ut.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Yt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Yt):Ut.__proto__=Yt)}var Ht=(0,Tt.default)("quill:events"),Kt=["selectionchange","mousedown","mouseup","click"];Kt.forEach(function(Ut){document.addEventListener(Ut,function(){for(var Yt=arguments.length,Jt=Array(Yt),Zt=0;Zt<Yt;Zt++)Jt[Zt]=arguments[Zt];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(en){if(en.__quill&&en.__quill.emitter){var tn;(tn=en.__quill.emitter).handleDOM.apply(tn,Jt)}})})});var Bt=function(Ut){Ft(Yt,Ut);function Yt(){jt(this,Yt);var Jt=$t(this,(Yt.__proto__||Object.getPrototypeOf(Yt)).call(this));return Jt.listeners={},Jt.on("error",Ht.error),Jt}return ut(Yt,[{key:"emit",value:function(){Ht.log.apply(Ht,arguments),dt(Yt.prototype.__proto__||Object.getPrototypeOf(Yt.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(Zt){for(var en=arguments.length,tn=Array(en>1?en-1:0),nn=1;nn<en;nn++)tn[nn-1]=arguments[nn];(this.listeners[Zt.type]||[]).forEach(function(ln){var an=ln.node,sn=ln.handler;(Zt.target===an||an.contains(Zt.target))&&sn.apply(void 0,[Zt].concat(tn))})}},{key:"listenDOM",value:function(Zt,en,tn){this.listeners[Zt]||(this.listeners[Zt]=[]),this.listeners[Zt].push({node:en,handler:tn})}}]),Yt}(St.default);Bt.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},Bt.sources={API:"api",SILENT:"silent",USER:"user"},ot.default=Bt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});function ut(ft,St){if(!(ft instanceof St))throw new TypeError("Cannot call a class as a function")}var dt=function ft(St){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ut(this,ft),this.quill=St,this.options=kt};dt.DEFAULTS={},ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=["error","warn","log","info"],dt="warn";function ft(kt){if(ut.indexOf(kt)<=ut.indexOf(dt)){for(var Tt,Rt=arguments.length,jt=Array(Rt>1?Rt-1:0),$t=1;$t<Rt;$t++)jt[$t-1]=arguments[$t];(Tt=console)[kt].apply(Tt,jt)}}function St(kt){return ut.reduce(function(Tt,Rt){return Tt[Rt]=ft.bind(console,Rt,kt),Tt},{})}ft.level=St.level=function(kt){dt=kt},ot.default=St},function(et,ot,ct){var ut=Array.prototype.slice,dt=ct(52),ft=ct(53),St=et.exports=function(jt,$t,Ft){return Ft||(Ft={}),jt===$t?!0:jt instanceof Date&&$t instanceof Date?jt.getTime()===$t.getTime():!jt||!$t||typeof jt!="object"&&typeof $t!="object"?Ft.strict?jt===$t:jt==$t:Rt(jt,$t,Ft)};function kt(jt){return jt==null}function Tt(jt){return!(!jt||typeof jt!="object"||typeof jt.length!="number"||typeof jt.copy!="function"||typeof jt.slice!="function"||jt.length>0&&typeof jt[0]!="number")}function Rt(jt,$t,Ft){var Ht,Kt;if(kt(jt)||kt($t)||jt.prototype!==$t.prototype)return!1;if(ft(jt))return ft($t)?(jt=ut.call(jt),$t=ut.call($t),St(jt,$t,Ft)):!1;if(Tt(jt)){if(!Tt($t)||jt.length!==$t.length)return!1;for(Ht=0;Ht<jt.length;Ht++)if(jt[Ht]!==$t[Ht])return!1;return!0}try{var Bt=dt(jt),Ut=dt($t)}catch{return!1}if(Bt.length!=Ut.length)return!1;for(Bt.sort(),Ut.sort(),Ht=Bt.length-1;Ht>=0;Ht--)if(Bt[Ht]!=Ut[Ht])return!1;for(Ht=Bt.length-1;Ht>=0;Ht--)if(Kt=Bt[Ht],!St(jt[Kt],$t[Kt],Ft))return!1;return typeof jt==typeof $t}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(1),dt=function(){function ft(St,kt,Tt){Tt===void 0&&(Tt={}),this.attrName=St,this.keyName=kt;var Rt=ut.Scope.TYPE&ut.Scope.ATTRIBUTE;Tt.scope!=null?this.scope=Tt.scope&ut.Scope.LEVEL|Rt:this.scope=ut.Scope.ATTRIBUTE,Tt.whitelist!=null&&(this.whitelist=Tt.whitelist)}return ft.keys=function(St){return[].map.call(St.attributes,function(kt){return kt.name})},ft.prototype.add=function(St,kt){return this.canAdd(St,kt)?(St.setAttribute(this.keyName,kt),!0):!1},ft.prototype.canAdd=function(St,kt){var Tt=ut.query(St,ut.Scope.BLOT&(this.scope|ut.Scope.TYPE));return Tt==null?!1:this.whitelist==null?!0:typeof kt=="string"?this.whitelist.indexOf(kt.replace(/["']/g,""))>-1:this.whitelist.indexOf(kt)>-1},ft.prototype.remove=function(St){St.removeAttribute(this.keyName)},ft.prototype.value=function(St){var kt=St.getAttribute(this.keyName);return this.canAdd(St,kt)&&kt?kt:""},ft}();ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Code=void 0;var ut=function(){function nn(ln,an){var sn=[],dn=!0,mn=!1,yn=void 0;try{for(var vn=ln[Symbol.iterator](),hn;!(dn=(hn=vn.next()).done)&&(sn.push(hn.value),!(an&&sn.length===an));dn=!0);}catch(pn){mn=!0,yn=pn}finally{try{!dn&&vn.return&&vn.return()}finally{if(mn)throw yn}}return sn}return function(ln,an){if(Array.isArray(ln))return ln;if(Symbol.iterator in Object(ln))return nn(ln,an);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function nn(ln,an){for(var sn=0;sn<an.length;sn++){var dn=an[sn];dn.enumerable=dn.enumerable||!1,dn.configurable=!0,"value"in dn&&(dn.writable=!0),Object.defineProperty(ln,dn.key,dn)}}return function(ln,an,sn){return an&&nn(ln.prototype,an),sn&&nn(ln,sn),ln}}(),ft=function nn(ln,an,sn){ln===null&&(ln=Function.prototype);var dn=Object.getOwnPropertyDescriptor(ln,an);if(dn===void 0){var mn=Object.getPrototypeOf(ln);return mn===null?void 0:nn(mn,an,sn)}else{if("value"in dn)return dn.value;var yn=dn.get;return yn===void 0?void 0:yn.call(sn)}},St=ct(2),kt=Ut(St),Tt=ct(0),Rt=Ut(Tt),jt=ct(4),$t=Ut(jt),Ft=ct(6),Ht=Ut(Ft),Kt=ct(7),Bt=Ut(Kt);function Ut(nn){return nn&&nn.__esModule?nn:{default:nn}}function Yt(nn,ln){if(!(nn instanceof ln))throw new TypeError("Cannot call a class as a function")}function Jt(nn,ln){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ln&&(typeof ln=="object"||typeof ln=="function")?ln:nn}function Zt(nn,ln){if(typeof ln!="function"&&ln!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ln);nn.prototype=Object.create(ln&&ln.prototype,{constructor:{value:nn,enumerable:!1,writable:!0,configurable:!0}}),ln&&(Object.setPrototypeOf?Object.setPrototypeOf(nn,ln):nn.__proto__=ln)}var en=function(nn){Zt(ln,nn);function ln(){return Yt(this,ln),Jt(this,(ln.__proto__||Object.getPrototypeOf(ln)).apply(this,arguments))}return ln}(Ht.default);en.blotName="code",en.tagName="CODE";var tn=function(nn){Zt(ln,nn);function ln(){return Yt(this,ln),Jt(this,(ln.__proto__||Object.getPrototypeOf(ln)).apply(this,arguments))}return dt(ln,[{key:"delta",value:function(){var sn=this,dn=this.domNode.textContent;return dn.endsWith(`
`)&&(dn=dn.slice(0,-1)),dn.split(`
`).reduce(function(mn,yn){return mn.insert(yn).insert(`
`,sn.formats())},new kt.default)}},{key:"format",value:function(sn,dn){if(!(sn===this.statics.blotName&&dn)){var mn=this.descendant(Bt.default,this.length()-1),yn=ut(mn,1),vn=yn[0];vn!=null&&vn.deleteAt(vn.length()-1,1),ft(ln.prototype.__proto__||Object.getPrototypeOf(ln.prototype),"format",this).call(this,sn,dn)}}},{key:"formatAt",value:function(sn,dn,mn,yn){if(dn!==0&&!(Rt.default.query(mn,Rt.default.Scope.BLOCK)==null||mn===this.statics.blotName&&yn===this.statics.formats(this.domNode))){var vn=this.newlineIndex(sn);if(!(vn<0||vn>=sn+dn)){var hn=this.newlineIndex(sn,!0)+1,pn=vn-hn+1,rn=this.isolate(hn,pn),on=rn.next;rn.format(mn,yn),on instanceof ln&&on.formatAt(0,sn-hn+dn-pn,mn,yn)}}}},{key:"insertAt",value:function(sn,dn,mn){if(mn==null){var yn=this.descendant(Bt.default,sn),vn=ut(yn,2),hn=vn[0],pn=vn[1];hn.insertAt(pn,dn)}}},{key:"length",value:function(){var sn=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?sn:sn+1}},{key:"newlineIndex",value:function(sn){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(dn)return this.domNode.textContent.slice(0,sn).lastIndexOf(`
`);var mn=this.domNode.textContent.slice(sn).indexOf(`
`);return mn>-1?sn+mn:-1}},{key:"optimize",value:function(sn){this.domNode.textContent.endsWith(`
`)||this.appendChild(Rt.default.create("text",`
`)),ft(ln.prototype.__proto__||Object.getPrototypeOf(ln.prototype),"optimize",this).call(this,sn);var dn=this.next;dn!=null&&dn.prev===this&&dn.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===dn.statics.formats(dn.domNode)&&(dn.optimize(sn),dn.moveChildren(this),dn.remove())}},{key:"replace",value:function(sn){ft(ln.prototype.__proto__||Object.getPrototypeOf(ln.prototype),"replace",this).call(this,sn),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(dn){var mn=Rt.default.find(dn);mn==null?dn.parentNode.removeChild(dn):mn instanceof Rt.default.Embed?mn.remove():mn.unwrap()})}}],[{key:"create",value:function(sn){var dn=ft(ln.__proto__||Object.getPrototypeOf(ln),"create",this).call(this,sn);return dn.setAttribute("spellcheck",!1),dn}},{key:"formats",value:function(){return!0}}]),ln}($t.default);tn.blotName="code-block",tn.tagName="PRE",tn.TAB="  ",ot.Code=en,ot.default=tn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(on){return typeof on}:function(on){return on&&typeof Symbol=="function"&&on.constructor===Symbol&&on!==Symbol.prototype?"symbol":typeof on},dt=function(){function on(gn,un){var xn=[],En=!0,wn=!1,kn=void 0;try{for(var Sn=gn[Symbol.iterator](),An;!(En=(An=Sn.next()).done)&&(xn.push(An.value),!(un&&xn.length===un));En=!0);}catch(Cn){wn=!0,kn=Cn}finally{try{!En&&Sn.return&&Sn.return()}finally{if(wn)throw kn}}return xn}return function(gn,un){if(Array.isArray(gn))return gn;if(Symbol.iterator in Object(gn))return on(gn,un);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function on(gn,un){for(var xn=0;xn<un.length;xn++){var En=un[xn];En.enumerable=En.enumerable||!1,En.configurable=!0,"value"in En&&(En.writable=!0),Object.defineProperty(gn,En.key,En)}}return function(gn,un,xn){return un&&on(gn.prototype,un),xn&&on(gn,xn),gn}}(),St=ct(2),kt=dn(St),Tt=ct(20),Rt=dn(Tt),jt=ct(0),$t=dn(jt),Ft=ct(13),Ht=dn(Ft),Kt=ct(24),Bt=dn(Kt),Ut=ct(4),Yt=dn(Ut),Jt=ct(16),Zt=dn(Jt),en=ct(21),tn=dn(en),nn=ct(11),ln=dn(nn),an=ct(3),sn=dn(an);function dn(on){return on&&on.__esModule?on:{default:on}}function mn(on,gn,un){return gn in on?Object.defineProperty(on,gn,{value:un,enumerable:!0,configurable:!0,writable:!0}):on[gn]=un,on}function yn(on,gn){if(!(on instanceof gn))throw new TypeError("Cannot call a class as a function")}var vn=/^[ -~]*$/,hn=function(){function on(gn){yn(this,on),this.scroll=gn,this.delta=this.getDelta()}return ft(on,[{key:"applyDelta",value:function(un){var xn=this,En=!1;this.scroll.update();var wn=this.scroll.length();return this.scroll.batchStart(),un=rn(un),un.reduce(function(kn,Sn){var An=Sn.retain||Sn.delete||Sn.insert.length||1,Cn=Sn.attributes||{};if(Sn.insert!=null){if(typeof Sn.insert=="string"){var Tn=Sn.insert;Tn.endsWith(`
`)&&En&&(En=!1,Tn=Tn.slice(0,-1)),kn>=wn&&!Tn.endsWith(`
`)&&(En=!0),xn.scroll.insertAt(kn,Tn);var _n=xn.scroll.line(kn),Dn=dt(_n,2),$n=Dn[0],On=Dn[1],Mn=(0,sn.default)({},(0,Ut.bubbleFormats)($n));if($n instanceof Yt.default){var Vn=$n.descendant($t.default.Leaf,On),Wn=dt(Vn,1),Yn=Wn[0];Mn=(0,sn.default)(Mn,(0,Ut.bubbleFormats)(Yn))}Cn=Rt.default.attributes.diff(Mn,Cn)||{}}else if(ut(Sn.insert)==="object"){var Rn=Object.keys(Sn.insert)[0];if(Rn==null)return kn;xn.scroll.insertAt(kn,Rn,Sn.insert[Rn])}wn+=An}return Object.keys(Cn).forEach(function(Pn){xn.scroll.formatAt(kn,An,Pn,Cn[Pn])}),kn+An},0),un.reduce(function(kn,Sn){return typeof Sn.delete=="number"?(xn.scroll.deleteAt(kn,Sn.delete),kn):kn+(Sn.retain||Sn.insert.length||1)},0),this.scroll.batchEnd(),this.update(un)}},{key:"deleteText",value:function(un,xn){return this.scroll.deleteAt(un,xn),this.update(new kt.default().retain(un).delete(xn))}},{key:"formatLine",value:function(un,xn){var En=this,wn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(wn).forEach(function(kn){if(!(En.scroll.whitelist!=null&&!En.scroll.whitelist[kn])){var Sn=En.scroll.lines(un,Math.max(xn,1)),An=xn;Sn.forEach(function(Cn){var Tn=Cn.length();if(!(Cn instanceof Ht.default))Cn.format(kn,wn[kn]);else{var _n=un-Cn.offset(En.scroll),Dn=Cn.newlineIndex(_n+An)-_n+1;Cn.formatAt(_n,Dn,kn,wn[kn])}An-=Tn})}}),this.scroll.optimize(),this.update(new kt.default().retain(un).retain(xn,(0,tn.default)(wn)))}},{key:"formatText",value:function(un,xn){var En=this,wn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(wn).forEach(function(kn){En.scroll.formatAt(un,xn,kn,wn[kn])}),this.update(new kt.default().retain(un).retain(xn,(0,tn.default)(wn)))}},{key:"getContents",value:function(un,xn){return this.delta.slice(un,un+xn)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(un,xn){return un.concat(xn.delta())},new kt.default)}},{key:"getFormat",value:function(un){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,En=[],wn=[];xn===0?this.scroll.path(un).forEach(function(Sn){var An=dt(Sn,1),Cn=An[0];Cn instanceof Yt.default?En.push(Cn):Cn instanceof $t.default.Leaf&&wn.push(Cn)}):(En=this.scroll.lines(un,xn),wn=this.scroll.descendants($t.default.Leaf,un,xn));var kn=[En,wn].map(function(Sn){if(Sn.length===0)return{};for(var An=(0,Ut.bubbleFormats)(Sn.shift());Object.keys(An).length>0;){var Cn=Sn.shift();if(Cn==null)return An;An=pn((0,Ut.bubbleFormats)(Cn),An)}return An});return sn.default.apply(sn.default,kn)}},{key:"getText",value:function(un,xn){return this.getContents(un,xn).filter(function(En){return typeof En.insert=="string"}).map(function(En){return En.insert}).join("")}},{key:"insertEmbed",value:function(un,xn,En){return this.scroll.insertAt(un,xn,En),this.update(new kt.default().retain(un).insert(mn({},xn,En)))}},{key:"insertText",value:function(un,xn){var En=this,wn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return xn=xn.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(un,xn),Object.keys(wn).forEach(function(kn){En.scroll.formatAt(un,xn.length,kn,wn[kn])}),this.update(new kt.default().retain(un).insert(xn,(0,tn.default)(wn)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var un=this.scroll.children.head;return un.statics.blotName!==Yt.default.blotName||un.children.length>1?!1:un.children.head instanceof Zt.default}},{key:"removeFormat",value:function(un,xn){var En=this.getText(un,xn),wn=this.scroll.line(un+xn),kn=dt(wn,2),Sn=kn[0],An=kn[1],Cn=0,Tn=new kt.default;Sn!=null&&(Sn instanceof Ht.default?Cn=Sn.newlineIndex(An)-An+1:Cn=Sn.length()-An,Tn=Sn.delta().slice(An,An+Cn-1).insert(`
`));var _n=this.getContents(un,xn+Cn),Dn=_n.diff(new kt.default().insert(En).concat(Tn)),$n=new kt.default().retain(un).concat(Dn);return this.applyDelta($n)}},{key:"update",value:function(un){var xn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],En=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,wn=this.delta;if(xn.length===1&&xn[0].type==="characterData"&&xn[0].target.data.match(vn)&&$t.default.find(xn[0].target)){var kn=$t.default.find(xn[0].target),Sn=(0,Ut.bubbleFormats)(kn),An=kn.offset(this.scroll),Cn=xn[0].oldValue.replace(Bt.default.CONTENTS,""),Tn=new kt.default().insert(Cn),_n=new kt.default().insert(kn.value()),Dn=new kt.default().retain(An).concat(Tn.diff(_n,En));un=Dn.reduce(function($n,On){return On.insert?$n.insert(On.insert,Sn):$n.push(On)},new kt.default),this.delta=wn.compose(un)}else this.delta=this.getDelta(),(!un||!(0,ln.default)(wn.compose(un),this.delta))&&(un=wn.diff(this.delta,En));return un}}]),on}();function pn(on,gn){return Object.keys(gn).reduce(function(un,xn){return on[xn]==null||(gn[xn]===on[xn]?un[xn]=gn[xn]:Array.isArray(gn[xn])?gn[xn].indexOf(on[xn])<0&&(un[xn]=gn[xn].concat([on[xn]])):un[xn]=[gn[xn],on[xn]]),un},{})}function rn(on){return on.reduce(function(gn,un){if(un.insert===1){var xn=(0,tn.default)(un.attributes);return delete xn.image,gn.insert({image:un.attributes.image},xn)}if(un.attributes!=null&&(un.attributes.list===!0||un.attributes.bullet===!0)&&(un=(0,tn.default)(un),un.attributes.list?un.attributes.list="ordered":(un.attributes.list="bullet",delete un.attributes.bullet)),typeof un.insert=="string"){var En=un.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return gn.insert(En,un.attributes)}return gn.push(un)},new kt.default)}ot.default=hn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Range=void 0;var ut=function(){function nn(ln,an){var sn=[],dn=!0,mn=!1,yn=void 0;try{for(var vn=ln[Symbol.iterator](),hn;!(dn=(hn=vn.next()).done)&&(sn.push(hn.value),!(an&&sn.length===an));dn=!0);}catch(pn){mn=!0,yn=pn}finally{try{!dn&&vn.return&&vn.return()}finally{if(mn)throw yn}}return sn}return function(ln,an){if(Array.isArray(ln))return ln;if(Symbol.iterator in Object(ln))return nn(ln,an);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function nn(ln,an){for(var sn=0;sn<an.length;sn++){var dn=an[sn];dn.enumerable=dn.enumerable||!1,dn.configurable=!0,"value"in dn&&(dn.writable=!0),Object.defineProperty(ln,dn.key,dn)}}return function(ln,an,sn){return an&&nn(ln.prototype,an),sn&&nn(ln,sn),ln}}(),ft=ct(0),St=Bt(ft),kt=ct(21),Tt=Bt(kt),Rt=ct(11),jt=Bt(Rt),$t=ct(8),Ft=Bt($t),Ht=ct(10),Kt=Bt(Ht);function Bt(nn){return nn&&nn.__esModule?nn:{default:nn}}function Ut(nn){if(Array.isArray(nn)){for(var ln=0,an=Array(nn.length);ln<nn.length;ln++)an[ln]=nn[ln];return an}else return Array.from(nn)}function Yt(nn,ln){if(!(nn instanceof ln))throw new TypeError("Cannot call a class as a function")}var Jt=(0,Kt.default)("quill:selection"),Zt=function nn(ln){var an=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Yt(this,nn),this.index=ln,this.length=an},en=function(){function nn(ln,an){var sn=this;Yt(this,nn),this.emitter=an,this.scroll=ln,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=St.default.create("cursor",this),this.lastRange=this.savedRange=new Zt(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){sn.mouseDown||setTimeout(sn.update.bind(sn,Ft.default.sources.USER),1)}),this.emitter.on(Ft.default.events.EDITOR_CHANGE,function(dn,mn){dn===Ft.default.events.TEXT_CHANGE&&mn.length()>0&&sn.update(Ft.default.sources.SILENT)}),this.emitter.on(Ft.default.events.SCROLL_BEFORE_UPDATE,function(){if(sn.hasFocus()){var dn=sn.getNativeRange();dn!=null&&dn.start.node!==sn.cursor.textNode&&sn.emitter.once(Ft.default.events.SCROLL_UPDATE,function(){try{sn.setNativeRange(dn.start.node,dn.start.offset,dn.end.node,dn.end.offset)}catch{}})}}),this.emitter.on(Ft.default.events.SCROLL_OPTIMIZE,function(dn,mn){if(mn.range){var yn=mn.range,vn=yn.startNode,hn=yn.startOffset,pn=yn.endNode,rn=yn.endOffset;sn.setNativeRange(vn,hn,pn,rn)}}),this.update(Ft.default.sources.SILENT)}return dt(nn,[{key:"handleComposition",value:function(){var an=this;this.root.addEventListener("compositionstart",function(){an.composing=!0}),this.root.addEventListener("compositionend",function(){if(an.composing=!1,an.cursor.parent){var sn=an.cursor.restore();if(!sn)return;setTimeout(function(){an.setNativeRange(sn.startNode,sn.startOffset,sn.endNode,sn.endOffset)},1)}})}},{key:"handleDragging",value:function(){var an=this;this.emitter.listenDOM("mousedown",document.body,function(){an.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){an.mouseDown=!1,an.update(Ft.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(an,sn){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[an])){this.scroll.update();var dn=this.getNativeRange();if(!(dn==null||!dn.native.collapsed||St.default.query(an,St.default.Scope.BLOCK))){if(dn.start.node!==this.cursor.textNode){var mn=St.default.find(dn.start.node,!1);if(mn==null)return;if(mn instanceof St.default.Leaf){var yn=mn.split(dn.start.offset);mn.parent.insertBefore(this.cursor,yn)}else mn.insertBefore(this.cursor,dn.start.node);this.cursor.attach()}this.cursor.format(an,sn),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(an){var sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,dn=this.scroll.length();an=Math.min(an,dn-1),sn=Math.min(an+sn,dn-1)-an;var mn=void 0,yn=this.scroll.leaf(an),vn=ut(yn,2),hn=vn[0],pn=vn[1];if(hn==null)return null;var rn=hn.position(pn,!0),on=ut(rn,2);mn=on[0],pn=on[1];var gn=document.createRange();if(sn>0){gn.setStart(mn,pn);var un=this.scroll.leaf(an+sn),xn=ut(un,2);if(hn=xn[0],pn=xn[1],hn==null)return null;var En=hn.position(pn,!0),wn=ut(En,2);return mn=wn[0],pn=wn[1],gn.setEnd(mn,pn),gn.getBoundingClientRect()}else{var kn="left",Sn=void 0;return mn instanceof Text?(pn<mn.data.length?(gn.setStart(mn,pn),gn.setEnd(mn,pn+1)):(gn.setStart(mn,pn-1),gn.setEnd(mn,pn),kn="right"),Sn=gn.getBoundingClientRect()):(Sn=hn.domNode.getBoundingClientRect(),pn>0&&(kn="right")),{bottom:Sn.top+Sn.height,height:Sn.height,left:Sn[kn],right:Sn[kn],top:Sn.top,width:0}}}},{key:"getNativeRange",value:function(){var an=document.getSelection();if(an==null||an.rangeCount<=0)return null;var sn=an.getRangeAt(0);if(sn==null)return null;var dn=this.normalizeNative(sn);return Jt.info("getNativeRange",dn),dn}},{key:"getRange",value:function(){var an=this.getNativeRange();if(an==null)return[null,null];var sn=this.normalizedToRange(an);return[sn,an]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(an){var sn=this,dn=[[an.start.node,an.start.offset]];an.native.collapsed||dn.push([an.end.node,an.end.offset]);var mn=dn.map(function(hn){var pn=ut(hn,2),rn=pn[0],on=pn[1],gn=St.default.find(rn,!0),un=gn.offset(sn.scroll);return on===0?un:gn instanceof St.default.Container?un+gn.length():un+gn.index(rn,on)}),yn=Math.min(Math.max.apply(Math,Ut(mn)),this.scroll.length()-1),vn=Math.min.apply(Math,[yn].concat(Ut(mn)));return new Zt(vn,yn-vn)}},{key:"normalizeNative",value:function(an){if(!tn(this.root,an.startContainer)||!an.collapsed&&!tn(this.root,an.endContainer))return null;var sn={start:{node:an.startContainer,offset:an.startOffset},end:{node:an.endContainer,offset:an.endOffset},native:an};return[sn.start,sn.end].forEach(function(dn){for(var mn=dn.node,yn=dn.offset;!(mn instanceof Text)&&mn.childNodes.length>0;)if(mn.childNodes.length>yn)mn=mn.childNodes[yn],yn=0;else if(mn.childNodes.length===yn)mn=mn.lastChild,yn=mn instanceof Text?mn.data.length:mn.childNodes.length+1;else break;dn.node=mn,dn.offset=yn}),sn}},{key:"rangeToNative",value:function(an){var sn=this,dn=an.collapsed?[an.index]:[an.index,an.index+an.length],mn=[],yn=this.scroll.length();return dn.forEach(function(vn,hn){vn=Math.min(yn-1,vn);var pn=void 0,rn=sn.scroll.leaf(vn),on=ut(rn,2),gn=on[0],un=on[1],xn=gn.position(un,hn!==0),En=ut(xn,2);pn=En[0],un=En[1],mn.push(pn,un)}),mn.length<2&&(mn=mn.concat(mn)),mn}},{key:"scrollIntoView",value:function(an){var sn=this.lastRange;if(sn!=null){var dn=this.getBounds(sn.index,sn.length);if(dn!=null){var mn=this.scroll.length()-1,yn=this.scroll.line(Math.min(sn.index,mn)),vn=ut(yn,1),hn=vn[0],pn=hn;if(sn.length>0){var rn=this.scroll.line(Math.min(sn.index+sn.length,mn)),on=ut(rn,1);pn=on[0]}if(!(hn==null||pn==null)){var gn=an.getBoundingClientRect();dn.top<gn.top?an.scrollTop-=gn.top-dn.top:dn.bottom>gn.bottom&&(an.scrollTop+=dn.bottom-gn.bottom)}}}}},{key:"setNativeRange",value:function(an,sn){var dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:an,mn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:sn,yn=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Jt.info("setNativeRange",an,sn,dn,mn),!(an!=null&&(this.root.parentNode==null||an.parentNode==null||dn.parentNode==null))){var vn=document.getSelection();if(vn!=null)if(an!=null){this.hasFocus()||this.root.focus();var hn=(this.getNativeRange()||{}).native;if(hn==null||yn||an!==hn.startContainer||sn!==hn.startOffset||dn!==hn.endContainer||mn!==hn.endOffset){an.tagName=="BR"&&(sn=[].indexOf.call(an.parentNode.childNodes,an),an=an.parentNode),dn.tagName=="BR"&&(mn=[].indexOf.call(dn.parentNode.childNodes,dn),dn=dn.parentNode);var pn=document.createRange();pn.setStart(an,sn),pn.setEnd(dn,mn),vn.removeAllRanges(),vn.addRange(pn)}}else vn.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(an){var sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ft.default.sources.API;if(typeof sn=="string"&&(dn=sn,sn=!1),Jt.info("setRange",an),an!=null){var mn=this.rangeToNative(an);this.setNativeRange.apply(this,Ut(mn).concat([sn]))}else this.setNativeRange(null);this.update(dn)}},{key:"update",value:function(){var an=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ft.default.sources.USER,sn=this.lastRange,dn=this.getRange(),mn=ut(dn,2),yn=mn[0],vn=mn[1];if(this.lastRange=yn,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,jt.default)(sn,this.lastRange)){var hn;!this.composing&&vn!=null&&vn.native.collapsed&&vn.start.node!==this.cursor.textNode&&this.cursor.restore();var pn=[Ft.default.events.SELECTION_CHANGE,(0,Tt.default)(this.lastRange),(0,Tt.default)(sn),an];if((hn=this.emitter).emit.apply(hn,[Ft.default.events.EDITOR_CHANGE].concat(pn)),an!==Ft.default.sources.SILENT){var rn;(rn=this.emitter).emit.apply(rn,pn)}}}}]),nn}();function tn(nn,ln){try{ln.parentNode}catch{return!1}return ln instanceof Text&&(ln=ln.parentNode),nn.contains(ln)}ot.Range=Zt,ot.default=en},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ft(Ht,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Ht,Ut.key,Ut)}}return function(Ht,Kt,Bt){return Kt&&Ft(Ht.prototype,Kt),Bt&&Ft(Ht,Bt),Ht}}(),dt=function Ft(Ht,Kt,Bt){Ht===null&&(Ht=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(Ht,Kt);if(Ut===void 0){var Yt=Object.getPrototypeOf(Ht);return Yt===null?void 0:Ft(Yt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var Jt=Ut.get;return Jt===void 0?void 0:Jt.call(Bt)}},ft=ct(0),St=kt(ft);function kt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function Tt(Ft,Ht){if(!(Ft instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Ft,Ht){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Ft}function jt(Ft,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Ft.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,Ht):Ft.__proto__=Ht)}var $t=function(Ft){jt(Ht,Ft);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ut(Ht,[{key:"insertInto",value:function(Bt,Ut){Bt.children.length===0?dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"insertInto",this).call(this,Bt,Ut):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),Ht}(St.default.Embed);$t.blotName="break",$t.tagName="BR",ot.default=$t},function(et,ot,ct){var ut=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,$t){jt.__proto__=$t}||function(jt,$t){for(var Ft in $t)$t.hasOwnProperty(Ft)&&(jt[Ft]=$t[Ft])};return function(jt,$t){Rt(jt,$t);function Ft(){this.constructor=jt}jt.prototype=$t===null?Object.create($t):(Ft.prototype=$t.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(44),ft=ct(30),St=ct(1),kt=function(Rt){ut(jt,Rt);function jt($t){var Ft=Rt.call(this,$t)||this;return Ft.build(),Ft}return jt.prototype.appendChild=function($t){this.insertBefore($t)},jt.prototype.attach=function(){Rt.prototype.attach.call(this),this.children.forEach(function($t){$t.attach()})},jt.prototype.build=function(){var $t=this;this.children=new dt.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(Ft){try{var Ht=Tt(Ft);$t.insertBefore(Ht,$t.children.head||void 0)}catch(Kt){if(Kt instanceof St.ParchmentError)return;throw Kt}})},jt.prototype.deleteAt=function($t,Ft){if($t===0&&Ft===this.length())return this.remove();this.children.forEachAt($t,Ft,function(Ht,Kt,Bt){Ht.deleteAt(Kt,Bt)})},jt.prototype.descendant=function($t,Ft){var Ht=this.children.find(Ft),Kt=Ht[0],Bt=Ht[1];return $t.blotName==null&&$t(Kt)||$t.blotName!=null&&Kt instanceof $t?[Kt,Bt]:Kt instanceof jt?Kt.descendant($t,Bt):[null,-1]},jt.prototype.descendants=function($t,Ft,Ht){Ft===void 0&&(Ft=0),Ht===void 0&&(Ht=Number.MAX_VALUE);var Kt=[],Bt=Ht;return this.children.forEachAt(Ft,Ht,function(Ut,Yt,Jt){($t.blotName==null&&$t(Ut)||$t.blotName!=null&&Ut instanceof $t)&&Kt.push(Ut),Ut instanceof jt&&(Kt=Kt.concat(Ut.descendants($t,Yt,Bt))),Bt-=Jt}),Kt},jt.prototype.detach=function(){this.children.forEach(function($t){$t.detach()}),Rt.prototype.detach.call(this)},jt.prototype.formatAt=function($t,Ft,Ht,Kt){this.children.forEachAt($t,Ft,function(Bt,Ut,Yt){Bt.formatAt(Ut,Yt,Ht,Kt)})},jt.prototype.insertAt=function($t,Ft,Ht){var Kt=this.children.find($t),Bt=Kt[0],Ut=Kt[1];if(Bt)Bt.insertAt(Ut,Ft,Ht);else{var Yt=Ht==null?St.create("text",Ft):St.create(Ft,Ht);this.appendChild(Yt)}},jt.prototype.insertBefore=function($t,Ft){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(Ht){return $t instanceof Ht}))throw new St.ParchmentError("Cannot insert "+$t.statics.blotName+" into "+this.statics.blotName);$t.insertInto(this,Ft)},jt.prototype.length=function(){return this.children.reduce(function($t,Ft){return $t+Ft.length()},0)},jt.prototype.moveChildren=function($t,Ft){this.children.forEach(function(Ht){$t.insertBefore(Ht,Ft)})},jt.prototype.optimize=function($t){if(Rt.prototype.optimize.call(this,$t),this.children.length===0)if(this.statics.defaultChild!=null){var Ft=St.create(this.statics.defaultChild);this.appendChild(Ft),Ft.optimize($t)}else this.remove()},jt.prototype.path=function($t,Ft){Ft===void 0&&(Ft=!1);var Ht=this.children.find($t,Ft),Kt=Ht[0],Bt=Ht[1],Ut=[[this,$t]];return Kt instanceof jt?Ut.concat(Kt.path(Bt,Ft)):(Kt!=null&&Ut.push([Kt,Bt]),Ut)},jt.prototype.removeChild=function($t){this.children.remove($t)},jt.prototype.replace=function($t){$t instanceof jt&&$t.moveChildren(this),Rt.prototype.replace.call(this,$t)},jt.prototype.split=function($t,Ft){if(Ft===void 0&&(Ft=!1),!Ft){if($t===0)return this;if($t===this.length())return this.next}var Ht=this.clone();return this.parent.insertBefore(Ht,this.next),this.children.forEachAt($t,this.length(),function(Kt,Bt,Ut){Kt=Kt.split(Bt,Ft),Ht.appendChild(Kt)}),Ht},jt.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},jt.prototype.update=function($t,Ft){var Ht=this,Kt=[],Bt=[];$t.forEach(function(Ut){Ut.target===Ht.domNode&&Ut.type==="childList"&&(Kt.push.apply(Kt,Ut.addedNodes),Bt.push.apply(Bt,Ut.removedNodes))}),Bt.forEach(function(Ut){if(!(Ut.parentNode!=null&&Ut.tagName!=="IFRAME"&&document.body.compareDocumentPosition(Ut)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var Yt=St.find(Ut);Yt!=null&&(Yt.domNode.parentNode==null||Yt.domNode.parentNode===Ht.domNode)&&Yt.detach()}}),Kt.filter(function(Ut){return Ut.parentNode==Ht.domNode}).sort(function(Ut,Yt){return Ut===Yt?0:Ut.compareDocumentPosition(Yt)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(Ut){var Yt=null;Ut.nextSibling!=null&&(Yt=St.find(Ut.nextSibling));var Jt=Tt(Ut);(Jt.next!=Yt||Jt.next==null)&&(Jt.parent!=null&&Jt.parent.removeChild(Ht),Ht.insertBefore(Jt,Yt||void 0))})},jt}(ft.default);function Tt(Rt){var jt=St.find(Rt);if(jt==null)try{jt=St.create(Rt)}catch{jt=St.create(St.Scope.INLINE),[].slice.call(Rt.childNodes).forEach(function(Ft){jt.domNode.appendChild(Ft)}),Rt.parentNode&&Rt.parentNode.replaceChild(jt.domNode,Rt),jt.attach()}return jt}ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,$t){jt.__proto__=$t}||function(jt,$t){for(var Ft in $t)$t.hasOwnProperty(Ft)&&(jt[Ft]=$t[Ft])};return function(jt,$t){Rt(jt,$t);function Ft(){this.constructor=jt}jt.prototype=$t===null?Object.create($t):(Ft.prototype=$t.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12),ft=ct(31),St=ct(17),kt=ct(1),Tt=function(Rt){ut(jt,Rt);function jt($t){var Ft=Rt.call(this,$t)||this;return Ft.attributes=new ft.default(Ft.domNode),Ft}return jt.formats=function($t){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return $t.tagName.toLowerCase()},jt.prototype.format=function($t,Ft){var Ht=kt.query($t);Ht instanceof dt.default?this.attributes.attribute(Ht,Ft):Ft&&Ht!=null&&($t!==this.statics.blotName||this.formats()[$t]!==Ft)&&this.replaceWith($t,Ft)},jt.prototype.formats=function(){var $t=this.attributes.values(),Ft=this.statics.formats(this.domNode);return Ft!=null&&($t[this.statics.blotName]=Ft),$t},jt.prototype.replaceWith=function($t,Ft){var Ht=Rt.prototype.replaceWith.call(this,$t,Ft);return this.attributes.copy(Ht),Ht},jt.prototype.update=function($t,Ft){var Ht=this;Rt.prototype.update.call(this,$t,Ft),$t.some(function(Kt){return Kt.target===Ht.domNode&&Kt.type==="attributes"})&&this.attributes.build()},jt.prototype.wrap=function($t,Ft){var Ht=Rt.prototype.wrap.call(this,$t,Ft);return Ht instanceof jt&&Ht.statics.scope===this.statics.scope&&this.attributes.move(Ht),Ht},jt}(St.default);ot.default=Tt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(30),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.value=function(Rt){return!0},Tt.prototype.index=function(Rt,jt){return this.domNode===Rt||this.domNode.compareDocumentPosition(Rt)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(jt,1):-1},Tt.prototype.position=function(Rt,jt){var $t=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return Rt>0&&($t+=1),[this.parent.domNode,$t]},Tt.prototype.value=function(){var Rt;return Rt={},Rt[this.statics.blotName]=this.statics.value(this.domNode)||!0,Rt},Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=ct(11),dt=ct(3),ft={attributes:{compose:function(kt,Tt,Rt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var jt=dt(!0,{},Tt);Rt||(jt=Object.keys(jt).reduce(function(Ft,Ht){return jt[Ht]!=null&&(Ft[Ht]=jt[Ht]),Ft},{}));for(var $t in kt)kt[$t]!==void 0&&Tt[$t]===void 0&&(jt[$t]=kt[$t]);return Object.keys(jt).length>0?jt:void 0},diff:function(kt,Tt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var Rt=Object.keys(kt).concat(Object.keys(Tt)).reduce(function(jt,$t){return ut(kt[$t],Tt[$t])||(jt[$t]=Tt[$t]===void 0?null:Tt[$t]),jt},{});return Object.keys(Rt).length>0?Rt:void 0},transform:function(kt,Tt,Rt){if(typeof kt!="object")return Tt;if(typeof Tt=="object"){if(!Rt)return Tt;var jt=Object.keys(Tt).reduce(function($t,Ft){return kt[Ft]===void 0&&($t[Ft]=Tt[Ft]),$t},{});return Object.keys(jt).length>0?jt:void 0}}},iterator:function(kt){return new St(kt)},length:function(kt){return typeof kt.delete=="number"?kt.delete:typeof kt.retain=="number"?kt.retain:typeof kt.insert=="string"?kt.insert.length:1}};function St(kt){this.ops=kt,this.index=0,this.offset=0}St.prototype.hasNext=function(){return this.peekLength()<1/0},St.prototype.next=function(kt){kt||(kt=1/0);var Tt=this.ops[this.index];if(Tt){var Rt=this.offset,jt=ft.length(Tt);if(kt>=jt-Rt?(kt=jt-Rt,this.index+=1,this.offset=0):this.offset+=kt,typeof Tt.delete=="number")return{delete:kt};var $t={};return Tt.attributes&&($t.attributes=Tt.attributes),typeof Tt.retain=="number"?$t.retain=kt:typeof Tt.insert=="string"?$t.insert=Tt.insert.substr(Rt,kt):$t.insert=Tt.insert,$t}else return{retain:1/0}},St.prototype.peek=function(){return this.ops[this.index]},St.prototype.peekLength=function(){return this.ops[this.index]?ft.length(this.ops[this.index])-this.offset:1/0},St.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},St.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var kt=this.offset,Tt=this.index,Rt=this.next(),jt=this.ops.slice(this.index);return this.offset=kt,this.index=Tt,[Rt].concat(jt)}else return[]},et.exports=ft},function(et,ot){var ct=function(){function ut(Ht,Kt){return Kt!=null&&Ht instanceof Kt}var dt;try{dt=Map}catch{dt=function(){}}var ft;try{ft=Set}catch{ft=function(){}}var St;try{St=Promise}catch{St=function(){}}function kt(Ht,Kt,Bt,Ut,Yt){typeof Kt=="object"&&(Bt=Kt.depth,Ut=Kt.prototype,Yt=Kt.includeNonEnumerable,Kt=Kt.circular);var Jt=[],Zt=[],en=typeof Buffer<"u";typeof Kt>"u"&&(Kt=!0),typeof Bt>"u"&&(Bt=1/0);function tn(nn,ln){if(nn===null)return null;if(ln===0)return nn;var an,sn;if(typeof nn!="object")return nn;if(ut(nn,dt))an=new dt;else if(ut(nn,ft))an=new ft;else if(ut(nn,St))an=new St(function(gn,un){nn.then(function(xn){gn(tn(xn,ln-1))},function(xn){un(tn(xn,ln-1))})});else if(kt.__isArray(nn))an=[];else if(kt.__isRegExp(nn))an=new RegExp(nn.source,Ft(nn)),nn.lastIndex&&(an.lastIndex=nn.lastIndex);else if(kt.__isDate(nn))an=new Date(nn.getTime());else{if(en&&Buffer.isBuffer(nn))return Buffer.allocUnsafe?an=Buffer.allocUnsafe(nn.length):an=new Buffer(nn.length),nn.copy(an),an;ut(nn,Error)?an=Object.create(nn):typeof Ut>"u"?(sn=Object.getPrototypeOf(nn),an=Object.create(sn)):(an=Object.create(Ut),sn=Ut)}if(Kt){var dn=Jt.indexOf(nn);if(dn!=-1)return Zt[dn];Jt.push(nn),Zt.push(an)}ut(nn,dt)&&nn.forEach(function(gn,un){var xn=tn(un,ln-1),En=tn(gn,ln-1);an.set(xn,En)}),ut(nn,ft)&&nn.forEach(function(gn){var un=tn(gn,ln-1);an.add(un)});for(var mn in nn){var yn;sn&&(yn=Object.getOwnPropertyDescriptor(sn,mn)),!(yn&&yn.set==null)&&(an[mn]=tn(nn[mn],ln-1))}if(Object.getOwnPropertySymbols)for(var vn=Object.getOwnPropertySymbols(nn),mn=0;mn<vn.length;mn++){var hn=vn[mn],pn=Object.getOwnPropertyDescriptor(nn,hn);pn&&!pn.enumerable&&!Yt||(an[hn]=tn(nn[hn],ln-1),pn.enumerable||Object.defineProperty(an,hn,{enumerable:!1}))}if(Yt)for(var rn=Object.getOwnPropertyNames(nn),mn=0;mn<rn.length;mn++){var on=rn[mn],pn=Object.getOwnPropertyDescriptor(nn,on);pn&&pn.enumerable||(an[on]=tn(nn[on],ln-1),Object.defineProperty(an,on,{enumerable:!1}))}return an}return tn(Ht,Bt)}kt.clonePrototype=function(Kt){if(Kt===null)return null;var Bt=function(){};return Bt.prototype=Kt,new Bt};function Tt(Ht){return Object.prototype.toString.call(Ht)}kt.__objToStr=Tt;function Rt(Ht){return typeof Ht=="object"&&Tt(Ht)==="[object Date]"}kt.__isDate=Rt;function jt(Ht){return typeof Ht=="object"&&Tt(Ht)==="[object Array]"}kt.__isArray=jt;function $t(Ht){return typeof Ht=="object"&&Tt(Ht)==="[object RegExp]"}kt.__isRegExp=$t;function Ft(Ht){var Kt="";return Ht.global&&(Kt+="g"),Ht.ignoreCase&&(Kt+="i"),Ht.multiline&&(Kt+="m"),Kt}return kt.__getRegExpFlags=Ft,kt}();typeof et=="object"&&et.exports&&(et.exports=ct)},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function an(sn,dn){var mn=[],yn=!0,vn=!1,hn=void 0;try{for(var pn=sn[Symbol.iterator](),rn;!(yn=(rn=pn.next()).done)&&(mn.push(rn.value),!(dn&&mn.length===dn));yn=!0);}catch(on){vn=!0,hn=on}finally{try{!yn&&pn.return&&pn.return()}finally{if(vn)throw hn}}return mn}return function(sn,dn){if(Array.isArray(sn))return sn;if(Symbol.iterator in Object(sn))return an(sn,dn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function an(sn,dn){for(var mn=0;mn<dn.length;mn++){var yn=dn[mn];yn.enumerable=yn.enumerable||!1,yn.configurable=!0,"value"in yn&&(yn.writable=!0),Object.defineProperty(sn,yn.key,yn)}}return function(sn,dn,mn){return dn&&an(sn.prototype,dn),mn&&an(sn,mn),sn}}(),ft=function an(sn,dn,mn){sn===null&&(sn=Function.prototype);var yn=Object.getOwnPropertyDescriptor(sn,dn);if(yn===void 0){var vn=Object.getPrototypeOf(sn);return vn===null?void 0:an(vn,dn,mn)}else{if("value"in yn)return yn.value;var hn=yn.get;return hn===void 0?void 0:hn.call(mn)}},St=ct(0),kt=Jt(St),Tt=ct(8),Rt=Jt(Tt),jt=ct(4),$t=Jt(jt),Ft=ct(16),Ht=Jt(Ft),Kt=ct(13),Bt=Jt(Kt),Ut=ct(25),Yt=Jt(Ut);function Jt(an){return an&&an.__esModule?an:{default:an}}function Zt(an,sn){if(!(an instanceof sn))throw new TypeError("Cannot call a class as a function")}function en(an,sn){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return sn&&(typeof sn=="object"||typeof sn=="function")?sn:an}function tn(an,sn){if(typeof sn!="function"&&sn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof sn);an.prototype=Object.create(sn&&sn.prototype,{constructor:{value:an,enumerable:!1,writable:!0,configurable:!0}}),sn&&(Object.setPrototypeOf?Object.setPrototypeOf(an,sn):an.__proto__=sn)}function nn(an){return an instanceof $t.default||an instanceof jt.BlockEmbed}var ln=function(an){tn(sn,an);function sn(dn,mn){Zt(this,sn);var yn=en(this,(sn.__proto__||Object.getPrototypeOf(sn)).call(this,dn));return yn.emitter=mn.emitter,Array.isArray(mn.whitelist)&&(yn.whitelist=mn.whitelist.reduce(function(vn,hn){return vn[hn]=!0,vn},{})),yn.domNode.addEventListener("DOMNodeInserted",function(){}),yn.optimize(),yn.enable(),yn}return dt(sn,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(mn,yn){var vn=this.line(mn),hn=ut(vn,2),pn=hn[0],rn=hn[1],on=this.line(mn+yn),gn=ut(on,1),un=gn[0];if(ft(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"deleteAt",this).call(this,mn,yn),un!=null&&pn!==un&&rn>0){if(pn instanceof jt.BlockEmbed||un instanceof jt.BlockEmbed){this.optimize();return}if(pn instanceof Bt.default){var xn=pn.newlineIndex(pn.length(),!0);if(xn>-1&&(pn=pn.split(xn+1),pn===un)){this.optimize();return}}else if(un instanceof Bt.default){var En=un.newlineIndex(0);En>-1&&un.split(En+1)}var wn=un.children.head instanceof Ht.default?null:un.children.head;pn.moveChildren(un,wn),pn.remove()}this.optimize()}},{key:"enable",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",mn)}},{key:"formatAt",value:function(mn,yn,vn,hn){this.whitelist!=null&&!this.whitelist[vn]||(ft(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"formatAt",this).call(this,mn,yn,vn,hn),this.optimize())}},{key:"insertAt",value:function(mn,yn,vn){if(!(vn!=null&&this.whitelist!=null&&!this.whitelist[yn])){if(mn>=this.length())if(vn==null||kt.default.query(yn,kt.default.Scope.BLOCK)==null){var hn=kt.default.create(this.statics.defaultChild);this.appendChild(hn),vn==null&&yn.endsWith(`
`)&&(yn=yn.slice(0,-1)),hn.insertAt(0,yn,vn)}else{var pn=kt.default.create(yn,vn);this.appendChild(pn)}else ft(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"insertAt",this).call(this,mn,yn,vn);this.optimize()}}},{key:"insertBefore",value:function(mn,yn){if(mn.statics.scope===kt.default.Scope.INLINE_BLOT){var vn=kt.default.create(this.statics.defaultChild);vn.appendChild(mn),mn=vn}ft(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"insertBefore",this).call(this,mn,yn)}},{key:"leaf",value:function(mn){return this.path(mn).pop()||[null,-1]}},{key:"line",value:function(mn){return mn===this.length()?this.line(mn-1):this.descendant(nn,mn)}},{key:"lines",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,vn=function hn(pn,rn,on){var gn=[],un=on;return pn.children.forEachAt(rn,on,function(xn,En,wn){nn(xn)?gn.push(xn):xn instanceof kt.default.Container&&(gn=gn.concat(hn(xn,En,un))),un-=wn}),gn};return vn(this,mn,yn)}},{key:"optimize",value:function(){var mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(ft(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"optimize",this).call(this,mn,yn),mn.length>0&&this.emitter.emit(Rt.default.events.SCROLL_OPTIMIZE,mn,yn))}},{key:"path",value:function(mn){return ft(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"path",this).call(this,mn).slice(1)}},{key:"update",value:function(mn){if(this.batch!==!0){var yn=Rt.default.sources.USER;typeof mn=="string"&&(yn=mn),Array.isArray(mn)||(mn=this.observer.takeRecords()),mn.length>0&&this.emitter.emit(Rt.default.events.SCROLL_BEFORE_UPDATE,yn,mn),ft(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"update",this).call(this,mn.concat([])),mn.length>0&&this.emitter.emit(Rt.default.events.SCROLL_UPDATE,yn,mn)}}}]),sn}(kt.default.Scroll);ln.blotName="scroll",ln.className="ql-editor",ln.tagName="DIV",ln.defaultChild="block",ln.allowedChildren=[$t.default,jt.BlockEmbed,Yt.default],ot.default=ln},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SHORTKEY=ot.default=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Sn){return typeof Sn}:function(Sn){return Sn&&typeof Symbol=="function"&&Sn.constructor===Symbol&&Sn!==Symbol.prototype?"symbol":typeof Sn},dt=function(){function Sn(An,Cn){var Tn=[],_n=!0,Dn=!1,$n=void 0;try{for(var On=An[Symbol.iterator](),Mn;!(_n=(Mn=On.next()).done)&&(Tn.push(Mn.value),!(Cn&&Tn.length===Cn));_n=!0);}catch(Vn){Dn=!0,$n=Vn}finally{try{!_n&&On.return&&On.return()}finally{if(Dn)throw $n}}return Tn}return function(An,Cn){if(Array.isArray(An))return An;if(Symbol.iterator in Object(An))return Sn(An,Cn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function Sn(An,Cn){for(var Tn=0;Tn<Cn.length;Tn++){var _n=Cn[Tn];_n.enumerable=_n.enumerable||!1,_n.configurable=!0,"value"in _n&&(_n.writable=!0),Object.defineProperty(An,_n.key,_n)}}return function(An,Cn,Tn){return Cn&&Sn(An.prototype,Cn),Tn&&Sn(An,Tn),An}}(),St=ct(21),kt=an(St),Tt=ct(11),Rt=an(Tt),jt=ct(3),$t=an(jt),Ft=ct(2),Ht=an(Ft),Kt=ct(20),Bt=an(Kt),Ut=ct(0),Yt=an(Ut),Jt=ct(5),Zt=an(Jt),en=ct(10),tn=an(en),nn=ct(9),ln=an(nn);function an(Sn){return Sn&&Sn.__esModule?Sn:{default:Sn}}function sn(Sn,An,Cn){return An in Sn?Object.defineProperty(Sn,An,{value:Cn,enumerable:!0,configurable:!0,writable:!0}):Sn[An]=Cn,Sn}function dn(Sn,An){if(!(Sn instanceof An))throw new TypeError("Cannot call a class as a function")}function mn(Sn,An){if(!Sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return An&&(typeof An=="object"||typeof An=="function")?An:Sn}function yn(Sn,An){if(typeof An!="function"&&An!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof An);Sn.prototype=Object.create(An&&An.prototype,{constructor:{value:Sn,enumerable:!1,writable:!0,configurable:!0}}),An&&(Object.setPrototypeOf?Object.setPrototypeOf(Sn,An):Sn.__proto__=An)}var vn=(0,tn.default)("quill:keyboard"),hn=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",pn=function(Sn){yn(An,Sn),ft(An,null,[{key:"match",value:function(Tn,_n){return _n=kn(_n),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Dn){return!!_n[Dn]!==Tn[Dn]&&_n[Dn]!==null})?!1:_n.key===(Tn.which||Tn.keyCode)}}]);function An(Cn,Tn){dn(this,An);var _n=mn(this,(An.__proto__||Object.getPrototypeOf(An)).call(this,Cn,Tn));return _n.bindings={},Object.keys(_n.options.bindings).forEach(function(Dn){Dn==="list autofill"&&Cn.scroll.whitelist!=null&&!Cn.scroll.whitelist.list||_n.options.bindings[Dn]&&_n.addBinding(_n.options.bindings[Dn])}),_n.addBinding({key:An.keys.ENTER,shiftKey:null},xn),_n.addBinding({key:An.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(_n.addBinding({key:An.keys.BACKSPACE},{collapsed:!0},on),_n.addBinding({key:An.keys.DELETE},{collapsed:!0},gn)):(_n.addBinding({key:An.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},on),_n.addBinding({key:An.keys.DELETE},{collapsed:!0,suffix:/^.?$/},gn)),_n.addBinding({key:An.keys.BACKSPACE},{collapsed:!1},un),_n.addBinding({key:An.keys.DELETE},{collapsed:!1},un),_n.addBinding({key:An.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},on),_n.listen(),_n}return ft(An,[{key:"addBinding",value:function(Tn){var _n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},$n=kn(Tn);if($n==null||$n.key==null)return vn.warn("Attempted to add invalid keyboard binding",$n);typeof _n=="function"&&(_n={handler:_n}),typeof Dn=="function"&&(Dn={handler:Dn}),$n=(0,$t.default)($n,_n,Dn),this.bindings[$n.key]=this.bindings[$n.key]||[],this.bindings[$n.key].push($n)}},{key:"listen",value:function(){var Tn=this;this.quill.root.addEventListener("keydown",function(_n){if(!_n.defaultPrevented){var Dn=_n.which||_n.keyCode,$n=(Tn.bindings[Dn]||[]).filter(function(Zn){return An.match(_n,Zn)});if($n.length!==0){var On=Tn.quill.getSelection();if(!(On==null||!Tn.quill.hasFocus())){var Mn=Tn.quill.getLine(On.index),Vn=dt(Mn,2),Wn=Vn[0],Yn=Vn[1],Rn=Tn.quill.getLeaf(On.index),Pn=dt(Rn,2),Ln=Pn[0],In=Pn[1],Nn=On.length===0?[Ln,In]:Tn.quill.getLeaf(On.index+On.length),Hn=dt(Nn,2),zn=Hn[0],Un=Hn[1],lr=Ln instanceof Yt.default.Text?Ln.value().slice(0,In):"",cr=zn instanceof Yt.default.Text?zn.value().slice(Un):"",Xn={collapsed:On.length===0,empty:On.length===0&&Wn.length()<=1,format:Tn.quill.getFormat(On),offset:Yn,prefix:lr,suffix:cr},Yr=$n.some(function(Zn){if(Zn.collapsed!=null&&Zn.collapsed!==Xn.collapsed||Zn.empty!=null&&Zn.empty!==Xn.empty||Zn.offset!=null&&Zn.offset!==Xn.offset)return!1;if(Array.isArray(Zn.format)){if(Zn.format.every(function(Bl){return Xn.format[Bl]==null}))return!1}else if(ut(Zn.format)==="object"&&!Object.keys(Zn.format).every(function(Bl){return Zn.format[Bl]===!0?Xn.format[Bl]!=null:Zn.format[Bl]===!1?Xn.format[Bl]==null:(0,Rt.default)(Zn.format[Bl],Xn.format[Bl])}))return!1;return Zn.prefix!=null&&!Zn.prefix.test(Xn.prefix)||Zn.suffix!=null&&!Zn.suffix.test(Xn.suffix)?!1:Zn.handler.call(Tn,On,Xn)!==!0});Yr&&_n.preventDefault()}}}})}}]),An}(ln.default);pn.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},pn.DEFAULTS={bindings:{bold:wn("bold"),italic:wn("italic"),underline:wn("underline"),indent:{key:pn.keys.TAB,format:["blockquote","indent","list"],handler:function(An,Cn){if(Cn.collapsed&&Cn.offset!==0)return!0;this.quill.format("indent","+1",Zt.default.sources.USER)}},outdent:{key:pn.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(An,Cn){if(Cn.collapsed&&Cn.offset!==0)return!0;this.quill.format("indent","-1",Zt.default.sources.USER)}},"outdent backspace":{key:pn.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(An,Cn){Cn.format.indent!=null?this.quill.format("indent","-1",Zt.default.sources.USER):Cn.format.list!=null&&this.quill.format("list",!1,Zt.default.sources.USER)}},"indent code-block":En(!0),"outdent code-block":En(!1),"remove tab":{key:pn.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(An){this.quill.deleteText(An.index-1,1,Zt.default.sources.USER)}},tab:{key:pn.keys.TAB,handler:function(An){this.quill.history.cutoff();var Cn=new Ht.default().retain(An.index).delete(An.length).insert("	");this.quill.updateContents(Cn,Zt.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(An.index+1,Zt.default.sources.SILENT)}},"list empty enter":{key:pn.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(An,Cn){this.quill.format("list",!1,Zt.default.sources.USER),Cn.format.indent&&this.quill.format("indent",!1,Zt.default.sources.USER)}},"checklist enter":{key:pn.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(An){var Cn=this.quill.getLine(An.index),Tn=dt(Cn,2),_n=Tn[0],Dn=Tn[1],$n=(0,$t.default)({},_n.formats(),{list:"checked"}),On=new Ht.default().retain(An.index).insert(`
`,$n).retain(_n.length()-Dn-1).retain(1,{list:"unchecked"});this.quill.updateContents(On,Zt.default.sources.USER),this.quill.setSelection(An.index+1,Zt.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:pn.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(An,Cn){var Tn=this.quill.getLine(An.index),_n=dt(Tn,2),Dn=_n[0],$n=_n[1],On=new Ht.default().retain(An.index).insert(`
`,Cn.format).retain(Dn.length()-$n-1).retain(1,{header:null});this.quill.updateContents(On,Zt.default.sources.USER),this.quill.setSelection(An.index+1,Zt.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(An,Cn){var Tn=Cn.prefix.length,_n=this.quill.getLine(An.index),Dn=dt(_n,2),$n=Dn[0],On=Dn[1];if(On>Tn)return!0;var Mn=void 0;switch(Cn.prefix.trim()){case"[]":case"[ ]":Mn="unchecked";break;case"[x]":Mn="checked";break;case"-":case"*":Mn="bullet";break;default:Mn="ordered"}this.quill.insertText(An.index," ",Zt.default.sources.USER),this.quill.history.cutoff();var Vn=new Ht.default().retain(An.index-On).delete(Tn+1).retain($n.length()-2-On).retain(1,{list:Mn});this.quill.updateContents(Vn,Zt.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(An.index-Tn,Zt.default.sources.SILENT)}},"code exit":{key:pn.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(An){var Cn=this.quill.getLine(An.index),Tn=dt(Cn,2),_n=Tn[0],Dn=Tn[1],$n=new Ht.default().retain(An.index+_n.length()-Dn-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents($n,Zt.default.sources.USER)}},"embed left":rn(pn.keys.LEFT,!1),"embed left shift":rn(pn.keys.LEFT,!0),"embed right":rn(pn.keys.RIGHT,!1),"embed right shift":rn(pn.keys.RIGHT,!0)}};function rn(Sn,An){var Cn,Tn=Sn===pn.keys.LEFT?"prefix":"suffix";return Cn={key:Sn,shiftKey:An,altKey:null},sn(Cn,Tn,/^$/),sn(Cn,"handler",function(Dn){var $n=Dn.index;Sn===pn.keys.RIGHT&&($n+=Dn.length+1);var On=this.quill.getLeaf($n),Mn=dt(On,1),Vn=Mn[0];return Vn instanceof Yt.default.Embed?(Sn===pn.keys.LEFT?An?this.quill.setSelection(Dn.index-1,Dn.length+1,Zt.default.sources.USER):this.quill.setSelection(Dn.index-1,Zt.default.sources.USER):An?this.quill.setSelection(Dn.index,Dn.length+1,Zt.default.sources.USER):this.quill.setSelection(Dn.index+Dn.length+1,Zt.default.sources.USER),!1):!0}),Cn}function on(Sn,An){if(!(Sn.index===0||this.quill.getLength()<=1)){var Cn=this.quill.getLine(Sn.index),Tn=dt(Cn,1),_n=Tn[0],Dn={};if(An.offset===0){var $n=this.quill.getLine(Sn.index-1),On=dt($n,1),Mn=On[0];if(Mn!=null&&Mn.length()>1){var Vn=_n.formats(),Wn=this.quill.getFormat(Sn.index-1,1);Dn=Bt.default.attributes.diff(Vn,Wn)||{}}}var Yn=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(An.prefix)?2:1;this.quill.deleteText(Sn.index-Yn,Yn,Zt.default.sources.USER),Object.keys(Dn).length>0&&this.quill.formatLine(Sn.index-Yn,Yn,Dn,Zt.default.sources.USER),this.quill.focus()}}function gn(Sn,An){var Cn=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(An.suffix)?2:1;if(!(Sn.index>=this.quill.getLength()-Cn)){var Tn={},_n=0,Dn=this.quill.getLine(Sn.index),$n=dt(Dn,1),On=$n[0];if(An.offset>=On.length()-1){var Mn=this.quill.getLine(Sn.index+1),Vn=dt(Mn,1),Wn=Vn[0];if(Wn){var Yn=On.formats(),Rn=this.quill.getFormat(Sn.index,1);Tn=Bt.default.attributes.diff(Yn,Rn)||{},_n=Wn.length()}}this.quill.deleteText(Sn.index,Cn,Zt.default.sources.USER),Object.keys(Tn).length>0&&this.quill.formatLine(Sn.index+_n-1,Cn,Tn,Zt.default.sources.USER)}}function un(Sn){var An=this.quill.getLines(Sn),Cn={};if(An.length>1){var Tn=An[0].formats(),_n=An[An.length-1].formats();Cn=Bt.default.attributes.diff(_n,Tn)||{}}this.quill.deleteText(Sn,Zt.default.sources.USER),Object.keys(Cn).length>0&&this.quill.formatLine(Sn.index,1,Cn,Zt.default.sources.USER),this.quill.setSelection(Sn.index,Zt.default.sources.SILENT),this.quill.focus()}function xn(Sn,An){var Cn=this;Sn.length>0&&this.quill.scroll.deleteAt(Sn.index,Sn.length);var Tn=Object.keys(An.format).reduce(function(_n,Dn){return Yt.default.query(Dn,Yt.default.Scope.BLOCK)&&!Array.isArray(An.format[Dn])&&(_n[Dn]=An.format[Dn]),_n},{});this.quill.insertText(Sn.index,`
`,Tn,Zt.default.sources.USER),this.quill.setSelection(Sn.index+1,Zt.default.sources.SILENT),this.quill.focus(),Object.keys(An.format).forEach(function(_n){Tn[_n]==null&&(Array.isArray(An.format[_n])||_n!=="link"&&Cn.quill.format(_n,An.format[_n],Zt.default.sources.USER))})}function En(Sn){return{key:pn.keys.TAB,shiftKey:!Sn,format:{"code-block":!0},handler:function(Cn){var Tn=Yt.default.query("code-block"),_n=Cn.index,Dn=Cn.length,$n=this.quill.scroll.descendant(Tn,_n),On=dt($n,2),Mn=On[0],Vn=On[1];if(Mn!=null){var Wn=this.quill.getIndex(Mn),Yn=Mn.newlineIndex(Vn,!0)+1,Rn=Mn.newlineIndex(Wn+Vn+Dn),Pn=Mn.domNode.textContent.slice(Yn,Rn).split(`
`);Vn=0,Pn.forEach(function(Ln,In){Sn?(Mn.insertAt(Yn+Vn,Tn.TAB),Vn+=Tn.TAB.length,In===0?_n+=Tn.TAB.length:Dn+=Tn.TAB.length):Ln.startsWith(Tn.TAB)&&(Mn.deleteAt(Yn+Vn,Tn.TAB.length),Vn-=Tn.TAB.length,In===0?_n-=Tn.TAB.length:Dn-=Tn.TAB.length),Vn+=Ln.length+1}),this.quill.update(Zt.default.sources.USER),this.quill.setSelection(_n,Dn,Zt.default.sources.SILENT)}}}}function wn(Sn){return{key:Sn[0].toUpperCase(),shortKey:!0,handler:function(Cn,Tn){this.quill.format(Sn,!Tn.format[Sn],Zt.default.sources.USER)}}}function kn(Sn){if(typeof Sn=="string"||typeof Sn=="number")return kn({key:Sn});if((typeof Sn>"u"?"undefined":ut(Sn))==="object"&&(Sn=(0,kt.default)(Sn,!1)),typeof Sn.key=="string")if(pn.keys[Sn.key.toUpperCase()]!=null)Sn.key=pn.keys[Sn.key.toUpperCase()];else if(Sn.key.length===1)Sn.key=Sn.key.toUpperCase().charCodeAt(0);else return null;return Sn.shortKey&&(Sn[hn]=Sn.shortKey,delete Sn.shortKey),Sn}ot.default=pn,ot.SHORTKEY=hn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Bt(Ut,Yt){var Jt=[],Zt=!0,en=!1,tn=void 0;try{for(var nn=Ut[Symbol.iterator](),ln;!(Zt=(ln=nn.next()).done)&&(Jt.push(ln.value),!(Yt&&Jt.length===Yt));Zt=!0);}catch(an){en=!0,tn=an}finally{try{!Zt&&nn.return&&nn.return()}finally{if(en)throw tn}}return Jt}return function(Ut,Yt){if(Array.isArray(Ut))return Ut;if(Symbol.iterator in Object(Ut))return Bt(Ut,Yt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function Bt(Ut,Yt,Jt){Ut===null&&(Ut=Function.prototype);var Zt=Object.getOwnPropertyDescriptor(Ut,Yt);if(Zt===void 0){var en=Object.getPrototypeOf(Ut);return en===null?void 0:Bt(en,Yt,Jt)}else{if("value"in Zt)return Zt.value;var tn=Zt.get;return tn===void 0?void 0:tn.call(Jt)}},ft=function(){function Bt(Ut,Yt){for(var Jt=0;Jt<Yt.length;Jt++){var Zt=Yt[Jt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Ut,Zt.key,Zt)}}return function(Ut,Yt,Jt){return Yt&&Bt(Ut.prototype,Yt),Jt&&Bt(Ut,Jt),Ut}}(),St=ct(0),kt=jt(St),Tt=ct(7),Rt=jt(Tt);function jt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function $t(Bt,Ut){if(!(Bt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Ft(Bt,Ut){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Bt}function Ht(Bt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Bt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ut):Bt.__proto__=Ut)}var Kt=function(Bt){Ht(Ut,Bt),ft(Ut,null,[{key:"value",value:function(){}}]);function Ut(Yt,Jt){$t(this,Ut);var Zt=Ft(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).call(this,Yt));return Zt.selection=Jt,Zt.textNode=document.createTextNode(Ut.CONTENTS),Zt.domNode.appendChild(Zt.textNode),Zt._length=0,Zt}return ft(Ut,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(Jt,Zt){if(this._length!==0)return dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"format",this).call(this,Jt,Zt);for(var en=this,tn=0;en!=null&&en.statics.scope!==kt.default.Scope.BLOCK_BLOT;)tn+=en.offset(en.parent),en=en.parent;en!=null&&(this._length=Ut.CONTENTS.length,en.optimize(),en.formatAt(tn,Ut.CONTENTS.length,Jt,Zt),this._length=0)}},{key:"index",value:function(Jt,Zt){return Jt===this.textNode?0:dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"index",this).call(this,Jt,Zt)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var Jt=this.textNode,Zt=this.selection.getNativeRange(),en=void 0,tn=void 0,nn=void 0;if(Zt!=null&&Zt.start.node===Jt&&Zt.end.node===Jt){var ln=[Jt,Zt.start.offset,Zt.end.offset];en=ln[0],tn=ln[1],nn=ln[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==Ut.CONTENTS){var an=this.textNode.data.split(Ut.CONTENTS).join("");this.next instanceof Rt.default?(en=this.next.domNode,this.next.insertAt(0,an),this.textNode.data=Ut.CONTENTS):(this.textNode.data=an,this.parent.insertBefore(kt.default.create(this.textNode),this),this.textNode=document.createTextNode(Ut.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),tn!=null){var sn=[tn,nn].map(function(mn){return Math.max(0,Math.min(en.data.length,mn-1))}),dn=ut(sn,2);return tn=dn[0],nn=dn[1],{startNode:en,startOffset:tn,endNode:en,endOffset:nn}}}}},{key:"update",value:function(Jt,Zt){var en=this;if(Jt.some(function(nn){return nn.type==="characterData"&&nn.target===en.textNode})){var tn=this.restore();tn&&(Zt.range=tn)}}},{key:"value",value:function(){return""}}]),Ut}(kt.default.Embed);Kt.blotName="cursor",Kt.className="ql-cursor",Kt.tagName="span",Kt.CONTENTS="\uFEFF",ot.default=Kt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=kt(ut),ft=ct(4),St=kt(ft);function kt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function Tt(Ft,Ht){if(!(Ft instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Ft,Ht){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Ft}function jt(Ft,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Ft.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,Ht):Ft.__proto__=Ht)}var $t=function(Ft){jt(Ht,Ft);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return Ht}(dt.default.Container);$t.allowedChildren=[St.default,ft.BlockEmbed,$t],ot.default=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.ColorStyle=ot.ColorClass=ot.ColorAttributor=void 0;var ut=function(){function Kt(Bt,Ut){for(var Yt=0;Yt<Ut.length;Yt++){var Jt=Ut[Yt];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Bt,Jt.key,Jt)}}return function(Bt,Ut,Yt){return Ut&&Kt(Bt.prototype,Ut),Yt&&Kt(Bt,Yt),Bt}}(),dt=function Kt(Bt,Ut,Yt){Bt===null&&(Bt=Function.prototype);var Jt=Object.getOwnPropertyDescriptor(Bt,Ut);if(Jt===void 0){var Zt=Object.getPrototypeOf(Bt);return Zt===null?void 0:Kt(Zt,Ut,Yt)}else{if("value"in Jt)return Jt.value;var en=Jt.get;return en===void 0?void 0:en.call(Yt)}},ft=ct(0),St=kt(ft);function kt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function Tt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function Rt(Kt,Bt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Kt}function jt(Kt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Kt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Bt):Kt.__proto__=Bt)}var $t=function(Kt){jt(Bt,Kt);function Bt(){return Tt(this,Bt),Rt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"value",value:function(Yt){var Jt=dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"value",this).call(this,Yt);return Jt.startsWith("rgb(")?(Jt=Jt.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+Jt.split(",").map(function(Zt){return("00"+parseInt(Zt).toString(16)).slice(-2)}).join("")):Jt}}]),Bt}(St.default.Attributor.Style),Ft=new St.default.Attributor.Class("color","ql-color",{scope:St.default.Scope.INLINE}),Ht=new $t("color","color",{scope:St.default.Scope.INLINE});ot.ColorAttributor=$t,ot.ColorClass=Ft,ot.ColorStyle=Ht},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.sanitize=ot.default=void 0;var ut=function(){function Ht(Kt,Bt){for(var Ut=0;Ut<Bt.length;Ut++){var Yt=Bt[Ut];Yt.enumerable=Yt.enumerable||!1,Yt.configurable=!0,"value"in Yt&&(Yt.writable=!0),Object.defineProperty(Kt,Yt.key,Yt)}}return function(Kt,Bt,Ut){return Bt&&Ht(Kt.prototype,Bt),Ut&&Ht(Kt,Ut),Kt}}(),dt=function Ht(Kt,Bt,Ut){Kt===null&&(Kt=Function.prototype);var Yt=Object.getOwnPropertyDescriptor(Kt,Bt);if(Yt===void 0){var Jt=Object.getPrototypeOf(Kt);return Jt===null?void 0:Ht(Jt,Bt,Ut)}else{if("value"in Yt)return Yt.value;var Zt=Yt.get;return Zt===void 0?void 0:Zt.call(Ut)}},ft=ct(6),St=kt(ft);function kt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Tt(Ht,Kt){if(!(Ht instanceof Kt))throw new TypeError("Cannot call a class as a function")}function Rt(Ht,Kt){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:Ht}function jt(Ht,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);Ht.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Kt):Ht.__proto__=Kt)}var $t=function(Ht){jt(Kt,Ht);function Kt(){return Tt(this,Kt),Rt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).apply(this,arguments))}return ut(Kt,[{key:"format",value:function(Ut,Yt){if(Ut!==this.statics.blotName||!Yt)return dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"format",this).call(this,Ut,Yt);Yt=this.constructor.sanitize(Yt),this.domNode.setAttribute("href",Yt)}}],[{key:"create",value:function(Ut){var Yt=dt(Kt.__proto__||Object.getPrototypeOf(Kt),"create",this).call(this,Ut);return Ut=this.sanitize(Ut),Yt.setAttribute("href",Ut),Yt.setAttribute("rel","noopener noreferrer"),Yt.setAttribute("target","_blank"),Yt}},{key:"formats",value:function(Ut){return Ut.getAttribute("href")}},{key:"sanitize",value:function(Ut){return Ft(Ut,this.PROTOCOL_WHITELIST)?Ut:this.SANITIZED_URL}}]),Kt}(St.default);$t.blotName="link",$t.tagName="A",$t.SANITIZED_URL="about:blank",$t.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function Ft(Ht,Kt){var Bt=document.createElement("a");Bt.href=Ht;var Ut=Bt.href.slice(0,Bt.href.indexOf(":"));return Kt.indexOf(Ut)>-1}ot.default=$t,ot.sanitize=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt},dt=function(){function Kt(Bt,Ut){for(var Yt=0;Yt<Ut.length;Yt++){var Jt=Ut[Yt];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Bt,Jt.key,Jt)}}return function(Bt,Ut,Yt){return Ut&&Kt(Bt.prototype,Ut),Yt&&Kt(Bt,Yt),Bt}}(),ft=ct(23),St=Rt(ft),kt=ct(107),Tt=Rt(kt);function Rt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function jt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}var $t=0;function Ft(Kt,Bt){Kt.setAttribute(Bt,Kt.getAttribute(Bt)!=="true")}var Ht=function(){function Kt(Bt){var Ut=this;jt(this,Kt),this.select=Bt,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){Ut.togglePicker()}),this.label.addEventListener("keydown",function(Yt){switch(Yt.keyCode){case St.default.keys.ENTER:Ut.togglePicker();break;case St.default.keys.ESCAPE:Ut.escape(),Yt.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return dt(Kt,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),Ft(this.label,"aria-expanded"),Ft(this.options,"aria-hidden")}},{key:"buildItem",value:function(Ut){var Yt=this,Jt=document.createElement("span");return Jt.tabIndex="0",Jt.setAttribute("role","button"),Jt.classList.add("ql-picker-item"),Ut.hasAttribute("value")&&Jt.setAttribute("data-value",Ut.getAttribute("value")),Ut.textContent&&Jt.setAttribute("data-label",Ut.textContent),Jt.addEventListener("click",function(){Yt.selectItem(Jt,!0)}),Jt.addEventListener("keydown",function(Zt){switch(Zt.keyCode){case St.default.keys.ENTER:Yt.selectItem(Jt,!0),Zt.preventDefault();break;case St.default.keys.ESCAPE:Yt.escape(),Zt.preventDefault();break}}),Jt}},{key:"buildLabel",value:function(){var Ut=document.createElement("span");return Ut.classList.add("ql-picker-label"),Ut.innerHTML=Tt.default,Ut.tabIndex="0",Ut.setAttribute("role","button"),Ut.setAttribute("aria-expanded","false"),this.container.appendChild(Ut),Ut}},{key:"buildOptions",value:function(){var Ut=this,Yt=document.createElement("span");Yt.classList.add("ql-picker-options"),Yt.setAttribute("aria-hidden","true"),Yt.tabIndex="-1",Yt.id="ql-picker-options-"+$t,$t+=1,this.label.setAttribute("aria-controls",Yt.id),this.options=Yt,[].slice.call(this.select.options).forEach(function(Jt){var Zt=Ut.buildItem(Jt);Yt.appendChild(Zt),Jt.selected===!0&&Ut.selectItem(Zt)}),this.container.appendChild(Yt)}},{key:"buildPicker",value:function(){var Ut=this;[].slice.call(this.select.attributes).forEach(function(Yt){Ut.container.setAttribute(Yt.name,Yt.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var Ut=this;this.close(),setTimeout(function(){return Ut.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(Ut){var Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Jt=this.container.querySelector(".ql-selected");if(Ut!==Jt&&(Jt!=null&&Jt.classList.remove("ql-selected"),Ut!=null&&(Ut.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(Ut.parentNode.children,Ut),Ut.hasAttribute("data-value")?this.label.setAttribute("data-value",Ut.getAttribute("data-value")):this.label.removeAttribute("data-value"),Ut.hasAttribute("data-label")?this.label.setAttribute("data-label",Ut.getAttribute("data-label")):this.label.removeAttribute("data-label"),Yt))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":ut(Event))==="object"){var Zt=document.createEvent("Event");Zt.initEvent("change",!0,!0),this.select.dispatchEvent(Zt)}this.close()}}},{key:"update",value:function(){var Ut=void 0;if(this.select.selectedIndex>-1){var Yt=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];Ut=this.select.options[this.select.selectedIndex],this.selectItem(Yt)}else this.selectItem(null);var Jt=Ut!=null&&Ut!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",Jt)}}]),Kt}();ot.default=Ht},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(0),dt=vn(ut),ft=ct(5),St=vn(ft),kt=ct(4),Tt=vn(kt),Rt=ct(16),jt=vn(Rt),$t=ct(25),Ft=vn($t),Ht=ct(24),Kt=vn(Ht),Bt=ct(35),Ut=vn(Bt),Yt=ct(6),Jt=vn(Yt),Zt=ct(22),en=vn(Zt),tn=ct(7),nn=vn(tn),ln=ct(55),an=vn(ln),sn=ct(42),dn=vn(sn),mn=ct(23),yn=vn(mn);function vn(hn){return hn&&hn.__esModule?hn:{default:hn}}St.default.register({"blots/block":Tt.default,"blots/block/embed":kt.BlockEmbed,"blots/break":jt.default,"blots/container":Ft.default,"blots/cursor":Kt.default,"blots/embed":Ut.default,"blots/inline":Jt.default,"blots/scroll":en.default,"blots/text":nn.default,"modules/clipboard":an.default,"modules/history":dn.default,"modules/keyboard":yn.default}),dt.default.register(Tt.default,jt.default,Kt.default,Jt.default,en.default,nn.default),ot.default=St.default},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(1),dt=function(){function ft(St){this.domNode=St,this.domNode[ut.DATA_KEY]={blot:this}}return Object.defineProperty(ft.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),ft.create=function(St){if(this.tagName==null)throw new ut.ParchmentError("Blot definition missing tagName");var kt;return Array.isArray(this.tagName)?(typeof St=="string"&&(St=St.toUpperCase(),parseInt(St).toString()===St&&(St=parseInt(St))),typeof St=="number"?kt=document.createElement(this.tagName[St-1]):this.tagName.indexOf(St)>-1?kt=document.createElement(St):kt=document.createElement(this.tagName[0])):kt=document.createElement(this.tagName),this.className&&kt.classList.add(this.className),kt},ft.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},ft.prototype.clone=function(){var St=this.domNode.cloneNode(!1);return ut.create(St)},ft.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[ut.DATA_KEY]},ft.prototype.deleteAt=function(St,kt){var Tt=this.isolate(St,kt);Tt.remove()},ft.prototype.formatAt=function(St,kt,Tt,Rt){var jt=this.isolate(St,kt);if(ut.query(Tt,ut.Scope.BLOT)!=null&&Rt)jt.wrap(Tt,Rt);else if(ut.query(Tt,ut.Scope.ATTRIBUTE)!=null){var $t=ut.create(this.statics.scope);jt.wrap($t),$t.format(Tt,Rt)}},ft.prototype.insertAt=function(St,kt,Tt){var Rt=Tt==null?ut.create("text",kt):ut.create(kt,Tt),jt=this.split(St);this.parent.insertBefore(Rt,jt)},ft.prototype.insertInto=function(St,kt){kt===void 0&&(kt=null),this.parent!=null&&this.parent.children.remove(this);var Tt=null;St.children.insertBefore(this,kt),kt!=null&&(Tt=kt.domNode),(this.domNode.parentNode!=St.domNode||this.domNode.nextSibling!=Tt)&&St.domNode.insertBefore(this.domNode,Tt),this.parent=St,this.attach()},ft.prototype.isolate=function(St,kt){var Tt=this.split(St);return Tt.split(kt),Tt},ft.prototype.length=function(){return 1},ft.prototype.offset=function(St){return St===void 0&&(St=this.parent),this.parent==null||this==St?0:this.parent.children.offset(this)+this.parent.offset(St)},ft.prototype.optimize=function(St){this.domNode[ut.DATA_KEY]!=null&&delete this.domNode[ut.DATA_KEY].mutations},ft.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},ft.prototype.replace=function(St){St.parent!=null&&(St.parent.insertBefore(this,St.next),St.remove())},ft.prototype.replaceWith=function(St,kt){var Tt=typeof St=="string"?ut.create(St,kt):St;return Tt.replace(this),Tt},ft.prototype.split=function(St,kt){return St===0?this:this.next},ft.prototype.update=function(St,kt){},ft.prototype.wrap=function(St,kt){var Tt=typeof St=="string"?ut.create(St,kt):St;return this.parent!=null&&this.parent.insertBefore(Tt,this.next),Tt.appendChild(this),Tt},ft.blotName="abstract",ft}();ot.default=dt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(12),dt=ct(32),ft=ct(33),St=ct(1),kt=function(){function Tt(Rt){this.attributes={},this.domNode=Rt,this.build()}return Tt.prototype.attribute=function(Rt,jt){jt?Rt.add(this.domNode,jt)&&(Rt.value(this.domNode)!=null?this.attributes[Rt.attrName]=Rt:delete this.attributes[Rt.attrName]):(Rt.remove(this.domNode),delete this.attributes[Rt.attrName])},Tt.prototype.build=function(){var Rt=this;this.attributes={};var jt=ut.default.keys(this.domNode),$t=dt.default.keys(this.domNode),Ft=ft.default.keys(this.domNode);jt.concat($t).concat(Ft).forEach(function(Ht){var Kt=St.query(Ht,St.Scope.ATTRIBUTE);Kt instanceof ut.default&&(Rt.attributes[Kt.attrName]=Kt)})},Tt.prototype.copy=function(Rt){var jt=this;Object.keys(this.attributes).forEach(function($t){var Ft=jt.attributes[$t].value(jt.domNode);Rt.format($t,Ft)})},Tt.prototype.move=function(Rt){var jt=this;this.copy(Rt),Object.keys(this.attributes).forEach(function($t){jt.attributes[$t].remove(jt.domNode)}),this.attributes={}},Tt.prototype.values=function(){var Rt=this;return Object.keys(this.attributes).reduce(function(jt,$t){return jt[$t]=Rt.attributes[$t].value(Rt.domNode),jt},{})},Tt}();ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12);function ft(kt,Tt){var Rt=kt.getAttribute("class")||"";return Rt.split(/\s+/).filter(function(jt){return jt.indexOf(Tt+"-")===0})}var St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(Rt){return(Rt.getAttribute("class")||"").split(/\s+/).map(function(jt){return jt.split("-").slice(0,-1).join("-")})},Tt.prototype.add=function(Rt,jt){return this.canAdd(Rt,jt)?(this.remove(Rt),Rt.classList.add(this.keyName+"-"+jt),!0):!1},Tt.prototype.remove=function(Rt){var jt=ft(Rt,this.keyName);jt.forEach(function($t){Rt.classList.remove($t)}),Rt.classList.length===0&&Rt.removeAttribute("class")},Tt.prototype.value=function(Rt){var jt=ft(Rt,this.keyName)[0]||"",$t=jt.slice(this.keyName.length+1);return this.canAdd(Rt,$t)?$t:""},Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(12);function ft(kt){var Tt=kt.split("-"),Rt=Tt.slice(1).map(function(jt){return jt[0].toUpperCase()+jt.slice(1)}).join("");return Tt[0]+Rt}var St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(Rt){return(Rt.getAttribute("style")||"").split(";").map(function(jt){var $t=jt.split(":");return $t[0].trim()})},Tt.prototype.add=function(Rt,jt){return this.canAdd(Rt,jt)?(Rt.style[ft(this.keyName)]=jt,!0):!1},Tt.prototype.remove=function(Rt){Rt.style[ft(this.keyName)]="",Rt.getAttribute("style")||Rt.removeAttribute("style")},Tt.prototype.value=function(Rt){var jt=Rt.style[ft(this.keyName)];return this.canAdd(Rt,jt)?jt:""},Tt}(dt.default);ot.default=St},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function St(kt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var jt=Tt[Rt];jt.enumerable=jt.enumerable||!1,jt.configurable=!0,"value"in jt&&(jt.writable=!0),Object.defineProperty(kt,jt.key,jt)}}return function(kt,Tt,Rt){return Tt&&St(kt.prototype,Tt),Rt&&St(kt,Rt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){dt(this,St),this.quill=kt,this.options=Tt,this.modules={}}return ut(St,[{key:"init",value:function(){var Tt=this;Object.keys(this.options.modules).forEach(function(Rt){Tt.modules[Rt]==null&&Tt.addModule(Rt)})}},{key:"addModule",value:function(Tt){var Rt=this.quill.constructor.import("modules/"+Tt);return this.modules[Tt]=new Rt(this.quill,this.options.modules[Tt]||{}),this.modules[Tt]}}]),St}();ft.DEFAULTS={modules:{}},ft.themes={default:ft},ot.default=ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Bt(Ut,Yt){for(var Jt=0;Jt<Yt.length;Jt++){var Zt=Yt[Jt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Ut,Zt.key,Zt)}}return function(Ut,Yt,Jt){return Yt&&Bt(Ut.prototype,Yt),Jt&&Bt(Ut,Jt),Ut}}(),dt=function Bt(Ut,Yt,Jt){Ut===null&&(Ut=Function.prototype);var Zt=Object.getOwnPropertyDescriptor(Ut,Yt);if(Zt===void 0){var en=Object.getPrototypeOf(Ut);return en===null?void 0:Bt(en,Yt,Jt)}else{if("value"in Zt)return Zt.value;var tn=Zt.get;return tn===void 0?void 0:tn.call(Jt)}},ft=ct(0),St=Rt(ft),kt=ct(7),Tt=Rt(kt);function Rt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function jt(Bt,Ut){if(!(Bt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function $t(Bt,Ut){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Bt}function Ft(Bt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Bt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ut):Bt.__proto__=Ut)}var Ht="\uFEFF",Kt=function(Bt){Ft(Ut,Bt);function Ut(Yt){jt(this,Ut);var Jt=$t(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).call(this,Yt));return Jt.contentNode=document.createElement("span"),Jt.contentNode.setAttribute("contenteditable",!1),[].slice.call(Jt.domNode.childNodes).forEach(function(Zt){Jt.contentNode.appendChild(Zt)}),Jt.leftGuard=document.createTextNode(Ht),Jt.rightGuard=document.createTextNode(Ht),Jt.domNode.appendChild(Jt.leftGuard),Jt.domNode.appendChild(Jt.contentNode),Jt.domNode.appendChild(Jt.rightGuard),Jt}return ut(Ut,[{key:"index",value:function(Jt,Zt){return Jt===this.leftGuard?0:Jt===this.rightGuard?1:dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"index",this).call(this,Jt,Zt)}},{key:"restore",value:function(Jt){var Zt=void 0,en=void 0,tn=Jt.data.split(Ht).join("");if(Jt===this.leftGuard)if(this.prev instanceof Tt.default){var nn=this.prev.length();this.prev.insertAt(nn,tn),Zt={startNode:this.prev.domNode,startOffset:nn+tn.length}}else en=document.createTextNode(tn),this.parent.insertBefore(St.default.create(en),this),Zt={startNode:en,startOffset:tn.length};else Jt===this.rightGuard&&(this.next instanceof Tt.default?(this.next.insertAt(0,tn),Zt={startNode:this.next.domNode,startOffset:tn.length}):(en=document.createTextNode(tn),this.parent.insertBefore(St.default.create(en),this.next),Zt={startNode:en,startOffset:tn.length}));return Jt.data=Ht,Zt}},{key:"update",value:function(Jt,Zt){var en=this;Jt.forEach(function(tn){if(tn.type==="characterData"&&(tn.target===en.leftGuard||tn.target===en.rightGuard)){var nn=en.restore(tn.target);nn&&(Zt.range=nn)}})}}]),Ut}(St.default.Embed);ot.default=Kt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.AlignStyle=ot.AlignClass=ot.AlignAttribute=void 0;var ut=ct(0),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}var St={scope:dt.default.Scope.BLOCK,whitelist:["right","center","justify"]},kt=new dt.default.Attributor.Attribute("align","align",St),Tt=new dt.default.Attributor.Class("align","ql-align",St),Rt=new dt.default.Attributor.Style("align","text-align",St);ot.AlignAttribute=kt,ot.AlignClass=Tt,ot.AlignStyle=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.BackgroundStyle=ot.BackgroundClass=void 0;var ut=ct(0),dt=St(ut),ft=ct(26);function St(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}var kt=new dt.default.Attributor.Class("background","ql-bg",{scope:dt.default.Scope.INLINE}),Tt=new ft.ColorAttributor("background","background-color",{scope:dt.default.Scope.INLINE});ot.BackgroundClass=kt,ot.BackgroundStyle=Tt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.DirectionStyle=ot.DirectionClass=ot.DirectionAttribute=void 0;var ut=ct(0),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}var St={scope:dt.default.Scope.BLOCK,whitelist:["rtl"]},kt=new dt.default.Attributor.Attribute("direction","dir",St),Tt=new dt.default.Attributor.Class("direction","ql-direction",St),Rt=new dt.default.Attributor.Style("direction","direction",St);ot.DirectionAttribute=kt,ot.DirectionClass=Tt,ot.DirectionStyle=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.FontClass=ot.FontStyle=void 0;var ut=function(){function Bt(Ut,Yt){for(var Jt=0;Jt<Yt.length;Jt++){var Zt=Yt[Jt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Ut,Zt.key,Zt)}}return function(Ut,Yt,Jt){return Yt&&Bt(Ut.prototype,Yt),Jt&&Bt(Ut,Jt),Ut}}(),dt=function Bt(Ut,Yt,Jt){Ut===null&&(Ut=Function.prototype);var Zt=Object.getOwnPropertyDescriptor(Ut,Yt);if(Zt===void 0){var en=Object.getPrototypeOf(Ut);return en===null?void 0:Bt(en,Yt,Jt)}else{if("value"in Zt)return Zt.value;var tn=Zt.get;return tn===void 0?void 0:tn.call(Jt)}},ft=ct(0),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,Ut){if(!(Bt instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,Ut){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Bt}function jt(Bt,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Bt.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,Ut):Bt.__proto__=Ut)}var $t={scope:St.default.Scope.INLINE,whitelist:["serif","monospace"]},Ft=new St.default.Attributor.Class("font","ql-font",$t),Ht=function(Bt){jt(Ut,Bt);function Ut(){return Tt(this,Ut),Rt(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).apply(this,arguments))}return ut(Ut,[{key:"value",value:function(Jt){return dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"value",this).call(this,Jt).replace(/["']/g,"")}}]),Ut}(St.default.Attributor.Style),Kt=new Ht("font","font-family",$t);ot.FontStyle=Kt,ot.FontClass=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SizeStyle=ot.SizeClass=void 0;var ut=ct(0),dt=ft(ut);function ft(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}}var St=new dt.default.Attributor.Class("size","ql-size",{scope:dt.default.Scope.INLINE,whitelist:["small","large","huge"]}),kt=new dt.default.Attributor.Style("size","font-size",{scope:dt.default.Scope.INLINE,whitelist:["10px","18px","32px"]});ot.SizeClass=St,ot.SizeStyle=kt},function(et,ot,ct){et.exports={align:{"":ct(76),center:ct(77),right:ct(78),justify:ct(79)},background:ct(80),blockquote:ct(81),bold:ct(82),clean:ct(83),code:ct(58),"code-block":ct(58),color:ct(84),direction:{"":ct(85),rtl:ct(86)},float:{center:ct(87),full:ct(88),left:ct(89),right:ct(90)},formula:ct(91),header:{1:ct(92),2:ct(93)},italic:ct(94),image:ct(95),indent:{"+1":ct(96),"-1":ct(97)},link:ct(98),list:{ordered:ct(99),bullet:ct(100),check:ct(101)},script:{sub:ct(102),super:ct(103)},strike:ct(104),underline:ct(105),video:ct(106)}},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.getLastChangeIndex=ot.default=void 0;var ut=function(){function Yt(Jt,Zt){for(var en=0;en<Zt.length;en++){var tn=Zt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Jt,tn.key,tn)}}return function(Jt,Zt,en){return Zt&&Yt(Jt.prototype,Zt),en&&Yt(Jt,en),Jt}}(),dt=ct(0),ft=jt(dt),St=ct(5),kt=jt(St),Tt=ct(9),Rt=jt(Tt);function jt(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function $t(Yt,Jt){if(!(Yt instanceof Jt))throw new TypeError("Cannot call a class as a function")}function Ft(Yt,Jt){if(!Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&(typeof Jt=="object"||typeof Jt=="function")?Jt:Yt}function Ht(Yt,Jt){if(typeof Jt!="function"&&Jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Yt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Yt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Yt,Jt):Yt.__proto__=Jt)}var Kt=function(Yt){Ht(Jt,Yt);function Jt(Zt,en){$t(this,Jt);var tn=Ft(this,(Jt.__proto__||Object.getPrototypeOf(Jt)).call(this,Zt,en));return tn.lastRecorded=0,tn.ignoreChange=!1,tn.clear(),tn.quill.on(kt.default.events.EDITOR_CHANGE,function(nn,ln,an,sn){nn!==kt.default.events.TEXT_CHANGE||tn.ignoreChange||(!tn.options.userOnly||sn===kt.default.sources.USER?tn.record(ln,an):tn.transform(ln))}),tn.quill.keyboard.addBinding({key:"Z",shortKey:!0},tn.undo.bind(tn)),tn.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},tn.redo.bind(tn)),/Win/i.test(navigator.platform)&&tn.quill.keyboard.addBinding({key:"Y",shortKey:!0},tn.redo.bind(tn)),tn}return ut(Jt,[{key:"change",value:function(en,tn){if(this.stack[en].length!==0){var nn=this.stack[en].pop();this.stack[tn].push(nn),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(nn[en],kt.default.sources.USER),this.ignoreChange=!1;var ln=Ut(nn[en]);this.quill.setSelection(ln)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(en,tn){if(en.ops.length!==0){this.stack.redo=[];var nn=this.quill.getContents().diff(tn),ln=Date.now();if(this.lastRecorded+this.options.delay>ln&&this.stack.undo.length>0){var an=this.stack.undo.pop();nn=nn.compose(an.undo),en=an.redo.compose(en)}else this.lastRecorded=ln;this.stack.undo.push({redo:en,undo:nn}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(en){this.stack.undo.forEach(function(tn){tn.undo=en.transform(tn.undo,!0),tn.redo=en.transform(tn.redo,!0)}),this.stack.redo.forEach(function(tn){tn.undo=en.transform(tn.undo,!0),tn.redo=en.transform(tn.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),Jt}(Rt.default);Kt.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function Bt(Yt){var Jt=Yt.ops[Yt.ops.length-1];return Jt==null?!1:Jt.insert!=null?typeof Jt.insert=="string"&&Jt.insert.endsWith(`
`):Jt.attributes!=null?Object.keys(Jt.attributes).some(function(Zt){return ft.default.query(Zt,ft.default.Scope.BLOCK)!=null}):!1}function Ut(Yt){var Jt=Yt.reduce(function(en,tn){return en+=tn.delete||0,en},0),Zt=Yt.length()-Jt;return Bt(Yt)&&(Zt-=1),Zt}ot.default=Kt,ot.getLastChangeIndex=Ut},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BaseTooltip=void 0;var ut=function(){function xn(En,wn){for(var kn=0;kn<wn.length;kn++){var Sn=wn[kn];Sn.enumerable=Sn.enumerable||!1,Sn.configurable=!0,"value"in Sn&&(Sn.writable=!0),Object.defineProperty(En,Sn.key,Sn)}}return function(En,wn,kn){return wn&&xn(En.prototype,wn),kn&&xn(En,kn),En}}(),dt=function xn(En,wn,kn){En===null&&(En=Function.prototype);var Sn=Object.getOwnPropertyDescriptor(En,wn);if(Sn===void 0){var An=Object.getPrototypeOf(En);return An===null?void 0:xn(An,wn,kn)}else{if("value"in Sn)return Sn.value;var Cn=Sn.get;return Cn===void 0?void 0:Cn.call(kn)}},ft=ct(3),St=ln(ft),kt=ct(2),Tt=ln(kt),Rt=ct(8),jt=ln(Rt),$t=ct(23),Ft=ln($t),Ht=ct(34),Kt=ln(Ht),Bt=ct(59),Ut=ln(Bt),Yt=ct(60),Jt=ln(Yt),Zt=ct(28),en=ln(Zt),tn=ct(61),nn=ln(tn);function ln(xn){return xn&&xn.__esModule?xn:{default:xn}}function an(xn,En){if(!(xn instanceof En))throw new TypeError("Cannot call a class as a function")}function sn(xn,En){if(!xn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return En&&(typeof En=="object"||typeof En=="function")?En:xn}function dn(xn,En){if(typeof En!="function"&&En!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof En);xn.prototype=Object.create(En&&En.prototype,{constructor:{value:xn,enumerable:!1,writable:!0,configurable:!0}}),En&&(Object.setPrototypeOf?Object.setPrototypeOf(xn,En):xn.__proto__=En)}var mn=[!1,"center","right","justify"],yn=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],vn=[!1,"serif","monospace"],hn=["1","2","3",!1],pn=["small",!1,"large","huge"],rn=function(xn){dn(En,xn);function En(wn,kn){an(this,En);var Sn=sn(this,(En.__proto__||Object.getPrototypeOf(En)).call(this,wn,kn)),An=function Cn(Tn){if(!document.body.contains(wn.root))return document.body.removeEventListener("click",Cn);Sn.tooltip!=null&&!Sn.tooltip.root.contains(Tn.target)&&document.activeElement!==Sn.tooltip.textbox&&!Sn.quill.hasFocus()&&Sn.tooltip.hide(),Sn.pickers!=null&&Sn.pickers.forEach(function(_n){_n.container.contains(Tn.target)||_n.close()})};return wn.emitter.listenDOM("click",document.body,An),Sn}return ut(En,[{key:"addModule",value:function(kn){var Sn=dt(En.prototype.__proto__||Object.getPrototypeOf(En.prototype),"addModule",this).call(this,kn);return kn==="toolbar"&&this.extendToolbar(Sn),Sn}},{key:"buildButtons",value:function(kn,Sn){kn.forEach(function(An){var Cn=An.getAttribute("class")||"";Cn.split(/\s+/).forEach(function(Tn){if(Tn.startsWith("ql-")&&(Tn=Tn.slice(3),Sn[Tn]!=null))if(Tn==="direction")An.innerHTML=Sn[Tn][""]+Sn[Tn].rtl;else if(typeof Sn[Tn]=="string")An.innerHTML=Sn[Tn];else{var _n=An.value||"";_n!=null&&Sn[Tn][_n]&&(An.innerHTML=Sn[Tn][_n])}})})}},{key:"buildPickers",value:function(kn,Sn){var An=this;this.pickers=kn.map(function(Tn){if(Tn.classList.contains("ql-align"))return Tn.querySelector("option")==null&&un(Tn,mn),new Jt.default(Tn,Sn.align);if(Tn.classList.contains("ql-background")||Tn.classList.contains("ql-color")){var _n=Tn.classList.contains("ql-background")?"background":"color";return Tn.querySelector("option")==null&&un(Tn,yn,_n==="background"?"#ffffff":"#000000"),new Ut.default(Tn,Sn[_n])}else return Tn.querySelector("option")==null&&(Tn.classList.contains("ql-font")?un(Tn,vn):Tn.classList.contains("ql-header")?un(Tn,hn):Tn.classList.contains("ql-size")&&un(Tn,pn)),new en.default(Tn)});var Cn=function(){An.pickers.forEach(function(_n){_n.update()})};this.quill.on(jt.default.events.EDITOR_CHANGE,Cn)}}]),En}(Kt.default);rn.DEFAULTS=(0,St.default)(!0,{},Kt.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var En=this,wn=this.container.querySelector("input.ql-image[type=file]");wn==null&&(wn=document.createElement("input"),wn.setAttribute("type","file"),wn.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),wn.classList.add("ql-image"),wn.addEventListener("change",function(){if(wn.files!=null&&wn.files[0]!=null){var kn=new FileReader;kn.onload=function(Sn){var An=En.quill.getSelection(!0);En.quill.updateContents(new Tt.default().retain(An.index).delete(An.length).insert({image:Sn.target.result}),jt.default.sources.USER),En.quill.setSelection(An.index+1,jt.default.sources.SILENT),wn.value=""},kn.readAsDataURL(wn.files[0])}}),this.container.appendChild(wn)),wn.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var on=function(xn){dn(En,xn);function En(wn,kn){an(this,En);var Sn=sn(this,(En.__proto__||Object.getPrototypeOf(En)).call(this,wn,kn));return Sn.textbox=Sn.root.querySelector('input[type="text"]'),Sn.listen(),Sn}return ut(En,[{key:"listen",value:function(){var kn=this;this.textbox.addEventListener("keydown",function(Sn){Ft.default.match(Sn,"enter")?(kn.save(),Sn.preventDefault()):Ft.default.match(Sn,"escape")&&(kn.cancel(),Sn.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var kn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",Sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),Sn!=null?this.textbox.value=Sn:kn!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+kn)||""),this.root.setAttribute("data-mode",kn)}},{key:"restoreFocus",value:function(){var kn=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=kn}},{key:"save",value:function(){var kn=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var Sn=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",kn,jt.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",kn,jt.default.sources.USER)),this.quill.root.scrollTop=Sn;break}case"video":kn=gn(kn);case"formula":{if(!kn)break;var An=this.quill.getSelection(!0);if(An!=null){var Cn=An.index+An.length;this.quill.insertEmbed(Cn,this.root.getAttribute("data-mode"),kn,jt.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Cn+1," ",jt.default.sources.USER),this.quill.setSelection(Cn+2,jt.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),En}(nn.default);function gn(xn){var En=xn.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||xn.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return En?(En[1]||"https")+"://www.youtube.com/embed/"+En[2]+"?showinfo=0":(En=xn.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(En[1]||"https")+"://player.vimeo.com/video/"+En[2]+"/":xn}function un(xn,En){var wn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;En.forEach(function(kn){var Sn=document.createElement("option");kn===wn?Sn.setAttribute("selected","selected"):Sn.setAttribute("value",kn),xn.appendChild(Sn)})}ot.BaseTooltip=on,ot.default=rn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function dt(){this.head=this.tail=null,this.length=0}return dt.prototype.append=function(){for(var ft=[],St=0;St<arguments.length;St++)ft[St]=arguments[St];this.insertBefore(ft[0],null),ft.length>1&&this.append.apply(this,ft.slice(1))},dt.prototype.contains=function(ft){for(var St,kt=this.iterator();St=kt();)if(St===ft)return!0;return!1},dt.prototype.insertBefore=function(ft,St){ft&&(ft.next=St,St!=null?(ft.prev=St.prev,St.prev!=null&&(St.prev.next=ft),St.prev=ft,St===this.head&&(this.head=ft)):this.tail!=null?(this.tail.next=ft,ft.prev=this.tail,this.tail=ft):(ft.prev=null,this.head=this.tail=ft),this.length+=1)},dt.prototype.offset=function(ft){for(var St=0,kt=this.head;kt!=null;){if(kt===ft)return St;St+=kt.length(),kt=kt.next}return-1},dt.prototype.remove=function(ft){this.contains(ft)&&(ft.prev!=null&&(ft.prev.next=ft.next),ft.next!=null&&(ft.next.prev=ft.prev),ft===this.head&&(this.head=ft.next),ft===this.tail&&(this.tail=ft.prev),this.length-=1)},dt.prototype.iterator=function(ft){return ft===void 0&&(ft=this.head),function(){var St=ft;return ft!=null&&(ft=ft.next),St}},dt.prototype.find=function(ft,St){St===void 0&&(St=!1);for(var kt,Tt=this.iterator();kt=Tt();){var Rt=kt.length();if(ft<Rt||St&&ft===Rt&&(kt.next==null||kt.next.length()!==0))return[kt,ft];ft-=Rt}return[null,0]},dt.prototype.forEach=function(ft){for(var St,kt=this.iterator();St=kt();)ft(St)},dt.prototype.forEachAt=function(ft,St,kt){if(!(St<=0))for(var Tt=this.find(ft),Rt=Tt[0],jt=Tt[1],$t,Ft=ft-jt,Ht=this.iterator(Rt);($t=Ht())&&Ft<ft+St;){var Kt=$t.length();ft>Ft?kt($t,ft-Ft,Math.min(St,Ft+Kt-ft)):kt($t,0,Math.min(Kt,ft+St-Ft)),Ft+=Kt}},dt.prototype.map=function(ft){return this.reduce(function(St,kt){return St.push(ft(kt)),St},[])},dt.prototype.reduce=function(ft,St){for(var kt,Tt=this.iterator();kt=Tt();)St=ft(St,kt);return St},dt}();ot.default=ut},function(et,ot,ct){var ut=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(jt,$t){jt.__proto__=$t}||function(jt,$t){for(var Ft in $t)$t.hasOwnProperty(Ft)&&(jt[Ft]=$t[Ft])};return function(jt,$t){Rt(jt,$t);function Ft(){this.constructor=jt}jt.prototype=$t===null?Object.create($t):(Ft.prototype=$t.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(17),ft=ct(1),St={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},kt=100,Tt=function(Rt){ut(jt,Rt);function jt($t){var Ft=Rt.call(this,$t)||this;return Ft.scroll=Ft,Ft.observer=new MutationObserver(function(Ht){Ft.update(Ht)}),Ft.observer.observe(Ft.domNode,St),Ft.attach(),Ft}return jt.prototype.detach=function(){Rt.prototype.detach.call(this),this.observer.disconnect()},jt.prototype.deleteAt=function($t,Ft){this.update(),$t===0&&Ft===this.length()?this.children.forEach(function(Ht){Ht.remove()}):Rt.prototype.deleteAt.call(this,$t,Ft)},jt.prototype.formatAt=function($t,Ft,Ht,Kt){this.update(),Rt.prototype.formatAt.call(this,$t,Ft,Ht,Kt)},jt.prototype.insertAt=function($t,Ft,Ht){this.update(),Rt.prototype.insertAt.call(this,$t,Ft,Ht)},jt.prototype.optimize=function($t,Ft){var Ht=this;$t===void 0&&($t=[]),Ft===void 0&&(Ft={}),Rt.prototype.optimize.call(this,Ft);for(var Kt=[].slice.call(this.observer.takeRecords());Kt.length>0;)$t.push(Kt.pop());for(var Bt=function(Zt,en){en===void 0&&(en=!0),!(Zt==null||Zt===Ht)&&Zt.domNode.parentNode!=null&&(Zt.domNode[ft.DATA_KEY].mutations==null&&(Zt.domNode[ft.DATA_KEY].mutations=[]),en&&Bt(Zt.parent))},Ut=function(Zt){Zt.domNode[ft.DATA_KEY]==null||Zt.domNode[ft.DATA_KEY].mutations==null||(Zt instanceof dt.default&&Zt.children.forEach(Ut),Zt.optimize(Ft))},Yt=$t,Jt=0;Yt.length>0;Jt+=1){if(Jt>=kt)throw new Error("[Parchment] Maximum optimize iterations reached");for(Yt.forEach(function(Zt){var en=ft.find(Zt.target,!0);en!=null&&(en.domNode===Zt.target&&(Zt.type==="childList"?(Bt(ft.find(Zt.previousSibling,!1)),[].forEach.call(Zt.addedNodes,function(tn){var nn=ft.find(tn,!1);Bt(nn,!1),nn instanceof dt.default&&nn.children.forEach(function(ln){Bt(ln,!1)})})):Zt.type==="attributes"&&Bt(en.prev)),Bt(en))}),this.children.forEach(Ut),Yt=[].slice.call(this.observer.takeRecords()),Kt=Yt.slice();Kt.length>0;)$t.push(Kt.pop())}},jt.prototype.update=function($t,Ft){var Ht=this;Ft===void 0&&(Ft={}),$t=$t||this.observer.takeRecords(),$t.map(function(Kt){var Bt=ft.find(Kt.target,!0);return Bt==null?null:Bt.domNode[ft.DATA_KEY].mutations==null?(Bt.domNode[ft.DATA_KEY].mutations=[Kt],Bt):(Bt.domNode[ft.DATA_KEY].mutations.push(Kt),null)}).forEach(function(Kt){Kt==null||Kt===Ht||Kt.domNode[ft.DATA_KEY]==null||Kt.update(Kt.domNode[ft.DATA_KEY].mutations||[],Ft)}),this.domNode[ft.DATA_KEY].mutations!=null&&Rt.prototype.update.call(this,this.domNode[ft.DATA_KEY].mutations,Ft),this.optimize($t,Ft)},jt.blotName="scroll",jt.defaultChild="block",jt.scope=ft.Scope.BLOCK_BLOT,jt.tagName="DIV",jt}(dt.default);ot.default=Tt},function(et,ot,ct){var ut=this&&this.__extends||function(){var Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,jt){Rt.__proto__=jt}||function(Rt,jt){for(var $t in jt)jt.hasOwnProperty($t)&&(Rt[$t]=jt[$t])};return function(Rt,jt){Tt(Rt,jt);function $t(){this.constructor=Rt}Rt.prototype=jt===null?Object.create(jt):($t.prototype=jt.prototype,new $t)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(18),ft=ct(1);function St(Tt,Rt){if(Object.keys(Tt).length!==Object.keys(Rt).length)return!1;for(var jt in Tt)if(Tt[jt]!==Rt[jt])return!1;return!0}var kt=function(Tt){ut(Rt,Tt);function Rt(){return Tt!==null&&Tt.apply(this,arguments)||this}return Rt.formats=function(jt){if(jt.tagName!==Rt.tagName)return Tt.formats.call(this,jt)},Rt.prototype.format=function(jt,$t){var Ft=this;jt===this.statics.blotName&&!$t?(this.children.forEach(function(Ht){Ht instanceof dt.default||(Ht=Ht.wrap(Rt.blotName,!0)),Ft.attributes.copy(Ht)}),this.unwrap()):Tt.prototype.format.call(this,jt,$t)},Rt.prototype.formatAt=function(jt,$t,Ft,Ht){if(this.formats()[Ft]!=null||ft.query(Ft,ft.Scope.ATTRIBUTE)){var Kt=this.isolate(jt,$t);Kt.format(Ft,Ht)}else Tt.prototype.formatAt.call(this,jt,$t,Ft,Ht)},Rt.prototype.optimize=function(jt){Tt.prototype.optimize.call(this,jt);var $t=this.formats();if(Object.keys($t).length===0)return this.unwrap();var Ft=this.next;Ft instanceof Rt&&Ft.prev===this&&St($t,Ft.formats())&&(Ft.moveChildren(this),Ft.remove())},Rt.blotName="inline",Rt.scope=ft.Scope.INLINE_BLOT,Rt.tagName="SPAN",Rt}(dt.default);ot.default=kt},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(18),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.formats=function(Rt){var jt=ft.query(Tt.blotName).tagName;if(Rt.tagName!==jt)return kt.formats.call(this,Rt)},Tt.prototype.format=function(Rt,jt){ft.query(Rt,ft.Scope.BLOCK)!=null&&(Rt===this.statics.blotName&&!jt?this.replaceWith(Tt.blotName):kt.prototype.format.call(this,Rt,jt))},Tt.prototype.formatAt=function(Rt,jt,$t,Ft){ft.query($t,ft.Scope.BLOCK)!=null?this.format($t,Ft):kt.prototype.formatAt.call(this,Rt,jt,$t,Ft)},Tt.prototype.insertAt=function(Rt,jt,$t){if($t==null||ft.query(jt,ft.Scope.INLINE)!=null)kt.prototype.insertAt.call(this,Rt,jt,$t);else{var Ft=this.split(Rt),Ht=ft.create(jt,$t);Ft.parent.insertBefore(Ht,Ft)}},Tt.prototype.update=function(Rt,jt){navigator.userAgent.match(/Trident/)?this.build():kt.prototype.update.call(this,Rt,jt)},Tt.blotName="block",Tt.scope=ft.Scope.BLOCK_BLOT,Tt.tagName="P",Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=this&&this.__extends||function(){var St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,Tt){kt.__proto__=Tt}||function(kt,Tt){for(var Rt in Tt)Tt.hasOwnProperty(Rt)&&(kt[Rt]=Tt[Rt])};return function(kt,Tt){St(kt,Tt);function Rt(){this.constructor=kt}kt.prototype=Tt===null?Object.create(Tt):(Rt.prototype=Tt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(19),ft=function(St){ut(kt,St);function kt(){return St!==null&&St.apply(this,arguments)||this}return kt.formats=function(Tt){},kt.prototype.format=function(Tt,Rt){St.prototype.formatAt.call(this,0,this.length(),Tt,Rt)},kt.prototype.formatAt=function(Tt,Rt,jt,$t){Tt===0&&Rt===this.length()?this.format(jt,$t):St.prototype.formatAt.call(this,Tt,Rt,jt,$t)},kt.prototype.formats=function(){return this.statics.formats(this.domNode)},kt}(dt.default);ot.default=ft},function(et,ot,ct){var ut=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var jt in Rt)Rt.hasOwnProperty(jt)&&(Tt[jt]=Rt[jt])};return function(Tt,Rt){kt(Tt,Rt);function jt(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(jt.prototype=Rt.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ct(19),ft=ct(1),St=function(kt){ut(Tt,kt);function Tt(Rt){var jt=kt.call(this,Rt)||this;return jt.text=jt.statics.value(jt.domNode),jt}return Tt.create=function(Rt){return document.createTextNode(Rt)},Tt.value=function(Rt){var jt=Rt.data;return jt.normalize&&(jt=jt.normalize()),jt},Tt.prototype.deleteAt=function(Rt,jt){this.domNode.data=this.text=this.text.slice(0,Rt)+this.text.slice(Rt+jt)},Tt.prototype.index=function(Rt,jt){return this.domNode===Rt?jt:-1},Tt.prototype.insertAt=function(Rt,jt,$t){$t==null?(this.text=this.text.slice(0,Rt)+jt+this.text.slice(Rt),this.domNode.data=this.text):kt.prototype.insertAt.call(this,Rt,jt,$t)},Tt.prototype.length=function(){return this.text.length},Tt.prototype.optimize=function(Rt){kt.prototype.optimize.call(this,Rt),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Tt&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},Tt.prototype.position=function(Rt,jt){return[this.domNode,Rt]},Tt.prototype.split=function(Rt,jt){if(jt===void 0&&(jt=!1),!jt){if(Rt===0)return this;if(Rt===this.length())return this.next}var $t=ft.create(this.domNode.splitText(Rt));return this.parent.insertBefore($t,this.next),this.text=this.statics.value(this.domNode),$t},Tt.prototype.update=function(Rt,jt){var $t=this;Rt.some(function(Ft){return Ft.type==="characterData"&&Ft.target===$t.domNode})&&(this.text=this.statics.value(this.domNode))},Tt.prototype.value=function(){return this.text},Tt.blotName="text",Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ct){var ut=document.createElement("div");if(ut.classList.toggle("test-class",!1),ut.classList.contains("test-class")){var dt=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(ft,St){return arguments.length>1&&!this.contains(ft)==!St?St:dt.call(this,ft)}}String.prototype.startsWith||(String.prototype.startsWith=function(ft,St){return St=St||0,this.substr(St,ft.length)===ft}),String.prototype.endsWith||(String.prototype.endsWith=function(ft,St){var kt=this.toString();(typeof St!="number"||!isFinite(St)||Math.floor(St)!==St||St>kt.length)&&(St=kt.length),St-=ft.length;var Tt=kt.indexOf(ft,St);return Tt!==-1&&Tt===St}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(St){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof St!="function")throw new TypeError("predicate must be a function");for(var kt=Object(this),Tt=kt.length>>>0,Rt=arguments[1],jt,$t=0;$t<Tt;$t++)if(jt=kt[$t],St.call(Rt,jt,$t,kt))return jt}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(et,ot){var ct=-1,ut=1,dt=0;function ft(Jt,Zt,en){if(Jt==Zt)return Jt?[[dt,Jt]]:[];(en<0||Jt.length<en)&&(en=null);var tn=Rt(Jt,Zt),nn=Jt.substring(0,tn);Jt=Jt.substring(tn),Zt=Zt.substring(tn),tn=jt(Jt,Zt);var ln=Jt.substring(Jt.length-tn);Jt=Jt.substring(0,Jt.length-tn),Zt=Zt.substring(0,Zt.length-tn);var an=St(Jt,Zt);return nn&&an.unshift([dt,nn]),ln&&an.push([dt,ln]),Ft(an),en!=null&&(an=Bt(an,en)),an=Ut(an),an}function St(Jt,Zt){var en;if(!Jt)return[[ut,Zt]];if(!Zt)return[[ct,Jt]];var tn=Jt.length>Zt.length?Jt:Zt,nn=Jt.length>Zt.length?Zt:Jt,ln=tn.indexOf(nn);if(ln!=-1)return en=[[ut,tn.substring(0,ln)],[dt,nn],[ut,tn.substring(ln+nn.length)]],Jt.length>Zt.length&&(en[0][0]=en[2][0]=ct),en;if(nn.length==1)return[[ct,Jt],[ut,Zt]];var an=$t(Jt,Zt);if(an){var sn=an[0],dn=an[1],mn=an[2],yn=an[3],vn=an[4],hn=ft(sn,mn),pn=ft(dn,yn);return hn.concat([[dt,vn]],pn)}return kt(Jt,Zt)}function kt(Jt,Zt){for(var en=Jt.length,tn=Zt.length,nn=Math.ceil((en+tn)/2),ln=nn,an=2*nn,sn=new Array(an),dn=new Array(an),mn=0;mn<an;mn++)sn[mn]=-1,dn[mn]=-1;sn[ln+1]=0,dn[ln+1]=0;for(var yn=en-tn,vn=yn%2!=0,hn=0,pn=0,rn=0,on=0,gn=0;gn<nn;gn++){for(var un=-gn+hn;un<=gn-pn;un+=2){var xn=ln+un,En;un==-gn||un!=gn&&sn[xn-1]<sn[xn+1]?En=sn[xn+1]:En=sn[xn-1]+1;for(var wn=En-un;En<en&&wn<tn&&Jt.charAt(En)==Zt.charAt(wn);)En++,wn++;if(sn[xn]=En,En>en)pn+=2;else if(wn>tn)hn+=2;else if(vn){var kn=ln+yn-un;if(kn>=0&&kn<an&&dn[kn]!=-1){var Sn=en-dn[kn];if(En>=Sn)return Tt(Jt,Zt,En,wn)}}}for(var An=-gn+rn;An<=gn-on;An+=2){var kn=ln+An,Sn;An==-gn||An!=gn&&dn[kn-1]<dn[kn+1]?Sn=dn[kn+1]:Sn=dn[kn-1]+1;for(var Cn=Sn-An;Sn<en&&Cn<tn&&Jt.charAt(en-Sn-1)==Zt.charAt(tn-Cn-1);)Sn++,Cn++;if(dn[kn]=Sn,Sn>en)on+=2;else if(Cn>tn)rn+=2;else if(!vn){var xn=ln+yn-An;if(xn>=0&&xn<an&&sn[xn]!=-1){var En=sn[xn],wn=ln+En-xn;if(Sn=en-Sn,En>=Sn)return Tt(Jt,Zt,En,wn)}}}}return[[ct,Jt],[ut,Zt]]}function Tt(Jt,Zt,en,tn){var nn=Jt.substring(0,en),ln=Zt.substring(0,tn),an=Jt.substring(en),sn=Zt.substring(tn),dn=ft(nn,ln),mn=ft(an,sn);return dn.concat(mn)}function Rt(Jt,Zt){if(!Jt||!Zt||Jt.charAt(0)!=Zt.charAt(0))return 0;for(var en=0,tn=Math.min(Jt.length,Zt.length),nn=tn,ln=0;en<nn;)Jt.substring(ln,nn)==Zt.substring(ln,nn)?(en=nn,ln=en):tn=nn,nn=Math.floor((tn-en)/2+en);return nn}function jt(Jt,Zt){if(!Jt||!Zt||Jt.charAt(Jt.length-1)!=Zt.charAt(Zt.length-1))return 0;for(var en=0,tn=Math.min(Jt.length,Zt.length),nn=tn,ln=0;en<nn;)Jt.substring(Jt.length-nn,Jt.length-ln)==Zt.substring(Zt.length-nn,Zt.length-ln)?(en=nn,ln=en):tn=nn,nn=Math.floor((tn-en)/2+en);return nn}function $t(Jt,Zt){var en=Jt.length>Zt.length?Jt:Zt,tn=Jt.length>Zt.length?Zt:Jt;if(en.length<4||tn.length*2<en.length)return null;function nn(pn,rn,on){for(var gn=pn.substring(on,on+Math.floor(pn.length/4)),un=-1,xn="",En,wn,kn,Sn;(un=rn.indexOf(gn,un+1))!=-1;){var An=Rt(pn.substring(on),rn.substring(un)),Cn=jt(pn.substring(0,on),rn.substring(0,un));xn.length<Cn+An&&(xn=rn.substring(un-Cn,un)+rn.substring(un,un+An),En=pn.substring(0,on-Cn),wn=pn.substring(on+An),kn=rn.substring(0,un-Cn),Sn=rn.substring(un+An))}return xn.length*2>=pn.length?[En,wn,kn,Sn,xn]:null}var ln=nn(en,tn,Math.ceil(en.length/4)),an=nn(en,tn,Math.ceil(en.length/2)),sn;if(!ln&&!an)return null;an?ln?sn=ln[4].length>an[4].length?ln:an:sn=an:sn=ln;var dn,mn,yn,vn;Jt.length>Zt.length?(dn=sn[0],mn=sn[1],yn=sn[2],vn=sn[3]):(yn=sn[0],vn=sn[1],dn=sn[2],mn=sn[3]);var hn=sn[4];return[dn,mn,yn,vn,hn]}function Ft(Jt){Jt.push([dt,""]);for(var Zt=0,en=0,tn=0,nn="",ln="",an;Zt<Jt.length;)switch(Jt[Zt][0]){case ut:tn++,ln+=Jt[Zt][1],Zt++;break;case ct:en++,nn+=Jt[Zt][1],Zt++;break;case dt:en+tn>1?(en!==0&&tn!==0&&(an=Rt(ln,nn),an!==0&&(Zt-en-tn>0&&Jt[Zt-en-tn-1][0]==dt?Jt[Zt-en-tn-1][1]+=ln.substring(0,an):(Jt.splice(0,0,[dt,ln.substring(0,an)]),Zt++),ln=ln.substring(an),nn=nn.substring(an)),an=jt(ln,nn),an!==0&&(Jt[Zt][1]=ln.substring(ln.length-an)+Jt[Zt][1],ln=ln.substring(0,ln.length-an),nn=nn.substring(0,nn.length-an))),en===0?Jt.splice(Zt-tn,en+tn,[ut,ln]):tn===0?Jt.splice(Zt-en,en+tn,[ct,nn]):Jt.splice(Zt-en-tn,en+tn,[ct,nn],[ut,ln]),Zt=Zt-en-tn+(en?1:0)+(tn?1:0)+1):Zt!==0&&Jt[Zt-1][0]==dt?(Jt[Zt-1][1]+=Jt[Zt][1],Jt.splice(Zt,1)):Zt++,tn=0,en=0,nn="",ln="";break}Jt[Jt.length-1][1]===""&&Jt.pop();var sn=!1;for(Zt=1;Zt<Jt.length-1;)Jt[Zt-1][0]==dt&&Jt[Zt+1][0]==dt&&(Jt[Zt][1].substring(Jt[Zt][1].length-Jt[Zt-1][1].length)==Jt[Zt-1][1]?(Jt[Zt][1]=Jt[Zt-1][1]+Jt[Zt][1].substring(0,Jt[Zt][1].length-Jt[Zt-1][1].length),Jt[Zt+1][1]=Jt[Zt-1][1]+Jt[Zt+1][1],Jt.splice(Zt-1,1),sn=!0):Jt[Zt][1].substring(0,Jt[Zt+1][1].length)==Jt[Zt+1][1]&&(Jt[Zt-1][1]+=Jt[Zt+1][1],Jt[Zt][1]=Jt[Zt][1].substring(Jt[Zt+1][1].length)+Jt[Zt+1][1],Jt.splice(Zt+1,1),sn=!0)),Zt++;sn&&Ft(Jt)}var Ht=ft;Ht.INSERT=ut,Ht.DELETE=ct,Ht.EQUAL=dt,et.exports=Ht;function Kt(Jt,Zt){if(Zt===0)return[dt,Jt];for(var en=0,tn=0;tn<Jt.length;tn++){var nn=Jt[tn];if(nn[0]===ct||nn[0]===dt){var ln=en+nn[1].length;if(Zt===ln)return[tn+1,Jt];if(Zt<ln){Jt=Jt.slice();var an=Zt-en,sn=[nn[0],nn[1].slice(0,an)],dn=[nn[0],nn[1].slice(an)];return Jt.splice(tn,1,sn,dn),[tn+1,Jt]}else en=ln}}throw new Error("cursor_pos is out of bounds!")}function Bt(Jt,Zt){var en=Kt(Jt,Zt),tn=en[1],nn=en[0],ln=tn[nn],an=tn[nn+1];if(ln==null)return Jt;if(ln[0]!==dt)return Jt;if(an!=null&&ln[1]+an[1]===an[1]+ln[1])return tn.splice(nn,2,an,ln),Yt(tn,nn,2);if(an!=null&&an[1].indexOf(ln[1])===0){tn.splice(nn,2,[an[0],ln[1]],[0,ln[1]]);var sn=an[1].slice(ln[1].length);return sn.length>0&&tn.splice(nn+2,0,[an[0],sn]),Yt(tn,nn,3)}else return Jt}function Ut(Jt){for(var Zt=!1,en=function(an){return an.charCodeAt(0)>=56320&&an.charCodeAt(0)<=57343},tn=function(an){return an.charCodeAt(an.length-1)>=55296&&an.charCodeAt(an.length-1)<=56319},nn=2;nn<Jt.length;nn+=1)Jt[nn-2][0]===dt&&tn(Jt[nn-2][1])&&Jt[nn-1][0]===ct&&en(Jt[nn-1][1])&&Jt[nn][0]===ut&&en(Jt[nn][1])&&(Zt=!0,Jt[nn-1][1]=Jt[nn-2][1].slice(-1)+Jt[nn-1][1],Jt[nn][1]=Jt[nn-2][1].slice(-1)+Jt[nn][1],Jt[nn-2][1]=Jt[nn-2][1].slice(0,-1));if(!Zt)return Jt;for(var ln=[],nn=0;nn<Jt.length;nn+=1)Jt[nn][1].length>0&&ln.push(Jt[nn]);return ln}function Yt(Jt,Zt,en){for(var tn=Zt+en-1;tn>=0&&tn>=Zt-1;tn--)if(tn+1<Jt.length){var nn=Jt[tn],ln=Jt[tn+1];nn[0]===ln[1]&&Jt.splice(tn,2,[nn[0],nn[1]+ln[1]])}return Jt}},function(et,ot){ot=et.exports=typeof Object.keys=="function"?Object.keys:ct,ot.shim=ct;function ct(ut){var dt=[];for(var ft in ut)dt.push(ft);return dt}},function(et,ot){var ct=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";ot=et.exports=ct?ut:dt,ot.supported=ut;function ut(ft){return Object.prototype.toString.call(ft)=="[object Arguments]"}ot.unsupported=dt;function dt(ft){return ft&&typeof ft=="object"&&typeof ft.length=="number"&&Object.prototype.hasOwnProperty.call(ft,"callee")&&!Object.prototype.propertyIsEnumerable.call(ft,"callee")||!1}},function(et,ot){var ct=Object.prototype.hasOwnProperty,ut="~";function dt(){}Object.create&&(dt.prototype=Object.create(null),new dt().__proto__||(ut=!1));function ft(kt,Tt,Rt){this.fn=kt,this.context=Tt,this.once=Rt||!1}function St(){this._events=new dt,this._eventsCount=0}St.prototype.eventNames=function(){var Tt=[],Rt,jt;if(this._eventsCount===0)return Tt;for(jt in Rt=this._events)ct.call(Rt,jt)&&Tt.push(ut?jt.slice(1):jt);return Object.getOwnPropertySymbols?Tt.concat(Object.getOwnPropertySymbols(Rt)):Tt},St.prototype.listeners=function(Tt,Rt){var jt=ut?ut+Tt:Tt,$t=this._events[jt];if(Rt)return!!$t;if(!$t)return[];if($t.fn)return[$t.fn];for(var Ft=0,Ht=$t.length,Kt=new Array(Ht);Ft<Ht;Ft++)Kt[Ft]=$t[Ft].fn;return Kt},St.prototype.emit=function(Tt,Rt,jt,$t,Ft,Ht){var Kt=ut?ut+Tt:Tt;if(!this._events[Kt])return!1;var Bt=this._events[Kt],Ut=arguments.length,Yt,Jt;if(Bt.fn){switch(Bt.once&&this.removeListener(Tt,Bt.fn,void 0,!0),Ut){case 1:return Bt.fn.call(Bt.context),!0;case 2:return Bt.fn.call(Bt.context,Rt),!0;case 3:return Bt.fn.call(Bt.context,Rt,jt),!0;case 4:return Bt.fn.call(Bt.context,Rt,jt,$t),!0;case 5:return Bt.fn.call(Bt.context,Rt,jt,$t,Ft),!0;case 6:return Bt.fn.call(Bt.context,Rt,jt,$t,Ft,Ht),!0}for(Jt=1,Yt=new Array(Ut-1);Jt<Ut;Jt++)Yt[Jt-1]=arguments[Jt];Bt.fn.apply(Bt.context,Yt)}else{var Zt=Bt.length,en;for(Jt=0;Jt<Zt;Jt++)switch(Bt[Jt].once&&this.removeListener(Tt,Bt[Jt].fn,void 0,!0),Ut){case 1:Bt[Jt].fn.call(Bt[Jt].context);break;case 2:Bt[Jt].fn.call(Bt[Jt].context,Rt);break;case 3:Bt[Jt].fn.call(Bt[Jt].context,Rt,jt);break;case 4:Bt[Jt].fn.call(Bt[Jt].context,Rt,jt,$t);break;default:if(!Yt)for(en=1,Yt=new Array(Ut-1);en<Ut;en++)Yt[en-1]=arguments[en];Bt[Jt].fn.apply(Bt[Jt].context,Yt)}}return!0},St.prototype.on=function(Tt,Rt,jt){var $t=new ft(Rt,jt||this),Ft=ut?ut+Tt:Tt;return this._events[Ft]?this._events[Ft].fn?this._events[Ft]=[this._events[Ft],$t]:this._events[Ft].push($t):(this._events[Ft]=$t,this._eventsCount++),this},St.prototype.once=function(Tt,Rt,jt){var $t=new ft(Rt,jt||this,!0),Ft=ut?ut+Tt:Tt;return this._events[Ft]?this._events[Ft].fn?this._events[Ft]=[this._events[Ft],$t]:this._events[Ft].push($t):(this._events[Ft]=$t,this._eventsCount++),this},St.prototype.removeListener=function(Tt,Rt,jt,$t){var Ft=ut?ut+Tt:Tt;if(!this._events[Ft])return this;if(!Rt)return--this._eventsCount===0?this._events=new dt:delete this._events[Ft],this;var Ht=this._events[Ft];if(Ht.fn)Ht.fn===Rt&&(!$t||Ht.once)&&(!jt||Ht.context===jt)&&(--this._eventsCount===0?this._events=new dt:delete this._events[Ft]);else{for(var Kt=0,Bt=[],Ut=Ht.length;Kt<Ut;Kt++)(Ht[Kt].fn!==Rt||$t&&!Ht[Kt].once||jt&&Ht[Kt].context!==jt)&&Bt.push(Ht[Kt]);Bt.length?this._events[Ft]=Bt.length===1?Bt[0]:Bt:--this._eventsCount===0?this._events=new dt:delete this._events[Ft]}return this},St.prototype.removeAllListeners=function(Tt){var Rt;return Tt?(Rt=ut?ut+Tt:Tt,this._events[Rt]&&(--this._eventsCount===0?this._events=new dt:delete this._events[Rt])):(this._events=new dt,this._eventsCount=0),this},St.prototype.off=St.prototype.removeListener,St.prototype.addListener=St.prototype.on,St.prototype.setMaxListeners=function(){return this},St.prefixed=ut,St.EventEmitter=St,typeof et<"u"&&(et.exports=St)},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.matchText=ot.matchSpacing=ot.matchNewline=ot.matchBlot=ot.matchAttributor=ot.default=void 0;var ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Rn){return typeof Rn}:function(Rn){return Rn&&typeof Symbol=="function"&&Rn.constructor===Symbol&&Rn!==Symbol.prototype?"symbol":typeof Rn},dt=function(){function Rn(Pn,Ln){var In=[],Nn=!0,Hn=!1,zn=void 0;try{for(var Un=Pn[Symbol.iterator](),lr;!(Nn=(lr=Un.next()).done)&&(In.push(lr.value),!(Ln&&In.length===Ln));Nn=!0);}catch(cr){Hn=!0,zn=cr}finally{try{!Nn&&Un.return&&Un.return()}finally{if(Hn)throw zn}}return In}return function(Pn,Ln){if(Array.isArray(Pn))return Pn;if(Symbol.iterator in Object(Pn))return Rn(Pn,Ln);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function Rn(Pn,Ln){for(var In=0;In<Ln.length;In++){var Nn=Ln[In];Nn.enumerable=Nn.enumerable||!1,Nn.configurable=!0,"value"in Nn&&(Nn.writable=!0),Object.defineProperty(Pn,Nn.key,Nn)}}return function(Pn,Ln,In){return Ln&&Rn(Pn.prototype,Ln),In&&Rn(Pn,In),Pn}}(),St=ct(3),kt=dn(St),Tt=ct(2),Rt=dn(Tt),jt=ct(0),$t=dn(jt),Ft=ct(5),Ht=dn(Ft),Kt=ct(10),Bt=dn(Kt),Ut=ct(9),Yt=dn(Ut),Jt=ct(36),Zt=ct(37),en=ct(13),tn=dn(en),nn=ct(26),ln=ct(38),an=ct(39),sn=ct(40);function dn(Rn){return Rn&&Rn.__esModule?Rn:{default:Rn}}function mn(Rn,Pn,Ln){return Pn in Rn?Object.defineProperty(Rn,Pn,{value:Ln,enumerable:!0,configurable:!0,writable:!0}):Rn[Pn]=Ln,Rn}function yn(Rn,Pn){if(!(Rn instanceof Pn))throw new TypeError("Cannot call a class as a function")}function vn(Rn,Pn){if(!Rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pn&&(typeof Pn=="object"||typeof Pn=="function")?Pn:Rn}function hn(Rn,Pn){if(typeof Pn!="function"&&Pn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Pn);Rn.prototype=Object.create(Pn&&Pn.prototype,{constructor:{value:Rn,enumerable:!1,writable:!0,configurable:!0}}),Pn&&(Object.setPrototypeOf?Object.setPrototypeOf(Rn,Pn):Rn.__proto__=Pn)}var pn=(0,Bt.default)("quill:clipboard"),rn="__ql-matcher",on=[[Node.TEXT_NODE,Yn],[Node.TEXT_NODE,Mn],["br",Dn],[Node.ELEMENT_NODE,Mn],[Node.ELEMENT_NODE,_n],[Node.ELEMENT_NODE,Vn],[Node.ELEMENT_NODE,Tn],[Node.ELEMENT_NODE,Wn],["li",On],["b",Cn.bind(Cn,"bold")],["i",Cn.bind(Cn,"italic")],["style",$n]],gn=[Jt.AlignAttribute,ln.DirectionAttribute].reduce(function(Rn,Pn){return Rn[Pn.keyName]=Pn,Rn},{}),un=[Jt.AlignStyle,Zt.BackgroundStyle,nn.ColorStyle,ln.DirectionStyle,an.FontStyle,sn.SizeStyle].reduce(function(Rn,Pn){return Rn[Pn.keyName]=Pn,Rn},{}),xn=function(Rn){hn(Pn,Rn);function Pn(Ln,In){yn(this,Pn);var Nn=vn(this,(Pn.__proto__||Object.getPrototypeOf(Pn)).call(this,Ln,In));return Nn.quill.root.addEventListener("paste",Nn.onPaste.bind(Nn)),Nn.container=Nn.quill.addContainer("ql-clipboard"),Nn.container.setAttribute("contenteditable",!0),Nn.container.setAttribute("tabindex",-1),Nn.matchers=[],on.concat(Nn.options.matchers).forEach(function(Hn){var zn=dt(Hn,2),Un=zn[0],lr=zn[1];!In.matchVisual&&lr===Vn||Nn.addMatcher(Un,lr)}),Nn}return ft(Pn,[{key:"addMatcher",value:function(In,Nn){this.matchers.push([In,Nn])}},{key:"convert",value:function(In){if(typeof In=="string")return this.container.innerHTML=In.replace(/\>\r?\n +\</g,"><"),this.convert();var Nn=this.quill.getFormat(this.quill.selection.savedRange.index);if(Nn[tn.default.blotName]){var Hn=this.container.innerText;return this.container.innerHTML="",new Rt.default().insert(Hn,mn({},tn.default.blotName,Nn[tn.default.blotName]))}var zn=this.prepareMatching(),Un=dt(zn,2),lr=Un[0],cr=Un[1],Xn=An(this.container,lr,cr);return kn(Xn,`
`)&&Xn.ops[Xn.ops.length-1].attributes==null&&(Xn=Xn.compose(new Rt.default().retain(Xn.length()-1).delete(1))),pn.log("convert",this.container.innerHTML,Xn),this.container.innerHTML="",Xn}},{key:"dangerouslyPasteHTML",value:function(In,Nn){var Hn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ht.default.sources.API;if(typeof In=="string")this.quill.setContents(this.convert(In),Nn),this.quill.setSelection(0,Ht.default.sources.SILENT);else{var zn=this.convert(Nn);this.quill.updateContents(new Rt.default().retain(In).concat(zn),Hn),this.quill.setSelection(In+zn.length(),Ht.default.sources.SILENT)}}},{key:"onPaste",value:function(In){var Nn=this;if(!(In.defaultPrevented||!this.quill.isEnabled())){var Hn=this.quill.getSelection(),zn=new Rt.default().retain(Hn.index),Un=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(Ht.default.sources.SILENT),setTimeout(function(){zn=zn.concat(Nn.convert()).delete(Hn.length),Nn.quill.updateContents(zn,Ht.default.sources.USER),Nn.quill.setSelection(zn.length()-Hn.length,Ht.default.sources.SILENT),Nn.quill.scrollingContainer.scrollTop=Un,Nn.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var In=this,Nn=[],Hn=[];return this.matchers.forEach(function(zn){var Un=dt(zn,2),lr=Un[0],cr=Un[1];switch(lr){case Node.TEXT_NODE:Hn.push(cr);break;case Node.ELEMENT_NODE:Nn.push(cr);break;default:[].forEach.call(In.container.querySelectorAll(lr),function(Xn){Xn[rn]=Xn[rn]||[],Xn[rn].push(cr)});break}}),[Nn,Hn]}}]),Pn}(Yt.default);xn.DEFAULTS={matchers:[],matchVisual:!0};function En(Rn,Pn,Ln){return(typeof Pn>"u"?"undefined":ut(Pn))==="object"?Object.keys(Pn).reduce(function(In,Nn){return En(In,Nn,Pn[Nn])},Rn):Rn.reduce(function(In,Nn){return Nn.attributes&&Nn.attributes[Pn]?In.push(Nn):In.insert(Nn.insert,(0,kt.default)({},mn({},Pn,Ln),Nn.attributes))},new Rt.default)}function wn(Rn){if(Rn.nodeType!==Node.ELEMENT_NODE)return{};var Pn="__ql-computed-style";return Rn[Pn]||(Rn[Pn]=window.getComputedStyle(Rn))}function kn(Rn,Pn){for(var Ln="",In=Rn.ops.length-1;In>=0&&Ln.length<Pn.length;--In){var Nn=Rn.ops[In];if(typeof Nn.insert!="string")break;Ln=Nn.insert+Ln}return Ln.slice(-1*Pn.length)===Pn}function Sn(Rn){if(Rn.childNodes.length===0)return!1;var Pn=wn(Rn);return["block","list-item"].indexOf(Pn.display)>-1}function An(Rn,Pn,Ln){return Rn.nodeType===Rn.TEXT_NODE?Ln.reduce(function(In,Nn){return Nn(Rn,In)},new Rt.default):Rn.nodeType===Rn.ELEMENT_NODE?[].reduce.call(Rn.childNodes||[],function(In,Nn){var Hn=An(Nn,Pn,Ln);return Nn.nodeType===Rn.ELEMENT_NODE&&(Hn=Pn.reduce(function(zn,Un){return Un(Nn,zn)},Hn),Hn=(Nn[rn]||[]).reduce(function(zn,Un){return Un(Nn,zn)},Hn)),In.concat(Hn)},new Rt.default):new Rt.default}function Cn(Rn,Pn,Ln){return En(Ln,Rn,!0)}function Tn(Rn,Pn){var Ln=$t.default.Attributor.Attribute.keys(Rn),In=$t.default.Attributor.Class.keys(Rn),Nn=$t.default.Attributor.Style.keys(Rn),Hn={};return Ln.concat(In).concat(Nn).forEach(function(zn){var Un=$t.default.query(zn,$t.default.Scope.ATTRIBUTE);Un!=null&&(Hn[Un.attrName]=Un.value(Rn),Hn[Un.attrName])||(Un=gn[zn],Un!=null&&(Un.attrName===zn||Un.keyName===zn)&&(Hn[Un.attrName]=Un.value(Rn)||void 0),Un=un[zn],Un!=null&&(Un.attrName===zn||Un.keyName===zn)&&(Un=un[zn],Hn[Un.attrName]=Un.value(Rn)||void 0))}),Object.keys(Hn).length>0&&(Pn=En(Pn,Hn)),Pn}function _n(Rn,Pn){var Ln=$t.default.query(Rn);if(Ln==null)return Pn;if(Ln.prototype instanceof $t.default.Embed){var In={},Nn=Ln.value(Rn);Nn!=null&&(In[Ln.blotName]=Nn,Pn=new Rt.default().insert(In,Ln.formats(Rn)))}else typeof Ln.formats=="function"&&(Pn=En(Pn,Ln.blotName,Ln.formats(Rn)));return Pn}function Dn(Rn,Pn){return kn(Pn,`
`)||Pn.insert(`
`),Pn}function $n(){return new Rt.default}function On(Rn,Pn){var Ln=$t.default.query(Rn);if(Ln==null||Ln.blotName!=="list-item"||!kn(Pn,`
`))return Pn;for(var In=-1,Nn=Rn.parentNode;!Nn.classList.contains("ql-clipboard");)($t.default.query(Nn)||{}).blotName==="list"&&(In+=1),Nn=Nn.parentNode;return In<=0?Pn:Pn.compose(new Rt.default().retain(Pn.length()-1).retain(1,{indent:In}))}function Mn(Rn,Pn){return kn(Pn,`
`)||(Sn(Rn)||Pn.length()>0&&Rn.nextSibling&&Sn(Rn.nextSibling))&&Pn.insert(`
`),Pn}function Vn(Rn,Pn){if(Sn(Rn)&&Rn.nextElementSibling!=null&&!kn(Pn,`

`)){var Ln=Rn.offsetHeight+parseFloat(wn(Rn).marginTop)+parseFloat(wn(Rn).marginBottom);Rn.nextElementSibling.offsetTop>Rn.offsetTop+Ln*1.5&&Pn.insert(`
`)}return Pn}function Wn(Rn,Pn){var Ln={},In=Rn.style||{};return In.fontStyle&&wn(Rn).fontStyle==="italic"&&(Ln.italic=!0),In.fontWeight&&(wn(Rn).fontWeight.startsWith("bold")||parseInt(wn(Rn).fontWeight)>=700)&&(Ln.bold=!0),Object.keys(Ln).length>0&&(Pn=En(Pn,Ln)),parseFloat(In.textIndent||0)>0&&(Pn=new Rt.default().insert("	").concat(Pn)),Pn}function Yn(Rn,Pn){var Ln=Rn.data;if(Rn.parentNode.tagName==="O:P")return Pn.insert(Ln.trim());if(Ln.trim().length===0&&Rn.parentNode.classList.contains("ql-clipboard"))return Pn;if(!wn(Rn.parentNode).whiteSpace.startsWith("pre")){var In=function(Hn,zn){return zn=zn.replace(/[^\u00a0]/g,""),zn.length<1&&Hn?" ":zn};Ln=Ln.replace(/\r\n/g," ").replace(/\n/g," "),Ln=Ln.replace(/\s\s+/g,In.bind(In,!0)),(Rn.previousSibling==null&&Sn(Rn.parentNode)||Rn.previousSibling!=null&&Sn(Rn.previousSibling))&&(Ln=Ln.replace(/^\s+/,In.bind(In,!1))),(Rn.nextSibling==null&&Sn(Rn.parentNode)||Rn.nextSibling!=null&&Sn(Rn.nextSibling))&&(Ln=Ln.replace(/\s+$/,In.bind(In,!1)))}return Pn.insert(Ln)}ot.default=xn,ot.matchAttributor=Tn,ot.matchBlot=_n,ot.matchNewline=Mn,ot.matchSpacing=Vn,ot.matchText=Yn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ft(Ht,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Ht,Ut.key,Ut)}}return function(Ht,Kt,Bt){return Kt&&Ft(Ht.prototype,Kt),Bt&&Ft(Ht,Bt),Ht}}(),dt=function Ft(Ht,Kt,Bt){Ht===null&&(Ht=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(Ht,Kt);if(Ut===void 0){var Yt=Object.getPrototypeOf(Ht);return Yt===null?void 0:Ft(Yt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var Jt=Ut.get;return Jt===void 0?void 0:Jt.call(Bt)}},ft=ct(6),St=kt(ft);function kt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function Tt(Ft,Ht){if(!(Ft instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Ft,Ht){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Ft}function jt(Ft,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Ft.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,Ht):Ft.__proto__=Ht)}var $t=function(Ft){jt(Ht,Ft);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ut(Ht,[{key:"optimize",value:function(Bt){dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"optimize",this).call(this,Bt),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return dt(Ht.__proto__||Object.getPrototypeOf(Ht),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),Ht}(St.default);$t.blotName="bold",$t.tagName=["STRONG","B"],ot.default=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.addControls=ot.default=void 0;var ut=function(){function sn(dn,mn){var yn=[],vn=!0,hn=!1,pn=void 0;try{for(var rn=dn[Symbol.iterator](),on;!(vn=(on=rn.next()).done)&&(yn.push(on.value),!(mn&&yn.length===mn));vn=!0);}catch(gn){hn=!0,pn=gn}finally{try{!vn&&rn.return&&rn.return()}finally{if(hn)throw pn}}return yn}return function(dn,mn){if(Array.isArray(dn))return dn;if(Symbol.iterator in Object(dn))return sn(dn,mn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function sn(dn,mn){for(var yn=0;yn<mn.length;yn++){var vn=mn[yn];vn.enumerable=vn.enumerable||!1,vn.configurable=!0,"value"in vn&&(vn.writable=!0),Object.defineProperty(dn,vn.key,vn)}}return function(dn,mn,yn){return mn&&sn(dn.prototype,mn),yn&&sn(dn,yn),dn}}(),ft=ct(2),St=Bt(ft),kt=ct(0),Tt=Bt(kt),Rt=ct(5),jt=Bt(Rt),$t=ct(10),Ft=Bt($t),Ht=ct(9),Kt=Bt(Ht);function Bt(sn){return sn&&sn.__esModule?sn:{default:sn}}function Ut(sn,dn,mn){return dn in sn?Object.defineProperty(sn,dn,{value:mn,enumerable:!0,configurable:!0,writable:!0}):sn[dn]=mn,sn}function Yt(sn,dn){if(!(sn instanceof dn))throw new TypeError("Cannot call a class as a function")}function Jt(sn,dn){if(!sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dn&&(typeof dn=="object"||typeof dn=="function")?dn:sn}function Zt(sn,dn){if(typeof dn!="function"&&dn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof dn);sn.prototype=Object.create(dn&&dn.prototype,{constructor:{value:sn,enumerable:!1,writable:!0,configurable:!0}}),dn&&(Object.setPrototypeOf?Object.setPrototypeOf(sn,dn):sn.__proto__=dn)}var en=(0,Ft.default)("quill:toolbar"),tn=function(sn){Zt(dn,sn);function dn(mn,yn){Yt(this,dn);var vn=Jt(this,(dn.__proto__||Object.getPrototypeOf(dn)).call(this,mn,yn));if(Array.isArray(vn.options.container)){var hn=document.createElement("div");ln(hn,vn.options.container),mn.container.parentNode.insertBefore(hn,mn.container),vn.container=hn}else typeof vn.options.container=="string"?vn.container=document.querySelector(vn.options.container):vn.container=vn.options.container;if(!(vn.container instanceof HTMLElement)){var pn;return pn=en.error("Container required for toolbar",vn.options),Jt(vn,pn)}return vn.container.classList.add("ql-toolbar"),vn.controls=[],vn.handlers={},Object.keys(vn.options.handlers).forEach(function(rn){vn.addHandler(rn,vn.options.handlers[rn])}),[].forEach.call(vn.container.querySelectorAll("button, select"),function(rn){vn.attach(rn)}),vn.quill.on(jt.default.events.EDITOR_CHANGE,function(rn,on){rn===jt.default.events.SELECTION_CHANGE&&vn.update(on)}),vn.quill.on(jt.default.events.SCROLL_OPTIMIZE,function(){var rn=vn.quill.selection.getRange(),on=ut(rn,1),gn=on[0];vn.update(gn)}),vn}return dt(dn,[{key:"addHandler",value:function(yn,vn){this.handlers[yn]=vn}},{key:"attach",value:function(yn){var vn=this,hn=[].find.call(yn.classList,function(rn){return rn.indexOf("ql-")===0});if(hn){if(hn=hn.slice(3),yn.tagName==="BUTTON"&&yn.setAttribute("type","button"),this.handlers[hn]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[hn]==null){en.warn("ignoring attaching to disabled format",hn,yn);return}if(Tt.default.query(hn)==null){en.warn("ignoring attaching to nonexistent format",hn,yn);return}}var pn=yn.tagName==="SELECT"?"change":"click";yn.addEventListener(pn,function(rn){var on=void 0;if(yn.tagName==="SELECT"){if(yn.selectedIndex<0)return;var gn=yn.options[yn.selectedIndex];gn.hasAttribute("selected")?on=!1:on=gn.value||!1}else yn.classList.contains("ql-active")?on=!1:on=yn.value||!yn.hasAttribute("value"),rn.preventDefault();vn.quill.focus();var un=vn.quill.selection.getRange(),xn=ut(un,1),En=xn[0];if(vn.handlers[hn]!=null)vn.handlers[hn].call(vn,on);else if(Tt.default.query(hn).prototype instanceof Tt.default.Embed){if(on=prompt("Enter "+hn),!on)return;vn.quill.updateContents(new St.default().retain(En.index).delete(En.length).insert(Ut({},hn,on)),jt.default.sources.USER)}else vn.quill.format(hn,on,jt.default.sources.USER);vn.update(En)}),this.controls.push([hn,yn])}}},{key:"update",value:function(yn){var vn=yn==null?{}:this.quill.getFormat(yn);this.controls.forEach(function(hn){var pn=ut(hn,2),rn=pn[0],on=pn[1];if(on.tagName==="SELECT"){var gn=void 0;if(yn==null)gn=null;else if(vn[rn]==null)gn=on.querySelector("option[selected]");else if(!Array.isArray(vn[rn])){var un=vn[rn];typeof un=="string"&&(un=un.replace(/\"/g,'\\"')),gn=on.querySelector('option[value="'+un+'"]')}gn==null?(on.value="",on.selectedIndex=-1):gn.selected=!0}else if(yn==null)on.classList.remove("ql-active");else if(on.hasAttribute("value")){var xn=vn[rn]===on.getAttribute("value")||vn[rn]!=null&&vn[rn].toString()===on.getAttribute("value")||vn[rn]==null&&!on.getAttribute("value");on.classList.toggle("ql-active",xn)}else on.classList.toggle("ql-active",vn[rn]!=null)})}}]),dn}(Kt.default);tn.DEFAULTS={};function nn(sn,dn,mn){var yn=document.createElement("button");yn.setAttribute("type","button"),yn.classList.add("ql-"+dn),mn!=null&&(yn.value=mn),sn.appendChild(yn)}function ln(sn,dn){Array.isArray(dn[0])||(dn=[dn]),dn.forEach(function(mn){var yn=document.createElement("span");yn.classList.add("ql-formats"),mn.forEach(function(vn){if(typeof vn=="string")nn(yn,vn);else{var hn=Object.keys(vn)[0],pn=vn[hn];Array.isArray(pn)?an(yn,hn,pn):nn(yn,hn,pn)}}),sn.appendChild(yn)})}function an(sn,dn,mn){var yn=document.createElement("select");yn.classList.add("ql-"+dn),mn.forEach(function(vn){var hn=document.createElement("option");vn!==!1?hn.setAttribute("value",vn):hn.setAttribute("selected","selected"),yn.appendChild(hn)}),sn.appendChild(yn)}tn.DEFAULTS={container:null,handlers:{clean:function(){var dn=this,mn=this.quill.getSelection();if(mn!=null)if(mn.length==0){var yn=this.quill.getFormat();Object.keys(yn).forEach(function(vn){Tt.default.query(vn,Tt.default.Scope.INLINE)!=null&&dn.quill.format(vn,!1)})}else this.quill.removeFormat(mn,jt.default.sources.USER)},direction:function(dn){var mn=this.quill.getFormat().align;dn==="rtl"&&mn==null?this.quill.format("align","right",jt.default.sources.USER):!dn&&mn==="right"&&this.quill.format("align",!1,jt.default.sources.USER),this.quill.format("direction",dn,jt.default.sources.USER)},indent:function(dn){var mn=this.quill.getSelection(),yn=this.quill.getFormat(mn),vn=parseInt(yn.indent||0);if(dn==="+1"||dn==="-1"){var hn=dn==="+1"?1:-1;yn.direction==="rtl"&&(hn*=-1),this.quill.format("indent",vn+hn,jt.default.sources.USER)}},link:function(dn){dn===!0&&(dn=prompt("Enter link URL:")),this.quill.format("link",dn,jt.default.sources.USER)},list:function(dn){var mn=this.quill.getSelection(),yn=this.quill.getFormat(mn);dn==="check"?yn.list==="checked"||yn.list==="unchecked"?this.quill.format("list",!1,jt.default.sources.USER):this.quill.format("list","unchecked",jt.default.sources.USER):this.quill.format("list",dn,jt.default.sources.USER)}}},ot.default=tn,ot.addControls=ln},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ft(Ht,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Ht,Ut.key,Ut)}}return function(Ht,Kt,Bt){return Kt&&Ft(Ht.prototype,Kt),Bt&&Ft(Ht,Bt),Ht}}(),dt=function Ft(Ht,Kt,Bt){Ht===null&&(Ht=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(Ht,Kt);if(Ut===void 0){var Yt=Object.getPrototypeOf(Ht);return Yt===null?void 0:Ft(Yt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var Jt=Ut.get;return Jt===void 0?void 0:Jt.call(Bt)}},ft=ct(28),St=kt(ft);function kt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function Tt(Ft,Ht){if(!(Ft instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Ft,Ht){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Ft}function jt(Ft,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Ft.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,Ht):Ft.__proto__=Ht)}var $t=function(Ft){jt(Ht,Ft);function Ht(Kt,Bt){Tt(this,Ht);var Ut=Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,Kt));return Ut.label.innerHTML=Bt,Ut.container.classList.add("ql-color-picker"),[].slice.call(Ut.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(Yt){Yt.classList.add("ql-primary")}),Ut}return ut(Ht,[{key:"buildItem",value:function(Bt){var Ut=dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"buildItem",this).call(this,Bt);return Ut.style.backgroundColor=Bt.getAttribute("value")||"",Ut}},{key:"selectItem",value:function(Bt,Ut){dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"selectItem",this).call(this,Bt,Ut);var Yt=this.label.querySelector(".ql-color-label"),Jt=Bt&&Bt.getAttribute("data-value")||"";Yt&&(Yt.tagName==="line"?Yt.style.stroke=Jt:Yt.style.fill=Jt)}}]),Ht}(St.default);ot.default=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ft(Ht,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Ht,Ut.key,Ut)}}return function(Ht,Kt,Bt){return Kt&&Ft(Ht.prototype,Kt),Bt&&Ft(Ht,Bt),Ht}}(),dt=function Ft(Ht,Kt,Bt){Ht===null&&(Ht=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(Ht,Kt);if(Ut===void 0){var Yt=Object.getPrototypeOf(Ht);return Yt===null?void 0:Ft(Yt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var Jt=Ut.get;return Jt===void 0?void 0:Jt.call(Bt)}},ft=ct(28),St=kt(ft);function kt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function Tt(Ft,Ht){if(!(Ft instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Ft,Ht){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Ft}function jt(Ft,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Ft.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,Ht):Ft.__proto__=Ht)}var $t=function(Ft){jt(Ht,Ft);function Ht(Kt,Bt){Tt(this,Ht);var Ut=Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).call(this,Kt));return Ut.container.classList.add("ql-icon-picker"),[].forEach.call(Ut.container.querySelectorAll(".ql-picker-item"),function(Yt){Yt.innerHTML=Bt[Yt.getAttribute("data-value")||""]}),Ut.defaultItem=Ut.container.querySelector(".ql-selected"),Ut.selectItem(Ut.defaultItem),Ut}return ut(Ht,[{key:"selectItem",value:function(Bt,Ut){dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"selectItem",this).call(this,Bt,Ut),Bt=Bt||this.defaultItem,this.label.innerHTML=Bt.innerHTML}}]),Ht}(St.default);ot.default=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function St(kt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var jt=Tt[Rt];jt.enumerable=jt.enumerable||!1,jt.configurable=!0,"value"in jt&&(jt.writable=!0),Object.defineProperty(kt,jt.key,jt)}}return function(kt,Tt,Rt){return Tt&&St(kt.prototype,Tt),Rt&&St(kt,Rt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){var Rt=this;dt(this,St),this.quill=kt,this.boundsContainer=Tt||document.body,this.root=kt.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){Rt.root.style.marginTop=-1*Rt.quill.root.scrollTop+"px"}),this.hide()}return ut(St,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(Tt){var Rt=Tt.left+Tt.width/2-this.root.offsetWidth/2,jt=Tt.bottom+this.quill.root.scrollTop;this.root.style.left=Rt+"px",this.root.style.top=jt+"px",this.root.classList.remove("ql-flip");var $t=this.boundsContainer.getBoundingClientRect(),Ft=this.root.getBoundingClientRect(),Ht=0;if(Ft.right>$t.right&&(Ht=$t.right-Ft.right,this.root.style.left=Rt+Ht+"px"),Ft.left<$t.left&&(Ht=$t.left-Ft.left,this.root.style.left=Rt+Ht+"px"),Ft.bottom>$t.bottom){var Kt=Ft.bottom-Ft.top,Bt=Tt.bottom-Tt.top+Kt;this.root.style.top=jt-Bt+"px",this.root.classList.add("ql-flip")}return Ht}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),St}();ot.default=ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function an(sn,dn){var mn=[],yn=!0,vn=!1,hn=void 0;try{for(var pn=sn[Symbol.iterator](),rn;!(yn=(rn=pn.next()).done)&&(mn.push(rn.value),!(dn&&mn.length===dn));yn=!0);}catch(on){vn=!0,hn=on}finally{try{!yn&&pn.return&&pn.return()}finally{if(vn)throw hn}}return mn}return function(sn,dn){if(Array.isArray(sn))return sn;if(Symbol.iterator in Object(sn))return an(sn,dn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function an(sn,dn,mn){sn===null&&(sn=Function.prototype);var yn=Object.getOwnPropertyDescriptor(sn,dn);if(yn===void 0){var vn=Object.getPrototypeOf(sn);return vn===null?void 0:an(vn,dn,mn)}else{if("value"in yn)return yn.value;var hn=yn.get;return hn===void 0?void 0:hn.call(mn)}},ft=function(){function an(sn,dn){for(var mn=0;mn<dn.length;mn++){var yn=dn[mn];yn.enumerable=yn.enumerable||!1,yn.configurable=!0,"value"in yn&&(yn.writable=!0),Object.defineProperty(sn,yn.key,yn)}}return function(sn,dn,mn){return dn&&an(sn.prototype,dn),mn&&an(sn,mn),sn}}(),St=ct(3),kt=Yt(St),Tt=ct(8),Rt=Yt(Tt),jt=ct(43),$t=Yt(jt),Ft=ct(27),Ht=Yt(Ft),Kt=ct(15),Bt=ct(41),Ut=Yt(Bt);function Yt(an){return an&&an.__esModule?an:{default:an}}function Jt(an,sn){if(!(an instanceof sn))throw new TypeError("Cannot call a class as a function")}function Zt(an,sn){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return sn&&(typeof sn=="object"||typeof sn=="function")?sn:an}function en(an,sn){if(typeof sn!="function"&&sn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof sn);an.prototype=Object.create(sn&&sn.prototype,{constructor:{value:an,enumerable:!1,writable:!0,configurable:!0}}),sn&&(Object.setPrototypeOf?Object.setPrototypeOf(an,sn):an.__proto__=sn)}var tn=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],nn=function(an){en(sn,an);function sn(dn,mn){Jt(this,sn),mn.modules.toolbar!=null&&mn.modules.toolbar.container==null&&(mn.modules.toolbar.container=tn);var yn=Zt(this,(sn.__proto__||Object.getPrototypeOf(sn)).call(this,dn,mn));return yn.quill.container.classList.add("ql-snow"),yn}return ft(sn,[{key:"extendToolbar",value:function(mn){mn.container.classList.add("ql-snow"),this.buildButtons([].slice.call(mn.container.querySelectorAll("button")),Ut.default),this.buildPickers([].slice.call(mn.container.querySelectorAll("select")),Ut.default),this.tooltip=new ln(this.quill,this.options.bounds),mn.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(yn,vn){mn.handlers.link.call(mn,!vn.format.link)})}}]),sn}($t.default);nn.DEFAULTS=(0,kt.default)(!0,{},$t.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(sn){if(sn){var dn=this.quill.getSelection();if(dn==null||dn.length==0)return;var mn=this.quill.getText(dn);/^\S+@\S+\.\S+$/.test(mn)&&mn.indexOf("mailto:")!==0&&(mn="mailto:"+mn);var yn=this.quill.theme.tooltip;yn.edit("link",mn)}else this.quill.format("link",!1)}}}}});var ln=function(an){en(sn,an);function sn(dn,mn){Jt(this,sn);var yn=Zt(this,(sn.__proto__||Object.getPrototypeOf(sn)).call(this,dn,mn));return yn.preview=yn.root.querySelector("a.ql-preview"),yn}return ft(sn,[{key:"listen",value:function(){var mn=this;dt(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(yn){mn.root.classList.contains("ql-editing")?mn.save():mn.edit("link",mn.preview.textContent),yn.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(yn){if(mn.linkRange!=null){var vn=mn.linkRange;mn.restoreFocus(),mn.quill.formatText(vn,"link",!1,Rt.default.sources.USER),delete mn.linkRange}yn.preventDefault(),mn.hide()}),this.quill.on(Rt.default.events.SELECTION_CHANGE,function(yn,vn,hn){if(yn!=null){if(yn.length===0&&hn===Rt.default.sources.USER){var pn=mn.quill.scroll.descendant(Ht.default,yn.index),rn=ut(pn,2),on=rn[0],gn=rn[1];if(on!=null){mn.linkRange=new Kt.Range(yn.index-gn,on.length());var un=Ht.default.formats(on.domNode);mn.preview.textContent=un,mn.preview.setAttribute("href",un),mn.show(),mn.position(mn.quill.getBounds(mn.linkRange));return}}else delete mn.linkRange;mn.hide()}})}},{key:"show",value:function(){dt(sn.prototype.__proto__||Object.getPrototypeOf(sn.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),sn}(jt.BaseTooltip);ln.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),ot.default=nn},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(29),dt=Nn(ut),ft=ct(36),St=ct(38),kt=ct(64),Tt=ct(65),Rt=Nn(Tt),jt=ct(66),$t=Nn(jt),Ft=ct(67),Ht=Nn(Ft),Kt=ct(37),Bt=ct(26),Ut=ct(39),Yt=ct(40),Jt=ct(56),Zt=Nn(Jt),en=ct(68),tn=Nn(en),nn=ct(27),ln=Nn(nn),an=ct(69),sn=Nn(an),dn=ct(70),mn=Nn(dn),yn=ct(71),vn=Nn(yn),hn=ct(72),pn=Nn(hn),rn=ct(73),on=Nn(rn),gn=ct(13),un=Nn(gn),xn=ct(74),En=Nn(xn),wn=ct(75),kn=Nn(wn),Sn=ct(57),An=Nn(Sn),Cn=ct(41),Tn=Nn(Cn),_n=ct(28),Dn=Nn(_n),$n=ct(59),On=Nn($n),Mn=ct(60),Vn=Nn(Mn),Wn=ct(61),Yn=Nn(Wn),Rn=ct(108),Pn=Nn(Rn),Ln=ct(62),In=Nn(Ln);function Nn(Hn){return Hn&&Hn.__esModule?Hn:{default:Hn}}dt.default.register({"attributors/attribute/direction":St.DirectionAttribute,"attributors/class/align":ft.AlignClass,"attributors/class/background":Kt.BackgroundClass,"attributors/class/color":Bt.ColorClass,"attributors/class/direction":St.DirectionClass,"attributors/class/font":Ut.FontClass,"attributors/class/size":Yt.SizeClass,"attributors/style/align":ft.AlignStyle,"attributors/style/background":Kt.BackgroundStyle,"attributors/style/color":Bt.ColorStyle,"attributors/style/direction":St.DirectionStyle,"attributors/style/font":Ut.FontStyle,"attributors/style/size":Yt.SizeStyle},!0),dt.default.register({"formats/align":ft.AlignClass,"formats/direction":St.DirectionClass,"formats/indent":kt.IndentClass,"formats/background":Kt.BackgroundStyle,"formats/color":Bt.ColorStyle,"formats/font":Ut.FontClass,"formats/size":Yt.SizeClass,"formats/blockquote":Rt.default,"formats/code-block":un.default,"formats/header":$t.default,"formats/list":Ht.default,"formats/bold":Zt.default,"formats/code":gn.Code,"formats/italic":tn.default,"formats/link":ln.default,"formats/script":sn.default,"formats/strike":mn.default,"formats/underline":vn.default,"formats/image":pn.default,"formats/video":on.default,"formats/list/item":Ft.ListItem,"modules/formula":En.default,"modules/syntax":kn.default,"modules/toolbar":An.default,"themes/bubble":Pn.default,"themes/snow":In.default,"ui/icons":Tn.default,"ui/picker":Dn.default,"ui/icon-picker":Vn.default,"ui/color-picker":On.default,"ui/tooltip":Yn.default},!0),ot.default=dt.default},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.IndentClass=void 0;var ut=function(){function Ht(Kt,Bt){for(var Ut=0;Ut<Bt.length;Ut++){var Yt=Bt[Ut];Yt.enumerable=Yt.enumerable||!1,Yt.configurable=!0,"value"in Yt&&(Yt.writable=!0),Object.defineProperty(Kt,Yt.key,Yt)}}return function(Kt,Bt,Ut){return Bt&&Ht(Kt.prototype,Bt),Ut&&Ht(Kt,Ut),Kt}}(),dt=function Ht(Kt,Bt,Ut){Kt===null&&(Kt=Function.prototype);var Yt=Object.getOwnPropertyDescriptor(Kt,Bt);if(Yt===void 0){var Jt=Object.getPrototypeOf(Kt);return Jt===null?void 0:Ht(Jt,Bt,Ut)}else{if("value"in Yt)return Yt.value;var Zt=Yt.get;return Zt===void 0?void 0:Zt.call(Ut)}},ft=ct(0),St=kt(ft);function kt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Tt(Ht,Kt){if(!(Ht instanceof Kt))throw new TypeError("Cannot call a class as a function")}function Rt(Ht,Kt){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:Ht}function jt(Ht,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);Ht.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Kt):Ht.__proto__=Kt)}var $t=function(Ht){jt(Kt,Ht);function Kt(){return Tt(this,Kt),Rt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).apply(this,arguments))}return ut(Kt,[{key:"add",value:function(Ut,Yt){if(Yt==="+1"||Yt==="-1"){var Jt=this.value(Ut)||0;Yt=Yt==="+1"?Jt+1:Jt-1}return Yt===0?(this.remove(Ut),!0):dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"add",this).call(this,Ut,Yt)}},{key:"canAdd",value:function(Ut,Yt){return dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"canAdd",this).call(this,Ut,Yt)||dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"canAdd",this).call(this,Ut,parseInt(Yt))}},{key:"value",value:function(Ut){return parseInt(dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"value",this).call(this,Ut))||void 0}}]),Kt}(St.default.Attributor.Class),Ft=new $t("indent","ql-indent",{scope:St.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});ot.IndentClass=Ft},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(4),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,$t){if(!(jt instanceof $t))throw new TypeError("Cannot call a class as a function")}function kt(jt,$t){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&(typeof $t=="object"||typeof $t=="function")?$t:jt}function Tt(jt,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $t);jt.prototype=Object.create($t&&$t.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),$t&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,$t):jt.__proto__=$t)}var Rt=function(jt){Tt($t,jt);function $t(){return St(this,$t),kt(this,($t.__proto__||Object.getPrototypeOf($t)).apply(this,arguments))}return $t}(dt.default);Rt.blotName="blockquote",Rt.tagName="blockquote",ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function $t(Ft,Ht){for(var Kt=0;Kt<Ht.length;Kt++){var Bt=Ht[Kt];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Ft,Bt.key,Bt)}}return function(Ft,Ht,Kt){return Ht&&$t(Ft.prototype,Ht),Kt&&$t(Ft,Kt),Ft}}(),dt=ct(4),ft=St(dt);function St($t){return $t&&$t.__esModule?$t:{default:$t}}function kt($t,Ft){if(!($t instanceof Ft))throw new TypeError("Cannot call a class as a function")}function Tt($t,Ft){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ft&&(typeof Ft=="object"||typeof Ft=="function")?Ft:$t}function Rt($t,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ft);$t.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),Ft&&(Object.setPrototypeOf?Object.setPrototypeOf($t,Ft):$t.__proto__=Ft)}var jt=function($t){Rt(Ft,$t);function Ft(){return kt(this,Ft),Tt(this,(Ft.__proto__||Object.getPrototypeOf(Ft)).apply(this,arguments))}return ut(Ft,null,[{key:"formats",value:function(Kt){return this.tagName.indexOf(Kt.tagName)+1}}]),Ft}(ft.default);jt.blotName="header",jt.tagName=["H1","H2","H3","H4","H5","H6"],ot.default=jt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.ListItem=void 0;var ut=function(){function Jt(Zt,en){for(var tn=0;tn<en.length;tn++){var nn=en[tn];nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty(Zt,nn.key,nn)}}return function(Zt,en,tn){return en&&Jt(Zt.prototype,en),tn&&Jt(Zt,tn),Zt}}(),dt=function Jt(Zt,en,tn){Zt===null&&(Zt=Function.prototype);var nn=Object.getOwnPropertyDescriptor(Zt,en);if(nn===void 0){var ln=Object.getPrototypeOf(Zt);return ln===null?void 0:Jt(ln,en,tn)}else{if("value"in nn)return nn.value;var an=nn.get;return an===void 0?void 0:an.call(tn)}},ft=ct(0),St=$t(ft),kt=ct(4),Tt=$t(kt),Rt=ct(25),jt=$t(Rt);function $t(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}function Ft(Jt,Zt,en){return Zt in Jt?Object.defineProperty(Jt,Zt,{value:en,enumerable:!0,configurable:!0,writable:!0}):Jt[Zt]=en,Jt}function Ht(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}function Kt(Jt,Zt){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&(typeof Zt=="object"||typeof Zt=="function")?Zt:Jt}function Bt(Jt,Zt){if(typeof Zt!="function"&&Zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Jt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,Zt):Jt.__proto__=Zt)}var Ut=function(Jt){Bt(Zt,Jt);function Zt(){return Ht(this,Zt),Kt(this,(Zt.__proto__||Object.getPrototypeOf(Zt)).apply(this,arguments))}return ut(Zt,[{key:"format",value:function(tn,nn){tn===Yt.blotName&&!nn?this.replaceWith(St.default.create(this.statics.scope)):dt(Zt.prototype.__proto__||Object.getPrototypeOf(Zt.prototype),"format",this).call(this,tn,nn)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():dt(Zt.prototype.__proto__||Object.getPrototypeOf(Zt.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(tn,nn){return this.parent.isolate(this.offset(this.parent),this.length()),tn===this.parent.statics.blotName?(this.parent.replaceWith(tn,nn),this):(this.parent.unwrap(),dt(Zt.prototype.__proto__||Object.getPrototypeOf(Zt.prototype),"replaceWith",this).call(this,tn,nn))}}],[{key:"formats",value:function(tn){return tn.tagName===this.tagName?void 0:dt(Zt.__proto__||Object.getPrototypeOf(Zt),"formats",this).call(this,tn)}}]),Zt}(Tt.default);Ut.blotName="list-item",Ut.tagName="LI";var Yt=function(Jt){Bt(Zt,Jt),ut(Zt,null,[{key:"create",value:function(tn){var nn=tn==="ordered"?"OL":"UL",ln=dt(Zt.__proto__||Object.getPrototypeOf(Zt),"create",this).call(this,nn);return(tn==="checked"||tn==="unchecked")&&ln.setAttribute("data-checked",tn==="checked"),ln}},{key:"formats",value:function(tn){if(tn.tagName==="OL")return"ordered";if(tn.tagName==="UL")return tn.hasAttribute("data-checked")?tn.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function Zt(en){Ht(this,Zt);var tn=Kt(this,(Zt.__proto__||Object.getPrototypeOf(Zt)).call(this,en)),nn=function(an){if(an.target.parentNode===en){var sn=tn.statics.formats(en),dn=St.default.find(an.target);sn==="checked"?dn.format("list","unchecked"):sn==="unchecked"&&dn.format("list","checked")}};return en.addEventListener("touchstart",nn),en.addEventListener("mousedown",nn),tn}return ut(Zt,[{key:"format",value:function(tn,nn){this.children.length>0&&this.children.tail.format(tn,nn)}},{key:"formats",value:function(){return Ft({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(tn,nn){if(tn instanceof Ut)dt(Zt.prototype.__proto__||Object.getPrototypeOf(Zt.prototype),"insertBefore",this).call(this,tn,nn);else{var ln=nn==null?this.length():nn.offset(this),an=this.split(ln);an.parent.insertBefore(tn,an)}}},{key:"optimize",value:function(tn){dt(Zt.prototype.__proto__||Object.getPrototypeOf(Zt.prototype),"optimize",this).call(this,tn);var nn=this.next;nn!=null&&nn.prev===this&&nn.statics.blotName===this.statics.blotName&&nn.domNode.tagName===this.domNode.tagName&&nn.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(nn.moveChildren(this),nn.remove())}},{key:"replace",value:function(tn){if(tn.statics.blotName!==this.statics.blotName){var nn=St.default.create(this.statics.defaultChild);tn.moveChildren(nn),this.appendChild(nn)}dt(Zt.prototype.__proto__||Object.getPrototypeOf(Zt.prototype),"replace",this).call(this,tn)}}]),Zt}(jt.default);Yt.blotName="list",Yt.scope=St.default.Scope.BLOCK_BLOT,Yt.tagName=["OL","UL"],Yt.defaultChild="list-item",Yt.allowedChildren=[Ut],ot.ListItem=Ut,ot.default=Yt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(56),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,$t){if(!(jt instanceof $t))throw new TypeError("Cannot call a class as a function")}function kt(jt,$t){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&(typeof $t=="object"||typeof $t=="function")?$t:jt}function Tt(jt,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $t);jt.prototype=Object.create($t&&$t.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),$t&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,$t):jt.__proto__=$t)}var Rt=function(jt){Tt($t,jt);function $t(){return St(this,$t),kt(this,($t.__proto__||Object.getPrototypeOf($t)).apply(this,arguments))}return $t}(dt.default);Rt.blotName="italic",Rt.tagName=["EM","I"],ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Ft(Ht,Kt){for(var Bt=0;Bt<Kt.length;Bt++){var Ut=Kt[Bt];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Ht,Ut.key,Ut)}}return function(Ht,Kt,Bt){return Kt&&Ft(Ht.prototype,Kt),Bt&&Ft(Ht,Bt),Ht}}(),dt=function Ft(Ht,Kt,Bt){Ht===null&&(Ht=Function.prototype);var Ut=Object.getOwnPropertyDescriptor(Ht,Kt);if(Ut===void 0){var Yt=Object.getPrototypeOf(Ht);return Yt===null?void 0:Ft(Yt,Kt,Bt)}else{if("value"in Ut)return Ut.value;var Jt=Ut.get;return Jt===void 0?void 0:Jt.call(Bt)}},ft=ct(6),St=kt(ft);function kt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function Tt(Ft,Ht){if(!(Ft instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(Ft,Ht){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:Ft}function jt(Ft,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);Ft.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,Ht):Ft.__proto__=Ht)}var $t=function(Ft){jt(Ht,Ft);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ut(Ht,null,[{key:"create",value:function(Bt){return Bt==="super"?document.createElement("sup"):Bt==="sub"?document.createElement("sub"):dt(Ht.__proto__||Object.getPrototypeOf(Ht),"create",this).call(this,Bt)}},{key:"formats",value:function(Bt){if(Bt.tagName==="SUB")return"sub";if(Bt.tagName==="SUP")return"super"}}]),Ht}(St.default);$t.blotName="script",$t.tagName=["SUB","SUP"],ot.default=$t},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(6),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,$t){if(!(jt instanceof $t))throw new TypeError("Cannot call a class as a function")}function kt(jt,$t){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&(typeof $t=="object"||typeof $t=="function")?$t:jt}function Tt(jt,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $t);jt.prototype=Object.create($t&&$t.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),$t&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,$t):jt.__proto__=$t)}var Rt=function(jt){Tt($t,jt);function $t(){return St(this,$t),kt(this,($t.__proto__||Object.getPrototypeOf($t)).apply(this,arguments))}return $t}(dt.default);Rt.blotName="strike",Rt.tagName="S",ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=ct(6),dt=ft(ut);function ft(jt){return jt&&jt.__esModule?jt:{default:jt}}function St(jt,$t){if(!(jt instanceof $t))throw new TypeError("Cannot call a class as a function")}function kt(jt,$t){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&(typeof $t=="object"||typeof $t=="function")?$t:jt}function Tt(jt,$t){if(typeof $t!="function"&&$t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $t);jt.prototype=Object.create($t&&$t.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),$t&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,$t):jt.__proto__=$t)}var Rt=function(jt){Tt($t,jt);function $t(){return St(this,$t),kt(this,($t.__proto__||Object.getPrototypeOf($t)).apply(this,arguments))}return $t}(dt.default);Rt.blotName="underline",Rt.tagName="U",ot.default=Rt},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Kt(Bt,Ut){for(var Yt=0;Yt<Ut.length;Yt++){var Jt=Ut[Yt];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Bt,Jt.key,Jt)}}return function(Bt,Ut,Yt){return Ut&&Kt(Bt.prototype,Ut),Yt&&Kt(Bt,Yt),Bt}}(),dt=function Kt(Bt,Ut,Yt){Bt===null&&(Bt=Function.prototype);var Jt=Object.getOwnPropertyDescriptor(Bt,Ut);if(Jt===void 0){var Zt=Object.getPrototypeOf(Bt);return Zt===null?void 0:Kt(Zt,Ut,Yt)}else{if("value"in Jt)return Jt.value;var en=Jt.get;return en===void 0?void 0:en.call(Yt)}},ft=ct(0),St=Tt(ft),kt=ct(27);function Tt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function Rt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function jt(Kt,Bt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Kt}function $t(Kt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Kt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Bt):Kt.__proto__=Bt)}var Ft=["alt","height","width"],Ht=function(Kt){$t(Bt,Kt);function Bt(){return Rt(this,Bt),jt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"format",value:function(Yt,Jt){Ft.indexOf(Yt)>-1?Jt?this.domNode.setAttribute(Yt,Jt):this.domNode.removeAttribute(Yt):dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"format",this).call(this,Yt,Jt)}}],[{key:"create",value:function(Yt){var Jt=dt(Bt.__proto__||Object.getPrototypeOf(Bt),"create",this).call(this,Yt);return typeof Yt=="string"&&Jt.setAttribute("src",this.sanitize(Yt)),Jt}},{key:"formats",value:function(Yt){return Ft.reduce(function(Jt,Zt){return Yt.hasAttribute(Zt)&&(Jt[Zt]=Yt.getAttribute(Zt)),Jt},{})}},{key:"match",value:function(Yt){return/\.(jpe?g|gif|png)$/.test(Yt)||/^data:image\/.+;base64/.test(Yt)}},{key:"sanitize",value:function(Yt){return(0,kt.sanitize)(Yt,["http","https","data"])?Yt:"//:0"}},{key:"value",value:function(Yt){return Yt.getAttribute("src")}}]),Bt}(St.default.Embed);Ht.blotName="image",Ht.tagName="IMG",ot.default=Ht},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0});var ut=function(){function Kt(Bt,Ut){for(var Yt=0;Yt<Ut.length;Yt++){var Jt=Ut[Yt];Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Bt,Jt.key,Jt)}}return function(Bt,Ut,Yt){return Ut&&Kt(Bt.prototype,Ut),Yt&&Kt(Bt,Yt),Bt}}(),dt=function Kt(Bt,Ut,Yt){Bt===null&&(Bt=Function.prototype);var Jt=Object.getOwnPropertyDescriptor(Bt,Ut);if(Jt===void 0){var Zt=Object.getPrototypeOf(Bt);return Zt===null?void 0:Kt(Zt,Ut,Yt)}else{if("value"in Jt)return Jt.value;var en=Jt.get;return en===void 0?void 0:en.call(Yt)}},ft=ct(4),St=ct(27),kt=Tt(St);function Tt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function Rt(Kt,Bt){if(!(Kt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function jt(Kt,Bt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:Kt}function $t(Kt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);Kt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Bt):Kt.__proto__=Bt)}var Ft=["height","width"],Ht=function(Kt){$t(Bt,Kt);function Bt(){return Rt(this,Bt),jt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ut(Bt,[{key:"format",value:function(Yt,Jt){Ft.indexOf(Yt)>-1?Jt?this.domNode.setAttribute(Yt,Jt):this.domNode.removeAttribute(Yt):dt(Bt.prototype.__proto__||Object.getPrototypeOf(Bt.prototype),"format",this).call(this,Yt,Jt)}}],[{key:"create",value:function(Yt){var Jt=dt(Bt.__proto__||Object.getPrototypeOf(Bt),"create",this).call(this,Yt);return Jt.setAttribute("frameborder","0"),Jt.setAttribute("allowfullscreen",!0),Jt.setAttribute("src",this.sanitize(Yt)),Jt}},{key:"formats",value:function(Yt){return Ft.reduce(function(Jt,Zt){return Yt.hasAttribute(Zt)&&(Jt[Zt]=Yt.getAttribute(Zt)),Jt},{})}},{key:"sanitize",value:function(Yt){return kt.default.sanitize(Yt)}},{key:"value",value:function(Yt){return Yt.getAttribute("src")}}]),Bt}(ft.BlockEmbed);Ht.blotName="video",Ht.className="ql-video",Ht.tagName="IFRAME",ot.default=Ht},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.FormulaBlot=void 0;var ut=function(){function Yt(Jt,Zt){for(var en=0;en<Zt.length;en++){var tn=Zt[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Jt,tn.key,tn)}}return function(Jt,Zt,en){return Zt&&Yt(Jt.prototype,Zt),en&&Yt(Jt,en),Jt}}(),dt=function Yt(Jt,Zt,en){Jt===null&&(Jt=Function.prototype);var tn=Object.getOwnPropertyDescriptor(Jt,Zt);if(tn===void 0){var nn=Object.getPrototypeOf(Jt);return nn===null?void 0:Yt(nn,Zt,en)}else{if("value"in tn)return tn.value;var ln=tn.get;return ln===void 0?void 0:ln.call(en)}},ft=ct(35),St=$t(ft),kt=ct(5),Tt=$t(kt),Rt=ct(9),jt=$t(Rt);function $t(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function Ft(Yt,Jt){if(!(Yt instanceof Jt))throw new TypeError("Cannot call a class as a function")}function Ht(Yt,Jt){if(!Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&(typeof Jt=="object"||typeof Jt=="function")?Jt:Yt}function Kt(Yt,Jt){if(typeof Jt!="function"&&Jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Yt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Yt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Yt,Jt):Yt.__proto__=Jt)}var Bt=function(Yt){Kt(Jt,Yt);function Jt(){return Ft(this,Jt),Ht(this,(Jt.__proto__||Object.getPrototypeOf(Jt)).apply(this,arguments))}return ut(Jt,null,[{key:"create",value:function(en){var tn=dt(Jt.__proto__||Object.getPrototypeOf(Jt),"create",this).call(this,en);return typeof en=="string"&&(window.katex.render(en,tn,{throwOnError:!1,errorColor:"#f00"}),tn.setAttribute("data-value",en)),tn}},{key:"value",value:function(en){return en.getAttribute("data-value")}}]),Jt}(St.default);Bt.blotName="formula",Bt.className="ql-formula",Bt.tagName="SPAN";var Ut=function(Yt){Kt(Jt,Yt),ut(Jt,null,[{key:"register",value:function(){Tt.default.register(Bt,!0)}}]);function Jt(){Ft(this,Jt);var Zt=Ht(this,(Jt.__proto__||Object.getPrototypeOf(Jt)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return Zt}return Jt}(jt.default);ot.FormulaBlot=Bt,ot.default=Ut},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.CodeToken=ot.CodeBlock=void 0;var ut=function(){function en(tn,nn){for(var ln=0;ln<nn.length;ln++){var an=nn[ln];an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(tn,an.key,an)}}return function(tn,nn,ln){return nn&&en(tn.prototype,nn),ln&&en(tn,ln),tn}}(),dt=function en(tn,nn,ln){tn===null&&(tn=Function.prototype);var an=Object.getOwnPropertyDescriptor(tn,nn);if(an===void 0){var sn=Object.getPrototypeOf(tn);return sn===null?void 0:en(sn,nn,ln)}else{if("value"in an)return an.value;var dn=an.get;return dn===void 0?void 0:dn.call(ln)}},ft=ct(0),St=Ht(ft),kt=ct(5),Tt=Ht(kt),Rt=ct(9),jt=Ht(Rt),$t=ct(13),Ft=Ht($t);function Ht(en){return en&&en.__esModule?en:{default:en}}function Kt(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}function Bt(en,tn){if(!en)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tn&&(typeof tn=="object"||typeof tn=="function")?tn:en}function Ut(en,tn){if(typeof tn!="function"&&tn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}var Yt=function(en){Ut(tn,en);function tn(){return Kt(this,tn),Bt(this,(tn.__proto__||Object.getPrototypeOf(tn)).apply(this,arguments))}return ut(tn,[{key:"replaceWith",value:function(ln){this.domNode.textContent=this.domNode.textContent,this.attach(),dt(tn.prototype.__proto__||Object.getPrototypeOf(tn.prototype),"replaceWith",this).call(this,ln)}},{key:"highlight",value:function(ln){var an=this.domNode.textContent;this.cachedText!==an&&((an.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=ln(an),this.domNode.normalize(),this.attach()),this.cachedText=an)}}]),tn}(Ft.default);Yt.className="ql-syntax";var Jt=new St.default.Attributor.Class("token","hljs",{scope:St.default.Scope.INLINE}),Zt=function(en){Ut(tn,en),ut(tn,null,[{key:"register",value:function(){Tt.default.register(Jt,!0),Tt.default.register(Yt,!0)}}]);function tn(nn,ln){Kt(this,tn);var an=Bt(this,(tn.__proto__||Object.getPrototypeOf(tn)).call(this,nn,ln));if(typeof an.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var sn=null;return an.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(sn),sn=setTimeout(function(){an.highlight(),sn=null},an.options.interval)}),an.highlight(),an}return ut(tn,[{key:"highlight",value:function(){var ln=this;if(!this.quill.selection.composing){this.quill.update(Tt.default.sources.USER);var an=this.quill.getSelection();this.quill.scroll.descendants(Yt).forEach(function(sn){sn.highlight(ln.options.highlight)}),this.quill.update(Tt.default.sources.SILENT),an!=null&&this.quill.setSelection(an,Tt.default.sources.SILENT)}}}]),tn}(jt.default);Zt.DEFAULTS={highlight:function(){return window.hljs==null?null:function(en){var tn=window.hljs.highlightAuto(en);return tn.value}}(),interval:1e3},ot.CodeBlock=Yt,ot.CodeToken=Jt,ot.default=Zt},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(et,ot,ct){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BubbleTooltip=void 0;var ut=function tn(nn,ln,an){nn===null&&(nn=Function.prototype);var sn=Object.getOwnPropertyDescriptor(nn,ln);if(sn===void 0){var dn=Object.getPrototypeOf(nn);return dn===null?void 0:tn(dn,ln,an)}else{if("value"in sn)return sn.value;var mn=sn.get;return mn===void 0?void 0:mn.call(an)}},dt=function(){function tn(nn,ln){for(var an=0;an<ln.length;an++){var sn=ln[an];sn.enumerable=sn.enumerable||!1,sn.configurable=!0,"value"in sn&&(sn.writable=!0),Object.defineProperty(nn,sn.key,sn)}}return function(nn,ln,an){return ln&&tn(nn.prototype,ln),an&&tn(nn,an),nn}}(),ft=ct(3),St=Kt(ft),kt=ct(8),Tt=Kt(kt),Rt=ct(43),jt=Kt(Rt),$t=ct(15),Ft=ct(41),Ht=Kt(Ft);function Kt(tn){return tn&&tn.__esModule?tn:{default:tn}}function Bt(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}function Ut(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&(typeof nn=="object"||typeof nn=="function")?nn:tn}function Yt(tn,nn){if(typeof nn!="function"&&nn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}var Jt=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Zt=function(tn){Yt(nn,tn);function nn(ln,an){Bt(this,nn),an.modules.toolbar!=null&&an.modules.toolbar.container==null&&(an.modules.toolbar.container=Jt);var sn=Ut(this,(nn.__proto__||Object.getPrototypeOf(nn)).call(this,ln,an));return sn.quill.container.classList.add("ql-bubble"),sn}return dt(nn,[{key:"extendToolbar",value:function(an){this.tooltip=new en(this.quill,this.options.bounds),this.tooltip.root.appendChild(an.container),this.buildButtons([].slice.call(an.container.querySelectorAll("button")),Ht.default),this.buildPickers([].slice.call(an.container.querySelectorAll("select")),Ht.default)}}]),nn}(jt.default);Zt.DEFAULTS=(0,St.default)(!0,{},jt.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(nn){nn?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var en=function(tn){Yt(nn,tn);function nn(ln,an){Bt(this,nn);var sn=Ut(this,(nn.__proto__||Object.getPrototypeOf(nn)).call(this,ln,an));return sn.quill.on(Tt.default.events.EDITOR_CHANGE,function(dn,mn,yn,vn){if(dn===Tt.default.events.SELECTION_CHANGE)if(mn!=null&&mn.length>0&&vn===Tt.default.sources.USER){sn.show(),sn.root.style.left="0px",sn.root.style.width="",sn.root.style.width=sn.root.offsetWidth+"px";var hn=sn.quill.getLines(mn.index,mn.length);if(hn.length===1)sn.position(sn.quill.getBounds(mn));else{var pn=hn[hn.length-1],rn=sn.quill.getIndex(pn),on=Math.min(pn.length()-1,mn.index+mn.length-rn),gn=sn.quill.getBounds(new $t.Range(rn,on));sn.position(gn)}}else document.activeElement!==sn.textbox&&sn.quill.hasFocus()&&sn.hide()}),sn}return dt(nn,[{key:"listen",value:function(){var an=this;ut(nn.prototype.__proto__||Object.getPrototypeOf(nn.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){an.root.classList.remove("ql-editing")}),this.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!an.root.classList.contains("ql-hidden")){var sn=an.quill.getSelection();sn!=null&&an.position(an.quill.getBounds(sn))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(an){var sn=ut(nn.prototype.__proto__||Object.getPrototypeOf(nn.prototype),"position",this).call(this,an),dn=this.root.querySelector(".ql-tooltip-arrow");if(dn.style.marginLeft="",sn===0)return sn;dn.style.marginLeft=-1*sn-dn.offsetWidth/2+"px"}}]),nn}(Rt.BaseTooltip);en.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),ot.BubbleTooltip=en,ot.default=Zt},function(et,ot,ct){et.exports=ct(63)}]).default})})(quill);var quillExports=quill.exports,__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var it=function(g,et){return it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,ct){ot.__proto__=ct}||function(ot,ct){for(var ut in ct)ct.hasOwnProperty(ut)&&(ot[ut]=ct[ut])},it(g,et)};return function(g,et){it(g,et);function ot(){this.constructor=g}g.prototype=et===null?Object.create(et):(ot.prototype=et.prototype,new ot)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(it){for(var g,et=1,ot=arguments.length;et<ot;et++){g=arguments[et];for(var ct in g)Object.prototype.hasOwnProperty.call(g,ct)&&(it[ct]=g[ct])}return it},__assign.apply(this,arguments)},__spreadArrays=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var it=0,g=0,et=arguments.length;g<et;g++)it+=arguments[g].length;for(var ot=Array(it),ct=0,g=0;g<et;g++)for(var ut=arguments[g],dt=0,ft=ut.length;dt<ft;dt++,ct++)ot[ct]=ut[dt];return ot},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}},react_1=__importDefault(reactExports),react_dom_1=__importDefault(reactDomExports),isEqual_1=__importDefault(isEqual_1$1),quill_1=__importDefault(quillExports),ReactQuill=function(it){__extends(g,it);function g(et){var ot=it.call(this,et)||this;ot.dirtyProps=["modules","formats","bounds","theme","children"],ot.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],ot.state={generation:0},ot.selection=null,ot.onEditorChange=function(ut,dt,ft,St){var kt,Tt,Rt,jt;ut==="text-change"?(Tt=(kt=ot).onEditorChangeText)===null||Tt===void 0||Tt.call(kt,ot.editor.root.innerHTML,dt,St,ot.unprivilegedEditor):ut==="selection-change"&&((jt=(Rt=ot).onEditorChangeSelection)===null||jt===void 0||jt.call(Rt,dt,St,ot.unprivilegedEditor))};var ct=ot.isControlled()?et.value:et.defaultValue;return ot.value=ct??"",ot}return g.prototype.validateProps=function(et){var ot;if(react_1.default.Children.count(et.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(react_1.default.Children.count(et.children)){var ct=react_1.default.Children.only(et.children);if(((ot=ct)===null||ot===void 0?void 0:ot.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&et.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},g.prototype.shouldComponentUpdate=function(et,ot){var ct=this,ut;if(this.validateProps(et),!this.editor||this.state.generation!==ot.generation)return!0;if("value"in et){var dt=this.getEditorContents(),ft=(ut=et.value,ut??"");this.isEqualValue(ft,dt)||this.setEditorContents(this.editor,ft)}return et.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,et.readOnly),__spreadArrays(this.cleanProps,this.dirtyProps).some(function(St){return!isEqual_1.default(et[St],ct.props[St])})},g.prototype.shouldComponentRegenerate=function(et){var ot=this;return this.dirtyProps.some(function(ct){return!isEqual_1.default(et[ct],ot.props[ct])})},g.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},g.prototype.componentWillUnmount=function(){this.destroyEditor()},g.prototype.componentDidUpdate=function(et,ot){var ct=this;if(this.editor&&this.shouldComponentRegenerate(et)){var ut=this.editor.getContents(),dt=this.editor.getSelection();this.regenerationSnapshot={delta:ut,selection:dt},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==ot.generation){var ft=this.regenerationSnapshot,ut=ft.delta,St=ft.selection;delete this.regenerationSnapshot,this.instantiateEditor();var kt=this.editor;kt.setContents(ut),postpone(function(){return ct.setEditorSelection(kt,St)})}},g.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},g.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},g.prototype.isControlled=function(){return"value"in this.props},g.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},g.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},g.prototype.createEditor=function(et,ot){var ct=new quill_1.default(et,ot);return ot.tabIndex!=null&&this.setEditorTabIndex(ct,ot.tabIndex),this.hookEditor(ct),ct},g.prototype.hookEditor=function(et){this.unprivilegedEditor=this.makeUnprivilegedEditor(et),et.on("editor-change",this.onEditorChange)},g.prototype.unhookEditor=function(et){et.off("editor-change",this.onEditorChange)},g.prototype.getEditorContents=function(){return this.value},g.prototype.getEditorSelection=function(){return this.selection},g.prototype.isDelta=function(et){return et&&et.ops},g.prototype.isEqualValue=function(et,ot){return this.isDelta(et)&&this.isDelta(ot)?isEqual_1.default(et.ops,ot.ops):isEqual_1.default(et,ot)},g.prototype.setEditorContents=function(et,ot){var ct=this;this.value=ot;var ut=this.getEditorSelection();typeof ot=="string"?et.setContents(et.clipboard.convert(ot)):et.setContents(ot),postpone(function(){return ct.setEditorSelection(et,ut)})},g.prototype.setEditorSelection=function(et,ot){if(this.selection=ot,ot){var ct=et.getLength();ot.index=Math.max(0,Math.min(ot.index,ct-1)),ot.length=Math.max(0,Math.min(ot.length,ct-1-ot.index)),et.setSelection(ot)}},g.prototype.setEditorTabIndex=function(et,ot){var ct,ut;!((ut=(ct=et)===null||ct===void 0?void 0:ct.scroll)===null||ut===void 0)&&ut.domNode&&(et.scroll.domNode.tabIndex=ot)},g.prototype.setEditorReadOnly=function(et,ot){ot?et.disable():et.enable()},g.prototype.makeUnprivilegedEditor=function(et){var ot=et;return{getHTML:function(){return ot.root.innerHTML},getLength:ot.getLength.bind(ot),getText:ot.getText.bind(ot),getContents:ot.getContents.bind(ot),getSelection:ot.getSelection.bind(ot),getBounds:ot.getBounds.bind(ot)}},g.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var et=react_dom_1.default.findDOMNode(this.editingArea);if(!et)throw new Error("Cannot find element for editing area");if(et.nodeType===3)throw new Error("Editing area cannot be a text node");return et},g.prototype.renderEditingArea=function(){var et=this,ot=this.props,ct=ot.children,ut=ot.preserveWhitespace,dt=this.state.generation,ft={key:dt,ref:function(St){et.editingArea=St}};return react_1.default.Children.count(ct)?react_1.default.cloneElement(react_1.default.Children.only(ct),ft):ut?react_1.default.createElement("pre",__assign({},ft)):react_1.default.createElement("div",__assign({},ft))},g.prototype.render=function(){var et;return react_1.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(et=this.props.className,et??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},g.prototype.onEditorChangeText=function(et,ot,ct,ut){var dt,ft;if(this.editor){var St=this.isDelta(this.value)?ut.getContents():ut.getHTML();St!==this.getEditorContents()&&(this.lastDeltaChangeSet=ot,this.value=St,(ft=(dt=this.props).onChange)===null||ft===void 0||ft.call(dt,et,ot,ct,ut))}},g.prototype.onEditorChangeSelection=function(et,ot,ct){var ut,dt,ft,St,kt,Tt;if(this.editor){var Rt=this.getEditorSelection(),jt=!Rt&&et,$t=Rt&&!et;isEqual_1.default(et,Rt)||(this.selection=et,(dt=(ut=this.props).onChangeSelection)===null||dt===void 0||dt.call(ut,et,ot,ct),jt?(St=(ft=this.props).onFocus)===null||St===void 0||St.call(ft,et,ot,ct):$t&&((Tt=(kt=this.props).onBlur)===null||Tt===void 0||Tt.call(kt,Rt,ot,ct)))}},g.prototype.focus=function(){this.editor&&this.editor.focus()},g.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},g.displayName="React Quill",g.Quill=quill_1.default,g.defaultProps={theme:"snow",modules:{},readOnly:!1},g}(react_1.default.Component);function postpone(it){Promise.resolve().then(it)}var lib=ReactQuill;const ReactQuill$1=getDefaultExportFromCjs(lib),quill_snow="";function LogoUploader({logoPreview:it,setLogo:g,setLogoPreview:et}){const ot=reactExports.useRef(null),ct=dt=>{const ft=dt.target.files[0];if(!ft)return;if(ft.size>2*1024*1024){y$4.error("File must be less than 2MB"),dt.target.value="";return}const St=new Image;St.onload=()=>{if(St.width>512||St.height>512){y$4.warning("Logo too large! Please use up to 512512 px."),dt.target.value="";return}const kt=new FileReader;kt.onloadend=()=>{g(kt.result),et(kt.result)},kt.readAsDataURL(ft)},St.src=URL.createObjectURL(ft)},ut=()=>{g(null),et(null),ot.current&&(ot.current.value=""),y$4.info("Logo removed")};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Brand Logo (Max 512512  2 MB)"}),jsxRuntimeExports.jsx("input",{ref:ot,type:"file",accept:"image/png, image/jpeg, image/webp",onChange:ct,className:`block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4
                   file:rounded-full file:border-0 file:font-semibold
                   file:bg-royalPurple file:text-white hover:file:opacity-80`}),it&&jsxRuntimeExports.jsx("div",{className:"mt-4 flex flex-col items-center space-y-3",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:it,alt:"Logo preview",className:"w-20 h-20 object-contain border border-gray-700 rounded-md"}),jsxRuntimeExports.jsx("button",{onClick:ut,type:"button",className:"absolute -top-2 -right-2 bg-gray-900 rounded-full p-1 hover:bg-gray-800",title:"Remove",children:jsxRuntimeExports.jsx(CircleX,{size:16,className:"text-red-400 hover:text-red-300"})})]})})]})}function UnsplashImagePicker({onSelect:it}){const[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState([]),[ut,dt]=reactExports.useState(1),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),Rt=reactExports.useRef(null);async function jt(Ft=1,Ht=!1){if(g.trim()){St(!0);try{const Kt=await axiosInstance.get(`https://cre8tlystudio.com/api/unsplash/search?query=${encodeURIComponent(g)}&per_page=30&page=${Ft}`),Bt=Kt.data.results||Kt.data;ct(Ut=>Ht?[...Ut,...Bt]:Bt),Tt(Bt.length>0),dt(Ft)}catch(Kt){console.error("Unsplash fetch failed:",Kt),alert("Failed to fetch images")}finally{St(!1)}}}const $t=()=>{ct([]),dt(1),jt(1,!1)};return reactExports.useEffect(()=>{if(!Rt.current)return;const Ft=new IntersectionObserver(Ht=>{Ht[0].isIntersecting&&kt&&!ft&&jt(ut+1,!0)});return Ft.observe(Rt.current),()=>Ft.disconnect()},[kt,ft,ut,g]),jsxRuntimeExports.jsxs("div",{className:"space-y-4 bg-[#111] p-4 rounded-lg border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("input",{value:g,onChange:Ft=>et(Ft.target.value),placeholder:"Search Unsplash images (e.g. fitness, coffee, nature)",className:"flex-1 bg-gray-900 text-white p-2 rounded-lg border border-gray-700"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:$t,disabled:ft,className:"bg-green text-black font-bold px-4 py-2 rounded-lg transition hover:bg-green-400",children:ft?"Searching...":"Search"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 overflow-y-auto relative",style:{maxHeight:"400px"},children:[ot.map(Ft=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>it(Ft.urls.full,Ft),children:[jsxRuntimeExports.jsx("img",{src:Ft.urls.small,alt:Ft.alt_description,className:"rounded-lg w-full h-40 object-cover group-hover:opacity-75 transition"}),jsxRuntimeExports.jsx("span",{className:"absolute bottom-1 left-1 text-xs bg-black/60 px-1 rounded text-white",children:Ft.user.name})]},Ft.id)),kt&&!ft&&jsxRuntimeExports.jsx("div",{ref:Rt,className:"col-span-full h-8"}),ft&&jsxRuntimeExports.jsx("div",{className:"col-span-full flex justify-center py-4",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-green rounded-full animate-spin"})})]})]})}function CoverUpload({setCover:it}){const[g,et]=reactExports.useState(null),[ot,ct]=reactExports.useState(null),{user:ut}=useAuth(),dt=reactExports.useRef(null),ft=useNavigate(),St=!(ut!=null&&ut.pro_covers),kt=jt=>{const $t=jt.target.files[0];if(!$t)return;if($t.size>1e3*1024*1024){y$4.error("File too large. Maximum 1GB allowed.");return}const Ft=new FileReader;Ft.onloadend=()=>{it(Ft.result),et(Ft.result),ct(null)},Ft.readAsDataURL($t)},Tt=()=>ft("/plans"),Rt=(jt,$t)=>{it(jt),et($t.urls.small),ct({name:$t.user.name,profile:$t.user.links.html}),y$4.success("Cover image selected!")};return jsxRuntimeExports.jsxs("div",{className:"relative mt-6 border border-gray-700 rounded-xl p-4 bg-gray-900/60 overflow-hidden",children:[St&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-xl",children:jsxRuntimeExports.jsxs("button",{onClick:Tt,className:`px-8 py-2.5 rounded-lg border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
             text-black font-semibold hover:opacity-90 transition shadow-lg flex items-center gap-2 justify-center`,children:[jsxRuntimeExports.jsx(Lock,{size:15,className:"text-black"}),jsxRuntimeExports.jsx("span",{children:"Unlock Pro Covers"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-gray-300 font-semibold text-lg tracking-wide",children:["Upload or Choose a Cover"," ",jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"(Max 667  1000)"})]}),jsxRuntimeExports.jsx("span",{className:`bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                     text-black font-semibold text-xs px-3 py-1 rounded-full
                     shadow-[0_0_10px_rgba(168,130,255,0.6)]
                     border border-[#d2b6ff]/60 uppercase tracking-wider
                     ${St?"opacity-60":""}`,children:"PRO"})]}),jsxRuntimeExports.jsx("input",{ref:dt,type:"file",accept:"image/*",onChange:kt,className:"hidden",disabled:St}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>!St&&dt.current.click(),disabled:St,className:`px-5 py-2 rounded-md font-semibold text-sm shadow-md transition cursor-pointer flex items-center gap-2 
          ${St?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-green text-black hover:bg-green"}`,children:[jsxRuntimeExports.jsx(Image$2,{size:16})," Choose File"]}),!St&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(UnsplashImagePicker,{onSelect:Rt})}),g&&!St&&jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("img",{src:g,alt:"Cover Preview",className:"w-[225px] h-[320px] object-cover rounded-lg shadow-lg mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cover will appear before your first page."}),ot&&jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:["Photo by"," ",jsxRuntimeExports.jsx("a",{href:ot.profile,target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:ot.name})," ","on"," ",jsxRuntimeExports.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:"Unsplash"})]})]})]})}function PromptSelect({setText:it}){const[g,et]=reactExports.useState(!1),ot=(ct,ut)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 text-xs uppercase tracking-widest text-gray-300 bg-[#0a0a0a] sticky top-0 z-10 border-b border-gray-800",children:ct}),ut.map((dt,ft)=>jsxRuntimeExports.jsx("li",{onClick:()=>{it(dt.text),et(!1)},className:"px-4 py-2 text-gray-200 bg-[#0a0a0a] hover:bg-gradient-to-r from-[#00e07a] to-[#670fe7] hover:text-white cursor-pointer transition",children:dt.label},ft))]});return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Choose a Pre-Made Prompt"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>et(!g),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 text-left flex justify-between items-center hover:bg-gray-700 transition",children:[jsxRuntimeExports.jsx("span",{children:"Select a pre-made prompt..."}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${g?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),g&&jsxRuntimeExports.jsxs("ul",{className:`absolute z-50 mt-1 w-full max-h-60 overflow-y-auto 
                     rounded-lg border border-gray-700 shadow-lg
                     scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900`,style:{backgroundColor:"#0a0a0a",boxShadow:"0 0 25px rgba(0,0,0,0.7)"},children:[ot("Beginner",cannedPrompts.beginner),ot("Professional",cannedPrompts.professional),ot("Advanced",cannedPrompts.expert)]})]})}function ColorThemeChooser({bgTheme:it,setBgTheme:g}){const et=colorThemes.find(ot=>ot.name===it)||colorThemes[0];return jsxRuntimeExports.jsxs("div",{className:"mt-6 w-full",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-3 font-medium",children:"Theme Color"}),jsxRuntimeExports.jsx("div",{className:"h-14 w-full rounded-lg border border-gray-700 mb-4 shadow-inner transition-all duration-300",style:{backgroundColor:et.preview}}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3 overflow-y-auto rounded-lg border border-gray-800 p-2",style:{maxHeight:"300px"},children:colorThemes.map(ot=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>g(ot.name),className:`relative w-full h-12 rounded-lg transition-all duration-200 focus:outline-none border shadow-[inset_0_1px_3px_rgba(255,255,255,0.2)] 
              ${it===ot.name?"border-green-400 ring-2 ring-green-500/60 scale-[1.05]":"border-gray-700 hover:border-green-300 hover:scale-[1.02]"}`,style:{background:ot.preview},children:[jsxRuntimeExports.jsx("div",{className:"glossy-overlay"}),jsxRuntimeExports.jsx("span",{className:`absolute inset-0 flex items-center justify-center text-[10px] font-semibold uppercase tracking-wide ${ot.name==="dark"||ot.name==="graphite"||ot.name==="royal"?"text-white":"text-black"}`,children:ot.label})]},ot.name))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Click a color to set your PDF background theme."})]})}function ThemeSelector({theme:it,setTheme:g}){return jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Font Style"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:themes.map(et=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>g(et.value),className:`p-4 rounded-xl border font-semibold shadow-md transition-transform duration-200 ease-out ${it===et.value?"border-green ring-2 ring-green/60 scale-[1.01]":"border-gray-700 hover:ring-1 hover:ring-green/40 hover:scale-[1.01]"}`,style:{background:"#111",color:et.textColor,fontFamily:et.value==="modern"?"Montserrat":et.value==="classic"?"AdobeArabic":"Bebas Neue"},children:jsxRuntimeExports.jsx("p",{className:"text-base",children:et.label})},et.value))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Each style uses a unique font in your final PDF."})]})}function PromptForm({text:it,setText:g,title:et,setTitle:ot,theme:ct,setTheme:ut,bgTheme:dt,setBgTheme:ft,pages:St,setPages:kt,setLogo:Tt,logoPreview:Rt,setLogoPreview:jt,link:$t,setLink:Ft,cover:Ht,setCover:Kt,cta:Bt,setCta:Ut,onSubmit:Yt,loading:Jt,contentType:Zt}){const{user:en}=useAuth(),[tn,nn]=reactExports.useState(""),[ln,an]=reactExports.useState(0),[sn,dn]=reactExports.useState(!1),[mn,yn]=reactExports.useState("");reactExports.useEffect(()=>{en!=null&&en.cta&&(!Bt||Bt.trim()==="")&&Ut(en.cta)},[en,en==null?void 0:en.cta]),reactExports.useEffect(()=>{const pn=((it==null?void 0:it.replace(/<[^>]+>/g,"").trim())||"").length,rn=1e5,on=rn*.9;an(pn),pn>rn?(sn||y$4.error(`Your prompt is too long (${pn.toLocaleString()} / ${rn.toLocaleString()} characters). Please shorten it before submitting.`,{autoClose:6e3}),dn(!0),nn(" Your prompt exceeds the limit. Please shorten it.")):pn>on?(dn(!1),nn(`Approaching limit  ${pn.toLocaleString()} / ${rn.toLocaleString()} characters.`)):(dn(!1),nn(""))},[it]);const vn=hn=>{if(hn.preventDefault(),!it.replace(/<[^>]+>/g,"").trim()){yn("Prompt is required before submission."),y$4.error("Please enter a prompt before submitting.");return}yn(""),Yt(hn,Zt)};return jsxRuntimeExports.jsxs("form",{onSubmit:vn,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages (25 max)"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-xs",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"25",value:St??"",onChange:hn=>{const pn=hn.target.value;kt(pn===""?"":Math.min(25,Math.max(1,Number(pn))))},className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg appearance-none"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-y-0 right-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(hn=>Math.max(1,Number(hn||1)-1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt(hn=>Math.min(25,Number(hn||1)+1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:""})]})]})]}),jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 mt-4 font-medium",children:"Document Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter a title for your project or document...",value:et,onChange:hn=>ot(hn.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This title will appear at the top of your generated document."})]}),jsxRuntimeExports.jsx(PromptSelect,{setText:g}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-[250px] overflow-hidden rounded-lg border border-gray-600 bg-white",style:{color:"#111"},children:jsxRuntimeExports.jsx(ReactQuill$1,{theme:"snow",value:it,onChange:hn=>{g(hn),mn&&yn("")},modules:{toolbar:!1},placeholder:"Write your prompt...",className:"h-[250px]"})}),mn&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2 font-medium",children:mn}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-2",children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-medium ${tn.includes("")?"text-red-500":tn?"text-yellow-500":"text-gray-400"}`,children:tn||" "}),jsxRuntimeExports.jsxs("p",{className:`text-xs ${sn?"text-red-500":"text-gray-400"}`,children:[ln.toLocaleString()," / 100,000"]})]})]}),jsxRuntimeExports.jsx(CoverUpload,{cover:Ht,setCover:Kt}),jsxRuntimeExports.jsx(LogoUploader,{logoPreview:Rt,setLogo:Tt,setLogoPreview:jt}),jsxRuntimeExports.jsx(ColorThemeChooser,{bgTheme:dt,setBgTheme:ft}),jsxRuntimeExports.jsx(ThemeSelector,{theme:ct,setTheme:ut}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Add a Closing Message or Call-to-Action"}),(en==null?void 0:en.cta)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("select",{onChange:hn=>{const pn=hn.target.value;pn==="saved"?Ut(en.cta):pn==="custom"&&Ut("")},className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Choose CTA"}),jsxRuntimeExports.jsx("option",{value:"saved",children:"Use My Saved CTA"}),jsxRuntimeExports.jsx("option",{value:"custom",children:"Write New CTA"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 italic ml-2",children:Bt===en.cta?"Using saved CTA":""})]}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter...`,value:Bt,onChange:hn=>Ut(hn.target.value),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This message will appear at the end of your lead magnet."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Link or Call-to-Action"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:$t,onChange:hn=>Ft(hn.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This link will appear at the bottom of your PDF as a button."})]}),!Jt&&jsxRuntimeExports.jsx("button",{disabled:!it.trim()||it==="<p><br></p>"||sn,type:"submit",className:`w-full px-6 py-3 rounded-xl font-semibold text-lg shadow-lg transition ${!it.trim()||it==="<p><br></p>"||sn?"bg-gray-600 cursor-not-allowed text-gray-300":"bg-green font-semibold text-black hover:opacity-90"}`,children:" Submit Prompt"})]})}function SmartPromptBuilder({onPromptReady:it}){const[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(""),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),{user:Rt,accessToken:jt}=useAuth(),$t=async()=>{if(!g||!ot||!ut){y$4.error("Please fill out all required fields.");return}if(!(Rt!=null&&Rt.id)){y$4.error("You must be logged in to generate prompts.");return}Tt(!0);try{const Ft=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt-builder",{userId:Rt.id,audience:g,pain:ot,promise:ut,offer:ft},{headers:{Authorization:`Bearer ${jt}`}});it(Ft.data.prompt)}catch(Ft){console.error(Ft),y$4.error("Failed to generate prompt. Try again.")}finally{Tt(!1)}};return jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/60 p-6 rounded-xl border border-gray-700 space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Smart Prompt Builder"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Answer a few quick questions so we can craft a personalized lead magnet prompt for you."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Who is this for?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: entrepreneurs, creators, small business owners",value:g,onChange:Ft=>et(Ft.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What problem are they facing?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: struggling to grow an email list or convert leads",value:ot,onChange:Ft=>ct(Ft.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What transformation or result do they want?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: consistently attract qualified leads every week",value:ut,onChange:Ft=>dt(Ft.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Whats your offer or next step? (optional)"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: join my course, book a free strategy call",value:ft,onChange:Ft=>St(Ft.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-6 space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:$t,disabled:kt,className:"flex-1 px-6 py-2 bg-green text-black font-semibold rounded hover:bg-green-500 transition",children:kt?"Generating...":"Generate"}),jsxRuntimeExports.jsx("button",{onClick:()=>it(""),disabled:kt,className:"flex-1 px-6 py-2 border border-gray-600 text-gray-300 rounded hover:bg-gray-800 transition",children:"Skip"})]})]})}var shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs$1=typeof Object.is=="function"?Object.is:is$1,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$1=React$1.useDebugValue;function useSyncExternalStore$2(it,g){var et=g(),ot=useState({inst:{value:et,getSnapshot:g}}),ct=ot[0].inst,ut=ot[1];return useLayoutEffect(function(){ct.value=et,ct.getSnapshot=g,checkIfSnapshotChanged(ct)&&ut({inst:ct})},[it,et,g]),useEffect$1(function(){return checkIfSnapshotChanged(ct)&&ut({inst:ct}),it(function(){checkIfSnapshotChanged(ct)&&ut({inst:ct})})},[it]),useDebugValue$1(et),et}function checkIfSnapshotChanged(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!objectIs$1(it,et)}catch{return!0}}function useSyncExternalStore$1(it,g){return g()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;function OrderedMap(it){this.content=it}OrderedMap.prototype={constructor:OrderedMap,find:function(it){for(var g=0;g<this.content.length;g+=2)if(this.content[g]===it)return g;return-1},get:function(it){var g=this.find(it);return g==-1?void 0:this.content[g+1]},update:function(it,g,et){var ot=et&&et!=it?this.remove(et):this,ct=ot.find(it),ut=ot.content.slice();return ct==-1?ut.push(et||it,g):(ut[ct+1]=g,et&&(ut[ct]=et)),new OrderedMap(ut)},remove:function(it){var g=this.find(it);if(g==-1)return this;var et=this.content.slice();return et.splice(g,2),new OrderedMap(et)},addToStart:function(it,g){return new OrderedMap([it,g].concat(this.remove(it).content))},addToEnd:function(it,g){var et=this.remove(it).content.slice();return et.push(it,g),new OrderedMap(et)},addBefore:function(it,g,et){var ot=this.remove(g),ct=ot.content.slice(),ut=ot.find(it);return ct.splice(ut==-1?ct.length:ut,0,g,et),new OrderedMap(ct)},forEach:function(it){for(var g=0;g<this.content.length;g+=2)it(this.content[g],this.content[g+1])},prepend:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(it.content.concat(this.subtract(it).content)):this},append:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(this.subtract(it).content.concat(it.content)):this},subtract:function(it){var g=this;it=OrderedMap.from(it);for(var et=0;et<it.content.length;et+=2)g=g.remove(it.content[et]);return g},toObject:function(){var it={};return this.forEach(function(g,et){it[g]=et}),it},get size(){return this.content.length>>1}};OrderedMap.from=function(it){if(it instanceof OrderedMap)return it;var g=[];if(it)for(var et in it)g.push(et,it[et]);return new OrderedMap(g)};function findDiffStart(it,g,et){for(let ot=0;;ot++){if(ot==it.childCount||ot==g.childCount)return it.childCount==g.childCount?null:et;let ct=it.child(ot),ut=g.child(ot);if(ct==ut){et+=ct.nodeSize;continue}if(!ct.sameMarkup(ut))return et;if(ct.isText&&ct.text!=ut.text){for(let dt=0;ct.text[dt]==ut.text[dt];dt++)et++;return et}if(ct.content.size||ut.content.size){let dt=findDiffStart(ct.content,ut.content,et+1);if(dt!=null)return dt}et+=ct.nodeSize}}function findDiffEnd(it,g,et,ot){for(let ct=it.childCount,ut=g.childCount;;){if(ct==0||ut==0)return ct==ut?null:{a:et,b:ot};let dt=it.child(--ct),ft=g.child(--ut),St=dt.nodeSize;if(dt==ft){et-=St,ot-=St;continue}if(!dt.sameMarkup(ft))return{a:et,b:ot};if(dt.isText&&dt.text!=ft.text){let kt=0,Tt=Math.min(dt.text.length,ft.text.length);for(;kt<Tt&&dt.text[dt.text.length-kt-1]==ft.text[ft.text.length-kt-1];)kt++,et--,ot--;return{a:et,b:ot}}if(dt.content.size||ft.content.size){let kt=findDiffEnd(dt.content,ft.content,et-1,ot-1);if(kt)return kt}et-=St,ot-=St}}class Fragment{constructor(g,et){if(this.content=g,this.size=et||0,et==null)for(let ot=0;ot<g.length;ot++)this.size+=g[ot].nodeSize}nodesBetween(g,et,ot,ct=0,ut){for(let dt=0,ft=0;ft<et;dt++){let St=this.content[dt],kt=ft+St.nodeSize;if(kt>g&&ot(St,ct+ft,ut||null,dt)!==!1&&St.content.size){let Tt=ft+1;St.nodesBetween(Math.max(0,g-Tt),Math.min(St.content.size,et-Tt),ot,ct+Tt)}ft=kt}}descendants(g){this.nodesBetween(0,this.size,g)}textBetween(g,et,ot,ct){let ut="",dt=!0;return this.nodesBetween(g,et,(ft,St)=>{let kt=ft.isText?ft.text.slice(Math.max(g,St)-St,et-St):ft.isLeaf?ct?typeof ct=="function"?ct(ft):ct:ft.type.spec.leafText?ft.type.spec.leafText(ft):"":"";ft.isBlock&&(ft.isLeaf&&kt||ft.isTextblock)&&ot&&(dt?dt=!1:ut+=ot),ut+=kt},0),ut}append(g){if(!g.size)return this;if(!this.size)return g;let et=this.lastChild,ot=g.firstChild,ct=this.content.slice(),ut=0;for(et.isText&&et.sameMarkup(ot)&&(ct[ct.length-1]=et.withText(et.text+ot.text),ut=1);ut<g.content.length;ut++)ct.push(g.content[ut]);return new Fragment(ct,this.size+g.size)}cut(g,et=this.size){if(g==0&&et==this.size)return this;let ot=[],ct=0;if(et>g)for(let ut=0,dt=0;dt<et;ut++){let ft=this.content[ut],St=dt+ft.nodeSize;St>g&&((dt<g||St>et)&&(ft.isText?ft=ft.cut(Math.max(0,g-dt),Math.min(ft.text.length,et-dt)):ft=ft.cut(Math.max(0,g-dt-1),Math.min(ft.content.size,et-dt-1))),ot.push(ft),ct+=ft.nodeSize),dt=St}return new Fragment(ot,ct)}cutByIndex(g,et){return g==et?Fragment.empty:g==0&&et==this.content.length?this:new Fragment(this.content.slice(g,et))}replaceChild(g,et){let ot=this.content[g];if(ot==et)return this;let ct=this.content.slice(),ut=this.size+et.nodeSize-ot.nodeSize;return ct[g]=et,new Fragment(ct,ut)}addToStart(g){return new Fragment([g].concat(this.content),this.size+g.nodeSize)}addToEnd(g){return new Fragment(this.content.concat(g),this.size+g.nodeSize)}eq(g){if(this.content.length!=g.content.length)return!1;for(let et=0;et<this.content.length;et++)if(!this.content[et].eq(g.content[et]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(g){let et=this.content[g];if(!et)throw new RangeError("Index "+g+" out of range for "+this);return et}maybeChild(g){return this.content[g]||null}forEach(g){for(let et=0,ot=0;et<this.content.length;et++){let ct=this.content[et];g(ct,ot,et),ot+=ct.nodeSize}}findDiffStart(g,et=0){return findDiffStart(this,g,et)}findDiffEnd(g,et=this.size,ot=g.size){return findDiffEnd(this,g,et,ot)}findIndex(g){if(g==0)return retIndex(0,g);if(g==this.size)return retIndex(this.content.length,g);if(g>this.size||g<0)throw new RangeError(`Position ${g} outside of fragment (${this})`);for(let et=0,ot=0;;et++){let ct=this.child(et),ut=ot+ct.nodeSize;if(ut>=g)return ut==g?retIndex(et+1,ut):retIndex(et,ot);ot=ut}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(g=>g.toJSON()):null}static fromJSON(g,et){if(!et)return Fragment.empty;if(!Array.isArray(et))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(et.map(g.nodeFromJSON))}static fromArray(g){if(!g.length)return Fragment.empty;let et,ot=0;for(let ct=0;ct<g.length;ct++){let ut=g[ct];ot+=ut.nodeSize,ct&&ut.isText&&g[ct-1].sameMarkup(ut)?(et||(et=g.slice(0,ct)),et[et.length-1]=ut.withText(et[et.length-1].text+ut.text)):et&&et.push(ut)}return new Fragment(et||g,ot)}static from(g){if(!g)return Fragment.empty;if(g instanceof Fragment)return g;if(Array.isArray(g))return this.fromArray(g);if(g.attrs)return new Fragment([g],g.nodeSize);throw new RangeError("Can not convert "+g+" to a Fragment"+(g.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(it,g){return found.index=it,found.offset=g,found}function compareDeep(it,g){if(it===g)return!0;if(!(it&&typeof it=="object")||!(g&&typeof g=="object"))return!1;let et=Array.isArray(it);if(Array.isArray(g)!=et)return!1;if(et){if(it.length!=g.length)return!1;for(let ot=0;ot<it.length;ot++)if(!compareDeep(it[ot],g[ot]))return!1}else{for(let ot in it)if(!(ot in g)||!compareDeep(it[ot],g[ot]))return!1;for(let ot in g)if(!(ot in it))return!1}return!0}let Mark$1=class XS{constructor(g,et){this.type=g,this.attrs=et}addToSet(g){let et,ot=!1;for(let ct=0;ct<g.length;ct++){let ut=g[ct];if(this.eq(ut))return g;if(this.type.excludes(ut.type))et||(et=g.slice(0,ct));else{if(ut.type.excludes(this.type))return g;!ot&&ut.type.rank>this.type.rank&&(et||(et=g.slice(0,ct)),et.push(this),ot=!0),et&&et.push(ut)}}return et||(et=g.slice()),ot||et.push(this),et}removeFromSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return g.slice(0,et).concat(g.slice(et+1));return g}isInSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return!0;return!1}eq(g){return this==g||this.type==g.type&&compareDeep(this.attrs,g.attrs)}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Mark.fromJSON");let ot=g.marks[et.type];if(!ot)throw new RangeError(`There is no mark type ${et.type} in this schema`);let ct=ot.create(et.attrs);return ot.checkAttrs(ct.attrs),ct}static sameSet(g,et){if(g==et)return!0;if(g.length!=et.length)return!1;for(let ot=0;ot<g.length;ot++)if(!g[ot].eq(et[ot]))return!1;return!0}static setFrom(g){if(!g||Array.isArray(g)&&g.length==0)return XS.none;if(g instanceof XS)return[g];let et=g.slice();return et.sort((ot,ct)=>ot.type.rank-ct.type.rank),et}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(g,et,ot){this.content=g,this.openStart=et,this.openEnd=ot}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(g,et){let ot=insertInto(this.content,g+this.openStart,et);return ot&&new Slice(ot,this.openStart,this.openEnd)}removeBetween(g,et){return new Slice(removeRange(this.content,g+this.openStart,et+this.openStart),this.openStart,this.openEnd)}eq(g){return this.content.eq(g.content)&&this.openStart==g.openStart&&this.openEnd==g.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let g={content:this.content.toJSON()};return this.openStart>0&&(g.openStart=this.openStart),this.openEnd>0&&(g.openEnd=this.openEnd),g}static fromJSON(g,et){if(!et)return Slice.empty;let ot=et.openStart||0,ct=et.openEnd||0;if(typeof ot!="number"||typeof ct!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(g,et.content),ot,ct)}static maxOpen(g,et=!0){let ot=0,ct=0;for(let ut=g.firstChild;ut&&!ut.isLeaf&&(et||!ut.type.spec.isolating);ut=ut.firstChild)ot++;for(let ut=g.lastChild;ut&&!ut.isLeaf&&(et||!ut.type.spec.isolating);ut=ut.lastChild)ct++;return new Slice(g,ot,ct)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(it,g,et){let{index:ot,offset:ct}=it.findIndex(g),ut=it.maybeChild(ot),{index:dt,offset:ft}=it.findIndex(et);if(ct==g||ut.isText){if(ft!=et&&!it.child(dt).isText)throw new RangeError("Removing non-flat range");return it.cut(0,g).append(it.cut(et))}if(ot!=dt)throw new RangeError("Removing non-flat range");return it.replaceChild(ot,ut.copy(removeRange(ut.content,g-ct-1,et-ct-1)))}function insertInto(it,g,et,ot){let{index:ct,offset:ut}=it.findIndex(g),dt=it.maybeChild(ct);if(ut==g||dt.isText)return ot&&!ot.canReplace(ct,ct,et)?null:it.cut(0,g).append(et).append(it.cut(g));let ft=insertInto(dt.content,g-ut-1,et,dt);return ft&&it.replaceChild(ct,dt.copy(ft))}function replace(it,g,et){if(et.openStart>it.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(it.depth-et.openStart!=g.depth-et.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(it,g,et,0)}function replaceOuter(it,g,et,ot){let ct=it.index(ot),ut=it.node(ot);if(ct==g.index(ot)&&ot<it.depth-et.openStart){let dt=replaceOuter(it,g,et,ot+1);return ut.copy(ut.content.replaceChild(ct,dt))}else if(et.content.size)if(!et.openStart&&!et.openEnd&&it.depth==ot&&g.depth==ot){let dt=it.parent,ft=dt.content;return close(dt,ft.cut(0,it.parentOffset).append(et.content).append(ft.cut(g.parentOffset)))}else{let{start:dt,end:ft}=prepareSliceForReplace(et,it);return close(ut,replaceThreeWay(it,dt,ft,g,ot))}else return close(ut,replaceTwoWay(it,g,ot))}function checkJoin(it,g){if(!g.type.compatibleContent(it.type))throw new ReplaceError("Cannot join "+g.type.name+" onto "+it.type.name)}function joinable$1(it,g,et){let ot=it.node(et);return checkJoin(ot,g.node(et)),ot}function addNode(it,g){let et=g.length-1;et>=0&&it.isText&&it.sameMarkup(g[et])?g[et]=it.withText(g[et].text+it.text):g.push(it)}function addRange(it,g,et,ot){let ct=(g||it).node(et),ut=0,dt=g?g.index(et):ct.childCount;it&&(ut=it.index(et),it.depth>et?ut++:it.textOffset&&(addNode(it.nodeAfter,ot),ut++));for(let ft=ut;ft<dt;ft++)addNode(ct.child(ft),ot);g&&g.depth==et&&g.textOffset&&addNode(g.nodeBefore,ot)}function close(it,g){return it.type.checkContent(g),it.copy(g)}function replaceThreeWay(it,g,et,ot,ct){let ut=it.depth>ct&&joinable$1(it,g,ct+1),dt=ot.depth>ct&&joinable$1(et,ot,ct+1),ft=[];return addRange(null,it,ct,ft),ut&&dt&&g.index(ct)==et.index(ct)?(checkJoin(ut,dt),addNode(close(ut,replaceThreeWay(it,g,et,ot,ct+1)),ft)):(ut&&addNode(close(ut,replaceTwoWay(it,g,ct+1)),ft),addRange(g,et,ct,ft),dt&&addNode(close(dt,replaceTwoWay(et,ot,ct+1)),ft)),addRange(ot,null,ct,ft),new Fragment(ft)}function replaceTwoWay(it,g,et){let ot=[];if(addRange(null,it,et,ot),it.depth>et){let ct=joinable$1(it,g,et+1);addNode(close(ct,replaceTwoWay(it,g,et+1)),ot)}return addRange(g,null,et,ot),new Fragment(ot)}function prepareSliceForReplace(it,g){let et=g.depth-it.openStart,ct=g.node(et).copy(it.content);for(let ut=et-1;ut>=0;ut--)ct=g.node(ut).copy(Fragment.from(ct));return{start:ct.resolveNoCache(it.openStart+et),end:ct.resolveNoCache(ct.content.size-it.openEnd-et)}}class ResolvedPos{constructor(g,et,ot){this.pos=g,this.path=et,this.parentOffset=ot,this.depth=et.length/3-1}resolveDepth(g){return g==null?this.depth:g<0?this.depth+g:g}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(g){return this.path[this.resolveDepth(g)*3]}index(g){return this.path[this.resolveDepth(g)*3+1]}indexAfter(g){return g=this.resolveDepth(g),this.index(g)+(g==this.depth&&!this.textOffset?0:1)}start(g){return g=this.resolveDepth(g),g==0?0:this.path[g*3-1]+1}end(g){return g=this.resolveDepth(g),this.start(g)+this.node(g).content.size}before(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position before the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]}after(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position after the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]+this.path[g*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let g=this.parent,et=this.index(this.depth);if(et==g.childCount)return null;let ot=this.pos-this.path[this.path.length-1],ct=g.child(et);return ot?g.child(et).cut(ot):ct}get nodeBefore(){let g=this.index(this.depth),et=this.pos-this.path[this.path.length-1];return et?this.parent.child(g).cut(0,et):g==0?null:this.parent.child(g-1)}posAtIndex(g,et){et=this.resolveDepth(et);let ot=this.path[et*3],ct=et==0?0:this.path[et*3-1]+1;for(let ut=0;ut<g;ut++)ct+=ot.child(ut).nodeSize;return ct}marks(){let g=this.parent,et=this.index();if(g.content.size==0)return Mark$1.none;if(this.textOffset)return g.child(et).marks;let ot=g.maybeChild(et-1),ct=g.maybeChild(et);if(!ot){let ft=ot;ot=ct,ct=ft}let ut=ot.marks;for(var dt=0;dt<ut.length;dt++)ut[dt].type.spec.inclusive===!1&&(!ct||!ut[dt].isInSet(ct.marks))&&(ut=ut[dt--].removeFromSet(ut));return ut}marksAcross(g){let et=this.parent.maybeChild(this.index());if(!et||!et.isInline)return null;let ot=et.marks,ct=g.parent.maybeChild(g.index());for(var ut=0;ut<ot.length;ut++)ot[ut].type.spec.inclusive===!1&&(!ct||!ot[ut].isInSet(ct.marks))&&(ot=ot[ut--].removeFromSet(ot));return ot}sharedDepth(g){for(let et=this.depth;et>0;et--)if(this.start(et)<=g&&this.end(et)>=g)return et;return 0}blockRange(g=this,et){if(g.pos<this.pos)return g.blockRange(this);for(let ot=this.depth-(this.parent.inlineContent||this.pos==g.pos?1:0);ot>=0;ot--)if(g.pos<=this.end(ot)&&(!et||et(this.node(ot))))return new NodeRange(this,g,ot);return null}sameParent(g){return this.pos-this.parentOffset==g.pos-g.parentOffset}max(g){return g.pos>this.pos?g:this}min(g){return g.pos<this.pos?g:this}toString(){let g="";for(let et=1;et<=this.depth;et++)g+=(g?"/":"")+this.node(et).type.name+"_"+this.index(et-1);return g+":"+this.parentOffset}static resolve(g,et){if(!(et>=0&&et<=g.content.size))throw new RangeError("Position "+et+" out of range");let ot=[],ct=0,ut=et;for(let dt=g;;){let{index:ft,offset:St}=dt.content.findIndex(ut),kt=ut-St;if(ot.push(dt,ft,ct+St),!kt||(dt=dt.child(ft),dt.isText))break;ut=kt-1,ct+=St+1}return new ResolvedPos(et,ot,ut)}static resolveCached(g,et){let ot=resolveCache.get(g);if(ot)for(let ut=0;ut<ot.elts.length;ut++){let dt=ot.elts[ut];if(dt.pos==et)return dt}else resolveCache.set(g,ot=new ResolveCache);let ct=ot.elts[ot.i]=ResolvedPos.resolve(g,et);return ot.i=(ot.i+1)%resolveCacheSize,ct}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(g,et,ot){this.$from=g,this.$to=et,this.depth=ot}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class JS{constructor(g,et,ot,ct=Mark$1.none){this.type=g,this.attrs=et,this.marks=ct,this.content=ot||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(g){return this.content.child(g)}maybeChild(g){return this.content.maybeChild(g)}forEach(g){this.content.forEach(g)}nodesBetween(g,et,ot,ct=0){this.content.nodesBetween(g,et,ot,ct,this)}descendants(g){this.nodesBetween(0,this.content.size,g)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(g,et,ot,ct){return this.content.textBetween(g,et,ot,ct)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(g){return this==g||this.sameMarkup(g)&&this.content.eq(g.content)}sameMarkup(g){return this.hasMarkup(g.type,g.attrs,g.marks)}hasMarkup(g,et,ot){return this.type==g&&compareDeep(this.attrs,et||g.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,ot||Mark$1.none)}copy(g=null){return g==this.content?this:new JS(this.type,this.attrs,g,this.marks)}mark(g){return g==this.marks?this:new JS(this.type,this.attrs,this.content,g)}cut(g,et=this.content.size){return g==0&&et==this.content.size?this:this.copy(this.content.cut(g,et))}slice(g,et=this.content.size,ot=!1){if(g==et)return Slice.empty;let ct=this.resolve(g),ut=this.resolve(et),dt=ot?0:ct.sharedDepth(et),ft=ct.start(dt),kt=ct.node(dt).content.cut(ct.pos-ft,ut.pos-ft);return new Slice(kt,ct.depth-dt,ut.depth-dt)}replace(g,et,ot){return replace(this.resolve(g),this.resolve(et),ot)}nodeAt(g){for(let et=this;;){let{index:ot,offset:ct}=et.content.findIndex(g);if(et=et.maybeChild(ot),!et)return null;if(ct==g||et.isText)return et;g-=ct+1}}childAfter(g){let{index:et,offset:ot}=this.content.findIndex(g);return{node:this.content.maybeChild(et),index:et,offset:ot}}childBefore(g){if(g==0)return{node:null,index:0,offset:0};let{index:et,offset:ot}=this.content.findIndex(g);if(ot<g)return{node:this.content.child(et),index:et,offset:ot};let ct=this.content.child(et-1);return{node:ct,index:et-1,offset:ot-ct.nodeSize}}resolve(g){return ResolvedPos.resolveCached(this,g)}resolveNoCache(g){return ResolvedPos.resolve(this,g)}rangeHasMark(g,et,ot){let ct=!1;return et>g&&this.nodesBetween(g,et,ut=>(ot.isInSet(ut.marks)&&(ct=!0),!ct)),ct}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let g=this.type.name;return this.content.size&&(g+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,g)}contentMatchAt(g){let et=this.type.contentMatch.matchFragment(this.content,0,g);if(!et)throw new Error("Called contentMatchAt on a node with invalid content");return et}canReplace(g,et,ot=Fragment.empty,ct=0,ut=ot.childCount){let dt=this.contentMatchAt(g).matchFragment(ot,ct,ut),ft=dt&&dt.matchFragment(this.content,et);if(!ft||!ft.validEnd)return!1;for(let St=ct;St<ut;St++)if(!this.type.allowsMarks(ot.child(St).marks))return!1;return!0}canReplaceWith(g,et,ot,ct){if(ct&&!this.type.allowsMarks(ct))return!1;let ut=this.contentMatchAt(g).matchType(ot),dt=ut&&ut.matchFragment(this.content,et);return dt?dt.validEnd:!1}canAppend(g){return g.content.size?this.canReplace(this.childCount,this.childCount,g.content):this.type.compatibleContent(g.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let g=Mark$1.none;for(let et=0;et<this.marks.length;et++){let ot=this.marks[et];ot.type.checkAttrs(ot.attrs),g=ot.addToSet(g)}if(!Mark$1.sameSet(g,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(et=>et.type.name)}`);this.content.forEach(et=>et.check())}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return this.content.size&&(g.content=this.content.toJSON()),this.marks.length&&(g.marks=this.marks.map(et=>et.toJSON())),g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Node.fromJSON");let ot;if(et.marks){if(!Array.isArray(et.marks))throw new RangeError("Invalid mark data for Node.fromJSON");ot=et.marks.map(g.markFromJSON)}if(et.type=="text"){if(typeof et.text!="string")throw new RangeError("Invalid text node in JSON");return g.text(et.text,ot)}let ct=Fragment.fromJSON(g,et.content),ut=g.nodeType(et.type).create(et.attrs,ct,ot);return ut.type.checkAttrs(ut.attrs),ut}};Node$1.prototype.text=void 0;class TextNode extends Node$1{constructor(g,et,ot,ct){if(super(g,et,null,ct),!ot)throw new RangeError("Empty text nodes are not allowed");this.text=ot}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(g,et){return this.text.slice(g,et)}get nodeSize(){return this.text.length}mark(g){return g==this.marks?this:new TextNode(this.type,this.attrs,this.text,g)}withText(g){return g==this.text?this:new TextNode(this.type,this.attrs,g,this.marks)}cut(g=0,et=this.text.length){return g==0&&et==this.text.length?this:this.withText(this.text.slice(g,et))}eq(g){return this.sameMarkup(g)&&this.text==g.text}toJSON(){let g=super.toJSON();return g.text=this.text,g}}function wrapMarks(it,g){for(let et=it.length-1;et>=0;et--)g=it[et].type.name+"("+g+")";return g}class ContentMatch{constructor(g){this.validEnd=g,this.next=[],this.wrapCache=[]}static parse(g,et){let ot=new TokenStream(g,et);if(ot.next==null)return ContentMatch.empty;let ct=parseExpr(ot);ot.next&&ot.err("Unexpected trailing text");let ut=dfa(nfa(ct));return checkForDeadEnds(ut,ot),ut}matchType(g){for(let et=0;et<this.next.length;et++)if(this.next[et].type==g)return this.next[et].next;return null}matchFragment(g,et=0,ot=g.childCount){let ct=this;for(let ut=et;ct&&ut<ot;ut++)ct=ct.matchType(g.child(ut).type);return ct}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let g=0;g<this.next.length;g++){let{type:et}=this.next[g];if(!(et.isText||et.hasRequiredAttrs()))return et}return null}compatible(g){for(let et=0;et<this.next.length;et++)for(let ot=0;ot<g.next.length;ot++)if(this.next[et].type==g.next[ot].type)return!0;return!1}fillBefore(g,et=!1,ot=0){let ct=[this];function ut(dt,ft){let St=dt.matchFragment(g,ot);if(St&&(!et||St.validEnd))return Fragment.from(ft.map(kt=>kt.createAndFill()));for(let kt=0;kt<dt.next.length;kt++){let{type:Tt,next:Rt}=dt.next[kt];if(!(Tt.isText||Tt.hasRequiredAttrs())&&ct.indexOf(Rt)==-1){ct.push(Rt);let jt=ut(Rt,ft.concat(Tt));if(jt)return jt}}return null}return ut(this,[])}findWrapping(g){for(let ot=0;ot<this.wrapCache.length;ot+=2)if(this.wrapCache[ot]==g)return this.wrapCache[ot+1];let et=this.computeWrapping(g);return this.wrapCache.push(g,et),et}computeWrapping(g){let et=Object.create(null),ot=[{match:this,type:null,via:null}];for(;ot.length;){let ct=ot.shift(),ut=ct.match;if(ut.matchType(g)){let dt=[];for(let ft=ct;ft.type;ft=ft.via)dt.push(ft.type);return dt.reverse()}for(let dt=0;dt<ut.next.length;dt++){let{type:ft,next:St}=ut.next[dt];!ft.isLeaf&&!ft.hasRequiredAttrs()&&!(ft.name in et)&&(!ct.type||St.validEnd)&&(ot.push({match:ft.contentMatch,type:ft,via:ct}),et[ft.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(g){if(g>=this.next.length)throw new RangeError(`There's no ${g}th edge in this content match`);return this.next[g]}toString(){let g=[];function et(ot){g.push(ot);for(let ct=0;ct<ot.next.length;ct++)g.indexOf(ot.next[ct].next)==-1&&et(ot.next[ct].next)}return et(this),g.map((ot,ct)=>{let ut=ct+(ot.validEnd?"*":" ")+" ";for(let dt=0;dt<ot.next.length;dt++)ut+=(dt?", ":"")+ot.next[dt].type.name+"->"+g.indexOf(ot.next[dt].next);return ut}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(g,et){this.string=g,this.nodeTypes=et,this.inline=null,this.pos=0,this.tokens=g.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(g){return this.next==g&&(this.pos++||!0)}err(g){throw new SyntaxError(g+" (in content expression '"+this.string+"')")}}function parseExpr(it){let g=[];do g.push(parseExprSeq(it));while(it.eat("|"));return g.length==1?g[0]:{type:"choice",exprs:g}}function parseExprSeq(it){let g=[];do g.push(parseExprSubscript(it));while(it.next&&it.next!=")"&&it.next!="|");return g.length==1?g[0]:{type:"seq",exprs:g}}function parseExprSubscript(it){let g=parseExprAtom(it);for(;;)if(it.eat("+"))g={type:"plus",expr:g};else if(it.eat("*"))g={type:"star",expr:g};else if(it.eat("?"))g={type:"opt",expr:g};else if(it.eat("{"))g=parseExprRange(it,g);else break;return g}function parseNum(it){/\D/.test(it.next)&&it.err("Expected number, got '"+it.next+"'");let g=Number(it.next);return it.pos++,g}function parseExprRange(it,g){let et=parseNum(it),ot=et;return it.eat(",")&&(it.next!="}"?ot=parseNum(it):ot=-1),it.eat("}")||it.err("Unclosed braced range"),{type:"range",min:et,max:ot,expr:g}}function resolveName(it,g){let et=it.nodeTypes,ot=et[g];if(ot)return[ot];let ct=[];for(let ut in et){let dt=et[ut];dt.isInGroup(g)&&ct.push(dt)}return ct.length==0&&it.err("No node type or group '"+g+"' found"),ct}function parseExprAtom(it){if(it.eat("(")){let g=parseExpr(it);return it.eat(")")||it.err("Missing closing paren"),g}else if(/\W/.test(it.next))it.err("Unexpected token '"+it.next+"'");else{let g=resolveName(it,it.next).map(et=>(it.inline==null?it.inline=et.isInline:it.inline!=et.isInline&&it.err("Mixing inline and block content"),{type:"name",value:et}));return it.pos++,g.length==1?g[0]:{type:"choice",exprs:g}}}function nfa(it){let g=[[]];return ct(ut(it,0),et()),g;function et(){return g.push([])-1}function ot(dt,ft,St){let kt={term:St,to:ft};return g[dt].push(kt),kt}function ct(dt,ft){dt.forEach(St=>St.to=ft)}function ut(dt,ft){if(dt.type=="choice")return dt.exprs.reduce((St,kt)=>St.concat(ut(kt,ft)),[]);if(dt.type=="seq")for(let St=0;;St++){let kt=ut(dt.exprs[St],ft);if(St==dt.exprs.length-1)return kt;ct(kt,ft=et())}else if(dt.type=="star"){let St=et();return ot(ft,St),ct(ut(dt.expr,St),St),[ot(St)]}else if(dt.type=="plus"){let St=et();return ct(ut(dt.expr,ft),St),ct(ut(dt.expr,St),St),[ot(St)]}else{if(dt.type=="opt")return[ot(ft)].concat(ut(dt.expr,ft));if(dt.type=="range"){let St=ft;for(let kt=0;kt<dt.min;kt++){let Tt=et();ct(ut(dt.expr,St),Tt),St=Tt}if(dt.max==-1)ct(ut(dt.expr,St),St);else for(let kt=dt.min;kt<dt.max;kt++){let Tt=et();ot(St,Tt),ct(ut(dt.expr,St),Tt),St=Tt}return[ot(St)]}else{if(dt.type=="name")return[ot(ft,void 0,dt.value)];throw new Error("Unknown expr type")}}}}function cmp(it,g){return g-it}function nullFrom(it,g){let et=[];return ot(g),et.sort(cmp);function ot(ct){let ut=it[ct];if(ut.length==1&&!ut[0].term)return ot(ut[0].to);et.push(ct);for(let dt=0;dt<ut.length;dt++){let{term:ft,to:St}=ut[dt];!ft&&et.indexOf(St)==-1&&ot(St)}}}function dfa(it){let g=Object.create(null);return et(nullFrom(it,0));function et(ot){let ct=[];ot.forEach(dt=>{it[dt].forEach(({term:ft,to:St})=>{if(!ft)return;let kt;for(let Tt=0;Tt<ct.length;Tt++)ct[Tt][0]==ft&&(kt=ct[Tt][1]);nullFrom(it,St).forEach(Tt=>{kt||ct.push([ft,kt=[]]),kt.indexOf(Tt)==-1&&kt.push(Tt)})})});let ut=g[ot.join(",")]=new ContentMatch(ot.indexOf(it.length-1)>-1);for(let dt=0;dt<ct.length;dt++){let ft=ct[dt][1].sort(cmp);ut.next.push({type:ct[dt][0],next:g[ft.join(",")]||et(ft)})}return ut}}function checkForDeadEnds(it,g){for(let et=0,ot=[it];et<ot.length;et++){let ct=ot[et],ut=!ct.validEnd,dt=[];for(let ft=0;ft<ct.next.length;ft++){let{type:St,next:kt}=ct.next[ft];dt.push(St.name),ut&&!(St.isText||St.hasRequiredAttrs())&&(ut=!1),ot.indexOf(kt)==-1&&ot.push(kt)}ut&&g.err("Only non-generatable nodes ("+dt.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(it){let g=Object.create(null);for(let et in it){let ot=it[et];if(!ot.hasDefault)return null;g[et]=ot.default}return g}function computeAttrs(it,g){let et=Object.create(null);for(let ot in it){let ct=g&&g[ot];if(ct===void 0){let ut=it[ot];if(ut.hasDefault)ct=ut.default;else throw new RangeError("No value supplied for attribute "+ot)}et[ot]=ct}return et}function checkAttrs(it,g,et,ot){for(let ct in g)if(!(ct in it))throw new RangeError(`Unsupported attribute ${ct} for ${et} of type ${ct}`);for(let ct in it){let ut=it[ct];ut.validate&&ut.validate(g[ct])}}function initAttrs(it,g){let et=Object.create(null);if(g)for(let ot in g)et[ot]=new Attribute(it,ot,g[ot]);return et}let NodeType$1=class lA{constructor(g,et,ot){this.name=g,this.schema=et,this.spec=ot,this.markSet=null,this.groups=ot.group?ot.group.split(" "):[],this.attrs=initAttrs(g,ot.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(ot.inline||g=="text"),this.isText=g=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(g){return this.groups.indexOf(g)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let g in this.attrs)if(this.attrs[g].isRequired)return!0;return!1}compatibleContent(g){return this==g||this.contentMatch.compatible(g.contentMatch)}computeAttrs(g){return!g&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,g)}create(g=null,et,ot){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(g),Fragment.from(et),Mark$1.setFrom(ot))}createChecked(g=null,et,ot){return et=Fragment.from(et),this.checkContent(et),new Node$1(this,this.computeAttrs(g),et,Mark$1.setFrom(ot))}createAndFill(g=null,et,ot){if(g=this.computeAttrs(g),et=Fragment.from(et),et.size){let dt=this.contentMatch.fillBefore(et);if(!dt)return null;et=dt.append(et)}let ct=this.contentMatch.matchFragment(et),ut=ct&&ct.fillBefore(Fragment.empty,!0);return ut?new Node$1(this,g,et.append(ut),Mark$1.setFrom(ot)):null}validContent(g){let et=this.contentMatch.matchFragment(g);if(!et||!et.validEnd)return!1;for(let ot=0;ot<g.childCount;ot++)if(!this.allowsMarks(g.child(ot).marks))return!1;return!0}checkContent(g){if(!this.validContent(g))throw new RangeError(`Invalid content for node ${this.name}: ${g.toString().slice(0,50)}`)}checkAttrs(g){checkAttrs(this.attrs,g,"node",this.name)}allowsMarkType(g){return this.markSet==null||this.markSet.indexOf(g)>-1}allowsMarks(g){if(this.markSet==null)return!0;for(let et=0;et<g.length;et++)if(!this.allowsMarkType(g[et].type))return!1;return!0}allowedMarks(g){if(this.markSet==null)return g;let et;for(let ot=0;ot<g.length;ot++)this.allowsMarkType(g[ot].type)?et&&et.push(g[ot]):et||(et=g.slice(0,ot));return et?et.length?et:Mark$1.none:g}static compile(g,et){let ot=Object.create(null);g.forEach((ut,dt)=>ot[ut]=new lA(ut,et,dt));let ct=et.spec.topNode||"doc";if(!ot[ct])throw new RangeError("Schema is missing its top node type ('"+ct+"')");if(!ot.text)throw new RangeError("Every schema needs a 'text' type");for(let ut in ot.text.attrs)throw new RangeError("The text node type should not have attributes");return ot}};function validateType(it,g,et){let ot=et.split("|");return ct=>{let ut=ct===null?"null":typeof ct;if(ot.indexOf(ut)<0)throw new RangeError(`Expected value of type ${ot} for attribute ${g} on type ${it}, got ${ut}`)}}class Attribute{constructor(g,et,ot){this.hasDefault=Object.prototype.hasOwnProperty.call(ot,"default"),this.default=ot.default,this.validate=typeof ot.validate=="string"?validateType(g,et,ot.validate):ot.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(g,et,ot,ct){this.name=g,this.rank=et,this.schema=ot,this.spec=ct,this.attrs=initAttrs(g,ct.attrs),this.excluded=null;let ut=defaultAttrs(this.attrs);this.instance=ut?new Mark$1(this,ut):null}create(g=null){return!g&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,g))}static compile(g,et){let ot=Object.create(null),ct=0;return g.forEach((ut,dt)=>ot[ut]=new MarkType(ut,ct++,et,dt)),ot}removeFromSet(g){for(var et=0;et<g.length;et++)g[et].type==this&&(g=g.slice(0,et).concat(g.slice(et+1)),et--);return g}isInSet(g){for(let et=0;et<g.length;et++)if(g[et].type==this)return g[et]}checkAttrs(g){checkAttrs(this.attrs,g,"mark",this.name)}excludes(g){return this.excluded.indexOf(g)>-1}}class Schema{constructor(g){this.linebreakReplacement=null,this.cached=Object.create(null);let et=this.spec={};for(let ct in g)et[ct]=g[ct];et.nodes=OrderedMap.from(g.nodes),et.marks=OrderedMap.from(g.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let ot=Object.create(null);for(let ct in this.nodes){if(ct in this.marks)throw new RangeError(ct+" can not be both a node and a mark");let ut=this.nodes[ct],dt=ut.spec.content||"",ft=ut.spec.marks;if(ut.contentMatch=ot[dt]||(ot[dt]=ContentMatch.parse(dt,this.nodes)),ut.inlineContent=ut.contentMatch.inlineContent,ut.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!ut.isInline||!ut.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=ut}ut.markSet=ft=="_"?null:ft?gatherMarks(this,ft.split(" ")):ft==""||!ut.inlineContent?[]:null}for(let ct in this.marks){let ut=this.marks[ct],dt=ut.spec.excludes;ut.excluded=dt==null?[ut]:dt==""?[]:gatherMarks(this,dt.split(" "))}this.nodeFromJSON=ct=>Node$1.fromJSON(this,ct),this.markFromJSON=ct=>Mark$1.fromJSON(this,ct),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(g,et=null,ot,ct){if(typeof g=="string")g=this.nodeType(g);else if(g instanceof NodeType$1){if(g.schema!=this)throw new RangeError("Node type from different schema used ("+g.name+")")}else throw new RangeError("Invalid node type: "+g);return g.createChecked(et,ot,ct)}text(g,et){let ot=this.nodes.text;return new TextNode(ot,ot.defaultAttrs,g,Mark$1.setFrom(et))}mark(g,et){return typeof g=="string"&&(g=this.marks[g]),g.create(et)}nodeType(g){let et=this.nodes[g];if(!et)throw new RangeError("Unknown node type: "+g);return et}}function gatherMarks(it,g){let et=[];for(let ot=0;ot<g.length;ot++){let ct=g[ot],ut=it.marks[ct],dt=ut;if(ut)et.push(ut);else for(let ft in it.marks){let St=it.marks[ft];(ct=="_"||St.spec.group&&St.spec.group.split(" ").indexOf(ct)>-1)&&et.push(dt=St)}if(!dt)throw new SyntaxError("Unknown mark type: '"+g[ot]+"'")}return et}function isTagRule(it){return it.tag!=null}function isStyleRule(it){return it.style!=null}class DOMParser{constructor(g,et){this.schema=g,this.rules=et,this.tags=[],this.styles=[];let ot=this.matchedStyles=[];et.forEach(ct=>{if(isTagRule(ct))this.tags.push(ct);else if(isStyleRule(ct)){let ut=/[^=]*/.exec(ct.style)[0];ot.indexOf(ut)<0&&ot.push(ut),this.styles.push(ct)}}),this.normalizeLists=!this.tags.some(ct=>{if(!/^(ul|ol)\b/.test(ct.tag)||!ct.node)return!1;let ut=g.nodes[ct.node];return ut.contentMatch.matchType(ut)})}parse(g,et={}){let ot=new ParseContext(this,et,!1);return ot.addAll(g,Mark$1.none,et.from,et.to),ot.finish()}parseSlice(g,et={}){let ot=new ParseContext(this,et,!0);return ot.addAll(g,Mark$1.none,et.from,et.to),Slice.maxOpen(ot.finish())}matchTag(g,et,ot){for(let ct=ot?this.tags.indexOf(ot)+1:0;ct<this.tags.length;ct++){let ut=this.tags[ct];if(matches(g,ut.tag)&&(ut.namespace===void 0||g.namespaceURI==ut.namespace)&&(!ut.context||et.matchesContext(ut.context))){if(ut.getAttrs){let dt=ut.getAttrs(g);if(dt===!1)continue;ut.attrs=dt||void 0}return ut}}}matchStyle(g,et,ot,ct){for(let ut=ct?this.styles.indexOf(ct)+1:0;ut<this.styles.length;ut++){let dt=this.styles[ut],ft=dt.style;if(!(ft.indexOf(g)!=0||dt.context&&!ot.matchesContext(dt.context)||ft.length>g.length&&(ft.charCodeAt(g.length)!=61||ft.slice(g.length+1)!=et))){if(dt.getAttrs){let St=dt.getAttrs(et);if(St===!1)continue;dt.attrs=St||void 0}return dt}}}static schemaRules(g){let et=[];function ot(ct){let ut=ct.priority==null?50:ct.priority,dt=0;for(;dt<et.length;dt++){let ft=et[dt];if((ft.priority==null?50:ft.priority)<ut)break}et.splice(dt,0,ct)}for(let ct in g.marks){let ut=g.marks[ct].spec.parseDOM;ut&&ut.forEach(dt=>{ot(dt=copy(dt)),dt.mark||dt.ignore||dt.clearMark||(dt.mark=ct)})}for(let ct in g.nodes){let ut=g.nodes[ct].spec.parseDOM;ut&&ut.forEach(dt=>{ot(dt=copy(dt)),dt.node||dt.ignore||dt.mark||(dt.node=ct)})}return et}static fromSchema(g){return g.cached.domParser||(g.cached.domParser=new DOMParser(g,DOMParser.schemaRules(g)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(it,g,et){return g!=null?(g?OPT_PRESERVE_WS:0)|(g==="full"?OPT_PRESERVE_WS_FULL:0):it&&it.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:et&~OPT_OPEN_LEFT}class NodeContext{constructor(g,et,ot,ct,ut,dt){this.type=g,this.attrs=et,this.marks=ot,this.solid=ct,this.options=dt,this.content=[],this.activeMarks=Mark$1.none,this.match=ut||(dt&OPT_OPEN_LEFT?null:g.contentMatch)}findWrapping(g){if(!this.match){if(!this.type)return[];let et=this.type.contentMatch.fillBefore(Fragment.from(g));if(et)this.match=this.type.contentMatch.matchFragment(et);else{let ot=this.type.contentMatch,ct;return(ct=ot.findWrapping(g.type))?(this.match=ot,ct):null}}return this.match.findWrapping(g.type)}finish(g){if(!(this.options&OPT_PRESERVE_WS)){let ot=this.content[this.content.length-1],ct;if(ot&&ot.isText&&(ct=/[ \t\r\n\u000c]+$/.exec(ot.text))){let ut=ot;ot.text.length==ct[0].length?this.content.pop():this.content[this.content.length-1]=ut.withText(ut.text.slice(0,ut.text.length-ct[0].length))}}let et=Fragment.from(this.content);return!g&&this.match&&(et=et.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,et,this.marks):et}inlineContext(g){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:g.parentNode&&!blockTags.hasOwnProperty(g.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(g,et,ot){this.parser=g,this.options=et,this.isOpen=ot,this.open=0,this.localPreserveWS=!1;let ct=et.topNode,ut,dt=wsOptionsFor(null,et.preserveWhitespace,0)|(ot?OPT_OPEN_LEFT:0);ct?ut=new NodeContext(ct.type,ct.attrs,Mark$1.none,!0,et.topMatch||ct.type.contentMatch,dt):ot?ut=new NodeContext(null,null,Mark$1.none,!0,null,dt):ut=new NodeContext(g.schema.topNodeType,null,Mark$1.none,!0,null,dt),this.nodes=[ut],this.find=et.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(g,et){g.nodeType==3?this.addTextNode(g,et):g.nodeType==1&&this.addElement(g,et)}addTextNode(g,et){let ot=g.nodeValue,ct=this.top,ut=ct.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(ct.options&OPT_PRESERVE_WS)>0;if(ut==="full"||ct.inlineContext(g)||/[^ \t\r\n\u000c]/.test(ot)){if(ut)ut!=="full"?ot=ot.replace(/\r?\n|\r/g," "):ot=ot.replace(/\r\n?/g,`
`);else if(ot=ot.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(ot)&&this.open==this.nodes.length-1){let dt=ct.content[ct.content.length-1],ft=g.previousSibling;(!dt||ft&&ft.nodeName=="BR"||dt.isText&&/[ \t\r\n\u000c]$/.test(dt.text))&&(ot=ot.slice(1))}ot&&this.insertNode(this.parser.schema.text(ot),et,!/\S/.test(ot)),this.findInText(g)}else this.findInside(g)}addElement(g,et,ot){let ct=this.localPreserveWS,ut=this.top;(g.tagName=="PRE"||/pre/.test(g.style&&g.style.whiteSpace))&&(this.localPreserveWS=!0);let dt=g.nodeName.toLowerCase(),ft;listTags.hasOwnProperty(dt)&&this.parser.normalizeLists&&normalizeList(g);let St=this.options.ruleFromNode&&this.options.ruleFromNode(g)||(ft=this.parser.matchTag(g,this,ot));e:if(St?St.ignore:ignoreTags.hasOwnProperty(dt))this.findInside(g),this.ignoreFallback(g,et);else if(!St||St.skip||St.closeParent){St&&St.closeParent?this.open=Math.max(0,this.open-1):St&&St.skip.nodeType&&(g=St.skip);let kt,Tt=this.needsBlock;if(blockTags.hasOwnProperty(dt))ut.content.length&&ut.content[0].isInline&&this.open&&(this.open--,ut=this.top),kt=!0,ut.type||(this.needsBlock=!0);else if(!g.firstChild){this.leafFallback(g,et);break e}let Rt=St&&St.skip?et:this.readStyles(g,et);Rt&&this.addAll(g,Rt),kt&&this.sync(ut),this.needsBlock=Tt}else{let kt=this.readStyles(g,et);kt&&this.addElementByRule(g,St,kt,St.consuming===!1?ft:void 0)}this.localPreserveWS=ct}leafFallback(g,et){g.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(g.ownerDocument.createTextNode(`
`),et)}ignoreFallback(g,et){g.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),et,!0)}readStyles(g,et){let ot=g.style;if(ot&&ot.length)for(let ct=0;ct<this.parser.matchedStyles.length;ct++){let ut=this.parser.matchedStyles[ct],dt=ot.getPropertyValue(ut);if(dt)for(let ft=void 0;;){let St=this.parser.matchStyle(ut,dt,this,ft);if(!St)break;if(St.ignore)return null;if(St.clearMark?et=et.filter(kt=>!St.clearMark(kt)):et=et.concat(this.parser.schema.marks[St.mark].create(St.attrs)),St.consuming===!1)ft=St;else break}}return et}addElementByRule(g,et,ot,ct){let ut,dt;if(et.node)if(dt=this.parser.schema.nodes[et.node],dt.isLeaf)this.insertNode(dt.create(et.attrs),ot,g.nodeName=="BR")||this.leafFallback(g,ot);else{let St=this.enter(dt,et.attrs||null,ot,et.preserveWhitespace);St&&(ut=!0,ot=St)}else{let St=this.parser.schema.marks[et.mark];ot=ot.concat(St.create(et.attrs))}let ft=this.top;if(dt&&dt.isLeaf)this.findInside(g);else if(ct)this.addElement(g,ot,ct);else if(et.getContent)this.findInside(g),et.getContent(g,this.parser.schema).forEach(St=>this.insertNode(St,ot,!1));else{let St=g;typeof et.contentElement=="string"?St=g.querySelector(et.contentElement):typeof et.contentElement=="function"?St=et.contentElement(g):et.contentElement&&(St=et.contentElement),this.findAround(g,St,!0),this.addAll(St,ot),this.findAround(g,St,!1)}ut&&this.sync(ft)&&this.open--}addAll(g,et,ot,ct){let ut=ot||0;for(let dt=ot?g.childNodes[ot]:g.firstChild,ft=ct==null?null:g.childNodes[ct];dt!=ft;dt=dt.nextSibling,++ut)this.findAtPoint(g,ut),this.addDOM(dt,et);this.findAtPoint(g,ut)}findPlace(g,et,ot){let ct,ut;for(let dt=this.open,ft=0;dt>=0;dt--){let St=this.nodes[dt],kt=St.findWrapping(g);if(kt&&(!ct||ct.length>kt.length+ft)&&(ct=kt,ut=St,!kt.length))break;if(St.solid){if(ot)break;ft+=2}}if(!ct)return null;this.sync(ut);for(let dt=0;dt<ct.length;dt++)et=this.enterInner(ct[dt],null,et,!1);return et}insertNode(g,et,ot){if(g.isInline&&this.needsBlock&&!this.top.type){let ut=this.textblockFromContext();ut&&(et=this.enterInner(ut,null,et))}let ct=this.findPlace(g,et,ot);if(ct){this.closeExtra();let ut=this.top;ut.match&&(ut.match=ut.match.matchType(g.type));let dt=Mark$1.none;for(let ft of ct.concat(g.marks))(ut.type?ut.type.allowsMarkType(ft.type):markMayApply(ft.type,g.type))&&(dt=ft.addToSet(dt));return ut.content.push(g.mark(dt)),!0}return!1}enter(g,et,ot,ct){let ut=this.findPlace(g.create(et),ot,!1);return ut&&(ut=this.enterInner(g,et,ot,!0,ct)),ut}enterInner(g,et,ot,ct=!1,ut){this.closeExtra();let dt=this.top;dt.match=dt.match&&dt.match.matchType(g);let ft=wsOptionsFor(g,ut,dt.options);dt.options&OPT_OPEN_LEFT&&dt.content.length==0&&(ft|=OPT_OPEN_LEFT);let St=Mark$1.none;return ot=ot.filter(kt=>(dt.type?dt.type.allowsMarkType(kt.type):markMayApply(kt.type,g))?(St=kt.addToSet(St),!1):!0),this.nodes.push(new NodeContext(g,et,St,ct,null,ft)),this.open++,ot}closeExtra(g=!1){let et=this.nodes.length-1;if(et>this.open){for(;et>this.open;et--)this.nodes[et-1].content.push(this.nodes[et].finish(g));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(g){for(let et=this.open;et>=0;et--){if(this.nodes[et]==g)return this.open=et,!0;this.localPreserveWS&&(this.nodes[et].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let g=0;for(let et=this.open;et>=0;et--){let ot=this.nodes[et].content;for(let ct=ot.length-1;ct>=0;ct--)g+=ot[ct].nodeSize;et&&g++}return g}findAtPoint(g,et){if(this.find)for(let ot=0;ot<this.find.length;ot++)this.find[ot].node==g&&this.find[ot].offset==et&&(this.find[ot].pos=this.currentPos)}findInside(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].pos==null&&g.nodeType==1&&g.contains(this.find[et].node)&&(this.find[et].pos=this.currentPos)}findAround(g,et,ot){if(g!=et&&this.find)for(let ct=0;ct<this.find.length;ct++)this.find[ct].pos==null&&g.nodeType==1&&g.contains(this.find[ct].node)&&et.compareDocumentPosition(this.find[ct].node)&(ot?2:4)&&(this.find[ct].pos=this.currentPos)}findInText(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].node==g&&(this.find[et].pos=this.currentPos-(g.nodeValue.length-this.find[et].offset))}matchesContext(g){if(g.indexOf("|")>-1)return g.split(/\s*\|\s*/).some(this.matchesContext,this);let et=g.split("/"),ot=this.options.context,ct=!this.isOpen&&(!ot||ot.parent.type==this.nodes[0].type),ut=-(ot?ot.depth+1:0)+(ct?0:1),dt=(ft,St)=>{for(;ft>=0;ft--){let kt=et[ft];if(kt==""){if(ft==et.length-1||ft==0)continue;for(;St>=ut;St--)if(dt(ft-1,St))return!0;return!1}else{let Tt=St>0||St==0&&ct?this.nodes[St].type:ot&&St>=ut?ot.node(St-ut).type:null;if(!Tt||Tt.name!=kt&&!Tt.isInGroup(kt))return!1;St--}}return!0};return dt(et.length-1,this.open)}textblockFromContext(){let g=this.options.context;if(g)for(let et=g.depth;et>=0;et--){let ot=g.node(et).contentMatchAt(g.indexAfter(et)).defaultType;if(ot&&ot.isTextblock&&ot.defaultAttrs)return ot}for(let et in this.parser.schema.nodes){let ot=this.parser.schema.nodes[et];if(ot.isTextblock&&ot.defaultAttrs)return ot}}}function normalizeList(it){for(let g=it.firstChild,et=null;g;g=g.nextSibling){let ot=g.nodeType==1?g.nodeName.toLowerCase():null;ot&&listTags.hasOwnProperty(ot)&&et?(et.appendChild(g),g=et):ot=="li"?et=g:ot&&(et=null)}}function matches(it,g){return(it.matches||it.msMatchesSelector||it.webkitMatchesSelector||it.mozMatchesSelector).call(it,g)}function copy(it){let g={};for(let et in it)g[et]=it[et];return g}function markMayApply(it,g){let et=g.schema.nodes;for(let ot in et){let ct=et[ot];if(!ct.allowsMarkType(it))continue;let ut=[],dt=ft=>{ut.push(ft);for(let St=0;St<ft.edgeCount;St++){let{type:kt,next:Tt}=ft.edge(St);if(kt==g||ut.indexOf(Tt)<0&&dt(Tt))return!0}};if(dt(ct.contentMatch))return!0}}class DOMSerializer{constructor(g,et){this.nodes=g,this.marks=et}serializeFragment(g,et={},ot){ot||(ot=doc$1(et).createDocumentFragment());let ct=ot,ut=[];return g.forEach(dt=>{if(ut.length||dt.marks.length){let ft=0,St=0;for(;ft<ut.length&&St<dt.marks.length;){let kt=dt.marks[St];if(!this.marks[kt.type.name]){St++;continue}if(!kt.eq(ut[ft][0])||kt.type.spec.spanning===!1)break;ft++,St++}for(;ft<ut.length;)ct=ut.pop()[1];for(;St<dt.marks.length;){let kt=dt.marks[St++],Tt=this.serializeMark(kt,dt.isInline,et);Tt&&(ut.push([kt,ct]),ct.appendChild(Tt.dom),ct=Tt.contentDOM||Tt.dom)}}ct.appendChild(this.serializeNodeInner(dt,et))}),ot}serializeNodeInner(g,et){let{dom:ot,contentDOM:ct}=renderSpec(doc$1(et),this.nodes[g.type.name](g),null,g.attrs);if(ct){if(g.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(g.content,et,ct)}return ot}serializeNode(g,et={}){let ot=this.serializeNodeInner(g,et);for(let ct=g.marks.length-1;ct>=0;ct--){let ut=this.serializeMark(g.marks[ct],g.isInline,et);ut&&((ut.contentDOM||ut.dom).appendChild(ot),ot=ut.dom)}return ot}serializeMark(g,et,ot={}){let ct=this.marks[g.type.name];return ct&&renderSpec(doc$1(ot),ct(g,et),null,g.attrs)}static renderSpec(g,et,ot=null,ct){return renderSpec(g,et,ot,ct)}static fromSchema(g){return g.cached.domSerializer||(g.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(g),this.marksFromSchema(g)))}static nodesFromSchema(g){let et=gatherToDOM(g.nodes);return et.text||(et.text=ot=>ot.text),et}static marksFromSchema(g){return gatherToDOM(g.marks)}}function gatherToDOM(it){let g={};for(let et in it){let ot=it[et].spec.toDOM;ot&&(g[et]=ot)}return g}function doc$1(it){return it.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(it){let g=suspiciousAttributeCache.get(it);return g===void 0&&suspiciousAttributeCache.set(it,g=suspiciousAttributesInner(it)),g}function suspiciousAttributesInner(it){let g=null;function et(ot){if(ot&&typeof ot=="object")if(Array.isArray(ot))if(typeof ot[0]=="string")g||(g=[]),g.push(ot);else for(let ct=0;ct<ot.length;ct++)et(ot[ct]);else for(let ct in ot)et(ot[ct])}return et(it),g}function renderSpec(it,g,et,ot){if(typeof g=="string")return{dom:it.createTextNode(g)};if(g.nodeType!=null)return{dom:g};if(g.dom&&g.dom.nodeType!=null)return g;let ct=g[0],ut;if(typeof ct!="string")throw new RangeError("Invalid array passed to renderSpec");if(ot&&(ut=suspiciousAttributes(ot))&&ut.indexOf(g)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let dt=ct.indexOf(" ");dt>0&&(et=ct.slice(0,dt),ct=ct.slice(dt+1));let ft,St=et?it.createElementNS(et,ct):it.createElement(ct),kt=g[1],Tt=1;if(kt&&typeof kt=="object"&&kt.nodeType==null&&!Array.isArray(kt)){Tt=2;for(let Rt in kt)if(kt[Rt]!=null){let jt=Rt.indexOf(" ");jt>0?St.setAttributeNS(Rt.slice(0,jt),Rt.slice(jt+1),kt[Rt]):Rt=="style"&&St.style?St.style.cssText=kt[Rt]:St.setAttribute(Rt,kt[Rt])}}for(let Rt=Tt;Rt<g.length;Rt++){let jt=g[Rt];if(jt===0){if(Rt<g.length-1||Rt>Tt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:St,contentDOM:St}}else{let{dom:$t,contentDOM:Ft}=renderSpec(it,jt,et,ot);if(St.appendChild($t),Ft){if(ft)throw new RangeError("Multiple content holes");ft=Ft}}}return{dom:St,contentDOM:ft}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(it,g){return it+g*factor16}function recoverIndex(it){return it&lower16}function recoverOffset(it){return(it-(it&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(g,et,ot){this.pos=g,this.delInfo=et,this.recover=ot}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(g,et=!1){if(this.ranges=g,this.inverted=et,!g.length&&StepMap.empty)return StepMap.empty}recover(g){let et=0,ot=recoverIndex(g);if(!this.inverted)for(let ct=0;ct<ot;ct++)et+=this.ranges[ct*3+2]-this.ranges[ct*3+1];return this.ranges[ot*3]+et+recoverOffset(g)}mapResult(g,et=1){return this._map(g,et,!1)}map(g,et=1){return this._map(g,et,!0)}_map(g,et,ot){let ct=0,ut=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ct:0);if(St>g)break;let kt=this.ranges[ft+ut],Tt=this.ranges[ft+dt],Rt=St+kt;if(g<=Rt){let jt=kt?g==St?-1:g==Rt?1:et:et,$t=St+ct+(jt<0?0:Tt);if(ot)return $t;let Ft=g==(et<0?St:Rt)?null:makeRecover(ft/3,g-St),Ht=g==St?DEL_AFTER:g==Rt?DEL_BEFORE:DEL_ACROSS;return(et<0?g!=St:g!=Rt)&&(Ht|=DEL_SIDE),new MapResult($t,Ht,Ft)}ct+=Tt-kt}return ot?g+ct:new MapResult(g+ct,0,null)}touches(g,et){let ot=0,ct=recoverIndex(et),ut=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ot:0);if(St>g)break;let kt=this.ranges[ft+ut],Tt=St+kt;if(g<=Tt&&ft==ct*3)return!0;ot+=this.ranges[ft+dt]-kt}return!1}forEach(g){let et=this.inverted?2:1,ot=this.inverted?1:2;for(let ct=0,ut=0;ct<this.ranges.length;ct+=3){let dt=this.ranges[ct],ft=dt-(this.inverted?ut:0),St=dt+(this.inverted?0:ut),kt=this.ranges[ct+et],Tt=this.ranges[ct+ot];g(ft,ft+kt,St,St+Tt),ut+=Tt-kt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(g){return g==0?StepMap.empty:new StepMap(g<0?[0,-g,0]:[0,0,g])}}StepMap.empty=new StepMap([]);class Mapping{constructor(g,et,ot=0,ct=g?g.length:0){this.mirror=et,this.from=ot,this.to=ct,this._maps=g||[],this.ownData=!(g||et)}get maps(){return this._maps}slice(g=0,et=this.maps.length){return new Mapping(this._maps,this.mirror,g,et)}appendMap(g,et){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(g),et!=null&&this.setMirror(this._maps.length-1,et)}appendMapping(g){for(let et=0,ot=this._maps.length;et<g._maps.length;et++){let ct=g.getMirror(et);this.appendMap(g._maps[et],ct!=null&&ct<et?ot+ct:void 0)}}getMirror(g){if(this.mirror){for(let et=0;et<this.mirror.length;et++)if(this.mirror[et]==g)return this.mirror[et+(et%2?-1:1)]}}setMirror(g,et){this.mirror||(this.mirror=[]),this.mirror.push(g,et)}appendMappingInverted(g){for(let et=g.maps.length-1,ot=this._maps.length+g._maps.length;et>=0;et--){let ct=g.getMirror(et);this.appendMap(g._maps[et].invert(),ct!=null&&ct>et?ot-ct-1:void 0)}}invert(){let g=new Mapping;return g.appendMappingInverted(this),g}map(g,et=1){if(this.mirror)return this._map(g,et,!0);for(let ot=this.from;ot<this.to;ot++)g=this._maps[ot].map(g,et);return g}mapResult(g,et=1){return this._map(g,et,!1)}_map(g,et,ot){let ct=0;for(let ut=this.from;ut<this.to;ut++){let dt=this._maps[ut],ft=dt.mapResult(g,et);if(ft.recover!=null){let St=this.getMirror(ut);if(St!=null&&St>ut&&St<this.to){ut=St,g=this._maps[St].recover(ft.recover);continue}}ct|=ft.delInfo,g=ft.pos}return ot?g:new MapResult(g,ct,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(g){return null}static fromJSON(g,et){if(!et||!et.stepType)throw new RangeError("Invalid input for Step.fromJSON");let ot=stepsByID[et.stepType];if(!ot)throw new RangeError(`No step type ${et.stepType} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+g);return stepsByID[g]=et,et.prototype.jsonID=g,et}}class StepResult{constructor(g,et){this.doc=g,this.failed=et}static ok(g){return new StepResult(g,null)}static fail(g){return new StepResult(null,g)}static fromReplace(g,et,ot,ct){try{return StepResult.ok(g.replace(et,ot,ct))}catch(ut){if(ut instanceof ReplaceError)return StepResult.fail(ut.message);throw ut}}}function mapFragment(it,g,et){let ot=[];for(let ct=0;ct<it.childCount;ct++){let ut=it.child(ct);ut.content.size&&(ut=ut.copy(mapFragment(ut.content,g,ut))),ut.isInline&&(ut=g(ut,et,ct)),ot.push(ut)}return Fragment.fromArray(ot)}class AddMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=g.resolve(this.from),ct=ot.node(ot.sharedDepth(this.to)),ut=new Slice(mapFragment(et.content,(dt,ft)=>!dt.isAtom||!ft.type.allowsMarkType(this.mark.type)?dt:dt.mark(this.mark.addToSet(dt.marks)),ct),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ut)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new AddMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof AddMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new AddMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=new Slice(mapFragment(et.content,ct=>ct.mark(this.mark.removeFromSet(ct.marks)),g),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ot)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new RemoveMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof RemoveMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new RemoveMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.addToSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);if(et){let ot=this.mark.addToSet(et.marks);if(ot.length==et.marks.length){for(let ct=0;ct<et.marks.length;ct++)if(!et.marks[ct].isInSet(ot))return new AddNodeMarkStep(this.pos,et.marks[ct]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AddNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.removeFromSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);return!et||!this.mark.isInSet(et.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new RemoveNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(g,et,ot,ct=!1){super(),this.from=g,this.to=et,this.slice=ot,this.structure=ct}apply(g){return this.structure&&contentBetween(g,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(g,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(g){return new ReplaceStep(this.from,this.from+this.slice.size,g.slice(this.from,this.to))}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deletedAcross&&ot.deletedAcross?null:new ReplaceStep(et.pos,Math.max(et.pos,ot.pos),this.slice,this.structure)}merge(g){if(!(g instanceof ReplaceStep)||g.structure||this.structure)return null;if(this.from+this.slice.size==g.from&&!this.slice.openEnd&&!g.slice.openStart){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(this.slice.content.append(g.slice.content),this.slice.openStart,g.slice.openEnd);return new ReplaceStep(this.from,this.to+(g.to-g.from),et,this.structure)}else if(g.to==this.from&&!this.slice.openStart&&!g.slice.openEnd){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(g.slice.content.append(this.slice.content),g.slice.openStart,this.slice.openEnd);return new ReplaceStep(g.from,this.to,et,this.structure)}else return null}toJSON(){let g={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(et.from,et.to,Slice.fromJSON(g,et.slice),!!et.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(g,et,ot,ct,ut,dt,ft=!1){super(),this.from=g,this.to=et,this.gapFrom=ot,this.gapTo=ct,this.slice=ut,this.insert=dt,this.structure=ft}apply(g){if(this.structure&&(contentBetween(g,this.from,this.gapFrom)||contentBetween(g,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let et=g.slice(this.gapFrom,this.gapTo);if(et.openStart||et.openEnd)return StepResult.fail("Gap is not a flat range");let ot=this.slice.insertAt(this.insert,et.content);return ot?StepResult.fromReplace(g,this.from,this.to,ot):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(g){let et=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+et,this.from+this.insert,this.from+this.insert+et,g.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1),ct=this.from==this.gapFrom?et.pos:g.map(this.gapFrom,-1),ut=this.to==this.gapTo?ot.pos:g.map(this.gapTo,1);return et.deletedAcross&&ot.deletedAcross||ct<et.pos||ut>ot.pos?null:new ReplaceAroundStep(et.pos,ot.pos,ct,ut,this.slice,this.insert,this.structure)}toJSON(){let g={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number"||typeof et.gapFrom!="number"||typeof et.gapTo!="number"||typeof et.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(et.from,et.to,et.gapFrom,et.gapTo,Slice.fromJSON(g,et.slice),et.insert,!!et.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(it,g,et){let ot=it.resolve(g),ct=et-g,ut=ot.depth;for(;ct>0&&ut>0&&ot.indexAfter(ut)==ot.node(ut).childCount;)ut--,ct--;if(ct>0){let dt=ot.node(ut).maybeChild(ot.indexAfter(ut));for(;ct>0;){if(!dt||dt.isLeaf)return!0;dt=dt.firstChild,ct--}}return!1}function addMark(it,g,et,ot){let ct=[],ut=[],dt,ft;it.doc.nodesBetween(g,et,(St,kt,Tt)=>{if(!St.isInline)return;let Rt=St.marks;if(!ot.isInSet(Rt)&&Tt.type.allowsMarkType(ot.type)){let jt=Math.max(kt,g),$t=Math.min(kt+St.nodeSize,et),Ft=ot.addToSet(Rt);for(let Ht=0;Ht<Rt.length;Ht++)Rt[Ht].isInSet(Ft)||(dt&&dt.to==jt&&dt.mark.eq(Rt[Ht])?dt.to=$t:ct.push(dt=new RemoveMarkStep(jt,$t,Rt[Ht])));ft&&ft.to==jt?ft.to=$t:ut.push(ft=new AddMarkStep(jt,$t,ot))}}),ct.forEach(St=>it.step(St)),ut.forEach(St=>it.step(St))}function removeMark(it,g,et,ot){let ct=[],ut=0;it.doc.nodesBetween(g,et,(dt,ft)=>{if(!dt.isInline)return;ut++;let St=null;if(ot instanceof MarkType){let kt=dt.marks,Tt;for(;Tt=ot.isInSet(kt);)(St||(St=[])).push(Tt),kt=Tt.removeFromSet(kt)}else ot?ot.isInSet(dt.marks)&&(St=[ot]):St=dt.marks;if(St&&St.length){let kt=Math.min(ft+dt.nodeSize,et);for(let Tt=0;Tt<St.length;Tt++){let Rt=St[Tt],jt;for(let $t=0;$t<ct.length;$t++){let Ft=ct[$t];Ft.step==ut-1&&Rt.eq(ct[$t].style)&&(jt=Ft)}jt?(jt.to=kt,jt.step=ut):ct.push({style:Rt,from:Math.max(ft,g),to:kt,step:ut})}}}),ct.forEach(dt=>it.step(new RemoveMarkStep(dt.from,dt.to,dt.style)))}function clearIncompatible(it,g,et,ot=et.contentMatch,ct=!0){let ut=it.doc.nodeAt(g),dt=[],ft=g+1;for(let St=0;St<ut.childCount;St++){let kt=ut.child(St),Tt=ft+kt.nodeSize,Rt=ot.matchType(kt.type);if(!Rt)dt.push(new ReplaceStep(ft,Tt,Slice.empty));else{ot=Rt;for(let jt=0;jt<kt.marks.length;jt++)et.allowsMarkType(kt.marks[jt].type)||it.step(new RemoveMarkStep(ft,Tt,kt.marks[jt]));if(ct&&kt.isText&&et.whitespace!="pre"){let jt,$t=/\r?\n|\r/g,Ft;for(;jt=$t.exec(kt.text);)Ft||(Ft=new Slice(Fragment.from(et.schema.text(" ",et.allowedMarks(kt.marks))),0,0)),dt.push(new ReplaceStep(ft+jt.index,ft+jt.index+jt[0].length,Ft))}}ft=Tt}if(!ot.validEnd){let St=ot.fillBefore(Fragment.empty,!0);it.replace(ft,ft,new Slice(St,0,0))}for(let St=dt.length-1;St>=0;St--)it.step(dt[St])}function canCut(it,g,et){return(g==0||it.canReplace(g,it.childCount))&&(et==it.childCount||it.canReplace(0,et))}function liftTarget(it){let et=it.parent.content.cutByIndex(it.startIndex,it.endIndex);for(let ot=it.depth;;--ot){let ct=it.$from.node(ot),ut=it.$from.index(ot),dt=it.$to.indexAfter(ot);if(ot<it.depth&&ct.canReplace(ut,dt,et))return ot;if(ot==0||ct.type.spec.isolating||!canCut(ct,ut,dt))break}return null}function lift$2(it,g,et){let{$from:ot,$to:ct,depth:ut}=g,dt=ot.before(ut+1),ft=ct.after(ut+1),St=dt,kt=ft,Tt=Fragment.empty,Rt=0;for(let Ft=ut,Ht=!1;Ft>et;Ft--)Ht||ot.index(Ft)>0?(Ht=!0,Tt=Fragment.from(ot.node(Ft).copy(Tt)),Rt++):St--;let jt=Fragment.empty,$t=0;for(let Ft=ut,Ht=!1;Ft>et;Ft--)Ht||ct.after(Ft+1)<ct.end(Ft)?(Ht=!0,jt=Fragment.from(ct.node(Ft).copy(jt)),$t++):kt++;it.step(new ReplaceAroundStep(St,kt,dt,ft,new Slice(Tt.append(jt),Rt,$t),Tt.size-Rt,!0))}function findWrapping(it,g,et=null,ot=it){let ct=findWrappingOutside(it,g),ut=ct&&findWrappingInside(ot,g);return ut?ct.map(withAttrs).concat({type:g,attrs:et}).concat(ut.map(withAttrs)):null}function withAttrs(it){return{type:it,attrs:null}}function findWrappingOutside(it,g){let{parent:et,startIndex:ot,endIndex:ct}=it,ut=et.contentMatchAt(ot).findWrapping(g);if(!ut)return null;let dt=ut.length?ut[0]:g;return et.canReplaceWith(ot,ct,dt)?ut:null}function findWrappingInside(it,g){let{parent:et,startIndex:ot,endIndex:ct}=it,ut=et.child(ot),dt=g.contentMatch.findWrapping(ut.type);if(!dt)return null;let St=(dt.length?dt[dt.length-1]:g).contentMatch;for(let kt=ot;St&&kt<ct;kt++)St=St.matchType(et.child(kt).type);return!St||!St.validEnd?null:dt}function wrap(it,g,et){let ot=Fragment.empty;for(let dt=et.length-1;dt>=0;dt--){if(ot.size){let ft=et[dt].type.contentMatch.matchFragment(ot);if(!ft||!ft.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}ot=Fragment.from(et[dt].type.create(et[dt].attrs,ot))}let ct=g.start,ut=g.end;it.step(new ReplaceAroundStep(ct,ut,ct,ut,new Slice(ot,0,0),et.length,!0))}function setBlockType$1(it,g,et,ot,ct){if(!ot.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let ut=it.steps.length;it.doc.nodesBetween(g,et,(dt,ft)=>{let St=typeof ct=="function"?ct(dt):ct;if(dt.isTextblock&&!dt.hasMarkup(ot,St)&&canChangeType(it.doc,it.mapping.slice(ut).map(ft),ot)){let kt=null;if(ot.schema.linebreakReplacement){let $t=ot.whitespace=="pre",Ft=!!ot.contentMatch.matchType(ot.schema.linebreakReplacement);$t&&!Ft?kt=!1:!$t&&Ft&&(kt=!0)}kt===!1&&replaceLinebreaks(it,dt,ft,ut),clearIncompatible(it,it.mapping.slice(ut).map(ft,1),ot,void 0,kt===null);let Tt=it.mapping.slice(ut),Rt=Tt.map(ft,1),jt=Tt.map(ft+dt.nodeSize,1);return it.step(new ReplaceAroundStep(Rt,jt,Rt+1,jt-1,new Slice(Fragment.from(ot.create(St,null,dt.marks)),0,0),1,!0)),kt===!0&&replaceNewlines(it,dt,ft,ut),!1}})}function replaceNewlines(it,g,et,ot){g.forEach((ct,ut)=>{if(ct.isText){let dt,ft=/\r?\n|\r/g;for(;dt=ft.exec(ct.text);){let St=it.mapping.slice(ot).map(et+1+ut+dt.index);it.replaceWith(St,St+1,g.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(it,g,et,ot){g.forEach((ct,ut)=>{if(ct.type==ct.type.schema.linebreakReplacement){let dt=it.mapping.slice(ot).map(et+1+ut);it.replaceWith(dt,dt+1,g.type.schema.text(`
`))}})}function canChangeType(it,g,et){let ot=it.resolve(g),ct=ot.index();return ot.parent.canReplaceWith(ct,ct+1,et)}function setNodeMarkup(it,g,et,ot,ct){let ut=it.doc.nodeAt(g);if(!ut)throw new RangeError("No node at given position");et||(et=ut.type);let dt=et.create(ot,null,ct||ut.marks);if(ut.isLeaf)return it.replaceWith(g,g+ut.nodeSize,dt);if(!et.validContent(ut.content))throw new RangeError("Invalid content for node type "+et.name);it.step(new ReplaceAroundStep(g,g+ut.nodeSize,g+1,g+ut.nodeSize-1,new Slice(Fragment.from(dt),0,0),1,!0))}function canSplit(it,g,et=1,ot){let ct=it.resolve(g),ut=ct.depth-et,dt=ot&&ot[ot.length-1]||ct.parent;if(ut<0||ct.parent.type.spec.isolating||!ct.parent.canReplace(ct.index(),ct.parent.childCount)||!dt.type.validContent(ct.parent.content.cutByIndex(ct.index(),ct.parent.childCount)))return!1;for(let kt=ct.depth-1,Tt=et-2;kt>ut;kt--,Tt--){let Rt=ct.node(kt),jt=ct.index(kt);if(Rt.type.spec.isolating)return!1;let $t=Rt.content.cutByIndex(jt,Rt.childCount),Ft=ot&&ot[Tt+1];Ft&&($t=$t.replaceChild(0,Ft.type.create(Ft.attrs)));let Ht=ot&&ot[Tt]||Rt;if(!Rt.canReplace(jt+1,Rt.childCount)||!Ht.type.validContent($t))return!1}let ft=ct.indexAfter(ut),St=ot&&ot[0];return ct.node(ut).canReplaceWith(ft,ft,St?St.type:ct.node(ut+1).type)}function split(it,g,et=1,ot){let ct=it.doc.resolve(g),ut=Fragment.empty,dt=Fragment.empty;for(let ft=ct.depth,St=ct.depth-et,kt=et-1;ft>St;ft--,kt--){ut=Fragment.from(ct.node(ft).copy(ut));let Tt=ot&&ot[kt];dt=Fragment.from(Tt?Tt.type.create(Tt.attrs,dt):ct.node(ft).copy(dt))}it.step(new ReplaceStep(g,g,new Slice(ut.append(dt),et,et),!0))}function canJoin(it,g){let et=it.resolve(g),ot=et.index();return joinable(et.nodeBefore,et.nodeAfter)&&et.parent.canReplace(ot,ot+1)}function canAppendWithSubstitutedLinebreaks(it,g){g.content.size||it.type.compatibleContent(g.type);let et=it.contentMatchAt(it.childCount),{linebreakReplacement:ot}=it.type.schema;for(let ct=0;ct<g.childCount;ct++){let ut=g.child(ct),dt=ut.type==ot?it.type.schema.nodes.text:ut.type;if(et=et.matchType(dt),!et||!it.type.allowsMarks(ut.marks))return!1}return et.validEnd}function joinable(it,g){return!!(it&&g&&!it.isLeaf&&canAppendWithSubstitutedLinebreaks(it,g))}function joinPoint(it,g,et=-1){let ot=it.resolve(g);for(let ct=ot.depth;;ct--){let ut,dt,ft=ot.index(ct);if(ct==ot.depth?(ut=ot.nodeBefore,dt=ot.nodeAfter):et>0?(ut=ot.node(ct+1),ft++,dt=ot.node(ct).maybeChild(ft)):(ut=ot.node(ct).maybeChild(ft-1),dt=ot.node(ct+1)),ut&&!ut.isTextblock&&joinable(ut,dt)&&ot.node(ct).canReplace(ft,ft+1))return g;if(ct==0)break;g=et<0?ot.before(ct):ot.after(ct)}}function join(it,g,et){let ot=null,{linebreakReplacement:ct}=it.doc.type.schema,ut=it.doc.resolve(g-et),dt=ut.node().type;if(ct&&dt.inlineContent){let Tt=dt.whitespace=="pre",Rt=!!dt.contentMatch.matchType(ct);Tt&&!Rt?ot=!1:!Tt&&Rt&&(ot=!0)}let ft=it.steps.length;if(ot===!1){let Tt=it.doc.resolve(g+et);replaceLinebreaks(it,Tt.node(),Tt.before(),ft)}dt.inlineContent&&clearIncompatible(it,g+et-1,dt,ut.node().contentMatchAt(ut.index()),ot==null);let St=it.mapping.slice(ft),kt=St.map(g-et);if(it.step(new ReplaceStep(kt,St.map(g+et,-1),Slice.empty,!0)),ot===!0){let Tt=it.doc.resolve(kt);replaceNewlines(it,Tt.node(),Tt.before(),it.steps.length)}return it}function insertPoint(it,g,et){let ot=it.resolve(g);if(ot.parent.canReplaceWith(ot.index(),ot.index(),et))return g;if(ot.parentOffset==0)for(let ct=ot.depth-1;ct>=0;ct--){let ut=ot.index(ct);if(ot.node(ct).canReplaceWith(ut,ut,et))return ot.before(ct+1);if(ut>0)return null}if(ot.parentOffset==ot.parent.content.size)for(let ct=ot.depth-1;ct>=0;ct--){let ut=ot.indexAfter(ct);if(ot.node(ct).canReplaceWith(ut,ut,et))return ot.after(ct+1);if(ut<ot.node(ct).childCount)return null}return null}function dropPoint(it,g,et){let ot=it.resolve(g);if(!et.content.size)return g;let ct=et.content;for(let ut=0;ut<et.openStart;ut++)ct=ct.firstChild.content;for(let ut=1;ut<=(et.openStart==0&&et.size?2:1);ut++)for(let dt=ot.depth;dt>=0;dt--){let ft=dt==ot.depth?0:ot.pos<=(ot.start(dt+1)+ot.end(dt+1))/2?-1:1,St=ot.index(dt)+(ft>0?1:0),kt=ot.node(dt),Tt=!1;if(ut==1)Tt=kt.canReplace(St,St,ct);else{let Rt=kt.contentMatchAt(St).findWrapping(ct.firstChild.type);Tt=Rt&&kt.canReplaceWith(St,St,Rt[0])}if(Tt)return ft==0?ot.pos:ft<0?ot.before(dt+1):ot.after(dt+1)}return null}function replaceStep(it,g,et=g,ot=Slice.empty){if(g==et&&!ot.size)return null;let ct=it.resolve(g),ut=it.resolve(et);return fitsTrivially(ct,ut,ot)?new ReplaceStep(g,et,ot):new Fitter(ct,ut,ot).fit()}function fitsTrivially(it,g,et){return!et.openStart&&!et.openEnd&&it.start()==g.start()&&it.parent.canReplace(it.index(),g.index(),et.content)}class Fitter{constructor(g,et,ot){this.$from=g,this.$to=et,this.unplaced=ot,this.frontier=[],this.placed=Fragment.empty;for(let ct=0;ct<=g.depth;ct++){let ut=g.node(ct);this.frontier.push({type:ut.type,match:ut.contentMatchAt(g.indexAfter(ct))})}for(let ct=g.depth;ct>0;ct--)this.placed=Fragment.from(g.node(ct).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let kt=this.findFittable();kt?this.placeNodes(kt):this.openMore()||this.dropNode()}let g=this.mustMoveInline(),et=this.placed.size-this.depth-this.$from.depth,ot=this.$from,ct=this.close(g<0?this.$to:ot.doc.resolve(g));if(!ct)return null;let ut=this.placed,dt=ot.depth,ft=ct.depth;for(;dt&&ft&&ut.childCount==1;)ut=ut.firstChild.content,dt--,ft--;let St=new Slice(ut,dt,ft);return g>-1?new ReplaceAroundStep(ot.pos,g,this.$to.pos,this.$to.end(),St,et):St.size||ot.pos!=this.$to.pos?new ReplaceStep(ot.pos,ct.pos,St):null}findFittable(){let g=this.unplaced.openStart;for(let et=this.unplaced.content,ot=0,ct=this.unplaced.openEnd;ot<g;ot++){let ut=et.firstChild;if(et.childCount>1&&(ct=0),ut.type.spec.isolating&&ct<=ot){g=ot;break}et=ut.content}for(let et=1;et<=2;et++)for(let ot=et==1?g:this.unplaced.openStart;ot>=0;ot--){let ct,ut=null;ot?(ut=contentAt(this.unplaced.content,ot-1).firstChild,ct=ut.content):ct=this.unplaced.content;let dt=ct.firstChild;for(let ft=this.depth;ft>=0;ft--){let{type:St,match:kt}=this.frontier[ft],Tt,Rt=null;if(et==1&&(dt?kt.matchType(dt.type)||(Rt=kt.fillBefore(Fragment.from(dt),!1)):ut&&St.compatibleContent(ut.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ut,inject:Rt};if(et==2&&dt&&(Tt=kt.findWrapping(dt.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ut,wrap:Tt};if(ut&&kt.matchType(ut.type))break}}}openMore(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ct=contentAt(g,et);return!ct.childCount||ct.firstChild.isLeaf?!1:(this.unplaced=new Slice(g,et+1,Math.max(ot,ct.size+et>=g.size-ot?et+1:0)),!0)}dropNode(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ct=contentAt(g,et);if(ct.childCount<=1&&et>0){let ut=g.size-et<=et+ct.size;this.unplaced=new Slice(dropFromFragment(g,et-1,1),et-1,ut?et-1:ot)}else this.unplaced=new Slice(dropFromFragment(g,et,1),et,ot)}placeNodes({sliceDepth:g,frontierDepth:et,parent:ot,inject:ct,wrap:ut}){for(;this.depth>et;)this.closeFrontierNode();if(ut)for(let Ht=0;Ht<ut.length;Ht++)this.openFrontierNode(ut[Ht]);let dt=this.unplaced,ft=ot?ot.content:dt.content,St=dt.openStart-g,kt=0,Tt=[],{match:Rt,type:jt}=this.frontier[et];if(ct){for(let Ht=0;Ht<ct.childCount;Ht++)Tt.push(ct.child(Ht));Rt=Rt.matchFragment(ct)}let $t=ft.size+g-(dt.content.size-dt.openEnd);for(;kt<ft.childCount;){let Ht=ft.child(kt),Kt=Rt.matchType(Ht.type);if(!Kt)break;kt++,(kt>1||St==0||Ht.content.size)&&(Rt=Kt,Tt.push(closeNodeStart(Ht.mark(jt.allowedMarks(Ht.marks)),kt==1?St:0,kt==ft.childCount?$t:-1)))}let Ft=kt==ft.childCount;Ft||($t=-1),this.placed=addToFragment(this.placed,et,Fragment.from(Tt)),this.frontier[et].match=Rt,Ft&&$t<0&&ot&&ot.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let Ht=0,Kt=ft;Ht<$t;Ht++){let Bt=Kt.lastChild;this.frontier.push({type:Bt.type,match:Bt.contentMatchAt(Bt.childCount)}),Kt=Bt.content}this.unplaced=Ft?g==0?Slice.empty:new Slice(dropFromFragment(dt.content,g-1,1),g-1,$t<0?dt.openEnd:g-1):new Slice(dropFromFragment(dt.content,g,kt),dt.openStart,dt.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let g=this.frontier[this.depth],et;if(!g.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,g.type,g.match,!1)||this.$to.depth==this.depth&&(et=this.findCloseLevel(this.$to))&&et.depth==this.depth)return-1;let{depth:ot}=this.$to,ct=this.$to.after(ot);for(;ot>1&&ct==this.$to.end(--ot);)++ct;return ct}findCloseLevel(g){e:for(let et=Math.min(this.depth,g.depth);et>=0;et--){let{match:ot,type:ct}=this.frontier[et],ut=et<g.depth&&g.end(et+1)==g.pos+(g.depth-(et+1)),dt=contentAfterFits(g,et,ct,ot,ut);if(dt){for(let ft=et-1;ft>=0;ft--){let{match:St,type:kt}=this.frontier[ft],Tt=contentAfterFits(g,ft,kt,St,!0);if(!Tt||Tt.childCount)continue e}return{depth:et,fit:dt,move:ut?g.doc.resolve(g.after(et+1)):g}}}}close(g){let et=this.findCloseLevel(g);if(!et)return null;for(;this.depth>et.depth;)this.closeFrontierNode();et.fit.childCount&&(this.placed=addToFragment(this.placed,et.depth,et.fit)),g=et.move;for(let ot=et.depth+1;ot<=g.depth;ot++){let ct=g.node(ot),ut=ct.type.contentMatch.fillBefore(ct.content,!0,g.index(ot));this.openFrontierNode(ct.type,ct.attrs,ut)}return g}openFrontierNode(g,et=null,ot){let ct=this.frontier[this.depth];ct.match=ct.match.matchType(g),this.placed=addToFragment(this.placed,this.depth,Fragment.from(g.create(et,ot))),this.frontier.push({type:g,match:g.contentMatch})}closeFrontierNode(){let et=this.frontier.pop().match.fillBefore(Fragment.empty,!0);et.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,et))}}function dropFromFragment(it,g,et){return g==0?it.cutByIndex(et,it.childCount):it.replaceChild(0,it.firstChild.copy(dropFromFragment(it.firstChild.content,g-1,et)))}function addToFragment(it,g,et){return g==0?it.append(et):it.replaceChild(it.childCount-1,it.lastChild.copy(addToFragment(it.lastChild.content,g-1,et)))}function contentAt(it,g){for(let et=0;et<g;et++)it=it.firstChild.content;return it}function closeNodeStart(it,g,et){if(g<=0)return it;let ot=it.content;return g>1&&(ot=ot.replaceChild(0,closeNodeStart(ot.firstChild,g-1,ot.childCount==1?et-1:0))),g>0&&(ot=it.type.contentMatch.fillBefore(ot).append(ot),et<=0&&(ot=ot.append(it.type.contentMatch.matchFragment(ot).fillBefore(Fragment.empty,!0)))),it.copy(ot)}function contentAfterFits(it,g,et,ot,ct){let ut=it.node(g),dt=ct?it.indexAfter(g):it.index(g);if(dt==ut.childCount&&!et.compatibleContent(ut.type))return null;let ft=ot.fillBefore(ut.content,!0,dt);return ft&&!invalidMarks(et,ut.content,dt)?ft:null}function invalidMarks(it,g,et){for(let ot=et;ot<g.childCount;ot++)if(!it.allowsMarks(g.child(ot).marks))return!0;return!1}function definesContent(it){return it.spec.defining||it.spec.definingForContent}function replaceRange(it,g,et,ot){if(!ot.size)return it.deleteRange(g,et);let ct=it.doc.resolve(g),ut=it.doc.resolve(et);if(fitsTrivially(ct,ut,ot))return it.step(new ReplaceStep(g,et,ot));let dt=coveredDepths(ct,it.doc.resolve(et));dt[dt.length-1]==0&&dt.pop();let ft=-(ct.depth+1);dt.unshift(ft);for(let jt=ct.depth,$t=ct.pos-1;jt>0;jt--,$t--){let Ft=ct.node(jt).type.spec;if(Ft.defining||Ft.definingAsContext||Ft.isolating)break;dt.indexOf(jt)>-1?ft=jt:ct.before(jt)==$t&&dt.splice(1,0,-jt)}let St=dt.indexOf(ft),kt=[],Tt=ot.openStart;for(let jt=ot.content,$t=0;;$t++){let Ft=jt.firstChild;if(kt.push(Ft),$t==ot.openStart)break;jt=Ft.content}for(let jt=Tt-1;jt>=0;jt--){let $t=kt[jt],Ft=definesContent($t.type);if(Ft&&!$t.sameMarkup(ct.node(Math.abs(ft)-1)))Tt=jt;else if(Ft||!$t.type.isTextblock)break}for(let jt=ot.openStart;jt>=0;jt--){let $t=(jt+Tt+1)%(ot.openStart+1),Ft=kt[$t];if(Ft)for(let Ht=0;Ht<dt.length;Ht++){let Kt=dt[(Ht+St)%dt.length],Bt=!0;Kt<0&&(Bt=!1,Kt=-Kt);let Ut=ct.node(Kt-1),Yt=ct.index(Kt-1);if(Ut.canReplaceWith(Yt,Yt,Ft.type,Ft.marks))return it.replace(ct.before(Kt),Bt?ut.after(Kt):et,new Slice(closeFragment(ot.content,0,ot.openStart,$t),$t,ot.openEnd))}}let Rt=it.steps.length;for(let jt=dt.length-1;jt>=0&&(it.replace(g,et,ot),!(it.steps.length>Rt));jt--){let $t=dt[jt];$t<0||(g=ct.before($t),et=ut.after($t))}}function closeFragment(it,g,et,ot,ct){if(g<et){let ut=it.firstChild;it=it.replaceChild(0,ut.copy(closeFragment(ut.content,g+1,et,ot,ut)))}if(g>ot){let ut=ct.contentMatchAt(0),dt=ut.fillBefore(it).append(it);it=dt.append(ut.matchFragment(dt).fillBefore(Fragment.empty,!0))}return it}function replaceRangeWith(it,g,et,ot){if(!ot.isInline&&g==et&&it.doc.resolve(g).parent.content.size){let ct=insertPoint(it.doc,g,ot.type);ct!=null&&(g=et=ct)}it.replaceRange(g,et,new Slice(Fragment.from(ot),0,0))}function deleteRange$1(it,g,et){let ot=it.doc.resolve(g),ct=it.doc.resolve(et),ut=coveredDepths(ot,ct);for(let dt=0;dt<ut.length;dt++){let ft=ut[dt],St=dt==ut.length-1;if(St&&ft==0||ot.node(ft).type.contentMatch.validEnd)return it.delete(ot.start(ft),ct.end(ft));if(ft>0&&(St||ot.node(ft-1).canReplace(ot.index(ft-1),ct.indexAfter(ft-1))))return it.delete(ot.before(ft),ct.after(ft))}for(let dt=1;dt<=ot.depth&&dt<=ct.depth;dt++)if(g-ot.start(dt)==ot.depth-dt&&et>ot.end(dt)&&ct.end(dt)-et!=ct.depth-dt&&ot.start(dt-1)==ct.start(dt-1)&&ot.node(dt-1).canReplace(ot.index(dt-1),ct.index(dt-1)))return it.delete(ot.before(dt),et);it.delete(g,et)}function coveredDepths(it,g){let et=[],ot=Math.min(it.depth,g.depth);for(let ct=ot;ct>=0;ct--){let ut=it.start(ct);if(ut<it.pos-(it.depth-ct)||g.end(ct)>g.pos+(g.depth-ct)||it.node(ct).type.spec.isolating||g.node(ct).type.spec.isolating)break;(ut==g.start(ct)||ct==it.depth&&ct==g.depth&&it.parent.inlineContent&&g.parent.inlineContent&&ct&&g.start(ct-1)==ut-1)&&et.push(ct)}return et}class AttrStep extends Step{constructor(g,et,ot){super(),this.pos=g,this.attr=et,this.value=ot}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at attribute step's position");let ot=Object.create(null);for(let ut in et.attrs)ot[ut]=et.attrs[ut];ot[this.attr]=this.value;let ct=et.type.create(ot,null,et.marks);return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ct),0,et.isLeaf?0:1))}getMap(){return StepMap.empty}invert(g){return new AttrStep(this.pos,this.attr,g.nodeAt(this.pos).attrs[this.attr])}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AttrStep(et.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.pos!="number"||typeof et.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(et.pos,et.attr,et.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(g,et){super(),this.attr=g,this.value=et}apply(g){let et=Object.create(null);for(let ct in g.attrs)et[ct]=g.attrs[ct];et[this.attr]=this.value;let ot=g.type.create(et,g.content,g.marks);return StepResult.ok(ot)}getMap(){return StepMap.empty}invert(g){return new DocAttrStep(this.attr,g.attrs[this.attr])}map(g){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(et.attr,et.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function it(g){let et=Error.call(this,g);return et.__proto__=it.prototype,et};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(g){this.doc=g,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(g){let et=this.maybeStep(g);if(et.failed)throw new TransformError(et.failed);return this}maybeStep(g){let et=g.apply(this.doc);return et.failed||this.addStep(g,et.doc),et}get docChanged(){return this.steps.length>0}addStep(g,et){this.docs.push(this.doc),this.steps.push(g),this.mapping.appendMap(g.getMap()),this.doc=et}replace(g,et=g,ot=Slice.empty){let ct=replaceStep(this.doc,g,et,ot);return ct&&this.step(ct),this}replaceWith(g,et,ot){return this.replace(g,et,new Slice(Fragment.from(ot),0,0))}delete(g,et){return this.replace(g,et,Slice.empty)}insert(g,et){return this.replaceWith(g,g,et)}replaceRange(g,et,ot){return replaceRange(this,g,et,ot),this}replaceRangeWith(g,et,ot){return replaceRangeWith(this,g,et,ot),this}deleteRange(g,et){return deleteRange$1(this,g,et),this}lift(g,et){return lift$2(this,g,et),this}join(g,et=1){return join(this,g,et),this}wrap(g,et){return wrap(this,g,et),this}setBlockType(g,et=g,ot,ct=null){return setBlockType$1(this,g,et,ot,ct),this}setNodeMarkup(g,et,ot=null,ct){return setNodeMarkup(this,g,et,ot,ct),this}setNodeAttribute(g,et,ot){return this.step(new AttrStep(g,et,ot)),this}setDocAttribute(g,et){return this.step(new DocAttrStep(g,et)),this}addNodeMark(g,et){return this.step(new AddNodeMarkStep(g,et)),this}removeNodeMark(g,et){let ot=this.doc.nodeAt(g);if(!ot)throw new RangeError("No node at position "+g);if(et instanceof Mark$1)et.isInSet(ot.marks)&&this.step(new RemoveNodeMarkStep(g,et));else{let ct=ot.marks,ut,dt=[];for(;ut=et.isInSet(ct);)dt.push(new RemoveNodeMarkStep(g,ut)),ct=ut.removeFromSet(ct);for(let ft=dt.length-1;ft>=0;ft--)this.step(dt[ft])}return this}split(g,et=1,ot){return split(this,g,et,ot),this}addMark(g,et,ot){return addMark(this,g,et,ot),this}removeMark(g,et,ot){return removeMark(this,g,et,ot),this}clearIncompatible(g,et,ot){return clearIncompatible(this,g,et,ot),this}}const classesById=Object.create(null);class Selection{constructor(g,et,ot){this.$anchor=g,this.$head=et,this.ranges=ot||[new SelectionRange(g.min(et),g.max(et))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let g=this.ranges;for(let et=0;et<g.length;et++)if(g[et].$from.pos!=g[et].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(g,et=Slice.empty){let ot=et.content.lastChild,ct=null;for(let ft=0;ft<et.openEnd;ft++)ct=ot,ot=ot.lastChild;let ut=g.steps.length,dt=this.ranges;for(let ft=0;ft<dt.length;ft++){let{$from:St,$to:kt}=dt[ft],Tt=g.mapping.slice(ut);g.replaceRange(Tt.map(St.pos),Tt.map(kt.pos),ft?Slice.empty:et),ft==0&&selectionToInsertionEnd$1(g,ut,(ot?ot.isInline:ct&&ct.isTextblock)?-1:1)}}replaceWith(g,et){let ot=g.steps.length,ct=this.ranges;for(let ut=0;ut<ct.length;ut++){let{$from:dt,$to:ft}=ct[ut],St=g.mapping.slice(ot),kt=St.map(dt.pos),Tt=St.map(ft.pos);ut?g.deleteRange(kt,Tt):(g.replaceRangeWith(kt,Tt,et),selectionToInsertionEnd$1(g,ot,et.isInline?-1:1))}}static findFrom(g,et,ot=!1){let ct=g.parent.inlineContent?new TextSelection(g):findSelectionIn(g.node(0),g.parent,g.pos,g.index(),et,ot);if(ct)return ct;for(let ut=g.depth-1;ut>=0;ut--){let dt=et<0?findSelectionIn(g.node(0),g.node(ut),g.before(ut+1),g.index(ut),et,ot):findSelectionIn(g.node(0),g.node(ut),g.after(ut+1),g.index(ut)+1,et,ot);if(dt)return dt}return null}static near(g,et=1){return this.findFrom(g,et)||this.findFrom(g,-et)||new AllSelection(g.node(0))}static atStart(g){return findSelectionIn(g,g,0,0,1)||new AllSelection(g)}static atEnd(g){return findSelectionIn(g,g,g.content.size,g.childCount,-1)||new AllSelection(g)}static fromJSON(g,et){if(!et||!et.type)throw new RangeError("Invalid input for Selection.fromJSON");let ot=classesById[et.type];if(!ot)throw new RangeError(`No selection type ${et.type} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in classesById)throw new RangeError("Duplicate use of selection JSON ID "+g);return classesById[g]=et,et.prototype.jsonID=g,et}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(g,et){this.$from=g,this.$to=et}}let warnedAboutTextSelection=!1;function checkTextSelection(it){!warnedAboutTextSelection&&!it.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+it.parent.type.name+")"))}class TextSelection extends Selection{constructor(g,et=g){checkTextSelection(g),checkTextSelection(et),super(g,et)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(g,et){let ot=g.resolve(et.map(this.head));if(!ot.parent.inlineContent)return Selection.near(ot);let ct=g.resolve(et.map(this.anchor));return new TextSelection(ct.parent.inlineContent?ct:ot,ot)}replace(g,et=Slice.empty){if(super.replace(g,et),et==Slice.empty){let ot=this.$from.marksAcross(this.$to);ot&&g.ensureMarks(ot)}}eq(g){return g instanceof TextSelection&&g.anchor==this.anchor&&g.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(g,et){if(typeof et.anchor!="number"||typeof et.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(g.resolve(et.anchor),g.resolve(et.head))}static create(g,et,ot=et){let ct=g.resolve(et);return new this(ct,ot==et?ct:g.resolve(ot))}static between(g,et,ot){let ct=g.pos-et.pos;if((!ot||ct)&&(ot=ct>=0?1:-1),!et.parent.inlineContent){let ut=Selection.findFrom(et,ot,!0)||Selection.findFrom(et,-ot,!0);if(ut)et=ut.$head;else return Selection.near(et,ot)}return g.parent.inlineContent||(ct==0?g=et:(g=(Selection.findFrom(g,-ot,!0)||Selection.findFrom(g,ot,!0)).$anchor,g.pos<et.pos!=ct<0&&(g=et))),new TextSelection(g,et)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(g,et){this.anchor=g,this.head=et}map(g){return new TextBookmark(g.map(this.anchor),g.map(this.head))}resolve(g){return TextSelection.between(g.resolve(this.anchor),g.resolve(this.head))}}class NodeSelection extends Selection{constructor(g){let et=g.nodeAfter,ot=g.node(0).resolve(g.pos+et.nodeSize);super(g,ot),this.node=et}map(g,et){let{deleted:ot,pos:ct}=et.mapResult(this.anchor),ut=g.resolve(ct);return ot?Selection.near(ut):new NodeSelection(ut)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(g){return g instanceof NodeSelection&&g.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(g,et){if(typeof et.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(g.resolve(et.anchor))}static create(g,et){return new NodeSelection(g.resolve(et))}static isSelectable(g){return!g.isText&&g.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(g){this.anchor=g}map(g){let{deleted:et,pos:ot}=g.mapResult(this.anchor);return et?new TextBookmark(ot,ot):new NodeBookmark(ot)}resolve(g){let et=g.resolve(this.anchor),ot=et.nodeAfter;return ot&&NodeSelection.isSelectable(ot)?new NodeSelection(et):Selection.near(et)}}class AllSelection extends Selection{constructor(g){super(g.resolve(0),g.resolve(g.content.size))}replace(g,et=Slice.empty){if(et==Slice.empty){g.delete(0,g.doc.content.size);let ot=Selection.atStart(g.doc);ot.eq(g.selection)||g.setSelection(ot)}else super.replace(g,et)}toJSON(){return{type:"all"}}static fromJSON(g){return new AllSelection(g)}map(g){return new AllSelection(g)}eq(g){return g instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(it){return new AllSelection(it)}};function findSelectionIn(it,g,et,ot,ct,ut=!1){if(g.inlineContent)return TextSelection.create(it,et);for(let dt=ot-(ct>0?0:1);ct>0?dt<g.childCount:dt>=0;dt+=ct){let ft=g.child(dt);if(ft.isAtom){if(!ut&&NodeSelection.isSelectable(ft))return NodeSelection.create(it,et-(ct<0?ft.nodeSize:0))}else{let St=findSelectionIn(it,ft,et+ct,ct<0?ft.childCount:0,ct,ut);if(St)return St}et+=ft.nodeSize*ct}return null}function selectionToInsertionEnd$1(it,g,et){let ot=it.steps.length-1;if(ot<g)return;let ct=it.steps[ot];if(!(ct instanceof ReplaceStep||ct instanceof ReplaceAroundStep))return;let ut=it.mapping.maps[ot],dt;ut.forEach((ft,St,kt,Tt)=>{dt==null&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(g){super(g.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=g.selection,this.storedMarks=g.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(g){if(g.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=g,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(g){return this.storedMarks=g,this.updated|=UPDATED_MARKS,this}ensureMarks(g){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),g)||this.setStoredMarks(g),this}addStoredMark(g){return this.ensureMarks(g.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(g){return this.ensureMarks(g.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(g,et){super.addStep(g,et),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(g){return this.time=g,this}replaceSelection(g){return this.selection.replace(this,g),this}replaceSelectionWith(g,et=!0){let ot=this.selection;return et&&(g=g.mark(this.storedMarks||(ot.empty?ot.$from.marks():ot.$from.marksAcross(ot.$to)||Mark$1.none))),ot.replaceWith(this,g),this}deleteSelection(){return this.selection.replace(this),this}insertText(g,et,ot){let ct=this.doc.type.schema;if(et==null)return g?this.replaceSelectionWith(ct.text(g),!0):this.deleteSelection();{if(ot==null&&(ot=et),ot=ot??et,!g)return this.deleteRange(et,ot);let ut=this.storedMarks;if(!ut){let dt=this.doc.resolve(et);ut=ot==et?dt.marks():dt.marksAcross(this.doc.resolve(ot))}return this.replaceRangeWith(et,ot,ct.text(g,ut)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(g,et){return this.meta[typeof g=="string"?g:g.key]=et,this}getMeta(g){return this.meta[typeof g=="string"?g:g.key]}get isGeneric(){for(let g in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(it,g){return!g||!it?it:it.bind(g)}class FieldDesc{constructor(g,et,ot){this.name=g,this.init=bind(et.init,ot),this.apply=bind(et.apply,ot)}}const baseFields=[new FieldDesc("doc",{init(it){return it.doc||it.schema.topNodeType.createAndFill()},apply(it){return it.doc}}),new FieldDesc("selection",{init(it,g){return it.selection||Selection.atStart(g.doc)},apply(it){return it.selection}}),new FieldDesc("storedMarks",{init(it){return it.storedMarks||null},apply(it,g,et,ot){return ot.selection.$cursor?it.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(it,g){return it.scrolledIntoView?g+1:g}})];class Configuration{constructor(g,et){this.schema=g,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),et&&et.forEach(ot=>{if(this.pluginsByKey[ot.key])throw new RangeError("Adding different instances of a keyed plugin ("+ot.key+")");this.plugins.push(ot),this.pluginsByKey[ot.key]=ot,ot.spec.state&&this.fields.push(new FieldDesc(ot.key,ot.spec.state,ot))})}}class EditorState{constructor(g){this.config=g}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(g){return this.applyTransaction(g).state}filterTransaction(g,et=-1){for(let ot=0;ot<this.config.plugins.length;ot++)if(ot!=et){let ct=this.config.plugins[ot];if(ct.spec.filterTransaction&&!ct.spec.filterTransaction.call(ct,g,this))return!1}return!0}applyTransaction(g){if(!this.filterTransaction(g))return{state:this,transactions:[]};let et=[g],ot=this.applyInner(g),ct=null;for(;;){let ut=!1;for(let dt=0;dt<this.config.plugins.length;dt++){let ft=this.config.plugins[dt];if(ft.spec.appendTransaction){let St=ct?ct[dt].n:0,kt=ct?ct[dt].state:this,Tt=St<et.length&&ft.spec.appendTransaction.call(ft,St?et.slice(St):et,kt,ot);if(Tt&&ot.filterTransaction(Tt,dt)){if(Tt.setMeta("appendedTransaction",g),!ct){ct=[];for(let Rt=0;Rt<this.config.plugins.length;Rt++)ct.push(Rt<dt?{state:ot,n:et.length}:{state:this,n:0})}et.push(Tt),ot=ot.applyInner(Tt),ut=!0}ct&&(ct[dt]={state:ot,n:et.length})}}if(!ut)return{state:ot,transactions:et}}}applyInner(g){if(!g.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let et=new EditorState(this.config),ot=this.config.fields;for(let ct=0;ct<ot.length;ct++){let ut=ot[ct];et[ut.name]=ut.apply(g,this[ut.name],this,et)}return et}get tr(){return new Transaction(this)}static create(g){let et=new Configuration(g.doc?g.doc.type.schema:g.schema,g.plugins),ot=new EditorState(et);for(let ct=0;ct<et.fields.length;ct++)ot[et.fields[ct].name]=et.fields[ct].init(g,ot);return ot}reconfigure(g){let et=new Configuration(this.schema,g.plugins),ot=et.fields,ct=new EditorState(et);for(let ut=0;ut<ot.length;ut++){let dt=ot[ut].name;ct[dt]=this.hasOwnProperty(dt)?this[dt]:ot[ut].init(g,ct)}return ct}toJSON(g){let et={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(et.storedMarks=this.storedMarks.map(ot=>ot.toJSON())),g&&typeof g=="object")for(let ot in g){if(ot=="doc"||ot=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let ct=g[ot],ut=ct.spec.state;ut&&ut.toJSON&&(et[ot]=ut.toJSON.call(ct,this[ct.key]))}return et}static fromJSON(g,et,ot){if(!et)throw new RangeError("Invalid input for EditorState.fromJSON");if(!g.schema)throw new RangeError("Required config field 'schema' missing");let ct=new Configuration(g.schema,g.plugins),ut=new EditorState(ct);return ct.fields.forEach(dt=>{if(dt.name=="doc")ut.doc=Node$1.fromJSON(g.schema,et.doc);else if(dt.name=="selection")ut.selection=Selection.fromJSON(ut.doc,et.selection);else if(dt.name=="storedMarks")et.storedMarks&&(ut.storedMarks=et.storedMarks.map(g.schema.markFromJSON));else{if(ot)for(let ft in ot){let St=ot[ft],kt=St.spec.state;if(St.key==dt.name&&kt&&kt.fromJSON&&Object.prototype.hasOwnProperty.call(et,ft)){ut[dt.name]=kt.fromJSON.call(St,g,et[ft],ut);return}}ut[dt.name]=dt.init(g,ut)}}),ut}}function bindProps(it,g,et){for(let ot in it){let ct=it[ot];ct instanceof Function?ct=ct.bind(g):ot=="handleDOMEvents"&&(ct=bindProps(ct,g,{})),et[ot]=ct}return et}class Plugin{constructor(g){this.spec=g,this.props={},g.props&&bindProps(g.props,this,this.props),this.key=g.key?g.key.key:createKey("plugin")}getState(g){return g[this.key]}}const keys=Object.create(null);function createKey(it){return it in keys?it+"$"+ ++keys[it]:(keys[it]=0,it+"$")}class PluginKey{constructor(g="key"){this.key=createKey(g)}get(g){return g.config.pluginsByKey[this.key]}getState(g){return g[this.key]}}const deleteSelection$1=(it,g)=>it.selection.empty?!1:(g&&g(it.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("backward",it):et.parentOffset>0)?null:et}const joinBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ct=findCutBefore(ot);if(!ct){let dt=ot.blockRange(),ft=dt&&liftTarget(dt);return ft==null?!1:(g&&g(it.tr.lift(dt,ft).scrollIntoView()),!0)}let ut=ct.nodeBefore;if(deleteBarrier(it,ct,g,-1))return!0;if(ot.parent.content.size==0&&(textblockAt(ut,"end")||NodeSelection.isSelectable(ut)))for(let dt=ot.depth;;dt--){let ft=replaceStep(it.doc,ot.before(dt),ot.after(dt),Slice.empty);if(ft&&ft.slice.size<ft.to-ft.from){if(g){let St=it.tr.step(ft);St.setSelection(textblockAt(ut,"end")?Selection.findFrom(St.doc.resolve(St.mapping.map(ct.pos,-1)),-1):NodeSelection.create(St.doc,ct.pos-ut.nodeSize)),g(St.scrollIntoView())}return!0}if(dt==1||ot.node(dt-1).childCount>1)break}return ut.isAtom&&ct.depth==ot.depth-1?(g&&g(it.tr.delete(ct.pos-ut.nodeSize,ct.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ct=findCutBefore(ot);return ct?joinTextblocksAround(it,ct,g):!1},joinTextblockForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ct=findCutAfter(ot);return ct?joinTextblocksAround(it,ct,g):!1};function joinTextblocksAround(it,g,et){let ot=g.nodeBefore,ct=ot,ut=g.pos-1;for(;!ct.isTextblock;ut--){if(ct.type.spec.isolating)return!1;let Tt=ct.lastChild;if(!Tt)return!1;ct=Tt}let dt=g.nodeAfter,ft=dt,St=g.pos+1;for(;!ft.isTextblock;St++){if(ft.type.spec.isolating)return!1;let Tt=ft.firstChild;if(!Tt)return!1;ft=Tt}let kt=replaceStep(it.doc,ut,St,Slice.empty);if(!kt||kt.from!=ut||kt instanceof ReplaceStep&&kt.slice.size>=St-ut)return!1;if(et){let Tt=it.tr.step(kt);Tt.setSelection(TextSelection.create(Tt.doc,ut)),et(Tt.scrollIntoView())}return!0}function textblockAt(it,g,et=!1){for(let ot=it;ot;ot=g=="start"?ot.firstChild:ot.lastChild){if(ot.isTextblock)return!0;if(et&&ot.childCount!=1)return!1}return!1}const selectNodeBackward$1=(it,g,et)=>{let{$head:ot,empty:ct}=it.selection,ut=ot;if(!ct)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("backward",it):ot.parentOffset>0)return!1;ut=findCutBefore(ot)}let dt=ut&&ut.nodeBefore;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ut.pos-dt.nodeSize)).scrollIntoView()),!0)};function findCutBefore(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){if(it.index(g)>0)return it.doc.resolve(it.before(g+1));if(it.node(g).type.spec.isolating)break}return null}function atBlockEnd(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("forward",it):et.parentOffset<et.parent.content.size)?null:et}const joinForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ct=findCutAfter(ot);if(!ct)return!1;let ut=ct.nodeAfter;if(deleteBarrier(it,ct,g,1))return!0;if(ot.parent.content.size==0&&(textblockAt(ut,"start")||NodeSelection.isSelectable(ut))){let dt=replaceStep(it.doc,ot.before(),ot.after(),Slice.empty);if(dt&&dt.slice.size<dt.to-dt.from){if(g){let ft=it.tr.step(dt);ft.setSelection(textblockAt(ut,"start")?Selection.findFrom(ft.doc.resolve(ft.mapping.map(ct.pos)),1):NodeSelection.create(ft.doc,ft.mapping.map(ct.pos))),g(ft.scrollIntoView())}return!0}}return ut.isAtom&&ct.depth==ot.depth-1?(g&&g(it.tr.delete(ct.pos,ct.pos+ut.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(it,g,et)=>{let{$head:ot,empty:ct}=it.selection,ut=ot;if(!ct)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("forward",it):ot.parentOffset<ot.parent.content.size)return!1;ut=findCutAfter(ot)}let dt=ut&&ut.nodeAfter;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ut.pos)).scrollIntoView()),!0)};function findCutAfter(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){let et=it.node(g);if(it.index(g)+1<et.childCount)return it.doc.resolve(it.after(g+1));if(et.type.spec.isolating)break}return null}const joinUp$1=(it,g)=>{let et=it.selection,ot=et instanceof NodeSelection,ct;if(ot){if(et.node.isTextblock||!canJoin(it.doc,et.from))return!1;ct=et.from}else if(ct=joinPoint(it.doc,et.from,-1),ct==null)return!1;if(g){let ut=it.tr.join(ct);ot&&ut.setSelection(NodeSelection.create(ut.doc,ct-it.doc.resolve(ct).nodeBefore.nodeSize)),g(ut.scrollIntoView())}return!0},joinDown$1=(it,g)=>{let et=it.selection,ot;if(et instanceof NodeSelection){if(et.node.isTextblock||!canJoin(it.doc,et.to))return!1;ot=et.to}else if(ot=joinPoint(it.doc,et.to,1),ot==null)return!1;return g&&g(it.tr.join(ot).scrollIntoView()),!0},lift$1=(it,g)=>{let{$from:et,$to:ot}=it.selection,ct=et.blockRange(ot),ut=ct&&liftTarget(ct);return ut==null?!1:(g&&g(it.tr.lift(ct,ut).scrollIntoView()),!0)},newlineInCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;return!et.parent.type.spec.code||!et.sameParent(ot)?!1:(g&&g(it.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(it){for(let g=0;g<it.edgeCount;g++){let{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}const exitCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;if(!et.parent.type.spec.code||!et.sameParent(ot))return!1;let ct=et.node(-1),ut=et.indexAfter(-1),dt=defaultBlockAt$1(ct.contentMatchAt(ut));if(!dt||!ct.canReplaceWith(ut,ut,dt))return!1;if(g){let ft=et.after(),St=it.tr.replaceWith(ft,ft,dt.createAndFill());St.setSelection(Selection.near(St.doc.resolve(ft),1)),g(St.scrollIntoView())}return!0},createParagraphNear$1=(it,g)=>{let et=it.selection,{$from:ot,$to:ct}=et;if(et instanceof AllSelection||ot.parent.inlineContent||ct.parent.inlineContent)return!1;let ut=defaultBlockAt$1(ct.parent.contentMatchAt(ct.indexAfter()));if(!ut||!ut.isTextblock)return!1;if(g){let dt=(!ot.parentOffset&&ct.index()<ct.parent.childCount?ot:ct).pos,ft=it.tr.insert(dt,ut.createAndFill());ft.setSelection(TextSelection.create(ft.doc,dt+1)),g(ft.scrollIntoView())}return!0},liftEmptyBlock$1=(it,g)=>{let{$cursor:et}=it.selection;if(!et||et.parent.content.size)return!1;if(et.depth>1&&et.after()!=et.end(-1)){let ut=et.before();if(canSplit(it.doc,ut))return g&&g(it.tr.split(ut).scrollIntoView()),!0}let ot=et.blockRange(),ct=ot&&liftTarget(ot);return ct==null?!1:(g&&g(it.tr.lift(ot,ct).scrollIntoView()),!0)},selectParentNode$1=(it,g)=>{let{$from:et,to:ot}=it.selection,ct,ut=et.sharedDepth(ot);return ut==0?!1:(ct=et.before(ut),g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ct))),!0)};function joinMaybeClear(it,g,et){let ot=g.nodeBefore,ct=g.nodeAfter,ut=g.index();return!ot||!ct||!ot.type.compatibleContent(ct.type)?!1:!ot.content.size&&g.parent.canReplace(ut-1,ut)?(et&&et(it.tr.delete(g.pos-ot.nodeSize,g.pos).scrollIntoView()),!0):!g.parent.canReplace(ut,ut+1)||!(ct.isTextblock||canJoin(it.doc,g.pos))?!1:(et&&et(it.tr.join(g.pos).scrollIntoView()),!0)}function deleteBarrier(it,g,et,ot){let ct=g.nodeBefore,ut=g.nodeAfter,dt,ft,St=ct.type.spec.isolating||ut.type.spec.isolating;if(!St&&joinMaybeClear(it,g,et))return!0;let kt=!St&&g.parent.canReplace(g.index(),g.index()+1);if(kt&&(dt=(ft=ct.contentMatchAt(ct.childCount)).findWrapping(ut.type))&&ft.matchType(dt[0]||ut.type).validEnd){if(et){let $t=g.pos+ut.nodeSize,Ft=Fragment.empty;for(let Bt=dt.length-1;Bt>=0;Bt--)Ft=Fragment.from(dt[Bt].create(null,Ft));Ft=Fragment.from(ct.copy(Ft));let Ht=it.tr.step(new ReplaceAroundStep(g.pos-1,$t,g.pos,$t,new Slice(Ft,1,0),dt.length,!0)),Kt=Ht.doc.resolve($t+2*dt.length);Kt.nodeAfter&&Kt.nodeAfter.type==ct.type&&canJoin(Ht.doc,Kt.pos)&&Ht.join(Kt.pos),et(Ht.scrollIntoView())}return!0}let Tt=ut.type.spec.isolating||ot>0&&St?null:Selection.findFrom(g,1),Rt=Tt&&Tt.$from.blockRange(Tt.$to),jt=Rt&&liftTarget(Rt);if(jt!=null&&jt>=g.depth)return et&&et(it.tr.lift(Rt,jt).scrollIntoView()),!0;if(kt&&textblockAt(ut,"start",!0)&&textblockAt(ct,"end")){let $t=ct,Ft=[];for(;Ft.push($t),!$t.isTextblock;)$t=$t.lastChild;let Ht=ut,Kt=1;for(;!Ht.isTextblock;Ht=Ht.firstChild)Kt++;if($t.canReplace($t.childCount,$t.childCount,Ht.content)){if(et){let Bt=Fragment.empty;for(let Yt=Ft.length-1;Yt>=0;Yt--)Bt=Fragment.from(Ft[Yt].copy(Bt));let Ut=it.tr.step(new ReplaceAroundStep(g.pos-Ft.length,g.pos+ut.nodeSize,g.pos+Kt,g.pos+ut.nodeSize-Kt,new Slice(Bt,Ft.length,0),0,!0));et(Ut.scrollIntoView())}return!0}}return!1}function selectTextblockSide(it){return function(g,et){let ot=g.selection,ct=it<0?ot.$from:ot.$to,ut=ct.depth;for(;ct.node(ut).isInline;){if(!ut)return!1;ut--}return ct.node(ut).isTextblock?(et&&et(g.tr.setSelection(TextSelection.create(g.doc,it<0?ct.start(ut):ct.end(ut)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(it,g=null){return function(et,ot){let{$from:ct,$to:ut}=et.selection,dt=ct.blockRange(ut),ft=dt&&findWrapping(dt,it,g);return ft?(ot&&ot(et.tr.wrap(dt,ft).scrollIntoView()),!0):!1}}function setBlockType(it,g=null){return function(et,ot){let ct=!1;for(let ut=0;ut<et.selection.ranges.length&&!ct;ut++){let{$from:{pos:dt},$to:{pos:ft}}=et.selection.ranges[ut];et.doc.nodesBetween(dt,ft,(St,kt)=>{if(ct)return!1;if(!(!St.isTextblock||St.hasMarkup(it,g)))if(St.type==it)ct=!0;else{let Tt=et.doc.resolve(kt),Rt=Tt.index();ct=Tt.parent.canReplaceWith(Rt,Rt+1,it)}})}if(!ct)return!1;if(ot){let ut=et.tr;for(let dt=0;dt<et.selection.ranges.length;dt++){let{$from:{pos:ft},$to:{pos:St}}=et.selection.ranges[dt];ut.setBlockType(ft,St,it,g)}ot(ut.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(it,g=null){return function(et,ot){let{$from:ct,$to:ut}=et.selection,dt=ct.blockRange(ut);if(!dt)return!1;let ft=ot?et.tr:null;return wrapRangeInList(ft,dt,it,g)?(ot&&ot(ft.scrollIntoView()),!0):!1}}function wrapRangeInList(it,g,et,ot=null){let ct=!1,ut=g,dt=g.$from.doc;if(g.depth>=2&&g.$from.node(g.depth-1).type.compatibleContent(et)&&g.startIndex==0){if(g.$from.index(g.depth-1)==0)return!1;let St=dt.resolve(g.start-2);ut=new NodeRange(St,St,g.depth),g.endIndex<g.parent.childCount&&(g=new NodeRange(g.$from,dt.resolve(g.$to.end(g.depth)),g.depth)),ct=!0}let ft=findWrapping(ut,et,ot,g);return ft?(it&&doWrapInList(it,g,ft,ct,et),!0):!1}function doWrapInList(it,g,et,ot,ct){let ut=Fragment.empty;for(let Tt=et.length-1;Tt>=0;Tt--)ut=Fragment.from(et[Tt].type.create(et[Tt].attrs,ut));it.step(new ReplaceAroundStep(g.start-(ot?2:0),g.end,g.start,g.end,new Slice(ut,0,0),et.length,!0));let dt=0;for(let Tt=0;Tt<et.length;Tt++)et[Tt].type==ct&&(dt=Tt+1);let ft=et.length-dt,St=g.start+et.length-(ot?2:0),kt=g.parent;for(let Tt=g.startIndex,Rt=g.endIndex,jt=!0;Tt<Rt;Tt++,jt=!1)!jt&&canSplit(it.doc,St,ft)&&(it.split(St,ft),St+=2*ft),St+=kt.child(Tt).nodeSize;return it}function liftListItem$1(it){return function(g,et){let{$from:ot,$to:ct}=g.selection,ut=ot.blockRange(ct,dt=>dt.childCount>0&&dt.firstChild.type==it);return ut?et?ot.node(ut.depth-1).type==it?liftToOuterList(g,et,it,ut):liftOutOfList(g,et,ut):!0:!1}}function liftToOuterList(it,g,et,ot){let ct=it.tr,ut=ot.end,dt=ot.$to.end(ot.depth);ut<dt&&(ct.step(new ReplaceAroundStep(ut-1,dt,ut,dt,new Slice(Fragment.from(et.create(null,ot.parent.copy())),1,0),1,!0)),ot=new NodeRange(ct.doc.resolve(ot.$from.pos),ct.doc.resolve(dt),ot.depth));const ft=liftTarget(ot);if(ft==null)return!1;ct.lift(ot,ft);let St=ct.doc.resolve(ct.mapping.map(ut,-1)-1);return canJoin(ct.doc,St.pos)&&St.nodeBefore.type==St.nodeAfter.type&&ct.join(St.pos),g(ct.scrollIntoView()),!0}function liftOutOfList(it,g,et){let ot=it.tr,ct=et.parent;for(let $t=et.end,Ft=et.endIndex-1,Ht=et.startIndex;Ft>Ht;Ft--)$t-=ct.child(Ft).nodeSize,ot.delete($t-1,$t+1);let ut=ot.doc.resolve(et.start),dt=ut.nodeAfter;if(ot.mapping.map(et.end)!=et.start+ut.nodeAfter.nodeSize)return!1;let ft=et.startIndex==0,St=et.endIndex==ct.childCount,kt=ut.node(-1),Tt=ut.index(-1);if(!kt.canReplace(Tt+(ft?0:1),Tt+1,dt.content.append(St?Fragment.empty:Fragment.from(ct))))return!1;let Rt=ut.pos,jt=Rt+dt.nodeSize;return ot.step(new ReplaceAroundStep(Rt-(ft?1:0),jt+(St?1:0),Rt+1,jt-1,new Slice((ft?Fragment.empty:Fragment.from(ct.copy(Fragment.empty))).append(St?Fragment.empty:Fragment.from(ct.copy(Fragment.empty))),ft?0:1,St?0:1),ft?0:1)),g(ot.scrollIntoView()),!0}function sinkListItem$1(it){return function(g,et){let{$from:ot,$to:ct}=g.selection,ut=ot.blockRange(ct,kt=>kt.childCount>0&&kt.firstChild.type==it);if(!ut)return!1;let dt=ut.startIndex;if(dt==0)return!1;let ft=ut.parent,St=ft.child(dt-1);if(St.type!=it)return!1;if(et){let kt=St.lastChild&&St.lastChild.type==ft.type,Tt=Fragment.from(kt?it.create():null),Rt=new Slice(Fragment.from(it.create(null,Fragment.from(ft.type.create(null,Tt)))),kt?3:1,0),jt=ut.start,$t=ut.end;et(g.tr.step(new ReplaceAroundStep(jt-(kt?3:1),$t,jt,$t,Rt,1,!0)).scrollIntoView())}return!0}}const domIndex=function(it){for(var g=0;;g++)if(it=it.previousSibling,!it)return g},parentNode=function(it){let g=it.assignedSlot||it.parentNode;return g&&g.nodeType==11?g.host:g};let reusedRange=null;const textRange=function(it,g,et){let ot=reusedRange||(reusedRange=document.createRange());return ot.setEnd(it,et??it.nodeValue.length),ot.setStart(it,g||0),ot},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(it,g,et,ot){return et&&(scanFor(it,g,et,ot,-1)||scanFor(it,g,et,ot,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(it,g,et,ot,ct){for(var ut;;){if(it==et&&g==ot)return!0;if(g==(ct<0?0:nodeSize(it))){let dt=it.parentNode;if(!dt||dt.nodeType!=1||hasBlockDesc(it)||atomElements.test(it.nodeName)||it.contentEditable=="false")return!1;g=domIndex(it)+(ct<0?0:1),it=dt}else if(it.nodeType==1){let dt=it.childNodes[g+(ct<0?-1:0)];if(dt.nodeType==1&&dt.contentEditable=="false")if(!((ut=dt.pmViewDesc)===null||ut===void 0)&&ut.ignoreForSelection)g+=ct;else return!1;else it=dt,g=ct<0?nodeSize(it):0}else return!1}}function nodeSize(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function textNodeBefore$1(it,g){for(;;){if(it.nodeType==3&&g)return it;if(it.nodeType==1&&g>0){if(it.contentEditable=="false")return null;it=it.childNodes[g-1],g=nodeSize(it)}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it),it=it.parentNode;else return null}}function textNodeAfter$1(it,g){for(;;){if(it.nodeType==3&&g<it.nodeValue.length)return it;if(it.nodeType==1&&g<it.childNodes.length){if(it.contentEditable=="false")return null;it=it.childNodes[g],g=0}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it)+1,it=it.parentNode;else return null}}function isOnEdge(it,g,et){for(let ot=g==0,ct=g==nodeSize(it);ot||ct;){if(it==et)return!0;let ut=domIndex(it);if(it=it.parentNode,!it)return!1;ot=ot&&ut==0,ct=ct&&ut==nodeSize(it)}}function hasBlockDesc(it){let g;for(let et=it;et&&!(g=et.pmViewDesc);et=et.parentNode);return g&&g.node&&g.node.isBlock&&(g.dom==it||g.contentDOM==it)}const selectionCollapsed=function(it){return it.focusNode&&isEquivalentPosition(it.focusNode,it.focusOffset,it.anchorNode,it.anchorOffset)};function keyEvent(it,g){let et=document.createEvent("Event");return et.initEvent("keydown",!0,!0),et.keyCode=it,et.key=et.code=g,et}function deepActiveElement(it){let g=it.activeElement;for(;g&&g.shadowRoot;)g=g.shadowRoot.activeElement;return g}function caretFromPoint(it,g,et){if(it.caretPositionFromPoint)try{let ot=it.caretPositionFromPoint(g,et);if(ot)return{node:ot.offsetNode,offset:Math.min(nodeSize(ot.offsetNode),ot.offset)}}catch{}if(it.caretRangeFromPoint){let ot=it.caretRangeFromPoint(g,et);if(ot)return{node:ot.startContainer,offset:Math.min(nodeSize(ot.startContainer),ot.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(it){let g=it.defaultView&&it.defaultView.visualViewport;return g?{left:0,right:g.width,top:0,bottom:g.height}:{left:0,right:it.documentElement.clientWidth,top:0,bottom:it.documentElement.clientHeight}}function getSide(it,g){return typeof it=="number"?it:it[g]}function clientRect(it){let g=it.getBoundingClientRect(),et=g.width/it.offsetWidth||1,ot=g.height/it.offsetHeight||1;return{left:g.left,right:g.left+it.clientWidth*et,top:g.top,bottom:g.top+it.clientHeight*ot}}function scrollRectIntoView(it,g,et){let ot=it.someProp("scrollThreshold")||0,ct=it.someProp("scrollMargin")||5,ut=it.dom.ownerDocument;for(let dt=et||it.dom;dt;){if(dt.nodeType!=1){dt=parentNode(dt);continue}let ft=dt,St=ft==ut.body,kt=St?windowRect(ut):clientRect(ft),Tt=0,Rt=0;if(g.top<kt.top+getSide(ot,"top")?Rt=-(kt.top-g.top+getSide(ct,"top")):g.bottom>kt.bottom-getSide(ot,"bottom")&&(Rt=g.bottom-g.top>kt.bottom-kt.top?g.top+getSide(ct,"top")-kt.top:g.bottom-kt.bottom+getSide(ct,"bottom")),g.left<kt.left+getSide(ot,"left")?Tt=-(kt.left-g.left+getSide(ct,"left")):g.right>kt.right-getSide(ot,"right")&&(Tt=g.right-kt.right+getSide(ct,"right")),Tt||Rt)if(St)ut.defaultView.scrollBy(Tt,Rt);else{let $t=ft.scrollLeft,Ft=ft.scrollTop;Rt&&(ft.scrollTop+=Rt),Tt&&(ft.scrollLeft+=Tt);let Ht=ft.scrollLeft-$t,Kt=ft.scrollTop-Ft;g={left:g.left-Ht,top:g.top-Kt,right:g.right-Ht,bottom:g.bottom-Kt}}let jt=St?"fixed":getComputedStyle(dt).position;if(/^(fixed|sticky)$/.test(jt))break;dt=jt=="absolute"?dt.offsetParent:parentNode(dt)}}function storeScrollPos(it){let g=it.dom.getBoundingClientRect(),et=Math.max(0,g.top),ot,ct;for(let ut=(g.left+g.right)/2,dt=et+1;dt<Math.min(innerHeight,g.bottom);dt+=5){let ft=it.root.elementFromPoint(ut,dt);if(!ft||ft==it.dom||!it.dom.contains(ft))continue;let St=ft.getBoundingClientRect();if(St.top>=et-20){ot=ft,ct=St.top;break}}return{refDOM:ot,refTop:ct,stack:scrollStack(it.dom)}}function scrollStack(it){let g=[],et=it.ownerDocument;for(let ot=it;ot&&(g.push({dom:ot,top:ot.scrollTop,left:ot.scrollLeft}),it!=et);ot=parentNode(ot));return g}function resetScrollPos({refDOM:it,refTop:g,stack:et}){let ot=it?it.getBoundingClientRect().top:0;restoreScrollStack(et,ot==0?0:ot-g)}function restoreScrollStack(it,g){for(let et=0;et<it.length;et++){let{dom:ot,top:ct,left:ut}=it[et];ot.scrollTop!=ct+g&&(ot.scrollTop=ct+g),ot.scrollLeft!=ut&&(ot.scrollLeft=ut)}}let preventScrollSupported=null;function focusPreventScroll(it){if(it.setActive)return it.setActive();if(preventScrollSupported)return it.focus(preventScrollSupported);let g=scrollStack(it);it.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(g,0))}function findOffsetInNode(it,g){let et,ot=2e8,ct,ut=0,dt=g.top,ft=g.top,St,kt;for(let Tt=it.firstChild,Rt=0;Tt;Tt=Tt.nextSibling,Rt++){let jt;if(Tt.nodeType==1)jt=Tt.getClientRects();else if(Tt.nodeType==3)jt=textRange(Tt).getClientRects();else continue;for(let $t=0;$t<jt.length;$t++){let Ft=jt[$t];if(Ft.top<=dt&&Ft.bottom>=ft){dt=Math.max(Ft.bottom,dt),ft=Math.min(Ft.top,ft);let Ht=Ft.left>g.left?Ft.left-g.left:Ft.right<g.left?g.left-Ft.right:0;if(Ht<ot){et=Tt,ot=Ht,ct=Ht&&et.nodeType==3?{left:Ft.right<g.left?Ft.right:Ft.left,top:g.top}:g,Tt.nodeType==1&&Ht&&(ut=Rt+(g.left>=(Ft.left+Ft.right)/2?1:0));continue}}else Ft.top>g.top&&!St&&Ft.left<=g.left&&Ft.right>=g.left&&(St=Tt,kt={left:Math.max(Ft.left,Math.min(Ft.right,g.left)),top:Ft.top});!et&&(g.left>=Ft.right&&g.top>=Ft.top||g.left>=Ft.left&&g.top>=Ft.bottom)&&(ut=Rt+1)}}return!et&&St&&(et=St,ct=kt,ot=0),et&&et.nodeType==3?findOffsetInText(et,ct):!et||ot&&et.nodeType==1?{node:it,offset:ut}:findOffsetInNode(et,ct)}function findOffsetInText(it,g){let et=it.nodeValue.length,ot=document.createRange();for(let ct=0;ct<et;ct++){ot.setEnd(it,ct+1),ot.setStart(it,ct);let ut=singleRect(ot,1);if(ut.top!=ut.bottom&&inRect(g,ut))return{node:it,offset:ct+(g.left>=(ut.left+ut.right)/2?1:0)}}return{node:it,offset:0}}function inRect(it,g){return it.left>=g.left-1&&it.left<=g.right+1&&it.top>=g.top-1&&it.top<=g.bottom+1}function targetKludge(it,g){let et=it.parentNode;return et&&/^li$/i.test(et.nodeName)&&g.left<it.getBoundingClientRect().left?et:it}function posFromElement(it,g,et){let{node:ot,offset:ct}=findOffsetInNode(g,et),ut=-1;if(ot.nodeType==1&&!ot.firstChild){let dt=ot.getBoundingClientRect();ut=dt.left!=dt.right&&et.left>(dt.left+dt.right)/2?1:-1}return it.docView.posFromDOM(ot,ct,ut)}function posFromCaret(it,g,et,ot){let ct=-1;for(let ut=g,dt=!1;ut!=it.dom;){let ft=it.docView.nearestDesc(ut,!0),St;if(!ft)return null;if(ft.dom.nodeType==1&&(ft.node.isBlock&&ft.parent||!ft.contentDOM)&&((St=ft.dom.getBoundingClientRect()).width||St.height)&&(ft.node.isBlock&&ft.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(ft.dom.nodeName)&&(!dt&&St.left>ot.left||St.top>ot.top?ct=ft.posBefore:(!dt&&St.right<ot.left||St.bottom<ot.top)&&(ct=ft.posAfter),dt=!0),!ft.contentDOM&&ct<0&&!ft.node.isText))return(ft.node.isBlock?ot.top<(St.top+St.bottom)/2:ot.left<(St.left+St.right)/2)?ft.posBefore:ft.posAfter;ut=ft.dom.parentNode}return ct>-1?ct:it.docView.posFromDOM(g,et,-1)}function elementFromPoint(it,g,et){let ot=it.childNodes.length;if(ot&&et.top<et.bottom)for(let ct=Math.max(0,Math.min(ot-1,Math.floor(ot*(g.top-et.top)/(et.bottom-et.top))-2)),ut=ct;;){let dt=it.childNodes[ut];if(dt.nodeType==1){let ft=dt.getClientRects();for(let St=0;St<ft.length;St++){let kt=ft[St];if(inRect(g,kt))return elementFromPoint(dt,g,kt)}}if((ut=(ut+1)%ot)==ct)break}return it}function posAtCoords(it,g){let et=it.dom.ownerDocument,ot,ct=0,ut=caretFromPoint(et,g.left,g.top);ut&&({node:ot,offset:ct}=ut);let dt=(it.root.elementFromPoint?it.root:et).elementFromPoint(g.left,g.top),ft;if(!dt||!it.dom.contains(dt.nodeType!=1?dt.parentNode:dt)){let kt=it.dom.getBoundingClientRect();if(!inRect(g,kt)||(dt=elementFromPoint(it.dom,g,kt),!dt))return null}if(safari)for(let kt=dt;ot&&kt;kt=parentNode(kt))kt.draggable&&(ot=void 0);if(dt=targetKludge(dt,g),ot){if(gecko&&ot.nodeType==1&&(ct=Math.min(ct,ot.childNodes.length),ct<ot.childNodes.length)){let Tt=ot.childNodes[ct],Rt;Tt.nodeName=="IMG"&&(Rt=Tt.getBoundingClientRect()).right<=g.left&&Rt.bottom>g.top&&ct++}let kt;webkit&&ct&&ot.nodeType==1&&(kt=ot.childNodes[ct-1]).nodeType==1&&kt.contentEditable=="false"&&kt.getBoundingClientRect().top>=g.top&&ct--,ot==it.dom&&ct==ot.childNodes.length-1&&ot.lastChild.nodeType==1&&g.top>ot.lastChild.getBoundingClientRect().bottom?ft=it.state.doc.content.size:(ct==0||ot.nodeType!=1||ot.childNodes[ct-1].nodeName!="BR")&&(ft=posFromCaret(it,ot,ct,g))}ft==null&&(ft=posFromElement(it,dt,g));let St=it.docView.nearestDesc(dt,!0);return{pos:ft,inside:St?St.posAtStart-St.border:-1}}function nonZero(it){return it.top<it.bottom||it.left<it.right}function singleRect(it,g){let et=it.getClientRects();if(et.length){let ot=et[g<0?0:et.length-1];if(nonZero(ot))return ot}return Array.prototype.find.call(et,nonZero)||it.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(it,g,et){let{node:ot,offset:ct,atom:ut}=it.docView.domFromPos(g,et<0?-1:1),dt=webkit||gecko;if(ot.nodeType==3)if(dt&&(BIDI.test(ot.nodeValue)||(et<0?!ct:ct==ot.nodeValue.length))){let St=singleRect(textRange(ot,ct,ct),et);if(gecko&&ct&&/\s/.test(ot.nodeValue[ct-1])&&ct<ot.nodeValue.length){let kt=singleRect(textRange(ot,ct-1,ct-1),-1);if(kt.top==St.top){let Tt=singleRect(textRange(ot,ct,ct+1),-1);if(Tt.top!=St.top)return flattenV(Tt,Tt.left<kt.left)}}return St}else{let St=ct,kt=ct,Tt=et<0?1:-1;return et<0&&!ct?(kt++,Tt=-1):et>=0&&ct==ot.nodeValue.length?(St--,Tt=1):et<0?St--:kt++,flattenV(singleRect(textRange(ot,St,kt),Tt),Tt<0)}if(!it.state.doc.resolve(g-(ut||0)).parent.inlineContent){if(ut==null&&ct&&(et<0||ct==nodeSize(ot))){let St=ot.childNodes[ct-1];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!1)}if(ut==null&&ct<nodeSize(ot)){let St=ot.childNodes[ct];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!0)}return flattenH(ot.getBoundingClientRect(),et>=0)}if(ut==null&&ct&&(et<0||ct==nodeSize(ot))){let St=ot.childNodes[ct-1],kt=St.nodeType==3?textRange(St,nodeSize(St)-(dt?0:1)):St.nodeType==1&&(St.nodeName!="BR"||!St.nextSibling)?St:null;if(kt)return flattenV(singleRect(kt,1),!1)}if(ut==null&&ct<nodeSize(ot)){let St=ot.childNodes[ct];for(;St.pmViewDesc&&St.pmViewDesc.ignoreForCoords;)St=St.nextSibling;let kt=St?St.nodeType==3?textRange(St,0,dt?0:1):St.nodeType==1?St:null:null;if(kt)return flattenV(singleRect(kt,-1),!0)}return flattenV(singleRect(ot.nodeType==3?textRange(ot):ot,-et),et>=0)}function flattenV(it,g){if(it.width==0)return it;let et=g?it.left:it.right;return{top:it.top,bottom:it.bottom,left:et,right:et}}function flattenH(it,g){if(it.height==0)return it;let et=g?it.top:it.bottom;return{top:et,bottom:et,left:it.left,right:it.right}}function withFlushedState(it,g,et){let ot=it.state,ct=it.root.activeElement;ot!=g&&it.updateState(g),ct!=it.dom&&it.focus();try{return et()}finally{ot!=g&&it.updateState(ot),ct!=it.dom&&ct&&ct.focus()}}function endOfTextblockVertical(it,g,et){let ot=g.selection,ct=et=="up"?ot.$from:ot.$to;return withFlushedState(it,g,()=>{let{node:ut}=it.docView.domFromPos(ct.pos,et=="up"?-1:1);for(;;){let ft=it.docView.nearestDesc(ut,!0);if(!ft)break;if(ft.node.isBlock){ut=ft.contentDOM||ft.dom;break}ut=ft.dom.parentNode}let dt=coordsAtPos(it,ct.pos,1);for(let ft=ut.firstChild;ft;ft=ft.nextSibling){let St;if(ft.nodeType==1)St=ft.getClientRects();else if(ft.nodeType==3)St=textRange(ft,0,ft.nodeValue.length).getClientRects();else continue;for(let kt=0;kt<St.length;kt++){let Tt=St[kt];if(Tt.bottom>Tt.top+1&&(et=="up"?dt.top-Tt.top>(Tt.bottom-dt.top)*2:Tt.bottom-dt.bottom>(dt.bottom-Tt.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(it,g,et){let{$head:ot}=g.selection;if(!ot.parent.isTextblock)return!1;let ct=ot.parentOffset,ut=!ct,dt=ct==ot.parent.content.size,ft=it.domSelection();return ft?!maybeRTL.test(ot.parent.textContent)||!ft.modify?et=="left"||et=="backward"?ut:dt:withFlushedState(it,g,()=>{let{focusNode:St,focusOffset:kt,anchorNode:Tt,anchorOffset:Rt}=it.domSelectionRange(),jt=ft.caretBidiLevel;ft.modify("move",et,"character");let $t=ot.depth?it.docView.domAfterPos(ot.before()):it.dom,{focusNode:Ft,focusOffset:Ht}=it.domSelectionRange(),Kt=Ft&&!$t.contains(Ft.nodeType==1?Ft:Ft.parentNode)||St==Ft&&kt==Ht;try{ft.collapse(Tt,Rt),St&&(St!=Tt||kt!=Rt)&&ft.extend&&ft.extend(St,kt)}catch{}return jt!=null&&(ft.caretBidiLevel=jt),Kt}):ot.pos==ot.start()||ot.pos==ot.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(it,g,et){return cachedState==g&&cachedDir==et?cachedResult:(cachedState=g,cachedDir=et,cachedResult=et=="up"||et=="down"?endOfTextblockVertical(it,g,et):endOfTextblockHorizontal(it,g,et))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(g,et,ot,ct){this.parent=g,this.children=et,this.dom=ot,this.contentDOM=ct,this.dirty=NOT_DIRTY,ot.pmViewDesc=this}matchesWidget(g){return!1}matchesMark(g){return!1}matchesNode(g,et,ot){return!1}matchesHack(g){return!1}parseRule(){return null}stopEvent(g){return!1}get size(){let g=0;for(let et=0;et<this.children.length;et++)g+=this.children[et].size;return g}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let g=0;g<this.children.length;g++)this.children[g].destroy()}posBeforeChild(g){for(let et=0,ot=this.posAtStart;;et++){let ct=this.children[et];if(ct==g)return ot;ot+=ct.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(g,et,ot){if(this.contentDOM&&this.contentDOM.contains(g.nodeType==1?g:g.parentNode))if(ot<0){let ut,dt;if(g==this.contentDOM)ut=g.childNodes[et-1];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ut=g.previousSibling}for(;ut&&!((dt=ut.pmViewDesc)&&dt.parent==this);)ut=ut.previousSibling;return ut?this.posBeforeChild(dt)+dt.size:this.posAtStart}else{let ut,dt;if(g==this.contentDOM)ut=g.childNodes[et];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ut=g.nextSibling}for(;ut&&!((dt=ut.pmViewDesc)&&dt.parent==this);)ut=ut.nextSibling;return ut?this.posBeforeChild(dt):this.posAtEnd}let ct;if(g==this.dom&&this.contentDOM)ct=et>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))ct=g.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(et==0)for(let ut=g;;ut=ut.parentNode){if(ut==this.dom){ct=!1;break}if(ut.previousSibling)break}if(ct==null&&et==g.childNodes.length)for(let ut=g;;ut=ut.parentNode){if(ut==this.dom){ct=!0;break}if(ut.nextSibling)break}}return ct??ot>0?this.posAtEnd:this.posAtStart}nearestDesc(g,et=!1){for(let ot=!0,ct=g;ct;ct=ct.parentNode){let ut=this.getDesc(ct),dt;if(ut&&(!et||ut.node))if(ot&&(dt=ut.nodeDOM)&&!(dt.nodeType==1?dt.contains(g.nodeType==1?g:g.parentNode):dt==g))ot=!1;else return ut}}getDesc(g){let et=g.pmViewDesc;for(let ot=et;ot;ot=ot.parent)if(ot==this)return et}posFromDOM(g,et,ot){for(let ct=g;ct;ct=ct.parentNode){let ut=this.getDesc(ct);if(ut)return ut.localPosFromDOM(g,et,ot)}return-1}descAt(g){for(let et=0,ot=0;et<this.children.length;et++){let ct=this.children[et],ut=ot+ct.size;if(ot==g&&ut!=ot){for(;!ct.border&&ct.children.length;)for(let dt=0;dt<ct.children.length;dt++){let ft=ct.children[dt];if(ft.size){ct=ft;break}}return ct}if(g<ut)return ct.descAt(g-ot-ct.border);ot=ut}}domFromPos(g,et){if(!this.contentDOM)return{node:this.dom,offset:0,atom:g+1};let ot=0,ct=0;for(let ut=0;ot<this.children.length;ot++){let dt=this.children[ot],ft=ut+dt.size;if(ft>g||dt instanceof TrailingHackViewDesc){ct=g-ut;break}ut=ft}if(ct)return this.children[ot].domFromPos(ct-this.children[ot].border,et);for(let ut;ot&&!(ut=this.children[ot-1]).size&&ut instanceof WidgetViewDesc&&ut.side>=0;ot--);if(et<=0){let ut,dt=!0;for(;ut=ot?this.children[ot-1]:null,!(!ut||ut.dom.parentNode==this.contentDOM);ot--,dt=!1);return ut&&et&&dt&&!ut.border&&!ut.domAtom?ut.domFromPos(ut.size,et):{node:this.contentDOM,offset:ut?domIndex(ut.dom)+1:0}}else{let ut,dt=!0;for(;ut=ot<this.children.length?this.children[ot]:null,!(!ut||ut.dom.parentNode==this.contentDOM);ot++,dt=!1);return ut&&dt&&!ut.border&&!ut.domAtom?ut.domFromPos(0,et):{node:this.contentDOM,offset:ut?domIndex(ut.dom):this.contentDOM.childNodes.length}}}parseRange(g,et,ot=0){if(this.children.length==0)return{node:this.contentDOM,from:g,to:et,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let ct=-1,ut=-1;for(let dt=ot,ft=0;;ft++){let St=this.children[ft],kt=dt+St.size;if(ct==-1&&g<=kt){let Tt=dt+St.border;if(g>=Tt&&et<=kt-St.border&&St.node&&St.contentDOM&&this.contentDOM.contains(St.contentDOM))return St.parseRange(g,et,Tt);g=dt;for(let Rt=ft;Rt>0;Rt--){let jt=this.children[Rt-1];if(jt.size&&jt.dom.parentNode==this.contentDOM&&!jt.emptyChildAt(1)){ct=domIndex(jt.dom)+1;break}g-=jt.size}ct==-1&&(ct=0)}if(ct>-1&&(kt>et||ft==this.children.length-1)){et=kt;for(let Tt=ft+1;Tt<this.children.length;Tt++){let Rt=this.children[Tt];if(Rt.size&&Rt.dom.parentNode==this.contentDOM&&!Rt.emptyChildAt(-1)){ut=domIndex(Rt.dom);break}et+=Rt.size}ut==-1&&(ut=this.contentDOM.childNodes.length);break}dt=kt}return{node:this.contentDOM,from:g,to:et,fromOffset:ct,toOffset:ut}}emptyChildAt(g){if(this.border||!this.contentDOM||!this.children.length)return!1;let et=this.children[g<0?0:this.children.length-1];return et.size==0||et.emptyChildAt(g)}domAfterPos(g){let{node:et,offset:ot}=this.domFromPos(g,0);if(et.nodeType!=1||ot==et.childNodes.length)throw new RangeError("No node after pos "+g);return et.childNodes[ot]}setSelection(g,et,ot,ct=!1){let ut=Math.min(g,et),dt=Math.max(g,et);for(let $t=0,Ft=0;$t<this.children.length;$t++){let Ht=this.children[$t],Kt=Ft+Ht.size;if(ut>Ft&&dt<Kt)return Ht.setSelection(g-Ft-Ht.border,et-Ft-Ht.border,ot,ct);Ft=Kt}let ft=this.domFromPos(g,g?-1:1),St=et==g?ft:this.domFromPos(et,et?-1:1),kt=ot.root.getSelection(),Tt=ot.domSelectionRange(),Rt=!1;if((gecko||safari)&&g==et){let{node:$t,offset:Ft}=ft;if($t.nodeType==3){if(Rt=!!(Ft&&$t.nodeValue[Ft-1]==`
`),Rt&&Ft==$t.nodeValue.length)for(let Ht=$t,Kt;Ht;Ht=Ht.parentNode){if(Kt=Ht.nextSibling){Kt.nodeName=="BR"&&(ft=St={node:Kt.parentNode,offset:domIndex(Kt)+1});break}let Bt=Ht.pmViewDesc;if(Bt&&Bt.node&&Bt.node.isBlock)break}}else{let Ht=$t.childNodes[Ft-1];Rt=Ht&&(Ht.nodeName=="BR"||Ht.contentEditable=="false")}}if(gecko&&Tt.focusNode&&Tt.focusNode!=St.node&&Tt.focusNode.nodeType==1){let $t=Tt.focusNode.childNodes[Tt.focusOffset];$t&&$t.contentEditable=="false"&&(ct=!0)}if(!(ct||Rt&&safari)&&isEquivalentPosition(ft.node,ft.offset,Tt.anchorNode,Tt.anchorOffset)&&isEquivalentPosition(St.node,St.offset,Tt.focusNode,Tt.focusOffset))return;let jt=!1;if((kt.extend||g==et)&&!(Rt&&gecko)){kt.collapse(ft.node,ft.offset);try{g!=et&&kt.extend(St.node,St.offset),jt=!0}catch{}}if(!jt){if(g>et){let Ft=ft;ft=St,St=Ft}let $t=document.createRange();$t.setEnd(St.node,St.offset),$t.setStart(ft.node,ft.offset),kt.removeAllRanges(),kt.addRange($t)}}ignoreMutation(g){return!this.contentDOM&&g.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(g,et){for(let ot=0,ct=0;ct<this.children.length;ct++){let ut=this.children[ct],dt=ot+ut.size;if(ot==dt?g<=dt&&et>=ot:g<dt&&et>ot){let ft=ot+ut.border,St=dt-ut.border;if(g>=ft&&et<=St){this.dirty=g==ot||et==dt?CONTENT_DIRTY:CHILD_DIRTY,g==ft&&et==St&&(ut.contentLost||ut.dom.parentNode!=this.contentDOM)?ut.dirty=NODE_DIRTY:ut.markDirty(g-ft,et-ft);return}else ut.dirty=ut.dom==ut.contentDOM&&ut.dom.parentNode==this.contentDOM&&!ut.children.length?CONTENT_DIRTY:NODE_DIRTY}ot=dt}this.dirty=CONTENT_DIRTY}markParentsDirty(){let g=1;for(let et=this.parent;et;et=et.parent,g++){let ot=g==1?CONTENT_DIRTY:CHILD_DIRTY;et.dirty<ot&&(et.dirty=ot)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(g){return!1}}class WidgetViewDesc extends ViewDesc{constructor(g,et,ot,ct){let ut,dt=et.type.toDOM;if(typeof dt=="function"&&(dt=dt(ot,()=>{if(!ut)return ct;if(ut.parent)return ut.parent.posBeforeChild(ut)})),!et.type.spec.raw){if(dt.nodeType!=1){let ft=document.createElement("span");ft.appendChild(dt),dt=ft}dt.contentEditable="false",dt.classList.add("ProseMirror-widget")}super(g,[],dt,null),this.widget=et,this.widget=et,ut=this}matchesWidget(g){return this.dirty==NOT_DIRTY&&g.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(g){let et=this.widget.spec.stopEvent;return et?et(g):!1}ignoreMutation(g){return g.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(g,et,ot,ct){super(g,[],et,null),this.textDOM=ot,this.text=ct}get size(){return this.text.length}localPosFromDOM(g,et){return g!=this.textDOM?this.posAtStart+(et?this.size:0):this.posAtStart+et}domFromPos(g){return{node:this.textDOM,offset:g}}ignoreMutation(g){return g.type==="characterData"&&g.target.nodeValue==g.oldValue}}class MarkViewDesc extends ViewDesc{constructor(g,et,ot,ct,ut){super(g,[],ot,ct),this.mark=et,this.spec=ut}static create(g,et,ot,ct){let ut=ct.nodeViews[et.type.name],dt=ut&&ut(et,ct,ot);return(!dt||!dt.dom)&&(dt=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et,ot),null,et.attrs)),new MarkViewDesc(g,et,dt.dom,dt.contentDOM||dt.dom,dt)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(g){return this.dirty!=NODE_DIRTY&&this.mark.eq(g)}markDirty(g,et){if(super.markDirty(g,et),this.dirty!=NOT_DIRTY){let ot=this.parent;for(;!ot.node;)ot=ot.parent;ot.dirty<this.dirty&&(ot.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(g,et,ot){let ct=MarkViewDesc.create(this.parent,this.mark,!0,ot),ut=this.children,dt=this.size;et<dt&&(ut=replaceNodes(ut,et,dt,ot)),g>0&&(ut=replaceNodes(ut,0,g,ot));for(let ft=0;ft<ut.length;ft++)ut[ft].parent=ct;return ct.children=ut,ct}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(g,et,ot,ct,ut,dt,ft,St,kt){super(g,[],ut,dt),this.node=et,this.outerDeco=ot,this.innerDeco=ct,this.nodeDOM=ft}static create(g,et,ot,ct,ut,dt){let ft=ut.nodeViews[et.type.name],St,kt=ft&&ft(et,ut,()=>{if(!St)return dt;if(St.parent)return St.parent.posBeforeChild(St)},ot,ct),Tt=kt&&kt.dom,Rt=kt&&kt.contentDOM;if(et.isText){if(!Tt)Tt=document.createTextNode(et.text);else if(Tt.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Tt||({dom:Tt,contentDOM:Rt}=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et),null,et.attrs));!Rt&&!et.isText&&Tt.nodeName!="BR"&&(Tt.hasAttribute("contenteditable")||(Tt.contentEditable="false"),et.type.spec.draggable&&(Tt.draggable=!0));let jt=Tt;return Tt=applyOuterDeco(Tt,ot,et),kt?St=new CustomNodeViewDesc(g,et,ot,ct,Tt,Rt||null,jt,kt,ut,dt+1):et.isText?new TextViewDesc(g,et,ot,ct,Tt,jt,ut):new NodeViewDesc(g,et,ot,ct,Tt,Rt||null,jt,ut,dt+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let g={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(g.preserveWhitespace="full"),!this.contentDOM)g.getContent=()=>this.node.content;else if(!this.contentLost)g.contentElement=this.contentDOM;else{for(let et=this.children.length-1;et>=0;et--){let ot=this.children[et];if(this.dom.contains(ot.dom.parentNode)){g.contentElement=ot.dom.parentNode;break}}g.contentElement||(g.getContent=()=>Fragment.empty)}return g}matchesNode(g,et,ot){return this.dirty==NOT_DIRTY&&g.eq(this.node)&&sameOuterDeco(et,this.outerDeco)&&ot.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(g,et){let ot=this.node.inlineContent,ct=et,ut=g.composing?this.localCompositionInfo(g,et):null,dt=ut&&ut.pos>-1?ut:null,ft=ut&&ut.pos<0,St=new ViewTreeUpdater(this,dt&&dt.node,g);iterDeco(this.node,this.innerDeco,(kt,Tt,Rt)=>{kt.spec.marks?St.syncToMarks(kt.spec.marks,ot,g):kt.type.side>=0&&!Rt&&St.syncToMarks(Tt==this.node.childCount?Mark$1.none:this.node.child(Tt).marks,ot,g),St.placeWidget(kt,g,ct)},(kt,Tt,Rt,jt)=>{St.syncToMarks(kt.marks,ot,g);let $t;St.findNodeMatch(kt,Tt,Rt,jt)||ft&&g.state.selection.from>ct&&g.state.selection.to<ct+kt.nodeSize&&($t=St.findIndexWithChild(ut.node))>-1&&St.updateNodeAt(kt,Tt,Rt,$t,g)||St.updateNextNode(kt,Tt,Rt,g,jt,ct)||St.addNode(kt,Tt,Rt,g,ct),ct+=kt.nodeSize}),St.syncToMarks([],ot,g),this.node.isTextblock&&St.addTextblockHacks(),St.destroyRest(),(St.changed||this.dirty==CONTENT_DIRTY)&&(dt&&this.protectLocalComposition(g,dt),renderDescs(this.contentDOM,this.children,g),ios&&iosHacks(this.dom))}localCompositionInfo(g,et){let{from:ot,to:ct}=g.state.selection;if(!(g.state.selection instanceof TextSelection)||ot<et||ct>et+this.node.content.size)return null;let ut=g.input.compositionNode;if(!ut||!this.dom.contains(ut.parentNode))return null;if(this.node.inlineContent){let dt=ut.nodeValue,ft=findTextInFragment(this.node.content,dt,ot-et,ct-et);return ft<0?null:{node:ut,pos:ft,text:dt}}else return{node:ut,pos:-1,text:""}}protectLocalComposition(g,{node:et,pos:ot,text:ct}){if(this.getDesc(et))return;let ut=et;for(;ut.parentNode!=this.contentDOM;ut=ut.parentNode){for(;ut.previousSibling;)ut.parentNode.removeChild(ut.previousSibling);for(;ut.nextSibling;)ut.parentNode.removeChild(ut.nextSibling);ut.pmViewDesc&&(ut.pmViewDesc=void 0)}let dt=new CompositionViewDesc(this,ut,et,ct);g.input.compositionNodes.push(dt),this.children=replaceNodes(this.children,ot,ot+ct.length,g,dt)}update(g,et,ot,ct){return this.dirty==NODE_DIRTY||!g.sameMarkup(this.node)?!1:(this.updateInner(g,et,ot,ct),!0)}updateInner(g,et,ot,ct){this.updateOuterDeco(et),this.node=g,this.innerDeco=ot,this.contentDOM&&this.updateChildren(ct,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(g){if(sameOuterDeco(g,this.outerDeco))return;let et=this.nodeDOM.nodeType!=1,ot=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,et),computeOuterDeco(g,this.node,et)),this.dom!=ot&&(ot.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=g}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(it,g,et,ot,ct){applyOuterDeco(ot,g,it);let ut=new NodeViewDesc(void 0,it,g,et,ot,ot,ot,ct,0);return ut.contentDOM&&ut.updateChildren(ct,0),ut}class TextViewDesc extends NodeViewDesc{constructor(g,et,ot,ct,ut,dt,ft){super(g,et,ot,ct,ut,null,dt,ft,0)}parseRule(){let g=this.nodeDOM.parentNode;for(;g&&g!=this.dom&&!g.pmIsDeco;)g=g.parentNode;return{skip:g||!0}}update(g,et,ot,ct){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!g.sameMarkup(this.node)?!1:(this.updateOuterDeco(et),(this.dirty!=NOT_DIRTY||g.text!=this.node.text)&&g.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=g.text,ct.trackWrites==this.nodeDOM&&(ct.trackWrites=null)),this.node=g,this.dirty=NOT_DIRTY,!0)}inParent(){let g=this.parent.contentDOM;for(let et=this.nodeDOM;et;et=et.parentNode)if(et==g)return!0;return!1}domFromPos(g){return{node:this.nodeDOM,offset:g}}localPosFromDOM(g,et,ot){return g==this.nodeDOM?this.posAtStart+Math.min(et,this.node.text.length):super.localPosFromDOM(g,et,ot)}ignoreMutation(g){return g.type!="characterData"&&g.type!="selection"}slice(g,et,ot){let ct=this.node.cut(g,et),ut=document.createTextNode(ct.text);return new TextViewDesc(this.parent,ct,this.outerDeco,this.innerDeco,ut,ut,ot)}markDirty(g,et){super.markDirty(g,et),this.dom!=this.nodeDOM&&(g==0||et==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(g){return this.node.text==g}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(g){return this.dirty==NOT_DIRTY&&this.dom.nodeName==g}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(g,et,ot,ct,ut,dt,ft,St,kt,Tt){super(g,et,ot,ct,ut,dt,ft,kt,Tt),this.spec=St}update(g,et,ot,ct){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==g.type||this.spec.multiType)){let ut=this.spec.update(g,et,ot);return ut&&this.updateInner(g,et,ot,ct),ut}else return!this.contentDOM&&!g.isLeaf?!1:super.update(g,et,ot,ct)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(g,et,ot,ct){this.spec.setSelection?this.spec.setSelection(g,et,ot.root):super.setSelection(g,et,ot,ct)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(g){return this.spec.stopEvent?this.spec.stopEvent(g):!1}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}}function renderDescs(it,g,et){let ot=it.firstChild,ct=!1;for(let ut=0;ut<g.length;ut++){let dt=g[ut],ft=dt.dom;if(ft.parentNode==it){for(;ft!=ot;)ot=rm(ot),ct=!0;ot=ot.nextSibling}else ct=!0,it.insertBefore(ft,ot);if(dt instanceof MarkViewDesc){let St=ot?ot.previousSibling:it.lastChild;renderDescs(dt.contentDOM,dt.children,et),ot=St?St.nextSibling:it.firstChild}}for(;ot;)ot=rm(ot),ct=!0;ct&&et.trackWrites==it&&(et.trackWrites=null)}const OuterDecoLevel=function(it){it&&(this.nodeName=it)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(it,g,et){if(it.length==0)return noDeco;let ot=et?noDeco[0]:new OuterDecoLevel,ct=[ot];for(let ut=0;ut<it.length;ut++){let dt=it[ut].type.attrs;if(dt){dt.nodeName&&ct.push(ot=new OuterDecoLevel(dt.nodeName));for(let ft in dt){let St=dt[ft];St!=null&&(et&&ct.length==1&&ct.push(ot=new OuterDecoLevel(g.isInline?"span":"div")),ft=="class"?ot.class=(ot.class?ot.class+" ":"")+St:ft=="style"?ot.style=(ot.style?ot.style+";":"")+St:ft!="nodeName"&&(ot[ft]=St))}}}return ct}function patchOuterDeco(it,g,et,ot){if(et==noDeco&&ot==noDeco)return g;let ct=g;for(let ut=0;ut<ot.length;ut++){let dt=ot[ut],ft=et[ut];if(ut){let St;ft&&ft.nodeName==dt.nodeName&&ct!=it&&(St=ct.parentNode)&&St.nodeName.toLowerCase()==dt.nodeName||(St=document.createElement(dt.nodeName),St.pmIsDeco=!0,St.appendChild(ct),ft=noDeco[0]),ct=St}patchAttributes(ct,ft||noDeco[0],dt)}return ct}function patchAttributes(it,g,et){for(let ot in g)ot!="class"&&ot!="style"&&ot!="nodeName"&&!(ot in et)&&it.removeAttribute(ot);for(let ot in et)ot!="class"&&ot!="style"&&ot!="nodeName"&&et[ot]!=g[ot]&&it.setAttribute(ot,et[ot]);if(g.class!=et.class){let ot=g.class?g.class.split(" ").filter(Boolean):[],ct=et.class?et.class.split(" ").filter(Boolean):[];for(let ut=0;ut<ot.length;ut++)ct.indexOf(ot[ut])==-1&&it.classList.remove(ot[ut]);for(let ut=0;ut<ct.length;ut++)ot.indexOf(ct[ut])==-1&&it.classList.add(ct[ut]);it.classList.length==0&&it.removeAttribute("class")}if(g.style!=et.style){if(g.style){let ot=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,ct;for(;ct=ot.exec(g.style);)it.style.removeProperty(ct[1])}et.style&&(it.style.cssText+=et.style)}}function applyOuterDeco(it,g,et){return patchOuterDeco(it,it,noDeco,computeOuterDeco(g,et,it.nodeType!=1))}function sameOuterDeco(it,g){if(it.length!=g.length)return!1;for(let et=0;et<it.length;et++)if(!it[et].type.eq(g[et].type))return!1;return!0}function rm(it){let g=it.nextSibling;return it.parentNode.removeChild(it),g}class ViewTreeUpdater{constructor(g,et,ot){this.lock=et,this.view=ot,this.index=0,this.stack=[],this.changed=!1,this.top=g,this.preMatch=preMatch(g.node.content,g)}destroyBetween(g,et){if(g!=et){for(let ot=g;ot<et;ot++)this.top.children[ot].destroy();this.top.children.splice(g,et-g),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(g,et,ot){let ct=0,ut=this.stack.length>>1,dt=Math.min(ut,g.length);for(;ct<dt&&(ct==ut-1?this.top:this.stack[ct+1<<1]).matchesMark(g[ct])&&g[ct].type.spec.spanning!==!1;)ct++;for(;ct<ut;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),ut--;for(;ut<g.length;){this.stack.push(this.top,this.index+1);let ft=-1;for(let St=this.index;St<Math.min(this.index+3,this.top.children.length);St++){let kt=this.top.children[St];if(kt.matchesMark(g[ut])&&!this.isLocked(kt.dom)){ft=St;break}}if(ft>-1)ft>this.index&&(this.changed=!0,this.destroyBetween(this.index,ft)),this.top=this.top.children[this.index];else{let St=MarkViewDesc.create(this.top,g[ut],et,ot);this.top.children.splice(this.index,0,St),this.top=St,this.changed=!0}this.index=0,ut++}}findNodeMatch(g,et,ot,ct){let ut=-1,dt;if(ct>=this.preMatch.index&&(dt=this.preMatch.matches[ct-this.preMatch.index]).parent==this.top&&dt.matchesNode(g,et,ot))ut=this.top.children.indexOf(dt,this.index);else for(let ft=this.index,St=Math.min(this.top.children.length,ft+5);ft<St;ft++){let kt=this.top.children[ft];if(kt.matchesNode(g,et,ot)&&!this.preMatch.matched.has(kt)){ut=ft;break}}return ut<0?!1:(this.destroyBetween(this.index,ut),this.index++,!0)}updateNodeAt(g,et,ot,ct,ut){let dt=this.top.children[ct];return dt.dirty==NODE_DIRTY&&dt.dom==dt.contentDOM&&(dt.dirty=CONTENT_DIRTY),dt.update(g,et,ot,ut)?(this.destroyBetween(this.index,ct),this.index++,!0):!1}findIndexWithChild(g){for(;;){let et=g.parentNode;if(!et)return-1;if(et==this.top.contentDOM){let ot=g.pmViewDesc;if(ot){for(let ct=this.index;ct<this.top.children.length;ct++)if(this.top.children[ct]==ot)return ct}return-1}g=et}}updateNextNode(g,et,ot,ct,ut,dt){for(let ft=this.index;ft<this.top.children.length;ft++){let St=this.top.children[ft];if(St instanceof NodeViewDesc){let kt=this.preMatch.matched.get(St);if(kt!=null&&kt!=ut)return!1;let Tt=St.dom,Rt,jt=this.isLocked(Tt)&&!(g.isText&&St.node&&St.node.isText&&St.nodeDOM.nodeValue==g.text&&St.dirty!=NODE_DIRTY&&sameOuterDeco(et,St.outerDeco));if(!jt&&St.update(g,et,ot,ct))return this.destroyBetween(this.index,ft),St.dom!=Tt&&(this.changed=!0),this.index++,!0;if(!jt&&(Rt=this.recreateWrapper(St,g,et,ot,ct,dt)))return this.destroyBetween(this.index,ft),this.top.children[this.index]=Rt,Rt.contentDOM&&(Rt.dirty=CONTENT_DIRTY,Rt.updateChildren(ct,dt+1),Rt.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(g,et,ot,ct,ut,dt){if(g.dirty||et.isAtom||!g.children.length||!g.node.content.eq(et.content)||!sameOuterDeco(ot,g.outerDeco)||!ct.eq(g.innerDeco))return null;let ft=NodeViewDesc.create(this.top,et,ot,ct,ut,dt);if(ft.contentDOM){ft.children=g.children,g.children=[];for(let St of ft.children)St.parent=ft}return g.destroy(),ft}addNode(g,et,ot,ct,ut){let dt=NodeViewDesc.create(this.top,g,et,ot,ct,ut);dt.contentDOM&&dt.updateChildren(ct,ut+1),this.top.children.splice(this.index++,0,dt),this.changed=!0}placeWidget(g,et,ot){let ct=this.index<this.top.children.length?this.top.children[this.index]:null;if(ct&&ct.matchesWidget(g)&&(g==ct.widget||!ct.widget.type.toDOM.parentNode))this.index++;else{let ut=new WidgetViewDesc(this.top,g,et,ot);this.top.children.splice(this.index++,0,ut),this.changed=!0}}addTextblockHacks(){let g=this.top.children[this.index-1],et=this.top;for(;g instanceof MarkViewDesc;)et=g,g=et.children[et.children.length-1];(!g||!(g instanceof TextViewDesc)||/\n$/.test(g.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(g.node.text))&&((safari||chrome)&&g&&g.dom.contentEditable=="false"&&this.addHackNode("IMG",et),this.addHackNode("BR",this.top))}addHackNode(g,et){if(et==this.top&&this.index<et.children.length&&et.children[this.index].matchesHack(g))this.index++;else{let ot=document.createElement(g);g=="IMG"&&(ot.className="ProseMirror-separator",ot.alt=""),g=="BR"&&(ot.className="ProseMirror-trailingBreak");let ct=new TrailingHackViewDesc(this.top,[],ot,null);et!=this.top?et.children.push(ct):et.children.splice(this.index++,0,ct),this.changed=!0}}isLocked(g){return this.lock&&(g==this.lock||g.nodeType==1&&g.contains(this.lock.parentNode))}}function preMatch(it,g){let et=g,ot=et.children.length,ct=it.childCount,ut=new Map,dt=[];e:for(;ct>0;){let ft;for(;;)if(ot){let kt=et.children[ot-1];if(kt instanceof MarkViewDesc)et=kt,ot=kt.children.length;else{ft=kt,ot--;break}}else{if(et==g)break e;ot=et.parent.children.indexOf(et),et=et.parent}let St=ft.node;if(St){if(St!=it.child(ct-1))break;--ct,ut.set(ft,ct),dt.push(ft)}}return{index:ct,matched:ut,matches:dt.reverse()}}function compareSide(it,g){return it.type.side-g.type.side}function iterDeco(it,g,et,ot){let ct=g.locals(it),ut=0;if(ct.length==0){for(let kt=0;kt<it.childCount;kt++){let Tt=it.child(kt);ot(Tt,ct,g.forChild(ut,Tt),kt),ut+=Tt.nodeSize}return}let dt=0,ft=[],St=null;for(let kt=0;;){let Tt,Rt;for(;dt<ct.length&&ct[dt].to==ut;){let Kt=ct[dt++];Kt.widget&&(Tt?(Rt||(Rt=[Tt])).push(Kt):Tt=Kt)}if(Tt)if(Rt){Rt.sort(compareSide);for(let Kt=0;Kt<Rt.length;Kt++)et(Rt[Kt],kt,!!St)}else et(Tt,kt,!!St);let jt,$t;if(St)$t=-1,jt=St,St=null;else if(kt<it.childCount)$t=kt,jt=it.child(kt++);else break;for(let Kt=0;Kt<ft.length;Kt++)ft[Kt].to<=ut&&ft.splice(Kt--,1);for(;dt<ct.length&&ct[dt].from<=ut&&ct[dt].to>ut;)ft.push(ct[dt++]);let Ft=ut+jt.nodeSize;if(jt.isText){let Kt=Ft;dt<ct.length&&ct[dt].from<Kt&&(Kt=ct[dt].from);for(let Bt=0;Bt<ft.length;Bt++)ft[Bt].to<Kt&&(Kt=ft[Bt].to);Kt<Ft&&(St=jt.cut(Kt-ut),jt=jt.cut(0,Kt-ut),Ft=Kt,$t=-1)}else for(;dt<ct.length&&ct[dt].to<Ft;)dt++;let Ht=jt.isInline&&!jt.isLeaf?ft.filter(Kt=>!Kt.inline):ft.slice();ot(jt,Ht,g.forChild(ut,jt),$t),ut=Ft}}function iosHacks(it){if(it.nodeName=="UL"||it.nodeName=="OL"){let g=it.style.cssText;it.style.cssText=g+"; list-style: square !important",window.getComputedStyle(it).listStyle,it.style.cssText=g}}function findTextInFragment(it,g,et,ot){for(let ct=0,ut=0;ct<it.childCount&&ut<=ot;){let dt=it.child(ct++),ft=ut;if(ut+=dt.nodeSize,!dt.isText)continue;let St=dt.text;for(;ct<it.childCount;){let kt=it.child(ct++);if(ut+=kt.nodeSize,!kt.isText)break;St+=kt.text}if(ut>=et){if(ut>=ot&&St.slice(ot-g.length-ft,ot-ft)==g)return ot-g.length;let kt=ft<ot?St.lastIndexOf(g,ot-ft-1):-1;if(kt>=0&&kt+g.length+ft>=et)return ft+kt;if(et==ot&&St.length>=ot+g.length-ft&&St.slice(ot-ft,ot-ft+g.length)==g)return ot}}return-1}function replaceNodes(it,g,et,ot,ct){let ut=[];for(let dt=0,ft=0;dt<it.length;dt++){let St=it[dt],kt=ft,Tt=ft+=St.size;kt>=et||Tt<=g?ut.push(St):(kt<g&&ut.push(St.slice(0,g-kt,ot)),ct&&(ut.push(ct),ct=void 0),Tt>et&&ut.push(St.slice(et-kt,St.size,ot)))}return ut}function selectionFromDOM(it,g=null){let et=it.domSelectionRange(),ot=it.state.doc;if(!et.focusNode)return null;let ct=it.docView.nearestDesc(et.focusNode),ut=ct&&ct.size==0,dt=it.docView.posFromDOM(et.focusNode,et.focusOffset,1);if(dt<0)return null;let ft=ot.resolve(dt),St,kt;if(selectionCollapsed(et)){for(St=dt;ct&&!ct.node;)ct=ct.parent;let Rt=ct.node;if(ct&&Rt.isAtom&&NodeSelection.isSelectable(Rt)&&ct.parent&&!(Rt.isInline&&isOnEdge(et.focusNode,et.focusOffset,ct.dom))){let jt=ct.posBefore;kt=new NodeSelection(dt==jt?ft:ot.resolve(jt))}}else{if(et instanceof it.dom.ownerDocument.defaultView.Selection&&et.rangeCount>1){let Rt=dt,jt=dt;for(let $t=0;$t<et.rangeCount;$t++){let Ft=et.getRangeAt($t);Rt=Math.min(Rt,it.docView.posFromDOM(Ft.startContainer,Ft.startOffset,1)),jt=Math.max(jt,it.docView.posFromDOM(Ft.endContainer,Ft.endOffset,-1))}if(Rt<0)return null;[St,dt]=jt==it.state.selection.anchor?[jt,Rt]:[Rt,jt],ft=ot.resolve(dt)}else St=it.docView.posFromDOM(et.anchorNode,et.anchorOffset,1);if(St<0)return null}let Tt=ot.resolve(St);if(!kt){let Rt=g=="pointer"||it.state.selection.head<ft.pos&&!ut?1:-1;kt=selectionBetween(it,Tt,ft,Rt)}return kt}function editorOwnsSelection(it){return it.editable?it.hasFocus():hasSelection(it)&&document.activeElement&&document.activeElement.contains(it.dom)}function selectionToDOM(it,g=!1){let et=it.state.selection;if(syncNodeSelection(it,et),!!editorOwnsSelection(it)){if(!g&&it.input.mouseDown&&it.input.mouseDown.allowDefault&&chrome){let ot=it.domSelectionRange(),ct=it.domObserver.currentSelection;if(ot.anchorNode&&ct.anchorNode&&isEquivalentPosition(ot.anchorNode,ot.anchorOffset,ct.anchorNode,ct.anchorOffset)){it.input.mouseDown.delayedSelectionSync=!0,it.domObserver.setCurSelection();return}}if(it.domObserver.disconnectSelection(),it.cursorWrapper)selectCursorWrapper(it);else{let{anchor:ot,head:ct}=et,ut,dt;brokenSelectBetweenUneditable&&!(et instanceof TextSelection)&&(et.$from.parent.inlineContent||(ut=temporarilyEditableNear(it,et.from)),!et.empty&&!et.$from.parent.inlineContent&&(dt=temporarilyEditableNear(it,et.to))),it.docView.setSelection(ot,ct,it,g),brokenSelectBetweenUneditable&&(ut&&resetEditable(ut),dt&&resetEditable(dt)),et.visible?it.dom.classList.remove("ProseMirror-hideselection"):(it.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(it))}it.domObserver.setCurSelection(),it.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(it,g){let{node:et,offset:ot}=it.docView.domFromPos(g,0),ct=ot<et.childNodes.length?et.childNodes[ot]:null,ut=ot?et.childNodes[ot-1]:null;if(safari&&ct&&ct.contentEditable=="false")return setEditable(ct);if((!ct||ct.contentEditable=="false")&&(!ut||ut.contentEditable=="false")){if(ct)return setEditable(ct);if(ut)return setEditable(ut)}}function setEditable(it){return it.contentEditable="true",safari&&it.draggable&&(it.draggable=!1,it.wasDraggable=!0),it}function resetEditable(it){it.contentEditable="false",it.wasDraggable&&(it.draggable=!0,it.wasDraggable=null)}function removeClassOnSelectionChange(it){let g=it.dom.ownerDocument;g.removeEventListener("selectionchange",it.input.hideSelectionGuard);let et=it.domSelectionRange(),ot=et.anchorNode,ct=et.anchorOffset;g.addEventListener("selectionchange",it.input.hideSelectionGuard=()=>{(et.anchorNode!=ot||et.anchorOffset!=ct)&&(g.removeEventListener("selectionchange",it.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(it)||it.state.selection.visible)&&it.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(it){let g=it.domSelection();if(!g)return;let et=it.cursorWrapper.dom,ot=et.nodeName=="IMG";ot?g.collapse(et.parentNode,domIndex(et)+1):g.collapse(et,0),!ot&&!it.state.selection.visible&&ie$1&&ie_version<=11&&(et.disabled=!0,et.disabled=!1)}function syncNodeSelection(it,g){if(g instanceof NodeSelection){let et=it.docView.descAt(g.from);et!=it.lastSelectedViewDesc&&(clearNodeSelection(it),et&&et.selectNode(),it.lastSelectedViewDesc=et)}else clearNodeSelection(it)}function clearNodeSelection(it){it.lastSelectedViewDesc&&(it.lastSelectedViewDesc.parent&&it.lastSelectedViewDesc.deselectNode(),it.lastSelectedViewDesc=void 0)}function selectionBetween(it,g,et,ot){return it.someProp("createSelectionBetween",ct=>ct(it,g,et))||TextSelection.between(g,et,ot)}function hasFocusAndSelection(it){return it.editable&&!it.hasFocus()?!1:hasSelection(it)}function hasSelection(it){let g=it.domSelectionRange();if(!g.anchorNode)return!1;try{return it.dom.contains(g.anchorNode.nodeType==3?g.anchorNode.parentNode:g.anchorNode)&&(it.editable||it.dom.contains(g.focusNode.nodeType==3?g.focusNode.parentNode:g.focusNode))}catch{return!1}}function anchorInRightPlace(it){let g=it.docView.domFromPos(it.state.selection.anchor,0),et=it.domSelectionRange();return isEquivalentPosition(g.node,g.offset,et.anchorNode,et.anchorOffset)}function moveSelectionBlock(it,g){let{$anchor:et,$head:ot}=it.selection,ct=g>0?et.max(ot):et.min(ot),ut=ct.parent.inlineContent?ct.depth?it.doc.resolve(g>0?ct.after():ct.before()):null:ct;return ut&&Selection.findFrom(ut,g)}function apply(it,g){return it.dispatch(it.state.tr.setSelection(g).scrollIntoView()),!0}function selectHorizontally(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection)if(et.indexOf("s")>-1){let{$head:ct}=ot,ut=ct.textOffset?null:g<0?ct.nodeBefore:ct.nodeAfter;if(!ut||ut.isText||!ut.isLeaf)return!1;let dt=it.state.doc.resolve(ct.pos+ut.nodeSize*(g<0?-1:1));return apply(it,new TextSelection(ot.$anchor,dt))}else if(ot.empty){if(it.endOfTextblock(g>0?"forward":"backward")){let ct=moveSelectionBlock(it.state,g);return ct&&ct instanceof NodeSelection?apply(it,ct):!1}else if(!(mac$2&&et.indexOf("m")>-1)){let ct=ot.$head,ut=ct.textOffset?null:g<0?ct.nodeBefore:ct.nodeAfter,dt;if(!ut||ut.isText)return!1;let ft=g<0?ct.pos-ut.nodeSize:ct.pos;return ut.isAtom||(dt=it.docView.descAt(ft))&&!dt.contentDOM?NodeSelection.isSelectable(ut)?apply(it,new NodeSelection(g<0?it.state.doc.resolve(ct.pos-ut.nodeSize):ct)):webkit?apply(it,new TextSelection(it.state.doc.resolve(g<0?ft:ft+ut.nodeSize))):!1:!1}}else return!1;else{if(ot instanceof NodeSelection&&ot.node.isInline)return apply(it,new TextSelection(g>0?ot.$to:ot.$from));{let ct=moveSelectionBlock(it.state,g);return ct?apply(it,ct):!1}}}function nodeLen(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function isIgnorable(it,g){let et=it.pmViewDesc;return et&&et.size==0&&(g<0||it.nextSibling||it.nodeName!="BR")}function skipIgnoredNodes(it,g){return g<0?skipIgnoredNodesBefore(it):skipIgnoredNodesAfter(it)}function skipIgnoredNodesBefore(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ct,ut,dt=!1;for(gecko&&et.nodeType==1&&ot<nodeLen(et)&&isIgnorable(et.childNodes[ot],-1)&&(dt=!0);;)if(ot>0){if(et.nodeType!=1)break;{let ft=et.childNodes[ot-1];if(isIgnorable(ft,-1))ct=et,ut=--ot;else if(ft.nodeType==3)et=ft,ot=et.nodeValue.length;else break}}else{if(isBlockNode(et))break;{let ft=et.previousSibling;for(;ft&&isIgnorable(ft,-1);)ct=et.parentNode,ut=domIndex(ft),ft=ft.previousSibling;if(ft)et=ft,ot=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=0}}}dt?setSelFocus(it,et,ot):ct&&setSelFocus(it,ct,ut)}function skipIgnoredNodesAfter(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ct=nodeLen(et),ut,dt;for(;;)if(ot<ct){if(et.nodeType!=1)break;let ft=et.childNodes[ot];if(isIgnorable(ft,1))ut=et,dt=++ot;else break}else{if(isBlockNode(et))break;{let ft=et.nextSibling;for(;ft&&isIgnorable(ft,1);)ut=ft.parentNode,dt=domIndex(ft)+1,ft=ft.nextSibling;if(ft)et=ft,ot=0,ct=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=ct=0}}}ut&&setSelFocus(it,ut,dt)}function isBlockNode(it){let g=it.pmViewDesc;return g&&g.node&&g.node.isBlock}function textNodeAfter(it,g){for(;it&&g==it.childNodes.length&&!hasBlockDesc(it);)g=domIndex(it)+1,it=it.parentNode;for(;it&&g<it.childNodes.length;){let et=it.childNodes[g];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=0}}function textNodeBefore(it,g){for(;it&&!g&&!hasBlockDesc(it);)g=domIndex(it),it=it.parentNode;for(;it&&g;){let et=it.childNodes[g-1];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=it.childNodes.length}}function setSelFocus(it,g,et){if(g.nodeType!=3){let ut,dt;(dt=textNodeAfter(g,et))?(g=dt,et=0):(ut=textNodeBefore(g,et))&&(g=ut,et=ut.nodeValue.length)}let ot=it.domSelection();if(!ot)return;if(selectionCollapsed(ot)){let ut=document.createRange();ut.setEnd(g,et),ut.setStart(g,et),ot.removeAllRanges(),ot.addRange(ut)}else ot.extend&&ot.extend(g,et);it.domObserver.setCurSelection();let{state:ct}=it;setTimeout(()=>{it.state==ct&&selectionToDOM(it)},50)}function findDirection(it,g){let et=it.state.doc.resolve(g);if(!(chrome||windows$1)&&et.parent.inlineContent){let ct=it.coordsAtPos(g);if(g>et.start()){let ut=it.coordsAtPos(g-1),dt=(ut.top+ut.bottom)/2;if(dt>ct.top&&dt<ct.bottom&&Math.abs(ut.left-ct.left)>1)return ut.left<ct.left?"ltr":"rtl"}if(g<et.end()){let ut=it.coordsAtPos(g+1),dt=(ut.top+ut.bottom)/2;if(dt>ct.top&&dt<ct.bottom&&Math.abs(ut.left-ct.left)>1)return ut.left>ct.left?"ltr":"rtl"}}return getComputedStyle(it.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection&&!ot.empty||et.indexOf("s")>-1||mac$2&&et.indexOf("m")>-1)return!1;let{$from:ct,$to:ut}=ot;if(!ct.parent.inlineContent||it.endOfTextblock(g<0?"up":"down")){let dt=moveSelectionBlock(it.state,g);if(dt&&dt instanceof NodeSelection)return apply(it,dt)}if(!ct.parent.inlineContent){let dt=g<0?ct:ut,ft=ot instanceof AllSelection?Selection.near(dt,g):Selection.findFrom(dt,g);return ft?apply(it,ft):!1}return!1}function stopNativeHorizontalDelete(it,g){if(!(it.state.selection instanceof TextSelection))return!0;let{$head:et,$anchor:ot,empty:ct}=it.state.selection;if(!et.sameParent(ot))return!0;if(!ct)return!1;if(it.endOfTextblock(g>0?"forward":"backward"))return!0;let ut=!et.textOffset&&(g<0?et.nodeBefore:et.nodeAfter);if(ut&&!ut.isText){let dt=it.state.tr;return g<0?dt.delete(et.pos-ut.nodeSize,et.pos):dt.delete(et.pos,et.pos+ut.nodeSize),it.dispatch(dt),!0}return!1}function switchEditable(it,g,et){it.domObserver.stop(),g.contentEditable=et,it.domObserver.start()}function safariDownArrowBug(it){if(!safari||it.state.selection.$head.parentOffset>0)return!1;let{focusNode:g,focusOffset:et}=it.domSelectionRange();if(g&&g.nodeType==1&&et==0&&g.firstChild&&g.firstChild.contentEditable=="false"){let ot=g.firstChild;switchEditable(it,ot,"true"),setTimeout(()=>switchEditable(it,ot,"false"),20)}return!1}function getMods(it){let g="";return it.ctrlKey&&(g+="c"),it.metaKey&&(g+="m"),it.altKey&&(g+="a"),it.shiftKey&&(g+="s"),g}function captureKeyDown(it,g){let et=g.keyCode,ot=getMods(g);if(et==8||mac$2&&et==72&&ot=="c")return stopNativeHorizontalDelete(it,-1)||skipIgnoredNodes(it,-1);if(et==46&&!g.shiftKey||mac$2&&et==68&&ot=="c")return stopNativeHorizontalDelete(it,1)||skipIgnoredNodes(it,1);if(et==13||et==27)return!0;if(et==37||mac$2&&et==66&&ot=="c"){let ct=et==37?findDirection(it,it.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(it,ct,ot)||skipIgnoredNodes(it,ct)}else if(et==39||mac$2&&et==70&&ot=="c"){let ct=et==39?findDirection(it,it.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(it,ct,ot)||skipIgnoredNodes(it,ct)}else{if(et==38||mac$2&&et==80&&ot=="c")return selectVertically(it,-1,ot)||skipIgnoredNodes(it,-1);if(et==40||mac$2&&et==78&&ot=="c")return safariDownArrowBug(it)||selectVertically(it,1,ot)||skipIgnoredNodes(it,1);if(ot==(mac$2?"m":"c")&&(et==66||et==73||et==89||et==90))return!0}return!1}function serializeForClipboard(it,g){it.someProp("transformCopied",$t=>{g=$t(g,it)});let et=[],{content:ot,openStart:ct,openEnd:ut}=g;for(;ct>1&&ut>1&&ot.childCount==1&&ot.firstChild.childCount==1;){ct--,ut--;let $t=ot.firstChild;et.push($t.type.name,$t.attrs!=$t.type.defaultAttrs?$t.attrs:null),ot=$t.content}let dt=it.someProp("clipboardSerializer")||DOMSerializer.fromSchema(it.state.schema),ft=detachedDoc(),St=ft.createElement("div");St.appendChild(dt.serializeFragment(ot,{document:ft}));let kt=St.firstChild,Tt,Rt=0;for(;kt&&kt.nodeType==1&&(Tt=wrapMap[kt.nodeName.toLowerCase()]);){for(let $t=Tt.length-1;$t>=0;$t--){let Ft=ft.createElement(Tt[$t]);for(;St.firstChild;)Ft.appendChild(St.firstChild);St.appendChild(Ft),Rt++}kt=St.firstChild}kt&&kt.nodeType==1&&kt.setAttribute("data-pm-slice",`${ct} ${ut}${Rt?` -${Rt}`:""} ${JSON.stringify(et)}`);let jt=it.someProp("clipboardTextSerializer",$t=>$t(g,it))||g.content.textBetween(0,g.content.size,`

`);return{dom:St,text:jt,slice:g}}function parseFromClipboard(it,g,et,ot,ct){let ut=ct.parent.type.spec.code,dt,ft;if(!et&&!g)return null;let St=!!g&&(ot||ut||!et);if(St){if(it.someProp("transformPastedText",jt=>{g=jt(g,ut||ot,it)}),ut)return ft=new Slice(Fragment.from(it.state.schema.text(g.replace(/\r\n?/g,`
`))),0,0),it.someProp("transformPasted",jt=>{ft=jt(ft,it,!0)}),ft;let Rt=it.someProp("clipboardTextParser",jt=>jt(g,ct,ot,it));if(Rt)ft=Rt;else{let jt=ct.marks(),{schema:$t}=it.state,Ft=DOMSerializer.fromSchema($t);dt=document.createElement("div"),g.split(/(?:\r\n?|\n)+/).forEach(Ht=>{let Kt=dt.appendChild(document.createElement("p"));Ht&&Kt.appendChild(Ft.serializeNode($t.text(Ht,jt)))})}}else it.someProp("transformPastedHTML",Rt=>{et=Rt(et,it)}),dt=readHTML(et),webkit&&restoreReplacedSpaces(dt);let kt=dt&&dt.querySelector("[data-pm-slice]"),Tt=kt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(kt.getAttribute("data-pm-slice")||"");if(Tt&&Tt[3])for(let Rt=+Tt[3];Rt>0;Rt--){let jt=dt.firstChild;for(;jt&&jt.nodeType!=1;)jt=jt.nextSibling;if(!jt)break;dt=jt}if(ft||(ft=(it.someProp("clipboardParser")||it.someProp("domParser")||DOMParser.fromSchema(it.state.schema)).parseSlice(dt,{preserveWhitespace:!!(St||Tt),context:ct,ruleFromNode(jt){return jt.nodeName=="BR"&&!jt.nextSibling&&jt.parentNode&&!inlineParents.test(jt.parentNode.nodeName)?{ignore:!0}:null}})),Tt)ft=addContext(closeSlice(ft,+Tt[1],+Tt[2]),Tt[4]);else if(ft=Slice.maxOpen(normalizeSiblings(ft.content,ct),!0),ft.openStart||ft.openEnd){let Rt=0,jt=0;for(let $t=ft.content.firstChild;Rt<ft.openStart&&!$t.type.spec.isolating;Rt++,$t=$t.firstChild);for(let $t=ft.content.lastChild;jt<ft.openEnd&&!$t.type.spec.isolating;jt++,$t=$t.lastChild);ft=closeSlice(ft,Rt,jt)}return it.someProp("transformPasted",Rt=>{ft=Rt(ft,it,St)}),ft}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(it,g){if(it.childCount<2)return it;for(let et=g.depth;et>=0;et--){let ct=g.node(et).contentMatchAt(g.index(et)),ut,dt=[];if(it.forEach(ft=>{if(!dt)return;let St=ct.findWrapping(ft.type),kt;if(!St)return dt=null;if(kt=dt.length&&ut.length&&addToSibling(St,ut,ft,dt[dt.length-1],0))dt[dt.length-1]=kt;else{dt.length&&(dt[dt.length-1]=closeRight(dt[dt.length-1],ut.length));let Tt=withWrappers(ft,St);dt.push(Tt),ct=ct.matchType(Tt.type),ut=St}}),dt)return Fragment.from(dt)}return it}function withWrappers(it,g,et=0){for(let ot=g.length-1;ot>=et;ot--)it=g[ot].create(null,Fragment.from(it));return it}function addToSibling(it,g,et,ot,ct){if(ct<it.length&&ct<g.length&&it[ct]==g[ct]){let ut=addToSibling(it,g,et,ot.lastChild,ct+1);if(ut)return ot.copy(ot.content.replaceChild(ot.childCount-1,ut));if(ot.contentMatchAt(ot.childCount).matchType(ct==it.length-1?et.type:it[ct+1]))return ot.copy(ot.content.append(Fragment.from(withWrappers(et,it,ct+1))))}}function closeRight(it,g){if(g==0)return it;let et=it.content.replaceChild(it.childCount-1,closeRight(it.lastChild,g-1)),ot=it.contentMatchAt(it.childCount).fillBefore(Fragment.empty,!0);return it.copy(et.append(ot))}function closeRange(it,g,et,ot,ct,ut){let dt=g<0?it.firstChild:it.lastChild,ft=dt.content;return it.childCount>1&&(ut=0),ct<ot-1&&(ft=closeRange(ft,g,et,ot,ct+1,ut)),ct>=et&&(ft=g<0?dt.contentMatchAt(0).fillBefore(ft,ut<=ct).append(ft):ft.append(dt.contentMatchAt(dt.childCount).fillBefore(Fragment.empty,!0))),it.replaceChild(g<0?0:it.childCount-1,dt.copy(ft))}function closeSlice(it,g,et){return g<it.openStart&&(it=new Slice(closeRange(it.content,-1,g,it.openStart,0,it.openEnd),g,it.openEnd)),et<it.openEnd&&(it=new Slice(closeRange(it.content,1,et,it.openEnd,0,0),it.openStart,et)),it}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(it){let g=window.trustedTypes;return g?(_policy||(_policy=g.defaultPolicy||g.createPolicy("ProseMirrorClipboard",{createHTML:et=>et})),_policy.createHTML(it)):it}function readHTML(it){let g=/^(\s*<meta [^>]*>)*/.exec(it);g&&(it=it.slice(g[0].length));let et=detachedDoc().createElement("div"),ot=/<([a-z][^>\s]+)/i.exec(it),ct;if((ct=ot&&wrapMap[ot[1].toLowerCase()])&&(it=ct.map(ut=>"<"+ut+">").join("")+it+ct.map(ut=>"</"+ut+">").reverse().join("")),et.innerHTML=maybeWrapTrusted(it),ct)for(let ut=0;ut<ct.length;ut++)et=et.querySelector(ct[ut])||et;return et}function restoreReplacedSpaces(it){let g=it.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let et=0;et<g.length;et++){let ot=g[et];ot.childNodes.length==1&&ot.textContent==""&&ot.parentNode&&ot.parentNode.replaceChild(it.ownerDocument.createTextNode(" "),ot)}}function addContext(it,g){if(!it.size)return it;let et=it.content.firstChild.type.schema,ot;try{ot=JSON.parse(g)}catch{return it}let{content:ct,openStart:ut,openEnd:dt}=it;for(let ft=ot.length-2;ft>=0;ft-=2){let St=et.nodes[ot[ft]];if(!St||St.hasRequiredAttrs())break;ct=Fragment.from(St.create(ot[ft+1],ct)),ut++,dt++}return new Slice(ct,ut,dt)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(it){for(let g in handlers){let et=handlers[g];it.dom.addEventListener(g,it.input.eventHandlers[g]=ot=>{eventBelongsToView(it,ot)&&!runCustomHandler(it,ot)&&(it.editable||!(ot.type in editHandlers))&&et(it,ot)},passiveHandlers[g]?{passive:!0}:void 0)}safari&&it.dom.addEventListener("input",()=>null),ensureListeners(it)}function setSelectionOrigin(it,g){it.input.lastSelectionOrigin=g,it.input.lastSelectionTime=Date.now()}function destroyInput(it){it.domObserver.stop();for(let g in it.input.eventHandlers)it.dom.removeEventListener(g,it.input.eventHandlers[g]);clearTimeout(it.input.composingTimeout),clearTimeout(it.input.lastIOSEnterFallbackTimeout)}function ensureListeners(it){it.someProp("handleDOMEvents",g=>{for(let et in g)it.input.eventHandlers[et]||it.dom.addEventListener(et,it.input.eventHandlers[et]=ot=>runCustomHandler(it,ot))})}function runCustomHandler(it,g){return it.someProp("handleDOMEvents",et=>{let ot=et[g.type];return ot?ot(it,g)||g.defaultPrevented:!1})}function eventBelongsToView(it,g){if(!g.bubbles)return!0;if(g.defaultPrevented)return!1;for(let et=g.target;et!=it.dom;et=et.parentNode)if(!et||et.nodeType==11||et.pmViewDesc&&et.pmViewDesc.stopEvent(g))return!1;return!0}function dispatchEvent(it,g){!runCustomHandler(it,g)&&handlers[g.type]&&(it.editable||!(g.type in editHandlers))&&handlers[g.type](it,g)}editHandlers.keydown=(it,g)=>{let et=g;if(it.input.shiftKey=et.keyCode==16||et.shiftKey,!inOrNearComposition(it,et)&&(it.input.lastKeyCode=et.keyCode,it.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&et.keyCode==13)))if(et.keyCode!=229&&it.domObserver.forceFlush(),ios&&et.keyCode==13&&!et.ctrlKey&&!et.altKey&&!et.metaKey){let ot=Date.now();it.input.lastIOSEnter=ot,it.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{it.input.lastIOSEnter==ot&&(it.someProp("handleKeyDown",ct=>ct(it,keyEvent(13,"Enter"))),it.input.lastIOSEnter=0)},200)}else it.someProp("handleKeyDown",ot=>ot(it,et))||captureKeyDown(it,et)?et.preventDefault():setSelectionOrigin(it,"key")};editHandlers.keyup=(it,g)=>{g.keyCode==16&&(it.input.shiftKey=!1)};editHandlers.keypress=(it,g)=>{let et=g;if(inOrNearComposition(it,et)||!et.charCode||et.ctrlKey&&!et.altKey||mac$2&&et.metaKey)return;if(it.someProp("handleKeyPress",ct=>ct(it,et))){et.preventDefault();return}let ot=it.state.selection;if(!(ot instanceof TextSelection)||!ot.$from.sameParent(ot.$to)){let ct=String.fromCharCode(et.charCode),ut=()=>it.state.tr.insertText(ct).scrollIntoView();!/[\r\n]/.test(ct)&&!it.someProp("handleTextInput",dt=>dt(it,ot.$from.pos,ot.$to.pos,ct,ut))&&it.dispatch(ut()),et.preventDefault()}};function eventCoords(it){return{left:it.clientX,top:it.clientY}}function isNear(it,g){let et=g.x-it.clientX,ot=g.y-it.clientY;return et*et+ot*ot<100}function runHandlerOnContext(it,g,et,ot,ct){if(ot==-1)return!1;let ut=it.state.doc.resolve(ot);for(let dt=ut.depth+1;dt>0;dt--)if(it.someProp(g,ft=>dt>ut.depth?ft(it,et,ut.nodeAfter,ut.before(dt),ct,!0):ft(it,et,ut.node(dt),ut.before(dt),ct,!1)))return!0;return!1}function updateSelection(it,g,et){if(it.focused||it.focus(),it.state.selection.eq(g))return;let ot=it.state.tr.setSelection(g);et=="pointer"&&ot.setMeta("pointer",!0),it.dispatch(ot)}function selectClickedLeaf(it,g){if(g==-1)return!1;let et=it.state.doc.resolve(g),ot=et.nodeAfter;return ot&&ot.isAtom&&NodeSelection.isSelectable(ot)?(updateSelection(it,new NodeSelection(et),"pointer"),!0):!1}function selectClickedNode(it,g){if(g==-1)return!1;let et=it.state.selection,ot,ct;et instanceof NodeSelection&&(ot=et.node);let ut=it.state.doc.resolve(g);for(let dt=ut.depth+1;dt>0;dt--){let ft=dt>ut.depth?ut.nodeAfter:ut.node(dt);if(NodeSelection.isSelectable(ft)){ot&&et.$from.depth>0&&dt>=et.$from.depth&&ut.before(et.$from.depth+1)==et.$from.pos?ct=ut.before(et.$from.depth):ct=ut.before(dt);break}}return ct!=null?(updateSelection(it,NodeSelection.create(it.state.doc,ct),"pointer"),!0):!1}function handleSingleClick(it,g,et,ot,ct){return runHandlerOnContext(it,"handleClickOn",g,et,ot)||it.someProp("handleClick",ut=>ut(it,g,ot))||(ct?selectClickedNode(it,et):selectClickedLeaf(it,et))}function handleDoubleClick(it,g,et,ot){return runHandlerOnContext(it,"handleDoubleClickOn",g,et,ot)||it.someProp("handleDoubleClick",ct=>ct(it,g,ot))}function handleTripleClick(it,g,et,ot){return runHandlerOnContext(it,"handleTripleClickOn",g,et,ot)||it.someProp("handleTripleClick",ct=>ct(it,g,ot))||defaultTripleClick(it,et,ot)}function defaultTripleClick(it,g,et){if(et.button!=0)return!1;let ot=it.state.doc;if(g==-1)return ot.inlineContent?(updateSelection(it,TextSelection.create(ot,0,ot.content.size),"pointer"),!0):!1;let ct=ot.resolve(g);for(let ut=ct.depth+1;ut>0;ut--){let dt=ut>ct.depth?ct.nodeAfter:ct.node(ut),ft=ct.before(ut);if(dt.inlineContent)updateSelection(it,TextSelection.create(ot,ft+1,ft+1+dt.content.size),"pointer");else if(NodeSelection.isSelectable(dt))updateSelection(it,NodeSelection.create(ot,ft),"pointer");else continue;return!0}}function forceDOMFlush(it){return endComposition(it)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(it,g)=>{let et=g;it.input.shiftKey=et.shiftKey;let ot=forceDOMFlush(it),ct=Date.now(),ut="singleClick";ct-it.input.lastClick.time<500&&isNear(et,it.input.lastClick)&&!et[selectNodeModifier]&&it.input.lastClick.button==et.button&&(it.input.lastClick.type=="singleClick"?ut="doubleClick":it.input.lastClick.type=="doubleClick"&&(ut="tripleClick")),it.input.lastClick={time:ct,x:et.clientX,y:et.clientY,type:ut,button:et.button};let dt=it.posAtCoords(eventCoords(et));dt&&(ut=="singleClick"?(it.input.mouseDown&&it.input.mouseDown.done(),it.input.mouseDown=new MouseDown(it,dt,et,!!ot)):(ut=="doubleClick"?handleDoubleClick:handleTripleClick)(it,dt.pos,dt.inside,et)?et.preventDefault():setSelectionOrigin(it,"pointer"))};class MouseDown{constructor(g,et,ot,ct){this.view=g,this.pos=et,this.event=ot,this.flushed=ct,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=g.state.doc,this.selectNode=!!ot[selectNodeModifier],this.allowDefault=ot.shiftKey;let ut,dt;if(et.inside>-1)ut=g.state.doc.nodeAt(et.inside),dt=et.inside;else{let Tt=g.state.doc.resolve(et.pos);ut=Tt.parent,dt=Tt.depth?Tt.before():0}const ft=ct?null:ot.target,St=ft?g.docView.nearestDesc(ft,!0):null;this.target=St&&St.nodeDOM.nodeType==1?St.nodeDOM:null;let{selection:kt}=g.state;(ot.button==0&&ut.type.spec.draggable&&ut.type.spec.selectable!==!1||kt instanceof NodeSelection&&kt.from<=dt&&kt.to>dt)&&(this.mightDrag={node:ut,pos:dt,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),g.root.addEventListener("mouseup",this.up=this.up.bind(this)),g.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(g,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(g){if(this.done(),!this.view.dom.contains(g.target))return;let et=this.pos;this.view.state.doc!=this.startDoc&&(et=this.view.posAtCoords(eventCoords(g))),this.updateAllowDefault(g),this.allowDefault||!et?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,et.pos,et.inside,g,this.selectNode)?g.preventDefault():g.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(et.pos-this.view.state.selection.from),Math.abs(et.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(et.pos)),"pointer"),g.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(g){this.updateAllowDefault(g),setSelectionOrigin(this.view,"pointer"),g.buttons==0&&this.done()}updateAllowDefault(g){!this.allowDefault&&(Math.abs(this.event.x-g.clientX)>4||Math.abs(this.event.y-g.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=it=>{it.input.lastTouch=Date.now(),forceDOMFlush(it),setSelectionOrigin(it,"pointer")};handlers.touchmove=it=>{it.input.lastTouch=Date.now(),setSelectionOrigin(it,"pointer")};handlers.contextmenu=it=>forceDOMFlush(it);function inOrNearComposition(it,g){return it.composing?!0:safari&&Math.abs(g.timeStamp-it.input.compositionEndedAt)<500?(it.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=it=>{if(!it.composing){it.domObserver.flush();let{state:g}=it,et=g.selection.$to;if(g.selection instanceof TextSelection&&(g.storedMarks||!et.textOffset&&et.parentOffset&&et.nodeBefore.marks.some(ot=>ot.type.spec.inclusive===!1)))it.markCursor=it.state.storedMarks||et.marks(),endComposition(it,!0),it.markCursor=null;else if(endComposition(it,!g.selection.empty),gecko&&g.selection.empty&&et.parentOffset&&!et.textOffset&&et.nodeBefore.marks.length){let ot=it.domSelectionRange();for(let ct=ot.focusNode,ut=ot.focusOffset;ct&&ct.nodeType==1&&ut!=0;){let dt=ut<0?ct.lastChild:ct.childNodes[ut-1];if(!dt)break;if(dt.nodeType==3){let ft=it.domSelection();ft&&ft.collapse(dt,dt.nodeValue.length);break}else ct=dt,ut=-1}}it.input.composing=!0}scheduleComposeEnd(it,timeoutComposition)};editHandlers.compositionend=(it,g)=>{it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=g.timeStamp,it.input.compositionPendingChanges=it.domObserver.pendingRecords().length?it.input.compositionID:0,it.input.compositionNode=null,it.input.compositionPendingChanges&&Promise.resolve().then(()=>it.domObserver.flush()),it.input.compositionID++,scheduleComposeEnd(it,20))};function scheduleComposeEnd(it,g){clearTimeout(it.input.composingTimeout),g>-1&&(it.input.composingTimeout=setTimeout(()=>endComposition(it),g))}function clearComposition(it){for(it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=timestampFromCustomEvent());it.input.compositionNodes.length>0;)it.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(it){let g=it.domSelectionRange();if(!g.focusNode)return null;let et=textNodeBefore$1(g.focusNode,g.focusOffset),ot=textNodeAfter$1(g.focusNode,g.focusOffset);if(et&&ot&&et!=ot){let ct=ot.pmViewDesc,ut=it.domObserver.lastChangedTextNode;if(et==ut||ot==ut)return ut;if(!ct||!ct.isText(ot.nodeValue))return ot;if(it.input.compositionNode==ot){let dt=et.pmViewDesc;if(!(!dt||!dt.isText(et.nodeValue)))return ot}}return et||ot}function timestampFromCustomEvent(){let it=document.createEvent("Event");return it.initEvent("event",!0,!0),it.timeStamp}function endComposition(it,g=!1){if(!(android&&it.domObserver.flushingSoon>=0)){if(it.domObserver.forceFlush(),clearComposition(it),g||it.docView&&it.docView.dirty){let et=selectionFromDOM(it),ot=it.state.selection;return et&&!et.eq(ot)?it.dispatch(it.state.tr.setSelection(et)):(it.markCursor||g)&&!ot.$from.node(ot.$from.sharedDepth(ot.to)).inlineContent?it.dispatch(it.state.tr.deleteSelection()):it.updateState(it.state),!0}return!1}}function captureCopy(it,g){if(!it.dom.parentNode)return;let et=it.dom.parentNode.appendChild(document.createElement("div"));et.appendChild(g),et.style.cssText="position: fixed; left: -10000px; top: 10px";let ot=getSelection(),ct=document.createRange();ct.selectNodeContents(g),it.dom.blur(),ot.removeAllRanges(),ot.addRange(ct),setTimeout(()=>{et.parentNode&&et.parentNode.removeChild(et),it.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(it,g)=>{let et=g,ot=it.state.selection,ct=et.type=="cut";if(ot.empty)return;let ut=brokenClipboardAPI?null:et.clipboardData,dt=ot.content(),{dom:ft,text:St}=serializeForClipboard(it,dt);ut?(et.preventDefault(),ut.clearData(),ut.setData("text/html",ft.innerHTML),ut.setData("text/plain",St)):captureCopy(it,ft),ct&&it.dispatch(it.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(it){return it.openStart==0&&it.openEnd==0&&it.content.childCount==1?it.content.firstChild:null}function capturePaste(it,g){if(!it.dom.parentNode)return;let et=it.input.shiftKey||it.state.selection.$from.parent.type.spec.code,ot=it.dom.parentNode.appendChild(document.createElement(et?"textarea":"div"));et||(ot.contentEditable="true"),ot.style.cssText="position: fixed; left: -10000px; top: 10px",ot.focus();let ct=it.input.shiftKey&&it.input.lastKeyCode!=45;setTimeout(()=>{it.focus(),ot.parentNode&&ot.parentNode.removeChild(ot),et?doPaste(it,ot.value,null,ct,g):doPaste(it,ot.textContent,ot.innerHTML,ct,g)},50)}function doPaste(it,g,et,ot,ct){let ut=parseFromClipboard(it,g,et,ot,it.state.selection.$from);if(it.someProp("handlePaste",St=>St(it,ct,ut||Slice.empty)))return!0;if(!ut)return!1;let dt=sliceSingleNode(ut),ft=dt?it.state.tr.replaceSelectionWith(dt,ot):it.state.tr.replaceSelection(ut);return it.dispatch(ft.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(it){let g=it.getData("text/plain")||it.getData("Text");if(g)return g;let et=it.getData("text/uri-list");return et?et.replace(/\r?\n/g," "):""}editHandlers.paste=(it,g)=>{let et=g;if(it.composing&&!android)return;let ot=brokenClipboardAPI?null:et.clipboardData,ct=it.input.shiftKey&&it.input.lastKeyCode!=45;ot&&doPaste(it,getText$1(ot),ot.getData("text/html"),ct,et)?et.preventDefault():capturePaste(it,et)};class Dragging{constructor(g,et,ot){this.slice=g,this.move=et,this.node=ot}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(it,g){let et=it.someProp("dragCopies",ot=>!ot(g));return et??!g[dragCopyModifier]}handlers.dragstart=(it,g)=>{let et=g,ot=it.input.mouseDown;if(ot&&ot.done(),!et.dataTransfer)return;let ct=it.state.selection,ut=ct.empty?null:it.posAtCoords(eventCoords(et)),dt;if(!(ut&&ut.pos>=ct.from&&ut.pos<=(ct instanceof NodeSelection?ct.to-1:ct.to))){if(ot&&ot.mightDrag)dt=NodeSelection.create(it.state.doc,ot.mightDrag.pos);else if(et.target&&et.target.nodeType==1){let Rt=it.docView.nearestDesc(et.target,!0);Rt&&Rt.node.type.spec.draggable&&Rt!=it.docView&&(dt=NodeSelection.create(it.state.doc,Rt.posBefore))}}let ft=(dt||it.state.selection).content(),{dom:St,text:kt,slice:Tt}=serializeForClipboard(it,ft);(!et.dataTransfer.files.length||!chrome||chrome_version>120)&&et.dataTransfer.clearData(),et.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",St.innerHTML),et.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||et.dataTransfer.setData("text/plain",kt),it.dragging=new Dragging(Tt,dragMoves(it,et),dt)};handlers.dragend=it=>{let g=it.dragging;window.setTimeout(()=>{it.dragging==g&&(it.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(it,g)=>g.preventDefault();editHandlers.drop=(it,g)=>{let et=g,ot=it.dragging;if(it.dragging=null,!et.dataTransfer)return;let ct=it.posAtCoords(eventCoords(et));if(!ct)return;let ut=it.state.doc.resolve(ct.pos),dt=ot&&ot.slice;dt?it.someProp("transformPasted",Ft=>{dt=Ft(dt,it,!1)}):dt=parseFromClipboard(it,getText$1(et.dataTransfer),brokenClipboardAPI?null:et.dataTransfer.getData("text/html"),!1,ut);let ft=!!(ot&&dragMoves(it,et));if(it.someProp("handleDrop",Ft=>Ft(it,et,dt||Slice.empty,ft))){et.preventDefault();return}if(!dt)return;et.preventDefault();let St=dt?dropPoint(it.state.doc,ut.pos,dt):ut.pos;St==null&&(St=ut.pos);let kt=it.state.tr;if(ft){let{node:Ft}=ot;Ft?Ft.replace(kt):kt.deleteSelection()}let Tt=kt.mapping.map(St),Rt=dt.openStart==0&&dt.openEnd==0&&dt.content.childCount==1,jt=kt.doc;if(Rt?kt.replaceRangeWith(Tt,Tt,dt.content.firstChild):kt.replaceRange(Tt,Tt,dt),kt.doc.eq(jt))return;let $t=kt.doc.resolve(Tt);if(Rt&&NodeSelection.isSelectable(dt.content.firstChild)&&$t.nodeAfter&&$t.nodeAfter.sameMarkup(dt.content.firstChild))kt.setSelection(new NodeSelection($t));else{let Ft=kt.mapping.map(St);kt.mapping.maps[kt.mapping.maps.length-1].forEach((Ht,Kt,Bt,Ut)=>Ft=Ut),kt.setSelection(selectionBetween(it,$t,kt.doc.resolve(Ft)))}it.focus(),it.dispatch(kt.setMeta("uiEvent","drop"))};handlers.focus=it=>{it.input.lastFocus=Date.now(),it.focused||(it.domObserver.stop(),it.dom.classList.add("ProseMirror-focused"),it.domObserver.start(),it.focused=!0,setTimeout(()=>{it.docView&&it.hasFocus()&&!it.domObserver.currentSelection.eq(it.domSelectionRange())&&selectionToDOM(it)},20))};handlers.blur=(it,g)=>{let et=g;it.focused&&(it.domObserver.stop(),it.dom.classList.remove("ProseMirror-focused"),it.domObserver.start(),et.relatedTarget&&it.dom.contains(et.relatedTarget)&&it.domObserver.currentSelection.clear(),it.focused=!1)};handlers.beforeinput=(it,g)=>{if(chrome&&android&&g.inputType=="deleteContentBackward"){it.domObserver.flushSoon();let{domChangeCount:ot}=it.input;setTimeout(()=>{if(it.input.domChangeCount!=ot||(it.dom.blur(),it.focus(),it.someProp("handleKeyDown",ut=>ut(it,keyEvent(8,"Backspace")))))return;let{$cursor:ct}=it.state.selection;ct&&ct.pos>0&&it.dispatch(it.state.tr.delete(ct.pos-1,ct.pos).scrollIntoView())},50)}};for(let it in editHandlers)handlers[it]=editHandlers[it];function compareObjs(it,g){if(it==g)return!0;for(let et in it)if(it[et]!==g[et])return!1;for(let et in g)if(!(et in it))return!1;return!0}class WidgetType{constructor(g,et){this.toDOM=g,this.spec=et||noSpec,this.side=this.spec.side||0}map(g,et,ot,ct){let{pos:ut,deleted:dt}=g.mapResult(et.from+ct,this.side<0?-1:1);return dt?null:new Decoration(ut-ot,ut-ot,this)}valid(){return!0}eq(g){return this==g||g instanceof WidgetType&&(this.spec.key&&this.spec.key==g.spec.key||this.toDOM==g.toDOM&&compareObjs(this.spec,g.spec))}destroy(g){this.spec.destroy&&this.spec.destroy(g)}}class InlineType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ct){let ut=g.map(et.from+ct,this.spec.inclusiveStart?-1:1)-ot,dt=g.map(et.to+ct,this.spec.inclusiveEnd?1:-1)-ot;return ut>=dt?null:new Decoration(ut,dt,this)}valid(g,et){return et.from<et.to}eq(g){return this==g||g instanceof InlineType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}static is(g){return g.type instanceof InlineType}destroy(){}}class NodeType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ct){let ut=g.mapResult(et.from+ct,1);if(ut.deleted)return null;let dt=g.mapResult(et.to+ct,-1);return dt.deleted||dt.pos<=ut.pos?null:new Decoration(ut.pos-ot,dt.pos-ot,this)}valid(g,et){let{index:ot,offset:ct}=g.content.findIndex(et.from),ut;return ct==et.from&&!(ut=g.child(ot)).isText&&ct+ut.nodeSize==et.to}eq(g){return this==g||g instanceof NodeType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}destroy(){}}class Decoration{constructor(g,et,ot){this.from=g,this.to=et,this.type=ot}copy(g,et){return new Decoration(g,et,this.type)}eq(g,et=0){return this.type.eq(g.type)&&this.from+et==g.from&&this.to+et==g.to}map(g,et,ot){return this.type.map(g,this,et,ot)}static widget(g,et,ot){return new Decoration(g,g,new WidgetType(et,ot))}static inline(g,et,ot,ct){return new Decoration(g,et,new InlineType(ot,ct))}static node(g,et,ot,ct){return new Decoration(g,et,new NodeType(ot,ct))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(g,et){this.local=g.length?g:none,this.children=et.length?et:none}static create(g,et){return et.length?buildTree(et,g,0,noSpec):empty}find(g,et,ot){let ct=[];return this.findInner(g??0,et??1e9,ct,0,ot),ct}findInner(g,et,ot,ct,ut){for(let dt=0;dt<this.local.length;dt++){let ft=this.local[dt];ft.from<=et&&ft.to>=g&&(!ut||ut(ft.spec))&&ot.push(ft.copy(ft.from+ct,ft.to+ct))}for(let dt=0;dt<this.children.length;dt+=3)if(this.children[dt]<et&&this.children[dt+1]>g){let ft=this.children[dt]+1;this.children[dt+2].findInner(g-ft,et-ft,ot,ct+ft,ut)}}map(g,et,ot){return this==empty||g.maps.length==0?this:this.mapInner(g,et,0,0,ot||noSpec)}mapInner(g,et,ot,ct,ut){let dt;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft].map(g,ot,ct);St&&St.type.valid(et,St)?(dt||(dt=[])).push(St):ut.onRemove&&ut.onRemove(this.local[ft].spec)}return this.children.length?mapChildren(this.children,dt||[],g,et,ot,ct,ut):dt?new DecorationSet(dt.sort(byPos),none):empty}add(g,et){return et.length?this==empty?DecorationSet.create(g,et):this.addInner(g,et,0):this}addInner(g,et,ot){let ct,ut=0;g.forEach((ft,St)=>{let kt=St+ot,Tt;if(Tt=takeSpansForNode(et,ft,kt)){for(ct||(ct=this.children.slice());ut<ct.length&&ct[ut]<St;)ut+=3;ct[ut]==St?ct[ut+2]=ct[ut+2].addInner(ft,Tt,kt+1):ct.splice(ut,0,St,St+ft.nodeSize,buildTree(Tt,ft,kt+1,noSpec)),ut+=3}});let dt=moveSpans(ut?withoutNulls(et):et,-ot);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||dt.splice(ft--,1);return new DecorationSet(dt.length?this.local.concat(dt).sort(byPos):this.local,ct||this.children)}remove(g){return g.length==0||this==empty?this:this.removeInner(g,0)}removeInner(g,et){let ot=this.children,ct=this.local;for(let ut=0;ut<ot.length;ut+=3){let dt,ft=ot[ut]+et,St=ot[ut+1]+et;for(let Tt=0,Rt;Tt<g.length;Tt++)(Rt=g[Tt])&&Rt.from>ft&&Rt.to<St&&(g[Tt]=null,(dt||(dt=[])).push(Rt));if(!dt)continue;ot==this.children&&(ot=this.children.slice());let kt=ot[ut+2].removeInner(dt,ft+1);kt!=empty?ot[ut+2]=kt:(ot.splice(ut,3),ut-=3)}if(ct.length){for(let ut=0,dt;ut<g.length;ut++)if(dt=g[ut])for(let ft=0;ft<ct.length;ft++)ct[ft].eq(dt,et)&&(ct==this.local&&(ct=this.local.slice()),ct.splice(ft--,1))}return ot==this.children&&ct==this.local?this:ct.length||ot.length?new DecorationSet(ct,ot):empty}forChild(g,et){if(this==empty)return this;if(et.isLeaf)return DecorationSet.empty;let ot,ct;for(let ft=0;ft<this.children.length;ft+=3)if(this.children[ft]>=g){this.children[ft]==g&&(ot=this.children[ft+2]);break}let ut=g+1,dt=ut+et.content.size;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft];if(St.from<dt&&St.to>ut&&St.type instanceof InlineType){let kt=Math.max(ut,St.from)-ut,Tt=Math.min(dt,St.to)-ut;kt<Tt&&(ct||(ct=[])).push(St.copy(kt,Tt))}}if(ct){let ft=new DecorationSet(ct.sort(byPos),none);return ot?new DecorationGroup([ft,ot]):ft}return ot||empty}eq(g){if(this==g)return!0;if(!(g instanceof DecorationSet)||this.local.length!=g.local.length||this.children.length!=g.children.length)return!1;for(let et=0;et<this.local.length;et++)if(!this.local[et].eq(g.local[et]))return!1;for(let et=0;et<this.children.length;et+=3)if(this.children[et]!=g.children[et]||this.children[et+1]!=g.children[et+1]||!this.children[et+2].eq(g.children[et+2]))return!1;return!0}locals(g){return removeOverlap(this.localsInner(g))}localsInner(g){if(this==empty)return none;if(g.inlineContent||!this.local.some(InlineType.is))return this.local;let et=[];for(let ot=0;ot<this.local.length;ot++)this.local[ot].type instanceof InlineType||et.push(this.local[ot]);return et}forEachSet(g){g(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(g){this.members=g}map(g,et){const ot=this.members.map(ct=>ct.map(g,et,noSpec));return DecorationGroup.from(ot)}forChild(g,et){if(et.isLeaf)return DecorationSet.empty;let ot=[];for(let ct=0;ct<this.members.length;ct++){let ut=this.members[ct].forChild(g,et);ut!=empty&&(ut instanceof DecorationGroup?ot=ot.concat(ut.members):ot.push(ut))}return DecorationGroup.from(ot)}eq(g){if(!(g instanceof DecorationGroup)||g.members.length!=this.members.length)return!1;for(let et=0;et<this.members.length;et++)if(!this.members[et].eq(g.members[et]))return!1;return!0}locals(g){let et,ot=!0;for(let ct=0;ct<this.members.length;ct++){let ut=this.members[ct].localsInner(g);if(ut.length)if(!et)et=ut;else{ot&&(et=et.slice(),ot=!1);for(let dt=0;dt<ut.length;dt++)et.push(ut[dt])}}return et?removeOverlap(ot?et:et.sort(byPos)):none}static from(g){switch(g.length){case 0:return empty;case 1:return g[0];default:return new DecorationGroup(g.every(et=>et instanceof DecorationSet)?g:g.reduce((et,ot)=>et.concat(ot instanceof DecorationSet?ot:ot.members),[]))}}forEachSet(g){for(let et=0;et<this.members.length;et++)this.members[et].forEachSet(g)}}function mapChildren(it,g,et,ot,ct,ut,dt){let ft=it.slice();for(let kt=0,Tt=ut;kt<et.maps.length;kt++){let Rt=0;et.maps[kt].forEach((jt,$t,Ft,Ht)=>{let Kt=Ht-Ft-($t-jt);for(let Bt=0;Bt<ft.length;Bt+=3){let Ut=ft[Bt+1];if(Ut<0||jt>Ut+Tt-Rt)continue;let Yt=ft[Bt]+Tt-Rt;$t>=Yt?ft[Bt+1]=jt<=Yt?-2:-1:jt>=Tt&&Kt&&(ft[Bt]+=Kt,ft[Bt+1]+=Kt)}Rt+=Kt}),Tt=et.maps[kt].map(Tt,-1)}let St=!1;for(let kt=0;kt<ft.length;kt+=3)if(ft[kt+1]<0){if(ft[kt+1]==-2){St=!0,ft[kt+1]=-1;continue}let Tt=et.map(it[kt]+ut),Rt=Tt-ct;if(Rt<0||Rt>=ot.content.size){St=!0;continue}let jt=et.map(it[kt+1]+ut,-1),$t=jt-ct,{index:Ft,offset:Ht}=ot.content.findIndex(Rt),Kt=ot.maybeChild(Ft);if(Kt&&Ht==Rt&&Ht+Kt.nodeSize==$t){let Bt=ft[kt+2].mapInner(et,Kt,Tt+1,it[kt]+ut+1,dt);Bt!=empty?(ft[kt]=Rt,ft[kt+1]=$t,ft[kt+2]=Bt):(ft[kt+1]=-2,St=!0)}else St=!0}if(St){let kt=mapAndGatherRemainingDecorations(ft,it,g,et,ct,ut,dt),Tt=buildTree(kt,ot,0,dt);g=Tt.local;for(let Rt=0;Rt<ft.length;Rt+=3)ft[Rt+1]<0&&(ft.splice(Rt,3),Rt-=3);for(let Rt=0,jt=0;Rt<Tt.children.length;Rt+=3){let $t=Tt.children[Rt];for(;jt<ft.length&&ft[jt]<$t;)jt+=3;ft.splice(jt,0,Tt.children[Rt],Tt.children[Rt+1],Tt.children[Rt+2])}}return new DecorationSet(g.sort(byPos),ft)}function moveSpans(it,g){if(!g||!it.length)return it;let et=[];for(let ot=0;ot<it.length;ot++){let ct=it[ot];et.push(new Decoration(ct.from+g,ct.to+g,ct.type))}return et}function mapAndGatherRemainingDecorations(it,g,et,ot,ct,ut,dt){function ft(St,kt){for(let Tt=0;Tt<St.local.length;Tt++){let Rt=St.local[Tt].map(ot,ct,kt);Rt?et.push(Rt):dt.onRemove&&dt.onRemove(St.local[Tt].spec)}for(let Tt=0;Tt<St.children.length;Tt+=3)ft(St.children[Tt+2],St.children[Tt]+kt+1)}for(let St=0;St<it.length;St+=3)it[St+1]==-1&&ft(it[St+2],g[St]+ut+1);return et}function takeSpansForNode(it,g,et){if(g.isLeaf)return null;let ot=et+g.nodeSize,ct=null;for(let ut=0,dt;ut<it.length;ut++)(dt=it[ut])&&dt.from>et&&dt.to<ot&&((ct||(ct=[])).push(dt),it[ut]=null);return ct}function withoutNulls(it){let g=[];for(let et=0;et<it.length;et++)it[et]!=null&&g.push(it[et]);return g}function buildTree(it,g,et,ot){let ct=[],ut=!1;g.forEach((ft,St)=>{let kt=takeSpansForNode(it,ft,St+et);if(kt){ut=!0;let Tt=buildTree(kt,ft,et+St+1,ot);Tt!=empty&&ct.push(St,St+ft.nodeSize,Tt)}});let dt=moveSpans(ut?withoutNulls(it):it,-et).sort(byPos);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||(ot.onRemove&&ot.onRemove(dt[ft].spec),dt.splice(ft--,1));return dt.length||ct.length?new DecorationSet(dt,ct):empty}function byPos(it,g){return it.from-g.from||it.to-g.to}function removeOverlap(it){let g=it;for(let et=0;et<g.length-1;et++){let ot=g[et];if(ot.from!=ot.to)for(let ct=et+1;ct<g.length;ct++){let ut=g[ct];if(ut.from==ot.from){ut.to!=ot.to&&(g==it&&(g=it.slice()),g[ct]=ut.copy(ut.from,ot.to),insertAhead(g,ct+1,ut.copy(ot.to,ut.to)));continue}else{ut.from<ot.to&&(g==it&&(g=it.slice()),g[et]=ot.copy(ot.from,ut.from),insertAhead(g,ct,ot.copy(ut.from,ot.to)));break}}}return g}function insertAhead(it,g,et){for(;g<it.length&&byPos(et,it[g])>0;)g++;it.splice(g,0,et)}function viewDecorations(it){let g=[];return it.someProp("decorations",et=>{let ot=et(it.state);ot&&ot!=empty&&g.push(ot)}),it.cursorWrapper&&g.push(DecorationSet.create(it.state.doc,[it.cursorWrapper.deco])),DecorationGroup.from(g)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(g){this.anchorNode=g.anchorNode,this.anchorOffset=g.anchorOffset,this.focusNode=g.focusNode,this.focusOffset=g.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(g){return g.anchorNode==this.anchorNode&&g.anchorOffset==this.anchorOffset&&g.focusNode==this.focusNode&&g.focusOffset==this.focusOffset}}class DOMObserver{constructor(g,et){this.view=g,this.handleDOMChange=et,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(ot=>{for(let ct=0;ct<ot.length;ct++)this.queue.push(ot[ct]);ie$1&&ie_version<=11&&ot.some(ct=>ct.type=="childList"&&ct.removedNodes.length||ct.type=="characterData"&&ct.oldValue.length>ct.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=ot=>{this.queue.push({target:ot.target,type:"characterData",oldValue:ot.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let g=this.observer.takeRecords();if(g.length){for(let et=0;et<g.length;et++)this.queue.push(g[et]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let g=this.view.domSelectionRange();if(g.focusNode&&isEquivalentPosition(g.focusNode,g.focusOffset,g.anchorNode,g.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(g){if(!g.focusNode)return!0;let et=new Set,ot;for(let ut=g.focusNode;ut;ut=parentNode(ut))et.add(ut);for(let ut=g.anchorNode;ut;ut=parentNode(ut))if(et.has(ut)){ot=ut;break}let ct=ot&&this.view.docView.nearestDesc(ot);if(ct&&ct.ignoreMutation({type:"selection",target:ot.nodeType==3?ot.parentNode:ot}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let g of this.observer.takeRecords())this.queue.push(g);return this.queue}flush(){let{view:g}=this;if(!g.docView||this.flushingSoon>-1)return;let et=this.pendingRecords();et.length&&(this.queue=[]);let ot=g.domSelectionRange(),ct=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(ot)&&hasFocusAndSelection(g)&&!this.ignoreSelectionChange(ot),ut=-1,dt=-1,ft=!1,St=[];if(g.editable)for(let Tt=0;Tt<et.length;Tt++){let Rt=this.registerMutation(et[Tt],St);Rt&&(ut=ut<0?Rt.from:Math.min(Rt.from,ut),dt=dt<0?Rt.to:Math.max(Rt.to,dt),Rt.typeOver&&(ft=!0))}if(gecko&&St.length){let Tt=St.filter(Rt=>Rt.nodeName=="BR");if(Tt.length==2){let[Rt,jt]=Tt;Rt.parentNode&&Rt.parentNode.parentNode==jt.parentNode?jt.remove():Rt.remove()}else{let{focusNode:Rt}=this.currentSelection;for(let jt of Tt){let $t=jt.parentNode;$t&&$t.nodeName=="LI"&&(!Rt||blockParent(g,Rt)!=$t)&&jt.remove()}}}let kt=null;ut<0&&ct&&g.input.lastFocus>Date.now()-200&&Math.max(g.input.lastTouch,g.input.lastClick.time)<Date.now()-300&&selectionCollapsed(ot)&&(kt=selectionFromDOM(g))&&kt.eq(Selection.near(g.state.doc.resolve(0),1))?(g.input.lastFocus=0,selectionToDOM(g),this.currentSelection.set(ot),g.scrollToSelection()):(ut>-1||ct)&&(ut>-1&&(g.docView.markDirty(ut,dt),checkCSS(g)),this.handleDOMChange(ut,dt,ft,St),g.docView&&g.docView.dirty?g.updateState(g.state):this.currentSelection.eq(ot)||selectionToDOM(g),this.currentSelection.set(ot))}registerMutation(g,et){if(et.indexOf(g.target)>-1)return null;let ot=this.view.docView.nearestDesc(g.target);if(g.type=="attributes"&&(ot==this.view.docView||g.attributeName=="contenteditable"||g.attributeName=="style"&&!g.oldValue&&!g.target.getAttribute("style"))||!ot||ot.ignoreMutation(g))return null;if(g.type=="childList"){for(let Tt=0;Tt<g.addedNodes.length;Tt++){let Rt=g.addedNodes[Tt];et.push(Rt),Rt.nodeType==3&&(this.lastChangedTextNode=Rt)}if(ot.contentDOM&&ot.contentDOM!=ot.dom&&!ot.contentDOM.contains(g.target))return{from:ot.posBefore,to:ot.posAfter};let ct=g.previousSibling,ut=g.nextSibling;if(ie$1&&ie_version<=11&&g.addedNodes.length)for(let Tt=0;Tt<g.addedNodes.length;Tt++){let{previousSibling:Rt,nextSibling:jt}=g.addedNodes[Tt];(!Rt||Array.prototype.indexOf.call(g.addedNodes,Rt)<0)&&(ct=Rt),(!jt||Array.prototype.indexOf.call(g.addedNodes,jt)<0)&&(ut=jt)}let dt=ct&&ct.parentNode==g.target?domIndex(ct)+1:0,ft=ot.localPosFromDOM(g.target,dt,-1),St=ut&&ut.parentNode==g.target?domIndex(ut):g.target.childNodes.length,kt=ot.localPosFromDOM(g.target,St,1);return{from:ft,to:kt}}else return g.type=="attributes"?{from:ot.posAtStart-ot.border,to:ot.posAtEnd+ot.border}:(this.lastChangedTextNode=g.target,{from:ot.posAtStart,to:ot.posAtEnd,typeOver:g.target.nodeValue==g.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(it){if(!cssChecked.has(it)&&(cssChecked.set(it,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(it.dom).whiteSpace)!==-1)){if(it.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(it,g){let et=g.startContainer,ot=g.startOffset,ct=g.endContainer,ut=g.endOffset,dt=it.domAtPos(it.state.selection.anchor);return isEquivalentPosition(dt.node,dt.offset,ct,ut)&&([et,ot,ct,ut]=[ct,ut,et,ot]),{anchorNode:et,anchorOffset:ot,focusNode:ct,focusOffset:ut}}function safariShadowSelectionRange(it,g){if(g.getComposedRanges){let ct=g.getComposedRanges(it.root)[0];if(ct)return rangeToSelectionRange(it,ct)}let et;function ot(ct){ct.preventDefault(),ct.stopImmediatePropagation(),et=ct.getTargetRanges()[0]}return it.dom.addEventListener("beforeinput",ot,!0),document.execCommand("indent"),it.dom.removeEventListener("beforeinput",ot,!0),et?rangeToSelectionRange(it,et):null}function blockParent(it,g){for(let et=g.parentNode;et&&et!=it.dom;et=et.parentNode){let ot=it.docView.nearestDesc(et,!0);if(ot&&ot.node.isBlock)return et}return null}function parseBetween(it,g,et){let{node:ot,fromOffset:ct,toOffset:ut,from:dt,to:ft}=it.docView.parseRange(g,et),St=it.domSelectionRange(),kt,Tt=St.anchorNode;if(Tt&&it.dom.contains(Tt.nodeType==1?Tt:Tt.parentNode)&&(kt=[{node:Tt,offset:St.anchorOffset}],selectionCollapsed(St)||kt.push({node:St.focusNode,offset:St.focusOffset})),chrome&&it.input.lastKeyCode===8)for(let Kt=ut;Kt>ct;Kt--){let Bt=ot.childNodes[Kt-1],Ut=Bt.pmViewDesc;if(Bt.nodeName=="BR"&&!Ut){ut=Kt;break}if(!Ut||Ut.size)break}let Rt=it.state.doc,jt=it.someProp("domParser")||DOMParser.fromSchema(it.state.schema),$t=Rt.resolve(dt),Ft=null,Ht=jt.parse(ot,{topNode:$t.parent,topMatch:$t.parent.contentMatchAt($t.index()),topOpen:!0,from:ct,to:ut,preserveWhitespace:$t.parent.type.whitespace=="pre"?"full":!0,findPositions:kt,ruleFromNode,context:$t});if(kt&&kt[0].pos!=null){let Kt=kt[0].pos,Bt=kt[1]&&kt[1].pos;Bt==null&&(Bt=Kt),Ft={anchor:Kt+dt,head:Bt+dt}}return{doc:Ht,sel:Ft,from:dt,to:ft}}function ruleFromNode(it){let g=it.pmViewDesc;if(g)return g.parseRule();if(it.nodeName=="BR"&&it.parentNode){if(safari&&/^(ul|ol)$/i.test(it.parentNode.nodeName)){let et=document.createElement("div");return et.appendChild(document.createElement("li")),{skip:et}}else if(it.parentNode.lastChild==it||safari&&/^(tr|table)$/i.test(it.parentNode.nodeName))return{ignore:!0}}else if(it.nodeName=="IMG"&&it.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(it,g,et,ot,ct){let ut=it.input.compositionPendingChanges||(it.composing?it.input.compositionID:0);if(it.input.compositionPendingChanges=0,g<0){let tn=it.input.lastSelectionTime>Date.now()-50?it.input.lastSelectionOrigin:null,nn=selectionFromDOM(it,tn);if(nn&&!it.state.selection.eq(nn)){if(chrome&&android&&it.input.lastKeyCode===13&&Date.now()-100<it.input.lastKeyCodeTime&&it.someProp("handleKeyDown",an=>an(it,keyEvent(13,"Enter"))))return;let ln=it.state.tr.setSelection(nn);tn=="pointer"?ln.setMeta("pointer",!0):tn=="key"&&ln.scrollIntoView(),ut&&ln.setMeta("composition",ut),it.dispatch(ln)}return}let dt=it.state.doc.resolve(g),ft=dt.sharedDepth(et);g=dt.before(ft+1),et=it.state.doc.resolve(et).after(ft+1);let St=it.state.selection,kt=parseBetween(it,g,et),Tt=it.state.doc,Rt=Tt.slice(kt.from,kt.to),jt,$t;it.input.lastKeyCode===8&&Date.now()-100<it.input.lastKeyCodeTime?(jt=it.state.selection.to,$t="end"):(jt=it.state.selection.from,$t="start"),it.input.lastKeyCode=null;let Ft=findDiff(Rt.content,kt.doc.content,kt.from,jt,$t);if(Ft&&it.input.domChangeCount++,(ios&&it.input.lastIOSEnter>Date.now()-225||android)&&ct.some(tn=>tn.nodeType==1&&!isInline.test(tn.nodeName))&&(!Ft||Ft.endA>=Ft.endB)&&it.someProp("handleKeyDown",tn=>tn(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(!Ft)if(ot&&St instanceof TextSelection&&!St.empty&&St.$head.sameParent(St.$anchor)&&!it.composing&&!(kt.sel&&kt.sel.anchor!=kt.sel.head))Ft={start:St.from,endA:St.to,endB:St.to};else{if(kt.sel){let tn=resolveSelection(it,it.state.doc,kt.sel);if(tn&&!tn.eq(it.state.selection)){let nn=it.state.tr.setSelection(tn);ut&&nn.setMeta("composition",ut),it.dispatch(nn)}}return}it.state.selection.from<it.state.selection.to&&Ft.start==Ft.endB&&it.state.selection instanceof TextSelection&&(Ft.start>it.state.selection.from&&Ft.start<=it.state.selection.from+2&&it.state.selection.from>=kt.from?Ft.start=it.state.selection.from:Ft.endA<it.state.selection.to&&Ft.endA>=it.state.selection.to-2&&it.state.selection.to<=kt.to&&(Ft.endB+=it.state.selection.to-Ft.endA,Ft.endA=it.state.selection.to)),ie$1&&ie_version<=11&&Ft.endB==Ft.start+1&&Ft.endA==Ft.start&&Ft.start>kt.from&&kt.doc.textBetween(Ft.start-kt.from-1,Ft.start-kt.from+1)==" "&&(Ft.start--,Ft.endA--,Ft.endB--);let Ht=kt.doc.resolveNoCache(Ft.start-kt.from),Kt=kt.doc.resolveNoCache(Ft.endB-kt.from),Bt=Tt.resolve(Ft.start),Ut=Ht.sameParent(Kt)&&Ht.parent.inlineContent&&Bt.end()>=Ft.endA;if((ios&&it.input.lastIOSEnter>Date.now()-225&&(!Ut||ct.some(tn=>tn.nodeName=="DIV"||tn.nodeName=="P"))||!Ut&&Ht.pos<kt.doc.content.size&&(!Ht.sameParent(Kt)||!Ht.parent.inlineContent)&&Ht.pos<Kt.pos&&!/\S/.test(kt.doc.textBetween(Ht.pos,Kt.pos,"","")))&&it.someProp("handleKeyDown",tn=>tn(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(it.state.selection.anchor>Ft.start&&looksLikeBackspace(Tt,Ft.start,Ft.endA,Ht,Kt)&&it.someProp("handleKeyDown",tn=>tn(it,keyEvent(8,"Backspace")))){android&&chrome&&it.domObserver.suppressSelectionUpdates();return}chrome&&Ft.endB==Ft.start&&(it.input.lastChromeDelete=Date.now()),android&&!Ut&&Ht.start()!=Kt.start()&&Kt.parentOffset==0&&Ht.depth==Kt.depth&&kt.sel&&kt.sel.anchor==kt.sel.head&&kt.sel.head==Ft.endA&&(Ft.endB-=2,Kt=kt.doc.resolveNoCache(Ft.endB-kt.from),setTimeout(()=>{it.someProp("handleKeyDown",function(tn){return tn(it,keyEvent(13,"Enter"))})},20));let Yt=Ft.start,Jt=Ft.endA,Zt=tn=>{let nn=tn||it.state.tr.replace(Yt,Jt,kt.doc.slice(Ft.start-kt.from,Ft.endB-kt.from));if(kt.sel){let ln=resolveSelection(it,nn.doc,kt.sel);ln&&!(chrome&&it.composing&&ln.empty&&(Ft.start!=Ft.endB||it.input.lastChromeDelete<Date.now()-100)&&(ln.head==Yt||ln.head==nn.mapping.map(Jt)-1)||ie$1&&ln.empty&&ln.head==Yt)&&nn.setSelection(ln)}return ut&&nn.setMeta("composition",ut),nn.scrollIntoView()},en;if(Ut)if(Ht.pos==Kt.pos){ie$1&&ie_version<=11&&Ht.parentOffset==0&&(it.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(it),20));let tn=Zt(it.state.tr.delete(Yt,Jt)),nn=Tt.resolve(Ft.start).marksAcross(Tt.resolve(Ft.endA));nn&&tn.ensureMarks(nn),it.dispatch(tn)}else if(Ft.endA==Ft.endB&&(en=isMarkChange(Ht.parent.content.cut(Ht.parentOffset,Kt.parentOffset),Bt.parent.content.cut(Bt.parentOffset,Ft.endA-Bt.start())))){let tn=Zt(it.state.tr);en.type=="add"?tn.addMark(Yt,Jt,en.mark):tn.removeMark(Yt,Jt,en.mark),it.dispatch(tn)}else if(Ht.parent.child(Ht.index()).isText&&Ht.index()==Kt.index()-(Kt.textOffset?0:1)){let tn=Ht.parent.textBetween(Ht.parentOffset,Kt.parentOffset),nn=()=>Zt(it.state.tr.insertText(tn,Yt,Jt));it.someProp("handleTextInput",ln=>ln(it,Yt,Jt,tn,nn))||it.dispatch(nn())}else it.dispatch(Zt());else it.dispatch(Zt())}function resolveSelection(it,g,et){return Math.max(et.anchor,et.head)>g.content.size?null:selectionBetween(it,g.resolve(et.anchor),g.resolve(et.head))}function isMarkChange(it,g){let et=it.firstChild.marks,ot=g.firstChild.marks,ct=et,ut=ot,dt,ft,St;for(let Tt=0;Tt<ot.length;Tt++)ct=ot[Tt].removeFromSet(ct);for(let Tt=0;Tt<et.length;Tt++)ut=et[Tt].removeFromSet(ut);if(ct.length==1&&ut.length==0)ft=ct[0],dt="add",St=Tt=>Tt.mark(ft.addToSet(Tt.marks));else if(ct.length==0&&ut.length==1)ft=ut[0],dt="remove",St=Tt=>Tt.mark(ft.removeFromSet(Tt.marks));else return null;let kt=[];for(let Tt=0;Tt<g.childCount;Tt++)kt.push(St(g.child(Tt)));if(Fragment.from(kt).eq(it))return{mark:ft,type:dt}}function looksLikeBackspace(it,g,et,ot,ct){if(et-g<=ct.pos-ot.pos||skipClosingAndOpening(ot,!0,!1)<ct.pos)return!1;let ut=it.resolve(g);if(!ot.parent.isTextblock){let ft=ut.nodeAfter;return ft!=null&&et==g+ft.nodeSize}if(ut.parentOffset<ut.parent.content.size||!ut.parent.isTextblock)return!1;let dt=it.resolve(skipClosingAndOpening(ut,!0,!0));return!dt.parent.isTextblock||dt.pos>et||skipClosingAndOpening(dt,!0,!1)<et?!1:ot.parent.content.cut(ot.parentOffset).eq(dt.parent.content)}function skipClosingAndOpening(it,g,et){let ot=it.depth,ct=g?it.end():it.pos;for(;ot>0&&(g||it.indexAfter(ot)==it.node(ot).childCount);)ot--,ct++,g=!1;if(et){let ut=it.node(ot).maybeChild(it.indexAfter(ot));for(;ut&&!ut.isLeaf;)ut=ut.firstChild,ct++}return ct}function findDiff(it,g,et,ot,ct){let ut=it.findDiffStart(g,et);if(ut==null)return null;let{a:dt,b:ft}=it.findDiffEnd(g,et+it.size,et+g.size);if(ct=="end"){let St=Math.max(0,ut-Math.min(dt,ft));ot-=dt+St-ut}if(dt<ut&&it.size<g.size){let St=ot<=ut&&ot>=dt?ut-ot:0;ut-=St,ut&&ut<g.size&&isSurrogatePair(g.textBetween(ut-1,ut+1))&&(ut+=St?1:-1),ft=ut+(ft-dt),dt=ut}else if(ft<ut){let St=ot<=ut&&ot>=ft?ut-ot:0;ut-=St,ut&&ut<it.size&&isSurrogatePair(it.textBetween(ut-1,ut+1))&&(ut+=St?1:-1),dt=ut+(dt-ft),ft=ut}return{start:ut,endA:dt,endB:ft}}function isSurrogatePair(it){if(it.length!=2)return!1;let g=it.charCodeAt(0),et=it.charCodeAt(1);return g>=56320&&g<=57343&&et>=55296&&et<=56319}class EditorView{constructor(g,et){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=et,this.state=et.state,this.directPlugins=et.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=g&&g.mount||document.createElement("div"),g&&(g.appendChild?g.appendChild(this.dom):typeof g=="function"?g(this.dom):g.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(ot,ct,ut,dt)=>readDOMChange(this,ot,ct,ut,dt)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let g=this._props;this._props={};for(let et in g)this._props[et]=g[et];this._props.state=this.state}return this._props}update(g){g.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let et=this._props;this._props=g,g.plugins&&(g.plugins.forEach(checkStateComponent),this.directPlugins=g.plugins),this.updateStateInner(g.state,et)}setProps(g){let et={};for(let ot in this._props)et[ot]=this._props[ot];et.state=this.state;for(let ot in g)et[ot]=g[ot];this.update(et)}updateState(g){this.updateStateInner(g,this._props)}updateStateInner(g,et){var ot;let ct=this.state,ut=!1,dt=!1;g.storedMarks&&this.composing&&(clearComposition(this),dt=!0),this.state=g;let ft=ct.plugins!=g.plugins||this._props.plugins!=et.plugins;if(ft||this._props.plugins!=et.plugins||this._props.nodeViews!=et.nodeViews){let $t=buildNodeViews(this);changedNodeViews($t,this.nodeViews)&&(this.nodeViews=$t,ut=!0)}(ft||et.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let St=viewDecorations(this),kt=computeDocDeco(this),Tt=ct.plugins!=g.plugins&&!ct.doc.eq(g.doc)?"reset":g.scrollToSelection>ct.scrollToSelection?"to selection":"preserve",Rt=ut||!this.docView.matchesNode(g.doc,kt,St);(Rt||!g.selection.eq(ct.selection))&&(dt=!0);let jt=Tt=="preserve"&&dt&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(dt){this.domObserver.stop();let $t=Rt&&(ie$1||chrome)&&!this.composing&&!ct.selection.empty&&!g.selection.empty&&selectionContextChanged(ct.selection,g.selection);if(Rt){let Ft=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(ut||!this.docView.update(g.doc,kt,St,this))&&(this.docView.updateOuterDeco(kt),this.docView.destroy(),this.docView=docViewDesc(g.doc,kt,St,this.dom,this)),Ft&&!this.trackWrites&&($t=!0)}$t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,$t):(syncNodeSelection(this,g.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(ct),!((ot=this.dragging)===null||ot===void 0)&&ot.node&&!ct.doc.eq(g.doc)&&this.updateDraggedNode(this.dragging,ct),Tt=="reset"?this.dom.scrollTop=0:Tt=="to selection"?this.scrollToSelection():jt&&resetScrollPos(jt)}scrollToSelection(){let g=this.domSelectionRange().focusNode;if(!(!g||!this.dom.contains(g.nodeType==1?g:g.parentNode))){if(!this.someProp("handleScrollToSelection",et=>et(this)))if(this.state.selection instanceof NodeSelection){let et=this.docView.domAfterPos(this.state.selection.from);et.nodeType==1&&scrollRectIntoView(this,et.getBoundingClientRect(),g)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),g)}}destroyPluginViews(){let g;for(;g=this.pluginViews.pop();)g.destroy&&g.destroy()}updatePluginViews(g){if(!g||g.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let et=0;et<this.directPlugins.length;et++){let ot=this.directPlugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}for(let et=0;et<this.state.plugins.length;et++){let ot=this.state.plugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}}else for(let et=0;et<this.pluginViews.length;et++){let ot=this.pluginViews[et];ot.update&&ot.update(this,g)}}updateDraggedNode(g,et){let ot=g.node,ct=-1;if(this.state.doc.nodeAt(ot.from)==ot.node)ct=ot.from;else{let ut=ot.from+(this.state.doc.content.size-et.doc.content.size);(ut>0&&this.state.doc.nodeAt(ut))==ot.node&&(ct=ut)}this.dragging=new Dragging(g.slice,g.move,ct<0?void 0:NodeSelection.create(this.state.doc,ct))}someProp(g,et){let ot=this._props&&this._props[g],ct;if(ot!=null&&(ct=et?et(ot):ot))return ct;for(let dt=0;dt<this.directPlugins.length;dt++){let ft=this.directPlugins[dt].props[g];if(ft!=null&&(ct=et?et(ft):ft))return ct}let ut=this.state.plugins;if(ut)for(let dt=0;dt<ut.length;dt++){let ft=ut[dt].props[g];if(ft!=null&&(ct=et?et(ft):ft))return ct}}hasFocus(){if(ie$1){let g=this.root.activeElement;if(g==this.dom)return!0;if(!g||!this.dom.contains(g))return!1;for(;g&&this.dom!=g&&this.dom.contains(g);){if(g.contentEditable=="false")return!1;g=g.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let g=this._root;if(g==null){for(let et=this.dom.parentNode;et;et=et.parentNode)if(et.nodeType==9||et.nodeType==11&&et.host)return et.getSelection||(Object.getPrototypeOf(et).getSelection=()=>et.ownerDocument.getSelection()),this._root=et}return g||document}updateRoot(){this._root=null}posAtCoords(g){return posAtCoords(this,g)}coordsAtPos(g,et=1){return coordsAtPos(this,g,et)}domAtPos(g,et=0){return this.docView.domFromPos(g,et)}nodeDOM(g){let et=this.docView.descAt(g);return et?et.nodeDOM:null}posAtDOM(g,et,ot=-1){let ct=this.docView.posFromDOM(g,et,ot);if(ct==null)throw new RangeError("DOM position not inside the editor");return ct}endOfTextblock(g,et){return endOfTextblock(this,et||this.state,g)}pasteHTML(g,et){return doPaste(this,"",g,!1,et||new ClipboardEvent("paste"))}pasteText(g,et){return doPaste(this,g,null,!0,et||new ClipboardEvent("paste"))}serializeForClipboard(g){return serializeForClipboard(this,g)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(g){return dispatchEvent(this,g)}domSelectionRange(){let g=this.domSelection();return g?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,g)||g:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(it){let g=this._props.dispatchTransaction;g?g.call(this,it):this.updateState(this.state.apply(it))};function computeDocDeco(it){let g=Object.create(null);return g.class="ProseMirror",g.contenteditable=String(it.editable),it.someProp("attributes",et=>{if(typeof et=="function"&&(et=et(it.state)),et)for(let ot in et)ot=="class"?g.class+=" "+et[ot]:ot=="style"?g.style=(g.style?g.style+";":"")+et[ot]:!g[ot]&&ot!="contenteditable"&&ot!="nodeName"&&(g[ot]=String(et[ot]))}),g.translate||(g.translate="no"),[Decoration.node(0,it.state.doc.content.size,g)]}function updateCursorWrapper(it){if(it.markCursor){let g=document.createElement("img");g.className="ProseMirror-separator",g.setAttribute("mark-placeholder","true"),g.setAttribute("alt",""),it.cursorWrapper={dom:g,deco:Decoration.widget(it.state.selection.from,g,{raw:!0,marks:it.markCursor})}}else it.cursorWrapper=null}function getEditable(it){return!it.someProp("editable",g=>g(it.state)===!1)}function selectionContextChanged(it,g){let et=Math.min(it.$anchor.sharedDepth(it.head),g.$anchor.sharedDepth(g.head));return it.$anchor.start(et)!=g.$anchor.start(et)}function buildNodeViews(it){let g=Object.create(null);function et(ot){for(let ct in ot)Object.prototype.hasOwnProperty.call(g,ct)||(g[ct]=ot[ct])}return it.someProp("nodeViews",et),it.someProp("markViews",et),g}function changedNodeViews(it,g){let et=0,ot=0;for(let ct in it){if(it[ct]!=g[ct])return!0;et++}for(let ct in g)ot++;return et!=ot}function checkStateComponent(it){if(it.spec.state||it.spec.filterTransaction||it.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(it){var g=mac$1&&it.metaKey&&it.shiftKey&&!it.ctrlKey&&!it.altKey||ie&&it.shiftKey&&it.key&&it.key.length==1||it.key=="Unidentified",et=!g&&it.key||(it.shiftKey?shift:base)[it.keyCode]||it.key||"Unidentified";return et=="Esc"&&(et="Escape"),et=="Del"&&(et="Delete"),et=="Left"&&(et="ArrowLeft"),et=="Up"&&(et="ArrowUp"),et=="Right"&&(et="ArrowRight"),et=="Down"&&(et="ArrowDown"),et}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(it){let g=it.split(/-(?!$)/),et=g[g.length-1];et=="Space"&&(et=" ");let ot,ct,ut,dt;for(let ft=0;ft<g.length-1;ft++){let St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ct=!0;else if(/^s(hift)?$/i.test(St))ut=!0;else if(/^mod$/i.test(St))mac?dt=!0:ct=!0;else throw new Error("Unrecognized modifier name: "+St)}return ot&&(et="Alt-"+et),ct&&(et="Ctrl-"+et),dt&&(et="Meta-"+et),ut&&(et="Shift-"+et),et}function normalize(it){let g=Object.create(null);for(let et in it)g[normalizeKeyName$1(et)]=it[et];return g}function modifiers(it,g,et=!0){return g.altKey&&(it="Alt-"+it),g.ctrlKey&&(it="Ctrl-"+it),g.metaKey&&(it="Meta-"+it),et&&g.shiftKey&&(it="Shift-"+it),it}function keymap(it){return new Plugin({props:{handleKeyDown:keydownHandler(it)}})}function keydownHandler(it){let g=normalize(it);return function(et,ot){let ct=keyName(ot),ut,dt=g[modifiers(ct,ot)];if(dt&&dt(et.state,et.dispatch,et))return!0;if(ct.length==1&&ct!=" "){if(ot.shiftKey){let ft=g[modifiers(ct,ot,!1)];if(ft&&ft(et.state,et.dispatch,et))return!0}if((ot.altKey||ot.metaKey||ot.ctrlKey)&&!(windows&&ot.ctrlKey&&ot.altKey)&&(ut=base[ot.keyCode])&&ut!=ct){let ft=g[modifiers(ut,ot)];if(ft&&ft(et.state,et.dispatch,et))return!0}}return!1}}var __defProp$1=Object.defineProperty,__export$1=(it,g)=>{for(var et in g)__defProp$1(it,et,{get:g[et],enumerable:!0})};function createChainableState(it){const{state:g,transaction:et}=it;let{selection:ot}=et,{doc:ct}=et,{storedMarks:ut}=et;return{...g,apply:g.apply.bind(g),applyTransaction:g.applyTransaction.bind(g),plugins:g.plugins,schema:g.schema,reconfigure:g.reconfigure.bind(g),toJSON:g.toJSON.bind(g),get storedMarks(){return ut},get selection(){return ot},get doc(){return ct},get tr(){return ot=et.selection,ct=et.doc,ut=et.storedMarks,et}}}var CommandManager$1=class{constructor(g){this.editor=g.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=g.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:g,editor:et,state:ot}=this,{view:ct}=et,{tr:ut}=ot,dt=this.buildProps(ut);return Object.fromEntries(Object.entries(g).map(([ft,St])=>[ft,(...Tt)=>{const Rt=St(...Tt)(dt);return!ut.getMeta("preventDispatch")&&!this.hasCustomState&&ct.dispatch(ut),Rt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(g,et=!0){const{rawCommands:ot,editor:ct,state:ut}=this,{view:dt}=ct,ft=[],St=!!g,kt=g||ut.tr,Tt=()=>(!St&&et&&!kt.getMeta("preventDispatch")&&!this.hasCustomState&&dt.dispatch(kt),ft.every(jt=>jt===!0)),Rt={...Object.fromEntries(Object.entries(ot).map(([jt,$t])=>[jt,(...Ht)=>{const Kt=this.buildProps(kt,et),Bt=$t(...Ht)(Kt);return ft.push(Bt),Rt}])),run:Tt};return Rt}createCan(g){const{rawCommands:et,state:ot}=this,ct=!1,ut=g||ot.tr,dt=this.buildProps(ut,ct);return{...Object.fromEntries(Object.entries(et).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)({...dt,dispatch:void 0})])),chain:()=>this.createChain(ut,ct)}}buildProps(g,et=!0){const{rawCommands:ot,editor:ct,state:ut}=this,{view:dt}=ct,ft={tr:g,editor:ct,view:dt,state:createChainableState({state:ut,transaction:g}),dispatch:et?()=>{}:void 0,chain:()=>this.createChain(g,et),can:()=>this.createCan(g),get commands(){return Object.fromEntries(Object.entries(ot).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)(ft)]))}};return ft}},commands_exports={};__export$1(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:it,view:g})=>(requestAnimationFrame(()=>{var et;it.isDestroyed||(g.dom.blur(),(et=window==null?void 0:window.getSelection())==null||et.removeAllRanges())}),!0),clearContent=(it=!0)=>({commands:g})=>g.setContent("",{emitUpdate:it}),clearNodes=()=>({state:it,tr:g,dispatch:et})=>{const{selection:ot}=g,{ranges:ct}=ot;return et&&ct.forEach(({$from:ut,$to:dt})=>{it.doc.nodesBetween(ut.pos,dt.pos,(ft,St)=>{if(ft.type.isText)return;const{doc:kt,mapping:Tt}=g,Rt=kt.resolve(Tt.map(St)),jt=kt.resolve(Tt.map(St+ft.nodeSize)),$t=Rt.blockRange(jt);if(!$t)return;const Ft=liftTarget($t);if(ft.type.isTextblock){const{defaultType:Ht}=Rt.parent.contentMatchAt(Rt.index());g.setNodeMarkup($t.start,Ht)}(Ft||Ft===0)&&g.lift($t,Ft)})}),!0},command=it=>g=>it(g),createParagraphNear=()=>({state:it,dispatch:g})=>createParagraphNear$1(it,g),cut=(it,g)=>({editor:et,tr:ot})=>{const{state:ct}=et,ut=ct.doc.slice(it.from,it.to);ot.deleteRange(it.from,it.to);const dt=ot.mapping.map(g);return ot.insert(dt,ut.content),ot.setSelection(new TextSelection(ot.doc.resolve(Math.max(dt-1,0)))),!0},deleteCurrentNode=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,ot=et.$anchor.node();if(ot.content.size>0)return!1;const ct=it.selection.$anchor;for(let ut=ct.depth;ut>0;ut-=1)if(ct.node(ut).type===ot.type){if(g){const ft=ct.before(ut),St=ct.after(ut);it.delete(ft,St).scrollIntoView()}return!0}return!1};function getNodeType(it,g){if(typeof it=="string"){if(!g.nodes[it])throw Error(`There is no node type named '${it}'. Maybe you forgot to add the extension?`);return g.nodes[it]}return it}var deleteNode=it=>({tr:g,state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema),ut=g.selection.$anchor;for(let dt=ut.depth;dt>0;dt-=1)if(ut.node(dt).type===ct){if(ot){const St=ut.before(dt),kt=ut.after(dt);g.delete(St,kt).scrollIntoView()}return!0}return!1},deleteRange=it=>({tr:g,dispatch:et})=>{const{from:ot,to:ct}=it;return et&&g.delete(ot,ct),!0},deleteSelection=()=>({state:it,dispatch:g})=>deleteSelection$1(it,g),enter=()=>({commands:it})=>it.keyboardShortcut("Enter"),exitCode=()=>({state:it,dispatch:g})=>exitCode$1(it,g);function isRegExp(it){return Object.prototype.toString.call(it)==="[object RegExp]"}function objectIncludes(it,g,et={strict:!0}){const ot=Object.keys(g);return ot.length?ot.every(ct=>et.strict?g[ct]===it[ct]:isRegExp(g[ct])?g[ct].test(it[ct]):g[ct]===it[ct]):!0}function findMarkInSet(it,g,et={}){return it.find(ot=>ot.type===g&&objectIncludes(Object.fromEntries(Object.keys(et).map(ct=>[ct,ot.attrs[ct]])),et))}function isMarkInSet(it,g,et={}){return!!findMarkInSet(it,g,et)}function getMarkRange(it,g,et){var ot;if(!it||!g)return;let ct=it.parent.childAfter(it.parentOffset);if((!ct.node||!ct.node.marks.some(Tt=>Tt.type===g))&&(ct=it.parent.childBefore(it.parentOffset)),!ct.node||!ct.node.marks.some(Tt=>Tt.type===g)||(et=et||((ot=ct.node.marks[0])==null?void 0:ot.attrs),!findMarkInSet([...ct.node.marks],g,et)))return;let dt=ct.index,ft=it.start()+ct.offset,St=dt+1,kt=ft+ct.node.nodeSize;for(;dt>0&&isMarkInSet([...it.parent.child(dt-1).marks],g,et);)dt-=1,ft-=it.parent.child(dt).nodeSize;for(;St<it.parent.childCount&&isMarkInSet([...it.parent.child(St).marks],g,et);)kt+=it.parent.child(St).nodeSize,St+=1;return{from:ft,to:kt}}function getMarkType(it,g){if(typeof it=="string"){if(!g.marks[it])throw Error(`There is no mark type named '${it}'. Maybe you forgot to add the extension?`);return g.marks[it]}return it}var extendMarkRange=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{const ut=getMarkType(it,ot.schema),{doc:dt,selection:ft}=et,{$from:St,from:kt,to:Tt}=ft;if(ct){const Rt=getMarkRange(St,ut,g);if(Rt&&Rt.from<=kt&&Rt.to>=Tt){const jt=TextSelection.create(dt,Rt.from,Rt.to);et.setSelection(jt)}}return!0},first=it=>g=>{const et=typeof it=="function"?it(g):it;for(let ot=0;ot<et.length;ot+=1)if(et[ot](g))return!0;return!1};function isTextSelection(it){return it instanceof TextSelection}function minMax(it=0,g=0,et=0){return Math.min(Math.max(it,g),et)}function resolveFocusPosition(it,g=null){if(!g)return null;const et=Selection.atStart(it),ot=Selection.atEnd(it);if(g==="start"||g===!0)return et;if(g==="end")return ot;const ct=et.from,ut=ot.to;return g==="all"?TextSelection.create(it,minMax(0,ct,ut),minMax(it.content.size,ct,ut)):TextSelection.create(it,minMax(g,ct,ut),minMax(g,ct,ut))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var focus=(it=null,g={})=>({editor:et,view:ot,tr:ct,dispatch:ut})=>{g={scrollIntoView:!0,...g};const dt=()=>{(isiOS()||isAndroid())&&ot.dom.focus(),requestAnimationFrame(()=>{et.isDestroyed||(ot.focus(),g!=null&&g.scrollIntoView&&et.commands.scrollIntoView())})};if(ot.hasFocus()&&it===null||it===!1)return!0;if(ut&&it===null&&!isTextSelection(et.state.selection))return dt(),!0;const ft=resolveFocusPosition(ct.doc,it)||et.state.selection,St=et.state.selection.eq(ft);return ut&&(St||ct.setSelection(ft),St&&ct.storedMarks&&ct.setStoredMarks(ct.storedMarks),dt()),!0},forEach=(it,g)=>et=>it.every((ot,ct)=>g(ot,{...et,index:ct})),insertContent=(it,g)=>({tr:et,commands:ot})=>ot.insertContentAt({from:et.selection.from,to:et.selection.to},it,g),removeWhitespaces=it=>{const g=it.childNodes;for(let et=g.length-1;et>=0;et-=1){const ot=g[et];ot.nodeType===3&&ot.nodeValue&&/^(\n\s\s|\n)$/.test(ot.nodeValue)?it.removeChild(ot):ot.nodeType===1&&removeWhitespaces(ot)}return it};function elementFromString(it){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const g=`<body>${it}</body>`,et=new window.DOMParser().parseFromString(g,"text/html").body;return removeWhitespaces(et)}function createNodeFromContent(it,g,et){if(it instanceof Node$1||it instanceof Fragment)return it;et={slice:!0,parseOptions:{},...et};const ot=typeof it=="object"&&it!==null,ct=typeof it=="string";if(ot)try{if(Array.isArray(it)&&it.length>0)return Fragment.fromArray(it.map(ft=>g.nodeFromJSON(ft)));const dt=g.nodeFromJSON(it);return et.errorOnInvalidContent&&dt.check(),dt}catch(ut){if(et.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:ut});return console.warn("[tiptap warn]: Invalid content.","Passed value:",it,"Error:",ut),createNodeFromContent("",g,et)}if(ct){if(et.errorOnInvalidContent){let dt=!1,ft="";const St=new Schema({topNode:g.spec.topNode,marks:g.spec.marks,nodes:g.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:kt=>(dt=!0,ft=typeof kt=="string"?kt:kt.outerHTML,null)}]}})});if(et.slice?DOMParser.fromSchema(St).parseSlice(elementFromString(it),et.parseOptions):DOMParser.fromSchema(St).parse(elementFromString(it),et.parseOptions),et.errorOnInvalidContent&&dt)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${ft}`)})}const ut=DOMParser.fromSchema(g);return et.slice?ut.parseSlice(elementFromString(it),et.parseOptions).content:ut.parse(elementFromString(it),et.parseOptions)}return createNodeFromContent("",g,et)}function selectionToInsertionEnd(it,g,et){const ot=it.steps.length-1;if(ot<g)return;const ct=it.steps[ot];if(!(ct instanceof ReplaceStep||ct instanceof ReplaceAroundStep))return;const ut=it.mapping.maps[ot];let dt=0;ut.forEach((ft,St,kt,Tt)=>{dt===0&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}var isFragment=it=>!("type"in it),insertContentAt=(it,g,et)=>({tr:ot,dispatch:ct,editor:ut})=>{var dt;if(ct){et={parseOptions:ut.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...et};let ft;const St=Kt=>{ut.emit("contentError",{editor:ut,error:Kt,disableCollaboration:()=>{"collaboration"in ut.storage&&typeof ut.storage.collaboration=="object"&&ut.storage.collaboration&&(ut.storage.collaboration.isDisabled=!0)}})},kt={preserveWhitespace:"full",...et.parseOptions};if(!et.errorOnInvalidContent&&!ut.options.enableContentCheck&&ut.options.emitContentError)try{createNodeFromContent(g,ut.schema,{parseOptions:kt,errorOnInvalidContent:!0})}catch(Kt){St(Kt)}try{ft=createNodeFromContent(g,ut.schema,{parseOptions:kt,errorOnInvalidContent:(dt=et.errorOnInvalidContent)!=null?dt:ut.options.enableContentCheck})}catch(Kt){return St(Kt),!1}let{from:Tt,to:Rt}=typeof it=="number"?{from:it,to:it}:{from:it.from,to:it.to},jt=!0,$t=!0;if((isFragment(ft)?ft:[ft]).forEach(Kt=>{Kt.check(),jt=jt?Kt.isText&&Kt.marks.length===0:!1,$t=$t?Kt.isBlock:!1}),Tt===Rt&&$t){const{parent:Kt}=ot.doc.resolve(Tt);Kt.isTextblock&&!Kt.type.spec.code&&!Kt.childCount&&(Tt-=1,Rt+=1)}let Ht;if(jt){if(Array.isArray(g))Ht=g.map(Kt=>Kt.text||"").join("");else if(g instanceof Fragment){let Kt="";g.forEach(Bt=>{Bt.text&&(Kt+=Bt.text)}),Ht=Kt}else typeof g=="object"&&g&&g.text?Ht=g.text:Ht=g;ot.insertText(Ht,Tt,Rt)}else{Ht=ft;const Kt=ot.doc.resolve(Tt),Bt=Kt.node(),Ut=Kt.parentOffset===0,Yt=Bt.isText||Bt.isTextblock,Jt=Bt.content.size>0;Ut&&Yt&&Jt&&(Tt=Math.max(0,Tt-1)),ot.replaceWith(Tt,Rt,Ht)}et.updateSelection&&selectionToInsertionEnd(ot,ot.steps.length-1,-1),et.applyInputRules&&ot.setMeta("applyInputRules",{from:Tt,text:Ht}),et.applyPasteRules&&ot.setMeta("applyPasteRules",{from:Tt,text:Ht})}return!0},joinUp=()=>({state:it,dispatch:g})=>joinUp$1(it,g),joinDown=()=>({state:it,dispatch:g})=>joinDown$1(it,g),joinBackward=()=>({state:it,dispatch:g})=>joinBackward$1(it,g),joinForward=()=>({state:it,dispatch:g})=>joinForward$1(it,g),joinItemBackward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,-1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinItemForward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinTextblockBackward=()=>({state:it,dispatch:g})=>joinTextblockBackward$1(it,g),joinTextblockForward=()=>({state:it,dispatch:g})=>joinTextblockForward$1(it,g);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(it){const g=it.split(/-(?!$)/);let et=g[g.length-1];et==="Space"&&(et=" ");let ot,ct,ut,dt;for(let ft=0;ft<g.length-1;ft+=1){const St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ct=!0;else if(/^s(hift)?$/i.test(St))ut=!0;else if(/^mod$/i.test(St))isiOS()||isMacOS()?dt=!0:ct=!0;else throw new Error(`Unrecognized modifier name: ${St}`)}return ot&&(et=`Alt-${et}`),ct&&(et=`Ctrl-${et}`),dt&&(et=`Meta-${et}`),ut&&(et=`Shift-${et}`),et}var keyboardShortcut=it=>({editor:g,view:et,tr:ot,dispatch:ct})=>{const ut=normalizeKeyName(it).split(/-(?!$)/),dt=ut.find(kt=>!["Alt","Ctrl","Meta","Shift"].includes(kt)),ft=new KeyboardEvent("keydown",{key:dt==="Space"?" ":dt,altKey:ut.includes("Alt"),ctrlKey:ut.includes("Ctrl"),metaKey:ut.includes("Meta"),shiftKey:ut.includes("Shift"),bubbles:!0,cancelable:!0}),St=g.captureTransaction(()=>{et.someProp("handleKeyDown",kt=>kt(et,ft))});return St==null||St.steps.forEach(kt=>{const Tt=kt.map(ot.mapping);Tt&&ct&&ot.maybeStep(Tt)}),!0};function isNodeActive(it,g,et={}){const{from:ot,to:ct,empty:ut}=it.selection,dt=g?getNodeType(g,it.schema):null,ft=[];it.doc.nodesBetween(ot,ct,(Rt,jt)=>{if(Rt.isText)return;const $t=Math.max(ot,jt),Ft=Math.min(ct,jt+Rt.nodeSize);ft.push({node:Rt,from:$t,to:Ft})});const St=ct-ot,kt=ft.filter(Rt=>dt?dt.name===Rt.node.type.name:!0).filter(Rt=>objectIncludes(Rt.node.attrs,et,{strict:!1}));return ut?!!kt.length:kt.reduce((Rt,jt)=>Rt+jt.to-jt.from,0)>=St}var lift=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return isNodeActive(et,ct,g)?lift$1(et,ot):!1},liftEmptyBlock=()=>({state:it,dispatch:g})=>liftEmptyBlock$1(it,g),liftListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return liftListItem$1(ot)(g,et)},newlineInCode=()=>({state:it,dispatch:g})=>newlineInCode$1(it,g);function getSchemaTypeNameByName(it,g){return g.nodes[it]?"node":g.marks[it]?"mark":null}function deleteProps(it,g){const et=typeof g=="string"?[g]:g;return Object.keys(it).reduce((ot,ct)=>(et.includes(ct)||(ot[ct]=it[ct]),ot),{})}var resetAttributes=(it,g)=>({tr:et,state:ot,dispatch:ct})=>{let ut=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ut=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ct&&et.selection.ranges.forEach(St=>{ot.doc.nodesBetween(St.$from.pos,St.$to.pos,(kt,Tt)=>{ut&&ut===kt.type&&et.setNodeMarkup(Tt,void 0,deleteProps(kt.attrs,g)),dt&&kt.marks.length&&kt.marks.forEach(Rt=>{dt===Rt.type&&et.addMark(Tt,Tt+kt.nodeSize,dt.create(deleteProps(Rt.attrs,g)))})})}),!0):!1},scrollIntoView=()=>({tr:it,dispatch:g})=>(g&&it.scrollIntoView(),!0),selectAll=()=>({tr:it,dispatch:g})=>{if(g){const et=new AllSelection(it.doc);it.setSelection(et)}return!0},selectNodeBackward=()=>({state:it,dispatch:g})=>selectNodeBackward$1(it,g),selectNodeForward=()=>({state:it,dispatch:g})=>selectNodeForward$1(it,g),selectParentNode=()=>({state:it,dispatch:g})=>selectParentNode$1(it,g),selectTextblockEnd=()=>({state:it,dispatch:g})=>selectTextblockEnd$1(it,g),selectTextblockStart=()=>({state:it,dispatch:g})=>selectTextblockStart$1(it,g);function createDocument(it,g,et={},ot={}){return createNodeFromContent(it,g,{slice:!1,parseOptions:et,errorOnInvalidContent:ot.errorOnInvalidContent})}var setContent=(it,{errorOnInvalidContent:g,emitUpdate:et=!0,parseOptions:ot={}}={})=>({editor:ct,tr:ut,dispatch:dt,commands:ft})=>{const{doc:St}=ut;if(ot.preserveWhitespace!=="full"){const kt=createDocument(it,ct.schema,ot,{errorOnInvalidContent:g??ct.options.enableContentCheck});return dt&&ut.replaceWith(0,St.content.size,kt).setMeta("preventUpdate",!et),!0}return dt&&ut.setMeta("preventUpdate",!et),ft.insertContentAt({from:0,to:St.content.size},it,{parseOptions:ot,errorOnInvalidContent:g??ct.options.enableContentCheck})};function getMarkAttributes(it,g){const et=getMarkType(g,it.schema),{from:ot,to:ct,empty:ut}=it.selection,dt=[];ut?(it.storedMarks&&dt.push(...it.storedMarks),dt.push(...it.selection.$head.marks())):it.doc.nodesBetween(ot,ct,St=>{dt.push(...St.marks)});const ft=dt.find(St=>St.type.name===et.name);return ft?{...ft.attrs}:{}}function combineTransactionSteps(it,g){const et=new Transform(it);return g.forEach(ot=>{ot.steps.forEach(ct=>{et.step(ct)})}),et}function defaultBlockAt(it){for(let g=0;g<it.edgeCount;g+=1){const{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}function findChildrenInRange(it,g,et){const ot=[];return it.nodesBetween(g.from,g.to,(ct,ut)=>{et(ct)&&ot.push({node:ct,pos:ut})}),ot}function findParentNodeClosestToPos(it,g){for(let et=it.depth;et>0;et-=1){const ot=it.node(et);if(g(ot))return{pos:et>0?it.before(et):0,start:it.start(et),depth:et,node:ot}}}function findParentNode(it){return g=>findParentNodeClosestToPos(g.$from,it)}function getExtensionField(it,g,et){return it.config[g]===void 0&&it.parent?getExtensionField(it.parent,g,et):typeof it.config[g]=="function"?it.config[g].bind({...et,parent:it.parent?getExtensionField(it.parent,g,et):null}):it.config[g]}function flattenExtensions(it){return it.map(g=>{const et={name:g.name,options:g.options,storage:g.storage},ot=getExtensionField(g,"addExtensions",et);return ot?[g,...flattenExtensions(ot())]:g}).flat(10)}function getHTMLFromFragment(it,g){const et=DOMSerializer.fromSchema(g).serializeFragment(it),ct=document.implementation.createHTMLDocument().createElement("div");return ct.appendChild(et),ct.innerHTML}function isFunction(it){return typeof it=="function"}function callOrReturn(it,g=void 0,...et){return isFunction(it)?g?it.bind(g)(...et):it(...et):it}function isEmptyObject(it={}){return Object.keys(it).length===0&&it.constructor===Object}function splitExtensions(it){const g=it.filter(ct=>ct.type==="extension"),et=it.filter(ct=>ct.type==="node"),ot=it.filter(ct=>ct.type==="mark");return{baseExtensions:g,nodeExtensions:et,markExtensions:ot}}function getAttributesFromExtensions(it){const g=[],{nodeExtensions:et,markExtensions:ot}=splitExtensions(it),ct=[...et,...ot],ut={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return it.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage,extensions:ct},St=getExtensionField(dt,"addGlobalAttributes",ft);if(!St)return;St().forEach(Tt=>{Tt.types.forEach(Rt=>{Object.entries(Tt.attributes).forEach(([jt,$t])=>{g.push({type:Rt,name:jt,attribute:{...ut,...$t}})})})})}),ct.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage},St=getExtensionField(dt,"addAttributes",ft);if(!St)return;const kt=St();Object.entries(kt).forEach(([Tt,Rt])=>{const jt={...ut,...Rt};typeof(jt==null?void 0:jt.default)=="function"&&(jt.default=jt.default()),jt!=null&&jt.isRequired&&(jt==null?void 0:jt.default)===void 0&&delete jt.default,g.push({type:dt.name,name:Tt,attribute:jt})})}),g}function mergeAttributes(...it){return it.filter(g=>!!g).reduce((g,et)=>{const ot={...g};return Object.entries(et).forEach(([ct,ut])=>{if(!ot[ct]){ot[ct]=ut;return}if(ct==="class"){const ft=ut?String(ut).split(" "):[],St=ot[ct]?ot[ct].split(" "):[],kt=ft.filter(Tt=>!St.includes(Tt));ot[ct]=[...St,...kt].join(" ")}else if(ct==="style"){const ft=ut?ut.split(";").map(Tt=>Tt.trim()).filter(Boolean):[],St=ot[ct]?ot[ct].split(";").map(Tt=>Tt.trim()).filter(Boolean):[],kt=new Map;St.forEach(Tt=>{const[Rt,jt]=Tt.split(":").map($t=>$t.trim());kt.set(Rt,jt)}),ft.forEach(Tt=>{const[Rt,jt]=Tt.split(":").map($t=>$t.trim());kt.set(Rt,jt)}),ot[ct]=Array.from(kt.entries()).map(([Tt,Rt])=>`${Tt}: ${Rt}`).join("; ")}else ot[ct]=ut}),ot},{})}function getRenderedAttributes(it,g){return g.filter(et=>et.type===it.type.name).filter(et=>et.attribute.rendered).map(et=>et.attribute.renderHTML?et.attribute.renderHTML(it.attrs)||{}:{[et.name]:it.attrs[et.name]}).reduce((et,ot)=>mergeAttributes(et,ot),{})}function fromString(it){return typeof it!="string"?it:it.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(it):it==="true"?!0:it==="false"?!1:it}function injectExtensionAttributesToParseRule(it,g){return"style"in it?it:{...it,getAttrs:et=>{const ot=it.getAttrs?it.getAttrs(et):it.attrs;if(ot===!1)return!1;const ct=g.reduce((ut,dt)=>{const ft=dt.attribute.parseHTML?dt.attribute.parseHTML(et):fromString(et.getAttribute(dt.name));return ft==null?ut:{...ut,[dt.name]:ft}},{});return{...ot,...ct}}}}function cleanUpSchemaItem(it){return Object.fromEntries(Object.entries(it).filter(([g,et])=>g==="attrs"&&isEmptyObject(et)?!1:et!=null))}function getSchemaByResolvedExtensions(it,g){var et;const ot=getAttributesFromExtensions(it),{nodeExtensions:ct,markExtensions:ut}=splitExtensions(it),dt=(et=ct.find(kt=>getExtensionField(kt,"topNode")))==null?void 0:et.name,ft=Object.fromEntries(ct.map(kt=>{const Tt=ot.filter(Bt=>Bt.type===kt.name),Rt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},jt=it.reduce((Bt,Ut)=>{const Yt=getExtensionField(Ut,"extendNodeSchema",Rt);return{...Bt,...Yt?Yt(kt):{}}},{}),$t=cleanUpSchemaItem({...jt,content:callOrReturn(getExtensionField(kt,"content",Rt)),marks:callOrReturn(getExtensionField(kt,"marks",Rt)),group:callOrReturn(getExtensionField(kt,"group",Rt)),inline:callOrReturn(getExtensionField(kt,"inline",Rt)),atom:callOrReturn(getExtensionField(kt,"atom",Rt)),selectable:callOrReturn(getExtensionField(kt,"selectable",Rt)),draggable:callOrReturn(getExtensionField(kt,"draggable",Rt)),code:callOrReturn(getExtensionField(kt,"code",Rt)),whitespace:callOrReturn(getExtensionField(kt,"whitespace",Rt)),linebreakReplacement:callOrReturn(getExtensionField(kt,"linebreakReplacement",Rt)),defining:callOrReturn(getExtensionField(kt,"defining",Rt)),isolating:callOrReturn(getExtensionField(kt,"isolating",Rt)),attrs:Object.fromEntries(Tt.map(Bt=>{var Ut,Yt;return[Bt.name,{default:(Ut=Bt==null?void 0:Bt.attribute)==null?void 0:Ut.default,validate:(Yt=Bt==null?void 0:Bt.attribute)==null?void 0:Yt.validate}]}))}),Ft=callOrReturn(getExtensionField(kt,"parseHTML",Rt));Ft&&($t.parseDOM=Ft.map(Bt=>injectExtensionAttributesToParseRule(Bt,Tt)));const Ht=getExtensionField(kt,"renderHTML",Rt);Ht&&($t.toDOM=Bt=>Ht({node:Bt,HTMLAttributes:getRenderedAttributes(Bt,Tt)}));const Kt=getExtensionField(kt,"renderText",Rt);return Kt&&($t.toText=Kt),[kt.name,$t]})),St=Object.fromEntries(ut.map(kt=>{const Tt=ot.filter(Kt=>Kt.type===kt.name),Rt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},jt=it.reduce((Kt,Bt)=>{const Ut=getExtensionField(Bt,"extendMarkSchema",Rt);return{...Kt,...Ut?Ut(kt):{}}},{}),$t=cleanUpSchemaItem({...jt,inclusive:callOrReturn(getExtensionField(kt,"inclusive",Rt)),excludes:callOrReturn(getExtensionField(kt,"excludes",Rt)),group:callOrReturn(getExtensionField(kt,"group",Rt)),spanning:callOrReturn(getExtensionField(kt,"spanning",Rt)),code:callOrReturn(getExtensionField(kt,"code",Rt)),attrs:Object.fromEntries(Tt.map(Kt=>{var Bt,Ut;return[Kt.name,{default:(Bt=Kt==null?void 0:Kt.attribute)==null?void 0:Bt.default,validate:(Ut=Kt==null?void 0:Kt.attribute)==null?void 0:Ut.validate}]}))}),Ft=callOrReturn(getExtensionField(kt,"parseHTML",Rt));Ft&&($t.parseDOM=Ft.map(Kt=>injectExtensionAttributesToParseRule(Kt,Tt)));const Ht=getExtensionField(kt,"renderHTML",Rt);return Ht&&($t.toDOM=Kt=>Ht({mark:Kt,HTMLAttributes:getRenderedAttributes(Kt,Tt)})),[kt.name,$t]}));return new Schema({topNode:dt,nodes:ft,marks:St})}function findDuplicates(it){const g=it.filter((et,ot)=>it.indexOf(et)!==ot);return Array.from(new Set(g))}function sortExtensions(it){return it.sort((et,ot)=>{const ct=getExtensionField(et,"priority")||100,ut=getExtensionField(ot,"priority")||100;return ct>ut?-1:ct<ut?1:0})}function resolveExtensions(it){const g=sortExtensions(flattenExtensions(it)),et=findDuplicates(g.map(ot=>ot.name));return et.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${et.map(ot=>`'${ot}'`).join(", ")}]. This can lead to issues.`),g}function getTextBetween(it,g,et){const{from:ot,to:ct}=g,{blockSeparator:ut=`

`,textSerializers:dt={}}=et||{};let ft="";return it.nodesBetween(ot,ct,(St,kt,Tt,Rt)=>{var jt;St.isBlock&&kt>ot&&(ft+=ut);const $t=dt==null?void 0:dt[St.type.name];if($t)return Tt&&(ft+=$t({node:St,pos:kt,parent:Tt,index:Rt,range:g})),!1;St.isText&&(ft+=(jt=St==null?void 0:St.text)==null?void 0:jt.slice(Math.max(ot,kt)-kt,ct-kt))}),ft}function getText(it,g){const et={from:0,to:it.content.size};return getTextBetween(it,et,g)}function getTextSerializersFromSchema(it){return Object.fromEntries(Object.entries(it.nodes).filter(([,g])=>g.spec.toText).map(([g,et])=>[g,et.spec.toText]))}function getNodeAttributes(it,g){const et=getNodeType(g,it.schema),{from:ot,to:ct}=it.selection,ut=[];it.doc.nodesBetween(ot,ct,ft=>{ut.push(ft)});const dt=ut.reverse().find(ft=>ft.type.name===et.name);return dt?{...dt.attrs}:{}}function getAttributes$1(it,g){const et=getSchemaTypeNameByName(typeof g=="string"?g:g.name,it.schema);return et==="node"?getNodeAttributes(it,g):et==="mark"?getMarkAttributes(it,g):{}}function removeDuplicates(it,g=JSON.stringify){const et={};return it.filter(ot=>{const ct=g(ot);return Object.prototype.hasOwnProperty.call(et,ct)?!1:et[ct]=!0})}function simplifyChangedRanges(it){const g=removeDuplicates(it);return g.length===1?g:g.filter((et,ot)=>!g.filter((ut,dt)=>dt!==ot).some(ut=>et.oldRange.from>=ut.oldRange.from&&et.oldRange.to<=ut.oldRange.to&&et.newRange.from>=ut.newRange.from&&et.newRange.to<=ut.newRange.to))}function getChangedRanges(it){const{mapping:g,steps:et}=it,ot=[];return g.maps.forEach((ct,ut)=>{const dt=[];if(ct.ranges.length)ct.forEach((ft,St)=>{dt.push({from:ft,to:St})});else{const{from:ft,to:St}=et[ut];if(ft===void 0||St===void 0)return;dt.push({from:ft,to:St})}dt.forEach(({from:ft,to:St})=>{const kt=g.slice(ut).map(ft,-1),Tt=g.slice(ut).map(St),Rt=g.invert().map(kt,-1),jt=g.invert().map(Tt);ot.push({oldRange:{from:Rt,to:jt},newRange:{from:kt,to:Tt}})})}),simplifyChangedRanges(ot)}function getMarksBetween(it,g,et){const ot=[];return it===g?et.resolve(it).marks().forEach(ct=>{const ut=et.resolve(it),dt=getMarkRange(ut,ct.type);dt&&ot.push({mark:ct,...dt})}):et.nodesBetween(it,g,(ct,ut)=>{!ct||(ct==null?void 0:ct.nodeSize)===void 0||ot.push(...ct.marks.map(dt=>({from:ut,to:ut+ct.nodeSize,mark:dt})))}),ot}var getNodeAtPosition=(it,g,et,ot=20)=>{const ct=it.doc.resolve(et);let ut=ot,dt=null;for(;ut>0&&dt===null;){const ft=ct.node(ut);(ft==null?void 0:ft.type.name)===g?dt=ft:ut-=1}return[dt,ut]};function getSchemaTypeByName(it,g){return g.nodes[it]||g.marks[it]||null}function getSplittedAttributes(it,g,et){return Object.fromEntries(Object.entries(et).filter(([ot])=>{const ct=it.find(ut=>ut.type===g&&ut.name===ot);return ct?ct.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(it,g=500)=>{let et="";const ot=it.parentOffset;return it.parent.nodesBetween(Math.max(0,ot-g),ot,(ct,ut,dt,ft)=>{var St,kt;const Tt=((kt=(St=ct.type.spec).toText)==null?void 0:kt.call(St,{node:ct,pos:ut,parent:dt,index:ft}))||ct.textContent||"%leaf%";et+=ct.isAtom&&!ct.isText?Tt:Tt.slice(0,Math.max(0,ot-ut))}),et};function isMarkActive(it,g,et={}){const{empty:ot,ranges:ct}=it.selection,ut=g?getMarkType(g,it.schema):null;if(ot)return!!(it.storedMarks||it.selection.$from.marks()).filter(Rt=>ut?ut.name===Rt.type.name:!0).find(Rt=>objectIncludes(Rt.attrs,et,{strict:!1}));let dt=0;const ft=[];if(ct.forEach(({$from:Rt,$to:jt})=>{const $t=Rt.pos,Ft=jt.pos;it.doc.nodesBetween($t,Ft,(Ht,Kt)=>{if(!Ht.isText&&!Ht.marks.length)return;const Bt=Math.max($t,Kt),Ut=Math.min(Ft,Kt+Ht.nodeSize),Yt=Ut-Bt;dt+=Yt,ft.push(...Ht.marks.map(Jt=>({mark:Jt,from:Bt,to:Ut})))})}),dt===0)return!1;const St=ft.filter(Rt=>ut?ut.name===Rt.mark.type.name:!0).filter(Rt=>objectIncludes(Rt.mark.attrs,et,{strict:!1})).reduce((Rt,jt)=>Rt+jt.to-jt.from,0),kt=ft.filter(Rt=>ut?Rt.mark.type!==ut&&Rt.mark.type.excludes(ut):!0).reduce((Rt,jt)=>Rt+jt.to-jt.from,0);return(St>0?St+kt:St)>=dt}function isActive(it,g,et={}){if(!g)return isNodeActive(it,null,et)||isMarkActive(it,null,et);const ot=getSchemaTypeNameByName(g,it.schema);return ot==="node"?isNodeActive(it,g,et):ot==="mark"?isMarkActive(it,g,et):!1}var isAtEndOfNode=(it,g)=>{const{$from:et,$to:ot,$anchor:ct}=it.selection;if(g){const ut=findParentNode(ft=>ft.type.name===g)(it.selection);if(!ut)return!1;const dt=it.doc.resolve(ut.pos+1);return ct.pos+1===dt.end()}return!(ot.parentOffset<ot.parent.nodeSize-2||et.pos!==ot.pos)},isAtStartOfNode=it=>{const{$from:g,$to:et}=it.selection;return!(g.parentOffset>0||g.pos!==et.pos)};function isExtensionRulesEnabled(it,g){return Array.isArray(g)?g.some(et=>(typeof et=="string"?et:et.name)===it.name):g}function isList(it,g){const{nodeExtensions:et}=splitExtensions(g),ot=et.find(dt=>dt.name===it);if(!ot)return!1;const ct={name:ot.name,options:ot.options,storage:ot.storage},ut=callOrReturn(getExtensionField(ot,"group",ct));return typeof ut!="string"?!1:ut.split(" ").includes("list")}function isNodeEmpty(it,{checkChildren:g=!0,ignoreWhitespace:et=!1}={}){var ot;if(et){if(it.type.name==="hardBreak")return!0;if(it.isText)return/^\s*$/m.test((ot=it.text)!=null?ot:"")}if(it.isText)return!it.text;if(it.isAtom||it.isLeaf)return!1;if(it.content.childCount===0)return!0;if(g){let ct=!0;return it.content.forEach(ut=>{ct!==!1&&(isNodeEmpty(ut,{ignoreWhitespace:et,checkChildren:g})||(ct=!1))}),ct}return!1}function isNodeSelection(it){return it instanceof NodeSelection}function canSetMark(it,g,et){var ot;const{selection:ct}=g;let ut=null;if(isTextSelection(ct)&&(ut=ct.$cursor),ut){const ft=(ot=it.storedMarks)!=null?ot:ut.marks();return ut.parent.type.allowsMarkType(et)&&(!!et.isInSet(ft)||!ft.some(kt=>kt.type.excludes(et)))}const{ranges:dt}=ct;return dt.some(({$from:ft,$to:St})=>{let kt=ft.depth===0?it.doc.inlineContent&&it.doc.type.allowsMarkType(et):!1;return it.doc.nodesBetween(ft.pos,St.pos,(Tt,Rt,jt)=>{if(kt)return!1;if(Tt.isInline){const $t=!jt||jt.type.allowsMarkType(et),Ft=!!et.isInSet(Tt.marks)||!Tt.marks.some(Ht=>Ht.type.excludes(et));kt=$t&&Ft}return!kt}),kt})}var setMark=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{const{selection:ut}=et,{empty:dt,ranges:ft}=ut,St=getMarkType(it,ot.schema);if(ct)if(dt){const kt=getMarkAttributes(ot,St);et.addStoredMark(St.create({...kt,...g}))}else ft.forEach(kt=>{const Tt=kt.$from.pos,Rt=kt.$to.pos;ot.doc.nodesBetween(Tt,Rt,(jt,$t)=>{const Ft=Math.max($t,Tt),Ht=Math.min($t+jt.nodeSize,Rt);jt.marks.find(Bt=>Bt.type===St)?jt.marks.forEach(Bt=>{St===Bt.type&&et.addMark(Ft,Ht,St.create({...Bt.attrs,...g}))}):et.addMark(Ft,Ht,St.create(g))})});return canSetMark(ot,et,St)},setMeta=(it,g)=>({tr:et})=>(et.setMeta(it,g),!0),setNode=(it,g={})=>({state:et,dispatch:ot,chain:ct})=>{const ut=getNodeType(it,et.schema);let dt;return et.selection.$anchor.sameParent(et.selection.$head)&&(dt=et.selection.$anchor.parent.attrs),ut.isTextblock?ct().command(({commands:ft})=>setBlockType(ut,{...dt,...g})(et)?!0:ft.clearNodes()).command(({state:ft})=>setBlockType(ut,{...dt,...g})(ft,ot)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,ct=minMax(it,0,ot.content.size),ut=NodeSelection.create(ot,ct);g.setSelection(ut)}return!0},setTextSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,{from:ct,to:ut}=typeof it=="number"?{from:it,to:it}:it,dt=TextSelection.atStart(ot).from,ft=TextSelection.atEnd(ot).to,St=minMax(ct,dt,ft),kt=minMax(ut,dt,ft),Tt=TextSelection.create(ot,St,kt);g.setSelection(Tt)}return!0},sinkListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return sinkListItem$1(ot)(g,et)};function ensureMarks(it,g){const et=it.storedMarks||it.selection.$to.parentOffset&&it.selection.$from.marks();if(et){const ot=et.filter(ct=>g==null?void 0:g.includes(ct.type.name));it.tr.ensureMarks(ot)}}var splitBlock=({keepMarks:it=!0}={})=>({tr:g,state:et,dispatch:ot,editor:ct})=>{const{selection:ut,doc:dt}=g,{$from:ft,$to:St}=ut,kt=ct.extensionManager.attributes,Tt=getSplittedAttributes(kt,ft.node().type.name,ft.node().attrs);if(ut instanceof NodeSelection&&ut.node.isBlock)return!ft.parentOffset||!canSplit(dt,ft.pos)?!1:(ot&&(it&&ensureMarks(et,ct.extensionManager.splittableMarks),g.split(ft.pos).scrollIntoView()),!0);if(!ft.parent.isBlock)return!1;const Rt=St.parentOffset===St.parent.content.size,jt=ft.depth===0?void 0:defaultBlockAt(ft.node(-1).contentMatchAt(ft.indexAfter(-1)));let $t=Rt&&jt?[{type:jt,attrs:Tt}]:void 0,Ft=canSplit(g.doc,g.mapping.map(ft.pos),1,$t);if(!$t&&!Ft&&canSplit(g.doc,g.mapping.map(ft.pos),1,jt?[{type:jt}]:void 0)&&(Ft=!0,$t=jt?[{type:jt,attrs:Tt}]:void 0),ot){if(Ft&&(ut instanceof TextSelection&&g.deleteSelection(),g.split(g.mapping.map(ft.pos),1,$t),jt&&!Rt&&!ft.parentOffset&&ft.parent.type!==jt)){const Ht=g.mapping.map(ft.before()),Kt=g.doc.resolve(Ht);ft.node(-1).canReplaceWith(Kt.index(),Kt.index()+1,jt)&&g.setNodeMarkup(g.mapping.map(ft.before()),jt)}it&&ensureMarks(et,ct.extensionManager.splittableMarks),g.scrollIntoView()}return Ft},splitListItem=(it,g={})=>({tr:et,state:ot,dispatch:ct,editor:ut})=>{var dt;const ft=getNodeType(it,ot.schema),{$from:St,$to:kt}=ot.selection,Tt=ot.selection.node;if(Tt&&Tt.isBlock||St.depth<2||!St.sameParent(kt))return!1;const Rt=St.node(-1);if(Rt.type!==ft)return!1;const jt=ut.extensionManager.attributes;if(St.parent.content.size===0&&St.node(-1).childCount===St.indexAfter(-1)){if(St.depth===2||St.node(-3).type!==ft||St.index(-2)!==St.node(-2).childCount-1)return!1;if(ct){let Bt=Fragment.empty;const Ut=St.index(-1)?1:St.index(-2)?2:3;for(let nn=St.depth-Ut;nn>=St.depth-3;nn-=1)Bt=Fragment.from(St.node(nn).copy(Bt));const Yt=St.indexAfter(-1)<St.node(-2).childCount?1:St.indexAfter(-2)<St.node(-3).childCount?2:3,Jt={...getSplittedAttributes(jt,St.node().type.name,St.node().attrs),...g},Zt=((dt=ft.contentMatch.defaultType)==null?void 0:dt.createAndFill(Jt))||void 0;Bt=Bt.append(Fragment.from(ft.createAndFill(null,Zt)||void 0));const en=St.before(St.depth-(Ut-1));et.replace(en,St.after(-Yt),new Slice(Bt,4-Ut,0));let tn=-1;et.doc.nodesBetween(en,et.doc.content.size,(nn,ln)=>{if(tn>-1)return!1;nn.isTextblock&&nn.content.size===0&&(tn=ln+1)}),tn>-1&&et.setSelection(TextSelection.near(et.doc.resolve(tn))),et.scrollIntoView()}return!0}const $t=kt.pos===St.end()?Rt.contentMatchAt(0).defaultType:null,Ft={...getSplittedAttributes(jt,Rt.type.name,Rt.attrs),...g},Ht={...getSplittedAttributes(jt,St.node().type.name,St.node().attrs),...g};et.delete(St.pos,kt.pos);const Kt=$t?[{type:ft,attrs:Ft},{type:$t,attrs:Ht}]:[{type:ft,attrs:Ft}];if(!canSplit(et.doc,St.pos,2))return!1;if(ct){const{selection:Bt,storedMarks:Ut}=ot,{splittableMarks:Yt}=ut.extensionManager,Jt=Ut||Bt.$to.parentOffset&&Bt.$from.marks();if(et.split(St.pos,2,Kt).scrollIntoView(),!Jt||!ct)return!0;const Zt=Jt.filter(en=>Yt.includes(en.type.name));et.ensureMarks(Zt)}return!0},joinListBackwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(Math.max(0,et.pos-1)).before(et.depth);if(ot===void 0)return!0;const ct=it.doc.nodeAt(ot);return et.node.type===(ct==null?void 0:ct.type)&&canJoin(it.doc,et.pos)&&it.join(et.pos),!0},joinListForwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(et.start).after(et.depth);if(ot===void 0)return!0;const ct=it.doc.nodeAt(ot);return et.node.type===(ct==null?void 0:ct.type)&&canJoin(it.doc,ot)&&it.join(ot),!0},toggleList=(it,g,et,ot={})=>({editor:ct,tr:ut,state:dt,dispatch:ft,chain:St,commands:kt,can:Tt})=>{const{extensions:Rt,splittableMarks:jt}=ct.extensionManager,$t=getNodeType(it,dt.schema),Ft=getNodeType(g,dt.schema),{selection:Ht,storedMarks:Kt}=dt,{$from:Bt,$to:Ut}=Ht,Yt=Bt.blockRange(Ut),Jt=Kt||Ht.$to.parentOffset&&Ht.$from.marks();if(!Yt)return!1;const Zt=findParentNode(en=>isList(en.type.name,Rt))(Ht);if(Yt.depth>=1&&Zt&&Yt.depth-Zt.depth<=1){if(Zt.node.type===$t)return kt.liftListItem(Ft);if(isList(Zt.node.type.name,Rt)&&$t.validContent(Zt.node.content)&&ft)return St().command(()=>(ut.setNodeMarkup(Zt.pos,$t),!0)).command(()=>joinListBackwards(ut,$t)).command(()=>joinListForwards(ut,$t)).run()}return!et||!Jt||!ft?St().command(()=>Tt().wrapInList($t,ot)?!0:kt.clearNodes()).wrapInList($t,ot).command(()=>joinListBackwards(ut,$t)).command(()=>joinListForwards(ut,$t)).run():St().command(()=>{const en=Tt().wrapInList($t,ot),tn=Jt.filter(nn=>jt.includes(nn.type.name));return ut.ensureMarks(tn),en?!0:kt.clearNodes()}).wrapInList($t,ot).command(()=>joinListBackwards(ut,$t)).command(()=>joinListForwards(ut,$t)).run()},toggleMark=(it,g={},et={})=>({state:ot,commands:ct})=>{const{extendEmptyMarkRange:ut=!1}=et,dt=getMarkType(it,ot.schema);return isMarkActive(ot,dt,g)?ct.unsetMark(dt,{extendEmptyMarkRange:ut}):ct.setMark(dt,g)},toggleNode=(it,g,et={})=>({state:ot,commands:ct})=>{const ut=getNodeType(it,ot.schema),dt=getNodeType(g,ot.schema),ft=isNodeActive(ot,ut,et);let St;return ot.selection.$anchor.sameParent(ot.selection.$head)&&(St=ot.selection.$anchor.parent.attrs),ft?ct.setNode(dt,St):ct.setNode(ut,{...St,...et})},toggleWrap=(it,g={})=>({state:et,commands:ot})=>{const ct=getNodeType(it,et.schema);return isNodeActive(et,ct,g)?ot.lift(ct):ot.wrapIn(ct,g)},undoInputRule=()=>({state:it,dispatch:g})=>{const et=it.plugins;for(let ot=0;ot<et.length;ot+=1){const ct=et[ot];let ut;if(ct.spec.isInputRules&&(ut=ct.getState(it))){if(g){const dt=it.tr,ft=ut.transform;for(let St=ft.steps.length-1;St>=0;St-=1)dt.step(ft.steps[St].invert(ft.docs[St]));if(ut.text){const St=dt.doc.resolve(ut.from).marks();dt.replaceWith(ut.from,ut.to,it.schema.text(ut.text,St))}else dt.delete(ut.from,ut.to)}return!0}}return!1},unsetAllMarks=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,{empty:ot,ranges:ct}=et;return ot||g&&ct.forEach(ut=>{it.removeMark(ut.$from.pos,ut.$to.pos)}),!0},unsetMark=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{var ut;const{extendEmptyMarkRange:dt=!1}=g,{selection:ft}=et,St=getMarkType(it,ot.schema),{$from:kt,empty:Tt,ranges:Rt}=ft;if(!ct)return!0;if(Tt&&dt){let{from:jt,to:$t}=ft;const Ft=(ut=kt.marks().find(Kt=>Kt.type===St))==null?void 0:ut.attrs,Ht=getMarkRange(kt,St,Ft);Ht&&(jt=Ht.from,$t=Ht.to),et.removeMark(jt,$t,St)}else Rt.forEach(jt=>{et.removeMark(jt.$from.pos,jt.$to.pos,St)});return et.removeStoredMark(St),!0},updateAttributes=(it,g={})=>({tr:et,state:ot,dispatch:ct})=>{let ut=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ut=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ct&&et.selection.ranges.forEach(St=>{const kt=St.$from.pos,Tt=St.$to.pos;let Rt,jt,$t,Ft;et.selection.empty?ot.doc.nodesBetween(kt,Tt,(Ht,Kt)=>{ut&&ut===Ht.type&&($t=Math.max(Kt,kt),Ft=Math.min(Kt+Ht.nodeSize,Tt),Rt=Kt,jt=Ht)}):ot.doc.nodesBetween(kt,Tt,(Ht,Kt)=>{Kt<kt&&ut&&ut===Ht.type&&($t=Math.max(Kt,kt),Ft=Math.min(Kt+Ht.nodeSize,Tt),Rt=Kt,jt=Ht),Kt>=kt&&Kt<=Tt&&(ut&&ut===Ht.type&&et.setNodeMarkup(Kt,void 0,{...Ht.attrs,...g}),dt&&Ht.marks.length&&Ht.marks.forEach(Bt=>{if(dt===Bt.type){const Ut=Math.max(Kt,kt),Yt=Math.min(Kt+Ht.nodeSize,Tt);et.addMark(Ut,Yt,dt.create({...Bt.attrs,...g}))}}))}),jt&&(Rt!==void 0&&et.setNodeMarkup(Rt,void 0,{...jt.attrs,...g}),dt&&jt.marks.length&&jt.marks.forEach(Ht=>{dt===Ht.type&&et.addMark($t,Ft,dt.create({...Ht.attrs,...g}))}))}),!0):!1},wrapIn=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return wrapIn$1(ct,g)(et,ot)},wrapInList=(it,g={})=>({state:et,dispatch:ot})=>{const ct=getNodeType(it,et.schema);return wrapInList$1(ct,g)(et,ot)},EventEmitter=class{constructor(){this.callbacks={}}on(it,g){return this.callbacks[it]||(this.callbacks[it]=[]),this.callbacks[it].push(g),this}emit(it,...g){const et=this.callbacks[it];return et&&et.forEach(ot=>ot.apply(this,g)),this}off(it,g){const et=this.callbacks[it];return et&&(g?this.callbacks[it]=et.filter(ot=>ot!==g):delete this.callbacks[it]),this}once(it,g){const et=(...ot)=>{this.off(it,et),g.apply(this,ot)};return this.on(it,et)}removeAllListeners(){this.callbacks={}}},InputRule=class{constructor(it){var g;this.find=it.find,this.handler=it.handler,this.undoable=(g=it.undoable)!=null?g:!0}},inputRuleMatcherHandler=(it,g)=>{if(isRegExp(g))return g.exec(it);const et=g(it);if(!et)return null;const ot=[et.text];return ot.index=et.index,ot.input=it,ot.data=et.data,et.replaceWith&&(et.text.includes(et.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),ot.push(et.replaceWith)),ot};function run$2(it){var g;const{editor:et,from:ot,to:ct,text:ut,rules:dt,plugin:ft}=it,{view:St}=et;if(St.composing)return!1;const kt=St.state.doc.resolve(ot);if(kt.parent.type.spec.code||(g=kt.nodeBefore||kt.nodeAfter)!=null&&g.marks.find(jt=>jt.type.spec.code))return!1;let Tt=!1;const Rt=getTextContentFromNodes(kt)+ut;return dt.forEach(jt=>{if(Tt)return;const $t=inputRuleMatcherHandler(Rt,jt.find);if(!$t)return;const Ft=St.state.tr,Ht=createChainableState({state:St.state,transaction:Ft}),Kt={from:ot-($t[0].length-ut.length),to:ct},{commands:Bt,chain:Ut,can:Yt}=new CommandManager$1({editor:et,state:Ht});jt.handler({state:Ht,range:Kt,match:$t,commands:Bt,chain:Ut,can:Yt})===null||!Ft.steps.length||(jt.undoable&&Ft.setMeta(ft,{transform:Ft,from:ot,to:ct,text:ut}),St.dispatch(Ft),Tt=!0)}),Tt}function inputRulesPlugin(it){const{editor:g,rules:et}=it,ot=new Plugin({state:{init(){return null},apply(ct,ut,dt){const ft=ct.getMeta(ot);if(ft)return ft;const St=ct.getMeta("applyInputRules");return!!St&&setTimeout(()=>{let{text:Tt}=St;typeof Tt=="string"?Tt=Tt:Tt=getHTMLFromFragment(Fragment.from(Tt),dt.schema);const{from:Rt}=St,jt=Rt+Tt.length;run$2({editor:g,from:Rt,to:jt,text:Tt,rules:et,plugin:ot})}),ct.selectionSet||ct.docChanged?null:ut}},props:{handleTextInput(ct,ut,dt,ft){return run$2({editor:g,from:ut,to:dt,text:ft,rules:et,plugin:ot})},handleDOMEvents:{compositionend:ct=>(setTimeout(()=>{const{$cursor:ut}=ct.state.selection;ut&&run$2({editor:g,from:ut.pos,to:ut.pos,text:"",rules:et,plugin:ot})}),!1)},handleKeyDown(ct,ut){if(ut.key!=="Enter")return!1;const{$cursor:dt}=ct.state.selection;return dt?run$2({editor:g,from:dt.pos,to:dt.pos,text:`
`,rules:et,plugin:ot}):!1}},isInputRules:!0});return ot}function getType(it){return Object.prototype.toString.call(it).slice(8,-1)}function isPlainObject(it){return getType(it)!=="Object"?!1:it.constructor===Object&&Object.getPrototypeOf(it)===Object.prototype}function mergeDeep(it,g){const et={...it};return isPlainObject(it)&&isPlainObject(g)&&Object.keys(g).forEach(ot=>{isPlainObject(g[ot])&&isPlainObject(it[ot])?et[ot]=mergeDeep(it[ot],g[ot]):et[ot]=g[ot]}),et}var Extendable=class{constructor(it={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...it},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(it={}){const g=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,it)});return g.name=this.name,g.parent=this.parent,g}extend(it={}){const g=new this.constructor({...this.config,...it});return g.parent=this,this.child=g,g.name="name"in it?it.name:g.parent.name,g}},Mark=class cA extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(g={}){const et=typeof g=="function"?g():g;return new cA(et)}static handleExit({editor:g,mark:et}){const{tr:ot}=g.state,ct=g.state.selection.$from;if(ct.pos===ct.end()){const dt=ct.marks();if(!!!dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name))return!1;const St=dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name);return St&&ot.removeStoredMark(St),ot.insertText(" ",ct.pos),g.view.dispatch(ot),!0}return!1}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function isNumber(it){return typeof it=="number"}var PasteRule=class{constructor(it){this.find=it.find,this.handler=it.handler}},pasteRuleMatcherHandler=(it,g,et)=>{if(isRegExp(g))return[...it.matchAll(g)];const ot=g(it,et);return ot?ot.map(ct=>{const ut=[ct.text];return ut.index=ct.index,ut.input=it,ut.data=ct.data,ct.replaceWith&&(ct.text.includes(ct.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),ut.push(ct.replaceWith)),ut}):[]};function run2(it){const{editor:g,state:et,from:ot,to:ct,rule:ut,pasteEvent:dt,dropEvent:ft}=it,{commands:St,chain:kt,can:Tt}=new CommandManager$1({editor:g,state:et}),Rt=[];return et.doc.nodesBetween(ot,ct,($t,Ft)=>{var Ht,Kt,Bt,Ut,Yt;if((Kt=(Ht=$t.type)==null?void 0:Ht.spec)!=null&&Kt.code||!($t.isText||$t.isTextblock||$t.isInline))return;const Jt=(Yt=(Ut=(Bt=$t.content)==null?void 0:Bt.size)!=null?Ut:$t.nodeSize)!=null?Yt:0,Zt=Math.max(ot,Ft),en=Math.min(ct,Ft+Jt);if(Zt>=en)return;const tn=$t.isText?$t.text||"":$t.textBetween(Zt-Ft,en-Ft,void 0,"");pasteRuleMatcherHandler(tn,ut.find,dt).forEach(ln=>{if(ln.index===void 0)return;const an=Zt+ln.index+1,sn=an+ln[0].length,dn={from:et.tr.mapping.map(an),to:et.tr.mapping.map(sn)},mn=ut.handler({state:et,range:dn,match:ln,commands:St,chain:kt,can:Tt,pasteEvent:dt,dropEvent:ft});Rt.push(mn)})}),Rt.every($t=>$t!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=it=>{var g;const et=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(g=et.clipboardData)==null||g.setData("text/html",it),et};function pasteRulesPlugin(it){const{editor:g,rules:et}=it;let ot=null,ct=!1,ut=!1,dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,ft;try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}const St=({state:Tt,from:Rt,to:jt,rule:$t,pasteEvt:Ft})=>{const Ht=Tt.tr,Kt=createChainableState({state:Tt,transaction:Ht});if(!(!run2({editor:g,state:Kt,from:Math.max(Rt-1,0),to:jt.b-1,rule:$t,pasteEvent:Ft,dropEvent:ft})||!Ht.steps.length)){try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}return dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Ht}};return et.map(Tt=>new Plugin({view(Rt){const jt=Ft=>{var Ht;ot=(Ht=Rt.dom.parentElement)!=null&&Ht.contains(Ft.target)?Rt.dom.parentElement:null,ot&&(tiptapDragFromOtherEditor=g)},$t=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",jt),window.addEventListener("dragend",$t),{destroy(){window.removeEventListener("dragstart",jt),window.removeEventListener("dragend",$t)}}},props:{handleDOMEvents:{drop:(Rt,jt)=>{if(ut=ot===Rt.dom.parentElement,ft=jt,!ut){const $t=tiptapDragFromOtherEditor;$t!=null&&$t.isEditable&&setTimeout(()=>{const Ft=$t.state.selection;Ft&&$t.commands.deleteRange({from:Ft.from,to:Ft.to})},10)}return!1},paste:(Rt,jt)=>{var $t;const Ft=($t=jt.clipboardData)==null?void 0:$t.getData("text/html");return dt=jt,ct=!!(Ft!=null&&Ft.includes("data-pm-slice")),!1}}},appendTransaction:(Rt,jt,$t)=>{const Ft=Rt[0],Ht=Ft.getMeta("uiEvent")==="paste"&&!ct,Kt=Ft.getMeta("uiEvent")==="drop"&&!ut,Bt=Ft.getMeta("applyPasteRules"),Ut=!!Bt;if(!Ht&&!Kt&&!Ut)return;if(Ut){let{text:Zt}=Bt;typeof Zt=="string"?Zt=Zt:Zt=getHTMLFromFragment(Fragment.from(Zt),$t.schema);const{from:en}=Bt,tn=en+Zt.length,nn=createClipboardPasteEvent(Zt);return St({rule:Tt,state:$t,from:en,to:{b:tn},pasteEvt:nn})}const Yt=jt.doc.content.findDiffStart($t.doc.content),Jt=jt.doc.content.findDiffEnd($t.doc.content);if(!(!isNumber(Yt)||!Jt||Yt===Jt.b))return St({rule:Tt,state:$t,from:Yt,to:Jt,pasteEvt:dt})}}))}var ExtensionManager=class{constructor(it,g){this.splittableMarks=[],this.editor=g,this.baseExtensions=it,this.extensions=resolveExtensions(it),this.schema=getSchemaByResolvedExtensions(this.extensions,g),this.setupExtensions()}get commands(){return this.extensions.reduce((it,g)=>{const et={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)},ot=getExtensionField(g,"addCommands",et);return ot?{...it,...ot()}:it},{})}get plugins(){const{editor:it}=this;return sortExtensions([...this.extensions].reverse()).flatMap(ot=>{const ct={name:ot.name,options:ot.options,storage:this.editor.extensionStorage[ot.name],editor:it,type:getSchemaTypeByName(ot.name,this.schema)},ut=[],dt=getExtensionField(ot,"addKeyboardShortcuts",ct);let ft={};if(ot.type==="mark"&&getExtensionField(ot,"exitable",ct)&&(ft.ArrowRight=()=>Mark.handleExit({editor:it,mark:ot})),dt){const jt=Object.fromEntries(Object.entries(dt()).map(([$t,Ft])=>[$t,()=>Ft({editor:it})]));ft={...ft,...jt}}const St=keymap(ft);ut.push(St);const kt=getExtensionField(ot,"addInputRules",ct);if(isExtensionRulesEnabled(ot,it.options.enableInputRules)&&kt){const jt=kt();if(jt&&jt.length){const $t=inputRulesPlugin({editor:it,rules:jt}),Ft=Array.isArray($t)?$t:[$t];ut.push(...Ft)}}const Tt=getExtensionField(ot,"addPasteRules",ct);if(isExtensionRulesEnabled(ot,it.options.enablePasteRules)&&Tt){const jt=Tt();if(jt&&jt.length){const $t=pasteRulesPlugin({editor:it,rules:jt});ut.push(...$t)}}const Rt=getExtensionField(ot,"addProseMirrorPlugins",ct);if(Rt){const jt=Rt();ut.push(...jt)}return ut})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:it}=this,{nodeExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addNodeView")).map(et=>{const ot=this.attributes.filter(ft=>ft.type===et.name),ct={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getNodeType(et.name,this.schema)},ut=getExtensionField(et,"addNodeView",ct);if(!ut)return[];const dt=(ft,St,kt,Tt,Rt)=>{const jt=getRenderedAttributes(ft,ot);return ut()({node:ft,view:St,getPos:kt,decorations:Tt,innerDecorations:Rt,editor:it,extension:et,HTMLAttributes:jt})};return[et.name,dt]}))}get markViews(){const{editor:it}=this,{markExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addMarkView")).map(et=>{const ot=this.attributes.filter(ft=>ft.type===et.name),ct={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getMarkType(et.name,this.schema)},ut=getExtensionField(et,"addMarkView",ct);if(!ut)return[];const dt=(ft,St,kt)=>{const Tt=getRenderedAttributes(ft,ot);return ut()({mark:ft,view:St,inline:kt,editor:it,extension:et,HTMLAttributes:Tt,updateAttributes:Rt=>{updateMarkViewAttributes(ft,it,Rt)}})};return[et.name,dt]}))}setupExtensions(){const it=this.extensions;this.editor.extensionStorage=Object.fromEntries(it.map(g=>[g.name,g.storage])),it.forEach(g=>{var et;const ot={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)};g.type==="mark"&&((et=callOrReturn(getExtensionField(g,"keepOnSplit",ot)))==null||et)&&this.splittableMarks.push(g.name);const ct=getExtensionField(g,"onBeforeCreate",ot),ut=getExtensionField(g,"onCreate",ot),dt=getExtensionField(g,"onUpdate",ot),ft=getExtensionField(g,"onSelectionUpdate",ot),St=getExtensionField(g,"onTransaction",ot),kt=getExtensionField(g,"onFocus",ot),Tt=getExtensionField(g,"onBlur",ot),Rt=getExtensionField(g,"onDestroy",ot);ct&&this.editor.on("beforeCreate",ct),ut&&this.editor.on("create",ut),dt&&this.editor.on("update",dt),ft&&this.editor.on("selectionUpdate",ft),St&&this.editor.on("transaction",St),kt&&this.editor.on("focus",kt),Tt&&this.editor.on("blur",Tt),Rt&&this.editor.on("destroy",Rt)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export$1(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class uA extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(g={}){const et=typeof g=="function"?g():g;return new uA(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:it}=this,{state:g,schema:et}=it,{doc:ot,selection:ct}=g,{ranges:ut}=ct,dt=Math.min(...ut.map(Tt=>Tt.$from.pos)),ft=Math.max(...ut.map(Tt=>Tt.$to.pos)),St=getTextSerializersFromSchema(et);return getTextBetween(ot,{from:dt,to:ft},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:St})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:it,appendedTransactions:g}){var et,ot,ct;const ut=()=>{var dt,ft,St,kt;if((kt=(St=(ft=(dt=this.editor.options.coreExtensionOptions)==null?void 0:dt.delete)==null?void 0:ft.filterTransaction)==null?void 0:St.call(ft,it))!=null?kt:it.getMeta("y-sync$"))return;const Tt=combineTransactionSteps(it.before,[it,...g]);getChangedRanges(Tt).forEach($t=>{Tt.mapping.mapResult($t.oldRange.from).deletedAfter&&Tt.mapping.mapResult($t.oldRange.to).deletedBefore&&Tt.before.nodesBetween($t.oldRange.from,$t.oldRange.to,(Ft,Ht)=>{const Kt=Ht+Ft.nodeSize-2,Bt=$t.oldRange.from<=Ht&&Kt<=$t.oldRange.to;this.editor.emit("delete",{type:"node",node:Ft,from:Ht,to:Kt,newFrom:Tt.mapping.map(Ht),newTo:Tt.mapping.map(Kt),deletedRange:$t.oldRange,newRange:$t.newRange,partial:!Bt,editor:this.editor,transaction:it,combinedTransform:Tt})})});const jt=Tt.mapping;Tt.steps.forEach(($t,Ft)=>{var Ht,Kt;if($t instanceof RemoveMarkStep){const Bt=jt.slice(Ft).map($t.from,-1),Ut=jt.slice(Ft).map($t.to),Yt=jt.invert().map(Bt,-1),Jt=jt.invert().map(Ut),Zt=(Ht=Tt.doc.nodeAt(Bt-1))==null?void 0:Ht.marks.some(tn=>tn.eq($t.mark)),en=(Kt=Tt.doc.nodeAt(Ut))==null?void 0:Kt.marks.some(tn=>tn.eq($t.mark));this.editor.emit("delete",{type:"mark",mark:$t.mark,from:$t.from,to:$t.to,deletedRange:{from:Yt,to:Jt},newRange:{from:Bt,to:Ut},partial:!!(en||Zt),editor:this.editor,transaction:it,combinedTransform:Tt})}})};(ct=(ot=(et=this.editor.options.coreExtensionOptions)==null?void 0:et.delete)==null?void 0:ot.async)==null||ct?setTimeout(ut,0):ut()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(it,g,et,ot)=>{this.editor.emit("drop",{editor:this.editor,event:g,slice:et,moved:ot})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:it}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(g,et)=>{it.isFocused=!0;const ot=it.state.tr.setMeta("focus",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1},blur:(g,et)=>{it.isFocused=!1;const ot=it.state.tr.setMeta("blur",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const it=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.undoInputRule(),()=>dt.command(({tr:ft})=>{const{selection:St,doc:kt}=ft,{empty:Tt,$anchor:Rt}=St,{pos:jt,parent:$t}=Rt,Ft=Rt.parent.isTextblock&&jt>0?ft.doc.resolve(jt-1):Rt,Ht=Ft.parent.type.spec.isolating,Kt=Rt.pos-Rt.parentOffset,Bt=Ht&&Ft.parent.childCount===1?Kt===Rt.pos:Selection.atStart(kt).from===jt;return!Tt||!$t.type.isTextblock||$t.textContent.length||!Bt||Bt&&Rt.parent.type.name==="paragraph"?!1:dt.clearNodes()}),()=>dt.deleteSelection(),()=>dt.joinBackward(),()=>dt.selectNodeBackward()]),g=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.deleteSelection(),()=>dt.deleteCurrentNode(),()=>dt.joinForward(),()=>dt.selectNodeForward()]),ot={Enter:()=>this.editor.commands.first(({commands:dt})=>[()=>dt.newlineInCode(),()=>dt.createParagraphNear(),()=>dt.liftEmptyBlock(),()=>dt.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:it,"Mod-Backspace":it,"Shift-Backspace":it,Delete:g,"Mod-Delete":g,"Mod-a":()=>this.editor.commands.selectAll()},ct={...ot},ut={...ot,"Ctrl-h":it,"Alt-Backspace":it,"Ctrl-d":g,"Ctrl-Alt-Backspace":g,"Alt-Delete":g,"Alt-d":g,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?ut:ct},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(it,g,et)=>{if(it.some(Ht=>Ht.getMeta("composition")))return;const ot=it.some(Ht=>Ht.docChanged)&&!g.doc.eq(et.doc),ct=it.some(Ht=>Ht.getMeta("preventClearDocument"));if(!ot||ct)return;const{empty:ut,from:dt,to:ft}=g.selection,St=Selection.atStart(g.doc).from,kt=Selection.atEnd(g.doc).to;if(ut||!(dt===St&&ft===kt)||!isNodeEmpty(et.doc))return;const jt=et.tr,$t=createChainableState({state:et,transaction:jt}),{commands:Ft}=new CommandManager$1({editor:this.editor,state:$t});if(Ft.clearNodes(),!!jt.steps.length)return jt}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(it,g,et)=>{this.editor.emit("paste",{editor:this.editor,event:g,slice:et})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),NodePos=class wm{constructor(g,et,ot=!1,ct=null){this.currentNode=null,this.actualDepth=null,this.isBlock=ot,this.resolvedPos=g,this.editor=et,this.currentNode=ct}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var g;return(g=this.actualDepth)!=null?g:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(g){let et=this.from,ot=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}et=this.from+1,ot=this.to-1}this.editor.commands.insertContentAt({from:et,to:ot},g)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const g=this.resolvedPos.start(this.resolvedPos.depth-1),et=this.resolvedPos.doc.resolve(g);return new wm(et,this.editor)}get before(){let g=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.from-3)),new wm(g,this.editor)}get after(){let g=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.to+3)),new wm(g,this.editor)}get children(){const g=[];return this.node.content.forEach((et,ot)=>{const ct=et.isBlock&&!et.isTextblock,ut=et.isAtom&&!et.isText,dt=this.pos+ot+(ut?0:1);if(dt<0||dt>this.resolvedPos.doc.nodeSize-2)return;const ft=this.resolvedPos.doc.resolve(dt);if(!ct&&ft.depth<=this.depth)return;const St=new wm(ft,this.editor,ct,ct?et:null);ct&&(St.actualDepth=this.depth+1),g.push(new wm(ft,this.editor,ct,ct?et:null))}),g}get firstChild(){return this.children[0]||null}get lastChild(){const g=this.children;return g[g.length-1]||null}closest(g,et={}){let ot=null,ct=this.parent;for(;ct&&!ot;){if(ct.node.type.name===g)if(Object.keys(et).length>0){const ut=ct.node.attrs,dt=Object.keys(et);for(let ft=0;ft<dt.length;ft+=1){const St=dt[ft];if(ut[St]!==et[St])break}}else ot=ct;ct=ct.parent}return ot}querySelector(g,et={}){return this.querySelectorAll(g,et,!0)[0]||null}querySelectorAll(g,et={},ot=!1){let ct=[];if(!this.children||this.children.length===0)return ct;const ut=Object.keys(et);return this.children.forEach(dt=>{ot&&ct.length>0||(dt.node.type.name===g&&ut.every(St=>et[St]===dt.node.attrs[St])&&ct.push(dt),!(ot&&ct.length>0)&&(ct=ct.concat(dt.querySelectorAll(g,et,ot))))}),ct}setAttribute(g){const{tr:et}=this.editor.state;et.setNodeMarkup(this.from,void 0,{...this.node.attrs,...g}),this.editor.view.dispatch(et)}},style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(it,g,et){const ot=document.querySelector(`style[data-tiptap-style${et?`-${et}`:""}]`);if(ot!==null)return ot;const ct=document.createElement("style");return g&&ct.setAttribute("nonce",g),ct.setAttribute(`data-tiptap-style${et?`-${et}`:""}`,""),ct.innerHTML=it,document.getElementsByTagName("head")[0].appendChild(ct),ct}var Editor=class extends EventEmitter{constructor(it={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:ot})=>{throw ot},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(it),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:ot,slice:ct,moved:ut})=>this.options.onDrop(ot,ct,ut)),this.on("paste",({event:ot,slice:ct})=>this.options.onPaste(ot,ct)),this.on("delete",this.options.onDelete);const g=this.createDoc(),et=resolveFocusPosition(g,this.options.autofocus);this.editorState=EditorState.create({doc:g,schema:this.schema,selection:et||void 0}),this.options.element&&this.mount(this.options.element)}mount(it){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(it),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const it=this.editorView.dom;it!=null&&it.editor&&delete it.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(it){console.warn("Failed to remove CSS element:",it)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(it={}){this.options={...this.options,...it},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(it,g=!0){this.setOptions({editable:it}),g&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:it=>{this.editorState=it},dispatch:it=>{this.dispatchTransaction(it)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(it,g)=>{if(this.editorView)return this.editorView[g];if(g==="state")return this.editorState;if(g in it)return Reflect.get(it,g);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${g}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(it,g){const et=isFunction(g)?g(it,[...this.state.plugins]):[...this.state.plugins,it],ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}unregisterPlugin(it){if(this.isDestroyed)return;const g=this.state.plugins;let et=g;if([].concat(it).forEach(ct=>{const ut=typeof ct=="string"?`${ct}$`:ct.key;et=et.filter(dt=>!dt.key.startsWith(ut))}),g.length===et.length)return;const ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}createExtensionManager(){var it,g;const ot=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(g=(it=this.options.coreExtensionOptions)==null?void 0:it.clipboardTextSerializer)==null?void 0:g.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete].filter(ct=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[ct.name]!==!1:!0):[],...this.options.extensions].filter(ct=>["extension","node","mark"].includes(ct==null?void 0:ct.type));this.extensionManager=new ExtensionManager(ot,this)}createCommandManager(){this.commandManager=new CommandManager$1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let it;try{it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(g){if(!(g instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(g.message))throw g;this.emit("contentError",{editor:this,error:g,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(et=>et.name!=="collaboration"),this.createExtensionManager()}}),it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return it}createView(it){var g;this.editorView=new EditorView(it,{...this.options.editorProps,attributes:{role:"textbox",...(g=this.options.editorProps)==null?void 0:g.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const et=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(et),this.prependClass(),this.injectCSS();const ot=this.view.dom;ot.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(it){this.isCapturingTransaction=!0,it(),this.isCapturingTransaction=!1;const g=this.capturedTransaction;return this.capturedTransaction=null,g}dispatchTransaction(it){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=it;return}it.steps.forEach(kt=>{var Tt;return(Tt=this.capturedTransaction)==null?void 0:Tt.step(kt)});return}const{state:g,transactions:et}=this.state.applyTransaction(it),ot=!this.state.selection.eq(g.selection),ct=et.includes(it),ut=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:it,nextState:g}),!ct)return;this.view.updateState(g),this.emit("transaction",{editor:this,transaction:it,appendedTransactions:et.slice(1)}),ot&&this.emit("selectionUpdate",{editor:this,transaction:it});const dt=et.findLast(kt=>kt.getMeta("focus")||kt.getMeta("blur")),ft=dt==null?void 0:dt.getMeta("focus"),St=dt==null?void 0:dt.getMeta("blur");ft&&this.emit("focus",{editor:this,event:ft.event,transaction:dt}),St&&this.emit("blur",{editor:this,event:St.event,transaction:dt}),!(it.getMeta("preventUpdate")||!et.some(kt=>kt.docChanged)||ut.doc.eq(g.doc))&&this.emit("update",{editor:this,transaction:it,appendedTransactions:et.slice(1)})}getAttributes(it){return getAttributes$1(this.state,it)}isActive(it,g){const et=typeof it=="string"?it:null,ot=typeof it=="string"?g:it;return isActive(this.state,et,ot)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(it){const{blockSeparator:g=`

`,textSerializers:et={}}=it||{};return getText(this.state.doc,{blockSeparator:g,textSerializers:{...getTextSerializersFromSchema(this.schema),...et}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var it,g;return(g=(it=this.editorView)==null?void 0:it.isDestroyed)!=null?g:!0}$node(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelector(it,g))||null}$nodes(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelectorAll(it,g))||null}$pos(it){const g=this.state.doc.resolve(it);return new NodePos(g,this)}get $doc(){return this.$pos(0)}};function markInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=callOrReturn(it.getAttributes,void 0,ot);if(ct===!1||ct===null)return null;const{tr:ut}=g,dt=ot[ot.length-1],ft=ot[0];if(dt){const St=ft.search(/\S/),kt=et.from+ft.indexOf(dt),Tt=kt+dt.length;if(getMarksBetween(et.from,et.to,g.doc).filter($t=>$t.mark.type.excluded.find(Ht=>Ht===it.type&&Ht!==$t.mark.type)).filter($t=>$t.to>kt).length)return null;Tt<et.to&&ut.delete(Tt,et.to),kt>et.from&&ut.delete(et.from+St,kt);const jt=et.from+St+dt.length;ut.addMark(et.from+St,jt,it.type.create(ct||{})),ut.removeStoredMark(it.type)}},undoable:it.undoable})}function nodeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=callOrReturn(it.getAttributes,void 0,ot)||{},{tr:ut}=g,dt=et.from;let ft=et.to;const St=it.type.create(ct);if(ot[1]){const kt=ot[0].lastIndexOf(ot[1]);let Tt=dt+kt;Tt>ft?Tt=ft:ft=Tt+ot[1].length;const Rt=ot[0][ot[0].length-1];ut.insertText(Rt,dt+ot[0].length-1),ut.replaceWith(Tt,ft,St)}else if(ot[0]){const kt=it.type.isInline?dt:dt-1;ut.insert(kt,it.type.create(ct)).delete(ut.mapping.map(dt),ut.mapping.map(ft))}ut.scrollIntoView()},undoable:it.undoable})}function textblockTypeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ct=g.doc.resolve(et.from),ut=callOrReturn(it.getAttributes,void 0,ot)||{};if(!ct.node(-1).canReplaceWith(ct.index(-1),ct.indexAfter(-1),it.type))return null;g.tr.delete(et.from,et.to).setBlockType(et.from,et.from,it.type,ut)},undoable:it.undoable})}function wrappingInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot,chain:ct})=>{const ut=callOrReturn(it.getAttributes,void 0,ot)||{},dt=g.tr.delete(et.from,et.to),St=dt.doc.resolve(et.from).blockRange(),kt=St&&findWrapping(St,it.type,ut);if(!kt)return null;if(dt.wrap(St,kt),it.keepMarks&&it.editor){const{selection:Rt,storedMarks:jt}=g,{splittableMarks:$t}=it.editor.extensionManager,Ft=jt||Rt.$to.parentOffset&&Rt.$from.marks();if(Ft){const Ht=Ft.filter(Kt=>$t.includes(Kt.type.name));dt.ensureMarks(Ht)}}if(it.keepAttributes){const Rt=it.type.name==="bulletList"||it.type.name==="orderedList"?"listItem":"taskList";ct().updateAttributes(Rt,ut).run()}const Tt=dt.doc.resolve(et.from-1).nodeBefore;Tt&&Tt.type===it.type&&canJoin(dt.doc,et.from-1)&&(!it.joinPredicate||it.joinPredicate(ot,Tt))&&dt.join(et.from-1)},undoable:it.undoable})}function canInsertNode(it,g){const{selection:et}=it,{$from:ot}=et;if(et instanceof NodeSelection){const ut=ot.index();return ot.parent.canReplaceWith(ut,ut+1,g)}let ct=ot.depth;for(;ct>=0;){const ut=ot.index(ct);if(ot.node(ct).contentMatchAt(ut).matchType(g))return!0;ct-=1}return!1}var markdown_exports={};__export$1(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});function parseAttributes(it){if(!(it!=null&&it.trim()))return{};const g={},et=[],ot=it.replace(/["']([^"']*)["']/g,kt=>(et.push(kt),`__QUOTED_${et.length-1}__`)),ct=ot.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(ct){const kt=ct.map(Tt=>Tt.trim().slice(1));g.class=kt.join(" ")}const ut=ot.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);ut&&(g.id=ut[1]);const dt=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(ot.matchAll(dt)).forEach(([,kt,Tt])=>{var Rt;const jt=parseInt(((Rt=Tt.match(/__QUOTED_(\d+)__/))==null?void 0:Rt[1])||"0",10),$t=et[jt];$t&&(g[kt]=$t.slice(1,-1))});const St=ot.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return St&&St.split(/\s+/).filter(Boolean).forEach(Tt=>{Tt.match(/^[a-zA-Z][\w-]*$/)&&(g[Tt]=!0)}),g}function serializeAttributes(it){if(!it||Object.keys(it).length===0)return"";const g=[];return it.class&&String(it.class).split(/\s+/).filter(Boolean).forEach(ot=>g.push(`.${ot}`)),it.id&&g.push(`#${it.id}`),Object.entries(it).forEach(([et,ot])=>{et==="class"||et==="id"||(ot===!0?g.push(et):ot!==!1&&ot!=null&&g.push(`${et}="${String(ot)}"`))}),g.join(" ")}function createAtomBlockMarkdownSpec(it){const{nodeName:g,name:et,parseAttributes:ot=parseAttributes,serializeAttributes:ct=serializeAttributes,defaultAttributes:ut={},requiredAttributes:dt=[],allowedAttributes:ft}=it,St=et||g,kt=Tt=>{if(!ft)return Tt;const Rt={};return ft.forEach(jt=>{jt in Tt&&(Rt[jt]=Tt[jt])}),Rt};return{parseMarkdown:(Tt,Rt)=>{const jt={...ut,...Tt.attributes};return Rt.createNode(g,jt,[])},markdownTokenizer:{name:g,level:"block",start(Tt){var Rt;const jt=new RegExp(`^:::${St}(?:\\s|$)`,"m"),$t=(Rt=Tt.match(jt))==null?void 0:Rt.index;return $t!==void 0?$t:-1},tokenize(Tt,Rt,jt){const $t=new RegExp(`^:::${St}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),Ft=Tt.match($t);if(!Ft)return;const Ht=Ft[1]||"",Kt=ot(Ht);if(!dt.find(Ut=>!(Ut in Kt)))return{type:g,raw:Ft[0],attributes:Kt}}},renderMarkdown:Tt=>{const Rt=kt(Tt.attrs||{}),jt=ct(Rt),$t=jt?` {${jt}}`:"";return`:::${St}${$t} :::`}}}function createBlockMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ct=parseAttributes,serializeAttributes:ut=serializeAttributes,defaultAttributes:dt={},content:ft="block",allowedAttributes:St}=it,kt=et||g,Tt=Rt=>{if(!St)return Rt;const jt={};return St.forEach($t=>{$t in Rt&&(jt[$t]=Rt[$t])}),jt};return{parseMarkdown:(Rt,jt)=>{let $t;if(ot){const Ht=ot(Rt);$t=typeof Ht=="string"?[{type:"text",text:Ht}]:Ht}else ft==="block"?$t=jt.parseChildren(Rt.tokens||[]):$t=jt.parseInline(Rt.tokens||[]);const Ft={...dt,...Rt.attributes};return jt.createNode(g,Ft,$t)},markdownTokenizer:{name:g,level:"block",start(Rt){var jt;const $t=new RegExp(`^:::${kt}`,"m"),Ft=(jt=Rt.match($t))==null?void 0:jt.index;return Ft!==void 0?Ft:-1},tokenize(Rt,jt,$t){var Ft;const Ht=new RegExp(`^:::${kt}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),Kt=Rt.match(Ht);if(!Kt)return;const[Bt,Ut=""]=Kt,Yt=ct(Ut);let Jt=1;const Zt=Bt.length;let en="";const tn=/^:::([\w-]*)(\s.*)?/gm,nn=Rt.slice(Zt);for(tn.lastIndex=0;;){const ln=tn.exec(nn);if(ln===null)break;const an=ln.index,sn=ln[1];if(!((Ft=ln[2])!=null&&Ft.endsWith(":::"))){if(sn)Jt+=1;else if(Jt-=1,Jt===0){const dn=nn.slice(0,an);en=dn.trim();const mn=Rt.slice(0,Zt+an+ln[0].length);let yn=[];if(en)if(ft==="block")for(yn=$t.blockTokens(dn),yn.forEach(vn=>{vn.text&&(!vn.tokens||vn.tokens.length===0)&&(vn.tokens=$t.inlineTokens(vn.text))});yn.length>0;){const vn=yn[yn.length-1];if(vn.type==="paragraph"&&(!vn.text||vn.text.trim()===""))yn.pop();else break}else yn=$t.inlineTokens(en);return{type:g,raw:mn,attributes:Yt,content:en,tokens:yn}}}}}},renderMarkdown:(Rt,jt)=>{const $t=Tt(Rt.attrs||{}),Ft=ut($t),Ht=Ft?` {${Ft}}`:"",Kt=jt.renderChildren(Rt.content||[],`

`);return`:::${kt}${Ht}

${Kt}

:::`}}}function parseShortcodeAttributes(it){if(!it.trim())return{};const g={},et=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let ot=et.exec(it);for(;ot!==null;){const[,ct,ut,dt]=ot;g[ct]=ut||dt,ot=et.exec(it)}return g}function serializeShortcodeAttributes(it){return Object.entries(it).filter(([,g])=>g!=null).map(([g,et])=>`${g}="${et}"`).join(" ")}function createInlineMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ct=parseShortcodeAttributes,serializeAttributes:ut=serializeShortcodeAttributes,defaultAttributes:dt={},selfClosing:ft=!1,allowedAttributes:St}=it,kt=et||g,Tt=jt=>{if(!St)return jt;const $t={};return St.forEach(Ft=>{Ft in jt&&($t[Ft]=jt[Ft])}),$t},Rt=kt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(jt,$t)=>{const Ft={...dt,...jt.attributes};if(ft)return $t.createNode(g,Ft);const Ht=ot?ot(jt):jt.content||"";return Ht?$t.createNode(g,Ft,[$t.createTextNode(Ht)]):$t.createNode(g,Ft,[])},markdownTokenizer:{name:g,level:"inline",start(jt){const $t=ft?new RegExp(`\\[${Rt}\\s*[^\\]]*\\]`):new RegExp(`\\[${Rt}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${Rt}\\]`),Ft=jt.match($t),Ht=Ft==null?void 0:Ft.index;return Ht!==void 0?Ht:-1},tokenize(jt,$t,Ft){const Ht=ft?new RegExp(`^\\[${Rt}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${Rt}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${Rt}\\]`),Kt=jt.match(Ht);if(!Kt)return;let Bt="",Ut="";if(ft){const[,Jt]=Kt;Ut=Jt}else{const[,Jt,Zt]=Kt;Ut=Jt,Bt=Zt||""}const Yt=ct(Ut.trim());return{type:g,raw:Kt[0],content:Bt.trim(),attributes:Yt}}},renderMarkdown:jt=>{let $t="";ot?$t=ot(jt):jt.content&&jt.content.length>0&&($t=jt.content.filter(Bt=>Bt.type==="text").map(Bt=>Bt.text).join(""));const Ft=Tt(jt.attrs||{}),Ht=ut(Ft),Kt=Ht?` ${Ht}`:"";return ft?`[${kt}${Kt}]`:`[${kt}${Kt}]${$t}[/${kt}]`}}}function parseIndentedBlocks(it,g,et){var ot,ct,ut,dt;const ft=it.split(`
`),St=[];let kt="",Tt=0;const Rt=g.baseIndentSize||2;for(;Tt<ft.length;){const jt=ft[Tt],$t=jt.match(g.itemPattern);if(!$t){if(St.length>0)break;if(jt.trim()===""){Tt+=1;continue}else return}const Ft=g.extractItemData($t),{indentLevel:Ht,mainContent:Kt}=Ft;kt=`${kt}${jt}
`;const Bt=[Kt];for(Tt+=1;Tt<ft.length;){const Zt=ft[Tt];if(Zt.trim()===""){const tn=ft.slice(Tt+1).findIndex(an=>an.trim()!=="");if(tn===-1)break;if((((ct=(ot=ft[Tt+1+tn].match(/^(\s*)/))==null?void 0:ot[1])==null?void 0:ct.length)||0)>Ht){Bt.push(Zt),kt=`${kt}${Zt}
`,Tt+=1;continue}else break}if((((dt=(ut=Zt.match(/^(\s*)/))==null?void 0:ut[1])==null?void 0:dt.length)||0)>Ht)Bt.push(Zt),kt=`${kt}${Zt}
`,Tt+=1;else break}let Ut;const Yt=Bt.slice(1);if(Yt.length>0){const Zt=Yt.map(en=>en.slice(Ht+Rt)).join(`
`);Zt.trim()&&(g.customNestedParser?Ut=g.customNestedParser(Zt):Ut=et.blockTokens(Zt))}const Jt=g.createToken(Ft,Ut);St.push(Jt)}if(St.length!==0)return{items:St,raw:kt.trim()}}function renderNestedMarkdownContent(it,g,et,ot){if(!it||!Array.isArray(it.content))return"";const ct=typeof et=="function"?et(ot):et,[ut,...dt]=it.content,ft=g.renderChildren([ut]),St=[`${ct}${ft}`];return dt&&dt.length>0&&dt.forEach(kt=>{const Tt=g.renderChildren([kt]);if(Tt){const Rt=Tt.split(`
`).map(jt=>jt?g.indent(jt):"").join(`
`);St.push(Rt)}}),St.join(`
`)}function updateMarkViewAttributes(it,g,et={}){const{state:ot}=g,{doc:ct,tr:ut}=ot,dt=it;ct.descendants((ft,St)=>{const kt=ut.mapping.map(St),Tt=ut.mapping.map(St)+ft.nodeSize;let Rt=null;if(ft.marks.forEach($t=>{if($t!==dt)return!1;Rt=$t}),!Rt)return;let jt=!1;if(Object.keys(et).forEach($t=>{et[$t]!==Rt.attrs[$t]&&(jt=!0)}),jt){const $t=it.type.create({...it.attrs,...et});ut.removeMark(kt,Tt,it.type),ut.addMark(kt,Tt,$t)}}),ut.docChanged&&g.view.dispatch(ut)}var Node3=class hA extends Extendable{constructor(){super(...arguments),this.type="node"}static create(g={}){const et=typeof g=="function"?g():g;return new hA(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function markPasteRule(it){return new PasteRule({find:it.find,handler:({state:g,range:et,match:ot,pasteEvent:ct})=>{const ut=callOrReturn(it.getAttributes,void 0,ot,ct);if(ut===!1||ut===null)return null;const{tr:dt}=g,ft=ot[ot.length-1],St=ot[0];let kt=et.to;if(ft){const Tt=St.search(/\S/),Rt=et.from+St.indexOf(ft),jt=Rt+ft.length;if(getMarksBetween(et.from,et.to,g.doc).filter(Ft=>Ft.mark.type.excluded.find(Kt=>Kt===it.type&&Kt!==Ft.mark.type)).filter(Ft=>Ft.to>Rt).length)return null;jt<et.to&&dt.delete(jt,et.to),Rt>et.from&&dt.delete(et.from+Tt,Rt),kt=et.from+Tt+ft.length,dt.addMark(et.from+Tt,kt,it.type.create(ut||{})),dt.removeStoredMark(it.type)}}})}var react=function it(g,et){if(g===et)return!0;if(g&&et&&typeof g=="object"&&typeof et=="object"){if(g.constructor!==et.constructor)return!1;var ot,ct,ut;if(Array.isArray(g)){if(ot=g.length,ot!=et.length)return!1;for(ct=ot;ct--!==0;)if(!it(g[ct],et[ct]))return!1;return!0}if(g instanceof Map&&et instanceof Map){if(g.size!==et.size)return!1;for(ct of g.entries())if(!et.has(ct[0]))return!1;for(ct of g.entries())if(!it(ct[1],et.get(ct[0])))return!1;return!0}if(g instanceof Set&&et instanceof Set){if(g.size!==et.size)return!1;for(ct of g.entries())if(!et.has(ct[0]))return!1;return!0}if(ArrayBuffer.isView(g)&&ArrayBuffer.isView(et)){if(ot=g.length,ot!=et.length)return!1;for(ct=ot;ct--!==0;)if(g[ct]!==et[ct])return!1;return!0}if(g.constructor===RegExp)return g.source===et.source&&g.flags===et.flags;if(g.valueOf!==Object.prototype.valueOf)return g.valueOf()===et.valueOf();if(g.toString!==Object.prototype.toString)return g.toString()===et.toString();if(ut=Object.keys(g),ot=ut.length,ot!==Object.keys(et).length)return!1;for(ct=ot;ct--!==0;)if(!Object.prototype.hasOwnProperty.call(et,ut[ct]))return!1;for(ct=ot;ct--!==0;){var dt=ut[ct];if(!(dt==="_owner"&&g.$$typeof)&&!it(g[dt],et[dt]))return!1}return!0}return g!==g&&et!==et};const deepEqual=getDefaultExportFromCjs(react);var withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs=typeof Object.is=="function"?Object.is:is,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(it,g,et,ot,ct){var ut=useRef(null);if(ut.current===null){var dt={hasValue:!1,value:null};ut.current=dt}else dt=ut.current;ut=useMemo(function(){function St($t){if(!kt){if(kt=!0,Tt=$t,$t=ot($t),ct!==void 0&&dt.hasValue){var Ft=dt.value;if(ct(Ft,$t))return Rt=Ft}return Rt=$t}if(Ft=Rt,objectIs(Tt,$t))return Ft;var Ht=ot($t);return ct!==void 0&&ct(Ft,Ht)?(Tt=$t,Ft):(Tt=$t,Rt=Ht)}var kt=!1,Tt,Rt,jt=et===void 0?null:et;return[function(){return St(g())},jt===null?void 0:function(){return St(jt())}]},[g,et,ot,ct]);var ft=useSyncExternalStore(it,ut[0],ut[1]);return useEffect(function(){dt.hasValue=!0,dt.value=ft},[ft]),useDebugValue(ft),ft};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,mergeRefs$1=(...it)=>g=>{it.forEach(et=>{typeof et=="function"?et(g):et&&(et.current=g)})},Portals=({contentComponent:it})=>{const g=shimExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(g)})};function getInstance(){const it=new Set;let g={};return{subscribe(et){return it.add(et),()=>{it.delete(et)}},getSnapshot(){return g},getServerSnapshot(){return g},setRenderer(et,ot){g={...g,[et]:ReactDOM.createPortal(ot.reactElement,ot.element,et)},it.forEach(ct=>ct())},removeRenderer(et){const ot={...g};delete ot[et],g=ot,it.forEach(ct=>ct())}}}var PureEditorContent=class extends React4.Component{constructor(it){var g;super(it),this.editorContentRef=React4.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((g=it.editor)!=null&&g.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const it=this.props.editor;if(it&&!it.isDestroyed&&it.options.element){if(it.contentComponent)return;const g=this.editorContentRef.current;g.append(it.view.dom),it.setOptions({element:g}),it.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=it.contentComponent.subscribe(()=>{this.setState(et=>et.hasContentComponentInitialized?et:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),it.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var it;const g=this.props.editor;if(g){this.initialized=!1,g.isDestroyed||g.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),g.contentComponent=null;try{if(!((it=g.view.dom)!=null&&it.firstChild))return;const et=document.createElement("div");et.append(g.view.dom),g.setOptions({element:et})}catch{}}}render(){const{editor:it,innerRef:g,...et}=this.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:mergeRefs$1(g,this.editorContentRef),...et}),(it==null?void 0:it.contentComponent)&&jsxRuntimeExports.jsx(Portals,{contentComponent:it.contentComponent})]})}},EditorContentWithKey=reactExports.forwardRef((it,g)=>{const et=React4.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[it.editor]);return React4.createElement(PureEditorContent,{key:et,innerRef:g,...it})}),EditorContent=React4.memo(EditorContentWithKey),useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,EditorStateManager=class{constructor(it){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=it,this.lastSnapshot={editor:it,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(it){return this.subscribers.add(it),()=>{this.subscribers.delete(it)}}watch(it){if(this.editor=it,this.editor){const g=()=>{this.transactionNumber+=1,this.subscribers.forEach(ot=>ot())},et=this.editor;return et.on("transaction",g),()=>{et.off("transaction",g)}}}};function useEditorState(it){var g;const[et]=reactExports.useState(()=>new EditorStateManager(it.editor)),ot=withSelectorExports.useSyncExternalStoreWithSelector(et.subscribe,et.getSnapshot,et.getServerSnapshot,it.selector,(g=it.equalityFn)!=null?g:deepEqual);return useIsomorphicLayoutEffect(()=>et.watch(it.editor),[it.editor,et]),reactExports.useDebugValue(ot),ot}var isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next),EditorInstanceManager=class dA{constructor(g){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=g,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(g){this.editor=g,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(et=>et())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const g={...this.options.current,onBeforeCreate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onBeforeCreate)==null?void 0:ut.call(ct,...ot)},onBlur:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onBlur)==null?void 0:ut.call(ct,...ot)},onCreate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onCreate)==null?void 0:ut.call(ct,...ot)},onDestroy:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDestroy)==null?void 0:ut.call(ct,...ot)},onFocus:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onFocus)==null?void 0:ut.call(ct,...ot)},onSelectionUpdate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onSelectionUpdate)==null?void 0:ut.call(ct,...ot)},onTransaction:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onTransaction)==null?void 0:ut.call(ct,...ot)},onUpdate:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onUpdate)==null?void 0:ut.call(ct,...ot)},onContentError:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onContentError)==null?void 0:ut.call(ct,...ot)},onDrop:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDrop)==null?void 0:ut.call(ct,...ot)},onPaste:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onPaste)==null?void 0:ut.call(ct,...ot)},onDelete:(...ot)=>{var ct,ut;return(ut=(ct=this.options.current).onDelete)==null?void 0:ut.call(ct,...ot)}};return new Editor(g)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(g){return this.subscriptions.add(g),()=>{this.subscriptions.delete(g)}}static compareOptions(g,et){return Object.keys(g).every(ot=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(ot)?!0:ot==="extensions"&&g.extensions&&et.extensions?g.extensions.length!==et.extensions.length?!1:g.extensions.every((ct,ut)=>{var dt;return ct===((dt=et.extensions)==null?void 0:dt[ut])}):g[ot]===et[ot])}onRender(g){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&g.length===0?dA.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(g),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(g){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=g;return}if(this.previousDeps.length===g.length&&this.previousDeps.every((ot,ct)=>ot===g[ct]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=g}scheduleDestroy(){const g=this.instanceId,et=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===g){et&&et.setOptions(this.options.current);return}et&&!et.isDestroyed&&(et.destroy(),this.instanceId===g&&this.setEditor(null))},1)}};function useEditor(it={},g=[]){const et=reactExports.useRef(it);et.current=it;const[ot]=reactExports.useState(()=>new EditorInstanceManager(et)),ct=shimExports.useSyncExternalStore(ot.subscribe,ot.getEditor,ot.getServerSnapshot);return reactExports.useDebugValue(ct),reactExports.useEffect(ot.onRender(g)),useEditorState({editor:ct,selector:({transactionNumber:ut})=>it.shouldRerenderOnTransaction===!1||it.shouldRerenderOnTransaction===void 0?null:it.immediatelyRender&&ut===0?0:ut+1}),ct}var EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;var ReactNodeViewContext=reactExports.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React4.forwardRef((it,g)=>{const{onDragStart:et}=useReactNodeView(),ot=it.as||"div";return jsxRuntimeExports.jsx(ot,{...it,ref:g,"data-node-view-wrapper":"",onDragStart:et,style:{whiteSpace:"normal",...it.style}})});React4.createContext({markViewContentRef:()=>{}});var h=(it,g)=>{if(it==="slot")return 0;if(it instanceof Function)return it(g);const{children:et,...ot}=g??{};if(it==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[it,ot,et]},inputRegex$5=/^\s*>\s$/,Blockquote=Node3.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:it}){return h("blockquote",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:it})=>it.wrapIn(this.name),toggleBlockquote:()=>({commands:it})=>it.toggleWrap(this.name),unsetBlockquote:()=>({commands:it})=>it.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),index_default$a=Blockquote,starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:it=>it.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:it=>it.type.name===this.name},{style:"font-weight",getAttrs:it=>/^(bold(er)?|[5-9]\d{2,})$/.test(it)&&null}]},renderHTML({HTMLAttributes:it}){return h("strong",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBold:()=>({commands:it})=>it.setMark(this.name),toggleBold:()=>({commands:it})=>it.toggleMark(this.name),unsetBold:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),inputRegex$4=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$2=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:it}){return["code",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setCode:()=>({commands:it})=>it.setMark(this.name),toggleCode:()=>({commands:it})=>it.toggleMark(this.name),unsetCode:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$4,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),DEFAULT_TAB_SIZE=4,backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node3.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:DEFAULT_TAB_SIZE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:it=>{var g;const{languageClassPrefix:et}=this.options;if(!et)return null;const ut=[...((g=it.firstElementChild)==null?void 0:g.classList)||[]].filter(dt=>dt.startsWith(et)).map(dt=>dt.replace(et,""))[0];return ut||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:it,HTMLAttributes:g}){return["pre",mergeAttributes(this.options.HTMLAttributes,g),["code",{class:it.attrs.language?this.options.languageClassPrefix+it.attrs.language:null},0]]},addCommands(){return{setCodeBlock:it=>({commands:g})=>g.setNode(this.name,it),toggleCodeBlock:it=>({commands:g})=>g.toggleNode(this.name,"paragraph",it)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:it,$anchor:g}=this.editor.state.selection,et=g.pos===1;return!it||g.parent.type.name!==this.name?!1:et||!g.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ct}=ot,{$from:ut,empty:dt}=ct;if(ut.parent.type!==this.type)return!1;const ft=" ".repeat(et);return dt?it.commands.insertContent(ft):it.commands.command(({tr:St})=>{const{from:kt,to:Tt}=ct,$t=ot.doc.textBetween(kt,Tt,`
`,`
`).split(`
`).map(Ft=>ft+Ft).join(`
`);return St.replaceWith(kt,Tt,ot.schema.text($t)),!0})},"Shift-Tab":({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ct}=ot,{$from:ut,empty:dt}=ct;return ut.parent.type!==this.type?!1:dt?it.commands.command(({tr:ft})=>{var St;const{pos:kt}=ut,Tt=ut.start(),Rt=ut.end(),$t=ot.doc.textBetween(Tt,Rt,`
`,`
`).split(`
`);let Ft=0,Ht=0;const Kt=kt-Tt;for(let en=0;en<$t.length;en+=1){if(Ht+$t[en].length>=Kt){Ft=en;break}Ht+=$t[en].length+1}const Ut=((St=$t[Ft].match(/^ */))==null?void 0:St[0])||"",Yt=Math.min(Ut.length,et);if(Yt===0)return!0;let Jt=Tt;for(let en=0;en<Ft;en+=1)Jt+=$t[en].length+1;return ft.delete(Jt,Jt+Yt),kt-Jt<=Yt&&ft.setSelection(TextSelection.create(ft.doc,Jt)),!0}):it.commands.command(({tr:ft})=>{const{from:St,to:kt}=ct,jt=ot.doc.textBetween(St,kt,`
`,`
`).split(`
`).map($t=>{var Ft;const Ht=((Ft=$t.match(/^ */))==null?void 0:Ft[0])||"",Kt=Math.min(Ht.length,et);return $t.slice(Kt)}).join(`
`);return ft.replaceWith(St,kt,ot.schema.text(jt)),!0})},Enter:({editor:it})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:g}=it,{selection:et}=g,{$from:ot,empty:ct}=et;if(!ct||ot.parent.type!==this.type)return!1;const ut=ot.parentOffset===ot.parent.nodeSize-2,dt=ot.parent.textContent.endsWith(`

`);return!ut||!dt?!1:it.chain().command(({tr:ft})=>(ft.delete(ot.pos-2,ot.pos),!0)).exitCode().run()},ArrowDown:({editor:it})=>{if(!this.options.exitOnArrowDown)return!1;const{state:g}=it,{selection:et,doc:ot}=g,{$from:ct,empty:ut}=et;if(!ut||ct.parent.type!==this.type||!(ct.parentOffset===ct.parent.nodeSize-2))return!1;const ft=ct.after();return ft===void 0?!1:ot.nodeAt(ft)?it.commands.command(({tr:kt})=>(kt.setSelection(Selection.near(ot.resolve(ft))),!0)):it.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:it=>({language:it[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:it=>({language:it[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(it,g)=>{if(!g.clipboardData||this.editor.isActive(this.type.name))return!1;const et=g.clipboardData.getData("text/plain"),ot=g.clipboardData.getData("vscode-editor-data"),ct=ot?JSON.parse(ot):void 0,ut=ct==null?void 0:ct.mode;if(!et||!ut)return!1;const{tr:dt,schema:ft}=it.state,St=ft.text(et.replace(/\r\n?/g,`
`));return dt.replaceSelectionWith(this.type.create({language:ut},St)),dt.selection.$from.parent.type!==this.type&&dt.setSelection(TextSelection.near(dt.doc.resolve(Math.max(0,dt.selection.from-2)))),dt.setMeta("paste",!0),it.dispatch(dt),!0}}})]}}),Document$2=Node3.create({name:"doc",topNode:!0,content:"block+"}),HardBreak=Node3.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:it}){return["br",mergeAttributes(this.options.HTMLAttributes,it)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:it,chain:g,state:et,editor:ot})=>it.first([()=>it.exitCode(),()=>it.command(()=>{const{selection:ct,storedMarks:ut}=et;if(ct.$from.parent.type.spec.isolating)return!1;const{keepMarks:dt}=this.options,{splittableMarks:ft}=ot.extensionManager,St=ut||ct.$to.parentOffset&&ct.$from.marks();return g().insertContent({type:this.name}).command(({tr:kt,dispatch:Tt})=>{if(Tt&&St&&dt){const Rt=St.filter(jt=>ft.includes(jt.type.name));kt.ensureMarks(Rt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node3.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(it=>({tag:`h${it}`,attrs:{level:it}}))},renderHTML({node:it,HTMLAttributes:g}){return[`h${this.options.levels.includes(it.attrs.level)?it.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,g),0]},addCommands(){return{setHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.setNode(this.name,it):!1,toggleHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.toggleNode(this.name,"paragraph",it):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((it,g)=>({...it,[`Mod-Alt-${g}`]:()=>this.editor.commands.toggleHeading({level:g})}),{})},addInputRules(){return this.options.levels.map(it=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${it}})\\s$`),type:this.type,getAttributes:{level:it}}))}}),HorizontalRule=Node3.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:it}){return["hr",mergeAttributes(this.options.HTMLAttributes,it)]},addCommands(){return{setHorizontalRule:()=>({chain:it,state:g})=>{if(!canInsertNode(g,g.schema.nodes[this.name]))return!1;const{selection:et}=g,{$to:ot}=et,ct=it();return isNodeSelection(et)?ct.insertContentAt(ot.pos,{type:this.name}):ct.insertContent({type:this.name}),ct.command(({state:ut,tr:dt,dispatch:ft})=>{if(ft){const{$to:St}=dt.selection,kt=St.end();if(St.nodeAfter)St.nodeAfter.isTextblock?dt.setSelection(TextSelection.create(dt.doc,St.pos+1)):St.nodeAfter.isBlock?dt.setSelection(NodeSelection.create(dt.doc,St.pos)):dt.setSelection(TextSelection.create(dt.doc,St.pos));else{const Tt=ut.schema.nodes[this.options.nextNodeType]||St.parent.type.contentMatch.defaultType,Rt=Tt==null?void 0:Tt.create();Rt&&(dt.insert(kt,Rt),dt.setSelection(TextSelection.create(dt.doc,kt+1)))}dt.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:it=>it.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:it=>it.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:it}){return["em",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setItalic:()=>({commands:it})=>it.setMark(this.name),toggleItalic:()=>({commands:it})=>it.toggleMark(this.name),unsetItalic:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(it,g){return it in g||(g[it]=[]),g[it]}function addToGroups(it,g,et){g[numeric]&&(g[asciinumeric]=!0,g[alphanumeric]=!0),g[ascii]&&(g[asciinumeric]=!0,g[alpha]=!0),g[asciinumeric]&&(g[alphanumeric]=!0),g[alpha]&&(g[alphanumeric]=!0),g[alphanumeric]&&(g[domain]=!0),g[emoji]&&(g[domain]=!0);for(const ot in g){const ct=registerGroup(ot,et);ct.indexOf(it)<0&&ct.push(it)}}function flagsForToken(it,g){const et={};for(const ot in g)g[ot].indexOf(it)>=0&&(et[ot]=!0);return et}function State(it=null){this.j={},this.jr=[],this.jd=null,this.t=it}State.groups={};State.prototype={accepts(){return!!this.t},go(it){const g=this,et=g.j[it];if(et)return et;for(let ot=0;ot<g.jr.length;ot++){const ct=g.jr[ot][0],ut=g.jr[ot][1];if(ut&&ct.test(it))return ut}return g.jd},has(it,g=!1){return g?it in this.j:!!this.go(it)},ta(it,g,et,ot){for(let ct=0;ct<it.length;ct++)this.tt(it[ct],g,et,ot)},tr(it,g,et,ot){ot=ot||State.groups;let ct;return g&&g.j?ct=g:(ct=new State(g),et&&ot&&addToGroups(g,et,ot)),this.jr.push([it,ct]),ct},ts(it,g,et,ot){let ct=this;const ut=it.length;if(!ut)return ct;for(let dt=0;dt<ut-1;dt++)ct=ct.tt(it[dt]);return ct.tt(it[ut-1],g,et,ot)},tt(it,g,et,ot){ot=ot||State.groups;const ct=this;if(g&&g.j)return ct.j[it]=g,g;const ut=g;let dt,ft=ct.go(it);if(ft?(dt=new State,Object.assign(dt.j,ft.j),dt.jr.push.apply(dt.jr,ft.jr),dt.jd=ft.jd,dt.t=ft.t):dt=new State,ut){if(ot)if(dt.t&&typeof dt.t=="string"){const St=Object.assign(flagsForToken(dt.t,ot),et);addToGroups(ut,St,ot)}else et&&addToGroups(ut,et,ot);dt.t=ut}return ct.j[it]=dt,dt}};const ta=(it,g,et,ot,ct)=>it.ta(g,et,ot,ct),tr=(it,g,et,ot,ct)=>it.tr(g,et,ot,ct),ts=(it,g,et,ot,ct)=>it.ts(g,et,ot,ct),tt=(it,g,et,ot,ct)=>it.tt(g,et,ot,ct),WORD="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD,WS});const ASCII_LETTER=/[a-z]/,LETTER=/\p{L}/u,EMOJI=/\p{Emoji}/u,DIGIT=/\d/,SPACE=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="",EMOJI_JOINER="",OBJECT_REPLACEMENT="";let tlds=null,utlds=null;function init$2(it=[]){const g={};State.groups=g;const et=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(et,"'",APOSTROPHE),tt(et,"{",OPENBRACE),tt(et,"}",CLOSEBRACE),tt(et,"[",OPENBRACKET),tt(et,"]",CLOSEBRACKET),tt(et,"(",OPENPAREN),tt(et,")",CLOSEPAREN),tt(et,"<",OPENANGLEBRACKET),tt(et,">",CLOSEANGLEBRACKET),tt(et,"",FULLWIDTHLEFTPAREN),tt(et,"",FULLWIDTHRIGHTPAREN),tt(et,"",LEFTCORNERBRACKET),tt(et,"",RIGHTCORNERBRACKET),tt(et,"",LEFTWHITECORNERBRACKET),tt(et,"",RIGHTWHITECORNERBRACKET),tt(et,"",FULLWIDTHLESSTHAN),tt(et,"",FULLWIDTHGREATERTHAN),tt(et,"&",AMPERSAND),tt(et,"*",ASTERISK),tt(et,"@",AT),tt(et,"`",BACKTICK),tt(et,"^",CARET),tt(et,":",COLON),tt(et,",",COMMA),tt(et,"$",DOLLAR),tt(et,".",DOT),tt(et,"=",EQUALS),tt(et,"!",EXCLAMATION),tt(et,"-",HYPHEN),tt(et,"%",PERCENT),tt(et,"|",PIPE),tt(et,"+",PLUS),tt(et,"#",POUND),tt(et,"?",QUERY),tt(et,'"',QUOTE),tt(et,"/",SLASH),tt(et,";",SEMI),tt(et,"~",TILDE),tt(et,"_",UNDERSCORE),tt(et,"\\",BACKSLASH),tt(et,"",FULLWIDTHMIDDLEDOT);const ot=tr(et,DIGIT,NUM,{[numeric]:!0});tr(ot,DIGIT,ot);const ct=tr(ot,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),ut=tr(ot,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),dt=tr(et,ASCII_LETTER,WORD,{[ascii]:!0});tr(dt,DIGIT,ct),tr(dt,ASCII_LETTER,dt),tr(ct,DIGIT,ct),tr(ct,ASCII_LETTER,ct);const ft=tr(et,LETTER,UWORD,{[alpha]:!0});tr(ft,ASCII_LETTER),tr(ft,DIGIT,ut),tr(ft,LETTER,ft),tr(ut,DIGIT,ut),tr(ut,ASCII_LETTER),tr(ut,LETTER,ut);const St=tt(et,LF,NL,{[whitespace]:!0}),kt=tt(et,CR,WS,{[whitespace]:!0}),Tt=tr(et,SPACE,WS,{[whitespace]:!0});tt(et,OBJECT_REPLACEMENT,Tt),tt(kt,LF,St),tt(kt,OBJECT_REPLACEMENT,Tt),tr(kt,SPACE,Tt),tt(Tt,CR),tt(Tt,LF),tr(Tt,SPACE,Tt),tt(Tt,OBJECT_REPLACEMENT,Tt);const Rt=tr(et,EMOJI,EMOJI$1,{[emoji]:!0});tt(Rt,"#"),tr(Rt,EMOJI,Rt),tt(Rt,EMOJI_VARIATION,Rt);const jt=tt(Rt,EMOJI_JOINER);tt(jt,"#"),tr(jt,EMOJI,Rt);const $t=[[ASCII_LETTER,dt],[DIGIT,ct]],Ft=[[ASCII_LETTER,null],[LETTER,ft],[DIGIT,ut]];for(let Ht=0;Ht<tlds.length;Ht++)fastts(et,tlds[Ht],TLD,WORD,$t);for(let Ht=0;Ht<utlds.length;Ht++)fastts(et,utlds[Ht],UTLD,UWORD,Ft);addToGroups(TLD,{tld:!0,ascii:!0},g),addToGroups(UTLD,{utld:!0,alpha:!0},g),fastts(et,"file",SCHEME,WORD,$t),fastts(et,"mailto",SCHEME,WORD,$t),fastts(et,"http",SLASH_SCHEME,WORD,$t),fastts(et,"https",SLASH_SCHEME,WORD,$t),fastts(et,"ftp",SLASH_SCHEME,WORD,$t),fastts(et,"ftps",SLASH_SCHEME,WORD,$t),addToGroups(SCHEME,{scheme:!0,ascii:!0},g),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},g),it=it.sort((Ht,Kt)=>Ht[0]>Kt[0]?1:-1);for(let Ht=0;Ht<it.length;Ht++){const Kt=it[Ht][0],Ut=it[Ht][1]?{[scheme]:!0}:{[slashscheme]:!0};Kt.indexOf("-")>=0?Ut[domain]=!0:ASCII_LETTER.test(Kt)?DIGIT.test(Kt)?Ut[asciinumeric]=!0:Ut[ascii]=!0:Ut[numeric]=!0,ts(et,Kt,Kt,Ut)}return ts(et,"localhost",LOCALHOST,{ascii:!0}),et.jd=new State(SYM),{start:et,tokens:Object.assign({groups:g},tk)}}function run$1(it,g){const et=stringToArray(g.replace(/[A-Z]/g,ft=>ft.toLowerCase())),ot=et.length,ct=[];let ut=0,dt=0;for(;dt<ot;){let ft=it,St=null,kt=0,Tt=null,Rt=-1,jt=-1;for(;dt<ot&&(St=ft.go(et[dt]));)ft=St,ft.accepts()?(Rt=0,jt=0,Tt=ft):Rt>=0&&(Rt+=et[dt].length,jt++),kt+=et[dt].length,ut+=et[dt].length,dt++;ut-=Rt,dt-=jt,kt-=Rt,ct.push({t:Tt.t,v:g.slice(ut-kt,ut),s:ut-kt,e:ut})}return ct}function stringToArray(it){const g=[],et=it.length;let ot=0;for(;ot<et;){let ct=it.charCodeAt(ot),ut,dt=ct<55296||ct>56319||ot+1===et||(ut=it.charCodeAt(ot+1))<56320||ut>57343?it[ot]:it.slice(ot,ot+2);g.push(dt),ot+=dt.length}return g}function fastts(it,g,et,ot,ct){let ut;const dt=g.length;for(let ft=0;ft<dt-1;ft++){const St=g[ft];it.j[St]?ut=it.j[St]:(ut=new State(ot),ut.jr=ct.slice(),it.j[St]=ut),it=ut}return ut=new State(et),ut.jr=ct.slice(),it.j[g[dt-1]]=ut,ut}function decodeTlds(it){const g=[],et=[];let ot=0,ct="0123456789";for(;ot<it.length;){let ut=0;for(;ct.indexOf(it[ot+ut])>=0;)ut++;if(ut>0){g.push(et.join(""));for(let dt=parseInt(it.substring(ot,ot+ut),10);dt>0;dt--)et.pop();ot+=ut}else et.push(it[ot]),ot++}return g}const defaults={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(it,g=null){let et=Object.assign({},defaults);it&&(et=Object.assign(et,it instanceof Options?it.o:it));const ot=et.ignoreTags,ct=[];for(let ut=0;ut<ot.length;ut++)ct.push(ot[ut].toUpperCase());this.o=et,g&&(this.defaultRender=g),this.ignoreTags=ct}Options.prototype={o:defaults,ignoreTags:[],defaultRender(it){return it},check(it){return this.get("validate",it.toString(),it)},get(it,g,et){const ot=g!=null;let ct=this.o[it];return ct&&(typeof ct=="object"?(ct=et.t in ct?ct[et.t]:defaults[it],typeof ct=="function"&&ot&&(ct=ct(g,et))):typeof ct=="function"&&ot&&(ct=ct(g,et.t,et)),ct)},getObj(it,g,et){let ot=this.o[it];return typeof ot=="function"&&g!=null&&(ot=ot(g,et.t,et)),ot},render(it){const g=it.render(this);return(this.get("render",null,it)||this.defaultRender)(g,it.t,it)}};function noop(it){return it}function MultiToken(it,g){this.t="token",this.v=it,this.tk=g}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(it){return this.toString()},toFormattedString(it){const g=this.toString(),et=it.get("truncate",g,this),ot=it.get("format",g,this);return et&&ot.length>et?ot.substring(0,et)+"":ot},toFormattedHref(it){return it.get("formatHref",this.toHref(it.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(it=defaults.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(it),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(it){return{type:this.t,value:this.toFormattedString(it),isLink:this.isLink,href:this.toFormattedHref(it),start:this.startIndex(),end:this.endIndex()}},validate(it){return it.get("validate",this.toString(),this)},render(it){const g=this,et=this.toHref(it.get("defaultProtocol")),ot=it.get("formatHref",et,this),ct=it.get("tagName",et,g),ut=this.toFormattedString(it),dt={},ft=it.get("className",et,g),St=it.get("target",et,g),kt=it.get("rel",et,g),Tt=it.getObj("attributes",et,g),Rt=it.getObj("events",et,g);return dt.href=ot,ft&&(dt.class=ft),St&&(dt.target=St),kt&&(dt.rel=kt),Tt&&Object.assign(dt,Tt),{tagName:ct,attributes:dt,content:ut,eventListeners:Rt}}};function createTokenClass(it,g){class et extends MultiToken{constructor(ct,ut){super(ct,ut),this.t=it}}for(const ot in g)et.prototype[ot]=g[ot];return et.t=it,et}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$2=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(it=defaults.defaultProtocol){return this.hasProtocol()?this.v:`${it}://${this.v}`},hasProtocol(){const it=this.tk;return it.length>=2&&it[0].t!==LOCALHOST&&it[1].t===COLON}}),makeState=it=>new State(it);function init$1({groups:it}){const g=it.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),et=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],ot=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],ct=makeState(),ut=tt(ct,TILDE);ta(ut,ot,ut),ta(ut,it.domain,ut);const dt=makeState(),ft=makeState(),St=makeState();ta(ct,it.domain,dt),ta(ct,it.scheme,ft),ta(ct,it.slashscheme,St),ta(dt,ot,ut),ta(dt,it.domain,dt);const kt=tt(dt,AT);tt(ut,AT,kt),tt(ft,AT,kt),tt(St,AT,kt);const Tt=tt(ut,DOT);ta(Tt,ot,ut),ta(Tt,it.domain,ut);const Rt=makeState();ta(kt,it.domain,Rt),ta(Rt,it.domain,Rt);const jt=tt(Rt,DOT);ta(jt,it.domain,Rt);const $t=makeState(Email);ta(jt,it.tld,$t),ta(jt,it.utld,$t),tt(kt,LOCALHOST,$t);const Ft=tt(Rt,HYPHEN);tt(Ft,HYPHEN,Ft),ta(Ft,it.domain,Rt),ta($t,it.domain,Rt),tt($t,DOT,jt),tt($t,HYPHEN,Ft);const Ht=tt($t,COLON);ta(Ht,it.numeric,Email);const Kt=tt(dt,HYPHEN),Bt=tt(dt,DOT);tt(Kt,HYPHEN,Kt),ta(Kt,it.domain,dt),ta(Bt,ot,ut),ta(Bt,it.domain,dt);const Ut=makeState(Url);ta(Bt,it.tld,Ut),ta(Bt,it.utld,Ut),ta(Ut,it.domain,dt),ta(Ut,ot,ut),tt(Ut,DOT,Bt),tt(Ut,HYPHEN,Kt),tt(Ut,AT,kt);const Yt=tt(Ut,COLON),Jt=makeState(Url);ta(Yt,it.numeric,Jt);const Zt=makeState(Url),en=makeState();ta(Zt,g,Zt),ta(Zt,et,en),ta(en,g,Zt),ta(en,et,en),tt(Ut,SLASH,Zt),tt(Jt,SLASH,Zt);const tn=tt(ft,COLON),nn=tt(St,COLON),ln=tt(nn,SLASH),an=tt(ln,SLASH);ta(ft,it.domain,dt),tt(ft,DOT,Bt),tt(ft,HYPHEN,Kt),ta(St,it.domain,dt),tt(St,DOT,Bt),tt(St,HYPHEN,Kt),ta(tn,it.domain,Zt),tt(tn,SLASH,Zt),tt(tn,QUERY,Zt),ta(an,it.domain,Zt),ta(an,g,Zt),tt(an,SLASH,Zt);const sn=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let dn=0;dn<sn.length;dn++){const[mn,yn]=sn[dn],vn=tt(Zt,mn);tt(en,mn,vn),tt(vn,yn,Zt);const hn=makeState(Url);ta(vn,g,hn);const pn=makeState();ta(vn,et),ta(hn,g,hn),ta(hn,et,pn),ta(pn,g,hn),ta(pn,et,pn),tt(hn,yn,Zt),tt(pn,yn,Zt)}return tt(ct,LOCALHOST,Ut),tt(ct,NL,Nl),{start:ct,tokens:tk}}function run(it,g,et){let ot=et.length,ct=0,ut=[],dt=[];for(;ct<ot;){let ft=it,St=null,kt=null,Tt=0,Rt=null,jt=-1;for(;ct<ot&&!(St=ft.go(et[ct].t));)dt.push(et[ct++]);for(;ct<ot&&(kt=St||ft.go(et[ct].t));)St=null,ft=kt,ft.accepts()?(jt=0,Rt=ft):jt>=0&&jt++,ct++,Tt++;if(jt<0)ct-=Tt,ct<ot&&(dt.push(et[ct]),ct++);else{dt.length>0&&(ut.push(initMultiToken(Text$2,g,dt)),dt=[]),ct-=jt,Tt-=jt;const $t=Rt.t,Ft=et.slice(ct-Tt,ct);ut.push(initMultiToken($t,g,Ft))}}return dt.length>0&&ut.push(initMultiToken(Text$2,g,dt)),ut}function initMultiToken(it,g,et){const ot=et[0].s,ct=et[et.length-1].e,ut=g.slice(ot,ct);return new it(ut,et)}const warn$1=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(it,g=!1){if(INIT.initialized&&warn$1(`linkifyjs: already initialized - will not register custom scheme "${it}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(it))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([it,g])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let it=0;it<INIT.tokenQueue.length;it++)INIT.tokenQueue[it][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let it=0;it<INIT.pluginQueue.length;it++)INIT.pluginQueue[it][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(it){return INIT.initialized||init(),run(INIT.parser.start,it,run$1(INIT.scanner.start,it))}tokenize.scan=run$1;function find$1(it,g=null,et=null){if(g&&typeof g=="object"){if(et)throw Error(`linkifyjs: Invalid link type ${g}; must be a string`);et=g,g=null}const ot=new Options(et),ct=tokenize(it),ut=[];for(let dt=0;dt<ct.length;dt++){const ft=ct[dt];ft.isLink&&(!g||ft.t===g)&&ot.check(ft)&&ut.push(ft.toFormattedObject(ot))}return ut}var UNICODE_WHITESPACE_PATTERN="[\0- -\u2029]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(it){return it.length===1?it[0].isLink:it.length===3&&it[1].isLink?["()","[]"].includes(it[0].value+it[2].value):!1}function autolink(it){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(g,et,ot)=>{const ct=g.some(kt=>kt.docChanged)&&!et.doc.eq(ot.doc),ut=g.some(kt=>kt.getMeta("preventAutolink"));if(!ct||ut)return;const{tr:dt}=ot,ft=combineTransactionSteps(et.doc,[...g]);if(getChangedRanges(ft).forEach(({newRange:kt})=>{const Tt=findChildrenInRange(ot.doc,kt,$t=>$t.isTextblock);let Rt,jt;if(Tt.length>1)Rt=Tt[0],jt=ot.doc.textBetween(Rt.pos,Rt.pos+Rt.node.nodeSize,void 0," ");else if(Tt.length){const $t=ot.doc.textBetween(kt.from,kt.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test($t))return;Rt=Tt[0],jt=ot.doc.textBetween(Rt.pos,kt.to,void 0," ")}if(Rt&&jt){const $t=jt.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if($t.length<=0)return!1;const Ft=$t[$t.length-1],Ht=Rt.pos+jt.lastIndexOf(Ft);if(!Ft)return!1;const Kt=tokenize(Ft).map(Bt=>Bt.toObject(it.defaultProtocol));if(!isValidLinkStructure(Kt))return!1;Kt.filter(Bt=>Bt.isLink).map(Bt=>({...Bt,from:Ht+Bt.start+1,to:Ht+Bt.end+1})).filter(Bt=>ot.schema.marks.code?!ot.doc.rangeHasMark(Bt.from,Bt.to,ot.schema.marks.code):!0).filter(Bt=>it.validate(Bt.value)).filter(Bt=>it.shouldAutoLink(Bt.value)).forEach(Bt=>{getMarksBetween(Bt.from,Bt.to,ot.doc).some(Ut=>Ut.mark.type===it.type)||dt.addMark(Bt.from,Bt.to,it.type.create({href:Bt.href}))})}}),!!dt.steps.length)return dt}})}function clickHandler(it){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(g,et,ot)=>{var ct,ut;if(ot.button!==0||!g.editable)return!1;let dt=null;if(ot.target instanceof HTMLAnchorElement)dt=ot.target;else{let Tt=ot.target;const Rt=[];for(;Tt.nodeName!=="DIV";)Rt.push(Tt),Tt=Tt.parentNode;dt=Rt.find(jt=>jt.nodeName==="A")}if(!dt)return!1;const ft=getAttributes$1(g.state,it.type.name),St=(ct=dt==null?void 0:dt.href)!=null?ct:ft.href,kt=(ut=dt==null?void 0:dt.target)!=null?ut:ft.target;return it.enableClickSelection&&it.editor.commands.extendMarkRange(it.type.name),dt&&St?(window.open(St,kt),!0):!1}}})}function pasteHandler(it){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(g,et,ot)=>{const{state:ct}=g,{selection:ut}=ct,{empty:dt}=ut;if(dt)return!1;let ft="";ot.content.forEach(kt=>{ft+=kt.textContent});const St=find$1(ft,{defaultProtocol:it.defaultProtocol}).find(kt=>kt.isLink&&kt.value===ft);return!ft||!St?!1:it.editor.commands.setMark(it.type,{href:St.href})}}})}function isAllowedUri(it,g){const et=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return g&&g.forEach(ot=>{const ct=typeof ot=="string"?ot:ot.scheme;ct&&et.push(ct)}),!it||it.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${et.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(it=>{if(typeof it=="string"){registerCustomProtocol(it);return}registerCustomProtocol(it.scheme,it.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(it,g)=>!!isAllowedUri(it,g.protocols),validate:it=>!!it,shouldAutoLink:it=>!!it}},addAttributes(){return{href:{default:null,parseHTML(it){return it.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:it=>{const g=it.getAttribute("href");return!g||!this.options.isAllowedUri(g,{defaultValidate:et=>!!isAllowedUri(et,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:it}){return this.options.isAllowedUri(it.href,{defaultValidate:g=>!!isAllowedUri(g,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,it),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...it,href:""}),0]},addCommands(){return{setLink:it=>({chain:g})=>{const{href:et}=it;return this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?g().setMark(this.name,it).setMeta("preventAutolink",!0).run():!1},toggleLink:it=>({chain:g})=>{const{href:et}=it||{};return et&&!this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:g().toggleMark(this.name,it,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:it})=>it().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:it=>{const g=[];if(it){const{protocols:et,defaultProtocol:ot}=this.options,ct=find$1(it).filter(ut=>ut.isLink&&this.options.isAllowedUri(ut.value,{defaultValidate:dt=>!!isAllowedUri(dt,et),protocols:et,defaultProtocol:ot}));ct.length&&ct.forEach(ut=>g.push({text:ut.value,data:{href:ut.href},index:ut.start}))}return g},type:this.type,getAttributes:it=>{var g;return{href:(g=it.data)==null?void 0:g.href}}})]},addProseMirrorPlugins(){const it=[],{protocols:g,defaultProtocol:et}=this.options;return this.options.autolink&&it.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:ot=>this.options.isAllowedUri(ot,{defaultValidate:ct=>!!isAllowedUri(ct,g),protocols:g,defaultProtocol:et}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&it.push(clickHandler({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&it.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),it}}),index_default$9=Link,__defProp=Object.defineProperty,__export=(it,g)=>{for(var et in g)__defProp(it,et,{get:g[et],enumerable:!0})},ListItemName="listItem",TextStyleName="textStyle",bulletListInputRegex=/^\s*([-+*])\s$/,BulletList=Node3.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleBulletList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let it=wrappingInputRule({find:bulletListInputRegex,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:bulletListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName),editor:this.editor})),[it]}}),ListItem=Node3.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:it}){return["li",mergeAttributes(this.options.HTMLAttributes,it),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),listHelpers_exports={};__export(listHelpers_exports,{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(it,g)=>{const{$from:et}=g.selection,ot=getNodeType(it,g.schema);let ct=null,ut=et.depth,dt=et.pos,ft=null;for(;ut>0&&ft===null;)ct=et.node(ut),ct.type===ot?ft=ut:(ut-=1,dt-=1);return ft===null?null:{$pos:g.doc.resolve(dt),depth:ft}},getNextListDepth=(it,g)=>{const et=findListItemPos(it,g);if(!et)return!1;const[,ot]=getNodeAtPosition(g,it,et.$pos.pos+4);return ot},hasListBefore=(it,g,et)=>{const{$anchor:ot}=it.selection,ct=Math.max(0,ot.pos-2),ut=it.doc.resolve(ct).node();return!(!ut||!et.includes(ut.type.name))},hasListItemBefore=(it,g)=>{var et;const{$anchor:ot}=g.selection,ct=g.doc.resolve(ot.pos-2);return!(ct.index()===0||((et=ct.nodeBefore)==null?void 0:et.type.name)!==it)},listItemHasSubList=(it,g,et)=>{if(!et)return!1;const ot=getNodeType(it,g.schema);let ct=!1;return et.descendants(ut=>{ut.type===ot&&(ct=!0)}),ct},handleBackspace=(it,g,et)=>{if(it.commands.undoInputRule())return!0;if(it.state.selection.from!==it.state.selection.to)return!1;if(!isNodeActive(it.state,g)&&hasListBefore(it.state,g,et)){const{$anchor:ft}=it.state.selection,St=it.state.doc.resolve(ft.before()-1),kt=[];St.node().descendants((jt,$t)=>{jt.type.name===g&&kt.push({node:jt,pos:$t})});const Tt=kt.at(-1);if(!Tt)return!1;const Rt=it.state.doc.resolve(St.start()+Tt.pos+1);return it.chain().cut({from:ft.start()-1,to:ft.end()+1},Rt.end()).joinForward().run()}if(!isNodeActive(it.state,g)||!isAtStartOfNode(it.state))return!1;const ot=findListItemPos(g,it.state);if(!ot)return!1;const ut=it.state.doc.resolve(ot.$pos.pos-2).node(ot.depth),dt=listItemHasSubList(g,it.state,ut);return hasListItemBefore(g,it.state)&&!dt?it.commands.joinItemBackward():it.chain().liftListItem(g).run()},nextListIsDeeper=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et>ot.depth},nextListIsHigher=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et<ot.depth},handleDelete=(it,g)=>{if(!isNodeActive(it.state,g)||!isAtEndOfNode(it.state,g))return!1;const{selection:et}=it.state,{$from:ot,$to:ct}=et;return!et.empty&&ot.sameParent(ct)?!1:nextListIsDeeper(g,it.state)?it.chain().focus(it.state.selection.from+4).lift(g).joinBackward().run():nextListIsHigher(g,it.state)?it.chain().joinForward().joinBackward().run():it.commands.joinItemForward()},hasListItemAfter=(it,g)=>{var et;const{$anchor:ot}=g.selection,ct=g.doc.resolve(ot.pos-ot.parentOffset-2);return!(ct.index()===ct.parent.childCount-1||((et=ct.nodeAfter)==null?void 0:et.type.name)!==it)},ListKeymap=Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},"Mod-Delete":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},Backspace:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g},"Mod-Backspace":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g}}}}),ListItemName2="listItem",TextStyleName2="textStyle",orderedListInputRegex=/^(\d+)\.\s$/,OrderedList=Node3.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:it=>it.hasAttribute("start")?parseInt(it.getAttribute("start")||"",10):1},type:{default:null,parseHTML:it=>it.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:it}){const{start:g,...et}=it;return g===1?["ol",mergeAttributes(this.options.HTMLAttributes,et),0]:["ol",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleOrderedList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName2,this.editor.getAttributes(TextStyleName2)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let it=wrappingInputRule({find:orderedListInputRegex,type:this.type,getAttributes:g=>({start:+g[1]}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:orderedListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:g=>({start:+g[1],...this.editor.getAttributes(TextStyleName2)}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1],editor:this.editor})),[it]}}),inputRegex$3=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node3.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:it=>{const g=it.getAttribute("data-checked");return g===""||g==="true"},renderHTML:it=>({"data-checked":it.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:it,HTMLAttributes:g}){return["li",mergeAttributes(this.options.HTMLAttributes,g,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:it.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const it={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...it,Tab:()=>this.editor.commands.sinkListItem(this.name)}:it},addNodeView(){return({node:it,HTMLAttributes:g,getPos:et,editor:ot})=>{const ct=document.createElement("li"),ut=document.createElement("label"),dt=document.createElement("span"),ft=document.createElement("input"),St=document.createElement("div"),kt=Tt=>{var Rt,jt;ft.ariaLabel=((jt=(Rt=this.options.a11y)==null?void 0:Rt.checkboxLabel)==null?void 0:jt.call(Rt,Tt,ft.checked))||`Task item checkbox for ${Tt.textContent||"empty task item"}`};return kt(it),ut.contentEditable="false",ft.type="checkbox",ft.addEventListener("mousedown",Tt=>Tt.preventDefault()),ft.addEventListener("change",Tt=>{if(!ot.isEditable&&!this.options.onReadOnlyChecked){ft.checked=!ft.checked;return}const{checked:Rt}=Tt.target;ot.isEditable&&typeof et=="function"&&ot.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:jt})=>{const $t=et();if(typeof $t!="number")return!1;const Ft=jt.doc.nodeAt($t);return jt.setNodeMarkup($t,void 0,{...Ft==null?void 0:Ft.attrs,checked:Rt}),!0}).run(),!ot.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(it,Rt)||(ft.checked=!ft.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([Tt,Rt])=>{ct.setAttribute(Tt,Rt)}),ct.dataset.checked=it.attrs.checked,ft.checked=it.attrs.checked,ut.append(ft,dt),ct.append(ut,St),Object.entries(g).forEach(([Tt,Rt])=>{ct.setAttribute(Tt,Rt)}),{dom:ct,contentDOM:St,update:Tt=>Tt.type!==this.type?!1:(ct.dataset.checked=Tt.attrs.checked,ft.checked=Tt.attrs.checked,kt(Tt),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$3,type:this.type,getAttributes:it=>({checked:it[it.length-1]==="x"})})]}}),TaskList=Node3.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:it})=>it.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Extension.create({name:"listKit",addExtensions(){const it=[];return this.options.bulletList!==!1&&it.push(BulletList.configure(this.options.bulletList)),this.options.listItem!==!1&&it.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&it.push(ListKeymap.configure(this.options.listKeymap)),this.options.orderedList!==!1&&it.push(OrderedList.configure(this.options.orderedList)),this.options.taskItem!==!1&&it.push(TaskItem.configure(this.options.taskItem)),this.options.taskList!==!1&&it.push(TaskList.configure(this.options.taskList)),it}});var Paragraph=Node3.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:it}){return["p",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setParagraph:()=>({commands:it})=>it.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["s",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setStrike:()=>({commands:it})=>it.setMark(this.name),toggleStrike:()=>({commands:it})=>it.toggleMark(this.name),unsetStrike:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text$1=Node3.create({name:"text",group:"inline"}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["u",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setUnderline:()=>({commands:it})=>it.setMark(this.name),toggleUnderline:()=>({commands:it})=>it.toggleMark(this.name),unsetUnderline:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),index_default$8=Underline;function dropCursor(it={}){return new Plugin({view(g){return new DropCursorView(g,it)}})}class DropCursorView{constructor(g,et){var ot;this.editorView=g,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(ot=et.width)!==null&&ot!==void 0?ot:1,this.color=et.color===!1?void 0:et.color||"black",this.class=et.class,this.handlers=["dragover","dragend","drop","dragleave"].map(ct=>{let ut=dt=>{this[ct](dt)};return g.dom.addEventListener(ct,ut),{name:ct,handler:ut}})}destroy(){this.handlers.forEach(({name:g,handler:et})=>this.editorView.dom.removeEventListener(g,et))}update(g,et){this.cursorPos!=null&&et.doc!=g.state.doc&&(this.cursorPos>g.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(g){g!=this.cursorPos&&(this.cursorPos=g,g==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let g=this.editorView.state.doc.resolve(this.cursorPos),et=!g.parent.inlineContent,ot,ct=this.editorView.dom,ut=ct.getBoundingClientRect(),dt=ut.width/ct.offsetWidth,ft=ut.height/ct.offsetHeight;if(et){let Rt=g.nodeBefore,jt=g.nodeAfter;if(Rt||jt){let $t=this.editorView.nodeDOM(this.cursorPos-(Rt?Rt.nodeSize:0));if($t){let Ft=$t.getBoundingClientRect(),Ht=Rt?Ft.bottom:Ft.top;Rt&&jt&&(Ht=(Ht+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let Kt=this.width/2*ft;ot={left:Ft.left,right:Ft.right,top:Ht-Kt,bottom:Ht+Kt}}}}if(!ot){let Rt=this.editorView.coordsAtPos(this.cursorPos),jt=this.width/2*dt;ot={left:Rt.left-jt,right:Rt.left+jt,top:Rt.top,bottom:Rt.bottom}}let St=this.editorView.dom.offsetParent;this.element||(this.element=St.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",et),this.element.classList.toggle("prosemirror-dropcursor-inline",!et);let kt,Tt;if(!St||St==document.body&&getComputedStyle(St).position=="static")kt=-pageXOffset,Tt=-pageYOffset;else{let Rt=St.getBoundingClientRect(),jt=Rt.width/St.offsetWidth,$t=Rt.height/St.offsetHeight;kt=Rt.left-St.scrollLeft*jt,Tt=Rt.top-St.scrollTop*$t}this.element.style.left=(ot.left-kt)/dt+"px",this.element.style.top=(ot.top-Tt)/ft+"px",this.element.style.width=(ot.right-ot.left)/dt+"px",this.element.style.height=(ot.bottom-ot.top)/ft+"px"}scheduleRemoval(g){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),g)}dragover(g){if(!this.editorView.editable)return;let et=this.editorView.posAtCoords({left:g.clientX,top:g.clientY}),ot=et&&et.inside>=0&&this.editorView.state.doc.nodeAt(et.inside),ct=ot&&ot.type.spec.disableDropCursor,ut=typeof ct=="function"?ct(this.editorView,et,g):ct;if(et&&!ut){let dt=et.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let ft=dropPoint(this.editorView.state.doc,dt,this.editorView.dragging.slice);ft!=null&&(dt=ft)}this.setCursor(dt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(g){this.editorView.dom.contains(g.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor(g){super(g,g)}map(g,et){let ot=g.resolve(et.map(this.head));return GapCursor.valid(ot)?new GapCursor(ot):Selection.near(ot)}content(){return Slice.empty}eq(g){return g instanceof GapCursor&&g.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(g.resolve(et.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(g){let et=g.parent;if(et.isTextblock||!closedBefore(g)||!closedAfter(g))return!1;let ot=et.type.spec.allowGapCursor;if(ot!=null)return ot;let ct=et.contentMatchAt(g.index()).defaultType;return ct&&ct.isTextblock}static findGapCursorFrom(g,et,ot=!1){e:for(;;){if(!ot&&GapCursor.valid(g))return g;let ct=g.pos,ut=null;for(let dt=g.depth;;dt--){let ft=g.node(dt);if(et>0?g.indexAfter(dt)<ft.childCount:g.index(dt)>0){ut=ft.child(et>0?g.indexAfter(dt):g.index(dt)-1);break}else if(dt==0)return null;ct+=et;let St=g.doc.resolve(ct);if(GapCursor.valid(St))return St}for(;;){let dt=et>0?ut.firstChild:ut.lastChild;if(!dt){if(ut.isAtom&&!ut.isText&&!NodeSelection.isSelectable(ut)){g=g.doc.resolve(ct+ut.nodeSize*et),ot=!1;continue e}break}ut=dt,ct+=et;let ft=g.doc.resolve(ct);if(GapCursor.valid(ft))return ft}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(g){this.pos=g}map(g){return new GapBookmark(g.map(this.pos))}resolve(g){let et=g.resolve(this.pos);return GapCursor.valid(et)?new GapCursor(et):Selection.near(et)}}function closedBefore(it){for(let g=it.depth;g>=0;g--){let et=it.index(g),ot=it.node(g);if(et==0){if(ot.type.spec.isolating)return!0;continue}for(let ct=ot.child(et-1);;ct=ct.lastChild){if(ct.childCount==0&&!ct.inlineContent||ct.isAtom||ct.type.spec.isolating)return!0;if(ct.inlineContent)return!1}}return!0}function closedAfter(it){for(let g=it.depth;g>=0;g--){let et=it.indexAfter(g),ot=it.node(g);if(et==ot.childCount){if(ot.type.spec.isolating)return!0;continue}for(let ct=ot.child(et);;ct=ct.firstChild){if(ct.childCount==0&&!ct.inlineContent||ct.isAtom||ct.type.spec.isolating)return!0;if(ct.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(it,g,et){return g.pos==et.pos&&GapCursor.valid(et)?new GapCursor(et):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(it,g){const et=it=="vert"?g>0?"down":"up":g>0?"right":"left";return function(ot,ct,ut){let dt=ot.selection,ft=g>0?dt.$to:dt.$from,St=dt.empty;if(dt instanceof TextSelection){if(!ut.endOfTextblock(et)||ft.depth==0)return!1;St=!1,ft=ot.doc.resolve(g>0?ft.after():ft.before())}let kt=GapCursor.findGapCursorFrom(ft,g,St);return kt?(ct&&ct(ot.tr.setSelection(new GapCursor(kt))),!0):!1}}function handleClick(it,g,et){if(!it||!it.editable)return!1;let ot=it.state.doc.resolve(g);if(!GapCursor.valid(ot))return!1;let ct=it.posAtCoords({left:et.clientX,top:et.clientY});return ct&&ct.inside>-1&&NodeSelection.isSelectable(it.state.doc.nodeAt(ct.inside))?!1:(it.dispatch(it.state.tr.setSelection(new GapCursor(ot))),!0)}function beforeinput(it,g){if(g.inputType!="insertCompositionText"||!(it.state.selection instanceof GapCursor))return!1;let{$from:et}=it.state.selection,ot=et.parent.contentMatchAt(et.index()).findWrapping(it.state.schema.nodes.text);if(!ot)return!1;let ct=Fragment.empty;for(let dt=ot.length-1;dt>=0;dt--)ct=Fragment.from(ot[dt].createAndFill(null,ct));let ut=it.state.tr.replace(et.pos,et.pos,new Slice(ct,0,0));return ut.setSelection(TextSelection.near(ut.doc.resolve(et.pos+1))),it.dispatch(ut),!1}function drawGapCursor(it){if(!(it.selection instanceof GapCursor))return null;let g=document.createElement("div");return g.className="ProseMirror-gapcursor",DecorationSet.create(it.doc,[Decoration.widget(it.selection.head,g,{key:"gapcursor"})])}var GOOD_LEAF_SIZE=200,RopeSequence=function it(){};RopeSequence.prototype.append=function it(g){return g.length?(g=RopeSequence.from(g),!this.length&&g||g.length<GOOD_LEAF_SIZE&&this.leafAppend(g)||this.length<GOOD_LEAF_SIZE&&g.leafPrepend(this)||this.appendInner(g)):this};RopeSequence.prototype.prepend=function it(g){return g.length?RopeSequence.from(g).append(this):this};RopeSequence.prototype.appendInner=function it(g){return new Append(this,g)};RopeSequence.prototype.slice=function it(g,et){return g===void 0&&(g=0),et===void 0&&(et=this.length),g>=et?RopeSequence.empty:this.sliceInner(Math.max(0,g),Math.min(this.length,et))};RopeSequence.prototype.get=function it(g){if(!(g<0||g>=this.length))return this.getInner(g)};RopeSequence.prototype.forEach=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length),et<=ot?this.forEachInner(g,et,ot,0):this.forEachInvertedInner(g,et,ot,0)};RopeSequence.prototype.map=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length);var ct=[];return this.forEach(function(ut,dt){return ct.push(g(ut,dt))},et,ot),ct};RopeSequence.from=function it(g){return g instanceof RopeSequence?g:g&&g.length?new Leaf(g):RopeSequence.empty};var Leaf=function(it){function g(ot){it.call(this),this.values=ot}it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g;var et={length:{configurable:!0},depth:{configurable:!0}};return g.prototype.flatten=function(){return this.values},g.prototype.sliceInner=function(ct,ut){return ct==0&&ut==this.length?this:new g(this.values.slice(ct,ut))},g.prototype.getInner=function(ct){return this.values[ct]},g.prototype.forEachInner=function(ct,ut,dt,ft){for(var St=ut;St<dt;St++)if(ct(this.values[St],ft+St)===!1)return!1},g.prototype.forEachInvertedInner=function(ct,ut,dt,ft){for(var St=ut-1;St>=dt;St--)if(ct(this.values[St],ft+St)===!1)return!1},g.prototype.leafAppend=function(ct){if(this.length+ct.length<=GOOD_LEAF_SIZE)return new g(this.values.concat(ct.flatten()))},g.prototype.leafPrepend=function(ct){if(this.length+ct.length<=GOOD_LEAF_SIZE)return new g(ct.flatten().concat(this.values))},et.length.get=function(){return this.values.length},et.depth.get=function(){return 0},Object.defineProperties(g.prototype,et),g}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(it){function g(et,ot){it.call(this),this.left=et,this.right=ot,this.length=et.length+ot.length,this.depth=Math.max(et.depth,ot.depth)+1}return it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g,g.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},g.prototype.getInner=function(ot){return ot<this.left.length?this.left.get(ot):this.right.get(ot-this.left.length)},g.prototype.forEachInner=function(ot,ct,ut,dt){var ft=this.left.length;if(ct<ft&&this.left.forEachInner(ot,ct,Math.min(ut,ft),dt)===!1||ut>ft&&this.right.forEachInner(ot,Math.max(ct-ft,0),Math.min(this.length,ut)-ft,dt+ft)===!1)return!1},g.prototype.forEachInvertedInner=function(ot,ct,ut,dt){var ft=this.left.length;if(ct>ft&&this.right.forEachInvertedInner(ot,ct-ft,Math.max(ut,ft)-ft,dt+ft)===!1||ut<ft&&this.left.forEachInvertedInner(ot,Math.min(ct,ft),ut,dt)===!1)return!1},g.prototype.sliceInner=function(ot,ct){if(ot==0&&ct==this.length)return this;var ut=this.left.length;return ct<=ut?this.left.slice(ot,ct):ot>=ut?this.right.slice(ot-ut,ct-ut):this.left.slice(ot,ut).append(this.right.slice(0,ct-ut))},g.prototype.leafAppend=function(ot){var ct=this.right.leafAppend(ot);if(ct)return new g(this.left,ct)},g.prototype.leafPrepend=function(ot){var ct=this.left.leafPrepend(ot);if(ct)return new g(ct,this.right)},g.prototype.appendInner=function(ot){return this.left.depth>=Math.max(this.right.depth,ot.depth)+1?new g(this.left,new g(this.right,ot)):new g(this,ot)},g}(RopeSequence);const max_empty_items=500;class Branch{constructor(g,et){this.items=g,this.eventCount=et}popEvent(g,et){if(this.eventCount==0)return null;let ot=this.items.length;for(;;ot--)if(this.items.get(ot-1).selection){--ot;break}let ct,ut;et&&(ct=this.remapping(ot,this.items.length),ut=ct.maps.length);let dt=g.tr,ft,St,kt=[],Tt=[];return this.items.forEach((Rt,jt)=>{if(!Rt.step){ct||(ct=this.remapping(ot,jt+1),ut=ct.maps.length),ut--,Tt.push(Rt);return}if(ct){Tt.push(new Item(Rt.map));let $t=Rt.step.map(ct.slice(ut)),Ft;$t&&dt.maybeStep($t).doc&&(Ft=dt.mapping.maps[dt.mapping.maps.length-1],kt.push(new Item(Ft,void 0,void 0,kt.length+Tt.length))),ut--,Ft&&ct.appendMap(Ft,ut)}else dt.maybeStep(Rt.step);if(Rt.selection)return ft=ct?Rt.selection.map(ct.slice(ut)):Rt.selection,St=new Branch(this.items.slice(0,ot).append(Tt.reverse().concat(kt)),this.eventCount-1),!1},this.items.length,0),{remaining:St,transform:dt,selection:ft}}addTransform(g,et,ot,ct){let ut=[],dt=this.eventCount,ft=this.items,St=!ct&&ft.length?ft.get(ft.length-1):null;for(let Tt=0;Tt<g.steps.length;Tt++){let Rt=g.steps[Tt].invert(g.docs[Tt]),jt=new Item(g.mapping.maps[Tt],Rt,et),$t;($t=St&&St.merge(jt))&&(jt=$t,Tt?ut.pop():ft=ft.slice(0,ft.length-1)),ut.push(jt),et&&(dt++,et=void 0),ct||(St=jt)}let kt=dt-ot.depth;return kt>DEPTH_OVERFLOW&&(ft=cutOffEvents(ft,kt),dt-=kt),new Branch(ft.append(ut),dt)}remapping(g,et){let ot=new Mapping;return this.items.forEach((ct,ut)=>{let dt=ct.mirrorOffset!=null&&ut-ct.mirrorOffset>=g?ot.maps.length-ct.mirrorOffset:void 0;ot.appendMap(ct.map,dt)},g,et),ot}addMaps(g){return this.eventCount==0?this:new Branch(this.items.append(g.map(et=>new Item(et))),this.eventCount)}rebased(g,et){if(!this.eventCount)return this;let ot=[],ct=Math.max(0,this.items.length-et),ut=g.mapping,dt=g.steps.length,ft=this.eventCount;this.items.forEach(jt=>{jt.selection&&ft--},ct);let St=et;this.items.forEach(jt=>{let $t=ut.getMirror(--St);if($t==null)return;dt=Math.min(dt,$t);let Ft=ut.maps[$t];if(jt.step){let Ht=g.steps[$t].invert(g.docs[$t]),Kt=jt.selection&&jt.selection.map(ut.slice(St+1,$t));Kt&&ft++,ot.push(new Item(Ft,Ht,Kt))}else ot.push(new Item(Ft))},ct);let kt=[];for(let jt=et;jt<dt;jt++)kt.push(new Item(ut.maps[jt]));let Tt=this.items.slice(0,ct).append(kt).append(ot),Rt=new Branch(Tt,ft);return Rt.emptyItemCount()>max_empty_items&&(Rt=Rt.compress(this.items.length-ot.length)),Rt}emptyItemCount(){let g=0;return this.items.forEach(et=>{et.step||g++}),g}compress(g=this.items.length){let et=this.remapping(0,g),ot=et.maps.length,ct=[],ut=0;return this.items.forEach((dt,ft)=>{if(ft>=g)ct.push(dt),dt.selection&&ut++;else if(dt.step){let St=dt.step.map(et.slice(ot)),kt=St&&St.getMap();if(ot--,kt&&et.appendMap(kt,ot),St){let Tt=dt.selection&&dt.selection.map(et.slice(ot));Tt&&ut++;let Rt=new Item(kt.invert(),St,Tt),jt,$t=ct.length-1;(jt=ct.length&&ct[$t].merge(Rt))?ct[$t]=jt:ct.push(Rt)}}else dt.map&&ot--},this.items.length,0),new Branch(RopeSequence.from(ct.reverse()),ut)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(it,g){let et;return it.forEach((ot,ct)=>{if(ot.selection&&g--==0)return et=ct,!1}),it.slice(et)}class Item{constructor(g,et,ot,ct){this.map=g,this.step=et,this.selection=ot,this.mirrorOffset=ct}merge(g){if(this.step&&g.step&&!g.selection){let et=g.step.merge(this.step);if(et)return new Item(et.getMap().invert(),et,this.selection)}}}class HistoryState{constructor(g,et,ot,ct,ut){this.done=g,this.undone=et,this.prevRanges=ot,this.prevTime=ct,this.prevComposition=ut}}const DEPTH_OVERFLOW=20;function applyTransaction(it,g,et,ot){let ct=et.getMeta(historyKey),ut;if(ct)return ct.historyState;et.getMeta(closeHistoryKey)&&(it=new HistoryState(it.done,it.undone,null,0,-1));let dt=et.getMeta("appendedTransaction");if(et.steps.length==0)return it;if(dt&&dt.getMeta(historyKey))return dt.getMeta(historyKey).redo?new HistoryState(it.done.addTransform(et,void 0,ot,mustPreserveItems(g)),it.undone,rangesFor(et.mapping.maps),it.prevTime,it.prevComposition):new HistoryState(it.done,it.undone.addTransform(et,void 0,ot,mustPreserveItems(g)),null,it.prevTime,it.prevComposition);if(et.getMeta("addToHistory")!==!1&&!(dt&&dt.getMeta("addToHistory")===!1)){let ft=et.getMeta("composition"),St=it.prevTime==0||!dt&&it.prevComposition!=ft&&(it.prevTime<(et.time||0)-ot.newGroupDelay||!isAdjacentTo(et,it.prevRanges)),kt=dt?mapRanges(it.prevRanges,et.mapping):rangesFor(et.mapping.maps);return new HistoryState(it.done.addTransform(et,St?g.selection.getBookmark():void 0,ot,mustPreserveItems(g)),Branch.empty,kt,et.time,ft??it.prevComposition)}else return(ut=et.getMeta("rebased"))?new HistoryState(it.done.rebased(et,ut),it.undone.rebased(et,ut),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition):new HistoryState(it.done.addMaps(et.mapping.maps),it.undone.addMaps(et.mapping.maps),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition)}function isAdjacentTo(it,g){if(!g)return!1;if(!it.docChanged)return!0;let et=!1;return it.mapping.maps[0].forEach((ot,ct)=>{for(let ut=0;ut<g.length;ut+=2)ot<=g[ut+1]&&ct>=g[ut]&&(et=!0)}),et}function rangesFor(it){let g=[];for(let et=it.length-1;et>=0&&g.length==0;et--)it[et].forEach((ot,ct,ut,dt)=>g.push(ut,dt));return g}function mapRanges(it,g){if(!it)return null;let et=[];for(let ot=0;ot<it.length;ot+=2){let ct=g.map(it[ot],1),ut=g.map(it[ot+1],-1);ct<=ut&&et.push(ct,ut)}return et}function histTransaction(it,g,et){let ot=mustPreserveItems(g),ct=historyKey.get(g).spec.config,ut=(et?it.undone:it.done).popEvent(g,ot);if(!ut)return null;let dt=ut.selection.resolve(ut.transform.doc),ft=(et?it.done:it.undone).addTransform(ut.transform,g.selection.getBookmark(),ct,ot),St=new HistoryState(et?ft:ut.remaining,et?ut.remaining:ft,null,0,-1);return ut.transform.setSelection(dt).setMeta(historyKey,{redo:et,historyState:St})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(it){let g=it.plugins;if(cachedPreserveItemsPlugins!=g){cachedPreserveItems=!1,cachedPreserveItemsPlugins=g;for(let et=0;et<g.length;et++)if(g[et].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(it={}){return it={depth:it.depth||100,newGroupDelay:it.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(g,et,ot){return applyTransaction(et,ot,g,it)}},config:it,props:{handleDOMEvents:{beforeinput(g,et){let ot=et.inputType,ct=ot=="historyUndo"?undo:ot=="historyRedo"?redo:null;return ct?(et.preventDefault(),ct(g.state,g.dispatch)):!1}}}})}function buildCommand(it,g){return(et,ot)=>{let ct=historyKey.getState(et);if(!ct||(it?ct.undone:ct.done).eventCount==0)return!1;if(ot){let ut=histTransaction(ct,et,it);ut&&ot(g?ut.scrollIntoView():ut)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:it=>it.length,wordCounter:it=>it.split(" ").filter(g=>g!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc;if(((it==null?void 0:it.mode)||this.options.mode)==="textSize"){const ot=g.textBetween(0,g.content.size,void 0," ");return this.options.textCounter(ot)}return g.nodeSize},this.storage.words=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc,et=g.textBetween(0,g.content.size," "," ");return this.options.wordCounter(et)}},addProseMirrorPlugins(){let it=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(g,et,ot)=>{if(it)return;const ct=this.options.limit;if(ct==null||ct===0){it=!0;return}const ut=this.storage.characters({node:ot.doc});if(ut>ct){const dt=ut-ct,ft=0,St=dt;console.warn(`[CharacterCount] Initial content exceeded limit of ${ct} characters. Content was automatically trimmed.`);const kt=ot.tr.deleteRange(ft,St);return it=!0,kt}it=!0},filterTransaction:(g,et)=>{const ot=this.options.limit;if(!g.docChanged||ot===0||ot===null||ot===void 0)return!0;const ct=this.storage.characters({node:et.doc}),ut=this.storage.characters({node:g.doc});if(ut<=ot||ct>ot&&ut>ot&&ut<=ct)return!0;if(ct>ot&&ut>ot&&ut>ct||!g.getMeta("paste"))return!1;const ft=g.selection.$head.pos,St=ut-ot,kt=ft-St,Tt=ft;return g.deleteRange(kt,Tt),!(this.storage.characters({node:g.doc})>ot)}})]}});var Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:it,selection:g})=>{const{isEditable:et,isFocused:ot}=this.editor,{anchor:ct}=g,ut=[];if(!et||!ot)return DecorationSet.create(it,[]);let dt=0;this.options.mode==="deepest"&&it.descendants((St,kt)=>{if(St.isText)return;if(!(ct>=kt&&ct<=kt+St.nodeSize-1))return!1;dt+=1});let ft=0;return it.descendants((St,kt)=>{if(St.isText||!(ct>=kt&&ct<=kt+St.nodeSize-1))return!1;if(ft+=1,this.options.mode==="deepest"&&dt-ft>0||this.options.mode==="shallowest"&&ft>1)return this.options.mode==="deepest";ut.push(Decoration.node(kt,kt+St.nodeSize,{class:this.options.className}))}),DecorationSet.create(it,ut)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(it){var g;const et={name:it.name,options:it.options,storage:it.storage};return{allowGapCursor:(g=callOrReturn(getExtensionField(it,"allowGapCursor",et)))!=null?g:null}}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:it,selection:g})=>{const et=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:ot}=g,ct=[];if(!et)return null;const ut=this.editor.isEmpty;return it.descendants((dt,ft)=>{const St=ot>=ft&&ot<=ft+dt.nodeSize,kt=!dt.isLeaf&&isNodeEmpty(dt);if((St||!this.options.showOnlyCurrent)&&kt){const Tt=[this.options.emptyNodeClass];ut&&Tt.push(this.options.emptyEditorClass);const Rt=Decoration.node(ft,ft+dt.nodeSize,{class:Tt.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:dt,pos:ft,hasAnchor:St}):this.options.placeholder});ct.push(Rt)}return this.options.includeChildren}),DecorationSet.create(it,ct)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:it,options:g}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(et){return et.selection.empty||it.isFocused||!it.isEditable||isNodeSelection(et.selection)||it.view.dragging?null:DecorationSet.create(et.doc,[Decoration.inline(et.selection.from,et.selection.to,{class:g.className})])}}})]}});function nodeEqualsType({types:it,node:g}){return g&&Array.isArray(it)&&it.includes(g.type)||(g==null?void 0:g.type)===it}var TrailingNode=Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const it=new PluginKey(this.name),g=Object.entries(this.editor.schema.nodes).map(([,et])=>et).filter(et=>(this.options.notAfter||[]).concat(this.options.node).includes(et.name));return[new Plugin({key:it,appendTransaction:(et,ot,ct)=>{const{doc:ut,tr:dt,schema:ft}=ct,St=it.getState(ct),kt=ut.content.size,Tt=ft.nodes[this.options.node];if(St)return dt.insert(kt,Tt.create())},state:{init:(et,ot)=>{const ct=ot.tr.doc.lastChild;return!nodeEqualsType({node:ct,types:g})},apply:(et,ot)=>{if(!et.docChanged)return ot;const ct=et.doc.lastChild;return!nodeEqualsType({node:ct,types:g})}}})]}}),UndoRedo=Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:it,dispatch:g})=>undo(it,g),redo:()=>({state:it,dispatch:g})=>redo(it,g)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var it,g,et,ot;const ct=[];return this.options.bold!==!1&&ct.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&ct.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&ct.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&ct.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&ct.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&ct.push(Document$2.configure(this.options.document)),this.options.dropcursor!==!1&&ct.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&ct.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&ct.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&ct.push(Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&ct.push(UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&ct.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&ct.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&ct.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&ct.push(ListKeymap.configure((it=this.options)==null?void 0:it.listKeymap)),this.options.link!==!1&&ct.push(Link.configure((g=this.options)==null?void 0:g.link)),this.options.orderedList!==!1&&ct.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&ct.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&ct.push(Strike.configure(this.options.strike)),this.options.text!==!1&&ct.push(Text$1.configure(this.options.text)),this.options.underline!==!1&&ct.push(Underline.configure((et=this.options)==null?void 0:et.underline)),this.options.trailingNode!==!1&&ct.push(TrailingNode.configure((ot=this.options)==null?void 0:ot.trailingNode)),ct}}),index_default$7=StarterKit,index_default$6=ListItem,index_default$5=BulletList,index_default$4=OrderedList,inputRegex$1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:it=>it.getAttribute("data-color")||it.style.backgroundColor,renderHTML:it=>it.color?{"data-color":it.color,style:`background-color: ${it.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:it}){return["mark",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setHighlight:it=>({commands:g})=>g.setMark(this.name,it),toggleHighlight:it=>({commands:g})=>g.toggleMark(this.name,it),unsetHighlight:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),index_default$3=Highlight,TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:it=>{const g=it.style.textAlign;return this.options.alignments.includes(g)?g:this.options.defaultAlignment},renderHTML:it=>it.textAlign?{style:`text-align: ${it.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:it=>({commands:g})=>this.options.alignments.includes(it)?this.options.types.map(et=>g.updateAttributes(et,{textAlign:it})).every(et=>et):!1,unsetTextAlign:()=>({commands:it})=>this.options.types.map(g=>it.resetAttributes(g,"textAlign")).every(g=>g),toggleTextAlign:it=>({editor:g,commands:et})=>this.options.alignments.includes(it)?g.isActive({textAlign:it})?et.unsetTextAlign():et.setTextAlign(it):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),index_default$2=TextAlign,index_default$1=Placeholder;const githubDark="";function BookEditor({content:it,setContent:g}){const et=reactExports.useRef(null),ot=useEditor({extensions:[index_default$6,index_default$5.configure({keepMarks:!0,keepAttributes:!0}),index_default$4.configure({keepMarks:!0,keepAttributes:!0}),index_default$a,index_default$7.configure({history:!0,bulletList:!1,orderedList:!1,blockquote:!1}),index_default$8,index_default$3,index_default$9.configure({openOnClick:!1}),index_default$2.configure({types:["heading","paragraph","listItem","blockquote"]}),index_default$1.configure({placeholder:"Start writing your book..."})],editorProps:{attributes:{class:"focus:outline-none prose prose-invert prose-lg max-w-none text-white leading-relaxed"}},content:it,onUpdate:({editor:ct})=>g(ct.getHTML())});return reactExports.useEffect(()=>{ot&&it!==ot.getHTML()&&ot.commands.setContent(it||"",!1)},[it,ot]),ot&&(window.__EDITOR=ot),reactExports.useEffect(()=>{et.current=ot},[ot]),ot?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 bg-[#111] px-6 py-3 flex flex-wrap items-center gap-6 border-b border-gray-800 shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3 items-center",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBold().run(),className:`font-semibold text-lg ${ot.isActive("bold")?"text-green-400":"text-gray-300"} hover:text-white`,children:"B"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleItalic().run(),className:`italic text-lg ${ot.isActive("italic")?"text-green-400":"text-gray-300"} hover:text-white`,children:"I"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleUnderline().run(),className:`underline text-lg ${ot.isActive("underline")?"text-green-400":"text-gray-300"} hover:text-white`,children:"U"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleHighlight().run(),className:`px-2 py-1 rounded text-sm ${ot.isActive("highlight")?"bg-yellow-400 text-black":"text-gray-300"} hover:text-white`,children:"HL"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBulletList().run(),className:`p-2 rounded-md ${ot.isActive("bulletList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Bullet List",children:jsxRuntimeExports.jsx(List,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleOrderedList().run(),className:`p-2 rounded-md ${ot.isActive("orderedList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Numbered List",children:jsxRuntimeExports.jsx(ListOrdered,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBlockquote().run(),className:`${ot.isActive("blockquote")?"text-green-400":"text-gray-300"} hover:text-white`,children:" Quote"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("left").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"left"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Left",children:jsxRuntimeExports.jsx(TextAlignStart,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("center").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"center"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Center",children:jsxRuntimeExports.jsx(TextAlignCenter,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("right").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"right"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Right",children:jsxRuntimeExports.jsx(TextAlignEnd,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 ml-auto border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().undo().run(),className:"text-gray-300 hover:text-white",children:" Undo"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().redo().run(),className:"text-gray-300 hover:text-white",children:" Redo"})]})]}),jsxRuntimeExports.jsx(EditorContent,{editor:ot,className:`prose prose-invert max-w-none 
             bg-[#0f0f0f] text-white type-text 
             min-h-[70vh] max-h-[90vh]
             resize-y overflow-auto
             border border-gray-700 rounded-lg 
             p-8 focus:outline-none focus:ring-2 focus:ring-green-500/50`})]}):null}function BookPromptForm({text:it,setText:g,pages:et,setPages:ot,link:ct,setLink:ut,cover:dt,setCover:ft,title:St,setTitle:kt,authorName:Tt,bookName:Rt,setBookName:jt,bookType:$t,setBookType:Ft,loading:Ht,bookId:Kt,setBookId:Bt,partLocked:Ut,partNumber:Yt,onClose:Jt,setShowGenerating:Zt,setProgress:en}){const[tn,nn]=reactExports.useState(!1),[ln,an]=reactExports.useState(!1),[sn,dn]=reactExports.useState(null),{accessToken:mn}=useAuth(),[yn,vn]=reactExports.useState(sessionStorage.getItem("shownDraftBanner")==="true"),[hn,pn]=reactExports.useState(Tt||"");reactExports.useEffect(()=>{async function un(){var xn,En;if(Kt)try{const wn=Yt>1?`https://cre8tlystudio.com/api/books/${Kt}/part/${Yt}/draft`:`https://cre8tlystudio.com/api/books/draft/${Kt}`,kn=await axiosInstance.get(wn,{headers:{Authorization:`Bearer ${mn}`}});(xn=kn.data)!=null&&xn.draft_text?(g(kn.data.draft_text),kn.data.title&&jt(kn.data.title),kn.data.link&&ut(kn.data.link),kn.data.last_saved_at&&dn(kn.data.last_saved_at),kn.data.author_name&&pn(kn.data.author_name),kn.data.book_type&&Ft(kn.data.book_type),yn||(an(!0),y$4.info("Loaded saved draft "),setTimeout(()=>an(!1),4e3),sessionStorage.setItem("shownDraftBanner","true"),vn(!0))):console.log("No saved draft found for this book or part.")}catch(wn){((En=wn.response)==null?void 0:En.status)!==404&&console.error("Failed to load draft:",wn)}}un()},[Kt,Yt]);async function rn(){if(!(it!=null&&it.trim())){y$4.warn("Write something before saving!");return}nn(!0);try{const un=Yt>1?`https://cre8tlystudio.com/api/books/${Kt}/part/${Yt}/draft`:"https://cre8tlystudio.com/api/books/draft",xn=await axiosInstance.post(un,{bookId:Kt,draftText:it,book_name:Rt,link:ct,author_name:hn||Tt,book_type:$t},{headers:{Authorization:`Bearer ${mn}`}});xn.data.id&&typeof Bt=="function"&&Bt(xn.data.id),y$4.success("Draft saved successfully ")}catch(un){console.error("Save draft failed:",un),y$4.error("Failed to save draft")}finally{nn(!1)}}async function on(un){un.preventDefault();try{Zt(!0),en(0),Jt();let xn=0;const En=setInterval(()=>{xn+=xn<60?Math.random()*4.5:xn<85?Math.random()*2.5:Math.random()*1.2,xn>=96&&(xn=96),en(xn)},200),wn={bookId:Kt,book_name:Rt,prompt:it,pages:et,link:ct,cover:dt,bookName:Rt,authorName:Tt,bookType:$t,title:St},kn=await axiosInstance.post("https://cre8tlystudio.com/api/books/prompt",wn);clearInterval(En),en(100),y$4.success("Chapter generation successful! "),setTimeout(()=>Zt(!1),1500),localStorage.removeItem("bookDraftLocal"),console.log("Book generated:",kn.data)}catch(xn){console.error("Book generation failed:",xn),y$4.error("Failed to generate book"),Zt(!1)}}function gn(un){if(!un)return null;const xn=new Date(un),En=Date.now()-xn.getTime(),wn=Math.floor(En/6e4);if(wn<1)return"just now";if(wn<60)return`${wn} minute${wn!==1?"s":""} ago`;const kn=Math.floor(wn/60);if(kn<24)return`${kn} hour${kn!==1?"s":""} ago`;const Sn=Math.floor(kn/24);return`${Sn} day${Sn!==1?"s":""} ago`}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ln&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center py-2 px-4 bg-green/20 border border-green text-green rounded-lg animate-fadeIn transition-all duration-500 ease-out transform",children:[" Restored your last saved draft"," ",sn&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["(saved ",gn(sn),")"]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:on,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Clockmakers Secret",value:Rt,readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This is your books main title."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:hn||Tt||"",readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Type"}),jsxRuntimeExports.jsx("input",{type:"text",value:$t,readOnly:!0,className:"w-full px-4 py-3 mb-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Chapter Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Midnight Promise",value:St,onChange:un=>kt(un.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:ring-2 focus:ring-green focus:outline-none"})]}),jsxRuntimeExports.jsx("div",{className:"border border-gray-700 rounded-xl",children:jsxRuntimeExports.jsx(BookEditor,{content:it,setContent:g})}),jsxRuntimeExports.jsx(CoverUpload,{cover:dt,setCover:ft}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages"}),jsxRuntimeExports.jsx("div",{className:"relative w-full max-w-xs",children:jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"10",value:et??"",onChange:un=>ot(Number(un.target.value)),className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Website or Author Link"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:ct,onChange:un=>ut(un.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[!Ut&&jsxRuntimeExports.jsx("button",{type:"button",onClick:rn,disabled:tn,className:`flex-1 px-6 py-3 rounded-xl bg-green text-black font-semibold text-lg shadow-lg transition ${tn?"opacity-70 cursor-not-allowed":"hover:bg-green hover:text-black"}`,children:tn?"Saving...":"Save Draft"}),!Ht&&jsxRuntimeExports.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl bg-royalPurple text-white font-semibold text-lg shadow-lg hover:opacity-90 transition",children:" Generate Book PDF"})]})]})]})}function PromptModal({isOpen:it,onClose:g,magnetId:et,accessToken:ot,contentType:ct,onSubmitted:ut,setShowGenerating:dt,setProgress:ft}){const[St,kt]=reactExports.useState(""),[Tt,Rt]=reactExports.useState(""),[jt,$t]=reactExports.useState("modern"),[Ft,Ht]=reactExports.useState(5),[Kt,Bt]=reactExports.useState(null),[Ut,Yt]=reactExports.useState(null),[Jt,Zt]=reactExports.useState(""),[en,tn]=reactExports.useState(!1),[nn,ln]=reactExports.useState(!1),[an,sn]=reactExports.useState(null),[dn,mn]=reactExports.useState(""),[yn,vn]=reactExports.useState("questions"),[hn,pn]=reactExports.useState("#ffffff");reactExports.useEffect(()=>{it||(kt(""),Rt(""),$t("modern"),Ht(5),Bt(null),Yt(null),Zt(""),ft(0),tn(!1)),vn("questions")},[it]);const rn=()=>g();async function on(un,xn){var wn,kn,Sn;un.preventDefault(),ln(!0),ft(0),dt(!0),g();let En;try{let An=0;En=setInterval(()=>{An+=An<60?Math.random()*4.5:An<85?Math.random()*2.5:Math.random()*1.2,An>=96&&(An=96),ft(An)},200);const Cn=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{magnetId:et,prompt:St,title:Tt,theme:jt,bgTheme:hn,pages:Ft,logo:Kt,link:Jt,coverImage:an,cta:dn,contentType:xn},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(En),ft(100),y$4.success(" Your digital asset has been generated successfully!"),dt(!1),g(),await new Promise(Tn=>setTimeout(Tn,1e3)),setTimeout(()=>{typeof ut=="function"&&ut(et,St,jt)},2e3)}catch(An){if(clearInterval(En),ft(0),ln(!1),dt(!1),console.error(" Prompt submission error:",An),An.code==="ECONNABORTED"||(wn=An.message)!=null&&wn.includes("timeout"))y$4.info(" Please wait  your document is still being created. It will appear shortly.");else if(An.response){const{status:Cn,data:Tn}=An.response;Cn===413?y$4.error(Tn.message||"Your input is too long. Please shorten it."):Cn===400?y$4.error(Tn.message||"Missing required fields."):Cn===429?y$4.error("Rate limit reached. Please wait a moment and try again."):(kn=Tn.message)!=null&&kn.includes("context_length_exceeded")||(Sn=Tn.message)!=null&&Sn.includes("too large")?y$4.error(" This document is too large. Try fewer pages or smaller content."):y$4.info(" Your document is still generating  it will appear soon.")}else y$4.info(" Document generation still in progress. Please refresh your dashboard shortly.");g(),typeof ut=="function"&&setTimeout(()=>ut(et,St,jt),5e3)}finally{ln(!1)}}async function gn(un){un.preventDefault(),ln(!0),ft(0),dt(!0),g();let xn;try{let En=0;xn=setInterval(()=>{En+=En<60?Math.random()*4.5:En<85?Math.random()*2.5:Math.random()*1.2,En>=96&&(En=96),ft(En)},200);const wn=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{prompt:St,theme:jt,pages:Ft,logo:Kt,link:Jt,coverImage:an},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(xn),ft(100),y$4.success(" Your book was generated successfully!"),await new Promise(kn=>setTimeout(kn,800)),dt(!1),g()}catch(En){console.error(" Book generation error:",En),clearInterval(xn),ft(0),ln(!1),dt(!1),y$4.error("Something went wrong while generating your book.")}finally{ln(!1)}}return jsxRuntimeExports.jsx(ze,{show:it,appear:!0,children:jsxRuntimeExports.jsxs(yt,{className:"relative z-50",onClose:()=>{en||g()},children:[jsxRuntimeExports.jsx(Dt,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(je,{className:"relative w-full max-w-3xl max-h-[85vh] overflow-y-auto rounded-2xl bg-gray-900 p-8 shadow-2xl border border-gray-700",children:[jsxRuntimeExports.jsx(Ye,{className:"text-2xl font-bold text-white mb-6 text-center",children:" Create Your Lead Magnet"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[yn==="questions"&&jsxRuntimeExports.jsx(SmartPromptBuilder,{onPromptReady:un=>{kt(un),vn("generator")}}),yn==="generator"&&jsxRuntimeExports.jsx("div",{className:`transition-all duration-300 ${nn?"pointer-events-none blur-sm opacity-50":""}`,children:jsxRuntimeExports.jsx(PromptForm,{text:St,setText:kt,title:Tt,setTitle:Rt,theme:jt,setTheme:$t,bgTheme:hn,setBgTheme:pn,pages:Ft,setPages:Ht,logo:Kt,setLogo:Bt,logoPreview:Ut,setLogoPreview:Yt,link:Jt,setLink:Zt,cover:an,setCover:sn,cta:dn,setCta:mn,showPreview:en,setShowPreview:tn,onSubmit:on,loading:nn,contentType:ct})}),yn==="bookBuilder"&&jsxRuntimeExports.jsxs("div",{className:`transition-all duration-300 ${nn?"pointer-events-none blur-sm opacity-50":""}`,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>vn("selection"),className:"text-sm text-gray-400 underline hover:text-gray-200 transition",children:" Back to Selection"})}),jsxRuntimeExports.jsx(BookPromptForm,{text:St,setText:kt,theme:jt,setTheme:$t,pages:Ft,setPages:Ht,logo:Kt,setLogo:Bt,logoPreview:Ut,setLogoPreview:Yt,link:Jt,setLink:Zt,cover:an,setCover:sn,cta:dn,setCta:mn,showPreview:en,setShowPreview:tn,onSubmit:gn,loading:nn})]})]}),yn!=="questions"&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>vn("questions"),className:"absolute top-4 left-4 flex items-center gap-2 px-4 py-2 text-sm font-semibold bg-green text-black rounded-lg shadow-md transition-all hover:bg-green/90 hover:text-white active:scale-95 z-20",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),jsxRuntimeExports.jsx("span",{children:"Back"})]}),jsxRuntimeExports.jsx("button",{onClick:nn?void 0:rn,className:`absolute top-4 right-4 text-white text-xl transition ${nn?"opacity-30 cursor-not-allowed":"hover:text-red-400"}`,disabled:nn,children:""})]})})]})})}function DashboardHeader({items:it=[],onCheckout:g,type:et="magnet"}){var Tt;const{user:ot}=useAuth(),ct=Array.isArray(it.magnets)?it.magnets:it,ut=it.summary||{},dt=et==="book"?(ot==null?void 0:ot.book_slots)??0:ut.total_slots??(ot==null?void 0:ot.magnet_slots)??0,ft=et==="book"?ct.filter(Rt=>Rt.pages>=750).length:ut.used_slots??ct.filter(Rt=>Rt.status==="completed").length,St=ut.available_slots??Math.max(dt-ft,0),kt=et==="book"?"My Books":"My Digital Products";return jsxRuntimeExports.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:kt}),ot&&jsxRuntimeExports.jsxs("div",{className:"text-[14px] text-gray-400 mt-1 mb-2",children:["Welcome,"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold tracking-wide",children:((Tt=ot==null?void 0:ot.name)==null?void 0:Tt.split(" ")[0])||"User"})]}),jsxRuntimeExports.jsxs("p",{className:"text-silver mt-1",children:["You currently have ",St," of ",dt," slots remaining."]}),St===0&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:"Purchase More Slots"})})]})})}function LoadingState(){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-silver",children:"Loading your lead magnets..."})]})}function EmptyState({onCheckout:it,type:g="magnet"}){const et=g==="book";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("p",{className:"text-silver mb-6",children:et?"You havent written any books yet.":"You havent created any lead magnets yet."}),jsxRuntimeExports.jsx("button",{onClick:it,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:et?"Write My First Book":"Generate My First Lead Magnet"})]})}const scriptRel="modulepreload",assetsURL=function(it){return"/"+it},seen={},__vitePreload=function it(g,et,ot){if(!et||et.length===0)return g();const ct=document.getElementsByTagName("link");return Promise.all(et.map(ut=>{if(ut=assetsURL(ut),ut in seen)return;seen[ut]=!0;const dt=ut.endsWith(".css"),ft=dt?'[rel="stylesheet"]':"";if(!!ot)for(let Tt=ct.length-1;Tt>=0;Tt--){const Rt=ct[Tt];if(Rt.href===ut&&(!dt||Rt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ut}"]${ft}`))return;const kt=document.createElement("link");if(kt.rel=dt?"stylesheet":scriptRel,dt||(kt.as="script",kt.crossOrigin=""),kt.href=ut,document.head.appendChild(kt),dt)return new Promise((Tt,Rt)=>{kt.addEventListener("load",Tt),kt.addEventListener("error",()=>Rt(new Error(`Unable to preload CSS for ${ut}`)))})})).then(()=>g()).catch(ut=>{const dt=new Event("vite:preloadError",{cancelable:!0});if(dt.payload=ut,window.dispatchEvent(dt),!dt.defaultPrevented)throw ut})},isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(it){Number.isInteger(it)&&(verbosity=it)}function getVerbosityLevel(){return verbosity}function info(it){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${it}`)}function warn(it){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${it}`)}function unreachable(it){throw new Error(it)}function assert(it,g){it||unreachable(g)}function _isValidProtocol(it){switch(it==null?void 0:it.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(it,g=null,et=null){if(!it)return null;if(et&&typeof it=="string"){if(et.addDefaultProtocol&&it.startsWith("www.")){const ct=it.match(/\./g);(ct==null?void 0:ct.length)>=2&&(it=`http://${it}`)}if(et.tryConvertEncoding)try{it=stringToUTF8String(it)}catch{}}const ot=g?URL.parse(it,g):URL.parse(it);return _isValidProtocol(ot)?ot:null}function updateUrlHash(it,g,et=!1){const ot=URL.parse(it);return ot?(ot.hash=g,ot.href):et&&createValidAbsoluteUrl(it,"http://example.com")?it.split("#",1)[0]+`${g?`#${g}`:""}`:""}function shadow(it,g,et,ot=!1){return Object.defineProperty(it,g,{value:et,enumerable:!ot,configurable:!0,writable:!1}),et}const BaseException=function it(){function g(et,ot){this.message=et,this.name=ot}return g.prototype=new Error,g.constructor=g,g}();class PasswordException extends BaseException{constructor(g,et){super(g,"PasswordException"),this.code=et}}class UnknownErrorException extends BaseException{constructor(g,et){super(g,"UnknownErrorException"),this.details=et}}class InvalidPDFException extends BaseException{constructor(g){super(g,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(g,et,ot){super(g,"ResponseException"),this.status=et,this.missing=ot}}class FormatError extends BaseException{constructor(g){super(g,"FormatError")}}class AbortException extends BaseException{constructor(g){super(g,"AbortException")}}function bytesToString(it){(typeof it!="object"||(it==null?void 0:it.length)===void 0)&&unreachable("Invalid argument for bytesToString");const g=it.length,et=8192;if(g<et)return String.fromCharCode.apply(null,it);const ot=[];for(let ct=0;ct<g;ct+=et){const ut=Math.min(ct+et,g),dt=it.subarray(ct,ut);ot.push(String.fromCharCode.apply(null,dt))}return ot.join("")}function stringToBytes(it){typeof it!="string"&&unreachable("Invalid argument for stringToBytes");const g=it.length,et=new Uint8Array(g);for(let ot=0;ot<g;++ot)et[ot]=it.charCodeAt(ot)&255;return et}function string32(it){return String.fromCharCode(it>>24&255,it>>16&255,it>>8&255,it&255)}function isLittleEndian(){const it=new Uint8Array(4);return it[0]=1,new Uint32Array(it.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:g,userAgent:et}=navigator;return shadow(this,"platform",{isAndroid:et.includes("Android"),isLinux:g.includes("Linux"),isMac:g.includes("Mac"),isWindows:g.includes("Win"),isFirefox:et.includes("Firefox")})}static get isCSSRoundSupported(){var g,et;return shadow(this,"isCSSRoundSupported",(et=(g=globalThis.CSS)==null?void 0:g.supports)==null?void 0:et.call(g,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),it=>it.toString(16).padStart(2,"0"));var Om,C1,J0,ZS;class Util{static makeHexColor(g,et,ot){return`#${hexNumbers[g]}${hexNumbers[et]}${hexNumbers[ot]}`}static domMatrixToTransform(g){return[g.a,g.b,g.c,g.d,g.e,g.f]}static scaleMinMax(g,et){let ot;g[0]?(g[0]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[0],et[2]*=g[0],g[3]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[3],et[3]*=g[3]):(ot=et[0],et[0]=et[1],et[1]=ot,ot=et[2],et[2]=et[3],et[3]=ot,g[1]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[1],et[3]*=g[1],g[2]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[2],et[2]*=g[2]),et[0]+=g[4],et[1]+=g[5],et[2]+=g[4],et[3]+=g[5]}static transform(g,et){return[g[0]*et[0]+g[2]*et[1],g[1]*et[0]+g[3]*et[1],g[0]*et[2]+g[2]*et[3],g[1]*et[2]+g[3]*et[3],g[0]*et[4]+g[2]*et[5]+g[4],g[1]*et[4]+g[3]*et[5]+g[5]]}static multiplyByDOMMatrix(g,et){return[g[0]*et.a+g[2]*et.b,g[1]*et.a+g[3]*et.b,g[0]*et.c+g[2]*et.d,g[1]*et.c+g[3]*et.d,g[0]*et.e+g[2]*et.f+g[4],g[1]*et.e+g[3]*et.f+g[5]]}static applyTransform(g,et,ot=0){const ct=g[ot],ut=g[ot+1];g[ot]=ct*et[0]+ut*et[2]+et[4],g[ot+1]=ct*et[1]+ut*et[3]+et[5]}static applyTransformToBezier(g,et,ot=0){const ct=et[0],ut=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5];for(let Tt=0;Tt<6;Tt+=2){const Rt=g[ot+Tt],jt=g[ot+Tt+1];g[ot+Tt]=Rt*ct+jt*dt+St,g[ot+Tt+1]=Rt*ut+jt*ft+kt}}static applyInverseTransform(g,et){const ot=g[0],ct=g[1],ut=et[0]*et[3]-et[1]*et[2];g[0]=(ot*et[3]-ct*et[2]+et[2]*et[5]-et[4]*et[3])/ut,g[1]=(-ot*et[1]+ct*et[0]+et[4]*et[1]-et[5]*et[0])/ut}static axialAlignedBoundingBox(g,et,ot){const ct=et[0],ut=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5],Tt=g[0],Rt=g[1],jt=g[2],$t=g[3];let Ft=ct*Tt+St,Ht=Ft,Kt=ct*jt+St,Bt=Kt,Ut=ft*Rt+kt,Yt=Ut,Jt=ft*$t+kt,Zt=Jt;if(ut!==0||dt!==0){const en=ut*Tt,tn=ut*jt,nn=dt*Rt,ln=dt*$t;Ft+=nn,Bt+=nn,Kt+=ln,Ht+=ln,Ut+=en,Zt+=en,Jt+=tn,Yt+=tn}ot[0]=Math.min(ot[0],Ft,Kt,Ht,Bt),ot[1]=Math.min(ot[1],Ut,Jt,Yt,Zt),ot[2]=Math.max(ot[2],Ft,Kt,Ht,Bt),ot[3]=Math.max(ot[3],Ut,Jt,Yt,Zt)}static inverseTransform(g){const et=g[0]*g[3]-g[1]*g[2];return[g[3]/et,-g[1]/et,-g[2]/et,g[0]/et,(g[2]*g[5]-g[4]*g[3])/et,(g[4]*g[1]-g[5]*g[0])/et]}static singularValueDecompose2dScale(g,et){const ot=g[0],ct=g[1],ut=g[2],dt=g[3],ft=ot**2+ct**2,St=ot*ut+ct*dt,kt=ut**2+dt**2,Tt=(ft+kt)/2,Rt=Math.sqrt(Tt**2-(ft*kt-St**2));et[0]=Math.sqrt(Tt+Rt||1),et[1]=Math.sqrt(Tt-Rt||1)}static normalizeRect(g){const et=g.slice(0);return g[0]>g[2]&&(et[0]=g[2],et[2]=g[0]),g[1]>g[3]&&(et[1]=g[3],et[3]=g[1]),et}static intersect(g,et){const ot=Math.max(Math.min(g[0],g[2]),Math.min(et[0],et[2])),ct=Math.min(Math.max(g[0],g[2]),Math.max(et[0],et[2]));if(ot>ct)return null;const ut=Math.max(Math.min(g[1],g[3]),Math.min(et[1],et[3])),dt=Math.min(Math.max(g[1],g[3]),Math.max(et[1],et[3]));return ut>dt?null:[ot,ut,ct,dt]}static pointBoundingBox(g,et,ot){ot[0]=Math.min(ot[0],g),ot[1]=Math.min(ot[1],et),ot[2]=Math.max(ot[2],g),ot[3]=Math.max(ot[3],et)}static rectBoundingBox(g,et,ot,ct,ut){ut[0]=Math.min(ut[0],g,ot),ut[1]=Math.min(ut[1],et,ct),ut[2]=Math.max(ut[2],g,ot),ut[3]=Math.max(ut[3],et,ct)}static bezierBoundingBox(g,et,ot,ct,ut,dt,ft,St,kt){kt[0]=Math.min(kt[0],g,ft),kt[1]=Math.min(kt[1],et,St),kt[2]=Math.max(kt[2],g,ft),kt[3]=Math.max(kt[3],et,St),bn(this,J0,ZS).call(this,g,ot,ut,ft,et,ct,dt,St,3*(-g+3*(ot-ut)+ft),6*(g-2*ot+ut),3*(ot-g),kt),bn(this,J0,ZS).call(this,g,ot,ut,ft,et,ct,dt,St,3*(-et+3*(ct-dt)+St),6*(et-2*ct+dt),3*(ct-et),kt)}}Om=new WeakSet,C1=function(g,et,ot,ct,ut,dt,ft,St,kt,Tt){if(kt<=0||kt>=1)return;const Rt=1-kt,jt=kt*kt,$t=jt*kt,Ft=Rt*(Rt*(Rt*g+3*kt*et)+3*jt*ot)+$t*ct,Ht=Rt*(Rt*(Rt*ut+3*kt*dt)+3*jt*ft)+$t*St;Tt[0]=Math.min(Tt[0],Ft),Tt[1]=Math.min(Tt[1],Ht),Tt[2]=Math.max(Tt[2],Ft),Tt[3]=Math.max(Tt[3],Ht)},J0=new WeakSet,ZS=function(g,et,ot,ct,ut,dt,ft,St,kt,Tt,Rt,jt){if(Math.abs(kt)<1e-12){Math.abs(Tt)>=1e-12&&bn(this,Om,C1).call(this,g,et,ot,ct,ut,dt,ft,St,-Rt/Tt,jt);return}const $t=Tt**2-4*Rt*kt;if($t<0)return;const Ft=Math.sqrt($t),Ht=2*kt;bn(this,Om,C1).call(this,g,et,ot,ct,ut,dt,ft,St,(-Tt+Ft)/Ht,jt),bn(this,Om,C1).call(this,g,et,ot,ct,ut,dt,ft,St,(-Tt-Ft)/Ht,jt)},cn(Util,Om),cn(Util,J0);function stringToUTF8String(it){return decodeURIComponent(escape(it))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(it){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),it.replaceAll(NormalizeRegex,(g,et,ot)=>et?et.normalize("NFKC"):NormalizationMap.get(ot))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const it=new Uint8Array(32);return crypto.getRandomValues(it),bytesToString(it)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(it,g,et){if(!Array.isArray(et)||et.length<2)return!1;const[ot,ct,...ut]=et;if(!it(ot)&&!Number.isInteger(ot)||!g(ct))return!1;const dt=ut.length;let ft=!0;switch(ct.name){case"XYZ":if(dt<2||dt>3)return!1;break;case"Fit":case"FitB":return dt===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(dt>1)return!1;break;case"FitR":if(dt!==4)return!1;ft=!1;break;default:return!1}for(const St of ut)if(!(typeof St=="number"||ft&&St===null))return!1;return!0}function MathClamp(it,g,et){return Math.min(Math.max(it,g),et)}function toBase64Util(it){return Uint8Array.prototype.toBase64?it.toBase64():btoa(bytesToString(it))}function fromBase64Util(it){return Uint8Array.fromBase64?Uint8Array.fromBase64(it):stringToBytes(atob(it))}typeof Promise.try!="function"&&(Promise.try=function(it,...g){return new Promise(et=>{et(it(...g))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(it){return it.reduce((g,et)=>g+et,0)});class XfaText{static textContent(g){const et=[],ot={items:et,styles:Object.create(null)};function ct(ut){var St;if(!ut)return;let dt=null;const ft=ut.name;if(ft==="#text")dt=ut.value;else if(XfaText.shouldBuildText(ft))(St=ut==null?void 0:ut.attributes)!=null&&St.textContent?dt=ut.attributes.textContent:ut.value&&(dt=ut.value);else return;if(dt!==null&&et.push({str:dt}),!!ut.children)for(const kt of ut.children)ct(kt)}return ct(g),ot}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}class XfaLayer{static setupStorage(g,et,ot,ct,ut){const dt=ct.getValue(et,{value:null});switch(ot.name){case"textarea":if(dt.value!==null&&(g.textContent=dt.value),ut==="print")break;g.addEventListener("input",ft=>{ct.setValue(et,{value:ft.target.value})});break;case"input":if(ot.attributes.type==="radio"||ot.attributes.type==="checkbox"){if(dt.value===ot.attributes.xfaOn?g.setAttribute("checked",!0):dt.value===ot.attributes.xfaOff&&g.removeAttribute("checked"),ut==="print")break;g.addEventListener("change",ft=>{ct.setValue(et,{value:ft.target.checked?ft.target.getAttribute("xfaOn"):ft.target.getAttribute("xfaOff")})})}else{if(dt.value!==null&&g.setAttribute("value",dt.value),ut==="print")break;g.addEventListener("input",ft=>{ct.setValue(et,{value:ft.target.value})})}break;case"select":if(dt.value!==null){g.setAttribute("value",dt.value);for(const ft of ot.children)ft.attributes.value===dt.value?ft.attributes.selected=!0:ft.attributes.hasOwnProperty("selected")&&delete ft.attributes.selected}g.addEventListener("input",ft=>{const St=ft.target.options,kt=St.selectedIndex===-1?"":St[St.selectedIndex].value;ct.setValue(et,{value:kt})});break}}static setAttributes({html:g,element:et,storage:ot=null,intent:ct,linkService:ut}){const{attributes:dt}=et,ft=g instanceof HTMLAnchorElement;dt.type==="radio"&&(dt.name=`${dt.name}-${ct}`);for(const[St,kt]of Object.entries(dt))if(kt!=null)switch(St){case"class":kt.length&&g.setAttribute(St,kt.join(" "));break;case"dataId":break;case"id":g.setAttribute("data-element-id",kt);break;case"style":Object.assign(g.style,kt);break;case"textContent":g.textContent=kt;break;default:(!ft||St!=="href"&&St!=="newWindow")&&g.setAttribute(St,kt)}ft&&ut.addLinkAttributes(g,dt.href,dt.newWindow),ot&&dt.dataId&&this.setupStorage(g,dt.dataId,et,ot)}static render(g){var Rt,jt;const et=g.annotationStorage,ot=g.linkService,ct=g.xfaHtml,ut=g.intent||"display",dt=document.createElement(ct.name);ct.attributes&&this.setAttributes({html:dt,element:ct,intent:ut,linkService:ot});const ft=ut!=="richText",St=g.div;if(St.append(dt),g.viewport){const $t=`matrix(${g.viewport.transform.join(",")})`;St.style.transform=$t}ft&&St.setAttribute("class","xfaLayer xfaFont");const kt=[];if(ct.children.length===0){if(ct.value){const $t=document.createTextNode(ct.value);dt.append($t),ft&&XfaText.shouldBuildText(ct.name)&&kt.push($t)}return{textDivs:kt}}const Tt=[[ct,-1,dt]];for(;Tt.length>0;){const[$t,Ft,Ht]=Tt.at(-1);if(Ft+1===$t.children.length){Tt.pop();continue}const Kt=$t.children[++Tt.at(-1)[1]];if(Kt===null)continue;const{name:Bt}=Kt;if(Bt==="#text"){const Yt=document.createTextNode(Kt.value);kt.push(Yt),Ht.append(Yt);continue}const Ut=(Rt=Kt==null?void 0:Kt.attributes)!=null&&Rt.xmlns?document.createElementNS(Kt.attributes.xmlns,Bt):document.createElement(Bt);if(Ht.append(Ut),Kt.attributes&&this.setAttributes({html:Ut,element:Kt,storage:et,intent:ut,linkService:ot}),((jt=Kt.children)==null?void 0:jt.length)>0)Tt.push([Kt,-1,Ut]);else if(Kt.value){const Yt=document.createTextNode(Kt.value);ft&&XfaText.shouldBuildText(Bt)&&kt.push(Yt),Ut.append(Yt)}}for(const $t of St.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))$t.setAttribute("readOnly",!0);return{textDivs:kt}}static update(g){const et=`matrix(${g.viewport.transform.join(",")})`;g.div.style.transform=et,g.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg",Gu=class Gu{};jn(Gu,"CSS",96),jn(Gu,"PDF",72),jn(Gu,"PDF_TO_CSS_UNITS",Gu.CSS/Gu.PDF);let PixelsPerInch=Gu;async function fetchData(it,g="text"){if(isValidFetchUrl(it,document.baseURI)){const et=await fetch(it);if(!et.ok)throw new Error(et.statusText);switch(g){case"arraybuffer":return et.arrayBuffer();case"blob":return et.blob();case"json":return et.json()}return et.text()}return new Promise((et,ot)=>{const ct=new XMLHttpRequest;ct.open("GET",it,!0),ct.responseType=g,ct.onreadystatechange=()=>{if(ct.readyState===XMLHttpRequest.DONE){if(ct.status===200||ct.status===0){switch(g){case"arraybuffer":case"blob":case"json":et(ct.response);return}et(ct.responseText);return}ot(new Error(ct.statusText))}},ct.send(null)})}class PageViewport{constructor({viewBox:g,userUnit:et,scale:ot,rotation:ct,offsetX:ut=0,offsetY:dt=0,dontFlip:ft=!1}){this.viewBox=g,this.userUnit=et,this.scale=ot,this.rotation=ct,this.offsetX=ut,this.offsetY=dt,ot*=et;const St=(g[2]+g[0])/2,kt=(g[3]+g[1])/2;let Tt,Rt,jt,$t;switch(ct%=360,ct<0&&(ct+=360),ct){case 180:Tt=-1,Rt=0,jt=0,$t=1;break;case 90:Tt=0,Rt=1,jt=1,$t=0;break;case 270:Tt=0,Rt=-1,jt=-1,$t=0;break;case 0:Tt=1,Rt=0,jt=0,$t=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ft&&(jt=-jt,$t=-$t);let Ft,Ht,Kt,Bt;Tt===0?(Ft=Math.abs(kt-g[1])*ot+ut,Ht=Math.abs(St-g[0])*ot+dt,Kt=(g[3]-g[1])*ot,Bt=(g[2]-g[0])*ot):(Ft=Math.abs(St-g[0])*ot+ut,Ht=Math.abs(kt-g[1])*ot+dt,Kt=(g[2]-g[0])*ot,Bt=(g[3]-g[1])*ot),this.transform=[Tt*ot,Rt*ot,jt*ot,$t*ot,Ft-Tt*ot*St-jt*ot*kt,Ht-Rt*ot*St-$t*ot*kt],this.width=Kt,this.height=Bt}get rawDims(){const g=this.viewBox;return shadow(this,"rawDims",{pageWidth:g[2]-g[0],pageHeight:g[3]-g[1],pageX:g[0],pageY:g[1]})}clone({scale:g=this.scale,rotation:et=this.rotation,offsetX:ot=this.offsetX,offsetY:ct=this.offsetY,dontFlip:ut=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ct,dontFlip:ut})}convertToViewportPoint(g,et){const ot=[g,et];return Util.applyTransform(ot,this.transform),ot}convertToViewportRectangle(g){const et=[g[0],g[1]];Util.applyTransform(et,this.transform);const ot=[g[2],g[3]];return Util.applyTransform(ot,this.transform),[et[0],et[1],ot[0],ot[1]]}convertToPdfPoint(g,et){const ot=[g,et];return Util.applyInverseTransform(ot,this.transform),ot}}class RenderingCancelledException extends BaseException{constructor(g,et=0){super(g,"RenderingCancelledException"),this.extraDelay=et}}function isDataScheme(it){const g=it.length;let et=0;for(;et<g&&it[et].trim()==="";)et++;return it.substring(et,et+5).toLowerCase()==="data:"}function isPdfFile(it){return typeof it=="string"&&/\.pdf$/i.test(it)}function getFilenameFromUrl(it){return[it]=it.split(/[#?]/,1),it.substring(it.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(it,g="document.pdf"){if(typeof it!="string")return g;if(isDataScheme(it))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),g;const ot=(ft=>{try{return new URL(ft)}catch{try{return new URL(decodeURIComponent(ft))}catch{try{return new URL(ft,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(ft),"https://foo.bar")}catch{return null}}}}})(it);if(!ot)return g;const ct=ft=>{try{let St=decodeURIComponent(ft);return St.includes("/")?(St=St.split("/").at(-1),St.test(/^\.pdf$/i)?St:ft):St}catch{return ft}},ut=/\.pdf$/i,dt=ot.pathname.split("/").at(-1);if(ut.test(dt))return ct(dt);if(ot.searchParams.size>0){const ft=Array.from(ot.searchParams.values()).reverse();for(const kt of ft)if(ut.test(kt))return ct(kt);const St=Array.from(ot.searchParams.keys()).reverse();for(const kt of St)if(ut.test(kt))return ct(kt)}if(ot.hash){const St=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(ot.hash);if(St)return ct(St[0])}return g}class StatTimer{constructor(){jn(this,"started",Object.create(null));jn(this,"times",[])}time(g){g in this.started&&warn(`Timer is already running for ${g}`),this.started[g]=Date.now()}timeEnd(g){g in this.started||warn(`Timer has not been started for ${g}`),this.times.push({name:g,start:this.started[g],end:Date.now()}),delete this.started[g]}toString(){const g=[];let et=0;for(const{name:ot}of this.times)et=Math.max(ot.length,et);for(const{name:ot,start:ct,end:ut}of this.times)g.push(`${ot.padEnd(et)} ${ut-ct}ms
`);return g.join("")}}function isValidFetchUrl(it,g){const et=g?URL.parse(it,g):URL.parse(it);return(et==null?void 0:et.protocol)==="http:"||(et==null?void 0:et.protocol)==="https:"}function noContextMenu(it){it.preventDefault()}function stopEvent(it){it.preventDefault(),it.stopPropagation()}function deprecated(it){console.log("Deprecated API usage: "+it)}var Z0;class PDFDateString{static toDateObject(g){if(g instanceof Date)return g;if(!g||typeof g!="string")return null;zt(this,Z0)||fn(this,Z0,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const et=zt(this,Z0).exec(g);if(!et)return null;const ot=parseInt(et[1],10);let ct=parseInt(et[2],10);ct=ct>=1&&ct<=12?ct-1:0;let ut=parseInt(et[3],10);ut=ut>=1&&ut<=31?ut:1;let dt=parseInt(et[4],10);dt=dt>=0&&dt<=23?dt:0;let ft=parseInt(et[5],10);ft=ft>=0&&ft<=59?ft:0;let St=parseInt(et[6],10);St=St>=0&&St<=59?St:0;const kt=et[7]||"Z";let Tt=parseInt(et[8],10);Tt=Tt>=0&&Tt<=23?Tt:0;let Rt=parseInt(et[9],10)||0;return Rt=Rt>=0&&Rt<=59?Rt:0,kt==="-"?(dt+=Tt,ft+=Rt):kt==="+"&&(dt-=Tt,ft-=Rt),new Date(Date.UTC(ot,ct,ut,dt,ft,St))}}Z0=new WeakMap,cn(PDFDateString,Z0,void 0);function getXfaPageViewport(it,{scale:g=1,rotation:et=0}){const{width:ot,height:ct}=it.attributes.style,ut=[0,0,parseInt(ot),parseInt(ct)];return new PageViewport({viewBox:ut,userUnit:1,scale:g,rotation:et})}function getRGB(it){if(it.startsWith("#")){const g=parseInt(it.slice(1),16);return[(g&16711680)>>16,(g&65280)>>8,g&255]}return it.startsWith("rgb(")?it.slice(4,-1).split(",").map(g=>parseInt(g)):it.startsWith("rgba(")?it.slice(5,-1).split(",").map(g=>parseInt(g)).slice(0,3):(warn(`Not a valid color format: "${it}"`),[0,0,0])}function getColorValues(it){const g=document.createElement("span");g.style.visibility="hidden",g.style.colorScheme="only light",document.body.append(g);for(const et of it.keys()){g.style.color=et;const ot=window.getComputedStyle(g).color;it.set(et,getRGB(ot))}g.remove()}function getCurrentTransform(it){const{a:g,b:et,c:ot,d:ct,e:ut,f:dt}=it.getTransform();return[g,et,ot,ct,ut,dt]}function getCurrentTransformInverse(it){const{a:g,b:et,c:ot,d:ct,e:ut,f:dt}=it.getTransform().invertSelf();return[g,et,ot,ct,ut,dt]}function setLayerDimensions(it,g,et=!1,ot=!0){if(g instanceof PageViewport){const{pageWidth:ct,pageHeight:ut}=g.rawDims,{style:dt}=it,ft=util_FeatureTest.isCSSRoundSupported,St=`var(--total-scale-factor) * ${ct}px`,kt=`var(--total-scale-factor) * ${ut}px`,Tt=ft?`round(down, ${St}, var(--scale-round-x))`:`calc(${St})`,Rt=ft?`round(down, ${kt}, var(--scale-round-y))`:`calc(${kt})`;!et||g.rotation%180===0?(dt.width=Tt,dt.height=Rt):(dt.width=Rt,dt.height=Tt)}ot&&it.setAttribute("data-main-rotation",g.rotation)}class OutputScale{constructor(){const{pixelRatio:g}=OutputScale;this.sx=g,this.sy=g}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(g,et,ot,ct,ut=-1){let dt=1/0,ft=1/0,St=1/0;ot=OutputScale.capPixels(ot,ut),ot>0&&(dt=Math.sqrt(ot/(g*et))),ct!==-1&&(ft=ct/g,St=ct/et);const kt=Math.min(dt,ft,St);return this.sx>kt||this.sy>kt?(this.sx=kt,this.sy=kt,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(g,et){if(et>=0){const ot=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+et/100));return g>0?Math.min(g,ot):ot}return g}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){var g;return shadow(this,"isDarkMode",!!((g=window==null?void 0:window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches))}}class CSSConstants{static get commentForegroundColor(){const g=document.createElement("span");g.classList.add("comment","sidebar");const{style:et}=g;et.width=et.height="0",et.display="none",et.color="var(--comment-fg-color)",document.body.append(g);const{color:ot}=window.getComputedStyle(g);return g.remove(),shadow(this,"commentForegroundColor",getRGB(ot))}}function applyOpacity(it,g,et,ot){ot=Math.min(Math.max(ot??1,0),1);const ct=255*(1-ot);return it=Math.round(it*ot+ct),g=Math.round(g*ot+ct),et=Math.round(et*ot+ct),[it,g,et]}function RGBToHSL(it,g){const et=it[0]/255,ot=it[1]/255,ct=it[2]/255,ut=Math.max(et,ot,ct),dt=Math.min(et,ot,ct),ft=(ut+dt)/2;if(ut===dt)g[0]=g[1]=0;else{const St=ut-dt;switch(g[1]=ft<.5?St/(ut+dt):St/(2-ut-dt),ut){case et:g[0]=((ot-ct)/St+(ot<ct?6:0))*60;break;case ot:g[0]=((ct-et)/St+2)*60;break;case ct:g[0]=((et-ot)/St+4)*60;break}}g[2]=ft}function HSLToRGB(it,g){const et=it[0],ot=it[1],ct=it[2],ut=(1-Math.abs(2*ct-1))*ot,dt=ut*(1-Math.abs(et/60%2-1)),ft=ct-ut/2;switch(Math.floor(et/60)){case 0:g[0]=ut+ft,g[1]=dt+ft,g[2]=ft;break;case 1:g[0]=dt+ft,g[1]=ut+ft,g[2]=ft;break;case 2:g[0]=ft,g[1]=ut+ft,g[2]=dt+ft;break;case 3:g[0]=ft,g[1]=dt+ft,g[2]=ut+ft;break;case 4:g[0]=dt+ft,g[1]=ft,g[2]=ut+ft;break;case 5:case 6:g[0]=ut+ft,g[1]=ft,g[2]=dt+ft;break}}function computeLuminance(it){return it<=.03928?it/12.92:((it+.055)/1.055)**2.4}function contrastRatio(it,g,et){HSLToRGB(it,et),et.map(computeLuminance);const ot=.2126*et[0]+.7152*et[1]+.0722*et[2];HSLToRGB(g,et),et.map(computeLuminance);const ct=.2126*et[0]+.7152*et[1]+.0722*et[2];return ot>ct?(ot+.05)/(ct+.05):(ct+.05)/(ot+.05)}const contrastCache=new Map;function findContrastColor(it,g){const et=it[0]+it[1]*256+it[2]*65536+g[0]*16777216+g[1]*4294967296+g[2]*1099511627776;let ot=contrastCache.get(et);if(ot)return ot;const ct=new Float32Array(9),ut=ct.subarray(0,3),dt=ct.subarray(3,6);RGBToHSL(it,dt);const ft=ct.subarray(6,9);RGBToHSL(g,ft);const St=ft[2]<.5,kt=St?12:4.5;if(dt[2]=St?Math.sqrt(dt[2]):1-Math.sqrt(1-dt[2]),contrastRatio(dt,ft,ut)<kt){let Tt,Rt;St?(Tt=dt[2],Rt=1):(Tt=0,Rt=dt[2]);const jt=.005;for(;Rt-Tt>jt;){const $t=dt[2]=(Tt+Rt)/2;St===contrastRatio(dt,ft,ut)<kt?Tt=$t:Rt=$t}dt[2]=St?Rt:Tt}return HSLToRGB(dt,ut),ot=Util.makeHexColor(Math.round(ut[0]*255),Math.round(ut[1]*255),Math.round(ut[2]*255)),contrastCache.set(et,ot),ot}function renderRichText({html:it,dir:g,className:et},ot){const ct=document.createDocumentFragment();if(typeof it=="string"){const ut=document.createElement("p");ut.dir=g||"auto";const dt=it.split(/(?:\r\n?|\n)/);for(let ft=0,St=dt.length;ft<St;++ft){const kt=dt[ft];ut.append(document.createTextNode(kt)),ft<St-1&&ut.append(document.createElement("br"))}ct.append(ut)}else XfaLayer.render({xfaHtml:it,div:ct,intent:"richText"});ct.firstChild.classList.add("richText",et),ot.append(ct)}var zl,Hl,Ps,Ms,Q0,Ul,Dm,Im,ev,iE,fA,sE,pA,oE,mA,Gl,km,Ku,N0;const Fo=class Fo{constructor(g){cn(this,sE);cn(this,oE);cn(this,Gl);cn(this,Ku);cn(this,zl,null);cn(this,Hl,null);cn(this,Ps,void 0);cn(this,Ms,null);cn(this,Q0,null);cn(this,Ul,null);cn(this,Dm,null);cn(this,Im,null);fn(this,Ps,g),zt(Fo,ev)||fn(Fo,ev,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const g=fn(this,zl,document.createElement("div"));g.classList.add("editToolbar","hidden"),g.setAttribute("role","toolbar");const et=zt(this,Ps)._uiManager._signal;et instanceof AbortSignal&&!et.aborted&&(g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.addEventListener("pointerdown",bn(Fo,iE,fA),{signal:et}));const ot=fn(this,Ms,document.createElement("div"));ot.className="buttons",g.append(ot);const ct=zt(this,Ps).toolbarPosition;if(ct){const{style:ut}=g,dt=zt(this,Ps)._uiManager.direction==="ltr"?1-ct[0]:ct[0];ut.insetInlineEnd=`${100*dt}%`,ut.top=`calc(${100*ct[1]}% + var(--editor-toolbar-vert-offset))`}return g}get div(){return zt(this,zl)}hide(){var g;zt(this,zl).classList.add("hidden"),(g=zt(this,Hl))==null||g.hideDropdown()}show(){var g,et;zt(this,zl).classList.remove("hidden"),(g=zt(this,Q0))==null||g.shown(),(et=zt(this,Ul))==null||et.shown()}addDeleteButton(){const{editorType:g,_uiManager:et}=zt(this,Ps),ot=document.createElement("button");ot.classList.add("basic","deleteButton"),ot.tabIndex=0,ot.setAttribute("data-l10n-id",zt(Fo,ev)[g]),bn(this,Gl,km).call(this,ot)&&ot.addEventListener("click",ct=>{et.delete()},{signal:et._signal}),zt(this,Ms).append(ot)}async addAltText(g){const et=await g.render();bn(this,Gl,km).call(this,et),zt(this,Ms).append(et,zt(this,Ku,N0)),fn(this,Q0,g)}addComment(g,et=null){if(zt(this,Ul))return;const ot=g.renderForToolbar();if(!ot)return;bn(this,Gl,km).call(this,ot);const ct=fn(this,Dm,zt(this,Ku,N0));et?(zt(this,Ms).insertBefore(ot,et),zt(this,Ms).insertBefore(ct,et)):zt(this,Ms).append(ot,ct),fn(this,Ul,g),g.toolbar=this}addColorPicker(g){if(zt(this,Hl))return;fn(this,Hl,g);const et=g.renderButton();bn(this,Gl,km).call(this,et),zt(this,Ms).append(et,zt(this,Ku,N0))}async addEditSignatureButton(g){const et=fn(this,Im,await g.renderEditButton(zt(this,Ps)));bn(this,Gl,km).call(this,et),zt(this,Ms).append(et,zt(this,Ku,N0))}removeButton(g){var et,ot;switch(g){case"comment":(et=zt(this,Ul))==null||et.removeToolbarCommentButton(),fn(this,Ul,null),(ot=zt(this,Dm))==null||ot.remove(),fn(this,Dm,null);break}}async addButton(g,et){switch(g){case"colorPicker":this.addColorPicker(et);break;case"altText":await this.addAltText(et);break;case"editSignature":await this.addEditSignatureButton(et);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(et);break}}async addButtonBefore(g,et,ot){const ct=zt(this,Ms).querySelector(ot);ct&&g==="comment"&&this.addComment(et,ct)}updateEditSignatureButton(g){zt(this,Im)&&(zt(this,Im).title=g)}remove(){var g;zt(this,zl).remove(),(g=zt(this,Hl))==null||g.destroy(),fn(this,Hl,null)}};zl=new WeakMap,Hl=new WeakMap,Ps=new WeakMap,Ms=new WeakMap,Q0=new WeakMap,Ul=new WeakMap,Dm=new WeakMap,Im=new WeakMap,ev=new WeakMap,iE=new WeakSet,fA=function(g){g.stopPropagation()},sE=new WeakSet,pA=function(g){zt(this,Ps)._focusEventsAllowed=!1,stopEvent(g)},oE=new WeakSet,mA=function(g){zt(this,Ps)._focusEventsAllowed=!0,stopEvent(g)},Gl=new WeakSet,km=function(g){const et=zt(this,Ps)._uiManager._signal;return!(et instanceof AbortSignal)||et.aborted?!1:(g.addEventListener("focusin",bn(this,sE,pA).bind(this),{capture:!0,signal:et}),g.addEventListener("focusout",bn(this,oE,mA).bind(this),{capture:!0,signal:et}),g.addEventListener("contextmenu",noContextMenu,{signal:et}),!0)},Ku=new WeakSet,N0=function(){const g=document.createElement("div");return g.className="divider",g},cn(Fo,iE),cn(Fo,ev,null);let EditorToolbar=Fo;var tv,Yu,Vo,aE,gA,lE,yA,nv,QS;class FloatingToolbar{constructor(g){cn(this,aE);cn(this,lE);cn(this,nv);cn(this,tv,null);cn(this,Yu,null);cn(this,Vo,void 0);fn(this,Vo,g)}show(g,et,ot){const[ct,ut]=bn(this,lE,yA).call(this,et,ot),{style:dt}=zt(this,Yu)||fn(this,Yu,bn(this,aE,gA).call(this));g.append(zt(this,Yu)),dt.insetInlineEnd=`${100*ct}%`,dt.top=`calc(${100*ut}% + var(--editor-toolbar-vert-offset))`}hide(){zt(this,Yu).remove()}}tv=new WeakMap,Yu=new WeakMap,Vo=new WeakMap,aE=new WeakSet,gA=function(){const g=fn(this,Yu,document.createElement("div"));g.className="editToolbar",g.setAttribute("role","toolbar");const et=zt(this,Vo)._signal;et instanceof AbortSignal&&!et.aborted&&g.addEventListener("contextmenu",noContextMenu,{signal:et});const ot=fn(this,tv,document.createElement("div"));return ot.className="buttons",g.append(ot),zt(this,Vo).hasCommentManager()&&bn(this,nv,QS).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{zt(this,Vo).commentSelection("floating_button")}),bn(this,nv,QS).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{zt(this,Vo).highlightSelection("floating_button")}),g},lE=new WeakSet,yA=function(g,et){let ot=0,ct=0;for(const ut of g){const dt=ut.y+ut.height;if(dt<ot)continue;const ft=ut.x+(et?ut.width:0);if(dt>ot){ct=ft,ot=dt;continue}et?ft>ct&&(ct=ft):ft<ct&&(ct=ft)}return[et?1-ct:ct,ot]},nv=new WeakSet,QS=function(g,et,ot,ct){const ut=document.createElement("button");ut.classList.add("basic",g),ut.tabIndex=0,ut.setAttribute("data-l10n-id",et);const dt=document.createElement("span");ut.append(dt),dt.className="visuallyHidden",dt.setAttribute("data-l10n-id",ot);const ft=zt(this,Vo)._signal;ft instanceof AbortSignal&&!ft.aborted&&(ut.addEventListener("contextmenu",noContextMenu,{signal:ft}),ut.addEventListener("click",ct,{signal:ft})),zt(this,tv).append(ut)};function bindEvents(it,g,et){for(const ot of et)g.addEventListener(ot,it[ot].bind(it))}var cE;class IdManager{constructor(){cn(this,cE,0)}get id(){return`${AnnotationEditorPrefix}${kr(this,cE)._++}`}}cE=new WeakMap;var Lm,rv,Hr,$m,_1;const tA=class tA{constructor(){cn(this,$m);cn(this,Lm,getUuid());cn(this,rv,0);cn(this,Hr,null)}static get _isSVGFittingCanvas(){const g='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ot=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),ct=new Image;ct.src=g;const ut=ct.decode().then(()=>(ot.drawImage(ct,0,0,1,1,0,0,1,3),new Uint32Array(ot.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",ut)}async getFromFile(g){const{lastModified:et,name:ot,size:ct,type:ut}=g;return bn(this,$m,_1).call(this,`${et}_${ot}_${ct}_${ut}`,g)}async getFromUrl(g){return bn(this,$m,_1).call(this,g,g)}async getFromBlob(g,et){const ot=await et;return bn(this,$m,_1).call(this,g,ot)}async getFromId(g){zt(this,Hr)||fn(this,Hr,new Map);const et=zt(this,Hr).get(g);if(!et)return null;if(et.bitmap)return et.refCounter+=1,et;if(et.file)return this.getFromFile(et.file);if(et.blobPromise){const{blobPromise:ot}=et;return delete et.blobPromise,this.getFromBlob(et.id,ot)}return this.getFromUrl(et.url)}getFromCanvas(g,et){zt(this,Hr)||fn(this,Hr,new Map);let ot=zt(this,Hr).get(g);if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;const ct=new OffscreenCanvas(et.width,et.height);return ct.getContext("2d").drawImage(et,0,0),ot={bitmap:ct.transferToImageBitmap(),id:`image_${zt(this,Lm)}_${kr(this,rv)._++}`,refCounter:1,isSvg:!1},zt(this,Hr).set(g,ot),zt(this,Hr).set(ot.id,ot),ot}getSvgUrl(g){const et=zt(this,Hr).get(g);return et!=null&&et.isSvg?et.svgUrl:null}deleteId(g){var ct;zt(this,Hr)||fn(this,Hr,new Map);const et=zt(this,Hr).get(g);if(!et||(et.refCounter-=1,et.refCounter!==0))return;const{bitmap:ot}=et;if(!et.url&&!et.file){const ut=new OffscreenCanvas(ot.width,ot.height);ut.getContext("bitmaprenderer").transferFromImageBitmap(ot),et.blobPromise=ut.convertToBlob()}(ct=ot.close)==null||ct.call(ot),et.bitmap=null}isValidId(g){return g.startsWith(`image_${zt(this,Lm)}_`)}};Lm=new WeakMap,rv=new WeakMap,Hr=new WeakMap,$m=new WeakSet,_1=async function(g,et){zt(this,Hr)||fn(this,Hr,new Map);let ot=zt(this,Hr).get(g);if(ot===null)return null;if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;try{ot||(ot={bitmap:null,id:`image_${zt(this,Lm)}_${kr(this,rv)._++}`,refCounter:0,isSvg:!1});let ct;if(typeof et=="string"?(ot.url=et,ct=await fetchData(et,"blob")):et instanceof File?ct=ot.file=et:et instanceof Blob&&(ct=et),ct.type==="image/svg+xml"){const ut=tA._isSVGFittingCanvas,dt=new FileReader,ft=new Image,St=new Promise((kt,Tt)=>{ft.onload=()=>{ot.bitmap=ft,ot.isSvg=!0,kt()},dt.onload=async()=>{const Rt=ot.svgUrl=dt.result;ft.src=await ut?`${Rt}#svgView(preserveAspectRatio(none))`:Rt},ft.onerror=dt.onerror=Tt});dt.readAsDataURL(ct),await St}else ot.bitmap=await createImageBitmap(ct);ot.refCounter=1}catch(ct){warn(ct),ot=null}return zt(this,Hr).set(g,ot),ot&&zt(this,Hr).set(ot.id,ot),ot};let ImageManager=tA;var Er,Wl,iv,yr;class CommandManager{constructor(g=128){cn(this,Er,[]);cn(this,Wl,!1);cn(this,iv,void 0);cn(this,yr,-1);fn(this,iv,g)}add({cmd:g,undo:et,post:ot,mustExec:ct,type:ut=NaN,overwriteIfSameType:dt=!1,keepUndo:ft=!1}){if(ct&&g(),zt(this,Wl))return;const St={cmd:g,undo:et,post:ot,type:ut};if(zt(this,yr)===-1){zt(this,Er).length>0&&(zt(this,Er).length=0),fn(this,yr,0),zt(this,Er).push(St);return}if(dt&&zt(this,Er)[zt(this,yr)].type===ut){ft&&(St.undo=zt(this,Er)[zt(this,yr)].undo),zt(this,Er)[zt(this,yr)]=St;return}const kt=zt(this,yr)+1;kt===zt(this,iv)?zt(this,Er).splice(0,1):(fn(this,yr,kt),kt<zt(this,Er).length&&zt(this,Er).splice(kt)),zt(this,Er).push(St)}undo(){if(zt(this,yr)===-1)return;fn(this,Wl,!0);const{undo:g,post:et}=zt(this,Er)[zt(this,yr)];g(),et==null||et(),fn(this,Wl,!1),fn(this,yr,zt(this,yr)-1)}redo(){if(zt(this,yr)<zt(this,Er).length-1){fn(this,yr,zt(this,yr)+1),fn(this,Wl,!0);const{cmd:g,post:et}=zt(this,Er)[zt(this,yr)];g(),et==null||et(),fn(this,Wl,!1)}}hasSomethingToUndo(){return zt(this,yr)!==-1}hasSomethingToRedo(){return zt(this,yr)<zt(this,Er).length-1}cleanType(g){if(zt(this,yr)!==-1){for(let et=zt(this,yr);et>=0;et--)if(zt(this,Er)[et].type!==g){zt(this,Er).splice(et+1,zt(this,yr)-et),fn(this,yr,et);return}zt(this,Er).length=0,fn(this,yr,-1)}}destroy(){fn(this,Er,null)}}Er=new WeakMap,Wl=new WeakMap,iv=new WeakMap,yr=new WeakMap;var uE,vA;class KeyboardManager{constructor(g){cn(this,uE);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:et}=util_FeatureTest.platform;for(const[ot,ct,ut={}]of g)for(const dt of ot){const ft=dt.startsWith("mac+");et&&ft?(this.callbacks.set(dt.slice(4),{callback:ct,options:ut}),this.allKeys.add(dt.split("+").at(-1))):!et&&!ft&&(this.callbacks.set(dt,{callback:ct,options:ut}),this.allKeys.add(dt.split("+").at(-1)))}}exec(g,et){if(!this.allKeys.has(et.key))return;const ot=this.callbacks.get(bn(this,uE,vA).call(this,et));if(!ot)return;const{callback:ct,options:{bubbles:ut=!1,args:dt=[],checker:ft=null}}=ot;ft&&!ft(g,et)||(ct.bind(g,...dt,et)(),ut||stopEvent(et))}}uE=new WeakSet,vA=function(g){g.altKey&&this.buffer.push("alt"),g.ctrlKey&&this.buffer.push("ctrl"),g.metaKey&&this.buffer.push("meta"),g.shiftKey&&this.buffer.push("shift"),this.buffer.push(g.key);const et=this.buffer.join("+");return this.buffer.length=0,et};const hE=class hE{get _colors(){const g=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(g),shadow(this,"_colors",g)}convert(g){const et=getRGB(g);if(!window.matchMedia("(forced-colors: active)").matches)return et;for(const[ot,ct]of this._colors)if(ct.every((ut,dt)=>ut===et[dt]))return hE._colorsMapping.get(ot);return et}getHexCode(g){const et=this._colors.get(g);return et?Util.makeHexColor(...et):g}};jn(hE,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=hE;var Fm,ds,Bm,vr,Tr,Vm,Ns,zm,js,Ur,Kl,Yl,Hm,Xl,ho,Os,Xu,sv,ov,Um,av,fo,Jl,Gm,Zl,po,dE,Ql,Wm,lv,_c,Ju,qm,eu,cv,wr,Qn,zo,tu,nu,uv,Km,hv,ru,mo,Ho,dv,fv,Ds,Ym,R1,pv,ew,fE,xA,pE,bA,Zu,j0,mE,EA,gE,SA,yE,wA,mv,tw,vE,kA,gv,nw,yv,rw,xE,AA,Ir,Xr,Us,Lo,bE,TA,EE,CA,vv,iw,SE,_A,Qu,O0,xv,sw;const Pm=class Pm{constructor(g,et,ot,ct,ut,dt,ft,St,kt,Tt,Rt,jt,$t,Ft,Ht,Kt){cn(this,Ym);cn(this,pv);cn(this,fE);cn(this,pE);cn(this,Zu);cn(this,mE);cn(this,gE);cn(this,yE);cn(this,mv);cn(this,vE);cn(this,gv);cn(this,yv);cn(this,xE);cn(this,Ir);cn(this,Us);cn(this,bE);cn(this,EE);cn(this,vv);cn(this,SE);cn(this,Qu);cn(this,xv);cn(this,Fm,new AbortController);cn(this,ds,null);cn(this,Bm,null);cn(this,vr,new Map);cn(this,Tr,new Map);cn(this,Vm,null);cn(this,Ns,null);cn(this,zm,null);cn(this,js,new CommandManager);cn(this,Ur,null);cn(this,Kl,null);cn(this,Yl,null);cn(this,Hm,0);cn(this,Xl,new Set);cn(this,ho,null);cn(this,Os,null);cn(this,Xu,new Set);jn(this,"_editorUndoBar",null);cn(this,sv,!1);cn(this,ov,!1);cn(this,Um,!1);cn(this,av,null);cn(this,fo,null);cn(this,Jl,null);cn(this,Gm,null);cn(this,Zl,!1);cn(this,po,null);cn(this,dE,new IdManager);cn(this,Ql,!1);cn(this,Wm,!1);cn(this,lv,!1);cn(this,_c,null);cn(this,Ju,null);cn(this,qm,null);cn(this,eu,null);cn(this,cv,null);cn(this,wr,AnnotationEditorType.NONE);cn(this,Qn,new Set);cn(this,zo,null);cn(this,tu,null);cn(this,nu,null);cn(this,uv,null);cn(this,Km,null);cn(this,hv,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});cn(this,ru,[0,0]);cn(this,mo,null);cn(this,Ho,null);cn(this,dv,null);cn(this,fv,null);cn(this,Ds,null);const Bt=this._signal=zt(this,Fm).signal;fn(this,Ho,g),fn(this,dv,et),fn(this,fv,ot),fn(this,Vm,ct),fn(this,Ur,ut),fn(this,tu,dt),fn(this,Km,St),this._eventBus=ft,ft._on("editingaction",this.onEditingAction.bind(this),{signal:Bt}),ft._on("pagechanging",this.onPageChanging.bind(this),{signal:Bt}),ft._on("scalechanging",this.onScaleChanging.bind(this),{signal:Bt}),ft._on("rotationchanging",this.onRotationChanging.bind(this),{signal:Bt}),ft._on("setpreference",this.onSetPreference.bind(this),{signal:Bt}),ft._on("switchannotationeditorparams",Ut=>this.updateParams(Ut.type,Ut.value),{signal:Bt}),window.addEventListener("pointerdown",()=>{fn(this,Wm,!0)},{capture:!0,signal:Bt}),window.addEventListener("pointerup",()=>{fn(this,Wm,!1)},{capture:!0,signal:Bt}),bn(this,mE,EA).call(this),bn(this,xE,AA).call(this),bn(this,mv,tw).call(this),fn(this,Ns,St.annotationStorage),fn(this,av,St.filterFactory),fn(this,nu,kt),fn(this,Gm,Tt||null),fn(this,sv,Rt),fn(this,ov,jt),fn(this,Um,$t),fn(this,cv,Ft||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=Ht||null,this._supportsPinchToZoom=Kt!==!1,ut==null||ut.setSidebarUiManager(this)}static get _keyboardManager(){const g=Pm.prototype,et=dt=>zt(dt,Ho).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&dt.hasSomethingToControl(),ot=(dt,{target:ft})=>{if(ft instanceof HTMLInputElement){const{type:St}=ft;return St!=="text"&&St!=="number"}return!0},ct=this.TRANSLATE_SMALL,ut=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],g.selectAll,{checker:ot}],[["ctrl+z","mac+meta+z"],g.undo,{checker:ot}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],g.redo,{checker:ot}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],g.delete,{checker:ot}],[["Enter","mac+Enter"],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&zt(dt,Ho).contains(ft)&&!dt.isEnterHandled}],[[" ","mac+ "],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&zt(dt,Ho).contains(document.activeElement)}],[["Escape","mac+Escape"],g.unselectAll],[["ArrowLeft","mac+ArrowLeft"],g.translateSelectedEditors,{args:[-ct,0],checker:et}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g.translateSelectedEditors,{args:[-ut,0],checker:et}],[["ArrowRight","mac+ArrowRight"],g.translateSelectedEditors,{args:[ct,0],checker:et}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g.translateSelectedEditors,{args:[ut,0],checker:et}],[["ArrowUp","mac+ArrowUp"],g.translateSelectedEditors,{args:[0,-ct],checker:et}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g.translateSelectedEditors,{args:[0,-ut],checker:et}],[["ArrowDown","mac+ArrowDown"],g.translateSelectedEditors,{args:[0,ct],checker:et}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g.translateSelectedEditors,{args:[0,ut],checker:et}]]))}destroy(){var g,et,ot,ct,ut,dt,ft,St,kt;(g=zt(this,Ds))==null||g.resolve(),fn(this,Ds,null),(et=zt(this,Fm))==null||et.abort(),fn(this,Fm,null),this._signal=null;for(const Tt of zt(this,Tr).values())Tt.destroy();zt(this,Tr).clear(),zt(this,vr).clear(),zt(this,Xu).clear(),(ot=zt(this,eu))==null||ot.clear(),fn(this,ds,null),zt(this,Qn).clear(),zt(this,js).destroy(),(ct=zt(this,Vm))==null||ct.destroy(),(ut=zt(this,Ur))==null||ut.destroy(),(dt=zt(this,tu))==null||dt.destroy(),(ft=zt(this,po))==null||ft.hide(),fn(this,po,null),(St=zt(this,qm))==null||St.destroy(),fn(this,qm,null),fn(this,Bm,null),zt(this,fo)&&(clearTimeout(zt(this,fo)),fn(this,fo,null)),zt(this,mo)&&(clearTimeout(zt(this,mo)),fn(this,mo,null)),(kt=this._editorUndoBar)==null||kt.destroy(),fn(this,Km,null)}combinedSignal(g){return AbortSignal.any([this._signal,g.signal])}get mlManager(){return zt(this,cv)}get useNewAltTextFlow(){return zt(this,ov)}get useNewAltTextWhenAddingImage(){return zt(this,Um)}get hcmFilter(){return shadow(this,"hcmFilter",zt(this,nu)?zt(this,av).addHCMFilter(zt(this,nu).foreground,zt(this,nu).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(zt(this,Ho)).direction)}get _highlightColors(){return shadow(this,"_highlightColors",zt(this,Gm)?new Map(zt(this,Gm).split(",").map(g=>(g=g.split("=").map(et=>et.trim()),g[1]=g[1].toUpperCase(),g))):null)}get highlightColors(){const{_highlightColors:g}=this;if(!g)return shadow(this,"highlightColors",null);const et=new Map,ot=!!zt(this,nu);for(const[ct,ut]of g){const dt=ct.endsWith("_HCM");if(ot&&dt){et.set(ct.replace("_HCM",""),ut);continue}!ot&&!dt&&et.set(ct,ut)}return shadow(this,"highlightColors",et)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,g=>g.reverse())):null)}getNonHCMColor(g){if(!this._highlightColors)return g;const et=this.highlightColorNames.get(g);return this._highlightColors.get(et)||g}getNonHCMColorName(g){return this.highlightColorNames.get(g)||g}setCurrentDrawingSession(g){g?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),fn(this,Yl,g)}setMainHighlightColorPicker(g){fn(this,qm,g)}editAltText(g,et=!1){var ot;(ot=zt(this,Vm))==null||ot.editAltText(this,g,et)}hasCommentManager(){return!!zt(this,Ur)}editComment(g,et,ot,ct){var ut;(ut=zt(this,Ur))==null||ut.showDialog(this,g,et,ot,ct)}selectComment(g,et){const ot=zt(this,Tr).get(g),ct=ot==null?void 0:ot.getEditorByUID(et);ct==null||ct.toggleComment(!0,!0)}updateComment(g){var et;(et=zt(this,Ur))==null||et.updateComment(g.getData())}updatePopupColor(g){var et;(et=zt(this,Ur))==null||et.updatePopupColor(g)}removeComment(g){var et;(et=zt(this,Ur))==null||et.removeComments([g.uid])}toggleComment(g,et,ot=void 0){var ct;(ct=zt(this,Ur))==null||ct.toggleCommentPopup(g,et,ot)}makeCommentColor(g,et){var ot;return g&&((ot=zt(this,Ur))==null?void 0:ot.makeCommentColor(g,et))||null}getCommentDialogElement(){var g;return((g=zt(this,Ur))==null?void 0:g.dialogElement)||null}async waitForEditorsRendered(g){if(zt(this,Tr).has(g-1))return;const{resolve:et,promise:ot}=Promise.withResolvers(),ct=ut=>{ut.pageNumber===g&&(this._eventBus._off("editorsrendered",ct),et())};this._eventBus.on("editorsrendered",ct),await ot}getSignature(g){var et;(et=zt(this,tu))==null||et.getSignature({uiManager:this,editor:g})}get signatureManager(){return zt(this,tu)}switchToMode(g,et){this._eventBus.on("annotationeditormodechanged",et,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:g})}setPreference(g,et){this._eventBus.dispatch("setpreference",{source:this,name:g,value:et})}onSetPreference({name:g,value:et}){switch(g){case"enableNewAltTextWhenAddingImage":fn(this,Um,et);break}}onPageChanging({pageNumber:g}){fn(this,Hm,g-1)}focusMainContainer(){zt(this,Ho).focus()}findParent(g,et){for(const ot of zt(this,Tr).values()){const{x:ct,y:ut,width:dt,height:ft}=ot.div.getBoundingClientRect();if(g>=ct&&g<=ct+dt&&et>=ut&&et<=ut+ft)return ot}return null}disableUserSelect(g=!1){zt(this,dv).classList.toggle("noUserSelect",g)}addShouldRescale(g){zt(this,Xu).add(g)}removeShouldRescale(g){zt(this,Xu).delete(g)}onScaleChanging({scale:g}){var et;this.commitOrRemove(),this.viewParameters.realScale=g*PixelsPerInch.PDF_TO_CSS_UNITS;for(const ot of zt(this,Xu))ot.onScaleChanging();(et=zt(this,Yl))==null||et.onScaleChanging()}onRotationChanging({pagesRotation:g}){this.commitOrRemove(),this.viewParameters.rotation=g}highlightSelection(g="",et=!1){const ot=document.getSelection();if(!ot||ot.isCollapsed)return;const{anchorNode:ct,anchorOffset:ut,focusNode:dt,focusOffset:ft}=ot,St=ot.toString(),Tt=bn(this,Ym,R1).call(this,ot).closest(".textLayer"),Rt=this.getSelectionBoxes(Tt);if(!Rt)return;ot.empty();const jt=bn(this,pv,ew).call(this,Tt),$t=zt(this,wr)===AnnotationEditorType.NONE,Ft=()=>{const Ht=jt==null?void 0:jt.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:g,boxes:Rt,anchorNode:ct,anchorOffset:ut,focusNode:dt,focusOffset:ft,text:St});$t&&this.showAllEditors("highlight",!0,!0),et&&(Ht==null||Ht.editComment())};if($t){this.switchToMode(AnnotationEditorType.HIGHLIGHT,Ft);return}Ft()}commentSelection(g=""){this.highlightSelection(g,!0)}getAndRemoveDataFromAnnotationStorage(g){if(!zt(this,Ns))return null;const et=`${AnnotationEditorPrefix}${g}`,ot=zt(this,Ns).getRawValue(et);return ot&&zt(this,Ns).remove(et),ot}addToAnnotationStorage(g){!g.isEmpty()&&zt(this,Ns)&&!zt(this,Ns).has(g.id)&&zt(this,Ns).setValue(g.id,g)}a11yAlert(g,et=null){const ot=zt(this,fv);ot&&(ot.setAttribute("data-l10n-id",g),et?ot.setAttribute("data-l10n-args",JSON.stringify(et)):ot.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,zt(this,Zl)&&(fn(this,Zl,!1),bn(this,Zu,j0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:g}=document;for(const et of zt(this,Qn))if(et.div.contains(g)){fn(this,Ju,[et,g]),et._focusEventsAllowed=!1;break}}focus(){if(!zt(this,Ju))return;const[g,et]=zt(this,Ju);fn(this,Ju,null),et.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:this._signal}),et.focus()}addEditListeners(){bn(this,mv,tw).call(this),bn(this,gv,nw).call(this)}removeEditListeners(){bn(this,vE,kA).call(this),bn(this,yv,rw).call(this)}dragOver(g){for(const{type:et}of g.dataTransfer.items)for(const ot of zt(this,Os))if(ot.isHandlingMimeForPasting(et)){g.dataTransfer.dropEffect="copy",g.preventDefault();return}}drop(g){for(const et of g.dataTransfer.items)for(const ot of zt(this,Os))if(ot.isHandlingMimeForPasting(et.type)){ot.paste(et,this.currentLayer),g.preventDefault();return}}copy(g){var ot;if(g.preventDefault(),(ot=zt(this,ds))==null||ot.commitOrRemove(),!this.hasSelection)return;const et=[];for(const ct of zt(this,Qn)){const ut=ct.serialize(!0);ut&&et.push(ut)}et.length!==0&&g.clipboardData.setData("application/pdfjs",JSON.stringify(et))}cut(g){this.copy(g),this.delete()}async paste(g){g.preventDefault();const{clipboardData:et}=g;for(const ut of et.items)for(const dt of zt(this,Os))if(dt.isHandlingMimeForPasting(ut.type)){dt.paste(ut,this.currentLayer);return}let ot=et.getData("application/pdfjs");if(!ot)return;try{ot=JSON.parse(ot)}catch(ut){warn(`paste: "${ut.message}".`);return}if(!Array.isArray(ot))return;this.unselectAll();const ct=this.currentLayer;try{const ut=[];for(const St of ot){const kt=await ct.deserialize(St);if(!kt)return;ut.push(kt)}const dt=()=>{for(const St of ut)bn(this,vv,iw).call(this,St);bn(this,xv,sw).call(this,ut)},ft=()=>{for(const St of ut)St.remove()};this.addCommands({cmd:dt,undo:ft,mustExec:!0})}catch(ut){warn(`paste: "${ut.message}".`)}}keydown(g){!this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!0),zt(this,wr)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&Pm._keyboardManager.exec(this,g)}keyup(g){this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!1,zt(this,Zl)&&(fn(this,Zl,!1),bn(this,Zu,j0).call(this,"main_toolbar")))}onEditingAction({name:g}){switch(g){case"undo":case"redo":case"delete":case"selectAll":this[g]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(g){g?(bn(this,gE,SA).call(this),bn(this,gv,nw).call(this),bn(this,Ir,Xr).call(this,{isEditing:zt(this,wr)!==AnnotationEditorType.NONE,isEmpty:bn(this,Qu,O0).call(this),hasSomethingToUndo:zt(this,js).hasSomethingToUndo(),hasSomethingToRedo:zt(this,js).hasSomethingToRedo(),hasSelectedEditor:!1})):(bn(this,yE,wA).call(this),bn(this,yv,rw).call(this),bn(this,Ir,Xr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(g){if(!zt(this,Os)){fn(this,Os,g);for(const et of zt(this,Os))bn(this,Us,Lo).call(this,et.defaultPropertiesToUpdate)}}getId(){return zt(this,dE).id}get currentLayer(){return zt(this,Tr).get(zt(this,Hm))}getLayer(g){return zt(this,Tr).get(g)}get currentPageIndex(){return zt(this,Hm)}addLayer(g){zt(this,Tr).set(g.pageIndex,g),zt(this,Ql)?g.enable():g.disable()}removeLayer(g){zt(this,Tr).delete(g.pageIndex)}async updateMode(g,et=null,ot=!1,ct=!1,ut=!1){var dt,ft,St,kt,Tt,Rt;if(zt(this,wr)!==g&&!(zt(this,Ds)&&(await zt(this,Ds).promise,!zt(this,Ds)))){if(fn(this,Ds,Promise.withResolvers()),(dt=zt(this,Yl))==null||dt.commitOrRemove(),zt(this,wr)===AnnotationEditorType.POPUP&&((ft=zt(this,Ur))==null||ft.hideSidebar()),(St=zt(this,Ur))==null||St.destroyPopup(),fn(this,wr,g),g===AnnotationEditorType.NONE){this.setEditingState(!1),bn(this,EE,CA).call(this);for(const jt of zt(this,vr).values())jt.hideStandaloneCommentButton();(kt=this._editorUndoBar)==null||kt.hide(),this.toggleComment(null),zt(this,Ds).resolve();return}for(const jt of zt(this,vr).values())jt.addStandaloneCommentButton();g===AnnotationEditorType.SIGNATURE&&await((Tt=zt(this,tu))==null?void 0:Tt.loadSignatures()),this.setEditingState(!0),await bn(this,bE,TA).call(this),this.unselectAll();for(const jt of zt(this,Tr).values())jt.updateMode(g);if(g===AnnotationEditorType.POPUP){zt(this,Bm)||fn(this,Bm,await zt(this,Km).getAnnotationsByType(new Set(zt(this,Os).map(Ft=>Ft._editorType))));const jt=new Set,$t=[];for(const Ft of zt(this,vr).values()){const{annotationElementId:Ht,hasComment:Kt,deleted:Bt}=Ft;Ht&&jt.add(Ht),Kt&&!Bt&&$t.push(Ft.getData())}for(const Ft of zt(this,Bm)){const{id:Ht,popupRef:Kt,contentsObj:Bt}=Ft;Kt&&(Bt!=null&&Bt.str)&&!jt.has(Ht)&&!zt(this,Xl).has(Ht)&&$t.push(Ft)}(Rt=zt(this,Ur))==null||Rt.showSidebar($t)}if(!et){ot&&this.addNewEditorFromKeyboard(),zt(this,Ds).resolve();return}for(const jt of zt(this,vr).values())jt.uid===et?(this.setSelected(jt),ut?jt.editComment():ct?jt.enterInEditMode():jt.focus()):jt.unselect();zt(this,Ds).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(g){g.mode!==zt(this,wr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...g})}updateParams(g,et){if(zt(this,Os)){switch(g){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(et);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(zt(this,uv)||fn(this,uv,new Map)).set(g,et),this.showAllEditors("highlight",et);break}if(this.hasSelection)for(const ot of zt(this,Qn))ot.updateParams(g,et);else for(const ot of zt(this,Os))ot.updateDefaultParams(g,et)}}showAllEditors(g,et,ot=!1){var ut;for(const dt of zt(this,vr).values())dt.editorType===g&&dt.show(et);(((ut=zt(this,uv))==null?void 0:ut.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==et&&bn(this,Us,Lo).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,et]])}enableWaiting(g=!1){if(zt(this,lv)!==g){fn(this,lv,g);for(const et of zt(this,Tr).values())g?et.disableClick():et.enableClick(),et.div.classList.toggle("waiting",g)}}*getEditors(g){for(const et of zt(this,vr).values())et.pageIndex===g&&(yield et)}getEditor(g){return zt(this,vr).get(g)}addEditor(g){zt(this,vr).set(g.id,g)}removeEditor(g){var et,ot;g.div.contains(document.activeElement)&&(zt(this,fo)&&clearTimeout(zt(this,fo)),fn(this,fo,setTimeout(()=>{this.focusMainContainer(),fn(this,fo,null)},0))),zt(this,vr).delete(g.id),g.annotationElementId&&((et=zt(this,eu))==null||et.delete(g.annotationElementId)),this.unselect(g),(!g.annotationElementId||!zt(this,Xl).has(g.annotationElementId))&&((ot=zt(this,Ns))==null||ot.remove(g.id))}addDeletedAnnotationElement(g){zt(this,Xl).add(g.annotationElementId),this.addChangedExistingAnnotation(g),g.deleted=!0}isDeletedAnnotationElement(g){return zt(this,Xl).has(g)}removeDeletedAnnotationElement(g){zt(this,Xl).delete(g.annotationElementId),this.removeChangedExistingAnnotation(g),g.deleted=!1}setActiveEditor(g){zt(this,ds)!==g&&(fn(this,ds,g),g&&bn(this,Us,Lo).call(this,g.propertiesToUpdate))}updateUI(g){zt(this,SE,_A)===g&&bn(this,Us,Lo).call(this,g.propertiesToUpdate)}updateUIForDefaultProperties(g){bn(this,Us,Lo).call(this,g.defaultPropertiesToUpdate)}toggleSelected(g){if(zt(this,Qn).has(g)){zt(this,Qn).delete(g),g.unselect(),bn(this,Ir,Xr).call(this,{hasSelectedEditor:this.hasSelection});return}zt(this,Qn).add(g),g.select(),bn(this,Us,Lo).call(this,g.propertiesToUpdate),bn(this,Ir,Xr).call(this,{hasSelectedEditor:!0})}setSelected(g){var et;this.updateToolbar({mode:g.mode,editId:g.id}),(et=zt(this,Yl))==null||et.commitOrRemove();for(const ot of zt(this,Qn))ot!==g&&ot.unselect();zt(this,Qn).clear(),zt(this,Qn).add(g),g.select(),bn(this,Us,Lo).call(this,g.propertiesToUpdate),bn(this,Ir,Xr).call(this,{hasSelectedEditor:!0})}isSelected(g){return zt(this,Qn).has(g)}get firstSelectedEditor(){return zt(this,Qn).values().next().value}unselect(g){g.unselect(),zt(this,Qn).delete(g),bn(this,Ir,Xr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return zt(this,Qn).size!==0}get isEnterHandled(){return zt(this,Qn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var g;zt(this,js).undo(),bn(this,Ir,Xr).call(this,{hasSomethingToUndo:zt(this,js).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:bn(this,Qu,O0).call(this)}),(g=this._editorUndoBar)==null||g.hide()}redo(){zt(this,js).redo(),bn(this,Ir,Xr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:zt(this,js).hasSomethingToRedo(),isEmpty:bn(this,Qu,O0).call(this)})}addCommands(g){zt(this,js).add(g),bn(this,Ir,Xr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:bn(this,Qu,O0).call(this)})}cleanUndoStack(g){zt(this,js).cleanType(g)}delete(){var ut;this.commitOrRemove();const g=(ut=this.currentLayer)==null?void 0:ut.endDrawingSession(!0);if(!this.hasSelection&&!g)return;const et=g?[g]:[...zt(this,Qn)],ot=()=>{var dt;(dt=this._editorUndoBar)==null||dt.show(ct,et.length===1?et[0].editorType:et.length);for(const ft of et)ft.remove()},ct=()=>{for(const dt of et)bn(this,vv,iw).call(this,dt)};this.addCommands({cmd:ot,undo:ct,mustExec:!0})}commitOrRemove(){var g;(g=zt(this,ds))==null||g.commitOrRemove()}hasSomethingToControl(){return zt(this,ds)||this.hasSelection}selectAll(){for(const g of zt(this,Qn))g.commit();bn(this,xv,sw).call(this,zt(this,vr).values())}unselectAll(){var g;if(!(zt(this,ds)&&(zt(this,ds).commitOrRemove(),zt(this,wr)!==AnnotationEditorType.NONE))&&!((g=zt(this,Yl))!=null&&g.commitOrRemove())&&this.hasSelection){for(const et of zt(this,Qn))et.unselect();zt(this,Qn).clear(),bn(this,Ir,Xr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(g,et,ot=!1){if(ot||this.commitOrRemove(),!this.hasSelection)return;zt(this,ru)[0]+=g,zt(this,ru)[1]+=et;const[ct,ut]=zt(this,ru),dt=[...zt(this,Qn)],ft=1e3;zt(this,mo)&&clearTimeout(zt(this,mo)),fn(this,mo,setTimeout(()=>{fn(this,mo,null),zt(this,ru)[0]=zt(this,ru)[1]=0,this.addCommands({cmd:()=>{for(const St of dt)zt(this,vr).has(St.id)&&(St.translateInPage(ct,ut),St.translationDone())},undo:()=>{for(const St of dt)zt(this,vr).has(St.id)&&(St.translateInPage(-ct,-ut),St.translationDone())},mustExec:!1})},ft));for(const St of dt)St.translateInPage(g,et),St.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),fn(this,ho,new Map);for(const g of zt(this,Qn))zt(this,ho).set(g,{savedX:g.x,savedY:g.y,savedPageIndex:g.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!zt(this,ho))return!1;this.disableUserSelect(!1);const g=zt(this,ho);fn(this,ho,null);let et=!1;for(const[{x:ct,y:ut,pageIndex:dt},ft]of g)ft.newX=ct,ft.newY=ut,ft.newPageIndex=dt,et||(et=ct!==ft.savedX||ut!==ft.savedY||dt!==ft.savedPageIndex);if(!et)return!1;const ot=(ct,ut,dt,ft)=>{if(zt(this,vr).has(ct.id)){const St=zt(this,Tr).get(ft);St?ct._setParentAndPosition(St,ut,dt):(ct.pageIndex=ft,ct.x=ut,ct.y=dt)}};return this.addCommands({cmd:()=>{for(const[ct,{newX:ut,newY:dt,newPageIndex:ft}]of g)ot(ct,ut,dt,ft)},undo:()=>{for(const[ct,{savedX:ut,savedY:dt,savedPageIndex:ft}]of g)ot(ct,ut,dt,ft)},mustExec:!0}),!0}dragSelectedEditors(g,et){if(zt(this,ho))for(const ot of zt(this,ho).keys())ot.drag(g,et)}rebuild(g){if(g.parent===null){const et=this.getLayer(g.pageIndex);et?(et.changeParent(g),et.addOrRebuild(g)):(this.addEditor(g),this.addToAnnotationStorage(g),g.rebuild())}else g.parent.addOrRebuild(g)}get isEditorHandlingKeyboard(){var g;return((g=this.getActive())==null?void 0:g.shouldGetKeyboardEvents())||zt(this,Qn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(g){return zt(this,ds)===g}getActive(){return zt(this,ds)}getMode(){return zt(this,wr)}isEditingMode(){return zt(this,wr)!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(g){if(!g)return null;const et=document.getSelection();for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++)if(!g.contains(et.getRangeAt(kt).commonAncestorContainer))return null;const{x:ot,y:ct,width:ut,height:dt}=g.getBoundingClientRect();let ft;switch(g.getAttribute("data-main-rotation")){case"90":ft=(kt,Tt,Rt,jt)=>({x:(Tt-ct)/dt,y:1-(kt+Rt-ot)/ut,width:jt/dt,height:Rt/ut});break;case"180":ft=(kt,Tt,Rt,jt)=>({x:1-(kt+Rt-ot)/ut,y:1-(Tt+jt-ct)/dt,width:Rt/ut,height:jt/dt});break;case"270":ft=(kt,Tt,Rt,jt)=>({x:1-(Tt+jt-ct)/dt,y:(kt-ot)/ut,width:jt/dt,height:Rt/ut});break;default:ft=(kt,Tt,Rt,jt)=>({x:(kt-ot)/ut,y:(Tt-ct)/dt,width:Rt/ut,height:jt/dt});break}const St=[];for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++){const Rt=et.getRangeAt(kt);if(!Rt.collapsed)for(const{x:jt,y:$t,width:Ft,height:Ht}of Rt.getClientRects())Ft===0||Ht===0||St.push(ft(jt,$t,Ft,Ht))}return St.length===0?null:St}addChangedExistingAnnotation({annotationElementId:g,id:et}){(zt(this,zm)||fn(this,zm,new Map)).set(g,et)}removeChangedExistingAnnotation({annotationElementId:g}){var et;(et=zt(this,zm))==null||et.delete(g)}renderAnnotationElement(g){var ct;const et=(ct=zt(this,zm))==null?void 0:ct.get(g.data.id);if(!et)return;const ot=zt(this,Ns).getRawValue(et);ot&&(zt(this,wr)===AnnotationEditorType.NONE&&!ot.hasBeenModified||ot.renderAnnotationElement(g))}setMissingCanvas(g,et,ot){var ut;const ct=(ut=zt(this,eu))==null?void 0:ut.get(g);ct&&(ct.setCanvas(et,ot),zt(this,eu).delete(g))}addMissingCanvas(g,et){(zt(this,eu)||fn(this,eu,new Map)).set(g,et)}};Fm=new WeakMap,ds=new WeakMap,Bm=new WeakMap,vr=new WeakMap,Tr=new WeakMap,Vm=new WeakMap,Ns=new WeakMap,zm=new WeakMap,js=new WeakMap,Ur=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,Hm=new WeakMap,Xl=new WeakMap,ho=new WeakMap,Os=new WeakMap,Xu=new WeakMap,sv=new WeakMap,ov=new WeakMap,Um=new WeakMap,av=new WeakMap,fo=new WeakMap,Jl=new WeakMap,Gm=new WeakMap,Zl=new WeakMap,po=new WeakMap,dE=new WeakMap,Ql=new WeakMap,Wm=new WeakMap,lv=new WeakMap,_c=new WeakMap,Ju=new WeakMap,qm=new WeakMap,eu=new WeakMap,cv=new WeakMap,wr=new WeakMap,Qn=new WeakMap,zo=new WeakMap,tu=new WeakMap,nu=new WeakMap,uv=new WeakMap,Km=new WeakMap,hv=new WeakMap,ru=new WeakMap,mo=new WeakMap,Ho=new WeakMap,dv=new WeakMap,fv=new WeakMap,Ds=new WeakMap,Ym=new WeakSet,R1=function({anchorNode:g}){return g.nodeType===Node.TEXT_NODE?g.parentElement:g},pv=new WeakSet,ew=function(g){const{currentLayer:et}=this;if(et.hasTextLayer(g))return et;for(const ot of zt(this,Tr).values())if(ot.hasTextLayer(g))return ot;return null},fE=new WeakSet,xA=function(){const g=document.getSelection();if(!g||g.isCollapsed)return;const ot=bn(this,Ym,R1).call(this,g).closest(".textLayer"),ct=this.getSelectionBoxes(ot);ct&&(zt(this,po)||fn(this,po,new FloatingToolbar(this)),zt(this,po).show(ot,ct,this.direction==="ltr"))},pE=new WeakSet,bA=function(){var ut,dt,ft;const g=document.getSelection();if(!g||g.isCollapsed){zt(this,zo)&&((ut=zt(this,po))==null||ut.hide(),fn(this,zo,null),bn(this,Ir,Xr).call(this,{hasSelectedText:!1}));return}const{anchorNode:et}=g;if(et===zt(this,zo))return;const ct=bn(this,Ym,R1).call(this,g).closest(".textLayer");if(!ct){zt(this,zo)&&((dt=zt(this,po))==null||dt.hide(),fn(this,zo,null),bn(this,Ir,Xr).call(this,{hasSelectedText:!1}));return}if((ft=zt(this,po))==null||ft.hide(),fn(this,zo,et),bn(this,Ir,Xr).call(this,{hasSelectedText:!0}),!(zt(this,wr)!==AnnotationEditorType.HIGHLIGHT&&zt(this,wr)!==AnnotationEditorType.NONE)&&(zt(this,wr)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),fn(this,Zl,this.isShiftKeyDown),!this.isShiftKeyDown)){const St=zt(this,wr)===AnnotationEditorType.HIGHLIGHT?bn(this,pv,ew).call(this,ct):null;if(St==null||St.toggleDrawing(),zt(this,Wm)){const kt=new AbortController,Tt=this.combinedSignal(kt),Rt=jt=>{jt.type==="pointerup"&&jt.button!==0||(kt.abort(),St==null||St.toggleDrawing(!0),jt.type==="pointerup"&&bn(this,Zu,j0).call(this,"main_toolbar"))};window.addEventListener("pointerup",Rt,{signal:Tt}),window.addEventListener("blur",Rt,{signal:Tt})}else St==null||St.toggleDrawing(!0),bn(this,Zu,j0).call(this,"main_toolbar")}},Zu=new WeakSet,j0=function(g=""){zt(this,wr)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(g):zt(this,sv)&&bn(this,fE,xA).call(this)},mE=new WeakSet,EA=function(){document.addEventListener("selectionchange",bn(this,pE,bA).bind(this),{signal:this._signal})},gE=new WeakSet,SA=function(){if(zt(this,Jl))return;fn(this,Jl,new AbortController);const g=this.combinedSignal(zt(this,Jl));window.addEventListener("focus",this.focus.bind(this),{signal:g}),window.addEventListener("blur",this.blur.bind(this),{signal:g})},yE=new WeakSet,wA=function(){var g;(g=zt(this,Jl))==null||g.abort(),fn(this,Jl,null)},mv=new WeakSet,tw=function(){if(zt(this,_c))return;fn(this,_c,new AbortController);const g=this.combinedSignal(zt(this,_c));window.addEventListener("keydown",this.keydown.bind(this),{signal:g}),window.addEventListener("keyup",this.keyup.bind(this),{signal:g})},vE=new WeakSet,kA=function(){var g;(g=zt(this,_c))==null||g.abort(),fn(this,_c,null)},gv=new WeakSet,nw=function(){if(zt(this,Kl))return;fn(this,Kl,new AbortController);const g=this.combinedSignal(zt(this,Kl));document.addEventListener("copy",this.copy.bind(this),{signal:g}),document.addEventListener("cut",this.cut.bind(this),{signal:g}),document.addEventListener("paste",this.paste.bind(this),{signal:g})},yv=new WeakSet,rw=function(){var g;(g=zt(this,Kl))==null||g.abort(),fn(this,Kl,null)},xE=new WeakSet,AA=function(){const g=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:g}),document.addEventListener("drop",this.drop.bind(this),{signal:g})},Ir=new WeakSet,Xr=function(g){Object.entries(g).some(([ot,ct])=>zt(this,hv)[ot]!==ct)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(zt(this,hv),g)}),zt(this,wr)===AnnotationEditorType.HIGHLIGHT&&g.hasSelectedEditor===!1&&bn(this,Us,Lo).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Us=new WeakSet,Lo=function(g){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:g})},bE=new WeakSet,TA=async function(){if(!zt(this,Ql)){fn(this,Ql,!0);const g=[];for(const et of zt(this,Tr).values())g.push(et.enable());await Promise.all(g);for(const et of zt(this,vr).values())et.enable()}},EE=new WeakSet,CA=function(){if(this.unselectAll(),zt(this,Ql)){fn(this,Ql,!1);for(const g of zt(this,Tr).values())g.disable();for(const g of zt(this,vr).values())g.disable()}},vv=new WeakSet,iw=function(g){const et=zt(this,Tr).get(g.pageIndex);et?et.addOrRebuild(g):(this.addEditor(g),this.addToAnnotationStorage(g))},SE=new WeakSet,_A=function(){let g=null;for(g of zt(this,Qn));return g},Qu=new WeakSet,O0=function(){if(zt(this,vr).size===0)return!0;if(zt(this,vr).size===1)for(const g of zt(this,vr).values())return g.isEmpty();return!1},xv=new WeakSet,sw=function(g){for(const et of zt(this,Qn))et.unselect();zt(this,Qn).clear();for(const et of g)et.isEmpty()||(zt(this,Qn).add(et),et.select());bn(this,Ir,Xr).call(this,{hasSelectedEditor:this.hasSelection})},jn(Pm,"TRANSLATE_SMALL",1),jn(Pm,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=Pm;var _r,go,Gs,Xm,yo,fs,Jm,vo,ns,Uo,_h,xo,iu,_d,D0,Zm,P1;const Jr=class Jr{constructor(g){cn(this,_d);cn(this,Zm);cn(this,_r,null);cn(this,go,!1);cn(this,Gs,null);cn(this,Xm,null);cn(this,yo,null);cn(this,fs,null);cn(this,Jm,!1);cn(this,vo,null);cn(this,ns,null);cn(this,Uo,null);cn(this,_h,null);cn(this,xo,!1);fn(this,ns,g),fn(this,xo,g._uiManager.useNewAltTextFlow),zt(Jr,iu)||fn(Jr,iu,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(g){Jr._l10n??(Jr._l10n=g)}async render(){const g=fn(this,Gs,document.createElement("button"));g.className="altText",g.tabIndex="0";const et=fn(this,Xm,document.createElement("span"));g.append(et),zt(this,xo)?(g.classList.add("new"),g.setAttribute("data-l10n-id",zt(Jr,iu).missing),et.setAttribute("data-l10n-id",zt(Jr,iu)["missing-label"])):(g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const ot=zt(this,ns)._uiManager._signal;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),g.addEventListener("pointerdown",ut=>ut.stopPropagation(),{signal:ot});const ct=ut=>{ut.preventDefault(),zt(this,ns)._uiManager.editAltText(zt(this,ns)),zt(this,xo)&&zt(this,ns)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:zt(this,_d,D0)}})};return g.addEventListener("click",ct,{capture:!0,signal:ot}),g.addEventListener("keydown",ut=>{ut.target===g&&ut.key==="Enter"&&(fn(this,Jm,!0),ct(ut))},{signal:ot}),await bn(this,Zm,P1).call(this),g}finish(){zt(this,Gs)&&(zt(this,Gs).focus({focusVisible:zt(this,Jm)}),fn(this,Jm,!1))}isEmpty(){return zt(this,xo)?zt(this,_r)===null:!zt(this,_r)&&!zt(this,go)}hasData(){return zt(this,xo)?zt(this,_r)!==null||!!zt(this,Uo):this.isEmpty()}get guessedText(){return zt(this,Uo)}async setGuessedText(g){zt(this,_r)===null&&(fn(this,Uo,g),fn(this,_h,await Jr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:g})),bn(this,Zm,P1).call(this))}toggleAltTextBadge(g=!1){var et;if(!zt(this,xo)||zt(this,_r)){(et=zt(this,vo))==null||et.remove(),fn(this,vo,null);return}if(!zt(this,vo)){const ot=fn(this,vo,document.createElement("div"));ot.className="noAltTextBadge",zt(this,ns).div.append(ot)}zt(this,vo).classList.toggle("hidden",!g)}serialize(g){let et=zt(this,_r);return!g&&zt(this,Uo)===et&&(et=zt(this,_h)),{altText:et,decorative:zt(this,go),guessedText:zt(this,Uo),textWithDisclaimer:zt(this,_h)}}get data(){return{altText:zt(this,_r),decorative:zt(this,go)}}set data({altText:g,decorative:et,guessedText:ot,textWithDisclaimer:ct,cancel:ut=!1}){ot&&(fn(this,Uo,ot),fn(this,_h,ct)),!(zt(this,_r)===g&&zt(this,go)===et)&&(ut||(fn(this,_r,g),fn(this,go,et)),bn(this,Zm,P1).call(this))}toggle(g=!1){zt(this,Gs)&&(!g&&zt(this,fs)&&(clearTimeout(zt(this,fs)),fn(this,fs,null)),zt(this,Gs).disabled=!g)}shown(){zt(this,ns)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:zt(this,_d,D0)}})}destroy(){var g,et;(g=zt(this,Gs))==null||g.remove(),fn(this,Gs,null),fn(this,Xm,null),fn(this,yo,null),(et=zt(this,vo))==null||et.remove(),fn(this,vo,null)}};_r=new WeakMap,go=new WeakMap,Gs=new WeakMap,Xm=new WeakMap,yo=new WeakMap,fs=new WeakMap,Jm=new WeakMap,vo=new WeakMap,ns=new WeakMap,Uo=new WeakMap,_h=new WeakMap,xo=new WeakMap,iu=new WeakMap,_d=new WeakSet,D0=function(){return zt(this,_r)&&"added"||zt(this,_r)===null&&this.guessedText&&"review"||"missing"},Zm=new WeakSet,P1=async function(){var ct,ut,dt;const g=zt(this,Gs);if(!g)return;if(zt(this,xo)){if(g.classList.toggle("done",!!zt(this,_r)),g.setAttribute("data-l10n-id",zt(Jr,iu)[zt(this,_d,D0)]),(ct=zt(this,Xm))==null||ct.setAttribute("data-l10n-id",zt(Jr,iu)[`${zt(this,_d,D0)}-label`]),!zt(this,_r)){(ut=zt(this,yo))==null||ut.remove();return}}else{if(!zt(this,_r)&&!zt(this,go)){g.classList.remove("done"),(dt=zt(this,yo))==null||dt.remove();return}g.classList.add("done"),g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let et=zt(this,yo);if(!et){fn(this,yo,et=document.createElement("span")),et.className="tooltip",et.setAttribute("role","tooltip"),et.id=`alt-text-tooltip-${zt(this,ns).id}`;const ft=100,St=zt(this,ns)._uiManager._signal;St.addEventListener("abort",()=>{clearTimeout(zt(this,fs)),fn(this,fs,null)},{once:!0}),g.addEventListener("mouseenter",()=>{fn(this,fs,setTimeout(()=>{fn(this,fs,null),zt(this,yo).classList.add("show"),zt(this,ns)._reportTelemetry({action:"alt_text_tooltip"})},ft))},{signal:St}),g.addEventListener("mouseleave",()=>{var kt;zt(this,fs)&&(clearTimeout(zt(this,fs)),fn(this,fs,null)),(kt=zt(this,yo))==null||kt.classList.remove("show")},{signal:St})}zt(this,go)?et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(et.removeAttribute("data-l10n-id"),et.textContent=zt(this,_r)),et.parentNode||g.append(et);const ot=zt(this,ns).getElementForAltText();ot==null||ot.setAttribute("aria-describedby",et.id)},cn(Jr,iu,null),jn(Jr,"_l10n",null);let AltText=Jr;var Lr,Is,_f,hr,bv,ep,Ws,tp,np,rp,Ev,ow;class Comment{constructor(g){cn(this,Ev);cn(this,Lr,null);cn(this,Is,null);cn(this,_f,!1);cn(this,hr,null);cn(this,bv,null);cn(this,ep,null);cn(this,Ws,null);cn(this,tp,null);cn(this,np,!1);cn(this,rp,null);fn(this,hr,g)}renderForToolbar(){const g=fn(this,Is,document.createElement("button"));return g.className="comment",bn(this,Ev,ow).call(this,g,!1)}renderForStandalone(){const g=fn(this,Lr,document.createElement("button"));g.className="annotationCommentButton";const et=zt(this,hr).commentButtonPosition;if(et){const{style:ot}=g;ot.insetInlineEnd=`calc(${100*(zt(this,hr)._uiManager.direction==="ltr"?1-et[0]:et[0])}% - var(--comment-button-dim))`,ot.top=`calc(${100*et[1]}% - var(--comment-button-dim))`;const ct=zt(this,hr).commentButtonColor;ct&&(ot.backgroundColor=ct)}return bn(this,Ev,ow).call(this,g,!0)}focusButton(){setTimeout(()=>{var g;(g=zt(this,Lr)??zt(this,Is))==null||g.focus()},0)}onUpdatedColor(){if(!zt(this,Lr))return;const g=zt(this,hr).commentButtonColor;g&&(zt(this,Lr).style.backgroundColor=g),zt(this,hr)._uiManager.updatePopupColor(zt(this,hr))}get commentButtonWidth(){var g;return(((g=zt(this,Lr))==null?void 0:g.getBoundingClientRect().width)??0)/zt(this,hr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(zt(this,rp))return zt(this,rp);if(!zt(this,Lr))return null;const{x:g,y:et,height:ot}=zt(this,Lr).getBoundingClientRect(),{x:ct,y:ut,width:dt,height:ft}=zt(this,hr).parent.boundingClientRect;return[(g-ct)/dt,(et+ot-ut)/ft]}set commentPopupPositionInLayer(g){fn(this,rp,g)}hasDefaultPopupPosition(){return zt(this,rp)===null}removeStandaloneCommentButton(){var g;(g=zt(this,Lr))==null||g.remove(),fn(this,Lr,null)}removeToolbarCommentButton(){var g;(g=zt(this,Is))==null||g.remove(),fn(this,Is,null)}setCommentButtonStates({selected:g,hasPopup:et}){zt(this,Lr)&&(zt(this,Lr).classList.toggle("selected",g),zt(this,Lr).ariaExpanded=et)}edit(g){const et=this.commentPopupPositionInLayer;let ot,ct;if(et)[ot,ct]=et;else{[ot,ct]=zt(this,hr).commentButtonPosition;const{width:Tt,height:Rt,x:jt,y:$t}=zt(this,hr);ot=jt+ot*Tt,ct=$t+ct*Rt}const ut=zt(this,hr).parent.boundingClientRect,{x:dt,y:ft,width:St,height:kt}=ut;zt(this,hr)._uiManager.editComment(zt(this,hr),dt+ot*St,ft+ct*kt,{...g,parentDimensions:ut})}finish(){zt(this,Is)&&(zt(this,Is).focus({focusVisible:zt(this,_f)}),fn(this,_f,!1))}isDeleted(){return zt(this,np)||zt(this,Ws)===""}isEmpty(){return zt(this,Ws)===null}hasBeenEdited(){return this.isDeleted()||zt(this,Ws)!==zt(this,bv)}serialize(){return this.data}get data(){return{text:zt(this,Ws),richText:zt(this,ep),date:zt(this,tp),deleted:this.isDeleted()}}set data(g){if(g!==zt(this,Ws)&&fn(this,ep,null),g===null){fn(this,Ws,""),fn(this,np,!0);return}fn(this,Ws,g),fn(this,tp,new Date),fn(this,np,!1)}setInitialText(g,et=null){fn(this,bv,g),this.data=g,fn(this,tp,null),fn(this,ep,et)}shown(){}destroy(){var g,et;(g=zt(this,Is))==null||g.remove(),fn(this,Is,null),(et=zt(this,Lr))==null||et.remove(),fn(this,Lr,null),fn(this,Ws,""),fn(this,ep,null),fn(this,tp,null),fn(this,hr,null),fn(this,_f,!1),fn(this,np,!1)}}Lr=new WeakMap,Is=new WeakMap,_f=new WeakMap,hr=new WeakMap,bv=new WeakMap,ep=new WeakMap,Ws=new WeakMap,tp=new WeakMap,np=new WeakMap,rp=new WeakMap,Ev=new WeakSet,ow=function(g,et){if(!zt(this,hr)._uiManager.hasCommentManager())return null;g.tabIndex="0",g.ariaHasPopup="dialog",et?(g.ariaControls="commentPopup",g.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(g.ariaControlsElements=[zt(this,hr)._uiManager.getCommentDialogElement()],g.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const ot=zt(this,hr)._uiManager._signal;if(!(ot instanceof AbortSignal)||ot.aborted)return g;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),et&&(g.addEventListener("focusin",ut=>{zt(this,hr)._focusEventsAllowed=!1,stopEvent(ut)},{capture:!0,signal:ot}),g.addEventListener("focusout",ut=>{zt(this,hr)._focusEventsAllowed=!0,stopEvent(ut)},{capture:!0,signal:ot})),g.addEventListener("pointerdown",ut=>ut.stopPropagation(),{signal:ot});const ct=ut=>{ut.preventDefault(),g===zt(this,Is)?this.edit():zt(this,hr).toggleComment(!0)};return g.addEventListener("click",ct,{capture:!0,signal:ot}),g.addEventListener("keydown",ut=>{ut.target===g&&ut.key==="Enter"&&(fn(this,_f,!0),ct(ut))},{signal:ot}),g.addEventListener("pointerenter",()=>{zt(this,hr).toggleComment(!1,!0)},{signal:ot}),g.addEventListener("pointerleave",()=>{zt(this,hr).toggleComment(!1,!1)},{signal:ot}),g};var Qm,sp,Sv,wv,kv,Av,Tv,Go,ap,Wo,lp,qo,wE,RA,kE,PA,AE,MA;const nA=class nA{constructor({container:g,isPinchingDisabled:et=null,isPinchingStopped:ot=null,onPinchStart:ct=null,onPinching:ut=null,onPinchEnd:dt=null,signal:ft}){cn(this,wE);cn(this,kE);cn(this,AE);cn(this,Qm,void 0);cn(this,sp,!1);cn(this,Sv,null);cn(this,wv,void 0);cn(this,kv,void 0);cn(this,Av,void 0);cn(this,Tv,void 0);cn(this,Go,null);cn(this,ap,void 0);cn(this,Wo,null);cn(this,lp,void 0);cn(this,qo,null);fn(this,Qm,g),fn(this,Sv,ot),fn(this,wv,et),fn(this,kv,ct),fn(this,Av,ut),fn(this,Tv,dt),fn(this,lp,new AbortController),fn(this,ap,AbortSignal.any([ft,zt(this,lp).signal])),g.addEventListener("touchstart",bn(this,wE,RA).bind(this),{passive:!1,signal:zt(this,ap)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var g,et;(g=zt(this,lp))==null||g.abort(),fn(this,lp,null),(et=zt(this,Go))==null||et.abort(),fn(this,Go,null)}};Qm=new WeakMap,sp=new WeakMap,Sv=new WeakMap,wv=new WeakMap,kv=new WeakMap,Av=new WeakMap,Tv=new WeakMap,Go=new WeakMap,ap=new WeakMap,Wo=new WeakMap,lp=new WeakMap,qo=new WeakMap,wE=new WeakSet,RA=function(g){var ct,ut,dt;if((ct=zt(this,wv))!=null&&ct.call(this))return;if(g.touches.length===1){if(zt(this,Go))return;const ft=fn(this,Go,new AbortController),St=AbortSignal.any([zt(this,ap),ft.signal]),kt=zt(this,Qm),Tt={capture:!0,signal:St,passive:!1},Rt=jt=>{var $t;jt.pointerType==="touch"&&(($t=zt(this,Go))==null||$t.abort(),fn(this,Go,null))};kt.addEventListener("pointerdown",jt=>{jt.pointerType==="touch"&&(stopEvent(jt),Rt(jt))},Tt),kt.addEventListener("pointerup",Rt,Tt),kt.addEventListener("pointercancel",Rt,Tt);return}if(!zt(this,qo)){fn(this,qo,new AbortController);const ft=AbortSignal.any([zt(this,ap),zt(this,qo).signal]),St=zt(this,Qm),kt={signal:ft,capture:!1,passive:!1};St.addEventListener("touchmove",bn(this,kE,PA).bind(this),kt);const Tt=bn(this,AE,MA).bind(this);St.addEventListener("touchend",Tt,kt),St.addEventListener("touchcancel",Tt,kt),kt.capture=!0,St.addEventListener("pointerdown",stopEvent,kt),St.addEventListener("pointermove",stopEvent,kt),St.addEventListener("pointercancel",stopEvent,kt),St.addEventListener("pointerup",stopEvent,kt),(ut=zt(this,kv))==null||ut.call(this)}if(stopEvent(g),g.touches.length!==2||(dt=zt(this,Sv))!=null&&dt.call(this)){fn(this,Wo,null);return}let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]),fn(this,Wo,{touch0X:et.screenX,touch0Y:et.screenY,touch1X:ot.screenX,touch1Y:ot.screenY})},kE=new WeakSet,PA=function(g){var Jt;if(!zt(this,Wo)||g.touches.length!==2)return;stopEvent(g);let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]);const{screenX:ct,screenY:ut}=et,{screenX:dt,screenY:ft}=ot,St=zt(this,Wo),{touch0X:kt,touch0Y:Tt,touch1X:Rt,touch1Y:jt}=St,$t=Rt-kt,Ft=jt-Tt,Ht=dt-ct,Kt=ft-ut,Bt=Math.hypot(Ht,Kt)||1,Ut=Math.hypot($t,Ft)||1;if(!zt(this,sp)&&Math.abs(Ut-Bt)<=nA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(St.touch0X=ct,St.touch0Y=ut,St.touch1X=dt,St.touch1Y=ft,!zt(this,sp)){fn(this,sp,!0);return}const Yt=[(ct+dt)/2,(ut+ft)/2];(Jt=zt(this,Av))==null||Jt.call(this,Yt,Ut,Bt)},AE=new WeakSet,MA=function(g){var et;g.touches.length>=2||(zt(this,qo)&&(zt(this,qo).abort(),fn(this,qo,null),(et=zt(this,Tv))==null||et.call(this)),zt(this,Wo)&&(stopEvent(g),fn(this,Wo,null),fn(this,sp,!1)))};let TouchManager=nA;var cp,qs,pr,or,Ko,_g,su,Cv,$r,up,Yo,bo,ou,_v,hp,ps,Rv,dp,Xo,Eo,ey,ty,Ls,fp,Pv,TE,Mv,aw,Nv,lw,ny,M1,CE,NA,_E,jA,jv,cw,ry,N1,Ov,uw,RE,OA,PE,DA,ME,IA,Dv,hw,NE,LA,Iv,dw,jE,$A,OE,FA,DE,BA,Lv,fw,pp,I0;const Gn=class Gn{constructor(g){cn(this,Mv);cn(this,ny);cn(this,CE);cn(this,_E);cn(this,jv);cn(this,ry);cn(this,Ov);cn(this,RE);cn(this,PE);cn(this,ME);cn(this,Dv);cn(this,NE);cn(this,Iv);cn(this,jE);cn(this,OE);cn(this,DE);cn(this,Lv);cn(this,pp);cn(this,cp,null);cn(this,qs,null);cn(this,pr,null);cn(this,or,null);cn(this,Ko,null);cn(this,_g,!1);cn(this,su,null);cn(this,Cv,"");cn(this,$r,null);cn(this,up,null);cn(this,Yo,null);cn(this,bo,null);cn(this,ou,null);cn(this,_v,"");cn(this,hp,!1);cn(this,ps,null);cn(this,Rv,!1);cn(this,dp,!1);cn(this,Xo,!1);cn(this,Eo,null);cn(this,ey,0);cn(this,ty,0);cn(this,Ls,null);cn(this,fp,null);jn(this,"isSelected",!1);jn(this,"_isCopy",!1);jn(this,"_editToolbar",null);jn(this,"_initialOptions",Object.create(null));jn(this,"_initialData",null);jn(this,"_isVisible",!0);jn(this,"_uiManager",null);jn(this,"_focusEventsAllowed",!0);cn(this,Pv,!1);cn(this,TE,Gn._zIndex++);this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=g.isCentered,this._structTreeParentId=null,this.annotationElementId=g.annotationElementId||null,this.creationDate=g.creationDate||new Date,this.modificationDate=g.modificationDate||null;const{rotation:et,rawDims:{pageWidth:ot,pageHeight:ct,pageX:ut,pageY:dt}}=this.parent.viewport;this.rotation=et,this.pageRotation=(360+et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ot,ct],this.pageTranslation=[ut,dt];const[ft,St]=this.parentDimensions;this.x=g.x/ft,this.y=g.y/St,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const g=Gn.prototype._resizeWithKeyboard,et=AnnotationEditorUIManager.TRANSLATE_SMALL,ot=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],g,{args:[-et,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g,{args:[-ot,0]}],[["ArrowRight","mac+ArrowRight"],g,{args:[et,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g,{args:[ot,0]}],[["ArrowUp","mac+ArrowUp"],g,{args:[0,-et]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g,{args:[0,-ot]}],[["ArrowDown","mac+ArrowDown"],g,{args:[0,et]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g,{args:[0,ot]}],[["Escape","mac+Escape"],Gn.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const et=new FakeEditor({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});et.annotationElementId=g.annotationElementId,et.deleted=!0,et._uiManager.addToAnnotationStorage(et)}static initialize(g,et){if(Gn._l10n??(Gn._l10n=g),Gn._l10nResizer||(Gn._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Gn._borderLineWidth!==-1)return;const ot=getComputedStyle(document.documentElement);Gn._borderLineWidth=parseFloat(ot.getPropertyValue("--outline-width"))||0}static updateDefaultParams(g,et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(g){return!1}static paste(g,et){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return zt(this,Pv)}set _isDraggable(g){var et;fn(this,Pv,g),(et=this.div)==null||et.classList.toggle("draggable",g)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[g,et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*et/(g*2),this.y+=this.width*g/(et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*et/(g*2),this.y-=this.width*g/(et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=zt(this,TE)}setParent(g){var et;g!==null?(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions):(bn(this,pp,I0).call(this),(et=zt(this,bo))==null||et.remove(),fn(this,bo,null)),this.parent=g}focusin(g){this._focusEventsAllowed&&(zt(this,hp)?fn(this,hp,!1):this.parent.setSelected(this))}focusout(g){var ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const et=g.relatedTarget;et!=null&&et.closest(`#${this.id}`)||(g.preventDefault(),(ot=this.parent)!=null&&ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(g,et,ot,ct){const[ut,dt]=this.parentDimensions;[ot,ct]=this.screenToPageTranslation(ot,ct),this.x=(g+ot)/ut,this.y=(et+ct)/dt,this.fixAndSetPosition()}_moveAfterPaste(g,et){const[ot,ct]=this.parentDimensions;this.setAt(g*ot,et*ct,this.width*ot,this.height*ct),this._onTranslated()}translate(g,et){bn(this,Mv,aw).call(this,this.parentDimensions,g,et)}translateInPage(g,et){zt(this,ps)||fn(this,ps,[this.x,this.y,this.width,this.height]),bn(this,Mv,aw).call(this,this.pageDimensions,g,et),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(g,et){zt(this,ps)||fn(this,ps,[this.x,this.y,this.width,this.height]);const{div:ot,parentDimensions:[ct,ut]}=this;if(this.x+=g/ct,this.y+=et/ut,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Rt,y:jt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Rt,jt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:dt,y:ft}=this;const[St,kt]=this.getBaseTranslation();dt+=St,ft+=kt;const{style:Tt}=ot;Tt.left=`${(100*dt).toFixed(2)}%`,Tt.top=`${(100*ft).toFixed(2)}%`,this._onTranslating(dt,ft),ot.scrollIntoView({block:"nearest"})}_onTranslating(g,et){}_onTranslated(g,et){}get _hasBeenMoved(){return!!zt(this,ps)&&(zt(this,ps)[0]!==this.x||zt(this,ps)[1]!==this.y)}get _hasBeenResized(){return!!zt(this,ps)&&(zt(this,ps)[2]!==this.width||zt(this,ps)[3]!==this.height)}getBaseTranslation(){const[g,et]=this.parentDimensions,{_borderLineWidth:ot}=Gn,ct=ot/g,ut=ot/et;switch(this.rotation){case 90:return[-ct,ut];case 180:return[ct,ut];case 270:return[ct,-ut];default:return[-ct,-ut]}}get _mustFixPosition(){return!0}fixAndSetPosition(g=this.rotation){const{div:{style:et},pageDimensions:[ot,ct]}=this;let{x:ut,y:dt,width:ft,height:St}=this;if(ft*=ot,St*=ct,ut*=ot,dt*=ct,this._mustFixPosition)switch(g){case 0:ut=MathClamp(ut,0,ot-ft),dt=MathClamp(dt,0,ct-St);break;case 90:ut=MathClamp(ut,0,ot-St),dt=MathClamp(dt,ft,ct);break;case 180:ut=MathClamp(ut,ft,ot),dt=MathClamp(dt,St,ct);break;case 270:ut=MathClamp(ut,St,ot),dt=MathClamp(dt,0,ct-ft);break}this.x=ut/=ot,this.y=dt/=ct;const[kt,Tt]=this.getBaseTranslation();ut+=kt,dt+=Tt,et.left=`${(100*ut).toFixed(2)}%`,et.top=`${(100*dt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(g,et){var ot;return bn(ot=Gn,Nv,lw).call(ot,g,et,this.parentRotation)}pageTranslationToScreen(g,et){var ot;return bn(ot=Gn,Nv,lw).call(ot,g,et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:g,pageDimensions:[et,ot]}=this;return[et*g,ot*g]}setDims(){const{div:{style:g},width:et,height:ot}=this;g.width=`${(100*et).toFixed(2)}%`,g.height=`${(100*ot).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(g){return Math.round(g*1e4)/1e4}_onResizing(){}altTextFinish(){var g;(g=zt(this,pr))==null||g.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||zt(this,dp))return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:g}=this;if(g)for(const[et,ot]of g)await this._editToolbar.addButton(et,ot);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var g;(g=this._editToolbar)==null||g.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var g;(g=this._editToolbar)==null||g.removeButton("comment")}removeEditToolbar(){var g,et;(g=this._editToolbar)==null||g.remove(),this._editToolbar=null,(et=zt(this,pr))==null||et.destroy()}addContainer(g){var ot;const et=(ot=this._editToolbar)==null?void 0:ot.div;et?et.before(g):this.div.append(g)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return zt(this,pr)||(AltText.initialize(Gn._l10n),fn(this,pr,new AltText(this)),zt(this,cp)&&(zt(this,pr).data=zt(this,cp),fn(this,cp,null))),zt(this,pr)}get altTextData(){var g;return(g=zt(this,pr))==null?void 0:g.data}set altTextData(g){zt(this,pr)&&(zt(this,pr).data=g)}get guessedAltText(){var g;return(g=zt(this,pr))==null?void 0:g.guessedText}async setGuessedAltText(g){var et;await((et=zt(this,pr))==null?void 0:et.setGuessedText(g))}serializeAltText(g){var et;return(et=zt(this,pr))==null?void 0:et.serialize(g)}hasAltText(){return!!zt(this,pr)&&!zt(this,pr).isEmpty()}hasAltTextData(){var g;return((g=zt(this,pr))==null?void 0:g.hasData())??!1}focusCommentButton(){var g;(g=zt(this,or))==null||g.focusButton()}addCommentButton(){return zt(this,or)||fn(this,or,new Comment(this))}addStandaloneCommentButton(){if(zt(this,Ko)){this._uiManager.isEditingMode()&&zt(this,Ko).classList.remove("hidden");return}this.hasComment&&(fn(this,Ko,zt(this,or).renderForStandalone()),this.div.append(zt(this,Ko)))}removeStandaloneCommentButton(){zt(this,or).removeStandaloneCommentButton(),fn(this,Ko,null)}hideStandaloneCommentButton(){var g;(g=zt(this,Ko))==null||g.classList.add("hidden")}get comment(){const{data:{richText:g,text:et,date:ot,deleted:ct}}=zt(this,or);return{text:et,richText:g,date:ot,deleted:ct,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(g){zt(this,or)||fn(this,or,new Comment(this)),zt(this,or).data=g,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:g,popupRef:et,richText:ot}){if(!et||(zt(this,or)||fn(this,or,new Comment(this)),zt(this,or).setInitialText(g,ot),!this.annotationElementId))return;const ct=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);ct&&this.updateFromAnnotationLayer(ct)}get hasEditedComment(){var g;return(g=zt(this,or))==null?void 0:g.hasBeenEdited()}get hasDeletedComment(){var g;return(g=zt(this,or))==null?void 0:g.isDeleted()}get hasComment(){return!!zt(this,or)&&!zt(this,or).isEmpty()&&!zt(this,or).isDeleted()}async editComment(g){zt(this,or)||fn(this,or,new Comment(this)),zt(this,or).edit(g)}toggleComment(g,et=void 0){this.hasComment&&this._uiManager.toggleComment(this,g,et)}setSelectedCommentButton(g){zt(this,or).setSelectedButton(g)}addComment(g){if(this.hasEditedComment){const[,,,ct]=g.rect,[ut]=this.pageDimensions,[dt]=this.pageTranslation,ft=dt+ut+1,St=ct-100,kt=ft+180;g.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[ft,St,kt,ct]}}}updateFromAnnotationLayer({popup:{contents:g,deleted:et}}){zt(this,or).data=et?null:g}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var dt;const g=this.div=document.createElement("div");g.setAttribute("data-editor-rotation",(360-this.rotation)%360),g.className=this.name,g.setAttribute("id",this.id),g.tabIndex=zt(this,_g)?-1:0,g.setAttribute("role","application"),this.defaultL10nId&&g.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||g.classList.add("hidden"),this.setInForeground(),bn(this,Iv,dw).call(this);const[et,ot]=this.parentDimensions;this.parentRotation%180!==0&&(g.style.maxWidth=`${(100*ot/et).toFixed(2)}%`,g.style.maxHeight=`${(100*et/ot).toFixed(2)}%`);const[ct,ut]=this.getInitialTranslation();return this.translate(ct,ut),bindEvents(this,g,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(zt(this,fp)||fn(this,fp,new TouchManager({container:g,isPinchingDisabled:()=>!this.isSelected,onPinchStart:bn(this,RE,OA).bind(this),onPinching:bn(this,PE,DA).bind(this),onPinchEnd:bn(this,ME,IA).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(dt=this._uiManager._editorUndoBar)==null||dt.hide(),g}pointerdown(g){const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et){g.preventDefault();return}if(fn(this,hp,!0),this._isDraggable){bn(this,NE,LA).call(this,g);return}bn(this,Dv,hw).call(this,g)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){zt(this,Eo)&&clearTimeout(zt(this,Eo)),fn(this,Eo,setTimeout(()=>{var g;fn(this,Eo,null),(g=this.parent)==null||g.moveEditorInDOM(this)},0))}_setParentAndPosition(g,et,ot){g.changeParent(this),this.x=et,this.y=ot,this.fixAndSetPosition(),this._onTranslated()}getRect(g,et,ot=this.rotation){const ct=this.parentScale,[ut,dt]=this.pageDimensions,[ft,St]=this.pageTranslation,kt=g/ct,Tt=et/ct,Rt=this.x*ut,jt=this.y*dt,$t=this.width*ut,Ft=this.height*dt;switch(ot){case 0:return[Rt+kt+ft,dt-jt-Tt-Ft+St,Rt+kt+$t+ft,dt-jt-Tt+St];case 90:return[Rt+Tt+ft,dt-jt+kt+St,Rt+Tt+Ft+ft,dt-jt+kt+$t+St];case 180:return[Rt-kt-$t+ft,dt-jt+Tt+St,Rt-kt+ft,dt-jt+Tt+Ft+St];case 270:return[Rt-Tt-Ft+ft,dt-jt-kt-$t+St,Rt-Tt+ft,dt-jt-kt+St];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,et){const[ot,ct,ut,dt]=g,ft=ut-ot,St=dt-ct;switch(this.rotation){case 0:return[ot,et-dt,ft,St];case 90:return[ot,et-ct,St,ft];case 180:return[ut,et-ct,ft,St];case 270:return[ut,et-dt,St,ft];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Gn._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var g;(g=zt(this,or))==null||g.onUpdatedColor()}getData(){const{comment:{text:g,color:et,date:ot,opacity:ct,deleted:ut,richText:dt},uid:ft,pageIndex:St,creationDate:kt,modificationDate:Tt}=this;return{id:ft,pageIndex:St,rect:this.getPDFRect(),richText:dt,contentsObj:{str:g},creationDate:kt,modificationDate:ot||Tt,popupRef:!ut,color:et,opacity:ct}}onceAdded(g){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),fn(this,dp,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),fn(this,dp,!1),!0):!1}isInEditMode(){return zt(this,dp)}shouldGetKeyboardEvents(){return zt(this,Xo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:g,left:et,bottom:ot,right:ct}=this.getClientDimensions(),{innerHeight:ut,innerWidth:dt}=window;return et<dt&&ct>0&&g<ut&&ot>0}rebuild(){bn(this,Iv,dw).call(this)}rotate(g){}resize(){}serializeDeleted(){var g;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((g=this._initialData)==null?void 0:g.popupRef)||""}}serialize(g=!1,et=null){var ot;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((ot=this._initialData)==null?void 0:ot.popupRef)||""}}static async deserialize(g,et,ot){const ct=new this.prototype.constructor({parent:et,id:et.getNextId(),uiManager:ot,annotationElementId:g.annotationElementId,creationDate:g.creationDate,modificationDate:g.modificationDate});ct.rotation=g.rotation,fn(ct,cp,g.accessibilityData),ct._isCopy=g.isCopy||!1;const[ut,dt]=ct.pageDimensions,[ft,St,kt,Tt]=ct.getRectInCurrentCoords(g.rect,dt);return ct.x=ft/ut,ct.y=St/dt,ct.width=kt/ut,ct.height=Tt/dt,ct}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var g,et;if((g=zt(this,ou))==null||g.abort(),fn(this,ou,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),zt(this,Eo)&&(clearTimeout(zt(this,Eo)),fn(this,Eo,null)),bn(this,pp,I0).call(this),this.removeEditToolbar(),zt(this,Ls)){for(const ot of zt(this,Ls).values())clearTimeout(ot);fn(this,Ls,null)}this.parent=null,(et=zt(this,fp))==null||et.destroy(),fn(this,fp,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(bn(this,CE,NA).call(this),zt(this,$r).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[g,et]}=this,[ot,ct,ut,dt]=this.getPDFRect();return[Gn._round(ot+(ut-ot)*g),Gn._round(ct+(dt-ct)*(1-et))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return zt(this,or).commentPopupPositionInLayer}set commentPopupPosition(g){zt(this,or).commentPopupPositionInLayer=g}hasDefaultPopupPosition(){return zt(this,or).hasDefaultPopupPosition()}get commentButtonWidth(){return zt(this,or).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(g){zt(this,or).setCommentButtonStates(g)}keydown(g){if(!this.isResizable||g.target!==this.div||g.key!=="Enter")return;this._uiManager.setSelected(this),fn(this,Yo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const et=zt(this,$r).children;if(!zt(this,qs)){fn(this,qs,Array.from(et));const dt=bn(this,jE,$A).bind(this),ft=bn(this,OE,FA).bind(this),St=this._uiManager._signal;for(const kt of zt(this,qs)){const Tt=kt.getAttribute("data-resizer-name");kt.setAttribute("role","spinbutton"),kt.addEventListener("keydown",dt,{signal:St}),kt.addEventListener("blur",ft,{signal:St}),kt.addEventListener("focus",bn(this,DE,BA).bind(this,Tt),{signal:St}),kt.setAttribute("data-l10n-id",Gn._l10nResizer[Tt])}}const ot=zt(this,qs)[0];let ct=0;for(const dt of et){if(dt===ot)break;ct++}const ut=(360-this.rotation+this.parentRotation)%360/90*(zt(this,qs).length/4);if(ut!==ct){if(ut<ct)for(let ft=0;ft<ct-ut;ft++)zt(this,$r).append(zt(this,$r).firstChild);else if(ut>ct)for(let ft=0;ft<ut-ct;ft++)zt(this,$r).firstChild.before(zt(this,$r).lastChild);let dt=0;for(const ft of et){const kt=zt(this,qs)[dt++].getAttribute("data-resizer-name");ft.setAttribute("data-l10n-id",Gn._l10nResizer[kt])}}bn(this,Lv,fw).call(this,0),fn(this,Xo,!0),zt(this,$r).firstChild.focus({focusVisible:!0}),g.preventDefault(),g.stopImmediatePropagation()}_resizeWithKeyboard(g,et){zt(this,Xo)&&bn(this,Ov,uw).call(this,zt(this,_v),{deltaX:g,deltaY:et,fromKeyboard:!0})}_stopResizingWithKeyboard(){bn(this,pp,I0).call(this),this.div.focus()}select(){var g,et,ot;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(g=this.div)==null||g.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var ct,ut;(ct=this.div)!=null&&ct.classList.contains("selectedEditor")&&((ut=this._editToolbar)==null||ut.show())});return}(et=this._editToolbar)==null||et.show(),(ot=zt(this,pr))==null||ot.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var g;return(g=this.div)==null?void 0:g.focus({preventScroll:!0})},0)}unselect(){var g,et,ot,ct,ut;this.isSelected&&(this.isSelected=!1,(g=zt(this,$r))==null||g.classList.add("hidden"),(et=this.div)==null||et.classList.remove("selectedEditor"),(ot=this.div)!=null&&ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(ct=this._editToolbar)==null||ct.hide(),(ut=zt(this,pr))==null||ut.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(g,et){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(g){g.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return zt(this,Rv)}set isEditing(g){fn(this,Rv,g),this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(g,et=!1){if(et){zt(this,Ls)||fn(this,Ls,new Map);const{action:ot}=g;let ct=zt(this,Ls).get(ot);ct&&clearTimeout(ct),ct=setTimeout(()=>{this._reportTelemetry(g),zt(this,Ls).delete(ot),zt(this,Ls).size===0&&fn(this,Ls,null)},Gn._telemetryTimeout),zt(this,Ls).set(ot,ct);return}g.type||(g.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:g}})}show(g=this._isVisible){this.div.classList.toggle("hidden",!g),this._isVisible=g}enable(){this.div&&(this.div.tabIndex=0),fn(this,_g,!1)}disable(){this.div&&(this.div.tabIndex=-1),fn(this,_g,!0)}updateFakeAnnotationElement(g){if(!zt(this,bo)&&!this.deleted){fn(this,bo,g.addFakeAnnotation(this));return}if(this.deleted){zt(this,bo).remove(),fn(this,bo,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&zt(this,bo).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(g){if(this.deleted)return g.hide(),null;let et=g.container.querySelector(".annotationContent");if(!et)et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),g.container.prepend(et);else if(et.nodeName==="CANVAS"){const ot=et;et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),ot.before(et)}return et}resetAnnotationElement(g){const{firstChild:et}=g.container;(et==null?void 0:et.nodeName)==="DIV"&&et.classList.contains("annotationContent")&&et.remove()}};cp=new WeakMap,qs=new WeakMap,pr=new WeakMap,or=new WeakMap,Ko=new WeakMap,_g=new WeakMap,su=new WeakMap,Cv=new WeakMap,$r=new WeakMap,up=new WeakMap,Yo=new WeakMap,bo=new WeakMap,ou=new WeakMap,_v=new WeakMap,hp=new WeakMap,ps=new WeakMap,Rv=new WeakMap,dp=new WeakMap,Xo=new WeakMap,Eo=new WeakMap,ey=new WeakMap,ty=new WeakMap,Ls=new WeakMap,fp=new WeakMap,Pv=new WeakMap,TE=new WeakMap,Mv=new WeakSet,aw=function([g,et],ot,ct){[ot,ct]=this.screenToPageTranslation(ot,ct),this.x+=ot/g,this.y+=ct/et,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Nv=new WeakSet,lw=function(g,et,ot){switch(ot){case 90:return[et,-g];case 180:return[-g,-et];case 270:return[-et,g];default:return[g,et]}},ny=new WeakSet,M1=function(g){switch(g){case 90:{const[et,ot]=this.pageDimensions;return[0,-et/ot,ot/et,0]}case 180:return[-1,0,0,-1];case 270:{const[et,ot]=this.pageDimensions;return[0,et/ot,-ot/et,0]}default:return[1,0,0,1]}},CE=new WeakSet,NA=function(){if(zt(this,$r))return;fn(this,$r,document.createElement("div")),zt(this,$r).classList.add("resizers");const g=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],et=this._uiManager._signal;for(const ot of g){const ct=document.createElement("div");zt(this,$r).append(ct),ct.classList.add("resizer",ot),ct.setAttribute("data-resizer-name",ot),ct.addEventListener("pointerdown",bn(this,_E,jA).bind(this,ot),{signal:et}),ct.addEventListener("contextmenu",noContextMenu,{signal:et}),ct.tabIndex=-1}this.div.prepend(zt(this,$r))},_E=new WeakSet,jA=function(g,et){var Tt;et.preventDefault();const{isMac:ot}=util_FeatureTest.platform;if(et.button!==0||et.ctrlKey&&ot)return;(Tt=zt(this,pr))==null||Tt.toggle(!1);const ct=this._isDraggable;this._isDraggable=!1,fn(this,up,[et.screenX,et.screenY]);const ut=new AbortController,dt=this._uiManager.combinedSignal(ut);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",bn(this,Ov,uw).bind(this,g),{passive:!0,capture:!0,signal:dt}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:dt}),window.addEventListener("contextmenu",noContextMenu,{signal:dt}),fn(this,Yo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const ft=this.parent.div.style.cursor,St=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(et.target).cursor;const kt=()=>{var Rt;ut.abort(),this.parent.togglePointerEvents(!0),(Rt=zt(this,pr))==null||Rt.toggle(!0),this._isDraggable=ct,this.parent.div.style.cursor=ft,this.div.style.cursor=St,bn(this,ry,N1).call(this)};window.addEventListener("pointerup",kt,{signal:dt}),window.addEventListener("blur",kt,{signal:dt})},jv=new WeakSet,cw=function(g,et,ot,ct){this.width=ot,this.height=ct,this.x=g,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResized()},ry=new WeakSet,N1=function(){if(!zt(this,Yo))return;const{savedX:g,savedY:et,savedWidth:ot,savedHeight:ct}=zt(this,Yo);fn(this,Yo,null);const ut=this.x,dt=this.y,ft=this.width,St=this.height;ut===g&&dt===et&&ft===ot&&St===ct||this.addCommands({cmd:bn(this,jv,cw).bind(this,ut,dt,ft,St),undo:bn(this,jv,cw).bind(this,g,et,ot,ct),mustExec:!0})},Ov=new WeakSet,uw=function(g,et){const[ot,ct]=this.parentDimensions,ut=this.x,dt=this.y,ft=this.width,St=this.height,kt=Gn.MIN_SIZE/ot,Tt=Gn.MIN_SIZE/ct,Rt=bn(this,ny,M1).call(this,this.rotation),jt=(hn,pn)=>[Rt[0]*hn+Rt[2]*pn,Rt[1]*hn+Rt[3]*pn],$t=bn(this,ny,M1).call(this,360-this.rotation),Ft=(hn,pn)=>[$t[0]*hn+$t[2]*pn,$t[1]*hn+$t[3]*pn];let Ht,Kt,Bt=!1,Ut=!1;switch(g){case"topLeft":Bt=!0,Ht=(hn,pn)=>[0,0],Kt=(hn,pn)=>[hn,pn];break;case"topMiddle":Ht=(hn,pn)=>[hn/2,0],Kt=(hn,pn)=>[hn/2,pn];break;case"topRight":Bt=!0,Ht=(hn,pn)=>[hn,0],Kt=(hn,pn)=>[0,pn];break;case"middleRight":Ut=!0,Ht=(hn,pn)=>[hn,pn/2],Kt=(hn,pn)=>[0,pn/2];break;case"bottomRight":Bt=!0,Ht=(hn,pn)=>[hn,pn],Kt=(hn,pn)=>[0,0];break;case"bottomMiddle":Ht=(hn,pn)=>[hn/2,pn],Kt=(hn,pn)=>[hn/2,0];break;case"bottomLeft":Bt=!0,Ht=(hn,pn)=>[0,pn],Kt=(hn,pn)=>[hn,0];break;case"middleLeft":Ut=!0,Ht=(hn,pn)=>[0,pn/2],Kt=(hn,pn)=>[hn,pn/2];break}const Yt=Ht(ft,St),Jt=Kt(ft,St);let Zt=jt(...Jt);const en=Gn._round(ut+Zt[0]),tn=Gn._round(dt+Zt[1]);let nn=1,ln=1,an,sn;if(et.fromKeyboard)({deltaX:an,deltaY:sn}=et);else{const{screenX:hn,screenY:pn}=et,[rn,on]=zt(this,up);[an,sn]=this.screenToPageTranslation(hn-rn,pn-on),zt(this,up)[0]=hn,zt(this,up)[1]=pn}if([an,sn]=Ft(an/ot,sn/ct),Bt){const hn=Math.hypot(ft,St);nn=ln=Math.max(Math.min(Math.hypot(Jt[0]-Yt[0]-an,Jt[1]-Yt[1]-sn)/hn,1/ft,1/St),kt/ft,Tt/St)}else Ut?nn=MathClamp(Math.abs(Jt[0]-Yt[0]-an),kt,1)/ft:ln=MathClamp(Math.abs(Jt[1]-Yt[1]-sn),Tt,1)/St;const dn=Gn._round(ft*nn),mn=Gn._round(St*ln);Zt=jt(...Kt(dn,mn));const yn=en-Zt[0],vn=tn-Zt[1];zt(this,ps)||fn(this,ps,[this.x,this.y,this.width,this.height]),this.width=dn,this.height=mn,this.x=yn,this.y=vn,this.setDims(),this.fixAndSetPosition(),this._onResizing()},RE=new WeakSet,OA=function(){var g;fn(this,Yo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(g=zt(this,pr))==null||g.toggle(!1),this.parent.togglePointerEvents(!1)},PE=new WeakSet,DA=function(g,et,ot){let ut=.7*(ot/et)+1-.7;if(ut===1)return;const dt=bn(this,ny,M1).call(this,this.rotation),ft=(en,tn)=>[dt[0]*en+dt[2]*tn,dt[1]*en+dt[3]*tn],[St,kt]=this.parentDimensions,Tt=this.x,Rt=this.y,jt=this.width,$t=this.height,Ft=Gn.MIN_SIZE/St,Ht=Gn.MIN_SIZE/kt;ut=Math.max(Math.min(ut,1/jt,1/$t),Ft/jt,Ht/$t);const Kt=Gn._round(jt*ut),Bt=Gn._round($t*ut);if(Kt===jt&&Bt===$t)return;zt(this,ps)||fn(this,ps,[Tt,Rt,jt,$t]);const Ut=ft(jt/2,$t/2),Yt=Gn._round(Tt+Ut[0]),Jt=Gn._round(Rt+Ut[1]),Zt=ft(Kt/2,Bt/2);this.x=Yt-Zt[0],this.y=Jt-Zt[1],this.width=Kt,this.height=Bt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},ME=new WeakSet,IA=function(){var g;(g=zt(this,pr))==null||g.toggle(!0),this.parent.togglePointerEvents(!0),bn(this,ry,N1).call(this)},Dv=new WeakSet,hw=function(g){const{isMac:et}=util_FeatureTest.platform;g.ctrlKey&&!et||g.shiftKey||g.metaKey&&et?this.parent.toggleSelected(this):this.parent.setSelected(this)},NE=new WeakSet,LA=function(g){const{isSelected:et}=this;this._uiManager.setUpDragSession();let ot=!1;const ct=new AbortController,ut=this._uiManager.combinedSignal(ct),dt={capture:!0,passive:!1,signal:ut},ft=kt=>{ct.abort(),fn(this,su,null),fn(this,hp,!1),this._uiManager.endDragSession()||bn(this,Dv,hw).call(this,kt),ot&&this._onStopDragging()};et&&(fn(this,ey,g.clientX),fn(this,ty,g.clientY),fn(this,su,g.pointerId),fn(this,Cv,g.pointerType),window.addEventListener("pointermove",kt=>{ot||(ot=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:Tt,clientY:Rt,pointerId:jt}=kt;if(jt!==zt(this,su)){stopEvent(kt);return}const[$t,Ft]=this.screenToPageTranslation(Tt-zt(this,ey),Rt-zt(this,ty));fn(this,ey,Tt),fn(this,ty,Rt),this._uiManager.dragSelectedEditors($t,Ft)},dt),window.addEventListener("touchmove",stopEvent,dt),window.addEventListener("pointerdown",kt=>{kt.pointerType===zt(this,Cv)&&(zt(this,fp)||kt.isPrimary)&&ft(kt),stopEvent(kt)},dt));const St=kt=>{if(!zt(this,su)||zt(this,su)===kt.pointerId){ft(kt);return}stopEvent(kt)};window.addEventListener("pointerup",St,{signal:ut}),window.addEventListener("blur",St,{signal:ut})},Iv=new WeakSet,dw=function(){if(zt(this,ou)||!this.div)return;fn(this,ou,new AbortController);const g=this._uiManager.combinedSignal(zt(this,ou));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:g}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:g})},jE=new WeakSet,$A=function(g){Gn._resizerKeyboardManager.exec(this,g)},OE=new WeakSet,FA=function(g){var et;zt(this,Xo)&&((et=g.relatedTarget)==null?void 0:et.parentNode)!==zt(this,$r)&&bn(this,pp,I0).call(this)},DE=new WeakSet,BA=function(g){fn(this,_v,zt(this,Xo)?g:"")},Lv=new WeakSet,fw=function(g){if(zt(this,qs))for(const et of zt(this,qs))et.tabIndex=g},pp=new WeakSet,I0=function(){fn(this,Xo,!1),bn(this,Lv,fw).call(this,-1),bn(this,ry,N1).call(this)},cn(Gn,Nv),jn(Gn,"_l10n",null),jn(Gn,"_l10nResizer",null),jn(Gn,"_borderLineWidth",-1),jn(Gn,"_colorManager",new ColorManager),jn(Gn,"_zIndex",1),jn(Gn,"_telemetryTimeout",1e3);let AnnotationEditor=Gn;class FakeEditor extends AnnotationEditor{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(g){this.h1=g?g&4294967295:SEED,this.h2=g?g&4294967295:SEED}update(g){let et,ot;if(typeof g=="string"){et=new Uint8Array(g.length*2),ot=0;for(let Ht=0,Kt=g.length;Ht<Kt;Ht++){const Bt=g.charCodeAt(Ht);Bt<=255?et[ot++]=Bt:(et[ot++]=Bt>>>8,et[ot++]=Bt&255)}}else if(ArrayBuffer.isView(g))et=g.slice(),ot=et.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const ct=ot>>2,ut=ot-ct*4,dt=new Uint32Array(et.buffer,0,ct);let ft=0,St=0,kt=this.h1,Tt=this.h2;const Rt=3432918353,jt=461845907,$t=Rt&MASK_LOW,Ft=jt&MASK_LOW;for(let Ht=0;Ht<ct;Ht++)Ht&1?(ft=dt[Ht],ft=ft*Rt&MASK_HIGH|ft*$t&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*jt&MASK_HIGH|ft*Ft&MASK_LOW,kt^=ft,kt=kt<<13|kt>>>19,kt=kt*5+3864292196):(St=dt[Ht],St=St*Rt&MASK_HIGH|St*$t&MASK_LOW,St=St<<15|St>>>17,St=St*jt&MASK_HIGH|St*Ft&MASK_LOW,Tt^=St,Tt=Tt<<13|Tt>>>19,Tt=Tt*5+3864292196);switch(ft=0,ut){case 3:ft^=et[ct*4+2]<<16;case 2:ft^=et[ct*4+1]<<8;case 1:ft^=et[ct*4],ft=ft*Rt&MASK_HIGH|ft*$t&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*jt&MASK_HIGH|ft*Ft&MASK_LOW,ct&1?kt^=ft:Tt^=ft}this.h1=kt,this.h2=Tt}hexdigest(){let g=this.h1,et=this.h2;return g^=et>>>1,g=g*3981806797&MASK_HIGH|g*36045&MASK_LOW,et=et*4283543511&MASK_HIGH|((et<<16|g>>>16)*2950163797&MASK_HIGH)>>>16,g^=et>>>1,g=g*444984403&MASK_HIGH|g*60499&MASK_LOW,et=et*3301882366&MASK_HIGH|((et<<16|g>>>16)*3120437893&MASK_HIGH)>>>16,g^=et>>>1,(g>>>0).toString(16).padStart(8,"0")+(et>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var mp,gp,Jo,Fr,IE,VA;class AnnotationStorage{constructor(){cn(this,IE);cn(this,mp,!1);cn(this,gp,null);cn(this,Jo,null);cn(this,Fr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,et){const ot=zt(this,Fr).get(g);return ot===void 0?et:Object.assign(et,ot)}getRawValue(g){return zt(this,Fr).get(g)}remove(g){const et=zt(this,Fr).get(g);if(et!==void 0&&(et instanceof AnnotationEditor&&zt(this,Jo).delete(et.annotationElementId),zt(this,Fr).delete(g),zt(this,Fr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const ot of zt(this,Fr).values())if(ot instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,et){const ot=zt(this,Fr).get(g);let ct=!1;if(ot!==void 0)for(const[ut,dt]of Object.entries(et))ot[ut]!==dt&&(ct=!0,ot[ut]=dt);else ct=!0,zt(this,Fr).set(g,et);ct&&bn(this,IE,VA).call(this),et instanceof AnnotationEditor&&((zt(this,Jo)||fn(this,Jo,new Map)).set(et.annotationElementId,et),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(et.constructor._type))}has(g){return zt(this,Fr).has(g)}get size(){return zt(this,Fr).size}resetModified(){zt(this,mp)&&(fn(this,mp,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(zt(this,Fr).size===0)return SerializableEmpty;const g=new Map,et=new MurmurHash3_64,ot=[],ct=Object.create(null);let ut=!1;for(const[dt,ft]of zt(this,Fr)){const St=ft instanceof AnnotationEditor?ft.serialize(!1,ct):ft;St&&(g.set(dt,St),et.update(`${dt}:${JSON.stringify(St)}`),ut||(ut=!!St.bitmap))}if(ut)for(const dt of g.values())dt.bitmap&&ot.push(dt.bitmap);return g.size>0?{map:g,hash:et.hexdigest(),transfer:ot}:SerializableEmpty}get editorStats(){let g=null;const et=new Map;let ot=0,ct=0;for(const ut of zt(this,Fr).values()){if(!(ut instanceof AnnotationEditor)){ut.popup&&(ut.popup.deleted?ct+=1:ot+=1);continue}ut.isCommentDeleted?ct+=1:ut.hasEditedComment&&(ot+=1);const dt=ut.telemetryFinalData;if(!dt)continue;const{type:ft}=dt;et.has(ft)||et.set(ft,Object.getPrototypeOf(ut).constructor),g||(g=Object.create(null));const St=g[ft]||(g[ft]=new Map);for(const[kt,Tt]of Object.entries(dt)){if(kt==="type")continue;let Rt=St.get(kt);Rt||(Rt=new Map,St.set(kt,Rt));const jt=Rt.get(Tt)??0;Rt.set(Tt,jt+1)}}if((ct>0||ot>0)&&(g||(g=Object.create(null)),g.comments={deleted:ct,edited:ot}),!g)return null;for(const[ut,dt]of et)g[ut]=dt.computeTelemetryFinalData(g[ut]);return g}resetModifiedIds(){fn(this,gp,null)}updateEditor(g,et){var ct;const ot=(ct=zt(this,Jo))==null?void 0:ct.get(g);return ot?(ot.updateFromAnnotationLayer(et),!0):!1}getEditor(g){var et;return((et=zt(this,Jo))==null?void 0:et.get(g))||null}get modifiedIds(){if(zt(this,gp))return zt(this,gp);const g=[];if(zt(this,Jo))for(const et of zt(this,Jo).values())et.serialize()&&g.push(et.annotationElementId);return fn(this,gp,{ids:new Set(g),hash:g.join(",")})}[Symbol.iterator](){return zt(this,Fr).entries()}}mp=new WeakMap,gp=new WeakMap,Jo=new WeakMap,Fr=new WeakMap,IE=new WeakSet,VA=function(){zt(this,mp)||(fn(this,mp,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var $v;class PrintAnnotationStorage extends AnnotationStorage{constructor(et){super();cn(this,$v,void 0);const{map:ot,hash:ct,transfer:ut}=et.serializable,dt=structuredClone(ot,ut?{transfer:ut}:null);fn(this,$v,{map:dt,hash:ct,transfer:ut})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return zt(this,$v)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}$v=new WeakMap;var iy;class FontLoader{constructor({ownerDocument:g=globalThis.document,styleElement:et=null}){cn(this,iy,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const et=this.styleElement.sheet;et.insertRule(g,et.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),zt(this,iy).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:g,disableFontFace:et,_inspectFont:ot}){if(!(!g||zt(this,iy).has(g.loadedName))){if(assert(!et,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:ct,src:ut,style:dt}=g,ft=new FontFace(ct,ut,dt);this.addNativeFontFace(ft);try{await ft.load(),zt(this,iy).add(ct),ot==null||ot(g)}catch{warn(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ft)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g);return}if(this.isFontLoadingAPISupported){const ot=g.createNativeFontFace();if(ot){this.addNativeFontFace(ot);try{await ot.loaded}catch(ct){throw warn(`Failed to load font '${ot.family}': '${ct}'.`),g.disableFontFace=!0,ct}}return}const et=g.createFontFaceRule();if(et){if(this.insertRule(et),this.isSyncFontLoadingSupported)return;await new Promise(ot=>{const ct=this._queueLoadingCallback(ot);this._prepareFontLoadEvent(g,ct)})}}get isFontLoadingAPISupported(){var et;const g=!!((et=this._document)!=null&&et.fonts);return shadow(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(g){function et(){for(assert(!ct.done,"completeRequest() cannot be called twice."),ct.done=!0;ot.length>0&&ot[0].done;){const ut=ot.shift();setTimeout(ut.callback,0)}}const{loadingRequests:ot}=this,ct={done:!1,complete:et,callback:g};return ot.push(ct),ct}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,et){function ot(Jt,Zt){return Jt.charCodeAt(Zt)<<24|Jt.charCodeAt(Zt+1)<<16|Jt.charCodeAt(Zt+2)<<8|Jt.charCodeAt(Zt+3)&255}function ct(Jt,Zt,en,tn){const nn=Jt.substring(0,Zt),ln=Jt.substring(Zt+en);return nn+tn+ln}let ut,dt;const ft=this._document.createElement("canvas");ft.width=1,ft.height=1;const St=ft.getContext("2d");let kt=0;function Tt(Jt,Zt){if(++kt>30){warn("Load test font never loaded."),Zt();return}if(St.font="30px "+Jt,St.fillText(".",0,20),St.getImageData(0,0,1,1).data[3]>0){Zt();return}setTimeout(Tt.bind(null,Jt,Zt))}const Rt=`lt${Date.now()}${this.loadTestFontId++}`;let jt=this._loadTestFont;jt=ct(jt,976,Rt.length,Rt);const Ft=16,Ht=1482184792;let Kt=ot(jt,Ft);for(ut=0,dt=Rt.length-3;ut<dt;ut+=4)Kt=Kt-Ht+ot(Rt,ut)|0;ut<Rt.length&&(Kt=Kt-Ht+ot(Rt+"XXX",ut)|0),jt=ct(jt,Ft,4,string32(Kt));const Bt=`url(data:font/opentype;base64,${btoa(jt)});`,Ut=`@font-face {font-family:"${Rt}";src:${Bt}}`;this.insertRule(Ut);const Yt=this._document.createElement("div");Yt.style.visibility="hidden",Yt.style.width=Yt.style.height="10px",Yt.style.position="absolute",Yt.style.top=Yt.style.left="0px";for(const Jt of[g.loadedName,Rt]){const Zt=this._document.createElement("span");Zt.textContent="Hi",Zt.style.fontFamily=Jt,Yt.append(Zt)}this._document.body.append(Yt),Tt(Rt,()=>{Yt.remove(),et.complete()})}}iy=new WeakMap;var nr;class FontFaceObject{constructor(g,et=null,ot,ct){cn(this,nr,void 0);this.compiledGlyphs=Object.create(null),fn(this,nr,g),this._inspectFont=et,ot&&Object.assign(this,ot),ct&&(this.charProcOperatorList=ct)}createNativeFontFace(){var et;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const ot={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(ot.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,ot)}return(et=this._inspectFont)==null||et.call(this,this),g}createFontFaceRule(){var ot;if(!this.data||this.disableFontFace)return null;const g=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let et;if(!this.cssFontInfo)et=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let ct=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ct+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),et=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ct}src:${g}}`}return(ot=this._inspectFont)==null||ot.call(this,this,g),et}getPathGenerator(g,et){if(this.compiledGlyphs[et]!==void 0)return this.compiledGlyphs[et];const ot=this.loadedName+"_path_"+et;let ct;try{ct=g.get(ot)}catch(dt){warn(`getPathGenerator - ignoring character: "${dt}".`)}const ut=new Path2D(ct||"");return this.fontExtraProperties||g.delete(ot),this.compiledGlyphs[et]=ut}get black(){return zt(this,nr).black}get bold(){return zt(this,nr).bold}get disableFontFace(){return zt(this,nr).disableFontFace??!1}get fontExtraProperties(){return zt(this,nr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return zt(this,nr).isInvalidPDFjsFont}get isType3Font(){return zt(this,nr).isType3Font}get italic(){return zt(this,nr).italic}get missingFile(){return zt(this,nr).missingFile}get remeasure(){return zt(this,nr).remeasure}get vertical(){return zt(this,nr).vertical}get ascent(){return zt(this,nr).ascent}get defaultWidth(){return zt(this,nr).defaultWidth}get descent(){return zt(this,nr).descent}get bbox(){return zt(this,nr).bbox}get fontMatrix(){return zt(this,nr).fontMatrix}get fallbackName(){return zt(this,nr).fallbackName}get loadedName(){return zt(this,nr).loadedName}get mimetype(){return zt(this,nr).mimetype}get name(){return zt(this,nr).name}get data(){return zt(this,nr).data}clearData(){zt(this,nr).clearData()}get cssFontInfo(){return zt(this,nr).cssFontInfo}get systemFontInfo(){return zt(this,nr).systemFontInfo}get defaultVMetrics(){return zt(this,nr).defaultVMetrics}}nr=new WeakMap;function getUrlProp(it){if(it instanceof URL)return it.href;if(typeof it=="string"){if(isNodeJS)return it;const g=URL.parse(it,window.location);if(g)return g.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(it){if(isNodeJS&&typeof Buffer<"u"&&it instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength)return it;if(typeof it=="string")return stringToBytes(it);if(it instanceof ArrayBuffer||ArrayBuffer.isView(it)||typeof it=="object"&&!isNaN(it==null?void 0:it.length))return new Uint8Array(it);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(it){if(typeof it!="string")return null;if(it.endsWith("/"))return it;throw new Error(`Invalid factory url: "${it}" must include trailing slash.`)}const isRefProxy=it=>typeof it=="object"&&Number.isInteger(it==null?void 0:it.num)&&it.num>=0&&Number.isInteger(it==null?void 0:it.gen)&&it.gen>=0,isNameProxy=it=>typeof it=="object"&&typeof(it==null?void 0:it.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var Zo,LE;class LoopbackPort{constructor(){cn(this,Zo,new Map);cn(this,LE,Promise.resolve())}postMessage(g,et){const ot={data:structuredClone(g,et?{transfer:et}:null)};zt(this,LE).then(()=>{for(const[ct]of zt(this,Zo))ct.call(this,ot)})}addEventListener(g,et,ot=null){let ct=null;if((ot==null?void 0:ot.signal)instanceof AbortSignal){const{signal:ut}=ot;if(ut.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const dt=()=>this.removeEventListener(g,et);ct=()=>ut.removeEventListener("abort",dt),ut.addEventListener("abort",dt)}zt(this,Zo).set(et,ct)}removeEventListener(g,et){const ot=zt(this,Zo).get(et);ot==null||ot(),zt(this,Zo).delete(et)}terminate(){for(const[,g]of zt(this,Zo))g==null||g();zt(this,Zo).clear()}}Zo=new WeakMap,LE=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(it){if(it instanceof AbortException||it instanceof InvalidPDFException||it instanceof PasswordException||it instanceof ResponseException||it instanceof UnknownErrorException)return it;switch(it instanceof Error||typeof it=="object"&&it!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),it.name){case"AbortException":return new AbortException(it.message);case"InvalidPDFException":return new InvalidPDFException(it.message);case"PasswordException":return new PasswordException(it.message,it.code);case"ResponseException":return new ResponseException(it.message,it.status,it.missing);case"UnknownErrorException":return new UnknownErrorException(it.message,it.details)}return new UnknownErrorException(it.message,it.toString())}var sy,$E,zA,FE,HA,BE,UA,oy,j1;class MessageHandler{constructor(g,et,ot){cn(this,$E);cn(this,FE);cn(this,BE);cn(this,oy);cn(this,sy,new AbortController);this.sourceName=g,this.targetName=et,this.comObj=ot,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),ot.addEventListener("message",bn(this,$E,zA).bind(this),{signal:zt(this,sy).signal})}on(g,et){const ot=this.actionHandler;if(ot[g])throw new Error(`There is already an actionName called "${g}"`);ot[g]=et}send(g,et,ot){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:et},ot)}sendWithPromise(g,et,ot){const ct=this.callbackId++,ut=Promise.withResolvers();this.callbackCapabilities[ct]=ut;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:ct,data:et},ot)}catch(dt){ut.reject(dt)}return ut.promise}sendWithStream(g,et,ot,ct){const ut=this.streamId++,dt=this.sourceName,ft=this.targetName,St=this.comObj;return new ReadableStream({start:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ut]={controller:kt,startCall:Tt,pullCall:null,cancelCall:null,isClosed:!1},St.postMessage({sourceName:dt,targetName:ft,action:g,streamId:ut,data:et,desiredSize:kt.desiredSize},ct),Tt.promise},pull:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ut].pullCall=Tt,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.PULL,streamId:ut,desiredSize:kt.desiredSize}),Tt.promise},cancel:kt=>{assert(kt instanceof Error,"cancel must have a valid reason");const Tt=Promise.withResolvers();return this.streamControllers[ut].cancelCall=Tt,this.streamControllers[ut].isClosed=!0,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.CANCEL,streamId:ut,reason:wrapReason(kt)}),Tt.promise}},ot)}destroy(){var g;(g=zt(this,sy))==null||g.abort(),fn(this,sy,null)}}sy=new WeakMap,$E=new WeakSet,zA=function({data:g}){if(g.targetName!==this.sourceName)return;if(g.stream){bn(this,BE,UA).call(this,g);return}if(g.callback){const ot=g.callbackId,ct=this.callbackCapabilities[ot];if(!ct)throw new Error(`Cannot resolve callback ${ot}`);if(delete this.callbackCapabilities[ot],g.callback===CallbackKind.DATA)ct.resolve(g.data);else if(g.callback===CallbackKind.ERROR)ct.reject(wrapReason(g.reason));else throw new Error("Unexpected callback case");return}const et=this.actionHandler[g.action];if(!et)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const ot=this.sourceName,ct=g.sourceName,ut=this.comObj;Promise.try(et,g.data).then(function(dt){ut.postMessage({sourceName:ot,targetName:ct,callback:CallbackKind.DATA,callbackId:g.callbackId,data:dt})},function(dt){ut.postMessage({sourceName:ot,targetName:ct,callback:CallbackKind.ERROR,callbackId:g.callbackId,reason:wrapReason(dt)})});return}if(g.streamId){bn(this,FE,HA).call(this,g);return}et(g.data)},FE=new WeakSet,HA=function(g){const et=g.streamId,ot=this.sourceName,ct=g.sourceName,ut=this.comObj,dt=this,ft=this.actionHandler[g.action],St={enqueue(kt,Tt=1,Rt){if(this.isCancelled)return;const jt=this.desiredSize;this.desiredSize-=Tt,jt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.ENQUEUE,streamId:et,chunk:kt},Rt)},close(){this.isCancelled||(this.isCancelled=!0,ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CLOSE,streamId:et}),delete dt.streamSinks[et])},error(kt){assert(kt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.ERROR,streamId:et,reason:wrapReason(kt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};St.sinkCapability.resolve(),St.ready=St.sinkCapability.promise,this.streamSinks[et]=St,Promise.try(ft,g.data,St).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.START_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.START_COMPLETE,streamId:et,reason:wrapReason(kt)})})},BE=new WeakSet,UA=function(g){const et=g.streamId,ot=this.sourceName,ct=g.sourceName,ut=this.comObj,dt=this.streamControllers[et],ft=this.streamSinks[et];switch(g.stream){case StreamKind.START_COMPLETE:g.success?dt.startCall.resolve():dt.startCall.reject(wrapReason(g.reason));break;case StreamKind.PULL_COMPLETE:g.success?dt.pullCall.resolve():dt.pullCall.reject(wrapReason(g.reason));break;case StreamKind.PULL:if(!ft){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0});break}ft.desiredSize<=0&&g.desiredSize>0&&ft.sinkCapability.resolve(),ft.desiredSize=g.desiredSize,Promise.try(ft.onPull||onFn).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.PULL_COMPLETE,streamId:et,reason:wrapReason(kt)})});break;case StreamKind.ENQUEUE:if(assert(dt,"enqueue should have stream controller"),dt.isClosed)break;dt.controller.enqueue(g.chunk);break;case StreamKind.CLOSE:if(assert(dt,"close should have stream controller"),dt.isClosed)break;dt.isClosed=!0,dt.controller.close(),bn(this,oy,j1).call(this,dt,et);break;case StreamKind.ERROR:assert(dt,"error should have stream controller"),dt.controller.error(wrapReason(g.reason)),bn(this,oy,j1).call(this,dt,et);break;case StreamKind.CANCEL_COMPLETE:g.success?dt.cancelCall.resolve():dt.cancelCall.reject(wrapReason(g.reason)),bn(this,oy,j1).call(this,dt,et);break;case StreamKind.CANCEL:if(!ft)break;const St=wrapReason(g.reason);Promise.try(ft.onCancel||onFn,St).then(function(){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CANCEL_COMPLETE,streamId:et,success:!0})},function(kt){ut.postMessage({sourceName:ot,targetName:ct,stream:StreamKind.CANCEL_COMPLETE,streamId:et,reason:wrapReason(kt)})}),ft.sinkCapability.reject(St),ft.isCancelled=!0,delete this.streamSinks[et];break;default:throw new Error("Unexpected stream case")}},oy=new WeakSet,j1=async function(g,et){var ot,ct,ut;await Promise.allSettled([(ot=g.startCall)==null?void 0:ot.promise,(ct=g.pullCall)==null?void 0:ct.promise,(ut=g.cancelCall)==null?void 0:ut.promise]),delete this.streamControllers[et]};var Fv;class BaseCanvasFactory{constructor({enableHWA:g=!1}){cn(this,Fv,!1);fn(this,Fv,g)}create(g,et){if(g<=0||et<=0)throw new Error("Invalid canvas size");const ot=this._createCanvas(g,et);return{canvas:ot,context:ot.getContext("2d",{willReadFrequently:!zt(this,Fv)})}}reset(g,et,ot){if(!g.canvas)throw new Error("Canvas is not specified");if(et<=0||ot<=0)throw new Error("Invalid canvas size");g.canvas.width=et,g.canvas.height=ot}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,et){unreachable("Abstract method `_createCanvas` called.")}}Fv=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:g=globalThis.document,enableHWA:et=!1}){super({enableHWA:et}),this._document=g}_createCanvas(g,et){const ot=this._document.createElement("canvas");return ot.width=g,ot.height=et,ot}}class BaseCMapReaderFactory{constructor({baseUrl:g=null,isCompressed:et=!0}){this.baseUrl=g,this.isCompressed=et}async fetch({name:g}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!g)throw new Error("CMap name must be specified.");const et=this.baseUrl+g+(this.isCompressed?".bcmap":"");return this._fetch(et).then(ot=>({cMapData:ot,isCompressed:this.isCompressed})).catch(ot=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){const et=await fetchData(g,this.isCompressed?"arraybuffer":"text");return et instanceof ArrayBuffer?new Uint8Array(et):stringToBytes(et)}}class BaseFilterFactory{addFilter(g){return"none"}addHCMFilter(g,et){return"none"}addAlphaFilter(g){return"none"}addLuminosityFilter(g){return"none"}addHighlightHCMFilter(g,et,ot,ct,ut){return"none"}destroy(g=!1){}}var yp,ay,Qo,na,Gr,vp,xp,Rr,zr,bp,L0,au,Am,ly,O1,lu,Tm,VE,GA,Bv,pw,cu,Cm,Ep,$0,Sp,F0,Vv,mw,wp,B0;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:et,ownerDocument:ot=globalThis.document}){super();cn(this,Rr);cn(this,bp);cn(this,au);cn(this,ly);cn(this,lu);cn(this,VE);cn(this,Bv);cn(this,cu);cn(this,Ep);cn(this,Sp);cn(this,Vv);cn(this,wp);cn(this,yp,void 0);cn(this,ay,void 0);cn(this,Qo,void 0);cn(this,na,void 0);cn(this,Gr,void 0);cn(this,vp,void 0);cn(this,xp,0);fn(this,na,et),fn(this,Gr,ot)}addFilter(et){if(!et)return"none";let ot=zt(this,Rr,zr).get(et);if(ot)return ot;const[ct,ut,dt]=bn(this,ly,O1).call(this,et),ft=et.length===1?ct:`${ct}${ut}${dt}`;if(ot=zt(this,Rr,zr).get(ft),ot)return zt(this,Rr,zr).set(et,ot),ot;const St=`g_${zt(this,na)}_transfer_map_${kr(this,xp)._++}`,kt=bn(this,lu,Tm).call(this,St);zt(this,Rr,zr).set(et,kt),zt(this,Rr,zr).set(ft,kt);const Tt=bn(this,cu,Cm).call(this,St);return bn(this,Sp,F0).call(this,ct,ut,dt,Tt),kt}addHCMFilter(et,ot){var Ft;const ct=`${et}-${ot}`,ut="base";let dt=zt(this,bp,L0).get(ut);if((dt==null?void 0:dt.key)===ct||(dt?((Ft=dt.filter)==null||Ft.remove(),dt.key=ct,dt.url="none",dt.filter=null):(dt={key:ct,url:"none",filter:null},zt(this,bp,L0).set(ut,dt)),!et||!ot))return dt.url;const ft=bn(this,wp,B0).call(this,et);et=Util.makeHexColor(...ft);const St=bn(this,wp,B0).call(this,ot);if(ot=Util.makeHexColor(...St),zt(this,au,Am).style.color="",et==="#000000"&&ot==="#ffffff"||et===ot)return dt.url;const kt=new Array(256);for(let Ht=0;Ht<=255;Ht++){const Kt=Ht/255;kt[Ht]=Kt<=.03928?Kt/12.92:((Kt+.055)/1.055)**2.4}const Tt=kt.join(","),Rt=`g_${zt(this,na)}_hcm_filter`,jt=dt.filter=bn(this,cu,Cm).call(this,Rt);bn(this,Sp,F0).call(this,Tt,Tt,Tt,jt),bn(this,Bv,pw).call(this,jt);const $t=(Ht,Kt)=>{const Bt=ft[Ht]/255,Ut=St[Ht]/255,Yt=new Array(Kt+1);for(let Jt=0;Jt<=Kt;Jt++)Yt[Jt]=Bt+Jt/Kt*(Ut-Bt);return Yt.join(",")};return bn(this,Sp,F0).call(this,$t(0,5),$t(1,5),$t(2,5),jt),dt.url=bn(this,lu,Tm).call(this,Rt),dt.url}addAlphaFilter(et){let ot=zt(this,Rr,zr).get(et);if(ot)return ot;const[ct]=bn(this,ly,O1).call(this,[et]),ut=`alpha_${ct}`;if(ot=zt(this,Rr,zr).get(ut),ot)return zt(this,Rr,zr).set(et,ot),ot;const dt=`g_${zt(this,na)}_alpha_map_${kr(this,xp)._++}`,ft=bn(this,lu,Tm).call(this,dt);zt(this,Rr,zr).set(et,ft),zt(this,Rr,zr).set(ut,ft);const St=bn(this,cu,Cm).call(this,dt);return bn(this,Vv,mw).call(this,ct,St),ft}addLuminosityFilter(et){let ot=zt(this,Rr,zr).get(et||"luminosity");if(ot)return ot;let ct,ut;if(et?([ct]=bn(this,ly,O1).call(this,[et]),ut=`luminosity_${ct}`):ut="luminosity",ot=zt(this,Rr,zr).get(ut),ot)return zt(this,Rr,zr).set(et,ot),ot;const dt=`g_${zt(this,na)}_luminosity_map_${kr(this,xp)._++}`,ft=bn(this,lu,Tm).call(this,dt);zt(this,Rr,zr).set(et,ft),zt(this,Rr,zr).set(ut,ft);const St=bn(this,cu,Cm).call(this,dt);return bn(this,VE,GA).call(this,St),et&&bn(this,Vv,mw).call(this,ct,St),ft}addHighlightHCMFilter(et,ot,ct,ut,dt){var Ut;const ft=`${ot}-${ct}-${ut}-${dt}`;let St=zt(this,bp,L0).get(et);if((St==null?void 0:St.key)===ft||(St?((Ut=St.filter)==null||Ut.remove(),St.key=ft,St.url="none",St.filter=null):(St={key:ft,url:"none",filter:null},zt(this,bp,L0).set(et,St)),!ot||!ct))return St.url;const[kt,Tt]=[ot,ct].map(bn(this,wp,B0).bind(this));let Rt=Math.round(.2126*kt[0]+.7152*kt[1]+.0722*kt[2]),jt=Math.round(.2126*Tt[0]+.7152*Tt[1]+.0722*Tt[2]),[$t,Ft]=[ut,dt].map(bn(this,wp,B0).bind(this));jt<Rt&&([Rt,jt,$t,Ft]=[jt,Rt,Ft,$t]),zt(this,au,Am).style.color="";const Ht=(Yt,Jt,Zt)=>{const en=new Array(256),tn=(jt-Rt)/Zt,nn=Yt/255,ln=(Jt-Yt)/(255*Zt);let an=0;for(let sn=0;sn<=Zt;sn++){const dn=Math.round(Rt+sn*tn),mn=nn+sn*ln;for(let yn=an;yn<=dn;yn++)en[yn]=mn;an=dn+1}for(let sn=an;sn<256;sn++)en[sn]=en[an-1];return en.join(",")},Kt=`g_${zt(this,na)}_hcm_${et}_filter`,Bt=St.filter=bn(this,cu,Cm).call(this,Kt);return bn(this,Bv,pw).call(this,Bt),bn(this,Sp,F0).call(this,Ht($t[0],Ft[0],5),Ht($t[1],Ft[1],5),Ht($t[2],Ft[2],5),Bt),St.url=bn(this,lu,Tm).call(this,Kt),St.url}destroy(et=!1){var ot,ct,ut,dt;et&&((ot=zt(this,vp))!=null&&ot.size)||((ct=zt(this,Qo))==null||ct.parentNode.parentNode.remove(),fn(this,Qo,null),(ut=zt(this,ay))==null||ut.clear(),fn(this,ay,null),(dt=zt(this,vp))==null||dt.clear(),fn(this,vp,null),fn(this,xp,0))}}yp=new WeakMap,ay=new WeakMap,Qo=new WeakMap,na=new WeakMap,Gr=new WeakMap,vp=new WeakMap,xp=new WeakMap,Rr=new WeakSet,zr=function(){return zt(this,ay)||fn(this,ay,new Map)},bp=new WeakSet,L0=function(){return zt(this,vp)||fn(this,vp,new Map)},au=new WeakSet,Am=function(){if(!zt(this,Qo)){const et=zt(this,Gr).createElement("div"),{style:ot}=et;ot.visibility="hidden",ot.contain="strict",ot.width=ot.height=0,ot.position="absolute",ot.top=ot.left=0,ot.zIndex=-1;const ct=zt(this,Gr).createElementNS(SVG_NS,"svg");ct.setAttribute("width",0),ct.setAttribute("height",0),fn(this,Qo,zt(this,Gr).createElementNS(SVG_NS,"defs")),et.append(ct),ct.append(zt(this,Qo)),zt(this,Gr).body.append(et)}return zt(this,Qo)},ly=new WeakSet,O1=function(et){if(et.length===1){const kt=et[0],Tt=new Array(256);for(let jt=0;jt<256;jt++)Tt[jt]=kt[jt]/255;const Rt=Tt.join(",");return[Rt,Rt,Rt]}const[ot,ct,ut]=et,dt=new Array(256),ft=new Array(256),St=new Array(256);for(let kt=0;kt<256;kt++)dt[kt]=ot[kt]/255,ft[kt]=ct[kt]/255,St[kt]=ut[kt]/255;return[dt.join(","),ft.join(","),St.join(",")]},lu=new WeakSet,Tm=function(et){if(zt(this,yp)===void 0){fn(this,yp,"");const ot=zt(this,Gr).URL;ot!==zt(this,Gr).baseURI&&(isDataScheme(ot)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):fn(this,yp,updateUrlHash(ot,"")))}return`url(${zt(this,yp)}#${et})`},VE=new WeakSet,GA=function(et){const ot=zt(this,Gr).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),et.append(ot)},Bv=new WeakSet,pw=function(et){const ot=zt(this,Gr).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(ot)},cu=new WeakSet,Cm=function(et){const ot=zt(this,Gr).createElementNS(SVG_NS,"filter");return ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("id",et),zt(this,au,Am).append(ot),ot},Ep=new WeakSet,$0=function(et,ot,ct){const ut=zt(this,Gr).createElementNS(SVG_NS,ot);ut.setAttribute("type","discrete"),ut.setAttribute("tableValues",ct),et.append(ut)},Sp=new WeakSet,F0=function(et,ot,ct,ut){const dt=zt(this,Gr).createElementNS(SVG_NS,"feComponentTransfer");ut.append(dt),bn(this,Ep,$0).call(this,dt,"feFuncR",et),bn(this,Ep,$0).call(this,dt,"feFuncG",ot),bn(this,Ep,$0).call(this,dt,"feFuncB",ct)},Vv=new WeakSet,mw=function(et,ot){const ct=zt(this,Gr).createElementNS(SVG_NS,"feComponentTransfer");ot.append(ct),bn(this,Ep,$0).call(this,ct,"feFuncA",et)},wp=new WeakSet,B0=function(et){return zt(this,au,Am).style.color=et,getRGB(getComputedStyle(zt(this,au,Am)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!g)throw new Error("Font filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load font data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}class BaseWasmFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!g)throw new Error("Wasm filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load wasm data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(it){const et=await process.getBuiltinModule("fs").promises.readFile(it);return new Uint8Array(et)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(g,et){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(g,et)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(g){return node_utils_fetchData(g)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(it,g,et,ot,ct,ut){it[g*4+0]=Math.min(it[g*4+0],et),it[g*4+1]=Math.min(it[g*4+1],ot),it[g*4+2]=Math.max(it[g*4+2],ct),it[g*4+3]=Math.max(it[g*4+3],ut)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var cy,uu;class BBoxReader{constructor(g,et){cn(this,cy,void 0);cn(this,uu,void 0);fn(this,cy,g),fn(this,uu,et)}get length(){return zt(this,cy).length}isEmpty(g){return zt(this,cy)[g]===EMPTY_BBOX}minX(g){return zt(this,uu)[g*4+0]/256}minY(g){return zt(this,uu)[g*4+1]/256}maxX(g){return(zt(this,uu)[g*4+2]+1)/256}maxY(g){return(zt(this,uu)[g*4+3]+1)/256}}cy=new WeakMap,uu=new WeakMap;const ensureDebugMetadata=(it,g)=>{if(!it)return;let et=it.get(g);return et||(et={dependencies:new Set,isRenderingOperation:!1},it.set(g,et)),et};var rs,ss,kp,Ks,Ap,ga,er,rr,xa,as,zv,uy,Tp,Cp,ba,Wr,So,Hv,gw;class CanvasDependencyTracker{constructor(g,et,ot=!1){cn(this,Hv);cn(this,rs,{__proto__:null});cn(this,ss,{__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]});cn(this,kp,new Map);cn(this,Ks,[]);cn(this,Ap,[]);cn(this,ga,[[1,0,0,1,0,0]]);cn(this,er,[-1/0,-1/0,1/0,1/0]);cn(this,rr,new Float64Array([1/0,1/0,-1/0,-1/0]));cn(this,xa,-1);cn(this,as,new Set);cn(this,zv,new Map);cn(this,uy,new Map);cn(this,Tp,void 0);cn(this,Cp,void 0);cn(this,ba,void 0);cn(this,Wr,void 0);cn(this,So,void 0);fn(this,Tp,g.width),fn(this,Cp,g.height),bn(this,Hv,gw).call(this,et),ot&&fn(this,So,new Map)}growOperationsCount(g){g>=zt(this,Wr).length&&bn(this,Hv,gw).call(this,g,zt(this,Wr))}save(g){return fn(this,rs,{__proto__:zt(this,rs)}),fn(this,ss,{__proto__:zt(this,ss),transform:{__proto__:zt(this,ss).transform},moveText:{__proto__:zt(this,ss).moveText},sameLineText:{__proto__:zt(this,ss).sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:zt(this,ss)[FORCED_DEPENDENCY_LABEL]}}),fn(this,er,{__proto__:zt(this,er)}),zt(this,Ks).push(g),this}restore(g){var ct;const et=Object.getPrototypeOf(zt(this,rs));if(et===null)return this;fn(this,rs,et),fn(this,ss,Object.getPrototypeOf(zt(this,ss))),fn(this,er,Object.getPrototypeOf(zt(this,er)));const ot=zt(this,Ks).pop();return ot!==void 0&&((ct=ensureDebugMetadata(zt(this,So),g))==null||ct.dependencies.add(ot),zt(this,Wr)[g]=zt(this,Wr)[ot]),this}recordOpenMarker(g){return zt(this,Ks).push(g),this}getOpenMarker(){return zt(this,Ks).length===0?null:zt(this,Ks).at(-1)}recordCloseMarker(g){var ot;const et=zt(this,Ks).pop();return et!==void 0&&((ot=ensureDebugMetadata(zt(this,So),g))==null||ot.dependencies.add(et),zt(this,Wr)[g]=zt(this,Wr)[et]),this}beginMarkedContent(g){return zt(this,Ap).push(g),this}endMarkedContent(g){var ot;const et=zt(this,Ap).pop();return et!==void 0&&((ot=ensureDebugMetadata(zt(this,So),g))==null||ot.dependencies.add(et),zt(this,Wr)[g]=zt(this,Wr)[et]),this}pushBaseTransform(g){return zt(this,ga).push(Util.multiplyByDOMMatrix(zt(this,ga).at(-1),g.getTransform())),this}popBaseTransform(){return zt(this,ga).length>1&&zt(this,ga).pop(),this}recordSimpleData(g,et){return zt(this,rs)[g]=et,this}recordIncrementalData(g,et){return zt(this,ss)[g].push(et),this}resetIncrementalData(g,et){return zt(this,ss)[g].length=0,this}recordNamedData(g,et){return zt(this,kp).set(g,et),this}recordSimpleDataFromNamed(g,et,ot){zt(this,rs)[g]=zt(this,kp).get(et)??ot}recordFutureForcedDependency(g,et){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,et),this}inheritSimpleDataAsFutureForcedDependencies(g){for(const et of g)et in zt(this,rs)&&this.recordFutureForcedDependency(et,zt(this,rs)[et]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const g of zt(this,as))this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,g);return this}resetBBox(g){return zt(this,xa)!==g&&(fn(this,xa,g),zt(this,rr)[0]=1/0,zt(this,rr)[1]=1/0,zt(this,rr)[2]=-1/0,zt(this,rr)[3]=-1/0),this}recordClipBox(g,et,ot,ct,ut,dt){const ft=Util.multiplyByDOMMatrix(zt(this,ga).at(-1),et.getTransform()),St=[1/0,1/0,-1/0,-1/0];Util.axialAlignedBoundingBox([ot,ut,ct,dt],ft,St);const kt=Util.intersect(zt(this,er),St);return kt?(zt(this,er)[0]=kt[0],zt(this,er)[1]=kt[1],zt(this,er)[2]=kt[2],zt(this,er)[3]=kt[3]):(zt(this,er)[0]=zt(this,er)[1]=1/0,zt(this,er)[2]=zt(this,er)[3]=-1/0),this}recordBBox(g,et,ot,ct,ut,dt){const ft=zt(this,er);if(ft[0]===1/0)return this;const St=Util.multiplyByDOMMatrix(zt(this,ga).at(-1),et.getTransform());if(ft[0]===-1/0)return Util.axialAlignedBoundingBox([ot,ut,ct,dt],St,zt(this,rr)),this;const kt=[1/0,1/0,-1/0,-1/0];return Util.axialAlignedBoundingBox([ot,ut,ct,dt],St,kt),zt(this,rr)[0]=Math.min(zt(this,rr)[0],Math.max(kt[0],ft[0])),zt(this,rr)[1]=Math.min(zt(this,rr)[1],Math.max(kt[1],ft[1])),zt(this,rr)[2]=Math.max(zt(this,rr)[2],Math.min(kt[2],ft[2])),zt(this,rr)[3]=Math.max(zt(this,rr)[3],Math.min(kt[3],ft[3])),this}recordCharacterBBox(g,et,ot,ct=1,ut=0,dt=0,ft){const St=ot.bbox;let kt,Tt;if(St&&(kt=St[2]!==St[0]&&St[3]!==St[1]&&zt(this,uy).get(ot),kt!==!1&&(Tt=[0,0,0,0],Util.axialAlignedBoundingBox(St,ot.fontMatrix,Tt),(ct!==1||ut!==0||dt!==0)&&Util.scaleMinMax([ct,0,0,-ct,ut,dt],Tt),kt)))return this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]);if(!ft)return this.recordFullPageBBox(g);const Rt=ft();return St&&Tt&&kt===void 0&&(kt=Tt[0]<=ut-Rt.actualBoundingBoxLeft&&Tt[2]>=ut+Rt.actualBoundingBoxRight&&Tt[1]<=dt-Rt.actualBoundingBoxAscent&&Tt[3]>=dt+Rt.actualBoundingBoxDescent,zt(this,uy).set(ot,kt),kt)?this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]):this.recordBBox(g,et,ut-Rt.actualBoundingBoxLeft,ut+Rt.actualBoundingBoxRight,dt-Rt.actualBoundingBoxAscent,dt+Rt.actualBoundingBoxDescent)}recordFullPageBBox(g){return zt(this,rr)[0]=Math.max(0,zt(this,er)[0]),zt(this,rr)[1]=Math.max(0,zt(this,er)[1]),zt(this,rr)[2]=Math.min(zt(this,Tp),zt(this,er)[2]),zt(this,rr)[3]=Math.min(zt(this,Cp),zt(this,er)[3]),this}getSimpleIndex(g){return zt(this,rs)[g]}recordDependencies(g,et){const ot=zt(this,as),ct=zt(this,rs),ut=zt(this,ss);for(const dt of et)dt in zt(this,rs)?ot.add(ct[dt]):dt in ut&&ut[dt].forEach(ot.add,ot);return this}recordNamedDependency(g,et){return zt(this,kp).has(et)&&zt(this,as).add(zt(this,kp).get(et)),this}recordOperation(g,et=!1){if(this.recordDependencies(g,[FORCED_DEPENDENCY_LABEL]),zt(this,So)){const ot=ensureDebugMetadata(zt(this,So),g),{dependencies:ct}=ot;zt(this,as).forEach(ct.add,ct),zt(this,Ks).forEach(ct.add,ct),zt(this,Ap).forEach(ct.add,ct),ct.delete(g),ot.isRenderingOperation=!0}if(zt(this,xa)===g){const ot=floor(zt(this,rr)[0]*256/zt(this,Tp)),ct=floor(zt(this,rr)[1]*256/zt(this,Cp)),ut=ceil(zt(this,rr)[2]*256/zt(this,Tp)),dt=ceil(zt(this,rr)[3]*256/zt(this,Cp));expandBBox(zt(this,ba),g,ot,ct,ut,dt);for(const ft of zt(this,as))ft!==g&&expandBBox(zt(this,ba),ft,ot,ct,ut,dt);for(const ft of zt(this,Ks))ft!==g&&expandBBox(zt(this,ba),ft,ot,ct,ut,dt);for(const ft of zt(this,Ap))ft!==g&&expandBBox(zt(this,ba),ft,ot,ct,ut,dt);et||(zt(this,as).clear(),fn(this,xa,-1))}return this}recordShowTextOperation(g,et=!1){const ot=Array.from(zt(this,as));this.recordOperation(g,et),this.recordIncrementalData("sameLineText",g);for(const ct of ot)this.recordIncrementalData("sameLineText",ct);return this}bboxToClipBoxDropOperation(g,et=!1){return zt(this,xa)===g&&(fn(this,xa,-1),zt(this,er)[0]=Math.max(zt(this,er)[0],zt(this,rr)[0]),zt(this,er)[1]=Math.max(zt(this,er)[1],zt(this,rr)[1]),zt(this,er)[2]=Math.min(zt(this,er)[2],zt(this,rr)[2]),zt(this,er)[3]=Math.min(zt(this,er)[3],zt(this,rr)[3]),et||zt(this,as).clear()),this}_takePendingDependencies(){const g=zt(this,as);return fn(this,as,new Set),g}_extractOperation(g){const et=zt(this,zv).get(g);return zt(this,zv).delete(g),et}_pushPendingDependencies(g){for(const et of g)zt(this,as).add(et)}take(){return zt(this,uy).clear(),new BBoxReader(zt(this,Wr),zt(this,ba))}takeDebugMetadata(){return zt(this,So)}}rs=new WeakMap,ss=new WeakMap,kp=new WeakMap,Ks=new WeakMap,Ap=new WeakMap,ga=new WeakMap,er=new WeakMap,rr=new WeakMap,xa=new WeakMap,as=new WeakMap,zv=new WeakMap,uy=new WeakMap,Tp=new WeakMap,Cp=new WeakMap,ba=new WeakMap,Wr=new WeakMap,So=new WeakMap,Hv=new WeakSet,gw=function(g,et){const ot=new ArrayBuffer(g*4);fn(this,ba,new Uint8ClampedArray(ot)),fn(this,Wr,new Uint32Array(ot)),et&&et.length>0?(zt(this,Wr).set(et),zt(this,Wr).fill(EMPTY_BBOX,et.length)):zt(this,Wr).fill(EMPTY_BBOX)};var ar,xr,Ys,hy,dy;const rA=class rA{constructor(g,et,ot){cn(this,ar,void 0);cn(this,xr,void 0);cn(this,Ys,void 0);cn(this,hy,0);cn(this,dy,0);if(g instanceof rA&&zt(g,Ys)===!!ot)return g;fn(this,ar,g),fn(this,xr,et),fn(this,Ys,!!ot)}growOperationsCount(){throw new Error("Unreachable")}save(g){return kr(this,dy)._++,zt(this,ar).save(zt(this,xr)),this}restore(g){return zt(this,dy)>0&&(zt(this,ar).restore(zt(this,xr)),kr(this,dy)._--),this}recordOpenMarker(g){return kr(this,hy)._++,this}getOpenMarker(){return zt(this,hy)>0?zt(this,xr):zt(this,ar).getOpenMarker()}recordCloseMarker(g){return kr(this,hy)._--,this}beginMarkedContent(g){return this}endMarkedContent(g){return this}pushBaseTransform(g){return zt(this,ar).pushBaseTransform(g),this}popBaseTransform(){return zt(this,ar).popBaseTransform(),this}recordSimpleData(g,et){return zt(this,ar).recordSimpleData(g,zt(this,xr)),this}recordIncrementalData(g,et){return zt(this,ar).recordIncrementalData(g,zt(this,xr)),this}resetIncrementalData(g,et){return zt(this,ar).resetIncrementalData(g,zt(this,xr)),this}recordNamedData(g,et){return this}recordSimpleDataFromNamed(g,et,ot){return zt(this,ar).recordSimpleDataFromNamed(g,et,zt(this,xr)),this}recordFutureForcedDependency(g,et){return zt(this,ar).recordFutureForcedDependency(g,zt(this,xr)),this}inheritSimpleDataAsFutureForcedDependencies(g){return zt(this,ar).inheritSimpleDataAsFutureForcedDependencies(g),this}inheritPendingDependenciesAsFutureForcedDependencies(){return zt(this,ar).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(g){return zt(this,Ys)||zt(this,ar).resetBBox(zt(this,xr)),this}recordClipBox(g,et,ot,ct,ut,dt){return zt(this,Ys)||zt(this,ar).recordClipBox(zt(this,xr),et,ot,ct,ut,dt),this}recordBBox(g,et,ot,ct,ut,dt){return zt(this,Ys)||zt(this,ar).recordBBox(zt(this,xr),et,ot,ct,ut,dt),this}recordCharacterBBox(g,et,ot,ct,ut,dt,ft){return zt(this,Ys)||zt(this,ar).recordCharacterBBox(zt(this,xr),et,ot,ct,ut,dt,ft),this}recordFullPageBBox(g){return zt(this,Ys)||zt(this,ar).recordFullPageBBox(zt(this,xr)),this}getSimpleIndex(g){return zt(this,ar).getSimpleIndex(g)}recordDependencies(g,et){return zt(this,ar).recordDependencies(zt(this,xr),et),this}recordNamedDependency(g,et){return zt(this,ar).recordNamedDependency(zt(this,xr),et),this}recordOperation(g){return zt(this,ar).recordOperation(zt(this,xr),!0),this}recordShowTextOperation(g){return zt(this,ar).recordShowTextOperation(zt(this,xr),!0),this}bboxToClipBoxDropOperation(g){return zt(this,Ys)||zt(this,ar).bboxToClipBoxDropOperation(zt(this,xr),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ar=new WeakMap,xr=new WeakMap,Ys=new WeakMap,hy=new WeakMap,dy=new WeakMap;let CanvasNestedDependencyTracker=rA;const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(it,g){if(!g)return;const et=g[2]-g[0],ot=g[3]-g[1],ct=new Path2D;ct.rect(g[0],g[1],et,ot),it.clip(ct)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(g){super(),this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null}_createGradient(g){let et;this._type==="axial"?et=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(et=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const ot of this._colorStops)et.addColorStop(ot[0],ot[1]);return et}getPattern(g,et,ot,ct){let ut;if(ct===PathType.STROKE||ct===PathType.FILL){const dt=et.current.getClippedPathBoundingBox(ct,getCurrentTransform(g))||[0,0,0,0],ft=Math.ceil(dt[2]-dt[0])||1,St=Math.ceil(dt[3]-dt[1])||1,kt=et.cachedCanvases.getCanvas("pattern",ft,St),Tt=kt.context;Tt.clearRect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.beginPath(),Tt.rect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.translate(-dt[0],-dt[1]),ot=Util.transform(ot,[1,0,0,1,dt[0],dt[1]]),Tt.transform(...et.baseTransform),this.matrix&&Tt.transform(...this.matrix),applyBoundingBox(Tt,this._bbox),Tt.fillStyle=this._createGradient(Tt),Tt.fill(),ut=g.createPattern(kt.canvas,"no-repeat");const Rt=new DOMMatrix(ot);ut.setTransform(Rt)}else applyBoundingBox(g,this._bbox),ut=this._createGradient(g);return ut}}function drawTriangle(it,g,et,ot,ct,ut,dt,ft){const St=g.coords,kt=g.colors,Tt=it.data,Rt=it.width*4;let jt;St[et+1]>St[ot+1]&&(jt=et,et=ot,ot=jt,jt=ut,ut=dt,dt=jt),St[ot+1]>St[ct+1]&&(jt=ot,ot=ct,ct=jt,jt=dt,dt=ft,ft=jt),St[et+1]>St[ot+1]&&(jt=et,et=ot,ot=jt,jt=ut,ut=dt,dt=jt);const $t=(St[et]+g.offsetX)*g.scaleX,Ft=(St[et+1]+g.offsetY)*g.scaleY,Ht=(St[ot]+g.offsetX)*g.scaleX,Kt=(St[ot+1]+g.offsetY)*g.scaleY,Bt=(St[ct]+g.offsetX)*g.scaleX,Ut=(St[ct+1]+g.offsetY)*g.scaleY;if(Ft>=Ut)return;const Yt=kt[ut],Jt=kt[ut+1],Zt=kt[ut+2],en=kt[dt],tn=kt[dt+1],nn=kt[dt+2],ln=kt[ft],an=kt[ft+1],sn=kt[ft+2],dn=Math.round(Ft),mn=Math.round(Ut);let yn,vn,hn,pn,rn,on,gn,un;for(let xn=dn;xn<=mn;xn++){if(xn<Kt){const An=xn<Ft?0:(Ft-xn)/(Ft-Kt);yn=$t-($t-Ht)*An,vn=Yt-(Yt-en)*An,hn=Jt-(Jt-tn)*An,pn=Zt-(Zt-nn)*An}else{let An;xn>Ut?An=1:Kt===Ut?An=0:An=(Kt-xn)/(Kt-Ut),yn=Ht-(Ht-Bt)*An,vn=en-(en-ln)*An,hn=tn-(tn-an)*An,pn=nn-(nn-sn)*An}let En;xn<Ft?En=0:xn>Ut?En=1:En=(Ft-xn)/(Ft-Ut),rn=$t-($t-Bt)*En,on=Yt-(Yt-ln)*En,gn=Jt-(Jt-an)*En,un=Zt-(Zt-sn)*En;const wn=Math.round(Math.min(yn,rn)),kn=Math.round(Math.max(yn,rn));let Sn=Rt*xn+wn*4;for(let An=wn;An<=kn;An++)En=(yn-An)/(yn-rn),En<0?En=0:En>1&&(En=1),Tt[Sn++]=vn-(vn-on)*En|0,Tt[Sn++]=hn-(hn-gn)*En|0,Tt[Sn++]=pn-(pn-un)*En|0,Tt[Sn++]=255}}function drawFigure(it,g,et){const ot=g.coords,ct=g.colors;let ut,dt;switch(g.type){case"lattice":const ft=g.verticesPerRow,St=Math.floor(ot.length/ft)-1,kt=ft-1;for(ut=0;ut<St;ut++){let Tt=ut*ft;for(let Rt=0;Rt<kt;Rt++,Tt++)drawTriangle(it,et,ot[Tt],ot[Tt+1],ot[Tt+ft],ct[Tt],ct[Tt+1],ct[Tt+ft]),drawTriangle(it,et,ot[Tt+ft+1],ot[Tt+1],ot[Tt+ft],ct[Tt+ft+1],ct[Tt+1],ct[Tt+ft])}break;case"triangles":for(ut=0,dt=ot.length;ut<dt;ut+=3)drawTriangle(it,et,ot[ut],ot[ut+1],ot[ut+2],ct[ut],ct[ut+1],ct[ut+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(g){super(),this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[6],this._background=g[7],this.matrix=null}_createMeshCanvas(g,et,ot){const ft=Math.floor(this._bounds[0]),St=Math.floor(this._bounds[1]),kt=Math.ceil(this._bounds[2])-ft,Tt=Math.ceil(this._bounds[3])-St,Rt=Math.min(Math.ceil(Math.abs(kt*g[0]*1.1)),3e3),jt=Math.min(Math.ceil(Math.abs(Tt*g[1]*1.1)),3e3),$t=kt/Rt,Ft=Tt/jt,Ht={coords:this._coords,colors:this._colors,offsetX:-ft,offsetY:-St,scaleX:1/$t,scaleY:1/Ft},Kt=Rt+2*2,Bt=jt+2*2,Ut=ot.getCanvas("mesh",Kt,Bt),Yt=Ut.context,Jt=Yt.createImageData(Rt,jt);if(et){const en=Jt.data;for(let tn=0,nn=en.length;tn<nn;tn+=4)en[tn]=et[0],en[tn+1]=et[1],en[tn+2]=et[2],en[tn+3]=255}for(const en of this._figures)drawFigure(Jt,en,Ht);return Yt.putImageData(Jt,2,2),{canvas:Ut.canvas,offsetX:ft-2*$t,offsetY:St-2*Ft,scaleX:$t,scaleY:Ft}}isModifyingCurrentTransform(){return!0}getPattern(g,et,ot,ct){applyBoundingBox(g,this._bbox);const ut=new Float32Array(2);if(ct===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(g),ut);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,ut);const[ft,St]=ut;Util.singularValueDecompose2dScale(et.baseTransform,ut),ut[0]*=ft,ut[1]*=St}else Util.singularValueDecompose2dScale(et.baseTransform,ut);const dt=this._createMeshCanvas(ut,ct===PathType.SHADING?null:this._background,et.cachedCanvases);return ct!==PathType.SHADING&&(g.setTransform(...et.baseTransform),this.matrix&&g.transform(...this.matrix)),g.translate(dt.offsetX,dt.offsetY),g.scale(dt.scaleX,dt.scaleY),g.createPattern(dt.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(it){switch(it[0]){case"RadialAxial":return new RadialAxialShadingPattern(it);case"Mesh":return new MeshShadingPattern(it);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${it[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},zE=class zE{constructor(g,et,ot,ct){this.color=g[1],this.operatorList=g[2],this.matrix=g[3],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.ctx=et,this.canvasGraphicsFactory=ot,this.baseTransform=ct}createPatternCanvas(g,et){var on,gn;const{bbox:ot,operatorList:ct,paintType:ut,tilingType:dt,color:ft,canvasGraphicsFactory:St}=this;let{xstep:kt,ystep:Tt}=this;kt=Math.abs(kt),Tt=Math.abs(Tt),info("TilingType: "+dt);const Rt=ot[0],jt=ot[1],$t=ot[2],Ft=ot[3],Ht=$t-Rt,Kt=Ft-jt,Bt=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,Bt);const[Ut,Yt]=Bt;Util.singularValueDecompose2dScale(this.baseTransform,Bt);const Jt=Ut*Bt[0],Zt=Yt*Bt[1];let en=Ht,tn=Kt,nn=!1,ln=!1;const an=Math.ceil(kt*Jt),sn=Math.ceil(Tt*Zt),dn=Math.ceil(Ht*Jt),mn=Math.ceil(Kt*Zt);an>=dn?en=kt:nn=!0,sn>=mn?tn=Tt:ln=!0;const yn=this.getSizeAndScale(en,this.ctx.canvas.width,Jt),vn=this.getSizeAndScale(tn,this.ctx.canvas.height,Zt),hn=g.cachedCanvases.getCanvas("pattern",yn.size,vn.size),pn=hn.context,rn=St.createCanvasGraphics(pn,et);if(rn.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(rn,ut,ft),pn.translate(-yn.scale*Rt,-vn.scale*jt),rn.transform(0,yn.scale,0,0,vn.scale,0,0),pn.save(),(on=rn.dependencyTracker)==null||on.save(),this.clipBbox(rn,Rt,jt,$t,Ft),rn.baseTransform=getCurrentTransform(rn.ctx),rn.executeOperatorList(ct),rn.endDrawing(),(gn=rn.dependencyTracker)==null||gn.restore(),pn.restore(),nn||ln){const un=hn.canvas;nn&&(en=kt),ln&&(tn=Tt);const xn=this.getSizeAndScale(en,this.ctx.canvas.width,Jt),En=this.getSizeAndScale(tn,this.ctx.canvas.height,Zt),wn=xn.size,kn=En.size,Sn=g.cachedCanvases.getCanvas("pattern-workaround",wn,kn),An=Sn.context,Cn=nn?Math.floor(Ht/kt):0,Tn=ln?Math.floor(Kt/Tt):0;for(let _n=0;_n<=Cn;_n++)for(let Dn=0;Dn<=Tn;Dn++)An.drawImage(un,wn*_n,kn*Dn,wn,kn,0,0,wn,kn);return{canvas:Sn.canvas,scaleX:xn.scale,scaleY:En.scale,offsetX:Rt,offsetY:jt}}return{canvas:hn.canvas,scaleX:yn.scale,scaleY:vn.scale,offsetX:Rt,offsetY:jt}}getSizeAndScale(g,et,ot){const ct=Math.max(zE.MAX_PATTERN_SIZE,et);let ut=Math.ceil(g*ot);return ut>=ct?ut=ct:ot=ut/g,{scale:ot,size:ut}}clipBbox(g,et,ot,ct,ut){const dt=ct-et,ft=ut-ot;g.ctx.rect(et,ot,dt,ft),Util.axialAlignedBoundingBox([et,ot,ct,ut],getCurrentTransform(g.ctx),g.current.minMax),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,et,ot){const ct=g.ctx,ut=g.current;switch(et){case PaintType.COLORED:const{fillStyle:dt,strokeStyle:ft}=this.ctx;ct.fillStyle=ut.fillColor=dt,ct.strokeStyle=ut.strokeColor=ft;break;case PaintType.UNCOLORED:ct.fillStyle=ct.strokeStyle=ot,ut.fillColor=ut.strokeColor=ot;break;default:throw new FormatError(`Unsupported paint type: ${et}`)}}isModifyingCurrentTransform(){return!1}getPattern(g,et,ot,ct,ut){let dt=ot;ct!==PathType.SHADING&&(dt=Util.transform(dt,et.baseTransform),this.matrix&&(dt=Util.transform(dt,this.matrix)));const ft=this.createPatternCanvas(et,ut);let St=new DOMMatrix(dt);St=St.translate(ft.offsetX,ft.offsetY),St=St.scale(1/ft.scaleX,1/ft.scaleY);const kt=g.createPattern(ft.canvas,"repeat");return kt.setTransform(St),kt}};jn(zE,"MAX_PATTERN_SIZE",3e3);let TilingPattern=zE;function convertBlackAndWhiteToRGBA({src:it,srcPos:g=0,dest:et,width:ot,height:ct,nonBlackColor:ut=4294967295,inverseDecode:dt=!1}){const ft=util_FeatureTest.isLittleEndian?4278190080:255,[St,kt]=dt?[ut,ft]:[ft,ut],Tt=ot>>3,Rt=ot&7,jt=it.length;et=new Uint32Array(et.buffer);let $t=0;for(let Ft=0;Ft<ct;Ft++){for(const Kt=g+Tt;g<Kt;g++){const Bt=g<jt?it[g]:255;et[$t++]=Bt&128?kt:St,et[$t++]=Bt&64?kt:St,et[$t++]=Bt&32?kt:St,et[$t++]=Bt&16?kt:St,et[$t++]=Bt&8?kt:St,et[$t++]=Bt&4?kt:St,et[$t++]=Bt&2?kt:St,et[$t++]=Bt&1?kt:St}if(Rt===0)continue;const Ht=g<jt?it[g++]:255;for(let Kt=0;Kt<Rt;Kt++)et[$t++]=Ht&1<<7-Kt?kt:St}return{srcPos:g,destPos:$t}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(it,g){if(it._removeMirroring)throw new Error("Context is already forwarding operations.");it.__originalSave=it.save,it.__originalRestore=it.restore,it.__originalRotate=it.rotate,it.__originalScale=it.scale,it.__originalTranslate=it.translate,it.__originalTransform=it.transform,it.__originalSetTransform=it.setTransform,it.__originalResetTransform=it.resetTransform,it.__originalClip=it.clip,it.__originalMoveTo=it.moveTo,it.__originalLineTo=it.lineTo,it.__originalBezierCurveTo=it.bezierCurveTo,it.__originalRect=it.rect,it.__originalClosePath=it.closePath,it.__originalBeginPath=it.beginPath,it._removeMirroring=()=>{it.save=it.__originalSave,it.restore=it.__originalRestore,it.rotate=it.__originalRotate,it.scale=it.__originalScale,it.translate=it.__originalTranslate,it.transform=it.__originalTransform,it.setTransform=it.__originalSetTransform,it.resetTransform=it.__originalResetTransform,it.clip=it.__originalClip,it.moveTo=it.__originalMoveTo,it.lineTo=it.__originalLineTo,it.bezierCurveTo=it.__originalBezierCurveTo,it.rect=it.__originalRect,it.closePath=it.__originalClosePath,it.beginPath=it.__originalBeginPath,delete it._removeMirroring},it.save=function(){g.save(),this.__originalSave()},it.restore=function(){g.restore(),this.__originalRestore()},it.translate=function(et,ot){g.translate(et,ot),this.__originalTranslate(et,ot)},it.scale=function(et,ot){g.scale(et,ot),this.__originalScale(et,ot)},it.transform=function(et,ot,ct,ut,dt,ft){g.transform(et,ot,ct,ut,dt,ft),this.__originalTransform(et,ot,ct,ut,dt,ft)},it.setTransform=function(et,ot,ct,ut,dt,ft){g.setTransform(et,ot,ct,ut,dt,ft),this.__originalSetTransform(et,ot,ct,ut,dt,ft)},it.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},it.rotate=function(et){g.rotate(et),this.__originalRotate(et)},it.clip=function(et){g.clip(et),this.__originalClip(et)},it.moveTo=function(et,ot){g.moveTo(et,ot),this.__originalMoveTo(et,ot)},it.lineTo=function(et,ot){g.lineTo(et,ot),this.__originalLineTo(et,ot)},it.bezierCurveTo=function(et,ot,ct,ut,dt,ft){g.bezierCurveTo(et,ot,ct,ut,dt,ft),this.__originalBezierCurveTo(et,ot,ct,ut,dt,ft)},it.rect=function(et,ot,ct,ut){g.rect(et,ot,ct,ut),this.__originalRect(et,ot,ct,ut)},it.closePath=function(){g.closePath(),this.__originalClosePath()},it.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,et,ot){let ct;return this.cache[g]!==void 0?(ct=this.cache[g],this.canvasFactory.reset(ct,et,ot)):(ct=this.canvasFactory.create(et,ot),this.cache[g]=ct),ct}delete(g){delete this.cache[g]}clear(){for(const g in this.cache){const et=this.cache[g];this.canvasFactory.destroy(et),delete this.cache[g]}}}function drawImageAtIntegerCoords(it,g,et,ot,ct,ut,dt,ft,St,kt){const[Tt,Rt,jt,$t,Ft,Ht]=getCurrentTransform(it);if(Rt===0&&jt===0){const Ut=dt*Tt+Ft,Yt=Math.round(Ut),Jt=ft*$t+Ht,Zt=Math.round(Jt),en=(dt+St)*Tt+Ft,tn=Math.abs(Math.round(en)-Yt)||1,nn=(ft+kt)*$t+Ht,ln=Math.abs(Math.round(nn)-Zt)||1;return it.setTransform(Math.sign(Tt),0,0,Math.sign($t),Yt,Zt),it.drawImage(g,et,ot,ct,ut,0,0,tn,ln),it.setTransform(Tt,Rt,jt,$t,Ft,Ht),[tn,ln]}if(Tt===0&&$t===0){const Ut=ft*jt+Ft,Yt=Math.round(Ut),Jt=dt*Rt+Ht,Zt=Math.round(Jt),en=(ft+kt)*jt+Ft,tn=Math.abs(Math.round(en)-Yt)||1,nn=(dt+St)*Rt+Ht,ln=Math.abs(Math.round(nn)-Zt)||1;return it.setTransform(0,Math.sign(Rt),Math.sign(jt),0,Yt,Zt),it.drawImage(g,et,ot,ct,ut,0,0,ln,tn),it.setTransform(Tt,Rt,jt,$t,Ft,Ht),[ln,tn]}it.drawImage(g,et,ot,ct,ut,dt,ft,St,kt);const Kt=Math.hypot(Tt,Rt),Bt=Math.hypot(jt,$t);return[Kt*St,Bt*kt]}class CanvasExtraState{constructor(g,et,ot){jn(this,"alphaIsShape",!1);jn(this,"fontSize",0);jn(this,"fontSizeScale",1);jn(this,"textMatrix",null);jn(this,"textMatrixScale",1);jn(this,"fontMatrix",FONT_IDENTITY_MATRIX);jn(this,"leading",0);jn(this,"x",0);jn(this,"y",0);jn(this,"lineX",0);jn(this,"lineY",0);jn(this,"charSpacing",0);jn(this,"wordSpacing",0);jn(this,"textHScale",1);jn(this,"textRenderingMode",TextRenderingMode.FILL);jn(this,"textRise",0);jn(this,"fillColor","#000000");jn(this,"strokeColor","#000000");jn(this,"patternFill",!1);jn(this,"patternStroke",!1);jn(this,"fillAlpha",1);jn(this,"strokeAlpha",1);jn(this,"lineWidth",1);jn(this,"activeSMask",null);jn(this,"transferMaps","none");ot==null||ot(this),this.clipBox=new Float32Array([0,0,g,et]),this.minMax=MIN_MAX_INIT.slice()}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g.minMax=this.minMax.slice(),g}getPathBoundingBox(g=PathType.FILL,et=null){const ot=this.minMax.slice();if(g===PathType.STROKE){et||unreachable("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale(et,XY);const ct=XY[0]*this.lineWidth/2,ut=XY[1]*this.lineWidth/2;ot[0]-=ct,ot[1]-=ut,ot[2]+=ct,ot[3]+=ut}return ot}updateClipFromPath(){const g=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(g){this.clipBox.set(g,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(g=PathType.FILL,et=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(g,et))}}function putBinaryImageData(it,g){if(g instanceof ImageData){it.putImageData(g,0,0);return}const et=g.height,ot=g.width,ct=et%FULL_CHUNK_HEIGHT,ut=(et-ct)/FULL_CHUNK_HEIGHT,dt=ct===0?ut:ut+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0,kt;const Tt=g.data,Rt=ft.data;let jt,$t,Ft,Ht;if(g.kind===util_ImageKind.GRAYSCALE_1BPP){const Kt=Tt.byteLength,Bt=new Uint32Array(Rt.buffer,0,Rt.byteLength>>2),Ut=Bt.length,Yt=ot+7>>3,Jt=4294967295,Zt=util_FeatureTest.isLittleEndian?4278190080:255;for(jt=0;jt<dt;jt++){for(Ft=jt<ut?FULL_CHUNK_HEIGHT:ct,kt=0,$t=0;$t<Ft;$t++){const en=Kt-St;let tn=0;const nn=en>Yt?ot:en*8-7,ln=nn&-8;let an=0,sn=0;for(;tn<ln;tn+=8)sn=Tt[St++],Bt[kt++]=sn&128?Jt:Zt,Bt[kt++]=sn&64?Jt:Zt,Bt[kt++]=sn&32?Jt:Zt,Bt[kt++]=sn&16?Jt:Zt,Bt[kt++]=sn&8?Jt:Zt,Bt[kt++]=sn&4?Jt:Zt,Bt[kt++]=sn&2?Jt:Zt,Bt[kt++]=sn&1?Jt:Zt;for(;tn<nn;tn++)an===0&&(sn=Tt[St++],an=128),Bt[kt++]=sn&an?Jt:Zt,an>>=1}for(;kt<Ut;)Bt[kt++]=0;it.putImageData(ft,0,jt*FULL_CHUNK_HEIGHT)}}else if(g.kind===util_ImageKind.RGBA_32BPP){for($t=0,Ht=ot*FULL_CHUNK_HEIGHT*4,jt=0;jt<ut;jt++)Rt.set(Tt.subarray(St,St+Ht)),St+=Ht,it.putImageData(ft,0,$t),$t+=FULL_CHUNK_HEIGHT;jt<dt&&(Ht=ot*ct*4,Rt.set(Tt.subarray(St,St+Ht)),it.putImageData(ft,0,$t))}else if(g.kind===util_ImageKind.RGB_24BPP)for(Ft=FULL_CHUNK_HEIGHT,Ht=ot*Ft,jt=0;jt<dt;jt++){for(jt>=ut&&(Ft=ct,Ht=ot*Ft),kt=0,$t=Ht;$t--;)Rt[kt++]=Tt[St++],Rt[kt++]=Tt[St++],Rt[kt++]=Tt[St++],Rt[kt++]=255;it.putImageData(ft,0,jt*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${g.kind}`)}function putBinaryImageMask(it,g){if(g.bitmap){it.drawImage(g.bitmap,0,0);return}const et=g.height,ot=g.width,ct=et%FULL_CHUNK_HEIGHT,ut=(et-ct)/FULL_CHUNK_HEIGHT,dt=ct===0?ut:ut+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0;const kt=g.data,Tt=ft.data;for(let Rt=0;Rt<dt;Rt++){const jt=Rt<ut?FULL_CHUNK_HEIGHT:ct;({srcPos:St}=convertBlackAndWhiteToRGBA({src:kt,srcPos:St,dest:Tt,width:ot,height:jt,nonBlackColor:0})),it.putImageData(ft,0,Rt*FULL_CHUNK_HEIGHT)}}function copyCtxState(it,g){const et=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ot of et)it[ot]!==void 0&&(g[ot]=it[ot]);it.setLineDash!==void 0&&(g.setLineDash(it.getLineDash()),g.lineDashOffset=it.lineDashOffset)}function resetCtxToDefault(it){it.strokeStyle=it.fillStyle="#000000",it.fillRule="nonzero",it.globalAlpha=1,it.lineWidth=1,it.lineCap="butt",it.lineJoin="miter",it.miterLimit=10,it.globalCompositeOperation="source-over",it.font="10px sans-serif",it.setLineDash!==void 0&&(it.setLineDash([]),it.lineDashOffset=0);const{filter:g}=it;g!=="none"&&g!==""&&(it.filter="none")}function getImageSmoothingEnabled(it,g){if(g)return!0;Util.singularValueDecompose2dScale(it,XY);const et=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=et&&XY[1]<=et}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var Uv,yw,Gv,xw,Wv,bw;const iA=class iA{constructor(g,et,ot,ct,ut,{optionalContentConfig:dt,markedContentStack:ft=null},St,kt,Tt){cn(this,Uv);cn(this,Gv);cn(this,Wv);this.ctx=g,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=et,this.objs=ot,this.canvasFactory=ct,this.filterFactory=ut,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ft||[],this.optionalContentConfig=dt,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=St,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=Tt??null}getObject(g,et,ot=null){var ct;return typeof et=="string"?((ct=this.dependencyTracker)==null||ct.recordNamedDependency(g,et),et.startsWith("g_")?this.commonObjs.get(et):this.objs.get(et)):ot}beginDrawing({transform:g,viewport:et,transparency:ot=!1,background:ct=null}){const ut=this.ctx.canvas.width,dt=this.ctx.canvas.height,ft=this.ctx.fillStyle;if(this.ctx.fillStyle=ct||"#ffffff",this.ctx.fillRect(0,0,ut,dt),this.ctx.fillStyle=ft,ot){const St=this.cachedCanvases.getCanvas("transparent",ut,dt);this.compositeCtx=this.ctx,this.transparentCanvas=St.canvas,this.ctx=St.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...et.transform),this.viewportScale=et.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(g,et,ot,ct,ut){var Bt;const dt=g.argsArray,ft=g.fnArray;let St=et||0;const kt=dt.length;if(kt===St)return St;const Tt=kt-St>EXECUTION_STEPS&&typeof ot=="function",Rt=Tt?Date.now()+EXECUTION_TIME:0;let jt=0;const $t=this.commonObjs,Ft=this.objs;let Ht,Kt;for(;;){if(ct!==void 0&&St===ct.nextBreakPoint)return ct.breakIt(St,ot),St;if(!ut||ut(St))if(Ht=ft[St],Kt=dt[St]??null,Ht!==OPS.dependency)Kt===null?this[Ht](St):this[Ht](St,...Kt);else for(const Ut of Kt){(Bt=this.dependencyTracker)==null||Bt.recordNamedData(Ut,St);const Yt=Ut.startsWith("g_")?$t:Ft;if(!Yt.has(Ut))return Yt.get(Ut,ot),St}if(St++,St===kt)return St;if(Tt&&++jt>EXECUTION_STEPS){if(Date.now()>Rt)return ot(),St;jt=0}}}endDrawing(){bn(this,Uv,yw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const et of g.values())typeof HTMLCanvasElement<"u"&&et instanceof HTMLCanvasElement&&(et.width=et.height=0);g.clear()}this._cachedBitmapsMap.clear(),bn(this,Gv,xw).call(this)}_scaleImage(g,et){const ot=g.width??g.displayWidth,ct=g.height??g.displayHeight;let ut=Math.max(Math.hypot(et[0],et[1]),1),dt=Math.max(Math.hypot(et[2],et[3]),1),ft=ot,St=ct,kt="prescale1",Tt,Rt;for(;ut>2&&ft>1||dt>2&&St>1;){let jt=ft,$t=St;ut>2&&ft>1&&(jt=ft>=16384?Math.floor(ft/2)-1||1:Math.ceil(ft/2),ut/=ft/jt),dt>2&&St>1&&($t=St>=16384?Math.floor(St/2)-1||1:Math.ceil(St)/2,dt/=St/$t),Tt=this.cachedCanvases.getCanvas(kt,jt,$t),Rt=Tt.context,Rt.clearRect(0,0,jt,$t),Rt.drawImage(g,0,0,ft,St,0,0,jt,$t),g=Tt.canvas,ft=jt,St=$t,kt=kt==="prescale1"?"prescale2":"prescale1"}return{img:g,paintWidth:ft,paintHeight:St}}_createMaskCanvas(g,et){var an,sn;const ot=this.ctx,{width:ct,height:ut}=et,dt=this.current.fillColor,ft=this.current.patternFill,St=getCurrentTransform(ot);let kt,Tt,Rt,jt;if((et.bitmap||et.data)&&et.count>1){const dn=et.bitmap||et.data.buffer;Tt=JSON.stringify(ft?St:[St.slice(0,4),dt]),kt=this._cachedBitmapsMap.get(dn),kt||(kt=new Map,this._cachedBitmapsMap.set(dn,kt));const mn=kt.get(Tt);if(mn&&!ft){const yn=Math.round(Math.min(St[0],St[2])+St[4]),vn=Math.round(Math.min(St[1],St[3])+St[5]);return(an=this.dependencyTracker)==null||an.recordDependencies(g,Dependencies.transformAndFill),{canvas:mn,offsetX:yn,offsetY:vn}}Rt=mn}Rt||(jt=this.cachedCanvases.getCanvas("maskCanvas",ct,ut),putBinaryImageMask(jt.context,et));let $t=Util.transform(St,[1/ct,0,0,-1/ut,0,0]);$t=Util.transform($t,[1,0,0,1,0,-ut]);const Ft=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,ct,ut],$t,Ft);const[Ht,Kt,Bt,Ut]=Ft,Yt=Math.round(Bt-Ht)||1,Jt=Math.round(Ut-Kt)||1,Zt=this.cachedCanvases.getCanvas("fillCanvas",Yt,Jt),en=Zt.context,tn=Ht,nn=Kt;en.translate(-tn,-nn),en.transform(...$t),Rt||(Rt=this._scaleImage(jt.canvas,getCurrentTransformInverse(en)),Rt=Rt.img,kt&&ft&&kt.set(Tt,Rt)),en.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(en),et.interpolate),drawImageAtIntegerCoords(en,Rt,0,0,Rt.width,Rt.height,0,0,ct,ut),en.globalCompositeOperation="source-in";const ln=Util.transform(getCurrentTransformInverse(en),[1,0,0,1,-tn,-nn]);return en.fillStyle=ft?dt.getPattern(ot,this,ln,PathType.FILL,g):dt,en.fillRect(0,0,ct,ut),kt&&!ft&&(this.cachedCanvases.delete("fillCanvas"),kt.set(Tt,Zt.canvas)),(sn=this.dependencyTracker)==null||sn.recordDependencies(g,Dependencies.transformAndFill),{canvas:Zt.canvas,offsetX:Math.round(tn),offsetY:Math.round(nn)}}setLineWidth(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineWidth",g),et!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=et,this.ctx.lineWidth=et}setLineCap(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineCap",g),this.ctx.lineCap=LINE_CAP_STYLES[et]}setLineJoin(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineJoin",g),this.ctx.lineJoin=LINE_JOIN_STYLES[et]}setMiterLimit(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("miterLimit",g),this.ctx.miterLimit=et}setDash(g,et,ot){var ut;(ut=this.dependencyTracker)==null||ut.recordSimpleData("dash",g);const ct=this.ctx;ct.setLineDash!==void 0&&(ct.setLineDash(et),ct.lineDashOffset=ot)}setRenderingIntent(g,et){}setFlatness(g,et){}setGState(g,et){var ot,ct,ut,dt,ft;for(const[St,kt]of et)switch(St){case"LW":this.setLineWidth(g,kt);break;case"LC":this.setLineCap(g,kt);break;case"LJ":this.setLineJoin(g,kt);break;case"ML":this.setMiterLimit(g,kt);break;case"D":this.setDash(g,kt[0],kt[1]);break;case"RI":this.setRenderingIntent(g,kt);break;case"FL":this.setFlatness(g,kt);break;case"Font":this.setFont(g,kt[0],kt[1]);break;case"CA":(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeAlpha",g),this.current.strokeAlpha=kt;break;case"ca":(ct=this.dependencyTracker)==null||ct.recordSimpleData("fillAlpha",g),this.ctx.globalAlpha=this.current.fillAlpha=kt;break;case"BM":(ut=this.dependencyTracker)==null||ut.recordSimpleData("globalCompositeOperation",g),this.ctx.globalCompositeOperation=kt;break;case"SMask":(dt=this.dependencyTracker)==null||dt.recordSimpleData("SMask",g),this.current.activeSMask=kt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(ft=this.dependencyTracker)==null||ft.recordSimpleData("filter",g),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(kt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(g){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const et=this.ctx.canvas.width,ot=this.ctx.canvas.height,ct="smaskGroupAt"+this.groupLevel,ut=this.cachedCanvases.getCanvas(ct,et,ot);this.suspendedCtx=this.ctx;const dt=this.ctx=ut.context;dt.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,dt),mirrorContextOperations(dt,this.suspendedCtx),this.setGState(g,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){if(!this.current.activeSMask)return;g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const et=this.current.activeSMask,ot=this.suspendedCtx;this.composeSMask(ot,et,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(g,et,ot,ct){const ut=ct[0],dt=ct[1],ft=ct[2]-ut,St=ct[3]-dt;ft===0||St===0||(this.genericComposeSMask(et.context,ot,ft,St,et.subtype,et.backdrop,et.transferMap,ut,dt,et.offsetX,et.offsetY),g.save(),g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),g.drawImage(ot.canvas,0,0),g.restore())}genericComposeSMask(g,et,ot,ct,ut,dt,ft,St,kt,Tt,Rt){let jt=g.canvas,$t=St-Tt,Ft=kt-Rt;if(dt)if($t<0||Ft<0||$t+ot>jt.width||Ft+ct>jt.height){const Kt=this.cachedCanvases.getCanvas("maskExtension",ot,ct),Bt=Kt.context;Bt.drawImage(jt,-$t,-Ft),Bt.globalCompositeOperation="destination-atop",Bt.fillStyle=dt,Bt.fillRect(0,0,ot,ct),Bt.globalCompositeOperation="source-over",jt=Kt.canvas,$t=Ft=0}else{g.save(),g.globalAlpha=1,g.setTransform(1,0,0,1,0,0);const Kt=new Path2D;Kt.rect($t,Ft,ot,ct),g.clip(Kt),g.globalCompositeOperation="destination-atop",g.fillStyle=dt,g.fillRect($t,Ft,ot,ct),g.restore()}et.save(),et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),ut==="Alpha"&&ft?et.filter=this.filterFactory.addAlphaFilter(ft):ut==="Luminosity"&&(et.filter=this.filterFactory.addLuminosityFilter(ft));const Ht=new Path2D;Ht.rect(St,kt,ot,ct),et.clip(Ht),et.globalCompositeOperation="destination-in",et.drawImage(jt,$t,Ft,ot,ct,St,kt,ot,ct),et.restore()}save(g){var ot;this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const et=this.current;this.stateStack.push(et),this.current=et.clone(),(ot=this.dependencyTracker)==null||ot.save(g)}restore(g){var et;if((et=this.dependencyTracker)==null||et.restore(g),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(g,et,ot,ct,ut,dt,ft){var St;(St=this.dependencyTracker)==null||St.recordIncrementalData("transform",g),this.ctx.transform(et,ot,ct,ut,dt,ft),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(g,et,ot,ct){let[ut]=ot;if(!ct){ut||(ut=ot[0]=new Path2D),this[et](g,ut);return}if(this.dependencyTracker!==null){const dt=et===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(g).recordBBox(g,this.ctx,ct[0]-dt,ct[2]+dt,ct[1]-dt,ct[3]+dt).recordDependencies(g,["transform"])}if(!(ut instanceof Path2D)){const dt=ot[0]=new Path2D;for(let ft=0,St=ut.length;ft<St;)switch(ut[ft++]){case DrawOPS.moveTo:dt.moveTo(ut[ft++],ut[ft++]);break;case DrawOPS.lineTo:dt.lineTo(ut[ft++],ut[ft++]);break;case DrawOPS.curveTo:dt.bezierCurveTo(ut[ft++],ut[ft++],ut[ft++],ut[ft++],ut[ft++],ut[ft++]);break;case DrawOPS.closePath:dt.closePath();break;default:warn(`Unrecognized drawing path operator: ${ut[ft-1]}`);break}ut=dt}Util.axialAlignedBoundingBox(ct,getCurrentTransform(this.ctx),this.current.minMax),this[et](g,ut),this._pathStartIdx=g}closePath(g){this.ctx.closePath()}stroke(g,et,ot=!0){var dt;const ct=this.ctx,ut=this.current.strokeColor;if(ct.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof ut=="object"&&(ut!=null&&ut.getPattern)){const ft=ut.isModifyingCurrentTransform()?ct.getTransform():null;if(ct.save(),ct.strokeStyle=ut.getPattern(ct,this,getCurrentTransformInverse(ct),PathType.STROKE,g),ft){const St=new Path2D;St.addPath(et,ct.getTransform().invertSelf().multiplySelf(ft)),et=St}this.rescaleAndStroke(et,!1),ct.restore()}else this.rescaleAndStroke(et,!0);(dt=this.dependencyTracker)==null||dt.recordDependencies(g,Dependencies.stroke),ot&&this.consumePath(g,et,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),ct.globalAlpha=this.current.fillAlpha}closeStroke(g,et){this.stroke(g,et)}fill(g,et,ot=!0){var kt,Tt,Rt;const ct=this.ctx,ut=this.current.fillColor,dt=this.current.patternFill;let ft=!1;if(dt){const jt=ut.isModifyingCurrentTransform()?ct.getTransform():null;if((kt=this.dependencyTracker)==null||kt.save(g),ct.save(),ct.fillStyle=ut.getPattern(ct,this,getCurrentTransformInverse(ct),PathType.FILL,g),jt){const $t=new Path2D;$t.addPath(et,ct.getTransform().invertSelf().multiplySelf(jt)),et=$t}ft=!0}const St=this.current.getClippedPathBoundingBox();this.contentVisible&&St!==null&&(this.pendingEOFill?(ct.fill(et,"evenodd"),this.pendingEOFill=!1):ct.fill(et)),(Tt=this.dependencyTracker)==null||Tt.recordDependencies(g,Dependencies.fill),ft&&(ct.restore(),(Rt=this.dependencyTracker)==null||Rt.restore(g)),ot&&this.consumePath(g,et,St)}eoFill(g,et){this.pendingEOFill=!0,this.fill(g,et)}fillStroke(g,et){this.fill(g,et,!1),this.stroke(g,et,!1),this.consumePath(g,et)}eoFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}closeFillStroke(g,et){this.fillStroke(g,et)}closeEOFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}endPath(g,et){this.consumePath(g,et)}rawFillPath(g,et){var ot;this.ctx.fill(et),(ot=this.dependencyTracker)==null||ot.recordDependencies(g,Dependencies.rawFillPath).recordOperation(g)}clip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=NORMAL_CLIP}eoClip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=EO_CLIP}beginText(g){var et;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(et=this.dependencyTracker)==null||et.recordOpenMarker(g).resetIncrementalData("sameLineText").resetIncrementalData("moveText",g)}endText(g){const et=this.pendingTextPaths,ot=this.ctx;if(this.dependencyTracker){const{dependencyTracker:ct}=this;et!==void 0&&ct.recordFutureForcedDependency("textClip",ct.getOpenMarker()).recordFutureForcedDependency("textClip",g),ct.recordCloseMarker(g)}if(et!==void 0){const ct=new Path2D,ut=ot.getTransform().invertSelf();for(const{transform:dt,x:ft,y:St,fontSize:kt,path:Tt}of et)Tt&&ct.addPath(Tt,new DOMMatrix(dt).preMultiplySelf(ut).translate(ft,St).scale(kt,-kt));ot.clip(ct)}delete this.pendingTextPaths}setCharSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("charSpacing",g),this.current.charSpacing=et}setWordSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("wordSpacing",g),this.current.wordSpacing=et}setHScale(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("hScale",g),this.current.textHScale=et/100}setLeading(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("leading",g),this.current.leading=-et}setFont(g,et,ot){var Rt,jt;(Rt=this.dependencyTracker)==null||Rt.recordSimpleData("font",g).recordSimpleDataFromNamed("fontObj",et,g);const ct=this.commonObjs.get(et),ut=this.current;if(!ct)throw new Error(`Can't find font for ${et}`);if(ut.fontMatrix=ct.fontMatrix||FONT_IDENTITY_MATRIX,(ut.fontMatrix[0]===0||ut.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+et),ot<0?(ot=-ot,ut.fontDirection=-1):ut.fontDirection=1,this.current.font=ct,this.current.fontSize=ot,ct.isType3Font)return;const dt=ct.loadedName||"sans-serif",ft=((jt=ct.systemFontInfo)==null?void 0:jt.css)||`"${dt}", ${ct.fallbackName}`;let St="normal";ct.black?St="900":ct.bold&&(St="bold");const kt=ct.italic?"italic":"normal";let Tt=ot;ot<MIN_FONT_SIZE?Tt=MIN_FONT_SIZE:ot>MAX_FONT_SIZE&&(Tt=MAX_FONT_SIZE),this.current.fontSizeScale=ot/Tt,this.ctx.font=`${kt} ${St} ${Tt}px ${ft}`}setTextRenderingMode(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRenderingMode",g),this.current.textRenderingMode=et}setTextRise(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRise",g),this.current.textRise=et}moveText(g,et,ot){var ct;(ct=this.dependencyTracker)==null||ct.resetIncrementalData("sameLineText").recordIncrementalData("moveText",g),this.current.x=this.current.lineX+=et,this.current.y=this.current.lineY+=ot}setLeadingMoveText(g,et,ot){this.setLeading(g,-ot),this.moveText(g,et,ot)}setTextMatrix(g,et){var ct;(ct=this.dependencyTracker)==null||ct.recordSimpleData("textMatrix",g);const{current:ot}=this;ot.textMatrix=et,ot.textMatrixScale=Math.hypot(et[0],et[1]),ot.x=ot.lineX=0,ot.y=ot.lineY=0}nextLine(g){var et;this.moveText(g,0,this.current.leading),(et=this.dependencyTracker)==null||et.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??g)}paintChar(g,et,ot,ct,ut,dt){var Bt,Ut,Yt,Jt;const ft=this.ctx,St=this.current,kt=St.font,Tt=St.textRenderingMode,Rt=St.fontSize/St.fontSizeScale,jt=Tt&TextRenderingMode.FILL_STROKE_MASK,$t=!!(Tt&TextRenderingMode.ADD_TO_PATH_FLAG),Ft=St.patternFill&&!kt.missingFile,Ht=St.patternStroke&&!kt.missingFile;let Kt;if((kt.disableFontFace||$t||Ft||Ht)&&!kt.missingFile&&(Kt=kt.getPathGenerator(this.commonObjs,et)),Kt&&(kt.disableFontFace||Ft||Ht)){ft.save(),ft.translate(ot,ct),ft.scale(Rt,-Rt),(Bt=this.dependencyTracker)==null||Bt.recordCharacterBBox(g,ft,kt);let Zt;if(jt===TextRenderingMode.FILL||jt===TextRenderingMode.FILL_STROKE)if(ut){Zt=ft.getTransform(),ft.setTransform(...ut);const en=bn(this,Wv,bw).call(this,Kt,Zt,ut);ft.fill(en)}else ft.fill(Kt);if(jt===TextRenderingMode.STROKE||jt===TextRenderingMode.FILL_STROKE)if(dt){Zt||(Zt=ft.getTransform()),ft.setTransform(...dt);const{a:en,b:tn,c:nn,d:ln}=Zt,an=Util.inverseTransform(dt),sn=Util.transform([en,tn,nn,ln,0,0],an);Util.singularValueDecompose2dScale(sn,XY),ft.lineWidth*=Math.max(XY[0],XY[1])/Rt,ft.stroke(bn(this,Wv,bw).call(this,Kt,Zt,dt))}else ft.lineWidth/=Rt,ft.stroke(Kt);ft.restore()}else(jt===TextRenderingMode.FILL||jt===TextRenderingMode.FILL_STROKE)&&(ft.fillText(et,ot,ct),(Ut=this.dependencyTracker)==null||Ut.recordCharacterBBox(g,ft,kt,Rt,ot,ct,()=>ft.measureText(et))),(jt===TextRenderingMode.STROKE||jt===TextRenderingMode.FILL_STROKE)&&(this.dependencyTracker&&((Yt=this.dependencyTracker)==null||Yt.recordCharacterBBox(g,ft,kt,Rt,ot,ct,()=>ft.measureText(et)).recordDependencies(g,Dependencies.stroke)),ft.strokeText(et,ot,ct));$t&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(ft),x:ot,y:ct,fontSize:Rt,path:Kt}),(Jt=this.dependencyTracker)==null||Jt.recordCharacterBBox(g,ft,kt,Rt,ot,ct))}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const et=g.getImageData(0,0,10,10).data;let ot=!1;for(let ct=3;ct<et.length;ct+=4)if(et[ct]>0&&et[ct]<255){ot=!0;break}return shadow(this,"isFontSubpixelAAEnabled",ot)}showText(g,et){var nn,ln,an,sn;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(g,Dependencies.showText).resetBBox(g),this.current.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",g).inheritPendingDependenciesAsFutureForcedDependencies());const ot=this.current,ct=ot.font;if(ct.isType3Font){this.showType3Text(g,et),(nn=this.dependencyTracker)==null||nn.recordShowTextOperation(g);return}const ut=ot.fontSize;if(ut===0){(ln=this.dependencyTracker)==null||ln.recordOperation(g);return}const dt=this.ctx,ft=ot.fontSizeScale,St=ot.charSpacing,kt=ot.wordSpacing,Tt=ot.fontDirection,Rt=ot.textHScale*Tt,jt=et.length,$t=ct.vertical,Ft=$t?1:-1,Ht=ct.defaultVMetrics,Kt=ut*ot.fontMatrix[0],Bt=ot.textRenderingMode===TextRenderingMode.FILL&&!ct.disableFontFace&&!ot.patternFill;dt.save(),ot.textMatrix&&dt.transform(...ot.textMatrix),dt.translate(ot.x,ot.y+ot.textRise),Tt>0?dt.scale(Rt,-1):dt.scale(Rt,1);let Ut,Yt;if(ot.patternFill){dt.save();const dn=ot.fillColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.FILL,g);Ut=getCurrentTransform(dt),dt.restore(),dt.fillStyle=dn}if(ot.patternStroke){dt.save();const dn=ot.strokeColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.STROKE,g);Yt=getCurrentTransform(dt),dt.restore(),dt.strokeStyle=dn}let Jt=ot.lineWidth;const Zt=ot.textMatrixScale;if(Zt===0||Jt===0){const dn=ot.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(dn===TextRenderingMode.STROKE||dn===TextRenderingMode.FILL_STROKE)&&(Jt=this.getSinglePixelWidth())}else Jt/=Zt;if(ft!==1&&(dt.scale(ft,ft),Jt/=ft),dt.lineWidth=Jt,ct.isInvalidPDFjsFont){const dn=[];let mn=0;for(const vn of et)dn.push(vn.unicode),mn+=vn.width;const yn=dn.join("");if(dt.fillText(yn,0,0),this.dependencyTracker!==null){const vn=dt.measureText(yn);this.dependencyTracker.recordBBox(g,this.ctx,-vn.actualBoundingBoxLeft,vn.actualBoundingBoxRight,-vn.actualBoundingBoxAscent,vn.actualBoundingBoxDescent).recordShowTextOperation(g)}ot.x+=mn*Kt*Rt,dt.restore(),this.compose();return}let en=0,tn;for(tn=0;tn<jt;++tn){const dn=et[tn];if(typeof dn=="number"){en+=Ft*dn*ut/1e3;continue}let mn=!1;const yn=(dn.isSpace?kt:0)+St,vn=dn.fontChar,hn=dn.accent;let pn,rn,on=dn.width;if($t){const xn=dn.vmetric||Ht,En=-(dn.vmetric?xn[1]:on*.5)*Kt,wn=xn[2]*Kt;on=xn?-xn[0]:on,pn=En/ft,rn=(en+wn)/ft}else pn=en/ft,rn=0;let gn;if(ct.remeasure&&on>0){gn=dt.measureText(vn);const xn=gn.width*1e3/ut*ft;if(on<xn&&this.isFontSubpixelAAEnabled){const En=on/xn;mn=!0,dt.save(),dt.scale(En,1),pn/=En}else on!==xn&&(pn+=(on-xn)/2e3*ut/ft)}if(this.contentVisible&&(dn.isInFont||ct.missingFile)){if(Bt&&!hn)dt.fillText(vn,pn,rn),(an=this.dependencyTracker)==null||an.recordCharacterBBox(g,dt,gn?{bbox:null}:ct,ut/ft,pn,rn,()=>gn??dt.measureText(vn));else if(this.paintChar(g,vn,pn,rn,Ut,Yt),hn){const xn=pn+ut*hn.offset.x/ft,En=rn-ut*hn.offset.y/ft;this.paintChar(g,hn.fontChar,xn,En,Ut,Yt)}}const un=$t?on*Kt-yn*Tt:on*Kt+yn*Tt;en+=un,mn&&dt.restore()}$t?ot.y-=en:ot.x+=en*Rt,dt.restore(),this.compose(),(sn=this.dependencyTracker)==null||sn.recordShowTextOperation(g)}showType3Text(g,et){const ot=this.ctx,ct=this.current,ut=ct.font,dt=ct.fontSize,ft=ct.fontDirection,St=ut.vertical?1:-1,kt=ct.charSpacing,Tt=ct.wordSpacing,Rt=ct.textHScale*ft,jt=ct.fontMatrix||FONT_IDENTITY_MATRIX,$t=et.length,Ft=ct.textRenderingMode===TextRenderingMode.INVISIBLE;let Ht,Kt,Bt,Ut;if(Ft||dt===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ot.save(),ct.textMatrix&&ot.transform(...ct.textMatrix),ot.translate(ct.x,ct.y+ct.textRise),ot.scale(Rt,ft);const Yt=this.dependencyTracker;for(this.dependencyTracker=Yt?new CanvasNestedDependencyTracker(Yt,g):null,Ht=0;Ht<$t;++Ht){if(Kt=et[Ht],typeof Kt=="number"){Ut=St*Kt*dt/1e3,this.ctx.translate(Ut,0),ct.x+=Ut*Rt;continue}const Jt=(Kt.isSpace?Tt:0)+kt,Zt=ut.charProcOperatorList[Kt.operatorListId];Zt?this.contentVisible&&(this.save(),ot.scale(dt,dt),ot.transform(...jt),this.executeOperatorList(Zt),this.restore()):warn(`Type3 character "${Kt.operatorListId}" is not available.`);const en=[Kt.width,0];Util.applyTransform(en,jt),Bt=en[0]*dt+Jt,ot.translate(Bt,0),ct.x+=Bt*Rt}ot.restore(),Yt&&(this.dependencyTracker=Yt)}setCharWidth(g,et,ot){}setCharWidthAndBounds(g,et,ot,ct,ut,dt,ft){var kt;const St=new Path2D;St.rect(ct,ut,dt-ct,ft-ut),this.ctx.clip(St),(kt=this.dependencyTracker)==null||kt.recordBBox(g,this.ctx,ct,dt,ut,ft).recordClipBox(g,this.ctx,ct,dt,ut,ft),this.endPath(g)}getColorN_Pattern(g,et){let ot;if(et[0]==="TilingPattern"){const ct=this.baseTransform||getCurrentTransform(this.ctx),ut={createCanvasGraphics:(dt,ft)=>new iA(dt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,ft,!0):null)};ot=new TilingPattern(et,this.ctx,ut,ct)}else ot=this._getPattern(g,et[1],et[2]);return ot}setStrokeColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.current.strokeColor=this.getColorN_Pattern(g,et),this.current.patternStroke=!0}setFillColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.current.fillColor=this.getColorN_Pattern(g,et),this.current.patternFill=!0}setStrokeRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor=et,this.current.patternStroke=!1}setStrokeTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor=et,this.current.patternFill=!1}setFillTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(g,et,ot=null){let ct;return this.cachedPatterns.has(et)?ct=this.cachedPatterns.get(et):(ct=getShadingPattern(this.getObject(g,et)),this.cachedPatterns.set(et,ct)),ot&&(ct.matrix=ot),ct}shadingFill(g,et){var dt;if(!this.contentVisible)return;const ot=this.ctx;this.save(g);const ct=this._getPattern(g,et);ot.fillStyle=ct.getPattern(ot,this,getCurrentTransformInverse(ot),PathType.SHADING,g);const ut=getCurrentTransformInverse(ot);if(ut){const{width:ft,height:St}=ot.canvas,kt=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,ft,St],ut,kt);const[Tt,Rt,jt,$t]=kt;this.ctx.fillRect(Tt,Rt,jt-Tt,$t-Rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordFullPageBBox(g).recordDependencies(g,Dependencies.transform).recordDependencies(g,Dependencies.fill).recordOperation(g),this.compose(this.current.getClippedPathBoundingBox()),this.restore(g)}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(g,et,ot){var ct;if(this.contentVisible&&(this.save(g),this.baseTransformStack.push(this.baseTransform),et&&this.transform(g,...et),this.baseTransform=getCurrentTransform(this.ctx),ot)){Util.axialAlignedBoundingBox(ot,this.baseTransform,this.current.minMax);const[ut,dt,ft,St]=ot,kt=new Path2D;kt.rect(ut,dt,ft-ut,St-dt),this.ctx.clip(kt),(ct=this.dependencyTracker)==null||ct.recordClipBox(g,this.ctx,ut,ft,dt,St),this.endPath(g)}}paintFormXObjectEnd(g){this.contentVisible&&(this.restore(g),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g,et){var Yt;if(!this.contentVisible)return;this.save(g),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ot=this.ctx;et.isolated||info("TODO: Support non-isolated groups."),et.knockout&&warn("Knockout groups not supported.");const ct=getCurrentTransform(ot);if(et.matrix&&ot.transform(...et.matrix),!et.bbox)throw new Error("Bounding box is required.");let ut=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox(et.bbox,getCurrentTransform(ot),ut);const dt=[0,0,ot.canvas.width,ot.canvas.height];ut=Util.intersect(ut,dt)||[0,0,0,0];const ft=Math.floor(ut[0]),St=Math.floor(ut[1]),kt=Math.max(Math.ceil(ut[2])-ft,1),Tt=Math.max(Math.ceil(ut[3])-St,1);this.current.startNewPathAndClipBox([0,0,kt,Tt]);let Rt="groupAt"+this.groupLevel;et.smask&&(Rt+="_smask_"+this.smaskCounter++%2);const jt=this.cachedCanvases.getCanvas(Rt,kt,Tt),$t=jt.context;$t.translate(-ft,-St),$t.transform(...ct);let Ft=new Path2D;const[Ht,Kt,Bt,Ut]=et.bbox;if(Ft.rect(Ht,Kt,Bt-Ht,Ut-Kt),et.matrix){const Jt=new Path2D;Jt.addPath(Ft,new DOMMatrix(et.matrix)),Ft=Jt}$t.clip(Ft),et.smask&&this.smaskStack.push({canvas:jt.canvas,context:$t,offsetX:ft,offsetY:St,subtype:et.smask.subtype,backdrop:et.smask.backdrop,transferMap:et.smask.transferMap||null,startTransformInverse:null}),(!et.smask||this.dependencyTracker)&&(ot.setTransform(1,0,0,1,0,0),ot.translate(ft,St),ot.save()),copyCtxState(ot,$t),this.ctx=$t,(Yt=this.dependencyTracker)==null||Yt.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(ot),this.setGState(g,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ot),this.groupLevel++}endGroup(g,et){var ut;if(!this.contentVisible)return;this.groupLevel--;const ot=this.ctx,ct=this.groupStack.pop();if(this.ctx=ct,this.ctx.imageSmoothingEnabled=!1,(ut=this.dependencyTracker)==null||ut.popBaseTransform(),et.smask)this.tempSMask=this.smaskStack.pop(),this.restore(g),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const dt=getCurrentTransform(this.ctx);this.restore(g),this.ctx.save(),this.ctx.setTransform(...dt);const ft=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,ot.canvas.width,ot.canvas.height],dt,ft),this.ctx.drawImage(ot.canvas,0,0),this.ctx.restore(),this.compose(ft)}}beginAnnotation(g,et,ot,ct,ut,dt){if(bn(this,Uv,yw).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(g),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),ot){const ft=ot[2]-ot[0],St=ot[3]-ot[1];if(dt&&this.annotationCanvasMap){ct=ct.slice(),ct[4]-=ot[0],ct[5]-=ot[1],ot=ot.slice(),ot[0]=ot[1]=0,ot[2]=ft,ot[3]=St,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:kt}=this,Tt=Math.ceil(ft*this.outputScaleX*kt),Rt=Math.ceil(St*this.outputScaleY*kt);this.annotationCanvas=this.canvasFactory.create(Tt,Rt);const{canvas:jt,context:$t}=this.annotationCanvas;this.annotationCanvasMap.set(et,jt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=$t,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,St*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(g);const kt=new Path2D;kt.rect(ot[0],ot[1],ft,St),this.ctx.clip(kt)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(g,...ct),this.transform(g,...ut)}endAnnotation(g){this.annotationCanvas&&(this.ctx.restore(),bn(this,Gv,xw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g,et){var ft;if(!this.contentVisible)return;const ot=et.count;et=this.getObject(g,et.data,et),et.count=ot;const ct=this.ctx,ut=this._createMaskCanvas(g,et),dt=ut.canvas;ct.save(),ct.setTransform(1,0,0,1,0,0),ct.drawImage(dt,ut.offsetX,ut.offsetY),(ft=this.dependencyTracker)==null||ft.resetBBox(g).recordBBox(g,this.ctx,ut.offsetX,ut.offsetX+dt.width,ut.offsetY,ut.offsetY+dt.height).recordOperation(g),ct.restore(),this.compose()}paintImageMaskXObjectRepeat(g,et,ot,ct=0,ut=0,dt,ft){var Rt,jt,$t;if(!this.contentVisible)return;et=this.getObject(g,et.data,et);const St=this.ctx;St.save();const kt=getCurrentTransform(St);St.transform(ot,ct,ut,dt,0,0);const Tt=this._createMaskCanvas(g,et);St.setTransform(1,0,0,1,Tt.offsetX-kt[4],Tt.offsetY-kt[5]),(Rt=this.dependencyTracker)==null||Rt.resetBBox(g);for(let Ft=0,Ht=ft.length;Ft<Ht;Ft+=2){const Kt=Util.transform(kt,[ot,ct,ut,dt,ft[Ft],ft[Ft+1]]);St.drawImage(Tt.canvas,Kt[4],Kt[5]),(jt=this.dependencyTracker)==null||jt.recordBBox(g,this.ctx,Kt[4],Kt[4]+Tt.canvas.width,Kt[5],Kt[5]+Tt.canvas.height)}St.restore(),this.compose(),($t=this.dependencyTracker)==null||$t.recordOperation(g)}paintImageMaskXObjectGroup(g,et){var dt,ft,St;if(!this.contentVisible)return;const ot=this.ctx,ct=this.current.fillColor,ut=this.current.patternFill;(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordDependencies(g,Dependencies.transformAndFill);for(const kt of et){const{data:Tt,width:Rt,height:jt,transform:$t}=kt,Ft=this.cachedCanvases.getCanvas("maskCanvas",Rt,jt),Ht=Ft.context;Ht.save();const Kt=this.getObject(g,Tt,kt);putBinaryImageMask(Ht,Kt),Ht.globalCompositeOperation="source-in",Ht.fillStyle=ut?ct.getPattern(Ht,this,getCurrentTransformInverse(ot),PathType.FILL,g):ct,Ht.fillRect(0,0,Rt,jt),Ht.restore(),ot.save(),ot.transform(...$t),ot.scale(1,-1),drawImageAtIntegerCoords(ot,Ft.canvas,0,0,Rt,jt,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ot,0,Rt,0,jt),ot.restore()}this.compose(),(St=this.dependencyTracker)==null||St.recordOperation(g)}paintImageXObject(g,et){if(!this.contentVisible)return;const ot=this.getObject(g,et);if(!ot){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g,ot)}paintImageXObjectRepeat(g,et,ot,ct,ut){if(!this.contentVisible)return;const dt=this.getObject(g,et);if(!dt){warn("Dependent image isn't ready yet");return}const ft=dt.width,St=dt.height,kt=[];for(let Tt=0,Rt=ut.length;Tt<Rt;Tt+=2)kt.push({transform:[ot,0,0,ct,ut[Tt],ut[Tt+1]],x:0,y:0,w:ft,h:St});this.paintInlineImageXObjectGroup(g,dt,kt)}applyTransferMapsToCanvas(g){return this.current.transferMaps!=="none"&&(g.filter=this.current.transferMaps,g.drawImage(g.canvas,0,0),g.filter="none"),g.canvas}applyTransferMapsToBitmap(g){if(this.current.transferMaps==="none")return g.bitmap;const{bitmap:et,width:ot,height:ct}=g,ut=this.cachedCanvases.getCanvas("inlineImage",ot,ct),dt=ut.context;return dt.filter=this.current.transferMaps,dt.drawImage(et,0,0),dt.filter="none",ut.canvas}paintInlineImageXObject(g,et){var kt;if(!this.contentVisible)return;const ot=et.width,ct=et.height,ut=this.ctx;this.save(g);const{filter:dt}=ut;dt!=="none"&&dt!==""&&(ut.filter="none"),ut.scale(1/ot,-1/ct);let ft;if(et.bitmap)ft=this.applyTransferMapsToBitmap(et);else if(typeof HTMLElement=="function"&&et instanceof HTMLElement||!et.data)ft=et;else{const Rt=this.cachedCanvases.getCanvas("inlineImage",ot,ct).context;putBinaryImageData(Rt,et),ft=this.applyTransferMapsToCanvas(Rt)}const St=this._scaleImage(ft,getCurrentTransformInverse(ut));ut.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ut),et.interpolate),(kt=this.dependencyTracker)==null||kt.resetBBox(g).recordBBox(g,ut,0,ot,-ct,0).recordDependencies(g,Dependencies.imageXObject).recordOperation(g),drawImageAtIntegerCoords(ut,St.img,0,0,St.paintWidth,St.paintHeight,0,-ct,ot,ct),this.compose(),this.restore(g)}paintInlineImageXObjectGroup(g,et,ot){var dt,ft,St;if(!this.contentVisible)return;const ct=this.ctx;let ut;if(et.bitmap)ut=et.bitmap;else{const kt=et.width,Tt=et.height,jt=this.cachedCanvases.getCanvas("inlineImage",kt,Tt).context;putBinaryImageData(jt,et),ut=this.applyTransferMapsToCanvas(jt)}(dt=this.dependencyTracker)==null||dt.resetBBox(g);for(const kt of ot)ct.save(),ct.transform(...kt.transform),ct.scale(1,-1),drawImageAtIntegerCoords(ct,ut,kt.x,kt.y,kt.w,kt.h,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ct,0,1,-1,0),ct.restore();(St=this.dependencyTracker)==null||St.recordOperation(g),this.compose()}paintSolidColorImageMask(g){var et;this.contentVisible&&((et=this.dependencyTracker)==null||et.resetBBox(g).recordBBox(g,this.ctx,0,1,0,1).recordDependencies(g,Dependencies.fill).recordOperation(g),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g,et){}markPointProps(g,et,ot){}beginMarkedContent(g,et){var ot;(ot=this.dependencyTracker)==null||ot.beginMarkedContent(g),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,et,ot){var ct;(ct=this.dependencyTracker)==null||ct.beginMarkedContent(g),et==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ot)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(g){var et;(et=this.dependencyTracker)==null||et.endMarkedContent(g),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(g){}endCompat(g){}consumePath(g,et,ot){var dt,ft;const ct=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ot);const ut=this.ctx;this.pendingClip?(ct||(this.pendingClip===EO_CLIP?ut.clip(et,"evenodd"):ut.clip(et)),this.pendingClip=null,(dt=this.dependencyTracker)==null||dt.bboxToClipBoxDropOperation(g).recordFutureForcedDependency("clipPath",g)):(ft=this.dependencyTracker)==null||ft.recordOperation(g),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=getCurrentTransform(this.ctx);if(g[1]===0&&g[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const et=Math.abs(g[0]*g[3]-g[2]*g[1]),ot=Math.hypot(g[0],g[2]),ct=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(ot,ct)/et}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:g}=this.current,{a:et,b:ot,c:ct,d:ut}=this.ctx.getTransform();let dt,ft;if(ot===0&&ct===0){const St=Math.abs(et),kt=Math.abs(ut);if(St===kt)if(g===0)dt=ft=1/St;else{const Tt=St*g;dt=ft=Tt<1?1/Tt:1}else if(g===0)dt=1/St,ft=1/kt;else{const Tt=St*g,Rt=kt*g;dt=Tt<1?1/Tt:1,ft=Rt<1?1/Rt:1}}else{const St=Math.abs(et*ut-ot*ct),kt=Math.hypot(et,ot),Tt=Math.hypot(ct,ut);if(g===0)dt=Tt/St,ft=kt/St;else{const Rt=g*St;dt=Tt>Rt?Tt/Rt:1,ft=kt>Rt?kt/Rt:1}}this._cachedScaleForStroking[0]=dt,this._cachedScaleForStroking[1]=ft}return this._cachedScaleForStroking}rescaleAndStroke(g,et){const{ctx:ot,current:{lineWidth:ct}}=this,[ut,dt]=this.getScaleForStroking();if(ut===dt){ot.lineWidth=(ct||1)*ut,ot.stroke(g);return}const ft=ot.getLineDash();et&&ot.save(),ot.scale(ut,dt),SCALE_MATRIX.a=1/ut,SCALE_MATRIX.d=1/dt;const St=new Path2D;if(St.addPath(g,SCALE_MATRIX),ft.length>0){const kt=Math.max(ut,dt);ot.setLineDash(ft.map(Tt=>Tt/kt)),ot.lineDashOffset/=kt}ot.lineWidth=ct||1,ot.stroke(St),et&&ot.restore()}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}};Uv=new WeakSet,yw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Gv=new WeakSet,xw=function(){if(this.pageColors){const g=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(g!=="none"){const et=this.ctx.filter;this.ctx.filter=g,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=et}}},Wv=new WeakSet,bw=function(g,et,ot){const ct=new Path2D;return ct.addPath(g,new DOMMatrix(ot).invertSelf().multiplySelf(et)),ct};let CanvasGraphics=iA;for(const it in OPS)CanvasGraphics.prototype[it]!==void 0&&(CanvasGraphics.prototype[OPS[it]]=CanvasGraphics.prototype[it]);var fy,py,qv,my,D1;const Mm=class Mm{constructor(g){cn(this,my);cn(this,fy,void 0);cn(this,py,void 0);cn(this,qv,void 0);fn(this,fy,g),fn(this,py,new DataView(zt(this,fy))),fn(this,qv,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ct=0;for(const kt of Mm.strings){const Tt=et.encode(g[kt]);ot[kt]=Tt,ct+=4+Tt.length}const ut=new ArrayBuffer(ct),dt=new Uint8Array(ut),ft=new DataView(ut);let St=0;for(const kt of Mm.strings){const Tt=ot[kt],Rt=Tt.length;ft.setUint32(St,Rt),dt.set(Tt,St+4),St+=4+Rt}return assert(St===ut.byteLength,"CssFontInfo.write: Buffer overflow"),ut}get fontFamily(){return bn(this,my,D1).call(this,0)}get fontWeight(){return bn(this,my,D1).call(this,1)}get italicAngle(){return bn(this,my,D1).call(this,2)}};fy=new WeakMap,py=new WeakMap,qv=new WeakMap,my=new WeakSet,D1=function(g){assert(g<Mm.strings.length,"Invalid string index");let et=0;for(let ct=0;ct<g;ct++)et+=zt(this,py).getUint32(et)+4;const ot=zt(this,py).getUint32(et);return zt(this,qv).decode(new Uint8Array(zt(this,fy),et+4,ot))},jn(Mm,"strings",["fontFamily","fontWeight","italicAngle"]);let CssFontInfo=Mm;var hu,wo,_p,Rp,V0;const Nm=class Nm{constructor(g){cn(this,Rp);cn(this,hu,void 0);cn(this,wo,void 0);cn(this,_p,void 0);fn(this,hu,g),fn(this,wo,new DataView(zt(this,hu))),fn(this,_p,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ct=0;for(const jt of Nm.strings){const $t=et.encode(g[jt]);ot[jt]=$t,ct+=4+$t.length}ct+=4;let ut,dt,ft=1+ct;g.style&&(ut=et.encode(g.style.style),dt=et.encode(g.style.weight),ft+=4+ut.length+4+dt.length);const St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let Rt=0;Tt.setUint8(Rt++,g.guessFallback?1:0),Tt.setUint32(Rt,0),Rt+=4,ct=0;for(const jt of Nm.strings){const $t=ot[jt],Ft=$t.length;ct+=4+Ft,Tt.setUint32(Rt,Ft),kt.set($t,Rt+4),Rt+=4+Ft}return Tt.setUint32(Rt-ct-4,ct),g.style&&(Tt.setUint32(Rt,ut.length),kt.set(ut,Rt+4),Rt+=4+ut.length,Tt.setUint32(Rt,dt.length),kt.set(dt,Rt+4),Rt+=4+dt.length),assert(Rt<=St.byteLength,"SubstitionInfo.write: Buffer overflow"),St.transferToFixedLength(Rt)}get guessFallback(){return zt(this,wo).getUint8(0)!==0}get css(){return bn(this,Rp,V0).call(this,0)}get loadedName(){return bn(this,Rp,V0).call(this,1)}get baseFontName(){return bn(this,Rp,V0).call(this,2)}get src(){return bn(this,Rp,V0).call(this,3)}get style(){let g=1;g+=4+zt(this,wo).getUint32(g);const et=zt(this,wo).getUint32(g),ot=zt(this,_p).decode(new Uint8Array(zt(this,hu),g+4,et));g+=4+et;const ct=zt(this,wo).getUint32(g),ut=zt(this,_p).decode(new Uint8Array(zt(this,hu),g+4,ct));return{style:ot,weight:ut}}};hu=new WeakMap,wo=new WeakMap,_p=new WeakMap,Rp=new WeakSet,V0=function(g){assert(g<Nm.strings.length,"Invalid string index");let et=5;for(let ct=0;ct<g;ct++)et+=zt(this,wo).getUint32(et)+4;const ot=zt(this,wo).getUint32(et);return zt(this,_p).decode(new Uint8Array(zt(this,hu),et+4,ot))},jn(Nm,"strings",["css","loadedName","baseFontName","src"]);let SystemFontInfo=Nm;var gy,yy,vy,xy,ms,ko,Kv,ir,gs,zs,by,I1,Pp,z0;const qn=class qn{constructor({data:g,extra:et}){cn(this,gs);cn(this,by);cn(this,Pp);cn(this,ko,void 0);cn(this,Kv,void 0);cn(this,ir,void 0);fn(this,ko,g),fn(this,Kv,new TextDecoder),fn(this,ir,new DataView(zt(this,ko))),et&&Object.assign(this,et)}get black(){return bn(this,gs,zs).call(this,0)}get bold(){return bn(this,gs,zs).call(this,1)}get disableFontFace(){return bn(this,gs,zs).call(this,2)}get fontExtraProperties(){return bn(this,gs,zs).call(this,3)}get isInvalidPDFjsFont(){return bn(this,gs,zs).call(this,4)}get isType3Font(){return bn(this,gs,zs).call(this,5)}get italic(){return bn(this,gs,zs).call(this,6)}get missingFile(){return bn(this,gs,zs).call(this,7)}get remeasure(){return bn(this,gs,zs).call(this,8)}get vertical(){return bn(this,gs,zs).call(this,9)}get ascent(){return bn(this,by,I1).call(this,0)}get defaultWidth(){return bn(this,by,I1).call(this,1)}get descent(){return bn(this,by,I1).call(this,2)}get bbox(){let g=zt(qn,yy);if(zt(this,ir).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<4;ct++)ot.push(zt(this,ir).getInt16(g,!0)),g+=2;return ot}get fontMatrix(){let g=zt(qn,vy);if(zt(this,ir).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<6;ct++)ot.push(zt(this,ir).getFloat64(g,!0)),g+=8;return ot}get defaultVMetrics(){let g=zt(qn,xy);if(zt(this,ir).getUint8(g)===0)return;g+=1;const ot=[];for(let ct=0;ct<3;ct++)ot.push(zt(this,ir).getInt16(g,!0)),g+=2;return ot}get fallbackName(){return bn(this,Pp,z0).call(this,0)}get loadedName(){return bn(this,Pp,z0).call(this,1)}get mimetype(){return bn(this,Pp,z0).call(this,2)}get name(){return bn(this,Pp,z0).call(this,3)}get data(){let g=zt(qn,ms);const et=zt(this,ir).getUint32(g);g+=4+et;const ot=zt(this,ir).getUint32(g);g+=4+ot;const ct=zt(this,ir).getUint32(g);g+=4+ct;const ut=zt(this,ir).getUint32(g);if(ut!==0)return new Uint8Array(zt(this,ko),g+4,ut)}clearData(){let g=zt(qn,ms);const et=zt(this,ir).getUint32(g);g+=4+et;const ot=zt(this,ir).getUint32(g);g+=4+ot;const ct=zt(this,ir).getUint32(g);g+=4+ct;const ut=zt(this,ir).getUint32(g);new Uint8Array(zt(this,ko),g+4,ut).fill(0),zt(this,ir).setUint32(g,0)}get cssFontInfo(){let g=zt(qn,ms);const et=zt(this,ir).getUint32(g);g+=4+et;const ot=zt(this,ir).getUint32(g);g+=4+ot;const ct=zt(this,ir).getUint32(g);if(ct===0)return null;const ut=new Uint8Array(ct);return ut.set(new Uint8Array(zt(this,ko),g+4,ct)),new CssFontInfo(ut.buffer)}get systemFontInfo(){let g=zt(qn,ms);const et=zt(this,ir).getUint32(g);g+=4+et;const ot=zt(this,ir).getUint32(g);if(ot===0)return null;const ct=new Uint8Array(ot);return ct.set(new Uint8Array(zt(this,ko),g+4,ot)),new SystemFontInfo(ct.buffer)}static write(g){const et=g.systemFontInfo?SystemFontInfo.write(g.systemFontInfo):null,ot=g.cssFontInfo?CssFontInfo.write(g.cssFontInfo):null,ct=new TextEncoder,ut={};let dt=0;for(const Ht of qn.strings)ut[Ht]=ct.encode(g[Ht]),dt+=4+ut[Ht].length;const ft=zt(qn,ms)+4+dt+4+(et?et.byteLength:0)+4+(ot?ot.byteLength:0)+4+(g.data?g.data.length:0),St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let Rt=0;const jt=qn.bools.length;let $t=0,Ft=0;for(let Ht=0;Ht<jt;Ht++){const Kt=g[qn.bools[Ht]];$t|=(Kt===void 0?0:Kt?2:1)<<Ft,Ft+=2,(Ft===8||Ht===jt-1)&&(Tt.setUint8(Rt++,$t),$t=0,Ft=0)}assert(Rt===zt(qn,gy),"FontInfo.write: Boolean properties offset mismatch");for(const Ht of qn.numbers)Tt.setFloat64(Rt,g[Ht]),Rt+=8;if(assert(Rt===zt(qn,yy),"FontInfo.write: Number properties offset mismatch"),g.bbox){Tt.setUint8(Rt++,4);for(const Ht of g.bbox)Tt.setInt16(Rt,Ht,!0),Rt+=2}else Tt.setUint8(Rt++,0),Rt+=2*4;if(assert(Rt===zt(qn,vy),"FontInfo.write: BBox properties offset mismatch"),g.fontMatrix){Tt.setUint8(Rt++,6);for(const Ht of g.fontMatrix)Tt.setFloat64(Rt,Ht,!0),Rt+=8}else Tt.setUint8(Rt++,0),Rt+=8*6;if(assert(Rt===zt(qn,xy),"FontInfo.write: FontMatrix properties offset mismatch"),g.defaultVMetrics){Tt.setUint8(Rt++,1);for(const Ht of g.defaultVMetrics)Tt.setInt16(Rt,Ht,!0),Rt+=2}else Tt.setUint8(Rt++,0),Rt+=3*2;assert(Rt===zt(qn,ms),"FontInfo.write: DefaultVMetrics properties offset mismatch"),Tt.setUint32(zt(qn,ms),0),Rt+=4;for(const Ht of qn.strings){const Kt=ut[Ht],Bt=Kt.length;Tt.setUint32(Rt,Bt),kt.set(Kt,Rt+4),Rt+=4+Bt}if(Tt.setUint32(zt(qn,ms),Rt-zt(qn,ms)-4),!et)Tt.setUint32(Rt,0),Rt+=4;else{const Ht=et.byteLength;Tt.setUint32(Rt,Ht),assert(Rt+4+Ht<=St.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),kt.set(new Uint8Array(et),Rt+4),Rt+=4+Ht}if(!ot)Tt.setUint32(Rt,0),Rt+=4;else{const Ht=ot.byteLength;Tt.setUint32(Rt,Ht),assert(Rt+4+Ht<=St.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),kt.set(new Uint8Array(ot),Rt+4),Rt+=4+Ht}return g.data===void 0?(Tt.setUint32(Rt,0),Rt+=4):(Tt.setUint32(Rt,g.data.length),kt.set(g.data,Rt+4),Rt+=4+g.data.length),assert(Rt<=St.byteLength,"FontInfo.write: Buffer overflow"),St.transferToFixedLength(Rt)}};gy=new WeakMap,yy=new WeakMap,vy=new WeakMap,xy=new WeakMap,ms=new WeakMap,ko=new WeakMap,Kv=new WeakMap,ir=new WeakMap,gs=new WeakSet,zs=function(g){assert(g<qn.bools.length,"Invalid boolean index");const et=Math.floor(g/4),ot=g*2%8,ct=zt(this,ir).getUint8(et)>>ot&3;return ct===0?void 0:ct===2},by=new WeakSet,I1=function(g){return assert(g<qn.numbers.length,"Invalid number index"),zt(this,ir).getFloat64(zt(qn,gy)+g*8)},Pp=new WeakSet,z0=function(g){assert(g<qn.strings.length,"Invalid string index");let et=zt(qn,ms)+4;for(let ut=0;ut<g;ut++)et+=zt(this,ir).getUint32(et)+4;const ot=zt(this,ir).getUint32(et),ct=new Uint8Array(ot);return ct.set(new Uint8Array(zt(this,ko),et+4,ot)),zt(this,Kv).decode(ct)},jn(qn,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),jn(qn,"numbers",["ascent","defaultWidth","descent"]),jn(qn,"strings",["fallbackName","loadedName","mimetype","name"]),cn(qn,gy,Math.ceil(qn.bools.length*2/8)),cn(qn,yy,zt(qn,gy)+qn.numbers.length*8),cn(qn,vy,zt(qn,yy)+1+2*4),cn(qn,xy,zt(qn,vy)+1+8*6),cn(qn,ms,zt(qn,xy)+1+2*3);let FontInfo=qn;var Yv,Xv;class GlobalWorkerOptions{static get workerPort(){return zt(this,Yv)}static set workerPort(g){if(!(typeof Worker<"u"&&g instanceof Worker)&&g!==null)throw new Error("Invalid `workerPort` type.");fn(this,Yv,g)}static get workerSrc(){return zt(this,Xv)}static set workerSrc(g){if(typeof g!="string")throw new Error("Invalid `workerSrc` type.");fn(this,Xv,g)}}Yv=new WeakMap,Xv=new WeakMap,cn(GlobalWorkerOptions,Yv,null),cn(GlobalWorkerOptions,Xv,"");var Ey,Jv;class Metadata{constructor({parsedData:g,rawData:et}){cn(this,Ey,void 0);cn(this,Jv,void 0);fn(this,Ey,g),fn(this,Jv,et)}getRaw(){return zt(this,Jv)}get(g){return zt(this,Ey).get(g)??null}[Symbol.iterator](){return zt(this,Ey).entries()}}Ey=new WeakMap,Jv=new WeakMap;const INTERNAL=Symbol("INTERNAL");var Zv,Qv,ex,Sy;class OptionalContentGroup{constructor(g,{name:et,intent:ot,usage:ct,rbGroups:ut}){cn(this,Zv,!1);cn(this,Qv,!1);cn(this,ex,!1);cn(this,Sy,!0);fn(this,Zv,!!(g&RenderingIntentFlag.DISPLAY)),fn(this,Qv,!!(g&RenderingIntentFlag.PRINT)),this.name=et,this.intent=ot,this.usage=ct,this.rbGroups=ut}get visible(){if(zt(this,ex))return zt(this,Sy);if(!zt(this,Sy))return!1;const{print:g,view:et}=this.usage;return zt(this,Zv)?(et==null?void 0:et.viewState)!=="OFF":zt(this,Qv)?(g==null?void 0:g.printState)!=="OFF":!0}_setVisible(g,et,ot=!1){g!==INTERNAL&&unreachable("Internal method `_setVisible` called."),fn(this,ex,ot),fn(this,Sy,et)}}Zv=new WeakMap,Qv=new WeakMap,ex=new WeakMap,Sy=new WeakMap;var du,sr,wy,ky,tx,Ew;class OptionalContentConfig{constructor(g,et=RenderingIntentFlag.DISPLAY){cn(this,tx);cn(this,du,null);cn(this,sr,new Map);cn(this,wy,null);cn(this,ky,null);if(this.renderingIntent=et,this.name=null,this.creator=null,g!==null){this.name=g.name,this.creator=g.creator,fn(this,ky,g.order);for(const ot of g.groups)zt(this,sr).set(ot.id,new OptionalContentGroup(et,ot));if(g.baseState==="OFF")for(const ot of zt(this,sr).values())ot._setVisible(INTERNAL,!1);for(const ot of g.on)zt(this,sr).get(ot)._setVisible(INTERNAL,!0);for(const ot of g.off)zt(this,sr).get(ot)._setVisible(INTERNAL,!1);fn(this,wy,this.getHash())}}isVisible(g){if(zt(this,sr).size===0)return!0;if(!g)return info("Optional content group not defined."),!0;if(g.type==="OCG")return zt(this,sr).has(g.id)?zt(this,sr).get(g.id).visible:(warn(`Optional content group not found: ${g.id}`),!0);if(g.type==="OCMD"){if(g.expression)return bn(this,tx,Ew).call(this,g.expression);if(!g.policy||g.policy==="AnyOn"){for(const et of g.ids){if(!zt(this,sr).has(et))return warn(`Optional content group not found: ${et}`),!0;if(zt(this,sr).get(et).visible)return!0}return!1}else if(g.policy==="AllOn"){for(const et of g.ids){if(!zt(this,sr).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!zt(this,sr).get(et).visible)return!1}return!0}else if(g.policy==="AnyOff"){for(const et of g.ids){if(!zt(this,sr).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!zt(this,sr).get(et).visible)return!0}return!1}else if(g.policy==="AllOff"){for(const et of g.ids){if(!zt(this,sr).has(et))return warn(`Optional content group not found: ${et}`),!0;if(zt(this,sr).get(et).visible)return!1}return!0}return warn(`Unknown optional content policy ${g.policy}.`),!0}return warn(`Unknown group type ${g.type}.`),!0}setVisibility(g,et=!0,ot=!0){var ut;const ct=zt(this,sr).get(g);if(!ct){warn(`Optional content group not found: ${g}`);return}if(ot&&et&&ct.rbGroups.length)for(const dt of ct.rbGroups)for(const ft of dt)ft!==g&&((ut=zt(this,sr).get(ft))==null||ut._setVisible(INTERNAL,!1,!0));ct._setVisible(INTERNAL,!!et,!0),fn(this,du,null)}setOCGState({state:g,preserveRB:et}){let ot;for(const ct of g){switch(ct){case"ON":case"OFF":case"Toggle":ot=ct;continue}const ut=zt(this,sr).get(ct);if(ut)switch(ot){case"ON":this.setVisibility(ct,!0,et);break;case"OFF":this.setVisibility(ct,!1,et);break;case"Toggle":this.setVisibility(ct,!ut.visible,et);break}}fn(this,du,null)}get hasInitialVisibility(){return zt(this,wy)===null||this.getHash()===zt(this,wy)}getOrder(){return zt(this,sr).size?zt(this,ky)?zt(this,ky).slice():[...zt(this,sr).keys()]:null}getGroup(g){return zt(this,sr).get(g)||null}getHash(){if(zt(this,du)!==null)return zt(this,du);const g=new MurmurHash3_64;for(const[et,ot]of zt(this,sr))g.update(`${et}:${ot.visible}`);return fn(this,du,g.hexdigest())}[Symbol.iterator](){return zt(this,sr).entries()}}du=new WeakMap,sr=new WeakMap,wy=new WeakMap,ky=new WeakMap,tx=new WeakSet,Ew=function(g){const et=g.length;if(et<2)return!0;const ot=g[0];for(let ct=1;ct<et;ct++){const ut=g[ct];let dt;if(Array.isArray(ut))dt=bn(this,tx,Ew).call(this,ut);else if(zt(this,sr).has(ut))dt=zt(this,sr).get(ut).visible;else return warn(`Optional content group not found: ${ut}`),!0;switch(ot){case"And":if(!dt)return!1;break;case"Or":if(dt)return!0;break;case"Not":return!dt;default:return!0}}return ot==="And"};class PDFDataTransportStream{constructor(g,{disableRange:et=!1,disableStream:ot=!1}){assert(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:ct,initialData:ut,progressiveDone:dt,contentDispositionFilename:ft}=g;if(this._queuedChunks=[],this._progressiveDone=dt,this._contentDispositionFilename=ft,(ut==null?void 0:ut.length)>0){const St=ut instanceof Uint8Array&&ut.byteLength===ut.buffer.byteLength?ut.buffer:new Uint8Array(ut).buffer;this._queuedChunks.push(St)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!ot,this._isRangeSupported=!et,this._contentLength=ct,this._fullRequestReader=null,this._rangeReaders=[],g.addRangeListener((St,kt)=>{this._onReceiveData({begin:St,chunk:kt})}),g.addProgressListener((St,kt)=>{this._onProgress({loaded:St,total:kt})}),g.addProgressiveReadListener(St=>{this._onReceiveData({chunk:St})}),g.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),g.transportReady()}_onReceiveData({begin:g,chunk:et}){const ot=et instanceof Uint8Array&&et.byteLength===et.buffer.byteLength?et.buffer:new Uint8Array(et).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ot):this._queuedChunks.push(ot);else{const ct=this._rangeReaders.some(function(ut){return ut._begin!==g?!1:(ut._enqueue(ot),!0)});assert(ct,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var et,ot,ct,ut;g.total===void 0?(ot=(et=this._rangeReaders[0])==null?void 0:et.onProgress)==null||ot.call(et,{loaded:g.loaded}):(ut=(ct=this._fullRequestReader)==null?void 0:ct.onProgress)==null||ut.call(ct,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const et=this._rangeReaders.indexOf(g);et>=0&&this._rangeReaders.splice(et,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFDataTransportStreamRangeReader(this,g,et);return this._pdfDataRangeTransport.requestDataRange(g,et),this._rangeReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeReaders.slice(0))ot.cancel(g);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(g,et,ot=!1,ct=null){this._stream=g,this._done=ot||!1,this._filename=isPdfFile(ct)?ct:null,this._queuedChunks=et||[],this._loaded=0;for(const ut of this._queuedChunks)this._loaded+=ut.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(g,et,ot){this._stream=g,this._begin=et,this._end=ot,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(it){let g=!0,et=ot("filename\\*","i").exec(it);if(et){et=et[1];let Tt=ft(et);return Tt=unescape(Tt),Tt=St(Tt),Tt=kt(Tt),ut(Tt)}if(et=dt(it),et){const Tt=kt(et);return ut(Tt)}if(et=ot("filename","i").exec(it),et){et=et[1];let Tt=ft(et);return Tt=kt(Tt),ut(Tt)}function ot(Tt,Rt){return new RegExp("(?:^|;)\\s*"+Tt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Rt)}function ct(Tt,Rt){if(Tt){if(!/^[\x00-\xFF]+$/.test(Rt))return Rt;try{const jt=new TextDecoder(Tt,{fatal:!0}),$t=stringToBytes(Rt);Rt=jt.decode($t),g=!1}catch{}}return Rt}function ut(Tt){return g&&/[\x80-\xff]/.test(Tt)&&(Tt=ct("utf-8",Tt),g&&(Tt=ct("iso-8859-1",Tt))),Tt}function dt(Tt){const Rt=[];let jt;const $t=ot("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(jt=$t.exec(Tt))!==null;){let[,Ht,Kt,Bt]=jt;if(Ht=parseInt(Ht,10),Ht in Rt){if(Ht===0)break;continue}Rt[Ht]=[Kt,Bt]}const Ft=[];for(let Ht=0;Ht<Rt.length&&Ht in Rt;++Ht){let[Kt,Bt]=Rt[Ht];Bt=ft(Bt),Kt&&(Bt=unescape(Bt),Ht===0&&(Bt=St(Bt))),Ft.push(Bt)}return Ft.join("")}function ft(Tt){if(Tt.startsWith('"')){const Rt=Tt.slice(1).split('\\"');for(let jt=0;jt<Rt.length;++jt){const $t=Rt[jt].indexOf('"');$t!==-1&&(Rt[jt]=Rt[jt].slice(0,$t),Rt.length=jt+1),Rt[jt]=Rt[jt].replaceAll(/\\(.)/g,"$1")}Tt=Rt.join('"')}return Tt}function St(Tt){const Rt=Tt.indexOf("'");if(Rt===-1)return Tt;const jt=Tt.slice(0,Rt),Ft=Tt.slice(Rt+1).replace(/^[^']*'/,"");return ct(jt,Ft)}function kt(Tt){return!Tt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Tt)?Tt:Tt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Rt,jt,$t,Ft){if($t==="q"||$t==="Q")return Ft=Ft.replaceAll("_"," "),Ft=Ft.replaceAll(/=([0-9a-fA-F]{2})/g,function(Ht,Kt){return String.fromCharCode(parseInt(Kt,16))}),ct(jt,Ft);try{Ft=atob(Ft)}catch{}return ct(jt,Ft)})}return""}function createHeaders(it,g){const et=new Headers;if(!it||!g||typeof g!="object")return et;for(const ot in g){const ct=g[ot];ct!==void 0&&et.append(ot,ct)}return et}function getResponseOrigin(it){var g;return((g=URL.parse(it))==null?void 0:g.origin)??null}function validateRangeRequestCapabilities({responseHeaders:it,isHttp:g,rangeChunkSize:et,disableRange:ot}){const ct={allowRangeRequests:!1,suggestedLength:void 0},ut=parseInt(it.get("Content-Length"),10);return!Number.isInteger(ut)||(ct.suggestedLength=ut,ut<=2*et)||ot||!g||it.get("Accept-Ranges")!=="bytes"||(it.get("Content-Encoding")||"identity")!=="identity"||(ct.allowRangeRequests=!0),ct}function extractFilenameFromHeader(it){const g=it.get("Content-Disposition");if(g){let et=getFilenameFromContentDispositionHeader(g);if(et.includes("%"))try{et=decodeURIComponent(et)}catch{}if(isPdfFile(et))return et}return null}function createResponseError(it,g){return new ResponseException(`Unexpected server response (${it}) while retrieving PDF "${g}".`,it,it===404||it===0&&g.startsWith("file:"))}function validateResponseStatus(it){return it===200||it===206}function createFetchOptions(it,g,et){return{method:"GET",headers:it,signal:et.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(it){return it instanceof Uint8Array?it.buffer:it instanceof ArrayBuffer?it:(warn(`getArrayBuffer - unexpected data format: ${it}`),new Uint8Array(it).buffer)}class PDFFetchStream{constructor(g){jn(this,"_responseOrigin",null);this.source=g,this.isHttp=/^https?:/i.test(g.url),this.headers=createHeaders(this.isHttp,g.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFFetchStreamRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFFetchStreamReader{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const et=g.source;this._withCredentials=et.withCredentials||!1,this._contentLength=et.length,this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange;const ot=new Headers(g.headers),ct=et.url;fetch(ct,createFetchOptions(ot,this._withCredentials,this._abortController)).then(ut=>{if(g._responseOrigin=getResponseOrigin(ut.url),!validateResponseStatus(ut.status))throw createResponseError(ut.status,ct);this._reader=ut.body.getReader(),this._headersCapability.resolve();const dt=ut.headers,{allowRangeRequests:ft,suggestedLength:St}=validateRangeRequestCapabilities({responseHeaders:dt,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ft,this._contentLength=St||this._contentLength,this._filename=extractFilenameFromHeader(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(g,et,ot){this._stream=g,this._reader=null,this._loaded=0;const ct=g.source;this._withCredentials=ct.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!ct.disableStream,this._abortController=new AbortController;const ut=new Headers(g.headers);ut.append("Range",`bytes=${et}-${ot-1}`);const dt=ct.url;fetch(dt,createFetchOptions(ut,this._withCredentials,this._abortController)).then(ft=>{const St=getResponseOrigin(ft.url);if(St!==g._responseOrigin)throw new Error(`Expected range response-origin "${St}" to match "${g._responseOrigin}".`);if(!validateResponseStatus(ft.status))throw createResponseError(ft.status,dt);this._readCapability.resolve(),this._reader=ft.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(it){const g=it.response;return typeof g!="string"?g:stringToBytes(g).buffer}class NetworkManager{constructor({url:g,httpHeaders:et,withCredentials:ot}){jn(this,"_responseOrigin",null);this.url=g,this.isHttp=/^https?:/i.test(g),this.headers=createHeaders(this.isHttp,et),this.withCredentials=ot||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(g){const et=new XMLHttpRequest,ot=this.currXhrId++,ct=this.pendingRequests[ot]={xhr:et};et.open("GET",this.url),et.withCredentials=this.withCredentials;for(const[ut,dt]of this.headers)et.setRequestHeader(ut,dt);return this.isHttp&&"begin"in g&&"end"in g?(et.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),ct.expectedStatus=PARTIAL_CONTENT_RESPONSE):ct.expectedStatus=OK_RESPONSE,et.responseType="arraybuffer",assert(g.onError,"Expected `onError` callback to be provided."),et.onerror=()=>{g.onError(et.status)},et.onreadystatechange=this.onStateChange.bind(this,ot),et.onprogress=this.onProgress.bind(this,ot),ct.onHeadersReceived=g.onHeadersReceived,ct.onDone=g.onDone,ct.onError=g.onError,ct.onProgress=g.onProgress,et.send(null),ot}onProgress(g,et){var ct;const ot=this.pendingRequests[g];ot&&((ct=ot.onProgress)==null||ct.call(ot,et))}onStateChange(g,et){const ot=this.pendingRequests[g];if(!ot)return;const ct=ot.xhr;if(ct.readyState>=2&&ot.onHeadersReceived&&(ot.onHeadersReceived(),delete ot.onHeadersReceived),ct.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],ct.status===0&&this.isHttp){ot.onError(ct.status);return}const ut=ct.status||OK_RESPONSE;if(!(ut===OK_RESPONSE&&ot.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&ut!==ot.expectedStatus){ot.onError(ct.status);return}const ft=network_getArrayBuffer(ct);if(ut===PARTIAL_CONTENT_RESPONSE){const St=ct.getResponseHeader("Content-Range"),kt=/bytes (\d+)-(\d+)\/(\d+)/.exec(St);kt?ot.onDone({begin:parseInt(kt[1],10),chunk:ft}):(warn('Missing or invalid "Content-Range" header.'),ot.onError(0))}else ft?ot.onDone({begin:0,chunk:ft}):ot.onError(ct.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const et=this.pendingRequests[g].xhr;delete this.pendingRequests[g],et.abort()}}class PDFNetworkStream{constructor(g){this._source=g,this._manager=new NetworkManager(g),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const et=this._rangeRequestReaders.indexOf(g);et>=0&&this._rangeRequestReaders.splice(et,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(g,et){const ot=new PDFNetworkStreamRangeRequestReader(this._manager,g,et);return ot.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNetworkStreamFullRequestReader{constructor(g,et){this._manager=g,this._url=et.url,this._fullRequestId=g.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._contentLength=et.length,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,et=this._manager.getRequestXhr(g);this._manager._responseOrigin=getResponseOrigin(et.responseURL);const ot=et.getAllResponseHeaders(),ct=new Headers(ot?ot.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(ft=>{const[St,...kt]=ft.split(": ");return[St,kt.join(": ")]}):[]),{allowRangeRequests:ut,suggestedLength:dt}=validateRangeRequestCapabilities({responseHeaders:ct,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});ut&&(this._isRangeSupported=!0),this._contentLength=dt||this._contentLength,this._filename=extractFilenameFromHeader(ct),this._isRangeSupported&&this._manager.abortRequest(g),this._headersCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=createResponseError(g,this._url),this._headersCapability.reject(this._storedError);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){var et;(et=this.onProgress)==null||et.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersCapability.reject(g);for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(g,et,ot){this._manager=g,this._url=g.url,this._requestId=g.request({begin:et,end:ot,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var et;const g=getResponseOrigin((et=this._manager.getRequestXhr(this._requestId))==null?void 0:et.responseURL);g!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${g}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var g;(g=this.onClosed)==null||g.call(this,this)}_onDone(g){const et=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:et,done:!1}):this._queuedChunk=et,this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError??(this._storedError=createResponseError(g,this._url));for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){var et;this.isStreamingSupported||(et=this.onProgress)==null||et.call(this,{loaded:g.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(it){if(urlRegex.test(it))return new URL(it);const g=process.getBuiltinModule("url");return new URL(g.pathToFileURL(it))}class PDFNodeStream{constructor(g){this.source=g,this.url=parseUrlOrPath(g.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFNodeStreamFsRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNodeStreamFsFullReader{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const et=g.source;this._contentLength=et.length,this._loaded=0,this._filename=null,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const ot=process.getBuiltinModule("fs");ot.promises.lstat(this._url).then(ct=>{this._contentLength=ct.size,this._setReadableStream(ot.createReadStream(this._url)),this._headersCapability.resolve()},ct=>{ct.code==="ENOENT"&&(ct=createResponseError(0,this._url.href)),this._storedError=ct,this._headersCapability.reject(ct)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(g,et,ot){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ct=g.source;this._isStreamingSupported=!ct.disableStream;const ut=process.getBuiltinModule("fs");this._setReadableStream(ut.createReadStream(this._url,{start:et,end:ot-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var ys,nx,Sw;class PDFObjects{constructor(){cn(this,nx);cn(this,ys,Object.create(null))}get(g,et=null){if(et){const ct=bn(this,nx,Sw).call(this,g);return ct.promise.then(()=>et(ct.data)),null}const ot=zt(this,ys)[g];if(!ot||ot.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${g}.`);return ot.data}has(g){const et=zt(this,ys)[g];return!!et&&et.data!==INITIAL_DATA}delete(g){const et=zt(this,ys)[g];return!et||et.data===INITIAL_DATA?!1:(delete zt(this,ys)[g],!0)}resolve(g,et=null){const ot=bn(this,nx,Sw).call(this,g);ot.data=et,ot.resolve()}clear(){var g;for(const et in zt(this,ys)){const{data:ot}=zt(this,ys)[et];(g=ot==null?void 0:ot.bitmap)==null||g.close()}fn(this,ys,Object.create(null))}*[Symbol.iterator](){for(const g in zt(this,ys)){const{data:et}=zt(this,ys)[g];et!==INITIAL_DATA&&(yield[g,et])}}}ys=new WeakMap,nx=new WeakSet,Sw=function(g){var et;return(et=zt(this,ys))[g]||(et[g]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var oA,fu,ls,rx,ix,Mp,_a,sx,ox,Np,Ay,Ty,pu,Cy,ax,_y,jp,lx,cx,gr,Ry,Op,ux,mu,Py,HE,WA,UE,qA,hx,ww,My,L1,dx,kw,GE,KA,WE,YA;let TextLayer$1=(gr=class{constructor({textContentSource:g,container:et,viewport:ot}){cn(this,HE);cn(this,UE);cn(this,hx);cn(this,fu,Promise.withResolvers());cn(this,ls,null);cn(this,rx,!1);cn(this,ix,!!((oA=globalThis.FontInspector)!=null&&oA.enabled));cn(this,Mp,null);cn(this,_a,null);cn(this,sx,0);cn(this,ox,0);cn(this,Np,null);cn(this,Ay,null);cn(this,Ty,0);cn(this,pu,0);cn(this,Cy,Object.create(null));cn(this,ax,[]);cn(this,_y,null);cn(this,jp,[]);cn(this,lx,new WeakMap);cn(this,cx,null);var St;if(g instanceof ReadableStream)fn(this,_y,g);else if(typeof g=="object")fn(this,_y,new ReadableStream({start(kt){kt.enqueue(g),kt.close()}}));else throw new Error('No "textContentSource" parameter specified.');fn(this,ls,fn(this,Ay,et)),fn(this,pu,ot.scale*OutputScale.pixelRatio),fn(this,Ty,ot.rotation),fn(this,_a,{div:null,properties:null,ctx:null});const{pageWidth:ct,pageHeight:ut,pageX:dt,pageY:ft}=ot.rawDims;fn(this,cx,[1,0,0,-1,-dt,ft+ut]),fn(this,ox,ct),fn(this,sx,ut),bn(St=gr,GE,KA).call(St),setLayerDimensions(et,ot),zt(this,fu).promise.finally(()=>{zt(gr,Py).delete(this),fn(this,_a,null),fn(this,Cy,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:g,isFirefox:et}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${g&&et?"Calibri, ":""}sans-serif`],["monospace",`${g&&et?"Lucida Console, ":""}monospace`]]))}render(){const g=()=>{zt(this,Np).read().then(({value:et,done:ot})=>{if(ot){zt(this,fu).resolve();return}zt(this,Mp)??fn(this,Mp,et.lang),Object.assign(zt(this,Cy),et.styles),bn(this,HE,WA).call(this,et.items),g()},zt(this,fu).reject)};return fn(this,Np,zt(this,_y).getReader()),zt(gr,Py).add(this),g(),zt(this,fu).promise}update({viewport:g,onBefore:et=null}){var ut;const ot=g.scale*OutputScale.pixelRatio,ct=g.rotation;if(ct!==zt(this,Ty)&&(et==null||et(),fn(this,Ty,ct),setLayerDimensions(zt(this,Ay),{rotation:ct})),ot!==zt(this,pu)){et==null||et(),fn(this,pu,ot);const dt={div:null,properties:null,ctx:bn(ut=gr,My,L1).call(ut,zt(this,Mp))};for(const ft of zt(this,jp))dt.properties=zt(this,lx).get(ft),dt.div=ft,bn(this,hx,ww).call(this,dt)}}cancel(){var et;const g=new AbortException("TextLayer task cancelled.");(et=zt(this,Np))==null||et.cancel(g).catch(()=>{}),fn(this,Np,null),zt(this,fu).reject(g)}get textDivs(){return zt(this,jp)}get textContentItemsStr(){return zt(this,ax)}static cleanup(){if(!(zt(this,Py).size>0)){zt(this,Ry).clear();for(const{canvas:g}of zt(this,Op).values())g.remove();zt(this,Op).clear()}}},fu=new WeakMap,ls=new WeakMap,rx=new WeakMap,ix=new WeakMap,Mp=new WeakMap,_a=new WeakMap,sx=new WeakMap,ox=new WeakMap,Np=new WeakMap,Ay=new WeakMap,Ty=new WeakMap,pu=new WeakMap,Cy=new WeakMap,ax=new WeakMap,_y=new WeakMap,jp=new WeakMap,lx=new WeakMap,cx=new WeakMap,Ry=new WeakMap,Op=new WeakMap,ux=new WeakMap,mu=new WeakMap,Py=new WeakMap,HE=new WeakSet,WA=function(g){var ct,ut;if(zt(this,rx))return;(ut=zt(this,_a)).ctx??(ut.ctx=bn(ct=gr,My,L1).call(ct,zt(this,Mp)));const et=zt(this,jp),ot=zt(this,ax);for(const dt of g){if(et.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),fn(this,rx,!0);return}if(dt.str===void 0){if(dt.type==="beginMarkedContentProps"||dt.type==="beginMarkedContent"){const ft=zt(this,ls);fn(this,ls,document.createElement("span")),zt(this,ls).classList.add("markedContent"),dt.id&&zt(this,ls).setAttribute("id",`${dt.id}`),ft.append(zt(this,ls))}else dt.type==="endMarkedContent"&&fn(this,ls,zt(this,ls).parentNode);continue}ot.push(dt.str),bn(this,UE,qA).call(this,dt)}},UE=new WeakSet,qA=function(g){var Ht;const et=document.createElement("span"),ot={angle:0,canvasWidth:0,hasText:g.str!=="",hasEOL:g.hasEOL,fontSize:0};zt(this,jp).push(et);const ct=Util.transform(zt(this,cx),g.transform);let ut=Math.atan2(ct[1],ct[0]);const dt=zt(this,Cy)[g.fontName];dt.vertical&&(ut+=Math.PI/2);let ft=zt(this,ix)&&dt.fontSubstitution||dt.fontFamily;ft=gr.fontFamilyMap.get(ft)||ft;const St=Math.hypot(ct[2],ct[3]),kt=St*bn(Ht=gr,WE,YA).call(Ht,ft,dt,zt(this,Mp));let Tt,Rt;ut===0?(Tt=ct[4],Rt=ct[5]-kt):(Tt=ct[4]+kt*Math.sin(ut),Rt=ct[5]-kt*Math.cos(ut));const jt="calc(var(--total-scale-factor) *",$t=et.style;zt(this,ls)===zt(this,Ay)?($t.left=`${(100*Tt/zt(this,ox)).toFixed(2)}%`,$t.top=`${(100*Rt/zt(this,sx)).toFixed(2)}%`):($t.left=`${jt}${Tt.toFixed(2)}px)`,$t.top=`${jt}${Rt.toFixed(2)}px)`),$t.fontSize=`${jt}${(zt(gr,mu)*St).toFixed(2)}px)`,$t.fontFamily=ft,ot.fontSize=St,et.setAttribute("role","presentation"),et.textContent=g.str,et.dir=g.dir,zt(this,ix)&&(et.dataset.fontName=dt.fontSubstitutionLoadedName||g.fontName),ut!==0&&(ot.angle=ut*(180/Math.PI));let Ft=!1;if(g.str.length>1)Ft=!0;else if(g.str!==" "&&g.transform[0]!==g.transform[3]){const Kt=Math.abs(g.transform[0]),Bt=Math.abs(g.transform[3]);Kt!==Bt&&Math.max(Kt,Bt)/Math.min(Kt,Bt)>1.5&&(Ft=!0)}if(Ft&&(ot.canvasWidth=dt.vertical?g.height:g.width),zt(this,lx).set(et,ot),zt(this,_a).div=et,zt(this,_a).properties=ot,bn(this,hx,ww).call(this,zt(this,_a)),ot.hasText&&zt(this,ls).append(et),ot.hasEOL){const Kt=document.createElement("br");Kt.setAttribute("role","presentation"),zt(this,ls).append(Kt)}},hx=new WeakSet,ww=function(g){var ft;const{div:et,properties:ot,ctx:ct}=g,{style:ut}=et;let dt="";if(zt(gr,mu)>1&&(dt=`scale(${1/zt(gr,mu)})`),ot.canvasWidth!==0&&ot.hasText){const{fontFamily:St}=ut,{canvasWidth:kt,fontSize:Tt}=ot;bn(ft=gr,dx,kw).call(ft,ct,Tt*zt(this,pu),St);const{width:Rt}=ct.measureText(et.textContent);Rt>0&&(dt=`scaleX(${kt*zt(this,pu)/Rt}) ${dt}`)}ot.angle!==0&&(dt=`rotate(${ot.angle}deg) ${dt}`),dt.length>0&&(ut.transform=dt)},My=new WeakSet,L1=function(g=null){let et=zt(this,Op).get(g||(g=""));if(!et){const ot=document.createElement("canvas");ot.className="hiddenCanvasElement",ot.lang=g,document.body.append(ot),et=ot.getContext("2d",{alpha:!1,willReadFrequently:!0}),zt(this,Op).set(g,et),zt(this,ux).set(et,{size:0,family:""})}return et},dx=new WeakSet,kw=function(g,et,ot){const ct=zt(this,ux).get(g);et===ct.size&&ot===ct.family||(g.font=`${et}px ${ot}`,ct.size=et,ct.family=ot)},GE=new WeakSet,KA=function(){if(zt(this,mu)!==null)return;const g=document.createElement("div");g.style.opacity=0,g.style.lineHeight=1,g.style.fontSize="1px",g.style.position="absolute",g.textContent="X",document.body.append(g),fn(this,mu,g.getBoundingClientRect().height),g.remove()},WE=new WeakSet,YA=function(g,et,ot){const ct=zt(this,Ry).get(g);if(ct)return ct;const ut=bn(this,My,L1).call(this,ot);ut.canvas.width=ut.canvas.height=DEFAULT_FONT_SIZE,bn(this,dx,kw).call(this,ut,DEFAULT_FONT_SIZE,g);const dt=ut.measureText(""),ft=dt.fontBoundingBoxAscent,St=Math.abs(dt.fontBoundingBoxDescent);ut.canvas.width=ut.canvas.height=0;let kt=.8;return ft?kt=ft/(ft+St):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),et.ascent?kt=et.ascent:et.descent&&(kt=1+et.descent)),zt(this,Ry).set(g,kt),kt},cn(gr,My),cn(gr,dx),cn(gr,GE),cn(gr,WE),cn(gr,Ry,new Map),cn(gr,Op,new Map),cn(gr,ux,new WeakMap),cn(gr,mu,null),cn(gr,Py,new Set),gr);const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(it={}){typeof it=="string"||it instanceof URL?it={url:it}:(it instanceof ArrayBuffer||ArrayBuffer.isView(it))&&(it={data:it});const g=new PDFDocumentLoadingTask,{docId:et}=g,ot=it.url?getUrlProp(it.url):null,ct=it.data?getDataProp(it.data):null,ut=it.httpHeaders||null,dt=it.withCredentials===!0,ft=it.password??null,St=it.range instanceof PDFDataRangeTransport$1?it.range:null,kt=Number.isInteger(it.rangeChunkSize)&&it.rangeChunkSize>0?it.rangeChunkSize:2**16;let Tt=it.worker instanceof PDFWorker?it.worker:null;const Rt=it.verbosity,jt=typeof it.docBaseUrl=="string"&&!isDataScheme(it.docBaseUrl)?it.docBaseUrl:null,$t=getFactoryUrlProp(it.cMapUrl),Ft=it.cMapPacked!==!1,Ht=it.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),Kt=getFactoryUrlProp(it.iccUrl),Bt=getFactoryUrlProp(it.standardFontDataUrl),Ut=it.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),Yt=getFactoryUrlProp(it.wasmUrl),Jt=it.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),Zt=it.stopAtErrors!==!0,en=Number.isInteger(it.maxImageSize)&&it.maxImageSize>-1?it.maxImageSize:-1,tn=it.isEvalSupported!==!1,nn=typeof it.isOffscreenCanvasSupported=="boolean"?it.isOffscreenCanvasSupported:!isNodeJS,ln=typeof it.isImageDecoderSupported=="boolean"?it.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),an=Number.isInteger(it.canvasMaxAreaInBytes)?it.canvasMaxAreaInBytes:-1,sn=typeof it.disableFontFace=="boolean"?it.disableFontFace:isNodeJS,dn=it.fontExtraProperties===!0,mn=it.enableXfa===!0,yn=it.ownerDocument||globalThis.document,vn=it.disableRange===!0,hn=it.disableStream===!0,pn=it.disableAutoFetch===!0,rn=it.pdfBug===!0,on=it.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),gn=it.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),un=it.enableHWA===!0,xn=it.useWasm!==!1,En=St?St.length:it.length??NaN,wn=typeof it.useSystemFonts=="boolean"?it.useSystemFonts:!isNodeJS&&!sn,kn=typeof it.useWorkerFetch=="boolean"?it.useWorkerFetch:!!(Ht===DOMCMapReaderFactory&&Ut===DOMStandardFontDataFactory&&Jt===DOMWasmFactory&&$t&&Bt&&Yt&&isValidFetchUrl($t,document.baseURI)&&isValidFetchUrl(Bt,document.baseURI)&&isValidFetchUrl(Yt,document.baseURI)),Sn=null;setVerbosityLevel(Rt);const An={canvasFactory:new on({ownerDocument:yn,enableHWA:un}),filterFactory:new gn({docId:et,ownerDocument:yn}),cMapReaderFactory:kn?null:new Ht({baseUrl:$t,isCompressed:Ft}),standardFontDataFactory:kn?null:new Ut({baseUrl:Bt}),wasmFactory:kn?null:new Jt({baseUrl:Yt})};Tt||(Tt=PDFWorker.create({verbosity:Rt,port:GlobalWorkerOptions.workerPort}),g._worker=Tt);const Cn={docId:et,apiVersion:"5.4.296",data:ct,password:ft,disableAutoFetch:pn,rangeChunkSize:kt,length:En,docBaseUrl:jt,enableXfa:mn,evaluatorOptions:{maxImageSize:en,disableFontFace:sn,ignoreErrors:Zt,isEvalSupported:tn,isOffscreenCanvasSupported:nn,isImageDecoderSupported:ln,canvasMaxAreaInBytes:an,fontExtraProperties:dn,useSystemFonts:wn,useWasm:xn,useWorkerFetch:kn,cMapUrl:$t,iccUrl:Kt,standardFontDataUrl:Bt,wasmUrl:Yt}},Tn={ownerDocument:yn,pdfBug:rn,styleElement:Sn,loadingParams:{disableAutoFetch:pn,enableXfa:mn}};return Tt.promise.then(function(){if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const _n=Tt.messageHandler.sendWithPromise("GetDocRequest",Cn,ct?[ct.buffer]:null);let Dn;if(St)Dn=new PDFDataTransportStream(St,{disableRange:vn,disableStream:hn});else if(!ct){if(!ot)throw new Error("getDocument - no `url` parameter provided.");const $n=isValidFetchUrl(ot)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;Dn=new $n({url:ot,length:En,httpHeaders:ut,withCredentials:dt,rangeChunkSize:kt,disableRange:vn,disableStream:hn})}return _n.then($n=>{if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const On=new MessageHandler(et,$n,Tt.port),Mn=new WorkerTransport(On,g,Dn,Tn,An,un);g._transport=Mn,On.send("Ready",null)})}).catch(g._capability.reject),g}var qE;const KE=class KE{constructor(){jn(this,"_capability",Promise.withResolvers());jn(this,"_transport",null);jn(this,"_worker",null);jn(this,"docId",`d${kr(KE,qE)._++}`);jn(this,"destroyed",!1);jn(this,"onPassword",null);jn(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var g,et,ot,ct;this.destroyed=!0;try{(g=this._worker)!=null&&g.port&&(this._worker._pendingDestroy=!0),await((et=this._transport)==null?void 0:et.destroy())}catch(ut){throw(ot=this._worker)!=null&&ot.port&&delete this._worker._pendingDestroy,ut}this._transport=null,(ct=this._worker)==null||ct.destroy(),this._worker=null}async getData(){return this._transport.getData()}};qE=new WeakMap,cn(KE,qE,0);let PDFDocumentLoadingTask=KE;var Dp,fx,mx,gx,yx,aA;let PDFDataRangeTransport$1=(aA=class{constructor(g,et,ot=!1,ct=null){cn(this,Dp,Promise.withResolvers());cn(this,fx,[]);cn(this,mx,[]);cn(this,gx,[]);cn(this,yx,[]);this.length=g,this.initialData=et,this.progressiveDone=ot,this.contentDispositionFilename=ct}addRangeListener(g){zt(this,yx).push(g)}addProgressListener(g){zt(this,gx).push(g)}addProgressiveReadListener(g){zt(this,mx).push(g)}addProgressiveDoneListener(g){zt(this,fx).push(g)}onDataRange(g,et){for(const ot of zt(this,yx))ot(g,et)}onDataProgress(g,et){zt(this,Dp).promise.then(()=>{for(const ot of zt(this,gx))ot(g,et)})}onDataProgressiveRead(g){zt(this,Dp).promise.then(()=>{for(const et of zt(this,mx))et(g)})}onDataProgressiveDone(){zt(this,Dp).promise.then(()=>{for(const g of zt(this,fx))g()})}transportReady(){zt(this,Dp).resolve()}requestDataRange(g,et){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Dp=new WeakMap,fx=new WeakMap,mx=new WeakMap,gx=new WeakMap,yx=new WeakMap,aA);class PDFDocumentProxy{constructor(g,et){this._pdfInfo=g,this._transport=et}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(g){return this._transport.getPage(g)}getPageIndex(g){return this._transport.getPageIndex(g)}getDestinations(){return this._transport.getDestinations()}getDestination(g){return this._transport.getDestination(g)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(g,et){return this._transport.getAnnotationsByType(g,et)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getOptionalContentConfig(et)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(g=!1){return this._transport.startCleanup(g||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(g){return this._transport.cachedPageNumber(g)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var $a,Ip,H0;class PDFPageProxy{constructor(g,et,ot,ct=!1){cn(this,Ip);cn(this,$a,!1);this._pageIndex=g,this._pageInfo=et,this._transport=ot,this._stats=ct?new StatTimer:null,this._pdfBug=ct,this.commonObjs=ot.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:g,rotation:et=this.rotate,offsetX:ot=0,offsetY:ct=0,dontFlip:ut=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ct,dontFlip:ut})}getAnnotations({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getAnnotations(this._pageIndex,et)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var g;return((g=this._transport._htmlForXfa)==null?void 0:g.children[this._pageIndex])||null}render({canvasContext:g,canvas:et=g.canvas,viewport:ot,intent:ct="display",annotationMode:ut=AnnotationMode.ENABLE,transform:dt=null,background:ft=null,optionalContentConfigPromise:St=null,annotationCanvasMap:kt=null,pageColors:Tt=null,printAnnotationStorage:Rt=null,isEditing:jt=!1,recordOperations:$t=!1,operationsFilter:Ft=null}){var ln,an,sn;(ln=this._stats)==null||ln.time("Overall");const Ht=this._transport.getRenderingIntent(ct,ut,Rt,jt),{renderingIntent:Kt,cacheKey:Bt}=Ht;fn(this,$a,!1),St||(St=this._transport.getOptionalContentConfig(Kt));let Ut=this._intentStates.get(Bt);Ut||(Ut=Object.create(null),this._intentStates.set(Bt,Ut)),Ut.streamReaderCancelTimeout&&(clearTimeout(Ut.streamReaderCancelTimeout),Ut.streamReaderCancelTimeout=null);const Yt=!!(Kt&RenderingIntentFlag.PRINT);Ut.displayReadyCapability||(Ut.displayReadyCapability=Promise.withResolvers(),Ut.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(an=this._stats)==null||an.time("Page Request"),this._pumpOperatorList(Ht));const Jt=!!(this._pdfBug&&((sn=globalThis.StepperManager)!=null&&sn.enabled)),Zt=!this.recordedBBoxes&&($t||Jt),en=dn=>{var mn,yn;if(Ut.renderTasks.delete(tn),Zt){const vn=(mn=tn.gfx)==null?void 0:mn.dependencyTracker.take();vn&&(tn.stepper&&tn.stepper.setOperatorBBoxes(vn,tn.gfx.dependencyTracker.takeDebugMetadata()),$t&&(this.recordedBBoxes=vn))}Yt&&fn(this,$a,!0),bn(this,Ip,H0).call(this),dn?(tn.capability.reject(dn),this._abortOperatorList({intentState:Ut,reason:dn instanceof Error?dn:new Error(dn)})):tn.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(yn=globalThis.Stats)!=null&&yn.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},tn=new InternalRenderTask({callback:en,params:{canvas:et,canvasContext:g,dependencyTracker:Zt?new CanvasDependencyTracker(et,Ut.operatorList.length,Jt):null,viewport:ot,transform:dt,background:ft},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:kt,operatorList:Ut.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Yt,pdfBug:this._pdfBug,pageColors:Tt,enableHWA:this._transport.enableHWA,operationsFilter:Ft});(Ut.renderTasks||(Ut.renderTasks=new Set)).add(tn);const nn=tn.task;return Promise.all([Ut.displayReadyCapability.promise,St]).then(([dn,mn])=>{var yn;if(this.destroyed){en();return}if((yn=this._stats)==null||yn.time("Rendering"),!(mn.renderingIntent&Kt))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");tn.initializeGraphics({transparency:dn,optionalContentConfig:mn}),tn.operatorListChanged()}).catch(en),nn}getOperatorList({intent:g="display",annotationMode:et=AnnotationMode.ENABLE,printAnnotationStorage:ot=null,isEditing:ct=!1}={}){var kt;function ut(){ft.operatorList.lastChunk&&(ft.opListReadCapability.resolve(ft.operatorList),ft.renderTasks.delete(St))}const dt=this._transport.getRenderingIntent(g,et,ot,ct,!0);let ft=this._intentStates.get(dt.cacheKey);ft||(ft=Object.create(null),this._intentStates.set(dt.cacheKey,ft));let St;return ft.opListReadCapability||(St=Object.create(null),St.operatorListChanged=ut,ft.opListReadCapability=Promise.withResolvers(),(ft.renderTasks||(ft.renderTasks=new Set)).add(St),ft.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(kt=this._stats)==null||kt.time("Page Request"),this._pumpOperatorList(dt)),ft.opListReadCapability.promise}streamTextContent({includeMarkedContent:g=!1,disableNormalization:et=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:g===!0,disableNormalization:et===!0},{highWaterMark:100,size(ct){return ct.items.length}})}getTextContent(g={}){if(this._transport._htmlForXfa)return this.getXfa().then(ot=>XfaText.textContent(ot));const et=this.streamTextContent(g);return new Promise(function(ot,ct){function ut(){dt.read().then(function({value:St,done:kt}){if(kt){ot(ft);return}ft.lang??(ft.lang=St.lang),Object.assign(ft.styles,St.styles),ft.items.push(...St.items),ut()},ct)}const dt=et.getReader(),ft={items:[],styles:Object.create(null),lang:null};ut()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const g=[];for(const et of this._intentStates.values())if(this._abortOperatorList({intentState:et,reason:new Error("Page was destroyed."),force:!0}),!et.opListReadCapability)for(const ot of et.renderTasks)g.push(ot.completed),ot.cancel();return this.objs.clear(),fn(this,$a,!1),Promise.all(g)}cleanup(g=!1){fn(this,$a,!0);const et=bn(this,Ip,H0).call(this);return g&&et&&this._stats&&(this._stats=new StatTimer),et}_startRenderPage(g,et){var ct,ut;const ot=this._intentStates.get(et);ot&&((ct=this._stats)==null||ct.timeEnd("Page Request"),(ut=ot.displayReadyCapability)==null||ut.resolve(g))}_renderPageChunk(g,et){for(let ot=0,ct=g.length;ot<ct;ot++)et.operatorList.fnArray.push(g.fnArray[ot]),et.operatorList.argsArray.push(g.argsArray[ot]);et.operatorList.lastChunk=g.lastChunk,et.operatorList.separateAnnots=g.separateAnnots;for(const ot of et.renderTasks)ot.operatorListChanged();g.lastChunk&&bn(this,Ip,H0).call(this)}_pumpOperatorList({renderingIntent:g,cacheKey:et,annotationStorageSerializable:ot,modifiedIds:ct}){const{map:ut,transfer:dt}=ot,St=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:g,cacheKey:et,annotationStorage:ut,modifiedIds:ct},dt).getReader(),kt=this._intentStates.get(et);kt.streamReader=St;const Tt=()=>{St.read().then(({value:Rt,done:jt})=>{if(jt){kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Rt,kt),Tt())},Rt=>{if(kt.streamReader=null,!this._transport.destroyed){if(kt.operatorList){kt.operatorList.lastChunk=!0;for(const jt of kt.renderTasks)jt.operatorListChanged();bn(this,Ip,H0).call(this)}if(kt.displayReadyCapability)kt.displayReadyCapability.reject(Rt);else if(kt.opListReadCapability)kt.opListReadCapability.reject(Rt);else throw Rt}})};Tt()}_abortOperatorList({intentState:g,reason:et,force:ot=!1}){if(g.streamReader){if(g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null),!ot){if(g.renderTasks.size>0)return;if(et instanceof RenderingCancelledException){let ct=RENDERING_CANCELLED_TIMEOUT;et.extraDelay>0&&et.extraDelay<1e3&&(ct+=et.extraDelay),g.streamReaderCancelTimeout=setTimeout(()=>{g.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:g,reason:et,force:!0})},ct);return}}if(g.streamReader.cancel(new AbortException(et.message)).catch(()=>{}),g.streamReader=null,!this._transport.destroyed){for(const[ct,ut]of this._intentStates)if(ut===g){this._intentStates.delete(ct);break}this.cleanup()}}}get stats(){return this._stats}}$a=new WeakMap,Ip=new WeakSet,H0=function(){if(!zt(this,$a)||this.destroyed)return!1;for(const{renderTasks:g,operatorList:et}of this._intentStates.values())if(g.size>0||!et.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),fn(this,$a,!1),!0};var gu,Xs,yl,Lp,YE,$p,Fp,Ny,$1,XE,XA,JE,JA,Bp,U0,jy,F1;const dr=class dr{constructor({name:g=null,port:et=null,verbosity:ot=getVerbosityLevel()}={}){cn(this,Ny);cn(this,XE);cn(this,JE);cn(this,Bp);cn(this,gu,Promise.withResolvers());cn(this,Xs,null);cn(this,yl,null);cn(this,Lp,null);if(this.name=g,this.destroyed=!1,this.verbosity=ot,et){if(zt(dr,Fp).has(et))throw new Error("Cannot use more than one PDFWorker per port.");zt(dr,Fp).set(et,this),bn(this,XE,XA).call(this,et)}else bn(this,JE,JA).call(this)}get promise(){return zt(this,gu).promise}get port(){return zt(this,yl)}get messageHandler(){return zt(this,Xs)}destroy(){var g,et;this.destroyed=!0,(g=zt(this,Lp))==null||g.terminate(),fn(this,Lp,null),zt(dr,Fp).delete(zt(this,yl)),fn(this,yl,null),(et=zt(this,Xs))==null||et.destroy(),fn(this,Xs,null)}static create(g){const et=zt(this,Fp).get(g==null?void 0:g.port);if(et){if(et._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return et}return new dr(g)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>zt(this,jy,F1)?zt(this,jy,F1):(await __vitePreload(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};gu=new WeakMap,Xs=new WeakMap,yl=new WeakMap,Lp=new WeakMap,YE=new WeakMap,$p=new WeakMap,Fp=new WeakMap,Ny=new WeakSet,$1=function(){zt(this,gu).resolve(),zt(this,Xs).send("configure",{verbosity:this.verbosity})},XE=new WeakSet,XA=function(g){fn(this,yl,g),fn(this,Xs,new MessageHandler("main","worker",g)),zt(this,Xs).on("ready",()=>{}),bn(this,Ny,$1).call(this)},JE=new WeakSet,JA=function(){if(zt(dr,$p)||zt(dr,jy,F1)){bn(this,Bp,U0).call(this);return}let{workerSrc:g}=dr;try{dr._isSameOrigin(window.location,g)||(g=dr._createCDNWrapper(new URL(g,window.location).href));const et=new Worker(g,{type:"module"}),ot=new MessageHandler("main","worker",et),ct=()=>{ut.abort(),ot.destroy(),et.terminate(),this.destroyed?zt(this,gu).reject(new Error("Worker was destroyed")):bn(this,Bp,U0).call(this)},ut=new AbortController;et.addEventListener("error",()=>{zt(this,Lp)||ct()},{signal:ut.signal}),ot.on("test",ft=>{if(ut.abort(),this.destroyed||!ft){ct();return}fn(this,Xs,ot),fn(this,yl,et),fn(this,Lp,et),bn(this,Ny,$1).call(this)}),ot.on("ready",ft=>{if(ut.abort(),this.destroyed){ct();return}try{dt()}catch{bn(this,Bp,U0).call(this)}});const dt=()=>{const ft=new Uint8Array;ot.send("test",ft,[ft.buffer])};dt();return}catch{info("The worker has been disabled.")}bn(this,Bp,U0).call(this)},Bp=new WeakSet,U0=function(){zt(dr,$p)||(warn("Setting up fake worker."),fn(dr,$p,!0)),dr._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){zt(this,gu).reject(new Error("Worker was destroyed"));return}const et=new LoopbackPort;fn(this,yl,et);const ot=`fake${kr(dr,YE)._++}`,ct=new MessageHandler(ot+"_worker",ot,et);g.setup(ct,et),fn(this,Xs,new MessageHandler(ot,ot+"_worker",et)),bn(this,Ny,$1).call(this)}).catch(g=>{zt(this,gu).reject(new Error(`Setting up fake worker failed: "${g.message}".`))})},jy=new WeakSet,F1=function(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}},cn(dr,jy),cn(dr,YE,0),cn(dr,$p,!1),cn(dr,Fp,new WeakMap),isNodeJS&&(fn(dr,$p,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),dr._isSameOrigin=(g,et)=>{const ot=URL.parse(g);if(!(ot!=null&&ot.origin)||ot.origin==="null")return!1;const ct=new URL(et,ot);return ot.origin===ct.origin},dr._createCDNWrapper=g=>{const et=`await import("${g}");`;return URL.createObjectURL(new Blob([et],{type:"text/javascript"}))},dr.fromPort=g=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return dr.create(g)};let PDFWorker=dr;var xl,Ao,Oy,Dy,El,Vp,G0;class WorkerTransport{constructor(g,et,ot,ct,ut,dt){cn(this,Vp);cn(this,xl,new Map);cn(this,Ao,new Map);cn(this,Oy,new Map);cn(this,Dy,new Map);cn(this,El,null);this.messageHandler=g,this.loadingTask=et,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:ct.ownerDocument,styleElement:ct.styleElement}),this.loadingParams=ct.loadingParams,this._params=ct,this.canvasFactory=ut.canvasFactory,this.filterFactory=ut.filterFactory,this.cMapReaderFactory=ut.cMapReaderFactory,this.standardFontDataFactory=ut.standardFontDataFactory,this.wasmFactory=ut.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=ot,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=dt,this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(g,et=AnnotationMode.ENABLE,ot=null,ct=!1,ut=!1){let dt=RenderingIntentFlag.DISPLAY,ft=SerializableEmpty;switch(g){case"any":dt=RenderingIntentFlag.ANY;break;case"display":break;case"print":dt=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${g}`)}const St=dt&RenderingIntentFlag.PRINT&&ot instanceof PrintAnnotationStorage?ot:this.annotationStorage;switch(et){case AnnotationMode.DISABLE:dt+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:dt+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:dt+=RenderingIntentFlag.ANNOTATIONS_STORAGE,ft=St.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${et}`)}ct&&(dt+=RenderingIntentFlag.IS_EDITING),ut&&(dt+=RenderingIntentFlag.OPLIST);const{ids:kt,hash:Tt}=St.modifiedIds,Rt=[dt,ft.hash,Tt];return{renderingIntent:dt,cacheKey:Rt.join("_"),annotationStorageSerializable:ft,modifiedIds:kt}}destroy(){var ot;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(ot=zt(this,El))==null||ot.reject(new Error("Worker was destroyed during onPassword callback"));const g=[];for(const ct of zt(this,Ao).values())g.push(ct._destroy());zt(this,Ao).clear(),zt(this,Oy).clear(),zt(this,Dy).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const et=this.messageHandler.sendWithPromise("Terminate",null);return g.push(et),Promise.all(g).then(()=>{var ct,ut;this.commonObjs.clear(),this.fontLoader.clear(),zt(this,xl).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(ct=this._networkStream)==null||ct.cancelAllRequests(new AbortException("Worker was terminated.")),(ut=this.messageHandler)==null||ut.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:g,loadingTask:et}=this;g.on("GetReader",(ot,ct)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ut=>{this._lastProgress={loaded:ut.loaded,total:ut.total}},ct.onPull=()=>{this._fullReader.read().then(function({value:ut,done:dt}){if(dt){ct.close();return}assert(ut instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(ut),1,[ut])}).catch(ut=>{ct.error(ut)})},ct.onCancel=ut=>{this._fullReader.cancel(ut),ct.ready.catch(dt=>{if(!this.destroyed)throw dt})}}),g.on("ReaderHeadersReady",async ot=>{var ft;await this._fullReader.headersReady;const{isStreamingSupported:ct,isRangeSupported:ut,contentLength:dt}=this._fullReader;return(!ct||!ut)&&(this._lastProgress&&((ft=et.onProgress)==null||ft.call(et,this._lastProgress)),this._fullReader.onProgress=St=>{var kt;(kt=et.onProgress)==null||kt.call(et,{loaded:St.loaded,total:St.total})}),{isStreamingSupported:ct,isRangeSupported:ut,contentLength:dt}}),g.on("GetRangeReader",(ot,ct)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ut=this._networkStream.getRangeReader(ot.begin,ot.end);if(!ut){ct.close();return}ct.onPull=()=>{ut.read().then(function({value:dt,done:ft}){if(ft){ct.close();return}assert(dt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ct.enqueue(new Uint8Array(dt),1,[dt])}).catch(dt=>{ct.error(dt)})},ct.onCancel=dt=>{ut.cancel(dt),ct.ready.catch(ft=>{if(!this.destroyed)throw ft})}}),g.on("GetDoc",({pdfInfo:ot})=>{this._numPages=ot.numPages,this._htmlForXfa=ot.htmlForXfa,delete ot.htmlForXfa,et._capability.resolve(new PDFDocumentProxy(ot,this))}),g.on("DocException",ot=>{et._capability.reject(wrapReason(ot))}),g.on("PasswordRequest",ot=>{fn(this,El,Promise.withResolvers());try{if(!et.onPassword)throw wrapReason(ot);const ct=ut=>{ut instanceof Error?zt(this,El).reject(ut):zt(this,El).resolve({password:ut})};et.onPassword(ct,ot.code)}catch(ct){zt(this,El).reject(ct)}return zt(this,El).promise}),g.on("DataLoaded",ot=>{var ct;(ct=et.onProgress)==null||ct.call(et,{loaded:ot.length,total:ot.length}),this.downloadInfoCapability.resolve(ot)}),g.on("StartRenderPage",ot=>{if(this.destroyed)return;zt(this,Ao).get(ot.pageIndex)._startRenderPage(ot.transparency,ot.cacheKey)}),g.on("commonobj",([ot,ct,ut])=>{var dt;if(this.destroyed||this.commonObjs.has(ot))return null;switch(ct){case"Font":if("error"in ut){const Rt=ut.error;warn(`Error during font loading: ${Rt}`),this.commonObjs.resolve(ot,Rt);break}const ft=new FontInfo(ut),St=this._params.pdfBug&&((dt=globalThis.FontInspector)!=null&&dt.enabled)?(Rt,jt)=>globalThis.FontInspector.fontAdded(Rt,jt):null,kt=new FontFaceObject(ft,St,ut.extra,ut.charProcOperatorList);this.fontLoader.bind(kt).catch(()=>g.sendWithPromise("FontFallback",{id:ot})).finally(()=>{!kt.fontExtraProperties&&kt.data&&kt.clearData(),this.commonObjs.resolve(ot,kt)});break;case"CopyLocalImage":const{imageRef:Tt}=ut;assert(Tt,"The imageRef must be defined.");for(const Rt of zt(this,Ao).values())for(const[,jt]of Rt.objs)if((jt==null?void 0:jt.ref)===Tt)return jt.dataLen?(this.commonObjs.resolve(ot,structuredClone(jt)),jt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ot,ut);break;default:throw new Error(`Got unknown common object type ${ct}`)}return null}),g.on("obj",([ot,ct,ut,dt])=>{var St;if(this.destroyed)return;const ft=zt(this,Ao).get(ct);if(!ft.objs.has(ot)){if(ft._intentStates.size===0){(St=dt==null?void 0:dt.bitmap)==null||St.close();return}switch(ut){case"Image":case"Pattern":ft.objs.resolve(ot,dt);break;default:throw new Error(`Got unknown object type ${ut}`)}}}),g.on("DocProgress",ot=>{var ct;this.destroyed||(ct=et.onProgress)==null||ct.call(et,{loaded:ot.loaded,total:ot.total})}),g.on("FetchBinaryData",async ot=>{if(this.destroyed)throw new Error("Worker was destroyed.");const ct=this[ot.type];if(!ct)throw new Error(`${ot.type} not initialized, see the \`useWorkerFetch\` parameter.`);return ct.fetch(ot)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ot;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:g,transfer:et}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:g,filename:((ot=this._fullReader)==null?void 0:ot.filename)??null},et).finally(()=>{this.annotationStorage.resetModified()})}getPage(g){if(!Number.isInteger(g)||g<=0||g>this._numPages)return Promise.reject(new Error("Invalid page request."));const et=g-1,ot=zt(this,Oy).get(et);if(ot)return ot;const ct=this.messageHandler.sendWithPromise("GetPage",{pageIndex:et}).then(ut=>{if(this.destroyed)throw new Error("Transport destroyed");ut.refStr&&zt(this,Dy).set(ut.refStr,g);const dt=new PDFPageProxy(et,ut,this,this._params.pdfBug);return zt(this,Ao).set(et,dt),dt});return zt(this,Oy).set(et,ct),ct}getPageIndex(g){return isRefProxy(g)?this.messageHandler.sendWithPromise("GetPageIndex",{num:g.num,gen:g.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(g,et){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:g,intent:et})}getFieldObjects(){return bn(this,Vp,G0).call(this,"GetFieldObjects")}hasJSActions(){return bn(this,Vp,G0).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(g){return typeof g!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:g})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(g,et){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:g,pageIndexesToSkip:et})}getDocJSActions(){return bn(this,Vp,G0).call(this,"GetDocJSActions")}getPageJSActions(g){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:g})}getStructTree(g){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:g})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(g){return bn(this,Vp,G0).call(this,"GetOptionalContentConfig").then(et=>new OptionalContentConfig(et,g))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const g="GetMetadata",et=zt(this,xl).get(g);if(et)return et;const ot=this.messageHandler.sendWithPromise(g,null).then(ct=>{var ut,dt;return{info:ct[0],metadata:ct[1]?new Metadata(ct[1]):null,contentDispositionFilename:((ut=this._fullReader)==null?void 0:ut.filename)??null,contentLength:((dt=this._fullReader)==null?void 0:dt.contentLength)??null}});return zt(this,xl).set(g,ot),ot}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(g=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const et of zt(this,Ao).values())if(!et.cleanup())throw new Error(`startCleanup: Page ${et.pageNumber} is currently rendering.`);this.commonObjs.clear(),g||this.fontLoader.clear(),zt(this,xl).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(g){if(!isRefProxy(g))return null;const et=g.gen===0?`${g.num}R`:`${g.num}R${g.gen}`;return zt(this,Dy).get(et)??null}}xl=new WeakMap,Ao=new WeakMap,Oy=new WeakMap,Dy=new WeakMap,El=new WeakMap,Vp=new WeakSet,G0=function(g,et=null){const ot=zt(this,xl).get(g);if(ot)return ot;const ct=this.messageHandler.sendWithPromise(g,et);return zt(this,xl).set(g,ct),ct};var yu;class RenderTask{constructor(g){cn(this,yu,null);jn(this,"onContinue",null);jn(this,"onError",null);fn(this,yu,g)}get promise(){return zt(this,yu).capability.promise}cancel(g=0){zt(this,yu).cancel(null,g)}get separateAnnots(){const{separateAnnots:g}=zt(this,yu).operatorList;if(!g)return!1;const{annotationCanvasMap:et}=zt(this,yu);return g.form||g.canvas&&(et==null?void 0:et.size)>0}}yu=new WeakMap;var vu,zp;const Wu=class Wu{constructor({callback:g,params:et,objs:ot,commonObjs:ct,annotationCanvasMap:ut,operatorList:dt,pageIndex:ft,canvasFactory:St,filterFactory:kt,useRequestAnimationFrame:Tt=!1,pdfBug:Rt=!1,pageColors:jt=null,enableHWA:$t=!1,operationsFilter:Ft=null}){cn(this,vu,null);this.callback=g,this.params=et,this.objs=ot,this.commonObjs=ct,this.annotationCanvasMap=ut,this.operatorListIdx=null,this.operatorList=dt,this._pageIndex=ft,this.canvasFactory=St,this.filterFactory=kt,this._pdfBug=Rt,this.pageColors=jt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Tt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=et.canvas,this._canvasContext=et.canvas?null:et.canvasContext,this._enableHWA=$t,this._dependencyTracker=et.dependencyTracker,this._operationsFilter=Ft}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:et}){var St,kt;if(this.cancelled)return;if(this._canvas){if(zt(Wu,zp).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");zt(Wu,zp).add(this._canvas)}this._pdfBug&&((St=globalThis.StepperManager)!=null&&St.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:ot,transform:ct,background:ut,dependencyTracker:dt}=this.params,ft=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(ft,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:et},this.annotationCanvasMap,this.pageColors,dt),this.gfx.beginDrawing({transform:ct,viewport:ot,transparency:g,background:ut}),this.operatorListIdx=0,this.graphicsReady=!0,(kt=this.graphicsReadyCallback)==null||kt.call(this)}cancel(g=null,et=0){var ot,ct,ut;this.running=!1,this.cancelled=!0,(ot=this.gfx)==null||ot.endDrawing(),zt(this,vu)&&(window.cancelAnimationFrame(zt(this,vu)),fn(this,vu,null)),zt(Wu,zp).delete(this._canvas),g||(g=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,et)),this.callback(g),(ut=(ct=this.task).onError)==null||ut.call(ct,g)}operatorListChanged(){var g,et;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(g=this.gfx.dependencyTracker)==null||g.growOperationsCount(this.operatorList.fnArray.length),(et=this.stepper)==null||et.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?fn(this,vu,window.requestAnimationFrame(()=>{fn(this,vu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),zt(Wu,zp).delete(this._canvas),this.callback())))}};vu=new WeakMap,zp=new WeakMap,cn(Wu,zp,new WeakSet);let InternalRenderTask=Wu;const version="5.4.296",build="f56dc8601";var vs,Hp,Iy,Cr,vx,Ly,Sl,xx,xu,Js,bx,Ex,Aw,Sx,Tw,wx,Cw,wl,zu,ZE,ZA,To,Vl;const es=class es{constructor({editor:g=null,uiManager:et=null}){cn(this,Ex);cn(this,Sx);cn(this,wx);cn(this,wl);cn(this,ZE);cn(this,To);cn(this,vs,null);cn(this,Hp,null);cn(this,Iy,void 0);cn(this,Cr,null);cn(this,vx,!1);cn(this,Ly,!1);cn(this,Sl,null);cn(this,xx,void 0);cn(this,xu,null);cn(this,Js,null);var ot,ct;g?(fn(this,Ly,!1),fn(this,Sl,g)):fn(this,Ly,!0),fn(this,Js,(g==null?void 0:g._uiManager)||et),fn(this,xx,zt(this,Js)._eventBus),fn(this,Iy,((ot=g==null?void 0:g.color)==null?void 0:ot.toUpperCase())||((ct=zt(this,Js))==null?void 0:ct.highlightColors.values().next().value)||"#FFFF98"),zt(es,bx)||fn(es,bx,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],es.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],es.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],es.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],es.prototype._moveToPrevious],[["Home","mac+Home"],es.prototype._moveToBeginning],[["End","mac+End"],es.prototype._moveToEnd]]))}renderButton(){const g=fn(this,vs,document.createElement("button"));g.className="colorPicker",g.tabIndex="0",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),g.ariaHasPopup="true",zt(this,Sl)&&(g.ariaControls=`${zt(this,Sl).id}_colorpicker_dropdown`);const et=zt(this,Js)._signal;g.addEventListener("click",bn(this,wl,zu).bind(this),{signal:et}),g.addEventListener("keydown",bn(this,wx,Cw).bind(this),{signal:et});const ot=fn(this,Hp,document.createElement("span"));return ot.className="swatch",ot.ariaHidden="true",ot.style.backgroundColor=zt(this,Iy),g.append(ot),g}renderMainDropdown(){const g=fn(this,Cr,bn(this,Ex,Aw).call(this));return g.ariaOrientation="horizontal",g.ariaLabelledBy="highlightColorPickerLabel",g}_colorSelectFromKeyboard(g){if(g.target===zt(this,vs)){bn(this,wl,zu).call(this,g);return}const et=g.target.getAttribute("data-color");et&&bn(this,Sx,Tw).call(this,et,g)}_moveToNext(g){var et,ot;if(!zt(this,To,Vl)){bn(this,wl,zu).call(this,g);return}if(g.target===zt(this,vs)){(et=zt(this,Cr).firstChild)==null||et.focus();return}(ot=g.target.nextSibling)==null||ot.focus()}_moveToPrevious(g){var et,ot;if(g.target===((et=zt(this,Cr))==null?void 0:et.firstChild)||g.target===zt(this,vs)){zt(this,To,Vl)&&this._hideDropdownFromKeyboard();return}zt(this,To,Vl)||bn(this,wl,zu).call(this,g),(ot=g.target.previousSibling)==null||ot.focus()}_moveToBeginning(g){var et;if(!zt(this,To,Vl)){bn(this,wl,zu).call(this,g);return}(et=zt(this,Cr).firstChild)==null||et.focus()}_moveToEnd(g){var et;if(!zt(this,To,Vl)){bn(this,wl,zu).call(this,g);return}(et=zt(this,Cr).lastChild)==null||et.focus()}hideDropdown(){var g,et;(g=zt(this,Cr))==null||g.classList.add("hidden"),zt(this,vs).ariaExpanded="false",(et=zt(this,xu))==null||et.abort(),fn(this,xu,null)}_hideDropdownFromKeyboard(){var g;if(!zt(this,Ly)){if(!zt(this,To,Vl)){(g=zt(this,Sl))==null||g.unselect();return}this.hideDropdown(),zt(this,vs).focus({preventScroll:!0,focusVisible:zt(this,vx)})}}updateColor(g){if(zt(this,Hp)&&(zt(this,Hp).style.backgroundColor=g),!zt(this,Cr))return;const et=zt(this,Js).highlightColors.values();for(const ot of zt(this,Cr).children)ot.ariaSelected=et.next().value===g.toUpperCase()}destroy(){var g,et;(g=zt(this,vs))==null||g.remove(),fn(this,vs,null),fn(this,Hp,null),(et=zt(this,Cr))==null||et.remove(),fn(this,Cr,null)}};vs=new WeakMap,Hp=new WeakMap,Iy=new WeakMap,Cr=new WeakMap,vx=new WeakMap,Ly=new WeakMap,Sl=new WeakMap,xx=new WeakMap,xu=new WeakMap,Js=new WeakMap,bx=new WeakMap,Ex=new WeakSet,Aw=function(){const g=document.createElement("div"),et=zt(this,Js)._signal;g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.className="dropdown",g.role="listbox",g.ariaMultiSelectable="false",g.ariaOrientation="vertical",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),zt(this,Sl)&&(g.id=`${zt(this,Sl).id}_colorpicker_dropdown`);for(const[ot,ct]of zt(this,Js).highlightColors){const ut=document.createElement("button");ut.tabIndex="0",ut.role="option",ut.setAttribute("data-color",ct),ut.title=ot,ut.setAttribute("data-l10n-id",zt(es,bx)[ot]);const dt=document.createElement("span");ut.append(dt),dt.className="swatch",dt.style.backgroundColor=ct,ut.ariaSelected=ct===zt(this,Iy),ut.addEventListener("click",bn(this,Sx,Tw).bind(this,ct),{signal:et}),g.append(ut)}return g.addEventListener("keydown",bn(this,wx,Cw).bind(this),{signal:et}),g},Sx=new WeakSet,Tw=function(g,et){et.stopPropagation(),zt(this,xx).dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:g}),this.updateColor(g)},wx=new WeakSet,Cw=function(g){es._keyboardManager.exec(this,g)},wl=new WeakSet,zu=function(g){if(zt(this,To,Vl)){this.hideDropdown();return}if(fn(this,vx,g.detail===0),zt(this,xu)||(fn(this,xu,new AbortController),window.addEventListener("pointerdown",bn(this,ZE,ZA).bind(this),{signal:zt(this,Js).combinedSignal(zt(this,xu))})),zt(this,vs).ariaExpanded="true",zt(this,Cr)){zt(this,Cr).classList.remove("hidden");return}const et=fn(this,Cr,bn(this,Ex,Aw).call(this));zt(this,vs).append(et)},ZE=new WeakSet,ZA=function(g){var et;(et=zt(this,Cr))!=null&&et.contains(g.target)||this.hideDropdown()},To=new WeakSet,Vl=function(){return zt(this,Cr)&&!zt(this,Cr).classList.contains("hidden")},cn(es,bx,null);let ColorPicker=es;var Co,kx,$y,Ax;const qu=class qu{constructor(g){cn(this,Co,null);cn(this,kx,null);cn(this,$y,null);fn(this,kx,g),fn(this,$y,g._uiManager),zt(qu,Ax)||fn(qu,Ax,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(zt(this,Co))return zt(this,Co);const{editorType:g,colorType:et,colorValue:ot}=zt(this,kx),ct=fn(this,Co,document.createElement("input"));return ct.type="color",ct.value=ot||"#000000",ct.className="basicColorPicker",ct.tabIndex=0,ct.setAttribute("data-l10n-id",zt(qu,Ax)[g]),ct.addEventListener("input",()=>{zt(this,$y).updateParams(et,ct.value)},{signal:zt(this,$y)._signal}),ct}update(g){zt(this,Co)&&(zt(this,Co).value=g)}destroy(){var g;(g=zt(this,Co))==null||g.remove(),fn(this,Co,null)}hideDropdown(){}};Co=new WeakMap,kx=new WeakMap,$y=new WeakMap,Ax=new WeakMap,cn(qu,Ax,null);let BasicColorPicker=qu;function makeColorComp(it){return Math.floor(Math.max(0,Math.min(1,it))*255).toString(16).padStart(2,"0")}function scaleAndClamp(it){return Math.max(0,Math.min(255,255*it))}class ColorConverters{static CMYK_G([g,et,ot,ct]){return["G",1-Math.min(1,.3*g+.59*ot+.11*et+ct)]}static G_CMYK([g]){return["CMYK",0,0,0,1-g]}static G_RGB([g]){return["RGB",g,g,g]}static G_rgb([g]){return g=scaleAndClamp(g),[g,g,g]}static G_HTML([g]){const et=makeColorComp(g);return`#${et}${et}${et}`}static RGB_G([g,et,ot]){return["G",.3*g+.59*et+.11*ot]}static RGB_rgb(g){return g.map(scaleAndClamp)}static RGB_HTML(g){return`#${g.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([g,et,ot,ct]){return["RGB",1-Math.min(1,g+ct),1-Math.min(1,ot+ct),1-Math.min(1,et+ct)]}static CMYK_rgb([g,et,ot,ct]){return[scaleAndClamp(1-Math.min(1,g+ct)),scaleAndClamp(1-Math.min(1,ot+ct)),scaleAndClamp(1-Math.min(1,et+ct))]}static CMYK_HTML(g){const et=this.CMYK_RGB(g).slice(1);return this.RGB_HTML(et)}static RGB_CMYK([g,et,ot]){const ct=1-g,ut=1-et,dt=1-ot,ft=Math.min(ct,ut,dt);return["CMYK",ct,ut,dt,ft]}}class BaseSVGFactory{create(g,et,ot=!1){if(g<=0||et<=0)throw new Error("Invalid SVG dimensions");const ct=this._createSVG("svg:svg");return ct.setAttribute("version","1.1"),ot||(ct.setAttribute("width",`${g}px`),ct.setAttribute("height",`${et}px`)),ct.setAttribute("preserveAspectRatio","none"),ct.setAttribute("viewBox",`0 0 ${g} ${et}`),ct}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(g){return document.createElementNS(SVG_NS,g)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(g){switch(g.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(g);case AnnotationType.TEXT:return new TextAnnotationElement(g);case AnnotationType.WIDGET:switch(g.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(g);case"Btn":return g.data.radioButton?new RadioButtonWidgetAnnotationElement(g):g.data.checkBox?new CheckboxWidgetAnnotationElement(g):new PushButtonWidgetAnnotationElement(g);case"Ch":return new ChoiceWidgetAnnotationElement(g);case"Sig":return new SignatureWidgetAnnotationElement(g)}return new WidgetAnnotationElement(g);case AnnotationType.POPUP:return new PopupAnnotationElement(g);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(g);case AnnotationType.LINE:return new LineAnnotationElement(g);case AnnotationType.SQUARE:return new SquareAnnotationElement(g);case AnnotationType.CIRCLE:return new CircleAnnotationElement(g);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(g);case AnnotationType.CARET:return new CaretAnnotationElement(g);case AnnotationType.INK:return new InkAnnotationElement(g);case AnnotationType.POLYGON:return new PolygonAnnotationElement(g);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(g);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(g);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(g);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(g);case AnnotationType.STAMP:return new StampAnnotationElement(g);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(g);default:return new AnnotationElement(g)}}}var Up,Fy,$s,Tx,_w;const sA=class sA{constructor(g,{isRenderable:et=!1,ignoreBorder:ot=!1,createQuadrilaterals:ct=!1}={}){cn(this,Tx);cn(this,Up,null);cn(this,Fy,!1);cn(this,$s,null);this.isRenderable=et,this.data=g.data,this.layer=g.layer,this.linkService=g.linkService,this.downloadManager=g.downloadManager,this.imageResourcesPath=g.imageResourcesPath,this.renderForms=g.renderForms,this.svgFactory=g.svgFactory,this.annotationStorage=g.annotationStorage,this.enableComment=g.enableComment,this.enableScripting=g.enableScripting,this.hasJSActions=g.hasJSActions,this._fieldObjects=g.fieldObjects,this.parent=g.parent,et&&(this.container=this._createContainer(ot)),ct&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:g,richText:et}){return!!(g!=null&&g.str||et!=null&&et.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return sA._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var ot;const{data:g}=this,et=(ot=this.annotationStorage)==null?void 0:ot.getEditor(g.id);return et?et.getData():g}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var ft;const g=(ft=this.annotationStorage)==null?void 0:ft.getEditor(this.data.id);if(g)return g.commentButtonPositionInPage;const{quadPoints:et,inkLists:ot,rect:ct}=this.data;let ut=-1/0,dt=-1/0;if((et==null?void 0:et.length)>=8){for(let St=0;St<et.length;St+=8)et[St+1]>dt?(dt=et[St+1],ut=et[St+2]):et[St+1]===dt&&(ut=Math.max(ut,et[St+2]));return[ut,dt]}if((ot==null?void 0:ot.length)>=1){for(const St of ot)for(let kt=0,Tt=St.length;kt<Tt;kt+=2)St[kt+1]>dt?(dt=St[kt+1],ut=St[kt]):St[kt+1]===dt&&(ut=Math.max(ut,St[kt]));if(ut!==1/0)return[ut,dt]}return ct?[ct[2],ct[3]]:null}_normalizePoint(g){const{page:{view:et},viewport:{rawDims:{pageWidth:ot,pageHeight:ct,pageX:ut,pageY:dt}}}=this.parent;return g[1]=et[3]-g[1]+et[1],g[0]=100*(g[0]-ut)/ot,g[1]=100*(g[1]-dt)/ct,g}get commentText(){var et,ot,ct;const{data:g}=this;return((ot=(et=this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${g.id}`))==null?void 0:et.popup)==null?void 0:ot.contents)||((ct=g.contentsObj)==null?void 0:ct.str)||""}set commentText(g){const{data:et}=this,ot={deleted:!g,contents:g||""};this.annotationStorage.updateEditor(et.id,{popup:ot})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${et.id}`,{id:et.id,annotationType:et.annotationType,pageIndex:this.parent.page._pageIndex,popup:ot,popupRef:et.popupRef,modificationDate:new Date}),g||this.removePopup()}removePopup(){var g,et;(et=((g=zt(this,$s))==null?void 0:g.popup)||this.popup)==null||et.remove(),fn(this,$s,this.popup=null)}updateEdited(g){var ut;if(!this.container)return;g.rect&&(zt(this,Up)||fn(this,Up,{rect:this.data.rect.slice(0)}));const{rect:et,popup:ot}=g;et&&bn(this,Tx,_w).call(this,et);let ct=((ut=zt(this,$s))==null?void 0:ut.popup)||this.popup;!ct&&(ot!=null&&ot.text)&&(this._createPopup(ot),ct=zt(this,$s).popup),ct&&(ct.updateEdited(g),ot!=null&&ot.deleted&&(ct.remove(),fn(this,$s,null),this.popup=null))}resetEdited(){var g;zt(this,Up)&&(bn(this,Tx,_w).call(this,zt(this,Up).rect),(g=zt(this,$s))==null||g.popup.resetEdited(),fn(this,Up,null))}_createContainer(g){const{data:et,parent:{page:ot,viewport:ct}}=this,ut=document.createElement("section");ut.setAttribute("data-annotation-id",et.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(ut.tabIndex=0);const{style:dt}=ut;if(dt.zIndex=this.parent.zIndex,this.parent.zIndex+=2,et.alternativeText&&(ut.title=et.alternativeText),et.noRotate&&ut.classList.add("norotate"),!et.rect||this instanceof PopupAnnotationElement){const{rotation:Ht}=et;return!et.hasOwnCanvas&&Ht!==0&&this.setRotation(Ht,ut),ut}const{width:ft,height:St}=this;if(!g&&et.borderStyle.width>0){dt.borderWidth=`${et.borderStyle.width}px`;const Ht=et.borderStyle.horizontalCornerRadius,Kt=et.borderStyle.verticalCornerRadius;if(Ht>0||Kt>0){const Ut=`calc(${Ht}px * var(--total-scale-factor)) / calc(${Kt}px * var(--total-scale-factor))`;dt.borderRadius=Ut}else if(this instanceof RadioButtonWidgetAnnotationElement){const Ut=`calc(${ft}px * var(--total-scale-factor)) / calc(${St}px * var(--total-scale-factor))`;dt.borderRadius=Ut}switch(et.borderStyle.style){case AnnotationBorderStyleType.SOLID:dt.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:dt.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:dt.borderBottomStyle="solid";break}const Bt=et.borderColor||null;Bt?(fn(this,Fy,!0),dt.borderColor=Util.makeHexColor(Bt[0]|0,Bt[1]|0,Bt[2]|0)):dt.borderWidth=0}const kt=Util.normalizeRect([et.rect[0],ot.view[3]-et.rect[1]+ot.view[1],et.rect[2],ot.view[3]-et.rect[3]+ot.view[1]]),{pageWidth:Tt,pageHeight:Rt,pageX:jt,pageY:$t}=ct.rawDims;dt.left=`${100*(kt[0]-jt)/Tt}%`,dt.top=`${100*(kt[1]-$t)/Rt}%`;const{rotation:Ft}=et;return et.hasOwnCanvas||Ft===0?(dt.width=`${100*ft/Tt}%`,dt.height=`${100*St/Rt}%`):this.setRotation(Ft,ut),ut}setRotation(g,et=this.container){if(!this.data.rect)return;const{pageWidth:ot,pageHeight:ct}=this.parent.viewport.rawDims;let{width:ut,height:dt}=this;g%180!==0&&([ut,dt]=[dt,ut]),et.style.width=`${100*ut/ot}%`,et.style.height=`${100*dt/ct}%`,et.setAttribute("data-main-rotation",(360-g)%360)}get _commonActions(){const g=(et,ot,ct)=>{const ut=ct.detail[et],dt=ut[0],ft=ut.slice(1);ct.target.style[ot]=ColorConverters[`${dt}_HTML`](ft),this.annotationStorage.setValue(this.data.id,{[ot]:ColorConverters[`${dt}_rgb`](ft)})};return shadow(this,"_commonActions",{display:et=>{const{display:ot}=et.detail,ct=ot%2===1;this.container.style.visibility=ct?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ct,noPrint:ot===1||ot===2})},print:et=>{this.annotationStorage.setValue(this.data.id,{noPrint:!et.detail.print})},hidden:et=>{const{hidden:ot}=et.detail;this.container.style.visibility=ot?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:ot,noView:ot})},focus:et=>{setTimeout(()=>et.target.focus({preventScroll:!1}),0)},userName:et=>{et.target.title=et.detail.userName},readonly:et=>{et.target.disabled=et.detail.readonly},required:et=>{this._setRequired(et.target,et.detail.required)},bgColor:et=>{g("bgColor","backgroundColor",et)},fillColor:et=>{g("fillColor","backgroundColor",et)},fgColor:et=>{g("fgColor","color",et)},textColor:et=>{g("textColor","color",et)},borderColor:et=>{g("borderColor","borderColor",et)},strokeColor:et=>{g("strokeColor","borderColor",et)},rotation:et=>{const ot=et.detail.rotation;this.setRotation(ot),this.annotationStorage.setValue(this.data.id,{rotation:ot})}})}_dispatchEventFromSandbox(g,et){const ot=this._commonActions;for(const ct of Object.keys(et.detail)){const ut=g[ct]||ot[ct];ut==null||ut(et)}}_setDefaultPropertiesFromJS(g){if(!this.enableScripting)return;const et=this.annotationStorage.getRawValue(this.data.id);if(!et)return;const ot=this._commonActions;for(const[ct,ut]of Object.entries(et)){const dt=ot[ct];if(dt){const ft={detail:{[ct]:ut},target:g};dt(ft),delete et[ct]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:g}=this.data;if(!g)return;const[et,ot,ct,ut]=this.data.rect.map(Ht=>Math.fround(Ht));if(g.length===8){const[Ht,Kt,Bt,Ut]=g.subarray(2,6);if(ct===Ht&&ut===Kt&&et===Bt&&ot===Ut)return}const{style:dt}=this.container;let ft;if(zt(this,Fy)){const{borderColor:Ht,borderWidth:Kt}=dt;dt.borderWidth=0,ft=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ht}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const St=ct-et,kt=ut-ot,{svgFactory:Tt}=this,Rt=Tt.createElement("svg");Rt.classList.add("quadrilateralsContainer"),Rt.setAttribute("width",0),Rt.setAttribute("height",0),Rt.role="none";const jt=Tt.createElement("defs");Rt.append(jt);const $t=Tt.createElement("clipPath"),Ft=`clippath_${this.data.id}`;$t.setAttribute("id",Ft),$t.setAttribute("clipPathUnits","objectBoundingBox"),jt.append($t);for(let Ht=2,Kt=g.length;Ht<Kt;Ht+=8){const Bt=g[Ht],Ut=g[Ht+1],Yt=g[Ht+2],Jt=g[Ht+3],Zt=Tt.createElement("rect"),en=(Yt-et)/St,tn=(ut-Ut)/kt,nn=(Bt-Yt)/St,ln=(Ut-Jt)/kt;Zt.setAttribute("x",en),Zt.setAttribute("y",tn),Zt.setAttribute("width",nn),Zt.setAttribute("height",ln),$t.append(Zt),ft==null||ft.push(`<rect vector-effect="non-scaling-stroke" x="${en}" y="${tn}" width="${nn}" height="${ln}"/>`)}zt(this,Fy)&&(ft.push("</g></svg>')"),dt.backgroundImage=ft.join("")),this.container.append(Rt),this.container.style.clipPath=`url(#${Ft})`}_createPopup(g=null){const{data:et}=this;let ot,ct;g?(ot={str:g.text},ct=g.date):(ot=et.contentsObj,ct=et.modificationDate);const ut=fn(this,$s,new PopupAnnotationElement({data:{color:et.color,titleObj:et.titleObj,modificationDate:ct,contentsObj:ot,richText:et.richText,parentRect:et.rect,borderStyle:0,id:`popup_${et.id}`,rotation:et.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(ut.render())}get hasPopupElement(){return!!(zt(this,$s)||this.popup||this.data.popupRef)}get extraPopupElement(){return zt(this,$s)}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(g,et=null){const ot=[];if(this._fieldObjects){const ct=this._fieldObjects[g];if(ct)for(const{page:ut,id:dt,exportValues:ft}of ct){if(ut===-1||dt===et)continue;const St=typeof ft=="string"?ft:null,kt=document.querySelector(`[data-element-id="${dt}"]`);if(kt&&!GetElementsByNameSet.has(kt)){warn(`_getElementsByName - element not allowed: ${dt}`);continue}ot.push({id:dt,exportValue:St,domElement:kt})}return ot}for(const ct of document.getElementsByName(g)){const{exportValue:ut}=ct,dt=ct.getAttribute("data-element-id");dt!==et&&GetElementsByNameSet.has(ct)&&ot.push({id:dt,exportValue:ut,domElement:ct})}return ot}show(){var g;this.container&&(this.container.hidden=!1),(g=this.popup)==null||g.maybeShow()}hide(){var g;this.container&&(this.container.hidden=!0),(g=this.popup)==null||g.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const g=this.getElementsToTriggerPopup();if(Array.isArray(g))for(const et of g)et.classList.add("highlightArea");else g.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:g,data:{id:et}}=this;this.container.addEventListener("dblclick",()=>{var ot;(ot=this.linkService.eventBus)==null||ot.dispatch("switchannotationeditormode",{source:this,mode:g,editId:et,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Up=new WeakMap,Fy=new WeakMap,$s=new WeakMap,Tx=new WeakSet,_w=function(g){const{container:{style:et},data:{rect:ot,rotation:ct},parent:{viewport:{rawDims:{pageWidth:ut,pageHeight:dt,pageX:ft,pageY:St}}}}=this;ot==null||ot.splice(0,4,...g),et.left=`${100*(g[0]-ft)/ut}%`,et.top=`${100*(dt-g[3]+St)/dt}%`,ct===0?(et.width=`${100*(g[2]-g[0])/ut}%`,et.height=`${100*(g[3]-g[1])/dt}%`):this.setRotation(ct)};let AnnotationElement=sA;class EditorAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.editor=g.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:g}=this;g.hasComment&&(this._createPopup(g.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(g){this.editor.comment=g,g||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Al,Hu,QE,QA,eS,eT;class LinkAnnotationElement extends AnnotationElement{constructor(et,ot=null){super(et,{isRenderable:!0,ignoreBorder:!!(ot!=null&&ot.ignoreBorder),createQuadrilaterals:!0});cn(this,Al);cn(this,QE);cn(this,eS);this.isTooltipOnly=et.data.isTooltipOnly}render(){const{data:et,linkService:ot}=this,ct=document.createElement("a");ct.setAttribute("data-element-id",et.id);let ut=!1;return et.url?(ot.addLinkAttributes(ct,et.url,et.newWindow),ut=!0):et.action?(this._bindNamedAction(ct,et.action,et.overlaidText),ut=!0):et.attachment?(bn(this,QE,QA).call(this,ct,et.attachment,et.overlaidText,et.attachmentDest),ut=!0):et.setOCGState?(bn(this,eS,eT).call(this,ct,et.setOCGState,et.overlaidText),ut=!0):et.dest?(this._bindLink(ct,et.dest,et.overlaidText),ut=!0):(et.actions&&(et.actions.Action||et.actions["Mouse Up"]||et.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ct,et),ut=!0),et.resetForm?(this._bindResetFormAction(ct,et.resetForm),ut=!0):this.isTooltipOnly&&!ut&&(this._bindLink(ct,""),ut=!0)),this.container.classList.add("linkAnnotation"),ut&&this.container.append(ct),this.container}_bindLink(et,ot,ct=""){et.href=this.linkService.getDestinationHash(ot),et.onclick=()=>(ot&&this.linkService.goToDestination(ot),!1),(ot||ot==="")&&bn(this,Al,Hu).call(this),ct&&(et.title=ct)}_bindNamedAction(et,ot,ct=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeNamedAction(ot),!1),ct&&(et.title=ct),bn(this,Al,Hu).call(this)}_bindJSAction(et,ot){et.href=this.linkService.getAnchorUrl("");const ct=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ut of Object.keys(ot.actions)){const dt=ct.get(ut);dt&&(et[dt]=()=>{var ft;return(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ot.id,name:ut}}),!1})}ot.overlaidText&&(et.title=ot.overlaidText),et.onclick||(et.onclick=()=>!1),bn(this,Al,Hu).call(this)}_bindResetFormAction(et,ot){const ct=et.onclick;if(ct||(et.href=this.linkService.getAnchorUrl("")),bn(this,Al,Hu).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ct||(et.onclick=()=>!1);return}et.onclick=()=>{var Rt;ct==null||ct();const{fields:ut,refs:dt,include:ft}=ot,St=[];if(ut.length!==0||dt.length!==0){const jt=new Set(dt);for(const $t of ut){const Ft=this._fieldObjects[$t]||[];for(const{id:Ht}of Ft)jt.add(Ht)}for(const $t of Object.values(this._fieldObjects))for(const Ft of $t)jt.has(Ft.id)===ft&&St.push(Ft)}else for(const jt of Object.values(this._fieldObjects))St.push(...jt);const kt=this.annotationStorage,Tt=[];for(const jt of St){const{id:$t}=jt;switch(Tt.push($t),jt.type){case"text":{const Ht=jt.defaultValue||"";kt.setValue($t,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=jt.defaultValue===jt.exportValues;kt.setValue($t,{value:Ht});break}case"combobox":case"listbox":{const Ht=jt.defaultValue||"";kt.setValue($t,{value:Ht});break}default:continue}const Ft=document.querySelector(`[data-element-id="${$t}"]`);if(Ft){if(!GetElementsByNameSet.has(Ft)){warn(`_bindResetFormAction - element not allowed: ${$t}`);continue}}else continue;Ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Tt,name:"ResetForm"}})),!1}}}Al=new WeakSet,Hu=function(){this.container.setAttribute("data-internal-link","")},QE=new WeakSet,QA=function(et,ot,ct="",ut=null){et.href=this.linkService.getAnchorUrl(""),ot.description?et.title=ot.description:ct&&(et.title=ct),et.onclick=()=>{var dt;return(dt=this.downloadManager)==null||dt.openOrDownloadData(ot.content,ot.filename,ut),!1},bn(this,Al,Hu).call(this)},eS=new WeakSet,eT=function(et,ot,ct=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeSetOCGState(ot),!1),ct&&(et.title=ct),bn(this,Al,Hu).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const g=document.createElement("img");return g.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",g.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),g.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(g),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(g){var et;this.data.hasOwnCanvas&&(((et=g.previousSibling)==null?void 0:et.nodeName)==="CANVAS"&&(g.previousSibling.hidden=!0),g.hidden=!1)}_getKeyModifier(g){return util_FeatureTest.platform.isMac?g.metaKey:g.ctrlKey}_setEventListener(g,et,ot,ct,ut){ot.includes("mouse")?g.addEventListener(ot,dt=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ct,value:ut(dt),shift:dt.shiftKey,modifier:this._getKeyModifier(dt)}})}):g.addEventListener(ot,dt=>{var ft;if(ot==="blur"){if(!et.focused||!dt.relatedTarget)return;et.focused=!1}else if(ot==="focus"){if(et.focused)return;et.focused=!0}ut&&((ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ct,value:ut(dt)}}))})}_setEventListeners(g,et,ot,ct){var ut,dt,ft;for(const[St,kt]of ot)(kt==="Action"||(ut=this.data.actions)!=null&&ut[kt])&&((kt==="Focus"||kt==="Blur")&&(et||(et={focused:!1})),this._setEventListener(g,et,St,kt,ct),kt==="Focus"&&!((dt=this.data.actions)!=null&&dt.Blur)?this._setEventListener(g,et,"blur","Blur",null):kt==="Blur"&&!((ft=this.data.actions)!=null&&ft.Focus)&&this._setEventListener(g,et,"focus","Focus",null))}_setBackgroundColor(g){const et=this.data.backgroundColor||null;g.style.backgroundColor=et===null?"transparent":Util.makeHexColor(et[0],et[1],et[2])}_setTextStyle(g){const et=["left","center","right"],{fontColor:ot}=this.data.defaultAppearanceData,ct=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,ut=g.style;let dt;const ft=2,St=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft),Tt=Math.round(kt/(LINE_FACTOR*ct))||1,Rt=kt/Tt;dt=Math.min(ct,St(Rt/LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft);dt=Math.min(ct,St(kt/LINE_FACTOR))}ut.fontSize=`calc(${dt}px * var(--total-scale-factor))`,ut.color=Util.makeHexColor(ot[0],ot[1],ot[2]),this.data.textAlignment!==null&&(ut.textAlign=et[this.data.textAlignment])}_setRequired(g,et){et?g.setAttribute("required",!0):g.removeAttribute("required"),g.setAttribute("aria-required",et)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){const et=g.renderForms||g.data.hasOwnCanvas||!g.data.hasAppearance&&!!g.data.fieldValue;super(g,{isRenderable:et})}setPropertyOnSiblings(g,et,ot,ct){const ut=this.annotationStorage;for(const dt of this._getElementsByName(g.name,g.id))dt.domElement&&(dt.domElement[et]=ot),ut.setValue(dt.id,{[ct]:ot})}render(){var ct,ut;const g=this.annotationStorage,et=this.data.id;this.container.classList.add("textWidgetAnnotation");let ot=null;if(this.renderForms){const dt=g.getValue(et,{value:this.data.fieldValue});let ft=dt.value||"";const St=g.getValue(et,{charLimit:this.data.maxLen}).charLimit;St&&ft.length>St&&(ft=ft.slice(0,St));let kt=dt.formattedValue||((ct=this.data.textContent)==null?void 0:ct.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Tt={userValue:ft,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(ot=document.createElement("textarea"),ot.textContent=kt??ft,this.data.doNotScroll&&(ot.style.overflowY="hidden")):(ot=document.createElement("input"),ot.type=this.data.password?"password":"text",ot.setAttribute("value",kt??ft),this.data.doNotScroll&&(ot.style.overflowX="hidden")),this.data.hasOwnCanvas&&(ot.hidden=!0),GetElementsByNameSet.add(ot),ot.setAttribute("data-element-id",et),ot.disabled=this.data.readOnly,ot.name=this.data.fieldName,ot.tabIndex=0;const{datetimeFormat:Rt,datetimeType:jt,timeStep:$t}=this.data,Ft=!!jt&&this.enableScripting;Rt&&(ot.title=Rt),this._setRequired(ot,this.data.required),St&&(ot.maxLength=St),ot.addEventListener("input",Kt=>{g.setValue(et,{value:Kt.target.value}),this.setPropertyOnSiblings(ot,"value",Kt.target.value,"value"),Tt.formattedValue=null}),ot.addEventListener("resetform",Kt=>{const Bt=this.data.defaultFieldValue??"";ot.value=Tt.userValue=Bt,Tt.formattedValue=null});let Ht=Kt=>{const{formattedValue:Bt}=Tt;Bt!=null&&(Kt.target.value=Bt),Kt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ot.addEventListener("focus",Bt=>{var Yt;if(Tt.focused)return;const{target:Ut}=Bt;if(Ft&&(Ut.type=jt,$t&&(Ut.step=$t)),Tt.userValue){const Jt=Tt.userValue;if(Ft)if(jt==="time"){const Zt=new Date(Jt),en=[Zt.getHours(),Zt.getMinutes(),Zt.getSeconds()];Ut.value=en.map(tn=>tn.toString().padStart(2,"0")).join(":")}else Ut.value=new Date(Jt-TIMEZONE_OFFSET).toISOString().split(jt==="date"?"T":".",1)[0];else Ut.value=Jt}Tt.lastCommittedValue=Ut.value,Tt.commitKey=1,(Yt=this.data.actions)!=null&&Yt.Focus||(Tt.focused=!0)}),ot.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const Ut={value(Yt){Tt.userValue=Yt.detail.value??"",Ft||g.setValue(et,{value:Tt.userValue.toString()}),Yt.target.value=Tt.userValue},formattedValue(Yt){const{formattedValue:Jt}=Yt.detail;Tt.formattedValue=Jt,Jt!=null&&Yt.target!==document.activeElement&&(Yt.target.value=Jt);const Zt={formattedValue:Jt};Ft&&(Zt.value=Jt),g.setValue(et,Zt)},selRange(Yt){Yt.target.setSelectionRange(...Yt.detail.selRange)},charLimit:Yt=>{var tn;const{charLimit:Jt}=Yt.detail,{target:Zt}=Yt;if(Jt===0){Zt.removeAttribute("maxLength");return}Zt.setAttribute("maxLength",Jt);let en=Tt.userValue;!en||en.length<=Jt||(en=en.slice(0,Jt),Zt.value=Tt.userValue=en,g.setValue(et,{value:en}),(tn=this.linkService.eventBus)==null||tn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:en,willCommit:!0,commitKey:1,selStart:Zt.selectionStart,selEnd:Zt.selectionEnd}}))}};this._dispatchEventFromSandbox(Ut,Bt)}),ot.addEventListener("keydown",Bt=>{var Jt;Tt.commitKey=1;let Ut=-1;if(Bt.key==="Escape"?Ut=0:Bt.key==="Enter"&&!this.data.multiLine?Ut=2:Bt.key==="Tab"&&(Tt.commitKey=3),Ut===-1)return;const{value:Yt}=Bt.target;Tt.lastCommittedValue!==Yt&&(Tt.lastCommittedValue=Yt,Tt.userValue=Yt,(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Ut,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Kt=Ht;Ht=null,ot.addEventListener("blur",Bt=>{var Jt,Zt;if(!Tt.focused||!Bt.relatedTarget)return;(Jt=this.data.actions)!=null&&Jt.Blur||(Tt.focused=!1);const{target:Ut}=Bt;let{value:Yt}=Ut;if(Ft){if(Yt&&jt==="time"){const en=Yt.split(":").map(tn=>parseInt(tn,10));Yt=new Date(2e3,0,1,en[0],en[1],en[2]||0).valueOf(),Ut.step=""}else Yt.includes("T")||(Yt=`${Yt}T00:00`),Yt=new Date(Yt).valueOf();Ut.type="text"}Tt.userValue=Yt,Tt.lastCommittedValue!==Yt&&((Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Tt.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}})),Kt(Bt)}),(ut=this.data.actions)!=null&&ut.Keystroke&&ot.addEventListener("beforeinput",Bt=>{var ln;Tt.lastCommittedValue=null;const{data:Ut,target:Yt}=Bt,{value:Jt,selectionStart:Zt,selectionEnd:en}=Yt;let tn=Zt,nn=en;switch(Bt.inputType){case"deleteWordBackward":{const an=Jt.substring(0,Zt).match(/\w*[^\w]*$/);an&&(tn-=an[0].length);break}case"deleteWordForward":{const an=Jt.substring(Zt).match(/^[^\w]*\w*/);an&&(nn+=an[0].length);break}case"deleteContentBackward":Zt===en&&(tn-=1);break;case"deleteContentForward":Zt===en&&(nn+=1);break}Bt.preventDefault(),(ln=this.linkService.eventBus)==null||ln.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Jt,change:Ut||"",willCommit:!1,selStart:tn,selEnd:nn}})}),this._setEventListeners(ot,Tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(Ht&&ot.addEventListener("blur",Ht),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/St;ot.classList.add("comb"),ot.style.letterSpacing=`calc(${Bt}px * var(--total-scale-factor) - 1ch)`}}else ot=document.createElement("div"),ot.textContent=this.data.fieldValue,ot.style.verticalAlign="middle",ot.style.display="table-cell",this.data.hasOwnCanvas&&(ot.hidden=!0);return this._setTextStyle(ot),this._setBackgroundColor(ot),this._setDefaultPropertiesFromJS(ot),this.container.append(ot),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:!!g.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){const g=this.annotationStorage,et=this.data,ot=et.id;let ct=g.getValue(ot,{value:et.exportValue===et.fieldValue}).value;typeof ct=="string"&&(ct=ct!=="Off",g.setValue(ot,{value:ct})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ut=document.createElement("input");return GetElementsByNameSet.add(ut),ut.setAttribute("data-element-id",ot),ut.disabled=et.readOnly,this._setRequired(ut,this.data.required),ut.type="checkbox",ut.name=et.fieldName,ct&&ut.setAttribute("checked",!0),ut.setAttribute("exportValue",et.exportValue),ut.tabIndex=0,ut.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot)){const Tt=St&&kt.exportValue===et.exportValue;kt.domElement&&(kt.domElement.checked=Tt),g.setValue(kt.id,{value:Tt})}g.setValue(ot,{value:St})}),ut.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue||"Off";dt.target.checked=ft===et.exportValue}),this.enableScripting&&this.hasJSActions&&(ut.addEventListener("updatefromsandbox",dt=>{const ft={value(St){St.target.checked=St.detail.value!=="Off",g.setValue(ot,{value:St.target.checked})}};this._dispatchEventFromSandbox(ft,dt)}),this._setEventListeners(ut,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dt=>dt.target.checked)),this._setBackgroundColor(ut),this._setDefaultPropertiesFromJS(ut),this.container.append(ut),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const g=this.annotationStorage,et=this.data,ot=et.id;let ct=g.getValue(ot,{value:et.fieldValue===et.buttonValue}).value;if(typeof ct=="string"&&(ct=ct!==et.buttonValue,g.setValue(ot,{value:ct})),ct)for(const dt of this._getElementsByName(et.fieldName,ot))g.setValue(dt.id,{value:!1});const ut=document.createElement("input");if(GetElementsByNameSet.add(ut),ut.setAttribute("data-element-id",ot),ut.disabled=et.readOnly,this._setRequired(ut,this.data.required),ut.type="radio",ut.name=et.fieldName,ct&&ut.setAttribute("checked",!0),ut.tabIndex=0,ut.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot))g.setValue(kt.id,{value:!1});g.setValue(ot,{value:St})}),ut.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue;dt.target.checked=ft!=null&&ft===et.buttonValue}),this.enableScripting&&this.hasJSActions){const dt=et.buttonValue;ut.addEventListener("updatefromsandbox",ft=>{const St={value:kt=>{const Tt=dt===kt.detail.value;for(const Rt of this._getElementsByName(kt.target.name)){const jt=Tt&&Rt.id===ot;Rt.domElement&&(Rt.domElement.checked=jt),g.setValue(Rt.id,{value:jt})}}};this._dispatchEventFromSandbox(St,ft)}),this._setEventListeners(ut,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ft=>ft.target.checked)}return this._setBackgroundColor(ut),this._setDefaultPropertiesFromJS(ut),this.container.append(ut),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(g){super(g,{ignoreBorder:g.data.hasAppearance})}render(){const g=super.render();g.classList.add("buttonWidgetAnnotation","pushButton");const et=g.lastChild;return this.enableScripting&&this.hasJSActions&&et&&(this._setDefaultPropertiesFromJS(et),et.addEventListener("updatefromsandbox",ot=>{this._dispatchEventFromSandbox({},ot)})),g}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const g=this.annotationStorage,et=this.data.id,ot=g.getValue(et,{value:this.data.fieldValue}),ct=document.createElement("select");GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",et),ct.disabled=this.data.readOnly,this._setRequired(ct,this.data.required),ct.name=this.data.fieldName,ct.tabIndex=0;let ut=this.data.combo&&this.data.options.length>0;this.data.combo||(ct.size=this.data.options.length,this.data.multiSelect&&(ct.multiple=!0)),ct.addEventListener("resetform",Tt=>{const Rt=this.data.defaultFieldValue;for(const jt of ct.options)jt.selected=jt.value===Rt});for(const Tt of this.data.options){const Rt=document.createElement("option");Rt.textContent=Tt.displayValue,Rt.value=Tt.exportValue,ot.value.includes(Tt.exportValue)&&(Rt.setAttribute("selected",!0),ut=!1),ct.append(Rt)}let dt=null;if(ut){const Tt=document.createElement("option");Tt.value=" ",Tt.setAttribute("hidden",!0),Tt.setAttribute("selected",!0),ct.prepend(Tt),dt=()=>{Tt.remove(),ct.removeEventListener("input",dt),dt=null},ct.addEventListener("input",dt)}const ft=Tt=>{const Rt=Tt?"value":"textContent",{options:jt,multiple:$t}=ct;return $t?Array.prototype.filter.call(jt,Ft=>Ft.selected).map(Ft=>Ft[Rt]):jt.selectedIndex===-1?null:jt[jt.selectedIndex][Rt]};let St=ft(!1);const kt=Tt=>{const Rt=Tt.target.options;return Array.prototype.map.call(Rt,jt=>({displayValue:jt.textContent,exportValue:jt.value}))};return this.enableScripting&&this.hasJSActions?(ct.addEventListener("updatefromsandbox",Tt=>{const Rt={value(jt){dt==null||dt();const $t=jt.detail.value,Ft=new Set(Array.isArray($t)?$t:[$t]);for(const Ht of ct.options)Ht.selected=Ft.has(Ht.value);g.setValue(et,{value:ft(!0)}),St=ft(!1)},multipleSelection(jt){ct.multiple=!0},remove(jt){const $t=ct.options,Ft=jt.detail.remove;$t[Ft].selected=!1,ct.remove(Ft),$t.length>0&&Array.prototype.findIndex.call($t,Kt=>Kt.selected)===-1&&($t[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},clear(jt){for(;ct.length!==0;)ct.remove(0);g.setValue(et,{value:null,items:[]}),St=ft(!1)},insert(jt){const{index:$t,displayValue:Ft,exportValue:Ht}=jt.detail.insert,Kt=ct.children[$t],Bt=document.createElement("option");Bt.textContent=Ft,Bt.value=Ht,Kt?Kt.before(Bt):ct.append(Bt),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},items(jt){const{items:$t}=jt.detail;for(;ct.length!==0;)ct.remove(0);for(const Ft of $t){const{displayValue:Ht,exportValue:Kt}=Ft,Bt=document.createElement("option");Bt.textContent=Ht,Bt.value=Kt,ct.append(Bt)}ct.options.length>0&&(ct.options[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(jt)}),St=ft(!1)},indices(jt){const $t=new Set(jt.detail.indices);for(const Ft of jt.target.options)Ft.selected=$t.has(Ft.index);g.setValue(et,{value:ft(!0)}),St=ft(!1)},editable(jt){jt.target.disabled=!jt.detail.editable}};this._dispatchEventFromSandbox(Rt,Tt)}),ct.addEventListener("input",Tt=>{var $t;const Rt=ft(!0),jt=ft(!1);g.setValue(et,{value:Rt}),Tt.preventDefault(),($t=this.linkService.eventBus)==null||$t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:St,change:jt,changeEx:Rt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ct,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Tt=>Tt.target.value)):ct.addEventListener("input",function(Tt){g.setValue(et,{value:ft(!0)})}),this.data.combo&&this._setTextStyle(ct),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}var Cx,Rw;class PopupAnnotationElement extends AnnotationElement{constructor(et){const{data:ot,elements:ct,parent:ut}=et,dt=!!ut._commentManager;super(et,{isRenderable:!dt&&AnnotationElement._hasPopupData(ot)});cn(this,Cx);if(this.elements=ct,dt&&AnnotationElement._hasPopupData(ot)){const ft=this.popup=bn(this,Cx,Rw).call(this);for(const St of ct)St.popup=ft}else this.popup=null}render(){const{container:et}=this;et.classList.add("popupAnnotation"),et.role="comment";const ot=this.popup=bn(this,Cx,Rw).call(this),ct=[];for(const ut of this.elements)ut.popup=ot,ut.container.ariaHasPopup="dialog",ct.push(ut.data.id),ut.addHighlightArea();return this.container.setAttribute("aria-controls",ct.map(ut=>`${AnnotationPrefix}${ut}`).join(",")),this.container}}Cx=new WeakSet,Rw=function(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var xs,bu,tS,nS,By,Vy,br,Ro,Eu,Gp,zy,Hy,Po,bs,Tl,Cl,Pr,_l,Su,_x,Rl,Uy,Wp,wu,qr,ku,Gy,B1,Rx,Pw,Px,Mw,Mx,Nw,Wy,V1,Nx,jw,rS,tT,iS,nT,sS,rT,oS,iT,qy,z1,Ky,H1,jx,Ow;class PopupElement{constructor({container:g,color:et,elements:ot,titleObj:ct,modificationDate:ut,contentsObj:dt,richText:ft,parent:St,rect:kt,parentRect:Tt,open:Rt,commentManager:jt=null}){cn(this,Gy);cn(this,Rx);cn(this,Px);cn(this,Mx);cn(this,Wy);cn(this,Nx);cn(this,rS);cn(this,iS);cn(this,sS);cn(this,oS);cn(this,qy);cn(this,Ky);cn(this,jx);cn(this,xs,null);cn(this,bu,bn(this,sS,rT).bind(this));cn(this,tS,bn(this,jx,Ow).bind(this));cn(this,nS,bn(this,Ky,H1).bind(this));cn(this,By,bn(this,qy,z1).bind(this));cn(this,Vy,null);cn(this,br,null);cn(this,Ro,null);cn(this,Eu,null);cn(this,Gp,null);cn(this,zy,null);cn(this,Hy,null);cn(this,Po,!1);cn(this,bs,null);cn(this,Tl,null);cn(this,Cl,null);cn(this,Pr,null);cn(this,_l,null);cn(this,Su,null);cn(this,_x,null);cn(this,Rl,null);cn(this,Uy,null);cn(this,Wp,null);cn(this,wu,!1);cn(this,qr,null);cn(this,ku,null);fn(this,br,g),fn(this,Uy,ct),fn(this,Ro,dt),fn(this,Rl,ft),fn(this,zy,St),fn(this,Vy,et),fn(this,_x,kt),fn(this,Hy,Tt),fn(this,Gp,ot),fn(this,xs,jt),fn(this,qr,ot[0]),fn(this,Eu,PDFDateString.toDateObject(ut)),this.trigger=ot.flatMap($t=>$t.getElementsToTriggerPopup()),jt?this.renderCommentButton():(bn(this,Gy,B1).call(this),zt(this,br).hidden=!0,Rt&&bn(this,qy,z1).call(this))}renderCommentButton(){if(zt(this,Pr)||(zt(this,_l)||bn(this,Rx,Pw).call(this),!zt(this,_l)))return;const{signal:g}=fn(this,Tl,new AbortController),et=!!zt(this,qr).extraPopupElement,ot=()=>{zt(this,xs).toggleCommentPopup(this,!0,void 0,!et)},ct=()=>{zt(this,xs).toggleCommentPopup(this,!1,!0,!et)},ut=()=>{zt(this,xs).toggleCommentPopup(this,!1,!1)};if(et){fn(this,Pr,zt(this,qr).container);for(const dt of this.trigger)dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.addEventListener("keydown",zt(this,bu),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ct,{signal:g}),dt.addEventListener("pointerleave",ut,{signal:g}),dt.classList.add("popupTriggerArea")}else{const dt=fn(this,Pr,document.createElement("button"));dt.className="annotationCommentButton";const ft=zt(this,qr).container;dt.style.zIndex=ft.style.zIndex+1,dt.tabIndex=0,dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.setAttribute("data-l10n-id","pdfjs-show-comment-button"),bn(this,Mx,Nw).call(this),bn(this,Px,Mw).call(this),dt.addEventListener("keydown",zt(this,bu),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ct,{signal:g}),dt.addEventListener("pointerleave",ut,{signal:g}),ft.after(dt)}}get commentButtonColor(){const{color:g,opacity:et}=zt(this,qr).commentData;return g?zt(this,zy)._commentManager.makeCommentColor(g,et):null}focusCommentButton(){setTimeout(()=>{var g;(g=zt(this,Pr))==null||g.focus()},0)}getData(){const{richText:g,color:et,opacity:ot,creationDate:ct,modificationDate:ut}=zt(this,qr).commentData;return{contentsObj:{str:this.comment},richText:g,color:et,opacity:ot,creationDate:ct,modificationDate:ut}}get elementBeforePopup(){return zt(this,Pr)}get comment(){return zt(this,ku)||fn(this,ku,zt(this,qr).commentText),zt(this,ku)}set comment(g){g!==this.comment&&(zt(this,qr).commentText=fn(this,ku,g))}get parentBoundingClientRect(){return zt(this,qr).layer.getBoundingClientRect()}setCommentButtonStates({selected:g,hasPopup:et}){zt(this,Pr)&&(zt(this,Pr).classList.toggle("selected",g),zt(this,Pr).ariaExpanded=et)}setSelectedCommentButton(g){zt(this,Pr).classList.toggle("selected",g)}get commentPopupPosition(){if(zt(this,Su))return zt(this,Su);const{x:g,y:et,height:ot}=zt(this,Pr).getBoundingClientRect(),{x:ct,y:ut,width:dt,height:ft}=zt(this,qr).layer.getBoundingClientRect();return[(g-ct)/dt,(et+ot-ut)/ft]}set commentPopupPosition(g){fn(this,Su,g)}hasDefaultPopupPosition(){return zt(this,Su)===null}get commentButtonPosition(){return zt(this,_l)}get commentButtonWidth(){return zt(this,Pr).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(g){const[et,ot]=zt(this,Su)||this.commentButtonPosition.map(kt=>kt/100),ct=this.parentBoundingClientRect,{x:ut,y:dt,width:ft,height:St}=ct;zt(this,xs).showDialog(null,this,ut+et*ft,dt+ot*St,{...g,parentDimensions:ct})}render(){var ot,ct;if(zt(this,bs))return;const g=fn(this,bs,document.createElement("div"));if(g.className="popup",zt(this,Vy)){const ut=g.style.outlineColor=Util.makeHexColor(...zt(this,Vy));g.style.backgroundColor=`color-mix(in srgb, ${ut} 30%, white)`}const et=document.createElement("span");if(et.className="header",(ot=zt(this,Uy))!=null&&ot.str){const ut=document.createElement("span");ut.className="title",et.append(ut),{dir:ut.dir,str:ut.textContent}=zt(this,Uy)}if(g.append(et),zt(this,Eu)){const ut=document.createElement("time");ut.className="popupDate",ut.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),ut.setAttribute("data-l10n-args",JSON.stringify({dateObj:zt(this,Eu).valueOf()})),ut.dateTime=zt(this,Eu).toISOString(),et.append(ut)}renderRichText({html:zt(this,Wy,V1)||zt(this,Ro).str,dir:(ct=zt(this,Ro))==null?void 0:ct.dir,className:"popupContent"},g),zt(this,br).append(g)}updateEdited({rect:g,popup:et,deleted:ot}){var ct;if(zt(this,xs)){ot?(this.remove(),fn(this,ku,null)):et&&(et.deleted?this.remove():(bn(this,Mx,Nw).call(this),fn(this,ku,et.text))),g&&(fn(this,_l,null),bn(this,Rx,Pw).call(this),bn(this,Px,Mw).call(this));return}if(ot||et!=null&&et.deleted){this.remove();return}bn(this,Gy,B1).call(this),zt(this,Wp)||fn(this,Wp,{contentsObj:zt(this,Ro),richText:zt(this,Rl)}),g&&fn(this,Cl,null),et&&et.text&&(fn(this,Rl,bn(this,iS,nT).call(this,et.text)),fn(this,Eu,PDFDateString.toDateObject(et.date)),fn(this,Ro,null)),(ct=zt(this,bs))==null||ct.remove(),fn(this,bs,null)}resetEdited(){var g;zt(this,Wp)&&({contentsObj:kr(this,Ro)._,richText:kr(this,Rl)._}=zt(this,Wp),fn(this,Wp,null),(g=zt(this,bs))==null||g.remove(),fn(this,bs,null),fn(this,Cl,null))}remove(){var g,et,ot;if((g=zt(this,Tl))==null||g.abort(),fn(this,Tl,null),(et=zt(this,bs))==null||et.remove(),fn(this,bs,null),fn(this,wu,!1),fn(this,Po,!1),(ot=zt(this,Pr))==null||ot.remove(),fn(this,Pr,null),this.trigger)for(const ct of this.trigger)ct.classList.remove("popupTriggerArea")}forceHide(){fn(this,wu,this.isVisible),zt(this,wu)&&(zt(this,br).hidden=!0)}maybeShow(){zt(this,xs)||(bn(this,Gy,B1).call(this),zt(this,wu)&&(zt(this,bs)||bn(this,Ky,H1).call(this),fn(this,wu,!1),zt(this,br).hidden=!1))}get isVisible(){return zt(this,xs)?!1:zt(this,br).hidden===!1}}xs=new WeakMap,bu=new WeakMap,tS=new WeakMap,nS=new WeakMap,By=new WeakMap,Vy=new WeakMap,br=new WeakMap,Ro=new WeakMap,Eu=new WeakMap,Gp=new WeakMap,zy=new WeakMap,Hy=new WeakMap,Po=new WeakMap,bs=new WeakMap,Tl=new WeakMap,Cl=new WeakMap,Pr=new WeakMap,_l=new WeakMap,Su=new WeakMap,_x=new WeakMap,Rl=new WeakMap,Uy=new WeakMap,Wp=new WeakMap,wu=new WeakMap,qr=new WeakMap,ku=new WeakMap,Gy=new WeakSet,B1=function(){var et;if(zt(this,Tl))return;fn(this,Tl,new AbortController);const{signal:g}=zt(this,Tl);for(const ot of this.trigger)ot.addEventListener("click",zt(this,By),{signal:g}),ot.addEventListener("pointerenter",zt(this,nS),{signal:g}),ot.addEventListener("pointerleave",zt(this,tS),{signal:g}),ot.classList.add("popupTriggerArea");for(const ot of zt(this,Gp))(et=ot.container)==null||et.addEventListener("keydown",zt(this,bu),{signal:g})},Rx=new WeakSet,Pw=function(){const g=zt(this,Gp).find(et=>et.hasCommentButton);g&&fn(this,_l,g._normalizePoint(g.commentButtonPosition))},Px=new WeakSet,Mw=function(){if(zt(this,qr).extraPopupElement&&!zt(this,qr).editor)return;this.renderCommentButton();const[g,et]=zt(this,_l),{style:ot}=zt(this,Pr);ot.left=`calc(${g}%)`,ot.top=`calc(${et}% - var(--comment-button-dim))`},Mx=new WeakSet,Nw=function(){zt(this,qr).extraPopupElement||(this.renderCommentButton(),zt(this,Pr).style.backgroundColor=this.commentButtonColor||"")},Wy=new WeakSet,V1=function(){const g=zt(this,Rl),et=zt(this,Ro);return g!=null&&g.str&&(!(et!=null&&et.str)||et.str===g.str)&&zt(this,Rl).html||null},Nx=new WeakSet,jw=function(){var g,et,ot;return((ot=(et=(g=zt(this,Wy,V1))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.fontSize)||0},rS=new WeakSet,tT=function(){var g,et,ot;return((ot=(et=(g=zt(this,Wy,V1))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.color)||null},iS=new WeakSet,nT=function(g){const et=[],ot={str:g,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:et}]}},ct={style:{color:zt(this,rS,tT),fontSize:zt(this,Nx,jw)?`calc(${zt(this,Nx,jw)}px * var(--total-scale-factor))`:""}};for(const ut of g.split(`
`))et.push({name:"span",value:ut,attributes:ct});return ot},sS=new WeakSet,rT=function(g){g.altKey||g.shiftKey||g.ctrlKey||g.metaKey||(g.key==="Enter"||g.key==="Escape"&&zt(this,Po))&&bn(this,qy,z1).call(this)},oS=new WeakSet,iT=function(){if(zt(this,Cl)!==null)return;const{page:{view:g},viewport:{rawDims:{pageWidth:et,pageHeight:ot,pageX:ct,pageY:ut}}}=zt(this,zy);let dt=!!zt(this,Hy),ft=dt?zt(this,Hy):zt(this,_x);for(const Ft of zt(this,Gp))if(!ft||Util.intersect(Ft.data.rect,ft)!==null){ft=Ft.data.rect,dt=!0;break}const St=Util.normalizeRect([ft[0],g[3]-ft[1]+g[1],ft[2],g[3]-ft[3]+g[1]]),kt=5,Tt=dt?ft[2]-ft[0]+kt:0,Rt=St[0]+Tt,jt=St[1];fn(this,Cl,[100*(Rt-ct)/et,100*(jt-ut)/ot]);const{style:$t}=zt(this,br);$t.left=`${zt(this,Cl)[0]}%`,$t.top=`${zt(this,Cl)[1]}%`},qy=new WeakSet,z1=function(){if(zt(this,xs)){zt(this,xs).toggleCommentPopup(this,!1);return}fn(this,Po,!zt(this,Po)),zt(this,Po)?(bn(this,Ky,H1).call(this),zt(this,br).addEventListener("click",zt(this,By)),zt(this,br).addEventListener("keydown",zt(this,bu))):(bn(this,jx,Ow).call(this),zt(this,br).removeEventListener("click",zt(this,By)),zt(this,br).removeEventListener("keydown",zt(this,bu)))},Ky=new WeakSet,H1=function(){zt(this,bs)||this.render(),this.isVisible?zt(this,Po)&&zt(this,br).classList.add("focused"):(bn(this,oS,iT).call(this),zt(this,br).hidden=!1,zt(this,br).style.zIndex=parseInt(zt(this,br).style.zIndex)+1e3)},jx=new WeakSet,Ow=function(){zt(this,br).classList.remove("focused"),!(zt(this,Po)||!this.isVisible)&&(zt(this,br).hidden=!0,zt(this,br).style.zIndex=parseInt(zt(this,br).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.textContent=g.data.textContent,this.textPosition=g.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const g=document.createElement("div");g.classList.add("annotationTextContent"),g.setAttribute("role","comment");for(const et of this.textContent){const ot=document.createElement("span");ot.textContent=et,g.append(ot)}this.container.append(g)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ox;class LineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});cn(this,Ox,null)}render(){this.container.classList.add("lineAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=fn(this,Ox,this.svgFactory.createElement("svg:line"));return dt.setAttribute("x1",et.rect[2]-et.lineCoordinates[0]),dt.setAttribute("y1",et.rect[3]-et.lineCoordinates[1]),dt.setAttribute("x2",et.rect[2]-et.lineCoordinates[2]),dt.setAttribute("y2",et.rect[3]-et.lineCoordinates[3]),dt.setAttribute("stroke-width",et.borderStyle.width||1),dt.setAttribute("stroke","transparent"),dt.setAttribute("fill","transparent"),ut.append(dt),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return zt(this,Ox)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ox=new WeakMap;var Dx;class SquareAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});cn(this,Dx,null)}render(){this.container.classList.add("squareAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=et.borderStyle.width,ft=fn(this,Dx,this.svgFactory.createElement("svg:rect"));return ft.setAttribute("x",dt/2),ft.setAttribute("y",dt/2),ft.setAttribute("width",ot-dt),ft.setAttribute("height",ct-dt),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ut.append(ft),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return zt(this,Dx)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dx=new WeakMap;var Ix;class CircleAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});cn(this,Ix,null)}render(){this.container.classList.add("circleAnnotation");const{data:et,width:ot,height:ct}=this,ut=this.svgFactory.create(ot,ct,!0),dt=et.borderStyle.width,ft=fn(this,Ix,this.svgFactory.createElement("svg:ellipse"));return ft.setAttribute("cx",ot/2),ft.setAttribute("cy",ct/2),ft.setAttribute("rx",ot/2-dt/2),ft.setAttribute("ry",ct/2-dt/2),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ut.append(ft),this.container.append(ut),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return zt(this,Ix)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ix=new WeakMap;var Lx;class PolylineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});cn(this,Lx,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,vertices:ot,borderStyle:ct,popupRef:ut},width:dt,height:ft}=this;if(!ot)return this.container;const St=this.svgFactory.create(dt,ft,!0);let kt=[];for(let Rt=0,jt=ot.length;Rt<jt;Rt+=2){const $t=ot[Rt]-et[0],Ft=et[3]-ot[Rt+1];kt.push(`${$t},${Ft}`)}kt=kt.join(" ");const Tt=fn(this,Lx,this.svgFactory.createElement(this.svgElementName));return Tt.setAttribute("points",kt),Tt.setAttribute("stroke-width",ct.width||1),Tt.setAttribute("stroke","transparent"),Tt.setAttribute("fill","transparent"),St.append(Tt),this.container.append(St),!ut&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return zt(this,Lx)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lx=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(g){super(g),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var $x,qp,Fx,Dw;class InkAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});cn(this,Fx);cn(this,$x,null);cn(this,qp,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,rotation:ot,inkLists:ct,borderStyle:ut,popupRef:dt}}=this,{transform:ft,width:St,height:kt}=bn(this,Fx,Dw).call(this,ot,et),Tt=this.svgFactory.create(St,kt,!0),Rt=fn(this,$x,this.svgFactory.createElement("svg:g"));Tt.append(Rt),Rt.setAttribute("stroke-width",ut.width||1),Rt.setAttribute("stroke-linecap","round"),Rt.setAttribute("stroke-linejoin","round"),Rt.setAttribute("stroke-miterlimit",10),Rt.setAttribute("stroke","transparent"),Rt.setAttribute("fill","transparent"),Rt.setAttribute("transform",ft);for(let jt=0,$t=ct.length;jt<$t;jt++){const Ft=this.svgFactory.createElement(this.svgElementName);zt(this,qp).push(Ft),Ft.setAttribute("points",ct[jt].join(",")),Rt.append(Ft)}return!dt&&this.hasPopupData&&this._createPopup(),this.container.append(Tt),this._editOnDoubleClick(),this.container}updateEdited(et){super.updateEdited(et);const{thickness:ot,points:ct,rect:ut}=et,dt=zt(this,$x);if(ot>=0&&dt.setAttribute("stroke-width",ot||1),ct)for(let ft=0,St=zt(this,qp).length;ft<St;ft++)zt(this,qp)[ft].setAttribute("points",ct[ft].join(","));if(ut){const{transform:ft,width:St,height:kt}=bn(this,Fx,Dw).call(this,this.data.rotation,ut);dt.parentElement.setAttribute("viewBox",`0 0 ${St} ${kt}`),dt.setAttribute("transform",ft)}}getElementsToTriggerPopup(){return zt(this,qp)}addHighlightArea(){this.container.classList.add("highlightArea")}}$x=new WeakMap,qp=new WeakMap,Fx=new WeakSet,Dw=function(et,ot){switch(et){case 90:return{transform:`rotate(90) translate(${-ot[0]},${ot[1]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};case 180:return{transform:`rotate(180) translate(${-ot[2]},${ot[1]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]};case 270:return{transform:`rotate(270) translate(${-ot[2]},${ot[3]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};default:return{transform:`translate(${-ot[0]},${ot[3]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),g){const ot=document.createElement("mark");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),g){const ot=document.createElement("s");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Bx,Vx,Iw;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(et){var ct;super(et,{isRenderable:!0});cn(this,Vx);cn(this,Bx,null);const{file:ot}=this.data;this.filename=ot.filename,this.content=ot.content,(ct=this.linkService.eventBus)==null||ct.dispatch("fileattachmentannotation",{source:this,...ot})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:et,data:ot}=this;let ct;ot.hasAppearance||ot.fillAlpha===0?ct=document.createElement("div"):(ct=document.createElement("img"),ct.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(ot.name)?"paperclip":"pushpin"}.svg`,ot.fillAlpha&&ot.fillAlpha<1&&(ct.style=`filter: opacity(${Math.round(ot.fillAlpha*100)}%);`)),ct.addEventListener("dblclick",bn(this,Vx,Iw).bind(this)),fn(this,Bx,ct);const{isMac:ut}=util_FeatureTest.platform;return et.addEventListener("keydown",dt=>{dt.key==="Enter"&&(ut?dt.metaKey:dt.ctrlKey)&&bn(this,Vx,Iw).call(this)}),!ot.popupRef&&this.hasPopupData?this._createPopup():ct.classList.add("popupTriggerArea"),et.append(ct),et}getElementsToTriggerPopup(){return zt(this,Bx)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bx=new WeakMap,Vx=new WeakSet,Iw=function(){var et;(et=this.downloadManager)==null||et.openOrDownloadData(this.content,this.filename)};var Yy,Kp,Xy,Au,zx,Yp,Hx,Lw,Ux,$w,Gx;let AnnotationLayer$1=(Gx=class{constructor({div:g,accessibilityManager:et,annotationCanvasMap:ot,annotationEditorUIManager:ct,page:ut,viewport:dt,structTreeLayer:ft,commentManager:St,linkService:kt,annotationStorage:Tt}){cn(this,Hx);cn(this,Ux);cn(this,Yy,null);cn(this,Kp,null);cn(this,Xy,null);cn(this,Au,new Map);cn(this,zx,null);cn(this,Yp,null);this.div=g,fn(this,Yy,et),fn(this,Kp,ot),fn(this,zx,ft||null),fn(this,Yp,kt||null),fn(this,Xy,Tt||new AnnotationStorage),this.page=ut,this.viewport=dt,this.zIndex=0,this._annotationEditorUIManager=ct,this._commentManager=St||null}hasEditableAnnotations(){return zt(this,Au).size>0}async render(g){var dt,ft,St;const{annotations:et}=g,ot=this.div;setLayerDimensions(ot,this.viewport);const ct=new Map,ut={data:null,layer:ot,linkService:zt(this,Yp),downloadManager:g.downloadManager,imageResourcesPath:g.imageResourcesPath||"",renderForms:g.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:zt(this,Xy),enableComment:g.enableComment===!0,enableScripting:g.enableScripting===!0,hasJSActions:g.hasJSActions,fieldObjects:g.fieldObjects,parent:this,elements:null};for(const kt of et){if(kt.noHTML)continue;const Tt=kt.annotationType===AnnotationType.POPUP;if(Tt){const $t=ct.get(kt.id);if(!$t)continue;ut.elements=$t}else if(kt.rect[2]===kt.rect[0]||kt.rect[3]===kt.rect[1])continue;ut.data=kt;const Rt=AnnotationElementFactory.create(ut);if(!Rt.isRenderable)continue;if(!Tt&&kt.popupRef){const $t=ct.get(kt.popupRef);$t?$t.push(Rt):ct.set(kt.popupRef,[Rt])}const jt=Rt.render();kt.hidden&&(jt.style.visibility="hidden"),await bn(this,Hx,Lw).call(this,jt,kt.id,ut.elements),(ft=(dt=Rt.extraPopupElement)==null?void 0:dt.popup)==null||ft.renderCommentButton(),Rt._isEditable&&(zt(this,Au).set(Rt.data.id,Rt),(St=this._annotationEditorUIManager)==null||St.renderAnnotationElement(Rt))}bn(this,Ux,$w).call(this)}async addLinkAnnotations(g){const et={data:null,layer:this.div,linkService:zt(this,Yp),svgFactory:new DOMSVGFactory,parent:this};for(const ot of g){ot.borderStyle||(ot.borderStyle=Gx._defaultBorderStyle),et.data=ot;const ct=AnnotationElementFactory.create(et);if(!ct.isRenderable)continue;const ut=ct.render();await bn(this,Hx,Lw).call(this,ut,ot.id,null)}}update({viewport:g}){const et=this.div;this.viewport=g,setLayerDimensions(et,{rotation:g.rotation}),bn(this,Ux,$w).call(this),et.hidden=!1}getEditableAnnotations(){return Array.from(zt(this,Au).values())}getEditableAnnotation(g){return zt(this,Au).get(g)}addFakeAnnotation(g){var ft;const{div:et}=this,{id:ot,rotation:ct}=g,ut=new EditorAnnotationElement({data:{id:ot,rect:g.getPDFRect(),rotation:ct},editor:g,layer:et,parent:this,enableComment:!!this._commentManager,linkService:zt(this,Yp),annotationStorage:zt(this,Xy)}),dt=ut.render();return et.append(dt),(ft=zt(this,Yy))==null||ft.moveElementInDOM(et,dt,dt,!1),ut.createOrUpdatePopup(),ut}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Yy=new WeakMap,Kp=new WeakMap,Xy=new WeakMap,Au=new WeakMap,zx=new WeakMap,Yp=new WeakMap,Hx=new WeakSet,Lw=async function(g,et,ot){var ft,St;const ct=g.firstChild||g,ut=ct.id=`${AnnotationPrefix}${et}`,dt=await((ft=zt(this,zx))==null?void 0:ft.getAriaAttributes(ut));if(dt)for(const[kt,Tt]of dt)ct.setAttribute(kt,Tt);ot?ot.at(-1).container.after(g):(this.div.append(g),(St=zt(this,Yy))==null||St.moveElementInDOM(this.div,g,ct,!1))},Ux=new WeakSet,$w=function(){var et;if(!zt(this,Kp))return;const g=this.div;for(const[ot,ct]of zt(this,Kp)){const ut=g.querySelector(`[data-annotation-id="${ot}"]`);if(!ut)continue;ct.className="annotationContent";const{firstChild:dt}=ut;dt?dt.nodeName==="CANVAS"?dt.replaceWith(ct):dt.classList.contains("annotationContent")?dt.after(ct):dt.before(ct):ut.append(ct);const ft=zt(this,Au).get(ot);ft&&(ft._hasNoCanvas?((et=this._annotationEditorUIManager)==null||et.setMissingCanvas(ot,ut.id,ct),ft._hasNoCanvas=!1):ft.canvas=ct)}zt(this,Kp).clear()},Gx);const EOL_PATTERN=/\r\n?|\n/g;var Es,Wx,Xp,Ss,aS,sT,lS,oT,cS,aT,Jy,U1,Zy,G1,Qy,W1,uS,lT,qx,Fw,hS,cT;const ur=class ur extends AnnotationEditor{constructor(et){super({...et,name:"freeTextEditor"});cn(this,aS);cn(this,lS);cn(this,cS);cn(this,Jy);cn(this,Qy);cn(this,uS);cn(this,hS);cn(this,Es,"");cn(this,Wx,`${this.id}-editor`);cn(this,Xp,null);cn(this,Ss,void 0);jn(this,"_colorPicker",null);this.color=et.color||ur._defaultColor||AnnotationEditor._defaultLineColor,fn(this,Ss,et.fontSize||ur._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const et=ur.prototype,ot=dt=>dt.isEmpty(),ct=AnnotationEditorUIManager.TRANSLATE_SMALL,ut=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],et.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],et.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],et._translateEmpty,{args:[-ct,0],checker:ot}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],et._translateEmpty,{args:[-ut,0],checker:ot}],[["ArrowRight","mac+ArrowRight"],et._translateEmpty,{args:[ct,0],checker:ot}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],et._translateEmpty,{args:[ut,0],checker:ot}],[["ArrowUp","mac+ArrowUp"],et._translateEmpty,{args:[0,-ct],checker:ot}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],et._translateEmpty,{args:[0,-ut],checker:ot}],[["ArrowDown","mac+ArrowDown"],et._translateEmpty,{args:[0,ct],checker:ot}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],et._translateEmpty,{args:[0,ut],checker:ot}]]))}static initialize(et,ot){AnnotationEditor.initialize(et,ot);const ct=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ct.getPropertyValue("--freetext-padding"))}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:ur._defaultFontSize=ot;break;case AnnotationEditorParamsType.FREETEXT_COLOR:ur._defaultColor=ot;break}}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:bn(this,aS,sT).call(this,ot);break;case AnnotationEditorParamsType.FREETEXT_COLOR:bn(this,lS,oT).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,ur._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,ur._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,zt(this,Ss)],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}onUpdatedColor(){var et;this.editorDiv.style.color=this.color,(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_translateEmpty(et,ot){this._uiManager.translateSelectedEditors(et,ot,!0)}getInitialTranslation(){const et=this.parentScale;return[-ur._internalPadding*et,-(ur._internalPadding+zt(this,Ss))*et]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),fn(this,Xp,new AbortController);const et=this._uiManager.combinedSignal(zt(this,Xp));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:et}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:et}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:et}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:et}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:et}),!0}disableEditMode(){var et;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",zt(this,Wx)),this._isDraggable=!0,(et=zt(this,Xp))==null||et.abort(),fn(this,Xp,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(et){this._focusEventsAllowed&&(super.focusin(et),et.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(et){var ot;this.width||(this.enableEditMode(),et&&this.editorDiv.focus(),(ot=this._initialOptions)!=null&&ot.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const et=zt(this,Es),ot=fn(this,Es,bn(this,cS,aT).call(this).trimEnd());if(et===ot)return;const ct=ut=>{if(fn(this,Es,ut),!ut){this.remove();return}bn(this,Qy,W1).call(this),this._uiManager.rebuild(this),bn(this,Jy,U1).call(this)};this.addCommands({cmd:()=>{ct(ot)},undo:()=>{ct(et)},mustExec:!1}),bn(this,Jy,U1).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(et){et.target===this.div&&et.key==="Enter"&&(this.enterInEditMode(),et.preventDefault())}editorDivKeydown(et){ur._keyboardManager.exec(this,et)}editorDivFocus(et){this.isEditing=!0}editorDivBlur(et){this.isEditing=!1}editorDivInput(et){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let et,ot;(this._isCopy||this.annotationElementId)&&(et=this.x,ot=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",zt(this,Wx)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:ct}=this.editorDiv;if(ct.fontSize=`calc(${zt(this,Ss)}px * var(--total-scale-factor))`,ct.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[ut,dt]=this.parentDimensions;if(this.annotationElementId){const{position:ft}=this._initialData;let[St,kt]=this.getInitialTranslation();[St,kt]=this.pageTranslationToScreen(St,kt);const[Tt,Rt]=this.pageDimensions,[jt,$t]=this.pageTranslation;let Ft,Ht;switch(this.rotation){case 0:Ft=et+(ft[0]-jt)/Tt,Ht=ot+this.height-(ft[1]-$t)/Rt;break;case 90:Ft=et+(ft[0]-jt)/Tt,Ht=ot-(ft[1]-$t)/Rt,[St,kt]=[kt,-St];break;case 180:Ft=et-this.width+(ft[0]-jt)/Tt,Ht=ot-(ft[1]-$t)/Rt,[St,kt]=[-St,-kt];break;case 270:Ft=et+(ft[0]-jt-this.height*Rt)/Tt,Ht=ot+(ft[1]-$t-this.width*Tt)/Rt,[St,kt]=[-kt,St];break}this.setAt(Ft*ut,Ht*dt,St,kt)}else this._moveAfterPaste(et,ot);bn(this,Qy,W1).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(et){var Ft,Ht,Kt;const ot=et.clipboardData||window.clipboardData,{types:ct}=ot;if(ct.length===1&&ct[0]==="text/plain")return;et.preventDefault();const ut=bn(Ft=ur,qx,Fw).call(Ft,ot.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!ut)return;const dt=window.getSelection();if(!dt.rangeCount)return;this.editorDiv.normalize(),dt.deleteFromDocument();const ft=dt.getRangeAt(0);if(!ut.includes(`
`)){ft.insertNode(document.createTextNode(ut)),this.editorDiv.normalize(),dt.collapseToStart();return}const{startContainer:St,startOffset:kt}=ft,Tt=[],Rt=[];if(St.nodeType===Node.TEXT_NODE){const Bt=St.parentElement;if(Rt.push(St.nodeValue.slice(kt).replaceAll(EOL_PATTERN,"")),Bt!==this.editorDiv){let Ut=Tt;for(const Yt of this.editorDiv.childNodes){if(Yt===Bt){Ut=Rt;continue}Ut.push(bn(Ht=ur,Zy,G1).call(Ht,Yt))}}Tt.push(St.nodeValue.slice(0,kt).replaceAll(EOL_PATTERN,""))}else if(St===this.editorDiv){let Bt=Tt,Ut=0;for(const Yt of this.editorDiv.childNodes)Ut++===kt&&(Bt=Rt),Bt.push(bn(Kt=ur,Zy,G1).call(Kt,Yt))}fn(this,Es,`${Tt.join(`
`)}${ut}${Rt.join(`
`)}`),bn(this,Qy,W1).call(this);const jt=new Range;let $t=Math.sumPrecise(Tt.map(Bt=>Bt.length));for(const{firstChild:Bt}of this.editorDiv.childNodes)if(Bt.nodeType===Node.TEXT_NODE){const Ut=Bt.nodeValue.length;if($t<=Ut){jt.setStart(Bt,$t),jt.setEnd(Bt,$t);break}$t-=Ut}dt.removeAllRanges(),dt.addRange(jt)}get contentDiv(){return this.editorDiv}getPDFRect(){const et=ur._internalPadding*this.parentScale;return this.getRect(et,et)}static async deserialize(et,ot,ct){var ft;let ut=null;if(et instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:St,fontColor:kt},rect:Tt,rotation:Rt,id:jt,popupRef:$t,richText:Ft,contentsObj:Ht,creationDate:Kt,modificationDate:Bt},textContent:Ut,textPosition:Yt,parent:{page:{pageNumber:Jt}}}=et;if(!Ut||Ut.length===0)return null;ut=et={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(kt),fontSize:St,value:Ut.join(`
`),position:Yt,pageIndex:Jt-1,rect:Tt.slice(0),rotation:Rt,annotationElementId:jt,id:jt,deleted:!1,popupRef:$t,comment:(Ht==null?void 0:Ht.str)||null,richText:Ft,creationDate:Kt,modificationDate:Bt}}const dt=await super.deserialize(et,ot,ct);return fn(dt,Ss,et.fontSize),dt.color=Util.makeHexColor(...et.color),fn(dt,Es,bn(ft=ur,qx,Fw).call(ft,et.value)),dt._initialData=ut,et.comment&&dt.setCommentData(et),dt}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),ct=Object.assign(super.serialize(et),{color:ot,fontSize:zt(this,Ss),value:bn(this,uS,lT).call(this)});return this.addComment(ct),et?(ct.isCopy=!0,ct):this.annotationElementId&&!bn(this,hS,cT).call(this,ct)?null:(ct.id=this.annotationElementId,ct)}renderAnnotationElement(et){const ot=super.renderAnnotationElement(et);if(!ot)return null;const{style:ct}=ot;ct.fontSize=`calc(${zt(this,Ss)}px * var(--total-scale-factor))`,ct.color=this.color,ot.replaceChildren();for(const ut of zt(this,Es).split(`
`)){const dt=document.createElement("div");dt.append(ut?document.createTextNode(ut):document.createElement("br")),ot.append(dt)}return et.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:zt(this,Es)}}),ot}resetAnnotationElement(et){super.resetAnnotationElement(et),et.resetEdited()}};Es=new WeakMap,Wx=new WeakMap,Xp=new WeakMap,Ss=new WeakMap,aS=new WeakSet,sT=function(et){const ot=ut=>{this.editorDiv.style.fontSize=`calc(${ut}px * var(--total-scale-factor))`,this.translate(0,-(ut-zt(this,Ss))*this.parentScale),fn(this,Ss,ut),bn(this,Jy,U1).call(this)},ct=zt(this,Ss);this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},lS=new WeakSet,oT=function(et){const ot=ut=>{this.color=ut,this.onUpdatedColor()},ct=this.color;this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},cS=new WeakSet,aT=function(){var ct;const et=[];this.editorDiv.normalize();let ot=null;for(const ut of this.editorDiv.childNodes)(ot==null?void 0:ot.nodeType)===Node.TEXT_NODE&&ut.nodeName==="BR"||(et.push(bn(ct=ur,Zy,G1).call(ct,ut)),ot=ut);return et.join(`
`)},Jy=new WeakSet,U1=function(){const[et,ot]=this.parentDimensions;let ct;if(this.isAttachedToDOM)ct=this.div.getBoundingClientRect();else{const{currentLayer:ut,div:dt}=this,ft=dt.style.display,St=dt.classList.contains("hidden");dt.classList.remove("hidden"),dt.style.display="hidden",ut.div.append(this.div),ct=dt.getBoundingClientRect(),dt.remove(),dt.style.display=ft,dt.classList.toggle("hidden",St)}this.rotation%180===this.parentRotation%180?(this.width=ct.width/et,this.height=ct.height/ot):(this.width=ct.height/et,this.height=ct.width/ot),this.fixAndSetPosition()},Zy=new WeakSet,G1=function(et){return(et.nodeType===Node.TEXT_NODE?et.nodeValue:et.innerText).replaceAll(EOL_PATTERN,"")},Qy=new WeakSet,W1=function(){if(this.editorDiv.replaceChildren(),!!zt(this,Es))for(const et of zt(this,Es).split(`
`)){const ot=document.createElement("div");ot.append(et?document.createTextNode(et):document.createElement("br")),this.editorDiv.append(ot)}},uS=new WeakSet,lT=function(){return zt(this,Es).replaceAll(""," ")},qx=new WeakSet,Fw=function(et){return et.replaceAll(" ","")},hS=new WeakSet,cT=function(et){const{value:ot,fontSize:ct,color:ut,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||et.value!==ot||et.fontSize!==ct||et.color.some((ft,St)=>ft!==ut[St])||et.pageIndex!==dt},cn(ur,Zy),cn(ur,qx),jn(ur,"_freeTextDefaultContent",""),jn(ur,"_internalPadding",0),jn(ur,"_defaultColor",null),jn(ur,"_defaultFontSize",10),jn(ur,"_type","freetext"),jn(ur,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=ur;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(g,et){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(g,et,ot,ct,ut,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft]*ct,dt[ft+1]=ot+g[ft+1]*ut;return dt}static _rescaleAndSwap(g,et,ot,ct,ut,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft+1]*ct,dt[ft+1]=ot+g[ft]*ut;return dt}static _translate(g,et,ot,ct){ct||(ct=new Float32Array(g.length));for(let ut=0,dt=g.length;ut<dt;ut+=2)ct[ut]=et+g[ut],ct[ut+1]=ot+g[ut+1];return ct}static svgRound(g){return Math.round(g*1e4)}static _normalizePoint(g,et,ot,ct,ut){switch(ut){case 90:return[1-et/ot,g/ct];case 180:return[1-g/ot,1-et/ct];case 270:return[et/ot,1-g/ct];default:return[g/ot,et/ct]}}static _normalizePagePoint(g,et,ot){switch(ot){case 90:return[1-et,g];case 180:return[1-g,1-et];case 270:return[et,1-g];default:return[g,et]}}static createBezierPoints(g,et,ot,ct,ut,dt){return[(g+5*ot)/6,(et+5*ct)/6,(5*ot+ut)/6,(5*ct+dt)/6,(ot+ut)/2,(ct+dt)/2]}}jn(Outline,"PRECISION",1e-4);var ws,Zs,e0,t0,Mo,Kn,Jp,Zp,Kx,Yx,n0,r0,Tu,Xx,dS,fS,Qp,W0,pS,uT,mS,hT,gS,dT,yS,fT,vS,pT,xS,mT;const Bo=class Bo{constructor({x:g,y:et},ot,ct,ut,dt,ft=0){cn(this,Qp);cn(this,pS);cn(this,mS);cn(this,gS);cn(this,yS);cn(this,vS);cn(this,xS);cn(this,ws,void 0);cn(this,Zs,[]);cn(this,e0,void 0);cn(this,t0,void 0);cn(this,Mo,[]);cn(this,Kn,new Float32Array(18));cn(this,Jp,void 0);cn(this,Zp,void 0);cn(this,Kx,void 0);cn(this,Yx,void 0);cn(this,n0,void 0);cn(this,r0,void 0);cn(this,Tu,[]);fn(this,ws,ot),fn(this,r0,ut*ct),fn(this,t0,dt),zt(this,Kn).set([NaN,NaN,NaN,NaN,g,et],6),fn(this,e0,ft),fn(this,Yx,zt(Bo,Xx)*ct),fn(this,Kx,zt(Bo,fS)*ct),fn(this,n0,ct),zt(this,Tu).push(g,et)}isEmpty(){return isNaN(zt(this,Kn)[8])}add({x:g,y:et}){var ln;fn(this,Jp,g),fn(this,Zp,et);const[ot,ct,ut,dt]=zt(this,ws);let[ft,St,kt,Tt]=zt(this,Kn).subarray(8,12);const Rt=g-kt,jt=et-Tt,$t=Math.hypot(Rt,jt);if($t<zt(this,Kx))return!1;const Ft=$t-zt(this,Yx),Ht=Ft/$t,Kt=Ht*Rt,Bt=Ht*jt;let Ut=ft,Yt=St;ft=kt,St=Tt,kt+=Kt,Tt+=Bt,(ln=zt(this,Tu))==null||ln.push(g,et);const Jt=-Bt/Ft,Zt=Kt/Ft,en=Jt*zt(this,r0),tn=Zt*zt(this,r0);return zt(this,Kn).set(zt(this,Kn).subarray(2,8),0),zt(this,Kn).set([kt+en,Tt+tn],4),zt(this,Kn).set(zt(this,Kn).subarray(14,18),12),zt(this,Kn).set([kt-en,Tt-tn],16),isNaN(zt(this,Kn)[6])?(zt(this,Mo).length===0&&(zt(this,Kn).set([ft+en,St+tn],2),zt(this,Mo).push(NaN,NaN,NaN,NaN,(ft+en-ot)/ut,(St+tn-ct)/dt),zt(this,Kn).set([ft-en,St-tn],14),zt(this,Zs).push(NaN,NaN,NaN,NaN,(ft-en-ot)/ut,(St-tn-ct)/dt)),zt(this,Kn).set([Ut,Yt,ft,St,kt,Tt],6),!this.isEmpty()):(zt(this,Kn).set([Ut,Yt,ft,St,kt,Tt],6),Math.abs(Math.atan2(Yt-St,Ut-ft)-Math.atan2(Bt,Kt))<Math.PI/2?([ft,St,kt,Tt]=zt(this,Kn).subarray(2,6),zt(this,Mo).push(NaN,NaN,NaN,NaN,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),[ft,St,Ut,Yt]=zt(this,Kn).subarray(14,18),zt(this,Zs).push(NaN,NaN,NaN,NaN,((Ut+ft)/2-ot)/ut,((Yt+St)/2-ct)/dt),!0):([Ut,Yt,ft,St,kt,Tt]=zt(this,Kn).subarray(0,6),zt(this,Mo).push(((Ut+5*ft)/6-ot)/ut,((Yt+5*St)/6-ct)/dt,((5*ft+kt)/6-ot)/ut,((5*St+Tt)/6-ct)/dt,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),[kt,Tt,ft,St,Ut,Yt]=zt(this,Kn).subarray(12,18),zt(this,Zs).push(((Ut+5*ft)/6-ot)/ut,((Yt+5*St)/6-ct)/dt,((5*ft+kt)/6-ot)/ut,((5*St+Tt)/6-ct)/dt,((ft+kt)/2-ot)/ut,((St+Tt)/2-ct)/dt),!0))}toSVGPath(){if(this.isEmpty())return"";const g=zt(this,Mo),et=zt(this,Zs);if(isNaN(zt(this,Kn)[6])&&!this.isEmpty())return bn(this,pS,uT).call(this);const ot=[];ot.push(`M${g[4]} ${g[5]}`);for(let ct=6;ct<g.length;ct+=6)isNaN(g[ct])?ot.push(`L${g[ct+4]} ${g[ct+5]}`):ot.push(`C${g[ct]} ${g[ct+1]} ${g[ct+2]} ${g[ct+3]} ${g[ct+4]} ${g[ct+5]}`);bn(this,gS,dT).call(this,ot);for(let ct=et.length-6;ct>=6;ct-=6)isNaN(et[ct])?ot.push(`L${et[ct+4]} ${et[ct+5]}`):ot.push(`C${et[ct]} ${et[ct+1]} ${et[ct+2]} ${et[ct+3]} ${et[ct+4]} ${et[ct+5]}`);return bn(this,mS,hT).call(this,ot),ot.join(" ")}newFreeDrawOutline(g,et,ot,ct,ut,dt){return new FreeDrawOutline(g,et,ot,ct,ut,dt)}getOutlines(){var Rt;const g=zt(this,Mo),et=zt(this,Zs),ot=zt(this,Kn),[ct,ut,dt,ft]=zt(this,ws),St=new Float32Array((((Rt=zt(this,Tu))==null?void 0:Rt.length)??0)+2);for(let jt=0,$t=St.length-2;jt<$t;jt+=2)St[jt]=(zt(this,Tu)[jt]-ct)/dt,St[jt+1]=(zt(this,Tu)[jt+1]-ut)/ft;if(St[St.length-2]=(zt(this,Jp)-ct)/dt,St[St.length-1]=(zt(this,Zp)-ut)/ft,isNaN(ot[6])&&!this.isEmpty())return bn(this,yS,fT).call(this,St);const kt=new Float32Array(zt(this,Mo).length+24+zt(this,Zs).length);let Tt=g.length;for(let jt=0;jt<Tt;jt+=2){if(isNaN(g[jt])){kt[jt]=kt[jt+1]=NaN;continue}kt[jt]=g[jt],kt[jt+1]=g[jt+1]}Tt=bn(this,xS,mT).call(this,kt,Tt);for(let jt=et.length-6;jt>=6;jt-=6)for(let $t=0;$t<6;$t+=2){if(isNaN(et[jt+$t])){kt[Tt]=kt[Tt+1]=NaN,Tt+=2;continue}kt[Tt]=et[jt+$t],kt[Tt+1]=et[jt+$t+1],Tt+=2}return bn(this,vS,pT).call(this,kt,Tt),this.newFreeDrawOutline(kt,St,zt(this,ws),zt(this,n0),zt(this,e0),zt(this,t0))}};ws=new WeakMap,Zs=new WeakMap,e0=new WeakMap,t0=new WeakMap,Mo=new WeakMap,Kn=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,Kx=new WeakMap,Yx=new WeakMap,n0=new WeakMap,r0=new WeakMap,Tu=new WeakMap,Xx=new WeakMap,dS=new WeakMap,fS=new WeakMap,Qp=new WeakSet,W0=function(){const g=zt(this,Kn).subarray(4,6),et=zt(this,Kn).subarray(16,18),[ot,ct,ut,dt]=zt(this,ws);return[(zt(this,Jp)+(g[0]-et[0])/2-ot)/ut,(zt(this,Zp)+(g[1]-et[1])/2-ct)/dt,(zt(this,Jp)+(et[0]-g[0])/2-ot)/ut,(zt(this,Zp)+(et[1]-g[1])/2-ct)/dt]},pS=new WeakSet,uT=function(){const[g,et,ot,ct]=zt(this,ws),[ut,dt,ft,St]=bn(this,Qp,W0).call(this);return`M${(zt(this,Kn)[2]-g)/ot} ${(zt(this,Kn)[3]-et)/ct} L${(zt(this,Kn)[4]-g)/ot} ${(zt(this,Kn)[5]-et)/ct} L${ut} ${dt} L${ft} ${St} L${(zt(this,Kn)[16]-g)/ot} ${(zt(this,Kn)[17]-et)/ct} L${(zt(this,Kn)[14]-g)/ot} ${(zt(this,Kn)[15]-et)/ct} Z`},mS=new WeakSet,hT=function(g){const et=zt(this,Zs);g.push(`L${et[4]} ${et[5]} Z`)},gS=new WeakSet,dT=function(g){const[et,ot,ct,ut]=zt(this,ws),dt=zt(this,Kn).subarray(4,6),ft=zt(this,Kn).subarray(16,18),[St,kt,Tt,Rt]=bn(this,Qp,W0).call(this);g.push(`L${(dt[0]-et)/ct} ${(dt[1]-ot)/ut} L${St} ${kt} L${Tt} ${Rt} L${(ft[0]-et)/ct} ${(ft[1]-ot)/ut}`)},yS=new WeakSet,fT=function(g){const et=zt(this,Kn),[ot,ct,ut,dt]=zt(this,ws),[ft,St,kt,Tt]=bn(this,Qp,W0).call(this),Rt=new Float32Array(36);return Rt.set([NaN,NaN,NaN,NaN,(et[2]-ot)/ut,(et[3]-ct)/dt,NaN,NaN,NaN,NaN,(et[4]-ot)/ut,(et[5]-ct)/dt,NaN,NaN,NaN,NaN,ft,St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,(et[16]-ot)/ut,(et[17]-ct)/dt,NaN,NaN,NaN,NaN,(et[14]-ot)/ut,(et[15]-ct)/dt],0),this.newFreeDrawOutline(Rt,g,zt(this,ws),zt(this,n0),zt(this,e0),zt(this,t0))},vS=new WeakSet,pT=function(g,et){const ot=zt(this,Zs);return g.set([NaN,NaN,NaN,NaN,ot[4],ot[5]],et),et+=6},xS=new WeakSet,mT=function(g,et){const ot=zt(this,Kn).subarray(4,6),ct=zt(this,Kn).subarray(16,18),[ut,dt,ft,St]=zt(this,ws),[kt,Tt,Rt,jt]=bn(this,Qp,W0).call(this);return g.set([NaN,NaN,NaN,NaN,(ot[0]-ut)/ft,(ot[1]-dt)/St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,Rt,jt,NaN,NaN,NaN,NaN,(ct[0]-ut)/ft,(ct[1]-dt)/St],et),et+=24},cn(Bo,Xx,8),cn(Bo,dS,2),cn(Bo,fS,zt(Bo,Xx)+zt(Bo,dS));let FreeDrawOutliner=Bo;var i0,em,Pl,Jx,ks,Zx,Sr,bS,gT;class FreeDrawOutline extends Outline{constructor(et,ot,ct,ut,dt,ft){super();cn(this,bS);cn(this,i0,void 0);cn(this,em,new Float32Array(4));cn(this,Pl,void 0);cn(this,Jx,void 0);cn(this,ks,void 0);cn(this,Zx,void 0);cn(this,Sr,void 0);fn(this,Sr,et),fn(this,ks,ot),fn(this,i0,ct),fn(this,Zx,ut),fn(this,Pl,dt),fn(this,Jx,ft),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],bn(this,bS,gT).call(this,ft);const[St,kt,Tt,Rt]=zt(this,em);for(let jt=0,$t=et.length;jt<$t;jt+=2)et[jt]=(et[jt]-St)/Tt,et[jt+1]=(et[jt+1]-kt)/Rt;for(let jt=0,$t=ot.length;jt<$t;jt+=2)ot[jt]=(ot[jt]-St)/Tt,ot[jt+1]=(ot[jt+1]-kt)/Rt}toSVGPath(){const et=[`M${zt(this,Sr)[4]} ${zt(this,Sr)[5]}`];for(let ot=6,ct=zt(this,Sr).length;ot<ct;ot+=6){if(isNaN(zt(this,Sr)[ot])){et.push(`L${zt(this,Sr)[ot+4]} ${zt(this,Sr)[ot+5]}`);continue}et.push(`C${zt(this,Sr)[ot]} ${zt(this,Sr)[ot+1]} ${zt(this,Sr)[ot+2]} ${zt(this,Sr)[ot+3]} ${zt(this,Sr)[ot+4]} ${zt(this,Sr)[ot+5]}`)}return et.push("Z"),et.join(" ")}serialize([et,ot,ct,ut],dt){const ft=ct-et,St=ut-ot;let kt,Tt;switch(dt){case 0:kt=Outline._rescale(zt(this,Sr),et,ut,ft,-St),Tt=Outline._rescale(zt(this,ks),et,ut,ft,-St);break;case 90:kt=Outline._rescaleAndSwap(zt(this,Sr),et,ot,ft,St),Tt=Outline._rescaleAndSwap(zt(this,ks),et,ot,ft,St);break;case 180:kt=Outline._rescale(zt(this,Sr),ct,ot,-ft,St),Tt=Outline._rescale(zt(this,ks),ct,ot,-ft,St);break;case 270:kt=Outline._rescaleAndSwap(zt(this,Sr),ct,ut,-ft,-St),Tt=Outline._rescaleAndSwap(zt(this,ks),ct,ut,-ft,-St);break}return{outline:Array.from(kt),points:[Array.from(Tt)]}}get box(){return zt(this,em)}newOutliner(et,ot,ct,ut,dt,ft=0){return new FreeDrawOutliner(et,ot,ct,ut,dt,ft)}getNewOutline(et,ot){const[ct,ut,dt,ft]=zt(this,em),[St,kt,Tt,Rt]=zt(this,i0),jt=dt*Tt,$t=ft*Rt,Ft=ct*Tt+St,Ht=ut*Rt+kt,Kt=this.newOutliner({x:zt(this,ks)[0]*jt+Ft,y:zt(this,ks)[1]*$t+Ht},zt(this,i0),zt(this,Zx),et,zt(this,Jx),ot??zt(this,Pl));for(let Bt=2;Bt<zt(this,ks).length;Bt+=2)Kt.add({x:zt(this,ks)[Bt]*jt+Ft,y:zt(this,ks)[Bt+1]*$t+Ht});return Kt.getOutlines()}}i0=new WeakMap,em=new WeakMap,Pl=new WeakMap,Jx=new WeakMap,ks=new WeakMap,Zx=new WeakMap,Sr=new WeakMap,bS=new WeakSet,gT=function(et){const ot=zt(this,Sr);let ct=ot[4],ut=ot[5];const dt=[ct,ut,ct,ut];let ft=ct,St=ut,kt=ct,Tt=ut;const Rt=et?Math.max:Math.min,jt=new Float32Array(4);for(let Ft=6,Ht=ot.length;Ft<Ht;Ft+=6){const Kt=ot[Ft+4],Bt=ot[Ft+5];isNaN(ot[Ft])?(Util.pointBoundingBox(Kt,Bt,dt),St>Bt?(ft=Kt,St=Bt):St===Bt&&(ft=Rt(ft,Kt)),Tt<Bt?(kt=Kt,Tt=Bt):Tt===Bt&&(kt=Rt(kt,Kt))):(jt[0]=jt[1]=1/0,jt[2]=jt[3]=-1/0,Util.bezierBoundingBox(ct,ut,...ot.slice(Ft,Ft+6),jt),Util.rectBoundingBox(jt[0],jt[1],jt[2],jt[3],dt),St>jt[1]?(ft=jt[0],St=jt[1]):St===jt[1]&&(ft=Rt(ft,jt[0])),Tt<jt[3]?(kt=jt[2],Tt=jt[3]):Tt===jt[3]&&(kt=Rt(kt,jt[2]))),ct=Kt,ut=Bt}const $t=zt(this,em);$t[0]=dt[0]-zt(this,Pl),$t[1]=dt[1]-zt(this,Pl),$t[2]=dt[2]-dt[0]+2*zt(this,Pl),$t[3]=dt[3]-dt[1]+2*zt(this,Pl),this.firstPoint=[ft,St],this.lastPoint=[kt,Tt]};var Qx,e1,t1,Cu,Qs,ES,yT,s0,q1,SS,vT,wS,xT,n1,Bw;class HighlightOutliner{constructor(g,et=0,ot=0,ct=!0){cn(this,ES);cn(this,s0);cn(this,SS);cn(this,wS);cn(this,n1);cn(this,Qx,void 0);cn(this,e1,void 0);cn(this,t1,void 0);cn(this,Cu,[]);cn(this,Qs,[]);const ut=[1/0,1/0,-1/0,-1/0],ft=10**-4;for(const{x:Kt,y:Bt,width:Ut,height:Yt}of g){const Jt=Math.floor((Kt-et)/ft)*ft,Zt=Math.ceil((Kt+Ut+et)/ft)*ft,en=Math.floor((Bt-et)/ft)*ft,tn=Math.ceil((Bt+Yt+et)/ft)*ft,nn=[Jt,en,tn,!0],ln=[Zt,en,tn,!1];zt(this,Cu).push(nn,ln),Util.rectBoundingBox(Jt,en,Zt,tn,ut)}const St=ut[2]-ut[0]+2*ot,kt=ut[3]-ut[1]+2*ot,Tt=ut[0]-ot,Rt=ut[1]-ot;let jt=ct?-1/0:1/0,$t=1/0;const Ft=zt(this,Cu).at(ct?-1:-2),Ht=[Ft[0],Ft[2]];for(const Kt of zt(this,Cu)){const[Bt,Ut,Yt,Jt]=Kt;!Jt&&ct?Ut<$t?($t=Ut,jt=Bt):Ut===$t&&(jt=Math.max(jt,Bt)):Jt&&!ct&&(Ut<$t?($t=Ut,jt=Bt):Ut===$t&&(jt=Math.min(jt,Bt))),Kt[0]=(Bt-Tt)/St,Kt[1]=(Ut-Rt)/kt,Kt[2]=(Yt-Rt)/kt}fn(this,Qx,new Float32Array([Tt,Rt,St,kt])),fn(this,e1,[jt,$t]),fn(this,t1,Ht)}getOutlines(){zt(this,Cu).sort((et,ot)=>et[0]-ot[0]||et[1]-ot[1]||et[2]-ot[2]);const g=[];for(const et of zt(this,Cu))et[3]?(g.push(...bn(this,n1,Bw).call(this,et)),bn(this,SS,vT).call(this,et)):(bn(this,wS,xT).call(this,et),g.push(...bn(this,n1,Bw).call(this,et)));return bn(this,ES,yT).call(this,g)}}Qx=new WeakMap,e1=new WeakMap,t1=new WeakMap,Cu=new WeakMap,Qs=new WeakMap,ES=new WeakSet,yT=function(g){const et=[],ot=new Set;for(const dt of g){const[ft,St,kt]=dt;et.push([ft,St,dt],[ft,kt,dt])}et.sort((dt,ft)=>dt[1]-ft[1]||dt[0]-ft[0]);for(let dt=0,ft=et.length;dt<ft;dt+=2){const St=et[dt][2],kt=et[dt+1][2];St.push(kt),kt.push(St),ot.add(St),ot.add(kt)}const ct=[];let ut;for(;ot.size>0;){const dt=ot.values().next().value;let[ft,St,kt,Tt,Rt]=dt;ot.delete(dt);let jt=ft,$t=St;for(ut=[ft,kt],ct.push(ut);;){let Ft;if(ot.has(Tt))Ft=Tt;else if(ot.has(Rt))Ft=Rt;else break;ot.delete(Ft),[ft,St,kt,Tt,Rt]=Ft,jt!==ft&&(ut.push(jt,$t,ft,$t===St?St:kt),jt=ft),$t=$t===St?kt:St}ut.push(jt,$t)}return new HighlightOutline(ct,zt(this,Qx),zt(this,e1),zt(this,t1))},s0=new WeakSet,q1=function(g){const et=zt(this,Qs);let ot=0,ct=et.length-1;for(;ot<=ct;){const ut=ot+ct>>1,dt=et[ut][0];if(dt===g)return ut;dt<g?ot=ut+1:ct=ut-1}return ct+1},SS=new WeakSet,vT=function([,g,et]){const ot=bn(this,s0,q1).call(this,g);zt(this,Qs).splice(ot,0,[g,et])},wS=new WeakSet,xT=function([,g,et]){const ot=bn(this,s0,q1).call(this,g);for(let ct=ot;ct<zt(this,Qs).length;ct++){const[ut,dt]=zt(this,Qs)[ct];if(ut!==g)break;if(ut===g&&dt===et){zt(this,Qs).splice(ct,1);return}}for(let ct=ot-1;ct>=0;ct--){const[ut,dt]=zt(this,Qs)[ct];if(ut!==g)break;if(ut===g&&dt===et){zt(this,Qs).splice(ct,1);return}}},n1=new WeakSet,Bw=function(g){const[et,ot,ct]=g,ut=[[et,ot,ct]],dt=bn(this,s0,q1).call(this,ct);for(let ft=0;ft<dt;ft++){const[St,kt]=zt(this,Qs)[ft];for(let Tt=0,Rt=ut.length;Tt<Rt;Tt++){const[,jt,$t]=ut[Tt];if(!(kt<=jt||$t<=St)){if(jt>=St){if($t>kt)ut[Tt][1]=kt;else{if(Rt===1)return[];ut.splice(Tt,1),Tt--,Rt--}continue}ut[Tt][2]=St,$t>kt&&ut.push([et,kt,$t])}}}return ut};var r1,o0;class HighlightOutline extends Outline{constructor(et,ot,ct,ut){super();cn(this,r1,void 0);cn(this,o0,void 0);fn(this,o0,et),fn(this,r1,ot),this.firstPoint=ct,this.lastPoint=ut}toSVGPath(){const et=[];for(const ot of zt(this,o0)){let[ct,ut]=ot;et.push(`M${ct} ${ut}`);for(let dt=2;dt<ot.length;dt+=2){const ft=ot[dt],St=ot[dt+1];ft===ct?(et.push(`V${St}`),ut=St):St===ut&&(et.push(`H${ft}`),ct=ft)}et.push("Z")}return et.join(" ")}serialize([et,ot,ct,ut],dt){const ft=[],St=ct-et,kt=ut-ot;for(const Tt of zt(this,o0)){const Rt=new Array(Tt.length);for(let jt=0;jt<Tt.length;jt+=2)Rt[jt]=et+Tt[jt]*St,Rt[jt+1]=ut-Tt[jt+1]*kt;ft.push(Rt)}return ft}get box(){return zt(this,r1)}get classNamesForOutlining(){return["highlightOutline"]}}r1=new WeakMap,o0=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(g,et,ot,ct,ut,dt){return new FreeHighlightOutline(g,et,ot,ct,ut,dt)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(g,et,ot,ct,ut,dt=0){return new FreeHighlightOutliner(g,et,ot,ct,ut,dt)}}var a0,i1,Ml,tm,s1,cs,o1,a1,im,As,Ts,Br,l0,c0,Kr,u0,Fs,l1,c1,Vw,h0,K1,kS,bT,AS,ET,TS,ST,u1,zw,Ol,Uu,_u,_m,CS,wT,d0,Y1,f0,X1,_S,kT,RS,TT,PS,CT,MS,_T,NS,RT;const Jn=class Jn extends AnnotationEditor{constructor(et){super({...et,name:"highlightEditor"});cn(this,c1);cn(this,h0);cn(this,kS);cn(this,AS);cn(this,TS);cn(this,u1);cn(this,Ol);cn(this,CS);cn(this,d0);cn(this,f0);cn(this,_S);cn(this,RS);cn(this,NS);cn(this,a0,null);cn(this,i1,0);cn(this,Ml,void 0);cn(this,tm,null);cn(this,s1,null);cn(this,cs,null);cn(this,o1,null);cn(this,a1,0);cn(this,im,null);cn(this,As,null);cn(this,Ts,null);cn(this,Br,!1);cn(this,l0,null);cn(this,c0,null);cn(this,Kr,null);cn(this,u0,"");cn(this,Fs,void 0);cn(this,l1,"");this.color=et.color||Jn._defaultColor,fn(this,Fs,et.thickness||Jn._defaultThickness),this.opacity=et.opacity||Jn._defaultOpacity,fn(this,Ml,et.boxes||null),fn(this,l1,et.methodOfCreation||""),fn(this,u0,et.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",et.highlightId>-1?(fn(this,Br,!0),bn(this,h0,K1).call(this,et),bn(this,Ol,Uu).call(this)):zt(this,Ml)&&(fn(this,a0,et.anchorNode),fn(this,i1,et.anchorOffset),fn(this,o1,et.focusNode),fn(this,a1,et.focusOffset),bn(this,c1,Vw).call(this),bn(this,Ol,Uu).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const et=Jn.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],et._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],et._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],et._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],et._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:zt(this,Br)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:zt(this,Fs),methodOfCreation:zt(this,l1)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(et){return{numberOfColors:et.get("color").size}}static initialize(et,ot){var ct;AnnotationEditor.initialize(et,ot),Jn._defaultColor||(Jn._defaultColor=((ct=ot.highlightColors)==null?void 0:ct.values().next().value)||"#fff066")}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Jn._defaultColor=ot;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Jn._defaultThickness=ot;break}}translateInPage(et,ot){}get toolbarPosition(){return zt(this,c0)}get commentButtonPosition(){return zt(this,l0)}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:bn(this,kS,bT).call(this,ot);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:bn(this,AS,ET).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,Jn._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Jn._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Jn._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,zt(this,Fs)||Jn._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,zt(this,Br)]]}onUpdatedColor(){var et,ot;(et=this.parent)==null||et.drawLayer.updateProperties(zt(this,Ts),{root:{fill:this.color,"fill-opacity":this.opacity}}),(ot=zt(this,s1))==null||ot.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",fn(this,s1,new ColorPicker({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(bn(this,f0,X1).call(this))}getBaseTranslation(){return[0,0]}getRect(et,ot){return super.getRect(et,ot,bn(this,f0,X1).call(this))}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),et&&this.div.focus()}remove(){bn(this,u1,zw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(bn(this,Ol,Uu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ct;let ot=!1;this.parent&&!et?bn(this,u1,zw).call(this):et&&(bn(this,Ol,Uu).call(this,et),ot=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(et),this.show(this._isVisible),ot&&this.select()}rotate(et){var ut,dt,ft;const{drawLayer:ot}=this.parent;let ct;zt(this,Br)?(et=(et-this.rotation+360)%360,ct=bn(ut=Jn,_u,_m).call(ut,zt(this,As).box,et)):ct=bn(dt=Jn,_u,_m).call(dt,[this.x,this.y,this.width,this.height],et),ot.updateProperties(zt(this,Ts),{bbox:ct,root:{"data-main-rotation":et}}),ot.updateProperties(zt(this,Kr),{bbox:bn(ft=Jn,_u,_m).call(ft,zt(this,cs).box,et),root:{"data-main-rotation":et}})}render(){if(this.div)return this.div;const et=super.render();zt(this,u0)&&(et.setAttribute("aria-label",zt(this,u0)),et.setAttribute("role","mark")),zt(this,Br)?et.classList.add("free"):this.div.addEventListener("keydown",bn(this,CS,wT).bind(this),{signal:this._uiManager._signal});const ot=fn(this,im,document.createElement("div"));return et.append(ot),ot.setAttribute("aria-hidden","true"),ot.className="internal",ot.style.clipPath=zt(this,tm),this.setDims(this.width,this.height),bindEvents(this,zt(this,im),["pointerover","pointerleave"]),this.enableEditing(),et}pointerover(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(zt(this,Kr),{rootClass:{hovered:!0}})}pointerleave(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(zt(this,Kr),{rootClass:{hovered:!1}})}_moveCaret(et){switch(this.parent.unselect(this),et){case 0:case 2:bn(this,d0,Y1).call(this,!0);break;case 1:case 3:bn(this,d0,Y1).call(this,!1);break}}select(){var et;super.select(),zt(this,Kr)&&((et=this.parent)==null||et.drawLayer.updateProperties(zt(this,Kr),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var et;super.unselect(),zt(this,Kr)&&((et=this.parent)==null||et.drawLayer.updateProperties(zt(this,Kr),{rootClass:{selected:!1}}),zt(this,Br)||bn(this,d0,Y1).call(this,!1))}get _mustFixPosition(){return!zt(this,Br)}show(et=this._isVisible){super.show(et),this.parent&&(this.parent.drawLayer.updateProperties(zt(this,Ts),{rootClass:{hidden:!et}}),this.parent.drawLayer.updateProperties(zt(this,Kr),{rootClass:{hidden:!et}}))}static startHighlighting(et,ot,{target:ct,x:ut,y:dt}){const{x:ft,y:St,width:kt,height:Tt}=ct.getBoundingClientRect(),Rt=new AbortController,jt=et.combinedSignal(Rt),$t=Ft=>{Rt.abort(),bn(this,MS,_T).call(this,et,Ft)};window.addEventListener("blur",$t,{signal:jt}),window.addEventListener("pointerup",$t,{signal:jt}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:jt}),window.addEventListener("contextmenu",noContextMenu,{signal:jt}),ct.addEventListener("pointermove",bn(this,PS,CT).bind(this,et),{signal:jt}),this._freeHighlight=new FreeHighlightOutliner({x:ut,y:dt},[ft,St,kt,Tt],et.scale,this._defaultThickness/2,ot,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=et.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(et,ot,ct){var Ht,Kt,Bt,Ut;let ut=null;if(et instanceof HighlightAnnotationElement){const{data:{quadPoints:Yt,rect:Jt,rotation:Zt,id:en,color:tn,opacity:nn,popupRef:ln,richText:an,contentsObj:sn,creationDate:dn,modificationDate:mn},parent:{page:{pageNumber:yn}}}=et;ut=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(tn),opacity:nn,quadPoints:Yt,boxes:null,pageIndex:yn-1,rect:Jt.slice(0),rotation:Zt,annotationElementId:en,id:en,deleted:!1,popupRef:ln,richText:an,comment:(sn==null?void 0:sn.str)||null,creationDate:dn,modificationDate:mn}}else if(et instanceof InkAnnotationElement){const{data:{inkLists:Yt,rect:Jt,rotation:Zt,id:en,color:tn,borderStyle:{rawWidth:nn},popupRef:ln,richText:an,contentsObj:sn,creationDate:dn,modificationDate:mn},parent:{page:{pageNumber:yn}}}=et;ut=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(tn),thickness:nn,inkLists:Yt,boxes:null,pageIndex:yn-1,rect:Jt.slice(0),rotation:Zt,annotationElementId:en,id:en,deleted:!1,popupRef:ln,richText:an,comment:(sn==null?void 0:sn.str)||null,creationDate:dn,modificationDate:mn}}const{color:dt,quadPoints:ft,inkLists:St,opacity:kt}=et,Tt=await super.deserialize(et,ot,ct);Tt.color=Util.makeHexColor(...dt),Tt.opacity=kt||1,St&&fn(Tt,Fs,et.thickness),Tt._initialData=ut,et.comment&&Tt.setCommentData(et);const[Rt,jt]=Tt.pageDimensions,[$t,Ft]=Tt.pageTranslation;if(ft){const Yt=fn(Tt,Ml,[]);for(let Jt=0;Jt<ft.length;Jt+=8)Yt.push({x:(ft[Jt]-$t)/Rt,y:1-(ft[Jt+1]-Ft)/jt,width:(ft[Jt+2]-ft[Jt])/Rt,height:(ft[Jt+1]-ft[Jt+5])/jt});bn(Ht=Tt,c1,Vw).call(Ht),bn(Kt=Tt,Ol,Uu).call(Kt),Tt.rotate(Tt.rotation)}else if(St){fn(Tt,Br,!0);const Yt=St[0],Jt={x:Yt[0]-$t,y:jt-(Yt[1]-Ft)},Zt=new FreeHighlightOutliner(Jt,[0,0,Rt,jt],1,zt(Tt,Fs)/2,!0,.001);for(let nn=0,ln=Yt.length;nn<ln;nn+=2)Jt.x=Yt[nn]-$t,Jt.y=jt-(Yt[nn+1]-Ft),Zt.add(Jt);const{id:en,clipPathId:tn}=ot.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:Tt.color,"fill-opacity":Tt._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:Zt.toSVGPath()}},!0,!0);bn(Bt=Tt,h0,K1).call(Bt,{highlightOutlines:Zt.getOutlines(),highlightId:en,clipPathId:tn}),bn(Ut=Tt,Ol,Uu).call(Ut),Tt.rotate(Tt.parentRotation)}return Tt}serialize(et=!1){if(this.isEmpty()||et)return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),ct=super.serialize(et);return Object.assign(ct,{color:ot,opacity:this.opacity,thickness:zt(this,Fs),quadPoints:bn(this,_S,kT).call(this),outlines:bn(this,RS,TT).call(this,ct.rect)}),this.addComment(ct),this.annotationElementId&&!bn(this,NS,RT).call(this,ct)?null:(ct.id=this.annotationElementId,ct)}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};a0=new WeakMap,i1=new WeakMap,Ml=new WeakMap,tm=new WeakMap,s1=new WeakMap,cs=new WeakMap,o1=new WeakMap,a1=new WeakMap,im=new WeakMap,As=new WeakMap,Ts=new WeakMap,Br=new WeakMap,l0=new WeakMap,c0=new WeakMap,Kr=new WeakMap,u0=new WeakMap,Fs=new WeakMap,l1=new WeakMap,c1=new WeakSet,Vw=function(){const et=new HighlightOutliner(zt(this,Ml),.001);fn(this,As,et.getOutlines()),[this.x,this.y,this.width,this.height]=zt(this,As).box;const ot=new HighlightOutliner(zt(this,Ml),.0025,.001,this._uiManager.direction==="ltr");fn(this,cs,ot.getOutlines());const{firstPoint:ct}=zt(this,As);fn(this,l0,[(ct[0]-this.x)/this.width,(ct[1]-this.y)/this.height]);const{lastPoint:ut}=zt(this,cs);fn(this,c0,[(ut[0]-this.x)/this.width,(ut[1]-this.y)/this.height])},h0=new WeakSet,K1=function({highlightOutlines:et,highlightId:ot,clipPathId:ct}){var jt,$t;fn(this,As,et);const ut=1.5;if(fn(this,cs,et.getNewOutline(zt(this,Fs)/2+ut,.0025)),ot>=0)fn(this,Ts,ot),fn(this,tm,ct),this.parent.drawLayer.finalizeDraw(ot,{bbox:et.box,path:{d:et.toSVGPath()}}),fn(this,Kr,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:zt(this,cs).box,path:{d:zt(this,cs).toSVGPath()}},!0));else if(this.parent){const Ft=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(zt(this,Ts),{bbox:bn(jt=Jn,_u,_m).call(jt,zt(this,As).box,(Ft-this.rotation+360)%360),path:{d:et.toSVGPath()}}),this.parent.drawLayer.updateProperties(zt(this,Kr),{bbox:bn($t=Jn,_u,_m).call($t,zt(this,cs).box,Ft),path:{d:zt(this,cs).toSVGPath()}})}const[dt,ft,St,kt]=et.box;switch(this.rotation){case 0:this.x=dt,this.y=ft,this.width=St,this.height=kt;break;case 90:{const[Ft,Ht]=this.parentDimensions;this.x=ft,this.y=1-dt,this.width=St*Ht/Ft,this.height=kt*Ft/Ht;break}case 180:this.x=1-dt,this.y=1-ft,this.width=St,this.height=kt;break;case 270:{const[Ft,Ht]=this.parentDimensions;this.x=1-ft,this.y=dt,this.width=St*Ht/Ft,this.height=kt*Ft/Ht;break}}const{firstPoint:Tt}=et;fn(this,l0,[(Tt[0]-dt)/St,(Tt[1]-ft)/kt]);const{lastPoint:Rt}=zt(this,cs);fn(this,c0,[(Rt[0]-dt)/St,(Rt[1]-ft)/kt])},kS=new WeakSet,bT=function(et){const ot=(dt,ft)=>{this.color=dt,this.opacity=ft,this.onUpdatedColor()},ct=this.color,ut=this.opacity;this.addCommands({cmd:ot.bind(this,et,Jn._defaultOpacity),undo:ot.bind(this,ct,ut),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(et)},!0)},AS=new WeakSet,ET=function(et){const ot=zt(this,Fs),ct=ut=>{fn(this,Fs,ut),bn(this,TS,ST).call(this,ut)};this.addCommands({cmd:ct.bind(this,et),undo:ct.bind(this,ot),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:et},!0)},TS=new WeakSet,ST=function(et){zt(this,Br)&&(bn(this,h0,K1).call(this,{highlightOutlines:zt(this,As).getNewOutline(et/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},u1=new WeakSet,zw=function(){zt(this,Ts)===null||!this.parent||(this.parent.drawLayer.remove(zt(this,Ts)),fn(this,Ts,null),this.parent.drawLayer.remove(zt(this,Kr)),fn(this,Kr,null))},Ol=new WeakSet,Uu=function(et=this.parent){zt(this,Ts)===null&&({id:kr(this,Ts)._,clipPathId:kr(this,tm)._}=et.drawLayer.draw({bbox:zt(this,As).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:zt(this,Br)},path:{d:zt(this,As).toSVGPath()}},!1,!0),fn(this,Kr,et.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:zt(this,Br)},bbox:zt(this,cs).box,path:{d:zt(this,cs).toSVGPath()}},zt(this,Br))),zt(this,im)&&(zt(this,im).style.clipPath=zt(this,tm)))},_u=new WeakSet,_m=function([et,ot,ct,ut],dt){switch(dt){case 90:return[1-ot-ut,et,ut,ct];case 180:return[1-et-ct,1-ot-ut,ct,ut];case 270:return[ot,1-et-ct,ut,ct]}return[et,ot,ct,ut]},CS=new WeakSet,wT=function(et){Jn._keyboardManager.exec(this,et)},d0=new WeakSet,Y1=function(et){if(!zt(this,a0))return;const ot=window.getSelection();et?ot.setPosition(zt(this,a0),zt(this,i1)):ot.setPosition(zt(this,o1),zt(this,a1))},f0=new WeakSet,X1=function(){return zt(this,Br)?this.rotation:0},_S=new WeakSet,kT=function(){if(zt(this,Br))return null;const[et,ot]=this.pageDimensions,[ct,ut]=this.pageTranslation,dt=zt(this,Ml),ft=new Float32Array(dt.length*8);let St=0;for(const{x:kt,y:Tt,width:Rt,height:jt}of dt){const $t=kt*et+ct,Ft=(1-Tt)*ot+ut;ft[St]=ft[St+4]=$t,ft[St+1]=ft[St+3]=Ft,ft[St+2]=ft[St+6]=$t+Rt*et,ft[St+5]=ft[St+7]=Ft-jt*ot,St+=8}return ft},RS=new WeakSet,TT=function(et){return zt(this,As).serialize(et,bn(this,f0,X1).call(this))},PS=new WeakSet,CT=function(et,ot){this._freeHighlight.add(ot)&&et.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},MS=new WeakSet,_T=function(et,ot){this._freeHighlight.isEmpty()?et.drawLayer.remove(this._freeHighlightId):et.createAndAddNewEditor(ot,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},NS=new WeakSet,RT=function(et){const{color:ot}=this._initialData;return this.hasEditedComment||et.color.some((ct,ut)=>ct!==ot[ut])},cn(Jn,_u),cn(Jn,PS),cn(Jn,MS),jn(Jn,"_defaultColor",null),jn(Jn,"_defaultOpacity",1),jn(Jn,"_defaultThickness",12),jn(Jn,"_type","highlight"),jn(Jn,"_editorType",AnnotationEditorType.HIGHLIGHT),jn(Jn,"_freeHighlightId",-1),jn(Jn,"_freeHighlight",null),jn(Jn,"_freeHighlightClipId","");let HighlightEditor=Jn;var sm;class DrawingOptions{constructor(){cn(this,sm,Object.create(null))}updateProperty(g,et){this[g]=et,this.updateSVGProperty(g,et)}updateProperties(g){if(g)for(const[et,ot]of Object.entries(g))et.startsWith("_")||this.updateProperty(et,ot)}updateSVGProperty(g,et){zt(this,sm)[g]=et}toSVGProperties(){const g=zt(this,sm);return fn(this,sm,Object.create(null)),{root:g}}reset(){fn(this,sm,Object.create(null))}updateAll(g=this){this.updateProperties(g)}clone(){unreachable("Not implemented")}}sm=new WeakMap;var Cs,p0,Mr,om,am,Ru,Pu,Mu,lm,h1,Hw,d1,Uw,f1,Gw,cm,q0,jS,PT,m0,J1,um,K0,Nu,Rm;const Fn=class Fn extends AnnotationEditor{constructor(et){super(et);cn(this,h1);cn(this,d1);cn(this,f1);cn(this,cm);cn(this,jS);cn(this,m0);cn(this,um);cn(this,Nu);cn(this,Cs,null);cn(this,p0,void 0);jn(this,"_colorPicker",null);jn(this,"_drawId",null);fn(this,p0,et.mustBeCommitted||!1),this._addOutlines(et)}onUpdatedColor(){var et;(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_addOutlines(et){et.drawOutlines&&(bn(this,h1,Hw).call(this,et),bn(this,cm,q0).call(this))}static _mergeSVGProperties(et,ot){const ct=new Set(Object.keys(et));for(const[ut,dt]of Object.entries(ot))ct.has(ut)?Object.assign(et[ut],dt):et[ut]=dt;return et}static getDefaultDrawingOptions(et){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(et,ot){const ct=this.typesMap.get(et);ct&&this._defaultDrawingOptions.updateProperty(ct,ot),this._currentParent&&(zt(Fn,Mr).updateProperty(ct,ot),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(et,ot){const ct=this.constructor.typesMap.get(et);ct&&this._updateProperty(et,ct,ot)}static get defaultPropertiesToUpdate(){const et=[],ot=this._defaultDrawingOptions;for(const[ct,ut]of this.typesMap)et.push([ct,ot[ut]]);return et}get propertiesToUpdate(){const et=[],{_drawingOptions:ot}=this;for(const[ct,ut]of this.constructor.typesMap)et.push([ct,ot[ut]]);return et}_updateProperty(et,ot,ct){const ut=this._drawingOptions,dt=ut[ot],ft=St=>{var Tt;ut.updateProperty(ot,St);const kt=zt(this,Cs).updateProperty(ot,St);kt&&bn(this,um,K0).call(this,kt),(Tt=this.parent)==null||Tt.drawLayer.updateProperties(this._drawId,ut.toSVGProperties()),et===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:ft.bind(this,ct),undo:ft.bind(this,dt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:et,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,Fn._mergeSVGProperties(zt(this,Cs).getPathResizingSVGProperties(bn(this,m0,J1).call(this)),{bbox:bn(this,Nu,Rm).call(this)}))}_onResized(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,Fn._mergeSVGProperties(zt(this,Cs).getPathResizedSVGProperties(bn(this,m0,J1).call(this)),{bbox:bn(this,Nu,Rm).call(this)}))}_onTranslating(et,ot){var ct;(ct=this.parent)==null||ct.drawLayer.updateProperties(this._drawId,{bbox:bn(this,Nu,Rm).call(this)})}_onTranslated(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,Fn._mergeSVGProperties(zt(this,Cs).getPathTranslatedSVGProperties(bn(this,m0,J1).call(this),this.parentDimensions),{bbox:bn(this,Nu,Rm).call(this)}))}_onStartDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,zt(this,p0)&&(fn(this,p0,!1),this.commit(),this.parent.setSelected(this),et&&this.isOnScreen&&this.div.focus())}remove(){bn(this,f1,Gw).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(bn(this,cm,q0).call(this),bn(this,um,K0).call(this,zt(this,Cs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ct;let ot=!1;this.parent&&!et?(this._uiManager.removeShouldRescale(this),bn(this,f1,Gw).call(this)):et&&(this._uiManager.addShouldRescale(this),bn(this,cm,q0).call(this,et),ot=!this.parent&&((ct=this.div)==null?void 0:ct.classList.contains("selectedEditor"))),super.setParent(et),ot&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Fn._mergeSVGProperties({bbox:bn(this,Nu,Rm).call(this)},zt(this,Cs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&bn(this,um,K0).call(this,zt(this,Cs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let et,ot;this._isCopy&&(et=this.x,ot=this.y);const ct=super.render();ct.classList.add("draw");const ut=document.createElement("div");return ct.append(ut),ut.setAttribute("aria-hidden","true"),ut.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(et,ot),ct}static createDrawerInstance(et,ot,ct,ut,dt){unreachable("Not implemented")}static startDrawing(et,ot,ct,ut){var Kt;const{target:dt,offsetX:ft,offsetY:St,pointerId:kt,pointerType:Tt}=ut;if(zt(Fn,Pu)&&zt(Fn,Pu)!==Tt)return;const{viewport:{rotation:Rt}}=et,{width:jt,height:$t}=dt.getBoundingClientRect(),Ft=fn(Fn,om,new AbortController),Ht=et.combinedSignal(Ft);if(zt(Fn,Ru)||fn(Fn,Ru,kt),zt(Fn,Pu)??fn(Fn,Pu,Tt),window.addEventListener("pointerup",Bt=>{var Ut;zt(Fn,Ru)===Bt.pointerId?this._endDraw(Bt):(Ut=zt(Fn,Mu))==null||Ut.delete(Bt.pointerId)},{signal:Ht}),window.addEventListener("pointercancel",Bt=>{var Ut;zt(Fn,Ru)===Bt.pointerId?this._currentParent.endDrawingSession():(Ut=zt(Fn,Mu))==null||Ut.delete(Bt.pointerId)},{signal:Ht}),window.addEventListener("pointerdown",Bt=>{zt(Fn,Pu)===Bt.pointerType&&((zt(Fn,Mu)||fn(Fn,Mu,new Set)).add(Bt.pointerId),zt(Fn,Mr).isCancellable()&&(zt(Fn,Mr).removeLastElement(),zt(Fn,Mr).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:Ht}),window.addEventListener("contextmenu",noContextMenu,{signal:Ht}),dt.addEventListener("pointermove",this._drawMove.bind(this),{signal:Ht}),dt.addEventListener("touchmove",Bt=>{Bt.timeStamp===zt(Fn,lm)&&stopEvent(Bt)},{signal:Ht}),et.toggleDrawing(),(Kt=ot._editorUndoBar)==null||Kt.hide(),zt(Fn,Mr)){et.drawLayer.updateProperties(this._currentDrawId,zt(Fn,Mr).startNew(ft,St,jt,$t,Rt));return}ot.updateUIForDefaultProperties(this),fn(Fn,Mr,this.createDrawerInstance(ft,St,jt,$t,Rt)),fn(Fn,am,this.getDefaultDrawingOptions()),this._currentParent=et,{id:this._currentDrawId}=et.drawLayer.draw(this._mergeSVGProperties(zt(Fn,am).toSVGProperties(),zt(Fn,Mr).defaultSVGProperties),!0,!1)}static _drawMove(et){var dt;if(fn(Fn,lm,-1),!zt(Fn,Mr))return;const{offsetX:ot,offsetY:ct,pointerId:ut}=et;if(zt(Fn,Ru)===ut){if(((dt=zt(Fn,Mu))==null?void 0:dt.size)>=1){this._endDraw(et);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,zt(Fn,Mr).add(ot,ct)),fn(Fn,lm,et.timeStamp),stopEvent(et)}}static _cleanup(et){et&&(this._currentDrawId=-1,this._currentParent=null,fn(Fn,Mr,null),fn(Fn,am,null),fn(Fn,Pu,null),fn(Fn,lm,NaN)),zt(Fn,om)&&(zt(Fn,om).abort(),fn(Fn,om,null),fn(Fn,Ru,NaN),fn(Fn,Mu,null))}static _endDraw(et){const ot=this._currentParent;if(ot){if(ot.toggleDrawing(!0),this._cleanup(!1),(et==null?void 0:et.target)===ot.div&&ot.drawLayer.updateProperties(this._currentDrawId,zt(Fn,Mr).end(et.offsetX,et.offsetY)),this.supportMultipleDrawings){const ct=zt(Fn,Mr),ut=this._currentDrawId,dt=ct.getLastElement();ot.addCommands({cmd:()=>{ot.drawLayer.updateProperties(ut,ct.setLastElement(dt))},undo:()=>{ot.drawLayer.updateProperties(ut,ct.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(et){const ot=this._currentParent;if(!ot)return null;if(ot.toggleDrawing(!0),ot.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!zt(Fn,Mr).isEmpty()){const{pageDimensions:[ct,ut],scale:dt}=ot,ft=ot.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:zt(Fn,Mr).getOutlines(ct*dt,ut*dt,dt,this._INNER_MARGIN),drawingOptions:zt(Fn,am),mustBeCommitted:!et});return this._cleanup(!0),ft}return ot.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(et){}static deserializeDraw(et,ot,ct,ut,dt,ft){unreachable("Not implemented")}static async deserialize(et,ot,ct){var Rt,jt;const{rawDims:{pageWidth:ut,pageHeight:dt,pageX:ft,pageY:St}}=ot.viewport,kt=this.deserializeDraw(ft,St,ut,dt,this._INNER_MARGIN,et),Tt=await super.deserialize(et,ot,ct);return Tt.createDrawingOptions(et),bn(Rt=Tt,h1,Hw).call(Rt,{drawOutlines:kt}),bn(jt=Tt,cm,q0).call(jt),Tt.onScaleChanging(),Tt.rotate(),Tt}serializeDraw(et){const[ot,ct]=this.pageTranslation,[ut,dt]=this.pageDimensions;return zt(this,Cs).serialize([ot,ct,ut,dt],et)}renderAnnotationElement(et){return et.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Cs=new WeakMap,p0=new WeakMap,Mr=new WeakMap,om=new WeakMap,am=new WeakMap,Ru=new WeakMap,Pu=new WeakMap,Mu=new WeakMap,lm=new WeakMap,h1=new WeakSet,Hw=function({drawOutlines:et,drawId:ot,drawingOptions:ct}){fn(this,Cs,et),this._drawingOptions||(this._drawingOptions=ct),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),ot>=0?(this._drawId=ot,this.parent.drawLayer.finalizeDraw(ot,et.defaultProperties)):this._drawId=bn(this,d1,Uw).call(this,et,this.parent),bn(this,um,K0).call(this,et.box)},d1=new WeakSet,Uw=function(et,ot){const{id:ct}=ot.drawLayer.draw(Fn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),et.defaultSVGProperties),!1,!1);return ct},f1=new WeakSet,Gw=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},cm=new WeakSet,q0=function(et=this.parent){if(!(this._drawId!==null&&this.parent===et)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,et.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=bn(this,d1,Uw).call(this,zt(this,Cs),et)}},jS=new WeakSet,PT=function([et,ot,ct,ut]){const{parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[ot,1-et,ct*(ft/dt),ut*(dt/ft)];case 180:return[1-et,1-ot,ct,ut];case 270:return[1-ot,et,ct*(ft/dt),ut*(dt/ft)];default:return[et,ot,ct,ut]}},m0=new WeakSet,J1=function(){const{x:et,y:ot,width:ct,height:ut,parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[1-ot,et,ct*(dt/ft),ut*(ft/dt)];case 180:return[1-et,1-ot,ct,ut];case 270:return[ot,1-et,ct*(dt/ft),ut*(ft/dt)];default:return[et,ot,ct,ut]}},um=new WeakSet,K0=function(et){[this.x,this.y,this.width,this.height]=bn(this,jS,PT).call(this,et),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Nu=new WeakSet,Rm=function(){const{x:et,y:ot,width:ct,height:ut,rotation:dt,parentRotation:ft,parentDimensions:[St,kt]}=this;switch((dt*4+ft)/90){case 1:return[1-ot-ut,et,ut,ct];case 2:return[1-et-ct,1-ot-ut,ct,ut];case 3:return[ot,1-et-ct,ut,ct];case 4:return[et,ot-ct*(St/kt),ut*(kt/St),ct*(St/kt)];case 5:return[1-ot,et,ct*(St/kt),ut*(kt/St)];case 6:return[1-et-ut*(kt/St),1-ot,ut*(kt/St),ct*(St/kt)];case 7:return[ot-ct*(St/kt),1-et-ut*(kt/St),ct*(St/kt),ut*(kt/St)];case 8:return[et-ct,ot-ut,ct,ut];case 9:return[1-ot,et-ct,ut,ct];case 10:return[1-et,1-ot,ct,ut];case 11:return[ot-ut,1-et,ut,ct];case 12:return[et-ut*(kt/St),ot,ut*(kt/St),ct*(St/kt)];case 13:return[1-ot-ct*(St/kt),et-ut*(kt/St),ct*(St/kt),ut*(kt/St)];case 14:return[1-et,1-ot-ct*(St/kt),ut*(kt/St),ct*(St/kt)];case 15:return[ot,1-et,ct*(St/kt),ut*(kt/St)];default:return[et,ot,ct,ut]}},jn(Fn,"_currentDrawId",-1),jn(Fn,"_currentParent",null),cn(Fn,Mr,null),cn(Fn,om,null),cn(Fn,am,null),cn(Fn,Ru,NaN),cn(Fn,Pu,null),cn(Fn,Mu,null),cn(Fn,lm,NaN),jn(Fn,"_INNER_MARGIN",3);let DrawingEditor=Fn;var No,Nr,jr,hm,g0,Zr,Vr,Bs,dm,fm,pm,y0,Z1;class InkDrawOutliner{constructor(g,et,ot,ct,ut,dt){cn(this,y0);cn(this,No,new Float64Array(6));cn(this,Nr,void 0);cn(this,jr,void 0);cn(this,hm,void 0);cn(this,g0,void 0);cn(this,Zr,void 0);cn(this,Vr,"");cn(this,Bs,0);cn(this,dm,new InkDrawOutline);cn(this,fm,void 0);cn(this,pm,void 0);fn(this,fm,ot),fn(this,pm,ct),fn(this,hm,ut),fn(this,g0,dt),[g,et]=bn(this,y0,Z1).call(this,g,et);const ft=fn(this,Nr,[NaN,NaN,NaN,NaN,g,et]);fn(this,Zr,[g,et]),fn(this,jr,[{line:ft,points:zt(this,Zr)}]),zt(this,No).set(ft,0)}updateProperty(g,et){g==="stroke-width"&&fn(this,g0,et)}isEmpty(){return!zt(this,jr)||zt(this,jr).length===0}isCancellable(){return zt(this,Zr).length<=10}add(g,et){[g,et]=bn(this,y0,Z1).call(this,g,et);const[ot,ct,ut,dt]=zt(this,No).subarray(2,6),ft=g-ut,St=et-dt;return Math.hypot(zt(this,fm)*ft,zt(this,pm)*St)<=2?null:(zt(this,Zr).push(g,et),isNaN(ot)?(zt(this,No).set([ut,dt,g,et],2),zt(this,Nr).push(NaN,NaN,NaN,NaN,g,et),{path:{d:this.toSVGPath()}}):(isNaN(zt(this,No)[0])&&zt(this,Nr).splice(6,6),zt(this,No).set([ot,ct,ut,dt,g,et],0),zt(this,Nr).push(...Outline.createBezierPoints(ot,ct,ut,dt,g,et)),{path:{d:this.toSVGPath()}}))}end(g,et){const ot=this.add(g,et);return ot||(zt(this,Zr).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(g,et,ot,ct,ut){fn(this,fm,ot),fn(this,pm,ct),fn(this,hm,ut),[g,et]=bn(this,y0,Z1).call(this,g,et);const dt=fn(this,Nr,[NaN,NaN,NaN,NaN,g,et]);fn(this,Zr,[g,et]);const ft=zt(this,jr).at(-1);return ft&&(ft.line=new Float32Array(ft.line),ft.points=new Float32Array(ft.points)),zt(this,jr).push({line:dt,points:zt(this,Zr)}),zt(this,No).set(dt,0),fn(this,Bs,0),this.toSVGPath(),null}getLastElement(){return zt(this,jr).at(-1)}setLastElement(g){return zt(this,jr)?(zt(this,jr).push(g),fn(this,Nr,g.line),fn(this,Zr,g.points),fn(this,Bs,0),{path:{d:this.toSVGPath()}}):zt(this,dm).setLastElement(g)}removeLastElement(){if(!zt(this,jr))return zt(this,dm).removeLastElement();zt(this,jr).pop(),fn(this,Vr,"");for(let g=0,et=zt(this,jr).length;g<et;g++){const{line:ot,points:ct}=zt(this,jr)[g];fn(this,Nr,ot),fn(this,Zr,ct),fn(this,Bs,0),this.toSVGPath()}return{path:{d:zt(this,Vr)}}}toSVGPath(){const g=Outline.svgRound(zt(this,Nr)[4]),et=Outline.svgRound(zt(this,Nr)[5]);if(zt(this,Zr).length===2)return fn(this,Vr,`${zt(this,Vr)} M ${g} ${et} Z`),zt(this,Vr);if(zt(this,Zr).length<=6){const ct=zt(this,Vr).lastIndexOf("M");fn(this,Vr,`${zt(this,Vr).slice(0,ct)} M ${g} ${et}`),fn(this,Bs,6)}if(zt(this,Zr).length===4){const ct=Outline.svgRound(zt(this,Nr)[10]),ut=Outline.svgRound(zt(this,Nr)[11]);return fn(this,Vr,`${zt(this,Vr)} L ${ct} ${ut}`),fn(this,Bs,12),zt(this,Vr)}const ot=[];zt(this,Bs)===0&&(ot.push(`M ${g} ${et}`),fn(this,Bs,6));for(let ct=zt(this,Bs),ut=zt(this,Nr).length;ct<ut;ct+=6){const[dt,ft,St,kt,Tt,Rt]=zt(this,Nr).slice(ct,ct+6).map(Outline.svgRound);ot.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${Rt}`)}return fn(this,Vr,zt(this,Vr)+ot.join(" ")),fn(this,Bs,zt(this,Nr).length),zt(this,Vr)}getOutlines(g,et,ot,ct){const ut=zt(this,jr).at(-1);return ut.line=new Float32Array(ut.line),ut.points=new Float32Array(ut.points),zt(this,dm).build(zt(this,jr),g,et,ot,zt(this,hm),zt(this,g0),ct),fn(this,No,null),fn(this,Nr,null),fn(this,jr,null),fn(this,Vr,null),zt(this,dm)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}No=new WeakMap,Nr=new WeakMap,jr=new WeakMap,hm=new WeakMap,g0=new WeakMap,Zr=new WeakMap,Vr=new WeakMap,Bs=new WeakMap,dm=new WeakMap,fm=new WeakMap,pm=new WeakMap,y0=new WeakSet,Z1=function(g,et){return Outline._normalizePoint(g,et,zt(this,fm),zt(this,pm),zt(this,hm))};var Qr,p1,m1,_s,jo,Oo,v0,x0,mm,eo,$o,OS,MT,DS,NT,IS,jT;class InkDrawOutline extends Outline{constructor(){super(...arguments);cn(this,eo);cn(this,OS);cn(this,DS);cn(this,IS);cn(this,Qr,void 0);cn(this,p1,0);cn(this,m1,void 0);cn(this,_s,void 0);cn(this,jo,void 0);cn(this,Oo,void 0);cn(this,v0,void 0);cn(this,x0,void 0);cn(this,mm,void 0)}build(et,ot,ct,ut,dt,ft,St){fn(this,jo,ot),fn(this,Oo,ct),fn(this,v0,ut),fn(this,x0,dt),fn(this,mm,ft),fn(this,m1,St??0),fn(this,_s,et),bn(this,DS,NT).call(this)}get thickness(){return zt(this,mm)}setLastElement(et){return zt(this,_s).push(et),{path:{d:this.toSVGPath()}}}removeLastElement(){return zt(this,_s).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const et=[];for(const{line:ot}of zt(this,_s)){if(et.push(`M${Outline.svgRound(ot[4])} ${Outline.svgRound(ot[5])}`),ot.length===6){et.push("Z");continue}if(ot.length===12&&isNaN(ot[6])){et.push(`L${Outline.svgRound(ot[10])} ${Outline.svgRound(ot[11])}`);continue}for(let ct=6,ut=ot.length;ct<ut;ct+=6){const[dt,ft,St,kt,Tt,Rt]=ot.subarray(ct,ct+6).map(Outline.svgRound);et.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${Rt}`)}}return et.join("")}serialize([et,ot,ct,ut],dt){const ft=[],St=[],[kt,Tt,Rt,jt]=bn(this,OS,MT).call(this);let $t,Ft,Ht,Kt,Bt,Ut,Yt,Jt,Zt;switch(zt(this,x0)){case 0:Zt=Outline._rescale,$t=et,Ft=ot+ut,Ht=ct,Kt=-ut,Bt=et+kt*ct,Ut=ot+(1-Tt-jt)*ut,Yt=et+(kt+Rt)*ct,Jt=ot+(1-Tt)*ut;break;case 90:Zt=Outline._rescaleAndSwap,$t=et,Ft=ot,Ht=ct,Kt=ut,Bt=et+Tt*ct,Ut=ot+kt*ut,Yt=et+(Tt+jt)*ct,Jt=ot+(kt+Rt)*ut;break;case 180:Zt=Outline._rescale,$t=et+ct,Ft=ot,Ht=-ct,Kt=ut,Bt=et+(1-kt-Rt)*ct,Ut=ot+Tt*ut,Yt=et+(1-kt)*ct,Jt=ot+(Tt+jt)*ut;break;case 270:Zt=Outline._rescaleAndSwap,$t=et+ct,Ft=ot+ut,Ht=-ct,Kt=-ut,Bt=et+(1-Tt-jt)*ct,Ut=ot+(1-kt-Rt)*ut,Yt=et+(1-Tt)*ct,Jt=ot+(1-kt)*ut;break}for(const{line:en,points:tn}of zt(this,_s))ft.push(Zt(en,$t,Ft,Ht,Kt,dt?new Array(en.length):null)),St.push(Zt(tn,$t,Ft,Ht,Kt,dt?new Array(tn.length):null));return{lines:ft,points:St,rect:[Bt,Ut,Yt,Jt]}}static deserialize(et,ot,ct,ut,dt,{paths:{lines:ft,points:St},rotation:kt,thickness:Tt}){const Rt=[];let jt,$t,Ft,Ht,Kt;switch(kt){case 0:Kt=Outline._rescale,jt=-et/ct,$t=ot/ut+1,Ft=1/ct,Ht=-1/ut;break;case 90:Kt=Outline._rescaleAndSwap,jt=-ot/ut,$t=-et/ct,Ft=1/ut,Ht=1/ct;break;case 180:Kt=Outline._rescale,jt=et/ct+1,$t=-ot/ut,Ft=-1/ct,Ht=1/ut;break;case 270:Kt=Outline._rescaleAndSwap,jt=ot/ut+1,$t=et/ct+1,Ft=-1/ut,Ht=-1/ct;break}if(!ft){ft=[];for(const Ut of St){const Yt=Ut.length;if(Yt===2){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Ut[0],Ut[1]]));continue}if(Yt===4){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Ut[0],Ut[1],NaN,NaN,NaN,NaN,Ut[2],Ut[3]]));continue}const Jt=new Float32Array(3*(Yt-2));ft.push(Jt);let[Zt,en,tn,nn]=Ut.subarray(0,4);Jt.set([NaN,NaN,NaN,NaN,Zt,en],0);for(let ln=4;ln<Yt;ln+=2){const an=Ut[ln],sn=Ut[ln+1];Jt.set(Outline.createBezierPoints(Zt,en,tn,nn,an,sn),(ln-2)*3),[Zt,en,tn,nn]=[tn,nn,an,sn]}}}for(let Ut=0,Yt=ft.length;Ut<Yt;Ut++)Rt.push({line:Kt(ft[Ut].map(Jt=>Jt??NaN),jt,$t,Ft,Ht),points:Kt(St[Ut].map(Jt=>Jt??NaN),jt,$t,Ft,Ht)});const Bt=new this.prototype.constructor;return Bt.build(Rt,ct,ut,1,kt,Tt,dt),Bt}get box(){return zt(this,Qr)}updateProperty(et,ot){return et==="stroke-width"?bn(this,IS,jT).call(this,ot):null}updateParentDimensions([et,ot],ct){const[ut,dt]=bn(this,eo,$o).call(this);fn(this,jo,et),fn(this,Oo,ot),fn(this,v0,ct);const[ft,St]=bn(this,eo,$o).call(this),kt=ft-ut,Tt=St-dt,Rt=zt(this,Qr);return Rt[0]-=kt,Rt[1]-=Tt,Rt[2]+=2*kt,Rt[3]+=2*Tt,Rt}updateRotation(et){return fn(this,p1,et),{path:{transform:this.rotationTransform}}}get viewBox(){return zt(this,Qr).map(Outline.svgRound).join(" ")}get defaultProperties(){const[et,ot]=zt(this,Qr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get rotationTransform(){const[,,et,ot]=zt(this,Qr);let ct=0,ut=0,dt=0,ft=0,St=0,kt=0;switch(zt(this,p1)){case 90:ut=ot/et,dt=-et/ot,St=et;break;case 180:ct=-1,ft=-1,St=et,kt=ot;break;case 270:ut=-ot/et,dt=et/ot,kt=ot;break;default:return""}return`matrix(${ct} ${ut} ${dt} ${ft} ${Outline.svgRound(St)} ${Outline.svgRound(kt)})`}getPathResizingSVGProperties([et,ot,ct,ut]){const[dt,ft]=bn(this,eo,$o).call(this),[St,kt,Tt,Rt]=zt(this,Qr);if(Math.abs(Tt-dt)<=Outline.PRECISION||Math.abs(Rt-ft)<=Outline.PRECISION){const Kt=et+ct/2-(St+Tt/2),Bt=ot+ut/2-(kt+Rt/2);return{path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:`${this.rotationTransform} translate(${Kt} ${Bt})`}}}const jt=(ct-2*dt)/(Tt-2*dt),$t=(ut-2*ft)/(Rt-2*ft),Ft=Tt/ct,Ht=Rt/ut;return{path:{"transform-origin":`${Outline.svgRound(St)} ${Outline.svgRound(kt)}`,transform:`${this.rotationTransform} scale(${Ft} ${Ht}) translate(${Outline.svgRound(dt)} ${Outline.svgRound(ft)}) scale(${jt} ${$t}) translate(${Outline.svgRound(-dt)} ${Outline.svgRound(-ft)})`}}}getPathResizedSVGProperties([et,ot,ct,ut]){const[dt,ft]=bn(this,eo,$o).call(this),St=zt(this,Qr),[kt,Tt,Rt,jt]=St;if(St[0]=et,St[1]=ot,St[2]=ct,St[3]=ut,Math.abs(Rt-dt)<=Outline.PRECISION||Math.abs(jt-ft)<=Outline.PRECISION){const Bt=et+ct/2-(kt+Rt/2),Ut=ot+ut/2-(Tt+jt/2);for(const{line:Yt,points:Jt}of zt(this,_s))Outline._translate(Yt,Bt,Ut,Yt),Outline._translate(Jt,Bt,Ut,Jt);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const $t=(ct-2*dt)/(Rt-2*dt),Ft=(ut-2*ft)/(jt-2*ft),Ht=-$t*(kt+dt)+et+dt,Kt=-Ft*(Tt+ft)+ot+ft;if($t!==1||Ft!==1||Ht!==0||Kt!==0)for(const{line:Bt,points:Ut}of zt(this,_s))Outline._rescale(Bt,Ht,Kt,$t,Ft,Bt),Outline._rescale(Ut,Ht,Kt,$t,Ft,Ut);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([et,ot],ct){const[ut,dt]=ct,ft=zt(this,Qr),St=et-ft[0],kt=ot-ft[1];if(zt(this,jo)===ut&&zt(this,Oo)===dt)for(const{line:Tt,points:Rt}of zt(this,_s))Outline._translate(Tt,St,kt,Tt),Outline._translate(Rt,St,kt,Rt);else{const Tt=zt(this,jo)/ut,Rt=zt(this,Oo)/dt;fn(this,jo,ut),fn(this,Oo,dt);for(const{line:jt,points:$t}of zt(this,_s))Outline._rescale(jt,St,kt,Tt,Rt,jt),Outline._rescale($t,St,kt,Tt,Rt,$t);ft[2]*=Tt,ft[3]*=Rt}return ft[0]=et,ft[1]=ot,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get defaultSVGProperties(){const et=zt(this,Qr);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et[0])} ${Outline.svgRound(et[1])}`,transform:this.rotationTransform||null},bbox:et}}}Qr=new WeakMap,p1=new WeakMap,m1=new WeakMap,_s=new WeakMap,jo=new WeakMap,Oo=new WeakMap,v0=new WeakMap,x0=new WeakMap,mm=new WeakMap,eo=new WeakSet,$o=function(et=zt(this,mm)){const ot=zt(this,m1)+et/2*zt(this,v0);return zt(this,x0)%180===0?[ot/zt(this,jo),ot/zt(this,Oo)]:[ot/zt(this,Oo),ot/zt(this,jo)]},OS=new WeakSet,MT=function(){const[et,ot,ct,ut]=zt(this,Qr),[dt,ft]=bn(this,eo,$o).call(this,0);return[et+dt,ot+ft,ct-2*dt,ut-2*ft]},DS=new WeakSet,NT=function(){const et=fn(this,Qr,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:ut}of zt(this,_s)){if(ut.length<=12){for(let St=4,kt=ut.length;St<kt;St+=6)Util.pointBoundingBox(ut[St],ut[St+1],et);continue}let dt=ut[4],ft=ut[5];for(let St=6,kt=ut.length;St<kt;St+=6){const[Tt,Rt,jt,$t,Ft,Ht]=ut.subarray(St,St+6);Util.bezierBoundingBox(dt,ft,Tt,Rt,jt,$t,Ft,Ht,et),dt=Ft,ft=Ht}}const[ot,ct]=bn(this,eo,$o).call(this);et[0]=MathClamp(et[0]-ot,0,1),et[1]=MathClamp(et[1]-ct,0,1),et[2]=MathClamp(et[2]+ot,0,1),et[3]=MathClamp(et[3]+ct,0,1),et[2]-=et[0],et[3]-=et[1]},IS=new WeakSet,jT=function(et){const[ot,ct]=bn(this,eo,$o).call(this);fn(this,mm,et);const[ut,dt]=bn(this,eo,$o).call(this),[ft,St]=[ut-ot,dt-ct],kt=zt(this,Qr);return kt[0]-=ft,kt[1]-=St,kt[2]+=2*ft,kt[3]+=2*St,kt};class InkDrawingOptions extends DrawingOptions{constructor(g){super(),this._viewParameters=g,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(g,et){g==="stroke-width"&&(et??(et=this["stroke-width"]),et*=this._viewParameters.realScale),super.updateSVGProperty(g,et)}clone(){const g=new InkDrawingOptions(this._viewParameters);return g.updateAll(this),g}}var LS,OT;const jm=class jm extends DrawingEditor{constructor(et){super({...et,name:"inkEditor"});cn(this,LS);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new InkDrawingOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(et,ot,ct,ut,dt){return new InkDrawOutliner(et,ot,ct,ut,dt,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(et,ot,ct,ut,dt,ft){return InkDrawOutline.deserialize(et,ot,ct,ut,dt,ft)}static async deserialize(et,ot,ct){let ut=null;if(et instanceof InkAnnotationElement){const{data:{inkLists:ft,rect:St,rotation:kt,id:Tt,color:Rt,opacity:jt,borderStyle:{rawWidth:$t},popupRef:Ft,richText:Ht,contentsObj:Kt,creationDate:Bt,modificationDate:Ut},parent:{page:{pageNumber:Yt}}}=et;ut=et={annotationType:AnnotationEditorType.INK,color:Array.from(Rt),thickness:$t,opacity:jt,paths:{points:ft},boxes:null,pageIndex:Yt-1,rect:St.slice(0),rotation:kt,annotationElementId:Tt,id:Tt,deleted:!1,popupRef:Ft,richText:Ht,comment:(Kt==null?void 0:Kt.str)||null,creationDate:Bt,modificationDate:Ut}}const dt=await super.deserialize(et,ot,ct);return dt._initialData=ut,et.comment&&dt.setCommentData(et),dt}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:et,_drawingOptions:ot,parent:ct}=this;ot.updateSVGProperty("stroke-width"),ct.drawLayer.updateProperties(et,ot.toSVGProperties())}static onScaleChangingWhenDrawing(){const et=this._currentParent;et&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),et.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:et,thickness:ot,opacity:ct}){this._drawingOptions=jm.getDefaultDrawingOptions({stroke:Util.makeHexColor(...et),"stroke-width":ot,"stroke-opacity":ct})}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:ot,points:ct}=this.serializeDraw(et),{_drawingOptions:{stroke:ut,"stroke-opacity":dt,"stroke-width":ft}}=this,St=Object.assign(super.serialize(et),{color:AnnotationEditor._colorManager.convert(ut),opacity:dt,thickness:ft,paths:{lines:ot,points:ct}});return this.addComment(St),et?(St.isCopy=!0,St):this.annotationElementId&&!bn(this,LS,OT).call(this,St)?null:(St.id=this.annotationElementId,St)}renderAnnotationElement(et){if(this.deleted)return et.hide(),null;const{points:ot,rect:ct}=this.serializeDraw(!1);return et.updateEdited({rect:ct,thickness:this._drawingOptions["stroke-width"],points:ot,popup:this.comment}),null}};LS=new WeakSet,OT=function(et){const{color:ot,thickness:ct,opacity:ut,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||et.color.some((ft,St)=>ft!==ot[St])||et.thickness!==ct||et.opacity!==ut||et.pageIndex!==dt},jn(jm,"_type","ink"),jn(jm,"_editorType",AnnotationEditorType.INK),jn(jm,"_defaultDrawingOptions",null);let InkEditor=jm;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let g=super.toSVGPath();return g.endsWith("Z")||(g+="Z"),g}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var gm,g1,Ww,to,$S,DT,FS,IT,y1,qw,b0,Q1,BS,LT,VS,$T,zS,FT,v1,Kw,x1,Yw,HS,BT;class SignatureExtractor{static extractContoursFromText(g,{fontFamily:et,fontStyle:ot,fontWeight:ct},ut,dt,ft,St){let kt=new OffscreenCanvas(1,1),Tt=kt.getContext("2d",{alpha:!1});const Rt=200,jt=Tt.font=`${ot} ${ct} ${Rt}px ${et}`,{actualBoundingBoxLeft:$t,actualBoundingBoxRight:Ft,actualBoundingBoxAscent:Ht,actualBoundingBoxDescent:Kt,fontBoundingBoxAscent:Bt,fontBoundingBoxDescent:Ut,width:Yt}=Tt.measureText(g),Jt=1.5,Zt=Math.ceil(Math.max(Math.abs($t)+Math.abs(Ft)||0,Yt)*Jt),en=Math.ceil(Math.max(Math.abs(Ht)+Math.abs(Kt)||Rt,Math.abs(Bt)+Math.abs(Ut)||Rt)*Jt);kt=new OffscreenCanvas(Zt,en),Tt=kt.getContext("2d",{alpha:!0,willReadFrequently:!0}),Tt.font=jt,Tt.filter="grayscale(1)",Tt.fillStyle="white",Tt.fillRect(0,0,Zt,en),Tt.fillStyle="black",Tt.fillText(g,Zt*(Jt-1)/2,en*(3-Jt)/2);const tn=bn(this,v1,Kw).call(this,Tt.getImageData(0,0,Zt,en).data),nn=bn(this,zS,FT).call(this,tn),ln=bn(this,x1,Yw).call(this,nn),an=bn(this,y1,qw).call(this,tn,Zt,en,ln);return this.processDrawnLines({lines:{curves:an,width:Zt,height:en},pageWidth:ut,pageHeight:dt,rotation:ft,innerMargin:St,mustSmooth:!0,areContours:!0})}static process(g,et,ot,ct,ut){const[dt,ft,St]=bn(this,HS,BT).call(this,g),[kt,Tt]=bn(this,VS,$T).call(this,dt,ft,St,Math.hypot(ft,St)*zt(this,gm).sigmaSFactor,zt(this,gm).sigmaR,zt(this,gm).kernelSize),Rt=bn(this,x1,Yw).call(this,Tt),jt=bn(this,y1,qw).call(this,kt,ft,St,Rt);return this.processDrawnLines({lines:{curves:jt,width:ft,height:St},pageWidth:et,pageHeight:ot,rotation:ct,innerMargin:ut,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:g,pageWidth:et,pageHeight:ot,rotation:ct,innerMargin:ut,mustSmooth:dt,areContours:ft}){ct%180!==0&&([et,ot]=[ot,et]);const{curves:St,width:kt,height:Tt}=g,Rt=g.thickness??0,jt=[],$t=Math.min(et/kt,ot/Tt),Ft=$t/et,Ht=$t/ot,Kt=[];for(const{points:Ut}of St){const Yt=dt?bn(this,BS,LT).call(this,Ut):Ut;if(!Yt)continue;Kt.push(Yt);const Jt=Yt.length,Zt=new Float32Array(Jt),en=new Float32Array(3*(Jt===2?2:Jt-2));if(jt.push({line:en,points:Zt}),Jt===2){Zt[0]=Yt[0]*Ft,Zt[1]=Yt[1]*Ht,en.set([NaN,NaN,NaN,NaN,Zt[0],Zt[1]],0);continue}let[tn,nn,ln,an]=Yt;tn*=Ft,nn*=Ht,ln*=Ft,an*=Ht,Zt.set([tn,nn,ln,an],0),en.set([NaN,NaN,NaN,NaN,tn,nn],0);for(let sn=4;sn<Jt;sn+=2){const dn=Zt[sn]=Yt[sn]*Ft,mn=Zt[sn+1]=Yt[sn+1]*Ht;en.set(Outline.createBezierPoints(tn,nn,ln,an,dn,mn),(sn-2)*3),[tn,nn,ln,an]=[ln,an,dn,mn]}}if(jt.length===0)return null;const Bt=ft?new ContourDrawOutline:new InkDrawOutline;return Bt.build(jt,et,ot,1,ct,ft?0:Rt,ut),{outline:Bt,newCurves:Kt,areContours:ft,thickness:Rt,width:kt,height:Tt}}static async compressSignature({outlines:g,areContours:et,thickness:ot,width:ct,height:ut}){let dt=1/0,ft=-1/0,St=0;for(const Yt of g){St+=Yt.length;for(let Jt=2,Zt=Yt.length;Jt<Zt;Jt++){const en=Yt[Jt]-Yt[Jt-2];dt=Math.min(dt,en),ft=Math.max(ft,en)}}let kt;dt>=-128&&ft<=127?kt=Int8Array:dt>=-32768&&ft<=32767?kt=Int16Array:kt=Int32Array;const Tt=g.length,Rt=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Tt,jt=new Uint32Array(Rt);let $t=0;jt[$t++]=Rt*Uint32Array.BYTES_PER_ELEMENT+(St-2*Tt)*kt.BYTES_PER_ELEMENT,jt[$t++]=0,jt[$t++]=ct,jt[$t++]=ut,jt[$t++]=et?0:1,jt[$t++]=Math.max(0,Math.floor(ot??0)),jt[$t++]=Tt,jt[$t++]=kt.BYTES_PER_ELEMENT;for(const Yt of g)jt[$t++]=Yt.length-2,jt[$t++]=Yt[0],jt[$t++]=Yt[1];const Ft=new CompressionStream("deflate-raw"),Ht=Ft.writable.getWriter();await Ht.ready,Ht.write(jt);const Kt=kt.prototype.constructor;for(const Yt of g){const Jt=new Kt(Yt.length-2);for(let Zt=2,en=Yt.length;Zt<en;Zt++)Jt[Zt-2]=Yt[Zt]-Yt[Zt-2];Ht.write(Jt)}Ht.close();const Bt=await new Response(Ft.readable).arrayBuffer(),Ut=new Uint8Array(Bt);return toBase64Util(Ut)}static async decompressSignature(g){try{const et=fromBase64Util(g),{readable:ot,writable:ct}=new DecompressionStream("deflate-raw"),ut=ct.getWriter();await ut.ready,ut.write(et).then(async()=>{await ut.ready,await ut.close()}).catch(()=>{});let dt=null,ft=0;for await(const Yt of ot)dt||(dt=new Uint8Array(new Uint32Array(Yt.buffer,0,4)[0])),dt.set(Yt,ft),ft+=Yt.length;const St=new Uint32Array(dt.buffer,0,dt.length>>2),kt=St[1];if(kt!==0)throw new Error(`Invalid version: ${kt}`);const Tt=St[2],Rt=St[3],jt=St[4]===0,$t=St[5],Ft=St[6],Ht=St[7],Kt=[],Bt=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Ft)*Uint32Array.BYTES_PER_ELEMENT;let Ut;switch(Ht){case Int8Array.BYTES_PER_ELEMENT:Ut=new Int8Array(dt.buffer,Bt);break;case Int16Array.BYTES_PER_ELEMENT:Ut=new Int16Array(dt.buffer,Bt);break;case Int32Array.BYTES_PER_ELEMENT:Ut=new Int32Array(dt.buffer,Bt);break}ft=0;for(let Yt=0;Yt<Ft;Yt++){const Jt=St[POINTS_PROPERTIES_NUMBER*Yt+BASE_HEADER_LENGTH],Zt=new Float32Array(Jt+2);Kt.push(Zt);for(let en=0;en<POINTS_PROPERTIES_NUMBER-1;en++)Zt[en]=St[POINTS_PROPERTIES_NUMBER*Yt+BASE_HEADER_LENGTH+en+1];for(let en=0;en<Jt;en++)Zt[en+2]=Zt[en]+Ut[ft++]}return{areContours:jt,thickness:$t,outlines:Kt,width:Tt,height:Rt}}catch(et){return warn(`decompressSignature: ${et}`),null}}}gm=new WeakMap,g1=new WeakSet,Ww=function(g,et,ot,ct){return ot-=g,ct-=et,ot===0?ct>0?0:4:ot===1?ct+6:2-ct},to=new WeakMap,$S=new WeakSet,DT=function(g,et,ot,ct,ut,dt,ft){const St=bn(this,g1,Ww).call(this,ot,ct,ut,dt);for(let kt=0;kt<8;kt++){const Tt=(-kt+St-ft+16)%8,Rt=zt(this,to)[2*Tt],jt=zt(this,to)[2*Tt+1];if(g[(ot+Rt)*et+(ct+jt)]!==0)return Tt}return-1},FS=new WeakSet,IT=function(g,et,ot,ct,ut,dt,ft){const St=bn(this,g1,Ww).call(this,ot,ct,ut,dt);for(let kt=0;kt<8;kt++){const Tt=(kt+St+ft+16)%8,Rt=zt(this,to)[2*Tt],jt=zt(this,to)[2*Tt+1];if(g[(ot+Rt)*et+(ct+jt)]!==0)return Tt}return-1},y1=new WeakSet,qw=function(g,et,ot,ct){const ut=g.length,dt=new Int32Array(ut);for(let Tt=0;Tt<ut;Tt++)dt[Tt]=g[Tt]<=ct?1:0;for(let Tt=1;Tt<ot-1;Tt++)dt[Tt*et]=dt[Tt*et+et-1]=0;for(let Tt=0;Tt<et;Tt++)dt[Tt]=dt[et*ot-1-Tt]=0;let ft=1,St;const kt=[];for(let Tt=1;Tt<ot-1;Tt++){St=1;for(let Rt=1;Rt<et-1;Rt++){const jt=Tt*et+Rt,$t=dt[jt];if($t===0)continue;let Ft=Tt,Ht=Rt;if($t===1&&dt[jt-1]===0)ft+=1,Ht-=1;else if($t>=1&&dt[jt+1]===0)ft+=1,Ht+=1,$t>1&&(St=$t);else{$t!==1&&(St=Math.abs($t));continue}const Kt=[Rt,Tt],Bt=Ht===Rt+1,Ut={isHole:Bt,points:Kt,id:ft,parent:0};kt.push(Ut);let Yt;for(const sn of kt)if(sn.id===St){Yt=sn;break}Yt?Yt.isHole?Ut.parent=Bt?Yt.parent:St:Ut.parent=Bt?St:Yt.parent:Ut.parent=Bt?St:0;const Jt=bn(this,$S,DT).call(this,dt,et,Tt,Rt,Ft,Ht,0);if(Jt===-1){dt[jt]=-ft,dt[jt]!==1&&(St=Math.abs(dt[jt]));continue}let Zt=zt(this,to)[2*Jt],en=zt(this,to)[2*Jt+1];const tn=Tt+Zt,nn=Rt+en;Ft=tn,Ht=nn;let ln=Tt,an=Rt;for(;;){const sn=bn(this,FS,IT).call(this,dt,et,ln,an,Ft,Ht,1);Zt=zt(this,to)[2*sn],en=zt(this,to)[2*sn+1];const dn=ln+Zt,mn=an+en;Kt.push(mn,dn);const yn=ln*et+an;if(dt[yn+1]===0?dt[yn]=-ft:dt[yn]===1&&(dt[yn]=ft),dn===Tt&&mn===Rt&&ln===tn&&an===nn){dt[jt]!==1&&(St=Math.abs(dt[jt]));break}else Ft=ln,Ht=an,ln=dn,an=mn}}}return kt},b0=new WeakSet,Q1=function(g,et,ot,ct){if(ot-et<=4){for(let tn=et;tn<ot-2;tn+=2)ct.push(g[tn],g[tn+1]);return}const ut=g[et],dt=g[et+1],ft=g[ot-4]-ut,St=g[ot-3]-dt,kt=Math.hypot(ft,St),Tt=ft/kt,Rt=St/kt,jt=Tt*dt-Rt*ut,$t=St/ft,Ft=1/kt,Ht=Math.atan($t),Kt=Math.cos(Ht),Bt=Math.sin(Ht),Ut=Ft*(Math.abs(Kt)+Math.abs(Bt)),Yt=Ft*(1-Ut+Ut**2),Jt=Math.max(Math.atan(Math.abs(Bt+Kt)*Yt),Math.atan(Math.abs(Bt-Kt)*Yt));let Zt=0,en=et;for(let tn=et+2;tn<ot-2;tn+=2){const nn=Math.abs(jt-Tt*g[tn+1]+Rt*g[tn]);nn>Zt&&(en=tn,Zt=nn)}Zt>(kt*Jt)**2?(bn(this,b0,Q1).call(this,g,et,en+2,ct),bn(this,b0,Q1).call(this,g,en,ot,ct)):ct.push(ut,dt)},BS=new WeakSet,LT=function(g){const et=[],ot=g.length;return bn(this,b0,Q1).call(this,g,0,ot,et),et.push(g[ot-2],g[ot-1]),et.length<=4?null:et},VS=new WeakSet,$T=function(g,et,ot,ct,ut,dt){const ft=new Float32Array(dt**2),St=-2*ct**2,kt=dt>>1;for(let Ht=0;Ht<dt;Ht++){const Kt=(Ht-kt)**2;for(let Bt=0;Bt<dt;Bt++)ft[Ht*dt+Bt]=Math.exp((Kt+(Bt-kt)**2)/St)}const Tt=new Float32Array(256),Rt=-2*ut**2;for(let Ht=0;Ht<256;Ht++)Tt[Ht]=Math.exp(Ht**2/Rt);const jt=g.length,$t=new Uint8Array(jt),Ft=new Uint32Array(256);for(let Ht=0;Ht<ot;Ht++)for(let Kt=0;Kt<et;Kt++){const Bt=Ht*et+Kt,Ut=g[Bt];let Yt=0,Jt=0;for(let en=0;en<dt;en++){const tn=Ht+en-kt;if(!(tn<0||tn>=ot))for(let nn=0;nn<dt;nn++){const ln=Kt+nn-kt;if(ln<0||ln>=et)continue;const an=g[tn*et+ln],sn=ft[en*dt+nn]*Tt[Math.abs(an-Ut)];Yt+=an*sn,Jt+=sn}}const Zt=$t[Bt]=Math.round(Yt/Jt);Ft[Zt]++}return[$t,Ft]},zS=new WeakSet,FT=function(g){const et=new Uint32Array(256);for(const ot of g)et[ot]++;return et},v1=new WeakSet,Kw=function(g){const et=g.length,ot=new Uint8ClampedArray(et>>2);let ct=-1/0,ut=1/0;for(let ft=0,St=ot.length;ft<St;ft++){const kt=ot[ft]=g[ft<<2];ct=Math.max(ct,kt),ut=Math.min(ut,kt)}const dt=255/(ct-ut);for(let ft=0,St=ot.length;ft<St;ft++)ot[ft]=(ot[ft]-ut)*dt;return ot},x1=new WeakSet,Yw=function(g){let et,ot=-1/0,ct=-1/0;const ut=g.findIndex(St=>St!==0);let dt=ut,ft=ut;for(et=ut;et<256;et++){const St=g[et];St>ot&&(et-dt>ct&&(ct=et-dt,ft=et-1),ot=St,dt=et)}for(et=ft-1;et>=0&&!(g[et]>g[et+1]);et--);return et},HS=new WeakSet,BT=function(g){const et=g,{width:ot,height:ct}=g,{maxDim:ut}=zt(this,gm);let dt=ot,ft=ct;if(ot>ut||ct>ut){let jt=ot,$t=ct,Ft=Math.log2(Math.max(ot,ct)/ut);const Ht=Math.floor(Ft);Ft=Ft===Ht?Ht-1:Ht;for(let Bt=0;Bt<Ft;Bt++){dt=Math.ceil(jt/2),ft=Math.ceil($t/2);const Ut=new OffscreenCanvas(dt,ft);Ut.getContext("2d").drawImage(g,0,0,jt,$t,0,0,dt,ft),jt=dt,$t=ft,g!==et&&g.close(),g=Ut.transferToImageBitmap()}const Kt=Math.min(ut/dt,ut/ft);dt=Math.round(dt*Kt),ft=Math.round(ft*Kt)}const kt=new OffscreenCanvas(dt,ft).getContext("2d",{willReadFrequently:!0});kt.fillStyle="white",kt.fillRect(0,0,dt,ft),kt.filter="grayscale(1)",kt.drawImage(g,0,0,g.width,g.height,0,0,dt,ft);const Tt=kt.getImageData(0,0,dt,ft).data;return[bn(this,v1,Kw).call(this,Tt),dt,ft]},cn(SignatureExtractor,g1),cn(SignatureExtractor,$S),cn(SignatureExtractor,FS),cn(SignatureExtractor,y1),cn(SignatureExtractor,b0),cn(SignatureExtractor,BS),cn(SignatureExtractor,VS),cn(SignatureExtractor,zS),cn(SignatureExtractor,v1),cn(SignatureExtractor,x1),cn(SignatureExtractor,HS),cn(SignatureExtractor,gm,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),cn(SignatureExtractor,to,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const g=new SignatureOptions;return g.updateAll(this),g}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(g){super(g),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const g=new DrawnSignatureOptions(this._viewParameters);return g.updateAll(this),g}}var ju,Do,Ou,ym;const hs=class hs extends DrawingEditor{constructor(et){super({...et,mustBeCommitted:!0,name:"signatureEditor"});cn(this,ju,!1);cn(this,Do,null);cn(this,Ou,null);cn(this,ym,null);this._willKeepAspectRatio=!0,fn(this,Ou,et.signatureData||null),fn(this,Do,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!zt(this,Do)}}static computeTelemetryFinalData(et){const ot=et.get("hasDescription");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let et,ot;const{_isCopy:ct}=this;if(ct&&(this._isCopy=!1,et=this.x,ot=this.y),super.render(),this._drawId===null)if(zt(this,Ou)){const{lines:ut,mustSmooth:dt,areContours:ft,description:St,uuid:kt,heightInPage:Tt}=zt(this,Ou),{rawDims:{pageWidth:Rt,pageHeight:jt},rotation:$t}=this.parent.viewport,Ft=SignatureExtractor.processDrawnLines({lines:ut,pageWidth:Rt,pageHeight:jt,rotation:$t,innerMargin:hs._INNER_MARGIN,mustSmooth:dt,areContours:ft});this.addSignature(Ft,Tt,St,kt)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:zt(this,Do)||""}));return ct&&(this._isCopy=!0,this._moveAfterPaste(et,ot)),this.div}setUuid(et){fn(this,ym,et),this.addEditToolbar()}getUuid(){return zt(this,ym)}get description(){return zt(this,Do)}set description(et){fn(this,Do,et),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:et})),super.addEditToolbar().then(ot=>{ot==null||ot.updateEditSignatureButton(et)}))}getSignaturePreview(){const{newCurves:et,areContours:ot,thickness:ct,width:ut,height:dt}=zt(this,Ou),ft=Math.max(ut,dt),St=SignatureExtractor.processDrawnLines({lines:{curves:et.map(kt=>({points:kt})),thickness:ct,width:ut,height:dt},pageWidth:ft,pageHeight:ft,rotation:0,innerMargin:0,mustSmooth:!1,areContours:ot});return{areContours:ot,outline:St.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(et,ot,ct,ut){const{x:dt,y:ft}=this,{outline:St}=fn(this,Ou,et);fn(this,ju,St instanceof ContourDrawOutline),this.description=ct;let kt;zt(this,ju)?kt=hs.getDefaultDrawingOptions():(kt=hs._defaultDrawnSignatureOptions.clone(),kt.updateProperties({"stroke-width":St.thickness})),this._addOutlines({drawOutlines:St,drawingOptions:kt});const[,Tt]=this.pageDimensions;let Rt=ot/Tt;Rt=Rt>=1?.5:Rt,this.width*=Rt/this.height,this.width>=1&&(Rt*=.9/this.width,this.width=.9),this.height=Rt,this.setDims(),this.x=dt,this.y=ft,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(ut),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!ut,hasDescription:!!ct}}),this.div.hidden=!1}getFromImage(et){const{rawDims:{pageWidth:ot,pageHeight:ct},rotation:ut}=this.parent.viewport;return SignatureExtractor.process(et,ot,ct,ut,hs._INNER_MARGIN)}getFromText(et,ot){const{rawDims:{pageWidth:ct,pageHeight:ut},rotation:dt}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(et,ot,ct,ut,dt,hs._INNER_MARGIN)}getDrawnSignature(et){const{rawDims:{pageWidth:ot,pageHeight:ct},rotation:ut}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:et,pageWidth:ot,pageHeight:ct,rotation:ut,innerMargin:hs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:et,thickness:ot}){et?this._drawingOptions=hs.getDefaultDrawingOptions():(this._drawingOptions=hs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":ot}))}serialize(et=!1){if(this.isEmpty())return null;const{lines:ot,points:ct}=this.serializeDraw(et),{_drawingOptions:{"stroke-width":ut}}=this,dt=Object.assign(super.serialize(et),{isSignature:!0,areContours:zt(this,ju),color:[0,0,0],thickness:zt(this,ju)?0:ut});return this.addComment(dt),et?(dt.paths={lines:ot,points:ct},dt.uuid=zt(this,ym),dt.isCopy=!0):dt.lines=ot,zt(this,Do)&&(dt.accessibilityData={type:"Figure",alt:zt(this,Do)}),dt}static deserializeDraw(et,ot,ct,ut,dt,ft){return ft.areContours?ContourDrawOutline.deserialize(et,ot,ct,ut,dt,ft):InkDrawOutline.deserialize(et,ot,ct,ut,dt,ft)}static async deserialize(et,ot,ct){var dt;const ut=await super.deserialize(et,ot,ct);return fn(ut,ju,et.areContours),ut.description=((dt=et.accessibilityData)==null?void 0:dt.alt)||"",fn(ut,ym,et.uuid),ut}};ju=new WeakMap,Do=new WeakMap,Ou=new WeakMap,ym=new WeakMap,jn(hs,"_type","signature"),jn(hs,"_editorType",AnnotationEditorType.SIGNATURE),jn(hs,"_defaultDrawingOptions",null);let SignatureEditor=hs;var mr,Or,Du,Dl,Iu,E0,Il,vm,Io,Rs,S0,xm,Y0,bm,X0,w0,_b,k0,eE,A0,tE,b1,Xw,T0,nE,US,VT;class StampEditor extends AnnotationEditor{constructor(et){super({...et,name:"stampEditor"});cn(this,xm);cn(this,bm);cn(this,w0);cn(this,k0);cn(this,A0);cn(this,b1);cn(this,T0);cn(this,US);cn(this,mr,null);cn(this,Or,null);cn(this,Du,null);cn(this,Dl,null);cn(this,Iu,null);cn(this,E0,"");cn(this,Il,null);cn(this,vm,!1);cn(this,Io,null);cn(this,Rs,!1);cn(this,S0,!1);fn(this,Dl,et.bitmapUrl),fn(this,Iu,et.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot)}static isHandlingMimeForPasting(et){return SupportedImageMimeTypes.includes(et)}static paste(et,ot){ot.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:et.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var et;return{type:"stamp",hasAltText:!!((et=this.altTextData)!=null&&et.altText)}}static computeTelemetryFinalData(et){const ot=et.get("hasAltText");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}async mlGuessAltText(et=null,ot=!0){if(this.hasAltTextData())return null;const{mlManager:ct}=this._uiManager;if(!ct)throw new Error("No ML.");if(!await ct.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:ut,width:dt,height:ft}=et||this.copyCanvas(null,null,!0).imageData,St=await ct.guess({name:"altText",request:{data:ut,width:dt,height:ft,channels:ut.length/(dt*ft)}});if(!St)throw new Error("No response from the AI service.");if(St.error)throw new Error("Error from the AI service.");if(St.cancel)return null;if(!St.output)throw new Error("No valid response from the AI service.");const kt=St.output;return await this.setGuessedAltText(kt),ot&&!this.hasAltTextData()&&(this.altTextData={alt:kt,decorative:!1}),kt}remove(){var et;zt(this,Or)&&(fn(this,mr,null),this._uiManager.imageManager.deleteId(zt(this,Or)),(et=zt(this,Il))==null||et.remove(),fn(this,Il,null),zt(this,Io)&&(clearTimeout(zt(this,Io)),fn(this,Io,null))),super.remove()}rebuild(){if(!this.parent){zt(this,Or)&&bn(this,w0,_b).call(this);return}super.rebuild(),this.div!==null&&(zt(this,Or)&&zt(this,Il)===null&&bn(this,w0,_b).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(et){this._isDraggable=!0,et&&this.div.focus()}isEmpty(){return!(zt(this,Du)||zt(this,mr)||zt(this,Dl)||zt(this,Iu)||zt(this,Or)||zt(this,vm))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let et,ot;return this._isCopy&&(et=this.x,ot=this.y),super.render(),this.div.hidden=!0,this.createAltText(),zt(this,vm)||(zt(this,mr)?bn(this,k0,eE).call(this):bn(this,w0,_b).call(this)),this._isCopy&&this._moveAfterPaste(et,ot),this._uiManager.addShouldRescale(this),this.div}setCanvas(et,ot){const{id:ct,bitmap:ut}=this._uiManager.imageManager.getFromCanvas(et,ot);ot.remove(),ct&&this._uiManager.imageManager.isValidId(ct)&&(fn(this,Or,ct),ut&&fn(this,mr,ut),fn(this,vm,!1),bn(this,k0,eE).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;zt(this,Io)!==null&&clearTimeout(zt(this,Io)),fn(this,Io,setTimeout(()=>{fn(this,Io,null),bn(this,b1,Xw).call(this)},200))}copyCanvas(et,ot,ct=!1){et||(et=224);const{width:ut,height:dt}=zt(this,mr),ft=new OutputScale;let St=zt(this,mr),kt=ut,Tt=dt,Rt=null;if(ot){if(ut>ot||dt>ot){const tn=Math.min(ot/ut,ot/dt);kt=Math.floor(ut*tn),Tt=Math.floor(dt*tn)}Rt=document.createElement("canvas");const $t=Rt.width=Math.ceil(kt*ft.sx),Ft=Rt.height=Math.ceil(Tt*ft.sy);zt(this,Rs)||(St=bn(this,A0,tE).call(this,$t,Ft));const Ht=Rt.getContext("2d");Ht.filter=this._uiManager.hcmFilter;let Kt="white",Bt="#cfcfd8";this._uiManager.hcmFilter!=="none"?Bt="black":ColorScheme.isDarkMode&&(Kt="#8f8f9d",Bt="#42414d");const Ut=15,Yt=Ut*ft.sx,Jt=Ut*ft.sy,Zt=new OffscreenCanvas(Yt*2,Jt*2),en=Zt.getContext("2d");en.fillStyle=Kt,en.fillRect(0,0,Yt*2,Jt*2),en.fillStyle=Bt,en.fillRect(0,0,Yt,Jt),en.fillRect(Yt,Jt,Yt,Jt),Ht.fillStyle=Ht.createPattern(Zt,"repeat"),Ht.fillRect(0,0,$t,Ft),Ht.drawImage(St,0,0,St.width,St.height,0,0,$t,Ft)}let jt=null;if(ct){let $t,Ft;if(ft.symmetric&&St.width<et&&St.height<et)$t=St.width,Ft=St.height;else if(St=zt(this,mr),ut>et||dt>et){const Bt=Math.min(et/ut,et/dt);$t=Math.floor(ut*Bt),Ft=Math.floor(dt*Bt),zt(this,Rs)||(St=bn(this,A0,tE).call(this,$t,Ft))}const Kt=new OffscreenCanvas($t,Ft).getContext("2d",{willReadFrequently:!0});Kt.drawImage(St,0,0,St.width,St.height,0,0,$t,Ft),jt={width:$t,height:Ft,data:Kt.getImageData(0,0,$t,Ft).data}}return{canvas:Rt,width:kt,height:Tt,imageData:jt}}static async deserialize(et,ot,ct){var Kt;let ut=null,dt=!1;if(et instanceof StampAnnotationElement){const{data:{rect:Bt,rotation:Ut,id:Yt,structParent:Jt,popupRef:Zt,richText:en,contentsObj:tn,creationDate:nn,modificationDate:ln},container:an,parent:{page:{pageNumber:sn}},canvas:dn}=et;let mn,yn;dn?(delete et.canvas,{id:mn,bitmap:yn}=ct.imageManager.getFromCanvas(an.id,dn),dn.remove()):(dt=!0,et._hasNoCanvas=!0);const vn=((Kt=await ot._structTree.getAriaAttributes(`${AnnotationPrefix}${Yt}`))==null?void 0:Kt.get("aria-label"))||"";ut=et={annotationType:AnnotationEditorType.STAMP,bitmapId:mn,bitmap:yn,pageIndex:sn-1,rect:Bt.slice(0),rotation:Ut,annotationElementId:Yt,id:Yt,deleted:!1,accessibilityData:{decorative:!1,altText:vn},isSvg:!1,structParent:Jt,popupRef:Zt,richText:en,comment:(tn==null?void 0:tn.str)||null,creationDate:nn,modificationDate:ln}}const ft=await super.deserialize(et,ot,ct),{rect:St,bitmap:kt,bitmapUrl:Tt,bitmapId:Rt,isSvg:jt,accessibilityData:$t}=et;dt?(ct.addMissingCanvas(et.id,ft),fn(ft,vm,!0)):Rt&&ct.imageManager.isValidId(Rt)?(fn(ft,Or,Rt),kt&&fn(ft,mr,kt)):fn(ft,Dl,Tt),fn(ft,Rs,jt);const[Ft,Ht]=ft.pageDimensions;return ft.width=(St[2]-St[0])/Ft,ft.height=(St[3]-St[1])/Ht,$t&&(ft.altTextData=$t),ft._initialData=ut,et.comment&&ft.setCommentData(et),fn(ft,S0,!!ut),ft}serialize(et=!1,ot=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ct=Object.assign(super.serialize(et),{bitmapId:zt(this,Or),isSvg:zt(this,Rs)});if(this.addComment(ct),et)return ct.bitmapUrl=bn(this,T0,nE).call(this,!0),ct.accessibilityData=this.serializeAltText(!0),ct.isCopy=!0,ct;const{decorative:ut,altText:dt}=this.serializeAltText(!1);if(!ut&&dt&&(ct.accessibilityData={type:"Figure",alt:dt}),this.annotationElementId){const St=bn(this,US,VT).call(this,ct);return St.isSame?null:(St.isSameAltText?delete ct.accessibilityData:ct.accessibilityData.structParent=this._initialData.structParent??-1,ct.id=this.annotationElementId,delete ct.bitmapId,ct)}if(ot===null)return ct;ot.stamps||(ot.stamps=new Map);const ft=zt(this,Rs)?(ct.rect[2]-ct.rect[0])*(ct.rect[3]-ct.rect[1]):null;if(!ot.stamps.has(zt(this,Or)))ot.stamps.set(zt(this,Or),{area:ft,serialized:ct}),ct.bitmap=bn(this,T0,nE).call(this,!1);else if(zt(this,Rs)){const St=ot.stamps.get(zt(this,Or));ft>St.area&&(St.area=ft,St.serialized.bitmap.close(),St.serialized.bitmap=bn(this,T0,nE).call(this,!1))}return ct}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}mr=new WeakMap,Or=new WeakMap,Du=new WeakMap,Dl=new WeakMap,Iu=new WeakMap,E0=new WeakMap,Il=new WeakMap,vm=new WeakMap,Io=new WeakMap,Rs=new WeakMap,S0=new WeakMap,xm=new WeakSet,Y0=function(et,ot=!1){if(!et){this.remove();return}fn(this,mr,et.bitmap),ot||(fn(this,Or,et.id),fn(this,Rs,et.isSvg)),et.file&&fn(this,E0,et.file.name),bn(this,k0,eE).call(this)},bm=new WeakSet,X0=function(){if(fn(this,Du,null),this._uiManager.enableWaiting(!1),!!zt(this,Il)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&zt(this,mr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&zt(this,mr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},w0=new WeakSet,_b=function(){if(zt(this,Or)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(zt(this,Or)).then(ct=>bn(this,xm,Y0).call(this,ct,!0)).finally(()=>bn(this,bm,X0).call(this));return}if(zt(this,Dl)){const ct=zt(this,Dl);fn(this,Dl,null),this._uiManager.enableWaiting(!0),fn(this,Du,this._uiManager.imageManager.getFromUrl(ct).then(ut=>bn(this,xm,Y0).call(this,ut)).finally(()=>bn(this,bm,X0).call(this)));return}if(zt(this,Iu)){const ct=zt(this,Iu);fn(this,Iu,null),this._uiManager.enableWaiting(!0),fn(this,Du,this._uiManager.imageManager.getFromFile(ct).then(ut=>bn(this,xm,Y0).call(this,ut)).finally(()=>bn(this,bm,X0).call(this)));return}const et=document.createElement("input");et.type="file",et.accept=SupportedImageMimeTypes.join(",");const ot=this._uiManager._signal;fn(this,Du,new Promise(ct=>{et.addEventListener("change",async()=>{if(!et.files||et.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ut=await this._uiManager.imageManager.getFromFile(et.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),bn(this,xm,Y0).call(this,ut)}ct()},{signal:ot}),et.addEventListener("cancel",()=>{this.remove(),ct()},{signal:ot})}).finally(()=>bn(this,bm,X0).call(this))),et.click()},k0=new WeakSet,eE=function(){var kt;const{div:et}=this;let{width:ot,height:ct}=zt(this,mr);const[ut,dt]=this.pageDimensions,ft=.75;if(this.width)ot=this.width*ut,ct=this.height*dt;else if(ot>ft*ut||ct>ft*dt){const Tt=Math.min(ft*ut/ot,ft*dt/ct);ot*=Tt,ct*=Tt}this._uiManager.enableWaiting(!1);const St=fn(this,Il,document.createElement("canvas"));St.setAttribute("role","img"),this.addContainer(St),this.width=ot/ut,this.height=ct/dt,this.setDims(),(kt=this._initialOptions)!=null&&kt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(et.hidden=!1),bn(this,b1,Xw).call(this),zt(this,S0)||(this.parent.addUndoableEditor(this),fn(this,S0,!0)),this._reportTelemetry({action:"inserted_image"}),zt(this,E0)&&this.div.setAttribute("aria-description",zt(this,E0)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},A0=new WeakSet,tE=function(et,ot){const{width:ct,height:ut}=zt(this,mr);let dt=ct,ft=ut,St=zt(this,mr);for(;dt>2*et||ft>2*ot;){const kt=dt,Tt=ft;dt>2*et&&(dt=dt>=16384?Math.floor(dt/2)-1:Math.ceil(dt/2)),ft>2*ot&&(ft=ft>=16384?Math.floor(ft/2)-1:Math.ceil(ft/2));const Rt=new OffscreenCanvas(dt,ft);Rt.getContext("2d").drawImage(St,0,0,kt,Tt,0,0,dt,ft),St=Rt.transferToImageBitmap()}return St},b1=new WeakSet,Xw=function(){const[et,ot]=this.parentDimensions,{width:ct,height:ut}=this,dt=new OutputScale,ft=Math.ceil(ct*et*dt.sx),St=Math.ceil(ut*ot*dt.sy),kt=zt(this,Il);if(!kt||kt.width===ft&&kt.height===St)return;kt.width=ft,kt.height=St;const Tt=zt(this,Rs)?zt(this,mr):bn(this,A0,tE).call(this,ft,St),Rt=kt.getContext("2d");Rt.filter=this._uiManager.hcmFilter,Rt.drawImage(Tt,0,0,Tt.width,Tt.height,0,0,ft,St)},T0=new WeakSet,nE=function(et){if(et){if(zt(this,Rs)){const ut=this._uiManager.imageManager.getSvgUrl(zt(this,Or));if(ut)return ut}const ot=document.createElement("canvas");return{width:ot.width,height:ot.height}=zt(this,mr),ot.getContext("2d").drawImage(zt(this,mr),0,0),ot.toDataURL()}if(zt(this,Rs)){const[ot,ct]=this.pageDimensions,ut=Math.round(this.width*ot*PixelsPerInch.PDF_TO_CSS_UNITS),dt=Math.round(this.height*ct*PixelsPerInch.PDF_TO_CSS_UNITS),ft=new OffscreenCanvas(ut,dt);return ft.getContext("2d").drawImage(zt(this,mr),0,0,zt(this,mr).width,zt(this,mr).height,0,0,ut,dt),ft.transferToImageBitmap()}return structuredClone(zt(this,mr))},US=new WeakSet,VT=function(et){var ft;const{pageIndex:ot,accessibilityData:{altText:ct}}=this._initialData,ut=et.pageIndex===ot,dt=(((ft=et.accessibilityData)==null?void 0:ft.alt)||"")===ct;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&ut&&dt,isSameAltText:dt}},jn(StampEditor,"_type","stamp"),jn(StampEditor,"_editorType",AnnotationEditorType.STAMP);var Em,C0,Lu,$u,Ll,us,Fu,_0,R0,oo,$l,Dr,Fl,Bu,P0,Bn,Vu,E1,Jw,GS,zT,Vs,uo,S1,Zw,w1,Qw,M0,rE;const Hs=class Hs{constructor({uiManager:g,pageIndex:et,div:ot,structTreeLayer:ct,accessibilityManager:ut,annotationLayer:dt,drawLayer:ft,textLayer:St,viewport:kt,l10n:Tt}){cn(this,E1);cn(this,GS);cn(this,Vs);cn(this,S1);cn(this,w1);cn(this,M0);cn(this,Em,void 0);cn(this,C0,!1);cn(this,Lu,null);cn(this,$u,null);cn(this,Ll,null);cn(this,us,new Map);cn(this,Fu,!1);cn(this,_0,!1);cn(this,R0,!1);cn(this,oo,null);cn(this,$l,null);cn(this,Dr,null);cn(this,Fl,null);cn(this,Bu,null);cn(this,P0,-1);cn(this,Bn,void 0);const Rt=[...zt(Hs,Vu).values()];if(!Hs._initialized){Hs._initialized=!0;for(const jt of Rt)jt.initialize(Tt,g)}g.registerEditorTypes(Rt),fn(this,Bn,g),this.pageIndex=et,this.div=ot,fn(this,Em,ut),fn(this,Lu,dt),this.viewport=kt,fn(this,Dr,St),this.drawLayer=ft,this._structTree=ct,zt(this,Bn).addLayer(this)}get isEmpty(){return zt(this,us).size===0}get isInvisible(){return this.isEmpty&&zt(this,Bn).getMode()===AnnotationEditorType.NONE}updateToolbar(g){zt(this,Bn).updateToolbar(g)}updateMode(g=zt(this,Bn).getMode()){switch(bn(this,M0,rE).call(this),g){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:et}=this.div;if(et.toggle("nonEditing",!1),g===AnnotationEditorType.POPUP)et.toggle("commentEditing",!0);else{et.toggle("commentEditing",!1);for(const ot of zt(Hs,Vu).values())et.toggle(`${ot._type}Editing`,g===ot._editorType)}this.div.hidden=!1}hasTextLayer(g){var et;return g===((et=zt(this,Dr))==null?void 0:et.div)}setEditingState(g){zt(this,Bn).setEditingState(g)}addCommands(g){zt(this,Bn).addCommands(g)}cleanUndoStack(g){zt(this,Bn).cleanUndoStack(g)}toggleDrawing(g=!1){this.div.classList.toggle("drawing",!g)}togglePointerEvents(g=!1){this.div.classList.toggle("disabled",!g)}toggleAnnotationLayerPointerEvents(g=!1){var et;(et=zt(this,Lu))==null||et.div.classList.toggle("disabled",!g)}async enable(){var ot;fn(this,R0,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(ot=zt(this,Bu))==null||ot.abort(),fn(this,Bu,null);const g=new Set;for(const ct of zt(this,E1,Jw))ct.enableEditing(),ct.show(!0),ct.annotationElementId&&(zt(this,Bn).removeChangedExistingAnnotation(ct),g.add(ct.annotationElementId));const et=zt(this,Lu);if(et)for(const ct of et.getEditableAnnotations()){if(ct.hide(),zt(this,Bn).isDeletedAnnotationElement(ct.data.id)||g.has(ct.data.id))continue;const ut=await this.deserialize(ct);ut&&(this.addOrRebuild(ut),ut.enableEditing())}fn(this,R0,!1),zt(this,Bn)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var ot;if(fn(this,_0,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),zt(this,Dr)&&!zt(this,Bu)){fn(this,Bu,new AbortController);const ct=zt(this,Bn).combinedSignal(zt(this,Bu));zt(this,Dr).div.addEventListener("pointerdown",ut=>{const{clientX:ft,clientY:St,timeStamp:kt}=ut,Tt=zt(this,P0);if(kt-Tt>500){fn(this,P0,kt);return}fn(this,P0,-1);const{classList:Rt}=this.div;Rt.toggle("getElements",!0);const jt=document.elementsFromPoint(ft,St);if(Rt.toggle("getElements",!1),!this.div.contains(jt[0]))return;let $t;const Ft=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const Kt of jt)if(Ft.test(Kt.id)){$t=Kt.id;break}if(!$t)return;const Ht=zt(this,us).get($t);(Ht==null?void 0:Ht.annotationElementId)===null&&(ut.stopPropagation(),ut.preventDefault(),Ht.dblclick(ut))},{signal:ct,capture:!0})}const g=zt(this,Lu);if(g){const ct=new Map,ut=new Map;for(const ft of zt(this,E1,Jw)){if(ft.disableEditing(),!ft.annotationElementId){ft.updateFakeAnnotationElement(g);continue}if(ft.serialize()!==null){ct.set(ft.annotationElementId,ft);continue}else ut.set(ft.annotationElementId,ft);(ot=this.getEditableAnnotation(ft.annotationElementId))==null||ot.show(),ft.remove()}const dt=g.getEditableAnnotations();for(const ft of dt){const{id:St}=ft.data;if(zt(this,Bn).isDeletedAnnotationElement(St)){ft.updateEdited({deleted:!0});continue}let kt=ut.get(St);if(kt){kt.resetAnnotationElement(ft),kt.show(!1),ft.show();continue}kt=ct.get(St),kt&&(zt(this,Bn).addChangedExistingAnnotation(kt),kt.renderAnnotationElement(ft)&&kt.show(!1)),ft.show()}}bn(this,M0,rE).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:et}=this.div;for(const ct of zt(Hs,Vu).values())et.remove(`${ct._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),fn(this,_0,!1)}getEditableAnnotation(g){var et;return((et=zt(this,Lu))==null?void 0:et.getEditableAnnotation(g))||null}setActiveEditor(g){zt(this,Bn).getActive()!==g&&zt(this,Bn).setActiveEditor(g)}enableTextSelection(){var g;if(this.div.tabIndex=-1,(g=zt(this,Dr))!=null&&g.div&&!zt(this,Fl)){fn(this,Fl,new AbortController);const et=zt(this,Bn).combinedSignal(zt(this,Fl));zt(this,Dr).div.addEventListener("pointerdown",bn(this,GS,zT).bind(this),{signal:et}),zt(this,Dr).div.classList.add("highlighting")}}disableTextSelection(){var g;this.div.tabIndex=0,(g=zt(this,Dr))!=null&&g.div&&zt(this,Fl)&&(zt(this,Fl).abort(),fn(this,Fl,null),zt(this,Dr).div.classList.remove("highlighting"))}enableClick(){if(zt(this,$u))return;fn(this,$u,new AbortController);const g=zt(this,Bn).combinedSignal(zt(this,$u));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:g});const et=this.pointerup.bind(this);this.div.addEventListener("pointerup",et,{signal:g}),this.div.addEventListener("pointercancel",et,{signal:g})}disableClick(){var g;(g=zt(this,$u))==null||g.abort(),fn(this,$u,null)}attach(g){zt(this,us).set(g.id,g);const{annotationElementId:et}=g;et&&zt(this,Bn).isDeletedAnnotationElement(et)&&zt(this,Bn).removeDeletedAnnotationElement(g)}detach(g){var et;zt(this,us).delete(g.id),(et=zt(this,Em))==null||et.removePointerInTextLayer(g.contentDiv),!zt(this,_0)&&g.annotationElementId&&zt(this,Bn).addDeletedAnnotationElement(g)}remove(g){this.detach(g),zt(this,Bn).removeEditor(g),g.div.remove(),g.isAttachedToDOM=!1}changeParent(g){var et;g.parent!==this&&(g.parent&&g.annotationElementId&&(zt(this,Bn).addDeletedAnnotationElement(g.annotationElementId),AnnotationEditor.deleteAnnotationElement(g),g.annotationElementId=null),this.attach(g),(et=g.parent)==null||et.detach(g),g.setParent(this),g.div&&g.isAttachedToDOM&&(g.div.remove(),this.div.append(g.div)))}add(g){if(!(g.parent===this&&g.isAttachedToDOM)){if(this.changeParent(g),zt(this,Bn).addEditor(g),this.attach(g),!g.isAttachedToDOM){const et=g.render();this.div.append(et),g.isAttachedToDOM=!0}g.fixAndSetPosition(),g.onceAdded(!zt(this,R0)),zt(this,Bn).addToAnnotationStorage(g),g._reportTelemetry(g.telemetryInitialData)}}moveEditorInDOM(g){var ot;if(!g.isAttachedToDOM)return;const{activeElement:et}=document;g.div.contains(et)&&!zt(this,Ll)&&(g._focusEventsAllowed=!1,fn(this,Ll,setTimeout(()=>{fn(this,Ll,null),g.div.contains(document.activeElement)?g._focusEventsAllowed=!0:(g.div.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:zt(this,Bn)._signal}),et.focus())},0))),g._structTreeParentId=(ot=zt(this,Em))==null?void 0:ot.moveElementInDOM(this.div,g.div,g.contentDiv,!0)}addOrRebuild(g){g.needsToBeRebuilt()?(g.parent||(g.parent=this),g.rebuild(),g.show()):this.add(g)}addUndoableEditor(g){const et=()=>g._uiManager.rebuild(g),ot=()=>{g.remove()};this.addCommands({cmd:et,undo:ot,mustExec:!1})}getEditorByUID(g){for(const et of zt(this,us).values())if(et.uid===g)return et;return null}getNextId(){return zt(this,Bn).getId()}combinedSignal(g){return zt(this,Bn).combinedSignal(g)}canCreateNewEmptyEditor(){var g;return(g=zt(this,Vs,uo))==null?void 0:g.canCreateNewEmptyEditor()}async pasteEditor(g,et){this.updateToolbar(g),await zt(this,Bn).updateMode(g.mode);const{offsetX:ot,offsetY:ct}=bn(this,w1,Qw).call(this),ut=this.getNextId(),dt=bn(this,S1,Zw).call(this,{parent:this,id:ut,x:ot,y:ct,uiManager:zt(this,Bn),isCentered:!0,...et});dt&&this.add(dt)}async deserialize(g){var et;return await((et=zt(Hs,Vu).get(g.annotationType??g.annotationEditorType))==null?void 0:et.deserialize(g,this,zt(this,Bn)))||null}createAndAddNewEditor(g,et,ot={}){const ct=this.getNextId(),ut=bn(this,S1,Zw).call(this,{parent:this,id:ct,x:g.offsetX,y:g.offsetY,uiManager:zt(this,Bn),isCentered:et,...ot});return ut&&this.add(ut),ut}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(g={}){this.createAndAddNewEditor(bn(this,w1,Qw).call(this),!0,g)}setSelected(g){zt(this,Bn).setSelected(g)}toggleSelected(g){zt(this,Bn).toggleSelected(g)}unselect(g){zt(this,Bn).unselect(g)}pointerup(g){var ct;const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div||!zt(this,Fu)||(fn(this,Fu,!1),(ct=zt(this,Vs,uo))!=null&&ct.isDrawer&&zt(this,Vs,uo).supportMultipleDrawings))return;if(!zt(this,C0)){fn(this,C0,!0);return}const ot=zt(this,Bn).getMode();if(ot===AnnotationEditorType.STAMP||ot===AnnotationEditorType.SIGNATURE){zt(this,Bn).unselectAll();return}this.createAndAddNewEditor(g,!1)}pointerdown(g){var ct;if(zt(this,Bn).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),zt(this,Fu)){fn(this,Fu,!1);return}const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div)return;if(fn(this,Fu,!0),(ct=zt(this,Vs,uo))!=null&&ct.isDrawer){this.startDrawingSession(g);return}const ot=zt(this,Bn).getActive();fn(this,C0,!ot||ot.isEmpty())}startDrawingSession(g){if(this.div.focus({preventScroll:!0}),zt(this,oo)){zt(this,Vs,uo).startDrawing(this,zt(this,Bn),!1,g);return}zt(this,Bn).setCurrentDrawingSession(this),fn(this,oo,new AbortController);const et=zt(this,Bn).combinedSignal(zt(this,oo));this.div.addEventListener("blur",({relatedTarget:ot})=>{ot&&!this.div.contains(ot)&&(fn(this,$l,null),this.commitOrRemove())},{signal:et}),zt(this,Vs,uo).startDrawing(this,zt(this,Bn),!1,g)}pause(g){if(g){const{activeElement:et}=document;this.div.contains(et)&&fn(this,$l,et);return}zt(this,$l)&&setTimeout(()=>{var et;(et=zt(this,$l))==null||et.focus(),fn(this,$l,null)},0)}endDrawingSession(g=!1){return zt(this,oo)?(zt(this,Bn).setCurrentDrawingSession(null),zt(this,oo).abort(),fn(this,oo,null),fn(this,$l,null),zt(this,Vs,uo).endDrawing(g)):null}findNewParent(g,et,ot){const ct=zt(this,Bn).findParent(et,ot);return ct===null||ct===this?!1:(ct.changeParent(g),!0)}commitOrRemove(){return zt(this,oo)?(this.endDrawingSession(),!0):!1}onScaleChanging(){zt(this,oo)&&zt(this,Vs,uo).onScaleChangingWhenDrawing(this)}destroy(){var g,et;this.commitOrRemove(),((g=zt(this,Bn).getActive())==null?void 0:g.parent)===this&&(zt(this,Bn).commitOrRemove(),zt(this,Bn).setActiveEditor(null)),zt(this,Ll)&&(clearTimeout(zt(this,Ll)),fn(this,Ll,null));for(const ot of zt(this,us).values())(et=zt(this,Em))==null||et.removePointerInTextLayer(ot.contentDiv),ot.setParent(null),ot.isAttachedToDOM=!1,ot.div.remove();this.div=null,zt(this,us).clear(),zt(this,Bn).removeLayer(this)}render({viewport:g}){this.viewport=g,setLayerDimensions(this.div,g);for(const et of zt(this,Bn).getEditors(this.pageIndex))this.add(et),et.rebuild();this.updateMode()}update({viewport:g}){zt(this,Bn).commitOrRemove(),bn(this,M0,rE).call(this);const et=this.viewport.rotation,ot=g.rotation;if(this.viewport=g,setLayerDimensions(this.div,{rotation:ot}),et!==ot)for(const ct of zt(this,us).values())ct.rotate(ot)}get pageDimensions(){const{pageWidth:g,pageHeight:et}=this.viewport.rawDims;return[g,et]}get scale(){return zt(this,Bn).viewParameters.realScale}};Em=new WeakMap,C0=new WeakMap,Lu=new WeakMap,$u=new WeakMap,Ll=new WeakMap,us=new WeakMap,Fu=new WeakMap,_0=new WeakMap,R0=new WeakMap,oo=new WeakMap,$l=new WeakMap,Dr=new WeakMap,Fl=new WeakMap,Bu=new WeakMap,P0=new WeakMap,Bn=new WeakMap,Vu=new WeakMap,E1=new WeakSet,Jw=function(){return zt(this,us).size!==0?zt(this,us).values():zt(this,Bn).getEditors(this.pageIndex)},GS=new WeakSet,zT=function(g){zt(this,Bn).unselectAll();const{target:et}=g;if(et===zt(this,Dr).div||(et.getAttribute("role")==="img"||et.classList.contains("endOfContent"))&&zt(this,Dr).div.contains(et)){const{isMac:ot}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&ot)return;zt(this,Bn).showAllEditors("highlight",!0,!0),zt(this,Dr).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,zt(this,Bn).direction==="ltr",{target:zt(this,Dr).div,x:g.x,y:g.y}),zt(this,Dr).div.addEventListener("pointerup",()=>{zt(this,Dr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:zt(this,Bn)._signal}),g.preventDefault()}},Vs=new WeakSet,uo=function(){return zt(Hs,Vu).get(zt(this,Bn).getMode())},S1=new WeakSet,Zw=function(g){const et=zt(this,Vs,uo);return et?new et.prototype.constructor(g):null},w1=new WeakSet,Qw=function(){const{x:g,y:et,width:ot,height:ct}=this.boundingClientRect,ut=Math.max(0,g),dt=Math.max(0,et),ft=Math.min(window.innerWidth,g+ot),St=Math.min(window.innerHeight,et+ct),kt=(ut+ft)/2-g,Tt=(dt+St)/2-et,[Rt,jt]=this.viewport.rotation%180===0?[kt,Tt]:[Tt,kt];return{offsetX:Rt,offsetY:jt}},M0=new WeakSet,rE=function(){for(const g of zt(this,us).values())g.isEmpty()&&g.remove()},jn(Hs,"_initialized",!1),cn(Hs,Vu,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(g=>[g._editorType,g])));let AnnotationEditorLayer=Hs;var co,_i,Sm,k1,qS,HT,A1,_k,KS,UT,T1,eA;const Ar=class Ar{constructor({pageIndex:g}){cn(this,A1);cn(this,KS);cn(this,T1);cn(this,co,null);cn(this,_i,new Map);cn(this,Sm,new Map);this.pageIndex=g}setParent(g){if(!zt(this,co)){fn(this,co,g);return}if(zt(this,co)!==g){if(zt(this,_i).size>0)for(const et of zt(this,_i).values())et.remove(),g.append(et);fn(this,co,g)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(g,et=!1,ot=!1){const ct=kr(Ar,k1)._++,ut=bn(this,A1,_k).call(this),dt=Ar._svgFactory.createElement("defs");ut.append(dt);const ft=Ar._svgFactory.createElement("path");dt.append(ft);const St=`path_p${this.pageIndex}_${ct}`;ft.setAttribute("id",St),ft.setAttribute("vector-effect","non-scaling-stroke"),et&&zt(this,Sm).set(ct,ft);const kt=ot?bn(this,KS,UT).call(this,dt,St):null,Tt=Ar._svgFactory.createElement("use");return ut.append(Tt),Tt.setAttribute("href",`#${St}`),this.updateProperties(ut,g),zt(this,_i).set(ct,ut),{id:ct,clipPathId:`url(#${kt})`}}drawOutline(g,et){const ot=kr(Ar,k1)._++,ct=bn(this,A1,_k).call(this),ut=Ar._svgFactory.createElement("defs");ct.append(ut);const dt=Ar._svgFactory.createElement("path");ut.append(dt);const ft=`path_p${this.pageIndex}_${ot}`;dt.setAttribute("id",ft),dt.setAttribute("vector-effect","non-scaling-stroke");let St;if(et){const Rt=Ar._svgFactory.createElement("mask");ut.append(Rt),St=`mask_p${this.pageIndex}_${ot}`,Rt.setAttribute("id",St),Rt.setAttribute("maskUnits","objectBoundingBox");const jt=Ar._svgFactory.createElement("rect");Rt.append(jt),jt.setAttribute("width","1"),jt.setAttribute("height","1"),jt.setAttribute("fill","white");const $t=Ar._svgFactory.createElement("use");Rt.append($t),$t.setAttribute("href",`#${ft}`),$t.setAttribute("stroke","none"),$t.setAttribute("fill","black"),$t.setAttribute("fill-rule","nonzero"),$t.classList.add("mask")}const kt=Ar._svgFactory.createElement("use");ct.append(kt),kt.setAttribute("href",`#${ft}`),St&&kt.setAttribute("mask",`url(#${St})`);const Tt=kt.cloneNode();return ct.append(Tt),kt.classList.add("mainOutline"),Tt.classList.add("secondaryOutline"),this.updateProperties(ct,g),zt(this,_i).set(ot,ct),ot}finalizeDraw(g,et){zt(this,Sm).delete(g),this.updateProperties(g,et)}updateProperties(g,et){var St;if(!et)return;const{root:ot,bbox:ct,rootClass:ut,path:dt}=et,ft=typeof g=="number"?zt(this,_i).get(g):g;if(ft){if(ot&&bn(this,T1,eA).call(this,ft,ot),ct&&bn(St=Ar,qS,HT).call(St,ft,ct),ut){const{classList:kt}=ft;for(const[Tt,Rt]of Object.entries(ut))kt.toggle(Tt,Rt)}if(dt){const Tt=ft.firstChild.firstChild;bn(this,T1,eA).call(this,Tt,dt)}}}updateParent(g,et){if(et===this)return;const ot=zt(this,_i).get(g);ot&&(zt(et,co).append(ot),zt(this,_i).delete(g),zt(et,_i).set(g,ot))}remove(g){zt(this,Sm).delete(g),zt(this,co)!==null&&(zt(this,_i).get(g).remove(),zt(this,_i).delete(g))}destroy(){fn(this,co,null);for(const g of zt(this,_i).values())g.remove();zt(this,_i).clear(),zt(this,Sm).clear()}};co=new WeakMap,_i=new WeakMap,Sm=new WeakMap,k1=new WeakMap,qS=new WeakSet,HT=function(g,[et,ot,ct,ut]){const{style:dt}=g;dt.top=`${100*ot}%`,dt.left=`${100*et}%`,dt.width=`${100*ct}%`,dt.height=`${100*ut}%`},A1=new WeakSet,_k=function(){const g=Ar._svgFactory.create(1,1,!0);return zt(this,co).append(g),g.setAttribute("aria-hidden",!0),g},KS=new WeakSet,UT=function(g,et){const ot=Ar._svgFactory.createElement("clipPath");g.append(ot);const ct=`clip_${et}`;ot.setAttribute("id",ct),ot.setAttribute("clipPathUnits","objectBoundingBox");const ut=Ar._svgFactory.createElement("use");return ot.append(ut),ut.setAttribute("href",`#${et}`),ut.classList.add("clip"),ct},T1=new WeakSet,eA=function(g,et){for(const[ot,ct]of Object.entries(et))ct===null?g.removeAttribute(ot):g.setAttribute(ot,ct)},cn(Ar,qS),cn(Ar,k1,0);let DrawLayer=Ar;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$2,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$2,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));var has=Object.prototype.hasOwnProperty;function find(it,g,et){for(et of it.keys())if(dequal(et,g))return et}function dequal(it,g){var et,ot,ct;if(it===g)return!0;if(it&&g&&(et=it.constructor)===g.constructor){if(et===Date)return it.getTime()===g.getTime();if(et===RegExp)return it.toString()===g.toString();if(et===Array){if((ot=it.length)===g.length)for(;ot--&&dequal(it[ot],g[ot]););return ot===-1}if(et===Set){if(it.size!==g.size)return!1;for(ot of it)if(ct=ot,ct&&typeof ct=="object"&&(ct=find(g,ct),!ct)||!g.has(ct))return!1;return!0}if(et===Map){if(it.size!==g.size)return!1;for(ot of it)if(ct=ot[0],ct&&typeof ct=="object"&&(ct=find(g,ct),!ct)||!dequal(ot[1],g.get(ct)))return!1;return!0}if(et===ArrayBuffer)it=new Uint8Array(it),g=new Uint8Array(g);else if(et===DataView){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it.getInt8(ot)===g.getInt8(ot););return ot===-1}if(ArrayBuffer.isView(it)){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it[ot]===g[ot];);return ot===-1}if(!et||typeof it=="object"){ot=0;for(et in it)if(has.call(it,et)&&++ot&&!has.call(g,et)||!(et in g)||!dequal(it[et],g[et]))return!1;return Object.keys(g).length===ot}}return it!==it&&g!==g}function makeCancellablePromise(it){let g=!1;return{promise:new Promise((ot,ct)=>{it.then(ut=>!g&&ot(ut)).catch(ut=>!g&&ct(ut))}),cancel(){g=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(it,g){const et={};for(const ot of allEvents){const ct=it[ot];ct&&(g?et[ot]=ut=>ct(ut,g(ot)):et[ot]=ct)}return et}var isProduction=!0,prefix="Invariant failed";function invariant(it,g){if(!it){if(isProduction)throw new Error(prefix);var et=typeof g=="function"?g():g,ot=et?"".concat(prefix,": ").concat(et):prefix;throw new Error(ot)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),documentContext=reactExports.createContext(null),DocumentContext=documentContext,DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(g){this.pdfDocument=g}setViewer(g){this.pdfViewer=g}setExternalLinkRel(g){this.externalLinkRel=g}setExternalLinkTarget(g){this.externalLinkTarget=g}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(g){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=g}get rotation(){return 0}set rotation(g){}addLinkAttributes(g,et,ot){g.href=et,g.rel=this.externalLinkRel||DEFAULT_LINK_REL,g.target=ot?"_blank":this.externalLinkTarget||""}goToDestination(g){return new Promise(et=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(g,"Destination is not specified."),typeof g=="string"?this.pdfDocument.getDestination(g).then(et):Array.isArray(g)?et(g):g.then(et)}).then(et=>{invariant(Array.isArray(et),`"${et}" is not a valid destination array.`);const ot=et[0];new Promise(ct=>{invariant(this.pdfDocument,"PDF document not loaded."),ot instanceof Object?this.pdfDocument.getPageIndex(ot).then(ut=>{ct(ut)}).catch(()=>{invariant(!1,`"${ot}" is not a valid page reference.`)}):typeof ot=="number"?ct(ot):invariant(!1,`"${ot}" is not a valid destination reference.`)}).then(ct=>{const ut=ct+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(ut>=1&&ut<=this.pagesCount,`"${ut}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:et,pageIndex:ct,pageNumber:ut})})})}goToPage(g){const et=g-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(g>=1&&g<=this.pagesCount,`"${g}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:et,pageNumber:g})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(g){this.goToDestination(g)}}function Message({children:it,type:g}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${g}`,children:it})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses;function reducer(it,g){switch(g.type){case"RESOLVE":return{value:g.value,error:void 0};case"REJECT":return{value:!1,error:g.error};case"RESET":return{value:void 0,error:void 0};default:return it}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(it){return typeof it<"u"}function isProvided(it){return isDefined(it)&&it!==null}function isString(it){return typeof it=="string"}function isArrayBuffer(it){return it instanceof ArrayBuffer}function isBlob(it){return invariant(isBrowser,"isBlob can only be used in a browser environment"),it instanceof Blob}function isDataURI(it){return isString(it)&&/^data:/.test(it)}function dataURItoByteString(it){invariant(isDataURI(it),"Invalid data URI.");const[g="",et=""]=it.split(",");return g.split(";").indexOf("base64")!==-1?atob(et):unescape(et)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(it){it!=null&&it.cancel&&it.cancel()}function makePageCallback(it,g){return Object.defineProperty(it,"width",{get(){return this.view[2]*g},configurable:!0}),Object.defineProperty(it,"height",{get(){return this.view[3]*g},configurable:!0}),Object.defineProperty(it,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(it,"originalHeight",{get(){return this.view[3]},configurable:!0}),it}function isCancelException(it){return it.name==="RenderingCancelledException"}function loadFromFile(it){return new Promise((g,et)=>{const ot=new FileReader;ot.onload=()=>{if(!ot.result)return et(new Error("Error while reading a file."));g(ot.result)},ot.onerror=ct=>{if(!ct.target)return et(new Error("Error while reading a file."));const{error:ut}=ct.target;if(!ut)return et(new Error("Error while reading a file."));switch(ut.code){case ut.NOT_FOUND_ERR:return et(new Error("Error while reading a file: File not found."));case ut.SECURITY_ERR:return et(new Error("Error while reading a file: Security error."));case ut.ABORT_ERR:return et(new Error("Error while reading a file: Aborted."));default:return et(new Error("Error while reading a file."))}},ot.readAsArrayBuffer(it)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(it,g)=>{switch(g){case PasswordResponses$1.NEED_PASSWORD:{const et=prompt("Enter the password to open this PDF file.");it(et);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const et=prompt("Invalid password. Please try again.");it(et);break}}};function isParameterObject(it){return typeof it=="object"&&it!==null&&("data"in it||"range"in it||"url"in it)}const Document=reactExports.forwardRef(function it({children:g,className:et,error:ot="Failed to load PDF file.",externalLinkRel:ct,externalLinkTarget:ut,file:dt,inputRef:ft,imageResourcesPath:St,loading:kt="Loading PDF",noData:Tt="No PDF file specified.",onItemClick:Rt,onLoadError:jt,onLoadProgress:$t,onLoadSuccess:Ft,onPassword:Ht=defaultOnPassword,onSourceError:Kt,onSourceSuccess:Bt,options:Ut,renderMode:Yt,rotate:Jt,scale:Zt,...en},tn){const[nn,ln]=useResolver(),{value:an,error:sn}=nn,[dn,mn]=useResolver(),{value:yn,error:vn}=dn,hn=reactExports.useRef(new LinkService),pn=reactExports.useRef([]),rn=reactExports.useRef(void 0),on=reactExports.useRef(void 0);dt&&dt!==rn.current&&isParameterObject(dt)&&(warning$1(!dequal(dt,rn.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),rn.current=dt),Ut&&Ut!==on.current&&(warning$1(!dequal(Ut,on.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),on.current=Ut);const gn=reactExports.useRef({scrollPageIntoView:On=>{const{dest:Mn,pageNumber:Vn,pageIndex:Wn=Vn-1}=On;if(Rt){Rt({dest:Mn,pageIndex:Wn,pageNumber:Vn});return}const Yn=pn.current[Wn];if(Yn){Yn.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Vn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(tn,()=>({linkService:hn,pages:pn,viewer:gn}),[]);function un(){Bt&&Bt()}function xn(){sn&&(warning$1(!1,sn.toString()),Kt&&Kt(sn))}function En(){ln({type:"RESET"})}reactExports.useEffect(En,[dt,ln]);const wn=reactExports.useCallback(async()=>{if(!dt)return null;if(typeof dt=="string")return isDataURI(dt)?{data:dataURItoByteString(dt)}:(displayCORSWarning(),{url:dt});if(dt instanceof PDFDataRangeTransport)return{range:dt};if(isArrayBuffer(dt))return{data:dt};if(isBrowser&&isBlob(dt))return{data:await loadFromFile(dt)};if(invariant(typeof dt=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(dt),"Invalid parameter object: need either .data, .range or .url"),"url"in dt&&typeof dt.url=="string"){if(isDataURI(dt.url)){const{url:On,...Mn}=dt;return{data:dataURItoByteString(On),...Mn}}displayCORSWarning()}return dt},[dt]);reactExports.useEffect(()=>{const On=makeCancellablePromise(wn());return On.promise.then(Mn=>{ln({type:"RESOLVE",value:Mn})}).catch(Mn=>{ln({type:"REJECT",error:Mn})}),()=>{cancelRunningTask(On)}},[wn,ln]),reactExports.useEffect(()=>{if(!(typeof an>"u")){if(an===!1){xn();return}un()}},[an]);function kn(){yn&&(Ft&&Ft(yn),pn.current=new Array(yn.numPages),hn.current.setDocument(yn))}function Sn(){vn&&(warning$1(!1,vn.toString()),jt&&jt(vn))}reactExports.useEffect(function(){mn({type:"RESET"})},[mn,an]),reactExports.useEffect(function(){if(!an)return;const Mn=Ut?{...an,...Ut}:an,Vn=getDocument(Mn);$t&&(Vn.onProgress=$t),Ht&&(Vn.onPassword=Ht);const Wn=Vn,Yn=Wn.promise.then(Rn=>{mn({type:"RESOLVE",value:Rn})}).catch(Rn=>{Wn.destroyed||mn({type:"REJECT",error:Rn})});return()=>{Yn.finally(()=>Wn.destroy())}},[Ut,mn,an]),reactExports.useEffect(()=>{if(!(typeof yn>"u")){if(yn===!1){Sn();return}kn()}},[yn]),reactExports.useEffect(function(){hn.current.setViewer(gn.current),hn.current.setExternalLinkRel(ct),hn.current.setExternalLinkTarget(ut)},[ct,ut]);const An=reactExports.useCallback((On,Mn)=>{pn.current[On]=Mn},[]),Cn=reactExports.useCallback(On=>{delete pn.current[On]},[]),Tn=reactExports.useMemo(()=>({imageResourcesPath:St,linkService:hn.current,onItemClick:Rt,pdf:yn,registerPage:An,renderMode:Yt,rotate:Jt,scale:Zt,unregisterPage:Cn}),[St,Rt,yn,An,Yt,Jt,Zt,Cn]),_n=reactExports.useMemo(()=>makeEventProps(en,()=>yn),[en,yn]);function Dn(){function On(Vn){return!!(Vn!=null&&Vn.pdf)}if(!On(Tn))throw new Error("pdf is undefined");const Mn=typeof g=="function"?g(Tn):g;return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:Tn,children:Mn})}function $n(){return dt?yn==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof kt=="function"?kt():kt}):yn===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof ot=="function"?ot():ot}):Dn():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Tt=="function"?Tt():Tt})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",et),ref:ft,..._n,children:$n()})}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var it=[],g=0;g<arguments.length;g++)it[g]=arguments[g];var et=it.filter(Boolean);if(et.length<=1){var ot=et[0];return ot||null}return function(ut){for(var dt=0,ft=et;dt<ft.length;dt++){var St=ft[dt];typeof St=="function"?St(ut):St&&(St.current=ut)}}}const pageContext=reactExports.createContext(null),PageContext=pageContext;function usePageContext(){return reactExports.useContext(PageContext)}function AnnotationLayer(){const it=useDocumentContext(),g=usePageContext();invariant(g,"Unable to find Page context.");const et={...it,...g},{imageResourcesPath:ot,linkService:ct,onGetAnnotationsError:ut,onGetAnnotationsSuccess:dt,onRenderAnnotationLayerError:ft,onRenderAnnotationLayerSuccess:St,page:kt,pdf:Tt,renderForms:Rt,rotate:jt,scale:$t=1}=et;invariant(Tt,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(kt,"Attempted to load page annotations, but no page was specified."),invariant(ct,"Attempted to load page annotations, but no linkService was specified.");const[Ft,Ht]=useResolver(),{value:Kt,error:Bt}=Ft,Ut=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function Yt(){Kt&&dt&&dt(Kt)}function Jt(){Bt&&(warning$1(!1,Bt.toString()),ut&&ut(Bt))}reactExports.useEffect(function(){Ht({type:"RESET"})},[Ht,kt]),reactExports.useEffect(function(){if(!kt)return;const ln=makeCancellablePromise(kt.getAnnotations()),an=ln;return ln.promise.then(sn=>{Ht({type:"RESOLVE",value:sn})}).catch(sn=>{Ht({type:"REJECT",error:sn})}),()=>{cancelRunningTask(an)}},[Ht,kt]),reactExports.useEffect(()=>{if(Kt!==void 0){if(Kt===!1){Jt();return}Yt()}},[Kt]);function Zt(){St&&St()}function en(nn){warning$1(!1,`${nn}`),ft&&ft(nn)}const tn=reactExports.useMemo(()=>kt.getViewport({scale:$t,rotation:jt}),[kt,jt,$t]);return reactExports.useEffect(function(){if(!Tt||!kt||!ct||!Kt)return;const{current:ln}=Ut;if(!ln)return;const an=tn.clone({dontFlip:!0}),sn={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:Tt.annotationStorage,commentManager:null,div:ln,l10n:null,linkService:ct,page:kt,structTreeLayer:null,viewport:an},dn={annotations:Kt,annotationStorage:Tt.annotationStorage,div:ln,imageResourcesPath:ot,linkService:ct,page:kt,renderForms:Rt,viewport:an};ln.innerHTML="";try{new AnnotationLayer$1(sn).render(dn),Zt()}catch(mn){en(mn)}return()=>{}},[Kt,ot,ct,kt,Tt,Rt,tn]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:Ut})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(it){return it in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(it){return"children"in it}function isStructTreeNodeWithOnlyContentChild(it){return isStructTreeNode(it)?it.children.length===1&&0 in it.children&&"id"in it.children[0]:!1}function getRoleAttributes(it){const g={};if(isStructTreeNode(it)){const{role:et}=it,ot=et.match(HEADING_PATTERN);if(ot)g.role="heading",g["aria-level"]=Number(ot[1]);else if(isPdfRole(et)){const ct=PDF_ROLE_TO_HTML_ROLE[et];ct&&(g.role=ct)}}return g}function getBaseAttributes(it){const g={};if(isStructTreeNode(it)){if(it.alt!==void 0&&(g["aria-label"]=it.alt),it.lang!==void 0&&(g.lang=it.lang),isStructTreeNodeWithOnlyContentChild(it)){const[et]=it.children;if(et){const ot=getBaseAttributes(et);return{...g,...ot}}}}else"id"in it&&(g["aria-owns"]=it.id);return g}function getAttributes(it){return it?{...getRoleAttributes(it),...getBaseAttributes(it)}:null}function StructTreeItem({className:it,node:g}){const et=reactExports.useMemo(()=>getAttributes(g),[g]),ot=reactExports.useMemo(()=>!isStructTreeNode(g)||isStructTreeNodeWithOnlyContentChild(g)?null:g.children.map((ct,ut)=>jsxRuntimeExports.jsx(StructTreeItem,{node:ct},ut)),[g]);return jsxRuntimeExports.jsx("span",{className:it,...et,children:ot})}function StructTree(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{onGetStructTreeError:g,onGetStructTreeSuccess:et}=it,[ot,ct]=useResolver(),{value:ut,error:dt}=ot,{customTextRenderer:ft,page:St}=it;function kt(){ut&&et&&et(ut)}function Tt(){dt&&(warning$1(!1,dt.toString()),g&&g(dt))}return reactExports.useEffect(function(){ct({type:"RESET"})},[ct,St]),reactExports.useEffect(function(){if(ft||!St)return;const jt=makeCancellablePromise(St.getStructTree()),$t=jt;return jt.promise.then(Ft=>{ct({type:"RESOLVE",value:Ft})}).catch(Ft=>{ct({type:"REJECT",error:Ft})}),()=>cancelRunningTask($t)},[ft,St,ct]),reactExports.useEffect(()=>{if(ut!==void 0){if(ut===!1){Tt();return}kt()}},[ut]),ut?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:ut}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas(it){const g=usePageContext();invariant(g,"Unable to find Page context.");const et={...g,...it},{_className:ot,canvasBackground:ct,devicePixelRatio:ut=getDevicePixelRatio(),onRenderError:dt,onRenderSuccess:ft,page:St,renderForms:kt,renderTextLayer:Tt,rotate:Rt,scale:jt}=et,{canvasRef:$t}=it;invariant(St,"Attempted to render page canvas, but no page was specified.");const Ft=reactExports.useRef(null);function Ht(){St&&ft&&ft(makePageCallback(St,jt))}function Kt(Jt){isCancelException(Jt)||(warning$1(!1,Jt.toString()),dt&&dt(Jt))}const Bt=reactExports.useMemo(()=>St.getViewport({scale:jt*ut,rotation:Rt}),[ut,St,Rt,jt]),Ut=reactExports.useMemo(()=>St.getViewport({scale:jt,rotation:Rt}),[St,Rt,jt]);reactExports.useEffect(function(){if(!St)return;St.cleanup();const{current:Zt}=Ft;if(!Zt)return;Zt.width=Bt.width,Zt.height=Bt.height,Zt.style.width=`${Math.floor(Ut.width)}px`,Zt.style.height=`${Math.floor(Ut.height)}px`,Zt.style.visibility="hidden";const en={annotationMode:kt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:Zt,canvasContext:Zt.getContext("2d",{alpha:!1}),viewport:Bt};ct&&(en.background=ct);const tn=St.render(en),nn=tn;return tn.promise.then(()=>{Zt.style.visibility="",Ht()}).catch(Kt),()=>cancelRunningTask(nn)},[ct,St,kt,Bt,Ut]);const Yt=reactExports.useCallback(()=>{const{current:Jt}=Ft;Jt&&(Jt.width=0,Jt.height=0)},[]);return reactExports.useEffect(()=>Yt,[Yt]),jsxRuntimeExports.jsx("canvas",{className:`${ot}__canvas`,dir:"ltr",ref:mergeRefs($t,Ft),style:{display:"block",userSelect:"none"},children:Tt?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(it){return"str"in it}function TextLayer(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{customTextRenderer:g,onGetTextError:et,onGetTextSuccess:ot,onRenderTextLayerError:ct,onRenderTextLayerSuccess:ut,page:dt,pageIndex:ft,pageNumber:St,rotate:kt,scale:Tt}=it;invariant(dt,"Attempted to load page text content, but no page was specified.");const[Rt,jt]=useResolver(),{value:$t,error:Ft}=Rt,Ht=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function Kt(){$t&&ot&&ot($t)}function Bt(){Ft&&(warning$1(!1,Ft.toString()),et&&et(Ft))}reactExports.useEffect(function(){jt({type:"RESET"})},[dt,jt]),reactExports.useEffect(function(){if(!dt)return;const nn=makeCancellablePromise(dt.getTextContent()),ln=nn;return nn.promise.then(an=>{jt({type:"RESOLVE",value:an})}).catch(an=>{jt({type:"REJECT",error:an})}),()=>cancelRunningTask(ln)},[dt,jt]),reactExports.useEffect(()=>{if($t!==void 0){if($t===!1){Bt();return}Kt()}},[$t]);const Ut=reactExports.useCallback(()=>{ut&&ut()},[ut]),Yt=reactExports.useCallback(tn=>{warning$1(!1,tn.toString()),ct&&ct(tn)},[ct]);function Jt(){const tn=Ht.current;tn&&tn.classList.add("selecting")}function Zt(){const tn=Ht.current;tn&&tn.classList.remove("selecting")}const en=reactExports.useMemo(()=>dt.getViewport({scale:Tt,rotation:kt}),[dt,kt,Tt]);return reactExports.useLayoutEffect(function(){if(!dt||!$t)return;const{current:nn}=Ht;if(!nn)return;nn.innerHTML="";const ln=dt.streamTextContent({includeMarkedContent:!0}),an={container:nn,textContentSource:ln,viewport:en},sn=new TextLayer$1(an),dn=sn;return sn.render().then(()=>{const mn=document.createElement("div");mn.className="endOfContent",nn.append(mn);const yn=nn.querySelectorAll('[role="presentation"]');if(g){let vn=0;$t.items.forEach((hn,pn)=>{if(!isTextItem(hn))return;const rn=yn[vn];if(!rn)return;const on=g({pageIndex:ft,pageNumber:St,itemIndex:pn,...hn});rn.innerHTML=on,vn+=hn.str&&hn.hasEOL?2:1})}Ut()}).catch(Yt),()=>cancelRunningTask(dn)},[g,Yt,Ut,dt,ft,St,$t,en]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:Zt,onMouseDown:Jt,ref:Ht})}const defaultScale=1;function Page(it){const et={...useDocumentContext(),...it},{_className:ot="react-pdf__Page",_enableRegisterUnregisterPage:ct=!0,canvasBackground:ut,canvasRef:dt,children:ft,className:St,customRenderer:kt,customTextRenderer:Tt,devicePixelRatio:Rt,error:jt="Failed to load the page.",height:$t,inputRef:Ft,loading:Ht="Loading page",noData:Kt="No page specified.",onGetAnnotationsError:Bt,onGetAnnotationsSuccess:Ut,onGetStructTreeError:Yt,onGetStructTreeSuccess:Jt,onGetTextError:Zt,onGetTextSuccess:en,onLoadError:tn,onLoadSuccess:nn,onRenderAnnotationLayerError:ln,onRenderAnnotationLayerSuccess:an,onRenderError:sn,onRenderSuccess:dn,onRenderTextLayerError:mn,onRenderTextLayerSuccess:yn,pageIndex:vn,pageNumber:hn,pdf:pn,registerPage:rn,renderAnnotationLayer:on=!0,renderForms:gn=!1,renderMode:un="canvas",renderTextLayer:xn=!0,rotate:En,scale:wn=defaultScale,unregisterPage:kn,width:Sn,...An}=et,[Cn,Tn]=useResolver(),{value:_n,error:Dn}=Cn,$n=reactExports.useRef(null);invariant(pn,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const On=isProvided(hn)?hn-1:vn??null,Mn=hn??(isProvided(vn)?vn+1:null),Vn=En??(_n?_n.rotate:null),Wn=reactExports.useMemo(()=>{if(!_n)return null;let cr=1;const Xn=wn??defaultScale;if(Sn||$t){const Yr=_n.getViewport({scale:1,rotation:Vn});Sn?cr=Sn/Yr.width:$t&&(cr=$t/Yr.height)}return Xn*cr},[$t,_n,Vn,wn,Sn]);reactExports.useEffect(function(){return()=>{isProvided(On)&&ct&&kn&&kn(On)}},[ct,pn,On,kn]);function Yn(){if(nn){if(!_n||!Wn)return;nn(makePageCallback(_n,Wn))}if(ct&&rn){if(!isProvided(On)||!$n.current)return;rn(On,$n.current)}}function Rn(){Dn&&(warning$1(!1,Dn.toString()),tn&&tn(Dn))}reactExports.useEffect(function(){Tn({type:"RESET"})},[Tn,pn,On]),reactExports.useEffect(function(){if(!pn||!Mn)return;const Xn=makeCancellablePromise(pn.getPage(Mn)),Yr=Xn;return Xn.promise.then(Zn=>{Tn({type:"RESOLVE",value:Zn})}).catch(Zn=>{Tn({type:"REJECT",error:Zn})}),()=>cancelRunningTask(Yr)},[Tn,pn,Mn]),reactExports.useEffect(()=>{if(_n!==void 0){if(_n===!1){Rn();return}Yn()}},[_n,Wn]);const Pn=reactExports.useMemo(()=>isProvided(On)&&Mn&&isProvided(Vn)&&isProvided(Wn)?{_className:ot,canvasBackground:ut,customTextRenderer:Tt,devicePixelRatio:Rt,onGetAnnotationsError:Bt,onGetAnnotationsSuccess:Ut,onGetStructTreeError:Yt,onGetStructTreeSuccess:Jt,onGetTextError:Zt,onGetTextSuccess:en,onRenderAnnotationLayerError:ln,onRenderAnnotationLayerSuccess:an,onRenderError:sn,onRenderSuccess:dn,onRenderTextLayerError:mn,onRenderTextLayerSuccess:yn,page:_n,pageIndex:On,pageNumber:Mn,renderForms:gn,renderTextLayer:xn,rotate:Vn,scale:Wn}:null,[ot,ut,Tt,Rt,Bt,Ut,Yt,Jt,Zt,en,ln,an,sn,dn,mn,yn,_n,On,Mn,gn,xn,Vn,Wn]),Ln=reactExports.useMemo(()=>makeEventProps(An,()=>_n&&(Wn?makePageCallback(_n,Wn):void 0)),[An,_n,Wn]),In=`${On}@${Wn}/${Vn}`;function Nn(){switch(un){case"custom":return invariant(kt,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(kt,{},`${In}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:dt},`${In}_canvas`)}}function Hn(){return xn?jsxRuntimeExports.jsx(TextLayer,{},`${In}_text`):null}function zn(){return on?jsxRuntimeExports.jsx(AnnotationLayer,{},`${In}_annotations`):null}function Un(){function cr(Yr){return!!(Yr!=null&&Yr.page)}if(!cr(Pn))throw new Error("page is undefined");const Xn=typeof ft=="function"?ft(Pn):ft;return jsxRuntimeExports.jsxs(PageContext.Provider,{value:Pn,children:[Nn(),Hn(),zn(),Xn]})}function lr(){return Mn?pn===null||_n===void 0||_n===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof Ht=="function"?Ht():Ht}):pn===!1||_n===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof jt=="function"?jt():jt}):Un():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Kt=="function"?Kt():Kt})}return jsxRuntimeExports.jsx("div",{className:clsx(ot,St),"data-page-number":Mn,ref:mergeRefs(Ft,$n),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Wn}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:ut||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ln,children:lr()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPreviewModal({fileUrl:it,fileTitle:g,partNumber:et,sourceType:ot="magnet",onClose:ct}){const[ut,dt]=reactExports.useState(null),[ft,St]=reactExports.useState(1.2),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(!1),[$t,Ft]=reactExports.useState(null),Ht=reactExports.useMemo(()=>it?{url:`https://cre8tlystudio.com/api/pdf/proxy?url=${encodeURIComponent(it)}`}:null,[it]);if(!it)return null;reactExports.useEffect(()=>{if(!it)return;let Bt,Ut=0;const Yt=async()=>{try{const Jt=await fetch(Ht.url,{method:"HEAD"}),Zt=Jt.headers.get("content-type");Jt.ok&&(Zt!=null&&Zt.includes("pdf"))?Tt(!0):Ut<10?(Ut++,Bt=setTimeout(Yt,1500)):Ft("PDF is still being finalized. Try again in a few seconds.")}catch{Ut<10?(Ut++,Bt=setTimeout(Yt,1500)):Ft("PDF is still being finalized. Try again shortly.")}};return Yt(),()=>clearTimeout(Bt)},[it]);const Kt=async()=>{try{jt(!0);const Bt=await fetch(Ht.url);if(!Bt.ok)throw new Error(`Failed: ${Bt.status} ${Bt.statusText}`);const Ut=await Bt.blob(),Yt=URL.createObjectURL(Ut),Jt=document.createElement("a");if(Jt.href=Yt,ot==="book"){const Zt=(g||"Book").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_"),en=et?`_Part_${et}`:"";Jt.download=`${Zt}${en}.pdf`}else if(ot==="magnet"){const Zt=(g||"Lead_Magnet").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_");Jt.download=`${Zt}.pdf`}else Jt.download="document.pdf";document.body.appendChild(Jt),Jt.click(),document.body.removeChild(Jt),URL.revokeObjectURL(Yt),await new Promise(Zt=>setTimeout(Zt,2e3))}catch(Bt){console.error("Download error:",Bt),alert(" Download failed. Please try again.")}finally{jt(!1)}};return reactExports.useEffect(()=>{if(!it){Tt(!1),Ft(null),jt(!1),dt(null),St(1.2);return}Tt(!1),Ft(null),jt(!1),dt(null),St(1.2)},[it,ct]),reactExports.useEffect(()=>{const Bt=()=>St(window.innerWidth<640?.8:1.2);return window.addEventListener("resize",Bt),Bt(),()=>window.removeEventListener("resize",Bt)},[]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md z-50 flex flex-col items-center justify-center p-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between mb-4 bg-[#111]/80 border border-gray-800 rounded-xl px-5 py-3 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 text-white/80 font-semibold text-lg tracking-wide",children:" PDF Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>St(ft+.2),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>St(Math.max(ft-.2,.6)),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:Kt,disabled:Rt,className:`p-2 rounded-lg transition text-white ${Rt?"bg-green-800 cursor-wait":"bg-green-600 hover:bg-green-600/90"}`,title:"Download",children:Rt?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"white",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),"Downloading"]}):jsxRuntimeExports.jsx(Download,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:ct,className:"p-2 rounded-lg hover:bg-red-600/90 bg-red-600 text-white transition",title:"Close",children:jsxRuntimeExports.jsx(X$2,{size:20})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-5xl max-h-[85vh] overflow-y-auto bg-[#121212] border border-gray-800 rounded-xl shadow-lg flex justify-center p-2 sm:p-6",children:[!kt&&!$t&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#00e0ff] mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium animate-pulse",children:" Finalizing your PDF  just a few more seconds..."}),jsxRuntimeExports.jsx("div",{className:"w-64 h-2 bg-gray-800 rounded-full overflow-hidden mt-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-[#00e0ff] via-[#00e07a] to-[#00e0ff] animate-progress"})})]}),$t&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-red-400 z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-center px-6 text-sm",children:$t})}),jsxRuntimeExports.jsx("div",{className:`w-full flex justify-center transition-opacity duration-500 ${kt?"opacity-100":"opacity-0"}`,children:kt&&!$t&&jsxRuntimeExports.jsx(Document$1,{file:Ht,onLoadSuccess:({numPages:Bt})=>dt(Bt),onLoadError:Bt=>{console.error("PDF load error:",Bt),Ft("Failed to load PDF file.")},loading:jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading PDF"}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center w-full",children:Array.from(new Array(ut||0),(Bt,Ut)=>jsxRuntimeExports.jsx(Page,{pageNumber:Ut+1,scale:ft,renderTextLayer:!1,renderAnnotationLayer:!1,className:"mb-4",width:Math.min(window.innerWidth-40,900)},`page_${Ut+1}`))})})})]})]})}function NewContentModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ct,ut]=reactExports.useState(!1);async function dt(){if(!et){alert("Please select a document type.");return}ut(!0),it({contentType:et})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-6 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Select Document Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-3",children:[{label:"Lead Magnet",value:"lead_magnet",description:"Generate a persuasive, marketing-focused guide designed to attract and convert readers."},{label:"Learning Document",value:"learning_doc",description:"Create a detailed, step-by-step educational document that teaches practical real-world skills."}].map(ft=>jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg border p-3 transition ${et===ft.value?"border-green bg-green/10":"border-gray-700 hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"contentType",value:ft.value,checked:et===ft.value,onChange:St=>ot(St.target.value),className:"accent-green mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-base",children:ft.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:ft.description})]})]},ft.value))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:dt,disabled:ct,className:"bg-muteGrey px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:ct?"Loading...":"Continue"})]})]})})}function MagnetCardList({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var Rt;const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!kt.length)return null;function Tt(jt){dt(!1),g(ft,jt.contentType)}return jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[kt.map(jt=>{var $t,Ft;return jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"aspect-[4/3] rounded-lg overflow-hidden border border-gray-700 mb-3",children:jt.cover_image?jsxRuntimeExports.jsx("img",{src:jt.cover_image,alt:jt.title||"Cover",className:"object-cover w-full h-full"}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-xs text-gray-500 italic",children:"No Preview"})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate max-w-[70%]",children:jt.title||"Digital Asset"}),jt.theme?jsxRuntimeExports.jsx("span",{className:"px-2 py-[2px] rounded-full text-[10px]",style:{background:(($t=themeStyles[jt.theme])==null?void 0:$t.background)||"#333",color:((Ft=themeStyles[jt.theme])==null?void 0:Ft.color)||"#fff"},children:jt.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-[10px]",children:"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",jt.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(jt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[jt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:jt.status==="completed"?"Completed":jt.status==="pending"?"Building...":jt.status==="failed"?"Failed":"Idle"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!jt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(jt.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),jt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct(jt.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${jt.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{jt.edit_used||et(jt.id)},disabled:jt.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${jt.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${jt.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:jt.edit_used?"Closed":"Edit"})]})]})]})]},jt.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((Rt=kt.find(jt=>jt.pdf_url===ot))==null?void 0:Rt.title)||"Lead Magnet",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function PaginationControls({currentPage:it,totalPages:g,onPageChange:et}){return g<=1?null:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{disabled:it===1,onClick:()=>et(it-1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:["Page ",it," of ",g]}),jsxRuntimeExports.jsx("button",{disabled:it===g,onClick:()=>et(it+1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Next"})]})}function SupportTab(){const[it,g]=reactExports.useState(!1),et=[{q:"How do I generate a lead magnet?",a:"Fill out your prompt, upload a logo, add your link, select a theme, and click Generate. Your PDF will be automatically created and ready to download."},{q:"How long does it take?",a:"Most PDFs take between 515 seconds to generate, depending on the number of pages and theme you select."},{q:"Where can I find my generated PDFs?",a:"All completed lead magnets are available in your dashboard under My Lead Magnets. You can view, download, or regenerate them anytime."},{q:"Can I generate more than one lead magnet?",a:"Yes! You can create as many as you want. Simply open the Lead Magnet Creator and repeat the process with a new prompt or design."},{q:"Can I use my own branding?",a:"Absolutely. You can upload your own logo and link to your website or product page. Themes adjust automatically to fit your brand look."},{q:"What are Pro Covers?",a:"Pro Covers is an exclusive upgrade that lets you upload custom cover images for your lead magnets. Your uploaded cover appears as the first page of your PDF, giving your content a professional, branded presentation. In addition to uploading your own designs, Pro Covers also includes access to thousands of royalty-free Unsplash images you can instantly use as backgrounds or full covers. This gives you unlimited creative flexibility without any licensing worriesavailable only with the Pro Covers plan."},{q:"Can I edit or regenerate an existing PDF?",a:"No. Each slot is designed for a single finalized PDF to ensure fair usage and prevent system abuse. Allowing unlimited regenerations could cause performance issues and disrupt other users workflows. If youd like to create a new version, please start a new lead magnet using a fresh slot."},{q:"Do you offer refunds?",a:"Since Cre8tly Studio is a digital service that instantly generates custom content, we do not offer refunds after delivery. However, if you experience a technical issue or duplicate charge, please reach out, well make it right."},{q:"Can I upgrade my plan or buy more credits?",a:"Yes. Additional credits and premium plans are available directly from your account dashboard."},{q:"What if I reach my limit?",a:"If youve hit your plan limit, youll see a message prompting you to upgrade or purchase more credits. Youll never lose access to past PDFs."},{q:"How do I contact support?",a:"You can reach out anytime on our Contact Us page Our team typically responds within 24-48 hours, MondayFriday."}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>g(!0),className:"fixed bottom-6 right-6 bg-green text-black font-semibold px-2 py-2 rounded-full shadow-lg hover:opacity-90 transition-all z-50 design-text text-sm",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{size:20})}),it&&jsxRuntimeExports.jsx("div",{onClick:()=>g(!1),className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{onClick:ot=>ot.stopPropagation(),className:"bg-gray-900 text-white p-8 rounded-2xl w-full max-w-2xl border border-gray-700 shadow-2xl relative max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 right-4 flex justify-between",children:jsxRuntimeExports.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-red-400 text-xl",children:""})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green",children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx("div",{className:"space-y-5 text-gray-300",children:et.map((ot,ct)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:ot.q}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1 leading-relaxed",children:ot.a})]},ct))}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx(Link$1,{to:"/contact",className:"text-green font-medium hover:underline",children:"Need more help? Contact Support "})})]})})]})}function GenerationOverlay({visible:it,progress:g,type:et="lead"}){return jsxRuntimeExports.jsx(AnimatePresence,{children:it&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"fixed inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm z-[9999] text-center p-6",children:[jsxRuntimeExports.jsx(motion.h2,{animate:{opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-white text-xl sm:text-2xl font-semibold mb-4",children:et==="book"?" Generating your book...":" Creating your digital asset..."}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-3/4 max-w-md mt-6",children:jsxRuntimeExports.jsx("div",{className:"relative w-full h-[3px] bg-gray-800/60 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full 
                bg-gradient-to-r from-white to-[#00E07A]
                transition-all duration-200 ease-linear animate-progressGlowGreen`,style:{width:`${g}%`,boxShadow:`
                    0 0 8px rgba(0,224,122,0.8),
                    0 0 16px rgba(0,224,122,0.7),
                    0 0 28px rgba(0,224,122,0.6),
                    0 0 45px rgba(0,224,122,0.5)
                  `}})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:g>=100&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:[0,.9,0]},transition:{duration:.5,ease:"easeOut"},className:"absolute inset-0 bg-white/30"},"complete-flash")}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{delay:.4,duration:.6}},className:"text-gray-400 text-sm mt-4 italic",children:et==="book"?"This may take a few minutes  crafting a great story takes time ":"This might take a moment  crafting something powerful "})]},"overlay")})}function DashboardLayout({children:it}){const g=useNavigate(),et=useLocation(),{user:ot,logout:ct}=useAuth(),[ut,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(0);reactExports.useEffect(()=>{const Tt=()=>{dt(window.innerWidth>=1024)};return Tt(),window.addEventListener("resize",Tt),()=>window.removeEventListener("resize",Tt)},[]),reactExports.useEffect(()=>{if(!(ot!=null&&ot.id))return;const Tt=async()=>{try{const jt=await axiosInstance.get("/admin/messages/count");St(jt.data.count||0)}catch(jt){console.error("Failed to fetch unread count:",jt)}};Tt();const Rt=setInterval(Tt,3e4);return()=>clearInterval(Rt)},[ot==null?void 0:ot.id]);const kt=[{label:"Digital Products",path:"/dashboard",icon:jsxRuntimeExports.jsx(Package,{size:22})},{label:"Assistant",path:"/books",icon:jsxRuntimeExports.jsx(BookOpen,{size:22})},{label:"Settings",path:"/settings",icon:jsxRuntimeExports.jsx(Settings,{size:22})},{label:"Prompt Memory",path:"/prompts",icon:jsxRuntimeExports.jsx(SquareTerminal,{size:22})},{label:"Inbox",path:"/notifications",icon:jsxRuntimeExports.jsx(Inbox$1,{size:22})},{label:"Plans",path:"/plans",icon:jsxRuntimeExports.jsx(DollarSign,{size:22})}];return jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-[#030712] text-white relative",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("aside",{className:`fixed top-0 left-0 w-[120px] h-full bg-gray-900/95 border-r border-gray-800 
       flex flex-col justify-between transform transition-transform duration-300 z-[60]
       ${ut?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-between h-full p-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center mt-6 mb-4",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly",className:"w-16 h-16 mb-2"}),jsxRuntimeExports.jsx("h1",{className:"text-sm font-semibold text-white text-center tracking-wide",children:"Cre8tly Studio"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!1),className:"lg:hidden text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})})]}),jsxRuntimeExports.jsx("nav",{className:"flex flex-col items-center gap-5 mt-8",children:kt.map(Tt=>{const Rt=et.pathname===Tt.path,jt=(ot==null?void 0:ot.brand_identity_file)&&Tt.path==="/settings";return jsxRuntimeExports.jsx("button",{onClick:()=>{g(Tt.path),window.innerWidth<1024&&dt(!1)},className:"flex flex-col items-center justify-center space-y-2 focus:outline-none",children:jsxRuntimeExports.jsxs("div",{className:`relative flex items-center justify-center w-12 h-12 rounded-xl border transition-all 
            ${Rt?"bg-green/10 border-green text-green shadow-[0_0_12px_rgba(34,197,94,0.4)]":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-green hover:text-green"}`,children:[Tt.icon,Tt.path==="/notifications"&&ft>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-[18px] h-[18px] text-[10px] bg-red-600 text-white font-bold rounded-full shadow-md",children:ft>9?"9+":ft}),jt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full opacity-75 animate-ping"}),jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full shadow-[0_0_6px_2px_rgba(34,197,94,0.8)]"})]})]})},Tt.path)})})]}),jsxRuntimeExports.jsx("button",{onClick:ct,className:`relative flex items-center justify-center w-12 h-12 mx-auto mb-6 rounded-xl 
             bg-red-600/20 border border-red-600/40 text-red-500 hover:text-white hover:bg-red-600/40 
             hover:shadow-[0_0_12px_rgba(239,68,68,0.4)] transition-all`,title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{size:20})})]})}),ut&&window.innerWidth<1024&&jsxRuntimeExports.jsx("div",{onClick:()=>dt(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 lg:hidden"}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!ut),className:"lg:hidden fixed top-4 right-4 bg-gray-800/80 p-2 rounded-lg text-gray-200 hover:text-white z-50 transition",children:jsxRuntimeExports.jsx(Menu,{size:22})}),jsxRuntimeExports.jsx("main",{className:"flex-1 min-h-screen overflow-y-auto transition-all duration-300 lg:ml-[120px]",children:it})]})}async function startLeadMagnetEdit(it){var g,et,ot;try{return(await axiosInstance.post(`/edit/${it}/editor/start`)).data}catch(ct){throw console.error(" Error starting lead magnet edit:",((g=ct.response)==null?void 0:g.data)||ct.message),new Error(((ot=(et=ct.response)==null?void 0:et.data)==null?void 0:ot.error)||"Failed to start editor session.")}}async function commitLeadMagnetEdit(it,g,et){var ot,ct,ut;try{return(await axiosInstance.put(`/edit/${it}/editor/commit`,{token:g,updatedHtml:et})).data}catch(dt){throw console.error(" Error committing lead magnet edit:",((ot=dt.response)==null?void 0:ot.data)||dt.message),new Error(((ut=(ct=dt.response)==null?void 0:ct.data)==null?void 0:ut.error)||"Failed to save edited PDF.")}}var inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$1=Node3.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:it}){return["img",mergeAttributes(this.options.HTMLAttributes,it)]},parseMarkdown:(it,g)=>g.createNode("image",{src:it.href,title:it.title,alt:it.text}),renderMarkdown:it=>{var g,et,ot,ct,ut,dt;const ft=(et=(g=it.attrs)==null?void 0:g.src)!=null?et:"",St=(ct=(ot=it.attrs)==null?void 0:ot.alt)!=null?ct:"",kt=(dt=(ut=it.attrs)==null?void 0:ut.title)!=null?dt:"";return kt?`![${St}](${ft} "${kt}")`:`![${St}](${ft})`},addCommands(){return{setImage:it=>({commands:g})=>g.insertContent({type:this.name,attrs:it})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:it=>{const[,,g,et,ot]=it;return{src:et,alt:g,title:ot}}})]}}),index_default=Image$1;function EditorModal({leadMagnetId:it,open:g,onClose:et,onCommitted:ot}){var en;const[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(null),[Tt,Rt]=reactExports.useState(""),[jt,$t]=reactExports.useState(""),Ft=reactExports.useRef(null),Ht=useEditor({extensions:[index_default$7,index_default],content:"",editable:!0});reactExports.useEffect(()=>{!g||!it||(async()=>{const tn=await startLeadMagnetEdit(it);ut(tn.token),kt(tn.meta),Rt(tn.editableHtml||""),Ht==null||Ht.commands.setContent(tn.editableHtml||"")})().catch(et)},[g,it,Ht]);async function Kt(){ft(!0);try{const tn=(Ht==null?void 0:Ht.getHTML())||Tt,nn=await commitLeadMagnetEdit(it,ct,tn);ot(nn.pdf_url),et()}finally{ft(!1)}}reactExports.useEffect(()=>{if(Tt){const tn=new Blob([Tt],{type:"text/html"}),nn=URL.createObjectURL(tn);return $t(nn),()=>URL.revokeObjectURL(nn)}},[Tt]),reactExports.useEffect(()=>{var an;const tn=Ft.current;if(!tn||!(St!=null&&St.theme))return;const nn=fontThemes[(an=St.theme)==null?void 0:an.toLowerCase()];if(!nn)return;const ln=async()=>{const sn=tn.contentDocument;if(!(!sn||!sn.body))try{const mn=await(await fetch(`https://cre8tlystudio.com${nn.file}`)).arrayBuffer(),yn=btoa(new Uint8Array(mn).reduce((rn,on)=>rn+String.fromCharCode(on),"")),vn=sn.createElement("style");vn.id="custom-font-style",vn.innerHTML=`
        @font-face {
          font-family: '${nn.name}';
          src: url(data:font/ttf;base64,${yn}) format('truetype');
        }
        html, body, .page, .page-inner, .formatted-content,
        p, h1, h2, h3, h4, h5, h6, div, span, li {
          font-family: '${nn.name}', sans-serif !important;
        }
      `,sn.head.appendChild(vn);const hn=sn.createElement("style");hn.id="responsive-width-fix",hn.innerHTML=`
  html, body {
    width: 100% !important;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  /* Let the main page adapt naturally */
  .page, .page-inner {
    width: 100% !important;
    max-width: 667px !important; /* keep backend alignment on desktop */
    margin: 0 auto !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    box-sizing: border-box !important;
  }

  .cover-page {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important;
  width: 100% !important;
  background: transparent !important;
}

.cover-page .cover-img {
  display: block !important;
  margin: 0 auto !important;
  max-width: 100% !important;
  height: auto !important;
  object-fit: contain !important;
  float: none !important;
}

.footer-link {
  margin-top: 60px !important;
  margin-bottom: 40px !important;
  text-align: center !important;
  padding-bottom: 40px !important;
}

.footer-link p {
  margin-bottom: 20px !important;
  font-size: 1.1rem !important;
  line-height: 1.5 !important;
  font-weight: 600 !important;
}

.footer-link .link-button {
  display: inline-block !important;
  padding: 12px 28px !important;
  border-radius: 30px !important;
  color: white !important;
  font-weight: 600 !important;
  text-decoration: none !important;
  border: 2px solid white !important;
  transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.25) !important;
}

.footer-link .link-button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

  /* Typography adjusts only if viewport is small */
  @media (max-width: 768px) {
    body {
      font-size: 90% !important; /* small font scaling only */
      line-height: 1.6 !important;
    }
    h1, h2, h3 {
      line-height: 1.3 !important;
      word-break: break-word !important;
    }
    img {
    display: block !important;
    margin: 0 auto !important;      /*  centers images horizontally */
    max-width: 100% !important;
    height: auto !important;
    float: none !important;         /*  removes any old float rules */
  }

  .cover-page {
    padding: 0 !important;
    margin-bottom: 1rem !important;
  }
  .cover-page .cover-img {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
  }
      .footer-link {
    margin-top: 40px !important;
    margin-bottom: 30px !important;
    padding-bottom: 2rem !important;
  }
  .footer-link .link-button {
    font-size: 1rem !important;
  }
    pre {
  background-color: #0f0f0f;
  color: #f5f5f5;
  padding: 1rem 1.25rem;
  border-radius: 10px;
  font-family: "Courier New", monospace;
  font-size: 0.9rem;
  line-height: 1.6;
  overflow-x: auto;
  margin: 0 0 1.5rem 0; /* remove top margin, only keep bottom spacing */
  white-space: pre-wrap;
  page-break-inside: avoid; /* keeps the block from splitting across PDF pages */
  box-decoration-break: clone;
}

pre + pre {
  margin-top: -0.25rem; /* closes any hairline gap between stacked blocks */
}

code {
  background-color: #1a1a1a;
  color: #00ff80;
  padding: 0.2rem 0.4rem;
  border-radius: 5px;
  font-family: "Courier New", monospace;
  font-size: 0.85rem;
}

/* Optional  better color contrast for multi-line snippets */
pre code {
  background: transparent; /* removes duplicate block background */
  color: #f5f5f5;
}
  }
`,sn.head.appendChild(hn);const pn=sn.body.innerHTML;sn.body.innerHTML=pn,console.log(" Font applied & body refreshed:",nn.name),console.log(" BODY HTML:",sn.body.innerHTML.slice(0,500))}catch(dn){console.error(" Font apply failed:",dn)}};return tn.addEventListener("load",ln),()=>tn.removeEventListener("load",ln)},[St==null?void 0:St.theme,jt]),reactExports.useEffect(()=>{if(!Ht||!Ft.current)return;const tn=Ft.current,nn=()=>{var sn;if(!(tn.contentDocument||((sn=tn.contentWindow)==null?void 0:sn.document)))return;const an=()=>{var dn;try{const mn=tn.contentDocument||((dn=tn.contentWindow)==null?void 0:dn.document);if(!mn)return;let yn=Ht.getHTML();yn=yn.replace(/<img[^>]+unsplash[^>]+>/gi,""),yn=yn.replace(/<img[^>]+base64[^>]+>/gi,"");const vn=mn.querySelector(".page-inner");vn?(vn.innerHTML=yn,console.log(" Updated .page-inner content live (cleaned images)")):console.warn(" .page-inner not found in iframe")}catch(mn){console.error(" Failed to update iframe:",mn)}};return Ht.on("update",an),console.log(" Live preview handler attached after iframe load"),()=>Ht.off("update",an)};return tn.addEventListener("load",nn),()=>{tn.removeEventListener("load",nn)}},[Ht,jt]);const[Bt,Ut]=reactExports.useState(""),[Yt,Jt]=reactExports.useState("");function Zt(){if(!Ht||!Bt)return;const tn=Ht.getHTML(),nn=Bt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ln=new RegExp(nn,"gi"),an=tn.replace(ln,Yt);Ht.commands.setContent(an),toast.success(`Replaced all "${Bt}" with "${Yt}"`)}return jsxRuntimeExports.jsxs(yt,{open:g,onClose:et,className:"fixed inset-0 z-50",children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:jsxRuntimeExports.jsxs(je,{className:"w-full max-w-[1650px] bg-[#0f0f10] rounded-2xl p-4 sm:p-6 shadow-2xl flex flex-col gap-4 sm:gap-6 overflow-y-auto max-h-[95vh]",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-4 w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-full flex-1 bg-white text-black rounded-xl overflow-y-auto min-h-[50vh] lg:h-[70vh]",children:jsxRuntimeExports.jsx(EditorContent,{editor:Ht})}),jsxRuntimeExports.jsx("iframe",{ref:Ft,title:"preview",src:jt,className:"w-full flex-1 border border-gray-800 rounded-xl overflow-hidden min-h-[50vh] lg:h-[70vh]",sandbox:"allow-same-origin allow-popups allow-forms allow-scripts",style:{width:"100%",borderRadius:"0.75rem",background:((en=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:en.background)||"#fff"}})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 items-center justify-between border border-gray-800 rounded-lg p-3 bg-[#1b1b1b]",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Find...",value:Bt,onChange:tn=>Ut(tn.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Replace with...",value:Yt,onChange:tn=>Jt(tn.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("button",{onClick:Zt,disabled:!Bt,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50",children:"Replace All"})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2 w-full",children:[jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-gray-700 rounded-lg w-full sm:w-auto",onClick:et,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-green rounded-lg disabled:opacity-50 text-black w-full sm:w-auto",disabled:dt,onClick:Kt,children:dt?"Reprinting...":"Commit Edit"})]})]})})]})}function MagnetGrid({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var Rt;const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!Array.isArray(kt)||kt.length===0)return null;function Tt(jt){dt(!1),g(ft,jt.contentType)}return jsxRuntimeExports.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:[kt.map(jt=>{var $t,Ft,Ht;return jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 blur-xl -z-10 transition-all",animate:{opacity:[.1,.3,.1]},transition:{duration:4,repeat:1/0}}),jsxRuntimeExports.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl flex items-center justify-center overflow-hidden border border-gray-700 relative",children:[jt.cover_image?jsxRuntimeExports.jsx("img",{src:jt.cover_image,alt:jt.title||"Lead Magnet Cover",className:"object-cover w-full h-full rounded-xl transition-transform duration-300 group-hover:scale-105"}):jt.pdf_url?jsxRuntimeExports.jsx("img",{src:`https://cre8tlystudio.com/api/preview/${jt.id}`,alt:jt.title,className:"object-cover w-full h-full rounded-xl opacity-80"}):jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-xs italic",children:"No Preview"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",jt.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(jt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold mt-2 truncate",children:jt.title||"Digital Asset"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[jt.theme?jsxRuntimeExports.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-[10px] font-semibold capitalize",style:{background:(($t=themeStyles[jt.theme])==null?void 0:$t.background)||"#333",color:((Ft=themeStyles[jt.theme])==null?void 0:Ft.color)||"#fff",border:((Ht=themeStyles[jt.theme])==null?void 0:Ht.border)||"none"},children:jt.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 italic text-[10px]",children:"N/A"}),jt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-xs font-semibold text-center",children:jt.status==="completed"?jsxRuntimeExports.jsx("span",{className:"bg-black text-green border border-green px-3 py-[3px] rounded-full",children:"Completed"}):jt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):jt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"building..."]}):jsxRuntimeExports.jsx("span",{className:"bg-black text-purple border border-white px-4 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-[11px] text-gray-400 text-center",children:jt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(jt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(jt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!jt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(jt.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),jt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct(jt.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${jt.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{jt.edit_used||et(jt.id)},disabled:jt.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${jt.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${jt.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:jt.edit_used?"Closed":"Edit"})]})]})]})]},jt.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((Rt=kt.find(jt=>jt.pdf_url===ot))==null?void 0:Rt.title)||"Lead Magnet",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function CustomerDashboard(){const{user:it,accessToken:g,refreshUser:et}=useAuth(),{magnets:ot,setMagnets:ct,fetchMagnets:ut,loading:dt}=useMagnets(),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(null),[$t,Ft]=reactExports.useState(1),[Ht,Kt]=reactExports.useState(!1),[Bt,Ut]=reactExports.useState(0),[Yt,Jt]=reactExports.useState("lead_magnet"),[Zt,en]=reactExports.useState(0);function tn(){ln(null),setTimeout(()=>en(wn=>wn+1),100)}const[nn,ln]=reactExports.useState(null);function an(wn){ln(wn)}const sn=(ot.magnets||[]).find(wn=>wn.id===nn),dn=useLocation(),mn=useNavigate(),yn=10;if(typeof window<"u"){const wn=new URLSearchParams(dn.search);wn.get("session_id")&&(console.log(" Stripe checkout success:",wn.get("session_id")),ut(),window.history.replaceState({},document.title,"/dashboard"))}function vn(wn,kn,Sn){ct(An=>{const Cn=(An.magnets||[]).map(Tn=>Tn.id===wn?{...Tn,prompt:kn,status:"pending",theme:Sn}:Tn);return{...An,magnets:Cn}}),setTimeout(ut,3e3)}function hn(){mn("/plans")}const rn=[...(ot==null?void 0:ot.magnets)||[]].sort((wn,kn)=>(wn.slot_number||0)-(kn.slot_number||0)),on=Math.ceil(rn.length/yn),gn=($t-1)*yn,un=rn.slice(gn,gn+yn);function xn(wn,kn="lead_magnet"){jt(wn),Jt(kn),Tt(!0)}async function En(){try{await et(),await ut()}catch(wn){console.error("Failed to refresh user slots:",wn)}}return reactExports.useEffect(()=>{it!=null&&it.has_book&&!(it!=null&&it.has_magnet)&&mn("/books")},[it]),jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"magnet",items:ot.magnets||[],summary:ot.summary||{},onCheckout:hn}),dt?jsxRuntimeExports.jsx(LoadingState,{}):ot.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:hn,type:"magnet"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MagnetGrid,{magnets:un,onAddPrompt:xn,onOpenEditor:an}),jsxRuntimeExports.jsx(MagnetCardList,{magnets:un,onAddPrompt:xn,onOpenEditor:an}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:$t,totalPages:on,onPageChange:Ft}),jsxRuntimeExports.jsx(SupportTab,{})]}),Rt&&jsxRuntimeExports.jsx(PromptModal,{isOpen:kt,onClose:()=>Tt(!1),magnetId:Rt,accessToken:g,contentType:Yt,setShowGenerating:Kt,setProgress:Ut,onSubmitted:vn}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:ft,onClose:()=>St(!1),onRefresh:En,isFirstTime:ot.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:Ht,progress:Bt,type:"lead"}),jsxRuntimeExports.jsx(EditorModal,{leadMagnetId:nn,open:!!nn,onClose:tn,onCommitted:wn=>ut(),bgTheme:(sn==null?void 0:sn.bg_theme)||"modern"},Zt)]})})}function AdminDashboard(){const{accessToken:it}=useAuth(),[g,et]=reactExports.useState([]);return reactExports.useEffect(()=>{async function ot(){try{const ct=await axios$1.get("https://cre8tlystudio.com/api/lead-magnets/all",{headers:{Authorization:`Bearer ${it}`}});et(ct.data)}catch(ct){console.error("Error fetching all lead magnets:",ct)}}ot()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"All Lead Magnets"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:g.map(ot=>jsxRuntimeExports.jsxs("li",{className:"bg-charcoal p-4 rounded-lg text-white",children:[jsxRuntimeExports.jsxs("p",{children:["User: ",ot.user_id]}),jsxRuntimeExports.jsxs("p",{children:["Prompt: ",ot.prompt]}),jsxRuntimeExports.jsxs("p",{children:["Status: ",jsxRuntimeExports.jsx("span",{className:"text-green",children:ot.status})]})]},ot.id))})]})}function Contact(){const[it,g]=reactExports.useState({name:"",email:"",subject:"",message:""}),[et,ot]=reactExports.useState(!1),ct=dt=>{g({...it,[dt.target.name]:dt.target.value})},ut=async dt=>{dt.preventDefault(),ot(!0);try{await axios$1.post("https://cre8tlystudio.com/api/support/contact",it),y$4.success(" Message sent! We'll get back to you soon.",{position:"top-center"}),g({name:"",email:"",subject:"",message:""})}catch(ft){console.error(ft),y$4.error(" Something went wrong. Please try again later.",{position:"top-center"})}finally{ot(!1)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"min-h-screen text-white flex items-center justify-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"max-w-2xl w-full bg-metalBlack p-8 rounded-2xl border border-gray-700 shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-center",children:jsxRuntimeExports.jsx(AnimatedLogo,{})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Contact Support"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Have questions or need help? Fill out the form below and our support team will respond within 2448 hours."}),jsxRuntimeExports.jsxs("form",{onSubmit:ut,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:it.name,onChange:ct,placeholder:"Your Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:it.email,onChange:ct,placeholder:"Email associated with your account",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"text",name:"subject",value:it.subject,onChange:ct,placeholder:"Subject (optional)",className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("textarea",{name:"message",value:it.message,onChange:ct,placeholder:"Write your message...",rows:6,required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white resize-none"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Message"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function PlanDetailsModal({plan:it,onClose:g}){if(!it)return null;const et={basic:{title:"Basic Creator",content:`
The Basic Creator Plan gives you 5 Lead Magnet Slots to design professional, conversion-ready lead magnets using Cre8tlys AI tools. Access standard templates, custom branding, and editable layouts so you can attract new subscribers and showcase your expertise with ease.`},pro:{title:"Pro Covers",content:`
The Pro Covers Plan includes everything in Basic, plus unlimited custom cover uploads for both books and lead magnets. Personalize your visuals with full creative controlupload, test, and update covers that match your unique style and brand. Youll also gain access to thousands of royalty-free Unsplash images, making it easy to design stunning, professional-quality covers in seconds without worrying about licensing or costs.`},author:{title:"Authors Assistant",content:`
Transform your writing with intelligent support, not automation.
The Authors Assistant is your creative co-writer, an AI partner that helps you plan your story structure, build rich scenes, and craft powerful chapters without losing your authentic voice. Generate up to 750 pages with built-in editing tools that perfect your tone, pacing, and style. Plus, enjoy unlimited custom cover uploads to bring your book to life with a professional finish.`},bundle:{title:"All-In-One Bundle",content:`
The All-In-One Bundle gives you everything in a single discounted package:  
 5 Lead Magnet Slots to grow your audience  
 Pro Covers for both books and lead magnets  
 1 Authors Assistant Book Slot (750 pages + editor)  
A full creative suite that lets you write, design, and publish with complete control from start to finish.`},prompt_memory:{title:"Prompt Memory Subscription",content:`
The Prompt Memory Plan gives you a persistent AI memory across your entire Cre8tly Studio experience.
It learns your tone, writing style, and preferences, letting you generate faster, more accurate, and
on-brand results every time. Cancel anytime, no contracts.`}},{title:ot,content:ct}=et[it]||{};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl p-8 max-w-lg w-full text-white relative shadow-xl",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-3 right-3 text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ot}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:ct}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg font-semibold hover:opacity-90 transition",children:"Got it"})})]})})}function PlansPage(){const[it,g]=reactExports.useState(null),[et,ot]=reactExports.useState(null),{user:ct}=useAuth(),ut=async dt=>{if(!ct||!ct.id){y$4.error("Please sign in before selecting a plan");return}try{g(dt);const ft=localStorage.getItem("accessToken"),St=await axiosInstance.post("/checkout",{userId:ct.id,productType:dt},{headers:{Authorization:`Bearer ${ft}`}});window.location.href=St.data.url}catch(ft){console.error("Checkout error:",ft),y$4.error("Failed to start checkout session"),g(null)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center justify-center px-6 py-16",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold mb-12 tracking-tight text-center design-text",children:"Choose Your Plan"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-6xl",children:[jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-purple-600 via-blue-500 to-purple-600 shadow-[0_0_25px_rgba(147,51,234,0.4)] hover:shadow-[0_0_45px_rgba(147,51,234,0.7)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-white design-text",children:"Basic Creator"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"5 lead magnet slots"})," and access to all standard templates. Turn ideas into irresistible lead magnets fast."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("basic"),className:"text-blue-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-white design-text",children:"$47"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("basic"),disabled:it==="basic",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="basic"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-royalPurple hover:bg-purple-800 hover:shadow-[0_0_25px_rgba(147,51,234,0.6)] text-white design-text"}`,children:it==="basic"?"Redirecting...":"Select Basic Plan"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-400 design-text",children:"Pro Covers"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Everything in Basic plus ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"unlimited custom and unsplash cover uploads"}),". Single purchase unlocks pro covers for lifetime."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("pro"),className:"text-green-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-green-400 design-text",children:"$150"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("pro"),disabled:it==="pro",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="pro"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black design-text"}`,children:it==="pro"?"Redirecting...":"Pro Covers"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-pink-500 via-rose-400 to-pink-500 shadow-[0_0_25px_rgba(255,105,180,0.3)] hover:shadow-[0_0_45px_rgba(255,105,180,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-pink-400 design-text",children:"Authors Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:"AI-powered co-writer that helps you structure, write, and edit up to 750 pages while keeping your unique voice."}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("author"),className:"text-pink-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-pink-400 design-text",children:"$850 "})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("author"),disabled:it==="author",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="author"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-pink-600 hover:bg-pink-700 hover:shadow-[0_0_25px_rgba(255,105,180,0.6)] text-white design-text"}`,children:it==="author"?"Redirecting...":"Authors Assistant"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-yellow-400 via-amber-300 to-yellow-400 shadow-[0_0_25px_rgba(255,215,0,0.3)] hover:shadow-[0_0_45px_rgba(255,215,0,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-yellow-300 design-text",children:"All-In-One Bundle"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Basic, Pro Covers, and Authors Assistant"})," in one discounted package."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("bundle"),className:"text-yellow-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-yellow-300 design-text",children:"$999"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("bundle"),disabled:it==="bundle",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="bundle"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-yellow hover:bg-yellow hover:shadow-[0_0_25px_rgba(255,215,0,0.6)] text-black font-bold design-text"}`,children:it==="bundle"?"Redirecting...":"Get the Bundle"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-300 design-text",children:"Prompt Memory"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Unlock ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"AI Prompt Memory"})," your personalized creative memory that remembers your tone, style, and preferences across every generation. Stay consistent, save time, and build smarter prompts automatically."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("prompt_memory"),className:"text-green-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold mb-6 text-green-300 design-text",children:["$14.99",jsxRuntimeExports.jsx("span",{className:"text-lg font-normal text-gray-400",children:" / month"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut("prompt_memory"),disabled:it==="prompt_memory",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="prompt_memory"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black font-bold design-text"}`,children:it==="prompt_memory"?"Redirecting...":"Subscribe"})]})})]}),et&&jsxRuntimeExports.jsx(PlanDetailsModal,{plan:et,onClose:()=>ot(null)}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-10 text-center",children:" Secure Checkout"})]})}function t(it,g,et){return Math.max(it,Math.min(g,et))}class Animate{advance(g){var ft;if(!this.isRunning)return;let et=!1;if(this.lerp)this.value=(ot=this.value,ct=this.to,ut=60*this.lerp,dt=g,function(St,kt,Tt){return(1-Tt)*St+Tt*kt}(ot,ct,1-Math.exp(-ut*dt))),Math.round(this.value)===this.to&&(this.value=this.to,et=!0);else{this.currentTime+=g;const St=t(0,this.currentTime/this.duration,1);et=St>=1;const kt=et?1:this.easing(St);this.value=this.from+(this.to-this.from)*kt}var ot,ct,ut,dt;(ft=this.onUpdate)==null||ft.call(this,this.value,et),et&&this.stop()}stop(){this.isRunning=!1}fromTo(g,et,{lerp:ot=.1,duration:ct=1,easing:ut=St=>St,onStart:dt,onUpdate:ft}){this.from=this.value=g,this.to=et,this.lerp=ot,this.duration=ct,this.easing=ut,this.currentTime=0,this.isRunning=!0,dt==null||dt(),this.onUpdate=ft}}class Dimensions{constructor({wrapper:g,content:et,autoResize:ot=!0,debounce:ct=250}={}){jn(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});jn(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});jn(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=g,this.content=et,ot&&(this.debouncedResize=function(ut,dt){let ft;return function(){let St=arguments,kt=this;clearTimeout(ft),ft=setTimeout(function(){ut.apply(kt,St)},dt)}}(this.resize,ct),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var g,et;(g=this.wrapperResizeObserver)==null||g.disconnect(),(et=this.contentResizeObserver)==null||et.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(g,...et){let ot=this.events[g]||[];for(let ct=0,ut=ot.length;ct<ut;ct++)ot[ct](...et)}on(g,et){var ot;return(ot=this.events[g])!=null&&ot.push(et)||(this.events[g]=[et]),()=>{var ct;this.events[g]=(ct=this.events[g])==null?void 0:ct.filter(ut=>et!==ut)}}off(g,et){var ot;this.events[g]=(ot=this.events[g])==null?void 0:ot.filter(ct=>et!==ct)}destroy(){this.events={}}}const e=100/6;class VirtualScroll{constructor(g,{wheelMultiplier:et=1,touchMultiplier:ot=1}){jn(this,"onTouchStart",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:g})});jn(this,"onTouchMove",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g,ct=-(et-this.touchStart.x)*this.touchMultiplier,ut=-(ot-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:ct,y:ut},this.emitter.emit("scroll",{deltaX:ct,deltaY:ut,event:g})});jn(this,"onTouchEnd",g=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:g})});jn(this,"onWheel",g=>{let{deltaX:et,deltaY:ot,deltaMode:ct}=g;et*=ct===1?e:ct===2?this.windowWidth:1,ot*=ct===1?e:ct===2?this.windowHeight:1,et*=this.wheelMultiplier,ot*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:et,deltaY:ot,event:g})});jn(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=g,this.wheelMultiplier=et,this.touchMultiplier=ot,this.touchStart={x:null,y:null},this.emitter=new Emitter,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(g,et){return this.emitter.on(g,et)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Lenis{constructor({wrapper:g=window,content:et=document.documentElement,wheelEventsTarget:ot=g,eventsTarget:ct=ot,smoothWheel:ut=!0,syncTouch:dt=!1,syncTouchLerp:ft=.075,touchInertiaMultiplier:St=35,duration:kt,easing:Tt=Yt=>Math.min(1,1.001-Math.pow(2,-10*Yt)),lerp:Rt=!kt&&.1,infinite:jt=!1,orientation:$t="vertical",gestureOrientation:Ft="vertical",touchMultiplier:Ht=1,wheelMultiplier:Kt=1,autoResize:Bt=!0,__experimental__naiveDimensions:Ut=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:Yt,deltaY:Jt,event:Zt})=>{if(Zt.ctrlKey)return;const en=Zt.type.includes("touch"),tn=Zt.type.includes("wheel");if(this.options.syncTouch&&en&&Zt.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const nn=Yt===0&&Jt===0,ln=this.options.gestureOrientation==="vertical"&&Jt===0||this.options.gestureOrientation==="horizontal"&&Yt===0;if(nn||ln)return;let an=Zt.composedPath();if(an=an.slice(0,an.indexOf(this.rootElement)),an.find(yn=>{var vn,hn,pn,rn,on;return((vn=yn.hasAttribute)===null||vn===void 0?void 0:vn.call(yn,"data-lenis-prevent"))||en&&((hn=yn.hasAttribute)===null||hn===void 0?void 0:hn.call(yn,"data-lenis-prevent-touch"))||tn&&((pn=yn.hasAttribute)===null||pn===void 0?void 0:pn.call(yn,"data-lenis-prevent-wheel"))||((rn=yn.classList)===null||rn===void 0?void 0:rn.contains("lenis"))&&!(!((on=yn.classList)===null||on===void 0)&&on.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked)return void Zt.preventDefault();if(this.isSmooth=this.options.syncTouch&&en||this.options.smoothWheel&&tn,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();Zt.preventDefault();let sn=Jt;this.options.gestureOrientation==="both"?sn=Math.abs(Jt)>Math.abs(Yt)?Jt:Yt:this.options.gestureOrientation==="horizontal"&&(sn=Yt);const dn=en&&this.options.syncTouch,mn=en&&Zt.type==="touchend"&&Math.abs(sn)>5;mn&&(sn=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+sn,Object.assign({programmatic:!1},dn?{lerp:mn?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const Yt=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-Yt),this.emit()}},window.lenisVersion="1.0.42",g!==document.documentElement&&g!==document.body||(g=window),this.options={wrapper:g,content:et,wheelEventsTarget:ot,eventsTarget:ct,smoothWheel:ut,syncTouch:dt,syncTouchLerp:ft,touchInertiaMultiplier:St,duration:kt,easing:Tt,lerp:Rt,infinite:jt,gestureOrientation:Ft,orientation:$t,touchMultiplier:Ht,wheelMultiplier:Kt,autoResize:Bt,__experimental__naiveDimensions:Ut},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:g,content:et,autoResize:Bt}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=dt||ut,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new VirtualScroll(ct,{touchMultiplier:Ht,wheelMultiplier:Kt}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(g,et){return this.emitter.on(g,et)}off(g,et){return this.emitter.off(g,et)}setScroll(g){this.isHorizontal?this.rootElement.scrollLeft=g:this.rootElement.scrollTop=g}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(g){const et=g-(this.time||g);this.time=g,this.animate.advance(.001*et)}scrollTo(g,{offset:et=0,immediate:ot=!1,lock:ct=!1,duration:ut=this.options.duration,easing:dt=this.options.easing,lerp:ft=!ut&&this.options.lerp,onComplete:St,force:kt=!1,programmatic:Tt=!0}={}){if(!this.isStopped&&!this.isLocked||kt){if(["top","left","start"].includes(g))g=0;else if(["bottom","right","end"].includes(g))g=this.limit;else{let Rt;if(typeof g=="string"?Rt=document.querySelector(g):g!=null&&g.nodeType&&(Rt=g),Rt){if(this.options.wrapper!==window){const $t=this.options.wrapper.getBoundingClientRect();et-=this.isHorizontal?$t.left:$t.top}const jt=Rt.getBoundingClientRect();g=(this.isHorizontal?jt.left:jt.top)+this.animatedScroll}}if(typeof g=="number"){if(g+=et,g=Math.round(g),this.options.infinite?Tt&&(this.targetScroll=this.animatedScroll=this.scroll):g=t(0,g,this.limit),ot)return this.animatedScroll=this.targetScroll=g,this.setScroll(this.scroll),this.reset(),void(St==null||St(this));if(!Tt){if(g===this.targetScroll)return;this.targetScroll=g}this.animate.fromTo(this.animatedScroll,g,{duration:ut,easing:dt,lerp:ft,onStart:()=>{ct&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(Rt,jt)=>{this.isScrolling=!0,this.velocity=Rt-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=Rt,this.setScroll(this.scroll),Tt&&(this.targetScroll=Rt),jt||this.emit(),jt&&(this.reset(),this.emit(),St==null||St(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(g=this.animatedScroll,et=this.limit,(g%et+et)%et):this.animatedScroll;var g,et}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(g){this.__isSmooth!==g&&(this.__isSmooth=g,this.toggleClassName("lenis-smooth",g))}get isScrolling(){return this.__isScrolling}set isScrolling(g){this.__isScrolling!==g&&(this.__isScrolling=g,this.toggleClassName("lenis-scrolling",g))}get isStopped(){return this.__isStopped}set isStopped(g){this.__isStopped!==g&&(this.__isStopped=g,this.toggleClassName("lenis-stopped",g))}get isLocked(){return this.__isLocked}set isLocked(g){this.__isLocked!==g&&(this.__isLocked=g,this.toggleClassName("lenis-locked",g))}get className(){let g="lenis";return this.isStopped&&(g+=" lenis-stopped"),this.isLocked&&(g+=" lenis-locked"),this.isScrolling&&(g+=" lenis-scrolling"),this.isSmooth&&(g+=" lenis-smooth"),g}toggleClassName(g,et){this.rootElement.classList.toggle(g,et),this.emitter.emit("className change",this)}}const App=()=>{const it=useLocation();return reactExports.useEffect(()=>{const g=new Lenis({duration:1.4,easing:ot=>1-Math.pow(1-ot,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function et(ot){g.raf(ot),requestAnimationFrame(et)}return requestAnimationFrame(et),g.on("scroll",({scroll:ot,limit:ct,velocity:ut,direction:dt,progress:ft})=>{}),()=>g.destroy()},[]),reactExports.useEffect(()=>{if(it.hash){const g=document.querySelector(it.hash);g&&setTimeout(()=>{g.scrollIntoView({behavior:"smooth",block:"start"})},200)}},[it]),jsxRuntimeExports.jsxs("main",{className:"relative min-h-screen bg-transparent",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx("section",{id:"landing",className:"padding",children:jsxRuntimeExports.jsx(Landing,{})}),jsxRuntimeExports.jsx(Footer,{})]})},ReactToastify="",index="";function ForgotPassword(){const[it,g]=reactExports.useState(""),[et,ot]=reactExports.useState(!1),ct=useNavigate(),ut=async dt=>{var ft,St;if(dt.preventDefault(),!it)return y$4.error("Please enter your email address.");ot(!0);try{console.log("sending email:",it);const kt=await axiosInstance.post("/auth/forgot-password",{email:it});y$4.success(kt.data.message),g(""),setTimeout(()=>ct("/login"),2500)}catch(kt){console.error("Forgot password error:",kt),y$4.error(((St=(ft=kt.response)==null?void 0:ft.data)==null?void 0:St.message)||"Error sending reset email.")}finally{ot(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Forgot Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your email below and well send you a link to reset your password."}),jsxRuntimeExports.jsxs("form",{onSubmit:ut,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"email",value:it,onChange:dt=>g(dt.target.value),placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Reset Link"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Remember your password?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}function ResetPassword(){const[it]=useSearchParams(),[g,et]=reactExports.useState(""),[ot,ct]=reactExports.useState(""),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(!1),kt=useNavigate(),Tt=it.get("token");reactExports.useEffect(()=>{Tt||(y$4.error("Invalid or missing reset token."),kt("/login"))},[Tt,kt]);const Rt=async jt=>{var $t,Ft;if(jt.preventDefault(),!g||!ot)return y$4.error("Please enter and confirm your new password.");if(g!==ot)return y$4.error("Passwords do not match.");dt(!0);try{const Ht=await axiosInstance.post("/auth/reset-password",{token:Tt,newPassword:g});y$4.success(Ht.data.message||"Password reset successful!"),St(!0),setTimeout(()=>kt("/login"),3500)}catch(Ht){console.error("Reset password error:",Ht),y$4.error(((Ft=($t=Ht.response)==null?void 0:$t.data)==null?void 0:Ft.message)||"Error resetting password.")}finally{dt(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:ft?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green mb-6",children:"Password Reset Successful"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6",children:"Your password has been updated successfully. You can now log in with your new password."}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>kt("/login"),className:"bg-green text-black font-semibold px-6 py-3 rounded-lg hover:opacity-90 transition-all",children:"Go to Login"})})]},"success"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Reset Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your new password below to reset your account."}),jsxRuntimeExports.jsxs("form",{onSubmit:Rt,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"password",value:g,onChange:jt=>et(jt.target.value),placeholder:"New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"password",value:ot,onChange:jt=>ct(jt.target.value),placeholder:"Confirm New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ut,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ut?"Resetting...":"Reset Password"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-6",children:jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})})]},"form")})}),jsxRuntimeExports.jsx(Footer,{})]})}function EbookModal({ebook:it,onClose:g,onBuy:et,loadingBook:ot}){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl max-w-2xl w-full shadow-xl p-8 relative",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white text-xl",children:""}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:it.image_url,alt:it.title,className:"w-56 h-auto object-contain rounded-lg border border-gray-700"})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-left",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl font-bold text-white mb-3",children:[it.title," (guide)"]}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 text-sm leading-relaxed space-y-3 overflow-y-auto max-h-[300px] pr-2 mb-5 py-4",dangerouslySetInnerHTML:{__html:it.description}}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold text-white mb-5",children:["$",it.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>et(it),disabled:ot===it.product_type,className:`py-3 px-8 rounded-xl text-lg font-semibold shadow-lg ${ot===it.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen text-black hover:bg-green-400 transition"}`,children:ot===it.product_type?"Redirecting...":"Buy Now"})]})]})})}function EbooksStore(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0),{user:St}=useAuth();reactExports.useEffect(()=>{(async()=>{try{const Rt=await axiosInstance.get("/ebooks");g(Rt.data)}catch(Rt){console.error("Failed to fetch ebooks:",Rt),y$4.error("Failed to load ebooks")}finally{ft(!1)}})()},[]),reactExports.useEffect(()=>{const Tt=new Lenis({duration:1.4,easing:jt=>1-Math.pow(1-jt,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function Rt(jt){Tt.raf(jt),requestAnimationFrame(Rt)}return requestAnimationFrame(Rt),Tt.on("scroll",({scroll:jt,limit:$t,velocity:Ft,direction:Ht,progress:Kt})=>{}),()=>Tt.destroy()},[]);const kt=async Tt=>{var Rt;try{ot(Tt.product_type);const jt=localStorage.getItem("accessToken"),$t=await axiosInstance.post("/ebooks/checkout",{userId:(St==null?void 0:St.id)||null,title:Tt.title,description:Tt.description,price:Tt.price,productType:Tt.product_type},jt?{headers:{Authorization:`Bearer ${jt}`}}:{});window.location.href=$t.data.url}catch(jt){console.error("Checkout error:",((Rt=jt.response)==null?void 0:Rt.data)||jt.message),y$4.error("Failed to start checkout session"),ot(null)}};return dt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Loading ebooks..."}):it.length===0?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"No ebooks available yet."}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-12 tracking-tight text-center lead-text",children:["Shop Our ",jsxRuntimeExports.jsx("span",{className:"text-green design-text",children:"Premium Guides"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center max-w-2xl mb-16 leading-relaxed",children:"Professionally written, conversion-focused guides generated by our software Cre8tly Studio. Instantly downloadable after purchase, no subscriptions, just pure value."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-7xl",children:it.map(Tt=>jsxRuntimeExports.jsx("div",{className:`relative rounded-3xl p-[2px] bg-gradient-to-r from-[#9ca3af] via-[#f3f4f6] to-[#9ca3af]
        shadow-[0_0_25px_rgba(255,255,255,0.15)] hover:shadow-[0_0_45px_rgba(255,255,255,0.35)]
        transition-all duration-300`,children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-[#1a1a1a] via-[#111111] to-[#0b0b0b] p-8 flex flex-col text-center shadow-[inset_0_0_20px_rgba(255,255,255,0.05)] min-h-[550px] relative overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.05)_0%,rgba(255,255,255,0.15)_40%,rgba(255,255,255,0)_60%)] opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 relative",children:jsxRuntimeExports.jsx("img",{src:Tt.image_url,alt:Tt.title,className:"rounded-lg w-48 h-auto object-contain border border-gray-700 shadow-[0_4px_20px_rgba(0,0,0,0.4)]"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-3 text-white min-h-[64px] flex items-center justify-center",children:Tt.title}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 mb-5 text-sm leading-relaxed line-clamp-3 text-left",dangerouslySetInnerHTML:{__html:Tt.description}}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(Tt),className:"text-gray-400 text-sm hover:text-white hover:underline mb-4 transition-colors",children:"Read More"}),jsxRuntimeExports.jsxs("div",{className:"mt-auto",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-extrabold mb-5 text-white tracking-wide drop-shadow-[0_0_5px_rgba(255,255,255,0.2)]",children:["$",Tt.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>kt(Tt),disabled:et===Tt.product_type,className:`w-full py-3 px-6 text-lg font-semibold rounded-xl transition-all duration-300 
                ${et===Tt.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-gradient-to-r from-[#d1d5db] to-[#9ca3af] text-black hover:from-white hover:to-gray-300 hover:shadow-[0_0_35px_rgba(255,255,255,0.5)]"}`,children:et===Tt.product_type?"Redirecting...":"Purchase Guide"})]})]})},Tt.id))}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-12 text-center",children:" Secure Checkout"}),ct&&jsxRuntimeExports.jsx(EbookModal,{ebook:ct,onClose:()=>ut(null),onBuy:kt,loadingBook:et})]})}const BookContext=reactExports.createContext();function BookProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState([]),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const kt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(kt.data)}catch(kt){console.error("Error fetching books:",kt),ft(kt)}finally{ut(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Tt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(Rt=>JSON.stringify(Rt)===JSON.stringify(Tt.data)?Rt:Tt.data)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(BookContext.Provider,{value:{books:et,setBooks:ot,fetchBooks:St,loading:ct,error:dt},children:it})}function useBooks(){return reactExports.useContext(BookContext)}function BookPromptModal({isOpen:it,onClose:g,bookId:et,partNumber:ot=1,accessToken:ct,onSubmitted:ut,setShowGenerating:dt,setProgress:ft,initialBookData:St}){const[kt,Tt]=reactExports.useState(""),[Rt,jt]=reactExports.useState(10),[$t,Ft]=reactExports.useState(""),[Ht,Kt]=reactExports.useState(null),[Bt,Ut]=reactExports.useState(""),[Yt,Jt]=reactExports.useState(!1),[Zt,en]=reactExports.useState(!1),[tn,nn]=reactExports.useState(!1),[ln,an]=reactExports.useState((St==null?void 0:St.title)||""),[sn,dn]=reactExports.useState((St==null?void 0:St.authorName)||""),[mn,yn]=reactExports.useState((St==null?void 0:St.bookType)||"fiction");reactExports.useEffect(()=>{St&&(console.log(" Syncing initialBookData to state:",St),an(St.title||""),dn(St.authorName||""),yn(St.bookType||"fiction"))},[St]),reactExports.useEffect(()=>{it||(Tt(""),jt(10),Ft(""),Kt(null),Ut(""),dn(""),ft(0))},[it]),reactExports.useEffect(()=>{async function hn(){var pn;if(et)try{const on=(await axios$1.get(`https://cre8tlystudio.com/books/draft/${et}`)).data;on!=null&&on.draft_text?(Tt(on.draft_text),on.title&&an(on.title),on.link&&Ft(on.link),on.author_name&&dn(on.author_name),on.book_type&&yn(on.book_type),y$4.info(`Loaded last draft from ${new Date(on.last_saved_at).toLocaleString()}`)):console.log("No draft found for this book.")}catch(rn){((pn=rn.response)==null?void 0:pn.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",rn),y$4.error("Failed to fetch saved draft."))}}hn()},[et]),reactExports.useEffect(()=>{async function hn(){var pn;if(et)try{const rn=ot>1?`https://cre8tlystudio.com/api/books/${et}/part/${ot}/draft`:`https://cre8tlystudio.com/api/books/draft/${et}`,gn=(await axios$1.get(rn,{headers:{Authorization:`Bearer ${ct}`}})).data;gn!=null&&gn.draft_text?(Tt(gn.draft_text),gn.title&&Ut(gn.title),gn.link&&Ft(gn.link),gn.author_name&&dn(gn.author_name),gn.book_type&&yn(gn.book_type),y$4.info(`Loaded last draft from ${new Date(gn.last_saved_at||gn.updated_at||Date.now()).toLocaleString()}`)):console.log("No draft found for this book or part.")}catch(rn){((pn=rn.response)==null?void 0:pn.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",rn),y$4.error("Failed to fetch saved draft."))}}hn()},[et,ot]);async function vn(hn){var rn,on;if(hn.preventDefault(),!kt.trim()){y$4.error("Please enter your book idea or prompt first.");return}g(),Jt(!0),ft(0),dt(!0);let pn;try{pn=setInterval(()=>{ft(un=>un<90?un+Math.random()*4:un)},400);const gn=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{bookId:et,prompt:kt,pages:Rt,link:$t,coverImage:Ht,title:Bt,authorName:sn,bookName:ln,partNumber:ot,bookType:mn},{headers:{Authorization:`Bearer ${ct}`},maxBodyLength:1/0,maxContentLength:1/0});clearInterval(pn),ft(100),y$4.success(" Book section generated successfully!"),dt(!1),await new Promise(un=>setTimeout(un,1e3)),window.dispatchEvent(new Event("refreshBooks")),typeof ut=="function"&&setTimeout(()=>ut(et,kt),1e3)}catch(gn){clearInterval(pn),ft(0),dt(!1),y$4.error(((on=(rn=gn.response)==null?void 0:rn.data)==null?void 0:on.message)||"Book generation failed. Try again."),console.error(" Book generation error:",gn)}finally{Jt(!1)}}return it?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#0b0b0b] text-white flex flex-col overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center px-6 py-5 border-b border-gray-700 bg-[#111]",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold text-white text-center",children:[" Build Your Novel  Part ",ot]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute left-6 md:left-36 text-silver hover:text-white transition text-lg",children:" Back"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-8 max-w-5xl mx-auto w-full",children:jsxRuntimeExports.jsx(BookPromptForm,{text:kt,setText:Tt,pages:Rt,setPages:jt,link:$t,setLink:Ft,cover:Ht,setCover:Kt,title:Bt,setTitle:Ut,authorName:sn,setAuthorName:dn,bookName:ln,setBookName:an,bookType:mn,setBookType:yn,onSubmit:vn,loading:Yt,showPreview:Zt,setShowPreview:en,setShowGenerating:dt,bookId:et,setBookId:()=>{},partLocked:tn,partNumber:ot,onClose:g,setProgress:ft})})]}):null}function BookPartsModal({bookId:it,accessToken:g,onClose:et}){const[ot,ct]=reactExports.useState([]),[ut,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(null);return reactExports.useEffect(()=>{async function kt(){try{const Rt=await(await fetch(`https://cre8tlystudio.com/api/books/${it}/parts`,{headers:{Authorization:`Bearer ${g}`}})).json();ct(Rt)}catch(Tt){console.error(" Failed to load book parts:",Tt)}finally{dt(!1)}}kt()},[it,g]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl p-6 relative",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:" Book Parts"}),ut?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"Loading parts..."}):ot.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"No parts found yet."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:ot.map(kt=>jsxRuntimeExports.jsxs("li",{className:"flex justify-between items-center border-b border-gray-700 pb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold",children:["Part ",kt.part_number,": ",kt.title||"Untitled"]}),jsxRuntimeExports.jsxs("p",{className:"text-white",children:["Total pages: ",kt.pages]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:new Date(kt.created_at).toLocaleString()})]}),jsxRuntimeExports.jsx("button",{onClick:()=>St({url:kt.file_url,title:kt.title,partNumber:kt.part_number}),className:"px-3 py-1 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] rounded text-sm text-black font-semibold hover:opacity-90 transition",children:"Open PDF"})]},kt.id))}),jsxRuntimeExports.jsx("button",{onClick:et,className:"absolute top-3 right-3 text-white text-xl hover:text-red-400 transition",children:""})]})}),ft&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ft.url,fileTitle:ft.title,partNumber:ft.partNumber,sourceType:"book",onClose:()=>St(null)})]})}function BookCardList({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),{accessToken:kt}=useAuth();function Tt(Rt){St(Rt),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[it.map(Rt=>jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate mb-1",children:Rt.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Rt.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Rt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Rt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Rt.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Rt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Rt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Rt.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Rt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Rt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Rt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Rt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Rt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-3 w-full",children:[!Rt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Rt.id,Rt.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsx("button",{onClick:()=>ct({url:Rt.pdf_url,title:Rt.book_name||"Untitled",partNumber:Rt.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Rt.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Rt.pages>=750?"Download Book":"Preview"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsxs("button",{onClick:()=>Tt(Rt.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]}),Rt.prompt&&Rt.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Rt.id,(Rt.part_number||1)+1),className:"w-full bg-gradient-to-r from-green to-royalPurple text-black rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Rt.pages>=740?"Finish Book":`Continue (Part ${(Rt.part_number||1)+1})`})]})]})]},Rt.id)),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:kt,onClose:()=>dt(!1)})]})}function NewBookModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ct,ut]=reactExports.useState(""),[dt,ft]=reactExports.useState(""),[St,kt]=reactExports.useState(!1);async function Tt(){if(!et||!ct||!dt){alert("Please fill in all fields, including book type.");return}it({title:et,authorName:ct,bookType:dt})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Set Up Your Book"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Book Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Burning City",value:et,onChange:Rt=>ot(Rt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Dean Koontz",value:ct,onChange:Rt=>ut(Rt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2",children:"Select Book Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:["Fiction","Non-Fiction","Educational"].map(Rt=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:Rt.toLowerCase(),checked:dt===Rt.toLowerCase(),onChange:jt=>ft(jt.target.value),className:"accent-royalPurple"}),jsxRuntimeExports.jsx("span",{className:"capitalize",children:Rt})]},Rt))})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-3",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Tt,disabled:St,className:"bg-gradient-to-r from-green to-royalPurple px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:St?"Saving...":"Continue"})]})]})})}function OnboardingGuide({steps:it=[],onFinish:g}){const[et,ot]=reactExports.useState(0),[ct,ut]=reactExports.useState(null);reactExports.useEffect(()=>{if(it.length>0&&it[et]){const kt=document.querySelector(it[et].target);if(kt){const Tt=kt.getBoundingClientRect();ut(Tt)}}},[et,it]);function dt(){et<it.length-1?ot(et+1):g==null||g()}function ft(){et>0&&ot(et-1)}if(!it.length||!ct)return null;const St=it[et];return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 bg-black/70 z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute border-4 border-emerald-400 rounded-xl shadow-[0_0_25px_5px_rgba(16,185,129,0.6)] pointer-events-none",style:{top:ct.top-8,left:ct.left-8,width:ct.width+16,height:ct.height+16},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute bg-[#111827] text-white rounded-xl shadow-lg border border-emerald-500/30 p-4 w-72",style:{top:ct.bottom+12,left:ct.left},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-4 leading-relaxed",children:St.content}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("button",{onClick:ft,disabled:et===0,className:`px-3 py-1 rounded-lg border border-gray-600 hover:bg-gray-800 transition ${et===0&&"opacity-50 cursor-not-allowed"}`,children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition",children:et===it.length-1?"Finish":"Next"})]})]})]},"overlay")})}function BookGrid({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ct]=reactExports.useState(null),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),{accessToken:Rt,user:jt,refreshUser:$t}=useAuth(),Ft=[{target:".book-title",content:"This displays the title of your book project."},{target:".pages-progress",content:"Displays how many pages youve used so far. Each book slot includes up to 750 total pages."},{target:".book-status",content:"Indicates your books current status."},{target:".book-actions",content:"Use these buttons to add chapters, preview, or continue your book."}];reactExports.useEffect(()=>{if(it.length>0&&jt&&!jt.has_completed_book_onboarding){const Kt=setTimeout(()=>Tt(!0),800);return()=>clearTimeout(Kt)}},[it,jt]);function Ht(Kt){St(Kt),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:it.map(Kt=>jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx("h3",{className:"book-title text-white text-sm font-semibold truncate mb-2",children:Kt.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-400 mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Kt.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Kt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"pages-progress flex flex-col items-center my-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Kt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Kt.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Kt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Kt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Kt.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Kt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Kt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Kt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Kt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"book-actions flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Kt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Kt.id,Kt.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create Chapter",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Kt.has_part_1===0&&(Kt.is_draft===1||Kt.draft_text)&&jsxRuntimeExports.jsxs("button",{onClick:()=>g(Kt.id,Kt.part_number||1),className:"w-full bg-blue hover:bg-blue text-white rounded-lg py-2 text-sm font-semibold flex items-center justify-center gap-2 transition-all",title:"Continue Draft",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),Kt.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct({url:Kt.pdf_url,title:Kt.book_name||"Untitled",partNumber:Kt.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview Book",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Kt.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Kt.pages>=750?"Download Book":"Preview"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ht(Kt.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",title:"View All Parts",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]})]}),Kt.prompt&&Kt.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Kt.id,(Kt.part_number||1)+1),className:"w-full bg-royalPurple text-white rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",title:"Continue Story",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Kt.pages>=740?"Finish Book":`Continue Story (Part ${(Kt.part_number||1)+1})`})]})]})]},Kt.id))}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ct(null)}),ut&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:Rt,onClose:()=>dt(!1)}),kt&&jsxRuntimeExports.jsx(OnboardingGuide,{steps:Ft,onFinish:async()=>{try{localStorage.setItem("bookOnboardingComplete","true"),Tt(!1),await axiosInstance.post("https://cre8tlystudio.com/api/books/book-complete",{userId:jt==null?void 0:jt.id},{headers:{Authorization:`Bearer ${Rt}`}}),await $t()}catch(Kt){console.error(" Failed to save onboarding status:",Kt)}}})]})}function BooksDashboard(){const{accessToken:it}=useAuth(),{books:g,setBooks:et,fetchBooks:ot,loading:ct}=useBooks(),[ut,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),[Rt,jt]=reactExports.useState(0),[$t,Ft]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(1),[Bt,Ut]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(null),Zt=useNavigate(),en=10,tn=[...g].sort((vn,hn)=>new Date(hn.created_at)-new Date(vn.created_at)),nn=Math.ceil(tn.length/en),ln=(Ht-1)*en,an=tn.slice(ln,ln+en);async function sn(vn,hn=1){let pn=g.find(gn=>gn.id===vn);try{const gn=await axios$1.get(`https://cre8tlystudio.com/api/books/${vn}`,{headers:{Authorization:`Bearer ${it}`},withCredentials:!0});gn.data&&(console.log(" Fresh data from backend:",gn.data),pn={...pn,...gn.data})}catch(gn){console.error(" Failed to fetch book by ID:",gn),toast.error("Could not refresh book info  using cached version")}if(!pn)return;const rn=!pn.author_name||pn.author_name.trim()==="",on=!pn.title||pn.title.trim()===""||pn.title==="Untitled"||pn.title==="Untitled Book";if(rn||on){St({id:vn,part_number:hn}),Ut(!0);return}St({id:pn.id,part_number:hn,title:pn.title||pn.book_name||"",author_name:pn.author_name||"",book_type:pn.bookType||pn.book_type||"fiction"}),dt(!0)}function dn(vn,hn){et(pn=>pn.map(rn=>rn.id===vn?{...rn,prompt:hn,status:"pending"}:rn)),setTimeout(ot,3e3)}function mn({title:vn,authorName:hn,bookType:pn}){Jt({title:vn,authorName:hn,bookType:pn}),Ut(!1),dt(!0)}async function yn(){try{await(await fetch("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${it}`},credentials:"include"})).json()&&ot()}catch(vn){console.error("Failed to refresh slots:",vn)}}return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"book",items:g,onCheckout:()=>Zt("/plans")}),ct?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:()=>Zt("/plans"),type:"book"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookGrid,{books:an,onAddPrompt:(vn,hn)=>sn(vn,hn),onGenerateNext:(vn,hn)=>sn(vn,hn)}),jsxRuntimeExports.jsx(BookCardList,{books:an,onAddPrompt:(vn,hn)=>sn(vn,hn),onGenerateNext:(vn,hn)=>sn(vn,hn)}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:Ht,totalPages:nn,onPageChange:Kt}),jsxRuntimeExports.jsx(SupportTab,{})]}),Bt&&ft&&jsxRuntimeExports.jsx(NewBookModal,{bookId:ft.id,accessToken:it,onCreate:mn,onClose:()=>Ut(!1)}),ft&&jsxRuntimeExports.jsx(BookPromptModal,{isOpen:ut,onClose:()=>dt(!1),bookId:ft.id,partNumber:ft.part_number,accessToken:it,setShowGenerating:Tt,setProgress:jt,onSubmitted:dn,initialBookData:{title:(Yt==null?void 0:Yt.title)||ft.title||"",authorName:(Yt==null?void 0:Yt.authorName)||ft.author_name||"",bookType:(Yt==null?void 0:Yt.bookType)||ft.book_type||"fiction"}}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:$t,onClose:()=>Ft(!1),onRefresh:yn,isFirstTime:g.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:kt,progress:Rt,type:"book"})]})})}function DashboardSettings(){const{user:it,setUser:g}=useAuth(),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1),Tt=reactExports.useRef(null);reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;(async()=>{try{const Bt=await axiosInstance.get(`upload-data/user/settings/${it.id}`);ot(Bt.data.settings)}catch(Bt){console.error("Failed to load settings:",Bt),y$4.error("Failed to load brand settings.")}})()},[it==null?void 0:it.id]);const Rt=async()=>{if(!ct){y$4.warning("Please select a file first.");return}const Kt=new FileReader;Kt.onloadend=async()=>{const Bt=Kt.result.split(",")[1];ft(!0);try{const Ut=await axiosInstance.post("upload-data/user/settings/upload",{user_id:it.id,file_name:ct.name,file_data:Bt});ot(Yt=>({...Yt,brand_identity_file:Ut.data.fileUrl})),g(Yt=>({...Yt,brand_identity_file:Ut.data.fileUrl})),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:Ut.data.fileUrl})),y$4.success("Brand file uploaded successfully!"),ut(null),Tt.current&&(Tt.current.value="")}catch(Ut){console.error(Ut),y$4.error("Upload failed. Please try again.")}finally{ft(!1)}},Kt.readAsDataURL(ct)},jt=async()=>{try{(await axiosInstance.delete(`upload-data/user/settings/remove/${it.id}`)).data.success?(ot(Bt=>({...Bt,brand_identity_file:null})),g(Bt=>({...Bt,brand_identity_file:null})),ut(null),Tt.current&&(Tt.current.value=""),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:null})),y$4.info("Brand identity file removed. Defaults restored.")):y$4.warning("Failed to remove brand file. Try again.")}catch(Kt){console.error("Error removing brand file:",Kt),y$4.error("Error removing file.")}},$t=async()=>{try{await axiosInstance.put("upload-data/user/settings/update-cta",{userId:it.id,cta:(et==null?void 0:et.cta)||""}),g(Kt=>({...Kt,cta:et==null?void 0:et.cta})),localStorage.setItem("user",JSON.stringify({...it,cta:et==null?void 0:et.cta})),kt(!0),y$4.success("CTA saved successfully!"),setTimeout(()=>kt(!1),3e3)}catch(Kt){console.error("Failed to update CTA:",Kt),y$4.error("Failed to update CTA. Please try again.")}},Ht=(()=>{if(!it)return[];const Kt=[];return it.has_book&&Kt.push("Assistant"),it.has_magnet&&Kt.push("Magnets"),it.pro_covers&&Kt.push("Pro Covers"),Kt})();return jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full min-h-screen bg-[#030712] text-white",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-5",children:[jsxRuntimeExports.jsxs("div",{className:"mb-10 border-b border-gray-800 pb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:"Brand Settings"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your brand tone and upload a reference file for AI generation."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-2xl p-8 mb-10 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white",children:"Your Plan"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:[new Date().toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," "]})]}),Ht.length>0?jsxRuntimeExports.jsx("div",{className:"grid sm:grid-cols-3 gap-6",children:Ht.map(Kt=>{let Bt="active",Ut=null;return Kt.includes("Assistant")?(Ut=(it==null?void 0:it.book_slots)??0,Ut<=0&&(Bt="expired")):Kt.includes("Magnets")?(Ut=(it==null?void 0:it.magnet_slots)??0,Ut<=0&&(Bt="expired")):Kt.includes("Pro")&&(Bt=it!=null&&it.pro_covers?"lifetime":"expired"),jsxRuntimeExports.jsxs("div",{className:`relative flex flex-col justify-between transition-all rounded-xl p-5 border shadow-inner
              ${Bt==="expired"?"bg-[#0c0f18]/80 border-gray-800 opacity-70":"bg-[#111827]/80 hover:bg-[#1f2937]/80 border-gray-700 hover:border-gray-600 hover:shadow-[0_0_20px_rgba(0,255,170,0.15)]"}`,children:[jsxRuntimeExports.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide px-2 py-1 rounded-md mb-2 self-start ${Bt==="expired"?"text-red-400 bg-red-400/10":"text-green bg-green-400/10"}`,children:Kt.includes("Pro")||Bt==="active"?"Active":"Expired"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Kt.includes("Assistant")&&jsxRuntimeExports.jsxs("svg",{className:"w-6 h-6 text-hotPink",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20l9-5-9-5-9 5 9 5z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12l9-5-9-5-9 5 9 5z"})]}),Kt.includes("Magnets")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11M9 21V3m12 7h-5a2 2 0 00-2 2v9"})}),Kt.includes("Pro")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-royalPurple",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m9-9H3"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:Kt})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:Kt.includes("Assistant")?"Access advanced book creation and AI writing tools.":Kt.includes("Magnets")?"Generate digital products and marketing assets.":"Unlock pro cover uploads and customization tools."}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:Bt==="lifetime"?jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-gray-500 tracking-wide",children:"Lifetime"}):jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Slots remaining:"," ",jsxRuntimeExports.jsx("span",{className:`font-semibold ${Ut>0?"text-gray-300":"text-red-400"}`,children:Ut})]})})]},Kt)})}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No active plan detected. Please contact support if this seems incorrect."})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-3 shadow-lg mb-8",children:et!=null&&et.brand_identity_file?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Active Brand File"})}),jsxRuntimeExports.jsx("button",{onClick:jt,className:"text-xs bg-red-600 hover:bg-red-700 px-3 py-1.5 rounded-md font-semibold shadow-sm transition",children:"Remove"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic",children:["Uploaded on: ",new Date().toLocaleDateString()]})]}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center",children:"No brand identity uploaded yet."})}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Upload New Brand File"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:["Accepted formats:"," ",jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:".pdf, .docx, .doc, .txt"})," (max 5 MB)"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 w-full",children:[jsxRuntimeExports.jsx("input",{ref:Tt,type:"file",accept:".pdf,.docx,.doc,.txt",onChange:Kt=>ut(Kt.target.files[0]),className:"w-full text-sm text-gray-300 file:mr-3 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-green-500 file:to-purple-600 hover:file:opacity-90"}),ct&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic mt-1",children:["Selected: ",jsxRuntimeExports.jsx("span",{className:"text-gray-200",children:ct.name})]})]}),jsxRuntimeExports.jsxs("button",{onClick:Rt,disabled:dt,className:`relative w-full sm:w-auto px-6 py-2.5 rounded-lg font-semibold transition-all duration-300
    ${dt?"opacity-60 cursor-not-allowed bg-gradient-to-r from-green-700 to-green-600":"bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-400 hover:to-emerald-500 hover:shadow-[0_0_20px_rgba(34,197,94,0.4)]"}
    text-white shadow-[inset_0_0_6px_rgba(255,255,255,0.15)]`,children:[jsxRuntimeExports.jsx("span",{className:"relative z-10",children:dt?"Uploading...":"Save Brand"}),!dt&&jsxRuntimeExports.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-lg"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Default Closing Message / CTA"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"This message will appear at the end of your lead magnets or books. You can change it anytime."}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter at https://yourwebsite.com.

Lets keep this journey going together  no tech overwhelm, no burnout, just steady growth.`,value:(et==null?void 0:et.cta)||"",onChange:Kt=>ot(Bt=>({...Bt,cta:Kt.target.value})),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:$t,className:"mt-3 px-6 py-2 rounded-lg bg-green text-black font-semibold hover:opacity-90 transition",children:"Save CTA"})}),it!=null&&it.has_book?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Guided Tour"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Replay the Book Builder onboarding walkthrough to revisit all key features."}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.post("https://cre8tlystudio.com/api/books/onboarding/replay",{},{headers:{Authorization:`Bearer ${it==null?void 0:it.accessToken}`}}),y$4.success(" Tour reset! It will replay next time you open Book Builder.")}catch(Kt){console.error(" Failed to reset onboarding:",Kt),y$4.error("Could not reset tour. Please try again.")}},className:"px-5 py-2.5 rounded-lg bg-[#6a5acd] text-black font-semibold hover:opacity-90 transition",children:"Replay Book Tour"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"ISBN Assistance"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4 leading-relaxed",children:"Need an ISBN for your book? Cre8tly Studio can guide you through the process. An ISBN (International Standard Book Number) identifies your book worldwide and is required for publishing on major retailers like Amazon, Apple Books, and Barnes & Noble."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://www.myidentifiers.com/","_blank"),className:"flex-1 bg-green text-black font-semibold py-2.5 rounded-lg shadow-md hover:opacity-90 transition text-center",children:"Get ISBN from Bowker"}),jsxRuntimeExports.jsx("button",{onClick:()=>y$4.info("Our team will soon offer a Pro ISBN Concierge service directly inside Cre8tly Studio!"),className:"flex-1 bg-gray-800 text-gray-300 font-semibold py-2.5 rounded-lg border border-gray-700 hover:border-green hover:text-green transition",children:"Coming Soon: ISBN Concierge"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 italic mt-3",children:"Available for Assistant Plan users. Stay tuned for automated ISBN requests inside the dashboard."})]})]}):null]})]})})}function PromptMemoryTable({prompts:it=[]}){const[g,et]=reactExports.useState(null),[ot,ct]=reactExports.useState(!1),{user:ut,accessToken:dt}=useAuth(),ft=useNavigate();reactExports.useEffect(()=>{async function kt(){try{if(!(ut!=null&&ut.id))return;const Tt=await axiosInstance.get("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${dt}`}});ct(!!Tt.data.has_memory)}catch(Tt){console.error(" Failed to check memory access:",Tt)}}kt()},[ut,dt]);const St=async(kt,Tt)=>{try{const Rt=kt.replace(/<[^>]*>/g,"");await navigator.clipboard.writeText(Rt),et(Tt),y$4.success("Prompt copied to clipboard"),setTimeout(()=>et(null),2e3)}catch{y$4.error("Failed to copy prompt")}};return!Array.isArray(it)||it.length===0?jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] text-gray-400 px-4",children:jsxRuntimeExports.jsx("p",{children:"No prompts found yet."})}):ot?jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-2 sm:px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] w-full max-w-6xl rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})}),jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full text-white",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-800/90",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Prompt"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Created"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Copy"})]})}),jsxRuntimeExports.jsx("tbody",{children:it.map(kt=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-700 hover:bg-gray-900/60 transition",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 max-w-lg",children:jsxRuntimeExports.jsx("p",{className:"truncate text-white/90",children:kt.prompt.replace(/<[^>]*>/g,"")})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm whitespace-nowrap",children:kt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(kt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:18}):jsxRuntimeExports.jsx(Copy,{size:18})})})]},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex flex-col divide-y divide-gray-800",children:it.map(kt=>jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-white/90 text-sm mb-2",children:kt.prompt.replace(/<[^>]*>/g,"")}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[jsxRuntimeExports.jsx("span",{children:kt.created_at_prompt?new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):"N/A"}),jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:16}):jsxRuntimeExports.jsx(Copy,{size:16})})]})]},kt.id))})]})}):jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-4",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-[#111] w-full max-w-6xl overflow-hidden rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"opacity-40 pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsxs("h2",{className:"text-white font-semibold text-lg",children:["Prompt Memory"," ",jsxRuntimeExports.jsx("span",{className:"text-[#d2b6ff] text-sm ml-2",children:"PRO Feature"})]})}),jsxRuntimeExports.jsx("div",{className:"min-h-[400px] flex items-center justify-center text-gray-500 text-sm",children:jsxRuntimeExports.jsx("p",{children:"Prompt data will appear here once unlocked."})})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center backdrop-blur-md bg-black/40 rounded-xl text-center px-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Lock,{size:20,className:"text-gray-300"}),jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 max-w-md",children:"Unlock this feature to access and reuse your previously generated prompts."}),jsxRuntimeExports.jsx("button",{onClick:()=>ft("/plans"),className:`border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                         text-black font-semibold px-5 py-2 rounded-lg hover:opacity-90 transition`,children:"Unlock Feature"})]})]})})}function PromptMemoryDashboard(){const{user:it}=useAuth(),[g,et]=reactExports.useState([]),[ot,ct]=reactExports.useState(!0);return reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;async function ut(){try{const dt=await axiosInstance.get(`/lead-magnets/prompt-memory/${it.id}`);et(dt.data)}catch(dt){console.error("Failed to load prompts:",dt)}finally{ct(!1)}}ut()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col mb-8 mt-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white mb-2 design-text",children:"My Prompt Memory"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"View all prompts youve generated with Cre8tly Studio."})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-3 mb-8"}),ot?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-20 border border-gray-700 rounded-xl bg-gray-900/40",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"No Prompts Yet"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 max-w-md mx-auto",children:["You dont have any saved prompts yet. Create your first ",jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Digital Product"})," to start building your prompt memory."]})]}):jsxRuntimeExports.jsx(PromptMemoryTable,{prompts:g})]})}function Inbox(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ct,ut]=reactExports.useState(!0),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1);reactExports.useEffect(()=>{Tt()},[]);async function Tt(){try{const Ft=await axiosInstance.get("/admin/messages");g(Ft.data||[])}catch(Ft){console.error("Failed to load messages:",Ft),y$4.error("Failed to load inbox.")}finally{ut(!1)}}async function Rt(Ft){if(ot(Ft),!Ft.read_status)try{ft(!0),await axiosInstance.post(`/admin/messages/${Ft.id}/read`),g(Ht=>Ht.map(Kt=>Kt.id===Ft.id?{...Kt,read_status:1}:Kt))}catch(Ht){console.error("Failed to mark message as read:",Ht)}finally{ft(!1)}}async function jt(Ft){y$4.dismiss(),y$4(({closeToast:Ht})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Are you sure you want to delete this message?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{try{kt(!0),await axiosInstance.delete(`/admin/messages/user/${Ft}`),g(Kt=>Kt.filter(Bt=>Bt.id!==Ft)),ot(null),y$4.success("Message deleted successfully.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(Kt){console.error("Failed to delete message:",Kt),y$4.error("Failed to delete message.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{kt(!1),Ht()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:Ht,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"top-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}function $t(){ot(null)}return jsxRuntimeExports.jsxs("div",{className:"w-full min-h-screen bg-[#030712] text-white flex flex-col lg:flex-row",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 lg:max-w-[380px] border-r border-gray-800 h-screen overflow-y-auto p-6",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-800 pb-4 mb-6 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold design-text",children:"Inbox"}),jsxRuntimeExports.jsx(Bell,{size:18,className:"text-green"})]}),ct?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Loading messages..."}):it.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"No messages found."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:it.map(Ft=>jsxRuntimeExports.jsxs("li",{onClick:()=>Rt(Ft),className:`cursor-pointer p-4 rounded-lg border transition-all duration-200 ${Ft.id===(et==null?void 0:et.id)?"bg-[#111827]/80 border-green":Ft.read_status?"bg-[#0c0f18]/70 border-gray-800 hover:border-gray-700":"bg-[#111827]/80 border-green/40 hover:border-green"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("h3",{className:`font-semibold truncate ${Ft.read_status?"text-gray-300":"text-white"}`,children:Ft.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:new Date(Ft.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),jsxRuntimeExports.jsx("p",{className:`text-xs truncate ${Ft.read_status?"text-gray-500":"text-gray-300"}`,children:Ft.message}),!Ft.read_status&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-green font-semibold",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," New"]})]},Ft.id))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-y-auto h-screen bg-[#0B0F19]",children:et?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-6",children:jsxRuntimeExports.jsxs("button",{onClick:$t,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-white",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16})," Back to Inbox"]})}),jsxRuntimeExports.jsxs("div",{className:"bg-[#111827]/60 border border-gray-800 rounded-2xl p-6 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between border-b border-gray-800 pb-4 mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:et.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-2 sm:mt-0",children:[jsxRuntimeExports.jsx(Calendar,{size:12}),new Date(et.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-line text-sm",children:et.message}),jsxRuntimeExports.jsxs("div",{className:"mt-6 border-t border-gray-800 pt-4 flex items-center justify-between text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("p",{children:["Sent by"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Cre8tly Support"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>jt(et.id),disabled:St,className:`flex items-center gap-2 text-sm px-3 py-1.5 rounded-md font-semibold transition-all ${St?"bg-red-900 text-gray-400 opacity-60 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),St?"Deleting...":"Delete"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[jsxRuntimeExports.jsx(Mail,{size:40,className:"mb-4 text-gray-600"}),jsxRuntimeExports.jsx("p",{children:"Select a message to read"})]})})]})}const AnimatedRoutes=()=>{const it=useLocation();return jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsxs(Routes,{location:it,children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(App,{})})}),jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DashboardSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/prompts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(PromptMemoryDashboard,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/notifications",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Inbox,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/thank-you",element:jsxRuntimeExports.jsx(ThankYou,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"/shop",element:jsxRuntimeExports.jsx(EbooksStore,{})}),jsxRuntimeExports.jsx(Route,{path:"/books",element:jsxRuntimeExports.jsx(BooksDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy-policy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"/refund-policy",element:jsxRuntimeExports.jsx(Refund,{})}),jsxRuntimeExports.jsx(Route,{path:"/cookie-policy",element:jsxRuntimeExports.jsx(Cookie,{})}),jsxRuntimeExports.jsx(Route,{path:"/prompt",element:jsxRuntimeExports.jsx(PromptPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/sign-up",element:jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/forgot-password",element:jsxRuntimeExports.jsx(ForgotPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/plans",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(PlansPage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(CustomerDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(PrivateRoute,{role:"admin",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(AdminDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/debug",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},style:{backgroundColor:"#030712",color:"#fff",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"Debug Test Page"})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]},it.pathname)})},RootApp=()=>jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProviderWithRouter,{children:jsxRuntimeExports.jsx(BookProvider,{children:jsxRuntimeExports.jsxs(MagnetProvider,{children:[jsxRuntimeExports.jsx(Lt,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx(AnimatedRoutes,{})]})})})}),container=document.getElementById("root"),root=createRoot(container);root.render(jsxRuntimeExports.jsx(RootApp,{}));
