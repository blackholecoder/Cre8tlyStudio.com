var JN=Object.defineProperty;var QN=(it,g,et)=>g in it?JN(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et;var Kn=(it,g,et)=>(QN(it,typeof g!="symbol"?g+"":g,et),et),cP=(it,g,et)=>{if(!g.has(it))throw TypeError("Cannot "+et)};var Jt=(it,g,et)=>(cP(it,g,"read from private field"),et?et.call(it):g.get(it)),Mr=(it,g,et)=>{if(g.has(it))throw TypeError("Cannot add the same private member more than once");g instanceof WeakSet?g.add(it):g.set(it,et)},Ir=(it,g,et,ot)=>(cP(it,g,"write to private field"),ot?ot.call(it,et):g.set(it,et),et);var Ko=(it,g,et,ot)=>({set _(ut){Ir(it,g,ut,et)},get _(){return Jt(it,g,ot)}}),Qr=(it,g,et)=>(cP(it,g,"access private method"),et);function _mergeNamespaces(it,g){for(var et=0;et<g.length;et++){const ot=g[et];if(typeof ot!="string"&&!Array.isArray(ot)){for(const ut in ot)if(ut!=="default"&&!(ut in it)){const ct=Object.getOwnPropertyDescriptor(ot,ut);ct&&Object.defineProperty(it,ut,ct.get?ct:{enumerable:!0,get:()=>ot[ut]})}}}return Object.freeze(Object.defineProperty(it,Symbol.toStringTag,{value:"Module"}))}(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const ut of document.querySelectorAll('link[rel="modulepreload"]'))ot(ut);new MutationObserver(ut=>{for(const ct of ut)if(ct.type==="childList")for(const dt of ct.addedNodes)dt.tagName==="LINK"&&dt.rel==="modulepreload"&&ot(dt)}).observe(document,{childList:!0,subtree:!0});function et(ut){const ct={};return ut.integrity&&(ct.integrity=ut.integrity),ut.referrerPolicy&&(ct.referrerPolicy=ut.referrerPolicy),ut.crossOrigin==="use-credentials"?ct.credentials="include":ut.crossOrigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function ot(ut){if(ut.ep)return;ut.ep=!0;const ct=et(ut);fetch(ut.href,ct)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(it){return it&&it.__esModule&&Object.prototype.hasOwnProperty.call(it,"default")?it.default:it}function getAugmentedNamespace(it){if(it.__esModule)return it;var g=it.default;if(typeof g=="function"){var et=function ot(){return this instanceof ot?Reflect.construct(g,arguments,this.constructor):g.apply(this,arguments)};et.prototype=g.prototype}else et={};return Object.defineProperty(et,"__esModule",{value:!0}),Object.keys(it).forEach(function(ot){var ut=Object.getOwnPropertyDescriptor(it,ot);Object.defineProperty(et,ot,ut.get?ut:{enumerable:!0,get:function(){return it[ot]}})}),et}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$5=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$6=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$5=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(it){return it===null||typeof it!="object"?null:(it=z$2&&it[z$2]||it["@@iterator"],typeof it=="function"?it:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$2={};function E$3(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}E$3.prototype.isReactComponent={};E$3.prototype.setState=function(it,g){if(typeof it!="object"&&typeof it!="function"&&it!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,it,g,"setState")};E$3.prototype.forceUpdate=function(it){this.updater.enqueueForceUpdate(this,it,"forceUpdate")};function F$3(){}F$3.prototype=E$3.prototype;function G$2(it,g,et){this.props=it,this.context=g,this.refs=D$2,this.updater=et||B$2}var H$4=G$2.prototype=new F$3;H$4.constructor=G$2;C$5(H$4,E$3.prototype);H$4.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$4(it,g,et){var ot,ut={},ct=null,dt=null;if(g!=null)for(ot in g.ref!==void 0&&(dt=g.ref),g.key!==void 0&&(ct=""+g.key),g)J$2.call(g,ot)&&!L$4.hasOwnProperty(ot)&&(ut[ot]=g[ot]);var ft=arguments.length-2;if(ft===1)ut.children=et;else if(1<ft){for(var St=Array(ft),kt=0;kt<ft;kt++)St[kt]=arguments[kt+2];ut.children=St}if(it&&it.defaultProps)for(ot in ft=it.defaultProps,ft)ut[ot]===void 0&&(ut[ot]=ft[ot]);return{$$typeof:l$4,type:it,key:ct,ref:dt,props:ut,_owner:K$3.current}}function N$3(it,g){return{$$typeof:l$4,type:it.type,key:g,ref:it.ref,props:it.props,_owner:it._owner}}function O$5(it){return typeof it=="object"&&it!==null&&it.$$typeof===l$4}function escape$1(it){var g={"=":"=0",":":"=2"};return"$"+it.replace(/[=:]/g,function(et){return g[et]})}var P$4=/\/+/g;function Q$2(it,g){return typeof it=="object"&&it!==null&&it.key!=null?escape$1(""+it.key):g.toString(36)}function R$4(it,g,et,ot,ut){var ct=typeof it;(ct==="undefined"||ct==="boolean")&&(it=null);var dt=!1;if(it===null)dt=!0;else switch(ct){case"string":case"number":dt=!0;break;case"object":switch(it.$$typeof){case l$4:case n$5:dt=!0}}if(dt)return dt=it,ut=ut(dt),it=ot===""?"."+Q$2(dt,0):ot,I$5(ut)?(et="",it!=null&&(et=it.replace(P$4,"$&/")+"/"),R$4(ut,g,et,"",function(kt){return kt})):ut!=null&&(O$5(ut)&&(ut=N$3(ut,et+(!ut.key||dt&&dt.key===ut.key?"":(""+ut.key).replace(P$4,"$&/")+"/")+it)),g.push(ut)),1;if(dt=0,ot=ot===""?".":ot+":",I$5(it))for(var ft=0;ft<it.length;ft++){ct=it[ft];var St=ot+Q$2(ct,ft);dt+=R$4(ct,g,et,St,ut)}else if(St=A$3(it),typeof St=="function")for(it=St.call(it),ft=0;!(ct=it.next()).done;)ct=ct.value,St=ot+Q$2(ct,ft++),dt+=R$4(ct,g,et,St,ut);else if(ct==="object")throw g=String(it),Error("Objects are not valid as a React child (found: "+(g==="[object Object]"?"object with keys {"+Object.keys(it).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return dt}function S$4(it,g,et){if(it==null)return it;var ot=[],ut=0;return R$4(it,ot,"","",function(ct){return g.call(et,ct,ut++)}),ot}function T$4(it){if(it._status===-1){var g=it._result;g=g(),g.then(function(et){(it._status===0||it._status===-1)&&(it._status=1,it._result=et)},function(et){(it._status===0||it._status===-1)&&(it._status=2,it._result=et)}),it._status===-1&&(it._status=0,it._result=g)}if(it._status===1)return it._result.default;throw it._result}var U$5={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$5,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};function X$5(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$4,forEach:function(it,g,et){S$4(it,function(){g.apply(this,arguments)},et)},count:function(it){var g=0;return S$4(it,function(){g++}),g},toArray:function(it){return S$4(it,function(g){return g})||[]},only:function(it){if(!O$5(it))throw Error("React.Children.only expected to receive a single React element child.");return it}};react_production_min.Component=E$3;react_production_min.Fragment=p$5;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$5;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$5;react_production_min.cloneElement=function(it,g,et){if(it==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+it+".");var ot=C$5({},it.props),ut=it.key,ct=it.ref,dt=it._owner;if(g!=null){if(g.ref!==void 0&&(ct=g.ref,dt=K$3.current),g.key!==void 0&&(ut=""+g.key),it.type&&it.type.defaultProps)var ft=it.type.defaultProps;for(St in g)J$2.call(g,St)&&!L$4.hasOwnProperty(St)&&(ot[St]=g[St]===void 0&&ft!==void 0?ft[St]:g[St])}var St=arguments.length-2;if(St===1)ot.children=et;else if(1<St){ft=Array(St);for(var kt=0;kt<St;kt++)ft[kt]=arguments[kt+2];ot.children=ft}return{$$typeof:l$4,type:it.type,key:ut,ref:ct,props:ot,_owner:dt}};react_production_min.createContext=function(it){return it={$$typeof:u$6,_currentValue:it,_currentValue2:it,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},it.Provider={$$typeof:t$6,_context:it},it.Consumer=it};react_production_min.createElement=M$4;react_production_min.createFactory=function(it){var g=M$4.bind(null,it);return g.type=it,g};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(it){return{$$typeof:v$3,render:it}};react_production_min.isValidElement=O$5;react_production_min.lazy=function(it){return{$$typeof:y$5,_payload:{_status:-1,_result:it},_init:T$4}};react_production_min.memo=function(it,g){return{$$typeof:x$3,type:it,compare:g===void 0?null:g}};react_production_min.startTransition=function(it){var g=V$3.transition;V$3.transition={};try{it()}finally{V$3.transition=g}};react_production_min.unstable_act=X$5;react_production_min.useCallback=function(it,g){return U$5.current.useCallback(it,g)};react_production_min.useContext=function(it){return U$5.current.useContext(it)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(it){return U$5.current.useDeferredValue(it)};react_production_min.useEffect=function(it,g){return U$5.current.useEffect(it,g)};react_production_min.useId=function(){return U$5.current.useId()};react_production_min.useImperativeHandle=function(it,g,et){return U$5.current.useImperativeHandle(it,g,et)};react_production_min.useInsertionEffect=function(it,g){return U$5.current.useInsertionEffect(it,g)};react_production_min.useLayoutEffect=function(it,g){return U$5.current.useLayoutEffect(it,g)};react_production_min.useMemo=function(it,g){return U$5.current.useMemo(it,g)};react_production_min.useReducer=function(it,g,et){return U$5.current.useReducer(it,g,et)};react_production_min.useRef=function(it){return U$5.current.useRef(it)};react_production_min.useState=function(it){return U$5.current.useState(it)};react_production_min.useSyncExternalStore=function(it,g,et){return U$5.current.useSyncExternalStore(it,g,et)};react_production_min.useTransition=function(){return U$5.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React$3=getDefaultExportFromCjs(reactExports),t$5=_mergeNamespaces({__proto__:null,default:React$3},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$7=reactExports,k$1=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$6=Object.prototype.hasOwnProperty,n$4=f$7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$1(it,g,et){var ot,ut={},ct=null,dt=null;et!==void 0&&(ct=""+et),g.key!==void 0&&(ct=""+g.key),g.ref!==void 0&&(dt=g.ref);for(ot in g)m$6.call(g,ot)&&!p$4.hasOwnProperty(ot)&&(ut[ot]=g[ot]);if(it&&it.defaultProps)for(ot in g=it.defaultProps,g)ut[ot]===void 0&&(ut[ot]=g[ot]);return{$$typeof:k$1,type:it,key:ct,ref:dt,props:ut,_owner:n$4.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(it){function g(mr,Er){var Dr=mr.length;mr.push(Er);e:for(;0<Dr;){var Cr=Dr-1>>>1,Lr=mr[Cr];if(0<ut(Lr,Er))mr[Cr]=Er,mr[Dr]=Lr,Dr=Cr;else break e}}function et(mr){return mr.length===0?null:mr[0]}function ot(mr){if(mr.length===0)return null;var Er=mr[0],Dr=mr.pop();if(Dr!==Er){mr[0]=Dr;e:for(var Cr=0,Lr=mr.length,qr=Lr>>>1;Cr<qr;){var sn=2*(Cr+1)-1,an=mr[sn],tn=sn+1,ln=mr[tn];if(0>ut(an,Dr))tn<Lr&&0>ut(ln,an)?(mr[Cr]=ln,mr[tn]=Dr,Cr=tn):(mr[Cr]=an,mr[sn]=Dr,Cr=sn);else if(tn<Lr&&0>ut(ln,Dr))mr[Cr]=ln,mr[tn]=Dr,Cr=tn;else break e}}return Er}function ut(mr,Er){var Dr=mr.sortIndex-Er.sortIndex;return Dr!==0?Dr:mr.id-Er.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;it.unstable_now=function(){return ct.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,Rt=null,Ft=3,jt=!1,Bt=!1,zt=!1,Ht=typeof setTimeout=="function"?setTimeout:null,Ut=typeof clearTimeout=="function"?clearTimeout:null,Kt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Yt(mr){for(var Er=et(kt);Er!==null;){if(Er.callback===null)ot(kt);else if(Er.startTime<=mr)ot(kt),Er.sortIndex=Er.expirationTime,g(St,Er);else break;Er=et(kt)}}function er(mr){if(zt=!1,Yt(mr),!Bt)if(et(St)!==null)Bt=!0,hr(ar);else{var Er=et(kt);Er!==null&&Tr(er,Er.startTime-mr)}}function ar(mr,Er){Bt=!1,zt&&(zt=!1,Ut(cr),cr=-1),jt=!0;var Dr=Ft;try{for(Yt(Er),Rt=et(St);Rt!==null&&(!(Rt.expirationTime>Er)||mr&&!yr());){var Cr=Rt.callback;if(typeof Cr=="function"){Rt.callback=null,Ft=Rt.priorityLevel;var Lr=Cr(Rt.expirationTime<=Er);Er=it.unstable_now(),typeof Lr=="function"?Rt.callback=Lr:Rt===et(St)&&ot(St),Yt(Er)}else ot(St);Rt=et(St)}if(Rt!==null)var qr=!0;else{var sn=et(kt);sn!==null&&Tr(er,sn.startTime-Er),qr=!1}return qr}finally{Rt=null,Ft=Dr,jt=!1}}var ir=!1,lr=null,cr=-1,vr=5,xr=-1;function yr(){return!(it.unstable_now()-xr<vr)}function Sr(){if(lr!==null){var mr=it.unstable_now();xr=mr;var Er=!0;try{Er=lr(!0,mr)}finally{Er?kr():(ir=!1,lr=null)}}else ir=!1}var kr;if(typeof Kt=="function")kr=function(){Kt(Sr)};else if(typeof MessageChannel<"u"){var Pr=new MessageChannel,Or=Pr.port2;Pr.port1.onmessage=Sr,kr=function(){Or.postMessage(null)}}else kr=function(){Ht(Sr,0)};function hr(mr){lr=mr,ir||(ir=!0,kr())}function Tr(mr,Er){cr=Ht(function(){mr(it.unstable_now())},Er)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(mr){mr.callback=null},it.unstable_continueExecution=function(){Bt||jt||(Bt=!0,hr(ar))},it.unstable_forceFrameRate=function(mr){0>mr||125<mr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):vr=0<mr?Math.floor(1e3/mr):5},it.unstable_getCurrentPriorityLevel=function(){return Ft},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(mr){switch(Ft){case 1:case 2:case 3:var Er=3;break;default:Er=Ft}var Dr=Ft;Ft=Er;try{return mr()}finally{Ft=Dr}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(mr,Er){switch(mr){case 1:case 2:case 3:case 4:case 5:break;default:mr=3}var Dr=Ft;Ft=mr;try{return Er()}finally{Ft=Dr}},it.unstable_scheduleCallback=function(mr,Er,Dr){var Cr=it.unstable_now();switch(typeof Dr=="object"&&Dr!==null?(Dr=Dr.delay,Dr=typeof Dr=="number"&&0<Dr?Cr+Dr:Cr):Dr=Cr,mr){case 1:var Lr=-1;break;case 2:Lr=250;break;case 5:Lr=1073741823;break;case 4:Lr=1e4;break;default:Lr=5e3}return Lr=Dr+Lr,mr={id:Tt++,callback:Er,priorityLevel:mr,startTime:Dr,expirationTime:Lr,sortIndex:-1},Dr>Cr?(mr.sortIndex=Dr,g(kt,mr),et(St)===null&&mr===et(kt)&&(zt?(Ut(cr),cr=-1):zt=!0,Tr(er,Dr-Cr))):(mr.sortIndex=Lr,g(St,mr),Bt||jt||(Bt=!0,hr(ar))),mr},it.unstable_shouldYield=yr,it.unstable_wrapCallback=function(mr){var Er=Ft;return function(){var Dr=Ft;Ft=Er;try{return mr.apply(this,arguments)}finally{Ft=Dr}}}})(scheduler_production_min$1);scheduler$1.exports=scheduler_production_min$1;var schedulerExports$1=scheduler$1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$3(it){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+it,et=1;et<arguments.length;et++)g+="&args[]="+encodeURIComponent(arguments[et]);return"Minified React error #"+it+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(it,g){ha(it,g),ha(it+"Capture",g)}function ha(it,g){for(ea[it]=g,it=0;it<g.length;it++)da.add(g[it])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(it){return ja.call(ma,it)?!0:ja.call(la,it)?!1:ka.test(it)?ma[it]=!0:(la[it]=!0,!1)}function pa(it,g,et,ot){if(et!==null&&et.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return ot?!1:et!==null?!et.acceptsBooleans:(it=it.toLowerCase().slice(0,5),it!=="data-"&&it!=="aria-");default:return!1}}function qa(it,g,et,ot){if(g===null||typeof g>"u"||pa(it,g,et,ot))return!0;if(ot)return!1;if(et!==null)switch(et.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function v$2(it,g,et,ot,ut,ct,dt){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=ot,this.attributeNamespace=ut,this.mustUseProperty=et,this.propertyName=it,this.type=g,this.sanitizeURL=ct,this.removeEmptyString=dt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(it){z$1[it]=new v$2(it,0,!1,it,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(it){var g=it[0];z$1[g]=new v$2(g,1,!1,it[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(it){z$1[it]=new v$2(it,2,!1,it,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(it){z$1[it]=new v$2(it,3,!1,it.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(it){z$1[it]=new v$2(it,3,!0,it,null,!1,!1)});["capture","download"].forEach(function(it){z$1[it]=new v$2(it,4,!1,it,null,!1,!1)});["cols","rows","size","span"].forEach(function(it){z$1[it]=new v$2(it,6,!1,it,null,!1,!1)});["rowSpan","start"].forEach(function(it){z$1[it]=new v$2(it,5,!1,it.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(it){return it[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(it){var g=it.replace(ra,sa);z$1[g]=new v$2(g,1,!1,it,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(it){z$1[it]=new v$2(it,1,!1,it.toLowerCase(),null,!0,!0)});function ta$1(it,g,et,ot){var ut=z$1.hasOwnProperty(g)?z$1[g]:null;(ut!==null?ut.type!==0:ot||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(qa(g,et,ut,ot)&&(et=null),ot||ut===null?oa(g)&&(et===null?it.removeAttribute(g):it.setAttribute(g,""+et)):ut.mustUseProperty?it[ut.propertyName]=et===null?ut.type===3?!1:"":et:(g=ut.attributeName,ot=ut.attributeNamespace,et===null?it.removeAttribute(g):(ut=ut.type,et=ut===3||ut===4&&et===!0?"":""+et,ot?it.setAttributeNS(ot,g,et):it.setAttribute(g,et))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(it){return it===null||typeof it!="object"?null:(it=Ja&&it[Ja]||it["@@iterator"],typeof it=="function"?it:null)}var A$2=Object.assign,La;function Ma(it){if(La===void 0)try{throw Error()}catch(et){var g=et.stack.trim().match(/\n( *(at )?)/);La=g&&g[1]||""}return`
`+La+it}var Na=!1;function Oa(it,g){if(!it||Na)return"";Na=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(kt){var ot=kt}Reflect.construct(it,[],g)}else{try{g.call()}catch(kt){ot=kt}it.call(g.prototype)}else{try{throw Error()}catch(kt){ot=kt}it()}}catch(kt){if(kt&&ot&&typeof kt.stack=="string"){for(var ut=kt.stack.split(`
`),ct=ot.stack.split(`
`),dt=ut.length-1,ft=ct.length-1;1<=dt&&0<=ft&&ut[dt]!==ct[ft];)ft--;for(;1<=dt&&0<=ft;dt--,ft--)if(ut[dt]!==ct[ft]){if(dt!==1||ft!==1)do if(dt--,ft--,0>ft||ut[dt]!==ct[ft]){var St=`
`+ut[dt].replace(" at new "," at ");return it.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",it.displayName)),St}while(1<=dt&&0<=ft);break}}}finally{Na=!1,Error.prepareStackTrace=et}return(it=it?it.displayName||it.name:"")?Ma(it):""}function Pa(it){switch(it.tag){case 5:return Ma(it.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return it=Oa(it.type,!1),it;case 11:return it=Oa(it.type.render,!1),it;case 1:return it=Oa(it.type,!0),it;default:return""}}function Qa(it){if(it==null)return null;if(typeof it=="function")return it.displayName||it.name||null;if(typeof it=="string")return it;switch(it){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof it=="object")switch(it.$$typeof){case Ca:return(it.displayName||"Context")+".Consumer";case Ba:return(it._context.displayName||"Context")+".Provider";case Da:var g=it.render;return it=it.displayName,it||(it=g.displayName||g.name||"",it=it!==""?"ForwardRef("+it+")":"ForwardRef"),it;case Ga:return g=it.displayName||null,g!==null?g:Qa(it.type)||"Memo";case Ha:g=it._payload,it=it._init;try{return Qa(it(g))}catch{}}return null}function Ra(it){var g=it.type;switch(it.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return it=g.render,it=it.displayName||it.name||"",g.displayName||(it!==""?"ForwardRef("+it+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(g);case 8:return g===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function Sa(it){switch(typeof it){case"boolean":case"number":case"string":case"undefined":return it;case"object":return it;default:return""}}function Ta(it){var g=it.type;return(it=it.nodeName)&&it.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Ua(it){var g=Ta(it)?"checked":"value",et=Object.getOwnPropertyDescriptor(it.constructor.prototype,g),ot=""+it[g];if(!it.hasOwnProperty(g)&&typeof et<"u"&&typeof et.get=="function"&&typeof et.set=="function"){var ut=et.get,ct=et.set;return Object.defineProperty(it,g,{configurable:!0,get:function(){return ut.call(this)},set:function(dt){ot=""+dt,ct.call(this,dt)}}),Object.defineProperty(it,g,{enumerable:et.enumerable}),{getValue:function(){return ot},setValue:function(dt){ot=""+dt},stopTracking:function(){it._valueTracker=null,delete it[g]}}}}function Va(it){it._valueTracker||(it._valueTracker=Ua(it))}function Wa(it){if(!it)return!1;var g=it._valueTracker;if(!g)return!0;var et=g.getValue(),ot="";return it&&(ot=Ta(it)?it.checked?"true":"false":it.value),it=ot,it!==et?(g.setValue(it),!0):!1}function Xa(it){if(it=it||(typeof document<"u"?document:void 0),typeof it>"u")return null;try{return it.activeElement||it.body}catch{return it.body}}function Ya(it,g){var et=g.checked;return A$2({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:et??it._wrapperState.initialChecked})}function Za(it,g){var et=g.defaultValue==null?"":g.defaultValue,ot=g.checked!=null?g.checked:g.defaultChecked;et=Sa(g.value!=null?g.value:et),it._wrapperState={initialChecked:ot,initialValue:et,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function ab(it,g){g=g.checked,g!=null&&ta$1(it,"checked",g,!1)}function bb(it,g){ab(it,g);var et=Sa(g.value),ot=g.type;if(et!=null)ot==="number"?(et===0&&it.value===""||it.value!=et)&&(it.value=""+et):it.value!==""+et&&(it.value=""+et);else if(ot==="submit"||ot==="reset"){it.removeAttribute("value");return}g.hasOwnProperty("value")?cb(it,g.type,et):g.hasOwnProperty("defaultValue")&&cb(it,g.type,Sa(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(it.defaultChecked=!!g.defaultChecked)}function db(it,g,et){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var ot=g.type;if(!(ot!=="submit"&&ot!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+it._wrapperState.initialValue,et||g===it.value||(it.value=g),it.defaultValue=g}et=it.name,et!==""&&(it.name=""),it.defaultChecked=!!it._wrapperState.initialChecked,et!==""&&(it.name=et)}function cb(it,g,et){(g!=="number"||Xa(it.ownerDocument)!==it)&&(et==null?it.defaultValue=""+it._wrapperState.initialValue:it.defaultValue!==""+et&&(it.defaultValue=""+et))}var eb=Array.isArray;function fb(it,g,et,ot){if(it=it.options,g){g={};for(var ut=0;ut<et.length;ut++)g["$"+et[ut]]=!0;for(et=0;et<it.length;et++)ut=g.hasOwnProperty("$"+it[et].value),it[et].selected!==ut&&(it[et].selected=ut),ut&&ot&&(it[et].defaultSelected=!0)}else{for(et=""+Sa(et),g=null,ut=0;ut<it.length;ut++){if(it[ut].value===et){it[ut].selected=!0,ot&&(it[ut].defaultSelected=!0);return}g!==null||it[ut].disabled||(g=it[ut])}g!==null&&(g.selected=!0)}}function gb(it,g){if(g.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$2({},g,{value:void 0,defaultValue:void 0,children:""+it._wrapperState.initialValue})}function hb(it,g){var et=g.value;if(et==null){if(et=g.children,g=g.defaultValue,et!=null){if(g!=null)throw Error(p$3(92));if(eb(et)){if(1<et.length)throw Error(p$3(93));et=et[0]}g=et}g==null&&(g=""),et=g}it._wrapperState={initialValue:Sa(et)}}function ib(it,g){var et=Sa(g.value),ot=Sa(g.defaultValue);et!=null&&(et=""+et,et!==it.value&&(it.value=et),g.defaultValue==null&&it.defaultValue!==et&&(it.defaultValue=et)),ot!=null&&(it.defaultValue=""+ot)}function jb(it){var g=it.textContent;g===it._wrapperState.initialValue&&g!==""&&g!==null&&(it.value=g)}function kb(it){switch(it){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(it,g){return it==null||it==="http://www.w3.org/1999/xhtml"?kb(g):it==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":it}var mb,nb=function(it){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,et,ot,ut){MSApp.execUnsafeLocalFunction(function(){return it(g,et,ot,ut)})}:it}(function(it,g){if(it.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in it)it.innerHTML=g;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=mb.firstChild;it.firstChild;)it.removeChild(it.firstChild);for(;g.firstChild;)it.appendChild(g.firstChild)}});function ob(it,g){if(g){var et=it.firstChild;if(et&&et===it.lastChild&&et.nodeType===3){et.nodeValue=g;return}}it.textContent=g}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(it){qb.forEach(function(g){g=g+it.charAt(0).toUpperCase()+it.substring(1),pb[g]=pb[it]})});function rb(it,g,et){return g==null||typeof g=="boolean"||g===""?"":et||typeof g!="number"||g===0||pb.hasOwnProperty(it)&&pb[it]?(""+g).trim():g+"px"}function sb(it,g){it=it.style;for(var et in g)if(g.hasOwnProperty(et)){var ot=et.indexOf("--")===0,ut=rb(et,g[et],ot);et==="float"&&(et="cssFloat"),ot?it.setProperty(et,ut):it[et]=ut}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(it,g){if(g){if(tb[it]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(p$3(137,it));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(p$3(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(p$3(61))}if(g.style!=null&&typeof g.style!="object")throw Error(p$3(62))}}function vb(it,g){if(it.indexOf("-")===-1)return typeof g.is=="string";switch(it){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(it){return it=it.target||it.srcElement||window,it.correspondingUseElement&&(it=it.correspondingUseElement),it.nodeType===3?it.parentNode:it}var yb=null,zb=null,Ab=null;function Bb(it){if(it=Cb(it)){if(typeof yb!="function")throw Error(p$3(280));var g=it.stateNode;g&&(g=Db(g),yb(it.stateNode,it.type,g))}}function Eb(it){zb?Ab?Ab.push(it):Ab=[it]:zb=it}function Fb(){if(zb){var it=zb,g=Ab;if(Ab=zb=null,Bb(it),g)for(it=0;it<g.length;it++)Bb(g[it])}}function Gb(it,g){return it(g)}function Hb(){}var Ib=!1;function Jb(it,g,et){if(Ib)return it(g,et);Ib=!0;try{return Gb(it,g,et)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(it,g){var et=it.stateNode;if(et===null)return null;var ot=Db(et);if(ot===null)return null;et=ot[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ot=!ot.disabled)||(it=it.type,ot=!(it==="button"||it==="input"||it==="select"||it==="textarea")),it=!ot;break e;default:it=!1}if(it)return null;if(et&&typeof et!="function")throw Error(p$3(231,g,typeof et));return et}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(it,g,et,ot,ut,ct,dt,ft,St){var kt=Array.prototype.slice.call(arguments,3);try{g.apply(et,kt)}catch(Tt){this.onError(Tt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(it){Ob=!0,Pb=it}};function Tb(it,g,et,ot,ut,ct,dt,ft,St){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(it,g,et,ot,ut,ct,dt,ft,St){if(Tb.apply(this,arguments),Ob){if(Ob){var kt=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=kt)}}function Vb(it){var g=it,et=it;if(it.alternate)for(;g.return;)g=g.return;else{it=g;do g=it,g.flags&4098&&(et=g.return),it=g.return;while(it)}return g.tag===3?et:null}function Wb(it){if(it.tag===13){var g=it.memoizedState;if(g===null&&(it=it.alternate,it!==null&&(g=it.memoizedState)),g!==null)return g.dehydrated}return null}function Xb(it){if(Vb(it)!==it)throw Error(p$3(188))}function Yb(it){var g=it.alternate;if(!g){if(g=Vb(it),g===null)throw Error(p$3(188));return g!==it?null:it}for(var et=it,ot=g;;){var ut=et.return;if(ut===null)break;var ct=ut.alternate;if(ct===null){if(ot=ut.return,ot!==null){et=ot;continue}break}if(ut.child===ct.child){for(ct=ut.child;ct;){if(ct===et)return Xb(ut),it;if(ct===ot)return Xb(ut),g;ct=ct.sibling}throw Error(p$3(188))}if(et.return!==ot.return)et=ut,ot=ct;else{for(var dt=!1,ft=ut.child;ft;){if(ft===et){dt=!0,et=ut,ot=ct;break}if(ft===ot){dt=!0,ot=ut,et=ct;break}ft=ft.sibling}if(!dt){for(ft=ct.child;ft;){if(ft===et){dt=!0,et=ct,ot=ut;break}if(ft===ot){dt=!0,ot=ct,et=ut;break}ft=ft.sibling}if(!dt)throw Error(p$3(189))}}if(et.alternate!==ot)throw Error(p$3(190))}if(et.tag!==3)throw Error(p$3(188));return et.stateNode.current===et?it:g}function Zb(it){return it=Yb(it),it!==null?$b(it):null}function $b(it){if(it.tag===5||it.tag===6)return it;for(it=it.child;it!==null;){var g=$b(it);if(g!==null)return g;it=it.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(it){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,it,void 0,(it.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(it){return it>>>=0,it===0?32:31-(pc(it)/qc|0)|0}var rc=64,sc=4194304;function tc(it){switch(it&-it){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return it&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return it&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return it}}function uc(it,g){var et=it.pendingLanes;if(et===0)return 0;var ot=0,ut=it.suspendedLanes,ct=it.pingedLanes,dt=et&268435455;if(dt!==0){var ft=dt&~ut;ft!==0?ot=tc(ft):(ct&=dt,ct!==0&&(ot=tc(ct)))}else dt=et&~ut,dt!==0?ot=tc(dt):ct!==0&&(ot=tc(ct));if(ot===0)return 0;if(g!==0&&g!==ot&&!(g&ut)&&(ut=ot&-ot,ct=g&-g,ut>=ct||ut===16&&(ct&4194240)!==0))return g;if(ot&4&&(ot|=et&16),g=it.entangledLanes,g!==0)for(it=it.entanglements,g&=ot;0<g;)et=31-oc(g),ut=1<<et,ot|=it[et],g&=~ut;return ot}function vc(it,g){switch(it){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(it,g){for(var et=it.suspendedLanes,ot=it.pingedLanes,ut=it.expirationTimes,ct=it.pendingLanes;0<ct;){var dt=31-oc(ct),ft=1<<dt,St=ut[dt];St===-1?(!(ft&et)||ft&ot)&&(ut[dt]=vc(ft,g)):St<=g&&(it.expiredLanes|=ft),ct&=~ft}}function xc(it){return it=it.pendingLanes&-1073741825,it!==0?it:it&1073741824?1073741824:0}function yc(){var it=rc;return rc<<=1,!(rc&4194240)&&(rc=64),it}function zc(it){for(var g=[],et=0;31>et;et++)g.push(it);return g}function Ac(it,g,et){it.pendingLanes|=g,g!==536870912&&(it.suspendedLanes=0,it.pingedLanes=0),it=it.eventTimes,g=31-oc(g),it[g]=et}function Bc(it,g){var et=it.pendingLanes&~g;it.pendingLanes=g,it.suspendedLanes=0,it.pingedLanes=0,it.expiredLanes&=g,it.mutableReadLanes&=g,it.entangledLanes&=g,g=it.entanglements;var ot=it.eventTimes;for(it=it.expirationTimes;0<et;){var ut=31-oc(et),ct=1<<ut;g[ut]=0,ot[ut]=-1,it[ut]=-1,et&=~ct}}function Cc(it,g){var et=it.entangledLanes|=g;for(it=it.entanglements;et;){var ot=31-oc(et),ut=1<<ot;ut&g|it[ot]&g&&(it[ot]|=g),et&=~ut}}var C$4=0;function Dc(it){return it&=-it,1<it?4<it?it&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(it,g){switch(it){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(g.pointerId)}}function Tc(it,g,et,ot,ut,ct){return it===null||it.nativeEvent!==ct?(it={blockedOn:g,domEventName:et,eventSystemFlags:ot,nativeEvent:ct,targetContainers:[ut]},g!==null&&(g=Cb(g),g!==null&&Fc(g)),it):(it.eventSystemFlags|=ot,g=it.targetContainers,ut!==null&&g.indexOf(ut)===-1&&g.push(ut),it)}function Uc(it,g,et,ot,ut){switch(g){case"focusin":return Lc=Tc(Lc,it,g,et,ot,ut),!0;case"dragenter":return Mc=Tc(Mc,it,g,et,ot,ut),!0;case"mouseover":return Nc=Tc(Nc,it,g,et,ot,ut),!0;case"pointerover":var ct=ut.pointerId;return Oc.set(ct,Tc(Oc.get(ct)||null,it,g,et,ot,ut)),!0;case"gotpointercapture":return ct=ut.pointerId,Pc.set(ct,Tc(Pc.get(ct)||null,it,g,et,ot,ut)),!0}return!1}function Vc(it){var g=Wc(it.target);if(g!==null){var et=Vb(g);if(et!==null){if(g=et.tag,g===13){if(g=Wb(et),g!==null){it.blockedOn=g,Ic(it.priority,function(){Gc(et)});return}}else if(g===3&&et.stateNode.current.memoizedState.isDehydrated){it.blockedOn=et.tag===3?et.stateNode.containerInfo:null;return}}}it.blockedOn=null}function Xc(it){if(it.blockedOn!==null)return!1;for(var g=it.targetContainers;0<g.length;){var et=Yc(it.domEventName,it.eventSystemFlags,g[0],it.nativeEvent);if(et===null){et=it.nativeEvent;var ot=new et.constructor(et.type,et);wb=ot,et.target.dispatchEvent(ot),wb=null}else return g=Cb(et),g!==null&&Fc(g),it.blockedOn=et,!1;g.shift()}return!0}function Zc(it,g,et){Xc(it)&&et.delete(g)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(it,g){it.blockedOn===g&&(it.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(it){function g(ut){return ad(ut,it)}if(0<Kc.length){ad(Kc[0],it);for(var et=1;et<Kc.length;et++){var ot=Kc[et];ot.blockedOn===it&&(ot.blockedOn=null)}}for(Lc!==null&&ad(Lc,it),Mc!==null&&ad(Mc,it),Nc!==null&&ad(Nc,it),Oc.forEach(g),Pc.forEach(g),et=0;et<Qc.length;et++)ot=Qc[et],ot.blockedOn===it&&(ot.blockedOn=null);for(;0<Qc.length&&(et=Qc[0],et.blockedOn===null);)Vc(et),et.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(it,g,et,ot){var ut=C$4,ct=cd.transition;cd.transition=null;try{C$4=1,fd(it,g,et,ot)}finally{C$4=ut,cd.transition=ct}}function gd(it,g,et,ot){var ut=C$4,ct=cd.transition;cd.transition=null;try{C$4=4,fd(it,g,et,ot)}finally{C$4=ut,cd.transition=ct}}function fd(it,g,et,ot){if(dd){var ut=Yc(it,g,et,ot);if(ut===null)hd(it,g,ot,id$2,et),Sc(it,ot);else if(Uc(ut,it,g,et,ot))ot.stopPropagation();else if(Sc(it,ot),g&4&&-1<Rc.indexOf(it)){for(;ut!==null;){var ct=Cb(ut);if(ct!==null&&Ec(ct),ct=Yc(it,g,et,ot),ct===null&&hd(it,g,ot,id$2,et),ct===ut)break;ut=ct}ut!==null&&ot.stopPropagation()}else hd(it,g,ot,null,et)}}var id$2=null;function Yc(it,g,et,ot){if(id$2=null,it=xb(ot),it=Wc(it),it!==null)if(g=Vb(it),g===null)it=null;else if(et=g.tag,et===13){if(it=Wb(g),it!==null)return it;it=null}else if(et===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;it=null}else g!==it&&(it=null);return id$2=it,null}function jd(it){switch(it){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var it,g=ld,et=g.length,ot,ut="value"in kd?kd.value:kd.textContent,ct=ut.length;for(it=0;it<et&&g[it]===ut[it];it++);var dt=et-it;for(ot=1;ot<=dt&&g[et-ot]===ut[ct-ot];ot++);return md=ut.slice(it,1<ot?1-ot:void 0)}function od(it){var g=it.keyCode;return"charCode"in it?(it=it.charCode,it===0&&g===13&&(it=13)):it=g,it===10&&(it=13),32<=it||it===13?it:0}function pd(){return!0}function qd(){return!1}function rd(it){function g(et,ot,ut,ct,dt){this._reactName=et,this._targetInst=ut,this.type=ot,this.nativeEvent=ct,this.target=dt,this.currentTarget=null;for(var ft in it)it.hasOwnProperty(ft)&&(et=it[ft],this[ft]=et?et(ct):ct[ft]);return this.isDefaultPrevented=(ct.defaultPrevented!=null?ct.defaultPrevented:ct.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var et=this.nativeEvent;et&&(et.preventDefault?et.preventDefault():typeof et.returnValue!="unknown"&&(et.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var et=this.nativeEvent;et&&(et.stopPropagation?et.stopPropagation():typeof et.cancelBubble!="unknown"&&(et.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),g}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(it){return it.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(it){return it.relatedTarget===void 0?it.fromElement===it.srcElement?it.toElement:it.fromElement:it.relatedTarget},movementX:function(it){return"movementX"in it?it.movementX:(it!==yd&&(yd&&it.type==="mousemove"?(wd=it.screenX-yd.screenX,xd=it.screenY-yd.screenY):xd=wd=0,yd=it),wd)},movementY:function(it){return"movementY"in it?it.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(it){return"clipboardData"in it?it.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(it){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(it):(it=Od[it])?!!g[it]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(it){if(it.key){var g=Md[it.key]||it.key;if(g!=="Unidentified")return g}return it.type==="keypress"?(it=od(it),it===13?"Enter":String.fromCharCode(it)):it.type==="keydown"||it.type==="keyup"?Nd[it.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(it){return it.type==="keypress"?od(it):0},keyCode:function(it){return it.type==="keydown"||it.type==="keyup"?it.keyCode:0},which:function(it){return it.type==="keypress"?od(it):it.type==="keydown"||it.type==="keyup"?it.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(it){return"deltaX"in it?it.deltaX:"wheelDeltaX"in it?-it.wheelDeltaX:0},deltaY:function(it){return"deltaY"in it?it.deltaY:"wheelDeltaY"in it?-it.wheelDeltaY:"wheelDelta"in it?-it.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de$1=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe$1=!1;function ge(it,g){switch(it){case"keyup":return $d.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(it){return it=it.detail,typeof it=="object"&&"data"in it?it.data:null}var ie$2=!1;function je$1(it,g){switch(it){case"compositionend":return he$1(g);case"keypress":return g.which!==32?null:(fe$1=!0,ee$1);case"textInput":return it=g.data,it===ee$1&&fe$1?null:it;default:return null}}function ke$1(it,g){if(ie$2)return it==="compositionend"||!ae&&ge(it,g)?(it=nd(),md=ld=kd=null,ie$2=!1,it):null;switch(it){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return de$1&&g.locale!=="ko"?null:g.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g==="input"?!!le[it.type]:g==="textarea"}function ne(it,g,et,ot){Eb(ot),g=oe(g,"onChange"),0<g.length&&(et=new td("onChange","change",null,et,ot),it.push({event:et,listeners:g}))}var pe=null,qe=null;function re$2(it){se(it,0)}function te$2(it){var g=ue$1(it);if(Wa(g))return it}function ve(it,g){if(it==="change")return g}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$1=typeof ze$1.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be$1),qe=pe=null)}function Be$1(it){if(it.propertyName==="value"&&te$2(qe)){var g=[];ne(g,qe,it,xb(it)),Jb(re$2,g)}}function Ce(it,g,et){it==="focusin"?(Ae$1(),pe=g,qe=et,pe.attachEvent("onpropertychange",Be$1)):it==="focusout"&&Ae$1()}function De$1(it){if(it==="selectionchange"||it==="keyup"||it==="keydown")return te$2(qe)}function Ee(it,g){if(it==="click")return te$2(g)}function Fe$1(it,g){if(it==="input"||it==="change")return te$2(g)}function Ge$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var He$2=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(it,g){if(He$2(it,g))return!0;if(typeof it!="object"||it===null||typeof g!="object"||g===null)return!1;var et=Object.keys(it),ot=Object.keys(g);if(et.length!==ot.length)return!1;for(ot=0;ot<et.length;ot++){var ut=et[ot];if(!ja.call(g,ut)||!He$2(it[ut],g[ut]))return!1}return!0}function Je(it){for(;it&&it.firstChild;)it=it.firstChild;return it}function Ke(it,g){var et=Je(it);it=0;for(var ot;et;){if(et.nodeType===3){if(ot=it+et.textContent.length,it<=g&&ot>=g)return{node:et,offset:g-it};it=ot}e:{for(;et;){if(et.nextSibling){et=et.nextSibling;break e}et=et.parentNode}et=void 0}et=Je(et)}}function Le$1(it,g){return it&&g?it===g?!0:it&&it.nodeType===3?!1:g&&g.nodeType===3?Le$1(it,g.parentNode):"contains"in it?it.contains(g):it.compareDocumentPosition?!!(it.compareDocumentPosition(g)&16):!1:!1}function Me$1(){for(var it=window,g=Xa();g instanceof it.HTMLIFrameElement;){try{var et=typeof g.contentWindow.location.href=="string"}catch{et=!1}if(et)it=g.contentWindow;else break;g=Xa(it.document)}return g}function Ne$1(it){var g=it&&it.nodeName&&it.nodeName.toLowerCase();return g&&(g==="input"&&(it.type==="text"||it.type==="search"||it.type==="tel"||it.type==="url"||it.type==="password")||g==="textarea"||it.contentEditable==="true")}function Oe$1(it){var g=Me$1(),et=it.focusedElem,ot=it.selectionRange;if(g!==et&&et&&et.ownerDocument&&Le$1(et.ownerDocument.documentElement,et)){if(ot!==null&&Ne$1(et)){if(g=ot.start,it=ot.end,it===void 0&&(it=g),"selectionStart"in et)et.selectionStart=g,et.selectionEnd=Math.min(it,et.value.length);else if(it=(g=et.ownerDocument||document)&&g.defaultView||window,it.getSelection){it=it.getSelection();var ut=et.textContent.length,ct=Math.min(ot.start,ut);ot=ot.end===void 0?ct:Math.min(ot.end,ut),!it.extend&&ct>ot&&(ut=ot,ot=ct,ct=ut),ut=Ke(et,ct);var dt=Ke(et,ot);ut&&dt&&(it.rangeCount!==1||it.anchorNode!==ut.node||it.anchorOffset!==ut.offset||it.focusNode!==dt.node||it.focusOffset!==dt.offset)&&(g=g.createRange(),g.setStart(ut.node,ut.offset),it.removeAllRanges(),ct>ot?(it.addRange(g),it.extend(dt.node,dt.offset)):(g.setEnd(dt.node,dt.offset),it.addRange(g)))}}for(g=[],it=et;it=it.parentNode;)it.nodeType===1&&g.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof et.focus=="function"&&et.focus(),et=0;et<g.length;et++)it=g[et],it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se$1=null,Te$1=!1;function Ue$1(it,g,et){var ot=et.window===et?et.document:et.nodeType===9?et:et.ownerDocument;Te$1||Qe==null||Qe!==Xa(ot)||(ot=Qe,"selectionStart"in ot&&Ne$1(ot)?ot={start:ot.selectionStart,end:ot.selectionEnd}:(ot=(ot.ownerDocument&&ot.ownerDocument.defaultView||window).getSelection(),ot={anchorNode:ot.anchorNode,anchorOffset:ot.anchorOffset,focusNode:ot.focusNode,focusOffset:ot.focusOffset}),Se$1&&Ie$2(Se$1,ot)||(Se$1=ot,ot=oe(Re,"onSelect"),0<ot.length&&(g=new td("onSelect","select",null,g,et),it.push({event:g,listeners:ot}),g.target=Qe)))}function Ve(it,g){var et={};return et[it.toLowerCase()]=g.toLowerCase(),et["Webkit"+it]="webkit"+g,et["Moz"+it]="moz"+g,et}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye$1={};ia&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze(it){if(Xe[it])return Xe[it];if(!We$1[it])return it;var g=We$1[it],et;for(et in g)if(g.hasOwnProperty(et)&&et in Ye$1)return Xe[it]=g[et];return it}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(it,g){df.set(it,g),fa(g,[it])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(it,g,et){var ot=it.type||"unknown-event";it.currentTarget=et,Ub(ot,g,void 0,it),it.currentTarget=null}function se(it,g){g=(g&4)!==0;for(var et=0;et<it.length;et++){var ot=it[et],ut=ot.event;ot=ot.listeners;e:{var ct=void 0;if(g)for(var dt=ot.length-1;0<=dt;dt--){var ft=ot[dt],St=ft.instance,kt=ft.currentTarget;if(ft=ft.listener,St!==ct&&ut.isPropagationStopped())break e;nf(ut,ft,kt),ct=St}else for(dt=0;dt<ot.length;dt++){if(ft=ot[dt],St=ft.instance,kt=ft.currentTarget,ft=ft.listener,St!==ct&&ut.isPropagationStopped())break e;nf(ut,ft,kt),ct=St}}}if(Qb)throw it=Rb,Qb=!1,Rb=null,it}function D$1(it,g){var et=g[of];et===void 0&&(et=g[of]=new Set);var ot=it+"__bubble";et.has(ot)||(pf(g,it,2,!1),et.add(ot))}function qf(it,g,et){var ot=0;g&&(ot|=4),pf(et,it,ot,g)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(it){if(!it[rf]){it[rf]=!0,da.forEach(function(et){et!=="selectionchange"&&(mf.has(et)||qf(et,!1,it),qf(et,!0,it))});var g=it.nodeType===9?it:it.ownerDocument;g===null||g[rf]||(g[rf]=!0,qf("selectionchange",!1,g))}}function pf(it,g,et,ot){switch(jd(g)){case 1:var ut=ed;break;case 4:ut=gd;break;default:ut=fd}et=ut.bind(null,g,et,it),ut=void 0,!Lb||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(ut=!0),ot?ut!==void 0?it.addEventListener(g,et,{capture:!0,passive:ut}):it.addEventListener(g,et,!0):ut!==void 0?it.addEventListener(g,et,{passive:ut}):it.addEventListener(g,et,!1)}function hd(it,g,et,ot,ut){var ct=ot;if(!(g&1)&&!(g&2)&&ot!==null)e:for(;;){if(ot===null)return;var dt=ot.tag;if(dt===3||dt===4){var ft=ot.stateNode.containerInfo;if(ft===ut||ft.nodeType===8&&ft.parentNode===ut)break;if(dt===4)for(dt=ot.return;dt!==null;){var St=dt.tag;if((St===3||St===4)&&(St=dt.stateNode.containerInfo,St===ut||St.nodeType===8&&St.parentNode===ut))return;dt=dt.return}for(;ft!==null;){if(dt=Wc(ft),dt===null)return;if(St=dt.tag,St===5||St===6){ot=ct=dt;continue e}ft=ft.parentNode}}ot=ot.return}Jb(function(){var kt=ct,Tt=xb(et),Rt=[];e:{var Ft=df.get(it);if(Ft!==void 0){var jt=td,Bt=it;switch(it){case"keypress":if(od(et)===0)break e;case"keydown":case"keyup":jt=Rd;break;case"focusin":Bt="focus",jt=Fd;break;case"focusout":Bt="blur",jt=Fd;break;case"beforeblur":case"afterblur":jt=Fd;break;case"click":if(et.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=Vd;break;case $e$1:case af:case bf:jt=Hd;break;case cf:jt=Xd;break;case"scroll":jt=vd;break;case"wheel":jt=Zd;break;case"copy":case"cut":case"paste":jt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=Td}var zt=(g&4)!==0,Ht=!zt&&it==="scroll",Ut=zt?Ft!==null?Ft+"Capture":null:Ft;zt=[];for(var Kt=kt,Yt;Kt!==null;){Yt=Kt;var er=Yt.stateNode;if(Yt.tag===5&&er!==null&&(Yt=er,Ut!==null&&(er=Kb(Kt,Ut),er!=null&&zt.push(tf(Kt,er,Yt)))),Ht)break;Kt=Kt.return}0<zt.length&&(Ft=new jt(Ft,Bt,null,et,Tt),Rt.push({event:Ft,listeners:zt}))}}if(!(g&7)){e:{if(Ft=it==="mouseover"||it==="pointerover",jt=it==="mouseout"||it==="pointerout",Ft&&et!==wb&&(Bt=et.relatedTarget||et.fromElement)&&(Wc(Bt)||Bt[uf]))break e;if((jt||Ft)&&(Ft=Tt.window===Tt?Tt:(Ft=Tt.ownerDocument)?Ft.defaultView||Ft.parentWindow:window,jt?(Bt=et.relatedTarget||et.toElement,jt=kt,Bt=Bt?Wc(Bt):null,Bt!==null&&(Ht=Vb(Bt),Bt!==Ht||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(jt=null,Bt=kt),jt!==Bt)){if(zt=Bd,er="onMouseLeave",Ut="onMouseEnter",Kt="mouse",(it==="pointerout"||it==="pointerover")&&(zt=Td,er="onPointerLeave",Ut="onPointerEnter",Kt="pointer"),Ht=jt==null?Ft:ue$1(jt),Yt=Bt==null?Ft:ue$1(Bt),Ft=new zt(er,Kt+"leave",jt,et,Tt),Ft.target=Ht,Ft.relatedTarget=Yt,er=null,Wc(Tt)===kt&&(zt=new zt(Ut,Kt+"enter",Bt,et,Tt),zt.target=Yt,zt.relatedTarget=Ht,er=zt),Ht=er,jt&&Bt)t:{for(zt=jt,Ut=Bt,Kt=0,Yt=zt;Yt;Yt=vf(Yt))Kt++;for(Yt=0,er=Ut;er;er=vf(er))Yt++;for(;0<Kt-Yt;)zt=vf(zt),Kt--;for(;0<Yt-Kt;)Ut=vf(Ut),Yt--;for(;Kt--;){if(zt===Ut||Ut!==null&&zt===Ut.alternate)break t;zt=vf(zt),Ut=vf(Ut)}zt=null}else zt=null;jt!==null&&wf(Rt,Ft,jt,zt,!1),Bt!==null&&Ht!==null&&wf(Rt,Ht,Bt,zt,!0)}}e:{if(Ft=kt?ue$1(kt):window,jt=Ft.nodeName&&Ft.nodeName.toLowerCase(),jt==="select"||jt==="input"&&Ft.type==="file")var ar=ve;else if(me$1(Ft))if(we$1)ar=Fe$1;else{ar=De$1;var ir=Ce}else(jt=Ft.nodeName)&&jt.toLowerCase()==="input"&&(Ft.type==="checkbox"||Ft.type==="radio")&&(ar=Ee);if(ar&&(ar=ar(it,kt))){ne(Rt,ar,et,Tt);break e}ir&&ir(it,Ft,kt),it==="focusout"&&(ir=Ft._wrapperState)&&ir.controlled&&Ft.type==="number"&&cb(Ft,"number",Ft.value)}switch(ir=kt?ue$1(kt):window,it){case"focusin":(me$1(ir)||ir.contentEditable==="true")&&(Qe=ir,Re=kt,Se$1=null);break;case"focusout":Se$1=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(Rt,et,Tt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue$1(Rt,et,Tt)}var lr;if(ae)e:{switch(it){case"compositionstart":var cr="onCompositionStart";break e;case"compositionend":cr="onCompositionEnd";break e;case"compositionupdate":cr="onCompositionUpdate";break e}cr=void 0}else ie$2?ge(it,et)&&(cr="onCompositionEnd"):it==="keydown"&&et.keyCode===229&&(cr="onCompositionStart");cr&&(de$1&&et.locale!=="ko"&&(ie$2||cr!=="onCompositionStart"?cr==="onCompositionEnd"&&ie$2&&(lr=nd()):(kd=Tt,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),ir=oe(kt,cr),0<ir.length&&(cr=new Ld(cr,it,null,et,Tt),Rt.push({event:cr,listeners:ir}),lr?cr.data=lr:(lr=he$1(et),lr!==null&&(cr.data=lr)))),(lr=ce?je$1(it,et):ke$1(it,et))&&(kt=oe(kt,"onBeforeInput"),0<kt.length&&(Tt=new Ld("onBeforeInput","beforeinput",null,et,Tt),Rt.push({event:Tt,listeners:kt}),Tt.data=lr))}se(Rt,g)})}function tf(it,g,et){return{instance:it,listener:g,currentTarget:et}}function oe(it,g){for(var et=g+"Capture",ot=[];it!==null;){var ut=it,ct=ut.stateNode;ut.tag===5&&ct!==null&&(ut=ct,ct=Kb(it,et),ct!=null&&ot.unshift(tf(it,ct,ut)),ct=Kb(it,g),ct!=null&&ot.push(tf(it,ct,ut))),it=it.return}return ot}function vf(it){if(it===null)return null;do it=it.return;while(it&&it.tag!==5);return it||null}function wf(it,g,et,ot,ut){for(var ct=g._reactName,dt=[];et!==null&&et!==ot;){var ft=et,St=ft.alternate,kt=ft.stateNode;if(St!==null&&St===ot)break;ft.tag===5&&kt!==null&&(ft=kt,ut?(St=Kb(et,ct),St!=null&&dt.unshift(tf(et,St,ft))):ut||(St=Kb(et,ct),St!=null&&dt.push(tf(et,St,ft)))),et=et.return}dt.length!==0&&it.push({event:g,listeners:dt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(it){return(typeof it=="string"?it:""+it).replace(xf,`
`).replace(yf,"")}function Af(it,g,et){if(g=zf(g),zf(it)!==g&&et)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(it,g){return it==="textarea"||it==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(it){return Hf.resolve(null).then(it).catch(If)}:Ff;function If(it){setTimeout(function(){throw it})}function Kf(it,g){var et=g,ot=0;do{var ut=et.nextSibling;if(it.removeChild(et),ut&&ut.nodeType===8)if(et=ut.data,et==="/$"){if(ot===0){it.removeChild(ut),bd(g);return}ot--}else et!=="$"&&et!=="$?"&&et!=="$!"||ot++;et=ut}while(et);bd(g)}function Lf(it){for(;it!=null;it=it.nextSibling){var g=it.nodeType;if(g===1||g===3)break;if(g===8){if(g=it.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return it}function Mf(it){it=it.previousSibling;for(var g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="$"||et==="$!"||et==="$?"){if(g===0)return it;g--}else et==="/$"&&g++}it=it.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(it){var g=it[Of];if(g)return g;for(var et=it.parentNode;et;){if(g=et[uf]||et[Of]){if(et=g.alternate,g.child!==null||et!==null&&et.child!==null)for(it=Mf(it);it!==null;){if(et=it[Of])return et;it=Mf(it)}return g}it=et,et=it.parentNode}return null}function Cb(it){return it=it[Of]||it[uf],!it||it.tag!==5&&it.tag!==6&&it.tag!==13&&it.tag!==3?null:it}function ue$1(it){if(it.tag===5||it.tag===6)return it.stateNode;throw Error(p$3(33))}function Db(it){return it[Pf]||null}var Sf=[],Tf=-1;function Uf(it){return{current:it}}function E$2(it){0>Tf||(it.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(it,g){Tf++,Sf[Tf]=it.current,it.current=g}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(it,g){var et=it.type.contextTypes;if(!et)return Vf;var ot=it.stateNode;if(ot&&ot.__reactInternalMemoizedUnmaskedChildContext===g)return ot.__reactInternalMemoizedMaskedChildContext;var ut={},ct;for(ct in et)ut[ct]=g[ct];return ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=g,it.__reactInternalMemoizedMaskedChildContext=ut),ut}function Zf(it){return it=it.childContextTypes,it!=null}function $f(){E$2(Wf),E$2(H$3)}function ag(it,g,et){if(H$3.current!==Vf)throw Error(p$3(168));G$1(H$3,g),G$1(Wf,et)}function bg(it,g,et){var ot=it.stateNode;if(g=g.childContextTypes,typeof ot.getChildContext!="function")return et;ot=ot.getChildContext();for(var ut in ot)if(!(ut in g))throw Error(p$3(108,Ra(it)||"Unknown",ut));return A$2({},et,ot)}function cg(it){return it=(it=it.stateNode)&&it.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$1(H$3,it),G$1(Wf,Wf.current),!0}function dg(it,g,et){var ot=it.stateNode;if(!ot)throw Error(p$3(169));et?(it=bg(it,g,Xf),ot.__reactInternalMemoizedMergedChildContext=it,E$2(Wf),E$2(H$3),G$1(H$3,it)):E$2(Wf),G$1(Wf,et)}var eg=null,fg=!1,gg=!1;function hg(it){eg===null?eg=[it]:eg.push(it)}function ig(it){fg=!0,hg(it)}function jg(){if(!gg&&eg!==null){gg=!0;var it=0,g=C$4;try{var et=eg;for(C$4=1;it<et.length;it++){var ot=et[it];do ot=ot(!0);while(ot!==null)}eg=null,fg=!1}catch(ut){throw eg!==null&&(eg=eg.slice(it+1)),ac(fc,jg),ut}finally{C$4=g,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(it,g){kg[lg++]=ng,kg[lg++]=mg,mg=it,ng=g}function ug(it,g,et){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=it;var ot=rg;it=sg;var ut=32-oc(ot)-1;ot&=~(1<<ut),et+=1;var ct=32-oc(g)+ut;if(30<ct){var dt=ut-ut%5;ct=(ot&(1<<dt)-1).toString(32),ot>>=dt,ut-=dt,rg=1<<32-oc(g)+ut|et<<ut|ot,sg=ct+it}else rg=1<<ct|et<<ut|ot,sg=it}function vg(it){it.return!==null&&(tg(it,1),ug(it,1,0))}function wg(it){for(;it===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;it===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(it,g){var et=Bg(5,null,null,0);et.elementType="DELETED",et.stateNode=g,et.return=it,g=it.deletions,g===null?(it.deletions=[et],it.flags|=16):g.push(et)}function Cg(it,g){switch(it.tag){case 5:var et=it.type;return g=g.nodeType!==1||et.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(it.stateNode=g,xg=it,yg=Lf(g.firstChild),!0):!1;case 6:return g=it.pendingProps===""||g.nodeType!==3?null:g,g!==null?(it.stateNode=g,xg=it,yg=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(et=qg!==null?{id:rg,overflow:sg}:null,it.memoizedState={dehydrated:g,treeContext:et,retryLane:1073741824},et=Bg(18,null,null,0),et.stateNode=g,et.return=it,it.child=et,xg=it,yg=null,!0):!1;default:return!1}}function Dg(it){return(it.mode&1)!==0&&(it.flags&128)===0}function Eg(it){if(I$4){var g=yg;if(g){var et=g;if(!Cg(it,g)){if(Dg(it))throw Error(p$3(418));g=Lf(et.nextSibling);var ot=xg;g&&Cg(it,g)?Ag(ot,et):(it.flags=it.flags&-4097|2,I$4=!1,xg=it)}}else{if(Dg(it))throw Error(p$3(418));it.flags=it.flags&-4097|2,I$4=!1,xg=it}}}function Fg(it){for(it=it.return;it!==null&&it.tag!==5&&it.tag!==3&&it.tag!==13;)it=it.return;xg=it}function Gg(it){if(it!==xg)return!1;if(!I$4)return Fg(it),I$4=!0,!1;var g;if((g=it.tag!==3)&&!(g=it.tag!==5)&&(g=it.type,g=g!=="head"&&g!=="body"&&!Ef(it.type,it.memoizedProps)),g&&(g=yg)){if(Dg(it))throw Hg(),Error(p$3(418));for(;g;)Ag(it,g),g=Lf(g.nextSibling)}if(Fg(it),it.tag===13){if(it=it.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$3(317));e:{for(it=it.nextSibling,g=0;it;){if(it.nodeType===8){var et=it.data;if(et==="/$"){if(g===0){yg=Lf(it.nextSibling);break e}g--}else et!=="$"&&et!=="$!"&&et!=="$?"||g++}it=it.nextSibling}yg=null}}else yg=xg?Lf(it.stateNode.nextSibling):null;return!0}function Hg(){for(var it=yg;it;)it=Lf(it.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(it){zg===null?zg=[it]:zg.push(it)}var Kg=ua.ReactCurrentBatchConfig;function Lg(it,g,et){if(it=et.ref,it!==null&&typeof it!="function"&&typeof it!="object"){if(et._owner){if(et=et._owner,et){if(et.tag!==1)throw Error(p$3(309));var ot=et.stateNode}if(!ot)throw Error(p$3(147,it));var ut=ot,ct=""+it;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===ct?g.ref:(g=function(dt){var ft=ut.refs;dt===null?delete ft[ct]:ft[ct]=dt},g._stringRef=ct,g)}if(typeof it!="string")throw Error(p$3(284));if(!et._owner)throw Error(p$3(290,it))}return it}function Mg(it,g){throw it=Object.prototype.toString.call(g),Error(p$3(31,it==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":it))}function Ng(it){var g=it._init;return g(it._payload)}function Og(it){function g(Ut,Kt){if(it){var Yt=Ut.deletions;Yt===null?(Ut.deletions=[Kt],Ut.flags|=16):Yt.push(Kt)}}function et(Ut,Kt){if(!it)return null;for(;Kt!==null;)g(Ut,Kt),Kt=Kt.sibling;return null}function ot(Ut,Kt){for(Ut=new Map;Kt!==null;)Kt.key!==null?Ut.set(Kt.key,Kt):Ut.set(Kt.index,Kt),Kt=Kt.sibling;return Ut}function ut(Ut,Kt){return Ut=Pg(Ut,Kt),Ut.index=0,Ut.sibling=null,Ut}function ct(Ut,Kt,Yt){return Ut.index=Yt,it?(Yt=Ut.alternate,Yt!==null?(Yt=Yt.index,Yt<Kt?(Ut.flags|=2,Kt):Yt):(Ut.flags|=2,Kt)):(Ut.flags|=1048576,Kt)}function dt(Ut){return it&&Ut.alternate===null&&(Ut.flags|=2),Ut}function ft(Ut,Kt,Yt,er){return Kt===null||Kt.tag!==6?(Kt=Qg(Yt,Ut.mode,er),Kt.return=Ut,Kt):(Kt=ut(Kt,Yt),Kt.return=Ut,Kt)}function St(Ut,Kt,Yt,er){var ar=Yt.type;return ar===ya?Tt(Ut,Kt,Yt.props.children,er,Yt.key):Kt!==null&&(Kt.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===Ha&&Ng(ar)===Kt.type)?(er=ut(Kt,Yt.props),er.ref=Lg(Ut,Kt,Yt),er.return=Ut,er):(er=Rg(Yt.type,Yt.key,Yt.props,null,Ut.mode,er),er.ref=Lg(Ut,Kt,Yt),er.return=Ut,er)}function kt(Ut,Kt,Yt,er){return Kt===null||Kt.tag!==4||Kt.stateNode.containerInfo!==Yt.containerInfo||Kt.stateNode.implementation!==Yt.implementation?(Kt=Sg(Yt,Ut.mode,er),Kt.return=Ut,Kt):(Kt=ut(Kt,Yt.children||[]),Kt.return=Ut,Kt)}function Tt(Ut,Kt,Yt,er,ar){return Kt===null||Kt.tag!==7?(Kt=Tg(Yt,Ut.mode,er,ar),Kt.return=Ut,Kt):(Kt=ut(Kt,Yt),Kt.return=Ut,Kt)}function Rt(Ut,Kt,Yt){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number")return Kt=Qg(""+Kt,Ut.mode,Yt),Kt.return=Ut,Kt;if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case va:return Yt=Rg(Kt.type,Kt.key,Kt.props,null,Ut.mode,Yt),Yt.ref=Lg(Ut,null,Kt),Yt.return=Ut,Yt;case wa:return Kt=Sg(Kt,Ut.mode,Yt),Kt.return=Ut,Kt;case Ha:var er=Kt._init;return Rt(Ut,er(Kt._payload),Yt)}if(eb(Kt)||Ka(Kt))return Kt=Tg(Kt,Ut.mode,Yt,null),Kt.return=Ut,Kt;Mg(Ut,Kt)}return null}function Ft(Ut,Kt,Yt,er){var ar=Kt!==null?Kt.key:null;if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return ar!==null?null:ft(Ut,Kt,""+Yt,er);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case va:return Yt.key===ar?St(Ut,Kt,Yt,er):null;case wa:return Yt.key===ar?kt(Ut,Kt,Yt,er):null;case Ha:return ar=Yt._init,Ft(Ut,Kt,ar(Yt._payload),er)}if(eb(Yt)||Ka(Yt))return ar!==null?null:Tt(Ut,Kt,Yt,er,null);Mg(Ut,Yt)}return null}function jt(Ut,Kt,Yt,er,ar){if(typeof er=="string"&&er!==""||typeof er=="number")return Ut=Ut.get(Yt)||null,ft(Kt,Ut,""+er,ar);if(typeof er=="object"&&er!==null){switch(er.$$typeof){case va:return Ut=Ut.get(er.key===null?Yt:er.key)||null,St(Kt,Ut,er,ar);case wa:return Ut=Ut.get(er.key===null?Yt:er.key)||null,kt(Kt,Ut,er,ar);case Ha:var ir=er._init;return jt(Ut,Kt,Yt,ir(er._payload),ar)}if(eb(er)||Ka(er))return Ut=Ut.get(Yt)||null,Tt(Kt,Ut,er,ar,null);Mg(Kt,er)}return null}function Bt(Ut,Kt,Yt,er){for(var ar=null,ir=null,lr=Kt,cr=Kt=0,vr=null;lr!==null&&cr<Yt.length;cr++){lr.index>cr?(vr=lr,lr=null):vr=lr.sibling;var xr=Ft(Ut,lr,Yt[cr],er);if(xr===null){lr===null&&(lr=vr);break}it&&lr&&xr.alternate===null&&g(Ut,lr),Kt=ct(xr,Kt,cr),ir===null?ar=xr:ir.sibling=xr,ir=xr,lr=vr}if(cr===Yt.length)return et(Ut,lr),I$4&&tg(Ut,cr),ar;if(lr===null){for(;cr<Yt.length;cr++)lr=Rt(Ut,Yt[cr],er),lr!==null&&(Kt=ct(lr,Kt,cr),ir===null?ar=lr:ir.sibling=lr,ir=lr);return I$4&&tg(Ut,cr),ar}for(lr=ot(Ut,lr);cr<Yt.length;cr++)vr=jt(lr,Ut,cr,Yt[cr],er),vr!==null&&(it&&vr.alternate!==null&&lr.delete(vr.key===null?cr:vr.key),Kt=ct(vr,Kt,cr),ir===null?ar=vr:ir.sibling=vr,ir=vr);return it&&lr.forEach(function(yr){return g(Ut,yr)}),I$4&&tg(Ut,cr),ar}function zt(Ut,Kt,Yt,er){var ar=Ka(Yt);if(typeof ar!="function")throw Error(p$3(150));if(Yt=ar.call(Yt),Yt==null)throw Error(p$3(151));for(var ir=ar=null,lr=Kt,cr=Kt=0,vr=null,xr=Yt.next();lr!==null&&!xr.done;cr++,xr=Yt.next()){lr.index>cr?(vr=lr,lr=null):vr=lr.sibling;var yr=Ft(Ut,lr,xr.value,er);if(yr===null){lr===null&&(lr=vr);break}it&&lr&&yr.alternate===null&&g(Ut,lr),Kt=ct(yr,Kt,cr),ir===null?ar=yr:ir.sibling=yr,ir=yr,lr=vr}if(xr.done)return et(Ut,lr),I$4&&tg(Ut,cr),ar;if(lr===null){for(;!xr.done;cr++,xr=Yt.next())xr=Rt(Ut,xr.value,er),xr!==null&&(Kt=ct(xr,Kt,cr),ir===null?ar=xr:ir.sibling=xr,ir=xr);return I$4&&tg(Ut,cr),ar}for(lr=ot(Ut,lr);!xr.done;cr++,xr=Yt.next())xr=jt(lr,Ut,cr,xr.value,er),xr!==null&&(it&&xr.alternate!==null&&lr.delete(xr.key===null?cr:xr.key),Kt=ct(xr,Kt,cr),ir===null?ar=xr:ir.sibling=xr,ir=xr);return it&&lr.forEach(function(Sr){return g(Ut,Sr)}),I$4&&tg(Ut,cr),ar}function Ht(Ut,Kt,Yt,er){if(typeof Yt=="object"&&Yt!==null&&Yt.type===ya&&Yt.key===null&&(Yt=Yt.props.children),typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case va:e:{for(var ar=Yt.key,ir=Kt;ir!==null;){if(ir.key===ar){if(ar=Yt.type,ar===ya){if(ir.tag===7){et(Ut,ir.sibling),Kt=ut(ir,Yt.props.children),Kt.return=Ut,Ut=Kt;break e}}else if(ir.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===Ha&&Ng(ar)===ir.type){et(Ut,ir.sibling),Kt=ut(ir,Yt.props),Kt.ref=Lg(Ut,ir,Yt),Kt.return=Ut,Ut=Kt;break e}et(Ut,ir);break}else g(Ut,ir);ir=ir.sibling}Yt.type===ya?(Kt=Tg(Yt.props.children,Ut.mode,er,Yt.key),Kt.return=Ut,Ut=Kt):(er=Rg(Yt.type,Yt.key,Yt.props,null,Ut.mode,er),er.ref=Lg(Ut,Kt,Yt),er.return=Ut,Ut=er)}return dt(Ut);case wa:e:{for(ir=Yt.key;Kt!==null;){if(Kt.key===ir)if(Kt.tag===4&&Kt.stateNode.containerInfo===Yt.containerInfo&&Kt.stateNode.implementation===Yt.implementation){et(Ut,Kt.sibling),Kt=ut(Kt,Yt.children||[]),Kt.return=Ut,Ut=Kt;break e}else{et(Ut,Kt);break}else g(Ut,Kt);Kt=Kt.sibling}Kt=Sg(Yt,Ut.mode,er),Kt.return=Ut,Ut=Kt}return dt(Ut);case Ha:return ir=Yt._init,Ht(Ut,Kt,ir(Yt._payload),er)}if(eb(Yt))return Bt(Ut,Kt,Yt,er);if(Ka(Yt))return zt(Ut,Kt,Yt,er);Mg(Ut,Yt)}return typeof Yt=="string"&&Yt!==""||typeof Yt=="number"?(Yt=""+Yt,Kt!==null&&Kt.tag===6?(et(Ut,Kt.sibling),Kt=ut(Kt,Yt),Kt.return=Ut,Ut=Kt):(et(Ut,Kt),Kt=Qg(Yt,Ut.mode,er),Kt.return=Ut,Ut=Kt),dt(Ut)):et(Ut,Kt)}return Ht}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(it){var g=Wg.current;E$2(Wg),it._currentValue=g}function bh(it,g,et){for(;it!==null;){var ot=it.alternate;if((it.childLanes&g)!==g?(it.childLanes|=g,ot!==null&&(ot.childLanes|=g)):ot!==null&&(ot.childLanes&g)!==g&&(ot.childLanes|=g),it===et)break;it=it.return}}function ch(it,g){Xg=it,Zg=Yg=null,it=it.dependencies,it!==null&&it.firstContext!==null&&(it.lanes&g&&(dh=!0),it.firstContext=null)}function eh(it){var g=it._currentValue;if(Zg!==it)if(it={context:it,memoizedValue:g,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=it,Xg.dependencies={lanes:0,firstContext:it}}else Yg=Yg.next=it;return g}var fh=null;function gh(it){fh===null?fh=[it]:fh.push(it)}function hh(it,g,et,ot){var ut=g.interleaved;return ut===null?(et.next=et,gh(g)):(et.next=ut.next,ut.next=et),g.interleaved=et,ih(it,ot)}function ih(it,g){it.lanes|=g;var et=it.alternate;for(et!==null&&(et.lanes|=g),et=it,it=it.return;it!==null;)it.childLanes|=g,et=it.alternate,et!==null&&(et.childLanes|=g),et=it,it=it.return;return et.tag===3?et.stateNode:null}var jh=!1;function kh(it){it.updateQueue={baseState:it.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(it,g){it=it.updateQueue,g.updateQueue===it&&(g.updateQueue={baseState:it.baseState,firstBaseUpdate:it.firstBaseUpdate,lastBaseUpdate:it.lastBaseUpdate,shared:it.shared,effects:it.effects})}function mh(it,g){return{eventTime:it,lane:g,tag:0,payload:null,callback:null,next:null}}function nh(it,g,et){var ot=it.updateQueue;if(ot===null)return null;if(ot=ot.shared,K$2&2){var ut=ot.pending;return ut===null?g.next=g:(g.next=ut.next,ut.next=g),ot.pending=g,ih(it,et)}return ut=ot.interleaved,ut===null?(g.next=g,gh(ot)):(g.next=ut.next,ut.next=g),ot.interleaved=g,ih(it,et)}function oh(it,g,et){if(g=g.updateQueue,g!==null&&(g=g.shared,(et&4194240)!==0)){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}function ph(it,g){var et=it.updateQueue,ot=it.alternate;if(ot!==null&&(ot=ot.updateQueue,et===ot)){var ut=null,ct=null;if(et=et.firstBaseUpdate,et!==null){do{var dt={eventTime:et.eventTime,lane:et.lane,tag:et.tag,payload:et.payload,callback:et.callback,next:null};ct===null?ut=ct=dt:ct=ct.next=dt,et=et.next}while(et!==null);ct===null?ut=ct=g:ct=ct.next=g}else ut=ct=g;et={baseState:ot.baseState,firstBaseUpdate:ut,lastBaseUpdate:ct,shared:ot.shared,effects:ot.effects},it.updateQueue=et;return}it=et.lastBaseUpdate,it===null?et.firstBaseUpdate=g:it.next=g,et.lastBaseUpdate=g}function qh(it,g,et,ot){var ut=it.updateQueue;jh=!1;var ct=ut.firstBaseUpdate,dt=ut.lastBaseUpdate,ft=ut.shared.pending;if(ft!==null){ut.shared.pending=null;var St=ft,kt=St.next;St.next=null,dt===null?ct=kt:dt.next=kt,dt=St;var Tt=it.alternate;Tt!==null&&(Tt=Tt.updateQueue,ft=Tt.lastBaseUpdate,ft!==dt&&(ft===null?Tt.firstBaseUpdate=kt:ft.next=kt,Tt.lastBaseUpdate=St))}if(ct!==null){var Rt=ut.baseState;dt=0,Tt=kt=St=null,ft=ct;do{var Ft=ft.lane,jt=ft.eventTime;if((ot&Ft)===Ft){Tt!==null&&(Tt=Tt.next={eventTime:jt,lane:0,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null});e:{var Bt=it,zt=ft;switch(Ft=g,jt=et,zt.tag){case 1:if(Bt=zt.payload,typeof Bt=="function"){Rt=Bt.call(jt,Rt,Ft);break e}Rt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=zt.payload,Ft=typeof Bt=="function"?Bt.call(jt,Rt,Ft):Bt,Ft==null)break e;Rt=A$2({},Rt,Ft);break e;case 2:jh=!0}}ft.callback!==null&&ft.lane!==0&&(it.flags|=64,Ft=ut.effects,Ft===null?ut.effects=[ft]:Ft.push(ft))}else jt={eventTime:jt,lane:Ft,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},Tt===null?(kt=Tt=jt,St=Rt):Tt=Tt.next=jt,dt|=Ft;if(ft=ft.next,ft===null){if(ft=ut.shared.pending,ft===null)break;Ft=ft,ft=Ft.next,Ft.next=null,ut.lastBaseUpdate=Ft,ut.shared.pending=null}}while(1);if(Tt===null&&(St=Rt),ut.baseState=St,ut.firstBaseUpdate=kt,ut.lastBaseUpdate=Tt,g=ut.shared.interleaved,g!==null){ut=g;do dt|=ut.lane,ut=ut.next;while(ut!==g)}else ct===null&&(ut.shared.lanes=0);rh|=dt,it.lanes=dt,it.memoizedState=Rt}}function sh(it,g,et){if(it=g.effects,g.effects=null,it!==null)for(g=0;g<it.length;g++){var ot=it[g],ut=ot.callback;if(ut!==null){if(ot.callback=null,ot=et,typeof ut!="function")throw Error(p$3(191,ut));ut.call(ot)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(it){if(it===th)throw Error(p$3(174));return it}function yh(it,g){switch(G$1(wh,g),G$1(vh$1,it),G$1(uh,th),it=g.nodeType,it){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:lb(null,"");break;default:it=it===8?g.parentNode:g,g=it.namespaceURI||null,it=it.tagName,g=lb(g,it)}E$2(uh),G$1(uh,g)}function zh(){E$2(uh),E$2(vh$1),E$2(wh)}function Ah(it){xh(wh.current);var g=xh(uh.current),et=lb(g,it.type);g!==et&&(G$1(vh$1,it),G$1(uh,et))}function Bh(it){vh$1.current===it&&(E$2(uh),E$2(vh$1))}var L$3=Uf(0);function Ch(it){for(var g=it;g!==null;){if(g.tag===13){var et=g.memoizedState;if(et!==null&&(et=et.dehydrated,et===null||et.data==="$?"||et.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Dh=[];function Eh(){for(var it=0;it<Dh.length;it++)Dh[it]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$3=null,N$2=null,O$4=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$3(){throw Error(p$3(321))}function Mh(it,g){if(g===null)return!1;for(var et=0;et<g.length&&et<it.length;et++)if(!He$2(it[et],g[et]))return!1;return!0}function Nh(it,g,et,ot,ut,ct){if(Hh=ct,M$3=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Fh.current=it===null||it.memoizedState===null?Oh:Ph,it=et(ot,ut),Jh){ct=0;do{if(Jh=!1,Kh=0,25<=ct)throw Error(p$3(301));ct+=1,O$4=N$2=null,g.updateQueue=null,Fh.current=Qh,it=et(ot,ut)}while(Jh)}if(Fh.current=Rh,g=N$2!==null&&N$2.next!==null,Hh=0,O$4=N$2=M$3=null,Ih=!1,g)throw Error(p$3(300));return it}function Sh(){var it=Kh!==0;return Kh=0,it}function Th(){var it={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it,O$4}function Uh(){if(N$2===null){var it=M$3.alternate;it=it!==null?it.memoizedState:null}else it=N$2.next;var g=O$4===null?M$3.memoizedState:O$4.next;if(g!==null)O$4=g,N$2=it;else{if(it===null)throw Error(p$3(310));N$2=it,it={memoizedState:N$2.memoizedState,baseState:N$2.baseState,baseQueue:N$2.baseQueue,queue:N$2.queue,next:null},O$4===null?M$3.memoizedState=O$4=it:O$4=O$4.next=it}return O$4}function Vh(it,g){return typeof g=="function"?g(it):g}function Wh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=N$2,ut=ot.baseQueue,ct=et.pending;if(ct!==null){if(ut!==null){var dt=ut.next;ut.next=ct.next,ct.next=dt}ot.baseQueue=ut=ct,et.pending=null}if(ut!==null){ct=ut.next,ot=ot.baseState;var ft=dt=null,St=null,kt=ct;do{var Tt=kt.lane;if((Hh&Tt)===Tt)St!==null&&(St=St.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),ot=kt.hasEagerState?kt.eagerState:it(ot,kt.action);else{var Rt={lane:Tt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};St===null?(ft=St=Rt,dt=ot):St=St.next=Rt,M$3.lanes|=Tt,rh|=Tt}kt=kt.next}while(kt!==null&&kt!==ct);St===null?dt=ot:St.next=ft,He$2(ot,g.memoizedState)||(dh=!0),g.memoizedState=ot,g.baseState=dt,g.baseQueue=St,et.lastRenderedState=ot}if(it=et.interleaved,it!==null){ut=it;do ct=ut.lane,M$3.lanes|=ct,rh|=ct,ut=ut.next;while(ut!==it)}else ut===null&&(et.lanes=0);return[g.memoizedState,et.dispatch]}function Xh(it){var g=Uh(),et=g.queue;if(et===null)throw Error(p$3(311));et.lastRenderedReducer=it;var ot=et.dispatch,ut=et.pending,ct=g.memoizedState;if(ut!==null){et.pending=null;var dt=ut=ut.next;do ct=it(ct,dt.action),dt=dt.next;while(dt!==ut);He$2(ct,g.memoizedState)||(dh=!0),g.memoizedState=ct,g.baseQueue===null&&(g.baseState=ct),et.lastRenderedState=ct}return[ct,ot]}function Yh(){}function Zh(it,g){var et=M$3,ot=Uh(),ut=g(),ct=!He$2(ot.memoizedState,ut);if(ct&&(ot.memoizedState=ut,dh=!0),ot=ot.queue,$h(ai.bind(null,et,ot,it),[it]),ot.getSnapshot!==g||ct||O$4!==null&&O$4.memoizedState.tag&1){if(et.flags|=2048,bi(9,ci.bind(null,et,ot,ut,g),void 0,null),Q$1===null)throw Error(p$3(349));Hh&30||di(et,g,ut)}return ut}function di(it,g,et){it.flags|=16384,it={getSnapshot:g,value:et},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.stores=[it]):(et=g.stores,et===null?g.stores=[it]:et.push(it))}function ci(it,g,et,ot){g.value=et,g.getSnapshot=ot,ei(g)&&fi(it)}function ai(it,g,et){return et(function(){ei(g)&&fi(it)})}function ei(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!He$2(it,et)}catch{return!0}}function fi(it){var g=ih(it,1);g!==null&&gi(g,it,1,-1)}function hi(it){var g=Th();return typeof it=="function"&&(it=it()),g.memoizedState=g.baseState=it,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:it},g.queue=it,it=it.dispatch=ii.bind(null,M$3,it),[g.memoizedState,it]}function bi(it,g,et,ot){return it={tag:it,create:g,destroy:et,deps:ot,next:null},g=M$3.updateQueue,g===null?(g={lastEffect:null,stores:null},M$3.updateQueue=g,g.lastEffect=it.next=it):(et=g.lastEffect,et===null?g.lastEffect=it.next=it:(ot=et.next,et.next=it,it.next=ot,g.lastEffect=it)),it}function ji(){return Uh().memoizedState}function ki(it,g,et,ot){var ut=Th();M$3.flags|=it,ut.memoizedState=bi(1|g,et,void 0,ot===void 0?null:ot)}function li(it,g,et,ot){var ut=Uh();ot=ot===void 0?null:ot;var ct=void 0;if(N$2!==null){var dt=N$2.memoizedState;if(ct=dt.destroy,ot!==null&&Mh(ot,dt.deps)){ut.memoizedState=bi(g,et,ct,ot);return}}M$3.flags|=it,ut.memoizedState=bi(1|g,et,ct,ot)}function mi(it,g){return ki(8390656,8,it,g)}function $h(it,g){return li(2048,8,it,g)}function ni(it,g){return li(4,2,it,g)}function oi(it,g){return li(4,4,it,g)}function pi(it,g){if(typeof g=="function")return it=it(),g(it),function(){g(null)};if(g!=null)return it=it(),g.current=it,function(){g.current=null}}function qi(it,g,et){return et=et!=null?et.concat([it]):null,li(4,4,pi.bind(null,g,it),et)}function ri(){}function si(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(et.memoizedState=[it,g],it)}function ti(it,g){var et=Uh();g=g===void 0?null:g;var ot=et.memoizedState;return ot!==null&&g!==null&&Mh(g,ot[1])?ot[0]:(it=it(),et.memoizedState=[it,g],it)}function ui(it,g,et){return Hh&21?(He$2(et,g)||(et=yc(),M$3.lanes|=et,rh|=et,it.baseState=!0),g):(it.baseState&&(it.baseState=!1,dh=!0),it.memoizedState=et)}function vi(it,g){var et=C$4;C$4=et!==0&&4>et?et:4,it(!0);var ot=Gh.transition;Gh.transition={};try{it(!1),g()}finally{C$4=et,Gh.transition=ot}}function wi(){return Uh().memoizedState}function xi(it,g,et){var ot=yi(it);if(et={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null},zi(it))Ai(g,et);else if(et=hh(it,g,et,ot),et!==null){var ut=R$3();gi(et,it,ot,ut),Bi(et,g,ot)}}function ii(it,g,et){var ot=yi(it),ut={lane:ot,action:et,hasEagerState:!1,eagerState:null,next:null};if(zi(it))Ai(g,ut);else{var ct=it.alternate;if(it.lanes===0&&(ct===null||ct.lanes===0)&&(ct=g.lastRenderedReducer,ct!==null))try{var dt=g.lastRenderedState,ft=ct(dt,et);if(ut.hasEagerState=!0,ut.eagerState=ft,He$2(ft,dt)){var St=g.interleaved;St===null?(ut.next=ut,gh(g)):(ut.next=St.next,St.next=ut),g.interleaved=ut;return}}catch{}finally{}et=hh(it,g,ut,ot),et!==null&&(ut=R$3(),gi(et,it,ot,ut),Bi(et,g,ot))}}function zi(it){var g=it.alternate;return it===M$3||g!==null&&g===M$3}function Ai(it,g){Jh=Ih=!0;var et=it.pending;et===null?g.next=g:(g.next=et.next,et.next=g),it.pending=g}function Bi(it,g,et){if(et&4194240){var ot=g.lanes;ot&=it.pendingLanes,et|=ot,g.lanes=et,Cc(it,et)}}var Rh={readContext:eh,useCallback:P$3,useContext:P$3,useEffect:P$3,useImperativeHandle:P$3,useInsertionEffect:P$3,useLayoutEffect:P$3,useMemo:P$3,useReducer:P$3,useRef:P$3,useState:P$3,useDebugValue:P$3,useDeferredValue:P$3,useTransition:P$3,useMutableSource:P$3,useSyncExternalStore:P$3,useId:P$3,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(it,g){return Th().memoizedState=[it,g===void 0?null:g],it},useContext:eh,useEffect:mi,useImperativeHandle:function(it,g,et){return et=et!=null?et.concat([it]):null,ki(4194308,4,pi.bind(null,g,it),et)},useLayoutEffect:function(it,g){return ki(4194308,4,it,g)},useInsertionEffect:function(it,g){return ki(4,2,it,g)},useMemo:function(it,g){var et=Th();return g=g===void 0?null:g,it=it(),et.memoizedState=[it,g],it},useReducer:function(it,g,et){var ot=Th();return g=et!==void 0?et(g):g,ot.memoizedState=ot.baseState=g,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:g},ot.queue=it,it=it.dispatch=xi.bind(null,M$3,it),[ot.memoizedState,it]},useRef:function(it){var g=Th();return it={current:it},g.memoizedState=it},useState:hi,useDebugValue:ri,useDeferredValue:function(it){return Th().memoizedState=it},useTransition:function(){var it=hi(!1),g=it[0];return it=vi.bind(null,it[1]),Th().memoizedState=it,[g,it]},useMutableSource:function(){},useSyncExternalStore:function(it,g,et){var ot=M$3,ut=Th();if(I$4){if(et===void 0)throw Error(p$3(407));et=et()}else{if(et=g(),Q$1===null)throw Error(p$3(349));Hh&30||di(ot,g,et)}ut.memoizedState=et;var ct={value:et,getSnapshot:g};return ut.queue=ct,mi(ai.bind(null,ot,ct,it),[it]),ot.flags|=2048,bi(9,ci.bind(null,ot,ct,et,g),void 0,null),et},useId:function(){var it=Th(),g=Q$1.identifierPrefix;if(I$4){var et=sg,ot=rg;et=(ot&~(1<<32-oc(ot)-1)).toString(32)+et,g=":"+g+"R"+et,et=Kh++,0<et&&(g+="H"+et.toString(32)),g+=":"}else et=Lh++,g=":"+g+"r"+et.toString(32)+":";return it.memoizedState=g},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Wh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(it){var g=Uh();return N$2===null?g.memoizedState=it:ui(g,N$2.memoizedState,it)},useTransition:function(){var it=Xh(Vh)[0],g=Uh().memoizedState;return[it,g]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(it,g){if(it&&it.defaultProps){g=A$2({},g),it=it.defaultProps;for(var et in it)g[et]===void 0&&(g[et]=it[et]);return g}return g}function Di(it,g,et,ot){g=it.memoizedState,et=et(ot,g),et=et==null?g:A$2({},g,et),it.memoizedState=et,it.lanes===0&&(it.updateQueue.baseState=et)}var Ei={isMounted:function(it){return(it=it._reactInternals)?Vb(it)===it:!1},enqueueSetState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ut=yi(it),ct=mh(ot,ut);ct.payload=g,et!=null&&(ct.callback=et),g=nh(it,ct,ut),g!==null&&(gi(g,it,ut,ot),oh(g,it,ut))},enqueueReplaceState:function(it,g,et){it=it._reactInternals;var ot=R$3(),ut=yi(it),ct=mh(ot,ut);ct.tag=1,ct.payload=g,et!=null&&(ct.callback=et),g=nh(it,ct,ut),g!==null&&(gi(g,it,ut,ot),oh(g,it,ut))},enqueueForceUpdate:function(it,g){it=it._reactInternals;var et=R$3(),ot=yi(it),ut=mh(et,ot);ut.tag=2,g!=null&&(ut.callback=g),g=nh(it,ut,ot),g!==null&&(gi(g,it,ot,et),oh(g,it,ot))}};function Fi(it,g,et,ot,ut,ct,dt){return it=it.stateNode,typeof it.shouldComponentUpdate=="function"?it.shouldComponentUpdate(ot,ct,dt):g.prototype&&g.prototype.isPureReactComponent?!Ie$2(et,ot)||!Ie$2(ut,ct):!0}function Gi(it,g,et){var ot=!1,ut=Vf,ct=g.contextType;return typeof ct=="object"&&ct!==null?ct=eh(ct):(ut=Zf(g)?Xf:H$3.current,ot=g.contextTypes,ct=(ot=ot!=null)?Yf(it,ut):Vf),g=new g(et,ct),it.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ei,it.stateNode=g,g._reactInternals=it,ot&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=ut,it.__reactInternalMemoizedMaskedChildContext=ct),g}function Hi(it,g,et,ot){it=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(et,ot),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(et,ot),g.state!==it&&Ei.enqueueReplaceState(g,g.state,null)}function Ii(it,g,et,ot){var ut=it.stateNode;ut.props=et,ut.state=it.memoizedState,ut.refs={},kh(it);var ct=g.contextType;typeof ct=="object"&&ct!==null?ut.context=eh(ct):(ct=Zf(g)?Xf:H$3.current,ut.context=Yf(it,ct)),ut.state=it.memoizedState,ct=g.getDerivedStateFromProps,typeof ct=="function"&&(Di(it,g,ct,et),ut.state=it.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof ut.getSnapshotBeforeUpdate=="function"||typeof ut.UNSAFE_componentWillMount!="function"&&typeof ut.componentWillMount!="function"||(g=ut.state,typeof ut.componentWillMount=="function"&&ut.componentWillMount(),typeof ut.UNSAFE_componentWillMount=="function"&&ut.UNSAFE_componentWillMount(),g!==ut.state&&Ei.enqueueReplaceState(ut,ut.state,null),qh(it,et,ut,ot),ut.state=it.memoizedState),typeof ut.componentDidMount=="function"&&(it.flags|=4194308)}function Ji(it,g){try{var et="",ot=g;do et+=Pa(ot),ot=ot.return;while(ot);var ut=et}catch(ct){ut=`
Error generating stack: `+ct.message+`
`+ct.stack}return{value:it,source:g,stack:ut,digest:null}}function Ki(it,g,et){return{value:it,source:null,stack:et??null,digest:g??null}}function Li(it,g){try{console.error(g.value)}catch(et){setTimeout(function(){throw et})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(it,g,et){et=mh(-1,et),et.tag=3,et.payload={element:null};var ot=g.value;return et.callback=function(){Oi||(Oi=!0,Pi=ot),Li(it,g)},et}function Qi(it,g,et){et=mh(-1,et),et.tag=3;var ot=it.type.getDerivedStateFromError;if(typeof ot=="function"){var ut=g.value;et.payload=function(){return ot(ut)},et.callback=function(){Li(it,g)}}var ct=it.stateNode;return ct!==null&&typeof ct.componentDidCatch=="function"&&(et.callback=function(){Li(it,g),typeof ot!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var dt=g.stack;this.componentDidCatch(g.value,{componentStack:dt!==null?dt:""})}),et}function Si(it,g,et){var ot=it.pingCache;if(ot===null){ot=it.pingCache=new Mi;var ut=new Set;ot.set(g,ut)}else ut=ot.get(g),ut===void 0&&(ut=new Set,ot.set(g,ut));ut.has(et)||(ut.add(et),it=Ti.bind(null,it,g,et),g.then(it,it))}function Ui(it){do{var g;if((g=it.tag===13)&&(g=it.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return it;it=it.return}while(it!==null);return null}function Vi(it,g,et,ot,ut){return it.mode&1?(it.flags|=65536,it.lanes=ut,it):(it===g?it.flags|=65536:(it.flags|=128,et.flags|=131072,et.flags&=-52805,et.tag===1&&(et.alternate===null?et.tag=17:(g=mh(-1,1),g.tag=2,nh(et,g,1))),et.lanes|=1),it)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(it,g,et,ot){g.child=it===null?Vg(g,null,et,ot):Ug(g,it.child,et,ot)}function Yi(it,g,et,ot,ut){et=et.render;var ct=g.ref;return ch(g,ut),ot=Nh(it,g,et,ot,ct,ut),et=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ut,Zi(it,g,ut)):(I$4&&et&&vg(g),g.flags|=1,Xi(it,g,ot,ut),g.child)}function $i(it,g,et,ot,ut){if(it===null){var ct=et.type;return typeof ct=="function"&&!aj(ct)&&ct.defaultProps===void 0&&et.compare===null&&et.defaultProps===void 0?(g.tag=15,g.type=ct,bj(it,g,ct,ot,ut)):(it=Rg(et.type,null,ot,g,g.mode,ut),it.ref=g.ref,it.return=g,g.child=it)}if(ct=it.child,!(it.lanes&ut)){var dt=ct.memoizedProps;if(et=et.compare,et=et!==null?et:Ie$2,et(dt,ot)&&it.ref===g.ref)return Zi(it,g,ut)}return g.flags|=1,it=Pg(ct,ot),it.ref=g.ref,it.return=g,g.child=it}function bj(it,g,et,ot,ut){if(it!==null){var ct=it.memoizedProps;if(Ie$2(ct,ot)&&it.ref===g.ref)if(dh=!1,g.pendingProps=ot=ct,(it.lanes&ut)!==0)it.flags&131072&&(dh=!0);else return g.lanes=it.lanes,Zi(it,g,ut)}return cj(it,g,et,ot,ut)}function dj(it,g,et){var ot=g.pendingProps,ut=ot.children,ct=it!==null?it.memoizedState:null;if(ot.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=et;else{if(!(et&1073741824))return it=ct!==null?ct.baseLanes|et:et,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:it,cachePool:null,transitions:null},g.updateQueue=null,G$1(ej,fj),fj|=it,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot=ct!==null?ct.baseLanes:et,G$1(ej,fj),fj|=ot}else ct!==null?(ot=ct.baseLanes|et,g.memoizedState=null):ot=et,G$1(ej,fj),fj|=ot;return Xi(it,g,ut,et),g.child}function gj(it,g){var et=g.ref;(it===null&&et!==null||it!==null&&it.ref!==et)&&(g.flags|=512,g.flags|=2097152)}function cj(it,g,et,ot,ut){var ct=Zf(et)?Xf:H$3.current;return ct=Yf(g,ct),ch(g,ut),et=Nh(it,g,et,ot,ct,ut),ot=Sh(),it!==null&&!dh?(g.updateQueue=it.updateQueue,g.flags&=-2053,it.lanes&=~ut,Zi(it,g,ut)):(I$4&&ot&&vg(g),g.flags|=1,Xi(it,g,et,ut),g.child)}function hj(it,g,et,ot,ut){if(Zf(et)){var ct=!0;cg(g)}else ct=!1;if(ch(g,ut),g.stateNode===null)ij(it,g),Gi(g,et,ot),Ii(g,et,ot,ut),ot=!0;else if(it===null){var dt=g.stateNode,ft=g.memoizedProps;dt.props=ft;var St=dt.context,kt=et.contextType;typeof kt=="object"&&kt!==null?kt=eh(kt):(kt=Zf(et)?Xf:H$3.current,kt=Yf(g,kt));var Tt=et.getDerivedStateFromProps,Rt=typeof Tt=="function"||typeof dt.getSnapshotBeforeUpdate=="function";Rt||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==ot||St!==kt)&&Hi(g,dt,ot,kt),jh=!1;var Ft=g.memoizedState;dt.state=Ft,qh(g,ot,dt,ut),St=g.memoizedState,ft!==ot||Ft!==St||Wf.current||jh?(typeof Tt=="function"&&(Di(g,et,Tt,ot),St=g.memoizedState),(ft=jh||Fi(g,et,ft,ot,Ft,St,kt))?(Rt||typeof dt.UNSAFE_componentWillMount!="function"&&typeof dt.componentWillMount!="function"||(typeof dt.componentWillMount=="function"&&dt.componentWillMount(),typeof dt.UNSAFE_componentWillMount=="function"&&dt.UNSAFE_componentWillMount()),typeof dt.componentDidMount=="function"&&(g.flags|=4194308)):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=ot,g.memoizedState=St),dt.props=ot,dt.state=St,dt.context=kt,ot=ft):(typeof dt.componentDidMount=="function"&&(g.flags|=4194308),ot=!1)}else{dt=g.stateNode,lh(it,g),ft=g.memoizedProps,kt=g.type===g.elementType?ft:Ci(g.type,ft),dt.props=kt,Rt=g.pendingProps,Ft=dt.context,St=et.contextType,typeof St=="object"&&St!==null?St=eh(St):(St=Zf(et)?Xf:H$3.current,St=Yf(g,St));var jt=et.getDerivedStateFromProps;(Tt=typeof jt=="function"||typeof dt.getSnapshotBeforeUpdate=="function")||typeof dt.UNSAFE_componentWillReceiveProps!="function"&&typeof dt.componentWillReceiveProps!="function"||(ft!==Rt||Ft!==St)&&Hi(g,dt,ot,St),jh=!1,Ft=g.memoizedState,dt.state=Ft,qh(g,ot,dt,ut);var Bt=g.memoizedState;ft!==Rt||Ft!==Bt||Wf.current||jh?(typeof jt=="function"&&(Di(g,et,jt,ot),Bt=g.memoizedState),(kt=jh||Fi(g,et,kt,ot,Ft,Bt,St)||!1)?(Tt||typeof dt.UNSAFE_componentWillUpdate!="function"&&typeof dt.componentWillUpdate!="function"||(typeof dt.componentWillUpdate=="function"&&dt.componentWillUpdate(ot,Bt,St),typeof dt.UNSAFE_componentWillUpdate=="function"&&dt.UNSAFE_componentWillUpdate(ot,Bt,St)),typeof dt.componentDidUpdate=="function"&&(g.flags|=4),typeof dt.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&Ft===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&Ft===it.memoizedState||(g.flags|=1024),g.memoizedProps=ot,g.memoizedState=Bt),dt.props=ot,dt.state=Bt,dt.context=St,ot=kt):(typeof dt.componentDidUpdate!="function"||ft===it.memoizedProps&&Ft===it.memoizedState||(g.flags|=4),typeof dt.getSnapshotBeforeUpdate!="function"||ft===it.memoizedProps&&Ft===it.memoizedState||(g.flags|=1024),ot=!1)}return jj(it,g,et,ot,ct,ut)}function jj(it,g,et,ot,ut,ct){gj(it,g);var dt=(g.flags&128)!==0;if(!ot&&!dt)return ut&&dg(g,et,!1),Zi(it,g,ct);ot=g.stateNode,Wi.current=g;var ft=dt&&typeof et.getDerivedStateFromError!="function"?null:ot.render();return g.flags|=1,it!==null&&dt?(g.child=Ug(g,it.child,null,ct),g.child=Ug(g,null,ft,ct)):Xi(it,g,ft,ct),g.memoizedState=ot.state,ut&&dg(g,et,!0),g.child}function kj(it){var g=it.stateNode;g.pendingContext?ag(it,g.pendingContext,g.pendingContext!==g.context):g.context&&ag(it,g.context,!1),yh(it,g.containerInfo)}function lj(it,g,et,ot,ut){return Ig(),Jg(ut),g.flags|=256,Xi(it,g,et,ot),g.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(it){return{baseLanes:it,cachePool:null,transitions:null}}function oj(it,g,et){var ot=g.pendingProps,ut=L$3.current,ct=!1,dt=(g.flags&128)!==0,ft;if((ft=dt)||(ft=it!==null&&it.memoizedState===null?!1:(ut&2)!==0),ft?(ct=!0,g.flags&=-129):(it===null||it.memoizedState!==null)&&(ut|=1),G$1(L$3,ut&1),it===null)return Eg(g),it=g.memoizedState,it!==null&&(it=it.dehydrated,it!==null)?(g.mode&1?it.data==="$!"?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(dt=ot.children,it=ot.fallback,ct?(ot=g.mode,ct=g.child,dt={mode:"hidden",children:dt},!(ot&1)&&ct!==null?(ct.childLanes=0,ct.pendingProps=dt):ct=pj(dt,ot,0,null),it=Tg(it,ot,et,null),ct.return=g,it.return=g,ct.sibling=it,g.child=ct,g.child.memoizedState=nj(et),g.memoizedState=mj,it):qj(g,dt));if(ut=it.memoizedState,ut!==null&&(ft=ut.dehydrated,ft!==null))return rj(it,g,dt,ot,ft,ut,et);if(ct){ct=ot.fallback,dt=g.mode,ut=it.child,ft=ut.sibling;var St={mode:"hidden",children:ot.children};return!(dt&1)&&g.child!==ut?(ot=g.child,ot.childLanes=0,ot.pendingProps=St,g.deletions=null):(ot=Pg(ut,St),ot.subtreeFlags=ut.subtreeFlags&14680064),ft!==null?ct=Pg(ft,ct):(ct=Tg(ct,dt,et,null),ct.flags|=2),ct.return=g,ot.return=g,ot.sibling=ct,g.child=ot,ot=ct,ct=g.child,dt=it.child.memoizedState,dt=dt===null?nj(et):{baseLanes:dt.baseLanes|et,cachePool:null,transitions:dt.transitions},ct.memoizedState=dt,ct.childLanes=it.childLanes&~et,g.memoizedState=mj,ot}return ct=it.child,it=ct.sibling,ot=Pg(ct,{mode:"visible",children:ot.children}),!(g.mode&1)&&(ot.lanes=et),ot.return=g,ot.sibling=null,it!==null&&(et=g.deletions,et===null?(g.deletions=[it],g.flags|=16):et.push(it)),g.child=ot,g.memoizedState=null,ot}function qj(it,g){return g=pj({mode:"visible",children:g},it.mode,0,null),g.return=it,it.child=g}function sj(it,g,et,ot){return ot!==null&&Jg(ot),Ug(g,it.child,null,et),it=qj(g,g.pendingProps.children),it.flags|=2,g.memoizedState=null,it}function rj(it,g,et,ot,ut,ct,dt){if(et)return g.flags&256?(g.flags&=-257,ot=Ki(Error(p$3(422))),sj(it,g,dt,ot)):g.memoizedState!==null?(g.child=it.child,g.flags|=128,null):(ct=ot.fallback,ut=g.mode,ot=pj({mode:"visible",children:ot.children},ut,0,null),ct=Tg(ct,ut,dt,null),ct.flags|=2,ot.return=g,ct.return=g,ot.sibling=ct,g.child=ot,g.mode&1&&Ug(g,it.child,null,dt),g.child.memoizedState=nj(dt),g.memoizedState=mj,ct);if(!(g.mode&1))return sj(it,g,dt,null);if(ut.data==="$!"){if(ot=ut.nextSibling&&ut.nextSibling.dataset,ot)var ft=ot.dgst;return ot=ft,ct=Error(p$3(419)),ot=Ki(ct,ot,void 0),sj(it,g,dt,ot)}if(ft=(dt&it.childLanes)!==0,dh||ft){if(ot=Q$1,ot!==null){switch(dt&-dt){case 4:ut=2;break;case 16:ut=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ut=32;break;case 536870912:ut=268435456;break;default:ut=0}ut=ut&(ot.suspendedLanes|dt)?0:ut,ut!==0&&ut!==ct.retryLane&&(ct.retryLane=ut,ih(it,ut),gi(ot,it,ut,-1))}return tj(),ot=Ki(Error(p$3(421))),sj(it,g,dt,ot)}return ut.data==="$?"?(g.flags|=128,g.child=it.child,g=uj.bind(null,it),ut._reactRetry=g,null):(it=ct.treeContext,yg=Lf(ut.nextSibling),xg=g,I$4=!0,zg=null,it!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=it.id,sg=it.overflow,qg=g),g=qj(g,ot.children),g.flags|=4096,g)}function vj(it,g,et){it.lanes|=g;var ot=it.alternate;ot!==null&&(ot.lanes|=g),bh(it.return,g,et)}function wj(it,g,et,ot,ut){var ct=it.memoizedState;ct===null?it.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:ot,tail:et,tailMode:ut}:(ct.isBackwards=g,ct.rendering=null,ct.renderingStartTime=0,ct.last=ot,ct.tail=et,ct.tailMode=ut)}function xj(it,g,et){var ot=g.pendingProps,ut=ot.revealOrder,ct=ot.tail;if(Xi(it,g,ot.children,et),ot=L$3.current,ot&2)ot=ot&1|2,g.flags|=128;else{if(it!==null&&it.flags&128)e:for(it=g.child;it!==null;){if(it.tag===13)it.memoizedState!==null&&vj(it,et,g);else if(it.tag===19)vj(it,et,g);else if(it.child!==null){it.child.return=it,it=it.child;continue}if(it===g)break e;for(;it.sibling===null;){if(it.return===null||it.return===g)break e;it=it.return}it.sibling.return=it.return,it=it.sibling}ot&=1}if(G$1(L$3,ot),!(g.mode&1))g.memoizedState=null;else switch(ut){case"forwards":for(et=g.child,ut=null;et!==null;)it=et.alternate,it!==null&&Ch(it)===null&&(ut=et),et=et.sibling;et=ut,et===null?(ut=g.child,g.child=null):(ut=et.sibling,et.sibling=null),wj(g,!1,ut,et,ct);break;case"backwards":for(et=null,ut=g.child,g.child=null;ut!==null;){if(it=ut.alternate,it!==null&&Ch(it)===null){g.child=ut;break}it=ut.sibling,ut.sibling=et,et=ut,ut=it}wj(g,!0,et,null,ct);break;case"together":wj(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ij(it,g){!(g.mode&1)&&it!==null&&(it.alternate=null,g.alternate=null,g.flags|=2)}function Zi(it,g,et){if(it!==null&&(g.dependencies=it.dependencies),rh|=g.lanes,!(et&g.childLanes))return null;if(it!==null&&g.child!==it.child)throw Error(p$3(153));if(g.child!==null){for(it=g.child,et=Pg(it,it.pendingProps),g.child=et,et.return=g;it.sibling!==null;)it=it.sibling,et=et.sibling=Pg(it,it.pendingProps),et.return=g;et.sibling=null}return g.child}function yj(it,g,et){switch(g.tag){case 3:kj(g),Ig();break;case 5:Ah(g);break;case 1:Zf(g.type)&&cg(g);break;case 4:yh(g,g.stateNode.containerInfo);break;case 10:var ot=g.type._context,ut=g.memoizedProps.value;G$1(Wg,ot._currentValue),ot._currentValue=ut;break;case 13:if(ot=g.memoizedState,ot!==null)return ot.dehydrated!==null?(G$1(L$3,L$3.current&1),g.flags|=128,null):et&g.child.childLanes?oj(it,g,et):(G$1(L$3,L$3.current&1),it=Zi(it,g,et),it!==null?it.sibling:null);G$1(L$3,L$3.current&1);break;case 19:if(ot=(et&g.childLanes)!==0,it.flags&128){if(ot)return xj(it,g,et);g.flags|=128}if(ut=g.memoizedState,ut!==null&&(ut.rendering=null,ut.tail=null,ut.lastEffect=null),G$1(L$3,L$3.current),ot)break;return null;case 22:case 23:return g.lanes=0,dj(it,g,et)}return Zi(it,g,et)}var zj,Aj,Bj,Cj;zj=function(it,g){for(var et=g.child;et!==null;){if(et.tag===5||et.tag===6)it.appendChild(et.stateNode);else if(et.tag!==4&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===g)break;for(;et.sibling===null;){if(et.return===null||et.return===g)return;et=et.return}et.sibling.return=et.return,et=et.sibling}};Aj=function(){};Bj=function(it,g,et,ot){var ut=it.memoizedProps;if(ut!==ot){it=g.stateNode,xh(uh.current);var ct=null;switch(et){case"input":ut=Ya(it,ut),ot=Ya(it,ot),ct=[];break;case"select":ut=A$2({},ut,{value:void 0}),ot=A$2({},ot,{value:void 0}),ct=[];break;case"textarea":ut=gb(it,ut),ot=gb(it,ot),ct=[];break;default:typeof ut.onClick!="function"&&typeof ot.onClick=="function"&&(it.onclick=Bf)}ub(et,ot);var dt;et=null;for(kt in ut)if(!ot.hasOwnProperty(kt)&&ut.hasOwnProperty(kt)&&ut[kt]!=null)if(kt==="style"){var ft=ut[kt];for(dt in ft)ft.hasOwnProperty(dt)&&(et||(et={}),et[dt]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(ea.hasOwnProperty(kt)?ct||(ct=[]):(ct=ct||[]).push(kt,null));for(kt in ot){var St=ot[kt];if(ft=ut!=null?ut[kt]:void 0,ot.hasOwnProperty(kt)&&St!==ft&&(St!=null||ft!=null))if(kt==="style")if(ft){for(dt in ft)!ft.hasOwnProperty(dt)||St&&St.hasOwnProperty(dt)||(et||(et={}),et[dt]="");for(dt in St)St.hasOwnProperty(dt)&&ft[dt]!==St[dt]&&(et||(et={}),et[dt]=St[dt])}else et||(ct||(ct=[]),ct.push(kt,et)),et=St;else kt==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,ft=ft?ft.__html:void 0,St!=null&&ft!==St&&(ct=ct||[]).push(kt,St)):kt==="children"?typeof St!="string"&&typeof St!="number"||(ct=ct||[]).push(kt,""+St):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(kt)?(St!=null&&kt==="onScroll"&&D$1("scroll",it),ct||ft===St||(ct=[])):(ct=ct||[]).push(kt,St))}et&&(ct=ct||[]).push("style",et);var kt=ct;(g.updateQueue=kt)&&(g.flags|=4)}};Cj=function(it,g,et,ot){et!==ot&&(g.flags|=4)};function Dj(it,g){if(!I$4)switch(it.tailMode){case"hidden":g=it.tail;for(var et=null;g!==null;)g.alternate!==null&&(et=g),g=g.sibling;et===null?it.tail=null:et.sibling=null;break;case"collapsed":et=it.tail;for(var ot=null;et!==null;)et.alternate!==null&&(ot=et),et=et.sibling;ot===null?g||it.tail===null?it.tail=null:it.tail.sibling=null:ot.sibling=null}}function S$3(it){var g=it.alternate!==null&&it.alternate.child===it.child,et=0,ot=0;if(g)for(var ut=it.child;ut!==null;)et|=ut.lanes|ut.childLanes,ot|=ut.subtreeFlags&14680064,ot|=ut.flags&14680064,ut.return=it,ut=ut.sibling;else for(ut=it.child;ut!==null;)et|=ut.lanes|ut.childLanes,ot|=ut.subtreeFlags,ot|=ut.flags,ut.return=it,ut=ut.sibling;return it.subtreeFlags|=ot,it.childLanes=et,g}function Ej(it,g,et){var ot=g.pendingProps;switch(wg(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(g),null;case 1:return Zf(g.type)&&$f(),S$3(g),null;case 3:return ot=g.stateNode,zh(),E$2(Wf),E$2(H$3),Eh(),ot.pendingContext&&(ot.context=ot.pendingContext,ot.pendingContext=null),(it===null||it.child===null)&&(Gg(g)?g.flags|=4:it===null||it.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(it,g),S$3(g),null;case 5:Bh(g);var ut=xh(wh.current);if(et=g.type,it!==null&&g.stateNode!=null)Bj(it,g,et,ot,ut),it.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!ot){if(g.stateNode===null)throw Error(p$3(166));return S$3(g),null}if(it=xh(uh.current),Gg(g)){ot=g.stateNode,et=g.type;var ct=g.memoizedProps;switch(ot[Of]=g,ot[Pf]=ct,it=(g.mode&1)!==0,et){case"dialog":D$1("cancel",ot),D$1("close",ot);break;case"iframe":case"object":case"embed":D$1("load",ot);break;case"video":case"audio":for(ut=0;ut<lf.length;ut++)D$1(lf[ut],ot);break;case"source":D$1("error",ot);break;case"img":case"image":case"link":D$1("error",ot),D$1("load",ot);break;case"details":D$1("toggle",ot);break;case"input":Za(ot,ct),D$1("invalid",ot);break;case"select":ot._wrapperState={wasMultiple:!!ct.multiple},D$1("invalid",ot);break;case"textarea":hb(ot,ct),D$1("invalid",ot)}ub(et,ct),ut=null;for(var dt in ct)if(ct.hasOwnProperty(dt)){var ft=ct[dt];dt==="children"?typeof ft=="string"?ot.textContent!==ft&&(ct.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ut=["children",ft]):typeof ft=="number"&&ot.textContent!==""+ft&&(ct.suppressHydrationWarning!==!0&&Af(ot.textContent,ft,it),ut=["children",""+ft]):ea.hasOwnProperty(dt)&&ft!=null&&dt==="onScroll"&&D$1("scroll",ot)}switch(et){case"input":Va(ot),db(ot,ct,!0);break;case"textarea":Va(ot),jb(ot);break;case"select":case"option":break;default:typeof ct.onClick=="function"&&(ot.onclick=Bf)}ot=ut,g.updateQueue=ot,ot!==null&&(g.flags|=4)}else{dt=ut.nodeType===9?ut:ut.ownerDocument,it==="http://www.w3.org/1999/xhtml"&&(it=kb(et)),it==="http://www.w3.org/1999/xhtml"?et==="script"?(it=dt.createElement("div"),it.innerHTML="<script><\/script>",it=it.removeChild(it.firstChild)):typeof ot.is=="string"?it=dt.createElement(et,{is:ot.is}):(it=dt.createElement(et),et==="select"&&(dt=it,ot.multiple?dt.multiple=!0:ot.size&&(dt.size=ot.size))):it=dt.createElementNS(it,et),it[Of]=g,it[Pf]=ot,zj(it,g,!1,!1),g.stateNode=it;e:{switch(dt=vb(et,ot),et){case"dialog":D$1("cancel",it),D$1("close",it),ut=ot;break;case"iframe":case"object":case"embed":D$1("load",it),ut=ot;break;case"video":case"audio":for(ut=0;ut<lf.length;ut++)D$1(lf[ut],it);ut=ot;break;case"source":D$1("error",it),ut=ot;break;case"img":case"image":case"link":D$1("error",it),D$1("load",it),ut=ot;break;case"details":D$1("toggle",it),ut=ot;break;case"input":Za(it,ot),ut=Ya(it,ot),D$1("invalid",it);break;case"option":ut=ot;break;case"select":it._wrapperState={wasMultiple:!!ot.multiple},ut=A$2({},ot,{value:void 0}),D$1("invalid",it);break;case"textarea":hb(it,ot),ut=gb(it,ot),D$1("invalid",it);break;default:ut=ot}ub(et,ut),ft=ut;for(ct in ft)if(ft.hasOwnProperty(ct)){var St=ft[ct];ct==="style"?sb(it,St):ct==="dangerouslySetInnerHTML"?(St=St?St.__html:void 0,St!=null&&nb(it,St)):ct==="children"?typeof St=="string"?(et!=="textarea"||St!=="")&&ob(it,St):typeof St=="number"&&ob(it,""+St):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(ea.hasOwnProperty(ct)?St!=null&&ct==="onScroll"&&D$1("scroll",it):St!=null&&ta$1(it,ct,St,dt))}switch(et){case"input":Va(it),db(it,ot,!1);break;case"textarea":Va(it),jb(it);break;case"option":ot.value!=null&&it.setAttribute("value",""+Sa(ot.value));break;case"select":it.multiple=!!ot.multiple,ct=ot.value,ct!=null?fb(it,!!ot.multiple,ct,!1):ot.defaultValue!=null&&fb(it,!!ot.multiple,ot.defaultValue,!0);break;default:typeof ut.onClick=="function"&&(it.onclick=Bf)}switch(et){case"button":case"input":case"select":case"textarea":ot=!!ot.autoFocus;break e;case"img":ot=!0;break e;default:ot=!1}}ot&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return S$3(g),null;case 6:if(it&&g.stateNode!=null)Cj(it,g,it.memoizedProps,ot);else{if(typeof ot!="string"&&g.stateNode===null)throw Error(p$3(166));if(et=xh(wh.current),xh(uh.current),Gg(g)){if(ot=g.stateNode,et=g.memoizedProps,ot[Of]=g,(ct=ot.nodeValue!==et)&&(it=xg,it!==null))switch(it.tag){case 3:Af(ot.nodeValue,et,(it.mode&1)!==0);break;case 5:it.memoizedProps.suppressHydrationWarning!==!0&&Af(ot.nodeValue,et,(it.mode&1)!==0)}ct&&(g.flags|=4)}else ot=(et.nodeType===9?et:et.ownerDocument).createTextNode(ot),ot[Of]=g,g.stateNode=ot}return S$3(g),null;case 13:if(E$2(L$3),ot=g.memoizedState,it===null||it.memoizedState!==null&&it.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&g.mode&1&&!(g.flags&128))Hg(),Ig(),g.flags|=98560,ct=!1;else if(ct=Gg(g),ot!==null&&ot.dehydrated!==null){if(it===null){if(!ct)throw Error(p$3(318));if(ct=g.memoizedState,ct=ct!==null?ct.dehydrated:null,!ct)throw Error(p$3(317));ct[Of]=g}else Ig(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;S$3(g),ct=!1}else zg!==null&&(Fj(zg),zg=null),ct=!0;if(!ct)return g.flags&65536?g:null}return g.flags&128?(g.lanes=et,g):(ot=ot!==null,ot!==(it!==null&&it.memoizedState!==null)&&ot&&(g.child.flags|=8192,g.mode&1&&(it===null||L$3.current&1?T$3===0&&(T$3=3):tj())),g.updateQueue!==null&&(g.flags|=4),S$3(g),null);case 4:return zh(),Aj(it,g),it===null&&sf(g.stateNode.containerInfo),S$3(g),null;case 10:return ah(g.type._context),S$3(g),null;case 17:return Zf(g.type)&&$f(),S$3(g),null;case 19:if(E$2(L$3),ct=g.memoizedState,ct===null)return S$3(g),null;if(ot=(g.flags&128)!==0,dt=ct.rendering,dt===null)if(ot)Dj(ct,!1);else{if(T$3!==0||it!==null&&it.flags&128)for(it=g.child;it!==null;){if(dt=Ch(it),dt!==null){for(g.flags|=128,Dj(ct,!1),ot=dt.updateQueue,ot!==null&&(g.updateQueue=ot,g.flags|=4),g.subtreeFlags=0,ot=et,et=g.child;et!==null;)ct=et,it=ot,ct.flags&=14680066,dt=ct.alternate,dt===null?(ct.childLanes=0,ct.lanes=it,ct.child=null,ct.subtreeFlags=0,ct.memoizedProps=null,ct.memoizedState=null,ct.updateQueue=null,ct.dependencies=null,ct.stateNode=null):(ct.childLanes=dt.childLanes,ct.lanes=dt.lanes,ct.child=dt.child,ct.subtreeFlags=0,ct.deletions=null,ct.memoizedProps=dt.memoizedProps,ct.memoizedState=dt.memoizedState,ct.updateQueue=dt.updateQueue,ct.type=dt.type,it=dt.dependencies,ct.dependencies=it===null?null:{lanes:it.lanes,firstContext:it.firstContext}),et=et.sibling;return G$1(L$3,L$3.current&1|2),g.child}it=it.sibling}ct.tail!==null&&B$1()>Gj&&(g.flags|=128,ot=!0,Dj(ct,!1),g.lanes=4194304)}else{if(!ot)if(it=Ch(dt),it!==null){if(g.flags|=128,ot=!0,et=it.updateQueue,et!==null&&(g.updateQueue=et,g.flags|=4),Dj(ct,!0),ct.tail===null&&ct.tailMode==="hidden"&&!dt.alternate&&!I$4)return S$3(g),null}else 2*B$1()-ct.renderingStartTime>Gj&&et!==1073741824&&(g.flags|=128,ot=!0,Dj(ct,!1),g.lanes=4194304);ct.isBackwards?(dt.sibling=g.child,g.child=dt):(et=ct.last,et!==null?et.sibling=dt:g.child=dt,ct.last=dt)}return ct.tail!==null?(g=ct.tail,ct.rendering=g,ct.tail=g.sibling,ct.renderingStartTime=B$1(),g.sibling=null,et=L$3.current,G$1(L$3,ot?et&1|2:et&1),g):(S$3(g),null);case 22:case 23:return Hj(),ot=g.memoizedState!==null,it!==null&&it.memoizedState!==null!==ot&&(g.flags|=8192),ot&&g.mode&1?fj&1073741824&&(S$3(g),g.subtreeFlags&6&&(g.flags|=8192)):S$3(g),null;case 24:return null;case 25:return null}throw Error(p$3(156,g.tag))}function Ij(it,g){switch(wg(g),g.tag){case 1:return Zf(g.type)&&$f(),it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 3:return zh(),E$2(Wf),E$2(H$3),Eh(),it=g.flags,it&65536&&!(it&128)?(g.flags=it&-65537|128,g):null;case 5:return Bh(g),null;case 13:if(E$2(L$3),it=g.memoizedState,it!==null&&it.dehydrated!==null){if(g.alternate===null)throw Error(p$3(340));Ig()}return it=g.flags,it&65536?(g.flags=it&-65537|128,g):null;case 19:return E$2(L$3),null;case 4:return zh(),null;case 10:return ah(g.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$4=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(it,g){var et=it.ref;if(et!==null)if(typeof et=="function")try{et(null)}catch(ot){W$2(it,g,ot)}else et.current=null}function Mj(it,g,et){try{et()}catch(ot){W$2(it,g,ot)}}var Nj=!1;function Oj(it,g){if(Cf=dd,it=Me$1(),Ne$1(it)){if("selectionStart"in it)var et={start:it.selectionStart,end:it.selectionEnd};else e:{et=(et=it.ownerDocument)&&et.defaultView||window;var ot=et.getSelection&&et.getSelection();if(ot&&ot.rangeCount!==0){et=ot.anchorNode;var ut=ot.anchorOffset,ct=ot.focusNode;ot=ot.focusOffset;try{et.nodeType,ct.nodeType}catch{et=null;break e}var dt=0,ft=-1,St=-1,kt=0,Tt=0,Rt=it,Ft=null;t:for(;;){for(var jt;Rt!==et||ut!==0&&Rt.nodeType!==3||(ft=dt+ut),Rt!==ct||ot!==0&&Rt.nodeType!==3||(St=dt+ot),Rt.nodeType===3&&(dt+=Rt.nodeValue.length),(jt=Rt.firstChild)!==null;)Ft=Rt,Rt=jt;for(;;){if(Rt===it)break t;if(Ft===et&&++kt===ut&&(ft=dt),Ft===ct&&++Tt===ot&&(St=dt),(jt=Rt.nextSibling)!==null)break;Rt=Ft,Ft=Rt.parentNode}Rt=jt}et=ft===-1||St===-1?null:{start:ft,end:St}}else et=null}et=et||{start:0,end:0}}else et=null;for(Df={focusedElem:it,selectionRange:et},dd=!1,V$2=g;V$2!==null;)if(g=V$2,it=g.child,(g.subtreeFlags&1028)!==0&&it!==null)it.return=g,V$2=it;else for(;V$2!==null;){g=V$2;try{var Bt=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var zt=Bt.memoizedProps,Ht=Bt.memoizedState,Ut=g.stateNode,Kt=Ut.getSnapshotBeforeUpdate(g.elementType===g.type?zt:Ci(g.type,zt),Ht);Ut.__reactInternalSnapshotBeforeUpdate=Kt}break;case 3:var Yt=g.stateNode.containerInfo;Yt.nodeType===1?Yt.textContent="":Yt.nodeType===9&&Yt.documentElement&&Yt.removeChild(Yt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(er){W$2(g,g.return,er)}if(it=g.sibling,it!==null){it.return=g.return,V$2=it;break}V$2=g.return}return Bt=Nj,Nj=!1,Bt}function Pj(it,g,et){var ot=g.updateQueue;if(ot=ot!==null?ot.lastEffect:null,ot!==null){var ut=ot=ot.next;do{if((ut.tag&it)===it){var ct=ut.destroy;ut.destroy=void 0,ct!==void 0&&Mj(g,et,ct)}ut=ut.next}while(ut!==ot)}}function Qj(it,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var et=g=g.next;do{if((et.tag&it)===it){var ot=et.create;et.destroy=ot()}et=et.next}while(et!==g)}}function Rj(it){var g=it.ref;if(g!==null){var et=it.stateNode;switch(it.tag){case 5:it=et;break;default:it=et}typeof g=="function"?g(it):g.current=it}}function Sj(it){var g=it.alternate;g!==null&&(it.alternate=null,Sj(g)),it.child=null,it.deletions=null,it.sibling=null,it.tag===5&&(g=it.stateNode,g!==null&&(delete g[Of],delete g[Pf],delete g[of],delete g[Qf],delete g[Rf])),it.stateNode=null,it.return=null,it.dependencies=null,it.memoizedProps=null,it.memoizedState=null,it.pendingProps=null,it.stateNode=null,it.updateQueue=null}function Tj(it){return it.tag===5||it.tag===3||it.tag===4}function Uj(it){e:for(;;){for(;it.sibling===null;){if(it.return===null||Tj(it.return))return null;it=it.return}for(it.sibling.return=it.return,it=it.sibling;it.tag!==5&&it.tag!==6&&it.tag!==18;){if(it.flags&2||it.child===null||it.tag===4)continue e;it.child.return=it,it=it.child}if(!(it.flags&2))return it.stateNode}}function Vj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.nodeType===8?et.parentNode.insertBefore(it,g):et.insertBefore(it,g):(et.nodeType===8?(g=et.parentNode,g.insertBefore(it,et)):(g=et,g.appendChild(it)),et=et._reactRootContainer,et!=null||g.onclick!==null||(g.onclick=Bf));else if(ot!==4&&(it=it.child,it!==null))for(Vj(it,g,et),it=it.sibling;it!==null;)Vj(it,g,et),it=it.sibling}function Wj(it,g,et){var ot=it.tag;if(ot===5||ot===6)it=it.stateNode,g?et.insertBefore(it,g):et.appendChild(it);else if(ot!==4&&(it=it.child,it!==null))for(Wj(it,g,et),it=it.sibling;it!==null;)Wj(it,g,et),it=it.sibling}var X$4=null,Xj=!1;function Yj(it,g,et){for(et=et.child;et!==null;)Zj(it,g,et),et=et.sibling}function Zj(it,g,et){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,et)}catch{}switch(et.tag){case 5:U$4||Lj(et,g);case 6:var ot=X$4,ut=Xj;X$4=null,Yj(it,g,et),X$4=ot,Xj=ut,X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?it.parentNode.removeChild(et):it.removeChild(et)):X$4.removeChild(et.stateNode));break;case 18:X$4!==null&&(Xj?(it=X$4,et=et.stateNode,it.nodeType===8?Kf(it.parentNode,et):it.nodeType===1&&Kf(it,et),bd(it)):Kf(X$4,et.stateNode));break;case 4:ot=X$4,ut=Xj,X$4=et.stateNode.containerInfo,Xj=!0,Yj(it,g,et),X$4=ot,Xj=ut;break;case 0:case 11:case 14:case 15:if(!U$4&&(ot=et.updateQueue,ot!==null&&(ot=ot.lastEffect,ot!==null))){ut=ot=ot.next;do{var ct=ut,dt=ct.destroy;ct=ct.tag,dt!==void 0&&(ct&2||ct&4)&&Mj(et,g,dt),ut=ut.next}while(ut!==ot)}Yj(it,g,et);break;case 1:if(!U$4&&(Lj(et,g),ot=et.stateNode,typeof ot.componentWillUnmount=="function"))try{ot.props=et.memoizedProps,ot.state=et.memoizedState,ot.componentWillUnmount()}catch(ft){W$2(et,g,ft)}Yj(it,g,et);break;case 21:Yj(it,g,et);break;case 22:et.mode&1?(U$4=(ot=U$4)||et.memoizedState!==null,Yj(it,g,et),U$4=ot):Yj(it,g,et);break;default:Yj(it,g,et)}}function ak(it){var g=it.updateQueue;if(g!==null){it.updateQueue=null;var et=it.stateNode;et===null&&(et=it.stateNode=new Kj),g.forEach(function(ot){var ut=bk.bind(null,it,ot);et.has(ot)||(et.add(ot),ot.then(ut,ut))})}}function ck(it,g){var et=g.deletions;if(et!==null)for(var ot=0;ot<et.length;ot++){var ut=et[ot];try{var ct=it,dt=g,ft=dt;e:for(;ft!==null;){switch(ft.tag){case 5:X$4=ft.stateNode,Xj=!1;break e;case 3:X$4=ft.stateNode.containerInfo,Xj=!0;break e;case 4:X$4=ft.stateNode.containerInfo,Xj=!0;break e}ft=ft.return}if(X$4===null)throw Error(p$3(160));Zj(ct,dt,ut),X$4=null,Xj=!1;var St=ut.alternate;St!==null&&(St.return=null),ut.return=null}catch(kt){W$2(ut,g,kt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)dk(g,it),g=g.sibling}function dk(it,g){var et=it.alternate,ot=it.flags;switch(it.tag){case 0:case 11:case 14:case 15:if(ck(g,it),ek(it),ot&4){try{Pj(3,it,it.return),Qj(3,it)}catch(zt){W$2(it,it.return,zt)}try{Pj(5,it,it.return)}catch(zt){W$2(it,it.return,zt)}}break;case 1:ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return);break;case 5:if(ck(g,it),ek(it),ot&512&&et!==null&&Lj(et,et.return),it.flags&32){var ut=it.stateNode;try{ob(ut,"")}catch(zt){W$2(it,it.return,zt)}}if(ot&4&&(ut=it.stateNode,ut!=null)){var ct=it.memoizedProps,dt=et!==null?et.memoizedProps:ct,ft=it.type,St=it.updateQueue;if(it.updateQueue=null,St!==null)try{ft==="input"&&ct.type==="radio"&&ct.name!=null&&ab(ut,ct),vb(ft,dt);var kt=vb(ft,ct);for(dt=0;dt<St.length;dt+=2){var Tt=St[dt],Rt=St[dt+1];Tt==="style"?sb(ut,Rt):Tt==="dangerouslySetInnerHTML"?nb(ut,Rt):Tt==="children"?ob(ut,Rt):ta$1(ut,Tt,Rt,kt)}switch(ft){case"input":bb(ut,ct);break;case"textarea":ib(ut,ct);break;case"select":var Ft=ut._wrapperState.wasMultiple;ut._wrapperState.wasMultiple=!!ct.multiple;var jt=ct.value;jt!=null?fb(ut,!!ct.multiple,jt,!1):Ft!==!!ct.multiple&&(ct.defaultValue!=null?fb(ut,!!ct.multiple,ct.defaultValue,!0):fb(ut,!!ct.multiple,ct.multiple?[]:"",!1))}ut[Pf]=ct}catch(zt){W$2(it,it.return,zt)}}break;case 6:if(ck(g,it),ek(it),ot&4){if(it.stateNode===null)throw Error(p$3(162));ut=it.stateNode,ct=it.memoizedProps;try{ut.nodeValue=ct}catch(zt){W$2(it,it.return,zt)}}break;case 3:if(ck(g,it),ek(it),ot&4&&et!==null&&et.memoizedState.isDehydrated)try{bd(g.containerInfo)}catch(zt){W$2(it,it.return,zt)}break;case 4:ck(g,it),ek(it);break;case 13:ck(g,it),ek(it),ut=it.child,ut.flags&8192&&(ct=ut.memoizedState!==null,ut.stateNode.isHidden=ct,!ct||ut.alternate!==null&&ut.alternate.memoizedState!==null||(fk=B$1())),ot&4&&ak(it);break;case 22:if(Tt=et!==null&&et.memoizedState!==null,it.mode&1?(U$4=(kt=U$4)||Tt,ck(g,it),U$4=kt):ck(g,it),ek(it),ot&8192){if(kt=it.memoizedState!==null,(it.stateNode.isHidden=kt)&&!Tt&&it.mode&1)for(V$2=it,Tt=it.child;Tt!==null;){for(Rt=V$2=Tt;V$2!==null;){switch(Ft=V$2,jt=Ft.child,Ft.tag){case 0:case 11:case 14:case 15:Pj(4,Ft,Ft.return);break;case 1:Lj(Ft,Ft.return);var Bt=Ft.stateNode;if(typeof Bt.componentWillUnmount=="function"){ot=Ft,et=Ft.return;try{g=ot,Bt.props=g.memoizedProps,Bt.state=g.memoizedState,Bt.componentWillUnmount()}catch(zt){W$2(ot,et,zt)}}break;case 5:Lj(Ft,Ft.return);break;case 22:if(Ft.memoizedState!==null){gk(Rt);continue}}jt!==null?(jt.return=Ft,V$2=jt):gk(Rt)}Tt=Tt.sibling}e:for(Tt=null,Rt=it;;){if(Rt.tag===5){if(Tt===null){Tt=Rt;try{ut=Rt.stateNode,kt?(ct=ut.style,typeof ct.setProperty=="function"?ct.setProperty("display","none","important"):ct.display="none"):(ft=Rt.stateNode,St=Rt.memoizedProps.style,dt=St!=null&&St.hasOwnProperty("display")?St.display:null,ft.style.display=rb("display",dt))}catch(zt){W$2(it,it.return,zt)}}}else if(Rt.tag===6){if(Tt===null)try{Rt.stateNode.nodeValue=kt?"":Rt.memoizedProps}catch(zt){W$2(it,it.return,zt)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===it)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===it)break e;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===it)break e;Tt===Rt&&(Tt=null),Rt=Rt.return}Tt===Rt&&(Tt=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}break;case 19:ck(g,it),ek(it),ot&4&&ak(it);break;case 21:break;default:ck(g,it),ek(it)}}function ek(it){var g=it.flags;if(g&2){try{e:{for(var et=it.return;et!==null;){if(Tj(et)){var ot=et;break e}et=et.return}throw Error(p$3(160))}switch(ot.tag){case 5:var ut=ot.stateNode;ot.flags&32&&(ob(ut,""),ot.flags&=-33);var ct=Uj(it);Wj(it,ct,ut);break;case 3:case 4:var dt=ot.stateNode.containerInfo,ft=Uj(it);Vj(it,ft,dt);break;default:throw Error(p$3(161))}}catch(St){W$2(it,it.return,St)}it.flags&=-3}g&4096&&(it.flags&=-4097)}function hk(it,g,et){V$2=it,ik(it)}function ik(it,g,et){for(var ot=(it.mode&1)!==0;V$2!==null;){var ut=V$2,ct=ut.child;if(ut.tag===22&&ot){var dt=ut.memoizedState!==null||Jj;if(!dt){var ft=ut.alternate,St=ft!==null&&ft.memoizedState!==null||U$4;ft=Jj;var kt=U$4;if(Jj=dt,(U$4=St)&&!kt)for(V$2=ut;V$2!==null;)dt=V$2,St=dt.child,dt.tag===22&&dt.memoizedState!==null?jk(ut):St!==null?(St.return=dt,V$2=St):jk(ut);for(;ct!==null;)V$2=ct,ik(ct),ct=ct.sibling;V$2=ut,Jj=ft,U$4=kt}kk(it)}else ut.subtreeFlags&8772&&ct!==null?(ct.return=ut,V$2=ct):kk(it)}}function kk(it){for(;V$2!==null;){var g=V$2;if(g.flags&8772){var et=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:U$4||Qj(5,g);break;case 1:var ot=g.stateNode;if(g.flags&4&&!U$4)if(et===null)ot.componentDidMount();else{var ut=g.elementType===g.type?et.memoizedProps:Ci(g.type,et.memoizedProps);ot.componentDidUpdate(ut,et.memoizedState,ot.__reactInternalSnapshotBeforeUpdate)}var ct=g.updateQueue;ct!==null&&sh(g,ct,ot);break;case 3:var dt=g.updateQueue;if(dt!==null){if(et=null,g.child!==null)switch(g.child.tag){case 5:et=g.child.stateNode;break;case 1:et=g.child.stateNode}sh(g,dt,et)}break;case 5:var ft=g.stateNode;if(et===null&&g.flags&4){et=ft;var St=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":St.autoFocus&&et.focus();break;case"img":St.src&&(et.src=St.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var kt=g.alternate;if(kt!==null){var Tt=kt.memoizedState;if(Tt!==null){var Rt=Tt.dehydrated;Rt!==null&&bd(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$4||g.flags&512&&Rj(g)}catch(Ft){W$2(g,g.return,Ft)}}if(g===it){V$2=null;break}if(et=g.sibling,et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function gk(it){for(;V$2!==null;){var g=V$2;if(g===it){V$2=null;break}var et=g.sibling;if(et!==null){et.return=g.return,V$2=et;break}V$2=g.return}}function jk(it){for(;V$2!==null;){var g=V$2;try{switch(g.tag){case 0:case 11:case 15:var et=g.return;try{Qj(4,g)}catch(St){W$2(g,et,St)}break;case 1:var ot=g.stateNode;if(typeof ot.componentDidMount=="function"){var ut=g.return;try{ot.componentDidMount()}catch(St){W$2(g,ut,St)}}var ct=g.return;try{Rj(g)}catch(St){W$2(g,ct,St)}break;case 5:var dt=g.return;try{Rj(g)}catch(St){W$2(g,dt,St)}}}catch(St){W$2(g,g.return,St)}if(g===it){V$2=null;break}var ft=g.sibling;if(ft!==null){ft.return=g.return,V$2=ft;break}V$2=g.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$2=0,Q$1=null,Y=null,Z$2=0,fj=0,ej=Uf(0),T$3=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk$1=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$3(){return K$2&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(it){return it.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(it=C$4,it!==0||(it=window.event,it=it===void 0?16:jd(it.type)),it):1}function gi(it,g,et,ot){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac(it,et,ot),(!(K$2&2)||it!==Q$1)&&(it===Q$1&&(!(K$2&2)&&(qk|=et),T$3===4&&Ck(it,Z$2)),Dk(it,ot),et===1&&K$2===0&&!(g.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(it,g){var et=it.callbackNode;wc(it,g);var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)et!==null&&bc(et),it.callbackNode=null,it.callbackPriority=0;else if(g=ot&-ot,it.callbackPriority!==g){if(et!=null&&bc(et),g===1)it.tag===0?ig(Ek.bind(null,it)):hg(Ek.bind(null,it)),Jf(function(){!(K$2&6)&&jg()}),et=null;else{switch(Dc(ot)){case 1:et=fc;break;case 4:et=gc;break;case 16:et=hc;break;case 536870912:et=jc;break;default:et=hc}et=Fk(et,Gk.bind(null,it))}it.callbackPriority=g,it.callbackNode=et}}function Gk(it,g){if(Ak=-1,Bk=0,K$2&6)throw Error(p$3(327));var et=it.callbackNode;if(Hk()&&it.callbackNode!==et)return null;var ot=uc(it,it===Q$1?Z$2:0);if(ot===0)return null;if(ot&30||ot&it.expiredLanes||g)g=Ik(it,ot);else{g=ot;var ut=K$2;K$2|=2;var ct=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Gj=B$1()+500,Kk(it,g));do try{Lk();break}catch(ft){Mk(it,ft)}while(1);$g(),mk.current=ct,K$2=ut,Y!==null?g=0:(Q$1=null,Z$2=0,g=T$3)}if(g!==0){if(g===2&&(ut=xc(it),ut!==0&&(ot=ut,g=Nk(it,ut))),g===1)throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;if(g===6)Ck(it,ot);else{if(ut=it.current.alternate,!(ot&30)&&!Ok(ut)&&(g=Ik(it,ot),g===2&&(ct=xc(it),ct!==0&&(ot=ct,g=Nk(it,ct))),g===1))throw et=pk,Kk(it,0),Ck(it,ot),Dk(it,B$1()),et;switch(it.finishedWork=ut,it.finishedLanes=ot,g){case 0:case 1:throw Error(p$3(345));case 2:Pk(it,tk$1,uk);break;case 3:if(Ck(it,ot),(ot&130023424)===ot&&(g=fk+500-B$1(),10<g)){if(uc(it,0)!==0)break;if(ut=it.suspendedLanes,(ut&ot)!==ot){R$3(),it.pingedLanes|=it.suspendedLanes&ut;break}it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),g);break}Pk(it,tk$1,uk);break;case 4:if(Ck(it,ot),(ot&4194240)===ot)break;for(g=it.eventTimes,ut=-1;0<ot;){var dt=31-oc(ot);ct=1<<dt,dt=g[dt],dt>ut&&(ut=dt),ot&=~ct}if(ot=ut,ot=B$1()-ot,ot=(120>ot?120:480>ot?480:1080>ot?1080:1920>ot?1920:3e3>ot?3e3:4320>ot?4320:1960*lk(ot/1960))-ot,10<ot){it.timeoutHandle=Ff(Pk.bind(null,it,tk$1,uk),ot);break}Pk(it,tk$1,uk);break;case 5:Pk(it,tk$1,uk);break;default:throw Error(p$3(329))}}}return Dk(it,B$1()),it.callbackNode===et?Gk.bind(null,it):null}function Nk(it,g){var et=sk;return it.current.memoizedState.isDehydrated&&(Kk(it,g).flags|=256),it=Ik(it,g),it!==2&&(g=tk$1,tk$1=et,g!==null&&Fj(g)),it}function Fj(it){tk$1===null?tk$1=it:tk$1.push.apply(tk$1,it)}function Ok(it){for(var g=it;;){if(g.flags&16384){var et=g.updateQueue;if(et!==null&&(et=et.stores,et!==null))for(var ot=0;ot<et.length;ot++){var ut=et[ot],ct=ut.getSnapshot;ut=ut.value;try{if(!He$2(ct(),ut))return!1}catch{return!1}}}if(et=g.child,g.subtreeFlags&16384&&et!==null)et.return=g,g=et;else{if(g===it)break;for(;g.sibling===null;){if(g.return===null||g.return===it)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ck(it,g){for(g&=~rk,g&=~qk,it.suspendedLanes|=g,it.pingedLanes&=~g,it=it.expirationTimes;0<g;){var et=31-oc(g),ot=1<<et;it[et]=-1,g&=~ot}}function Ek(it){if(K$2&6)throw Error(p$3(327));Hk();var g=uc(it,0);if(!(g&1))return Dk(it,B$1()),null;var et=Ik(it,g);if(it.tag!==0&&et===2){var ot=xc(it);ot!==0&&(g=ot,et=Nk(it,ot))}if(et===1)throw et=pk,Kk(it,0),Ck(it,g),Dk(it,B$1()),et;if(et===6)throw Error(p$3(345));return it.finishedWork=it.current.alternate,it.finishedLanes=g,Pk(it,tk$1,uk),Dk(it,B$1()),null}function Qk(it,g){var et=K$2;K$2|=1;try{return it(g)}finally{K$2=et,K$2===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(it){wk!==null&&wk.tag===0&&!(K$2&6)&&Hk();var g=K$2;K$2|=1;var et=ok.transition,ot=C$4;try{if(ok.transition=null,C$4=1,it)return it()}finally{C$4=ot,ok.transition=et,K$2=g,!(K$2&6)&&jg()}}function Hj(){fj=ej.current,E$2(ej)}function Kk(it,g){it.finishedWork=null,it.finishedLanes=0;var et=it.timeoutHandle;if(et!==-1&&(it.timeoutHandle=-1,Gf(et)),Y!==null)for(et=Y.return;et!==null;){var ot=et;switch(wg(ot),ot.tag){case 1:ot=ot.type.childContextTypes,ot!=null&&$f();break;case 3:zh(),E$2(Wf),E$2(H$3),Eh();break;case 5:Bh(ot);break;case 4:zh();break;case 13:E$2(L$3);break;case 19:E$2(L$3);break;case 10:ah(ot.type._context);break;case 22:case 23:Hj()}et=et.return}if(Q$1=it,Y=it=Pg(it.current,null),Z$2=fj=g,T$3=0,pk=null,rk=qk=rh=0,tk$1=sk=null,fh!==null){for(g=0;g<fh.length;g++)if(et=fh[g],ot=et.interleaved,ot!==null){et.interleaved=null;var ut=ot.next,ct=et.pending;if(ct!==null){var dt=ct.next;ct.next=ut,ot.next=dt}et.pending=ot}fh=null}return it}function Mk(it,g){do{var et=Y;try{if($g(),Fh.current=Rh,Ih){for(var ot=M$3.memoizedState;ot!==null;){var ut=ot.queue;ut!==null&&(ut.pending=null),ot=ot.next}Ih=!1}if(Hh=0,O$4=N$2=M$3=null,Jh=!1,Kh=0,nk.current=null,et===null||et.return===null){T$3=1,pk=g,Y=null;break}e:{var ct=it,dt=et.return,ft=et,St=g;if(g=Z$2,ft.flags|=32768,St!==null&&typeof St=="object"&&typeof St.then=="function"){var kt=St,Tt=ft,Rt=Tt.tag;if(!(Tt.mode&1)&&(Rt===0||Rt===11||Rt===15)){var Ft=Tt.alternate;Ft?(Tt.updateQueue=Ft.updateQueue,Tt.memoizedState=Ft.memoizedState,Tt.lanes=Ft.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var jt=Ui(dt);if(jt!==null){jt.flags&=-257,Vi(jt,dt,ft,ct,g),jt.mode&1&&Si(ct,kt,g),g=jt,St=kt;var Bt=g.updateQueue;if(Bt===null){var zt=new Set;zt.add(St),g.updateQueue=zt}else Bt.add(St);break e}else{if(!(g&1)){Si(ct,kt,g),tj();break e}St=Error(p$3(426))}}else if(I$4&&ft.mode&1){var Ht=Ui(dt);if(Ht!==null){!(Ht.flags&65536)&&(Ht.flags|=256),Vi(Ht,dt,ft,ct,g),Jg(Ji(St,ft));break e}}ct=St=Ji(St,ft),T$3!==4&&(T$3=2),sk===null?sk=[ct]:sk.push(ct),ct=dt;do{switch(ct.tag){case 3:ct.flags|=65536,g&=-g,ct.lanes|=g;var Ut=Ni(ct,St,g);ph(ct,Ut);break e;case 1:ft=St;var Kt=ct.type,Yt=ct.stateNode;if(!(ct.flags&128)&&(typeof Kt.getDerivedStateFromError=="function"||Yt!==null&&typeof Yt.componentDidCatch=="function"&&(Ri===null||!Ri.has(Yt)))){ct.flags|=65536,g&=-g,ct.lanes|=g;var er=Qi(ct,ft,g);ph(ct,er);break e}}ct=ct.return}while(ct!==null)}Sk(et)}catch(ar){g=ar,Y===et&&et!==null&&(Y=et=et.return);continue}break}while(1)}function Jk(){var it=mk.current;return mk.current=Rh,it===null?Rh:it}function tj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$2)}function Ik(it,g){var et=K$2;K$2|=2;var ot=Jk();(Q$1!==it||Z$2!==g)&&(uk=null,Kk(it,g));do try{Tk();break}catch(ut){Mk(it,ut)}while(1);if($g(),K$2=et,mk.current=ot,Y!==null)throw Error(p$3(261));return Q$1=null,Z$2=0,T$3}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(it){var g=Vk(it.alternate,it,fj);it.memoizedProps=it.pendingProps,g===null?Sk(it):Y=g,nk.current=null}function Sk(it){var g=it;do{var et=g.alternate;if(it=g.return,g.flags&32768){if(et=Ij(et,g),et!==null){et.flags&=32767,Y=et;return}if(it!==null)it.flags|=32768,it.subtreeFlags=0,it.deletions=null;else{T$3=6,Y=null;return}}else if(et=Ej(et,g,fj),et!==null){Y=et;return}if(g=g.sibling,g!==null){Y=g;return}Y=g=it}while(g!==null);T$3===0&&(T$3=5)}function Pk(it,g,et){var ot=C$4,ut=ok.transition;try{ok.transition=null,C$4=1,Wk(it,g,et,ot)}finally{ok.transition=ut,C$4=ot}return null}function Wk(it,g,et,ot){do Hk();while(wk!==null);if(K$2&6)throw Error(p$3(327));et=it.finishedWork;var ut=it.finishedLanes;if(et===null)return null;if(it.finishedWork=null,it.finishedLanes=0,et===it.current)throw Error(p$3(177));it.callbackNode=null,it.callbackPriority=0;var ct=et.lanes|et.childLanes;if(Bc(it,ct),it===Q$1&&(Y=Q$1=null,Z$2=0),!(et.subtreeFlags&2064)&&!(et.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),ct=(et.flags&15990)!==0,et.subtreeFlags&15990||ct){ct=ok.transition,ok.transition=null;var dt=C$4;C$4=1;var ft=K$2;K$2|=4,nk.current=null,Oj(it,et),dk(et,it),Oe$1(Df),dd=!!Cf,Df=Cf=null,it.current=et,hk(et),dc(),K$2=ft,C$4=dt,ok.transition=ct}else it.current=et;if(vk&&(vk=!1,wk=it,xk=ut),ct=it.pendingLanes,ct===0&&(Ri=null),mc(et.stateNode),Dk(it,B$1()),g!==null)for(ot=it.onRecoverableError,et=0;et<g.length;et++)ut=g[et],ot(ut.value,{componentStack:ut.stack,digest:ut.digest});if(Oi)throw Oi=!1,it=Pi,Pi=null,it;return xk&1&&it.tag!==0&&Hk(),ct=it.pendingLanes,ct&1?it===zk?yk++:(yk=0,zk=it):yk=0,jg(),null}function Hk(){if(wk!==null){var it=Dc(xk),g=ok.transition,et=C$4;try{if(ok.transition=null,C$4=16>it?16:it,wk===null)var ot=!1;else{if(it=wk,wk=null,xk=0,K$2&6)throw Error(p$3(331));var ut=K$2;for(K$2|=4,V$2=it.current;V$2!==null;){var ct=V$2,dt=ct.child;if(V$2.flags&16){var ft=ct.deletions;if(ft!==null){for(var St=0;St<ft.length;St++){var kt=ft[St];for(V$2=kt;V$2!==null;){var Tt=V$2;switch(Tt.tag){case 0:case 11:case 15:Pj(8,Tt,ct)}var Rt=Tt.child;if(Rt!==null)Rt.return=Tt,V$2=Rt;else for(;V$2!==null;){Tt=V$2;var Ft=Tt.sibling,jt=Tt.return;if(Sj(Tt),Tt===kt){V$2=null;break}if(Ft!==null){Ft.return=jt,V$2=Ft;break}V$2=jt}}}var Bt=ct.alternate;if(Bt!==null){var zt=Bt.child;if(zt!==null){Bt.child=null;do{var Ht=zt.sibling;zt.sibling=null,zt=Ht}while(zt!==null)}}V$2=ct}}if(ct.subtreeFlags&2064&&dt!==null)dt.return=ct,V$2=dt;else e:for(;V$2!==null;){if(ct=V$2,ct.flags&2048)switch(ct.tag){case 0:case 11:case 15:Pj(9,ct,ct.return)}var Ut=ct.sibling;if(Ut!==null){Ut.return=ct.return,V$2=Ut;break e}V$2=ct.return}}var Kt=it.current;for(V$2=Kt;V$2!==null;){dt=V$2;var Yt=dt.child;if(dt.subtreeFlags&2064&&Yt!==null)Yt.return=dt,V$2=Yt;else e:for(dt=Kt;V$2!==null;){if(ft=V$2,ft.flags&2048)try{switch(ft.tag){case 0:case 11:case 15:Qj(9,ft)}}catch(ar){W$2(ft,ft.return,ar)}if(ft===dt){V$2=null;break e}var er=ft.sibling;if(er!==null){er.return=ft.return,V$2=er;break e}V$2=ft.return}}if(K$2=ut,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,it)}catch{}ot=!0}return ot}finally{C$4=et,ok.transition=g}}return!1}function Xk(it,g,et){g=Ji(et,g),g=Ni(it,g,1),it=nh(it,g,1),g=R$3(),it!==null&&(Ac(it,1,g),Dk(it,g))}function W$2(it,g,et){if(it.tag===3)Xk(it,it,et);else for(;g!==null;){if(g.tag===3){Xk(g,it,et);break}else if(g.tag===1){var ot=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof ot.componentDidCatch=="function"&&(Ri===null||!Ri.has(ot))){it=Ji(et,it),it=Qi(g,it,1),g=nh(g,it,1),it=R$3(),g!==null&&(Ac(g,1,it),Dk(g,it));break}}g=g.return}}function Ti(it,g,et){var ot=it.pingCache;ot!==null&&ot.delete(g),g=R$3(),it.pingedLanes|=it.suspendedLanes&et,Q$1===it&&(Z$2&et)===et&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$1()-fk?Kk(it,0):rk|=et),Dk(it,g)}function Yk(it,g){g===0&&(it.mode&1?(g=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):g=1);var et=R$3();it=ih(it,g),it!==null&&(Ac(it,g,et),Dk(it,et))}function uj(it){var g=it.memoizedState,et=0;g!==null&&(et=g.retryLane),Yk(it,et)}function bk(it,g){var et=0;switch(it.tag){case 13:var ot=it.stateNode,ut=it.memoizedState;ut!==null&&(et=ut.retryLane);break;case 19:ot=it.stateNode;break;default:throw Error(p$3(314))}ot!==null&&ot.delete(g),Yk(it,et)}var Vk;Vk=function(it,g,et){if(it!==null)if(it.memoizedProps!==g.pendingProps||Wf.current)dh=!0;else{if(!(it.lanes&et)&&!(g.flags&128))return dh=!1,yj(it,g,et);dh=!!(it.flags&131072)}else dh=!1,I$4&&g.flags&1048576&&ug(g,ng,g.index);switch(g.lanes=0,g.tag){case 2:var ot=g.type;ij(it,g),it=g.pendingProps;var ut=Yf(g,H$3.current);ch(g,et),ut=Nh(null,g,ot,it,ut,et);var ct=Sh();return g.flags|=1,typeof ut=="object"&&ut!==null&&typeof ut.render=="function"&&ut.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Zf(ot)?(ct=!0,cg(g)):ct=!1,g.memoizedState=ut.state!==null&&ut.state!==void 0?ut.state:null,kh(g),ut.updater=Ei,g.stateNode=ut,ut._reactInternals=g,Ii(g,ot,it,et),g=jj(null,g,ot,!0,ct,et)):(g.tag=0,I$4&&ct&&vg(g),Xi(null,g,ut,et),g=g.child),g;case 16:ot=g.elementType;e:{switch(ij(it,g),it=g.pendingProps,ut=ot._init,ot=ut(ot._payload),g.type=ot,ut=g.tag=Zk(ot),it=Ci(ot,it),ut){case 0:g=cj(null,g,ot,it,et);break e;case 1:g=hj(null,g,ot,it,et);break e;case 11:g=Yi(null,g,ot,it,et);break e;case 14:g=$i(null,g,ot,Ci(ot.type,it),et);break e}throw Error(p$3(306,ot,""))}return g;case 0:return ot=g.type,ut=g.pendingProps,ut=g.elementType===ot?ut:Ci(ot,ut),cj(it,g,ot,ut,et);case 1:return ot=g.type,ut=g.pendingProps,ut=g.elementType===ot?ut:Ci(ot,ut),hj(it,g,ot,ut,et);case 3:e:{if(kj(g),it===null)throw Error(p$3(387));ot=g.pendingProps,ct=g.memoizedState,ut=ct.element,lh(it,g),qh(g,ot,null,et);var dt=g.memoizedState;if(ot=dt.element,ct.isDehydrated)if(ct={element:ot,isDehydrated:!1,cache:dt.cache,pendingSuspenseBoundaries:dt.pendingSuspenseBoundaries,transitions:dt.transitions},g.updateQueue.baseState=ct,g.memoizedState=ct,g.flags&256){ut=Ji(Error(p$3(423)),g),g=lj(it,g,ot,et,ut);break e}else if(ot!==ut){ut=Ji(Error(p$3(424)),g),g=lj(it,g,ot,et,ut);break e}else for(yg=Lf(g.stateNode.containerInfo.firstChild),xg=g,I$4=!0,zg=null,et=Vg(g,null,ot,et),g.child=et;et;)et.flags=et.flags&-3|4096,et=et.sibling;else{if(Ig(),ot===ut){g=Zi(it,g,et);break e}Xi(it,g,ot,et)}g=g.child}return g;case 5:return Ah(g),it===null&&Eg(g),ot=g.type,ut=g.pendingProps,ct=it!==null?it.memoizedProps:null,dt=ut.children,Ef(ot,ut)?dt=null:ct!==null&&Ef(ot,ct)&&(g.flags|=32),gj(it,g),Xi(it,g,dt,et),g.child;case 6:return it===null&&Eg(g),null;case 13:return oj(it,g,et);case 4:return yh(g,g.stateNode.containerInfo),ot=g.pendingProps,it===null?g.child=Ug(g,null,ot,et):Xi(it,g,ot,et),g.child;case 11:return ot=g.type,ut=g.pendingProps,ut=g.elementType===ot?ut:Ci(ot,ut),Yi(it,g,ot,ut,et);case 7:return Xi(it,g,g.pendingProps,et),g.child;case 8:return Xi(it,g,g.pendingProps.children,et),g.child;case 12:return Xi(it,g,g.pendingProps.children,et),g.child;case 10:e:{if(ot=g.type._context,ut=g.pendingProps,ct=g.memoizedProps,dt=ut.value,G$1(Wg,ot._currentValue),ot._currentValue=dt,ct!==null)if(He$2(ct.value,dt)){if(ct.children===ut.children&&!Wf.current){g=Zi(it,g,et);break e}}else for(ct=g.child,ct!==null&&(ct.return=g);ct!==null;){var ft=ct.dependencies;if(ft!==null){dt=ct.child;for(var St=ft.firstContext;St!==null;){if(St.context===ot){if(ct.tag===1){St=mh(-1,et&-et),St.tag=2;var kt=ct.updateQueue;if(kt!==null){kt=kt.shared;var Tt=kt.pending;Tt===null?St.next=St:(St.next=Tt.next,Tt.next=St),kt.pending=St}}ct.lanes|=et,St=ct.alternate,St!==null&&(St.lanes|=et),bh(ct.return,et,g),ft.lanes|=et;break}St=St.next}}else if(ct.tag===10)dt=ct.type===g.type?null:ct.child;else if(ct.tag===18){if(dt=ct.return,dt===null)throw Error(p$3(341));dt.lanes|=et,ft=dt.alternate,ft!==null&&(ft.lanes|=et),bh(dt,et,g),dt=ct.sibling}else dt=ct.child;if(dt!==null)dt.return=ct;else for(dt=ct;dt!==null;){if(dt===g){dt=null;break}if(ct=dt.sibling,ct!==null){ct.return=dt.return,dt=ct;break}dt=dt.return}ct=dt}Xi(it,g,ut.children,et),g=g.child}return g;case 9:return ut=g.type,ot=g.pendingProps.children,ch(g,et),ut=eh(ut),ot=ot(ut),g.flags|=1,Xi(it,g,ot,et),g.child;case 14:return ot=g.type,ut=Ci(ot,g.pendingProps),ut=Ci(ot.type,ut),$i(it,g,ot,ut,et);case 15:return bj(it,g,g.type,g.pendingProps,et);case 17:return ot=g.type,ut=g.pendingProps,ut=g.elementType===ot?ut:Ci(ot,ut),ij(it,g),g.tag=1,Zf(ot)?(it=!0,cg(g)):it=!1,ch(g,et),Gi(g,ot,ut),Ii(g,ot,ut,et),jj(null,g,ot,!0,it,et);case 19:return xj(it,g,et);case 22:return dj(it,g,et)}throw Error(p$3(156,g.tag))};function Fk(it,g){return ac(it,g)}function $k(it,g,et,ot){this.tag=it,this.key=et,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ot,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(it,g,et,ot){return new $k(it,g,et,ot)}function aj(it){return it=it.prototype,!(!it||!it.isReactComponent)}function Zk(it){if(typeof it=="function")return aj(it)?1:0;if(it!=null){if(it=it.$$typeof,it===Da)return 11;if(it===Ga)return 14}return 2}function Pg(it,g){var et=it.alternate;return et===null?(et=Bg(it.tag,g,it.key,it.mode),et.elementType=it.elementType,et.type=it.type,et.stateNode=it.stateNode,et.alternate=it,it.alternate=et):(et.pendingProps=g,et.type=it.type,et.flags=0,et.subtreeFlags=0,et.deletions=null),et.flags=it.flags&14680064,et.childLanes=it.childLanes,et.lanes=it.lanes,et.child=it.child,et.memoizedProps=it.memoizedProps,et.memoizedState=it.memoizedState,et.updateQueue=it.updateQueue,g=it.dependencies,et.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},et.sibling=it.sibling,et.index=it.index,et.ref=it.ref,et}function Rg(it,g,et,ot,ut,ct){var dt=2;if(ot=it,typeof it=="function")aj(it)&&(dt=1);else if(typeof it=="string")dt=5;else e:switch(it){case ya:return Tg(et.children,ut,ct,g);case za:dt=8,ut|=8;break;case Aa:return it=Bg(12,et,g,ut|2),it.elementType=Aa,it.lanes=ct,it;case Ea:return it=Bg(13,et,g,ut),it.elementType=Ea,it.lanes=ct,it;case Fa:return it=Bg(19,et,g,ut),it.elementType=Fa,it.lanes=ct,it;case Ia:return pj(et,ut,ct,g);default:if(typeof it=="object"&&it!==null)switch(it.$$typeof){case Ba:dt=10;break e;case Ca:dt=9;break e;case Da:dt=11;break e;case Ga:dt=14;break e;case Ha:dt=16,ot=null;break e}throw Error(p$3(130,it==null?it:typeof it,""))}return g=Bg(dt,et,g,ut),g.elementType=it,g.type=ot,g.lanes=ct,g}function Tg(it,g,et,ot){return it=Bg(7,it,ot,g),it.lanes=et,it}function pj(it,g,et,ot){return it=Bg(22,it,ot,g),it.elementType=Ia,it.lanes=et,it.stateNode={isHidden:!1},it}function Qg(it,g,et){return it=Bg(6,it,null,g),it.lanes=et,it}function Sg(it,g,et){return g=Bg(4,it.children!==null?it.children:[],it.key,g),g.lanes=et,g.stateNode={containerInfo:it.containerInfo,pendingChildren:null,implementation:it.implementation},g}function al(it,g,et,ot,ut){this.tag=g,this.containerInfo=it,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=ot,this.onRecoverableError=ut,this.mutableSourceEagerHydrationData=null}function bl(it,g,et,ot,ut,ct,dt,ft,St){return it=new al(it,g,et,ft,St),g===1?(g=1,ct===!0&&(g|=8)):g=0,ct=Bg(3,null,null,g),it.current=ct,ct.stateNode=it,ct.memoizedState={element:ot,isDehydrated:et,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(ct),it}function cl(it,g,et){var ot=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:ot==null?null:""+ot,children:it,containerInfo:g,implementation:et}}function dl(it){if(!it)return Vf;it=it._reactInternals;e:{if(Vb(it)!==it||it.tag!==1)throw Error(p$3(170));var g=it;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Zf(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(p$3(171))}if(it.tag===1){var et=it.type;if(Zf(et))return bg(it,et,g)}return g}function el(it,g,et,ot,ut,ct,dt,ft,St){return it=bl(et,ot,!0,it,ut,ct,dt,ft,St),it.context=dl(null),et=it.current,ot=R$3(),ut=yi(et),ct=mh(ot,ut),ct.callback=g??null,nh(et,ct,ut),it.current.lanes=ut,Ac(it,ut,ot),Dk(it,ot),it}function fl(it,g,et,ot){var ut=g.current,ct=R$3(),dt=yi(ut);return et=dl(et),g.context===null?g.context=et:g.pendingContext=et,g=mh(ct,dt),g.payload={element:it},ot=ot===void 0?null:ot,ot!==null&&(g.callback=ot),it=nh(ut,g,dt),it!==null&&(gi(it,ut,dt,ct),oh(it,ut,dt)),dt}function gl(it){if(it=it.current,!it.child)return null;switch(it.child.tag){case 5:return it.child.stateNode;default:return it.child.stateNode}}function hl(it,g){if(it=it.memoizedState,it!==null&&it.dehydrated!==null){var et=it.retryLane;it.retryLane=et!==0&&et<g?et:g}}function il(it,g){hl(it,g),(it=it.alternate)&&hl(it,g)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(it){console.error(it)};function ll(it){this._internalRoot=it}ml.prototype.render=ll.prototype.render=function(it){var g=this._internalRoot;if(g===null)throw Error(p$3(409));fl(it,g,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var it=this._internalRoot;if(it!==null){this._internalRoot=null;var g=it.containerInfo;Rk(function(){fl(null,it,null,null)}),g[uf]=null}};function ml(it){this._internalRoot=it}ml.prototype.unstable_scheduleHydration=function(it){if(it){var g=Hc();it={blockedOn:null,target:it,priority:g};for(var et=0;et<Qc.length&&g!==0&&g<Qc[et].priority;et++);Qc.splice(et,0,it),et===0&&Vc(it)}};function nl(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11)}function ol(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11&&(it.nodeType!==8||it.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(it,g,et,ot,ut){if(ut){if(typeof ot=="function"){var ct=ot;ot=function(){var kt=gl(dt);ct.call(kt)}}var dt=el(g,ot,it,0,null,!1,!1,"",pl);return it._reactRootContainer=dt,it[uf]=dt.current,sf(it.nodeType===8?it.parentNode:it),Rk(),dt}for(;ut=it.lastChild;)it.removeChild(ut);if(typeof ot=="function"){var ft=ot;ot=function(){var kt=gl(St);ft.call(kt)}}var St=bl(it,0,!1,null,null,!1,!1,"",pl);return it._reactRootContainer=St,it[uf]=St.current,sf(it.nodeType===8?it.parentNode:it),Rk(function(){fl(g,St,et,ot)}),St}function rl(it,g,et,ot,ut){var ct=et._reactRootContainer;if(ct){var dt=ct;if(typeof ut=="function"){var ft=ut;ut=function(){var St=gl(dt);ft.call(St)}}fl(g,dt,it,ut)}else dt=ql(et,g,it,ut,ot);return gl(dt)}Ec=function(it){switch(it.tag){case 3:var g=it.stateNode;if(g.current.memoizedState.isDehydrated){var et=tc(g.pendingLanes);et!==0&&(Cc(g,et|1),Dk(g,B$1()),!(K$2&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var ot=ih(it,1);if(ot!==null){var ut=R$3();gi(ot,it,1,ut)}}),il(it,1)}};Fc=function(it){if(it.tag===13){var g=ih(it,134217728);if(g!==null){var et=R$3();gi(g,it,134217728,et)}il(it,134217728)}};Gc=function(it){if(it.tag===13){var g=yi(it),et=ih(it,g);if(et!==null){var ot=R$3();gi(et,it,g,ot)}il(it,g)}};Hc=function(){return C$4};Ic=function(it,g){var et=C$4;try{return C$4=it,g()}finally{C$4=et}};yb=function(it,g,et){switch(g){case"input":if(bb(it,et),g=et.name,et.type==="radio"&&g!=null){for(et=it;et.parentNode;)et=et.parentNode;for(et=et.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<et.length;g++){var ot=et[g];if(ot!==it&&ot.form===it.form){var ut=Db(ot);if(!ut)throw Error(p$3(90));Wa(ot),bb(ot,ut)}}}break;case"textarea":ib(it,et);break;case"select":g=et.value,g!=null&&fb(it,!!et.multiple,g,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(it){return it=Zb(it),it===null?null:it.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(it,g){var et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(g))throw Error(p$3(200));return cl(it,g,null,et)};reactDom_production_min.createRoot=function(it,g){if(!nl(it))throw Error(p$3(299));var et=!1,ot="",ut=kl;return g!=null&&(g.unstable_strictMode===!0&&(et=!0),g.identifierPrefix!==void 0&&(ot=g.identifierPrefix),g.onRecoverableError!==void 0&&(ut=g.onRecoverableError)),g=bl(it,1,!1,null,null,et,!1,ot,ut),it[uf]=g.current,sf(it.nodeType===8?it.parentNode:it),new ll(g)};reactDom_production_min.findDOMNode=function(it){if(it==null)return null;if(it.nodeType===1)return it;var g=it._reactInternals;if(g===void 0)throw typeof it.render=="function"?Error(p$3(188)):(it=Object.keys(it).join(","),Error(p$3(268,it)));return it=Zb(g),it=it===null?null:it.stateNode,it};reactDom_production_min.flushSync=function(it){return Rk(it)};reactDom_production_min.hydrate=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!0,et)};reactDom_production_min.hydrateRoot=function(it,g,et){if(!nl(it))throw Error(p$3(405));var ot=et!=null&&et.hydratedSources||null,ut=!1,ct="",dt=kl;if(et!=null&&(et.unstable_strictMode===!0&&(ut=!0),et.identifierPrefix!==void 0&&(ct=et.identifierPrefix),et.onRecoverableError!==void 0&&(dt=et.onRecoverableError)),g=el(g,null,it,1,et??null,ut,!1,ct,dt),it[uf]=g.current,sf(it),ot)for(it=0;it<ot.length;it++)et=ot[it],ut=et._getVersion,ut=ut(et._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[et,ut]:g.mutableSourceEagerHydrationData.push(et,ut);return new ml(g)};reactDom_production_min.render=function(it,g,et){if(!ol(g))throw Error(p$3(200));return rl(null,it,g,!1,et)};reactDom_production_min.unmountComponentAtNode=function(it){if(!ol(it))throw Error(p$3(40));return it._reactRootContainer?(Rk(function(){rl(null,null,it,!1,function(){it._reactRootContainer=null,it[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(it,g,et,ot){if(!ol(et))throw Error(p$3(200));if(it==null||it._reactInternals===void 0)throw Error(p$3(38));return rl(it,g,et,!1,ot)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(it){console.error(it)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$5=reactDomExports;createRoot=client.createRoot=m$5.createRoot,client.hydrateRoot=m$5.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$2.apply(this,arguments)}var Action$1;(function(it){it.Pop="POP",it.Push="PUSH",it.Replace="REPLACE"})(Action$1||(Action$1={}));const PopStateEventType="popstate";function createBrowserHistory(it){it===void 0&&(it={});function g(ot,ut){let{pathname:ct,search:dt,hash:ft}=ot.location;return createLocation("",{pathname:ct,search:dt,hash:ft},ut.state&&ut.state.usr||null,ut.state&&ut.state.key||"default")}function et(ot,ut){return typeof ut=="string"?ut:createPath(ut)}return getUrlBasedHistory(g,et,null,it)}function invariant$2(it,g){if(it===!1||it===null||typeof it>"u")throw new Error(g)}function warning$2(it,g){if(!it){typeof console<"u"&&console.warn(g);try{throw new Error(g)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(it,g){return{usr:it.state,key:it.key,idx:g}}function createLocation(it,g,et,ot){return et===void 0&&(et=null),_extends$2({pathname:typeof it=="string"?it:it.pathname,search:"",hash:""},typeof g=="string"?parsePath(g):g,{state:et,key:g&&g.key||ot||createKey$1()})}function createPath(it){let{pathname:g="/",search:et="",hash:ot=""}=it;return et&&et!=="?"&&(g+=et.charAt(0)==="?"?et:"?"+et),ot&&ot!=="#"&&(g+=ot.charAt(0)==="#"?ot:"#"+ot),g}function parsePath(it){let g={};if(it){let et=it.indexOf("#");et>=0&&(g.hash=it.substr(et),it=it.substr(0,et));let ot=it.indexOf("?");ot>=0&&(g.search=it.substr(ot),it=it.substr(0,ot)),it&&(g.pathname=it)}return g}function getUrlBasedHistory(it,g,et,ot){ot===void 0&&(ot={});let{window:ut=document.defaultView,v5Compat:ct=!1}=ot,dt=ut.history,ft=Action$1.Pop,St=null,kt=Tt();kt==null&&(kt=0,dt.replaceState(_extends$2({},dt.state,{idx:kt}),""));function Tt(){return(dt.state||{idx:null}).idx}function Rt(){ft=Action$1.Pop;let Ht=Tt(),Ut=Ht==null?null:Ht-kt;kt=Ht,St&&St({action:ft,location:zt.location,delta:Ut})}function Ft(Ht,Ut){ft=Action$1.Push;let Kt=createLocation(zt.location,Ht,Ut);et&&et(Kt,Ht),kt=Tt()+1;let Yt=getHistoryState(Kt,kt),er=zt.createHref(Kt);try{dt.pushState(Yt,"",er)}catch(ar){if(ar instanceof DOMException&&ar.name==="DataCloneError")throw ar;ut.location.assign(er)}ct&&St&&St({action:ft,location:zt.location,delta:1})}function jt(Ht,Ut){ft=Action$1.Replace;let Kt=createLocation(zt.location,Ht,Ut);et&&et(Kt,Ht),kt=Tt();let Yt=getHistoryState(Kt,kt),er=zt.createHref(Kt);dt.replaceState(Yt,"",er),ct&&St&&St({action:ft,location:zt.location,delta:0})}function Bt(Ht){let Ut=ut.location.origin!=="null"?ut.location.origin:ut.location.href,Kt=typeof Ht=="string"?Ht:createPath(Ht);return Kt=Kt.replace(/ $/,"%20"),invariant$2(Ut,"No window.location.(origin|href) available to create URL for href: "+Kt),new URL(Kt,Ut)}let zt={get action(){return ft},get location(){return it(ut,dt)},listen(Ht){if(St)throw new Error("A history only accepts one active listener");return ut.addEventListener(PopStateEventType,Rt),St=Ht,()=>{ut.removeEventListener(PopStateEventType,Rt),St=null}},createHref(Ht){return g(ut,Ht)},createURL:Bt,encodeLocation(Ht){let Ut=Bt(Ht);return{pathname:Ut.pathname,search:Ut.search,hash:Ut.hash}},push:Ft,replace:jt,go(Ht){return dt.go(Ht)}};return zt}var ResultType;(function(it){it.data="data",it.deferred="deferred",it.redirect="redirect",it.error="error"})(ResultType||(ResultType={}));function matchRoutes(it,g,et){return et===void 0&&(et="/"),matchRoutesImpl(it,g,et,!1)}function matchRoutesImpl(it,g,et,ot){let ut=typeof g=="string"?parsePath(g):g,ct=stripBasename(ut.pathname||"/",et);if(ct==null)return null;let dt=flattenRoutes(it);rankRouteBranches(dt);let ft=null;for(let St=0;ft==null&&St<dt.length;++St){let kt=decodePath(ct);ft=matchRouteBranch(dt[St],kt,ot)}return ft}function flattenRoutes(it,g,et,ot){g===void 0&&(g=[]),et===void 0&&(et=[]),ot===void 0&&(ot="");let ut=(ct,dt,ft)=>{let St={relativePath:ft===void 0?ct.path||"":ft,caseSensitive:ct.caseSensitive===!0,childrenIndex:dt,route:ct};St.relativePath.startsWith("/")&&(invariant$2(St.relativePath.startsWith(ot),'Absolute route path "'+St.relativePath+'" nested under path '+('"'+ot+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),St.relativePath=St.relativePath.slice(ot.length));let kt=joinPaths([ot,St.relativePath]),Tt=et.concat(St);ct.children&&ct.children.length>0&&(invariant$2(ct.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+kt+'".')),flattenRoutes(ct.children,g,Tt,kt)),!(ct.path==null&&!ct.index)&&g.push({path:kt,score:computeScore(kt,ct.index),routesMeta:Tt})};return it.forEach((ct,dt)=>{var ft;if(ct.path===""||!((ft=ct.path)!=null&&ft.includes("?")))ut(ct,dt);else for(let St of explodeOptionalSegments(ct.path))ut(ct,dt,St)}),g}function explodeOptionalSegments(it){let g=it.split("/");if(g.length===0)return[];let[et,...ot]=g,ut=et.endsWith("?"),ct=et.replace(/\?$/,"");if(ot.length===0)return ut?[ct,""]:[ct];let dt=explodeOptionalSegments(ot.join("/")),ft=[];return ft.push(...dt.map(St=>St===""?ct:[ct,St].join("/"))),ut&&ft.push(...dt),ft.map(St=>it.startsWith("/")&&St===""?"/":St)}function rankRouteBranches(it){it.sort((g,et)=>g.score!==et.score?et.score-g.score:compareIndexes(g.routesMeta.map(ot=>ot.childrenIndex),et.routesMeta.map(ot=>ot.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=it=>it==="*";function computeScore(it,g){let et=it.split("/"),ot=et.length;return et.some(isSplat)&&(ot+=splatPenalty),g&&(ot+=indexRouteValue),et.filter(ut=>!isSplat(ut)).reduce((ut,ct)=>ut+(paramRe.test(ct)?dynamicSegmentValue:ct===""?emptySegmentValue:staticSegmentValue),ot)}function compareIndexes(it,g){return it.length===g.length&&it.slice(0,-1).every((ot,ut)=>ot===g[ut])?it[it.length-1]-g[g.length-1]:0}function matchRouteBranch(it,g,et){et===void 0&&(et=!1);let{routesMeta:ot}=it,ut={},ct="/",dt=[];for(let ft=0;ft<ot.length;++ft){let St=ot[ft],kt=ft===ot.length-1,Tt=ct==="/"?g:g.slice(ct.length)||"/",Rt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:kt},Tt),Ft=St.route;if(!Rt&&kt&&et&&!ot[ot.length-1].route.index&&(Rt=matchPath({path:St.relativePath,caseSensitive:St.caseSensitive,end:!1},Tt)),!Rt)return null;Object.assign(ut,Rt.params),dt.push({params:ut,pathname:joinPaths([ct,Rt.pathname]),pathnameBase:normalizePathname(joinPaths([ct,Rt.pathnameBase])),route:Ft}),Rt.pathnameBase!=="/"&&(ct=joinPaths([ct,Rt.pathnameBase]))}return dt}function matchPath(it,g){typeof it=="string"&&(it={path:it,caseSensitive:!1,end:!0});let[et,ot]=compilePath(it.path,it.caseSensitive,it.end),ut=g.match(et);if(!ut)return null;let ct=ut[0],dt=ct.replace(/(.)\/+$/,"$1"),ft=ut.slice(1);return{params:ot.reduce((kt,Tt,Rt)=>{let{paramName:Ft,isOptional:jt}=Tt;if(Ft==="*"){let zt=ft[Rt]||"";dt=ct.slice(0,ct.length-zt.length).replace(/(.)\/+$/,"$1")}const Bt=ft[Rt];return jt&&!Bt?kt[Ft]=void 0:kt[Ft]=(Bt||"").replace(/%2F/g,"/"),kt},{}),pathname:ct,pathnameBase:dt,pattern:it}}function compilePath(it,g,et){g===void 0&&(g=!1),et===void 0&&(et=!0),warning$2(it==="*"||!it.endsWith("*")||it.endsWith("/*"),'Route path "'+it+'" will be treated as if it were '+('"'+it.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+it.replace(/\*$/,"/*")+'".'));let ot=[],ut="^"+it.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(dt,ft,St)=>(ot.push({paramName:ft,isOptional:St!=null}),St?"/?([^\\/]+)?":"/([^\\/]+)"));return it.endsWith("*")?(ot.push({paramName:"*"}),ut+=it==="*"||it==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):et?ut+="\\/*$":it!==""&&it!=="/"&&(ut+="(?:(?=\\/|$))"),[new RegExp(ut,g?void 0:"i"),ot]}function decodePath(it){try{return it.split("/").map(g=>decodeURIComponent(g).replace(/\//g,"%2F")).join("/")}catch(g){return warning$2(!1,'The URL path "'+it+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+g+").")),it}}function stripBasename(it,g){if(g==="/")return it;if(!it.toLowerCase().startsWith(g.toLowerCase()))return null;let et=g.endsWith("/")?g.length-1:g.length,ot=it.charAt(et);return ot&&ot!=="/"?null:it.slice(et)||"/"}function resolvePath(it,g){g===void 0&&(g="/");let{pathname:et,search:ot="",hash:ut=""}=typeof it=="string"?parsePath(it):it;return{pathname:et?et.startsWith("/")?et:resolvePathname(et,g):g,search:normalizeSearch(ot),hash:normalizeHash(ut)}}function resolvePathname(it,g){let et=g.replace(/\/+$/,"").split("/");return it.split("/").forEach(ut=>{ut===".."?et.length>1&&et.pop():ut!=="."&&et.push(ut)}),et.length>1?et.join("/"):"/"}function getInvalidPathError(it,g,et,ot){return"Cannot include a '"+it+"' character in a manually specified "+("`to."+g+"` field ["+JSON.stringify(ot)+"].  Please separate it out to the ")+("`to."+et+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(it){return it.filter((g,et)=>et===0||g.route.path&&g.route.path.length>0)}function getResolveToMatches(it,g){let et=getPathContributingMatches(it);return g?et.map((ot,ut)=>ut===et.length-1?ot.pathname:ot.pathnameBase):et.map(ot=>ot.pathnameBase)}function resolveTo(it,g,et,ot){ot===void 0&&(ot=!1);let ut;typeof it=="string"?ut=parsePath(it):(ut=_extends$2({},it),invariant$2(!ut.pathname||!ut.pathname.includes("?"),getInvalidPathError("?","pathname","search",ut)),invariant$2(!ut.pathname||!ut.pathname.includes("#"),getInvalidPathError("#","pathname","hash",ut)),invariant$2(!ut.search||!ut.search.includes("#"),getInvalidPathError("#","search","hash",ut)));let ct=it===""||ut.pathname==="",dt=ct?"/":ut.pathname,ft;if(dt==null)ft=et;else{let Rt=g.length-1;if(!ot&&dt.startsWith("..")){let Ft=dt.split("/");for(;Ft[0]==="..";)Ft.shift(),Rt-=1;ut.pathname=Ft.join("/")}ft=Rt>=0?g[Rt]:"/"}let St=resolvePath(ut,ft),kt=dt&&dt!=="/"&&dt.endsWith("/"),Tt=(ct||dt===".")&&et.endsWith("/");return!St.pathname.endsWith("/")&&(kt||Tt)&&(St.pathname+="/"),St}const joinPaths=it=>it.join("/").replace(/\/\/+/g,"/"),normalizePathname=it=>it.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=it=>!it||it==="?"?"":it.startsWith("?")?it:"?"+it,normalizeHash=it=>!it||it==="#"?"":it.startsWith("#")?it:"#"+it;function isRouteErrorResponse(it){return it!=null&&typeof it.status=="number"&&typeof it.statusText=="string"&&typeof it.internal=="boolean"&&"data"in it}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(it,g){let{relative:et}=g===void 0?{}:g;useInRouterContext()||invariant$2(!1);let{basename:ot,navigator:ut}=reactExports.useContext(NavigationContext),{hash:ct,pathname:dt,search:ft}=useResolvedPath(it,{relative:et}),St=dt;return ot!=="/"&&(St=dt==="/"?ot:joinPaths([ot,dt])),ut.createHref({pathname:St,search:ft,hash:ct})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$3(it){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(it)}function useNavigate(){let{isDataRoute:it}=reactExports.useContext(RouteContext);return it?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let it=reactExports.useContext(DataRouterContext),{basename:g,future:et,navigator:ot}=reactExports.useContext(NavigationContext),{matches:ut}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),dt=JSON.stringify(getResolveToMatches(ut,et.v7_relativeSplatPath)),ft=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{ft.current=!0}),reactExports.useCallback(function(kt,Tt){if(Tt===void 0&&(Tt={}),!ft.current)return;if(typeof kt=="number"){ot.go(kt);return}let Rt=resolveTo(kt,JSON.parse(dt),ct,Tt.relative==="path");it==null&&g!=="/"&&(Rt.pathname=Rt.pathname==="/"?g:joinPaths([g,Rt.pathname])),(Tt.replace?ot.replace:ot.push)(Rt,Tt.state,Tt)},[g,ot,dt,ct,it])}function useResolvedPath(it,g){let{relative:et}=g===void 0?{}:g,{future:ot}=reactExports.useContext(NavigationContext),{matches:ut}=reactExports.useContext(RouteContext),{pathname:ct}=useLocation(),dt=JSON.stringify(getResolveToMatches(ut,ot.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(it,JSON.parse(dt),ct,et==="path"),[it,dt,ct,et])}function useRoutes(it,g){return useRoutesImpl(it,g)}function useRoutesImpl(it,g,et,ot){useInRouterContext()||invariant$2(!1);let{navigator:ut}=reactExports.useContext(NavigationContext),{matches:ct}=reactExports.useContext(RouteContext),dt=ct[ct.length-1],ft=dt?dt.params:{};dt&&dt.pathname;let St=dt?dt.pathnameBase:"/";dt&&dt.route;let kt=useLocation(),Tt;if(g){var Rt;let Ht=typeof g=="string"?parsePath(g):g;St==="/"||(Rt=Ht.pathname)!=null&&Rt.startsWith(St)||invariant$2(!1),Tt=Ht}else Tt=kt;let Ft=Tt.pathname||"/",jt=Ft;if(St!=="/"){let Ht=St.replace(/^\//,"").split("/");jt="/"+Ft.replace(/^\//,"").split("/").slice(Ht.length).join("/")}let Bt=matchRoutes(it,{pathname:jt}),zt=_renderMatches(Bt&&Bt.map(Ht=>Object.assign({},Ht,{params:Object.assign({},ft,Ht.params),pathname:joinPaths([St,ut.encodeLocation?ut.encodeLocation(Ht.pathname).pathname:Ht.pathname]),pathnameBase:Ht.pathnameBase==="/"?St:joinPaths([St,ut.encodeLocation?ut.encodeLocation(Ht.pathnameBase).pathname:Ht.pathnameBase])})),ct,et,ot);return g&&zt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},Tt),navigationType:Action$1.Pop}},zt):zt}function DefaultErrorComponent(){let it=useRouteError(),g=isRouteErrorResponse(it)?it.status+" "+it.statusText:it instanceof Error?it.message:JSON.stringify(it),et=it instanceof Error?it.stack:null,ut={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},ct=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},g),et?reactExports.createElement("pre",{style:ut},et):null,ct)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,et){return et.location!==g.location||et.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:et.error,location:et.location,revalidation:g.revalidation||et.revalidation}}componentDidCatch(g,et){console.error("React Router caught the following error during render",g,et)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(it){let{routeContext:g,match:et,children:ot}=it,ut=reactExports.useContext(DataRouterContext);return ut&&ut.static&&ut.staticContext&&(et.route.errorElement||et.route.ErrorBoundary)&&(ut.staticContext._deepestRenderedBoundaryId=et.route.id),reactExports.createElement(RouteContext.Provider,{value:g},ot)}function _renderMatches(it,g,et,ot){var ut;if(g===void 0&&(g=[]),et===void 0&&(et=null),ot===void 0&&(ot=null),it==null){var ct;if(!et)return null;if(et.errors)it=et.matches;else if((ct=ot)!=null&&ct.v7_partialHydration&&g.length===0&&!et.initialized&&et.matches.length>0)it=et.matches;else return null}let dt=it,ft=(ut=et)==null?void 0:ut.errors;if(ft!=null){let Tt=dt.findIndex(Rt=>Rt.route.id&&(ft==null?void 0:ft[Rt.route.id])!==void 0);Tt>=0||invariant$2(!1),dt=dt.slice(0,Math.min(dt.length,Tt+1))}let St=!1,kt=-1;if(et&&ot&&ot.v7_partialHydration)for(let Tt=0;Tt<dt.length;Tt++){let Rt=dt[Tt];if((Rt.route.HydrateFallback||Rt.route.hydrateFallbackElement)&&(kt=Tt),Rt.route.id){let{loaderData:Ft,errors:jt}=et,Bt=Rt.route.loader&&Ft[Rt.route.id]===void 0&&(!jt||jt[Rt.route.id]===void 0);if(Rt.route.lazy||Bt){St=!0,kt>=0?dt=dt.slice(0,kt+1):dt=[dt[0]];break}}}return dt.reduceRight((Tt,Rt,Ft)=>{let jt,Bt=!1,zt=null,Ht=null;et&&(jt=ft&&Rt.route.id?ft[Rt.route.id]:void 0,zt=Rt.route.errorElement||defaultErrorElement,St&&(kt<0&&Ft===0?(warningOnce("route-fallback",!1),Bt=!0,Ht=null):kt===Ft&&(Bt=!0,Ht=Rt.route.hydrateFallbackElement||null)));let Ut=g.concat(dt.slice(0,Ft+1)),Kt=()=>{let Yt;return jt?Yt=zt:Bt?Yt=Ht:Rt.route.Component?Yt=reactExports.createElement(Rt.route.Component,null):Rt.route.element?Yt=Rt.route.element:Yt=Tt,reactExports.createElement(RenderedRoute,{match:Rt,routeContext:{outlet:Tt,matches:Ut,isDataRoute:et!=null},children:Yt})};return et&&(Rt.route.ErrorBoundary||Rt.route.errorElement||Ft===0)?reactExports.createElement(RenderErrorBoundary,{location:et.location,revalidation:et.revalidation,component:zt,error:jt,children:Kt(),routeContext:{outlet:null,matches:Ut,isDataRoute:!0}}):Kt()},null)}var DataRouterHook$1=function(it){return it.UseBlocker="useBlocker",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it}(DataRouterHook$1||{}),DataRouterStateHook$1=function(it){return it.UseBlocker="useBlocker",it.UseLoaderData="useLoaderData",it.UseActionData="useActionData",it.UseRouteError="useRouteError",it.UseNavigation="useNavigation",it.UseRouteLoaderData="useRouteLoaderData",it.UseMatches="useMatches",it.UseRevalidator="useRevalidator",it.UseNavigateStable="useNavigate",it.UseRouteId="useRouteId",it}(DataRouterStateHook$1||{});function useDataRouterContext(it){let g=reactExports.useContext(DataRouterContext);return g||invariant$2(!1),g}function useDataRouterState(it){let g=reactExports.useContext(DataRouterStateContext);return g||invariant$2(!1),g}function useRouteContext(it){let g=reactExports.useContext(RouteContext);return g||invariant$2(!1),g}function useCurrentRouteId(it){let g=useRouteContext(),et=g.matches[g.matches.length-1];return et.route.id||invariant$2(!1),et.route.id}function useRouteError(){var it;let g=reactExports.useContext(RouteErrorContext),et=useDataRouterState(DataRouterStateHook$1.UseRouteError),ot=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return g!==void 0?g:(it=et.errors)==null?void 0:it[ot]}function useNavigateStable(){let{router:it}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),g=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{et.current=!0}),reactExports.useCallback(function(ut,ct){ct===void 0&&(ct={}),et.current&&(typeof ut=="number"?it.navigate(ut):it.navigate(ut,_extends$1({fromRouteId:g},ct)))},[it,g])}const alreadyWarned$1={};function warningOnce(it,g,et){!g&&!alreadyWarned$1[it]&&(alreadyWarned$1[it]=!0)}const alreadyWarned={};function warnOnce(it,g){alreadyWarned[g]||(alreadyWarned[g]=!0,console.warn(g))}const logDeprecation=(it,g,et)=>warnOnce(it," React Router Future Flag Warning: "+g+". "+("You can use the `"+it+"` future flag to opt-in early. ")+("For more information, see "+et+"."));function logV6DeprecationWarnings(it,g){(it==null?void 0:it.v7_startTransition)===void 0&&logDeprecation("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(it==null?void 0:it.v7_relativeSplatPath)===void 0&&(!g||!g.v7_relativeSplatPath)&&logDeprecation("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),g&&(g.v7_fetcherPersist===void 0&&logDeprecation("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),g.v7_normalizeFormMethod===void 0&&logDeprecation("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),g.v7_partialHydration===void 0&&logDeprecation("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),g.v7_skipActionErrorRevalidation===void 0&&logDeprecation("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Navigate(it){let{to:g,replace:et,state:ot,relative:ut}=it;useInRouterContext()||invariant$2(!1);let{future:ct,static:dt}=reactExports.useContext(NavigationContext),{matches:ft}=reactExports.useContext(RouteContext),{pathname:St}=useLocation(),kt=useNavigate(),Tt=resolveTo(g,getResolveToMatches(ft,ct.v7_relativeSplatPath),St,ut==="path"),Rt=JSON.stringify(Tt);return reactExports.useEffect(()=>kt(JSON.parse(Rt),{replace:et,state:ot,relative:ut}),[kt,Rt,ut,et,ot]),null}function Route(it){invariant$2(!1)}function Router(it){let{basename:g="/",children:et=null,location:ot,navigationType:ut=Action$1.Pop,navigator:ct,static:dt=!1,future:ft}=it;useInRouterContext()&&invariant$2(!1);let St=g.replace(/^\/*/,"/"),kt=reactExports.useMemo(()=>({basename:St,navigator:ct,static:dt,future:_extends$1({v7_relativeSplatPath:!1},ft)}),[St,ft,ct,dt]);typeof ot=="string"&&(ot=parsePath(ot));let{pathname:Tt="/",search:Rt="",hash:Ft="",state:jt=null,key:Bt="default"}=ot,zt=reactExports.useMemo(()=>{let Ht=stripBasename(Tt,St);return Ht==null?null:{location:{pathname:Ht,search:Rt,hash:Ft,state:jt,key:Bt},navigationType:ut}},[St,Tt,Rt,Ft,jt,Bt,ut]);return zt==null?null:reactExports.createElement(NavigationContext.Provider,{value:kt},reactExports.createElement(LocationContext.Provider,{children:et,value:zt}))}function Routes(it){let{children:g,location:et}=it;return useRoutes(createRoutesFromChildren(g),et)}new Promise(()=>{});function createRoutesFromChildren(it,g){g===void 0&&(g=[]);let et=[];return reactExports.Children.forEach(it,(ot,ut)=>{if(!reactExports.isValidElement(ot))return;let ct=[...g,ut];if(ot.type===reactExports.Fragment){et.push.apply(et,createRoutesFromChildren(ot.props.children,ct));return}ot.type!==Route&&invariant$2(!1),!ot.props.index||!ot.props.children||invariant$2(!1);let dt={id:ot.props.id||ct.join("-"),caseSensitive:ot.props.caseSensitive,element:ot.props.element,Component:ot.props.Component,index:ot.props.index,path:ot.props.path,loader:ot.props.loader,action:ot.props.action,errorElement:ot.props.errorElement,ErrorBoundary:ot.props.ErrorBoundary,hasErrorBoundary:ot.props.ErrorBoundary!=null||ot.props.errorElement!=null,shouldRevalidate:ot.props.shouldRevalidate,handle:ot.props.handle,lazy:ot.props.lazy};ot.props.children&&(dt.children=createRoutesFromChildren(ot.props.children,ct)),et.push(dt)}),et}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(it){for(var g=1;g<arguments.length;g++){var et=arguments[g];for(var ot in et)Object.prototype.hasOwnProperty.call(et,ot)&&(it[ot]=et[ot])}return it},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ut,ct;for(ct=0;ct<ot.length;ct++)ut=ot[ct],!(g.indexOf(ut)>=0)&&(et[ut]=it[ut]);return et}function isModifiedEvent(it){return!!(it.metaKey||it.altKey||it.ctrlKey||it.shiftKey)}function shouldProcessLinkClick(it,g){return it.button===0&&(!g||g==="_self")&&!isModifiedEvent(it)}function createSearchParams(it){return it===void 0&&(it=""),new URLSearchParams(typeof it=="string"||Array.isArray(it)||it instanceof URLSearchParams?it:Object.keys(it).reduce((g,et)=>{let ot=it[et];return g.concat(Array.isArray(ot)?ot.map(ut=>[et,ut]):[[et,ot]])},[]))}function getSearchParamsForLocation(it,g){let et=createSearchParams(it);return g&&g.forEach((ot,ut)=>{et.has(ut)||g.getAll(ut).forEach(ct=>{et.append(ut,ct)})}),et}const _excluded$2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=t$5[START_TRANSITION];function BrowserRouter(it){let{basename:g,children:et,future:ot,window:ut}=it,ct=reactExports.useRef();ct.current==null&&(ct.current=createBrowserHistory({window:ut,v5Compat:!0}));let dt=ct.current,[ft,St]=reactExports.useState({action:dt.action,location:dt.location}),{v7_startTransition:kt}=ot||{},Tt=reactExports.useCallback(Rt=>{kt&&startTransitionImpl?startTransitionImpl(()=>St(Rt)):St(Rt)},[St,kt]);return reactExports.useLayoutEffect(()=>dt.listen(Tt),[dt,Tt]),reactExports.useEffect(()=>logV6DeprecationWarnings(ot),[ot]),reactExports.createElement(Router,{basename:g,children:et,location:ft.location,navigationType:ft.action,navigator:dt,future:ot})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(g,et){let{onClick:ot,relative:ut,reloadDocument:ct,replace:dt,state:ft,target:St,to:kt,preventScrollReset:Tt,viewTransition:Rt}=g,Ft=_objectWithoutPropertiesLoose$1(g,_excluded$2),{basename:jt}=reactExports.useContext(NavigationContext),Bt,zt=!1;if(typeof kt=="string"&&ABSOLUTE_URL_REGEX.test(kt)&&(Bt=kt,isBrowser$2))try{let Yt=new URL(window.location.href),er=kt.startsWith("//")?new URL(Yt.protocol+kt):new URL(kt),ar=stripBasename(er.pathname,jt);er.origin===Yt.origin&&ar!=null?kt=ar+er.search+er.hash:zt=!0}catch{}let Ht=useHref(kt,{relative:ut}),Ut=useLinkClickHandler(kt,{replace:dt,state:ft,target:St,preventScrollReset:Tt,relative:ut,viewTransition:Rt});function Kt(Yt){ot&&ot(Yt),Yt.defaultPrevented||Ut(Yt)}return reactExports.createElement("a",_extends({},Ft,{href:Bt||Ht,onClick:zt||ct?ot:Kt,ref:et,target:St}))});var DataRouterHook;(function(it){it.UseScrollRestoration="useScrollRestoration",it.UseSubmit="useSubmit",it.UseSubmitFetcher="useSubmitFetcher",it.UseFetcher="useFetcher",it.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(it){it.UseFetcher="useFetcher",it.UseFetchers="useFetchers",it.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(it,g){let{target:et,replace:ot,state:ut,preventScrollReset:ct,relative:dt,viewTransition:ft}=g===void 0?{}:g,St=useNavigate(),kt=useLocation(),Tt=useResolvedPath(it,{relative:dt});return reactExports.useCallback(Rt=>{if(shouldProcessLinkClick(Rt,et)){Rt.preventDefault();let Ft=ot!==void 0?ot:createPath(kt)===createPath(Tt);St(it,{replace:Ft,state:ut,preventScrollReset:ct,relative:dt,viewTransition:ft})}},[kt,St,Tt,ot,ut,et,it,ct,dt,ft])}function useSearchParams(it){let g=reactExports.useRef(createSearchParams(it)),et=reactExports.useRef(!1),ot=useLocation(),ut=reactExports.useMemo(()=>getSearchParamsForLocation(ot.search,et.current?null:g.current),[ot.search]),ct=useNavigate(),dt=reactExports.useCallback((ft,St)=>{const kt=createSearchParams(typeof ft=="function"?ft(ut):ft);et.current=!0,ct("?"+kt,St)},[ct,ut]);return[ut,dt]}function createDOMMotionComponentProxy(it){if(typeof Proxy>"u")return it;const g=new Map,et=(...ot)=>it(...ot);return new Proxy(et,{get:(ot,ut)=>ut==="create"?it:(g.has(ut)||g.set(ut,it(ut)),g.get(ut))})}function isAnimationControls(it){return it!==null&&typeof it=="object"&&typeof it.start=="function"}const isKeyframesTarget=it=>Array.isArray(it);function shallowCompare(it,g){if(!Array.isArray(g))return!1;const et=g.length;if(et!==it.length)return!1;for(let ot=0;ot<et;ot++)if(g[ot]!==it[ot])return!1;return!0}function isVariantLabel(it){return typeof it=="string"||Array.isArray(it)}function getValueState(it){const g=[{},{}];return it==null||it.values.forEach((et,ot)=>{g[0][ot]=et.get(),g[1][ot]=et.getVelocity()}),g}function resolveVariantFromProps(it,g,et,ot){if(typeof g=="function"){const[ut,ct]=getValueState(ot);g=g(et!==void 0?et:it.custom,ut,ct)}if(typeof g=="string"&&(g=it.variants&&it.variants[g]),typeof g=="function"){const[ut,ct]=getValueState(ot);g=g(et!==void 0?et:it.custom,ut,ct)}return g}function resolveVariant(it,g,et){const ot=it.getProps();return resolveVariantFromProps(ot,g,et!==void 0?et:ot.custom,it)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=it=>it*1e3,millisecondsToSeconds=it=>it/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=it=>({type:"spring",stiffness:550,damping:it===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(it,{keyframes:g})=>g.length>2?keyframesTransition:transformProps.has(it)?it.startsWith("scale")?criticallyDampedSpring(g[1]):underDampedSpring:ease;function getValueTransition(it,g){return it?it[g]||it.default||it:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull=it=>it!==null;function getFinalKeyframe(it,{repeat:g,repeatType:et="loop"},ot){const ut=it.filter(isNotNull),ct=g&&et!=="loop"&&g%2===1?0:ut.length-1;return!ct||ot===void 0?ut[ct]:ot}const noop$3=it=>it;let invariant$1=noop$3;function createRenderStep(it){let g=new Set,et=new Set,ot=!1,ut=!1;const ct=new WeakSet;let dt={delta:0,timestamp:0,isProcessing:!1};function ft(kt){ct.has(kt)&&(St.schedule(kt),it()),kt(dt)}const St={schedule:(kt,Tt=!1,Rt=!1)=>{const jt=Rt&&ot?g:et;return Tt&&ct.add(kt),jt.has(kt)||jt.add(kt),kt},cancel:kt=>{et.delete(kt),ct.delete(kt)},process:kt=>{if(dt=kt,ot){ut=!0;return}ot=!0,[g,et]=[et,g],g.forEach(ft),g.clear(),ot=!1,ut&&(ut=!1,St.process(kt))}};return St}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(it,g){let et=!1,ot=!0;const ut={delta:0,timestamp:0,isProcessing:!1},ct=()=>et=!0,dt=stepsOrder.reduce((Ut,Kt)=>(Ut[Kt]=createRenderStep(ct),Ut),{}),{read:ft,resolveKeyframes:St,update:kt,preRender:Tt,render:Rt,postRender:Ft}=dt,jt=()=>{const Ut=performance.now();et=!1,ut.delta=ot?1e3/60:Math.max(Math.min(Ut-ut.timestamp,maxElapsed),1),ut.timestamp=Ut,ut.isProcessing=!0,ft.process(ut),St.process(ut),kt.process(ut),Tt.process(ut),Rt.process(ut),Ft.process(ut),ut.isProcessing=!1,et&&g&&(ot=!1,it(jt))},Bt=()=>{et=!0,ot=!0,ut.isProcessing||it(jt)};return{schedule:stepsOrder.reduce((Ut,Kt)=>{const Yt=dt[Kt];return Ut[Kt]=(er,ar=!1,ir=!1)=>(et||Bt(),Yt.schedule(er,ar,ir)),Ut},{}),cancel:Ut=>{for(let Kt=0;Kt<stepsOrder.length;Kt++)dt[stepsOrder[Kt]].cancel(Ut)},state:ut,steps:dt}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$3,!0),calcBezier=(it,g,et)=>(((1-3*et+3*g)*it+(3*et-6*g))*it+3*g)*it,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(it,g,et,ot,ut){let ct,dt,ft=0;do dt=g+(et-g)/2,ct=calcBezier(dt,ot,ut)-it,ct>0?et=dt:g=dt;while(Math.abs(ct)>subdivisionPrecision&&++ft<subdivisionMaxIterations);return dt}function cubicBezier(it,g,et,ot){if(it===g&&et===ot)return noop$3;const ut=ct=>binarySubdivide(ct,0,1,it,et);return ct=>ct===0||ct===1?ct:calcBezier(ut(ct),g,ot)}const mirrorEasing=it=>g=>g<=.5?it(2*g)/2:(2-it(2*(1-g)))/2,reverseEasing=it=>g=>1-it(1-g),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=it=>(it*=2)<1?.5*backIn(it):.5*(2-Math.pow(2,-10*(it-1))),circIn=it=>1-Math.sin(Math.acos(it)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=it=>/^0[^.\s]+$/u.test(it);function isNone(it){return typeof it=="number"?it===0:it!==null?it==="none"||it==="0"||isZeroValueString(it):!0}const isNumericalString=it=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(it),checkStringStartsWith=it=>g=>typeof g=="string"&&g.startsWith(it),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=it=>startsAsVariableToken(it)?singleCssVariableRegex.test(it.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(it){const g=splitCSSVariableRegex.exec(it);if(!g)return[,];const[,et,ot,ut]=g;return[`--${et??ot}`,ut]}function getVariableValue(it,g,et=1){const[ot,ut]=parseCSSVariable(it);if(!ot)return;const ct=window.getComputedStyle(g).getPropertyValue(ot);if(ct){const dt=ct.trim();return isNumericalString(dt)?parseFloat(dt):dt}return isCSSVariableToken(ut)?getVariableValue(ut,g,et+1):ut}const clamp=(it,g,et)=>et>g?g:et<it?it:et,number={test:it=>typeof it=="number",parse:parseFloat,transform:it=>it},alpha$1={...number,transform:it=>clamp(0,1,it)},scale$1={...number,default:1},createUnitType=it=>({test:g=>typeof g=="string"&&g.endsWith(it)&&g.split(" ").length===1,parse:parseFloat,transform:g=>`${g}${it}`}),degrees$1=createUnitType("deg"),percent=createUnitType("%"),px$1=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:it=>percent.parse(it)/100,transform:it=>percent.transform(it*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=it=>it===number||it===px$1,getPosFromMatrix=(it,g)=>parseFloat(it.split(", ")[g]),getTranslateFromMatrix=(it,g)=>(et,{transform:ot})=>{if(ot==="none"||!ot)return 0;const ut=ot.match(/^matrix3d\((.+)\)$/u);if(ut)return getPosFromMatrix(ut[1],g);{const ct=ot.match(/^matrix\((.+)\)$/u);return ct?getPosFromMatrix(ct[1],it):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(it=>!transformKeys.has(it));function removeNonTranslationalTransform(it){const g=[];return nonTranslationalTransformKeys.forEach(et=>{const ot=it.getValue(et);ot!==void 0&&(g.push([et,ot.get()]),ot.set(et.startsWith("scale")?1:0))}),g}const positionalValues={width:({x:it},{paddingLeft:g="0",paddingRight:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),height:({y:it},{paddingTop:g="0",paddingBottom:et="0"})=>it.max-it.min-parseFloat(g)-parseFloat(et),top:(it,{top:g})=>parseFloat(g),left:(it,{left:g})=>parseFloat(g),bottom:({y:it},{top:g})=>parseFloat(g)+(it.max-it.min),right:({x:it},{left:g})=>parseFloat(g)+(it.max-it.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=it=>g=>g.test(it),auto={test:it=>it==="auto",parse:it=>it},dimensionValueTypes=[number,px$1,percent,degrees$1,vw,vh,auto],findDimensionValueType=it=>dimensionValueTypes.find(testValueType(it)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const it=Array.from(toResolve).filter(ot=>ot.needsMeasurement),g=new Set(it.map(ot=>ot.element)),et=new Map;g.forEach(ot=>{const ut=removeNonTranslationalTransform(ot);ut.length&&(et.set(ot,ut),ot.render())}),it.forEach(ot=>ot.measureInitialState()),g.forEach(ot=>{ot.render();const ut=et.get(ot);ut&&ut.forEach(([ct,dt])=>{var ft;(ft=ot.getValue(ct))===null||ft===void 0||ft.set(dt)})}),it.forEach(ot=>ot.measureEndState()),it.forEach(ot=>{ot.suspendedScrollY!==void 0&&window.scrollTo(0,ot.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(it=>it.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(it=>{it.readKeyframes(),it.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(g,et,ot,ut,ct,dt=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...g],this.onComplete=et,this.name=ot,this.motionValue=ut,this.element=ct,this.isAsync=dt}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:g,name:et,element:ot,motionValue:ut}=this;for(let ct=0;ct<g.length;ct++)if(g[ct]===null)if(ct===0){const dt=ut==null?void 0:ut.get(),ft=g[g.length-1];if(dt!==void 0)g[0]=dt;else if(ot&&et){const St=ot.readValue(et,ft);St!=null&&(g[0]=St)}g[0]===void 0&&(g[0]=ft),ut&&dt===void 0&&ut.set(g[0])}else g[ct]=g[ct-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=it=>Math.round(it*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(it){return it==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(it,g)=>et=>!!(typeof et=="string"&&singleColorRegex.test(et)&&et.startsWith(it)||g&&!isNullish(et)&&Object.prototype.hasOwnProperty.call(et,g)),splitColor=(it,g,et)=>ot=>{if(typeof ot!="string")return ot;const[ut,ct,dt,ft]=ot.match(floatRegex);return{[it]:parseFloat(ut),[g]:parseFloat(ct),[et]:parseFloat(dt),alpha:ft!==void 0?parseFloat(ft):1}},clampRgbUnit=it=>clamp(0,255,it),rgbUnit={...number,transform:it=>Math.round(clampRgbUnit(it))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:it,green:g,blue:et,alpha:ot=1})=>"rgba("+rgbUnit.transform(it)+", "+rgbUnit.transform(g)+", "+rgbUnit.transform(et)+", "+sanitize(alpha$1.transform(ot))+")"};function parseHex(it){let g="",et="",ot="",ut="";return it.length>5?(g=it.substring(1,3),et=it.substring(3,5),ot=it.substring(5,7),ut=it.substring(7,9)):(g=it.substring(1,2),et=it.substring(2,3),ot=it.substring(3,4),ut=it.substring(4,5),g+=g,et+=et,ot+=ot,ut+=ut),{red:parseInt(g,16),green:parseInt(et,16),blue:parseInt(ot,16),alpha:ut?parseInt(ut,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:it,saturation:g,lightness:et,alpha:ot=1})=>"hsla("+Math.round(it)+", "+percent.transform(sanitize(g))+", "+percent.transform(sanitize(et))+", "+sanitize(alpha$1.transform(ot))+")"},color={test:it=>rgba.test(it)||hex.test(it)||hsla.test(it),parse:it=>rgba.test(it)?rgba.parse(it):hsla.test(it)?hsla.parse(it):hex.parse(it),transform:it=>typeof it=="string"?it:it.hasOwnProperty("red")?rgba.transform(it):hsla.transform(it)},colorRegex$1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(it){var g,et;return isNaN(it)&&typeof it=="string"&&(((g=it.match(floatRegex))===null||g===void 0?void 0:g.length)||0)+(((et=it.match(colorRegex$1))===null||et===void 0?void 0:et.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(it){const g=it.toString(),et=[],ot={color:[],number:[],var:[]},ut=[];let ct=0;const ft=g.replace(complexRegex,St=>(color.test(St)?(ot.color.push(ct),ut.push(COLOR_TOKEN),et.push(color.parse(St))):St.startsWith(VAR_FUNCTION_TOKEN)?(ot.var.push(ct),ut.push(VAR_TOKEN),et.push(St)):(ot.number.push(ct),ut.push(NUMBER_TOKEN),et.push(parseFloat(St))),++ct,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:et,split:ft,indexes:ot,types:ut}}function parseComplexValue(it){return analyseComplexValue(it).values}function createTransformer(it){const{split:g,types:et}=analyseComplexValue(it),ot=g.length;return ut=>{let ct="";for(let dt=0;dt<ot;dt++)if(ct+=g[dt],ut[dt]!==void 0){const ft=et[dt];ft===NUMBER_TOKEN?ct+=sanitize(ut[dt]):ft===COLOR_TOKEN?ct+=color.transform(ut[dt]):ct+=ut[dt]}return ct}}const convertNumbersToZero=it=>typeof it=="number"?0:it;function getAnimatableNone$1(it){const g=parseComplexValue(it);return createTransformer(it)(g.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(it){const[g,et]=it.slice(0,-1).split("(");if(g==="drop-shadow")return it;const[ot]=et.match(floatRegex)||[];if(!ot)return it;const ut=et.replace(ot,"");let ct=maxDefaults.has(g)?1:0;return ot!==et&&(ct*=100),g+"("+ct+ut+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:it=>{const g=it.match(functionRegex);return g?g.map(applyDefaultFilter).join(" "):it}},browserNumberValueTypes={borderWidth:px$1,borderTopWidth:px$1,borderRightWidth:px$1,borderBottomWidth:px$1,borderLeftWidth:px$1,borderRadius:px$1,radius:px$1,borderTopLeftRadius:px$1,borderTopRightRadius:px$1,borderBottomRightRadius:px$1,borderBottomLeftRadius:px$1,width:px$1,maxWidth:px$1,height:px$1,maxHeight:px$1,top:px$1,right:px$1,bottom:px$1,left:px$1,padding:px$1,paddingTop:px$1,paddingRight:px$1,paddingBottom:px$1,paddingLeft:px$1,margin:px$1,marginTop:px$1,marginRight:px$1,marginBottom:px$1,marginLeft:px$1,backgroundPositionX:px$1,backgroundPositionY:px$1},transformValueTypes={rotate:degrees$1,rotateX:degrees$1,rotateY:degrees$1,rotateZ:degrees$1,scale:scale$1,scaleX:scale$1,scaleY:scale$1,scaleZ:scale$1,skew:degrees$1,skewX:degrees$1,skewY:degrees$1,distance:px$1,translateX:px$1,translateY:px$1,translateZ:px$1,x:px$1,y:px$1,z:px$1,perspective:px$1,transformPerspective:px$1,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px$1},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px$1,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=it=>defaultValueTypes[it];function getAnimatableNone(it,g){let et=getDefaultValueType(it);return et!==filter&&(et=complex),et.getAnimatableNone?et.getAnimatableNone(g):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(it,g,et){let ot=0,ut;for(;ot<it.length&&!ut;){const ct=it[ot];typeof ct=="string"&&!invalidTemplates.has(ct)&&analyseComplexValue(ct).values.length&&(ut=it[ot]),ot++}if(ut&&et)for(const ct of g)it[ct]=getAnimatableNone(et,ut)}class DOMKeyframesResolver extends KeyframeResolver{constructor(g,et,ot,ut,ct){super(g,et,ot,ut,ct,!0)}readKeyframes(){const{unresolvedKeyframes:g,element:et,name:ot}=this;if(!et||!et.current)return;super.readKeyframes();for(let St=0;St<g.length;St++){let kt=g[St];if(typeof kt=="string"&&(kt=kt.trim(),isCSSVariableToken(kt))){const Tt=getVariableValue(kt,et.current);Tt!==void 0&&(g[St]=Tt),St===g.length-1&&(this.finalKeyframe=kt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(ot)||g.length!==2)return;const[ut,ct]=g,dt=findDimensionValueType(ut),ft=findDimensionValueType(ct);if(dt!==ft)if(isNumOrPxType(dt)&&isNumOrPxType(ft))for(let St=0;St<g.length;St++){const kt=g[St];typeof kt=="string"&&(g[St]=parseFloat(kt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:g,name:et}=this,ot=[];for(let ut=0;ut<g.length;ut++)isNone(g[ut])&&ot.push(ut);ot.length&&makeNoneKeyframesAnimatable(g,ot,et)}measureInitialState(){const{element:g,unresolvedKeyframes:et,name:ot}=this;if(!g||!g.current)return;ot==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[ot](g.measureViewportBox(),window.getComputedStyle(g.current)),et[0]=this.measuredOrigin;const ut=et[et.length-1];ut!==void 0&&g.getValue(ot,ut).jump(ut,!1)}measureEndState(){var g;const{element:et,name:ot,unresolvedKeyframes:ut}=this;if(!et||!et.current)return;const ct=et.getValue(ot);ct&&ct.jump(this.measuredOrigin,!1);const dt=ut.length-1,ft=ut[dt];ut[dt]=positionalValues[ot](et.measureViewportBox(),window.getComputedStyle(et.current)),ft!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=ft),!((g=this.removedTransforms)===null||g===void 0)&&g.length&&this.removedTransforms.forEach(([St,kt])=>{et.getValue(St).set(kt)}),this.resolveNoneKeyframes()}}function isGenerator(it){return typeof it=="function"}let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:it=>{now$1=it,queueMicrotask(clearTime)}},isAnimatable=(it,g)=>g==="zIndex"?!1:!!(typeof it=="number"||Array.isArray(it)||typeof it=="string"&&(complex.test(it)||it==="0")&&!it.startsWith("url("));function hasKeyframesChanged(it){const g=it[0];if(it.length===1)return!0;for(let et=0;et<it.length;et++)if(it[et]!==g)return!0}function canAnimate(it,g,et,ot){const ut=it[0];if(ut===null)return!1;if(g==="display"||g==="visibility")return!0;const ct=it[it.length-1],dt=isAnimatable(ut,g),ft=isAnimatable(ct,g);return!dt||!ft?!1:hasKeyframesChanged(it)||(et==="spring"||isGenerator(et))&&ot}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:g=!0,delay:et=0,type:ot="keyframes",repeat:ut=0,repeatDelay:ct=0,repeatType:dt="loop",...ft}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:g,delay:et,type:ot,repeat:ut,repeatDelay:ct,repeatType:dt,...ft},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(g,et){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:ot,type:ut,velocity:ct,delay:dt,onComplete:ft,onUpdate:St,isGenerator:kt}=this.options;if(!kt&&!canAnimate(g,ot,ut,ct))if(dt)this.options.duration=0;else{St==null||St(getFinalKeyframe(g,this.options,et)),ft==null||ft(),this.resolveFinishedPromise();return}const Tt=this.initPlayback(g,et);Tt!==!1&&(this._resolved={keyframes:g,finalKeyframe:et,...Tt},this.onPostResolved())}onPostResolved(){}then(g,et){return this.currentFinishedPromise.then(g,et)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(g=>{this.resolveFinishedPromise=g})}}const progress=(it,g,et)=>{const ot=g-it;return ot===0?1:(et-it)/ot},generateLinearEasing=(it,g,et=10)=>{let ot="";const ut=Math.max(Math.round(g/et),2);for(let ct=0;ct<ut;ct++)ot+=it(progress(0,ut-1,ct))+", ";return`linear(${ot.substring(0,ot.length-2)})`};function velocityPerSecond(it,g){return g?it*(1e3/g):0}const velocitySampleDuration=5;function calcGeneratorVelocity(it,g,et){const ot=Math.max(g-velocitySampleDuration,0);return velocityPerSecond(et-it(ot),g-ot)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:it=springDefaults.duration,bounce:g=springDefaults.bounce,velocity:et=springDefaults.velocity,mass:ot=springDefaults.mass}){let ut,ct,dt=1-g;dt=clamp(springDefaults.minDamping,springDefaults.maxDamping,dt),it=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(it)),dt<1?(ut=kt=>{const Tt=kt*dt,Rt=Tt*it,Ft=Tt-et,jt=calcAngularFreq(kt,dt),Bt=Math.exp(-Rt);return safeMin-Ft/jt*Bt},ct=kt=>{const Rt=kt*dt*it,Ft=Rt*et+et,jt=Math.pow(dt,2)*Math.pow(kt,2)*it,Bt=Math.exp(-Rt),zt=calcAngularFreq(Math.pow(kt,2),dt);return(-ut(kt)+safeMin>0?-1:1)*((Ft-jt)*Bt)/zt}):(ut=kt=>{const Tt=Math.exp(-kt*it),Rt=(kt-et)*it+1;return-safeMin+Tt*Rt},ct=kt=>{const Tt=Math.exp(-kt*it),Rt=(et-kt)*(it*it);return Tt*Rt});const ft=5/it,St=approximateRoot(ut,ct,ft);if(it=secondsToMilliseconds(it),isNaN(St))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:it};{const kt=Math.pow(St,2)*ot;return{stiffness:kt,damping:dt*2*Math.sqrt(ot*kt),duration:it}}}const rootIterations=12;function approximateRoot(it,g,et){let ot=et;for(let ut=1;ut<rootIterations;ut++)ot=ot-it(ot)/g(ot);return ot}function calcAngularFreq(it,g){return it*Math.sqrt(1-g*g)}const maxGeneratorDuration=2e4;function calcGeneratorDuration(it){let g=0;const et=50;let ot=it.next(g);for(;!ot.done&&g<maxGeneratorDuration;)g+=et,ot=it.next(g);return g>=maxGeneratorDuration?1/0:g}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(it,g){return g.some(et=>it[et]!==void 0)}function getSpringOptions(it){let g={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...it};if(!isSpringType(it,physicsKeys)&&isSpringType(it,durationKeys))if(it.visualDuration){const et=it.visualDuration,ot=2*Math.PI/(et*1.2),ut=ot*ot,ct=2*clamp(.05,1,1-it.bounce)*Math.sqrt(ut);g={...g,mass:springDefaults.mass,stiffness:ut,damping:ct}}else{const et=findSpring(it);g={...g,...et,mass:springDefaults.mass},g.isResolvedFromDuration=!0}return g}function spring(it=springDefaults.visualDuration,g=springDefaults.bounce){const et=typeof it!="object"?{visualDuration:it,keyframes:[0,1],bounce:g}:it;let{restSpeed:ot,restDelta:ut}=et;const ct=et.keyframes[0],dt=et.keyframes[et.keyframes.length-1],ft={done:!1,value:ct},{stiffness:St,damping:kt,mass:Tt,duration:Rt,velocity:Ft,isResolvedFromDuration:jt}=getSpringOptions({...et,velocity:-millisecondsToSeconds(et.velocity||0)}),Bt=Ft||0,zt=kt/(2*Math.sqrt(St*Tt)),Ht=dt-ct,Ut=millisecondsToSeconds(Math.sqrt(St/Tt)),Kt=Math.abs(Ht)<5;ot||(ot=Kt?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),ut||(ut=Kt?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Yt;if(zt<1){const ar=calcAngularFreq(Ut,zt);Yt=ir=>{const lr=Math.exp(-zt*Ut*ir);return dt-lr*((Bt+zt*Ut*Ht)/ar*Math.sin(ar*ir)+Ht*Math.cos(ar*ir))}}else if(zt===1)Yt=ar=>dt-Math.exp(-Ut*ar)*(Ht+(Bt+Ut*Ht)*ar);else{const ar=Ut*Math.sqrt(zt*zt-1);Yt=ir=>{const lr=Math.exp(-zt*Ut*ir),cr=Math.min(ar*ir,300);return dt-lr*((Bt+zt*Ut*Ht)*Math.sinh(cr)+ar*Ht*Math.cosh(cr))/ar}}const er={calculatedDuration:jt&&Rt||null,next:ar=>{const ir=Yt(ar);if(jt)ft.done=ar>=Rt;else{let lr=0;zt<1&&(lr=ar===0?secondsToMilliseconds(Bt):calcGeneratorVelocity(Yt,ar,ir));const cr=Math.abs(lr)<=ot,vr=Math.abs(dt-ir)<=ut;ft.done=cr&&vr}return ft.value=ft.done?dt:ir,ft},toString:()=>{const ar=Math.min(calcGeneratorDuration(er),maxGeneratorDuration),ir=generateLinearEasing(lr=>er.next(ar*lr).value,ar,30);return ar+"ms "+ir}};return er}function inertia({keyframes:it,velocity:g=0,power:et=.8,timeConstant:ot=325,bounceDamping:ut=10,bounceStiffness:ct=500,modifyTarget:dt,min:ft,max:St,restDelta:kt=.5,restSpeed:Tt}){const Rt=it[0],Ft={done:!1,value:Rt},jt=cr=>ft!==void 0&&cr<ft||St!==void 0&&cr>St,Bt=cr=>ft===void 0?St:St===void 0||Math.abs(ft-cr)<Math.abs(St-cr)?ft:St;let zt=et*g;const Ht=Rt+zt,Ut=dt===void 0?Ht:dt(Ht);Ut!==Ht&&(zt=Ut-Rt);const Kt=cr=>-zt*Math.exp(-cr/ot),Yt=cr=>Ut+Kt(cr),er=cr=>{const vr=Kt(cr),xr=Yt(cr);Ft.done=Math.abs(vr)<=kt,Ft.value=Ft.done?Ut:xr};let ar,ir;const lr=cr=>{jt(Ft.value)&&(ar=cr,ir=spring({keyframes:[Ft.value,Bt(Ft.value)],velocity:calcGeneratorVelocity(Yt,cr,Ft.value),damping:ut,stiffness:ct,restDelta:kt,restSpeed:Tt}))};return lr(0),{calculatedDuration:null,next:cr=>{let vr=!1;return!ir&&ar===void 0&&(vr=!0,er(cr),lr(cr)),ar!==void 0&&cr>=ar?ir.next(cr-ar):(!vr&&er(cr),Ft)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=it=>Array.isArray(it)&&typeof it[0]!="number",isBezierDefinition=it=>Array.isArray(it)&&typeof it[0]=="number",easingLookup={linear:noop$3,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=it=>{if(isBezierDefinition(it)){invariant$1(it.length===4);const[g,et,ot,ut]=it;return cubicBezier(g,et,ot,ut)}else if(typeof it=="string")return easingLookup[it];return it},combineFunctions=(it,g)=>et=>g(it(et)),pipe=(...it)=>it.reduce(combineFunctions),mixNumber$1=(it,g,et)=>it+(g-it)*et;function hueToRgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslaToRgba({hue:it,saturation:g,lightness:et,alpha:ot}){it/=360,g/=100,et/=100;let ut=0,ct=0,dt=0;if(!g)ut=ct=dt=et;else{const ft=et<.5?et*(1+g):et+g-et*g,St=2*et-ft;ut=hueToRgb(St,ft,it+1/3),ct=hueToRgb(St,ft,it),dt=hueToRgb(St,ft,it-1/3)}return{red:Math.round(ut*255),green:Math.round(ct*255),blue:Math.round(dt*255),alpha:ot}}function mixImmediate(it,g){return et=>et>0?g:it}const mixLinearColor=(it,g,et)=>{const ot=it*it,ut=et*(g*g-ot)+ot;return ut<0?0:Math.sqrt(ut)},colorTypes=[hex,rgba,hsla],getColorType=it=>colorTypes.find(g=>g.test(it));function asRGBA(it){const g=getColorType(it);if(!g)return!1;let et=g.parse(it);return g===hsla&&(et=hslaToRgba(et)),et}const mixColor=(it,g)=>{const et=asRGBA(it),ot=asRGBA(g);if(!et||!ot)return mixImmediate(it,g);const ut={...et};return ct=>(ut.red=mixLinearColor(et.red,ot.red,ct),ut.green=mixLinearColor(et.green,ot.green,ct),ut.blue=mixLinearColor(et.blue,ot.blue,ct),ut.alpha=mixNumber$1(et.alpha,ot.alpha,ct),rgba.transform(ut))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(it,g){return invisibleValues.has(it)?et=>et<=0?it:g:et=>et>=1?g:it}function mixNumber(it,g){return et=>mixNumber$1(it,g,et)}function getMixer(it){return typeof it=="number"?mixNumber:typeof it=="string"?isCSSVariableToken(it)?mixImmediate:color.test(it)?mixColor:mixComplex:Array.isArray(it)?mixArray:typeof it=="object"?color.test(it)?mixColor:mixObject:mixImmediate}function mixArray(it,g){const et=[...it],ot=et.length,ut=it.map((ct,dt)=>getMixer(ct)(ct,g[dt]));return ct=>{for(let dt=0;dt<ot;dt++)et[dt]=ut[dt](ct);return et}}function mixObject(it,g){const et={...it,...g},ot={};for(const ut in et)it[ut]!==void 0&&g[ut]!==void 0&&(ot[ut]=getMixer(it[ut])(it[ut],g[ut]));return ut=>{for(const ct in ot)et[ct]=ot[ct](ut);return et}}function matchOrder(it,g){var et;const ot=[],ut={color:0,var:0,number:0};for(let ct=0;ct<g.values.length;ct++){const dt=g.types[ct],ft=it.indexes[dt][ut[dt]],St=(et=it.values[ft])!==null&&et!==void 0?et:0;ot[ct]=St,ut[dt]++}return ot}const mixComplex=(it,g)=>{const et=complex.createTransformer(g),ot=analyseComplexValue(it),ut=analyseComplexValue(g);return ot.indexes.var.length===ut.indexes.var.length&&ot.indexes.color.length===ut.indexes.color.length&&ot.indexes.number.length>=ut.indexes.number.length?invisibleValues.has(it)&&!ut.values.length||invisibleValues.has(g)&&!ot.values.length?mixVisibility(it,g):pipe(mixArray(matchOrder(ot,ut),ut.values),et):mixImmediate(it,g)};function mix(it,g,et){return typeof it=="number"&&typeof g=="number"&&typeof et=="number"?mixNumber$1(it,g,et):getMixer(it)(it,g)}function createMixers(it,g,et){const ot=[],ut=et||mix,ct=it.length-1;for(let dt=0;dt<ct;dt++){let ft=ut(it[dt],it[dt+1]);if(g){const St=Array.isArray(g)?g[dt]||noop$3:g;ft=pipe(St,ft)}ot.push(ft)}return ot}function interpolate(it,g,{clamp:et=!0,ease:ot,mixer:ut}={}){const ct=it.length;if(invariant$1(ct===g.length),ct===1)return()=>g[0];if(ct===2&&it[0]===it[1])return()=>g[1];it[0]>it[ct-1]&&(it=[...it].reverse(),g=[...g].reverse());const dt=createMixers(g,ot,ut),ft=dt.length,St=kt=>{let Tt=0;if(ft>1)for(;Tt<it.length-2&&!(kt<it[Tt+1]);Tt++);const Rt=progress(it[Tt],it[Tt+1],kt);return dt[Tt](Rt)};return et?kt=>St(clamp(it[0],it[ct-1],kt)):St}function fillOffset(it,g){const et=it[it.length-1];for(let ot=1;ot<=g;ot++){const ut=progress(0,g,ot);it.push(mixNumber$1(et,1,ut))}}function defaultOffset(it){const g=[0];return fillOffset(g,it.length-1),g}function convertOffsetToTimes(it,g){return it.map(et=>et*g)}function defaultEasing(it,g){return it.map(()=>g||easeInOut).splice(0,it.length-1)}function keyframes({duration:it=300,keyframes:g,times:et,ease:ot="easeInOut"}){const ut=isEasingArray(ot)?ot.map(easingDefinitionToFunction):easingDefinitionToFunction(ot),ct={done:!1,value:g[0]},dt=convertOffsetToTimes(et&&et.length===g.length?et:defaultOffset(g),it),ft=interpolate(dt,g,{ease:Array.isArray(ut)?ut:defaultEasing(g,ut)});return{calculatedDuration:it,next:St=>(ct.value=ft(St),ct.done=St>=it,ct)}}const frameloopDriver=it=>{const g=({timestamp:et})=>it(et);return{start:()=>frame.update(g,!0),stop:()=>cancelFrame(g),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=it=>it/100;class MainThreadAnimation extends BaseAnimation{constructor(g){super(g),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:St}=this.options;St&&St()};const{name:et,motionValue:ot,element:ut,keyframes:ct}=this.options,dt=(ut==null?void 0:ut.KeyframeResolver)||KeyframeResolver,ft=(St,kt)=>this.onKeyframesResolved(St,kt);this.resolver=new dt(ct,ft,et,ot,ut),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(g){const{type:et="keyframes",repeat:ot=0,repeatDelay:ut=0,repeatType:ct,velocity:dt=0}=this.options,ft=isGenerator(et)?et:generators[et]||keyframes;let St,kt;ft!==keyframes&&typeof g[0]!="number"&&(St=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const Tt=ft({...this.options,keyframes:g});ct==="mirror"&&(kt=ft({...this.options,keyframes:[...g].reverse(),velocity:-dt})),Tt.calculatedDuration===null&&(Tt.calculatedDuration=calcGeneratorDuration(Tt));const{calculatedDuration:Rt}=Tt,Ft=Rt+ut,jt=Ft*(ot+1)-ut;return{generator:Tt,mirroredGenerator:kt,mapPercentToKeyframes:St,calculatedDuration:Rt,resolvedDuration:Ft,totalDuration:jt}}onPostResolved(){const{autoplay:g=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!g?this.pause():this.state=this.pendingPlayState}tick(g,et=!1){const{resolved:ot}=this;if(!ot){const{keyframes:cr}=this.options;return{done:!0,value:cr[cr.length-1]}}const{finalKeyframe:ut,generator:ct,mirroredGenerator:dt,mapPercentToKeyframes:ft,keyframes:St,calculatedDuration:kt,totalDuration:Tt,resolvedDuration:Rt}=ot;if(this.startTime===null)return ct.next(0);const{delay:Ft,repeat:jt,repeatType:Bt,repeatDelay:zt,onUpdate:Ht}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,g):this.speed<0&&(this.startTime=Math.min(g-Tt/this.speed,this.startTime)),et?this.currentTime=g:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(g-this.startTime)*this.speed;const Ut=this.currentTime-Ft*(this.speed>=0?1:-1),Kt=this.speed>=0?Ut<0:Ut>Tt;this.currentTime=Math.max(Ut,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Tt);let Yt=this.currentTime,er=ct;if(jt){const cr=Math.min(this.currentTime,Tt)/Rt;let vr=Math.floor(cr),xr=cr%1;!xr&&cr>=1&&(xr=1),xr===1&&vr--,vr=Math.min(vr,jt+1),!!(vr%2)&&(Bt==="reverse"?(xr=1-xr,zt&&(xr-=zt/Rt)):Bt==="mirror"&&(er=dt)),Yt=clamp(0,1,xr)*Rt}const ar=Kt?{done:!1,value:St[0]}:er.next(Yt);ft&&(ar.value=ft(ar.value));let{done:ir}=ar;!Kt&&kt!==null&&(ir=this.speed>=0?this.currentTime>=Tt:this.currentTime<=0);const lr=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ir);return lr&&ut!==void 0&&(ar.value=getFinalKeyframe(St,this.options,ut)),Ht&&Ht(ar.value),lr&&this.finish(),ar}get duration(){const{resolved:g}=this;return g?millisecondsToSeconds(g.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(g){g=secondsToMilliseconds(g),this.currentTime=g,this.holdTime!==null||this.speed===0?this.holdTime=g:this.driver&&(this.startTime=this.driver.now()-g/this.speed)}get speed(){return this.playbackSpeed}set speed(g){const et=this.playbackSpeed!==g;this.playbackSpeed=g,et&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:g=frameloopDriver,onPlay:et,startTime:ot}=this.options;this.driver||(this.driver=g(ct=>this.tick(ct))),et&&et();const ut=this.driver.now();this.holdTime!==null?this.startTime=ut-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=ut):this.startTime=ot??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var g;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(g=this.currentTime)!==null&&g!==void 0?g:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:g}=this.options;g&&g()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(g){return this.startTime=0,this.tick(g,!0)}}function animateValue(it){return new MainThreadAnimation(it)}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function memo(it){let g;return()=>(g===void 0&&(g=it()),g)}const supportsFlags={linearEasing:void 0};function memoSupports(it,g){const et=memo(it);return()=>{var ot;return(ot=supportsFlags[g])!==null&&ot!==void 0?ot:et()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(it){return!!(typeof it=="function"&&supportsLinearEasing()||!it||typeof it=="string"&&(it in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(it)||Array.isArray(it)&&it.every(isWaapiSupportedEasing))}const cubicBezierAsString=([it,g,et,ot])=>`cubic-bezier(${it}, ${g}, ${et}, ${ot})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(it,g){if(it)return typeof it=="function"&&supportsLinearEasing()?generateLinearEasing(it,g):isBezierDefinition(it)?cubicBezierAsString(it):Array.isArray(it)?it.map(et=>mapEasingToNativeEasing(et,g)||supportedWaapiEasing.easeOut):supportedWaapiEasing[it]}function startWaapiAnimation(it,g,et,{delay:ot=0,duration:ut=300,repeat:ct=0,repeatType:dt="loop",ease:ft="easeInOut",times:St}={}){const kt={[g]:et};St&&(kt.offset=St);const Tt=mapEasingToNativeEasing(ft,ut);return Array.isArray(Tt)&&(kt.easing=Tt),it.animate(kt,{delay:ot,duration:ut,easing:Array.isArray(Tt)?"linear":Tt,fill:"both",iterations:ct+1,direction:dt==="reverse"?"alternate":"normal"})}function attachTimeline(it,g){it.timeline=g,it.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(it){return isGenerator(it.type)||it.type==="spring"||!isWaapiSupportedEasing(it.ease)}function pregenerateKeyframes(it,g){const et=new MainThreadAnimation({...g,keyframes:it,repeat:0,delay:0,isGenerator:!0});let ot={done:!1,value:it[0]};const ut=[];let ct=0;for(;!ot.done&&ct<maxDuration;)ot=et.sample(ct),ut.push(ot.value),ct+=sampleDelta;return{times:void 0,keyframes:ut,duration:ct-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(it){return it in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(g){super(g);const{name:et,motionValue:ot,element:ut,keyframes:ct}=this.options;this.resolver=new DOMKeyframesResolver(ct,(dt,ft)=>this.onKeyframesResolved(dt,ft),et,ot,ut),this.resolver.scheduleResolve()}initPlayback(g,et){var ot;let{duration:ut=300,times:ct,ease:dt,type:ft,motionValue:St,name:kt,startTime:Tt}=this.options;if(!(!((ot=St.owner)===null||ot===void 0)&&ot.current))return!1;if(typeof dt=="string"&&supportsLinearEasing()&&isUnsupportedEase(dt)&&(dt=unsupportedEasingFunctions[dt]),requiresPregeneratedKeyframes(this.options)){const{onComplete:Ft,onUpdate:jt,motionValue:Bt,element:zt,...Ht}=this.options,Ut=pregenerateKeyframes(g,Ht);g=Ut.keyframes,g.length===1&&(g[1]=g[0]),ut=Ut.duration,ct=Ut.times,dt=Ut.ease,ft="keyframes"}const Rt=startWaapiAnimation(St.owner.current,kt,g,{...this.options,duration:ut,times:ct,ease:dt});return Rt.startTime=Tt??this.calcStartTime(),this.pendingTimeline?(attachTimeline(Rt,this.pendingTimeline),this.pendingTimeline=void 0):Rt.onfinish=()=>{const{onComplete:Ft}=this.options;St.set(getFinalKeyframe(g,this.options,et)),Ft&&Ft(),this.cancel(),this.resolveFinishedPromise()},{animation:Rt,duration:ut,times:ct,type:ft,ease:dt,keyframes:g}}get duration(){const{resolved:g}=this;if(!g)return 0;const{duration:et}=g;return millisecondsToSeconds(et)}get time(){const{resolved:g}=this;if(!g)return 0;const{animation:et}=g;return millisecondsToSeconds(et.currentTime||0)}set time(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.currentTime=secondsToMilliseconds(g)}get speed(){const{resolved:g}=this;if(!g)return 1;const{animation:et}=g;return et.playbackRate}set speed(g){const{resolved:et}=this;if(!et)return;const{animation:ot}=et;ot.playbackRate=g}get state(){const{resolved:g}=this;if(!g)return"idle";const{animation:et}=g;return et.playState}get startTime(){const{resolved:g}=this;if(!g)return null;const{animation:et}=g;return et.startTime}attachTimeline(g){if(!this._resolved)this.pendingTimeline=g;else{const{resolved:et}=this;if(!et)return noop$3;const{animation:ot}=et;attachTimeline(ot,g)}return noop$3}play(){if(this.isStopped)return;const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.playState==="finished"&&this.updateFinishedPromise(),et.play()}pause(){const{resolved:g}=this;if(!g)return;const{animation:et}=g;et.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:g}=this;if(!g)return;const{animation:et,keyframes:ot,duration:ut,type:ct,ease:dt,times:ft}=g;if(et.playState==="idle"||et.playState==="finished")return;if(this.time){const{motionValue:kt,onUpdate:Tt,onComplete:Rt,element:Ft,...jt}=this.options,Bt=new MainThreadAnimation({...jt,keyframes:ot,duration:ut,type:ct,ease:dt,times:ft,isGenerator:!0}),zt=secondsToMilliseconds(this.time);kt.setWithVelocity(Bt.sample(zt-sampleDelta).value,Bt.sample(zt).value,sampleDelta)}const{onStop:St}=this.options;St&&St(),this.cancel()}complete(){const{resolved:g}=this;g&&g.animation.finish()}cancel(){const{resolved:g}=this;g&&g.animation.cancel()}static supports(g){const{motionValue:et,name:ot,repeatDelay:ut,repeatType:ct,damping:dt,type:ft}=g;return supportsWaapi()&&ot&&acceleratedValues.has(ot)&&et&&et.owner&&et.owner.current instanceof HTMLElement&&!et.owner.getProps().onUpdate&&!ut&&ct!=="mirror"&&dt!==0&&ft!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(g){this.stop=()=>this.runAll("stop"),this.animations=g.filter(Boolean)}then(g,et){return Promise.all(this.animations).then(g).catch(et)}getAll(g){return this.animations[0][g]}setAll(g,et){for(let ot=0;ot<this.animations.length;ot++)this.animations[ot][g]=et}attachTimeline(g,et){const ot=this.animations.map(ut=>supportsScrollTimeline()&&ut.attachTimeline?ut.attachTimeline(g):et(ut));return()=>{ot.forEach((ut,ct)=>{ut&&ut(),this.animations[ct].stop()})}}get time(){return this.getAll("time")}set time(g){this.setAll("time",g)}get speed(){return this.getAll("speed")}set speed(g){this.setAll("speed",g)}get startTime(){return this.getAll("startTime")}get duration(){let g=0;for(let et=0;et<this.animations.length;et++)g=Math.max(g,this.animations[et].duration);return g}runAll(g){this.animations.forEach(et=>et[g]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:it,delay:g,delayChildren:et,staggerChildren:ot,staggerDirection:ut,repeat:ct,repeatType:dt,repeatDelay:ft,from:St,elapsed:kt,...Tt}){return!!Object.keys(Tt).length}const animateMotionValue=(it,g,et,ot={},ut,ct)=>dt=>{const ft=getValueTransition(ot,it)||{},St=ft.delay||ot.delay||0;let{elapsed:kt=0}=ot;kt=kt-secondsToMilliseconds(St);let Tt={keyframes:Array.isArray(et)?et:[null,et],ease:"easeOut",velocity:g.getVelocity(),...ft,delay:-kt,onUpdate:Ft=>{g.set(Ft),ft.onUpdate&&ft.onUpdate(Ft)},onComplete:()=>{dt(),ft.onComplete&&ft.onComplete()},name:it,motionValue:g,element:ct?void 0:ut};isTransitionDefined(ft)||(Tt={...Tt,...getDefaultTransition(it,Tt)}),Tt.duration&&(Tt.duration=secondsToMilliseconds(Tt.duration)),Tt.repeatDelay&&(Tt.repeatDelay=secondsToMilliseconds(Tt.repeatDelay)),Tt.from!==void 0&&(Tt.keyframes[0]=Tt.from);let Rt=!1;if((Tt.type===!1||Tt.duration===0&&!Tt.repeatDelay)&&(Tt.duration=0,Tt.delay===0&&(Rt=!0)),Rt&&!ct&&g.get()!==void 0){const Ft=getFinalKeyframe(Tt.keyframes,ft);if(Ft!==void 0)return frame.update(()=>{Tt.onUpdate(Ft),Tt.onComplete()}),new GroupPlaybackControls([])}return!ct&&AcceleratedAnimation.supports(Tt)?new AcceleratedAnimation(Tt):new MainThreadAnimation(Tt)},isCustomValue=it=>!!(it&&typeof it=="object"&&it.mix&&it.toValue),resolveFinalValueInKeyframes=it=>isKeyframesTarget(it)?it[it.length-1]||0:it;function addUniqueItem(it,g){it.indexOf(g)===-1&&it.push(g)}function removeItem(it,g){const et=it.indexOf(g);et>-1&&it.splice(et,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(g){return addUniqueItem(this.subscriptions,g),()=>removeItem(this.subscriptions,g)}notify(g,et,ot){const ut=this.subscriptions.length;if(ut)if(ut===1)this.subscriptions[0](g,et,ot);else for(let ct=0;ct<ut;ct++){const dt=this.subscriptions[ct];dt&&dt(g,et,ot)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=it=>!isNaN(parseFloat(it));class MotionValue{constructor(g,et={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(ot,ut=!0)=>{const ct=time.now();this.updatedAt!==ct&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(ot),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),ut&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(g),this.owner=et.owner}setCurrent(g){this.current=g,this.updatedAt=time.now(),this.canTrackVelocity===null&&g!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(g=this.current){this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt}onChange(g){return this.on("change",g)}on(g,et){this.events[g]||(this.events[g]=new SubscriptionManager);const ot=this.events[g].add(et);return g==="change"?()=>{ot(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:ot}clearListeners(){for(const g in this.events)this.events[g].clear()}attach(g,et){this.passiveEffect=g,this.stopPassiveEffect=et}set(g,et=!0){!et||!this.passiveEffect?this.updateAndNotify(g,et):this.passiveEffect(g,this.updateAndNotify)}setWithVelocity(g,et,ot){this.set(et),this.prev=void 0,this.prevFrameValue=g,this.prevUpdatedAt=this.updatedAt-ot}jump(g,et=!0){this.updateAndNotify(g),this.prev=g,this.prevUpdatedAt=this.prevFrameValue=void 0,et&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const g=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||g-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const et=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),et)}start(g){return this.stop(),new Promise(et=>{this.hasAnimated=!0,this.animation=g(et),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(it,g){return new MotionValue(it,g)}function setMotionValue(it,g,et){it.hasValue(g)?it.getValue(g).set(et):it.addValue(g,motionValue(et))}function setTarget(it,g){const et=resolveVariant(it,g);let{transitionEnd:ot={},transition:ut={},...ct}=et||{};ct={...ct,...ot};for(const dt in ct){const ft=resolveFinalValueInKeyframes(ct[dt]);setMotionValue(it,dt,ft)}}const camelToDash=it=>it.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(it){return it.props[optimizedAppearDataAttribute]}const isMotionValue=it=>!!(it&&it.getVelocity);function isWillChangeMotionValue(it){return!!(isMotionValue(it)&&it.add)}function addValueToWillChange(it,g){const et=it.getValue("willChange");if(isWillChangeMotionValue(et))return et.add(g)}function shouldBlockAnimation({protectedKeys:it,needsAnimating:g},et){const ot=it.hasOwnProperty(et)&&g[et]!==!0;return g[et]=!1,ot}function animateTarget(it,g,{delay:et=0,transitionOverride:ot,type:ut}={}){var ct;let{transition:dt=it.getDefaultTransition(),transitionEnd:ft,...St}=g;ot&&(dt=ot);const kt=[],Tt=ut&&it.animationState&&it.animationState.getState()[ut];for(const Rt in St){const Ft=it.getValue(Rt,(ct=it.latestValues[Rt])!==null&&ct!==void 0?ct:null),jt=St[Rt];if(jt===void 0||Tt&&shouldBlockAnimation(Tt,Rt))continue;const Bt={delay:et,...getValueTransition(dt||{},Rt)};let zt=!1;if(window.MotionHandoffAnimation){const Ut=getOptimisedAppearId(it);if(Ut){const Kt=window.MotionHandoffAnimation(Ut,Rt,frame);Kt!==null&&(Bt.startTime=Kt,zt=!0)}}addValueToWillChange(it,Rt),Ft.start(animateMotionValue(Rt,Ft,jt,it.shouldReduceMotion&&transformProps.has(Rt)?{type:!1}:Bt,it,zt));const Ht=Ft.animation;Ht&&kt.push(Ht)}return ft&&Promise.all(kt).then(()=>{frame.update(()=>{ft&&setTarget(it,ft)})}),kt}function animateVariant(it,g,et={}){var ot;const ut=resolveVariant(it,g,et.type==="exit"?(ot=it.presenceContext)===null||ot===void 0?void 0:ot.custom:void 0);let{transition:ct=it.getDefaultTransition()||{}}=ut||{};et.transitionOverride&&(ct=et.transitionOverride);const dt=ut?()=>Promise.all(animateTarget(it,ut,et)):()=>Promise.resolve(),ft=it.variantChildren&&it.variantChildren.size?(kt=0)=>{const{delayChildren:Tt=0,staggerChildren:Rt,staggerDirection:Ft}=ct;return animateChildren(it,g,Tt+kt,Rt,Ft,et)}:()=>Promise.resolve(),{when:St}=ct;if(St){const[kt,Tt]=St==="beforeChildren"?[dt,ft]:[ft,dt];return kt().then(()=>Tt())}else return Promise.all([dt(),ft(et.delay)])}function animateChildren(it,g,et=0,ot=0,ut=1,ct){const dt=[],ft=(it.variantChildren.size-1)*ot,St=ut===1?(kt=0)=>kt*ot:(kt=0)=>ft-kt*ot;return Array.from(it.variantChildren).sort(sortByTreeOrder).forEach((kt,Tt)=>{kt.notify("AnimationStart",g),dt.push(animateVariant(kt,g,{...ct,delay:et+St(Tt)}).then(()=>kt.notify("AnimationComplete",g)))}),Promise.all(dt)}function sortByTreeOrder(it,g){return it.sortNodePosition(g)}function animateVisualElement(it,g,et={}){it.notify("AnimationStart",g);let ot;if(Array.isArray(g)){const ut=g.map(ct=>animateVariant(it,ct,et));ot=Promise.all(ut)}else if(typeof g=="string")ot=animateVariant(it,g,et);else{const ut=typeof g=="function"?resolveVariant(it,g,et.custom):g;ot=Promise.all(animateTarget(it,ut,et))}return ot.then(()=>{it.notify("AnimationComplete",g)})}const numVariantProps=variantProps.length;function getVariantContext(it){if(!it)return;if(!it.isControllingVariants){const et=it.parent?getVariantContext(it.parent)||{}:{};return it.props.initial!==void 0&&(et.initial=it.props.initial),et}const g={};for(let et=0;et<numVariantProps;et++){const ot=variantProps[et],ut=it.props[ot];(isVariantLabel(ut)||ut===!1)&&(g[ot]=ut)}return g}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(it){return g=>Promise.all(g.map(({animation:et,options:ot})=>animateVisualElement(it,et,ot)))}function createAnimationState(it){let g=animateList(it),et=createState(),ot=!0;const ut=St=>(kt,Tt)=>{var Rt;const Ft=resolveVariant(it,Tt,St==="exit"?(Rt=it.presenceContext)===null||Rt===void 0?void 0:Rt.custom:void 0);if(Ft){const{transition:jt,transitionEnd:Bt,...zt}=Ft;kt={...kt,...zt,...Bt}}return kt};function ct(St){g=St(it)}function dt(St){const{props:kt}=it,Tt=getVariantContext(it.parent)||{},Rt=[],Ft=new Set;let jt={},Bt=1/0;for(let Ht=0;Ht<numAnimationTypes;Ht++){const Ut=reversePriorityOrder[Ht],Kt=et[Ut],Yt=kt[Ut]!==void 0?kt[Ut]:Tt[Ut],er=isVariantLabel(Yt),ar=Ut===St?Kt.isActive:null;ar===!1&&(Bt=Ht);let ir=Yt===Tt[Ut]&&Yt!==kt[Ut]&&er;if(ir&&ot&&it.manuallyAnimateOnMount&&(ir=!1),Kt.protectedKeys={...jt},!Kt.isActive&&ar===null||!Yt&&!Kt.prevProp||isAnimationControls(Yt)||typeof Yt=="boolean")continue;const lr=checkVariantsDidChange(Kt.prevProp,Yt);let cr=lr||Ut===St&&Kt.isActive&&!ir&&er||Ht>Bt&&er,vr=!1;const xr=Array.isArray(Yt)?Yt:[Yt];let yr=xr.reduce(ut(Ut),{});ar===!1&&(yr={});const{prevResolvedValues:Sr={}}=Kt,kr={...Sr,...yr},Pr=Tr=>{cr=!0,Ft.has(Tr)&&(vr=!0,Ft.delete(Tr)),Kt.needsAnimating[Tr]=!0;const mr=it.getValue(Tr);mr&&(mr.liveStyle=!1)};for(const Tr in kr){const mr=yr[Tr],Er=Sr[Tr];if(jt.hasOwnProperty(Tr))continue;let Dr=!1;isKeyframesTarget(mr)&&isKeyframesTarget(Er)?Dr=!shallowCompare(mr,Er):Dr=mr!==Er,Dr?mr!=null?Pr(Tr):Ft.add(Tr):mr!==void 0&&Ft.has(Tr)?Pr(Tr):Kt.protectedKeys[Tr]=!0}Kt.prevProp=Yt,Kt.prevResolvedValues=yr,Kt.isActive&&(jt={...jt,...yr}),ot&&it.blockInitialAnimation&&(cr=!1),cr&&(!(ir&&lr)||vr)&&Rt.push(...xr.map(Tr=>({animation:Tr,options:{type:Ut}})))}if(Ft.size){const Ht={};Ft.forEach(Ut=>{const Kt=it.getBaseTarget(Ut),Yt=it.getValue(Ut);Yt&&(Yt.liveStyle=!0),Ht[Ut]=Kt??null}),Rt.push({animation:Ht})}let zt=!!Rt.length;return ot&&(kt.initial===!1||kt.initial===kt.animate)&&!it.manuallyAnimateOnMount&&(zt=!1),ot=!1,zt?g(Rt):Promise.resolve()}function ft(St,kt){var Tt;if(et[St].isActive===kt)return Promise.resolve();(Tt=it.variantChildren)===null||Tt===void 0||Tt.forEach(Ft=>{var jt;return(jt=Ft.animationState)===null||jt===void 0?void 0:jt.setActive(St,kt)}),et[St].isActive=kt;const Rt=dt(St);for(const Ft in et)et[Ft].protectedKeys={};return Rt}return{animateChanges:dt,setActive:ft,setAnimateFunction:ct,getState:()=>et,reset:()=>{et=createState(),ot=!0}}}function checkVariantsDidChange(it,g){return typeof g=="string"?g!==it:Array.isArray(g)?!shallowCompare(g,it):!1}function createTypeState(it=!1){return{isActive:it,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(g){this.isMounted=!1,this.node=g}update(){}}class AnimationFeature extends Feature{constructor(g){super(g),g.animationState||(g.animationState=createAnimationState(g))}updateAnimationControlsSubscription(){const{animate:g}=this.node.getProps();isAnimationControls(g)&&(this.unmountControls=g.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:g}=this.node.getProps(),{animate:et}=this.node.prevProps||{};g!==et&&this.updateAnimationControlsSubscription()}unmount(){var g;this.node.animationState.reset(),(g=this.unmountControls)===null||g===void 0||g.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:g,onExitComplete:et}=this.node.presenceContext,{isPresent:ot}=this.node.prevPresenceContext||{};if(!this.node.animationState||g===ot)return;const ut=this.node.animationState.setActive("exit",!g);et&&!g&&ut.then(()=>et(this.id))}mount(){const{register:g}=this.node.presenceContext||{};g&&(this.unmount=g(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(it,g,et){var ot;if(it instanceof Element)return[it];if(typeof it=="string"){let ut=document;g&&(ut=g.current);const ct=(ot=et==null?void 0:et[it])!==null&&ot!==void 0?ot:ut.querySelectorAll(it);return ct?Array.from(ct):[]}return Array.from(it)}function setupGesture(it,g){const et=resolveElements(it),ot=new AbortController,ut={passive:!0,...g,signal:ot.signal};return[et,ut,()=>ot.abort()]}function filterEvents$1(it){return g=>{g.pointerType==="touch"||isDragActive()||it(g)}}function hover(it,g,et={}){const[ot,ut,ct]=setupGesture(it,et),dt=filterEvents$1(ft=>{const{target:St}=ft,kt=g(ft);if(!kt||!St)return;const Tt=filterEvents$1(Rt=>{kt(Rt),St.removeEventListener("pointerleave",Tt)});St.addEventListener("pointerleave",Tt,ut)});return ot.forEach(ft=>{ft.addEventListener("pointerenter",dt,ut)}),ct}const isPrimaryPointer=it=>it.pointerType==="mouse"?typeof it.button!="number"||it.button<=0:it.isPrimary!==!1,isPressing=new WeakSet;function filterEvents(it){return g=>{g.key==="Enter"&&it(g)}}function firePointerEvent(it,g){it.dispatchEvent(new PointerEvent("pointer"+g,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(it,g)=>{const et=it.currentTarget;if(!et)return;const ot=filterEvents(()=>{if(isPressing.has(et))return;firePointerEvent(et,"down");const ut=filterEvents(()=>{firePointerEvent(et,"up")}),ct=()=>firePointerEvent(et,"cancel");et.addEventListener("keyup",ut,g),et.addEventListener("blur",ct,g)});et.addEventListener("keydown",ot,g),et.addEventListener("blur",()=>et.removeEventListener("keydown",ot),g)},focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(it){return focusableElements.has(it.tagName)||it.tabIndex!==-1}const isNodeOrChild=(it,g)=>g?it===g?!0:isNodeOrChild(it,g.parentElement):!1;function isValidPressEvent(it){return isPrimaryPointer(it)&&!isDragActive()}function press(it,g,et={}){const[ot,ut,ct]=setupGesture(it,et),dt=ft=>{const St=ft.currentTarget;if(!isValidPressEvent(ft)||isPressing.has(St))return;isPressing.add(St);const kt=g(ft),Tt=(jt,Bt)=>{window.removeEventListener("pointerup",Rt),window.removeEventListener("pointercancel",Ft),!(!isValidPressEvent(jt)||!isPressing.has(St))&&(isPressing.delete(St),kt&&kt(jt,{success:Bt}))},Rt=jt=>{Tt(jt,et.useGlobalTarget||isNodeOrChild(St,jt.target))},Ft=jt=>{Tt(jt,!1)};window.addEventListener("pointerup",Rt,ut),window.addEventListener("pointercancel",Ft,ut)};return ot.forEach(ft=>{isElementKeyboardAccessible(ft)||(ft.tabIndex=0),(et.useGlobalTarget?window:ft).addEventListener("pointerdown",dt,ut),ft.addEventListener("focus",kt=>enableKeyboardPress(kt,ut),ut)}),ct}function setDragLock(it){return it==="x"||it==="y"?isDragging[it]?null:(isDragging[it]=!0,()=>{isDragging[it]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function extractEventInfo(it){return{point:{x:it.pageX,y:it.pageY}}}const addPointerInfo=it=>g=>isPrimaryPointer(g)&&it(g,extractEventInfo(g));function addDomEvent(it,g,et,ot={passive:!0}){return it.addEventListener(g,et,ot),()=>it.removeEventListener(g,et)}function addPointerEvent(it,g,et,ot){return addDomEvent(it,g,addPointerInfo(et),ot)}const distance=(it,g)=>Math.abs(it-g);function distance2D(it,g){const et=distance(it.x,g.x),ot=distance(it.y,g.y);return Math.sqrt(et**2+ot**2)}class PanSession{constructor(g,et,{transformPagePoint:ot,contextWindow:ut,dragSnapToOrigin:ct=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Rt=getPanInfo(this.lastMoveEventInfo,this.history),Ft=this.startEvent!==null,jt=distance2D(Rt.offset,{x:0,y:0})>=3;if(!Ft&&!jt)return;const{point:Bt}=Rt,{timestamp:zt}=frameData;this.history.push({...Bt,timestamp:zt});const{onStart:Ht,onMove:Ut}=this.handlers;Ft||(Ht&&Ht(this.lastMoveEvent,Rt),this.startEvent=this.lastMoveEvent),Ut&&Ut(this.lastMoveEvent,Rt)},this.handlePointerMove=(Rt,Ft)=>{this.lastMoveEvent=Rt,this.lastMoveEventInfo=transformPoint(Ft,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Rt,Ft)=>{this.end();const{onEnd:jt,onSessionEnd:Bt,resumeAnimation:zt}=this.handlers;if(this.dragSnapToOrigin&&zt&&zt(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Ht=getPanInfo(Rt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Ft,this.transformPagePoint),this.history);this.startEvent&&jt&&jt(Rt,Ht),Bt&&Bt(Rt,Ht)},!isPrimaryPointer(g))return;this.dragSnapToOrigin=ct,this.handlers=et,this.transformPagePoint=ot,this.contextWindow=ut||window;const dt=extractEventInfo(g),ft=transformPoint(dt,this.transformPagePoint),{point:St}=ft,{timestamp:kt}=frameData;this.history=[{...St,timestamp:kt}];const{onSessionStart:Tt}=et;Tt&&Tt(g,getPanInfo(ft,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(g){this.handlers=g}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(it,g){return g?{point:g(it.point)}:it}function subtractPoint(it,g){return{x:it.x-g.x,y:it.y-g.y}}function getPanInfo({point:it},g){return{point:it,delta:subtractPoint(it,lastDevicePoint(g)),offset:subtractPoint(it,startDevicePoint(g)),velocity:getVelocity(g,.1)}}function startDevicePoint(it){return it[0]}function lastDevicePoint(it){return it[it.length-1]}function getVelocity(it,g){if(it.length<2)return{x:0,y:0};let et=it.length-1,ot=null;const ut=lastDevicePoint(it);for(;et>=0&&(ot=it[et],!(ut.timestamp-ot.timestamp>secondsToMilliseconds(g)));)et--;if(!ot)return{x:0,y:0};const ct=millisecondsToSeconds(ut.timestamp-ot.timestamp);if(ct===0)return{x:0,y:0};const dt={x:(ut.x-ot.x)/ct,y:(ut.y-ot.y)/ct};return dt.x===1/0&&(dt.x=0),dt.y===1/0&&(dt.y=0),dt}function isRefObject(it){return it&&typeof it=="object"&&Object.prototype.hasOwnProperty.call(it,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(it){return it.max-it.min}function isNear$1(it,g,et){return Math.abs(it-g)<=et}function calcAxisDelta(it,g,et,ot=.5){it.origin=ot,it.originPoint=mixNumber$1(g.min,g.max,it.origin),it.scale=calcLength(et)/calcLength(g),it.translate=mixNumber$1(et.min,et.max,it.origin)-it.originPoint,(it.scale>=SCALE_MIN&&it.scale<=SCALE_MAX||isNaN(it.scale))&&(it.scale=1),(it.translate>=TRANSLATE_MIN&&it.translate<=TRANSLATE_MAX||isNaN(it.translate))&&(it.translate=0)}function calcBoxDelta(it,g,et,ot){calcAxisDelta(it.x,g.x,et.x,ot?ot.originX:void 0),calcAxisDelta(it.y,g.y,et.y,ot?ot.originY:void 0)}function calcRelativeAxis(it,g,et){it.min=et.min+g.min,it.max=it.min+calcLength(g)}function calcRelativeBox(it,g,et){calcRelativeAxis(it.x,g.x,et.x),calcRelativeAxis(it.y,g.y,et.y)}function calcRelativeAxisPosition(it,g,et){it.min=g.min-et.min,it.max=it.min+calcLength(g)}function calcRelativePosition(it,g,et){calcRelativeAxisPosition(it.x,g.x,et.x),calcRelativeAxisPosition(it.y,g.y,et.y)}function applyConstraints(it,{min:g,max:et},ot){return g!==void 0&&it<g?it=ot?mixNumber$1(g,it,ot.min):Math.max(it,g):et!==void 0&&it>et&&(it=ot?mixNumber$1(et,it,ot.max):Math.min(it,et)),it}function calcRelativeAxisConstraints(it,g,et){return{min:g!==void 0?it.min+g:void 0,max:et!==void 0?it.max+et-(it.max-it.min):void 0}}function calcRelativeConstraints(it,{top:g,left:et,bottom:ot,right:ut}){return{x:calcRelativeAxisConstraints(it.x,et,ut),y:calcRelativeAxisConstraints(it.y,g,ot)}}function calcViewportAxisConstraints(it,g){let et=g.min-it.min,ot=g.max-it.max;return g.max-g.min<it.max-it.min&&([et,ot]=[ot,et]),{min:et,max:ot}}function calcViewportConstraints(it,g){return{x:calcViewportAxisConstraints(it.x,g.x),y:calcViewportAxisConstraints(it.y,g.y)}}function calcOrigin$1(it,g){let et=.5;const ot=calcLength(it),ut=calcLength(g);return ut>ot?et=progress(g.min,g.max-ot,it.min):ot>ut&&(et=progress(it.min,it.max-ut,g.min)),clamp(0,1,et)}function rebaseAxisConstraints(it,g){const et={};return g.min!==void 0&&(et.min=g.min-it.min),g.max!==void 0&&(et.max=g.max-it.min),et}const defaultElastic=.35;function resolveDragElastic(it=defaultElastic){return it===!1?it=0:it===!0&&(it=defaultElastic),{x:resolveAxisElastic(it,"left","right"),y:resolveAxisElastic(it,"top","bottom")}}function resolveAxisElastic(it,g,et){return{min:resolvePointElastic(it,g),max:resolvePointElastic(it,et)}}function resolvePointElastic(it,g){return typeof it=="number"?it:it[g]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(it){return[it("x"),it("y")]}function convertBoundingBoxToBox({top:it,left:g,right:et,bottom:ot}){return{x:{min:g,max:et},y:{min:it,max:ot}}}function convertBoxToBoundingBox({x:it,y:g}){return{top:g.min,right:it.max,bottom:g.max,left:it.min}}function transformBoxPoints(it,g){if(!g)return it;const et=g({x:it.left,y:it.top}),ot=g({x:it.right,y:it.bottom});return{top:et.y,left:et.x,bottom:ot.y,right:ot.x}}function isIdentityScale(it){return it===void 0||it===1}function hasScale({scale:it,scaleX:g,scaleY:et}){return!isIdentityScale(it)||!isIdentityScale(g)||!isIdentityScale(et)}function hasTransform(it){return hasScale(it)||has2DTranslate(it)||it.z||it.rotate||it.rotateX||it.rotateY||it.skewX||it.skewY}function has2DTranslate(it){return is2DTranslate(it.x)||is2DTranslate(it.y)}function is2DTranslate(it){return it&&it!=="0%"}function scalePoint(it,g,et){const ot=it-et,ut=g*ot;return et+ut}function applyPointDelta(it,g,et,ot,ut){return ut!==void 0&&(it=scalePoint(it,ut,ot)),scalePoint(it,et,ot)+g}function applyAxisDelta(it,g=0,et=1,ot,ut){it.min=applyPointDelta(it.min,g,et,ot,ut),it.max=applyPointDelta(it.max,g,et,ot,ut)}function applyBoxDelta(it,{x:g,y:et}){applyAxisDelta(it.x,g.translate,g.scale,g.originPoint),applyAxisDelta(it.y,et.translate,et.scale,et.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(it,g,et,ot=!1){const ut=et.length;if(!ut)return;g.x=g.y=1;let ct,dt;for(let ft=0;ft<ut;ft++){ct=et[ft],dt=ct.projectionDelta;const{visualElement:St}=ct.options;St&&St.props.style&&St.props.style.display==="contents"||(ot&&ct.options.layoutScroll&&ct.scroll&&ct!==ct.root&&transformBox(it,{x:-ct.scroll.offset.x,y:-ct.scroll.offset.y}),dt&&(g.x*=dt.x.scale,g.y*=dt.y.scale,applyBoxDelta(it,dt)),ot&&hasTransform(ct.latestValues)&&transformBox(it,ct.latestValues))}g.x<TREE_SCALE_SNAP_MAX&&g.x>TREE_SCALE_SNAP_MIN&&(g.x=1),g.y<TREE_SCALE_SNAP_MAX&&g.y>TREE_SCALE_SNAP_MIN&&(g.y=1)}function translateAxis(it,g){it.min=it.min+g,it.max=it.max+g}function transformAxis(it,g,et,ot,ut=.5){const ct=mixNumber$1(it.min,it.max,ut);applyAxisDelta(it,g,et,ct,ot)}function transformBox(it,g){transformAxis(it.x,g.x,g.scaleX,g.scale,g.originX),transformAxis(it.y,g.y,g.scaleY,g.scale,g.originY)}function measureViewportBox(it,g){return convertBoundingBoxToBox(transformBoxPoints(it.getBoundingClientRect(),g))}function measurePageBox(it,g,et){const ot=measureViewportBox(it,et),{scroll:ut}=g;return ut&&(translateAxis(ot.x,ut.offset.x),translateAxis(ot.y,ut.offset.y)),ot}const getContextWindow=({current:it})=>it?it.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(g){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=g}start(g,{snapToCursor:et=!1}={}){const{presenceContext:ot}=this.visualElement;if(ot&&ot.isPresent===!1)return;const ut=Tt=>{const{dragSnapToOrigin:Rt}=this.getProps();Rt?this.pauseAnimation():this.stopAnimation(),et&&this.snapToCursor(extractEventInfo(Tt).point)},ct=(Tt,Rt)=>{const{drag:Ft,dragPropagation:jt,onDragStart:Bt}=this.getProps();if(Ft&&!jt&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(Ft),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Ht=>{let Ut=this.getAxisMotionValue(Ht).get()||0;if(percent.test(Ut)){const{projection:Kt}=this.visualElement;if(Kt&&Kt.layout){const Yt=Kt.layout.layoutBox[Ht];Yt&&(Ut=calcLength(Yt)*(parseFloat(Ut)/100))}}this.originPoint[Ht]=Ut}),Bt&&frame.postRender(()=>Bt(Tt,Rt)),addValueToWillChange(this.visualElement,"transform");const{animationState:zt}=this.visualElement;zt&&zt.setActive("whileDrag",!0)},dt=(Tt,Rt)=>{const{dragPropagation:Ft,dragDirectionLock:jt,onDirectionLock:Bt,onDrag:zt}=this.getProps();if(!Ft&&!this.openDragLock)return;const{offset:Ht}=Rt;if(jt&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Ht),this.currentDirection!==null&&Bt&&Bt(this.currentDirection);return}this.updateAxis("x",Rt.point,Ht),this.updateAxis("y",Rt.point,Ht),this.visualElement.render(),zt&&zt(Tt,Rt)},ft=(Tt,Rt)=>this.stop(Tt,Rt),St=()=>eachAxis(Tt=>{var Rt;return this.getAnimationState(Tt)==="paused"&&((Rt=this.getAxisMotionValue(Tt).animation)===null||Rt===void 0?void 0:Rt.play())}),{dragSnapToOrigin:kt}=this.getProps();this.panSession=new PanSession(g,{onSessionStart:ut,onStart:ct,onMove:dt,onSessionEnd:ft,resumeAnimation:St},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:kt,contextWindow:getContextWindow(this.visualElement)})}stop(g,et){const ot=this.isDragging;if(this.cancel(),!ot)return;const{velocity:ut}=et;this.startAnimation(ut);const{onDragEnd:ct}=this.getProps();ct&&frame.postRender(()=>ct(g,et))}cancel(){this.isDragging=!1;const{projection:g,animationState:et}=this.visualElement;g&&(g.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:ot}=this.getProps();!ot&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),et&&et.setActive("whileDrag",!1)}updateAxis(g,et,ot){const{drag:ut}=this.getProps();if(!ot||!shouldDrag(g,ut,this.currentDirection))return;const ct=this.getAxisMotionValue(g);let dt=this.originPoint[g]+ot[g];this.constraints&&this.constraints[g]&&(dt=applyConstraints(dt,this.constraints[g],this.elastic[g])),ct.set(dt)}resolveConstraints(){var g;const{dragConstraints:et,dragElastic:ot}=this.getProps(),ut=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(g=this.visualElement.projection)===null||g===void 0?void 0:g.layout,ct=this.constraints;et&&isRefObject(et)?this.constraints||(this.constraints=this.resolveRefConstraints()):et&&ut?this.constraints=calcRelativeConstraints(ut.layoutBox,et):this.constraints=!1,this.elastic=resolveDragElastic(ot),ct!==this.constraints&&ut&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(dt=>{this.constraints!==!1&&this.getAxisMotionValue(dt)&&(this.constraints[dt]=rebaseAxisConstraints(ut.layoutBox[dt],this.constraints[dt]))})}resolveRefConstraints(){const{dragConstraints:g,onMeasureDragConstraints:et}=this.getProps();if(!g||!isRefObject(g))return!1;const ot=g.current,{projection:ut}=this.visualElement;if(!ut||!ut.layout)return!1;const ct=measurePageBox(ot,ut.root,this.visualElement.getTransformPagePoint());let dt=calcViewportConstraints(ut.layout.layoutBox,ct);if(et){const ft=et(convertBoxToBoundingBox(dt));this.hasMutatedConstraints=!!ft,ft&&(dt=convertBoundingBoxToBox(ft))}return dt}startAnimation(g){const{drag:et,dragMomentum:ot,dragElastic:ut,dragTransition:ct,dragSnapToOrigin:dt,onDragTransitionEnd:ft}=this.getProps(),St=this.constraints||{},kt=eachAxis(Tt=>{if(!shouldDrag(Tt,et,this.currentDirection))return;let Rt=St&&St[Tt]||{};dt&&(Rt={min:0,max:0});const Ft=ut?200:1e6,jt=ut?40:1e7,Bt={type:"inertia",velocity:ot?g[Tt]:0,bounceStiffness:Ft,bounceDamping:jt,timeConstant:750,restDelta:1,restSpeed:10,...ct,...Rt};return this.startAxisValueAnimation(Tt,Bt)});return Promise.all(kt).then(ft)}startAxisValueAnimation(g,et){const ot=this.getAxisMotionValue(g);return addValueToWillChange(this.visualElement,g),ot.start(animateMotionValue(g,ot,0,et,this.visualElement,!1))}stopAnimation(){eachAxis(g=>this.getAxisMotionValue(g).stop())}pauseAnimation(){eachAxis(g=>{var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.pause()})}getAnimationState(g){var et;return(et=this.getAxisMotionValue(g).animation)===null||et===void 0?void 0:et.state}getAxisMotionValue(g){const et=`_drag${g.toUpperCase()}`,ot=this.visualElement.getProps(),ut=ot[et];return ut||this.visualElement.getValue(g,(ot.initial?ot.initial[g]:void 0)||0)}snapToCursor(g){eachAxis(et=>{const{drag:ot}=this.getProps();if(!shouldDrag(et,ot,this.currentDirection))return;const{projection:ut}=this.visualElement,ct=this.getAxisMotionValue(et);if(ut&&ut.layout){const{min:dt,max:ft}=ut.layout.layoutBox[et];ct.set(g[et]-mixNumber$1(dt,ft,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:g,dragConstraints:et}=this.getProps(),{projection:ot}=this.visualElement;if(!isRefObject(et)||!ot||!this.constraints)return;this.stopAnimation();const ut={x:0,y:0};eachAxis(dt=>{const ft=this.getAxisMotionValue(dt);if(ft&&this.constraints!==!1){const St=ft.get();ut[dt]=calcOrigin$1({min:St,max:St},this.constraints[dt])}});const{transformTemplate:ct}=this.visualElement.getProps();this.visualElement.current.style.transform=ct?ct({},""):"none",ot.root&&ot.root.updateScroll(),ot.updateLayout(),this.resolveConstraints(),eachAxis(dt=>{if(!shouldDrag(dt,g,null))return;const ft=this.getAxisMotionValue(dt),{min:St,max:kt}=this.constraints[dt];ft.set(mixNumber$1(St,kt,ut[dt]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const g=this.visualElement.current,et=addPointerEvent(g,"pointerdown",St=>{const{drag:kt,dragListener:Tt=!0}=this.getProps();kt&&Tt&&this.start(St)}),ot=()=>{const{dragConstraints:St}=this.getProps();isRefObject(St)&&St.current&&(this.constraints=this.resolveRefConstraints())},{projection:ut}=this.visualElement,ct=ut.addEventListener("measure",ot);ut&&!ut.layout&&(ut.root&&ut.root.updateScroll(),ut.updateLayout()),frame.read(ot);const dt=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),ft=ut.addEventListener("didUpdate",({delta:St,hasLayoutChanged:kt})=>{this.isDragging&&kt&&(eachAxis(Tt=>{const Rt=this.getAxisMotionValue(Tt);Rt&&(this.originPoint[Tt]+=St[Tt].translate,Rt.set(Rt.get()+St[Tt].translate))}),this.visualElement.render())});return()=>{dt(),et(),ct(),ft&&ft()}}getProps(){const g=this.visualElement.getProps(),{drag:et=!1,dragDirectionLock:ot=!1,dragPropagation:ut=!1,dragConstraints:ct=!1,dragElastic:dt=defaultElastic,dragMomentum:ft=!0}=g;return{...g,drag:et,dragDirectionLock:ot,dragPropagation:ut,dragConstraints:ct,dragElastic:dt,dragMomentum:ft}}}function shouldDrag(it,g,et){return(g===!0||g===it)&&(et===null||et===it)}function getCurrentDirection(it,g=10){let et=null;return Math.abs(it.y)>g?et="y":Math.abs(it.x)>g&&(et="x"),et}class DragGesture extends Feature{constructor(g){super(g),this.removeGroupControls=noop$3,this.removeListeners=noop$3,this.controls=new VisualElementDragControls(g)}mount(){const{dragControls:g}=this.node.getProps();g&&(this.removeGroupControls=g.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$3}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=it=>(g,et)=>{it&&frame.postRender(()=>it(g,et))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$3}onPointerDown(g){this.session=new PanSession(g,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:g,onPanStart:et,onPan:ot,onPanEnd:ut}=this.node.getProps();return{onSessionStart:asyncHandler(g),onStart:asyncHandler(et),onMove:ot,onEnd:(ct,dt)=>{delete this.session,ut&&frame.postRender(()=>ut(ct,dt))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",g=>this.onPointerDown(g))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence(){const it=reactExports.useContext(PresenceContext);if(it===null)return[!0,null];const{isPresent:g,onExitComplete:et,register:ot}=it,ut=reactExports.useId();reactExports.useEffect(()=>ot(ut),[]);const ct=reactExports.useCallback(()=>et&&et(ut),[ut,et]);return!g&&et?[!1,ct]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(it,g){return g.max===g.min?0:it/(g.max-g.min)*100}const correctBorderRadius={correct:(it,g)=>{if(!g.target)return it;if(typeof it=="string")if(px$1.test(it))it=parseFloat(it);else return it;const et=pixelsToPercent(it,g.target.x),ot=pixelsToPercent(it,g.target.y);return`${et}% ${ot}%`}},correctBoxShadow={correct:(it,{treeScale:g,projectionDelta:et})=>{const ot=it,ut=complex.parse(it);if(ut.length>5)return ot;const ct=complex.createTransformer(it),dt=typeof ut[0]!="number"?1:0,ft=et.x.scale*g.x,St=et.y.scale*g.y;ut[0+dt]/=ft,ut[1+dt]/=St;const kt=mixNumber$1(ft,St,.5);return typeof ut[2+dt]=="number"&&(ut[2+dt]/=kt),typeof ut[3+dt]=="number"&&(ut[3+dt]/=kt),ct(ut)}},scaleCorrectors={};function addScaleCorrector(it){Object.assign(scaleCorrectors,it)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot,layoutId:ut}=this.props,{projection:ct}=g;addScaleCorrector(defaultScaleCorrectors),ct&&(et.group&&et.group.add(ct),ot&&ot.register&&ut&&ot.register(ct),ct.root.didUpdate(),ct.addEventListener("animationComplete",()=>{this.safeToRemove()}),ct.setOptions({...ct.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(g){const{layoutDependency:et,visualElement:ot,drag:ut,isPresent:ct}=this.props,dt=ot.projection;return dt&&(dt.isPresent=ct,ut||g.layoutDependency!==et||et===void 0?dt.willUpdate():this.safeToRemove(),g.isPresent!==ct&&(ct?dt.promote():dt.relegate()||frame.postRender(()=>{const ft=dt.getStack();(!ft||!ft.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:g}=this.props.visualElement;g&&(g.root.didUpdate(),microtask.postRender(()=>{!g.currentAnimation&&g.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:g,layoutGroup:et,switchLayoutGroup:ot}=this.props,{projection:ut}=g;ut&&(ut.scheduleCheckAfterUnmount(),et&&et.group&&et.group.remove(ut),ot&&ot.deregister&&ot.deregister(ut))}safeToRemove(){const{safeToRemove:g}=this.props;g&&g()}render(){return null}}function MeasureLayout(it){const[g,et]=usePresence(),ot=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...it,layoutGroup:ot,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:g,safeToRemove:et})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber$1=it=>typeof it=="string"?parseFloat(it):it,isPx=it=>typeof it=="number"||px$1.test(it);function mixValues(it,g,et,ot,ut,ct){ut?(it.opacity=mixNumber$1(0,et.opacity!==void 0?et.opacity:1,easeCrossfadeIn(ot)),it.opacityExit=mixNumber$1(g.opacity!==void 0?g.opacity:1,0,easeCrossfadeOut(ot))):ct&&(it.opacity=mixNumber$1(g.opacity!==void 0?g.opacity:1,et.opacity!==void 0?et.opacity:1,ot));for(let dt=0;dt<numBorders;dt++){const ft=`border${borders[dt]}Radius`;let St=getRadius(g,ft),kt=getRadius(et,ft);if(St===void 0&&kt===void 0)continue;St||(St=0),kt||(kt=0),St===0||kt===0||isPx(St)===isPx(kt)?(it[ft]=Math.max(mixNumber$1(asNumber$1(St),asNumber$1(kt),ot),0),(percent.test(kt)||percent.test(St))&&(it[ft]+="%")):it[ft]=kt}(g.rotate||et.rotate)&&(it.rotate=mixNumber$1(g.rotate||0,et.rotate||0,ot))}function getRadius(it,g){return it[g]!==void 0?it[g]:it.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$3);function compress(it,g,et){return ot=>ot<it?0:ot>g?1:et(progress(it,g,ot))}function copyAxisInto(it,g){it.min=g.min,it.max=g.max}function copyBoxInto(it,g){copyAxisInto(it.x,g.x),copyAxisInto(it.y,g.y)}function copyAxisDeltaInto(it,g){it.translate=g.translate,it.scale=g.scale,it.originPoint=g.originPoint,it.origin=g.origin}function removePointDelta(it,g,et,ot,ut){return it-=g,it=scalePoint(it,1/et,ot),ut!==void 0&&(it=scalePoint(it,1/ut,ot)),it}function removeAxisDelta(it,g=0,et=1,ot=.5,ut,ct=it,dt=it){if(percent.test(g)&&(g=parseFloat(g),g=mixNumber$1(dt.min,dt.max,g/100)-dt.min),typeof g!="number")return;let ft=mixNumber$1(ct.min,ct.max,ot);it===ct&&(ft-=g),it.min=removePointDelta(it.min,g,et,ft,ut),it.max=removePointDelta(it.max,g,et,ft,ut)}function removeAxisTransforms(it,g,[et,ot,ut],ct,dt){removeAxisDelta(it,g[et],g[ot],g[ut],g.scale,ct,dt)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(it,g,et,ot){removeAxisTransforms(it.x,g,xKeys,et?et.x:void 0,ot?ot.x:void 0),removeAxisTransforms(it.y,g,yKeys,et?et.y:void 0,ot?ot.y:void 0)}function isAxisDeltaZero(it){return it.translate===0&&it.scale===1}function isDeltaZero(it){return isAxisDeltaZero(it.x)&&isAxisDeltaZero(it.y)}function axisEquals(it,g){return it.min===g.min&&it.max===g.max}function boxEquals(it,g){return axisEquals(it.x,g.x)&&axisEquals(it.y,g.y)}function axisEqualsRounded(it,g){return Math.round(it.min)===Math.round(g.min)&&Math.round(it.max)===Math.round(g.max)}function boxEqualsRounded(it,g){return axisEqualsRounded(it.x,g.x)&&axisEqualsRounded(it.y,g.y)}function aspectRatio(it){return calcLength(it.x)/calcLength(it.y)}function axisDeltaEquals(it,g){return it.translate===g.translate&&it.scale===g.scale&&it.originPoint===g.originPoint}class NodeStack{constructor(){this.members=[]}add(g){addUniqueItem(this.members,g),g.scheduleRender()}remove(g){if(removeItem(this.members,g),g===this.prevLead&&(this.prevLead=void 0),g===this.lead){const et=this.members[this.members.length-1];et&&this.promote(et)}}relegate(g){const et=this.members.findIndex(ut=>g===ut);if(et===0)return!1;let ot;for(let ut=et;ut>=0;ut--){const ct=this.members[ut];if(ct.isPresent!==!1){ot=ct;break}}return ot?(this.promote(ot),!0):!1}promote(g,et){const ot=this.lead;if(g!==ot&&(this.prevLead=ot,this.lead=g,g.show(),ot)){ot.instance&&ot.scheduleRender(),g.scheduleRender(),g.resumeFrom=ot,et&&(g.resumeFrom.preserveOpacity=!0),ot.snapshot&&(g.snapshot=ot.snapshot,g.snapshot.latestValues=ot.animationValues||ot.latestValues),g.root&&g.root.isUpdating&&(g.isLayoutDirty=!0);const{crossfade:ut}=g.options;ut===!1&&ot.hide()}}exitAnimationComplete(){this.members.forEach(g=>{const{options:et,resumingFrom:ot}=g;et.onExitComplete&&et.onExitComplete(),ot&&ot.options.onExitComplete&&ot.options.onExitComplete()})}scheduleRender(){this.members.forEach(g=>{g.instance&&g.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(it,g,et){let ot="";const ut=it.x.translate/g.x,ct=it.y.translate/g.y,dt=(et==null?void 0:et.z)||0;if((ut||ct||dt)&&(ot=`translate3d(${ut}px, ${ct}px, ${dt}px) `),(g.x!==1||g.y!==1)&&(ot+=`scale(${1/g.x}, ${1/g.y}) `),et){const{transformPerspective:kt,rotate:Tt,rotateX:Rt,rotateY:Ft,skewX:jt,skewY:Bt}=et;kt&&(ot=`perspective(${kt}px) ${ot}`),Tt&&(ot+=`rotate(${Tt}deg) `),Rt&&(ot+=`rotateX(${Rt}deg) `),Ft&&(ot+=`rotateY(${Ft}deg) `),jt&&(ot+=`skewX(${jt}deg) `),Bt&&(ot+=`skewY(${Bt}deg) `)}const ft=it.x.scale*g.x,St=it.y.scale*g.y;return(ft!==1||St!==1)&&(ot+=`scale(${ft}, ${St})`),ot||"none"}const compareByDepth=(it,g)=>it.depth-g.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(g){addUniqueItem(this.children,g),this.isDirty=!0}remove(g){removeItem(this.children,g),this.isDirty=!0}forEach(g){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(g)}}function resolveMotionValue(it){const g=isMotionValue(it)?it.get():it;return isCustomValue(g)?g.toValue():g}function delay(it,g){const et=time.now(),ot=({timestamp:ut})=>{const ct=ut-et;ct>=g&&(cancelFrame(ot),it(ct-g))};return frame.read(ot,!0),()=>cancelFrame(ot)}function isSVGElement$1(it){return it instanceof SVGElement&&it.tagName!=="svg"}function animateSingleValue(it,g,et){const ot=isMotionValue(it)?it:motionValue(it);return ot.start(animateMotionValue("",ot,g,et)),ot.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(it,g,et,ot){const{latestValues:ut}=g;ut[it]&&(et[it]=ut[it],g.setStaticValue(it,0),ot&&(ot[it]=0))}function cancelTreeOptimisedTransformAnimations(it){if(it.hasCheckedOptimisedAppear=!0,it.root===it)return;const{visualElement:g}=it.options;if(!g)return;const et=getOptimisedAppearId(g);if(window.MotionHasOptimisedAnimation(et,"transform")){const{layout:ut,layoutId:ct}=it.options;window.MotionCancelOptimisedAnimation(et,"transform",frame,!(ut||ct))}const{parent:ot}=it;ot&&!ot.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(ot)}function createProjectionNode$1({attachResizeListener:it,defaultParent:g,measureScroll:et,checkIsScrollRoot:ot,resetTransform:ut}){return class{constructor(dt={},ft=g==null?void 0:g()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=dt,this.root=ft?ft.root||ft:this,this.path=ft?[...ft.path,ft]:[],this.parent=ft,this.depth=ft?ft.depth+1:0;for(let St=0;St<this.path.length;St++)this.path[St].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(dt,ft){return this.eventHandlers.has(dt)||this.eventHandlers.set(dt,new SubscriptionManager),this.eventHandlers.get(dt).add(ft)}notifyListeners(dt,...ft){const St=this.eventHandlers.get(dt);St&&St.notify(...ft)}hasListeners(dt){return this.eventHandlers.has(dt)}mount(dt,ft=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement$1(dt),this.instance=dt;const{layoutId:St,layout:kt,visualElement:Tt}=this.options;if(Tt&&!Tt.current&&Tt.mount(dt),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),ft&&(kt||St)&&(this.isLayoutDirty=!0),it){let Rt;const Ft=()=>this.root.updateBlockedByResize=!1;it(dt,()=>{this.root.updateBlockedByResize=!0,Rt&&Rt(),Rt=delay(Ft,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}St&&this.root.registerSharedNode(St,this),this.options.animate!==!1&&Tt&&(St||kt)&&this.addEventListener("didUpdate",({delta:Rt,hasLayoutChanged:Ft,hasRelativeTargetChanged:jt,layout:Bt})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const zt=this.options.transition||Tt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:Ht,onLayoutAnimationComplete:Ut}=Tt.getProps(),Kt=!this.targetLayout||!boxEqualsRounded(this.targetLayout,Bt)||jt,Yt=!Ft&&jt;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||Yt||Ft&&(Kt||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(Rt,Yt);const er={...getValueTransition(zt,"layout"),onPlay:Ht,onComplete:Ut};(Tt.shouldReduceMotion||this.options.layoutRoot)&&(er.delay=0,er.type=!1),this.startAnimation(er)}else Ft||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Bt})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const dt=this.getStack();dt&&dt.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:dt}=this.options;return dt&&dt.getProps().transformTemplate}willUpdate(dt=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Tt=0;Tt<this.path.length;Tt++){const Rt=this.path[Tt];Rt.shouldResetTransform=!0,Rt.updateScroll("snapshot"),Rt.options.layoutRoot&&Rt.willUpdate(!1)}const{layoutId:ft,layout:St}=this.options;if(ft===void 0&&!St)return;const kt=this.getTransformTemplate();this.prevTransformTemplateValue=kt?kt(this.latestValues,""):void 0,this.updateSnapshot(),dt&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const ft=time.now();frameData.delta=clamp(0,1e3/60,ft-frameData.timestamp),frameData.timestamp=ft,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let St=0;St<this.path.length;St++)this.path[St].updateScroll();const dt=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:ft}=this.options;ft&&ft.notify("LayoutMeasure",this.layout.layoutBox,dt?dt.layoutBox:void 0)}updateScroll(dt="measure"){let ft=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===dt&&(ft=!1),ft){const St=ot(this.instance);this.scroll={animationId:this.root.animationId,phase:dt,isRoot:St,offset:et(this.instance),wasRoot:this.scroll?this.scroll.isRoot:St}}}resetTransform(){if(!ut)return;const dt=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,ft=this.projectionDelta&&!isDeltaZero(this.projectionDelta),St=this.getTransformTemplate(),kt=St?St(this.latestValues,""):void 0,Tt=kt!==this.prevTransformTemplateValue;dt&&(ft||hasTransform(this.latestValues)||Tt)&&(ut(this.instance,kt),this.shouldResetTransform=!1,this.scheduleRender())}measure(dt=!0){const ft=this.measurePageBox();let St=this.removeElementScroll(ft);return dt&&(St=this.removeTransform(St)),roundBox(St),{animationId:this.root.animationId,measuredBox:ft,layoutBox:St,latestValues:{},source:this.id}}measurePageBox(){var dt;const{visualElement:ft}=this.options;if(!ft)return createBox();const St=ft.measureViewportBox();if(!(((dt=this.scroll)===null||dt===void 0?void 0:dt.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:Tt}=this.root;Tt&&(translateAxis(St.x,Tt.offset.x),translateAxis(St.y,Tt.offset.y))}return St}removeElementScroll(dt){var ft;const St=createBox();if(copyBoxInto(St,dt),!((ft=this.scroll)===null||ft===void 0)&&ft.wasRoot)return St;for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt],{scroll:Rt,options:Ft}=Tt;Tt!==this.root&&Rt&&Ft.layoutScroll&&(Rt.wasRoot&&copyBoxInto(St,dt),translateAxis(St.x,Rt.offset.x),translateAxis(St.y,Rt.offset.y))}return St}applyTransform(dt,ft=!1){const St=createBox();copyBoxInto(St,dt);for(let kt=0;kt<this.path.length;kt++){const Tt=this.path[kt];!ft&&Tt.options.layoutScroll&&Tt.scroll&&Tt!==Tt.root&&transformBox(St,{x:-Tt.scroll.offset.x,y:-Tt.scroll.offset.y}),hasTransform(Tt.latestValues)&&transformBox(St,Tt.latestValues)}return hasTransform(this.latestValues)&&transformBox(St,this.latestValues),St}removeTransform(dt){const ft=createBox();copyBoxInto(ft,dt);for(let St=0;St<this.path.length;St++){const kt=this.path[St];if(!kt.instance||!hasTransform(kt.latestValues))continue;hasScale(kt.latestValues)&&kt.updateSnapshot();const Tt=createBox(),Rt=kt.measurePageBox();copyBoxInto(Tt,Rt),removeBoxTransforms(ft,kt.latestValues,kt.snapshot?kt.snapshot.layoutBox:void 0,Tt)}return hasTransform(this.latestValues)&&removeBoxTransforms(ft,this.latestValues),ft}setTargetDelta(dt){this.targetDelta=dt,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(dt){this.options={...this.options,...dt,crossfade:dt.crossfade!==void 0?dt.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(dt=!1){var ft;const St=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=St.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=St.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=St.isSharedProjectionDirty);const kt=!!this.resumingFrom||this!==St;if(!(dt||kt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((ft=this.parent)===null||ft===void 0)&&ft.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Rt,layoutId:Ft}=this.options;if(!(!this.layout||!(Rt||Ft))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const jt=this.getClosestProjectingParent();jt&&jt.layout&&this.animationProgress!==1?(this.relativeParent=jt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,jt.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const jt=this.getClosestProjectingParent();jt&&!!jt.resumingFrom==!!this.resumingFrom&&!jt.options.layoutScroll&&jt.target&&this.animationProgress!==1?(this.relativeParent=jt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,jt.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var dt;const ft=this.getLead(),St=!!this.resumingFrom||this!==ft;let kt=!0;if((this.isProjectionDirty||!((dt=this.parent)===null||dt===void 0)&&dt.isProjectionDirty)&&(kt=!1),St&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(kt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(kt=!1),kt)return;const{layout:Tt,layoutId:Rt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Tt||Rt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Ft=this.treeScale.x,jt=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,St),ft.layout&&!ft.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(ft.target=ft.layout.layoutBox,ft.targetWithTransforms=createBox());const{target:Bt}=ft;if(!Bt){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,Bt,this.latestValues),(this.treeScale.x!==Ft||this.treeScale.y!==jt||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Bt)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(dt=!0){var ft;if((ft=this.options.visualElement)===null||ft===void 0||ft.scheduleRender(),dt){const St=this.getStack();St&&St.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(dt,ft=!1){const St=this.snapshot,kt=St?St.latestValues:{},Tt={...this.latestValues},Rt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!ft;const Ft=createBox(),jt=St?St.source:void 0,Bt=this.layout?this.layout.source:void 0,zt=jt!==Bt,Ht=this.getStack(),Ut=!Ht||Ht.members.length<=1,Kt=!!(zt&&!Ut&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Yt;this.mixTargetDelta=er=>{const ar=er/1e3;mixAxisDelta(Rt.x,dt.x,ar),mixAxisDelta(Rt.y,dt.y,ar),this.setTargetDelta(Rt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(Ft,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,Ft,ar),Yt&&boxEquals(this.relativeTarget,Yt)&&(this.isProjectionDirty=!1),Yt||(Yt=createBox()),copyBoxInto(Yt,this.relativeTarget)),zt&&(this.animationValues=Tt,mixValues(Tt,kt,this.latestValues,ar,Kt,Ut)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ar},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(dt){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...dt,onUpdate:ft=>{this.mixTargetDelta(ft),dt.onUpdate&&dt.onUpdate(ft)},onComplete:()=>{dt.onComplete&&dt.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const dt=this.getStack();dt&&dt.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const dt=this.getLead();let{targetWithTransforms:ft,target:St,layout:kt,latestValues:Tt}=dt;if(!(!ft||!St||!kt)){if(this!==dt&&this.layout&&kt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,kt.layoutBox)){St=this.target||createBox();const Rt=calcLength(this.layout.layoutBox.x);St.x.min=dt.target.x.min,St.x.max=St.x.min+Rt;const Ft=calcLength(this.layout.layoutBox.y);St.y.min=dt.target.y.min,St.y.max=St.y.min+Ft}copyBoxInto(ft,St),transformBox(ft,Tt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,ft,Tt)}}registerSharedNode(dt,ft){this.sharedNodes.has(dt)||this.sharedNodes.set(dt,new NodeStack),this.sharedNodes.get(dt).add(ft);const kt=ft.options.initialPromotionConfig;ft.promote({transition:kt?kt.transition:void 0,preserveFollowOpacity:kt&&kt.shouldPreserveFollowOpacity?kt.shouldPreserveFollowOpacity(ft):void 0})}isLead(){const dt=this.getStack();return dt?dt.lead===this:!0}getLead(){var dt;const{layoutId:ft}=this.options;return ft?((dt=this.getStack())===null||dt===void 0?void 0:dt.lead)||this:this}getPrevLead(){var dt;const{layoutId:ft}=this.options;return ft?(dt=this.getStack())===null||dt===void 0?void 0:dt.prevLead:void 0}getStack(){const{layoutId:dt}=this.options;if(dt)return this.root.sharedNodes.get(dt)}promote({needsReset:dt,transition:ft,preserveFollowOpacity:St}={}){const kt=this.getStack();kt&&kt.promote(this,St),dt&&(this.projectionDelta=void 0,this.needsReset=!0),ft&&this.setOptions({transition:ft})}relegate(){const dt=this.getStack();return dt?dt.relegate(this):!1}resetSkewAndRotation(){const{visualElement:dt}=this.options;if(!dt)return;let ft=!1;const{latestValues:St}=dt;if((St.z||St.rotate||St.rotateX||St.rotateY||St.rotateZ||St.skewX||St.skewY)&&(ft=!0),!ft)return;const kt={};St.z&&resetDistortingTransform("z",dt,kt,this.animationValues);for(let Tt=0;Tt<transformAxes.length;Tt++)resetDistortingTransform(`rotate${transformAxes[Tt]}`,dt,kt,this.animationValues),resetDistortingTransform(`skew${transformAxes[Tt]}`,dt,kt,this.animationValues);dt.render();for(const Tt in kt)dt.setStaticValue(Tt,kt[Tt]),this.animationValues&&(this.animationValues[Tt]=kt[Tt]);dt.scheduleRender()}getProjectionStyles(dt){var ft,St;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const kt={visibility:""},Tt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,kt.opacity="",kt.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"",kt.transform=Tt?Tt(this.latestValues,""):"none",kt;const Rt=this.getLead();if(!this.projectionDelta||!this.layout||!Rt.target){const zt={};return this.options.layoutId&&(zt.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,zt.pointerEvents=resolveMotionValue(dt==null?void 0:dt.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(zt.transform=Tt?Tt({},""):"none",this.hasProjected=!1),zt}const Ft=Rt.animationValues||Rt.latestValues;this.applyTransformsToTarget(),kt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,Ft),Tt&&(kt.transform=Tt(Ft,kt.transform));const{x:jt,y:Bt}=this.projectionDelta;kt.transformOrigin=`${jt.origin*100}% ${Bt.origin*100}% 0`,Rt.animationValues?kt.opacity=Rt===this?(St=(ft=Ft.opacity)!==null&&ft!==void 0?ft:this.latestValues.opacity)!==null&&St!==void 0?St:1:this.preserveOpacity?this.latestValues.opacity:Ft.opacityExit:kt.opacity=Rt===this?Ft.opacity!==void 0?Ft.opacity:"":Ft.opacityExit!==void 0?Ft.opacityExit:0;for(const zt in scaleCorrectors){if(Ft[zt]===void 0)continue;const{correct:Ht,applyTo:Ut}=scaleCorrectors[zt],Kt=kt.transform==="none"?Ft[zt]:Ht(Ft[zt],Rt);if(Ut){const Yt=Ut.length;for(let er=0;er<Yt;er++)kt[Ut[er]]=Kt}else kt[zt]=Kt}return this.options.layoutId&&(kt.pointerEvents=Rt===this?resolveMotionValue(dt==null?void 0:dt.pointerEvents)||"":"none"),kt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(dt=>{var ft;return(ft=dt.currentAnimation)===null||ft===void 0?void 0:ft.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(it){it.updateLayout()}function notifyLayoutUpdate(it){var g;const et=((g=it.resumeFrom)===null||g===void 0?void 0:g.snapshot)||it.snapshot;if(it.isLead()&&it.layout&&et&&it.hasListeners("didUpdate")){const{layoutBox:ot,measuredBox:ut}=it.layout,{animationType:ct}=it.options,dt=et.source!==it.layout.source;ct==="size"?eachAxis(Rt=>{const Ft=dt?et.measuredBox[Rt]:et.layoutBox[Rt],jt=calcLength(Ft);Ft.min=ot[Rt].min,Ft.max=Ft.min+jt}):shouldAnimatePositionOnly(ct,et.layoutBox,ot)&&eachAxis(Rt=>{const Ft=dt?et.measuredBox[Rt]:et.layoutBox[Rt],jt=calcLength(ot[Rt]);Ft.max=Ft.min+jt,it.relativeTarget&&!it.currentAnimation&&(it.isProjectionDirty=!0,it.relativeTarget[Rt].max=it.relativeTarget[Rt].min+jt)});const ft=createDelta();calcBoxDelta(ft,ot,et.layoutBox);const St=createDelta();dt?calcBoxDelta(St,it.applyTransform(ut,!0),et.measuredBox):calcBoxDelta(St,ot,et.layoutBox);const kt=!isDeltaZero(ft);let Tt=!1;if(!it.resumeFrom){const Rt=it.getClosestProjectingParent();if(Rt&&!Rt.resumeFrom){const{snapshot:Ft,layout:jt}=Rt;if(Ft&&jt){const Bt=createBox();calcRelativePosition(Bt,et.layoutBox,Ft.layoutBox);const zt=createBox();calcRelativePosition(zt,ot,jt.layoutBox),boxEqualsRounded(Bt,zt)||(Tt=!0),Rt.options.layoutRoot&&(it.relativeTarget=zt,it.relativeTargetOrigin=Bt,it.relativeParent=Rt)}}}it.notifyListeners("didUpdate",{layout:ot,snapshot:et,delta:St,layoutDelta:ft,hasLayoutChanged:kt,hasRelativeTargetChanged:Tt})}else if(it.isLead()){const{onExitComplete:ot}=it.options;ot&&ot()}it.options.transition=void 0}function propagateDirtyNodes(it){isDebug&&metrics.totalNodes++,it.parent&&(it.isProjecting()||(it.isProjectionDirty=it.parent.isProjectionDirty),it.isSharedProjectionDirty||(it.isSharedProjectionDirty=!!(it.isProjectionDirty||it.parent.isProjectionDirty||it.parent.isSharedProjectionDirty)),it.isTransformDirty||(it.isTransformDirty=it.parent.isTransformDirty))}function cleanDirtyNodes(it){it.isProjectionDirty=it.isSharedProjectionDirty=it.isTransformDirty=!1}function clearSnapshot(it){it.clearSnapshot()}function clearMeasurements(it){it.clearMeasurements()}function clearIsLayoutDirty(it){it.isLayoutDirty=!1}function resetTransformStyle(it){const{visualElement:g}=it.options;g&&g.getProps().onBeforeLayoutMeasure&&g.notify("BeforeLayoutMeasure"),it.resetTransform()}function finishAnimation(it){it.finishAnimation(),it.targetDelta=it.relativeTarget=it.target=void 0,it.isProjectionDirty=!0}function resolveTargetDelta(it){it.resolveTargetDelta()}function calcProjection(it){it.calcProjection()}function resetSkewAndRotation(it){it.resetSkewAndRotation()}function removeLeadSnapshots(it){it.removeLeadSnapshot()}function mixAxisDelta(it,g,et){it.translate=mixNumber$1(g.translate,0,et),it.scale=mixNumber$1(g.scale,1,et),it.origin=g.origin,it.originPoint=g.originPoint}function mixAxis(it,g,et,ot){it.min=mixNumber$1(g.min,et.min,ot),it.max=mixNumber$1(g.max,et.max,ot)}function mixBox(it,g,et,ot){mixAxis(it.x,g.x,et.x,ot),mixAxis(it.y,g.y,et.y,ot)}function hasOpacityCrossfade(it){return it.animationValues&&it.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=it=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(it),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$3;function roundAxis(it){it.min=roundPoint(it.min),it.max=roundPoint(it.max)}function roundBox(it){roundAxis(it.x),roundAxis(it.y)}function shouldAnimatePositionOnly(it,g,et){return it==="position"||it==="preserve-aspect"&&!isNear$1(aspectRatio(g),aspectRatio(et),.2)}function checkNodeWasScrollRoot(it){var g;return it!==it.root&&((g=it.scroll)===null||g===void 0?void 0:g.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(it,g)=>addDomEvent(it,"resize",g),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:it=>({x:it.scrollLeft,y:it.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const it=new DocumentProjectionNode({});it.mount(window),it.setOptions({layoutScroll:!0}),rootProjectionNode.current=it}return rootProjectionNode.current},resetTransform:(it,g)=>{it.style.transform=g!==void 0?g:"none"},checkIsScrollRoot:it=>window.getComputedStyle(it).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileHover&&it.animationState.setActive("whileHover",et==="Start");const ut="onHover"+et,ct=ot[ut];ct&&frame.postRender(()=>ct(g,extractEventInfo(g)))}class HoverGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=hover(g,et=>(handleHoverEvent(this.node,et,"Start"),ot=>handleHoverEvent(this.node,ot,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let g=!1;try{g=this.node.current.matches(":focus-visible")}catch{g=!0}!g||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(it,g,et){const{props:ot}=it;it.animationState&&ot.whileTap&&it.animationState.setActive("whileTap",et==="Start");const ut="onTap"+(et==="End"?"":et),ct=ot[ut];ct&&frame.postRender(()=>ct(g,extractEventInfo(g)))}class PressGesture extends Feature{mount(){const{current:g}=this.node;g&&(this.unmount=press(g,et=>(handlePressEvent(this.node,et,"Start"),(ot,{success:ut})=>handlePressEvent(this.node,ot,ut?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=it=>{const g=observerCallbacks.get(it.target);g&&g(it)},fireAllObserverCallbacks=it=>{it.forEach(fireObserverCallback)};function initIntersectionObserver({root:it,...g}){const et=it||document;observers.has(et)||observers.set(et,{});const ot=observers.get(et),ut=JSON.stringify(g);return ot[ut]||(ot[ut]=new IntersectionObserver(fireAllObserverCallbacks,{root:it,...g})),ot[ut]}function observeIntersection(it,g,et){const ot=initIntersectionObserver(g);return observerCallbacks.set(it,et),ot.observe(it),()=>{observerCallbacks.delete(it),ot.unobserve(it)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:g={}}=this.node.getProps(),{root:et,margin:ot,amount:ut="some",once:ct}=g,dt={root:et?et.current:void 0,rootMargin:ot,threshold:typeof ut=="number"?ut:thresholdNames[ut]},ft=St=>{const{isIntersecting:kt}=St;if(this.isInView===kt||(this.isInView=kt,ct&&!kt&&this.hasEnteredView))return;kt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",kt);const{onViewportEnter:Tt,onViewportLeave:Rt}=this.node.getProps(),Ft=kt?Tt:Rt;Ft&&Ft(St)};return observeIntersection(this.node.current,dt,ft)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:g,prevProps:et}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(g,et))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:it={}},{viewport:g={}}={}){return et=>it[et]!==g[et]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:it=>it,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$2=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(it,g,et,ot,ut){var ct,dt;const{visualElement:ft}=reactExports.useContext(MotionContext),St=reactExports.useContext(LazyContext),kt=reactExports.useContext(PresenceContext),Tt=reactExports.useContext(MotionConfigContext).reducedMotion,Rt=reactExports.useRef(null);ot=ot||St.renderer,!Rt.current&&ot&&(Rt.current=ot(it,{visualState:g,parent:ft,props:et,presenceContext:kt,blockInitialAnimation:kt?kt.initial===!1:!1,reducedMotionConfig:Tt}));const Ft=Rt.current,jt=reactExports.useContext(SwitchLayoutGroupContext);Ft&&!Ft.projection&&ut&&(Ft.type==="html"||Ft.type==="svg")&&createProjectionNode(Rt.current,et,ut,jt);const Bt=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{Ft&&Bt.current&&Ft.update(et,kt)});const zt=et[optimizedAppearDataAttribute],Ht=reactExports.useRef(!!zt&&!(!((ct=window.MotionHandoffIsComplete)===null||ct===void 0)&&ct.call(window,zt))&&((dt=window.MotionHasOptimisedAnimation)===null||dt===void 0?void 0:dt.call(window,zt)));return useIsomorphicLayoutEffect$2(()=>{Ft&&(Bt.current=!0,window.MotionIsMounted=!0,Ft.updateFeatures(),microtask.render(Ft.render),Ht.current&&Ft.animationState&&Ft.animationState.animateChanges())}),reactExports.useEffect(()=>{Ft&&(!Ht.current&&Ft.animationState&&Ft.animationState.animateChanges(),Ht.current&&(queueMicrotask(()=>{var Ut;(Ut=window.MotionHandoffMarkAsComplete)===null||Ut===void 0||Ut.call(window,zt)}),Ht.current=!1))}),Ft}function createProjectionNode(it,g,et,ot){const{layoutId:ut,layout:ct,drag:dt,dragConstraints:ft,layoutScroll:St,layoutRoot:kt}=g;it.projection=new et(it.latestValues,g["data-framer-portal-id"]?void 0:getClosestProjectingNode(it.parent)),it.projection.setOptions({layoutId:ut,layout:ct,alwaysMeasureLayout:!!dt||ft&&isRefObject(ft),visualElement:it,animationType:typeof ct=="string"?ct:"both",initialPromotionConfig:ot,layoutScroll:St,layoutRoot:kt})}function getClosestProjectingNode(it){if(it)return it.options.allowProjection!==!1?it.projection:getClosestProjectingNode(it.parent)}function useMotionRef(it,g,et){return reactExports.useCallback(ot=>{ot&&it.mount&&it.mount(ot),g&&(ot?g.mount(ot):g.unmount()),et&&(typeof et=="function"?et(ot):isRefObject(et)&&(et.current=ot))},[g])}function isControllingVariants(it){return isAnimationControls(it.animate)||variantProps.some(g=>isVariantLabel(it[g]))}function isVariantNode(it){return!!(isControllingVariants(it)||it.variants)}function getCurrentTreeVariants(it,g){if(isControllingVariants(it)){const{initial:et,animate:ot}=it;return{initial:et===!1||isVariantLabel(et)?et:void 0,animate:isVariantLabel(ot)?ot:void 0}}return it.inherit!==!1?g:{}}function useCreateMotionContext(it){const{initial:g,animate:et}=getCurrentTreeVariants(it,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:g,animate:et}),[variantLabelsAsDependency(g),variantLabelsAsDependency(et)])}function variantLabelsAsDependency(it){return Array.isArray(it)?it.join(" "):it}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const it in featureProps)featureDefinitions[it]={isEnabled:g=>featureProps[it].some(et=>!!g[et])};function loadFeatures(it){for(const g in it)featureDefinitions[g]={...featureDefinitions[g],...it[g]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:it,createVisualElement:g,useRender:et,useVisualState:ot,Component:ut}){it&&loadFeatures(it);function ct(ft,St){let kt;const Tt={...reactExports.useContext(MotionConfigContext),...ft,layoutId:useLayoutId(ft)},{isStatic:Rt}=Tt,Ft=useCreateMotionContext(ft),jt=ot(ft,Rt);if(!Rt&&isBrowser$1){useStrictMode();const Bt=getProjectionFunctionality(Tt);kt=Bt.MeasureLayout,Ft.visualElement=useVisualElement(ut,jt,Tt,g,Bt.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Ft,children:[kt&&Ft.visualElement?jsxRuntimeExports.jsx(kt,{visualElement:Ft.visualElement,...Tt}):null,et(ut,ft,useMotionRef(jt,Ft.visualElement,St),jt,Rt,Ft.visualElement)]})}const dt=reactExports.forwardRef(ct);return dt[motionComponentSymbol]=ut,dt}function useLayoutId({layoutId:it}){const g=reactExports.useContext(LayoutGroupContext).id;return g&&it!==void 0?g+"-"+it:it}function useStrictMode(it,g){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(it){const{drag:g,layout:et}=featureDefinitions;if(!g&&!et)return{};const ot={...g,...et};return{MeasureLayout:g!=null&&g.isEnabled(it)||et!=null&&et.isEnabled(it)?ot.MeasureLayout:void 0,ProjectionNode:ot.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(it){return typeof it!="string"||it.includes("-")?!1:!!(lowercaseSVGElements.indexOf(it)>-1||/[A-Z]/u.test(it))}function renderHTML(it,{style:g,vars:et},ot,ut){Object.assign(it.style,g,ut&&ut.getProjectionStyles(ot));for(const ct in et)it.style.setProperty(ct,et[ct])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(it,g,et,ot){renderHTML(it,g,void 0,ot);for(const ut in g.attrs)it.setAttribute(camelCaseAttributes.has(ut)?ut:camelToDash(ut),g.attrs[ut])}function isForcedMotionValue(it,{layout:g,layoutId:et}){return transformProps.has(it)||it.startsWith("origin")||(g||et!==void 0)&&(!!scaleCorrectors[it]||it==="opacity")}function scrapeMotionValuesFromProps$1(it,g,et){var ot;const{style:ut}=it,ct={};for(const dt in ut)(isMotionValue(ut[dt])||g.style&&isMotionValue(g.style[dt])||isForcedMotionValue(dt,it)||((ot=et==null?void 0:et.getValue(dt))===null||ot===void 0?void 0:ot.liveStyle)!==void 0)&&(ct[dt]=ut[dt]);return ct}function scrapeMotionValuesFromProps(it,g,et){const ot=scrapeMotionValuesFromProps$1(it,g,et);for(const ut in it)if(isMotionValue(it[ut])||isMotionValue(g[ut])){const ct=transformPropOrder.indexOf(ut)!==-1?"attr"+ut.charAt(0).toUpperCase()+ut.substring(1):ut;ot[ct]=it[ut]}return ot}function useConstant(it){const g=reactExports.useRef(null);return g.current===null&&(g.current=it()),g.current}function makeState$1({scrapeMotionValuesFromProps:it,createRenderState:g,onMount:et},ot,ut,ct){const dt={latestValues:makeLatestValues(ot,ut,ct,it),renderState:g()};return et&&(dt.mount=ft=>et(ot,ft,dt)),dt}const makeUseVisualState=it=>(g,et)=>{const ot=reactExports.useContext(MotionContext),ut=reactExports.useContext(PresenceContext),ct=()=>makeState$1(it,g,ot,ut);return et?ct():useConstant(ct)};function makeLatestValues(it,g,et,ot){const ut={},ct=ot(it,{});for(const Ft in ct)ut[Ft]=resolveMotionValue(ct[Ft]);let{initial:dt,animate:ft}=it;const St=isControllingVariants(it),kt=isVariantNode(it);g&&kt&&!St&&it.inherit!==!1&&(dt===void 0&&(dt=g.initial),ft===void 0&&(ft=g.animate));let Tt=et?et.initial===!1:!1;Tt=Tt||dt===!1;const Rt=Tt?ft:dt;if(Rt&&typeof Rt!="boolean"&&!isAnimationControls(Rt)){const Ft=Array.isArray(Rt)?Rt:[Rt];for(let jt=0;jt<Ft.length;jt++){const Bt=resolveVariantFromProps(it,Ft[jt]);if(Bt){const{transitionEnd:zt,transition:Ht,...Ut}=Bt;for(const Kt in Ut){let Yt=Ut[Kt];if(Array.isArray(Yt)){const er=Tt?Yt.length-1:0;Yt=Yt[er]}Yt!==null&&(ut[Kt]=Yt)}for(const Kt in zt)ut[Kt]=zt[Kt]}}}return ut}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(it,g)=>g&&typeof it=="number"?g.transform(it):it,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(it,g,et){let ot="",ut=!0;for(let ct=0;ct<numTransforms;ct++){const dt=transformPropOrder[ct],ft=it[dt];if(ft===void 0)continue;let St=!0;if(typeof ft=="number"?St=ft===(dt.startsWith("scale")?1:0):St=parseFloat(ft)===0,!St||et){const kt=getValueAsType(ft,numberValueTypes[dt]);if(!St){ut=!1;const Tt=translateAlias[dt]||dt;ot+=`${Tt}(${kt}) `}et&&(g[dt]=kt)}}return ot=ot.trim(),et?ot=et(g,ut?"":ot):ut&&(ot="none"),ot}function buildHTMLStyles(it,g,et){const{style:ot,vars:ut,transformOrigin:ct}=it;let dt=!1,ft=!1;for(const St in g){const kt=g[St];if(transformProps.has(St)){dt=!0;continue}else if(isCSSVariableName(St)){ut[St]=kt;continue}else{const Tt=getValueAsType(kt,numberValueTypes[St]);St.startsWith("origin")?(ft=!0,ct[St]=Tt):ot[St]=Tt}}if(g.transform||(dt||et?ot.transform=buildTransform(g,it.transform,et):ot.transform&&(ot.transform="none")),ft){const{originX:St="50%",originY:kt="50%",originZ:Tt=0}=ct;ot.transformOrigin=`${St} ${kt} ${Tt}`}}function calcOrigin(it,g,et){return typeof it=="string"?it:px$1.transform(g+et*it)}function calcSVGTransformOrigin(it,g,et){const ot=calcOrigin(g,it.x,it.width),ut=calcOrigin(et,it.y,it.height);return`${ot} ${ut}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(it,g,et=1,ot=0,ut=!0){it.pathLength=1;const ct=ut?dashKeys:camelKeys;it[ct.offset]=px$1.transform(-ot);const dt=px$1.transform(g),ft=px$1.transform(et);it[ct.array]=`${dt} ${ft}`}function buildSVGAttrs(it,{attrX:g,attrY:et,attrScale:ot,originX:ut,originY:ct,pathLength:dt,pathSpacing:ft=1,pathOffset:St=0,...kt},Tt,Rt){if(buildHTMLStyles(it,kt,Rt),Tt){it.style.viewBox&&(it.attrs.viewBox=it.style.viewBox);return}it.attrs=it.style,it.style={};const{attrs:Ft,style:jt,dimensions:Bt}=it;Ft.transform&&(Bt&&(jt.transform=Ft.transform),delete Ft.transform),Bt&&(ut!==void 0||ct!==void 0||jt.transform)&&(jt.transformOrigin=calcSVGTransformOrigin(Bt,ut!==void 0?ut:.5,ct!==void 0?ct:.5)),g!==void 0&&(Ft.x=g),et!==void 0&&(Ft.y=et),ot!==void 0&&(Ft.scale=ot),dt!==void 0&&buildSVGPath(Ft,dt,ft,St,!1)}const isSVGTag=it=>typeof it=="string"&&it.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(it,g,{renderState:et,latestValues:ot})=>{frame.read(()=>{try{et.dimensions=typeof g.getBBox=="function"?g.getBBox():g.getBoundingClientRect()}catch{et.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(et,ot,isSVGTag(g.tagName),it.transformTemplate),renderSVG(g,et)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(it,g,et){for(const ot in g)!isMotionValue(g[ot])&&!isForcedMotionValue(ot,et)&&(it[ot]=g[ot])}function useInitialMotionValues({transformTemplate:it},g){return reactExports.useMemo(()=>{const et=createHtmlRenderState();return buildHTMLStyles(et,g,it),Object.assign({},et.vars,et.style)},[g])}function useStyle(it,g){const et=it.style||{},ot={};return copyRawValuesOnly(ot,et,it),Object.assign(ot,useInitialMotionValues(it,g)),ot}function useHTMLProps(it,g){const et={},ot=useStyle(it,g);return it.drag&&it.dragListener!==!1&&(et.draggable=!1,ot.userSelect=ot.WebkitUserSelect=ot.WebkitTouchCallout="none",ot.touchAction=it.drag===!0?"none":`pan-${it.drag==="x"?"y":"x"}`),it.tabIndex===void 0&&(it.onTap||it.onTapStart||it.whileTap)&&(et.tabIndex=0),et.style=ot,et}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(it){return it.startsWith("while")||it.startsWith("drag")&&it!=="draggable"||it.startsWith("layout")||it.startsWith("onTap")||it.startsWith("onPan")||it.startsWith("onLayout")||validMotionProps.has(it)}let shouldForward=it=>!isValidMotionProp(it);function loadExternalIsValidProp(it){it&&(shouldForward=g=>g.startsWith("on")?!isValidMotionProp(g):it(g))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(it,g,et){const ot={};for(const ut in it)ut==="values"&&typeof it.values=="object"||(shouldForward(ut)||et===!0&&isValidMotionProp(ut)||!g&&!isValidMotionProp(ut)||it.draggable&&ut.startsWith("onDrag"))&&(ot[ut]=it[ut]);return ot}function useSVGProps(it,g,et,ot){const ut=reactExports.useMemo(()=>{const ct=createSvgRenderState();return buildSVGAttrs(ct,g,isSVGTag(ot),it.transformTemplate),{...ct.attrs,style:{...ct.style}}},[g]);if(it.style){const ct={};copyRawValuesOnly(ct,it.style,it),ut.style={...ct,...ut.style}}return ut}function createUseRender(it=!1){return(et,ot,ut,{latestValues:ct},dt)=>{const St=(isSVGComponent(et)?useSVGProps:useHTMLProps)(ot,ct,dt,et),kt=filterProps(ot,typeof et=="string",it),Tt=et!==reactExports.Fragment?{...kt,...St,ref:ut}:{},{children:Rt}=ot,Ft=reactExports.useMemo(()=>isMotionValue(Rt)?Rt.get():Rt,[Rt]);return reactExports.createElement(et,{...Tt,children:Ft})}}function createMotionComponentFactory(it,g){return function(ot,{forwardMotionProps:ut}={forwardMotionProps:!1}){const dt={...isSVGComponent(ot)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:it,useRender:createUseRender(ut),createVisualElement:g,Component:ot};return createRendererMotionComponent(dt)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const it=window.matchMedia("(prefers-reduced-motion)"),g=()=>prefersReducedMotion.current=it.matches;it.addListener(g),g()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(it,g,et){for(const ot in g){const ut=g[ot],ct=et[ot];if(isMotionValue(ut))it.addValue(ot,ut);else if(isMotionValue(ct))it.addValue(ot,motionValue(ut,{owner:it}));else if(ct!==ut)if(it.hasValue(ot)){const dt=it.getValue(ot);dt.liveStyle===!0?dt.jump(ut):dt.hasAnimated||dt.set(ut)}else{const dt=it.getStaticValue(ot);it.addValue(ot,motionValue(dt!==void 0?dt:ut,{owner:it}))}}for(const ot in et)g[ot]===void 0&&it.removeValue(ot);return g}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color,complex],findValueType=it=>valueTypes.find(testValueType(it)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(g,et,ot){return{}}constructor({parent:g,props:et,presenceContext:ot,reducedMotionConfig:ut,blockInitialAnimation:ct,visualState:dt},ft={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Ft=time.now();this.renderScheduledAt<Ft&&(this.renderScheduledAt=Ft,frame.render(this.render,!1,!0))};const{latestValues:St,renderState:kt}=dt;this.latestValues=St,this.baseTarget={...St},this.initialValues=et.initial?{...St}:{},this.renderState=kt,this.parent=g,this.props=et,this.presenceContext=ot,this.depth=g?g.depth+1:0,this.reducedMotionConfig=ut,this.options=ft,this.blockInitialAnimation=!!ct,this.isControllingVariants=isControllingVariants(et),this.isVariantNode=isVariantNode(et),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(g&&g.current);const{willChange:Tt,...Rt}=this.scrapeMotionValuesFromProps(et,{},this);for(const Ft in Rt){const jt=Rt[Ft];St[Ft]!==void 0&&isMotionValue(jt)&&jt.set(St[Ft],!1)}}mount(g){this.current=g,visualElementStore.set(g,this),this.projection&&!this.projection.instance&&this.projection.mount(g),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((et,ot)=>this.bindToMotionValue(ot,et)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(g=>g()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const g in this.events)this.events[g].clear();for(const g in this.features){const et=this.features[g];et&&(et.unmount(),et.isMounted=!1)}this.current=null}bindToMotionValue(g,et){this.valueSubscriptions.has(g)&&this.valueSubscriptions.get(g)();const ot=transformProps.has(g),ut=et.on("change",ft=>{this.latestValues[g]=ft,this.props.onUpdate&&frame.preRender(this.notifyUpdate),ot&&this.projection&&(this.projection.isTransformDirty=!0)}),ct=et.on("renderRequest",this.scheduleRender);let dt;window.MotionCheckAppearSync&&(dt=window.MotionCheckAppearSync(this,g,et)),this.valueSubscriptions.set(g,()=>{ut(),ct(),dt&&dt(),et.owner&&et.stop()})}sortNodePosition(g){return!this.current||!this.sortInstanceNodePosition||this.type!==g.type?0:this.sortInstanceNodePosition(this.current,g.current)}updateFeatures(){let g="animation";for(g in featureDefinitions){const et=featureDefinitions[g];if(!et)continue;const{isEnabled:ot,Feature:ut}=et;if(!this.features[g]&&ut&&ot(this.props)&&(this.features[g]=new ut(this)),this.features[g]){const ct=this.features[g];ct.isMounted?ct.update():(ct.mount(),ct.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(g){return this.latestValues[g]}setStaticValue(g,et){this.latestValues[g]=et}update(g,et){(g.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=g,this.prevPresenceContext=this.presenceContext,this.presenceContext=et;for(let ot=0;ot<propEventHandlers.length;ot++){const ut=propEventHandlers[ot];this.propEventSubscriptions[ut]&&(this.propEventSubscriptions[ut](),delete this.propEventSubscriptions[ut]);const ct="on"+ut,dt=g[ct];dt&&(this.propEventSubscriptions[ut]=this.on(ut,dt))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(g,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(g){return this.props.variants?this.props.variants[g]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(g){const et=this.getClosestVariantNode();if(et)return et.variantChildren&&et.variantChildren.add(g),()=>et.variantChildren.delete(g)}addValue(g,et){const ot=this.values.get(g);et!==ot&&(ot&&this.removeValue(g),this.bindToMotionValue(g,et),this.values.set(g,et),this.latestValues[g]=et.get())}removeValue(g){this.values.delete(g);const et=this.valueSubscriptions.get(g);et&&(et(),this.valueSubscriptions.delete(g)),delete this.latestValues[g],this.removeValueFromRenderState(g,this.renderState)}hasValue(g){return this.values.has(g)}getValue(g,et){if(this.props.values&&this.props.values[g])return this.props.values[g];let ot=this.values.get(g);return ot===void 0&&et!==void 0&&(ot=motionValue(et===null?void 0:et,{owner:this}),this.addValue(g,ot)),ot}readValue(g,et){var ot;let ut=this.latestValues[g]!==void 0||!this.current?this.latestValues[g]:(ot=this.getBaseTargetFromProps(this.props,g))!==null&&ot!==void 0?ot:this.readValueFromInstance(this.current,g,this.options);return ut!=null&&(typeof ut=="string"&&(isNumericalString(ut)||isZeroValueString(ut))?ut=parseFloat(ut):!findValueType(ut)&&complex.test(et)&&(ut=getAnimatableNone(g,et)),this.setBaseTarget(g,isMotionValue(ut)?ut.get():ut)),isMotionValue(ut)?ut.get():ut}setBaseTarget(g,et){this.baseTarget[g]=et}getBaseTarget(g){var et;const{initial:ot}=this.props;let ut;if(typeof ot=="string"||typeof ot=="object"){const dt=resolveVariantFromProps(this.props,ot,(et=this.presenceContext)===null||et===void 0?void 0:et.custom);dt&&(ut=dt[g])}if(ot&&ut!==void 0)return ut;const ct=this.getBaseTargetFromProps(this.props,g);return ct!==void 0&&!isMotionValue(ct)?ct:this.initialValues[g]!==void 0&&ut===void 0?void 0:this.baseTarget[g]}on(g,et){return this.events[g]||(this.events[g]=new SubscriptionManager),this.events[g].add(et)}notify(g,...et){this.events[g]&&this.events[g].notify(...et)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(g,et){return g.compareDocumentPosition(et)&2?1:-1}getBaseTargetFromProps(g,et){return g.style?g.style[et]:void 0}removeValueFromRenderState(g,{vars:et,style:ot}){delete et[g],delete ot[g]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:g}=this.props;isMotionValue(g)&&(this.childSubscription=g.on("change",et=>{this.current&&(this.current.textContent=`${et}`)}))}}function getComputedStyle$1(it){return window.getComputedStyle(it)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}else{const ot=getComputedStyle$1(g),ut=(isCSSVariableName(et)?ot.getPropertyValue(et):ot[et])||0;return typeof ut=="string"?ut.trim():ut}}measureInstanceViewportBox(g,{transformPagePoint:et}){return measureViewportBox(g,et)}build(g,et,ot){buildHTMLStyles(g,et,ot.transformTemplate)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps$1(g,et,ot)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(g,et){return g[et]}readValueFromInstance(g,et){if(transformProps.has(et)){const ot=getDefaultValueType(et);return ot&&ot.default||0}return et=camelCaseAttributes.has(et)?et:camelToDash(et),g.getAttribute(et)}scrapeMotionValuesFromProps(g,et,ot){return scrapeMotionValuesFromProps(g,et,ot)}build(g,et,ot){buildSVGAttrs(g,et,this.isSVGTag,ot.transformTemplate)}renderInstance(g,et,ot,ut){renderSVG(g,et,ot,ut)}mount(g){this.isSVGTag=isSVGTag(g.tagName),super.mount(g)}}const createDomVisualElement=(it,g)=>isSVGComponent(it)?new SVGVisualElement(g):new HTMLVisualElement(g,{allowProjection:it!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(g){const et=this.props.childRef.current;if(et&&g.isPresent&&!this.props.isPresent){const ot=this.props.sizeRef.current;ot.height=et.offsetHeight||0,ot.width=et.offsetWidth||0,ot.top=et.offsetTop,ot.left=et.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:it,isPresent:g}){const et=reactExports.useId(),ot=reactExports.useRef(null),ut=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:ct}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:dt,height:ft,top:St,left:kt}=ut.current;if(g||!ot.current||!dt||!ft)return;ot.current.dataset.motionPopId=et;const Tt=document.createElement("style");return ct&&(Tt.nonce=ct),document.head.appendChild(Tt),Tt.sheet&&Tt.sheet.insertRule(`
          [data-motion-pop-id="${et}"] {
            position: absolute !important;
            width: ${dt}px !important;
            height: ${ft}px !important;
            top: ${St}px !important;
            left: ${kt}px !important;
          }
        `),()=>{document.head.removeChild(Tt)}},[g]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:g,childRef:ot,sizeRef:ut,children:reactExports.cloneElement(it,{ref:ot})})}const PresenceChild=({children:it,initial:g,isPresent:et,onExitComplete:ot,custom:ut,presenceAffectsLayout:ct,mode:dt})=>{const ft=useConstant(newChildrenMap),St=reactExports.useId(),kt=reactExports.useCallback(Rt=>{ft.set(Rt,!0);for(const Ft of ft.values())if(!Ft)return;ot&&ot()},[ft,ot]),Tt=reactExports.useMemo(()=>({id:St,initial:g,isPresent:et,custom:ut,onExitComplete:kt,register:Rt=>(ft.set(Rt,!1),()=>ft.delete(Rt))}),ct?[Math.random(),kt]:[et,kt]);return reactExports.useMemo(()=>{ft.forEach((Rt,Ft)=>ft.set(Ft,!1))},[et]),reactExports.useEffect(()=>{!et&&!ft.size&&ot&&ot()},[et]),dt==="popLayout"&&(it=jsxRuntimeExports.jsx(PopChild,{isPresent:et,children:it})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Tt,children:it})};function newChildrenMap(){return new Map}const getChildKey=it=>it.key||"";function onlyElements(it){const g=[];return reactExports.Children.forEach(it,et=>{reactExports.isValidElement(et)&&g.push(et)}),g}const AnimatePresence=({children:it,exitBeforeEnter:g,custom:et,initial:ot=!0,onExitComplete:ut,presenceAffectsLayout:ct=!0,mode:dt="sync"})=>{const ft=reactExports.useMemo(()=>onlyElements(it),[it]),St=ft.map(getChildKey),kt=reactExports.useRef(!0),Tt=reactExports.useRef(ft),Rt=useConstant(()=>new Map),[Ft,jt]=reactExports.useState(ft),[Bt,zt]=reactExports.useState(ft);useIsomorphicLayoutEffect$2(()=>{kt.current=!1,Tt.current=ft;for(let Kt=0;Kt<Bt.length;Kt++){const Yt=getChildKey(Bt[Kt]);St.includes(Yt)?Rt.delete(Yt):Rt.get(Yt)!==!0&&Rt.set(Yt,!1)}},[Bt,St.length,St.join("-")]);const Ht=[];if(ft!==Ft){let Kt=[...ft];for(let Yt=0;Yt<Bt.length;Yt++){const er=Bt[Yt],ar=getChildKey(er);St.includes(ar)||(Kt.splice(Yt,0,er),Ht.push(er))}dt==="wait"&&Ht.length&&(Kt=Ht),zt(onlyElements(Kt)),jt(ft);return}const{forceRender:Ut}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Bt.map(Kt=>{const Yt=getChildKey(Kt),er=ft===Bt||St.includes(Yt),ar=()=>{if(Rt.has(Yt))Rt.set(Yt,!0);else return;let ir=!0;Rt.forEach(lr=>{lr||(ir=!1)}),ir&&(Ut==null||Ut(),zt(Tt.current),ut&&ut())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:er,initial:!kt.current||ot?void 0:!1,custom:er?void 0:et,presenceAffectsLayout:ct,mode:dt,onExitComplete:er?void 0:ar,children:Kt},Yt)})})};function useMotionValue(it){const g=useConstant(()=>motionValue(it)),{isStatic:et}=reactExports.useContext(MotionConfigContext);if(et){const[,ot]=reactExports.useState(it);reactExports.useEffect(()=>g.on("change",ot),[])}return g}function toNumber(it){return typeof it=="number"?it:parseFloat(it)}function useSpring(it,g={}){const{isStatic:et}=reactExports.useContext(MotionConfigContext),ot=reactExports.useRef(null),ut=useMotionValue(isMotionValue(it)?toNumber(it.get()):it),ct=reactExports.useRef(ut.get()),dt=reactExports.useRef(()=>{}),ft=()=>{const kt=ot.current;kt&&kt.time===0&&kt.sample(frameData.delta),St(),ot.current=animateValue({keyframes:[ut.get(),ct.current],velocity:ut.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...g,onUpdate:dt.current})},St=()=>{ot.current&&ot.current.stop()};return reactExports.useInsertionEffect(()=>ut.attach((kt,Tt)=>et?Tt(kt):(ct.current=kt,dt.current=Tt,frame.update(ft),ut.get()),St),[JSON.stringify(g)]),useIsomorphicLayoutEffect$2(()=>{if(isMotionValue(it))return it.on("change",kt=>ut.set(toNumber(kt)))},[ut]),ut}function bind$1(it,g){return function(){return it.apply(g,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(it=>g=>{const et=toString$2.call(g);return it[et]||(it[et]=et.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=it=>(it=it.toLowerCase(),g=>kindOf(g)===it),typeOfTest=it=>g=>typeof g===it,{isArray:isArray$4}=Array,isUndefined=typeOfTest("undefined");function isBuffer$3(it){return it!==null&&!isUndefined(it)&&it.constructor!==null&&!isUndefined(it.constructor)&&isFunction$4(it.constructor.isBuffer)&&it.constructor.isBuffer(it)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(it){let g;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?g=ArrayBuffer.isView(it):g=it&&it.buffer&&isArrayBuffer$1(it.buffer),g}const isString$1=typeOfTest("string"),isFunction$4=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$3=it=>it!==null&&typeof it=="object",isBoolean=it=>it===!0||it===!1,isPlainObject$1=it=>{if(kindOf(it)!=="object")return!1;const g=getPrototypeOf(it);return(g===null||g===Object.prototype||Object.getPrototypeOf(g)===null)&&!(Symbol.toStringTag in it)&&!(Symbol.iterator in it)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=it=>isObject$3(it)&&isFunction$4(it.pipe),isFormData=it=>{let g;return it&&(typeof FormData=="function"&&it instanceof FormData||isFunction$4(it.append)&&((g=kindOf(it))==="formdata"||g==="object"&&isFunction$4(it.toString)&&it.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=it=>it.trim?it.trim():it.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(it,g,{allOwnKeys:et=!1}={}){if(it===null||typeof it>"u")return;let ot,ut;if(typeof it!="object"&&(it=[it]),isArray$4(it))for(ot=0,ut=it.length;ot<ut;ot++)g.call(null,it[ot],ot,it);else{const ct=et?Object.getOwnPropertyNames(it):Object.keys(it),dt=ct.length;let ft;for(ot=0;ot<dt;ot++)ft=ct[ot],g.call(null,it[ft],ft,it)}}function findKey(it,g){g=g.toLowerCase();const et=Object.keys(it);let ot=et.length,ut;for(;ot-- >0;)if(ut=et[ot],g===ut.toLowerCase())return ut;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=it=>!isUndefined(it)&&it!==_global;function merge(){const{caseless:it}=isContextDefined(this)&&this||{},g={},et=(ot,ut)=>{const ct=it&&findKey(g,ut)||ut;isPlainObject$1(g[ct])&&isPlainObject$1(ot)?g[ct]=merge(g[ct],ot):isPlainObject$1(ot)?g[ct]=merge({},ot):isArray$4(ot)?g[ct]=ot.slice():g[ct]=ot};for(let ot=0,ut=arguments.length;ot<ut;ot++)arguments[ot]&&forEach$1(arguments[ot],et);return g}const extend=(it,g,et,{allOwnKeys:ot}={})=>(forEach$1(g,(ut,ct)=>{et&&isFunction$4(ut)?it[ct]=bind$1(ut,et):it[ct]=ut},{allOwnKeys:ot}),it),stripBOM=it=>(it.charCodeAt(0)===65279&&(it=it.slice(1)),it),inherits=(it,g,et,ot)=>{it.prototype=Object.create(g.prototype,ot),it.prototype.constructor=it,Object.defineProperty(it,"super",{value:g.prototype}),et&&Object.assign(it.prototype,et)},toFlatObject=(it,g,et,ot)=>{let ut,ct,dt;const ft={};if(g=g||{},it==null)return g;do{for(ut=Object.getOwnPropertyNames(it),ct=ut.length;ct-- >0;)dt=ut[ct],(!ot||ot(dt,it,g))&&!ft[dt]&&(g[dt]=it[dt],ft[dt]=!0);it=et!==!1&&getPrototypeOf(it)}while(it&&(!et||et(it,g))&&it!==Object.prototype);return g},endsWith=(it,g,et)=>{it=String(it),(et===void 0||et>it.length)&&(et=it.length),et-=g.length;const ot=it.indexOf(g,et);return ot!==-1&&ot===et},toArray=it=>{if(!it)return null;if(isArray$4(it))return it;let g=it.length;if(!isNumber$1(g))return null;const et=new Array(g);for(;g-- >0;)et[g]=it[g];return et},isTypedArray$3=(it=>g=>it&&g instanceof it)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(it,g)=>{const ot=(it&&it[Symbol.iterator]).call(it);let ut;for(;(ut=ot.next())&&!ut.done;){const ct=ut.value;g.call(it,ct[0],ct[1])}},matchAll=(it,g)=>{let et;const ot=[];for(;(et=it.exec(g))!==null;)ot.push(et);return ot},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=it=>it.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(et,ot,ut){return ot.toUpperCase()+ut}),hasOwnProperty$9=(({hasOwnProperty:it})=>(g,et)=>it.call(g,et))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(it,g)=>{const et=Object.getOwnPropertyDescriptors(it),ot={};forEach$1(et,(ut,ct)=>{let dt;(dt=g(ut,ct,it))!==!1&&(ot[ct]=dt||ut)}),Object.defineProperties(it,ot)},freezeMethods=it=>{reduceDescriptors(it,(g,et)=>{if(isFunction$4(it)&&["arguments","caller","callee"].indexOf(et)!==-1)return!1;const ot=it[et];if(isFunction$4(ot)){if(g.enumerable=!1,"writable"in g){g.writable=!1;return}g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+et+"'")})}})},toObjectSet=(it,g)=>{const et={},ot=ut=>{ut.forEach(ct=>{et[ct]=!0})};return isArray$4(it)?ot(it):ot(String(it).split(g)),et},noop$2=()=>{},toFiniteNumber=(it,g)=>it!=null&&Number.isFinite(it=+it)?it:g,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET={DIGIT:DIGIT$1,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT$1},generateString=(it=16,g=ALPHABET.ALPHA_DIGIT)=>{let et="";const{length:ot}=g;for(;it--;)et+=g[Math.random()*ot|0];return et};function isSpecCompliantForm(it){return!!(it&&isFunction$4(it.append)&&it[Symbol.toStringTag]==="FormData"&&it[Symbol.iterator])}const toJSONObject=it=>{const g=new Array(10),et=(ot,ut)=>{if(isObject$3(ot)){if(g.indexOf(ot)>=0)return;if(!("toJSON"in ot)){g[ut]=ot;const ct=isArray$4(ot)?[]:{};return forEach$1(ot,(dt,ft)=>{const St=et(dt,ut+1);!isUndefined(St)&&(ct[ft]=St)}),g[ut]=void 0,ct}}return ot};return et(it,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=it=>it&&(isObject$3(it)||isFunction$4(it))&&isFunction$4(it.then)&&isFunction$4(it.catch),_setImmediate=((it,g)=>it?setImmediate:g?((et,ot)=>(_global.addEventListener("message",({source:ut,data:ct})=>{ut===_global&&ct===et&&ot.length&&ot.shift()()},!1),ut=>{ot.push(ut),_global.postMessage(et,"*")}))(`axios@${Math.random()}`,[]):et=>setTimeout(et))(typeof setImmediate=="function",isFunction$4(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$8={isArray:isArray$4,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$3,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$3,isPlainObject:isPlainObject$1,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$4,isStream,isURLSearchParams,isTypedArray:isTypedArray$3,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$9,hasOwnProp:hasOwnProperty$9,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(it,g,et,ot,ut){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=it,this.name="AxiosError",g&&(this.code=g),et&&(this.config=et),ot&&(this.request=ot),ut&&(this.response=ut,this.status=ut.status?ut.status:null)}utils$8.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$8.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(it=>{descriptors[it]={value:it}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(it,g,et,ot,ut,ct)=>{const dt=Object.create(prototype$1);return utils$8.toFlatObject(it,dt,function(St){return St!==Error.prototype},ft=>ft!=="isAxiosError"),AxiosError.call(dt,it.message,g,et,ot,ut),dt.cause=it,dt.name=it.name,ct&&Object.assign(dt,ct),dt};const httpAdapter=null;function isVisitable(it){return utils$8.isPlainObject(it)||utils$8.isArray(it)}function removeBrackets(it){return utils$8.endsWith(it,"[]")?it.slice(0,-2):it}function renderKey(it,g,et){return it?it.concat(g).map(function(ut,ct){return ut=removeBrackets(ut),!et&&ct?"["+ut+"]":ut}).join(et?".":""):g}function isFlatArray(it){return utils$8.isArray(it)&&!it.some(isVisitable)}const predicates=utils$8.toFlatObject(utils$8,{},null,function(g){return/^is[A-Z]/.test(g)});function toFormData(it,g,et){if(!utils$8.isObject(it))throw new TypeError("target must be an object");g=g||new FormData,et=utils$8.toFlatObject(et,{metaTokens:!0,dots:!1,indexes:!1},!1,function(zt,Ht){return!utils$8.isUndefined(Ht[zt])});const ot=et.metaTokens,ut=et.visitor||Tt,ct=et.dots,dt=et.indexes,St=(et.Blob||typeof Blob<"u"&&Blob)&&utils$8.isSpecCompliantForm(g);if(!utils$8.isFunction(ut))throw new TypeError("visitor must be a function");function kt(Bt){if(Bt===null)return"";if(utils$8.isDate(Bt))return Bt.toISOString();if(!St&&utils$8.isBlob(Bt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$8.isArrayBuffer(Bt)||utils$8.isTypedArray(Bt)?St&&typeof Blob=="function"?new Blob([Bt]):Buffer.from(Bt):Bt}function Tt(Bt,zt,Ht){let Ut=Bt;if(Bt&&!Ht&&typeof Bt=="object"){if(utils$8.endsWith(zt,"{}"))zt=ot?zt:zt.slice(0,-2),Bt=JSON.stringify(Bt);else if(utils$8.isArray(Bt)&&isFlatArray(Bt)||(utils$8.isFileList(Bt)||utils$8.endsWith(zt,"[]"))&&(Ut=utils$8.toArray(Bt)))return zt=removeBrackets(zt),Ut.forEach(function(Yt,er){!(utils$8.isUndefined(Yt)||Yt===null)&&g.append(dt===!0?renderKey([zt],er,ct):dt===null?zt:zt+"[]",kt(Yt))}),!1}return isVisitable(Bt)?!0:(g.append(renderKey(Ht,zt,ct),kt(Bt)),!1)}const Rt=[],Ft=Object.assign(predicates,{defaultVisitor:Tt,convertValue:kt,isVisitable});function jt(Bt,zt){if(!utils$8.isUndefined(Bt)){if(Rt.indexOf(Bt)!==-1)throw Error("Circular reference detected in "+zt.join("."));Rt.push(Bt),utils$8.forEach(Bt,function(Ut,Kt){(!(utils$8.isUndefined(Ut)||Ut===null)&&ut.call(g,Ut,utils$8.isString(Kt)?Kt.trim():Kt,zt,Ft))===!0&&jt(Ut,zt?zt.concat(Kt):[Kt])}),Rt.pop()}}if(!utils$8.isObject(it))throw new TypeError("data must be an object");return jt(it),g}function encode$1(it){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(it).replace(/[!'()~]|%20|%00/g,function(ot){return g[ot]})}function AxiosURLSearchParams(it,g){this._pairs=[],it&&toFormData(it,this,g)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(g,et){this._pairs.push([g,et])};prototype.toString=function(g){const et=g?function(ot){return g.call(this,ot,encode$1)}:encode$1;return this._pairs.map(function(ut){return et(ut[0])+"="+et(ut[1])},"").join("&")};function encode(it){return encodeURIComponent(it).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(it,g,et){if(!g)return it;const ot=et&&et.encode||encode;utils$8.isFunction(et)&&(et={serialize:et});const ut=et&&et.serialize;let ct;if(ut?ct=ut(g,et):ct=utils$8.isURLSearchParams(g)?g.toString():new AxiosURLSearchParams(g,et).toString(ot),ct){const dt=it.indexOf("#");dt!==-1&&(it=it.slice(0,dt)),it+=(it.indexOf("?")===-1?"?":"&")+ct}return it}class InterceptorManager{constructor(){this.handlers=[]}use(g,et,ot){return this.handlers.push({fulfilled:g,rejected:et,synchronous:ot?ot.synchronous:!1,runWhen:ot?ot.runWhen:null}),this.handlers.length-1}eject(g){this.handlers[g]&&(this.handlers[g]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(g){utils$8.forEach(this.handlers,function(ot){ot!==null&&g(ot)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils$7,...platform$1};function toURLEncodedForm(it,g){return toFormData(it,new platform.classes.URLSearchParams,Object.assign({visitor:function(et,ot,ut,ct){return platform.isNode&&utils$8.isBuffer(et)?(this.append(ot,et.toString("base64")),!1):ct.defaultVisitor.apply(this,arguments)}},g))}function parsePropPath(it){return utils$8.matchAll(/\w+|\[(\w*)]/g,it).map(g=>g[0]==="[]"?"":g[1]||g[0])}function arrayToObject(it){const g={},et=Object.keys(it);let ot;const ut=et.length;let ct;for(ot=0;ot<ut;ot++)ct=et[ot],g[ct]=it[ct];return g}function formDataToJSON(it){function g(et,ot,ut,ct){let dt=et[ct++];if(dt==="__proto__")return!0;const ft=Number.isFinite(+dt),St=ct>=et.length;return dt=!dt&&utils$8.isArray(ut)?ut.length:dt,St?(utils$8.hasOwnProp(ut,dt)?ut[dt]=[ut[dt],ot]:ut[dt]=ot,!ft):((!ut[dt]||!utils$8.isObject(ut[dt]))&&(ut[dt]=[]),g(et,ot,ut[dt],ct)&&utils$8.isArray(ut[dt])&&(ut[dt]=arrayToObject(ut[dt])),!ft)}if(utils$8.isFormData(it)&&utils$8.isFunction(it.entries)){const et={};return utils$8.forEachEntry(it,(ot,ut)=>{g(parsePropPath(ot),ut,et,0)}),et}return null}function stringifySafely(it,g,et){if(utils$8.isString(it))try{return(g||JSON.parse)(it),utils$8.trim(it)}catch(ot){if(ot.name!=="SyntaxError")throw ot}return(et||JSON.stringify)(it)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(g,et){const ot=et.getContentType()||"",ut=ot.indexOf("application/json")>-1,ct=utils$8.isObject(g);if(ct&&utils$8.isHTMLForm(g)&&(g=new FormData(g)),utils$8.isFormData(g))return ut?JSON.stringify(formDataToJSON(g)):g;if(utils$8.isArrayBuffer(g)||utils$8.isBuffer(g)||utils$8.isStream(g)||utils$8.isFile(g)||utils$8.isBlob(g)||utils$8.isReadableStream(g))return g;if(utils$8.isArrayBufferView(g))return g.buffer;if(utils$8.isURLSearchParams(g))return et.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),g.toString();let ft;if(ct){if(ot.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(g,this.formSerializer).toString();if((ft=utils$8.isFileList(g))||ot.indexOf("multipart/form-data")>-1){const St=this.env&&this.env.FormData;return toFormData(ft?{"files[]":g}:g,St&&new St,this.formSerializer)}}return ct||ut?(et.setContentType("application/json",!1),stringifySafely(g)):g}],transformResponse:[function(g){const et=this.transitional||defaults$1.transitional,ot=et&&et.forcedJSONParsing,ut=this.responseType==="json";if(utils$8.isResponse(g)||utils$8.isReadableStream(g))return g;if(g&&utils$8.isString(g)&&(ot&&!this.responseType||ut)){const dt=!(et&&et.silentJSONParsing)&&ut;try{return JSON.parse(g)}catch(ft){if(dt)throw ft.name==="SyntaxError"?AxiosError.from(ft,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):ft}}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$8.forEach(["delete","get","head","post","put","patch"],it=>{defaults$1.headers[it]={}});const defaults$2=defaults$1,ignoreDuplicateOf=utils$8.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=it=>{const g={};let et,ot,ut;return it&&it.split(`
`).forEach(function(dt){ut=dt.indexOf(":"),et=dt.substring(0,ut).trim().toLowerCase(),ot=dt.substring(ut+1).trim(),!(!et||g[et]&&ignoreDuplicateOf[et])&&(et==="set-cookie"?g[et]?g[et].push(ot):g[et]=[ot]:g[et]=g[et]?g[et]+", "+ot:ot)}),g},$internals=Symbol("internals");function normalizeHeader(it){return it&&String(it).trim().toLowerCase()}function normalizeValue(it){return it===!1||it==null?it:utils$8.isArray(it)?it.map(normalizeValue):String(it)}function parseTokens(it){const g=Object.create(null),et=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let ot;for(;ot=et.exec(it);)g[ot[1]]=ot[2];return g}const isValidHeaderName=it=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(it.trim());function matchHeaderValue(it,g,et,ot,ut){if(utils$8.isFunction(ot))return ot.call(this,g,et);if(ut&&(g=et),!!utils$8.isString(g)){if(utils$8.isString(ot))return g.indexOf(ot)!==-1;if(utils$8.isRegExp(ot))return ot.test(g)}}function formatHeader(it){return it.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(g,et,ot)=>et.toUpperCase()+ot)}function buildAccessors(it,g){const et=utils$8.toCamelCase(" "+g);["get","set","has"].forEach(ot=>{Object.defineProperty(it,ot+et,{value:function(ut,ct,dt){return this[ot].call(this,g,ut,ct,dt)},configurable:!0})})}class AxiosHeaders{constructor(g){g&&this.set(g)}set(g,et,ot){const ut=this;function ct(ft,St,kt){const Tt=normalizeHeader(St);if(!Tt)throw new Error("header name must be a non-empty string");const Rt=utils$8.findKey(ut,Tt);(!Rt||ut[Rt]===void 0||kt===!0||kt===void 0&&ut[Rt]!==!1)&&(ut[Rt||St]=normalizeValue(ft))}const dt=(ft,St)=>utils$8.forEach(ft,(kt,Tt)=>ct(kt,Tt,St));if(utils$8.isPlainObject(g)||g instanceof this.constructor)dt(g,et);else if(utils$8.isString(g)&&(g=g.trim())&&!isValidHeaderName(g))dt(parseHeaders(g),et);else if(utils$8.isHeaders(g))for(const[ft,St]of g.entries())ct(St,ft,ot);else g!=null&&ct(et,g,ot);return this}get(g,et){if(g=normalizeHeader(g),g){const ot=utils$8.findKey(this,g);if(ot){const ut=this[ot];if(!et)return ut;if(et===!0)return parseTokens(ut);if(utils$8.isFunction(et))return et.call(this,ut,ot);if(utils$8.isRegExp(et))return et.exec(ut);throw new TypeError("parser must be boolean|regexp|function")}}}has(g,et){if(g=normalizeHeader(g),g){const ot=utils$8.findKey(this,g);return!!(ot&&this[ot]!==void 0&&(!et||matchHeaderValue(this,this[ot],ot,et)))}return!1}delete(g,et){const ot=this;let ut=!1;function ct(dt){if(dt=normalizeHeader(dt),dt){const ft=utils$8.findKey(ot,dt);ft&&(!et||matchHeaderValue(ot,ot[ft],ft,et))&&(delete ot[ft],ut=!0)}}return utils$8.isArray(g)?g.forEach(ct):ct(g),ut}clear(g){const et=Object.keys(this);let ot=et.length,ut=!1;for(;ot--;){const ct=et[ot];(!g||matchHeaderValue(this,this[ct],ct,g,!0))&&(delete this[ct],ut=!0)}return ut}normalize(g){const et=this,ot={};return utils$8.forEach(this,(ut,ct)=>{const dt=utils$8.findKey(ot,ct);if(dt){et[dt]=normalizeValue(ut),delete et[ct];return}const ft=g?formatHeader(ct):String(ct).trim();ft!==ct&&delete et[ct],et[ft]=normalizeValue(ut),ot[ft]=!0}),this}concat(...g){return this.constructor.concat(this,...g)}toJSON(g){const et=Object.create(null);return utils$8.forEach(this,(ot,ut)=>{ot!=null&&ot!==!1&&(et[ut]=g&&utils$8.isArray(ot)?ot.join(", "):ot)}),et}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([g,et])=>g+": "+et).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(g){return g instanceof this?g:new this(g)}static concat(g,...et){const ot=new this(g);return et.forEach(ut=>ot.set(ut)),ot}static accessor(g){const ot=(this[$internals]=this[$internals]={accessors:{}}).accessors,ut=this.prototype;function ct(dt){const ft=normalizeHeader(dt);ot[ft]||(buildAccessors(ut,dt),ot[ft]=!0)}return utils$8.isArray(g)?g.forEach(ct):ct(g),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$8.reduceDescriptors(AxiosHeaders.prototype,({value:it},g)=>{let et=g[0].toUpperCase()+g.slice(1);return{get:()=>it,set(ot){this[et]=ot}}});utils$8.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(it,g){const et=this||defaults$2,ot=g||et,ut=AxiosHeaders$1.from(ot.headers);let ct=ot.data;return utils$8.forEach(it,function(ft){ct=ft.call(et,ct,ut.normalize(),g?g.status:void 0)}),ut.normalize(),ct}function isCancel(it){return!!(it&&it.__CANCEL__)}function CanceledError(it,g,et){AxiosError.call(this,it??"canceled",AxiosError.ERR_CANCELED,g,et),this.name="CanceledError"}utils$8.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(it,g,et){const ot=et.config.validateStatus;!et.status||!ot||ot(et.status)?it(et):g(new AxiosError("Request failed with status code "+et.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(et.status/100)-4],et.config,et.request,et))}function parseProtocol(it){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(it);return g&&g[1]||""}function speedometer(it,g){it=it||10;const et=new Array(it),ot=new Array(it);let ut=0,ct=0,dt;return g=g!==void 0?g:1e3,function(St){const kt=Date.now(),Tt=ot[ct];dt||(dt=kt),et[ut]=St,ot[ut]=kt;let Rt=ct,Ft=0;for(;Rt!==ut;)Ft+=et[Rt++],Rt=Rt%it;if(ut=(ut+1)%it,ut===ct&&(ct=(ct+1)%it),kt-dt<g)return;const jt=Tt&&kt-Tt;return jt?Math.round(Ft*1e3/jt):void 0}}function throttle(it,g){let et=0,ot=1e3/g,ut,ct;const dt=(kt,Tt=Date.now())=>{et=Tt,ut=null,ct&&(clearTimeout(ct),ct=null),it.apply(null,kt)};return[(...kt)=>{const Tt=Date.now(),Rt=Tt-et;Rt>=ot?dt(kt,Tt):(ut=kt,ct||(ct=setTimeout(()=>{ct=null,dt(ut)},ot-Rt)))},()=>ut&&dt(ut)]}const progressEventReducer=(it,g,et=3)=>{let ot=0;const ut=speedometer(50,250);return throttle(ct=>{const dt=ct.loaded,ft=ct.lengthComputable?ct.total:void 0,St=dt-ot,kt=ut(St),Tt=dt<=ft;ot=dt;const Rt={loaded:dt,total:ft,progress:ft?dt/ft:void 0,bytes:St,rate:kt||void 0,estimated:kt&&ft&&Tt?(ft-dt)/kt:void 0,event:ct,lengthComputable:ft!=null,[g?"download":"upload"]:!0};it(Rt)},et)},progressEventDecorator=(it,g)=>{const et=it!=null;return[ot=>g[0]({lengthComputable:et,total:it,loaded:ot}),g[1]]},asyncDecorator=it=>(...g)=>utils$8.asap(()=>it(...g)),isURLSameOrigin=platform.hasStandardBrowserEnv?((it,g)=>et=>(et=new URL(et,platform.origin),it.protocol===et.protocol&&it.host===et.host&&(g||it.port===et.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(it,g,et,ot,ut,ct){const dt=[it+"="+encodeURIComponent(g)];utils$8.isNumber(et)&&dt.push("expires="+new Date(et).toGMTString()),utils$8.isString(ot)&&dt.push("path="+ot),utils$8.isString(ut)&&dt.push("domain="+ut),ct===!0&&dt.push("secure"),document.cookie=dt.join("; ")},read(it){const g=document.cookie.match(new RegExp("(^|;\\s*)("+it+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(it){this.write(it,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(it){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(it)}function combineURLs(it,g){return g?it.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):it}function buildFullPath(it,g){return it&&!isAbsoluteURL(g)?combineURLs(it,g):g}const headersToObject=it=>it instanceof AxiosHeaders$1?{...it}:it;function mergeConfig(it,g){g=g||{};const et={};function ot(kt,Tt,Rt,Ft){return utils$8.isPlainObject(kt)&&utils$8.isPlainObject(Tt)?utils$8.merge.call({caseless:Ft},kt,Tt):utils$8.isPlainObject(Tt)?utils$8.merge({},Tt):utils$8.isArray(Tt)?Tt.slice():Tt}function ut(kt,Tt,Rt,Ft){if(utils$8.isUndefined(Tt)){if(!utils$8.isUndefined(kt))return ot(void 0,kt,Rt,Ft)}else return ot(kt,Tt,Rt,Ft)}function ct(kt,Tt){if(!utils$8.isUndefined(Tt))return ot(void 0,Tt)}function dt(kt,Tt){if(utils$8.isUndefined(Tt)){if(!utils$8.isUndefined(kt))return ot(void 0,kt)}else return ot(void 0,Tt)}function ft(kt,Tt,Rt){if(Rt in g)return ot(kt,Tt);if(Rt in it)return ot(void 0,kt)}const St={url:ct,method:ct,data:ct,baseURL:dt,transformRequest:dt,transformResponse:dt,paramsSerializer:dt,timeout:dt,timeoutMessage:dt,withCredentials:dt,withXSRFToken:dt,adapter:dt,responseType:dt,xsrfCookieName:dt,xsrfHeaderName:dt,onUploadProgress:dt,onDownloadProgress:dt,decompress:dt,maxContentLength:dt,maxBodyLength:dt,beforeRedirect:dt,transport:dt,httpAgent:dt,httpsAgent:dt,cancelToken:dt,socketPath:dt,responseEncoding:dt,validateStatus:ft,headers:(kt,Tt,Rt)=>ut(headersToObject(kt),headersToObject(Tt),Rt,!0)};return utils$8.forEach(Object.keys(Object.assign({},it,g)),function(Tt){const Rt=St[Tt]||ut,Ft=Rt(it[Tt],g[Tt],Tt);utils$8.isUndefined(Ft)&&Rt!==ft||(et[Tt]=Ft)}),et}const resolveConfig=it=>{const g=mergeConfig({},it);let{data:et,withXSRFToken:ot,xsrfHeaderName:ut,xsrfCookieName:ct,headers:dt,auth:ft}=g;g.headers=dt=AxiosHeaders$1.from(dt),g.url=buildURL(buildFullPath(g.baseURL,g.url),it.params,it.paramsSerializer),ft&&dt.set("Authorization","Basic "+btoa((ft.username||"")+":"+(ft.password?unescape(encodeURIComponent(ft.password)):"")));let St;if(utils$8.isFormData(et)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)dt.setContentType(void 0);else if((St=dt.getContentType())!==!1){const[kt,...Tt]=St?St.split(";").map(Rt=>Rt.trim()).filter(Boolean):[];dt.setContentType([kt||"multipart/form-data",...Tt].join("; "))}}if(platform.hasStandardBrowserEnv&&(ot&&utils$8.isFunction(ot)&&(ot=ot(g)),ot||ot!==!1&&isURLSameOrigin(g.url))){const kt=ut&&ct&&cookies.read(ct);kt&&dt.set(ut,kt)}return g},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(it){return new Promise(function(et,ot){const ut=resolveConfig(it);let ct=ut.data;const dt=AxiosHeaders$1.from(ut.headers).normalize();let{responseType:ft,onUploadProgress:St,onDownloadProgress:kt}=ut,Tt,Rt,Ft,jt,Bt;function zt(){jt&&jt(),Bt&&Bt(),ut.cancelToken&&ut.cancelToken.unsubscribe(Tt),ut.signal&&ut.signal.removeEventListener("abort",Tt)}let Ht=new XMLHttpRequest;Ht.open(ut.method.toUpperCase(),ut.url,!0),Ht.timeout=ut.timeout;function Ut(){if(!Ht)return;const Yt=AxiosHeaders$1.from("getAllResponseHeaders"in Ht&&Ht.getAllResponseHeaders()),ar={data:!ft||ft==="text"||ft==="json"?Ht.responseText:Ht.response,status:Ht.status,statusText:Ht.statusText,headers:Yt,config:it,request:Ht};settle(function(lr){et(lr),zt()},function(lr){ot(lr),zt()},ar),Ht=null}"onloadend"in Ht?Ht.onloadend=Ut:Ht.onreadystatechange=function(){!Ht||Ht.readyState!==4||Ht.status===0&&!(Ht.responseURL&&Ht.responseURL.indexOf("file:")===0)||setTimeout(Ut)},Ht.onabort=function(){Ht&&(ot(new AxiosError("Request aborted",AxiosError.ECONNABORTED,it,Ht)),Ht=null)},Ht.onerror=function(){ot(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,Ht)),Ht=null},Ht.ontimeout=function(){let er=ut.timeout?"timeout of "+ut.timeout+"ms exceeded":"timeout exceeded";const ar=ut.transitional||transitionalDefaults;ut.timeoutErrorMessage&&(er=ut.timeoutErrorMessage),ot(new AxiosError(er,ar.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,it,Ht)),Ht=null},ct===void 0&&dt.setContentType(null),"setRequestHeader"in Ht&&utils$8.forEach(dt.toJSON(),function(er,ar){Ht.setRequestHeader(ar,er)}),utils$8.isUndefined(ut.withCredentials)||(Ht.withCredentials=!!ut.withCredentials),ft&&ft!=="json"&&(Ht.responseType=ut.responseType),kt&&([Ft,Bt]=progressEventReducer(kt,!0),Ht.addEventListener("progress",Ft)),St&&Ht.upload&&([Rt,jt]=progressEventReducer(St),Ht.upload.addEventListener("progress",Rt),Ht.upload.addEventListener("loadend",jt)),(ut.cancelToken||ut.signal)&&(Tt=Yt=>{Ht&&(ot(!Yt||Yt.type?new CanceledError(null,it,Ht):Yt),Ht.abort(),Ht=null)},ut.cancelToken&&ut.cancelToken.subscribe(Tt),ut.signal&&(ut.signal.aborted?Tt():ut.signal.addEventListener("abort",Tt)));const Kt=parseProtocol(ut.url);if(Kt&&platform.protocols.indexOf(Kt)===-1){ot(new AxiosError("Unsupported protocol "+Kt+":",AxiosError.ERR_BAD_REQUEST,it));return}Ht.send(ct||null)})},composeSignals=(it,g)=>{const{length:et}=it=it?it.filter(Boolean):[];if(g||et){let ot=new AbortController,ut;const ct=function(kt){if(!ut){ut=!0,ft();const Tt=kt instanceof Error?kt:this.reason;ot.abort(Tt instanceof AxiosError?Tt:new CanceledError(Tt instanceof Error?Tt.message:Tt))}};let dt=g&&setTimeout(()=>{dt=null,ct(new AxiosError(`timeout ${g} of ms exceeded`,AxiosError.ETIMEDOUT))},g);const ft=()=>{it&&(dt&&clearTimeout(dt),dt=null,it.forEach(kt=>{kt.unsubscribe?kt.unsubscribe(ct):kt.removeEventListener("abort",ct)}),it=null)};it.forEach(kt=>kt.addEventListener("abort",ct));const{signal:St}=ot;return St.unsubscribe=()=>utils$8.asap(ft),St}},composeSignals$1=composeSignals,streamChunk=function*(it,g){let et=it.byteLength;if(!g||et<g){yield it;return}let ot=0,ut;for(;ot<et;)ut=ot+g,yield it.slice(ot,ut),ot=ut},readBytes=async function*(it,g){for await(const et of readStream(it))yield*streamChunk(et,g)},readStream=async function*(it){if(it[Symbol.asyncIterator]){yield*it;return}const g=it.getReader();try{for(;;){const{done:et,value:ot}=await g.read();if(et)break;yield ot}}finally{await g.cancel()}},trackStream=(it,g,et,ot)=>{const ut=readBytes(it,g);let ct=0,dt,ft=St=>{dt||(dt=!0,ot&&ot(St))};return new ReadableStream({async pull(St){try{const{done:kt,value:Tt}=await ut.next();if(kt){ft(),St.close();return}let Rt=Tt.byteLength;if(et){let Ft=ct+=Rt;et(Ft)}St.enqueue(new Uint8Array(Tt))}catch(kt){throw ft(kt),kt}},cancel(St){return ft(St),ut.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(it=>g=>it.encode(g))(new TextEncoder):async it=>new Uint8Array(await new Response(it).arrayBuffer())),test=(it,...g)=>{try{return!!it(...g)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let it=!1;const g=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return it=!0,"half"}}).headers.has("Content-Type");return it&&!g}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$8.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(it=>it.body)};isFetchSupported&&(it=>{["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!resolvers[g]&&(resolvers[g]=utils$8.isFunction(it[g])?et=>et[g]():(et,ot)=>{throw new AxiosError(`Response type '${g}' is not supported`,AxiosError.ERR_NOT_SUPPORT,ot)})})})(new Response);const getBodyLength=async it=>{if(it==null)return 0;if(utils$8.isBlob(it))return it.size;if(utils$8.isSpecCompliantForm(it))return(await new Request(platform.origin,{method:"POST",body:it}).arrayBuffer()).byteLength;if(utils$8.isArrayBufferView(it)||utils$8.isArrayBuffer(it))return it.byteLength;if(utils$8.isURLSearchParams(it)&&(it=it+""),utils$8.isString(it))return(await encodeText(it)).byteLength},resolveBodyLength=async(it,g)=>{const et=utils$8.toFiniteNumber(it.getContentLength());return et??getBodyLength(g)},fetchAdapter=isFetchSupported&&(async it=>{let{url:g,method:et,data:ot,signal:ut,cancelToken:ct,timeout:dt,onDownloadProgress:ft,onUploadProgress:St,responseType:kt,headers:Tt,withCredentials:Rt="same-origin",fetchOptions:Ft}=resolveConfig(it);kt=kt?(kt+"").toLowerCase():"text";let jt=composeSignals$1([ut,ct&&ct.toAbortSignal()],dt),Bt;const zt=jt&&jt.unsubscribe&&(()=>{jt.unsubscribe()});let Ht;try{if(St&&supportsRequestStream&&et!=="get"&&et!=="head"&&(Ht=await resolveBodyLength(Tt,ot))!==0){let ar=new Request(g,{method:"POST",body:ot,duplex:"half"}),ir;if(utils$8.isFormData(ot)&&(ir=ar.headers.get("content-type"))&&Tt.setContentType(ir),ar.body){const[lr,cr]=progressEventDecorator(Ht,progressEventReducer(asyncDecorator(St)));ot=trackStream(ar.body,DEFAULT_CHUNK_SIZE,lr,cr)}}utils$8.isString(Rt)||(Rt=Rt?"include":"omit");const Ut="credentials"in Request.prototype;Bt=new Request(g,{...Ft,signal:jt,method:et.toUpperCase(),headers:Tt.normalize().toJSON(),body:ot,duplex:"half",credentials:Ut?Rt:void 0});let Kt=await fetch(Bt);const Yt=supportsResponseStream&&(kt==="stream"||kt==="response");if(supportsResponseStream&&(ft||Yt&&zt)){const ar={};["status","statusText","headers"].forEach(vr=>{ar[vr]=Kt[vr]});const ir=utils$8.toFiniteNumber(Kt.headers.get("content-length")),[lr,cr]=ft&&progressEventDecorator(ir,progressEventReducer(asyncDecorator(ft),!0))||[];Kt=new Response(trackStream(Kt.body,DEFAULT_CHUNK_SIZE,lr,()=>{cr&&cr(),zt&&zt()}),ar)}kt=kt||"text";let er=await resolvers[utils$8.findKey(resolvers,kt)||"text"](Kt,it);return!Yt&&zt&&zt(),await new Promise((ar,ir)=>{settle(ar,ir,{data:er,headers:AxiosHeaders$1.from(Kt.headers),status:Kt.status,statusText:Kt.statusText,config:it,request:Bt})})}catch(Ut){throw zt&&zt(),Ut&&Ut.name==="TypeError"&&/fetch/i.test(Ut.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,it,Bt),{cause:Ut.cause||Ut}):AxiosError.from(Ut,Ut&&Ut.code,it,Bt)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$8.forEach(knownAdapters,(it,g)=>{if(it){try{Object.defineProperty(it,"name",{value:g})}catch{}Object.defineProperty(it,"adapterName",{value:g})}});const renderReason=it=>`- ${it}`,isResolvedHandle=it=>utils$8.isFunction(it)||it===null||it===!1,adapters={getAdapter:it=>{it=utils$8.isArray(it)?it:[it];const{length:g}=it;let et,ot;const ut={};for(let ct=0;ct<g;ct++){et=it[ct];let dt;if(ot=et,!isResolvedHandle(et)&&(ot=knownAdapters[(dt=String(et)).toLowerCase()],ot===void 0))throw new AxiosError(`Unknown adapter '${dt}'`);if(ot)break;ut[dt||"#"+ct]=ot}if(!ot){const ct=Object.entries(ut).map(([ft,St])=>`adapter ${ft} `+(St===!1?"is not supported by the environment":"is not available in the build"));let dt=g?ct.length>1?`since :
`+ct.map(renderReason).join(`
`):" "+renderReason(ct[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+dt,"ERR_NOT_SUPPORT")}return ot},adapters:knownAdapters};function throwIfCancellationRequested(it){if(it.cancelToken&&it.cancelToken.throwIfRequested(),it.signal&&it.signal.aborted)throw new CanceledError(null,it)}function dispatchRequest(it){return throwIfCancellationRequested(it),it.headers=AxiosHeaders$1.from(it.headers),it.data=transformData.call(it,it.transformRequest),["post","put","patch"].indexOf(it.method)!==-1&&it.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(it.adapter||defaults$2.adapter)(it).then(function(ot){return throwIfCancellationRequested(it),ot.data=transformData.call(it,it.transformResponse,ot),ot.headers=AxiosHeaders$1.from(ot.headers),ot},function(ot){return isCancel(ot)||(throwIfCancellationRequested(it),ot&&ot.response&&(ot.response.data=transformData.call(it,it.transformResponse,ot.response),ot.response.headers=AxiosHeaders$1.from(ot.response.headers))),Promise.reject(ot)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((it,g)=>{validators$1[it]=function(ot){return typeof ot===it||"a"+(g<1?"n ":" ")+it}});const deprecatedWarnings={};validators$1.transitional=function(g,et,ot){function ut(ct,dt){return"[Axios v"+VERSION+"] Transitional option '"+ct+"'"+dt+(ot?". "+ot:"")}return(ct,dt,ft)=>{if(g===!1)throw new AxiosError(ut(dt," has been removed"+(et?" in "+et:"")),AxiosError.ERR_DEPRECATED);return et&&!deprecatedWarnings[dt]&&(deprecatedWarnings[dt]=!0,console.warn(ut(dt," has been deprecated since v"+et+" and will be removed in the near future"))),g?g(ct,dt,ft):!0}};validators$1.spelling=function(g){return(et,ot)=>(console.warn(`${ot} is likely a misspelling of ${g}`),!0)};function assertOptions(it,g,et){if(typeof it!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const ot=Object.keys(it);let ut=ot.length;for(;ut-- >0;){const ct=ot[ut],dt=g[ct];if(dt){const ft=it[ct],St=ft===void 0||dt(ft,ct,it);if(St!==!0)throw new AxiosError("option "+ct+" must be "+St,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(et!==!0)throw new AxiosError("Unknown option "+ct,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(g){this.defaults=g,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(g,et){try{return await this._request(g,et)}catch(ot){if(ot instanceof Error){let ut={};Error.captureStackTrace?Error.captureStackTrace(ut):ut=new Error;const ct=ut.stack?ut.stack.replace(/^.+\n/,""):"";try{ot.stack?ct&&!String(ot.stack).endsWith(ct.replace(/^.+\n.+\n/,""))&&(ot.stack+=`
`+ct):ot.stack=ct}catch{}}throw ot}}_request(g,et){typeof g=="string"?(et=et||{},et.url=g):et=g||{},et=mergeConfig(this.defaults,et);const{transitional:ot,paramsSerializer:ut,headers:ct}=et;ot!==void 0&&validator.assertOptions(ot,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),ut!=null&&(utils$8.isFunction(ut)?et.paramsSerializer={serialize:ut}:validator.assertOptions(ut,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(et,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),et.method=(et.method||this.defaults.method||"get").toLowerCase();let dt=ct&&utils$8.merge(ct.common,ct[et.method]);ct&&utils$8.forEach(["delete","get","head","post","put","patch","common"],Bt=>{delete ct[Bt]}),et.headers=AxiosHeaders$1.concat(dt,ct);const ft=[];let St=!0;this.interceptors.request.forEach(function(zt){typeof zt.runWhen=="function"&&zt.runWhen(et)===!1||(St=St&&zt.synchronous,ft.unshift(zt.fulfilled,zt.rejected))});const kt=[];this.interceptors.response.forEach(function(zt){kt.push(zt.fulfilled,zt.rejected)});let Tt,Rt=0,Ft;if(!St){const Bt=[dispatchRequest.bind(this),void 0];for(Bt.unshift.apply(Bt,ft),Bt.push.apply(Bt,kt),Ft=Bt.length,Tt=Promise.resolve(et);Rt<Ft;)Tt=Tt.then(Bt[Rt++],Bt[Rt++]);return Tt}Ft=ft.length;let jt=et;for(Rt=0;Rt<Ft;){const Bt=ft[Rt++],zt=ft[Rt++];try{jt=Bt(jt)}catch(Ht){zt.call(this,Ht);break}}try{Tt=dispatchRequest.call(this,jt)}catch(Bt){return Promise.reject(Bt)}for(Rt=0,Ft=kt.length;Rt<Ft;)Tt=Tt.then(kt[Rt++],kt[Rt++]);return Tt}getUri(g){g=mergeConfig(this.defaults,g);const et=buildFullPath(g.baseURL,g.url);return buildURL(et,g.params,g.paramsSerializer)}}utils$8.forEach(["delete","get","head","options"],function(g){Axios.prototype[g]=function(et,ot){return this.request(mergeConfig(ot||{},{method:g,url:et,data:(ot||{}).data}))}});utils$8.forEach(["post","put","patch"],function(g){function et(ot){return function(ct,dt,ft){return this.request(mergeConfig(ft||{},{method:g,headers:ot?{"Content-Type":"multipart/form-data"}:{},url:ct,data:dt}))}}Axios.prototype[g]=et(),Axios.prototype[g+"Form"]=et(!0)});const Axios$1=Axios;class CancelToken{constructor(g){if(typeof g!="function")throw new TypeError("executor must be a function.");let et;this.promise=new Promise(function(ct){et=ct});const ot=this;this.promise.then(ut=>{if(!ot._listeners)return;let ct=ot._listeners.length;for(;ct-- >0;)ot._listeners[ct](ut);ot._listeners=null}),this.promise.then=ut=>{let ct;const dt=new Promise(ft=>{ot.subscribe(ft),ct=ft}).then(ut);return dt.cancel=function(){ot.unsubscribe(ct)},dt},g(function(ct,dt,ft){ot.reason||(ot.reason=new CanceledError(ct,dt,ft),et(ot.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(g){if(this.reason){g(this.reason);return}this._listeners?this._listeners.push(g):this._listeners=[g]}unsubscribe(g){if(!this._listeners)return;const et=this._listeners.indexOf(g);et!==-1&&this._listeners.splice(et,1)}toAbortSignal(){const g=new AbortController,et=ot=>{g.abort(ot)};return this.subscribe(et),g.signal.unsubscribe=()=>this.unsubscribe(et),g.signal}static source(){let g;return{token:new CancelToken(function(ut){g=ut}),cancel:g}}}const CancelToken$1=CancelToken;function spread(it){return function(et){return it.apply(null,et)}}function isAxiosError(it){return utils$8.isObject(it)&&it.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([it,g])=>{HttpStatusCode[g]=it});const HttpStatusCode$1=HttpStatusCode;function createInstance$1(it){const g=new Axios$1(it),et=bind$1(Axios$1.prototype.request,g);return utils$8.extend(et,Axios$1.prototype,g,{allOwnKeys:!0}),utils$8.extend(et,g,null,{allOwnKeys:!0}),et.create=function(ut){return createInstance$1(mergeConfig(it,ut))},et}const axios=createInstance$1(defaults$2);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(g){return Promise.all(g)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=it=>formDataToJSON(utils$8.isHTMLForm(it)?new FormData(it):it);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;function r$3(it){var g,et,ot="";if(typeof it=="string"||typeof it=="number")ot+=it;else if(typeof it=="object")if(Array.isArray(it)){var ut=it.length;for(g=0;g<ut;g++)it[g]&&(et=r$3(it[g]))&&(ot&&(ot+=" "),ot+=et)}else for(et in it)it[et]&&(ot&&(ot+=" "),ot+=et);return ot}function clsx(){for(var it,g,et=0,ot="",ut=arguments.length;et<ut;et++)(it=arguments[et])&&(g=r$3(it))&&(ot&&(ot+=" "),ot+=g);return ot}function Mt(it){if(!it||typeof document>"u")return;let g=document.head||document.getElementsByTagName("head")[0],et=document.createElement("style");et.type="text/css",g.firstChild?g.insertBefore(et,g.firstChild):g.appendChild(et),et.styleSheet?et.styleSheet.cssText=it:et.appendChild(document.createTextNode(it))}Mt(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$2=it=>typeof it=="number"&&!isNaN(it),N$1=it=>typeof it=="string",P$2=it=>typeof it=="function",mt=it=>N$1(it)||L$2(it),B=it=>N$1(it)||P$2(it)?it:null,pt=(it,g)=>it===!1||L$2(it)&&it>0?it:g,z=it=>reactExports.isValidElement(it)||N$1(it)||P$2(it)||L$2(it);function Z$1(it,g,et=300){let{scrollHeight:ot,style:ut}=it;requestAnimationFrame(()=>{ut.minHeight="initial",ut.height=ot+"px",ut.transition=`all ${et}ms`,requestAnimationFrame(()=>{ut.height="0",ut.padding="0",ut.margin="0",setTimeout(g,et)})})}function $$2({enter:it,exit:g,appendPosition:et=!1,collapse:ot=!0,collapseDuration:ut=300}){return function({children:ct,position:dt,preventExitTransition:ft,done:St,nodeRef:kt,isIn:Tt,playToast:Rt}){let Ft=et?`${it}--${dt}`:it,jt=et?`${g}--${dt}`:g,Bt=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let zt=kt.current,Ht=Ft.split(" "),Ut=Kt=>{Kt.target===kt.current&&(Rt(),zt.removeEventListener("animationend",Ut),zt.removeEventListener("animationcancel",Ut),Bt.current===0&&Kt.type!=="animationcancel"&&zt.classList.remove(...Ht))};zt.classList.add(...Ht),zt.addEventListener("animationend",Ut),zt.addEventListener("animationcancel",Ut)},[]),reactExports.useEffect(()=>{let zt=kt.current,Ht=()=>{zt.removeEventListener("animationend",Ht),ot?Z$1(zt,St,ut):St()};Tt||(ft?Ht():(Bt.current=1,zt.className+=` ${jt}`,zt.addEventListener("animationend",Ht)))},[Tt]),React$3.createElement(React$3.Fragment,null,ct)}}function J$1(it,g){return{content:tt$1(it.content,it.props),containerId:it.props.containerId,id:it.props.toastId,theme:it.props.theme,type:it.props.type,data:it.props.data||{},isLoading:it.props.isLoading,icon:it.props.icon,reason:it.removalReason,status:g}}function tt$1(it,g,et=!1){return reactExports.isValidElement(it)&&!N$1(it.type)?reactExports.cloneElement(it,{closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):P$2(it)?it({closeToast:g.closeToast,toastProps:g,data:g.data,isPaused:et}):it}function yt$1({closeToast:it,theme:g,ariaLabel:et="close"}){return React$3.createElement("button",{className:`Toastify__close-button Toastify__close-button--${g}`,type:"button",onClick:ot=>{ot.stopPropagation(),it(!0)},"aria-label":et},React$3.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React$3.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt({delay:it,isRunning:g,closeToast:et,type:ot="default",hide:ut,className:ct,controlledProgress:dt,progress:ft,rtl:St,isIn:kt,theme:Tt}){let Rt=ut||dt&&ft===0,Ft={animationDuration:`${it}ms`,animationPlayState:g?"running":"paused"};dt&&(Ft.transform=`scaleX(${ft})`);let jt=clsx("Toastify__progress-bar",dt?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Tt}`,`Toastify__progress-bar--${ot}`,{"Toastify__progress-bar--rtl":St}),Bt=P$2(ct)?ct({rtl:St,type:ot,defaultClassName:jt}):clsx(jt,ct),zt={[dt&&ft>=1?"onTransitionEnd":"onAnimationEnd"]:dt&&ft<1?null:()=>{kt&&et()}};return React$3.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":Rt},React$3.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${Tt} Toastify__progress-bar--${ot}`}),React$3.createElement("div",{role:"progressbar","aria-hidden":Rt?"true":"false","aria-label":"notification timer",className:Bt,style:Ft,...zt}))}var Xt=1,at=()=>`${Xt++}`;function _t(it,g,et){let ot=1,ut=0,ct=[],dt=[],ft=g,St=new Map,kt=new Set,Tt=Kt=>(kt.add(Kt),()=>kt.delete(Kt)),Rt=()=>{dt=Array.from(St.values()),kt.forEach(Kt=>Kt())},Ft=({containerId:Kt,toastId:Yt,updateId:er})=>{let ar=Kt?Kt!==it:it!==1,ir=St.has(Yt)&&er==null;return ar||ir},jt=(Kt,Yt)=>{St.forEach(er=>{var ar;(Yt==null||Yt===er.props.toastId)&&((ar=er.toggle)==null||ar.call(er,Kt))})},Bt=Kt=>{var Yt,er;(er=(Yt=Kt.props)==null?void 0:Yt.onClose)==null||er.call(Yt,Kt.removalReason),Kt.isActive=!1},zt=Kt=>{if(Kt==null)St.forEach(Bt);else{let Yt=St.get(Kt);Yt&&Bt(Yt)}Rt()},Ht=()=>{ut-=ct.length,ct=[]},Ut=Kt=>{var Yt,er;let{toastId:ar,updateId:ir}=Kt.props,lr=ir==null;Kt.staleId&&St.delete(Kt.staleId),Kt.isActive=!0,St.set(ar,Kt),Rt(),et(J$1(Kt,lr?"added":"updated")),lr&&((er=(Yt=Kt.props).onOpen)==null||er.call(Yt))};return{id:it,props:ft,observe:Tt,toggle:jt,removeToast:zt,toasts:St,clearQueue:Ht,buildToast:(Kt,Yt)=>{if(Ft(Yt))return;let{toastId:er,updateId:ar,data:ir,staleId:lr,delay:cr}=Yt,vr=ar==null;vr&&ut++;let xr={...ft,style:ft.toastStyle,key:ot++,...Object.fromEntries(Object.entries(Yt).filter(([Sr,kr])=>kr!=null)),toastId:er,updateId:ar,data:ir,isIn:!1,className:B(Yt.className||ft.toastClassName),progressClassName:B(Yt.progressClassName||ft.progressClassName),autoClose:Yt.isLoading?!1:pt(Yt.autoClose,ft.autoClose),closeToast(Sr){St.get(er).removalReason=Sr,zt(er)},deleteToast(){let Sr=St.get(er);if(Sr!=null){if(et(J$1(Sr,"removed")),St.delete(er),ut--,ut<0&&(ut=0),ct.length>0){Ut(ct.shift());return}Rt()}}};xr.closeButton=ft.closeButton,Yt.closeButton===!1||z(Yt.closeButton)?xr.closeButton=Yt.closeButton:Yt.closeButton===!0&&(xr.closeButton=z(ft.closeButton)?ft.closeButton:!0);let yr={content:Kt,props:xr,staleId:lr};ft.limit&&ft.limit>0&&ut>ft.limit&&vr?ct.push(yr):L$2(cr)?setTimeout(()=>{Ut(yr)},cr):Ut(yr)},setProps(Kt){ft=Kt},setToggle:(Kt,Yt)=>{let er=St.get(Kt);er&&(er.toggle=Yt)},isToastActive:Kt=>{var Yt;return(Yt=St.get(Kt))==null?void 0:Yt.isActive},getSnapshot:()=>dt}}var I$3=new Map,F$2=[],st=new Set,Vt=it=>st.forEach(g=>g(it)),bt=()=>I$3.size>0;function Qt(){F$2.forEach(it=>nt(it.content,it.options)),F$2=[]}var vt=(it,{containerId:g})=>{var et;return(et=I$3.get(g||1))==null?void 0:et.toasts.get(it)};function X$3(it,g){var et;if(g)return!!((et=I$3.get(g))!=null&&et.isToastActive(it));let ot=!1;return I$3.forEach(ut=>{ut.isToastActive(it)&&(ot=!0)}),ot}function ht(it){if(!bt()){F$2=F$2.filter(g=>it!=null&&g.options.toastId!==it);return}if(it==null||mt(it))I$3.forEach(g=>{g.removeToast(it)});else if(it&&("containerId"in it||"id"in it)){let g=I$3.get(it.containerId);g?g.removeToast(it.id):I$3.forEach(et=>{et.removeToast(it.id)})}}var Ct=(it={})=>{I$3.forEach(g=>{g.props.limit&&(!it.containerId||g.id===it.containerId)&&g.clearQueue()})};function nt(it,g){z(it)&&(bt()||F$2.push({content:it,options:g}),I$3.forEach(et=>{et.buildToast(it,g)}))}function xt(it){var g;(g=I$3.get(it.containerId||1))==null||g.setToggle(it.id,it.fn)}function rt(it,g){I$3.forEach(et=>{(g==null||!(g!=null&&g.containerId)||(g==null?void 0:g.containerId)===et.id)&&et.toggle(it,g==null?void 0:g.id)})}function Et(it){let g=it.containerId||1;return{subscribe(et){let ot=_t(g,it,Vt);I$3.set(g,ot);let ut=ot.observe(et);return Qt(),()=>{ut(),I$3.delete(g)}},setProps(et){var ot;(ot=I$3.get(g))==null||ot.setProps(et)},getSnapshot(){var et;return(et=I$3.get(g))==null?void 0:et.getSnapshot()}}}function Pt(it){return st.add(it),()=>{st.delete(it)}}function Wt(it){return it&&(N$1(it.toastId)||L$2(it.toastId))?it.toastId:at()}function U$3(it,g){return nt(it,g),g.toastId}function V$1(it,g){return{...g,type:g&&g.type||it,toastId:Wt(g)}}function Q(it){return(g,et)=>U$3(g,V$1(it,et))}function y$4(it,g){return U$3(it,V$1("default",g))}y$4.loading=(it,g)=>U$3(it,V$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...g}));function Gt(it,{pending:g,error:et,success:ot},ut){let ct;g&&(ct=N$1(g)?y$4.loading(g,ut):y$4.loading(g.render,{...ut,...g}));let dt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ft=(kt,Tt,Rt)=>{if(Tt==null){y$4.dismiss(ct);return}let Ft={type:kt,...dt,...ut,data:Rt},jt=N$1(Tt)?{render:Tt}:Tt;return ct?y$4.update(ct,{...Ft,...jt}):y$4(jt.render,{...Ft,...jt}),Rt},St=P$2(it)?it():it;return St.then(kt=>ft("success",ot,kt)).catch(kt=>ft("error",et,kt)),St}y$4.promise=Gt;y$4.success=Q("success");y$4.info=Q("info");y$4.error=Q("error");y$4.warning=Q("warning");y$4.warn=y$4.warning;y$4.dark=(it,g)=>U$3(it,V$1("default",{theme:"dark",...g}));function qt(it){ht(it)}y$4.dismiss=qt;y$4.clearWaitingQueue=Ct;y$4.isActive=X$3;y$4.update=(it,g={})=>{let et=vt(it,g);if(et){let{props:ot,content:ut}=et,ct={delay:100,...ot,...g,toastId:g.toastId||it,updateId:at()};ct.toastId!==it&&(ct.staleId=it);let dt=ct.render||ut;delete ct.render,U$3(dt,ct)}};y$4.done=it=>{y$4.update(it,{progress:1})};y$4.onChange=Pt;y$4.play=it=>rt(!0,it);y$4.pause=it=>rt(!1,it);function It(it){var g;let{subscribe:et,getSnapshot:ot,setProps:ut}=reactExports.useRef(Et(it)).current;ut(it);let ct=(g=reactExports.useSyncExternalStore(et,ot,ot))==null?void 0:g.slice();function dt(ft){if(!ct)return[];let St=new Map;return it.newestOnTop&&ct.reverse(),ct.forEach(kt=>{let{position:Tt}=kt.props;St.has(Tt)||St.set(Tt,[]),St.get(Tt).push(kt)}),Array.from(St,kt=>ft(kt[0],kt[1]))}return{getToastToRender:dt,isToastActive:X$3,count:ct==null?void 0:ct.length}}function At(it){let[g,et]=reactExports.useState(!1),[ot,ut]=reactExports.useState(!1),ct=reactExports.useRef(null),dt=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:ft,pauseOnHover:St,closeToast:kt,onClick:Tt,closeOnClick:Rt}=it;xt({id:it.toastId,containerId:it.containerId,fn:et}),reactExports.useEffect(()=>{if(it.pauseOnFocusLoss)return Ft(),()=>{jt()}},[it.pauseOnFocusLoss]);function Ft(){document.hasFocus()||Ut(),window.addEventListener("focus",Ht),window.addEventListener("blur",Ut)}function jt(){window.removeEventListener("focus",Ht),window.removeEventListener("blur",Ut)}function Bt(lr){if(it.draggable===!0||it.draggable===lr.pointerType){Kt();let cr=ct.current;dt.canCloseOnClick=!0,dt.canDrag=!0,cr.style.transition="none",it.draggableDirection==="x"?(dt.start=lr.clientX,dt.removalDistance=cr.offsetWidth*(it.draggablePercent/100)):(dt.start=lr.clientY,dt.removalDistance=cr.offsetHeight*(it.draggablePercent===80?it.draggablePercent*1.5:it.draggablePercent)/100)}}function zt(lr){let{top:cr,bottom:vr,left:xr,right:yr}=ct.current.getBoundingClientRect();lr.nativeEvent.type!=="touchend"&&it.pauseOnHover&&lr.clientX>=xr&&lr.clientX<=yr&&lr.clientY>=cr&&lr.clientY<=vr?Ut():Ht()}function Ht(){et(!0)}function Ut(){et(!1)}function Kt(){dt.didMove=!1,document.addEventListener("pointermove",er),document.addEventListener("pointerup",ar)}function Yt(){document.removeEventListener("pointermove",er),document.removeEventListener("pointerup",ar)}function er(lr){let cr=ct.current;if(dt.canDrag&&cr){dt.didMove=!0,g&&Ut(),it.draggableDirection==="x"?dt.delta=lr.clientX-dt.start:dt.delta=lr.clientY-dt.start,dt.start!==lr.clientX&&(dt.canCloseOnClick=!1);let vr=it.draggableDirection==="x"?`${dt.delta}px, var(--y)`:`0, calc(${dt.delta}px + var(--y))`;cr.style.transform=`translate3d(${vr},0)`,cr.style.opacity=`${1-Math.abs(dt.delta/dt.removalDistance)}`}}function ar(){Yt();let lr=ct.current;if(dt.canDrag&&dt.didMove&&lr){if(dt.canDrag=!1,Math.abs(dt.delta)>dt.removalDistance){ut(!0),it.closeToast(!0),it.collapseAll();return}lr.style.transition="transform 0.2s, opacity 0.2s",lr.style.removeProperty("transform"),lr.style.removeProperty("opacity")}}let ir={onPointerDown:Bt,onPointerUp:zt};return ft&&St&&(ir.onMouseEnter=Ut,it.stacked||(ir.onMouseLeave=Ht)),Rt&&(ir.onClick=lr=>{Tt&&Tt(lr),dt.canCloseOnClick&&kt(!0)}),{playToast:Ht,pauseToast:Ut,isRunning:g,preventExitTransition:ot,toastRef:ct,eventHandlers:ir}}var Ot=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G=({theme:it,type:g,isLoading:et,...ot})=>React$3.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:it==="colored"?"currentColor":`var(--toastify-icon-color-${g})`,...ot});function ao(it){return React$3.createElement(G,{...it},React$3.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(it){return React$3.createElement(G,{...it},React$3.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(it){return React$3.createElement(G,{...it},React$3.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(it){return React$3.createElement(G,{...it},React$3.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React$3.createElement("div",{className:"Toastify__spinner"})}var W$1={info:so,warning:ao,success:no,error:ro,spinner:io},lo=it=>it in W$1;function Nt({theme:it,type:g,isLoading:et,icon:ot}){let ut=null,ct={theme:it,type:g};return ot===!1||(P$2(ot)?ut=ot({...ct,isLoading:et}):reactExports.isValidElement(ot)?ut=reactExports.cloneElement(ot,ct):et?ut=W$1.spinner():lo(g)&&(ut=W$1[g](ct))),ut}var wt=it=>{let{isRunning:g,preventExitTransition:et,toastRef:ot,eventHandlers:ut,playToast:ct}=At(it),{closeButton:dt,children:ft,autoClose:St,onClick:kt,type:Tt,hideProgressBar:Rt,closeToast:Ft,transition:jt,position:Bt,className:zt,style:Ht,progressClassName:Ut,updateId:Kt,role:Yt,progress:er,rtl:ar,toastId:ir,deleteToast:lr,isIn:cr,isLoading:vr,closeOnClick:xr,theme:yr,ariaLabel:Sr}=it,kr=clsx("Toastify__toast",`Toastify__toast-theme--${yr}`,`Toastify__toast--${Tt}`,{"Toastify__toast--rtl":ar},{"Toastify__toast--close-on-click":xr}),Pr=P$2(zt)?zt({rtl:ar,position:Bt,type:Tt,defaultClassName:kr}):clsx(kr,zt),Or=Nt(it),hr=!!er||!St,Tr={closeToast:Ft,type:Tt,theme:yr},mr=null;return dt===!1||(P$2(dt)?mr=dt(Tr):reactExports.isValidElement(dt)?mr=reactExports.cloneElement(dt,Tr):mr=yt$1(Tr)),React$3.createElement(jt,{isIn:cr,done:lr,position:Bt,preventExitTransition:et,nodeRef:ot,playToast:ct},React$3.createElement("div",{id:ir,tabIndex:0,onClick:kt,"data-in":cr,className:Pr,...ut,style:Ht,ref:ot,...cr&&{role:Yt,"aria-label":Sr}},Or!=null&&React$3.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!vr})},Or),tt$1(ft,it,!g),mr,!it.customProgressBar&&React$3.createElement(gt,{...Kt&&!hr?{key:`p-${Kt}`}:{},rtl:ar,theme:yr,delay:St,isRunning:g,isIn:cr,closeToast:Ft,hide:Rt,type:Tt,className:Ut,controlledProgress:hr,progress:er||0})))},K$1=(it,g=!1)=>({enter:`Toastify--animate Toastify__${it}-enter`,exit:`Toastify--animate Toastify__${it}-exit`,appendPosition:g}),lt=$$2(K$1("bounce",!0)),_o={position:"top-right",transition:lt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:it=>it.altKey&&it.code==="KeyT"};function Lt(it){let g={..._o,...it},et=it.stacked,[ot,ut]=reactExports.useState(!0),ct=reactExports.useRef(null),{getToastToRender:dt,isToastActive:ft,count:St}=It(g),{className:kt,style:Tt,rtl:Rt,containerId:Ft,hotKeys:jt}=g;function Bt(Ht){let Ut=clsx("Toastify__toast-container",`Toastify__toast-container--${Ht}`,{"Toastify__toast-container--rtl":Rt});return P$2(kt)?kt({position:Ht,rtl:Rt,defaultClassName:Ut}):clsx(Ut,B(kt))}function zt(){et&&(ut(!0),y$4.play())}return Ot(()=>{var Ht;if(et){let Ut=ct.current.querySelectorAll('[data-in="true"]'),Kt=12,Yt=(Ht=g.position)==null?void 0:Ht.includes("top"),er=0,ar=0;Array.from(Ut).reverse().forEach((ir,lr)=>{let cr=ir;cr.classList.add("Toastify__toast--stacked"),lr>0&&(cr.dataset.collapsed=`${ot}`),cr.dataset.pos||(cr.dataset.pos=Yt?"top":"bot");let vr=er*(ot?.2:1)+(ot?0:Kt*lr);cr.style.setProperty("--y",`${Yt?vr:vr*-1}px`),cr.style.setProperty("--g",`${Kt}`),cr.style.setProperty("--s",`${1-(ot?ar:0)}`),er+=cr.offsetHeight,ar+=.025})}},[ot,St,et]),reactExports.useEffect(()=>{function Ht(Ut){var Kt;let Yt=ct.current;jt(Ut)&&((Kt=Yt.querySelector('[tabIndex="0"]'))==null||Kt.focus(),ut(!1),y$4.pause()),Ut.key==="Escape"&&(document.activeElement===Yt||Yt!=null&&Yt.contains(document.activeElement))&&(ut(!0),y$4.play())}return document.addEventListener("keydown",Ht),()=>{document.removeEventListener("keydown",Ht)}},[jt]),React$3.createElement("section",{ref:ct,className:"Toastify",id:Ft,onMouseEnter:()=>{et&&(ut(!1),y$4.pause())},onMouseLeave:zt,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":g["aria-label"]},dt((Ht,Ut)=>{let Kt=Ut.length?{...Tt}:{...Tt,pointerEvents:"none"};return React$3.createElement("div",{tabIndex:-1,className:Bt(Ht),"data-stacked":et,style:Kt,key:`c-${Ht}`},Ut.map(({content:Yt,props:er})=>React$3.createElement(wt,{...er,stacked:et,collapseAll:zt,isIn:ft(er.toastId,er.containerId),key:`t-${er.key}`},Yt)))}))}const BASE_URL="https://cre8tlystudio.com/api",axiosInstance=axios$1.create({baseURL:BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});console.log("Base URL:",axiosInstance.defaults.baseURL);let isRefreshing=!1,refreshSubscribers=[];function onRefreshed(it){refreshSubscribers.forEach(g=>g(it)),refreshSubscribers=[]}axiosInstance.interceptors.request.use(it=>{const g=localStorage.getItem("accessToken");return g&&(it.headers.Authorization=`Bearer ${g}`),it});async function refreshToken(){if(isRefreshing)return new Promise(it=>{refreshSubscribers.push(it)});isRefreshing=!0;try{const it=localStorage.getItem("refreshToken");if(!it)throw new Error("No refresh token found");const g=await axios$1.post(`${BASE_URL}/auth/refresh`,{token:it}),{accessToken:et,refreshToken:ot}=g.data;return localStorage.setItem("accessToken",et),ot&&localStorage.setItem("refreshToken",ot),axiosInstance.defaults.headers.Authorization=`Bearer ${et}`,onRefreshed(et),et}catch(it){throw console.error("Token refresh failed:",it),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),it}finally{isRefreshing=!1}}axiosInstance.interceptors.response.use(it=>it,async it=>{var et;const g=it.config;if(((et=it.response)==null?void 0:et.status)===401&&!g._retry){g._retry=!0;try{const ot=await refreshToken();return ot?(g.headers.Authorization=`Bearer ${ot}`,axiosInstance(g)):new Promise(ut=>{refreshSubscribers.push(ct=>{g.headers.Authorization=`Bearer ${ct}`,ut(axiosInstance(g))})})}catch(ot){return console.error("Refresh retry failed:",ot),Promise.reject(ot)}}return Promise.reject(it)});axiosInstance.interceptors.response.use(it=>it,it=>{var g;return((g=it.response)==null?void 0:g.status)===403&&(y$4.warning("Your session expired. Please log in again."),localStorage.clear(),window.location.href="/"),Promise.reject(it)});const AuthContext=reactExports.createContext();function AuthProvider({children:it,navigate:g}){const[et,ot]=reactExports.useState(null),[ut,ct]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0);function St(jt,Bt,zt){ot(jt),ct(Bt),localStorage.setItem("user",JSON.stringify(jt)),localStorage.setItem("accessToken",Bt),zt&&localStorage.setItem("refreshToken",zt)}async function kt(jt,Bt){try{const Ht=(await axiosInstance.post("/auth/login",{email:jt,password:Bt})).data;St(Ht.user,Ht.accessToken,Ht.refreshToken);try{const Ut=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Ht.accessToken}`}});ot(Ut.data),localStorage.setItem("user",JSON.stringify(Ut.data))}catch(Ut){console.error("Failed to fetch fresh user data after login:",Ut)}}catch(zt){throw zt}}async function Tt(){var Bt,zt;const jt=localStorage.getItem("refreshToken");if(!jt)return null;try{const Ut=(await axiosInstance.post("/auth/refresh",{token:jt})).data;return ct(Ut.accessToken),localStorage.setItem("accessToken",Ut.accessToken),Ut.refreshToken&&localStorage.setItem("refreshToken",Ut.refreshToken),Ut.accessToken}catch(Ht){return console.error("Refresh failed:",Ht),(((Bt=Ht.response)==null?void 0:Bt.status)===401||((zt=Ht.response)==null?void 0:zt.status)===403)&&Rt(),null}}function Rt(){try{axiosInstance.post("/auth/logout")}catch{}ot(null),ct(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),g("/")}reactExports.useEffect(()=>{const jt=setTimeout(()=>Tt(),1500);return()=>clearTimeout(jt)},[]),reactExports.useEffect(()=>{async function jt(){try{const Bt=localStorage.getItem("user"),zt=localStorage.getItem("accessToken"),Ht=localStorage.getItem("refreshToken");if(Bt&&ot(JSON.parse(Bt)),zt&&ct(zt),!zt&&Ht){const Ut=await Tt();if(Ut){const Kt=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${Ut}`}});ot(Kt.data),localStorage.setItem("user",JSON.stringify(Kt.data))}}}catch(Bt){console.error("Failed to restore user:",Bt)}finally{ft(!1)}}jt()},[]);async function Ft(){try{const jt=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${ut}`}});return ot(jt.data),localStorage.setItem("user",JSON.stringify(jt.data)),jt.data}catch(jt){return console.error("Failed to refresh user data:",jt),y$4.error("Failed to refresh user data"),null}}return reactExports.useEffect(()=>{const jt=setInterval(()=>{Tt()},72e4);return()=>clearInterval(jt)},[]),jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:et,setUser:ot,accessToken:ut,authLoading:dt,login:kt,logout:Rt,refreshAccessToken:Tt,refreshUser:Ft},children:it})}function useAuth(){return reactExports.useContext(AuthContext)}function AuthProviderWithRouter({children:it}){const g=useNavigate();return jsxRuntimeExports.jsx(AuthProvider,{navigate:g,children:it})}const MagnetContext=reactExports.createContext();function MagnetProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState({magnets:[],summary:{}}),[ut,ct]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const Tt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,Rt=Array.isArray(Tt)?{magnets:Tt,summary:{}}:Tt;ot(Rt)}catch(kt){console.error("Error fetching lead magnets:",kt),ft(kt)}finally{ct(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Rt=(await axios$1.get("https://cre8tlystudio.com/api/lead-magnets",{headers:{Authorization:`Bearer ${g}`}})).data,Ft=Array.isArray(Rt)?{magnets:Rt,summary:{}}:Rt;ot(jt=>JSON.stringify(jt)===JSON.stringify(Ft)?jt:Ft)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(MagnetContext.Provider,{value:{magnets:et,setMagnets:ot,fetchMagnets:St,loading:ut,error:dt},children:it})}function useMagnets(){return reactExports.useContext(MagnetContext)}function LoadingOverlay(){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 z-50",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-purple-500 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-white font-semibold",children:"Restoring your session..."})]})})}function PrivateRoute({children:it,role:g}){const{user:et,authLoading:ot}=useAuth();return ot?jsxRuntimeExports.jsx(LoadingOverlay,{}):et?g&&!(Array.isArray(g)?g:[g]).includes(et.role)?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):it:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(it,g){module.exports=g()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(g){_useWebWorker=!!g},getWebWorker=function(){return _useWebWorker},setLocationHref=function(g){locationHref=g},getLocationHref=function(){return locationHref};function createTag(it){return document.createElement(it)}function extendPrototype(it,g){var et,ot=it.length,ut;for(et=0;et<ot;et+=1){ut=it[et].prototype;for(var ct in ut)Object.prototype.hasOwnProperty.call(ut,ct)&&(g.prototype[ct]=ut[ct])}}function getDescriptor(it,g){return Object.getOwnPropertyDescriptor(it,g)}function createProxyFunction(it){function g(){}return g.prototype=it,g}var audioControllerFactory=function(){function it(g){this.audios=[],this.audioFactory=g,this._volume=1,this._isMuted=!1}return it.prototype={addAudio:function(et){this.audios.push(et)},pause:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].pause()},resume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].resume()},setRate:function(et){var ot,ut=this.audios.length;for(ot=0;ot<ut;ot+=1)this.audios[ot].setRate(et)},createAudio:function(et){return this.audioFactory?this.audioFactory(et):window.Howl?new window.Howl({src:[et]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(et){this.audioFactory=et},setVolume:function(et){this._volume=et,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var et,ot=this.audios.length;for(et=0;et<ot;et+=1)this.audios[et].volume(this._volume*(this._isMuted?0:1))}},function(){return new it}}(),createTypedArray=function(){function it(et,ot){var ut=0,ct=[],dt;switch(et){case"int16":case"uint8c":dt=1;break;default:dt=1.1;break}for(ut=0;ut<ot;ut+=1)ct.push(dt);return ct}function g(et,ot){return et==="float32"?new Float32Array(ot):et==="int16"?new Int16Array(ot):et==="uint8c"?new Uint8ClampedArray(ot):it(et,ot)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?g:it}();function createSizedArray(it){return Array.apply(null,{length:it})}function _typeof$6(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(et){return typeof et}:_typeof$6=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$6(it)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var it=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],g,et=it.length;for(g=0;g<et;g+=1)BMMath[it[g]]=Math[it[g]]})(),BMMath.random=Math.random,BMMath.abs=function(it){var g=_typeof$6(it);if(g==="object"&&it.length){var et=createSizedArray(it.length),ot,ut=it.length;for(ot=0;ot<ut;ot+=1)et[ot]=Math.abs(it[ot]);return et}return Math.abs(it)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(it){it.style.position="absolute",it.style.top=0,it.style.left=0,it.style.display="block",it.style.transformOrigin="0 0",it.style.webkitTransformOrigin="0 0",it.style.backfaceVisibility="visible",it.style.webkitBackfaceVisibility="visible",it.style.transformStyle="preserve-3d",it.style.webkitTransformStyle="preserve-3d",it.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(it,g,et,ot){this.type=it,this.currentTime=g,this.totalTime=et,this.direction=ot<0?-1:1}function BMCompleteEvent(it,g){this.type=it,this.direction=g<0?-1:1}function BMCompleteLoopEvent(it,g,et,ot){this.type=it,this.currentLoop=et,this.totalLoops=g,this.direction=ot<0?-1:1}function BMSegmentStartEvent(it,g,et){this.type=it,this.firstFrame=g,this.totalFrames=et}function BMDestroyEvent(it,g){this.type=it,this.target=g}function BMRenderFrameErrorEvent(it,g){this.type="renderFrameError",this.nativeError=it,this.currentTime=g}function BMConfigErrorEvent(it){this.type="configError",this.nativeError=it}var createElementID=function(){var it=0;return function(){return it+=1,idPrefix$1+"__lottie_element_"+it}}();function HSVtoRGB(it,g,et){var ot,ut,ct,dt,ft,St,kt,Tt;switch(dt=Math.floor(it*6),ft=it*6-dt,St=et*(1-g),kt=et*(1-ft*g),Tt=et*(1-(1-ft)*g),dt%6){case 0:ot=et,ut=Tt,ct=St;break;case 1:ot=kt,ut=et,ct=St;break;case 2:ot=St,ut=et,ct=Tt;break;case 3:ot=St,ut=kt,ct=et;break;case 4:ot=Tt,ut=St,ct=et;break;case 5:ot=et,ut=St,ct=kt;break}return[ot,ut,ct]}function RGBtoHSV(it,g,et){var ot=Math.max(it,g,et),ut=Math.min(it,g,et),ct=ot-ut,dt,ft=ot===0?0:ct/ot,St=ot/255;switch(ot){case ut:dt=0;break;case it:dt=g-et+ct*(g<et?6:0),dt/=6*ct;break;case g:dt=et-it+ct*2,dt/=6*ct;break;case et:dt=it-g+ct*4,dt/=6*ct;break}return[dt,ft,St]}function addSaturationToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[1]+=g,et[1]>1?et[1]=1:et[1]<=0&&(et[1]=0),HSVtoRGB(et[0],et[1],et[2])}function addBrightnessToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[2]+=g,et[2]>1?et[2]=1:et[2]<0&&(et[2]=0),HSVtoRGB(et[0],et[1],et[2])}function addHueToRGB(it,g){var et=RGBtoHSV(it[0]*255,it[1]*255,it[2]*255);return et[0]+=g/360,et[0]>1?et[0]-=1:et[0]<0&&(et[0]+=1),HSVtoRGB(et[0],et[1],et[2])}var rgbToHex=function(){var it=[],g,et;for(g=0;g<256;g+=1)et=g.toString(16),it[g]=et.length===1?"0"+et:et;return function(ot,ut,ct){return ot<0&&(ot=0),ut<0&&(ut=0),ct<0&&(ct=0),"#"+it[ot]+it[ut]+it[ct]}}(),setSubframeEnabled=function(g){subframeEnabled=!!g},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(g){expressionsPlugin=g},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(g){expressionsInterfaces=g},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(g){defaultCurveSegments=g},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(g){idPrefix$1=g};function createNS(it){return document.createElementNS(svgNS,it)}function _typeof$5(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(et){return typeof et}:_typeof$5=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$5(it)}var dataManager=function(){var it=1,g=[],et,ot,ut={onmessage:function(){},postMessage:function(jt){et({data:jt})}},ct={postMessage:function(jt){ut.onmessage({data:jt})}};function dt(Ft){if(window.Worker&&window.Blob&&getWebWorker()){var jt=new Blob(["var _workerSelf = self; self.onmessage = ",Ft.toString()],{type:"text/javascript"}),Bt=URL.createObjectURL(jt);return new Worker(Bt)}return et=Ft,ut}function ft(){ot||(ot=dt(function(jt){function Bt(){function Ht(Or,hr){var Tr,mr,Er=Or.length,Dr,Cr,Lr,qr;for(mr=0;mr<Er;mr+=1)if(Tr=Or[mr],"ks"in Tr&&!Tr.completed){if(Tr.completed=!0,Tr.hasMask){var sn=Tr.masksProperties;for(Cr=sn.length,Dr=0;Dr<Cr;Dr+=1)if(sn[Dr].pt.k.i)ar(sn[Dr].pt.k);else for(qr=sn[Dr].pt.k.length,Lr=0;Lr<qr;Lr+=1)sn[Dr].pt.k[Lr].s&&ar(sn[Dr].pt.k[Lr].s[0]),sn[Dr].pt.k[Lr].e&&ar(sn[Dr].pt.k[Lr].e[0])}Tr.ty===0?(Tr.layers=Yt(Tr.refId,hr),Ht(Tr.layers,hr)):Tr.ty===4?er(Tr.shapes):Tr.ty===5&&kr(Tr)}}function Ut(Or,hr){if(Or){var Tr=0,mr=Or.length;for(Tr=0;Tr<mr;Tr+=1)Or[Tr].t===1&&(Or[Tr].data.layers=Yt(Or[Tr].data.refId,hr),Ht(Or[Tr].data.layers,hr))}}function Kt(Or,hr){for(var Tr=0,mr=hr.length;Tr<mr;){if(hr[Tr].id===Or)return hr[Tr];Tr+=1}return null}function Yt(Or,hr){var Tr=Kt(Or,hr);return Tr?Tr.layers.__used?JSON.parse(JSON.stringify(Tr.layers)):(Tr.layers.__used=!0,Tr.layers):null}function er(Or){var hr,Tr=Or.length,mr,Er;for(hr=Tr-1;hr>=0;hr-=1)if(Or[hr].ty==="sh")if(Or[hr].ks.k.i)ar(Or[hr].ks.k);else for(Er=Or[hr].ks.k.length,mr=0;mr<Er;mr+=1)Or[hr].ks.k[mr].s&&ar(Or[hr].ks.k[mr].s[0]),Or[hr].ks.k[mr].e&&ar(Or[hr].ks.k[mr].e[0]);else Or[hr].ty==="gr"&&er(Or[hr].it)}function ar(Or){var hr,Tr=Or.i.length;for(hr=0;hr<Tr;hr+=1)Or.i[hr][0]+=Or.v[hr][0],Or.i[hr][1]+=Or.v[hr][1],Or.o[hr][0]+=Or.v[hr][0],Or.o[hr][1]+=Or.v[hr][1]}function ir(Or,hr){var Tr=hr?hr.split("."):[100,100,100];return Or[0]>Tr[0]?!0:Tr[0]>Or[0]?!1:Or[1]>Tr[1]?!0:Tr[1]>Or[1]?!1:Or[2]>Tr[2]?!0:Tr[2]>Or[2]?!1:null}var lr=function(){var Or=[4,4,14];function hr(mr){var Er=mr.t.d;mr.t.d={k:[{s:Er,t:0}]}}function Tr(mr){var Er,Dr=mr.length;for(Er=0;Er<Dr;Er+=1)mr[Er].ty===5&&hr(mr[Er])}return function(mr){if(ir(Or,mr.v)&&(Tr(mr.layers),mr.assets)){var Er,Dr=mr.assets.length;for(Er=0;Er<Dr;Er+=1)mr.assets[Er].layers&&Tr(mr.assets[Er].layers)}}}(),cr=function(){var Or=[4,7,99];return function(hr){if(hr.chars&&!ir(Or,hr.v)){var Tr,mr=hr.chars.length;for(Tr=0;Tr<mr;Tr+=1){var Er=hr.chars[Tr];Er.data&&Er.data.shapes&&(er(Er.data.shapes),Er.data.ip=0,Er.data.op=99999,Er.data.st=0,Er.data.sr=1,Er.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},hr.chars[Tr].t||(Er.data.shapes.push({ty:"no"}),Er.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),vr=function(){var Or=[5,7,15];function hr(mr){var Er=mr.t.p;typeof Er.a=="number"&&(Er.a={a:0,k:Er.a}),typeof Er.p=="number"&&(Er.p={a:0,k:Er.p}),typeof Er.r=="number"&&(Er.r={a:0,k:Er.r})}function Tr(mr){var Er,Dr=mr.length;for(Er=0;Er<Dr;Er+=1)mr[Er].ty===5&&hr(mr[Er])}return function(mr){if(ir(Or,mr.v)&&(Tr(mr.layers),mr.assets)){var Er,Dr=mr.assets.length;for(Er=0;Er<Dr;Er+=1)mr.assets[Er].layers&&Tr(mr.assets[Er].layers)}}}(),xr=function(){var Or=[4,1,9];function hr(mr){var Er,Dr=mr.length,Cr,Lr;for(Er=0;Er<Dr;Er+=1)if(mr[Er].ty==="gr")hr(mr[Er].it);else if(mr[Er].ty==="fl"||mr[Er].ty==="st")if(mr[Er].c.k&&mr[Er].c.k[0].i)for(Lr=mr[Er].c.k.length,Cr=0;Cr<Lr;Cr+=1)mr[Er].c.k[Cr].s&&(mr[Er].c.k[Cr].s[0]/=255,mr[Er].c.k[Cr].s[1]/=255,mr[Er].c.k[Cr].s[2]/=255,mr[Er].c.k[Cr].s[3]/=255),mr[Er].c.k[Cr].e&&(mr[Er].c.k[Cr].e[0]/=255,mr[Er].c.k[Cr].e[1]/=255,mr[Er].c.k[Cr].e[2]/=255,mr[Er].c.k[Cr].e[3]/=255);else mr[Er].c.k[0]/=255,mr[Er].c.k[1]/=255,mr[Er].c.k[2]/=255,mr[Er].c.k[3]/=255}function Tr(mr){var Er,Dr=mr.length;for(Er=0;Er<Dr;Er+=1)mr[Er].ty===4&&hr(mr[Er].shapes)}return function(mr){if(ir(Or,mr.v)&&(Tr(mr.layers),mr.assets)){var Er,Dr=mr.assets.length;for(Er=0;Er<Dr;Er+=1)mr.assets[Er].layers&&Tr(mr.assets[Er].layers)}}}(),yr=function(){var Or=[4,4,18];function hr(mr){var Er,Dr=mr.length,Cr,Lr;for(Er=Dr-1;Er>=0;Er-=1)if(mr[Er].ty==="sh")if(mr[Er].ks.k.i)mr[Er].ks.k.c=mr[Er].closed;else for(Lr=mr[Er].ks.k.length,Cr=0;Cr<Lr;Cr+=1)mr[Er].ks.k[Cr].s&&(mr[Er].ks.k[Cr].s[0].c=mr[Er].closed),mr[Er].ks.k[Cr].e&&(mr[Er].ks.k[Cr].e[0].c=mr[Er].closed);else mr[Er].ty==="gr"&&hr(mr[Er].it)}function Tr(mr){var Er,Dr,Cr=mr.length,Lr,qr,sn,an;for(Dr=0;Dr<Cr;Dr+=1){if(Er=mr[Dr],Er.hasMask){var tn=Er.masksProperties;for(qr=tn.length,Lr=0;Lr<qr;Lr+=1)if(tn[Lr].pt.k.i)tn[Lr].pt.k.c=tn[Lr].cl;else for(an=tn[Lr].pt.k.length,sn=0;sn<an;sn+=1)tn[Lr].pt.k[sn].s&&(tn[Lr].pt.k[sn].s[0].c=tn[Lr].cl),tn[Lr].pt.k[sn].e&&(tn[Lr].pt.k[sn].e[0].c=tn[Lr].cl)}Er.ty===4&&hr(Er.shapes)}}return function(mr){if(ir(Or,mr.v)&&(Tr(mr.layers),mr.assets)){var Er,Dr=mr.assets.length;for(Er=0;Er<Dr;Er+=1)mr.assets[Er].layers&&Tr(mr.assets[Er].layers)}}}();function Sr(Or){Or.__complete||(xr(Or),lr(Or),cr(Or),vr(Or),yr(Or),Ht(Or.layers,Or.assets),Ut(Or.chars,Or.assets),Or.__complete=!0)}function kr(Or){Or.t.a.length===0&&"m"in Or.t.p}var Pr={};return Pr.completeData=Sr,Pr.checkColors=xr,Pr.checkChars=cr,Pr.checkPathProperties=vr,Pr.checkShapes=yr,Pr.completeLayers=Ht,Pr}if(ct.dataManager||(ct.dataManager=Bt()),ct.assetLoader||(ct.assetLoader=function(){function Ht(Kt){var Yt=Kt.getResponseHeader("content-type");return Yt&&Kt.responseType==="json"&&Yt.indexOf("json")!==-1||Kt.response&&_typeof$5(Kt.response)==="object"?Kt.response:Kt.response&&typeof Kt.response=="string"?JSON.parse(Kt.response):Kt.responseText?JSON.parse(Kt.responseText):null}function Ut(Kt,Yt,er,ar){var ir,lr=new XMLHttpRequest;try{lr.responseType="json"}catch{}lr.onreadystatechange=function(){if(lr.readyState===4)if(lr.status===200)ir=Ht(lr),er(ir);else try{ir=Ht(lr),er(ir)}catch(cr){ar&&ar(cr)}};try{lr.open(["G","E","T"].join(""),Kt,!0)}catch{lr.open(["G","E","T"].join(""),Yt+"/"+Kt,!0)}lr.send()}return{load:Ut}}()),jt.data.type==="loadAnimation")ct.assetLoader.load(jt.data.path,jt.data.fullPath,function(Ht){ct.dataManager.completeData(Ht),ct.postMessage({id:jt.data.id,payload:Ht,status:"success"})},function(){ct.postMessage({id:jt.data.id,status:"error"})});else if(jt.data.type==="complete"){var zt=jt.data.animation;ct.dataManager.completeData(zt),ct.postMessage({id:jt.data.id,payload:zt,status:"success"})}else jt.data.type==="loadData"&&ct.assetLoader.load(jt.data.path,jt.data.fullPath,function(Ht){ct.postMessage({id:jt.data.id,payload:Ht,status:"success"})},function(){ct.postMessage({id:jt.data.id,status:"error"})})}),ot.onmessage=function(Ft){var jt=Ft.data,Bt=jt.id,zt=g[Bt];g[Bt]=null,jt.status==="success"?zt.onComplete(jt.payload):zt.onError&&zt.onError()})}function St(Ft,jt){it+=1;var Bt="processId_"+it;return g[Bt]={onComplete:Ft,onError:jt},Bt}function kt(Ft,jt,Bt){ft();var zt=St(jt,Bt);ot.postMessage({type:"loadAnimation",path:Ft,fullPath:window.location.origin+window.location.pathname,id:zt})}function Tt(Ft,jt,Bt){ft();var zt=St(jt,Bt);ot.postMessage({type:"loadData",path:Ft,fullPath:window.location.origin+window.location.pathname,id:zt})}function Rt(Ft,jt,Bt){ft();var zt=St(jt,Bt);ot.postMessage({type:"complete",animation:Ft,id:zt})}return{loadAnimation:kt,loadData:Tt,completeAnimation:Rt}}(),ImagePreloader=function(){var it=function(){var Ut=createTag("canvas");Ut.width=1,Ut.height=1;var Kt=Ut.getContext("2d");return Kt.fillStyle="rgba(0,0,0,0)",Kt.fillRect(0,0,1,1),Ut}();function g(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function et(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ot(Ut,Kt,Yt){var er="";if(Ut.e)er=Ut.p;else if(Kt){var ar=Ut.p;ar.indexOf("images/")!==-1&&(ar=ar.split("/")[1]),er=Kt+ar}else er=Yt,er+=Ut.u?Ut.u:"",er+=Ut.p;return er}function ut(Ut){var Kt=0,Yt=setInterval((function(){var er=Ut.getBBox();(er.width||Kt>500)&&(this._imageLoaded(),clearInterval(Yt)),Kt+=1}).bind(this),50)}function ct(Ut){var Kt=ot(Ut,this.assetsPath,this.path),Yt=createNS("image");isSafari?this.testImageLoaded(Yt):Yt.addEventListener("load",this._imageLoaded,!1),Yt.addEventListener("error",(function(){er.img=it,this._imageLoaded()}).bind(this),!1),Yt.setAttributeNS("http://www.w3.org/1999/xlink","href",Kt),this._elementHelper.append?this._elementHelper.append(Yt):this._elementHelper.appendChild(Yt);var er={img:Yt,assetData:Ut};return er}function dt(Ut){var Kt=ot(Ut,this.assetsPath,this.path),Yt=createTag("img");Yt.crossOrigin="anonymous",Yt.addEventListener("load",this._imageLoaded,!1),Yt.addEventListener("error",(function(){er.img=it,this._imageLoaded()}).bind(this),!1),Yt.src=Kt;var er={img:Yt,assetData:Ut};return er}function ft(Ut){var Kt={assetData:Ut},Yt=ot(Ut,this.assetsPath,this.path);return dataManager.loadData(Yt,(function(er){Kt.img=er,this._footageLoaded()}).bind(this),(function(){Kt.img={},this._footageLoaded()}).bind(this)),Kt}function St(Ut,Kt){this.imagesLoadedCb=Kt;var Yt,er=Ut.length;for(Yt=0;Yt<er;Yt+=1)Ut[Yt].layers||(!Ut[Yt].t||Ut[Yt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Ut[Yt]))):Ut[Yt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Ut[Yt]))))}function kt(Ut){this.path=Ut||""}function Tt(Ut){this.assetsPath=Ut||""}function Rt(Ut){for(var Kt=0,Yt=this.images.length;Kt<Yt;){if(this.images[Kt].assetData===Ut)return this.images[Kt].img;Kt+=1}return null}function Ft(){this.imagesLoadedCb=null,this.images.length=0}function jt(){return this.totalImages===this.loadedAssets}function Bt(){return this.totalFootages===this.loadedFootagesCount}function zt(Ut,Kt){Ut==="svg"?(this._elementHelper=Kt,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Ht(){this._imageLoaded=g.bind(this),this._footageLoaded=et.bind(this),this.testImageLoaded=ut.bind(this),this.createFootageData=ft.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Ht.prototype={loadAssets:St,setAssetsPath:Tt,setPath:kt,loadedImages:jt,loadedFootages:Bt,destroy:Ft,getAsset:Rt,createImgData:dt,createImageData:ct,imageLoaded:g,footageLoaded:et,setCacheType:zt},Ht}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(g,et){if(this._cbs[g])for(var ot=this._cbs[g],ut=0;ut<ot.length;ut+=1)ot[ut](et)},addEventListener:function(g,et){return this._cbs[g]||(this._cbs[g]=[]),this._cbs[g].push(et),(function(){this.removeEventListener(g,et)}).bind(this)},removeEventListener:function(g,et){if(!et)this._cbs[g]=null;else if(this._cbs[g]){for(var ot=0,ut=this._cbs[g].length;ot<ut;)this._cbs[g][ot]===et&&(this._cbs[g].splice(ot,1),ot-=1,ut-=1),ot+=1;this._cbs[g].length||(this._cbs[g]=null)}}};var markerParser=function(){function it(g){for(var et=g.split(`\r
`),ot={},ut,ct=0,dt=0;dt<et.length;dt+=1)ut=et[dt].split(":"),ut.length===2&&(ot[ut[0]]=ut[1].trim(),ct+=1);if(ct===0)throw new Error;return ot}return function(g){for(var et=[],ot=0;ot<g.length;ot+=1){var ut=g[ot],ct={time:ut.tm,duration:ut.dr};try{ct.payload=JSON.parse(g[ot].cm)}catch{try{ct.payload=it(g[ot].cm)}catch{ct.payload={name:g[ot].cm}}}et.push(ct)}return et}}(),ProjectInterface=function(){function it(g){this.compositions.push(g)}return function(){function g(et){for(var ot=0,ut=this.compositions.length;ot<ut;){if(this.compositions[ot].data&&this.compositions[ot].data.nm===et)return this.compositions[ot].prepareFrame&&this.compositions[ot].data.xt&&this.compositions[ot].prepareFrame(this.currentFrame),this.compositions[ot].compInterface;ot+=1}return null}return g.compositions=[],g.currentFrame=0,g.registerComposition=it,g}}(),renderers={},registerRenderer=function(g,et){renderers[g]=et};function getRenderer(it){return renderers[it]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var it in renderers)if(renderers[it])return it;return""}function _typeof$4(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(et){return typeof et}:_typeof$4=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$4(it)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(it){(it.wrapper||it.container)&&(this.wrapper=it.wrapper||it.container);var g="svg";it.animType?g=it.animType:it.renderer&&(g=it.renderer);var et=getRenderer(g);this.renderer=new et(this,it.rendererSettings),this.imagePreloader.setCacheType(g,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=g,it.loop===""||it.loop===null||it.loop===void 0||it.loop===!0?this.loop=!0:it.loop===!1?this.loop=!1:this.loop=parseInt(it.loop,10),this.autoplay="autoplay"in it?it.autoplay:!0,this.name=it.name?it.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(it,"autoloadSegments")?it.autoloadSegments:!0,this.assetsPath=it.assetsPath,this.initialSegment=it.initialSegment,it.audioFactory&&this.audioController.setAudioFactory(it.audioFactory),it.animationData?this.setupAnimation(it.animationData):it.path&&(it.path.lastIndexOf("\\")!==-1?this.path=it.path.substr(0,it.path.lastIndexOf("\\")+1):this.path=it.path.substr(0,it.path.lastIndexOf("/")+1),this.fileName=it.path.substr(it.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(it.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(it){dataManager.completeAnimation(it,this.configAnimation)},AnimationItem.prototype.setData=function(it,g){g&&_typeof$4(g)!=="object"&&(g=JSON.parse(g));var et={wrapper:it,animationData:g},ot=it.attributes;et.path=ot.getNamedItem("data-animation-path")?ot.getNamedItem("data-animation-path").value:ot.getNamedItem("data-bm-path")?ot.getNamedItem("data-bm-path").value:ot.getNamedItem("bm-path")?ot.getNamedItem("bm-path").value:"",et.animType=ot.getNamedItem("data-anim-type")?ot.getNamedItem("data-anim-type").value:ot.getNamedItem("data-bm-type")?ot.getNamedItem("data-bm-type").value:ot.getNamedItem("bm-type")?ot.getNamedItem("bm-type").value:ot.getNamedItem("data-bm-renderer")?ot.getNamedItem("data-bm-renderer").value:ot.getNamedItem("bm-renderer")?ot.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var ut=ot.getNamedItem("data-anim-loop")?ot.getNamedItem("data-anim-loop").value:ot.getNamedItem("data-bm-loop")?ot.getNamedItem("data-bm-loop").value:ot.getNamedItem("bm-loop")?ot.getNamedItem("bm-loop").value:"";ut==="false"?et.loop=!1:ut==="true"?et.loop=!0:ut!==""&&(et.loop=parseInt(ut,10));var ct=ot.getNamedItem("data-anim-autoplay")?ot.getNamedItem("data-anim-autoplay").value:ot.getNamedItem("data-bm-autoplay")?ot.getNamedItem("data-bm-autoplay").value:ot.getNamedItem("bm-autoplay")?ot.getNamedItem("bm-autoplay").value:!0;et.autoplay=ct!=="false",et.name=ot.getNamedItem("data-name")?ot.getNamedItem("data-name").value:ot.getNamedItem("data-bm-name")?ot.getNamedItem("data-bm-name").value:ot.getNamedItem("bm-name")?ot.getNamedItem("bm-name").value:"";var dt=ot.getNamedItem("data-anim-prerender")?ot.getNamedItem("data-anim-prerender").value:ot.getNamedItem("data-bm-prerender")?ot.getNamedItem("data-bm-prerender").value:ot.getNamedItem("bm-prerender")?ot.getNamedItem("bm-prerender").value:"";dt==="false"&&(et.prerender=!1),et.path?this.setParams(et):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(it){it.op>this.animationData.op&&(this.animationData.op=it.op,this.totalFrames=Math.floor(it.op-this.animationData.ip));var g=this.animationData.layers,et,ot=g.length,ut=it.layers,ct,dt=ut.length;for(ct=0;ct<dt;ct+=1)for(et=0;et<ot;){if(g[et].id===ut[ct].id){g[et]=ut[ct];break}et+=1}if((it.chars||it.fonts)&&(this.renderer.globalData.fontManager.addChars(it.chars),this.renderer.globalData.fontManager.addFonts(it.fonts,this.renderer.globalData.defs)),it.assets)for(ot=it.assets.length,et=0;et<ot;et+=1)this.animationData.assets.push(it.assets[et]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(it){this.animationData=it;var g=getExpressionsPlugin();g&&g.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var it=this.animationData.segments;if(!it||it.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var g=it.shift();this.timeCompleted=g.time*this.frameRate;var et=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(et,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var it=this.animationData.segments;it||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(it){if(this.renderer)try{this.animationData=it,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(it),it.assets||(it.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(it.assets),this.markers=markerParser(it.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(g){this.triggerConfigError(g)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var it=getExpressionsPlugin();it&&it.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(it,g){var et=typeof it=="number"?it:void 0,ot=typeof g=="number"?g:void 0;this.renderer.updateContainerSize(et,ot)},AnimationItem.prototype.setSubframe=function(it){this.isSubframeEnabled=!!it},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(it){this.triggerRenderFrameError(it)}},AnimationItem.prototype.play=function(it){it&&this.name!==it||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(it){it&&this.name!==it||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(it){it&&this.name!==it||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(it){it&&this.name!==it||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(it){for(var g,et=0;et<this.markers.length;et+=1)if(g=this.markers[et],g.payload&&g.payload.name===it)return g;return null},AnimationItem.prototype.goToAndStop=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ut=this.getMarkerData(it);ut&&this.goToAndStop(ut.time,!0)}else g?this.setCurrentRawFrameValue(it):this.setCurrentRawFrameValue(it*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(it,g,et){if(!(et&&this.name!==et)){var ot=Number(it);if(isNaN(ot)){var ut=this.getMarkerData(it);ut&&(ut.duration?this.playSegments([ut.time,ut.time+ut.duration],!0):this.goToAndStop(ut.time,!0))}else this.goToAndStop(ot,g,et);this.play()}},AnimationItem.prototype.advanceTime=function(it){if(!(this.isPaused===!0||this.isLoaded===!1)){var g=this.currentRawFrame+it*this.frameModifier,et=!1;g>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(g>this.totalFrames?g%this.totalFrames:0)||(et=!0,g=this.totalFrames-1):g>=this.totalFrames?(this.playCount+=1,this.checkSegments(g%this.totalFrames)||(this.setCurrentRawFrameValue(g%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(g):g<0?this.checkSegments(g%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+g%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(et=!0,g=0)):this.setCurrentRawFrameValue(g),et&&(this.setCurrentRawFrameValue(g),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(it,g){this.playCount=0,it[1]<it[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=it[0]-it[1],this.timeCompleted=this.totalFrames,this.firstFrame=it[1],this.setCurrentRawFrameValue(this.totalFrames-.001-g)):it[1]>it[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=it[1]-it[0],this.timeCompleted=this.totalFrames,this.firstFrame=it[0],this.setCurrentRawFrameValue(.001+g)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(it,g){var et=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<it?et=it:this.currentRawFrame+this.firstFrame>g&&(et=g-it)),this.firstFrame=it,this.totalFrames=g-it,this.timeCompleted=this.totalFrames,et!==-1&&this.goToAndStop(et,!0)},AnimationItem.prototype.playSegments=function(it,g){if(g&&(this.segments.length=0),_typeof$4(it[0])==="object"){var et,ot=it.length;for(et=0;et<ot;et+=1)this.segments.push(it[et])}else this.segments.push(it);this.segments.length&&g&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(it){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),it&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(it){return this.segments.length?(this.adjustSegment(this.segments.shift(),it),!0):!1},AnimationItem.prototype.destroy=function(it){it&&this.name!==it||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(it){this.currentRawFrame=it,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(it){this.playSpeed=it,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(it){this.playDirection=it<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(it){this.loop=it},AnimationItem.prototype.setVolume=function(it,g){g&&this.name!==g||this.audioController.setVolume(it)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(it){it&&this.name!==it||this.audioController.mute()},AnimationItem.prototype.unmute=function(it){it&&this.name!==it||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(it){var g="";if(it.e)g=it.p;else if(this.assetsPath){var et=it.p;et.indexOf("images/")!==-1&&(et=et.split("/")[1]),g=this.assetsPath+et}else g=this.path,g+=it.u?it.u:"",g+=it.p;return g},AnimationItem.prototype.getAssetData=function(it){for(var g=0,et=this.assets.length;g<et;){if(it===this.assets[g].id)return this.assets[g];g+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(it){return it?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(it,g,et){try{var ot=this.renderer.getElementByPath(it);ot.updateDocumentData(g,et)}catch{}},AnimationItem.prototype.trigger=function(it){if(this._cbs&&this._cbs[it])switch(it){case"enterFrame":this.triggerEvent(it,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(it,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(it,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(it,new BMCompleteEvent(it,this.frameMult));break;case"segmentStart":this.triggerEvent(it,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(it,new BMDestroyEvent(it,this));break;default:this.triggerEvent(it)}it==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(it,this.currentFrame,this.totalFrames,this.frameMult)),it==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(it,this.loop,this.playCount,this.frameMult)),it==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(it,this.frameMult)),it==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(it,this.firstFrame,this.totalFrames)),it==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(it,this))},AnimationItem.prototype.triggerRenderFrameError=function(it){var g=new BMRenderFrameErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)},AnimationItem.prototype.triggerConfigError=function(it){var g=new BMConfigErrorEvent(it,this.currentFrame);this.triggerEvent("error",g),this.onError&&this.onError.call(this,g)};var animationManager=function(){var it={},g=[],et=0,ot=0,ut=0,ct=!0,dt=!1;function ft(hr){for(var Tr=0,mr=hr.target;Tr<ot;)g[Tr].animation===mr&&(g.splice(Tr,1),Tr-=1,ot-=1,mr.isPaused||Rt()),Tr+=1}function St(hr,Tr){if(!hr)return null;for(var mr=0;mr<ot;){if(g[mr].elem===hr&&g[mr].elem!==null)return g[mr].animation;mr+=1}var Er=new AnimationItem;return Ft(Er,hr),Er.setData(hr,Tr),Er}function kt(){var hr,Tr=g.length,mr=[];for(hr=0;hr<Tr;hr+=1)mr.push(g[hr].animation);return mr}function Tt(){ut+=1,xr()}function Rt(){ut-=1}function Ft(hr,Tr){hr.addEventListener("destroy",ft),hr.addEventListener("_active",Tt),hr.addEventListener("_idle",Rt),g.push({elem:Tr,animation:hr}),ot+=1}function jt(hr){var Tr=new AnimationItem;return Ft(Tr,null),Tr.setParams(hr),Tr}function Bt(hr,Tr){var mr;for(mr=0;mr<ot;mr+=1)g[mr].animation.setSpeed(hr,Tr)}function zt(hr,Tr){var mr;for(mr=0;mr<ot;mr+=1)g[mr].animation.setDirection(hr,Tr)}function Ht(hr){var Tr;for(Tr=0;Tr<ot;Tr+=1)g[Tr].animation.play(hr)}function Ut(hr){var Tr=hr-et,mr;for(mr=0;mr<ot;mr+=1)g[mr].animation.advanceTime(Tr);et=hr,ut&&!dt?window.requestAnimationFrame(Ut):ct=!0}function Kt(hr){et=hr,window.requestAnimationFrame(Ut)}function Yt(hr){var Tr;for(Tr=0;Tr<ot;Tr+=1)g[Tr].animation.pause(hr)}function er(hr,Tr,mr){var Er;for(Er=0;Er<ot;Er+=1)g[Er].animation.goToAndStop(hr,Tr,mr)}function ar(hr){var Tr;for(Tr=0;Tr<ot;Tr+=1)g[Tr].animation.stop(hr)}function ir(hr){var Tr;for(Tr=0;Tr<ot;Tr+=1)g[Tr].animation.togglePause(hr)}function lr(hr){var Tr;for(Tr=ot-1;Tr>=0;Tr-=1)g[Tr].animation.destroy(hr)}function cr(hr,Tr,mr){var Er=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Dr,Cr=Er.length;for(Dr=0;Dr<Cr;Dr+=1)mr&&Er[Dr].setAttribute("data-bm-type",mr),St(Er[Dr],hr);if(Tr&&Cr===0){mr||(mr="svg");var Lr=document.getElementsByTagName("body")[0];Lr.innerText="";var qr=createTag("div");qr.style.width="100%",qr.style.height="100%",qr.setAttribute("data-bm-type",mr),Lr.appendChild(qr),St(qr,hr)}}function vr(){var hr;for(hr=0;hr<ot;hr+=1)g[hr].animation.resize()}function xr(){!dt&&ut&&ct&&(window.requestAnimationFrame(Kt),ct=!1)}function yr(){dt=!0}function Sr(){dt=!1,xr()}function kr(hr,Tr){var mr;for(mr=0;mr<ot;mr+=1)g[mr].animation.setVolume(hr,Tr)}function Pr(hr){var Tr;for(Tr=0;Tr<ot;Tr+=1)g[Tr].animation.mute(hr)}function Or(hr){var Tr;for(Tr=0;Tr<ot;Tr+=1)g[Tr].animation.unmute(hr)}return it.registerAnimation=St,it.loadAnimation=jt,it.setSpeed=Bt,it.setDirection=zt,it.play=Ht,it.pause=Yt,it.stop=ar,it.togglePause=ir,it.searchAnimations=cr,it.resize=vr,it.goToAndStop=er,it.destroy=lr,it.freeze=yr,it.unfreeze=Sr,it.setVolume=kr,it.mute=Pr,it.unmute=Or,it.getRegisteredAnimations=kt,it}(),BezierFactory=function(){var it={};it.getBezierEasing=et;var g={};function et(Kt,Yt,er,ar,ir){var lr=ir||("bez_"+Kt+"_"+Yt+"_"+er+"_"+ar).replace(/\./g,"p");if(g[lr])return g[lr];var cr=new Ut([Kt,Yt,er,ar]);return g[lr]=cr,cr}var ot=4,ut=.001,ct=1e-7,dt=10,ft=11,St=1/(ft-1),kt=typeof Float32Array=="function";function Tt(Kt,Yt){return 1-3*Yt+3*Kt}function Rt(Kt,Yt){return 3*Yt-6*Kt}function Ft(Kt){return 3*Kt}function jt(Kt,Yt,er){return((Tt(Yt,er)*Kt+Rt(Yt,er))*Kt+Ft(Yt))*Kt}function Bt(Kt,Yt,er){return 3*Tt(Yt,er)*Kt*Kt+2*Rt(Yt,er)*Kt+Ft(Yt)}function zt(Kt,Yt,er,ar,ir){var lr,cr,vr=0;do cr=Yt+(er-Yt)/2,lr=jt(cr,ar,ir)-Kt,lr>0?er=cr:Yt=cr;while(Math.abs(lr)>ct&&++vr<dt);return cr}function Ht(Kt,Yt,er,ar){for(var ir=0;ir<ot;++ir){var lr=Bt(Yt,er,ar);if(lr===0)return Yt;var cr=jt(Yt,er,ar)-Kt;Yt-=cr/lr}return Yt}function Ut(Kt){this._p=Kt,this._mSampleValues=kt?new Float32Array(ft):new Array(ft),this._precomputed=!1,this.get=this.get.bind(this)}return Ut.prototype={get:function(Yt){var er=this._p[0],ar=this._p[1],ir=this._p[2],lr=this._p[3];return this._precomputed||this._precompute(),er===ar&&ir===lr?Yt:Yt===0?0:Yt===1?1:jt(this._getTForX(Yt),ar,lr)},_precompute:function(){var Yt=this._p[0],er=this._p[1],ar=this._p[2],ir=this._p[3];this._precomputed=!0,(Yt!==er||ar!==ir)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Yt=this._p[0],er=this._p[2],ar=0;ar<ft;++ar)this._mSampleValues[ar]=jt(ar*St,Yt,er)},_getTForX:function(Yt){for(var er=this._p[0],ar=this._p[2],ir=this._mSampleValues,lr=0,cr=1,vr=ft-1;cr!==vr&&ir[cr]<=Yt;++cr)lr+=St;--cr;var xr=(Yt-ir[cr])/(ir[cr+1]-ir[cr]),yr=lr+xr*St,Sr=Bt(yr,er,ar);return Sr>=ut?Ht(Yt,yr,er,ar):Sr===0?yr:zt(Yt,lr,lr+St,er,ar)}},it}(),pooling=function(){function it(g){return g.concat(createSizedArray(g.length))}return{double:it}}(),poolFactory=function(){return function(it,g,et){var ot=0,ut=it,ct=createSizedArray(ut),dt={newElement:ft,release:St};function ft(){var kt;return ot?(ot-=1,kt=ct[ot]):kt=g(),kt}function St(kt){ot===ut&&(ct=pooling.double(ct),ut*=2),et&&et(kt),ct[ot]=kt,ot+=1}return dt}}(),bezierLengthPool=function(){function it(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,it)}(),segmentsLengthPool=function(){function it(){return{lengths:[],totalLength:0}}function g(et){var ot,ut=et.lengths.length;for(ot=0;ot<ut;ot+=1)bezierLengthPool.release(et.lengths[ot]);et.lengths.length=0}return poolFactory(8,it,g)}();function bezFunction(){var it=Math;function g(Ft,jt,Bt,zt,Ht,Ut){var Kt=Ft*zt+jt*Ht+Bt*Ut-Ht*zt-Ut*Ft-Bt*jt;return Kt>-.001&&Kt<.001}function et(Ft,jt,Bt,zt,Ht,Ut,Kt,Yt,er){if(Bt===0&&Ut===0&&er===0)return g(Ft,jt,zt,Ht,Kt,Yt);var ar=it.sqrt(it.pow(zt-Ft,2)+it.pow(Ht-jt,2)+it.pow(Ut-Bt,2)),ir=it.sqrt(it.pow(Kt-Ft,2)+it.pow(Yt-jt,2)+it.pow(er-Bt,2)),lr=it.sqrt(it.pow(Kt-zt,2)+it.pow(Yt-Ht,2)+it.pow(er-Ut,2)),cr;return ar>ir?ar>lr?cr=ar-ir-lr:cr=lr-ir-ar:lr>ir?cr=lr-ir-ar:cr=ir-ar-lr,cr>-1e-4&&cr<1e-4}var ot=function(){return function(Ft,jt,Bt,zt){var Ht=getDefaultCurveSegments(),Ut,Kt,Yt,er,ar,ir=0,lr,cr=[],vr=[],xr=bezierLengthPool.newElement();for(Yt=Bt.length,Ut=0;Ut<Ht;Ut+=1){for(ar=Ut/(Ht-1),lr=0,Kt=0;Kt<Yt;Kt+=1)er=bmPow(1-ar,3)*Ft[Kt]+3*bmPow(1-ar,2)*ar*Bt[Kt]+3*(1-ar)*bmPow(ar,2)*zt[Kt]+bmPow(ar,3)*jt[Kt],cr[Kt]=er,vr[Kt]!==null&&(lr+=bmPow(cr[Kt]-vr[Kt],2)),vr[Kt]=cr[Kt];lr&&(lr=bmSqrt(lr),ir+=lr),xr.percents[Ut]=ar,xr.lengths[Ut]=ir}return xr.addedLength=ir,xr}}();function ut(Ft){var jt=segmentsLengthPool.newElement(),Bt=Ft.c,zt=Ft.v,Ht=Ft.o,Ut=Ft.i,Kt,Yt=Ft._length,er=jt.lengths,ar=0;for(Kt=0;Kt<Yt-1;Kt+=1)er[Kt]=ot(zt[Kt],zt[Kt+1],Ht[Kt],Ut[Kt+1]),ar+=er[Kt].addedLength;return Bt&&Yt&&(er[Kt]=ot(zt[Kt],zt[0],Ht[Kt],Ut[0]),ar+=er[Kt].addedLength),jt.totalLength=ar,jt}function ct(Ft){this.segmentLength=0,this.points=new Array(Ft)}function dt(Ft,jt){this.partialLength=Ft,this.point=jt}var ft=function(){var Ft={};return function(jt,Bt,zt,Ht){var Ut=(jt[0]+"_"+jt[1]+"_"+Bt[0]+"_"+Bt[1]+"_"+zt[0]+"_"+zt[1]+"_"+Ht[0]+"_"+Ht[1]).replace(/\./g,"p");if(!Ft[Ut]){var Kt=getDefaultCurveSegments(),Yt,er,ar,ir,lr,cr=0,vr,xr,yr=null;jt.length===2&&(jt[0]!==Bt[0]||jt[1]!==Bt[1])&&g(jt[0],jt[1],Bt[0],Bt[1],jt[0]+zt[0],jt[1]+zt[1])&&g(jt[0],jt[1],Bt[0],Bt[1],Bt[0]+Ht[0],Bt[1]+Ht[1])&&(Kt=2);var Sr=new ct(Kt);for(ar=zt.length,Yt=0;Yt<Kt;Yt+=1){for(xr=createSizedArray(ar),lr=Yt/(Kt-1),vr=0,er=0;er<ar;er+=1)ir=bmPow(1-lr,3)*jt[er]+3*bmPow(1-lr,2)*lr*(jt[er]+zt[er])+3*(1-lr)*bmPow(lr,2)*(Bt[er]+Ht[er])+bmPow(lr,3)*Bt[er],xr[er]=ir,yr!==null&&(vr+=bmPow(xr[er]-yr[er],2));vr=bmSqrt(vr),cr+=vr,Sr.points[Yt]=new dt(vr,xr),yr=xr}Sr.segmentLength=cr,Ft[Ut]=Sr}return Ft[Ut]}}();function St(Ft,jt){var Bt=jt.percents,zt=jt.lengths,Ht=Bt.length,Ut=bmFloor((Ht-1)*Ft),Kt=Ft*jt.addedLength,Yt=0;if(Ut===Ht-1||Ut===0||Kt===zt[Ut])return Bt[Ut];for(var er=zt[Ut]>Kt?-1:1,ar=!0;ar;)if(zt[Ut]<=Kt&&zt[Ut+1]>Kt?(Yt=(Kt-zt[Ut])/(zt[Ut+1]-zt[Ut]),ar=!1):Ut+=er,Ut<0||Ut>=Ht-1){if(Ut===Ht-1)return Bt[Ut];ar=!1}return Bt[Ut]+(Bt[Ut+1]-Bt[Ut])*Yt}function kt(Ft,jt,Bt,zt,Ht,Ut){var Kt=St(Ht,Ut),Yt=1-Kt,er=it.round((Yt*Yt*Yt*Ft[0]+(Kt*Yt*Yt+Yt*Kt*Yt+Yt*Yt*Kt)*Bt[0]+(Kt*Kt*Yt+Yt*Kt*Kt+Kt*Yt*Kt)*zt[0]+Kt*Kt*Kt*jt[0])*1e3)/1e3,ar=it.round((Yt*Yt*Yt*Ft[1]+(Kt*Yt*Yt+Yt*Kt*Yt+Yt*Yt*Kt)*Bt[1]+(Kt*Kt*Yt+Yt*Kt*Kt+Kt*Yt*Kt)*zt[1]+Kt*Kt*Kt*jt[1])*1e3)/1e3;return[er,ar]}var Tt=createTypedArray("float32",8);function Rt(Ft,jt,Bt,zt,Ht,Ut,Kt){Ht<0?Ht=0:Ht>1&&(Ht=1);var Yt=St(Ht,Kt);Ut=Ut>1?1:Ut;var er=St(Ut,Kt),ar,ir=Ft.length,lr=1-Yt,cr=1-er,vr=lr*lr*lr,xr=Yt*lr*lr*3,yr=Yt*Yt*lr*3,Sr=Yt*Yt*Yt,kr=lr*lr*cr,Pr=Yt*lr*cr+lr*Yt*cr+lr*lr*er,Or=Yt*Yt*cr+lr*Yt*er+Yt*lr*er,hr=Yt*Yt*er,Tr=lr*cr*cr,mr=Yt*cr*cr+lr*er*cr+lr*cr*er,Er=Yt*er*cr+lr*er*er+Yt*cr*er,Dr=Yt*er*er,Cr=cr*cr*cr,Lr=er*cr*cr+cr*er*cr+cr*cr*er,qr=er*er*cr+cr*er*er+er*cr*er,sn=er*er*er;for(ar=0;ar<ir;ar+=1)Tt[ar*4]=it.round((vr*Ft[ar]+xr*Bt[ar]+yr*zt[ar]+Sr*jt[ar])*1e3)/1e3,Tt[ar*4+1]=it.round((kr*Ft[ar]+Pr*Bt[ar]+Or*zt[ar]+hr*jt[ar])*1e3)/1e3,Tt[ar*4+2]=it.round((Tr*Ft[ar]+mr*Bt[ar]+Er*zt[ar]+Dr*jt[ar])*1e3)/1e3,Tt[ar*4+3]=it.round((Cr*Ft[ar]+Lr*Bt[ar]+qr*zt[ar]+sn*jt[ar])*1e3)/1e3;return Tt}return{getSegmentsLength:ut,getNewSegment:Rt,getPointInSegment:kt,buildBezierData:ft,pointOnLine2D:g,pointOnLine3D:et}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(it,g){var et=this.offsetTime,ot;this.propType==="multidimensional"&&(ot=createTypedArray("float32",this.pv.length));for(var ut=g.lastIndex,ct=ut,dt=this.keyframes.length-1,ft=!0,St,kt,Tt;ft;){if(St=this.keyframes[ct],kt=this.keyframes[ct+1],ct===dt-1&&it>=kt.t-et){St.h&&(St=kt),ut=0;break}if(kt.t-et>it){ut=ct;break}ct<dt-1?ct+=1:(ut=0,ft=!1)}Tt=this.keyframesMetadata[ct]||{};var Rt,Ft,jt,Bt,zt,Ht,Ut=kt.t-et,Kt=St.t-et,Yt;if(St.to){Tt.bezierData||(Tt.bezierData=bez.buildBezierData(St.s,kt.s||St.e,St.to,St.ti));var er=Tt.bezierData;if(it>=Ut||it<Kt){var ar=it>=Ut?er.points.length-1:0;for(Ft=er.points[ar].point.length,Rt=0;Rt<Ft;Rt+=1)ot[Rt]=er.points[ar].point[Rt]}else{Tt.__fnct?Ht=Tt.__fnct:(Ht=BezierFactory.getBezierEasing(St.o.x,St.o.y,St.i.x,St.i.y,St.n).get,Tt.__fnct=Ht),jt=Ht((it-Kt)/(Ut-Kt));var ir=er.segmentLength*jt,lr,cr=g.lastFrame<it&&g._lastKeyframeIndex===ct?g._lastAddedLength:0;for(zt=g.lastFrame<it&&g._lastKeyframeIndex===ct?g._lastPoint:0,ft=!0,Bt=er.points.length;ft;){if(cr+=er.points[zt].partialLength,ir===0||jt===0||zt===er.points.length-1){for(Ft=er.points[zt].point.length,Rt=0;Rt<Ft;Rt+=1)ot[Rt]=er.points[zt].point[Rt];break}else if(ir>=cr&&ir<cr+er.points[zt+1].partialLength){for(lr=(ir-cr)/er.points[zt+1].partialLength,Ft=er.points[zt].point.length,Rt=0;Rt<Ft;Rt+=1)ot[Rt]=er.points[zt].point[Rt]+(er.points[zt+1].point[Rt]-er.points[zt].point[Rt])*lr;break}zt<Bt-1?zt+=1:ft=!1}g._lastPoint=zt,g._lastAddedLength=cr-er.points[zt].partialLength,g._lastKeyframeIndex=ct}}else{var vr,xr,yr,Sr,kr;if(dt=St.s.length,Yt=kt.s||St.e,this.sh&&St.h!==1)if(it>=Ut)ot[0]=Yt[0],ot[1]=Yt[1],ot[2]=Yt[2];else if(it<=Kt)ot[0]=St.s[0],ot[1]=St.s[1],ot[2]=St.s[2];else{var Pr=createQuaternion(St.s),Or=createQuaternion(Yt),hr=(it-Kt)/(Ut-Kt);quaternionToEuler(ot,slerp(Pr,Or,hr))}else for(ct=0;ct<dt;ct+=1)St.h!==1&&(it>=Ut?jt=1:it<Kt?jt=0:(St.o.x.constructor===Array?(Tt.__fnct||(Tt.__fnct=[]),Tt.__fnct[ct]?Ht=Tt.__fnct[ct]:(vr=St.o.x[ct]===void 0?St.o.x[0]:St.o.x[ct],xr=St.o.y[ct]===void 0?St.o.y[0]:St.o.y[ct],yr=St.i.x[ct]===void 0?St.i.x[0]:St.i.x[ct],Sr=St.i.y[ct]===void 0?St.i.y[0]:St.i.y[ct],Ht=BezierFactory.getBezierEasing(vr,xr,yr,Sr).get,Tt.__fnct[ct]=Ht)):Tt.__fnct?Ht=Tt.__fnct:(vr=St.o.x,xr=St.o.y,yr=St.i.x,Sr=St.i.y,Ht=BezierFactory.getBezierEasing(vr,xr,yr,Sr).get,St.keyframeMetadata=Ht),jt=Ht((it-Kt)/(Ut-Kt)))),Yt=kt.s||St.e,kr=St.h===1?St.s[ct]:St.s[ct]+(Yt[ct]-St.s[ct])*jt,this.propType==="multidimensional"?ot[ct]=kr:ot=kr}return g.lastIndex=ut,ot}function slerp(it,g,et){var ot=[],ut=it[0],ct=it[1],dt=it[2],ft=it[3],St=g[0],kt=g[1],Tt=g[2],Rt=g[3],Ft,jt,Bt,zt,Ht;return jt=ut*St+ct*kt+dt*Tt+ft*Rt,jt<0&&(jt=-jt,St=-St,kt=-kt,Tt=-Tt,Rt=-Rt),1-jt>1e-6?(Ft=Math.acos(jt),Bt=Math.sin(Ft),zt=Math.sin((1-et)*Ft)/Bt,Ht=Math.sin(et*Ft)/Bt):(zt=1-et,Ht=et),ot[0]=zt*ut+Ht*St,ot[1]=zt*ct+Ht*kt,ot[2]=zt*dt+Ht*Tt,ot[3]=zt*ft+Ht*Rt,ot}function quaternionToEuler(it,g){var et=g[0],ot=g[1],ut=g[2],ct=g[3],dt=Math.atan2(2*ot*ct-2*et*ut,1-2*ot*ot-2*ut*ut),ft=Math.asin(2*et*ot+2*ut*ct),St=Math.atan2(2*et*ct-2*ot*ut,1-2*et*et-2*ut*ut);it[0]=dt/degToRads,it[1]=ft/degToRads,it[2]=St/degToRads}function createQuaternion(it){var g=it[0]*degToRads,et=it[1]*degToRads,ot=it[2]*degToRads,ut=Math.cos(g/2),ct=Math.cos(et/2),dt=Math.cos(ot/2),ft=Math.sin(g/2),St=Math.sin(et/2),kt=Math.sin(ot/2),Tt=ut*ct*dt-ft*St*kt,Rt=ft*St*dt+ut*ct*kt,Ft=ft*ct*dt+ut*St*kt,jt=ut*St*dt-ft*ct*kt;return[Rt,Ft,jt,Tt]}function getValueAtCurrentTime(){var it=this.comp.renderedFrame-this.offsetTime,g=this.keyframes[0].t-this.offsetTime,et=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(it===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=et&&it>=et||this._caching.lastFrame<g&&it<g))){this._caching.lastFrame>=it&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var ot=this.interpolateValue(it,this._caching);this.pv=ot}return this._caching.lastFrame=it,this.pv}function setVValue(it){var g;if(this.propType==="unidimensional")g=it*this.mult,mathAbs(this.v-g)>1e-5&&(this.v=g,this._mdf=!0);else for(var et=0,ot=this.v.length;et<ot;)g=it[et]*this.mult,mathAbs(this.v[et]-g)>1e-5&&(this.v[et]=g,this._mdf=!0),et+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var it,g=this.effectsSequence.length,et=this.kf?this.pv:this.data.k;for(it=0;it<g;it+=1)et=this.effectsSequence[it](et);this.setVValue(et),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(it){this.effectsSequence.push(it),this.container.addDynamicProperty(this)}function ValueProperty(it,g,et,ot){this.propType="unidimensional",this.mult=et||1,this.data=g,this.v=et?g.k*et:g.k,this.pv=g.k,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(it,g,et,ot){this.propType="multidimensional",this.mult=et||1,this.data=g,this._mdf=!1,this.elem=it,this.container=ot,this.comp=it.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ut,ct=g.k.length;for(this.v=createTypedArray("float32",ct),this.pv=createTypedArray("float32",ct),this.vel=createTypedArray("float32",ct),ut=0;ut<ct;ut+=1)this.v[ut]=g.k[ut]*this.mult,this.pv[ut]=g.k[ut];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(it,g,et,ot){this.propType="unidimensional",this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=g,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(it,g,et,ot){this.propType="multidimensional";var ut,ct=g.k.length,dt,ft,St,kt;for(ut=0;ut<ct-1;ut+=1)g.k[ut].to&&g.k[ut].s&&g.k[ut+1]&&g.k[ut+1].s&&(dt=g.k[ut].s,ft=g.k[ut+1].s,St=g.k[ut].to,kt=g.k[ut].ti,(dt.length===2&&!(dt[0]===ft[0]&&dt[1]===ft[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],dt[0]+St[0],dt[1]+St[1])&&bez.pointOnLine2D(dt[0],dt[1],ft[0],ft[1],ft[0]+kt[0],ft[1]+kt[1])||dt.length===3&&!(dt[0]===ft[0]&&dt[1]===ft[1]&&dt[2]===ft[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],dt[0]+St[0],dt[1]+St[1],dt[2]+St[2])&&bez.pointOnLine3D(dt[0],dt[1],dt[2],ft[0],ft[1],ft[2],ft[0]+kt[0],ft[1]+kt[1],ft[2]+kt[2]))&&(g.k[ut].to=null,g.k[ut].ti=null),dt[0]===ft[0]&&dt[1]===ft[1]&&St[0]===0&&St[1]===0&&kt[0]===0&&kt[1]===0&&(dt.length===2||dt[2]===ft[2]&&St[2]===0&&kt[2]===0)&&(g.k[ut].to=null,g.k[ut].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=g,this.keyframes=g.k,this.keyframesMetadata=[],this.offsetTime=it.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=et||1,this.elem=it,this.container=ot,this.comp=it.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Tt=g.k[0].s.length;for(this.v=createTypedArray("float32",Tt),this.pv=createTypedArray("float32",Tt),ut=0;ut<Tt;ut+=1)this.v[ut]=initFrame,this.pv[ut]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Tt)},this.addEffect=addEffect}var PropertyFactory=function(){function it(et,ot,ut,ct,dt){ot.sid&&(ot=et.globalData.slotManager.getProp(ot));var ft;if(!ot.k.length)ft=new ValueProperty(et,ot,ct,dt);else if(typeof ot.k[0]=="number")ft=new MultiDimensionalProperty(et,ot,ct,dt);else switch(ut){case 0:ft=new KeyframedValueProperty(et,ot,ct,dt);break;case 1:ft=new KeyframedMultidimensionalProperty(et,ot,ct,dt);break}return ft.effectsSequence.length&&dt.addDynamicProperty(ft),ft}var g={getProp:it};return g}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&(this.dynamicProperties.push(g),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var g,et=this.dynamicProperties.length;for(g=0;g<et;g+=1)this.dynamicProperties[g].getValue(),this.dynamicProperties[g]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(g){this.container=g,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function it(){return createTypedArray("float32",2)}return poolFactory(8,it)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(it,g){this.c=it,this.setLength(g);for(var et=0;et<g;)this.v[et]=pointPool.newElement(),this.o[et]=pointPool.newElement(),this.i[et]=pointPool.newElement(),et+=1},ShapePath.prototype.setLength=function(it){for(;this._maxLength<it;)this.doubleArrayLength();this._length=it},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(it,g,et,ot,ut){var ct;switch(this._length=Math.max(this._length,ot+1),this._length>=this._maxLength&&this.doubleArrayLength(),et){case"v":ct=this.v;break;case"i":ct=this.i;break;case"o":ct=this.o;break;default:ct=[];break}(!ct[ot]||ct[ot]&&!ut)&&(ct[ot]=pointPool.newElement()),ct[ot][0]=it,ct[ot][1]=g},ShapePath.prototype.setTripleAt=function(it,g,et,ot,ut,ct,dt,ft){this.setXYAt(it,g,"v",dt,ft),this.setXYAt(et,ot,"o",dt,ft),this.setXYAt(ut,ct,"i",dt,ft)},ShapePath.prototype.reverse=function(){var it=new ShapePath;it.setPathData(this.c,this._length);var g=this.v,et=this.o,ot=this.i,ut=0;this.c&&(it.setTripleAt(g[0][0],g[0][1],ot[0][0],ot[0][1],et[0][0],et[0][1],0,!1),ut=1);var ct=this._length-1,dt=this._length,ft;for(ft=ut;ft<dt;ft+=1)it.setTripleAt(g[ct][0],g[ct][1],ot[ct][0],ot[ct][1],et[ct][0],et[ct][1],ft,!1),ct-=1;return it},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function it(){return new ShapePath}function g(ut){var ct=ut._length,dt;for(dt=0;dt<ct;dt+=1)pointPool.release(ut.v[dt]),pointPool.release(ut.i[dt]),pointPool.release(ut.o[dt]),ut.v[dt]=null,ut.i[dt]=null,ut.o[dt]=null;ut._length=0,ut.c=!1}function et(ut){var ct=ot.newElement(),dt,ft=ut._length===void 0?ut.v.length:ut._length;for(ct.setLength(ft),ct.c=ut.c,dt=0;dt<ft;dt+=1)ct.setTripleAt(ut.v[dt][0],ut.v[dt][1],ut.o[dt][0],ut.o[dt][1],ut.i[dt][0],ut.i[dt][1],dt);return ct}var ot=poolFactory(4,it,g);return ot.clone=et,ot}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(it){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=it,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var it;for(it=0;it<this._length;it+=1)shapePool.release(this.shapes[it]);this._length=0};var shapeCollectionPool=function(){var it={newShapeCollection:ut,release:ct},g=0,et=4,ot=createSizedArray(et);function ut(){var dt;return g?(g-=1,dt=ot[g]):dt=new ShapeCollection,dt}function ct(dt){var ft,St=dt._length;for(ft=0;ft<St;ft+=1)shapePool.release(dt.shapes[ft]);dt._length=0,g===et&&(ot=pooling.double(ot),et*=2),ot[g]=dt,g+=1}return it}(),ShapePropertyFactory=function(){var it=-999999;function g(Ut,Kt,Yt){var er=Yt.lastIndex,ar,ir,lr,cr,vr,xr,yr,Sr,kr,Pr=this.keyframes;if(Ut<Pr[0].t-this.offsetTime)ar=Pr[0].s[0],lr=!0,er=0;else if(Ut>=Pr[Pr.length-1].t-this.offsetTime)ar=Pr[Pr.length-1].s?Pr[Pr.length-1].s[0]:Pr[Pr.length-2].e[0],lr=!0;else{for(var Or=er,hr=Pr.length-1,Tr=!0,mr,Er,Dr;Tr&&(mr=Pr[Or],Er=Pr[Or+1],!(Er.t-this.offsetTime>Ut));)Or<hr-1?Or+=1:Tr=!1;if(Dr=this.keyframesMetadata[Or]||{},lr=mr.h===1,er=Or,!lr){if(Ut>=Er.t-this.offsetTime)Sr=1;else if(Ut<mr.t-this.offsetTime)Sr=0;else{var Cr;Dr.__fnct?Cr=Dr.__fnct:(Cr=BezierFactory.getBezierEasing(mr.o.x,mr.o.y,mr.i.x,mr.i.y).get,Dr.__fnct=Cr),Sr=Cr((Ut-(mr.t-this.offsetTime))/(Er.t-this.offsetTime-(mr.t-this.offsetTime)))}ir=Er.s?Er.s[0]:mr.e[0]}ar=mr.s[0]}for(xr=Kt._length,yr=ar.i[0].length,Yt.lastIndex=er,cr=0;cr<xr;cr+=1)for(vr=0;vr<yr;vr+=1)kr=lr?ar.i[cr][vr]:ar.i[cr][vr]+(ir.i[cr][vr]-ar.i[cr][vr])*Sr,Kt.i[cr][vr]=kr,kr=lr?ar.o[cr][vr]:ar.o[cr][vr]+(ir.o[cr][vr]-ar.o[cr][vr])*Sr,Kt.o[cr][vr]=kr,kr=lr?ar.v[cr][vr]:ar.v[cr][vr]+(ir.v[cr][vr]-ar.v[cr][vr])*Sr,Kt.v[cr][vr]=kr}function et(){var Ut=this.comp.renderedFrame-this.offsetTime,Kt=this.keyframes[0].t-this.offsetTime,Yt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,er=this._caching.lastFrame;return er!==it&&(er<Kt&&Ut<Kt||er>Yt&&Ut>Yt)||(this._caching.lastIndex=er<Ut?this._caching.lastIndex:0,this.interpolateShape(Ut,this.pv,this._caching)),this._caching.lastFrame=Ut,this.pv}function ot(){this.paths=this.localShapeCollection}function ut(Ut,Kt){if(Ut._length!==Kt._length||Ut.c!==Kt.c)return!1;var Yt,er=Ut._length;for(Yt=0;Yt<er;Yt+=1)if(Ut.v[Yt][0]!==Kt.v[Yt][0]||Ut.v[Yt][1]!==Kt.v[Yt][1]||Ut.o[Yt][0]!==Kt.o[Yt][0]||Ut.o[Yt][1]!==Kt.o[Yt][1]||Ut.i[Yt][0]!==Kt.i[Yt][0]||Ut.i[Yt][1]!==Kt.i[Yt][1])return!1;return!0}function ct(Ut){ut(this.v,Ut)||(this.v=shapePool.clone(Ut),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function dt(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Ut;this.kf?Ut=this.pv:this.data.ks?Ut=this.data.ks.k:Ut=this.data.pt.k;var Kt,Yt=this.effectsSequence.length;for(Kt=0;Kt<Yt;Kt+=1)Ut=this.effectsSequence[Kt](Ut);this.setVValue(Ut),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function ft(Ut,Kt,Yt){this.propType="shape",this.comp=Ut.comp,this.container=Ut,this.elem=Ut,this.data=Kt,this.k=!1,this.kf=!1,this._mdf=!1;var er=Yt===3?Kt.pt.k:Kt.ks.k;this.v=shapePool.clone(er),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=ot,this.effectsSequence=[]}function St(Ut){this.effectsSequence.push(Ut),this.container.addDynamicProperty(this)}ft.prototype.interpolateShape=g,ft.prototype.getValue=dt,ft.prototype.setVValue=ct,ft.prototype.addEffect=St;function kt(Ut,Kt,Yt){this.propType="shape",this.comp=Ut.comp,this.elem=Ut,this.container=Ut,this.offsetTime=Ut.data.st,this.keyframes=Yt===3?Kt.pt.k:Kt.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var er=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,er),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=it,this.reset=ot,this._caching={lastFrame:it,lastIndex:0},this.effectsSequence=[et.bind(this)]}kt.prototype.getValue=dt,kt.prototype.interpolateShape=g,kt.prototype.setVValue=ct,kt.prototype.addEffect=St;var Tt=function(){var Ut=roundCorner;function Kt(Yt,er){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=er.d,this.elem=Yt,this.comp=Yt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Yt),this.p=PropertyFactory.getProp(Yt,er.p,1,0,this),this.s=PropertyFactory.getProp(Yt,er.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Kt.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var er=this.p.v[0],ar=this.p.v[1],ir=this.s.v[0]/2,lr=this.s.v[1]/2,cr=this.d!==3,vr=this.v;vr.v[0][0]=er,vr.v[0][1]=ar-lr,vr.v[1][0]=cr?er+ir:er-ir,vr.v[1][1]=ar,vr.v[2][0]=er,vr.v[2][1]=ar+lr,vr.v[3][0]=cr?er-ir:er+ir,vr.v[3][1]=ar,vr.i[0][0]=cr?er-ir*Ut:er+ir*Ut,vr.i[0][1]=ar-lr,vr.i[1][0]=cr?er+ir:er-ir,vr.i[1][1]=ar-lr*Ut,vr.i[2][0]=cr?er+ir*Ut:er-ir*Ut,vr.i[2][1]=ar+lr,vr.i[3][0]=cr?er-ir:er+ir,vr.i[3][1]=ar+lr*Ut,vr.o[0][0]=cr?er+ir*Ut:er-ir*Ut,vr.o[0][1]=ar-lr,vr.o[1][0]=cr?er+ir:er-ir,vr.o[1][1]=ar+lr*Ut,vr.o[2][0]=cr?er-ir*Ut:er+ir*Ut,vr.o[2][1]=ar+lr,vr.o[3][0]=cr?er-ir:er+ir,vr.o[3][1]=ar-lr*Ut}},extendPrototype([DynamicPropertyContainer],Kt),Kt}(),Rt=function(){function Ut(Kt,Yt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Kt,this.comp=Kt.comp,this.data=Yt,this.frameId=-1,this.d=Yt.d,this.initDynamicPropertyContainer(Kt),Yt.sy===1?(this.ir=PropertyFactory.getProp(Kt,Yt.ir,0,0,this),this.is=PropertyFactory.getProp(Kt,Yt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Kt,Yt.pt,0,0,this),this.p=PropertyFactory.getProp(Kt,Yt.p,1,0,this),this.r=PropertyFactory.getProp(Kt,Yt.r,0,degToRads,this),this.or=PropertyFactory.getProp(Kt,Yt.or,0,0,this),this.os=PropertyFactory.getProp(Kt,Yt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Ut.prototype={reset:ot,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Yt=Math.floor(this.pt.v)*2,er=Math.PI*2/Yt,ar=!0,ir=this.or.v,lr=this.ir.v,cr=this.os.v,vr=this.is.v,xr=2*Math.PI*ir/(Yt*2),yr=2*Math.PI*lr/(Yt*2),Sr,kr,Pr,Or,hr=-Math.PI/2;hr+=this.r.v;var Tr=this.data.d===3?-1:1;for(this.v._length=0,Sr=0;Sr<Yt;Sr+=1){kr=ar?ir:lr,Pr=ar?cr:vr,Or=ar?xr:yr;var mr=kr*Math.cos(hr),Er=kr*Math.sin(hr),Dr=mr===0&&Er===0?0:Er/Math.sqrt(mr*mr+Er*Er),Cr=mr===0&&Er===0?0:-mr/Math.sqrt(mr*mr+Er*Er);mr+=+this.p.v[0],Er+=+this.p.v[1],this.v.setTripleAt(mr,Er,mr-Dr*Or*Pr*Tr,Er-Cr*Or*Pr*Tr,mr+Dr*Or*Pr*Tr,Er+Cr*Or*Pr*Tr,Sr,!0),ar=!ar,hr+=er*Tr}},convertPolygonToPath:function(){var Yt=Math.floor(this.pt.v),er=Math.PI*2/Yt,ar=this.or.v,ir=this.os.v,lr=2*Math.PI*ar/(Yt*4),cr,vr=-Math.PI*.5,xr=this.data.d===3?-1:1;for(vr+=this.r.v,this.v._length=0,cr=0;cr<Yt;cr+=1){var yr=ar*Math.cos(vr),Sr=ar*Math.sin(vr),kr=yr===0&&Sr===0?0:Sr/Math.sqrt(yr*yr+Sr*Sr),Pr=yr===0&&Sr===0?0:-yr/Math.sqrt(yr*yr+Sr*Sr);yr+=+this.p.v[0],Sr+=+this.p.v[1],this.v.setTripleAt(yr,Sr,yr-kr*lr*ir*xr,Sr-Pr*lr*ir*xr,yr+kr*lr*ir*xr,Sr+Pr*lr*ir*xr,cr,!0),vr+=er*xr}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Ut),Ut}(),Ft=function(){function Ut(Kt,Yt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Kt,this.comp=Kt.comp,this.frameId=-1,this.d=Yt.d,this.initDynamicPropertyContainer(Kt),this.p=PropertyFactory.getProp(Kt,Yt.p,1,0,this),this.s=PropertyFactory.getProp(Kt,Yt.s,1,0,this),this.r=PropertyFactory.getProp(Kt,Yt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Ut.prototype={convertRectToPath:function(){var Yt=this.p.v[0],er=this.p.v[1],ar=this.s.v[0]/2,ir=this.s.v[1]/2,lr=bmMin(ar,ir,this.r.v),cr=lr*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Yt+ar,er-ir+lr,Yt+ar,er-ir+lr,Yt+ar,er-ir+cr,0,!0),this.v.setTripleAt(Yt+ar,er+ir-lr,Yt+ar,er+ir-cr,Yt+ar,er+ir-lr,1,!0),lr!==0?(this.v.setTripleAt(Yt+ar-lr,er+ir,Yt+ar-lr,er+ir,Yt+ar-cr,er+ir,2,!0),this.v.setTripleAt(Yt-ar+lr,er+ir,Yt-ar+cr,er+ir,Yt-ar+lr,er+ir,3,!0),this.v.setTripleAt(Yt-ar,er+ir-lr,Yt-ar,er+ir-lr,Yt-ar,er+ir-cr,4,!0),this.v.setTripleAt(Yt-ar,er-ir+lr,Yt-ar,er-ir+cr,Yt-ar,er-ir+lr,5,!0),this.v.setTripleAt(Yt-ar+lr,er-ir,Yt-ar+lr,er-ir,Yt-ar+cr,er-ir,6,!0),this.v.setTripleAt(Yt+ar-lr,er-ir,Yt+ar-cr,er-ir,Yt+ar-lr,er-ir,7,!0)):(this.v.setTripleAt(Yt-ar,er+ir,Yt-ar+cr,er+ir,Yt-ar,er+ir,2),this.v.setTripleAt(Yt-ar,er-ir,Yt-ar,er-ir+cr,Yt-ar,er-ir,3))):(this.v.setTripleAt(Yt+ar,er-ir+lr,Yt+ar,er-ir+cr,Yt+ar,er-ir+lr,0,!0),lr!==0?(this.v.setTripleAt(Yt+ar-lr,er-ir,Yt+ar-lr,er-ir,Yt+ar-cr,er-ir,1,!0),this.v.setTripleAt(Yt-ar+lr,er-ir,Yt-ar+cr,er-ir,Yt-ar+lr,er-ir,2,!0),this.v.setTripleAt(Yt-ar,er-ir+lr,Yt-ar,er-ir+lr,Yt-ar,er-ir+cr,3,!0),this.v.setTripleAt(Yt-ar,er+ir-lr,Yt-ar,er+ir-cr,Yt-ar,er+ir-lr,4,!0),this.v.setTripleAt(Yt-ar+lr,er+ir,Yt-ar+lr,er+ir,Yt-ar+cr,er+ir,5,!0),this.v.setTripleAt(Yt+ar-lr,er+ir,Yt+ar-cr,er+ir,Yt+ar-lr,er+ir,6,!0),this.v.setTripleAt(Yt+ar,er+ir-lr,Yt+ar,er+ir-lr,Yt+ar,er+ir-cr,7,!0)):(this.v.setTripleAt(Yt-ar,er-ir,Yt-ar+cr,er-ir,Yt-ar,er-ir,1,!0),this.v.setTripleAt(Yt-ar,er+ir,Yt-ar,er+ir-cr,Yt-ar,er+ir,2,!0),this.v.setTripleAt(Yt+ar,er+ir,Yt+ar-cr,er+ir,Yt+ar,er+ir,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:ot},extendPrototype([DynamicPropertyContainer],Ut),Ut}();function jt(Ut,Kt,Yt){var er;if(Yt===3||Yt===4){var ar=Yt===3?Kt.pt:Kt.ks,ir=ar.k;ir.length?er=new kt(Ut,Kt,Yt):er=new ft(Ut,Kt,Yt)}else Yt===5?er=new Ft(Ut,Kt):Yt===6?er=new Tt(Ut,Kt):Yt===7&&(er=new Rt(Ut,Kt));return er.k&&Ut.addDynamicProperty(er),er}function Bt(){return ft}function zt(){return kt}var Ht={};return Ht.getShapeProp=jt,Ht.getConstructorFunction=Bt,Ht.getKeyframedConstructorFunction=zt,Ht}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var it=Math.cos,g=Math.sin,et=Math.tan,ot=Math.round;function ut(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ct(mr){if(mr===0)return this;var Er=it(mr),Dr=g(mr);return this._t(Er,-Dr,0,0,Dr,Er,0,0,0,0,1,0,0,0,0,1)}function dt(mr){if(mr===0)return this;var Er=it(mr),Dr=g(mr);return this._t(1,0,0,0,0,Er,-Dr,0,0,Dr,Er,0,0,0,0,1)}function ft(mr){if(mr===0)return this;var Er=it(mr),Dr=g(mr);return this._t(Er,0,Dr,0,0,1,0,0,-Dr,0,Er,0,0,0,0,1)}function St(mr){if(mr===0)return this;var Er=it(mr),Dr=g(mr);return this._t(Er,-Dr,0,0,Dr,Er,0,0,0,0,1,0,0,0,0,1)}function kt(mr,Er){return this._t(1,Er,mr,1,0,0)}function Tt(mr,Er){return this.shear(et(mr),et(Er))}function Rt(mr,Er){var Dr=it(Er),Cr=g(Er);return this._t(Dr,Cr,0,0,-Cr,Dr,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,et(mr),1,0,0,0,0,1,0,0,0,0,1)._t(Dr,-Cr,0,0,Cr,Dr,0,0,0,0,1,0,0,0,0,1)}function Ft(mr,Er,Dr){return!Dr&&Dr!==0&&(Dr=1),mr===1&&Er===1&&Dr===1?this:this._t(mr,0,0,0,0,Er,0,0,0,0,Dr,0,0,0,0,1)}function jt(mr,Er,Dr,Cr,Lr,qr,sn,an,tn,ln,yn,pn,En,On,Xn,Un){return this.props[0]=mr,this.props[1]=Er,this.props[2]=Dr,this.props[3]=Cr,this.props[4]=Lr,this.props[5]=qr,this.props[6]=sn,this.props[7]=an,this.props[8]=tn,this.props[9]=ln,this.props[10]=yn,this.props[11]=pn,this.props[12]=En,this.props[13]=On,this.props[14]=Xn,this.props[15]=Un,this}function Bt(mr,Er,Dr){return Dr=Dr||0,mr!==0||Er!==0||Dr!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,mr,Er,Dr,1):this}function zt(mr,Er,Dr,Cr,Lr,qr,sn,an,tn,ln,yn,pn,En,On,Xn,Un){var Ln=this.props;if(mr===1&&Er===0&&Dr===0&&Cr===0&&Lr===0&&qr===1&&sn===0&&an===0&&tn===0&&ln===0&&yn===1&&pn===0)return Ln[12]=Ln[12]*mr+Ln[15]*En,Ln[13]=Ln[13]*qr+Ln[15]*On,Ln[14]=Ln[14]*yn+Ln[15]*Xn,Ln[15]*=Un,this._identityCalculated=!1,this;var ns=Ln[0],gs=Ln[1],Es=Ln[2],wn=Ln[3],mn=Ln[4],Dn=Ln[5],Tn=Ln[6],An=Ln[7],$n=Ln[8],qn=Ln[9],Bn=Ln[10],$t=Ln[11],Zt=Ln[12],or=Ln[13],ur=Ln[14],dr=Ln[15];return Ln[0]=ns*mr+gs*Lr+Es*tn+wn*En,Ln[1]=ns*Er+gs*qr+Es*ln+wn*On,Ln[2]=ns*Dr+gs*sn+Es*yn+wn*Xn,Ln[3]=ns*Cr+gs*an+Es*pn+wn*Un,Ln[4]=mn*mr+Dn*Lr+Tn*tn+An*En,Ln[5]=mn*Er+Dn*qr+Tn*ln+An*On,Ln[6]=mn*Dr+Dn*sn+Tn*yn+An*Xn,Ln[7]=mn*Cr+Dn*an+Tn*pn+An*Un,Ln[8]=$n*mr+qn*Lr+Bn*tn+$t*En,Ln[9]=$n*Er+qn*qr+Bn*ln+$t*On,Ln[10]=$n*Dr+qn*sn+Bn*yn+$t*Xn,Ln[11]=$n*Cr+qn*an+Bn*pn+$t*Un,Ln[12]=Zt*mr+or*Lr+ur*tn+dr*En,Ln[13]=Zt*Er+or*qr+ur*ln+dr*On,Ln[14]=Zt*Dr+or*sn+ur*yn+dr*Xn,Ln[15]=Zt*Cr+or*an+ur*pn+dr*Un,this._identityCalculated=!1,this}function Ht(mr){var Er=mr.props;return this.transform(Er[0],Er[1],Er[2],Er[3],Er[4],Er[5],Er[6],Er[7],Er[8],Er[9],Er[10],Er[11],Er[12],Er[13],Er[14],Er[15])}function Ut(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Kt(mr){for(var Er=0;Er<16;){if(mr.props[Er]!==this.props[Er])return!1;Er+=1}return!0}function Yt(mr){var Er;for(Er=0;Er<16;Er+=1)mr.props[Er]=this.props[Er];return mr}function er(mr){var Er;for(Er=0;Er<16;Er+=1)this.props[Er]=mr[Er]}function ar(mr,Er,Dr){return{x:mr*this.props[0]+Er*this.props[4]+Dr*this.props[8]+this.props[12],y:mr*this.props[1]+Er*this.props[5]+Dr*this.props[9]+this.props[13],z:mr*this.props[2]+Er*this.props[6]+Dr*this.props[10]+this.props[14]}}function ir(mr,Er,Dr){return mr*this.props[0]+Er*this.props[4]+Dr*this.props[8]+this.props[12]}function lr(mr,Er,Dr){return mr*this.props[1]+Er*this.props[5]+Dr*this.props[9]+this.props[13]}function cr(mr,Er,Dr){return mr*this.props[2]+Er*this.props[6]+Dr*this.props[10]+this.props[14]}function vr(){var mr=this.props[0]*this.props[5]-this.props[1]*this.props[4],Er=this.props[5]/mr,Dr=-this.props[1]/mr,Cr=-this.props[4]/mr,Lr=this.props[0]/mr,qr=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/mr,sn=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/mr,an=new Matrix;return an.props[0]=Er,an.props[1]=Dr,an.props[4]=Cr,an.props[5]=Lr,an.props[12]=qr,an.props[13]=sn,an}function xr(mr){var Er=this.getInverseMatrix();return Er.applyToPointArray(mr[0],mr[1],mr[2]||0)}function yr(mr){var Er,Dr=mr.length,Cr=[];for(Er=0;Er<Dr;Er+=1)Cr[Er]=xr(mr[Er]);return Cr}function Sr(mr,Er,Dr){var Cr=createTypedArray("float32",6);if(this.isIdentity())Cr[0]=mr[0],Cr[1]=mr[1],Cr[2]=Er[0],Cr[3]=Er[1],Cr[4]=Dr[0],Cr[5]=Dr[1];else{var Lr=this.props[0],qr=this.props[1],sn=this.props[4],an=this.props[5],tn=this.props[12],ln=this.props[13];Cr[0]=mr[0]*Lr+mr[1]*sn+tn,Cr[1]=mr[0]*qr+mr[1]*an+ln,Cr[2]=Er[0]*Lr+Er[1]*sn+tn,Cr[3]=Er[0]*qr+Er[1]*an+ln,Cr[4]=Dr[0]*Lr+Dr[1]*sn+tn,Cr[5]=Dr[0]*qr+Dr[1]*an+ln}return Cr}function kr(mr,Er,Dr){var Cr;return this.isIdentity()?Cr=[mr,Er,Dr]:Cr=[mr*this.props[0]+Er*this.props[4]+Dr*this.props[8]+this.props[12],mr*this.props[1]+Er*this.props[5]+Dr*this.props[9]+this.props[13],mr*this.props[2]+Er*this.props[6]+Dr*this.props[10]+this.props[14]],Cr}function Pr(mr,Er){if(this.isIdentity())return mr+","+Er;var Dr=this.props;return Math.round((mr*Dr[0]+Er*Dr[4]+Dr[12])*100)/100+","+Math.round((mr*Dr[1]+Er*Dr[5]+Dr[13])*100)/100}function Or(){for(var mr=0,Er=this.props,Dr="matrix3d(",Cr=1e4;mr<16;)Dr+=ot(Er[mr]*Cr)/Cr,Dr+=mr===15?")":",",mr+=1;return Dr}function hr(mr){var Er=1e4;return mr<1e-6&&mr>0||mr>-1e-6&&mr<0?ot(mr*Er)/Er:mr}function Tr(){var mr=this.props,Er=hr(mr[0]),Dr=hr(mr[1]),Cr=hr(mr[4]),Lr=hr(mr[5]),qr=hr(mr[12]),sn=hr(mr[13]);return"matrix("+Er+","+Dr+","+Cr+","+Lr+","+qr+","+sn+")"}return function(){this.reset=ut,this.rotate=ct,this.rotateX=dt,this.rotateY=ft,this.rotateZ=St,this.skew=Tt,this.skewFromAxis=Rt,this.shear=kt,this.scale=Ft,this.setTransform=jt,this.translate=Bt,this.transform=zt,this.multiply=Ht,this.applyToPoint=ar,this.applyToX=ir,this.applyToY=lr,this.applyToZ=cr,this.applyToPointArray=kr,this.applyToTriplePoints=Sr,this.applyToPointStringified=Pr,this.toCSS=Or,this.to2dCSS=Tr,this.clone=Yt,this.cloneFromProps=er,this.equals=Kt,this.inversePoints=yr,this.inversePoint=xr,this.getInverseMatrix=vr,this._t=this.transform,this.isIdentity=Ut,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(et){return typeof et}:_typeof$3=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$3(it)}var lottie={};function setLocation(it){setLocationHref(it)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(it){setSubframeEnabled(it)}function setPrefix(it){setIdPrefix(it)}function loadAnimation(it){return animationManager.loadAnimation(it)}function setQuality(it){if(typeof it=="string")switch(it){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(it)&&it>1&&setDefaultCurveSegments(it)}function inBrowser(){return typeof navigator<"u"}function installPlugin(it,g){it==="expressions"&&setExpressionsPlugin(g)}function getFactory(it){switch(it){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(it){for(var g=queryString.split("&"),et=0;et<g.length;et+=1){var ot=g[et].split("=");if(decodeURIComponent(ot[0])==it)return decodeURIComponent(ot[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(it){}var ShapeModifiers=function(){var it={},g={};it.registerModifier=et,it.getModifier=ot;function et(ut,ct){g[ut]||(g[ut]=ct)}function ot(ut,ct,dt){return new g[ut](ct,dt)}return it}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(it){if(!this.closed){it.sh.container.addDynamicProperty(it.sh);var g={shape:it.sh,data:it,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(g),this.addShapeToModifier(g),this._isAnimated&&it.setAsAnimated()}},ShapeModifier.prototype.init=function(it,g){this.shapes=[],this.elem=it,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(it,g){this.s=PropertyFactory.getProp(it,g.s,0,.01,this),this.e=PropertyFactory.getProp(it,g.e,0,.01,this),this.o=PropertyFactory.getProp(it,g.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=g.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(it){it.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(it,g,et,ot,ut){var ct=[];g<=1?ct.push({s:it,e:g}):it>=1?ct.push({s:it-1,e:g-1}):(ct.push({s:it,e:1}),ct.push({s:0,e:g-1}));var dt=[],ft,St=ct.length,kt;for(ft=0;ft<St;ft+=1)if(kt=ct[ft],!(kt.e*ut<ot||kt.s*ut>ot+et)){var Tt,Rt;kt.s*ut<=ot?Tt=0:Tt=(kt.s*ut-ot)/et,kt.e*ut>=ot+et?Rt=1:Rt=(kt.e*ut-ot)/et,dt.push([Tt,Rt])}return dt.length||dt.push([0,0]),dt},TrimModifier.prototype.releasePathsData=function(it){var g,et=it.length;for(g=0;g<et;g+=1)segmentsLengthPool.release(it[g]);return it.length=0,it},TrimModifier.prototype.processShapes=function(it){var g,et;if(this._mdf||it){var ot=this.o.v%360/360;if(ot<0&&(ot+=1),this.s.v>1?g=1+ot:this.s.v<0?g=0+ot:g=this.s.v+ot,this.e.v>1?et=1+ot:this.e.v<0?et=0+ot:et=this.e.v+ot,g>et){var ut=g;g=et,et=ut}g=Math.round(g*1e4)*1e-4,et=Math.round(et*1e4)*1e-4,this.sValue=g,this.eValue=et}else g=this.sValue,et=this.eValue;var ct,dt,ft=this.shapes.length,St,kt,Tt,Rt,Ft,jt=0;if(et===g)for(dt=0;dt<ft;dt+=1)this.shapes[dt].localShapeCollection.releaseShapes(),this.shapes[dt].shape._mdf=!0,this.shapes[dt].shape.paths=this.shapes[dt].localShapeCollection,this._mdf&&(this.shapes[dt].pathsData.length=0);else if(et===1&&g===0||et===0&&g===1){if(this._mdf)for(dt=0;dt<ft;dt+=1)this.shapes[dt].pathsData.length=0,this.shapes[dt].shape._mdf=!0}else{var Bt=[],zt,Ht;for(dt=0;dt<ft;dt+=1)if(zt=this.shapes[dt],!zt.shape._mdf&&!this._mdf&&!it&&this.m!==2)zt.shape.paths=zt.localShapeCollection;else{if(ct=zt.shape.paths,kt=ct._length,Ft=0,!zt.shape._mdf&&zt.pathsData.length)Ft=zt.totalShapeLength;else{for(Tt=this.releasePathsData(zt.pathsData),St=0;St<kt;St+=1)Rt=bez.getSegmentsLength(ct.shapes[St]),Tt.push(Rt),Ft+=Rt.totalLength;zt.totalShapeLength=Ft,zt.pathsData=Tt}jt+=Ft,zt.shape._mdf=!0}var Ut=g,Kt=et,Yt=0,er;for(dt=ft-1;dt>=0;dt-=1)if(zt=this.shapes[dt],zt.shape._mdf){for(Ht=zt.localShapeCollection,Ht.releaseShapes(),this.m===2&&ft>1?(er=this.calculateShapeEdges(g,et,zt.totalShapeLength,Yt,jt),Yt+=zt.totalShapeLength):er=[[Ut,Kt]],kt=er.length,St=0;St<kt;St+=1){Ut=er[St][0],Kt=er[St][1],Bt.length=0,Kt<=1?Bt.push({s:zt.totalShapeLength*Ut,e:zt.totalShapeLength*Kt}):Ut>=1?Bt.push({s:zt.totalShapeLength*(Ut-1),e:zt.totalShapeLength*(Kt-1)}):(Bt.push({s:zt.totalShapeLength*Ut,e:zt.totalShapeLength}),Bt.push({s:0,e:zt.totalShapeLength*(Kt-1)}));var ar=this.addShapes(zt,Bt[0]);if(Bt[0].s!==Bt[0].e){if(Bt.length>1){var ir=zt.shape.paths.shapes[zt.shape.paths._length-1];if(ir.c){var lr=ar.pop();this.addPaths(ar,Ht),ar=this.addShapes(zt,Bt[1],lr)}else this.addPaths(ar,Ht),ar=this.addShapes(zt,Bt[1])}this.addPaths(ar,Ht)}}zt.shape.paths=Ht}}},TrimModifier.prototype.addPaths=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g.addShape(it[et])},TrimModifier.prototype.addSegment=function(it,g,et,ot,ut,ct,dt){ut.setXYAt(g[0],g[1],"o",ct),ut.setXYAt(et[0],et[1],"i",ct+1),dt&&ut.setXYAt(it[0],it[1],"v",ct),ut.setXYAt(ot[0],ot[1],"v",ct+1)},TrimModifier.prototype.addSegmentFromArray=function(it,g,et,ot){g.setXYAt(it[1],it[5],"o",et),g.setXYAt(it[2],it[6],"i",et+1),ot&&g.setXYAt(it[0],it[4],"v",et),g.setXYAt(it[3],it[7],"v",et+1)},TrimModifier.prototype.addShapes=function(it,g,et){var ot=it.pathsData,ut=it.shape.paths.shapes,ct,dt=it.shape.paths._length,ft,St,kt=0,Tt,Rt,Ft,jt,Bt=[],zt,Ht=!0;for(et?(Rt=et._length,zt=et._length):(et=shapePool.newElement(),Rt=0,zt=0),Bt.push(et),ct=0;ct<dt;ct+=1){for(Ft=ot[ct].lengths,et.c=ut[ct].c,St=ut[ct].c?Ft.length:Ft.length+1,ft=1;ft<St;ft+=1)if(Tt=Ft[ft-1],kt+Tt.addedLength<g.s)kt+=Tt.addedLength,et.c=!1;else if(kt>g.e){et.c=!1;break}else g.s<=kt&&g.e>=kt+Tt.addedLength?(this.addSegment(ut[ct].v[ft-1],ut[ct].o[ft-1],ut[ct].i[ft],ut[ct].v[ft],et,Rt,Ht),Ht=!1):(jt=bez.getNewSegment(ut[ct].v[ft-1],ut[ct].v[ft],ut[ct].o[ft-1],ut[ct].i[ft],(g.s-kt)/Tt.addedLength,(g.e-kt)/Tt.addedLength,Ft[ft-1]),this.addSegmentFromArray(jt,et,Rt,Ht),Ht=!1,et.c=!1),kt+=Tt.addedLength,Rt+=1;if(ut[ct].c&&Ft.length){if(Tt=Ft[ft-1],kt<=g.e){var Ut=Ft[ft-1].addedLength;g.s<=kt&&g.e>=kt+Ut?(this.addSegment(ut[ct].v[ft-1],ut[ct].o[ft-1],ut[ct].i[0],ut[ct].v[0],et,Rt,Ht),Ht=!1):(jt=bez.getNewSegment(ut[ct].v[ft-1],ut[ct].v[0],ut[ct].o[ft-1],ut[ct].i[0],(g.s-kt)/Ut,(g.e-kt)/Ut,Ft[ft-1]),this.addSegmentFromArray(jt,et,Rt,Ht),Ht=!1,et.c=!1)}else et.c=!1;kt+=Tt.addedLength,Rt+=1}if(et._length&&(et.setXYAt(et.v[zt][0],et.v[zt][1],"i",zt),et.setXYAt(et.v[et._length-1][0],et.v[et._length-1][1],"o",et._length-1)),kt>g.e)break;ct<dt-1&&(et=shapePool.newElement(),Ht=!0,Bt.push(et),Rt=0)}return Bt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(it,g){var et=g/100,ot=[0,0],ut=it._length,ct=0;for(ct=0;ct<ut;ct+=1)ot[0]+=it.v[ct][0],ot[1]+=it.v[ct][1];ot[0]/=ut,ot[1]/=ut;var dt=shapePool.newElement();dt.c=it.c;var ft,St,kt,Tt,Rt,Ft;for(ct=0;ct<ut;ct+=1)ft=it.v[ct][0]+(ot[0]-it.v[ct][0])*et,St=it.v[ct][1]+(ot[1]-it.v[ct][1])*et,kt=it.o[ct][0]+(ot[0]-it.o[ct][0])*-et,Tt=it.o[ct][1]+(ot[1]-it.o[ct][1])*-et,Rt=it.i[ct][0]+(ot[0]-it.i[ct][0])*-et,Ft=it.i[ct][1]+(ot[1]-it.i[ct][1])*-et,dt.setTripleAt(ft,St,kt,Tt,Rt,Ft,ct);return dt},PuckerAndBloatModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ut,ct,dt=this.amount.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ct=ft.shape.paths._length,ut=0;ut<ct;ut+=1)St.addShape(this.processPath(g[ut],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var it=[0,0];function g(St){var kt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||kt,this.a&&St.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&St.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&St.skewFromAxis(-this.sk.v,this.sa.v),this.r?St.rotate(-this.r.v):St.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?St.translate(this.px.v,this.py.v,-this.pz.v):St.translate(this.px.v,this.py.v,0):St.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function et(St){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||St){var kt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Tt,Rt;if(kt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Tt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/kt,0),Rt=this.p.getValueAtTime(this.p.keyframes[0].t/kt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Tt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/kt,0),Rt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/kt,0)):(Tt=this.p.pv,Rt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/kt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Tt=[],Rt=[];var Ft=this.px,jt=this.py;Ft._caching.lastFrame+Ft.offsetTime<=Ft.keyframes[0].t?(Tt[0]=Ft.getValueAtTime((Ft.keyframes[0].t+.01)/kt,0),Tt[1]=jt.getValueAtTime((jt.keyframes[0].t+.01)/kt,0),Rt[0]=Ft.getValueAtTime(Ft.keyframes[0].t/kt,0),Rt[1]=jt.getValueAtTime(jt.keyframes[0].t/kt,0)):Ft._caching.lastFrame+Ft.offsetTime>=Ft.keyframes[Ft.keyframes.length-1].t?(Tt[0]=Ft.getValueAtTime(Ft.keyframes[Ft.keyframes.length-1].t/kt,0),Tt[1]=jt.getValueAtTime(jt.keyframes[jt.keyframes.length-1].t/kt,0),Rt[0]=Ft.getValueAtTime((Ft.keyframes[Ft.keyframes.length-1].t-.01)/kt,0),Rt[1]=jt.getValueAtTime((jt.keyframes[jt.keyframes.length-1].t-.01)/kt,0)):(Tt=[Ft.pv,jt.pv],Rt[0]=Ft.getValueAtTime((Ft._caching.lastFrame+Ft.offsetTime-.01)/kt,Ft.offsetTime),Rt[1]=jt.getValueAtTime((jt._caching.lastFrame+jt.offsetTime-.01)/kt,jt.offsetTime))}else Rt=it,Tt=Rt;this.v.rotate(-Math.atan2(Tt[1]-Rt[1],Tt[0]-Rt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function ot(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function ut(){}function ct(St){this._addDynamicProperty(St),this.elem.addDynamicProperty(St),this._isDirty=!0}function dt(St,kt,Tt){if(this.elem=St,this.frameId=-1,this.propType="transform",this.data=kt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Tt||St),kt.p&&kt.p.s?(this.px=PropertyFactory.getProp(St,kt.p.x,0,0,this),this.py=PropertyFactory.getProp(St,kt.p.y,0,0,this),kt.p.z&&(this.pz=PropertyFactory.getProp(St,kt.p.z,0,0,this))):this.p=PropertyFactory.getProp(St,kt.p||{k:[0,0,0]},1,0,this),kt.rx){if(this.rx=PropertyFactory.getProp(St,kt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(St,kt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(St,kt.rz,0,degToRads,this),kt.or.k[0].ti){var Rt,Ft=kt.or.k.length;for(Rt=0;Rt<Ft;Rt+=1)kt.or.k[Rt].to=null,kt.or.k[Rt].ti=null}this.or=PropertyFactory.getProp(St,kt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(St,kt.r||{k:0},0,degToRads,this);kt.sk&&(this.sk=PropertyFactory.getProp(St,kt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(St,kt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(St,kt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(St,kt.s||{k:[100,100,100]},1,.01,this),kt.o?this.o=PropertyFactory.getProp(St,kt.o,0,.01,St):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}dt.prototype={applyToMatrix:g,getValue:et,precalculateMatrix:ot,autoOrient:ut},extendPrototype([DynamicPropertyContainer],dt),dt.prototype.addDynamicProperty=ct,dt.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function ft(St,kt,Tt){return new dt(St,kt,Tt)}return{getTransformProperty:ft}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(it,g.c,0,null,this),this.o=PropertyFactory.getProp(it,g.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(it,g.tr,this),this.so=PropertyFactory.getProp(it,g.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(it,g.tr.eo,0,.01,this),this.data=g,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(it,g,et,ot,ut,ct){var dt=ct?-1:1,ft=ot.s.v[0]+(1-ot.s.v[0])*(1-ut),St=ot.s.v[1]+(1-ot.s.v[1])*(1-ut);it.translate(ot.p.v[0]*dt*ut,ot.p.v[1]*dt*ut,ot.p.v[2]),g.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),g.rotate(-ot.r.v*dt*ut),g.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2]),et.translate(-ot.a.v[0],-ot.a.v[1],ot.a.v[2]),et.scale(ct?1/ft:ft,ct?1/St:St),et.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])},RepeaterModifier.prototype.init=function(it,g,et,ot){for(this.elem=it,this.arr=g,this.pos=et,this.elemsData=ot,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(it),this.initModifierProperties(it,g[et]);et>0;)et-=1,this._elements.unshift(g[et]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g]._processed=!1,it[g].ty==="gr"&&this.resetElements(it[g].it)},RepeaterModifier.prototype.cloneElements=function(it){var g=JSON.parse(JSON.stringify(it));return this.resetElements(g),g},RepeaterModifier.prototype.changeGroupRender=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]._render=g,it[et].ty==="gr"&&this.changeGroupRender(it[et].it,g)},RepeaterModifier.prototype.processShapes=function(it){var g,et,ot,ut,ct,dt=!1;if(this._mdf||it){var ft=Math.ceil(this.c.v);if(this._groups.length<ft){for(;this._groups.length<ft;){var St={it:this.cloneElements(this._elements),ty:"gr"};St.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,St),this._groups.splice(0,0,St),this._currentCopies+=1}this.elem.reloadShapes(),dt=!0}ct=0;var kt;for(ot=0;ot<=this._groups.length-1;ot+=1){if(kt=ct<ft,this._groups[ot]._render=kt,this.changeGroupRender(this._groups[ot].it,kt),!kt){var Tt=this.elemsData[ot].it,Rt=Tt[Tt.length-1];Rt.transform.op.v!==0?(Rt.transform.op._mdf=!0,Rt.transform.op.v=0):Rt.transform.op._mdf=!1}ct+=1}this._currentCopies=ft;var Ft=this.o.v,jt=Ft%1,Bt=Ft>0?Math.floor(Ft):Math.ceil(Ft),zt=this.pMatrix.props,Ht=this.rMatrix.props,Ut=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Kt=0;if(Ft>0){for(;Kt<Bt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Kt+=1;jt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,jt,!1),Kt+=jt)}else if(Ft<0){for(;Kt>Bt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Kt-=1;jt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-jt,!0),Kt-=jt)}ot=this.data.m===1?0:this._currentCopies-1,ut=this.data.m===1?1:-1,ct=this._currentCopies;for(var Yt,er;ct;){if(g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,er=et.length,g[g.length-1].transform.mProps._mdf=!0,g[g.length-1].transform.op._mdf=!0,g[g.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(ot/(this._currentCopies-1)),Kt!==0){for((ot!==0&&ut===1||ot!==this._currentCopies-1&&ut===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Ht[0],Ht[1],Ht[2],Ht[3],Ht[4],Ht[5],Ht[6],Ht[7],Ht[8],Ht[9],Ht[10],Ht[11],Ht[12],Ht[13],Ht[14],Ht[15]),this.matrix.transform(Ut[0],Ut[1],Ut[2],Ut[3],Ut[4],Ut[5],Ut[6],Ut[7],Ut[8],Ut[9],Ut[10],Ut[11],Ut[12],Ut[13],Ut[14],Ut[15]),this.matrix.transform(zt[0],zt[1],zt[2],zt[3],zt[4],zt[5],zt[6],zt[7],zt[8],zt[9],zt[10],zt[11],zt[12],zt[13],zt[14],zt[15]),Yt=0;Yt<er;Yt+=1)et[Yt]=this.matrix.props[Yt];this.matrix.reset()}else for(this.matrix.reset(),Yt=0;Yt<er;Yt+=1)et[Yt]=this.matrix.props[Yt];Kt+=1,ct-=1,ot+=ut}}else for(ct=this._currentCopies,ot=0,ut=1;ct;)g=this.elemsData[ot].it,et=g[g.length-1].transform.mProps.v.props,g[g.length-1].transform.mProps._mdf=!1,g[g.length-1].transform.op._mdf=!1,ct-=1,ot+=ut;return dt},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(it,g.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(it,g){var et=shapePool.newElement();et.c=it.c;var ot,ut=it._length,ct,dt,ft,St,kt,Tt,Rt=0,Ft,jt,Bt,zt,Ht,Ut;for(ot=0;ot<ut;ot+=1)ct=it.v[ot],ft=it.o[ot],dt=it.i[ot],ct[0]===ft[0]&&ct[1]===ft[1]&&ct[0]===dt[0]&&ct[1]===dt[1]?(ot===0||ot===ut-1)&&!it.c?(et.setTripleAt(ct[0],ct[1],ft[0],ft[1],dt[0],dt[1],Rt),Rt+=1):(ot===0?St=it.v[ut-1]:St=it.v[ot-1],kt=Math.sqrt(Math.pow(ct[0]-St[0],2)+Math.pow(ct[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,Ht=ct[0]+(St[0]-ct[0])*Tt,Ft=Ht,Ut=ct[1]-(ct[1]-St[1])*Tt,jt=Ut,Bt=Ft-(Ft-ct[0])*roundCorner,zt=jt-(jt-ct[1])*roundCorner,et.setTripleAt(Ft,jt,Bt,zt,Ht,Ut,Rt),Rt+=1,ot===ut-1?St=it.v[0]:St=it.v[ot+1],kt=Math.sqrt(Math.pow(ct[0]-St[0],2)+Math.pow(ct[1]-St[1],2)),Tt=kt?Math.min(kt/2,g)/kt:0,Bt=ct[0]+(St[0]-ct[0])*Tt,Ft=Bt,zt=ct[1]+(St[1]-ct[1])*Tt,jt=zt,Ht=Ft-(Ft-ct[0])*roundCorner,Ut=jt-(jt-ct[1])*roundCorner,et.setTripleAt(Ft,jt,Bt,zt,Ht,Ut,Rt),Rt+=1):(et.setTripleAt(it.v[ot][0],it.v[ot][1],it.o[ot][0],it.o[ot][1],it.i[ot][0],it.i[ot][1],Rt),Rt+=1);return et},RoundCornersModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ut,ct,dt=this.rd.v;if(dt!==0){var ft,St;for(et=0;et<ot;et+=1){if(ft=this.shapes[et],St=ft.localShapeCollection,!(!ft.shape._mdf&&!this._mdf&&!it))for(St.releaseShapes(),ft.shape._mdf=!0,g=ft.shape.paths.shapes,ct=ft.shape.paths._length,ut=0;ut<ct;ut+=1)St.addShape(this.processPath(g[ut],dt));ft.shape.paths=ft.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(it,g){return Math.abs(it-g)*1e5<=Math.min(Math.abs(it),Math.abs(g))}function floatZero(it){return Math.abs(it)<=1e-5}function lerp(it,g,et){return it*(1-et)+g*et}function lerpPoint(it,g,et){return[lerp(it[0],g[0],et),lerp(it[1],g[1],et)]}function quadRoots(it,g,et){if(it===0)return[];var ot=g*g-4*it*et;if(ot<0)return[];var ut=-g/(2*it);if(ot===0)return[ut];var ct=Math.sqrt(ot)/(2*it);return[ut-ct,ut+ct]}function polynomialCoefficients(it,g,et,ot){return[-it+3*g-3*et+ot,3*it-6*g+3*et,-3*it+3*g,it]}function singlePoint(it){return new PolynomialBezier(it,it,it,it,!1)}function PolynomialBezier(it,g,et,ot,ut){ut&&pointEqual(it,g)&&(g=lerpPoint(it,ot,1/3)),ut&&pointEqual(et,ot)&&(et=lerpPoint(it,ot,2/3));var ct=polynomialCoefficients(it[0],g[0],et[0],ot[0]),dt=polynomialCoefficients(it[1],g[1],et[1],ot[1]);this.a=[ct[0],dt[0]],this.b=[ct[1],dt[1]],this.c=[ct[2],dt[2]],this.d=[ct[3],dt[3]],this.points=[it,g,et,ot]}PolynomialBezier.prototype.point=function(it){return[((this.a[0]*it+this.b[0])*it+this.c[0])*it+this.d[0],((this.a[1]*it+this.b[1])*it+this.c[1])*it+this.d[1]]},PolynomialBezier.prototype.derivative=function(it){return[(3*it*this.a[0]+2*this.b[0])*it+this.c[0],(3*it*this.a[1]+2*this.b[1])*it+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(it){var g=this.derivative(it);return Math.atan2(g[1],g[0])},PolynomialBezier.prototype.normalAngle=function(it){var g=this.derivative(it);return Math.atan2(g[0],g[1])},PolynomialBezier.prototype.inflectionPoints=function(){var it=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(it))return[];var g=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/it,et=g*g-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/it;if(et<0)return[];var ot=Math.sqrt(et);return floatZero(ot)?ot>0&&ot<1?[g]:[]:[g-ot,g+ot].filter(function(ut){return ut>0&&ut<1})},PolynomialBezier.prototype.split=function(it){if(it<=0)return[singlePoint(this.points[0]),this];if(it>=1)return[this,singlePoint(this.points[this.points.length-1])];var g=lerpPoint(this.points[0],this.points[1],it),et=lerpPoint(this.points[1],this.points[2],it),ot=lerpPoint(this.points[2],this.points[3],it),ut=lerpPoint(g,et,it),ct=lerpPoint(et,ot,it),dt=lerpPoint(ut,ct,it);return[new PolynomialBezier(this.points[0],g,ut,dt,!0),new PolynomialBezier(dt,ct,ot,this.points[3],!0)]};function extrema(it,g){var et=it.points[0][g],ot=it.points[it.points.length-1][g];if(et>ot){var ut=ot;ot=et,et=ut}for(var ct=quadRoots(3*it.a[g],2*it.b[g],it.c[g]),dt=0;dt<ct.length;dt+=1)if(ct[dt]>0&&ct[dt]<1){var ft=it.point(ct[dt])[g];ft<et?et=ft:ft>ot&&(ot=ft)}return{min:et,max:ot}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var it=this.bounds();return{left:it.x.min,right:it.x.max,top:it.y.min,bottom:it.y.max,width:it.x.max-it.x.min,height:it.y.max-it.y.min,cx:(it.x.max+it.x.min)/2,cy:(it.y.max+it.y.min)/2}};function intersectData(it,g,et){var ot=it.boundingBox();return{cx:ot.cx,cy:ot.cy,width:ot.width,height:ot.height,bez:it,t:(g+et)/2,t1:g,t2:et}}function splitData(it){var g=it.bez.split(.5);return[intersectData(g[0],it.t1,it.t),intersectData(g[1],it.t,it.t2)]}function boxIntersect(it,g){return Math.abs(it.cx-g.cx)*2<it.width+g.width&&Math.abs(it.cy-g.cy)*2<it.height+g.height}function intersectsImpl(it,g,et,ot,ut,ct){if(boxIntersect(it,g)){if(et>=ct||it.width<=ot&&it.height<=ot&&g.width<=ot&&g.height<=ot){ut.push([it.t,g.t]);return}var dt=splitData(it),ft=splitData(g);intersectsImpl(dt[0],ft[0],et+1,ot,ut,ct),intersectsImpl(dt[0],ft[1],et+1,ot,ut,ct),intersectsImpl(dt[1],ft[0],et+1,ot,ut,ct),intersectsImpl(dt[1],ft[1],et+1,ot,ut,ct)}}PolynomialBezier.prototype.intersections=function(it,g,et){g===void 0&&(g=2),et===void 0&&(et=7);var ot=[];return intersectsImpl(intersectData(this,0,1),intersectData(it,0,1),0,g,ot,et),ot},PolynomialBezier.shapeSegment=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[g],it.o[g],it.i[et],it.v[et],!0)},PolynomialBezier.shapeSegmentInverted=function(it,g){var et=(g+1)%it.length();return new PolynomialBezier(it.v[et],it.i[et],it.o[g],it.v[g],!0)};function crossProduct(it,g){return[it[1]*g[2]-it[2]*g[1],it[2]*g[0]-it[0]*g[2],it[0]*g[1]-it[1]*g[0]]}function lineIntersection(it,g,et,ot){var ut=[it[0],it[1],1],ct=[g[0],g[1],1],dt=[et[0],et[1],1],ft=[ot[0],ot[1],1],St=crossProduct(crossProduct(ut,ct),crossProduct(dt,ft));return floatZero(St[2])?null:[St[0]/St[2],St[1]/St[2]]}function polarOffset(it,g,et){return[it[0]+Math.cos(g)*et,it[1]-Math.sin(g)*et]}function pointDistance(it,g){return Math.hypot(it[0]-g[0],it[1]-g[1])}function pointEqual(it,g){return floatEqual(it[0],g[0])&&floatEqual(it[1],g[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(it,g.s,0,null,this),this.frequency=PropertyFactory.getProp(it,g.r,0,null,this),this.pointsType=PropertyFactory.getProp(it,g.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(it,g,et,ot,ut,ct,dt){var ft=et-Math.PI/2,St=et+Math.PI/2,kt=g[0]+Math.cos(et)*ot*ut,Tt=g[1]-Math.sin(et)*ot*ut;it.setTripleAt(kt,Tt,kt+Math.cos(ft)*ct,Tt-Math.sin(ft)*ct,kt+Math.cos(St)*dt,Tt-Math.sin(St)*dt,it.length())}function getPerpendicularVector(it,g){var et=[g[0]-it[0],g[1]-it[1]],ot=-Math.PI*.5,ut=[Math.cos(ot)*et[0]-Math.sin(ot)*et[1],Math.sin(ot)*et[0]+Math.cos(ot)*et[1]];return ut}function getProjectingAngle(it,g){var et=g===0?it.length()-1:g-1,ot=(g+1)%it.length(),ut=it.v[et],ct=it.v[ot],dt=getPerpendicularVector(ut,ct);return Math.atan2(0,1)-Math.atan2(dt[1],dt[0])}function zigZagCorner(it,g,et,ot,ut,ct,dt){var ft=getProjectingAngle(g,et),St=g.v[et%g._length],kt=g.v[et===0?g._length-1:et-1],Tt=g.v[(et+1)%g._length],Rt=ct===2?Math.sqrt(Math.pow(St[0]-kt[0],2)+Math.pow(St[1]-kt[1],2)):0,Ft=ct===2?Math.sqrt(Math.pow(St[0]-Tt[0],2)+Math.pow(St[1]-Tt[1],2)):0;setPoint(it,g.v[et%g._length],ft,dt,ot,Ft/((ut+1)*2),Rt/((ut+1)*2))}function zigZagSegment(it,g,et,ot,ut,ct){for(var dt=0;dt<ot;dt+=1){var ft=(dt+1)/(ot+1),St=ut===2?Math.sqrt(Math.pow(g.points[3][0]-g.points[0][0],2)+Math.pow(g.points[3][1]-g.points[0][1],2)):0,kt=g.normalAngle(ft),Tt=g.point(ft);setPoint(it,Tt,kt,ct,et,St/((ot+1)*2),St/((ot+1)*2)),ct=-ct}return ct}ZigZagModifier.prototype.processPath=function(it,g,et,ot){var ut=it._length,ct=shapePool.newElement();if(ct.c=it.c,it.c||(ut-=1),ut===0)return ct;var dt=-1,ft=PolynomialBezier.shapeSegment(it,0);zigZagCorner(ct,it,0,g,et,ot,dt);for(var St=0;St<ut;St+=1)dt=zigZagSegment(ct,ft,g,et,ot,-dt),St===ut-1&&!it.c?ft=null:ft=PolynomialBezier.shapeSegment(it,(St+1)%ut),zigZagCorner(ct,it,St+1,g,et,ot,dt);return ct},ZigZagModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ut,ct,dt=this.amplitude.v,ft=Math.max(0,Math.round(this.frequency.v)),St=this.pointsType.v;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ct=kt.shape.paths._length,ut=0;ut<ct;ut+=1)Tt.addShape(this.processPath(g[ut],dt,ft,St));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(it,g,et){var ot=Math.atan2(g[0]-it[0],g[1]-it[1]);return[polarOffset(it,ot,et),polarOffset(g,ot,et)]}function offsetSegment(it,g){var et,ot,ut,ct,dt,ft,St;St=linearOffset(it.points[0],it.points[1],g),et=St[0],ot=St[1],St=linearOffset(it.points[1],it.points[2],g),ut=St[0],ct=St[1],St=linearOffset(it.points[2],it.points[3],g),dt=St[0],ft=St[1];var kt=lineIntersection(et,ot,ut,ct);kt===null&&(kt=ot);var Tt=lineIntersection(dt,ft,ut,ct);return Tt===null&&(Tt=dt),new PolynomialBezier(et,kt,Tt,ft)}function joinLines(it,g,et,ot,ut){var ct=g.points[3],dt=et.points[0];if(ot===3||pointEqual(ct,dt))return ct;if(ot===2){var ft=-g.tangentAngle(1),St=-et.tangentAngle(0)+Math.PI,kt=lineIntersection(ct,polarOffset(ct,ft+Math.PI/2,100),dt,polarOffset(dt,ft+Math.PI/2,100)),Tt=kt?pointDistance(kt,ct):pointDistance(ct,dt)/2,Rt=polarOffset(ct,ft,2*Tt*roundCorner);return it.setXYAt(Rt[0],Rt[1],"o",it.length()-1),Rt=polarOffset(dt,St,2*Tt*roundCorner),it.setTripleAt(dt[0],dt[1],dt[0],dt[1],Rt[0],Rt[1],it.length()),dt}var Ft=pointEqual(ct,g.points[2])?g.points[0]:g.points[2],jt=pointEqual(dt,et.points[1])?et.points[3]:et.points[1],Bt=lineIntersection(Ft,ct,dt,jt);return Bt&&pointDistance(Bt,ct)<ut?(it.setTripleAt(Bt[0],Bt[1],Bt[0],Bt[1],Bt[0],Bt[1],it.length()),Bt):ct}function getIntersection(it,g){var et=it.intersections(g);return et.length&&floatEqual(et[0][0],1)&&et.shift(),et.length?et[0]:null}function pruneSegmentIntersection(it,g){var et=it.slice(),ot=g.slice(),ut=getIntersection(it[it.length-1],g[0]);return ut&&(et[it.length-1]=it[it.length-1].split(ut[0])[0],ot[0]=g[0].split(ut[1])[1]),it.length>1&&g.length>1&&(ut=getIntersection(it[0],g[g.length-1]),ut)?[[it[0].split(ut[0])[0]],[g[g.length-1].split(ut[1])[1]]]:[et,ot]}function pruneIntersections(it){for(var g,et=1;et<it.length;et+=1)g=pruneSegmentIntersection(it[et-1],it[et]),it[et-1]=g[0],it[et]=g[1];return it.length>1&&(g=pruneSegmentIntersection(it[it.length-1],it[0]),it[it.length-1]=g[0],it[0]=g[1]),it}function offsetSegmentSplit(it,g){var et=it.inflectionPoints(),ot,ut,ct,dt;if(et.length===0)return[offsetSegment(it,g)];if(et.length===1||floatEqual(et[1],1))return ct=it.split(et[0]),ot=ct[0],ut=ct[1],[offsetSegment(ot,g),offsetSegment(ut,g)];ct=it.split(et[0]),ot=ct[0];var ft=(et[1]-et[0])/(1-et[0]);return ct=ct[1].split(ft),dt=ct[0],ut=ct[1],[offsetSegment(ot,g),offsetSegment(dt,g),offsetSegment(ut,g)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(it,g){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(it,g.a,0,null,this),this.miterLimit=PropertyFactory.getProp(it,g.ml,0,null,this),this.lineJoin=g.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(it,g,et,ot){var ut=shapePool.newElement();ut.c=it.c;var ct=it.length();it.c||(ct-=1);var dt,ft,St,kt=[];for(dt=0;dt<ct;dt+=1)St=PolynomialBezier.shapeSegment(it,dt),kt.push(offsetSegmentSplit(St,g));if(!it.c)for(dt=ct-1;dt>=0;dt-=1)St=PolynomialBezier.shapeSegmentInverted(it,dt),kt.push(offsetSegmentSplit(St,g));kt=pruneIntersections(kt);var Tt=null,Rt=null;for(dt=0;dt<kt.length;dt+=1){var Ft=kt[dt];for(Rt&&(Tt=joinLines(ut,Rt,Ft[0],et,ot)),Rt=Ft[Ft.length-1],ft=0;ft<Ft.length;ft+=1)St=Ft[ft],Tt&&pointEqual(St.points[0],Tt)?ut.setXYAt(St.points[1][0],St.points[1][1],"o",ut.length()-1):ut.setTripleAt(St.points[0][0],St.points[0][1],St.points[1][0],St.points[1][1],St.points[0][0],St.points[0][1],ut.length()),ut.setTripleAt(St.points[3][0],St.points[3][1],St.points[3][0],St.points[3][1],St.points[2][0],St.points[2][1],ut.length()),Tt=St.points[3]}return kt.length&&joinLines(ut,Rt,kt[0][0],et,ot),ut},OffsetPathModifier.prototype.processShapes=function(it){var g,et,ot=this.shapes.length,ut,ct,dt=this.amount.v,ft=this.miterLimit.v,St=this.lineJoin;if(dt!==0){var kt,Tt;for(et=0;et<ot;et+=1){if(kt=this.shapes[et],Tt=kt.localShapeCollection,!(!kt.shape._mdf&&!this._mdf&&!it))for(Tt.releaseShapes(),kt.shape._mdf=!0,g=kt.shape.paths.shapes,ct=kt.shape.paths._length,ut=0;ut<ct;ut+=1)Tt.addShape(this.processPath(g[ut],dt,St,ft));kt.shape.paths=kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(it){for(var g=it.fStyle?it.fStyle.split(" "):[],et="normal",ot="normal",ut=g.length,ct,dt=0;dt<ut;dt+=1)switch(ct=g[dt].toLowerCase(),ct){case"italic":ot="italic";break;case"bold":et="700";break;case"black":et="900";break;case"medium":et="500";break;case"regular":case"normal":et="400";break;case"light":case"thin":et="200";break}return{style:ot,weight:it.fWeight||et}}var FontManager=function(){var it=5e3,g={w:0,size:0,shapes:[],data:{shapes:[]}},et=[];et=et.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var ot=127988,ut=917631,ct=917601,dt=917626,ft=65039,St=8205,kt=127462,Tt=127487,Rt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function Ft(hr){var Tr=hr.split(","),mr,Er=Tr.length,Dr=[];for(mr=0;mr<Er;mr+=1)Tr[mr]!=="sans-serif"&&Tr[mr]!=="monospace"&&Dr.push(Tr[mr]);return Dr.join(",")}function jt(hr,Tr){var mr=createTag("span");mr.setAttribute("aria-hidden",!0),mr.style.fontFamily=Tr;var Er=createTag("span");Er.innerText="giItT1WQy@!-/#",mr.style.position="absolute",mr.style.left="-10000px",mr.style.top="-10000px",mr.style.fontSize="300px",mr.style.fontVariant="normal",mr.style.fontStyle="normal",mr.style.fontWeight="normal",mr.style.letterSpacing="0",mr.appendChild(Er),document.body.appendChild(mr);var Dr=Er.offsetWidth;return Er.style.fontFamily=Ft(hr)+", "+Tr,{node:Er,w:Dr,parent:mr}}function Bt(){var hr,Tr=this.fonts.length,mr,Er,Dr=Tr;for(hr=0;hr<Tr;hr+=1)this.fonts[hr].loaded?Dr-=1:this.fonts[hr].fOrigin==="n"||this.fonts[hr].origin===0?this.fonts[hr].loaded=!0:(mr=this.fonts[hr].monoCase.node,Er=this.fonts[hr].monoCase.w,mr.offsetWidth!==Er?(Dr-=1,this.fonts[hr].loaded=!0):(mr=this.fonts[hr].sansCase.node,Er=this.fonts[hr].sansCase.w,mr.offsetWidth!==Er&&(Dr-=1,this.fonts[hr].loaded=!0)),this.fonts[hr].loaded&&(this.fonts[hr].sansCase.parent.parentNode.removeChild(this.fonts[hr].sansCase.parent),this.fonts[hr].monoCase.parent.parentNode.removeChild(this.fonts[hr].monoCase.parent)));Dr!==0&&Date.now()-this.initTime<it?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function zt(hr,Tr){var mr=document.body&&Tr?"svg":"canvas",Er,Dr=getFontProperties(hr);if(mr==="svg"){var Cr=createNS("text");Cr.style.fontSize="100px",Cr.setAttribute("font-family",hr.fFamily),Cr.setAttribute("font-style",Dr.style),Cr.setAttribute("font-weight",Dr.weight),Cr.textContent="1",hr.fClass?(Cr.style.fontFamily="inherit",Cr.setAttribute("class",hr.fClass)):Cr.style.fontFamily=hr.fFamily,Tr.appendChild(Cr),Er=Cr}else{var Lr=new OffscreenCanvas(500,500).getContext("2d");Lr.font=Dr.style+" "+Dr.weight+" 100px "+hr.fFamily,Er=Lr}function qr(sn){return mr==="svg"?(Er.textContent=sn,Er.getComputedTextLength()):Er.measureText(sn).width}return{measureText:qr}}function Ht(hr,Tr){if(!hr){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=hr.list;return}if(!document.body){this.isLoaded=!0,hr.list.forEach(function(yn){yn.helper=zt(yn),yn.cache={}}),this.fonts=hr.list;return}var mr=hr.list,Er,Dr=mr.length,Cr=Dr;for(Er=0;Er<Dr;Er+=1){var Lr=!0,qr,sn;if(mr[Er].loaded=!1,mr[Er].monoCase=jt(mr[Er].fFamily,"monospace"),mr[Er].sansCase=jt(mr[Er].fFamily,"sans-serif"),!mr[Er].fPath)mr[Er].loaded=!0,Cr-=1;else if(mr[Er].fOrigin==="p"||mr[Er].origin===3){if(qr=document.querySelectorAll('style[f-forigin="p"][f-family="'+mr[Er].fFamily+'"], style[f-origin="3"][f-family="'+mr[Er].fFamily+'"]'),qr.length>0&&(Lr=!1),Lr){var an=createTag("style");an.setAttribute("f-forigin",mr[Er].fOrigin),an.setAttribute("f-origin",mr[Er].origin),an.setAttribute("f-family",mr[Er].fFamily),an.type="text/css",an.innerText="@font-face {font-family: "+mr[Er].fFamily+"; font-style: normal; src: url('"+mr[Er].fPath+"');}",Tr.appendChild(an)}}else if(mr[Er].fOrigin==="g"||mr[Er].origin===1){for(qr=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),sn=0;sn<qr.length;sn+=1)qr[sn].href.indexOf(mr[Er].fPath)!==-1&&(Lr=!1);if(Lr){var tn=createTag("link");tn.setAttribute("f-forigin",mr[Er].fOrigin),tn.setAttribute("f-origin",mr[Er].origin),tn.type="text/css",tn.rel="stylesheet",tn.href=mr[Er].fPath,document.body.appendChild(tn)}}else if(mr[Er].fOrigin==="t"||mr[Er].origin===2){for(qr=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),sn=0;sn<qr.length;sn+=1)mr[Er].fPath===qr[sn].src&&(Lr=!1);if(Lr){var ln=createTag("link");ln.setAttribute("f-forigin",mr[Er].fOrigin),ln.setAttribute("f-origin",mr[Er].origin),ln.setAttribute("rel","stylesheet"),ln.setAttribute("href",mr[Er].fPath),Tr.appendChild(ln)}}mr[Er].helper=zt(mr[Er],Tr),mr[Er].cache={},this.fonts.push(mr[Er])}Cr===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Ut(hr){if(hr){this.chars||(this.chars=[]);var Tr,mr=hr.length,Er,Dr=this.chars.length,Cr;for(Tr=0;Tr<mr;Tr+=1){for(Er=0,Cr=!1;Er<Dr;)this.chars[Er].style===hr[Tr].style&&this.chars[Er].fFamily===hr[Tr].fFamily&&this.chars[Er].ch===hr[Tr].ch&&(Cr=!0),Er+=1;Cr||(this.chars.push(hr[Tr]),Dr+=1)}}}function Kt(hr,Tr,mr){for(var Er=0,Dr=this.chars.length;Er<Dr;){if(this.chars[Er].ch===hr&&this.chars[Er].style===Tr&&this.chars[Er].fFamily===mr)return this.chars[Er];Er+=1}return(typeof hr=="string"&&hr.charCodeAt(0)!==13||!hr)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",hr,Tr,mr)),g}function Yt(hr,Tr,mr){var Er=this.getFontByName(Tr),Dr=hr;if(!Er.cache[Dr]){var Cr=Er.helper;if(hr===" "){var Lr=Cr.measureText("|"+hr+"|"),qr=Cr.measureText("||");Er.cache[Dr]=(Lr-qr)/100}else Er.cache[Dr]=Cr.measureText(hr)/100}return Er.cache[Dr]*mr}function er(hr){for(var Tr=0,mr=this.fonts.length;Tr<mr;){if(this.fonts[Tr].fName===hr)return this.fonts[Tr];Tr+=1}return this.fonts[0]}function ar(hr){var Tr=0,mr=hr.charCodeAt(0);if(mr>=55296&&mr<=56319){var Er=hr.charCodeAt(1);Er>=56320&&Er<=57343&&(Tr=(mr-55296)*1024+Er-56320+65536)}return Tr}function ir(hr,Tr){var mr=hr.toString(16)+Tr.toString(16);return Rt.indexOf(mr)!==-1}function lr(hr){return hr===St}function cr(hr){return hr===ft}function vr(hr){var Tr=ar(hr);return Tr>=kt&&Tr<=Tt}function xr(hr){return vr(hr.substr(0,2))&&vr(hr.substr(2,2))}function yr(hr){return et.indexOf(hr)!==-1}function Sr(hr,Tr){var mr=ar(hr.substr(Tr,2));if(mr!==ot)return!1;var Er=0;for(Tr+=2;Er<5;){if(mr=ar(hr.substr(Tr,2)),mr<ct||mr>dt)return!1;Er+=1,Tr+=2}return ar(hr.substr(Tr,2))===ut}function kr(){this.isLoaded=!0}var Pr=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Pr.isModifier=ir,Pr.isZeroWidthJoiner=lr,Pr.isFlagEmoji=xr,Pr.isRegionalCode=vr,Pr.isCombinedCharacter=yr,Pr.isRegionalFlag=Sr,Pr.isVariationSelector=cr,Pr.BLACK_FLAG_CODE_POINT=ot;var Or={addChars:Ut,addFonts:Ht,getCharData:Kt,getFontByName:er,measureText:Yt,checkLoadedFonts:Bt,setIsLoaded:kr};return Pr.prototype=Or,Pr}();function SlotManager(it){this.animationData=it}SlotManager.prototype.getProp=function(it){return this.animationData.slots&&this.animationData.slots[it.sid]?Object.assign(it,this.animationData.slots[it.sid].p):it};function slotFactory(it){return new SlotManager(it)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(g){this.renderableComponents.indexOf(g)===-1&&this.renderableComponents.push(g)},removeRenderableComponent:function(g){this.renderableComponents.indexOf(g)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(g),1)},prepareRenderableFrame:function(g){this.checkLayerLimits(g)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(g){this.data.ip-this.data.st<=g&&this.data.op-this.data.st>g?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var g,et=this.renderableComponents.length;for(g=0;g<et;g+=1)this.renderableComponents[g].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var it={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(g){return it[g]||""}}();function SliderEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function AngleEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function ColorEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function PointEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,1,0,et)}function LayerIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function MaskIndexEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function CheckboxEffect(it,g,et){this.p=PropertyFactory.getProp(g,it.v,0,0,et)}function NoValueEffect(){this.p={}}function EffectsManager(it,g){var et=it.ef||[];this.effectElements=[];var ot,ut=et.length,ct;for(ot=0;ot<ut;ot+=1)ct=new GroupEffect(et[ot],g),this.effectElements.push(ct)}function GroupEffect(it,g){this.init(it,g)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(it,g){this.data=it,this.effectElements=[],this.initDynamicPropertyContainer(g);var et,ot=this.data.ef.length,ut,ct=this.data.ef;for(et=0;et<ot;et+=1){switch(ut=null,ct[et].ty){case 0:ut=new SliderEffect(ct[et],g,this);break;case 1:ut=new AngleEffect(ct[et],g,this);break;case 2:ut=new ColorEffect(ct[et],g,this);break;case 3:ut=new PointEffect(ct[et],g,this);break;case 4:case 7:ut=new CheckboxEffect(ct[et],g,this);break;case 10:ut=new LayerIndexEffect(ct[et],g,this);break;case 11:ut=new MaskIndexEffect(ct[et],g,this);break;case 5:ut=new EffectsManager(ct[et],g);break;default:ut=new NoValueEffect(ct[et]);break}ut&&this.effectElements.push(ut)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var g=0,et=this.data.masksProperties.length;g<et;){if(this.data.masksProperties[g].mode!=="n"&&this.data.masksProperties[g].cl!==!1)return!0;g+=1}return!1},initExpressions:function(){var g=getExpressionInterfaces();if(g){var et=g("layer"),ot=g("effects"),ut=g("shape"),ct=g("text"),dt=g("comp");this.layerInterface=et(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var ft=ot.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(ft),this.data.ty===0||this.data.xt?this.compInterface=dt(this):this.data.ty===4?(this.layerInterface.shapeInterface=ut(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=ct(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var g=getBlendMode(this.data.bm),et=this.baseElement||this.layerElement;et.style["mix-blend-mode"]=g},initBaseData:function(g,et,ot){this.globalData=et,this.comp=ot,this.data=g,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(g,et){var ot,ut=this.dynamicProperties.length;for(ot=0;ot<ut;ot+=1)(et||this._isParent&&this.dynamicProperties[ot].propType==="transform")&&(this.dynamicProperties[ot].getValue(),this.dynamicProperties[ot]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(g){this.dynamicProperties.indexOf(g)===-1&&this.dynamicProperties.push(g)}};function FootageElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.footageData=g.imageLoader.getAsset(this.assetData),this.initBaseData(it,g,et)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var it=getExpressionInterfaces();if(it){var g=it("footage");this.layerInterface=g(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(it,g,et){this.initFrame(),this.initRenderable(),this.assetData=g.getAssetData(it.refId),this.initBaseData(it,g,et),this._isPlaying=!1,this._canPlay=!1;var ot=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(ot),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,it.au&&it.au.lv?it.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(it){if(this.prepareRenderableFrame(it,!0),this.prepareProperties(it,!0),this.tm._placeholder)this._currentTime=it/this.data.sr;else{var g=this.tm.v;this._currentTime=g}this._volume=this.lv.v[0];var et=this._volume*this._volumeMultiplier;this._previousVolume!==et&&(this._previousVolume=et,this.audio.volume(et))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(it){this.audio.rate(it)},AudioElement.prototype.volume=function(it){this._volumeMultiplier=it,this._previousVolume=it*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(it){var g,et=this.layers.length,ot;for(this.completeLayers=!0,g=et-1;g>=0;g-=1)this.elements[g]||(ot=this.layers[g],ot.ip-ot.st<=it-this.layers[g].st&&ot.op-ot.st>it-this.layers[g].st&&this.buildItem(g)),this.completeLayers=this.elements[g]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(it){switch(it.ty){case 2:return this.createImage(it);case 0:return this.createComp(it);case 1:return this.createSolid(it);case 3:return this.createNull(it);case 4:return this.createShape(it);case 5:return this.createText(it);case 6:return this.createAudio(it);case 13:return this.createCamera(it);case 15:return this.createFootage(it);default:return this.createNull(it)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(it){return new AudioElement(it,this.globalData,this)},BaseRenderer.prototype.createFootage=function(it){return new FootageElement(it,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.buildItem(it);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(it){this.completeLayers=!1;var g,et=it.length,ot,ut=this.layers.length;for(g=0;g<et;g+=1)for(ot=0;ot<ut;){if(this.layers[ot].id===it[g].id){this.layers[ot]=it[g];break}ot+=1}},BaseRenderer.prototype.setProjectInterface=function(it){this.globalData.projectInterface=it},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(it,g,et){for(var ot=this.elements,ut=this.layers,ct=0,dt=ut.length;ct<dt;)ut[ct].ind==g&&(!ot[ct]||ot[ct]===!0?(this.buildItem(ct),this.addPendingElement(it)):(et.push(ot[ct]),ot[ct].setAsParent(),ut[ct].parent!==void 0?this.buildElementParenting(it,ut[ct].parent,et):it.setHierarchy(et))),ct+=1},BaseRenderer.prototype.addPendingElement=function(it){this.pendingElements.push(it)},BaseRenderer.prototype.searchExtraCompositions=function(it){var g,et=it.length;for(g=0;g<et;g+=1)if(it[g].xt){var ot=this.createComp(it[g]);ot.initExpressions(),this.globalData.projectInterface.registerComposition(ot)}},BaseRenderer.prototype.getElementById=function(it){var g,et=this.elements.length;for(g=0;g<et;g+=1)if(this.elements[g].data.ind===it)return this.elements[g];return null},BaseRenderer.prototype.getElementByPath=function(it){var g=it.shift(),et;if(typeof g=="number")et=this.elements[g];else{var ot,ut=this.elements.length;for(ot=0;ot<ut;ot+=1)if(this.elements[ot].data.nm===g){et=this.elements[ot];break}}return it.length===0?et:et.getElementByPath(it)},BaseRenderer.prototype.setupGlobalData=function(it,g){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(it),this.globalData.fontManager.addChars(it.chars),this.globalData.fontManager.addFonts(it.fonts,g),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=it.fr,this.globalData.nm=it.nm,this.globalData.compSize={w:it.w,h:it.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var g=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:g,localMat:g,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var g,et=this.finalTransform.mat,ot=0,ut=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;ot<ut;){if(this.hierarchy[ot].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}ot+=1}if(this.finalTransform._matMdf)for(g=this.finalTransform.mProp.v.props,et.cloneFromProps(g),ot=0;ot<ut;ot+=1)et.multiply(this.hierarchy[ot].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var g=0,et=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;g<et;)this.localTransforms[g]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[g]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),g+=1;if(this.finalTransform._localMatMdf){var ot=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(ot),g=1;g<et;g+=1){var ut=this.localTransforms[g].matrix;ot.multiply(ut)}ot.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var ct=this.finalTransform.localOpacity;for(g=0;g<et;g+=1)ct*=this.localTransforms[g].opacity*.01;this.finalTransform.localOpacity=ct}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var g=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(g.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var et=0,ot=g.length;for(et=0;et<ot;et+=1)this.localTransforms.push(g[et])}}},globalToLocal:function(g){var et=[];et.push(this.finalTransform);for(var ot=!0,ut=this.comp;ot;)ut.finalTransform?(ut.data.hasMask&&et.splice(0,0,ut.finalTransform),ut=ut.comp):ot=!1;var ct,dt=et.length,ft;for(ct=0;ct<dt;ct+=1)ft=et[ct].mat.applyToPointArray(0,0,0),g=[g[0]-ft[0],g[1]-ft[1],0];return g},mHelper:new Matrix};function MaskElement(it,g,et){this.data=it,this.element=g,this.globalData=et,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var ot=this.globalData.defs,ut,ct=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(ct),this.solidPath="";var dt,ft=this.masksProperties,St=0,kt=[],Tt,Rt,Ft=createElementID(),jt,Bt,zt,Ht,Ut="clipPath",Kt="clip-path";for(ut=0;ut<ct;ut+=1)if((ft[ut].mode!=="a"&&ft[ut].mode!=="n"||ft[ut].inv||ft[ut].o.k!==100||ft[ut].o.x)&&(Ut="mask",Kt="mask"),(ft[ut].mode==="s"||ft[ut].mode==="i")&&St===0?(jt=createNS("rect"),jt.setAttribute("fill","#ffffff"),jt.setAttribute("width",this.element.comp.data.w||0),jt.setAttribute("height",this.element.comp.data.h||0),kt.push(jt)):jt=null,dt=createNS("path"),ft[ut].mode==="n")this.viewData[ut]={op:PropertyFactory.getProp(this.element,ft[ut].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ut],3),elem:dt,lastPath:""},ot.appendChild(dt);else{St+=1,dt.setAttribute("fill",ft[ut].mode==="s"?"#000000":"#ffffff"),dt.setAttribute("clip-rule","nonzero");var Yt;if(ft[ut].x.k!==0?(Ut="mask",Kt="mask",Ht=PropertyFactory.getProp(this.element,ft[ut].x,0,null,this.element),Yt=createElementID(),Bt=createNS("filter"),Bt.setAttribute("id",Yt),zt=createNS("feMorphology"),zt.setAttribute("operator","erode"),zt.setAttribute("in","SourceGraphic"),zt.setAttribute("radius","0"),Bt.appendChild(zt),ot.appendChild(Bt),dt.setAttribute("stroke",ft[ut].mode==="s"?"#000000":"#ffffff")):(zt=null,Ht=null),this.storedData[ut]={elem:dt,x:Ht,expan:zt,lastPath:"",lastOperator:"",filterId:Yt,lastRadius:0},ft[ut].mode==="i"){Rt=kt.length;var er=createNS("g");for(Tt=0;Tt<Rt;Tt+=1)er.appendChild(kt[Tt]);var ar=createNS("mask");ar.setAttribute("mask-type","alpha"),ar.setAttribute("id",Ft+"_"+St),ar.appendChild(dt),ot.appendChild(ar),er.setAttribute("mask","url("+getLocationHref()+"#"+Ft+"_"+St+")"),kt.length=0,kt.push(er)}else kt.push(dt);ft[ut].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[ut]={elem:dt,lastPath:"",op:PropertyFactory.getProp(this.element,ft[ut].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ft[ut],3),invRect:jt},this.viewData[ut].prop.k||this.drawPath(ft[ut],this.viewData[ut].prop.v,this.viewData[ut])}for(this.maskElement=createNS(Ut),ct=kt.length,ut=0;ut<ct;ut+=1)this.maskElement.appendChild(kt[ut]);St>0&&(this.maskElement.setAttribute("id",Ft),this.element.maskedElement.setAttribute(Kt,"url("+getLocationHref()+"#"+Ft+")"),ot.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(it){return this.viewData[it].prop},MaskElement.prototype.renderFrame=function(it){var g=this.element.finalTransform.mat,et,ot=this.masksProperties.length;for(et=0;et<ot;et+=1)if((this.viewData[et].prop._mdf||it)&&this.drawPath(this.masksProperties[et],this.viewData[et].prop.v,this.viewData[et]),(this.viewData[et].op._mdf||it)&&this.viewData[et].elem.setAttribute("fill-opacity",this.viewData[et].op.v),this.masksProperties[et].mode!=="n"&&(this.viewData[et].invRect&&(this.element.finalTransform.mProp._mdf||it)&&this.viewData[et].invRect.setAttribute("transform",g.getInverseMatrix().to2dCSS()),this.storedData[et].x&&(this.storedData[et].x._mdf||it))){var ut=this.storedData[et].expan;this.storedData[et].x.v<0?(this.storedData[et].lastOperator!=="erode"&&(this.storedData[et].lastOperator="erode",this.storedData[et].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[et].filterId+")")),ut.setAttribute("radius",-this.storedData[et].x.v)):(this.storedData[et].lastOperator!=="dilate"&&(this.storedData[et].lastOperator="dilate",this.storedData[et].elem.setAttribute("filter",null)),this.storedData[et].elem.setAttribute("stroke-width",this.storedData[et].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var it="M0,0 ";return it+=" h"+this.globalData.compSize.w,it+=" v"+this.globalData.compSize.h,it+=" h-"+this.globalData.compSize.w,it+=" v-"+this.globalData.compSize.h+" ",it},MaskElement.prototype.drawPath=function(it,g,et){var ot=" M"+g.v[0][0]+","+g.v[0][1],ut,ct;for(ct=g._length,ut=1;ut<ct;ut+=1)ot+=" C"+g.o[ut-1][0]+","+g.o[ut-1][1]+" "+g.i[ut][0]+","+g.i[ut][1]+" "+g.v[ut][0]+","+g.v[ut][1];if(g.c&&ct>1&&(ot+=" C"+g.o[ut-1][0]+","+g.o[ut-1][1]+" "+g.i[0][0]+","+g.i[0][1]+" "+g.v[0][0]+","+g.v[0][1]),et.lastPath!==ot){var dt="";et.elem&&(g.c&&(dt=it.inv?this.solidPath+ot:ot),et.elem.setAttribute("d",dt)),et.lastPath=ot}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var it={};it.createFilter=g,it.createAlphaToLuminanceFilter=et;function g(ot,ut){var ct=createNS("filter");return ct.setAttribute("id",ot),ut!==!0&&(ct.setAttribute("filterUnits","objectBoundingBox"),ct.setAttribute("x","0%"),ct.setAttribute("y","0%"),ct.setAttribute("width","100%"),ct.setAttribute("height","100%")),ct}function et(){var ot=createNS("feColorMatrix");return ot.setAttribute("type","matrix"),ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),ot}return it}(),featureSupport=function(){var it={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(it.maskType=!1),/firefox/i.test(navigator.userAgent)&&(it.svgLumaHidden=!1),it}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(it){var g,et="SourceGraphic",ot=it.data.ef?it.data.ef.length:0,ut=createElementID(),ct=filtersFactory.createFilter(ut,!0),dt=0;this.filters=[];var ft;for(g=0;g<ot;g+=1){ft=null;var St=it.data.ef[g].ty;if(registeredEffects$1[St]){var kt=registeredEffects$1[St].effect;ft=new kt(ct,it.effectsManager.effectElements[g],it,idPrefix+dt,et),et=idPrefix+dt,registeredEffects$1[St].countsAsEffect&&(dt+=1)}ft&&this.filters.push(ft)}dt&&(it.globalData.defs.appendChild(ct),it.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ut+")")),this.filters.length&&it.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},SVGEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect$1(it,g,et){registeredEffects$1[it]={effect:g,countsAsEffect:et}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var g=null;if(this.data.td){this.matteMasks={};var et=createNS("g");et.setAttribute("id",this.layerId),et.appendChild(this.layerElement),g=et,this.globalData.defs.appendChild(et)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),g=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var ot=createNS("clipPath"),ut=createNS("path");ut.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var ct=createElementID();if(ot.setAttribute("id",ct),ot.appendChild(ut),this.globalData.defs.appendChild(ot),this.checkMasks()){var dt=createNS("g");dt.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")"),dt.appendChild(this.layerElement),this.transformedElement=dt,g?g.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ct+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(g){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[g]){var et=this.layerId+"_"+g,ot,ut,ct,dt;if(g===1||g===3){var ft=createNS("mask");ft.setAttribute("id",et),ft.setAttribute("mask-type",g===3?"luminance":"alpha"),ct=createNS("use"),ct.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ft.appendChild(ct),this.globalData.defs.appendChild(ft),!featureSupport.maskType&&g===1&&(ft.setAttribute("mask-type","luminance"),ot=createElementID(),ut=filtersFactory.createFilter(ot),this.globalData.defs.appendChild(ut),ut.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),dt.appendChild(ct),ft.appendChild(dt),dt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"))}else if(g===2){var St=createNS("mask");St.setAttribute("id",et),St.setAttribute("mask-type","alpha");var kt=createNS("g");St.appendChild(kt),ot=createElementID(),ut=filtersFactory.createFilter(ot);var Tt=createNS("feComponentTransfer");Tt.setAttribute("in","SourceGraphic"),ut.appendChild(Tt);var Rt=createNS("feFuncA");Rt.setAttribute("type","table"),Rt.setAttribute("tableValues","1.0 0.0"),Tt.appendChild(Rt),this.globalData.defs.appendChild(ut);var Ft=createNS("rect");Ft.setAttribute("width",this.comp.data.w),Ft.setAttribute("height",this.comp.data.h),Ft.setAttribute("x","0"),Ft.setAttribute("y","0"),Ft.setAttribute("fill","#ffffff"),Ft.setAttribute("opacity","0"),kt.setAttribute("filter","url("+getLocationHref()+"#"+ot+")"),kt.appendChild(Ft),ct=createNS("use"),ct.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),kt.appendChild(ct),featureSupport.maskType||(St.setAttribute("mask-type","luminance"),ut.appendChild(filtersFactory.createAlphaToLuminanceFilter()),dt=createNS("g"),kt.appendChild(Ft),dt.appendChild(this.layerElement),kt.appendChild(dt)),this.globalData.defs.appendChild(St)}this.matteMasks[g]=et}return this.matteMasks[g]},setMatte:function(g){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+g+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(g){this.hierarchy=g},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var it={initElement:function(et,ot,ut){this.initFrame(),this.initBaseData(et,ot,ut),this.initTransform(et,ot,ut),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var et=this.baseElement||this.layerElement;et.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var et=this.baseElement||this.layerElement;et.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(et){this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(it)],RenderableDOMElement)})();function IImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.assetData&&this.assetData.sid&&(this.assetData=g.slotManager.getProp(this.assetData)),this.initElement(it,g,et),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(it,g){this.elem=it,this.pos=g}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(g){var et,ot=this.shapeModifiers.length;for(et=0;et<ot;et+=1)this.shapeModifiers[et].addShape(g)},isShapeInAnimatedModifiers:function(g){for(var et=0,ot=this.shapeModifiers.length;et<ot;)if(this.shapeModifiers[et].isAnimatedWithShape(g))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var g,et=this.shapes.length;for(g=0;g<et;g+=1)this.shapes[g].sh.reset();et=this.shapeModifiers.length;var ot;for(g=et-1;g>=0&&(ot=this.shapeModifiers[g].processShapes(this._isFirstFrame),!ot);g-=1);}},searchProcessedElement:function(g){for(var et=this.processedElements,ot=0,ut=et.length;ot<ut;){if(et[ot].elem===g)return et[ot].pos;ot+=1}return 0},addProcessedElement:function(g,et){for(var ot=this.processedElements,ut=ot.length;ut;)if(ut-=1,ot[ut].elem===g){ot[ut].pos=et;return}ot.push(new ProcessedElement(g,et))},prepareFrame:function(g){this.prepareRenderableFrame(g),this.prepareProperties(g,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(it,g,et){this.caches=[],this.styles=[],this.transformers=it,this.lStr="",this.sh=et,this.lvl=g,this._isAnimated=!!et.k;for(var ot=0,ut=it.length;ot<ut;){if(it[ot].mProps.dynamicProperties.length){this._isAnimated=!0;break}ot+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(it,g){this.data=it,this.type=it.ty,this.d="",this.lvl=g,this._mdf=!1,this.closed=it.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(it,g,et,ot){this.elem=it,this.frameId=-1,this.dataProps=createSizedArray(g.length),this.renderer=et,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",g.length?g.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(ot);var ut,ct=g.length||0,dt;for(ut=0;ut<ct;ut+=1)dt=PropertyFactory.getProp(it,g[ut].v,0,0,this),this.k=dt.k||this.k,this.dataProps[ut]={n:g[ut].n,p:dt};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(it){if(!(this.elem.globalData.frameId===this.frameId&&!it)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||it,this._mdf)){var g=0,et=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),g=0;g<et;g+=1)this.dataProps[g].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[g].p.v:this.dashArray[g]=this.dataProps[g].p.v:this.dashoffset[0]=this.dataProps[g].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.c=PropertyFactory.getProp(it,g.c,1,255,this),this.style=et}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.style=et}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(it,g,et){this.data=g,this.c=createTypedArray("uint8c",g.p*4);var ot=g.k.k[0].s?g.k.k[0].s.length-g.p*4:g.k.k.length-g.p*4;this.o=createTypedArray("float32",ot),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=ot,this.initDynamicPropertyContainer(et),this.prop=PropertyFactory.getProp(it,g.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(it,g){for(var et=0,ot=this.o.length/2,ut;et<ot;){if(ut=Math.abs(it[et*4]-it[g*4+et*2]),ut>.01)return!1;et+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var it=0,g=this.data.k.k.length;it<g;){if(!this.comparePoints(this.data.k.k[it].s,this.data.p))return!1;it+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(it){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||it){var g,et=this.data.p*4,ot,ut;for(g=0;g<et;g+=1)ot=g%4===0?100:255,ut=Math.round(this.prop.v[g]*ot),this.c[g]!==ut&&(this.c[g]=ut,this._cmdf=!it);if(this.o.length)for(et=this.prop.v.length,g=this.data.p*4;g<et;g+=1)ot=g%2===0?100:1,ut=g%2===0?Math.round(this.prop.v[g]*100):this.prop.v[g],this.o[g-this.data.p*4]!==ut&&(this.o[g-this.data.p*4]=ut,this._omdf=!it);this._mdf=!it}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.initGradientData(it,g,et)}SVGGradientFillStyleData.prototype.initGradientData=function(it,g,et){this.o=PropertyFactory.getProp(it,g.o,0,.01,this),this.s=PropertyFactory.getProp(it,g.s,1,null,this),this.e=PropertyFactory.getProp(it,g.e,1,null,this),this.h=PropertyFactory.getProp(it,g.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(it,g.a||{k:0},0,degToRads,this),this.g=new GradientProperty(it,g.g,this),this.style=et,this.stops=[],this.setGradientData(et.pElem,g),this.setGradientOpacity(g,et),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(it,g){var et=createElementID(),ot=createNS(g.t===1?"linearGradient":"radialGradient");ot.setAttribute("id",et),ot.setAttribute("spreadMethod","pad"),ot.setAttribute("gradientUnits","userSpaceOnUse");var ut=[],ct,dt,ft;for(ft=g.g.p*4,dt=0;dt<ft;dt+=4)ct=createNS("stop"),ot.appendChild(ct),ut.push(ct);it.setAttribute(g.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+et+")"),this.gf=ot,this.cst=ut},SVGGradientFillStyleData.prototype.setGradientOpacity=function(it,g){if(this.g._hasOpacity&&!this.g._collapsable){var et,ot,ut,ct=createNS("mask"),dt=createNS("path");ct.appendChild(dt);var ft=createElementID(),St=createElementID();ct.setAttribute("id",St);var kt=createNS(it.t===1?"linearGradient":"radialGradient");kt.setAttribute("id",ft),kt.setAttribute("spreadMethod","pad"),kt.setAttribute("gradientUnits","userSpaceOnUse"),ut=it.g.k.k[0].s?it.g.k.k[0].s.length:it.g.k.k.length;var Tt=this.stops;for(ot=it.g.p*4;ot<ut;ot+=2)et=createNS("stop"),et.setAttribute("stop-color","rgb(255,255,255)"),kt.appendChild(et),Tt.push(et);dt.setAttribute(it.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+ft+")"),it.ty==="gs"&&(dt.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),dt.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),it.lj===1&&dt.setAttribute("stroke-miterlimit",it.ml)),this.of=kt,this.ms=ct,this.ost=Tt,this.maskId=St,g.msElem=dt}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(it,g,et){this.initDynamicPropertyContainer(it),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(it,g.w,0,null,this),this.d=new DashProperty(it,g.d||{},"svg",this),this.initGradientData(it,g,et),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(it,g,et){this.transform={mProps:it,op:g,container:et},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(g,et,ot,ut){if(et===0)return"";var ct=g.o,dt=g.i,ft=g.v,St,kt=" M"+ut.applyToPointStringified(ft[0][0],ft[0][1]);for(St=1;St<et;St+=1)kt+=" C"+ut.applyToPointStringified(ct[St-1][0],ct[St-1][1])+" "+ut.applyToPointStringified(dt[St][0],dt[St][1])+" "+ut.applyToPointStringified(ft[St][0],ft[St][1]);return ot&&et&&(kt+=" C"+ut.applyToPointStringified(ct[St-1][0],ct[St-1][1])+" "+ut.applyToPointStringified(dt[0][0],dt[0][1])+" "+ut.applyToPointStringified(ft[0][0],ft[0][1]),kt+="z"),kt},SVGElementsRenderer=function(){var it=new Matrix,g=new Matrix,et={createRenderFunction:ot};function ot(Rt){switch(Rt.ty){case"fl":return ft;case"gf":return kt;case"gs":return St;case"st":return Tt;case"sh":case"el":case"rc":case"sr":return dt;case"tr":return ut;case"no":return ct;default:return null}}function ut(Rt,Ft,jt){(jt||Ft.transform.op._mdf)&&Ft.transform.container.setAttribute("opacity",Ft.transform.op.v),(jt||Ft.transform.mProps._mdf)&&Ft.transform.container.setAttribute("transform",Ft.transform.mProps.v.to2dCSS())}function ct(){}function dt(Rt,Ft,jt){var Bt,zt,Ht,Ut,Kt,Yt,er=Ft.styles.length,ar=Ft.lvl,ir,lr,cr,vr;for(Yt=0;Yt<er;Yt+=1){if(Ut=Ft.sh._mdf||jt,Ft.styles[Yt].lvl<ar){for(lr=g.reset(),cr=ar-Ft.styles[Yt].lvl,vr=Ft.transformers.length-1;!Ut&&cr>0;)Ut=Ft.transformers[vr].mProps._mdf||Ut,cr-=1,vr-=1;if(Ut)for(cr=ar-Ft.styles[Yt].lvl,vr=Ft.transformers.length-1;cr>0;)lr.multiply(Ft.transformers[vr].mProps.v),cr-=1,vr-=1}else lr=it;if(ir=Ft.sh.paths,zt=ir._length,Ut){for(Ht="",Bt=0;Bt<zt;Bt+=1)Kt=ir.shapes[Bt],Kt&&Kt._length&&(Ht+=buildShapeString(Kt,Kt._length,Kt.c,lr));Ft.caches[Yt]=Ht}else Ht=Ft.caches[Yt];Ft.styles[Yt].d+=Rt.hd===!0?"":Ht,Ft.styles[Yt]._mdf=Ut||Ft.styles[Yt]._mdf}}function ft(Rt,Ft,jt){var Bt=Ft.style;(Ft.c._mdf||jt)&&Bt.pElem.setAttribute("fill","rgb("+bmFloor(Ft.c.v[0])+","+bmFloor(Ft.c.v[1])+","+bmFloor(Ft.c.v[2])+")"),(Ft.o._mdf||jt)&&Bt.pElem.setAttribute("fill-opacity",Ft.o.v)}function St(Rt,Ft,jt){kt(Rt,Ft,jt),Tt(Rt,Ft,jt)}function kt(Rt,Ft,jt){var Bt=Ft.gf,zt=Ft.g._hasOpacity,Ht=Ft.s.v,Ut=Ft.e.v;if(Ft.o._mdf||jt){var Kt=Rt.ty==="gf"?"fill-opacity":"stroke-opacity";Ft.style.pElem.setAttribute(Kt,Ft.o.v)}if(Ft.s._mdf||jt){var Yt=Rt.t===1?"x1":"cx",er=Yt==="x1"?"y1":"cy";Bt.setAttribute(Yt,Ht[0]),Bt.setAttribute(er,Ht[1]),zt&&!Ft.g._collapsable&&(Ft.of.setAttribute(Yt,Ht[0]),Ft.of.setAttribute(er,Ht[1]))}var ar,ir,lr,cr;if(Ft.g._cmdf||jt){ar=Ft.cst;var vr=Ft.g.c;for(lr=ar.length,ir=0;ir<lr;ir+=1)cr=ar[ir],cr.setAttribute("offset",vr[ir*4]+"%"),cr.setAttribute("stop-color","rgb("+vr[ir*4+1]+","+vr[ir*4+2]+","+vr[ir*4+3]+")")}if(zt&&(Ft.g._omdf||jt)){var xr=Ft.g.o;for(Ft.g._collapsable?ar=Ft.cst:ar=Ft.ost,lr=ar.length,ir=0;ir<lr;ir+=1)cr=ar[ir],Ft.g._collapsable||cr.setAttribute("offset",xr[ir*2]+"%"),cr.setAttribute("stop-opacity",xr[ir*2+1])}if(Rt.t===1)(Ft.e._mdf||jt)&&(Bt.setAttribute("x2",Ut[0]),Bt.setAttribute("y2",Ut[1]),zt&&!Ft.g._collapsable&&(Ft.of.setAttribute("x2",Ut[0]),Ft.of.setAttribute("y2",Ut[1])));else{var yr;if((Ft.s._mdf||Ft.e._mdf||jt)&&(yr=Math.sqrt(Math.pow(Ht[0]-Ut[0],2)+Math.pow(Ht[1]-Ut[1],2)),Bt.setAttribute("r",yr),zt&&!Ft.g._collapsable&&Ft.of.setAttribute("r",yr)),Ft.e._mdf||Ft.h._mdf||Ft.a._mdf||jt){yr||(yr=Math.sqrt(Math.pow(Ht[0]-Ut[0],2)+Math.pow(Ht[1]-Ut[1],2)));var Sr=Math.atan2(Ut[1]-Ht[1],Ut[0]-Ht[0]),kr=Ft.h.v;kr>=1?kr=.99:kr<=-1&&(kr=-.99);var Pr=yr*kr,Or=Math.cos(Sr+Ft.a.v)*Pr+Ht[0],hr=Math.sin(Sr+Ft.a.v)*Pr+Ht[1];Bt.setAttribute("fx",Or),Bt.setAttribute("fy",hr),zt&&!Ft.g._collapsable&&(Ft.of.setAttribute("fx",Or),Ft.of.setAttribute("fy",hr))}}}function Tt(Rt,Ft,jt){var Bt=Ft.style,zt=Ft.d;zt&&(zt._mdf||jt)&&zt.dashStr&&(Bt.pElem.setAttribute("stroke-dasharray",zt.dashStr),Bt.pElem.setAttribute("stroke-dashoffset",zt.dashoffset[0])),Ft.c&&(Ft.c._mdf||jt)&&Bt.pElem.setAttribute("stroke","rgb("+bmFloor(Ft.c.v[0])+","+bmFloor(Ft.c.v[1])+","+bmFloor(Ft.c.v[2])+")"),(Ft.o._mdf||jt)&&Bt.pElem.setAttribute("stroke-opacity",Ft.o.v),(Ft.w._mdf||jt)&&(Bt.pElem.setAttribute("stroke-width",Ft.w.v),Bt.msElem&&Bt.msElem.setAttribute("stroke-width",Ft.w.v))}return et}();function SVGShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(it,g,et),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var it,g=this.shapes.length,et,ot,ut=this.stylesList.length,ct,dt=[],ft=!1;for(ot=0;ot<ut;ot+=1){for(ct=this.stylesList[ot],ft=!1,dt.length=0,it=0;it<g;it+=1)et=this.shapes[it],et.styles.indexOf(ct)!==-1&&(dt.push(et),ft=et._isAnimated||ft);dt.length>1&&ft&&this.setShapesAsAnimated(dt)}},SVGShapeElement.prototype.setShapesAsAnimated=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(it,g){var et,ot=new SVGStyleData(it,g),ut=ot.pElem;if(it.ty==="st")et=new SVGStrokeStyleData(this,it,ot);else if(it.ty==="fl")et=new SVGFillStyleData(this,it,ot);else if(it.ty==="gf"||it.ty==="gs"){var ct=it.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;et=new ct(this,it,ot),this.globalData.defs.appendChild(et.gf),et.maskId&&(this.globalData.defs.appendChild(et.ms),this.globalData.defs.appendChild(et.of),ut.setAttribute("mask","url("+getLocationHref()+"#"+et.maskId+")"))}else it.ty==="no"&&(et=new SVGNoStyleData(this,it,ot));return(it.ty==="st"||it.ty==="gs")&&(ut.setAttribute("stroke-linecap",lineCapEnum[it.lc||2]),ut.setAttribute("stroke-linejoin",lineJoinEnum[it.lj||2]),ut.setAttribute("fill-opacity","0"),it.lj===1&&ut.setAttribute("stroke-miterlimit",it.ml)),it.r===2&&ut.setAttribute("fill-rule","evenodd"),it.ln&&ut.setAttribute("id",it.ln),it.cl&&ut.setAttribute("class",it.cl),it.bm&&(ut.style["mix-blend-mode"]=getBlendMode(it.bm)),this.stylesList.push(ot),this.addToAnimatedContents(it,et),et},SVGShapeElement.prototype.createGroupElement=function(it){var g=new ShapeGroupData;return it.ln&&g.gr.setAttribute("id",it.ln),it.cl&&g.gr.setAttribute("class",it.cl),it.bm&&(g.gr.style["mix-blend-mode"]=getBlendMode(it.bm)),g},SVGShapeElement.prototype.createTransformElement=function(it,g){var et=TransformPropertyFactory.getTransformProperty(this,it,this),ot=new SVGTransformData(et,et.o,g);return this.addToAnimatedContents(it,ot),ot},SVGShapeElement.prototype.createShapeElement=function(it,g,et){var ot=4;it.ty==="rc"?ot=5:it.ty==="el"?ot=6:it.ty==="sr"&&(ot=7);var ut=ShapePropertyFactory.getShapeProp(this,it,ot,this),ct=new SVGShapeData(g,et,ut);return this.shapes.push(ct),this.addShapeToModifiers(ct),this.addToAnimatedContents(it,ct),ct},SVGShapeElement.prototype.addToAnimatedContents=function(it,g){for(var et=0,ot=this.animatedContents.length;et<ot;){if(this.animatedContents[et].element===g)return;et+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(it),element:g,data:it})},SVGShapeElement.prototype.setElementStyles=function(it){var g=it.styles,et,ot=this.stylesList.length;for(et=0;et<ot;et+=1)this.stylesList[et].closed||g.push(this.stylesList[et])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(it,g,et,ot,ut,ct,dt){var ft=[].concat(ct),St,kt=it.length-1,Tt,Rt,Ft=[],jt=[],Bt,zt,Ht;for(St=kt;St>=0;St-=1){if(Ht=this.searchProcessedElement(it[St]),Ht?g[St]=et[Ht-1]:it[St]._render=dt,it[St].ty==="fl"||it[St].ty==="st"||it[St].ty==="gf"||it[St].ty==="gs"||it[St].ty==="no")Ht?g[St].style.closed=!1:g[St]=this.createStyleElement(it[St],ut),it[St]._render&&g[St].style.pElem.parentNode!==ot&&ot.appendChild(g[St].style.pElem),Ft.push(g[St].style);else if(it[St].ty==="gr"){if(!Ht)g[St]=this.createGroupElement(it[St]);else for(Rt=g[St].it.length,Tt=0;Tt<Rt;Tt+=1)g[St].prevViewData[Tt]=g[St].it[Tt];this.searchShapes(it[St].it,g[St].it,g[St].prevViewData,g[St].gr,ut+1,ft,dt),it[St]._render&&g[St].gr.parentNode!==ot&&ot.appendChild(g[St].gr)}else it[St].ty==="tr"?(Ht||(g[St]=this.createTransformElement(it[St],ot)),Bt=g[St].transform,ft.push(Bt)):it[St].ty==="sh"||it[St].ty==="rc"||it[St].ty==="el"||it[St].ty==="sr"?(Ht||(g[St]=this.createShapeElement(it[St],ft,ut)),this.setElementStyles(g[St])):it[St].ty==="tm"||it[St].ty==="rd"||it[St].ty==="ms"||it[St].ty==="pb"||it[St].ty==="zz"||it[St].ty==="op"?(Ht?(zt=g[St],zt.closed=!1):(zt=ShapeModifiers.getModifier(it[St].ty),zt.init(this,it[St]),g[St]=zt,this.shapeModifiers.push(zt)),jt.push(zt)):it[St].ty==="rp"&&(Ht?(zt=g[St],zt.closed=!0):(zt=ShapeModifiers.getModifier(it[St].ty),g[St]=zt,zt.init(this,it,St,g),this.shapeModifiers.push(zt),dt=!1),jt.push(zt));this.addProcessedElement(it[St],St+1)}for(kt=Ft.length,St=0;St<kt;St+=1)Ft[St].closed=!0;for(kt=jt.length,St=0;St<kt;St+=1)jt[St].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].reset();for(this.renderShape(),it=0;it<g;it+=1)(this.stylesList[it]._mdf||this._isFirstFrame)&&(this.stylesList[it].msElem&&(this.stylesList[it].msElem.setAttribute("d",this.stylesList[it].d),this.stylesList[it].d="M0 0"+this.stylesList[it].d),this.stylesList[it].pElem.setAttribute("d",this.stylesList[it].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var it,g=this.animatedContents.length,et;for(it=0;it<g;it+=1)et=this.animatedContents[it],(this._isFirstFrame||et.element._isAnimated)&&et.data!==!0&&et.fn(et.data,et.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(it,g,et,ot,ut,ct){this.o=it,this.sw=g,this.sc=et,this.fc=ot,this.m=ut,this.p=ct,this._mdf={o:!0,sw:!!g,sc:!!et,fc:!!ot,m:!0,p:!0}}LetterProps.prototype.update=function(it,g,et,ot,ut,ct){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var dt=!1;return this.o!==it&&(this.o=it,this._mdf.o=!0,dt=!0),this.sw!==g&&(this.sw=g,this._mdf.sw=!0,dt=!0),this.sc!==et&&(this.sc=et,this._mdf.sc=!0,dt=!0),this.fc!==ot&&(this.fc=ot,this._mdf.fc=!0,dt=!0),this.m!==ut&&(this.m=ut,this._mdf.m=!0,dt=!0),ct.length&&(this.p[0]!==ct[0]||this.p[1]!==ct[1]||this.p[4]!==ct[4]||this.p[5]!==ct[5]||this.p[12]!==ct[12]||this.p[13]!==ct[13])&&(this.p=ct,this._mdf.p=!0,dt=!0),dt};function TextProperty(it,g){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,g.d&&g.d.sid&&(g.d=it.globalData.slotManager.getProp(g.d)),this.data=g,this.elem=it,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(it,g){for(var et in g)Object.prototype.hasOwnProperty.call(g,et)&&(it[et]=g[et]);return it},TextProperty.prototype.setCurrentData=function(it){it.__complete||this.completeTextData(it),this.currentData=it,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(it){this.effectsSequence.push(it),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(it){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!it)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var g=this.currentData,et=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var ot,ut=this.effectsSequence.length,ct=it||this.data.d.k[this.keysIndex].s;for(ot=0;ot<ut;ot+=1)et!==this.keysIndex?ct=this.effectsSequence[ot](ct,ct.t):ct=this.effectsSequence[ot](this.currentData,ct.t);g!==ct&&this.setCurrentData(ct),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var it=this.data.d.k,g=this.elem.comp.renderedFrame,et=0,ot=it.length;et<=ot-1&&!(et===ot-1||it[et+1].t>g);)et+=1;return this.keysIndex!==et&&(this.keysIndex=et),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(it){for(var g=[],et=0,ot=it.length,ut,ct,dt=!1,ft=!1,St="";et<ot;)dt=ft,ft=!1,ut=it.charCodeAt(et),St=it.charAt(et),FontManager.isCombinedCharacter(ut)?dt=!0:ut>=55296&&ut<=56319?FontManager.isRegionalFlag(it,et)?St=it.substr(et,14):(ct=it.charCodeAt(et+1),ct>=56320&&ct<=57343&&(FontManager.isModifier(ut,ct)?(St=it.substr(et,2),dt=!0):FontManager.isFlagEmoji(it.substr(et,4))?St=it.substr(et,4):St=it.substr(et,2))):ut>56319?(ct=it.charCodeAt(et+1),FontManager.isVariationSelector(ut)&&(dt=!0)):FontManager.isZeroWidthJoiner(ut)&&(dt=!0,ft=!0),dt?(g[g.length-1]+=St,dt=!1):g.push(St),et+=St.length;return g},TextProperty.prototype.completeTextData=function(it){it.__complete=!0;var g=this.elem.globalData.fontManager,et=this.data,ot=[],ut,ct,dt,ft=0,St,kt=et.m.g,Tt=0,Rt=0,Ft=0,jt=[],Bt=0,zt=0,Ht,Ut,Kt=g.getFontByName(it.f),Yt,er=0,ar=getFontProperties(Kt);it.fWeight=ar.weight,it.fStyle=ar.style,it.finalSize=it.s,it.finalText=this.buildFinalText(it.t),ct=it.finalText.length,it.finalLineHeight=it.lh;var ir=it.tr/1e3*it.finalSize,lr;if(it.sz)for(var cr=!0,vr=it.sz[0],xr=it.sz[1],yr,Sr;cr;){Sr=this.buildFinalText(it.t),yr=0,Bt=0,ct=Sr.length,ir=it.tr/1e3*it.finalSize;var kr=-1;for(ut=0;ut<ct;ut+=1)lr=Sr[ut].charCodeAt(0),dt=!1,Sr[ut]===" "?kr=ut:(lr===13||lr===3)&&(Bt=0,dt=!0,yr+=it.finalLineHeight||it.finalSize*1.2),g.chars?(Yt=g.getCharData(Sr[ut],Kt.fStyle,Kt.fFamily),er=dt?0:Yt.w*it.finalSize/100):er=g.measureText(Sr[ut],it.f,it.finalSize),Bt+er>vr&&Sr[ut]!==" "?(kr===-1?ct+=1:ut=kr,yr+=it.finalLineHeight||it.finalSize*1.2,Sr.splice(ut,kr===ut?1:0,"\r"),kr=-1,Bt=0):(Bt+=er,Bt+=ir);yr+=Kt.ascent*it.finalSize/100,this.canResize&&it.finalSize>this.minimumFontSize&&xr<yr?(it.finalSize-=1,it.finalLineHeight=it.finalSize*it.lh/it.s):(it.finalText=Sr,ct=it.finalText.length,cr=!1)}Bt=-ir,er=0;var Pr=0,Or;for(ut=0;ut<ct;ut+=1)if(dt=!1,Or=it.finalText[ut],lr=Or.charCodeAt(0),lr===13||lr===3?(Pr=0,jt.push(Bt),zt=Bt>zt?Bt:zt,Bt=-2*ir,St="",dt=!0,Ft+=1):St=Or,g.chars?(Yt=g.getCharData(Or,Kt.fStyle,g.getFontByName(it.f).fFamily),er=dt?0:Yt.w*it.finalSize/100):er=g.measureText(St,it.f,it.finalSize),Or===" "?Pr+=er+ir:(Bt+=er+ir+Pr,Pr=0),ot.push({l:er,an:er,add:Tt,n:dt,anIndexes:[],val:St,line:Ft,animatorJustifyOffset:0}),kt==2){if(Tt+=er,St===""||St===" "||ut===ct-1){for((St===""||St===" ")&&(Tt-=er);Rt<=ut;)ot[Rt].an=Tt,ot[Rt].ind=ft,ot[Rt].extra=er,Rt+=1;ft+=1,Tt=0}}else if(kt==3){if(Tt+=er,St===""||ut===ct-1){for(St===""&&(Tt-=er);Rt<=ut;)ot[Rt].an=Tt,ot[Rt].ind=ft,ot[Rt].extra=er,Rt+=1;Tt=0,ft+=1}}else ot[ft].ind=ft,ot[ft].extra=0,ft+=1;if(it.l=ot,zt=Bt>zt?Bt:zt,jt.push(Bt),it.sz)it.boxWidth=it.sz[0],it.justifyOffset=0;else switch(it.boxWidth=zt,it.j){case 1:it.justifyOffset=-it.boxWidth;break;case 2:it.justifyOffset=-it.boxWidth/2;break;default:it.justifyOffset=0}it.lineWidths=jt;var hr=et.a,Tr,mr;Ut=hr.length;var Er,Dr,Cr=[];for(Ht=0;Ht<Ut;Ht+=1){for(Tr=hr[Ht],Tr.a.sc&&(it.strokeColorAnim=!0),Tr.a.sw&&(it.strokeWidthAnim=!0),(Tr.a.fc||Tr.a.fh||Tr.a.fs||Tr.a.fb)&&(it.fillColorAnim=!0),Dr=0,Er=Tr.s.b,ut=0;ut<ct;ut+=1)mr=ot[ut],mr.anIndexes[Ht]=Dr,(Er==1&&mr.val!==""||Er==2&&mr.val!==""&&mr.val!==" "||Er==3&&(mr.n||mr.val==" "||ut==ct-1)||Er==4&&(mr.n||ut==ct-1))&&(Tr.s.rn===1&&Cr.push(Dr),Dr+=1);et.a[Ht].s.totalChars=Dr;var Lr=-1,qr;if(Tr.s.rn===1)for(ut=0;ut<ct;ut+=1)mr=ot[ut],Lr!=mr.anIndexes[Ht]&&(Lr=mr.anIndexes[Ht],qr=Cr.splice(Math.floor(Math.random()*Cr.length),1)[0]),mr.anIndexes[Ht]=qr}it.yOffset=it.finalLineHeight||it.finalSize*1.2,it.ls=it.ls||0,it.ascent=Kt.ascent*it.finalSize/100},TextProperty.prototype.updateDocumentData=function(it,g){g=g===void 0?this.keysIndex:g;var et=this.copyData({},this.data.d.k[g].s);et=this.copyData(et,it),this.data.d.k[g].s=et,this.recalculate(g),this.setCurrentData(et),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(it){var g=this.data.d.k[it].s;g.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(g)},TextProperty.prototype.canResizeFont=function(it){this.canResize=it,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(it){this.minimumFontSize=Math.floor(it)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var it=Math.max,g=Math.min,et=Math.floor;function ot(ct,dt){this._currentTextLength=-1,this.k=!1,this.data=dt,this.elem=ct,this.comp=ct.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(ct),this.s=PropertyFactory.getProp(ct,dt.s||{k:0},0,0,this),"e"in dt?this.e=PropertyFactory.getProp(ct,dt.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(ct,dt.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(ct,dt.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(ct,dt.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(ct,dt.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(ct,dt.a,0,.01,this),this.dynamicProperties.length||this.getValue()}ot.prototype={getMult:function(dt){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var ft=0,St=0,kt=1,Tt=1;this.ne.v>0?ft=this.ne.v/100:St=-this.ne.v/100,this.xe.v>0?kt=1-this.xe.v/100:Tt=1+this.xe.v/100;var Rt=BezierFactory.getBezierEasing(ft,St,kt,Tt).get,Ft=0,jt=this.finalS,Bt=this.finalE,zt=this.data.sh;if(zt===2)Bt===jt?Ft=dt>=Bt?1:0:Ft=it(0,g(.5/(Bt-jt)+(dt-jt)/(Bt-jt),1)),Ft=Rt(Ft);else if(zt===3)Bt===jt?Ft=dt>=Bt?0:1:Ft=1-it(0,g(.5/(Bt-jt)+(dt-jt)/(Bt-jt),1)),Ft=Rt(Ft);else if(zt===4)Bt===jt?Ft=0:(Ft=it(0,g(.5/(Bt-jt)+(dt-jt)/(Bt-jt),1)),Ft<.5?Ft*=2:Ft=1-2*(Ft-.5)),Ft=Rt(Ft);else if(zt===5){if(Bt===jt)Ft=0;else{var Ht=Bt-jt;dt=g(it(0,dt+.5-jt),Bt-jt);var Ut=-Ht/2+dt,Kt=Ht/2;Ft=Math.sqrt(1-Ut*Ut/(Kt*Kt))}Ft=Rt(Ft)}else zt===6?(Bt===jt?Ft=0:(dt=g(it(0,dt+.5-jt),Bt-jt),Ft=(1+Math.cos(Math.PI+Math.PI*2*dt/(Bt-jt)))/2),Ft=Rt(Ft)):(dt>=et(jt)&&(dt-jt<0?Ft=it(0,g(g(Bt,1)-(jt-dt),1)):Ft=it(0,g(Bt-dt,1))),Ft=Rt(Ft));if(this.sm.v!==100){var Yt=this.sm.v*.01;Yt===0&&(Yt=1e-8);var er=.5-Yt*.5;Ft<er?Ft=0:(Ft=(Ft-er)/Yt,Ft>1&&(Ft=1))}return Ft*this.a.v},getValue:function(dt){this.iterateDynamicProperties(),this._mdf=dt||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,dt&&this.data.r===2&&(this.e.v=this._currentTextLength);var ft=this.data.r===2?1:100/this.data.totalChars,St=this.o.v/ft,kt=this.s.v/ft+St,Tt=this.e.v/ft+St;if(kt>Tt){var Rt=kt;kt=Tt,Tt=Rt}this.finalS=kt,this.finalE=Tt}},extendPrototype([DynamicPropertyContainer],ot);function ut(ct,dt,ft){return new ot(ct,dt)}return{getTextSelectorProp:ut}}();function TextAnimatorDataProperty(it,g,et){var ot={propType:!1},ut=PropertyFactory.getProp,ct=g.a;this.a={r:ct.r?ut(it,ct.r,0,degToRads,et):ot,rx:ct.rx?ut(it,ct.rx,0,degToRads,et):ot,ry:ct.ry?ut(it,ct.ry,0,degToRads,et):ot,sk:ct.sk?ut(it,ct.sk,0,degToRads,et):ot,sa:ct.sa?ut(it,ct.sa,0,degToRads,et):ot,s:ct.s?ut(it,ct.s,1,.01,et):ot,a:ct.a?ut(it,ct.a,1,0,et):ot,o:ct.o?ut(it,ct.o,0,.01,et):ot,p:ct.p?ut(it,ct.p,1,0,et):ot,sw:ct.sw?ut(it,ct.sw,0,0,et):ot,sc:ct.sc?ut(it,ct.sc,1,0,et):ot,fc:ct.fc?ut(it,ct.fc,1,0,et):ot,fh:ct.fh?ut(it,ct.fh,0,0,et):ot,fs:ct.fs?ut(it,ct.fs,0,.01,et):ot,fb:ct.fb?ut(it,ct.fb,0,.01,et):ot,t:ct.t?ut(it,ct.t,0,0,et):ot},this.s=TextSelectorProp.getTextSelectorProp(it,g.s,et),this.s.t=g.s.t}function TextAnimatorProperty(it,g,et){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=it,this._renderType=g,this._elem=et,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(et)}TextAnimatorProperty.prototype.searchProperties=function(){var it,g=this._textData.a.length,et,ot=PropertyFactory.getProp;for(it=0;it<g;it+=1)et=this._textData.a[it],this._animatorsData[it]=new TextAnimatorDataProperty(this._elem,et,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:ot(this._elem,this._textData.p.a,0,0,this),f:ot(this._elem,this._textData.p.f,0,0,this),l:ot(this._elem,this._textData.p.l,0,0,this),r:ot(this._elem,this._textData.p.r,0,0,this),p:ot(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=ot(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(it,g){if(this.lettersChangedFlag=g,!(!this._mdf&&!this._isFirstFrame&&!g&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var et=this._moreOptions.alignment.v,ot=this._animatorsData,ut=this._textData,ct=this.mHelper,dt=this._renderType,ft=this.renderedLetters.length,St,kt,Tt,Rt,Ft=it.l,jt,Bt,zt,Ht,Ut,Kt,Yt,er,ar,ir,lr,cr,vr,xr,yr;if(this._hasMaskedPath){if(yr=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Sr=yr.v;this._pathData.r.v&&(Sr=Sr.reverse()),jt={tLength:0,segments:[]},Rt=Sr._length-1;var kr;for(cr=0,Tt=0;Tt<Rt;Tt+=1)kr=bez.buildBezierData(Sr.v[Tt],Sr.v[Tt+1],[Sr.o[Tt][0]-Sr.v[Tt][0],Sr.o[Tt][1]-Sr.v[Tt][1]],[Sr.i[Tt+1][0]-Sr.v[Tt+1][0],Sr.i[Tt+1][1]-Sr.v[Tt+1][1]]),jt.tLength+=kr.segmentLength,jt.segments.push(kr),cr+=kr.segmentLength;Tt=Rt,yr.v.c&&(kr=bez.buildBezierData(Sr.v[Tt],Sr.v[0],[Sr.o[Tt][0]-Sr.v[Tt][0],Sr.o[Tt][1]-Sr.v[Tt][1]],[Sr.i[0][0]-Sr.v[0][0],Sr.i[0][1]-Sr.v[0][1]]),jt.tLength+=kr.segmentLength,jt.segments.push(kr),cr+=kr.segmentLength),this._pathData.pi=jt}if(jt=this._pathData.pi,Bt=this._pathData.f.v,Yt=0,Kt=1,Ht=0,Ut=!0,ir=jt.segments,Bt<0&&yr.v.c)for(jt.tLength<Math.abs(Bt)&&(Bt=-Math.abs(Bt)%jt.tLength),Yt=ir.length-1,ar=ir[Yt].points,Kt=ar.length-1;Bt<0;)Bt+=ar[Kt].partialLength,Kt-=1,Kt<0&&(Yt-=1,ar=ir[Yt].points,Kt=ar.length-1);ar=ir[Yt].points,er=ar[Kt-1],zt=ar[Kt],lr=zt.partialLength}Rt=Ft.length,St=0,kt=0;var Pr=it.finalSize*1.2*.714,Or=!0,hr,Tr,mr,Er,Dr;Er=ot.length;var Cr,Lr=-1,qr,sn,an,tn=Bt,ln=Yt,yn=Kt,pn=-1,En,On,Xn,Un,Ln,ns,gs,Es,wn="",mn=this.defaultPropsArray,Dn;if(it.j===2||it.j===1){var Tn=0,An=0,$n=it.j===2?-.5:-1,qn=0,Bn=!0;for(Tt=0;Tt<Rt;Tt+=1)if(Ft[Tt].n){for(Tn&&(Tn+=An);qn<Tt;)Ft[qn].animatorJustifyOffset=Tn,qn+=1;Tn=0,Bn=!0}else{for(mr=0;mr<Er;mr+=1)hr=ot[mr].a,hr.t.propType&&(Bn&&it.j===2&&(An+=hr.t.v*$n),Tr=ot[mr].s,Cr=Tr.getMult(Ft[Tt].anIndexes[mr],ut.a[mr].s.totalChars),Cr.length?Tn+=hr.t.v*Cr[0]*$n:Tn+=hr.t.v*Cr*$n);Bn=!1}for(Tn&&(Tn+=An);qn<Tt;)Ft[qn].animatorJustifyOffset=Tn,qn+=1}for(Tt=0;Tt<Rt;Tt+=1){if(ct.reset(),En=1,Ft[Tt].n)St=0,kt+=it.yOffset,kt+=Or?1:0,Bt=tn,Or=!1,this._hasMaskedPath&&(Yt=ln,Kt=yn,ar=ir[Yt].points,er=ar[Kt-1],zt=ar[Kt],lr=zt.partialLength,Ht=0),wn="",Es="",ns="",Dn="",mn=this.defaultPropsArray;else{if(this._hasMaskedPath){if(pn!==Ft[Tt].line){switch(it.j){case 1:Bt+=cr-it.lineWidths[Ft[Tt].line];break;case 2:Bt+=(cr-it.lineWidths[Ft[Tt].line])/2;break}pn=Ft[Tt].line}Lr!==Ft[Tt].ind&&(Ft[Lr]&&(Bt+=Ft[Lr].extra),Bt+=Ft[Tt].an/2,Lr=Ft[Tt].ind),Bt+=et[0]*Ft[Tt].an*.005;var $t=0;for(mr=0;mr<Er;mr+=1)hr=ot[mr].a,hr.p.propType&&(Tr=ot[mr].s,Cr=Tr.getMult(Ft[Tt].anIndexes[mr],ut.a[mr].s.totalChars),Cr.length?$t+=hr.p.v[0]*Cr[0]:$t+=hr.p.v[0]*Cr),hr.a.propType&&(Tr=ot[mr].s,Cr=Tr.getMult(Ft[Tt].anIndexes[mr],ut.a[mr].s.totalChars),Cr.length?$t+=hr.a.v[0]*Cr[0]:$t+=hr.a.v[0]*Cr);for(Ut=!0,this._pathData.a.v&&(Bt=Ft[0].an*.5+(cr-this._pathData.f.v-Ft[0].an*.5-Ft[Ft.length-1].an*.5)*Lr/(Rt-1),Bt+=this._pathData.f.v);Ut;)Ht+lr>=Bt+$t||!ar?(vr=(Bt+$t-Ht)/zt.partialLength,sn=er.point[0]+(zt.point[0]-er.point[0])*vr,an=er.point[1]+(zt.point[1]-er.point[1])*vr,ct.translate(-et[0]*Ft[Tt].an*.005,-(et[1]*Pr)*.01),Ut=!1):ar&&(Ht+=zt.partialLength,Kt+=1,Kt>=ar.length&&(Kt=0,Yt+=1,ir[Yt]?ar=ir[Yt].points:yr.v.c?(Kt=0,Yt=0,ar=ir[Yt].points):(Ht-=zt.partialLength,ar=null)),ar&&(er=zt,zt=ar[Kt],lr=zt.partialLength));qr=Ft[Tt].an/2-Ft[Tt].add,ct.translate(-qr,0,0)}else qr=Ft[Tt].an/2-Ft[Tt].add,ct.translate(-qr,0,0),ct.translate(-et[0]*Ft[Tt].an*.005,-et[1]*Pr*.01,0);for(mr=0;mr<Er;mr+=1)hr=ot[mr].a,hr.t.propType&&(Tr=ot[mr].s,Cr=Tr.getMult(Ft[Tt].anIndexes[mr],ut.a[mr].s.totalChars),(St!==0||it.j!==0)&&(this._hasMaskedPath?Cr.length?Bt+=hr.t.v*Cr[0]:Bt+=hr.t.v*Cr:Cr.length?St+=hr.t.v*Cr[0]:St+=hr.t.v*Cr));for(it.strokeWidthAnim&&(Xn=it.sw||0),it.strokeColorAnim&&(it.sc?On=[it.sc[0],it.sc[1],it.sc[2]]:On=[0,0,0]),it.fillColorAnim&&it.fc&&(Un=[it.fc[0],it.fc[1],it.fc[2]]),mr=0;mr<Er;mr+=1)hr=ot[mr].a,hr.a.propType&&(Tr=ot[mr].s,Cr=Tr.getMult(Ft[Tt].anIndexes[mr],ut.a[mr].s.totalChars),Cr.length?ct.translate(-hr.a.v[0]*Cr[0],-hr.a.v[1]*Cr[1],hr.a.v[2]*Cr[2]):ct.translate(-hr.a.v[0]*Cr,-hr.a.v[1]*Cr,hr.a.v[2]*Cr));for(mr=0;mr<Er;mr+=1)hr=ot[mr].a,hr.s.propType&&(Tr=ot[mr].s,Cr=Tr.getMult(Ft[Tt].anIndexes[mr],ut.a[mr].s.totalChars),Cr.length?ct.scale(1+(hr.s.v[0]-1)*Cr[0],1+(hr.s.v[1]-1)*Cr[1],1):ct.scale(1+(hr.s.v[0]-1)*Cr,1+(hr.s.v[1]-1)*Cr,1));for(mr=0;mr<Er;mr+=1){if(hr=ot[mr].a,Tr=ot[mr].s,Cr=Tr.getMult(Ft[Tt].anIndexes[mr],ut.a[mr].s.totalChars),hr.sk.propType&&(Cr.length?ct.skewFromAxis(-hr.sk.v*Cr[0],hr.sa.v*Cr[1]):ct.skewFromAxis(-hr.sk.v*Cr,hr.sa.v*Cr)),hr.r.propType&&(Cr.length?ct.rotateZ(-hr.r.v*Cr[2]):ct.rotateZ(-hr.r.v*Cr)),hr.ry.propType&&(Cr.length?ct.rotateY(hr.ry.v*Cr[1]):ct.rotateY(hr.ry.v*Cr)),hr.rx.propType&&(Cr.length?ct.rotateX(hr.rx.v*Cr[0]):ct.rotateX(hr.rx.v*Cr)),hr.o.propType&&(Cr.length?En+=(hr.o.v*Cr[0]-En)*Cr[0]:En+=(hr.o.v*Cr-En)*Cr),it.strokeWidthAnim&&hr.sw.propType&&(Cr.length?Xn+=hr.sw.v*Cr[0]:Xn+=hr.sw.v*Cr),it.strokeColorAnim&&hr.sc.propType)for(Ln=0;Ln<3;Ln+=1)Cr.length?On[Ln]+=(hr.sc.v[Ln]-On[Ln])*Cr[0]:On[Ln]+=(hr.sc.v[Ln]-On[Ln])*Cr;if(it.fillColorAnim&&it.fc){if(hr.fc.propType)for(Ln=0;Ln<3;Ln+=1)Cr.length?Un[Ln]+=(hr.fc.v[Ln]-Un[Ln])*Cr[0]:Un[Ln]+=(hr.fc.v[Ln]-Un[Ln])*Cr;hr.fh.propType&&(Cr.length?Un=addHueToRGB(Un,hr.fh.v*Cr[0]):Un=addHueToRGB(Un,hr.fh.v*Cr)),hr.fs.propType&&(Cr.length?Un=addSaturationToRGB(Un,hr.fs.v*Cr[0]):Un=addSaturationToRGB(Un,hr.fs.v*Cr)),hr.fb.propType&&(Cr.length?Un=addBrightnessToRGB(Un,hr.fb.v*Cr[0]):Un=addBrightnessToRGB(Un,hr.fb.v*Cr))}}for(mr=0;mr<Er;mr+=1)hr=ot[mr].a,hr.p.propType&&(Tr=ot[mr].s,Cr=Tr.getMult(Ft[Tt].anIndexes[mr],ut.a[mr].s.totalChars),this._hasMaskedPath?Cr.length?ct.translate(0,hr.p.v[1]*Cr[0],-hr.p.v[2]*Cr[1]):ct.translate(0,hr.p.v[1]*Cr,-hr.p.v[2]*Cr):Cr.length?ct.translate(hr.p.v[0]*Cr[0],hr.p.v[1]*Cr[1],-hr.p.v[2]*Cr[2]):ct.translate(hr.p.v[0]*Cr,hr.p.v[1]*Cr,-hr.p.v[2]*Cr));if(it.strokeWidthAnim&&(ns=Xn<0?0:Xn),it.strokeColorAnim&&(gs="rgb("+Math.round(On[0]*255)+","+Math.round(On[1]*255)+","+Math.round(On[2]*255)+")"),it.fillColorAnim&&it.fc&&(Es="rgb("+Math.round(Un[0]*255)+","+Math.round(Un[1]*255)+","+Math.round(Un[2]*255)+")"),this._hasMaskedPath){if(ct.translate(0,-it.ls),ct.translate(0,et[1]*Pr*.01+kt,0),this._pathData.p.v){xr=(zt.point[1]-er.point[1])/(zt.point[0]-er.point[0]);var Zt=Math.atan(xr)*180/Math.PI;zt.point[0]<er.point[0]&&(Zt+=180),ct.rotate(-Zt*Math.PI/180)}ct.translate(sn,an,0),Bt-=et[0]*Ft[Tt].an*.005,Ft[Tt+1]&&Lr!==Ft[Tt+1].ind&&(Bt+=Ft[Tt].an/2,Bt+=it.tr*.001*it.finalSize)}else{switch(ct.translate(St,kt,0),it.ps&&ct.translate(it.ps[0],it.ps[1]+it.ascent,0),it.j){case 1:ct.translate(Ft[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[Ft[Tt].line]),0,0);break;case 2:ct.translate(Ft[Tt].animatorJustifyOffset+it.justifyOffset+(it.boxWidth-it.lineWidths[Ft[Tt].line])/2,0,0);break}ct.translate(0,-it.ls),ct.translate(qr,0,0),ct.translate(et[0]*Ft[Tt].an*.005,et[1]*Pr*.01,0),St+=Ft[Tt].l+it.tr*.001*it.finalSize}dt==="html"?wn=ct.toCSS():dt==="svg"?wn=ct.to2dCSS():mn=[ct.props[0],ct.props[1],ct.props[2],ct.props[3],ct.props[4],ct.props[5],ct.props[6],ct.props[7],ct.props[8],ct.props[9],ct.props[10],ct.props[11],ct.props[12],ct.props[13],ct.props[14],ct.props[15]],Dn=En}ft<=Tt?(Dr=new LetterProps(Dn,ns,gs,Es,wn,mn),this.renderedLetters.push(Dr),ft+=1,this.lettersChangedFlag=!0):(Dr=this.renderedLetters[Tt],this.lettersChangedFlag=Dr.update(Dn,ns,gs,Es,wn,mn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(it,g,et){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(it,g,et),this.textProperty=new TextProperty(this,it.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(it.t,this.renderType,this),this.initTransform(it,g,et),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(it){this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange)},ITextElement.prototype.createPathShape=function(it,g){var et,ot=g.length,ut,ct="";for(et=0;et<ot;et+=1)g[et].ty==="sh"&&(ut=g[et].ks.k,ct+=buildShapeString(ut,ut.i.length,!0,it));return ct},ITextElement.prototype.updateDocumentData=function(it,g){this.textProperty.updateDocumentData(it,g)},ITextElement.prototype.canResizeFont=function(it){this.textProperty.canResizeFont(it)},ITextElement.prototype.setMinimumFontSize=function(it){this.textProperty.setMinimumFontSize(it)},ITextElement.prototype.applyTextPropertiesToMatrix=function(it,g,et,ot,ut){switch(it.ps&&g.translate(it.ps[0],it.ps[1]+it.ascent,0),g.translate(0,-it.ls,0),it.j){case 1:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et]),0,0);break;case 2:g.translate(it.justifyOffset+(it.boxWidth-it.lineWidths[et])/2,0,0);break}g.translate(ot,ut,0)},ITextElement.prototype.buildColor=function(it){return"rgb("+Math.round(it[0]*255)+","+Math.round(it[1]*255)+","+Math.round(it[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(it,g,et){this.textSpans=[],this.renderType="svg",this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(it){for(var g=0,et=it.length,ot=[],ut="";g<et;)it[g]===String.fromCharCode(13)||it[g]===String.fromCharCode(3)?(ot.push(ut),ut=""):ut+=it[g],g+=1;return ot.push(ut),ot},SVGTextLottieElement.prototype.buildShapeData=function(it,g){if(it.shapes&&it.shapes.length){var et=it.shapes[0];if(et.it){var ot=et.it[et.it.length-1];ot.s&&(ot.s.k[0]=g,ot.s.k[1]=g)}}return it},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var it,g,et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et?et.l.length:0),et.fc?this.layerElement.setAttribute("fill",this.buildColor(et.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),et.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(et.sc)),this.layerElement.setAttribute("stroke-width",et.sw)),this.layerElement.setAttribute("font-size",et.finalSize);var ot=this.globalData.fontManager.getFontByName(et.f);if(ot.fClass)this.layerElement.setAttribute("class",ot.fClass);else{this.layerElement.setAttribute("font-family",ot.fFamily);var ut=et.fWeight,ct=et.fStyle;this.layerElement.setAttribute("font-style",ct),this.layerElement.setAttribute("font-weight",ut)}this.layerElement.setAttribute("aria-label",et.t);var dt=et.l||[],ft=!!this.globalData.fontManager.chars;g=dt.length;var St,kt=this.mHelper,Tt="",Rt=this.data.singleShape,Ft=0,jt=0,Bt=!0,zt=et.tr*.001*et.finalSize;if(Rt&&!ft&&!et.sz){var Ht=this.textContainer,Ut="start";switch(et.j){case 1:Ut="end";break;case 2:Ut="middle";break;default:Ut="start";break}Ht.setAttribute("text-anchor",Ut),Ht.setAttribute("letter-spacing",zt);var Kt=this.buildTextContents(et.finalText);for(g=Kt.length,jt=et.ps?et.ps[1]+et.ascent:0,it=0;it<g;it+=1)St=this.textSpans[it].span||createNS("tspan"),St.textContent=Kt[it],St.setAttribute("x",0),St.setAttribute("y",jt),St.style.display="inherit",Ht.appendChild(St),this.textSpans[it]||(this.textSpans[it]={span:null,glyph:null}),this.textSpans[it].span=St,jt+=et.finalLineHeight;this.layerElement.appendChild(Ht)}else{var Yt=this.textSpans.length,er;for(it=0;it<g;it+=1){if(this.textSpans[it]||(this.textSpans[it]={span:null,childSpan:null,glyph:null}),!ft||!Rt||it===0){if(St=Yt>it?this.textSpans[it].span:createNS(ft?"g":"text"),Yt<=it){if(St.setAttribute("stroke-linecap","butt"),St.setAttribute("stroke-linejoin","round"),St.setAttribute("stroke-miterlimit","4"),this.textSpans[it].span=St,ft){var ar=createNS("g");St.appendChild(ar),this.textSpans[it].childSpan=ar}this.textSpans[it].span=St,this.layerElement.appendChild(St)}St.style.display="inherit"}if(kt.reset(),Rt&&(dt[it].n&&(Ft=-zt,jt+=et.yOffset,jt+=Bt?1:0,Bt=!1),this.applyTextPropertiesToMatrix(et,kt,dt[it].line,Ft,jt),Ft+=dt[it].l||0,Ft+=zt),ft){er=this.globalData.fontManager.getCharData(et.finalText[it],ot.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily);var ir;if(er.t===1)ir=new SVGCompElement(er.data,this.globalData,this);else{var lr=emptyShapeData;er.data&&er.data.shapes&&(lr=this.buildShapeData(er.data,et.finalSize)),ir=new SVGShapeElement(lr,this.globalData,this)}if(this.textSpans[it].glyph){var cr=this.textSpans[it].glyph;this.textSpans[it].childSpan.removeChild(cr.layerElement),cr.destroy()}this.textSpans[it].glyph=ir,ir._debug=!0,ir.prepareFrame(0),ir.renderFrame(),this.textSpans[it].childSpan.appendChild(ir.layerElement),er.t===1&&this.textSpans[it].childSpan.setAttribute("transform","scale("+et.finalSize/100+","+et.finalSize/100+")")}else Rt&&St.setAttribute("transform","translate("+kt.props[12]+","+kt.props[13]+")"),St.textContent=dt[it].val,St.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Rt&&St&&St.setAttribute("d",Tt)}for(;it<this.textSpans.length;)this.textSpans[it].span.style.display="none",it+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var it=this.layerElement.getBBox();this.bbox={top:it.y,left:it.x,width:it.width,height:it.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var it,g=this.textSpans.length,et;for(this.renderedFrame=this.comp.renderedFrame,it=0;it<g;it+=1)et=this.textSpans[it].glyph,et&&(et.prepareFrame(this.comp.renderedFrame-this.data.st),et._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var it,g,et=this.textAnimator.renderedLetters,ot=this.textProperty.currentData.l;g=ot.length;var ut,ct,dt;for(it=0;it<g;it+=1)ot[it].n||(ut=et[it],ct=this.textSpans[it].span,dt=this.textSpans[it].glyph,dt&&dt.renderFrame(),ut._mdf.m&&ct.setAttribute("transform",ut.m),ut._mdf.o&&ct.setAttribute("opacity",ut.o),ut._mdf.sw&&ct.setAttribute("stroke-width",ut.sw),ut._mdf.sc&&ct.setAttribute("stroke",ut.sc),ut._mdf.fc&&ct.setAttribute("fill",ut.fc))}};function ISolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var it=createNS("rect");it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.layerElement.appendChild(it)};function NullElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initFrame(),this.initTransform(it,g,et),this.initHierarchy()}NullElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(it){return new NullElement(it,this.globalData,this)},SVGRendererBase.prototype.createShape=function(it){return new SVGShapeElement(it,this.globalData,this)},SVGRendererBase.prototype.createText=function(it){return new SVGTextLottieElement(it,this.globalData,this)},SVGRendererBase.prototype.createImage=function(it){return new IImageElement(it,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(it){return new ISolidElement(it,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(it){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+it.w+" "+it.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",it.w),this.svgElement.setAttribute("height",it.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var g=this.globalData.defs;this.setupGlobalData(it,g),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=it;var et=createNS("clipPath"),ot=createNS("rect");ot.setAttribute("width",it.w),ot.setAttribute("height",it.h),ot.setAttribute("x",0),ot.setAttribute("y",0);var ut=createElementID();et.setAttribute("id",ut),et.appendChild(ot),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ut+")"),g.appendChild(et),this.layers=it.layers,this.elements=createSizedArray(it.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(it){var g=0,et=this.layers.length;for(g=0;g<et;g+=1)if(this.layers[g].ind===it)return g;return-1},SVGRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){g[it]=!0;var et=this.createItem(this.layers[it]);if(g[it]=et,getExpressionsPlugin()&&(this.layers[it].ty===0&&this.globalData.projectInterface.registerComposition(et),et.initExpressions()),this.appendElementInPos(et,it),this.layers[it].tt){var ot="tp"in this.layers[it]?this.findIndexByInd(this.layers[it].tp):it-1;if(ot===-1)return;if(!this.elements[ot]||this.elements[ot]===!0)this.buildItem(ot),this.addPendingElement(et);else{var ut=g[ot],ct=ut.getMatte(this.layers[it].tt);et.setMatte(ct)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();if(it.checkParenting(),it.data.tt)for(var g=0,et=this.elements.length;g<et;){if(this.elements[g]===it){var ot="tp"in it.data?this.findIndexByInd(it.data.tp):g-1,ut=this.elements[ot],ct=ut.getMatte(this.layers[g].tt);it.setMatte(ct);break}g+=1}}},SVGRendererBase.prototype.renderFrame=function(it){if(!(this.renderedFrame===it||this.destroyed)){it===null?it=this.renderedFrame:this.renderedFrame=it,this.globalData.frameNum=it,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=it,this.globalData._mdf=!1;var g,et=this.layers.length;for(this.completeLayers||this.checkLayers(it),g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].prepareFrame(it-this.layers[g].st);if(this.globalData._mdf)for(g=0;g<et;g+=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){for(var ot=0,ut;ot<g;)this.elements[ot]&&this.elements[ot]!==!0&&this.elements[ot].getBaseElement()&&(ut=this.elements[ot].getBaseElement()),ot+=1;ut?this.layerElement.insertBefore(et,ut):this.layerElement.appendChild(et)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initTransform(it,g,et),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!g.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(it){if(this._mdf=!1,this.prepareRenderableFrame(it),this.prepareProperties(it,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=it/this.data.sr;else{var g=this.tm.v;g===this.data.op&&(g=this.data.op-1),this.renderedFrame=g}var et,ot=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&(this.elements[et].prepareFrame(this.renderedFrame-this.layers[et].st),this.elements[et]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)(this.completeLayers||this.elements[it])&&this.elements[it].renderFrame()},ICompElement.prototype.setElements=function(it){this.elements=it},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var it,g=this.layers.length;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(it,g,et){this.layers=it.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function SVGRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var et="";if(g&&g.title){var ot=createNS("title"),ut=createElementID();ot.setAttribute("id",ut),ot.textContent=g.title,this.svgElement.appendChild(ot),et+=ut}if(g&&g.description){var ct=createNS("desc"),dt=createElementID();ct.setAttribute("id",dt),ct.textContent=g.description,this.svgElement.appendChild(ct),et+=" "+dt}et&&this.svgElement.setAttribute("aria-labelledby",et);var ft=createNS("defs");this.svgElement.appendChild(ft);var St=createNS("g");this.svgElement.appendChild(St),this.layerElement=St,this.renderConfig={preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",progressiveLoad:g&&g.progressiveLoad||!1,hideOnTransparent:!(g&&g.hideOnTransparent===!1),viewBoxOnly:g&&g.viewBoxOnly||!1,viewBoxSize:g&&g.viewBoxSize||!1,className:g&&g.className||"",id:g&&g.id||"",focusable:g&&g.focusable,filterSize:{width:g&&g.filterSize&&g.filterSize.width||"100%",height:g&&g.filterSize&&g.filterSize.height||"100%",x:g&&g.filterSize&&g.filterSize.x||"0%",y:g&&g.filterSize&&g.filterSize.y||"0%"},width:g&&g.width,height:g&&g.height,runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:ft,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(it){return new SVGCompElement(it,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(g){var et,ot=g.length,ut="_";for(et=0;et<ot;et+=1)ut+=g[et].transform.key+"_";var ct=this.sequences[ut];return ct||(ct={transforms:[].concat(g),finalTransform:new Matrix,_mdf:!1},this.sequences[ut]=ct,this.sequenceList.push(ct)),ct},processSequence:function(g,et){for(var ot=0,ut=g.transforms.length,ct=et;ot<ut&&!et;){if(g.transforms[ot].transform.mProps._mdf){ct=!0;break}ot+=1}if(ct)for(g.finalTransform.reset(),ot=ut-1;ot>=0;ot-=1)g.finalTransform.multiply(g.transforms[ot].transform.mProps.v);g._mdf=ct},processSequences:function(g){var et,ot=this.sequenceList.length;for(et=0;et<ot;et+=1)this.processSequence(this.sequenceList[et],g)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var g="__lottie_element_luma_buffer",et=null,ot=null,ut=null;function ct(){var St=createNS("svg"),kt=createNS("filter"),Tt=createNS("feColorMatrix");return kt.setAttribute("id",g),Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),kt.appendChild(Tt),St.appendChild(kt),St.setAttribute("id",g+"_svg"),featureSupport.svgLumaHidden&&(St.style.display="none"),St}function dt(){et||(ut=ct(),document.body.appendChild(ut),et=createTag("canvas"),ot=et.getContext("2d"),ot.filter="url(#"+g+")",ot.fillStyle="rgba(0,0,0,0)",ot.fillRect(0,0,1,1))}function ft(St){return et||dt(),et.width=St.width,et.height=St.height,ot.filter="url(#"+g+")",et}return{load:dt,get:ft}};function createCanvas(it,g){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(it,g);var et=createTag("canvas");return et.width=it,et.height=g,et}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(it){var g,et=it.data.ef?it.data.ef.length:0;this.filters=[];var ot;for(g=0;g<et;g+=1){ot=null;var ut=it.data.ef[g].ty;if(registeredEffects[ut]){var ct=registeredEffects[ut].effect;ot=new ct(it.effectsManager.effectElements[g],it)}ot&&this.filters.push(ot)}this.filters.length&&it.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(it){var g,et=this.filters.length;for(g=0;g<et;g+=1)this.filters[g].renderFrame(it)},CVEffects.prototype.getEffects=function(it){var g,et=this.filters.length,ot=[];for(g=0;g<et;g+=1)this.filters[g].type===it&&ot.push(this.filters[g]);return ot};function registerEffect(it,g){registeredEffects[it]={effect:g}}function CVMaskElement(it,g){this.data=it,this.element=g,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var et,ot=this.masksProperties.length,ut=!1;for(et=0;et<ot;et+=1)this.masksProperties[et].mode!=="n"&&(ut=!0),this.viewData[et]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[et],3);this.hasMasks=ut,ut&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var it=this.element.finalTransform.mat,g=this.element.canvasContext,et,ot=this.masksProperties.length,ut,ct,dt;for(g.beginPath(),et=0;et<ot;et+=1)if(this.masksProperties[et].mode!=="n"){this.masksProperties[et].inv&&(g.moveTo(0,0),g.lineTo(this.element.globalData.compSize.w,0),g.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),g.lineTo(0,this.element.globalData.compSize.h),g.lineTo(0,0)),dt=this.viewData[et].v,ut=it.applyToPointArray(dt.v[0][0],dt.v[0][1],0),g.moveTo(ut[0],ut[1]);var ft,St=dt._length;for(ft=1;ft<St;ft+=1)ct=it.applyToTriplePoints(dt.o[ft-1],dt.i[ft],dt.v[ft]),g.bezierCurveTo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5]);ct=it.applyToTriplePoints(dt.o[ft-1],dt.i[0],dt.v[0]),g.bezierCurveTo(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5])}this.element.globalData.renderer.save(!0),g.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var g=this.globalData.canvasContext,et=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(et);var ot=assetLoader.createCanvas(g.canvas.width,g.canvas.height);this.buffers.push(ot),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var g=this.globalData;if(g.blendMode!==this.data.bm){g.blendMode=this.data.bm;var et=getBlendMode(this.data.bm);g.canvasContext.globalCompositeOperation=et}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(g){g.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var g=this.buffers[0],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var g=this.buffers[1],et=g.getContext("2d");this.clearCanvas(et),et.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var ot=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(ot.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var ut=assetLoader.getLumaCanvas(this.canvasContext.canvas),ct=ut.getContext("2d");ct.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(ut,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(g,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(g){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!g)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var et=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(et),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(et),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(it,g,et,ot){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ut=4;g.ty==="rc"?ut=5:g.ty==="el"?ut=6:g.ty==="sr"&&(ut=7),this.sh=ShapePropertyFactory.getShapeProp(it,g,ut,it);var ct,dt=et.length,ft;for(ct=0;ct<dt;ct+=1)et[ct].closed||(ft={transforms:ot.addTransformSequence(et[ct].transforms),trNodes:[]},this.styledShapes.push(ft),et[ct].elements.push(ft))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(it,g){var et={data:it,type:it.ty,preTransforms:this.transformsManager.addTransformSequence(g),transforms:[],elements:[],closed:it.hd===!0},ot={};if(it.ty==="fl"||it.ty==="st"?(ot.c=PropertyFactory.getProp(this,it.c,1,255,this),ot.c.k||(et.co="rgb("+bmFloor(ot.c.v[0])+","+bmFloor(ot.c.v[1])+","+bmFloor(ot.c.v[2])+")")):(it.ty==="gf"||it.ty==="gs")&&(ot.s=PropertyFactory.getProp(this,it.s,1,null,this),ot.e=PropertyFactory.getProp(this,it.e,1,null,this),ot.h=PropertyFactory.getProp(this,it.h||{k:0},0,.01,this),ot.a=PropertyFactory.getProp(this,it.a||{k:0},0,degToRads,this),ot.g=new GradientProperty(this,it.g,this)),ot.o=PropertyFactory.getProp(this,it.o,0,.01,this),it.ty==="st"||it.ty==="gs"){if(et.lc=lineCapEnum[it.lc||2],et.lj=lineJoinEnum[it.lj||2],it.lj==1&&(et.ml=it.ml),ot.w=PropertyFactory.getProp(this,it.w,0,null,this),ot.w.k||(et.wi=ot.w.v),it.d){var ut=new DashProperty(this,it.d,"canvas",this);ot.d=ut,ot.d.k||(et.da=ot.d.dashArray,et.do=ot.d.dashoffset[0])}}else et.r=it.r===2?"evenodd":"nonzero";return this.stylesList.push(et),ot.style=et,ot},CVShapeElement.prototype.createGroupElement=function(){var it={it:[],prevViewData:[]};return it},CVShapeElement.prototype.createTransformElement=function(it){var g={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,it.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,it,this)}};return g},CVShapeElement.prototype.createShapeElement=function(it){var g=new CVShapeData(this,it,this.stylesList,this.transformsManager);return this.shapes.push(g),this.addShapeToModifiers(g),g},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var it,g=this.itemsData.length;for(it=0;it<g;it+=1)this.prevViewData[it]=this.itemsData[it];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),g=this.dynamicProperties.length,it=0;it<g;it+=1)this.dynamicProperties[it].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(it){var g,et=this.stylesList.length;for(g=0;g<et;g+=1)this.stylesList[g].closed||this.stylesList[g].transforms.push(it)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var it,g=this.stylesList.length;for(it=0;it<g;it+=1)this.stylesList[it].closed||this.stylesList[it].transforms.pop()},CVShapeElement.prototype.closeStyles=function(it){var g,et=it.length;for(g=0;g<et;g+=1)it[g].closed=!0},CVShapeElement.prototype.searchShapes=function(it,g,et,ot,ut){var ct,dt=it.length-1,ft,St,kt=[],Tt=[],Rt,Ft,jt,Bt=[].concat(ut);for(ct=dt;ct>=0;ct-=1){if(Rt=this.searchProcessedElement(it[ct]),Rt?g[ct]=et[Rt-1]:it[ct]._shouldRender=ot,it[ct].ty==="fl"||it[ct].ty==="st"||it[ct].ty==="gf"||it[ct].ty==="gs")Rt?g[ct].style.closed=!1:g[ct]=this.createStyleElement(it[ct],Bt),kt.push(g[ct].style);else if(it[ct].ty==="gr"){if(!Rt)g[ct]=this.createGroupElement(it[ct]);else for(St=g[ct].it.length,ft=0;ft<St;ft+=1)g[ct].prevViewData[ft]=g[ct].it[ft];this.searchShapes(it[ct].it,g[ct].it,g[ct].prevViewData,ot,Bt)}else it[ct].ty==="tr"?(Rt||(jt=this.createTransformElement(it[ct]),g[ct]=jt),Bt.push(g[ct]),this.addTransformToStyleList(g[ct])):it[ct].ty==="sh"||it[ct].ty==="rc"||it[ct].ty==="el"||it[ct].ty==="sr"?Rt||(g[ct]=this.createShapeElement(it[ct])):it[ct].ty==="tm"||it[ct].ty==="rd"||it[ct].ty==="pb"||it[ct].ty==="zz"||it[ct].ty==="op"?(Rt?(Ft=g[ct],Ft.closed=!1):(Ft=ShapeModifiers.getModifier(it[ct].ty),Ft.init(this,it[ct]),g[ct]=Ft,this.shapeModifiers.push(Ft)),Tt.push(Ft)):it[ct].ty==="rp"&&(Rt?(Ft=g[ct],Ft.closed=!0):(Ft=ShapeModifiers.getModifier(it[ct].ty),g[ct]=Ft,Ft.init(this,it,ct,g),this.shapeModifiers.push(Ft),ot=!1),Tt.push(Ft));this.addProcessedElement(it[ct],ct+1)}for(this.removeTransformFromStyleList(),this.closeStyles(kt),dt=Tt.length,ct=0;ct<dt;ct+=1)Tt[ct].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(it,g){(it._opMdf||g.op._mdf||this._isFirstFrame)&&(g.opacity=it.opacity,g.opacity*=g.op.v,g._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var it,g=this.stylesList.length,et,ot,ut,ct,dt,ft,St=this.globalData.renderer,kt=this.globalData.canvasContext,Tt,Rt;for(it=0;it<g;it+=1)if(Rt=this.stylesList[it],Tt=Rt.type,!((Tt==="st"||Tt==="gs")&&Rt.wi===0||!Rt.data._shouldRender||Rt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(St.save(),dt=Rt.elements,Tt==="st"||Tt==="gs"?(St.ctxStrokeStyle(Tt==="st"?Rt.co:Rt.grd),St.ctxLineWidth(Rt.wi),St.ctxLineCap(Rt.lc),St.ctxLineJoin(Rt.lj),St.ctxMiterLimit(Rt.ml||0)):St.ctxFillStyle(Tt==="fl"?Rt.co:Rt.grd),St.ctxOpacity(Rt.coOp),Tt!=="st"&&Tt!=="gs"&&kt.beginPath(),St.ctxTransform(Rt.preTransforms.finalTransform.props),ot=dt.length,et=0;et<ot;et+=1){for((Tt==="st"||Tt==="gs")&&(kt.beginPath(),Rt.da&&(kt.setLineDash(Rt.da),kt.lineDashOffset=Rt.do)),ft=dt[et].trNodes,ct=ft.length,ut=0;ut<ct;ut+=1)ft[ut].t==="m"?kt.moveTo(ft[ut].p[0],ft[ut].p[1]):ft[ut].t==="c"?kt.bezierCurveTo(ft[ut].pts[0],ft[ut].pts[1],ft[ut].pts[2],ft[ut].pts[3],ft[ut].pts[4],ft[ut].pts[5]):kt.closePath();(Tt==="st"||Tt==="gs")&&(St.ctxStroke(),Rt.da&&kt.setLineDash(this.dashResetter))}Tt!=="st"&&Tt!=="gs"&&this.globalData.renderer.ctxFill(Rt.r),St.restore()}},CVShapeElement.prototype.renderShape=function(it,g,et,ot){var ut,ct=g.length-1,dt;for(dt=it,ut=ct;ut>=0;ut-=1)g[ut].ty==="tr"?(dt=et[ut].transform,this.renderShapeTransform(it,dt)):g[ut].ty==="sh"||g[ut].ty==="el"||g[ut].ty==="rc"||g[ut].ty==="sr"?this.renderPath(g[ut],et[ut]):g[ut].ty==="fl"?this.renderFill(g[ut],et[ut],dt):g[ut].ty==="st"?this.renderStroke(g[ut],et[ut],dt):g[ut].ty==="gf"||g[ut].ty==="gs"?this.renderGradientFill(g[ut],et[ut],dt):g[ut].ty==="gr"?this.renderShape(dt,g[ut].it,et[ut].it):g[ut].ty;ot&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(it,g){if(this._isFirstFrame||g._mdf||it.transforms._mdf){var et=it.trNodes,ot=g.paths,ut,ct,dt,ft=ot._length;et.length=0;var St=it.transforms.finalTransform;for(dt=0;dt<ft;dt+=1){var kt=ot.shapes[dt];if(kt&&kt.v){for(ct=kt._length,ut=1;ut<ct;ut+=1)ut===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ut-1],kt.i[ut],kt.v[ut])});ct===1&&et.push({t:"m",p:St.applyToPointArray(kt.v[0][0],kt.v[0][1],0)}),kt.c&&ct&&(et.push({t:"c",pts:St.applyToTriplePoints(kt.o[ut-1],kt.i[0],kt.v[0])}),et.push({t:"z"}))}}it.trNodes=et}},CVShapeElement.prototype.renderPath=function(it,g){if(it.hd!==!0&&it._shouldRender){var et,ot=g.styledShapes.length;for(et=0;et<ot;et+=1)this.renderStyledShape(g.styledShapes[et],g.sh)}},CVShapeElement.prototype.renderFill=function(it,g,et){var ot=g.style;(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity)},CVShapeElement.prototype.renderGradientFill=function(it,g,et){var ot=g.style,ut;if(!ot.grd||g.g._mdf||g.s._mdf||g.e._mdf||it.t!==1&&(g.h._mdf||g.a._mdf)){var ct=this.globalData.canvasContext,dt=g.s.v,ft=g.e.v;if(it.t===1)ut=ct.createLinearGradient(dt[0],dt[1],ft[0],ft[1]);else{var St=Math.sqrt(Math.pow(dt[0]-ft[0],2)+Math.pow(dt[1]-ft[1],2)),kt=Math.atan2(ft[1]-dt[1],ft[0]-dt[0]),Tt=g.h.v;Tt>=1?Tt=.99:Tt<=-1&&(Tt=-.99);var Rt=St*Tt,Ft=Math.cos(kt+g.a.v)*Rt+dt[0],jt=Math.sin(kt+g.a.v)*Rt+dt[1];ut=ct.createRadialGradient(Ft,jt,0,dt[0],dt[1],St)}var Bt,zt=it.g.p,Ht=g.g.c,Ut=1;for(Bt=0;Bt<zt;Bt+=1)g.g._hasOpacity&&g.g._collapsable&&(Ut=g.g.o[Bt*2+1]),ut.addColorStop(Ht[Bt*4]/100,"rgba("+Ht[Bt*4+1]+","+Ht[Bt*4+2]+","+Ht[Bt*4+3]+","+Ut+")");ot.grd=ut}ot.coOp=g.o.v*et.opacity},CVShapeElement.prototype.renderStroke=function(it,g,et){var ot=g.style,ut=g.d;ut&&(ut._mdf||this._isFirstFrame)&&(ot.da=ut.dashArray,ot.do=ut.dashoffset[0]),(g.c._mdf||this._isFirstFrame)&&(ot.co="rgb("+bmFloor(g.c.v[0])+","+bmFloor(g.c.v[1])+","+bmFloor(g.c.v[2])+")"),(g.o._mdf||et._opMdf||this._isFirstFrame)&&(ot.coOp=g.o.v*et.opacity),(g.w._mdf||this._isFirstFrame)&&(ot.wi=g.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(it,g,et){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=!1;it.fc?(g=!0,this.values.fill=this.buildColor(it.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=g;var et=!1;it.sc&&(et=!0,this.values.stroke=this.buildColor(it.sc),this.values.sWidth=it.sw);var ot=this.globalData.fontManager.getFontByName(it.f),ut,ct,dt=it.l,ft=this.mHelper;this.stroke=et,this.values.fValue=it.finalSize+"px "+this.globalData.fontManager.getFontByName(it.f).fFamily,ct=it.finalText.length;var St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht,Ut,Kt=this.data.singleShape,Yt=it.tr*.001*it.finalSize,er=0,ar=0,ir=!0,lr=0;for(ut=0;ut<ct;ut+=1){St=this.globalData.fontManager.getCharData(it.finalText[ut],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),kt=St&&St.data||{},ft.reset(),Kt&&dt[ut].n&&(er=-Yt,ar+=it.yOffset,ar+=ir?1:0,ir=!1),Ft=kt.shapes?kt.shapes[0].it:[],Bt=Ft.length,ft.scale(it.finalSize/100,it.finalSize/100),Kt&&this.applyTextPropertiesToMatrix(it,ft,dt[ut].line,er,ar),Ht=createSizedArray(Bt-1);var cr=0;for(jt=0;jt<Bt;jt+=1)if(Ft[jt].ty==="sh"){for(Rt=Ft[jt].ks.k.i.length,zt=Ft[jt].ks.k,Ut=[],Tt=1;Tt<Rt;Tt+=1)Tt===1&&Ut.push(ft.applyToX(zt.v[0][0],zt.v[0][1],0),ft.applyToY(zt.v[0][0],zt.v[0][1],0)),Ut.push(ft.applyToX(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToY(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToX(zt.i[Tt][0],zt.i[Tt][1],0),ft.applyToY(zt.i[Tt][0],zt.i[Tt][1],0),ft.applyToX(zt.v[Tt][0],zt.v[Tt][1],0),ft.applyToY(zt.v[Tt][0],zt.v[Tt][1],0));Ut.push(ft.applyToX(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToY(zt.o[Tt-1][0],zt.o[Tt-1][1],0),ft.applyToX(zt.i[0][0],zt.i[0][1],0),ft.applyToY(zt.i[0][0],zt.i[0][1],0),ft.applyToX(zt.v[0][0],zt.v[0][1],0),ft.applyToY(zt.v[0][0],zt.v[0][1],0)),Ht[cr]=Ut,cr+=1}Kt&&(er+=dt[ut].l,er+=Yt),this.textSpans[lr]?this.textSpans[lr].elem=Ht:this.textSpans[lr]={elem:Ht},lr+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var it=this.canvasContext;it.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var g,et,ot,ut,ct,dt,ft=this.textAnimator.renderedLetters,St=this.textProperty.currentData.l;et=St.length;var kt,Tt=null,Rt=null,Ft=null,jt,Bt,zt=this.globalData.renderer;for(g=0;g<et;g+=1)if(!St[g].n){if(kt=ft[g],kt&&(zt.save(),zt.ctxTransform(kt.p),zt.ctxOpacity(kt.o)),this.fill){for(kt&&kt.fc?Tt!==kt.fc&&(zt.ctxFillStyle(kt.fc),Tt=kt.fc):Tt!==this.values.fill&&(Tt=this.values.fill,zt.ctxFillStyle(this.values.fill)),jt=this.textSpans[g].elem,ut=jt.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ut;ot+=1)for(Bt=jt[ot],dt=Bt.length,this.globalData.canvasContext.moveTo(Bt[0],Bt[1]),ct=2;ct<dt;ct+=6)this.globalData.canvasContext.bezierCurveTo(Bt[ct],Bt[ct+1],Bt[ct+2],Bt[ct+3],Bt[ct+4],Bt[ct+5]);this.globalData.canvasContext.closePath(),zt.ctxFill()}if(this.stroke){for(kt&&kt.sw?Ft!==kt.sw&&(Ft=kt.sw,zt.ctxLineWidth(kt.sw)):Ft!==this.values.sWidth&&(Ft=this.values.sWidth,zt.ctxLineWidth(this.values.sWidth)),kt&&kt.sc?Rt!==kt.sc&&(Rt=kt.sc,zt.ctxStrokeStyle(kt.sc)):Rt!==this.values.stroke&&(Rt=this.values.stroke,zt.ctxStrokeStyle(this.values.stroke)),jt=this.textSpans[g].elem,ut=jt.length,this.globalData.canvasContext.beginPath(),ot=0;ot<ut;ot+=1)for(Bt=jt[ot],dt=Bt.length,this.globalData.canvasContext.moveTo(Bt[0],Bt[1]),ct=2;ct<dt;ct+=6)this.globalData.canvasContext.bezierCurveTo(Bt[ct],Bt[ct+1],Bt[ct+2],Bt[ct+3],Bt[ct+4],Bt[ct+5]);this.globalData.canvasContext.closePath(),zt.ctxStroke()}kt&&this.globalData.renderer.restore()}};function CVImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.img=g.imageLoader.getAsset(this.assetData),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var it=createTag("canvas");it.width=this.assetData.w,it.height=this.assetData.h;var g=it.getContext("2d"),et=this.img.width,ot=this.img.height,ut=et/ot,ct=this.assetData.w/this.assetData.h,dt,ft,St=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;ut>ct&&St==="xMidYMid slice"||ut<ct&&St!=="xMidYMid slice"?(ft=ot,dt=ft*ct):(dt=et,ft=dt/ct),g.drawImage(this.img,(et-dt)/2,(ot-ft)/2,dt,ft,0,0,this.assetData.w,this.assetData.h),this.img=it}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(it){return new CVShapeElement(it,this.globalData,this)},CanvasRendererBase.prototype.createText=function(it){return new CVTextElement(it,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(it){return new CVImageElement(it,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(it){return new CVSolidElement(it,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(it){it[0]===1&&it[1]===0&&it[4]===0&&it[5]===1&&it[12]===0&&it[13]===0||this.canvasContext.transform(it[0],it[1],it[4],it[5],it[12],it[13])},CanvasRendererBase.prototype.ctxOpacity=function(it){this.canvasContext.globalAlpha*=it<0?0:it},CanvasRendererBase.prototype.ctxFillStyle=function(it){this.canvasContext.fillStyle=it},CanvasRendererBase.prototype.ctxStrokeStyle=function(it){this.canvasContext.strokeStyle=it},CanvasRendererBase.prototype.ctxLineWidth=function(it){this.canvasContext.lineWidth=it},CanvasRendererBase.prototype.ctxLineCap=function(it){this.canvasContext.lineCap=it},CanvasRendererBase.prototype.ctxLineJoin=function(it){this.canvasContext.lineJoin=it},CanvasRendererBase.prototype.ctxMiterLimit=function(it){this.canvasContext.miterLimit=it},CanvasRendererBase.prototype.ctxFill=function(it){this.canvasContext.fill(it)},CanvasRendererBase.prototype.ctxFillRect=function(it,g,et,ot){this.canvasContext.fillRect(it,g,et,ot)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(it){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}it&&(this.globalData.blendMode="source-over"),this.contextData.restore(it)},CanvasRendererBase.prototype.configAnimation=function(it){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var g=this.animationItem.container.style;g.width="100%",g.height="100%";var et="0px 0px 0px";g.transformOrigin=et,g.mozTransformOrigin=et,g.webkitTransformOrigin=et,g["-webkit-transform"]=et,g.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=it,this.layers=it.layers,this.transformCanvas={w:it.w,h:it.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(it,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(it.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(it,g){this.reset();var et,ot;it?(et=it,ot=g,this.canvasContext.canvas.width=et,this.canvasContext.canvas.height=ot):(this.animationItem.wrapper&&this.animationItem.container?(et=this.animationItem.wrapper.offsetWidth,ot=this.animationItem.wrapper.offsetHeight):(et=this.canvasContext.canvas.width,ot=this.canvasContext.canvas.height),this.canvasContext.canvas.width=et*this.renderConfig.dpr,this.canvasContext.canvas.height=ot*this.renderConfig.dpr);var ut,ct;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var dt=this.renderConfig.preserveAspectRatio.split(" "),ft=dt[1]||"meet",St=dt[0]||"xMidYMid",kt=St.substr(0,4),Tt=St.substr(4);ut=et/ot,ct=this.transformCanvas.w/this.transformCanvas.h,ct>ut&&ft==="meet"||ct<ut&&ft==="slice"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=et/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr)),kt==="xMid"&&(ct<ut&&ft==="meet"||ct>ut&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))/2*this.renderConfig.dpr:kt==="xMax"&&(ct<ut&&ft==="meet"||ct>ut&&ft==="slice")?this.transformCanvas.tx=(et-this.transformCanvas.w*(ot/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Tt==="YMid"&&(ct>ut&&ft==="meet"||ct<ut&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))/2*this.renderConfig.dpr:Tt==="YMax"&&(ct>ut&&ft==="meet"||ct<ut&&ft==="slice")?this.transformCanvas.ty=(ot-this.transformCanvas.h*(et/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=et/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ot/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var it,g=this.layers?this.layers.length:0;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(it,g){if(!(this.renderedFrame===it&&this.renderConfig.clearCanvas===!0&&!g||this.destroyed||it===-1)){this.renderedFrame=it,this.globalData.frameNum=it-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||g,this.globalData.projectInterface.currentFrame=it;var et,ot=this.layers.length;for(this.completeLayers||this.checkLayers(it),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].prepareFrame(it-this.layers[et].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),et=ot-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(it){var g=this.elements;if(!(g[it]||this.layers[it].ty===99)){var et=this.createItem(this.layers[it],this,this.globalData);g[it]=et,et.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var it,g=15;for(it=0;it<g;it+=1){var et=new CanvasContext;this.stack[it]=et}this._length=g,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var it=this._length*2,g=0;for(g=this._length;g<it;g+=1)this.stack[g]=new CanvasContext;this._length=it},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(it){this.cArrPos-=1;var g=this.stack[this.cArrPos],et=g.transform,ot,ut=this.cTr.props;for(ot=0;ot<16;ot+=1)ut[ot]=et[ot];if(it){this.nativeContext.restore();var ct=this.stack[this.cArrPos+1];this.appliedFillStyle=ct.fillStyle,this.appliedStrokeStyle=ct.strokeStyle,this.appliedLineWidth=ct.lineWidth,this.appliedLineCap=ct.lineCap,this.appliedLineJoin=ct.lineJoin,this.appliedMiterLimit=ct.miterLimit}this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13]),(it||g.opacity!==-1&&this.currentOpacity!==g.opacity)&&(this.nativeContext.globalAlpha=g.opacity,this.currentOpacity=g.opacity),this.currentFillStyle=g.fillStyle,this.currentStrokeStyle=g.strokeStyle,this.currentLineWidth=g.lineWidth,this.currentLineCap=g.lineCap,this.currentLineJoin=g.lineJoin,this.currentMiterLimit=g.miterLimit},CVContextData.prototype.save=function(it){it&&this.nativeContext.save();var g=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var et=this.stack[this.cArrPos],ot;for(ot=0;ot<16;ot+=1)et.transform[ot]=g[ot];this.cArrPos+=1;var ut=this.stack[this.cArrPos];ut.opacity=et.opacity,ut.fillStyle=et.fillStyle,ut.strokeStyle=et.strokeStyle,ut.lineWidth=et.lineWidth,ut.lineCap=et.lineCap,ut.lineJoin=et.lineJoin,ut.miterLimit=et.miterLimit},CVContextData.prototype.setOpacity=function(it){this.stack[this.cArrPos].opacity=it},CVContextData.prototype.setContext=function(it){this.nativeContext=it},CVContextData.prototype.fillStyle=function(it){this.stack[this.cArrPos].fillStyle!==it&&(this.currentFillStyle=it,this.stack[this.cArrPos].fillStyle=it)},CVContextData.prototype.strokeStyle=function(it){this.stack[this.cArrPos].strokeStyle!==it&&(this.currentStrokeStyle=it,this.stack[this.cArrPos].strokeStyle=it)},CVContextData.prototype.lineWidth=function(it){this.stack[this.cArrPos].lineWidth!==it&&(this.currentLineWidth=it,this.stack[this.cArrPos].lineWidth=it)},CVContextData.prototype.lineCap=function(it){this.stack[this.cArrPos].lineCap!==it&&(this.currentLineCap=it,this.stack[this.cArrPos].lineCap=it)},CVContextData.prototype.lineJoin=function(it){this.stack[this.cArrPos].lineJoin!==it&&(this.currentLineJoin=it,this.stack[this.cArrPos].lineJoin=it)},CVContextData.prototype.miterLimit=function(it){this.stack[this.cArrPos].miterLimit!==it&&(this.currentMiterLimit=it,this.stack[this.cArrPos].miterLimit=it)},CVContextData.prototype.transform=function(it){this.transformMat.cloneFromProps(it);var g=this.cTr;this.transformMat.multiply(g),g.cloneFromProps(this.transformMat.props);var et=g.props;this.nativeContext.setTransform(et[0],et[1],et[4],et[5],et[12],et[13])},CVContextData.prototype.opacity=function(it){var g=this.stack[this.cArrPos].opacity;g*=it<0?0:it,this.stack[this.cArrPos].opacity!==g&&(this.currentOpacity!==it&&(this.nativeContext.globalAlpha=it,this.currentOpacity=it),this.stack[this.cArrPos].opacity=g)},CVContextData.prototype.fill=function(it){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(it)},CVContextData.prototype.fillRect=function(it,g,et,ot){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(it,g,et,ot)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(it,g,et){this.completeLayers=!1,this.layers=it.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var it=this.canvasContext;it.beginPath(),it.moveTo(0,0),it.lineTo(this.data.w,0),it.lineTo(this.data.w,this.data.h),it.lineTo(0,this.data.h),it.lineTo(0,0),it.clip();var g,et=this.layers.length;for(g=et-1;g>=0;g-=1)(this.completeLayers||this.elements[g])&&this.elements[g].renderFrame()},CVCompElement.prototype.destroy=function(){var it,g=this.layers.length;for(it=g-1;it>=0;it-=1)this.elements[it]&&this.elements[it].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function CanvasRenderer(it,g){this.animationItem=it,this.renderConfig={clearCanvas:g&&g.clearCanvas!==void 0?g.clearCanvas:!0,context:g&&g.context||null,progressiveLoad:g&&g.progressiveLoad||!1,preserveAspectRatio:g&&g.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:g&&g.contentVisibility||"visible",className:g&&g.className||"",id:g&&g.id||"",runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.renderConfig.dpr=g&&g.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=g&&g.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(it){return new CVCompElement(it,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var g=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var et=this.finalTransform.mat.toCSS();g.transform=et,g.webkitTransform=et}this.finalTransform._opMdf&&(g.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(it,g,et){this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var it;this.data.hasMask?(it=createNS("rect"),it.setAttribute("width",this.data.sw),it.setAttribute("height",this.data.sh),it.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(it=createTag("div"),it.style.width=this.data.sw+"px",it.style.height=this.data.sh+"px",it.style.backgroundColor=this.data.sc),this.layerElement.appendChild(it)};function HShapeElement(it,g,et){this.shapes=[],this.shapesData=it.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(it,g,et),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var it;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),it=this.svgElement;else{it=createNS("svg");var g=this.comp.data?this.comp.data:this.globalData.compSize;it.setAttribute("width",g.w),it.setAttribute("height",g.h),it.appendChild(this.shapesContainer),this.layerElement.appendChild(it)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=it},HShapeElement.prototype.getTransformedPoint=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)g=it[et].mProps.v.applyToPointArray(g[0],g[1],0);return g},HShapeElement.prototype.calculateShapeBoundingBox=function(it,g){var et=it.sh.v,ot=it.transformers,ut,ct=et._length,dt,ft,St,kt;if(!(ct<=1)){for(ut=0;ut<ct-1;ut+=1)dt=this.getTransformedPoint(ot,et.v[ut]),ft=this.getTransformedPoint(ot,et.o[ut]),St=this.getTransformedPoint(ot,et.i[ut+1]),kt=this.getTransformedPoint(ot,et.v[ut+1]),this.checkBounds(dt,ft,St,kt,g);et.c&&(dt=this.getTransformedPoint(ot,et.v[ut]),ft=this.getTransformedPoint(ot,et.o[ut]),St=this.getTransformedPoint(ot,et.i[0]),kt=this.getTransformedPoint(ot,et.v[0]),this.checkBounds(dt,ft,St,kt,g))}},HShapeElement.prototype.checkBounds=function(it,g,et,ot,ut){this.getBoundsOfCurve(it,g,et,ot);var ct=this.shapeBoundingBox;ut.x=bmMin(ct.left,ut.x),ut.xMax=bmMax(ct.right,ut.xMax),ut.y=bmMin(ct.top,ut.y),ut.yMax=bmMax(ct.bottom,ut.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(it,g,et,ot){for(var ut=[[it[0],ot[0]],[it[1],ot[1]]],ct,dt,ft,St,kt,Tt,Rt,Ft=0;Ft<2;++Ft)dt=6*it[Ft]-12*g[Ft]+6*et[Ft],ct=-3*it[Ft]+9*g[Ft]-9*et[Ft]+3*ot[Ft],ft=3*g[Ft]-3*it[Ft],dt|=0,ct|=0,ft|=0,ct===0&&dt===0||(ct===0?(St=-ft/dt,St>0&&St<1&&ut[Ft].push(this.calculateF(St,it,g,et,ot,Ft))):(kt=dt*dt-4*ft*ct,kt>=0&&(Tt=(-dt+bmSqrt(kt))/(2*ct),Tt>0&&Tt<1&&ut[Ft].push(this.calculateF(Tt,it,g,et,ot,Ft)),Rt=(-dt-bmSqrt(kt))/(2*ct),Rt>0&&Rt<1&&ut[Ft].push(this.calculateF(Rt,it,g,et,ot,Ft)))));this.shapeBoundingBox.left=bmMin.apply(null,ut[0]),this.shapeBoundingBox.top=bmMin.apply(null,ut[1]),this.shapeBoundingBox.right=bmMax.apply(null,ut[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ut[1])},HShapeElement.prototype.calculateF=function(it,g,et,ot,ut,ct){return bmPow(1-it,3)*g[ct]+3*bmPow(1-it,2)*it*et[ct]+3*(1-it)*bmPow(it,2)*ot[ct]+bmPow(it,3)*ut[ct]},HShapeElement.prototype.calculateBoundingBox=function(it,g){var et,ot=it.length;for(et=0;et<ot;et+=1)it[et]&&it[et].sh?this.calculateShapeBoundingBox(it[et],g):it[et]&&it[et].it?this.calculateBoundingBox(it[et].it,g):it[et]&&it[et].style&&it[et].w&&this.expandStrokeBoundingBox(it[et].w,g)},HShapeElement.prototype.expandStrokeBoundingBox=function(it,g){var et=0;if(it.keyframes){for(var ot=0;ot<it.keyframes.length;ot+=1){var ut=it.keyframes[ot].s;ut>et&&(et=ut)}et*=it.mult}else et=it.v*it.mult;g.x-=et,g.xMax+=et,g.y-=et,g.yMax+=et},HShapeElement.prototype.currentBoxContains=function(it){return this.currentBBox.x<=it.x&&this.currentBBox.y<=it.y&&this.currentBBox.width+this.currentBBox.x>=it.x+it.width&&this.currentBBox.height+this.currentBBox.y>=it.y+it.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var it=this.tempBoundingBox,g=999999;if(it.x=g,it.xMax=-g,it.y=g,it.yMax=-g,this.calculateBoundingBox(this.itemsData,it),it.width=it.xMax<it.x?0:it.xMax-it.x,it.height=it.yMax<it.y?0:it.yMax-it.y,this.currentBoxContains(it))return;var et=!1;if(this.currentBBox.w!==it.width&&(this.currentBBox.w=it.width,this.shapeCont.setAttribute("width",it.width),et=!0),this.currentBBox.h!==it.height&&(this.currentBBox.h=it.height,this.shapeCont.setAttribute("height",it.height),et=!0),et||this.currentBBox.x!==it.x||this.currentBBox.y!==it.y){this.currentBBox.w=it.width,this.currentBBox.h=it.height,this.currentBBox.x=it.x,this.currentBBox.y=it.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var ot=this.shapeCont.style,ut="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";ot.transform=ut,ot.webkitTransform=ut}}};function HTextElement(it,g,et){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var it=createNS("g");this.maskedElement.appendChild(it),this.innerElem=it}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var it=this.textProperty.currentData;this.renderedLetters=createSizedArray(it.l?it.l.length:0);var g=this.innerElem.style,et=it.fc?this.buildColor(it.fc):"rgba(0,0,0,0)";g.fill=et,g.color=et,it.sc&&(g.stroke=this.buildColor(it.sc),g.strokeWidth=it.sw+"px");var ot=this.globalData.fontManager.getFontByName(it.f);if(!this.globalData.fontManager.chars)if(g.fontSize=it.finalSize+"px",g.lineHeight=it.finalSize+"px",ot.fClass)this.innerElem.className=ot.fClass;else{g.fontFamily=ot.fFamily;var ut=it.fWeight,ct=it.fStyle;g.fontStyle=ct,g.fontWeight=ut}var dt,ft,St=it.l;ft=St.length;var kt,Tt,Rt,Ft=this.mHelper,jt,Bt="",zt=0;for(dt=0;dt<ft;dt+=1){if(this.globalData.fontManager.chars?(this.textPaths[zt]?kt=this.textPaths[zt]:(kt=createNS("path"),kt.setAttribute("stroke-linecap",lineCapEnum[1]),kt.setAttribute("stroke-linejoin",lineJoinEnum[2]),kt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[zt]?(Tt=this.textSpans[zt],Rt=Tt.children[0]):(Tt=createTag("div"),Tt.style.lineHeight=0,Rt=createNS("svg"),Rt.appendChild(kt),styleDiv(Tt)))):this.isMasked?kt=this.textPaths[zt]?this.textPaths[zt]:createNS("text"):this.textSpans[zt]?(Tt=this.textSpans[zt],kt=this.textPaths[zt]):(Tt=createTag("span"),styleDiv(Tt),kt=createTag("span"),styleDiv(kt),Tt.appendChild(kt)),this.globalData.fontManager.chars){var Ht=this.globalData.fontManager.getCharData(it.finalText[dt],ot.fStyle,this.globalData.fontManager.getFontByName(it.f).fFamily),Ut;if(Ht?Ut=Ht.data:Ut=null,Ft.reset(),Ut&&Ut.shapes&&Ut.shapes.length&&(jt=Ut.shapes[0].it,Ft.scale(it.finalSize/100,it.finalSize/100),Bt=this.createPathShape(Ft,jt),kt.setAttribute("d",Bt)),this.isMasked)this.innerElem.appendChild(kt);else{if(this.innerElem.appendChild(Tt),Ut&&Ut.shapes){document.body.appendChild(Rt);var Kt=Rt.getBBox();Rt.setAttribute("width",Kt.width+2),Rt.setAttribute("height",Kt.height+2),Rt.setAttribute("viewBox",Kt.x-1+" "+(Kt.y-1)+" "+(Kt.width+2)+" "+(Kt.height+2));var Yt=Rt.style,er="translate("+(Kt.x-1)+"px,"+(Kt.y-1)+"px)";Yt.transform=er,Yt.webkitTransform=er,St[dt].yOffset=Kt.y-1}else Rt.setAttribute("width",1),Rt.setAttribute("height",1);Tt.appendChild(Rt)}}else if(kt.textContent=St[dt].val,kt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(kt);else{this.innerElem.appendChild(Tt);var ar=kt.style,ir="translate3d(0,"+-it.finalSize/1.2+"px,0)";ar.transform=ir,ar.webkitTransform=ir}this.isMasked?this.textSpans[zt]=kt:this.textSpans[zt]=Tt,this.textSpans[zt].style.display="block",this.textPaths[zt]=kt,zt+=1}for(;zt<this.textSpans.length;)this.textSpans[zt].style.display="none",zt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var it;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),it=this.svgElement.style;var g="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";it.transform=g,it.webkitTransform=g}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var et,ot,ut=0,ct=this.textAnimator.renderedLetters,dt=this.textProperty.currentData.l;ot=dt.length;var ft,St,kt;for(et=0;et<ot;et+=1)dt[et].n?ut+=1:(St=this.textSpans[et],kt=this.textPaths[et],ft=ct[ut],ut+=1,ft._mdf.m&&(this.isMasked?St.setAttribute("transform",ft.m):(St.style.webkitTransform=ft.m,St.style.transform=ft.m)),St.style.opacity=ft.o,ft.sw&&ft._mdf.sw&&kt.setAttribute("stroke-width",ft.sw),ft.sc&&ft._mdf.sc&&kt.setAttribute("stroke",ft.sc),ft.fc&&ft._mdf.fc&&(kt.setAttribute("fill",ft.fc),kt.style.color=ft.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Tt=this.innerElem.getBBox();this.currentBBox.w!==Tt.width&&(this.currentBBox.w=Tt.width,this.svgElement.setAttribute("width",Tt.width)),this.currentBBox.h!==Tt.height&&(this.currentBBox.h=Tt.height,this.svgElement.setAttribute("height",Tt.height));var Rt=1;if(this.currentBBox.w!==Tt.width+Rt*2||this.currentBBox.h!==Tt.height+Rt*2||this.currentBBox.x!==Tt.x-Rt||this.currentBBox.y!==Tt.y-Rt){this.currentBBox.w=Tt.width+Rt*2,this.currentBBox.h=Tt.height+Rt*2,this.currentBBox.x=Tt.x-Rt,this.currentBBox.y=Tt.y-Rt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),it=this.svgElement.style;var Ft="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";it.transform=Ft,it.webkitTransform=Ft}}}};function HCameraElement(it,g,et){this.initFrame(),this.initBaseData(it,g,et),this.initHierarchy();var ot=PropertyFactory.getProp;if(this.pe=ot(this,it.pe,0,0,this),it.ks.p.s?(this.px=ot(this,it.ks.p.x,1,0,this),this.py=ot(this,it.ks.p.y,1,0,this),this.pz=ot(this,it.ks.p.z,1,0,this)):this.p=ot(this,it.ks.p,1,0,this),it.ks.a&&(this.a=ot(this,it.ks.a,1,0,this)),it.ks.or.k.length&&it.ks.or.k[0].to){var ut,ct=it.ks.or.k.length;for(ut=0;ut<ct;ut+=1)it.ks.or.k[ut].to=null,it.ks.or.k[ut].ti=null}this.or=ot(this,it.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=ot(this,it.ks.rx,0,degToRads,this),this.ry=ot(this,it.ks.ry,0,degToRads,this),this.rz=ot(this,it.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var it,g=this.comp.threeDElements.length,et,ot,ut;for(it=0;it<g;it+=1)if(et=this.comp.threeDElements[it],et.type==="3d"){ot=et.perspectiveElem.style,ut=et.container.style;var ct=this.pe.v+"px",dt="0px 0px 0px",ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ot.perspective=ct,ot.webkitPerspective=ct,ut.transformOrigin=dt,ut.mozTransformOrigin=dt,ut.webkitTransformOrigin=dt,ot.transform=ft,ot.webkitTransform=ft}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var it=this._isFirstFrame,g,et;if(this.hierarchy)for(et=this.hierarchy.length,g=0;g<et;g+=1)it=this.hierarchy[g].finalTransform.mProp._mdf||it;if(it||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(et=this.hierarchy.length-1,g=et;g>=0;g-=1){var ot=this.hierarchy[g].finalTransform.mProp;this.mat.translate(-ot.p.v[0],-ot.p.v[1],ot.p.v[2]),this.mat.rotateX(-ot.or.v[0]).rotateY(-ot.or.v[1]).rotateZ(ot.or.v[2]),this.mat.rotateX(-ot.rx.v).rotateY(-ot.ry.v).rotateZ(ot.rz.v),this.mat.scale(1/ot.s.v[0],1/ot.s.v[1],1/ot.s.v[2]),this.mat.translate(ot.a.v[0],ot.a.v[1],ot.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var ut;this.p?ut=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:ut=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ct=Math.sqrt(Math.pow(ut[0],2)+Math.pow(ut[1],2)+Math.pow(ut[2],2)),dt=[ut[0]/ct,ut[1]/ct,ut[2]/ct],ft=Math.sqrt(dt[2]*dt[2]+dt[0]*dt[0]),St=Math.atan2(dt[1],ft),kt=Math.atan2(dt[0],-dt[2]);this.mat.rotateY(kt).rotateX(-St)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Tt=!this._prevMat.equals(this.mat);if((Tt||this.pe._mdf)&&this.comp.threeDElements){et=this.comp.threeDElements.length;var Rt,Ft,jt;for(g=0;g<et;g+=1)if(Rt=this.comp.threeDElements[g],Rt.type==="3d"){if(Tt){var Bt=this.mat.toCSS();jt=Rt.container.style,jt.transform=Bt,jt.webkitTransform=Bt}this.pe._mdf&&(Ft=Rt.perspectiveElem.style,Ft.perspective=this.pe.v+"px",Ft.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(it){this.prepareProperties(it,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(it,g,et){this.assetData=g.getAssetData(it.refId),this.initElement(it,g,et)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var it=this.globalData.getAssetsPath(this.assetData),g=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",it),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(g),g.crossOrigin="anonymous",g.src=it,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var it=this.pendingElements.pop();it.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(it,g){var et=it.getBaseElement();if(et){var ot=this.layers[g];if(!ot.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(et,g);else{for(var ut=0,ct,dt,ft;ut<g;)this.elements[ut]&&this.elements[ut]!==!0&&this.elements[ut].getBaseElement&&(dt=this.elements[ut],ft=this.layers[ut].ddd?this.getThreeDContainerByPos(ut):dt.getBaseElement(),ct=ft||ct),ut+=1;ct?(!ot.ddd||!this.supports3d)&&this.layerElement.insertBefore(et,ct):(!ot.ddd||!this.supports3d)&&this.layerElement.appendChild(et)}else this.addTo3dContainer(et,g)}},HybridRendererBase.prototype.createShape=function(it){return this.supports3d?new HShapeElement(it,this.globalData,this):new SVGShapeElement(it,this.globalData,this)},HybridRendererBase.prototype.createText=function(it){return this.supports3d?new HTextElement(it,this.globalData,this):new SVGTextLottieElement(it,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(it){return this.camera=new HCameraElement(it,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(it){return this.supports3d?new HImageElement(it,this.globalData,this):new IImageElement(it,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(it){return this.supports3d?new HSolidElement(it,this.globalData,this):new ISolidElement(it,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(it){for(var g=0,et=this.threeDElements.length;g<et;){if(this.threeDElements[g].startPos<=it&&this.threeDElements[g].endPos>=it)return this.threeDElements[g].perspectiveElem;g+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(it,g){var et=createTag("div"),ot,ut;styleDiv(et);var ct=createTag("div");if(styleDiv(ct),g==="3d"){ot=et.style,ot.width=this.globalData.compSize.w+"px",ot.height=this.globalData.compSize.h+"px";var dt="50% 50%";ot.webkitTransformOrigin=dt,ot.mozTransformOrigin=dt,ot.transformOrigin=dt,ut=ct.style;var ft="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ut.transform=ft,ut.webkitTransform=ft}et.appendChild(ct);var St={container:ct,perspectiveElem:et,startPos:it,endPos:it,type:g};return this.threeDElements.push(St),St},HybridRendererBase.prototype.build3dContainers=function(){var it,g=this.layers.length,et,ot="";for(it=0;it<g;it+=1)this.layers[it].ddd&&this.layers[it].ty!==3?(ot!=="3d"&&(ot="3d",et=this.createThreeDContainer(it,"3d")),et.endPos=Math.max(et.endPos,it)):(ot!=="2d"&&(ot="2d",et=this.createThreeDContainer(it,"2d")),et.endPos=Math.max(et.endPos,it));for(g=this.threeDElements.length,it=g-1;it>=0;it-=1)this.resizerElem.appendChild(this.threeDElements[it].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(it,g){for(var et=0,ot=this.threeDElements.length;et<ot;){if(g<=this.threeDElements[et].endPos){for(var ut=this.threeDElements[et].startPos,ct;ut<g;)this.elements[ut]&&this.elements[ut].getBaseElement&&(ct=this.elements[ut].getBaseElement()),ut+=1;ct?this.threeDElements[et].container.insertBefore(it,ct):this.threeDElements[et].container.appendChild(it);break}et+=1}},HybridRendererBase.prototype.configAnimation=function(it){var g=createTag("div"),et=this.animationItem.wrapper,ot=g.style;ot.width=it.w+"px",ot.height=it.h+"px",this.resizerElem=g,styleDiv(g),ot.transformStyle="flat",ot.mozTransformStyle="flat",ot.webkitTransformStyle="flat",this.renderConfig.className&&g.setAttribute("class",this.renderConfig.className),et.appendChild(g),ot.overflow="hidden";var ut=createNS("svg");ut.setAttribute("width","1"),ut.setAttribute("height","1"),styleDiv(ut),this.resizerElem.appendChild(ut);var ct=createNS("defs");ut.appendChild(ct),this.data=it,this.setupGlobalData(it,ut),this.globalData.defs=ct,this.layers=it.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var it,g=this.layers?this.layers.length:0;for(it=0;it<g;it+=1)this.elements[it]&&this.elements[it].destroy&&this.elements[it].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var it=this.animationItem.wrapper.offsetWidth,g=this.animationItem.wrapper.offsetHeight,et=it/g,ot=this.globalData.compSize.w/this.globalData.compSize.h,ut,ct,dt,ft;ot>et?(ut=it/this.globalData.compSize.w,ct=it/this.globalData.compSize.w,dt=0,ft=(g-this.globalData.compSize.h*(it/this.globalData.compSize.w))/2):(ut=g/this.globalData.compSize.h,ct=g/this.globalData.compSize.h,dt=(it-this.globalData.compSize.w*(g/this.globalData.compSize.h))/2,ft=0);var St=this.resizerElem.style;St.webkitTransform="matrix3d("+ut+",0,0,0,0,"+ct+",0,0,0,0,1,0,"+dt+","+ft+",0,1)",St.transform=St.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var it=this.globalData.compSize.w,g=this.globalData.compSize.h,et,ot=this.threeDElements.length;for(et=0;et<ot;et+=1){var ut=this.threeDElements[et].perspectiveElem.style;ut.webkitPerspective=Math.sqrt(Math.pow(it,2)+Math.pow(g,2))+"px",ut.perspective=ut.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(it){var g,et=it.length,ot=createTag("div");for(g=0;g<et;g+=1)if(it[g].xt){var ut=this.createComp(it[g],ot,this.globalData.comp,null);ut.initExpressions(),this.globalData.projectInterface.registerComposition(ut)}};function HCompElement(it,g,et){this.layers=it.layers,this.supports3d=!it.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(it,g,et),this.tm=it.tm?PropertyFactory.getProp(this,it.tm,0,g.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(it,g){for(var et=0,ot;et<g;)this.elements[et]&&this.elements[et].getBaseElement&&(ot=this.elements[et].getBaseElement()),et+=1;ot?this.layerElement.insertBefore(it,ot):this.layerElement.appendChild(it)},HCompElement.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};function HybridRenderer(it,g){this.animationItem=it,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:g&&g.className||"",imagePreserveAspectRatio:g&&g.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(g&&g.hideOnTransparent===!1),filterSize:{width:g&&g.filterSize&&g.filterSize.width||"400%",height:g&&g.filterSize&&g.filterSize.height||"400%",x:g&&g.filterSize&&g.filterSize.x||"-100%",y:g&&g.filterSize&&g.filterSize.y||"-100%"},runExpressions:!g||g.runExpressions===void 0||g.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(it){return this.supports3d?new HCompElement(it,this.globalData,this):new SVGCompElement(it,this.globalData,this)};var CompExpressionInterface=function(){return function(it){function g(et){for(var ot=0,ut=it.layers.length;ot<ut;){if(it.layers[ot].nm===et||it.layers[ot].ind===et)return it.elements[ot].layerInterface;ot+=1}return null}return Object.defineProperty(g,"_name",{value:it.data.nm}),g.layer=g,g.pixelAspect=1,g.height=it.data.h||it.globalData.compSize.h,g.width=it.data.w||it.globalData.compSize.w,g.pixelAspect=1,g.frameDuration=1/it.globalData.frameRate,g.displayStartTime=0,g.numLayers=it.layers.length,g}}();function _typeof$2(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(et){return typeof et}:_typeof$2=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$2(it)}function seedRandom(it,g){var et=this,ot=256,ut=6,ct=52,dt="random",ft=g.pow(ot,ut),St=g.pow(2,ct),kt=St*2,Tt=ot-1,Rt;function Ft(Yt,er,ar){var ir=[];er=er===!0?{entropy:!0}:er||{};var lr=Ht(zt(er.entropy?[Yt,Kt(it)]:Yt===null?Ut():Yt,3),ir),cr=new jt(ir),vr=function(){for(var yr=cr.g(ut),Sr=ft,kr=0;yr<St;)yr=(yr+kr)*ot,Sr*=ot,kr=cr.g(1);for(;yr>=kt;)yr/=2,Sr/=2,kr>>>=1;return(yr+kr)/Sr};return vr.int32=function(){return cr.g(4)|0},vr.quick=function(){return cr.g(4)/4294967296},vr.double=vr,Ht(Kt(cr.S),it),(er.pass||ar||function(xr,yr,Sr,kr){return kr&&(kr.S&&Bt(kr,cr),xr.state=function(){return Bt(cr,{})}),Sr?(g[dt]=xr,yr):xr})(vr,lr,"global"in er?er.global:this==g,er.state)}g["seed"+dt]=Ft;function jt(Yt){var er,ar=Yt.length,ir=this,lr=0,cr=ir.i=ir.j=0,vr=ir.S=[];for(ar||(Yt=[ar++]);lr<ot;)vr[lr]=lr++;for(lr=0;lr<ot;lr++)vr[lr]=vr[cr=Tt&cr+Yt[lr%ar]+(er=vr[lr])],vr[cr]=er;ir.g=function(xr){for(var yr,Sr=0,kr=ir.i,Pr=ir.j,Or=ir.S;xr--;)yr=Or[kr=Tt&kr+1],Sr=Sr*ot+Or[Tt&(Or[kr]=Or[Pr=Tt&Pr+yr])+(Or[Pr]=yr)];return ir.i=kr,ir.j=Pr,Sr}}function Bt(Yt,er){return er.i=Yt.i,er.j=Yt.j,er.S=Yt.S.slice(),er}function zt(Yt,er){var ar=[],ir=_typeof$2(Yt),lr;if(er&&ir=="object")for(lr in Yt)try{ar.push(zt(Yt[lr],er-1))}catch{}return ar.length?ar:ir=="string"?Yt:Yt+"\0"}function Ht(Yt,er){for(var ar=Yt+"",ir,lr=0;lr<ar.length;)er[Tt&lr]=Tt&(ir^=er[Tt&lr]*19)+ar.charCodeAt(lr++);return Kt(er)}function Ut(){try{var Yt=new Uint8Array(ot);return(et.crypto||et.msCrypto).getRandomValues(Yt),Kt(Yt)}catch{var er=et.navigator,ar=er&&er.plugins;return[+new Date,et,ar,et.screen,Kt(it)]}}function Kt(Yt){return String.fromCharCode.apply(0,Yt)}Ht(g.random(),it)}function initialize$2(it){seedRandom([],it)}var propTypes={SHAPE:"shape"};function _typeof$1(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(et){return typeof et}:_typeof$1=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$1(it)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(it){return it.constructor===Array||it.constructor===Float32Array}function isNumerable(it,g){return it==="number"||g instanceof Number||it==="boolean"||it==="string"}function $bm_neg(it){var g=_typeof$1(it);if(g==="number"||it instanceof Number||g==="boolean")return-it;if($bm_isInstanceOfArray(it)){var et,ot=it.length,ut=[];for(et=0;et<ot;et+=1)ut[et]=-it[et];return ut}return it.propType?it.v:-it}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g)||et==="string"||ot==="string")return it+g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]+=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it+g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ut=0,ct=it.length,dt=g.length,ft=[];ut<ct||ut<dt;)(typeof it[ut]=="number"||it[ut]instanceof Number)&&(typeof g[ut]=="number"||g[ut]instanceof Number)?ft[ut]=it[ut]+g[ut]:ft[ut]=g[ut]===void 0?it[ut]:it[ut]||g[ut],ut+=1;return ft}return 0}var add=sum;function sub(it,g){var et=_typeof$1(it),ot=_typeof$1(g);if(isNumerable(et,it)&&isNumerable(ot,g))return et==="string"&&(it=parseInt(it,10)),ot==="string"&&(g=parseInt(g,10)),it-g;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g))return it=it.slice(0),it[0]-=g,it;if(isNumerable(et,it)&&$bm_isInstanceOfArray(g))return g=g.slice(0),g[0]=it-g[0],g;if($bm_isInstanceOfArray(it)&&$bm_isInstanceOfArray(g)){for(var ut=0,ct=it.length,dt=g.length,ft=[];ut<ct||ut<dt;)(typeof it[ut]=="number"||it[ut]instanceof Number)&&(typeof g[ut]=="number"||g[ut]instanceof Number)?ft[ut]=it[ut]-g[ut]:ft[ut]=g[ut]===void 0?it[ut]:it[ut]||g[ut],ut+=1;return ft}return 0}function mul(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ut;if(isNumerable(et,it)&&isNumerable(ot,g))return it*g;var ct,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ut=createTypedArray("float32",dt),ct=0;ct<dt;ct+=1)ut[ct]=it[ct]*g;return ut}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ut=createTypedArray("float32",dt),ct=0;ct<dt;ct+=1)ut[ct]=it*g[ct];return ut}return 0}function div(it,g){var et=_typeof$1(it),ot=_typeof$1(g),ut;if(isNumerable(et,it)&&isNumerable(ot,g))return it/g;var ct,dt;if($bm_isInstanceOfArray(it)&&isNumerable(ot,g)){for(dt=it.length,ut=createTypedArray("float32",dt),ct=0;ct<dt;ct+=1)ut[ct]=it[ct]/g;return ut}if(isNumerable(et,it)&&$bm_isInstanceOfArray(g)){for(dt=g.length,ut=createTypedArray("float32",dt),ct=0;ct<dt;ct+=1)ut[ct]=it/g[ct];return ut}return 0}function mod(it,g){return typeof it=="string"&&(it=parseInt(it,10)),typeof g=="string"&&(g=parseInt(g,10)),it%g}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(it,g,et){if(g>et){var ot=et;et=g,g=ot}return Math.min(Math.max(it,g),et)}function radiansToDegrees(it){return it/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(it){return it*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(it,g){if(typeof it=="number"||it instanceof Number)return g=g||0,Math.abs(it-g);g||(g=helperLengthArray);var et,ot=Math.min(it.length,g.length),ut=0;for(et=0;et<ot;et+=1)ut+=Math.pow(g[et]-it[et],2);return Math.sqrt(ut)}function normalize(it){return div(it,length(it))}function rgbToHsl(it){var g=it[0],et=it[1],ot=it[2],ut=Math.max(g,et,ot),ct=Math.min(g,et,ot),dt,ft,St=(ut+ct)/2;if(ut===ct)dt=0,ft=0;else{var kt=ut-ct;switch(ft=St>.5?kt/(2-ut-ct):kt/(ut+ct),ut){case g:dt=(et-ot)/kt+(et<ot?6:0);break;case et:dt=(ot-g)/kt+2;break;case ot:dt=(g-et)/kt+4;break}dt/=6}return[dt,ft,St,it[3]]}function hue2rgb(it,g,et){return et<0&&(et+=1),et>1&&(et-=1),et<1/6?it+(g-it)*6*et:et<1/2?g:et<2/3?it+(g-it)*(2/3-et)*6:it}function hslToRgb(it){var g=it[0],et=it[1],ot=it[2],ut,ct,dt;if(et===0)ut=ot,dt=ot,ct=ot;else{var ft=ot<.5?ot*(1+et):ot+et-ot*et,St=2*ot-ft;ut=hue2rgb(St,ft,g+1/3),ct=hue2rgb(St,ft,g),dt=hue2rgb(St,ft,g-1/3)}return[ut,ct,dt,it[3]]}function linear(it,g,et,ot,ut){if((ot===void 0||ut===void 0)&&(ot=g,ut=et,g=0,et=1),et<g){var ct=et;et=g,g=ct}if(it<=g)return ot;if(it>=et)return ut;var dt=et===g?0:(it-g)/(et-g);if(!ot.length)return ot+(ut-ot)*dt;var ft,St=ot.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=ot[ft]+(ut[ft]-ot[ft])*dt;return kt}function random(it,g){if(g===void 0&&(it===void 0?(it=0,g=1):(g=it,it=void 0)),g.length){var et,ot=g.length;it||(it=createTypedArray("float32",ot));var ut=createTypedArray("float32",ot),ct=BMMath.random();for(et=0;et<ot;et+=1)ut[et]=it[et]+ct*(g[et]-it[et]);return ut}it===void 0&&(it=0);var dt=BMMath.random();return it+dt*(g-it)}function createPath(it,g,et,ot){var ut,ct=it.length,dt=shapePool.newElement();dt.setPathData(!!ot,ct);var ft=[0,0],St,kt;for(ut=0;ut<ct;ut+=1)St=g&&g[ut]?g[ut]:ft,kt=et&&et[ut]?et[ut]:ft,dt.setTripleAt(it[ut][0],it[ut][1],kt[0]+it[ut][0],kt[1]+it[ut][1],St[0]+it[ut][0],St[1]+it[ut][1],ut,!0);return dt}function initiateExpression(elem,data,property){function noOp(it){return it}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function it(g,et){var ot,ut,ct=this.pv.length?this.pv.length:1,dt=createTypedArray("float32",ct);g=5;var ft=Math.floor(time*g);for(ot=0,ut=0;ot<ft;){for(ut=0;ut<ct;ut+=1)dt[ut]+=-et+et*2*BMMath.random();ot+=1}var St=time*g,kt=St-Math.floor(St),Tt=createTypedArray("float32",ct);if(ct>1){for(ut=0;ut<ct;ut+=1)Tt[ut]=this.pv[ut]+dt[ut]+(-et+et*2*BMMath.random())*kt;return Tt}return this.pv+dt[0]+(-et+et*2*BMMath.random())*kt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(it,g){return loopIn(it,g,!0)}function loopOutDuration(it,g){return loopOut(it,g,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(it,g){var et=[g[0]-it[0],g[1]-it[1],g[2]-it[2]],ot=Math.atan2(et[0],Math.sqrt(et[1]*et[1]+et[2]*et[2]))/degToRads,ut=-Math.atan2(et[1],et[2])/degToRads;return[ut,ot,0]}function easeOut(it,g,et,ot,ut){return applyEase(easeOutBez,it,g,et,ot,ut)}function easeIn(it,g,et,ot,ut){return applyEase(easeInBez,it,g,et,ot,ut)}function ease(it,g,et,ot,ut){return applyEase(easeInOutBez,it,g,et,ot,ut)}function applyEase(it,g,et,ot,ut,ct){ut===void 0?(ut=et,ct=ot):g=(g-et)/(ot-et),g>1?g=1:g<0&&(g=0);var dt=it(g);if($bm_isInstanceOfArray(ut)){var ft,St=ut.length,kt=createTypedArray("float32",St);for(ft=0;ft<St;ft+=1)kt[ft]=(ct[ft]-ut[ft])*dt+ut[ft];return kt}return(ct-ut)*dt+ut}function nearestKey(it){var g,et=data.k.length,ot,ut;if(!data.k.length||typeof data.k[0]=="number")ot=0,ut=0;else if(ot=-1,it*=elem.comp.globalData.frameRate,it<data.k[0].t)ot=1,ut=data.k[0].t;else{for(g=0;g<et-1;g+=1)if(it===data.k[g].t){ot=g+1,ut=data.k[g].t;break}else if(it>data.k[g].t&&it<data.k[g+1].t){it-data.k[g].t>data.k[g+1].t-it?(ot=g+2,ut=data.k[g+1].t):(ot=g+1,ut=data.k[g].t);break}ot===-1&&(ot=g+1,ut=data.k[g].t)}var ct={};return ct.index=ot,ct.time=ut/elem.comp.globalData.frameRate,ct}function key(it){var g,et,ot;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+it);it-=1,g={time:data.k[it].t/elem.comp.globalData.frameRate,value:[]};var ut=Object.prototype.hasOwnProperty.call(data.k[it],"s")?data.k[it].s:data.k[it-1].e;for(ot=ut.length,et=0;et<ot;et+=1)g[et]=ut[et],g.value[et]=ut[et];return g}function framesToTime(it,g){return g||(g=elem.comp.globalData.frameRate),it/g}function timeToFrames(it,g){return!it&&it!==0&&(it=time),g||(g=elem.comp.globalData.frameRate),it*g}function seedRandom(it){BMMath.seedrandom(randSeed+it)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(it,g){return typeof value=="string"?g===void 0?value.substring(it):value.substring(it,g):""}function substr(it,g){return typeof value=="string"?g===void 0?value.substr(it):value.substr(it,g):""}function posterizeTime(it){time=it===0?0:Math.floor(time*it)/it,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(it){return value=it,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var it={};it.initExpressions=g,it.resetFrame=ExpressionManager.resetFrame;function g(et){var ot=0,ut=[];function ct(){ot+=1}function dt(){ot-=1,ot===0&&St()}function ft(kt){ut.indexOf(kt)===-1&&ut.push(kt)}function St(){var kt,Tt=ut.length;for(kt=0;kt<Tt;kt+=1)ut[kt].release();ut.length=0}et.renderer.compInterface=CompExpressionInterface(et.renderer),et.renderer.globalData.projectInterface.registerComposition(et.renderer),et.renderer.globalData.pushExpression=ct,et.renderer.globalData.popExpression=dt,et.renderer.globalData.registerExpressionProperty=ft}return it}(),MaskManagerInterface=function(){function it(et,ot){this._mask=et,this._data=ot}Object.defineProperty(it.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(it.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var g=function(ot){var ut=createSizedArray(ot.viewData.length),ct,dt=ot.viewData.length;for(ct=0;ct<dt;ct+=1)ut[ct]=new it(ot.viewData[ct],ot.masksProperties[ct]);var ft=function(kt){for(ct=0;ct<dt;){if(ot.masksProperties[ct].nm===kt)return ut[ct];ct+=1}return null};return ft};return g}(),ExpressionPropertyInterface=function(){var it={pv:0,v:0,mult:1},g={pv:[0,0,0],v:[0,0,0],mult:1};function et(dt,ft,St){Object.defineProperty(dt,"velocity",{get:function(){return ft.getVelocityAtTime(ft.comp.currentFrame)}}),dt.numKeys=ft.keyframes?ft.keyframes.length:0,dt.key=function(kt){if(!dt.numKeys)return 0;var Tt="";"s"in ft.keyframes[kt-1]?Tt=ft.keyframes[kt-1].s:"e"in ft.keyframes[kt-2]?Tt=ft.keyframes[kt-2].e:Tt=ft.keyframes[kt-2].s;var Rt=St==="unidimensional"?new Number(Tt):Object.assign({},Tt);return Rt.time=ft.keyframes[kt-1].t/ft.elem.comp.globalData.frameRate,Rt.value=St==="unidimensional"?Tt[0]:Tt,Rt},dt.valueAtTime=ft.getValueAtTime,dt.speedAtTime=ft.getSpeedAtTime,dt.velocityAtTime=ft.getVelocityAtTime,dt.propertyGroup=ft.propertyGroup}function ot(dt){(!dt||!("pv"in dt))&&(dt=it);var ft=1/dt.mult,St=dt.pv*ft,kt=new Number(St);return kt.value=St,et(kt,dt,"unidimensional"),function(){return dt.k&&dt.getValue(),St=dt.v*ft,kt.value!==St&&(kt=new Number(St),kt.value=St,et(kt,dt,"unidimensional")),kt}}function ut(dt){(!dt||!("pv"in dt))&&(dt=g);var ft=1/dt.mult,St=dt.data&&dt.data.l||dt.pv.length,kt=createTypedArray("float32",St),Tt=createTypedArray("float32",St);return kt.value=Tt,et(kt,dt,"multidimensional"),function(){dt.k&&dt.getValue();for(var Rt=0;Rt<St;Rt+=1)Tt[Rt]=dt.v[Rt]*ft,kt[Rt]=Tt[Rt];return kt}}function ct(){return it}return function(dt){return dt?dt.propType==="unidimensional"?ot(dt):ut(dt):ct}}(),TransformExpressionInterface=function(){return function(it){function g(dt){switch(dt){case"scale":case"Scale":case"ADBE Scale":case 6:return g.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return g.rotation;case"ADBE Rotate X":return g.xRotation;case"ADBE Rotate Y":return g.yRotation;case"position":case"Position":case"ADBE Position":case 2:return g.position;case"ADBE Position_0":return g.xPosition;case"ADBE Position_1":return g.yPosition;case"ADBE Position_2":return g.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return g.anchorPoint;case"opacity":case"Opacity":case 11:return g.opacity;default:return null}}Object.defineProperty(g,"rotation",{get:ExpressionPropertyInterface(it.r||it.rz)}),Object.defineProperty(g,"zRotation",{get:ExpressionPropertyInterface(it.rz||it.r)}),Object.defineProperty(g,"xRotation",{get:ExpressionPropertyInterface(it.rx)}),Object.defineProperty(g,"yRotation",{get:ExpressionPropertyInterface(it.ry)}),Object.defineProperty(g,"scale",{get:ExpressionPropertyInterface(it.s)});var et,ot,ut,ct;return it.p?ct=ExpressionPropertyInterface(it.p):(et=ExpressionPropertyInterface(it.px),ot=ExpressionPropertyInterface(it.py),it.pz&&(ut=ExpressionPropertyInterface(it.pz))),Object.defineProperty(g,"position",{get:function(){return it.p?ct():[et(),ot(),ut?ut():0]}}),Object.defineProperty(g,"xPosition",{get:ExpressionPropertyInterface(it.px)}),Object.defineProperty(g,"yPosition",{get:ExpressionPropertyInterface(it.py)}),Object.defineProperty(g,"zPosition",{get:ExpressionPropertyInterface(it.pz)}),Object.defineProperty(g,"anchorPoint",{get:ExpressionPropertyInterface(it.a)}),Object.defineProperty(g,"opacity",{get:ExpressionPropertyInterface(it.o)}),Object.defineProperty(g,"skew",{get:ExpressionPropertyInterface(it.sk)}),Object.defineProperty(g,"skewAxis",{get:ExpressionPropertyInterface(it.sa)}),Object.defineProperty(g,"orientation",{get:ExpressionPropertyInterface(it.or)}),g}}(),LayerExpressionInterface=function(){function it(kt){var Tt=new Matrix;if(kt!==void 0){var Rt=this._elem.finalTransform.mProp.getValueAtTime(kt);Rt.clone(Tt)}else{var Ft=this._elem.finalTransform.mProp;Ft.applyToMatrix(Tt)}return Tt}function g(kt,Tt){var Rt=this.getMatrix(Tt);return Rt.props[12]=0,Rt.props[13]=0,Rt.props[14]=0,this.applyPoint(Rt,kt)}function et(kt,Tt){var Rt=this.getMatrix(Tt);return this.applyPoint(Rt,kt)}function ot(kt,Tt){var Rt=this.getMatrix(Tt);return Rt.props[12]=0,Rt.props[13]=0,Rt.props[14]=0,this.invertPoint(Rt,kt)}function ut(kt,Tt){var Rt=this.getMatrix(Tt);return this.invertPoint(Rt,kt)}function ct(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,Ft=this._elem.hierarchy.length;for(Rt=0;Rt<Ft;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(kt)}return kt.applyToPointArray(Tt[0],Tt[1],Tt[2]||0)}function dt(kt,Tt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,Ft=this._elem.hierarchy.length;for(Rt=0;Rt<Ft;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(kt)}return kt.inversePoint(Tt)}function ft(kt){var Tt=new Matrix;if(Tt.reset(),this._elem.finalTransform.mProp.applyToMatrix(Tt),this._elem.hierarchy&&this._elem.hierarchy.length){var Rt,Ft=this._elem.hierarchy.length;for(Rt=0;Rt<Ft;Rt+=1)this._elem.hierarchy[Rt].finalTransform.mProp.applyToMatrix(Tt);return Tt.inversePoint(kt)}return Tt.inversePoint(kt)}function St(){return[1,1,1,1]}return function(kt){var Tt;function Rt(zt){jt.mask=new MaskManagerInterface(zt,kt)}function Ft(zt){jt.effect=zt}function jt(zt){switch(zt){case"ADBE Root Vectors Group":case"Contents":case 2:return jt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Tt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return jt.effect;case"ADBE Text Properties":return jt.textInterface;default:return null}}jt.getMatrix=it,jt.invertPoint=dt,jt.applyPoint=ct,jt.toWorld=et,jt.toWorldVec=g,jt.fromWorld=ut,jt.fromWorldVec=ot,jt.toComp=et,jt.fromComp=ft,jt.sampleImage=St,jt.sourceRectAtTime=kt.sourceRectAtTime.bind(kt),jt._elem=kt,Tt=TransformExpressionInterface(kt.finalTransform.mProp);var Bt=getDescriptor(Tt,"anchorPoint");return Object.defineProperties(jt,{hasParent:{get:function(){return kt.hierarchy.length}},parent:{get:function(){return kt.hierarchy[0].layerInterface}},rotation:getDescriptor(Tt,"rotation"),scale:getDescriptor(Tt,"scale"),position:getDescriptor(Tt,"position"),opacity:getDescriptor(Tt,"opacity"),anchorPoint:Bt,anchor_point:Bt,transform:{get:function(){return Tt}},active:{get:function(){return kt.isInRange}}}),jt.startTime=kt.data.st,jt.index=kt.data.ind,jt.source=kt.data.refId,jt.height=kt.data.ty===0?kt.data.h:100,jt.width=kt.data.ty===0?kt.data.w:100,jt.inPoint=kt.data.ip/kt.comp.globalData.frameRate,jt.outPoint=kt.data.op/kt.comp.globalData.frameRate,jt._name=kt.data.nm,jt.registerMaskInterface=Rt,jt.registerEffectsInterface=Ft,jt}}(),propertyGroupFactory=function(){return function(it,g){return function(et){return et=et===void 0?1:et,et<=0?it:g(et-1)}}}(),PropertyInterface=function(){return function(it,g){var et={_name:it};function ot(ut){return ut=ut===void 0?1:ut,ut<=0?et:g(ut-1)}return ot}}(),EffectsExpressionInterface=function(){var it={createEffectsInterface:g};function g(ut,ct){if(ut.effectsManager){var dt=[],ft=ut.data.ef,St,kt=ut.effectsManager.effectElements.length;for(St=0;St<kt;St+=1)dt.push(et(ft[St],ut.effectsManager.effectElements[St],ct,ut));var Tt=ut.data.ef||[],Rt=function(jt){for(St=0,kt=Tt.length;St<kt;){if(jt===Tt[St].nm||jt===Tt[St].mn||jt===Tt[St].ix)return dt[St];St+=1}return null};return Object.defineProperty(Rt,"numProperties",{get:function(){return Tt.length}}),Rt}return null}function et(ut,ct,dt,ft){function St(jt){for(var Bt=ut.ef,zt=0,Ht=Bt.length;zt<Ht;){if(jt===Bt[zt].nm||jt===Bt[zt].mn||jt===Bt[zt].ix)return Bt[zt].ty===5?Tt[zt]:Tt[zt]();zt+=1}throw new Error}var kt=propertyGroupFactory(St,dt),Tt=[],Rt,Ft=ut.ef.length;for(Rt=0;Rt<Ft;Rt+=1)ut.ef[Rt].ty===5?Tt.push(et(ut.ef[Rt],ct.effectElements[Rt],ct.effectElements[Rt].propertyGroup,ft)):Tt.push(ot(ct.effectElements[Rt],ut.ef[Rt].ty,ft,kt));return ut.mn==="ADBE Color Control"&&Object.defineProperty(St,"color",{get:function(){return Tt[0]()}}),Object.defineProperties(St,{numProperties:{get:function(){return ut.np}},_name:{value:ut.nm},propertyGroup:{value:kt}}),St.enabled=ut.en!==0,St.active=St.enabled,St}function ot(ut,ct,dt,ft){var St=ExpressionPropertyInterface(ut.p);function kt(){return ct===10?dt.comp.compInterface(ut.p.v):St()}return ut.p.setGroupProperty&&ut.p.setGroupProperty(PropertyInterface("",ft)),kt}return it}(),ShapePathInterface=function(){return function(g,et,ot){var ut=et.sh;function ct(ft){return ft==="Shape"||ft==="shape"||ft==="Path"||ft==="path"||ft==="ADBE Vector Shape"||ft===2?ct.path:null}var dt=propertyGroupFactory(ct,ot);return ut.setGroupProperty(PropertyInterface("Path",dt)),Object.defineProperties(ct,{path:{get:function(){return ut.k&&ut.getValue(),ut}},shape:{get:function(){return ut.k&&ut.getValue(),ut}},_name:{value:g.nm},ix:{value:g.ix},propertyIndex:{value:g.ix},mn:{value:g.mn},propertyGroup:{value:ot}}),ct}}(),ShapeExpressionInterface=function(){function it(Bt,zt,Ht){var Ut=[],Kt,Yt=Bt?Bt.length:0;for(Kt=0;Kt<Yt;Kt+=1)Bt[Kt].ty==="gr"?Ut.push(et(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="fl"?Ut.push(ot(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="st"?Ut.push(dt(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="tm"?Ut.push(ft(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="tr"||(Bt[Kt].ty==="el"?Ut.push(kt(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="sr"?Ut.push(Tt(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="sh"?Ut.push(ShapePathInterface(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="rc"?Ut.push(Rt(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="rd"?Ut.push(Ft(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="rp"?Ut.push(jt(Bt[Kt],zt[Kt],Ht)):Bt[Kt].ty==="gf"?Ut.push(ut(Bt[Kt],zt[Kt],Ht)):Ut.push(ct(Bt[Kt],zt[Kt])));return Ut}function g(Bt,zt,Ht){var Ut,Kt=function(ar){for(var ir=0,lr=Ut.length;ir<lr;){if(Ut[ir]._name===ar||Ut[ir].mn===ar||Ut[ir].propertyIndex===ar||Ut[ir].ix===ar||Ut[ir].ind===ar)return Ut[ir];ir+=1}return typeof ar=="number"?Ut[ar-1]:null};Kt.propertyGroup=propertyGroupFactory(Kt,Ht),Ut=it(Bt.it,zt.it,Kt.propertyGroup),Kt.numProperties=Ut.length;var Yt=St(Bt.it[Bt.it.length-1],zt.it[zt.it.length-1],Kt.propertyGroup);return Kt.transform=Yt,Kt.propertyIndex=Bt.cix,Kt._name=Bt.nm,Kt}function et(Bt,zt,Ht){var Ut=function(ar){switch(ar){case"ADBE Vectors Group":case"Contents":case 2:return Ut.content;default:return Ut.transform}};Ut.propertyGroup=propertyGroupFactory(Ut,Ht);var Kt=g(Bt,zt,Ut.propertyGroup),Yt=St(Bt.it[Bt.it.length-1],zt.it[zt.it.length-1],Ut.propertyGroup);return Ut.content=Kt,Ut.transform=Yt,Object.defineProperty(Ut,"_name",{get:function(){return Bt.nm}}),Ut.numProperties=Bt.np,Ut.propertyIndex=Bt.ix,Ut.nm=Bt.nm,Ut.mn=Bt.mn,Ut}function ot(Bt,zt,Ht){function Ut(Kt){return Kt==="Color"||Kt==="color"?Ut.color:Kt==="Opacity"||Kt==="opacity"?Ut.opacity:null}return Object.defineProperties(Ut,{color:{get:ExpressionPropertyInterface(zt.c)},opacity:{get:ExpressionPropertyInterface(zt.o)},_name:{value:Bt.nm},mn:{value:Bt.mn}}),zt.c.setGroupProperty(PropertyInterface("Color",Ht)),zt.o.setGroupProperty(PropertyInterface("Opacity",Ht)),Ut}function ut(Bt,zt,Ht){function Ut(Kt){return Kt==="Start Point"||Kt==="start point"?Ut.startPoint:Kt==="End Point"||Kt==="end point"?Ut.endPoint:Kt==="Opacity"||Kt==="opacity"?Ut.opacity:null}return Object.defineProperties(Ut,{startPoint:{get:ExpressionPropertyInterface(zt.s)},endPoint:{get:ExpressionPropertyInterface(zt.e)},opacity:{get:ExpressionPropertyInterface(zt.o)},type:{get:function(){return"a"}},_name:{value:Bt.nm},mn:{value:Bt.mn}}),zt.s.setGroupProperty(PropertyInterface("Start Point",Ht)),zt.e.setGroupProperty(PropertyInterface("End Point",Ht)),zt.o.setGroupProperty(PropertyInterface("Opacity",Ht)),Ut}function ct(){function Bt(){return null}return Bt}function dt(Bt,zt,Ht){var Ut=propertyGroupFactory(lr,Ht),Kt=propertyGroupFactory(ir,Ut);function Yt(cr){Object.defineProperty(ir,Bt.d[cr].nm,{get:ExpressionPropertyInterface(zt.d.dataProps[cr].p)})}var er,ar=Bt.d?Bt.d.length:0,ir={};for(er=0;er<ar;er+=1)Yt(er),zt.d.dataProps[er].p.setGroupProperty(Kt);function lr(cr){return cr==="Color"||cr==="color"?lr.color:cr==="Opacity"||cr==="opacity"?lr.opacity:cr==="Stroke Width"||cr==="stroke width"?lr.strokeWidth:null}return Object.defineProperties(lr,{color:{get:ExpressionPropertyInterface(zt.c)},opacity:{get:ExpressionPropertyInterface(zt.o)},strokeWidth:{get:ExpressionPropertyInterface(zt.w)},dash:{get:function(){return ir}},_name:{value:Bt.nm},mn:{value:Bt.mn}}),zt.c.setGroupProperty(PropertyInterface("Color",Ut)),zt.o.setGroupProperty(PropertyInterface("Opacity",Ut)),zt.w.setGroupProperty(PropertyInterface("Stroke Width",Ut)),lr}function ft(Bt,zt,Ht){function Ut(Yt){return Yt===Bt.e.ix||Yt==="End"||Yt==="end"?Ut.end:Yt===Bt.s.ix?Ut.start:Yt===Bt.o.ix?Ut.offset:null}var Kt=propertyGroupFactory(Ut,Ht);return Ut.propertyIndex=Bt.ix,zt.s.setGroupProperty(PropertyInterface("Start",Kt)),zt.e.setGroupProperty(PropertyInterface("End",Kt)),zt.o.setGroupProperty(PropertyInterface("Offset",Kt)),Ut.propertyIndex=Bt.ix,Ut.propertyGroup=Ht,Object.defineProperties(Ut,{start:{get:ExpressionPropertyInterface(zt.s)},end:{get:ExpressionPropertyInterface(zt.e)},offset:{get:ExpressionPropertyInterface(zt.o)},_name:{value:Bt.nm}}),Ut.mn=Bt.mn,Ut}function St(Bt,zt,Ht){function Ut(Yt){return Bt.a.ix===Yt||Yt==="Anchor Point"?Ut.anchorPoint:Bt.o.ix===Yt||Yt==="Opacity"?Ut.opacity:Bt.p.ix===Yt||Yt==="Position"?Ut.position:Bt.r.ix===Yt||Yt==="Rotation"||Yt==="ADBE Vector Rotation"?Ut.rotation:Bt.s.ix===Yt||Yt==="Scale"?Ut.scale:Bt.sk&&Bt.sk.ix===Yt||Yt==="Skew"?Ut.skew:Bt.sa&&Bt.sa.ix===Yt||Yt==="Skew Axis"?Ut.skewAxis:null}var Kt=propertyGroupFactory(Ut,Ht);return zt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Kt)),zt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Kt)),zt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Kt)),zt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Kt)),zt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Kt)),zt.transform.mProps.sk&&(zt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Kt)),zt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Kt))),zt.transform.op.setGroupProperty(PropertyInterface("Opacity",Kt)),Object.defineProperties(Ut,{opacity:{get:ExpressionPropertyInterface(zt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(zt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(zt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(zt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(zt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(zt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(zt.transform.mProps.sa)},_name:{value:Bt.nm}}),Ut.ty="tr",Ut.mn=Bt.mn,Ut.propertyGroup=Ht,Ut}function kt(Bt,zt,Ht){function Ut(er){return Bt.p.ix===er?Ut.position:Bt.s.ix===er?Ut.size:null}var Kt=propertyGroupFactory(Ut,Ht);Ut.propertyIndex=Bt.ix;var Yt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Yt.s.setGroupProperty(PropertyInterface("Size",Kt)),Yt.p.setGroupProperty(PropertyInterface("Position",Kt)),Object.defineProperties(Ut,{size:{get:ExpressionPropertyInterface(Yt.s)},position:{get:ExpressionPropertyInterface(Yt.p)},_name:{value:Bt.nm}}),Ut.mn=Bt.mn,Ut}function Tt(Bt,zt,Ht){function Ut(er){return Bt.p.ix===er?Ut.position:Bt.r.ix===er?Ut.rotation:Bt.pt.ix===er?Ut.points:Bt.or.ix===er||er==="ADBE Vector Star Outer Radius"?Ut.outerRadius:Bt.os.ix===er?Ut.outerRoundness:Bt.ir&&(Bt.ir.ix===er||er==="ADBE Vector Star Inner Radius")?Ut.innerRadius:Bt.is&&Bt.is.ix===er?Ut.innerRoundness:null}var Kt=propertyGroupFactory(Ut,Ht),Yt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Ut.propertyIndex=Bt.ix,Yt.or.setGroupProperty(PropertyInterface("Outer Radius",Kt)),Yt.os.setGroupProperty(PropertyInterface("Outer Roundness",Kt)),Yt.pt.setGroupProperty(PropertyInterface("Points",Kt)),Yt.p.setGroupProperty(PropertyInterface("Position",Kt)),Yt.r.setGroupProperty(PropertyInterface("Rotation",Kt)),Bt.ir&&(Yt.ir.setGroupProperty(PropertyInterface("Inner Radius",Kt)),Yt.is.setGroupProperty(PropertyInterface("Inner Roundness",Kt))),Object.defineProperties(Ut,{position:{get:ExpressionPropertyInterface(Yt.p)},rotation:{get:ExpressionPropertyInterface(Yt.r)},points:{get:ExpressionPropertyInterface(Yt.pt)},outerRadius:{get:ExpressionPropertyInterface(Yt.or)},outerRoundness:{get:ExpressionPropertyInterface(Yt.os)},innerRadius:{get:ExpressionPropertyInterface(Yt.ir)},innerRoundness:{get:ExpressionPropertyInterface(Yt.is)},_name:{value:Bt.nm}}),Ut.mn=Bt.mn,Ut}function Rt(Bt,zt,Ht){function Ut(er){return Bt.p.ix===er?Ut.position:Bt.r.ix===er?Ut.roundness:Bt.s.ix===er||er==="Size"||er==="ADBE Vector Rect Size"?Ut.size:null}var Kt=propertyGroupFactory(Ut,Ht),Yt=zt.sh.ty==="tm"?zt.sh.prop:zt.sh;return Ut.propertyIndex=Bt.ix,Yt.p.setGroupProperty(PropertyInterface("Position",Kt)),Yt.s.setGroupProperty(PropertyInterface("Size",Kt)),Yt.r.setGroupProperty(PropertyInterface("Rotation",Kt)),Object.defineProperties(Ut,{position:{get:ExpressionPropertyInterface(Yt.p)},roundness:{get:ExpressionPropertyInterface(Yt.r)},size:{get:ExpressionPropertyInterface(Yt.s)},_name:{value:Bt.nm}}),Ut.mn=Bt.mn,Ut}function Ft(Bt,zt,Ht){function Ut(er){return Bt.r.ix===er||er==="Round Corners 1"?Ut.radius:null}var Kt=propertyGroupFactory(Ut,Ht),Yt=zt;return Ut.propertyIndex=Bt.ix,Yt.rd.setGroupProperty(PropertyInterface("Radius",Kt)),Object.defineProperties(Ut,{radius:{get:ExpressionPropertyInterface(Yt.rd)},_name:{value:Bt.nm}}),Ut.mn=Bt.mn,Ut}function jt(Bt,zt,Ht){function Ut(er){return Bt.c.ix===er||er==="Copies"?Ut.copies:Bt.o.ix===er||er==="Offset"?Ut.offset:null}var Kt=propertyGroupFactory(Ut,Ht),Yt=zt;return Ut.propertyIndex=Bt.ix,Yt.c.setGroupProperty(PropertyInterface("Copies",Kt)),Yt.o.setGroupProperty(PropertyInterface("Offset",Kt)),Object.defineProperties(Ut,{copies:{get:ExpressionPropertyInterface(Yt.c)},offset:{get:ExpressionPropertyInterface(Yt.o)},_name:{value:Bt.nm}}),Ut.mn=Bt.mn,Ut}return function(Bt,zt,Ht){var Ut;function Kt(er){if(typeof er=="number")return er=er===void 0?1:er,er===0?Ht:Ut[er-1];for(var ar=0,ir=Ut.length;ar<ir;){if(Ut[ar]._name===er)return Ut[ar];ar+=1}return null}function Yt(){return Ht}return Kt.propertyGroup=propertyGroupFactory(Kt,Yt),Ut=it(Bt,zt,Kt.propertyGroup),Kt.numProperties=Ut.length,Kt._name="Contents",Kt}}(),TextExpressionInterface=function(){return function(it){var g;function et(ot){switch(ot){case"ADBE Text Document":return et.sourceText;default:return null}}return Object.defineProperty(et,"sourceText",{get:function(){it.textProperty.getValue();var ut=it.textProperty.currentData.t;return(!g||ut!==g.value)&&(g=new String(ut),g.value=ut||new String(ut),Object.defineProperty(g,"style",{get:function(){return{fillColor:it.textProperty.currentData.fc}}})),g}}),et}}();function _typeof(it){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(et){return typeof et}:_typeof=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof(it)}var FootageInterface=function(){var it=function(ot){var ut="",ct=ot.getFootageData();function dt(){return ut="",ct=ot.getFootageData(),ft}function ft(St){if(ct[St])return ut=St,ct=ct[St],_typeof(ct)==="object"?ft:ct;var kt=St.indexOf(ut);if(kt!==-1){var Tt=parseInt(St.substr(kt+ut.length),10);return ct=ct[Tt],_typeof(ct)==="object"?ft:ct}return""}return dt},g=function(ot){function ut(ct){return ct==="Outline"?ut.outlineInterface():null}return ut._name="Outline",ut.outlineInterface=it(ot),ut};return function(et){function ot(ut){return ut==="Data"?ot.dataInterface:null}return ot._name="Data",ot.dataInterface=g(et),ot}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(it){return interfaces[it]||null}var expressionHelpers=function(){function it(dt,ft,St){ft.x&&(St.k=!0,St.x=!0,St.initiateExpression=ExpressionManager.initiateExpression,St.effectsSequence.push(St.initiateExpression(dt,ft,St).bind(St)))}function g(dt){return dt*=this.elem.globalData.frameRate,dt-=this.offsetTime,dt!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<dt?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(dt,this._cachingAtTime),this._cachingAtTime.lastFrame=dt),this._cachingAtTime.value}function et(dt){var ft=-.01,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt=0;if(St.length){var Rt;for(Rt=0;Rt<St.length;Rt+=1)Tt+=Math.pow(kt[Rt]-St[Rt],2);Tt=Math.sqrt(Tt)*100}else Tt=0;return Tt}function ot(dt){if(this.vel!==void 0)return this.vel;var ft=-.001,St=this.getValueAtTime(dt),kt=this.getValueAtTime(dt+ft),Tt;if(St.length){Tt=createTypedArray("float32",St.length);var Rt;for(Rt=0;Rt<St.length;Rt+=1)Tt[Rt]=(kt[Rt]-St[Rt])/ft}else Tt=(kt-St)/ft;return Tt}function ut(){return this.pv}function ct(dt){this.propertyGroup=dt}return{searchExpressions:it,getSpeedAtTime:et,getVelocityAtTime:ot,getValueAtTime:g,getStaticValueAtTime:ut,setGroupProperty:ct}}();function addPropertyDecorator(){function it(Ft,jt,Bt){if(!this.k||!this.keyframes)return this.pv;Ft=Ft?Ft.toLowerCase():"";var zt=this.comp.renderedFrame,Ht=this.keyframes,Ut=Ht[Ht.length-1].t;if(zt<=Ut)return this.pv;var Kt,Yt;Bt?(jt?Kt=Math.abs(Ut-this.elem.comp.globalData.frameRate*jt):Kt=Math.max(0,Ut-this.elem.data.ip),Yt=Ut-Kt):((!jt||jt>Ht.length-1)&&(jt=Ht.length-1),Yt=Ht[Ht.length-1-jt].t,Kt=Ut-Yt);var er,ar,ir;if(Ft==="pingpong"){var lr=Math.floor((zt-Yt)/Kt);if(lr%2!==0)return this.getValueAtTime((Kt-(zt-Yt)%Kt+Yt)/this.comp.globalData.frameRate,0)}else if(Ft==="offset"){var cr=this.getValueAtTime(Yt/this.comp.globalData.frameRate,0),vr=this.getValueAtTime(Ut/this.comp.globalData.frameRate,0),xr=this.getValueAtTime(((zt-Yt)%Kt+Yt)/this.comp.globalData.frameRate,0),yr=Math.floor((zt-Yt)/Kt);if(this.pv.length){for(ir=new Array(cr.length),ar=ir.length,er=0;er<ar;er+=1)ir[er]=(vr[er]-cr[er])*yr+xr[er];return ir}return(vr-cr)*yr+xr}else if(Ft==="continue"){var Sr=this.getValueAtTime(Ut/this.comp.globalData.frameRate,0),kr=this.getValueAtTime((Ut-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ir=new Array(Sr.length),ar=ir.length,er=0;er<ar;er+=1)ir[er]=Sr[er]+(Sr[er]-kr[er])*((zt-Ut)/this.comp.globalData.frameRate)/5e-4;return ir}return Sr+(Sr-kr)*((zt-Ut)/.001)}return this.getValueAtTime(((zt-Yt)%Kt+Yt)/this.comp.globalData.frameRate,0)}function g(Ft,jt,Bt){if(!this.k)return this.pv;Ft=Ft?Ft.toLowerCase():"";var zt=this.comp.renderedFrame,Ht=this.keyframes,Ut=Ht[0].t;if(zt>=Ut)return this.pv;var Kt,Yt;Bt?(jt?Kt=Math.abs(this.elem.comp.globalData.frameRate*jt):Kt=Math.max(0,this.elem.data.op-Ut),Yt=Ut+Kt):((!jt||jt>Ht.length-1)&&(jt=Ht.length-1),Yt=Ht[jt].t,Kt=Yt-Ut);var er,ar,ir;if(Ft==="pingpong"){var lr=Math.floor((Ut-zt)/Kt);if(lr%2===0)return this.getValueAtTime(((Ut-zt)%Kt+Ut)/this.comp.globalData.frameRate,0)}else if(Ft==="offset"){var cr=this.getValueAtTime(Ut/this.comp.globalData.frameRate,0),vr=this.getValueAtTime(Yt/this.comp.globalData.frameRate,0),xr=this.getValueAtTime((Kt-(Ut-zt)%Kt+Ut)/this.comp.globalData.frameRate,0),yr=Math.floor((Ut-zt)/Kt)+1;if(this.pv.length){for(ir=new Array(cr.length),ar=ir.length,er=0;er<ar;er+=1)ir[er]=xr[er]-(vr[er]-cr[er])*yr;return ir}return xr-(vr-cr)*yr}else if(Ft==="continue"){var Sr=this.getValueAtTime(Ut/this.comp.globalData.frameRate,0),kr=this.getValueAtTime((Ut+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ir=new Array(Sr.length),ar=ir.length,er=0;er<ar;er+=1)ir[er]=Sr[er]+(Sr[er]-kr[er])*(Ut-zt)/.001;return ir}return Sr+(Sr-kr)*(Ut-zt)/.001}return this.getValueAtTime((Kt-((Ut-zt)%Kt+Ut))/this.comp.globalData.frameRate,0)}function et(Ft,jt){if(!this.k)return this.pv;if(Ft=(Ft||.4)*.5,jt=Math.floor(jt||5),jt<=1)return this.pv;var Bt=this.comp.renderedFrame/this.comp.globalData.frameRate,zt=Bt-Ft,Ht=Bt+Ft,Ut=jt>1?(Ht-zt)/(jt-1):1,Kt=0,Yt=0,er;this.pv.length?er=createTypedArray("float32",this.pv.length):er=0;for(var ar;Kt<jt;){if(ar=this.getValueAtTime(zt+Kt*Ut),this.pv.length)for(Yt=0;Yt<this.pv.length;Yt+=1)er[Yt]+=ar[Yt];else er+=ar;Kt+=1}if(this.pv.length)for(Yt=0;Yt<this.pv.length;Yt+=1)er[Yt]/=jt;else er/=jt;return er}function ot(Ft){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var jt=this._transformCachingAtTime.v;if(jt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Bt=this.a.getValueAtTime(Ft);jt.translate(-Bt[0]*this.a.mult,-Bt[1]*this.a.mult,Bt[2]*this.a.mult)}if(this.appliedTransformations<2){var zt=this.s.getValueAtTime(Ft);jt.scale(zt[0]*this.s.mult,zt[1]*this.s.mult,zt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Ht=this.sk.getValueAtTime(Ft),Ut=this.sa.getValueAtTime(Ft);jt.skewFromAxis(-Ht*this.sk.mult,Ut*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Kt=this.r.getValueAtTime(Ft);jt.rotate(-Kt*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Yt=this.rz.getValueAtTime(Ft),er=this.ry.getValueAtTime(Ft),ar=this.rx.getValueAtTime(Ft),ir=this.or.getValueAtTime(Ft);jt.rotateZ(-Yt*this.rz.mult).rotateY(er*this.ry.mult).rotateX(ar*this.rx.mult).rotateZ(-ir[2]*this.or.mult).rotateY(ir[1]*this.or.mult).rotateX(ir[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var lr=this.px.getValueAtTime(Ft),cr=this.py.getValueAtTime(Ft);if(this.data.p.z){var vr=this.pz.getValueAtTime(Ft);jt.translate(lr*this.px.mult,cr*this.py.mult,-vr*this.pz.mult)}else jt.translate(lr*this.px.mult,cr*this.py.mult,0)}else{var xr=this.p.getValueAtTime(Ft);jt.translate(xr[0]*this.p.mult,xr[1]*this.p.mult,-xr[2]*this.p.mult)}return jt}function ut(){return this.v.clone(new Matrix)}var ct=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(Ft,jt,Bt){var zt=ct(Ft,jt,Bt);return zt.dynamicProperties.length?zt.getValueAtTime=ot.bind(zt):zt.getValueAtTime=ut.bind(zt),zt.setGroupProperty=expressionHelpers.setGroupProperty,zt};var dt=PropertyFactory.getProp;PropertyFactory.getProp=function(Ft,jt,Bt,zt,Ht){var Ut=dt(Ft,jt,Bt,zt,Ht);Ut.kf?Ut.getValueAtTime=expressionHelpers.getValueAtTime.bind(Ut):Ut.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Ut),Ut.setGroupProperty=expressionHelpers.setGroupProperty,Ut.loopOut=it,Ut.loopIn=g,Ut.smooth=et,Ut.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Ut),Ut.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Ut),Ut.numKeys=jt.a===1?jt.k.length:0,Ut.propertyIndex=jt.ix;var Kt=0;return Bt!==0&&(Kt=createTypedArray("float32",jt.a===1?jt.k[0].s.length:jt.k.length)),Ut._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Kt},expressionHelpers.searchExpressions(Ft,jt,Ut),Ut.k&&Ht.addDynamicProperty(Ut),Ut};function ft(Ft){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),Ft*=this.elem.globalData.frameRate,Ft-=this.offsetTime,Ft!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<Ft?this._caching.lastIndex:0,this._cachingAtTime.lastTime=Ft,this.interpolateShape(Ft,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var St=ShapePropertyFactory.getConstructorFunction(),kt=ShapePropertyFactory.getKeyframedConstructorFunction();function Tt(){}Tt.prototype={vertices:function(jt,Bt){this.k&&this.getValue();var zt=this.v;Bt!==void 0&&(zt=this.getValueAtTime(Bt,0));var Ht,Ut=zt._length,Kt=zt[jt],Yt=zt.v,er=createSizedArray(Ut);for(Ht=0;Ht<Ut;Ht+=1)jt==="i"||jt==="o"?er[Ht]=[Kt[Ht][0]-Yt[Ht][0],Kt[Ht][1]-Yt[Ht][1]]:er[Ht]=[Kt[Ht][0],Kt[Ht][1]];return er},points:function(jt){return this.vertices("v",jt)},inTangents:function(jt){return this.vertices("i",jt)},outTangents:function(jt){return this.vertices("o",jt)},isClosed:function(){return this.v.c},pointOnPath:function(jt,Bt){var zt=this.v;Bt!==void 0&&(zt=this.getValueAtTime(Bt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(zt));for(var Ht=this._segmentsLength,Ut=Ht.lengths,Kt=Ht.totalLength*jt,Yt=0,er=Ut.length,ar=0,ir;Yt<er;){if(ar+Ut[Yt].addedLength>Kt){var lr=Yt,cr=zt.c&&Yt===er-1?0:Yt+1,vr=(Kt-ar)/Ut[Yt].addedLength;ir=bez.getPointInSegment(zt.v[lr],zt.v[cr],zt.o[lr],zt.i[cr],vr,Ut[Yt]);break}else ar+=Ut[Yt].addedLength;Yt+=1}return ir||(ir=zt.c?[zt.v[0][0],zt.v[0][1]]:[zt.v[zt._length-1][0],zt.v[zt._length-1][1]]),ir},vectorOnPath:function(jt,Bt,zt){jt==1?jt=this.v.c:jt==0&&(jt=.999);var Ht=this.pointOnPath(jt,Bt),Ut=this.pointOnPath(jt+.001,Bt),Kt=Ut[0]-Ht[0],Yt=Ut[1]-Ht[1],er=Math.sqrt(Math.pow(Kt,2)+Math.pow(Yt,2));if(er===0)return[0,0];var ar=zt==="tangent"?[Kt/er,Yt/er]:[-Yt/er,Kt/er];return ar},tangentOnPath:function(jt,Bt){return this.vectorOnPath(jt,Bt,"tangent")},normalOnPath:function(jt,Bt){return this.vectorOnPath(jt,Bt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Tt],St),extendPrototype([Tt],kt),kt.prototype.getValueAtTime=ft,kt.prototype.initiateExpression=ExpressionManager.initiateExpression;var Rt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(Ft,jt,Bt,zt,Ht){var Ut=Rt(Ft,jt,Bt,zt,Ht);return Ut.propertyIndex=jt.ix,Ut.lock=!1,Bt===3?expressionHelpers.searchExpressions(Ft,jt.pt,Ut):Bt===4&&expressionHelpers.searchExpressions(Ft,jt.ks,Ut),Ut.k&&Ft.addDynamicProperty(Ut),Ut}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function it(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(g,et){var ot=this.calculateExpression(et);if(g.t!==ot){var ut={};return this.copyData(ut,g),ut.t=ot.toString(),ut.__complete=!1,ut}return g},TextProperty.prototype.searchProperty=function(){var g=this.searchKeyframes(),et=this.searchExpressions();return this.kf=g||et,this.kf},TextProperty.prototype.searchExpressions=it}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function it(g,et){var ot=createNS("feMerge");ot.setAttribute("result",g);var ut,ct;for(ct=0;ct<et.length;ct+=1)ut=createNS("feMergeNode"),ut.setAttribute("in",et[ct]),ot.appendChild(ut),ot.appendChild(ut);return ot}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(it,g,et,ot,ut){this.filterManager=g;var ct=createNS("feColorMatrix");ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","linearRGB"),ct.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ct,ct.setAttribute("result",ot+"_tint_1"),it.appendChild(ct),ct=createNS("feColorMatrix"),ct.setAttribute("type","matrix"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ct.setAttribute("result",ot+"_tint_2"),it.appendChild(ct),this.matrixFilter=ct;var dt=this.createMergeNode(ot,[ut,ot+"_tint_1",ot+"_tint_2"]);it.appendChild(dt)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+ot+" 0"),this.matrixFilter.setAttribute("values",et[0]-g[0]+" 0 0 0 "+g[0]+" "+(et[1]-g[1])+" 0 0 0 "+g[1]+" "+(et[2]-g[2])+" 0 0 0 "+g[2]+" 0 0 0 1 0")}};function SVGFillFilter(it,g,et,ot){this.filterManager=g;var ut=createNS("feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ut.setAttribute("result",ot),it.appendChild(ut),this.matrixFilter=ut}SVGFillFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[2].p.v,et=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+g[0]+" 0 0 0 0 "+g[1]+" 0 0 0 0 "+g[2]+" 0 0 0 "+et+" 0")}};function SVGStrokeEffect(it,g,et){this.initialized=!1,this.filterManager=g,this.elem=et,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var it=this.elem.layerElement.children||this.elem.layerElement.childNodes,g,et,ot,ut;for(this.filterManager.effectElements[1].p.v===1?(ut=this.elem.maskManager.masksProperties.length,ot=0):(ot=this.filterManager.effectElements[0].p.v-1,ut=ot+1),et=createNS("g"),et.setAttribute("fill","none"),et.setAttribute("stroke-linecap","round"),et.setAttribute("stroke-dashoffset",1),ot;ot<ut;ot+=1)g=createNS("path"),et.appendChild(g),this.paths.push({p:g,m:ot});if(this.filterManager.effectElements[10].p.v===3){var ct=createNS("mask"),dt=createElementID();ct.setAttribute("id",dt),ct.setAttribute("mask-type","alpha"),ct.appendChild(et),this.elem.globalData.defs.appendChild(ct);var ft=createNS("g");for(ft.setAttribute("mask","url("+getLocationHref()+"#"+dt+")");it[0];)ft.appendChild(it[0]);this.elem.layerElement.appendChild(ft),this.masker=ct,et.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(it=this.elem.layerElement.children||this.elem.layerElement.childNodes;it.length;)this.elem.layerElement.removeChild(it[0]);this.elem.layerElement.appendChild(et),this.elem.layerElement.removeAttribute("mask"),et.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=et},SVGStrokeEffect.prototype.renderFrame=function(it){this.initialized||this.initialize();var g,et=this.paths.length,ot,ut;for(g=0;g<et;g+=1)if(this.paths[g].m!==-1&&(ot=this.elem.maskManager.viewData[this.paths[g].m],ut=this.paths[g].p,(it||this.filterManager._mdf||ot.prop._mdf)&&ut.setAttribute("d",ot.lastPath),it||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||ot.prop._mdf)){var ct;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var dt=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ft=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,St=ut.getTotalLength();ct="0 0 0 "+St*dt+" ";var kt=St*(ft-dt),Tt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Rt=Math.floor(kt/Tt),Ft;for(Ft=0;Ft<Rt;Ft+=1)ct+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";ct+="0 "+St*10+" 0 0"}else ct="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;ut.setAttribute("stroke-dasharray",ct)}if((it||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(it||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(it||this.filterManager.effectElements[3].p._mdf)){var jt=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(jt[0]*255)+","+bmFloor(jt[1]*255)+","+bmFloor(jt[2]*255)+")")}};function SVGTritoneFilter(it,g,et,ot){this.filterManager=g;var ut=createNS("feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("color-interpolation-filters","linearRGB"),ut.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),it.appendChild(ut);var ct=createNS("feComponentTransfer");ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",ot),this.matrixFilter=ct;var dt=createNS("feFuncR");dt.setAttribute("type","table"),ct.appendChild(dt),this.feFuncR=dt;var ft=createNS("feFuncG");ft.setAttribute("type","table"),ct.appendChild(ft),this.feFuncG=ft;var St=createNS("feFuncB");St.setAttribute("type","table"),ct.appendChild(St),this.feFuncB=St,it.appendChild(ct)}SVGTritoneFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=this.filterManager.effectElements[0].p.v,et=this.filterManager.effectElements[1].p.v,ot=this.filterManager.effectElements[2].p.v,ut=ot[0]+" "+et[0]+" "+g[0],ct=ot[1]+" "+et[1]+" "+g[1],dt=ot[2]+" "+et[2]+" "+g[2];this.feFuncR.setAttribute("tableValues",ut),this.feFuncG.setAttribute("tableValues",ct),this.feFuncB.setAttribute("tableValues",dt)}};function SVGProLevelsFilter(it,g,et,ot){this.filterManager=g;var ut=this.filterManager.effectElements,ct=createNS("feComponentTransfer");(ut[10].p.k||ut[10].p.v!==0||ut[11].p.k||ut[11].p.v!==1||ut[12].p.k||ut[12].p.v!==1||ut[13].p.k||ut[13].p.v!==0||ut[14].p.k||ut[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ct)),(ut[17].p.k||ut[17].p.v!==0||ut[18].p.k||ut[18].p.v!==1||ut[19].p.k||ut[19].p.v!==1||ut[20].p.k||ut[20].p.v!==0||ut[21].p.k||ut[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ct)),(ut[24].p.k||ut[24].p.v!==0||ut[25].p.k||ut[25].p.v!==1||ut[26].p.k||ut[26].p.v!==1||ut[27].p.k||ut[27].p.v!==0||ut[28].p.k||ut[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ct)),(ut[31].p.k||ut[31].p.v!==0||ut[32].p.k||ut[32].p.v!==1||ut[33].p.k||ut[33].p.v!==1||ut[34].p.k||ut[34].p.v!==0||ut[35].p.k||ut[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ct)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ct.setAttribute("color-interpolation-filters","sRGB"),it.appendChild(ct)),(ut[3].p.k||ut[3].p.v!==0||ut[4].p.k||ut[4].p.v!==1||ut[5].p.k||ut[5].p.v!==1||ut[6].p.k||ut[6].p.v!==0||ut[7].p.k||ut[7].p.v!==1)&&(ct=createNS("feComponentTransfer"),ct.setAttribute("color-interpolation-filters","sRGB"),ct.setAttribute("result",ot),it.appendChild(ct),this.feFuncRComposed=this.createFeFunc("feFuncR",ct),this.feFuncGComposed=this.createFeFunc("feFuncG",ct),this.feFuncBComposed=this.createFeFunc("feFuncB",ct))}SVGProLevelsFilter.prototype.createFeFunc=function(it,g){var et=createNS(it);return et.setAttribute("type","table"),g.appendChild(et),et},SVGProLevelsFilter.prototype.getTableValue=function(it,g,et,ot,ut){for(var ct=0,dt=256,ft,St=Math.min(it,g),kt=Math.max(it,g),Tt=Array.call(null,{length:dt}),Rt,Ft=0,jt=ut-ot,Bt=g-it;ct<=256;)ft=ct/256,ft<=St?Rt=Bt<0?ut:ot:ft>=kt?Rt=Bt<0?ot:ut:Rt=ot+jt*Math.pow((ft-it)/Bt,1/et),Tt[Ft]=Rt,Ft+=1,ct+=256/(dt-1);return Tt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g,et=this.filterManager.effectElements;this.feFuncRComposed&&(it||et[3].p._mdf||et[4].p._mdf||et[5].p._mdf||et[6].p._mdf||et[7].p._mdf)&&(g=this.getTableValue(et[3].p.v,et[4].p.v,et[5].p.v,et[6].p.v,et[7].p.v),this.feFuncRComposed.setAttribute("tableValues",g),this.feFuncGComposed.setAttribute("tableValues",g),this.feFuncBComposed.setAttribute("tableValues",g)),this.feFuncR&&(it||et[10].p._mdf||et[11].p._mdf||et[12].p._mdf||et[13].p._mdf||et[14].p._mdf)&&(g=this.getTableValue(et[10].p.v,et[11].p.v,et[12].p.v,et[13].p.v,et[14].p.v),this.feFuncR.setAttribute("tableValues",g)),this.feFuncG&&(it||et[17].p._mdf||et[18].p._mdf||et[19].p._mdf||et[20].p._mdf||et[21].p._mdf)&&(g=this.getTableValue(et[17].p.v,et[18].p.v,et[19].p.v,et[20].p.v,et[21].p.v),this.feFuncG.setAttribute("tableValues",g)),this.feFuncB&&(it||et[24].p._mdf||et[25].p._mdf||et[26].p._mdf||et[27].p._mdf||et[28].p._mdf)&&(g=this.getTableValue(et[24].p.v,et[25].p.v,et[26].p.v,et[27].p.v,et[28].p.v),this.feFuncB.setAttribute("tableValues",g)),this.feFuncA&&(it||et[31].p._mdf||et[32].p._mdf||et[33].p._mdf||et[34].p._mdf||et[35].p._mdf)&&(g=this.getTableValue(et[31].p.v,et[32].p.v,et[33].p.v,et[34].p.v,et[35].p.v),this.feFuncA.setAttribute("tableValues",g))}};function SVGDropShadowEffect(it,g,et,ot,ut){var ct=g.container.globalData.renderConfig.filterSize,dt=g.data.fs||ct;it.setAttribute("x",dt.x||ct.x),it.setAttribute("y",dt.y||ct.y),it.setAttribute("width",dt.width||ct.width),it.setAttribute("height",dt.height||ct.height),this.filterManager=g;var ft=createNS("feGaussianBlur");ft.setAttribute("in","SourceAlpha"),ft.setAttribute("result",ot+"_drop_shadow_1"),ft.setAttribute("stdDeviation","0"),this.feGaussianBlur=ft,it.appendChild(ft);var St=createNS("feOffset");St.setAttribute("dx","25"),St.setAttribute("dy","0"),St.setAttribute("in",ot+"_drop_shadow_1"),St.setAttribute("result",ot+"_drop_shadow_2"),this.feOffset=St,it.appendChild(St);var kt=createNS("feFlood");kt.setAttribute("flood-color","#00ff00"),kt.setAttribute("flood-opacity","1"),kt.setAttribute("result",ot+"_drop_shadow_3"),this.feFlood=kt,it.appendChild(kt);var Tt=createNS("feComposite");Tt.setAttribute("in",ot+"_drop_shadow_3"),Tt.setAttribute("in2",ot+"_drop_shadow_2"),Tt.setAttribute("operator","in"),Tt.setAttribute("result",ot+"_drop_shadow_4"),it.appendChild(Tt);var Rt=this.createMergeNode(ot,[ot+"_drop_shadow_4",ut]);it.appendChild(Rt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){if((it||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),it||this.filterManager.effectElements[0].p._mdf){var g=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(g[0]*255),Math.round(g[1]*255),Math.round(g[2]*255)))}if((it||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),it||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var et=this.filterManager.effectElements[3].p.v,ot=(this.filterManager.effectElements[2].p.v-90)*degToRads,ut=et*Math.cos(ot),ct=et*Math.sin(ot);this.feOffset.setAttribute("dx",ut),this.feOffset.setAttribute("dy",ct)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(it,g,et){this.initialized=!1,this.filterManager=g,this.filterElem=it,this.elem=et,et.matteElement=createNS("g"),et.matteElement.appendChild(et.layerElement),et.matteElement.appendChild(et.transformedElement),et.baseElement=et.matteElement}SVGMatte3Effect.prototype.findSymbol=function(it){for(var g=0,et=_svgMatteSymbols.length;g<et;){if(_svgMatteSymbols[g]===it)return _svgMatteSymbols[g];g+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(it,g){var et=it.layerElement.parentNode;if(et){for(var ot=et.children,ut=0,ct=ot.length;ut<ct&&ot[ut]!==it.layerElement;)ut+=1;var dt;ut<=ct-2&&(dt=ot[ut+1]);var ft=createNS("use");ft.setAttribute("href","#"+g),dt?et.insertBefore(ft,dt):et.appendChild(ft)}},SVGMatte3Effect.prototype.setElementAsMask=function(it,g){if(!this.findSymbol(g)){var et=createElementID(),ot=createNS("mask");ot.setAttribute("id",g.layerId),ot.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(g);var ut=it.globalData.defs;ut.appendChild(ot);var ct=createNS("symbol");ct.setAttribute("id",et),this.replaceInParent(g,et),ct.appendChild(g.layerElement),ut.appendChild(ct);var dt=createNS("use");dt.setAttribute("href","#"+et),ot.appendChild(dt),g.data.hd=!1,g.show()}it.setMatte(g.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var it=this.filterManager.effectElements[0].p.v,g=this.elem.comp.elements,et=0,ot=g.length;et<ot;)g[et]&&g[et].data.ind===it&&this.setElementAsMask(this.elem,g[et]),et+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(it,g,et,ot){it.setAttribute("x","-100%"),it.setAttribute("y","-100%"),it.setAttribute("width","300%"),it.setAttribute("height","300%"),this.filterManager=g;var ut=createNS("feGaussianBlur");ut.setAttribute("result",ot),it.appendChild(ut),this.feGaussianBlur=ut}SVGGaussianBlurEffect.prototype.renderFrame=function(it){if(it||this.filterManager._mdf){var g=.3,et=this.filterManager.effectElements[0].p.v*g,ot=this.filterManager.effectElements[1].p.v,ut=ot==3?0:et,ct=ot==2?0:et;this.feGaussianBlur.setAttribute("stdDeviation",ut+" "+ct);var dt=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",dt)}};function TransformEffect(){}TransformEffect.prototype.init=function(it){this.effectsManager=it,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(it){if(this._opMdf=!1,this._mdf=!1,it||this.effectsManager._mdf){var g=this.effectsManager.effectElements,et=g[0].p.v,ot=g[1].p.v,ut=g[2].p.v===1,ct=g[3].p.v,dt=ut?ct:g[4].p.v,ft=g[5].p.v,St=g[6].p.v,kt=g[7].p.v;this.matrix.reset(),this.matrix.translate(-et[0],-et[1],et[2]),this.matrix.scale(dt*.01,ct*.01,1),this.matrix.rotate(-kt*degToRads),this.matrix.skewFromAxis(-ft*degToRads,(St+90)*degToRads),this.matrix.translate(ot[0],ot[1],0),this._mdf=!0,this.opacity!==g[8].p.v&&(this.opacity=g[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(it,g){this.init(g)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(it){this.init(it)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(it,g){var et=it==null?null:typeof Symbol<"u"&&it[Symbol.iterator]||it["@@iterator"];if(et!=null){var ot,ut,ct,dt,ft=[],St=!0,kt=!1;try{if(ct=(et=et.call(it)).next,g===0){if(Object(et)!==et)return;St=!1}else for(;!(St=(ot=ct.call(et)).done)&&(ft.push(ot.value),ft.length!==g);St=!0);}catch(Tt){kt=!0,ut=Tt}finally{try{if(!St&&et.return!=null&&(dt=et.return(),Object(dt)!==dt))return}finally{if(kt)throw ut}}return ft}}function ownKeys(it,g){var et=Object.keys(it);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(it);g&&(ot=ot.filter(function(ut){return Object.getOwnPropertyDescriptor(it,ut).enumerable})),et.push.apply(et,ot)}return et}function _objectSpread2(it){for(var g=1;g<arguments.length;g++){var et=arguments[g]!=null?arguments[g]:{};g%2?ownKeys(Object(et),!0).forEach(function(ot){_defineProperty(it,ot,et[ot])}):Object.getOwnPropertyDescriptors?Object.defineProperties(it,Object.getOwnPropertyDescriptors(et)):ownKeys(Object(et)).forEach(function(ot){Object.defineProperty(it,ot,Object.getOwnPropertyDescriptor(et,ot))})}return it}function _defineProperty(it,g,et){return g=_toPropertyKey(g),g in it?Object.defineProperty(it,g,{value:et,enumerable:!0,configurable:!0,writable:!0}):it[g]=et,it}function _objectWithoutPropertiesLoose(it,g){if(it==null)return{};var et={},ot=Object.keys(it),ut,ct;for(ct=0;ct<ot.length;ct++)ut=ot[ct],!(g.indexOf(ut)>=0)&&(et[ut]=it[ut]);return et}function _objectWithoutProperties(it,g){if(it==null)return{};var et=_objectWithoutPropertiesLoose(it,g),ot,ut;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(it);for(ut=0;ut<ct.length;ut++)ot=ct[ut],!(g.indexOf(ot)>=0)&&Object.prototype.propertyIsEnumerable.call(it,ot)&&(et[ot]=it[ot])}return et}function _slicedToArray(it,g){return _arrayWithHoles(it)||_iterableToArrayLimit(it,g)||_unsupportedIterableToArray(it,g)||_nonIterableRest()}function _arrayWithHoles(it){if(Array.isArray(it))return it}function _unsupportedIterableToArray(it,g){if(it){if(typeof it=="string")return _arrayLikeToArray(it,g);var et=Object.prototype.toString.call(it).slice(8,-1);if(et==="Object"&&it.constructor&&(et=it.constructor.name),et==="Map"||et==="Set")return Array.from(it);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return _arrayLikeToArray(it,g)}}function _arrayLikeToArray(it,g){(g==null||g>it.length)&&(g=it.length);for(var et=0,ot=new Array(g);et<g;et++)ot[et]=it[et];return ot}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(it,g){if(typeof it!="object"||it===null)return it;var et=it[Symbol.toPrimitive];if(et!==void 0){var ot=et.call(it,g||"default");if(typeof ot!="object")return ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(it)}function _toPropertyKey(it){var g=_toPrimitive(it,"string");return typeof g=="symbol"?g:String(g)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function it(g,et){var ot=g.animationData,ut=g.loop,ct=g.autoplay,dt=g.initialSegment,ft=g.onComplete,St=g.onLoopComplete,kt=g.onEnterFrame,Tt=g.onSegmentStart,Rt=g.onConfigReady,Ft=g.onDataReady,jt=g.onDataFailed,Bt=g.onLoadedImages,zt=g.onDOMLoaded,Ht=g.onDestroy;g.lottieRef,g.renderer,g.name,g.assetsPath,g.rendererSettings;var Ut=_objectWithoutProperties(g,_excluded$1),Kt=reactExports.useState(!1),Yt=_slicedToArray(Kt,2),er=Yt[0],ar=Yt[1],ir=reactExports.useRef(),lr=reactExports.useRef(null),cr=function(){var Lr;(Lr=ir.current)===null||Lr===void 0||Lr.play()},vr=function(){var Lr;(Lr=ir.current)===null||Lr===void 0||Lr.stop()},xr=function(){var Lr;(Lr=ir.current)===null||Lr===void 0||Lr.pause()},yr=function(Lr){var qr;(qr=ir.current)===null||qr===void 0||qr.setSpeed(Lr)},Sr=function(Lr,qr){var sn;(sn=ir.current)===null||sn===void 0||sn.goToAndPlay(Lr,qr)},kr=function(Lr,qr){var sn;(sn=ir.current)===null||sn===void 0||sn.goToAndStop(Lr,qr)},Pr=function(Lr){var qr;(qr=ir.current)===null||qr===void 0||qr.setDirection(Lr)},Or=function(Lr,qr){var sn;(sn=ir.current)===null||sn===void 0||sn.playSegments(Lr,qr)},hr=function(Lr){var qr;(qr=ir.current)===null||qr===void 0||qr.setSubframe(Lr)},Tr=function(Lr){var qr;return(qr=ir.current)===null||qr===void 0?void 0:qr.getDuration(Lr)},mr=function(){var Lr;(Lr=ir.current)===null||Lr===void 0||Lr.destroy(),ir.current=void 0},Er=function(){var Lr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qr;if(lr.current){(qr=ir.current)===null||qr===void 0||qr.destroy();var sn=_objectSpread2(_objectSpread2(_objectSpread2({},g),Lr),{},{container:lr.current});return ir.current=lottie.loadAnimation(sn),ar(!!ir.current),function(){var an;(an=ir.current)===null||an===void 0||an.destroy(),ir.current=void 0}}};reactExports.useEffect(function(){var Cr=Er();return function(){return Cr==null?void 0:Cr()}},[ot,ut]),reactExports.useEffect(function(){ir.current&&(ir.current.autoplay=!!ct)},[ct]),reactExports.useEffect(function(){if(ir.current){if(!dt){ir.current.resetSegments(!0);return}!Array.isArray(dt)||!dt.length||((ir.current.currentRawFrame<dt[0]||ir.current.currentRawFrame>dt[1])&&(ir.current.currentRawFrame=dt[0]),ir.current.setSegment(dt[0],dt[1]))}},[dt]),reactExports.useEffect(function(){var Cr=[{name:"complete",handler:ft},{name:"loopComplete",handler:St},{name:"enterFrame",handler:kt},{name:"segmentStart",handler:Tt},{name:"config_ready",handler:Rt},{name:"data_ready",handler:Ft},{name:"data_failed",handler:jt},{name:"loaded_images",handler:Bt},{name:"DOMLoaded",handler:zt},{name:"destroy",handler:Ht}],Lr=Cr.filter(function(sn){return sn.handler!=null});if(Lr.length){var qr=Lr.map(function(sn){var an;return(an=ir.current)===null||an===void 0||an.addEventListener(sn.name,sn.handler),function(){var tn;(tn=ir.current)===null||tn===void 0||tn.removeEventListener(sn.name,sn.handler)}});return function(){qr.forEach(function(sn){return sn()})}}},[ft,St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht]);var Dr=React$3.createElement("div",_objectSpread2({style:et,ref:lr},Ut));return{View:Dr,play:cr,stop:vr,pause:xr,setSpeed:yr,goToAndStop:kr,goToAndPlay:Sr,setDirection:Pr,playSegments:Or,setSubframe:hr,getDuration:Tr,destroy:mr,animationContainerRef:lr,animationLoaded:er,animationItem:ir.current}};function getContainerVisibility(it){var g=it.getBoundingClientRect(),et=g.top,ot=g.height,ut=window.innerHeight-et,ct=window.innerHeight+ot;return ut/ct}function getContainerCursorPosition(it,g,et){var ot=it.getBoundingClientRect(),ut=ot.top,ct=ot.left,dt=ot.width,ft=ot.height,St=(g-ct)/dt,kt=(et-ut)/ft;return{x:St,y:kt}}var useInitInteractivity=function it(g){var et=g.wrapperRef,ot=g.animationItem,ut=g.mode,ct=g.actions;reactExports.useEffect(function(){var dt=et.current;if(!(!dt||!ot||!ct.length)){ot.stop();var ft=function(){var Tt=null,Rt=function(){var jt=getContainerVisibility(dt),Bt=ct.find(function(Ht){var Ut=Ht.visibility;return Ut&&jt>=Ut[0]&&jt<=Ut[1]});if(Bt){if(Bt.type==="seek"&&Bt.visibility&&Bt.frames.length===2){var zt=Bt.frames[0]+Math.ceil((jt-Bt.visibility[0])/(Bt.visibility[1]-Bt.visibility[0])*Bt.frames[1]);//! goToAndStop must be relative to the start of the current segment
ot.goToAndStop(zt-ot.firstFrame-1,!0)}Bt.type==="loop"&&(Tt===null||Tt!==Bt.frames||ot.isPaused)&&(ot.playSegments(Bt.frames,!0),Tt=Bt.frames),Bt.type==="play"&&ot.isPaused&&(ot.resetSegments(!0),ot.play()),Bt.type==="stop"&&ot.goToAndStop(Bt.frames[0]-ot.firstFrame-1,!0)}};return document.addEventListener("scroll",Rt),function(){document.removeEventListener("scroll",Rt)}},St=function(){var Tt=function(Bt,zt){var Ht=Bt,Ut=zt;if(Ht!==-1&&Ut!==-1){var Kt=getContainerCursorPosition(dt,Ht,Ut);Ht=Kt.x,Ut=Kt.y}var Yt=ct.find(function(ir){var lr=ir.position;return lr&&Array.isArray(lr.x)&&Array.isArray(lr.y)?Ht>=lr.x[0]&&Ht<=lr.x[1]&&Ut>=lr.y[0]&&Ut<=lr.y[1]:lr&&!Number.isNaN(lr.x)&&!Number.isNaN(lr.y)?Ht===lr.x&&Ut===lr.y:!1});if(Yt){if(Yt.type==="seek"&&Yt.position&&Array.isArray(Yt.position.x)&&Array.isArray(Yt.position.y)&&Yt.frames.length===2){var er=(Ht-Yt.position.x[0])/(Yt.position.x[1]-Yt.position.x[0]),ar=(Ut-Yt.position.y[0])/(Yt.position.y[1]-Yt.position.y[0]);ot.playSegments(Yt.frames,!0),ot.goToAndStop(Math.ceil((er+ar)/2*(Yt.frames[1]-Yt.frames[0])),!0)}Yt.type==="loop"&&ot.playSegments(Yt.frames,!0),Yt.type==="play"&&(ot.isPaused&&ot.resetSegments(!1),ot.playSegments(Yt.frames)),Yt.type==="stop"&&ot.goToAndStop(Yt.frames[0],!0)}},Rt=function(Bt){Tt(Bt.clientX,Bt.clientY)},Ft=function(){Tt(-1,-1)};return dt.addEventListener("mousemove",Rt),dt.addEventListener("mouseout",Ft),function(){dt.removeEventListener("mousemove",Rt),dt.removeEventListener("mouseout",Ft)}};switch(ut){case"scroll":return ft();case"cursor":return St()}}},[ut,ot])},useLottieInteractivity=function it(g){var et=g.actions,ot=g.mode,ut=g.lottieObj,ct=ut.animationItem,dt=ut.View,ft=ut.animationContainerRef;return useInitInteractivity({actions:et,animationItem:ct,mode:ot,wrapperRef:ft}),dt},_excluded=["style","interactivity"],Lottie=function it(g){var et,ot,ut,ct=g.style,dt=g.interactivity,ft=_objectWithoutProperties(g,_excluded),St=useLottie(ft,ct),kt=St.View,Tt=St.play,Rt=St.stop,Ft=St.pause,jt=St.setSpeed,Bt=St.goToAndStop,zt=St.goToAndPlay,Ht=St.setDirection,Ut=St.playSegments,Kt=St.setSubframe,Yt=St.getDuration,er=St.destroy,ar=St.animationContainerRef,ir=St.animationLoaded,lr=St.animationItem;return reactExports.useEffect(function(){g.lottieRef&&(g.lottieRef.current={play:Tt,stop:Rt,pause:Ft,setSpeed:jt,goToAndPlay:zt,goToAndStop:Bt,setDirection:Ht,playSegments:Ut,setSubframe:Kt,getDuration:Yt,destroy:er,animationContainerRef:ar,animationLoaded:ir,animationItem:lr})},[(et=g.lottieRef)===null||et===void 0?void 0:et.current]),useLottieInteractivity({lottieObj:{View:kt,play:Tt,stop:Rt,pause:Ft,setSpeed:jt,goToAndStop:Bt,goToAndPlay:zt,setDirection:Ht,playSegments:Ut,setSubframe:Kt,getDuration:Yt,destroy:er,animationContainerRef:ar,animationLoaded:ir,animationItem:lr},actions:(ot=dt==null?void 0:dt.actions)!==null&&ot!==void 0?ot:[],mode:(ut=dt==null?void 0:dt.mode)!==null&&ut!==void 0?ut:"scroll"})};const nm="error",ddd=0,h$4=495,w$4=610,meta={g:"@lottiefiles/toolkit-js 0.26.1"},layers=[{ty:4,nm:"onda contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[215.177,7.452,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100,100,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[98,98,100],t:25},{s:[100,100,100],t:50}],ix:6},sk:{a:0,k:0},p:{a:0,k:[290.23,391.787,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.019,-3.444],[11.925,3.71],[15.246,-5.628],[13.16,-1.326],[6.095,1.06],[18.549,-4.579],[20.669,-11.401],[0,0]],o:[[-18.019,3.445],[-11.924,-3.71],[-15.247,5.627],[-13.16,1.325],[-6.094,-1.06],[-18.549,4.579],[0,0],[0,0]],v:[[172.782,-2.665],[120.58,-2.135],[64.933,1.575],[-12.001,-5.314],[-55.9,2.105],[-108.102,-.619],[-214.927,4.199],[214.927,4.171]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.7608,.7961,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[215.177,7.452],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"mascara contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,td:1,ao:0,ks:{a:{a:0,k:[236.75,48.666,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[306.5,443.092,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[236.5,48.416],[-236.5,48.416],[-236.5,-48.416],[236.5,-48.416]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[236.75,48.666],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"barco contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,tt:2,hasMask:!1,ao:0,ks:{a:{a:0,k:[238.525,103.168,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,340.028,0],t:0,ti:[0,0,0],to:[0,.995,0]},{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,346,0],t:25,ti:[0,.995,0],to:[0,0,0]},{s:[298.895,340.028,0],t:50}],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[1],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[34.934,18.014],[.174,.101],[0,0],[-20.846,-10.75],[-11.059,-3.23],[0,0]],o:[[-8.314,-1.72],[-20.869,-10.761],[0,0],[.173,.102],[27.561,14.213],[0,0],[0,0]],v:[[50.064,23.648],[-12.12,-2.247],[-50.064,-23.648],[-48.52,-23.283],[-11.623,-3.201],[48.425,22.504],[48.994,22.88]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[50.595,73.639],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.734,-5.533],[2.44,-4.275],[0,0],[-.479,3.608],[.983,3.414],[0,0]],o:[[-.688,5.183],[0,0],[1.73,-2.956],[.497,-3.745],[0,0],[1.453,5.042]],v:[[7.355,.862],[2.555,15.132],[-8.089,9.167],[-4.699,-.739],[-5.492,-11.566],[6.178,-15.132]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[115.743,122.502],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.194,-3.664],[0,0],[-.797,6.003],[-2.282,4.144],[0,0],[.434,-3.271]],o:[[0,0],[-1.756,-5.397],[.66,-4.971],[0,0],[-1.473,2.748],[-.541,4.075]],v:[[6.506,11.687],[-6,15.504],[-7.563,-1.76],[-3.057,-15.504],[8.36,-9.109],[5.44,-.034]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.884,114.798],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[5.822,.774],[4.058,2.181],[0,0],[-3.355,-.445],[-3.466,1.022]],o:[[-5.262,1.636],[-4.837,-.641],[0,0],[2.8,1.537],[3.812,.506],[0,0]],v:[[15.093,5.954],[-1.685,7.362],[-15.093,3.043],[-8.832,-8.136],[.45,-5.101],[11.458,-5.945]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[80.698,149.982],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-4.76,-3.116],[0,0],[4.006,.532],[3.244,-.853],[0,0],[-5.01,-.665]],o:[[0,0],[-3.188,-2.051],[-3.528,-.468],[0,0],[4.627,-1.143],[6.014,.799]],v:[[15.421,-1.916],[8.808,8.618],[-2.064,4.637],[-12.292,5.268],[-15.421,-7.166],[-.872,-7.954]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[90.212,87.524],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:6,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.729,-2.957],[6.489,-1.913],[3.812,.506],[2.799,1.537],[2.086,6.41],[-.541,4.074],[-1.472,2.748],[-7.128,1.866],[-3.527,-.468],[-3.188,-2.051],[-1.781,-6.203],[.498,-3.746]],o:[[-3.416,5.852],[-3.466,1.023],[-3.355,-.445],[-5.946,-3.261],[-1.194,-3.663],[.435,-3.273],[3.497,-6.508],[3.244,-.852],[4.007,.532],[5.417,3.48],[.983,3.413],[-.479,3.607]],v:[[23.477,13.415],[8.012,25.525],[-2.997,26.37],[-12.279,23.335],[-24.788,8.229],[-25.854,-3.49],[-22.934,-12.566],[-6.225,-25.72],[4.003,-26.349],[14.876,-22.368],[26.073,-7.317],[26.865,3.51]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[1.452,5.041],[7.856,5.136],[6.015,.797],[4.626,-1.143],[5.274,-9.583],[.66,-4.971],[-1.756,-5.399],[-8.926,-4.799],[-4.837,-.642],[-5.262,1.636],[-4.931,8.644],[-.688,5.182]],o:[[-2.601,-9.045],[-4.761,-3.117],[-5.009,-.667],[-10.62,2.619],[-2.282,4.144],[-.797,6.003],[3.109,9.567],[4.058,2.18],[5.822,.773],[9.469,-2.94],[2.439,-4.276],[.735,-5.533]],v:[[37.744,-10.884],[21.488,-32.902],[5.196,-38.939],[-9.353,-38.152],[-34.352,-18.961],[-38.856,-5.217],[-37.294,12.048],[-18.539,34.514],[-5.132,38.833],[11.646,37.425],[34.121,19.379],[38.919,5.11]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Mesclar caminhos 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8784,.8784,.8784],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.144,118.511],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.726,2.442],[0,0],[-.705,.04],[0,0]],o:[[0,0],[18.626,2.429],[0,0],[-.706,.041]],v:[[-45.038,-.021],[-44.899,-1.085],[43.292,-2.421],[45.038,-2.008]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[147.494,97.467],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[130.107,-38.817],[35.758,50.211],[-130.107,28.187],[-111.111,-50.211]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[346.693,155.875],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[238.275,-10.946],[143.925,78.082],[-158.527,37.921],[-238.275,-78.082],[-2.944,-22.34]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[238.525,128.004],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-30.452,-11.733],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[22.546,8.675]],v:[[54.447,15.708],[-29.446,6.601],[-54.448,2.22],[-45.036,-5.08],[-31.336,-15.708]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[181.186,89.557],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[64.818,58.717],[-64.818,-61.806],[.327,61.806]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[309.542,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[91.565,61.805],[16.21,48.604],[-66.562,34.103],[-91.564,29.721],[-82.154,22.422],[-68.452,11.794],[-64.768,8.934],[26.419,-61.805],[75.721,31.747]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[218.304,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"bandeira contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[3.333,103.527,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[508.393,364.277,0],ix:2},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[-2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.658,-2.953],[0,0],[0,0],[1.126,4.839]],o:[[-.67,2.999],[0,0],[1.614,-1.725],[.1,.1]],v:[[3.548,.438],[-4.206,5.982],[-4.206,5.979],[.835,-5.982]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[40.042,10.085],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[7.587,6.536],[2.491,-.102],[.116,.13],[0,0],[-.384,.003],[0,0],[0,-.002],[1.614,-1.724],[0,0],[0,0],[0,0],[0,0],[0,0],[-.505,-.066],[0,0],[-7.421,-5.626],[0,0],[0,0]],o:[[0,0],[-6.49,-5.591],[-.022,-.006],[0,0],[0,0],[0,0],[0,.001],[1.126,4.839],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.297,-.311],[8.902,6.748],[0,0],[0,0]],v:[[19.81,-1.324],[4.701,-6.806],[-13.361,-12.344],[-14.212,-12.72],[-14.578,-11.828],[-13.731,-11.387],[-13.729,-11.388],[-13.729,-11.384],[-18.77,.577],[-18.77,.58],[-18.771,.58],[-19.525,.237],[-19.809,.93],[-19.81,.932],[-18.689,1.354],[-18.549,1.01],[-1.682,5.948],[16.577,12.72],[14.09,4.741]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[54.606,15.487],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.027,-.206],[.013,-.035],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.219,-.085]],o:[[-.005,.036],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.089,-.218],[.201,.081]],v:[[20.93,-49.702],[20.902,-49.594],[20.04,-47.383],[20.04,-47.382],[19.668,-46.43],[19.668,-46.428],[15.306,-35.217],[15.079,-34.632],[14.954,-34.311],[14.71,-33.687],[-17.967,50.277],[-20.956,50.137],[13.589,-34.109],[13.59,-34.111],[13.874,-34.805],[18.821,-46.868],[19.188,-47.762],[20.087,-49.956],[20.641,-50.193]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8118,.8314,.9255],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[21.206,50.527],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"hominho contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[61,205,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[153.864,377.089,0],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.986,-3.765],[-.075,4.263],[-3.986,-.553],[-3.493,-4.263]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9176,.5529,.3059],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[97.339,38.926],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.562,-8.323],[0,0],[0,0],[1.36,.35],[0,0],[5.078,1.566],[0,0],[.814,1.124],[-5.522,-2.048]],o:[[0,0],[-.808,.107],[0,0],[-1.359,-.356],[0,0],[0,0],[-1.596,-.485],[-3.418,-4.711],[5.522,2.048]],v:[[13.008,-2.493],[12.001,4.652],[10.312,5.359],[7.791,10.466],[6.728,.137],[-5.829,-.359],[-5.828,-.365],[-9.59,-2.727],[-5.788,-7.58]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.2,.2,.2],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[95.438,17.148],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.809,.107],[-.116,-.991],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.629,4.74],[-.194,.58],[0,0],[0,0],[-1.359,-.356],[0,0]],o:[[.624,-.087],[.272,2.269],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.146,-1.094],[0,0],[5.078,1.566],[0,0],[1.359,.35],[0,0]],v:[[8.821,-8.33],[10.152,-7.222],[7.611,-2.644],[6.924,7.179],[-1.544,13.34],[2.518,5.313],[-4.963,4.813],[-9.338,3.738],[-10.424,2.403],[-9.585,-10.532],[-9.079,-13.115],[-9.01,-13.34],[3.549,-12.844],[4.611,-2.515],[7.132,-7.623]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[98.577,30.124],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[-27.616,-9.801],[0,0],[0,0],[0,0]],v:[[9.572,21.137],[-18.343,-21.136],[-3.118,6.541],[18.343,4.45]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.057,55.643],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.764,.72],[-.083,1.851],[1.039,2.566],[-.396,.279],[-1.226,.312],[-.102,-1.634],[-.007,-.046],[-.404,-1.421]],o:[[0,0],[0,0],[-.996,-.933],[.115,-2.484],[-.334,-.82],[.504,-.363],[2.714,-.681],[.001,.039],[.064,.647],[1.219,4.354]],v:[[6.884,6.578],[1.556,9.341],[.103,8.224],[-1.936,3.969],[-6.475,-5.63],[-6.488,-7.344],[-3.696,-8.419],[2.648,-7.707],[2.663,-7.576],[3.415,-4.318]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[78.549,23.927],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-3.947,.211],[0,0],[0,0],[1.336,-.011],[10.934,5.859],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[-6.258,.062],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.764,.719],[0,0],[0,0],[0,0]],v:[[40.412,1.789],[31.641,18.477],[28.509,35.442],[26.4,35.488],[-9.476,29.344],[-2.174,8.72],[-2.025,-8.292],[-27.405,-8.849],[-40.412,-31.214],[-38.108,-32.53],[-32.811,-35.549],[-19.9,-19.09],[4.664,-26.152],[6.117,-25.035],[3.726,-23.797],[18.953,3.862]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.989,58.304],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.27,.029],[0,0],[0,0]],o:[[0,0],[-.244,-.072],[-3.801,-.447],[0,0],[0,0]],v:[[-1.025,-5.379],[9.493,.432],[8.726,.278],[-5.761,5.379],[-9.493,.782]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[106.756,42.408],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-3.801,-.446],[-.244,-.072],[1.081,-3.632],[3.946,-.205],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[.269,.029],[3.283,.917],[-1.164,3.914],[-3.947,.211],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-6.037,-7.682],[-2.126,-2.866],[1.606,1.731],[16.092,-3.37],[16.859,-3.216],[20.594,5.476],[15.011,14.038],[-6.449,16.11],[-21.675,-11.549],[-19.284,-12.787],[-13.956,-15.55],[-12.88,-16.11],[-11.005,-13.804],[-9.919,-12.469]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[99.39,46.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[2.188,-1.317],[1.694,2.393],[-2.188,-2.393]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[91.658,35.98],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[-.65,3.078],[0,0],[-.889,.37],[-1.354,-1.521],[-.21,-.673]],o:[[0,0],[0,0],[0,0],[.065,-1.079],[1.178,-.489],[.277,.317],[.805,2.561]],v:[[5.163,4.06],[-.135,7.082],[-4.512,-2.895],[-1.344,-2.878],[-.154,-6.592],[3.301,-4.383],[4.035,-2.846]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.015,18.694],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[10.718,3.027],[10.627,3.713],[-11.228,.811],[-10.627,-3.713],[11.228,-.811],[11.13,-.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.567,14.101],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.063,.647],[0,0]],o:[[0,0],[0,0],[-.404,-1.421],[0,0],[0,0]],v:[[3.357,.796],[3.193,2.03],[-2.853,1.228],[-3.605,-2.03],[3.605,-1.072]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.818,18.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 13",ix:13,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.504,-.363],[-.334,-.819],[0,0]],o:[[0,0],[-1.226,.313],[-.395,.279],[0,0],[0,0]],v:[[-5.372,-2.135],[5.785,-.654],[2.992,.421],[3.005,2.135],[-5.785,.968]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[69.069,16.161],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 14",ix:14,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.021,.206],[.454,1.336],[.738,.319],[0,0],[.701,-3.656],[.043,-.319],[-.212,-1.246],[-1.247,-.166],[-.132,.015],[-.518,3.902]],o:[[.185,-1.929],[-.388,-1.146],[0,0],[-1.798,-.141],[-.066,.304],[-.204,1.542],[.366,2.145],[.135,.017],[1.848,-.184],[.028,-.211]],v:[[3.624,-.078],[3.172,-5.105],[1.451,-7.391],[.883,-7.532],[-3.448,-1.343],[-3.605,-.407],[-3.57,3.843],[-1.036,7.656],[-.626,7.658],[3.554,.544]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[4.059,7.923],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 15",ix:15,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.277,.317],[1.178,-.488],[.065,-1.079],[0,0],[0,0],[0,0],[-.518,3.902],[1.686,.732],[0,0],[0,0]],o:[[0,0],[0,0],[-.21,-.673],[-1.354,-1.521],[-.889,.371],[0,0],[0,0],[0,0],[1.848,-.185],[.512,-3.851],[0,0],[0,0],[0,0]],v:[[18.604,6.72],[18.479,7.66],[17.313,7.656],[16.58,6.119],[13.124,3.909],[11.934,7.625],[8.766,7.608],[-19.296,7.443],[-19.303,7.39],[-15.124,.276],[-17.227,-7.66],[19.303,1.449],[19.204,2.197]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[22.736,8.191],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 16",ix:16,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[-7.889,-.188],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[-1.424,-7.763],[0,0],[0,0],[17.34,5.523],[0,0]],v:[[15.789,-4.481],[-5.23,-8.073],[-6.092,24.732],[-21.09,27.96],[-24.038,-13.084],[-11.495,-27.772],[-5.111,-27.618],[-5.104,-27.617],[25.462,-3.139]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.459,114.844],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 17",ix:17,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[1.246,-7.213],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.821,-6.273],[-4.877,-2.729],[-11.295,4.52],[1.911,6.273],[10.017,.222],[11.295,-4.265]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[82.042,197.797],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 18",ix:18,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-2.653,-12.601],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-.527,-11.795],[-9.312,13.551],[11.965,-10.136],[10.064,-13.551]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[34.803,153.627],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 19",ix:19,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[17.34,5.522],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[20.148,53.268],[3.293,51.029],[2.995,-28.791],[-27.572,-53.268],[-10.414,-52.845],[27.572,-46.748]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[74.927,140.495],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"nuvem contornos 3",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[173,173,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[441.196,174.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"nuvem contornos 2",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[248,248,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[171.196,120.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:4,nm:"nuvem contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[532.196,98.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8}],v$1="5.7.3",fr=25,op=50,ip=0,assets=[],notFound={nm,ddd,h:h$4,w:w$4,meta,layers,v:v$1,fr,op,ip,assets},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"max-xl h-screen bg-gradient-to-r from-black to-silver",children:[jsxRuntimeExports.jsx("div",{className:" flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{className:"w-[500px] h-[500px]",animationData:notFound,loop:!0})}),jsxRuntimeExports.jsx("h3",{className:"font-palanquin padding-x text-center text-8xl font-bold text-phlokkGreen",children:"4 0 4"}),jsxRuntimeExports.jsx("p",{className:"m-auto mt-4 max-w-lg text-center notFound-text",children:"Page does not exist!"}),jsxRuntimeExports.jsx("div",{className:"mt-24 flex-1 justify-center items-center text-center text-white max-lg:flex-col gap-14",children:jsxRuntimeExports.jsxs("h1",{children:["Go back to ",jsxRuntimeExports.jsxs(Link$1,{to:"/",children:[" ",jsxRuntimeExports.jsx("span",{className:"text-phlokkGreen",children:"Homepage"})]})]})})]});function ThankYou(){const{search:it}=useLocation(),g=reactExports.useMemo(()=>new URLSearchParams(it).get("session_id"),[it]),et=g?`/api/downloads/${g}`:null;return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#0b0b0b] text-white flex items-center justify-center px-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Thank you for your purchase!"}),jsxRuntimeExports.jsxs("p",{className:"mt-3 text-slate-300",children:["Your download is ready",et?"":", but we couldnt find a session id","."]}),et?jsxRuntimeExports.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[jsxRuntimeExports.jsx("a",{href:et,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold bg-phlokkGreen text-black hover:opacity-90 transition",children:"Download Now"}),jsxRuntimeExports.jsx("a",{href:et,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Open in New Tab"})]}):jsxRuntimeExports.jsxs("div",{className:"mt-8 space-y-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-400",children:["We expected a URL like ",jsxRuntimeExports.jsx("code",{children:"/thank-you?session_id=cs_..."}),"."]}),jsxRuntimeExports.jsx(Link$1,{to:"/",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Go Home"})]}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-xs text-slate-500",children:"Having trouble? Forward your receipt email to support and well help."})]})})}const Terms=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Terms and Conditions"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"These Terms and Conditions (Agreement) govern your access to and use of the Cre8tly Studio website, platform, and all related products and services (collectively, Services). By creating an account, making a purchase, or otherwise using our Services, you (User, you, or your) agree to be legally bound by this Agreement. If you do not agree, you must discontinue use of our Services immediately."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Ownership and License"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio owns and retains all rights, title, and interest in the Services, including all software, source code, algorithms, designs, trade secrets, and intellectual property. Your purchase provides a limited, non-transferable, non-exclusive license to use the Services for your personal or business needs in accordance with this Agreement. No ownership rights are transferred to you. Any attempt to copy, reverse-engineer, resell, or distribute the software or digital output without written permission is strictly prohibited."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Accounts and Membership"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You must be at least 18 years old to use our Services. You are responsible for providing accurate account information and maintaining the confidentiality of your login credentials. You are fully responsible for all activity that occurs under your account. We reserve the right to suspend or terminate accounts that provide false information, violate these terms, or attempt to bypass usage limits (including the maximum 25-page PDF limit per slot)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Purchases and Payments"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All purchases, subscriptions, and credits made through our platform are final, as outlined in our Refund Policy. By making a purchase, you agree to provide valid and accurate payment details. We reserve the right to refuse or cancel any order suspected of fraud or unauthorized use. Pricing is subject to change at our discretion."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Digital Products and Slots"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Lead magnet slots and generated PDFs are digital products licensed for your own use. You may not resell, redistribute, or use them for automated scraping or mass content generation beyond what is permitted by your plan. Slots cannot be exchanged, refunded, or rolled over once purchased. Misuse of slots, including attempts to exceed system safeguards, may result in account suspension without refund."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Prohibited Uses"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You may not use our Services for any unlawful purpose, to attempt unauthorized access to our systems, to exceed usage caps, to infringe on intellectual property rights, or to interfere with the operation of the Services. We reserve the right to suspend or terminate accounts engaged in abuse, fraud, or misuse."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Intellectual Property"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All software, designs, branding, content, and related intellectual property are owned exclusively by Cre8tly Studio or its licensors. You may not reproduce, republish, modify, or exploit any part of the Services without our express written consent."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Disclaimer of Warranties"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Services are provided as is and as available without any warranties of any kind, express or implied. We do not guarantee that the Services will be uninterrupted, error-free, or suitable for your specific purpose. You assume full responsibility for your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Limitation of Liability"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"To the fullest extent permitted by law, Cre8tly Studio, its owners, employees, and affiliates shall not be liable for any indirect, incidental, consequential, or punitive damages, including but not limited to loss of profits, business interruption, or data loss, arising out of or related to your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to Terms"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may revise these Terms at any time by posting an updated version on our website. Continued use of the Services after updates constitutes acceptance of the revised Terms."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Governing Law"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Agreement shall be governed by and construed under the laws of Tennessee, United States, without regard to its conflict of law principles. Any disputes shall be resolved exclusively in the courts of Tennessee, United States."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions regarding these Terms and Conditions, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Privacy=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Privacy Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio respects your privacy and is committed to protecting it in accordance with this Privacy Policy (Policy). This Policy explains how we collect, use, and safeguard your personal information when you visit our website, purchase subscriptions or credits, or use any of our software services (Services)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"By accessing or using Cre8tly Studios Services, you acknowledge that you have read and understood this Policy and agree to its terms. If you do not agree, please do not use our Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Information We Collect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may collect personal information you provide directly to us, such as:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Name and contact information (email, phone, billing address)",jsxRuntimeExports.jsx("br",{})," Account login details (if you create an account)",jsxRuntimeExports.jsx("br",{})," Payment and billing information (processed securely by third-party providers)",jsxRuntimeExports.jsx("br",{})," Prompts, themes, and preferences you submit to generate lead magnets or PDFs",jsxRuntimeExports.jsx("br",{})," Device and usage data (IP address, browser type, access times)",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"How We Use Your Information"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may use the information we collect for purposes including:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," To process payments and deliver your purchased slots or PDFs",jsxRuntimeExports.jsx("br",{})," To provide, operate, and improve our Services",jsxRuntimeExports.jsx("br",{})," To personalize your experience (themes, saved prompts)",jsxRuntimeExports.jsx("br",{})," To respond to customer inquiries and provide support",jsxRuntimeExports.jsx("br",{})," To send updates, promotional offers, or newsletters (with your consent)",jsxRuntimeExports.jsx("br",{})," To comply with legal obligations",jsxRuntimeExports.jsx("br",{})," To detect and prevent fraud or misuse of our Services",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Payment Processing"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Payments for subscriptions, slots, or digital products are processed securely through third-party providers (such as Stripe). Cre8tly Studio does not store your full payment details. Payment providers may collect certain personal data in accordance with their own privacy policies, which we encourage you to review."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Cookies and Tracking"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Our website may use cookies and similar technologies to improve your experience, analyze site traffic, and deliver personalized content. You can control cookie preferences through your browser settings."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Data Retention"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We will retain your personal information only for as long as necessary to fulfill the purposes outlined in this Policy, comply with legal obligations, resolve disputes, and enforce agreements. After this period, your data will be securely deleted or anonymized."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Your Rights"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Depending on your location, you may have rights under applicable data protection laws (such as GDPR or CCPA). These may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," The right to access, correct, or delete your personal information",jsxRuntimeExports.jsx("br",{})," The right to object to processing or withdraw consent",jsxRuntimeExports.jsx("br",{})," The right to request data portability",jsxRuntimeExports.jsx("br",{})," The right to lodge a complaint with a data protection authority",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Childrens Privacy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Cre8tly Studio does not knowingly collect personal information from children under the age of 18. If you believe we may have collected such information, please contact us immediately and we will delete it."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Security"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We implement reasonable technical and organizational measures to protect your personal information. However, no system can be 100% secure. You are responsible for maintaining the confidentiality of any account credentials and taking steps to protect your devices."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to This Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Privacy Policy from time to time. Updates will be posted on this page with a revised last updated date. Continued use of our Services after changes indicates acceptance of the revised Policy."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions, concerns, or requests regarding this Privacy Policy, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"privacy@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Refund=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Refund Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["At Cre8tly Studio, all purchases of subscriptions, credits, and lead magnet slots are final. Because our Services involve the instant creation and delivery of digital content, ",jsxRuntimeExports.jsx("strong",{children:"no refunds will be issued under any circumstances."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"All Sales Are Final"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["By completing a purchase, you acknowledge and agree that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," You are purchasing access to digital services and instantly usable content.",jsxRuntimeExports.jsx("br",{})," We do not provide refunds or exchanges for unused slots, cancelled accounts, or change of mind.",jsxRuntimeExports.jsx("br",{})," Errors caused by incorrect prompt entry, theme selection, or user setup are not eligible for refunds.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Service Quality"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"While no refunds are available, if you experience a technical problem with your order (such as the PDF not generating correctly), please contact us. Our team will investigate and, where appropriate, provide a replacement or re-issue the digital content you purchased."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions or technical support regarding your order, you can reach us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"support@cre8tlystudio.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Cookie=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Cookie Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Cookie Policy (Policy) explains how Cre8tly Studio (we, us, or our) uses cookies and similar technologies when you visit our website (Website) or use our related products and services (Services), including generating lead magnets, accessing customer dashboards, or making purchases. By using our Website, you agree to the use of cookies as described in this Policy. For details on how we handle personal data, please also review our Privacy Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Types of cookies we use"}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Essential cookies"}),": Required for logging into your account, keeping sessions secure, processing payments, and generating your purchased lead magnets.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Preferences cookies"}),": Remember your settings (such as selected themes or region) to make your experience smoother.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Analytics cookies"}),": Help us understand how customers use dashboards, downloads, and checkout so we can improve our Services.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Marketing cookies"}),": May be used (if you opt in) to deliver personalized offers or measure the performance of ad campaigns."]}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Managing cookies"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You can control or disable cookies in your browser settings. Please note that blocking essential cookies may prevent checkout, login, or access to your purchased lead magnets from working properly."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to this Policy"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Cookie Policy from time to time. Any updates will be posted on this page with a new last revised date. Continued use of our Website after changes means you accept the updated Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions about this Cookie Policy, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@cre8tlystudio.com"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on October 3rd, 2025."}),jsxRuntimeExports.jsx("br",{})]})});function PromptPage(){const[it]=useSearchParams(),g=it.get("session_id"),et=reactExports.useRef(null),[ot,ut]=reactExports.useState(!0),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),[Rt,Ft]=reactExports.useState(!1),[jt,Bt]=reactExports.useState(null);reactExports.useEffect(()=>{if(ft&&et.current){const Ht=et.current.getEditor();setTimeout(()=>{Ht.root.scrollTop=0,Ht.root.dispatchEvent(new Event("input"))},100)}},[ft]),reactExports.useEffect(()=>{g?(async()=>{var Ut;try{const Kt=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Kt.data&&(dt(!0),Kt.data.status==="completed"&&Kt.data.pdf_url&&(Bt(Kt.data.pdf_url),Ft(!0)))}catch(Kt){console.error("Invalid session:",((Ut=Kt.response)==null?void 0:Ut.data)||Kt.message),dt(!1)}finally{ut(!1)}})():ut(!1)},[g]);const zt=async()=>{var Ht;if(ft.trim()){Tt(!0);try{await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{sessionId:g,prompt:ft}),Ft(!0);const Ut=setInterval(async()=>{try{const Kt=await axios$1.get(`https://cre8tlystudio.com/api/lead-magnets/${g}`);Kt.data.status==="completed"&&Kt.data.pdf_url&&(Bt(Kt.data.pdf_url),clearInterval(Ut))}catch(Kt){console.error("Polling failed:",Kt.message)}},5e3)}catch(Ut){console.error(" Request failed:",((Ht=Ut.response)==null?void 0:Ht.data)||Ut.message)}finally{Tt(!1)}}};return ot?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen text-xl text-gray-400",children:"Validating session..."}):ct?jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto py-20 px-6 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Enter Your Prompt"}),Rt?jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-green mb-6",children:" Your prompt was submitted!"}),jt?jsxRuntimeExports.jsx("a",{href:jt,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-gradient-to-r from-[#1DA1F2] to-purple-600 text-white px-8 py-4 rounded-xl shadow-lg hover:opacity-90 transition",children:"Download PDF"}):jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Your PDF is being generated... Please wait."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:ft,onChange:Ht=>St(Ht.target.value),placeholder:"Describe your audience or offer...",className:"w-full h-[500px] bg-white text-black text-left rounded-lg p-4 leading-relaxed font-montserrat border border-gray-300 focus:outline-none focus:ring-2 focus:ring-green-400 shadow-inner resize-none overflow-y-auto"}),jsxRuntimeExports.jsx("button",{onClick:zt,disabled:kt||!ft||ft.trim()==="<p><br></p>",className:`w-full py-4 rounded-xl font-semibold text-lg transition shadow-lg ${kt||!ft?"bg-gray-600 cursor-not-allowed":"bg-black border border-green-400 text-white hover:opacity-90"}`,children:kt?"Generating...":"Generate PDF"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-500",children:"Invalid or expired session"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Please purchase a lead magnet to access this page."})]})}const headerLogo="/assets/cre8tly-logo-ab122ab2.svg",ebookCover="/assets/ultimate-branding-d456799d.jpg",Footer=()=>jsxRuntimeExports.jsx("footer",{className:"text-white py-8 px-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center text-xs text-white/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-4 md:gap-6",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly Studio Logo",width:50,height:50})}),jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," Alure Digital. All rights reserved"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:items-end gap-2 mt-6 md:mt-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Link$1,{to:"/terms",className:"hover:text-white transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/privacy-policy",className:"hover:text-white transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/cookie-policy",className:"hover:text-white transition-colors",children:"Cookies"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$1,{to:"/refund-policy",className:"hover:text-white transition-colors",children:"Refunds"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-white/40",children:["Designed by"," ",jsxRuntimeExports.jsx("a",{href:"https://aluredigital.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:"Alure Digital"})]})]})]})});function CustomCursor(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!1),ut=useMotionValue(-100),ct=useMotionValue(-100),dt=useSpring(ut,{stiffness:225,damping:30}),ft=useSpring(ct,{stiffness:225,damping:30});return reactExports.useEffect(()=>{const St=Tt=>{et||ot(!0),ut.set(Tt.clientX),ct.set(Tt.clientY)};window.addEventListener("mousemove",St);const kt=document.querySelectorAll("a, button, .clickable");return kt.forEach(Tt=>{Tt.addEventListener("mouseenter",()=>g(!0)),Tt.addEventListener("mouseleave",()=>g(!1))}),()=>{window.removeEventListener("mousemove",St),kt.forEach(Tt=>{Tt.removeEventListener("mouseenter",()=>g(!0)),Tt.removeEventListener("mouseleave",()=>g(!1))})}},[et]),jsxRuntimeExports.jsx(motion.div,{className:"fixed top-0 left-0 z-[9999] pointer-events-none",initial:{opacity:0,scale:.6},animate:{opacity:et?1:0,scale:et?1:.6},transition:{duration:.6,ease:"easeOut"},style:{translateX:dt,translateY:ft},children:jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-200 ${it?"bg-[#7bed9f]/80 shadow-[0_0_15px_rgba(123,237,159,0.5)]":"bg-[#7bed9f]/70 shadow-[0_0_10px_rgba(123,237,159,0.5)]"}`})})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=it=>it.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=it=>it.replace(/^([A-Z])|[\s-_]+(\w)/g,(g,et,ot)=>ot?ot.toUpperCase():et.toLowerCase()),toPascalCase=it=>{const g=toCamelCase(it);return g.charAt(0).toUpperCase()+g.slice(1)},mergeClasses=(...it)=>it.filter((g,et,ot)=>!!g&&g.trim()!==""&&ot.indexOf(g)===et).join(" ").trim(),hasA11yProp=it=>{for(const g in it)if(g.startsWith("aria-")||g==="role"||g==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes$1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:it="currentColor",size:g=24,strokeWidth:et=2,absoluteStrokeWidth:ot,className:ut="",children:ct,iconNode:dt,...ft},St)=>reactExports.createElement("svg",{ref:St,...defaultAttributes$1,width:g,height:g,stroke:it,strokeWidth:ot?Number(et)*24/Number(g):et,className:mergeClasses("lucide",ut),...!ct&&!hasA11yProp(ft)&&{"aria-hidden":"true"},...ft},[...dt.map(([kt,Tt])=>reactExports.createElement(kt,Tt)),...Array.isArray(ct)?ct:[ct]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(it,g)=>{const et=reactExports.forwardRef(({className:ot,...ut},ct)=>reactExports.createElement(Icon,{ref:ct,iconNode:g,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(it))}`,`lucide-${it}`,ot),...ut}));return et.displayName=toPascalCase(it),et};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$U=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$U);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$T=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$T);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$S);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$R);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bot=createLucideIcon("bot",__iconNode$Q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$N);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$M);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Circle$1=createLucideIcon("circle",__iconNode$J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Cog=createLucideIcon("cog",__iconNode$I);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M10 18H5a3 3 0 0 1-3-3v-1",key:"ru65g8"}],["path",{d:"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"e30een"}],["path",{d:"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"2ahx8o"}],["path",{d:"m7 21 3-3-3-3",key:"127cv2"}],["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}]],Combine=createLucideIcon("combine",__iconNode$H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["circle",{cx:"12",cy:"6",r:"1",key:"1bh7o1"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}],["circle",{cx:"12",cy:"18",r:"1",key:"lqb9t5"}]],Divide=createLucideIcon("divide",__iconNode$E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$4=createLucideIcon("image",__iconNode$x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Inbox$1=createLucideIcon("inbox",__iconNode$w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LayoutDashboard=createLucideIcon("layout-dashboard",__iconNode$u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ListOrdered=createLucideIcon("list-ordered",__iconNode$t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],List=createLucideIcon("list",__iconNode$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MessageCircleQuestionMark=createLucideIcon("message-circle-question-mark",__iconNode$n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M5 12h14",key:"1ays0h"}]],Minus=createLucideIcon("minus",__iconNode$m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],MousePointerClick=createLucideIcon("mouse-pointer-click",__iconNode$l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Package=createLucideIcon("package",__iconNode$k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Redo2=createLucideIcon("redo-2",__iconNode$h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rocket=createLucideIcon("rocket",__iconNode$g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M22 2 2 22",key:"y4kqgn"}]],Slash=createLucideIcon("slash",__iconNode$e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],SquareTerminal=createLucideIcon("square-terminal",__iconNode$d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Store=createLucideIcon("store",__iconNode$b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],TextAlignCenter=createLucideIcon("text-align-center",__iconNode$a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],TextAlignEnd=createLucideIcon("text-align-end",__iconNode$9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],TextAlignStart=createLucideIcon("text-align-start",__iconNode$8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Timer=createLucideIcon("timer",__iconNode$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Type=createLucideIcon("type",__iconNode$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Undo2=createLucideIcon("undo-2",__iconNode$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$2=createLucideIcon("x",__iconNode$2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode);function SignupPage(){const{login:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=useNavigate(),[ut,ct]=reactExports.useState({name:"",email:"",password:""}),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState("");reactExports.useEffect(()=>{if(St){const Ft=setTimeout(()=>kt(""),5e3);return()=>clearTimeout(Ft)}},[St]);const Tt=Ft=>ct({...ut,[Ft.target.name]:Ft.target.value}),Rt=async Ft=>{var jt,Bt;Ft.preventDefault(),ft(!0),kt("");try{const zt=await axios$1.post("https://cre8tlystudio.com/api/auth/signup",ut);zt.status===201?(await it(ut.email,ut.password),ot("/dashboard")):kt(zt.data.message||"Something went wrong")}catch(zt){(Bt=(jt=zt.response)==null?void 0:jt.data)!=null&&Bt.message?kt(zt.response.data.message):kt("Signup failed. Please try again later.")}finally{ft(!1)}};return jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Create Your Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Join Cre8tly Studio and start creating digital products instantly."}),St&&jsxRuntimeExports.jsx("div",{className:"bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-700",children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:Rt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:ut.name,onChange:Tt,placeholder:"Full Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:ut.email,onChange:Tt,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:g?"text":"password",name:"password",value:ut.password,onChange:Tt,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>et(!g),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":g?"Hide password":"Show password",children:g?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:dt,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:dt?"Creating Account...":"Sign Up"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Log In"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}var i$6=Object.defineProperty,d$2=(it,g,et)=>g in it?i$6(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,r$2=(it,g,et)=>(d$2(it,typeof g!="symbol"?g+"":g,et),et);let o$4=class{constructor(){r$2(this,"current",this.detect()),r$2(this,"handoffState","pending"),r$2(this,"currentId",0)}set(g){this.current!==g&&(this.handoffState="pending",this.currentId=0,this.current=g)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$5=new o$4;function u$5(it){return s$5.isServer?null:it instanceof Node?it.ownerDocument:it!=null&&it.hasOwnProperty("current")&&it.current instanceof Node?it.current.ownerDocument:document}function t$4(it){typeof queueMicrotask=="function"?queueMicrotask(it):Promise.resolve().then(it).catch(g=>setTimeout(()=>{throw g}))}function o$3(){let it=[],g={addEventListener(et,ot,ut,ct){return et.addEventListener(ot,ut,ct),g.add(()=>et.removeEventListener(ot,ut,ct))},requestAnimationFrame(...et){let ot=requestAnimationFrame(...et);return g.add(()=>cancelAnimationFrame(ot))},nextFrame(...et){return g.requestAnimationFrame(()=>g.requestAnimationFrame(...et))},setTimeout(...et){let ot=setTimeout(...et);return g.add(()=>clearTimeout(ot))},microTask(...et){let ot={current:!0};return t$4(()=>{ot.current&&et[0]()}),g.add(()=>{ot.current=!1})},style(et,ot,ut){let ct=et.style.getPropertyValue(ot);return Object.assign(et.style,{[ot]:ut}),this.add(()=>{Object.assign(et.style,{[ot]:ct})})},group(et){let ot=o$3();return et(ot),this.add(()=>ot.dispose())},add(et){return it.includes(et)||it.push(et),()=>{let ot=it.indexOf(et);if(ot>=0)for(let ut of it.splice(ot,1))ut()}},dispose(){for(let et of it.splice(0))et()}};return g}function p$2(){let[it]=reactExports.useState(o$3);return reactExports.useEffect(()=>()=>it.dispose(),[it]),it}let n$3=(it,g)=>{s$5.isServer?reactExports.useEffect(it,g):reactExports.useLayoutEffect(it,g)};function s$4(it){let g=reactExports.useRef(it);return n$3(()=>{g.current=it},[it]),g}let o$2=function(it){let g=s$4(it);return React$3.useCallback((...et)=>g.current(...et),[g])},e$3=reactExports.createContext(void 0);function a$a(){return reactExports.useContext(e$3)}function t$3(...it){return Array.from(new Set(it.flatMap(g=>typeof g=="string"?g.split(" "):[]))).filter(Boolean).join(" ")}function u$4(it,g,...et){if(it in g){let ut=g[it];return typeof ut=="function"?ut(...et):ut}let ot=new Error(`Tried to handle "${it}" but there is no handler defined. Only defined handlers are: ${Object.keys(g).map(ut=>`"${ut}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(ot,u$4),ot}var O$3=(it=>(it[it.None=0]="None",it[it.RenderStrategy=1]="RenderStrategy",it[it.Static=2]="Static",it))(O$3||{}),A$1=(it=>(it[it.Unmount=0]="Unmount",it[it.Hidden=1]="Hidden",it))(A$1||{});function L$1(){let it=U$2();return reactExports.useCallback(g=>C$3({mergeRefs:it,...g}),[it])}function C$3({ourProps:it,theirProps:g,slot:et,defaultTag:ot,features:ut,visible:ct=!0,name:dt,mergeRefs:ft}){ft=ft??$$1;let St=P$1(g,it);if(ct)return F$1(St,et,ot,dt,ft);let kt=ut??0;if(kt&2){let{static:Tt=!1,...Rt}=St;if(Tt)return F$1(Rt,et,ot,dt,ft)}if(kt&1){let{unmount:Tt=!0,...Rt}=St;return u$4(Tt?0:1,{0(){return null},1(){return F$1({...Rt,hidden:!0,style:{display:"none"}},et,ot,dt,ft)}})}return F$1(St,et,ot,dt,ft)}function F$1(it,g={},et,ot,ut){let{as:ct=et,children:dt,refName:ft="ref",...St}=h$3(it,["unmount","static"]),kt=it.ref!==void 0?{[ft]:it.ref}:{},Tt=typeof dt=="function"?dt(g):dt;"className"in St&&St.className&&typeof St.className=="function"&&(St.className=St.className(g)),St["aria-labelledby"]&&St["aria-labelledby"]===St.id&&(St["aria-labelledby"]=void 0);let Rt={};if(g){let Ft=!1,jt=[];for(let[Bt,zt]of Object.entries(g))typeof zt=="boolean"&&(Ft=!0),zt===!0&&jt.push(Bt.replace(/([A-Z])/g,Ht=>`-${Ht.toLowerCase()}`));if(Ft){Rt["data-headlessui-state"]=jt.join(" ");for(let Bt of jt)Rt[`data-${Bt}`]=""}}if(ct===reactExports.Fragment&&(Object.keys(m$4(St)).length>0||Object.keys(m$4(Rt)).length>0))if(!reactExports.isValidElement(Tt)||Array.isArray(Tt)&&Tt.length>1){if(Object.keys(m$4(St)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${ot} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$4(St)).concat(Object.keys(m$4(Rt))).map(Ft=>`  - ${Ft}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(Ft=>`  - ${Ft}`).join(`
`)].join(`
`))}else{let Ft=Tt.props,jt=Ft==null?void 0:Ft.className,Bt=typeof jt=="function"?(...Ut)=>t$3(jt(...Ut),St.className):t$3(jt,St.className),zt=Bt?{className:Bt}:{},Ht=P$1(Tt.props,m$4(h$3(St,["ref"])));for(let Ut in Rt)Ut in Ht&&delete Rt[Ut];return reactExports.cloneElement(Tt,Object.assign({},Ht,Rt,kt,{ref:ut(H$2(Tt),kt.ref)},zt))}return reactExports.createElement(ct,Object.assign({},h$3(St,["ref"]),ct!==reactExports.Fragment&&kt,ct!==reactExports.Fragment&&Rt),Tt)}function U$2(){let it=reactExports.useRef([]),g=reactExports.useCallback(et=>{for(let ot of it.current)ot!=null&&(typeof ot=="function"?ot(et):ot.current=et)},[]);return(...et)=>{if(!et.every(ot=>ot==null))return it.current=et,g}}function $$1(...it){return it.every(g=>g==null)?void 0:g=>{for(let et of it)et!=null&&(typeof et=="function"?et(g):et.current=g)}}function P$1(...it){if(it.length===0)return{};if(it.length===1)return it[0];let g={},et={};for(let ot of it)for(let ut in ot)ut.startsWith("on")&&typeof ot[ut]=="function"?(et[ut]!=null||(et[ut]=[]),et[ut].push(ot[ut])):g[ut]=ot[ut];if(g.disabled||g["aria-disabled"])for(let ot in et)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(ot)&&(et[ot]=[ut=>{var ct;return(ct=ut==null?void 0:ut.preventDefault)==null?void 0:ct.call(ut)}]);for(let ot in et)Object.assign(g,{[ot](ut,...ct){let dt=et[ot];for(let ft of dt){if((ut instanceof Event||(ut==null?void 0:ut.nativeEvent)instanceof Event)&&ut.defaultPrevented)return;ft(ut,...ct)}}});return g}function K(it){var g;return Object.assign(reactExports.forwardRef(it),{displayName:(g=it.displayName)!=null?g:it.name})}function m$4(it){let g=Object.assign({},it);for(let et in g)g[et]===void 0&&delete g[et];return g}function h$3(it,g=[]){let et=Object.assign({},it);for(let ot of g)ot in et&&delete et[ot];return et}function H$2(it){return React$3.version.split(".")[0]>="19"?it.props.ref:it.ref}let a$9="span";var s$3=(it=>(it[it.None=1]="None",it[it.Focusable=2]="Focusable",it[it.Hidden=4]="Hidden",it))(s$3||{});function l$2(it,g){var et;let{features:ot=1,...ut}=it,ct={ref:g,"aria-hidden":(ot&2)===2?!0:(et=ut["aria-hidden"])!=null?et:void 0,hidden:(ot&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(ot&4)===4&&(ot&2)!==2&&{display:"none"}}};return L$1()({ourProps:ct,theirProps:ut,slot:{},defaultTag:a$9,name:"Hidden"})}let f$6=K(l$2),u$3=Symbol();function T$2(it,g=!0){return Object.assign(it,{[u$3]:g})}function y$3(...it){let g=reactExports.useRef(it);reactExports.useEffect(()=>{g.current=it},[it]);let et=o$2(ot=>{for(let ut of g.current)ut!=null&&(typeof ut=="function"?ut(ot):ut.current=ot)});return it.every(ot=>ot==null||(ot==null?void 0:ot[u$3]))?void 0:et}let a$8=reactExports.createContext(null);a$8.displayName="DescriptionContext";function f$5(){let it=reactExports.useContext(a$8);if(it===null){let g=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(g,f$5),g}return it}function w$3(){let[it,g]=reactExports.useState([]);return[it.length>0?it.join(" "):void 0,reactExports.useMemo(()=>function(et){let ot=o$2(ct=>(g(dt=>[...dt,ct]),()=>g(dt=>{let ft=dt.slice(),St=ft.indexOf(ct);return St!==-1&&ft.splice(St,1),ft}))),ut=reactExports.useMemo(()=>({register:ot,slot:et.slot,name:et.name,props:et.props,value:et.value}),[ot,et.slot,et.name,et.props,et.value]);return React$3.createElement(a$8.Provider,{value:ut},et.children)},[g])]}let S$2="p";function C$2(it,g){let et=reactExports.useId(),ot=a$a(),{id:ut=`headlessui-description-${et}`,...ct}=it,dt=f$5(),ft=y$3(g);n$3(()=>dt.register(ut),[ut,dt.register]);let St=ot||!1,kt=reactExports.useMemo(()=>({...dt.slot,disabled:St}),[dt.slot,St]),Tt={ref:ft,...dt.props,id:ut};return L$1()({ourProps:Tt,theirProps:ct,slot:kt,defaultTag:S$2,name:dt.name||"Description"})}let _$1=K(C$2),H$1=Object.assign(_$1,{});var o$1=(it=>(it.Space=" ",it.Enter="Enter",it.Escape="Escape",it.Backspace="Backspace",it.Delete="Delete",it.ArrowLeft="ArrowLeft",it.ArrowUp="ArrowUp",it.ArrowRight="ArrowRight",it.ArrowDown="ArrowDown",it.Home="Home",it.End="End",it.PageUp="PageUp",it.PageDown="PageDown",it.Tab="Tab",it))(o$1||{});let e$2=reactExports.createContext(()=>{});function C$1({value:it,children:g}){return React$3.createElement(e$2.Provider,{value:it},g)}let a$7=class extends Map{constructor(g){super(),this.factory=g}get(g){let et=super.get(g);return et===void 0&&(et=this.factory(g),this.set(g,et)),et}};function a$6(it,g){let et=it(),ot=new Set;return{getSnapshot(){return et},subscribe(ut){return ot.add(ut),()=>ot.delete(ut)},dispatch(ut,...ct){let dt=g[ut].call(et,...ct);dt&&(et=dt,ot.forEach(ft=>ft()))}}}function o(it){return reactExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getSnapshot)}let p$1=new a$7(()=>a$6(()=>[],{ADD(it){return this.includes(it)?this:[...this,it]},REMOVE(it){let g=this.indexOf(it);if(g===-1)return this;let et=this.slice();return et.splice(g,1),et}}));function x$2(it,g){let et=p$1.get(g),ot=reactExports.useId(),ut=o(et);if(n$3(()=>{if(it)return et.dispatch("ADD",ot),()=>et.dispatch("REMOVE",ot)},[et,it]),!it)return!1;let ct=ut.indexOf(ot),dt=ut.length;return ct===-1&&(ct=dt,dt+=1),ct===dt-1}let f$4=new Map,u$2=new Map;function h$2(it){var g;let et=(g=u$2.get(it))!=null?g:0;return u$2.set(it,et+1),et!==0?()=>m$3(it):(f$4.set(it,{"aria-hidden":it.getAttribute("aria-hidden"),inert:it.inert}),it.setAttribute("aria-hidden","true"),it.inert=!0,()=>m$3(it))}function m$3(it){var g;let et=(g=u$2.get(it))!=null?g:1;if(et===1?u$2.delete(it):u$2.set(it,et-1),et!==1)return;let ot=f$4.get(it);ot&&(ot["aria-hidden"]===null?it.removeAttribute("aria-hidden"):it.setAttribute("aria-hidden",ot["aria-hidden"]),it.inert=ot.inert,f$4.delete(it))}function y$2(it,{allowed:g,disallowed:et}={}){let ot=x$2(it,"inert-others");n$3(()=>{var ut,ct;if(!ot)return;let dt=o$3();for(let St of(ut=et==null?void 0:et())!=null?ut:[])St&&dt.add(h$2(St));let ft=(ct=g==null?void 0:g())!=null?ct:[];for(let St of ft){if(!St)continue;let kt=u$5(St);if(!kt)continue;let Tt=St.parentElement;for(;Tt&&Tt!==kt.body;){for(let Rt of Tt.children)ft.some(Ft=>Rt.contains(Ft))||dt.add(h$2(Rt));Tt=Tt.parentElement}}return dt.dispose},[ot,g,et])}function m$2(it,g,et){let ot=s$4(ut=>{let ct=ut.getBoundingClientRect();ct.x===0&&ct.y===0&&ct.width===0&&ct.height===0&&et()});reactExports.useEffect(()=>{if(!it)return;let ut=g===null?null:g instanceof HTMLElement?g:g.current;if(!ut)return;let ct=o$3();if(typeof ResizeObserver<"u"){let dt=new ResizeObserver(()=>ot.current(ut));dt.observe(ut),ct.add(()=>dt.disconnect())}if(typeof IntersectionObserver<"u"){let dt=new IntersectionObserver(()=>ot.current(ut));dt.observe(ut),ct.add(()=>dt.disconnect())}return()=>ct.dispose()},[g,ot,it])}let f$3=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(it=>`${it}:not([tabindex='-1'])`).join(","),p=["[data-autofocus]"].map(it=>`${it}:not([tabindex='-1'])`).join(",");var F=(it=>(it[it.First=1]="First",it[it.Previous=2]="Previous",it[it.Next=4]="Next",it[it.Last=8]="Last",it[it.WrapAround=16]="WrapAround",it[it.NoScroll=32]="NoScroll",it[it.AutoFocus=64]="AutoFocus",it))(F||{}),T$1=(it=>(it[it.Error=0]="Error",it[it.Overflow=1]="Overflow",it[it.Success=2]="Success",it[it.Underflow=3]="Underflow",it))(T$1||{}),y$1=(it=>(it[it.Previous=-1]="Previous",it[it.Next=1]="Next",it))(y$1||{});function b$2(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(f$3)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}function S$1(it=document.body){return it==null?[]:Array.from(it.querySelectorAll(p)).sort((g,et)=>Math.sign((g.tabIndex||Number.MAX_SAFE_INTEGER)-(et.tabIndex||Number.MAX_SAFE_INTEGER)))}var h$1=(it=>(it[it.Strict=0]="Strict",it[it.Loose=1]="Loose",it))(h$1||{});function A(it,g=0){var et;return it===((et=u$5(it))==null?void 0:et.body)?!1:u$4(g,{0(){return it.matches(f$3)},1(){let ot=it;for(;ot!==null;){if(ot.matches(f$3))return!0;ot=ot.parentElement}return!1}})}var H=(it=>(it[it.Keyboard=0]="Keyboard",it[it.Mouse=1]="Mouse",it))(H||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",it=>{it.metaKey||it.altKey||it.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",it=>{it.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:it.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function I$2(it){it==null||it.focus({preventScroll:!0})}let w$2=["textarea","input"].join(",");function O$2(it){var g,et;return(et=(g=it==null?void 0:it.matches)==null?void 0:g.call(it,w$2))!=null?et:!1}function _(it,g=et=>et){return it.slice().sort((et,ot)=>{let ut=g(et),ct=g(ot);if(ut===null||ct===null)return 0;let dt=ut.compareDocumentPosition(ct);return dt&Node.DOCUMENT_POSITION_FOLLOWING?-1:dt&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function P(it,g,{sorted:et=!0,relativeTo:ot=null,skipElements:ut=[]}={}){let ct=Array.isArray(it)?it.length>0?it[0].ownerDocument:document:it.ownerDocument,dt=Array.isArray(it)?et?_(it):it:g&64?S$1(it):b$2(it);ut.length>0&&dt.length>1&&(dt=dt.filter(jt=>!ut.some(Bt=>Bt!=null&&"current"in Bt?(Bt==null?void 0:Bt.current)===jt:Bt===jt))),ot=ot??ct.activeElement;let ft=(()=>{if(g&5)return 1;if(g&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),St=(()=>{if(g&1)return 0;if(g&2)return Math.max(0,dt.indexOf(ot))-1;if(g&4)return Math.max(0,dt.indexOf(ot))+1;if(g&8)return dt.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),kt=g&32?{preventScroll:!0}:{},Tt=0,Rt=dt.length,Ft;do{if(Tt>=Rt||Tt+Rt<=0)return 0;let jt=St+Tt;if(g&16)jt=(jt+Rt)%Rt;else{if(jt<0)return 3;if(jt>=Rt)return 1}Ft=dt[jt],Ft==null||Ft.focus(kt),Tt+=ft}while(Ft!==ct.activeElement);return g&6&&O$2(Ft)&&Ft.select(),2}function t$2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i$5(){return/Android/gi.test(window.navigator.userAgent)}function n$2(){return t$2()||i$5()}function i$4(it,g,et,ot){let ut=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ct(dt){ut.current(dt)}return document.addEventListener(g,ct,ot),()=>document.removeEventListener(g,ct,ot)},[it,g,ot])}function s$2(it,g,et,ot){let ut=s$4(et);reactExports.useEffect(()=>{if(!it)return;function ct(dt){ut.current(dt)}return window.addEventListener(g,ct,ot),()=>window.removeEventListener(g,ct,ot)},[it,g,ot])}const E$1=30;function R$2(it,g,et){let ot=x$2(it,"outside-click"),ut=s$4(et),ct=reactExports.useCallback(function(St,kt){if(St.defaultPrevented)return;let Tt=kt(St);if(Tt===null||!Tt.getRootNode().contains(Tt)||!Tt.isConnected)return;let Rt=function Ft(jt){return typeof jt=="function"?Ft(jt()):Array.isArray(jt)||jt instanceof Set?jt:[jt]}(g);for(let Ft of Rt)if(Ft!==null&&(Ft.contains(Tt)||St.composed&&St.composedPath().includes(Ft)))return;return!A(Tt,h$1.Loose)&&Tt.tabIndex!==-1&&St.preventDefault(),ut.current(St,Tt)},[ut,g]),dt=reactExports.useRef(null);i$4(ot,"pointerdown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$4(ot,"mousedown",St=>{var kt,Tt;dt.current=((Tt=(kt=St.composedPath)==null?void 0:kt.call(St))==null?void 0:Tt[0])||St.target},!0),i$4(ot,"click",St=>{n$2()||dt.current&&(ct(St,()=>dt.current),dt.current=null)},!0);let ft=reactExports.useRef({x:0,y:0});i$4(ot,"touchstart",St=>{ft.current.x=St.touches[0].clientX,ft.current.y=St.touches[0].clientY},!0),i$4(ot,"touchend",St=>{let kt={x:St.changedTouches[0].clientX,y:St.changedTouches[0].clientY};if(!(Math.abs(kt.x-ft.current.x)>=E$1||Math.abs(kt.y-ft.current.y)>=E$1))return ct(St,()=>St.target instanceof HTMLElement?St.target:null)},!0),s$2(ot,"blur",St=>ct(St,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function n$1(...it){return reactExports.useMemo(()=>u$5(...it),[...it])}function E(it,g,et,ot){let ut=s$4(et);reactExports.useEffect(()=>{it=it??window;function ct(dt){ut.current(dt)}return it.addEventListener(g,ct,ot),()=>it.removeEventListener(g,ct,ot)},[it,g,ot])}function d$1(){let it;return{before({doc:g}){var et;let ot=g.documentElement,ut=(et=g.defaultView)!=null?et:window;it=Math.max(0,ut.innerWidth-ot.clientWidth)},after({doc:g,d:et}){let ot=g.documentElement,ut=Math.max(0,ot.clientWidth-ot.offsetWidth),ct=Math.max(0,it-ut);et.style(ot,"paddingRight",`${ct}px`)}}}function d(){return t$2()?{before({doc:it,d:g,meta:et}){function ot(ut){return et.containers.flatMap(ct=>ct()).some(ct=>ct.contains(ut))}g.microTask(()=>{var ut;if(window.getComputedStyle(it.documentElement).scrollBehavior!=="auto"){let ft=o$3();ft.style(it.documentElement,"scrollBehavior","auto"),g.add(()=>g.microTask(()=>ft.dispose()))}let ct=(ut=window.scrollY)!=null?ut:window.pageYOffset,dt=null;g.addEventListener(it,"click",ft=>{if(ft.target instanceof HTMLElement)try{let St=ft.target.closest("a");if(!St)return;let{hash:kt}=new URL(St.href),Tt=it.querySelector(kt);Tt&&!ot(Tt)&&(dt=Tt)}catch{}},!0),g.addEventListener(it,"touchstart",ft=>{if(ft.target instanceof HTMLElement)if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&ot(St.parentElement);)St=St.parentElement;g.style(St,"overscrollBehavior","contain")}else g.style(ft.target,"touchAction","none")}),g.addEventListener(it,"touchmove",ft=>{if(ft.target instanceof HTMLElement){if(ft.target.tagName==="INPUT")return;if(ot(ft.target)){let St=ft.target;for(;St.parentElement&&St.dataset.headlessuiPortal!==""&&!(St.scrollHeight>St.clientHeight||St.scrollWidth>St.clientWidth);)St=St.parentElement;St.dataset.headlessuiPortal===""&&ft.preventDefault()}else ft.preventDefault()}},{passive:!1}),g.add(()=>{var ft;let St=(ft=window.scrollY)!=null?ft:window.pageYOffset;ct!==St&&window.scrollTo(0,ct),dt&&dt.isConnected&&(dt.scrollIntoView({block:"nearest"}),dt=null)})})}}:{}}function r$1(){return{before({doc:it,d:g}){g.style(it.documentElement,"overflow","hidden")}}}function m$1(it){let g={};for(let et of it)Object.assign(g,et(g));return g}let a$5=a$6(()=>new Map,{PUSH(it,g){var et;let ot=(et=this.get(it))!=null?et:{doc:it,count:0,d:o$3(),meta:new Set};return ot.count++,ot.meta.add(g),this.set(it,ot),this},POP(it,g){let et=this.get(it);return et&&(et.count--,et.meta.delete(g)),this},SCROLL_PREVENT({doc:it,d:g,meta:et}){let ot={doc:it,d:g,meta:m$1(et)},ut=[d(),d$1(),r$1()];ut.forEach(({before:ct})=>ct==null?void 0:ct(ot)),ut.forEach(({after:ct})=>ct==null?void 0:ct(ot))},SCROLL_ALLOW({d:it}){it.dispose()},TEARDOWN({doc:it}){this.delete(it)}});a$5.subscribe(()=>{let it=a$5.getSnapshot(),g=new Map;for(let[et]of it)g.set(et,et.documentElement.style.overflow);for(let et of it.values()){let ot=g.get(et.doc)==="hidden",ut=et.count!==0;(ut&&!ot||!ut&&ot)&&a$5.dispatch(et.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",et),et.count===0&&a$5.dispatch("TEARDOWN",et)}});function a$4(it,g,et=()=>({containers:[]})){let ot=o(a$5),ut=g?ot.get(g):void 0,ct=ut?ut.count>0:!1;return n$3(()=>{if(!(!g||!it))return a$5.dispatch("PUSH",g,et),()=>a$5.dispatch("POP",g,et)},[it,g]),ct}function f$2(it,g,et=()=>[document.body]){let ot=x$2(it,"scroll-lock");a$4(ot,g,ut=>{var ct;return{containers:[...(ct=ut.containers)!=null?ct:[],et]}})}function c$3(it=0){let[g,et]=reactExports.useState(it),ot=reactExports.useCallback(St=>et(St),[g]),ut=reactExports.useCallback(St=>et(kt=>kt|St),[g]),ct=reactExports.useCallback(St=>(g&St)===St,[g]),dt=reactExports.useCallback(St=>et(kt=>kt&~St),[et]),ft=reactExports.useCallback(St=>et(kt=>kt^St),[et]);return{flags:g,setFlag:ot,addFlag:ut,hasFlag:ct,removeFlag:dt,toggleFlag:ft}}var T,b$1;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((T=process==null?void 0:process.env)==null?void 0:T.NODE_ENV)==="test"&&typeof((b$1=Element==null?void 0:Element.prototype)==null?void 0:b$1.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var L=(it=>(it[it.None=0]="None",it[it.Closed=1]="Closed",it[it.Enter=2]="Enter",it[it.Leave=4]="Leave",it))(L||{});function R$1(it){let g={};for(let et in it)it[et]===!0&&(g[`data-${et}`]="");return g}function x$1(it,g,et,ot){let[ut,ct]=reactExports.useState(et),{hasFlag:dt,addFlag:ft,removeFlag:St}=c$3(it&&ut?3:0),kt=reactExports.useRef(!1),Tt=reactExports.useRef(!1),Rt=p$2();return n$3(()=>{var Ft;if(it){if(et&&ct(!0),!g){et&&ft(3);return}return(Ft=ot==null?void 0:ot.start)==null||Ft.call(ot,et),C(g,{inFlight:kt,prepare(){Tt.current?Tt.current=!1:Tt.current=kt.current,kt.current=!0,!Tt.current&&(et?(ft(3),St(4)):(ft(4),St(2)))},run(){Tt.current?et?(St(3),ft(4)):(St(4),ft(3)):et?St(1):ft(1)},done(){var jt;Tt.current&&typeof g.getAnimations=="function"&&g.getAnimations().length>0||(kt.current=!1,St(7),et||ct(!1),(jt=ot==null?void 0:ot.end)==null||jt.call(ot,et))}})}},[it,et,g,Rt]),it?[ut,{closed:dt(1),enter:dt(2),leave:dt(4),transition:dt(2)||dt(4)}]:[et,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function C(it,{prepare:g,run:et,done:ot,inFlight:ut}){let ct=o$3();return j$1(it,{prepare:g,inFlight:ut}),ct.nextFrame(()=>{et(),ct.requestAnimationFrame(()=>{ct.add(M$2(it,ot))})}),ct.dispose}function M$2(it,g){var et,ot;let ut=o$3();if(!it)return ut.dispose;let ct=!1;ut.add(()=>{ct=!0});let dt=(ot=(et=it.getAnimations)==null?void 0:et.call(it).filter(ft=>ft instanceof CSSTransition))!=null?ot:[];return dt.length===0?(g(),ut.dispose):(Promise.allSettled(dt.map(ft=>ft.finished)).then(()=>{ct||g()}),ut.dispose)}function j$1(it,{inFlight:g,prepare:et}){if(g!=null&&g.current){et();return}let ot=it.style.transition;it.style.transition="none",et(),it.offsetHeight,it.style.transition=ot}function m(it,g){let et=reactExports.useRef([]),ot=o$2(it);reactExports.useEffect(()=>{let ut=[...et.current];for(let[ct,dt]of g.entries())if(et.current[ct]!==dt){let ft=ot(g,ut);return et.current=g,ft}},[ot,...g])}let n=reactExports.createContext(null);n.displayName="OpenClosedContext";var i$3=(it=>(it[it.Open=1]="Open",it[it.Closed=2]="Closed",it[it.Closing=4]="Closing",it[it.Opening=8]="Opening",it))(i$3||{});function u$1(){return reactExports.useContext(n)}function c$2({value:it,children:g}){return React$3.createElement(n.Provider,{value:it},g)}function s$1({children:it}){return React$3.createElement(n.Provider,{value:null},it)}function t$1(it){function g(){document.readyState!=="loading"&&(it(),document.removeEventListener("DOMContentLoaded",g))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",g),g())}let r=[];t$1(()=>{function it(g){if(!(g.target instanceof HTMLElement)||g.target===document.body||r[0]===g.target)return;let et=g.target;et=et.closest(f$3),r.unshift(et??g.target),r=r.filter(ot=>ot!=null&&ot.isConnected),r.splice(10)}window.addEventListener("click",it,{capture:!0}),window.addEventListener("mousedown",it,{capture:!0}),window.addEventListener("focus",it,{capture:!0}),document.body.addEventListener("click",it,{capture:!0}),document.body.addEventListener("mousedown",it,{capture:!0}),document.body.addEventListener("focus",it,{capture:!0})});function c$1(it){let g=o$2(it),et=reactExports.useRef(!1);reactExports.useEffect(()=>(et.current=!1,()=>{et.current=!0,t$4(()=>{et.current&&g()})}),[g])}function s(){let it=typeof document>"u";return"useSyncExternalStore"in t$5?(g=>g.useSyncExternalStore)(t$5)(()=>()=>{},()=>!1,()=>!it):!1}function l$1(){let it=s(),[g,et]=reactExports.useState(s$5.isHandoffComplete);return g&&s$5.isHandoffComplete===!1&&et(!1),reactExports.useEffect(()=>{g!==!0&&et(!0)},[g]),reactExports.useEffect(()=>s$5.handoff(),[]),it?!1:g}let e$1=reactExports.createContext(!1);function a$3(){return reactExports.useContext(e$1)}function l(it){return React$3.createElement(e$1.Provider,{value:it.force},it.children)}function N(it){let g=a$3(),et=reactExports.useContext(v),ot=n$1(it),[ut,ct]=reactExports.useState(()=>{var dt;if(!g&&et!==null)return(dt=et.current)!=null?dt:null;if(s$5.isServer)return null;let ft=ot==null?void 0:ot.getElementById("headlessui-portal-root");if(ft)return ft;if(ot===null)return null;let St=ot.createElement("div");return St.setAttribute("id","headlessui-portal-root"),ot.body.appendChild(St)});return reactExports.useEffect(()=>{ut!==null&&(ot!=null&&ot.body.contains(ut)||ot==null||ot.body.appendChild(ut))},[ut,ot]),reactExports.useEffect(()=>{g||et!==null&&ct(et.current)},[et,ct,g]),ut}let M$1=reactExports.Fragment,S=K(function(it,g){let et=it,ot=reactExports.useRef(null),ut=y$3(T$2(Rt=>{ot.current=Rt}),g),ct=n$1(ot),dt=N(ot),[ft]=reactExports.useState(()=>{var Rt;return s$5.isServer?null:(Rt=ct==null?void 0:ct.createElement("div"))!=null?Rt:null}),St=reactExports.useContext(y),kt=l$1();n$3(()=>{!dt||!ft||dt.contains(ft)||(ft.setAttribute("data-headlessui-portal",""),dt.appendChild(ft))},[dt,ft]),n$3(()=>{if(ft&&St)return St.register(ft)},[St,ft]),c$1(()=>{var Rt;!dt||!ft||(ft instanceof Node&&dt.contains(ft)&&dt.removeChild(ft),dt.childNodes.length<=0&&((Rt=dt.parentElement)==null||Rt.removeChild(dt)))});let Tt=L$1();return kt?!dt||!ft?null:reactDomExports.createPortal(Tt({ourProps:{ref:ut},theirProps:et,slot:{},defaultTag:M$1,name:"Portal"}),ft):null});function j(it,g){let et=y$3(g),{enabled:ot=!0,...ut}=it,ct=L$1();return ot?React$3.createElement(S,{...ut,ref:et}):ct({ourProps:{ref:et},theirProps:ut,slot:{},defaultTag:M$1,name:"Portal"})}let W=reactExports.Fragment,v=reactExports.createContext(null);function I$1(it,g){let{target:et,...ot}=it,ut={ref:y$3(g)},ct=L$1();return React$3.createElement(v.Provider,{value:et},ct({ourProps:ut,theirProps:ot,defaultTag:W,name:"Popover.Group"}))}let y=reactExports.createContext(null);function te$1(){let it=reactExports.useContext(y),g=reactExports.useRef([]),et=o$2(ct=>(g.current.push(ct),it&&it.register(ct),()=>ot(ct))),ot=o$2(ct=>{let dt=g.current.indexOf(ct);dt!==-1&&g.current.splice(dt,1),it&&it.unregister(ct)}),ut=reactExports.useMemo(()=>({register:et,unregister:ot,portals:g}),[et,ot,g]);return[g,reactExports.useMemo(()=>function({children:ct}){return React$3.createElement(y.Provider,{value:ut},ct)},[ut])]}let J=K(j),X$1=K(I$1),re$1=Object.assign(J,{Group:X$1});function a$2(it,g=typeof document<"u"?document.defaultView:null,et){let ot=x$2(it,"escape");E(g,"keydown",ut=>{ot&&(ut.defaultPrevented||ut.key===o$1.Escape&&et(ut))})}function f$1(){var it;let[g]=reactExports.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[et,ot]=reactExports.useState((it=g==null?void 0:g.matches)!=null?it:!1);return n$3(()=>{if(!g)return;function ut(ct){ot(ct.matches)}return g.addEventListener("change",ut),()=>g.removeEventListener("change",ut)},[g]),et}function R({defaultContainers:it=[],portals:g,mainTreeNode:et}={}){let ot=n$1(et),ut=o$2(()=>{var ct,dt;let ft=[];for(let St of it)St!==null&&(St instanceof HTMLElement?ft.push(St):"current"in St&&St.current instanceof HTMLElement&&ft.push(St.current));if(g!=null&&g.current)for(let St of g.current)ft.push(St);for(let St of(ct=ot==null?void 0:ot.querySelectorAll("html > *, body > *"))!=null?ct:[])St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St.id!=="headlessui-portal-root"&&(et&&(St.contains(et)||St.contains((dt=et==null?void 0:et.getRootNode())==null?void 0:dt.host))||ft.some(kt=>St.contains(kt))||ft.push(St));return ft});return{resolveContainers:ut,contains:o$2(ct=>ut().some(dt=>dt.contains(ct)))}}let a$1=reactExports.createContext(null);function O$1({children:it,node:g}){let[et,ot]=reactExports.useState(null),ut=b(g??et);return React$3.createElement(a$1.Provider,{value:ut},it,ut===null&&React$3.createElement(f$6,{features:s$3.Hidden,ref:ct=>{var dt,ft;if(ct){for(let St of(ft=(dt=u$5(ct))==null?void 0:dt.querySelectorAll("html > *, body > *"))!=null?ft:[])if(St!==document.body&&St!==document.head&&St instanceof HTMLElement&&St!=null&&St.contains(ct)){ot(St);break}}}}))}function b(it=null){var g;return(g=reactExports.useContext(a$1))!=null?g:it}function f(){let it=reactExports.useRef(!1);return n$3(()=>(it.current=!0,()=>{it.current=!1}),[]),it}var a=(it=>(it[it.Forwards=0]="Forwards",it[it.Backwards=1]="Backwards",it))(a||{});function u(){let it=reactExports.useRef(0);return s$2(!0,"keydown",g=>{g.key==="Tab"&&(it.current=g.shiftKey?1:0)},!0),it}function U$1(it){if(!it)return new Set;if(typeof it=="function")return new Set(it());let g=new Set;for(let et of it.current)et.current instanceof HTMLElement&&g.add(et.current);return g}let Z="div";var x=(it=>(it[it.None=0]="None",it[it.InitialFocus=1]="InitialFocus",it[it.TabLock=2]="TabLock",it[it.FocusLock=4]="FocusLock",it[it.RestoreFocus=8]="RestoreFocus",it[it.AutoFocus=16]="AutoFocus",it))(x||{});function $(it,g){let et=reactExports.useRef(null),ot=y$3(et,g),{initialFocus:ut,initialFocusFallback:ct,containers:dt,features:ft=15,...St}=it;l$1()||(ft=0);let kt=n$1(et);ee(ft,{ownerDocument:kt});let Tt=te(ft,{ownerDocument:kt,container:et,initialFocus:ut,initialFocusFallback:ct});re(ft,{ownerDocument:kt,container:et,containers:dt,previousActiveElement:Tt});let Rt=u(),Ft=o$2(Kt=>{let Yt=et.current;Yt&&(er=>er())(()=>{u$4(Rt.current,{[a.Forwards]:()=>{P(Yt,F.First,{skipElements:[Kt.relatedTarget,ct]})},[a.Backwards]:()=>{P(Yt,F.Last,{skipElements:[Kt.relatedTarget,ct]})}})})}),jt=x$2(!!(ft&2),"focus-trap#tab-lock"),Bt=p$2(),zt=reactExports.useRef(!1),Ht={ref:ot,onKeyDown(Kt){Kt.key=="Tab"&&(zt.current=!0,Bt.requestAnimationFrame(()=>{zt.current=!1}))},onBlur(Kt){if(!(ft&4))return;let Yt=U$1(dt);et.current instanceof HTMLElement&&Yt.add(et.current);let er=Kt.relatedTarget;er instanceof HTMLElement&&er.dataset.headlessuiFocusGuard!=="true"&&(I(Yt,er)||(zt.current?P(et.current,u$4(Rt.current,{[a.Forwards]:()=>F.Next,[a.Backwards]:()=>F.Previous})|F.WrapAround,{relativeTo:Kt.target}):Kt.target instanceof HTMLElement&&I$2(Kt.target)))}},Ut=L$1();return React$3.createElement(React$3.Fragment,null,jt&&React$3.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:Ft,features:s$3.Focusable}),Ut({ourProps:Ht,theirProps:St,defaultTag:Z,name:"FocusTrap"}),jt&&React$3.createElement(f$6,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:Ft,features:s$3.Focusable}))}let D=K($),ye=Object.assign(D,{features:x});function w$1(it=!0){let g=reactExports.useRef(r.slice());return m(([et],[ot])=>{ot===!0&&et===!1&&t$4(()=>{g.current.splice(0)}),ot===!1&&et===!0&&(g.current=r.slice())},[it,r,g]),o$2(()=>{var et;return(et=g.current.find(ot=>ot!=null&&ot.isConnected))!=null?et:null})}function ee(it,{ownerDocument:g}){let et=!!(it&8),ot=w$1(et);m(()=>{et||(g==null?void 0:g.activeElement)===(g==null?void 0:g.body)&&I$2(ot())},[et]),c$1(()=>{et&&I$2(ot())})}function te(it,{ownerDocument:g,container:et,initialFocus:ot,initialFocusFallback:ut}){let ct=reactExports.useRef(null),dt=x$2(!!(it&1),"focus-trap#initial-focus"),ft=f();return m(()=>{if(it===0)return;if(!dt){ut!=null&&ut.current&&I$2(ut.current);return}let St=et.current;St&&t$4(()=>{if(!ft.current)return;let kt=g==null?void 0:g.activeElement;if(ot!=null&&ot.current){if((ot==null?void 0:ot.current)===kt){ct.current=kt;return}}else if(St.contains(kt)){ct.current=kt;return}if(ot!=null&&ot.current)I$2(ot.current);else{if(it&16){if(P(St,F.First|F.AutoFocus)!==T$1.Error)return}else if(P(St,F.First)!==T$1.Error)return;if(ut!=null&&ut.current&&(I$2(ut.current),(g==null?void 0:g.activeElement)===ut.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}ct.current=g==null?void 0:g.activeElement})},[ut,dt,it]),ct}function re(it,{ownerDocument:g,container:et,containers:ot,previousActiveElement:ut}){let ct=f(),dt=!!(it&4);E(g==null?void 0:g.defaultView,"focus",ft=>{if(!dt||!ct.current)return;let St=U$1(ot);et.current instanceof HTMLElement&&St.add(et.current);let kt=ut.current;if(!kt)return;let Tt=ft.target;Tt&&Tt instanceof HTMLElement?I(St,Tt)?(ut.current=Tt,I$2(Tt)):(ft.preventDefault(),ft.stopPropagation(),I$2(kt)):I$2(ut.current)},!0)}function I(it,g){for(let et of it)if(et.contains(g))return!0;return!1}function ue(it){var g;return!!(it.enter||it.enterFrom||it.enterTo||it.leave||it.leaveFrom||it.leaveTo)||((g=it.as)!=null?g:de)!==reactExports.Fragment||React$3.Children.count(it.children)===1}let w=reactExports.createContext(null);w.displayName="TransitionContext";var _e=(it=>(it.Visible="visible",it.Hidden="hidden",it))(_e||{});function De(){let it=reactExports.useContext(w);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}function He$1(){let it=reactExports.useContext(M);if(it===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return it}let M=reactExports.createContext(null);M.displayName="NestingContext";function U(it){return"children"in it?U(it.children):it.current.filter(({el:g})=>g.current!==null).filter(({state:g})=>g==="visible").length>0}function Te(it,g){let et=s$4(it),ot=reactExports.useRef([]),ut=f(),ct=p$2(),dt=o$2((jt,Bt=A$1.Hidden)=>{let zt=ot.current.findIndex(({el:Ht})=>Ht===jt);zt!==-1&&(u$4(Bt,{[A$1.Unmount](){ot.current.splice(zt,1)},[A$1.Hidden](){ot.current[zt].state="hidden"}}),ct.microTask(()=>{var Ht;!U(ot)&&ut.current&&((Ht=et.current)==null||Ht.call(et))}))}),ft=o$2(jt=>{let Bt=ot.current.find(({el:zt})=>zt===jt);return Bt?Bt.state!=="visible"&&(Bt.state="visible"):ot.current.push({el:jt,state:"visible"}),()=>dt(jt,A$1.Unmount)}),St=reactExports.useRef([]),kt=reactExports.useRef(Promise.resolve()),Tt=reactExports.useRef({enter:[],leave:[]}),Rt=o$2((jt,Bt,zt)=>{St.current.splice(0),g&&(g.chains.current[Bt]=g.chains.current[Bt].filter(([Ht])=>Ht!==jt)),g==null||g.chains.current[Bt].push([jt,new Promise(Ht=>{St.current.push(Ht)})]),g==null||g.chains.current[Bt].push([jt,new Promise(Ht=>{Promise.all(Tt.current[Bt].map(([Ut,Kt])=>Kt)).then(()=>Ht())})]),Bt==="enter"?kt.current=kt.current.then(()=>g==null?void 0:g.wait.current).then(()=>zt(Bt)):zt(Bt)}),Ft=o$2((jt,Bt,zt)=>{Promise.all(Tt.current[Bt].splice(0).map(([Ht,Ut])=>Ut)).then(()=>{var Ht;(Ht=St.current.shift())==null||Ht()}).then(()=>zt(Bt))});return reactExports.useMemo(()=>({children:ot,register:ft,unregister:dt,onStart:Rt,onStop:Ft,wait:kt,chains:Tt}),[ft,dt,ot,Rt,Ft,Tt,kt])}let de=reactExports.Fragment,fe=O$3.RenderStrategy;function Ae(it,g){var et,ot;let{transition:ut=!0,beforeEnter:ct,afterEnter:dt,beforeLeave:ft,afterLeave:St,enter:kt,enterFrom:Tt,enterTo:Rt,entered:Ft,leave:jt,leaveFrom:Bt,leaveTo:zt,...Ht}=it,[Ut,Kt]=reactExports.useState(null),Yt=reactExports.useRef(null),er=ue(it),ar=y$3(...er?[Yt,g,Kt]:g===null?[]:[g]),ir=(et=Ht.unmount)==null||et?A$1.Unmount:A$1.Hidden,{show:lr,appear:cr,initial:vr}=De(),[xr,yr]=reactExports.useState(lr?"visible":"hidden"),Sr=He$1(),{register:kr,unregister:Pr}=Sr;n$3(()=>kr(Yt),[kr,Yt]),n$3(()=>{if(ir===A$1.Hidden&&Yt.current){if(lr&&xr!=="visible"){yr("visible");return}return u$4(xr,{hidden:()=>Pr(Yt),visible:()=>kr(Yt)})}},[xr,Yt,kr,Pr,lr,ir]);let Or=l$1();n$3(()=>{if(er&&Or&&xr==="visible"&&Yt.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[Yt,xr,Or,er]);let hr=vr&&!cr,Tr=cr&&lr&&vr,mr=reactExports.useRef(!1),Er=Te(()=>{mr.current||(yr("hidden"),Pr(Yt))},Sr),Dr=o$2(ln=>{mr.current=!0;let yn=ln?"enter":"leave";Er.onStart(Yt,yn,pn=>{pn==="enter"?ct==null||ct():pn==="leave"&&(ft==null||ft())})}),Cr=o$2(ln=>{let yn=ln?"enter":"leave";mr.current=!1,Er.onStop(Yt,yn,pn=>{pn==="enter"?dt==null||dt():pn==="leave"&&(St==null||St())}),yn==="leave"&&!U(Er)&&(yr("hidden"),Pr(Yt))});reactExports.useEffect(()=>{er&&ut||(Dr(lr),Cr(lr))},[lr,er,ut]);let Lr=(()=>!(!ut||!er||!Or||hr))(),[,qr]=x$1(Lr,Ut,lr,{start:Dr,end:Cr}),sn=m$4({ref:ar,className:((ot=t$3(Ht.className,Tr&&kt,Tr&&Tt,qr.enter&&kt,qr.enter&&qr.closed&&Tt,qr.enter&&!qr.closed&&Rt,qr.leave&&jt,qr.leave&&!qr.closed&&Bt,qr.leave&&qr.closed&&zt,!qr.transition&&lr&&Ft))==null?void 0:ot.trim())||void 0,...R$1(qr)}),an=0;xr==="visible"&&(an|=i$3.Open),xr==="hidden"&&(an|=i$3.Closed),qr.enter&&(an|=i$3.Opening),qr.leave&&(an|=i$3.Closing);let tn=L$1();return React$3.createElement(M.Provider,{value:Er},React$3.createElement(c$2,{value:an},tn({ourProps:sn,theirProps:Ht,defaultTag:de,features:fe,visible:xr==="visible",name:"Transition.Child"})))}function Ie$1(it,g){let{show:et,appear:ot=!1,unmount:ut=!0,...ct}=it,dt=reactExports.useRef(null),ft=ue(it),St=y$3(...ft?[dt,g]:g===null?[]:[g]);l$1();let kt=u$1();if(et===void 0&&kt!==null&&(et=(kt&i$3.Open)===i$3.Open),et===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Tt,Rt]=reactExports.useState(et?"visible":"hidden"),Ft=Te(()=>{et||Rt("hidden")}),[jt,Bt]=reactExports.useState(!0),zt=reactExports.useRef([et]);n$3(()=>{jt!==!1&&zt.current[zt.current.length-1]!==et&&(zt.current.push(et),Bt(!1))},[zt,et]);let Ht=reactExports.useMemo(()=>({show:et,appear:ot,initial:jt}),[et,ot,jt]);n$3(()=>{et?Rt("visible"):!U(Ft)&&dt.current!==null&&Rt("hidden")},[et,Ft]);let Ut={unmount:ut},Kt=o$2(()=>{var ar;jt&&Bt(!1),(ar=it.beforeEnter)==null||ar.call(it)}),Yt=o$2(()=>{var ar;jt&&Bt(!1),(ar=it.beforeLeave)==null||ar.call(it)}),er=L$1();return React$3.createElement(M.Provider,{value:Ft},React$3.createElement(w.Provider,{value:Ht},er({ourProps:{...Ut,as:reactExports.Fragment,children:React$3.createElement(me,{ref:St,...Ut,...ct,beforeEnter:Kt,beforeLeave:Yt})},theirProps:{},defaultTag:reactExports.Fragment,features:fe,visible:Tt==="visible",name:"Transition"})))}function Le(it,g){let et=reactExports.useContext(w)!==null,ot=u$1()!==null;return React$3.createElement(React$3.Fragment,null,!et&&ot?React$3.createElement(X,{ref:g,...it}):React$3.createElement(me,{ref:g,...it}))}let X=K(Ie$1),me=K(Ae),Fe=K(Le),ze=Object.assign(X,{Child:Fe,Root:X});var Oe=(it=>(it[it.Open=0]="Open",it[it.Closed=1]="Closed",it))(Oe||{}),he=(it=>(it[it.SetTitleId=0]="SetTitleId",it))(he||{});let Se={0(it,g){return it.titleId===g.id?it:{...it,titleId:g.id}}},k=reactExports.createContext(null);k.displayName="DialogContext";function O(it){let g=reactExports.useContext(k);if(g===null){let et=new Error(`<${it} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(et,O),et}return g}function Ie(it,g){return u$4(g.type,Se,it,g)}let V=K(function(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-${et}`,open:ut,onClose:ct,initialFocus:dt,role:ft="dialog",autoFocus:St=!0,__demoMode:kt=!1,unmount:Tt=!1,...Rt}=it,Ft=reactExports.useRef(!1);ft=function(){return ft==="dialog"||ft==="alertdialog"?ft:(Ft.current||(Ft.current=!0,console.warn(`Invalid role [${ft}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let jt=u$1();ut===void 0&&jt!==null&&(ut=(jt&i$3.Open)===i$3.Open);let Bt=reactExports.useRef(null),zt=y$3(Bt,g),Ht=n$1(Bt),Ut=ut?0:1,[Kt,Yt]=reactExports.useReducer(Ie,{titleId:null,descriptionId:null,panelRef:reactExports.createRef()}),er=o$2(()=>ct(!1)),ar=o$2(Cr=>Yt({type:0,id:Cr})),ir=l$1()?Ut===0:!1,[lr,cr]=te$1(),vr={get current(){var Cr;return(Cr=Kt.panelRef.current)!=null?Cr:Bt.current}},xr=b(),{resolveContainers:yr}=R({mainTreeNode:xr,portals:lr,defaultContainers:[vr]}),Sr=jt!==null?(jt&i$3.Closing)===i$3.Closing:!1;y$2(kt||Sr?!1:ir,{allowed:o$2(()=>{var Cr,Lr;return[(Lr=(Cr=Bt.current)==null?void 0:Cr.closest("[data-headlessui-portal]"))!=null?Lr:null]}),disallowed:o$2(()=>{var Cr;return[(Cr=xr==null?void 0:xr.closest("body > *:not(#headlessui-portal-root)"))!=null?Cr:null]})}),R$2(ir,yr,Cr=>{Cr.preventDefault(),er()}),a$2(ir,Ht==null?void 0:Ht.defaultView,Cr=>{Cr.preventDefault(),Cr.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),er()}),f$2(kt||Sr?!1:ir,Ht,yr),m$2(ir,Bt,er);let[kr,Pr]=w$3(),Or=reactExports.useMemo(()=>[{dialogState:Ut,close:er,setTitleId:ar,unmount:Tt},Kt],[Ut,Kt,er,ar,Tt]),hr=reactExports.useMemo(()=>({open:Ut===0}),[Ut]),Tr={ref:zt,id:ot,role:ft,tabIndex:-1,"aria-modal":kt?void 0:Ut===0?!0:void 0,"aria-labelledby":Kt.titleId,"aria-describedby":kr,unmount:Tt},mr=!f$1(),Er=x.None;ir&&!kt&&(Er|=x.RestoreFocus,Er|=x.TabLock,St&&(Er|=x.AutoFocus),mr&&(Er|=x.InitialFocus));let Dr=L$1();return React$3.createElement(s$1,null,React$3.createElement(l,{force:!0},React$3.createElement(re$1,null,React$3.createElement(k.Provider,{value:Or},React$3.createElement(X$1,{target:Bt},React$3.createElement(l,{force:!1},React$3.createElement(Pr,{slot:hr},React$3.createElement(cr,null,React$3.createElement(ye,{initialFocus:dt,initialFocusFallback:Bt,containers:yr,features:Er},React$3.createElement(C$1,{value:er},Dr({ourProps:Tr,theirProps:Rt,slot:hr,defaultTag:Me,features:Ge,visible:Ut===0,name:"Dialog"})))))))))))}),Me="div",Ge=O$3.RenderStrategy|O$3.Static;function ke(it,g){let{transition:et=!1,open:ot,...ut}=it,ct=u$1(),dt=it.hasOwnProperty("open")||ct!==null,ft=it.hasOwnProperty("onClose");if(!dt&&!ft)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!dt)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!ft)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!ct&&typeof it.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${it.open}`);if(typeof it.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${it.onClose}`);return(ot!==void 0||et)&&!ut.static?React$3.createElement(O$1,null,React$3.createElement(ze,{show:ot,transition:et,unmount:ut.unmount},React$3.createElement(V,{ref:g,...ut}))):React$3.createElement(O$1,null,React$3.createElement(V,{ref:g,open:ot,...ut}))}let we="div";function Be(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-panel-${et}`,transition:ut=!1,...ct}=it,[{dialogState:dt,unmount:ft},St]=O("Dialog.Panel"),kt=y$3(g,St.panelRef),Tt=reactExports.useMemo(()=>({open:dt===0}),[dt]),Rt=o$2(Ht=>{Ht.stopPropagation()}),Ft={ref:kt,id:ot,onClick:Rt},jt=ut?Fe:reactExports.Fragment,Bt=ut?{unmount:ft}:{},zt=L$1();return React$3.createElement(jt,{...Bt},zt({ourProps:Ft,theirProps:ct,slot:Tt,defaultTag:we,name:"Dialog.Panel"}))}let Ue="div";function He(it,g){let{transition:et=!1,...ot}=it,[{dialogState:ut,unmount:ct}]=O("Dialog.Backdrop"),dt=reactExports.useMemo(()=>({open:ut===0}),[ut]),ft={ref:g,"aria-hidden":!0},St=et?Fe:reactExports.Fragment,kt=et?{unmount:ct}:{},Tt=L$1();return React$3.createElement(St,{...kt},Tt({ourProps:ft,theirProps:ot,slot:dt,defaultTag:Ue,name:"Dialog.Backdrop"}))}let Ne="h2";function We(it,g){let et=reactExports.useId(),{id:ot=`headlessui-dialog-title-${et}`,...ut}=it,[{dialogState:ct,setTitleId:dt}]=O("Dialog.Title"),ft=y$3(g);reactExports.useEffect(()=>(dt(ot),()=>dt(null)),[ot,dt]);let St=reactExports.useMemo(()=>({open:ct===0}),[ct]),kt={ref:ft,id:ot};return L$1()({ourProps:kt,theirProps:ut,slot:St,defaultTag:Ne,name:"Dialog.Title"})}let $e=K(ke),je=K(Be),Dt=K(He),Ye=K(We),yt=Object.assign($e,{Panel:je,Title:Ye,Description:H$1});const navLinks=[{href:"/",label:"Home"},{href:"sign-up",label:"Sign Up"},{href:"contact",label:"Contact Us"},{href:"shop",label:"Shop"},{href:"login",label:"Login"}],cannedPrompts={beginner:[{label:" Social Media Growth Guide",text:"Write a 5-page lead magnet teaching small business owners how to grow their social media following with organic content, engagement, and consistency strategies."},{label:" Email Marketing Mastery",text:"Create a detailed guide on building and nurturing an email list that converts leads into loyal customers with proven automation techniques."},{label:" Personal Branding Blueprint",text:"Write a 5-page blueprint showing entrepreneurs how to define their brand identity, build authority online, and attract ideal clients."},{label:" Design Secrets for Non-Designers",text:"Generate a lead magnet teaching beginners how to design professional graphics using free tools like Canva, including typography and color tips."},{label:" Content Creation Starter Pack",text:"Write a detailed guide helping creators build a content calendar, repurpose videos, and plan content for multiple platforms efficiently."},{label:" The Beginners Guide to Digital Products",text:"Create a 5-page guide explaining how to turn skills into profitable digital products like eBooks, courses, or templates."},{label:" Productivity Hacks for Creators",text:"Generate a guide full of time-saving systems, tools, and automation tricks that help creators stay consistent and organized."},{label:" 7 Steps to Launch Your Online Business",text:"Write a step-by-step roadmap for beginners to start an online business, from idea validation to first sale."},{label:" The Ultimate AI Prompt Guide",text:"Create a 5-page lead magnet showing users how to craft better AI prompts for marketing, writing, and design workflows."},{label:" Monetize Your Music Online",text:"Write a guide showing independent musicians how to sell music, build fanbases, and create recurring revenue from digital content."}],professional:[{label:" Build Your First Website",text:"Create a simple 5-page beginner guide teaching small businesses how to plan, design, and launch their first website using modern no-code tools."},{label:" Create & Sell Digital Templates",text:"Write a guide explaining how to design and sell Canva, Notion, or Google Docs templates that bring consistent passive income."},{label:" Mastering Video Marketing",text:"Generate a 5-page lead magnet teaching creators how to plan, shoot, and promote short-form videos that build trust and conversions."},{label:" Branding Psychology 101",text:"Write a lead magnet breaking down the psychology of color, typography, and emotion in brand design."},{label:" Freelancer Success Playbook",text:"Create a guide showing freelancers how to price their services, close clients, and scale into an agency model."},{label:" The Digital Marketing Roadmap",text:"Write a complete 5-step roadmap for entrepreneurs to master content, SEO, ads, and email marketing for consistent traffic."},{label:" Copywriting for Conversions",text:"Generate a guide that teaches beginners the art of persuasive writing  from headlines to calls-to-action."},{label:" Funnel Building Simplified",text:"Write a 5-page walkthrough on building high-converting funnels using lead magnets, tripwires, and upsells."},{label:" Automate Your Business",text:"Create a guide showing small business owners how to automate repetitive tasks using Zapier, AI, and scheduling tools."},{label:" Data-Driven Marketing",text:"Write a beginner-friendly guide teaching business owners how to track analytics, interpret data, and improve conversions."}],expert:[{label:" The Psychology of Persuasion in Marketing",text:"Write a 5-page academic-style guide exploring how cognitive biases, emotional triggers, and storytelling affect consumer decision-making in marketing and branding."},{label:" The Science of Habit-Building for Creators",text:"Develop a 5-page guide teaching creators how to build long-term consistency by applying behavioral science and habit-formation frameworks to their creative routines."},{label:" The Economics of Attention",text:"Write a thought-provoking lead magnet analyzing how attention has become a modern currency, explaining scarcity, virality, and monetization in the digital economy."},{label:" Design Thinking for Business Innovation",text:"Generate a 5-page teaching resource showing entrepreneurs how to use design thinking methodology to solve business problems and create user-centered products."},{label:" Strategic Positioning for Small Brands",text:"Write an MBA-level breakdown of how to position a brand within competitive markets using differentiation, value perception, and storytelling."},{label:" The Art of Thought Leadership",text:"Create a guide for experts on how to transform knowledge into influence by publishing insights, frameworks, and educational content that attract authority."},{label:" The Systems of Scale",text:"Write a detailed 5-page framework teaching small teams how to transition from chaos to structure using documented workflows, automation, and SOPs."},{label:" Pricing Psychology & Value Perception",text:"Develop a lead magnet explaining how anchoring, decoy pricing, and perceived value shape buyer decisions  with real-world examples and ethical applications."},{label:" The Future of AI in Creative Work",text:"Write an educational report exploring how AI tools are transforming creative industries, ethics, and productivity  with actionable guidance for adaptation."},{label:" Web Design Principles That Convert",text:"Generate a professional-level guide that breaks down visual hierarchy, white space, and conversion-driven design for modern web experiences."},{label:" The Strategic Content Framework",text:"Write a 5-page plan teaching creators how to map content pillars, storytelling arcs, and audience journeys for consistent long-term growth."},{label:" The History of Branding  and What It Teaches Modern Creators",text:"Develop a mini-course-style lead magnet that compares legacy branding (Coca-Cola, Nike, Apple) with modern personal branding on social platforms."},{label:" Ethics & Authenticity in Digital Marketing",text:"Write a reflective guide on maintaining authenticity, transparency, and trust in a world of automation, influencer deals, and AI content."},{label:" Business Models for the Digital Age",text:"Create a 5-page breakdown of proven online business models  subscription, affiliate, info-products, SaaS  including their pros, cons, and margins."},{label:" The Creators Intellectual Property Handbook",text:"Write a guide explaining copyright, licensing, and how creators can protect their work legally when distributing digital products and media."},{label:" Storytelling Frameworks That Sell",text:"Generate a 5-page educational guide unpacking narrative structures like the Heros Journey, PAS, and StoryBrand for use in sales pages and videos."},{label:" The Analytics of Growth",text:"Teach business owners how to interpret engagement metrics, user cohorts, and conversion funnels like a data scientist to make smarter creative decisions."},{label:" Building Community-Driven Brands",text:"Write a 5-page resource on fostering belonging, trust, and shared identity around a brand or product using modern community platforms."},{label:" The Architecture of Influence",text:"Develop a high-level guide mapping how influence spreads through networks, social proof, and credibility  with tactics for ethical persuasion."},{label:" The Modern Creative MBA",text:"Write a 5-page masterclass that condenses key principles of marketing, finance, operations, and leadership for modern digital creators running personal brands."}]},themeStyles=[],colorThemes=[{name:"modern",label:"Modern",preview:"#e2e8f0"},{name:"classic",label:"Classic",preview:"#fffaf5"},{name:"bold",label:"Bold",preview:"#f9e8ff"},{name:"dark",label:"Dark",preview:"#030712"},{name:"royal",label:"Royal",preview:"#2E026D"},{name:"mint",label:"Mint",preview:"#d1fae5"},{name:"sunrise",label:"Sunrise",preview:"#fed7aa"},{name:"ocean",label:"Ocean",preview:"#bae6fd"},{name:"rose",label:"Rose",preview:"#fce7f3"},{name:"graphite",label:"Graphite",preview:"#1f2937"},{name:"forest",label:"Forest",preview:"#065f46"},{name:"gold",label:"Gold",preview:"#f59e0b"},{name:"lavender",label:"Lavender",preview:"#c084fc"},{name:"peach",label:"Peach",preview:"#f97316"},{name:"midnight",label:"Midnight",preview:"#1e293b"},{name:"aqua",label:"Aqua",preview:"#0ea5e9"},{name:"berry",label:"Berry",preview:"#7e22ce"},{name:"lime",label:"Lime",preview:"#65a30d"},{name:"sand",label:"Sand",preview:"#fcd34d"},{name:"sky",label:"Sky",preview:"#60a5fa"},{name:"copper",label:"Copper",preview:"#b45309"},{name:"ice",label:"Ice",preview:"#e0f2fe"},{name:"steel",label:"Steel",preview:"#475569"},{name:"coral",label:"Coral",preview:"#fb7185"},{name:"emerald",label:"Emerald",preview:"#10b981"},{name:"bronze",label:"Bronze",preview:"#78350f"},{name:"onyx",label:"Onyx",preview:"#0f172a"},{name:"blush",label:"Blush",preview:"#fecdd3"},{name:"arctic",label:"Arctic",preview:"#bae6fd"},{name:"wine",label:"Wine",preview:"#7f1d1d"},{name:"charcoal",label:"Charcoal",preview:"#111827"},{name:"platinum",label:"Platinum",preview:"#f3f4f6"},{name:"amber",label:"Amber",preview:"#fbbf24"},{name:"mocha",label:"Mocha",preview:"#78350f"},{name:"slate",label:"Slate",preview:"#334155"},{name:"sapphire",label:"Sapphire",preview:"#0ea5e9"},{name:"ruby",label:"Ruby",preview:"#be123c"},{name:"ivory",label:"Ivory",preview:"#fefce8"},{name:"cherry",label:"Cherry",preview:"#991b1b"},{name:"storm",label:"Storm",preview:"#64748b"},{name:"sunset",label:"Sunset",preview:"#fb923c"},{name:"arcticBlue",label:"Arctic Blue",preview:"#7dd3fc"},{name:"teal",label:"Teal",preview:"#0d9488"},{name:"velvet",label:"Velvet",preview:"#581c87"},{name:"tangerine",label:"Tangerine",preview:"#f97316"},{name:"fog",label:"Fog",preview:"#cbd5e1"},{name:"carbon",label:"Carbon",preview:"#1e293b"},{name:"moss",label:"Moss",preview:"#14532d"},{name:"cream",label:"Cream",preview:"#fef9c3"},{name:"iris",label:"Iris",preview:"#6366f1"},{name:"candy",label:"Candy",preview:"#ec4899"},{name:"coffee",label:"Coffee",preview:"#6b4f4f"},{name:"periwinkle",label:"Periwinkle",preview:"#a5b4fc"},{name:"smoke",label:"Smoke",preview:"#737373"},{name:"jet",label:"Jet",preview:"#0a0a0a"},{name:"rosewood",label:"Rosewood",preview:"#4a0404"},{name:"stone",label:"Stone",preview:"#d6d3d1"},{name:"mintCream",label:"Mint Cream",preview:"#dcfce7"},{name:"navy",label:"Navy",preview:"#1e3a8a"},{name:"orchid",label:"Orchid",preview:"#d8b4fe"},{name:"pine",label:"Pine",preview:"#064e3b"},{name:"wineGold",label:"Wine Gold",preview:"#854d0e"},{name:"opal",label:"Opal",preview:"#a7f3d0"},{name:"denim",label:"Denim",preview:"#1d4ed8"},{name:"shadow",label:"Shadow",preview:"#171717"},{name:"honey",label:"Honey",preview:"#facc15"},{name:"ultraviolet",label:"Ultraviolet",preview:"#6d28d9"}],gradientThemes=[{name:"gradientModern",label:"Gradient Modern",preview:"linear-gradient(135deg, #e2e8f0, #94a3b8)"},{name:"gradientClassic",label:"Gradient Classic",preview:"linear-gradient(135deg, #fffaf5, #fde68a)"},{name:"gradientBold",label:"Gradient Bold",preview:"linear-gradient(135deg, #f9e8ff, #e879f9)"},{name:"gradientDark",label:"Gradient Dark",preview:"linear-gradient(135deg, #030712, #1e293b)"},{name:"gradientRoyal",label:"Gradient Royal",preview:"linear-gradient(135deg, #2E026D, #9333ea)"},{name:"gradientMint",label:"Gradient Mint",preview:"linear-gradient(135deg, #d1fae5, #10b981)"},{name:"gradientSunrise",label:"Gradient Sunrise",preview:"linear-gradient(135deg, #fed7aa, #fb923c)"},{name:"gradientOcean",label:"Gradient Ocean",preview:"linear-gradient(135deg, #bae6fd, #0ea5e9)"},{name:"gradientRose",label:"Gradient Rose",preview:"linear-gradient(135deg, #fce7f3, #ec4899)"},{name:"gradientGraphite",label:"Gradient Graphite",preview:"linear-gradient(135deg, #1f2937, #4b5563)"},{name:"gradientForest",label:"Gradient Forest",preview:"linear-gradient(135deg, #065f46, #059669)"},{name:"gradientGold",label:"Gradient Gold",preview:"linear-gradient(135deg, #f59e0b, #fbbf24)"},{name:"gradientLavender",label:"Gradient Lavender",preview:"linear-gradient(135deg, #c084fc, #a855f7)"},{name:"gradientPeach",label:"Gradient Peach",preview:"linear-gradient(135deg, #f97316, #fb923c)"},{name:"gradientMidnight",label:"Gradient Midnight",preview:"linear-gradient(135deg, #1e293b, #0f172a)"},{name:"gradientAqua",label:"Gradient Aqua",preview:"linear-gradient(135deg, #0ea5e9, #06b6d4)"},{name:"gradientBerry",label:"Gradient Berry",preview:"linear-gradient(135deg, #7e22ce, #a855f7)"},{name:"gradientLime",label:"Gradient Lime",preview:"linear-gradient(135deg, #65a30d, #84cc16)"},{name:"gradientSand",label:"Gradient Sand",preview:"linear-gradient(135deg, #fcd34d, #fbbf24)"},{name:"gradientSky",label:"Gradient Sky",preview:"linear-gradient(135deg, #60a5fa, #3b82f6)"},{name:"gradientCopper",label:"Gradient Copper",preview:"linear-gradient(135deg, #b45309, #f59e0b)"},{name:"gradientIce",label:"Gradient Ice",preview:"linear-gradient(135deg, #e0f2fe, #7dd3fc)"},{name:"gradientSteel",label:"Gradient Steel",preview:"linear-gradient(135deg, #475569, #94a3b8)"},{name:"gradientCoral",label:"Gradient Coral",preview:"linear-gradient(135deg, #fb7185, #f43f5e)"},{name:"gradientEmerald",label:"Gradient Emerald",preview:"linear-gradient(135deg, #10b981, #34d399)"},{name:"gradientBronze",label:"Gradient Bronze",preview:"linear-gradient(135deg, #78350f, #b45309)"},{name:"gradientOnyx",label:"Gradient Onyx",preview:"linear-gradient(135deg, #0f172a, #1e293b)"},{name:"gradientBlush",label:"Gradient Blush",preview:"linear-gradient(135deg, #fecdd3, #fda4af)"},{name:"gradientArctic",label:"Gradient Arctic",preview:"linear-gradient(135deg, #bae6fd, #7dd3fc)"},{name:"gradientWine",label:"Gradient Wine",preview:"linear-gradient(135deg, #7f1d1d, #991b1b)"},{name:"gradientCharcoal",label:"Gradient Charcoal",preview:"linear-gradient(135deg, #111827, #1f2937)"},{name:"gradientPlatinum",label:"Gradient Platinum",preview:"linear-gradient(135deg, #f3f4f6, #e5e7eb)"},{name:"gradientAmber",label:"Gradient Amber",preview:"linear-gradient(135deg, #fbbf24, #f59e0b)"},{name:"gradientMocha",label:"Gradient Mocha",preview:"linear-gradient(135deg, #78350f, #b45309)"},{name:"gradientSlate",label:"Gradient Slate",preview:"linear-gradient(135deg, #334155, #475569)"},{name:"gradientSapphire",label:"Gradient Sapphire",preview:"linear-gradient(135deg, #0ea5e9, #2563eb)"},{name:"gradientRuby",label:"Gradient Ruby",preview:"linear-gradient(135deg, #be123c, #e11d48)"},{name:"gradientIvory",label:"Gradient Ivory",preview:"linear-gradient(135deg, #fefce8, #fef9c3)"},{name:"gradientCherry",label:"Gradient Cherry",preview:"linear-gradient(135deg, #991b1b, #dc2626)"},{name:"gradientStorm",label:"Gradient Storm",preview:"linear-gradient(135deg, #64748b, #475569)"},{name:"gradientSunset",label:"Gradient Sunset",preview:"linear-gradient(135deg, #fb923c, #f97316)"},{name:"gradientArcticBlue",label:"Gradient Arctic Blue",preview:"linear-gradient(135deg, #7dd3fc, #38bdf8)"},{name:"gradientTeal",label:"Gradient Teal",preview:"linear-gradient(135deg, #0d9488, #14b8a6)"},{name:"gradientVelvet",label:"Gradient Velvet",preview:"linear-gradient(135deg, #581c87, #7e22ce)"},{name:"gradientTangerine",label:"Gradient Tangerine",preview:"linear-gradient(135deg, #f97316, #fb923c)"},{name:"gradientFog",label:"Gradient Fog",preview:"linear-gradient(135deg, #cbd5e1, #94a3b8)"},{name:"gradientCarbon",label:"Gradient Carbon",preview:"linear-gradient(135deg, #1e293b, #334155)"},{name:"gradientMoss",label:"Gradient Moss",preview:"linear-gradient(135deg, #14532d, #166534)"},{name:"gradientCream",label:"Gradient Cream",preview:"linear-gradient(135deg, #fef9c3, #fde68a)"},{name:"gradientIris",label:"Gradient Iris",preview:"linear-gradient(135deg, #6366f1, #818cf8)"},{name:"gradientCandy",label:"Gradient Candy",preview:"linear-gradient(135deg, #ec4899, #f472b6)"},{name:"gradientCoffee",label:"Gradient Coffee",preview:"linear-gradient(135deg, #6b4f4f, #8b5e5e)"},{name:"gradientPeriwinkle",label:"Gradient Periwinkle",preview:"linear-gradient(135deg, #a5b4fc, #c7d2fe)"},{name:"gradientSmoke",label:"Gradient Smoke",preview:"linear-gradient(135deg, #737373, #a3a3a3)"},{name:"gradientJet",label:"Gradient Jet",preview:"linear-gradient(135deg, #0a0a0a, #171717)"},{name:"gradientRosewood",label:"Gradient Rosewood",preview:"linear-gradient(135deg, #4a0404, #7f1d1d)"},{name:"gradientStone",label:"Gradient Stone",preview:"linear-gradient(135deg, #d6d3d1, #e7e5e4)"},{name:"gradientMintCream",label:"Gradient Mint Cream",preview:"linear-gradient(135deg, #dcfce7, #bbf7d0)"},{name:"gradientNavy",label:"Gradient Navy",preview:"linear-gradient(135deg, #1e3a8a, #2563eb)"},{name:"gradientOrchid",label:"Gradient Orchid",preview:"linear-gradient(135deg, #d8b4fe, #c084fc)"},{name:"gradientPine",label:"Gradient Pine",preview:"linear-gradient(135deg, #064e3b, #065f46)"},{name:"gradientWineGold",label:"Gradient Wine Gold",preview:"linear-gradient(135deg, #854d0e, #f59e0b)"},{name:"gradientOpal",label:"Gradient Opal",preview:"linear-gradient(135deg, #a7f3d0, #6ee7b7)"},{name:"gradientDenim",label:"Gradient Denim",preview:"linear-gradient(135deg, #1d4ed8, #3b82f6)"},{name:"gradientShadow",label:"Gradient Shadow",preview:"linear-gradient(135deg, #171717, #262626)"},{name:"gradientHoney",label:"Gradient Honey",preview:"linear-gradient(135deg, #facc15, #fbbf24)"},{name:"gradientUltraviolet",label:"Gradient Ultraviolet",preview:"linear-gradient(135deg, #6d28d9, #7c3aed)"}],fontThemes=[{name:"Roboto",label:"Appeal",file:"/fonts/Roboto-Regular.ttf"},{name:"Academy",label:"Academy",file:"/fonts/Academy-Engraved LET-Fonts.ttf"},{name:"Aloevera-Regular",label:"Big Win",file:"/fonts/Aloevera-Regular.ttf"},{name:"ACaslonPro",label:"Blissful",file:"/fonts/ACaslonPro-Regular.ttf"},{name:"Baskerville",label:"Brilliance",file:"/fonts/Baskerville.ttf"},{name:"Frank",label:"Business",file:"/fonts/frank.ttf"},{name:"Butler_Medium",label:"Butler",file:"/fonts/Butler_Medium.ttf"},{name:"AdobeArabic",label:"Classic",file:"/fonts/AdobeArabic-Regular.ttf"},{name:"agencyfb",label:"Dazzle",file:"/fonts/agencyfb-bold.ttf"},{name:"Aloevera",label:"Excellence",file:"/fonts/Aloevera-Thin.ttf"},{name:"ChopinScript",label:"Fancy",file:"/fonts/ChopinScript.ttf"},{name:"Acens",label:"Financial",file:"/fonts/Acens.ttf"},{name:"cambriab",label:"Footloose",file:"/fonts/cambriab.ttf"},{name:"Archivo",label:"Gorgeous",file:"/fonts/Archivo-Regular.ttf"},{name:"Berylium",label:"Guru",file:"/fonts/Berylium.ttf"},{name:"Impact",label:"Impactful",file:"/fonts/impact.ttf"},{name:"Absalom",label:"Lovely",file:"/fonts/Absalom.ttf"},{name:"Montserrat",label:"Modern",file:"/fonts/Montserrat-Regular.ttf"},{name:"Altoysitalic",label:"Mountain",file:"/fonts/Altoysitalic_personal_only.ttf"},{name:"BigShouldersDisplay",label:"Paradise",file:"/fonts/BigShouldersDisplay-Regular.ttf"},{name:"Bodoni_72",label:"Radiance",file:"/fonts/Bodoni_72.ttf"},{name:"Alipne",label:"Showcase",file:"/fonts/Alpine.ttf"},{name:"cordia",label:"Spontaneous",file:"/fonts/cordia.ttf"},{name:"Bebas Neue",label:"Statement",file:"/fonts/BebasNeue-Regular.ttf"},{name:"Advert",label:"Sunshine",file:"/fonts/Advert.ttf"},{name:"AdobeNaskh",label:"Urgency",file:"/fonts/AdobeNaskh-Medium.ttf"},{name:"Cochin",label:"Wonder",file:"/fonts/Cochin.ttf"},{name:"Galvji",label:"Vexar",file:"/fonts/Galvji.ttf"}],Nav=()=>{const{user:it,logout:g}=useAuth(),et=useNavigate(),[ot,ut]=reactExports.useState(!1),ct=useLocation();if(reactExports.useEffect(()=>{ot?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="")},[ot]),["/dashboard","/books","/settings","/prompts","/notifications","/canvas-editor","/landing-page-builder"].includes(ct.pathname))return null;const dt=navLinks.filter(ft=>!(ft.label==="Home"&&ct.pathname==="/home"||ft.label==="Contact Us"&&ct.pathname==="/contact"));return jsxRuntimeExports.jsxs("div",{className:"fixed top-0 left-0 w-full z-50",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("nav",{onClick:ft=>ft.stopPropagation(),className:"flex items-center justify-between px-4 h-[72px]",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(Link$1,{to:"/",preventScrollReset:!0,children:jsxRuntimeExports.jsx(motion.img,{src:headerLogo,width:50,height:50,initial:{opacity:0},animate:{opacity:1},transition:{duration:4.5,delay:2}})})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block relative",onMouseEnter:()=>ut(!0),onMouseLeave:()=>ut(!1),children:[jsxRuntimeExports.jsx("button",{type:"button",className:`p-3 bg-muteGrey hover:bg-gray-800 text-white shadow-md transition
      ${ot?"rounded-t-lg":"rounded-lg"}`,children:jsxRuntimeExports.jsx(Cog,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:`absolute right-0 top-full flex flex-col items-center gap-2 
                 bg-muteGrey  shadow-xl
                py-2 px-1 mt-[-2px] z-50
                transition-all duration-150 ease-out rounded-b-lg 
                ${ot?"opacity-100 translate-y-0":"opacity-0 -translate-y-2 pointer-events-none"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/home"),className:"p-2 hover:bg-gray-800/60  transition",title:"Home",children:jsxRuntimeExports.jsx(House,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),it?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/dashboard"),className:"p-2 hover:bg-gray-800/60  transition",title:"Dashboard",children:jsxRuntimeExports.jsx(LayoutDashboard,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Help",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>g(),className:"p-2 hover:bg-gray-800/60  transition",title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>et("/sign-up"),className:"p-2 hover:bg-gray-800/60  transition",title:"Sign Up",children:jsxRuntimeExports.jsx(Crown,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/shop"),className:"p-2 hover:bg-gray-800/60  transition",title:"Shop",children:jsxRuntimeExports.jsx(Store,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/login"),className:"p-2 hover:bg-gray-800/60  transition",title:"Login",children:jsxRuntimeExports.jsx(User,{className:"h-5 w-5 text-gray-300 hover:text-white"})}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/contact"),className:"p-2 hover:bg-gray-800/60  transition",title:"Contact",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{className:"h-5 w-5 text-gray-300 hover:text-white"})})]})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("button",{onClick:()=>ut(!ot),className:"text-white focus:outline-none z-50 relative",children:ot?jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})})]})}),jsxRuntimeExports.jsx(ze,{show:ot&&window.innerWidth<768,enter:"transition duration-300 ease-out",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition duration-200 ease-in",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:ft=>jsxRuntimeExports.jsxs("div",{ref:ft,className:"md:hidden fixed top-0 left-0 w-full h-screen bg-bioModal z-40 flex flex-col items-center pt-24 space-y-4 lead-text",children:[dt.map(St=>St.label==="Home"&&ct.pathname==="/home"||it&&(St.label==="Sign Up"||St.label==="Contact Us"||St.label==="Shop")?null:St.label==="Login"&&it?jsxRuntimeExports.jsx(Link$1,{to:"/dashboard",onClick:()=>ut(!1),className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Dashboard"},"user-dashboard"):jsxRuntimeExports.jsx("a",{href:St.href,onClick:kt=>handleNavClick(kt,St.href),className:"font-montserrat text-md text-white-400 hover:text-white transition-all cursor-pointer",children:St.label},St.label)),it&&jsxRuntimeExports.jsx("button",{onClick:()=>{g(),ut(!1)},className:"font-montserrat text-md text-white-400 hover:text-white transition-all",children:"Logout"})]})})]})};function OutOfSlotsModal({open:it,onClose:g,onRefresh:et,isFirstTime:ot=!1}){if(!it)return null;const ut=ot?"Welcome to Cre8tly Studio":"Out of Lead Magnet Slots",ct=ot?`Welcome to Cre8tly Studio, your creative command center for building
       high-converting lead magnets in minutes. 
       To start creating, visit Cre8tlyStudio.com in your browser and
       purchase your first token pack. 
       Once purchased, click below to refresh your account and begin.`:`Youve reached your current plans limit.
       To purchase more tokens or lifetime unlocks, visit Cre8tlyStudio.com
       in your browser and log in with the same account.
       Once purchased, click below to refresh your slots instantly.`;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 animate-fadeIn font-montserrat",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-br from-[#0b0b0b] via-[#111827] to-[#1f2937] border border-[#00E07A]/40 shadow-[0_0_25px_rgba(0,224,122,0.3)] rounded-2xl p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] opacity-20 blur-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] bg-clip-text text-transparent",children:ut}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed text-[15px] whitespace-pre-line",children:ct}),jsxRuntimeExports.jsx("button",{onClick:async()=>{et&&await et(),g&&g()},className:"bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] text-white px-8 py-3 rounded-xl font-semibold tracking-wide shadow-[0_0_12px_rgba(0,224,122,0.6)] hover:shadow-[0_0_20px_rgba(106,90,205,0.8)] hover:scale-[1.03] transition-all duration-200",children:ot?"Ive Purchased My First Pack":"Ive Purchased Tokens"}),jsxRuntimeExports.jsx("button",{onClick:g,className:"block mx-auto mt-4 text-sm text-gray-400 hover:text-white transition",children:"Cancel"})]})]})})}const PricingSection=()=>{const{user:it}=useAuth(),[g,et]=reactExports.useState(!1),ot=()=>{window.location.href="/sign-up"};return jsxRuntimeExports.jsxs("section",{id:"pricing",className:"px-6 py-24 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-10 design-text",children:"Simple Pricing"}),jsxRuntimeExports.jsxs(motion.div,{className:"relative rounded-2xl max-w-md mx-auto overflow-hidden",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 p-[2px] rounded-2xl 
              bg-[linear-gradient(90deg,#00ff99,#7bed9f,#00ff99)] 
              bg-[length:200%_200%] 
              animate-gradientPulse`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-2xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-10 border border-transparent rounded-2xl shadow-xl",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-blue to-purple-500 bg-clip-text text-white design-text",children:"$47"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-8 type-text",children:"One-time payment for 5 lead magnet slots"}),jsxRuntimeExports.jsx("button",{onClick:ot,className:`w-full bg-royalPurple 
                text-white text-xl font-semibold py-4 rounded-xl 
                hover:opacity-90 hover:shadow-[0_0_20px_rgba(255,255,255,0.2)]
                transition shadow-lg design-text`,children:"Sign Up"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-silver mt-3",children:" Secure checkout"})]}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:g,onClose:()=>et(!1),isFirstTime:!it||!it.slot_count||it.slot_count===0})]})},steps=[{icon:jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,-4,0]},transition:{repeat:1/0,duration:3,ease:"easeInOut"},children:jsxRuntimeExports.jsx(SquareTerminal,{className:"w-10 h-10 text-white drop-shadow-[0_0_6px_rgba(255,255,255,0.5)]"})}),title:"1. Add Your Prompt",desc:"Describe your audience, product, or idea in one line, our AI expands it into full content instantly."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2.8,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Bot,{className:"w-10 h-10 text-white drop-shadow-[0_0_8px_rgba(103,15,231,0.6)]"})}),title:"2. AI Creates Your Digital Product",desc:"We generate up to 50 full A4 pages with examples, insights, and structure, styled with professional themes."},{icon:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:[0,10,-10,0]},transition:{repeat:1/0,duration:5,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Download,{className:"w-10 h-10 text-green drop-shadow-[0_0_8px_rgba(123,237,159,0.6)]"})}),title:"3. Download & Launch",desc:"Receive a polished PDF ready to use instantly, perfect for selling, sharing, or capturing new leads."}];function HowItWorks(){return jsxRuntimeExports.jsxs("section",{id:"how",className:"px-6 py-24 text-center bg-metalBlack relative overflow-hidden rounded-2xl",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-gradient-to-br from-[#0b0f1a] via-[#111827] to-[#0b0f1a] opacity-40",animate:{backgroundPosition:["0% 0%","100% 100%","0% 0%"]},transition:{repeat:1/0,duration:20,ease:"linear"}}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl mb-16 text-white font-semibold design-text",children:"How It Works"}),jsxRuntimeExports.jsx("div",{className:"grid gap-10 sm:grid-cols-3",children:steps.map((it,g)=>jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05},transition:{type:"spring",stiffness:300,damping:20},className:"relative rounded-xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 rounded-xl p-[2px] 
                bg-[linear-gradient(270deg,#7bed9f,#670fe7,#7bed9f)] 
                bg-[length:300%_300%] animate-shine`,children:jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-xl bg-[#0d0d0d]"})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 p-8 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-800 mb-6 mx-auto shadow-[0_0_20px_rgba(100,255,200,0.25)]",children:it.icon}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-semibold mb-3 text-white lead-text",children:it.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed lead-text",children:it.desc})]})]},g))}),jsxRuntimeExports.jsx(PricingSection,{})]})]})}function VideoPlayer(){const it=reactExports.useRef(null),[g,et]=reactExports.useState(!0),[ot,ut]=reactExports.useState(!1),ct=()=>et(St=>!St),dt=async()=>{const St=it.current;if(St)if(St.requestFullscreen){await St.requestFullscreen(),ut(!0);try{await screen.orientation.lock("landscape")}catch{}}else St.webkitEnterFullscreen&&(St.webkitEnterFullscreen(),ut(!0))},ft=()=>{const St=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;ut(!!St)};return typeof window<"u"&&(document.onfullscreenchange=ft,document.onwebkitfullscreenchange=ft),jsxRuntimeExports.jsxs("section",{className:"relative bg-black rounded-2xl overflow-hidden shadow-2xl border border-gray-800 mt-10",children:[jsxRuntimeExports.jsxs("video",{ref:it,className:"w-full h-full object-cover rounded-2xl",autoPlay:!0,loop:!0,playsInline:!0,muted:g,preload:"metadata",poster:"/assets/video-thumbnail.jpg",children:[jsxRuntimeExports.jsx("source",{src:"https://cre8tlystudio.nyc3.cdn.digitaloceanspaces.com/Videos/new_cre8tly_video_v2.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:ct,className:"bg-black/60 text-white px-4 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:g?" Unmute":" Mute"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-black/60 text-white px-3 py-2 rounded-lg text-sm hover:bg-black/80 transition",children:ot?" Exit":" Fullscreen"})]})]})}function PremiumEbooksCTA(){return jsxRuntimeExports.jsxs(motion.section,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"relative mt-28 mb-20 rounded-2xl overflow-hidden bg-metalBlack p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 blur-3xl opacity-40"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row items-center justify-between gap-10 text-center lg:text-left",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-4xl sm:text-5xl font-extrabold mb-6 bg-white bg-clip-text text-transparent design-text leading-[1.25] pb-1",children:"Ready to Go Deeper?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 text-lg leading-relaxed mb-6",children:["Unlock our full library of"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"premium guides"})," ","designed to help entrepreneurs, marketers, and creators dominate their niche. Each guide is downloadable instantly."]}),jsxRuntimeExports.jsx("a",{href:"/shop",className:"inline-block px-8 py-4 bg-royalPurple text-white text-xl font-semibold rounded-lg shadow-lg hover:opacity-90 transition-all duration-300 transform hover:scale-[1.03] design-text",children:" Browse Premium Guides"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full lg:w-auto",children:jsxRuntimeExports.jsx("img",{src:ebookCover,alt:"Ebook Collection Preview",className:"rounded-xl w-80 sm:w-96 border border-white/10 "})})]})]})}function AnimatedLogo(){return jsxRuntimeExports.jsx(motion.img,{src:headerLogo,alt:"Logo",className:"w-32 h-32 relative z-10",initial:{scale:.98,filter:"drop-shadow(0 0 0px rgba(0,255,204,0))"},animate:{scale:[1,1.05,1],filter:["drop-shadow(0 0 0px rgba(0,255,204,0))","drop-shadow(0 0 12px rgba(24, 0, 156, 1))","drop-shadow(0 0 0px rgba(0,255,204,0))"]},transition:{duration:5,ease:"easeInOut",repeat:1/0},whileHover:{scale:1.1,filter:"drop-shadow(0 0 16px rgba(0,255,204,1))",transition:{type:"spring",stiffness:150}}})}const Landing=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full text-white flex flex-col font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col items-center justify-center text-center px-4 sm:px-6 py-32 relative overflow-hidden",children:[jsxRuntimeExports.jsx(AnimatedLogo,{}),jsxRuntimeExports.jsxs("h1",{className:"relative inline-block text-white text-3xl sm:text-6xl lg:text-8xl font-extrabold design-text ",children:["Cre8tly Studio",jsxRuntimeExports.jsx("span",{className:"absolute -top-2 sm:-top-1 -right-8 sm:-right-10 text-green text-2xl sm:text-3xl font-bold lead-text",children:"AI"})]}),jsxRuntimeExports.jsx(motion.h2,{className:"text-5xl sm:text-7xl font-extrabold leading-tight bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1},children:"Create High-Converting Lead Magnets in Seconds"}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-6 text-xl sm:text-2xl text-gray-300 max-w-2xl lead-text",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:["The fastest way to turn your idea into a",jsxRuntimeExports.jsx("br",{})," sellable digital product."]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-8 text-lg sm:text-xl text-gray-400 max-w-3xl mx-auto font-light leading-relaxed",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:["Cre8tly Studio is an ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"AI-powered  digital product builder"})," that helps ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"creators, coaches, and entrepreneurs"})," design professional digital products, eBooks, and brand assets in seconds. Boost conversions, grow your email list, and sell faster with ",jsxRuntimeExports.jsx("span",{className:"text-white font-bold",children:"automated content creation"}),", pro-level cover design, and ",jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:"instant PDF generation"})," all in one platform built for modern online businesses."]}),jsxRuntimeExports.jsx("div",{className:"w-full max-w-5xl mt-12 rounded-2xl overflow-hidden",children:jsxRuntimeExports.jsx(VideoPlayer,{})})]}),jsxRuntimeExports.jsxs(motion.p,{className:"mt-16 mb-10 text-3xl sm:text-4xl text-center font-semibold leading-snug text-green tracking-tight max-w-4xl mx-auto design-text",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},children:["Creators dont dream about success",jsxRuntimeExports.jsx("br",{})," they generate it"]}),jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 60",className:"w-56 sm:w-72 mx-auto mt-2 mb-20",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"underline-gradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.9"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0"})]})}),jsxRuntimeExports.jsx("path",{d:"M10 25 Q200 -10 390 25",stroke:"url(#underline-gradient)",strokeWidth:"5",fill:"transparent",strokeLinecap:"round"})]}),jsxRuntimeExports.jsx(HowItWorks,{}),jsxRuntimeExports.jsx(PremiumEbooksCTA,{})]});function LoginPage(){const{login:it}=useAuth(),g=useNavigate(),[et,ot]=reactExports.useState({email:"",password:""}),[ut,ct]=reactExports.useState(!1),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(""),[Tt,Rt]=reactExports.useState(!1),Ft=Bt=>{ot({...et,[Bt.target.name]:Bt.target.value})},jt=async Bt=>{var zt,Ht;Bt.preventDefault(),ct(!0),kt("");try{await it(et.email,et.password),g("/dashboard")}catch(Ut){(Ht=(zt=Ut.response)==null?void 0:zt.data)!=null&&Ht.message?kt(Ut.response.data.message):kt("Login failed. Please try again later.")}finally{ct(!1)}};return reactExports.useEffect(()=>{if(St){Rt(!1);const Bt=setTimeout(()=>Rt(!0),4e3),zt=setTimeout(()=>kt(""),5e3);return()=>{clearTimeout(Bt),clearTimeout(zt)}}},[St]),jsxRuntimeExports.jsxs("div",{style:{isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-metalBlack p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Log in to your account to continue creating and managing your digital products."}),St&&jsxRuntimeExports.jsx("div",{className:`bg-red-900/60 border border-red-500 text-red-200 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-1000 ${Tt?"opacity-0":"opacity-100"}`,children:St}),jsxRuntimeExports.jsxs("form",{onSubmit:jt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:et.email,onChange:Ft,placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:et.password,onChange:Ft,placeholder:"Password",required:!0,className:"w-full px-4 py-3 pr-12 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ft(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-black","aria-label":dt?"Hide password":"Show password",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ut,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ut?"Logging In...":"Log In"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-4",children:jsxRuntimeExports.jsx("a",{href:"/forgot-password",className:"text-green hover:underline",children:"Forgot Password?"})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Dont have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/sign-up",className:"text-green hover:underline",children:"Sign Up"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$2(it,g){return it===g||it!==it&&g!==g}var eq_1=eq$2,eq$1=eq_1;function assocIndexOf$4(it,g){for(var et=it.length;et--;)if(eq$1(it[et][0],g))return et;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(it){var g=this.__data__,et=assocIndexOf$3(g,it);if(et<0)return!1;var ot=g.length-1;return et==ot?g.pop():splice.call(g,et,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(it){var g=this.__data__,et=assocIndexOf$2(g,it);return et<0?void 0:g[et][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(it){return assocIndexOf$1(this.__data__,it)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(it,g){var et=this.__data__,ot=assocIndexOf(et,it);return ot<0?(++this.size,et.push([it,g])):et[ot][1]=g,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(it){var g=this.__data__,et=g.delete(it);return this.size=g.size,et}var _stackDelete=stackDelete$1;function stackGet$1(it){return this.__data__.get(it)}var _stackGet=stackGet$1;function stackHas$1(it){return this.__data__.has(it)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$4=root$8.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(it){var g=hasOwnProperty$8.call(it,symToStringTag$1),et=it[symToStringTag$1];try{it[symToStringTag$1]=void 0;var ot=!0}catch{}var ut=nativeObjectToString$1.call(it);return ot&&(g?it[symToStringTag$1]=et:delete it[symToStringTag$1]),ut}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(it){return nativeObjectToString.call(it)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$4(it){return it==null?it===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(it)?getRawTag(it):objectToString(it)}var _baseGetTag=baseGetTag$4;function isObject$2(it){var g=typeof it;return it!=null&&(g=="object"||g=="function")}var isObject_1=isObject$2,baseGetTag$3=_baseGetTag,isObject$1=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(it){if(!isObject$1(it))return!1;var g=baseGetTag$3(it);return g==funcTag$1||g==genTag||g==asyncTag||g==proxyTag}var isFunction_1=isFunction$3,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var it=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return it?"Symbol(src)_1."+it:""}();function isMasked$1(it){return!!maskSrcKey&&maskSrcKey in it}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(it){if(it!=null){try{return funcToString$1.call(it)}catch{}try{return it+""}catch{}}return""}var _toSource=toSource$2,isFunction$2=isFunction_1,isMasked=_isMasked,isObject=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(it){if(!isObject(it)||isMasked(it))return!1;var g=isFunction$2(it)?reIsNative:reIsHostCtor;return g.test(toSource$1(it))}var _baseIsNative=baseIsNative$1;function getValue$1(it,g){return it==null?void 0:it[g]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(it,g){var et=getValue(it,g);return baseIsNative(et)?et:void 0}var _getNative=getNative$6,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(it){var g=this.has(it)&&delete this.__data__[it];return this.size-=g?1:0,g}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashGet$1(it){var g=this.__data__;if(nativeCreate$2){var et=g[it];return et===HASH_UNDEFINED$2?void 0:et}return hasOwnProperty$6.call(g,it)?g[it]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashHas$1(it){var g=this.__data__;return nativeCreate$1?g[it]!==void 0:hasOwnProperty$5.call(g,it)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(it,g){var et=this.__data__;return this.size+=this.has(it)?0:1,et[it]=nativeCreate&&g===void 0?HASH_UNDEFINED$1:g,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(it){var g=typeof it;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?it!=="__proto__":it===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(it,g){var et=it.__data__;return isKeyable(g)?et[typeof g=="string"?"string":"hash"]:et.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(it){var g=getMapData$3(this,it).delete(it);return this.size-=g?1:0,g}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(it){return getMapData$2(this,it).get(it)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(it){return getMapData$1(this,it).has(it)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(it,g){var et=getMapData(this,it),ot=et.size;return et.set(it,g),this.size+=et.size==ot?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$2(it){var g=-1,et=it==null?0:it.length;for(this.clear();++g<et;){var ot=it[g];this.set(ot[0],ot[1])}}MapCache$2.prototype.clear=mapCacheClear;MapCache$2.prototype.delete=mapCacheDelete;MapCache$2.prototype.get=mapCacheGet;MapCache$2.prototype.has=mapCacheHas;MapCache$2.prototype.set=mapCacheSet;var _MapCache=MapCache$2,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(it,g){var et=this.__data__;if(et instanceof ListCache$1){var ot=et.__data__;if(!Map$2||ot.length<LARGE_ARRAY_SIZE-1)return ot.push([it,g]),this.size=++et.size,this;et=this.__data__=new MapCache$1(ot)}return et.set(it,g),this.size=et.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(it){var g=this.__data__=new ListCache(it);this.size=g.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(it){return this.__data__.set(it,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(it){return this.__data__.has(it)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$1(it){var g=-1,et=it==null?0:it.length;for(this.__data__=new MapCache;++g<et;)this.add(it[g])}SetCache$1.prototype.add=SetCache$1.prototype.push=setCacheAdd;SetCache$1.prototype.has=setCacheHas;var _SetCache=SetCache$1;function arraySome$1(it,g){for(var et=-1,ot=it==null?0:it.length;++et<ot;)if(g(it[et],et,it))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$1(it,g){return it.has(g)}var _cacheHas=cacheHas$1,SetCache=_SetCache,arraySome=_arraySome,cacheHas=_cacheHas,COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays$2(it,g,et,ot,ut,ct){var dt=et&COMPARE_PARTIAL_FLAG$3,ft=it.length,St=g.length;if(ft!=St&&!(dt&&St>ft))return!1;var kt=ct.get(it),Tt=ct.get(g);if(kt&&Tt)return kt==g&&Tt==it;var Rt=-1,Ft=!0,jt=et&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(ct.set(it,g),ct.set(g,it);++Rt<ft;){var Bt=it[Rt],zt=g[Rt];if(ot)var Ht=dt?ot(zt,Bt,Rt,g,it,ct):ot(Bt,zt,Rt,it,g,ct);if(Ht!==void 0){if(Ht)continue;Ft=!1;break}if(jt){if(!arraySome(g,function(Ut,Kt){if(!cacheHas(jt,Kt)&&(Bt===Ut||ut(Bt,Ut,et,ot,ct)))return jt.push(Kt)})){Ft=!1;break}}else if(!(Bt===zt||ut(Bt,zt,et,ot,ct))){Ft=!1;break}}return ct.delete(it),ct.delete(g),Ft}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot,ut){et[++g]=[ut,ot]}),et}var _mapToArray=mapToArray$1;function setToArray$1(it){var g=-1,et=Array(it.size);return it.forEach(function(ot){et[++g]=ot}),et}var _setToArray=setToArray$1,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray=_setToArray,COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(it,g,et,ot,ut,ct,dt){switch(et){case dataViewTag$2:if(it.byteLength!=g.byteLength||it.byteOffset!=g.byteOffset)return!1;it=it.buffer,g=g.buffer;case arrayBufferTag$1:return!(it.byteLength!=g.byteLength||!ct(new Uint8Array$1(it),new Uint8Array$1(g)));case boolTag$1:case dateTag$1:case numberTag$1:return eq(+it,+g);case errorTag$1:return it.name==g.name&&it.message==g.message;case regexpTag$1:case stringTag$1:return it==g+"";case mapTag$2:var ft=mapToArray;case setTag$2:var St=ot&COMPARE_PARTIAL_FLAG$2;if(ft||(ft=setToArray),it.size!=g.size&&!St)return!1;var kt=dt.get(it);if(kt)return kt==g;ot|=COMPARE_UNORDERED_FLAG,dt.set(it,g);var Tt=equalArrays$1(ft(it),ft(g),ot,ut,ct,dt);return dt.delete(it),Tt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(it)==symbolValueOf.call(g)}return!1}var _equalByTag=equalByTag$1;function arrayPush$1(it,g){for(var et=-1,ot=g.length,ut=it.length;++et<ot;)it[ut+et]=g[et];return it}var _arrayPush=arrayPush$1,isArray$3=Array.isArray,isArray_1=isArray$3,arrayPush=_arrayPush,isArray$2=isArray_1;function baseGetAllKeys$1(it,g,et){var ot=g(it);return isArray$2(it)?ot:arrayPush(ot,et(it))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(it,g){for(var et=-1,ot=it==null?0:it.length,ut=0,ct=[];++et<ot;){var dt=it[et];g(dt,et,it)&&(ct[ut++]=dt)}return ct}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$6=Object.prototype,propertyIsEnumerable$1=objectProto$6.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(it){return it==null?[]:(it=Object(it),arrayFilter(nativeGetSymbols(it),function(g){return propertyIsEnumerable$1.call(it,g)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(it,g){for(var et=-1,ot=Array(it);++et<it;)ot[et]=g(et);return ot}var _baseTimes=baseTimes$1;function isObjectLike$4(it){return it!=null&&typeof it=="object"}var isObjectLike_1=isObjectLike$4,baseGetTag$2=_baseGetTag,isObjectLike$3=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(it){return isObjectLike$3(it)&&baseGetTag$2(it)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$2=isObjectLike_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(it){return isObjectLike$2(it)&&hasOwnProperty$4.call(it,"callee")&&!propertyIsEnumerable.call(it,"callee")},isArguments_1=isArguments$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(it,g){var et=_root,ot=stubFalse_1,ut=g&&!g.nodeType&&g,ct=ut&&!0&&it&&!it.nodeType&&it,dt=ct&&ct.exports===ut,ft=dt?et.Buffer:void 0,St=ft?ft.isBuffer:void 0,kt=St||ot;it.exports=kt})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$1(it,g){var et=typeof it;return g=g??MAX_SAFE_INTEGER$2,!!g&&(et=="number"||et!="symbol"&&reIsUint.test(it))&&it>-1&&it%1==0&&it<g}var _isIndex=isIndex$1,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$2(it){return typeof it=="number"&&it>-1&&it%1==0&&it<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$2,baseGetTag$1=_baseGetTag,isLength$1=isLength_1,isObjectLike$1=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(it){return isObjectLike$1(it)&&isLength$1(it.length)&&!!typedArrayTags[baseGetTag$1(it)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(it){return function(g){return it(g)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};_nodeUtil.exports;(function(it,g){var et=_freeGlobal,ot=g&&!g.nodeType&&g,ut=ot&&!0&&it&&!it.nodeType&&it,ct=ut&&ut.exports===ot,dt=ct&&et.process,ft=function(){try{var St=ut&&ut.require&&ut.require("util").types;return St||dt&&dt.binding&&dt.binding("util")}catch{}}();it.exports=ft})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$1=isArray_1,isBuffer$1=isBufferExports,isIndex=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(it,g){var et=isArray$1(it),ot=!et&&isArguments(it),ut=!et&&!ot&&isBuffer$1(it),ct=!et&&!ot&&!ut&&isTypedArray$1(it),dt=et||ot||ut||ct,ft=dt?baseTimes(it.length,String):[],St=ft.length;for(var kt in it)(g||hasOwnProperty$3.call(it,kt))&&!(dt&&(kt=="length"||ut&&(kt=="offset"||kt=="parent")||ct&&(kt=="buffer"||kt=="byteLength"||kt=="byteOffset")||isIndex(kt,St)))&&ft.push(kt);return ft}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(it){var g=it&&it.constructor,et=typeof g=="function"&&g.prototype||objectProto$3;return it===et}var _isPrototype=isPrototype$1;function overArg$1(it,g){return function(et){return it(g(et))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(it){if(!isPrototype(it))return nativeKeys(it);var g=[];for(var et in Object(it))hasOwnProperty$2.call(it,et)&&et!="constructor"&&g.push(et);return g}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength=isLength_1;function isArrayLike$1(it){return it!=null&&isLength(it.length)&&!isFunction$1(it)}var isArrayLike_1=isArrayLike$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike=isArrayLike_1;function keys$2(it){return isArrayLike(it)?arrayLikeKeys(it):baseKeys(it)}var keys_1=keys$2,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$1=keys_1;function getAllKeys$1(it){return baseGetAllKeys(it,keys$1,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(it,g,et,ot,ut,ct){var dt=et&COMPARE_PARTIAL_FLAG$1,ft=getAllKeys(it),St=ft.length,kt=getAllKeys(g),Tt=kt.length;if(St!=Tt&&!dt)return!1;for(var Rt=St;Rt--;){var Ft=ft[Rt];if(!(dt?Ft in g:hasOwnProperty$1.call(g,Ft)))return!1}var jt=ct.get(it),Bt=ct.get(g);if(jt&&Bt)return jt==g&&Bt==it;var zt=!0;ct.set(it,g),ct.set(g,it);for(var Ht=dt;++Rt<St;){Ft=ft[Rt];var Ut=it[Ft],Kt=g[Ft];if(ot)var Yt=dt?ot(Kt,Ut,Ft,g,it,ct):ot(Ut,Kt,Ft,it,g,ct);if(!(Yt===void 0?Ut===Kt||ut(Ut,Kt,et,ot,ct):Yt)){zt=!1;break}Ht||(Ht=Ft=="constructor")}if(zt&&!Ht){var er=it.constructor,ar=g.constructor;er!=ar&&"constructor"in it&&"constructor"in g&&!(typeof er=="function"&&er instanceof er&&typeof ar=="function"&&ar instanceof ar)&&(zt=!1)}return ct.delete(it),ct.delete(g),zt}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$2=getNative$1(root$2,"Set"),_Set=Set$2,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$1&&getTag$1(new Set$1)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(it){var g=baseGetTag(it),et=g==objectTag$1?it.constructor:void 0,ot=et?toSource(et):"";if(ot)switch(ot){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return g});var _getTag=getTag$1,Stack=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(it,g,et,ot,ut,ct){var dt=isArray(it),ft=isArray(g),St=dt?arrayTag:getTag(it),kt=ft?arrayTag:getTag(g);St=St==argsTag?objectTag:St,kt=kt==argsTag?objectTag:kt;var Tt=St==objectTag,Rt=kt==objectTag,Ft=St==kt;if(Ft&&isBuffer(it)){if(!isBuffer(g))return!1;dt=!0,Tt=!1}if(Ft&&!Tt)return ct||(ct=new Stack),dt||isTypedArray(it)?equalArrays(it,g,et,ot,ut,ct):equalByTag(it,g,St,et,ot,ut,ct);if(!(et&COMPARE_PARTIAL_FLAG)){var jt=Tt&&hasOwnProperty.call(it,"__wrapped__"),Bt=Rt&&hasOwnProperty.call(g,"__wrapped__");if(jt||Bt){var zt=jt?it.value():it,Ht=Bt?g.value():g;return ct||(ct=new Stack),ut(zt,Ht,et,ot,ct)}}return Ft?(ct||(ct=new Stack),equalObjects(it,g,et,ot,ut,ct)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike=isObjectLike_1;function baseIsEqual$1(it,g,et,ot,ut){return it===g?!0:it==null||g==null||!isObjectLike(it)&&!isObjectLike(g)?it!==it&&g!==g:baseIsEqualDeep(it,g,et,ot,baseIsEqual$1,ut)}var _baseIsEqual=baseIsEqual$1,baseIsEqual=_baseIsEqual;function isEqual(it,g){return baseIsEqual(it,g)}var isEqual_1$1=isEqual,quill={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(it,g){(function(ot,ut){it.exports=ut()})(typeof self<"u"?self:commonjsGlobal,function(){return function(et){var ot={};function ut(ct){if(ot[ct])return ot[ct].exports;var dt=ot[ct]={i:ct,l:!1,exports:{}};return et[ct].call(dt.exports,dt,dt.exports,ut),dt.l=!0,dt.exports}return ut.m=et,ut.c=ot,ut.d=function(ct,dt,ft){ut.o(ct,dt)||Object.defineProperty(ct,dt,{configurable:!1,enumerable:!0,get:ft})},ut.n=function(ct){var dt=ct&&ct.__esModule?function(){return ct.default}:function(){return ct};return ut.d(dt,"a",dt),dt},ut.o=function(ct,dt){return Object.prototype.hasOwnProperty.call(ct,dt)},ut.p="",ut(ut.s=109)}([function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(17),dt=ut(18),ft=ut(19),St=ut(45),kt=ut(46),Tt=ut(47),Rt=ut(48),Ft=ut(49),jt=ut(12),Bt=ut(32),zt=ut(33),Ht=ut(31),Ut=ut(1),Kt={Scope:Ut.Scope,create:Ut.create,find:Ut.find,query:Ut.query,register:Ut.register,Container:ct.default,Format:dt.default,Leaf:ft.default,Embed:Rt.default,Scroll:St.default,Block:Tt.default,Inline:kt.default,Text:Ft.default,Attributor:{Attribute:jt.default,Class:Bt.default,Style:zt.default,Store:Ht.default}};ot.default=Kt},function(et,ot,ut){var ct=this&&this.__extends||function(){var Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ut,Kt){Ut.__proto__=Kt}||function(Ut,Kt){for(var Yt in Kt)Kt.hasOwnProperty(Yt)&&(Ut[Yt]=Kt[Yt])};return function(Ut,Kt){Ht(Ut,Kt);function Yt(){this.constructor=Ut}Ut.prototype=Kt===null?Object.create(Kt):(Yt.prototype=Kt.prototype,new Yt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=function(Ht){ct(Ut,Ht);function Ut(Kt){var Yt=this;return Kt="[Parchment] "+Kt,Yt=Ht.call(this,Kt)||this,Yt.message=Kt,Yt.name=Yt.constructor.name,Yt}return Ut}(Error);ot.ParchmentError=dt;var ft={},St={},kt={},Tt={};ot.DATA_KEY="__blot";var Rt;(function(Ht){Ht[Ht.TYPE=3]="TYPE",Ht[Ht.LEVEL=12]="LEVEL",Ht[Ht.ATTRIBUTE=13]="ATTRIBUTE",Ht[Ht.BLOT=14]="BLOT",Ht[Ht.INLINE=7]="INLINE",Ht[Ht.BLOCK=11]="BLOCK",Ht[Ht.BLOCK_BLOT=10]="BLOCK_BLOT",Ht[Ht.INLINE_BLOT=6]="INLINE_BLOT",Ht[Ht.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",Ht[Ht.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",Ht[Ht.ANY=15]="ANY"})(Rt=ot.Scope||(ot.Scope={}));function Ft(Ht,Ut){var Kt=Bt(Ht);if(Kt==null)throw new dt("Unable to create "+Ht+" blot");var Yt=Kt,er=Ht instanceof Node||Ht.nodeType===Node.TEXT_NODE?Ht:Yt.create(Ut);return new Yt(er,Ut)}ot.create=Ft;function jt(Ht,Ut){return Ut===void 0&&(Ut=!1),Ht==null?null:Ht[ot.DATA_KEY]!=null?Ht[ot.DATA_KEY].blot:Ut?jt(Ht.parentNode,Ut):null}ot.find=jt;function Bt(Ht,Ut){Ut===void 0&&(Ut=Rt.ANY);var Kt;if(typeof Ht=="string")Kt=Tt[Ht]||ft[Ht];else if(Ht instanceof Text||Ht.nodeType===Node.TEXT_NODE)Kt=Tt.text;else if(typeof Ht=="number")Ht&Rt.LEVEL&Rt.BLOCK?Kt=Tt.block:Ht&Rt.LEVEL&Rt.INLINE&&(Kt=Tt.inline);else if(Ht instanceof HTMLElement){var Yt=(Ht.getAttribute("class")||"").split(/\s+/);for(var er in Yt)if(Kt=St[Yt[er]],Kt)break;Kt=Kt||kt[Ht.tagName]}return Kt==null?null:Ut&Rt.LEVEL&Kt.scope&&Ut&Rt.TYPE&Kt.scope?Kt:null}ot.query=Bt;function zt(){for(var Ht=[],Ut=0;Ut<arguments.length;Ut++)Ht[Ut]=arguments[Ut];if(Ht.length>1)return Ht.map(function(er){return zt(er)});var Kt=Ht[0];if(typeof Kt.blotName!="string"&&typeof Kt.attrName!="string")throw new dt("Invalid definition");if(Kt.blotName==="abstract")throw new dt("Cannot register abstract class");if(Tt[Kt.blotName||Kt.attrName]=Kt,typeof Kt.keyName=="string")ft[Kt.keyName]=Kt;else if(Kt.className!=null&&(St[Kt.className]=Kt),Kt.tagName!=null){Array.isArray(Kt.tagName)?Kt.tagName=Kt.tagName.map(function(er){return er.toUpperCase()}):Kt.tagName=Kt.tagName.toUpperCase();var Yt=Array.isArray(Kt.tagName)?Kt.tagName:[Kt.tagName];Yt.forEach(function(er){(kt[er]==null||Kt.className==null)&&(kt[er]=Kt)})}return Kt}ot.register=zt},function(et,ot,ut){var ct=ut(51),dt=ut(11),ft=ut(3),St=ut(20),kt=String.fromCharCode(0),Tt=function(Rt){Array.isArray(Rt)?this.ops=Rt:Rt!=null&&Array.isArray(Rt.ops)?this.ops=Rt.ops:this.ops=[]};Tt.prototype.insert=function(Rt,Ft){var jt={};return Rt.length===0?this:(jt.insert=Rt,Ft!=null&&typeof Ft=="object"&&Object.keys(Ft).length>0&&(jt.attributes=Ft),this.push(jt))},Tt.prototype.delete=function(Rt){return Rt<=0?this:this.push({delete:Rt})},Tt.prototype.retain=function(Rt,Ft){if(Rt<=0)return this;var jt={retain:Rt};return Ft!=null&&typeof Ft=="object"&&Object.keys(Ft).length>0&&(jt.attributes=Ft),this.push(jt)},Tt.prototype.push=function(Rt){var Ft=this.ops.length,jt=this.ops[Ft-1];if(Rt=ft(!0,{},Rt),typeof jt=="object"){if(typeof Rt.delete=="number"&&typeof jt.delete=="number")return this.ops[Ft-1]={delete:jt.delete+Rt.delete},this;if(typeof jt.delete=="number"&&Rt.insert!=null&&(Ft-=1,jt=this.ops[Ft-1],typeof jt!="object"))return this.ops.unshift(Rt),this;if(dt(Rt.attributes,jt.attributes)){if(typeof Rt.insert=="string"&&typeof jt.insert=="string")return this.ops[Ft-1]={insert:jt.insert+Rt.insert},typeof Rt.attributes=="object"&&(this.ops[Ft-1].attributes=Rt.attributes),this;if(typeof Rt.retain=="number"&&typeof jt.retain=="number")return this.ops[Ft-1]={retain:jt.retain+Rt.retain},typeof Rt.attributes=="object"&&(this.ops[Ft-1].attributes=Rt.attributes),this}}return Ft===this.ops.length?this.ops.push(Rt):this.ops.splice(Ft,0,Rt),this},Tt.prototype.chop=function(){var Rt=this.ops[this.ops.length-1];return Rt&&Rt.retain&&!Rt.attributes&&this.ops.pop(),this},Tt.prototype.filter=function(Rt){return this.ops.filter(Rt)},Tt.prototype.forEach=function(Rt){this.ops.forEach(Rt)},Tt.prototype.map=function(Rt){return this.ops.map(Rt)},Tt.prototype.partition=function(Rt){var Ft=[],jt=[];return this.forEach(function(Bt){var zt=Rt(Bt)?Ft:jt;zt.push(Bt)}),[Ft,jt]},Tt.prototype.reduce=function(Rt,Ft){return this.ops.reduce(Rt,Ft)},Tt.prototype.changeLength=function(){return this.reduce(function(Rt,Ft){return Ft.insert?Rt+St.length(Ft):Ft.delete?Rt-Ft.delete:Rt},0)},Tt.prototype.length=function(){return this.reduce(function(Rt,Ft){return Rt+St.length(Ft)},0)},Tt.prototype.slice=function(Rt,Ft){Rt=Rt||0,typeof Ft!="number"&&(Ft=1/0);for(var jt=[],Bt=St.iterator(this.ops),zt=0;zt<Ft&&Bt.hasNext();){var Ht;zt<Rt?Ht=Bt.next(Rt-zt):(Ht=Bt.next(Ft-zt),jt.push(Ht)),zt+=St.length(Ht)}return new Tt(jt)},Tt.prototype.compose=function(Rt){var Ft=St.iterator(this.ops),jt=St.iterator(Rt.ops),Bt=[],zt=jt.peek();if(zt!=null&&typeof zt.retain=="number"&&zt.attributes==null){for(var Ht=zt.retain;Ft.peekType()==="insert"&&Ft.peekLength()<=Ht;)Ht-=Ft.peekLength(),Bt.push(Ft.next());zt.retain-Ht>0&&jt.next(zt.retain-Ht)}for(var Ut=new Tt(Bt);Ft.hasNext()||jt.hasNext();)if(jt.peekType()==="insert")Ut.push(jt.next());else if(Ft.peekType()==="delete")Ut.push(Ft.next());else{var Kt=Math.min(Ft.peekLength(),jt.peekLength()),Yt=Ft.next(Kt),er=jt.next(Kt);if(typeof er.retain=="number"){var ar={};typeof Yt.retain=="number"?ar.retain=Kt:ar.insert=Yt.insert;var ir=St.attributes.compose(Yt.attributes,er.attributes,typeof Yt.retain=="number");if(ir&&(ar.attributes=ir),Ut.push(ar),!jt.hasNext()&&dt(Ut.ops[Ut.ops.length-1],ar)){var lr=new Tt(Ft.rest());return Ut.concat(lr).chop()}}else typeof er.delete=="number"&&typeof Yt.retain=="number"&&Ut.push(er)}return Ut.chop()},Tt.prototype.concat=function(Rt){var Ft=new Tt(this.ops.slice());return Rt.ops.length>0&&(Ft.push(Rt.ops[0]),Ft.ops=Ft.ops.concat(Rt.ops.slice(1))),Ft},Tt.prototype.diff=function(Rt,Ft){if(this.ops===Rt.ops)return new Tt;var jt=[this,Rt].map(function(Kt){return Kt.map(function(Yt){if(Yt.insert!=null)return typeof Yt.insert=="string"?Yt.insert:kt;var er=Kt===Rt?"on":"with";throw new Error("diff() called "+er+" non-document")}).join("")}),Bt=new Tt,zt=ct(jt[0],jt[1],Ft),Ht=St.iterator(this.ops),Ut=St.iterator(Rt.ops);return zt.forEach(function(Kt){for(var Yt=Kt[1].length;Yt>0;){var er=0;switch(Kt[0]){case ct.INSERT:er=Math.min(Ut.peekLength(),Yt),Bt.push(Ut.next(er));break;case ct.DELETE:er=Math.min(Yt,Ht.peekLength()),Ht.next(er),Bt.delete(er);break;case ct.EQUAL:er=Math.min(Ht.peekLength(),Ut.peekLength(),Yt);var ar=Ht.next(er),ir=Ut.next(er);dt(ar.insert,ir.insert)?Bt.retain(er,St.attributes.diff(ar.attributes,ir.attributes)):Bt.push(ir).delete(er);break}Yt-=er}}),Bt.chop()},Tt.prototype.eachLine=function(Rt,Ft){Ft=Ft||`
`;for(var jt=St.iterator(this.ops),Bt=new Tt,zt=0;jt.hasNext();){if(jt.peekType()!=="insert")return;var Ht=jt.peek(),Ut=St.length(Ht)-jt.peekLength(),Kt=typeof Ht.insert=="string"?Ht.insert.indexOf(Ft,Ut)-Ut:-1;if(Kt<0)Bt.push(jt.next());else if(Kt>0)Bt.push(jt.next(Kt));else{if(Rt(Bt,jt.next(1).attributes||{},zt)===!1)return;zt+=1,Bt=new Tt}}Bt.length()>0&&Rt(Bt,{},zt)},Tt.prototype.transform=function(Rt,Ft){if(Ft=!!Ft,typeof Rt=="number")return this.transformPosition(Rt,Ft);for(var jt=St.iterator(this.ops),Bt=St.iterator(Rt.ops),zt=new Tt;jt.hasNext()||Bt.hasNext();)if(jt.peekType()==="insert"&&(Ft||Bt.peekType()!=="insert"))zt.retain(St.length(jt.next()));else if(Bt.peekType()==="insert")zt.push(Bt.next());else{var Ht=Math.min(jt.peekLength(),Bt.peekLength()),Ut=jt.next(Ht),Kt=Bt.next(Ht);if(Ut.delete)continue;Kt.delete?zt.push(Kt):zt.retain(Ht,St.attributes.transform(Ut.attributes,Kt.attributes,Ft))}return zt.chop()},Tt.prototype.transformPosition=function(Rt,Ft){Ft=!!Ft;for(var jt=St.iterator(this.ops),Bt=0;jt.hasNext()&&Bt<=Rt;){var zt=jt.peekLength(),Ht=jt.peekType();if(jt.next(),Ht==="delete"){Rt-=Math.min(zt,Rt-Bt);continue}else Ht==="insert"&&(Bt<Rt||!Ft)&&(Rt+=zt);Bt+=zt}return Rt},et.exports=Tt},function(et,ot){var ut=Object.prototype.hasOwnProperty,ct=Object.prototype.toString,dt=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,St=function(jt){return typeof Array.isArray=="function"?Array.isArray(jt):ct.call(jt)==="[object Array]"},kt=function(jt){if(!jt||ct.call(jt)!=="[object Object]")return!1;var Bt=ut.call(jt,"constructor"),zt=jt.constructor&&jt.constructor.prototype&&ut.call(jt.constructor.prototype,"isPrototypeOf");if(jt.constructor&&!Bt&&!zt)return!1;var Ht;for(Ht in jt);return typeof Ht>"u"||ut.call(jt,Ht)},Tt=function(jt,Bt){dt&&Bt.name==="__proto__"?dt(jt,Bt.name,{enumerable:!0,configurable:!0,value:Bt.newValue,writable:!0}):jt[Bt.name]=Bt.newValue},Rt=function(jt,Bt){if(Bt==="__proto__")if(ut.call(jt,Bt)){if(ft)return ft(jt,Bt).value}else return;return jt[Bt]};et.exports=function Ft(){var jt,Bt,zt,Ht,Ut,Kt,Yt=arguments[0],er=1,ar=arguments.length,ir=!1;for(typeof Yt=="boolean"&&(ir=Yt,Yt=arguments[1]||{},er=2),(Yt==null||typeof Yt!="object"&&typeof Yt!="function")&&(Yt={});er<ar;++er)if(jt=arguments[er],jt!=null)for(Bt in jt)zt=Rt(Yt,Bt),Ht=Rt(jt,Bt),Yt!==Ht&&(ir&&Ht&&(kt(Ht)||(Ut=St(Ht)))?(Ut?(Ut=!1,Kt=zt&&St(zt)?zt:[]):Kt=zt&&kt(zt)?zt:{},Tt(Yt,{name:Bt,newValue:Ft(ir,Kt,Ht)})):typeof Ht<"u"&&Tt(Yt,{name:Bt,newValue:Ht}));return Yt}},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BlockEmbed=ot.bubbleFormats=void 0;var ct=function(){function yr(Sr,kr){for(var Pr=0;Pr<kr.length;Pr++){var Or=kr[Pr];Or.enumerable=Or.enumerable||!1,Or.configurable=!0,"value"in Or&&(Or.writable=!0),Object.defineProperty(Sr,Or.key,Or)}}return function(Sr,kr,Pr){return kr&&yr(Sr.prototype,kr),Pr&&yr(Sr,Pr),Sr}}(),dt=function yr(Sr,kr,Pr){Sr===null&&(Sr=Function.prototype);var Or=Object.getOwnPropertyDescriptor(Sr,kr);if(Or===void 0){var hr=Object.getPrototypeOf(Sr);return hr===null?void 0:yr(hr,kr,Pr)}else{if("value"in Or)return Or.value;var Tr=Or.get;return Tr===void 0?void 0:Tr.call(Pr)}},ft=ut(3),St=Yt(ft),kt=ut(2),Tt=Yt(kt),Rt=ut(0),Ft=Yt(Rt),jt=ut(16),Bt=Yt(jt),zt=ut(6),Ht=Yt(zt),Ut=ut(7),Kt=Yt(Ut);function Yt(yr){return yr&&yr.__esModule?yr:{default:yr}}function er(yr,Sr){if(!(yr instanceof Sr))throw new TypeError("Cannot call a class as a function")}function ar(yr,Sr){if(!yr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Sr&&(typeof Sr=="object"||typeof Sr=="function")?Sr:yr}function ir(yr,Sr){if(typeof Sr!="function"&&Sr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Sr);yr.prototype=Object.create(Sr&&Sr.prototype,{constructor:{value:yr,enumerable:!1,writable:!0,configurable:!0}}),Sr&&(Object.setPrototypeOf?Object.setPrototypeOf(yr,Sr):yr.__proto__=Sr)}var lr=1,cr=function(yr){ir(Sr,yr);function Sr(){return er(this,Sr),ar(this,(Sr.__proto__||Object.getPrototypeOf(Sr)).apply(this,arguments))}return ct(Sr,[{key:"attach",value:function(){dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"attach",this).call(this),this.attributes=new Ft.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new Tt.default().insert(this.value(),(0,St.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(Pr,Or){var hr=Ft.default.query(Pr,Ft.default.Scope.BLOCK_ATTRIBUTE);hr!=null&&this.attributes.attribute(hr,Or)}},{key:"formatAt",value:function(Pr,Or,hr,Tr){this.format(hr,Tr)}},{key:"insertAt",value:function(Pr,Or,hr){if(typeof Or=="string"&&Or.endsWith(`
`)){var Tr=Ft.default.create(vr.blotName);this.parent.insertBefore(Tr,Pr===0?this:this.next),Tr.insertAt(0,Or.slice(0,-1))}else dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"insertAt",this).call(this,Pr,Or,hr)}}]),Sr}(Ft.default.Embed);cr.scope=Ft.default.Scope.BLOCK_BLOT;var vr=function(yr){ir(Sr,yr);function Sr(kr){er(this,Sr);var Pr=ar(this,(Sr.__proto__||Object.getPrototypeOf(Sr)).call(this,kr));return Pr.cache={},Pr}return ct(Sr,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(Ft.default.Leaf).reduce(function(Pr,Or){return Or.length()===0?Pr:Pr.insert(Or.value(),xr(Or))},new Tt.default).insert(`
`,xr(this))),this.cache.delta}},{key:"deleteAt",value:function(Pr,Or){dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"deleteAt",this).call(this,Pr,Or),this.cache={}}},{key:"formatAt",value:function(Pr,Or,hr,Tr){Or<=0||(Ft.default.query(hr,Ft.default.Scope.BLOCK)?Pr+Or===this.length()&&this.format(hr,Tr):dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"formatAt",this).call(this,Pr,Math.min(Or,this.length()-Pr-1),hr,Tr),this.cache={})}},{key:"insertAt",value:function(Pr,Or,hr){if(hr!=null)return dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"insertAt",this).call(this,Pr,Or,hr);if(Or.length!==0){var Tr=Or.split(`
`),mr=Tr.shift();mr.length>0&&(Pr<this.length()-1||this.children.tail==null?dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"insertAt",this).call(this,Math.min(Pr,this.length()-1),mr):this.children.tail.insertAt(this.children.tail.length(),mr),this.cache={});var Er=this;Tr.reduce(function(Dr,Cr){return Er=Er.split(Dr,!0),Er.insertAt(0,Cr),Cr.length},Pr+mr.length)}}},{key:"insertBefore",value:function(Pr,Or){var hr=this.children.head;dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"insertBefore",this).call(this,Pr,Or),hr instanceof Bt.default&&hr.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"length",this).call(this)+lr),this.cache.length}},{key:"moveChildren",value:function(Pr,Or){dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"moveChildren",this).call(this,Pr,Or),this.cache={}}},{key:"optimize",value:function(Pr){dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"optimize",this).call(this,Pr),this.cache={}}},{key:"path",value:function(Pr){return dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"path",this).call(this,Pr,!0)}},{key:"removeChild",value:function(Pr){dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"removeChild",this).call(this,Pr),this.cache={}}},{key:"split",value:function(Pr){var Or=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Or&&(Pr===0||Pr>=this.length()-lr)){var hr=this.clone();return Pr===0?(this.parent.insertBefore(hr,this),this):(this.parent.insertBefore(hr,this.next),hr)}else{var Tr=dt(Sr.prototype.__proto__||Object.getPrototypeOf(Sr.prototype),"split",this).call(this,Pr,Or);return this.cache={},Tr}}}]),Sr}(Ft.default.Block);vr.blotName="block",vr.tagName="P",vr.defaultChild="break",vr.allowedChildren=[Ht.default,Ft.default.Embed,Kt.default];function xr(yr){var Sr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return yr==null||(typeof yr.formats=="function"&&(Sr=(0,St.default)(Sr,yr.formats())),yr.parent==null||yr.parent.blotName=="scroll"||yr.parent.statics.scope!==yr.statics.scope)?Sr:xr(yr.parent,Sr)}ot.bubbleFormats=xr,ot.BlockEmbed=cr,ot.default=vr},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.overload=ot.expandConfig=void 0;var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Er){return typeof Er}:function(Er){return Er&&typeof Symbol=="function"&&Er.constructor===Symbol&&Er!==Symbol.prototype?"symbol":typeof Er},dt=function(){function Er(Dr,Cr){var Lr=[],qr=!0,sn=!1,an=void 0;try{for(var tn=Dr[Symbol.iterator](),ln;!(qr=(ln=tn.next()).done)&&(Lr.push(ln.value),!(Cr&&Lr.length===Cr));qr=!0);}catch(yn){sn=!0,an=yn}finally{try{!qr&&tn.return&&tn.return()}finally{if(sn)throw an}}return Lr}return function(Dr,Cr){if(Array.isArray(Dr))return Dr;if(Symbol.iterator in Object(Dr))return Er(Dr,Cr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function Er(Dr,Cr){for(var Lr=0;Lr<Cr.length;Lr++){var qr=Cr[Lr];qr.enumerable=qr.enumerable||!1,qr.configurable=!0,"value"in qr&&(qr.writable=!0),Object.defineProperty(Dr,qr.key,qr)}}return function(Dr,Cr,Lr){return Cr&&Er(Dr.prototype,Cr),Lr&&Er(Dr,Lr),Dr}}();ut(50);var St=ut(2),kt=xr(St),Tt=ut(14),Rt=xr(Tt),Ft=ut(8),jt=xr(Ft),Bt=ut(9),zt=xr(Bt),Ht=ut(0),Ut=xr(Ht),Kt=ut(15),Yt=xr(Kt),er=ut(3),ar=xr(er),ir=ut(10),lr=xr(ir),cr=ut(34),vr=xr(cr);function xr(Er){return Er&&Er.__esModule?Er:{default:Er}}function yr(Er,Dr,Cr){return Dr in Er?Object.defineProperty(Er,Dr,{value:Cr,enumerable:!0,configurable:!0,writable:!0}):Er[Dr]=Cr,Er}function Sr(Er,Dr){if(!(Er instanceof Dr))throw new TypeError("Cannot call a class as a function")}var kr=(0,lr.default)("quill"),Pr=function(){ft(Er,null,[{key:"debug",value:function(Cr){Cr===!0&&(Cr="log"),lr.default.level(Cr)}},{key:"find",value:function(Cr){return Cr.__quill||Ut.default.find(Cr)}},{key:"import",value:function(Cr){return this.imports[Cr]==null&&kr.error("Cannot import "+Cr+". Are you sure it was registered?"),this.imports[Cr]}},{key:"register",value:function(Cr,Lr){var qr=this,sn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof Cr!="string"){var an=Cr.attrName||Cr.blotName;typeof an=="string"?this.register("formats/"+an,Cr,Lr):Object.keys(Cr).forEach(function(tn){qr.register(tn,Cr[tn],Lr)})}else this.imports[Cr]!=null&&!sn&&kr.warn("Overwriting "+Cr+" with",Lr),this.imports[Cr]=Lr,(Cr.startsWith("blots/")||Cr.startsWith("formats/"))&&Lr.blotName!=="abstract"?Ut.default.register(Lr):Cr.startsWith("modules")&&typeof Lr.register=="function"&&Lr.register()}}]);function Er(Dr){var Cr=this,Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Sr(this,Er),this.options=Or(Dr,Lr),this.container=this.options.container,this.container==null)return kr.error("Invalid Quill container",Dr);this.options.debug&&Er.debug(this.options.debug);var qr=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new jt.default,this.scroll=Ut.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new Rt.default(this.scroll),this.selection=new Yt.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(jt.default.events.EDITOR_CHANGE,function(an){an===jt.default.events.TEXT_CHANGE&&Cr.root.classList.toggle("ql-blank",Cr.editor.isBlank())}),this.emitter.on(jt.default.events.SCROLL_UPDATE,function(an,tn){var ln=Cr.selection.lastRange,yn=ln&&ln.length===0?ln.index:void 0;hr.call(Cr,function(){return Cr.editor.update(null,tn,yn)},an)});var sn=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+qr+"<p><br></p></div>");this.setContents(sn),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return ft(Er,[{key:"addContainer",value:function(Cr){var Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof Cr=="string"){var qr=Cr;Cr=document.createElement("div"),Cr.classList.add(qr)}return this.container.insertBefore(Cr,Lr),Cr}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(Cr,Lr,qr){var sn=this,an=Tr(Cr,Lr,qr),tn=dt(an,4);return Cr=tn[0],Lr=tn[1],qr=tn[3],hr.call(this,function(){return sn.editor.deleteText(Cr,Lr)},qr,Cr,-1*Lr)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var Cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(Cr),this.container.classList.toggle("ql-disabled",!Cr)}},{key:"focus",value:function(){var Cr=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=Cr,this.scrollIntoView()}},{key:"format",value:function(Cr,Lr){var qr=this,sn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jt.default.sources.API;return hr.call(this,function(){var an=qr.getSelection(!0),tn=new kt.default;if(an==null)return tn;if(Ut.default.query(Cr,Ut.default.Scope.BLOCK))tn=qr.editor.formatLine(an.index,an.length,yr({},Cr,Lr));else{if(an.length===0)return qr.selection.format(Cr,Lr),tn;tn=qr.editor.formatText(an.index,an.length,yr({},Cr,Lr))}return qr.setSelection(an,jt.default.sources.SILENT),tn},sn)}},{key:"formatLine",value:function(Cr,Lr,qr,sn,an){var tn=this,ln=void 0,yn=Tr(Cr,Lr,qr,sn,an),pn=dt(yn,4);return Cr=pn[0],Lr=pn[1],ln=pn[2],an=pn[3],hr.call(this,function(){return tn.editor.formatLine(Cr,Lr,ln)},an,Cr,0)}},{key:"formatText",value:function(Cr,Lr,qr,sn,an){var tn=this,ln=void 0,yn=Tr(Cr,Lr,qr,sn,an),pn=dt(yn,4);return Cr=pn[0],Lr=pn[1],ln=pn[2],an=pn[3],hr.call(this,function(){return tn.editor.formatText(Cr,Lr,ln)},an,Cr,0)}},{key:"getBounds",value:function(Cr){var Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,qr=void 0;typeof Cr=="number"?qr=this.selection.getBounds(Cr,Lr):qr=this.selection.getBounds(Cr.index,Cr.length);var sn=this.container.getBoundingClientRect();return{bottom:qr.bottom-sn.top,height:qr.height,left:qr.left-sn.left,right:qr.right-sn.left,top:qr.top-sn.top,width:qr.width}}},{key:"getContents",value:function(){var Cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Cr,qr=Tr(Cr,Lr),sn=dt(qr,2);return Cr=sn[0],Lr=sn[1],this.editor.getContents(Cr,Lr)}},{key:"getFormat",value:function(){var Cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof Cr=="number"?this.editor.getFormat(Cr,Lr):this.editor.getFormat(Cr.index,Cr.length)}},{key:"getIndex",value:function(Cr){return Cr.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(Cr){return this.scroll.leaf(Cr)}},{key:"getLine",value:function(Cr){return this.scroll.line(Cr)}},{key:"getLines",value:function(){var Cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof Cr!="number"?this.scroll.lines(Cr.index,Cr.length):this.scroll.lines(Cr,Lr)}},{key:"getModule",value:function(Cr){return this.theme.modules[Cr]}},{key:"getSelection",value:function(){var Cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Cr&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var Cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-Cr,qr=Tr(Cr,Lr),sn=dt(qr,2);return Cr=sn[0],Lr=sn[1],this.editor.getText(Cr,Lr)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(Cr,Lr,qr){var sn=this,an=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Er.sources.API;return hr.call(this,function(){return sn.editor.insertEmbed(Cr,Lr,qr)},an,Cr)}},{key:"insertText",value:function(Cr,Lr,qr,sn,an){var tn=this,ln=void 0,yn=Tr(Cr,0,qr,sn,an),pn=dt(yn,4);return Cr=pn[0],ln=pn[2],an=pn[3],hr.call(this,function(){return tn.editor.insertText(Cr,Lr,ln)},an,Cr,Lr.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(Cr,Lr,qr){this.clipboard.dangerouslyPasteHTML(Cr,Lr,qr)}},{key:"removeFormat",value:function(Cr,Lr,qr){var sn=this,an=Tr(Cr,Lr,qr),tn=dt(an,4);return Cr=tn[0],Lr=tn[1],qr=tn[3],hr.call(this,function(){return sn.editor.removeFormat(Cr,Lr)},qr,Cr)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(Cr){var Lr=this,qr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jt.default.sources.API;return hr.call(this,function(){Cr=new kt.default(Cr);var sn=Lr.getLength(),an=Lr.editor.deleteText(0,sn),tn=Lr.editor.applyDelta(Cr),ln=tn.ops[tn.ops.length-1];ln!=null&&typeof ln.insert=="string"&&ln.insert[ln.insert.length-1]===`
`&&(Lr.editor.deleteText(Lr.getLength()-1,1),tn.delete(1));var yn=an.compose(tn);return yn},qr)}},{key:"setSelection",value:function(Cr,Lr,qr){if(Cr==null)this.selection.setRange(null,Lr||Er.sources.API);else{var sn=Tr(Cr,Lr,qr),an=dt(sn,4);Cr=an[0],Lr=an[1],qr=an[3],this.selection.setRange(new Kt.Range(Cr,Lr),qr),qr!==jt.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(Cr){var Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jt.default.sources.API,qr=new kt.default().insert(Cr);return this.setContents(qr,Lr)}},{key:"update",value:function(){var Cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jt.default.sources.USER,Lr=this.scroll.update(Cr);return this.selection.update(Cr),Lr}},{key:"updateContents",value:function(Cr){var Lr=this,qr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jt.default.sources.API;return hr.call(this,function(){return Cr=new kt.default(Cr),Lr.editor.applyDelta(Cr,qr)},qr,!0)}}]),Er}();Pr.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},Pr.events=jt.default.events,Pr.sources=jt.default.sources,Pr.version="1.3.7",Pr.imports={delta:kt.default,parchment:Ut.default,"core/module":zt.default,"core/theme":vr.default};function Or(Er,Dr){if(Dr=(0,ar.default)(!0,{container:Er,modules:{clipboard:!0,keyboard:!0,history:!0}},Dr),!Dr.theme||Dr.theme===Pr.DEFAULTS.theme)Dr.theme=vr.default;else if(Dr.theme=Pr.import("themes/"+Dr.theme),Dr.theme==null)throw new Error("Invalid theme "+Dr.theme+". Did you register it?");var Cr=(0,ar.default)(!0,{},Dr.theme.DEFAULTS);[Cr,Dr].forEach(function(sn){sn.modules=sn.modules||{},Object.keys(sn.modules).forEach(function(an){sn.modules[an]===!0&&(sn.modules[an]={})})});var Lr=Object.keys(Cr.modules).concat(Object.keys(Dr.modules)),qr=Lr.reduce(function(sn,an){var tn=Pr.import("modules/"+an);return tn==null?kr.error("Cannot load "+an+" module. Are you sure you registered it?"):sn[an]=tn.DEFAULTS||{},sn},{});return Dr.modules!=null&&Dr.modules.toolbar&&Dr.modules.toolbar.constructor!==Object&&(Dr.modules.toolbar={container:Dr.modules.toolbar}),Dr=(0,ar.default)(!0,{},Pr.DEFAULTS,{modules:qr},Cr,Dr),["bounds","container","scrollingContainer"].forEach(function(sn){typeof Dr[sn]=="string"&&(Dr[sn]=document.querySelector(Dr[sn]))}),Dr.modules=Object.keys(Dr.modules).reduce(function(sn,an){return Dr.modules[an]&&(sn[an]=Dr.modules[an]),sn},{}),Dr}function hr(Er,Dr,Cr,Lr){if(this.options.strict&&!this.isEnabled()&&Dr===jt.default.sources.USER)return new kt.default;var qr=Cr==null?null:this.getSelection(),sn=this.editor.delta,an=Er();if(qr!=null&&(Cr===!0&&(Cr=qr.index),Lr==null?qr=mr(qr,an,Dr):Lr!==0&&(qr=mr(qr,Cr,Lr,Dr)),this.setSelection(qr,jt.default.sources.SILENT)),an.length()>0){var tn,ln=[jt.default.events.TEXT_CHANGE,an,sn,Dr];if((tn=this.emitter).emit.apply(tn,[jt.default.events.EDITOR_CHANGE].concat(ln)),Dr!==jt.default.sources.SILENT){var yn;(yn=this.emitter).emit.apply(yn,ln)}}return an}function Tr(Er,Dr,Cr,Lr,qr){var sn={};return typeof Er.index=="number"&&typeof Er.length=="number"?typeof Dr!="number"?(qr=Lr,Lr=Cr,Cr=Dr,Dr=Er.length,Er=Er.index):(Dr=Er.length,Er=Er.index):typeof Dr!="number"&&(qr=Lr,Lr=Cr,Cr=Dr,Dr=0),(typeof Cr>"u"?"undefined":ct(Cr))==="object"?(sn=Cr,qr=Lr):typeof Cr=="string"&&(Lr!=null?sn[Cr]=Lr:qr=Cr),qr=qr||jt.default.sources.API,[Er,Dr,sn,qr]}function mr(Er,Dr,Cr,Lr){if(Er==null)return null;var qr=void 0,sn=void 0;if(Dr instanceof kt.default){var an=[Er.index,Er.index+Er.length].map(function(pn){return Dr.transformPosition(pn,Lr!==jt.default.sources.USER)}),tn=dt(an,2);qr=tn[0],sn=tn[1]}else{var ln=[Er.index,Er.index+Er.length].map(function(pn){return pn<Dr||pn===Dr&&Lr===jt.default.sources.USER?pn:Cr>=0?pn+Cr:Math.max(Dr,pn+Cr)}),yn=dt(ln,2);qr=yn[0],sn=yn[1]}return new Kt.Range(qr,sn-qr)}ot.expandConfig=Or,ot.overload=Tr,ot.default=Pr},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Ht(Ut,Kt){for(var Yt=0;Yt<Kt.length;Yt++){var er=Kt[Yt];er.enumerable=er.enumerable||!1,er.configurable=!0,"value"in er&&(er.writable=!0),Object.defineProperty(Ut,er.key,er)}}return function(Ut,Kt,Yt){return Kt&&Ht(Ut.prototype,Kt),Yt&&Ht(Ut,Yt),Ut}}(),dt=function Ht(Ut,Kt,Yt){Ut===null&&(Ut=Function.prototype);var er=Object.getOwnPropertyDescriptor(Ut,Kt);if(er===void 0){var ar=Object.getPrototypeOf(Ut);return ar===null?void 0:Ht(ar,Kt,Yt)}else{if("value"in er)return er.value;var ir=er.get;return ir===void 0?void 0:ir.call(Yt)}},ft=ut(7),St=Rt(ft),kt=ut(0),Tt=Rt(kt);function Rt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Ft(Ht,Ut){if(!(Ht instanceof Ut))throw new TypeError("Cannot call a class as a function")}function jt(Ht,Ut){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Ht}function Bt(Ht,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Ht.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Ut):Ht.__proto__=Ut)}var zt=function(Ht){Bt(Ut,Ht);function Ut(){return Ft(this,Ut),jt(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).apply(this,arguments))}return ct(Ut,[{key:"formatAt",value:function(Yt,er,ar,ir){if(Ut.compare(this.statics.blotName,ar)<0&&Tt.default.query(ar,Tt.default.Scope.BLOT)){var lr=this.isolate(Yt,er);ir&&lr.wrap(ar,ir)}else dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"formatAt",this).call(this,Yt,er,ar,ir)}},{key:"optimize",value:function(Yt){if(dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"optimize",this).call(this,Yt),this.parent instanceof Ut&&Ut.compare(this.statics.blotName,this.parent.statics.blotName)>0){var er=this.parent.isolate(this.offset(),this.length());this.moveChildren(er),er.wrap(this)}}}],[{key:"compare",value:function(Yt,er){var ar=Ut.order.indexOf(Yt),ir=Ut.order.indexOf(er);return ar>=0||ir>=0?ar-ir:Yt===er?0:Yt<er?-1:1}}]),Ut}(Tt.default.Inline);zt.allowedChildren=[zt,Tt.default.Embed,St.default],zt.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],ot.default=zt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(0),dt=ft(ct);function ft(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function St(Ft,jt){if(!(Ft instanceof jt))throw new TypeError("Cannot call a class as a function")}function kt(Ft,jt){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt&&(typeof jt=="object"||typeof jt=="function")?jt:Ft}function Tt(Ft,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof jt);Ft.prototype=Object.create(jt&&jt.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,jt):Ft.__proto__=jt)}var Rt=function(Ft){Tt(jt,Ft);function jt(){return St(this,jt),kt(this,(jt.__proto__||Object.getPrototypeOf(jt)).apply(this,arguments))}return jt}(dt.default.Text);ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Kt(Yt,er){for(var ar=0;ar<er.length;ar++){var ir=er[ar];ir.enumerable=ir.enumerable||!1,ir.configurable=!0,"value"in ir&&(ir.writable=!0),Object.defineProperty(Yt,ir.key,ir)}}return function(Yt,er,ar){return er&&Kt(Yt.prototype,er),ar&&Kt(Yt,ar),Yt}}(),dt=function Kt(Yt,er,ar){Yt===null&&(Yt=Function.prototype);var ir=Object.getOwnPropertyDescriptor(Yt,er);if(ir===void 0){var lr=Object.getPrototypeOf(Yt);return lr===null?void 0:Kt(lr,er,ar)}else{if("value"in ir)return ir.value;var cr=ir.get;return cr===void 0?void 0:cr.call(ar)}},ft=ut(54),St=Rt(ft),kt=ut(10),Tt=Rt(kt);function Rt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}function Ft(Kt,Yt){if(!(Kt instanceof Yt))throw new TypeError("Cannot call a class as a function")}function jt(Kt,Yt){if(!Kt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Yt&&(typeof Yt=="object"||typeof Yt=="function")?Yt:Kt}function Bt(Kt,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Yt);Kt.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Yt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Yt):Kt.__proto__=Yt)}var zt=(0,Tt.default)("quill:events"),Ht=["selectionchange","mousedown","mouseup","click"];Ht.forEach(function(Kt){document.addEventListener(Kt,function(){for(var Yt=arguments.length,er=Array(Yt),ar=0;ar<Yt;ar++)er[ar]=arguments[ar];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(ir){if(ir.__quill&&ir.__quill.emitter){var lr;(lr=ir.__quill.emitter).handleDOM.apply(lr,er)}})})});var Ut=function(Kt){Bt(Yt,Kt);function Yt(){Ft(this,Yt);var er=jt(this,(Yt.__proto__||Object.getPrototypeOf(Yt)).call(this));return er.listeners={},er.on("error",zt.error),er}return ct(Yt,[{key:"emit",value:function(){zt.log.apply(zt,arguments),dt(Yt.prototype.__proto__||Object.getPrototypeOf(Yt.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(ar){for(var ir=arguments.length,lr=Array(ir>1?ir-1:0),cr=1;cr<ir;cr++)lr[cr-1]=arguments[cr];(this.listeners[ar.type]||[]).forEach(function(vr){var xr=vr.node,yr=vr.handler;(ar.target===xr||xr.contains(ar.target))&&yr.apply(void 0,[ar].concat(lr))})}},{key:"listenDOM",value:function(ar,ir,lr){this.listeners[ar]||(this.listeners[ar]=[]),this.listeners[ar].push({node:ir,handler:lr})}}]),Yt}(St.default);Ut.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},Ut.sources={API:"api",SILENT:"silent",USER:"user"},ot.default=Ut},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});function ct(ft,St){if(!(ft instanceof St))throw new TypeError("Cannot call a class as a function")}var dt=function ft(St){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ct(this,ft),this.quill=St,this.options=kt};dt.DEFAULTS={},ot.default=dt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=["error","warn","log","info"],dt="warn";function ft(kt){if(ct.indexOf(kt)<=ct.indexOf(dt)){for(var Tt,Rt=arguments.length,Ft=Array(Rt>1?Rt-1:0),jt=1;jt<Rt;jt++)Ft[jt-1]=arguments[jt];(Tt=console)[kt].apply(Tt,Ft)}}function St(kt){return ct.reduce(function(Tt,Rt){return Tt[Rt]=ft.bind(console,Rt,kt),Tt},{})}ft.level=St.level=function(kt){dt=kt},ot.default=St},function(et,ot,ut){var ct=Array.prototype.slice,dt=ut(52),ft=ut(53),St=et.exports=function(Ft,jt,Bt){return Bt||(Bt={}),Ft===jt?!0:Ft instanceof Date&&jt instanceof Date?Ft.getTime()===jt.getTime():!Ft||!jt||typeof Ft!="object"&&typeof jt!="object"?Bt.strict?Ft===jt:Ft==jt:Rt(Ft,jt,Bt)};function kt(Ft){return Ft==null}function Tt(Ft){return!(!Ft||typeof Ft!="object"||typeof Ft.length!="number"||typeof Ft.copy!="function"||typeof Ft.slice!="function"||Ft.length>0&&typeof Ft[0]!="number")}function Rt(Ft,jt,Bt){var zt,Ht;if(kt(Ft)||kt(jt)||Ft.prototype!==jt.prototype)return!1;if(ft(Ft))return ft(jt)?(Ft=ct.call(Ft),jt=ct.call(jt),St(Ft,jt,Bt)):!1;if(Tt(Ft)){if(!Tt(jt)||Ft.length!==jt.length)return!1;for(zt=0;zt<Ft.length;zt++)if(Ft[zt]!==jt[zt])return!1;return!0}try{var Ut=dt(Ft),Kt=dt(jt)}catch{return!1}if(Ut.length!=Kt.length)return!1;for(Ut.sort(),Kt.sort(),zt=Ut.length-1;zt>=0;zt--)if(Ut[zt]!=Kt[zt])return!1;for(zt=Ut.length-1;zt>=0;zt--)if(Ht=Ut[zt],!St(Ft[Ht],jt[Ht],Bt))return!1;return typeof Ft==typeof jt}},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(1),dt=function(){function ft(St,kt,Tt){Tt===void 0&&(Tt={}),this.attrName=St,this.keyName=kt;var Rt=ct.Scope.TYPE&ct.Scope.ATTRIBUTE;Tt.scope!=null?this.scope=Tt.scope&ct.Scope.LEVEL|Rt:this.scope=ct.Scope.ATTRIBUTE,Tt.whitelist!=null&&(this.whitelist=Tt.whitelist)}return ft.keys=function(St){return[].map.call(St.attributes,function(kt){return kt.name})},ft.prototype.add=function(St,kt){return this.canAdd(St,kt)?(St.setAttribute(this.keyName,kt),!0):!1},ft.prototype.canAdd=function(St,kt){var Tt=ct.query(St,ct.Scope.BLOT&(this.scope|ct.Scope.TYPE));return Tt==null?!1:this.whitelist==null?!0:typeof kt=="string"?this.whitelist.indexOf(kt.replace(/["']/g,""))>-1:this.whitelist.indexOf(kt)>-1},ft.prototype.remove=function(St){St.removeAttribute(this.keyName)},ft.prototype.value=function(St){var kt=St.getAttribute(this.keyName);return this.canAdd(St,kt)&&kt?kt:""},ft}();ot.default=dt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Code=void 0;var ct=function(){function cr(vr,xr){var yr=[],Sr=!0,kr=!1,Pr=void 0;try{for(var Or=vr[Symbol.iterator](),hr;!(Sr=(hr=Or.next()).done)&&(yr.push(hr.value),!(xr&&yr.length===xr));Sr=!0);}catch(Tr){kr=!0,Pr=Tr}finally{try{!Sr&&Or.return&&Or.return()}finally{if(kr)throw Pr}}return yr}return function(vr,xr){if(Array.isArray(vr))return vr;if(Symbol.iterator in Object(vr))return cr(vr,xr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function cr(vr,xr){for(var yr=0;yr<xr.length;yr++){var Sr=xr[yr];Sr.enumerable=Sr.enumerable||!1,Sr.configurable=!0,"value"in Sr&&(Sr.writable=!0),Object.defineProperty(vr,Sr.key,Sr)}}return function(vr,xr,yr){return xr&&cr(vr.prototype,xr),yr&&cr(vr,yr),vr}}(),ft=function cr(vr,xr,yr){vr===null&&(vr=Function.prototype);var Sr=Object.getOwnPropertyDescriptor(vr,xr);if(Sr===void 0){var kr=Object.getPrototypeOf(vr);return kr===null?void 0:cr(kr,xr,yr)}else{if("value"in Sr)return Sr.value;var Pr=Sr.get;return Pr===void 0?void 0:Pr.call(yr)}},St=ut(2),kt=Kt(St),Tt=ut(0),Rt=Kt(Tt),Ft=ut(4),jt=Kt(Ft),Bt=ut(6),zt=Kt(Bt),Ht=ut(7),Ut=Kt(Ht);function Kt(cr){return cr&&cr.__esModule?cr:{default:cr}}function Yt(cr,vr){if(!(cr instanceof vr))throw new TypeError("Cannot call a class as a function")}function er(cr,vr){if(!cr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return vr&&(typeof vr=="object"||typeof vr=="function")?vr:cr}function ar(cr,vr){if(typeof vr!="function"&&vr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof vr);cr.prototype=Object.create(vr&&vr.prototype,{constructor:{value:cr,enumerable:!1,writable:!0,configurable:!0}}),vr&&(Object.setPrototypeOf?Object.setPrototypeOf(cr,vr):cr.__proto__=vr)}var ir=function(cr){ar(vr,cr);function vr(){return Yt(this,vr),er(this,(vr.__proto__||Object.getPrototypeOf(vr)).apply(this,arguments))}return vr}(zt.default);ir.blotName="code",ir.tagName="CODE";var lr=function(cr){ar(vr,cr);function vr(){return Yt(this,vr),er(this,(vr.__proto__||Object.getPrototypeOf(vr)).apply(this,arguments))}return dt(vr,[{key:"delta",value:function(){var yr=this,Sr=this.domNode.textContent;return Sr.endsWith(`
`)&&(Sr=Sr.slice(0,-1)),Sr.split(`
`).reduce(function(kr,Pr){return kr.insert(Pr).insert(`
`,yr.formats())},new kt.default)}},{key:"format",value:function(yr,Sr){if(!(yr===this.statics.blotName&&Sr)){var kr=this.descendant(Ut.default,this.length()-1),Pr=ct(kr,1),Or=Pr[0];Or!=null&&Or.deleteAt(Or.length()-1,1),ft(vr.prototype.__proto__||Object.getPrototypeOf(vr.prototype),"format",this).call(this,yr,Sr)}}},{key:"formatAt",value:function(yr,Sr,kr,Pr){if(Sr!==0&&!(Rt.default.query(kr,Rt.default.Scope.BLOCK)==null||kr===this.statics.blotName&&Pr===this.statics.formats(this.domNode))){var Or=this.newlineIndex(yr);if(!(Or<0||Or>=yr+Sr)){var hr=this.newlineIndex(yr,!0)+1,Tr=Or-hr+1,mr=this.isolate(hr,Tr),Er=mr.next;mr.format(kr,Pr),Er instanceof vr&&Er.formatAt(0,yr-hr+Sr-Tr,kr,Pr)}}}},{key:"insertAt",value:function(yr,Sr,kr){if(kr==null){var Pr=this.descendant(Ut.default,yr),Or=ct(Pr,2),hr=Or[0],Tr=Or[1];hr.insertAt(Tr,Sr)}}},{key:"length",value:function(){var yr=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?yr:yr+1}},{key:"newlineIndex",value:function(yr){var Sr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Sr)return this.domNode.textContent.slice(0,yr).lastIndexOf(`
`);var kr=this.domNode.textContent.slice(yr).indexOf(`
`);return kr>-1?yr+kr:-1}},{key:"optimize",value:function(yr){this.domNode.textContent.endsWith(`
`)||this.appendChild(Rt.default.create("text",`
`)),ft(vr.prototype.__proto__||Object.getPrototypeOf(vr.prototype),"optimize",this).call(this,yr);var Sr=this.next;Sr!=null&&Sr.prev===this&&Sr.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===Sr.statics.formats(Sr.domNode)&&(Sr.optimize(yr),Sr.moveChildren(this),Sr.remove())}},{key:"replace",value:function(yr){ft(vr.prototype.__proto__||Object.getPrototypeOf(vr.prototype),"replace",this).call(this,yr),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(Sr){var kr=Rt.default.find(Sr);kr==null?Sr.parentNode.removeChild(Sr):kr instanceof Rt.default.Embed?kr.remove():kr.unwrap()})}}],[{key:"create",value:function(yr){var Sr=ft(vr.__proto__||Object.getPrototypeOf(vr),"create",this).call(this,yr);return Sr.setAttribute("spellcheck",!1),Sr}},{key:"formats",value:function(){return!0}}]),vr}(jt.default);lr.blotName="code-block",lr.tagName="PRE",lr.TAB="  ",ot.Code=ir,ot.default=lr},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Er){return typeof Er}:function(Er){return Er&&typeof Symbol=="function"&&Er.constructor===Symbol&&Er!==Symbol.prototype?"symbol":typeof Er},dt=function(){function Er(Dr,Cr){var Lr=[],qr=!0,sn=!1,an=void 0;try{for(var tn=Dr[Symbol.iterator](),ln;!(qr=(ln=tn.next()).done)&&(Lr.push(ln.value),!(Cr&&Lr.length===Cr));qr=!0);}catch(yn){sn=!0,an=yn}finally{try{!qr&&tn.return&&tn.return()}finally{if(sn)throw an}}return Lr}return function(Dr,Cr){if(Array.isArray(Dr))return Dr;if(Symbol.iterator in Object(Dr))return Er(Dr,Cr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function Er(Dr,Cr){for(var Lr=0;Lr<Cr.length;Lr++){var qr=Cr[Lr];qr.enumerable=qr.enumerable||!1,qr.configurable=!0,"value"in qr&&(qr.writable=!0),Object.defineProperty(Dr,qr.key,qr)}}return function(Dr,Cr,Lr){return Cr&&Er(Dr.prototype,Cr),Lr&&Er(Dr,Lr),Dr}}(),St=ut(2),kt=Sr(St),Tt=ut(20),Rt=Sr(Tt),Ft=ut(0),jt=Sr(Ft),Bt=ut(13),zt=Sr(Bt),Ht=ut(24),Ut=Sr(Ht),Kt=ut(4),Yt=Sr(Kt),er=ut(16),ar=Sr(er),ir=ut(21),lr=Sr(ir),cr=ut(11),vr=Sr(cr),xr=ut(3),yr=Sr(xr);function Sr(Er){return Er&&Er.__esModule?Er:{default:Er}}function kr(Er,Dr,Cr){return Dr in Er?Object.defineProperty(Er,Dr,{value:Cr,enumerable:!0,configurable:!0,writable:!0}):Er[Dr]=Cr,Er}function Pr(Er,Dr){if(!(Er instanceof Dr))throw new TypeError("Cannot call a class as a function")}var Or=/^[ -~]*$/,hr=function(){function Er(Dr){Pr(this,Er),this.scroll=Dr,this.delta=this.getDelta()}return ft(Er,[{key:"applyDelta",value:function(Cr){var Lr=this,qr=!1;this.scroll.update();var sn=this.scroll.length();return this.scroll.batchStart(),Cr=mr(Cr),Cr.reduce(function(an,tn){var ln=tn.retain||tn.delete||tn.insert.length||1,yn=tn.attributes||{};if(tn.insert!=null){if(typeof tn.insert=="string"){var pn=tn.insert;pn.endsWith(`
`)&&qr&&(qr=!1,pn=pn.slice(0,-1)),an>=sn&&!pn.endsWith(`
`)&&(qr=!0),Lr.scroll.insertAt(an,pn);var En=Lr.scroll.line(an),On=dt(En,2),Xn=On[0],Un=On[1],Ln=(0,yr.default)({},(0,Kt.bubbleFormats)(Xn));if(Xn instanceof Yt.default){var ns=Xn.descendant(jt.default.Leaf,Un),gs=dt(ns,1),Es=gs[0];Ln=(0,yr.default)(Ln,(0,Kt.bubbleFormats)(Es))}yn=Rt.default.attributes.diff(Ln,yn)||{}}else if(ct(tn.insert)==="object"){var wn=Object.keys(tn.insert)[0];if(wn==null)return an;Lr.scroll.insertAt(an,wn,tn.insert[wn])}sn+=ln}return Object.keys(yn).forEach(function(mn){Lr.scroll.formatAt(an,ln,mn,yn[mn])}),an+ln},0),Cr.reduce(function(an,tn){return typeof tn.delete=="number"?(Lr.scroll.deleteAt(an,tn.delete),an):an+(tn.retain||tn.insert.length||1)},0),this.scroll.batchEnd(),this.update(Cr)}},{key:"deleteText",value:function(Cr,Lr){return this.scroll.deleteAt(Cr,Lr),this.update(new kt.default().retain(Cr).delete(Lr))}},{key:"formatLine",value:function(Cr,Lr){var qr=this,sn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(sn).forEach(function(an){if(!(qr.scroll.whitelist!=null&&!qr.scroll.whitelist[an])){var tn=qr.scroll.lines(Cr,Math.max(Lr,1)),ln=Lr;tn.forEach(function(yn){var pn=yn.length();if(!(yn instanceof zt.default))yn.format(an,sn[an]);else{var En=Cr-yn.offset(qr.scroll),On=yn.newlineIndex(En+ln)-En+1;yn.formatAt(En,On,an,sn[an])}ln-=pn})}}),this.scroll.optimize(),this.update(new kt.default().retain(Cr).retain(Lr,(0,lr.default)(sn)))}},{key:"formatText",value:function(Cr,Lr){var qr=this,sn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(sn).forEach(function(an){qr.scroll.formatAt(Cr,Lr,an,sn[an])}),this.update(new kt.default().retain(Cr).retain(Lr,(0,lr.default)(sn)))}},{key:"getContents",value:function(Cr,Lr){return this.delta.slice(Cr,Cr+Lr)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(Cr,Lr){return Cr.concat(Lr.delta())},new kt.default)}},{key:"getFormat",value:function(Cr){var Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,qr=[],sn=[];Lr===0?this.scroll.path(Cr).forEach(function(tn){var ln=dt(tn,1),yn=ln[0];yn instanceof Yt.default?qr.push(yn):yn instanceof jt.default.Leaf&&sn.push(yn)}):(qr=this.scroll.lines(Cr,Lr),sn=this.scroll.descendants(jt.default.Leaf,Cr,Lr));var an=[qr,sn].map(function(tn){if(tn.length===0)return{};for(var ln=(0,Kt.bubbleFormats)(tn.shift());Object.keys(ln).length>0;){var yn=tn.shift();if(yn==null)return ln;ln=Tr((0,Kt.bubbleFormats)(yn),ln)}return ln});return yr.default.apply(yr.default,an)}},{key:"getText",value:function(Cr,Lr){return this.getContents(Cr,Lr).filter(function(qr){return typeof qr.insert=="string"}).map(function(qr){return qr.insert}).join("")}},{key:"insertEmbed",value:function(Cr,Lr,qr){return this.scroll.insertAt(Cr,Lr,qr),this.update(new kt.default().retain(Cr).insert(kr({},Lr,qr)))}},{key:"insertText",value:function(Cr,Lr){var qr=this,sn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Lr=Lr.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(Cr,Lr),Object.keys(sn).forEach(function(an){qr.scroll.formatAt(Cr,Lr.length,an,sn[an])}),this.update(new kt.default().retain(Cr).insert(Lr,(0,lr.default)(sn)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var Cr=this.scroll.children.head;return Cr.statics.blotName!==Yt.default.blotName||Cr.children.length>1?!1:Cr.children.head instanceof ar.default}},{key:"removeFormat",value:function(Cr,Lr){var qr=this.getText(Cr,Lr),sn=this.scroll.line(Cr+Lr),an=dt(sn,2),tn=an[0],ln=an[1],yn=0,pn=new kt.default;tn!=null&&(tn instanceof zt.default?yn=tn.newlineIndex(ln)-ln+1:yn=tn.length()-ln,pn=tn.delta().slice(ln,ln+yn-1).insert(`
`));var En=this.getContents(Cr,Lr+yn),On=En.diff(new kt.default().insert(qr).concat(pn)),Xn=new kt.default().retain(Cr).concat(On);return this.applyDelta(Xn)}},{key:"update",value:function(Cr){var Lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],qr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,sn=this.delta;if(Lr.length===1&&Lr[0].type==="characterData"&&Lr[0].target.data.match(Or)&&jt.default.find(Lr[0].target)){var an=jt.default.find(Lr[0].target),tn=(0,Kt.bubbleFormats)(an),ln=an.offset(this.scroll),yn=Lr[0].oldValue.replace(Ut.default.CONTENTS,""),pn=new kt.default().insert(yn),En=new kt.default().insert(an.value()),On=new kt.default().retain(ln).concat(pn.diff(En,qr));Cr=On.reduce(function(Xn,Un){return Un.insert?Xn.insert(Un.insert,tn):Xn.push(Un)},new kt.default),this.delta=sn.compose(Cr)}else this.delta=this.getDelta(),(!Cr||!(0,vr.default)(sn.compose(Cr),this.delta))&&(Cr=sn.diff(this.delta,qr));return Cr}}]),Er}();function Tr(Er,Dr){return Object.keys(Dr).reduce(function(Cr,Lr){return Er[Lr]==null||(Dr[Lr]===Er[Lr]?Cr[Lr]=Dr[Lr]:Array.isArray(Dr[Lr])?Dr[Lr].indexOf(Er[Lr])<0&&(Cr[Lr]=Dr[Lr].concat([Er[Lr]])):Cr[Lr]=[Dr[Lr],Er[Lr]]),Cr},{})}function mr(Er){return Er.reduce(function(Dr,Cr){if(Cr.insert===1){var Lr=(0,lr.default)(Cr.attributes);return delete Lr.image,Dr.insert({image:Cr.attributes.image},Lr)}if(Cr.attributes!=null&&(Cr.attributes.list===!0||Cr.attributes.bullet===!0)&&(Cr=(0,lr.default)(Cr),Cr.attributes.list?Cr.attributes.list="ordered":(Cr.attributes.list="bullet",delete Cr.attributes.bullet)),typeof Cr.insert=="string"){var qr=Cr.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return Dr.insert(qr,Cr.attributes)}return Dr.push(Cr)},new kt.default)}ot.default=hr},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.Range=void 0;var ct=function(){function cr(vr,xr){var yr=[],Sr=!0,kr=!1,Pr=void 0;try{for(var Or=vr[Symbol.iterator](),hr;!(Sr=(hr=Or.next()).done)&&(yr.push(hr.value),!(xr&&yr.length===xr));Sr=!0);}catch(Tr){kr=!0,Pr=Tr}finally{try{!Sr&&Or.return&&Or.return()}finally{if(kr)throw Pr}}return yr}return function(vr,xr){if(Array.isArray(vr))return vr;if(Symbol.iterator in Object(vr))return cr(vr,xr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function cr(vr,xr){for(var yr=0;yr<xr.length;yr++){var Sr=xr[yr];Sr.enumerable=Sr.enumerable||!1,Sr.configurable=!0,"value"in Sr&&(Sr.writable=!0),Object.defineProperty(vr,Sr.key,Sr)}}return function(vr,xr,yr){return xr&&cr(vr.prototype,xr),yr&&cr(vr,yr),vr}}(),ft=ut(0),St=Ut(ft),kt=ut(21),Tt=Ut(kt),Rt=ut(11),Ft=Ut(Rt),jt=ut(8),Bt=Ut(jt),zt=ut(10),Ht=Ut(zt);function Ut(cr){return cr&&cr.__esModule?cr:{default:cr}}function Kt(cr){if(Array.isArray(cr)){for(var vr=0,xr=Array(cr.length);vr<cr.length;vr++)xr[vr]=cr[vr];return xr}else return Array.from(cr)}function Yt(cr,vr){if(!(cr instanceof vr))throw new TypeError("Cannot call a class as a function")}var er=(0,Ht.default)("quill:selection"),ar=function cr(vr){var xr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Yt(this,cr),this.index=vr,this.length=xr},ir=function(){function cr(vr,xr){var yr=this;Yt(this,cr),this.emitter=xr,this.scroll=vr,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=St.default.create("cursor",this),this.lastRange=this.savedRange=new ar(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){yr.mouseDown||setTimeout(yr.update.bind(yr,Bt.default.sources.USER),1)}),this.emitter.on(Bt.default.events.EDITOR_CHANGE,function(Sr,kr){Sr===Bt.default.events.TEXT_CHANGE&&kr.length()>0&&yr.update(Bt.default.sources.SILENT)}),this.emitter.on(Bt.default.events.SCROLL_BEFORE_UPDATE,function(){if(yr.hasFocus()){var Sr=yr.getNativeRange();Sr!=null&&Sr.start.node!==yr.cursor.textNode&&yr.emitter.once(Bt.default.events.SCROLL_UPDATE,function(){try{yr.setNativeRange(Sr.start.node,Sr.start.offset,Sr.end.node,Sr.end.offset)}catch{}})}}),this.emitter.on(Bt.default.events.SCROLL_OPTIMIZE,function(Sr,kr){if(kr.range){var Pr=kr.range,Or=Pr.startNode,hr=Pr.startOffset,Tr=Pr.endNode,mr=Pr.endOffset;yr.setNativeRange(Or,hr,Tr,mr)}}),this.update(Bt.default.sources.SILENT)}return dt(cr,[{key:"handleComposition",value:function(){var xr=this;this.root.addEventListener("compositionstart",function(){xr.composing=!0}),this.root.addEventListener("compositionend",function(){if(xr.composing=!1,xr.cursor.parent){var yr=xr.cursor.restore();if(!yr)return;setTimeout(function(){xr.setNativeRange(yr.startNode,yr.startOffset,yr.endNode,yr.endOffset)},1)}})}},{key:"handleDragging",value:function(){var xr=this;this.emitter.listenDOM("mousedown",document.body,function(){xr.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){xr.mouseDown=!1,xr.update(Bt.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(xr,yr){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[xr])){this.scroll.update();var Sr=this.getNativeRange();if(!(Sr==null||!Sr.native.collapsed||St.default.query(xr,St.default.Scope.BLOCK))){if(Sr.start.node!==this.cursor.textNode){var kr=St.default.find(Sr.start.node,!1);if(kr==null)return;if(kr instanceof St.default.Leaf){var Pr=kr.split(Sr.start.offset);kr.parent.insertBefore(this.cursor,Pr)}else kr.insertBefore(this.cursor,Sr.start.node);this.cursor.attach()}this.cursor.format(xr,yr),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(xr){var yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Sr=this.scroll.length();xr=Math.min(xr,Sr-1),yr=Math.min(xr+yr,Sr-1)-xr;var kr=void 0,Pr=this.scroll.leaf(xr),Or=ct(Pr,2),hr=Or[0],Tr=Or[1];if(hr==null)return null;var mr=hr.position(Tr,!0),Er=ct(mr,2);kr=Er[0],Tr=Er[1];var Dr=document.createRange();if(yr>0){Dr.setStart(kr,Tr);var Cr=this.scroll.leaf(xr+yr),Lr=ct(Cr,2);if(hr=Lr[0],Tr=Lr[1],hr==null)return null;var qr=hr.position(Tr,!0),sn=ct(qr,2);return kr=sn[0],Tr=sn[1],Dr.setEnd(kr,Tr),Dr.getBoundingClientRect()}else{var an="left",tn=void 0;return kr instanceof Text?(Tr<kr.data.length?(Dr.setStart(kr,Tr),Dr.setEnd(kr,Tr+1)):(Dr.setStart(kr,Tr-1),Dr.setEnd(kr,Tr),an="right"),tn=Dr.getBoundingClientRect()):(tn=hr.domNode.getBoundingClientRect(),Tr>0&&(an="right")),{bottom:tn.top+tn.height,height:tn.height,left:tn[an],right:tn[an],top:tn.top,width:0}}}},{key:"getNativeRange",value:function(){var xr=document.getSelection();if(xr==null||xr.rangeCount<=0)return null;var yr=xr.getRangeAt(0);if(yr==null)return null;var Sr=this.normalizeNative(yr);return er.info("getNativeRange",Sr),Sr}},{key:"getRange",value:function(){var xr=this.getNativeRange();if(xr==null)return[null,null];var yr=this.normalizedToRange(xr);return[yr,xr]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(xr){var yr=this,Sr=[[xr.start.node,xr.start.offset]];xr.native.collapsed||Sr.push([xr.end.node,xr.end.offset]);var kr=Sr.map(function(hr){var Tr=ct(hr,2),mr=Tr[0],Er=Tr[1],Dr=St.default.find(mr,!0),Cr=Dr.offset(yr.scroll);return Er===0?Cr:Dr instanceof St.default.Container?Cr+Dr.length():Cr+Dr.index(mr,Er)}),Pr=Math.min(Math.max.apply(Math,Kt(kr)),this.scroll.length()-1),Or=Math.min.apply(Math,[Pr].concat(Kt(kr)));return new ar(Or,Pr-Or)}},{key:"normalizeNative",value:function(xr){if(!lr(this.root,xr.startContainer)||!xr.collapsed&&!lr(this.root,xr.endContainer))return null;var yr={start:{node:xr.startContainer,offset:xr.startOffset},end:{node:xr.endContainer,offset:xr.endOffset},native:xr};return[yr.start,yr.end].forEach(function(Sr){for(var kr=Sr.node,Pr=Sr.offset;!(kr instanceof Text)&&kr.childNodes.length>0;)if(kr.childNodes.length>Pr)kr=kr.childNodes[Pr],Pr=0;else if(kr.childNodes.length===Pr)kr=kr.lastChild,Pr=kr instanceof Text?kr.data.length:kr.childNodes.length+1;else break;Sr.node=kr,Sr.offset=Pr}),yr}},{key:"rangeToNative",value:function(xr){var yr=this,Sr=xr.collapsed?[xr.index]:[xr.index,xr.index+xr.length],kr=[],Pr=this.scroll.length();return Sr.forEach(function(Or,hr){Or=Math.min(Pr-1,Or);var Tr=void 0,mr=yr.scroll.leaf(Or),Er=ct(mr,2),Dr=Er[0],Cr=Er[1],Lr=Dr.position(Cr,hr!==0),qr=ct(Lr,2);Tr=qr[0],Cr=qr[1],kr.push(Tr,Cr)}),kr.length<2&&(kr=kr.concat(kr)),kr}},{key:"scrollIntoView",value:function(xr){var yr=this.lastRange;if(yr!=null){var Sr=this.getBounds(yr.index,yr.length);if(Sr!=null){var kr=this.scroll.length()-1,Pr=this.scroll.line(Math.min(yr.index,kr)),Or=ct(Pr,1),hr=Or[0],Tr=hr;if(yr.length>0){var mr=this.scroll.line(Math.min(yr.index+yr.length,kr)),Er=ct(mr,1);Tr=Er[0]}if(!(hr==null||Tr==null)){var Dr=xr.getBoundingClientRect();Sr.top<Dr.top?xr.scrollTop-=Dr.top-Sr.top:Sr.bottom>Dr.bottom&&(xr.scrollTop+=Sr.bottom-Dr.bottom)}}}}},{key:"setNativeRange",value:function(xr,yr){var Sr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xr,kr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:yr,Pr=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(er.info("setNativeRange",xr,yr,Sr,kr),!(xr!=null&&(this.root.parentNode==null||xr.parentNode==null||Sr.parentNode==null))){var Or=document.getSelection();if(Or!=null)if(xr!=null){this.hasFocus()||this.root.focus();var hr=(this.getNativeRange()||{}).native;if(hr==null||Pr||xr!==hr.startContainer||yr!==hr.startOffset||Sr!==hr.endContainer||kr!==hr.endOffset){xr.tagName=="BR"&&(yr=[].indexOf.call(xr.parentNode.childNodes,xr),xr=xr.parentNode),Sr.tagName=="BR"&&(kr=[].indexOf.call(Sr.parentNode.childNodes,Sr),Sr=Sr.parentNode);var Tr=document.createRange();Tr.setStart(xr,yr),Tr.setEnd(Sr,kr),Or.removeAllRanges(),Or.addRange(Tr)}}else Or.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(xr){var yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Sr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bt.default.sources.API;if(typeof yr=="string"&&(Sr=yr,yr=!1),er.info("setRange",xr),xr!=null){var kr=this.rangeToNative(xr);this.setNativeRange.apply(this,Kt(kr).concat([yr]))}else this.setNativeRange(null);this.update(Sr)}},{key:"update",value:function(){var xr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bt.default.sources.USER,yr=this.lastRange,Sr=this.getRange(),kr=ct(Sr,2),Pr=kr[0],Or=kr[1];if(this.lastRange=Pr,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,Ft.default)(yr,this.lastRange)){var hr;!this.composing&&Or!=null&&Or.native.collapsed&&Or.start.node!==this.cursor.textNode&&this.cursor.restore();var Tr=[Bt.default.events.SELECTION_CHANGE,(0,Tt.default)(this.lastRange),(0,Tt.default)(yr),xr];if((hr=this.emitter).emit.apply(hr,[Bt.default.events.EDITOR_CHANGE].concat(Tr)),xr!==Bt.default.sources.SILENT){var mr;(mr=this.emitter).emit.apply(mr,Tr)}}}}]),cr}();function lr(cr,vr){try{vr.parentNode}catch{return!1}return vr instanceof Text&&(vr=vr.parentNode),cr.contains(vr)}ot.Range=ar,ot.default=ir},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(zt,Ht){for(var Ut=0;Ut<Ht.length;Ut++){var Kt=Ht[Ut];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}}return function(zt,Ht,Ut){return Ht&&Bt(zt.prototype,Ht),Ut&&Bt(zt,Ut),zt}}(),dt=function Bt(zt,Ht,Ut){zt===null&&(zt=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(zt,Ht);if(Kt===void 0){var Yt=Object.getPrototypeOf(zt);return Yt===null?void 0:Bt(Yt,Ht,Ut)}else{if("value"in Kt)return Kt.value;var er=Kt.get;return er===void 0?void 0:er.call(Ut)}},ft=ut(0),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,zt){if(!(Bt instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,zt){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Bt}function Ft(Bt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Bt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,zt):Bt.__proto__=zt)}var jt=function(Bt){Ft(zt,Bt);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ct(zt,[{key:"insertInto",value:function(Ut,Kt){Ut.children.length===0?dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"insertInto",this).call(this,Ut,Kt):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),zt}(St.default.Embed);jt.blotName="break",jt.tagName="BR",ot.default=jt},function(et,ot,ut){var ct=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ft,jt){Ft.__proto__=jt}||function(Ft,jt){for(var Bt in jt)jt.hasOwnProperty(Bt)&&(Ft[Bt]=jt[Bt])};return function(Ft,jt){Rt(Ft,jt);function Bt(){this.constructor=Ft}Ft.prototype=jt===null?Object.create(jt):(Bt.prototype=jt.prototype,new Bt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(44),ft=ut(30),St=ut(1),kt=function(Rt){ct(Ft,Rt);function Ft(jt){var Bt=Rt.call(this,jt)||this;return Bt.build(),Bt}return Ft.prototype.appendChild=function(jt){this.insertBefore(jt)},Ft.prototype.attach=function(){Rt.prototype.attach.call(this),this.children.forEach(function(jt){jt.attach()})},Ft.prototype.build=function(){var jt=this;this.children=new dt.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(Bt){try{var zt=Tt(Bt);jt.insertBefore(zt,jt.children.head||void 0)}catch(Ht){if(Ht instanceof St.ParchmentError)return;throw Ht}})},Ft.prototype.deleteAt=function(jt,Bt){if(jt===0&&Bt===this.length())return this.remove();this.children.forEachAt(jt,Bt,function(zt,Ht,Ut){zt.deleteAt(Ht,Ut)})},Ft.prototype.descendant=function(jt,Bt){var zt=this.children.find(Bt),Ht=zt[0],Ut=zt[1];return jt.blotName==null&&jt(Ht)||jt.blotName!=null&&Ht instanceof jt?[Ht,Ut]:Ht instanceof Ft?Ht.descendant(jt,Ut):[null,-1]},Ft.prototype.descendants=function(jt,Bt,zt){Bt===void 0&&(Bt=0),zt===void 0&&(zt=Number.MAX_VALUE);var Ht=[],Ut=zt;return this.children.forEachAt(Bt,zt,function(Kt,Yt,er){(jt.blotName==null&&jt(Kt)||jt.blotName!=null&&Kt instanceof jt)&&Ht.push(Kt),Kt instanceof Ft&&(Ht=Ht.concat(Kt.descendants(jt,Yt,Ut))),Ut-=er}),Ht},Ft.prototype.detach=function(){this.children.forEach(function(jt){jt.detach()}),Rt.prototype.detach.call(this)},Ft.prototype.formatAt=function(jt,Bt,zt,Ht){this.children.forEachAt(jt,Bt,function(Ut,Kt,Yt){Ut.formatAt(Kt,Yt,zt,Ht)})},Ft.prototype.insertAt=function(jt,Bt,zt){var Ht=this.children.find(jt),Ut=Ht[0],Kt=Ht[1];if(Ut)Ut.insertAt(Kt,Bt,zt);else{var Yt=zt==null?St.create("text",Bt):St.create(Bt,zt);this.appendChild(Yt)}},Ft.prototype.insertBefore=function(jt,Bt){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(zt){return jt instanceof zt}))throw new St.ParchmentError("Cannot insert "+jt.statics.blotName+" into "+this.statics.blotName);jt.insertInto(this,Bt)},Ft.prototype.length=function(){return this.children.reduce(function(jt,Bt){return jt+Bt.length()},0)},Ft.prototype.moveChildren=function(jt,Bt){this.children.forEach(function(zt){jt.insertBefore(zt,Bt)})},Ft.prototype.optimize=function(jt){if(Rt.prototype.optimize.call(this,jt),this.children.length===0)if(this.statics.defaultChild!=null){var Bt=St.create(this.statics.defaultChild);this.appendChild(Bt),Bt.optimize(jt)}else this.remove()},Ft.prototype.path=function(jt,Bt){Bt===void 0&&(Bt=!1);var zt=this.children.find(jt,Bt),Ht=zt[0],Ut=zt[1],Kt=[[this,jt]];return Ht instanceof Ft?Kt.concat(Ht.path(Ut,Bt)):(Ht!=null&&Kt.push([Ht,Ut]),Kt)},Ft.prototype.removeChild=function(jt){this.children.remove(jt)},Ft.prototype.replace=function(jt){jt instanceof Ft&&jt.moveChildren(this),Rt.prototype.replace.call(this,jt)},Ft.prototype.split=function(jt,Bt){if(Bt===void 0&&(Bt=!1),!Bt){if(jt===0)return this;if(jt===this.length())return this.next}var zt=this.clone();return this.parent.insertBefore(zt,this.next),this.children.forEachAt(jt,this.length(),function(Ht,Ut,Kt){Ht=Ht.split(Ut,Bt),zt.appendChild(Ht)}),zt},Ft.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},Ft.prototype.update=function(jt,Bt){var zt=this,Ht=[],Ut=[];jt.forEach(function(Kt){Kt.target===zt.domNode&&Kt.type==="childList"&&(Ht.push.apply(Ht,Kt.addedNodes),Ut.push.apply(Ut,Kt.removedNodes))}),Ut.forEach(function(Kt){if(!(Kt.parentNode!=null&&Kt.tagName!=="IFRAME"&&document.body.compareDocumentPosition(Kt)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var Yt=St.find(Kt);Yt!=null&&(Yt.domNode.parentNode==null||Yt.domNode.parentNode===zt.domNode)&&Yt.detach()}}),Ht.filter(function(Kt){return Kt.parentNode==zt.domNode}).sort(function(Kt,Yt){return Kt===Yt?0:Kt.compareDocumentPosition(Yt)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(Kt){var Yt=null;Kt.nextSibling!=null&&(Yt=St.find(Kt.nextSibling));var er=Tt(Kt);(er.next!=Yt||er.next==null)&&(er.parent!=null&&er.parent.removeChild(zt),zt.insertBefore(er,Yt||void 0))})},Ft}(ft.default);function Tt(Rt){var Ft=St.find(Rt);if(Ft==null)try{Ft=St.create(Rt)}catch{Ft=St.create(St.Scope.INLINE),[].slice.call(Rt.childNodes).forEach(function(Bt){Ft.domNode.appendChild(Bt)}),Rt.parentNode&&Rt.parentNode.replaceChild(Ft.domNode,Rt),Ft.attach()}return Ft}ot.default=kt},function(et,ot,ut){var ct=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ft,jt){Ft.__proto__=jt}||function(Ft,jt){for(var Bt in jt)jt.hasOwnProperty(Bt)&&(Ft[Bt]=jt[Bt])};return function(Ft,jt){Rt(Ft,jt);function Bt(){this.constructor=Ft}Ft.prototype=jt===null?Object.create(jt):(Bt.prototype=jt.prototype,new Bt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(12),ft=ut(31),St=ut(17),kt=ut(1),Tt=function(Rt){ct(Ft,Rt);function Ft(jt){var Bt=Rt.call(this,jt)||this;return Bt.attributes=new ft.default(Bt.domNode),Bt}return Ft.formats=function(jt){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return jt.tagName.toLowerCase()},Ft.prototype.format=function(jt,Bt){var zt=kt.query(jt);zt instanceof dt.default?this.attributes.attribute(zt,Bt):Bt&&zt!=null&&(jt!==this.statics.blotName||this.formats()[jt]!==Bt)&&this.replaceWith(jt,Bt)},Ft.prototype.formats=function(){var jt=this.attributes.values(),Bt=this.statics.formats(this.domNode);return Bt!=null&&(jt[this.statics.blotName]=Bt),jt},Ft.prototype.replaceWith=function(jt,Bt){var zt=Rt.prototype.replaceWith.call(this,jt,Bt);return this.attributes.copy(zt),zt},Ft.prototype.update=function(jt,Bt){var zt=this;Rt.prototype.update.call(this,jt,Bt),jt.some(function(Ht){return Ht.target===zt.domNode&&Ht.type==="attributes"})&&this.attributes.build()},Ft.prototype.wrap=function(jt,Bt){var zt=Rt.prototype.wrap.call(this,jt,Bt);return zt instanceof Ft&&zt.statics.scope===this.statics.scope&&this.attributes.move(zt),zt},Ft}(St.default);ot.default=Tt},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var Ft in Rt)Rt.hasOwnProperty(Ft)&&(Tt[Ft]=Rt[Ft])};return function(Tt,Rt){kt(Tt,Rt);function Ft(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(Ft.prototype=Rt.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(30),ft=ut(1),St=function(kt){ct(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.value=function(Rt){return!0},Tt.prototype.index=function(Rt,Ft){return this.domNode===Rt||this.domNode.compareDocumentPosition(Rt)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(Ft,1):-1},Tt.prototype.position=function(Rt,Ft){var jt=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return Rt>0&&(jt+=1),[this.parent.domNode,jt]},Tt.prototype.value=function(){var Rt;return Rt={},Rt[this.statics.blotName]=this.statics.value(this.domNode)||!0,Rt},Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ut){var ct=ut(11),dt=ut(3),ft={attributes:{compose:function(kt,Tt,Rt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var Ft=dt(!0,{},Tt);Rt||(Ft=Object.keys(Ft).reduce(function(Bt,zt){return Ft[zt]!=null&&(Bt[zt]=Ft[zt]),Bt},{}));for(var jt in kt)kt[jt]!==void 0&&Tt[jt]===void 0&&(Ft[jt]=kt[jt]);return Object.keys(Ft).length>0?Ft:void 0},diff:function(kt,Tt){typeof kt!="object"&&(kt={}),typeof Tt!="object"&&(Tt={});var Rt=Object.keys(kt).concat(Object.keys(Tt)).reduce(function(Ft,jt){return ct(kt[jt],Tt[jt])||(Ft[jt]=Tt[jt]===void 0?null:Tt[jt]),Ft},{});return Object.keys(Rt).length>0?Rt:void 0},transform:function(kt,Tt,Rt){if(typeof kt!="object")return Tt;if(typeof Tt=="object"){if(!Rt)return Tt;var Ft=Object.keys(Tt).reduce(function(jt,Bt){return kt[Bt]===void 0&&(jt[Bt]=Tt[Bt]),jt},{});return Object.keys(Ft).length>0?Ft:void 0}}},iterator:function(kt){return new St(kt)},length:function(kt){return typeof kt.delete=="number"?kt.delete:typeof kt.retain=="number"?kt.retain:typeof kt.insert=="string"?kt.insert.length:1}};function St(kt){this.ops=kt,this.index=0,this.offset=0}St.prototype.hasNext=function(){return this.peekLength()<1/0},St.prototype.next=function(kt){kt||(kt=1/0);var Tt=this.ops[this.index];if(Tt){var Rt=this.offset,Ft=ft.length(Tt);if(kt>=Ft-Rt?(kt=Ft-Rt,this.index+=1,this.offset=0):this.offset+=kt,typeof Tt.delete=="number")return{delete:kt};var jt={};return Tt.attributes&&(jt.attributes=Tt.attributes),typeof Tt.retain=="number"?jt.retain=kt:typeof Tt.insert=="string"?jt.insert=Tt.insert.substr(Rt,kt):jt.insert=Tt.insert,jt}else return{retain:1/0}},St.prototype.peek=function(){return this.ops[this.index]},St.prototype.peekLength=function(){return this.ops[this.index]?ft.length(this.ops[this.index])-this.offset:1/0},St.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},St.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var kt=this.offset,Tt=this.index,Rt=this.next(),Ft=this.ops.slice(this.index);return this.offset=kt,this.index=Tt,[Rt].concat(Ft)}else return[]},et.exports=ft},function(et,ot){var ut=function(){function ct(zt,Ht){return Ht!=null&&zt instanceof Ht}var dt;try{dt=Map}catch{dt=function(){}}var ft;try{ft=Set}catch{ft=function(){}}var St;try{St=Promise}catch{St=function(){}}function kt(zt,Ht,Ut,Kt,Yt){typeof Ht=="object"&&(Ut=Ht.depth,Kt=Ht.prototype,Yt=Ht.includeNonEnumerable,Ht=Ht.circular);var er=[],ar=[],ir=typeof Buffer<"u";typeof Ht>"u"&&(Ht=!0),typeof Ut>"u"&&(Ut=1/0);function lr(cr,vr){if(cr===null)return null;if(vr===0)return cr;var xr,yr;if(typeof cr!="object")return cr;if(ct(cr,dt))xr=new dt;else if(ct(cr,ft))xr=new ft;else if(ct(cr,St))xr=new St(function(Dr,Cr){cr.then(function(Lr){Dr(lr(Lr,vr-1))},function(Lr){Cr(lr(Lr,vr-1))})});else if(kt.__isArray(cr))xr=[];else if(kt.__isRegExp(cr))xr=new RegExp(cr.source,Bt(cr)),cr.lastIndex&&(xr.lastIndex=cr.lastIndex);else if(kt.__isDate(cr))xr=new Date(cr.getTime());else{if(ir&&Buffer.isBuffer(cr))return Buffer.allocUnsafe?xr=Buffer.allocUnsafe(cr.length):xr=new Buffer(cr.length),cr.copy(xr),xr;ct(cr,Error)?xr=Object.create(cr):typeof Kt>"u"?(yr=Object.getPrototypeOf(cr),xr=Object.create(yr)):(xr=Object.create(Kt),yr=Kt)}if(Ht){var Sr=er.indexOf(cr);if(Sr!=-1)return ar[Sr];er.push(cr),ar.push(xr)}ct(cr,dt)&&cr.forEach(function(Dr,Cr){var Lr=lr(Cr,vr-1),qr=lr(Dr,vr-1);xr.set(Lr,qr)}),ct(cr,ft)&&cr.forEach(function(Dr){var Cr=lr(Dr,vr-1);xr.add(Cr)});for(var kr in cr){var Pr;yr&&(Pr=Object.getOwnPropertyDescriptor(yr,kr)),!(Pr&&Pr.set==null)&&(xr[kr]=lr(cr[kr],vr-1))}if(Object.getOwnPropertySymbols)for(var Or=Object.getOwnPropertySymbols(cr),kr=0;kr<Or.length;kr++){var hr=Or[kr],Tr=Object.getOwnPropertyDescriptor(cr,hr);Tr&&!Tr.enumerable&&!Yt||(xr[hr]=lr(cr[hr],vr-1),Tr.enumerable||Object.defineProperty(xr,hr,{enumerable:!1}))}if(Yt)for(var mr=Object.getOwnPropertyNames(cr),kr=0;kr<mr.length;kr++){var Er=mr[kr],Tr=Object.getOwnPropertyDescriptor(cr,Er);Tr&&Tr.enumerable||(xr[Er]=lr(cr[Er],vr-1),Object.defineProperty(xr,Er,{enumerable:!1}))}return xr}return lr(zt,Ut)}kt.clonePrototype=function(Ht){if(Ht===null)return null;var Ut=function(){};return Ut.prototype=Ht,new Ut};function Tt(zt){return Object.prototype.toString.call(zt)}kt.__objToStr=Tt;function Rt(zt){return typeof zt=="object"&&Tt(zt)==="[object Date]"}kt.__isDate=Rt;function Ft(zt){return typeof zt=="object"&&Tt(zt)==="[object Array]"}kt.__isArray=Ft;function jt(zt){return typeof zt=="object"&&Tt(zt)==="[object RegExp]"}kt.__isRegExp=jt;function Bt(zt){var Ht="";return zt.global&&(Ht+="g"),zt.ignoreCase&&(Ht+="i"),zt.multiline&&(Ht+="m"),Ht}return kt.__getRegExpFlags=Bt,kt}();typeof et=="object"&&et.exports&&(et.exports=ut)},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function xr(yr,Sr){var kr=[],Pr=!0,Or=!1,hr=void 0;try{for(var Tr=yr[Symbol.iterator](),mr;!(Pr=(mr=Tr.next()).done)&&(kr.push(mr.value),!(Sr&&kr.length===Sr));Pr=!0);}catch(Er){Or=!0,hr=Er}finally{try{!Pr&&Tr.return&&Tr.return()}finally{if(Or)throw hr}}return kr}return function(yr,Sr){if(Array.isArray(yr))return yr;if(Symbol.iterator in Object(yr))return xr(yr,Sr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function xr(yr,Sr){for(var kr=0;kr<Sr.length;kr++){var Pr=Sr[kr];Pr.enumerable=Pr.enumerable||!1,Pr.configurable=!0,"value"in Pr&&(Pr.writable=!0),Object.defineProperty(yr,Pr.key,Pr)}}return function(yr,Sr,kr){return Sr&&xr(yr.prototype,Sr),kr&&xr(yr,kr),yr}}(),ft=function xr(yr,Sr,kr){yr===null&&(yr=Function.prototype);var Pr=Object.getOwnPropertyDescriptor(yr,Sr);if(Pr===void 0){var Or=Object.getPrototypeOf(yr);return Or===null?void 0:xr(Or,Sr,kr)}else{if("value"in Pr)return Pr.value;var hr=Pr.get;return hr===void 0?void 0:hr.call(kr)}},St=ut(0),kt=er(St),Tt=ut(8),Rt=er(Tt),Ft=ut(4),jt=er(Ft),Bt=ut(16),zt=er(Bt),Ht=ut(13),Ut=er(Ht),Kt=ut(25),Yt=er(Kt);function er(xr){return xr&&xr.__esModule?xr:{default:xr}}function ar(xr,yr){if(!(xr instanceof yr))throw new TypeError("Cannot call a class as a function")}function ir(xr,yr){if(!xr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return yr&&(typeof yr=="object"||typeof yr=="function")?yr:xr}function lr(xr,yr){if(typeof yr!="function"&&yr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof yr);xr.prototype=Object.create(yr&&yr.prototype,{constructor:{value:xr,enumerable:!1,writable:!0,configurable:!0}}),yr&&(Object.setPrototypeOf?Object.setPrototypeOf(xr,yr):xr.__proto__=yr)}function cr(xr){return xr instanceof jt.default||xr instanceof Ft.BlockEmbed}var vr=function(xr){lr(yr,xr);function yr(Sr,kr){ar(this,yr);var Pr=ir(this,(yr.__proto__||Object.getPrototypeOf(yr)).call(this,Sr));return Pr.emitter=kr.emitter,Array.isArray(kr.whitelist)&&(Pr.whitelist=kr.whitelist.reduce(function(Or,hr){return Or[hr]=!0,Or},{})),Pr.domNode.addEventListener("DOMNodeInserted",function(){}),Pr.optimize(),Pr.enable(),Pr}return dt(yr,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(kr,Pr){var Or=this.line(kr),hr=ct(Or,2),Tr=hr[0],mr=hr[1],Er=this.line(kr+Pr),Dr=ct(Er,1),Cr=Dr[0];if(ft(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"deleteAt",this).call(this,kr,Pr),Cr!=null&&Tr!==Cr&&mr>0){if(Tr instanceof Ft.BlockEmbed||Cr instanceof Ft.BlockEmbed){this.optimize();return}if(Tr instanceof Ut.default){var Lr=Tr.newlineIndex(Tr.length(),!0);if(Lr>-1&&(Tr=Tr.split(Lr+1),Tr===Cr)){this.optimize();return}}else if(Cr instanceof Ut.default){var qr=Cr.newlineIndex(0);qr>-1&&Cr.split(qr+1)}var sn=Cr.children.head instanceof zt.default?null:Cr.children.head;Tr.moveChildren(Cr,sn),Tr.remove()}this.optimize()}},{key:"enable",value:function(){var kr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",kr)}},{key:"formatAt",value:function(kr,Pr,Or,hr){this.whitelist!=null&&!this.whitelist[Or]||(ft(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"formatAt",this).call(this,kr,Pr,Or,hr),this.optimize())}},{key:"insertAt",value:function(kr,Pr,Or){if(!(Or!=null&&this.whitelist!=null&&!this.whitelist[Pr])){if(kr>=this.length())if(Or==null||kt.default.query(Pr,kt.default.Scope.BLOCK)==null){var hr=kt.default.create(this.statics.defaultChild);this.appendChild(hr),Or==null&&Pr.endsWith(`
`)&&(Pr=Pr.slice(0,-1)),hr.insertAt(0,Pr,Or)}else{var Tr=kt.default.create(Pr,Or);this.appendChild(Tr)}else ft(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"insertAt",this).call(this,kr,Pr,Or);this.optimize()}}},{key:"insertBefore",value:function(kr,Pr){if(kr.statics.scope===kt.default.Scope.INLINE_BLOT){var Or=kt.default.create(this.statics.defaultChild);Or.appendChild(kr),kr=Or}ft(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"insertBefore",this).call(this,kr,Pr)}},{key:"leaf",value:function(kr){return this.path(kr).pop()||[null,-1]}},{key:"line",value:function(kr){return kr===this.length()?this.line(kr-1):this.descendant(cr,kr)}},{key:"lines",value:function(){var kr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Or=function hr(Tr,mr,Er){var Dr=[],Cr=Er;return Tr.children.forEachAt(mr,Er,function(Lr,qr,sn){cr(Lr)?Dr.push(Lr):Lr instanceof kt.default.Container&&(Dr=Dr.concat(hr(Lr,qr,Cr))),Cr-=sn}),Dr};return Or(this,kr,Pr)}},{key:"optimize",value:function(){var kr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(ft(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"optimize",this).call(this,kr,Pr),kr.length>0&&this.emitter.emit(Rt.default.events.SCROLL_OPTIMIZE,kr,Pr))}},{key:"path",value:function(kr){return ft(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"path",this).call(this,kr).slice(1)}},{key:"update",value:function(kr){if(this.batch!==!0){var Pr=Rt.default.sources.USER;typeof kr=="string"&&(Pr=kr),Array.isArray(kr)||(kr=this.observer.takeRecords()),kr.length>0&&this.emitter.emit(Rt.default.events.SCROLL_BEFORE_UPDATE,Pr,kr),ft(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"update",this).call(this,kr.concat([])),kr.length>0&&this.emitter.emit(Rt.default.events.SCROLL_UPDATE,Pr,kr)}}}]),yr}(kt.default.Scroll);vr.blotName="scroll",vr.className="ql-editor",vr.tagName="DIV",vr.defaultChild="block",vr.allowedChildren=[jt.default,Ft.BlockEmbed,Yt.default],ot.default=vr},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SHORTKEY=ot.default=void 0;var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tn){return typeof tn}:function(tn){return tn&&typeof Symbol=="function"&&tn.constructor===Symbol&&tn!==Symbol.prototype?"symbol":typeof tn},dt=function(){function tn(ln,yn){var pn=[],En=!0,On=!1,Xn=void 0;try{for(var Un=ln[Symbol.iterator](),Ln;!(En=(Ln=Un.next()).done)&&(pn.push(Ln.value),!(yn&&pn.length===yn));En=!0);}catch(ns){On=!0,Xn=ns}finally{try{!En&&Un.return&&Un.return()}finally{if(On)throw Xn}}return pn}return function(ln,yn){if(Array.isArray(ln))return ln;if(Symbol.iterator in Object(ln))return tn(ln,yn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function tn(ln,yn){for(var pn=0;pn<yn.length;pn++){var En=yn[pn];En.enumerable=En.enumerable||!1,En.configurable=!0,"value"in En&&(En.writable=!0),Object.defineProperty(ln,En.key,En)}}return function(ln,yn,pn){return yn&&tn(ln.prototype,yn),pn&&tn(ln,pn),ln}}(),St=ut(21),kt=xr(St),Tt=ut(11),Rt=xr(Tt),Ft=ut(3),jt=xr(Ft),Bt=ut(2),zt=xr(Bt),Ht=ut(20),Ut=xr(Ht),Kt=ut(0),Yt=xr(Kt),er=ut(5),ar=xr(er),ir=ut(10),lr=xr(ir),cr=ut(9),vr=xr(cr);function xr(tn){return tn&&tn.__esModule?tn:{default:tn}}function yr(tn,ln,yn){return ln in tn?Object.defineProperty(tn,ln,{value:yn,enumerable:!0,configurable:!0,writable:!0}):tn[ln]=yn,tn}function Sr(tn,ln){if(!(tn instanceof ln))throw new TypeError("Cannot call a class as a function")}function kr(tn,ln){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ln&&(typeof ln=="object"||typeof ln=="function")?ln:tn}function Pr(tn,ln){if(typeof ln!="function"&&ln!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ln);tn.prototype=Object.create(ln&&ln.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),ln&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,ln):tn.__proto__=ln)}var Or=(0,lr.default)("quill:keyboard"),hr=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Tr=function(tn){Pr(ln,tn),ft(ln,null,[{key:"match",value:function(pn,En){return En=an(En),["altKey","ctrlKey","metaKey","shiftKey"].some(function(On){return!!En[On]!==pn[On]&&En[On]!==null})?!1:En.key===(pn.which||pn.keyCode)}}]);function ln(yn,pn){Sr(this,ln);var En=kr(this,(ln.__proto__||Object.getPrototypeOf(ln)).call(this,yn,pn));return En.bindings={},Object.keys(En.options.bindings).forEach(function(On){On==="list autofill"&&yn.scroll.whitelist!=null&&!yn.scroll.whitelist.list||En.options.bindings[On]&&En.addBinding(En.options.bindings[On])}),En.addBinding({key:ln.keys.ENTER,shiftKey:null},Lr),En.addBinding({key:ln.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(En.addBinding({key:ln.keys.BACKSPACE},{collapsed:!0},Er),En.addBinding({key:ln.keys.DELETE},{collapsed:!0},Dr)):(En.addBinding({key:ln.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},Er),En.addBinding({key:ln.keys.DELETE},{collapsed:!0,suffix:/^.?$/},Dr)),En.addBinding({key:ln.keys.BACKSPACE},{collapsed:!1},Cr),En.addBinding({key:ln.keys.DELETE},{collapsed:!1},Cr),En.addBinding({key:ln.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},Er),En.listen(),En}return ft(ln,[{key:"addBinding",value:function(pn){var En=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},On=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Xn=an(pn);if(Xn==null||Xn.key==null)return Or.warn("Attempted to add invalid keyboard binding",Xn);typeof En=="function"&&(En={handler:En}),typeof On=="function"&&(On={handler:On}),Xn=(0,jt.default)(Xn,En,On),this.bindings[Xn.key]=this.bindings[Xn.key]||[],this.bindings[Xn.key].push(Xn)}},{key:"listen",value:function(){var pn=this;this.quill.root.addEventListener("keydown",function(En){if(!En.defaultPrevented){var On=En.which||En.keyCode,Xn=(pn.bindings[On]||[]).filter(function(dr){return ln.match(En,dr)});if(Xn.length!==0){var Un=pn.quill.getSelection();if(!(Un==null||!pn.quill.hasFocus())){var Ln=pn.quill.getLine(Un.index),ns=dt(Ln,2),gs=ns[0],Es=ns[1],wn=pn.quill.getLeaf(Un.index),mn=dt(wn,2),Dn=mn[0],Tn=mn[1],An=Un.length===0?[Dn,Tn]:pn.quill.getLeaf(Un.index+Un.length),$n=dt(An,2),qn=$n[0],Bn=$n[1],$t=Dn instanceof Yt.default.Text?Dn.value().slice(0,Tn):"",Zt=qn instanceof Yt.default.Text?qn.value().slice(Bn):"",or={collapsed:Un.length===0,empty:Un.length===0&&gs.length()<=1,format:pn.quill.getFormat(Un),offset:Es,prefix:$t,suffix:Zt},ur=Xn.some(function(dr){if(dr.collapsed!=null&&dr.collapsed!==or.collapsed||dr.empty!=null&&dr.empty!==or.empty||dr.offset!=null&&dr.offset!==or.offset)return!1;if(Array.isArray(dr.format)){if(dr.format.every(function(gr){return or.format[gr]==null}))return!1}else if(ct(dr.format)==="object"&&!Object.keys(dr.format).every(function(gr){return dr.format[gr]===!0?or.format[gr]!=null:dr.format[gr]===!1?or.format[gr]==null:(0,Rt.default)(dr.format[gr],or.format[gr])}))return!1;return dr.prefix!=null&&!dr.prefix.test(or.prefix)||dr.suffix!=null&&!dr.suffix.test(or.suffix)?!1:dr.handler.call(pn,Un,or)!==!0});ur&&En.preventDefault()}}}})}}]),ln}(vr.default);Tr.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Tr.DEFAULTS={bindings:{bold:sn("bold"),italic:sn("italic"),underline:sn("underline"),indent:{key:Tr.keys.TAB,format:["blockquote","indent","list"],handler:function(ln,yn){if(yn.collapsed&&yn.offset!==0)return!0;this.quill.format("indent","+1",ar.default.sources.USER)}},outdent:{key:Tr.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ln,yn){if(yn.collapsed&&yn.offset!==0)return!0;this.quill.format("indent","-1",ar.default.sources.USER)}},"outdent backspace":{key:Tr.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ln,yn){yn.format.indent!=null?this.quill.format("indent","-1",ar.default.sources.USER):yn.format.list!=null&&this.quill.format("list",!1,ar.default.sources.USER)}},"indent code-block":qr(!0),"outdent code-block":qr(!1),"remove tab":{key:Tr.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ln){this.quill.deleteText(ln.index-1,1,ar.default.sources.USER)}},tab:{key:Tr.keys.TAB,handler:function(ln){this.quill.history.cutoff();var yn=new zt.default().retain(ln.index).delete(ln.length).insert("	");this.quill.updateContents(yn,ar.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ln.index+1,ar.default.sources.SILENT)}},"list empty enter":{key:Tr.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ln,yn){this.quill.format("list",!1,ar.default.sources.USER),yn.format.indent&&this.quill.format("indent",!1,ar.default.sources.USER)}},"checklist enter":{key:Tr.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ln){var yn=this.quill.getLine(ln.index),pn=dt(yn,2),En=pn[0],On=pn[1],Xn=(0,jt.default)({},En.formats(),{list:"checked"}),Un=new zt.default().retain(ln.index).insert(`
`,Xn).retain(En.length()-On-1).retain(1,{list:"unchecked"});this.quill.updateContents(Un,ar.default.sources.USER),this.quill.setSelection(ln.index+1,ar.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Tr.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ln,yn){var pn=this.quill.getLine(ln.index),En=dt(pn,2),On=En[0],Xn=En[1],Un=new zt.default().retain(ln.index).insert(`
`,yn.format).retain(On.length()-Xn-1).retain(1,{header:null});this.quill.updateContents(Un,ar.default.sources.USER),this.quill.setSelection(ln.index+1,ar.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ln,yn){var pn=yn.prefix.length,En=this.quill.getLine(ln.index),On=dt(En,2),Xn=On[0],Un=On[1];if(Un>pn)return!0;var Ln=void 0;switch(yn.prefix.trim()){case"[]":case"[ ]":Ln="unchecked";break;case"[x]":Ln="checked";break;case"-":case"*":Ln="bullet";break;default:Ln="ordered"}this.quill.insertText(ln.index," ",ar.default.sources.USER),this.quill.history.cutoff();var ns=new zt.default().retain(ln.index-Un).delete(pn+1).retain(Xn.length()-2-Un).retain(1,{list:Ln});this.quill.updateContents(ns,ar.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ln.index-pn,ar.default.sources.SILENT)}},"code exit":{key:Tr.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ln){var yn=this.quill.getLine(ln.index),pn=dt(yn,2),En=pn[0],On=pn[1],Xn=new zt.default().retain(ln.index+En.length()-On-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Xn,ar.default.sources.USER)}},"embed left":mr(Tr.keys.LEFT,!1),"embed left shift":mr(Tr.keys.LEFT,!0),"embed right":mr(Tr.keys.RIGHT,!1),"embed right shift":mr(Tr.keys.RIGHT,!0)}};function mr(tn,ln){var yn,pn=tn===Tr.keys.LEFT?"prefix":"suffix";return yn={key:tn,shiftKey:ln,altKey:null},yr(yn,pn,/^$/),yr(yn,"handler",function(On){var Xn=On.index;tn===Tr.keys.RIGHT&&(Xn+=On.length+1);var Un=this.quill.getLeaf(Xn),Ln=dt(Un,1),ns=Ln[0];return ns instanceof Yt.default.Embed?(tn===Tr.keys.LEFT?ln?this.quill.setSelection(On.index-1,On.length+1,ar.default.sources.USER):this.quill.setSelection(On.index-1,ar.default.sources.USER):ln?this.quill.setSelection(On.index,On.length+1,ar.default.sources.USER):this.quill.setSelection(On.index+On.length+1,ar.default.sources.USER),!1):!0}),yn}function Er(tn,ln){if(!(tn.index===0||this.quill.getLength()<=1)){var yn=this.quill.getLine(tn.index),pn=dt(yn,1),En=pn[0],On={};if(ln.offset===0){var Xn=this.quill.getLine(tn.index-1),Un=dt(Xn,1),Ln=Un[0];if(Ln!=null&&Ln.length()>1){var ns=En.formats(),gs=this.quill.getFormat(tn.index-1,1);On=Ut.default.attributes.diff(ns,gs)||{}}}var Es=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ln.prefix)?2:1;this.quill.deleteText(tn.index-Es,Es,ar.default.sources.USER),Object.keys(On).length>0&&this.quill.formatLine(tn.index-Es,Es,On,ar.default.sources.USER),this.quill.focus()}}function Dr(tn,ln){var yn=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ln.suffix)?2:1;if(!(tn.index>=this.quill.getLength()-yn)){var pn={},En=0,On=this.quill.getLine(tn.index),Xn=dt(On,1),Un=Xn[0];if(ln.offset>=Un.length()-1){var Ln=this.quill.getLine(tn.index+1),ns=dt(Ln,1),gs=ns[0];if(gs){var Es=Un.formats(),wn=this.quill.getFormat(tn.index,1);pn=Ut.default.attributes.diff(Es,wn)||{},En=gs.length()}}this.quill.deleteText(tn.index,yn,ar.default.sources.USER),Object.keys(pn).length>0&&this.quill.formatLine(tn.index+En-1,yn,pn,ar.default.sources.USER)}}function Cr(tn){var ln=this.quill.getLines(tn),yn={};if(ln.length>1){var pn=ln[0].formats(),En=ln[ln.length-1].formats();yn=Ut.default.attributes.diff(En,pn)||{}}this.quill.deleteText(tn,ar.default.sources.USER),Object.keys(yn).length>0&&this.quill.formatLine(tn.index,1,yn,ar.default.sources.USER),this.quill.setSelection(tn.index,ar.default.sources.SILENT),this.quill.focus()}function Lr(tn,ln){var yn=this;tn.length>0&&this.quill.scroll.deleteAt(tn.index,tn.length);var pn=Object.keys(ln.format).reduce(function(En,On){return Yt.default.query(On,Yt.default.Scope.BLOCK)&&!Array.isArray(ln.format[On])&&(En[On]=ln.format[On]),En},{});this.quill.insertText(tn.index,`
`,pn,ar.default.sources.USER),this.quill.setSelection(tn.index+1,ar.default.sources.SILENT),this.quill.focus(),Object.keys(ln.format).forEach(function(En){pn[En]==null&&(Array.isArray(ln.format[En])||En!=="link"&&yn.quill.format(En,ln.format[En],ar.default.sources.USER))})}function qr(tn){return{key:Tr.keys.TAB,shiftKey:!tn,format:{"code-block":!0},handler:function(yn){var pn=Yt.default.query("code-block"),En=yn.index,On=yn.length,Xn=this.quill.scroll.descendant(pn,En),Un=dt(Xn,2),Ln=Un[0],ns=Un[1];if(Ln!=null){var gs=this.quill.getIndex(Ln),Es=Ln.newlineIndex(ns,!0)+1,wn=Ln.newlineIndex(gs+ns+On),mn=Ln.domNode.textContent.slice(Es,wn).split(`
`);ns=0,mn.forEach(function(Dn,Tn){tn?(Ln.insertAt(Es+ns,pn.TAB),ns+=pn.TAB.length,Tn===0?En+=pn.TAB.length:On+=pn.TAB.length):Dn.startsWith(pn.TAB)&&(Ln.deleteAt(Es+ns,pn.TAB.length),ns-=pn.TAB.length,Tn===0?En-=pn.TAB.length:On-=pn.TAB.length),ns+=Dn.length+1}),this.quill.update(ar.default.sources.USER),this.quill.setSelection(En,On,ar.default.sources.SILENT)}}}}function sn(tn){return{key:tn[0].toUpperCase(),shortKey:!0,handler:function(yn,pn){this.quill.format(tn,!pn.format[tn],ar.default.sources.USER)}}}function an(tn){if(typeof tn=="string"||typeof tn=="number")return an({key:tn});if((typeof tn>"u"?"undefined":ct(tn))==="object"&&(tn=(0,kt.default)(tn,!1)),typeof tn.key=="string")if(Tr.keys[tn.key.toUpperCase()]!=null)tn.key=Tr.keys[tn.key.toUpperCase()];else if(tn.key.length===1)tn.key=tn.key.toUpperCase().charCodeAt(0);else return null;return tn.shortKey&&(tn[hr]=tn.shortKey,delete tn.shortKey),tn}ot.default=Tr,ot.SHORTKEY=hr},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Ut(Kt,Yt){var er=[],ar=!0,ir=!1,lr=void 0;try{for(var cr=Kt[Symbol.iterator](),vr;!(ar=(vr=cr.next()).done)&&(er.push(vr.value),!(Yt&&er.length===Yt));ar=!0);}catch(xr){ir=!0,lr=xr}finally{try{!ar&&cr.return&&cr.return()}finally{if(ir)throw lr}}return er}return function(Kt,Yt){if(Array.isArray(Kt))return Kt;if(Symbol.iterator in Object(Kt))return Ut(Kt,Yt);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function Ut(Kt,Yt,er){Kt===null&&(Kt=Function.prototype);var ar=Object.getOwnPropertyDescriptor(Kt,Yt);if(ar===void 0){var ir=Object.getPrototypeOf(Kt);return ir===null?void 0:Ut(ir,Yt,er)}else{if("value"in ar)return ar.value;var lr=ar.get;return lr===void 0?void 0:lr.call(er)}},ft=function(){function Ut(Kt,Yt){for(var er=0;er<Yt.length;er++){var ar=Yt[er];ar.enumerable=ar.enumerable||!1,ar.configurable=!0,"value"in ar&&(ar.writable=!0),Object.defineProperty(Kt,ar.key,ar)}}return function(Kt,Yt,er){return Yt&&Ut(Kt.prototype,Yt),er&&Ut(Kt,er),Kt}}(),St=ut(0),kt=Ft(St),Tt=ut(7),Rt=Ft(Tt);function Ft(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function jt(Ut,Kt){if(!(Ut instanceof Kt))throw new TypeError("Cannot call a class as a function")}function Bt(Ut,Kt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:Ut}function zt(Ut,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);Ut.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Kt):Ut.__proto__=Kt)}var Ht=function(Ut){zt(Kt,Ut),ft(Kt,null,[{key:"value",value:function(){}}]);function Kt(Yt,er){jt(this,Kt);var ar=Bt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).call(this,Yt));return ar.selection=er,ar.textNode=document.createTextNode(Kt.CONTENTS),ar.domNode.appendChild(ar.textNode),ar._length=0,ar}return ft(Kt,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(er,ar){if(this._length!==0)return dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"format",this).call(this,er,ar);for(var ir=this,lr=0;ir!=null&&ir.statics.scope!==kt.default.Scope.BLOCK_BLOT;)lr+=ir.offset(ir.parent),ir=ir.parent;ir!=null&&(this._length=Kt.CONTENTS.length,ir.optimize(),ir.formatAt(lr,Kt.CONTENTS.length,er,ar),this._length=0)}},{key:"index",value:function(er,ar){return er===this.textNode?0:dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"index",this).call(this,er,ar)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var er=this.textNode,ar=this.selection.getNativeRange(),ir=void 0,lr=void 0,cr=void 0;if(ar!=null&&ar.start.node===er&&ar.end.node===er){var vr=[er,ar.start.offset,ar.end.offset];ir=vr[0],lr=vr[1],cr=vr[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==Kt.CONTENTS){var xr=this.textNode.data.split(Kt.CONTENTS).join("");this.next instanceof Rt.default?(ir=this.next.domNode,this.next.insertAt(0,xr),this.textNode.data=Kt.CONTENTS):(this.textNode.data=xr,this.parent.insertBefore(kt.default.create(this.textNode),this),this.textNode=document.createTextNode(Kt.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),lr!=null){var yr=[lr,cr].map(function(kr){return Math.max(0,Math.min(ir.data.length,kr-1))}),Sr=ct(yr,2);return lr=Sr[0],cr=Sr[1],{startNode:ir,startOffset:lr,endNode:ir,endOffset:cr}}}}},{key:"update",value:function(er,ar){var ir=this;if(er.some(function(cr){return cr.type==="characterData"&&cr.target===ir.textNode})){var lr=this.restore();lr&&(ar.range=lr)}}},{key:"value",value:function(){return""}}]),Kt}(kt.default.Embed);Ht.blotName="cursor",Ht.className="ql-cursor",Ht.tagName="span",Ht.CONTENTS="\uFEFF",ot.default=Ht},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(0),dt=kt(ct),ft=ut(4),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,zt){if(!(Bt instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,zt){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Bt}function Ft(Bt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Bt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,zt):Bt.__proto__=zt)}var jt=function(Bt){Ft(zt,Bt);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return zt}(dt.default.Container);jt.allowedChildren=[St.default,ft.BlockEmbed,jt],ot.default=jt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.ColorStyle=ot.ColorClass=ot.ColorAttributor=void 0;var ct=function(){function Ht(Ut,Kt){for(var Yt=0;Yt<Kt.length;Yt++){var er=Kt[Yt];er.enumerable=er.enumerable||!1,er.configurable=!0,"value"in er&&(er.writable=!0),Object.defineProperty(Ut,er.key,er)}}return function(Ut,Kt,Yt){return Kt&&Ht(Ut.prototype,Kt),Yt&&Ht(Ut,Yt),Ut}}(),dt=function Ht(Ut,Kt,Yt){Ut===null&&(Ut=Function.prototype);var er=Object.getOwnPropertyDescriptor(Ut,Kt);if(er===void 0){var ar=Object.getPrototypeOf(Ut);return ar===null?void 0:Ht(ar,Kt,Yt)}else{if("value"in er)return er.value;var ir=er.get;return ir===void 0?void 0:ir.call(Yt)}},ft=ut(0),St=kt(ft);function kt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Tt(Ht,Ut){if(!(Ht instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Rt(Ht,Ut){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Ht}function Ft(Ht,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Ht.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Ut):Ht.__proto__=Ut)}var jt=function(Ht){Ft(Ut,Ht);function Ut(){return Tt(this,Ut),Rt(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).apply(this,arguments))}return ct(Ut,[{key:"value",value:function(Yt){var er=dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"value",this).call(this,Yt);return er.startsWith("rgb(")?(er=er.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+er.split(",").map(function(ar){return("00"+parseInt(ar).toString(16)).slice(-2)}).join("")):er}}]),Ut}(St.default.Attributor.Style),Bt=new St.default.Attributor.Class("color","ql-color",{scope:St.default.Scope.INLINE}),zt=new jt("color","color",{scope:St.default.Scope.INLINE});ot.ColorAttributor=jt,ot.ColorClass=Bt,ot.ColorStyle=zt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.sanitize=ot.default=void 0;var ct=function(){function zt(Ht,Ut){for(var Kt=0;Kt<Ut.length;Kt++){var Yt=Ut[Kt];Yt.enumerable=Yt.enumerable||!1,Yt.configurable=!0,"value"in Yt&&(Yt.writable=!0),Object.defineProperty(Ht,Yt.key,Yt)}}return function(Ht,Ut,Kt){return Ut&&zt(Ht.prototype,Ut),Kt&&zt(Ht,Kt),Ht}}(),dt=function zt(Ht,Ut,Kt){Ht===null&&(Ht=Function.prototype);var Yt=Object.getOwnPropertyDescriptor(Ht,Ut);if(Yt===void 0){var er=Object.getPrototypeOf(Ht);return er===null?void 0:zt(er,Ut,Kt)}else{if("value"in Yt)return Yt.value;var ar=Yt.get;return ar===void 0?void 0:ar.call(Kt)}},ft=ut(6),St=kt(ft);function kt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Tt(zt,Ht){if(!(zt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(zt,Ht){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:zt}function Ft(zt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);zt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Ht):zt.__proto__=Ht)}var jt=function(zt){Ft(Ht,zt);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ct(Ht,[{key:"format",value:function(Kt,Yt){if(Kt!==this.statics.blotName||!Yt)return dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"format",this).call(this,Kt,Yt);Yt=this.constructor.sanitize(Yt),this.domNode.setAttribute("href",Yt)}}],[{key:"create",value:function(Kt){var Yt=dt(Ht.__proto__||Object.getPrototypeOf(Ht),"create",this).call(this,Kt);return Kt=this.sanitize(Kt),Yt.setAttribute("href",Kt),Yt.setAttribute("rel","noopener noreferrer"),Yt.setAttribute("target","_blank"),Yt}},{key:"formats",value:function(Kt){return Kt.getAttribute("href")}},{key:"sanitize",value:function(Kt){return Bt(Kt,this.PROTOCOL_WHITELIST)?Kt:this.SANITIZED_URL}}]),Ht}(St.default);jt.blotName="link",jt.tagName="A",jt.SANITIZED_URL="about:blank",jt.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function Bt(zt,Ht){var Ut=document.createElement("a");Ut.href=zt;var Kt=Ut.href.slice(0,Ut.href.indexOf(":"));return Ht.indexOf(Kt)>-1}ot.default=jt,ot.sanitize=Bt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ht){return typeof Ht}:function(Ht){return Ht&&typeof Symbol=="function"&&Ht.constructor===Symbol&&Ht!==Symbol.prototype?"symbol":typeof Ht},dt=function(){function Ht(Ut,Kt){for(var Yt=0;Yt<Kt.length;Yt++){var er=Kt[Yt];er.enumerable=er.enumerable||!1,er.configurable=!0,"value"in er&&(er.writable=!0),Object.defineProperty(Ut,er.key,er)}}return function(Ut,Kt,Yt){return Kt&&Ht(Ut.prototype,Kt),Yt&&Ht(Ut,Yt),Ut}}(),ft=ut(23),St=Rt(ft),kt=ut(107),Tt=Rt(kt);function Rt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Ft(Ht,Ut){if(!(Ht instanceof Ut))throw new TypeError("Cannot call a class as a function")}var jt=0;function Bt(Ht,Ut){Ht.setAttribute(Ut,Ht.getAttribute(Ut)!=="true")}var zt=function(){function Ht(Ut){var Kt=this;Ft(this,Ht),this.select=Ut,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){Kt.togglePicker()}),this.label.addEventListener("keydown",function(Yt){switch(Yt.keyCode){case St.default.keys.ENTER:Kt.togglePicker();break;case St.default.keys.ESCAPE:Kt.escape(),Yt.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return dt(Ht,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),Bt(this.label,"aria-expanded"),Bt(this.options,"aria-hidden")}},{key:"buildItem",value:function(Kt){var Yt=this,er=document.createElement("span");return er.tabIndex="0",er.setAttribute("role","button"),er.classList.add("ql-picker-item"),Kt.hasAttribute("value")&&er.setAttribute("data-value",Kt.getAttribute("value")),Kt.textContent&&er.setAttribute("data-label",Kt.textContent),er.addEventListener("click",function(){Yt.selectItem(er,!0)}),er.addEventListener("keydown",function(ar){switch(ar.keyCode){case St.default.keys.ENTER:Yt.selectItem(er,!0),ar.preventDefault();break;case St.default.keys.ESCAPE:Yt.escape(),ar.preventDefault();break}}),er}},{key:"buildLabel",value:function(){var Kt=document.createElement("span");return Kt.classList.add("ql-picker-label"),Kt.innerHTML=Tt.default,Kt.tabIndex="0",Kt.setAttribute("role","button"),Kt.setAttribute("aria-expanded","false"),this.container.appendChild(Kt),Kt}},{key:"buildOptions",value:function(){var Kt=this,Yt=document.createElement("span");Yt.classList.add("ql-picker-options"),Yt.setAttribute("aria-hidden","true"),Yt.tabIndex="-1",Yt.id="ql-picker-options-"+jt,jt+=1,this.label.setAttribute("aria-controls",Yt.id),this.options=Yt,[].slice.call(this.select.options).forEach(function(er){var ar=Kt.buildItem(er);Yt.appendChild(ar),er.selected===!0&&Kt.selectItem(ar)}),this.container.appendChild(Yt)}},{key:"buildPicker",value:function(){var Kt=this;[].slice.call(this.select.attributes).forEach(function(Yt){Kt.container.setAttribute(Yt.name,Yt.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var Kt=this;this.close(),setTimeout(function(){return Kt.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(Kt){var Yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,er=this.container.querySelector(".ql-selected");if(Kt!==er&&(er!=null&&er.classList.remove("ql-selected"),Kt!=null&&(Kt.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(Kt.parentNode.children,Kt),Kt.hasAttribute("data-value")?this.label.setAttribute("data-value",Kt.getAttribute("data-value")):this.label.removeAttribute("data-value"),Kt.hasAttribute("data-label")?this.label.setAttribute("data-label",Kt.getAttribute("data-label")):this.label.removeAttribute("data-label"),Yt))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":ct(Event))==="object"){var ar=document.createEvent("Event");ar.initEvent("change",!0,!0),this.select.dispatchEvent(ar)}this.close()}}},{key:"update",value:function(){var Kt=void 0;if(this.select.selectedIndex>-1){var Yt=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];Kt=this.select.options[this.select.selectedIndex],this.selectItem(Yt)}else this.selectItem(null);var er=Kt!=null&&Kt!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",er)}}]),Ht}();ot.default=zt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(0),dt=Or(ct),ft=ut(5),St=Or(ft),kt=ut(4),Tt=Or(kt),Rt=ut(16),Ft=Or(Rt),jt=ut(25),Bt=Or(jt),zt=ut(24),Ht=Or(zt),Ut=ut(35),Kt=Or(Ut),Yt=ut(6),er=Or(Yt),ar=ut(22),ir=Or(ar),lr=ut(7),cr=Or(lr),vr=ut(55),xr=Or(vr),yr=ut(42),Sr=Or(yr),kr=ut(23),Pr=Or(kr);function Or(hr){return hr&&hr.__esModule?hr:{default:hr}}St.default.register({"blots/block":Tt.default,"blots/block/embed":kt.BlockEmbed,"blots/break":Ft.default,"blots/container":Bt.default,"blots/cursor":Ht.default,"blots/embed":Kt.default,"blots/inline":er.default,"blots/scroll":ir.default,"blots/text":cr.default,"modules/clipboard":xr.default,"modules/history":Sr.default,"modules/keyboard":Pr.default}),dt.default.register(Tt.default,Ft.default,Ht.default,er.default,ir.default,cr.default),ot.default=St.default},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(1),dt=function(){function ft(St){this.domNode=St,this.domNode[ct.DATA_KEY]={blot:this}}return Object.defineProperty(ft.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),ft.create=function(St){if(this.tagName==null)throw new ct.ParchmentError("Blot definition missing tagName");var kt;return Array.isArray(this.tagName)?(typeof St=="string"&&(St=St.toUpperCase(),parseInt(St).toString()===St&&(St=parseInt(St))),typeof St=="number"?kt=document.createElement(this.tagName[St-1]):this.tagName.indexOf(St)>-1?kt=document.createElement(St):kt=document.createElement(this.tagName[0])):kt=document.createElement(this.tagName),this.className&&kt.classList.add(this.className),kt},ft.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},ft.prototype.clone=function(){var St=this.domNode.cloneNode(!1);return ct.create(St)},ft.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[ct.DATA_KEY]},ft.prototype.deleteAt=function(St,kt){var Tt=this.isolate(St,kt);Tt.remove()},ft.prototype.formatAt=function(St,kt,Tt,Rt){var Ft=this.isolate(St,kt);if(ct.query(Tt,ct.Scope.BLOT)!=null&&Rt)Ft.wrap(Tt,Rt);else if(ct.query(Tt,ct.Scope.ATTRIBUTE)!=null){var jt=ct.create(this.statics.scope);Ft.wrap(jt),jt.format(Tt,Rt)}},ft.prototype.insertAt=function(St,kt,Tt){var Rt=Tt==null?ct.create("text",kt):ct.create(kt,Tt),Ft=this.split(St);this.parent.insertBefore(Rt,Ft)},ft.prototype.insertInto=function(St,kt){kt===void 0&&(kt=null),this.parent!=null&&this.parent.children.remove(this);var Tt=null;St.children.insertBefore(this,kt),kt!=null&&(Tt=kt.domNode),(this.domNode.parentNode!=St.domNode||this.domNode.nextSibling!=Tt)&&St.domNode.insertBefore(this.domNode,Tt),this.parent=St,this.attach()},ft.prototype.isolate=function(St,kt){var Tt=this.split(St);return Tt.split(kt),Tt},ft.prototype.length=function(){return 1},ft.prototype.offset=function(St){return St===void 0&&(St=this.parent),this.parent==null||this==St?0:this.parent.children.offset(this)+this.parent.offset(St)},ft.prototype.optimize=function(St){this.domNode[ct.DATA_KEY]!=null&&delete this.domNode[ct.DATA_KEY].mutations},ft.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},ft.prototype.replace=function(St){St.parent!=null&&(St.parent.insertBefore(this,St.next),St.remove())},ft.prototype.replaceWith=function(St,kt){var Tt=typeof St=="string"?ct.create(St,kt):St;return Tt.replace(this),Tt},ft.prototype.split=function(St,kt){return St===0?this:this.next},ft.prototype.update=function(St,kt){},ft.prototype.wrap=function(St,kt){var Tt=typeof St=="string"?ct.create(St,kt):St;return this.parent!=null&&this.parent.insertBefore(Tt,this.next),Tt.appendChild(this),Tt},ft.blotName="abstract",ft}();ot.default=dt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(12),dt=ut(32),ft=ut(33),St=ut(1),kt=function(){function Tt(Rt){this.attributes={},this.domNode=Rt,this.build()}return Tt.prototype.attribute=function(Rt,Ft){Ft?Rt.add(this.domNode,Ft)&&(Rt.value(this.domNode)!=null?this.attributes[Rt.attrName]=Rt:delete this.attributes[Rt.attrName]):(Rt.remove(this.domNode),delete this.attributes[Rt.attrName])},Tt.prototype.build=function(){var Rt=this;this.attributes={};var Ft=ct.default.keys(this.domNode),jt=dt.default.keys(this.domNode),Bt=ft.default.keys(this.domNode);Ft.concat(jt).concat(Bt).forEach(function(zt){var Ht=St.query(zt,St.Scope.ATTRIBUTE);Ht instanceof ct.default&&(Rt.attributes[Ht.attrName]=Ht)})},Tt.prototype.copy=function(Rt){var Ft=this;Object.keys(this.attributes).forEach(function(jt){var Bt=Ft.attributes[jt].value(Ft.domNode);Rt.format(jt,Bt)})},Tt.prototype.move=function(Rt){var Ft=this;this.copy(Rt),Object.keys(this.attributes).forEach(function(jt){Ft.attributes[jt].remove(Ft.domNode)}),this.attributes={}},Tt.prototype.values=function(){var Rt=this;return Object.keys(this.attributes).reduce(function(Ft,jt){return Ft[jt]=Rt.attributes[jt].value(Rt.domNode),Ft},{})},Tt}();ot.default=kt},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var Ft in Rt)Rt.hasOwnProperty(Ft)&&(Tt[Ft]=Rt[Ft])};return function(Tt,Rt){kt(Tt,Rt);function Ft(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(Ft.prototype=Rt.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(12);function ft(kt,Tt){var Rt=kt.getAttribute("class")||"";return Rt.split(/\s+/).filter(function(Ft){return Ft.indexOf(Tt+"-")===0})}var St=function(kt){ct(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(Rt){return(Rt.getAttribute("class")||"").split(/\s+/).map(function(Ft){return Ft.split("-").slice(0,-1).join("-")})},Tt.prototype.add=function(Rt,Ft){return this.canAdd(Rt,Ft)?(this.remove(Rt),Rt.classList.add(this.keyName+"-"+Ft),!0):!1},Tt.prototype.remove=function(Rt){var Ft=ft(Rt,this.keyName);Ft.forEach(function(jt){Rt.classList.remove(jt)}),Rt.classList.length===0&&Rt.removeAttribute("class")},Tt.prototype.value=function(Rt){var Ft=ft(Rt,this.keyName)[0]||"",jt=Ft.slice(this.keyName.length+1);return this.canAdd(Rt,jt)?jt:""},Tt}(dt.default);ot.default=St},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var Ft in Rt)Rt.hasOwnProperty(Ft)&&(Tt[Ft]=Rt[Ft])};return function(Tt,Rt){kt(Tt,Rt);function Ft(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(Ft.prototype=Rt.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(12);function ft(kt){var Tt=kt.split("-"),Rt=Tt.slice(1).map(function(Ft){return Ft[0].toUpperCase()+Ft.slice(1)}).join("");return Tt[0]+Rt}var St=function(kt){ct(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.keys=function(Rt){return(Rt.getAttribute("style")||"").split(";").map(function(Ft){var jt=Ft.split(":");return jt[0].trim()})},Tt.prototype.add=function(Rt,Ft){return this.canAdd(Rt,Ft)?(Rt.style[ft(this.keyName)]=Ft,!0):!1},Tt.prototype.remove=function(Rt){Rt.style[ft(this.keyName)]="",Rt.getAttribute("style")||Rt.removeAttribute("style")},Tt.prototype.value=function(Rt){var Ft=Rt.style[ft(this.keyName)];return this.canAdd(Rt,Ft)?Ft:""},Tt}(dt.default);ot.default=St},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function St(kt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var Ft=Tt[Rt];Ft.enumerable=Ft.enumerable||!1,Ft.configurable=!0,"value"in Ft&&(Ft.writable=!0),Object.defineProperty(kt,Ft.key,Ft)}}return function(kt,Tt,Rt){return Tt&&St(kt.prototype,Tt),Rt&&St(kt,Rt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){dt(this,St),this.quill=kt,this.options=Tt,this.modules={}}return ct(St,[{key:"init",value:function(){var Tt=this;Object.keys(this.options.modules).forEach(function(Rt){Tt.modules[Rt]==null&&Tt.addModule(Rt)})}},{key:"addModule",value:function(Tt){var Rt=this.quill.constructor.import("modules/"+Tt);return this.modules[Tt]=new Rt(this.quill,this.options.modules[Tt]||{}),this.modules[Tt]}}]),St}();ft.DEFAULTS={modules:{}},ft.themes={default:ft},ot.default=ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Ut(Kt,Yt){for(var er=0;er<Yt.length;er++){var ar=Yt[er];ar.enumerable=ar.enumerable||!1,ar.configurable=!0,"value"in ar&&(ar.writable=!0),Object.defineProperty(Kt,ar.key,ar)}}return function(Kt,Yt,er){return Yt&&Ut(Kt.prototype,Yt),er&&Ut(Kt,er),Kt}}(),dt=function Ut(Kt,Yt,er){Kt===null&&(Kt=Function.prototype);var ar=Object.getOwnPropertyDescriptor(Kt,Yt);if(ar===void 0){var ir=Object.getPrototypeOf(Kt);return ir===null?void 0:Ut(ir,Yt,er)}else{if("value"in ar)return ar.value;var lr=ar.get;return lr===void 0?void 0:lr.call(er)}},ft=ut(0),St=Rt(ft),kt=ut(7),Tt=Rt(kt);function Rt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function Ft(Ut,Kt){if(!(Ut instanceof Kt))throw new TypeError("Cannot call a class as a function")}function jt(Ut,Kt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:Ut}function Bt(Ut,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);Ut.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Kt):Ut.__proto__=Kt)}var zt="\uFEFF",Ht=function(Ut){Bt(Kt,Ut);function Kt(Yt){Ft(this,Kt);var er=jt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).call(this,Yt));return er.contentNode=document.createElement("span"),er.contentNode.setAttribute("contenteditable",!1),[].slice.call(er.domNode.childNodes).forEach(function(ar){er.contentNode.appendChild(ar)}),er.leftGuard=document.createTextNode(zt),er.rightGuard=document.createTextNode(zt),er.domNode.appendChild(er.leftGuard),er.domNode.appendChild(er.contentNode),er.domNode.appendChild(er.rightGuard),er}return ct(Kt,[{key:"index",value:function(er,ar){return er===this.leftGuard?0:er===this.rightGuard?1:dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"index",this).call(this,er,ar)}},{key:"restore",value:function(er){var ar=void 0,ir=void 0,lr=er.data.split(zt).join("");if(er===this.leftGuard)if(this.prev instanceof Tt.default){var cr=this.prev.length();this.prev.insertAt(cr,lr),ar={startNode:this.prev.domNode,startOffset:cr+lr.length}}else ir=document.createTextNode(lr),this.parent.insertBefore(St.default.create(ir),this),ar={startNode:ir,startOffset:lr.length};else er===this.rightGuard&&(this.next instanceof Tt.default?(this.next.insertAt(0,lr),ar={startNode:this.next.domNode,startOffset:lr.length}):(ir=document.createTextNode(lr),this.parent.insertBefore(St.default.create(ir),this.next),ar={startNode:ir,startOffset:lr.length}));return er.data=zt,ar}},{key:"update",value:function(er,ar){var ir=this;er.forEach(function(lr){if(lr.type==="characterData"&&(lr.target===ir.leftGuard||lr.target===ir.rightGuard)){var cr=ir.restore(lr.target);cr&&(ar.range=cr)}})}}]),Kt}(St.default.Embed);ot.default=Ht},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.AlignStyle=ot.AlignClass=ot.AlignAttribute=void 0;var ct=ut(0),dt=ft(ct);function ft(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}var St={scope:dt.default.Scope.BLOCK,whitelist:["right","center","justify"]},kt=new dt.default.Attributor.Attribute("align","align",St),Tt=new dt.default.Attributor.Class("align","ql-align",St),Rt=new dt.default.Attributor.Style("align","text-align",St);ot.AlignAttribute=kt,ot.AlignClass=Tt,ot.AlignStyle=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.BackgroundStyle=ot.BackgroundClass=void 0;var ct=ut(0),dt=St(ct),ft=ut(26);function St(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}var kt=new dt.default.Attributor.Class("background","ql-bg",{scope:dt.default.Scope.INLINE}),Tt=new ft.ColorAttributor("background","background-color",{scope:dt.default.Scope.INLINE});ot.BackgroundClass=kt,ot.BackgroundStyle=Tt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.DirectionStyle=ot.DirectionClass=ot.DirectionAttribute=void 0;var ct=ut(0),dt=ft(ct);function ft(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}var St={scope:dt.default.Scope.BLOCK,whitelist:["rtl"]},kt=new dt.default.Attributor.Attribute("direction","dir",St),Tt=new dt.default.Attributor.Class("direction","ql-direction",St),Rt=new dt.default.Attributor.Style("direction","direction",St);ot.DirectionAttribute=kt,ot.DirectionClass=Tt,ot.DirectionStyle=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.FontClass=ot.FontStyle=void 0;var ct=function(){function Ut(Kt,Yt){for(var er=0;er<Yt.length;er++){var ar=Yt[er];ar.enumerable=ar.enumerable||!1,ar.configurable=!0,"value"in ar&&(ar.writable=!0),Object.defineProperty(Kt,ar.key,ar)}}return function(Kt,Yt,er){return Yt&&Ut(Kt.prototype,Yt),er&&Ut(Kt,er),Kt}}(),dt=function Ut(Kt,Yt,er){Kt===null&&(Kt=Function.prototype);var ar=Object.getOwnPropertyDescriptor(Kt,Yt);if(ar===void 0){var ir=Object.getPrototypeOf(Kt);return ir===null?void 0:Ut(ir,Yt,er)}else{if("value"in ar)return ar.value;var lr=ar.get;return lr===void 0?void 0:lr.call(er)}},ft=ut(0),St=kt(ft);function kt(Ut){return Ut&&Ut.__esModule?Ut:{default:Ut}}function Tt(Ut,Kt){if(!(Ut instanceof Kt))throw new TypeError("Cannot call a class as a function")}function Rt(Ut,Kt){if(!Ut)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&(typeof Kt=="object"||typeof Kt=="function")?Kt:Ut}function Ft(Ut,Kt){if(typeof Kt!="function"&&Kt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);Ut.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:Ut,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ut,Kt):Ut.__proto__=Kt)}var jt={scope:St.default.Scope.INLINE,whitelist:["serif","monospace"]},Bt=new St.default.Attributor.Class("font","ql-font",jt),zt=function(Ut){Ft(Kt,Ut);function Kt(){return Tt(this,Kt),Rt(this,(Kt.__proto__||Object.getPrototypeOf(Kt)).apply(this,arguments))}return ct(Kt,[{key:"value",value:function(er){return dt(Kt.prototype.__proto__||Object.getPrototypeOf(Kt.prototype),"value",this).call(this,er).replace(/["']/g,"")}}]),Kt}(St.default.Attributor.Style),Ht=new zt("font","font-family",jt);ot.FontStyle=Ht,ot.FontClass=Bt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.SizeStyle=ot.SizeClass=void 0;var ct=ut(0),dt=ft(ct);function ft(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}}var St=new dt.default.Attributor.Class("size","ql-size",{scope:dt.default.Scope.INLINE,whitelist:["small","large","huge"]}),kt=new dt.default.Attributor.Style("size","font-size",{scope:dt.default.Scope.INLINE,whitelist:["10px","18px","32px"]});ot.SizeClass=St,ot.SizeStyle=kt},function(et,ot,ut){et.exports={align:{"":ut(76),center:ut(77),right:ut(78),justify:ut(79)},background:ut(80),blockquote:ut(81),bold:ut(82),clean:ut(83),code:ut(58),"code-block":ut(58),color:ut(84),direction:{"":ut(85),rtl:ut(86)},float:{center:ut(87),full:ut(88),left:ut(89),right:ut(90)},formula:ut(91),header:{1:ut(92),2:ut(93)},italic:ut(94),image:ut(95),indent:{"+1":ut(96),"-1":ut(97)},link:ut(98),list:{ordered:ut(99),bullet:ut(100),check:ut(101)},script:{sub:ut(102),super:ut(103)},strike:ut(104),underline:ut(105),video:ut(106)}},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.getLastChangeIndex=ot.default=void 0;var ct=function(){function Yt(er,ar){for(var ir=0;ir<ar.length;ir++){var lr=ar[ir];lr.enumerable=lr.enumerable||!1,lr.configurable=!0,"value"in lr&&(lr.writable=!0),Object.defineProperty(er,lr.key,lr)}}return function(er,ar,ir){return ar&&Yt(er.prototype,ar),ir&&Yt(er,ir),er}}(),dt=ut(0),ft=Ft(dt),St=ut(5),kt=Ft(St),Tt=ut(9),Rt=Ft(Tt);function Ft(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function jt(Yt,er){if(!(Yt instanceof er))throw new TypeError("Cannot call a class as a function")}function Bt(Yt,er){if(!Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return er&&(typeof er=="object"||typeof er=="function")?er:Yt}function zt(Yt,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof er);Yt.prototype=Object.create(er&&er.prototype,{constructor:{value:Yt,enumerable:!1,writable:!0,configurable:!0}}),er&&(Object.setPrototypeOf?Object.setPrototypeOf(Yt,er):Yt.__proto__=er)}var Ht=function(Yt){zt(er,Yt);function er(ar,ir){jt(this,er);var lr=Bt(this,(er.__proto__||Object.getPrototypeOf(er)).call(this,ar,ir));return lr.lastRecorded=0,lr.ignoreChange=!1,lr.clear(),lr.quill.on(kt.default.events.EDITOR_CHANGE,function(cr,vr,xr,yr){cr!==kt.default.events.TEXT_CHANGE||lr.ignoreChange||(!lr.options.userOnly||yr===kt.default.sources.USER?lr.record(vr,xr):lr.transform(vr))}),lr.quill.keyboard.addBinding({key:"Z",shortKey:!0},lr.undo.bind(lr)),lr.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},lr.redo.bind(lr)),/Win/i.test(navigator.platform)&&lr.quill.keyboard.addBinding({key:"Y",shortKey:!0},lr.redo.bind(lr)),lr}return ct(er,[{key:"change",value:function(ir,lr){if(this.stack[ir].length!==0){var cr=this.stack[ir].pop();this.stack[lr].push(cr),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(cr[ir],kt.default.sources.USER),this.ignoreChange=!1;var vr=Kt(cr[ir]);this.quill.setSelection(vr)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(ir,lr){if(ir.ops.length!==0){this.stack.redo=[];var cr=this.quill.getContents().diff(lr),vr=Date.now();if(this.lastRecorded+this.options.delay>vr&&this.stack.undo.length>0){var xr=this.stack.undo.pop();cr=cr.compose(xr.undo),ir=xr.redo.compose(ir)}else this.lastRecorded=vr;this.stack.undo.push({redo:ir,undo:cr}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(ir){this.stack.undo.forEach(function(lr){lr.undo=ir.transform(lr.undo,!0),lr.redo=ir.transform(lr.redo,!0)}),this.stack.redo.forEach(function(lr){lr.undo=ir.transform(lr.undo,!0),lr.redo=ir.transform(lr.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),er}(Rt.default);Ht.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function Ut(Yt){var er=Yt.ops[Yt.ops.length-1];return er==null?!1:er.insert!=null?typeof er.insert=="string"&&er.insert.endsWith(`
`):er.attributes!=null?Object.keys(er.attributes).some(function(ar){return ft.default.query(ar,ft.default.Scope.BLOCK)!=null}):!1}function Kt(Yt){var er=Yt.reduce(function(ir,lr){return ir+=lr.delete||0,ir},0),ar=Yt.length()-er;return Ut(Yt)&&(ar-=1),ar}ot.default=Ht,ot.getLastChangeIndex=Kt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BaseTooltip=void 0;var ct=function(){function Lr(qr,sn){for(var an=0;an<sn.length;an++){var tn=sn[an];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(qr,tn.key,tn)}}return function(qr,sn,an){return sn&&Lr(qr.prototype,sn),an&&Lr(qr,an),qr}}(),dt=function Lr(qr,sn,an){qr===null&&(qr=Function.prototype);var tn=Object.getOwnPropertyDescriptor(qr,sn);if(tn===void 0){var ln=Object.getPrototypeOf(qr);return ln===null?void 0:Lr(ln,sn,an)}else{if("value"in tn)return tn.value;var yn=tn.get;return yn===void 0?void 0:yn.call(an)}},ft=ut(3),St=vr(ft),kt=ut(2),Tt=vr(kt),Rt=ut(8),Ft=vr(Rt),jt=ut(23),Bt=vr(jt),zt=ut(34),Ht=vr(zt),Ut=ut(59),Kt=vr(Ut),Yt=ut(60),er=vr(Yt),ar=ut(28),ir=vr(ar),lr=ut(61),cr=vr(lr);function vr(Lr){return Lr&&Lr.__esModule?Lr:{default:Lr}}function xr(Lr,qr){if(!(Lr instanceof qr))throw new TypeError("Cannot call a class as a function")}function yr(Lr,qr){if(!Lr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return qr&&(typeof qr=="object"||typeof qr=="function")?qr:Lr}function Sr(Lr,qr){if(typeof qr!="function"&&qr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof qr);Lr.prototype=Object.create(qr&&qr.prototype,{constructor:{value:Lr,enumerable:!1,writable:!0,configurable:!0}}),qr&&(Object.setPrototypeOf?Object.setPrototypeOf(Lr,qr):Lr.__proto__=qr)}var kr=[!1,"center","right","justify"],Pr=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Or=[!1,"serif","monospace"],hr=["1","2","3",!1],Tr=["small",!1,"large","huge"],mr=function(Lr){Sr(qr,Lr);function qr(sn,an){xr(this,qr);var tn=yr(this,(qr.__proto__||Object.getPrototypeOf(qr)).call(this,sn,an)),ln=function yn(pn){if(!document.body.contains(sn.root))return document.body.removeEventListener("click",yn);tn.tooltip!=null&&!tn.tooltip.root.contains(pn.target)&&document.activeElement!==tn.tooltip.textbox&&!tn.quill.hasFocus()&&tn.tooltip.hide(),tn.pickers!=null&&tn.pickers.forEach(function(En){En.container.contains(pn.target)||En.close()})};return sn.emitter.listenDOM("click",document.body,ln),tn}return ct(qr,[{key:"addModule",value:function(an){var tn=dt(qr.prototype.__proto__||Object.getPrototypeOf(qr.prototype),"addModule",this).call(this,an);return an==="toolbar"&&this.extendToolbar(tn),tn}},{key:"buildButtons",value:function(an,tn){an.forEach(function(ln){var yn=ln.getAttribute("class")||"";yn.split(/\s+/).forEach(function(pn){if(pn.startsWith("ql-")&&(pn=pn.slice(3),tn[pn]!=null))if(pn==="direction")ln.innerHTML=tn[pn][""]+tn[pn].rtl;else if(typeof tn[pn]=="string")ln.innerHTML=tn[pn];else{var En=ln.value||"";En!=null&&tn[pn][En]&&(ln.innerHTML=tn[pn][En])}})})}},{key:"buildPickers",value:function(an,tn){var ln=this;this.pickers=an.map(function(pn){if(pn.classList.contains("ql-align"))return pn.querySelector("option")==null&&Cr(pn,kr),new er.default(pn,tn.align);if(pn.classList.contains("ql-background")||pn.classList.contains("ql-color")){var En=pn.classList.contains("ql-background")?"background":"color";return pn.querySelector("option")==null&&Cr(pn,Pr,En==="background"?"#ffffff":"#000000"),new Kt.default(pn,tn[En])}else return pn.querySelector("option")==null&&(pn.classList.contains("ql-font")?Cr(pn,Or):pn.classList.contains("ql-header")?Cr(pn,hr):pn.classList.contains("ql-size")&&Cr(pn,Tr)),new ir.default(pn)});var yn=function(){ln.pickers.forEach(function(En){En.update()})};this.quill.on(Ft.default.events.EDITOR_CHANGE,yn)}}]),qr}(Ht.default);mr.DEFAULTS=(0,St.default)(!0,{},Ht.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var qr=this,sn=this.container.querySelector("input.ql-image[type=file]");sn==null&&(sn=document.createElement("input"),sn.setAttribute("type","file"),sn.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),sn.classList.add("ql-image"),sn.addEventListener("change",function(){if(sn.files!=null&&sn.files[0]!=null){var an=new FileReader;an.onload=function(tn){var ln=qr.quill.getSelection(!0);qr.quill.updateContents(new Tt.default().retain(ln.index).delete(ln.length).insert({image:tn.target.result}),Ft.default.sources.USER),qr.quill.setSelection(ln.index+1,Ft.default.sources.SILENT),sn.value=""},an.readAsDataURL(sn.files[0])}}),this.container.appendChild(sn)),sn.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Er=function(Lr){Sr(qr,Lr);function qr(sn,an){xr(this,qr);var tn=yr(this,(qr.__proto__||Object.getPrototypeOf(qr)).call(this,sn,an));return tn.textbox=tn.root.querySelector('input[type="text"]'),tn.listen(),tn}return ct(qr,[{key:"listen",value:function(){var an=this;this.textbox.addEventListener("keydown",function(tn){Bt.default.match(tn,"enter")?(an.save(),tn.preventDefault()):Bt.default.match(tn,"escape")&&(an.cancel(),tn.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var an=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),tn!=null?this.textbox.value=tn:an!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+an)||""),this.root.setAttribute("data-mode",an)}},{key:"restoreFocus",value:function(){var an=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=an}},{key:"save",value:function(){var an=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var tn=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",an,Ft.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",an,Ft.default.sources.USER)),this.quill.root.scrollTop=tn;break}case"video":an=Dr(an);case"formula":{if(!an)break;var ln=this.quill.getSelection(!0);if(ln!=null){var yn=ln.index+ln.length;this.quill.insertEmbed(yn,this.root.getAttribute("data-mode"),an,Ft.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(yn+1," ",Ft.default.sources.USER),this.quill.setSelection(yn+2,Ft.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),qr}(cr.default);function Dr(Lr){var qr=Lr.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||Lr.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return qr?(qr[1]||"https")+"://www.youtube.com/embed/"+qr[2]+"?showinfo=0":(qr=Lr.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(qr[1]||"https")+"://player.vimeo.com/video/"+qr[2]+"/":Lr}function Cr(Lr,qr){var sn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;qr.forEach(function(an){var tn=document.createElement("option");an===sn?tn.setAttribute("selected","selected"):tn.setAttribute("value",an),Lr.appendChild(tn)})}ot.BaseTooltip=Er,ot.default=mr},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function dt(){this.head=this.tail=null,this.length=0}return dt.prototype.append=function(){for(var ft=[],St=0;St<arguments.length;St++)ft[St]=arguments[St];this.insertBefore(ft[0],null),ft.length>1&&this.append.apply(this,ft.slice(1))},dt.prototype.contains=function(ft){for(var St,kt=this.iterator();St=kt();)if(St===ft)return!0;return!1},dt.prototype.insertBefore=function(ft,St){ft&&(ft.next=St,St!=null?(ft.prev=St.prev,St.prev!=null&&(St.prev.next=ft),St.prev=ft,St===this.head&&(this.head=ft)):this.tail!=null?(this.tail.next=ft,ft.prev=this.tail,this.tail=ft):(ft.prev=null,this.head=this.tail=ft),this.length+=1)},dt.prototype.offset=function(ft){for(var St=0,kt=this.head;kt!=null;){if(kt===ft)return St;St+=kt.length(),kt=kt.next}return-1},dt.prototype.remove=function(ft){this.contains(ft)&&(ft.prev!=null&&(ft.prev.next=ft.next),ft.next!=null&&(ft.next.prev=ft.prev),ft===this.head&&(this.head=ft.next),ft===this.tail&&(this.tail=ft.prev),this.length-=1)},dt.prototype.iterator=function(ft){return ft===void 0&&(ft=this.head),function(){var St=ft;return ft!=null&&(ft=ft.next),St}},dt.prototype.find=function(ft,St){St===void 0&&(St=!1);for(var kt,Tt=this.iterator();kt=Tt();){var Rt=kt.length();if(ft<Rt||St&&ft===Rt&&(kt.next==null||kt.next.length()!==0))return[kt,ft];ft-=Rt}return[null,0]},dt.prototype.forEach=function(ft){for(var St,kt=this.iterator();St=kt();)ft(St)},dt.prototype.forEachAt=function(ft,St,kt){if(!(St<=0))for(var Tt=this.find(ft),Rt=Tt[0],Ft=Tt[1],jt,Bt=ft-Ft,zt=this.iterator(Rt);(jt=zt())&&Bt<ft+St;){var Ht=jt.length();ft>Bt?kt(jt,ft-Bt,Math.min(St,Bt+Ht-ft)):kt(jt,0,Math.min(Ht,ft+St-Bt)),Bt+=Ht}},dt.prototype.map=function(ft){return this.reduce(function(St,kt){return St.push(ft(kt)),St},[])},dt.prototype.reduce=function(ft,St){for(var kt,Tt=this.iterator();kt=Tt();)St=ft(St,kt);return St},dt}();ot.default=ct},function(et,ot,ut){var ct=this&&this.__extends||function(){var Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ft,jt){Ft.__proto__=jt}||function(Ft,jt){for(var Bt in jt)jt.hasOwnProperty(Bt)&&(Ft[Bt]=jt[Bt])};return function(Ft,jt){Rt(Ft,jt);function Bt(){this.constructor=Ft}Ft.prototype=jt===null?Object.create(jt):(Bt.prototype=jt.prototype,new Bt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(17),ft=ut(1),St={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},kt=100,Tt=function(Rt){ct(Ft,Rt);function Ft(jt){var Bt=Rt.call(this,jt)||this;return Bt.scroll=Bt,Bt.observer=new MutationObserver(function(zt){Bt.update(zt)}),Bt.observer.observe(Bt.domNode,St),Bt.attach(),Bt}return Ft.prototype.detach=function(){Rt.prototype.detach.call(this),this.observer.disconnect()},Ft.prototype.deleteAt=function(jt,Bt){this.update(),jt===0&&Bt===this.length()?this.children.forEach(function(zt){zt.remove()}):Rt.prototype.deleteAt.call(this,jt,Bt)},Ft.prototype.formatAt=function(jt,Bt,zt,Ht){this.update(),Rt.prototype.formatAt.call(this,jt,Bt,zt,Ht)},Ft.prototype.insertAt=function(jt,Bt,zt){this.update(),Rt.prototype.insertAt.call(this,jt,Bt,zt)},Ft.prototype.optimize=function(jt,Bt){var zt=this;jt===void 0&&(jt=[]),Bt===void 0&&(Bt={}),Rt.prototype.optimize.call(this,Bt);for(var Ht=[].slice.call(this.observer.takeRecords());Ht.length>0;)jt.push(Ht.pop());for(var Ut=function(ar,ir){ir===void 0&&(ir=!0),!(ar==null||ar===zt)&&ar.domNode.parentNode!=null&&(ar.domNode[ft.DATA_KEY].mutations==null&&(ar.domNode[ft.DATA_KEY].mutations=[]),ir&&Ut(ar.parent))},Kt=function(ar){ar.domNode[ft.DATA_KEY]==null||ar.domNode[ft.DATA_KEY].mutations==null||(ar instanceof dt.default&&ar.children.forEach(Kt),ar.optimize(Bt))},Yt=jt,er=0;Yt.length>0;er+=1){if(er>=kt)throw new Error("[Parchment] Maximum optimize iterations reached");for(Yt.forEach(function(ar){var ir=ft.find(ar.target,!0);ir!=null&&(ir.domNode===ar.target&&(ar.type==="childList"?(Ut(ft.find(ar.previousSibling,!1)),[].forEach.call(ar.addedNodes,function(lr){var cr=ft.find(lr,!1);Ut(cr,!1),cr instanceof dt.default&&cr.children.forEach(function(vr){Ut(vr,!1)})})):ar.type==="attributes"&&Ut(ir.prev)),Ut(ir))}),this.children.forEach(Kt),Yt=[].slice.call(this.observer.takeRecords()),Ht=Yt.slice();Ht.length>0;)jt.push(Ht.pop())}},Ft.prototype.update=function(jt,Bt){var zt=this;Bt===void 0&&(Bt={}),jt=jt||this.observer.takeRecords(),jt.map(function(Ht){var Ut=ft.find(Ht.target,!0);return Ut==null?null:Ut.domNode[ft.DATA_KEY].mutations==null?(Ut.domNode[ft.DATA_KEY].mutations=[Ht],Ut):(Ut.domNode[ft.DATA_KEY].mutations.push(Ht),null)}).forEach(function(Ht){Ht==null||Ht===zt||Ht.domNode[ft.DATA_KEY]==null||Ht.update(Ht.domNode[ft.DATA_KEY].mutations||[],Bt)}),this.domNode[ft.DATA_KEY].mutations!=null&&Rt.prototype.update.call(this,this.domNode[ft.DATA_KEY].mutations,Bt),this.optimize(jt,Bt)},Ft.blotName="scroll",Ft.defaultChild="block",Ft.scope=ft.Scope.BLOCK_BLOT,Ft.tagName="DIV",Ft}(dt.default);ot.default=Tt},function(et,ot,ut){var ct=this&&this.__extends||function(){var Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Ft){Rt.__proto__=Ft}||function(Rt,Ft){for(var jt in Ft)Ft.hasOwnProperty(jt)&&(Rt[jt]=Ft[jt])};return function(Rt,Ft){Tt(Rt,Ft);function jt(){this.constructor=Rt}Rt.prototype=Ft===null?Object.create(Ft):(jt.prototype=Ft.prototype,new jt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(18),ft=ut(1);function St(Tt,Rt){if(Object.keys(Tt).length!==Object.keys(Rt).length)return!1;for(var Ft in Tt)if(Tt[Ft]!==Rt[Ft])return!1;return!0}var kt=function(Tt){ct(Rt,Tt);function Rt(){return Tt!==null&&Tt.apply(this,arguments)||this}return Rt.formats=function(Ft){if(Ft.tagName!==Rt.tagName)return Tt.formats.call(this,Ft)},Rt.prototype.format=function(Ft,jt){var Bt=this;Ft===this.statics.blotName&&!jt?(this.children.forEach(function(zt){zt instanceof dt.default||(zt=zt.wrap(Rt.blotName,!0)),Bt.attributes.copy(zt)}),this.unwrap()):Tt.prototype.format.call(this,Ft,jt)},Rt.prototype.formatAt=function(Ft,jt,Bt,zt){if(this.formats()[Bt]!=null||ft.query(Bt,ft.Scope.ATTRIBUTE)){var Ht=this.isolate(Ft,jt);Ht.format(Bt,zt)}else Tt.prototype.formatAt.call(this,Ft,jt,Bt,zt)},Rt.prototype.optimize=function(Ft){Tt.prototype.optimize.call(this,Ft);var jt=this.formats();if(Object.keys(jt).length===0)return this.unwrap();var Bt=this.next;Bt instanceof Rt&&Bt.prev===this&&St(jt,Bt.formats())&&(Bt.moveChildren(this),Bt.remove())},Rt.blotName="inline",Rt.scope=ft.Scope.INLINE_BLOT,Rt.tagName="SPAN",Rt}(dt.default);ot.default=kt},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var Ft in Rt)Rt.hasOwnProperty(Ft)&&(Tt[Ft]=Rt[Ft])};return function(Tt,Rt){kt(Tt,Rt);function Ft(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(Ft.prototype=Rt.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(18),ft=ut(1),St=function(kt){ct(Tt,kt);function Tt(){return kt!==null&&kt.apply(this,arguments)||this}return Tt.formats=function(Rt){var Ft=ft.query(Tt.blotName).tagName;if(Rt.tagName!==Ft)return kt.formats.call(this,Rt)},Tt.prototype.format=function(Rt,Ft){ft.query(Rt,ft.Scope.BLOCK)!=null&&(Rt===this.statics.blotName&&!Ft?this.replaceWith(Tt.blotName):kt.prototype.format.call(this,Rt,Ft))},Tt.prototype.formatAt=function(Rt,Ft,jt,Bt){ft.query(jt,ft.Scope.BLOCK)!=null?this.format(jt,Bt):kt.prototype.formatAt.call(this,Rt,Ft,jt,Bt)},Tt.prototype.insertAt=function(Rt,Ft,jt){if(jt==null||ft.query(Ft,ft.Scope.INLINE)!=null)kt.prototype.insertAt.call(this,Rt,Ft,jt);else{var Bt=this.split(Rt),zt=ft.create(Ft,jt);Bt.parent.insertBefore(zt,Bt)}},Tt.prototype.update=function(Rt,Ft){navigator.userAgent.match(/Trident/)?this.build():kt.prototype.update.call(this,Rt,Ft)},Tt.blotName="block",Tt.scope=ft.Scope.BLOCK_BLOT,Tt.tagName="P",Tt}(dt.default);ot.default=St},function(et,ot,ut){var ct=this&&this.__extends||function(){var St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(kt,Tt){kt.__proto__=Tt}||function(kt,Tt){for(var Rt in Tt)Tt.hasOwnProperty(Rt)&&(kt[Rt]=Tt[Rt])};return function(kt,Tt){St(kt,Tt);function Rt(){this.constructor=kt}kt.prototype=Tt===null?Object.create(Tt):(Rt.prototype=Tt.prototype,new Rt)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(19),ft=function(St){ct(kt,St);function kt(){return St!==null&&St.apply(this,arguments)||this}return kt.formats=function(Tt){},kt.prototype.format=function(Tt,Rt){St.prototype.formatAt.call(this,0,this.length(),Tt,Rt)},kt.prototype.formatAt=function(Tt,Rt,Ft,jt){Tt===0&&Rt===this.length()?this.format(Ft,jt):St.prototype.formatAt.call(this,Tt,Rt,Ft,jt)},kt.prototype.formats=function(){return this.statics.formats(this.domNode)},kt}(dt.default);ot.default=ft},function(et,ot,ut){var ct=this&&this.__extends||function(){var kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Tt,Rt){Tt.__proto__=Rt}||function(Tt,Rt){for(var Ft in Rt)Rt.hasOwnProperty(Ft)&&(Tt[Ft]=Rt[Ft])};return function(Tt,Rt){kt(Tt,Rt);function Ft(){this.constructor=Tt}Tt.prototype=Rt===null?Object.create(Rt):(Ft.prototype=Rt.prototype,new Ft)}}();Object.defineProperty(ot,"__esModule",{value:!0});var dt=ut(19),ft=ut(1),St=function(kt){ct(Tt,kt);function Tt(Rt){var Ft=kt.call(this,Rt)||this;return Ft.text=Ft.statics.value(Ft.domNode),Ft}return Tt.create=function(Rt){return document.createTextNode(Rt)},Tt.value=function(Rt){var Ft=Rt.data;return Ft.normalize&&(Ft=Ft.normalize()),Ft},Tt.prototype.deleteAt=function(Rt,Ft){this.domNode.data=this.text=this.text.slice(0,Rt)+this.text.slice(Rt+Ft)},Tt.prototype.index=function(Rt,Ft){return this.domNode===Rt?Ft:-1},Tt.prototype.insertAt=function(Rt,Ft,jt){jt==null?(this.text=this.text.slice(0,Rt)+Ft+this.text.slice(Rt),this.domNode.data=this.text):kt.prototype.insertAt.call(this,Rt,Ft,jt)},Tt.prototype.length=function(){return this.text.length},Tt.prototype.optimize=function(Rt){kt.prototype.optimize.call(this,Rt),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Tt&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},Tt.prototype.position=function(Rt,Ft){return[this.domNode,Rt]},Tt.prototype.split=function(Rt,Ft){if(Ft===void 0&&(Ft=!1),!Ft){if(Rt===0)return this;if(Rt===this.length())return this.next}var jt=ft.create(this.domNode.splitText(Rt));return this.parent.insertBefore(jt,this.next),this.text=this.statics.value(this.domNode),jt},Tt.prototype.update=function(Rt,Ft){var jt=this;Rt.some(function(Bt){return Bt.type==="characterData"&&Bt.target===jt.domNode})&&(this.text=this.statics.value(this.domNode))},Tt.prototype.value=function(){return this.text},Tt.blotName="text",Tt.scope=ft.Scope.INLINE_BLOT,Tt}(dt.default);ot.default=St},function(et,ot,ut){var ct=document.createElement("div");if(ct.classList.toggle("test-class",!1),ct.classList.contains("test-class")){var dt=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(ft,St){return arguments.length>1&&!this.contains(ft)==!St?St:dt.call(this,ft)}}String.prototype.startsWith||(String.prototype.startsWith=function(ft,St){return St=St||0,this.substr(St,ft.length)===ft}),String.prototype.endsWith||(String.prototype.endsWith=function(ft,St){var kt=this.toString();(typeof St!="number"||!isFinite(St)||Math.floor(St)!==St||St>kt.length)&&(St=kt.length),St-=ft.length;var Tt=kt.indexOf(ft,St);return Tt!==-1&&Tt===St}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(St){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof St!="function")throw new TypeError("predicate must be a function");for(var kt=Object(this),Tt=kt.length>>>0,Rt=arguments[1],Ft,jt=0;jt<Tt;jt++)if(Ft=kt[jt],St.call(Rt,Ft,jt,kt))return Ft}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(et,ot){var ut=-1,ct=1,dt=0;function ft(er,ar,ir){if(er==ar)return er?[[dt,er]]:[];(ir<0||er.length<ir)&&(ir=null);var lr=Rt(er,ar),cr=er.substring(0,lr);er=er.substring(lr),ar=ar.substring(lr),lr=Ft(er,ar);var vr=er.substring(er.length-lr);er=er.substring(0,er.length-lr),ar=ar.substring(0,ar.length-lr);var xr=St(er,ar);return cr&&xr.unshift([dt,cr]),vr&&xr.push([dt,vr]),Bt(xr),ir!=null&&(xr=Ut(xr,ir)),xr=Kt(xr),xr}function St(er,ar){var ir;if(!er)return[[ct,ar]];if(!ar)return[[ut,er]];var lr=er.length>ar.length?er:ar,cr=er.length>ar.length?ar:er,vr=lr.indexOf(cr);if(vr!=-1)return ir=[[ct,lr.substring(0,vr)],[dt,cr],[ct,lr.substring(vr+cr.length)]],er.length>ar.length&&(ir[0][0]=ir[2][0]=ut),ir;if(cr.length==1)return[[ut,er],[ct,ar]];var xr=jt(er,ar);if(xr){var yr=xr[0],Sr=xr[1],kr=xr[2],Pr=xr[3],Or=xr[4],hr=ft(yr,kr),Tr=ft(Sr,Pr);return hr.concat([[dt,Or]],Tr)}return kt(er,ar)}function kt(er,ar){for(var ir=er.length,lr=ar.length,cr=Math.ceil((ir+lr)/2),vr=cr,xr=2*cr,yr=new Array(xr),Sr=new Array(xr),kr=0;kr<xr;kr++)yr[kr]=-1,Sr[kr]=-1;yr[vr+1]=0,Sr[vr+1]=0;for(var Pr=ir-lr,Or=Pr%2!=0,hr=0,Tr=0,mr=0,Er=0,Dr=0;Dr<cr;Dr++){for(var Cr=-Dr+hr;Cr<=Dr-Tr;Cr+=2){var Lr=vr+Cr,qr;Cr==-Dr||Cr!=Dr&&yr[Lr-1]<yr[Lr+1]?qr=yr[Lr+1]:qr=yr[Lr-1]+1;for(var sn=qr-Cr;qr<ir&&sn<lr&&er.charAt(qr)==ar.charAt(sn);)qr++,sn++;if(yr[Lr]=qr,qr>ir)Tr+=2;else if(sn>lr)hr+=2;else if(Or){var an=vr+Pr-Cr;if(an>=0&&an<xr&&Sr[an]!=-1){var tn=ir-Sr[an];if(qr>=tn)return Tt(er,ar,qr,sn)}}}for(var ln=-Dr+mr;ln<=Dr-Er;ln+=2){var an=vr+ln,tn;ln==-Dr||ln!=Dr&&Sr[an-1]<Sr[an+1]?tn=Sr[an+1]:tn=Sr[an-1]+1;for(var yn=tn-ln;tn<ir&&yn<lr&&er.charAt(ir-tn-1)==ar.charAt(lr-yn-1);)tn++,yn++;if(Sr[an]=tn,tn>ir)Er+=2;else if(yn>lr)mr+=2;else if(!Or){var Lr=vr+Pr-ln;if(Lr>=0&&Lr<xr&&yr[Lr]!=-1){var qr=yr[Lr],sn=vr+qr-Lr;if(tn=ir-tn,qr>=tn)return Tt(er,ar,qr,sn)}}}}return[[ut,er],[ct,ar]]}function Tt(er,ar,ir,lr){var cr=er.substring(0,ir),vr=ar.substring(0,lr),xr=er.substring(ir),yr=ar.substring(lr),Sr=ft(cr,vr),kr=ft(xr,yr);return Sr.concat(kr)}function Rt(er,ar){if(!er||!ar||er.charAt(0)!=ar.charAt(0))return 0;for(var ir=0,lr=Math.min(er.length,ar.length),cr=lr,vr=0;ir<cr;)er.substring(vr,cr)==ar.substring(vr,cr)?(ir=cr,vr=ir):lr=cr,cr=Math.floor((lr-ir)/2+ir);return cr}function Ft(er,ar){if(!er||!ar||er.charAt(er.length-1)!=ar.charAt(ar.length-1))return 0;for(var ir=0,lr=Math.min(er.length,ar.length),cr=lr,vr=0;ir<cr;)er.substring(er.length-cr,er.length-vr)==ar.substring(ar.length-cr,ar.length-vr)?(ir=cr,vr=ir):lr=cr,cr=Math.floor((lr-ir)/2+ir);return cr}function jt(er,ar){var ir=er.length>ar.length?er:ar,lr=er.length>ar.length?ar:er;if(ir.length<4||lr.length*2<ir.length)return null;function cr(Tr,mr,Er){for(var Dr=Tr.substring(Er,Er+Math.floor(Tr.length/4)),Cr=-1,Lr="",qr,sn,an,tn;(Cr=mr.indexOf(Dr,Cr+1))!=-1;){var ln=Rt(Tr.substring(Er),mr.substring(Cr)),yn=Ft(Tr.substring(0,Er),mr.substring(0,Cr));Lr.length<yn+ln&&(Lr=mr.substring(Cr-yn,Cr)+mr.substring(Cr,Cr+ln),qr=Tr.substring(0,Er-yn),sn=Tr.substring(Er+ln),an=mr.substring(0,Cr-yn),tn=mr.substring(Cr+ln))}return Lr.length*2>=Tr.length?[qr,sn,an,tn,Lr]:null}var vr=cr(ir,lr,Math.ceil(ir.length/4)),xr=cr(ir,lr,Math.ceil(ir.length/2)),yr;if(!vr&&!xr)return null;xr?vr?yr=vr[4].length>xr[4].length?vr:xr:yr=xr:yr=vr;var Sr,kr,Pr,Or;er.length>ar.length?(Sr=yr[0],kr=yr[1],Pr=yr[2],Or=yr[3]):(Pr=yr[0],Or=yr[1],Sr=yr[2],kr=yr[3]);var hr=yr[4];return[Sr,kr,Pr,Or,hr]}function Bt(er){er.push([dt,""]);for(var ar=0,ir=0,lr=0,cr="",vr="",xr;ar<er.length;)switch(er[ar][0]){case ct:lr++,vr+=er[ar][1],ar++;break;case ut:ir++,cr+=er[ar][1],ar++;break;case dt:ir+lr>1?(ir!==0&&lr!==0&&(xr=Rt(vr,cr),xr!==0&&(ar-ir-lr>0&&er[ar-ir-lr-1][0]==dt?er[ar-ir-lr-1][1]+=vr.substring(0,xr):(er.splice(0,0,[dt,vr.substring(0,xr)]),ar++),vr=vr.substring(xr),cr=cr.substring(xr)),xr=Ft(vr,cr),xr!==0&&(er[ar][1]=vr.substring(vr.length-xr)+er[ar][1],vr=vr.substring(0,vr.length-xr),cr=cr.substring(0,cr.length-xr))),ir===0?er.splice(ar-lr,ir+lr,[ct,vr]):lr===0?er.splice(ar-ir,ir+lr,[ut,cr]):er.splice(ar-ir-lr,ir+lr,[ut,cr],[ct,vr]),ar=ar-ir-lr+(ir?1:0)+(lr?1:0)+1):ar!==0&&er[ar-1][0]==dt?(er[ar-1][1]+=er[ar][1],er.splice(ar,1)):ar++,lr=0,ir=0,cr="",vr="";break}er[er.length-1][1]===""&&er.pop();var yr=!1;for(ar=1;ar<er.length-1;)er[ar-1][0]==dt&&er[ar+1][0]==dt&&(er[ar][1].substring(er[ar][1].length-er[ar-1][1].length)==er[ar-1][1]?(er[ar][1]=er[ar-1][1]+er[ar][1].substring(0,er[ar][1].length-er[ar-1][1].length),er[ar+1][1]=er[ar-1][1]+er[ar+1][1],er.splice(ar-1,1),yr=!0):er[ar][1].substring(0,er[ar+1][1].length)==er[ar+1][1]&&(er[ar-1][1]+=er[ar+1][1],er[ar][1]=er[ar][1].substring(er[ar+1][1].length)+er[ar+1][1],er.splice(ar+1,1),yr=!0)),ar++;yr&&Bt(er)}var zt=ft;zt.INSERT=ct,zt.DELETE=ut,zt.EQUAL=dt,et.exports=zt;function Ht(er,ar){if(ar===0)return[dt,er];for(var ir=0,lr=0;lr<er.length;lr++){var cr=er[lr];if(cr[0]===ut||cr[0]===dt){var vr=ir+cr[1].length;if(ar===vr)return[lr+1,er];if(ar<vr){er=er.slice();var xr=ar-ir,yr=[cr[0],cr[1].slice(0,xr)],Sr=[cr[0],cr[1].slice(xr)];return er.splice(lr,1,yr,Sr),[lr+1,er]}else ir=vr}}throw new Error("cursor_pos is out of bounds!")}function Ut(er,ar){var ir=Ht(er,ar),lr=ir[1],cr=ir[0],vr=lr[cr],xr=lr[cr+1];if(vr==null)return er;if(vr[0]!==dt)return er;if(xr!=null&&vr[1]+xr[1]===xr[1]+vr[1])return lr.splice(cr,2,xr,vr),Yt(lr,cr,2);if(xr!=null&&xr[1].indexOf(vr[1])===0){lr.splice(cr,2,[xr[0],vr[1]],[0,vr[1]]);var yr=xr[1].slice(vr[1].length);return yr.length>0&&lr.splice(cr+2,0,[xr[0],yr]),Yt(lr,cr,3)}else return er}function Kt(er){for(var ar=!1,ir=function(xr){return xr.charCodeAt(0)>=56320&&xr.charCodeAt(0)<=57343},lr=function(xr){return xr.charCodeAt(xr.length-1)>=55296&&xr.charCodeAt(xr.length-1)<=56319},cr=2;cr<er.length;cr+=1)er[cr-2][0]===dt&&lr(er[cr-2][1])&&er[cr-1][0]===ut&&ir(er[cr-1][1])&&er[cr][0]===ct&&ir(er[cr][1])&&(ar=!0,er[cr-1][1]=er[cr-2][1].slice(-1)+er[cr-1][1],er[cr][1]=er[cr-2][1].slice(-1)+er[cr][1],er[cr-2][1]=er[cr-2][1].slice(0,-1));if(!ar)return er;for(var vr=[],cr=0;cr<er.length;cr+=1)er[cr][1].length>0&&vr.push(er[cr]);return vr}function Yt(er,ar,ir){for(var lr=ar+ir-1;lr>=0&&lr>=ar-1;lr--)if(lr+1<er.length){var cr=er[lr],vr=er[lr+1];cr[0]===vr[1]&&er.splice(lr,2,[cr[0],cr[1]+vr[1]])}return er}},function(et,ot){ot=et.exports=typeof Object.keys=="function"?Object.keys:ut,ot.shim=ut;function ut(ct){var dt=[];for(var ft in ct)dt.push(ft);return dt}},function(et,ot){var ut=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";ot=et.exports=ut?ct:dt,ot.supported=ct;function ct(ft){return Object.prototype.toString.call(ft)=="[object Arguments]"}ot.unsupported=dt;function dt(ft){return ft&&typeof ft=="object"&&typeof ft.length=="number"&&Object.prototype.hasOwnProperty.call(ft,"callee")&&!Object.prototype.propertyIsEnumerable.call(ft,"callee")||!1}},function(et,ot){var ut=Object.prototype.hasOwnProperty,ct="~";function dt(){}Object.create&&(dt.prototype=Object.create(null),new dt().__proto__||(ct=!1));function ft(kt,Tt,Rt){this.fn=kt,this.context=Tt,this.once=Rt||!1}function St(){this._events=new dt,this._eventsCount=0}St.prototype.eventNames=function(){var Tt=[],Rt,Ft;if(this._eventsCount===0)return Tt;for(Ft in Rt=this._events)ut.call(Rt,Ft)&&Tt.push(ct?Ft.slice(1):Ft);return Object.getOwnPropertySymbols?Tt.concat(Object.getOwnPropertySymbols(Rt)):Tt},St.prototype.listeners=function(Tt,Rt){var Ft=ct?ct+Tt:Tt,jt=this._events[Ft];if(Rt)return!!jt;if(!jt)return[];if(jt.fn)return[jt.fn];for(var Bt=0,zt=jt.length,Ht=new Array(zt);Bt<zt;Bt++)Ht[Bt]=jt[Bt].fn;return Ht},St.prototype.emit=function(Tt,Rt,Ft,jt,Bt,zt){var Ht=ct?ct+Tt:Tt;if(!this._events[Ht])return!1;var Ut=this._events[Ht],Kt=arguments.length,Yt,er;if(Ut.fn){switch(Ut.once&&this.removeListener(Tt,Ut.fn,void 0,!0),Kt){case 1:return Ut.fn.call(Ut.context),!0;case 2:return Ut.fn.call(Ut.context,Rt),!0;case 3:return Ut.fn.call(Ut.context,Rt,Ft),!0;case 4:return Ut.fn.call(Ut.context,Rt,Ft,jt),!0;case 5:return Ut.fn.call(Ut.context,Rt,Ft,jt,Bt),!0;case 6:return Ut.fn.call(Ut.context,Rt,Ft,jt,Bt,zt),!0}for(er=1,Yt=new Array(Kt-1);er<Kt;er++)Yt[er-1]=arguments[er];Ut.fn.apply(Ut.context,Yt)}else{var ar=Ut.length,ir;for(er=0;er<ar;er++)switch(Ut[er].once&&this.removeListener(Tt,Ut[er].fn,void 0,!0),Kt){case 1:Ut[er].fn.call(Ut[er].context);break;case 2:Ut[er].fn.call(Ut[er].context,Rt);break;case 3:Ut[er].fn.call(Ut[er].context,Rt,Ft);break;case 4:Ut[er].fn.call(Ut[er].context,Rt,Ft,jt);break;default:if(!Yt)for(ir=1,Yt=new Array(Kt-1);ir<Kt;ir++)Yt[ir-1]=arguments[ir];Ut[er].fn.apply(Ut[er].context,Yt)}}return!0},St.prototype.on=function(Tt,Rt,Ft){var jt=new ft(Rt,Ft||this),Bt=ct?ct+Tt:Tt;return this._events[Bt]?this._events[Bt].fn?this._events[Bt]=[this._events[Bt],jt]:this._events[Bt].push(jt):(this._events[Bt]=jt,this._eventsCount++),this},St.prototype.once=function(Tt,Rt,Ft){var jt=new ft(Rt,Ft||this,!0),Bt=ct?ct+Tt:Tt;return this._events[Bt]?this._events[Bt].fn?this._events[Bt]=[this._events[Bt],jt]:this._events[Bt].push(jt):(this._events[Bt]=jt,this._eventsCount++),this},St.prototype.removeListener=function(Tt,Rt,Ft,jt){var Bt=ct?ct+Tt:Tt;if(!this._events[Bt])return this;if(!Rt)return--this._eventsCount===0?this._events=new dt:delete this._events[Bt],this;var zt=this._events[Bt];if(zt.fn)zt.fn===Rt&&(!jt||zt.once)&&(!Ft||zt.context===Ft)&&(--this._eventsCount===0?this._events=new dt:delete this._events[Bt]);else{for(var Ht=0,Ut=[],Kt=zt.length;Ht<Kt;Ht++)(zt[Ht].fn!==Rt||jt&&!zt[Ht].once||Ft&&zt[Ht].context!==Ft)&&Ut.push(zt[Ht]);Ut.length?this._events[Bt]=Ut.length===1?Ut[0]:Ut:--this._eventsCount===0?this._events=new dt:delete this._events[Bt]}return this},St.prototype.removeAllListeners=function(Tt){var Rt;return Tt?(Rt=ct?ct+Tt:Tt,this._events[Rt]&&(--this._eventsCount===0?this._events=new dt:delete this._events[Rt])):(this._events=new dt,this._eventsCount=0),this},St.prototype.off=St.prototype.removeListener,St.prototype.addListener=St.prototype.on,St.prototype.setMaxListeners=function(){return this},St.prefixed=ct,St.EventEmitter=St,typeof et<"u"&&(et.exports=St)},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.matchText=ot.matchSpacing=ot.matchNewline=ot.matchBlot=ot.matchAttributor=ot.default=void 0;var ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wn){return typeof wn}:function(wn){return wn&&typeof Symbol=="function"&&wn.constructor===Symbol&&wn!==Symbol.prototype?"symbol":typeof wn},dt=function(){function wn(mn,Dn){var Tn=[],An=!0,$n=!1,qn=void 0;try{for(var Bn=mn[Symbol.iterator](),$t;!(An=($t=Bn.next()).done)&&(Tn.push($t.value),!(Dn&&Tn.length===Dn));An=!0);}catch(Zt){$n=!0,qn=Zt}finally{try{!An&&Bn.return&&Bn.return()}finally{if($n)throw qn}}return Tn}return function(mn,Dn){if(Array.isArray(mn))return mn;if(Symbol.iterator in Object(mn))return wn(mn,Dn);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ft=function(){function wn(mn,Dn){for(var Tn=0;Tn<Dn.length;Tn++){var An=Dn[Tn];An.enumerable=An.enumerable||!1,An.configurable=!0,"value"in An&&(An.writable=!0),Object.defineProperty(mn,An.key,An)}}return function(mn,Dn,Tn){return Dn&&wn(mn.prototype,Dn),Tn&&wn(mn,Tn),mn}}(),St=ut(3),kt=Sr(St),Tt=ut(2),Rt=Sr(Tt),Ft=ut(0),jt=Sr(Ft),Bt=ut(5),zt=Sr(Bt),Ht=ut(10),Ut=Sr(Ht),Kt=ut(9),Yt=Sr(Kt),er=ut(36),ar=ut(37),ir=ut(13),lr=Sr(ir),cr=ut(26),vr=ut(38),xr=ut(39),yr=ut(40);function Sr(wn){return wn&&wn.__esModule?wn:{default:wn}}function kr(wn,mn,Dn){return mn in wn?Object.defineProperty(wn,mn,{value:Dn,enumerable:!0,configurable:!0,writable:!0}):wn[mn]=Dn,wn}function Pr(wn,mn){if(!(wn instanceof mn))throw new TypeError("Cannot call a class as a function")}function Or(wn,mn){if(!wn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mn&&(typeof mn=="object"||typeof mn=="function")?mn:wn}function hr(wn,mn){if(typeof mn!="function"&&mn!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof mn);wn.prototype=Object.create(mn&&mn.prototype,{constructor:{value:wn,enumerable:!1,writable:!0,configurable:!0}}),mn&&(Object.setPrototypeOf?Object.setPrototypeOf(wn,mn):wn.__proto__=mn)}var Tr=(0,Ut.default)("quill:clipboard"),mr="__ql-matcher",Er=[[Node.TEXT_NODE,Es],[Node.TEXT_NODE,Ln],["br",On],[Node.ELEMENT_NODE,Ln],[Node.ELEMENT_NODE,En],[Node.ELEMENT_NODE,ns],[Node.ELEMENT_NODE,pn],[Node.ELEMENT_NODE,gs],["li",Un],["b",yn.bind(yn,"bold")],["i",yn.bind(yn,"italic")],["style",Xn]],Dr=[er.AlignAttribute,vr.DirectionAttribute].reduce(function(wn,mn){return wn[mn.keyName]=mn,wn},{}),Cr=[er.AlignStyle,ar.BackgroundStyle,cr.ColorStyle,vr.DirectionStyle,xr.FontStyle,yr.SizeStyle].reduce(function(wn,mn){return wn[mn.keyName]=mn,wn},{}),Lr=function(wn){hr(mn,wn);function mn(Dn,Tn){Pr(this,mn);var An=Or(this,(mn.__proto__||Object.getPrototypeOf(mn)).call(this,Dn,Tn));return An.quill.root.addEventListener("paste",An.onPaste.bind(An)),An.container=An.quill.addContainer("ql-clipboard"),An.container.setAttribute("contenteditable",!0),An.container.setAttribute("tabindex",-1),An.matchers=[],Er.concat(An.options.matchers).forEach(function($n){var qn=dt($n,2),Bn=qn[0],$t=qn[1];!Tn.matchVisual&&$t===ns||An.addMatcher(Bn,$t)}),An}return ft(mn,[{key:"addMatcher",value:function(Tn,An){this.matchers.push([Tn,An])}},{key:"convert",value:function(Tn){if(typeof Tn=="string")return this.container.innerHTML=Tn.replace(/\>\r?\n +\</g,"><"),this.convert();var An=this.quill.getFormat(this.quill.selection.savedRange.index);if(An[lr.default.blotName]){var $n=this.container.innerText;return this.container.innerHTML="",new Rt.default().insert($n,kr({},lr.default.blotName,An[lr.default.blotName]))}var qn=this.prepareMatching(),Bn=dt(qn,2),$t=Bn[0],Zt=Bn[1],or=ln(this.container,$t,Zt);return an(or,`
`)&&or.ops[or.ops.length-1].attributes==null&&(or=or.compose(new Rt.default().retain(or.length()-1).delete(1))),Tr.log("convert",this.container.innerHTML,or),this.container.innerHTML="",or}},{key:"dangerouslyPasteHTML",value:function(Tn,An){var $n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zt.default.sources.API;if(typeof Tn=="string")this.quill.setContents(this.convert(Tn),An),this.quill.setSelection(0,zt.default.sources.SILENT);else{var qn=this.convert(An);this.quill.updateContents(new Rt.default().retain(Tn).concat(qn),$n),this.quill.setSelection(Tn+qn.length(),zt.default.sources.SILENT)}}},{key:"onPaste",value:function(Tn){var An=this;if(!(Tn.defaultPrevented||!this.quill.isEnabled())){var $n=this.quill.getSelection(),qn=new Rt.default().retain($n.index),Bn=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(zt.default.sources.SILENT),setTimeout(function(){qn=qn.concat(An.convert()).delete($n.length),An.quill.updateContents(qn,zt.default.sources.USER),An.quill.setSelection(qn.length()-$n.length,zt.default.sources.SILENT),An.quill.scrollingContainer.scrollTop=Bn,An.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Tn=this,An=[],$n=[];return this.matchers.forEach(function(qn){var Bn=dt(qn,2),$t=Bn[0],Zt=Bn[1];switch($t){case Node.TEXT_NODE:$n.push(Zt);break;case Node.ELEMENT_NODE:An.push(Zt);break;default:[].forEach.call(Tn.container.querySelectorAll($t),function(or){or[mr]=or[mr]||[],or[mr].push(Zt)});break}}),[An,$n]}}]),mn}(Yt.default);Lr.DEFAULTS={matchers:[],matchVisual:!0};function qr(wn,mn,Dn){return(typeof mn>"u"?"undefined":ct(mn))==="object"?Object.keys(mn).reduce(function(Tn,An){return qr(Tn,An,mn[An])},wn):wn.reduce(function(Tn,An){return An.attributes&&An.attributes[mn]?Tn.push(An):Tn.insert(An.insert,(0,kt.default)({},kr({},mn,Dn),An.attributes))},new Rt.default)}function sn(wn){if(wn.nodeType!==Node.ELEMENT_NODE)return{};var mn="__ql-computed-style";return wn[mn]||(wn[mn]=window.getComputedStyle(wn))}function an(wn,mn){for(var Dn="",Tn=wn.ops.length-1;Tn>=0&&Dn.length<mn.length;--Tn){var An=wn.ops[Tn];if(typeof An.insert!="string")break;Dn=An.insert+Dn}return Dn.slice(-1*mn.length)===mn}function tn(wn){if(wn.childNodes.length===0)return!1;var mn=sn(wn);return["block","list-item"].indexOf(mn.display)>-1}function ln(wn,mn,Dn){return wn.nodeType===wn.TEXT_NODE?Dn.reduce(function(Tn,An){return An(wn,Tn)},new Rt.default):wn.nodeType===wn.ELEMENT_NODE?[].reduce.call(wn.childNodes||[],function(Tn,An){var $n=ln(An,mn,Dn);return An.nodeType===wn.ELEMENT_NODE&&($n=mn.reduce(function(qn,Bn){return Bn(An,qn)},$n),$n=(An[mr]||[]).reduce(function(qn,Bn){return Bn(An,qn)},$n)),Tn.concat($n)},new Rt.default):new Rt.default}function yn(wn,mn,Dn){return qr(Dn,wn,!0)}function pn(wn,mn){var Dn=jt.default.Attributor.Attribute.keys(wn),Tn=jt.default.Attributor.Class.keys(wn),An=jt.default.Attributor.Style.keys(wn),$n={};return Dn.concat(Tn).concat(An).forEach(function(qn){var Bn=jt.default.query(qn,jt.default.Scope.ATTRIBUTE);Bn!=null&&($n[Bn.attrName]=Bn.value(wn),$n[Bn.attrName])||(Bn=Dr[qn],Bn!=null&&(Bn.attrName===qn||Bn.keyName===qn)&&($n[Bn.attrName]=Bn.value(wn)||void 0),Bn=Cr[qn],Bn!=null&&(Bn.attrName===qn||Bn.keyName===qn)&&(Bn=Cr[qn],$n[Bn.attrName]=Bn.value(wn)||void 0))}),Object.keys($n).length>0&&(mn=qr(mn,$n)),mn}function En(wn,mn){var Dn=jt.default.query(wn);if(Dn==null)return mn;if(Dn.prototype instanceof jt.default.Embed){var Tn={},An=Dn.value(wn);An!=null&&(Tn[Dn.blotName]=An,mn=new Rt.default().insert(Tn,Dn.formats(wn)))}else typeof Dn.formats=="function"&&(mn=qr(mn,Dn.blotName,Dn.formats(wn)));return mn}function On(wn,mn){return an(mn,`
`)||mn.insert(`
`),mn}function Xn(){return new Rt.default}function Un(wn,mn){var Dn=jt.default.query(wn);if(Dn==null||Dn.blotName!=="list-item"||!an(mn,`
`))return mn;for(var Tn=-1,An=wn.parentNode;!An.classList.contains("ql-clipboard");)(jt.default.query(An)||{}).blotName==="list"&&(Tn+=1),An=An.parentNode;return Tn<=0?mn:mn.compose(new Rt.default().retain(mn.length()-1).retain(1,{indent:Tn}))}function Ln(wn,mn){return an(mn,`
`)||(tn(wn)||mn.length()>0&&wn.nextSibling&&tn(wn.nextSibling))&&mn.insert(`
`),mn}function ns(wn,mn){if(tn(wn)&&wn.nextElementSibling!=null&&!an(mn,`

`)){var Dn=wn.offsetHeight+parseFloat(sn(wn).marginTop)+parseFloat(sn(wn).marginBottom);wn.nextElementSibling.offsetTop>wn.offsetTop+Dn*1.5&&mn.insert(`
`)}return mn}function gs(wn,mn){var Dn={},Tn=wn.style||{};return Tn.fontStyle&&sn(wn).fontStyle==="italic"&&(Dn.italic=!0),Tn.fontWeight&&(sn(wn).fontWeight.startsWith("bold")||parseInt(sn(wn).fontWeight)>=700)&&(Dn.bold=!0),Object.keys(Dn).length>0&&(mn=qr(mn,Dn)),parseFloat(Tn.textIndent||0)>0&&(mn=new Rt.default().insert("	").concat(mn)),mn}function Es(wn,mn){var Dn=wn.data;if(wn.parentNode.tagName==="O:P")return mn.insert(Dn.trim());if(Dn.trim().length===0&&wn.parentNode.classList.contains("ql-clipboard"))return mn;if(!sn(wn.parentNode).whiteSpace.startsWith("pre")){var Tn=function($n,qn){return qn=qn.replace(/[^\u00a0]/g,""),qn.length<1&&$n?" ":qn};Dn=Dn.replace(/\r\n/g," ").replace(/\n/g," "),Dn=Dn.replace(/\s\s+/g,Tn.bind(Tn,!0)),(wn.previousSibling==null&&tn(wn.parentNode)||wn.previousSibling!=null&&tn(wn.previousSibling))&&(Dn=Dn.replace(/^\s+/,Tn.bind(Tn,!1))),(wn.nextSibling==null&&tn(wn.parentNode)||wn.nextSibling!=null&&tn(wn.nextSibling))&&(Dn=Dn.replace(/\s+$/,Tn.bind(Tn,!1)))}return mn.insert(Dn)}ot.default=Lr,ot.matchAttributor=pn,ot.matchBlot=En,ot.matchNewline=Ln,ot.matchSpacing=ns,ot.matchText=Es},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(zt,Ht){for(var Ut=0;Ut<Ht.length;Ut++){var Kt=Ht[Ut];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}}return function(zt,Ht,Ut){return Ht&&Bt(zt.prototype,Ht),Ut&&Bt(zt,Ut),zt}}(),dt=function Bt(zt,Ht,Ut){zt===null&&(zt=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(zt,Ht);if(Kt===void 0){var Yt=Object.getPrototypeOf(zt);return Yt===null?void 0:Bt(Yt,Ht,Ut)}else{if("value"in Kt)return Kt.value;var er=Kt.get;return er===void 0?void 0:er.call(Ut)}},ft=ut(6),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,zt){if(!(Bt instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,zt){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Bt}function Ft(Bt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Bt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,zt):Bt.__proto__=zt)}var jt=function(Bt){Ft(zt,Bt);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ct(zt,[{key:"optimize",value:function(Ut){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"optimize",this).call(this,Ut),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return dt(zt.__proto__||Object.getPrototypeOf(zt),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),zt}(St.default);jt.blotName="bold",jt.tagName=["STRONG","B"],ot.default=jt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.addControls=ot.default=void 0;var ct=function(){function yr(Sr,kr){var Pr=[],Or=!0,hr=!1,Tr=void 0;try{for(var mr=Sr[Symbol.iterator](),Er;!(Or=(Er=mr.next()).done)&&(Pr.push(Er.value),!(kr&&Pr.length===kr));Or=!0);}catch(Dr){hr=!0,Tr=Dr}finally{try{!Or&&mr.return&&mr.return()}finally{if(hr)throw Tr}}return Pr}return function(Sr,kr){if(Array.isArray(Sr))return Sr;if(Symbol.iterator in Object(Sr))return yr(Sr,kr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function(){function yr(Sr,kr){for(var Pr=0;Pr<kr.length;Pr++){var Or=kr[Pr];Or.enumerable=Or.enumerable||!1,Or.configurable=!0,"value"in Or&&(Or.writable=!0),Object.defineProperty(Sr,Or.key,Or)}}return function(Sr,kr,Pr){return kr&&yr(Sr.prototype,kr),Pr&&yr(Sr,Pr),Sr}}(),ft=ut(2),St=Ut(ft),kt=ut(0),Tt=Ut(kt),Rt=ut(5),Ft=Ut(Rt),jt=ut(10),Bt=Ut(jt),zt=ut(9),Ht=Ut(zt);function Ut(yr){return yr&&yr.__esModule?yr:{default:yr}}function Kt(yr,Sr,kr){return Sr in yr?Object.defineProperty(yr,Sr,{value:kr,enumerable:!0,configurable:!0,writable:!0}):yr[Sr]=kr,yr}function Yt(yr,Sr){if(!(yr instanceof Sr))throw new TypeError("Cannot call a class as a function")}function er(yr,Sr){if(!yr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Sr&&(typeof Sr=="object"||typeof Sr=="function")?Sr:yr}function ar(yr,Sr){if(typeof Sr!="function"&&Sr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Sr);yr.prototype=Object.create(Sr&&Sr.prototype,{constructor:{value:yr,enumerable:!1,writable:!0,configurable:!0}}),Sr&&(Object.setPrototypeOf?Object.setPrototypeOf(yr,Sr):yr.__proto__=Sr)}var ir=(0,Bt.default)("quill:toolbar"),lr=function(yr){ar(Sr,yr);function Sr(kr,Pr){Yt(this,Sr);var Or=er(this,(Sr.__proto__||Object.getPrototypeOf(Sr)).call(this,kr,Pr));if(Array.isArray(Or.options.container)){var hr=document.createElement("div");vr(hr,Or.options.container),kr.container.parentNode.insertBefore(hr,kr.container),Or.container=hr}else typeof Or.options.container=="string"?Or.container=document.querySelector(Or.options.container):Or.container=Or.options.container;if(!(Or.container instanceof HTMLElement)){var Tr;return Tr=ir.error("Container required for toolbar",Or.options),er(Or,Tr)}return Or.container.classList.add("ql-toolbar"),Or.controls=[],Or.handlers={},Object.keys(Or.options.handlers).forEach(function(mr){Or.addHandler(mr,Or.options.handlers[mr])}),[].forEach.call(Or.container.querySelectorAll("button, select"),function(mr){Or.attach(mr)}),Or.quill.on(Ft.default.events.EDITOR_CHANGE,function(mr,Er){mr===Ft.default.events.SELECTION_CHANGE&&Or.update(Er)}),Or.quill.on(Ft.default.events.SCROLL_OPTIMIZE,function(){var mr=Or.quill.selection.getRange(),Er=ct(mr,1),Dr=Er[0];Or.update(Dr)}),Or}return dt(Sr,[{key:"addHandler",value:function(Pr,Or){this.handlers[Pr]=Or}},{key:"attach",value:function(Pr){var Or=this,hr=[].find.call(Pr.classList,function(mr){return mr.indexOf("ql-")===0});if(hr){if(hr=hr.slice(3),Pr.tagName==="BUTTON"&&Pr.setAttribute("type","button"),this.handlers[hr]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[hr]==null){ir.warn("ignoring attaching to disabled format",hr,Pr);return}if(Tt.default.query(hr)==null){ir.warn("ignoring attaching to nonexistent format",hr,Pr);return}}var Tr=Pr.tagName==="SELECT"?"change":"click";Pr.addEventListener(Tr,function(mr){var Er=void 0;if(Pr.tagName==="SELECT"){if(Pr.selectedIndex<0)return;var Dr=Pr.options[Pr.selectedIndex];Dr.hasAttribute("selected")?Er=!1:Er=Dr.value||!1}else Pr.classList.contains("ql-active")?Er=!1:Er=Pr.value||!Pr.hasAttribute("value"),mr.preventDefault();Or.quill.focus();var Cr=Or.quill.selection.getRange(),Lr=ct(Cr,1),qr=Lr[0];if(Or.handlers[hr]!=null)Or.handlers[hr].call(Or,Er);else if(Tt.default.query(hr).prototype instanceof Tt.default.Embed){if(Er=prompt("Enter "+hr),!Er)return;Or.quill.updateContents(new St.default().retain(qr.index).delete(qr.length).insert(Kt({},hr,Er)),Ft.default.sources.USER)}else Or.quill.format(hr,Er,Ft.default.sources.USER);Or.update(qr)}),this.controls.push([hr,Pr])}}},{key:"update",value:function(Pr){var Or=Pr==null?{}:this.quill.getFormat(Pr);this.controls.forEach(function(hr){var Tr=ct(hr,2),mr=Tr[0],Er=Tr[1];if(Er.tagName==="SELECT"){var Dr=void 0;if(Pr==null)Dr=null;else if(Or[mr]==null)Dr=Er.querySelector("option[selected]");else if(!Array.isArray(Or[mr])){var Cr=Or[mr];typeof Cr=="string"&&(Cr=Cr.replace(/\"/g,'\\"')),Dr=Er.querySelector('option[value="'+Cr+'"]')}Dr==null?(Er.value="",Er.selectedIndex=-1):Dr.selected=!0}else if(Pr==null)Er.classList.remove("ql-active");else if(Er.hasAttribute("value")){var Lr=Or[mr]===Er.getAttribute("value")||Or[mr]!=null&&Or[mr].toString()===Er.getAttribute("value")||Or[mr]==null&&!Er.getAttribute("value");Er.classList.toggle("ql-active",Lr)}else Er.classList.toggle("ql-active",Or[mr]!=null)})}}]),Sr}(Ht.default);lr.DEFAULTS={};function cr(yr,Sr,kr){var Pr=document.createElement("button");Pr.setAttribute("type","button"),Pr.classList.add("ql-"+Sr),kr!=null&&(Pr.value=kr),yr.appendChild(Pr)}function vr(yr,Sr){Array.isArray(Sr[0])||(Sr=[Sr]),Sr.forEach(function(kr){var Pr=document.createElement("span");Pr.classList.add("ql-formats"),kr.forEach(function(Or){if(typeof Or=="string")cr(Pr,Or);else{var hr=Object.keys(Or)[0],Tr=Or[hr];Array.isArray(Tr)?xr(Pr,hr,Tr):cr(Pr,hr,Tr)}}),yr.appendChild(Pr)})}function xr(yr,Sr,kr){var Pr=document.createElement("select");Pr.classList.add("ql-"+Sr),kr.forEach(function(Or){var hr=document.createElement("option");Or!==!1?hr.setAttribute("value",Or):hr.setAttribute("selected","selected"),Pr.appendChild(hr)}),yr.appendChild(Pr)}lr.DEFAULTS={container:null,handlers:{clean:function(){var Sr=this,kr=this.quill.getSelection();if(kr!=null)if(kr.length==0){var Pr=this.quill.getFormat();Object.keys(Pr).forEach(function(Or){Tt.default.query(Or,Tt.default.Scope.INLINE)!=null&&Sr.quill.format(Or,!1)})}else this.quill.removeFormat(kr,Ft.default.sources.USER)},direction:function(Sr){var kr=this.quill.getFormat().align;Sr==="rtl"&&kr==null?this.quill.format("align","right",Ft.default.sources.USER):!Sr&&kr==="right"&&this.quill.format("align",!1,Ft.default.sources.USER),this.quill.format("direction",Sr,Ft.default.sources.USER)},indent:function(Sr){var kr=this.quill.getSelection(),Pr=this.quill.getFormat(kr),Or=parseInt(Pr.indent||0);if(Sr==="+1"||Sr==="-1"){var hr=Sr==="+1"?1:-1;Pr.direction==="rtl"&&(hr*=-1),this.quill.format("indent",Or+hr,Ft.default.sources.USER)}},link:function(Sr){Sr===!0&&(Sr=prompt("Enter link URL:")),this.quill.format("link",Sr,Ft.default.sources.USER)},list:function(Sr){var kr=this.quill.getSelection(),Pr=this.quill.getFormat(kr);Sr==="check"?Pr.list==="checked"||Pr.list==="unchecked"?this.quill.format("list",!1,Ft.default.sources.USER):this.quill.format("list","unchecked",Ft.default.sources.USER):this.quill.format("list",Sr,Ft.default.sources.USER)}}},ot.default=lr,ot.addControls=vr},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(zt,Ht){for(var Ut=0;Ut<Ht.length;Ut++){var Kt=Ht[Ut];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}}return function(zt,Ht,Ut){return Ht&&Bt(zt.prototype,Ht),Ut&&Bt(zt,Ut),zt}}(),dt=function Bt(zt,Ht,Ut){zt===null&&(zt=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(zt,Ht);if(Kt===void 0){var Yt=Object.getPrototypeOf(zt);return Yt===null?void 0:Bt(Yt,Ht,Ut)}else{if("value"in Kt)return Kt.value;var er=Kt.get;return er===void 0?void 0:er.call(Ut)}},ft=ut(28),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,zt){if(!(Bt instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,zt){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Bt}function Ft(Bt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Bt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,zt):Bt.__proto__=zt)}var jt=function(Bt){Ft(zt,Bt);function zt(Ht,Ut){Tt(this,zt);var Kt=Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).call(this,Ht));return Kt.label.innerHTML=Ut,Kt.container.classList.add("ql-color-picker"),[].slice.call(Kt.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(Yt){Yt.classList.add("ql-primary")}),Kt}return ct(zt,[{key:"buildItem",value:function(Ut){var Kt=dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"buildItem",this).call(this,Ut);return Kt.style.backgroundColor=Ut.getAttribute("value")||"",Kt}},{key:"selectItem",value:function(Ut,Kt){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"selectItem",this).call(this,Ut,Kt);var Yt=this.label.querySelector(".ql-color-label"),er=Ut&&Ut.getAttribute("data-value")||"";Yt&&(Yt.tagName==="line"?Yt.style.stroke=er:Yt.style.fill=er)}}]),zt}(St.default);ot.default=jt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(zt,Ht){for(var Ut=0;Ut<Ht.length;Ut++){var Kt=Ht[Ut];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}}return function(zt,Ht,Ut){return Ht&&Bt(zt.prototype,Ht),Ut&&Bt(zt,Ut),zt}}(),dt=function Bt(zt,Ht,Ut){zt===null&&(zt=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(zt,Ht);if(Kt===void 0){var Yt=Object.getPrototypeOf(zt);return Yt===null?void 0:Bt(Yt,Ht,Ut)}else{if("value"in Kt)return Kt.value;var er=Kt.get;return er===void 0?void 0:er.call(Ut)}},ft=ut(28),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,zt){if(!(Bt instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,zt){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Bt}function Ft(Bt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Bt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,zt):Bt.__proto__=zt)}var jt=function(Bt){Ft(zt,Bt);function zt(Ht,Ut){Tt(this,zt);var Kt=Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).call(this,Ht));return Kt.container.classList.add("ql-icon-picker"),[].forEach.call(Kt.container.querySelectorAll(".ql-picker-item"),function(Yt){Yt.innerHTML=Ut[Yt.getAttribute("data-value")||""]}),Kt.defaultItem=Kt.container.querySelector(".ql-selected"),Kt.selectItem(Kt.defaultItem),Kt}return ct(zt,[{key:"selectItem",value:function(Ut,Kt){dt(zt.prototype.__proto__||Object.getPrototypeOf(zt.prototype),"selectItem",this).call(this,Ut,Kt),Ut=Ut||this.defaultItem,this.label.innerHTML=Ut.innerHTML}}]),zt}(St.default);ot.default=jt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function St(kt,Tt){for(var Rt=0;Rt<Tt.length;Rt++){var Ft=Tt[Rt];Ft.enumerable=Ft.enumerable||!1,Ft.configurable=!0,"value"in Ft&&(Ft.writable=!0),Object.defineProperty(kt,Ft.key,Ft)}}return function(kt,Tt,Rt){return Tt&&St(kt.prototype,Tt),Rt&&St(kt,Rt),kt}}();function dt(St,kt){if(!(St instanceof kt))throw new TypeError("Cannot call a class as a function")}var ft=function(){function St(kt,Tt){var Rt=this;dt(this,St),this.quill=kt,this.boundsContainer=Tt||document.body,this.root=kt.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){Rt.root.style.marginTop=-1*Rt.quill.root.scrollTop+"px"}),this.hide()}return ct(St,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(Tt){var Rt=Tt.left+Tt.width/2-this.root.offsetWidth/2,Ft=Tt.bottom+this.quill.root.scrollTop;this.root.style.left=Rt+"px",this.root.style.top=Ft+"px",this.root.classList.remove("ql-flip");var jt=this.boundsContainer.getBoundingClientRect(),Bt=this.root.getBoundingClientRect(),zt=0;if(Bt.right>jt.right&&(zt=jt.right-Bt.right,this.root.style.left=Rt+zt+"px"),Bt.left<jt.left&&(zt=jt.left-Bt.left,this.root.style.left=Rt+zt+"px"),Bt.bottom>jt.bottom){var Ht=Bt.bottom-Bt.top,Ut=Tt.bottom-Tt.top+Ht;this.root.style.top=Ft-Ut+"px",this.root.classList.add("ql-flip")}return zt}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),St}();ot.default=ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function xr(yr,Sr){var kr=[],Pr=!0,Or=!1,hr=void 0;try{for(var Tr=yr[Symbol.iterator](),mr;!(Pr=(mr=Tr.next()).done)&&(kr.push(mr.value),!(Sr&&kr.length===Sr));Pr=!0);}catch(Er){Or=!0,hr=Er}finally{try{!Pr&&Tr.return&&Tr.return()}finally{if(Or)throw hr}}return kr}return function(yr,Sr){if(Array.isArray(yr))return yr;if(Symbol.iterator in Object(yr))return xr(yr,Sr);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),dt=function xr(yr,Sr,kr){yr===null&&(yr=Function.prototype);var Pr=Object.getOwnPropertyDescriptor(yr,Sr);if(Pr===void 0){var Or=Object.getPrototypeOf(yr);return Or===null?void 0:xr(Or,Sr,kr)}else{if("value"in Pr)return Pr.value;var hr=Pr.get;return hr===void 0?void 0:hr.call(kr)}},ft=function(){function xr(yr,Sr){for(var kr=0;kr<Sr.length;kr++){var Pr=Sr[kr];Pr.enumerable=Pr.enumerable||!1,Pr.configurable=!0,"value"in Pr&&(Pr.writable=!0),Object.defineProperty(yr,Pr.key,Pr)}}return function(yr,Sr,kr){return Sr&&xr(yr.prototype,Sr),kr&&xr(yr,kr),yr}}(),St=ut(3),kt=Yt(St),Tt=ut(8),Rt=Yt(Tt),Ft=ut(43),jt=Yt(Ft),Bt=ut(27),zt=Yt(Bt),Ht=ut(15),Ut=ut(41),Kt=Yt(Ut);function Yt(xr){return xr&&xr.__esModule?xr:{default:xr}}function er(xr,yr){if(!(xr instanceof yr))throw new TypeError("Cannot call a class as a function")}function ar(xr,yr){if(!xr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return yr&&(typeof yr=="object"||typeof yr=="function")?yr:xr}function ir(xr,yr){if(typeof yr!="function"&&yr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof yr);xr.prototype=Object.create(yr&&yr.prototype,{constructor:{value:xr,enumerable:!1,writable:!0,configurable:!0}}),yr&&(Object.setPrototypeOf?Object.setPrototypeOf(xr,yr):xr.__proto__=yr)}var lr=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],cr=function(xr){ir(yr,xr);function yr(Sr,kr){er(this,yr),kr.modules.toolbar!=null&&kr.modules.toolbar.container==null&&(kr.modules.toolbar.container=lr);var Pr=ar(this,(yr.__proto__||Object.getPrototypeOf(yr)).call(this,Sr,kr));return Pr.quill.container.classList.add("ql-snow"),Pr}return ft(yr,[{key:"extendToolbar",value:function(kr){kr.container.classList.add("ql-snow"),this.buildButtons([].slice.call(kr.container.querySelectorAll("button")),Kt.default),this.buildPickers([].slice.call(kr.container.querySelectorAll("select")),Kt.default),this.tooltip=new vr(this.quill,this.options.bounds),kr.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(Pr,Or){kr.handlers.link.call(kr,!Or.format.link)})}}]),yr}(jt.default);cr.DEFAULTS=(0,kt.default)(!0,{},jt.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(yr){if(yr){var Sr=this.quill.getSelection();if(Sr==null||Sr.length==0)return;var kr=this.quill.getText(Sr);/^\S+@\S+\.\S+$/.test(kr)&&kr.indexOf("mailto:")!==0&&(kr="mailto:"+kr);var Pr=this.quill.theme.tooltip;Pr.edit("link",kr)}else this.quill.format("link",!1)}}}}});var vr=function(xr){ir(yr,xr);function yr(Sr,kr){er(this,yr);var Pr=ar(this,(yr.__proto__||Object.getPrototypeOf(yr)).call(this,Sr,kr));return Pr.preview=Pr.root.querySelector("a.ql-preview"),Pr}return ft(yr,[{key:"listen",value:function(){var kr=this;dt(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(Pr){kr.root.classList.contains("ql-editing")?kr.save():kr.edit("link",kr.preview.textContent),Pr.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(Pr){if(kr.linkRange!=null){var Or=kr.linkRange;kr.restoreFocus(),kr.quill.formatText(Or,"link",!1,Rt.default.sources.USER),delete kr.linkRange}Pr.preventDefault(),kr.hide()}),this.quill.on(Rt.default.events.SELECTION_CHANGE,function(Pr,Or,hr){if(Pr!=null){if(Pr.length===0&&hr===Rt.default.sources.USER){var Tr=kr.quill.scroll.descendant(zt.default,Pr.index),mr=ct(Tr,2),Er=mr[0],Dr=mr[1];if(Er!=null){kr.linkRange=new Ht.Range(Pr.index-Dr,Er.length());var Cr=zt.default.formats(Er.domNode);kr.preview.textContent=Cr,kr.preview.setAttribute("href",Cr),kr.show(),kr.position(kr.quill.getBounds(kr.linkRange));return}}else delete kr.linkRange;kr.hide()}})}},{key:"show",value:function(){dt(yr.prototype.__proto__||Object.getPrototypeOf(yr.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),yr}(Ft.BaseTooltip);vr.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),ot.default=cr},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(29),dt=An(ct),ft=ut(36),St=ut(38),kt=ut(64),Tt=ut(65),Rt=An(Tt),Ft=ut(66),jt=An(Ft),Bt=ut(67),zt=An(Bt),Ht=ut(37),Ut=ut(26),Kt=ut(39),Yt=ut(40),er=ut(56),ar=An(er),ir=ut(68),lr=An(ir),cr=ut(27),vr=An(cr),xr=ut(69),yr=An(xr),Sr=ut(70),kr=An(Sr),Pr=ut(71),Or=An(Pr),hr=ut(72),Tr=An(hr),mr=ut(73),Er=An(mr),Dr=ut(13),Cr=An(Dr),Lr=ut(74),qr=An(Lr),sn=ut(75),an=An(sn),tn=ut(57),ln=An(tn),yn=ut(41),pn=An(yn),En=ut(28),On=An(En),Xn=ut(59),Un=An(Xn),Ln=ut(60),ns=An(Ln),gs=ut(61),Es=An(gs),wn=ut(108),mn=An(wn),Dn=ut(62),Tn=An(Dn);function An($n){return $n&&$n.__esModule?$n:{default:$n}}dt.default.register({"attributors/attribute/direction":St.DirectionAttribute,"attributors/class/align":ft.AlignClass,"attributors/class/background":Ht.BackgroundClass,"attributors/class/color":Ut.ColorClass,"attributors/class/direction":St.DirectionClass,"attributors/class/font":Kt.FontClass,"attributors/class/size":Yt.SizeClass,"attributors/style/align":ft.AlignStyle,"attributors/style/background":Ht.BackgroundStyle,"attributors/style/color":Ut.ColorStyle,"attributors/style/direction":St.DirectionStyle,"attributors/style/font":Kt.FontStyle,"attributors/style/size":Yt.SizeStyle},!0),dt.default.register({"formats/align":ft.AlignClass,"formats/direction":St.DirectionClass,"formats/indent":kt.IndentClass,"formats/background":Ht.BackgroundStyle,"formats/color":Ut.ColorStyle,"formats/font":Kt.FontClass,"formats/size":Yt.SizeClass,"formats/blockquote":Rt.default,"formats/code-block":Cr.default,"formats/header":jt.default,"formats/list":zt.default,"formats/bold":ar.default,"formats/code":Dr.Code,"formats/italic":lr.default,"formats/link":vr.default,"formats/script":yr.default,"formats/strike":kr.default,"formats/underline":Or.default,"formats/image":Tr.default,"formats/video":Er.default,"formats/list/item":Bt.ListItem,"modules/formula":qr.default,"modules/syntax":an.default,"modules/toolbar":ln.default,"themes/bubble":mn.default,"themes/snow":Tn.default,"ui/icons":pn.default,"ui/picker":On.default,"ui/icon-picker":ns.default,"ui/color-picker":Un.default,"ui/tooltip":Es.default},!0),ot.default=dt.default},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.IndentClass=void 0;var ct=function(){function zt(Ht,Ut){for(var Kt=0;Kt<Ut.length;Kt++){var Yt=Ut[Kt];Yt.enumerable=Yt.enumerable||!1,Yt.configurable=!0,"value"in Yt&&(Yt.writable=!0),Object.defineProperty(Ht,Yt.key,Yt)}}return function(Ht,Ut,Kt){return Ut&&zt(Ht.prototype,Ut),Kt&&zt(Ht,Kt),Ht}}(),dt=function zt(Ht,Ut,Kt){Ht===null&&(Ht=Function.prototype);var Yt=Object.getOwnPropertyDescriptor(Ht,Ut);if(Yt===void 0){var er=Object.getPrototypeOf(Ht);return er===null?void 0:zt(er,Ut,Kt)}else{if("value"in Yt)return Yt.value;var ar=Yt.get;return ar===void 0?void 0:ar.call(Kt)}},ft=ut(0),St=kt(ft);function kt(zt){return zt&&zt.__esModule?zt:{default:zt}}function Tt(zt,Ht){if(!(zt instanceof Ht))throw new TypeError("Cannot call a class as a function")}function Rt(zt,Ht){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ht&&(typeof Ht=="object"||typeof Ht=="function")?Ht:zt}function Ft(zt,Ht){if(typeof Ht!="function"&&Ht!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ht);zt.prototype=Object.create(Ht&&Ht.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Ht&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Ht):zt.__proto__=Ht)}var jt=function(zt){Ft(Ht,zt);function Ht(){return Tt(this,Ht),Rt(this,(Ht.__proto__||Object.getPrototypeOf(Ht)).apply(this,arguments))}return ct(Ht,[{key:"add",value:function(Kt,Yt){if(Yt==="+1"||Yt==="-1"){var er=this.value(Kt)||0;Yt=Yt==="+1"?er+1:er-1}return Yt===0?(this.remove(Kt),!0):dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"add",this).call(this,Kt,Yt)}},{key:"canAdd",value:function(Kt,Yt){return dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"canAdd",this).call(this,Kt,Yt)||dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"canAdd",this).call(this,Kt,parseInt(Yt))}},{key:"value",value:function(Kt){return parseInt(dt(Ht.prototype.__proto__||Object.getPrototypeOf(Ht.prototype),"value",this).call(this,Kt))||void 0}}]),Ht}(St.default.Attributor.Class),Bt=new jt("indent","ql-indent",{scope:St.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});ot.IndentClass=Bt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(4),dt=ft(ct);function ft(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function St(Ft,jt){if(!(Ft instanceof jt))throw new TypeError("Cannot call a class as a function")}function kt(Ft,jt){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt&&(typeof jt=="object"||typeof jt=="function")?jt:Ft}function Tt(Ft,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof jt);Ft.prototype=Object.create(jt&&jt.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,jt):Ft.__proto__=jt)}var Rt=function(Ft){Tt(jt,Ft);function jt(){return St(this,jt),kt(this,(jt.__proto__||Object.getPrototypeOf(jt)).apply(this,arguments))}return jt}(dt.default);Rt.blotName="blockquote",Rt.tagName="blockquote",ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function jt(Bt,zt){for(var Ht=0;Ht<zt.length;Ht++){var Ut=zt[Ht];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(Bt,Ut.key,Ut)}}return function(Bt,zt,Ht){return zt&&jt(Bt.prototype,zt),Ht&&jt(Bt,Ht),Bt}}(),dt=ut(4),ft=St(dt);function St(jt){return jt&&jt.__esModule?jt:{default:jt}}function kt(jt,Bt){if(!(jt instanceof Bt))throw new TypeError("Cannot call a class as a function")}function Tt(jt,Bt){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Bt&&(typeof Bt=="object"||typeof Bt=="function")?Bt:jt}function Rt(jt,Bt){if(typeof Bt!="function"&&Bt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Bt);jt.prototype=Object.create(Bt&&Bt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),Bt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,Bt):jt.__proto__=Bt)}var Ft=function(jt){Rt(Bt,jt);function Bt(){return kt(this,Bt),Tt(this,(Bt.__proto__||Object.getPrototypeOf(Bt)).apply(this,arguments))}return ct(Bt,null,[{key:"formats",value:function(Ht){return this.tagName.indexOf(Ht.tagName)+1}}]),Bt}(ft.default);Ft.blotName="header",Ft.tagName=["H1","H2","H3","H4","H5","H6"],ot.default=Ft},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.ListItem=void 0;var ct=function(){function er(ar,ir){for(var lr=0;lr<ir.length;lr++){var cr=ir[lr];cr.enumerable=cr.enumerable||!1,cr.configurable=!0,"value"in cr&&(cr.writable=!0),Object.defineProperty(ar,cr.key,cr)}}return function(ar,ir,lr){return ir&&er(ar.prototype,ir),lr&&er(ar,lr),ar}}(),dt=function er(ar,ir,lr){ar===null&&(ar=Function.prototype);var cr=Object.getOwnPropertyDescriptor(ar,ir);if(cr===void 0){var vr=Object.getPrototypeOf(ar);return vr===null?void 0:er(vr,ir,lr)}else{if("value"in cr)return cr.value;var xr=cr.get;return xr===void 0?void 0:xr.call(lr)}},ft=ut(0),St=jt(ft),kt=ut(4),Tt=jt(kt),Rt=ut(25),Ft=jt(Rt);function jt(er){return er&&er.__esModule?er:{default:er}}function Bt(er,ar,ir){return ar in er?Object.defineProperty(er,ar,{value:ir,enumerable:!0,configurable:!0,writable:!0}):er[ar]=ir,er}function zt(er,ar){if(!(er instanceof ar))throw new TypeError("Cannot call a class as a function")}function Ht(er,ar){if(!er)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ar&&(typeof ar=="object"||typeof ar=="function")?ar:er}function Ut(er,ar){if(typeof ar!="function"&&ar!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ar);er.prototype=Object.create(ar&&ar.prototype,{constructor:{value:er,enumerable:!1,writable:!0,configurable:!0}}),ar&&(Object.setPrototypeOf?Object.setPrototypeOf(er,ar):er.__proto__=ar)}var Kt=function(er){Ut(ar,er);function ar(){return zt(this,ar),Ht(this,(ar.__proto__||Object.getPrototypeOf(ar)).apply(this,arguments))}return ct(ar,[{key:"format",value:function(lr,cr){lr===Yt.blotName&&!cr?this.replaceWith(St.default.create(this.statics.scope)):dt(ar.prototype.__proto__||Object.getPrototypeOf(ar.prototype),"format",this).call(this,lr,cr)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():dt(ar.prototype.__proto__||Object.getPrototypeOf(ar.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(lr,cr){return this.parent.isolate(this.offset(this.parent),this.length()),lr===this.parent.statics.blotName?(this.parent.replaceWith(lr,cr),this):(this.parent.unwrap(),dt(ar.prototype.__proto__||Object.getPrototypeOf(ar.prototype),"replaceWith",this).call(this,lr,cr))}}],[{key:"formats",value:function(lr){return lr.tagName===this.tagName?void 0:dt(ar.__proto__||Object.getPrototypeOf(ar),"formats",this).call(this,lr)}}]),ar}(Tt.default);Kt.blotName="list-item",Kt.tagName="LI";var Yt=function(er){Ut(ar,er),ct(ar,null,[{key:"create",value:function(lr){var cr=lr==="ordered"?"OL":"UL",vr=dt(ar.__proto__||Object.getPrototypeOf(ar),"create",this).call(this,cr);return(lr==="checked"||lr==="unchecked")&&vr.setAttribute("data-checked",lr==="checked"),vr}},{key:"formats",value:function(lr){if(lr.tagName==="OL")return"ordered";if(lr.tagName==="UL")return lr.hasAttribute("data-checked")?lr.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function ar(ir){zt(this,ar);var lr=Ht(this,(ar.__proto__||Object.getPrototypeOf(ar)).call(this,ir)),cr=function(xr){if(xr.target.parentNode===ir){var yr=lr.statics.formats(ir),Sr=St.default.find(xr.target);yr==="checked"?Sr.format("list","unchecked"):yr==="unchecked"&&Sr.format("list","checked")}};return ir.addEventListener("touchstart",cr),ir.addEventListener("mousedown",cr),lr}return ct(ar,[{key:"format",value:function(lr,cr){this.children.length>0&&this.children.tail.format(lr,cr)}},{key:"formats",value:function(){return Bt({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(lr,cr){if(lr instanceof Kt)dt(ar.prototype.__proto__||Object.getPrototypeOf(ar.prototype),"insertBefore",this).call(this,lr,cr);else{var vr=cr==null?this.length():cr.offset(this),xr=this.split(vr);xr.parent.insertBefore(lr,xr)}}},{key:"optimize",value:function(lr){dt(ar.prototype.__proto__||Object.getPrototypeOf(ar.prototype),"optimize",this).call(this,lr);var cr=this.next;cr!=null&&cr.prev===this&&cr.statics.blotName===this.statics.blotName&&cr.domNode.tagName===this.domNode.tagName&&cr.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(cr.moveChildren(this),cr.remove())}},{key:"replace",value:function(lr){if(lr.statics.blotName!==this.statics.blotName){var cr=St.default.create(this.statics.defaultChild);lr.moveChildren(cr),this.appendChild(cr)}dt(ar.prototype.__proto__||Object.getPrototypeOf(ar.prototype),"replace",this).call(this,lr)}}]),ar}(Ft.default);Yt.blotName="list",Yt.scope=St.default.Scope.BLOCK_BLOT,Yt.tagName=["OL","UL"],Yt.defaultChild="list-item",Yt.allowedChildren=[Kt],ot.ListItem=Kt,ot.default=Yt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(56),dt=ft(ct);function ft(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function St(Ft,jt){if(!(Ft instanceof jt))throw new TypeError("Cannot call a class as a function")}function kt(Ft,jt){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt&&(typeof jt=="object"||typeof jt=="function")?jt:Ft}function Tt(Ft,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof jt);Ft.prototype=Object.create(jt&&jt.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,jt):Ft.__proto__=jt)}var Rt=function(Ft){Tt(jt,Ft);function jt(){return St(this,jt),kt(this,(jt.__proto__||Object.getPrototypeOf(jt)).apply(this,arguments))}return jt}(dt.default);Rt.blotName="italic",Rt.tagName=["EM","I"],ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Bt(zt,Ht){for(var Ut=0;Ut<Ht.length;Ut++){var Kt=Ht[Ut];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}}return function(zt,Ht,Ut){return Ht&&Bt(zt.prototype,Ht),Ut&&Bt(zt,Ut),zt}}(),dt=function Bt(zt,Ht,Ut){zt===null&&(zt=Function.prototype);var Kt=Object.getOwnPropertyDescriptor(zt,Ht);if(Kt===void 0){var Yt=Object.getPrototypeOf(zt);return Yt===null?void 0:Bt(Yt,Ht,Ut)}else{if("value"in Kt)return Kt.value;var er=Kt.get;return er===void 0?void 0:er.call(Ut)}},ft=ut(6),St=kt(ft);function kt(Bt){return Bt&&Bt.__esModule?Bt:{default:Bt}}function Tt(Bt,zt){if(!(Bt instanceof zt))throw new TypeError("Cannot call a class as a function")}function Rt(Bt,zt){if(!Bt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&(typeof zt=="object"||typeof zt=="function")?zt:Bt}function Ft(Bt,zt){if(typeof zt!="function"&&zt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Bt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Bt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Bt,zt):Bt.__proto__=zt)}var jt=function(Bt){Ft(zt,Bt);function zt(){return Tt(this,zt),Rt(this,(zt.__proto__||Object.getPrototypeOf(zt)).apply(this,arguments))}return ct(zt,null,[{key:"create",value:function(Ut){return Ut==="super"?document.createElement("sup"):Ut==="sub"?document.createElement("sub"):dt(zt.__proto__||Object.getPrototypeOf(zt),"create",this).call(this,Ut)}},{key:"formats",value:function(Ut){if(Ut.tagName==="SUB")return"sub";if(Ut.tagName==="SUP")return"super"}}]),zt}(St.default);jt.blotName="script",jt.tagName=["SUB","SUP"],ot.default=jt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(6),dt=ft(ct);function ft(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function St(Ft,jt){if(!(Ft instanceof jt))throw new TypeError("Cannot call a class as a function")}function kt(Ft,jt){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt&&(typeof jt=="object"||typeof jt=="function")?jt:Ft}function Tt(Ft,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof jt);Ft.prototype=Object.create(jt&&jt.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,jt):Ft.__proto__=jt)}var Rt=function(Ft){Tt(jt,Ft);function jt(){return St(this,jt),kt(this,(jt.__proto__||Object.getPrototypeOf(jt)).apply(this,arguments))}return jt}(dt.default);Rt.blotName="strike",Rt.tagName="S",ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=ut(6),dt=ft(ct);function ft(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function St(Ft,jt){if(!(Ft instanceof jt))throw new TypeError("Cannot call a class as a function")}function kt(Ft,jt){if(!Ft)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt&&(typeof jt=="object"||typeof jt=="function")?jt:Ft}function Tt(Ft,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof jt);Ft.prototype=Object.create(jt&&jt.prototype,{constructor:{value:Ft,enumerable:!1,writable:!0,configurable:!0}}),jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Ft,jt):Ft.__proto__=jt)}var Rt=function(Ft){Tt(jt,Ft);function jt(){return St(this,jt),kt(this,(jt.__proto__||Object.getPrototypeOf(jt)).apply(this,arguments))}return jt}(dt.default);Rt.blotName="underline",Rt.tagName="U",ot.default=Rt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Ht(Ut,Kt){for(var Yt=0;Yt<Kt.length;Yt++){var er=Kt[Yt];er.enumerable=er.enumerable||!1,er.configurable=!0,"value"in er&&(er.writable=!0),Object.defineProperty(Ut,er.key,er)}}return function(Ut,Kt,Yt){return Kt&&Ht(Ut.prototype,Kt),Yt&&Ht(Ut,Yt),Ut}}(),dt=function Ht(Ut,Kt,Yt){Ut===null&&(Ut=Function.prototype);var er=Object.getOwnPropertyDescriptor(Ut,Kt);if(er===void 0){var ar=Object.getPrototypeOf(Ut);return ar===null?void 0:Ht(ar,Kt,Yt)}else{if("value"in er)return er.value;var ir=er.get;return ir===void 0?void 0:ir.call(Yt)}},ft=ut(0),St=Tt(ft),kt=ut(27);function Tt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Rt(Ht,Ut){if(!(Ht instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Ft(Ht,Ut){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Ht}function jt(Ht,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Ht.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Ut):Ht.__proto__=Ut)}var Bt=["alt","height","width"],zt=function(Ht){jt(Ut,Ht);function Ut(){return Rt(this,Ut),Ft(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).apply(this,arguments))}return ct(Ut,[{key:"format",value:function(Yt,er){Bt.indexOf(Yt)>-1?er?this.domNode.setAttribute(Yt,er):this.domNode.removeAttribute(Yt):dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"format",this).call(this,Yt,er)}}],[{key:"create",value:function(Yt){var er=dt(Ut.__proto__||Object.getPrototypeOf(Ut),"create",this).call(this,Yt);return typeof Yt=="string"&&er.setAttribute("src",this.sanitize(Yt)),er}},{key:"formats",value:function(Yt){return Bt.reduce(function(er,ar){return Yt.hasAttribute(ar)&&(er[ar]=Yt.getAttribute(ar)),er},{})}},{key:"match",value:function(Yt){return/\.(jpe?g|gif|png)$/.test(Yt)||/^data:image\/.+;base64/.test(Yt)}},{key:"sanitize",value:function(Yt){return(0,kt.sanitize)(Yt,["http","https","data"])?Yt:"//:0"}},{key:"value",value:function(Yt){return Yt.getAttribute("src")}}]),Ut}(St.default.Embed);zt.blotName="image",zt.tagName="IMG",ot.default=zt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0});var ct=function(){function Ht(Ut,Kt){for(var Yt=0;Yt<Kt.length;Yt++){var er=Kt[Yt];er.enumerable=er.enumerable||!1,er.configurable=!0,"value"in er&&(er.writable=!0),Object.defineProperty(Ut,er.key,er)}}return function(Ut,Kt,Yt){return Kt&&Ht(Ut.prototype,Kt),Yt&&Ht(Ut,Yt),Ut}}(),dt=function Ht(Ut,Kt,Yt){Ut===null&&(Ut=Function.prototype);var er=Object.getOwnPropertyDescriptor(Ut,Kt);if(er===void 0){var ar=Object.getPrototypeOf(Ut);return ar===null?void 0:Ht(ar,Kt,Yt)}else{if("value"in er)return er.value;var ir=er.get;return ir===void 0?void 0:ir.call(Yt)}},ft=ut(4),St=ut(27),kt=Tt(St);function Tt(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}function Rt(Ht,Ut){if(!(Ht instanceof Ut))throw new TypeError("Cannot call a class as a function")}function Ft(Ht,Ut){if(!Ht)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ut&&(typeof Ut=="object"||typeof Ut=="function")?Ut:Ht}function jt(Ht,Ut){if(typeof Ut!="function"&&Ut!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ut);Ht.prototype=Object.create(Ut&&Ut.prototype,{constructor:{value:Ht,enumerable:!1,writable:!0,configurable:!0}}),Ut&&(Object.setPrototypeOf?Object.setPrototypeOf(Ht,Ut):Ht.__proto__=Ut)}var Bt=["height","width"],zt=function(Ht){jt(Ut,Ht);function Ut(){return Rt(this,Ut),Ft(this,(Ut.__proto__||Object.getPrototypeOf(Ut)).apply(this,arguments))}return ct(Ut,[{key:"format",value:function(Yt,er){Bt.indexOf(Yt)>-1?er?this.domNode.setAttribute(Yt,er):this.domNode.removeAttribute(Yt):dt(Ut.prototype.__proto__||Object.getPrototypeOf(Ut.prototype),"format",this).call(this,Yt,er)}}],[{key:"create",value:function(Yt){var er=dt(Ut.__proto__||Object.getPrototypeOf(Ut),"create",this).call(this,Yt);return er.setAttribute("frameborder","0"),er.setAttribute("allowfullscreen",!0),er.setAttribute("src",this.sanitize(Yt)),er}},{key:"formats",value:function(Yt){return Bt.reduce(function(er,ar){return Yt.hasAttribute(ar)&&(er[ar]=Yt.getAttribute(ar)),er},{})}},{key:"sanitize",value:function(Yt){return kt.default.sanitize(Yt)}},{key:"value",value:function(Yt){return Yt.getAttribute("src")}}]),Ut}(ft.BlockEmbed);zt.blotName="video",zt.className="ql-video",zt.tagName="IFRAME",ot.default=zt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.FormulaBlot=void 0;var ct=function(){function Yt(er,ar){for(var ir=0;ir<ar.length;ir++){var lr=ar[ir];lr.enumerable=lr.enumerable||!1,lr.configurable=!0,"value"in lr&&(lr.writable=!0),Object.defineProperty(er,lr.key,lr)}}return function(er,ar,ir){return ar&&Yt(er.prototype,ar),ir&&Yt(er,ir),er}}(),dt=function Yt(er,ar,ir){er===null&&(er=Function.prototype);var lr=Object.getOwnPropertyDescriptor(er,ar);if(lr===void 0){var cr=Object.getPrototypeOf(er);return cr===null?void 0:Yt(cr,ar,ir)}else{if("value"in lr)return lr.value;var vr=lr.get;return vr===void 0?void 0:vr.call(ir)}},ft=ut(35),St=jt(ft),kt=ut(5),Tt=jt(kt),Rt=ut(9),Ft=jt(Rt);function jt(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}function Bt(Yt,er){if(!(Yt instanceof er))throw new TypeError("Cannot call a class as a function")}function zt(Yt,er){if(!Yt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return er&&(typeof er=="object"||typeof er=="function")?er:Yt}function Ht(Yt,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof er);Yt.prototype=Object.create(er&&er.prototype,{constructor:{value:Yt,enumerable:!1,writable:!0,configurable:!0}}),er&&(Object.setPrototypeOf?Object.setPrototypeOf(Yt,er):Yt.__proto__=er)}var Ut=function(Yt){Ht(er,Yt);function er(){return Bt(this,er),zt(this,(er.__proto__||Object.getPrototypeOf(er)).apply(this,arguments))}return ct(er,null,[{key:"create",value:function(ir){var lr=dt(er.__proto__||Object.getPrototypeOf(er),"create",this).call(this,ir);return typeof ir=="string"&&(window.katex.render(ir,lr,{throwOnError:!1,errorColor:"#f00"}),lr.setAttribute("data-value",ir)),lr}},{key:"value",value:function(ir){return ir.getAttribute("data-value")}}]),er}(St.default);Ut.blotName="formula",Ut.className="ql-formula",Ut.tagName="SPAN";var Kt=function(Yt){Ht(er,Yt),ct(er,null,[{key:"register",value:function(){Tt.default.register(Ut,!0)}}]);function er(){Bt(this,er);var ar=zt(this,(er.__proto__||Object.getPrototypeOf(er)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return ar}return er}(Ft.default);ot.FormulaBlot=Ut,ot.default=Kt},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.CodeToken=ot.CodeBlock=void 0;var ct=function(){function ir(lr,cr){for(var vr=0;vr<cr.length;vr++){var xr=cr[vr];xr.enumerable=xr.enumerable||!1,xr.configurable=!0,"value"in xr&&(xr.writable=!0),Object.defineProperty(lr,xr.key,xr)}}return function(lr,cr,vr){return cr&&ir(lr.prototype,cr),vr&&ir(lr,vr),lr}}(),dt=function ir(lr,cr,vr){lr===null&&(lr=Function.prototype);var xr=Object.getOwnPropertyDescriptor(lr,cr);if(xr===void 0){var yr=Object.getPrototypeOf(lr);return yr===null?void 0:ir(yr,cr,vr)}else{if("value"in xr)return xr.value;var Sr=xr.get;return Sr===void 0?void 0:Sr.call(vr)}},ft=ut(0),St=zt(ft),kt=ut(5),Tt=zt(kt),Rt=ut(9),Ft=zt(Rt),jt=ut(13),Bt=zt(jt);function zt(ir){return ir&&ir.__esModule?ir:{default:ir}}function Ht(ir,lr){if(!(ir instanceof lr))throw new TypeError("Cannot call a class as a function")}function Ut(ir,lr){if(!ir)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return lr&&(typeof lr=="object"||typeof lr=="function")?lr:ir}function Kt(ir,lr){if(typeof lr!="function"&&lr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof lr);ir.prototype=Object.create(lr&&lr.prototype,{constructor:{value:ir,enumerable:!1,writable:!0,configurable:!0}}),lr&&(Object.setPrototypeOf?Object.setPrototypeOf(ir,lr):ir.__proto__=lr)}var Yt=function(ir){Kt(lr,ir);function lr(){return Ht(this,lr),Ut(this,(lr.__proto__||Object.getPrototypeOf(lr)).apply(this,arguments))}return ct(lr,[{key:"replaceWith",value:function(vr){this.domNode.textContent=this.domNode.textContent,this.attach(),dt(lr.prototype.__proto__||Object.getPrototypeOf(lr.prototype),"replaceWith",this).call(this,vr)}},{key:"highlight",value:function(vr){var xr=this.domNode.textContent;this.cachedText!==xr&&((xr.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=vr(xr),this.domNode.normalize(),this.attach()),this.cachedText=xr)}}]),lr}(Bt.default);Yt.className="ql-syntax";var er=new St.default.Attributor.Class("token","hljs",{scope:St.default.Scope.INLINE}),ar=function(ir){Kt(lr,ir),ct(lr,null,[{key:"register",value:function(){Tt.default.register(er,!0),Tt.default.register(Yt,!0)}}]);function lr(cr,vr){Ht(this,lr);var xr=Ut(this,(lr.__proto__||Object.getPrototypeOf(lr)).call(this,cr,vr));if(typeof xr.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var yr=null;return xr.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(yr),yr=setTimeout(function(){xr.highlight(),yr=null},xr.options.interval)}),xr.highlight(),xr}return ct(lr,[{key:"highlight",value:function(){var vr=this;if(!this.quill.selection.composing){this.quill.update(Tt.default.sources.USER);var xr=this.quill.getSelection();this.quill.scroll.descendants(Yt).forEach(function(yr){yr.highlight(vr.options.highlight)}),this.quill.update(Tt.default.sources.SILENT),xr!=null&&this.quill.setSelection(xr,Tt.default.sources.SILENT)}}}]),lr}(Ft.default);ar.DEFAULTS={highlight:function(){return window.hljs==null?null:function(ir){var lr=window.hljs.highlightAuto(ir);return lr.value}}(),interval:1e3},ot.CodeBlock=Yt,ot.CodeToken=er,ot.default=ar},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(et,ot){et.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(et,ot){et.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(et,ot){et.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(et,ot,ut){Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.BubbleTooltip=void 0;var ct=function lr(cr,vr,xr){cr===null&&(cr=Function.prototype);var yr=Object.getOwnPropertyDescriptor(cr,vr);if(yr===void 0){var Sr=Object.getPrototypeOf(cr);return Sr===null?void 0:lr(Sr,vr,xr)}else{if("value"in yr)return yr.value;var kr=yr.get;return kr===void 0?void 0:kr.call(xr)}},dt=function(){function lr(cr,vr){for(var xr=0;xr<vr.length;xr++){var yr=vr[xr];yr.enumerable=yr.enumerable||!1,yr.configurable=!0,"value"in yr&&(yr.writable=!0),Object.defineProperty(cr,yr.key,yr)}}return function(cr,vr,xr){return vr&&lr(cr.prototype,vr),xr&&lr(cr,xr),cr}}(),ft=ut(3),St=Ht(ft),kt=ut(8),Tt=Ht(kt),Rt=ut(43),Ft=Ht(Rt),jt=ut(15),Bt=ut(41),zt=Ht(Bt);function Ht(lr){return lr&&lr.__esModule?lr:{default:lr}}function Ut(lr,cr){if(!(lr instanceof cr))throw new TypeError("Cannot call a class as a function")}function Kt(lr,cr){if(!lr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return cr&&(typeof cr=="object"||typeof cr=="function")?cr:lr}function Yt(lr,cr){if(typeof cr!="function"&&cr!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof cr);lr.prototype=Object.create(cr&&cr.prototype,{constructor:{value:lr,enumerable:!1,writable:!0,configurable:!0}}),cr&&(Object.setPrototypeOf?Object.setPrototypeOf(lr,cr):lr.__proto__=cr)}var er=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],ar=function(lr){Yt(cr,lr);function cr(vr,xr){Ut(this,cr),xr.modules.toolbar!=null&&xr.modules.toolbar.container==null&&(xr.modules.toolbar.container=er);var yr=Kt(this,(cr.__proto__||Object.getPrototypeOf(cr)).call(this,vr,xr));return yr.quill.container.classList.add("ql-bubble"),yr}return dt(cr,[{key:"extendToolbar",value:function(xr){this.tooltip=new ir(this.quill,this.options.bounds),this.tooltip.root.appendChild(xr.container),this.buildButtons([].slice.call(xr.container.querySelectorAll("button")),zt.default),this.buildPickers([].slice.call(xr.container.querySelectorAll("select")),zt.default)}}]),cr}(Ft.default);ar.DEFAULTS=(0,St.default)(!0,{},Ft.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(cr){cr?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var ir=function(lr){Yt(cr,lr);function cr(vr,xr){Ut(this,cr);var yr=Kt(this,(cr.__proto__||Object.getPrototypeOf(cr)).call(this,vr,xr));return yr.quill.on(Tt.default.events.EDITOR_CHANGE,function(Sr,kr,Pr,Or){if(Sr===Tt.default.events.SELECTION_CHANGE)if(kr!=null&&kr.length>0&&Or===Tt.default.sources.USER){yr.show(),yr.root.style.left="0px",yr.root.style.width="",yr.root.style.width=yr.root.offsetWidth+"px";var hr=yr.quill.getLines(kr.index,kr.length);if(hr.length===1)yr.position(yr.quill.getBounds(kr));else{var Tr=hr[hr.length-1],mr=yr.quill.getIndex(Tr),Er=Math.min(Tr.length()-1,kr.index+kr.length-mr),Dr=yr.quill.getBounds(new jt.Range(mr,Er));yr.position(Dr)}}else document.activeElement!==yr.textbox&&yr.quill.hasFocus()&&yr.hide()}),yr}return dt(cr,[{key:"listen",value:function(){var xr=this;ct(cr.prototype.__proto__||Object.getPrototypeOf(cr.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){xr.root.classList.remove("ql-editing")}),this.quill.on(Tt.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!xr.root.classList.contains("ql-hidden")){var yr=xr.quill.getSelection();yr!=null&&xr.position(xr.quill.getBounds(yr))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(xr){var yr=ct(cr.prototype.__proto__||Object.getPrototypeOf(cr.prototype),"position",this).call(this,xr),Sr=this.root.querySelector(".ql-tooltip-arrow");if(Sr.style.marginLeft="",yr===0)return yr;Sr.style.marginLeft=-1*yr-Sr.offsetWidth/2+"px"}}]),cr}(Rt.BaseTooltip);ir.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),ot.BubbleTooltip=ir,ot.default=ar},function(et,ot,ut){et.exports=ut(63)}]).default})})(quill);var quillExports=quill.exports,__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var it=function(g,et){return it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ot,ut){ot.__proto__=ut}||function(ot,ut){for(var ct in ut)ut.hasOwnProperty(ct)&&(ot[ct]=ut[ct])},it(g,et)};return function(g,et){it(g,et);function ot(){this.constructor=g}g.prototype=et===null?Object.create(et):(ot.prototype=et.prototype,new ot)}}(),__assign$1=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$1=Object.assign||function(it){for(var g,et=1,ot=arguments.length;et<ot;et++){g=arguments[et];for(var ut in g)Object.prototype.hasOwnProperty.call(g,ut)&&(it[ut]=g[ut])}return it},__assign$1.apply(this,arguments)},__spreadArrays$1=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var it=0,g=0,et=arguments.length;g<et;g++)it+=arguments[g].length;for(var ot=Array(it),ut=0,g=0;g<et;g++)for(var ct=arguments[g],dt=0,ft=ct.length;dt<ft;dt++,ut++)ot[ut]=ct[dt];return ot},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}},react_1=__importDefault(reactExports),react_dom_1=__importDefault(reactDomExports),isEqual_1=__importDefault(isEqual_1$1),quill_1=__importDefault(quillExports),ReactQuill=function(it){__extends$1(g,it);function g(et){var ot=it.call(this,et)||this;ot.dirtyProps=["modules","formats","bounds","theme","children"],ot.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],ot.state={generation:0},ot.selection=null,ot.onEditorChange=function(ct,dt,ft,St){var kt,Tt,Rt,Ft;ct==="text-change"?(Tt=(kt=ot).onEditorChangeText)===null||Tt===void 0||Tt.call(kt,ot.editor.root.innerHTML,dt,St,ot.unprivilegedEditor):ct==="selection-change"&&((Ft=(Rt=ot).onEditorChangeSelection)===null||Ft===void 0||Ft.call(Rt,dt,St,ot.unprivilegedEditor))};var ut=ot.isControlled()?et.value:et.defaultValue;return ot.value=ut??"",ot}return g.prototype.validateProps=function(et){var ot;if(react_1.default.Children.count(et.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(react_1.default.Children.count(et.children)){var ut=react_1.default.Children.only(et.children);if(((ot=ut)===null||ot===void 0?void 0:ot.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&et.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},g.prototype.shouldComponentUpdate=function(et,ot){var ut=this,ct;if(this.validateProps(et),!this.editor||this.state.generation!==ot.generation)return!0;if("value"in et){var dt=this.getEditorContents(),ft=(ct=et.value,ct??"");this.isEqualValue(ft,dt)||this.setEditorContents(this.editor,ft)}return et.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,et.readOnly),__spreadArrays$1(this.cleanProps,this.dirtyProps).some(function(St){return!isEqual_1.default(et[St],ut.props[St])})},g.prototype.shouldComponentRegenerate=function(et){var ot=this;return this.dirtyProps.some(function(ut){return!isEqual_1.default(et[ut],ot.props[ut])})},g.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},g.prototype.componentWillUnmount=function(){this.destroyEditor()},g.prototype.componentDidUpdate=function(et,ot){var ut=this;if(this.editor&&this.shouldComponentRegenerate(et)){var ct=this.editor.getContents(),dt=this.editor.getSelection();this.regenerationSnapshot={delta:ct,selection:dt},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==ot.generation){var ft=this.regenerationSnapshot,ct=ft.delta,St=ft.selection;delete this.regenerationSnapshot,this.instantiateEditor();var kt=this.editor;kt.setContents(ct),postpone(function(){return ut.setEditorSelection(kt,St)})}},g.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},g.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},g.prototype.isControlled=function(){return"value"in this.props},g.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},g.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},g.prototype.createEditor=function(et,ot){var ut=new quill_1.default(et,ot);return ot.tabIndex!=null&&this.setEditorTabIndex(ut,ot.tabIndex),this.hookEditor(ut),ut},g.prototype.hookEditor=function(et){this.unprivilegedEditor=this.makeUnprivilegedEditor(et),et.on("editor-change",this.onEditorChange)},g.prototype.unhookEditor=function(et){et.off("editor-change",this.onEditorChange)},g.prototype.getEditorContents=function(){return this.value},g.prototype.getEditorSelection=function(){return this.selection},g.prototype.isDelta=function(et){return et&&et.ops},g.prototype.isEqualValue=function(et,ot){return this.isDelta(et)&&this.isDelta(ot)?isEqual_1.default(et.ops,ot.ops):isEqual_1.default(et,ot)},g.prototype.setEditorContents=function(et,ot){var ut=this;this.value=ot;var ct=this.getEditorSelection();typeof ot=="string"?et.setContents(et.clipboard.convert(ot)):et.setContents(ot),postpone(function(){return ut.setEditorSelection(et,ct)})},g.prototype.setEditorSelection=function(et,ot){if(this.selection=ot,ot){var ut=et.getLength();ot.index=Math.max(0,Math.min(ot.index,ut-1)),ot.length=Math.max(0,Math.min(ot.length,ut-1-ot.index)),et.setSelection(ot)}},g.prototype.setEditorTabIndex=function(et,ot){var ut,ct;!((ct=(ut=et)===null||ut===void 0?void 0:ut.scroll)===null||ct===void 0)&&ct.domNode&&(et.scroll.domNode.tabIndex=ot)},g.prototype.setEditorReadOnly=function(et,ot){ot?et.disable():et.enable()},g.prototype.makeUnprivilegedEditor=function(et){var ot=et;return{getHTML:function(){return ot.root.innerHTML},getLength:ot.getLength.bind(ot),getText:ot.getText.bind(ot),getContents:ot.getContents.bind(ot),getSelection:ot.getSelection.bind(ot),getBounds:ot.getBounds.bind(ot)}},g.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var et=react_dom_1.default.findDOMNode(this.editingArea);if(!et)throw new Error("Cannot find element for editing area");if(et.nodeType===3)throw new Error("Editing area cannot be a text node");return et},g.prototype.renderEditingArea=function(){var et=this,ot=this.props,ut=ot.children,ct=ot.preserveWhitespace,dt=this.state.generation,ft={key:dt,ref:function(St){et.editingArea=St}};return react_1.default.Children.count(ut)?react_1.default.cloneElement(react_1.default.Children.only(ut),ft):ct?react_1.default.createElement("pre",__assign$1({},ft)):react_1.default.createElement("div",__assign$1({},ft))},g.prototype.render=function(){var et;return react_1.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(et=this.props.className,et??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},g.prototype.onEditorChangeText=function(et,ot,ut,ct){var dt,ft;if(this.editor){var St=this.isDelta(this.value)?ct.getContents():ct.getHTML();St!==this.getEditorContents()&&(this.lastDeltaChangeSet=ot,this.value=St,(ft=(dt=this.props).onChange)===null||ft===void 0||ft.call(dt,et,ot,ut,ct))}},g.prototype.onEditorChangeSelection=function(et,ot,ut){var ct,dt,ft,St,kt,Tt;if(this.editor){var Rt=this.getEditorSelection(),Ft=!Rt&&et,jt=Rt&&!et;isEqual_1.default(et,Rt)||(this.selection=et,(dt=(ct=this.props).onChangeSelection)===null||dt===void 0||dt.call(ct,et,ot,ut),Ft?(St=(ft=this.props).onFocus)===null||St===void 0||St.call(ft,et,ot,ut):jt&&((Tt=(kt=this.props).onBlur)===null||Tt===void 0||Tt.call(kt,Rt,ot,ut)))}},g.prototype.focus=function(){this.editor&&this.editor.focus()},g.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},g.displayName="React Quill",g.Quill=quill_1.default,g.defaultProps={theme:"snow",modules:{},readOnly:!1},g}(react_1.default.Component);function postpone(it){Promise.resolve().then(it)}var lib=ReactQuill;const ReactQuill$1=getDefaultExportFromCjs(lib),quill_snow="";function LogoUploader({logoPreview:it,setLogo:g,setLogoPreview:et}){const ot=reactExports.useRef(null),ut=dt=>{const ft=dt.target.files[0];if(!ft)return;if(ft.size>2*1024*1024){y$4.error("File must be less than 2MB"),dt.target.value="";return}const St=new Image;St.onload=()=>{if(St.width>512||St.height>512){y$4.warning("Logo too large! Please use up to 512512 px."),dt.target.value="";return}const kt=new FileReader;kt.onloadend=()=>{g(kt.result),et(kt.result)},kt.readAsDataURL(ft)},St.src=URL.createObjectURL(ft)},ct=()=>{g(null),et(null),ot.current&&(ot.current.value=""),y$4.info("Logo removed")};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Brand Logo (Max 512512  2 MB)"}),jsxRuntimeExports.jsx("input",{ref:ot,type:"file",accept:"image/png, image/jpeg, image/webp",onChange:ut,className:`block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4
                   file:rounded-full file:border-0 file:font-semibold
                   file:bg-royalPurple file:text-white hover:file:opacity-80`}),it&&jsxRuntimeExports.jsx("div",{className:"mt-4 flex flex-col items-center space-y-3",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:it,alt:"Logo preview",className:"w-20 h-20 object-contain border border-gray-700 rounded-md"}),jsxRuntimeExports.jsx("button",{onClick:ct,type:"button",className:"absolute -top-2 -right-2 bg-gray-900 rounded-full p-1 hover:bg-gray-800",title:"Remove",children:jsxRuntimeExports.jsx(CircleX,{size:16,className:"text-red-400 hover:text-red-300"})})]})})]})}function UnsplashImagePicker({onSelect:it}){const[g,et]=reactExports.useState(""),[ot,ut]=reactExports.useState([]),[ct,dt]=reactExports.useState(1),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),Rt=reactExports.useRef(null);async function Ft(Bt=1,zt=!1){if(g.trim()){St(!0);try{const Ht=await axiosInstance.get(`https://cre8tlystudio.com/api/unsplash/search?query=${encodeURIComponent(g)}&per_page=30&page=${Bt}`),Ut=Ht.data.results||Ht.data;(!Ut||Ut.length===0)&&y$4.info("No results found",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"}),ut(Kt=>zt?[...Kt,...Ut]:Ut),Tt(Ut.length>0),dt(Bt)}catch(Ht){console.error("Unsplash fetch failed:",Ht),y$4.error("Failed to fetch images. Please try again.",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"})}finally{St(!1)}}}const jt=()=>{ut([]),dt(1),Ft(1,!1)};return reactExports.useEffect(()=>{if(!Rt.current)return;const Bt=new IntersectionObserver(zt=>{zt[0].isIntersecting&&kt&&!ft&&Ft(ct+1,!0)});return Bt.observe(Rt.current),()=>Bt.disconnect()},[kt,ft,ct,g]),jsxRuntimeExports.jsxs("div",{className:"space-y-4 bg-[#111] p-4 rounded-lg border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("input",{value:g,onChange:Bt=>et(Bt.target.value),placeholder:"Search Unsplash images (e.g. fitness, coffee, nature)",className:"flex-1 bg-gray-900 text-white p-2 rounded-lg border border-gray-700"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:jt,disabled:ft,className:"bg-green text-black font-bold px-4 py-2 rounded-lg transition hover:bg-green-400",children:ft?"Searching...":"Search"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 overflow-y-auto relative",style:{maxHeight:"400px"},children:[ot.map(Bt=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>it(Bt.urls.full,Bt),children:[jsxRuntimeExports.jsx("img",{src:Bt.urls.small,alt:Bt.alt_description,className:"rounded-lg w-full h-40 object-cover group-hover:opacity-75 transition"}),jsxRuntimeExports.jsx("span",{className:"absolute bottom-1 left-1 text-xs bg-black/60 px-1 rounded text-white",children:Bt.user.name})]},Bt.id)),kt&&!ft&&jsxRuntimeExports.jsx("div",{ref:Rt,className:"col-span-full h-8"}),ft&&jsxRuntimeExports.jsx("div",{className:"col-span-full flex justify-center py-4",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-green rounded-full animate-spin"})})]})]})}function CoverUpload({setCover:it}){const[g,et]=reactExports.useState(null),[ot,ut]=reactExports.useState(null),{user:ct}=useAuth(),dt=reactExports.useRef(null),ft=useNavigate(),St=!(ct!=null&&ct.pro_covers),kt=Ft=>{var Ht;const jt=(Ht=Ft.target.files)==null?void 0:Ht[0];if(!jt)return;const Bt=10;if(jt.size>Bt*1024*1024){y$4.error(`File too large. Maximum ${Bt} MB allowed.`);return}const zt=new FileReader;zt.onloadend=()=>{const Ut=zt.result;it(Ut),et(Ut),ut(null)},zt.readAsDataURL(jt)},Tt=()=>ft("/plans"),Rt=(Ft,jt)=>{it(Ft),et(jt.urls.small),ut({name:jt.user.name,profile:jt.user.links.html}),y$4.success("Cover image selected!")};return jsxRuntimeExports.jsxs("div",{className:"relative mt-6 border border-gray-700 rounded-xl p-4 bg-gray-900/60 overflow-hidden",children:[St&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-xl",children:jsxRuntimeExports.jsxs("button",{onClick:Tt,className:`px-8 py-2.5 rounded-lg border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
             text-black font-semibold hover:opacity-90 transition shadow-lg flex items-center gap-2 justify-center`,children:[jsxRuntimeExports.jsx(Lock,{size:15,className:"text-black"}),jsxRuntimeExports.jsx("span",{children:"Unlock Pro Covers"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-gray-300 font-semibold text-lg tracking-wide",children:["Upload or Choose a Cover"," ",jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"(Max 667  1000)"})]}),jsxRuntimeExports.jsx("span",{className:`bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                     text-black font-semibold text-xs px-3 py-1 rounded-full
                     shadow-[0_0_10px_rgba(168,130,255,0.6)]
                     border border-[#d2b6ff]/60 uppercase tracking-wider
                     ${St?"opacity-60":""}`,children:"PRO"})]}),jsxRuntimeExports.jsx("input",{ref:dt,type:"file",accept:"image/*",onChange:kt,className:"hidden",disabled:St}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>!St&&dt.current.click(),disabled:St,className:`px-5 py-2 rounded-md font-semibold text-sm shadow-md transition cursor-pointer flex items-center gap-2 
          ${St?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-green text-black hover:bg-green"}`,children:[jsxRuntimeExports.jsx(Image$4,{size:16})," Choose File"]}),!St&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(UnsplashImagePicker,{onSelect:Rt})}),g&&!St&&jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("img",{src:g,alt:"Cover Preview",className:"w-[225px] h-[320px] object-cover rounded-lg shadow-lg mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This cover will appear before your first page."}),ot&&jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:["Photo by"," ",jsxRuntimeExports.jsx("a",{href:ot.profile,target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:ot.name})," ","on"," ",jsxRuntimeExports.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-green-400 hover:text-green-300",children:"Unsplash"})]})]})]})}function PromptSelect({setText:it}){const[g,et]=reactExports.useState(!1),ot=(ut,ct)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-2 text-xs uppercase tracking-widest text-gray-300 bg-[#0a0a0a] sticky top-0 z-10 border-b border-gray-800",children:ut}),ct.map((dt,ft)=>jsxRuntimeExports.jsx("li",{onClick:()=>{it(dt.text),et(!1)},className:"px-4 py-2 text-gray-200 bg-[#0a0a0a] hover:bg-gradient-to-r from-[#00e07a] to-[#670fe7] hover:text-white cursor-pointer transition",children:dt.label},ft))]});return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Choose a Pre-Made Prompt"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>et(!g),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 text-left flex justify-between items-center hover:bg-gray-700 transition",children:[jsxRuntimeExports.jsx("span",{children:"Select a pre-made prompt..."}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${g?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),g&&jsxRuntimeExports.jsxs("ul",{className:`absolute z-50 mt-1 w-full max-h-60 overflow-y-auto 
                     rounded-lg border border-gray-700 shadow-lg
                     scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900`,style:{backgroundColor:"#0a0a0a",boxShadow:"0 0 25px rgba(0,0,0,0.7)"},children:[ot("Beginner",cannedPrompts.beginner),ot("Professional",cannedPrompts.professional),ot("Advanced",cannedPrompts.expert)]})]})}function ColorThemeChooser({bgTheme:it,setBgTheme:g}){const et=[...colorThemes||[],...gradientThemes||[]],ot=et.find(ut=>ut.name===it)||et[0];return jsxRuntimeExports.jsxs("div",{className:"mt-6 w-full",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-3 font-medium",children:"Theme Color"}),jsxRuntimeExports.jsx("div",{className:"h-14 w-full rounded-lg border border-gray-700 mb-4 shadow-inner transition-all duration-300",style:{background:ot.preview}}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3 overflow-y-auto rounded-lg border border-gray-800 p-2",style:{maxHeight:"300px"},children:et.map(ut=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>g(ut.name),className:`relative w-full h-12 rounded-lg transition-all duration-200 focus:outline-none border shadow-[inset_0_1px_3px_rgba(255,255,255,0.2)]
              ${it===ut.name?"border-green-400 ring-2 ring-green-500/60 scale-[1.05]":"border-gray-700 hover:border-green-300 hover:scale-[1.02]"}`,style:{background:ut.preview},children:[jsxRuntimeExports.jsx("div",{className:"glossy-overlay"}),jsxRuntimeExports.jsx("span",{className:`absolute inset-0 flex items-center justify-center text-[10px] font-semibold uppercase tracking-wide ${["dark","graphite","royal"].includes(ut.name)?"text-white":"text-black"}`,children:ut.label})]},ut.name))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Click a color to set your background theme."})]})}function FontSelector({fontName:it,setFontName:g,fontFile:et,setFontFile:ot}){var jt,Bt;const[ut,ct]=reactExports.useState(it||((jt=fontThemes==null?void 0:fontThemes[0])==null?void 0:jt.name)||""),[dt,ft]=reactExports.useState(ut),[St,kt]=reactExports.useState(!1),[Tt,Rt]=reactExports.useState(!1);reactExports.useEffect(()=>{const zt=fontThemes.find(Kt=>Kt.name===dt);if(!(zt!=null&&zt.file))return;const Ht=zt.file.startsWith("http")?zt.file:`${window.location.origin}${zt.file}`;new FontFace(zt.name,`url(${Ht})`).load().then(Kt=>{document.fonts.add(Kt),Rt(!0)}).catch(()=>Rt(!1))},[dt]);const Ft=zt=>{ct(zt.name),g(zt.name),ot(zt.file),ft(zt.name),kt(!1)};return jsxRuntimeExports.jsxs("div",{className:"relative mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Font Style"}),jsxRuntimeExports.jsx("div",{className:"mb-4 p-4 rounded-xl border border-gray-700 bg-[#1a1a1a] text-center",style:{fontFamily:Tt?dt:"sans-serif",transition:"all 0.3s ease"},children:jsxRuntimeExports.jsx("p",{className:"text-gray-200 font-medium",style:{fontSize:dt==="AdobeArabic"?"24px":"20px",lineHeight:dt==="AdobeArabic"?"1.2":"1.5"},children:"AaBbCc  The quick brown fox jumps over the lazy dog."})}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>kt(!St),className:"w-full flex items-center justify-between bg-[#111] border border-gray-700 text-gray-300 text-base rounded-lg p-2.5 focus:ring-green focus:border-green",style:{fontFamily:Tt?ut:"sans-serif"},children:[jsxRuntimeExports.jsx("span",{children:((Bt=fontThemes.find(zt=>zt.name===ut))==null?void 0:Bt.label)||ut}),St?jsxRuntimeExports.jsx(ChevronUp,{size:18}):jsxRuntimeExports.jsx(ChevronDown,{size:18})]}),St&&jsxRuntimeExports.jsx("div",{className:"absolute z-20 mt-2 w-full max-h-[260px] overflow-y-auto bg-[#111] border border-gray-700 rounded-lg shadow-lg scroll-smooth scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",children:fontThemes.map(zt=>jsxRuntimeExports.jsx("div",{onMouseEnter:()=>ft(zt.name),onClick:()=>Ft(zt),className:`px-4 py-2 cursor-pointer text-gray-300 hover:bg-[#1f1f1f] transition-all duration-150 ${ut===zt.name?"bg-[#1f1f1f]":""}`,style:{fontFamily:zt.name},children:zt.label},zt.name))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"Hover to preview, click to select."})]})}function PromptForm({text:it,setText:g,title:et,setTitle:ot,fontName:ut,setFontName:ct,fontFile:dt,setFontFile:ft,bgTheme:St,setBgTheme:kt,pages:Tt,setPages:Rt,setLogo:Ft,logoPreview:jt,setLogoPreview:Bt,link:zt,setLink:Ht,cover:Ut,setCover:Kt,cta:Yt,setCta:er,onSubmit:ar,loading:ir,contentType:lr}){const{user:cr}=useAuth(),[vr,xr]=reactExports.useState(""),[yr,Sr]=reactExports.useState(0),[kr,Pr]=reactExports.useState(!1),[Or,hr]=reactExports.useState("");reactExports.useEffect(()=>{cr!=null&&cr.cta&&(!Yt||Yt.trim()==="")&&er(cr.cta)},[cr,cr==null?void 0:cr.cta]),reactExports.useEffect(()=>{const Er=((it==null?void 0:it.replace(/<[^>]+>/g,"").trim())||"").length,Dr=1e5,Cr=Dr*.9;Sr(Er),Er>Dr?(kr||y$4.error(`Your prompt is too long (${Er.toLocaleString()} / ${Dr.toLocaleString()} characters). Please shorten it before submitting.`,{autoClose:6e3}),Pr(!0),xr(" Your prompt exceeds the limit. Please shorten it.")):Er>Cr?(Pr(!1),xr(`Approaching limit  ${Er.toLocaleString()} / ${Dr.toLocaleString()} characters.`)):(Pr(!1),xr(""))},[it]);const Tr=mr=>{if(mr.preventDefault(),!it.replace(/<[^>]+>/g,"").trim()){hr("Prompt is required before submission."),y$4.error("Please enter a prompt before submitting.");return}hr(""),ar(mr,lr)};return jsxRuntimeExports.jsxs("form",{onSubmit:Tr,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages (25 max)"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-xs",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"25",value:Tt??"",onChange:mr=>{const Er=mr.target.value;Rt(Er===""?"":Math.min(25,Math.max(1,Number(Er))))},className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg appearance-none"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-y-0 right-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Rt(mr=>Math.max(1,Number(mr||1)-1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Rt(mr=>Math.min(25,Number(mr||1)+1)),className:"px-2 py-1 rounded-md bg-gray-700 text-white text-lg font-bold hover:bg-gray-600 transition",children:""})]})]})]}),jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 mt-4 font-medium",children:"Document Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter a title for your project or document...",value:et,onChange:mr=>ot(mr.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This title will appear at the top of your generated document."})]}),jsxRuntimeExports.jsx(PromptSelect,{setText:g}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"h-[250px] overflow-hidden rounded-lg border border-gray-600 bg-white",style:{color:"#111"},children:jsxRuntimeExports.jsx(ReactQuill$1,{theme:"snow",value:it,onChange:mr=>{g(mr),Or&&hr("")},modules:{toolbar:!1},placeholder:"Write your prompt...",className:"h-[250px]"})}),Or&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2 font-medium",children:Or}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-2",children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-medium ${vr.includes("")?"text-red-500":vr?"text-yellow-500":"text-gray-400"}`,children:vr||" "}),jsxRuntimeExports.jsxs("p",{className:`text-xs ${kr?"text-red-500":"text-gray-400"}`,children:[yr.toLocaleString()," / 100,000"]})]})]}),jsxRuntimeExports.jsx(CoverUpload,{cover:Ut,setCover:Kt}),jsxRuntimeExports.jsx(LogoUploader,{logoPreview:jt,setLogo:Ft,setLogoPreview:Bt}),jsxRuntimeExports.jsx(ColorThemeChooser,{bgTheme:St,setBgTheme:kt}),jsxRuntimeExports.jsx(FontSelector,{fontName:ut,setFontName:ct,fontFile:dt,setFontFile:ft}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Add a Closing Message or Call-to-Action"}),(cr==null?void 0:cr.cta)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("select",{onChange:mr=>{const Er=mr.target.value;Er==="saved"?er(cr.cta):Er==="custom"&&er("")},className:"px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Choose CTA"}),jsxRuntimeExports.jsx("option",{value:"saved",children:"Use My Saved CTA"}),jsxRuntimeExports.jsx("option",{value:"custom",children:"Write New CTA"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 italic ml-2",children:Yt===cr.cta?"Using saved CTA":""})]}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter...`,value:Yt,onChange:mr=>er(mr.target.value),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This message will appear at the end of your lead magnet."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Link or Call-to-Action"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:zt,onChange:mr=>Ht(mr.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This link will appear at the bottom of your PDF as a button."})]}),!ir&&jsxRuntimeExports.jsx("button",{disabled:!it.trim()||it==="<p><br></p>"||kr,type:"submit",className:`w-full px-6 py-3 rounded-xl font-semibold text-lg shadow-lg transition ${!it.trim()||it==="<p><br></p>"||kr?"bg-gray-600 cursor-not-allowed text-gray-300":"bg-green font-semibold text-black hover:opacity-90"}`,children:" Submit Prompt"})]})}function SmartPromptBuilder({onPromptReady:it}){const[g,et]=reactExports.useState(""),[ot,ut]=reactExports.useState(""),[ct,dt]=reactExports.useState(""),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState(!1),{user:Rt,accessToken:Ft}=useAuth(),jt=async()=>{if(!g||!ot||!ct){y$4.error("Please fill out all required fields.");return}if(!(Rt!=null&&Rt.id)){y$4.error("You must be logged in to generate prompts.");return}Tt(!0);try{const Bt=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt-builder",{userId:Rt.id,audience:g,pain:ot,promise:ct,offer:ft},{headers:{Authorization:`Bearer ${Ft}`}});it(Bt.data.prompt)}catch(Bt){console.error(Bt),y$4.error("Failed to generate prompt. Try again.")}finally{Tt(!1)}};return jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/60 p-6 rounded-xl border border-gray-700 space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Smart Prompt Builder"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Answer a few quick questions so we can craft a personalized lead magnet prompt for you."}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Who is this for?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: entrepreneurs, creators, small business owners",value:g,onChange:Bt=>et(Bt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What problem are they facing?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: struggling to grow an email list or convert leads",value:ot,onChange:Bt=>ut(Bt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"What transformation or result do they want?"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: consistently attract qualified leads every week",value:ct,onChange:Bt=>dt(Bt.target.value)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-gray-300 mb-1",children:"Whats your offer or next step? (optional)"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-gray-800 text-white border border-gray-600",placeholder:"Example: join my course, book a free strategy call",value:ft,onChange:Bt=>St(Bt.target.value)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-6 space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:jt,disabled:kt,className:"flex-1 px-6 py-2 bg-green text-black font-semibold rounded hover:bg-green-500 transition",children:kt?"Generating...":"Generate"}),jsxRuntimeExports.jsx("button",{onClick:()=>it(""),disabled:kt,className:"flex-1 px-6 py-2 border border-gray-600 text-gray-300 rounded hover:bg-gray-800 transition",children:"Skip"})]})]})}var shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$2=reactExports;function is$1(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs$1=typeof Object.is=="function"?Object.is:is$1,useState=React$2.useState,useEffect$1=React$2.useEffect,useLayoutEffect=React$2.useLayoutEffect,useDebugValue$1=React$2.useDebugValue;function useSyncExternalStore$2(it,g){var et=g(),ot=useState({inst:{value:et,getSnapshot:g}}),ut=ot[0].inst,ct=ot[1];return useLayoutEffect(function(){ut.value=et,ut.getSnapshot=g,checkIfSnapshotChanged(ut)&&ct({inst:ut})},[it,et,g]),useEffect$1(function(){return checkIfSnapshotChanged(ut)&&ct({inst:ut}),it(function(){checkIfSnapshotChanged(ut)&&ct({inst:ut})})},[it]),useDebugValue$1(et),et}function checkIfSnapshotChanged(it){var g=it.getSnapshot;it=it.value;try{var et=g();return!objectIs$1(it,et)}catch{return!0}}function useSyncExternalStore$1(it,g){return g()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$2.useSyncExternalStore!==void 0?React$2.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;function OrderedMap(it){this.content=it}OrderedMap.prototype={constructor:OrderedMap,find:function(it){for(var g=0;g<this.content.length;g+=2)if(this.content[g]===it)return g;return-1},get:function(it){var g=this.find(it);return g==-1?void 0:this.content[g+1]},update:function(it,g,et){var ot=et&&et!=it?this.remove(et):this,ut=ot.find(it),ct=ot.content.slice();return ut==-1?ct.push(et||it,g):(ct[ut+1]=g,et&&(ct[ut]=et)),new OrderedMap(ct)},remove:function(it){var g=this.find(it);if(g==-1)return this;var et=this.content.slice();return et.splice(g,2),new OrderedMap(et)},addToStart:function(it,g){return new OrderedMap([it,g].concat(this.remove(it).content))},addToEnd:function(it,g){var et=this.remove(it).content.slice();return et.push(it,g),new OrderedMap(et)},addBefore:function(it,g,et){var ot=this.remove(g),ut=ot.content.slice(),ct=ot.find(it);return ut.splice(ct==-1?ut.length:ct,0,g,et),new OrderedMap(ut)},forEach:function(it){for(var g=0;g<this.content.length;g+=2)it(this.content[g],this.content[g+1])},prepend:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(it.content.concat(this.subtract(it).content)):this},append:function(it){return it=OrderedMap.from(it),it.size?new OrderedMap(this.subtract(it).content.concat(it.content)):this},subtract:function(it){var g=this;it=OrderedMap.from(it);for(var et=0;et<it.content.length;et+=2)g=g.remove(it.content[et]);return g},toObject:function(){var it={};return this.forEach(function(g,et){it[g]=et}),it},get size(){return this.content.length>>1}};OrderedMap.from=function(it){if(it instanceof OrderedMap)return it;var g=[];if(it)for(var et in it)g.push(et,it[et]);return new OrderedMap(g)};function findDiffStart(it,g,et){for(let ot=0;;ot++){if(ot==it.childCount||ot==g.childCount)return it.childCount==g.childCount?null:et;let ut=it.child(ot),ct=g.child(ot);if(ut==ct){et+=ut.nodeSize;continue}if(!ut.sameMarkup(ct))return et;if(ut.isText&&ut.text!=ct.text){for(let dt=0;ut.text[dt]==ct.text[dt];dt++)et++;return et}if(ut.content.size||ct.content.size){let dt=findDiffStart(ut.content,ct.content,et+1);if(dt!=null)return dt}et+=ut.nodeSize}}function findDiffEnd(it,g,et,ot){for(let ut=it.childCount,ct=g.childCount;;){if(ut==0||ct==0)return ut==ct?null:{a:et,b:ot};let dt=it.child(--ut),ft=g.child(--ct),St=dt.nodeSize;if(dt==ft){et-=St,ot-=St;continue}if(!dt.sameMarkup(ft))return{a:et,b:ot};if(dt.isText&&dt.text!=ft.text){let kt=0,Tt=Math.min(dt.text.length,ft.text.length);for(;kt<Tt&&dt.text[dt.text.length-kt-1]==ft.text[ft.text.length-kt-1];)kt++,et--,ot--;return{a:et,b:ot}}if(dt.content.size||ft.content.size){let kt=findDiffEnd(dt.content,ft.content,et-1,ot-1);if(kt)return kt}et-=St,ot-=St}}class Fragment{constructor(g,et){if(this.content=g,this.size=et||0,et==null)for(let ot=0;ot<g.length;ot++)this.size+=g[ot].nodeSize}nodesBetween(g,et,ot,ut=0,ct){for(let dt=0,ft=0;ft<et;dt++){let St=this.content[dt],kt=ft+St.nodeSize;if(kt>g&&ot(St,ut+ft,ct||null,dt)!==!1&&St.content.size){let Tt=ft+1;St.nodesBetween(Math.max(0,g-Tt),Math.min(St.content.size,et-Tt),ot,ut+Tt)}ft=kt}}descendants(g){this.nodesBetween(0,this.size,g)}textBetween(g,et,ot,ut){let ct="",dt=!0;return this.nodesBetween(g,et,(ft,St)=>{let kt=ft.isText?ft.text.slice(Math.max(g,St)-St,et-St):ft.isLeaf?ut?typeof ut=="function"?ut(ft):ut:ft.type.spec.leafText?ft.type.spec.leafText(ft):"":"";ft.isBlock&&(ft.isLeaf&&kt||ft.isTextblock)&&ot&&(dt?dt=!1:ct+=ot),ct+=kt},0),ct}append(g){if(!g.size)return this;if(!this.size)return g;let et=this.lastChild,ot=g.firstChild,ut=this.content.slice(),ct=0;for(et.isText&&et.sameMarkup(ot)&&(ut[ut.length-1]=et.withText(et.text+ot.text),ct=1);ct<g.content.length;ct++)ut.push(g.content[ct]);return new Fragment(ut,this.size+g.size)}cut(g,et=this.size){if(g==0&&et==this.size)return this;let ot=[],ut=0;if(et>g)for(let ct=0,dt=0;dt<et;ct++){let ft=this.content[ct],St=dt+ft.nodeSize;St>g&&((dt<g||St>et)&&(ft.isText?ft=ft.cut(Math.max(0,g-dt),Math.min(ft.text.length,et-dt)):ft=ft.cut(Math.max(0,g-dt-1),Math.min(ft.content.size,et-dt-1))),ot.push(ft),ut+=ft.nodeSize),dt=St}return new Fragment(ot,ut)}cutByIndex(g,et){return g==et?Fragment.empty:g==0&&et==this.content.length?this:new Fragment(this.content.slice(g,et))}replaceChild(g,et){let ot=this.content[g];if(ot==et)return this;let ut=this.content.slice(),ct=this.size+et.nodeSize-ot.nodeSize;return ut[g]=et,new Fragment(ut,ct)}addToStart(g){return new Fragment([g].concat(this.content),this.size+g.nodeSize)}addToEnd(g){return new Fragment(this.content.concat(g),this.size+g.nodeSize)}eq(g){if(this.content.length!=g.content.length)return!1;for(let et=0;et<this.content.length;et++)if(!this.content[et].eq(g.content[et]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(g){let et=this.content[g];if(!et)throw new RangeError("Index "+g+" out of range for "+this);return et}maybeChild(g){return this.content[g]||null}forEach(g){for(let et=0,ot=0;et<this.content.length;et++){let ut=this.content[et];g(ut,ot,et),ot+=ut.nodeSize}}findDiffStart(g,et=0){return findDiffStart(this,g,et)}findDiffEnd(g,et=this.size,ot=g.size){return findDiffEnd(this,g,et,ot)}findIndex(g){if(g==0)return retIndex(0,g);if(g==this.size)return retIndex(this.content.length,g);if(g>this.size||g<0)throw new RangeError(`Position ${g} outside of fragment (${this})`);for(let et=0,ot=0;;et++){let ut=this.child(et),ct=ot+ut.nodeSize;if(ct>=g)return ct==g?retIndex(et+1,ct):retIndex(et,ot);ot=ct}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(g=>g.toJSON()):null}static fromJSON(g,et){if(!et)return Fragment.empty;if(!Array.isArray(et))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(et.map(g.nodeFromJSON))}static fromArray(g){if(!g.length)return Fragment.empty;let et,ot=0;for(let ut=0;ut<g.length;ut++){let ct=g[ut];ot+=ct.nodeSize,ut&&ct.isText&&g[ut-1].sameMarkup(ct)?(et||(et=g.slice(0,ut)),et[et.length-1]=ct.withText(et[et.length-1].text+ct.text)):et&&et.push(ct)}return new Fragment(et||g,ot)}static from(g){if(!g)return Fragment.empty;if(g instanceof Fragment)return g;if(Array.isArray(g))return this.fromArray(g);if(g.attrs)return new Fragment([g],g.nodeSize);throw new RangeError("Can not convert "+g+" to a Fragment"+(g.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(it,g){return found.index=it,found.offset=g,found}function compareDeep(it,g){if(it===g)return!0;if(!(it&&typeof it=="object")||!(g&&typeof g=="object"))return!1;let et=Array.isArray(it);if(Array.isArray(g)!=et)return!1;if(et){if(it.length!=g.length)return!1;for(let ot=0;ot<it.length;ot++)if(!compareDeep(it[ot],g[ot]))return!1}else{for(let ot in it)if(!(ot in g)||!compareDeep(it[ot],g[ot]))return!1;for(let ot in g)if(!(ot in it))return!1}return!0}let Mark$1=class hP{constructor(g,et){this.type=g,this.attrs=et}addToSet(g){let et,ot=!1;for(let ut=0;ut<g.length;ut++){let ct=g[ut];if(this.eq(ct))return g;if(this.type.excludes(ct.type))et||(et=g.slice(0,ut));else{if(ct.type.excludes(this.type))return g;!ot&&ct.type.rank>this.type.rank&&(et||(et=g.slice(0,ut)),et.push(this),ot=!0),et&&et.push(ct)}}return et||(et=g.slice()),ot||et.push(this),et}removeFromSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return g.slice(0,et).concat(g.slice(et+1));return g}isInSet(g){for(let et=0;et<g.length;et++)if(this.eq(g[et]))return!0;return!1}eq(g){return this==g||this.type==g.type&&compareDeep(this.attrs,g.attrs)}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Mark.fromJSON");let ot=g.marks[et.type];if(!ot)throw new RangeError(`There is no mark type ${et.type} in this schema`);let ut=ot.create(et.attrs);return ot.checkAttrs(ut.attrs),ut}static sameSet(g,et){if(g==et)return!0;if(g.length!=et.length)return!1;for(let ot=0;ot<g.length;ot++)if(!g[ot].eq(et[ot]))return!1;return!0}static setFrom(g){if(!g||Array.isArray(g)&&g.length==0)return hP.none;if(g instanceof hP)return[g];let et=g.slice();return et.sort((ot,ut)=>ot.type.rank-ut.type.rank),et}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(g,et,ot){this.content=g,this.openStart=et,this.openEnd=ot}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(g,et){let ot=insertInto(this.content,g+this.openStart,et);return ot&&new Slice(ot,this.openStart,this.openEnd)}removeBetween(g,et){return new Slice(removeRange(this.content,g+this.openStart,et+this.openStart),this.openStart,this.openEnd)}eq(g){return this.content.eq(g.content)&&this.openStart==g.openStart&&this.openEnd==g.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let g={content:this.content.toJSON()};return this.openStart>0&&(g.openStart=this.openStart),this.openEnd>0&&(g.openEnd=this.openEnd),g}static fromJSON(g,et){if(!et)return Slice.empty;let ot=et.openStart||0,ut=et.openEnd||0;if(typeof ot!="number"||typeof ut!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(g,et.content),ot,ut)}static maxOpen(g,et=!0){let ot=0,ut=0;for(let ct=g.firstChild;ct&&!ct.isLeaf&&(et||!ct.type.spec.isolating);ct=ct.firstChild)ot++;for(let ct=g.lastChild;ct&&!ct.isLeaf&&(et||!ct.type.spec.isolating);ct=ct.lastChild)ut++;return new Slice(g,ot,ut)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(it,g,et){let{index:ot,offset:ut}=it.findIndex(g),ct=it.maybeChild(ot),{index:dt,offset:ft}=it.findIndex(et);if(ut==g||ct.isText){if(ft!=et&&!it.child(dt).isText)throw new RangeError("Removing non-flat range");return it.cut(0,g).append(it.cut(et))}if(ot!=dt)throw new RangeError("Removing non-flat range");return it.replaceChild(ot,ct.copy(removeRange(ct.content,g-ut-1,et-ut-1)))}function insertInto(it,g,et,ot){let{index:ut,offset:ct}=it.findIndex(g),dt=it.maybeChild(ut);if(ct==g||dt.isText)return ot&&!ot.canReplace(ut,ut,et)?null:it.cut(0,g).append(et).append(it.cut(g));let ft=insertInto(dt.content,g-ct-1,et,dt);return ft&&it.replaceChild(ut,dt.copy(ft))}function replace(it,g,et){if(et.openStart>it.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(it.depth-et.openStart!=g.depth-et.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(it,g,et,0)}function replaceOuter(it,g,et,ot){let ut=it.index(ot),ct=it.node(ot);if(ut==g.index(ot)&&ot<it.depth-et.openStart){let dt=replaceOuter(it,g,et,ot+1);return ct.copy(ct.content.replaceChild(ut,dt))}else if(et.content.size)if(!et.openStart&&!et.openEnd&&it.depth==ot&&g.depth==ot){let dt=it.parent,ft=dt.content;return close(dt,ft.cut(0,it.parentOffset).append(et.content).append(ft.cut(g.parentOffset)))}else{let{start:dt,end:ft}=prepareSliceForReplace(et,it);return close(ct,replaceThreeWay(it,dt,ft,g,ot))}else return close(ct,replaceTwoWay(it,g,ot))}function checkJoin(it,g){if(!g.type.compatibleContent(it.type))throw new ReplaceError("Cannot join "+g.type.name+" onto "+it.type.name)}function joinable$1(it,g,et){let ot=it.node(et);return checkJoin(ot,g.node(et)),ot}function addNode(it,g){let et=g.length-1;et>=0&&it.isText&&it.sameMarkup(g[et])?g[et]=it.withText(g[et].text+it.text):g.push(it)}function addRange(it,g,et,ot){let ut=(g||it).node(et),ct=0,dt=g?g.index(et):ut.childCount;it&&(ct=it.index(et),it.depth>et?ct++:it.textOffset&&(addNode(it.nodeAfter,ot),ct++));for(let ft=ct;ft<dt;ft++)addNode(ut.child(ft),ot);g&&g.depth==et&&g.textOffset&&addNode(g.nodeBefore,ot)}function close(it,g){return it.type.checkContent(g),it.copy(g)}function replaceThreeWay(it,g,et,ot,ut){let ct=it.depth>ut&&joinable$1(it,g,ut+1),dt=ot.depth>ut&&joinable$1(et,ot,ut+1),ft=[];return addRange(null,it,ut,ft),ct&&dt&&g.index(ut)==et.index(ut)?(checkJoin(ct,dt),addNode(close(ct,replaceThreeWay(it,g,et,ot,ut+1)),ft)):(ct&&addNode(close(ct,replaceTwoWay(it,g,ut+1)),ft),addRange(g,et,ut,ft),dt&&addNode(close(dt,replaceTwoWay(et,ot,ut+1)),ft)),addRange(ot,null,ut,ft),new Fragment(ft)}function replaceTwoWay(it,g,et){let ot=[];if(addRange(null,it,et,ot),it.depth>et){let ut=joinable$1(it,g,et+1);addNode(close(ut,replaceTwoWay(it,g,et+1)),ot)}return addRange(g,null,et,ot),new Fragment(ot)}function prepareSliceForReplace(it,g){let et=g.depth-it.openStart,ut=g.node(et).copy(it.content);for(let ct=et-1;ct>=0;ct--)ut=g.node(ct).copy(Fragment.from(ut));return{start:ut.resolveNoCache(it.openStart+et),end:ut.resolveNoCache(ut.content.size-it.openEnd-et)}}class ResolvedPos{constructor(g,et,ot){this.pos=g,this.path=et,this.parentOffset=ot,this.depth=et.length/3-1}resolveDepth(g){return g==null?this.depth:g<0?this.depth+g:g}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(g){return this.path[this.resolveDepth(g)*3]}index(g){return this.path[this.resolveDepth(g)*3+1]}indexAfter(g){return g=this.resolveDepth(g),this.index(g)+(g==this.depth&&!this.textOffset?0:1)}start(g){return g=this.resolveDepth(g),g==0?0:this.path[g*3-1]+1}end(g){return g=this.resolveDepth(g),this.start(g)+this.node(g).content.size}before(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position before the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]}after(g){if(g=this.resolveDepth(g),!g)throw new RangeError("There is no position after the top-level node");return g==this.depth+1?this.pos:this.path[g*3-1]+this.path[g*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let g=this.parent,et=this.index(this.depth);if(et==g.childCount)return null;let ot=this.pos-this.path[this.path.length-1],ut=g.child(et);return ot?g.child(et).cut(ot):ut}get nodeBefore(){let g=this.index(this.depth),et=this.pos-this.path[this.path.length-1];return et?this.parent.child(g).cut(0,et):g==0?null:this.parent.child(g-1)}posAtIndex(g,et){et=this.resolveDepth(et);let ot=this.path[et*3],ut=et==0?0:this.path[et*3-1]+1;for(let ct=0;ct<g;ct++)ut+=ot.child(ct).nodeSize;return ut}marks(){let g=this.parent,et=this.index();if(g.content.size==0)return Mark$1.none;if(this.textOffset)return g.child(et).marks;let ot=g.maybeChild(et-1),ut=g.maybeChild(et);if(!ot){let ft=ot;ot=ut,ut=ft}let ct=ot.marks;for(var dt=0;dt<ct.length;dt++)ct[dt].type.spec.inclusive===!1&&(!ut||!ct[dt].isInSet(ut.marks))&&(ct=ct[dt--].removeFromSet(ct));return ct}marksAcross(g){let et=this.parent.maybeChild(this.index());if(!et||!et.isInline)return null;let ot=et.marks,ut=g.parent.maybeChild(g.index());for(var ct=0;ct<ot.length;ct++)ot[ct].type.spec.inclusive===!1&&(!ut||!ot[ct].isInSet(ut.marks))&&(ot=ot[ct--].removeFromSet(ot));return ot}sharedDepth(g){for(let et=this.depth;et>0;et--)if(this.start(et)<=g&&this.end(et)>=g)return et;return 0}blockRange(g=this,et){if(g.pos<this.pos)return g.blockRange(this);for(let ot=this.depth-(this.parent.inlineContent||this.pos==g.pos?1:0);ot>=0;ot--)if(g.pos<=this.end(ot)&&(!et||et(this.node(ot))))return new NodeRange(this,g,ot);return null}sameParent(g){return this.pos-this.parentOffset==g.pos-g.parentOffset}max(g){return g.pos>this.pos?g:this}min(g){return g.pos<this.pos?g:this}toString(){let g="";for(let et=1;et<=this.depth;et++)g+=(g?"/":"")+this.node(et).type.name+"_"+this.index(et-1);return g+":"+this.parentOffset}static resolve(g,et){if(!(et>=0&&et<=g.content.size))throw new RangeError("Position "+et+" out of range");let ot=[],ut=0,ct=et;for(let dt=g;;){let{index:ft,offset:St}=dt.content.findIndex(ct),kt=ct-St;if(ot.push(dt,ft,ut+St),!kt||(dt=dt.child(ft),dt.isText))break;ct=kt-1,ut+=St+1}return new ResolvedPos(et,ot,ct)}static resolveCached(g,et){let ot=resolveCache.get(g);if(ot)for(let ct=0;ct<ot.elts.length;ct++){let dt=ot.elts[ct];if(dt.pos==et)return dt}else resolveCache.set(g,ot=new ResolveCache);let ut=ot.elts[ot.i]=ResolvedPos.resolve(g,et);return ot.i=(ot.i+1)%resolveCacheSize,ut}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(g,et,ot){this.$from=g,this.$to=et,this.depth=ot}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class dP{constructor(g,et,ot,ut=Mark$1.none){this.type=g,this.attrs=et,this.marks=ut,this.content=ot||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(g){return this.content.child(g)}maybeChild(g){return this.content.maybeChild(g)}forEach(g){this.content.forEach(g)}nodesBetween(g,et,ot,ut=0){this.content.nodesBetween(g,et,ot,ut,this)}descendants(g){this.nodesBetween(0,this.content.size,g)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(g,et,ot,ut){return this.content.textBetween(g,et,ot,ut)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(g){return this==g||this.sameMarkup(g)&&this.content.eq(g.content)}sameMarkup(g){return this.hasMarkup(g.type,g.attrs,g.marks)}hasMarkup(g,et,ot){return this.type==g&&compareDeep(this.attrs,et||g.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,ot||Mark$1.none)}copy(g=null){return g==this.content?this:new dP(this.type,this.attrs,g,this.marks)}mark(g){return g==this.marks?this:new dP(this.type,this.attrs,this.content,g)}cut(g,et=this.content.size){return g==0&&et==this.content.size?this:this.copy(this.content.cut(g,et))}slice(g,et=this.content.size,ot=!1){if(g==et)return Slice.empty;let ut=this.resolve(g),ct=this.resolve(et),dt=ot?0:ut.sharedDepth(et),ft=ut.start(dt),kt=ut.node(dt).content.cut(ut.pos-ft,ct.pos-ft);return new Slice(kt,ut.depth-dt,ct.depth-dt)}replace(g,et,ot){return replace(this.resolve(g),this.resolve(et),ot)}nodeAt(g){for(let et=this;;){let{index:ot,offset:ut}=et.content.findIndex(g);if(et=et.maybeChild(ot),!et)return null;if(ut==g||et.isText)return et;g-=ut+1}}childAfter(g){let{index:et,offset:ot}=this.content.findIndex(g);return{node:this.content.maybeChild(et),index:et,offset:ot}}childBefore(g){if(g==0)return{node:null,index:0,offset:0};let{index:et,offset:ot}=this.content.findIndex(g);if(ot<g)return{node:this.content.child(et),index:et,offset:ot};let ut=this.content.child(et-1);return{node:ut,index:et-1,offset:ot-ut.nodeSize}}resolve(g){return ResolvedPos.resolveCached(this,g)}resolveNoCache(g){return ResolvedPos.resolve(this,g)}rangeHasMark(g,et,ot){let ut=!1;return et>g&&this.nodesBetween(g,et,ct=>(ot.isInSet(ct.marks)&&(ut=!0),!ut)),ut}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let g=this.type.name;return this.content.size&&(g+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,g)}contentMatchAt(g){let et=this.type.contentMatch.matchFragment(this.content,0,g);if(!et)throw new Error("Called contentMatchAt on a node with invalid content");return et}canReplace(g,et,ot=Fragment.empty,ut=0,ct=ot.childCount){let dt=this.contentMatchAt(g).matchFragment(ot,ut,ct),ft=dt&&dt.matchFragment(this.content,et);if(!ft||!ft.validEnd)return!1;for(let St=ut;St<ct;St++)if(!this.type.allowsMarks(ot.child(St).marks))return!1;return!0}canReplaceWith(g,et,ot,ut){if(ut&&!this.type.allowsMarks(ut))return!1;let ct=this.contentMatchAt(g).matchType(ot),dt=ct&&ct.matchFragment(this.content,et);return dt?dt.validEnd:!1}canAppend(g){return g.content.size?this.canReplace(this.childCount,this.childCount,g.content):this.type.compatibleContent(g.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let g=Mark$1.none;for(let et=0;et<this.marks.length;et++){let ot=this.marks[et];ot.type.checkAttrs(ot.attrs),g=ot.addToSet(g)}if(!Mark$1.sameSet(g,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(et=>et.type.name)}`);this.content.forEach(et=>et.check())}toJSON(){let g={type:this.type.name};for(let et in this.attrs){g.attrs=this.attrs;break}return this.content.size&&(g.content=this.content.toJSON()),this.marks.length&&(g.marks=this.marks.map(et=>et.toJSON())),g}static fromJSON(g,et){if(!et)throw new RangeError("Invalid input for Node.fromJSON");let ot;if(et.marks){if(!Array.isArray(et.marks))throw new RangeError("Invalid mark data for Node.fromJSON");ot=et.marks.map(g.markFromJSON)}if(et.type=="text"){if(typeof et.text!="string")throw new RangeError("Invalid text node in JSON");return g.text(et.text,ot)}let ut=Fragment.fromJSON(g,et.content),ct=g.nodeType(et.type).create(et.attrs,ut,ot);return ct.type.checkAttrs(ct.attrs),ct}};Node$2.prototype.text=void 0;class TextNode extends Node$2{constructor(g,et,ot,ut){if(super(g,et,null,ut),!ot)throw new RangeError("Empty text nodes are not allowed");this.text=ot}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(g,et){return this.text.slice(g,et)}get nodeSize(){return this.text.length}mark(g){return g==this.marks?this:new TextNode(this.type,this.attrs,this.text,g)}withText(g){return g==this.text?this:new TextNode(this.type,this.attrs,g,this.marks)}cut(g=0,et=this.text.length){return g==0&&et==this.text.length?this:this.withText(this.text.slice(g,et))}eq(g){return this.sameMarkup(g)&&this.text==g.text}toJSON(){let g=super.toJSON();return g.text=this.text,g}}function wrapMarks(it,g){for(let et=it.length-1;et>=0;et--)g=it[et].type.name+"("+g+")";return g}class ContentMatch{constructor(g){this.validEnd=g,this.next=[],this.wrapCache=[]}static parse(g,et){let ot=new TokenStream(g,et);if(ot.next==null)return ContentMatch.empty;let ut=parseExpr(ot);ot.next&&ot.err("Unexpected trailing text");let ct=dfa(nfa(ut));return checkForDeadEnds(ct,ot),ct}matchType(g){for(let et=0;et<this.next.length;et++)if(this.next[et].type==g)return this.next[et].next;return null}matchFragment(g,et=0,ot=g.childCount){let ut=this;for(let ct=et;ut&&ct<ot;ct++)ut=ut.matchType(g.child(ct).type);return ut}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let g=0;g<this.next.length;g++){let{type:et}=this.next[g];if(!(et.isText||et.hasRequiredAttrs()))return et}return null}compatible(g){for(let et=0;et<this.next.length;et++)for(let ot=0;ot<g.next.length;ot++)if(this.next[et].type==g.next[ot].type)return!0;return!1}fillBefore(g,et=!1,ot=0){let ut=[this];function ct(dt,ft){let St=dt.matchFragment(g,ot);if(St&&(!et||St.validEnd))return Fragment.from(ft.map(kt=>kt.createAndFill()));for(let kt=0;kt<dt.next.length;kt++){let{type:Tt,next:Rt}=dt.next[kt];if(!(Tt.isText||Tt.hasRequiredAttrs())&&ut.indexOf(Rt)==-1){ut.push(Rt);let Ft=ct(Rt,ft.concat(Tt));if(Ft)return Ft}}return null}return ct(this,[])}findWrapping(g){for(let ot=0;ot<this.wrapCache.length;ot+=2)if(this.wrapCache[ot]==g)return this.wrapCache[ot+1];let et=this.computeWrapping(g);return this.wrapCache.push(g,et),et}computeWrapping(g){let et=Object.create(null),ot=[{match:this,type:null,via:null}];for(;ot.length;){let ut=ot.shift(),ct=ut.match;if(ct.matchType(g)){let dt=[];for(let ft=ut;ft.type;ft=ft.via)dt.push(ft.type);return dt.reverse()}for(let dt=0;dt<ct.next.length;dt++){let{type:ft,next:St}=ct.next[dt];!ft.isLeaf&&!ft.hasRequiredAttrs()&&!(ft.name in et)&&(!ut.type||St.validEnd)&&(ot.push({match:ft.contentMatch,type:ft,via:ut}),et[ft.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(g){if(g>=this.next.length)throw new RangeError(`There's no ${g}th edge in this content match`);return this.next[g]}toString(){let g=[];function et(ot){g.push(ot);for(let ut=0;ut<ot.next.length;ut++)g.indexOf(ot.next[ut].next)==-1&&et(ot.next[ut].next)}return et(this),g.map((ot,ut)=>{let ct=ut+(ot.validEnd?"*":" ")+" ";for(let dt=0;dt<ot.next.length;dt++)ct+=(dt?", ":"")+ot.next[dt].type.name+"->"+g.indexOf(ot.next[dt].next);return ct}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(g,et){this.string=g,this.nodeTypes=et,this.inline=null,this.pos=0,this.tokens=g.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(g){return this.next==g&&(this.pos++||!0)}err(g){throw new SyntaxError(g+" (in content expression '"+this.string+"')")}}function parseExpr(it){let g=[];do g.push(parseExprSeq(it));while(it.eat("|"));return g.length==1?g[0]:{type:"choice",exprs:g}}function parseExprSeq(it){let g=[];do g.push(parseExprSubscript(it));while(it.next&&it.next!=")"&&it.next!="|");return g.length==1?g[0]:{type:"seq",exprs:g}}function parseExprSubscript(it){let g=parseExprAtom(it);for(;;)if(it.eat("+"))g={type:"plus",expr:g};else if(it.eat("*"))g={type:"star",expr:g};else if(it.eat("?"))g={type:"opt",expr:g};else if(it.eat("{"))g=parseExprRange(it,g);else break;return g}function parseNum(it){/\D/.test(it.next)&&it.err("Expected number, got '"+it.next+"'");let g=Number(it.next);return it.pos++,g}function parseExprRange(it,g){let et=parseNum(it),ot=et;return it.eat(",")&&(it.next!="}"?ot=parseNum(it):ot=-1),it.eat("}")||it.err("Unclosed braced range"),{type:"range",min:et,max:ot,expr:g}}function resolveName(it,g){let et=it.nodeTypes,ot=et[g];if(ot)return[ot];let ut=[];for(let ct in et){let dt=et[ct];dt.isInGroup(g)&&ut.push(dt)}return ut.length==0&&it.err("No node type or group '"+g+"' found"),ut}function parseExprAtom(it){if(it.eat("(")){let g=parseExpr(it);return it.eat(")")||it.err("Missing closing paren"),g}else if(/\W/.test(it.next))it.err("Unexpected token '"+it.next+"'");else{let g=resolveName(it,it.next).map(et=>(it.inline==null?it.inline=et.isInline:it.inline!=et.isInline&&it.err("Mixing inline and block content"),{type:"name",value:et}));return it.pos++,g.length==1?g[0]:{type:"choice",exprs:g}}}function nfa(it){let g=[[]];return ut(ct(it,0),et()),g;function et(){return g.push([])-1}function ot(dt,ft,St){let kt={term:St,to:ft};return g[dt].push(kt),kt}function ut(dt,ft){dt.forEach(St=>St.to=ft)}function ct(dt,ft){if(dt.type=="choice")return dt.exprs.reduce((St,kt)=>St.concat(ct(kt,ft)),[]);if(dt.type=="seq")for(let St=0;;St++){let kt=ct(dt.exprs[St],ft);if(St==dt.exprs.length-1)return kt;ut(kt,ft=et())}else if(dt.type=="star"){let St=et();return ot(ft,St),ut(ct(dt.expr,St),St),[ot(St)]}else if(dt.type=="plus"){let St=et();return ut(ct(dt.expr,ft),St),ut(ct(dt.expr,St),St),[ot(St)]}else{if(dt.type=="opt")return[ot(ft)].concat(ct(dt.expr,ft));if(dt.type=="range"){let St=ft;for(let kt=0;kt<dt.min;kt++){let Tt=et();ut(ct(dt.expr,St),Tt),St=Tt}if(dt.max==-1)ut(ct(dt.expr,St),St);else for(let kt=dt.min;kt<dt.max;kt++){let Tt=et();ot(St,Tt),ut(ct(dt.expr,St),Tt),St=Tt}return[ot(St)]}else{if(dt.type=="name")return[ot(ft,void 0,dt.value)];throw new Error("Unknown expr type")}}}}function cmp(it,g){return g-it}function nullFrom(it,g){let et=[];return ot(g),et.sort(cmp);function ot(ut){let ct=it[ut];if(ct.length==1&&!ct[0].term)return ot(ct[0].to);et.push(ut);for(let dt=0;dt<ct.length;dt++){let{term:ft,to:St}=ct[dt];!ft&&et.indexOf(St)==-1&&ot(St)}}}function dfa(it){let g=Object.create(null);return et(nullFrom(it,0));function et(ot){let ut=[];ot.forEach(dt=>{it[dt].forEach(({term:ft,to:St})=>{if(!ft)return;let kt;for(let Tt=0;Tt<ut.length;Tt++)ut[Tt][0]==ft&&(kt=ut[Tt][1]);nullFrom(it,St).forEach(Tt=>{kt||ut.push([ft,kt=[]]),kt.indexOf(Tt)==-1&&kt.push(Tt)})})});let ct=g[ot.join(",")]=new ContentMatch(ot.indexOf(it.length-1)>-1);for(let dt=0;dt<ut.length;dt++){let ft=ut[dt][1].sort(cmp);ct.next.push({type:ut[dt][0],next:g[ft.join(",")]||et(ft)})}return ct}}function checkForDeadEnds(it,g){for(let et=0,ot=[it];et<ot.length;et++){let ut=ot[et],ct=!ut.validEnd,dt=[];for(let ft=0;ft<ut.next.length;ft++){let{type:St,next:kt}=ut.next[ft];dt.push(St.name),ct&&!(St.isText||St.hasRequiredAttrs())&&(ct=!1),ot.indexOf(kt)==-1&&ot.push(kt)}ct&&g.err("Only non-generatable nodes ("+dt.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(it){let g=Object.create(null);for(let et in it){let ot=it[et];if(!ot.hasDefault)return null;g[et]=ot.default}return g}function computeAttrs(it,g){let et=Object.create(null);for(let ot in it){let ut=g&&g[ot];if(ut===void 0){let ct=it[ot];if(ct.hasDefault)ut=ct.default;else throw new RangeError("No value supplied for attribute "+ot)}et[ot]=ut}return et}function checkAttrs(it,g,et,ot){for(let ut in g)if(!(ut in it))throw new RangeError(`Unsupported attribute ${ut} for ${et} of type ${ut}`);for(let ut in it){let ct=it[ut];ct.validate&&ct.validate(g[ut])}}function initAttrs(it,g){let et=Object.create(null);if(g)for(let ot in g)et[ot]=new Attribute(it,ot,g[ot]);return et}let NodeType$1=class $3{constructor(g,et,ot){this.name=g,this.schema=et,this.spec=ot,this.markSet=null,this.groups=ot.group?ot.group.split(" "):[],this.attrs=initAttrs(g,ot.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(ot.inline||g=="text"),this.isText=g=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(g){return this.groups.indexOf(g)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let g in this.attrs)if(this.attrs[g].isRequired)return!0;return!1}compatibleContent(g){return this==g||this.contentMatch.compatible(g.contentMatch)}computeAttrs(g){return!g&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,g)}create(g=null,et,ot){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(g),Fragment.from(et),Mark$1.setFrom(ot))}createChecked(g=null,et,ot){return et=Fragment.from(et),this.checkContent(et),new Node$2(this,this.computeAttrs(g),et,Mark$1.setFrom(ot))}createAndFill(g=null,et,ot){if(g=this.computeAttrs(g),et=Fragment.from(et),et.size){let dt=this.contentMatch.fillBefore(et);if(!dt)return null;et=dt.append(et)}let ut=this.contentMatch.matchFragment(et),ct=ut&&ut.fillBefore(Fragment.empty,!0);return ct?new Node$2(this,g,et.append(ct),Mark$1.setFrom(ot)):null}validContent(g){let et=this.contentMatch.matchFragment(g);if(!et||!et.validEnd)return!1;for(let ot=0;ot<g.childCount;ot++)if(!this.allowsMarks(g.child(ot).marks))return!1;return!0}checkContent(g){if(!this.validContent(g))throw new RangeError(`Invalid content for node ${this.name}: ${g.toString().slice(0,50)}`)}checkAttrs(g){checkAttrs(this.attrs,g,"node",this.name)}allowsMarkType(g){return this.markSet==null||this.markSet.indexOf(g)>-1}allowsMarks(g){if(this.markSet==null)return!0;for(let et=0;et<g.length;et++)if(!this.allowsMarkType(g[et].type))return!1;return!0}allowedMarks(g){if(this.markSet==null)return g;let et;for(let ot=0;ot<g.length;ot++)this.allowsMarkType(g[ot].type)?et&&et.push(g[ot]):et||(et=g.slice(0,ot));return et?et.length?et:Mark$1.none:g}static compile(g,et){let ot=Object.create(null);g.forEach((ct,dt)=>ot[ct]=new $3(ct,et,dt));let ut=et.spec.topNode||"doc";if(!ot[ut])throw new RangeError("Schema is missing its top node type ('"+ut+"')");if(!ot.text)throw new RangeError("Every schema needs a 'text' type");for(let ct in ot.text.attrs)throw new RangeError("The text node type should not have attributes");return ot}};function validateType(it,g,et){let ot=et.split("|");return ut=>{let ct=ut===null?"null":typeof ut;if(ot.indexOf(ct)<0)throw new RangeError(`Expected value of type ${ot} for attribute ${g} on type ${it}, got ${ct}`)}}class Attribute{constructor(g,et,ot){this.hasDefault=Object.prototype.hasOwnProperty.call(ot,"default"),this.default=ot.default,this.validate=typeof ot.validate=="string"?validateType(g,et,ot.validate):ot.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(g,et,ot,ut){this.name=g,this.rank=et,this.schema=ot,this.spec=ut,this.attrs=initAttrs(g,ut.attrs),this.excluded=null;let ct=defaultAttrs(this.attrs);this.instance=ct?new Mark$1(this,ct):null}create(g=null){return!g&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,g))}static compile(g,et){let ot=Object.create(null),ut=0;return g.forEach((ct,dt)=>ot[ct]=new MarkType(ct,ut++,et,dt)),ot}removeFromSet(g){for(var et=0;et<g.length;et++)g[et].type==this&&(g=g.slice(0,et).concat(g.slice(et+1)),et--);return g}isInSet(g){for(let et=0;et<g.length;et++)if(g[et].type==this)return g[et]}checkAttrs(g){checkAttrs(this.attrs,g,"mark",this.name)}excludes(g){return this.excluded.indexOf(g)>-1}}class Schema{constructor(g){this.linebreakReplacement=null,this.cached=Object.create(null);let et=this.spec={};for(let ut in g)et[ut]=g[ut];et.nodes=OrderedMap.from(g.nodes),et.marks=OrderedMap.from(g.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let ot=Object.create(null);for(let ut in this.nodes){if(ut in this.marks)throw new RangeError(ut+" can not be both a node and a mark");let ct=this.nodes[ut],dt=ct.spec.content||"",ft=ct.spec.marks;if(ct.contentMatch=ot[dt]||(ot[dt]=ContentMatch.parse(dt,this.nodes)),ct.inlineContent=ct.contentMatch.inlineContent,ct.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!ct.isInline||!ct.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=ct}ct.markSet=ft=="_"?null:ft?gatherMarks(this,ft.split(" ")):ft==""||!ct.inlineContent?[]:null}for(let ut in this.marks){let ct=this.marks[ut],dt=ct.spec.excludes;ct.excluded=dt==null?[ct]:dt==""?[]:gatherMarks(this,dt.split(" "))}this.nodeFromJSON=ut=>Node$2.fromJSON(this,ut),this.markFromJSON=ut=>Mark$1.fromJSON(this,ut),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(g,et=null,ot,ut){if(typeof g=="string")g=this.nodeType(g);else if(g instanceof NodeType$1){if(g.schema!=this)throw new RangeError("Node type from different schema used ("+g.name+")")}else throw new RangeError("Invalid node type: "+g);return g.createChecked(et,ot,ut)}text(g,et){let ot=this.nodes.text;return new TextNode(ot,ot.defaultAttrs,g,Mark$1.setFrom(et))}mark(g,et){return typeof g=="string"&&(g=this.marks[g]),g.create(et)}nodeType(g){let et=this.nodes[g];if(!et)throw new RangeError("Unknown node type: "+g);return et}}function gatherMarks(it,g){let et=[];for(let ot=0;ot<g.length;ot++){let ut=g[ot],ct=it.marks[ut],dt=ct;if(ct)et.push(ct);else for(let ft in it.marks){let St=it.marks[ft];(ut=="_"||St.spec.group&&St.spec.group.split(" ").indexOf(ut)>-1)&&et.push(dt=St)}if(!dt)throw new SyntaxError("Unknown mark type: '"+g[ot]+"'")}return et}function isTagRule(it){return it.tag!=null}function isStyleRule(it){return it.style!=null}class DOMParser{constructor(g,et){this.schema=g,this.rules=et,this.tags=[],this.styles=[];let ot=this.matchedStyles=[];et.forEach(ut=>{if(isTagRule(ut))this.tags.push(ut);else if(isStyleRule(ut)){let ct=/[^=]*/.exec(ut.style)[0];ot.indexOf(ct)<0&&ot.push(ct),this.styles.push(ut)}}),this.normalizeLists=!this.tags.some(ut=>{if(!/^(ul|ol)\b/.test(ut.tag)||!ut.node)return!1;let ct=g.nodes[ut.node];return ct.contentMatch.matchType(ct)})}parse(g,et={}){let ot=new ParseContext(this,et,!1);return ot.addAll(g,Mark$1.none,et.from,et.to),ot.finish()}parseSlice(g,et={}){let ot=new ParseContext(this,et,!0);return ot.addAll(g,Mark$1.none,et.from,et.to),Slice.maxOpen(ot.finish())}matchTag(g,et,ot){for(let ut=ot?this.tags.indexOf(ot)+1:0;ut<this.tags.length;ut++){let ct=this.tags[ut];if(matches(g,ct.tag)&&(ct.namespace===void 0||g.namespaceURI==ct.namespace)&&(!ct.context||et.matchesContext(ct.context))){if(ct.getAttrs){let dt=ct.getAttrs(g);if(dt===!1)continue;ct.attrs=dt||void 0}return ct}}}matchStyle(g,et,ot,ut){for(let ct=ut?this.styles.indexOf(ut)+1:0;ct<this.styles.length;ct++){let dt=this.styles[ct],ft=dt.style;if(!(ft.indexOf(g)!=0||dt.context&&!ot.matchesContext(dt.context)||ft.length>g.length&&(ft.charCodeAt(g.length)!=61||ft.slice(g.length+1)!=et))){if(dt.getAttrs){let St=dt.getAttrs(et);if(St===!1)continue;dt.attrs=St||void 0}return dt}}}static schemaRules(g){let et=[];function ot(ut){let ct=ut.priority==null?50:ut.priority,dt=0;for(;dt<et.length;dt++){let ft=et[dt];if((ft.priority==null?50:ft.priority)<ct)break}et.splice(dt,0,ut)}for(let ut in g.marks){let ct=g.marks[ut].spec.parseDOM;ct&&ct.forEach(dt=>{ot(dt=copy(dt)),dt.mark||dt.ignore||dt.clearMark||(dt.mark=ut)})}for(let ut in g.nodes){let ct=g.nodes[ut].spec.parseDOM;ct&&ct.forEach(dt=>{ot(dt=copy(dt)),dt.node||dt.ignore||dt.mark||(dt.node=ut)})}return et}static fromSchema(g){return g.cached.domParser||(g.cached.domParser=new DOMParser(g,DOMParser.schemaRules(g)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(it,g,et){return g!=null?(g?OPT_PRESERVE_WS:0)|(g==="full"?OPT_PRESERVE_WS_FULL:0):it&&it.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:et&~OPT_OPEN_LEFT}class NodeContext{constructor(g,et,ot,ut,ct,dt){this.type=g,this.attrs=et,this.marks=ot,this.solid=ut,this.options=dt,this.content=[],this.activeMarks=Mark$1.none,this.match=ct||(dt&OPT_OPEN_LEFT?null:g.contentMatch)}findWrapping(g){if(!this.match){if(!this.type)return[];let et=this.type.contentMatch.fillBefore(Fragment.from(g));if(et)this.match=this.type.contentMatch.matchFragment(et);else{let ot=this.type.contentMatch,ut;return(ut=ot.findWrapping(g.type))?(this.match=ot,ut):null}}return this.match.findWrapping(g.type)}finish(g){if(!(this.options&OPT_PRESERVE_WS)){let ot=this.content[this.content.length-1],ut;if(ot&&ot.isText&&(ut=/[ \t\r\n\u000c]+$/.exec(ot.text))){let ct=ot;ot.text.length==ut[0].length?this.content.pop():this.content[this.content.length-1]=ct.withText(ct.text.slice(0,ct.text.length-ut[0].length))}}let et=Fragment.from(this.content);return!g&&this.match&&(et=et.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,et,this.marks):et}inlineContext(g){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:g.parentNode&&!blockTags.hasOwnProperty(g.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(g,et,ot){this.parser=g,this.options=et,this.isOpen=ot,this.open=0,this.localPreserveWS=!1;let ut=et.topNode,ct,dt=wsOptionsFor(null,et.preserveWhitespace,0)|(ot?OPT_OPEN_LEFT:0);ut?ct=new NodeContext(ut.type,ut.attrs,Mark$1.none,!0,et.topMatch||ut.type.contentMatch,dt):ot?ct=new NodeContext(null,null,Mark$1.none,!0,null,dt):ct=new NodeContext(g.schema.topNodeType,null,Mark$1.none,!0,null,dt),this.nodes=[ct],this.find=et.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(g,et){g.nodeType==3?this.addTextNode(g,et):g.nodeType==1&&this.addElement(g,et)}addTextNode(g,et){let ot=g.nodeValue,ut=this.top,ct=ut.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(ut.options&OPT_PRESERVE_WS)>0;if(ct==="full"||ut.inlineContext(g)||/[^ \t\r\n\u000c]/.test(ot)){if(ct)ct!=="full"?ot=ot.replace(/\r?\n|\r/g," "):ot=ot.replace(/\r\n?/g,`
`);else if(ot=ot.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(ot)&&this.open==this.nodes.length-1){let dt=ut.content[ut.content.length-1],ft=g.previousSibling;(!dt||ft&&ft.nodeName=="BR"||dt.isText&&/[ \t\r\n\u000c]$/.test(dt.text))&&(ot=ot.slice(1))}ot&&this.insertNode(this.parser.schema.text(ot),et,!/\S/.test(ot)),this.findInText(g)}else this.findInside(g)}addElement(g,et,ot){let ut=this.localPreserveWS,ct=this.top;(g.tagName=="PRE"||/pre/.test(g.style&&g.style.whiteSpace))&&(this.localPreserveWS=!0);let dt=g.nodeName.toLowerCase(),ft;listTags.hasOwnProperty(dt)&&this.parser.normalizeLists&&normalizeList(g);let St=this.options.ruleFromNode&&this.options.ruleFromNode(g)||(ft=this.parser.matchTag(g,this,ot));e:if(St?St.ignore:ignoreTags.hasOwnProperty(dt))this.findInside(g),this.ignoreFallback(g,et);else if(!St||St.skip||St.closeParent){St&&St.closeParent?this.open=Math.max(0,this.open-1):St&&St.skip.nodeType&&(g=St.skip);let kt,Tt=this.needsBlock;if(blockTags.hasOwnProperty(dt))ct.content.length&&ct.content[0].isInline&&this.open&&(this.open--,ct=this.top),kt=!0,ct.type||(this.needsBlock=!0);else if(!g.firstChild){this.leafFallback(g,et);break e}let Rt=St&&St.skip?et:this.readStyles(g,et);Rt&&this.addAll(g,Rt),kt&&this.sync(ct),this.needsBlock=Tt}else{let kt=this.readStyles(g,et);kt&&this.addElementByRule(g,St,kt,St.consuming===!1?ft:void 0)}this.localPreserveWS=ut}leafFallback(g,et){g.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(g.ownerDocument.createTextNode(`
`),et)}ignoreFallback(g,et){g.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),et,!0)}readStyles(g,et){let ot=g.style;if(ot&&ot.length)for(let ut=0;ut<this.parser.matchedStyles.length;ut++){let ct=this.parser.matchedStyles[ut],dt=ot.getPropertyValue(ct);if(dt)for(let ft=void 0;;){let St=this.parser.matchStyle(ct,dt,this,ft);if(!St)break;if(St.ignore)return null;if(St.clearMark?et=et.filter(kt=>!St.clearMark(kt)):et=et.concat(this.parser.schema.marks[St.mark].create(St.attrs)),St.consuming===!1)ft=St;else break}}return et}addElementByRule(g,et,ot,ut){let ct,dt;if(et.node)if(dt=this.parser.schema.nodes[et.node],dt.isLeaf)this.insertNode(dt.create(et.attrs),ot,g.nodeName=="BR")||this.leafFallback(g,ot);else{let St=this.enter(dt,et.attrs||null,ot,et.preserveWhitespace);St&&(ct=!0,ot=St)}else{let St=this.parser.schema.marks[et.mark];ot=ot.concat(St.create(et.attrs))}let ft=this.top;if(dt&&dt.isLeaf)this.findInside(g);else if(ut)this.addElement(g,ot,ut);else if(et.getContent)this.findInside(g),et.getContent(g,this.parser.schema).forEach(St=>this.insertNode(St,ot,!1));else{let St=g;typeof et.contentElement=="string"?St=g.querySelector(et.contentElement):typeof et.contentElement=="function"?St=et.contentElement(g):et.contentElement&&(St=et.contentElement),this.findAround(g,St,!0),this.addAll(St,ot),this.findAround(g,St,!1)}ct&&this.sync(ft)&&this.open--}addAll(g,et,ot,ut){let ct=ot||0;for(let dt=ot?g.childNodes[ot]:g.firstChild,ft=ut==null?null:g.childNodes[ut];dt!=ft;dt=dt.nextSibling,++ct)this.findAtPoint(g,ct),this.addDOM(dt,et);this.findAtPoint(g,ct)}findPlace(g,et,ot){let ut,ct;for(let dt=this.open,ft=0;dt>=0;dt--){let St=this.nodes[dt],kt=St.findWrapping(g);if(kt&&(!ut||ut.length>kt.length+ft)&&(ut=kt,ct=St,!kt.length))break;if(St.solid){if(ot)break;ft+=2}}if(!ut)return null;this.sync(ct);for(let dt=0;dt<ut.length;dt++)et=this.enterInner(ut[dt],null,et,!1);return et}insertNode(g,et,ot){if(g.isInline&&this.needsBlock&&!this.top.type){let ct=this.textblockFromContext();ct&&(et=this.enterInner(ct,null,et))}let ut=this.findPlace(g,et,ot);if(ut){this.closeExtra();let ct=this.top;ct.match&&(ct.match=ct.match.matchType(g.type));let dt=Mark$1.none;for(let ft of ut.concat(g.marks))(ct.type?ct.type.allowsMarkType(ft.type):markMayApply(ft.type,g.type))&&(dt=ft.addToSet(dt));return ct.content.push(g.mark(dt)),!0}return!1}enter(g,et,ot,ut){let ct=this.findPlace(g.create(et),ot,!1);return ct&&(ct=this.enterInner(g,et,ot,!0,ut)),ct}enterInner(g,et,ot,ut=!1,ct){this.closeExtra();let dt=this.top;dt.match=dt.match&&dt.match.matchType(g);let ft=wsOptionsFor(g,ct,dt.options);dt.options&OPT_OPEN_LEFT&&dt.content.length==0&&(ft|=OPT_OPEN_LEFT);let St=Mark$1.none;return ot=ot.filter(kt=>(dt.type?dt.type.allowsMarkType(kt.type):markMayApply(kt.type,g))?(St=kt.addToSet(St),!1):!0),this.nodes.push(new NodeContext(g,et,St,ut,null,ft)),this.open++,ot}closeExtra(g=!1){let et=this.nodes.length-1;if(et>this.open){for(;et>this.open;et--)this.nodes[et-1].content.push(this.nodes[et].finish(g));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(g){for(let et=this.open;et>=0;et--){if(this.nodes[et]==g)return this.open=et,!0;this.localPreserveWS&&(this.nodes[et].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let g=0;for(let et=this.open;et>=0;et--){let ot=this.nodes[et].content;for(let ut=ot.length-1;ut>=0;ut--)g+=ot[ut].nodeSize;et&&g++}return g}findAtPoint(g,et){if(this.find)for(let ot=0;ot<this.find.length;ot++)this.find[ot].node==g&&this.find[ot].offset==et&&(this.find[ot].pos=this.currentPos)}findInside(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].pos==null&&g.nodeType==1&&g.contains(this.find[et].node)&&(this.find[et].pos=this.currentPos)}findAround(g,et,ot){if(g!=et&&this.find)for(let ut=0;ut<this.find.length;ut++)this.find[ut].pos==null&&g.nodeType==1&&g.contains(this.find[ut].node)&&et.compareDocumentPosition(this.find[ut].node)&(ot?2:4)&&(this.find[ut].pos=this.currentPos)}findInText(g){if(this.find)for(let et=0;et<this.find.length;et++)this.find[et].node==g&&(this.find[et].pos=this.currentPos-(g.nodeValue.length-this.find[et].offset))}matchesContext(g){if(g.indexOf("|")>-1)return g.split(/\s*\|\s*/).some(this.matchesContext,this);let et=g.split("/"),ot=this.options.context,ut=!this.isOpen&&(!ot||ot.parent.type==this.nodes[0].type),ct=-(ot?ot.depth+1:0)+(ut?0:1),dt=(ft,St)=>{for(;ft>=0;ft--){let kt=et[ft];if(kt==""){if(ft==et.length-1||ft==0)continue;for(;St>=ct;St--)if(dt(ft-1,St))return!0;return!1}else{let Tt=St>0||St==0&&ut?this.nodes[St].type:ot&&St>=ct?ot.node(St-ct).type:null;if(!Tt||Tt.name!=kt&&!Tt.isInGroup(kt))return!1;St--}}return!0};return dt(et.length-1,this.open)}textblockFromContext(){let g=this.options.context;if(g)for(let et=g.depth;et>=0;et--){let ot=g.node(et).contentMatchAt(g.indexAfter(et)).defaultType;if(ot&&ot.isTextblock&&ot.defaultAttrs)return ot}for(let et in this.parser.schema.nodes){let ot=this.parser.schema.nodes[et];if(ot.isTextblock&&ot.defaultAttrs)return ot}}}function normalizeList(it){for(let g=it.firstChild,et=null;g;g=g.nextSibling){let ot=g.nodeType==1?g.nodeName.toLowerCase():null;ot&&listTags.hasOwnProperty(ot)&&et?(et.appendChild(g),g=et):ot=="li"?et=g:ot&&(et=null)}}function matches(it,g){return(it.matches||it.msMatchesSelector||it.webkitMatchesSelector||it.mozMatchesSelector).call(it,g)}function copy(it){let g={};for(let et in it)g[et]=it[et];return g}function markMayApply(it,g){let et=g.schema.nodes;for(let ot in et){let ut=et[ot];if(!ut.allowsMarkType(it))continue;let ct=[],dt=ft=>{ct.push(ft);for(let St=0;St<ft.edgeCount;St++){let{type:kt,next:Tt}=ft.edge(St);if(kt==g||ct.indexOf(Tt)<0&&dt(Tt))return!0}};if(dt(ut.contentMatch))return!0}}class DOMSerializer{constructor(g,et){this.nodes=g,this.marks=et}serializeFragment(g,et={},ot){ot||(ot=doc$1(et).createDocumentFragment());let ut=ot,ct=[];return g.forEach(dt=>{if(ct.length||dt.marks.length){let ft=0,St=0;for(;ft<ct.length&&St<dt.marks.length;){let kt=dt.marks[St];if(!this.marks[kt.type.name]){St++;continue}if(!kt.eq(ct[ft][0])||kt.type.spec.spanning===!1)break;ft++,St++}for(;ft<ct.length;)ut=ct.pop()[1];for(;St<dt.marks.length;){let kt=dt.marks[St++],Tt=this.serializeMark(kt,dt.isInline,et);Tt&&(ct.push([kt,ut]),ut.appendChild(Tt.dom),ut=Tt.contentDOM||Tt.dom)}}ut.appendChild(this.serializeNodeInner(dt,et))}),ot}serializeNodeInner(g,et){let{dom:ot,contentDOM:ut}=renderSpec(doc$1(et),this.nodes[g.type.name](g),null,g.attrs);if(ut){if(g.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(g.content,et,ut)}return ot}serializeNode(g,et={}){let ot=this.serializeNodeInner(g,et);for(let ut=g.marks.length-1;ut>=0;ut--){let ct=this.serializeMark(g.marks[ut],g.isInline,et);ct&&((ct.contentDOM||ct.dom).appendChild(ot),ot=ct.dom)}return ot}serializeMark(g,et,ot={}){let ut=this.marks[g.type.name];return ut&&renderSpec(doc$1(ot),ut(g,et),null,g.attrs)}static renderSpec(g,et,ot=null,ut){return renderSpec(g,et,ot,ut)}static fromSchema(g){return g.cached.domSerializer||(g.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(g),this.marksFromSchema(g)))}static nodesFromSchema(g){let et=gatherToDOM(g.nodes);return et.text||(et.text=ot=>ot.text),et}static marksFromSchema(g){return gatherToDOM(g.marks)}}function gatherToDOM(it){let g={};for(let et in it){let ot=it[et].spec.toDOM;ot&&(g[et]=ot)}return g}function doc$1(it){return it.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(it){let g=suspiciousAttributeCache.get(it);return g===void 0&&suspiciousAttributeCache.set(it,g=suspiciousAttributesInner(it)),g}function suspiciousAttributesInner(it){let g=null;function et(ot){if(ot&&typeof ot=="object")if(Array.isArray(ot))if(typeof ot[0]=="string")g||(g=[]),g.push(ot);else for(let ut=0;ut<ot.length;ut++)et(ot[ut]);else for(let ut in ot)et(ot[ut])}return et(it),g}function renderSpec(it,g,et,ot){if(typeof g=="string")return{dom:it.createTextNode(g)};if(g.nodeType!=null)return{dom:g};if(g.dom&&g.dom.nodeType!=null)return g;let ut=g[0],ct;if(typeof ut!="string")throw new RangeError("Invalid array passed to renderSpec");if(ot&&(ct=suspiciousAttributes(ot))&&ct.indexOf(g)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let dt=ut.indexOf(" ");dt>0&&(et=ut.slice(0,dt),ut=ut.slice(dt+1));let ft,St=et?it.createElementNS(et,ut):it.createElement(ut),kt=g[1],Tt=1;if(kt&&typeof kt=="object"&&kt.nodeType==null&&!Array.isArray(kt)){Tt=2;for(let Rt in kt)if(kt[Rt]!=null){let Ft=Rt.indexOf(" ");Ft>0?St.setAttributeNS(Rt.slice(0,Ft),Rt.slice(Ft+1),kt[Rt]):Rt=="style"&&St.style?St.style.cssText=kt[Rt]:St.setAttribute(Rt,kt[Rt])}}for(let Rt=Tt;Rt<g.length;Rt++){let Ft=g[Rt];if(Ft===0){if(Rt<g.length-1||Rt>Tt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:St,contentDOM:St}}else{let{dom:jt,contentDOM:Bt}=renderSpec(it,Ft,et,ot);if(St.appendChild(jt),Bt){if(ft)throw new RangeError("Multiple content holes");ft=Bt}}}return{dom:St,contentDOM:ft}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(it,g){return it+g*factor16}function recoverIndex(it){return it&lower16}function recoverOffset(it){return(it-(it&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(g,et,ot){this.pos=g,this.delInfo=et,this.recover=ot}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(g,et=!1){if(this.ranges=g,this.inverted=et,!g.length&&StepMap.empty)return StepMap.empty}recover(g){let et=0,ot=recoverIndex(g);if(!this.inverted)for(let ut=0;ut<ot;ut++)et+=this.ranges[ut*3+2]-this.ranges[ut*3+1];return this.ranges[ot*3]+et+recoverOffset(g)}mapResult(g,et=1){return this._map(g,et,!1)}map(g,et=1){return this._map(g,et,!0)}_map(g,et,ot){let ut=0,ct=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ut:0);if(St>g)break;let kt=this.ranges[ft+ct],Tt=this.ranges[ft+dt],Rt=St+kt;if(g<=Rt){let Ft=kt?g==St?-1:g==Rt?1:et:et,jt=St+ut+(Ft<0?0:Tt);if(ot)return jt;let Bt=g==(et<0?St:Rt)?null:makeRecover(ft/3,g-St),zt=g==St?DEL_AFTER:g==Rt?DEL_BEFORE:DEL_ACROSS;return(et<0?g!=St:g!=Rt)&&(zt|=DEL_SIDE),new MapResult(jt,zt,Bt)}ut+=Tt-kt}return ot?g+ut:new MapResult(g+ut,0,null)}touches(g,et){let ot=0,ut=recoverIndex(et),ct=this.inverted?2:1,dt=this.inverted?1:2;for(let ft=0;ft<this.ranges.length;ft+=3){let St=this.ranges[ft]-(this.inverted?ot:0);if(St>g)break;let kt=this.ranges[ft+ct],Tt=St+kt;if(g<=Tt&&ft==ut*3)return!0;ot+=this.ranges[ft+dt]-kt}return!1}forEach(g){let et=this.inverted?2:1,ot=this.inverted?1:2;for(let ut=0,ct=0;ut<this.ranges.length;ut+=3){let dt=this.ranges[ut],ft=dt-(this.inverted?ct:0),St=dt+(this.inverted?0:ct),kt=this.ranges[ut+et],Tt=this.ranges[ut+ot];g(ft,ft+kt,St,St+Tt),ct+=Tt-kt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(g){return g==0?StepMap.empty:new StepMap(g<0?[0,-g,0]:[0,0,g])}}StepMap.empty=new StepMap([]);class Mapping{constructor(g,et,ot=0,ut=g?g.length:0){this.mirror=et,this.from=ot,this.to=ut,this._maps=g||[],this.ownData=!(g||et)}get maps(){return this._maps}slice(g=0,et=this.maps.length){return new Mapping(this._maps,this.mirror,g,et)}appendMap(g,et){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(g),et!=null&&this.setMirror(this._maps.length-1,et)}appendMapping(g){for(let et=0,ot=this._maps.length;et<g._maps.length;et++){let ut=g.getMirror(et);this.appendMap(g._maps[et],ut!=null&&ut<et?ot+ut:void 0)}}getMirror(g){if(this.mirror){for(let et=0;et<this.mirror.length;et++)if(this.mirror[et]==g)return this.mirror[et+(et%2?-1:1)]}}setMirror(g,et){this.mirror||(this.mirror=[]),this.mirror.push(g,et)}appendMappingInverted(g){for(let et=g.maps.length-1,ot=this._maps.length+g._maps.length;et>=0;et--){let ut=g.getMirror(et);this.appendMap(g._maps[et].invert(),ut!=null&&ut>et?ot-ut-1:void 0)}}invert(){let g=new Mapping;return g.appendMappingInverted(this),g}map(g,et=1){if(this.mirror)return this._map(g,et,!0);for(let ot=this.from;ot<this.to;ot++)g=this._maps[ot].map(g,et);return g}mapResult(g,et=1){return this._map(g,et,!1)}_map(g,et,ot){let ut=0;for(let ct=this.from;ct<this.to;ct++){let dt=this._maps[ct],ft=dt.mapResult(g,et);if(ft.recover!=null){let St=this.getMirror(ct);if(St!=null&&St>ct&&St<this.to){ct=St,g=this._maps[St].recover(ft.recover);continue}}ut|=ft.delInfo,g=ft.pos}return ot?g:new MapResult(g,ut,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(g){return null}static fromJSON(g,et){if(!et||!et.stepType)throw new RangeError("Invalid input for Step.fromJSON");let ot=stepsByID[et.stepType];if(!ot)throw new RangeError(`No step type ${et.stepType} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+g);return stepsByID[g]=et,et.prototype.jsonID=g,et}}class StepResult{constructor(g,et){this.doc=g,this.failed=et}static ok(g){return new StepResult(g,null)}static fail(g){return new StepResult(null,g)}static fromReplace(g,et,ot,ut){try{return StepResult.ok(g.replace(et,ot,ut))}catch(ct){if(ct instanceof ReplaceError)return StepResult.fail(ct.message);throw ct}}}function mapFragment(it,g,et){let ot=[];for(let ut=0;ut<it.childCount;ut++){let ct=it.child(ut);ct.content.size&&(ct=ct.copy(mapFragment(ct.content,g,ct))),ct.isInline&&(ct=g(ct,et,ut)),ot.push(ct)}return Fragment.fromArray(ot)}class AddMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=g.resolve(this.from),ut=ot.node(ot.sharedDepth(this.to)),ct=new Slice(mapFragment(et.content,(dt,ft)=>!dt.isAtom||!ft.type.allowsMarkType(this.mark.type)?dt:dt.mark(this.mark.addToSet(dt.marks)),ut),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ct)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new AddMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof AddMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new AddMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(g,et,ot){super(),this.from=g,this.to=et,this.mark=ot}apply(g){let et=g.slice(this.from,this.to),ot=new Slice(mapFragment(et.content,ut=>ut.mark(this.mark.removeFromSet(ut.marks)),g),et.openStart,et.openEnd);return StepResult.fromReplace(g,this.from,this.to,ot)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deleted&&ot.deleted||et.pos>=ot.pos?null:new RemoveMarkStep(et.pos,ot.pos,this.mark)}merge(g){return g instanceof RemoveMarkStep&&g.mark.eq(this.mark)&&this.from<=g.to&&this.to>=g.from?new RemoveMarkStep(Math.min(this.from,g.from),Math.max(this.to,g.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(et.from,et.to,g.markFromJSON(et.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.addToSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);if(et){let ot=this.mark.addToSet(et.marks);if(ot.length==et.marks.length){for(let ut=0;ut<et.marks.length;ut++)if(!et.marks[ut].isInSet(ot))return new AddNodeMarkStep(this.pos,et.marks[ut]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AddNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(g,et){super(),this.pos=g,this.mark=et}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at mark step's position");let ot=et.type.create(et.attrs,null,this.mark.removeFromSet(et.marks));return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ot),0,et.isLeaf?0:1))}invert(g){let et=g.nodeAt(this.pos);return!et||!this.mark.isInSet(et.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new RemoveNodeMarkStep(et.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(et.pos,g.markFromJSON(et.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(g,et,ot,ut=!1){super(),this.from=g,this.to=et,this.slice=ot,this.structure=ut}apply(g){return this.structure&&contentBetween(g,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(g,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(g){return new ReplaceStep(this.from,this.from+this.slice.size,g.slice(this.from,this.to))}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1);return et.deletedAcross&&ot.deletedAcross?null:new ReplaceStep(et.pos,Math.max(et.pos,ot.pos),this.slice,this.structure)}merge(g){if(!(g instanceof ReplaceStep)||g.structure||this.structure)return null;if(this.from+this.slice.size==g.from&&!this.slice.openEnd&&!g.slice.openStart){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(this.slice.content.append(g.slice.content),this.slice.openStart,g.slice.openEnd);return new ReplaceStep(this.from,this.to+(g.to-g.from),et,this.structure)}else if(g.to==this.from&&!this.slice.openStart&&!g.slice.openEnd){let et=this.slice.size+g.slice.size==0?Slice.empty:new Slice(g.slice.content.append(this.slice.content),g.slice.openStart,this.slice.openEnd);return new ReplaceStep(g.from,this.to,et,this.structure)}else return null}toJSON(){let g={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(et.from,et.to,Slice.fromJSON(g,et.slice),!!et.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(g,et,ot,ut,ct,dt,ft=!1){super(),this.from=g,this.to=et,this.gapFrom=ot,this.gapTo=ut,this.slice=ct,this.insert=dt,this.structure=ft}apply(g){if(this.structure&&(contentBetween(g,this.from,this.gapFrom)||contentBetween(g,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let et=g.slice(this.gapFrom,this.gapTo);if(et.openStart||et.openEnd)return StepResult.fail("Gap is not a flat range");let ot=this.slice.insertAt(this.insert,et.content);return ot?StepResult.fromReplace(g,this.from,this.to,ot):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(g){let et=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+et,this.from+this.insert,this.from+this.insert+et,g.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(g){let et=g.mapResult(this.from,1),ot=g.mapResult(this.to,-1),ut=this.from==this.gapFrom?et.pos:g.map(this.gapFrom,-1),ct=this.to==this.gapTo?ot.pos:g.map(this.gapTo,1);return et.deletedAcross&&ot.deletedAcross||ut<et.pos||ct>ot.pos?null:new ReplaceAroundStep(et.pos,ot.pos,ut,ct,this.slice,this.insert,this.structure)}toJSON(){let g={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(g.slice=this.slice.toJSON()),this.structure&&(g.structure=!0),g}static fromJSON(g,et){if(typeof et.from!="number"||typeof et.to!="number"||typeof et.gapFrom!="number"||typeof et.gapTo!="number"||typeof et.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(et.from,et.to,et.gapFrom,et.gapTo,Slice.fromJSON(g,et.slice),et.insert,!!et.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(it,g,et){let ot=it.resolve(g),ut=et-g,ct=ot.depth;for(;ut>0&&ct>0&&ot.indexAfter(ct)==ot.node(ct).childCount;)ct--,ut--;if(ut>0){let dt=ot.node(ct).maybeChild(ot.indexAfter(ct));for(;ut>0;){if(!dt||dt.isLeaf)return!0;dt=dt.firstChild,ut--}}return!1}function addMark(it,g,et,ot){let ut=[],ct=[],dt,ft;it.doc.nodesBetween(g,et,(St,kt,Tt)=>{if(!St.isInline)return;let Rt=St.marks;if(!ot.isInSet(Rt)&&Tt.type.allowsMarkType(ot.type)){let Ft=Math.max(kt,g),jt=Math.min(kt+St.nodeSize,et),Bt=ot.addToSet(Rt);for(let zt=0;zt<Rt.length;zt++)Rt[zt].isInSet(Bt)||(dt&&dt.to==Ft&&dt.mark.eq(Rt[zt])?dt.to=jt:ut.push(dt=new RemoveMarkStep(Ft,jt,Rt[zt])));ft&&ft.to==Ft?ft.to=jt:ct.push(ft=new AddMarkStep(Ft,jt,ot))}}),ut.forEach(St=>it.step(St)),ct.forEach(St=>it.step(St))}function removeMark(it,g,et,ot){let ut=[],ct=0;it.doc.nodesBetween(g,et,(dt,ft)=>{if(!dt.isInline)return;ct++;let St=null;if(ot instanceof MarkType){let kt=dt.marks,Tt;for(;Tt=ot.isInSet(kt);)(St||(St=[])).push(Tt),kt=Tt.removeFromSet(kt)}else ot?ot.isInSet(dt.marks)&&(St=[ot]):St=dt.marks;if(St&&St.length){let kt=Math.min(ft+dt.nodeSize,et);for(let Tt=0;Tt<St.length;Tt++){let Rt=St[Tt],Ft;for(let jt=0;jt<ut.length;jt++){let Bt=ut[jt];Bt.step==ct-1&&Rt.eq(ut[jt].style)&&(Ft=Bt)}Ft?(Ft.to=kt,Ft.step=ct):ut.push({style:Rt,from:Math.max(ft,g),to:kt,step:ct})}}}),ut.forEach(dt=>it.step(new RemoveMarkStep(dt.from,dt.to,dt.style)))}function clearIncompatible(it,g,et,ot=et.contentMatch,ut=!0){let ct=it.doc.nodeAt(g),dt=[],ft=g+1;for(let St=0;St<ct.childCount;St++){let kt=ct.child(St),Tt=ft+kt.nodeSize,Rt=ot.matchType(kt.type);if(!Rt)dt.push(new ReplaceStep(ft,Tt,Slice.empty));else{ot=Rt;for(let Ft=0;Ft<kt.marks.length;Ft++)et.allowsMarkType(kt.marks[Ft].type)||it.step(new RemoveMarkStep(ft,Tt,kt.marks[Ft]));if(ut&&kt.isText&&et.whitespace!="pre"){let Ft,jt=/\r?\n|\r/g,Bt;for(;Ft=jt.exec(kt.text);)Bt||(Bt=new Slice(Fragment.from(et.schema.text(" ",et.allowedMarks(kt.marks))),0,0)),dt.push(new ReplaceStep(ft+Ft.index,ft+Ft.index+Ft[0].length,Bt))}}ft=Tt}if(!ot.validEnd){let St=ot.fillBefore(Fragment.empty,!0);it.replace(ft,ft,new Slice(St,0,0))}for(let St=dt.length-1;St>=0;St--)it.step(dt[St])}function canCut(it,g,et){return(g==0||it.canReplace(g,it.childCount))&&(et==it.childCount||it.canReplace(0,et))}function liftTarget(it){let et=it.parent.content.cutByIndex(it.startIndex,it.endIndex);for(let ot=it.depth;;--ot){let ut=it.$from.node(ot),ct=it.$from.index(ot),dt=it.$to.indexAfter(ot);if(ot<it.depth&&ut.canReplace(ct,dt,et))return ot;if(ot==0||ut.type.spec.isolating||!canCut(ut,ct,dt))break}return null}function lift$2(it,g,et){let{$from:ot,$to:ut,depth:ct}=g,dt=ot.before(ct+1),ft=ut.after(ct+1),St=dt,kt=ft,Tt=Fragment.empty,Rt=0;for(let Bt=ct,zt=!1;Bt>et;Bt--)zt||ot.index(Bt)>0?(zt=!0,Tt=Fragment.from(ot.node(Bt).copy(Tt)),Rt++):St--;let Ft=Fragment.empty,jt=0;for(let Bt=ct,zt=!1;Bt>et;Bt--)zt||ut.after(Bt+1)<ut.end(Bt)?(zt=!0,Ft=Fragment.from(ut.node(Bt).copy(Ft)),jt++):kt++;it.step(new ReplaceAroundStep(St,kt,dt,ft,new Slice(Tt.append(Ft),Rt,jt),Tt.size-Rt,!0))}function findWrapping(it,g,et=null,ot=it){let ut=findWrappingOutside(it,g),ct=ut&&findWrappingInside(ot,g);return ct?ut.map(withAttrs).concat({type:g,attrs:et}).concat(ct.map(withAttrs)):null}function withAttrs(it){return{type:it,attrs:null}}function findWrappingOutside(it,g){let{parent:et,startIndex:ot,endIndex:ut}=it,ct=et.contentMatchAt(ot).findWrapping(g);if(!ct)return null;let dt=ct.length?ct[0]:g;return et.canReplaceWith(ot,ut,dt)?ct:null}function findWrappingInside(it,g){let{parent:et,startIndex:ot,endIndex:ut}=it,ct=et.child(ot),dt=g.contentMatch.findWrapping(ct.type);if(!dt)return null;let St=(dt.length?dt[dt.length-1]:g).contentMatch;for(let kt=ot;St&&kt<ut;kt++)St=St.matchType(et.child(kt).type);return!St||!St.validEnd?null:dt}function wrap(it,g,et){let ot=Fragment.empty;for(let dt=et.length-1;dt>=0;dt--){if(ot.size){let ft=et[dt].type.contentMatch.matchFragment(ot);if(!ft||!ft.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}ot=Fragment.from(et[dt].type.create(et[dt].attrs,ot))}let ut=g.start,ct=g.end;it.step(new ReplaceAroundStep(ut,ct,ut,ct,new Slice(ot,0,0),et.length,!0))}function setBlockType$1(it,g,et,ot,ut){if(!ot.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let ct=it.steps.length;it.doc.nodesBetween(g,et,(dt,ft)=>{let St=typeof ut=="function"?ut(dt):ut;if(dt.isTextblock&&!dt.hasMarkup(ot,St)&&canChangeType(it.doc,it.mapping.slice(ct).map(ft),ot)){let kt=null;if(ot.schema.linebreakReplacement){let jt=ot.whitespace=="pre",Bt=!!ot.contentMatch.matchType(ot.schema.linebreakReplacement);jt&&!Bt?kt=!1:!jt&&Bt&&(kt=!0)}kt===!1&&replaceLinebreaks(it,dt,ft,ct),clearIncompatible(it,it.mapping.slice(ct).map(ft,1),ot,void 0,kt===null);let Tt=it.mapping.slice(ct),Rt=Tt.map(ft,1),Ft=Tt.map(ft+dt.nodeSize,1);return it.step(new ReplaceAroundStep(Rt,Ft,Rt+1,Ft-1,new Slice(Fragment.from(ot.create(St,null,dt.marks)),0,0),1,!0)),kt===!0&&replaceNewlines(it,dt,ft,ct),!1}})}function replaceNewlines(it,g,et,ot){g.forEach((ut,ct)=>{if(ut.isText){let dt,ft=/\r?\n|\r/g;for(;dt=ft.exec(ut.text);){let St=it.mapping.slice(ot).map(et+1+ct+dt.index);it.replaceWith(St,St+1,g.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(it,g,et,ot){g.forEach((ut,ct)=>{if(ut.type==ut.type.schema.linebreakReplacement){let dt=it.mapping.slice(ot).map(et+1+ct);it.replaceWith(dt,dt+1,g.type.schema.text(`
`))}})}function canChangeType(it,g,et){let ot=it.resolve(g),ut=ot.index();return ot.parent.canReplaceWith(ut,ut+1,et)}function setNodeMarkup(it,g,et,ot,ut){let ct=it.doc.nodeAt(g);if(!ct)throw new RangeError("No node at given position");et||(et=ct.type);let dt=et.create(ot,null,ut||ct.marks);if(ct.isLeaf)return it.replaceWith(g,g+ct.nodeSize,dt);if(!et.validContent(ct.content))throw new RangeError("Invalid content for node type "+et.name);it.step(new ReplaceAroundStep(g,g+ct.nodeSize,g+1,g+ct.nodeSize-1,new Slice(Fragment.from(dt),0,0),1,!0))}function canSplit(it,g,et=1,ot){let ut=it.resolve(g),ct=ut.depth-et,dt=ot&&ot[ot.length-1]||ut.parent;if(ct<0||ut.parent.type.spec.isolating||!ut.parent.canReplace(ut.index(),ut.parent.childCount)||!dt.type.validContent(ut.parent.content.cutByIndex(ut.index(),ut.parent.childCount)))return!1;for(let kt=ut.depth-1,Tt=et-2;kt>ct;kt--,Tt--){let Rt=ut.node(kt),Ft=ut.index(kt);if(Rt.type.spec.isolating)return!1;let jt=Rt.content.cutByIndex(Ft,Rt.childCount),Bt=ot&&ot[Tt+1];Bt&&(jt=jt.replaceChild(0,Bt.type.create(Bt.attrs)));let zt=ot&&ot[Tt]||Rt;if(!Rt.canReplace(Ft+1,Rt.childCount)||!zt.type.validContent(jt))return!1}let ft=ut.indexAfter(ct),St=ot&&ot[0];return ut.node(ct).canReplaceWith(ft,ft,St?St.type:ut.node(ct+1).type)}function split(it,g,et=1,ot){let ut=it.doc.resolve(g),ct=Fragment.empty,dt=Fragment.empty;for(let ft=ut.depth,St=ut.depth-et,kt=et-1;ft>St;ft--,kt--){ct=Fragment.from(ut.node(ft).copy(ct));let Tt=ot&&ot[kt];dt=Fragment.from(Tt?Tt.type.create(Tt.attrs,dt):ut.node(ft).copy(dt))}it.step(new ReplaceStep(g,g,new Slice(ct.append(dt),et,et),!0))}function canJoin(it,g){let et=it.resolve(g),ot=et.index();return joinable(et.nodeBefore,et.nodeAfter)&&et.parent.canReplace(ot,ot+1)}function canAppendWithSubstitutedLinebreaks(it,g){g.content.size||it.type.compatibleContent(g.type);let et=it.contentMatchAt(it.childCount),{linebreakReplacement:ot}=it.type.schema;for(let ut=0;ut<g.childCount;ut++){let ct=g.child(ut),dt=ct.type==ot?it.type.schema.nodes.text:ct.type;if(et=et.matchType(dt),!et||!it.type.allowsMarks(ct.marks))return!1}return et.validEnd}function joinable(it,g){return!!(it&&g&&!it.isLeaf&&canAppendWithSubstitutedLinebreaks(it,g))}function joinPoint(it,g,et=-1){let ot=it.resolve(g);for(let ut=ot.depth;;ut--){let ct,dt,ft=ot.index(ut);if(ut==ot.depth?(ct=ot.nodeBefore,dt=ot.nodeAfter):et>0?(ct=ot.node(ut+1),ft++,dt=ot.node(ut).maybeChild(ft)):(ct=ot.node(ut).maybeChild(ft-1),dt=ot.node(ut+1)),ct&&!ct.isTextblock&&joinable(ct,dt)&&ot.node(ut).canReplace(ft,ft+1))return g;if(ut==0)break;g=et<0?ot.before(ut):ot.after(ut)}}function join(it,g,et){let ot=null,{linebreakReplacement:ut}=it.doc.type.schema,ct=it.doc.resolve(g-et),dt=ct.node().type;if(ut&&dt.inlineContent){let Tt=dt.whitespace=="pre",Rt=!!dt.contentMatch.matchType(ut);Tt&&!Rt?ot=!1:!Tt&&Rt&&(ot=!0)}let ft=it.steps.length;if(ot===!1){let Tt=it.doc.resolve(g+et);replaceLinebreaks(it,Tt.node(),Tt.before(),ft)}dt.inlineContent&&clearIncompatible(it,g+et-1,dt,ct.node().contentMatchAt(ct.index()),ot==null);let St=it.mapping.slice(ft),kt=St.map(g-et);if(it.step(new ReplaceStep(kt,St.map(g+et,-1),Slice.empty,!0)),ot===!0){let Tt=it.doc.resolve(kt);replaceNewlines(it,Tt.node(),Tt.before(),it.steps.length)}return it}function insertPoint(it,g,et){let ot=it.resolve(g);if(ot.parent.canReplaceWith(ot.index(),ot.index(),et))return g;if(ot.parentOffset==0)for(let ut=ot.depth-1;ut>=0;ut--){let ct=ot.index(ut);if(ot.node(ut).canReplaceWith(ct,ct,et))return ot.before(ut+1);if(ct>0)return null}if(ot.parentOffset==ot.parent.content.size)for(let ut=ot.depth-1;ut>=0;ut--){let ct=ot.indexAfter(ut);if(ot.node(ut).canReplaceWith(ct,ct,et))return ot.after(ut+1);if(ct<ot.node(ut).childCount)return null}return null}function dropPoint(it,g,et){let ot=it.resolve(g);if(!et.content.size)return g;let ut=et.content;for(let ct=0;ct<et.openStart;ct++)ut=ut.firstChild.content;for(let ct=1;ct<=(et.openStart==0&&et.size?2:1);ct++)for(let dt=ot.depth;dt>=0;dt--){let ft=dt==ot.depth?0:ot.pos<=(ot.start(dt+1)+ot.end(dt+1))/2?-1:1,St=ot.index(dt)+(ft>0?1:0),kt=ot.node(dt),Tt=!1;if(ct==1)Tt=kt.canReplace(St,St,ut);else{let Rt=kt.contentMatchAt(St).findWrapping(ut.firstChild.type);Tt=Rt&&kt.canReplaceWith(St,St,Rt[0])}if(Tt)return ft==0?ot.pos:ft<0?ot.before(dt+1):ot.after(dt+1)}return null}function replaceStep(it,g,et=g,ot=Slice.empty){if(g==et&&!ot.size)return null;let ut=it.resolve(g),ct=it.resolve(et);return fitsTrivially(ut,ct,ot)?new ReplaceStep(g,et,ot):new Fitter(ut,ct,ot).fit()}function fitsTrivially(it,g,et){return!et.openStart&&!et.openEnd&&it.start()==g.start()&&it.parent.canReplace(it.index(),g.index(),et.content)}class Fitter{constructor(g,et,ot){this.$from=g,this.$to=et,this.unplaced=ot,this.frontier=[],this.placed=Fragment.empty;for(let ut=0;ut<=g.depth;ut++){let ct=g.node(ut);this.frontier.push({type:ct.type,match:ct.contentMatchAt(g.indexAfter(ut))})}for(let ut=g.depth;ut>0;ut--)this.placed=Fragment.from(g.node(ut).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let kt=this.findFittable();kt?this.placeNodes(kt):this.openMore()||this.dropNode()}let g=this.mustMoveInline(),et=this.placed.size-this.depth-this.$from.depth,ot=this.$from,ut=this.close(g<0?this.$to:ot.doc.resolve(g));if(!ut)return null;let ct=this.placed,dt=ot.depth,ft=ut.depth;for(;dt&&ft&&ct.childCount==1;)ct=ct.firstChild.content,dt--,ft--;let St=new Slice(ct,dt,ft);return g>-1?new ReplaceAroundStep(ot.pos,g,this.$to.pos,this.$to.end(),St,et):St.size||ot.pos!=this.$to.pos?new ReplaceStep(ot.pos,ut.pos,St):null}findFittable(){let g=this.unplaced.openStart;for(let et=this.unplaced.content,ot=0,ut=this.unplaced.openEnd;ot<g;ot++){let ct=et.firstChild;if(et.childCount>1&&(ut=0),ct.type.spec.isolating&&ut<=ot){g=ot;break}et=ct.content}for(let et=1;et<=2;et++)for(let ot=et==1?g:this.unplaced.openStart;ot>=0;ot--){let ut,ct=null;ot?(ct=contentAt(this.unplaced.content,ot-1).firstChild,ut=ct.content):ut=this.unplaced.content;let dt=ut.firstChild;for(let ft=this.depth;ft>=0;ft--){let{type:St,match:kt}=this.frontier[ft],Tt,Rt=null;if(et==1&&(dt?kt.matchType(dt.type)||(Rt=kt.fillBefore(Fragment.from(dt),!1)):ct&&St.compatibleContent(ct.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ct,inject:Rt};if(et==2&&dt&&(Tt=kt.findWrapping(dt.type)))return{sliceDepth:ot,frontierDepth:ft,parent:ct,wrap:Tt};if(ct&&kt.matchType(ct.type))break}}}openMore(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ut=contentAt(g,et);return!ut.childCount||ut.firstChild.isLeaf?!1:(this.unplaced=new Slice(g,et+1,Math.max(ot,ut.size+et>=g.size-ot?et+1:0)),!0)}dropNode(){let{content:g,openStart:et,openEnd:ot}=this.unplaced,ut=contentAt(g,et);if(ut.childCount<=1&&et>0){let ct=g.size-et<=et+ut.size;this.unplaced=new Slice(dropFromFragment(g,et-1,1),et-1,ct?et-1:ot)}else this.unplaced=new Slice(dropFromFragment(g,et,1),et,ot)}placeNodes({sliceDepth:g,frontierDepth:et,parent:ot,inject:ut,wrap:ct}){for(;this.depth>et;)this.closeFrontierNode();if(ct)for(let zt=0;zt<ct.length;zt++)this.openFrontierNode(ct[zt]);let dt=this.unplaced,ft=ot?ot.content:dt.content,St=dt.openStart-g,kt=0,Tt=[],{match:Rt,type:Ft}=this.frontier[et];if(ut){for(let zt=0;zt<ut.childCount;zt++)Tt.push(ut.child(zt));Rt=Rt.matchFragment(ut)}let jt=ft.size+g-(dt.content.size-dt.openEnd);for(;kt<ft.childCount;){let zt=ft.child(kt),Ht=Rt.matchType(zt.type);if(!Ht)break;kt++,(kt>1||St==0||zt.content.size)&&(Rt=Ht,Tt.push(closeNodeStart(zt.mark(Ft.allowedMarks(zt.marks)),kt==1?St:0,kt==ft.childCount?jt:-1)))}let Bt=kt==ft.childCount;Bt||(jt=-1),this.placed=addToFragment(this.placed,et,Fragment.from(Tt)),this.frontier[et].match=Rt,Bt&&jt<0&&ot&&ot.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let zt=0,Ht=ft;zt<jt;zt++){let Ut=Ht.lastChild;this.frontier.push({type:Ut.type,match:Ut.contentMatchAt(Ut.childCount)}),Ht=Ut.content}this.unplaced=Bt?g==0?Slice.empty:new Slice(dropFromFragment(dt.content,g-1,1),g-1,jt<0?dt.openEnd:g-1):new Slice(dropFromFragment(dt.content,g,kt),dt.openStart,dt.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let g=this.frontier[this.depth],et;if(!g.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,g.type,g.match,!1)||this.$to.depth==this.depth&&(et=this.findCloseLevel(this.$to))&&et.depth==this.depth)return-1;let{depth:ot}=this.$to,ut=this.$to.after(ot);for(;ot>1&&ut==this.$to.end(--ot);)++ut;return ut}findCloseLevel(g){e:for(let et=Math.min(this.depth,g.depth);et>=0;et--){let{match:ot,type:ut}=this.frontier[et],ct=et<g.depth&&g.end(et+1)==g.pos+(g.depth-(et+1)),dt=contentAfterFits(g,et,ut,ot,ct);if(dt){for(let ft=et-1;ft>=0;ft--){let{match:St,type:kt}=this.frontier[ft],Tt=contentAfterFits(g,ft,kt,St,!0);if(!Tt||Tt.childCount)continue e}return{depth:et,fit:dt,move:ct?g.doc.resolve(g.after(et+1)):g}}}}close(g){let et=this.findCloseLevel(g);if(!et)return null;for(;this.depth>et.depth;)this.closeFrontierNode();et.fit.childCount&&(this.placed=addToFragment(this.placed,et.depth,et.fit)),g=et.move;for(let ot=et.depth+1;ot<=g.depth;ot++){let ut=g.node(ot),ct=ut.type.contentMatch.fillBefore(ut.content,!0,g.index(ot));this.openFrontierNode(ut.type,ut.attrs,ct)}return g}openFrontierNode(g,et=null,ot){let ut=this.frontier[this.depth];ut.match=ut.match.matchType(g),this.placed=addToFragment(this.placed,this.depth,Fragment.from(g.create(et,ot))),this.frontier.push({type:g,match:g.contentMatch})}closeFrontierNode(){let et=this.frontier.pop().match.fillBefore(Fragment.empty,!0);et.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,et))}}function dropFromFragment(it,g,et){return g==0?it.cutByIndex(et,it.childCount):it.replaceChild(0,it.firstChild.copy(dropFromFragment(it.firstChild.content,g-1,et)))}function addToFragment(it,g,et){return g==0?it.append(et):it.replaceChild(it.childCount-1,it.lastChild.copy(addToFragment(it.lastChild.content,g-1,et)))}function contentAt(it,g){for(let et=0;et<g;et++)it=it.firstChild.content;return it}function closeNodeStart(it,g,et){if(g<=0)return it;let ot=it.content;return g>1&&(ot=ot.replaceChild(0,closeNodeStart(ot.firstChild,g-1,ot.childCount==1?et-1:0))),g>0&&(ot=it.type.contentMatch.fillBefore(ot).append(ot),et<=0&&(ot=ot.append(it.type.contentMatch.matchFragment(ot).fillBefore(Fragment.empty,!0)))),it.copy(ot)}function contentAfterFits(it,g,et,ot,ut){let ct=it.node(g),dt=ut?it.indexAfter(g):it.index(g);if(dt==ct.childCount&&!et.compatibleContent(ct.type))return null;let ft=ot.fillBefore(ct.content,!0,dt);return ft&&!invalidMarks(et,ct.content,dt)?ft:null}function invalidMarks(it,g,et){for(let ot=et;ot<g.childCount;ot++)if(!it.allowsMarks(g.child(ot).marks))return!0;return!1}function definesContent(it){return it.spec.defining||it.spec.definingForContent}function replaceRange(it,g,et,ot){if(!ot.size)return it.deleteRange(g,et);let ut=it.doc.resolve(g),ct=it.doc.resolve(et);if(fitsTrivially(ut,ct,ot))return it.step(new ReplaceStep(g,et,ot));let dt=coveredDepths(ut,it.doc.resolve(et));dt[dt.length-1]==0&&dt.pop();let ft=-(ut.depth+1);dt.unshift(ft);for(let Ft=ut.depth,jt=ut.pos-1;Ft>0;Ft--,jt--){let Bt=ut.node(Ft).type.spec;if(Bt.defining||Bt.definingAsContext||Bt.isolating)break;dt.indexOf(Ft)>-1?ft=Ft:ut.before(Ft)==jt&&dt.splice(1,0,-Ft)}let St=dt.indexOf(ft),kt=[],Tt=ot.openStart;for(let Ft=ot.content,jt=0;;jt++){let Bt=Ft.firstChild;if(kt.push(Bt),jt==ot.openStart)break;Ft=Bt.content}for(let Ft=Tt-1;Ft>=0;Ft--){let jt=kt[Ft],Bt=definesContent(jt.type);if(Bt&&!jt.sameMarkup(ut.node(Math.abs(ft)-1)))Tt=Ft;else if(Bt||!jt.type.isTextblock)break}for(let Ft=ot.openStart;Ft>=0;Ft--){let jt=(Ft+Tt+1)%(ot.openStart+1),Bt=kt[jt];if(Bt)for(let zt=0;zt<dt.length;zt++){let Ht=dt[(zt+St)%dt.length],Ut=!0;Ht<0&&(Ut=!1,Ht=-Ht);let Kt=ut.node(Ht-1),Yt=ut.index(Ht-1);if(Kt.canReplaceWith(Yt,Yt,Bt.type,Bt.marks))return it.replace(ut.before(Ht),Ut?ct.after(Ht):et,new Slice(closeFragment(ot.content,0,ot.openStart,jt),jt,ot.openEnd))}}let Rt=it.steps.length;for(let Ft=dt.length-1;Ft>=0&&(it.replace(g,et,ot),!(it.steps.length>Rt));Ft--){let jt=dt[Ft];jt<0||(g=ut.before(jt),et=ct.after(jt))}}function closeFragment(it,g,et,ot,ut){if(g<et){let ct=it.firstChild;it=it.replaceChild(0,ct.copy(closeFragment(ct.content,g+1,et,ot,ct)))}if(g>ot){let ct=ut.contentMatchAt(0),dt=ct.fillBefore(it).append(it);it=dt.append(ct.matchFragment(dt).fillBefore(Fragment.empty,!0))}return it}function replaceRangeWith(it,g,et,ot){if(!ot.isInline&&g==et&&it.doc.resolve(g).parent.content.size){let ut=insertPoint(it.doc,g,ot.type);ut!=null&&(g=et=ut)}it.replaceRange(g,et,new Slice(Fragment.from(ot),0,0))}function deleteRange$1(it,g,et){let ot=it.doc.resolve(g),ut=it.doc.resolve(et),ct=coveredDepths(ot,ut);for(let dt=0;dt<ct.length;dt++){let ft=ct[dt],St=dt==ct.length-1;if(St&&ft==0||ot.node(ft).type.contentMatch.validEnd)return it.delete(ot.start(ft),ut.end(ft));if(ft>0&&(St||ot.node(ft-1).canReplace(ot.index(ft-1),ut.indexAfter(ft-1))))return it.delete(ot.before(ft),ut.after(ft))}for(let dt=1;dt<=ot.depth&&dt<=ut.depth;dt++)if(g-ot.start(dt)==ot.depth-dt&&et>ot.end(dt)&&ut.end(dt)-et!=ut.depth-dt&&ot.start(dt-1)==ut.start(dt-1)&&ot.node(dt-1).canReplace(ot.index(dt-1),ut.index(dt-1)))return it.delete(ot.before(dt),et);it.delete(g,et)}function coveredDepths(it,g){let et=[],ot=Math.min(it.depth,g.depth);for(let ut=ot;ut>=0;ut--){let ct=it.start(ut);if(ct<it.pos-(it.depth-ut)||g.end(ut)>g.pos+(g.depth-ut)||it.node(ut).type.spec.isolating||g.node(ut).type.spec.isolating)break;(ct==g.start(ut)||ut==it.depth&&ut==g.depth&&it.parent.inlineContent&&g.parent.inlineContent&&ut&&g.start(ut-1)==ct-1)&&et.push(ut)}return et}class AttrStep extends Step{constructor(g,et,ot){super(),this.pos=g,this.attr=et,this.value=ot}apply(g){let et=g.nodeAt(this.pos);if(!et)return StepResult.fail("No node at attribute step's position");let ot=Object.create(null);for(let ct in et.attrs)ot[ct]=et.attrs[ct];ot[this.attr]=this.value;let ut=et.type.create(ot,null,et.marks);return StepResult.fromReplace(g,this.pos,this.pos+1,new Slice(Fragment.from(ut),0,et.isLeaf?0:1))}getMap(){return StepMap.empty}invert(g){return new AttrStep(this.pos,this.attr,g.nodeAt(this.pos).attrs[this.attr])}map(g){let et=g.mapResult(this.pos,1);return et.deletedAfter?null:new AttrStep(et.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.pos!="number"||typeof et.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(et.pos,et.attr,et.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(g,et){super(),this.attr=g,this.value=et}apply(g){let et=Object.create(null);for(let ut in g.attrs)et[ut]=g.attrs[ut];et[this.attr]=this.value;let ot=g.type.create(et,g.content,g.marks);return StepResult.ok(ot)}getMap(){return StepMap.empty}invert(g){return new DocAttrStep(this.attr,g.attrs[this.attr])}map(g){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(g,et){if(typeof et.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(et.attr,et.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function it(g){let et=Error.call(this,g);return et.__proto__=it.prototype,et};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";let Transform$1=class{constructor(g){this.doc=g,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(g){let et=this.maybeStep(g);if(et.failed)throw new TransformError(et.failed);return this}maybeStep(g){let et=g.apply(this.doc);return et.failed||this.addStep(g,et.doc),et}get docChanged(){return this.steps.length>0}addStep(g,et){this.docs.push(this.doc),this.steps.push(g),this.mapping.appendMap(g.getMap()),this.doc=et}replace(g,et=g,ot=Slice.empty){let ut=replaceStep(this.doc,g,et,ot);return ut&&this.step(ut),this}replaceWith(g,et,ot){return this.replace(g,et,new Slice(Fragment.from(ot),0,0))}delete(g,et){return this.replace(g,et,Slice.empty)}insert(g,et){return this.replaceWith(g,g,et)}replaceRange(g,et,ot){return replaceRange(this,g,et,ot),this}replaceRangeWith(g,et,ot){return replaceRangeWith(this,g,et,ot),this}deleteRange(g,et){return deleteRange$1(this,g,et),this}lift(g,et){return lift$2(this,g,et),this}join(g,et=1){return join(this,g,et),this}wrap(g,et){return wrap(this,g,et),this}setBlockType(g,et=g,ot,ut=null){return setBlockType$1(this,g,et,ot,ut),this}setNodeMarkup(g,et,ot=null,ut){return setNodeMarkup(this,g,et,ot,ut),this}setNodeAttribute(g,et,ot){return this.step(new AttrStep(g,et,ot)),this}setDocAttribute(g,et){return this.step(new DocAttrStep(g,et)),this}addNodeMark(g,et){return this.step(new AddNodeMarkStep(g,et)),this}removeNodeMark(g,et){let ot=this.doc.nodeAt(g);if(!ot)throw new RangeError("No node at position "+g);if(et instanceof Mark$1)et.isInSet(ot.marks)&&this.step(new RemoveNodeMarkStep(g,et));else{let ut=ot.marks,ct,dt=[];for(;ct=et.isInSet(ut);)dt.push(new RemoveNodeMarkStep(g,ct)),ut=ct.removeFromSet(ut);for(let ft=dt.length-1;ft>=0;ft--)this.step(dt[ft])}return this}split(g,et=1,ot){return split(this,g,et,ot),this}addMark(g,et,ot){return addMark(this,g,et,ot),this}removeMark(g,et,ot){return removeMark(this,g,et,ot),this}clearIncompatible(g,et,ot){return clearIncompatible(this,g,et,ot),this}};const classesById=Object.create(null);class Selection{constructor(g,et,ot){this.$anchor=g,this.$head=et,this.ranges=ot||[new SelectionRange(g.min(et),g.max(et))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let g=this.ranges;for(let et=0;et<g.length;et++)if(g[et].$from.pos!=g[et].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(g,et=Slice.empty){let ot=et.content.lastChild,ut=null;for(let ft=0;ft<et.openEnd;ft++)ut=ot,ot=ot.lastChild;let ct=g.steps.length,dt=this.ranges;for(let ft=0;ft<dt.length;ft++){let{$from:St,$to:kt}=dt[ft],Tt=g.mapping.slice(ct);g.replaceRange(Tt.map(St.pos),Tt.map(kt.pos),ft?Slice.empty:et),ft==0&&selectionToInsertionEnd$1(g,ct,(ot?ot.isInline:ut&&ut.isTextblock)?-1:1)}}replaceWith(g,et){let ot=g.steps.length,ut=this.ranges;for(let ct=0;ct<ut.length;ct++){let{$from:dt,$to:ft}=ut[ct],St=g.mapping.slice(ot),kt=St.map(dt.pos),Tt=St.map(ft.pos);ct?g.deleteRange(kt,Tt):(g.replaceRangeWith(kt,Tt,et),selectionToInsertionEnd$1(g,ot,et.isInline?-1:1))}}static findFrom(g,et,ot=!1){let ut=g.parent.inlineContent?new TextSelection(g):findSelectionIn(g.node(0),g.parent,g.pos,g.index(),et,ot);if(ut)return ut;for(let ct=g.depth-1;ct>=0;ct--){let dt=et<0?findSelectionIn(g.node(0),g.node(ct),g.before(ct+1),g.index(ct),et,ot):findSelectionIn(g.node(0),g.node(ct),g.after(ct+1),g.index(ct)+1,et,ot);if(dt)return dt}return null}static near(g,et=1){return this.findFrom(g,et)||this.findFrom(g,-et)||new AllSelection(g.node(0))}static atStart(g){return findSelectionIn(g,g,0,0,1)||new AllSelection(g)}static atEnd(g){return findSelectionIn(g,g,g.content.size,g.childCount,-1)||new AllSelection(g)}static fromJSON(g,et){if(!et||!et.type)throw new RangeError("Invalid input for Selection.fromJSON");let ot=classesById[et.type];if(!ot)throw new RangeError(`No selection type ${et.type} defined`);return ot.fromJSON(g,et)}static jsonID(g,et){if(g in classesById)throw new RangeError("Duplicate use of selection JSON ID "+g);return classesById[g]=et,et.prototype.jsonID=g,et}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(g,et){this.$from=g,this.$to=et}}let warnedAboutTextSelection=!1;function checkTextSelection(it){!warnedAboutTextSelection&&!it.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+it.parent.type.name+")"))}class TextSelection extends Selection{constructor(g,et=g){checkTextSelection(g),checkTextSelection(et),super(g,et)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(g,et){let ot=g.resolve(et.map(this.head));if(!ot.parent.inlineContent)return Selection.near(ot);let ut=g.resolve(et.map(this.anchor));return new TextSelection(ut.parent.inlineContent?ut:ot,ot)}replace(g,et=Slice.empty){if(super.replace(g,et),et==Slice.empty){let ot=this.$from.marksAcross(this.$to);ot&&g.ensureMarks(ot)}}eq(g){return g instanceof TextSelection&&g.anchor==this.anchor&&g.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(g,et){if(typeof et.anchor!="number"||typeof et.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(g.resolve(et.anchor),g.resolve(et.head))}static create(g,et,ot=et){let ut=g.resolve(et);return new this(ut,ot==et?ut:g.resolve(ot))}static between(g,et,ot){let ut=g.pos-et.pos;if((!ot||ut)&&(ot=ut>=0?1:-1),!et.parent.inlineContent){let ct=Selection.findFrom(et,ot,!0)||Selection.findFrom(et,-ot,!0);if(ct)et=ct.$head;else return Selection.near(et,ot)}return g.parent.inlineContent||(ut==0?g=et:(g=(Selection.findFrom(g,-ot,!0)||Selection.findFrom(g,ot,!0)).$anchor,g.pos<et.pos!=ut<0&&(g=et))),new TextSelection(g,et)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(g,et){this.anchor=g,this.head=et}map(g){return new TextBookmark(g.map(this.anchor),g.map(this.head))}resolve(g){return TextSelection.between(g.resolve(this.anchor),g.resolve(this.head))}}class NodeSelection extends Selection{constructor(g){let et=g.nodeAfter,ot=g.node(0).resolve(g.pos+et.nodeSize);super(g,ot),this.node=et}map(g,et){let{deleted:ot,pos:ut}=et.mapResult(this.anchor),ct=g.resolve(ut);return ot?Selection.near(ct):new NodeSelection(ct)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(g){return g instanceof NodeSelection&&g.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(g,et){if(typeof et.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(g.resolve(et.anchor))}static create(g,et){return new NodeSelection(g.resolve(et))}static isSelectable(g){return!g.isText&&g.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(g){this.anchor=g}map(g){let{deleted:et,pos:ot}=g.mapResult(this.anchor);return et?new TextBookmark(ot,ot):new NodeBookmark(ot)}resolve(g){let et=g.resolve(this.anchor),ot=et.nodeAfter;return ot&&NodeSelection.isSelectable(ot)?new NodeSelection(et):Selection.near(et)}}class AllSelection extends Selection{constructor(g){super(g.resolve(0),g.resolve(g.content.size))}replace(g,et=Slice.empty){if(et==Slice.empty){g.delete(0,g.doc.content.size);let ot=Selection.atStart(g.doc);ot.eq(g.selection)||g.setSelection(ot)}else super.replace(g,et)}toJSON(){return{type:"all"}}static fromJSON(g){return new AllSelection(g)}map(g){return new AllSelection(g)}eq(g){return g instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(it){return new AllSelection(it)}};function findSelectionIn(it,g,et,ot,ut,ct=!1){if(g.inlineContent)return TextSelection.create(it,et);for(let dt=ot-(ut>0?0:1);ut>0?dt<g.childCount:dt>=0;dt+=ut){let ft=g.child(dt);if(ft.isAtom){if(!ct&&NodeSelection.isSelectable(ft))return NodeSelection.create(it,et-(ut<0?ft.nodeSize:0))}else{let St=findSelectionIn(it,ft,et+ut,ut<0?ft.childCount:0,ut,ct);if(St)return St}et+=ft.nodeSize*ut}return null}function selectionToInsertionEnd$1(it,g,et){let ot=it.steps.length-1;if(ot<g)return;let ut=it.steps[ot];if(!(ut instanceof ReplaceStep||ut instanceof ReplaceAroundStep))return;let ct=it.mapping.maps[ot],dt;ct.forEach((ft,St,kt,Tt)=>{dt==null&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform$1{constructor(g){super(g.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=g.selection,this.storedMarks=g.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(g){if(g.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=g,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(g){return this.storedMarks=g,this.updated|=UPDATED_MARKS,this}ensureMarks(g){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),g)||this.setStoredMarks(g),this}addStoredMark(g){return this.ensureMarks(g.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(g){return this.ensureMarks(g.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(g,et){super.addStep(g,et),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(g){return this.time=g,this}replaceSelection(g){return this.selection.replace(this,g),this}replaceSelectionWith(g,et=!0){let ot=this.selection;return et&&(g=g.mark(this.storedMarks||(ot.empty?ot.$from.marks():ot.$from.marksAcross(ot.$to)||Mark$1.none))),ot.replaceWith(this,g),this}deleteSelection(){return this.selection.replace(this),this}insertText(g,et,ot){let ut=this.doc.type.schema;if(et==null)return g?this.replaceSelectionWith(ut.text(g),!0):this.deleteSelection();{if(ot==null&&(ot=et),ot=ot??et,!g)return this.deleteRange(et,ot);let ct=this.storedMarks;if(!ct){let dt=this.doc.resolve(et);ct=ot==et?dt.marks():dt.marksAcross(this.doc.resolve(ot))}return this.replaceRangeWith(et,ot,ut.text(g,ct)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(g,et){return this.meta[typeof g=="string"?g:g.key]=et,this}getMeta(g){return this.meta[typeof g=="string"?g:g.key]}get isGeneric(){for(let g in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(it,g){return!g||!it?it:it.bind(g)}class FieldDesc{constructor(g,et,ot){this.name=g,this.init=bind(et.init,ot),this.apply=bind(et.apply,ot)}}const baseFields=[new FieldDesc("doc",{init(it){return it.doc||it.schema.topNodeType.createAndFill()},apply(it){return it.doc}}),new FieldDesc("selection",{init(it,g){return it.selection||Selection.atStart(g.doc)},apply(it){return it.selection}}),new FieldDesc("storedMarks",{init(it){return it.storedMarks||null},apply(it,g,et,ot){return ot.selection.$cursor?it.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(it,g){return it.scrolledIntoView?g+1:g}})];class Configuration{constructor(g,et){this.schema=g,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),et&&et.forEach(ot=>{if(this.pluginsByKey[ot.key])throw new RangeError("Adding different instances of a keyed plugin ("+ot.key+")");this.plugins.push(ot),this.pluginsByKey[ot.key]=ot,ot.spec.state&&this.fields.push(new FieldDesc(ot.key,ot.spec.state,ot))})}}class EditorState{constructor(g){this.config=g}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(g){return this.applyTransaction(g).state}filterTransaction(g,et=-1){for(let ot=0;ot<this.config.plugins.length;ot++)if(ot!=et){let ut=this.config.plugins[ot];if(ut.spec.filterTransaction&&!ut.spec.filterTransaction.call(ut,g,this))return!1}return!0}applyTransaction(g){if(!this.filterTransaction(g))return{state:this,transactions:[]};let et=[g],ot=this.applyInner(g),ut=null;for(;;){let ct=!1;for(let dt=0;dt<this.config.plugins.length;dt++){let ft=this.config.plugins[dt];if(ft.spec.appendTransaction){let St=ut?ut[dt].n:0,kt=ut?ut[dt].state:this,Tt=St<et.length&&ft.spec.appendTransaction.call(ft,St?et.slice(St):et,kt,ot);if(Tt&&ot.filterTransaction(Tt,dt)){if(Tt.setMeta("appendedTransaction",g),!ut){ut=[];for(let Rt=0;Rt<this.config.plugins.length;Rt++)ut.push(Rt<dt?{state:ot,n:et.length}:{state:this,n:0})}et.push(Tt),ot=ot.applyInner(Tt),ct=!0}ut&&(ut[dt]={state:ot,n:et.length})}}if(!ct)return{state:ot,transactions:et}}}applyInner(g){if(!g.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let et=new EditorState(this.config),ot=this.config.fields;for(let ut=0;ut<ot.length;ut++){let ct=ot[ut];et[ct.name]=ct.apply(g,this[ct.name],this,et)}return et}get tr(){return new Transaction(this)}static create(g){let et=new Configuration(g.doc?g.doc.type.schema:g.schema,g.plugins),ot=new EditorState(et);for(let ut=0;ut<et.fields.length;ut++)ot[et.fields[ut].name]=et.fields[ut].init(g,ot);return ot}reconfigure(g){let et=new Configuration(this.schema,g.plugins),ot=et.fields,ut=new EditorState(et);for(let ct=0;ct<ot.length;ct++){let dt=ot[ct].name;ut[dt]=this.hasOwnProperty(dt)?this[dt]:ot[ct].init(g,ut)}return ut}toJSON(g){let et={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(et.storedMarks=this.storedMarks.map(ot=>ot.toJSON())),g&&typeof g=="object")for(let ot in g){if(ot=="doc"||ot=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let ut=g[ot],ct=ut.spec.state;ct&&ct.toJSON&&(et[ot]=ct.toJSON.call(ut,this[ut.key]))}return et}static fromJSON(g,et,ot){if(!et)throw new RangeError("Invalid input for EditorState.fromJSON");if(!g.schema)throw new RangeError("Required config field 'schema' missing");let ut=new Configuration(g.schema,g.plugins),ct=new EditorState(ut);return ut.fields.forEach(dt=>{if(dt.name=="doc")ct.doc=Node$2.fromJSON(g.schema,et.doc);else if(dt.name=="selection")ct.selection=Selection.fromJSON(ct.doc,et.selection);else if(dt.name=="storedMarks")et.storedMarks&&(ct.storedMarks=et.storedMarks.map(g.schema.markFromJSON));else{if(ot)for(let ft in ot){let St=ot[ft],kt=St.spec.state;if(St.key==dt.name&&kt&&kt.fromJSON&&Object.prototype.hasOwnProperty.call(et,ft)){ct[dt.name]=kt.fromJSON.call(St,g,et[ft],ct);return}}ct[dt.name]=dt.init(g,ct)}}),ct}}function bindProps(it,g,et){for(let ot in it){let ut=it[ot];ut instanceof Function?ut=ut.bind(g):ot=="handleDOMEvents"&&(ut=bindProps(ut,g,{})),et[ot]=ut}return et}class Plugin{constructor(g){this.spec=g,this.props={},g.props&&bindProps(g.props,this,this.props),this.key=g.key?g.key.key:createKey("plugin")}getState(g){return g[this.key]}}const keys=Object.create(null);function createKey(it){return it in keys?it+"$"+ ++keys[it]:(keys[it]=0,it+"$")}class PluginKey{constructor(g="key"){this.key=createKey(g)}get(g){return g.config.pluginsByKey[this.key]}getState(g){return g[this.key]}}const deleteSelection$1=(it,g)=>it.selection.empty?!1:(g&&g(it.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("backward",it):et.parentOffset>0)?null:et}const joinBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ut=findCutBefore(ot);if(!ut){let dt=ot.blockRange(),ft=dt&&liftTarget(dt);return ft==null?!1:(g&&g(it.tr.lift(dt,ft).scrollIntoView()),!0)}let ct=ut.nodeBefore;if(deleteBarrier(it,ut,g,-1))return!0;if(ot.parent.content.size==0&&(textblockAt(ct,"end")||NodeSelection.isSelectable(ct)))for(let dt=ot.depth;;dt--){let ft=replaceStep(it.doc,ot.before(dt),ot.after(dt),Slice.empty);if(ft&&ft.slice.size<ft.to-ft.from){if(g){let St=it.tr.step(ft);St.setSelection(textblockAt(ct,"end")?Selection.findFrom(St.doc.resolve(St.mapping.map(ut.pos,-1)),-1):NodeSelection.create(St.doc,ut.pos-ct.nodeSize)),g(St.scrollIntoView())}return!0}if(dt==1||ot.node(dt-1).childCount>1)break}return ct.isAtom&&ut.depth==ot.depth-1?(g&&g(it.tr.delete(ut.pos-ct.nodeSize,ut.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(it,g,et)=>{let ot=atBlockStart(it,et);if(!ot)return!1;let ut=findCutBefore(ot);return ut?joinTextblocksAround(it,ut,g):!1},joinTextblockForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ut=findCutAfter(ot);return ut?joinTextblocksAround(it,ut,g):!1};function joinTextblocksAround(it,g,et){let ot=g.nodeBefore,ut=ot,ct=g.pos-1;for(;!ut.isTextblock;ct--){if(ut.type.spec.isolating)return!1;let Tt=ut.lastChild;if(!Tt)return!1;ut=Tt}let dt=g.nodeAfter,ft=dt,St=g.pos+1;for(;!ft.isTextblock;St++){if(ft.type.spec.isolating)return!1;let Tt=ft.firstChild;if(!Tt)return!1;ft=Tt}let kt=replaceStep(it.doc,ct,St,Slice.empty);if(!kt||kt.from!=ct||kt instanceof ReplaceStep&&kt.slice.size>=St-ct)return!1;if(et){let Tt=it.tr.step(kt);Tt.setSelection(TextSelection.create(Tt.doc,ct)),et(Tt.scrollIntoView())}return!0}function textblockAt(it,g,et=!1){for(let ot=it;ot;ot=g=="start"?ot.firstChild:ot.lastChild){if(ot.isTextblock)return!0;if(et&&ot.childCount!=1)return!1}return!1}const selectNodeBackward$1=(it,g,et)=>{let{$head:ot,empty:ut}=it.selection,ct=ot;if(!ut)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("backward",it):ot.parentOffset>0)return!1;ct=findCutBefore(ot)}let dt=ct&&ct.nodeBefore;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ct.pos-dt.nodeSize)).scrollIntoView()),!0)};function findCutBefore(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){if(it.index(g)>0)return it.doc.resolve(it.before(g+1));if(it.node(g).type.spec.isolating)break}return null}function atBlockEnd(it,g){let{$cursor:et}=it.selection;return!et||(g?!g.endOfTextblock("forward",it):et.parentOffset<et.parent.content.size)?null:et}const joinForward$1=(it,g,et)=>{let ot=atBlockEnd(it,et);if(!ot)return!1;let ut=findCutAfter(ot);if(!ut)return!1;let ct=ut.nodeAfter;if(deleteBarrier(it,ut,g,1))return!0;if(ot.parent.content.size==0&&(textblockAt(ct,"start")||NodeSelection.isSelectable(ct))){let dt=replaceStep(it.doc,ot.before(),ot.after(),Slice.empty);if(dt&&dt.slice.size<dt.to-dt.from){if(g){let ft=it.tr.step(dt);ft.setSelection(textblockAt(ct,"start")?Selection.findFrom(ft.doc.resolve(ft.mapping.map(ut.pos)),1):NodeSelection.create(ft.doc,ft.mapping.map(ut.pos))),g(ft.scrollIntoView())}return!0}}return ct.isAtom&&ut.depth==ot.depth-1?(g&&g(it.tr.delete(ut.pos,ut.pos+ct.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(it,g,et)=>{let{$head:ot,empty:ut}=it.selection,ct=ot;if(!ut)return!1;if(ot.parent.isTextblock){if(et?!et.endOfTextblock("forward",it):ot.parentOffset<ot.parent.content.size)return!1;ct=findCutAfter(ot)}let dt=ct&&ct.nodeAfter;return!dt||!NodeSelection.isSelectable(dt)?!1:(g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ct.pos)).scrollIntoView()),!0)};function findCutAfter(it){if(!it.parent.type.spec.isolating)for(let g=it.depth-1;g>=0;g--){let et=it.node(g);if(it.index(g)+1<et.childCount)return it.doc.resolve(it.after(g+1));if(et.type.spec.isolating)break}return null}const joinUp$1=(it,g)=>{let et=it.selection,ot=et instanceof NodeSelection,ut;if(ot){if(et.node.isTextblock||!canJoin(it.doc,et.from))return!1;ut=et.from}else if(ut=joinPoint(it.doc,et.from,-1),ut==null)return!1;if(g){let ct=it.tr.join(ut);ot&&ct.setSelection(NodeSelection.create(ct.doc,ut-it.doc.resolve(ut).nodeBefore.nodeSize)),g(ct.scrollIntoView())}return!0},joinDown$1=(it,g)=>{let et=it.selection,ot;if(et instanceof NodeSelection){if(et.node.isTextblock||!canJoin(it.doc,et.to))return!1;ot=et.to}else if(ot=joinPoint(it.doc,et.to,1),ot==null)return!1;return g&&g(it.tr.join(ot).scrollIntoView()),!0},lift$1=(it,g)=>{let{$from:et,$to:ot}=it.selection,ut=et.blockRange(ot),ct=ut&&liftTarget(ut);return ct==null?!1:(g&&g(it.tr.lift(ut,ct).scrollIntoView()),!0)},newlineInCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;return!et.parent.type.spec.code||!et.sameParent(ot)?!1:(g&&g(it.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(it){for(let g=0;g<it.edgeCount;g++){let{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}const exitCode$1=(it,g)=>{let{$head:et,$anchor:ot}=it.selection;if(!et.parent.type.spec.code||!et.sameParent(ot))return!1;let ut=et.node(-1),ct=et.indexAfter(-1),dt=defaultBlockAt$1(ut.contentMatchAt(ct));if(!dt||!ut.canReplaceWith(ct,ct,dt))return!1;if(g){let ft=et.after(),St=it.tr.replaceWith(ft,ft,dt.createAndFill());St.setSelection(Selection.near(St.doc.resolve(ft),1)),g(St.scrollIntoView())}return!0},createParagraphNear$1=(it,g)=>{let et=it.selection,{$from:ot,$to:ut}=et;if(et instanceof AllSelection||ot.parent.inlineContent||ut.parent.inlineContent)return!1;let ct=defaultBlockAt$1(ut.parent.contentMatchAt(ut.indexAfter()));if(!ct||!ct.isTextblock)return!1;if(g){let dt=(!ot.parentOffset&&ut.index()<ut.parent.childCount?ot:ut).pos,ft=it.tr.insert(dt,ct.createAndFill());ft.setSelection(TextSelection.create(ft.doc,dt+1)),g(ft.scrollIntoView())}return!0},liftEmptyBlock$1=(it,g)=>{let{$cursor:et}=it.selection;if(!et||et.parent.content.size)return!1;if(et.depth>1&&et.after()!=et.end(-1)){let ct=et.before();if(canSplit(it.doc,ct))return g&&g(it.tr.split(ct).scrollIntoView()),!0}let ot=et.blockRange(),ut=ot&&liftTarget(ot);return ut==null?!1:(g&&g(it.tr.lift(ot,ut).scrollIntoView()),!0)},selectParentNode$1=(it,g)=>{let{$from:et,to:ot}=it.selection,ut,ct=et.sharedDepth(ot);return ct==0?!1:(ut=et.before(ct),g&&g(it.tr.setSelection(NodeSelection.create(it.doc,ut))),!0)};function joinMaybeClear(it,g,et){let ot=g.nodeBefore,ut=g.nodeAfter,ct=g.index();return!ot||!ut||!ot.type.compatibleContent(ut.type)?!1:!ot.content.size&&g.parent.canReplace(ct-1,ct)?(et&&et(it.tr.delete(g.pos-ot.nodeSize,g.pos).scrollIntoView()),!0):!g.parent.canReplace(ct,ct+1)||!(ut.isTextblock||canJoin(it.doc,g.pos))?!1:(et&&et(it.tr.join(g.pos).scrollIntoView()),!0)}function deleteBarrier(it,g,et,ot){let ut=g.nodeBefore,ct=g.nodeAfter,dt,ft,St=ut.type.spec.isolating||ct.type.spec.isolating;if(!St&&joinMaybeClear(it,g,et))return!0;let kt=!St&&g.parent.canReplace(g.index(),g.index()+1);if(kt&&(dt=(ft=ut.contentMatchAt(ut.childCount)).findWrapping(ct.type))&&ft.matchType(dt[0]||ct.type).validEnd){if(et){let jt=g.pos+ct.nodeSize,Bt=Fragment.empty;for(let Ut=dt.length-1;Ut>=0;Ut--)Bt=Fragment.from(dt[Ut].create(null,Bt));Bt=Fragment.from(ut.copy(Bt));let zt=it.tr.step(new ReplaceAroundStep(g.pos-1,jt,g.pos,jt,new Slice(Bt,1,0),dt.length,!0)),Ht=zt.doc.resolve(jt+2*dt.length);Ht.nodeAfter&&Ht.nodeAfter.type==ut.type&&canJoin(zt.doc,Ht.pos)&&zt.join(Ht.pos),et(zt.scrollIntoView())}return!0}let Tt=ct.type.spec.isolating||ot>0&&St?null:Selection.findFrom(g,1),Rt=Tt&&Tt.$from.blockRange(Tt.$to),Ft=Rt&&liftTarget(Rt);if(Ft!=null&&Ft>=g.depth)return et&&et(it.tr.lift(Rt,Ft).scrollIntoView()),!0;if(kt&&textblockAt(ct,"start",!0)&&textblockAt(ut,"end")){let jt=ut,Bt=[];for(;Bt.push(jt),!jt.isTextblock;)jt=jt.lastChild;let zt=ct,Ht=1;for(;!zt.isTextblock;zt=zt.firstChild)Ht++;if(jt.canReplace(jt.childCount,jt.childCount,zt.content)){if(et){let Ut=Fragment.empty;for(let Yt=Bt.length-1;Yt>=0;Yt--)Ut=Fragment.from(Bt[Yt].copy(Ut));let Kt=it.tr.step(new ReplaceAroundStep(g.pos-Bt.length,g.pos+ct.nodeSize,g.pos+Ht,g.pos+ct.nodeSize-Ht,new Slice(Ut,Bt.length,0),0,!0));et(Kt.scrollIntoView())}return!0}}return!1}function selectTextblockSide(it){return function(g,et){let ot=g.selection,ut=it<0?ot.$from:ot.$to,ct=ut.depth;for(;ut.node(ct).isInline;){if(!ct)return!1;ct--}return ut.node(ct).isTextblock?(et&&et(g.tr.setSelection(TextSelection.create(g.doc,it<0?ut.start(ct):ut.end(ct)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(it,g=null){return function(et,ot){let{$from:ut,$to:ct}=et.selection,dt=ut.blockRange(ct),ft=dt&&findWrapping(dt,it,g);return ft?(ot&&ot(et.tr.wrap(dt,ft).scrollIntoView()),!0):!1}}function setBlockType(it,g=null){return function(et,ot){let ut=!1;for(let ct=0;ct<et.selection.ranges.length&&!ut;ct++){let{$from:{pos:dt},$to:{pos:ft}}=et.selection.ranges[ct];et.doc.nodesBetween(dt,ft,(St,kt)=>{if(ut)return!1;if(!(!St.isTextblock||St.hasMarkup(it,g)))if(St.type==it)ut=!0;else{let Tt=et.doc.resolve(kt),Rt=Tt.index();ut=Tt.parent.canReplaceWith(Rt,Rt+1,it)}})}if(!ut)return!1;if(ot){let ct=et.tr;for(let dt=0;dt<et.selection.ranges.length;dt++){let{$from:{pos:ft},$to:{pos:St}}=et.selection.ranges[dt];ct.setBlockType(ft,St,it,g)}ot(ct.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(it,g=null){return function(et,ot){let{$from:ut,$to:ct}=et.selection,dt=ut.blockRange(ct);if(!dt)return!1;let ft=ot?et.tr:null;return wrapRangeInList(ft,dt,it,g)?(ot&&ot(ft.scrollIntoView()),!0):!1}}function wrapRangeInList(it,g,et,ot=null){let ut=!1,ct=g,dt=g.$from.doc;if(g.depth>=2&&g.$from.node(g.depth-1).type.compatibleContent(et)&&g.startIndex==0){if(g.$from.index(g.depth-1)==0)return!1;let St=dt.resolve(g.start-2);ct=new NodeRange(St,St,g.depth),g.endIndex<g.parent.childCount&&(g=new NodeRange(g.$from,dt.resolve(g.$to.end(g.depth)),g.depth)),ut=!0}let ft=findWrapping(ct,et,ot,g);return ft?(it&&doWrapInList(it,g,ft,ut,et),!0):!1}function doWrapInList(it,g,et,ot,ut){let ct=Fragment.empty;for(let Tt=et.length-1;Tt>=0;Tt--)ct=Fragment.from(et[Tt].type.create(et[Tt].attrs,ct));it.step(new ReplaceAroundStep(g.start-(ot?2:0),g.end,g.start,g.end,new Slice(ct,0,0),et.length,!0));let dt=0;for(let Tt=0;Tt<et.length;Tt++)et[Tt].type==ut&&(dt=Tt+1);let ft=et.length-dt,St=g.start+et.length-(ot?2:0),kt=g.parent;for(let Tt=g.startIndex,Rt=g.endIndex,Ft=!0;Tt<Rt;Tt++,Ft=!1)!Ft&&canSplit(it.doc,St,ft)&&(it.split(St,ft),St+=2*ft),St+=kt.child(Tt).nodeSize;return it}function liftListItem$1(it){return function(g,et){let{$from:ot,$to:ut}=g.selection,ct=ot.blockRange(ut,dt=>dt.childCount>0&&dt.firstChild.type==it);return ct?et?ot.node(ct.depth-1).type==it?liftToOuterList(g,et,it,ct):liftOutOfList(g,et,ct):!0:!1}}function liftToOuterList(it,g,et,ot){let ut=it.tr,ct=ot.end,dt=ot.$to.end(ot.depth);ct<dt&&(ut.step(new ReplaceAroundStep(ct-1,dt,ct,dt,new Slice(Fragment.from(et.create(null,ot.parent.copy())),1,0),1,!0)),ot=new NodeRange(ut.doc.resolve(ot.$from.pos),ut.doc.resolve(dt),ot.depth));const ft=liftTarget(ot);if(ft==null)return!1;ut.lift(ot,ft);let St=ut.doc.resolve(ut.mapping.map(ct,-1)-1);return canJoin(ut.doc,St.pos)&&St.nodeBefore.type==St.nodeAfter.type&&ut.join(St.pos),g(ut.scrollIntoView()),!0}function liftOutOfList(it,g,et){let ot=it.tr,ut=et.parent;for(let jt=et.end,Bt=et.endIndex-1,zt=et.startIndex;Bt>zt;Bt--)jt-=ut.child(Bt).nodeSize,ot.delete(jt-1,jt+1);let ct=ot.doc.resolve(et.start),dt=ct.nodeAfter;if(ot.mapping.map(et.end)!=et.start+ct.nodeAfter.nodeSize)return!1;let ft=et.startIndex==0,St=et.endIndex==ut.childCount,kt=ct.node(-1),Tt=ct.index(-1);if(!kt.canReplace(Tt+(ft?0:1),Tt+1,dt.content.append(St?Fragment.empty:Fragment.from(ut))))return!1;let Rt=ct.pos,Ft=Rt+dt.nodeSize;return ot.step(new ReplaceAroundStep(Rt-(ft?1:0),Ft+(St?1:0),Rt+1,Ft-1,new Slice((ft?Fragment.empty:Fragment.from(ut.copy(Fragment.empty))).append(St?Fragment.empty:Fragment.from(ut.copy(Fragment.empty))),ft?0:1,St?0:1),ft?0:1)),g(ot.scrollIntoView()),!0}function sinkListItem$1(it){return function(g,et){let{$from:ot,$to:ut}=g.selection,ct=ot.blockRange(ut,kt=>kt.childCount>0&&kt.firstChild.type==it);if(!ct)return!1;let dt=ct.startIndex;if(dt==0)return!1;let ft=ct.parent,St=ft.child(dt-1);if(St.type!=it)return!1;if(et){let kt=St.lastChild&&St.lastChild.type==ft.type,Tt=Fragment.from(kt?it.create():null),Rt=new Slice(Fragment.from(it.create(null,Fragment.from(ft.type.create(null,Tt)))),kt?3:1,0),Ft=ct.start,jt=ct.end;et(g.tr.step(new ReplaceAroundStep(Ft-(kt?3:1),jt,Ft,jt,Rt,1,!0)).scrollIntoView())}return!0}}const domIndex=function(it){for(var g=0;;g++)if(it=it.previousSibling,!it)return g},parentNode=function(it){let g=it.assignedSlot||it.parentNode;return g&&g.nodeType==11?g.host:g};let reusedRange=null;const textRange=function(it,g,et){let ot=reusedRange||(reusedRange=document.createRange());return ot.setEnd(it,et??it.nodeValue.length),ot.setStart(it,g||0),ot},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(it,g,et,ot){return et&&(scanFor(it,g,et,ot,-1)||scanFor(it,g,et,ot,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(it,g,et,ot,ut){for(var ct;;){if(it==et&&g==ot)return!0;if(g==(ut<0?0:nodeSize(it))){let dt=it.parentNode;if(!dt||dt.nodeType!=1||hasBlockDesc(it)||atomElements.test(it.nodeName)||it.contentEditable=="false")return!1;g=domIndex(it)+(ut<0?0:1),it=dt}else if(it.nodeType==1){let dt=it.childNodes[g+(ut<0?-1:0)];if(dt.nodeType==1&&dt.contentEditable=="false")if(!((ct=dt.pmViewDesc)===null||ct===void 0)&&ct.ignoreForSelection)g+=ut;else return!1;else it=dt,g=ut<0?nodeSize(it):0}else return!1}}function nodeSize(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function textNodeBefore$1(it,g){for(;;){if(it.nodeType==3&&g)return it;if(it.nodeType==1&&g>0){if(it.contentEditable=="false")return null;it=it.childNodes[g-1],g=nodeSize(it)}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it),it=it.parentNode;else return null}}function textNodeAfter$1(it,g){for(;;){if(it.nodeType==3&&g<it.nodeValue.length)return it;if(it.nodeType==1&&g<it.childNodes.length){if(it.contentEditable=="false")return null;it=it.childNodes[g],g=0}else if(it.parentNode&&!hasBlockDesc(it))g=domIndex(it)+1,it=it.parentNode;else return null}}function isOnEdge(it,g,et){for(let ot=g==0,ut=g==nodeSize(it);ot||ut;){if(it==et)return!0;let ct=domIndex(it);if(it=it.parentNode,!it)return!1;ot=ot&&ct==0,ut=ut&&ct==nodeSize(it)}}function hasBlockDesc(it){let g;for(let et=it;et&&!(g=et.pmViewDesc);et=et.parentNode);return g&&g.node&&g.node.isBlock&&(g.dom==it||g.contentDOM==it)}const selectionCollapsed=function(it){return it.focusNode&&isEquivalentPosition(it.focusNode,it.focusOffset,it.anchorNode,it.anchorOffset)};function keyEvent(it,g){let et=document.createEvent("Event");return et.initEvent("keydown",!0,!0),et.keyCode=it,et.key=et.code=g,et}function deepActiveElement(it){let g=it.activeElement;for(;g&&g.shadowRoot;)g=g.shadowRoot.activeElement;return g}function caretFromPoint(it,g,et){if(it.caretPositionFromPoint)try{let ot=it.caretPositionFromPoint(g,et);if(ot)return{node:ot.offsetNode,offset:Math.min(nodeSize(ot.offsetNode),ot.offset)}}catch{}if(it.caretRangeFromPoint){let ot=it.caretRangeFromPoint(g,et);if(ot)return{node:ot.startContainer,offset:Math.min(nodeSize(ot.startContainer),ot.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(it){let g=it.defaultView&&it.defaultView.visualViewport;return g?{left:0,right:g.width,top:0,bottom:g.height}:{left:0,right:it.documentElement.clientWidth,top:0,bottom:it.documentElement.clientHeight}}function getSide(it,g){return typeof it=="number"?it:it[g]}function clientRect(it){let g=it.getBoundingClientRect(),et=g.width/it.offsetWidth||1,ot=g.height/it.offsetHeight||1;return{left:g.left,right:g.left+it.clientWidth*et,top:g.top,bottom:g.top+it.clientHeight*ot}}function scrollRectIntoView(it,g,et){let ot=it.someProp("scrollThreshold")||0,ut=it.someProp("scrollMargin")||5,ct=it.dom.ownerDocument;for(let dt=et||it.dom;dt;){if(dt.nodeType!=1){dt=parentNode(dt);continue}let ft=dt,St=ft==ct.body,kt=St?windowRect(ct):clientRect(ft),Tt=0,Rt=0;if(g.top<kt.top+getSide(ot,"top")?Rt=-(kt.top-g.top+getSide(ut,"top")):g.bottom>kt.bottom-getSide(ot,"bottom")&&(Rt=g.bottom-g.top>kt.bottom-kt.top?g.top+getSide(ut,"top")-kt.top:g.bottom-kt.bottom+getSide(ut,"bottom")),g.left<kt.left+getSide(ot,"left")?Tt=-(kt.left-g.left+getSide(ut,"left")):g.right>kt.right-getSide(ot,"right")&&(Tt=g.right-kt.right+getSide(ut,"right")),Tt||Rt)if(St)ct.defaultView.scrollBy(Tt,Rt);else{let jt=ft.scrollLeft,Bt=ft.scrollTop;Rt&&(ft.scrollTop+=Rt),Tt&&(ft.scrollLeft+=Tt);let zt=ft.scrollLeft-jt,Ht=ft.scrollTop-Bt;g={left:g.left-zt,top:g.top-Ht,right:g.right-zt,bottom:g.bottom-Ht}}let Ft=St?"fixed":getComputedStyle(dt).position;if(/^(fixed|sticky)$/.test(Ft))break;dt=Ft=="absolute"?dt.offsetParent:parentNode(dt)}}function storeScrollPos(it){let g=it.dom.getBoundingClientRect(),et=Math.max(0,g.top),ot,ut;for(let ct=(g.left+g.right)/2,dt=et+1;dt<Math.min(innerHeight,g.bottom);dt+=5){let ft=it.root.elementFromPoint(ct,dt);if(!ft||ft==it.dom||!it.dom.contains(ft))continue;let St=ft.getBoundingClientRect();if(St.top>=et-20){ot=ft,ut=St.top;break}}return{refDOM:ot,refTop:ut,stack:scrollStack(it.dom)}}function scrollStack(it){let g=[],et=it.ownerDocument;for(let ot=it;ot&&(g.push({dom:ot,top:ot.scrollTop,left:ot.scrollLeft}),it!=et);ot=parentNode(ot));return g}function resetScrollPos({refDOM:it,refTop:g,stack:et}){let ot=it?it.getBoundingClientRect().top:0;restoreScrollStack(et,ot==0?0:ot-g)}function restoreScrollStack(it,g){for(let et=0;et<it.length;et++){let{dom:ot,top:ut,left:ct}=it[et];ot.scrollTop!=ut+g&&(ot.scrollTop=ut+g),ot.scrollLeft!=ct&&(ot.scrollLeft=ct)}}let preventScrollSupported=null;function focusPreventScroll(it){if(it.setActive)return it.setActive();if(preventScrollSupported)return it.focus(preventScrollSupported);let g=scrollStack(it);it.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(g,0))}function findOffsetInNode(it,g){let et,ot=2e8,ut,ct=0,dt=g.top,ft=g.top,St,kt;for(let Tt=it.firstChild,Rt=0;Tt;Tt=Tt.nextSibling,Rt++){let Ft;if(Tt.nodeType==1)Ft=Tt.getClientRects();else if(Tt.nodeType==3)Ft=textRange(Tt).getClientRects();else continue;for(let jt=0;jt<Ft.length;jt++){let Bt=Ft[jt];if(Bt.top<=dt&&Bt.bottom>=ft){dt=Math.max(Bt.bottom,dt),ft=Math.min(Bt.top,ft);let zt=Bt.left>g.left?Bt.left-g.left:Bt.right<g.left?g.left-Bt.right:0;if(zt<ot){et=Tt,ot=zt,ut=zt&&et.nodeType==3?{left:Bt.right<g.left?Bt.right:Bt.left,top:g.top}:g,Tt.nodeType==1&&zt&&(ct=Rt+(g.left>=(Bt.left+Bt.right)/2?1:0));continue}}else Bt.top>g.top&&!St&&Bt.left<=g.left&&Bt.right>=g.left&&(St=Tt,kt={left:Math.max(Bt.left,Math.min(Bt.right,g.left)),top:Bt.top});!et&&(g.left>=Bt.right&&g.top>=Bt.top||g.left>=Bt.left&&g.top>=Bt.bottom)&&(ct=Rt+1)}}return!et&&St&&(et=St,ut=kt,ot=0),et&&et.nodeType==3?findOffsetInText(et,ut):!et||ot&&et.nodeType==1?{node:it,offset:ct}:findOffsetInNode(et,ut)}function findOffsetInText(it,g){let et=it.nodeValue.length,ot=document.createRange();for(let ut=0;ut<et;ut++){ot.setEnd(it,ut+1),ot.setStart(it,ut);let ct=singleRect(ot,1);if(ct.top!=ct.bottom&&inRect(g,ct))return{node:it,offset:ut+(g.left>=(ct.left+ct.right)/2?1:0)}}return{node:it,offset:0}}function inRect(it,g){return it.left>=g.left-1&&it.left<=g.right+1&&it.top>=g.top-1&&it.top<=g.bottom+1}function targetKludge(it,g){let et=it.parentNode;return et&&/^li$/i.test(et.nodeName)&&g.left<it.getBoundingClientRect().left?et:it}function posFromElement(it,g,et){let{node:ot,offset:ut}=findOffsetInNode(g,et),ct=-1;if(ot.nodeType==1&&!ot.firstChild){let dt=ot.getBoundingClientRect();ct=dt.left!=dt.right&&et.left>(dt.left+dt.right)/2?1:-1}return it.docView.posFromDOM(ot,ut,ct)}function posFromCaret(it,g,et,ot){let ut=-1;for(let ct=g,dt=!1;ct!=it.dom;){let ft=it.docView.nearestDesc(ct,!0),St;if(!ft)return null;if(ft.dom.nodeType==1&&(ft.node.isBlock&&ft.parent||!ft.contentDOM)&&((St=ft.dom.getBoundingClientRect()).width||St.height)&&(ft.node.isBlock&&ft.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(ft.dom.nodeName)&&(!dt&&St.left>ot.left||St.top>ot.top?ut=ft.posBefore:(!dt&&St.right<ot.left||St.bottom<ot.top)&&(ut=ft.posAfter),dt=!0),!ft.contentDOM&&ut<0&&!ft.node.isText))return(ft.node.isBlock?ot.top<(St.top+St.bottom)/2:ot.left<(St.left+St.right)/2)?ft.posBefore:ft.posAfter;ct=ft.dom.parentNode}return ut>-1?ut:it.docView.posFromDOM(g,et,-1)}function elementFromPoint(it,g,et){let ot=it.childNodes.length;if(ot&&et.top<et.bottom)for(let ut=Math.max(0,Math.min(ot-1,Math.floor(ot*(g.top-et.top)/(et.bottom-et.top))-2)),ct=ut;;){let dt=it.childNodes[ct];if(dt.nodeType==1){let ft=dt.getClientRects();for(let St=0;St<ft.length;St++){let kt=ft[St];if(inRect(g,kt))return elementFromPoint(dt,g,kt)}}if((ct=(ct+1)%ot)==ut)break}return it}function posAtCoords(it,g){let et=it.dom.ownerDocument,ot,ut=0,ct=caretFromPoint(et,g.left,g.top);ct&&({node:ot,offset:ut}=ct);let dt=(it.root.elementFromPoint?it.root:et).elementFromPoint(g.left,g.top),ft;if(!dt||!it.dom.contains(dt.nodeType!=1?dt.parentNode:dt)){let kt=it.dom.getBoundingClientRect();if(!inRect(g,kt)||(dt=elementFromPoint(it.dom,g,kt),!dt))return null}if(safari)for(let kt=dt;ot&&kt;kt=parentNode(kt))kt.draggable&&(ot=void 0);if(dt=targetKludge(dt,g),ot){if(gecko&&ot.nodeType==1&&(ut=Math.min(ut,ot.childNodes.length),ut<ot.childNodes.length)){let Tt=ot.childNodes[ut],Rt;Tt.nodeName=="IMG"&&(Rt=Tt.getBoundingClientRect()).right<=g.left&&Rt.bottom>g.top&&ut++}let kt;webkit&&ut&&ot.nodeType==1&&(kt=ot.childNodes[ut-1]).nodeType==1&&kt.contentEditable=="false"&&kt.getBoundingClientRect().top>=g.top&&ut--,ot==it.dom&&ut==ot.childNodes.length-1&&ot.lastChild.nodeType==1&&g.top>ot.lastChild.getBoundingClientRect().bottom?ft=it.state.doc.content.size:(ut==0||ot.nodeType!=1||ot.childNodes[ut-1].nodeName!="BR")&&(ft=posFromCaret(it,ot,ut,g))}ft==null&&(ft=posFromElement(it,dt,g));let St=it.docView.nearestDesc(dt,!0);return{pos:ft,inside:St?St.posAtStart-St.border:-1}}function nonZero(it){return it.top<it.bottom||it.left<it.right}function singleRect(it,g){let et=it.getClientRects();if(et.length){let ot=et[g<0?0:et.length-1];if(nonZero(ot))return ot}return Array.prototype.find.call(et,nonZero)||it.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(it,g,et){let{node:ot,offset:ut,atom:ct}=it.docView.domFromPos(g,et<0?-1:1),dt=webkit||gecko;if(ot.nodeType==3)if(dt&&(BIDI.test(ot.nodeValue)||(et<0?!ut:ut==ot.nodeValue.length))){let St=singleRect(textRange(ot,ut,ut),et);if(gecko&&ut&&/\s/.test(ot.nodeValue[ut-1])&&ut<ot.nodeValue.length){let kt=singleRect(textRange(ot,ut-1,ut-1),-1);if(kt.top==St.top){let Tt=singleRect(textRange(ot,ut,ut+1),-1);if(Tt.top!=St.top)return flattenV(Tt,Tt.left<kt.left)}}return St}else{let St=ut,kt=ut,Tt=et<0?1:-1;return et<0&&!ut?(kt++,Tt=-1):et>=0&&ut==ot.nodeValue.length?(St--,Tt=1):et<0?St--:kt++,flattenV(singleRect(textRange(ot,St,kt),Tt),Tt<0)}if(!it.state.doc.resolve(g-(ct||0)).parent.inlineContent){if(ct==null&&ut&&(et<0||ut==nodeSize(ot))){let St=ot.childNodes[ut-1];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!1)}if(ct==null&&ut<nodeSize(ot)){let St=ot.childNodes[ut];if(St.nodeType==1)return flattenH(St.getBoundingClientRect(),!0)}return flattenH(ot.getBoundingClientRect(),et>=0)}if(ct==null&&ut&&(et<0||ut==nodeSize(ot))){let St=ot.childNodes[ut-1],kt=St.nodeType==3?textRange(St,nodeSize(St)-(dt?0:1)):St.nodeType==1&&(St.nodeName!="BR"||!St.nextSibling)?St:null;if(kt)return flattenV(singleRect(kt,1),!1)}if(ct==null&&ut<nodeSize(ot)){let St=ot.childNodes[ut];for(;St.pmViewDesc&&St.pmViewDesc.ignoreForCoords;)St=St.nextSibling;let kt=St?St.nodeType==3?textRange(St,0,dt?0:1):St.nodeType==1?St:null:null;if(kt)return flattenV(singleRect(kt,-1),!0)}return flattenV(singleRect(ot.nodeType==3?textRange(ot):ot,-et),et>=0)}function flattenV(it,g){if(it.width==0)return it;let et=g?it.left:it.right;return{top:it.top,bottom:it.bottom,left:et,right:et}}function flattenH(it,g){if(it.height==0)return it;let et=g?it.top:it.bottom;return{top:et,bottom:et,left:it.left,right:it.right}}function withFlushedState(it,g,et){let ot=it.state,ut=it.root.activeElement;ot!=g&&it.updateState(g),ut!=it.dom&&it.focus();try{return et()}finally{ot!=g&&it.updateState(ot),ut!=it.dom&&ut&&ut.focus()}}function endOfTextblockVertical(it,g,et){let ot=g.selection,ut=et=="up"?ot.$from:ot.$to;return withFlushedState(it,g,()=>{let{node:ct}=it.docView.domFromPos(ut.pos,et=="up"?-1:1);for(;;){let ft=it.docView.nearestDesc(ct,!0);if(!ft)break;if(ft.node.isBlock){ct=ft.contentDOM||ft.dom;break}ct=ft.dom.parentNode}let dt=coordsAtPos(it,ut.pos,1);for(let ft=ct.firstChild;ft;ft=ft.nextSibling){let St;if(ft.nodeType==1)St=ft.getClientRects();else if(ft.nodeType==3)St=textRange(ft,0,ft.nodeValue.length).getClientRects();else continue;for(let kt=0;kt<St.length;kt++){let Tt=St[kt];if(Tt.bottom>Tt.top+1&&(et=="up"?dt.top-Tt.top>(Tt.bottom-dt.top)*2:Tt.bottom-dt.bottom>(dt.bottom-Tt.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(it,g,et){let{$head:ot}=g.selection;if(!ot.parent.isTextblock)return!1;let ut=ot.parentOffset,ct=!ut,dt=ut==ot.parent.content.size,ft=it.domSelection();return ft?!maybeRTL.test(ot.parent.textContent)||!ft.modify?et=="left"||et=="backward"?ct:dt:withFlushedState(it,g,()=>{let{focusNode:St,focusOffset:kt,anchorNode:Tt,anchorOffset:Rt}=it.domSelectionRange(),Ft=ft.caretBidiLevel;ft.modify("move",et,"character");let jt=ot.depth?it.docView.domAfterPos(ot.before()):it.dom,{focusNode:Bt,focusOffset:zt}=it.domSelectionRange(),Ht=Bt&&!jt.contains(Bt.nodeType==1?Bt:Bt.parentNode)||St==Bt&&kt==zt;try{ft.collapse(Tt,Rt),St&&(St!=Tt||kt!=Rt)&&ft.extend&&ft.extend(St,kt)}catch{}return Ft!=null&&(ft.caretBidiLevel=Ft),Ht}):ot.pos==ot.start()||ot.pos==ot.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(it,g,et){return cachedState==g&&cachedDir==et?cachedResult:(cachedState=g,cachedDir=et,cachedResult=et=="up"||et=="down"?endOfTextblockVertical(it,g,et):endOfTextblockHorizontal(it,g,et))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(g,et,ot,ut){this.parent=g,this.children=et,this.dom=ot,this.contentDOM=ut,this.dirty=NOT_DIRTY,ot.pmViewDesc=this}matchesWidget(g){return!1}matchesMark(g){return!1}matchesNode(g,et,ot){return!1}matchesHack(g){return!1}parseRule(){return null}stopEvent(g){return!1}get size(){let g=0;for(let et=0;et<this.children.length;et++)g+=this.children[et].size;return g}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let g=0;g<this.children.length;g++)this.children[g].destroy()}posBeforeChild(g){for(let et=0,ot=this.posAtStart;;et++){let ut=this.children[et];if(ut==g)return ot;ot+=ut.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(g,et,ot){if(this.contentDOM&&this.contentDOM.contains(g.nodeType==1?g:g.parentNode))if(ot<0){let ct,dt;if(g==this.contentDOM)ct=g.childNodes[et-1];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ct=g.previousSibling}for(;ct&&!((dt=ct.pmViewDesc)&&dt.parent==this);)ct=ct.previousSibling;return ct?this.posBeforeChild(dt)+dt.size:this.posAtStart}else{let ct,dt;if(g==this.contentDOM)ct=g.childNodes[et];else{for(;g.parentNode!=this.contentDOM;)g=g.parentNode;ct=g.nextSibling}for(;ct&&!((dt=ct.pmViewDesc)&&dt.parent==this);)ct=ct.nextSibling;return ct?this.posBeforeChild(dt):this.posAtEnd}let ut;if(g==this.dom&&this.contentDOM)ut=et>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))ut=g.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(et==0)for(let ct=g;;ct=ct.parentNode){if(ct==this.dom){ut=!1;break}if(ct.previousSibling)break}if(ut==null&&et==g.childNodes.length)for(let ct=g;;ct=ct.parentNode){if(ct==this.dom){ut=!0;break}if(ct.nextSibling)break}}return ut??ot>0?this.posAtEnd:this.posAtStart}nearestDesc(g,et=!1){for(let ot=!0,ut=g;ut;ut=ut.parentNode){let ct=this.getDesc(ut),dt;if(ct&&(!et||ct.node))if(ot&&(dt=ct.nodeDOM)&&!(dt.nodeType==1?dt.contains(g.nodeType==1?g:g.parentNode):dt==g))ot=!1;else return ct}}getDesc(g){let et=g.pmViewDesc;for(let ot=et;ot;ot=ot.parent)if(ot==this)return et}posFromDOM(g,et,ot){for(let ut=g;ut;ut=ut.parentNode){let ct=this.getDesc(ut);if(ct)return ct.localPosFromDOM(g,et,ot)}return-1}descAt(g){for(let et=0,ot=0;et<this.children.length;et++){let ut=this.children[et],ct=ot+ut.size;if(ot==g&&ct!=ot){for(;!ut.border&&ut.children.length;)for(let dt=0;dt<ut.children.length;dt++){let ft=ut.children[dt];if(ft.size){ut=ft;break}}return ut}if(g<ct)return ut.descAt(g-ot-ut.border);ot=ct}}domFromPos(g,et){if(!this.contentDOM)return{node:this.dom,offset:0,atom:g+1};let ot=0,ut=0;for(let ct=0;ot<this.children.length;ot++){let dt=this.children[ot],ft=ct+dt.size;if(ft>g||dt instanceof TrailingHackViewDesc){ut=g-ct;break}ct=ft}if(ut)return this.children[ot].domFromPos(ut-this.children[ot].border,et);for(let ct;ot&&!(ct=this.children[ot-1]).size&&ct instanceof WidgetViewDesc&&ct.side>=0;ot--);if(et<=0){let ct,dt=!0;for(;ct=ot?this.children[ot-1]:null,!(!ct||ct.dom.parentNode==this.contentDOM);ot--,dt=!1);return ct&&et&&dt&&!ct.border&&!ct.domAtom?ct.domFromPos(ct.size,et):{node:this.contentDOM,offset:ct?domIndex(ct.dom)+1:0}}else{let ct,dt=!0;for(;ct=ot<this.children.length?this.children[ot]:null,!(!ct||ct.dom.parentNode==this.contentDOM);ot++,dt=!1);return ct&&dt&&!ct.border&&!ct.domAtom?ct.domFromPos(0,et):{node:this.contentDOM,offset:ct?domIndex(ct.dom):this.contentDOM.childNodes.length}}}parseRange(g,et,ot=0){if(this.children.length==0)return{node:this.contentDOM,from:g,to:et,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let ut=-1,ct=-1;for(let dt=ot,ft=0;;ft++){let St=this.children[ft],kt=dt+St.size;if(ut==-1&&g<=kt){let Tt=dt+St.border;if(g>=Tt&&et<=kt-St.border&&St.node&&St.contentDOM&&this.contentDOM.contains(St.contentDOM))return St.parseRange(g,et,Tt);g=dt;for(let Rt=ft;Rt>0;Rt--){let Ft=this.children[Rt-1];if(Ft.size&&Ft.dom.parentNode==this.contentDOM&&!Ft.emptyChildAt(1)){ut=domIndex(Ft.dom)+1;break}g-=Ft.size}ut==-1&&(ut=0)}if(ut>-1&&(kt>et||ft==this.children.length-1)){et=kt;for(let Tt=ft+1;Tt<this.children.length;Tt++){let Rt=this.children[Tt];if(Rt.size&&Rt.dom.parentNode==this.contentDOM&&!Rt.emptyChildAt(-1)){ct=domIndex(Rt.dom);break}et+=Rt.size}ct==-1&&(ct=this.contentDOM.childNodes.length);break}dt=kt}return{node:this.contentDOM,from:g,to:et,fromOffset:ut,toOffset:ct}}emptyChildAt(g){if(this.border||!this.contentDOM||!this.children.length)return!1;let et=this.children[g<0?0:this.children.length-1];return et.size==0||et.emptyChildAt(g)}domAfterPos(g){let{node:et,offset:ot}=this.domFromPos(g,0);if(et.nodeType!=1||ot==et.childNodes.length)throw new RangeError("No node after pos "+g);return et.childNodes[ot]}setSelection(g,et,ot,ut=!1){let ct=Math.min(g,et),dt=Math.max(g,et);for(let jt=0,Bt=0;jt<this.children.length;jt++){let zt=this.children[jt],Ht=Bt+zt.size;if(ct>Bt&&dt<Ht)return zt.setSelection(g-Bt-zt.border,et-Bt-zt.border,ot,ut);Bt=Ht}let ft=this.domFromPos(g,g?-1:1),St=et==g?ft:this.domFromPos(et,et?-1:1),kt=ot.root.getSelection(),Tt=ot.domSelectionRange(),Rt=!1;if((gecko||safari)&&g==et){let{node:jt,offset:Bt}=ft;if(jt.nodeType==3){if(Rt=!!(Bt&&jt.nodeValue[Bt-1]==`
`),Rt&&Bt==jt.nodeValue.length)for(let zt=jt,Ht;zt;zt=zt.parentNode){if(Ht=zt.nextSibling){Ht.nodeName=="BR"&&(ft=St={node:Ht.parentNode,offset:domIndex(Ht)+1});break}let Ut=zt.pmViewDesc;if(Ut&&Ut.node&&Ut.node.isBlock)break}}else{let zt=jt.childNodes[Bt-1];Rt=zt&&(zt.nodeName=="BR"||zt.contentEditable=="false")}}if(gecko&&Tt.focusNode&&Tt.focusNode!=St.node&&Tt.focusNode.nodeType==1){let jt=Tt.focusNode.childNodes[Tt.focusOffset];jt&&jt.contentEditable=="false"&&(ut=!0)}if(!(ut||Rt&&safari)&&isEquivalentPosition(ft.node,ft.offset,Tt.anchorNode,Tt.anchorOffset)&&isEquivalentPosition(St.node,St.offset,Tt.focusNode,Tt.focusOffset))return;let Ft=!1;if((kt.extend||g==et)&&!(Rt&&gecko)){kt.collapse(ft.node,ft.offset);try{g!=et&&kt.extend(St.node,St.offset),Ft=!0}catch{}}if(!Ft){if(g>et){let Bt=ft;ft=St,St=Bt}let jt=document.createRange();jt.setEnd(St.node,St.offset),jt.setStart(ft.node,ft.offset),kt.removeAllRanges(),kt.addRange(jt)}}ignoreMutation(g){return!this.contentDOM&&g.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(g,et){for(let ot=0,ut=0;ut<this.children.length;ut++){let ct=this.children[ut],dt=ot+ct.size;if(ot==dt?g<=dt&&et>=ot:g<dt&&et>ot){let ft=ot+ct.border,St=dt-ct.border;if(g>=ft&&et<=St){this.dirty=g==ot||et==dt?CONTENT_DIRTY:CHILD_DIRTY,g==ft&&et==St&&(ct.contentLost||ct.dom.parentNode!=this.contentDOM)?ct.dirty=NODE_DIRTY:ct.markDirty(g-ft,et-ft);return}else ct.dirty=ct.dom==ct.contentDOM&&ct.dom.parentNode==this.contentDOM&&!ct.children.length?CONTENT_DIRTY:NODE_DIRTY}ot=dt}this.dirty=CONTENT_DIRTY}markParentsDirty(){let g=1;for(let et=this.parent;et;et=et.parent,g++){let ot=g==1?CONTENT_DIRTY:CHILD_DIRTY;et.dirty<ot&&(et.dirty=ot)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(g){return!1}}class WidgetViewDesc extends ViewDesc{constructor(g,et,ot,ut){let ct,dt=et.type.toDOM;if(typeof dt=="function"&&(dt=dt(ot,()=>{if(!ct)return ut;if(ct.parent)return ct.parent.posBeforeChild(ct)})),!et.type.spec.raw){if(dt.nodeType!=1){let ft=document.createElement("span");ft.appendChild(dt),dt=ft}dt.contentEditable="false",dt.classList.add("ProseMirror-widget")}super(g,[],dt,null),this.widget=et,this.widget=et,ct=this}matchesWidget(g){return this.dirty==NOT_DIRTY&&g.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(g){let et=this.widget.spec.stopEvent;return et?et(g):!1}ignoreMutation(g){return g.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(g,et,ot,ut){super(g,[],et,null),this.textDOM=ot,this.text=ut}get size(){return this.text.length}localPosFromDOM(g,et){return g!=this.textDOM?this.posAtStart+(et?this.size:0):this.posAtStart+et}domFromPos(g){return{node:this.textDOM,offset:g}}ignoreMutation(g){return g.type==="characterData"&&g.target.nodeValue==g.oldValue}}class MarkViewDesc extends ViewDesc{constructor(g,et,ot,ut,ct){super(g,[],ot,ut),this.mark=et,this.spec=ct}static create(g,et,ot,ut){let ct=ut.nodeViews[et.type.name],dt=ct&&ct(et,ut,ot);return(!dt||!dt.dom)&&(dt=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et,ot),null,et.attrs)),new MarkViewDesc(g,et,dt.dom,dt.contentDOM||dt.dom,dt)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(g){return this.dirty!=NODE_DIRTY&&this.mark.eq(g)}markDirty(g,et){if(super.markDirty(g,et),this.dirty!=NOT_DIRTY){let ot=this.parent;for(;!ot.node;)ot=ot.parent;ot.dirty<this.dirty&&(ot.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(g,et,ot){let ut=MarkViewDesc.create(this.parent,this.mark,!0,ot),ct=this.children,dt=this.size;et<dt&&(ct=replaceNodes(ct,et,dt,ot)),g>0&&(ct=replaceNodes(ct,0,g,ot));for(let ft=0;ft<ct.length;ft++)ct[ft].parent=ut;return ut.children=ct,ut}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(g,et,ot,ut,ct,dt,ft,St,kt){super(g,[],ct,dt),this.node=et,this.outerDeco=ot,this.innerDeco=ut,this.nodeDOM=ft}static create(g,et,ot,ut,ct,dt){let ft=ct.nodeViews[et.type.name],St,kt=ft&&ft(et,ct,()=>{if(!St)return dt;if(St.parent)return St.parent.posBeforeChild(St)},ot,ut),Tt=kt&&kt.dom,Rt=kt&&kt.contentDOM;if(et.isText){if(!Tt)Tt=document.createTextNode(et.text);else if(Tt.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Tt||({dom:Tt,contentDOM:Rt}=DOMSerializer.renderSpec(document,et.type.spec.toDOM(et),null,et.attrs));!Rt&&!et.isText&&Tt.nodeName!="BR"&&(Tt.hasAttribute("contenteditable")||(Tt.contentEditable="false"),et.type.spec.draggable&&(Tt.draggable=!0));let Ft=Tt;return Tt=applyOuterDeco(Tt,ot,et),kt?St=new CustomNodeViewDesc(g,et,ot,ut,Tt,Rt||null,Ft,kt,ct,dt+1):et.isText?new TextViewDesc(g,et,ot,ut,Tt,Ft,ct):new NodeViewDesc(g,et,ot,ut,Tt,Rt||null,Ft,ct,dt+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let g={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(g.preserveWhitespace="full"),!this.contentDOM)g.getContent=()=>this.node.content;else if(!this.contentLost)g.contentElement=this.contentDOM;else{for(let et=this.children.length-1;et>=0;et--){let ot=this.children[et];if(this.dom.contains(ot.dom.parentNode)){g.contentElement=ot.dom.parentNode;break}}g.contentElement||(g.getContent=()=>Fragment.empty)}return g}matchesNode(g,et,ot){return this.dirty==NOT_DIRTY&&g.eq(this.node)&&sameOuterDeco(et,this.outerDeco)&&ot.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(g,et){let ot=this.node.inlineContent,ut=et,ct=g.composing?this.localCompositionInfo(g,et):null,dt=ct&&ct.pos>-1?ct:null,ft=ct&&ct.pos<0,St=new ViewTreeUpdater(this,dt&&dt.node,g);iterDeco(this.node,this.innerDeco,(kt,Tt,Rt)=>{kt.spec.marks?St.syncToMarks(kt.spec.marks,ot,g):kt.type.side>=0&&!Rt&&St.syncToMarks(Tt==this.node.childCount?Mark$1.none:this.node.child(Tt).marks,ot,g),St.placeWidget(kt,g,ut)},(kt,Tt,Rt,Ft)=>{St.syncToMarks(kt.marks,ot,g);let jt;St.findNodeMatch(kt,Tt,Rt,Ft)||ft&&g.state.selection.from>ut&&g.state.selection.to<ut+kt.nodeSize&&(jt=St.findIndexWithChild(ct.node))>-1&&St.updateNodeAt(kt,Tt,Rt,jt,g)||St.updateNextNode(kt,Tt,Rt,g,Ft,ut)||St.addNode(kt,Tt,Rt,g,ut),ut+=kt.nodeSize}),St.syncToMarks([],ot,g),this.node.isTextblock&&St.addTextblockHacks(),St.destroyRest(),(St.changed||this.dirty==CONTENT_DIRTY)&&(dt&&this.protectLocalComposition(g,dt),renderDescs(this.contentDOM,this.children,g),ios&&iosHacks(this.dom))}localCompositionInfo(g,et){let{from:ot,to:ut}=g.state.selection;if(!(g.state.selection instanceof TextSelection)||ot<et||ut>et+this.node.content.size)return null;let ct=g.input.compositionNode;if(!ct||!this.dom.contains(ct.parentNode))return null;if(this.node.inlineContent){let dt=ct.nodeValue,ft=findTextInFragment(this.node.content,dt,ot-et,ut-et);return ft<0?null:{node:ct,pos:ft,text:dt}}else return{node:ct,pos:-1,text:""}}protectLocalComposition(g,{node:et,pos:ot,text:ut}){if(this.getDesc(et))return;let ct=et;for(;ct.parentNode!=this.contentDOM;ct=ct.parentNode){for(;ct.previousSibling;)ct.parentNode.removeChild(ct.previousSibling);for(;ct.nextSibling;)ct.parentNode.removeChild(ct.nextSibling);ct.pmViewDesc&&(ct.pmViewDesc=void 0)}let dt=new CompositionViewDesc(this,ct,et,ut);g.input.compositionNodes.push(dt),this.children=replaceNodes(this.children,ot,ot+ut.length,g,dt)}update(g,et,ot,ut){return this.dirty==NODE_DIRTY||!g.sameMarkup(this.node)?!1:(this.updateInner(g,et,ot,ut),!0)}updateInner(g,et,ot,ut){this.updateOuterDeco(et),this.node=g,this.innerDeco=ot,this.contentDOM&&this.updateChildren(ut,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(g){if(sameOuterDeco(g,this.outerDeco))return;let et=this.nodeDOM.nodeType!=1,ot=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,et),computeOuterDeco(g,this.node,et)),this.dom!=ot&&(ot.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=g}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(it,g,et,ot,ut){applyOuterDeco(ot,g,it);let ct=new NodeViewDesc(void 0,it,g,et,ot,ot,ot,ut,0);return ct.contentDOM&&ct.updateChildren(ut,0),ct}class TextViewDesc extends NodeViewDesc{constructor(g,et,ot,ut,ct,dt,ft){super(g,et,ot,ut,ct,null,dt,ft,0)}parseRule(){let g=this.nodeDOM.parentNode;for(;g&&g!=this.dom&&!g.pmIsDeco;)g=g.parentNode;return{skip:g||!0}}update(g,et,ot,ut){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!g.sameMarkup(this.node)?!1:(this.updateOuterDeco(et),(this.dirty!=NOT_DIRTY||g.text!=this.node.text)&&g.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=g.text,ut.trackWrites==this.nodeDOM&&(ut.trackWrites=null)),this.node=g,this.dirty=NOT_DIRTY,!0)}inParent(){let g=this.parent.contentDOM;for(let et=this.nodeDOM;et;et=et.parentNode)if(et==g)return!0;return!1}domFromPos(g){return{node:this.nodeDOM,offset:g}}localPosFromDOM(g,et,ot){return g==this.nodeDOM?this.posAtStart+Math.min(et,this.node.text.length):super.localPosFromDOM(g,et,ot)}ignoreMutation(g){return g.type!="characterData"&&g.type!="selection"}slice(g,et,ot){let ut=this.node.cut(g,et),ct=document.createTextNode(ut.text);return new TextViewDesc(this.parent,ut,this.outerDeco,this.innerDeco,ct,ct,ot)}markDirty(g,et){super.markDirty(g,et),this.dom!=this.nodeDOM&&(g==0||et==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(g){return this.node.text==g}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(g){return this.dirty==NOT_DIRTY&&this.dom.nodeName==g}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(g,et,ot,ut,ct,dt,ft,St,kt,Tt){super(g,et,ot,ut,ct,dt,ft,kt,Tt),this.spec=St}update(g,et,ot,ut){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==g.type||this.spec.multiType)){let ct=this.spec.update(g,et,ot);return ct&&this.updateInner(g,et,ot,ut),ct}else return!this.contentDOM&&!g.isLeaf?!1:super.update(g,et,ot,ut)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(g,et,ot,ut){this.spec.setSelection?this.spec.setSelection(g,et,ot.root):super.setSelection(g,et,ot,ut)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(g){return this.spec.stopEvent?this.spec.stopEvent(g):!1}ignoreMutation(g){return this.spec.ignoreMutation?this.spec.ignoreMutation(g):super.ignoreMutation(g)}}function renderDescs(it,g,et){let ot=it.firstChild,ut=!1;for(let ct=0;ct<g.length;ct++){let dt=g[ct],ft=dt.dom;if(ft.parentNode==it){for(;ft!=ot;)ot=rm(ot),ut=!0;ot=ot.nextSibling}else ut=!0,it.insertBefore(ft,ot);if(dt instanceof MarkViewDesc){let St=ot?ot.previousSibling:it.lastChild;renderDescs(dt.contentDOM,dt.children,et),ot=St?St.nextSibling:it.firstChild}}for(;ot;)ot=rm(ot),ut=!0;ut&&et.trackWrites==it&&(et.trackWrites=null)}const OuterDecoLevel=function(it){it&&(this.nodeName=it)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(it,g,et){if(it.length==0)return noDeco;let ot=et?noDeco[0]:new OuterDecoLevel,ut=[ot];for(let ct=0;ct<it.length;ct++){let dt=it[ct].type.attrs;if(dt){dt.nodeName&&ut.push(ot=new OuterDecoLevel(dt.nodeName));for(let ft in dt){let St=dt[ft];St!=null&&(et&&ut.length==1&&ut.push(ot=new OuterDecoLevel(g.isInline?"span":"div")),ft=="class"?ot.class=(ot.class?ot.class+" ":"")+St:ft=="style"?ot.style=(ot.style?ot.style+";":"")+St:ft!="nodeName"&&(ot[ft]=St))}}}return ut}function patchOuterDeco(it,g,et,ot){if(et==noDeco&&ot==noDeco)return g;let ut=g;for(let ct=0;ct<ot.length;ct++){let dt=ot[ct],ft=et[ct];if(ct){let St;ft&&ft.nodeName==dt.nodeName&&ut!=it&&(St=ut.parentNode)&&St.nodeName.toLowerCase()==dt.nodeName||(St=document.createElement(dt.nodeName),St.pmIsDeco=!0,St.appendChild(ut),ft=noDeco[0]),ut=St}patchAttributes(ut,ft||noDeco[0],dt)}return ut}function patchAttributes(it,g,et){for(let ot in g)ot!="class"&&ot!="style"&&ot!="nodeName"&&!(ot in et)&&it.removeAttribute(ot);for(let ot in et)ot!="class"&&ot!="style"&&ot!="nodeName"&&et[ot]!=g[ot]&&it.setAttribute(ot,et[ot]);if(g.class!=et.class){let ot=g.class?g.class.split(" ").filter(Boolean):[],ut=et.class?et.class.split(" ").filter(Boolean):[];for(let ct=0;ct<ot.length;ct++)ut.indexOf(ot[ct])==-1&&it.classList.remove(ot[ct]);for(let ct=0;ct<ut.length;ct++)ot.indexOf(ut[ct])==-1&&it.classList.add(ut[ct]);it.classList.length==0&&it.removeAttribute("class")}if(g.style!=et.style){if(g.style){let ot=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,ut;for(;ut=ot.exec(g.style);)it.style.removeProperty(ut[1])}et.style&&(it.style.cssText+=et.style)}}function applyOuterDeco(it,g,et){return patchOuterDeco(it,it,noDeco,computeOuterDeco(g,et,it.nodeType!=1))}function sameOuterDeco(it,g){if(it.length!=g.length)return!1;for(let et=0;et<it.length;et++)if(!it[et].type.eq(g[et].type))return!1;return!0}function rm(it){let g=it.nextSibling;return it.parentNode.removeChild(it),g}class ViewTreeUpdater{constructor(g,et,ot){this.lock=et,this.view=ot,this.index=0,this.stack=[],this.changed=!1,this.top=g,this.preMatch=preMatch(g.node.content,g)}destroyBetween(g,et){if(g!=et){for(let ot=g;ot<et;ot++)this.top.children[ot].destroy();this.top.children.splice(g,et-g),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(g,et,ot){let ut=0,ct=this.stack.length>>1,dt=Math.min(ct,g.length);for(;ut<dt&&(ut==ct-1?this.top:this.stack[ut+1<<1]).matchesMark(g[ut])&&g[ut].type.spec.spanning!==!1;)ut++;for(;ut<ct;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),ct--;for(;ct<g.length;){this.stack.push(this.top,this.index+1);let ft=-1;for(let St=this.index;St<Math.min(this.index+3,this.top.children.length);St++){let kt=this.top.children[St];if(kt.matchesMark(g[ct])&&!this.isLocked(kt.dom)){ft=St;break}}if(ft>-1)ft>this.index&&(this.changed=!0,this.destroyBetween(this.index,ft)),this.top=this.top.children[this.index];else{let St=MarkViewDesc.create(this.top,g[ct],et,ot);this.top.children.splice(this.index,0,St),this.top=St,this.changed=!0}this.index=0,ct++}}findNodeMatch(g,et,ot,ut){let ct=-1,dt;if(ut>=this.preMatch.index&&(dt=this.preMatch.matches[ut-this.preMatch.index]).parent==this.top&&dt.matchesNode(g,et,ot))ct=this.top.children.indexOf(dt,this.index);else for(let ft=this.index,St=Math.min(this.top.children.length,ft+5);ft<St;ft++){let kt=this.top.children[ft];if(kt.matchesNode(g,et,ot)&&!this.preMatch.matched.has(kt)){ct=ft;break}}return ct<0?!1:(this.destroyBetween(this.index,ct),this.index++,!0)}updateNodeAt(g,et,ot,ut,ct){let dt=this.top.children[ut];return dt.dirty==NODE_DIRTY&&dt.dom==dt.contentDOM&&(dt.dirty=CONTENT_DIRTY),dt.update(g,et,ot,ct)?(this.destroyBetween(this.index,ut),this.index++,!0):!1}findIndexWithChild(g){for(;;){let et=g.parentNode;if(!et)return-1;if(et==this.top.contentDOM){let ot=g.pmViewDesc;if(ot){for(let ut=this.index;ut<this.top.children.length;ut++)if(this.top.children[ut]==ot)return ut}return-1}g=et}}updateNextNode(g,et,ot,ut,ct,dt){for(let ft=this.index;ft<this.top.children.length;ft++){let St=this.top.children[ft];if(St instanceof NodeViewDesc){let kt=this.preMatch.matched.get(St);if(kt!=null&&kt!=ct)return!1;let Tt=St.dom,Rt,Ft=this.isLocked(Tt)&&!(g.isText&&St.node&&St.node.isText&&St.nodeDOM.nodeValue==g.text&&St.dirty!=NODE_DIRTY&&sameOuterDeco(et,St.outerDeco));if(!Ft&&St.update(g,et,ot,ut))return this.destroyBetween(this.index,ft),St.dom!=Tt&&(this.changed=!0),this.index++,!0;if(!Ft&&(Rt=this.recreateWrapper(St,g,et,ot,ut,dt)))return this.destroyBetween(this.index,ft),this.top.children[this.index]=Rt,Rt.contentDOM&&(Rt.dirty=CONTENT_DIRTY,Rt.updateChildren(ut,dt+1),Rt.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(g,et,ot,ut,ct,dt){if(g.dirty||et.isAtom||!g.children.length||!g.node.content.eq(et.content)||!sameOuterDeco(ot,g.outerDeco)||!ut.eq(g.innerDeco))return null;let ft=NodeViewDesc.create(this.top,et,ot,ut,ct,dt);if(ft.contentDOM){ft.children=g.children,g.children=[];for(let St of ft.children)St.parent=ft}return g.destroy(),ft}addNode(g,et,ot,ut,ct){let dt=NodeViewDesc.create(this.top,g,et,ot,ut,ct);dt.contentDOM&&dt.updateChildren(ut,ct+1),this.top.children.splice(this.index++,0,dt),this.changed=!0}placeWidget(g,et,ot){let ut=this.index<this.top.children.length?this.top.children[this.index]:null;if(ut&&ut.matchesWidget(g)&&(g==ut.widget||!ut.widget.type.toDOM.parentNode))this.index++;else{let ct=new WidgetViewDesc(this.top,g,et,ot);this.top.children.splice(this.index++,0,ct),this.changed=!0}}addTextblockHacks(){let g=this.top.children[this.index-1],et=this.top;for(;g instanceof MarkViewDesc;)et=g,g=et.children[et.children.length-1];(!g||!(g instanceof TextViewDesc)||/\n$/.test(g.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(g.node.text))&&((safari||chrome)&&g&&g.dom.contentEditable=="false"&&this.addHackNode("IMG",et),this.addHackNode("BR",this.top))}addHackNode(g,et){if(et==this.top&&this.index<et.children.length&&et.children[this.index].matchesHack(g))this.index++;else{let ot=document.createElement(g);g=="IMG"&&(ot.className="ProseMirror-separator",ot.alt=""),g=="BR"&&(ot.className="ProseMirror-trailingBreak");let ut=new TrailingHackViewDesc(this.top,[],ot,null);et!=this.top?et.children.push(ut):et.children.splice(this.index++,0,ut),this.changed=!0}}isLocked(g){return this.lock&&(g==this.lock||g.nodeType==1&&g.contains(this.lock.parentNode))}}function preMatch(it,g){let et=g,ot=et.children.length,ut=it.childCount,ct=new Map,dt=[];e:for(;ut>0;){let ft;for(;;)if(ot){let kt=et.children[ot-1];if(kt instanceof MarkViewDesc)et=kt,ot=kt.children.length;else{ft=kt,ot--;break}}else{if(et==g)break e;ot=et.parent.children.indexOf(et),et=et.parent}let St=ft.node;if(St){if(St!=it.child(ut-1))break;--ut,ct.set(ft,ut),dt.push(ft)}}return{index:ut,matched:ct,matches:dt.reverse()}}function compareSide(it,g){return it.type.side-g.type.side}function iterDeco(it,g,et,ot){let ut=g.locals(it),ct=0;if(ut.length==0){for(let kt=0;kt<it.childCount;kt++){let Tt=it.child(kt);ot(Tt,ut,g.forChild(ct,Tt),kt),ct+=Tt.nodeSize}return}let dt=0,ft=[],St=null;for(let kt=0;;){let Tt,Rt;for(;dt<ut.length&&ut[dt].to==ct;){let Ht=ut[dt++];Ht.widget&&(Tt?(Rt||(Rt=[Tt])).push(Ht):Tt=Ht)}if(Tt)if(Rt){Rt.sort(compareSide);for(let Ht=0;Ht<Rt.length;Ht++)et(Rt[Ht],kt,!!St)}else et(Tt,kt,!!St);let Ft,jt;if(St)jt=-1,Ft=St,St=null;else if(kt<it.childCount)jt=kt,Ft=it.child(kt++);else break;for(let Ht=0;Ht<ft.length;Ht++)ft[Ht].to<=ct&&ft.splice(Ht--,1);for(;dt<ut.length&&ut[dt].from<=ct&&ut[dt].to>ct;)ft.push(ut[dt++]);let Bt=ct+Ft.nodeSize;if(Ft.isText){let Ht=Bt;dt<ut.length&&ut[dt].from<Ht&&(Ht=ut[dt].from);for(let Ut=0;Ut<ft.length;Ut++)ft[Ut].to<Ht&&(Ht=ft[Ut].to);Ht<Bt&&(St=Ft.cut(Ht-ct),Ft=Ft.cut(0,Ht-ct),Bt=Ht,jt=-1)}else for(;dt<ut.length&&ut[dt].to<Bt;)dt++;let zt=Ft.isInline&&!Ft.isLeaf?ft.filter(Ht=>!Ht.inline):ft.slice();ot(Ft,zt,g.forChild(ct,Ft),jt),ct=Bt}}function iosHacks(it){if(it.nodeName=="UL"||it.nodeName=="OL"){let g=it.style.cssText;it.style.cssText=g+"; list-style: square !important",window.getComputedStyle(it).listStyle,it.style.cssText=g}}function findTextInFragment(it,g,et,ot){for(let ut=0,ct=0;ut<it.childCount&&ct<=ot;){let dt=it.child(ut++),ft=ct;if(ct+=dt.nodeSize,!dt.isText)continue;let St=dt.text;for(;ut<it.childCount;){let kt=it.child(ut++);if(ct+=kt.nodeSize,!kt.isText)break;St+=kt.text}if(ct>=et){if(ct>=ot&&St.slice(ot-g.length-ft,ot-ft)==g)return ot-g.length;let kt=ft<ot?St.lastIndexOf(g,ot-ft-1):-1;if(kt>=0&&kt+g.length+ft>=et)return ft+kt;if(et==ot&&St.length>=ot+g.length-ft&&St.slice(ot-ft,ot-ft+g.length)==g)return ot}}return-1}function replaceNodes(it,g,et,ot,ut){let ct=[];for(let dt=0,ft=0;dt<it.length;dt++){let St=it[dt],kt=ft,Tt=ft+=St.size;kt>=et||Tt<=g?ct.push(St):(kt<g&&ct.push(St.slice(0,g-kt,ot)),ut&&(ct.push(ut),ut=void 0),Tt>et&&ct.push(St.slice(et-kt,St.size,ot)))}return ct}function selectionFromDOM(it,g=null){let et=it.domSelectionRange(),ot=it.state.doc;if(!et.focusNode)return null;let ut=it.docView.nearestDesc(et.focusNode),ct=ut&&ut.size==0,dt=it.docView.posFromDOM(et.focusNode,et.focusOffset,1);if(dt<0)return null;let ft=ot.resolve(dt),St,kt;if(selectionCollapsed(et)){for(St=dt;ut&&!ut.node;)ut=ut.parent;let Rt=ut.node;if(ut&&Rt.isAtom&&NodeSelection.isSelectable(Rt)&&ut.parent&&!(Rt.isInline&&isOnEdge(et.focusNode,et.focusOffset,ut.dom))){let Ft=ut.posBefore;kt=new NodeSelection(dt==Ft?ft:ot.resolve(Ft))}}else{if(et instanceof it.dom.ownerDocument.defaultView.Selection&&et.rangeCount>1){let Rt=dt,Ft=dt;for(let jt=0;jt<et.rangeCount;jt++){let Bt=et.getRangeAt(jt);Rt=Math.min(Rt,it.docView.posFromDOM(Bt.startContainer,Bt.startOffset,1)),Ft=Math.max(Ft,it.docView.posFromDOM(Bt.endContainer,Bt.endOffset,-1))}if(Rt<0)return null;[St,dt]=Ft==it.state.selection.anchor?[Ft,Rt]:[Rt,Ft],ft=ot.resolve(dt)}else St=it.docView.posFromDOM(et.anchorNode,et.anchorOffset,1);if(St<0)return null}let Tt=ot.resolve(St);if(!kt){let Rt=g=="pointer"||it.state.selection.head<ft.pos&&!ct?1:-1;kt=selectionBetween(it,Tt,ft,Rt)}return kt}function editorOwnsSelection(it){return it.editable?it.hasFocus():hasSelection(it)&&document.activeElement&&document.activeElement.contains(it.dom)}function selectionToDOM(it,g=!1){let et=it.state.selection;if(syncNodeSelection(it,et),!!editorOwnsSelection(it)){if(!g&&it.input.mouseDown&&it.input.mouseDown.allowDefault&&chrome){let ot=it.domSelectionRange(),ut=it.domObserver.currentSelection;if(ot.anchorNode&&ut.anchorNode&&isEquivalentPosition(ot.anchorNode,ot.anchorOffset,ut.anchorNode,ut.anchorOffset)){it.input.mouseDown.delayedSelectionSync=!0,it.domObserver.setCurSelection();return}}if(it.domObserver.disconnectSelection(),it.cursorWrapper)selectCursorWrapper(it);else{let{anchor:ot,head:ut}=et,ct,dt;brokenSelectBetweenUneditable&&!(et instanceof TextSelection)&&(et.$from.parent.inlineContent||(ct=temporarilyEditableNear(it,et.from)),!et.empty&&!et.$from.parent.inlineContent&&(dt=temporarilyEditableNear(it,et.to))),it.docView.setSelection(ot,ut,it,g),brokenSelectBetweenUneditable&&(ct&&resetEditable(ct),dt&&resetEditable(dt)),et.visible?it.dom.classList.remove("ProseMirror-hideselection"):(it.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(it))}it.domObserver.setCurSelection(),it.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(it,g){let{node:et,offset:ot}=it.docView.domFromPos(g,0),ut=ot<et.childNodes.length?et.childNodes[ot]:null,ct=ot?et.childNodes[ot-1]:null;if(safari&&ut&&ut.contentEditable=="false")return setEditable(ut);if((!ut||ut.contentEditable=="false")&&(!ct||ct.contentEditable=="false")){if(ut)return setEditable(ut);if(ct)return setEditable(ct)}}function setEditable(it){return it.contentEditable="true",safari&&it.draggable&&(it.draggable=!1,it.wasDraggable=!0),it}function resetEditable(it){it.contentEditable="false",it.wasDraggable&&(it.draggable=!0,it.wasDraggable=null)}function removeClassOnSelectionChange(it){let g=it.dom.ownerDocument;g.removeEventListener("selectionchange",it.input.hideSelectionGuard);let et=it.domSelectionRange(),ot=et.anchorNode,ut=et.anchorOffset;g.addEventListener("selectionchange",it.input.hideSelectionGuard=()=>{(et.anchorNode!=ot||et.anchorOffset!=ut)&&(g.removeEventListener("selectionchange",it.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(it)||it.state.selection.visible)&&it.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(it){let g=it.domSelection();if(!g)return;let et=it.cursorWrapper.dom,ot=et.nodeName=="IMG";ot?g.collapse(et.parentNode,domIndex(et)+1):g.collapse(et,0),!ot&&!it.state.selection.visible&&ie$1&&ie_version<=11&&(et.disabled=!0,et.disabled=!1)}function syncNodeSelection(it,g){if(g instanceof NodeSelection){let et=it.docView.descAt(g.from);et!=it.lastSelectedViewDesc&&(clearNodeSelection(it),et&&et.selectNode(),it.lastSelectedViewDesc=et)}else clearNodeSelection(it)}function clearNodeSelection(it){it.lastSelectedViewDesc&&(it.lastSelectedViewDesc.parent&&it.lastSelectedViewDesc.deselectNode(),it.lastSelectedViewDesc=void 0)}function selectionBetween(it,g,et,ot){return it.someProp("createSelectionBetween",ut=>ut(it,g,et))||TextSelection.between(g,et,ot)}function hasFocusAndSelection(it){return it.editable&&!it.hasFocus()?!1:hasSelection(it)}function hasSelection(it){let g=it.domSelectionRange();if(!g.anchorNode)return!1;try{return it.dom.contains(g.anchorNode.nodeType==3?g.anchorNode.parentNode:g.anchorNode)&&(it.editable||it.dom.contains(g.focusNode.nodeType==3?g.focusNode.parentNode:g.focusNode))}catch{return!1}}function anchorInRightPlace(it){let g=it.docView.domFromPos(it.state.selection.anchor,0),et=it.domSelectionRange();return isEquivalentPosition(g.node,g.offset,et.anchorNode,et.anchorOffset)}function moveSelectionBlock(it,g){let{$anchor:et,$head:ot}=it.selection,ut=g>0?et.max(ot):et.min(ot),ct=ut.parent.inlineContent?ut.depth?it.doc.resolve(g>0?ut.after():ut.before()):null:ut;return ct&&Selection.findFrom(ct,g)}function apply$1(it,g){return it.dispatch(it.state.tr.setSelection(g).scrollIntoView()),!0}function selectHorizontally(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection)if(et.indexOf("s")>-1){let{$head:ut}=ot,ct=ut.textOffset?null:g<0?ut.nodeBefore:ut.nodeAfter;if(!ct||ct.isText||!ct.isLeaf)return!1;let dt=it.state.doc.resolve(ut.pos+ct.nodeSize*(g<0?-1:1));return apply$1(it,new TextSelection(ot.$anchor,dt))}else if(ot.empty){if(it.endOfTextblock(g>0?"forward":"backward")){let ut=moveSelectionBlock(it.state,g);return ut&&ut instanceof NodeSelection?apply$1(it,ut):!1}else if(!(mac$2&&et.indexOf("m")>-1)){let ut=ot.$head,ct=ut.textOffset?null:g<0?ut.nodeBefore:ut.nodeAfter,dt;if(!ct||ct.isText)return!1;let ft=g<0?ut.pos-ct.nodeSize:ut.pos;return ct.isAtom||(dt=it.docView.descAt(ft))&&!dt.contentDOM?NodeSelection.isSelectable(ct)?apply$1(it,new NodeSelection(g<0?it.state.doc.resolve(ut.pos-ct.nodeSize):ut)):webkit?apply$1(it,new TextSelection(it.state.doc.resolve(g<0?ft:ft+ct.nodeSize))):!1:!1}}else return!1;else{if(ot instanceof NodeSelection&&ot.node.isInline)return apply$1(it,new TextSelection(g>0?ot.$to:ot.$from));{let ut=moveSelectionBlock(it.state,g);return ut?apply$1(it,ut):!1}}}function nodeLen(it){return it.nodeType==3?it.nodeValue.length:it.childNodes.length}function isIgnorable(it,g){let et=it.pmViewDesc;return et&&et.size==0&&(g<0||it.nextSibling||it.nodeName!="BR")}function skipIgnoredNodes(it,g){return g<0?skipIgnoredNodesBefore(it):skipIgnoredNodesAfter(it)}function skipIgnoredNodesBefore(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ut,ct,dt=!1;for(gecko&&et.nodeType==1&&ot<nodeLen(et)&&isIgnorable(et.childNodes[ot],-1)&&(dt=!0);;)if(ot>0){if(et.nodeType!=1)break;{let ft=et.childNodes[ot-1];if(isIgnorable(ft,-1))ut=et,ct=--ot;else if(ft.nodeType==3)et=ft,ot=et.nodeValue.length;else break}}else{if(isBlockNode(et))break;{let ft=et.previousSibling;for(;ft&&isIgnorable(ft,-1);)ut=et.parentNode,ct=domIndex(ft),ft=ft.previousSibling;if(ft)et=ft,ot=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=0}}}dt?setSelFocus(it,et,ot):ut&&setSelFocus(it,ut,ct)}function skipIgnoredNodesAfter(it){let g=it.domSelectionRange(),et=g.focusNode,ot=g.focusOffset;if(!et)return;let ut=nodeLen(et),ct,dt;for(;;)if(ot<ut){if(et.nodeType!=1)break;let ft=et.childNodes[ot];if(isIgnorable(ft,1))ct=et,dt=++ot;else break}else{if(isBlockNode(et))break;{let ft=et.nextSibling;for(;ft&&isIgnorable(ft,1);)ct=ft.parentNode,dt=domIndex(ft)+1,ft=ft.nextSibling;if(ft)et=ft,ot=0,ut=nodeLen(et);else{if(et=et.parentNode,et==it.dom)break;ot=ut=0}}}ct&&setSelFocus(it,ct,dt)}function isBlockNode(it){let g=it.pmViewDesc;return g&&g.node&&g.node.isBlock}function textNodeAfter(it,g){for(;it&&g==it.childNodes.length&&!hasBlockDesc(it);)g=domIndex(it)+1,it=it.parentNode;for(;it&&g<it.childNodes.length;){let et=it.childNodes[g];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=0}}function textNodeBefore(it,g){for(;it&&!g&&!hasBlockDesc(it);)g=domIndex(it),it=it.parentNode;for(;it&&g;){let et=it.childNodes[g-1];if(et.nodeType==3)return et;if(et.nodeType==1&&et.contentEditable=="false")break;it=et,g=it.childNodes.length}}function setSelFocus(it,g,et){if(g.nodeType!=3){let ct,dt;(dt=textNodeAfter(g,et))?(g=dt,et=0):(ct=textNodeBefore(g,et))&&(g=ct,et=ct.nodeValue.length)}let ot=it.domSelection();if(!ot)return;if(selectionCollapsed(ot)){let ct=document.createRange();ct.setEnd(g,et),ct.setStart(g,et),ot.removeAllRanges(),ot.addRange(ct)}else ot.extend&&ot.extend(g,et);it.domObserver.setCurSelection();let{state:ut}=it;setTimeout(()=>{it.state==ut&&selectionToDOM(it)},50)}function findDirection(it,g){let et=it.state.doc.resolve(g);if(!(chrome||windows$1)&&et.parent.inlineContent){let ut=it.coordsAtPos(g);if(g>et.start()){let ct=it.coordsAtPos(g-1),dt=(ct.top+ct.bottom)/2;if(dt>ut.top&&dt<ut.bottom&&Math.abs(ct.left-ut.left)>1)return ct.left<ut.left?"ltr":"rtl"}if(g<et.end()){let ct=it.coordsAtPos(g+1),dt=(ct.top+ct.bottom)/2;if(dt>ut.top&&dt<ut.bottom&&Math.abs(ct.left-ut.left)>1)return ct.left>ut.left?"ltr":"rtl"}}return getComputedStyle(it.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(it,g,et){let ot=it.state.selection;if(ot instanceof TextSelection&&!ot.empty||et.indexOf("s")>-1||mac$2&&et.indexOf("m")>-1)return!1;let{$from:ut,$to:ct}=ot;if(!ut.parent.inlineContent||it.endOfTextblock(g<0?"up":"down")){let dt=moveSelectionBlock(it.state,g);if(dt&&dt instanceof NodeSelection)return apply$1(it,dt)}if(!ut.parent.inlineContent){let dt=g<0?ut:ct,ft=ot instanceof AllSelection?Selection.near(dt,g):Selection.findFrom(dt,g);return ft?apply$1(it,ft):!1}return!1}function stopNativeHorizontalDelete(it,g){if(!(it.state.selection instanceof TextSelection))return!0;let{$head:et,$anchor:ot,empty:ut}=it.state.selection;if(!et.sameParent(ot))return!0;if(!ut)return!1;if(it.endOfTextblock(g>0?"forward":"backward"))return!0;let ct=!et.textOffset&&(g<0?et.nodeBefore:et.nodeAfter);if(ct&&!ct.isText){let dt=it.state.tr;return g<0?dt.delete(et.pos-ct.nodeSize,et.pos):dt.delete(et.pos,et.pos+ct.nodeSize),it.dispatch(dt),!0}return!1}function switchEditable(it,g,et){it.domObserver.stop(),g.contentEditable=et,it.domObserver.start()}function safariDownArrowBug(it){if(!safari||it.state.selection.$head.parentOffset>0)return!1;let{focusNode:g,focusOffset:et}=it.domSelectionRange();if(g&&g.nodeType==1&&et==0&&g.firstChild&&g.firstChild.contentEditable=="false"){let ot=g.firstChild;switchEditable(it,ot,"true"),setTimeout(()=>switchEditable(it,ot,"false"),20)}return!1}function getMods(it){let g="";return it.ctrlKey&&(g+="c"),it.metaKey&&(g+="m"),it.altKey&&(g+="a"),it.shiftKey&&(g+="s"),g}function captureKeyDown(it,g){let et=g.keyCode,ot=getMods(g);if(et==8||mac$2&&et==72&&ot=="c")return stopNativeHorizontalDelete(it,-1)||skipIgnoredNodes(it,-1);if(et==46&&!g.shiftKey||mac$2&&et==68&&ot=="c")return stopNativeHorizontalDelete(it,1)||skipIgnoredNodes(it,1);if(et==13||et==27)return!0;if(et==37||mac$2&&et==66&&ot=="c"){let ut=et==37?findDirection(it,it.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(it,ut,ot)||skipIgnoredNodes(it,ut)}else if(et==39||mac$2&&et==70&&ot=="c"){let ut=et==39?findDirection(it,it.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(it,ut,ot)||skipIgnoredNodes(it,ut)}else{if(et==38||mac$2&&et==80&&ot=="c")return selectVertically(it,-1,ot)||skipIgnoredNodes(it,-1);if(et==40||mac$2&&et==78&&ot=="c")return safariDownArrowBug(it)||selectVertically(it,1,ot)||skipIgnoredNodes(it,1);if(ot==(mac$2?"m":"c")&&(et==66||et==73||et==89||et==90))return!0}return!1}function serializeForClipboard(it,g){it.someProp("transformCopied",jt=>{g=jt(g,it)});let et=[],{content:ot,openStart:ut,openEnd:ct}=g;for(;ut>1&&ct>1&&ot.childCount==1&&ot.firstChild.childCount==1;){ut--,ct--;let jt=ot.firstChild;et.push(jt.type.name,jt.attrs!=jt.type.defaultAttrs?jt.attrs:null),ot=jt.content}let dt=it.someProp("clipboardSerializer")||DOMSerializer.fromSchema(it.state.schema),ft=detachedDoc(),St=ft.createElement("div");St.appendChild(dt.serializeFragment(ot,{document:ft}));let kt=St.firstChild,Tt,Rt=0;for(;kt&&kt.nodeType==1&&(Tt=wrapMap[kt.nodeName.toLowerCase()]);){for(let jt=Tt.length-1;jt>=0;jt--){let Bt=ft.createElement(Tt[jt]);for(;St.firstChild;)Bt.appendChild(St.firstChild);St.appendChild(Bt),Rt++}kt=St.firstChild}kt&&kt.nodeType==1&&kt.setAttribute("data-pm-slice",`${ut} ${ct}${Rt?` -${Rt}`:""} ${JSON.stringify(et)}`);let Ft=it.someProp("clipboardTextSerializer",jt=>jt(g,it))||g.content.textBetween(0,g.content.size,`

`);return{dom:St,text:Ft,slice:g}}function parseFromClipboard(it,g,et,ot,ut){let ct=ut.parent.type.spec.code,dt,ft;if(!et&&!g)return null;let St=!!g&&(ot||ct||!et);if(St){if(it.someProp("transformPastedText",Ft=>{g=Ft(g,ct||ot,it)}),ct)return ft=new Slice(Fragment.from(it.state.schema.text(g.replace(/\r\n?/g,`
`))),0,0),it.someProp("transformPasted",Ft=>{ft=Ft(ft,it,!0)}),ft;let Rt=it.someProp("clipboardTextParser",Ft=>Ft(g,ut,ot,it));if(Rt)ft=Rt;else{let Ft=ut.marks(),{schema:jt}=it.state,Bt=DOMSerializer.fromSchema(jt);dt=document.createElement("div"),g.split(/(?:\r\n?|\n)+/).forEach(zt=>{let Ht=dt.appendChild(document.createElement("p"));zt&&Ht.appendChild(Bt.serializeNode(jt.text(zt,Ft)))})}}else it.someProp("transformPastedHTML",Rt=>{et=Rt(et,it)}),dt=readHTML(et),webkit&&restoreReplacedSpaces(dt);let kt=dt&&dt.querySelector("[data-pm-slice]"),Tt=kt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(kt.getAttribute("data-pm-slice")||"");if(Tt&&Tt[3])for(let Rt=+Tt[3];Rt>0;Rt--){let Ft=dt.firstChild;for(;Ft&&Ft.nodeType!=1;)Ft=Ft.nextSibling;if(!Ft)break;dt=Ft}if(ft||(ft=(it.someProp("clipboardParser")||it.someProp("domParser")||DOMParser.fromSchema(it.state.schema)).parseSlice(dt,{preserveWhitespace:!!(St||Tt),context:ut,ruleFromNode(Ft){return Ft.nodeName=="BR"&&!Ft.nextSibling&&Ft.parentNode&&!inlineParents.test(Ft.parentNode.nodeName)?{ignore:!0}:null}})),Tt)ft=addContext(closeSlice(ft,+Tt[1],+Tt[2]),Tt[4]);else if(ft=Slice.maxOpen(normalizeSiblings(ft.content,ut),!0),ft.openStart||ft.openEnd){let Rt=0,Ft=0;for(let jt=ft.content.firstChild;Rt<ft.openStart&&!jt.type.spec.isolating;Rt++,jt=jt.firstChild);for(let jt=ft.content.lastChild;Ft<ft.openEnd&&!jt.type.spec.isolating;Ft++,jt=jt.lastChild);ft=closeSlice(ft,Rt,Ft)}return it.someProp("transformPasted",Rt=>{ft=Rt(ft,it,St)}),ft}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(it,g){if(it.childCount<2)return it;for(let et=g.depth;et>=0;et--){let ut=g.node(et).contentMatchAt(g.index(et)),ct,dt=[];if(it.forEach(ft=>{if(!dt)return;let St=ut.findWrapping(ft.type),kt;if(!St)return dt=null;if(kt=dt.length&&ct.length&&addToSibling(St,ct,ft,dt[dt.length-1],0))dt[dt.length-1]=kt;else{dt.length&&(dt[dt.length-1]=closeRight(dt[dt.length-1],ct.length));let Tt=withWrappers(ft,St);dt.push(Tt),ut=ut.matchType(Tt.type),ct=St}}),dt)return Fragment.from(dt)}return it}function withWrappers(it,g,et=0){for(let ot=g.length-1;ot>=et;ot--)it=g[ot].create(null,Fragment.from(it));return it}function addToSibling(it,g,et,ot,ut){if(ut<it.length&&ut<g.length&&it[ut]==g[ut]){let ct=addToSibling(it,g,et,ot.lastChild,ut+1);if(ct)return ot.copy(ot.content.replaceChild(ot.childCount-1,ct));if(ot.contentMatchAt(ot.childCount).matchType(ut==it.length-1?et.type:it[ut+1]))return ot.copy(ot.content.append(Fragment.from(withWrappers(et,it,ut+1))))}}function closeRight(it,g){if(g==0)return it;let et=it.content.replaceChild(it.childCount-1,closeRight(it.lastChild,g-1)),ot=it.contentMatchAt(it.childCount).fillBefore(Fragment.empty,!0);return it.copy(et.append(ot))}function closeRange(it,g,et,ot,ut,ct){let dt=g<0?it.firstChild:it.lastChild,ft=dt.content;return it.childCount>1&&(ct=0),ut<ot-1&&(ft=closeRange(ft,g,et,ot,ut+1,ct)),ut>=et&&(ft=g<0?dt.contentMatchAt(0).fillBefore(ft,ct<=ut).append(ft):ft.append(dt.contentMatchAt(dt.childCount).fillBefore(Fragment.empty,!0))),it.replaceChild(g<0?0:it.childCount-1,dt.copy(ft))}function closeSlice(it,g,et){return g<it.openStart&&(it=new Slice(closeRange(it.content,-1,g,it.openStart,0,it.openEnd),g,it.openEnd)),et<it.openEnd&&(it=new Slice(closeRange(it.content,1,et,it.openEnd,0,0),it.openStart,et)),it}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(it){let g=window.trustedTypes;return g?(_policy||(_policy=g.defaultPolicy||g.createPolicy("ProseMirrorClipboard",{createHTML:et=>et})),_policy.createHTML(it)):it}function readHTML(it){let g=/^(\s*<meta [^>]*>)*/.exec(it);g&&(it=it.slice(g[0].length));let et=detachedDoc().createElement("div"),ot=/<([a-z][^>\s]+)/i.exec(it),ut;if((ut=ot&&wrapMap[ot[1].toLowerCase()])&&(it=ut.map(ct=>"<"+ct+">").join("")+it+ut.map(ct=>"</"+ct+">").reverse().join("")),et.innerHTML=maybeWrapTrusted(it),ut)for(let ct=0;ct<ut.length;ct++)et=et.querySelector(ut[ct])||et;return et}function restoreReplacedSpaces(it){let g=it.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let et=0;et<g.length;et++){let ot=g[et];ot.childNodes.length==1&&ot.textContent==""&&ot.parentNode&&ot.parentNode.replaceChild(it.ownerDocument.createTextNode(" "),ot)}}function addContext(it,g){if(!it.size)return it;let et=it.content.firstChild.type.schema,ot;try{ot=JSON.parse(g)}catch{return it}let{content:ut,openStart:ct,openEnd:dt}=it;for(let ft=ot.length-2;ft>=0;ft-=2){let St=et.nodes[ot[ft]];if(!St||St.hasRequiredAttrs())break;ut=Fragment.from(St.create(ot[ft+1],ut)),ct++,dt++}return new Slice(ut,ct,dt)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(it){for(let g in handlers){let et=handlers[g];it.dom.addEventListener(g,it.input.eventHandlers[g]=ot=>{eventBelongsToView(it,ot)&&!runCustomHandler(it,ot)&&(it.editable||!(ot.type in editHandlers))&&et(it,ot)},passiveHandlers[g]?{passive:!0}:void 0)}safari&&it.dom.addEventListener("input",()=>null),ensureListeners(it)}function setSelectionOrigin(it,g){it.input.lastSelectionOrigin=g,it.input.lastSelectionTime=Date.now()}function destroyInput(it){it.domObserver.stop();for(let g in it.input.eventHandlers)it.dom.removeEventListener(g,it.input.eventHandlers[g]);clearTimeout(it.input.composingTimeout),clearTimeout(it.input.lastIOSEnterFallbackTimeout)}function ensureListeners(it){it.someProp("handleDOMEvents",g=>{for(let et in g)it.input.eventHandlers[et]||it.dom.addEventListener(et,it.input.eventHandlers[et]=ot=>runCustomHandler(it,ot))})}function runCustomHandler(it,g){return it.someProp("handleDOMEvents",et=>{let ot=et[g.type];return ot?ot(it,g)||g.defaultPrevented:!1})}function eventBelongsToView(it,g){if(!g.bubbles)return!0;if(g.defaultPrevented)return!1;for(let et=g.target;et!=it.dom;et=et.parentNode)if(!et||et.nodeType==11||et.pmViewDesc&&et.pmViewDesc.stopEvent(g))return!1;return!0}function dispatchEvent(it,g){!runCustomHandler(it,g)&&handlers[g.type]&&(it.editable||!(g.type in editHandlers))&&handlers[g.type](it,g)}editHandlers.keydown=(it,g)=>{let et=g;if(it.input.shiftKey=et.keyCode==16||et.shiftKey,!inOrNearComposition(it,et)&&(it.input.lastKeyCode=et.keyCode,it.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&et.keyCode==13)))if(et.keyCode!=229&&it.domObserver.forceFlush(),ios&&et.keyCode==13&&!et.ctrlKey&&!et.altKey&&!et.metaKey){let ot=Date.now();it.input.lastIOSEnter=ot,it.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{it.input.lastIOSEnter==ot&&(it.someProp("handleKeyDown",ut=>ut(it,keyEvent(13,"Enter"))),it.input.lastIOSEnter=0)},200)}else it.someProp("handleKeyDown",ot=>ot(it,et))||captureKeyDown(it,et)?et.preventDefault():setSelectionOrigin(it,"key")};editHandlers.keyup=(it,g)=>{g.keyCode==16&&(it.input.shiftKey=!1)};editHandlers.keypress=(it,g)=>{let et=g;if(inOrNearComposition(it,et)||!et.charCode||et.ctrlKey&&!et.altKey||mac$2&&et.metaKey)return;if(it.someProp("handleKeyPress",ut=>ut(it,et))){et.preventDefault();return}let ot=it.state.selection;if(!(ot instanceof TextSelection)||!ot.$from.sameParent(ot.$to)){let ut=String.fromCharCode(et.charCode),ct=()=>it.state.tr.insertText(ut).scrollIntoView();!/[\r\n]/.test(ut)&&!it.someProp("handleTextInput",dt=>dt(it,ot.$from.pos,ot.$to.pos,ut,ct))&&it.dispatch(ct()),et.preventDefault()}};function eventCoords(it){return{left:it.clientX,top:it.clientY}}function isNear(it,g){let et=g.x-it.clientX,ot=g.y-it.clientY;return et*et+ot*ot<100}function runHandlerOnContext(it,g,et,ot,ut){if(ot==-1)return!1;let ct=it.state.doc.resolve(ot);for(let dt=ct.depth+1;dt>0;dt--)if(it.someProp(g,ft=>dt>ct.depth?ft(it,et,ct.nodeAfter,ct.before(dt),ut,!0):ft(it,et,ct.node(dt),ct.before(dt),ut,!1)))return!0;return!1}function updateSelection(it,g,et){if(it.focused||it.focus(),it.state.selection.eq(g))return;let ot=it.state.tr.setSelection(g);et=="pointer"&&ot.setMeta("pointer",!0),it.dispatch(ot)}function selectClickedLeaf(it,g){if(g==-1)return!1;let et=it.state.doc.resolve(g),ot=et.nodeAfter;return ot&&ot.isAtom&&NodeSelection.isSelectable(ot)?(updateSelection(it,new NodeSelection(et),"pointer"),!0):!1}function selectClickedNode(it,g){if(g==-1)return!1;let et=it.state.selection,ot,ut;et instanceof NodeSelection&&(ot=et.node);let ct=it.state.doc.resolve(g);for(let dt=ct.depth+1;dt>0;dt--){let ft=dt>ct.depth?ct.nodeAfter:ct.node(dt);if(NodeSelection.isSelectable(ft)){ot&&et.$from.depth>0&&dt>=et.$from.depth&&ct.before(et.$from.depth+1)==et.$from.pos?ut=ct.before(et.$from.depth):ut=ct.before(dt);break}}return ut!=null?(updateSelection(it,NodeSelection.create(it.state.doc,ut),"pointer"),!0):!1}function handleSingleClick(it,g,et,ot,ut){return runHandlerOnContext(it,"handleClickOn",g,et,ot)||it.someProp("handleClick",ct=>ct(it,g,ot))||(ut?selectClickedNode(it,et):selectClickedLeaf(it,et))}function handleDoubleClick(it,g,et,ot){return runHandlerOnContext(it,"handleDoubleClickOn",g,et,ot)||it.someProp("handleDoubleClick",ut=>ut(it,g,ot))}function handleTripleClick(it,g,et,ot){return runHandlerOnContext(it,"handleTripleClickOn",g,et,ot)||it.someProp("handleTripleClick",ut=>ut(it,g,ot))||defaultTripleClick(it,et,ot)}function defaultTripleClick(it,g,et){if(et.button!=0)return!1;let ot=it.state.doc;if(g==-1)return ot.inlineContent?(updateSelection(it,TextSelection.create(ot,0,ot.content.size),"pointer"),!0):!1;let ut=ot.resolve(g);for(let ct=ut.depth+1;ct>0;ct--){let dt=ct>ut.depth?ut.nodeAfter:ut.node(ct),ft=ut.before(ct);if(dt.inlineContent)updateSelection(it,TextSelection.create(ot,ft+1,ft+1+dt.content.size),"pointer");else if(NodeSelection.isSelectable(dt))updateSelection(it,NodeSelection.create(ot,ft),"pointer");else continue;return!0}}function forceDOMFlush(it){return endComposition(it)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(it,g)=>{let et=g;it.input.shiftKey=et.shiftKey;let ot=forceDOMFlush(it),ut=Date.now(),ct="singleClick";ut-it.input.lastClick.time<500&&isNear(et,it.input.lastClick)&&!et[selectNodeModifier]&&it.input.lastClick.button==et.button&&(it.input.lastClick.type=="singleClick"?ct="doubleClick":it.input.lastClick.type=="doubleClick"&&(ct="tripleClick")),it.input.lastClick={time:ut,x:et.clientX,y:et.clientY,type:ct,button:et.button};let dt=it.posAtCoords(eventCoords(et));dt&&(ct=="singleClick"?(it.input.mouseDown&&it.input.mouseDown.done(),it.input.mouseDown=new MouseDown(it,dt,et,!!ot)):(ct=="doubleClick"?handleDoubleClick:handleTripleClick)(it,dt.pos,dt.inside,et)?et.preventDefault():setSelectionOrigin(it,"pointer"))};class MouseDown{constructor(g,et,ot,ut){this.view=g,this.pos=et,this.event=ot,this.flushed=ut,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=g.state.doc,this.selectNode=!!ot[selectNodeModifier],this.allowDefault=ot.shiftKey;let ct,dt;if(et.inside>-1)ct=g.state.doc.nodeAt(et.inside),dt=et.inside;else{let Tt=g.state.doc.resolve(et.pos);ct=Tt.parent,dt=Tt.depth?Tt.before():0}const ft=ut?null:ot.target,St=ft?g.docView.nearestDesc(ft,!0):null;this.target=St&&St.nodeDOM.nodeType==1?St.nodeDOM:null;let{selection:kt}=g.state;(ot.button==0&&ct.type.spec.draggable&&ct.type.spec.selectable!==!1||kt instanceof NodeSelection&&kt.from<=dt&&kt.to>dt)&&(this.mightDrag={node:ct,pos:dt,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),g.root.addEventListener("mouseup",this.up=this.up.bind(this)),g.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(g,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(g){if(this.done(),!this.view.dom.contains(g.target))return;let et=this.pos;this.view.state.doc!=this.startDoc&&(et=this.view.posAtCoords(eventCoords(g))),this.updateAllowDefault(g),this.allowDefault||!et?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,et.pos,et.inside,g,this.selectNode)?g.preventDefault():g.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(et.pos-this.view.state.selection.from),Math.abs(et.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(et.pos)),"pointer"),g.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(g){this.updateAllowDefault(g),setSelectionOrigin(this.view,"pointer"),g.buttons==0&&this.done()}updateAllowDefault(g){!this.allowDefault&&(Math.abs(this.event.x-g.clientX)>4||Math.abs(this.event.y-g.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=it=>{it.input.lastTouch=Date.now(),forceDOMFlush(it),setSelectionOrigin(it,"pointer")};handlers.touchmove=it=>{it.input.lastTouch=Date.now(),setSelectionOrigin(it,"pointer")};handlers.contextmenu=it=>forceDOMFlush(it);function inOrNearComposition(it,g){return it.composing?!0:safari&&Math.abs(g.timeStamp-it.input.compositionEndedAt)<500?(it.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=it=>{if(!it.composing){it.domObserver.flush();let{state:g}=it,et=g.selection.$to;if(g.selection instanceof TextSelection&&(g.storedMarks||!et.textOffset&&et.parentOffset&&et.nodeBefore.marks.some(ot=>ot.type.spec.inclusive===!1)))it.markCursor=it.state.storedMarks||et.marks(),endComposition(it,!0),it.markCursor=null;else if(endComposition(it,!g.selection.empty),gecko&&g.selection.empty&&et.parentOffset&&!et.textOffset&&et.nodeBefore.marks.length){let ot=it.domSelectionRange();for(let ut=ot.focusNode,ct=ot.focusOffset;ut&&ut.nodeType==1&&ct!=0;){let dt=ct<0?ut.lastChild:ut.childNodes[ct-1];if(!dt)break;if(dt.nodeType==3){let ft=it.domSelection();ft&&ft.collapse(dt,dt.nodeValue.length);break}else ut=dt,ct=-1}}it.input.composing=!0}scheduleComposeEnd(it,timeoutComposition)};editHandlers.compositionend=(it,g)=>{it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=g.timeStamp,it.input.compositionPendingChanges=it.domObserver.pendingRecords().length?it.input.compositionID:0,it.input.compositionNode=null,it.input.compositionPendingChanges&&Promise.resolve().then(()=>it.domObserver.flush()),it.input.compositionID++,scheduleComposeEnd(it,20))};function scheduleComposeEnd(it,g){clearTimeout(it.input.composingTimeout),g>-1&&(it.input.composingTimeout=setTimeout(()=>endComposition(it),g))}function clearComposition(it){for(it.composing&&(it.input.composing=!1,it.input.compositionEndedAt=timestampFromCustomEvent());it.input.compositionNodes.length>0;)it.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(it){let g=it.domSelectionRange();if(!g.focusNode)return null;let et=textNodeBefore$1(g.focusNode,g.focusOffset),ot=textNodeAfter$1(g.focusNode,g.focusOffset);if(et&&ot&&et!=ot){let ut=ot.pmViewDesc,ct=it.domObserver.lastChangedTextNode;if(et==ct||ot==ct)return ct;if(!ut||!ut.isText(ot.nodeValue))return ot;if(it.input.compositionNode==ot){let dt=et.pmViewDesc;if(!(!dt||!dt.isText(et.nodeValue)))return ot}}return et||ot}function timestampFromCustomEvent(){let it=document.createEvent("Event");return it.initEvent("event",!0,!0),it.timeStamp}function endComposition(it,g=!1){if(!(android&&it.domObserver.flushingSoon>=0)){if(it.domObserver.forceFlush(),clearComposition(it),g||it.docView&&it.docView.dirty){let et=selectionFromDOM(it),ot=it.state.selection;return et&&!et.eq(ot)?it.dispatch(it.state.tr.setSelection(et)):(it.markCursor||g)&&!ot.$from.node(ot.$from.sharedDepth(ot.to)).inlineContent?it.dispatch(it.state.tr.deleteSelection()):it.updateState(it.state),!0}return!1}}function captureCopy(it,g){if(!it.dom.parentNode)return;let et=it.dom.parentNode.appendChild(document.createElement("div"));et.appendChild(g),et.style.cssText="position: fixed; left: -10000px; top: 10px";let ot=getSelection(),ut=document.createRange();ut.selectNodeContents(g),it.dom.blur(),ot.removeAllRanges(),ot.addRange(ut),setTimeout(()=>{et.parentNode&&et.parentNode.removeChild(et),it.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(it,g)=>{let et=g,ot=it.state.selection,ut=et.type=="cut";if(ot.empty)return;let ct=brokenClipboardAPI?null:et.clipboardData,dt=ot.content(),{dom:ft,text:St}=serializeForClipboard(it,dt);ct?(et.preventDefault(),ct.clearData(),ct.setData("text/html",ft.innerHTML),ct.setData("text/plain",St)):captureCopy(it,ft),ut&&it.dispatch(it.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(it){return it.openStart==0&&it.openEnd==0&&it.content.childCount==1?it.content.firstChild:null}function capturePaste(it,g){if(!it.dom.parentNode)return;let et=it.input.shiftKey||it.state.selection.$from.parent.type.spec.code,ot=it.dom.parentNode.appendChild(document.createElement(et?"textarea":"div"));et||(ot.contentEditable="true"),ot.style.cssText="position: fixed; left: -10000px; top: 10px",ot.focus();let ut=it.input.shiftKey&&it.input.lastKeyCode!=45;setTimeout(()=>{it.focus(),ot.parentNode&&ot.parentNode.removeChild(ot),et?doPaste(it,ot.value,null,ut,g):doPaste(it,ot.textContent,ot.innerHTML,ut,g)},50)}function doPaste(it,g,et,ot,ut){let ct=parseFromClipboard(it,g,et,ot,it.state.selection.$from);if(it.someProp("handlePaste",St=>St(it,ut,ct||Slice.empty)))return!0;if(!ct)return!1;let dt=sliceSingleNode(ct),ft=dt?it.state.tr.replaceSelectionWith(dt,ot):it.state.tr.replaceSelection(ct);return it.dispatch(ft.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(it){let g=it.getData("text/plain")||it.getData("Text");if(g)return g;let et=it.getData("text/uri-list");return et?et.replace(/\r?\n/g," "):""}editHandlers.paste=(it,g)=>{let et=g;if(it.composing&&!android)return;let ot=brokenClipboardAPI?null:et.clipboardData,ut=it.input.shiftKey&&it.input.lastKeyCode!=45;ot&&doPaste(it,getText$1(ot),ot.getData("text/html"),ut,et)?et.preventDefault():capturePaste(it,et)};class Dragging{constructor(g,et,ot){this.slice=g,this.move=et,this.node=ot}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(it,g){let et=it.someProp("dragCopies",ot=>!ot(g));return et??!g[dragCopyModifier]}handlers.dragstart=(it,g)=>{let et=g,ot=it.input.mouseDown;if(ot&&ot.done(),!et.dataTransfer)return;let ut=it.state.selection,ct=ut.empty?null:it.posAtCoords(eventCoords(et)),dt;if(!(ct&&ct.pos>=ut.from&&ct.pos<=(ut instanceof NodeSelection?ut.to-1:ut.to))){if(ot&&ot.mightDrag)dt=NodeSelection.create(it.state.doc,ot.mightDrag.pos);else if(et.target&&et.target.nodeType==1){let Rt=it.docView.nearestDesc(et.target,!0);Rt&&Rt.node.type.spec.draggable&&Rt!=it.docView&&(dt=NodeSelection.create(it.state.doc,Rt.posBefore))}}let ft=(dt||it.state.selection).content(),{dom:St,text:kt,slice:Tt}=serializeForClipboard(it,ft);(!et.dataTransfer.files.length||!chrome||chrome_version>120)&&et.dataTransfer.clearData(),et.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",St.innerHTML),et.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||et.dataTransfer.setData("text/plain",kt),it.dragging=new Dragging(Tt,dragMoves(it,et),dt)};handlers.dragend=it=>{let g=it.dragging;window.setTimeout(()=>{it.dragging==g&&(it.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(it,g)=>g.preventDefault();editHandlers.drop=(it,g)=>{let et=g,ot=it.dragging;if(it.dragging=null,!et.dataTransfer)return;let ut=it.posAtCoords(eventCoords(et));if(!ut)return;let ct=it.state.doc.resolve(ut.pos),dt=ot&&ot.slice;dt?it.someProp("transformPasted",Bt=>{dt=Bt(dt,it,!1)}):dt=parseFromClipboard(it,getText$1(et.dataTransfer),brokenClipboardAPI?null:et.dataTransfer.getData("text/html"),!1,ct);let ft=!!(ot&&dragMoves(it,et));if(it.someProp("handleDrop",Bt=>Bt(it,et,dt||Slice.empty,ft))){et.preventDefault();return}if(!dt)return;et.preventDefault();let St=dt?dropPoint(it.state.doc,ct.pos,dt):ct.pos;St==null&&(St=ct.pos);let kt=it.state.tr;if(ft){let{node:Bt}=ot;Bt?Bt.replace(kt):kt.deleteSelection()}let Tt=kt.mapping.map(St),Rt=dt.openStart==0&&dt.openEnd==0&&dt.content.childCount==1,Ft=kt.doc;if(Rt?kt.replaceRangeWith(Tt,Tt,dt.content.firstChild):kt.replaceRange(Tt,Tt,dt),kt.doc.eq(Ft))return;let jt=kt.doc.resolve(Tt);if(Rt&&NodeSelection.isSelectable(dt.content.firstChild)&&jt.nodeAfter&&jt.nodeAfter.sameMarkup(dt.content.firstChild))kt.setSelection(new NodeSelection(jt));else{let Bt=kt.mapping.map(St);kt.mapping.maps[kt.mapping.maps.length-1].forEach((zt,Ht,Ut,Kt)=>Bt=Kt),kt.setSelection(selectionBetween(it,jt,kt.doc.resolve(Bt)))}it.focus(),it.dispatch(kt.setMeta("uiEvent","drop"))};handlers.focus=it=>{it.input.lastFocus=Date.now(),it.focused||(it.domObserver.stop(),it.dom.classList.add("ProseMirror-focused"),it.domObserver.start(),it.focused=!0,setTimeout(()=>{it.docView&&it.hasFocus()&&!it.domObserver.currentSelection.eq(it.domSelectionRange())&&selectionToDOM(it)},20))};handlers.blur=(it,g)=>{let et=g;it.focused&&(it.domObserver.stop(),it.dom.classList.remove("ProseMirror-focused"),it.domObserver.start(),et.relatedTarget&&it.dom.contains(et.relatedTarget)&&it.domObserver.currentSelection.clear(),it.focused=!1)};handlers.beforeinput=(it,g)=>{if(chrome&&android&&g.inputType=="deleteContentBackward"){it.domObserver.flushSoon();let{domChangeCount:ot}=it.input;setTimeout(()=>{if(it.input.domChangeCount!=ot||(it.dom.blur(),it.focus(),it.someProp("handleKeyDown",ct=>ct(it,keyEvent(8,"Backspace")))))return;let{$cursor:ut}=it.state.selection;ut&&ut.pos>0&&it.dispatch(it.state.tr.delete(ut.pos-1,ut.pos).scrollIntoView())},50)}};for(let it in editHandlers)handlers[it]=editHandlers[it];function compareObjs(it,g){if(it==g)return!0;for(let et in it)if(it[et]!==g[et])return!1;for(let et in g)if(!(et in it))return!1;return!0}class WidgetType{constructor(g,et){this.toDOM=g,this.spec=et||noSpec,this.side=this.spec.side||0}map(g,et,ot,ut){let{pos:ct,deleted:dt}=g.mapResult(et.from+ut,this.side<0?-1:1);return dt?null:new Decoration(ct-ot,ct-ot,this)}valid(){return!0}eq(g){return this==g||g instanceof WidgetType&&(this.spec.key&&this.spec.key==g.spec.key||this.toDOM==g.toDOM&&compareObjs(this.spec,g.spec))}destroy(g){this.spec.destroy&&this.spec.destroy(g)}}class InlineType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ut){let ct=g.map(et.from+ut,this.spec.inclusiveStart?-1:1)-ot,dt=g.map(et.to+ut,this.spec.inclusiveEnd?1:-1)-ot;return ct>=dt?null:new Decoration(ct,dt,this)}valid(g,et){return et.from<et.to}eq(g){return this==g||g instanceof InlineType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}static is(g){return g.type instanceof InlineType}destroy(){}}class NodeType{constructor(g,et){this.attrs=g,this.spec=et||noSpec}map(g,et,ot,ut){let ct=g.mapResult(et.from+ut,1);if(ct.deleted)return null;let dt=g.mapResult(et.to+ut,-1);return dt.deleted||dt.pos<=ct.pos?null:new Decoration(ct.pos-ot,dt.pos-ot,this)}valid(g,et){let{index:ot,offset:ut}=g.content.findIndex(et.from),ct;return ut==et.from&&!(ct=g.child(ot)).isText&&ut+ct.nodeSize==et.to}eq(g){return this==g||g instanceof NodeType&&compareObjs(this.attrs,g.attrs)&&compareObjs(this.spec,g.spec)}destroy(){}}class Decoration{constructor(g,et,ot){this.from=g,this.to=et,this.type=ot}copy(g,et){return new Decoration(g,et,this.type)}eq(g,et=0){return this.type.eq(g.type)&&this.from+et==g.from&&this.to+et==g.to}map(g,et,ot){return this.type.map(g,this,et,ot)}static widget(g,et,ot){return new Decoration(g,g,new WidgetType(et,ot))}static inline(g,et,ot,ut){return new Decoration(g,et,new InlineType(ot,ut))}static node(g,et,ot,ut){return new Decoration(g,et,new NodeType(ot,ut))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(g,et){this.local=g.length?g:none,this.children=et.length?et:none}static create(g,et){return et.length?buildTree(et,g,0,noSpec):empty}find(g,et,ot){let ut=[];return this.findInner(g??0,et??1e9,ut,0,ot),ut}findInner(g,et,ot,ut,ct){for(let dt=0;dt<this.local.length;dt++){let ft=this.local[dt];ft.from<=et&&ft.to>=g&&(!ct||ct(ft.spec))&&ot.push(ft.copy(ft.from+ut,ft.to+ut))}for(let dt=0;dt<this.children.length;dt+=3)if(this.children[dt]<et&&this.children[dt+1]>g){let ft=this.children[dt]+1;this.children[dt+2].findInner(g-ft,et-ft,ot,ut+ft,ct)}}map(g,et,ot){return this==empty||g.maps.length==0?this:this.mapInner(g,et,0,0,ot||noSpec)}mapInner(g,et,ot,ut,ct){let dt;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft].map(g,ot,ut);St&&St.type.valid(et,St)?(dt||(dt=[])).push(St):ct.onRemove&&ct.onRemove(this.local[ft].spec)}return this.children.length?mapChildren(this.children,dt||[],g,et,ot,ut,ct):dt?new DecorationSet(dt.sort(byPos),none):empty}add(g,et){return et.length?this==empty?DecorationSet.create(g,et):this.addInner(g,et,0):this}addInner(g,et,ot){let ut,ct=0;g.forEach((ft,St)=>{let kt=St+ot,Tt;if(Tt=takeSpansForNode(et,ft,kt)){for(ut||(ut=this.children.slice());ct<ut.length&&ut[ct]<St;)ct+=3;ut[ct]==St?ut[ct+2]=ut[ct+2].addInner(ft,Tt,kt+1):ut.splice(ct,0,St,St+ft.nodeSize,buildTree(Tt,ft,kt+1,noSpec)),ct+=3}});let dt=moveSpans(ct?withoutNulls(et):et,-ot);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||dt.splice(ft--,1);return new DecorationSet(dt.length?this.local.concat(dt).sort(byPos):this.local,ut||this.children)}remove(g){return g.length==0||this==empty?this:this.removeInner(g,0)}removeInner(g,et){let ot=this.children,ut=this.local;for(let ct=0;ct<ot.length;ct+=3){let dt,ft=ot[ct]+et,St=ot[ct+1]+et;for(let Tt=0,Rt;Tt<g.length;Tt++)(Rt=g[Tt])&&Rt.from>ft&&Rt.to<St&&(g[Tt]=null,(dt||(dt=[])).push(Rt));if(!dt)continue;ot==this.children&&(ot=this.children.slice());let kt=ot[ct+2].removeInner(dt,ft+1);kt!=empty?ot[ct+2]=kt:(ot.splice(ct,3),ct-=3)}if(ut.length){for(let ct=0,dt;ct<g.length;ct++)if(dt=g[ct])for(let ft=0;ft<ut.length;ft++)ut[ft].eq(dt,et)&&(ut==this.local&&(ut=this.local.slice()),ut.splice(ft--,1))}return ot==this.children&&ut==this.local?this:ut.length||ot.length?new DecorationSet(ut,ot):empty}forChild(g,et){if(this==empty)return this;if(et.isLeaf)return DecorationSet.empty;let ot,ut;for(let ft=0;ft<this.children.length;ft+=3)if(this.children[ft]>=g){this.children[ft]==g&&(ot=this.children[ft+2]);break}let ct=g+1,dt=ct+et.content.size;for(let ft=0;ft<this.local.length;ft++){let St=this.local[ft];if(St.from<dt&&St.to>ct&&St.type instanceof InlineType){let kt=Math.max(ct,St.from)-ct,Tt=Math.min(dt,St.to)-ct;kt<Tt&&(ut||(ut=[])).push(St.copy(kt,Tt))}}if(ut){let ft=new DecorationSet(ut.sort(byPos),none);return ot?new DecorationGroup([ft,ot]):ft}return ot||empty}eq(g){if(this==g)return!0;if(!(g instanceof DecorationSet)||this.local.length!=g.local.length||this.children.length!=g.children.length)return!1;for(let et=0;et<this.local.length;et++)if(!this.local[et].eq(g.local[et]))return!1;for(let et=0;et<this.children.length;et+=3)if(this.children[et]!=g.children[et]||this.children[et+1]!=g.children[et+1]||!this.children[et+2].eq(g.children[et+2]))return!1;return!0}locals(g){return removeOverlap(this.localsInner(g))}localsInner(g){if(this==empty)return none;if(g.inlineContent||!this.local.some(InlineType.is))return this.local;let et=[];for(let ot=0;ot<this.local.length;ot++)this.local[ot].type instanceof InlineType||et.push(this.local[ot]);return et}forEachSet(g){g(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(g){this.members=g}map(g,et){const ot=this.members.map(ut=>ut.map(g,et,noSpec));return DecorationGroup.from(ot)}forChild(g,et){if(et.isLeaf)return DecorationSet.empty;let ot=[];for(let ut=0;ut<this.members.length;ut++){let ct=this.members[ut].forChild(g,et);ct!=empty&&(ct instanceof DecorationGroup?ot=ot.concat(ct.members):ot.push(ct))}return DecorationGroup.from(ot)}eq(g){if(!(g instanceof DecorationGroup)||g.members.length!=this.members.length)return!1;for(let et=0;et<this.members.length;et++)if(!this.members[et].eq(g.members[et]))return!1;return!0}locals(g){let et,ot=!0;for(let ut=0;ut<this.members.length;ut++){let ct=this.members[ut].localsInner(g);if(ct.length)if(!et)et=ct;else{ot&&(et=et.slice(),ot=!1);for(let dt=0;dt<ct.length;dt++)et.push(ct[dt])}}return et?removeOverlap(ot?et:et.sort(byPos)):none}static from(g){switch(g.length){case 0:return empty;case 1:return g[0];default:return new DecorationGroup(g.every(et=>et instanceof DecorationSet)?g:g.reduce((et,ot)=>et.concat(ot instanceof DecorationSet?ot:ot.members),[]))}}forEachSet(g){for(let et=0;et<this.members.length;et++)this.members[et].forEachSet(g)}}function mapChildren(it,g,et,ot,ut,ct,dt){let ft=it.slice();for(let kt=0,Tt=ct;kt<et.maps.length;kt++){let Rt=0;et.maps[kt].forEach((Ft,jt,Bt,zt)=>{let Ht=zt-Bt-(jt-Ft);for(let Ut=0;Ut<ft.length;Ut+=3){let Kt=ft[Ut+1];if(Kt<0||Ft>Kt+Tt-Rt)continue;let Yt=ft[Ut]+Tt-Rt;jt>=Yt?ft[Ut+1]=Ft<=Yt?-2:-1:Ft>=Tt&&Ht&&(ft[Ut]+=Ht,ft[Ut+1]+=Ht)}Rt+=Ht}),Tt=et.maps[kt].map(Tt,-1)}let St=!1;for(let kt=0;kt<ft.length;kt+=3)if(ft[kt+1]<0){if(ft[kt+1]==-2){St=!0,ft[kt+1]=-1;continue}let Tt=et.map(it[kt]+ct),Rt=Tt-ut;if(Rt<0||Rt>=ot.content.size){St=!0;continue}let Ft=et.map(it[kt+1]+ct,-1),jt=Ft-ut,{index:Bt,offset:zt}=ot.content.findIndex(Rt),Ht=ot.maybeChild(Bt);if(Ht&&zt==Rt&&zt+Ht.nodeSize==jt){let Ut=ft[kt+2].mapInner(et,Ht,Tt+1,it[kt]+ct+1,dt);Ut!=empty?(ft[kt]=Rt,ft[kt+1]=jt,ft[kt+2]=Ut):(ft[kt+1]=-2,St=!0)}else St=!0}if(St){let kt=mapAndGatherRemainingDecorations(ft,it,g,et,ut,ct,dt),Tt=buildTree(kt,ot,0,dt);g=Tt.local;for(let Rt=0;Rt<ft.length;Rt+=3)ft[Rt+1]<0&&(ft.splice(Rt,3),Rt-=3);for(let Rt=0,Ft=0;Rt<Tt.children.length;Rt+=3){let jt=Tt.children[Rt];for(;Ft<ft.length&&ft[Ft]<jt;)Ft+=3;ft.splice(Ft,0,Tt.children[Rt],Tt.children[Rt+1],Tt.children[Rt+2])}}return new DecorationSet(g.sort(byPos),ft)}function moveSpans(it,g){if(!g||!it.length)return it;let et=[];for(let ot=0;ot<it.length;ot++){let ut=it[ot];et.push(new Decoration(ut.from+g,ut.to+g,ut.type))}return et}function mapAndGatherRemainingDecorations(it,g,et,ot,ut,ct,dt){function ft(St,kt){for(let Tt=0;Tt<St.local.length;Tt++){let Rt=St.local[Tt].map(ot,ut,kt);Rt?et.push(Rt):dt.onRemove&&dt.onRemove(St.local[Tt].spec)}for(let Tt=0;Tt<St.children.length;Tt+=3)ft(St.children[Tt+2],St.children[Tt]+kt+1)}for(let St=0;St<it.length;St+=3)it[St+1]==-1&&ft(it[St+2],g[St]+ct+1);return et}function takeSpansForNode(it,g,et){if(g.isLeaf)return null;let ot=et+g.nodeSize,ut=null;for(let ct=0,dt;ct<it.length;ct++)(dt=it[ct])&&dt.from>et&&dt.to<ot&&((ut||(ut=[])).push(dt),it[ct]=null);return ut}function withoutNulls(it){let g=[];for(let et=0;et<it.length;et++)it[et]!=null&&g.push(it[et]);return g}function buildTree(it,g,et,ot){let ut=[],ct=!1;g.forEach((ft,St)=>{let kt=takeSpansForNode(it,ft,St+et);if(kt){ct=!0;let Tt=buildTree(kt,ft,et+St+1,ot);Tt!=empty&&ut.push(St,St+ft.nodeSize,Tt)}});let dt=moveSpans(ct?withoutNulls(it):it,-et).sort(byPos);for(let ft=0;ft<dt.length;ft++)dt[ft].type.valid(g,dt[ft])||(ot.onRemove&&ot.onRemove(dt[ft].spec),dt.splice(ft--,1));return dt.length||ut.length?new DecorationSet(dt,ut):empty}function byPos(it,g){return it.from-g.from||it.to-g.to}function removeOverlap(it){let g=it;for(let et=0;et<g.length-1;et++){let ot=g[et];if(ot.from!=ot.to)for(let ut=et+1;ut<g.length;ut++){let ct=g[ut];if(ct.from==ot.from){ct.to!=ot.to&&(g==it&&(g=it.slice()),g[ut]=ct.copy(ct.from,ot.to),insertAhead(g,ut+1,ct.copy(ot.to,ct.to)));continue}else{ct.from<ot.to&&(g==it&&(g=it.slice()),g[et]=ot.copy(ot.from,ct.from),insertAhead(g,ut,ot.copy(ct.from,ot.to)));break}}}return g}function insertAhead(it,g,et){for(;g<it.length&&byPos(et,it[g])>0;)g++;it.splice(g,0,et)}function viewDecorations(it){let g=[];return it.someProp("decorations",et=>{let ot=et(it.state);ot&&ot!=empty&&g.push(ot)}),it.cursorWrapper&&g.push(DecorationSet.create(it.state.doc,[it.cursorWrapper.deco])),DecorationGroup.from(g)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(g){this.anchorNode=g.anchorNode,this.anchorOffset=g.anchorOffset,this.focusNode=g.focusNode,this.focusOffset=g.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(g){return g.anchorNode==this.anchorNode&&g.anchorOffset==this.anchorOffset&&g.focusNode==this.focusNode&&g.focusOffset==this.focusOffset}}class DOMObserver{constructor(g,et){this.view=g,this.handleDOMChange=et,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(ot=>{for(let ut=0;ut<ot.length;ut++)this.queue.push(ot[ut]);ie$1&&ie_version<=11&&ot.some(ut=>ut.type=="childList"&&ut.removedNodes.length||ut.type=="characterData"&&ut.oldValue.length>ut.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=ot=>{this.queue.push({target:ot.target,type:"characterData",oldValue:ot.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let g=this.observer.takeRecords();if(g.length){for(let et=0;et<g.length;et++)this.queue.push(g[et]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let g=this.view.domSelectionRange();if(g.focusNode&&isEquivalentPosition(g.focusNode,g.focusOffset,g.anchorNode,g.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(g){if(!g.focusNode)return!0;let et=new Set,ot;for(let ct=g.focusNode;ct;ct=parentNode(ct))et.add(ct);for(let ct=g.anchorNode;ct;ct=parentNode(ct))if(et.has(ct)){ot=ct;break}let ut=ot&&this.view.docView.nearestDesc(ot);if(ut&&ut.ignoreMutation({type:"selection",target:ot.nodeType==3?ot.parentNode:ot}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let g of this.observer.takeRecords())this.queue.push(g);return this.queue}flush(){let{view:g}=this;if(!g.docView||this.flushingSoon>-1)return;let et=this.pendingRecords();et.length&&(this.queue=[]);let ot=g.domSelectionRange(),ut=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(ot)&&hasFocusAndSelection(g)&&!this.ignoreSelectionChange(ot),ct=-1,dt=-1,ft=!1,St=[];if(g.editable)for(let Tt=0;Tt<et.length;Tt++){let Rt=this.registerMutation(et[Tt],St);Rt&&(ct=ct<0?Rt.from:Math.min(Rt.from,ct),dt=dt<0?Rt.to:Math.max(Rt.to,dt),Rt.typeOver&&(ft=!0))}if(gecko&&St.length){let Tt=St.filter(Rt=>Rt.nodeName=="BR");if(Tt.length==2){let[Rt,Ft]=Tt;Rt.parentNode&&Rt.parentNode.parentNode==Ft.parentNode?Ft.remove():Rt.remove()}else{let{focusNode:Rt}=this.currentSelection;for(let Ft of Tt){let jt=Ft.parentNode;jt&&jt.nodeName=="LI"&&(!Rt||blockParent(g,Rt)!=jt)&&Ft.remove()}}}let kt=null;ct<0&&ut&&g.input.lastFocus>Date.now()-200&&Math.max(g.input.lastTouch,g.input.lastClick.time)<Date.now()-300&&selectionCollapsed(ot)&&(kt=selectionFromDOM(g))&&kt.eq(Selection.near(g.state.doc.resolve(0),1))?(g.input.lastFocus=0,selectionToDOM(g),this.currentSelection.set(ot),g.scrollToSelection()):(ct>-1||ut)&&(ct>-1&&(g.docView.markDirty(ct,dt),checkCSS(g)),this.handleDOMChange(ct,dt,ft,St),g.docView&&g.docView.dirty?g.updateState(g.state):this.currentSelection.eq(ot)||selectionToDOM(g),this.currentSelection.set(ot))}registerMutation(g,et){if(et.indexOf(g.target)>-1)return null;let ot=this.view.docView.nearestDesc(g.target);if(g.type=="attributes"&&(ot==this.view.docView||g.attributeName=="contenteditable"||g.attributeName=="style"&&!g.oldValue&&!g.target.getAttribute("style"))||!ot||ot.ignoreMutation(g))return null;if(g.type=="childList"){for(let Tt=0;Tt<g.addedNodes.length;Tt++){let Rt=g.addedNodes[Tt];et.push(Rt),Rt.nodeType==3&&(this.lastChangedTextNode=Rt)}if(ot.contentDOM&&ot.contentDOM!=ot.dom&&!ot.contentDOM.contains(g.target))return{from:ot.posBefore,to:ot.posAfter};let ut=g.previousSibling,ct=g.nextSibling;if(ie$1&&ie_version<=11&&g.addedNodes.length)for(let Tt=0;Tt<g.addedNodes.length;Tt++){let{previousSibling:Rt,nextSibling:Ft}=g.addedNodes[Tt];(!Rt||Array.prototype.indexOf.call(g.addedNodes,Rt)<0)&&(ut=Rt),(!Ft||Array.prototype.indexOf.call(g.addedNodes,Ft)<0)&&(ct=Ft)}let dt=ut&&ut.parentNode==g.target?domIndex(ut)+1:0,ft=ot.localPosFromDOM(g.target,dt,-1),St=ct&&ct.parentNode==g.target?domIndex(ct):g.target.childNodes.length,kt=ot.localPosFromDOM(g.target,St,1);return{from:ft,to:kt}}else return g.type=="attributes"?{from:ot.posAtStart-ot.border,to:ot.posAtEnd+ot.border}:(this.lastChangedTextNode=g.target,{from:ot.posAtStart,to:ot.posAtEnd,typeOver:g.target.nodeValue==g.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(it){if(!cssChecked.has(it)&&(cssChecked.set(it,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(it.dom).whiteSpace)!==-1)){if(it.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(it,g){let et=g.startContainer,ot=g.startOffset,ut=g.endContainer,ct=g.endOffset,dt=it.domAtPos(it.state.selection.anchor);return isEquivalentPosition(dt.node,dt.offset,ut,ct)&&([et,ot,ut,ct]=[ut,ct,et,ot]),{anchorNode:et,anchorOffset:ot,focusNode:ut,focusOffset:ct}}function safariShadowSelectionRange(it,g){if(g.getComposedRanges){let ut=g.getComposedRanges(it.root)[0];if(ut)return rangeToSelectionRange(it,ut)}let et;function ot(ut){ut.preventDefault(),ut.stopImmediatePropagation(),et=ut.getTargetRanges()[0]}return it.dom.addEventListener("beforeinput",ot,!0),document.execCommand("indent"),it.dom.removeEventListener("beforeinput",ot,!0),et?rangeToSelectionRange(it,et):null}function blockParent(it,g){for(let et=g.parentNode;et&&et!=it.dom;et=et.parentNode){let ot=it.docView.nearestDesc(et,!0);if(ot&&ot.node.isBlock)return et}return null}function parseBetween(it,g,et){let{node:ot,fromOffset:ut,toOffset:ct,from:dt,to:ft}=it.docView.parseRange(g,et),St=it.domSelectionRange(),kt,Tt=St.anchorNode;if(Tt&&it.dom.contains(Tt.nodeType==1?Tt:Tt.parentNode)&&(kt=[{node:Tt,offset:St.anchorOffset}],selectionCollapsed(St)||kt.push({node:St.focusNode,offset:St.focusOffset})),chrome&&it.input.lastKeyCode===8)for(let Ht=ct;Ht>ut;Ht--){let Ut=ot.childNodes[Ht-1],Kt=Ut.pmViewDesc;if(Ut.nodeName=="BR"&&!Kt){ct=Ht;break}if(!Kt||Kt.size)break}let Rt=it.state.doc,Ft=it.someProp("domParser")||DOMParser.fromSchema(it.state.schema),jt=Rt.resolve(dt),Bt=null,zt=Ft.parse(ot,{topNode:jt.parent,topMatch:jt.parent.contentMatchAt(jt.index()),topOpen:!0,from:ut,to:ct,preserveWhitespace:jt.parent.type.whitespace=="pre"?"full":!0,findPositions:kt,ruleFromNode,context:jt});if(kt&&kt[0].pos!=null){let Ht=kt[0].pos,Ut=kt[1]&&kt[1].pos;Ut==null&&(Ut=Ht),Bt={anchor:Ht+dt,head:Ut+dt}}return{doc:zt,sel:Bt,from:dt,to:ft}}function ruleFromNode(it){let g=it.pmViewDesc;if(g)return g.parseRule();if(it.nodeName=="BR"&&it.parentNode){if(safari&&/^(ul|ol)$/i.test(it.parentNode.nodeName)){let et=document.createElement("div");return et.appendChild(document.createElement("li")),{skip:et}}else if(it.parentNode.lastChild==it||safari&&/^(tr|table)$/i.test(it.parentNode.nodeName))return{ignore:!0}}else if(it.nodeName=="IMG"&&it.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(it,g,et,ot,ut){let ct=it.input.compositionPendingChanges||(it.composing?it.input.compositionID:0);if(it.input.compositionPendingChanges=0,g<0){let lr=it.input.lastSelectionTime>Date.now()-50?it.input.lastSelectionOrigin:null,cr=selectionFromDOM(it,lr);if(cr&&!it.state.selection.eq(cr)){if(chrome&&android&&it.input.lastKeyCode===13&&Date.now()-100<it.input.lastKeyCodeTime&&it.someProp("handleKeyDown",xr=>xr(it,keyEvent(13,"Enter"))))return;let vr=it.state.tr.setSelection(cr);lr=="pointer"?vr.setMeta("pointer",!0):lr=="key"&&vr.scrollIntoView(),ct&&vr.setMeta("composition",ct),it.dispatch(vr)}return}let dt=it.state.doc.resolve(g),ft=dt.sharedDepth(et);g=dt.before(ft+1),et=it.state.doc.resolve(et).after(ft+1);let St=it.state.selection,kt=parseBetween(it,g,et),Tt=it.state.doc,Rt=Tt.slice(kt.from,kt.to),Ft,jt;it.input.lastKeyCode===8&&Date.now()-100<it.input.lastKeyCodeTime?(Ft=it.state.selection.to,jt="end"):(Ft=it.state.selection.from,jt="start"),it.input.lastKeyCode=null;let Bt=findDiff(Rt.content,kt.doc.content,kt.from,Ft,jt);if(Bt&&it.input.domChangeCount++,(ios&&it.input.lastIOSEnter>Date.now()-225||android)&&ut.some(lr=>lr.nodeType==1&&!isInline.test(lr.nodeName))&&(!Bt||Bt.endA>=Bt.endB)&&it.someProp("handleKeyDown",lr=>lr(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(!Bt)if(ot&&St instanceof TextSelection&&!St.empty&&St.$head.sameParent(St.$anchor)&&!it.composing&&!(kt.sel&&kt.sel.anchor!=kt.sel.head))Bt={start:St.from,endA:St.to,endB:St.to};else{if(kt.sel){let lr=resolveSelection(it,it.state.doc,kt.sel);if(lr&&!lr.eq(it.state.selection)){let cr=it.state.tr.setSelection(lr);ct&&cr.setMeta("composition",ct),it.dispatch(cr)}}return}it.state.selection.from<it.state.selection.to&&Bt.start==Bt.endB&&it.state.selection instanceof TextSelection&&(Bt.start>it.state.selection.from&&Bt.start<=it.state.selection.from+2&&it.state.selection.from>=kt.from?Bt.start=it.state.selection.from:Bt.endA<it.state.selection.to&&Bt.endA>=it.state.selection.to-2&&it.state.selection.to<=kt.to&&(Bt.endB+=it.state.selection.to-Bt.endA,Bt.endA=it.state.selection.to)),ie$1&&ie_version<=11&&Bt.endB==Bt.start+1&&Bt.endA==Bt.start&&Bt.start>kt.from&&kt.doc.textBetween(Bt.start-kt.from-1,Bt.start-kt.from+1)==" "&&(Bt.start--,Bt.endA--,Bt.endB--);let zt=kt.doc.resolveNoCache(Bt.start-kt.from),Ht=kt.doc.resolveNoCache(Bt.endB-kt.from),Ut=Tt.resolve(Bt.start),Kt=zt.sameParent(Ht)&&zt.parent.inlineContent&&Ut.end()>=Bt.endA;if((ios&&it.input.lastIOSEnter>Date.now()-225&&(!Kt||ut.some(lr=>lr.nodeName=="DIV"||lr.nodeName=="P"))||!Kt&&zt.pos<kt.doc.content.size&&(!zt.sameParent(Ht)||!zt.parent.inlineContent)&&zt.pos<Ht.pos&&!/\S/.test(kt.doc.textBetween(zt.pos,Ht.pos,"","")))&&it.someProp("handleKeyDown",lr=>lr(it,keyEvent(13,"Enter")))){it.input.lastIOSEnter=0;return}if(it.state.selection.anchor>Bt.start&&looksLikeBackspace(Tt,Bt.start,Bt.endA,zt,Ht)&&it.someProp("handleKeyDown",lr=>lr(it,keyEvent(8,"Backspace")))){android&&chrome&&it.domObserver.suppressSelectionUpdates();return}chrome&&Bt.endB==Bt.start&&(it.input.lastChromeDelete=Date.now()),android&&!Kt&&zt.start()!=Ht.start()&&Ht.parentOffset==0&&zt.depth==Ht.depth&&kt.sel&&kt.sel.anchor==kt.sel.head&&kt.sel.head==Bt.endA&&(Bt.endB-=2,Ht=kt.doc.resolveNoCache(Bt.endB-kt.from),setTimeout(()=>{it.someProp("handleKeyDown",function(lr){return lr(it,keyEvent(13,"Enter"))})},20));let Yt=Bt.start,er=Bt.endA,ar=lr=>{let cr=lr||it.state.tr.replace(Yt,er,kt.doc.slice(Bt.start-kt.from,Bt.endB-kt.from));if(kt.sel){let vr=resolveSelection(it,cr.doc,kt.sel);vr&&!(chrome&&it.composing&&vr.empty&&(Bt.start!=Bt.endB||it.input.lastChromeDelete<Date.now()-100)&&(vr.head==Yt||vr.head==cr.mapping.map(er)-1)||ie$1&&vr.empty&&vr.head==Yt)&&cr.setSelection(vr)}return ct&&cr.setMeta("composition",ct),cr.scrollIntoView()},ir;if(Kt)if(zt.pos==Ht.pos){ie$1&&ie_version<=11&&zt.parentOffset==0&&(it.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(it),20));let lr=ar(it.state.tr.delete(Yt,er)),cr=Tt.resolve(Bt.start).marksAcross(Tt.resolve(Bt.endA));cr&&lr.ensureMarks(cr),it.dispatch(lr)}else if(Bt.endA==Bt.endB&&(ir=isMarkChange(zt.parent.content.cut(zt.parentOffset,Ht.parentOffset),Ut.parent.content.cut(Ut.parentOffset,Bt.endA-Ut.start())))){let lr=ar(it.state.tr);ir.type=="add"?lr.addMark(Yt,er,ir.mark):lr.removeMark(Yt,er,ir.mark),it.dispatch(lr)}else if(zt.parent.child(zt.index()).isText&&zt.index()==Ht.index()-(Ht.textOffset?0:1)){let lr=zt.parent.textBetween(zt.parentOffset,Ht.parentOffset),cr=()=>ar(it.state.tr.insertText(lr,Yt,er));it.someProp("handleTextInput",vr=>vr(it,Yt,er,lr,cr))||it.dispatch(cr())}else it.dispatch(ar());else it.dispatch(ar())}function resolveSelection(it,g,et){return Math.max(et.anchor,et.head)>g.content.size?null:selectionBetween(it,g.resolve(et.anchor),g.resolve(et.head))}function isMarkChange(it,g){let et=it.firstChild.marks,ot=g.firstChild.marks,ut=et,ct=ot,dt,ft,St;for(let Tt=0;Tt<ot.length;Tt++)ut=ot[Tt].removeFromSet(ut);for(let Tt=0;Tt<et.length;Tt++)ct=et[Tt].removeFromSet(ct);if(ut.length==1&&ct.length==0)ft=ut[0],dt="add",St=Tt=>Tt.mark(ft.addToSet(Tt.marks));else if(ut.length==0&&ct.length==1)ft=ct[0],dt="remove",St=Tt=>Tt.mark(ft.removeFromSet(Tt.marks));else return null;let kt=[];for(let Tt=0;Tt<g.childCount;Tt++)kt.push(St(g.child(Tt)));if(Fragment.from(kt).eq(it))return{mark:ft,type:dt}}function looksLikeBackspace(it,g,et,ot,ut){if(et-g<=ut.pos-ot.pos||skipClosingAndOpening(ot,!0,!1)<ut.pos)return!1;let ct=it.resolve(g);if(!ot.parent.isTextblock){let ft=ct.nodeAfter;return ft!=null&&et==g+ft.nodeSize}if(ct.parentOffset<ct.parent.content.size||!ct.parent.isTextblock)return!1;let dt=it.resolve(skipClosingAndOpening(ct,!0,!0));return!dt.parent.isTextblock||dt.pos>et||skipClosingAndOpening(dt,!0,!1)<et?!1:ot.parent.content.cut(ot.parentOffset).eq(dt.parent.content)}function skipClosingAndOpening(it,g,et){let ot=it.depth,ut=g?it.end():it.pos;for(;ot>0&&(g||it.indexAfter(ot)==it.node(ot).childCount);)ot--,ut++,g=!1;if(et){let ct=it.node(ot).maybeChild(it.indexAfter(ot));for(;ct&&!ct.isLeaf;)ct=ct.firstChild,ut++}return ut}function findDiff(it,g,et,ot,ut){let ct=it.findDiffStart(g,et);if(ct==null)return null;let{a:dt,b:ft}=it.findDiffEnd(g,et+it.size,et+g.size);if(ut=="end"){let St=Math.max(0,ct-Math.min(dt,ft));ot-=dt+St-ct}if(dt<ct&&it.size<g.size){let St=ot<=ct&&ot>=dt?ct-ot:0;ct-=St,ct&&ct<g.size&&isSurrogatePair(g.textBetween(ct-1,ct+1))&&(ct+=St?1:-1),ft=ct+(ft-dt),dt=ct}else if(ft<ct){let St=ot<=ct&&ot>=ft?ct-ot:0;ct-=St,ct&&ct<it.size&&isSurrogatePair(it.textBetween(ct-1,ct+1))&&(ct+=St?1:-1),dt=ct+(dt-ft),ft=ct}return{start:ct,endA:dt,endB:ft}}function isSurrogatePair(it){if(it.length!=2)return!1;let g=it.charCodeAt(0),et=it.charCodeAt(1);return g>=56320&&g<=57343&&et>=55296&&et<=56319}class EditorView{constructor(g,et){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=et,this.state=et.state,this.directPlugins=et.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=g&&g.mount||document.createElement("div"),g&&(g.appendChild?g.appendChild(this.dom):typeof g=="function"?g(this.dom):g.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(ot,ut,ct,dt)=>readDOMChange(this,ot,ut,ct,dt)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let g=this._props;this._props={};for(let et in g)this._props[et]=g[et];this._props.state=this.state}return this._props}update(g){g.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let et=this._props;this._props=g,g.plugins&&(g.plugins.forEach(checkStateComponent),this.directPlugins=g.plugins),this.updateStateInner(g.state,et)}setProps(g){let et={};for(let ot in this._props)et[ot]=this._props[ot];et.state=this.state;for(let ot in g)et[ot]=g[ot];this.update(et)}updateState(g){this.updateStateInner(g,this._props)}updateStateInner(g,et){var ot;let ut=this.state,ct=!1,dt=!1;g.storedMarks&&this.composing&&(clearComposition(this),dt=!0),this.state=g;let ft=ut.plugins!=g.plugins||this._props.plugins!=et.plugins;if(ft||this._props.plugins!=et.plugins||this._props.nodeViews!=et.nodeViews){let jt=buildNodeViews(this);changedNodeViews(jt,this.nodeViews)&&(this.nodeViews=jt,ct=!0)}(ft||et.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let St=viewDecorations(this),kt=computeDocDeco(this),Tt=ut.plugins!=g.plugins&&!ut.doc.eq(g.doc)?"reset":g.scrollToSelection>ut.scrollToSelection?"to selection":"preserve",Rt=ct||!this.docView.matchesNode(g.doc,kt,St);(Rt||!g.selection.eq(ut.selection))&&(dt=!0);let Ft=Tt=="preserve"&&dt&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(dt){this.domObserver.stop();let jt=Rt&&(ie$1||chrome)&&!this.composing&&!ut.selection.empty&&!g.selection.empty&&selectionContextChanged(ut.selection,g.selection);if(Rt){let Bt=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(ct||!this.docView.update(g.doc,kt,St,this))&&(this.docView.updateOuterDeco(kt),this.docView.destroy(),this.docView=docViewDesc(g.doc,kt,St,this.dom,this)),Bt&&!this.trackWrites&&(jt=!0)}jt||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,jt):(syncNodeSelection(this,g.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(ut),!((ot=this.dragging)===null||ot===void 0)&&ot.node&&!ut.doc.eq(g.doc)&&this.updateDraggedNode(this.dragging,ut),Tt=="reset"?this.dom.scrollTop=0:Tt=="to selection"?this.scrollToSelection():Ft&&resetScrollPos(Ft)}scrollToSelection(){let g=this.domSelectionRange().focusNode;if(!(!g||!this.dom.contains(g.nodeType==1?g:g.parentNode))){if(!this.someProp("handleScrollToSelection",et=>et(this)))if(this.state.selection instanceof NodeSelection){let et=this.docView.domAfterPos(this.state.selection.from);et.nodeType==1&&scrollRectIntoView(this,et.getBoundingClientRect(),g)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),g)}}destroyPluginViews(){let g;for(;g=this.pluginViews.pop();)g.destroy&&g.destroy()}updatePluginViews(g){if(!g||g.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let et=0;et<this.directPlugins.length;et++){let ot=this.directPlugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}for(let et=0;et<this.state.plugins.length;et++){let ot=this.state.plugins[et];ot.spec.view&&this.pluginViews.push(ot.spec.view(this))}}else for(let et=0;et<this.pluginViews.length;et++){let ot=this.pluginViews[et];ot.update&&ot.update(this,g)}}updateDraggedNode(g,et){let ot=g.node,ut=-1;if(this.state.doc.nodeAt(ot.from)==ot.node)ut=ot.from;else{let ct=ot.from+(this.state.doc.content.size-et.doc.content.size);(ct>0&&this.state.doc.nodeAt(ct))==ot.node&&(ut=ct)}this.dragging=new Dragging(g.slice,g.move,ut<0?void 0:NodeSelection.create(this.state.doc,ut))}someProp(g,et){let ot=this._props&&this._props[g],ut;if(ot!=null&&(ut=et?et(ot):ot))return ut;for(let dt=0;dt<this.directPlugins.length;dt++){let ft=this.directPlugins[dt].props[g];if(ft!=null&&(ut=et?et(ft):ft))return ut}let ct=this.state.plugins;if(ct)for(let dt=0;dt<ct.length;dt++){let ft=ct[dt].props[g];if(ft!=null&&(ut=et?et(ft):ft))return ut}}hasFocus(){if(ie$1){let g=this.root.activeElement;if(g==this.dom)return!0;if(!g||!this.dom.contains(g))return!1;for(;g&&this.dom!=g&&this.dom.contains(g);){if(g.contentEditable=="false")return!1;g=g.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let g=this._root;if(g==null){for(let et=this.dom.parentNode;et;et=et.parentNode)if(et.nodeType==9||et.nodeType==11&&et.host)return et.getSelection||(Object.getPrototypeOf(et).getSelection=()=>et.ownerDocument.getSelection()),this._root=et}return g||document}updateRoot(){this._root=null}posAtCoords(g){return posAtCoords(this,g)}coordsAtPos(g,et=1){return coordsAtPos(this,g,et)}domAtPos(g,et=0){return this.docView.domFromPos(g,et)}nodeDOM(g){let et=this.docView.descAt(g);return et?et.nodeDOM:null}posAtDOM(g,et,ot=-1){let ut=this.docView.posFromDOM(g,et,ot);if(ut==null)throw new RangeError("DOM position not inside the editor");return ut}endOfTextblock(g,et){return endOfTextblock(this,et||this.state,g)}pasteHTML(g,et){return doPaste(this,"",g,!1,et||new ClipboardEvent("paste"))}pasteText(g,et){return doPaste(this,g,null,!0,et||new ClipboardEvent("paste"))}serializeForClipboard(g){return serializeForClipboard(this,g)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(g){return dispatchEvent(this,g)}domSelectionRange(){let g=this.domSelection();return g?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,g)||g:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(it){let g=this._props.dispatchTransaction;g?g.call(this,it):this.updateState(this.state.apply(it))};function computeDocDeco(it){let g=Object.create(null);return g.class="ProseMirror",g.contenteditable=String(it.editable),it.someProp("attributes",et=>{if(typeof et=="function"&&(et=et(it.state)),et)for(let ot in et)ot=="class"?g.class+=" "+et[ot]:ot=="style"?g.style=(g.style?g.style+";":"")+et[ot]:!g[ot]&&ot!="contenteditable"&&ot!="nodeName"&&(g[ot]=String(et[ot]))}),g.translate||(g.translate="no"),[Decoration.node(0,it.state.doc.content.size,g)]}function updateCursorWrapper(it){if(it.markCursor){let g=document.createElement("img");g.className="ProseMirror-separator",g.setAttribute("mark-placeholder","true"),g.setAttribute("alt",""),it.cursorWrapper={dom:g,deco:Decoration.widget(it.state.selection.from,g,{raw:!0,marks:it.markCursor})}}else it.cursorWrapper=null}function getEditable(it){return!it.someProp("editable",g=>g(it.state)===!1)}function selectionContextChanged(it,g){let et=Math.min(it.$anchor.sharedDepth(it.head),g.$anchor.sharedDepth(g.head));return it.$anchor.start(et)!=g.$anchor.start(et)}function buildNodeViews(it){let g=Object.create(null);function et(ot){for(let ut in ot)Object.prototype.hasOwnProperty.call(g,ut)||(g[ut]=ot[ut])}return it.someProp("nodeViews",et),it.someProp("markViews",et),g}function changedNodeViews(it,g){let et=0,ot=0;for(let ut in it){if(it[ut]!=g[ut])return!0;et++}for(let ut in g)ot++;return et!=ot}function checkStateComponent(it){if(it.spec.state||it.spec.filterTransaction||it.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$2=0;i$2<10;i$2++)base[48+i$2]=base[96+i$2]=String(i$2);for(var i$2=1;i$2<=24;i$2++)base[i$2+111]="F"+i$2;for(var i$2=65;i$2<=90;i$2++)base[i$2]=String.fromCharCode(i$2+32),shift[i$2]=String.fromCharCode(i$2);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(it){var g=mac$1&&it.metaKey&&it.shiftKey&&!it.ctrlKey&&!it.altKey||ie&&it.shiftKey&&it.key&&it.key.length==1||it.key=="Unidentified",et=!g&&it.key||(it.shiftKey?shift:base)[it.keyCode]||it.key||"Unidentified";return et=="Esc"&&(et="Escape"),et=="Del"&&(et="Delete"),et=="Left"&&(et="ArrowLeft"),et=="Up"&&(et="ArrowUp"),et=="Right"&&(et="ArrowRight"),et=="Down"&&(et="ArrowDown"),et}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(it){let g=it.split(/-(?!$)/),et=g[g.length-1];et=="Space"&&(et=" ");let ot,ut,ct,dt;for(let ft=0;ft<g.length-1;ft++){let St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ut=!0;else if(/^s(hift)?$/i.test(St))ct=!0;else if(/^mod$/i.test(St))mac?dt=!0:ut=!0;else throw new Error("Unrecognized modifier name: "+St)}return ot&&(et="Alt-"+et),ut&&(et="Ctrl-"+et),dt&&(et="Meta-"+et),ct&&(et="Shift-"+et),et}function normalize(it){let g=Object.create(null);for(let et in it)g[normalizeKeyName$1(et)]=it[et];return g}function modifiers(it,g,et=!0){return g.altKey&&(it="Alt-"+it),g.ctrlKey&&(it="Ctrl-"+it),g.metaKey&&(it="Meta-"+it),et&&g.shiftKey&&(it="Shift-"+it),it}function keymap(it){return new Plugin({props:{handleKeyDown:keydownHandler(it)}})}function keydownHandler(it){let g=normalize(it);return function(et,ot){let ut=keyName(ot),ct,dt=g[modifiers(ut,ot)];if(dt&&dt(et.state,et.dispatch,et))return!0;if(ut.length==1&&ut!=" "){if(ot.shiftKey){let ft=g[modifiers(ut,ot,!1)];if(ft&&ft(et.state,et.dispatch,et))return!0}if((ot.altKey||ot.metaKey||ot.ctrlKey)&&!(windows&&ot.ctrlKey&&ot.altKey)&&(ct=base[ot.keyCode])&&ct!=ut){let ft=g[modifiers(ct,ot)];if(ft&&ft(et.state,et.dispatch,et))return!0}}return!1}}var __defProp$2=Object.defineProperty,__export$1=(it,g)=>{for(var et in g)__defProp$2(it,et,{get:g[et],enumerable:!0})};function createChainableState(it){const{state:g,transaction:et}=it;let{selection:ot}=et,{doc:ut}=et,{storedMarks:ct}=et;return{...g,apply:g.apply.bind(g),applyTransaction:g.applyTransaction.bind(g),plugins:g.plugins,schema:g.schema,reconfigure:g.reconfigure.bind(g),toJSON:g.toJSON.bind(g),get storedMarks(){return ct},get selection(){return ot},get doc(){return ut},get tr(){return ot=et.selection,ut=et.doc,ct=et.storedMarks,et}}}var CommandManager$1=class{constructor(g){this.editor=g.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=g.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:g,editor:et,state:ot}=this,{view:ut}=et,{tr:ct}=ot,dt=this.buildProps(ct);return Object.fromEntries(Object.entries(g).map(([ft,St])=>[ft,(...Tt)=>{const Rt=St(...Tt)(dt);return!ct.getMeta("preventDispatch")&&!this.hasCustomState&&ut.dispatch(ct),Rt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(g,et=!0){const{rawCommands:ot,editor:ut,state:ct}=this,{view:dt}=ut,ft=[],St=!!g,kt=g||ct.tr,Tt=()=>(!St&&et&&!kt.getMeta("preventDispatch")&&!this.hasCustomState&&dt.dispatch(kt),ft.every(Ft=>Ft===!0)),Rt={...Object.fromEntries(Object.entries(ot).map(([Ft,jt])=>[Ft,(...zt)=>{const Ht=this.buildProps(kt,et),Ut=jt(...zt)(Ht);return ft.push(Ut),Rt}])),run:Tt};return Rt}createCan(g){const{rawCommands:et,state:ot}=this,ut=!1,ct=g||ot.tr,dt=this.buildProps(ct,ut);return{...Object.fromEntries(Object.entries(et).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)({...dt,dispatch:void 0})])),chain:()=>this.createChain(ct,ut)}}buildProps(g,et=!0){const{rawCommands:ot,editor:ut,state:ct}=this,{view:dt}=ut,ft={tr:g,editor:ut,view:dt,state:createChainableState({state:ct,transaction:g}),dispatch:et?()=>{}:void 0,chain:()=>this.createChain(g,et),can:()=>this.createCan(g),get commands(){return Object.fromEntries(Object.entries(ot).map(([St,kt])=>[St,(...Tt)=>kt(...Tt)(ft)]))}};return ft}},commands_exports={};__export$1(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:it,view:g})=>(requestAnimationFrame(()=>{var et;it.isDestroyed||(g.dom.blur(),(et=window==null?void 0:window.getSelection())==null||et.removeAllRanges())}),!0),clearContent=(it=!0)=>({commands:g})=>g.setContent("",{emitUpdate:it}),clearNodes=()=>({state:it,tr:g,dispatch:et})=>{const{selection:ot}=g,{ranges:ut}=ot;return et&&ut.forEach(({$from:ct,$to:dt})=>{it.doc.nodesBetween(ct.pos,dt.pos,(ft,St)=>{if(ft.type.isText)return;const{doc:kt,mapping:Tt}=g,Rt=kt.resolve(Tt.map(St)),Ft=kt.resolve(Tt.map(St+ft.nodeSize)),jt=Rt.blockRange(Ft);if(!jt)return;const Bt=liftTarget(jt);if(ft.type.isTextblock){const{defaultType:zt}=Rt.parent.contentMatchAt(Rt.index());g.setNodeMarkup(jt.start,zt)}(Bt||Bt===0)&&g.lift(jt,Bt)})}),!0},command=it=>g=>it(g),createParagraphNear=()=>({state:it,dispatch:g})=>createParagraphNear$1(it,g),cut=(it,g)=>({editor:et,tr:ot})=>{const{state:ut}=et,ct=ut.doc.slice(it.from,it.to);ot.deleteRange(it.from,it.to);const dt=ot.mapping.map(g);return ot.insert(dt,ct.content),ot.setSelection(new TextSelection(ot.doc.resolve(Math.max(dt-1,0)))),!0},deleteCurrentNode=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,ot=et.$anchor.node();if(ot.content.size>0)return!1;const ut=it.selection.$anchor;for(let ct=ut.depth;ct>0;ct-=1)if(ut.node(ct).type===ot.type){if(g){const ft=ut.before(ct),St=ut.after(ct);it.delete(ft,St).scrollIntoView()}return!0}return!1};function getNodeType(it,g){if(typeof it=="string"){if(!g.nodes[it])throw Error(`There is no node type named '${it}'. Maybe you forgot to add the extension?`);return g.nodes[it]}return it}var deleteNode=it=>({tr:g,state:et,dispatch:ot})=>{const ut=getNodeType(it,et.schema),ct=g.selection.$anchor;for(let dt=ct.depth;dt>0;dt-=1)if(ct.node(dt).type===ut){if(ot){const St=ct.before(dt),kt=ct.after(dt);g.delete(St,kt).scrollIntoView()}return!0}return!1},deleteRange=it=>({tr:g,dispatch:et})=>{const{from:ot,to:ut}=it;return et&&g.delete(ot,ut),!0},deleteSelection=()=>({state:it,dispatch:g})=>deleteSelection$1(it,g),enter=()=>({commands:it})=>it.keyboardShortcut("Enter"),exitCode=()=>({state:it,dispatch:g})=>exitCode$1(it,g);function isRegExp(it){return Object.prototype.toString.call(it)==="[object RegExp]"}function objectIncludes(it,g,et={strict:!0}){const ot=Object.keys(g);return ot.length?ot.every(ut=>et.strict?g[ut]===it[ut]:isRegExp(g[ut])?g[ut].test(it[ut]):g[ut]===it[ut]):!0}function findMarkInSet(it,g,et={}){return it.find(ot=>ot.type===g&&objectIncludes(Object.fromEntries(Object.keys(et).map(ut=>[ut,ot.attrs[ut]])),et))}function isMarkInSet(it,g,et={}){return!!findMarkInSet(it,g,et)}function getMarkRange(it,g,et){var ot;if(!it||!g)return;let ut=it.parent.childAfter(it.parentOffset);if((!ut.node||!ut.node.marks.some(Tt=>Tt.type===g))&&(ut=it.parent.childBefore(it.parentOffset)),!ut.node||!ut.node.marks.some(Tt=>Tt.type===g)||(et=et||((ot=ut.node.marks[0])==null?void 0:ot.attrs),!findMarkInSet([...ut.node.marks],g,et)))return;let dt=ut.index,ft=it.start()+ut.offset,St=dt+1,kt=ft+ut.node.nodeSize;for(;dt>0&&isMarkInSet([...it.parent.child(dt-1).marks],g,et);)dt-=1,ft-=it.parent.child(dt).nodeSize;for(;St<it.parent.childCount&&isMarkInSet([...it.parent.child(St).marks],g,et);)kt+=it.parent.child(St).nodeSize,St+=1;return{from:ft,to:kt}}function getMarkType(it,g){if(typeof it=="string"){if(!g.marks[it])throw Error(`There is no mark type named '${it}'. Maybe you forgot to add the extension?`);return g.marks[it]}return it}var extendMarkRange=(it,g={})=>({tr:et,state:ot,dispatch:ut})=>{const ct=getMarkType(it,ot.schema),{doc:dt,selection:ft}=et,{$from:St,from:kt,to:Tt}=ft;if(ut){const Rt=getMarkRange(St,ct,g);if(Rt&&Rt.from<=kt&&Rt.to>=Tt){const Ft=TextSelection.create(dt,Rt.from,Rt.to);et.setSelection(Ft)}}return!0},first=it=>g=>{const et=typeof it=="function"?it(g):it;for(let ot=0;ot<et.length;ot+=1)if(et[ot](g))return!0;return!1};function isTextSelection(it){return it instanceof TextSelection}function minMax(it=0,g=0,et=0){return Math.min(Math.max(it,g),et)}function resolveFocusPosition(it,g=null){if(!g)return null;const et=Selection.atStart(it),ot=Selection.atEnd(it);if(g==="start"||g===!0)return et;if(g==="end")return ot;const ut=et.from,ct=ot.to;return g==="all"?TextSelection.create(it,minMax(0,ut,ct),minMax(it.content.size,ut,ct)):TextSelection.create(it,minMax(g,ut,ct),minMax(g,ut,ct))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var focus=(it=null,g={})=>({editor:et,view:ot,tr:ut,dispatch:ct})=>{g={scrollIntoView:!0,...g};const dt=()=>{(isiOS()||isAndroid())&&ot.dom.focus(),requestAnimationFrame(()=>{et.isDestroyed||(ot.focus(),g!=null&&g.scrollIntoView&&et.commands.scrollIntoView())})};if(ot.hasFocus()&&it===null||it===!1)return!0;if(ct&&it===null&&!isTextSelection(et.state.selection))return dt(),!0;const ft=resolveFocusPosition(ut.doc,it)||et.state.selection,St=et.state.selection.eq(ft);return ct&&(St||ut.setSelection(ft),St&&ut.storedMarks&&ut.setStoredMarks(ut.storedMarks),dt()),!0},forEach=(it,g)=>et=>it.every((ot,ut)=>g(ot,{...et,index:ut})),insertContent=(it,g)=>({tr:et,commands:ot})=>ot.insertContentAt({from:et.selection.from,to:et.selection.to},it,g),removeWhitespaces=it=>{const g=it.childNodes;for(let et=g.length-1;et>=0;et-=1){const ot=g[et];ot.nodeType===3&&ot.nodeValue&&/^(\n\s\s|\n)$/.test(ot.nodeValue)?it.removeChild(ot):ot.nodeType===1&&removeWhitespaces(ot)}return it};function elementFromString(it){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const g=`<body>${it}</body>`,et=new window.DOMParser().parseFromString(g,"text/html").body;return removeWhitespaces(et)}function createNodeFromContent(it,g,et){if(it instanceof Node$2||it instanceof Fragment)return it;et={slice:!0,parseOptions:{},...et};const ot=typeof it=="object"&&it!==null,ut=typeof it=="string";if(ot)try{if(Array.isArray(it)&&it.length>0)return Fragment.fromArray(it.map(ft=>g.nodeFromJSON(ft)));const dt=g.nodeFromJSON(it);return et.errorOnInvalidContent&&dt.check(),dt}catch(ct){if(et.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:ct});return console.warn("[tiptap warn]: Invalid content.","Passed value:",it,"Error:",ct),createNodeFromContent("",g,et)}if(ut){if(et.errorOnInvalidContent){let dt=!1,ft="";const St=new Schema({topNode:g.spec.topNode,marks:g.spec.marks,nodes:g.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:kt=>(dt=!0,ft=typeof kt=="string"?kt:kt.outerHTML,null)}]}})});if(et.slice?DOMParser.fromSchema(St).parseSlice(elementFromString(it),et.parseOptions):DOMParser.fromSchema(St).parse(elementFromString(it),et.parseOptions),et.errorOnInvalidContent&&dt)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${ft}`)})}const ct=DOMParser.fromSchema(g);return et.slice?ct.parseSlice(elementFromString(it),et.parseOptions).content:ct.parse(elementFromString(it),et.parseOptions)}return createNodeFromContent("",g,et)}function selectionToInsertionEnd(it,g,et){const ot=it.steps.length-1;if(ot<g)return;const ut=it.steps[ot];if(!(ut instanceof ReplaceStep||ut instanceof ReplaceAroundStep))return;const ct=it.mapping.maps[ot];let dt=0;ct.forEach((ft,St,kt,Tt)=>{dt===0&&(dt=Tt)}),it.setSelection(Selection.near(it.doc.resolve(dt),et))}var isFragment=it=>!("type"in it),insertContentAt=(it,g,et)=>({tr:ot,dispatch:ut,editor:ct})=>{var dt;if(ut){et={parseOptions:ct.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...et};let ft;const St=Ht=>{ct.emit("contentError",{editor:ct,error:Ht,disableCollaboration:()=>{"collaboration"in ct.storage&&typeof ct.storage.collaboration=="object"&&ct.storage.collaboration&&(ct.storage.collaboration.isDisabled=!0)}})},kt={preserveWhitespace:"full",...et.parseOptions};if(!et.errorOnInvalidContent&&!ct.options.enableContentCheck&&ct.options.emitContentError)try{createNodeFromContent(g,ct.schema,{parseOptions:kt,errorOnInvalidContent:!0})}catch(Ht){St(Ht)}try{ft=createNodeFromContent(g,ct.schema,{parseOptions:kt,errorOnInvalidContent:(dt=et.errorOnInvalidContent)!=null?dt:ct.options.enableContentCheck})}catch(Ht){return St(Ht),!1}let{from:Tt,to:Rt}=typeof it=="number"?{from:it,to:it}:{from:it.from,to:it.to},Ft=!0,jt=!0;if((isFragment(ft)?ft:[ft]).forEach(Ht=>{Ht.check(),Ft=Ft?Ht.isText&&Ht.marks.length===0:!1,jt=jt?Ht.isBlock:!1}),Tt===Rt&&jt){const{parent:Ht}=ot.doc.resolve(Tt);Ht.isTextblock&&!Ht.type.spec.code&&!Ht.childCount&&(Tt-=1,Rt+=1)}let zt;if(Ft){if(Array.isArray(g))zt=g.map(Ht=>Ht.text||"").join("");else if(g instanceof Fragment){let Ht="";g.forEach(Ut=>{Ut.text&&(Ht+=Ut.text)}),zt=Ht}else typeof g=="object"&&g&&g.text?zt=g.text:zt=g;ot.insertText(zt,Tt,Rt)}else{zt=ft;const Ht=ot.doc.resolve(Tt),Ut=Ht.node(),Kt=Ht.parentOffset===0,Yt=Ut.isText||Ut.isTextblock,er=Ut.content.size>0;Kt&&Yt&&er&&(Tt=Math.max(0,Tt-1)),ot.replaceWith(Tt,Rt,zt)}et.updateSelection&&selectionToInsertionEnd(ot,ot.steps.length-1,-1),et.applyInputRules&&ot.setMeta("applyInputRules",{from:Tt,text:zt}),et.applyPasteRules&&ot.setMeta("applyPasteRules",{from:Tt,text:zt})}return!0},joinUp=()=>({state:it,dispatch:g})=>joinUp$1(it,g),joinDown=()=>({state:it,dispatch:g})=>joinDown$1(it,g),joinBackward=()=>({state:it,dispatch:g})=>joinBackward$1(it,g),joinForward=()=>({state:it,dispatch:g})=>joinForward$1(it,g),joinItemBackward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,-1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinItemForward=()=>({state:it,dispatch:g,tr:et})=>{try{const ot=joinPoint(it.doc,it.selection.$from.pos,1);return ot==null?!1:(et.join(ot,2),g&&g(et),!0)}catch{return!1}},joinTextblockBackward=()=>({state:it,dispatch:g})=>joinTextblockBackward$1(it,g),joinTextblockForward=()=>({state:it,dispatch:g})=>joinTextblockForward$1(it,g);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(it){const g=it.split(/-(?!$)/);let et=g[g.length-1];et==="Space"&&(et=" ");let ot,ut,ct,dt;for(let ft=0;ft<g.length-1;ft+=1){const St=g[ft];if(/^(cmd|meta|m)$/i.test(St))dt=!0;else if(/^a(lt)?$/i.test(St))ot=!0;else if(/^(c|ctrl|control)$/i.test(St))ut=!0;else if(/^s(hift)?$/i.test(St))ct=!0;else if(/^mod$/i.test(St))isiOS()||isMacOS()?dt=!0:ut=!0;else throw new Error(`Unrecognized modifier name: ${St}`)}return ot&&(et=`Alt-${et}`),ut&&(et=`Ctrl-${et}`),dt&&(et=`Meta-${et}`),ct&&(et=`Shift-${et}`),et}var keyboardShortcut=it=>({editor:g,view:et,tr:ot,dispatch:ut})=>{const ct=normalizeKeyName(it).split(/-(?!$)/),dt=ct.find(kt=>!["Alt","Ctrl","Meta","Shift"].includes(kt)),ft=new KeyboardEvent("keydown",{key:dt==="Space"?" ":dt,altKey:ct.includes("Alt"),ctrlKey:ct.includes("Ctrl"),metaKey:ct.includes("Meta"),shiftKey:ct.includes("Shift"),bubbles:!0,cancelable:!0}),St=g.captureTransaction(()=>{et.someProp("handleKeyDown",kt=>kt(et,ft))});return St==null||St.steps.forEach(kt=>{const Tt=kt.map(ot.mapping);Tt&&ut&&ot.maybeStep(Tt)}),!0};function isNodeActive(it,g,et={}){const{from:ot,to:ut,empty:ct}=it.selection,dt=g?getNodeType(g,it.schema):null,ft=[];it.doc.nodesBetween(ot,ut,(Rt,Ft)=>{if(Rt.isText)return;const jt=Math.max(ot,Ft),Bt=Math.min(ut,Ft+Rt.nodeSize);ft.push({node:Rt,from:jt,to:Bt})});const St=ut-ot,kt=ft.filter(Rt=>dt?dt.name===Rt.node.type.name:!0).filter(Rt=>objectIncludes(Rt.node.attrs,et,{strict:!1}));return ct?!!kt.length:kt.reduce((Rt,Ft)=>Rt+Ft.to-Ft.from,0)>=St}var lift=(it,g={})=>({state:et,dispatch:ot})=>{const ut=getNodeType(it,et.schema);return isNodeActive(et,ut,g)?lift$1(et,ot):!1},liftEmptyBlock=()=>({state:it,dispatch:g})=>liftEmptyBlock$1(it,g),liftListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return liftListItem$1(ot)(g,et)},newlineInCode=()=>({state:it,dispatch:g})=>newlineInCode$1(it,g);function getSchemaTypeNameByName(it,g){return g.nodes[it]?"node":g.marks[it]?"mark":null}function deleteProps(it,g){const et=typeof g=="string"?[g]:g;return Object.keys(it).reduce((ot,ut)=>(et.includes(ut)||(ot[ut]=it[ut]),ot),{})}var resetAttributes=(it,g)=>({tr:et,state:ot,dispatch:ut})=>{let ct=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ct=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ut&&et.selection.ranges.forEach(St=>{ot.doc.nodesBetween(St.$from.pos,St.$to.pos,(kt,Tt)=>{ct&&ct===kt.type&&et.setNodeMarkup(Tt,void 0,deleteProps(kt.attrs,g)),dt&&kt.marks.length&&kt.marks.forEach(Rt=>{dt===Rt.type&&et.addMark(Tt,Tt+kt.nodeSize,dt.create(deleteProps(Rt.attrs,g)))})})}),!0):!1},scrollIntoView=()=>({tr:it,dispatch:g})=>(g&&it.scrollIntoView(),!0),selectAll=()=>({tr:it,dispatch:g})=>{if(g){const et=new AllSelection(it.doc);it.setSelection(et)}return!0},selectNodeBackward=()=>({state:it,dispatch:g})=>selectNodeBackward$1(it,g),selectNodeForward=()=>({state:it,dispatch:g})=>selectNodeForward$1(it,g),selectParentNode=()=>({state:it,dispatch:g})=>selectParentNode$1(it,g),selectTextblockEnd=()=>({state:it,dispatch:g})=>selectTextblockEnd$1(it,g),selectTextblockStart=()=>({state:it,dispatch:g})=>selectTextblockStart$1(it,g);function createDocument(it,g,et={},ot={}){return createNodeFromContent(it,g,{slice:!1,parseOptions:et,errorOnInvalidContent:ot.errorOnInvalidContent})}var setContent=(it,{errorOnInvalidContent:g,emitUpdate:et=!0,parseOptions:ot={}}={})=>({editor:ut,tr:ct,dispatch:dt,commands:ft})=>{const{doc:St}=ct;if(ot.preserveWhitespace!=="full"){const kt=createDocument(it,ut.schema,ot,{errorOnInvalidContent:g??ut.options.enableContentCheck});return dt&&ct.replaceWith(0,St.content.size,kt).setMeta("preventUpdate",!et),!0}return dt&&ct.setMeta("preventUpdate",!et),ft.insertContentAt({from:0,to:St.content.size},it,{parseOptions:ot,errorOnInvalidContent:g??ut.options.enableContentCheck})};function getMarkAttributes(it,g){const et=getMarkType(g,it.schema),{from:ot,to:ut,empty:ct}=it.selection,dt=[];ct?(it.storedMarks&&dt.push(...it.storedMarks),dt.push(...it.selection.$head.marks())):it.doc.nodesBetween(ot,ut,St=>{dt.push(...St.marks)});const ft=dt.find(St=>St.type.name===et.name);return ft?{...ft.attrs}:{}}function combineTransactionSteps(it,g){const et=new Transform$1(it);return g.forEach(ot=>{ot.steps.forEach(ut=>{et.step(ut)})}),et}function defaultBlockAt(it){for(let g=0;g<it.edgeCount;g+=1){const{type:et}=it.edge(g);if(et.isTextblock&&!et.hasRequiredAttrs())return et}return null}function findChildrenInRange(it,g,et){const ot=[];return it.nodesBetween(g.from,g.to,(ut,ct)=>{et(ut)&&ot.push({node:ut,pos:ct})}),ot}function findParentNodeClosestToPos(it,g){for(let et=it.depth;et>0;et-=1){const ot=it.node(et);if(g(ot))return{pos:et>0?it.before(et):0,start:it.start(et),depth:et,node:ot}}}function findParentNode(it){return g=>findParentNodeClosestToPos(g.$from,it)}function getExtensionField(it,g,et){return it.config[g]===void 0&&it.parent?getExtensionField(it.parent,g,et):typeof it.config[g]=="function"?it.config[g].bind({...et,parent:it.parent?getExtensionField(it.parent,g,et):null}):it.config[g]}function flattenExtensions(it){return it.map(g=>{const et={name:g.name,options:g.options,storage:g.storage},ot=getExtensionField(g,"addExtensions",et);return ot?[g,...flattenExtensions(ot())]:g}).flat(10)}function getHTMLFromFragment(it,g){const et=DOMSerializer.fromSchema(g).serializeFragment(it),ut=document.implementation.createHTMLDocument().createElement("div");return ut.appendChild(et),ut.innerHTML}function isFunction(it){return typeof it=="function"}function callOrReturn(it,g=void 0,...et){return isFunction(it)?g?it.bind(g)(...et):it(...et):it}function isEmptyObject(it={}){return Object.keys(it).length===0&&it.constructor===Object}function splitExtensions(it){const g=it.filter(ut=>ut.type==="extension"),et=it.filter(ut=>ut.type==="node"),ot=it.filter(ut=>ut.type==="mark");return{baseExtensions:g,nodeExtensions:et,markExtensions:ot}}function getAttributesFromExtensions(it){const g=[],{nodeExtensions:et,markExtensions:ot}=splitExtensions(it),ut=[...et,...ot],ct={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return it.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage,extensions:ut},St=getExtensionField(dt,"addGlobalAttributes",ft);if(!St)return;St().forEach(Tt=>{Tt.types.forEach(Rt=>{Object.entries(Tt.attributes).forEach(([Ft,jt])=>{g.push({type:Rt,name:Ft,attribute:{...ct,...jt}})})})})}),ut.forEach(dt=>{const ft={name:dt.name,options:dt.options,storage:dt.storage},St=getExtensionField(dt,"addAttributes",ft);if(!St)return;const kt=St();Object.entries(kt).forEach(([Tt,Rt])=>{const Ft={...ct,...Rt};typeof(Ft==null?void 0:Ft.default)=="function"&&(Ft.default=Ft.default()),Ft!=null&&Ft.isRequired&&(Ft==null?void 0:Ft.default)===void 0&&delete Ft.default,g.push({type:dt.name,name:Tt,attribute:Ft})})}),g}function mergeAttributes(...it){return it.filter(g=>!!g).reduce((g,et)=>{const ot={...g};return Object.entries(et).forEach(([ut,ct])=>{if(!ot[ut]){ot[ut]=ct;return}if(ut==="class"){const ft=ct?String(ct).split(" "):[],St=ot[ut]?ot[ut].split(" "):[],kt=ft.filter(Tt=>!St.includes(Tt));ot[ut]=[...St,...kt].join(" ")}else if(ut==="style"){const ft=ct?ct.split(";").map(Tt=>Tt.trim()).filter(Boolean):[],St=ot[ut]?ot[ut].split(";").map(Tt=>Tt.trim()).filter(Boolean):[],kt=new Map;St.forEach(Tt=>{const[Rt,Ft]=Tt.split(":").map(jt=>jt.trim());kt.set(Rt,Ft)}),ft.forEach(Tt=>{const[Rt,Ft]=Tt.split(":").map(jt=>jt.trim());kt.set(Rt,Ft)}),ot[ut]=Array.from(kt.entries()).map(([Tt,Rt])=>`${Tt}: ${Rt}`).join("; ")}else ot[ut]=ct}),ot},{})}function getRenderedAttributes(it,g){return g.filter(et=>et.type===it.type.name).filter(et=>et.attribute.rendered).map(et=>et.attribute.renderHTML?et.attribute.renderHTML(it.attrs)||{}:{[et.name]:it.attrs[et.name]}).reduce((et,ot)=>mergeAttributes(et,ot),{})}function fromString(it){return typeof it!="string"?it:it.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(it):it==="true"?!0:it==="false"?!1:it}function injectExtensionAttributesToParseRule(it,g){return"style"in it?it:{...it,getAttrs:et=>{const ot=it.getAttrs?it.getAttrs(et):it.attrs;if(ot===!1)return!1;const ut=g.reduce((ct,dt)=>{const ft=dt.attribute.parseHTML?dt.attribute.parseHTML(et):fromString(et.getAttribute(dt.name));return ft==null?ct:{...ct,[dt.name]:ft}},{});return{...ot,...ut}}}}function cleanUpSchemaItem(it){return Object.fromEntries(Object.entries(it).filter(([g,et])=>g==="attrs"&&isEmptyObject(et)?!1:et!=null))}function getSchemaByResolvedExtensions(it,g){var et;const ot=getAttributesFromExtensions(it),{nodeExtensions:ut,markExtensions:ct}=splitExtensions(it),dt=(et=ut.find(kt=>getExtensionField(kt,"topNode")))==null?void 0:et.name,ft=Object.fromEntries(ut.map(kt=>{const Tt=ot.filter(Ut=>Ut.type===kt.name),Rt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},Ft=it.reduce((Ut,Kt)=>{const Yt=getExtensionField(Kt,"extendNodeSchema",Rt);return{...Ut,...Yt?Yt(kt):{}}},{}),jt=cleanUpSchemaItem({...Ft,content:callOrReturn(getExtensionField(kt,"content",Rt)),marks:callOrReturn(getExtensionField(kt,"marks",Rt)),group:callOrReturn(getExtensionField(kt,"group",Rt)),inline:callOrReturn(getExtensionField(kt,"inline",Rt)),atom:callOrReturn(getExtensionField(kt,"atom",Rt)),selectable:callOrReturn(getExtensionField(kt,"selectable",Rt)),draggable:callOrReturn(getExtensionField(kt,"draggable",Rt)),code:callOrReturn(getExtensionField(kt,"code",Rt)),whitespace:callOrReturn(getExtensionField(kt,"whitespace",Rt)),linebreakReplacement:callOrReturn(getExtensionField(kt,"linebreakReplacement",Rt)),defining:callOrReturn(getExtensionField(kt,"defining",Rt)),isolating:callOrReturn(getExtensionField(kt,"isolating",Rt)),attrs:Object.fromEntries(Tt.map(Ut=>{var Kt,Yt;return[Ut.name,{default:(Kt=Ut==null?void 0:Ut.attribute)==null?void 0:Kt.default,validate:(Yt=Ut==null?void 0:Ut.attribute)==null?void 0:Yt.validate}]}))}),Bt=callOrReturn(getExtensionField(kt,"parseHTML",Rt));Bt&&(jt.parseDOM=Bt.map(Ut=>injectExtensionAttributesToParseRule(Ut,Tt)));const zt=getExtensionField(kt,"renderHTML",Rt);zt&&(jt.toDOM=Ut=>zt({node:Ut,HTMLAttributes:getRenderedAttributes(Ut,Tt)}));const Ht=getExtensionField(kt,"renderText",Rt);return Ht&&(jt.toText=Ht),[kt.name,jt]})),St=Object.fromEntries(ct.map(kt=>{const Tt=ot.filter(Ht=>Ht.type===kt.name),Rt={name:kt.name,options:kt.options,storage:kt.storage,editor:g},Ft=it.reduce((Ht,Ut)=>{const Kt=getExtensionField(Ut,"extendMarkSchema",Rt);return{...Ht,...Kt?Kt(kt):{}}},{}),jt=cleanUpSchemaItem({...Ft,inclusive:callOrReturn(getExtensionField(kt,"inclusive",Rt)),excludes:callOrReturn(getExtensionField(kt,"excludes",Rt)),group:callOrReturn(getExtensionField(kt,"group",Rt)),spanning:callOrReturn(getExtensionField(kt,"spanning",Rt)),code:callOrReturn(getExtensionField(kt,"code",Rt)),attrs:Object.fromEntries(Tt.map(Ht=>{var Ut,Kt;return[Ht.name,{default:(Ut=Ht==null?void 0:Ht.attribute)==null?void 0:Ut.default,validate:(Kt=Ht==null?void 0:Ht.attribute)==null?void 0:Kt.validate}]}))}),Bt=callOrReturn(getExtensionField(kt,"parseHTML",Rt));Bt&&(jt.parseDOM=Bt.map(Ht=>injectExtensionAttributesToParseRule(Ht,Tt)));const zt=getExtensionField(kt,"renderHTML",Rt);return zt&&(jt.toDOM=Ht=>zt({mark:Ht,HTMLAttributes:getRenderedAttributes(Ht,Tt)})),[kt.name,jt]}));return new Schema({topNode:dt,nodes:ft,marks:St})}function findDuplicates(it){const g=it.filter((et,ot)=>it.indexOf(et)!==ot);return Array.from(new Set(g))}function sortExtensions(it){return it.sort((et,ot)=>{const ut=getExtensionField(et,"priority")||100,ct=getExtensionField(ot,"priority")||100;return ut>ct?-1:ut<ct?1:0})}function resolveExtensions(it){const g=sortExtensions(flattenExtensions(it)),et=findDuplicates(g.map(ot=>ot.name));return et.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${et.map(ot=>`'${ot}'`).join(", ")}]. This can lead to issues.`),g}function getTextBetween(it,g,et){const{from:ot,to:ut}=g,{blockSeparator:ct=`

`,textSerializers:dt={}}=et||{};let ft="";return it.nodesBetween(ot,ut,(St,kt,Tt,Rt)=>{var Ft;St.isBlock&&kt>ot&&(ft+=ct);const jt=dt==null?void 0:dt[St.type.name];if(jt)return Tt&&(ft+=jt({node:St,pos:kt,parent:Tt,index:Rt,range:g})),!1;St.isText&&(ft+=(Ft=St==null?void 0:St.text)==null?void 0:Ft.slice(Math.max(ot,kt)-kt,ut-kt))}),ft}function getText(it,g){const et={from:0,to:it.content.size};return getTextBetween(it,et,g)}function getTextSerializersFromSchema(it){return Object.fromEntries(Object.entries(it.nodes).filter(([,g])=>g.spec.toText).map(([g,et])=>[g,et.spec.toText]))}function getNodeAttributes(it,g){const et=getNodeType(g,it.schema),{from:ot,to:ut}=it.selection,ct=[];it.doc.nodesBetween(ot,ut,ft=>{ct.push(ft)});const dt=ct.reverse().find(ft=>ft.type.name===et.name);return dt?{...dt.attrs}:{}}function getAttributes$1(it,g){const et=getSchemaTypeNameByName(typeof g=="string"?g:g.name,it.schema);return et==="node"?getNodeAttributes(it,g):et==="mark"?getMarkAttributes(it,g):{}}function removeDuplicates(it,g=JSON.stringify){const et={};return it.filter(ot=>{const ut=g(ot);return Object.prototype.hasOwnProperty.call(et,ut)?!1:et[ut]=!0})}function simplifyChangedRanges(it){const g=removeDuplicates(it);return g.length===1?g:g.filter((et,ot)=>!g.filter((ct,dt)=>dt!==ot).some(ct=>et.oldRange.from>=ct.oldRange.from&&et.oldRange.to<=ct.oldRange.to&&et.newRange.from>=ct.newRange.from&&et.newRange.to<=ct.newRange.to))}function getChangedRanges(it){const{mapping:g,steps:et}=it,ot=[];return g.maps.forEach((ut,ct)=>{const dt=[];if(ut.ranges.length)ut.forEach((ft,St)=>{dt.push({from:ft,to:St})});else{const{from:ft,to:St}=et[ct];if(ft===void 0||St===void 0)return;dt.push({from:ft,to:St})}dt.forEach(({from:ft,to:St})=>{const kt=g.slice(ct).map(ft,-1),Tt=g.slice(ct).map(St),Rt=g.invert().map(kt,-1),Ft=g.invert().map(Tt);ot.push({oldRange:{from:Rt,to:Ft},newRange:{from:kt,to:Tt}})})}),simplifyChangedRanges(ot)}function getMarksBetween(it,g,et){const ot=[];return it===g?et.resolve(it).marks().forEach(ut=>{const ct=et.resolve(it),dt=getMarkRange(ct,ut.type);dt&&ot.push({mark:ut,...dt})}):et.nodesBetween(it,g,(ut,ct)=>{!ut||(ut==null?void 0:ut.nodeSize)===void 0||ot.push(...ut.marks.map(dt=>({from:ct,to:ct+ut.nodeSize,mark:dt})))}),ot}var getNodeAtPosition=(it,g,et,ot=20)=>{const ut=it.doc.resolve(et);let ct=ot,dt=null;for(;ct>0&&dt===null;){const ft=ut.node(ct);(ft==null?void 0:ft.type.name)===g?dt=ft:ct-=1}return[dt,ct]};function getSchemaTypeByName(it,g){return g.nodes[it]||g.marks[it]||null}function getSplittedAttributes(it,g,et){return Object.fromEntries(Object.entries(et).filter(([ot])=>{const ut=it.find(ct=>ct.type===g&&ct.name===ot);return ut?ut.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(it,g=500)=>{let et="";const ot=it.parentOffset;return it.parent.nodesBetween(Math.max(0,ot-g),ot,(ut,ct,dt,ft)=>{var St,kt;const Tt=((kt=(St=ut.type.spec).toText)==null?void 0:kt.call(St,{node:ut,pos:ct,parent:dt,index:ft}))||ut.textContent||"%leaf%";et+=ut.isAtom&&!ut.isText?Tt:Tt.slice(0,Math.max(0,ot-ct))}),et};function isMarkActive(it,g,et={}){const{empty:ot,ranges:ut}=it.selection,ct=g?getMarkType(g,it.schema):null;if(ot)return!!(it.storedMarks||it.selection.$from.marks()).filter(Rt=>ct?ct.name===Rt.type.name:!0).find(Rt=>objectIncludes(Rt.attrs,et,{strict:!1}));let dt=0;const ft=[];if(ut.forEach(({$from:Rt,$to:Ft})=>{const jt=Rt.pos,Bt=Ft.pos;it.doc.nodesBetween(jt,Bt,(zt,Ht)=>{if(!zt.isText&&!zt.marks.length)return;const Ut=Math.max(jt,Ht),Kt=Math.min(Bt,Ht+zt.nodeSize),Yt=Kt-Ut;dt+=Yt,ft.push(...zt.marks.map(er=>({mark:er,from:Ut,to:Kt})))})}),dt===0)return!1;const St=ft.filter(Rt=>ct?ct.name===Rt.mark.type.name:!0).filter(Rt=>objectIncludes(Rt.mark.attrs,et,{strict:!1})).reduce((Rt,Ft)=>Rt+Ft.to-Ft.from,0),kt=ft.filter(Rt=>ct?Rt.mark.type!==ct&&Rt.mark.type.excludes(ct):!0).reduce((Rt,Ft)=>Rt+Ft.to-Ft.from,0);return(St>0?St+kt:St)>=dt}function isActive(it,g,et={}){if(!g)return isNodeActive(it,null,et)||isMarkActive(it,null,et);const ot=getSchemaTypeNameByName(g,it.schema);return ot==="node"?isNodeActive(it,g,et):ot==="mark"?isMarkActive(it,g,et):!1}var isAtEndOfNode=(it,g)=>{const{$from:et,$to:ot,$anchor:ut}=it.selection;if(g){const ct=findParentNode(ft=>ft.type.name===g)(it.selection);if(!ct)return!1;const dt=it.doc.resolve(ct.pos+1);return ut.pos+1===dt.end()}return!(ot.parentOffset<ot.parent.nodeSize-2||et.pos!==ot.pos)},isAtStartOfNode=it=>{const{$from:g,$to:et}=it.selection;return!(g.parentOffset>0||g.pos!==et.pos)};function isExtensionRulesEnabled(it,g){return Array.isArray(g)?g.some(et=>(typeof et=="string"?et:et.name)===it.name):g}function isList(it,g){const{nodeExtensions:et}=splitExtensions(g),ot=et.find(dt=>dt.name===it);if(!ot)return!1;const ut={name:ot.name,options:ot.options,storage:ot.storage},ct=callOrReturn(getExtensionField(ot,"group",ut));return typeof ct!="string"?!1:ct.split(" ").includes("list")}function isNodeEmpty(it,{checkChildren:g=!0,ignoreWhitespace:et=!1}={}){var ot;if(et){if(it.type.name==="hardBreak")return!0;if(it.isText)return/^\s*$/m.test((ot=it.text)!=null?ot:"")}if(it.isText)return!it.text;if(it.isAtom||it.isLeaf)return!1;if(it.content.childCount===0)return!0;if(g){let ut=!0;return it.content.forEach(ct=>{ut!==!1&&(isNodeEmpty(ct,{ignoreWhitespace:et,checkChildren:g})||(ut=!1))}),ut}return!1}function isNodeSelection(it){return it instanceof NodeSelection}function canSetMark(it,g,et){var ot;const{selection:ut}=g;let ct=null;if(isTextSelection(ut)&&(ct=ut.$cursor),ct){const ft=(ot=it.storedMarks)!=null?ot:ct.marks();return ct.parent.type.allowsMarkType(et)&&(!!et.isInSet(ft)||!ft.some(kt=>kt.type.excludes(et)))}const{ranges:dt}=ut;return dt.some(({$from:ft,$to:St})=>{let kt=ft.depth===0?it.doc.inlineContent&&it.doc.type.allowsMarkType(et):!1;return it.doc.nodesBetween(ft.pos,St.pos,(Tt,Rt,Ft)=>{if(kt)return!1;if(Tt.isInline){const jt=!Ft||Ft.type.allowsMarkType(et),Bt=!!et.isInSet(Tt.marks)||!Tt.marks.some(zt=>zt.type.excludes(et));kt=jt&&Bt}return!kt}),kt})}var setMark=(it,g={})=>({tr:et,state:ot,dispatch:ut})=>{const{selection:ct}=et,{empty:dt,ranges:ft}=ct,St=getMarkType(it,ot.schema);if(ut)if(dt){const kt=getMarkAttributes(ot,St);et.addStoredMark(St.create({...kt,...g}))}else ft.forEach(kt=>{const Tt=kt.$from.pos,Rt=kt.$to.pos;ot.doc.nodesBetween(Tt,Rt,(Ft,jt)=>{const Bt=Math.max(jt,Tt),zt=Math.min(jt+Ft.nodeSize,Rt);Ft.marks.find(Ut=>Ut.type===St)?Ft.marks.forEach(Ut=>{St===Ut.type&&et.addMark(Bt,zt,St.create({...Ut.attrs,...g}))}):et.addMark(Bt,zt,St.create(g))})});return canSetMark(ot,et,St)},setMeta=(it,g)=>({tr:et})=>(et.setMeta(it,g),!0),setNode=(it,g={})=>({state:et,dispatch:ot,chain:ut})=>{const ct=getNodeType(it,et.schema);let dt;return et.selection.$anchor.sameParent(et.selection.$head)&&(dt=et.selection.$anchor.parent.attrs),ct.isTextblock?ut().command(({commands:ft})=>setBlockType(ct,{...dt,...g})(et)?!0:ft.clearNodes()).command(({state:ft})=>setBlockType(ct,{...dt,...g})(ft,ot)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,ut=minMax(it,0,ot.content.size),ct=NodeSelection.create(ot,ut);g.setSelection(ct)}return!0},setTextSelection=it=>({tr:g,dispatch:et})=>{if(et){const{doc:ot}=g,{from:ut,to:ct}=typeof it=="number"?{from:it,to:it}:it,dt=TextSelection.atStart(ot).from,ft=TextSelection.atEnd(ot).to,St=minMax(ut,dt,ft),kt=minMax(ct,dt,ft),Tt=TextSelection.create(ot,St,kt);g.setSelection(Tt)}return!0},sinkListItem=it=>({state:g,dispatch:et})=>{const ot=getNodeType(it,g.schema);return sinkListItem$1(ot)(g,et)};function ensureMarks(it,g){const et=it.storedMarks||it.selection.$to.parentOffset&&it.selection.$from.marks();if(et){const ot=et.filter(ut=>g==null?void 0:g.includes(ut.type.name));it.tr.ensureMarks(ot)}}var splitBlock=({keepMarks:it=!0}={})=>({tr:g,state:et,dispatch:ot,editor:ut})=>{const{selection:ct,doc:dt}=g,{$from:ft,$to:St}=ct,kt=ut.extensionManager.attributes,Tt=getSplittedAttributes(kt,ft.node().type.name,ft.node().attrs);if(ct instanceof NodeSelection&&ct.node.isBlock)return!ft.parentOffset||!canSplit(dt,ft.pos)?!1:(ot&&(it&&ensureMarks(et,ut.extensionManager.splittableMarks),g.split(ft.pos).scrollIntoView()),!0);if(!ft.parent.isBlock)return!1;const Rt=St.parentOffset===St.parent.content.size,Ft=ft.depth===0?void 0:defaultBlockAt(ft.node(-1).contentMatchAt(ft.indexAfter(-1)));let jt=Rt&&Ft?[{type:Ft,attrs:Tt}]:void 0,Bt=canSplit(g.doc,g.mapping.map(ft.pos),1,jt);if(!jt&&!Bt&&canSplit(g.doc,g.mapping.map(ft.pos),1,Ft?[{type:Ft}]:void 0)&&(Bt=!0,jt=Ft?[{type:Ft,attrs:Tt}]:void 0),ot){if(Bt&&(ct instanceof TextSelection&&g.deleteSelection(),g.split(g.mapping.map(ft.pos),1,jt),Ft&&!Rt&&!ft.parentOffset&&ft.parent.type!==Ft)){const zt=g.mapping.map(ft.before()),Ht=g.doc.resolve(zt);ft.node(-1).canReplaceWith(Ht.index(),Ht.index()+1,Ft)&&g.setNodeMarkup(g.mapping.map(ft.before()),Ft)}it&&ensureMarks(et,ut.extensionManager.splittableMarks),g.scrollIntoView()}return Bt},splitListItem=(it,g={})=>({tr:et,state:ot,dispatch:ut,editor:ct})=>{var dt;const ft=getNodeType(it,ot.schema),{$from:St,$to:kt}=ot.selection,Tt=ot.selection.node;if(Tt&&Tt.isBlock||St.depth<2||!St.sameParent(kt))return!1;const Rt=St.node(-1);if(Rt.type!==ft)return!1;const Ft=ct.extensionManager.attributes;if(St.parent.content.size===0&&St.node(-1).childCount===St.indexAfter(-1)){if(St.depth===2||St.node(-3).type!==ft||St.index(-2)!==St.node(-2).childCount-1)return!1;if(ut){let Ut=Fragment.empty;const Kt=St.index(-1)?1:St.index(-2)?2:3;for(let cr=St.depth-Kt;cr>=St.depth-3;cr-=1)Ut=Fragment.from(St.node(cr).copy(Ut));const Yt=St.indexAfter(-1)<St.node(-2).childCount?1:St.indexAfter(-2)<St.node(-3).childCount?2:3,er={...getSplittedAttributes(Ft,St.node().type.name,St.node().attrs),...g},ar=((dt=ft.contentMatch.defaultType)==null?void 0:dt.createAndFill(er))||void 0;Ut=Ut.append(Fragment.from(ft.createAndFill(null,ar)||void 0));const ir=St.before(St.depth-(Kt-1));et.replace(ir,St.after(-Yt),new Slice(Ut,4-Kt,0));let lr=-1;et.doc.nodesBetween(ir,et.doc.content.size,(cr,vr)=>{if(lr>-1)return!1;cr.isTextblock&&cr.content.size===0&&(lr=vr+1)}),lr>-1&&et.setSelection(TextSelection.near(et.doc.resolve(lr))),et.scrollIntoView()}return!0}const jt=kt.pos===St.end()?Rt.contentMatchAt(0).defaultType:null,Bt={...getSplittedAttributes(Ft,Rt.type.name,Rt.attrs),...g},zt={...getSplittedAttributes(Ft,St.node().type.name,St.node().attrs),...g};et.delete(St.pos,kt.pos);const Ht=jt?[{type:ft,attrs:Bt},{type:jt,attrs:zt}]:[{type:ft,attrs:Bt}];if(!canSplit(et.doc,St.pos,2))return!1;if(ut){const{selection:Ut,storedMarks:Kt}=ot,{splittableMarks:Yt}=ct.extensionManager,er=Kt||Ut.$to.parentOffset&&Ut.$from.marks();if(et.split(St.pos,2,Ht).scrollIntoView(),!er||!ut)return!0;const ar=er.filter(ir=>Yt.includes(ir.type.name));et.ensureMarks(ar)}return!0},joinListBackwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(Math.max(0,et.pos-1)).before(et.depth);if(ot===void 0)return!0;const ut=it.doc.nodeAt(ot);return et.node.type===(ut==null?void 0:ut.type)&&canJoin(it.doc,et.pos)&&it.join(et.pos),!0},joinListForwards=(it,g)=>{const et=findParentNode(dt=>dt.type===g)(it.selection);if(!et)return!0;const ot=it.doc.resolve(et.start).after(et.depth);if(ot===void 0)return!0;const ut=it.doc.nodeAt(ot);return et.node.type===(ut==null?void 0:ut.type)&&canJoin(it.doc,ot)&&it.join(ot),!0},toggleList=(it,g,et,ot={})=>({editor:ut,tr:ct,state:dt,dispatch:ft,chain:St,commands:kt,can:Tt})=>{const{extensions:Rt,splittableMarks:Ft}=ut.extensionManager,jt=getNodeType(it,dt.schema),Bt=getNodeType(g,dt.schema),{selection:zt,storedMarks:Ht}=dt,{$from:Ut,$to:Kt}=zt,Yt=Ut.blockRange(Kt),er=Ht||zt.$to.parentOffset&&zt.$from.marks();if(!Yt)return!1;const ar=findParentNode(ir=>isList(ir.type.name,Rt))(zt);if(Yt.depth>=1&&ar&&Yt.depth-ar.depth<=1){if(ar.node.type===jt)return kt.liftListItem(Bt);if(isList(ar.node.type.name,Rt)&&jt.validContent(ar.node.content)&&ft)return St().command(()=>(ct.setNodeMarkup(ar.pos,jt),!0)).command(()=>joinListBackwards(ct,jt)).command(()=>joinListForwards(ct,jt)).run()}return!et||!er||!ft?St().command(()=>Tt().wrapInList(jt,ot)?!0:kt.clearNodes()).wrapInList(jt,ot).command(()=>joinListBackwards(ct,jt)).command(()=>joinListForwards(ct,jt)).run():St().command(()=>{const ir=Tt().wrapInList(jt,ot),lr=er.filter(cr=>Ft.includes(cr.type.name));return ct.ensureMarks(lr),ir?!0:kt.clearNodes()}).wrapInList(jt,ot).command(()=>joinListBackwards(ct,jt)).command(()=>joinListForwards(ct,jt)).run()},toggleMark=(it,g={},et={})=>({state:ot,commands:ut})=>{const{extendEmptyMarkRange:ct=!1}=et,dt=getMarkType(it,ot.schema);return isMarkActive(ot,dt,g)?ut.unsetMark(dt,{extendEmptyMarkRange:ct}):ut.setMark(dt,g)},toggleNode=(it,g,et={})=>({state:ot,commands:ut})=>{const ct=getNodeType(it,ot.schema),dt=getNodeType(g,ot.schema),ft=isNodeActive(ot,ct,et);let St;return ot.selection.$anchor.sameParent(ot.selection.$head)&&(St=ot.selection.$anchor.parent.attrs),ft?ut.setNode(dt,St):ut.setNode(ct,{...St,...et})},toggleWrap=(it,g={})=>({state:et,commands:ot})=>{const ut=getNodeType(it,et.schema);return isNodeActive(et,ut,g)?ot.lift(ut):ot.wrapIn(ut,g)},undoInputRule=()=>({state:it,dispatch:g})=>{const et=it.plugins;for(let ot=0;ot<et.length;ot+=1){const ut=et[ot];let ct;if(ut.spec.isInputRules&&(ct=ut.getState(it))){if(g){const dt=it.tr,ft=ct.transform;for(let St=ft.steps.length-1;St>=0;St-=1)dt.step(ft.steps[St].invert(ft.docs[St]));if(ct.text){const St=dt.doc.resolve(ct.from).marks();dt.replaceWith(ct.from,ct.to,it.schema.text(ct.text,St))}else dt.delete(ct.from,ct.to)}return!0}}return!1},unsetAllMarks=()=>({tr:it,dispatch:g})=>{const{selection:et}=it,{empty:ot,ranges:ut}=et;return ot||g&&ut.forEach(ct=>{it.removeMark(ct.$from.pos,ct.$to.pos)}),!0},unsetMark=(it,g={})=>({tr:et,state:ot,dispatch:ut})=>{var ct;const{extendEmptyMarkRange:dt=!1}=g,{selection:ft}=et,St=getMarkType(it,ot.schema),{$from:kt,empty:Tt,ranges:Rt}=ft;if(!ut)return!0;if(Tt&&dt){let{from:Ft,to:jt}=ft;const Bt=(ct=kt.marks().find(Ht=>Ht.type===St))==null?void 0:ct.attrs,zt=getMarkRange(kt,St,Bt);zt&&(Ft=zt.from,jt=zt.to),et.removeMark(Ft,jt,St)}else Rt.forEach(Ft=>{et.removeMark(Ft.$from.pos,Ft.$to.pos,St)});return et.removeStoredMark(St),!0},updateAttributes=(it,g={})=>({tr:et,state:ot,dispatch:ut})=>{let ct=null,dt=null;const ft=getSchemaTypeNameByName(typeof it=="string"?it:it.name,ot.schema);return ft?(ft==="node"&&(ct=getNodeType(it,ot.schema)),ft==="mark"&&(dt=getMarkType(it,ot.schema)),ut&&et.selection.ranges.forEach(St=>{const kt=St.$from.pos,Tt=St.$to.pos;let Rt,Ft,jt,Bt;et.selection.empty?ot.doc.nodesBetween(kt,Tt,(zt,Ht)=>{ct&&ct===zt.type&&(jt=Math.max(Ht,kt),Bt=Math.min(Ht+zt.nodeSize,Tt),Rt=Ht,Ft=zt)}):ot.doc.nodesBetween(kt,Tt,(zt,Ht)=>{Ht<kt&&ct&&ct===zt.type&&(jt=Math.max(Ht,kt),Bt=Math.min(Ht+zt.nodeSize,Tt),Rt=Ht,Ft=zt),Ht>=kt&&Ht<=Tt&&(ct&&ct===zt.type&&et.setNodeMarkup(Ht,void 0,{...zt.attrs,...g}),dt&&zt.marks.length&&zt.marks.forEach(Ut=>{if(dt===Ut.type){const Kt=Math.max(Ht,kt),Yt=Math.min(Ht+zt.nodeSize,Tt);et.addMark(Kt,Yt,dt.create({...Ut.attrs,...g}))}}))}),Ft&&(Rt!==void 0&&et.setNodeMarkup(Rt,void 0,{...Ft.attrs,...g}),dt&&Ft.marks.length&&Ft.marks.forEach(zt=>{dt===zt.type&&et.addMark(jt,Bt,dt.create({...zt.attrs,...g}))}))}),!0):!1},wrapIn=(it,g={})=>({state:et,dispatch:ot})=>{const ut=getNodeType(it,et.schema);return wrapIn$1(ut,g)(et,ot)},wrapInList=(it,g={})=>({state:et,dispatch:ot})=>{const ut=getNodeType(it,et.schema);return wrapInList$1(ut,g)(et,ot)},EventEmitter=class{constructor(){this.callbacks={}}on(it,g){return this.callbacks[it]||(this.callbacks[it]=[]),this.callbacks[it].push(g),this}emit(it,...g){const et=this.callbacks[it];return et&&et.forEach(ot=>ot.apply(this,g)),this}off(it,g){const et=this.callbacks[it];return et&&(g?this.callbacks[it]=et.filter(ot=>ot!==g):delete this.callbacks[it]),this}once(it,g){const et=(...ot)=>{this.off(it,et),g.apply(this,ot)};return this.on(it,et)}removeAllListeners(){this.callbacks={}}},InputRule=class{constructor(it){var g;this.find=it.find,this.handler=it.handler,this.undoable=(g=it.undoable)!=null?g:!0}},inputRuleMatcherHandler=(it,g)=>{if(isRegExp(g))return g.exec(it);const et=g(it);if(!et)return null;const ot=[et.text];return ot.index=et.index,ot.input=it,ot.data=et.data,et.replaceWith&&(et.text.includes(et.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),ot.push(et.replaceWith)),ot};function run$2(it){var g;const{editor:et,from:ot,to:ut,text:ct,rules:dt,plugin:ft}=it,{view:St}=et;if(St.composing)return!1;const kt=St.state.doc.resolve(ot);if(kt.parent.type.spec.code||(g=kt.nodeBefore||kt.nodeAfter)!=null&&g.marks.find(Ft=>Ft.type.spec.code))return!1;let Tt=!1;const Rt=getTextContentFromNodes(kt)+ct;return dt.forEach(Ft=>{if(Tt)return;const jt=inputRuleMatcherHandler(Rt,Ft.find);if(!jt)return;const Bt=St.state.tr,zt=createChainableState({state:St.state,transaction:Bt}),Ht={from:ot-(jt[0].length-ct.length),to:ut},{commands:Ut,chain:Kt,can:Yt}=new CommandManager$1({editor:et,state:zt});Ft.handler({state:zt,range:Ht,match:jt,commands:Ut,chain:Kt,can:Yt})===null||!Bt.steps.length||(Ft.undoable&&Bt.setMeta(ft,{transform:Bt,from:ot,to:ut,text:ct}),St.dispatch(Bt),Tt=!0)}),Tt}function inputRulesPlugin(it){const{editor:g,rules:et}=it,ot=new Plugin({state:{init(){return null},apply(ut,ct,dt){const ft=ut.getMeta(ot);if(ft)return ft;const St=ut.getMeta("applyInputRules");return!!St&&setTimeout(()=>{let{text:Tt}=St;typeof Tt=="string"?Tt=Tt:Tt=getHTMLFromFragment(Fragment.from(Tt),dt.schema);const{from:Rt}=St,Ft=Rt+Tt.length;run$2({editor:g,from:Rt,to:Ft,text:Tt,rules:et,plugin:ot})}),ut.selectionSet||ut.docChanged?null:ct}},props:{handleTextInput(ut,ct,dt,ft){return run$2({editor:g,from:ct,to:dt,text:ft,rules:et,plugin:ot})},handleDOMEvents:{compositionend:ut=>(setTimeout(()=>{const{$cursor:ct}=ut.state.selection;ct&&run$2({editor:g,from:ct.pos,to:ct.pos,text:"",rules:et,plugin:ot})}),!1)},handleKeyDown(ut,ct){if(ct.key!=="Enter")return!1;const{$cursor:dt}=ut.state.selection;return dt?run$2({editor:g,from:dt.pos,to:dt.pos,text:`
`,rules:et,plugin:ot}):!1}},isInputRules:!0});return ot}function getType$1(it){return Object.prototype.toString.call(it).slice(8,-1)}function isPlainObject(it){return getType$1(it)!=="Object"?!1:it.constructor===Object&&Object.getPrototypeOf(it)===Object.prototype}function mergeDeep(it,g){const et={...it};return isPlainObject(it)&&isPlainObject(g)&&Object.keys(g).forEach(ot=>{isPlainObject(g[ot])&&isPlainObject(it[ot])?et[ot]=mergeDeep(it[ot],g[ot]):et[ot]=g[ot]}),et}var Extendable=class{constructor(it={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...it},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(it={}){const g=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,it)});return g.name=this.name,g.parent=this.parent,g}extend(it={}){const g=new this.constructor({...this.config,...it});return g.parent=this,this.child=g,g.name="name"in it?it.name:g.parent.name,g}},Mark=class V3 extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(g={}){const et=typeof g=="function"?g():g;return new V3(et)}static handleExit({editor:g,mark:et}){const{tr:ot}=g.state,ut=g.state.selection.$from;if(ut.pos===ut.end()){const dt=ut.marks();if(!!!dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name))return!1;const St=dt.find(kt=>(kt==null?void 0:kt.type.name)===et.name);return St&&ot.removeStoredMark(St),ot.insertText(" ",ut.pos),g.view.dispatch(ot),!0}return!1}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function isNumber(it){return typeof it=="number"}var PasteRule=class{constructor(it){this.find=it.find,this.handler=it.handler}},pasteRuleMatcherHandler=(it,g,et)=>{if(isRegExp(g))return[...it.matchAll(g)];const ot=g(it,et);return ot?ot.map(ut=>{const ct=[ut.text];return ct.index=ut.index,ct.input=it,ct.data=ut.data,ut.replaceWith&&(ut.text.includes(ut.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),ct.push(ut.replaceWith)),ct}):[]};function run2(it){const{editor:g,state:et,from:ot,to:ut,rule:ct,pasteEvent:dt,dropEvent:ft}=it,{commands:St,chain:kt,can:Tt}=new CommandManager$1({editor:g,state:et}),Rt=[];return et.doc.nodesBetween(ot,ut,(jt,Bt)=>{var zt,Ht,Ut,Kt,Yt;if((Ht=(zt=jt.type)==null?void 0:zt.spec)!=null&&Ht.code||!(jt.isText||jt.isTextblock||jt.isInline))return;const er=(Yt=(Kt=(Ut=jt.content)==null?void 0:Ut.size)!=null?Kt:jt.nodeSize)!=null?Yt:0,ar=Math.max(ot,Bt),ir=Math.min(ut,Bt+er);if(ar>=ir)return;const lr=jt.isText?jt.text||"":jt.textBetween(ar-Bt,ir-Bt,void 0,"");pasteRuleMatcherHandler(lr,ct.find,dt).forEach(vr=>{if(vr.index===void 0)return;const xr=ar+vr.index+1,yr=xr+vr[0].length,Sr={from:et.tr.mapping.map(xr),to:et.tr.mapping.map(yr)},kr=ct.handler({state:et,range:Sr,match:vr,commands:St,chain:kt,can:Tt,pasteEvent:dt,dropEvent:ft});Rt.push(kr)})}),Rt.every(jt=>jt!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=it=>{var g;const et=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(g=et.clipboardData)==null||g.setData("text/html",it),et};function pasteRulesPlugin(it){const{editor:g,rules:et}=it;let ot=null,ut=!1,ct=!1,dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,ft;try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}const St=({state:Tt,from:Rt,to:Ft,rule:jt,pasteEvt:Bt})=>{const zt=Tt.tr,Ht=createChainableState({state:Tt,transaction:zt});if(!(!run2({editor:g,state:Ht,from:Math.max(Rt-1,0),to:Ft.b-1,rule:jt,pasteEvent:Bt,dropEvent:ft})||!zt.steps.length)){try{ft=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{ft=null}return dt=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,zt}};return et.map(Tt=>new Plugin({view(Rt){const Ft=Bt=>{var zt;ot=(zt=Rt.dom.parentElement)!=null&&zt.contains(Bt.target)?Rt.dom.parentElement:null,ot&&(tiptapDragFromOtherEditor=g)},jt=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",Ft),window.addEventListener("dragend",jt),{destroy(){window.removeEventListener("dragstart",Ft),window.removeEventListener("dragend",jt)}}},props:{handleDOMEvents:{drop:(Rt,Ft)=>{if(ct=ot===Rt.dom.parentElement,ft=Ft,!ct){const jt=tiptapDragFromOtherEditor;jt!=null&&jt.isEditable&&setTimeout(()=>{const Bt=jt.state.selection;Bt&&jt.commands.deleteRange({from:Bt.from,to:Bt.to})},10)}return!1},paste:(Rt,Ft)=>{var jt;const Bt=(jt=Ft.clipboardData)==null?void 0:jt.getData("text/html");return dt=Ft,ut=!!(Bt!=null&&Bt.includes("data-pm-slice")),!1}}},appendTransaction:(Rt,Ft,jt)=>{const Bt=Rt[0],zt=Bt.getMeta("uiEvent")==="paste"&&!ut,Ht=Bt.getMeta("uiEvent")==="drop"&&!ct,Ut=Bt.getMeta("applyPasteRules"),Kt=!!Ut;if(!zt&&!Ht&&!Kt)return;if(Kt){let{text:ar}=Ut;typeof ar=="string"?ar=ar:ar=getHTMLFromFragment(Fragment.from(ar),jt.schema);const{from:ir}=Ut,lr=ir+ar.length,cr=createClipboardPasteEvent(ar);return St({rule:Tt,state:jt,from:ir,to:{b:lr},pasteEvt:cr})}const Yt=Ft.doc.content.findDiffStart(jt.doc.content),er=Ft.doc.content.findDiffEnd(jt.doc.content);if(!(!isNumber(Yt)||!er||Yt===er.b))return St({rule:Tt,state:jt,from:Yt,to:er,pasteEvt:dt})}}))}var ExtensionManager=class{constructor(it,g){this.splittableMarks=[],this.editor=g,this.baseExtensions=it,this.extensions=resolveExtensions(it),this.schema=getSchemaByResolvedExtensions(this.extensions,g),this.setupExtensions()}get commands(){return this.extensions.reduce((it,g)=>{const et={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)},ot=getExtensionField(g,"addCommands",et);return ot?{...it,...ot()}:it},{})}get plugins(){const{editor:it}=this;return sortExtensions([...this.extensions].reverse()).flatMap(ot=>{const ut={name:ot.name,options:ot.options,storage:this.editor.extensionStorage[ot.name],editor:it,type:getSchemaTypeByName(ot.name,this.schema)},ct=[],dt=getExtensionField(ot,"addKeyboardShortcuts",ut);let ft={};if(ot.type==="mark"&&getExtensionField(ot,"exitable",ut)&&(ft.ArrowRight=()=>Mark.handleExit({editor:it,mark:ot})),dt){const Ft=Object.fromEntries(Object.entries(dt()).map(([jt,Bt])=>[jt,()=>Bt({editor:it})]));ft={...ft,...Ft}}const St=keymap(ft);ct.push(St);const kt=getExtensionField(ot,"addInputRules",ut);if(isExtensionRulesEnabled(ot,it.options.enableInputRules)&&kt){const Ft=kt();if(Ft&&Ft.length){const jt=inputRulesPlugin({editor:it,rules:Ft}),Bt=Array.isArray(jt)?jt:[jt];ct.push(...Bt)}}const Tt=getExtensionField(ot,"addPasteRules",ut);if(isExtensionRulesEnabled(ot,it.options.enablePasteRules)&&Tt){const Ft=Tt();if(Ft&&Ft.length){const jt=pasteRulesPlugin({editor:it,rules:Ft});ct.push(...jt)}}const Rt=getExtensionField(ot,"addProseMirrorPlugins",ut);if(Rt){const Ft=Rt();ct.push(...Ft)}return ct})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:it}=this,{nodeExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addNodeView")).map(et=>{const ot=this.attributes.filter(St=>St.type===et.name),ut={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getNodeType(et.name,this.schema)},ct=getExtensionField(et,"addNodeView",ut);if(!ct)return[];const dt=ct();if(!dt)return[];const ft=(St,kt,Tt,Rt,Ft)=>{const jt=getRenderedAttributes(St,ot);return dt({node:St,view:kt,getPos:Tt,decorations:Rt,innerDecorations:Ft,editor:it,extension:et,HTMLAttributes:jt})};return[et.name,ft]}))}get markViews(){const{editor:it}=this,{markExtensions:g}=splitExtensions(this.extensions);return Object.fromEntries(g.filter(et=>!!getExtensionField(et,"addMarkView")).map(et=>{const ot=this.attributes.filter(ft=>ft.type===et.name),ut={name:et.name,options:et.options,storage:this.editor.extensionStorage[et.name],editor:it,type:getMarkType(et.name,this.schema)},ct=getExtensionField(et,"addMarkView",ut);if(!ct)return[];const dt=(ft,St,kt)=>{const Tt=getRenderedAttributes(ft,ot);return ct()({mark:ft,view:St,inline:kt,editor:it,extension:et,HTMLAttributes:Tt,updateAttributes:Rt=>{updateMarkViewAttributes(ft,it,Rt)}})};return[et.name,dt]}))}setupExtensions(){const it=this.extensions;this.editor.extensionStorage=Object.fromEntries(it.map(g=>[g.name,g.storage])),it.forEach(g=>{var et;const ot={name:g.name,options:g.options,storage:this.editor.extensionStorage[g.name],editor:this.editor,type:getSchemaTypeByName(g.name,this.schema)};g.type==="mark"&&((et=callOrReturn(getExtensionField(g,"keepOnSplit",ot)))==null||et)&&this.splittableMarks.push(g.name);const ut=getExtensionField(g,"onBeforeCreate",ot),ct=getExtensionField(g,"onCreate",ot),dt=getExtensionField(g,"onUpdate",ot),ft=getExtensionField(g,"onSelectionUpdate",ot),St=getExtensionField(g,"onTransaction",ot),kt=getExtensionField(g,"onFocus",ot),Tt=getExtensionField(g,"onBlur",ot),Rt=getExtensionField(g,"onDestroy",ot);ut&&this.editor.on("beforeCreate",ut),ct&&this.editor.on("create",ct),dt&&this.editor.on("update",dt),ft&&this.editor.on("selectionUpdate",ft),St&&this.editor.on("transaction",St),kt&&this.editor.on("focus",kt),Tt&&this.editor.on("blur",Tt),Rt&&this.editor.on("destroy",Rt)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export$1(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class z3 extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(g={}){const et=typeof g=="function"?g():g;return new z3(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:it}=this,{state:g,schema:et}=it,{doc:ot,selection:ut}=g,{ranges:ct}=ut,dt=Math.min(...ct.map(Tt=>Tt.$from.pos)),ft=Math.max(...ct.map(Tt=>Tt.$to.pos)),St=getTextSerializersFromSchema(et);return getTextBetween(ot,{from:dt,to:ft},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:St})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:it,appendedTransactions:g}){var et,ot,ut;const ct=()=>{var dt,ft,St,kt;if((kt=(St=(ft=(dt=this.editor.options.coreExtensionOptions)==null?void 0:dt.delete)==null?void 0:ft.filterTransaction)==null?void 0:St.call(ft,it))!=null?kt:it.getMeta("y-sync$"))return;const Tt=combineTransactionSteps(it.before,[it,...g]);getChangedRanges(Tt).forEach(jt=>{Tt.mapping.mapResult(jt.oldRange.from).deletedAfter&&Tt.mapping.mapResult(jt.oldRange.to).deletedBefore&&Tt.before.nodesBetween(jt.oldRange.from,jt.oldRange.to,(Bt,zt)=>{const Ht=zt+Bt.nodeSize-2,Ut=jt.oldRange.from<=zt&&Ht<=jt.oldRange.to;this.editor.emit("delete",{type:"node",node:Bt,from:zt,to:Ht,newFrom:Tt.mapping.map(zt),newTo:Tt.mapping.map(Ht),deletedRange:jt.oldRange,newRange:jt.newRange,partial:!Ut,editor:this.editor,transaction:it,combinedTransform:Tt})})});const Ft=Tt.mapping;Tt.steps.forEach((jt,Bt)=>{var zt,Ht;if(jt instanceof RemoveMarkStep){const Ut=Ft.slice(Bt).map(jt.from,-1),Kt=Ft.slice(Bt).map(jt.to),Yt=Ft.invert().map(Ut,-1),er=Ft.invert().map(Kt),ar=(zt=Tt.doc.nodeAt(Ut-1))==null?void 0:zt.marks.some(lr=>lr.eq(jt.mark)),ir=(Ht=Tt.doc.nodeAt(Kt))==null?void 0:Ht.marks.some(lr=>lr.eq(jt.mark));this.editor.emit("delete",{type:"mark",mark:jt.mark,from:jt.from,to:jt.to,deletedRange:{from:Yt,to:er},newRange:{from:Ut,to:Kt},partial:!!(ir||ar),editor:this.editor,transaction:it,combinedTransform:Tt})}})};(ut=(ot=(et=this.editor.options.coreExtensionOptions)==null?void 0:et.delete)==null?void 0:ot.async)==null||ut?setTimeout(ct,0):ct()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(it,g,et,ot)=>{this.editor.emit("drop",{editor:this.editor,event:g,slice:et,moved:ot})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:it}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(g,et)=>{it.isFocused=!0;const ot=it.state.tr.setMeta("focus",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1},blur:(g,et)=>{it.isFocused=!1;const ot=it.state.tr.setMeta("blur",{event:et}).setMeta("addToHistory",!1);return g.dispatch(ot),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const it=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.undoInputRule(),()=>dt.command(({tr:ft})=>{const{selection:St,doc:kt}=ft,{empty:Tt,$anchor:Rt}=St,{pos:Ft,parent:jt}=Rt,Bt=Rt.parent.isTextblock&&Ft>0?ft.doc.resolve(Ft-1):Rt,zt=Bt.parent.type.spec.isolating,Ht=Rt.pos-Rt.parentOffset,Ut=zt&&Bt.parent.childCount===1?Ht===Rt.pos:Selection.atStart(kt).from===Ft;return!Tt||!jt.type.isTextblock||jt.textContent.length||!Ut||Ut&&Rt.parent.type.name==="paragraph"?!1:dt.clearNodes()}),()=>dt.deleteSelection(),()=>dt.joinBackward(),()=>dt.selectNodeBackward()]),g=()=>this.editor.commands.first(({commands:dt})=>[()=>dt.deleteSelection(),()=>dt.deleteCurrentNode(),()=>dt.joinForward(),()=>dt.selectNodeForward()]),ot={Enter:()=>this.editor.commands.first(({commands:dt})=>[()=>dt.newlineInCode(),()=>dt.createParagraphNear(),()=>dt.liftEmptyBlock(),()=>dt.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:it,"Mod-Backspace":it,"Shift-Backspace":it,Delete:g,"Mod-Delete":g,"Mod-a":()=>this.editor.commands.selectAll()},ut={...ot},ct={...ot,"Ctrl-h":it,"Alt-Backspace":it,"Ctrl-d":g,"Ctrl-Alt-Backspace":g,"Alt-Delete":g,"Alt-d":g,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?ct:ut},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(it,g,et)=>{if(it.some(zt=>zt.getMeta("composition")))return;const ot=it.some(zt=>zt.docChanged)&&!g.doc.eq(et.doc),ut=it.some(zt=>zt.getMeta("preventClearDocument"));if(!ot||ut)return;const{empty:ct,from:dt,to:ft}=g.selection,St=Selection.atStart(g.doc).from,kt=Selection.atEnd(g.doc).to;if(ct||!(dt===St&&ft===kt)||!isNodeEmpty(et.doc))return;const Ft=et.tr,jt=createChainableState({state:et,transaction:Ft}),{commands:Bt}=new CommandManager$1({editor:this.editor,state:jt});if(Bt.clearNodes(),!!Ft.steps.length)return Ft}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(it,g,et)=>{this.editor.emit("paste",{editor:this.editor,event:g,slice:et})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),NodePos=class Z1{constructor(g,et,ot=!1,ut=null){this.currentNode=null,this.actualDepth=null,this.isBlock=ot,this.resolvedPos=g,this.editor=et,this.currentNode=ut}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var g;return(g=this.actualDepth)!=null?g:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(g){let et=this.from,ot=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}et=this.from+1,ot=this.to-1}this.editor.commands.insertContentAt({from:et,to:ot},g)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const g=this.resolvedPos.start(this.resolvedPos.depth-1),et=this.resolvedPos.doc.resolve(g);return new Z1(et,this.editor)}get before(){let g=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.from-3)),new Z1(g,this.editor)}get after(){let g=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return g.depth!==this.depth&&(g=this.resolvedPos.doc.resolve(this.to+3)),new Z1(g,this.editor)}get children(){const g=[];return this.node.content.forEach((et,ot)=>{const ut=et.isBlock&&!et.isTextblock,ct=et.isAtom&&!et.isText,dt=this.pos+ot+(ct?0:1);if(dt<0||dt>this.resolvedPos.doc.nodeSize-2)return;const ft=this.resolvedPos.doc.resolve(dt);if(!ut&&ft.depth<=this.depth)return;const St=new Z1(ft,this.editor,ut,ut?et:null);ut&&(St.actualDepth=this.depth+1),g.push(new Z1(ft,this.editor,ut,ut?et:null))}),g}get firstChild(){return this.children[0]||null}get lastChild(){const g=this.children;return g[g.length-1]||null}closest(g,et={}){let ot=null,ut=this.parent;for(;ut&&!ot;){if(ut.node.type.name===g)if(Object.keys(et).length>0){const ct=ut.node.attrs,dt=Object.keys(et);for(let ft=0;ft<dt.length;ft+=1){const St=dt[ft];if(ct[St]!==et[St])break}}else ot=ut;ut=ut.parent}return ot}querySelector(g,et={}){return this.querySelectorAll(g,et,!0)[0]||null}querySelectorAll(g,et={},ot=!1){let ut=[];if(!this.children||this.children.length===0)return ut;const ct=Object.keys(et);return this.children.forEach(dt=>{ot&&ut.length>0||(dt.node.type.name===g&&ct.every(St=>et[St]===dt.node.attrs[St])&&ut.push(dt),!(ot&&ut.length>0)&&(ut=ut.concat(dt.querySelectorAll(g,et,ot))))}),ut}setAttribute(g){const{tr:et}=this.editor.state;et.setNodeMarkup(this.from,void 0,{...this.node.attrs,...g}),this.editor.view.dispatch(et)}},style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(it,g,et){const ot=document.querySelector(`style[data-tiptap-style${et?`-${et}`:""}]`);if(ot!==null)return ot;const ut=document.createElement("style");return g&&ut.setAttribute("nonce",g),ut.setAttribute(`data-tiptap-style${et?`-${et}`:""}`,""),ut.innerHTML=it,document.getElementsByTagName("head")[0].appendChild(ut),ut}var Editor=class extends EventEmitter{constructor(it={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:ot})=>{throw ot},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(it),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:ot,slice:ut,moved:ct})=>this.options.onDrop(ot,ut,ct)),this.on("paste",({event:ot,slice:ut})=>this.options.onPaste(ot,ut)),this.on("delete",this.options.onDelete);const g=this.createDoc(),et=resolveFocusPosition(g,this.options.autofocus);this.editorState=EditorState.create({doc:g,schema:this.schema,selection:et||void 0}),this.options.element&&this.mount(this.options.element)}mount(it){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(it),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const it=this.editorView.dom;it!=null&&it.editor&&delete it.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(it){console.warn("Failed to remove CSS element:",it)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(it={}){this.options={...this.options,...it},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(it,g=!0){this.setOptions({editable:it}),g&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:it=>{this.editorState=it},dispatch:it=>{this.dispatchTransaction(it)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(it,g)=>{if(this.editorView)return this.editorView[g];if(g==="state")return this.editorState;if(g in it)return Reflect.get(it,g);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${g}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(it,g){const et=isFunction(g)?g(it,[...this.state.plugins]):[...this.state.plugins,it],ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}unregisterPlugin(it){if(this.isDestroyed)return;const g=this.state.plugins;let et=g;if([].concat(it).forEach(ut=>{const ct=typeof ut=="string"?`${ut}$`:ut.key;et=et.filter(dt=>!dt.key.startsWith(ct))}),g.length===et.length)return;const ot=this.state.reconfigure({plugins:et});return this.view.updateState(ot),ot}createExtensionManager(){var it,g;const ot=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(g=(it=this.options.coreExtensionOptions)==null?void 0:it.clipboardTextSerializer)==null?void 0:g.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete].filter(ut=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[ut.name]!==!1:!0):[],...this.options.extensions].filter(ut=>["extension","node","mark"].includes(ut==null?void 0:ut.type));this.extensionManager=new ExtensionManager(ot,this)}createCommandManager(){this.commandManager=new CommandManager$1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let it;try{it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(g){if(!(g instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(g.message))throw g;this.emit("contentError",{editor:this,error:g,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(et=>et.name!=="collaboration"),this.createExtensionManager()}}),it=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return it}createView(it){var g;this.editorView=new EditorView(it,{...this.options.editorProps,attributes:{role:"textbox",...(g=this.options.editorProps)==null?void 0:g.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const et=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(et),this.prependClass(),this.injectCSS();const ot=this.view.dom;ot.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(it){this.isCapturingTransaction=!0,it(),this.isCapturingTransaction=!1;const g=this.capturedTransaction;return this.capturedTransaction=null,g}dispatchTransaction(it){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=it;return}it.steps.forEach(kt=>{var Tt;return(Tt=this.capturedTransaction)==null?void 0:Tt.step(kt)});return}const{state:g,transactions:et}=this.state.applyTransaction(it),ot=!this.state.selection.eq(g.selection),ut=et.includes(it),ct=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:it,nextState:g}),!ut)return;this.view.updateState(g),this.emit("transaction",{editor:this,transaction:it,appendedTransactions:et.slice(1)}),ot&&this.emit("selectionUpdate",{editor:this,transaction:it});const dt=et.findLast(kt=>kt.getMeta("focus")||kt.getMeta("blur")),ft=dt==null?void 0:dt.getMeta("focus"),St=dt==null?void 0:dt.getMeta("blur");ft&&this.emit("focus",{editor:this,event:ft.event,transaction:dt}),St&&this.emit("blur",{editor:this,event:St.event,transaction:dt}),!(it.getMeta("preventUpdate")||!et.some(kt=>kt.docChanged)||ct.doc.eq(g.doc))&&this.emit("update",{editor:this,transaction:it,appendedTransactions:et.slice(1)})}getAttributes(it){return getAttributes$1(this.state,it)}isActive(it,g){const et=typeof it=="string"?it:null,ot=typeof it=="string"?g:it;return isActive(this.state,et,ot)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(it){const{blockSeparator:g=`

`,textSerializers:et={}}=it||{};return getText(this.state.doc,{blockSeparator:g,textSerializers:{...getTextSerializersFromSchema(this.schema),...et}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var it,g;return(g=(it=this.editorView)==null?void 0:it.isDestroyed)!=null?g:!0}$node(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelector(it,g))||null}$nodes(it,g){var et;return((et=this.$doc)==null?void 0:et.querySelectorAll(it,g))||null}$pos(it){const g=this.state.doc.resolve(it);return new NodePos(g,this)}get $doc(){return this.$pos(0)}};function markInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ut=callOrReturn(it.getAttributes,void 0,ot);if(ut===!1||ut===null)return null;const{tr:ct}=g,dt=ot[ot.length-1],ft=ot[0];if(dt){const St=ft.search(/\S/),kt=et.from+ft.indexOf(dt),Tt=kt+dt.length;if(getMarksBetween(et.from,et.to,g.doc).filter(jt=>jt.mark.type.excluded.find(zt=>zt===it.type&&zt!==jt.mark.type)).filter(jt=>jt.to>kt).length)return null;Tt<et.to&&ct.delete(Tt,et.to),kt>et.from&&ct.delete(et.from+St,kt);const Ft=et.from+St+dt.length;ct.addMark(et.from+St,Ft,it.type.create(ut||{})),ct.removeStoredMark(it.type)}},undoable:it.undoable})}function nodeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ut=callOrReturn(it.getAttributes,void 0,ot)||{},{tr:ct}=g,dt=et.from;let ft=et.to;const St=it.type.create(ut);if(ot[1]){const kt=ot[0].lastIndexOf(ot[1]);let Tt=dt+kt;Tt>ft?Tt=ft:ft=Tt+ot[1].length;const Rt=ot[0][ot[0].length-1];ct.insertText(Rt,dt+ot[0].length-1),ct.replaceWith(Tt,ft,St)}else if(ot[0]){const kt=it.type.isInline?dt:dt-1;ct.insert(kt,it.type.create(ut)).delete(ct.mapping.map(dt),ct.mapping.map(ft))}ct.scrollIntoView()},undoable:it.undoable})}function textblockTypeInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot})=>{const ut=g.doc.resolve(et.from),ct=callOrReturn(it.getAttributes,void 0,ot)||{};if(!ut.node(-1).canReplaceWith(ut.index(-1),ut.indexAfter(-1),it.type))return null;g.tr.delete(et.from,et.to).setBlockType(et.from,et.from,it.type,ct)},undoable:it.undoable})}function wrappingInputRule(it){return new InputRule({find:it.find,handler:({state:g,range:et,match:ot,chain:ut})=>{const ct=callOrReturn(it.getAttributes,void 0,ot)||{},dt=g.tr.delete(et.from,et.to),St=dt.doc.resolve(et.from).blockRange(),kt=St&&findWrapping(St,it.type,ct);if(!kt)return null;if(dt.wrap(St,kt),it.keepMarks&&it.editor){const{selection:Rt,storedMarks:Ft}=g,{splittableMarks:jt}=it.editor.extensionManager,Bt=Ft||Rt.$to.parentOffset&&Rt.$from.marks();if(Bt){const zt=Bt.filter(Ht=>jt.includes(Ht.type.name));dt.ensureMarks(zt)}}if(it.keepAttributes){const Rt=it.type.name==="bulletList"||it.type.name==="orderedList"?"listItem":"taskList";ut().updateAttributes(Rt,ct).run()}const Tt=dt.doc.resolve(et.from-1).nodeBefore;Tt&&Tt.type===it.type&&canJoin(dt.doc,et.from-1)&&(!it.joinPredicate||it.joinPredicate(ot,Tt))&&dt.join(et.from-1)},undoable:it.undoable})}function canInsertNode(it,g){const{selection:et}=it,{$from:ot}=et;if(et instanceof NodeSelection){const ct=ot.index();return ot.parent.canReplaceWith(ct,ct+1,g)}let ut=ot.depth;for(;ut>=0;){const ct=ot.index(ut);if(ot.node(ut).contentMatchAt(ct).matchType(g))return!0;ut-=1}return!1}var markdown_exports={};__export$1(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});function parseAttributes(it){if(!(it!=null&&it.trim()))return{};const g={},et=[],ot=it.replace(/["']([^"']*)["']/g,kt=>(et.push(kt),`__QUOTED_${et.length-1}__`)),ut=ot.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(ut){const kt=ut.map(Tt=>Tt.trim().slice(1));g.class=kt.join(" ")}const ct=ot.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);ct&&(g.id=ct[1]);const dt=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(ot.matchAll(dt)).forEach(([,kt,Tt])=>{var Rt;const Ft=parseInt(((Rt=Tt.match(/__QUOTED_(\d+)__/))==null?void 0:Rt[1])||"0",10),jt=et[Ft];jt&&(g[kt]=jt.slice(1,-1))});const St=ot.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return St&&St.split(/\s+/).filter(Boolean).forEach(Tt=>{Tt.match(/^[a-zA-Z][\w-]*$/)&&(g[Tt]=!0)}),g}function serializeAttributes(it){if(!it||Object.keys(it).length===0)return"";const g=[];return it.class&&String(it.class).split(/\s+/).filter(Boolean).forEach(ot=>g.push(`.${ot}`)),it.id&&g.push(`#${it.id}`),Object.entries(it).forEach(([et,ot])=>{et==="class"||et==="id"||(ot===!0?g.push(et):ot!==!1&&ot!=null&&g.push(`${et}="${String(ot)}"`))}),g.join(" ")}function createAtomBlockMarkdownSpec(it){const{nodeName:g,name:et,parseAttributes:ot=parseAttributes,serializeAttributes:ut=serializeAttributes,defaultAttributes:ct={},requiredAttributes:dt=[],allowedAttributes:ft}=it,St=et||g,kt=Tt=>{if(!ft)return Tt;const Rt={};return ft.forEach(Ft=>{Ft in Tt&&(Rt[Ft]=Tt[Ft])}),Rt};return{parseMarkdown:(Tt,Rt)=>{const Ft={...ct,...Tt.attributes};return Rt.createNode(g,Ft,[])},markdownTokenizer:{name:g,level:"block",start(Tt){var Rt;const Ft=new RegExp(`^:::${St}(?:\\s|$)`,"m"),jt=(Rt=Tt.match(Ft))==null?void 0:Rt.index;return jt!==void 0?jt:-1},tokenize(Tt,Rt,Ft){const jt=new RegExp(`^:::${St}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),Bt=Tt.match(jt);if(!Bt)return;const zt=Bt[1]||"",Ht=ot(zt);if(!dt.find(Kt=>!(Kt in Ht)))return{type:g,raw:Bt[0],attributes:Ht}}},renderMarkdown:Tt=>{const Rt=kt(Tt.attrs||{}),Ft=ut(Rt),jt=Ft?` {${Ft}}`:"";return`:::${St}${jt} :::`}}}function createBlockMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ut=parseAttributes,serializeAttributes:ct=serializeAttributes,defaultAttributes:dt={},content:ft="block",allowedAttributes:St}=it,kt=et||g,Tt=Rt=>{if(!St)return Rt;const Ft={};return St.forEach(jt=>{jt in Rt&&(Ft[jt]=Rt[jt])}),Ft};return{parseMarkdown:(Rt,Ft)=>{let jt;if(ot){const zt=ot(Rt);jt=typeof zt=="string"?[{type:"text",text:zt}]:zt}else ft==="block"?jt=Ft.parseChildren(Rt.tokens||[]):jt=Ft.parseInline(Rt.tokens||[]);const Bt={...dt,...Rt.attributes};return Ft.createNode(g,Bt,jt)},markdownTokenizer:{name:g,level:"block",start(Rt){var Ft;const jt=new RegExp(`^:::${kt}`,"m"),Bt=(Ft=Rt.match(jt))==null?void 0:Ft.index;return Bt!==void 0?Bt:-1},tokenize(Rt,Ft,jt){var Bt;const zt=new RegExp(`^:::${kt}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),Ht=Rt.match(zt);if(!Ht)return;const[Ut,Kt=""]=Ht,Yt=ut(Kt);let er=1;const ar=Ut.length;let ir="";const lr=/^:::([\w-]*)(\s.*)?/gm,cr=Rt.slice(ar);for(lr.lastIndex=0;;){const vr=lr.exec(cr);if(vr===null)break;const xr=vr.index,yr=vr[1];if(!((Bt=vr[2])!=null&&Bt.endsWith(":::"))){if(yr)er+=1;else if(er-=1,er===0){const Sr=cr.slice(0,xr);ir=Sr.trim();const kr=Rt.slice(0,ar+xr+vr[0].length);let Pr=[];if(ir)if(ft==="block")for(Pr=jt.blockTokens(Sr),Pr.forEach(Or=>{Or.text&&(!Or.tokens||Or.tokens.length===0)&&(Or.tokens=jt.inlineTokens(Or.text))});Pr.length>0;){const Or=Pr[Pr.length-1];if(Or.type==="paragraph"&&(!Or.text||Or.text.trim()===""))Pr.pop();else break}else Pr=jt.inlineTokens(ir);return{type:g,raw:kr,attributes:Yt,content:ir,tokens:Pr}}}}}},renderMarkdown:(Rt,Ft)=>{const jt=Tt(Rt.attrs||{}),Bt=ct(jt),zt=Bt?` {${Bt}}`:"",Ht=Ft.renderChildren(Rt.content||[],`

`);return`:::${kt}${zt}

${Ht}

:::`}}}function parseShortcodeAttributes(it){if(!it.trim())return{};const g={},et=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let ot=et.exec(it);for(;ot!==null;){const[,ut,ct,dt]=ot;g[ut]=ct||dt,ot=et.exec(it)}return g}function serializeShortcodeAttributes(it){return Object.entries(it).filter(([,g])=>g!=null).map(([g,et])=>`${g}="${et}"`).join(" ")}function createInlineMarkdownSpec(it){const{nodeName:g,name:et,getContent:ot,parseAttributes:ut=parseShortcodeAttributes,serializeAttributes:ct=serializeShortcodeAttributes,defaultAttributes:dt={},selfClosing:ft=!1,allowedAttributes:St}=it,kt=et||g,Tt=Ft=>{if(!St)return Ft;const jt={};return St.forEach(Bt=>{Bt in Ft&&(jt[Bt]=Ft[Bt])}),jt},Rt=kt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(Ft,jt)=>{const Bt={...dt,...Ft.attributes};if(ft)return jt.createNode(g,Bt);const zt=ot?ot(Ft):Ft.content||"";return zt?jt.createNode(g,Bt,[jt.createTextNode(zt)]):jt.createNode(g,Bt,[])},markdownTokenizer:{name:g,level:"inline",start(Ft){const jt=ft?new RegExp(`\\[${Rt}\\s*[^\\]]*\\]`):new RegExp(`\\[${Rt}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${Rt}\\]`),Bt=Ft.match(jt),zt=Bt==null?void 0:Bt.index;return zt!==void 0?zt:-1},tokenize(Ft,jt,Bt){const zt=ft?new RegExp(`^\\[${Rt}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${Rt}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${Rt}\\]`),Ht=Ft.match(zt);if(!Ht)return;let Ut="",Kt="";if(ft){const[,er]=Ht;Kt=er}else{const[,er,ar]=Ht;Kt=er,Ut=ar||""}const Yt=ut(Kt.trim());return{type:g,raw:Ht[0],content:Ut.trim(),attributes:Yt}}},renderMarkdown:Ft=>{let jt="";ot?jt=ot(Ft):Ft.content&&Ft.content.length>0&&(jt=Ft.content.filter(Ut=>Ut.type==="text").map(Ut=>Ut.text).join(""));const Bt=Tt(Ft.attrs||{}),zt=ct(Bt),Ht=zt?` ${zt}`:"";return ft?`[${kt}${Ht}]`:`[${kt}${Ht}]${jt}[/${kt}]`}}}function parseIndentedBlocks(it,g,et){var ot,ut,ct,dt;const ft=it.split(`
`),St=[];let kt="",Tt=0;const Rt=g.baseIndentSize||2;for(;Tt<ft.length;){const Ft=ft[Tt],jt=Ft.match(g.itemPattern);if(!jt){if(St.length>0)break;if(Ft.trim()===""){Tt+=1;continue}else return}const Bt=g.extractItemData(jt),{indentLevel:zt,mainContent:Ht}=Bt;kt=`${kt}${Ft}
`;const Ut=[Ht];for(Tt+=1;Tt<ft.length;){const ar=ft[Tt];if(ar.trim()===""){const lr=ft.slice(Tt+1).findIndex(xr=>xr.trim()!=="");if(lr===-1)break;if((((ut=(ot=ft[Tt+1+lr].match(/^(\s*)/))==null?void 0:ot[1])==null?void 0:ut.length)||0)>zt){Ut.push(ar),kt=`${kt}${ar}
`,Tt+=1;continue}else break}if((((dt=(ct=ar.match(/^(\s*)/))==null?void 0:ct[1])==null?void 0:dt.length)||0)>zt)Ut.push(ar),kt=`${kt}${ar}
`,Tt+=1;else break}let Kt;const Yt=Ut.slice(1);if(Yt.length>0){const ar=Yt.map(ir=>ir.slice(zt+Rt)).join(`
`);ar.trim()&&(g.customNestedParser?Kt=g.customNestedParser(ar):Kt=et.blockTokens(ar))}const er=g.createToken(Bt,Kt);St.push(er)}if(St.length!==0)return{items:St,raw:kt.trim()}}function renderNestedMarkdownContent(it,g,et,ot){if(!it||!Array.isArray(it.content))return"";const ut=typeof et=="function"?et(ot):et,[ct,...dt]=it.content,ft=g.renderChildren([ct]),St=[`${ut}${ft}`];return dt&&dt.length>0&&dt.forEach(kt=>{const Tt=g.renderChildren([kt]);if(Tt){const Rt=Tt.split(`
`).map(Ft=>Ft?g.indent(Ft):"").join(`
`);St.push(Rt)}}),St.join(`
`)}function updateMarkViewAttributes(it,g,et={}){const{state:ot}=g,{doc:ut,tr:ct}=ot,dt=it;ut.descendants((ft,St)=>{const kt=ct.mapping.map(St),Tt=ct.mapping.map(St)+ft.nodeSize;let Rt=null;if(ft.marks.forEach(jt=>{if(jt!==dt)return!1;Rt=jt}),!Rt)return;let Ft=!1;if(Object.keys(et).forEach(jt=>{et[jt]!==Rt.attrs[jt]&&(Ft=!0)}),Ft){const jt=it.type.create({...it.attrs,...et});ct.removeMark(kt,Tt,it.type),ct.addMark(kt,Tt,jt)}}),ct.docChanged&&g.view.dispatch(ct)}var Node3=class U3 extends Extendable{constructor(){super(...arguments),this.type="node"}static create(g={}){const et=typeof g=="function"?g():g;return new U3(et)}configure(g){return super.configure(g)}extend(g){const et=typeof g=="function"?g():g;return super.extend(et)}};function markPasteRule(it){return new PasteRule({find:it.find,handler:({state:g,range:et,match:ot,pasteEvent:ut})=>{const ct=callOrReturn(it.getAttributes,void 0,ot,ut);if(ct===!1||ct===null)return null;const{tr:dt}=g,ft=ot[ot.length-1],St=ot[0];let kt=et.to;if(ft){const Tt=St.search(/\S/),Rt=et.from+St.indexOf(ft),Ft=Rt+ft.length;if(getMarksBetween(et.from,et.to,g.doc).filter(Bt=>Bt.mark.type.excluded.find(Ht=>Ht===it.type&&Ht!==Bt.mark.type)).filter(Bt=>Bt.to>Rt).length)return null;Ft<et.to&&dt.delete(Ft,et.to),Rt>et.from&&dt.delete(et.from+Tt,Rt),kt=et.from+Tt+ft.length,dt.addMark(et.from+Tt,kt,it.type.create(ct||{})),dt.removeStoredMark(it.type)}}})}var react=function it(g,et){if(g===et)return!0;if(g&&et&&typeof g=="object"&&typeof et=="object"){if(g.constructor!==et.constructor)return!1;var ot,ut,ct;if(Array.isArray(g)){if(ot=g.length,ot!=et.length)return!1;for(ut=ot;ut--!==0;)if(!it(g[ut],et[ut]))return!1;return!0}if(g instanceof Map&&et instanceof Map){if(g.size!==et.size)return!1;for(ut of g.entries())if(!et.has(ut[0]))return!1;for(ut of g.entries())if(!it(ut[1],et.get(ut[0])))return!1;return!0}if(g instanceof Set&&et instanceof Set){if(g.size!==et.size)return!1;for(ut of g.entries())if(!et.has(ut[0]))return!1;return!0}if(ArrayBuffer.isView(g)&&ArrayBuffer.isView(et)){if(ot=g.length,ot!=et.length)return!1;for(ut=ot;ut--!==0;)if(g[ut]!==et[ut])return!1;return!0}if(g.constructor===RegExp)return g.source===et.source&&g.flags===et.flags;if(g.valueOf!==Object.prototype.valueOf)return g.valueOf()===et.valueOf();if(g.toString!==Object.prototype.toString)return g.toString()===et.toString();if(ct=Object.keys(g),ot=ct.length,ot!==Object.keys(et).length)return!1;for(ut=ot;ut--!==0;)if(!Object.prototype.hasOwnProperty.call(et,ct[ut]))return!1;for(ut=ot;ut--!==0;){var dt=ct[ut];if(!(dt==="_owner"&&g.$$typeof)&&!it(g[dt],et[dt]))return!1}return!0}return g!==g&&et!==et};const deepEqual=getDefaultExportFromCjs(react);var withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports,shim=shimExports;function is(it,g){return it===g&&(it!==0||1/it===1/g)||it!==it&&g!==g}var objectIs=typeof Object.is=="function"?Object.is:is,useSyncExternalStore=shim.useSyncExternalStore,useRef=React$1.useRef,useEffect=React$1.useEffect,useMemo=React$1.useMemo,useDebugValue=React$1.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(it,g,et,ot,ut){var ct=useRef(null);if(ct.current===null){var dt={hasValue:!1,value:null};ct.current=dt}else dt=ct.current;ct=useMemo(function(){function St(jt){if(!kt){if(kt=!0,Tt=jt,jt=ot(jt),ut!==void 0&&dt.hasValue){var Bt=dt.value;if(ut(Bt,jt))return Rt=Bt}return Rt=jt}if(Bt=Rt,objectIs(Tt,jt))return Bt;var zt=ot(jt);return ut!==void 0&&ut(Bt,zt)?(Tt=jt,Bt):(Tt=jt,Rt=zt)}var kt=!1,Tt,Rt,Ft=et===void 0?null:et;return[function(){return St(g())},Ft===null?void 0:function(){return St(Ft())}]},[g,et,ot,ut]);var ft=useSyncExternalStore(it,ct[0],ct[1]);return useEffect(function(){dt.hasValue=!0,dt.value=ft},[ft]),useDebugValue(ft),ft};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,mergeRefs$1=(...it)=>g=>{it.forEach(et=>{typeof et=="function"?et(g):et&&(et.current=g)})},Portals=({contentComponent:it})=>{const g=shimExports.useSyncExternalStore(it.subscribe,it.getSnapshot,it.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(g)})};function getInstance(){const it=new Set;let g={};return{subscribe(et){return it.add(et),()=>{it.delete(et)}},getSnapshot(){return g},getServerSnapshot(){return g},setRenderer(et,ot){g={...g,[et]:ReactDOM.createPortal(ot.reactElement,ot.element,et)},it.forEach(ut=>ut())},removeRenderer(et){const ot={...g};delete ot[et],g=ot,it.forEach(ut=>ut())}}}var PureEditorContent=class extends React$3.Component{constructor(it){var g;super(it),this.editorContentRef=React$3.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((g=it.editor)!=null&&g.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const it=this.props.editor;if(it&&!it.isDestroyed&&it.options.element){if(it.contentComponent)return;const g=this.editorContentRef.current;g.append(it.view.dom),it.setOptions({element:g}),it.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=it.contentComponent.subscribe(()=>{this.setState(et=>et.hasContentComponentInitialized?et:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),it.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var it;const g=this.props.editor;if(g){this.initialized=!1,g.isDestroyed||g.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),g.contentComponent=null;try{if(!((it=g.view.dom)!=null&&it.firstChild))return;const et=document.createElement("div");et.append(g.view.dom),g.setOptions({element:et})}catch{}}}render(){const{editor:it,innerRef:g,...et}=this.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:mergeRefs$1(g,this.editorContentRef),...et}),(it==null?void 0:it.contentComponent)&&jsxRuntimeExports.jsx(Portals,{contentComponent:it.contentComponent})]})}},EditorContentWithKey=reactExports.forwardRef((it,g)=>{const et=React$3.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[it.editor]);return React$3.createElement(PureEditorContent,{key:et,innerRef:g,...it})}),EditorContent=React$3.memo(EditorContentWithKey),useIsomorphicLayoutEffect$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,EditorStateManager=class{constructor(it){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=it,this.lastSnapshot={editor:it,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(it){return this.subscribers.add(it),()=>{this.subscribers.delete(it)}}watch(it){if(this.editor=it,this.editor){const g=()=>{this.transactionNumber+=1,this.subscribers.forEach(ot=>ot())},et=this.editor;return et.on("transaction",g),()=>{et.off("transaction",g)}}}};function useEditorState(it){var g;const[et]=reactExports.useState(()=>new EditorStateManager(it.editor)),ot=withSelectorExports.useSyncExternalStoreWithSelector(et.subscribe,et.getSnapshot,et.getServerSnapshot,it.selector,(g=it.equalityFn)!=null?g:deepEqual);return useIsomorphicLayoutEffect$1(()=>et.watch(it.editor),[it.editor,et]),reactExports.useDebugValue(ot),ot}var isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next),EditorInstanceManager=class H3{constructor(g){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=g,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(g){this.editor=g,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(et=>et())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const g={...this.options.current,onBeforeCreate:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onBeforeCreate)==null?void 0:ct.call(ut,...ot)},onBlur:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onBlur)==null?void 0:ct.call(ut,...ot)},onCreate:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onCreate)==null?void 0:ct.call(ut,...ot)},onDestroy:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onDestroy)==null?void 0:ct.call(ut,...ot)},onFocus:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onFocus)==null?void 0:ct.call(ut,...ot)},onSelectionUpdate:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onSelectionUpdate)==null?void 0:ct.call(ut,...ot)},onTransaction:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onTransaction)==null?void 0:ct.call(ut,...ot)},onUpdate:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onUpdate)==null?void 0:ct.call(ut,...ot)},onContentError:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onContentError)==null?void 0:ct.call(ut,...ot)},onDrop:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onDrop)==null?void 0:ct.call(ut,...ot)},onPaste:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onPaste)==null?void 0:ct.call(ut,...ot)},onDelete:(...ot)=>{var ut,ct;return(ct=(ut=this.options.current).onDelete)==null?void 0:ct.call(ut,...ot)}};return new Editor(g)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(g){return this.subscriptions.add(g),()=>{this.subscriptions.delete(g)}}static compareOptions(g,et){return Object.keys(g).every(ot=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(ot)?!0:ot==="extensions"&&g.extensions&&et.extensions?g.extensions.length!==et.extensions.length?!1:g.extensions.every((ut,ct)=>{var dt;return ut===((dt=et.extensions)==null?void 0:dt[ct])}):g[ot]===et[ot])}onRender(g){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&g.length===0?H3.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(g),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(g){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=g;return}if(this.previousDeps.length===g.length&&this.previousDeps.every((ot,ut)=>ot===g[ut]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=g}scheduleDestroy(){const g=this.instanceId,et=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===g){et&&et.setOptions(this.options.current);return}et&&!et.isDestroyed&&(et.destroy(),this.instanceId===g&&this.setEditor(null))},1)}};function useEditor(it={},g=[]){const et=reactExports.useRef(it);et.current=it;const[ot]=reactExports.useState(()=>new EditorInstanceManager(et)),ut=shimExports.useSyncExternalStore(ot.subscribe,ot.getEditor,ot.getServerSnapshot);return reactExports.useDebugValue(ut),reactExports.useEffect(ot.onRender(g)),useEditorState({editor:ut,selector:({transactionNumber:ct})=>it.shouldRerenderOnTransaction===!1||it.shouldRerenderOnTransaction===void 0?null:it.immediatelyRender&&ct===0?0:ct+1}),ut}var EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;var ReactNodeViewContext=reactExports.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React$3.forwardRef((it,g)=>{const{onDragStart:et}=useReactNodeView(),ot=it.as||"div";return jsxRuntimeExports.jsx(ot,{...it,ref:g,"data-node-view-wrapper":"",onDragStart:et,style:{whiteSpace:"normal",...it.style}})});React$3.createContext({markViewContentRef:()=>{}});var h=(it,g)=>{if(it==="slot")return 0;if(it instanceof Function)return it(g);const{children:et,...ot}=g??{};if(it==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[it,ot,et]},inputRegex$5=/^\s*>\s$/,Blockquote=Node3.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:it}){return h("blockquote",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:it})=>it.wrapIn(this.name),toggleBlockquote:()=>({commands:it})=>it.toggleWrap(this.name),unsetBlockquote:()=>({commands:it})=>it.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),index_default$a=Blockquote,starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:it=>it.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:it=>it.type.name===this.name},{style:"font-weight",getAttrs:it=>/^(bold(er)?|[5-9]\d{2,})$/.test(it)&&null}]},renderHTML({HTMLAttributes:it}){return h("strong",{...mergeAttributes(this.options.HTMLAttributes,it),children:h("slot",{})})},addCommands(){return{setBold:()=>({commands:it})=>it.setMark(this.name),toggleBold:()=>({commands:it})=>it.toggleMark(this.name),unsetBold:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),inputRegex$4=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$2=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:it}){return["code",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setCode:()=>({commands:it})=>it.setMark(this.name),toggleCode:()=>({commands:it})=>it.toggleMark(this.name),unsetCode:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$4,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),DEFAULT_TAB_SIZE=4,backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node3.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:DEFAULT_TAB_SIZE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:it=>{var g;const{languageClassPrefix:et}=this.options;if(!et)return null;const ct=[...((g=it.firstElementChild)==null?void 0:g.classList)||[]].filter(dt=>dt.startsWith(et)).map(dt=>dt.replace(et,""))[0];return ct||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:it,HTMLAttributes:g}){return["pre",mergeAttributes(this.options.HTMLAttributes,g),["code",{class:it.attrs.language?this.options.languageClassPrefix+it.attrs.language:null},0]]},addCommands(){return{setCodeBlock:it=>({commands:g})=>g.setNode(this.name,it),toggleCodeBlock:it=>({commands:g})=>g.toggleNode(this.name,"paragraph",it)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:it,$anchor:g}=this.editor.state.selection,et=g.pos===1;return!it||g.parent.type.name!==this.name?!1:et||!g.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ut}=ot,{$from:ct,empty:dt}=ut;if(ct.parent.type!==this.type)return!1;const ft=" ".repeat(et);return dt?it.commands.insertContent(ft):it.commands.command(({tr:St})=>{const{from:kt,to:Tt}=ut,jt=ot.doc.textBetween(kt,Tt,`
`,`
`).split(`
`).map(Bt=>ft+Bt).join(`
`);return St.replaceWith(kt,Tt,ot.schema.text(jt)),!0})},"Shift-Tab":({editor:it})=>{var g;if(!this.options.enableTabIndentation)return!1;const et=(g=this.options.tabSize)!=null?g:DEFAULT_TAB_SIZE,{state:ot}=it,{selection:ut}=ot,{$from:ct,empty:dt}=ut;return ct.parent.type!==this.type?!1:dt?it.commands.command(({tr:ft})=>{var St;const{pos:kt}=ct,Tt=ct.start(),Rt=ct.end(),jt=ot.doc.textBetween(Tt,Rt,`
`,`
`).split(`
`);let Bt=0,zt=0;const Ht=kt-Tt;for(let ir=0;ir<jt.length;ir+=1){if(zt+jt[ir].length>=Ht){Bt=ir;break}zt+=jt[ir].length+1}const Kt=((St=jt[Bt].match(/^ */))==null?void 0:St[0])||"",Yt=Math.min(Kt.length,et);if(Yt===0)return!0;let er=Tt;for(let ir=0;ir<Bt;ir+=1)er+=jt[ir].length+1;return ft.delete(er,er+Yt),kt-er<=Yt&&ft.setSelection(TextSelection.create(ft.doc,er)),!0}):it.commands.command(({tr:ft})=>{const{from:St,to:kt}=ut,Ft=ot.doc.textBetween(St,kt,`
`,`
`).split(`
`).map(jt=>{var Bt;const zt=((Bt=jt.match(/^ */))==null?void 0:Bt[0])||"",Ht=Math.min(zt.length,et);return jt.slice(Ht)}).join(`
`);return ft.replaceWith(St,kt,ot.schema.text(Ft)),!0})},Enter:({editor:it})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:g}=it,{selection:et}=g,{$from:ot,empty:ut}=et;if(!ut||ot.parent.type!==this.type)return!1;const ct=ot.parentOffset===ot.parent.nodeSize-2,dt=ot.parent.textContent.endsWith(`

`);return!ct||!dt?!1:it.chain().command(({tr:ft})=>(ft.delete(ot.pos-2,ot.pos),!0)).exitCode().run()},ArrowDown:({editor:it})=>{if(!this.options.exitOnArrowDown)return!1;const{state:g}=it,{selection:et,doc:ot}=g,{$from:ut,empty:ct}=et;if(!ct||ut.parent.type!==this.type||!(ut.parentOffset===ut.parent.nodeSize-2))return!1;const ft=ut.after();return ft===void 0?!1:ot.nodeAt(ft)?it.commands.command(({tr:kt})=>(kt.setSelection(Selection.near(ot.resolve(ft))),!0)):it.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:it=>({language:it[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:it=>({language:it[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(it,g)=>{if(!g.clipboardData||this.editor.isActive(this.type.name))return!1;const et=g.clipboardData.getData("text/plain"),ot=g.clipboardData.getData("vscode-editor-data"),ut=ot?JSON.parse(ot):void 0,ct=ut==null?void 0:ut.mode;if(!et||!ct)return!1;const{tr:dt,schema:ft}=it.state,St=ft.text(et.replace(/\r\n?/g,`
`));return dt.replaceSelectionWith(this.type.create({language:ct},St)),dt.selection.$from.parent.type!==this.type&&dt.setSelection(TextSelection.near(dt.doc.resolve(Math.max(0,dt.selection.from-2)))),dt.setMeta("paste",!0),it.dispatch(dt),!0}}})]}}),Document$2=Node3.create({name:"doc",topNode:!0,content:"block+"}),HardBreak=Node3.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:it}){return["br",mergeAttributes(this.options.HTMLAttributes,it)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:it,chain:g,state:et,editor:ot})=>it.first([()=>it.exitCode(),()=>it.command(()=>{const{selection:ut,storedMarks:ct}=et;if(ut.$from.parent.type.spec.isolating)return!1;const{keepMarks:dt}=this.options,{splittableMarks:ft}=ot.extensionManager,St=ct||ut.$to.parentOffset&&ut.$from.marks();return g().insertContent({type:this.name}).command(({tr:kt,dispatch:Tt})=>{if(Tt&&St&&dt){const Rt=St.filter(Ft=>ft.includes(Ft.type.name));kt.ensureMarks(Rt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node3.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(it=>({tag:`h${it}`,attrs:{level:it}}))},renderHTML({node:it,HTMLAttributes:g}){return[`h${this.options.levels.includes(it.attrs.level)?it.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,g),0]},addCommands(){return{setHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.setNode(this.name,it):!1,toggleHeading:it=>({commands:g})=>this.options.levels.includes(it.level)?g.toggleNode(this.name,"paragraph",it):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((it,g)=>({...it,[`Mod-Alt-${g}`]:()=>this.editor.commands.toggleHeading({level:g})}),{})},addInputRules(){return this.options.levels.map(it=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${it}})\\s$`),type:this.type,getAttributes:{level:it}}))}}),HorizontalRule=Node3.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:it}){return["hr",mergeAttributes(this.options.HTMLAttributes,it)]},addCommands(){return{setHorizontalRule:()=>({chain:it,state:g})=>{if(!canInsertNode(g,g.schema.nodes[this.name]))return!1;const{selection:et}=g,{$to:ot}=et,ut=it();return isNodeSelection(et)?ut.insertContentAt(ot.pos,{type:this.name}):ut.insertContent({type:this.name}),ut.command(({state:ct,tr:dt,dispatch:ft})=>{if(ft){const{$to:St}=dt.selection,kt=St.end();if(St.nodeAfter)St.nodeAfter.isTextblock?dt.setSelection(TextSelection.create(dt.doc,St.pos+1)):St.nodeAfter.isBlock?dt.setSelection(NodeSelection.create(dt.doc,St.pos)):dt.setSelection(TextSelection.create(dt.doc,St.pos));else{const Tt=ct.schema.nodes[this.options.nextNodeType]||St.parent.type.contentMatch.defaultType,Rt=Tt==null?void 0:Tt.create();Rt&&(dt.insert(kt,Rt),dt.setSelection(TextSelection.create(dt.doc,kt+1)))}dt.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:it=>it.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:it=>it.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:it}){return["em",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setItalic:()=>({commands:it})=>it.setMark(this.name),toggleItalic:()=>({commands:it})=>it.toggleMark(this.name),unsetItalic:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(it,g){return it in g||(g[it]=[]),g[it]}function addToGroups(it,g,et){g[numeric]&&(g[asciinumeric]=!0,g[alphanumeric]=!0),g[ascii]&&(g[asciinumeric]=!0,g[alpha]=!0),g[asciinumeric]&&(g[alphanumeric]=!0),g[alpha]&&(g[alphanumeric]=!0),g[alphanumeric]&&(g[domain]=!0),g[emoji]&&(g[domain]=!0);for(const ot in g){const ut=registerGroup(ot,et);ut.indexOf(it)<0&&ut.push(it)}}function flagsForToken(it,g){const et={};for(const ot in g)g[ot].indexOf(it)>=0&&(et[ot]=!0);return et}function State(it=null){this.j={},this.jr=[],this.jd=null,this.t=it}State.groups={};State.prototype={accepts(){return!!this.t},go(it){const g=this,et=g.j[it];if(et)return et;for(let ot=0;ot<g.jr.length;ot++){const ut=g.jr[ot][0],ct=g.jr[ot][1];if(ct&&ut.test(it))return ct}return g.jd},has(it,g=!1){return g?it in this.j:!!this.go(it)},ta(it,g,et,ot){for(let ut=0;ut<it.length;ut++)this.tt(it[ut],g,et,ot)},tr(it,g,et,ot){ot=ot||State.groups;let ut;return g&&g.j?ut=g:(ut=new State(g),et&&ot&&addToGroups(g,et,ot)),this.jr.push([it,ut]),ut},ts(it,g,et,ot){let ut=this;const ct=it.length;if(!ct)return ut;for(let dt=0;dt<ct-1;dt++)ut=ut.tt(it[dt]);return ut.tt(it[ct-1],g,et,ot)},tt(it,g,et,ot){ot=ot||State.groups;const ut=this;if(g&&g.j)return ut.j[it]=g,g;const ct=g;let dt,ft=ut.go(it);if(ft?(dt=new State,Object.assign(dt.j,ft.j),dt.jr.push.apply(dt.jr,ft.jr),dt.jd=ft.jd,dt.t=ft.t):dt=new State,ct){if(ot)if(dt.t&&typeof dt.t=="string"){const St=Object.assign(flagsForToken(dt.t,ot),et);addToGroups(ct,St,ot)}else et&&addToGroups(ct,et,ot);dt.t=ct}return ut.j[it]=dt,dt}};const ta=(it,g,et,ot,ut)=>it.ta(g,et,ot,ut),tr=(it,g,et,ot,ut)=>it.tr(g,et,ot,ut),ts=(it,g,et,ot,ut)=>it.ts(g,et,ot,ut),tt=(it,g,et,ot,ut)=>it.tt(g,et,ot,ut),WORD$1="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA$1="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS$1="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA:COMMA$1,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS:EQUALS$1,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD:WORD$1,WS});const ASCII_LETTER=/[a-z]/,LETTER=/\p{L}/u,EMOJI=/\p{Emoji}/u,DIGIT=/\d/,SPACE$2=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="",EMOJI_JOINER="",OBJECT_REPLACEMENT="";let tlds=null,utlds=null;function init$2(it=[]){const g={};State.groups=g;const et=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(et,"'",APOSTROPHE),tt(et,"{",OPENBRACE),tt(et,"}",CLOSEBRACE),tt(et,"[",OPENBRACKET),tt(et,"]",CLOSEBRACKET),tt(et,"(",OPENPAREN),tt(et,")",CLOSEPAREN),tt(et,"<",OPENANGLEBRACKET),tt(et,">",CLOSEANGLEBRACKET),tt(et,"",FULLWIDTHLEFTPAREN),tt(et,"",FULLWIDTHRIGHTPAREN),tt(et,"",LEFTCORNERBRACKET),tt(et,"",RIGHTCORNERBRACKET),tt(et,"",LEFTWHITECORNERBRACKET),tt(et,"",RIGHTWHITECORNERBRACKET),tt(et,"",FULLWIDTHLESSTHAN),tt(et,"",FULLWIDTHGREATERTHAN),tt(et,"&",AMPERSAND),tt(et,"*",ASTERISK),tt(et,"@",AT),tt(et,"`",BACKTICK),tt(et,"^",CARET),tt(et,":",COLON),tt(et,",",COMMA$1),tt(et,"$",DOLLAR),tt(et,".",DOT),tt(et,"=",EQUALS$1),tt(et,"!",EXCLAMATION),tt(et,"-",HYPHEN),tt(et,"%",PERCENT),tt(et,"|",PIPE),tt(et,"+",PLUS),tt(et,"#",POUND),tt(et,"?",QUERY),tt(et,'"',QUOTE),tt(et,"/",SLASH),tt(et,";",SEMI),tt(et,"~",TILDE),tt(et,"_",UNDERSCORE),tt(et,"\\",BACKSLASH),tt(et,"",FULLWIDTHMIDDLEDOT);const ot=tr(et,DIGIT,NUM,{[numeric]:!0});tr(ot,DIGIT,ot);const ut=tr(ot,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),ct=tr(ot,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),dt=tr(et,ASCII_LETTER,WORD$1,{[ascii]:!0});tr(dt,DIGIT,ut),tr(dt,ASCII_LETTER,dt),tr(ut,DIGIT,ut),tr(ut,ASCII_LETTER,ut);const ft=tr(et,LETTER,UWORD,{[alpha]:!0});tr(ft,ASCII_LETTER),tr(ft,DIGIT,ct),tr(ft,LETTER,ft),tr(ct,DIGIT,ct),tr(ct,ASCII_LETTER),tr(ct,LETTER,ct);const St=tt(et,LF,NL,{[whitespace]:!0}),kt=tt(et,CR,WS,{[whitespace]:!0}),Tt=tr(et,SPACE$2,WS,{[whitespace]:!0});tt(et,OBJECT_REPLACEMENT,Tt),tt(kt,LF,St),tt(kt,OBJECT_REPLACEMENT,Tt),tr(kt,SPACE$2,Tt),tt(Tt,CR),tt(Tt,LF),tr(Tt,SPACE$2,Tt),tt(Tt,OBJECT_REPLACEMENT,Tt);const Rt=tr(et,EMOJI,EMOJI$1,{[emoji]:!0});tt(Rt,"#"),tr(Rt,EMOJI,Rt),tt(Rt,EMOJI_VARIATION,Rt);const Ft=tt(Rt,EMOJI_JOINER);tt(Ft,"#"),tr(Ft,EMOJI,Rt);const jt=[[ASCII_LETTER,dt],[DIGIT,ut]],Bt=[[ASCII_LETTER,null],[LETTER,ft],[DIGIT,ct]];for(let zt=0;zt<tlds.length;zt++)fastts(et,tlds[zt],TLD,WORD$1,jt);for(let zt=0;zt<utlds.length;zt++)fastts(et,utlds[zt],UTLD,UWORD,Bt);addToGroups(TLD,{tld:!0,ascii:!0},g),addToGroups(UTLD,{utld:!0,alpha:!0},g),fastts(et,"file",SCHEME,WORD$1,jt),fastts(et,"mailto",SCHEME,WORD$1,jt),fastts(et,"http",SLASH_SCHEME,WORD$1,jt),fastts(et,"https",SLASH_SCHEME,WORD$1,jt),fastts(et,"ftp",SLASH_SCHEME,WORD$1,jt),fastts(et,"ftps",SLASH_SCHEME,WORD$1,jt),addToGroups(SCHEME,{scheme:!0,ascii:!0},g),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},g),it=it.sort((zt,Ht)=>zt[0]>Ht[0]?1:-1);for(let zt=0;zt<it.length;zt++){const Ht=it[zt][0],Kt=it[zt][1]?{[scheme]:!0}:{[slashscheme]:!0};Ht.indexOf("-")>=0?Kt[domain]=!0:ASCII_LETTER.test(Ht)?DIGIT.test(Ht)?Kt[asciinumeric]=!0:Kt[ascii]=!0:Kt[numeric]=!0,ts(et,Ht,Ht,Kt)}return ts(et,"localhost",LOCALHOST,{ascii:!0}),et.jd=new State(SYM),{start:et,tokens:Object.assign({groups:g},tk)}}function run$1(it,g){const et=stringToArray$1(g.replace(/[A-Z]/g,ft=>ft.toLowerCase())),ot=et.length,ut=[];let ct=0,dt=0;for(;dt<ot;){let ft=it,St=null,kt=0,Tt=null,Rt=-1,Ft=-1;for(;dt<ot&&(St=ft.go(et[dt]));)ft=St,ft.accepts()?(Rt=0,Ft=0,Tt=ft):Rt>=0&&(Rt+=et[dt].length,Ft++),kt+=et[dt].length,ct+=et[dt].length,dt++;ct-=Rt,dt-=Ft,kt-=Rt,ut.push({t:Tt.t,v:g.slice(ct-kt,ct),s:ct-kt,e:ct})}return ut}function stringToArray$1(it){const g=[],et=it.length;let ot=0;for(;ot<et;){let ut=it.charCodeAt(ot),ct,dt=ut<55296||ut>56319||ot+1===et||(ct=it.charCodeAt(ot+1))<56320||ct>57343?it[ot]:it.slice(ot,ot+2);g.push(dt),ot+=dt.length}return g}function fastts(it,g,et,ot,ut){let ct;const dt=g.length;for(let ft=0;ft<dt-1;ft++){const St=g[ft];it.j[St]?ct=it.j[St]:(ct=new State(ot),ct.jr=ut.slice(),it.j[St]=ct),it=ct}return ct=new State(et),ct.jr=ut.slice(),it.j[g[dt-1]]=ct,ct}function decodeTlds(it){const g=[],et=[];let ot=0,ut="0123456789";for(;ot<it.length;){let ct=0;for(;ut.indexOf(it[ot+ct])>=0;)ct++;if(ct>0){g.push(et.join(""));for(let dt=parseInt(it.substring(ot,ot+ct),10);dt>0;dt--)et.pop();ot+=ct}else et.push(it[ot]),ot++}return g}const defaults={defaultProtocol:"http",events:null,format:noop$1,formatHref:noop$1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(it,g=null){let et=Object.assign({},defaults);it&&(et=Object.assign(et,it instanceof Options?it.o:it));const ot=et.ignoreTags,ut=[];for(let ct=0;ct<ot.length;ct++)ut.push(ot[ct].toUpperCase());this.o=et,g&&(this.defaultRender=g),this.ignoreTags=ut}Options.prototype={o:defaults,ignoreTags:[],defaultRender(it){return it},check(it){return this.get("validate",it.toString(),it)},get(it,g,et){const ot=g!=null;let ut=this.o[it];return ut&&(typeof ut=="object"?(ut=et.t in ut?ut[et.t]:defaults[it],typeof ut=="function"&&ot&&(ut=ut(g,et))):typeof ut=="function"&&ot&&(ut=ut(g,et.t,et)),ut)},getObj(it,g,et){let ot=this.o[it];return typeof ot=="function"&&g!=null&&(ot=ot(g,et.t,et)),ot},render(it){const g=it.render(this);return(this.get("render",null,it)||this.defaultRender)(g,it.t,it)}};function noop$1(it){return it}function MultiToken(it,g){this.t="token",this.v=it,this.tk=g}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(it){return this.toString()},toFormattedString(it){const g=this.toString(),et=it.get("truncate",g,this),ot=it.get("format",g,this);return et&&ot.length>et?ot.substring(0,et)+"":ot},toFormattedHref(it){return it.get("formatHref",this.toHref(it.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(it=defaults.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(it),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(it){return{type:this.t,value:this.toFormattedString(it),isLink:this.isLink,href:this.toFormattedHref(it),start:this.startIndex(),end:this.endIndex()}},validate(it){return it.get("validate",this.toString(),this)},render(it){const g=this,et=this.toHref(it.get("defaultProtocol")),ot=it.get("formatHref",et,this),ut=it.get("tagName",et,g),ct=this.toFormattedString(it),dt={},ft=it.get("className",et,g),St=it.get("target",et,g),kt=it.get("rel",et,g),Tt=it.getObj("attributes",et,g),Rt=it.getObj("events",et,g);return dt.href=ot,ft&&(dt.class=ft),St&&(dt.target=St),kt&&(dt.rel=kt),Tt&&Object.assign(dt,Tt),{tagName:ut,attributes:dt,content:ct,eventListeners:Rt}}};function createTokenClass(it,g){class et extends MultiToken{constructor(ut,ct){super(ut,ct),this.t=it}}for(const ot in g)et.prototype[ot]=g[ot];return et.t=it,et}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$4=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(it=defaults.defaultProtocol){return this.hasProtocol()?this.v:`${it}://${this.v}`},hasProtocol(){const it=this.tk;return it.length>=2&&it[0].t!==LOCALHOST&&it[1].t===COLON}}),makeState=it=>new State(it);function init$1({groups:it}){const g=it.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS$1,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),et=[APOSTROPHE,COLON,COMMA$1,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],ot=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS$1,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],ut=makeState(),ct=tt(ut,TILDE);ta(ct,ot,ct),ta(ct,it.domain,ct);const dt=makeState(),ft=makeState(),St=makeState();ta(ut,it.domain,dt),ta(ut,it.scheme,ft),ta(ut,it.slashscheme,St),ta(dt,ot,ct),ta(dt,it.domain,dt);const kt=tt(dt,AT);tt(ct,AT,kt),tt(ft,AT,kt),tt(St,AT,kt);const Tt=tt(ct,DOT);ta(Tt,ot,ct),ta(Tt,it.domain,ct);const Rt=makeState();ta(kt,it.domain,Rt),ta(Rt,it.domain,Rt);const Ft=tt(Rt,DOT);ta(Ft,it.domain,Rt);const jt=makeState(Email);ta(Ft,it.tld,jt),ta(Ft,it.utld,jt),tt(kt,LOCALHOST,jt);const Bt=tt(Rt,HYPHEN);tt(Bt,HYPHEN,Bt),ta(Bt,it.domain,Rt),ta(jt,it.domain,Rt),tt(jt,DOT,Ft),tt(jt,HYPHEN,Bt);const zt=tt(jt,COLON);ta(zt,it.numeric,Email);const Ht=tt(dt,HYPHEN),Ut=tt(dt,DOT);tt(Ht,HYPHEN,Ht),ta(Ht,it.domain,dt),ta(Ut,ot,ct),ta(Ut,it.domain,dt);const Kt=makeState(Url);ta(Ut,it.tld,Kt),ta(Ut,it.utld,Kt),ta(Kt,it.domain,dt),ta(Kt,ot,ct),tt(Kt,DOT,Ut),tt(Kt,HYPHEN,Ht),tt(Kt,AT,kt);const Yt=tt(Kt,COLON),er=makeState(Url);ta(Yt,it.numeric,er);const ar=makeState(Url),ir=makeState();ta(ar,g,ar),ta(ar,et,ir),ta(ir,g,ar),ta(ir,et,ir),tt(Kt,SLASH,ar),tt(er,SLASH,ar);const lr=tt(ft,COLON),cr=tt(St,COLON),vr=tt(cr,SLASH),xr=tt(vr,SLASH);ta(ft,it.domain,dt),tt(ft,DOT,Ut),tt(ft,HYPHEN,Ht),ta(St,it.domain,dt),tt(St,DOT,Ut),tt(St,HYPHEN,Ht),ta(lr,it.domain,ar),tt(lr,SLASH,ar),tt(lr,QUERY,ar),ta(xr,it.domain,ar),ta(xr,g,ar),tt(xr,SLASH,ar);const yr=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let Sr=0;Sr<yr.length;Sr++){const[kr,Pr]=yr[Sr],Or=tt(ar,kr);tt(ir,kr,Or),tt(Or,Pr,ar);const hr=makeState(Url);ta(Or,g,hr);const Tr=makeState();ta(Or,et),ta(hr,g,hr),ta(hr,et,Tr),ta(Tr,g,hr),ta(Tr,et,Tr),tt(hr,Pr,ar),tt(Tr,Pr,ar)}return tt(ut,LOCALHOST,Kt),tt(ut,NL,Nl),{start:ut,tokens:tk}}function run(it,g,et){let ot=et.length,ut=0,ct=[],dt=[];for(;ut<ot;){let ft=it,St=null,kt=null,Tt=0,Rt=null,Ft=-1;for(;ut<ot&&!(St=ft.go(et[ut].t));)dt.push(et[ut++]);for(;ut<ot&&(kt=St||ft.go(et[ut].t));)St=null,ft=kt,ft.accepts()?(Ft=0,Rt=ft):Ft>=0&&Ft++,ut++,Tt++;if(Ft<0)ut-=Tt,ut<ot&&(dt.push(et[ut]),ut++);else{dt.length>0&&(ct.push(initMultiToken(Text$4,g,dt)),dt=[]),ut-=Ft,Tt-=Ft;const jt=Rt.t,Bt=et.slice(ut-Tt,ut);ct.push(initMultiToken(jt,g,Bt))}}return dt.length>0&&ct.push(initMultiToken(Text$4,g,dt)),ct}function initMultiToken(it,g,et){const ot=et[0].s,ut=et[et.length-1].e,ct=g.slice(ot,ut);return new it(ct,et)}const warn$1=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(it,g=!1){if(INIT.initialized&&warn$1(`linkifyjs: already initialized - will not register custom scheme "${it}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(it))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([it,g])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let it=0;it<INIT.tokenQueue.length;it++)INIT.tokenQueue[it][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let it=0;it<INIT.pluginQueue.length;it++)INIT.pluginQueue[it][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(it){return INIT.initialized||init(),run(INIT.parser.start,it,run$1(INIT.scanner.start,it))}tokenize.scan=run$1;function find$1(it,g=null,et=null){if(g&&typeof g=="object"){if(et)throw Error(`linkifyjs: Invalid link type ${g}; must be a string`);et=g,g=null}const ot=new Options(et),ut=tokenize(it),ct=[];for(let dt=0;dt<ut.length;dt++){const ft=ut[dt];ft.isLink&&(!g||ft.t===g)&&ot.check(ft)&&ct.push(ft.toFormattedObject(ot))}return ct}var UNICODE_WHITESPACE_PATTERN="[\0- -\u2029]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(it){return it.length===1?it[0].isLink:it.length===3&&it[1].isLink?["()","[]"].includes(it[0].value+it[2].value):!1}function autolink(it){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(g,et,ot)=>{const ut=g.some(kt=>kt.docChanged)&&!et.doc.eq(ot.doc),ct=g.some(kt=>kt.getMeta("preventAutolink"));if(!ut||ct)return;const{tr:dt}=ot,ft=combineTransactionSteps(et.doc,[...g]);if(getChangedRanges(ft).forEach(({newRange:kt})=>{const Tt=findChildrenInRange(ot.doc,kt,jt=>jt.isTextblock);let Rt,Ft;if(Tt.length>1)Rt=Tt[0],Ft=ot.doc.textBetween(Rt.pos,Rt.pos+Rt.node.nodeSize,void 0," ");else if(Tt.length){const jt=ot.doc.textBetween(kt.from,kt.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test(jt))return;Rt=Tt[0],Ft=ot.doc.textBetween(Rt.pos,kt.to,void 0," ")}if(Rt&&Ft){const jt=Ft.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if(jt.length<=0)return!1;const Bt=jt[jt.length-1],zt=Rt.pos+Ft.lastIndexOf(Bt);if(!Bt)return!1;const Ht=tokenize(Bt).map(Ut=>Ut.toObject(it.defaultProtocol));if(!isValidLinkStructure(Ht))return!1;Ht.filter(Ut=>Ut.isLink).map(Ut=>({...Ut,from:zt+Ut.start+1,to:zt+Ut.end+1})).filter(Ut=>ot.schema.marks.code?!ot.doc.rangeHasMark(Ut.from,Ut.to,ot.schema.marks.code):!0).filter(Ut=>it.validate(Ut.value)).filter(Ut=>it.shouldAutoLink(Ut.value)).forEach(Ut=>{getMarksBetween(Ut.from,Ut.to,ot.doc).some(Kt=>Kt.mark.type===it.type)||dt.addMark(Ut.from,Ut.to,it.type.create({href:Ut.href}))})}}),!!dt.steps.length)return dt}})}function clickHandler(it){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(g,et,ot)=>{var ut,ct;if(ot.button!==0||!g.editable)return!1;let dt=null;if(ot.target instanceof HTMLAnchorElement)dt=ot.target;else{let Tt=ot.target;const Rt=[];for(;Tt.nodeName!=="DIV";)Rt.push(Tt),Tt=Tt.parentNode;dt=Rt.find(Ft=>Ft.nodeName==="A")}if(!dt)return!1;const ft=getAttributes$1(g.state,it.type.name),St=(ut=dt==null?void 0:dt.href)!=null?ut:ft.href,kt=(ct=dt==null?void 0:dt.target)!=null?ct:ft.target;return it.enableClickSelection&&it.editor.commands.extendMarkRange(it.type.name),dt&&St?(window.open(St,kt),!0):!1}}})}function pasteHandler(it){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(g,et,ot)=>{const{state:ut}=g,{selection:ct}=ut,{empty:dt}=ct;if(dt)return!1;let ft="";ot.content.forEach(kt=>{ft+=kt.textContent});const St=find$1(ft,{defaultProtocol:it.defaultProtocol}).find(kt=>kt.isLink&&kt.value===ft);return!ft||!St?!1:it.editor.commands.setMark(it.type,{href:St.href})}}})}function isAllowedUri(it,g){const et=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return g&&g.forEach(ot=>{const ut=typeof ot=="string"?ot:ot.scheme;ut&&et.push(ut)}),!it||it.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${et.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(it=>{if(typeof it=="string"){registerCustomProtocol(it);return}registerCustomProtocol(it.scheme,it.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(it,g)=>!!isAllowedUri(it,g.protocols),validate:it=>!!it,shouldAutoLink:it=>!!it}},addAttributes(){return{href:{default:null,parseHTML(it){return it.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:it=>{const g=it.getAttribute("href");return!g||!this.options.isAllowedUri(g,{defaultValidate:et=>!!isAllowedUri(et,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:it}){return this.options.isAllowedUri(it.href,{defaultValidate:g=>!!isAllowedUri(g,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,it),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...it,href:""}),0]},addCommands(){return{setLink:it=>({chain:g})=>{const{href:et}=it;return this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?g().setMark(this.name,it).setMeta("preventAutolink",!0).run():!1},toggleLink:it=>({chain:g})=>{const{href:et}=it||{};return et&&!this.options.isAllowedUri(et,{defaultValidate:ot=>!!isAllowedUri(ot,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:g().toggleMark(this.name,it,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:it})=>it().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:it=>{const g=[];if(it){const{protocols:et,defaultProtocol:ot}=this.options,ut=find$1(it).filter(ct=>ct.isLink&&this.options.isAllowedUri(ct.value,{defaultValidate:dt=>!!isAllowedUri(dt,et),protocols:et,defaultProtocol:ot}));ut.length&&ut.forEach(ct=>g.push({text:ct.value,data:{href:ct.href},index:ct.start}))}return g},type:this.type,getAttributes:it=>{var g;return{href:(g=it.data)==null?void 0:g.href}}})]},addProseMirrorPlugins(){const it=[],{protocols:g,defaultProtocol:et}=this.options;return this.options.autolink&&it.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:ot=>this.options.isAllowedUri(ot,{defaultValidate:ut=>!!isAllowedUri(ut,g),protocols:g,defaultProtocol:et}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&it.push(clickHandler({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&it.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),it}}),index_default$9=Link,__defProp$1=Object.defineProperty,__export=(it,g)=>{for(var et in g)__defProp$1(it,et,{get:g[et],enumerable:!0})},ListItemName="listItem",TextStyleName="textStyle",bulletListInputRegex=/^\s*([-+*])\s$/,BulletList=Node3.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleBulletList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let it=wrappingInputRule({find:bulletListInputRegex,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:bulletListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName),editor:this.editor})),[it]}}),ListItem=Node3.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:it}){return["li",mergeAttributes(this.options.HTMLAttributes,it),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),listHelpers_exports={};__export(listHelpers_exports,{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(it,g)=>{const{$from:et}=g.selection,ot=getNodeType(it,g.schema);let ut=null,ct=et.depth,dt=et.pos,ft=null;for(;ct>0&&ft===null;)ut=et.node(ct),ut.type===ot?ft=ct:(ct-=1,dt-=1);return ft===null?null:{$pos:g.doc.resolve(dt),depth:ft}},getNextListDepth=(it,g)=>{const et=findListItemPos(it,g);if(!et)return!1;const[,ot]=getNodeAtPosition(g,it,et.$pos.pos+4);return ot},hasListBefore=(it,g,et)=>{const{$anchor:ot}=it.selection,ut=Math.max(0,ot.pos-2),ct=it.doc.resolve(ut).node();return!(!ct||!et.includes(ct.type.name))},hasListItemBefore=(it,g)=>{var et;const{$anchor:ot}=g.selection,ut=g.doc.resolve(ot.pos-2);return!(ut.index()===0||((et=ut.nodeBefore)==null?void 0:et.type.name)!==it)},listItemHasSubList=(it,g,et)=>{if(!et)return!1;const ot=getNodeType(it,g.schema);let ut=!1;return et.descendants(ct=>{ct.type===ot&&(ut=!0)}),ut},handleBackspace=(it,g,et)=>{if(it.commands.undoInputRule())return!0;if(it.state.selection.from!==it.state.selection.to)return!1;if(!isNodeActive(it.state,g)&&hasListBefore(it.state,g,et)){const{$anchor:ft}=it.state.selection,St=it.state.doc.resolve(ft.before()-1),kt=[];St.node().descendants((Ft,jt)=>{Ft.type.name===g&&kt.push({node:Ft,pos:jt})});const Tt=kt.at(-1);if(!Tt)return!1;const Rt=it.state.doc.resolve(St.start()+Tt.pos+1);return it.chain().cut({from:ft.start()-1,to:ft.end()+1},Rt.end()).joinForward().run()}if(!isNodeActive(it.state,g)||!isAtStartOfNode(it.state))return!1;const ot=findListItemPos(g,it.state);if(!ot)return!1;const ct=it.state.doc.resolve(ot.$pos.pos-2).node(ot.depth),dt=listItemHasSubList(g,it.state,ct);return hasListItemBefore(g,it.state)&&!dt?it.commands.joinItemBackward():it.chain().liftListItem(g).run()},nextListIsDeeper=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et>ot.depth},nextListIsHigher=(it,g)=>{const et=getNextListDepth(it,g),ot=findListItemPos(it,g);return!ot||!et?!1:et<ot.depth},handleDelete=(it,g)=>{if(!isNodeActive(it.state,g)||!isAtEndOfNode(it.state,g))return!1;const{selection:et}=it.state,{$from:ot,$to:ut}=et;return!et.empty&&ot.sameParent(ut)?!1:nextListIsDeeper(g,it.state)?it.chain().focus(it.state.selection.from+4).lift(g).joinBackward().run():nextListIsHigher(g,it.state)?it.chain().joinForward().joinBackward().run():it.commands.joinItemForward()},hasListItemAfter=(it,g)=>{var et;const{$anchor:ot}=g.selection,ut=g.doc.resolve(ot.pos-ot.parentOffset-2);return!(ut.index()===ut.parent.childCount-1||((et=ut.nodeAfter)==null?void 0:et.type.name)!==it)},ListKeymap=Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},"Mod-Delete":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et})=>{it.state.schema.nodes[et]!==void 0&&handleDelete(it,et)&&(g=!0)}),g},Backspace:({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g},"Mod-Backspace":({editor:it})=>{let g=!1;return this.options.listTypes.forEach(({itemName:et,wrapperNames:ot})=>{it.state.schema.nodes[et]!==void 0&&handleBackspace(it,et,ot)&&(g=!0)}),g}}}}),ListItemName2="listItem",TextStyleName2="textStyle",orderedListInputRegex=/^(\d+)\.\s$/,OrderedList=Node3.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:it=>it.hasAttribute("start")?parseInt(it.getAttribute("start")||"",10):1},type:{default:null,parseHTML:it=>it.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:it}){const{start:g,...et}=it;return g===1?["ol",mergeAttributes(this.options.HTMLAttributes,et),0]:["ol",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{toggleOrderedList:()=>({commands:it,chain:g})=>this.options.keepAttributes?g().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName2,this.editor.getAttributes(TextStyleName2)).run():it.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let it=wrappingInputRule({find:orderedListInputRegex,type:this.type,getAttributes:g=>({start:+g[1]}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(it=wrappingInputRule({find:orderedListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:g=>({start:+g[1],...this.editor.getAttributes(TextStyleName2)}),joinPredicate:(g,et)=>et.childCount+et.attrs.start===+g[1],editor:this.editor})),[it]}}),inputRegex$3=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node3.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:it=>{const g=it.getAttribute("data-checked");return g===""||g==="true"},renderHTML:it=>({"data-checked":it.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:it,HTMLAttributes:g}){return["li",mergeAttributes(this.options.HTMLAttributes,g,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:it.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const it={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...it,Tab:()=>this.editor.commands.sinkListItem(this.name)}:it},addNodeView(){return({node:it,HTMLAttributes:g,getPos:et,editor:ot})=>{const ut=document.createElement("li"),ct=document.createElement("label"),dt=document.createElement("span"),ft=document.createElement("input"),St=document.createElement("div"),kt=Tt=>{var Rt,Ft;ft.ariaLabel=((Ft=(Rt=this.options.a11y)==null?void 0:Rt.checkboxLabel)==null?void 0:Ft.call(Rt,Tt,ft.checked))||`Task item checkbox for ${Tt.textContent||"empty task item"}`};return kt(it),ct.contentEditable="false",ft.type="checkbox",ft.addEventListener("mousedown",Tt=>Tt.preventDefault()),ft.addEventListener("change",Tt=>{if(!ot.isEditable&&!this.options.onReadOnlyChecked){ft.checked=!ft.checked;return}const{checked:Rt}=Tt.target;ot.isEditable&&typeof et=="function"&&ot.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:Ft})=>{const jt=et();if(typeof jt!="number")return!1;const Bt=Ft.doc.nodeAt(jt);return Ft.setNodeMarkup(jt,void 0,{...Bt==null?void 0:Bt.attrs,checked:Rt}),!0}).run(),!ot.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(it,Rt)||(ft.checked=!ft.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([Tt,Rt])=>{ut.setAttribute(Tt,Rt)}),ut.dataset.checked=it.attrs.checked,ft.checked=it.attrs.checked,ct.append(ft,dt),ut.append(ct,St),Object.entries(g).forEach(([Tt,Rt])=>{ut.setAttribute(Tt,Rt)}),{dom:ut,contentDOM:St,update:Tt=>Tt.type!==this.type?!1:(ut.dataset.checked=Tt.attrs.checked,ft.checked=Tt.attrs.checked,kt(Tt),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$3,type:this.type,getAttributes:it=>({checked:it[it.length-1]==="x"})})]}}),TaskList=Node3.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:it}){return["ul",mergeAttributes(this.options.HTMLAttributes,it,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:it})=>it.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Extension.create({name:"listKit",addExtensions(){const it=[];return this.options.bulletList!==!1&&it.push(BulletList.configure(this.options.bulletList)),this.options.listItem!==!1&&it.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&it.push(ListKeymap.configure(this.options.listKeymap)),this.options.orderedList!==!1&&it.push(OrderedList.configure(this.options.orderedList)),this.options.taskItem!==!1&&it.push(TaskItem.configure(this.options.taskItem)),this.options.taskList!==!1&&it.push(TaskList.configure(this.options.taskList)),it}});var Paragraph=Node3.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:it}){return["p",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setParagraph:()=>({commands:it})=>it.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["s",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setStrike:()=>({commands:it})=>it.setMark(this.name),toggleStrike:()=>({commands:it})=>it.toggleMark(this.name),unsetStrike:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text$3=Node3.create({name:"text",group:"inline"}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:it=>it.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:it}){return["u",mergeAttributes(this.options.HTMLAttributes,it),0]},addCommands(){return{setUnderline:()=>({commands:it})=>it.setMark(this.name),toggleUnderline:()=>({commands:it})=>it.toggleMark(this.name),unsetUnderline:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),index_default$8=Underline;function dropCursor(it={}){return new Plugin({view(g){return new DropCursorView(g,it)}})}class DropCursorView{constructor(g,et){var ot;this.editorView=g,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(ot=et.width)!==null&&ot!==void 0?ot:1,this.color=et.color===!1?void 0:et.color||"black",this.class=et.class,this.handlers=["dragover","dragend","drop","dragleave"].map(ut=>{let ct=dt=>{this[ut](dt)};return g.dom.addEventListener(ut,ct),{name:ut,handler:ct}})}destroy(){this.handlers.forEach(({name:g,handler:et})=>this.editorView.dom.removeEventListener(g,et))}update(g,et){this.cursorPos!=null&&et.doc!=g.state.doc&&(this.cursorPos>g.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(g){g!=this.cursorPos&&(this.cursorPos=g,g==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let g=this.editorView.state.doc.resolve(this.cursorPos),et=!g.parent.inlineContent,ot,ut=this.editorView.dom,ct=ut.getBoundingClientRect(),dt=ct.width/ut.offsetWidth,ft=ct.height/ut.offsetHeight;if(et){let Rt=g.nodeBefore,Ft=g.nodeAfter;if(Rt||Ft){let jt=this.editorView.nodeDOM(this.cursorPos-(Rt?Rt.nodeSize:0));if(jt){let Bt=jt.getBoundingClientRect(),zt=Rt?Bt.bottom:Bt.top;Rt&&Ft&&(zt=(zt+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let Ht=this.width/2*ft;ot={left:Bt.left,right:Bt.right,top:zt-Ht,bottom:zt+Ht}}}}if(!ot){let Rt=this.editorView.coordsAtPos(this.cursorPos),Ft=this.width/2*dt;ot={left:Rt.left-Ft,right:Rt.left+Ft,top:Rt.top,bottom:Rt.bottom}}let St=this.editorView.dom.offsetParent;this.element||(this.element=St.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",et),this.element.classList.toggle("prosemirror-dropcursor-inline",!et);let kt,Tt;if(!St||St==document.body&&getComputedStyle(St).position=="static")kt=-pageXOffset,Tt=-pageYOffset;else{let Rt=St.getBoundingClientRect(),Ft=Rt.width/St.offsetWidth,jt=Rt.height/St.offsetHeight;kt=Rt.left-St.scrollLeft*Ft,Tt=Rt.top-St.scrollTop*jt}this.element.style.left=(ot.left-kt)/dt+"px",this.element.style.top=(ot.top-Tt)/ft+"px",this.element.style.width=(ot.right-ot.left)/dt+"px",this.element.style.height=(ot.bottom-ot.top)/ft+"px"}scheduleRemoval(g){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),g)}dragover(g){if(!this.editorView.editable)return;let et=this.editorView.posAtCoords({left:g.clientX,top:g.clientY}),ot=et&&et.inside>=0&&this.editorView.state.doc.nodeAt(et.inside),ut=ot&&ot.type.spec.disableDropCursor,ct=typeof ut=="function"?ut(this.editorView,et,g):ut;if(et&&!ct){let dt=et.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let ft=dropPoint(this.editorView.state.doc,dt,this.editorView.dragging.slice);ft!=null&&(dt=ft)}this.setCursor(dt),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(g){this.editorView.dom.contains(g.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor(g){super(g,g)}map(g,et){let ot=g.resolve(et.map(this.head));return GapCursor.valid(ot)?new GapCursor(ot):Selection.near(ot)}content(){return Slice.empty}eq(g){return g instanceof GapCursor&&g.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(g,et){if(typeof et.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(g.resolve(et.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(g){let et=g.parent;if(et.isTextblock||!closedBefore(g)||!closedAfter(g))return!1;let ot=et.type.spec.allowGapCursor;if(ot!=null)return ot;let ut=et.contentMatchAt(g.index()).defaultType;return ut&&ut.isTextblock}static findGapCursorFrom(g,et,ot=!1){e:for(;;){if(!ot&&GapCursor.valid(g))return g;let ut=g.pos,ct=null;for(let dt=g.depth;;dt--){let ft=g.node(dt);if(et>0?g.indexAfter(dt)<ft.childCount:g.index(dt)>0){ct=ft.child(et>0?g.indexAfter(dt):g.index(dt)-1);break}else if(dt==0)return null;ut+=et;let St=g.doc.resolve(ut);if(GapCursor.valid(St))return St}for(;;){let dt=et>0?ct.firstChild:ct.lastChild;if(!dt){if(ct.isAtom&&!ct.isText&&!NodeSelection.isSelectable(ct)){g=g.doc.resolve(ut+ct.nodeSize*et),ot=!1;continue e}break}ct=dt,ut+=et;let ft=g.doc.resolve(ut);if(GapCursor.valid(ft))return ft}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(g){this.pos=g}map(g){return new GapBookmark(g.map(this.pos))}resolve(g){let et=g.resolve(this.pos);return GapCursor.valid(et)?new GapCursor(et):Selection.near(et)}}function closedBefore(it){for(let g=it.depth;g>=0;g--){let et=it.index(g),ot=it.node(g);if(et==0){if(ot.type.spec.isolating)return!0;continue}for(let ut=ot.child(et-1);;ut=ut.lastChild){if(ut.childCount==0&&!ut.inlineContent||ut.isAtom||ut.type.spec.isolating)return!0;if(ut.inlineContent)return!1}}return!0}function closedAfter(it){for(let g=it.depth;g>=0;g--){let et=it.indexAfter(g),ot=it.node(g);if(et==ot.childCount){if(ot.type.spec.isolating)return!0;continue}for(let ut=ot.child(et);;ut=ut.firstChild){if(ut.childCount==0&&!ut.inlineContent||ut.isAtom||ut.type.spec.isolating)return!0;if(ut.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(it,g,et){return g.pos==et.pos&&GapCursor.valid(et)?new GapCursor(et):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(it,g){const et=it=="vert"?g>0?"down":"up":g>0?"right":"left";return function(ot,ut,ct){let dt=ot.selection,ft=g>0?dt.$to:dt.$from,St=dt.empty;if(dt instanceof TextSelection){if(!ct.endOfTextblock(et)||ft.depth==0)return!1;St=!1,ft=ot.doc.resolve(g>0?ft.after():ft.before())}let kt=GapCursor.findGapCursorFrom(ft,g,St);return kt?(ut&&ut(ot.tr.setSelection(new GapCursor(kt))),!0):!1}}function handleClick(it,g,et){if(!it||!it.editable)return!1;let ot=it.state.doc.resolve(g);if(!GapCursor.valid(ot))return!1;let ut=it.posAtCoords({left:et.clientX,top:et.clientY});return ut&&ut.inside>-1&&NodeSelection.isSelectable(it.state.doc.nodeAt(ut.inside))?!1:(it.dispatch(it.state.tr.setSelection(new GapCursor(ot))),!0)}function beforeinput(it,g){if(g.inputType!="insertCompositionText"||!(it.state.selection instanceof GapCursor))return!1;let{$from:et}=it.state.selection,ot=et.parent.contentMatchAt(et.index()).findWrapping(it.state.schema.nodes.text);if(!ot)return!1;let ut=Fragment.empty;for(let dt=ot.length-1;dt>=0;dt--)ut=Fragment.from(ot[dt].createAndFill(null,ut));let ct=it.state.tr.replace(et.pos,et.pos,new Slice(ut,0,0));return ct.setSelection(TextSelection.near(ct.doc.resolve(et.pos+1))),it.dispatch(ct),!1}function drawGapCursor(it){if(!(it.selection instanceof GapCursor))return null;let g=document.createElement("div");return g.className="ProseMirror-gapcursor",DecorationSet.create(it.doc,[Decoration.widget(it.selection.head,g,{key:"gapcursor"})])}var GOOD_LEAF_SIZE=200,RopeSequence=function it(){};RopeSequence.prototype.append=function it(g){return g.length?(g=RopeSequence.from(g),!this.length&&g||g.length<GOOD_LEAF_SIZE&&this.leafAppend(g)||this.length<GOOD_LEAF_SIZE&&g.leafPrepend(this)||this.appendInner(g)):this};RopeSequence.prototype.prepend=function it(g){return g.length?RopeSequence.from(g).append(this):this};RopeSequence.prototype.appendInner=function it(g){return new Append(this,g)};RopeSequence.prototype.slice=function it(g,et){return g===void 0&&(g=0),et===void 0&&(et=this.length),g>=et?RopeSequence.empty:this.sliceInner(Math.max(0,g),Math.min(this.length,et))};RopeSequence.prototype.get=function it(g){if(!(g<0||g>=this.length))return this.getInner(g)};RopeSequence.prototype.forEach=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length),et<=ot?this.forEachInner(g,et,ot,0):this.forEachInvertedInner(g,et,ot,0)};RopeSequence.prototype.map=function it(g,et,ot){et===void 0&&(et=0),ot===void 0&&(ot=this.length);var ut=[];return this.forEach(function(ct,dt){return ut.push(g(ct,dt))},et,ot),ut};RopeSequence.from=function it(g){return g instanceof RopeSequence?g:g&&g.length?new Leaf(g):RopeSequence.empty};var Leaf=function(it){function g(ot){it.call(this),this.values=ot}it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g;var et={length:{configurable:!0},depth:{configurable:!0}};return g.prototype.flatten=function(){return this.values},g.prototype.sliceInner=function(ut,ct){return ut==0&&ct==this.length?this:new g(this.values.slice(ut,ct))},g.prototype.getInner=function(ut){return this.values[ut]},g.prototype.forEachInner=function(ut,ct,dt,ft){for(var St=ct;St<dt;St++)if(ut(this.values[St],ft+St)===!1)return!1},g.prototype.forEachInvertedInner=function(ut,ct,dt,ft){for(var St=ct-1;St>=dt;St--)if(ut(this.values[St],ft+St)===!1)return!1},g.prototype.leafAppend=function(ut){if(this.length+ut.length<=GOOD_LEAF_SIZE)return new g(this.values.concat(ut.flatten()))},g.prototype.leafPrepend=function(ut){if(this.length+ut.length<=GOOD_LEAF_SIZE)return new g(ut.flatten().concat(this.values))},et.length.get=function(){return this.values.length},et.depth.get=function(){return 0},Object.defineProperties(g.prototype,et),g}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(it){function g(et,ot){it.call(this),this.left=et,this.right=ot,this.length=et.length+ot.length,this.depth=Math.max(et.depth,ot.depth)+1}return it&&(g.__proto__=it),g.prototype=Object.create(it&&it.prototype),g.prototype.constructor=g,g.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},g.prototype.getInner=function(ot){return ot<this.left.length?this.left.get(ot):this.right.get(ot-this.left.length)},g.prototype.forEachInner=function(ot,ut,ct,dt){var ft=this.left.length;if(ut<ft&&this.left.forEachInner(ot,ut,Math.min(ct,ft),dt)===!1||ct>ft&&this.right.forEachInner(ot,Math.max(ut-ft,0),Math.min(this.length,ct)-ft,dt+ft)===!1)return!1},g.prototype.forEachInvertedInner=function(ot,ut,ct,dt){var ft=this.left.length;if(ut>ft&&this.right.forEachInvertedInner(ot,ut-ft,Math.max(ct,ft)-ft,dt+ft)===!1||ct<ft&&this.left.forEachInvertedInner(ot,Math.min(ut,ft),ct,dt)===!1)return!1},g.prototype.sliceInner=function(ot,ut){if(ot==0&&ut==this.length)return this;var ct=this.left.length;return ut<=ct?this.left.slice(ot,ut):ot>=ct?this.right.slice(ot-ct,ut-ct):this.left.slice(ot,ct).append(this.right.slice(0,ut-ct))},g.prototype.leafAppend=function(ot){var ut=this.right.leafAppend(ot);if(ut)return new g(this.left,ut)},g.prototype.leafPrepend=function(ot){var ut=this.left.leafPrepend(ot);if(ut)return new g(ut,this.right)},g.prototype.appendInner=function(ot){return this.left.depth>=Math.max(this.right.depth,ot.depth)+1?new g(this.left,new g(this.right,ot)):new g(this,ot)},g}(RopeSequence);const max_empty_items=500;class Branch{constructor(g,et){this.items=g,this.eventCount=et}popEvent(g,et){if(this.eventCount==0)return null;let ot=this.items.length;for(;;ot--)if(this.items.get(ot-1).selection){--ot;break}let ut,ct;et&&(ut=this.remapping(ot,this.items.length),ct=ut.maps.length);let dt=g.tr,ft,St,kt=[],Tt=[];return this.items.forEach((Rt,Ft)=>{if(!Rt.step){ut||(ut=this.remapping(ot,Ft+1),ct=ut.maps.length),ct--,Tt.push(Rt);return}if(ut){Tt.push(new Item(Rt.map));let jt=Rt.step.map(ut.slice(ct)),Bt;jt&&dt.maybeStep(jt).doc&&(Bt=dt.mapping.maps[dt.mapping.maps.length-1],kt.push(new Item(Bt,void 0,void 0,kt.length+Tt.length))),ct--,Bt&&ut.appendMap(Bt,ct)}else dt.maybeStep(Rt.step);if(Rt.selection)return ft=ut?Rt.selection.map(ut.slice(ct)):Rt.selection,St=new Branch(this.items.slice(0,ot).append(Tt.reverse().concat(kt)),this.eventCount-1),!1},this.items.length,0),{remaining:St,transform:dt,selection:ft}}addTransform(g,et,ot,ut){let ct=[],dt=this.eventCount,ft=this.items,St=!ut&&ft.length?ft.get(ft.length-1):null;for(let Tt=0;Tt<g.steps.length;Tt++){let Rt=g.steps[Tt].invert(g.docs[Tt]),Ft=new Item(g.mapping.maps[Tt],Rt,et),jt;(jt=St&&St.merge(Ft))&&(Ft=jt,Tt?ct.pop():ft=ft.slice(0,ft.length-1)),ct.push(Ft),et&&(dt++,et=void 0),ut||(St=Ft)}let kt=dt-ot.depth;return kt>DEPTH_OVERFLOW&&(ft=cutOffEvents(ft,kt),dt-=kt),new Branch(ft.append(ct),dt)}remapping(g,et){let ot=new Mapping;return this.items.forEach((ut,ct)=>{let dt=ut.mirrorOffset!=null&&ct-ut.mirrorOffset>=g?ot.maps.length-ut.mirrorOffset:void 0;ot.appendMap(ut.map,dt)},g,et),ot}addMaps(g){return this.eventCount==0?this:new Branch(this.items.append(g.map(et=>new Item(et))),this.eventCount)}rebased(g,et){if(!this.eventCount)return this;let ot=[],ut=Math.max(0,this.items.length-et),ct=g.mapping,dt=g.steps.length,ft=this.eventCount;this.items.forEach(Ft=>{Ft.selection&&ft--},ut);let St=et;this.items.forEach(Ft=>{let jt=ct.getMirror(--St);if(jt==null)return;dt=Math.min(dt,jt);let Bt=ct.maps[jt];if(Ft.step){let zt=g.steps[jt].invert(g.docs[jt]),Ht=Ft.selection&&Ft.selection.map(ct.slice(St+1,jt));Ht&&ft++,ot.push(new Item(Bt,zt,Ht))}else ot.push(new Item(Bt))},ut);let kt=[];for(let Ft=et;Ft<dt;Ft++)kt.push(new Item(ct.maps[Ft]));let Tt=this.items.slice(0,ut).append(kt).append(ot),Rt=new Branch(Tt,ft);return Rt.emptyItemCount()>max_empty_items&&(Rt=Rt.compress(this.items.length-ot.length)),Rt}emptyItemCount(){let g=0;return this.items.forEach(et=>{et.step||g++}),g}compress(g=this.items.length){let et=this.remapping(0,g),ot=et.maps.length,ut=[],ct=0;return this.items.forEach((dt,ft)=>{if(ft>=g)ut.push(dt),dt.selection&&ct++;else if(dt.step){let St=dt.step.map(et.slice(ot)),kt=St&&St.getMap();if(ot--,kt&&et.appendMap(kt,ot),St){let Tt=dt.selection&&dt.selection.map(et.slice(ot));Tt&&ct++;let Rt=new Item(kt.invert(),St,Tt),Ft,jt=ut.length-1;(Ft=ut.length&&ut[jt].merge(Rt))?ut[jt]=Ft:ut.push(Rt)}}else dt.map&&ot--},this.items.length,0),new Branch(RopeSequence.from(ut.reverse()),ct)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(it,g){let et;return it.forEach((ot,ut)=>{if(ot.selection&&g--==0)return et=ut,!1}),it.slice(et)}class Item{constructor(g,et,ot,ut){this.map=g,this.step=et,this.selection=ot,this.mirrorOffset=ut}merge(g){if(this.step&&g.step&&!g.selection){let et=g.step.merge(this.step);if(et)return new Item(et.getMap().invert(),et,this.selection)}}}class HistoryState{constructor(g,et,ot,ut,ct){this.done=g,this.undone=et,this.prevRanges=ot,this.prevTime=ut,this.prevComposition=ct}}const DEPTH_OVERFLOW=20;function applyTransaction(it,g,et,ot){let ut=et.getMeta(historyKey),ct;if(ut)return ut.historyState;et.getMeta(closeHistoryKey)&&(it=new HistoryState(it.done,it.undone,null,0,-1));let dt=et.getMeta("appendedTransaction");if(et.steps.length==0)return it;if(dt&&dt.getMeta(historyKey))return dt.getMeta(historyKey).redo?new HistoryState(it.done.addTransform(et,void 0,ot,mustPreserveItems(g)),it.undone,rangesFor(et.mapping.maps),it.prevTime,it.prevComposition):new HistoryState(it.done,it.undone.addTransform(et,void 0,ot,mustPreserveItems(g)),null,it.prevTime,it.prevComposition);if(et.getMeta("addToHistory")!==!1&&!(dt&&dt.getMeta("addToHistory")===!1)){let ft=et.getMeta("composition"),St=it.prevTime==0||!dt&&it.prevComposition!=ft&&(it.prevTime<(et.time||0)-ot.newGroupDelay||!isAdjacentTo(et,it.prevRanges)),kt=dt?mapRanges(it.prevRanges,et.mapping):rangesFor(et.mapping.maps);return new HistoryState(it.done.addTransform(et,St?g.selection.getBookmark():void 0,ot,mustPreserveItems(g)),Branch.empty,kt,et.time,ft??it.prevComposition)}else return(ct=et.getMeta("rebased"))?new HistoryState(it.done.rebased(et,ct),it.undone.rebased(et,ct),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition):new HistoryState(it.done.addMaps(et.mapping.maps),it.undone.addMaps(et.mapping.maps),mapRanges(it.prevRanges,et.mapping),it.prevTime,it.prevComposition)}function isAdjacentTo(it,g){if(!g)return!1;if(!it.docChanged)return!0;let et=!1;return it.mapping.maps[0].forEach((ot,ut)=>{for(let ct=0;ct<g.length;ct+=2)ot<=g[ct+1]&&ut>=g[ct]&&(et=!0)}),et}function rangesFor(it){let g=[];for(let et=it.length-1;et>=0&&g.length==0;et--)it[et].forEach((ot,ut,ct,dt)=>g.push(ct,dt));return g}function mapRanges(it,g){if(!it)return null;let et=[];for(let ot=0;ot<it.length;ot+=2){let ut=g.map(it[ot],1),ct=g.map(it[ot+1],-1);ut<=ct&&et.push(ut,ct)}return et}function histTransaction(it,g,et){let ot=mustPreserveItems(g),ut=historyKey.get(g).spec.config,ct=(et?it.undone:it.done).popEvent(g,ot);if(!ct)return null;let dt=ct.selection.resolve(ct.transform.doc),ft=(et?it.done:it.undone).addTransform(ct.transform,g.selection.getBookmark(),ut,ot),St=new HistoryState(et?ft:ct.remaining,et?ct.remaining:ft,null,0,-1);return ct.transform.setSelection(dt).setMeta(historyKey,{redo:et,historyState:St})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(it){let g=it.plugins;if(cachedPreserveItemsPlugins!=g){cachedPreserveItems=!1,cachedPreserveItemsPlugins=g;for(let et=0;et<g.length;et++)if(g[et].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(it={}){return it={depth:it.depth||100,newGroupDelay:it.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(g,et,ot){return applyTransaction(et,ot,g,it)}},config:it,props:{handleDOMEvents:{beforeinput(g,et){let ot=et.inputType,ut=ot=="historyUndo"?undo:ot=="historyRedo"?redo:null;return ut?(et.preventDefault(),ut(g.state,g.dispatch)):!1}}}})}function buildCommand(it,g){return(et,ot)=>{let ut=historyKey.getState(et);if(!ut||(it?ut.undone:ut.done).eventCount==0)return!1;if(ot){let ct=histTransaction(ut,et,it);ct&&ot(g?ct.scrollIntoView():ct)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:it=>it.length,wordCounter:it=>it.split(" ").filter(g=>g!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc;if(((it==null?void 0:it.mode)||this.options.mode)==="textSize"){const ot=g.textBetween(0,g.content.size,void 0," ");return this.options.textCounter(ot)}return g.nodeSize},this.storage.words=it=>{const g=(it==null?void 0:it.node)||this.editor.state.doc,et=g.textBetween(0,g.content.size," "," ");return this.options.wordCounter(et)}},addProseMirrorPlugins(){let it=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(g,et,ot)=>{if(it)return;const ut=this.options.limit;if(ut==null||ut===0){it=!0;return}const ct=this.storage.characters({node:ot.doc});if(ct>ut){const dt=ct-ut,ft=0,St=dt;console.warn(`[CharacterCount] Initial content exceeded limit of ${ut} characters. Content was automatically trimmed.`);const kt=ot.tr.deleteRange(ft,St);return it=!0,kt}it=!0},filterTransaction:(g,et)=>{const ot=this.options.limit;if(!g.docChanged||ot===0||ot===null||ot===void 0)return!0;const ut=this.storage.characters({node:et.doc}),ct=this.storage.characters({node:g.doc});if(ct<=ot||ut>ot&&ct>ot&&ct<=ut)return!0;if(ut>ot&&ct>ot&&ct>ut||!g.getMeta("paste"))return!1;const ft=g.selection.$head.pos,St=ct-ot,kt=ft-St,Tt=ft;return g.deleteRange(kt,Tt),!(this.storage.characters({node:g.doc})>ot)}})]}});var Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:it,selection:g})=>{const{isEditable:et,isFocused:ot}=this.editor,{anchor:ut}=g,ct=[];if(!et||!ot)return DecorationSet.create(it,[]);let dt=0;this.options.mode==="deepest"&&it.descendants((St,kt)=>{if(St.isText)return;if(!(ut>=kt&&ut<=kt+St.nodeSize-1))return!1;dt+=1});let ft=0;return it.descendants((St,kt)=>{if(St.isText||!(ut>=kt&&ut<=kt+St.nodeSize-1))return!1;if(ft+=1,this.options.mode==="deepest"&&dt-ft>0||this.options.mode==="shallowest"&&ft>1)return this.options.mode==="deepest";ct.push(Decoration.node(kt,kt+St.nodeSize,{class:this.options.className}))}),DecorationSet.create(it,ct)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(it){var g;const et={name:it.name,options:it.options,storage:it.storage};return{allowGapCursor:(g=callOrReturn(getExtensionField(it,"allowGapCursor",et)))!=null?g:null}}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:it,selection:g})=>{const et=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:ot}=g,ut=[];if(!et)return null;const ct=this.editor.isEmpty;return it.descendants((dt,ft)=>{const St=ot>=ft&&ot<=ft+dt.nodeSize,kt=!dt.isLeaf&&isNodeEmpty(dt);if((St||!this.options.showOnlyCurrent)&&kt){const Tt=[this.options.emptyNodeClass];ct&&Tt.push(this.options.emptyEditorClass);const Rt=Decoration.node(ft,ft+dt.nodeSize,{class:Tt.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:dt,pos:ft,hasAnchor:St}):this.options.placeholder});ut.push(Rt)}return this.options.includeChildren}),DecorationSet.create(it,ut)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:it,options:g}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(et){return et.selection.empty||it.isFocused||!it.isEditable||isNodeSelection(et.selection)||it.view.dragging?null:DecorationSet.create(et.doc,[Decoration.inline(et.selection.from,et.selection.to,{class:g.className})])}}})]}});function nodeEqualsType({types:it,node:g}){return g&&Array.isArray(it)&&it.includes(g.type)||(g==null?void 0:g.type)===it}var TrailingNode=Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const it=new PluginKey(this.name),g=Object.entries(this.editor.schema.nodes).map(([,et])=>et).filter(et=>(this.options.notAfter||[]).concat(this.options.node).includes(et.name));return[new Plugin({key:it,appendTransaction:(et,ot,ut)=>{const{doc:ct,tr:dt,schema:ft}=ut,St=it.getState(ut),kt=ct.content.size,Tt=ft.nodes[this.options.node];if(St)return dt.insert(kt,Tt.create())},state:{init:(et,ot)=>{const ut=ot.tr.doc.lastChild;return!nodeEqualsType({node:ut,types:g})},apply:(et,ot)=>{if(!et.docChanged)return ot;const ut=et.doc.lastChild;return!nodeEqualsType({node:ut,types:g})}}})]}}),UndoRedo=Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:it,dispatch:g})=>undo(it,g),redo:()=>({state:it,dispatch:g})=>redo(it,g)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var it,g,et,ot;const ut=[];return this.options.bold!==!1&&ut.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&ut.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&ut.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&ut.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&ut.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&ut.push(Document$2.configure(this.options.document)),this.options.dropcursor!==!1&&ut.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&ut.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&ut.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&ut.push(Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&ut.push(UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&ut.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&ut.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&ut.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&ut.push(ListKeymap.configure((it=this.options)==null?void 0:it.listKeymap)),this.options.link!==!1&&ut.push(Link.configure((g=this.options)==null?void 0:g.link)),this.options.orderedList!==!1&&ut.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&ut.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&ut.push(Strike.configure(this.options.strike)),this.options.text!==!1&&ut.push(Text$3.configure(this.options.text)),this.options.underline!==!1&&ut.push(Underline.configure((et=this.options)==null?void 0:et.underline)),this.options.trailingNode!==!1&&ut.push(TrailingNode.configure((ot=this.options)==null?void 0:ot.trailingNode)),ut}}),index_default$7=StarterKit,index_default$6=ListItem,index_default$5=BulletList,index_default$4=OrderedList,inputRegex$1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:it=>it.getAttribute("data-color")||it.style.backgroundColor,renderHTML:it=>it.color?{"data-color":it.color,style:`background-color: ${it.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:it}){return["mark",mergeAttributes(this.options.HTMLAttributes,it),0]},renderMarkdown:(it,g)=>`==${g.renderChildren(it)}==`,parseMarkdown:(it,g)=>g.applyMark("highlight",g.parseInline(it.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:it=>it.indexOf("=="),tokenize(it,g,et){const ut=/^(==)([^=]+)(==)/.exec(it);if(ut){const ct=ut[2].trim(),dt=et.inlineTokens(ct);return{type:"highlight",raw:ut[0],text:ct,tokens:dt}}}},addCommands(){return{setHighlight:it=>({commands:g})=>g.setMark(this.name,it),toggleHighlight:it=>({commands:g})=>g.toggleMark(this.name,it),unsetHighlight:()=>({commands:it})=>it.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),index_default$3=Highlight,TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:it=>{const g=it.style.textAlign;return this.options.alignments.includes(g)?g:this.options.defaultAlignment},renderHTML:it=>it.textAlign?{style:`text-align: ${it.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:it=>({commands:g})=>this.options.alignments.includes(it)?this.options.types.map(et=>g.updateAttributes(et,{textAlign:it})).every(et=>et):!1,unsetTextAlign:()=>({commands:it})=>this.options.types.map(g=>it.resetAttributes(g,"textAlign")).every(g=>g),toggleTextAlign:it=>({editor:g,commands:et})=>this.options.alignments.includes(it)?g.isActive({textAlign:it})?et.unsetTextAlign():et.setTextAlign(it):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),index_default$2=TextAlign,index_default$1=Placeholder;const githubDark="";function BookEditor({content:it,setContent:g}){const et=reactExports.useRef(null),ot=useEditor({extensions:[index_default$6,index_default$5.configure({keepMarks:!0,keepAttributes:!0}),index_default$4.configure({keepMarks:!0,keepAttributes:!0}),index_default$a,index_default$7.configure({history:!0,bulletList:!1,orderedList:!1,blockquote:!1}),index_default$8,index_default$3,index_default$9.configure({openOnClick:!1}),index_default$2.configure({types:["heading","paragraph","listItem","blockquote"]}),index_default$1.configure({placeholder:"Start writing your book..."})],editorProps:{attributes:{class:"focus:outline-none prose prose-invert prose-lg max-w-none text-white leading-relaxed"}},content:it,onUpdate:({editor:ut})=>g(ut.getHTML())});return reactExports.useEffect(()=>{ot&&it!==ot.getHTML()&&ot.commands.setContent(it||"",!1)},[it,ot]),ot&&(window.__EDITOR=ot),reactExports.useEffect(()=>{et.current=ot},[ot]),ot?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-10 bg-[#111] px-6 py-3 flex flex-wrap items-center gap-6 border-b border-gray-800 shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3 items-center",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBold().run(),className:`font-semibold text-lg ${ot.isActive("bold")?"text-green-400":"text-gray-300"} hover:text-white`,children:"B"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleItalic().run(),className:`italic text-lg ${ot.isActive("italic")?"text-green-400":"text-gray-300"} hover:text-white`,children:"I"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleUnderline().run(),className:`underline text-lg ${ot.isActive("underline")?"text-green-400":"text-gray-300"} hover:text-white`,children:"U"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleHighlight().run(),className:`px-2 py-1 rounded text-sm ${ot.isActive("highlight")?"bg-yellow-400 text-black":"text-gray-300"} hover:text-white`,children:"HL"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBulletList().run(),className:`p-2 rounded-md ${ot.isActive("bulletList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Bullet List",children:jsxRuntimeExports.jsx(List,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleOrderedList().run(),className:`p-2 rounded-md ${ot.isActive("orderedList")?"bg-headerGreen text-black":"text-gray-300 hover:bg-gray-700/60"}`,title:"Numbered List",children:jsxRuntimeExports.jsx(ListOrdered,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().toggleBlockquote().run(),className:`${ot.isActive("blockquote")?"text-green-400":"text-gray-300"} hover:text-white`,children:" Quote"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center pl-6 border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("left").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"left"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Left",children:jsxRuntimeExports.jsx(TextAlignStart,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("center").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"center"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Center",children:jsxRuntimeExports.jsx(TextAlignCenter,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().setTextAlign("right").run(),className:`p-2 rounded-md ${ot.isActive({textAlign:"right"})?"bg-green-500/20 text-green-400":"text-gray-300 hover:bg-gray-700/60"}`,title:"Align Right",children:jsxRuntimeExports.jsx(TextAlignEnd,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center pl-6 ml-auto border-l border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().undo().run(),className:"text-gray-300 hover:text-white",children:" Undo"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ot.chain().focus().redo().run(),className:"text-gray-300 hover:text-white",children:" Redo"})]})]}),jsxRuntimeExports.jsx(EditorContent,{editor:ot,className:`prose prose-invert max-w-none 
             bg-[#0f0f0f] text-white type-text 
             min-h-[70vh] max-h-[90vh]
             resize-y overflow-auto
             border border-gray-700 rounded-lg 
             p-8 focus:outline-none focus:ring-2 focus:ring-green-500/50`})]}):null}function BookPromptForm({text:it,setText:g,pages:et,setPages:ot,link:ut,setLink:ct,cover:dt,setCover:ft,title:St,setTitle:kt,authorName:Tt,bookName:Rt,setBookName:Ft,bookType:jt,setBookType:Bt,loading:zt,bookId:Ht,setBookId:Ut,partLocked:Kt,partNumber:Yt,onClose:er,setShowGenerating:ar,setProgress:ir,fontName:lr,setFontName:cr,fontFile:vr,setFontFile:xr}){const[yr,Sr]=reactExports.useState(!1),[kr,Pr]=reactExports.useState(!1),[Or,hr]=reactExports.useState(null),{accessToken:Tr}=useAuth(),[mr,Er]=reactExports.useState(sessionStorage.getItem("shownDraftBanner")==="true"),[Dr,Cr]=reactExports.useState(Tt||"");reactExports.useEffect(()=>{async function an(){var tn,ln;if(Ht)try{const yn=Yt>1?`https://cre8tlystudio.com/api/books/${Ht}/part/${Yt}/draft`:`https://cre8tlystudio.com/api/books/draft/${Ht}`,pn=await axiosInstance.get(yn,{headers:{Authorization:`Bearer ${Tr}`}});(tn=pn.data)!=null&&tn.draft_text?(g(pn.data.draft_text),pn.data.title&&Ft(pn.data.title),pn.data.link&&ct(pn.data.link),pn.data.last_saved_at&&hr(pn.data.last_saved_at),pn.data.author_name&&Cr(pn.data.author_name),pn.data.book_type&&Bt(pn.data.book_type),mr||(Pr(!0),y$4.info("Loaded saved draft "),setTimeout(()=>Pr(!1),4e3),sessionStorage.setItem("shownDraftBanner","true"),Er(!0))):console.log("No saved draft found for this book or part.")}catch(yn){((ln=yn.response)==null?void 0:ln.status)!==404&&console.error("Failed to load draft:",yn)}}an()},[Ht,Yt]);async function Lr(){if(!(it!=null&&it.trim())){y$4.warn("Write something before saving!");return}Sr(!0);try{const an=Yt>1?`https://cre8tlystudio.com/api/books/${Ht}/part/${Yt}/draft`:"https://cre8tlystudio.com/api/books/draft",tn=await axiosInstance.post(an,{bookId:Ht,draftText:it,book_name:Rt,link:ut,author_name:Dr||Tt,book_type:jt,font_name:lr,font_file:vr},{headers:{Authorization:`Bearer ${Tr}`}});tn.data.id&&typeof Ut=="function"&&Ut(tn.data.id),y$4.success("Draft saved successfully ")}catch(an){console.error("Save draft failed:",an),y$4.error("Failed to save draft")}finally{Sr(!1)}}async function qr(an){an.preventDefault();try{ar(!0),ir(0),er();let tn=0;const ln=setInterval(()=>{tn+=tn<60?Math.random()*4.5:tn<85?Math.random()*2.5:Math.random()*1.2,tn>=96&&(tn=96),ir(tn)},200),yn={bookId:Ht,book_name:Rt,prompt:it,pages:et,link:ut,cover:dt,bookName:Rt,authorName:Tt,bookType:jt,title:St,font_name:lr,font_file:vr,partNumber:Yt},pn=await axiosInstance.post("https://cre8tlystudio.com/api/books/prompt",yn);clearInterval(ln),ir(100),y$4.success("Chapter generation successful! "),setTimeout(()=>ar(!1),1500),localStorage.removeItem("bookDraftLocal"),console.log("Book generated:",pn.data)}catch(tn){if(tn.code==="ECONNABORTED"){console.warn("backend still processing...please wait"),y$4.info(" Your book is still generating  please wait");return}console.error("Book generation failed:",tn),ar(!1)}}function sn(an){if(!an)return null;const tn=new Date(an),ln=Date.now()-tn.getTime(),yn=Math.floor(ln/6e4);if(yn<1)return"just now";if(yn<60)return`${yn} minute${yn!==1?"s":""} ago`;const pn=Math.floor(yn/60);if(pn<24)return`${pn} hour${pn!==1?"s":""} ago`;const En=Math.floor(pn/24);return`${En} day${En!==1?"s":""} ago`}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[kr&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center py-2 px-4 bg-green/20 border border-green text-green rounded-lg animate-fadeIn transition-all duration-500 ease-out transform",children:[" Restored your last saved draft"," ",Or&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["(saved ",sn(Or),")"]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:qr,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Clockmakers Secret",value:Rt,readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This is your books main title."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:Dr||Tt||"",readOnly:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Book Type"}),jsxRuntimeExports.jsx("input",{type:"text",value:jt,readOnly:!0,className:"w-full px-4 py-3 mb-3 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Chapter Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Midnight Promise",value:St,onChange:an=>kt(an.target.value),className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:ring-2 focus:ring-green focus:outline-none"})]}),jsxRuntimeExports.jsx("div",{className:"border border-gray-700 rounded-xl",children:jsxRuntimeExports.jsx(BookEditor,{content:it,setContent:g})}),jsxRuntimeExports.jsx(FontSelector,{fontName:lr,setFontName:cr,fontFile:vr,setFontFile:xr}),jsxRuntimeExports.jsx(CoverUpload,{cover:dt,setCover:ft}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Number of Pages"}),jsxRuntimeExports.jsx("div",{className:"relative w-full max-w-xs",children:jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"10",value:et??"",onChange:an=>ot(Number(an.target.value)),className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2 font-medium",children:"Optional Website or Author Link"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:ut,onChange:an=>ct(an.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[!Kt&&jsxRuntimeExports.jsx("button",{type:"button",onClick:Lr,disabled:yr,className:`flex-1 px-6 py-3 rounded-xl bg-green text-black font-semibold text-lg shadow-lg transition ${yr?"opacity-70 cursor-not-allowed":"hover:bg-green hover:text-black"}`,children:yr?"Saving...":"Save Draft"}),!zt&&jsxRuntimeExports.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl bg-royalPurple text-white font-semibold text-lg shadow-lg hover:opacity-90 transition",children:" Generate Book PDF"})]})]})]})}function PromptModal({isOpen:it,onClose:g,magnetId:et,accessToken:ot,contentType:ut,onSubmitted:ct,setShowGenerating:dt,setProgress:ft}){const[St,kt]=reactExports.useState(""),[Tt,Rt]=reactExports.useState(""),[Ft,jt]=reactExports.useState(5),[Bt,zt]=reactExports.useState(null),[Ht,Ut]=reactExports.useState(null),[Kt,Yt]=reactExports.useState(""),[er,ar]=reactExports.useState(!1),[ir,lr]=reactExports.useState(!1),[cr,vr]=reactExports.useState(null),[xr,yr]=reactExports.useState(""),[Sr,kr]=reactExports.useState("questions"),[Pr,Or]=reactExports.useState("#ffffff"),[hr,Tr]=reactExports.useState("Montserrat"),[mr,Er]=reactExports.useState("/fonts/Montserrat-Regular.ttf");reactExports.useEffect(()=>{it||(kt(""),Rt(""),jt(5),zt(null),Ut(null),Yt(""),vr(null),ft(0),ar(!1)),kr("questions")},[it]);const Dr=()=>g();async function Cr(qr,sn){var tn,ln,yn;qr.preventDefault(),lr(!0),ft(0),dt(!0),g();let an;try{let pn=0;an=setInterval(()=>{pn+=pn<60?Math.random()*4.5:pn<85?Math.random()*2.5:Math.random()*1.2,pn>=96&&(pn=96),ft(pn)},200);const En=await axios$1.post("https://cre8tlystudio.com/api/lead-magnets/prompt",{magnetId:et,prompt:St,title:Tt,font_name:hr,font_file:mr,bgTheme:Pr,pages:Ft,logo:Bt,link:Kt,coverImage:cr,cta:xr,contentType:sn},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(an),ft(100),y$4.success(" Your digital asset has been generated successfully!"),dt(!1),g(),await new Promise(On=>setTimeout(On,1e3)),setTimeout(()=>{typeof ct=="function"&&ct(et,St,hr)},2e3)}catch(pn){if(clearInterval(an),ft(0),lr(!1),dt(!1),console.error(" Prompt submission error:",pn),pn.code==="ECONNABORTED"||(tn=pn.message)!=null&&tn.includes("timeout"))y$4.info(" Please wait  your document is still being created. It will appear shortly.");else if(pn.response){const{status:En,data:On}=pn.response;En===413?y$4.error(On.message||"Your input is too long. Please shorten it."):En===400?y$4.error(On.message||"Missing required fields."):En===429?y$4.error("Rate limit reached. Please wait a moment and try again."):(ln=On.message)!=null&&ln.includes("context_length_exceeded")||(yn=On.message)!=null&&yn.includes("too large")?y$4.error(" This document is too large. Try fewer pages or smaller content."):y$4.info(" Your document is still generating  it will appear soon.")}else y$4.info(" Document generation still in progress. Please refresh your dashboard shortly.");g(),typeof ct=="function"&&setTimeout(()=>ct(et,St,hr),5e3)}finally{lr(!1)}}async function Lr(qr){qr.preventDefault(),lr(!0),ft(0),dt(!0),g();let sn;try{let an=0;sn=setInterval(()=>{an+=an<60?Math.random()*4.5:an<85?Math.random()*2.5:Math.random()*1.2,an>=96&&(an=96),ft(an)},200);const tn=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{prompt:St,pages:Ft,logo:Bt,link:Kt,coverImage:cr,font_name:hr,font_file:mr},{headers:{Authorization:`Bearer ${ot}`},timeout:18e4});clearInterval(sn),ft(100),y$4.success(" Your book was generated successfully!"),await new Promise(ln=>setTimeout(ln,800)),dt(!1),g()}catch(an){console.error(" Book generation error:",an),clearInterval(sn),ft(0),lr(!1),dt(!1),y$4.error("Something went wrong while generating your book.")}finally{lr(!1)}}return jsxRuntimeExports.jsx(ze,{show:it,appear:!0,children:jsxRuntimeExports.jsxs(yt,{className:"relative z-50",onClose:()=>{er||g()},children:[jsxRuntimeExports.jsx(Dt,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(je,{className:"relative w-full max-w-3xl max-h-[85vh] overflow-y-auto rounded-2xl bg-gray-900 p-8 shadow-2xl border border-gray-700",children:[jsxRuntimeExports.jsx(Ye,{className:"text-2xl font-bold text-white mb-6 text-center",children:" Create Your Digital Asset"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[Sr==="questions"&&jsxRuntimeExports.jsx(SmartPromptBuilder,{onPromptReady:qr=>{kt(qr),kr("generator")}}),Sr==="generator"&&jsxRuntimeExports.jsx("div",{className:`transition-all duration-300 ${ir?"pointer-events-none blur-sm opacity-50":""}`,children:jsxRuntimeExports.jsx(PromptForm,{text:St,setText:kt,title:Tt,setTitle:Rt,bgTheme:Pr,setBgTheme:Or,pages:Ft,setPages:jt,logo:Bt,setLogo:zt,logoPreview:Ht,setLogoPreview:Ut,link:Kt,setLink:Yt,cover:cr,setCover:vr,cta:xr,setCta:yr,showPreview:er,setShowPreview:ar,onSubmit:Cr,loading:ir,contentType:ut,fontName:hr,setFontName:Tr,fontFile:mr,setFontFile:Er})}),Sr==="bookBuilder"&&jsxRuntimeExports.jsxs("div",{className:`transition-all duration-300 ${ir?"pointer-events-none blur-sm opacity-50":""}`,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kr("selection"),className:"text-sm text-gray-400 underline hover:text-gray-200 transition",children:" Back to Selection"})}),jsxRuntimeExports.jsx(BookPromptForm,{text:St,setText:kt,pages:Ft,setPages:jt,logo:Bt,setLogo:zt,logoPreview:Ht,setLogoPreview:Ut,link:Kt,setLink:Yt,cover:cr,setCover:vr,cta:xr,setCta:yr,showPreview:er,setShowPreview:ar,onSubmit:Lr,loading:ir,fontName:hr,setFontName:Tr,fontFile:mr,setFontFile:Er})]})]}),Sr!=="questions"&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>kr("questions"),className:"absolute top-4 left-4 flex items-center gap-2 px-4 py-2 text-sm font-semibold bg-green text-black rounded-lg shadow-md transition-all hover:bg-green/90 hover:text-white active:scale-95 z-20",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),jsxRuntimeExports.jsx("span",{children:"Back"})]}),jsxRuntimeExports.jsx("button",{onClick:ir?void 0:Dr,className:`absolute top-4 right-4 text-white text-xl transition ${ir?"opacity-30 cursor-not-allowed":"hover:text-red-400"}`,disabled:ir,children:""})]})})]})})}function DashboardHeader({items:it=[],onCheckout:g,type:et="magnet"}){var Tt;const{user:ot}=useAuth(),ut=Array.isArray(it.magnets)?it.magnets:it,ct=it.summary||{},dt=et==="book"?(ot==null?void 0:ot.book_slots)??0:ct.total_slots??(ot==null?void 0:ot.magnet_slots)??0,ft=et==="book"?ut.filter(Rt=>Rt.pages>=750).length:ct.used_slots??ut.filter(Rt=>Rt.status==="completed").length,St=ct.available_slots??Math.max(dt-ft,0),kt=et==="book"?"My Books":"My Digital Products";return jsxRuntimeExports.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:kt}),ot&&jsxRuntimeExports.jsxs("div",{className:"text-[14px] text-gray-400 mt-1 mb-2",children:["Welcome,"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold tracking-wide",children:((Tt=ot==null?void 0:ot.name)==null?void 0:Tt.split(" ")[0])||"User"})]}),jsxRuntimeExports.jsxs("p",{className:"text-silver mt-1",children:["You currently have ",St," of ",dt," slots remaining."]}),St===0&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:"Purchase More Slots"})})]})})}function LoadingState(){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-silver",children:"Loading your lead magnets..."})]})}function EmptyState({onCheckout:it,type:g="magnet"}){const et=g==="book";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("p",{className:"text-silver mb-6",children:et?"You havent written any books yet.":"You havent created any lead magnets yet."}),jsxRuntimeExports.jsx("button",{onClick:it,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:et?"Write My First Book":"Generate My First Lead Magnet"})]})}const scriptRel="modulepreload",assetsURL=function(it){return"/"+it},seen={},__vitePreload=function it(g,et,ot){if(!et||et.length===0)return g();const ut=document.getElementsByTagName("link");return Promise.all(et.map(ct=>{if(ct=assetsURL(ct),ct in seen)return;seen[ct]=!0;const dt=ct.endsWith(".css"),ft=dt?'[rel="stylesheet"]':"";if(!!ot)for(let Tt=ut.length-1;Tt>=0;Tt--){const Rt=ut[Tt];if(Rt.href===ct&&(!dt||Rt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ct}"]${ft}`))return;const kt=document.createElement("link");if(kt.rel=dt?"stylesheet":scriptRel,dt||(kt.as="script",kt.crossOrigin=""),kt.href=ct,document.head.appendChild(kt),dt)return new Promise((Tt,Rt)=>{kt.addEventListener("load",Tt),kt.addEventListener("error",()=>Rt(new Error(`Unable to preload CSS for ${ct}`)))})})).then(()=>g()).catch(ct=>{const dt=new Event("vite:preloadError",{cancelable:!0});if(dt.payload=ct,window.dispatchEvent(dt),!dt.defaultPrevented)throw ct})},isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode$1={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(it){Number.isInteger(it)&&(verbosity=it)}function getVerbosityLevel(){return verbosity}function info(it){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${it}`)}function warn(it){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${it}`)}function unreachable(it){throw new Error(it)}function assert(it,g){it||unreachable(g)}function _isValidProtocol(it){switch(it==null?void 0:it.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(it,g=null,et=null){if(!it)return null;if(et&&typeof it=="string"){if(et.addDefaultProtocol&&it.startsWith("www.")){const ut=it.match(/\./g);(ut==null?void 0:ut.length)>=2&&(it=`http://${it}`)}if(et.tryConvertEncoding)try{it=stringToUTF8String(it)}catch{}}const ot=g?URL.parse(it,g):URL.parse(it);return _isValidProtocol(ot)?ot:null}function updateUrlHash(it,g,et=!1){const ot=URL.parse(it);return ot?(ot.hash=g,ot.href):et&&createValidAbsoluteUrl(it,"http://example.com")?it.split("#",1)[0]+`${g?`#${g}`:""}`:""}function shadow(it,g,et,ot=!1){return Object.defineProperty(it,g,{value:et,enumerable:!ot,configurable:!0,writable:!1}),et}const BaseException=function it(){function g(et,ot){this.message=et,this.name=ot}return g.prototype=new Error,g.constructor=g,g}();class PasswordException extends BaseException{constructor(g,et){super(g,"PasswordException"),this.code=et}}class UnknownErrorException extends BaseException{constructor(g,et){super(g,"UnknownErrorException"),this.details=et}}class InvalidPDFException extends BaseException{constructor(g){super(g,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(g,et,ot){super(g,"ResponseException"),this.status=et,this.missing=ot}}class FormatError extends BaseException{constructor(g){super(g,"FormatError")}}class AbortException extends BaseException{constructor(g){super(g,"AbortException")}}function bytesToString(it){(typeof it!="object"||(it==null?void 0:it.length)===void 0)&&unreachable("Invalid argument for bytesToString");const g=it.length,et=8192;if(g<et)return String.fromCharCode.apply(null,it);const ot=[];for(let ut=0;ut<g;ut+=et){const ct=Math.min(ut+et,g),dt=it.subarray(ut,ct);ot.push(String.fromCharCode.apply(null,dt))}return ot.join("")}function stringToBytes(it){typeof it!="string"&&unreachable("Invalid argument for stringToBytes");const g=it.length,et=new Uint8Array(g);for(let ot=0;ot<g;++ot)et[ot]=it.charCodeAt(ot)&255;return et}function string32(it){return String.fromCharCode(it>>24&255,it>>16&255,it>>8&255,it&255)}function isLittleEndian(){const it=new Uint8Array(4);return it[0]=1,new Uint32Array(it.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:g,userAgent:et}=navigator;return shadow(this,"platform",{isAndroid:et.includes("Android"),isLinux:g.includes("Linux"),isMac:g.includes("Mac"),isWindows:g.includes("Win"),isFirefox:et.includes("Firefox")})}static get isCSSRoundSupported(){var g,et;return shadow(this,"isCSSRoundSupported",(et=(g=globalThis.CSS)==null?void 0:g.supports)==null?void 0:et.call(g,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),it=>it.toString(16).padStart(2,"0"));var ux,sC,aC,QS,fP;let Util$1=(sC=class{static makeHexColor(g,et,ot){return`#${hexNumbers[g]}${hexNumbers[et]}${hexNumbers[ot]}`}static domMatrixToTransform(g){return[g.a,g.b,g.c,g.d,g.e,g.f]}static scaleMinMax(g,et){let ot;g[0]?(g[0]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[0],et[2]*=g[0],g[3]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[3],et[3]*=g[3]):(ot=et[0],et[0]=et[1],et[1]=ot,ot=et[2],et[2]=et[3],et[3]=ot,g[1]<0&&(ot=et[1],et[1]=et[3],et[3]=ot),et[1]*=g[1],et[3]*=g[1],g[2]<0&&(ot=et[0],et[0]=et[2],et[2]=ot),et[0]*=g[2],et[2]*=g[2]),et[0]+=g[4],et[1]+=g[5],et[2]+=g[4],et[3]+=g[5]}static transform(g,et){return[g[0]*et[0]+g[2]*et[1],g[1]*et[0]+g[3]*et[1],g[0]*et[2]+g[2]*et[3],g[1]*et[2]+g[3]*et[3],g[0]*et[4]+g[2]*et[5]+g[4],g[1]*et[4]+g[3]*et[5]+g[5]]}static multiplyByDOMMatrix(g,et){return[g[0]*et.a+g[2]*et.b,g[1]*et.a+g[3]*et.b,g[0]*et.c+g[2]*et.d,g[1]*et.c+g[3]*et.d,g[0]*et.e+g[2]*et.f+g[4],g[1]*et.e+g[3]*et.f+g[5]]}static applyTransform(g,et,ot=0){const ut=g[ot],ct=g[ot+1];g[ot]=ut*et[0]+ct*et[2]+et[4],g[ot+1]=ut*et[1]+ct*et[3]+et[5]}static applyTransformToBezier(g,et,ot=0){const ut=et[0],ct=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5];for(let Tt=0;Tt<6;Tt+=2){const Rt=g[ot+Tt],Ft=g[ot+Tt+1];g[ot+Tt]=Rt*ut+Ft*dt+St,g[ot+Tt+1]=Rt*ct+Ft*ft+kt}}static applyInverseTransform(g,et){const ot=g[0],ut=g[1],ct=et[0]*et[3]-et[1]*et[2];g[0]=(ot*et[3]-ut*et[2]+et[2]*et[5]-et[4]*et[3])/ct,g[1]=(-ot*et[1]+ut*et[0]+et[4]*et[1]-et[5]*et[0])/ct}static axialAlignedBoundingBox(g,et,ot){const ut=et[0],ct=et[1],dt=et[2],ft=et[3],St=et[4],kt=et[5],Tt=g[0],Rt=g[1],Ft=g[2],jt=g[3];let Bt=ut*Tt+St,zt=Bt,Ht=ut*Ft+St,Ut=Ht,Kt=ft*Rt+kt,Yt=Kt,er=ft*jt+kt,ar=er;if(ct!==0||dt!==0){const ir=ct*Tt,lr=ct*Ft,cr=dt*Rt,vr=dt*jt;Bt+=cr,Ut+=cr,Ht+=vr,zt+=vr,Kt+=ir,ar+=ir,er+=lr,Yt+=lr}ot[0]=Math.min(ot[0],Bt,Ht,zt,Ut),ot[1]=Math.min(ot[1],Kt,er,Yt,ar),ot[2]=Math.max(ot[2],Bt,Ht,zt,Ut),ot[3]=Math.max(ot[3],Kt,er,Yt,ar)}static inverseTransform(g){const et=g[0]*g[3]-g[1]*g[2];return[g[3]/et,-g[1]/et,-g[2]/et,g[0]/et,(g[2]*g[5]-g[4]*g[3])/et,(g[4]*g[1]-g[5]*g[0])/et]}static singularValueDecompose2dScale(g,et){const ot=g[0],ut=g[1],ct=g[2],dt=g[3],ft=ot**2+ut**2,St=ot*ct+ut*dt,kt=ct**2+dt**2,Tt=(ft+kt)/2,Rt=Math.sqrt(Tt**2-(ft*kt-St**2));et[0]=Math.sqrt(Tt+Rt||1),et[1]=Math.sqrt(Tt-Rt||1)}static normalizeRect(g){const et=g.slice(0);return g[0]>g[2]&&(et[0]=g[2],et[2]=g[0]),g[1]>g[3]&&(et[1]=g[3],et[3]=g[1]),et}static intersect(g,et){const ot=Math.max(Math.min(g[0],g[2]),Math.min(et[0],et[2])),ut=Math.min(Math.max(g[0],g[2]),Math.max(et[0],et[2]));if(ot>ut)return null;const ct=Math.max(Math.min(g[1],g[3]),Math.min(et[1],et[3])),dt=Math.min(Math.max(g[1],g[3]),Math.max(et[1],et[3]));return ct>dt?null:[ot,ct,ut,dt]}static pointBoundingBox(g,et,ot){ot[0]=Math.min(ot[0],g),ot[1]=Math.min(ot[1],et),ot[2]=Math.max(ot[2],g),ot[3]=Math.max(ot[3],et)}static rectBoundingBox(g,et,ot,ut,ct){ct[0]=Math.min(ct[0],g,ot),ct[1]=Math.min(ct[1],et,ut),ct[2]=Math.max(ct[2],g,ot),ct[3]=Math.max(ct[3],et,ut)}static bezierBoundingBox(g,et,ot,ut,ct,dt,ft,St,kt){kt[0]=Math.min(kt[0],g,ft),kt[1]=Math.min(kt[1],et,St),kt[2]=Math.max(kt[2],g,ft),kt[3]=Math.max(kt[3],et,St),Qr(this,QS,fP).call(this,g,ot,ct,ft,et,ut,dt,St,3*(-g+3*(ot-ct)+ft),6*(g-2*ot+ct),3*(ot-g),kt),Qr(this,QS,fP).call(this,g,ot,ct,ft,et,ut,dt,St,3*(-et+3*(ut-dt)+St),6*(et-2*ut+dt),3*(ut-et),kt)}},ux=new WeakSet,aC=function(g,et,ot,ut,ct,dt,ft,St,kt,Tt){if(kt<=0||kt>=1)return;const Rt=1-kt,Ft=kt*kt,jt=Ft*kt,Bt=Rt*(Rt*(Rt*g+3*kt*et)+3*Ft*ot)+jt*ut,zt=Rt*(Rt*(Rt*ct+3*kt*dt)+3*Ft*ft)+jt*St;Tt[0]=Math.min(Tt[0],Bt),Tt[1]=Math.min(Tt[1],zt),Tt[2]=Math.max(Tt[2],Bt),Tt[3]=Math.max(Tt[3],zt)},QS=new WeakSet,fP=function(g,et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft){if(Math.abs(kt)<1e-12){Math.abs(Tt)>=1e-12&&Qr(this,ux,aC).call(this,g,et,ot,ut,ct,dt,ft,St,-Rt/Tt,Ft);return}const jt=Tt**2-4*Rt*kt;if(jt<0)return;const Bt=Math.sqrt(jt),zt=2*kt;Qr(this,ux,aC).call(this,g,et,ot,ut,ct,dt,ft,St,(-Tt+Bt)/zt,Ft),Qr(this,ux,aC).call(this,g,et,ot,ut,ct,dt,ft,St,(-Tt-Bt)/zt,Ft)},Mr(sC,ux),Mr(sC,QS),sC);function stringToUTF8String(it){return decodeURIComponent(escape(it))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(it){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),it.replaceAll(NormalizeRegex,(g,et,ot)=>et?et.normalize("NFKC"):NormalizationMap.get(ot))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const it=new Uint8Array(32);return crypto.getRandomValues(it),bytesToString(it)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(it,g,et){if(!Array.isArray(et)||et.length<2)return!1;const[ot,ut,...ct]=et;if(!it(ot)&&!Number.isInteger(ot)||!g(ut))return!1;const dt=ct.length;let ft=!0;switch(ut.name){case"XYZ":if(dt<2||dt>3)return!1;break;case"Fit":case"FitB":return dt===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(dt>1)return!1;break;case"FitR":if(dt!==4)return!1;ft=!1;break;default:return!1}for(const St of ct)if(!(typeof St=="number"||ft&&St===null))return!1;return!0}function MathClamp(it,g,et){return Math.min(Math.max(it,g),et)}function toBase64Util(it){return Uint8Array.prototype.toBase64?it.toBase64():btoa(bytesToString(it))}function fromBase64Util(it){return Uint8Array.fromBase64?Uint8Array.fromBase64(it):stringToBytes(atob(it))}typeof Promise.try!="function"&&(Promise.try=function(it,...g){return new Promise(et=>{et(it(...g))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(it){return it.reduce((g,et)=>g+et,0)});class XfaText{static textContent(g){const et=[],ot={items:et,styles:Object.create(null)};function ut(ct){var St;if(!ct)return;let dt=null;const ft=ct.name;if(ft==="#text")dt=ct.value;else if(XfaText.shouldBuildText(ft))(St=ct==null?void 0:ct.attributes)!=null&&St.textContent?dt=ct.attributes.textContent:ct.value&&(dt=ct.value);else return;if(dt!==null&&et.push({str:dt}),!!ct.children)for(const kt of ct.children)ut(kt)}return ut(g),ot}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}class XfaLayer{static setupStorage(g,et,ot,ut,ct){const dt=ut.getValue(et,{value:null});switch(ot.name){case"textarea":if(dt.value!==null&&(g.textContent=dt.value),ct==="print")break;g.addEventListener("input",ft=>{ut.setValue(et,{value:ft.target.value})});break;case"input":if(ot.attributes.type==="radio"||ot.attributes.type==="checkbox"){if(dt.value===ot.attributes.xfaOn?g.setAttribute("checked",!0):dt.value===ot.attributes.xfaOff&&g.removeAttribute("checked"),ct==="print")break;g.addEventListener("change",ft=>{ut.setValue(et,{value:ft.target.checked?ft.target.getAttribute("xfaOn"):ft.target.getAttribute("xfaOff")})})}else{if(dt.value!==null&&g.setAttribute("value",dt.value),ct==="print")break;g.addEventListener("input",ft=>{ut.setValue(et,{value:ft.target.value})})}break;case"select":if(dt.value!==null){g.setAttribute("value",dt.value);for(const ft of ot.children)ft.attributes.value===dt.value?ft.attributes.selected=!0:ft.attributes.hasOwnProperty("selected")&&delete ft.attributes.selected}g.addEventListener("input",ft=>{const St=ft.target.options,kt=St.selectedIndex===-1?"":St[St.selectedIndex].value;ut.setValue(et,{value:kt})});break}}static setAttributes({html:g,element:et,storage:ot=null,intent:ut,linkService:ct}){const{attributes:dt}=et,ft=g instanceof HTMLAnchorElement;dt.type==="radio"&&(dt.name=`${dt.name}-${ut}`);for(const[St,kt]of Object.entries(dt))if(kt!=null)switch(St){case"class":kt.length&&g.setAttribute(St,kt.join(" "));break;case"dataId":break;case"id":g.setAttribute("data-element-id",kt);break;case"style":Object.assign(g.style,kt);break;case"textContent":g.textContent=kt;break;default:(!ft||St!=="href"&&St!=="newWindow")&&g.setAttribute(St,kt)}ft&&ct.addLinkAttributes(g,dt.href,dt.newWindow),ot&&dt.dataId&&this.setupStorage(g,dt.dataId,et,ot)}static render(g){var Rt,Ft;const et=g.annotationStorage,ot=g.linkService,ut=g.xfaHtml,ct=g.intent||"display",dt=document.createElement(ut.name);ut.attributes&&this.setAttributes({html:dt,element:ut,intent:ct,linkService:ot});const ft=ct!=="richText",St=g.div;if(St.append(dt),g.viewport){const jt=`matrix(${g.viewport.transform.join(",")})`;St.style.transform=jt}ft&&St.setAttribute("class","xfaLayer xfaFont");const kt=[];if(ut.children.length===0){if(ut.value){const jt=document.createTextNode(ut.value);dt.append(jt),ft&&XfaText.shouldBuildText(ut.name)&&kt.push(jt)}return{textDivs:kt}}const Tt=[[ut,-1,dt]];for(;Tt.length>0;){const[jt,Bt,zt]=Tt.at(-1);if(Bt+1===jt.children.length){Tt.pop();continue}const Ht=jt.children[++Tt.at(-1)[1]];if(Ht===null)continue;const{name:Ut}=Ht;if(Ut==="#text"){const Yt=document.createTextNode(Ht.value);kt.push(Yt),zt.append(Yt);continue}const Kt=(Rt=Ht==null?void 0:Ht.attributes)!=null&&Rt.xmlns?document.createElementNS(Ht.attributes.xmlns,Ut):document.createElement(Ut);if(zt.append(Kt),Ht.attributes&&this.setAttributes({html:Kt,element:Ht,storage:et,intent:ct,linkService:ot}),((Ft=Ht.children)==null?void 0:Ft.length)>0)Tt.push([Ht,-1,Kt]);else if(Ht.value){const Yt=document.createTextNode(Ht.value);ft&&XfaText.shouldBuildText(Ut)&&kt.push(Yt),Kt.append(Yt)}}for(const jt of St.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))jt.setAttribute("readOnly",!0);return{textDivs:kt}}static update(g){const et=`matrix(${g.viewport.transform.join(",")})`;g.div.style.transform=et,g.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg",ay=class ay{};Kn(ay,"CSS",96),Kn(ay,"PDF",72),Kn(ay,"PDF_TO_CSS_UNITS",ay.CSS/ay.PDF);let PixelsPerInch=ay;async function fetchData(it,g="text"){if(isValidFetchUrl(it,document.baseURI)){const et=await fetch(it);if(!et.ok)throw new Error(et.statusText);switch(g){case"arraybuffer":return et.arrayBuffer();case"blob":return et.blob();case"json":return et.json()}return et.text()}return new Promise((et,ot)=>{const ut=new XMLHttpRequest;ut.open("GET",it,!0),ut.responseType=g,ut.onreadystatechange=()=>{if(ut.readyState===XMLHttpRequest.DONE){if(ut.status===200||ut.status===0){switch(g){case"arraybuffer":case"blob":case"json":et(ut.response);return}et(ut.responseText);return}ot(new Error(ut.statusText))}},ut.send(null)})}class PageViewport{constructor({viewBox:g,userUnit:et,scale:ot,rotation:ut,offsetX:ct=0,offsetY:dt=0,dontFlip:ft=!1}){this.viewBox=g,this.userUnit=et,this.scale=ot,this.rotation=ut,this.offsetX=ct,this.offsetY=dt,ot*=et;const St=(g[2]+g[0])/2,kt=(g[3]+g[1])/2;let Tt,Rt,Ft,jt;switch(ut%=360,ut<0&&(ut+=360),ut){case 180:Tt=-1,Rt=0,Ft=0,jt=1;break;case 90:Tt=0,Rt=1,Ft=1,jt=0;break;case 270:Tt=0,Rt=-1,Ft=-1,jt=0;break;case 0:Tt=1,Rt=0,Ft=0,jt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ft&&(Ft=-Ft,jt=-jt);let Bt,zt,Ht,Ut;Tt===0?(Bt=Math.abs(kt-g[1])*ot+ct,zt=Math.abs(St-g[0])*ot+dt,Ht=(g[3]-g[1])*ot,Ut=(g[2]-g[0])*ot):(Bt=Math.abs(St-g[0])*ot+ct,zt=Math.abs(kt-g[1])*ot+dt,Ht=(g[2]-g[0])*ot,Ut=(g[3]-g[1])*ot),this.transform=[Tt*ot,Rt*ot,Ft*ot,jt*ot,Bt-Tt*ot*St-Ft*ot*kt,zt-Rt*ot*St-jt*ot*kt],this.width=Ht,this.height=Ut}get rawDims(){const g=this.viewBox;return shadow(this,"rawDims",{pageWidth:g[2]-g[0],pageHeight:g[3]-g[1],pageX:g[0],pageY:g[1]})}clone({scale:g=this.scale,rotation:et=this.rotation,offsetX:ot=this.offsetX,offsetY:ut=this.offsetY,dontFlip:ct=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ut,dontFlip:ct})}convertToViewportPoint(g,et){const ot=[g,et];return Util$1.applyTransform(ot,this.transform),ot}convertToViewportRectangle(g){const et=[g[0],g[1]];Util$1.applyTransform(et,this.transform);const ot=[g[2],g[3]];return Util$1.applyTransform(ot,this.transform),[et[0],et[1],ot[0],ot[1]]}convertToPdfPoint(g,et){const ot=[g,et];return Util$1.applyInverseTransform(ot,this.transform),ot}}class RenderingCancelledException extends BaseException{constructor(g,et=0){super(g,"RenderingCancelledException"),this.extraDelay=et}}function isDataScheme(it){const g=it.length;let et=0;for(;et<g&&it[et].trim()==="";)et++;return it.substring(et,et+5).toLowerCase()==="data:"}function isPdfFile(it){return typeof it=="string"&&/\.pdf$/i.test(it)}function getFilenameFromUrl(it){return[it]=it.split(/[#?]/,1),it.substring(it.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(it,g="document.pdf"){if(typeof it!="string")return g;if(isDataScheme(it))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),g;const ot=(ft=>{try{return new URL(ft)}catch{try{return new URL(decodeURIComponent(ft))}catch{try{return new URL(ft,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(ft),"https://foo.bar")}catch{return null}}}}})(it);if(!ot)return g;const ut=ft=>{try{let St=decodeURIComponent(ft);return St.includes("/")?(St=St.split("/").at(-1),St.test(/^\.pdf$/i)?St:ft):St}catch{return ft}},ct=/\.pdf$/i,dt=ot.pathname.split("/").at(-1);if(ct.test(dt))return ut(dt);if(ot.searchParams.size>0){const ft=Array.from(ot.searchParams.values()).reverse();for(const kt of ft)if(ct.test(kt))return ut(kt);const St=Array.from(ot.searchParams.keys()).reverse();for(const kt of St)if(ct.test(kt))return ut(kt)}if(ot.hash){const St=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(ot.hash);if(St)return ut(St[0])}return g}class StatTimer{constructor(){Kn(this,"started",Object.create(null));Kn(this,"times",[])}time(g){g in this.started&&warn(`Timer is already running for ${g}`),this.started[g]=Date.now()}timeEnd(g){g in this.started||warn(`Timer has not been started for ${g}`),this.times.push({name:g,start:this.started[g],end:Date.now()}),delete this.started[g]}toString(){const g=[];let et=0;for(const{name:ot}of this.times)et=Math.max(ot.length,et);for(const{name:ot,start:ut,end:ct}of this.times)g.push(`${ot.padEnd(et)} ${ct-ut}ms
`);return g.join("")}}function isValidFetchUrl(it,g){const et=g?URL.parse(it,g):URL.parse(it);return(et==null?void 0:et.protocol)==="http:"||(et==null?void 0:et.protocol)==="https:"}function noContextMenu(it){it.preventDefault()}function stopEvent(it){it.preventDefault(),it.stopPropagation()}function deprecated(it){console.log("Deprecated API usage: "+it)}var ew;class PDFDateString{static toDateObject(g){if(g instanceof Date)return g;if(!g||typeof g!="string")return null;Jt(this,ew)||Ir(this,ew,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const et=Jt(this,ew).exec(g);if(!et)return null;const ot=parseInt(et[1],10);let ut=parseInt(et[2],10);ut=ut>=1&&ut<=12?ut-1:0;let ct=parseInt(et[3],10);ct=ct>=1&&ct<=31?ct:1;let dt=parseInt(et[4],10);dt=dt>=0&&dt<=23?dt:0;let ft=parseInt(et[5],10);ft=ft>=0&&ft<=59?ft:0;let St=parseInt(et[6],10);St=St>=0&&St<=59?St:0;const kt=et[7]||"Z";let Tt=parseInt(et[8],10);Tt=Tt>=0&&Tt<=23?Tt:0;let Rt=parseInt(et[9],10)||0;return Rt=Rt>=0&&Rt<=59?Rt:0,kt==="-"?(dt+=Tt,ft+=Rt):kt==="+"&&(dt-=Tt,ft-=Rt),new Date(Date.UTC(ot,ut,ct,dt,ft,St))}}ew=new WeakMap,Mr(PDFDateString,ew,void 0);function getXfaPageViewport(it,{scale:g=1,rotation:et=0}){const{width:ot,height:ut}=it.attributes.style,ct=[0,0,parseInt(ot),parseInt(ut)];return new PageViewport({viewBox:ct,userUnit:1,scale:g,rotation:et})}function getRGB(it){if(it.startsWith("#")){const g=parseInt(it.slice(1),16);return[(g&16711680)>>16,(g&65280)>>8,g&255]}return it.startsWith("rgb(")?it.slice(4,-1).split(",").map(g=>parseInt(g)):it.startsWith("rgba(")?it.slice(5,-1).split(",").map(g=>parseInt(g)).slice(0,3):(warn(`Not a valid color format: "${it}"`),[0,0,0])}function getColorValues(it){const g=document.createElement("span");g.style.visibility="hidden",g.style.colorScheme="only light",document.body.append(g);for(const et of it.keys()){g.style.color=et;const ot=window.getComputedStyle(g).color;it.set(et,getRGB(ot))}g.remove()}function getCurrentTransform(it){const{a:g,b:et,c:ot,d:ut,e:ct,f:dt}=it.getTransform();return[g,et,ot,ut,ct,dt]}function getCurrentTransformInverse(it){const{a:g,b:et,c:ot,d:ut,e:ct,f:dt}=it.getTransform().invertSelf();return[g,et,ot,ut,ct,dt]}function setLayerDimensions(it,g,et=!1,ot=!0){if(g instanceof PageViewport){const{pageWidth:ut,pageHeight:ct}=g.rawDims,{style:dt}=it,ft=util_FeatureTest.isCSSRoundSupported,St=`var(--total-scale-factor) * ${ut}px`,kt=`var(--total-scale-factor) * ${ct}px`,Tt=ft?`round(down, ${St}, var(--scale-round-x))`:`calc(${St})`,Rt=ft?`round(down, ${kt}, var(--scale-round-y))`:`calc(${kt})`;!et||g.rotation%180===0?(dt.width=Tt,dt.height=Rt):(dt.width=Rt,dt.height=Tt)}ot&&it.setAttribute("data-main-rotation",g.rotation)}class OutputScale{constructor(){const{pixelRatio:g}=OutputScale;this.sx=g,this.sy=g}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(g,et,ot,ut,ct=-1){let dt=1/0,ft=1/0,St=1/0;ot=OutputScale.capPixels(ot,ct),ot>0&&(dt=Math.sqrt(ot/(g*et))),ut!==-1&&(ft=ut/g,St=ut/et);const kt=Math.min(dt,ft,St);return this.sx>kt||this.sy>kt?(this.sx=kt,this.sy=kt,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(g,et){if(et>=0){const ot=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+et/100));return g>0?Math.min(g,ot):ot}return g}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){var g;return shadow(this,"isDarkMode",!!((g=window==null?void 0:window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches))}}class CSSConstants{static get commentForegroundColor(){const g=document.createElement("span");g.classList.add("comment","sidebar");const{style:et}=g;et.width=et.height="0",et.display="none",et.color="var(--comment-fg-color)",document.body.append(g);const{color:ot}=window.getComputedStyle(g);return g.remove(),shadow(this,"commentForegroundColor",getRGB(ot))}}function applyOpacity(it,g,et,ot){ot=Math.min(Math.max(ot??1,0),1);const ut=255*(1-ot);return it=Math.round(it*ot+ut),g=Math.round(g*ot+ut),et=Math.round(et*ot+ut),[it,g,et]}function RGBToHSL(it,g){const et=it[0]/255,ot=it[1]/255,ut=it[2]/255,ct=Math.max(et,ot,ut),dt=Math.min(et,ot,ut),ft=(ct+dt)/2;if(ct===dt)g[0]=g[1]=0;else{const St=ct-dt;switch(g[1]=ft<.5?St/(ct+dt):St/(2-ct-dt),ct){case et:g[0]=((ot-ut)/St+(ot<ut?6:0))*60;break;case ot:g[0]=((ut-et)/St+2)*60;break;case ut:g[0]=((et-ot)/St+4)*60;break}}g[2]=ft}function HSLToRGB(it,g){const et=it[0],ot=it[1],ut=it[2],ct=(1-Math.abs(2*ut-1))*ot,dt=ct*(1-Math.abs(et/60%2-1)),ft=ut-ct/2;switch(Math.floor(et/60)){case 0:g[0]=ct+ft,g[1]=dt+ft,g[2]=ft;break;case 1:g[0]=dt+ft,g[1]=ct+ft,g[2]=ft;break;case 2:g[0]=ft,g[1]=ct+ft,g[2]=dt+ft;break;case 3:g[0]=ft,g[1]=dt+ft,g[2]=ct+ft;break;case 4:g[0]=dt+ft,g[1]=ft,g[2]=ct+ft;break;case 5:case 6:g[0]=ct+ft,g[1]=ft,g[2]=dt+ft;break}}function computeLuminance(it){return it<=.03928?it/12.92:((it+.055)/1.055)**2.4}function contrastRatio(it,g,et){HSLToRGB(it,et),et.map(computeLuminance);const ot=.2126*et[0]+.7152*et[1]+.0722*et[2];HSLToRGB(g,et),et.map(computeLuminance);const ut=.2126*et[0]+.7152*et[1]+.0722*et[2];return ot>ut?(ot+.05)/(ut+.05):(ut+.05)/(ot+.05)}const contrastCache=new Map;function findContrastColor(it,g){const et=it[0]+it[1]*256+it[2]*65536+g[0]*16777216+g[1]*4294967296+g[2]*1099511627776;let ot=contrastCache.get(et);if(ot)return ot;const ut=new Float32Array(9),ct=ut.subarray(0,3),dt=ut.subarray(3,6);RGBToHSL(it,dt);const ft=ut.subarray(6,9);RGBToHSL(g,ft);const St=ft[2]<.5,kt=St?12:4.5;if(dt[2]=St?Math.sqrt(dt[2]):1-Math.sqrt(1-dt[2]),contrastRatio(dt,ft,ct)<kt){let Tt,Rt;St?(Tt=dt[2],Rt=1):(Tt=0,Rt=dt[2]);const Ft=.005;for(;Rt-Tt>Ft;){const jt=dt[2]=(Tt+Rt)/2;St===contrastRatio(dt,ft,ct)<kt?Tt=jt:Rt=jt}dt[2]=St?Rt:Tt}return HSLToRGB(dt,ct),ot=Util$1.makeHexColor(Math.round(ct[0]*255),Math.round(ct[1]*255),Math.round(ct[2]*255)),contrastCache.set(et,ot),ot}function renderRichText({html:it,dir:g,className:et},ot){const ut=document.createDocumentFragment();if(typeof it=="string"){const ct=document.createElement("p");ct.dir=g||"auto";const dt=it.split(/(?:\r\n?|\n)/);for(let ft=0,St=dt.length;ft<St;++ft){const kt=dt[ft];ct.append(document.createTextNode(kt)),ft<St-1&&ct.append(document.createElement("br"))}ut.append(ct)}else XfaLayer.render({xfaHtml:it,div:ut,intent:"richText"});ut.firstChild.classList.add("richText",et),ot.append(ut)}var I0,L0,dp,fp,tw,j0,hx,dx,rw,jC,G3,BC,W3,$C,q3,B0,J1,uy,DS;const Vm=class Vm{constructor(g){Mr(this,BC);Mr(this,$C);Mr(this,B0);Mr(this,uy);Mr(this,I0,null);Mr(this,L0,null);Mr(this,dp,void 0);Mr(this,fp,null);Mr(this,tw,null);Mr(this,j0,null);Mr(this,hx,null);Mr(this,dx,null);Ir(this,dp,g),Jt(Vm,rw)||Ir(Vm,rw,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const g=Ir(this,I0,document.createElement("div"));g.classList.add("editToolbar","hidden"),g.setAttribute("role","toolbar");const et=Jt(this,dp)._uiManager._signal;et instanceof AbortSignal&&!et.aborted&&(g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.addEventListener("pointerdown",Qr(Vm,jC,G3),{signal:et}));const ot=Ir(this,fp,document.createElement("div"));ot.className="buttons",g.append(ot);const ut=Jt(this,dp).toolbarPosition;if(ut){const{style:ct}=g,dt=Jt(this,dp)._uiManager.direction==="ltr"?1-ut[0]:ut[0];ct.insetInlineEnd=`${100*dt}%`,ct.top=`calc(${100*ut[1]}% + var(--editor-toolbar-vert-offset))`}return g}get div(){return Jt(this,I0)}hide(){var g;Jt(this,I0).classList.add("hidden"),(g=Jt(this,L0))==null||g.hideDropdown()}show(){var g,et;Jt(this,I0).classList.remove("hidden"),(g=Jt(this,tw))==null||g.shown(),(et=Jt(this,j0))==null||et.shown()}addDeleteButton(){const{editorType:g,_uiManager:et}=Jt(this,dp),ot=document.createElement("button");ot.classList.add("basic","deleteButton"),ot.tabIndex=0,ot.setAttribute("data-l10n-id",Jt(Vm,rw)[g]),Qr(this,B0,J1).call(this,ot)&&ot.addEventListener("click",ut=>{et.delete()},{signal:et._signal}),Jt(this,fp).append(ot)}async addAltText(g){const et=await g.render();Qr(this,B0,J1).call(this,et),Jt(this,fp).append(et,Jt(this,uy,DS)),Ir(this,tw,g)}addComment(g,et=null){if(Jt(this,j0))return;const ot=g.renderForToolbar();if(!ot)return;Qr(this,B0,J1).call(this,ot);const ut=Ir(this,hx,Jt(this,uy,DS));et?(Jt(this,fp).insertBefore(ot,et),Jt(this,fp).insertBefore(ut,et)):Jt(this,fp).append(ot,ut),Ir(this,j0,g),g.toolbar=this}addColorPicker(g){if(Jt(this,L0))return;Ir(this,L0,g);const et=g.renderButton();Qr(this,B0,J1).call(this,et),Jt(this,fp).append(et,Jt(this,uy,DS))}async addEditSignatureButton(g){const et=Ir(this,dx,await g.renderEditButton(Jt(this,dp)));Qr(this,B0,J1).call(this,et),Jt(this,fp).append(et,Jt(this,uy,DS))}removeButton(g){var et,ot;switch(g){case"comment":(et=Jt(this,j0))==null||et.removeToolbarCommentButton(),Ir(this,j0,null),(ot=Jt(this,hx))==null||ot.remove(),Ir(this,hx,null);break}}async addButton(g,et){switch(g){case"colorPicker":this.addColorPicker(et);break;case"altText":await this.addAltText(et);break;case"editSignature":await this.addEditSignatureButton(et);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(et);break}}async addButtonBefore(g,et,ot){const ut=Jt(this,fp).querySelector(ot);ut&&g==="comment"&&this.addComment(et,ut)}updateEditSignatureButton(g){Jt(this,dx)&&(Jt(this,dx).title=g)}remove(){var g;Jt(this,I0).remove(),(g=Jt(this,L0))==null||g.destroy(),Ir(this,L0,null)}};I0=new WeakMap,L0=new WeakMap,dp=new WeakMap,fp=new WeakMap,tw=new WeakMap,j0=new WeakMap,hx=new WeakMap,dx=new WeakMap,rw=new WeakMap,jC=new WeakSet,G3=function(g){g.stopPropagation()},BC=new WeakSet,W3=function(g){Jt(this,dp)._focusEventsAllowed=!1,stopEvent(g)},$C=new WeakSet,q3=function(g){Jt(this,dp)._focusEventsAllowed=!0,stopEvent(g)},B0=new WeakSet,J1=function(g){const et=Jt(this,dp)._uiManager._signal;return!(et instanceof AbortSignal)||et.aborted?!1:(g.addEventListener("focusin",Qr(this,BC,W3).bind(this),{capture:!0,signal:et}),g.addEventListener("focusout",Qr(this,$C,q3).bind(this),{capture:!0,signal:et}),g.addEventListener("contextmenu",noContextMenu,{signal:et}),!0)},uy=new WeakSet,DS=function(){const g=document.createElement("div");return g.className="divider",g},Mr(Vm,jC),Mr(Vm,rw,null);let EditorToolbar=Vm;var nw,hy,Um,VC,K3,zC,X3,iw,pP;class FloatingToolbar{constructor(g){Mr(this,VC);Mr(this,zC);Mr(this,iw);Mr(this,nw,null);Mr(this,hy,null);Mr(this,Um,void 0);Ir(this,Um,g)}show(g,et,ot){const[ut,ct]=Qr(this,zC,X3).call(this,et,ot),{style:dt}=Jt(this,hy)||Ir(this,hy,Qr(this,VC,K3).call(this));g.append(Jt(this,hy)),dt.insetInlineEnd=`${100*ut}%`,dt.top=`calc(${100*ct}% + var(--editor-toolbar-vert-offset))`}hide(){Jt(this,hy).remove()}}nw=new WeakMap,hy=new WeakMap,Um=new WeakMap,VC=new WeakSet,K3=function(){const g=Ir(this,hy,document.createElement("div"));g.className="editToolbar",g.setAttribute("role","toolbar");const et=Jt(this,Um)._signal;et instanceof AbortSignal&&!et.aborted&&g.addEventListener("contextmenu",noContextMenu,{signal:et});const ot=Ir(this,nw,document.createElement("div"));return ot.className="buttons",g.append(ot),Jt(this,Um).hasCommentManager()&&Qr(this,iw,pP).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{Jt(this,Um).commentSelection("floating_button")}),Qr(this,iw,pP).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{Jt(this,Um).highlightSelection("floating_button")}),g},zC=new WeakSet,X3=function(g,et){let ot=0,ut=0;for(const ct of g){const dt=ct.y+ct.height;if(dt<ot)continue;const ft=ct.x+(et?ct.width:0);if(dt>ot){ut=ft,ot=dt;continue}et?ft>ut&&(ut=ft):ft<ut&&(ut=ft)}return[et?1-ut:ut,ot]},iw=new WeakSet,pP=function(g,et,ot,ut){const ct=document.createElement("button");ct.classList.add("basic",g),ct.tabIndex=0,ct.setAttribute("data-l10n-id",et);const dt=document.createElement("span");ct.append(dt),dt.className="visuallyHidden",dt.setAttribute("data-l10n-id",ot);const ft=Jt(this,Um)._signal;ft instanceof AbortSignal&&!ft.aborted&&(ct.addEventListener("contextmenu",noContextMenu,{signal:ft}),ct.addEventListener("click",ut,{signal:ft})),Jt(this,nw).append(ct)};function bindEvents(it,g,et){for(const ot of et)g.addEventListener(ot,it[ot].bind(it))}var UC;class IdManager{constructor(){Mr(this,UC,0)}get id(){return`${AnnotationEditorPrefix}${Ko(this,UC)._++}`}}UC=new WeakMap;var fx,sw,Xl,mx,oC;const yR=class yR{constructor(){Mr(this,mx);Mr(this,fx,getUuid());Mr(this,sw,0);Mr(this,Xl,null)}static get _isSVGFittingCanvas(){const g='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',ot=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),ut=new Image;ut.src=g;const ct=ut.decode().then(()=>(ot.drawImage(ut,0,0,1,1,0,0,1,3),new Uint32Array(ot.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",ct)}async getFromFile(g){const{lastModified:et,name:ot,size:ut,type:ct}=g;return Qr(this,mx,oC).call(this,`${et}_${ot}_${ut}_${ct}`,g)}async getFromUrl(g){return Qr(this,mx,oC).call(this,g,g)}async getFromBlob(g,et){const ot=await et;return Qr(this,mx,oC).call(this,g,ot)}async getFromId(g){Jt(this,Xl)||Ir(this,Xl,new Map);const et=Jt(this,Xl).get(g);if(!et)return null;if(et.bitmap)return et.refCounter+=1,et;if(et.file)return this.getFromFile(et.file);if(et.blobPromise){const{blobPromise:ot}=et;return delete et.blobPromise,this.getFromBlob(et.id,ot)}return this.getFromUrl(et.url)}getFromCanvas(g,et){Jt(this,Xl)||Ir(this,Xl,new Map);let ot=Jt(this,Xl).get(g);if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;const ut=new OffscreenCanvas(et.width,et.height);return ut.getContext("2d").drawImage(et,0,0),ot={bitmap:ut.transferToImageBitmap(),id:`image_${Jt(this,fx)}_${Ko(this,sw)._++}`,refCounter:1,isSvg:!1},Jt(this,Xl).set(g,ot),Jt(this,Xl).set(ot.id,ot),ot}getSvgUrl(g){const et=Jt(this,Xl).get(g);return et!=null&&et.isSvg?et.svgUrl:null}deleteId(g){var ut;Jt(this,Xl)||Ir(this,Xl,new Map);const et=Jt(this,Xl).get(g);if(!et||(et.refCounter-=1,et.refCounter!==0))return;const{bitmap:ot}=et;if(!et.url&&!et.file){const ct=new OffscreenCanvas(ot.width,ot.height);ct.getContext("bitmaprenderer").transferFromImageBitmap(ot),et.blobPromise=ct.convertToBlob()}(ut=ot.close)==null||ut.call(ot),et.bitmap=null}isValidId(g){return g.startsWith(`image_${Jt(this,fx)}_`)}};fx=new WeakMap,sw=new WeakMap,Xl=new WeakMap,mx=new WeakSet,oC=async function(g,et){Jt(this,Xl)||Ir(this,Xl,new Map);let ot=Jt(this,Xl).get(g);if(ot===null)return null;if(ot!=null&&ot.bitmap)return ot.refCounter+=1,ot;try{ot||(ot={bitmap:null,id:`image_${Jt(this,fx)}_${Ko(this,sw)._++}`,refCounter:0,isSvg:!1});let ut;if(typeof et=="string"?(ot.url=et,ut=await fetchData(et,"blob")):et instanceof File?ut=ot.file=et:et instanceof Blob&&(ut=et),ut.type==="image/svg+xml"){const ct=yR._isSVGFittingCanvas,dt=new FileReader,ft=new Image,St=new Promise((kt,Tt)=>{ft.onload=()=>{ot.bitmap=ft,ot.isSvg=!0,kt()},dt.onload=async()=>{const Rt=ot.svgUrl=dt.result;ft.src=await ct?`${Rt}#svgView(preserveAspectRatio(none))`:Rt},ft.onerror=dt.onerror=Tt});dt.readAsDataURL(ut),await St}else ot.bitmap=await createImageBitmap(ut);ot.refCounter=1}catch(ut){warn(ut),ot=null}return Jt(this,Xl).set(g,ot),ot&&Jt(this,Xl).set(ot.id,ot),ot};let ImageManager=yR;var jo,$0,aw,To;class CommandManager{constructor(g=128){Mr(this,jo,[]);Mr(this,$0,!1);Mr(this,aw,void 0);Mr(this,To,-1);Ir(this,aw,g)}add({cmd:g,undo:et,post:ot,mustExec:ut,type:ct=NaN,overwriteIfSameType:dt=!1,keepUndo:ft=!1}){if(ut&&g(),Jt(this,$0))return;const St={cmd:g,undo:et,post:ot,type:ct};if(Jt(this,To)===-1){Jt(this,jo).length>0&&(Jt(this,jo).length=0),Ir(this,To,0),Jt(this,jo).push(St);return}if(dt&&Jt(this,jo)[Jt(this,To)].type===ct){ft&&(St.undo=Jt(this,jo)[Jt(this,To)].undo),Jt(this,jo)[Jt(this,To)]=St;return}const kt=Jt(this,To)+1;kt===Jt(this,aw)?Jt(this,jo).splice(0,1):(Ir(this,To,kt),kt<Jt(this,jo).length&&Jt(this,jo).splice(kt)),Jt(this,jo).push(St)}undo(){if(Jt(this,To)===-1)return;Ir(this,$0,!0);const{undo:g,post:et}=Jt(this,jo)[Jt(this,To)];g(),et==null||et(),Ir(this,$0,!1),Ir(this,To,Jt(this,To)-1)}redo(){if(Jt(this,To)<Jt(this,jo).length-1){Ir(this,To,Jt(this,To)+1),Ir(this,$0,!0);const{cmd:g,post:et}=Jt(this,jo)[Jt(this,To)];g(),et==null||et(),Ir(this,$0,!1)}}hasSomethingToUndo(){return Jt(this,To)!==-1}hasSomethingToRedo(){return Jt(this,To)<Jt(this,jo).length-1}cleanType(g){if(Jt(this,To)!==-1){for(let et=Jt(this,To);et>=0;et--)if(Jt(this,jo)[et].type!==g){Jt(this,jo).splice(et+1,Jt(this,To)-et),Ir(this,To,et);return}Jt(this,jo).length=0,Ir(this,To,-1)}}destroy(){Ir(this,jo,null)}}jo=new WeakMap,$0=new WeakMap,aw=new WeakMap,To=new WeakMap;var HC,Y3;class KeyboardManager{constructor(g){Mr(this,HC);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:et}=util_FeatureTest.platform;for(const[ot,ut,ct={}]of g)for(const dt of ot){const ft=dt.startsWith("mac+");et&&ft?(this.callbacks.set(dt.slice(4),{callback:ut,options:ct}),this.allKeys.add(dt.split("+").at(-1))):!et&&!ft&&(this.callbacks.set(dt,{callback:ut,options:ct}),this.allKeys.add(dt.split("+").at(-1)))}}exec(g,et){if(!this.allKeys.has(et.key))return;const ot=this.callbacks.get(Qr(this,HC,Y3).call(this,et));if(!ot)return;const{callback:ut,options:{bubbles:ct=!1,args:dt=[],checker:ft=null}}=ot;ft&&!ft(g,et)||(ut.bind(g,...dt,et)(),ct||stopEvent(et))}}HC=new WeakSet,Y3=function(g){g.altKey&&this.buffer.push("alt"),g.ctrlKey&&this.buffer.push("ctrl"),g.metaKey&&this.buffer.push("meta"),g.shiftKey&&this.buffer.push("shift"),this.buffer.push(g.key);const et=this.buffer.join("+");return this.buffer.length=0,et};const GC=class GC{get _colors(){const g=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(g),shadow(this,"_colors",g)}convert(g){const et=getRGB(g);if(!window.matchMedia("(forced-colors: active)").matches)return et;for(const[ot,ut]of this._colors)if(ut.every((ct,dt)=>ct===et[dt]))return GC._colorsMapping.get(ot);return et}getHexCode(g){const et=this._colors.get(g);return et?Util$1.makeHexColor(...et):g}};Kn(GC,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=GC;var gx,$u,vx,Do,Yo,yx,pp,xx,mp,Yl,V0,z0,bx,U0,tm,gp,dy,ow,lw,Ex,uw,im,H0,Sx,G0,sm,WC,W0,wx,cw,q0,fy,_x,K0,hw,Uo,qs,Hm,X0,Y0,dw,Cx,fw,Z0,am,Gm,pw,mw,vp,Ax,lC,gw,mP,qC,Z3,KC,J3,my,MS,XC,Q3,YC,e5,ZC,t5,yw,gP,JC,r5,xw,vP,bw,yP,QC,n5,Ol,su,Dp,Bm,eA,i5,tA,s5,Ew,xP,rA,a5,gy,FS,Sw,bP;const ix=class ix{constructor(g,et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht){Mr(this,Ax);Mr(this,gw);Mr(this,qC);Mr(this,KC);Mr(this,my);Mr(this,XC);Mr(this,YC);Mr(this,ZC);Mr(this,yw);Mr(this,JC);Mr(this,xw);Mr(this,bw);Mr(this,QC);Mr(this,Ol);Mr(this,Dp);Mr(this,eA);Mr(this,tA);Mr(this,Ew);Mr(this,rA);Mr(this,gy);Mr(this,Sw);Mr(this,gx,new AbortController);Mr(this,$u,null);Mr(this,vx,null);Mr(this,Do,new Map);Mr(this,Yo,new Map);Mr(this,yx,null);Mr(this,pp,null);Mr(this,xx,null);Mr(this,mp,new CommandManager);Mr(this,Yl,null);Mr(this,V0,null);Mr(this,z0,null);Mr(this,bx,0);Mr(this,U0,new Set);Mr(this,tm,null);Mr(this,gp,null);Mr(this,dy,new Set);Kn(this,"_editorUndoBar",null);Mr(this,ow,!1);Mr(this,lw,!1);Mr(this,Ex,!1);Mr(this,uw,null);Mr(this,im,null);Mr(this,H0,null);Mr(this,Sx,null);Mr(this,G0,!1);Mr(this,sm,null);Mr(this,WC,new IdManager);Mr(this,W0,!1);Mr(this,wx,!1);Mr(this,cw,!1);Mr(this,q0,null);Mr(this,fy,null);Mr(this,_x,null);Mr(this,K0,null);Mr(this,hw,null);Mr(this,Uo,AnnotationEditorType.NONE);Mr(this,qs,new Set);Mr(this,Hm,null);Mr(this,X0,null);Mr(this,Y0,null);Mr(this,dw,null);Mr(this,Cx,null);Mr(this,fw,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});Mr(this,Z0,[0,0]);Mr(this,am,null);Mr(this,Gm,null);Mr(this,pw,null);Mr(this,mw,null);Mr(this,vp,null);const Ut=this._signal=Jt(this,gx).signal;Ir(this,Gm,g),Ir(this,pw,et),Ir(this,mw,ot),Ir(this,yx,ut),Ir(this,Yl,ct),Ir(this,X0,dt),Ir(this,Cx,St),this._eventBus=ft,ft._on("editingaction",this.onEditingAction.bind(this),{signal:Ut}),ft._on("pagechanging",this.onPageChanging.bind(this),{signal:Ut}),ft._on("scalechanging",this.onScaleChanging.bind(this),{signal:Ut}),ft._on("rotationchanging",this.onRotationChanging.bind(this),{signal:Ut}),ft._on("setpreference",this.onSetPreference.bind(this),{signal:Ut}),ft._on("switchannotationeditorparams",Kt=>this.updateParams(Kt.type,Kt.value),{signal:Ut}),window.addEventListener("pointerdown",()=>{Ir(this,wx,!0)},{capture:!0,signal:Ut}),window.addEventListener("pointerup",()=>{Ir(this,wx,!1)},{capture:!0,signal:Ut}),Qr(this,XC,Q3).call(this),Qr(this,QC,n5).call(this),Qr(this,yw,gP).call(this),Ir(this,pp,St.annotationStorage),Ir(this,uw,St.filterFactory),Ir(this,Y0,kt),Ir(this,Sx,Tt||null),Ir(this,ow,Rt),Ir(this,lw,Ft),Ir(this,Ex,jt),Ir(this,hw,Bt||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=zt||null,this._supportsPinchToZoom=Ht!==!1,ct==null||ct.setSidebarUiManager(this)}static get _keyboardManager(){const g=ix.prototype,et=dt=>Jt(dt,Gm).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&dt.hasSomethingToControl(),ot=(dt,{target:ft})=>{if(ft instanceof HTMLInputElement){const{type:St}=ft;return St!=="text"&&St!=="number"}return!0},ut=this.TRANSLATE_SMALL,ct=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],g.selectAll,{checker:ot}],[["ctrl+z","mac+meta+z"],g.undo,{checker:ot}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],g.redo,{checker:ot}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],g.delete,{checker:ot}],[["Enter","mac+Enter"],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&Jt(dt,Gm).contains(ft)&&!dt.isEnterHandled}],[[" ","mac+ "],g.addNewEditorFromKeyboard,{checker:(dt,{target:ft})=>!(ft instanceof HTMLButtonElement)&&Jt(dt,Gm).contains(document.activeElement)}],[["Escape","mac+Escape"],g.unselectAll],[["ArrowLeft","mac+ArrowLeft"],g.translateSelectedEditors,{args:[-ut,0],checker:et}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g.translateSelectedEditors,{args:[-ct,0],checker:et}],[["ArrowRight","mac+ArrowRight"],g.translateSelectedEditors,{args:[ut,0],checker:et}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g.translateSelectedEditors,{args:[ct,0],checker:et}],[["ArrowUp","mac+ArrowUp"],g.translateSelectedEditors,{args:[0,-ut],checker:et}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g.translateSelectedEditors,{args:[0,-ct],checker:et}],[["ArrowDown","mac+ArrowDown"],g.translateSelectedEditors,{args:[0,ut],checker:et}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g.translateSelectedEditors,{args:[0,ct],checker:et}]]))}destroy(){var g,et,ot,ut,ct,dt,ft,St,kt;(g=Jt(this,vp))==null||g.resolve(),Ir(this,vp,null),(et=Jt(this,gx))==null||et.abort(),Ir(this,gx,null),this._signal=null;for(const Tt of Jt(this,Yo).values())Tt.destroy();Jt(this,Yo).clear(),Jt(this,Do).clear(),Jt(this,dy).clear(),(ot=Jt(this,K0))==null||ot.clear(),Ir(this,$u,null),Jt(this,qs).clear(),Jt(this,mp).destroy(),(ut=Jt(this,yx))==null||ut.destroy(),(ct=Jt(this,Yl))==null||ct.destroy(),(dt=Jt(this,X0))==null||dt.destroy(),(ft=Jt(this,sm))==null||ft.hide(),Ir(this,sm,null),(St=Jt(this,_x))==null||St.destroy(),Ir(this,_x,null),Ir(this,vx,null),Jt(this,im)&&(clearTimeout(Jt(this,im)),Ir(this,im,null)),Jt(this,am)&&(clearTimeout(Jt(this,am)),Ir(this,am,null)),(kt=this._editorUndoBar)==null||kt.destroy(),Ir(this,Cx,null)}combinedSignal(g){return AbortSignal.any([this._signal,g.signal])}get mlManager(){return Jt(this,hw)}get useNewAltTextFlow(){return Jt(this,lw)}get useNewAltTextWhenAddingImage(){return Jt(this,Ex)}get hcmFilter(){return shadow(this,"hcmFilter",Jt(this,Y0)?Jt(this,uw).addHCMFilter(Jt(this,Y0).foreground,Jt(this,Y0).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(Jt(this,Gm)).direction)}get _highlightColors(){return shadow(this,"_highlightColors",Jt(this,Sx)?new Map(Jt(this,Sx).split(",").map(g=>(g=g.split("=").map(et=>et.trim()),g[1]=g[1].toUpperCase(),g))):null)}get highlightColors(){const{_highlightColors:g}=this;if(!g)return shadow(this,"highlightColors",null);const et=new Map,ot=!!Jt(this,Y0);for(const[ut,ct]of g){const dt=ut.endsWith("_HCM");if(ot&&dt){et.set(ut.replace("_HCM",""),ct);continue}!ot&&!dt&&et.set(ut,ct)}return shadow(this,"highlightColors",et)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,g=>g.reverse())):null)}getNonHCMColor(g){if(!this._highlightColors)return g;const et=this.highlightColorNames.get(g);return this._highlightColors.get(et)||g}getNonHCMColorName(g){return this.highlightColorNames.get(g)||g}setCurrentDrawingSession(g){g?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),Ir(this,z0,g)}setMainHighlightColorPicker(g){Ir(this,_x,g)}editAltText(g,et=!1){var ot;(ot=Jt(this,yx))==null||ot.editAltText(this,g,et)}hasCommentManager(){return!!Jt(this,Yl)}editComment(g,et,ot,ut){var ct;(ct=Jt(this,Yl))==null||ct.showDialog(this,g,et,ot,ut)}selectComment(g,et){const ot=Jt(this,Yo).get(g),ut=ot==null?void 0:ot.getEditorByUID(et);ut==null||ut.toggleComment(!0,!0)}updateComment(g){var et;(et=Jt(this,Yl))==null||et.updateComment(g.getData())}updatePopupColor(g){var et;(et=Jt(this,Yl))==null||et.updatePopupColor(g)}removeComment(g){var et;(et=Jt(this,Yl))==null||et.removeComments([g.uid])}toggleComment(g,et,ot=void 0){var ut;(ut=Jt(this,Yl))==null||ut.toggleCommentPopup(g,et,ot)}makeCommentColor(g,et){var ot;return g&&((ot=Jt(this,Yl))==null?void 0:ot.makeCommentColor(g,et))||null}getCommentDialogElement(){var g;return((g=Jt(this,Yl))==null?void 0:g.dialogElement)||null}async waitForEditorsRendered(g){if(Jt(this,Yo).has(g-1))return;const{resolve:et,promise:ot}=Promise.withResolvers(),ut=ct=>{ct.pageNumber===g&&(this._eventBus._off("editorsrendered",ut),et())};this._eventBus.on("editorsrendered",ut),await ot}getSignature(g){var et;(et=Jt(this,X0))==null||et.getSignature({uiManager:this,editor:g})}get signatureManager(){return Jt(this,X0)}switchToMode(g,et){this._eventBus.on("annotationeditormodechanged",et,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:g})}setPreference(g,et){this._eventBus.dispatch("setpreference",{source:this,name:g,value:et})}onSetPreference({name:g,value:et}){switch(g){case"enableNewAltTextWhenAddingImage":Ir(this,Ex,et);break}}onPageChanging({pageNumber:g}){Ir(this,bx,g-1)}focusMainContainer(){Jt(this,Gm).focus()}findParent(g,et){for(const ot of Jt(this,Yo).values()){const{x:ut,y:ct,width:dt,height:ft}=ot.div.getBoundingClientRect();if(g>=ut&&g<=ut+dt&&et>=ct&&et<=ct+ft)return ot}return null}disableUserSelect(g=!1){Jt(this,pw).classList.toggle("noUserSelect",g)}addShouldRescale(g){Jt(this,dy).add(g)}removeShouldRescale(g){Jt(this,dy).delete(g)}onScaleChanging({scale:g}){var et;this.commitOrRemove(),this.viewParameters.realScale=g*PixelsPerInch.PDF_TO_CSS_UNITS;for(const ot of Jt(this,dy))ot.onScaleChanging();(et=Jt(this,z0))==null||et.onScaleChanging()}onRotationChanging({pagesRotation:g}){this.commitOrRemove(),this.viewParameters.rotation=g}highlightSelection(g="",et=!1){const ot=document.getSelection();if(!ot||ot.isCollapsed)return;const{anchorNode:ut,anchorOffset:ct,focusNode:dt,focusOffset:ft}=ot,St=ot.toString(),Tt=Qr(this,Ax,lC).call(this,ot).closest(".textLayer"),Rt=this.getSelectionBoxes(Tt);if(!Rt)return;ot.empty();const Ft=Qr(this,gw,mP).call(this,Tt),jt=Jt(this,Uo)===AnnotationEditorType.NONE,Bt=()=>{const zt=Ft==null?void 0:Ft.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:g,boxes:Rt,anchorNode:ut,anchorOffset:ct,focusNode:dt,focusOffset:ft,text:St});jt&&this.showAllEditors("highlight",!0,!0),et&&(zt==null||zt.editComment())};if(jt){this.switchToMode(AnnotationEditorType.HIGHLIGHT,Bt);return}Bt()}commentSelection(g=""){this.highlightSelection(g,!0)}getAndRemoveDataFromAnnotationStorage(g){if(!Jt(this,pp))return null;const et=`${AnnotationEditorPrefix}${g}`,ot=Jt(this,pp).getRawValue(et);return ot&&Jt(this,pp).remove(et),ot}addToAnnotationStorage(g){!g.isEmpty()&&Jt(this,pp)&&!Jt(this,pp).has(g.id)&&Jt(this,pp).setValue(g.id,g)}a11yAlert(g,et=null){const ot=Jt(this,mw);ot&&(ot.setAttribute("data-l10n-id",g),et?ot.setAttribute("data-l10n-args",JSON.stringify(et)):ot.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,Jt(this,G0)&&(Ir(this,G0,!1),Qr(this,my,MS).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:g}=document;for(const et of Jt(this,qs))if(et.div.contains(g)){Ir(this,fy,[et,g]),et._focusEventsAllowed=!1;break}}focus(){if(!Jt(this,fy))return;const[g,et]=Jt(this,fy);Ir(this,fy,null),et.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:this._signal}),et.focus()}addEditListeners(){Qr(this,yw,gP).call(this),Qr(this,xw,vP).call(this)}removeEditListeners(){Qr(this,JC,r5).call(this),Qr(this,bw,yP).call(this)}dragOver(g){for(const{type:et}of g.dataTransfer.items)for(const ot of Jt(this,gp))if(ot.isHandlingMimeForPasting(et)){g.dataTransfer.dropEffect="copy",g.preventDefault();return}}drop(g){for(const et of g.dataTransfer.items)for(const ot of Jt(this,gp))if(ot.isHandlingMimeForPasting(et.type)){ot.paste(et,this.currentLayer),g.preventDefault();return}}copy(g){var ot;if(g.preventDefault(),(ot=Jt(this,$u))==null||ot.commitOrRemove(),!this.hasSelection)return;const et=[];for(const ut of Jt(this,qs)){const ct=ut.serialize(!0);ct&&et.push(ct)}et.length!==0&&g.clipboardData.setData("application/pdfjs",JSON.stringify(et))}cut(g){this.copy(g),this.delete()}async paste(g){g.preventDefault();const{clipboardData:et}=g;for(const ct of et.items)for(const dt of Jt(this,gp))if(dt.isHandlingMimeForPasting(ct.type)){dt.paste(ct,this.currentLayer);return}let ot=et.getData("application/pdfjs");if(!ot)return;try{ot=JSON.parse(ot)}catch(ct){warn(`paste: "${ct.message}".`);return}if(!Array.isArray(ot))return;this.unselectAll();const ut=this.currentLayer;try{const ct=[];for(const St of ot){const kt=await ut.deserialize(St);if(!kt)return;ct.push(kt)}const dt=()=>{for(const St of ct)Qr(this,Ew,xP).call(this,St);Qr(this,Sw,bP).call(this,ct)},ft=()=>{for(const St of ct)St.remove()};this.addCommands({cmd:dt,undo:ft,mustExec:!0})}catch(ct){warn(`paste: "${ct.message}".`)}}keydown(g){!this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!0),Jt(this,Uo)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&ix._keyboardManager.exec(this,g)}keyup(g){this.isShiftKeyDown&&g.key==="Shift"&&(this.isShiftKeyDown=!1,Jt(this,G0)&&(Ir(this,G0,!1),Qr(this,my,MS).call(this,"main_toolbar")))}onEditingAction({name:g}){switch(g){case"undo":case"redo":case"delete":case"selectAll":this[g]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(g){g?(Qr(this,YC,e5).call(this),Qr(this,xw,vP).call(this),Qr(this,Ol,su).call(this,{isEditing:Jt(this,Uo)!==AnnotationEditorType.NONE,isEmpty:Qr(this,gy,FS).call(this),hasSomethingToUndo:Jt(this,mp).hasSomethingToUndo(),hasSomethingToRedo:Jt(this,mp).hasSomethingToRedo(),hasSelectedEditor:!1})):(Qr(this,ZC,t5).call(this),Qr(this,bw,yP).call(this),Qr(this,Ol,su).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(g){if(!Jt(this,gp)){Ir(this,gp,g);for(const et of Jt(this,gp))Qr(this,Dp,Bm).call(this,et.defaultPropertiesToUpdate)}}getId(){return Jt(this,WC).id}get currentLayer(){return Jt(this,Yo).get(Jt(this,bx))}getLayer(g){return Jt(this,Yo).get(g)}get currentPageIndex(){return Jt(this,bx)}addLayer(g){Jt(this,Yo).set(g.pageIndex,g),Jt(this,W0)?g.enable():g.disable()}removeLayer(g){Jt(this,Yo).delete(g.pageIndex)}async updateMode(g,et=null,ot=!1,ut=!1,ct=!1){var dt,ft,St,kt,Tt,Rt;if(Jt(this,Uo)!==g&&!(Jt(this,vp)&&(await Jt(this,vp).promise,!Jt(this,vp)))){if(Ir(this,vp,Promise.withResolvers()),(dt=Jt(this,z0))==null||dt.commitOrRemove(),Jt(this,Uo)===AnnotationEditorType.POPUP&&((ft=Jt(this,Yl))==null||ft.hideSidebar()),(St=Jt(this,Yl))==null||St.destroyPopup(),Ir(this,Uo,g),g===AnnotationEditorType.NONE){this.setEditingState(!1),Qr(this,tA,s5).call(this);for(const Ft of Jt(this,Do).values())Ft.hideStandaloneCommentButton();(kt=this._editorUndoBar)==null||kt.hide(),this.toggleComment(null),Jt(this,vp).resolve();return}for(const Ft of Jt(this,Do).values())Ft.addStandaloneCommentButton();g===AnnotationEditorType.SIGNATURE&&await((Tt=Jt(this,X0))==null?void 0:Tt.loadSignatures()),this.setEditingState(!0),await Qr(this,eA,i5).call(this),this.unselectAll();for(const Ft of Jt(this,Yo).values())Ft.updateMode(g);if(g===AnnotationEditorType.POPUP){Jt(this,vx)||Ir(this,vx,await Jt(this,Cx).getAnnotationsByType(new Set(Jt(this,gp).map(Bt=>Bt._editorType))));const Ft=new Set,jt=[];for(const Bt of Jt(this,Do).values()){const{annotationElementId:zt,hasComment:Ht,deleted:Ut}=Bt;zt&&Ft.add(zt),Ht&&!Ut&&jt.push(Bt.getData())}for(const Bt of Jt(this,vx)){const{id:zt,popupRef:Ht,contentsObj:Ut}=Bt;Ht&&(Ut!=null&&Ut.str)&&!Ft.has(zt)&&!Jt(this,U0).has(zt)&&jt.push(Bt)}(Rt=Jt(this,Yl))==null||Rt.showSidebar(jt)}if(!et){ot&&this.addNewEditorFromKeyboard(),Jt(this,vp).resolve();return}for(const Ft of Jt(this,Do).values())Ft.uid===et?(this.setSelected(Ft),ct?Ft.editComment():ut?Ft.enterInEditMode():Ft.focus()):Ft.unselect();Jt(this,vp).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(g){g.mode!==Jt(this,Uo)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...g})}updateParams(g,et){if(Jt(this,gp)){switch(g){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(et);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(Jt(this,dw)||Ir(this,dw,new Map)).set(g,et),this.showAllEditors("highlight",et);break}if(this.hasSelection)for(const ot of Jt(this,qs))ot.updateParams(g,et);else for(const ot of Jt(this,gp))ot.updateDefaultParams(g,et)}}showAllEditors(g,et,ot=!1){var ct;for(const dt of Jt(this,Do).values())dt.editorType===g&&dt.show(et);(((ct=Jt(this,dw))==null?void 0:ct.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==et&&Qr(this,Dp,Bm).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,et]])}enableWaiting(g=!1){if(Jt(this,cw)!==g){Ir(this,cw,g);for(const et of Jt(this,Yo).values())g?et.disableClick():et.enableClick(),et.div.classList.toggle("waiting",g)}}*getEditors(g){for(const et of Jt(this,Do).values())et.pageIndex===g&&(yield et)}getEditor(g){return Jt(this,Do).get(g)}addEditor(g){Jt(this,Do).set(g.id,g)}removeEditor(g){var et,ot;g.div.contains(document.activeElement)&&(Jt(this,im)&&clearTimeout(Jt(this,im)),Ir(this,im,setTimeout(()=>{this.focusMainContainer(),Ir(this,im,null)},0))),Jt(this,Do).delete(g.id),g.annotationElementId&&((et=Jt(this,K0))==null||et.delete(g.annotationElementId)),this.unselect(g),(!g.annotationElementId||!Jt(this,U0).has(g.annotationElementId))&&((ot=Jt(this,pp))==null||ot.remove(g.id))}addDeletedAnnotationElement(g){Jt(this,U0).add(g.annotationElementId),this.addChangedExistingAnnotation(g),g.deleted=!0}isDeletedAnnotationElement(g){return Jt(this,U0).has(g)}removeDeletedAnnotationElement(g){Jt(this,U0).delete(g.annotationElementId),this.removeChangedExistingAnnotation(g),g.deleted=!1}setActiveEditor(g){Jt(this,$u)!==g&&(Ir(this,$u,g),g&&Qr(this,Dp,Bm).call(this,g.propertiesToUpdate))}updateUI(g){Jt(this,rA,a5)===g&&Qr(this,Dp,Bm).call(this,g.propertiesToUpdate)}updateUIForDefaultProperties(g){Qr(this,Dp,Bm).call(this,g.defaultPropertiesToUpdate)}toggleSelected(g){if(Jt(this,qs).has(g)){Jt(this,qs).delete(g),g.unselect(),Qr(this,Ol,su).call(this,{hasSelectedEditor:this.hasSelection});return}Jt(this,qs).add(g),g.select(),Qr(this,Dp,Bm).call(this,g.propertiesToUpdate),Qr(this,Ol,su).call(this,{hasSelectedEditor:!0})}setSelected(g){var et;this.updateToolbar({mode:g.mode,editId:g.id}),(et=Jt(this,z0))==null||et.commitOrRemove();for(const ot of Jt(this,qs))ot!==g&&ot.unselect();Jt(this,qs).clear(),Jt(this,qs).add(g),g.select(),Qr(this,Dp,Bm).call(this,g.propertiesToUpdate),Qr(this,Ol,su).call(this,{hasSelectedEditor:!0})}isSelected(g){return Jt(this,qs).has(g)}get firstSelectedEditor(){return Jt(this,qs).values().next().value}unselect(g){g.unselect(),Jt(this,qs).delete(g),Qr(this,Ol,su).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Jt(this,qs).size!==0}get isEnterHandled(){return Jt(this,qs).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var g;Jt(this,mp).undo(),Qr(this,Ol,su).call(this,{hasSomethingToUndo:Jt(this,mp).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Qr(this,gy,FS).call(this)}),(g=this._editorUndoBar)==null||g.hide()}redo(){Jt(this,mp).redo(),Qr(this,Ol,su).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Jt(this,mp).hasSomethingToRedo(),isEmpty:Qr(this,gy,FS).call(this)})}addCommands(g){Jt(this,mp).add(g),Qr(this,Ol,su).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Qr(this,gy,FS).call(this)})}cleanUndoStack(g){Jt(this,mp).cleanType(g)}delete(){var ct;this.commitOrRemove();const g=(ct=this.currentLayer)==null?void 0:ct.endDrawingSession(!0);if(!this.hasSelection&&!g)return;const et=g?[g]:[...Jt(this,qs)],ot=()=>{var dt;(dt=this._editorUndoBar)==null||dt.show(ut,et.length===1?et[0].editorType:et.length);for(const ft of et)ft.remove()},ut=()=>{for(const dt of et)Qr(this,Ew,xP).call(this,dt)};this.addCommands({cmd:ot,undo:ut,mustExec:!0})}commitOrRemove(){var g;(g=Jt(this,$u))==null||g.commitOrRemove()}hasSomethingToControl(){return Jt(this,$u)||this.hasSelection}selectAll(){for(const g of Jt(this,qs))g.commit();Qr(this,Sw,bP).call(this,Jt(this,Do).values())}unselectAll(){var g;if(!(Jt(this,$u)&&(Jt(this,$u).commitOrRemove(),Jt(this,Uo)!==AnnotationEditorType.NONE))&&!((g=Jt(this,z0))!=null&&g.commitOrRemove())&&this.hasSelection){for(const et of Jt(this,qs))et.unselect();Jt(this,qs).clear(),Qr(this,Ol,su).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(g,et,ot=!1){if(ot||this.commitOrRemove(),!this.hasSelection)return;Jt(this,Z0)[0]+=g,Jt(this,Z0)[1]+=et;const[ut,ct]=Jt(this,Z0),dt=[...Jt(this,qs)],ft=1e3;Jt(this,am)&&clearTimeout(Jt(this,am)),Ir(this,am,setTimeout(()=>{Ir(this,am,null),Jt(this,Z0)[0]=Jt(this,Z0)[1]=0,this.addCommands({cmd:()=>{for(const St of dt)Jt(this,Do).has(St.id)&&(St.translateInPage(ut,ct),St.translationDone())},undo:()=>{for(const St of dt)Jt(this,Do).has(St.id)&&(St.translateInPage(-ut,-ct),St.translationDone())},mustExec:!1})},ft));for(const St of dt)St.translateInPage(g,et),St.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Ir(this,tm,new Map);for(const g of Jt(this,qs))Jt(this,tm).set(g,{savedX:g.x,savedY:g.y,savedPageIndex:g.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Jt(this,tm))return!1;this.disableUserSelect(!1);const g=Jt(this,tm);Ir(this,tm,null);let et=!1;for(const[{x:ut,y:ct,pageIndex:dt},ft]of g)ft.newX=ut,ft.newY=ct,ft.newPageIndex=dt,et||(et=ut!==ft.savedX||ct!==ft.savedY||dt!==ft.savedPageIndex);if(!et)return!1;const ot=(ut,ct,dt,ft)=>{if(Jt(this,Do).has(ut.id)){const St=Jt(this,Yo).get(ft);St?ut._setParentAndPosition(St,ct,dt):(ut.pageIndex=ft,ut.x=ct,ut.y=dt)}};return this.addCommands({cmd:()=>{for(const[ut,{newX:ct,newY:dt,newPageIndex:ft}]of g)ot(ut,ct,dt,ft)},undo:()=>{for(const[ut,{savedX:ct,savedY:dt,savedPageIndex:ft}]of g)ot(ut,ct,dt,ft)},mustExec:!0}),!0}dragSelectedEditors(g,et){if(Jt(this,tm))for(const ot of Jt(this,tm).keys())ot.drag(g,et)}rebuild(g){if(g.parent===null){const et=this.getLayer(g.pageIndex);et?(et.changeParent(g),et.addOrRebuild(g)):(this.addEditor(g),this.addToAnnotationStorage(g),g.rebuild())}else g.parent.addOrRebuild(g)}get isEditorHandlingKeyboard(){var g;return((g=this.getActive())==null?void 0:g.shouldGetKeyboardEvents())||Jt(this,qs).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(g){return Jt(this,$u)===g}getActive(){return Jt(this,$u)}getMode(){return Jt(this,Uo)}isEditingMode(){return Jt(this,Uo)!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(g){if(!g)return null;const et=document.getSelection();for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++)if(!g.contains(et.getRangeAt(kt).commonAncestorContainer))return null;const{x:ot,y:ut,width:ct,height:dt}=g.getBoundingClientRect();let ft;switch(g.getAttribute("data-main-rotation")){case"90":ft=(kt,Tt,Rt,Ft)=>({x:(Tt-ut)/dt,y:1-(kt+Rt-ot)/ct,width:Ft/dt,height:Rt/ct});break;case"180":ft=(kt,Tt,Rt,Ft)=>({x:1-(kt+Rt-ot)/ct,y:1-(Tt+Ft-ut)/dt,width:Rt/ct,height:Ft/dt});break;case"270":ft=(kt,Tt,Rt,Ft)=>({x:1-(Tt+Ft-ut)/dt,y:(kt-ot)/ct,width:Ft/dt,height:Rt/ct});break;default:ft=(kt,Tt,Rt,Ft)=>({x:(kt-ot)/ct,y:(Tt-ut)/dt,width:Rt/ct,height:Ft/dt});break}const St=[];for(let kt=0,Tt=et.rangeCount;kt<Tt;kt++){const Rt=et.getRangeAt(kt);if(!Rt.collapsed)for(const{x:Ft,y:jt,width:Bt,height:zt}of Rt.getClientRects())Bt===0||zt===0||St.push(ft(Ft,jt,Bt,zt))}return St.length===0?null:St}addChangedExistingAnnotation({annotationElementId:g,id:et}){(Jt(this,xx)||Ir(this,xx,new Map)).set(g,et)}removeChangedExistingAnnotation({annotationElementId:g}){var et;(et=Jt(this,xx))==null||et.delete(g)}renderAnnotationElement(g){var ut;const et=(ut=Jt(this,xx))==null?void 0:ut.get(g.data.id);if(!et)return;const ot=Jt(this,pp).getRawValue(et);ot&&(Jt(this,Uo)===AnnotationEditorType.NONE&&!ot.hasBeenModified||ot.renderAnnotationElement(g))}setMissingCanvas(g,et,ot){var ct;const ut=(ct=Jt(this,K0))==null?void 0:ct.get(g);ut&&(ut.setCanvas(et,ot),Jt(this,K0).delete(g))}addMissingCanvas(g,et){(Jt(this,K0)||Ir(this,K0,new Map)).set(g,et)}};gx=new WeakMap,$u=new WeakMap,vx=new WeakMap,Do=new WeakMap,Yo=new WeakMap,yx=new WeakMap,pp=new WeakMap,xx=new WeakMap,mp=new WeakMap,Yl=new WeakMap,V0=new WeakMap,z0=new WeakMap,bx=new WeakMap,U0=new WeakMap,tm=new WeakMap,gp=new WeakMap,dy=new WeakMap,ow=new WeakMap,lw=new WeakMap,Ex=new WeakMap,uw=new WeakMap,im=new WeakMap,H0=new WeakMap,Sx=new WeakMap,G0=new WeakMap,sm=new WeakMap,WC=new WeakMap,W0=new WeakMap,wx=new WeakMap,cw=new WeakMap,q0=new WeakMap,fy=new WeakMap,_x=new WeakMap,K0=new WeakMap,hw=new WeakMap,Uo=new WeakMap,qs=new WeakMap,Hm=new WeakMap,X0=new WeakMap,Y0=new WeakMap,dw=new WeakMap,Cx=new WeakMap,fw=new WeakMap,Z0=new WeakMap,am=new WeakMap,Gm=new WeakMap,pw=new WeakMap,mw=new WeakMap,vp=new WeakMap,Ax=new WeakSet,lC=function({anchorNode:g}){return g.nodeType===Node.TEXT_NODE?g.parentElement:g},gw=new WeakSet,mP=function(g){const{currentLayer:et}=this;if(et.hasTextLayer(g))return et;for(const ot of Jt(this,Yo).values())if(ot.hasTextLayer(g))return ot;return null},qC=new WeakSet,Z3=function(){const g=document.getSelection();if(!g||g.isCollapsed)return;const ot=Qr(this,Ax,lC).call(this,g).closest(".textLayer"),ut=this.getSelectionBoxes(ot);ut&&(Jt(this,sm)||Ir(this,sm,new FloatingToolbar(this)),Jt(this,sm).show(ot,ut,this.direction==="ltr"))},KC=new WeakSet,J3=function(){var ct,dt,ft;const g=document.getSelection();if(!g||g.isCollapsed){Jt(this,Hm)&&((ct=Jt(this,sm))==null||ct.hide(),Ir(this,Hm,null),Qr(this,Ol,su).call(this,{hasSelectedText:!1}));return}const{anchorNode:et}=g;if(et===Jt(this,Hm))return;const ut=Qr(this,Ax,lC).call(this,g).closest(".textLayer");if(!ut){Jt(this,Hm)&&((dt=Jt(this,sm))==null||dt.hide(),Ir(this,Hm,null),Qr(this,Ol,su).call(this,{hasSelectedText:!1}));return}if((ft=Jt(this,sm))==null||ft.hide(),Ir(this,Hm,et),Qr(this,Ol,su).call(this,{hasSelectedText:!0}),!(Jt(this,Uo)!==AnnotationEditorType.HIGHLIGHT&&Jt(this,Uo)!==AnnotationEditorType.NONE)&&(Jt(this,Uo)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),Ir(this,G0,this.isShiftKeyDown),!this.isShiftKeyDown)){const St=Jt(this,Uo)===AnnotationEditorType.HIGHLIGHT?Qr(this,gw,mP).call(this,ut):null;if(St==null||St.toggleDrawing(),Jt(this,wx)){const kt=new AbortController,Tt=this.combinedSignal(kt),Rt=Ft=>{Ft.type==="pointerup"&&Ft.button!==0||(kt.abort(),St==null||St.toggleDrawing(!0),Ft.type==="pointerup"&&Qr(this,my,MS).call(this,"main_toolbar"))};window.addEventListener("pointerup",Rt,{signal:Tt}),window.addEventListener("blur",Rt,{signal:Tt})}else St==null||St.toggleDrawing(!0),Qr(this,my,MS).call(this,"main_toolbar")}},my=new WeakSet,MS=function(g=""){Jt(this,Uo)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(g):Jt(this,ow)&&Qr(this,qC,Z3).call(this)},XC=new WeakSet,Q3=function(){document.addEventListener("selectionchange",Qr(this,KC,J3).bind(this),{signal:this._signal})},YC=new WeakSet,e5=function(){if(Jt(this,H0))return;Ir(this,H0,new AbortController);const g=this.combinedSignal(Jt(this,H0));window.addEventListener("focus",this.focus.bind(this),{signal:g}),window.addEventListener("blur",this.blur.bind(this),{signal:g})},ZC=new WeakSet,t5=function(){var g;(g=Jt(this,H0))==null||g.abort(),Ir(this,H0,null)},yw=new WeakSet,gP=function(){if(Jt(this,q0))return;Ir(this,q0,new AbortController);const g=this.combinedSignal(Jt(this,q0));window.addEventListener("keydown",this.keydown.bind(this),{signal:g}),window.addEventListener("keyup",this.keyup.bind(this),{signal:g})},JC=new WeakSet,r5=function(){var g;(g=Jt(this,q0))==null||g.abort(),Ir(this,q0,null)},xw=new WeakSet,vP=function(){if(Jt(this,V0))return;Ir(this,V0,new AbortController);const g=this.combinedSignal(Jt(this,V0));document.addEventListener("copy",this.copy.bind(this),{signal:g}),document.addEventListener("cut",this.cut.bind(this),{signal:g}),document.addEventListener("paste",this.paste.bind(this),{signal:g})},bw=new WeakSet,yP=function(){var g;(g=Jt(this,V0))==null||g.abort(),Ir(this,V0,null)},QC=new WeakSet,n5=function(){const g=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:g}),document.addEventListener("drop",this.drop.bind(this),{signal:g})},Ol=new WeakSet,su=function(g){Object.entries(g).some(([ot,ut])=>Jt(this,fw)[ot]!==ut)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Jt(this,fw),g)}),Jt(this,Uo)===AnnotationEditorType.HIGHLIGHT&&g.hasSelectedEditor===!1&&Qr(this,Dp,Bm).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Dp=new WeakSet,Bm=function(g){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:g})},eA=new WeakSet,i5=async function(){if(!Jt(this,W0)){Ir(this,W0,!0);const g=[];for(const et of Jt(this,Yo).values())g.push(et.enable());await Promise.all(g);for(const et of Jt(this,Do).values())et.enable()}},tA=new WeakSet,s5=function(){if(this.unselectAll(),Jt(this,W0)){Ir(this,W0,!1);for(const g of Jt(this,Yo).values())g.disable();for(const g of Jt(this,Do).values())g.disable()}},Ew=new WeakSet,xP=function(g){const et=Jt(this,Yo).get(g.pageIndex);et?et.addOrRebuild(g):(this.addEditor(g),this.addToAnnotationStorage(g))},rA=new WeakSet,a5=function(){let g=null;for(g of Jt(this,qs));return g},gy=new WeakSet,FS=function(){if(Jt(this,Do).size===0)return!0;if(Jt(this,Do).size===1)for(const g of Jt(this,Do).values())return g.isEmpty();return!1},Sw=new WeakSet,bP=function(g){for(const et of Jt(this,qs))et.unselect();Jt(this,qs).clear();for(const et of g)et.isEmpty()||(Jt(this,qs).add(et),et.select());Qr(this,Ol,su).call(this,{hasSelectedEditor:this.hasSelection})},Kn(ix,"TRANSLATE_SMALL",1),Kn(ix,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=ix;var xl,om,Mp,kx,lm,Vu,Tx,um,Cu,Wm,vy,cm,J0,yy,IS,Px,uC;const au=class au{constructor(g){Mr(this,yy);Mr(this,Px);Mr(this,xl,null);Mr(this,om,!1);Mr(this,Mp,null);Mr(this,kx,null);Mr(this,lm,null);Mr(this,Vu,null);Mr(this,Tx,!1);Mr(this,um,null);Mr(this,Cu,null);Mr(this,Wm,null);Mr(this,vy,null);Mr(this,cm,!1);Ir(this,Cu,g),Ir(this,cm,g._uiManager.useNewAltTextFlow),Jt(au,J0)||Ir(au,J0,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(g){au._l10n??(au._l10n=g)}async render(){const g=Ir(this,Mp,document.createElement("button"));g.className="altText",g.tabIndex="0";const et=Ir(this,kx,document.createElement("span"));g.append(et),Jt(this,cm)?(g.classList.add("new"),g.setAttribute("data-l10n-id",Jt(au,J0).missing),et.setAttribute("data-l10n-id",Jt(au,J0)["missing-label"])):(g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const ot=Jt(this,Cu)._uiManager._signal;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),g.addEventListener("pointerdown",ct=>ct.stopPropagation(),{signal:ot});const ut=ct=>{ct.preventDefault(),Jt(this,Cu)._uiManager.editAltText(Jt(this,Cu)),Jt(this,cm)&&Jt(this,Cu)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:Jt(this,yy,IS)}})};return g.addEventListener("click",ut,{capture:!0,signal:ot}),g.addEventListener("keydown",ct=>{ct.target===g&&ct.key==="Enter"&&(Ir(this,Tx,!0),ut(ct))},{signal:ot}),await Qr(this,Px,uC).call(this),g}finish(){Jt(this,Mp)&&(Jt(this,Mp).focus({focusVisible:Jt(this,Tx)}),Ir(this,Tx,!1))}isEmpty(){return Jt(this,cm)?Jt(this,xl)===null:!Jt(this,xl)&&!Jt(this,om)}hasData(){return Jt(this,cm)?Jt(this,xl)!==null||!!Jt(this,Wm):this.isEmpty()}get guessedText(){return Jt(this,Wm)}async setGuessedText(g){Jt(this,xl)===null&&(Ir(this,Wm,g),Ir(this,vy,await au._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:g})),Qr(this,Px,uC).call(this))}toggleAltTextBadge(g=!1){var et;if(!Jt(this,cm)||Jt(this,xl)){(et=Jt(this,um))==null||et.remove(),Ir(this,um,null);return}if(!Jt(this,um)){const ot=Ir(this,um,document.createElement("div"));ot.className="noAltTextBadge",Jt(this,Cu).div.append(ot)}Jt(this,um).classList.toggle("hidden",!g)}serialize(g){let et=Jt(this,xl);return!g&&Jt(this,Wm)===et&&(et=Jt(this,vy)),{altText:et,decorative:Jt(this,om),guessedText:Jt(this,Wm),textWithDisclaimer:Jt(this,vy)}}get data(){return{altText:Jt(this,xl),decorative:Jt(this,om)}}set data({altText:g,decorative:et,guessedText:ot,textWithDisclaimer:ut,cancel:ct=!1}){ot&&(Ir(this,Wm,ot),Ir(this,vy,ut)),!(Jt(this,xl)===g&&Jt(this,om)===et)&&(ct||(Ir(this,xl,g),Ir(this,om,et)),Qr(this,Px,uC).call(this))}toggle(g=!1){Jt(this,Mp)&&(!g&&Jt(this,Vu)&&(clearTimeout(Jt(this,Vu)),Ir(this,Vu,null)),Jt(this,Mp).disabled=!g)}shown(){Jt(this,Cu)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:Jt(this,yy,IS)}})}destroy(){var g,et;(g=Jt(this,Mp))==null||g.remove(),Ir(this,Mp,null),Ir(this,kx,null),Ir(this,lm,null),(et=Jt(this,um))==null||et.remove(),Ir(this,um,null)}};xl=new WeakMap,om=new WeakMap,Mp=new WeakMap,kx=new WeakMap,lm=new WeakMap,Vu=new WeakMap,Tx=new WeakMap,um=new WeakMap,Cu=new WeakMap,Wm=new WeakMap,vy=new WeakMap,cm=new WeakMap,J0=new WeakMap,yy=new WeakSet,IS=function(){return Jt(this,xl)&&"added"||Jt(this,xl)===null&&this.guessedText&&"review"||"missing"},Px=new WeakSet,uC=async function(){var ut,ct,dt;const g=Jt(this,Mp);if(!g)return;if(Jt(this,cm)){if(g.classList.toggle("done",!!Jt(this,xl)),g.setAttribute("data-l10n-id",Jt(au,J0)[Jt(this,yy,IS)]),(ut=Jt(this,kx))==null||ut.setAttribute("data-l10n-id",Jt(au,J0)[`${Jt(this,yy,IS)}-label`]),!Jt(this,xl)){(ct=Jt(this,lm))==null||ct.remove();return}}else{if(!Jt(this,xl)&&!Jt(this,om)){g.classList.remove("done"),(dt=Jt(this,lm))==null||dt.remove();return}g.classList.add("done"),g.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let et=Jt(this,lm);if(!et){Ir(this,lm,et=document.createElement("span")),et.className="tooltip",et.setAttribute("role","tooltip"),et.id=`alt-text-tooltip-${Jt(this,Cu).id}`;const ft=100,St=Jt(this,Cu)._uiManager._signal;St.addEventListener("abort",()=>{clearTimeout(Jt(this,Vu)),Ir(this,Vu,null)},{once:!0}),g.addEventListener("mouseenter",()=>{Ir(this,Vu,setTimeout(()=>{Ir(this,Vu,null),Jt(this,lm).classList.add("show"),Jt(this,Cu)._reportTelemetry({action:"alt_text_tooltip"})},ft))},{signal:St}),g.addEventListener("mouseleave",()=>{var kt;Jt(this,Vu)&&(clearTimeout(Jt(this,Vu)),Ir(this,Vu,null)),(kt=Jt(this,lm))==null||kt.classList.remove("show")},{signal:St})}Jt(this,om)?et.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(et.removeAttribute("data-l10n-id"),et.textContent=Jt(this,xl)),et.parentNode||g.append(et);const ot=Jt(this,Cu).getElementForAltText();ot==null||ot.setAttribute("aria-describedby",et.id)},Mr(au,J0,null),Kn(au,"_l10n",null);let AltText=au;var Il,yp,xy,po,ww,by,Fp,Ey,Sy,wy,_w,EP;class Comment{constructor(g){Mr(this,_w);Mr(this,Il,null);Mr(this,yp,null);Mr(this,xy,!1);Mr(this,po,null);Mr(this,ww,null);Mr(this,by,null);Mr(this,Fp,null);Mr(this,Ey,null);Mr(this,Sy,!1);Mr(this,wy,null);Ir(this,po,g)}renderForToolbar(){const g=Ir(this,yp,document.createElement("button"));return g.className="comment",Qr(this,_w,EP).call(this,g,!1)}renderForStandalone(){const g=Ir(this,Il,document.createElement("button"));g.className="annotationCommentButton";const et=Jt(this,po).commentButtonPosition;if(et){const{style:ot}=g;ot.insetInlineEnd=`calc(${100*(Jt(this,po)._uiManager.direction==="ltr"?1-et[0]:et[0])}% - var(--comment-button-dim))`,ot.top=`calc(${100*et[1]}% - var(--comment-button-dim))`;const ut=Jt(this,po).commentButtonColor;ut&&(ot.backgroundColor=ut)}return Qr(this,_w,EP).call(this,g,!0)}focusButton(){setTimeout(()=>{var g;(g=Jt(this,Il)??Jt(this,yp))==null||g.focus()},0)}onUpdatedColor(){if(!Jt(this,Il))return;const g=Jt(this,po).commentButtonColor;g&&(Jt(this,Il).style.backgroundColor=g),Jt(this,po)._uiManager.updatePopupColor(Jt(this,po))}get commentButtonWidth(){var g;return(((g=Jt(this,Il))==null?void 0:g.getBoundingClientRect().width)??0)/Jt(this,po).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(Jt(this,wy))return Jt(this,wy);if(!Jt(this,Il))return null;const{x:g,y:et,height:ot}=Jt(this,Il).getBoundingClientRect(),{x:ut,y:ct,width:dt,height:ft}=Jt(this,po).parent.boundingClientRect;return[(g-ut)/dt,(et+ot-ct)/ft]}set commentPopupPositionInLayer(g){Ir(this,wy,g)}hasDefaultPopupPosition(){return Jt(this,wy)===null}removeStandaloneCommentButton(){var g;(g=Jt(this,Il))==null||g.remove(),Ir(this,Il,null)}removeToolbarCommentButton(){var g;(g=Jt(this,yp))==null||g.remove(),Ir(this,yp,null)}setCommentButtonStates({selected:g,hasPopup:et}){Jt(this,Il)&&(Jt(this,Il).classList.toggle("selected",g),Jt(this,Il).ariaExpanded=et)}edit(g){const et=this.commentPopupPositionInLayer;let ot,ut;if(et)[ot,ut]=et;else{[ot,ut]=Jt(this,po).commentButtonPosition;const{width:Tt,height:Rt,x:Ft,y:jt}=Jt(this,po);ot=Ft+ot*Tt,ut=jt+ut*Rt}const ct=Jt(this,po).parent.boundingClientRect,{x:dt,y:ft,width:St,height:kt}=ct;Jt(this,po)._uiManager.editComment(Jt(this,po),dt+ot*St,ft+ut*kt,{...g,parentDimensions:ct})}finish(){Jt(this,yp)&&(Jt(this,yp).focus({focusVisible:Jt(this,xy)}),Ir(this,xy,!1))}isDeleted(){return Jt(this,Sy)||Jt(this,Fp)===""}isEmpty(){return Jt(this,Fp)===null}hasBeenEdited(){return this.isDeleted()||Jt(this,Fp)!==Jt(this,ww)}serialize(){return this.data}get data(){return{text:Jt(this,Fp),richText:Jt(this,by),date:Jt(this,Ey),deleted:this.isDeleted()}}set data(g){if(g!==Jt(this,Fp)&&Ir(this,by,null),g===null){Ir(this,Fp,""),Ir(this,Sy,!0);return}Ir(this,Fp,g),Ir(this,Ey,new Date),Ir(this,Sy,!1)}setInitialText(g,et=null){Ir(this,ww,g),this.data=g,Ir(this,Ey,null),Ir(this,by,et)}shown(){}destroy(){var g,et;(g=Jt(this,yp))==null||g.remove(),Ir(this,yp,null),(et=Jt(this,Il))==null||et.remove(),Ir(this,Il,null),Ir(this,Fp,""),Ir(this,by,null),Ir(this,Ey,null),Ir(this,po,null),Ir(this,xy,!1),Ir(this,Sy,!1)}}Il=new WeakMap,yp=new WeakMap,xy=new WeakMap,po=new WeakMap,ww=new WeakMap,by=new WeakMap,Fp=new WeakMap,Ey=new WeakMap,Sy=new WeakMap,wy=new WeakMap,_w=new WeakSet,EP=function(g,et){if(!Jt(this,po)._uiManager.hasCommentManager())return null;g.tabIndex="0",g.ariaHasPopup="dialog",et?(g.ariaControls="commentPopup",g.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(g.ariaControlsElements=[Jt(this,po)._uiManager.getCommentDialogElement()],g.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const ot=Jt(this,po)._uiManager._signal;if(!(ot instanceof AbortSignal)||ot.aborted)return g;g.addEventListener("contextmenu",noContextMenu,{signal:ot}),et&&(g.addEventListener("focusin",ct=>{Jt(this,po)._focusEventsAllowed=!1,stopEvent(ct)},{capture:!0,signal:ot}),g.addEventListener("focusout",ct=>{Jt(this,po)._focusEventsAllowed=!0,stopEvent(ct)},{capture:!0,signal:ot})),g.addEventListener("pointerdown",ct=>ct.stopPropagation(),{signal:ot});const ut=ct=>{ct.preventDefault(),g===Jt(this,yp)?this.edit():Jt(this,po).toggleComment(!0)};return g.addEventListener("click",ut,{capture:!0,signal:ot}),g.addEventListener("keydown",ct=>{ct.target===g&&ct.key==="Enter"&&(Ir(this,xy,!0),ut(ct))},{signal:ot}),g.addEventListener("pointerenter",()=>{Jt(this,po).toggleComment(!1,!0)},{signal:ot}),g.addEventListener("pointerleave",()=>{Jt(this,po).toggleComment(!1,!1)},{signal:ot}),g};var Rx,_y,Cw,Aw,kw,Tw,Pw,qm,Cy,Km,Ay,Xm,nA,o5,iA,l5,sA,u5;const xR=class xR{constructor({container:g,isPinchingDisabled:et=null,isPinchingStopped:ot=null,onPinchStart:ut=null,onPinching:ct=null,onPinchEnd:dt=null,signal:ft}){Mr(this,nA);Mr(this,iA);Mr(this,sA);Mr(this,Rx,void 0);Mr(this,_y,!1);Mr(this,Cw,null);Mr(this,Aw,void 0);Mr(this,kw,void 0);Mr(this,Tw,void 0);Mr(this,Pw,void 0);Mr(this,qm,null);Mr(this,Cy,void 0);Mr(this,Km,null);Mr(this,Ay,void 0);Mr(this,Xm,null);Ir(this,Rx,g),Ir(this,Cw,ot),Ir(this,Aw,et),Ir(this,kw,ut),Ir(this,Tw,ct),Ir(this,Pw,dt),Ir(this,Ay,new AbortController),Ir(this,Cy,AbortSignal.any([ft,Jt(this,Ay).signal])),g.addEventListener("touchstart",Qr(this,nA,o5).bind(this),{passive:!1,signal:Jt(this,Cy)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var g,et;(g=Jt(this,Ay))==null||g.abort(),Ir(this,Ay,null),(et=Jt(this,qm))==null||et.abort(),Ir(this,qm,null)}};Rx=new WeakMap,_y=new WeakMap,Cw=new WeakMap,Aw=new WeakMap,kw=new WeakMap,Tw=new WeakMap,Pw=new WeakMap,qm=new WeakMap,Cy=new WeakMap,Km=new WeakMap,Ay=new WeakMap,Xm=new WeakMap,nA=new WeakSet,o5=function(g){var ut,ct,dt;if((ut=Jt(this,Aw))!=null&&ut.call(this))return;if(g.touches.length===1){if(Jt(this,qm))return;const ft=Ir(this,qm,new AbortController),St=AbortSignal.any([Jt(this,Cy),ft.signal]),kt=Jt(this,Rx),Tt={capture:!0,signal:St,passive:!1},Rt=Ft=>{var jt;Ft.pointerType==="touch"&&((jt=Jt(this,qm))==null||jt.abort(),Ir(this,qm,null))};kt.addEventListener("pointerdown",Ft=>{Ft.pointerType==="touch"&&(stopEvent(Ft),Rt(Ft))},Tt),kt.addEventListener("pointerup",Rt,Tt),kt.addEventListener("pointercancel",Rt,Tt);return}if(!Jt(this,Xm)){Ir(this,Xm,new AbortController);const ft=AbortSignal.any([Jt(this,Cy),Jt(this,Xm).signal]),St=Jt(this,Rx),kt={signal:ft,capture:!1,passive:!1};St.addEventListener("touchmove",Qr(this,iA,l5).bind(this),kt);const Tt=Qr(this,sA,u5).bind(this);St.addEventListener("touchend",Tt,kt),St.addEventListener("touchcancel",Tt,kt),kt.capture=!0,St.addEventListener("pointerdown",stopEvent,kt),St.addEventListener("pointermove",stopEvent,kt),St.addEventListener("pointercancel",stopEvent,kt),St.addEventListener("pointerup",stopEvent,kt),(ct=Jt(this,kw))==null||ct.call(this)}if(stopEvent(g),g.touches.length!==2||(dt=Jt(this,Cw))!=null&&dt.call(this)){Ir(this,Km,null);return}let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]),Ir(this,Km,{touch0X:et.screenX,touch0Y:et.screenY,touch1X:ot.screenX,touch1Y:ot.screenY})},iA=new WeakSet,l5=function(g){var er;if(!Jt(this,Km)||g.touches.length!==2)return;stopEvent(g);let[et,ot]=g.touches;et.identifier>ot.identifier&&([et,ot]=[ot,et]);const{screenX:ut,screenY:ct}=et,{screenX:dt,screenY:ft}=ot,St=Jt(this,Km),{touch0X:kt,touch0Y:Tt,touch1X:Rt,touch1Y:Ft}=St,jt=Rt-kt,Bt=Ft-Tt,zt=dt-ut,Ht=ft-ct,Ut=Math.hypot(zt,Ht)||1,Kt=Math.hypot(jt,Bt)||1;if(!Jt(this,_y)&&Math.abs(Kt-Ut)<=xR.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(St.touch0X=ut,St.touch0Y=ct,St.touch1X=dt,St.touch1Y=ft,!Jt(this,_y)){Ir(this,_y,!0);return}const Yt=[(ut+dt)/2,(ct+ft)/2];(er=Jt(this,Tw))==null||er.call(this,Yt,Kt,Ut)},sA=new WeakSet,u5=function(g){var et;g.touches.length>=2||(Jt(this,Xm)&&(Jt(this,Xm).abort(),Ir(this,Xm,null),(et=Jt(this,Pw))==null||et.call(this)),Jt(this,Km)&&(stopEvent(g),Ir(this,Km,null),Ir(this,_y,!1)))};let TouchManager=xR;var ky,Op,So,to,Ym,Nx,Q0,Rw,Ll,Ty,Zm,hm,ev,Nw,Py,zu,Dw,Ry,Jm,dm,Dx,Mx,xp,Ny,Mw,aA,Fw,SP,Ow,wP,Fx,cC,oA,c5,lA,h5,Iw,_P,Ox,hC,Lw,CP,uA,d5,cA,f5,hA,p5,jw,AP,dA,m5,Bw,kP,fA,g5,pA,v5,mA,y5,$w,TP,Dy,LS;const Ms=class Ms{constructor(g){Mr(this,Fw);Mr(this,Fx);Mr(this,oA);Mr(this,lA);Mr(this,Iw);Mr(this,Ox);Mr(this,Lw);Mr(this,uA);Mr(this,cA);Mr(this,hA);Mr(this,jw);Mr(this,dA);Mr(this,Bw);Mr(this,fA);Mr(this,pA);Mr(this,mA);Mr(this,$w);Mr(this,Dy);Mr(this,ky,null);Mr(this,Op,null);Mr(this,So,null);Mr(this,to,null);Mr(this,Ym,null);Mr(this,Nx,!1);Mr(this,Q0,null);Mr(this,Rw,"");Mr(this,Ll,null);Mr(this,Ty,null);Mr(this,Zm,null);Mr(this,hm,null);Mr(this,ev,null);Mr(this,Nw,"");Mr(this,Py,!1);Mr(this,zu,null);Mr(this,Dw,!1);Mr(this,Ry,!1);Mr(this,Jm,!1);Mr(this,dm,null);Mr(this,Dx,0);Mr(this,Mx,0);Mr(this,xp,null);Mr(this,Ny,null);Kn(this,"isSelected",!1);Kn(this,"_isCopy",!1);Kn(this,"_editToolbar",null);Kn(this,"_initialOptions",Object.create(null));Kn(this,"_initialData",null);Kn(this,"_isVisible",!0);Kn(this,"_uiManager",null);Kn(this,"_focusEventsAllowed",!0);Mr(this,Mw,!1);Mr(this,aA,Ms._zIndex++);this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=g.isCentered,this._structTreeParentId=null,this.annotationElementId=g.annotationElementId||null,this.creationDate=g.creationDate||new Date,this.modificationDate=g.modificationDate||null;const{rotation:et,rawDims:{pageWidth:ot,pageHeight:ut,pageX:ct,pageY:dt}}=this.parent.viewport;this.rotation=et,this.pageRotation=(360+et-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ot,ut],this.pageTranslation=[ct,dt];const[ft,St]=this.parentDimensions;this.x=g.x/ft,this.y=g.y/St,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const g=Ms.prototype._resizeWithKeyboard,et=AnnotationEditorUIManager.TRANSLATE_SMALL,ot=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],g,{args:[-et,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g,{args:[-ot,0]}],[["ArrowRight","mac+ArrowRight"],g,{args:[et,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g,{args:[ot,0]}],[["ArrowUp","mac+ArrowUp"],g,{args:[0,-et]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g,{args:[0,-ot]}],[["ArrowDown","mac+ArrowDown"],g,{args:[0,et]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g,{args:[0,ot]}],[["Escape","mac+Escape"],Ms.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const et=new FakeEditor({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});et.annotationElementId=g.annotationElementId,et.deleted=!0,et._uiManager.addToAnnotationStorage(et)}static initialize(g,et){if(Ms._l10n??(Ms._l10n=g),Ms._l10nResizer||(Ms._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ms._borderLineWidth!==-1)return;const ot=getComputedStyle(document.documentElement);Ms._borderLineWidth=parseFloat(ot.getPropertyValue("--outline-width"))||0}static updateDefaultParams(g,et){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(g){return!1}static paste(g,et){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Jt(this,Mw)}set _isDraggable(g){var et;Ir(this,Mw,g),(et=this.div)==null||et.classList.toggle("draggable",g)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[g,et]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*et/(g*2),this.y+=this.width*g/(et*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*et/(g*2),this.y-=this.width*g/(et*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Jt(this,aA)}setParent(g){var et;g!==null?(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions):(Qr(this,Dy,LS).call(this),(et=Jt(this,hm))==null||et.remove(),Ir(this,hm,null)),this.parent=g}focusin(g){this._focusEventsAllowed&&(Jt(this,Py)?Ir(this,Py,!1):this.parent.setSelected(this))}focusout(g){var ot;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const et=g.relatedTarget;et!=null&&et.closest(`#${this.id}`)||(g.preventDefault(),(ot=this.parent)!=null&&ot.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(g,et,ot,ut){const[ct,dt]=this.parentDimensions;[ot,ut]=this.screenToPageTranslation(ot,ut),this.x=(g+ot)/ct,this.y=(et+ut)/dt,this.fixAndSetPosition()}_moveAfterPaste(g,et){const[ot,ut]=this.parentDimensions;this.setAt(g*ot,et*ut,this.width*ot,this.height*ut),this._onTranslated()}translate(g,et){Qr(this,Fw,SP).call(this,this.parentDimensions,g,et)}translateInPage(g,et){Jt(this,zu)||Ir(this,zu,[this.x,this.y,this.width,this.height]),Qr(this,Fw,SP).call(this,this.pageDimensions,g,et),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(g,et){Jt(this,zu)||Ir(this,zu,[this.x,this.y,this.width,this.height]);const{div:ot,parentDimensions:[ut,ct]}=this;if(this.x+=g/ut,this.y+=et/ct,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Rt,y:Ft}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Rt,Ft)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:dt,y:ft}=this;const[St,kt]=this.getBaseTranslation();dt+=St,ft+=kt;const{style:Tt}=ot;Tt.left=`${(100*dt).toFixed(2)}%`,Tt.top=`${(100*ft).toFixed(2)}%`,this._onTranslating(dt,ft),ot.scrollIntoView({block:"nearest"})}_onTranslating(g,et){}_onTranslated(g,et){}get _hasBeenMoved(){return!!Jt(this,zu)&&(Jt(this,zu)[0]!==this.x||Jt(this,zu)[1]!==this.y)}get _hasBeenResized(){return!!Jt(this,zu)&&(Jt(this,zu)[2]!==this.width||Jt(this,zu)[3]!==this.height)}getBaseTranslation(){const[g,et]=this.parentDimensions,{_borderLineWidth:ot}=Ms,ut=ot/g,ct=ot/et;switch(this.rotation){case 90:return[-ut,ct];case 180:return[ut,ct];case 270:return[ut,-ct];default:return[-ut,-ct]}}get _mustFixPosition(){return!0}fixAndSetPosition(g=this.rotation){const{div:{style:et},pageDimensions:[ot,ut]}=this;let{x:ct,y:dt,width:ft,height:St}=this;if(ft*=ot,St*=ut,ct*=ot,dt*=ut,this._mustFixPosition)switch(g){case 0:ct=MathClamp(ct,0,ot-ft),dt=MathClamp(dt,0,ut-St);break;case 90:ct=MathClamp(ct,0,ot-St),dt=MathClamp(dt,ft,ut);break;case 180:ct=MathClamp(ct,ft,ot),dt=MathClamp(dt,St,ut);break;case 270:ct=MathClamp(ct,St,ot),dt=MathClamp(dt,0,ut-ft);break}this.x=ct/=ot,this.y=dt/=ut;const[kt,Tt]=this.getBaseTranslation();ct+=kt,dt+=Tt,et.left=`${(100*ct).toFixed(2)}%`,et.top=`${(100*dt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(g,et){var ot;return Qr(ot=Ms,Ow,wP).call(ot,g,et,this.parentRotation)}pageTranslationToScreen(g,et){var ot;return Qr(ot=Ms,Ow,wP).call(ot,g,et,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:g,pageDimensions:[et,ot]}=this;return[et*g,ot*g]}setDims(){const{div:{style:g},width:et,height:ot}=this;g.width=`${(100*et).toFixed(2)}%`,g.height=`${(100*ot).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(g){return Math.round(g*1e4)/1e4}_onResizing(){}altTextFinish(){var g;(g=Jt(this,So))==null||g.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||Jt(this,Ry))return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:g}=this;if(g)for(const[et,ot]of g)await this._editToolbar.addButton(et,ot);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var g;(g=this._editToolbar)==null||g.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var g;(g=this._editToolbar)==null||g.removeButton("comment")}removeEditToolbar(){var g,et;(g=this._editToolbar)==null||g.remove(),this._editToolbar=null,(et=Jt(this,So))==null||et.destroy()}addContainer(g){var ot;const et=(ot=this._editToolbar)==null?void 0:ot.div;et?et.before(g):this.div.append(g)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return Jt(this,So)||(AltText.initialize(Ms._l10n),Ir(this,So,new AltText(this)),Jt(this,ky)&&(Jt(this,So).data=Jt(this,ky),Ir(this,ky,null))),Jt(this,So)}get altTextData(){var g;return(g=Jt(this,So))==null?void 0:g.data}set altTextData(g){Jt(this,So)&&(Jt(this,So).data=g)}get guessedAltText(){var g;return(g=Jt(this,So))==null?void 0:g.guessedText}async setGuessedAltText(g){var et;await((et=Jt(this,So))==null?void 0:et.setGuessedText(g))}serializeAltText(g){var et;return(et=Jt(this,So))==null?void 0:et.serialize(g)}hasAltText(){return!!Jt(this,So)&&!Jt(this,So).isEmpty()}hasAltTextData(){var g;return((g=Jt(this,So))==null?void 0:g.hasData())??!1}focusCommentButton(){var g;(g=Jt(this,to))==null||g.focusButton()}addCommentButton(){return Jt(this,to)||Ir(this,to,new Comment(this))}addStandaloneCommentButton(){if(Jt(this,Ym)){this._uiManager.isEditingMode()&&Jt(this,Ym).classList.remove("hidden");return}this.hasComment&&(Ir(this,Ym,Jt(this,to).renderForStandalone()),this.div.append(Jt(this,Ym)))}removeStandaloneCommentButton(){Jt(this,to).removeStandaloneCommentButton(),Ir(this,Ym,null)}hideStandaloneCommentButton(){var g;(g=Jt(this,Ym))==null||g.classList.add("hidden")}get comment(){const{data:{richText:g,text:et,date:ot,deleted:ut}}=Jt(this,to);return{text:et,richText:g,date:ot,deleted:ut,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(g){Jt(this,to)||Ir(this,to,new Comment(this)),Jt(this,to).data=g,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:g,popupRef:et,richText:ot}){if(!et||(Jt(this,to)||Ir(this,to,new Comment(this)),Jt(this,to).setInitialText(g,ot),!this.annotationElementId))return;const ut=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);ut&&this.updateFromAnnotationLayer(ut)}get hasEditedComment(){var g;return(g=Jt(this,to))==null?void 0:g.hasBeenEdited()}get hasDeletedComment(){var g;return(g=Jt(this,to))==null?void 0:g.isDeleted()}get hasComment(){return!!Jt(this,to)&&!Jt(this,to).isEmpty()&&!Jt(this,to).isDeleted()}async editComment(g){Jt(this,to)||Ir(this,to,new Comment(this)),Jt(this,to).edit(g)}toggleComment(g,et=void 0){this.hasComment&&this._uiManager.toggleComment(this,g,et)}setSelectedCommentButton(g){Jt(this,to).setSelectedButton(g)}addComment(g){if(this.hasEditedComment){const[,,,ut]=g.rect,[ct]=this.pageDimensions,[dt]=this.pageTranslation,ft=dt+ct+1,St=ut-100,kt=ft+180;g.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[ft,St,kt,ut]}}}updateFromAnnotationLayer({popup:{contents:g,deleted:et}}){Jt(this,to).data=et?null:g}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var dt;const g=this.div=document.createElement("div");g.setAttribute("data-editor-rotation",(360-this.rotation)%360),g.className=this.name,g.setAttribute("id",this.id),g.tabIndex=Jt(this,Nx)?-1:0,g.setAttribute("role","application"),this.defaultL10nId&&g.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||g.classList.add("hidden"),this.setInForeground(),Qr(this,Bw,kP).call(this);const[et,ot]=this.parentDimensions;this.parentRotation%180!==0&&(g.style.maxWidth=`${(100*ot/et).toFixed(2)}%`,g.style.maxHeight=`${(100*et/ot).toFixed(2)}%`);const[ut,ct]=this.getInitialTranslation();return this.translate(ut,ct),bindEvents(this,g,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(Jt(this,Ny)||Ir(this,Ny,new TouchManager({container:g,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Qr(this,uA,d5).bind(this),onPinching:Qr(this,cA,f5).bind(this),onPinchEnd:Qr(this,hA,p5).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(dt=this._uiManager._editorUndoBar)==null||dt.hide(),g}pointerdown(g){const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et){g.preventDefault();return}if(Ir(this,Py,!0),this._isDraggable){Qr(this,dA,m5).call(this,g);return}Qr(this,jw,AP).call(this,g)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){Jt(this,dm)&&clearTimeout(Jt(this,dm)),Ir(this,dm,setTimeout(()=>{var g;Ir(this,dm,null),(g=this.parent)==null||g.moveEditorInDOM(this)},0))}_setParentAndPosition(g,et,ot){g.changeParent(this),this.x=et,this.y=ot,this.fixAndSetPosition(),this._onTranslated()}getRect(g,et,ot=this.rotation){const ut=this.parentScale,[ct,dt]=this.pageDimensions,[ft,St]=this.pageTranslation,kt=g/ut,Tt=et/ut,Rt=this.x*ct,Ft=this.y*dt,jt=this.width*ct,Bt=this.height*dt;switch(ot){case 0:return[Rt+kt+ft,dt-Ft-Tt-Bt+St,Rt+kt+jt+ft,dt-Ft-Tt+St];case 90:return[Rt+Tt+ft,dt-Ft+kt+St,Rt+Tt+Bt+ft,dt-Ft+kt+jt+St];case 180:return[Rt-kt-jt+ft,dt-Ft+Tt+St,Rt-kt+ft,dt-Ft+Tt+Bt+St];case 270:return[Rt-Tt-Bt+ft,dt-Ft-kt-jt+St,Rt-Tt+ft,dt-Ft-kt+St];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,et){const[ot,ut,ct,dt]=g,ft=ct-ot,St=dt-ut;switch(this.rotation){case 0:return[ot,et-dt,ft,St];case 90:return[ot,et-ut,St,ft];case 180:return[ct,et-ut,ft,St];case 270:return[ct,et-dt,St,ft];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ms._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var g;(g=Jt(this,to))==null||g.onUpdatedColor()}getData(){const{comment:{text:g,color:et,date:ot,opacity:ut,deleted:ct,richText:dt},uid:ft,pageIndex:St,creationDate:kt,modificationDate:Tt}=this;return{id:ft,pageIndex:St,rect:this.getPDFRect(),richText:dt,contentsObj:{str:g},creationDate:kt,modificationDate:ot||Tt,popupRef:!ct,color:et,opacity:ut}}onceAdded(g){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),Ir(this,Ry,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),Ir(this,Ry,!1),!0):!1}isInEditMode(){return Jt(this,Ry)}shouldGetKeyboardEvents(){return Jt(this,Jm)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:g,left:et,bottom:ot,right:ut}=this.getClientDimensions(),{innerHeight:ct,innerWidth:dt}=window;return et<dt&&ut>0&&g<ct&&ot>0}rebuild(){Qr(this,Bw,kP).call(this)}rotate(g){}resize(){}serializeDeleted(){var g;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((g=this._initialData)==null?void 0:g.popupRef)||""}}serialize(g=!1,et=null){var ot;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((ot=this._initialData)==null?void 0:ot.popupRef)||""}}static async deserialize(g,et,ot){const ut=new this.prototype.constructor({parent:et,id:et.getNextId(),uiManager:ot,annotationElementId:g.annotationElementId,creationDate:g.creationDate,modificationDate:g.modificationDate});ut.rotation=g.rotation,Ir(ut,ky,g.accessibilityData),ut._isCopy=g.isCopy||!1;const[ct,dt]=ut.pageDimensions,[ft,St,kt,Tt]=ut.getRectInCurrentCoords(g.rect,dt);return ut.x=ft/ct,ut.y=St/dt,ut.width=kt/ct,ut.height=Tt/dt,ut}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var g,et;if((g=Jt(this,ev))==null||g.abort(),Ir(this,ev,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),Jt(this,dm)&&(clearTimeout(Jt(this,dm)),Ir(this,dm,null)),Qr(this,Dy,LS).call(this),this.removeEditToolbar(),Jt(this,xp)){for(const ot of Jt(this,xp).values())clearTimeout(ot);Ir(this,xp,null)}this.parent=null,(et=Jt(this,Ny))==null||et.destroy(),Ir(this,Ny,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Qr(this,oA,c5).call(this),Jt(this,Ll).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[g,et]}=this,[ot,ut,ct,dt]=this.getPDFRect();return[Ms._round(ot+(ct-ot)*g),Ms._round(ut+(dt-ut)*(1-et))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return Jt(this,to).commentPopupPositionInLayer}set commentPopupPosition(g){Jt(this,to).commentPopupPositionInLayer=g}hasDefaultPopupPosition(){return Jt(this,to).hasDefaultPopupPosition()}get commentButtonWidth(){return Jt(this,to).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(g){Jt(this,to).setCommentButtonStates(g)}keydown(g){if(!this.isResizable||g.target!==this.div||g.key!=="Enter")return;this._uiManager.setSelected(this),Ir(this,Zm,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const et=Jt(this,Ll).children;if(!Jt(this,Op)){Ir(this,Op,Array.from(et));const dt=Qr(this,fA,g5).bind(this),ft=Qr(this,pA,v5).bind(this),St=this._uiManager._signal;for(const kt of Jt(this,Op)){const Tt=kt.getAttribute("data-resizer-name");kt.setAttribute("role","spinbutton"),kt.addEventListener("keydown",dt,{signal:St}),kt.addEventListener("blur",ft,{signal:St}),kt.addEventListener("focus",Qr(this,mA,y5).bind(this,Tt),{signal:St}),kt.setAttribute("data-l10n-id",Ms._l10nResizer[Tt])}}const ot=Jt(this,Op)[0];let ut=0;for(const dt of et){if(dt===ot)break;ut++}const ct=(360-this.rotation+this.parentRotation)%360/90*(Jt(this,Op).length/4);if(ct!==ut){if(ct<ut)for(let ft=0;ft<ut-ct;ft++)Jt(this,Ll).append(Jt(this,Ll).firstChild);else if(ct>ut)for(let ft=0;ft<ct-ut;ft++)Jt(this,Ll).firstChild.before(Jt(this,Ll).lastChild);let dt=0;for(const ft of et){const kt=Jt(this,Op)[dt++].getAttribute("data-resizer-name");ft.setAttribute("data-l10n-id",Ms._l10nResizer[kt])}}Qr(this,$w,TP).call(this,0),Ir(this,Jm,!0),Jt(this,Ll).firstChild.focus({focusVisible:!0}),g.preventDefault(),g.stopImmediatePropagation()}_resizeWithKeyboard(g,et){Jt(this,Jm)&&Qr(this,Lw,CP).call(this,Jt(this,Nw),{deltaX:g,deltaY:et,fromKeyboard:!0})}_stopResizingWithKeyboard(){Qr(this,Dy,LS).call(this),this.div.focus()}select(){var g,et,ot;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(g=this.div)==null||g.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var ut,ct;(ut=this.div)!=null&&ut.classList.contains("selectedEditor")&&((ct=this._editToolbar)==null||ct.show())});return}(et=this._editToolbar)==null||et.show(),(ot=Jt(this,So))==null||ot.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var g;return(g=this.div)==null?void 0:g.focus({preventScroll:!0})},0)}unselect(){var g,et,ot,ut,ct;this.isSelected&&(this.isSelected=!1,(g=Jt(this,Ll))==null||g.classList.add("hidden"),(et=this.div)==null||et.classList.remove("selectedEditor"),(ot=this.div)!=null&&ot.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(ut=this._editToolbar)==null||ut.hide(),(ct=Jt(this,So))==null||ct.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(g,et){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(g){g.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return Jt(this,Dw)}set isEditing(g){Ir(this,Dw,g),this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(g,et=!1){if(et){Jt(this,xp)||Ir(this,xp,new Map);const{action:ot}=g;let ut=Jt(this,xp).get(ot);ut&&clearTimeout(ut),ut=setTimeout(()=>{this._reportTelemetry(g),Jt(this,xp).delete(ot),Jt(this,xp).size===0&&Ir(this,xp,null)},Ms._telemetryTimeout),Jt(this,xp).set(ot,ut);return}g.type||(g.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:g}})}show(g=this._isVisible){this.div.classList.toggle("hidden",!g),this._isVisible=g}enable(){this.div&&(this.div.tabIndex=0),Ir(this,Nx,!1)}disable(){this.div&&(this.div.tabIndex=-1),Ir(this,Nx,!0)}updateFakeAnnotationElement(g){if(!Jt(this,hm)&&!this.deleted){Ir(this,hm,g.addFakeAnnotation(this));return}if(this.deleted){Jt(this,hm).remove(),Ir(this,hm,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&Jt(this,hm).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(g){if(this.deleted)return g.hide(),null;let et=g.container.querySelector(".annotationContent");if(!et)et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),g.container.prepend(et);else if(et.nodeName==="CANVAS"){const ot=et;et=document.createElement("div"),et.classList.add("annotationContent",this.editorType),ot.before(et)}return et}resetAnnotationElement(g){const{firstChild:et}=g.container;(et==null?void 0:et.nodeName)==="DIV"&&et.classList.contains("annotationContent")&&et.remove()}};ky=new WeakMap,Op=new WeakMap,So=new WeakMap,to=new WeakMap,Ym=new WeakMap,Nx=new WeakMap,Q0=new WeakMap,Rw=new WeakMap,Ll=new WeakMap,Ty=new WeakMap,Zm=new WeakMap,hm=new WeakMap,ev=new WeakMap,Nw=new WeakMap,Py=new WeakMap,zu=new WeakMap,Dw=new WeakMap,Ry=new WeakMap,Jm=new WeakMap,dm=new WeakMap,Dx=new WeakMap,Mx=new WeakMap,xp=new WeakMap,Ny=new WeakMap,Mw=new WeakMap,aA=new WeakMap,Fw=new WeakSet,SP=function([g,et],ot,ut){[ot,ut]=this.screenToPageTranslation(ot,ut),this.x+=ot/g,this.y+=ut/et,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ow=new WeakSet,wP=function(g,et,ot){switch(ot){case 90:return[et,-g];case 180:return[-g,-et];case 270:return[-et,g];default:return[g,et]}},Fx=new WeakSet,cC=function(g){switch(g){case 90:{const[et,ot]=this.pageDimensions;return[0,-et/ot,ot/et,0]}case 180:return[-1,0,0,-1];case 270:{const[et,ot]=this.pageDimensions;return[0,et/ot,-ot/et,0]}default:return[1,0,0,1]}},oA=new WeakSet,c5=function(){if(Jt(this,Ll))return;Ir(this,Ll,document.createElement("div")),Jt(this,Ll).classList.add("resizers");const g=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],et=this._uiManager._signal;for(const ot of g){const ut=document.createElement("div");Jt(this,Ll).append(ut),ut.classList.add("resizer",ot),ut.setAttribute("data-resizer-name",ot),ut.addEventListener("pointerdown",Qr(this,lA,h5).bind(this,ot),{signal:et}),ut.addEventListener("contextmenu",noContextMenu,{signal:et}),ut.tabIndex=-1}this.div.prepend(Jt(this,Ll))},lA=new WeakSet,h5=function(g,et){var Tt;et.preventDefault();const{isMac:ot}=util_FeatureTest.platform;if(et.button!==0||et.ctrlKey&&ot)return;(Tt=Jt(this,So))==null||Tt.toggle(!1);const ut=this._isDraggable;this._isDraggable=!1,Ir(this,Ty,[et.screenX,et.screenY]);const ct=new AbortController,dt=this._uiManager.combinedSignal(ct);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Qr(this,Lw,CP).bind(this,g),{passive:!0,capture:!0,signal:dt}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:dt}),window.addEventListener("contextmenu",noContextMenu,{signal:dt}),Ir(this,Zm,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const ft=this.parent.div.style.cursor,St=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(et.target).cursor;const kt=()=>{var Rt;ct.abort(),this.parent.togglePointerEvents(!0),(Rt=Jt(this,So))==null||Rt.toggle(!0),this._isDraggable=ut,this.parent.div.style.cursor=ft,this.div.style.cursor=St,Qr(this,Ox,hC).call(this)};window.addEventListener("pointerup",kt,{signal:dt}),window.addEventListener("blur",kt,{signal:dt})},Iw=new WeakSet,_P=function(g,et,ot,ut){this.width=ot,this.height=ut,this.x=g,this.y=et,this.setDims(),this.fixAndSetPosition(),this._onResized()},Ox=new WeakSet,hC=function(){if(!Jt(this,Zm))return;const{savedX:g,savedY:et,savedWidth:ot,savedHeight:ut}=Jt(this,Zm);Ir(this,Zm,null);const ct=this.x,dt=this.y,ft=this.width,St=this.height;ct===g&&dt===et&&ft===ot&&St===ut||this.addCommands({cmd:Qr(this,Iw,_P).bind(this,ct,dt,ft,St),undo:Qr(this,Iw,_P).bind(this,g,et,ot,ut),mustExec:!0})},Lw=new WeakSet,CP=function(g,et){const[ot,ut]=this.parentDimensions,ct=this.x,dt=this.y,ft=this.width,St=this.height,kt=Ms.MIN_SIZE/ot,Tt=Ms.MIN_SIZE/ut,Rt=Qr(this,Fx,cC).call(this,this.rotation),Ft=(hr,Tr)=>[Rt[0]*hr+Rt[2]*Tr,Rt[1]*hr+Rt[3]*Tr],jt=Qr(this,Fx,cC).call(this,360-this.rotation),Bt=(hr,Tr)=>[jt[0]*hr+jt[2]*Tr,jt[1]*hr+jt[3]*Tr];let zt,Ht,Ut=!1,Kt=!1;switch(g){case"topLeft":Ut=!0,zt=(hr,Tr)=>[0,0],Ht=(hr,Tr)=>[hr,Tr];break;case"topMiddle":zt=(hr,Tr)=>[hr/2,0],Ht=(hr,Tr)=>[hr/2,Tr];break;case"topRight":Ut=!0,zt=(hr,Tr)=>[hr,0],Ht=(hr,Tr)=>[0,Tr];break;case"middleRight":Kt=!0,zt=(hr,Tr)=>[hr,Tr/2],Ht=(hr,Tr)=>[0,Tr/2];break;case"bottomRight":Ut=!0,zt=(hr,Tr)=>[hr,Tr],Ht=(hr,Tr)=>[0,0];break;case"bottomMiddle":zt=(hr,Tr)=>[hr/2,Tr],Ht=(hr,Tr)=>[hr/2,0];break;case"bottomLeft":Ut=!0,zt=(hr,Tr)=>[0,Tr],Ht=(hr,Tr)=>[hr,0];break;case"middleLeft":Kt=!0,zt=(hr,Tr)=>[0,Tr/2],Ht=(hr,Tr)=>[hr,Tr/2];break}const Yt=zt(ft,St),er=Ht(ft,St);let ar=Ft(...er);const ir=Ms._round(ct+ar[0]),lr=Ms._round(dt+ar[1]);let cr=1,vr=1,xr,yr;if(et.fromKeyboard)({deltaX:xr,deltaY:yr}=et);else{const{screenX:hr,screenY:Tr}=et,[mr,Er]=Jt(this,Ty);[xr,yr]=this.screenToPageTranslation(hr-mr,Tr-Er),Jt(this,Ty)[0]=hr,Jt(this,Ty)[1]=Tr}if([xr,yr]=Bt(xr/ot,yr/ut),Ut){const hr=Math.hypot(ft,St);cr=vr=Math.max(Math.min(Math.hypot(er[0]-Yt[0]-xr,er[1]-Yt[1]-yr)/hr,1/ft,1/St),kt/ft,Tt/St)}else Kt?cr=MathClamp(Math.abs(er[0]-Yt[0]-xr),kt,1)/ft:vr=MathClamp(Math.abs(er[1]-Yt[1]-yr),Tt,1)/St;const Sr=Ms._round(ft*cr),kr=Ms._round(St*vr);ar=Ft(...Ht(Sr,kr));const Pr=ir-ar[0],Or=lr-ar[1];Jt(this,zu)||Ir(this,zu,[this.x,this.y,this.width,this.height]),this.width=Sr,this.height=kr,this.x=Pr,this.y=Or,this.setDims(),this.fixAndSetPosition(),this._onResizing()},uA=new WeakSet,d5=function(){var g;Ir(this,Zm,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(g=Jt(this,So))==null||g.toggle(!1),this.parent.togglePointerEvents(!1)},cA=new WeakSet,f5=function(g,et,ot){let ct=.7*(ot/et)+1-.7;if(ct===1)return;const dt=Qr(this,Fx,cC).call(this,this.rotation),ft=(ir,lr)=>[dt[0]*ir+dt[2]*lr,dt[1]*ir+dt[3]*lr],[St,kt]=this.parentDimensions,Tt=this.x,Rt=this.y,Ft=this.width,jt=this.height,Bt=Ms.MIN_SIZE/St,zt=Ms.MIN_SIZE/kt;ct=Math.max(Math.min(ct,1/Ft,1/jt),Bt/Ft,zt/jt);const Ht=Ms._round(Ft*ct),Ut=Ms._round(jt*ct);if(Ht===Ft&&Ut===jt)return;Jt(this,zu)||Ir(this,zu,[Tt,Rt,Ft,jt]);const Kt=ft(Ft/2,jt/2),Yt=Ms._round(Tt+Kt[0]),er=Ms._round(Rt+Kt[1]),ar=ft(Ht/2,Ut/2);this.x=Yt-ar[0],this.y=er-ar[1],this.width=Ht,this.height=Ut,this.setDims(),this.fixAndSetPosition(),this._onResizing()},hA=new WeakSet,p5=function(){var g;(g=Jt(this,So))==null||g.toggle(!0),this.parent.togglePointerEvents(!0),Qr(this,Ox,hC).call(this)},jw=new WeakSet,AP=function(g){const{isMac:et}=util_FeatureTest.platform;g.ctrlKey&&!et||g.shiftKey||g.metaKey&&et?this.parent.toggleSelected(this):this.parent.setSelected(this)},dA=new WeakSet,m5=function(g){const{isSelected:et}=this;this._uiManager.setUpDragSession();let ot=!1;const ut=new AbortController,ct=this._uiManager.combinedSignal(ut),dt={capture:!0,passive:!1,signal:ct},ft=kt=>{ut.abort(),Ir(this,Q0,null),Ir(this,Py,!1),this._uiManager.endDragSession()||Qr(this,jw,AP).call(this,kt),ot&&this._onStopDragging()};et&&(Ir(this,Dx,g.clientX),Ir(this,Mx,g.clientY),Ir(this,Q0,g.pointerId),Ir(this,Rw,g.pointerType),window.addEventListener("pointermove",kt=>{ot||(ot=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:Tt,clientY:Rt,pointerId:Ft}=kt;if(Ft!==Jt(this,Q0)){stopEvent(kt);return}const[jt,Bt]=this.screenToPageTranslation(Tt-Jt(this,Dx),Rt-Jt(this,Mx));Ir(this,Dx,Tt),Ir(this,Mx,Rt),this._uiManager.dragSelectedEditors(jt,Bt)},dt),window.addEventListener("touchmove",stopEvent,dt),window.addEventListener("pointerdown",kt=>{kt.pointerType===Jt(this,Rw)&&(Jt(this,Ny)||kt.isPrimary)&&ft(kt),stopEvent(kt)},dt));const St=kt=>{if(!Jt(this,Q0)||Jt(this,Q0)===kt.pointerId){ft(kt);return}stopEvent(kt)};window.addEventListener("pointerup",St,{signal:ct}),window.addEventListener("blur",St,{signal:ct})},Bw=new WeakSet,kP=function(){if(Jt(this,ev)||!this.div)return;Ir(this,ev,new AbortController);const g=this._uiManager.combinedSignal(Jt(this,ev));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:g}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:g})},fA=new WeakSet,g5=function(g){Ms._resizerKeyboardManager.exec(this,g)},pA=new WeakSet,v5=function(g){var et;Jt(this,Jm)&&((et=g.relatedTarget)==null?void 0:et.parentNode)!==Jt(this,Ll)&&Qr(this,Dy,LS).call(this)},mA=new WeakSet,y5=function(g){Ir(this,Nw,Jt(this,Jm)?g:"")},$w=new WeakSet,TP=function(g){if(Jt(this,Op))for(const et of Jt(this,Op))et.tabIndex=g},Dy=new WeakSet,LS=function(){Ir(this,Jm,!1),Qr(this,$w,TP).call(this,-1),Qr(this,Ox,hC).call(this)},Mr(Ms,Ow),Kn(Ms,"_l10n",null),Kn(Ms,"_l10nResizer",null),Kn(Ms,"_borderLineWidth",-1),Kn(Ms,"_colorManager",new ColorManager),Kn(Ms,"_zIndex",1),Kn(Ms,"_telemetryTimeout",1e3);let AnnotationEditor=Ms;class FakeEditor extends AnnotationEditor{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(g){this.h1=g?g&4294967295:SEED,this.h2=g?g&4294967295:SEED}update(g){let et,ot;if(typeof g=="string"){et=new Uint8Array(g.length*2),ot=0;for(let zt=0,Ht=g.length;zt<Ht;zt++){const Ut=g.charCodeAt(zt);Ut<=255?et[ot++]=Ut:(et[ot++]=Ut>>>8,et[ot++]=Ut&255)}}else if(ArrayBuffer.isView(g))et=g.slice(),ot=et.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const ut=ot>>2,ct=ot-ut*4,dt=new Uint32Array(et.buffer,0,ut);let ft=0,St=0,kt=this.h1,Tt=this.h2;const Rt=3432918353,Ft=461845907,jt=Rt&MASK_LOW,Bt=Ft&MASK_LOW;for(let zt=0;zt<ut;zt++)zt&1?(ft=dt[zt],ft=ft*Rt&MASK_HIGH|ft*jt&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*Ft&MASK_HIGH|ft*Bt&MASK_LOW,kt^=ft,kt=kt<<13|kt>>>19,kt=kt*5+3864292196):(St=dt[zt],St=St*Rt&MASK_HIGH|St*jt&MASK_LOW,St=St<<15|St>>>17,St=St*Ft&MASK_HIGH|St*Bt&MASK_LOW,Tt^=St,Tt=Tt<<13|Tt>>>19,Tt=Tt*5+3864292196);switch(ft=0,ct){case 3:ft^=et[ut*4+2]<<16;case 2:ft^=et[ut*4+1]<<8;case 1:ft^=et[ut*4],ft=ft*Rt&MASK_HIGH|ft*jt&MASK_LOW,ft=ft<<15|ft>>>17,ft=ft*Ft&MASK_HIGH|ft*Bt&MASK_LOW,ut&1?kt^=ft:Tt^=ft}this.h1=kt,this.h2=Tt}hexdigest(){let g=this.h1,et=this.h2;return g^=et>>>1,g=g*3981806797&MASK_HIGH|g*36045&MASK_LOW,et=et*4283543511&MASK_HIGH|((et<<16|g>>>16)*2950163797&MASK_HIGH)>>>16,g^=et>>>1,g=g*444984403&MASK_HIGH|g*60499&MASK_LOW,et=et*3301882366&MASK_HIGH|((et<<16|g>>>16)*3120437893&MASK_HIGH)>>>16,g^=et>>>1,(g>>>0).toString(16).padStart(8,"0")+(et>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var My,Fy,Qm,Bl,gA,x5;class AnnotationStorage{constructor(){Mr(this,gA);Mr(this,My,!1);Mr(this,Fy,null);Mr(this,Qm,null);Mr(this,Bl,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,et){const ot=Jt(this,Bl).get(g);return ot===void 0?et:Object.assign(et,ot)}getRawValue(g){return Jt(this,Bl).get(g)}remove(g){const et=Jt(this,Bl).get(g);if(et!==void 0&&(et instanceof AnnotationEditor&&Jt(this,Qm).delete(et.annotationElementId),Jt(this,Bl).delete(g),Jt(this,Bl).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const ot of Jt(this,Bl).values())if(ot instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,et){const ot=Jt(this,Bl).get(g);let ut=!1;if(ot!==void 0)for(const[ct,dt]of Object.entries(et))ot[ct]!==dt&&(ut=!0,ot[ct]=dt);else ut=!0,Jt(this,Bl).set(g,et);ut&&Qr(this,gA,x5).call(this),et instanceof AnnotationEditor&&((Jt(this,Qm)||Ir(this,Qm,new Map)).set(et.annotationElementId,et),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(et.constructor._type))}has(g){return Jt(this,Bl).has(g)}get size(){return Jt(this,Bl).size}resetModified(){Jt(this,My)&&(Ir(this,My,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(Jt(this,Bl).size===0)return SerializableEmpty;const g=new Map,et=new MurmurHash3_64,ot=[],ut=Object.create(null);let ct=!1;for(const[dt,ft]of Jt(this,Bl)){const St=ft instanceof AnnotationEditor?ft.serialize(!1,ut):ft;St&&(g.set(dt,St),et.update(`${dt}:${JSON.stringify(St)}`),ct||(ct=!!St.bitmap))}if(ct)for(const dt of g.values())dt.bitmap&&ot.push(dt.bitmap);return g.size>0?{map:g,hash:et.hexdigest(),transfer:ot}:SerializableEmpty}get editorStats(){let g=null;const et=new Map;let ot=0,ut=0;for(const ct of Jt(this,Bl).values()){if(!(ct instanceof AnnotationEditor)){ct.popup&&(ct.popup.deleted?ut+=1:ot+=1);continue}ct.isCommentDeleted?ut+=1:ct.hasEditedComment&&(ot+=1);const dt=ct.telemetryFinalData;if(!dt)continue;const{type:ft}=dt;et.has(ft)||et.set(ft,Object.getPrototypeOf(ct).constructor),g||(g=Object.create(null));const St=g[ft]||(g[ft]=new Map);for(const[kt,Tt]of Object.entries(dt)){if(kt==="type")continue;let Rt=St.get(kt);Rt||(Rt=new Map,St.set(kt,Rt));const Ft=Rt.get(Tt)??0;Rt.set(Tt,Ft+1)}}if((ut>0||ot>0)&&(g||(g=Object.create(null)),g.comments={deleted:ut,edited:ot}),!g)return null;for(const[ct,dt]of et)g[ct]=dt.computeTelemetryFinalData(g[ct]);return g}resetModifiedIds(){Ir(this,Fy,null)}updateEditor(g,et){var ut;const ot=(ut=Jt(this,Qm))==null?void 0:ut.get(g);return ot?(ot.updateFromAnnotationLayer(et),!0):!1}getEditor(g){var et;return((et=Jt(this,Qm))==null?void 0:et.get(g))||null}get modifiedIds(){if(Jt(this,Fy))return Jt(this,Fy);const g=[];if(Jt(this,Qm))for(const et of Jt(this,Qm).values())et.serialize()&&g.push(et.annotationElementId);return Ir(this,Fy,{ids:new Set(g),hash:g.join(",")})}[Symbol.iterator](){return Jt(this,Bl).entries()}}My=new WeakMap,Fy=new WeakMap,Qm=new WeakMap,Bl=new WeakMap,gA=new WeakSet,x5=function(){Jt(this,My)||(Ir(this,My,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Vw;class PrintAnnotationStorage extends AnnotationStorage{constructor(et){super();Mr(this,Vw,void 0);const{map:ot,hash:ut,transfer:ct}=et.serializable,dt=structuredClone(ot,ct?{transfer:ct}:null);Ir(this,Vw,{map:dt,hash:ut,transfer:ct})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return Jt(this,Vw)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}Vw=new WeakMap;var Ix;class FontLoader{constructor({ownerDocument:g=globalThis.document,styleElement:et=null}){Mr(this,Ix,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const et=this.styleElement.sheet;et.insertRule(g,et.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),Jt(this,Ix).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:g,disableFontFace:et,_inspectFont:ot}){if(!(!g||Jt(this,Ix).has(g.loadedName))){if(assert(!et,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:ut,src:ct,style:dt}=g,ft=new FontFace(ut,ct,dt);this.addNativeFontFace(ft);try{await ft.load(),Jt(this,Ix).add(ut),ot==null||ot(g)}catch{warn(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ft)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g);return}if(this.isFontLoadingAPISupported){const ot=g.createNativeFontFace();if(ot){this.addNativeFontFace(ot);try{await ot.loaded}catch(ut){throw warn(`Failed to load font '${ot.family}': '${ut}'.`),g.disableFontFace=!0,ut}}return}const et=g.createFontFaceRule();if(et){if(this.insertRule(et),this.isSyncFontLoadingSupported)return;await new Promise(ot=>{const ut=this._queueLoadingCallback(ot);this._prepareFontLoadEvent(g,ut)})}}get isFontLoadingAPISupported(){var et;const g=!!((et=this._document)!=null&&et.fonts);return shadow(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(g){function et(){for(assert(!ut.done,"completeRequest() cannot be called twice."),ut.done=!0;ot.length>0&&ot[0].done;){const ct=ot.shift();setTimeout(ct.callback,0)}}const{loadingRequests:ot}=this,ut={done:!1,complete:et,callback:g};return ot.push(ut),ut}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,et){function ot(er,ar){return er.charCodeAt(ar)<<24|er.charCodeAt(ar+1)<<16|er.charCodeAt(ar+2)<<8|er.charCodeAt(ar+3)&255}function ut(er,ar,ir,lr){const cr=er.substring(0,ar),vr=er.substring(ar+ir);return cr+lr+vr}let ct,dt;const ft=this._document.createElement("canvas");ft.width=1,ft.height=1;const St=ft.getContext("2d");let kt=0;function Tt(er,ar){if(++kt>30){warn("Load test font never loaded."),ar();return}if(St.font="30px "+er,St.fillText(".",0,20),St.getImageData(0,0,1,1).data[3]>0){ar();return}setTimeout(Tt.bind(null,er,ar))}const Rt=`lt${Date.now()}${this.loadTestFontId++}`;let Ft=this._loadTestFont;Ft=ut(Ft,976,Rt.length,Rt);const Bt=16,zt=1482184792;let Ht=ot(Ft,Bt);for(ct=0,dt=Rt.length-3;ct<dt;ct+=4)Ht=Ht-zt+ot(Rt,ct)|0;ct<Rt.length&&(Ht=Ht-zt+ot(Rt+"XXX",ct)|0),Ft=ut(Ft,Bt,4,string32(Ht));const Ut=`url(data:font/opentype;base64,${btoa(Ft)});`,Kt=`@font-face {font-family:"${Rt}";src:${Ut}}`;this.insertRule(Kt);const Yt=this._document.createElement("div");Yt.style.visibility="hidden",Yt.style.width=Yt.style.height="10px",Yt.style.position="absolute",Yt.style.top=Yt.style.left="0px";for(const er of[g.loadedName,Rt]){const ar=this._document.createElement("span");ar.textContent="Hi",ar.style.fontFamily=er,Yt.append(ar)}this._document.body.append(Yt),Tt(Rt,()=>{Yt.remove(),et.complete()})}}Ix=new WeakMap;var Zs;class FontFaceObject{constructor(g,et=null,ot,ut){Mr(this,Zs,void 0);this.compiledGlyphs=Object.create(null),Ir(this,Zs,g),this._inspectFont=et,ot&&Object.assign(this,ot),ut&&(this.charProcOperatorList=ut)}createNativeFontFace(){var et;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const ot={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(ot.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,ot)}return(et=this._inspectFont)==null||et.call(this,this),g}createFontFaceRule(){var ot;if(!this.data||this.disableFontFace)return null;const g=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let et;if(!this.cssFontInfo)et=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let ut=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ut+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),et=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ut}src:${g}}`}return(ot=this._inspectFont)==null||ot.call(this,this,g),et}getPathGenerator(g,et){if(this.compiledGlyphs[et]!==void 0)return this.compiledGlyphs[et];const ot=this.loadedName+"_path_"+et;let ut;try{ut=g.get(ot)}catch(dt){warn(`getPathGenerator - ignoring character: "${dt}".`)}const ct=new Path2D(ut||"");return this.fontExtraProperties||g.delete(ot),this.compiledGlyphs[et]=ct}get black(){return Jt(this,Zs).black}get bold(){return Jt(this,Zs).bold}get disableFontFace(){return Jt(this,Zs).disableFontFace??!1}get fontExtraProperties(){return Jt(this,Zs).fontExtraProperties??!1}get isInvalidPDFjsFont(){return Jt(this,Zs).isInvalidPDFjsFont}get isType3Font(){return Jt(this,Zs).isType3Font}get italic(){return Jt(this,Zs).italic}get missingFile(){return Jt(this,Zs).missingFile}get remeasure(){return Jt(this,Zs).remeasure}get vertical(){return Jt(this,Zs).vertical}get ascent(){return Jt(this,Zs).ascent}get defaultWidth(){return Jt(this,Zs).defaultWidth}get descent(){return Jt(this,Zs).descent}get bbox(){return Jt(this,Zs).bbox}get fontMatrix(){return Jt(this,Zs).fontMatrix}get fallbackName(){return Jt(this,Zs).fallbackName}get loadedName(){return Jt(this,Zs).loadedName}get mimetype(){return Jt(this,Zs).mimetype}get name(){return Jt(this,Zs).name}get data(){return Jt(this,Zs).data}clearData(){Jt(this,Zs).clearData()}get cssFontInfo(){return Jt(this,Zs).cssFontInfo}get systemFontInfo(){return Jt(this,Zs).systemFontInfo}get defaultVMetrics(){return Jt(this,Zs).defaultVMetrics}}Zs=new WeakMap;function getUrlProp(it){if(it instanceof URL)return it.href;if(typeof it=="string"){if(isNodeJS)return it;const g=URL.parse(it,window.location);if(g)return g.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(it){if(isNodeJS&&typeof Buffer<"u"&&it instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(it instanceof Uint8Array&&it.byteLength===it.buffer.byteLength)return it;if(typeof it=="string")return stringToBytes(it);if(it instanceof ArrayBuffer||ArrayBuffer.isView(it)||typeof it=="object"&&!isNaN(it==null?void 0:it.length))return new Uint8Array(it);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(it){if(typeof it!="string")return null;if(it.endsWith("/"))return it;throw new Error(`Invalid factory url: "${it}" must include trailing slash.`)}const isRefProxy=it=>typeof it=="object"&&Number.isInteger(it==null?void 0:it.num)&&it.num>=0&&Number.isInteger(it==null?void 0:it.gen)&&it.gen>=0,isNameProxy=it=>typeof it=="object"&&typeof(it==null?void 0:it.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var _g,vA;class LoopbackPort{constructor(){Mr(this,_g,new Map);Mr(this,vA,Promise.resolve())}postMessage(g,et){const ot={data:structuredClone(g,et?{transfer:et}:null)};Jt(this,vA).then(()=>{for(const[ut]of Jt(this,_g))ut.call(this,ot)})}addEventListener(g,et,ot=null){let ut=null;if((ot==null?void 0:ot.signal)instanceof AbortSignal){const{signal:ct}=ot;if(ct.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const dt=()=>this.removeEventListener(g,et);ut=()=>ct.removeEventListener("abort",dt),ct.addEventListener("abort",dt)}Jt(this,_g).set(et,ut)}removeEventListener(g,et){const ot=Jt(this,_g).get(et);ot==null||ot(),Jt(this,_g).delete(et)}terminate(){for(const[,g]of Jt(this,_g))g==null||g();Jt(this,_g).clear()}}_g=new WeakMap,vA=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(it){if(it instanceof AbortException||it instanceof InvalidPDFException||it instanceof PasswordException||it instanceof ResponseException||it instanceof UnknownErrorException)return it;switch(it instanceof Error||typeof it=="object"&&it!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),it.name){case"AbortException":return new AbortException(it.message);case"InvalidPDFException":return new InvalidPDFException(it.message);case"PasswordException":return new PasswordException(it.message,it.code);case"ResponseException":return new ResponseException(it.message,it.status,it.missing);case"UnknownErrorException":return new UnknownErrorException(it.message,it.details)}return new UnknownErrorException(it.message,it.toString())}var Lx,yA,b5,xA,E5,bA,S5,jx,dC;class MessageHandler{constructor(g,et,ot){Mr(this,yA);Mr(this,xA);Mr(this,bA);Mr(this,jx);Mr(this,Lx,new AbortController);this.sourceName=g,this.targetName=et,this.comObj=ot,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),ot.addEventListener("message",Qr(this,yA,b5).bind(this),{signal:Jt(this,Lx).signal})}on(g,et){const ot=this.actionHandler;if(ot[g])throw new Error(`There is already an actionName called "${g}"`);ot[g]=et}send(g,et,ot){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:et},ot)}sendWithPromise(g,et,ot){const ut=this.callbackId++,ct=Promise.withResolvers();this.callbackCapabilities[ut]=ct;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:ut,data:et},ot)}catch(dt){ct.reject(dt)}return ct.promise}sendWithStream(g,et,ot,ut){const ct=this.streamId++,dt=this.sourceName,ft=this.targetName,St=this.comObj;return new ReadableStream({start:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ct]={controller:kt,startCall:Tt,pullCall:null,cancelCall:null,isClosed:!1},St.postMessage({sourceName:dt,targetName:ft,action:g,streamId:ct,data:et,desiredSize:kt.desiredSize},ut),Tt.promise},pull:kt=>{const Tt=Promise.withResolvers();return this.streamControllers[ct].pullCall=Tt,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.PULL,streamId:ct,desiredSize:kt.desiredSize}),Tt.promise},cancel:kt=>{assert(kt instanceof Error,"cancel must have a valid reason");const Tt=Promise.withResolvers();return this.streamControllers[ct].cancelCall=Tt,this.streamControllers[ct].isClosed=!0,St.postMessage({sourceName:dt,targetName:ft,stream:StreamKind.CANCEL,streamId:ct,reason:wrapReason(kt)}),Tt.promise}},ot)}destroy(){var g;(g=Jt(this,Lx))==null||g.abort(),Ir(this,Lx,null)}}Lx=new WeakMap,yA=new WeakSet,b5=function({data:g}){if(g.targetName!==this.sourceName)return;if(g.stream){Qr(this,bA,S5).call(this,g);return}if(g.callback){const ot=g.callbackId,ut=this.callbackCapabilities[ot];if(!ut)throw new Error(`Cannot resolve callback ${ot}`);if(delete this.callbackCapabilities[ot],g.callback===CallbackKind.DATA)ut.resolve(g.data);else if(g.callback===CallbackKind.ERROR)ut.reject(wrapReason(g.reason));else throw new Error("Unexpected callback case");return}const et=this.actionHandler[g.action];if(!et)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const ot=this.sourceName,ut=g.sourceName,ct=this.comObj;Promise.try(et,g.data).then(function(dt){ct.postMessage({sourceName:ot,targetName:ut,callback:CallbackKind.DATA,callbackId:g.callbackId,data:dt})},function(dt){ct.postMessage({sourceName:ot,targetName:ut,callback:CallbackKind.ERROR,callbackId:g.callbackId,reason:wrapReason(dt)})});return}if(g.streamId){Qr(this,xA,E5).call(this,g);return}et(g.data)},xA=new WeakSet,E5=function(g){const et=g.streamId,ot=this.sourceName,ut=g.sourceName,ct=this.comObj,dt=this,ft=this.actionHandler[g.action],St={enqueue(kt,Tt=1,Rt){if(this.isCancelled)return;const Ft=this.desiredSize;this.desiredSize-=Tt,Ft>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.ENQUEUE,streamId:et,chunk:kt},Rt)},close(){this.isCancelled||(this.isCancelled=!0,ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.CLOSE,streamId:et}),delete dt.streamSinks[et])},error(kt){assert(kt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.ERROR,streamId:et,reason:wrapReason(kt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};St.sinkCapability.resolve(),St.ready=St.sinkCapability.promise,this.streamSinks[et]=St,Promise.try(ft,g.data,St).then(function(){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.START_COMPLETE,streamId:et,success:!0})},function(kt){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.START_COMPLETE,streamId:et,reason:wrapReason(kt)})})},bA=new WeakSet,S5=function(g){const et=g.streamId,ot=this.sourceName,ut=g.sourceName,ct=this.comObj,dt=this.streamControllers[et],ft=this.streamSinks[et];switch(g.stream){case StreamKind.START_COMPLETE:g.success?dt.startCall.resolve():dt.startCall.reject(wrapReason(g.reason));break;case StreamKind.PULL_COMPLETE:g.success?dt.pullCall.resolve():dt.pullCall.reject(wrapReason(g.reason));break;case StreamKind.PULL:if(!ft){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0});break}ft.desiredSize<=0&&g.desiredSize>0&&ft.sinkCapability.resolve(),ft.desiredSize=g.desiredSize,Promise.try(ft.onPull||onFn).then(function(){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.PULL_COMPLETE,streamId:et,success:!0})},function(kt){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.PULL_COMPLETE,streamId:et,reason:wrapReason(kt)})});break;case StreamKind.ENQUEUE:if(assert(dt,"enqueue should have stream controller"),dt.isClosed)break;dt.controller.enqueue(g.chunk);break;case StreamKind.CLOSE:if(assert(dt,"close should have stream controller"),dt.isClosed)break;dt.isClosed=!0,dt.controller.close(),Qr(this,jx,dC).call(this,dt,et);break;case StreamKind.ERROR:assert(dt,"error should have stream controller"),dt.controller.error(wrapReason(g.reason)),Qr(this,jx,dC).call(this,dt,et);break;case StreamKind.CANCEL_COMPLETE:g.success?dt.cancelCall.resolve():dt.cancelCall.reject(wrapReason(g.reason)),Qr(this,jx,dC).call(this,dt,et);break;case StreamKind.CANCEL:if(!ft)break;const St=wrapReason(g.reason);Promise.try(ft.onCancel||onFn,St).then(function(){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.CANCEL_COMPLETE,streamId:et,success:!0})},function(kt){ct.postMessage({sourceName:ot,targetName:ut,stream:StreamKind.CANCEL_COMPLETE,streamId:et,reason:wrapReason(kt)})}),ft.sinkCapability.reject(St),ft.isCancelled=!0,delete this.streamSinks[et];break;default:throw new Error("Unexpected stream case")}},jx=new WeakSet,dC=async function(g,et){var ot,ut,ct;await Promise.allSettled([(ot=g.startCall)==null?void 0:ot.promise,(ut=g.pullCall)==null?void 0:ut.promise,(ct=g.cancelCall)==null?void 0:ct.promise]),delete this.streamControllers[et]};var zw;class BaseCanvasFactory{constructor({enableHWA:g=!1}){Mr(this,zw,!1);Ir(this,zw,g)}create(g,et){if(g<=0||et<=0)throw new Error("Invalid canvas size");const ot=this._createCanvas(g,et);return{canvas:ot,context:ot.getContext("2d",{willReadFrequently:!Jt(this,zw)})}}reset(g,et,ot){if(!g.canvas)throw new Error("Canvas is not specified");if(et<=0||ot<=0)throw new Error("Invalid canvas size");g.canvas.width=et,g.canvas.height=ot}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,et){unreachable("Abstract method `_createCanvas` called.")}}zw=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:g=globalThis.document,enableHWA:et=!1}){super({enableHWA:et}),this._document=g}_createCanvas(g,et){const ot=this._document.createElement("canvas");return ot.width=g,ot.height=et,ot}}class BaseCMapReaderFactory{constructor({baseUrl:g=null,isCompressed:et=!0}){this.baseUrl=g,this.isCompressed=et}async fetch({name:g}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!g)throw new Error("CMap name must be specified.");const et=this.baseUrl+g+(this.isCompressed?".bcmap":"");return this._fetch(et).then(ot=>({cMapData:ot,isCompressed:this.isCompressed})).catch(ot=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){const et=await fetchData(g,this.isCompressed?"arraybuffer":"text");return et instanceof ArrayBuffer?new Uint8Array(et):stringToBytes(et)}}class BaseFilterFactory{addFilter(g){return"none"}addHCMFilter(g,et){return"none"}addAlphaFilter(g){return"none"}addLuminosityFilter(g){return"none"}addHighlightHCMFilter(g,et,ot,ut,ct){return"none"}destroy(g=!1){}}var Oy,Bx,e0,t0,Zl,Iy,Ly,El,Kl,jy,jS,tv,Q1,$x,fC,rv,ex,EA,w5,Uw,PP,nv,tx,By,BS,$y,$S,Hw,RP,Vy,VS;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:et,ownerDocument:ot=globalThis.document}){super();Mr(this,El);Mr(this,jy);Mr(this,tv);Mr(this,$x);Mr(this,rv);Mr(this,EA);Mr(this,Uw);Mr(this,nv);Mr(this,By);Mr(this,$y);Mr(this,Hw);Mr(this,Vy);Mr(this,Oy,void 0);Mr(this,Bx,void 0);Mr(this,e0,void 0);Mr(this,t0,void 0);Mr(this,Zl,void 0);Mr(this,Iy,void 0);Mr(this,Ly,0);Ir(this,t0,et),Ir(this,Zl,ot)}addFilter(et){if(!et)return"none";let ot=Jt(this,El,Kl).get(et);if(ot)return ot;const[ut,ct,dt]=Qr(this,$x,fC).call(this,et),ft=et.length===1?ut:`${ut}${ct}${dt}`;if(ot=Jt(this,El,Kl).get(ft),ot)return Jt(this,El,Kl).set(et,ot),ot;const St=`g_${Jt(this,t0)}_transfer_map_${Ko(this,Ly)._++}`,kt=Qr(this,rv,ex).call(this,St);Jt(this,El,Kl).set(et,kt),Jt(this,El,Kl).set(ft,kt);const Tt=Qr(this,nv,tx).call(this,St);return Qr(this,$y,$S).call(this,ut,ct,dt,Tt),kt}addHCMFilter(et,ot){var Bt;const ut=`${et}-${ot}`,ct="base";let dt=Jt(this,jy,jS).get(ct);if((dt==null?void 0:dt.key)===ut||(dt?((Bt=dt.filter)==null||Bt.remove(),dt.key=ut,dt.url="none",dt.filter=null):(dt={key:ut,url:"none",filter:null},Jt(this,jy,jS).set(ct,dt)),!et||!ot))return dt.url;const ft=Qr(this,Vy,VS).call(this,et);et=Util$1.makeHexColor(...ft);const St=Qr(this,Vy,VS).call(this,ot);if(ot=Util$1.makeHexColor(...St),Jt(this,tv,Q1).style.color="",et==="#000000"&&ot==="#ffffff"||et===ot)return dt.url;const kt=new Array(256);for(let zt=0;zt<=255;zt++){const Ht=zt/255;kt[zt]=Ht<=.03928?Ht/12.92:((Ht+.055)/1.055)**2.4}const Tt=kt.join(","),Rt=`g_${Jt(this,t0)}_hcm_filter`,Ft=dt.filter=Qr(this,nv,tx).call(this,Rt);Qr(this,$y,$S).call(this,Tt,Tt,Tt,Ft),Qr(this,Uw,PP).call(this,Ft);const jt=(zt,Ht)=>{const Ut=ft[zt]/255,Kt=St[zt]/255,Yt=new Array(Ht+1);for(let er=0;er<=Ht;er++)Yt[er]=Ut+er/Ht*(Kt-Ut);return Yt.join(",")};return Qr(this,$y,$S).call(this,jt(0,5),jt(1,5),jt(2,5),Ft),dt.url=Qr(this,rv,ex).call(this,Rt),dt.url}addAlphaFilter(et){let ot=Jt(this,El,Kl).get(et);if(ot)return ot;const[ut]=Qr(this,$x,fC).call(this,[et]),ct=`alpha_${ut}`;if(ot=Jt(this,El,Kl).get(ct),ot)return Jt(this,El,Kl).set(et,ot),ot;const dt=`g_${Jt(this,t0)}_alpha_map_${Ko(this,Ly)._++}`,ft=Qr(this,rv,ex).call(this,dt);Jt(this,El,Kl).set(et,ft),Jt(this,El,Kl).set(ct,ft);const St=Qr(this,nv,tx).call(this,dt);return Qr(this,Hw,RP).call(this,ut,St),ft}addLuminosityFilter(et){let ot=Jt(this,El,Kl).get(et||"luminosity");if(ot)return ot;let ut,ct;if(et?([ut]=Qr(this,$x,fC).call(this,[et]),ct=`luminosity_${ut}`):ct="luminosity",ot=Jt(this,El,Kl).get(ct),ot)return Jt(this,El,Kl).set(et,ot),ot;const dt=`g_${Jt(this,t0)}_luminosity_map_${Ko(this,Ly)._++}`,ft=Qr(this,rv,ex).call(this,dt);Jt(this,El,Kl).set(et,ft),Jt(this,El,Kl).set(ct,ft);const St=Qr(this,nv,tx).call(this,dt);return Qr(this,EA,w5).call(this,St),et&&Qr(this,Hw,RP).call(this,ut,St),ft}addHighlightHCMFilter(et,ot,ut,ct,dt){var Kt;const ft=`${ot}-${ut}-${ct}-${dt}`;let St=Jt(this,jy,jS).get(et);if((St==null?void 0:St.key)===ft||(St?((Kt=St.filter)==null||Kt.remove(),St.key=ft,St.url="none",St.filter=null):(St={key:ft,url:"none",filter:null},Jt(this,jy,jS).set(et,St)),!ot||!ut))return St.url;const[kt,Tt]=[ot,ut].map(Qr(this,Vy,VS).bind(this));let Rt=Math.round(.2126*kt[0]+.7152*kt[1]+.0722*kt[2]),Ft=Math.round(.2126*Tt[0]+.7152*Tt[1]+.0722*Tt[2]),[jt,Bt]=[ct,dt].map(Qr(this,Vy,VS).bind(this));Ft<Rt&&([Rt,Ft,jt,Bt]=[Ft,Rt,Bt,jt]),Jt(this,tv,Q1).style.color="";const zt=(Yt,er,ar)=>{const ir=new Array(256),lr=(Ft-Rt)/ar,cr=Yt/255,vr=(er-Yt)/(255*ar);let xr=0;for(let yr=0;yr<=ar;yr++){const Sr=Math.round(Rt+yr*lr),kr=cr+yr*vr;for(let Pr=xr;Pr<=Sr;Pr++)ir[Pr]=kr;xr=Sr+1}for(let yr=xr;yr<256;yr++)ir[yr]=ir[xr-1];return ir.join(",")},Ht=`g_${Jt(this,t0)}_hcm_${et}_filter`,Ut=St.filter=Qr(this,nv,tx).call(this,Ht);return Qr(this,Uw,PP).call(this,Ut),Qr(this,$y,$S).call(this,zt(jt[0],Bt[0],5),zt(jt[1],Bt[1],5),zt(jt[2],Bt[2],5),Ut),St.url=Qr(this,rv,ex).call(this,Ht),St.url}destroy(et=!1){var ot,ut,ct,dt;et&&((ot=Jt(this,Iy))!=null&&ot.size)||((ut=Jt(this,e0))==null||ut.parentNode.parentNode.remove(),Ir(this,e0,null),(ct=Jt(this,Bx))==null||ct.clear(),Ir(this,Bx,null),(dt=Jt(this,Iy))==null||dt.clear(),Ir(this,Iy,null),Ir(this,Ly,0))}}Oy=new WeakMap,Bx=new WeakMap,e0=new WeakMap,t0=new WeakMap,Zl=new WeakMap,Iy=new WeakMap,Ly=new WeakMap,El=new WeakSet,Kl=function(){return Jt(this,Bx)||Ir(this,Bx,new Map)},jy=new WeakSet,jS=function(){return Jt(this,Iy)||Ir(this,Iy,new Map)},tv=new WeakSet,Q1=function(){if(!Jt(this,e0)){const et=Jt(this,Zl).createElement("div"),{style:ot}=et;ot.visibility="hidden",ot.contain="strict",ot.width=ot.height=0,ot.position="absolute",ot.top=ot.left=0,ot.zIndex=-1;const ut=Jt(this,Zl).createElementNS(SVG_NS,"svg");ut.setAttribute("width",0),ut.setAttribute("height",0),Ir(this,e0,Jt(this,Zl).createElementNS(SVG_NS,"defs")),et.append(ut),ut.append(Jt(this,e0)),Jt(this,Zl).body.append(et)}return Jt(this,e0)},$x=new WeakSet,fC=function(et){if(et.length===1){const kt=et[0],Tt=new Array(256);for(let Ft=0;Ft<256;Ft++)Tt[Ft]=kt[Ft]/255;const Rt=Tt.join(",");return[Rt,Rt,Rt]}const[ot,ut,ct]=et,dt=new Array(256),ft=new Array(256),St=new Array(256);for(let kt=0;kt<256;kt++)dt[kt]=ot[kt]/255,ft[kt]=ut[kt]/255,St[kt]=ct[kt]/255;return[dt.join(","),ft.join(","),St.join(",")]},rv=new WeakSet,ex=function(et){if(Jt(this,Oy)===void 0){Ir(this,Oy,"");const ot=Jt(this,Zl).URL;ot!==Jt(this,Zl).baseURI&&(isDataScheme(ot)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):Ir(this,Oy,updateUrlHash(ot,"")))}return`url(${Jt(this,Oy)}#${et})`},EA=new WeakSet,w5=function(et){const ot=Jt(this,Zl).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),et.append(ot)},Uw=new WeakSet,PP=function(et){const ot=Jt(this,Zl).createElementNS(SVG_NS,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),et.append(ot)},nv=new WeakSet,tx=function(et){const ot=Jt(this,Zl).createElementNS(SVG_NS,"filter");return ot.setAttribute("color-interpolation-filters","sRGB"),ot.setAttribute("id",et),Jt(this,tv,Q1).append(ot),ot},By=new WeakSet,BS=function(et,ot,ut){const ct=Jt(this,Zl).createElementNS(SVG_NS,ot);ct.setAttribute("type","discrete"),ct.setAttribute("tableValues",ut),et.append(ct)},$y=new WeakSet,$S=function(et,ot,ut,ct){const dt=Jt(this,Zl).createElementNS(SVG_NS,"feComponentTransfer");ct.append(dt),Qr(this,By,BS).call(this,dt,"feFuncR",et),Qr(this,By,BS).call(this,dt,"feFuncG",ot),Qr(this,By,BS).call(this,dt,"feFuncB",ut)},Hw=new WeakSet,RP=function(et,ot){const ut=Jt(this,Zl).createElementNS(SVG_NS,"feComponentTransfer");ot.append(ut),Qr(this,By,BS).call(this,ut,"feFuncA",et)},Vy=new WeakSet,VS=function(et){return Jt(this,tv,Q1).style.color=et,getRGB(getComputedStyle(Jt(this,tv,Q1)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!g)throw new Error("Font filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load font data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}class BaseWasmFactory{constructor({baseUrl:g=null}){this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!g)throw new Error("Wasm filename must be specified.");const et=`${this.baseUrl}${g}`;return this._fetch(et).catch(ot=>{throw new Error(`Unable to load wasm data at: ${et}`)})}async _fetch(g){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(g){const et=await fetchData(g,"arraybuffer");return new Uint8Array(et)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(it){const et=await process.getBuiltinModule("fs").promises.readFile(it);return new Uint8Array(et)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(g,et){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(g,et)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(g){return node_utils_fetchData(g)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(g){return node_utils_fetchData(g)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(it,g,et,ot,ut,ct){it[g*4+0]=Math.min(it[g*4+0],et),it[g*4+1]=Math.min(it[g*4+1],ot),it[g*4+2]=Math.max(it[g*4+2],ut),it[g*4+3]=Math.max(it[g*4+3],ct)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Vx,iv;class BBoxReader{constructor(g,et){Mr(this,Vx,void 0);Mr(this,iv,void 0);Ir(this,Vx,g),Ir(this,iv,et)}get length(){return Jt(this,Vx).length}isEmpty(g){return Jt(this,Vx)[g]===EMPTY_BBOX}minX(g){return Jt(this,iv)[g*4+0]/256}minY(g){return Jt(this,iv)[g*4+1]/256}maxX(g){return(Jt(this,iv)[g*4+2]+1)/256}maxY(g){return(Jt(this,iv)[g*4+3]+1)/256}}Vx=new WeakMap,iv=new WeakMap;const ensureDebugMetadata=(it,g)=>{if(!it)return;let et=it.get(g);return et||(et={dependencies:new Set,isRenderingOperation:!1},it.set(g,et)),et};var Au,ku,zy,Ip,Uy,r0,Ks,Js,n0,Tu,Gw,zx,Hy,Gy,i0,Jl,fm,Ww,NP;class CanvasDependencyTracker{constructor(g,et,ot=!1){Mr(this,Ww);Mr(this,Au,{__proto__:null});Mr(this,ku,{__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]});Mr(this,zy,new Map);Mr(this,Ip,[]);Mr(this,Uy,[]);Mr(this,r0,[[1,0,0,1,0,0]]);Mr(this,Ks,[-1/0,-1/0,1/0,1/0]);Mr(this,Js,new Float64Array([1/0,1/0,-1/0,-1/0]));Mr(this,n0,-1);Mr(this,Tu,new Set);Mr(this,Gw,new Map);Mr(this,zx,new Map);Mr(this,Hy,void 0);Mr(this,Gy,void 0);Mr(this,i0,void 0);Mr(this,Jl,void 0);Mr(this,fm,void 0);Ir(this,Hy,g.width),Ir(this,Gy,g.height),Qr(this,Ww,NP).call(this,et),ot&&Ir(this,fm,new Map)}growOperationsCount(g){g>=Jt(this,Jl).length&&Qr(this,Ww,NP).call(this,g,Jt(this,Jl))}save(g){return Ir(this,Au,{__proto__:Jt(this,Au)}),Ir(this,ku,{__proto__:Jt(this,ku),transform:{__proto__:Jt(this,ku).transform},moveText:{__proto__:Jt(this,ku).moveText},sameLineText:{__proto__:Jt(this,ku).sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:Jt(this,ku)[FORCED_DEPENDENCY_LABEL]}}),Ir(this,Ks,{__proto__:Jt(this,Ks)}),Jt(this,Ip).push(g),this}restore(g){var ut;const et=Object.getPrototypeOf(Jt(this,Au));if(et===null)return this;Ir(this,Au,et),Ir(this,ku,Object.getPrototypeOf(Jt(this,ku))),Ir(this,Ks,Object.getPrototypeOf(Jt(this,Ks)));const ot=Jt(this,Ip).pop();return ot!==void 0&&((ut=ensureDebugMetadata(Jt(this,fm),g))==null||ut.dependencies.add(ot),Jt(this,Jl)[g]=Jt(this,Jl)[ot]),this}recordOpenMarker(g){return Jt(this,Ip).push(g),this}getOpenMarker(){return Jt(this,Ip).length===0?null:Jt(this,Ip).at(-1)}recordCloseMarker(g){var ot;const et=Jt(this,Ip).pop();return et!==void 0&&((ot=ensureDebugMetadata(Jt(this,fm),g))==null||ot.dependencies.add(et),Jt(this,Jl)[g]=Jt(this,Jl)[et]),this}beginMarkedContent(g){return Jt(this,Uy).push(g),this}endMarkedContent(g){var ot;const et=Jt(this,Uy).pop();return et!==void 0&&((ot=ensureDebugMetadata(Jt(this,fm),g))==null||ot.dependencies.add(et),Jt(this,Jl)[g]=Jt(this,Jl)[et]),this}pushBaseTransform(g){return Jt(this,r0).push(Util$1.multiplyByDOMMatrix(Jt(this,r0).at(-1),g.getTransform())),this}popBaseTransform(){return Jt(this,r0).length>1&&Jt(this,r0).pop(),this}recordSimpleData(g,et){return Jt(this,Au)[g]=et,this}recordIncrementalData(g,et){return Jt(this,ku)[g].push(et),this}resetIncrementalData(g,et){return Jt(this,ku)[g].length=0,this}recordNamedData(g,et){return Jt(this,zy).set(g,et),this}recordSimpleDataFromNamed(g,et,ot){Jt(this,Au)[g]=Jt(this,zy).get(et)??ot}recordFutureForcedDependency(g,et){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,et),this}inheritSimpleDataAsFutureForcedDependencies(g){for(const et of g)et in Jt(this,Au)&&this.recordFutureForcedDependency(et,Jt(this,Au)[et]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const g of Jt(this,Tu))this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,g);return this}resetBBox(g){return Jt(this,n0)!==g&&(Ir(this,n0,g),Jt(this,Js)[0]=1/0,Jt(this,Js)[1]=1/0,Jt(this,Js)[2]=-1/0,Jt(this,Js)[3]=-1/0),this}recordClipBox(g,et,ot,ut,ct,dt){const ft=Util$1.multiplyByDOMMatrix(Jt(this,r0).at(-1),et.getTransform()),St=[1/0,1/0,-1/0,-1/0];Util$1.axialAlignedBoundingBox([ot,ct,ut,dt],ft,St);const kt=Util$1.intersect(Jt(this,Ks),St);return kt?(Jt(this,Ks)[0]=kt[0],Jt(this,Ks)[1]=kt[1],Jt(this,Ks)[2]=kt[2],Jt(this,Ks)[3]=kt[3]):(Jt(this,Ks)[0]=Jt(this,Ks)[1]=1/0,Jt(this,Ks)[2]=Jt(this,Ks)[3]=-1/0),this}recordBBox(g,et,ot,ut,ct,dt){const ft=Jt(this,Ks);if(ft[0]===1/0)return this;const St=Util$1.multiplyByDOMMatrix(Jt(this,r0).at(-1),et.getTransform());if(ft[0]===-1/0)return Util$1.axialAlignedBoundingBox([ot,ct,ut,dt],St,Jt(this,Js)),this;const kt=[1/0,1/0,-1/0,-1/0];return Util$1.axialAlignedBoundingBox([ot,ct,ut,dt],St,kt),Jt(this,Js)[0]=Math.min(Jt(this,Js)[0],Math.max(kt[0],ft[0])),Jt(this,Js)[1]=Math.min(Jt(this,Js)[1],Math.max(kt[1],ft[1])),Jt(this,Js)[2]=Math.max(Jt(this,Js)[2],Math.min(kt[2],ft[2])),Jt(this,Js)[3]=Math.max(Jt(this,Js)[3],Math.min(kt[3],ft[3])),this}recordCharacterBBox(g,et,ot,ut=1,ct=0,dt=0,ft){const St=ot.bbox;let kt,Tt;if(St&&(kt=St[2]!==St[0]&&St[3]!==St[1]&&Jt(this,zx).get(ot),kt!==!1&&(Tt=[0,0,0,0],Util$1.axialAlignedBoundingBox(St,ot.fontMatrix,Tt),(ut!==1||ct!==0||dt!==0)&&Util$1.scaleMinMax([ut,0,0,-ut,ct,dt],Tt),kt)))return this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]);if(!ft)return this.recordFullPageBBox(g);const Rt=ft();return St&&Tt&&kt===void 0&&(kt=Tt[0]<=ct-Rt.actualBoundingBoxLeft&&Tt[2]>=ct+Rt.actualBoundingBoxRight&&Tt[1]<=dt-Rt.actualBoundingBoxAscent&&Tt[3]>=dt+Rt.actualBoundingBoxDescent,Jt(this,zx).set(ot,kt),kt)?this.recordBBox(g,et,Tt[0],Tt[2],Tt[1],Tt[3]):this.recordBBox(g,et,ct-Rt.actualBoundingBoxLeft,ct+Rt.actualBoundingBoxRight,dt-Rt.actualBoundingBoxAscent,dt+Rt.actualBoundingBoxDescent)}recordFullPageBBox(g){return Jt(this,Js)[0]=Math.max(0,Jt(this,Ks)[0]),Jt(this,Js)[1]=Math.max(0,Jt(this,Ks)[1]),Jt(this,Js)[2]=Math.min(Jt(this,Hy),Jt(this,Ks)[2]),Jt(this,Js)[3]=Math.min(Jt(this,Gy),Jt(this,Ks)[3]),this}getSimpleIndex(g){return Jt(this,Au)[g]}recordDependencies(g,et){const ot=Jt(this,Tu),ut=Jt(this,Au),ct=Jt(this,ku);for(const dt of et)dt in Jt(this,Au)?ot.add(ut[dt]):dt in ct&&ct[dt].forEach(ot.add,ot);return this}recordNamedDependency(g,et){return Jt(this,zy).has(et)&&Jt(this,Tu).add(Jt(this,zy).get(et)),this}recordOperation(g,et=!1){if(this.recordDependencies(g,[FORCED_DEPENDENCY_LABEL]),Jt(this,fm)){const ot=ensureDebugMetadata(Jt(this,fm),g),{dependencies:ut}=ot;Jt(this,Tu).forEach(ut.add,ut),Jt(this,Ip).forEach(ut.add,ut),Jt(this,Uy).forEach(ut.add,ut),ut.delete(g),ot.isRenderingOperation=!0}if(Jt(this,n0)===g){const ot=floor(Jt(this,Js)[0]*256/Jt(this,Hy)),ut=floor(Jt(this,Js)[1]*256/Jt(this,Gy)),ct=ceil(Jt(this,Js)[2]*256/Jt(this,Hy)),dt=ceil(Jt(this,Js)[3]*256/Jt(this,Gy));expandBBox(Jt(this,i0),g,ot,ut,ct,dt);for(const ft of Jt(this,Tu))ft!==g&&expandBBox(Jt(this,i0),ft,ot,ut,ct,dt);for(const ft of Jt(this,Ip))ft!==g&&expandBBox(Jt(this,i0),ft,ot,ut,ct,dt);for(const ft of Jt(this,Uy))ft!==g&&expandBBox(Jt(this,i0),ft,ot,ut,ct,dt);et||(Jt(this,Tu).clear(),Ir(this,n0,-1))}return this}recordShowTextOperation(g,et=!1){const ot=Array.from(Jt(this,Tu));this.recordOperation(g,et),this.recordIncrementalData("sameLineText",g);for(const ut of ot)this.recordIncrementalData("sameLineText",ut);return this}bboxToClipBoxDropOperation(g,et=!1){return Jt(this,n0)===g&&(Ir(this,n0,-1),Jt(this,Ks)[0]=Math.max(Jt(this,Ks)[0],Jt(this,Js)[0]),Jt(this,Ks)[1]=Math.max(Jt(this,Ks)[1],Jt(this,Js)[1]),Jt(this,Ks)[2]=Math.min(Jt(this,Ks)[2],Jt(this,Js)[2]),Jt(this,Ks)[3]=Math.min(Jt(this,Ks)[3],Jt(this,Js)[3]),et||Jt(this,Tu).clear()),this}_takePendingDependencies(){const g=Jt(this,Tu);return Ir(this,Tu,new Set),g}_extractOperation(g){const et=Jt(this,Gw).get(g);return Jt(this,Gw).delete(g),et}_pushPendingDependencies(g){for(const et of g)Jt(this,Tu).add(et)}take(){return Jt(this,zx).clear(),new BBoxReader(Jt(this,Jl),Jt(this,i0))}takeDebugMetadata(){return Jt(this,fm)}}Au=new WeakMap,ku=new WeakMap,zy=new WeakMap,Ip=new WeakMap,Uy=new WeakMap,r0=new WeakMap,Ks=new WeakMap,Js=new WeakMap,n0=new WeakMap,Tu=new WeakMap,Gw=new WeakMap,zx=new WeakMap,Hy=new WeakMap,Gy=new WeakMap,i0=new WeakMap,Jl=new WeakMap,fm=new WeakMap,Ww=new WeakSet,NP=function(g,et){const ot=new ArrayBuffer(g*4);Ir(this,i0,new Uint8ClampedArray(ot)),Ir(this,Jl,new Uint32Array(ot)),et&&et.length>0?(Jt(this,Jl).set(et),Jt(this,Jl).fill(EMPTY_BBOX,et.length)):Jt(this,Jl).fill(EMPTY_BBOX)};var oo,Mo,Lp,Ux,Hx;const bR=class bR{constructor(g,et,ot){Mr(this,oo,void 0);Mr(this,Mo,void 0);Mr(this,Lp,void 0);Mr(this,Ux,0);Mr(this,Hx,0);if(g instanceof bR&&Jt(g,Lp)===!!ot)return g;Ir(this,oo,g),Ir(this,Mo,et),Ir(this,Lp,!!ot)}growOperationsCount(){throw new Error("Unreachable")}save(g){return Ko(this,Hx)._++,Jt(this,oo).save(Jt(this,Mo)),this}restore(g){return Jt(this,Hx)>0&&(Jt(this,oo).restore(Jt(this,Mo)),Ko(this,Hx)._--),this}recordOpenMarker(g){return Ko(this,Ux)._++,this}getOpenMarker(){return Jt(this,Ux)>0?Jt(this,Mo):Jt(this,oo).getOpenMarker()}recordCloseMarker(g){return Ko(this,Ux)._--,this}beginMarkedContent(g){return this}endMarkedContent(g){return this}pushBaseTransform(g){return Jt(this,oo).pushBaseTransform(g),this}popBaseTransform(){return Jt(this,oo).popBaseTransform(),this}recordSimpleData(g,et){return Jt(this,oo).recordSimpleData(g,Jt(this,Mo)),this}recordIncrementalData(g,et){return Jt(this,oo).recordIncrementalData(g,Jt(this,Mo)),this}resetIncrementalData(g,et){return Jt(this,oo).resetIncrementalData(g,Jt(this,Mo)),this}recordNamedData(g,et){return this}recordSimpleDataFromNamed(g,et,ot){return Jt(this,oo).recordSimpleDataFromNamed(g,et,Jt(this,Mo)),this}recordFutureForcedDependency(g,et){return Jt(this,oo).recordFutureForcedDependency(g,Jt(this,Mo)),this}inheritSimpleDataAsFutureForcedDependencies(g){return Jt(this,oo).inheritSimpleDataAsFutureForcedDependencies(g),this}inheritPendingDependenciesAsFutureForcedDependencies(){return Jt(this,oo).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(g){return Jt(this,Lp)||Jt(this,oo).resetBBox(Jt(this,Mo)),this}recordClipBox(g,et,ot,ut,ct,dt){return Jt(this,Lp)||Jt(this,oo).recordClipBox(Jt(this,Mo),et,ot,ut,ct,dt),this}recordBBox(g,et,ot,ut,ct,dt){return Jt(this,Lp)||Jt(this,oo).recordBBox(Jt(this,Mo),et,ot,ut,ct,dt),this}recordCharacterBBox(g,et,ot,ut,ct,dt,ft){return Jt(this,Lp)||Jt(this,oo).recordCharacterBBox(Jt(this,Mo),et,ot,ut,ct,dt,ft),this}recordFullPageBBox(g){return Jt(this,Lp)||Jt(this,oo).recordFullPageBBox(Jt(this,Mo)),this}getSimpleIndex(g){return Jt(this,oo).getSimpleIndex(g)}recordDependencies(g,et){return Jt(this,oo).recordDependencies(Jt(this,Mo),et),this}recordNamedDependency(g,et){return Jt(this,oo).recordNamedDependency(Jt(this,Mo),et),this}recordOperation(g){return Jt(this,oo).recordOperation(Jt(this,Mo),!0),this}recordShowTextOperation(g){return Jt(this,oo).recordShowTextOperation(Jt(this,Mo),!0),this}bboxToClipBoxDropOperation(g){return Jt(this,Lp)||Jt(this,oo).bboxToClipBoxDropOperation(Jt(this,Mo),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};oo=new WeakMap,Mo=new WeakMap,Lp=new WeakMap,Ux=new WeakMap,Hx=new WeakMap;let CanvasNestedDependencyTracker=bR;const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(it,g){if(!g)return;const et=g[2]-g[0],ot=g[3]-g[1],ut=new Path2D;ut.rect(g[0],g[1],et,ot),it.clip(ut)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(g){super(),this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null}_createGradient(g){let et;this._type==="axial"?et=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(et=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const ot of this._colorStops)et.addColorStop(ot[0],ot[1]);return et}getPattern(g,et,ot,ut){let ct;if(ut===PathType.STROKE||ut===PathType.FILL){const dt=et.current.getClippedPathBoundingBox(ut,getCurrentTransform(g))||[0,0,0,0],ft=Math.ceil(dt[2]-dt[0])||1,St=Math.ceil(dt[3]-dt[1])||1,kt=et.cachedCanvases.getCanvas("pattern",ft,St),Tt=kt.context;Tt.clearRect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.beginPath(),Tt.rect(0,0,Tt.canvas.width,Tt.canvas.height),Tt.translate(-dt[0],-dt[1]),ot=Util$1.transform(ot,[1,0,0,1,dt[0],dt[1]]),Tt.transform(...et.baseTransform),this.matrix&&Tt.transform(...this.matrix),applyBoundingBox(Tt,this._bbox),Tt.fillStyle=this._createGradient(Tt),Tt.fill(),ct=g.createPattern(kt.canvas,"no-repeat");const Rt=new DOMMatrix(ot);ct.setTransform(Rt)}else applyBoundingBox(g,this._bbox),ct=this._createGradient(g);return ct}}function drawTriangle(it,g,et,ot,ut,ct,dt,ft){const St=g.coords,kt=g.colors,Tt=it.data,Rt=it.width*4;let Ft;St[et+1]>St[ot+1]&&(Ft=et,et=ot,ot=Ft,Ft=ct,ct=dt,dt=Ft),St[ot+1]>St[ut+1]&&(Ft=ot,ot=ut,ut=Ft,Ft=dt,dt=ft,ft=Ft),St[et+1]>St[ot+1]&&(Ft=et,et=ot,ot=Ft,Ft=ct,ct=dt,dt=Ft);const jt=(St[et]+g.offsetX)*g.scaleX,Bt=(St[et+1]+g.offsetY)*g.scaleY,zt=(St[ot]+g.offsetX)*g.scaleX,Ht=(St[ot+1]+g.offsetY)*g.scaleY,Ut=(St[ut]+g.offsetX)*g.scaleX,Kt=(St[ut+1]+g.offsetY)*g.scaleY;if(Bt>=Kt)return;const Yt=kt[ct],er=kt[ct+1],ar=kt[ct+2],ir=kt[dt],lr=kt[dt+1],cr=kt[dt+2],vr=kt[ft],xr=kt[ft+1],yr=kt[ft+2],Sr=Math.round(Bt),kr=Math.round(Kt);let Pr,Or,hr,Tr,mr,Er,Dr,Cr;for(let Lr=Sr;Lr<=kr;Lr++){if(Lr<Ht){const ln=Lr<Bt?0:(Bt-Lr)/(Bt-Ht);Pr=jt-(jt-zt)*ln,Or=Yt-(Yt-ir)*ln,hr=er-(er-lr)*ln,Tr=ar-(ar-cr)*ln}else{let ln;Lr>Kt?ln=1:Ht===Kt?ln=0:ln=(Ht-Lr)/(Ht-Kt),Pr=zt-(zt-Ut)*ln,Or=ir-(ir-vr)*ln,hr=lr-(lr-xr)*ln,Tr=cr-(cr-yr)*ln}let qr;Lr<Bt?qr=0:Lr>Kt?qr=1:qr=(Bt-Lr)/(Bt-Kt),mr=jt-(jt-Ut)*qr,Er=Yt-(Yt-vr)*qr,Dr=er-(er-xr)*qr,Cr=ar-(ar-yr)*qr;const sn=Math.round(Math.min(Pr,mr)),an=Math.round(Math.max(Pr,mr));let tn=Rt*Lr+sn*4;for(let ln=sn;ln<=an;ln++)qr=(Pr-ln)/(Pr-mr),qr<0?qr=0:qr>1&&(qr=1),Tt[tn++]=Or-(Or-Er)*qr|0,Tt[tn++]=hr-(hr-Dr)*qr|0,Tt[tn++]=Tr-(Tr-Cr)*qr|0,Tt[tn++]=255}}function drawFigure(it,g,et){const ot=g.coords,ut=g.colors;let ct,dt;switch(g.type){case"lattice":const ft=g.verticesPerRow,St=Math.floor(ot.length/ft)-1,kt=ft-1;for(ct=0;ct<St;ct++){let Tt=ct*ft;for(let Rt=0;Rt<kt;Rt++,Tt++)drawTriangle(it,et,ot[Tt],ot[Tt+1],ot[Tt+ft],ut[Tt],ut[Tt+1],ut[Tt+ft]),drawTriangle(it,et,ot[Tt+ft+1],ot[Tt+1],ot[Tt+ft],ut[Tt+ft+1],ut[Tt+1],ut[Tt+ft])}break;case"triangles":for(ct=0,dt=ot.length;ct<dt;ct+=3)drawTriangle(it,et,ot[ct],ot[ct+1],ot[ct+2],ut[ct],ut[ct+1],ut[ct+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(g){super(),this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[6],this._background=g[7],this.matrix=null}_createMeshCanvas(g,et,ot){const ft=Math.floor(this._bounds[0]),St=Math.floor(this._bounds[1]),kt=Math.ceil(this._bounds[2])-ft,Tt=Math.ceil(this._bounds[3])-St,Rt=Math.min(Math.ceil(Math.abs(kt*g[0]*1.1)),3e3),Ft=Math.min(Math.ceil(Math.abs(Tt*g[1]*1.1)),3e3),jt=kt/Rt,Bt=Tt/Ft,zt={coords:this._coords,colors:this._colors,offsetX:-ft,offsetY:-St,scaleX:1/jt,scaleY:1/Bt},Ht=Rt+2*2,Ut=Ft+2*2,Kt=ot.getCanvas("mesh",Ht,Ut),Yt=Kt.context,er=Yt.createImageData(Rt,Ft);if(et){const ir=er.data;for(let lr=0,cr=ir.length;lr<cr;lr+=4)ir[lr]=et[0],ir[lr+1]=et[1],ir[lr+2]=et[2],ir[lr+3]=255}for(const ir of this._figures)drawFigure(er,ir,zt);return Yt.putImageData(er,2,2),{canvas:Kt.canvas,offsetX:ft-2*jt,offsetY:St-2*Bt,scaleX:jt,scaleY:Bt}}isModifyingCurrentTransform(){return!0}getPattern(g,et,ot,ut){applyBoundingBox(g,this._bbox);const ct=new Float32Array(2);if(ut===PathType.SHADING)Util$1.singularValueDecompose2dScale(getCurrentTransform(g),ct);else if(this.matrix){Util$1.singularValueDecompose2dScale(this.matrix,ct);const[ft,St]=ct;Util$1.singularValueDecompose2dScale(et.baseTransform,ct),ct[0]*=ft,ct[1]*=St}else Util$1.singularValueDecompose2dScale(et.baseTransform,ct);const dt=this._createMeshCanvas(ct,ut===PathType.SHADING?null:this._background,et.cachedCanvases);return ut!==PathType.SHADING&&(g.setTransform(...et.baseTransform),this.matrix&&g.transform(...this.matrix)),g.translate(dt.offsetX,dt.offsetY),g.scale(dt.scaleX,dt.scaleY),g.createPattern(dt.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(it){switch(it[0]){case"RadialAxial":return new RadialAxialShadingPattern(it);case"Mesh":return new MeshShadingPattern(it);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${it[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},SA=class SA{constructor(g,et,ot,ut){this.color=g[1],this.operatorList=g[2],this.matrix=g[3],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.ctx=et,this.canvasGraphicsFactory=ot,this.baseTransform=ut}createPatternCanvas(g,et){var Er,Dr;const{bbox:ot,operatorList:ut,paintType:ct,tilingType:dt,color:ft,canvasGraphicsFactory:St}=this;let{xstep:kt,ystep:Tt}=this;kt=Math.abs(kt),Tt=Math.abs(Tt),info("TilingType: "+dt);const Rt=ot[0],Ft=ot[1],jt=ot[2],Bt=ot[3],zt=jt-Rt,Ht=Bt-Ft,Ut=new Float32Array(2);Util$1.singularValueDecompose2dScale(this.matrix,Ut);const[Kt,Yt]=Ut;Util$1.singularValueDecompose2dScale(this.baseTransform,Ut);const er=Kt*Ut[0],ar=Yt*Ut[1];let ir=zt,lr=Ht,cr=!1,vr=!1;const xr=Math.ceil(kt*er),yr=Math.ceil(Tt*ar),Sr=Math.ceil(zt*er),kr=Math.ceil(Ht*ar);xr>=Sr?ir=kt:cr=!0,yr>=kr?lr=Tt:vr=!0;const Pr=this.getSizeAndScale(ir,this.ctx.canvas.width,er),Or=this.getSizeAndScale(lr,this.ctx.canvas.height,ar),hr=g.cachedCanvases.getCanvas("pattern",Pr.size,Or.size),Tr=hr.context,mr=St.createCanvasGraphics(Tr,et);if(mr.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(mr,ct,ft),Tr.translate(-Pr.scale*Rt,-Or.scale*Ft),mr.transform(0,Pr.scale,0,0,Or.scale,0,0),Tr.save(),(Er=mr.dependencyTracker)==null||Er.save(),this.clipBbox(mr,Rt,Ft,jt,Bt),mr.baseTransform=getCurrentTransform(mr.ctx),mr.executeOperatorList(ut),mr.endDrawing(),(Dr=mr.dependencyTracker)==null||Dr.restore(),Tr.restore(),cr||vr){const Cr=hr.canvas;cr&&(ir=kt),vr&&(lr=Tt);const Lr=this.getSizeAndScale(ir,this.ctx.canvas.width,er),qr=this.getSizeAndScale(lr,this.ctx.canvas.height,ar),sn=Lr.size,an=qr.size,tn=g.cachedCanvases.getCanvas("pattern-workaround",sn,an),ln=tn.context,yn=cr?Math.floor(zt/kt):0,pn=vr?Math.floor(Ht/Tt):0;for(let En=0;En<=yn;En++)for(let On=0;On<=pn;On++)ln.drawImage(Cr,sn*En,an*On,sn,an,0,0,sn,an);return{canvas:tn.canvas,scaleX:Lr.scale,scaleY:qr.scale,offsetX:Rt,offsetY:Ft}}return{canvas:hr.canvas,scaleX:Pr.scale,scaleY:Or.scale,offsetX:Rt,offsetY:Ft}}getSizeAndScale(g,et,ot){const ut=Math.max(SA.MAX_PATTERN_SIZE,et);let ct=Math.ceil(g*ot);return ct>=ut?ct=ut:ot=ct/g,{scale:ot,size:ct}}clipBbox(g,et,ot,ut,ct){const dt=ut-et,ft=ct-ot;g.ctx.rect(et,ot,dt,ft),Util$1.axialAlignedBoundingBox([et,ot,ut,ct],getCurrentTransform(g.ctx),g.current.minMax),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,et,ot){const ut=g.ctx,ct=g.current;switch(et){case PaintType.COLORED:const{fillStyle:dt,strokeStyle:ft}=this.ctx;ut.fillStyle=ct.fillColor=dt,ut.strokeStyle=ct.strokeColor=ft;break;case PaintType.UNCOLORED:ut.fillStyle=ut.strokeStyle=ot,ct.fillColor=ct.strokeColor=ot;break;default:throw new FormatError(`Unsupported paint type: ${et}`)}}isModifyingCurrentTransform(){return!1}getPattern(g,et,ot,ut,ct){let dt=ot;ut!==PathType.SHADING&&(dt=Util$1.transform(dt,et.baseTransform),this.matrix&&(dt=Util$1.transform(dt,this.matrix)));const ft=this.createPatternCanvas(et,ct);let St=new DOMMatrix(dt);St=St.translate(ft.offsetX,ft.offsetY),St=St.scale(1/ft.scaleX,1/ft.scaleY);const kt=g.createPattern(ft.canvas,"repeat");return kt.setTransform(St),kt}};Kn(SA,"MAX_PATTERN_SIZE",3e3);let TilingPattern=SA;function convertBlackAndWhiteToRGBA({src:it,srcPos:g=0,dest:et,width:ot,height:ut,nonBlackColor:ct=4294967295,inverseDecode:dt=!1}){const ft=util_FeatureTest.isLittleEndian?4278190080:255,[St,kt]=dt?[ct,ft]:[ft,ct],Tt=ot>>3,Rt=ot&7,Ft=it.length;et=new Uint32Array(et.buffer);let jt=0;for(let Bt=0;Bt<ut;Bt++){for(const Ht=g+Tt;g<Ht;g++){const Ut=g<Ft?it[g]:255;et[jt++]=Ut&128?kt:St,et[jt++]=Ut&64?kt:St,et[jt++]=Ut&32?kt:St,et[jt++]=Ut&16?kt:St,et[jt++]=Ut&8?kt:St,et[jt++]=Ut&4?kt:St,et[jt++]=Ut&2?kt:St,et[jt++]=Ut&1?kt:St}if(Rt===0)continue;const zt=g<Ft?it[g++]:255;for(let Ht=0;Ht<Rt;Ht++)et[jt++]=zt&1<<7-Ht?kt:St}return{srcPos:g,destPos:jt}}const MIN_FONT_SIZE$1=16,MAX_FONT_SIZE$1=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(it,g){if(it._removeMirroring)throw new Error("Context is already forwarding operations.");it.__originalSave=it.save,it.__originalRestore=it.restore,it.__originalRotate=it.rotate,it.__originalScale=it.scale,it.__originalTranslate=it.translate,it.__originalTransform=it.transform,it.__originalSetTransform=it.setTransform,it.__originalResetTransform=it.resetTransform,it.__originalClip=it.clip,it.__originalMoveTo=it.moveTo,it.__originalLineTo=it.lineTo,it.__originalBezierCurveTo=it.bezierCurveTo,it.__originalRect=it.rect,it.__originalClosePath=it.closePath,it.__originalBeginPath=it.beginPath,it._removeMirroring=()=>{it.save=it.__originalSave,it.restore=it.__originalRestore,it.rotate=it.__originalRotate,it.scale=it.__originalScale,it.translate=it.__originalTranslate,it.transform=it.__originalTransform,it.setTransform=it.__originalSetTransform,it.resetTransform=it.__originalResetTransform,it.clip=it.__originalClip,it.moveTo=it.__originalMoveTo,it.lineTo=it.__originalLineTo,it.bezierCurveTo=it.__originalBezierCurveTo,it.rect=it.__originalRect,it.closePath=it.__originalClosePath,it.beginPath=it.__originalBeginPath,delete it._removeMirroring},it.save=function(){g.save(),this.__originalSave()},it.restore=function(){g.restore(),this.__originalRestore()},it.translate=function(et,ot){g.translate(et,ot),this.__originalTranslate(et,ot)},it.scale=function(et,ot){g.scale(et,ot),this.__originalScale(et,ot)},it.transform=function(et,ot,ut,ct,dt,ft){g.transform(et,ot,ut,ct,dt,ft),this.__originalTransform(et,ot,ut,ct,dt,ft)},it.setTransform=function(et,ot,ut,ct,dt,ft){g.setTransform(et,ot,ut,ct,dt,ft),this.__originalSetTransform(et,ot,ut,ct,dt,ft)},it.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},it.rotate=function(et){g.rotate(et),this.__originalRotate(et)},it.clip=function(et){g.clip(et),this.__originalClip(et)},it.moveTo=function(et,ot){g.moveTo(et,ot),this.__originalMoveTo(et,ot)},it.lineTo=function(et,ot){g.lineTo(et,ot),this.__originalLineTo(et,ot)},it.bezierCurveTo=function(et,ot,ut,ct,dt,ft){g.bezierCurveTo(et,ot,ut,ct,dt,ft),this.__originalBezierCurveTo(et,ot,ut,ct,dt,ft)},it.rect=function(et,ot,ut,ct){g.rect(et,ot,ut,ct),this.__originalRect(et,ot,ut,ct)},it.closePath=function(){g.closePath(),this.__originalClosePath()},it.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,et,ot){let ut;return this.cache[g]!==void 0?(ut=this.cache[g],this.canvasFactory.reset(ut,et,ot)):(ut=this.canvasFactory.create(et,ot),this.cache[g]=ut),ut}delete(g){delete this.cache[g]}clear(){for(const g in this.cache){const et=this.cache[g];this.canvasFactory.destroy(et),delete this.cache[g]}}}function drawImageAtIntegerCoords(it,g,et,ot,ut,ct,dt,ft,St,kt){const[Tt,Rt,Ft,jt,Bt,zt]=getCurrentTransform(it);if(Rt===0&&Ft===0){const Kt=dt*Tt+Bt,Yt=Math.round(Kt),er=ft*jt+zt,ar=Math.round(er),ir=(dt+St)*Tt+Bt,lr=Math.abs(Math.round(ir)-Yt)||1,cr=(ft+kt)*jt+zt,vr=Math.abs(Math.round(cr)-ar)||1;return it.setTransform(Math.sign(Tt),0,0,Math.sign(jt),Yt,ar),it.drawImage(g,et,ot,ut,ct,0,0,lr,vr),it.setTransform(Tt,Rt,Ft,jt,Bt,zt),[lr,vr]}if(Tt===0&&jt===0){const Kt=ft*Ft+Bt,Yt=Math.round(Kt),er=dt*Rt+zt,ar=Math.round(er),ir=(ft+kt)*Ft+Bt,lr=Math.abs(Math.round(ir)-Yt)||1,cr=(dt+St)*Rt+zt,vr=Math.abs(Math.round(cr)-ar)||1;return it.setTransform(0,Math.sign(Rt),Math.sign(Ft),0,Yt,ar),it.drawImage(g,et,ot,ut,ct,0,0,vr,lr),it.setTransform(Tt,Rt,Ft,jt,Bt,zt),[vr,lr]}it.drawImage(g,et,ot,ut,ct,dt,ft,St,kt);const Ht=Math.hypot(Tt,Rt),Ut=Math.hypot(Ft,jt);return[Ht*St,Ut*kt]}class CanvasExtraState{constructor(g,et,ot){Kn(this,"alphaIsShape",!1);Kn(this,"fontSize",0);Kn(this,"fontSizeScale",1);Kn(this,"textMatrix",null);Kn(this,"textMatrixScale",1);Kn(this,"fontMatrix",FONT_IDENTITY_MATRIX);Kn(this,"leading",0);Kn(this,"x",0);Kn(this,"y",0);Kn(this,"lineX",0);Kn(this,"lineY",0);Kn(this,"charSpacing",0);Kn(this,"wordSpacing",0);Kn(this,"textHScale",1);Kn(this,"textRenderingMode",TextRenderingMode$1.FILL);Kn(this,"textRise",0);Kn(this,"fillColor","#000000");Kn(this,"strokeColor","#000000");Kn(this,"patternFill",!1);Kn(this,"patternStroke",!1);Kn(this,"fillAlpha",1);Kn(this,"strokeAlpha",1);Kn(this,"lineWidth",1);Kn(this,"activeSMask",null);Kn(this,"transferMaps","none");ot==null||ot(this),this.clipBox=new Float32Array([0,0,g,et]),this.minMax=MIN_MAX_INIT.slice()}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g.minMax=this.minMax.slice(),g}getPathBoundingBox(g=PathType.FILL,et=null){const ot=this.minMax.slice();if(g===PathType.STROKE){et||unreachable("Stroke bounding box must include transform."),Util$1.singularValueDecompose2dScale(et,XY);const ut=XY[0]*this.lineWidth/2,ct=XY[1]*this.lineWidth/2;ot[0]-=ut,ot[1]-=ct,ot[2]+=ut,ot[3]+=ct}return ot}updateClipFromPath(){const g=Util$1.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(g){this.clipBox.set(g,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(g=PathType.FILL,et=null){return Util$1.intersect(this.clipBox,this.getPathBoundingBox(g,et))}}function putBinaryImageData(it,g){if(g instanceof ImageData){it.putImageData(g,0,0);return}const et=g.height,ot=g.width,ut=et%FULL_CHUNK_HEIGHT,ct=(et-ut)/FULL_CHUNK_HEIGHT,dt=ut===0?ct:ct+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0,kt;const Tt=g.data,Rt=ft.data;let Ft,jt,Bt,zt;if(g.kind===util_ImageKind.GRAYSCALE_1BPP){const Ht=Tt.byteLength,Ut=new Uint32Array(Rt.buffer,0,Rt.byteLength>>2),Kt=Ut.length,Yt=ot+7>>3,er=4294967295,ar=util_FeatureTest.isLittleEndian?4278190080:255;for(Ft=0;Ft<dt;Ft++){for(Bt=Ft<ct?FULL_CHUNK_HEIGHT:ut,kt=0,jt=0;jt<Bt;jt++){const ir=Ht-St;let lr=0;const cr=ir>Yt?ot:ir*8-7,vr=cr&-8;let xr=0,yr=0;for(;lr<vr;lr+=8)yr=Tt[St++],Ut[kt++]=yr&128?er:ar,Ut[kt++]=yr&64?er:ar,Ut[kt++]=yr&32?er:ar,Ut[kt++]=yr&16?er:ar,Ut[kt++]=yr&8?er:ar,Ut[kt++]=yr&4?er:ar,Ut[kt++]=yr&2?er:ar,Ut[kt++]=yr&1?er:ar;for(;lr<cr;lr++)xr===0&&(yr=Tt[St++],xr=128),Ut[kt++]=yr&xr?er:ar,xr>>=1}for(;kt<Kt;)Ut[kt++]=0;it.putImageData(ft,0,Ft*FULL_CHUNK_HEIGHT)}}else if(g.kind===util_ImageKind.RGBA_32BPP){for(jt=0,zt=ot*FULL_CHUNK_HEIGHT*4,Ft=0;Ft<ct;Ft++)Rt.set(Tt.subarray(St,St+zt)),St+=zt,it.putImageData(ft,0,jt),jt+=FULL_CHUNK_HEIGHT;Ft<dt&&(zt=ot*ut*4,Rt.set(Tt.subarray(St,St+zt)),it.putImageData(ft,0,jt))}else if(g.kind===util_ImageKind.RGB_24BPP)for(Bt=FULL_CHUNK_HEIGHT,zt=ot*Bt,Ft=0;Ft<dt;Ft++){for(Ft>=ct&&(Bt=ut,zt=ot*Bt),kt=0,jt=zt;jt--;)Rt[kt++]=Tt[St++],Rt[kt++]=Tt[St++],Rt[kt++]=Tt[St++],Rt[kt++]=255;it.putImageData(ft,0,Ft*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${g.kind}`)}function putBinaryImageMask(it,g){if(g.bitmap){it.drawImage(g.bitmap,0,0);return}const et=g.height,ot=g.width,ut=et%FULL_CHUNK_HEIGHT,ct=(et-ut)/FULL_CHUNK_HEIGHT,dt=ut===0?ct:ct+1,ft=it.createImageData(ot,FULL_CHUNK_HEIGHT);let St=0;const kt=g.data,Tt=ft.data;for(let Rt=0;Rt<dt;Rt++){const Ft=Rt<ct?FULL_CHUNK_HEIGHT:ut;({srcPos:St}=convertBlackAndWhiteToRGBA({src:kt,srcPos:St,dest:Tt,width:ot,height:Ft,nonBlackColor:0})),it.putImageData(ft,0,Rt*FULL_CHUNK_HEIGHT)}}function copyCtxState(it,g){const et=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ot of et)it[ot]!==void 0&&(g[ot]=it[ot]);it.setLineDash!==void 0&&(g.setLineDash(it.getLineDash()),g.lineDashOffset=it.lineDashOffset)}function resetCtxToDefault(it){it.strokeStyle=it.fillStyle="#000000",it.fillRule="nonzero",it.globalAlpha=1,it.lineWidth=1,it.lineCap="butt",it.lineJoin="miter",it.miterLimit=10,it.globalCompositeOperation="source-over",it.font="10px sans-serif",it.setLineDash!==void 0&&(it.setLineDash([]),it.lineDashOffset=0);const{filter:g}=it;g!=="none"&&g!==""&&(it.filter="none")}function getImageSmoothingEnabled(it,g){if(g)return!0;Util$1.singularValueDecompose2dScale(it,XY);const et=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=et&&XY[1]<=et}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var qw,DP,Kw,MP,Xw,FP;const ER=class ER{constructor(g,et,ot,ut,ct,{optionalContentConfig:dt,markedContentStack:ft=null},St,kt,Tt){Mr(this,qw);Mr(this,Kw);Mr(this,Xw);this.ctx=g,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=et,this.objs=ot,this.canvasFactory=ut,this.filterFactory=ct,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ft||[],this.optionalContentConfig=dt,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=St,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=Tt??null}getObject(g,et,ot=null){var ut;return typeof et=="string"?((ut=this.dependencyTracker)==null||ut.recordNamedDependency(g,et),et.startsWith("g_")?this.commonObjs.get(et):this.objs.get(et)):ot}beginDrawing({transform:g,viewport:et,transparency:ot=!1,background:ut=null}){const ct=this.ctx.canvas.width,dt=this.ctx.canvas.height,ft=this.ctx.fillStyle;if(this.ctx.fillStyle=ut||"#ffffff",this.ctx.fillRect(0,0,ct,dt),this.ctx.fillStyle=ft,ot){const St=this.cachedCanvases.getCanvas("transparent",ct,dt);this.compositeCtx=this.ctx,this.transparentCanvas=St.canvas,this.ctx=St.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...et.transform),this.viewportScale=et.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(g,et,ot,ut,ct){var Ut;const dt=g.argsArray,ft=g.fnArray;let St=et||0;const kt=dt.length;if(kt===St)return St;const Tt=kt-St>EXECUTION_STEPS&&typeof ot=="function",Rt=Tt?Date.now()+EXECUTION_TIME:0;let Ft=0;const jt=this.commonObjs,Bt=this.objs;let zt,Ht;for(;;){if(ut!==void 0&&St===ut.nextBreakPoint)return ut.breakIt(St,ot),St;if(!ct||ct(St))if(zt=ft[St],Ht=dt[St]??null,zt!==OPS.dependency)Ht===null?this[zt](St):this[zt](St,...Ht);else for(const Kt of Ht){(Ut=this.dependencyTracker)==null||Ut.recordNamedData(Kt,St);const Yt=Kt.startsWith("g_")?jt:Bt;if(!Yt.has(Kt))return Yt.get(Kt,ot),St}if(St++,St===kt)return St;if(Tt&&++Ft>EXECUTION_STEPS){if(Date.now()>Rt)return ot(),St;Ft=0}}}endDrawing(){Qr(this,qw,DP).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const et of g.values())typeof HTMLCanvasElement<"u"&&et instanceof HTMLCanvasElement&&(et.width=et.height=0);g.clear()}this._cachedBitmapsMap.clear(),Qr(this,Kw,MP).call(this)}_scaleImage(g,et){const ot=g.width??g.displayWidth,ut=g.height??g.displayHeight;let ct=Math.max(Math.hypot(et[0],et[1]),1),dt=Math.max(Math.hypot(et[2],et[3]),1),ft=ot,St=ut,kt="prescale1",Tt,Rt;for(;ct>2&&ft>1||dt>2&&St>1;){let Ft=ft,jt=St;ct>2&&ft>1&&(Ft=ft>=16384?Math.floor(ft/2)-1||1:Math.ceil(ft/2),ct/=ft/Ft),dt>2&&St>1&&(jt=St>=16384?Math.floor(St/2)-1||1:Math.ceil(St)/2,dt/=St/jt),Tt=this.cachedCanvases.getCanvas(kt,Ft,jt),Rt=Tt.context,Rt.clearRect(0,0,Ft,jt),Rt.drawImage(g,0,0,ft,St,0,0,Ft,jt),g=Tt.canvas,ft=Ft,St=jt,kt=kt==="prescale1"?"prescale2":"prescale1"}return{img:g,paintWidth:ft,paintHeight:St}}_createMaskCanvas(g,et){var xr,yr;const ot=this.ctx,{width:ut,height:ct}=et,dt=this.current.fillColor,ft=this.current.patternFill,St=getCurrentTransform(ot);let kt,Tt,Rt,Ft;if((et.bitmap||et.data)&&et.count>1){const Sr=et.bitmap||et.data.buffer;Tt=JSON.stringify(ft?St:[St.slice(0,4),dt]),kt=this._cachedBitmapsMap.get(Sr),kt||(kt=new Map,this._cachedBitmapsMap.set(Sr,kt));const kr=kt.get(Tt);if(kr&&!ft){const Pr=Math.round(Math.min(St[0],St[2])+St[4]),Or=Math.round(Math.min(St[1],St[3])+St[5]);return(xr=this.dependencyTracker)==null||xr.recordDependencies(g,Dependencies.transformAndFill),{canvas:kr,offsetX:Pr,offsetY:Or}}Rt=kr}Rt||(Ft=this.cachedCanvases.getCanvas("maskCanvas",ut,ct),putBinaryImageMask(Ft.context,et));let jt=Util$1.transform(St,[1/ut,0,0,-1/ct,0,0]);jt=Util$1.transform(jt,[1,0,0,1,0,-ct]);const Bt=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ut,ct],jt,Bt);const[zt,Ht,Ut,Kt]=Bt,Yt=Math.round(Ut-zt)||1,er=Math.round(Kt-Ht)||1,ar=this.cachedCanvases.getCanvas("fillCanvas",Yt,er),ir=ar.context,lr=zt,cr=Ht;ir.translate(-lr,-cr),ir.transform(...jt),Rt||(Rt=this._scaleImage(Ft.canvas,getCurrentTransformInverse(ir)),Rt=Rt.img,kt&&ft&&kt.set(Tt,Rt)),ir.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ir),et.interpolate),drawImageAtIntegerCoords(ir,Rt,0,0,Rt.width,Rt.height,0,0,ut,ct),ir.globalCompositeOperation="source-in";const vr=Util$1.transform(getCurrentTransformInverse(ir),[1,0,0,1,-lr,-cr]);return ir.fillStyle=ft?dt.getPattern(ot,this,vr,PathType.FILL,g):dt,ir.fillRect(0,0,ut,ct),kt&&!ft&&(this.cachedCanvases.delete("fillCanvas"),kt.set(Tt,ar.canvas)),(yr=this.dependencyTracker)==null||yr.recordDependencies(g,Dependencies.transformAndFill),{canvas:ar.canvas,offsetX:Math.round(lr),offsetY:Math.round(cr)}}setLineWidth(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineWidth",g),et!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=et,this.ctx.lineWidth=et}setLineCap(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineCap",g),this.ctx.lineCap=LINE_CAP_STYLES[et]}setLineJoin(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("lineJoin",g),this.ctx.lineJoin=LINE_JOIN_STYLES[et]}setMiterLimit(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("miterLimit",g),this.ctx.miterLimit=et}setDash(g,et,ot){var ct;(ct=this.dependencyTracker)==null||ct.recordSimpleData("dash",g);const ut=this.ctx;ut.setLineDash!==void 0&&(ut.setLineDash(et),ut.lineDashOffset=ot)}setRenderingIntent(g,et){}setFlatness(g,et){}setGState(g,et){var ot,ut,ct,dt,ft;for(const[St,kt]of et)switch(St){case"LW":this.setLineWidth(g,kt);break;case"LC":this.setLineCap(g,kt);break;case"LJ":this.setLineJoin(g,kt);break;case"ML":this.setMiterLimit(g,kt);break;case"D":this.setDash(g,kt[0],kt[1]);break;case"RI":this.setRenderingIntent(g,kt);break;case"FL":this.setFlatness(g,kt);break;case"Font":this.setFont(g,kt[0],kt[1]);break;case"CA":(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeAlpha",g),this.current.strokeAlpha=kt;break;case"ca":(ut=this.dependencyTracker)==null||ut.recordSimpleData("fillAlpha",g),this.ctx.globalAlpha=this.current.fillAlpha=kt;break;case"BM":(ct=this.dependencyTracker)==null||ct.recordSimpleData("globalCompositeOperation",g),this.ctx.globalCompositeOperation=kt;break;case"SMask":(dt=this.dependencyTracker)==null||dt.recordSimpleData("SMask",g),this.current.activeSMask=kt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(ft=this.dependencyTracker)==null||ft.recordSimpleData("filter",g),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(kt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(g){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const et=this.ctx.canvas.width,ot=this.ctx.canvas.height,ut="smaskGroupAt"+this.groupLevel,ct=this.cachedCanvases.getCanvas(ut,et,ot);this.suspendedCtx=this.ctx;const dt=this.ctx=ct.context;dt.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,dt),mirrorContextOperations(dt,this.suspendedCtx),this.setGState(g,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){if(!this.current.activeSMask)return;g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const et=this.current.activeSMask,ot=this.suspendedCtx;this.composeSMask(ot,et,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(g,et,ot,ut){const ct=ut[0],dt=ut[1],ft=ut[2]-ct,St=ut[3]-dt;ft===0||St===0||(this.genericComposeSMask(et.context,ot,ft,St,et.subtype,et.backdrop,et.transferMap,ct,dt,et.offsetX,et.offsetY),g.save(),g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),g.drawImage(ot.canvas,0,0),g.restore())}genericComposeSMask(g,et,ot,ut,ct,dt,ft,St,kt,Tt,Rt){let Ft=g.canvas,jt=St-Tt,Bt=kt-Rt;if(dt)if(jt<0||Bt<0||jt+ot>Ft.width||Bt+ut>Ft.height){const Ht=this.cachedCanvases.getCanvas("maskExtension",ot,ut),Ut=Ht.context;Ut.drawImage(Ft,-jt,-Bt),Ut.globalCompositeOperation="destination-atop",Ut.fillStyle=dt,Ut.fillRect(0,0,ot,ut),Ut.globalCompositeOperation="source-over",Ft=Ht.canvas,jt=Bt=0}else{g.save(),g.globalAlpha=1,g.setTransform(1,0,0,1,0,0);const Ht=new Path2D;Ht.rect(jt,Bt,ot,ut),g.clip(Ht),g.globalCompositeOperation="destination-atop",g.fillStyle=dt,g.fillRect(jt,Bt,ot,ut),g.restore()}et.save(),et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),ct==="Alpha"&&ft?et.filter=this.filterFactory.addAlphaFilter(ft):ct==="Luminosity"&&(et.filter=this.filterFactory.addLuminosityFilter(ft));const zt=new Path2D;zt.rect(St,kt,ot,ut),et.clip(zt),et.globalCompositeOperation="destination-in",et.drawImage(Ft,jt,Bt,ot,ut,St,kt,ot,ut),et.restore()}save(g){var ot;this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const et=this.current;this.stateStack.push(et),this.current=et.clone(),(ot=this.dependencyTracker)==null||ot.save(g)}restore(g){var et;if((et=this.dependencyTracker)==null||et.restore(g),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(g,et,ot,ut,ct,dt,ft){var St;(St=this.dependencyTracker)==null||St.recordIncrementalData("transform",g),this.ctx.transform(et,ot,ut,ct,dt,ft),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(g,et,ot,ut){let[ct]=ot;if(!ut){ct||(ct=ot[0]=new Path2D),this[et](g,ct);return}if(this.dependencyTracker!==null){const dt=et===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(g).recordBBox(g,this.ctx,ut[0]-dt,ut[2]+dt,ut[1]-dt,ut[3]+dt).recordDependencies(g,["transform"])}if(!(ct instanceof Path2D)){const dt=ot[0]=new Path2D;for(let ft=0,St=ct.length;ft<St;)switch(ct[ft++]){case DrawOPS.moveTo:dt.moveTo(ct[ft++],ct[ft++]);break;case DrawOPS.lineTo:dt.lineTo(ct[ft++],ct[ft++]);break;case DrawOPS.curveTo:dt.bezierCurveTo(ct[ft++],ct[ft++],ct[ft++],ct[ft++],ct[ft++],ct[ft++]);break;case DrawOPS.closePath:dt.closePath();break;default:warn(`Unrecognized drawing path operator: ${ct[ft-1]}`);break}ct=dt}Util$1.axialAlignedBoundingBox(ut,getCurrentTransform(this.ctx),this.current.minMax),this[et](g,ct),this._pathStartIdx=g}closePath(g){this.ctx.closePath()}stroke(g,et,ot=!0){var dt;const ut=this.ctx,ct=this.current.strokeColor;if(ut.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof ct=="object"&&(ct!=null&&ct.getPattern)){const ft=ct.isModifyingCurrentTransform()?ut.getTransform():null;if(ut.save(),ut.strokeStyle=ct.getPattern(ut,this,getCurrentTransformInverse(ut),PathType.STROKE,g),ft){const St=new Path2D;St.addPath(et,ut.getTransform().invertSelf().multiplySelf(ft)),et=St}this.rescaleAndStroke(et,!1),ut.restore()}else this.rescaleAndStroke(et,!0);(dt=this.dependencyTracker)==null||dt.recordDependencies(g,Dependencies.stroke),ot&&this.consumePath(g,et,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),ut.globalAlpha=this.current.fillAlpha}closeStroke(g,et){this.stroke(g,et)}fill(g,et,ot=!0){var kt,Tt,Rt;const ut=this.ctx,ct=this.current.fillColor,dt=this.current.patternFill;let ft=!1;if(dt){const Ft=ct.isModifyingCurrentTransform()?ut.getTransform():null;if((kt=this.dependencyTracker)==null||kt.save(g),ut.save(),ut.fillStyle=ct.getPattern(ut,this,getCurrentTransformInverse(ut),PathType.FILL,g),Ft){const jt=new Path2D;jt.addPath(et,ut.getTransform().invertSelf().multiplySelf(Ft)),et=jt}ft=!0}const St=this.current.getClippedPathBoundingBox();this.contentVisible&&St!==null&&(this.pendingEOFill?(ut.fill(et,"evenodd"),this.pendingEOFill=!1):ut.fill(et)),(Tt=this.dependencyTracker)==null||Tt.recordDependencies(g,Dependencies.fill),ft&&(ut.restore(),(Rt=this.dependencyTracker)==null||Rt.restore(g)),ot&&this.consumePath(g,et,St)}eoFill(g,et){this.pendingEOFill=!0,this.fill(g,et)}fillStroke(g,et){this.fill(g,et,!1),this.stroke(g,et,!1),this.consumePath(g,et)}eoFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}closeFillStroke(g,et){this.fillStroke(g,et)}closeEOFillStroke(g,et){this.pendingEOFill=!0,this.fillStroke(g,et)}endPath(g,et){this.consumePath(g,et)}rawFillPath(g,et){var ot;this.ctx.fill(et),(ot=this.dependencyTracker)==null||ot.recordDependencies(g,Dependencies.rawFillPath).recordOperation(g)}clip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=NORMAL_CLIP}eoClip(g){var et;(et=this.dependencyTracker)==null||et.recordFutureForcedDependency("clipMode",g),this.pendingClip=EO_CLIP}beginText(g){var et;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(et=this.dependencyTracker)==null||et.recordOpenMarker(g).resetIncrementalData("sameLineText").resetIncrementalData("moveText",g)}endText(g){const et=this.pendingTextPaths,ot=this.ctx;if(this.dependencyTracker){const{dependencyTracker:ut}=this;et!==void 0&&ut.recordFutureForcedDependency("textClip",ut.getOpenMarker()).recordFutureForcedDependency("textClip",g),ut.recordCloseMarker(g)}if(et!==void 0){const ut=new Path2D,ct=ot.getTransform().invertSelf();for(const{transform:dt,x:ft,y:St,fontSize:kt,path:Tt}of et)Tt&&ut.addPath(Tt,new DOMMatrix(dt).preMultiplySelf(ct).translate(ft,St).scale(kt,-kt));ot.clip(ut)}delete this.pendingTextPaths}setCharSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("charSpacing",g),this.current.charSpacing=et}setWordSpacing(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("wordSpacing",g),this.current.wordSpacing=et}setHScale(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("hScale",g),this.current.textHScale=et/100}setLeading(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("leading",g),this.current.leading=-et}setFont(g,et,ot){var Rt,Ft;(Rt=this.dependencyTracker)==null||Rt.recordSimpleData("font",g).recordSimpleDataFromNamed("fontObj",et,g);const ut=this.commonObjs.get(et),ct=this.current;if(!ut)throw new Error(`Can't find font for ${et}`);if(ct.fontMatrix=ut.fontMatrix||FONT_IDENTITY_MATRIX,(ct.fontMatrix[0]===0||ct.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+et),ot<0?(ot=-ot,ct.fontDirection=-1):ct.fontDirection=1,this.current.font=ut,this.current.fontSize=ot,ut.isType3Font)return;const dt=ut.loadedName||"sans-serif",ft=((Ft=ut.systemFontInfo)==null?void 0:Ft.css)||`"${dt}", ${ut.fallbackName}`;let St="normal";ut.black?St="900":ut.bold&&(St="bold");const kt=ut.italic?"italic":"normal";let Tt=ot;ot<MIN_FONT_SIZE$1?Tt=MIN_FONT_SIZE$1:ot>MAX_FONT_SIZE$1&&(Tt=MAX_FONT_SIZE$1),this.current.fontSizeScale=ot/Tt,this.ctx.font=`${kt} ${St} ${Tt}px ${ft}`}setTextRenderingMode(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRenderingMode",g),this.current.textRenderingMode=et}setTextRise(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("textRise",g),this.current.textRise=et}moveText(g,et,ot){var ut;(ut=this.dependencyTracker)==null||ut.resetIncrementalData("sameLineText").recordIncrementalData("moveText",g),this.current.x=this.current.lineX+=et,this.current.y=this.current.lineY+=ot}setLeadingMoveText(g,et,ot){this.setLeading(g,-ot),this.moveText(g,et,ot)}setTextMatrix(g,et){var ut;(ut=this.dependencyTracker)==null||ut.recordSimpleData("textMatrix",g);const{current:ot}=this;ot.textMatrix=et,ot.textMatrixScale=Math.hypot(et[0],et[1]),ot.x=ot.lineX=0,ot.y=ot.lineY=0}nextLine(g){var et;this.moveText(g,0,this.current.leading),(et=this.dependencyTracker)==null||et.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??g)}paintChar(g,et,ot,ut,ct,dt){var Ut,Kt,Yt,er;const ft=this.ctx,St=this.current,kt=St.font,Tt=St.textRenderingMode,Rt=St.fontSize/St.fontSizeScale,Ft=Tt&TextRenderingMode$1.FILL_STROKE_MASK,jt=!!(Tt&TextRenderingMode$1.ADD_TO_PATH_FLAG),Bt=St.patternFill&&!kt.missingFile,zt=St.patternStroke&&!kt.missingFile;let Ht;if((kt.disableFontFace||jt||Bt||zt)&&!kt.missingFile&&(Ht=kt.getPathGenerator(this.commonObjs,et)),Ht&&(kt.disableFontFace||Bt||zt)){ft.save(),ft.translate(ot,ut),ft.scale(Rt,-Rt),(Ut=this.dependencyTracker)==null||Ut.recordCharacterBBox(g,ft,kt);let ar;if(Ft===TextRenderingMode$1.FILL||Ft===TextRenderingMode$1.FILL_STROKE)if(ct){ar=ft.getTransform(),ft.setTransform(...ct);const ir=Qr(this,Xw,FP).call(this,Ht,ar,ct);ft.fill(ir)}else ft.fill(Ht);if(Ft===TextRenderingMode$1.STROKE||Ft===TextRenderingMode$1.FILL_STROKE)if(dt){ar||(ar=ft.getTransform()),ft.setTransform(...dt);const{a:ir,b:lr,c:cr,d:vr}=ar,xr=Util$1.inverseTransform(dt),yr=Util$1.transform([ir,lr,cr,vr,0,0],xr);Util$1.singularValueDecompose2dScale(yr,XY),ft.lineWidth*=Math.max(XY[0],XY[1])/Rt,ft.stroke(Qr(this,Xw,FP).call(this,Ht,ar,dt))}else ft.lineWidth/=Rt,ft.stroke(Ht);ft.restore()}else(Ft===TextRenderingMode$1.FILL||Ft===TextRenderingMode$1.FILL_STROKE)&&(ft.fillText(et,ot,ut),(Kt=this.dependencyTracker)==null||Kt.recordCharacterBBox(g,ft,kt,Rt,ot,ut,()=>ft.measureText(et))),(Ft===TextRenderingMode$1.STROKE||Ft===TextRenderingMode$1.FILL_STROKE)&&(this.dependencyTracker&&((Yt=this.dependencyTracker)==null||Yt.recordCharacterBBox(g,ft,kt,Rt,ot,ut,()=>ft.measureText(et)).recordDependencies(g,Dependencies.stroke)),ft.strokeText(et,ot,ut));jt&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(ft),x:ot,y:ut,fontSize:Rt,path:Ht}),(er=this.dependencyTracker)==null||er.recordCharacterBBox(g,ft,kt,Rt,ot,ut))}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const et=g.getImageData(0,0,10,10).data;let ot=!1;for(let ut=3;ut<et.length;ut+=4)if(et[ut]>0&&et[ut]<255){ot=!0;break}return shadow(this,"isFontSubpixelAAEnabled",ot)}showText(g,et){var cr,vr,xr,yr;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(g,Dependencies.showText).resetBBox(g),this.current.textRenderingMode&TextRenderingMode$1.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",g).inheritPendingDependenciesAsFutureForcedDependencies());const ot=this.current,ut=ot.font;if(ut.isType3Font){this.showType3Text(g,et),(cr=this.dependencyTracker)==null||cr.recordShowTextOperation(g);return}const ct=ot.fontSize;if(ct===0){(vr=this.dependencyTracker)==null||vr.recordOperation(g);return}const dt=this.ctx,ft=ot.fontSizeScale,St=ot.charSpacing,kt=ot.wordSpacing,Tt=ot.fontDirection,Rt=ot.textHScale*Tt,Ft=et.length,jt=ut.vertical,Bt=jt?1:-1,zt=ut.defaultVMetrics,Ht=ct*ot.fontMatrix[0],Ut=ot.textRenderingMode===TextRenderingMode$1.FILL&&!ut.disableFontFace&&!ot.patternFill;dt.save(),ot.textMatrix&&dt.transform(...ot.textMatrix),dt.translate(ot.x,ot.y+ot.textRise),Tt>0?dt.scale(Rt,-1):dt.scale(Rt,1);let Kt,Yt;if(ot.patternFill){dt.save();const Sr=ot.fillColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.FILL,g);Kt=getCurrentTransform(dt),dt.restore(),dt.fillStyle=Sr}if(ot.patternStroke){dt.save();const Sr=ot.strokeColor.getPattern(dt,this,getCurrentTransformInverse(dt),PathType.STROKE,g);Yt=getCurrentTransform(dt),dt.restore(),dt.strokeStyle=Sr}let er=ot.lineWidth;const ar=ot.textMatrixScale;if(ar===0||er===0){const Sr=ot.textRenderingMode&TextRenderingMode$1.FILL_STROKE_MASK;(Sr===TextRenderingMode$1.STROKE||Sr===TextRenderingMode$1.FILL_STROKE)&&(er=this.getSinglePixelWidth())}else er/=ar;if(ft!==1&&(dt.scale(ft,ft),er/=ft),dt.lineWidth=er,ut.isInvalidPDFjsFont){const Sr=[];let kr=0;for(const Or of et)Sr.push(Or.unicode),kr+=Or.width;const Pr=Sr.join("");if(dt.fillText(Pr,0,0),this.dependencyTracker!==null){const Or=dt.measureText(Pr);this.dependencyTracker.recordBBox(g,this.ctx,-Or.actualBoundingBoxLeft,Or.actualBoundingBoxRight,-Or.actualBoundingBoxAscent,Or.actualBoundingBoxDescent).recordShowTextOperation(g)}ot.x+=kr*Ht*Rt,dt.restore(),this.compose();return}let ir=0,lr;for(lr=0;lr<Ft;++lr){const Sr=et[lr];if(typeof Sr=="number"){ir+=Bt*Sr*ct/1e3;continue}let kr=!1;const Pr=(Sr.isSpace?kt:0)+St,Or=Sr.fontChar,hr=Sr.accent;let Tr,mr,Er=Sr.width;if(jt){const Lr=Sr.vmetric||zt,qr=-(Sr.vmetric?Lr[1]:Er*.5)*Ht,sn=Lr[2]*Ht;Er=Lr?-Lr[0]:Er,Tr=qr/ft,mr=(ir+sn)/ft}else Tr=ir/ft,mr=0;let Dr;if(ut.remeasure&&Er>0){Dr=dt.measureText(Or);const Lr=Dr.width*1e3/ct*ft;if(Er<Lr&&this.isFontSubpixelAAEnabled){const qr=Er/Lr;kr=!0,dt.save(),dt.scale(qr,1),Tr/=qr}else Er!==Lr&&(Tr+=(Er-Lr)/2e3*ct/ft)}if(this.contentVisible&&(Sr.isInFont||ut.missingFile)){if(Ut&&!hr)dt.fillText(Or,Tr,mr),(xr=this.dependencyTracker)==null||xr.recordCharacterBBox(g,dt,Dr?{bbox:null}:ut,ct/ft,Tr,mr,()=>Dr??dt.measureText(Or));else if(this.paintChar(g,Or,Tr,mr,Kt,Yt),hr){const Lr=Tr+ct*hr.offset.x/ft,qr=mr-ct*hr.offset.y/ft;this.paintChar(g,hr.fontChar,Lr,qr,Kt,Yt)}}const Cr=jt?Er*Ht-Pr*Tt:Er*Ht+Pr*Tt;ir+=Cr,kr&&dt.restore()}jt?ot.y-=ir:ot.x+=ir*Rt,dt.restore(),this.compose(),(yr=this.dependencyTracker)==null||yr.recordShowTextOperation(g)}showType3Text(g,et){const ot=this.ctx,ut=this.current,ct=ut.font,dt=ut.fontSize,ft=ut.fontDirection,St=ct.vertical?1:-1,kt=ut.charSpacing,Tt=ut.wordSpacing,Rt=ut.textHScale*ft,Ft=ut.fontMatrix||FONT_IDENTITY_MATRIX,jt=et.length,Bt=ut.textRenderingMode===TextRenderingMode$1.INVISIBLE;let zt,Ht,Ut,Kt;if(Bt||dt===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ot.save(),ut.textMatrix&&ot.transform(...ut.textMatrix),ot.translate(ut.x,ut.y+ut.textRise),ot.scale(Rt,ft);const Yt=this.dependencyTracker;for(this.dependencyTracker=Yt?new CanvasNestedDependencyTracker(Yt,g):null,zt=0;zt<jt;++zt){if(Ht=et[zt],typeof Ht=="number"){Kt=St*Ht*dt/1e3,this.ctx.translate(Kt,0),ut.x+=Kt*Rt;continue}const er=(Ht.isSpace?Tt:0)+kt,ar=ct.charProcOperatorList[Ht.operatorListId];ar?this.contentVisible&&(this.save(),ot.scale(dt,dt),ot.transform(...Ft),this.executeOperatorList(ar),this.restore()):warn(`Type3 character "${Ht.operatorListId}" is not available.`);const ir=[Ht.width,0];Util$1.applyTransform(ir,Ft),Ut=ir[0]*dt+er,ot.translate(Ut,0),ut.x+=Ut*Rt}ot.restore(),Yt&&(this.dependencyTracker=Yt)}setCharWidth(g,et,ot){}setCharWidthAndBounds(g,et,ot,ut,ct,dt,ft){var kt;const St=new Path2D;St.rect(ut,ct,dt-ut,ft-ct),this.ctx.clip(St),(kt=this.dependencyTracker)==null||kt.recordBBox(g,this.ctx,ut,dt,ct,ft).recordClipBox(g,this.ctx,ut,dt,ct,ft),this.endPath(g)}getColorN_Pattern(g,et){let ot;if(et[0]==="TilingPattern"){const ut=this.baseTransform||getCurrentTransform(this.ctx),ct={createCanvasGraphics:(dt,ft)=>new ER(dt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,ft,!0):null)};ot=new TilingPattern(et,this.ctx,ct,ut)}else ot=this._getPattern(g,et[1],et[2]);return ot}setStrokeColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.current.strokeColor=this.getColorN_Pattern(g,et),this.current.patternStroke=!0}setFillColorN(g,...et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.current.fillColor=this.getColorN_Pattern(g,et),this.current.patternFill=!0}setStrokeRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor=et,this.current.patternStroke=!1}setStrokeTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("strokeColor",g),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(g,et){var ot;(ot=this.dependencyTracker)==null||ot.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor=et,this.current.patternFill=!1}setFillTransparent(g){var et;(et=this.dependencyTracker)==null||et.recordSimpleData("fillColor",g),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(g,et,ot=null){let ut;return this.cachedPatterns.has(et)?ut=this.cachedPatterns.get(et):(ut=getShadingPattern(this.getObject(g,et)),this.cachedPatterns.set(et,ut)),ot&&(ut.matrix=ot),ut}shadingFill(g,et){var dt;if(!this.contentVisible)return;const ot=this.ctx;this.save(g);const ut=this._getPattern(g,et);ot.fillStyle=ut.getPattern(ot,this,getCurrentTransformInverse(ot),PathType.SHADING,g);const ct=getCurrentTransformInverse(ot);if(ct){const{width:ft,height:St}=ot.canvas,kt=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ft,St],ct,kt);const[Tt,Rt,Ft,jt]=kt;this.ctx.fillRect(Tt,Rt,Ft-Tt,jt-Rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordFullPageBBox(g).recordDependencies(g,Dependencies.transform).recordDependencies(g,Dependencies.fill).recordOperation(g),this.compose(this.current.getClippedPathBoundingBox()),this.restore(g)}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(g,et,ot){var ut;if(this.contentVisible&&(this.save(g),this.baseTransformStack.push(this.baseTransform),et&&this.transform(g,...et),this.baseTransform=getCurrentTransform(this.ctx),ot)){Util$1.axialAlignedBoundingBox(ot,this.baseTransform,this.current.minMax);const[ct,dt,ft,St]=ot,kt=new Path2D;kt.rect(ct,dt,ft-ct,St-dt),this.ctx.clip(kt),(ut=this.dependencyTracker)==null||ut.recordClipBox(g,this.ctx,ct,ft,dt,St),this.endPath(g)}}paintFormXObjectEnd(g){this.contentVisible&&(this.restore(g),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g,et){var Yt;if(!this.contentVisible)return;this.save(g),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ot=this.ctx;et.isolated||info("TODO: Support non-isolated groups."),et.knockout&&warn("Knockout groups not supported.");const ut=getCurrentTransform(ot);if(et.matrix&&ot.transform(...et.matrix),!et.bbox)throw new Error("Bounding box is required.");let ct=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox(et.bbox,getCurrentTransform(ot),ct);const dt=[0,0,ot.canvas.width,ot.canvas.height];ct=Util$1.intersect(ct,dt)||[0,0,0,0];const ft=Math.floor(ct[0]),St=Math.floor(ct[1]),kt=Math.max(Math.ceil(ct[2])-ft,1),Tt=Math.max(Math.ceil(ct[3])-St,1);this.current.startNewPathAndClipBox([0,0,kt,Tt]);let Rt="groupAt"+this.groupLevel;et.smask&&(Rt+="_smask_"+this.smaskCounter++%2);const Ft=this.cachedCanvases.getCanvas(Rt,kt,Tt),jt=Ft.context;jt.translate(-ft,-St),jt.transform(...ut);let Bt=new Path2D;const[zt,Ht,Ut,Kt]=et.bbox;if(Bt.rect(zt,Ht,Ut-zt,Kt-Ht),et.matrix){const er=new Path2D;er.addPath(Bt,new DOMMatrix(et.matrix)),Bt=er}jt.clip(Bt),et.smask&&this.smaskStack.push({canvas:Ft.canvas,context:jt,offsetX:ft,offsetY:St,subtype:et.smask.subtype,backdrop:et.smask.backdrop,transferMap:et.smask.transferMap||null,startTransformInverse:null}),(!et.smask||this.dependencyTracker)&&(ot.setTransform(1,0,0,1,0,0),ot.translate(ft,St),ot.save()),copyCtxState(ot,jt),this.ctx=jt,(Yt=this.dependencyTracker)==null||Yt.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(ot),this.setGState(g,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ot),this.groupLevel++}endGroup(g,et){var ct;if(!this.contentVisible)return;this.groupLevel--;const ot=this.ctx,ut=this.groupStack.pop();if(this.ctx=ut,this.ctx.imageSmoothingEnabled=!1,(ct=this.dependencyTracker)==null||ct.popBaseTransform(),et.smask)this.tempSMask=this.smaskStack.pop(),this.restore(g),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const dt=getCurrentTransform(this.ctx);this.restore(g),this.ctx.save(),this.ctx.setTransform(...dt);const ft=MIN_MAX_INIT.slice();Util$1.axialAlignedBoundingBox([0,0,ot.canvas.width,ot.canvas.height],dt,ft),this.ctx.drawImage(ot.canvas,0,0),this.ctx.restore(),this.compose(ft)}}beginAnnotation(g,et,ot,ut,ct,dt){if(Qr(this,qw,DP).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(g),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),ot){const ft=ot[2]-ot[0],St=ot[3]-ot[1];if(dt&&this.annotationCanvasMap){ut=ut.slice(),ut[4]-=ot[0],ut[5]-=ot[1],ot=ot.slice(),ot[0]=ot[1]=0,ot[2]=ft,ot[3]=St,Util$1.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:kt}=this,Tt=Math.ceil(ft*this.outputScaleX*kt),Rt=Math.ceil(St*this.outputScaleY*kt);this.annotationCanvas=this.canvasFactory.create(Tt,Rt);const{canvas:Ft,context:jt}=this.annotationCanvas;this.annotationCanvasMap.set(et,Ft),this.annotationCanvas.savedCtx=this.ctx,this.ctx=jt,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,St*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(g);const kt=new Path2D;kt.rect(ot[0],ot[1],ft,St),this.ctx.clip(kt)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(g,...ut),this.transform(g,...ct)}endAnnotation(g){this.annotationCanvas&&(this.ctx.restore(),Qr(this,Kw,MP).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g,et){var ft;if(!this.contentVisible)return;const ot=et.count;et=this.getObject(g,et.data,et),et.count=ot;const ut=this.ctx,ct=this._createMaskCanvas(g,et),dt=ct.canvas;ut.save(),ut.setTransform(1,0,0,1,0,0),ut.drawImage(dt,ct.offsetX,ct.offsetY),(ft=this.dependencyTracker)==null||ft.resetBBox(g).recordBBox(g,this.ctx,ct.offsetX,ct.offsetX+dt.width,ct.offsetY,ct.offsetY+dt.height).recordOperation(g),ut.restore(),this.compose()}paintImageMaskXObjectRepeat(g,et,ot,ut=0,ct=0,dt,ft){var Rt,Ft,jt;if(!this.contentVisible)return;et=this.getObject(g,et.data,et);const St=this.ctx;St.save();const kt=getCurrentTransform(St);St.transform(ot,ut,ct,dt,0,0);const Tt=this._createMaskCanvas(g,et);St.setTransform(1,0,0,1,Tt.offsetX-kt[4],Tt.offsetY-kt[5]),(Rt=this.dependencyTracker)==null||Rt.resetBBox(g);for(let Bt=0,zt=ft.length;Bt<zt;Bt+=2){const Ht=Util$1.transform(kt,[ot,ut,ct,dt,ft[Bt],ft[Bt+1]]);St.drawImage(Tt.canvas,Ht[4],Ht[5]),(Ft=this.dependencyTracker)==null||Ft.recordBBox(g,this.ctx,Ht[4],Ht[4]+Tt.canvas.width,Ht[5],Ht[5]+Tt.canvas.height)}St.restore(),this.compose(),(jt=this.dependencyTracker)==null||jt.recordOperation(g)}paintImageMaskXObjectGroup(g,et){var dt,ft,St;if(!this.contentVisible)return;const ot=this.ctx,ut=this.current.fillColor,ct=this.current.patternFill;(dt=this.dependencyTracker)==null||dt.resetBBox(g).recordDependencies(g,Dependencies.transformAndFill);for(const kt of et){const{data:Tt,width:Rt,height:Ft,transform:jt}=kt,Bt=this.cachedCanvases.getCanvas("maskCanvas",Rt,Ft),zt=Bt.context;zt.save();const Ht=this.getObject(g,Tt,kt);putBinaryImageMask(zt,Ht),zt.globalCompositeOperation="source-in",zt.fillStyle=ct?ut.getPattern(zt,this,getCurrentTransformInverse(ot),PathType.FILL,g):ut,zt.fillRect(0,0,Rt,Ft),zt.restore(),ot.save(),ot.transform(...jt),ot.scale(1,-1),drawImageAtIntegerCoords(ot,Bt.canvas,0,0,Rt,Ft,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ot,0,Rt,0,Ft),ot.restore()}this.compose(),(St=this.dependencyTracker)==null||St.recordOperation(g)}paintImageXObject(g,et){if(!this.contentVisible)return;const ot=this.getObject(g,et);if(!ot){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(g,ot)}paintImageXObjectRepeat(g,et,ot,ut,ct){if(!this.contentVisible)return;const dt=this.getObject(g,et);if(!dt){warn("Dependent image isn't ready yet");return}const ft=dt.width,St=dt.height,kt=[];for(let Tt=0,Rt=ct.length;Tt<Rt;Tt+=2)kt.push({transform:[ot,0,0,ut,ct[Tt],ct[Tt+1]],x:0,y:0,w:ft,h:St});this.paintInlineImageXObjectGroup(g,dt,kt)}applyTransferMapsToCanvas(g){return this.current.transferMaps!=="none"&&(g.filter=this.current.transferMaps,g.drawImage(g.canvas,0,0),g.filter="none"),g.canvas}applyTransferMapsToBitmap(g){if(this.current.transferMaps==="none")return g.bitmap;const{bitmap:et,width:ot,height:ut}=g,ct=this.cachedCanvases.getCanvas("inlineImage",ot,ut),dt=ct.context;return dt.filter=this.current.transferMaps,dt.drawImage(et,0,0),dt.filter="none",ct.canvas}paintInlineImageXObject(g,et){var kt;if(!this.contentVisible)return;const ot=et.width,ut=et.height,ct=this.ctx;this.save(g);const{filter:dt}=ct;dt!=="none"&&dt!==""&&(ct.filter="none"),ct.scale(1/ot,-1/ut);let ft;if(et.bitmap)ft=this.applyTransferMapsToBitmap(et);else if(typeof HTMLElement=="function"&&et instanceof HTMLElement||!et.data)ft=et;else{const Rt=this.cachedCanvases.getCanvas("inlineImage",ot,ut).context;putBinaryImageData(Rt,et),ft=this.applyTransferMapsToCanvas(Rt)}const St=this._scaleImage(ft,getCurrentTransformInverse(ct));ct.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ct),et.interpolate),(kt=this.dependencyTracker)==null||kt.resetBBox(g).recordBBox(g,ct,0,ot,-ut,0).recordDependencies(g,Dependencies.imageXObject).recordOperation(g),drawImageAtIntegerCoords(ct,St.img,0,0,St.paintWidth,St.paintHeight,0,-ut,ot,ut),this.compose(),this.restore(g)}paintInlineImageXObjectGroup(g,et,ot){var dt,ft,St;if(!this.contentVisible)return;const ut=this.ctx;let ct;if(et.bitmap)ct=et.bitmap;else{const kt=et.width,Tt=et.height,Ft=this.cachedCanvases.getCanvas("inlineImage",kt,Tt).context;putBinaryImageData(Ft,et),ct=this.applyTransferMapsToCanvas(Ft)}(dt=this.dependencyTracker)==null||dt.resetBBox(g);for(const kt of ot)ut.save(),ut.transform(...kt.transform),ut.scale(1,-1),drawImageAtIntegerCoords(ut,ct,kt.x,kt.y,kt.w,kt.h,0,-1,1,1),(ft=this.dependencyTracker)==null||ft.recordBBox(g,ut,0,1,-1,0),ut.restore();(St=this.dependencyTracker)==null||St.recordOperation(g),this.compose()}paintSolidColorImageMask(g){var et;this.contentVisible&&((et=this.dependencyTracker)==null||et.resetBBox(g).recordBBox(g,this.ctx,0,1,0,1).recordDependencies(g,Dependencies.fill).recordOperation(g),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g,et){}markPointProps(g,et,ot){}beginMarkedContent(g,et){var ot;(ot=this.dependencyTracker)==null||ot.beginMarkedContent(g),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,et,ot){var ut;(ut=this.dependencyTracker)==null||ut.beginMarkedContent(g),et==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ot)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(g){var et;(et=this.dependencyTracker)==null||et.endMarkedContent(g),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(g){}endCompat(g){}consumePath(g,et,ot){var dt,ft;const ut=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ot);const ct=this.ctx;this.pendingClip?(ut||(this.pendingClip===EO_CLIP?ct.clip(et,"evenodd"):ct.clip(et)),this.pendingClip=null,(dt=this.dependencyTracker)==null||dt.bboxToClipBoxDropOperation(g).recordFutureForcedDependency("clipPath",g)):(ft=this.dependencyTracker)==null||ft.recordOperation(g),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=getCurrentTransform(this.ctx);if(g[1]===0&&g[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const et=Math.abs(g[0]*g[3]-g[2]*g[1]),ot=Math.hypot(g[0],g[2]),ut=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(ot,ut)/et}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:g}=this.current,{a:et,b:ot,c:ut,d:ct}=this.ctx.getTransform();let dt,ft;if(ot===0&&ut===0){const St=Math.abs(et),kt=Math.abs(ct);if(St===kt)if(g===0)dt=ft=1/St;else{const Tt=St*g;dt=ft=Tt<1?1/Tt:1}else if(g===0)dt=1/St,ft=1/kt;else{const Tt=St*g,Rt=kt*g;dt=Tt<1?1/Tt:1,ft=Rt<1?1/Rt:1}}else{const St=Math.abs(et*ct-ot*ut),kt=Math.hypot(et,ot),Tt=Math.hypot(ut,ct);if(g===0)dt=Tt/St,ft=kt/St;else{const Rt=g*St;dt=Tt>Rt?Tt/Rt:1,ft=kt>Rt?kt/Rt:1}}this._cachedScaleForStroking[0]=dt,this._cachedScaleForStroking[1]=ft}return this._cachedScaleForStroking}rescaleAndStroke(g,et){const{ctx:ot,current:{lineWidth:ut}}=this,[ct,dt]=this.getScaleForStroking();if(ct===dt){ot.lineWidth=(ut||1)*ct,ot.stroke(g);return}const ft=ot.getLineDash();et&&ot.save(),ot.scale(ct,dt),SCALE_MATRIX.a=1/ct,SCALE_MATRIX.d=1/dt;const St=new Path2D;if(St.addPath(g,SCALE_MATRIX),ft.length>0){const kt=Math.max(ct,dt);ot.setLineDash(ft.map(Tt=>Tt/kt)),ot.lineDashOffset/=kt}ot.lineWidth=ut||1,ot.stroke(St),et&&ot.restore()}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}};qw=new WeakSet,DP=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Kw=new WeakSet,MP=function(){if(this.pageColors){const g=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(g!=="none"){const et=this.ctx.filter;this.ctx.filter=g,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=et}}},Xw=new WeakSet,FP=function(g,et,ot){const ut=new Path2D;return ut.addPath(g,new DOMMatrix(ot).invertSelf().multiplySelf(et)),ut};let CanvasGraphics=ER;for(const it in OPS)CanvasGraphics.prototype[it]!==void 0&&(CanvasGraphics.prototype[OPS[it]]=CanvasGraphics.prototype[it]);var Gx,Wx,Yw,qx,pC;const ax=class ax{constructor(g){Mr(this,qx);Mr(this,Gx,void 0);Mr(this,Wx,void 0);Mr(this,Yw,void 0);Ir(this,Gx,g),Ir(this,Wx,new DataView(Jt(this,Gx))),Ir(this,Yw,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ut=0;for(const kt of ax.strings){const Tt=et.encode(g[kt]);ot[kt]=Tt,ut+=4+Tt.length}const ct=new ArrayBuffer(ut),dt=new Uint8Array(ct),ft=new DataView(ct);let St=0;for(const kt of ax.strings){const Tt=ot[kt],Rt=Tt.length;ft.setUint32(St,Rt),dt.set(Tt,St+4),St+=4+Rt}return assert(St===ct.byteLength,"CssFontInfo.write: Buffer overflow"),ct}get fontFamily(){return Qr(this,qx,pC).call(this,0)}get fontWeight(){return Qr(this,qx,pC).call(this,1)}get italicAngle(){return Qr(this,qx,pC).call(this,2)}};Gx=new WeakMap,Wx=new WeakMap,Yw=new WeakMap,qx=new WeakSet,pC=function(g){assert(g<ax.strings.length,"Invalid string index");let et=0;for(let ut=0;ut<g;ut++)et+=Jt(this,Wx).getUint32(et)+4;const ot=Jt(this,Wx).getUint32(et);return Jt(this,Yw).decode(new Uint8Array(Jt(this,Gx),et+4,ot))},Kn(ax,"strings",["fontFamily","fontWeight","italicAngle"]);let CssFontInfo=ax;var sv,pm,Wy,qy,zS;const ox=class ox{constructor(g){Mr(this,qy);Mr(this,sv,void 0);Mr(this,pm,void 0);Mr(this,Wy,void 0);Ir(this,sv,g),Ir(this,pm,new DataView(Jt(this,sv))),Ir(this,Wy,new TextDecoder)}static write(g){const et=new TextEncoder,ot={};let ut=0;for(const Ft of ox.strings){const jt=et.encode(g[Ft]);ot[Ft]=jt,ut+=4+jt.length}ut+=4;let ct,dt,ft=1+ut;g.style&&(ct=et.encode(g.style.style),dt=et.encode(g.style.weight),ft+=4+ct.length+4+dt.length);const St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let Rt=0;Tt.setUint8(Rt++,g.guessFallback?1:0),Tt.setUint32(Rt,0),Rt+=4,ut=0;for(const Ft of ox.strings){const jt=ot[Ft],Bt=jt.length;ut+=4+Bt,Tt.setUint32(Rt,Bt),kt.set(jt,Rt+4),Rt+=4+Bt}return Tt.setUint32(Rt-ut-4,ut),g.style&&(Tt.setUint32(Rt,ct.length),kt.set(ct,Rt+4),Rt+=4+ct.length,Tt.setUint32(Rt,dt.length),kt.set(dt,Rt+4),Rt+=4+dt.length),assert(Rt<=St.byteLength,"SubstitionInfo.write: Buffer overflow"),St.transferToFixedLength(Rt)}get guessFallback(){return Jt(this,pm).getUint8(0)!==0}get css(){return Qr(this,qy,zS).call(this,0)}get loadedName(){return Qr(this,qy,zS).call(this,1)}get baseFontName(){return Qr(this,qy,zS).call(this,2)}get src(){return Qr(this,qy,zS).call(this,3)}get style(){let g=1;g+=4+Jt(this,pm).getUint32(g);const et=Jt(this,pm).getUint32(g),ot=Jt(this,Wy).decode(new Uint8Array(Jt(this,sv),g+4,et));g+=4+et;const ut=Jt(this,pm).getUint32(g),ct=Jt(this,Wy).decode(new Uint8Array(Jt(this,sv),g+4,ut));return{style:ot,weight:ct}}};sv=new WeakMap,pm=new WeakMap,Wy=new WeakMap,qy=new WeakSet,zS=function(g){assert(g<ox.strings.length,"Invalid string index");let et=5;for(let ut=0;ut<g;ut++)et+=Jt(this,pm).getUint32(et)+4;const ot=Jt(this,pm).getUint32(et);return Jt(this,Wy).decode(new Uint8Array(Jt(this,sv),et+4,ot))},Kn(ox,"strings",["css","loadedName","baseFontName","src"]);let SystemFontInfo=ox;var Kx,Xx,Yx,Zx,Uu,mm,Zw,Qs,Hu,Rp,Jx,mC,Ky,US;const Os=class Os{constructor({data:g,extra:et}){Mr(this,Hu);Mr(this,Jx);Mr(this,Ky);Mr(this,mm,void 0);Mr(this,Zw,void 0);Mr(this,Qs,void 0);Ir(this,mm,g),Ir(this,Zw,new TextDecoder),Ir(this,Qs,new DataView(Jt(this,mm))),et&&Object.assign(this,et)}get black(){return Qr(this,Hu,Rp).call(this,0)}get bold(){return Qr(this,Hu,Rp).call(this,1)}get disableFontFace(){return Qr(this,Hu,Rp).call(this,2)}get fontExtraProperties(){return Qr(this,Hu,Rp).call(this,3)}get isInvalidPDFjsFont(){return Qr(this,Hu,Rp).call(this,4)}get isType3Font(){return Qr(this,Hu,Rp).call(this,5)}get italic(){return Qr(this,Hu,Rp).call(this,6)}get missingFile(){return Qr(this,Hu,Rp).call(this,7)}get remeasure(){return Qr(this,Hu,Rp).call(this,8)}get vertical(){return Qr(this,Hu,Rp).call(this,9)}get ascent(){return Qr(this,Jx,mC).call(this,0)}get defaultWidth(){return Qr(this,Jx,mC).call(this,1)}get descent(){return Qr(this,Jx,mC).call(this,2)}get bbox(){let g=Jt(Os,Xx);if(Jt(this,Qs).getUint8(g)===0)return;g+=1;const ot=[];for(let ut=0;ut<4;ut++)ot.push(Jt(this,Qs).getInt16(g,!0)),g+=2;return ot}get fontMatrix(){let g=Jt(Os,Yx);if(Jt(this,Qs).getUint8(g)===0)return;g+=1;const ot=[];for(let ut=0;ut<6;ut++)ot.push(Jt(this,Qs).getFloat64(g,!0)),g+=8;return ot}get defaultVMetrics(){let g=Jt(Os,Zx);if(Jt(this,Qs).getUint8(g)===0)return;g+=1;const ot=[];for(let ut=0;ut<3;ut++)ot.push(Jt(this,Qs).getInt16(g,!0)),g+=2;return ot}get fallbackName(){return Qr(this,Ky,US).call(this,0)}get loadedName(){return Qr(this,Ky,US).call(this,1)}get mimetype(){return Qr(this,Ky,US).call(this,2)}get name(){return Qr(this,Ky,US).call(this,3)}get data(){let g=Jt(Os,Uu);const et=Jt(this,Qs).getUint32(g);g+=4+et;const ot=Jt(this,Qs).getUint32(g);g+=4+ot;const ut=Jt(this,Qs).getUint32(g);g+=4+ut;const ct=Jt(this,Qs).getUint32(g);if(ct!==0)return new Uint8Array(Jt(this,mm),g+4,ct)}clearData(){let g=Jt(Os,Uu);const et=Jt(this,Qs).getUint32(g);g+=4+et;const ot=Jt(this,Qs).getUint32(g);g+=4+ot;const ut=Jt(this,Qs).getUint32(g);g+=4+ut;const ct=Jt(this,Qs).getUint32(g);new Uint8Array(Jt(this,mm),g+4,ct).fill(0),Jt(this,Qs).setUint32(g,0)}get cssFontInfo(){let g=Jt(Os,Uu);const et=Jt(this,Qs).getUint32(g);g+=4+et;const ot=Jt(this,Qs).getUint32(g);g+=4+ot;const ut=Jt(this,Qs).getUint32(g);if(ut===0)return null;const ct=new Uint8Array(ut);return ct.set(new Uint8Array(Jt(this,mm),g+4,ut)),new CssFontInfo(ct.buffer)}get systemFontInfo(){let g=Jt(Os,Uu);const et=Jt(this,Qs).getUint32(g);g+=4+et;const ot=Jt(this,Qs).getUint32(g);if(ot===0)return null;const ut=new Uint8Array(ot);return ut.set(new Uint8Array(Jt(this,mm),g+4,ot)),new SystemFontInfo(ut.buffer)}static write(g){const et=g.systemFontInfo?SystemFontInfo.write(g.systemFontInfo):null,ot=g.cssFontInfo?CssFontInfo.write(g.cssFontInfo):null,ut=new TextEncoder,ct={};let dt=0;for(const zt of Os.strings)ct[zt]=ut.encode(g[zt]),dt+=4+ct[zt].length;const ft=Jt(Os,Uu)+4+dt+4+(et?et.byteLength:0)+4+(ot?ot.byteLength:0)+4+(g.data?g.data.length:0),St=new ArrayBuffer(ft),kt=new Uint8Array(St),Tt=new DataView(St);let Rt=0;const Ft=Os.bools.length;let jt=0,Bt=0;for(let zt=0;zt<Ft;zt++){const Ht=g[Os.bools[zt]];jt|=(Ht===void 0?0:Ht?2:1)<<Bt,Bt+=2,(Bt===8||zt===Ft-1)&&(Tt.setUint8(Rt++,jt),jt=0,Bt=0)}assert(Rt===Jt(Os,Kx),"FontInfo.write: Boolean properties offset mismatch");for(const zt of Os.numbers)Tt.setFloat64(Rt,g[zt]),Rt+=8;if(assert(Rt===Jt(Os,Xx),"FontInfo.write: Number properties offset mismatch"),g.bbox){Tt.setUint8(Rt++,4);for(const zt of g.bbox)Tt.setInt16(Rt,zt,!0),Rt+=2}else Tt.setUint8(Rt++,0),Rt+=2*4;if(assert(Rt===Jt(Os,Yx),"FontInfo.write: BBox properties offset mismatch"),g.fontMatrix){Tt.setUint8(Rt++,6);for(const zt of g.fontMatrix)Tt.setFloat64(Rt,zt,!0),Rt+=8}else Tt.setUint8(Rt++,0),Rt+=8*6;if(assert(Rt===Jt(Os,Zx),"FontInfo.write: FontMatrix properties offset mismatch"),g.defaultVMetrics){Tt.setUint8(Rt++,1);for(const zt of g.defaultVMetrics)Tt.setInt16(Rt,zt,!0),Rt+=2}else Tt.setUint8(Rt++,0),Rt+=3*2;assert(Rt===Jt(Os,Uu),"FontInfo.write: DefaultVMetrics properties offset mismatch"),Tt.setUint32(Jt(Os,Uu),0),Rt+=4;for(const zt of Os.strings){const Ht=ct[zt],Ut=Ht.length;Tt.setUint32(Rt,Ut),kt.set(Ht,Rt+4),Rt+=4+Ut}if(Tt.setUint32(Jt(Os,Uu),Rt-Jt(Os,Uu)-4),!et)Tt.setUint32(Rt,0),Rt+=4;else{const zt=et.byteLength;Tt.setUint32(Rt,zt),assert(Rt+4+zt<=St.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),kt.set(new Uint8Array(et),Rt+4),Rt+=4+zt}if(!ot)Tt.setUint32(Rt,0),Rt+=4;else{const zt=ot.byteLength;Tt.setUint32(Rt,zt),assert(Rt+4+zt<=St.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),kt.set(new Uint8Array(ot),Rt+4),Rt+=4+zt}return g.data===void 0?(Tt.setUint32(Rt,0),Rt+=4):(Tt.setUint32(Rt,g.data.length),kt.set(g.data,Rt+4),Rt+=4+g.data.length),assert(Rt<=St.byteLength,"FontInfo.write: Buffer overflow"),St.transferToFixedLength(Rt)}};Kx=new WeakMap,Xx=new WeakMap,Yx=new WeakMap,Zx=new WeakMap,Uu=new WeakMap,mm=new WeakMap,Zw=new WeakMap,Qs=new WeakMap,Hu=new WeakSet,Rp=function(g){assert(g<Os.bools.length,"Invalid boolean index");const et=Math.floor(g/4),ot=g*2%8,ut=Jt(this,Qs).getUint8(et)>>ot&3;return ut===0?void 0:ut===2},Jx=new WeakSet,mC=function(g){return assert(g<Os.numbers.length,"Invalid number index"),Jt(this,Qs).getFloat64(Jt(Os,Kx)+g*8)},Ky=new WeakSet,US=function(g){assert(g<Os.strings.length,"Invalid string index");let et=Jt(Os,Uu)+4;for(let ct=0;ct<g;ct++)et+=Jt(this,Qs).getUint32(et)+4;const ot=Jt(this,Qs).getUint32(et),ut=new Uint8Array(ot);return ut.set(new Uint8Array(Jt(this,mm),et+4,ot)),Jt(this,Zw).decode(ut)},Kn(Os,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Kn(Os,"numbers",["ascent","defaultWidth","descent"]),Kn(Os,"strings",["fallbackName","loadedName","mimetype","name"]),Mr(Os,Kx,Math.ceil(Os.bools.length*2/8)),Mr(Os,Xx,Jt(Os,Kx)+Os.numbers.length*8),Mr(Os,Yx,Jt(Os,Xx)+1+2*4),Mr(Os,Zx,Jt(Os,Yx)+1+8*6),Mr(Os,Uu,Jt(Os,Zx)+1+2*3);let FontInfo=Os;var Jw,Qw;class GlobalWorkerOptions{static get workerPort(){return Jt(this,Jw)}static set workerPort(g){if(!(typeof Worker<"u"&&g instanceof Worker)&&g!==null)throw new Error("Invalid `workerPort` type.");Ir(this,Jw,g)}static get workerSrc(){return Jt(this,Qw)}static set workerSrc(g){if(typeof g!="string")throw new Error("Invalid `workerSrc` type.");Ir(this,Qw,g)}}Jw=new WeakMap,Qw=new WeakMap,Mr(GlobalWorkerOptions,Jw,null),Mr(GlobalWorkerOptions,Qw,"");var Qx,e2;class Metadata{constructor({parsedData:g,rawData:et}){Mr(this,Qx,void 0);Mr(this,e2,void 0);Ir(this,Qx,g),Ir(this,e2,et)}getRaw(){return Jt(this,e2)}get(g){return Jt(this,Qx).get(g)??null}[Symbol.iterator](){return Jt(this,Qx).entries()}}Qx=new WeakMap,e2=new WeakMap;const INTERNAL=Symbol("INTERNAL");var t2,r2,n2,eE;class OptionalContentGroup{constructor(g,{name:et,intent:ot,usage:ut,rbGroups:ct}){Mr(this,t2,!1);Mr(this,r2,!1);Mr(this,n2,!1);Mr(this,eE,!0);Ir(this,t2,!!(g&RenderingIntentFlag.DISPLAY)),Ir(this,r2,!!(g&RenderingIntentFlag.PRINT)),this.name=et,this.intent=ot,this.usage=ut,this.rbGroups=ct}get visible(){if(Jt(this,n2))return Jt(this,eE);if(!Jt(this,eE))return!1;const{print:g,view:et}=this.usage;return Jt(this,t2)?(et==null?void 0:et.viewState)!=="OFF":Jt(this,r2)?(g==null?void 0:g.printState)!=="OFF":!0}_setVisible(g,et,ot=!1){g!==INTERNAL&&unreachable("Internal method `_setVisible` called."),Ir(this,n2,ot),Ir(this,eE,et)}}t2=new WeakMap,r2=new WeakMap,n2=new WeakMap,eE=new WeakMap;var av,na,tE,rE,i2,OP;class OptionalContentConfig{constructor(g,et=RenderingIntentFlag.DISPLAY){Mr(this,i2);Mr(this,av,null);Mr(this,na,new Map);Mr(this,tE,null);Mr(this,rE,null);if(this.renderingIntent=et,this.name=null,this.creator=null,g!==null){this.name=g.name,this.creator=g.creator,Ir(this,rE,g.order);for(const ot of g.groups)Jt(this,na).set(ot.id,new OptionalContentGroup(et,ot));if(g.baseState==="OFF")for(const ot of Jt(this,na).values())ot._setVisible(INTERNAL,!1);for(const ot of g.on)Jt(this,na).get(ot)._setVisible(INTERNAL,!0);for(const ot of g.off)Jt(this,na).get(ot)._setVisible(INTERNAL,!1);Ir(this,tE,this.getHash())}}isVisible(g){if(Jt(this,na).size===0)return!0;if(!g)return info("Optional content group not defined."),!0;if(g.type==="OCG")return Jt(this,na).has(g.id)?Jt(this,na).get(g.id).visible:(warn(`Optional content group not found: ${g.id}`),!0);if(g.type==="OCMD"){if(g.expression)return Qr(this,i2,OP).call(this,g.expression);if(!g.policy||g.policy==="AnyOn"){for(const et of g.ids){if(!Jt(this,na).has(et))return warn(`Optional content group not found: ${et}`),!0;if(Jt(this,na).get(et).visible)return!0}return!1}else if(g.policy==="AllOn"){for(const et of g.ids){if(!Jt(this,na).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!Jt(this,na).get(et).visible)return!1}return!0}else if(g.policy==="AnyOff"){for(const et of g.ids){if(!Jt(this,na).has(et))return warn(`Optional content group not found: ${et}`),!0;if(!Jt(this,na).get(et).visible)return!0}return!1}else if(g.policy==="AllOff"){for(const et of g.ids){if(!Jt(this,na).has(et))return warn(`Optional content group not found: ${et}`),!0;if(Jt(this,na).get(et).visible)return!1}return!0}return warn(`Unknown optional content policy ${g.policy}.`),!0}return warn(`Unknown group type ${g.type}.`),!0}setVisibility(g,et=!0,ot=!0){var ct;const ut=Jt(this,na).get(g);if(!ut){warn(`Optional content group not found: ${g}`);return}if(ot&&et&&ut.rbGroups.length)for(const dt of ut.rbGroups)for(const ft of dt)ft!==g&&((ct=Jt(this,na).get(ft))==null||ct._setVisible(INTERNAL,!1,!0));ut._setVisible(INTERNAL,!!et,!0),Ir(this,av,null)}setOCGState({state:g,preserveRB:et}){let ot;for(const ut of g){switch(ut){case"ON":case"OFF":case"Toggle":ot=ut;continue}const ct=Jt(this,na).get(ut);if(ct)switch(ot){case"ON":this.setVisibility(ut,!0,et);break;case"OFF":this.setVisibility(ut,!1,et);break;case"Toggle":this.setVisibility(ut,!ct.visible,et);break}}Ir(this,av,null)}get hasInitialVisibility(){return Jt(this,tE)===null||this.getHash()===Jt(this,tE)}getOrder(){return Jt(this,na).size?Jt(this,rE)?Jt(this,rE).slice():[...Jt(this,na).keys()]:null}getGroup(g){return Jt(this,na).get(g)||null}getHash(){if(Jt(this,av)!==null)return Jt(this,av);const g=new MurmurHash3_64;for(const[et,ot]of Jt(this,na))g.update(`${et}:${ot.visible}`);return Ir(this,av,g.hexdigest())}[Symbol.iterator](){return Jt(this,na).entries()}}av=new WeakMap,na=new WeakMap,tE=new WeakMap,rE=new WeakMap,i2=new WeakSet,OP=function(g){const et=g.length;if(et<2)return!0;const ot=g[0];for(let ut=1;ut<et;ut++){const ct=g[ut];let dt;if(Array.isArray(ct))dt=Qr(this,i2,OP).call(this,ct);else if(Jt(this,na).has(ct))dt=Jt(this,na).get(ct).visible;else return warn(`Optional content group not found: ${ct}`),!0;switch(ot){case"And":if(!dt)return!1;break;case"Or":if(dt)return!0;break;case"Not":return!dt;default:return!0}}return ot==="And"};class PDFDataTransportStream{constructor(g,{disableRange:et=!1,disableStream:ot=!1}){assert(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:ut,initialData:ct,progressiveDone:dt,contentDispositionFilename:ft}=g;if(this._queuedChunks=[],this._progressiveDone=dt,this._contentDispositionFilename=ft,(ct==null?void 0:ct.length)>0){const St=ct instanceof Uint8Array&&ct.byteLength===ct.buffer.byteLength?ct.buffer:new Uint8Array(ct).buffer;this._queuedChunks.push(St)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!ot,this._isRangeSupported=!et,this._contentLength=ut,this._fullRequestReader=null,this._rangeReaders=[],g.addRangeListener((St,kt)=>{this._onReceiveData({begin:St,chunk:kt})}),g.addProgressListener((St,kt)=>{this._onProgress({loaded:St,total:kt})}),g.addProgressiveReadListener(St=>{this._onReceiveData({chunk:St})}),g.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),g.transportReady()}_onReceiveData({begin:g,chunk:et}){const ot=et instanceof Uint8Array&&et.byteLength===et.buffer.byteLength?et.buffer:new Uint8Array(et).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ot):this._queuedChunks.push(ot);else{const ut=this._rangeReaders.some(function(ct){return ct._begin!==g?!1:(ct._enqueue(ot),!0)});assert(ut,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var et,ot,ut,ct;g.total===void 0?(ot=(et=this._rangeReaders[0])==null?void 0:et.onProgress)==null||ot.call(et,{loaded:g.loaded}):(ct=(ut=this._fullRequestReader)==null?void 0:ut.onProgress)==null||ct.call(ut,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const et=this._rangeReaders.indexOf(g);et>=0&&this._rangeReaders.splice(et,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFDataTransportStreamRangeReader(this,g,et);return this._pdfDataRangeTransport.requestDataRange(g,et),this._rangeReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeReaders.slice(0))ot.cancel(g);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(g,et,ot=!1,ut=null){this._stream=g,this._done=ot||!1,this._filename=isPdfFile(ut)?ut:null,this._queuedChunks=et||[],this._loaded=0;for(const ct of this._queuedChunks)this._loaded+=ct.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(g,et,ot){this._stream=g,this._begin=et,this._end=ot,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(it){let g=!0,et=ot("filename\\*","i").exec(it);if(et){et=et[1];let Tt=ft(et);return Tt=unescape(Tt),Tt=St(Tt),Tt=kt(Tt),ct(Tt)}if(et=dt(it),et){const Tt=kt(et);return ct(Tt)}if(et=ot("filename","i").exec(it),et){et=et[1];let Tt=ft(et);return Tt=kt(Tt),ct(Tt)}function ot(Tt,Rt){return new RegExp("(?:^|;)\\s*"+Tt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Rt)}function ut(Tt,Rt){if(Tt){if(!/^[\x00-\xFF]+$/.test(Rt))return Rt;try{const Ft=new TextDecoder(Tt,{fatal:!0}),jt=stringToBytes(Rt);Rt=Ft.decode(jt),g=!1}catch{}}return Rt}function ct(Tt){return g&&/[\x80-\xff]/.test(Tt)&&(Tt=ut("utf-8",Tt),g&&(Tt=ut("iso-8859-1",Tt))),Tt}function dt(Tt){const Rt=[];let Ft;const jt=ot("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Ft=jt.exec(Tt))!==null;){let[,zt,Ht,Ut]=Ft;if(zt=parseInt(zt,10),zt in Rt){if(zt===0)break;continue}Rt[zt]=[Ht,Ut]}const Bt=[];for(let zt=0;zt<Rt.length&&zt in Rt;++zt){let[Ht,Ut]=Rt[zt];Ut=ft(Ut),Ht&&(Ut=unescape(Ut),zt===0&&(Ut=St(Ut))),Bt.push(Ut)}return Bt.join("")}function ft(Tt){if(Tt.startsWith('"')){const Rt=Tt.slice(1).split('\\"');for(let Ft=0;Ft<Rt.length;++Ft){const jt=Rt[Ft].indexOf('"');jt!==-1&&(Rt[Ft]=Rt[Ft].slice(0,jt),Rt.length=Ft+1),Rt[Ft]=Rt[Ft].replaceAll(/\\(.)/g,"$1")}Tt=Rt.join('"')}return Tt}function St(Tt){const Rt=Tt.indexOf("'");if(Rt===-1)return Tt;const Ft=Tt.slice(0,Rt),Bt=Tt.slice(Rt+1).replace(/^[^']*'/,"");return ut(Ft,Bt)}function kt(Tt){return!Tt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Tt)?Tt:Tt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Rt,Ft,jt,Bt){if(jt==="q"||jt==="Q")return Bt=Bt.replaceAll("_"," "),Bt=Bt.replaceAll(/=([0-9a-fA-F]{2})/g,function(zt,Ht){return String.fromCharCode(parseInt(Ht,16))}),ut(Ft,Bt);try{Bt=atob(Bt)}catch{}return ut(Ft,Bt)})}return""}function createHeaders(it,g){const et=new Headers;if(!it||!g||typeof g!="object")return et;for(const ot in g){const ut=g[ot];ut!==void 0&&et.append(ot,ut)}return et}function getResponseOrigin(it){var g;return((g=URL.parse(it))==null?void 0:g.origin)??null}function validateRangeRequestCapabilities({responseHeaders:it,isHttp:g,rangeChunkSize:et,disableRange:ot}){const ut={allowRangeRequests:!1,suggestedLength:void 0},ct=parseInt(it.get("Content-Length"),10);return!Number.isInteger(ct)||(ut.suggestedLength=ct,ct<=2*et)||ot||!g||it.get("Accept-Ranges")!=="bytes"||(it.get("Content-Encoding")||"identity")!=="identity"||(ut.allowRangeRequests=!0),ut}function extractFilenameFromHeader(it){const g=it.get("Content-Disposition");if(g){let et=getFilenameFromContentDispositionHeader(g);if(et.includes("%"))try{et=decodeURIComponent(et)}catch{}if(isPdfFile(et))return et}return null}function createResponseError(it,g){return new ResponseException(`Unexpected server response (${it}) while retrieving PDF "${g}".`,it,it===404||it===0&&g.startsWith("file:"))}function validateResponseStatus(it){return it===200||it===206}function createFetchOptions(it,g,et){return{method:"GET",headers:it,signal:et.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(it){return it instanceof Uint8Array?it.buffer:it instanceof ArrayBuffer?it:(warn(`getArrayBuffer - unexpected data format: ${it}`),new Uint8Array(it).buffer)}class PDFFetchStream{constructor(g){Kn(this,"_responseOrigin",null);this.source=g,this.isHttp=/^https?:/i.test(g.url),this.headers=createHeaders(this.isHttp,g.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFFetchStreamRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFFetchStreamReader{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const et=g.source;this._withCredentials=et.withCredentials||!1,this._contentLength=et.length,this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange;const ot=new Headers(g.headers),ut=et.url;fetch(ut,createFetchOptions(ot,this._withCredentials,this._abortController)).then(ct=>{if(g._responseOrigin=getResponseOrigin(ct.url),!validateResponseStatus(ct.status))throw createResponseError(ct.status,ut);this._reader=ct.body.getReader(),this._headersCapability.resolve();const dt=ct.headers,{allowRangeRequests:ft,suggestedLength:St}=validateRangeRequestCapabilities({responseHeaders:dt,isHttp:g.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ft,this._contentLength=St||this._contentLength,this._filename=extractFilenameFromHeader(dt),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._headersCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(g,et,ot){this._stream=g,this._reader=null,this._loaded=0;const ut=g.source;this._withCredentials=ut.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!ut.disableStream,this._abortController=new AbortController;const ct=new Headers(g.headers);ct.append("Range",`bytes=${et}-${ot-1}`);const dt=ut.url;fetch(dt,createFetchOptions(ct,this._withCredentials,this._abortController)).then(ft=>{const St=getResponseOrigin(ft.url);if(St!==g._responseOrigin)throw new Error(`Expected range response-origin "${St}" to match "${g._responseOrigin}".`);if(!validateResponseStatus(ft.status))throw createResponseError(ft.status,dt);this._readCapability.resolve(),this._reader=ft.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;await this._readCapability.promise;const{value:g,done:et}=await this._reader.read();return et?{value:g,done:et}:(this._loaded+=g.byteLength,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:getArrayBuffer(g),done:!1})}cancel(g){var et;(et=this._reader)==null||et.cancel(g),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(it){const g=it.response;return typeof g!="string"?g:stringToBytes(g).buffer}class NetworkManager{constructor({url:g,httpHeaders:et,withCredentials:ot}){Kn(this,"_responseOrigin",null);this.url=g,this.isHttp=/^https?:/i.test(g),this.headers=createHeaders(this.isHttp,et),this.withCredentials=ot||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(g){const et=new XMLHttpRequest,ot=this.currXhrId++,ut=this.pendingRequests[ot]={xhr:et};et.open("GET",this.url),et.withCredentials=this.withCredentials;for(const[ct,dt]of this.headers)et.setRequestHeader(ct,dt);return this.isHttp&&"begin"in g&&"end"in g?(et.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),ut.expectedStatus=PARTIAL_CONTENT_RESPONSE):ut.expectedStatus=OK_RESPONSE,et.responseType="arraybuffer",assert(g.onError,"Expected `onError` callback to be provided."),et.onerror=()=>{g.onError(et.status)},et.onreadystatechange=this.onStateChange.bind(this,ot),et.onprogress=this.onProgress.bind(this,ot),ut.onHeadersReceived=g.onHeadersReceived,ut.onDone=g.onDone,ut.onError=g.onError,ut.onProgress=g.onProgress,et.send(null),ot}onProgress(g,et){var ut;const ot=this.pendingRequests[g];ot&&((ut=ot.onProgress)==null||ut.call(ot,et))}onStateChange(g,et){const ot=this.pendingRequests[g];if(!ot)return;const ut=ot.xhr;if(ut.readyState>=2&&ot.onHeadersReceived&&(ot.onHeadersReceived(),delete ot.onHeadersReceived),ut.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],ut.status===0&&this.isHttp){ot.onError(ut.status);return}const ct=ut.status||OK_RESPONSE;if(!(ct===OK_RESPONSE&&ot.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&ct!==ot.expectedStatus){ot.onError(ut.status);return}const ft=network_getArrayBuffer(ut);if(ct===PARTIAL_CONTENT_RESPONSE){const St=ut.getResponseHeader("Content-Range"),kt=/bytes (\d+)-(\d+)\/(\d+)/.exec(St);kt?ot.onDone({begin:parseInt(kt[1],10),chunk:ft}):(warn('Missing or invalid "Content-Range" header.'),ot.onError(0))}else ft?ot.onDone({begin:0,chunk:ft}):ot.onError(ut.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const et=this.pendingRequests[g].xhr;delete this.pendingRequests[g],et.abort()}}class PDFNetworkStream{constructor(g){this._source=g,this._manager=new NetworkManager(g),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const et=this._rangeRequestReaders.indexOf(g);et>=0&&this._rangeRequestReaders.splice(et,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(g,et){const ot=new PDFNetworkStreamRangeRequestReader(this._manager,g,et);return ot.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNetworkStreamFullRequestReader{constructor(g,et){this._manager=g,this._url=et.url,this._fullRequestId=g.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=et.disableRange||!1,this._contentLength=et.length,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,et=this._manager.getRequestXhr(g);this._manager._responseOrigin=getResponseOrigin(et.responseURL);const ot=et.getAllResponseHeaders(),ut=new Headers(ot?ot.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(ft=>{const[St,...kt]=ft.split(": ");return[St,kt.join(": ")]}):[]),{allowRangeRequests:ct,suggestedLength:dt}=validateRangeRequestCapabilities({responseHeaders:ut,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});ct&&(this._isRangeSupported=!0),this._contentLength=dt||this._contentLength,this._filename=extractFilenameFromHeader(ut),this._isRangeSupported&&this._manager.abortRequest(g),this._headersCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=createResponseError(g,this._url),this._headersCapability.reject(this._storedError);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){var et;(et=this.onProgress)==null||et.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersCapability.reject(g);for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(g,et,ot){this._manager=g,this._url=g.url,this._requestId=g.request({begin:et,end:ot,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var et;const g=getResponseOrigin((et=this._manager.getRequestXhr(this._requestId))==null?void 0:et.responseURL);g!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${g}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var g;(g=this.onClosed)==null||g.call(this,this)}_onDone(g){const et=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:et,done:!1}):this._queuedChunk=et,this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError??(this._storedError=createResponseError(g,this._url));for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){var et;this.isStreamingSupported||(et=this.onProgress)==null||et.call(this,{loaded:g.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const g=Promise.withResolvers();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(it){if(urlRegex.test(it))return new URL(it);const g=process.getBuiltinModule("url");return new URL(g.pathToFileURL(it))}class PDFNodeStream{constructor(g){this.source=g,this.url=parseUrlOrPath(g.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(g,et){if(et<=this._progressiveDataLength)return null;const ot=new PDFNodeStreamFsRangeReader(this,g,et);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(g){var et;(et=this._fullRequestReader)==null||et.cancel(g);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(g)}}class PDFNodeStreamFsFullReader{constructor(g){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null;const et=g.source;this._contentLength=et.length,this._loaded=0,this._filename=null,this._disableRange=et.disableRange||!1,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!et.disableStream,this._isRangeSupported=!et.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const ot=process.getBuiltinModule("fs");ot.promises.lstat(this._url).then(ut=>{this._contentLength=ut.size,this._setReadableStream(ot.createReadStream(this._url)),this._headersCapability.resolve()},ut=>{ut.code==="ENOENT"&&(ut=createResponseError(0,this._url.href)),this._storedError=ut,this._headersCapability.reject(ut)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(g,et,ot){this._url=g.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const ut=g.source;this._isStreamingSupported=!ut.disableStream;const ct=process.getBuiltinModule("fs");this._setReadableStream(ct.createReadStream(this._url,{start:et,end:ot-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ot;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const g=this._readableStream.read();return g===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=g.length,(ot=this.onProgress)==null||ot.call(this,{loaded:this._loaded}),{value:new Uint8Array(g).buffer,done:!1})}cancel(g){if(!this._readableStream){this._error(g);return}this._readableStream.destroy(g)}_error(g){this._storedError=g,this._readCapability.resolve()}_setReadableStream(g){this._readableStream=g,g.on("readable",()=>{this._readCapability.resolve()}),g.on("end",()=>{g.destroy(),this._done=!0,this._readCapability.resolve()}),g.on("error",et=>{this._error(et)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var Gu,s2,IP;class PDFObjects{constructor(){Mr(this,s2);Mr(this,Gu,Object.create(null))}get(g,et=null){if(et){const ut=Qr(this,s2,IP).call(this,g);return ut.promise.then(()=>et(ut.data)),null}const ot=Jt(this,Gu)[g];if(!ot||ot.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${g}.`);return ot.data}has(g){const et=Jt(this,Gu)[g];return!!et&&et.data!==INITIAL_DATA}delete(g){const et=Jt(this,Gu)[g];return!et||et.data===INITIAL_DATA?!1:(delete Jt(this,Gu)[g],!0)}resolve(g,et=null){const ot=Qr(this,s2,IP).call(this,g);ot.data=et,ot.resolve()}clear(){var g;for(const et in Jt(this,Gu)){const{data:ot}=Jt(this,Gu)[et];(g=ot==null?void 0:ot.bitmap)==null||g.close()}Ir(this,Gu,Object.create(null))}*[Symbol.iterator](){for(const g in Jt(this,Gu)){const{data:et}=Jt(this,Gu)[g];et!==INITIAL_DATA&&(yield[g,et])}}}Gu=new WeakMap,s2=new WeakSet,IP=function(g){var et;return(et=Jt(this,Gu))[g]||(et[g]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var j3,ov,Pu,a2,o2,Xy,s0,l2,u2,Yy,nE,iE,lv,sE,c2,aE,Zy,h2,d2,Co,oE,Jy,f2,uv,lE,wA,_5,_A,C5,p2,LP,uE,gC,m2,jP,CA,A5,AA,k5;let TextLayer$1=(Co=class{constructor({textContentSource:g,container:et,viewport:ot}){Mr(this,wA);Mr(this,_A);Mr(this,p2);Mr(this,ov,Promise.withResolvers());Mr(this,Pu,null);Mr(this,a2,!1);Mr(this,o2,!!((j3=globalThis.FontInspector)!=null&&j3.enabled));Mr(this,Xy,null);Mr(this,s0,null);Mr(this,l2,0);Mr(this,u2,0);Mr(this,Yy,null);Mr(this,nE,null);Mr(this,iE,0);Mr(this,lv,0);Mr(this,sE,Object.create(null));Mr(this,c2,[]);Mr(this,aE,null);Mr(this,Zy,[]);Mr(this,h2,new WeakMap);Mr(this,d2,null);var St;if(g instanceof ReadableStream)Ir(this,aE,g);else if(typeof g=="object")Ir(this,aE,new ReadableStream({start(kt){kt.enqueue(g),kt.close()}}));else throw new Error('No "textContentSource" parameter specified.');Ir(this,Pu,Ir(this,nE,et)),Ir(this,lv,ot.scale*OutputScale.pixelRatio),Ir(this,iE,ot.rotation),Ir(this,s0,{div:null,properties:null,ctx:null});const{pageWidth:ut,pageHeight:ct,pageX:dt,pageY:ft}=ot.rawDims;Ir(this,d2,[1,0,0,-1,-dt,ft+ct]),Ir(this,u2,ut),Ir(this,l2,ct),Qr(St=Co,CA,A5).call(St),setLayerDimensions(et,ot),Jt(this,ov).promise.finally(()=>{Jt(Co,lE).delete(this),Ir(this,s0,null),Ir(this,sE,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:g,isFirefox:et}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${g&&et?"Calibri, ":""}sans-serif`],["monospace",`${g&&et?"Lucida Console, ":""}monospace`]]))}render(){const g=()=>{Jt(this,Yy).read().then(({value:et,done:ot})=>{if(ot){Jt(this,ov).resolve();return}Jt(this,Xy)??Ir(this,Xy,et.lang),Object.assign(Jt(this,sE),et.styles),Qr(this,wA,_5).call(this,et.items),g()},Jt(this,ov).reject)};return Ir(this,Yy,Jt(this,aE).getReader()),Jt(Co,lE).add(this),g(),Jt(this,ov).promise}update({viewport:g,onBefore:et=null}){var ct;const ot=g.scale*OutputScale.pixelRatio,ut=g.rotation;if(ut!==Jt(this,iE)&&(et==null||et(),Ir(this,iE,ut),setLayerDimensions(Jt(this,nE),{rotation:ut})),ot!==Jt(this,lv)){et==null||et(),Ir(this,lv,ot);const dt={div:null,properties:null,ctx:Qr(ct=Co,uE,gC).call(ct,Jt(this,Xy))};for(const ft of Jt(this,Zy))dt.properties=Jt(this,h2).get(ft),dt.div=ft,Qr(this,p2,LP).call(this,dt)}}cancel(){var et;const g=new AbortException("TextLayer task cancelled.");(et=Jt(this,Yy))==null||et.cancel(g).catch(()=>{}),Ir(this,Yy,null),Jt(this,ov).reject(g)}get textDivs(){return Jt(this,Zy)}get textContentItemsStr(){return Jt(this,c2)}static cleanup(){if(!(Jt(this,lE).size>0)){Jt(this,oE).clear();for(const{canvas:g}of Jt(this,Jy).values())g.remove();Jt(this,Jy).clear()}}},ov=new WeakMap,Pu=new WeakMap,a2=new WeakMap,o2=new WeakMap,Xy=new WeakMap,s0=new WeakMap,l2=new WeakMap,u2=new WeakMap,Yy=new WeakMap,nE=new WeakMap,iE=new WeakMap,lv=new WeakMap,sE=new WeakMap,c2=new WeakMap,aE=new WeakMap,Zy=new WeakMap,h2=new WeakMap,d2=new WeakMap,oE=new WeakMap,Jy=new WeakMap,f2=new WeakMap,uv=new WeakMap,lE=new WeakMap,wA=new WeakSet,_5=function(g){var ut,ct;if(Jt(this,a2))return;(ct=Jt(this,s0)).ctx??(ct.ctx=Qr(ut=Co,uE,gC).call(ut,Jt(this,Xy)));const et=Jt(this,Zy),ot=Jt(this,c2);for(const dt of g){if(et.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),Ir(this,a2,!0);return}if(dt.str===void 0){if(dt.type==="beginMarkedContentProps"||dt.type==="beginMarkedContent"){const ft=Jt(this,Pu);Ir(this,Pu,document.createElement("span")),Jt(this,Pu).classList.add("markedContent"),dt.id&&Jt(this,Pu).setAttribute("id",`${dt.id}`),ft.append(Jt(this,Pu))}else dt.type==="endMarkedContent"&&Ir(this,Pu,Jt(this,Pu).parentNode);continue}ot.push(dt.str),Qr(this,_A,C5).call(this,dt)}},_A=new WeakSet,C5=function(g){var zt;const et=document.createElement("span"),ot={angle:0,canvasWidth:0,hasText:g.str!=="",hasEOL:g.hasEOL,fontSize:0};Jt(this,Zy).push(et);const ut=Util$1.transform(Jt(this,d2),g.transform);let ct=Math.atan2(ut[1],ut[0]);const dt=Jt(this,sE)[g.fontName];dt.vertical&&(ct+=Math.PI/2);let ft=Jt(this,o2)&&dt.fontSubstitution||dt.fontFamily;ft=Co.fontFamilyMap.get(ft)||ft;const St=Math.hypot(ut[2],ut[3]),kt=St*Qr(zt=Co,AA,k5).call(zt,ft,dt,Jt(this,Xy));let Tt,Rt;ct===0?(Tt=ut[4],Rt=ut[5]-kt):(Tt=ut[4]+kt*Math.sin(ct),Rt=ut[5]-kt*Math.cos(ct));const Ft="calc(var(--total-scale-factor) *",jt=et.style;Jt(this,Pu)===Jt(this,nE)?(jt.left=`${(100*Tt/Jt(this,u2)).toFixed(2)}%`,jt.top=`${(100*Rt/Jt(this,l2)).toFixed(2)}%`):(jt.left=`${Ft}${Tt.toFixed(2)}px)`,jt.top=`${Ft}${Rt.toFixed(2)}px)`),jt.fontSize=`${Ft}${(Jt(Co,uv)*St).toFixed(2)}px)`,jt.fontFamily=ft,ot.fontSize=St,et.setAttribute("role","presentation"),et.textContent=g.str,et.dir=g.dir,Jt(this,o2)&&(et.dataset.fontName=dt.fontSubstitutionLoadedName||g.fontName),ct!==0&&(ot.angle=ct*(180/Math.PI));let Bt=!1;if(g.str.length>1)Bt=!0;else if(g.str!==" "&&g.transform[0]!==g.transform[3]){const Ht=Math.abs(g.transform[0]),Ut=Math.abs(g.transform[3]);Ht!==Ut&&Math.max(Ht,Ut)/Math.min(Ht,Ut)>1.5&&(Bt=!0)}if(Bt&&(ot.canvasWidth=dt.vertical?g.height:g.width),Jt(this,h2).set(et,ot),Jt(this,s0).div=et,Jt(this,s0).properties=ot,Qr(this,p2,LP).call(this,Jt(this,s0)),ot.hasText&&Jt(this,Pu).append(et),ot.hasEOL){const Ht=document.createElement("br");Ht.setAttribute("role","presentation"),Jt(this,Pu).append(Ht)}},p2=new WeakSet,LP=function(g){var ft;const{div:et,properties:ot,ctx:ut}=g,{style:ct}=et;let dt="";if(Jt(Co,uv)>1&&(dt=`scale(${1/Jt(Co,uv)})`),ot.canvasWidth!==0&&ot.hasText){const{fontFamily:St}=ct,{canvasWidth:kt,fontSize:Tt}=ot;Qr(ft=Co,m2,jP).call(ft,ut,Tt*Jt(this,lv),St);const{width:Rt}=ut.measureText(et.textContent);Rt>0&&(dt=`scaleX(${kt*Jt(this,lv)/Rt}) ${dt}`)}ot.angle!==0&&(dt=`rotate(${ot.angle}deg) ${dt}`),dt.length>0&&(ct.transform=dt)},uE=new WeakSet,gC=function(g=null){let et=Jt(this,Jy).get(g||(g=""));if(!et){const ot=document.createElement("canvas");ot.className="hiddenCanvasElement",ot.lang=g,document.body.append(ot),et=ot.getContext("2d",{alpha:!1,willReadFrequently:!0}),Jt(this,Jy).set(g,et),Jt(this,f2).set(et,{size:0,family:""})}return et},m2=new WeakSet,jP=function(g,et,ot){const ut=Jt(this,f2).get(g);et===ut.size&&ot===ut.family||(g.font=`${et}px ${ot}`,ut.size=et,ut.family=ot)},CA=new WeakSet,A5=function(){if(Jt(this,uv)!==null)return;const g=document.createElement("div");g.style.opacity=0,g.style.lineHeight=1,g.style.fontSize="1px",g.style.position="absolute",g.textContent="X",document.body.append(g),Ir(this,uv,g.getBoundingClientRect().height),g.remove()},AA=new WeakSet,k5=function(g,et,ot){const ut=Jt(this,oE).get(g);if(ut)return ut;const ct=Qr(this,uE,gC).call(this,ot);ct.canvas.width=ct.canvas.height=DEFAULT_FONT_SIZE,Qr(this,m2,jP).call(this,ct,DEFAULT_FONT_SIZE,g);const dt=ct.measureText(""),ft=dt.fontBoundingBoxAscent,St=Math.abs(dt.fontBoundingBoxDescent);ct.canvas.width=ct.canvas.height=0;let kt=.8;return ft?kt=ft/(ft+St):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),et.ascent?kt=et.ascent:et.descent&&(kt=1+et.descent)),Jt(this,oE).set(g,kt),kt},Mr(Co,uE),Mr(Co,m2),Mr(Co,CA),Mr(Co,AA),Mr(Co,oE,new Map),Mr(Co,Jy,new Map),Mr(Co,f2,new WeakMap),Mr(Co,uv,null),Mr(Co,lE,new Set),Co);const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(it={}){typeof it=="string"||it instanceof URL?it={url:it}:(it instanceof ArrayBuffer||ArrayBuffer.isView(it))&&(it={data:it});const g=new PDFDocumentLoadingTask,{docId:et}=g,ot=it.url?getUrlProp(it.url):null,ut=it.data?getDataProp(it.data):null,ct=it.httpHeaders||null,dt=it.withCredentials===!0,ft=it.password??null,St=it.range instanceof PDFDataRangeTransport$1?it.range:null,kt=Number.isInteger(it.rangeChunkSize)&&it.rangeChunkSize>0?it.rangeChunkSize:2**16;let Tt=it.worker instanceof PDFWorker?it.worker:null;const Rt=it.verbosity,Ft=typeof it.docBaseUrl=="string"&&!isDataScheme(it.docBaseUrl)?it.docBaseUrl:null,jt=getFactoryUrlProp(it.cMapUrl),Bt=it.cMapPacked!==!1,zt=it.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),Ht=getFactoryUrlProp(it.iccUrl),Ut=getFactoryUrlProp(it.standardFontDataUrl),Kt=it.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),Yt=getFactoryUrlProp(it.wasmUrl),er=it.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),ar=it.stopAtErrors!==!0,ir=Number.isInteger(it.maxImageSize)&&it.maxImageSize>-1?it.maxImageSize:-1,lr=it.isEvalSupported!==!1,cr=typeof it.isOffscreenCanvasSupported=="boolean"?it.isOffscreenCanvasSupported:!isNodeJS,vr=typeof it.isImageDecoderSupported=="boolean"?it.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),xr=Number.isInteger(it.canvasMaxAreaInBytes)?it.canvasMaxAreaInBytes:-1,yr=typeof it.disableFontFace=="boolean"?it.disableFontFace:isNodeJS,Sr=it.fontExtraProperties===!0,kr=it.enableXfa===!0,Pr=it.ownerDocument||globalThis.document,Or=it.disableRange===!0,hr=it.disableStream===!0,Tr=it.disableAutoFetch===!0,mr=it.pdfBug===!0,Er=it.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),Dr=it.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),Cr=it.enableHWA===!0,Lr=it.useWasm!==!1,qr=St?St.length:it.length??NaN,sn=typeof it.useSystemFonts=="boolean"?it.useSystemFonts:!isNodeJS&&!yr,an=typeof it.useWorkerFetch=="boolean"?it.useWorkerFetch:!!(zt===DOMCMapReaderFactory&&Kt===DOMStandardFontDataFactory&&er===DOMWasmFactory&&jt&&Ut&&Yt&&isValidFetchUrl(jt,document.baseURI)&&isValidFetchUrl(Ut,document.baseURI)&&isValidFetchUrl(Yt,document.baseURI)),tn=null;setVerbosityLevel(Rt);const ln={canvasFactory:new Er({ownerDocument:Pr,enableHWA:Cr}),filterFactory:new Dr({docId:et,ownerDocument:Pr}),cMapReaderFactory:an?null:new zt({baseUrl:jt,isCompressed:Bt}),standardFontDataFactory:an?null:new Kt({baseUrl:Ut}),wasmFactory:an?null:new er({baseUrl:Yt})};Tt||(Tt=PDFWorker.create({verbosity:Rt,port:GlobalWorkerOptions.workerPort}),g._worker=Tt);const yn={docId:et,apiVersion:"5.4.296",data:ut,password:ft,disableAutoFetch:Tr,rangeChunkSize:kt,length:qr,docBaseUrl:Ft,enableXfa:kr,evaluatorOptions:{maxImageSize:ir,disableFontFace:yr,ignoreErrors:ar,isEvalSupported:lr,isOffscreenCanvasSupported:cr,isImageDecoderSupported:vr,canvasMaxAreaInBytes:xr,fontExtraProperties:Sr,useSystemFonts:sn,useWasm:Lr,useWorkerFetch:an,cMapUrl:jt,iccUrl:Ht,standardFontDataUrl:Ut,wasmUrl:Yt}},pn={ownerDocument:Pr,pdfBug:mr,styleElement:tn,loadingParams:{disableAutoFetch:Tr,enableXfa:kr}};return Tt.promise.then(function(){if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const En=Tt.messageHandler.sendWithPromise("GetDocRequest",yn,ut?[ut.buffer]:null);let On;if(St)On=new PDFDataTransportStream(St,{disableRange:Or,disableStream:hr});else if(!ut){if(!ot)throw new Error("getDocument - no `url` parameter provided.");const Xn=isValidFetchUrl(ot)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;On=new Xn({url:ot,length:qr,httpHeaders:ct,withCredentials:dt,rangeChunkSize:kt,disableRange:Or,disableStream:hr})}return En.then(Xn=>{if(g.destroyed)throw new Error("Loading aborted");if(Tt.destroyed)throw new Error("Worker was destroyed");const Un=new MessageHandler(et,Xn,Tt.port),Ln=new WorkerTransport(Un,g,On,pn,ln,Cr);g._transport=Ln,Un.send("Ready",null)})}).catch(g._capability.reject),g}var kA;const TA=class TA{constructor(){Kn(this,"_capability",Promise.withResolvers());Kn(this,"_transport",null);Kn(this,"_worker",null);Kn(this,"docId",`d${Ko(TA,kA)._++}`);Kn(this,"destroyed",!1);Kn(this,"onPassword",null);Kn(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var g,et,ot,ut;this.destroyed=!0;try{(g=this._worker)!=null&&g.port&&(this._worker._pendingDestroy=!0),await((et=this._transport)==null?void 0:et.destroy())}catch(ct){throw(ot=this._worker)!=null&&ot.port&&delete this._worker._pendingDestroy,ct}this._transport=null,(ut=this._worker)==null||ut.destroy(),this._worker=null}async getData(){return this._transport.getData()}};kA=new WeakMap,Mr(TA,kA,0);let PDFDocumentLoadingTask=TA;var Qy,g2,v2,y2,x2,B3;let PDFDataRangeTransport$1=(B3=class{constructor(g,et,ot=!1,ut=null){Mr(this,Qy,Promise.withResolvers());Mr(this,g2,[]);Mr(this,v2,[]);Mr(this,y2,[]);Mr(this,x2,[]);this.length=g,this.initialData=et,this.progressiveDone=ot,this.contentDispositionFilename=ut}addRangeListener(g){Jt(this,x2).push(g)}addProgressListener(g){Jt(this,y2).push(g)}addProgressiveReadListener(g){Jt(this,v2).push(g)}addProgressiveDoneListener(g){Jt(this,g2).push(g)}onDataRange(g,et){for(const ot of Jt(this,x2))ot(g,et)}onDataProgress(g,et){Jt(this,Qy).promise.then(()=>{for(const ot of Jt(this,y2))ot(g,et)})}onDataProgressiveRead(g){Jt(this,Qy).promise.then(()=>{for(const et of Jt(this,v2))et(g)})}onDataProgressiveDone(){Jt(this,Qy).promise.then(()=>{for(const g of Jt(this,g2))g()})}transportReady(){Jt(this,Qy).resolve()}requestDataRange(g,et){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Qy=new WeakMap,g2=new WeakMap,v2=new WeakMap,y2=new WeakMap,x2=new WeakMap,B3);class PDFDocumentProxy{constructor(g,et){this._pdfInfo=g,this._transport=et}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(g){return this._transport.getPage(g)}getPageIndex(g){return this._transport.getPageIndex(g)}getDestinations(){return this._transport.getDestinations()}getDestination(g){return this._transport.getDestination(g)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(g,et){return this._transport.getAnnotationsByType(g,et)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getOptionalContentConfig(et)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(g=!1){return this._transport.startCleanup(g||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(g){return this._transport.cachedPageNumber(g)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var a0,e1,HS;class PDFPageProxy{constructor(g,et,ot,ut=!1){Mr(this,e1);Mr(this,a0,!1);this._pageIndex=g,this._pageInfo=et,this._transport=ot,this._stats=ut?new StatTimer:null,this._pdfBug=ut,this.commonObjs=ot.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:g,rotation:et=this.rotate,offsetX:ot=0,offsetY:ut=0,dontFlip:ct=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:g,rotation:et,offsetX:ot,offsetY:ut,dontFlip:ct})}getAnnotations({intent:g="display"}={}){const{renderingIntent:et}=this._transport.getRenderingIntent(g);return this._transport.getAnnotations(this._pageIndex,et)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var g;return((g=this._transport._htmlForXfa)==null?void 0:g.children[this._pageIndex])||null}render({canvasContext:g,canvas:et=g.canvas,viewport:ot,intent:ut="display",annotationMode:ct=AnnotationMode.ENABLE,transform:dt=null,background:ft=null,optionalContentConfigPromise:St=null,annotationCanvasMap:kt=null,pageColors:Tt=null,printAnnotationStorage:Rt=null,isEditing:Ft=!1,recordOperations:jt=!1,operationsFilter:Bt=null}){var vr,xr,yr;(vr=this._stats)==null||vr.time("Overall");const zt=this._transport.getRenderingIntent(ut,ct,Rt,Ft),{renderingIntent:Ht,cacheKey:Ut}=zt;Ir(this,a0,!1),St||(St=this._transport.getOptionalContentConfig(Ht));let Kt=this._intentStates.get(Ut);Kt||(Kt=Object.create(null),this._intentStates.set(Ut,Kt)),Kt.streamReaderCancelTimeout&&(clearTimeout(Kt.streamReaderCancelTimeout),Kt.streamReaderCancelTimeout=null);const Yt=!!(Ht&RenderingIntentFlag.PRINT);Kt.displayReadyCapability||(Kt.displayReadyCapability=Promise.withResolvers(),Kt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(xr=this._stats)==null||xr.time("Page Request"),this._pumpOperatorList(zt));const er=!!(this._pdfBug&&((yr=globalThis.StepperManager)!=null&&yr.enabled)),ar=!this.recordedBBoxes&&(jt||er),ir=Sr=>{var kr,Pr;if(Kt.renderTasks.delete(lr),ar){const Or=(kr=lr.gfx)==null?void 0:kr.dependencyTracker.take();Or&&(lr.stepper&&lr.stepper.setOperatorBBoxes(Or,lr.gfx.dependencyTracker.takeDebugMetadata()),jt&&(this.recordedBBoxes=Or))}Yt&&Ir(this,a0,!0),Qr(this,e1,HS).call(this),Sr?(lr.capability.reject(Sr),this._abortOperatorList({intentState:Kt,reason:Sr instanceof Error?Sr:new Error(Sr)})):lr.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Pr=globalThis.Stats)!=null&&Pr.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},lr=new InternalRenderTask({callback:ir,params:{canvas:et,canvasContext:g,dependencyTracker:ar?new CanvasDependencyTracker(et,Kt.operatorList.length,er):null,viewport:ot,transform:dt,background:ft},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:kt,operatorList:Kt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Yt,pdfBug:this._pdfBug,pageColors:Tt,enableHWA:this._transport.enableHWA,operationsFilter:Bt});(Kt.renderTasks||(Kt.renderTasks=new Set)).add(lr);const cr=lr.task;return Promise.all([Kt.displayReadyCapability.promise,St]).then(([Sr,kr])=>{var Pr;if(this.destroyed){ir();return}if((Pr=this._stats)==null||Pr.time("Rendering"),!(kr.renderingIntent&Ht))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");lr.initializeGraphics({transparency:Sr,optionalContentConfig:kr}),lr.operatorListChanged()}).catch(ir),cr}getOperatorList({intent:g="display",annotationMode:et=AnnotationMode.ENABLE,printAnnotationStorage:ot=null,isEditing:ut=!1}={}){var kt;function ct(){ft.operatorList.lastChunk&&(ft.opListReadCapability.resolve(ft.operatorList),ft.renderTasks.delete(St))}const dt=this._transport.getRenderingIntent(g,et,ot,ut,!0);let ft=this._intentStates.get(dt.cacheKey);ft||(ft=Object.create(null),this._intentStates.set(dt.cacheKey,ft));let St;return ft.opListReadCapability||(St=Object.create(null),St.operatorListChanged=ct,ft.opListReadCapability=Promise.withResolvers(),(ft.renderTasks||(ft.renderTasks=new Set)).add(St),ft.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(kt=this._stats)==null||kt.time("Page Request"),this._pumpOperatorList(dt)),ft.opListReadCapability.promise}streamTextContent({includeMarkedContent:g=!1,disableNormalization:et=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:g===!0,disableNormalization:et===!0},{highWaterMark:100,size(ut){return ut.items.length}})}getTextContent(g={}){if(this._transport._htmlForXfa)return this.getXfa().then(ot=>XfaText.textContent(ot));const et=this.streamTextContent(g);return new Promise(function(ot,ut){function ct(){dt.read().then(function({value:St,done:kt}){if(kt){ot(ft);return}ft.lang??(ft.lang=St.lang),Object.assign(ft.styles,St.styles),ft.items.push(...St.items),ct()},ut)}const dt=et.getReader(),ft={items:[],styles:Object.create(null),lang:null};ct()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const g=[];for(const et of this._intentStates.values())if(this._abortOperatorList({intentState:et,reason:new Error("Page was destroyed."),force:!0}),!et.opListReadCapability)for(const ot of et.renderTasks)g.push(ot.completed),ot.cancel();return this.objs.clear(),Ir(this,a0,!1),Promise.all(g)}cleanup(g=!1){Ir(this,a0,!0);const et=Qr(this,e1,HS).call(this);return g&&et&&this._stats&&(this._stats=new StatTimer),et}_startRenderPage(g,et){var ut,ct;const ot=this._intentStates.get(et);ot&&((ut=this._stats)==null||ut.timeEnd("Page Request"),(ct=ot.displayReadyCapability)==null||ct.resolve(g))}_renderPageChunk(g,et){for(let ot=0,ut=g.length;ot<ut;ot++)et.operatorList.fnArray.push(g.fnArray[ot]),et.operatorList.argsArray.push(g.argsArray[ot]);et.operatorList.lastChunk=g.lastChunk,et.operatorList.separateAnnots=g.separateAnnots;for(const ot of et.renderTasks)ot.operatorListChanged();g.lastChunk&&Qr(this,e1,HS).call(this)}_pumpOperatorList({renderingIntent:g,cacheKey:et,annotationStorageSerializable:ot,modifiedIds:ut}){const{map:ct,transfer:dt}=ot,St=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:g,cacheKey:et,annotationStorage:ct,modifiedIds:ut},dt).getReader(),kt=this._intentStates.get(et);kt.streamReader=St;const Tt=()=>{St.read().then(({value:Rt,done:Ft})=>{if(Ft){kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Rt,kt),Tt())},Rt=>{if(kt.streamReader=null,!this._transport.destroyed){if(kt.operatorList){kt.operatorList.lastChunk=!0;for(const Ft of kt.renderTasks)Ft.operatorListChanged();Qr(this,e1,HS).call(this)}if(kt.displayReadyCapability)kt.displayReadyCapability.reject(Rt);else if(kt.opListReadCapability)kt.opListReadCapability.reject(Rt);else throw Rt}})};Tt()}_abortOperatorList({intentState:g,reason:et,force:ot=!1}){if(g.streamReader){if(g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null),!ot){if(g.renderTasks.size>0)return;if(et instanceof RenderingCancelledException){let ut=RENDERING_CANCELLED_TIMEOUT;et.extraDelay>0&&et.extraDelay<1e3&&(ut+=et.extraDelay),g.streamReaderCancelTimeout=setTimeout(()=>{g.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:g,reason:et,force:!0})},ut);return}}if(g.streamReader.cancel(new AbortException(et.message)).catch(()=>{}),g.streamReader=null,!this._transport.destroyed){for(const[ut,ct]of this._intentStates)if(ct===g){this._intentStates.delete(ut);break}this.cleanup()}}}get stats(){return this._stats}}a0=new WeakMap,e1=new WeakSet,HS=function(){if(!Jt(this,a0)||this.destroyed)return!1;for(const{renderTasks:g,operatorList:et}of this._intentStates.values())if(g.size>0||!et.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Ir(this,a0,!1),!0};var cv,jp,o0,t1,PA,r1,n1,cE,vC,RA,T5,NA,P5,i1,GS,hE,yC;const Eo=class Eo{constructor({name:g=null,port:et=null,verbosity:ot=getVerbosityLevel()}={}){Mr(this,cE);Mr(this,RA);Mr(this,NA);Mr(this,i1);Mr(this,cv,Promise.withResolvers());Mr(this,jp,null);Mr(this,o0,null);Mr(this,t1,null);if(this.name=g,this.destroyed=!1,this.verbosity=ot,et){if(Jt(Eo,n1).has(et))throw new Error("Cannot use more than one PDFWorker per port.");Jt(Eo,n1).set(et,this),Qr(this,RA,T5).call(this,et)}else Qr(this,NA,P5).call(this)}get promise(){return Jt(this,cv).promise}get port(){return Jt(this,o0)}get messageHandler(){return Jt(this,jp)}destroy(){var g,et;this.destroyed=!0,(g=Jt(this,t1))==null||g.terminate(),Ir(this,t1,null),Jt(Eo,n1).delete(Jt(this,o0)),Ir(this,o0,null),(et=Jt(this,jp))==null||et.destroy(),Ir(this,jp,null)}static create(g){const et=Jt(this,n1).get(g==null?void 0:g.port);if(et){if(et._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return et}return new Eo(g)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>Jt(this,hE,yC)?Jt(this,hE,yC):(await __vitePreload(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};cv=new WeakMap,jp=new WeakMap,o0=new WeakMap,t1=new WeakMap,PA=new WeakMap,r1=new WeakMap,n1=new WeakMap,cE=new WeakSet,vC=function(){Jt(this,cv).resolve(),Jt(this,jp).send("configure",{verbosity:this.verbosity})},RA=new WeakSet,T5=function(g){Ir(this,o0,g),Ir(this,jp,new MessageHandler("main","worker",g)),Jt(this,jp).on("ready",()=>{}),Qr(this,cE,vC).call(this)},NA=new WeakSet,P5=function(){if(Jt(Eo,r1)||Jt(Eo,hE,yC)){Qr(this,i1,GS).call(this);return}let{workerSrc:g}=Eo;try{Eo._isSameOrigin(window.location,g)||(g=Eo._createCDNWrapper(new URL(g,window.location).href));const et=new Worker(g,{type:"module"}),ot=new MessageHandler("main","worker",et),ut=()=>{ct.abort(),ot.destroy(),et.terminate(),this.destroyed?Jt(this,cv).reject(new Error("Worker was destroyed")):Qr(this,i1,GS).call(this)},ct=new AbortController;et.addEventListener("error",()=>{Jt(this,t1)||ut()},{signal:ct.signal}),ot.on("test",ft=>{if(ct.abort(),this.destroyed||!ft){ut();return}Ir(this,jp,ot),Ir(this,o0,et),Ir(this,t1,et),Qr(this,cE,vC).call(this)}),ot.on("ready",ft=>{if(ct.abort(),this.destroyed){ut();return}try{dt()}catch{Qr(this,i1,GS).call(this)}});const dt=()=>{const ft=new Uint8Array;ot.send("test",ft,[ft.buffer])};dt();return}catch{info("The worker has been disabled.")}Qr(this,i1,GS).call(this)},i1=new WeakSet,GS=function(){Jt(Eo,r1)||(warn("Setting up fake worker."),Ir(Eo,r1,!0)),Eo._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){Jt(this,cv).reject(new Error("Worker was destroyed"));return}const et=new LoopbackPort;Ir(this,o0,et);const ot=`fake${Ko(Eo,PA)._++}`,ut=new MessageHandler(ot+"_worker",ot,et);g.setup(ut,et),Ir(this,jp,new MessageHandler(ot,ot+"_worker",et)),Qr(this,cE,vC).call(this)}).catch(g=>{Jt(this,cv).reject(new Error(`Setting up fake worker failed: "${g.message}".`))})},hE=new WeakSet,yC=function(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}},Mr(Eo,hE),Mr(Eo,PA,0),Mr(Eo,r1,!1),Mr(Eo,n1,new WeakMap),isNodeJS&&(Ir(Eo,r1,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),Eo._isSameOrigin=(g,et)=>{const ot=URL.parse(g);if(!(ot!=null&&ot.origin)||ot.origin==="null")return!1;const ut=new URL(et,ot);return ot.origin===ut.origin},Eo._createCDNWrapper=g=>{const et=`await import("${g}");`;return URL.createObjectURL(new Blob([et],{type:"text/javascript"}))},Eo.fromPort=g=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Eo.create(g)};let PDFWorker=Eo;var l0,gm,dE,fE,u0,s1,qS;class WorkerTransport{constructor(g,et,ot,ut,ct,dt){Mr(this,s1);Mr(this,l0,new Map);Mr(this,gm,new Map);Mr(this,dE,new Map);Mr(this,fE,new Map);Mr(this,u0,null);this.messageHandler=g,this.loadingTask=et,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:ut.ownerDocument,styleElement:ut.styleElement}),this.loadingParams=ut.loadingParams,this._params=ut,this.canvasFactory=ct.canvasFactory,this.filterFactory=ct.filterFactory,this.cMapReaderFactory=ct.cMapReaderFactory,this.standardFontDataFactory=ct.standardFontDataFactory,this.wasmFactory=ct.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=ot,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=dt,this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(g,et=AnnotationMode.ENABLE,ot=null,ut=!1,ct=!1){let dt=RenderingIntentFlag.DISPLAY,ft=SerializableEmpty;switch(g){case"any":dt=RenderingIntentFlag.ANY;break;case"display":break;case"print":dt=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${g}`)}const St=dt&RenderingIntentFlag.PRINT&&ot instanceof PrintAnnotationStorage?ot:this.annotationStorage;switch(et){case AnnotationMode.DISABLE:dt+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:dt+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:dt+=RenderingIntentFlag.ANNOTATIONS_STORAGE,ft=St.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${et}`)}ut&&(dt+=RenderingIntentFlag.IS_EDITING),ct&&(dt+=RenderingIntentFlag.OPLIST);const{ids:kt,hash:Tt}=St.modifiedIds,Rt=[dt,ft.hash,Tt];return{renderingIntent:dt,cacheKey:Rt.join("_"),annotationStorageSerializable:ft,modifiedIds:kt}}destroy(){var ot;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(ot=Jt(this,u0))==null||ot.reject(new Error("Worker was destroyed during onPassword callback"));const g=[];for(const ut of Jt(this,gm).values())g.push(ut._destroy());Jt(this,gm).clear(),Jt(this,dE).clear(),Jt(this,fE).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const et=this.messageHandler.sendWithPromise("Terminate",null);return g.push(et),Promise.all(g).then(()=>{var ut,ct;this.commonObjs.clear(),this.fontLoader.clear(),Jt(this,l0).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(ut=this._networkStream)==null||ut.cancelAllRequests(new AbortException("Worker was terminated.")),(ct=this.messageHandler)==null||ct.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:g,loadingTask:et}=this;g.on("GetReader",(ot,ut)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=ct=>{this._lastProgress={loaded:ct.loaded,total:ct.total}},ut.onPull=()=>{this._fullReader.read().then(function({value:ct,done:dt}){if(dt){ut.close();return}assert(ct instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ut.enqueue(new Uint8Array(ct),1,[ct])}).catch(ct=>{ut.error(ct)})},ut.onCancel=ct=>{this._fullReader.cancel(ct),ut.ready.catch(dt=>{if(!this.destroyed)throw dt})}}),g.on("ReaderHeadersReady",async ot=>{var ft;await this._fullReader.headersReady;const{isStreamingSupported:ut,isRangeSupported:ct,contentLength:dt}=this._fullReader;return(!ut||!ct)&&(this._lastProgress&&((ft=et.onProgress)==null||ft.call(et,this._lastProgress)),this._fullReader.onProgress=St=>{var kt;(kt=et.onProgress)==null||kt.call(et,{loaded:St.loaded,total:St.total})}),{isStreamingSupported:ut,isRangeSupported:ct,contentLength:dt}}),g.on("GetRangeReader",(ot,ut)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const ct=this._networkStream.getRangeReader(ot.begin,ot.end);if(!ct){ut.close();return}ut.onPull=()=>{ct.read().then(function({value:dt,done:ft}){if(ft){ut.close();return}assert(dt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ut.enqueue(new Uint8Array(dt),1,[dt])}).catch(dt=>{ut.error(dt)})},ut.onCancel=dt=>{ct.cancel(dt),ut.ready.catch(ft=>{if(!this.destroyed)throw ft})}}),g.on("GetDoc",({pdfInfo:ot})=>{this._numPages=ot.numPages,this._htmlForXfa=ot.htmlForXfa,delete ot.htmlForXfa,et._capability.resolve(new PDFDocumentProxy(ot,this))}),g.on("DocException",ot=>{et._capability.reject(wrapReason(ot))}),g.on("PasswordRequest",ot=>{Ir(this,u0,Promise.withResolvers());try{if(!et.onPassword)throw wrapReason(ot);const ut=ct=>{ct instanceof Error?Jt(this,u0).reject(ct):Jt(this,u0).resolve({password:ct})};et.onPassword(ut,ot.code)}catch(ut){Jt(this,u0).reject(ut)}return Jt(this,u0).promise}),g.on("DataLoaded",ot=>{var ut;(ut=et.onProgress)==null||ut.call(et,{loaded:ot.length,total:ot.length}),this.downloadInfoCapability.resolve(ot)}),g.on("StartRenderPage",ot=>{if(this.destroyed)return;Jt(this,gm).get(ot.pageIndex)._startRenderPage(ot.transparency,ot.cacheKey)}),g.on("commonobj",([ot,ut,ct])=>{var dt;if(this.destroyed||this.commonObjs.has(ot))return null;switch(ut){case"Font":if("error"in ct){const Rt=ct.error;warn(`Error during font loading: ${Rt}`),this.commonObjs.resolve(ot,Rt);break}const ft=new FontInfo(ct),St=this._params.pdfBug&&((dt=globalThis.FontInspector)!=null&&dt.enabled)?(Rt,Ft)=>globalThis.FontInspector.fontAdded(Rt,Ft):null,kt=new FontFaceObject(ft,St,ct.extra,ct.charProcOperatorList);this.fontLoader.bind(kt).catch(()=>g.sendWithPromise("FontFallback",{id:ot})).finally(()=>{!kt.fontExtraProperties&&kt.data&&kt.clearData(),this.commonObjs.resolve(ot,kt)});break;case"CopyLocalImage":const{imageRef:Tt}=ct;assert(Tt,"The imageRef must be defined.");for(const Rt of Jt(this,gm).values())for(const[,Ft]of Rt.objs)if((Ft==null?void 0:Ft.ref)===Tt)return Ft.dataLen?(this.commonObjs.resolve(ot,structuredClone(Ft)),Ft.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(ot,ct);break;default:throw new Error(`Got unknown common object type ${ut}`)}return null}),g.on("obj",([ot,ut,ct,dt])=>{var St;if(this.destroyed)return;const ft=Jt(this,gm).get(ut);if(!ft.objs.has(ot)){if(ft._intentStates.size===0){(St=dt==null?void 0:dt.bitmap)==null||St.close();return}switch(ct){case"Image":case"Pattern":ft.objs.resolve(ot,dt);break;default:throw new Error(`Got unknown object type ${ct}`)}}}),g.on("DocProgress",ot=>{var ut;this.destroyed||(ut=et.onProgress)==null||ut.call(et,{loaded:ot.loaded,total:ot.total})}),g.on("FetchBinaryData",async ot=>{if(this.destroyed)throw new Error("Worker was destroyed.");const ut=this[ot.type];if(!ut)throw new Error(`${ot.type} not initialized, see the \`useWorkerFetch\` parameter.`);return ut.fetch(ot)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var ot;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:g,transfer:et}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:g,filename:((ot=this._fullReader)==null?void 0:ot.filename)??null},et).finally(()=>{this.annotationStorage.resetModified()})}getPage(g){if(!Number.isInteger(g)||g<=0||g>this._numPages)return Promise.reject(new Error("Invalid page request."));const et=g-1,ot=Jt(this,dE).get(et);if(ot)return ot;const ut=this.messageHandler.sendWithPromise("GetPage",{pageIndex:et}).then(ct=>{if(this.destroyed)throw new Error("Transport destroyed");ct.refStr&&Jt(this,fE).set(ct.refStr,g);const dt=new PDFPageProxy(et,ct,this,this._params.pdfBug);return Jt(this,gm).set(et,dt),dt});return Jt(this,dE).set(et,ut),ut}getPageIndex(g){return isRefProxy(g)?this.messageHandler.sendWithPromise("GetPageIndex",{num:g.num,gen:g.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(g,et){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:g,intent:et})}getFieldObjects(){return Qr(this,s1,qS).call(this,"GetFieldObjects")}hasJSActions(){return Qr(this,s1,qS).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(g){return typeof g!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:g})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(g,et){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:g,pageIndexesToSkip:et})}getDocJSActions(){return Qr(this,s1,qS).call(this,"GetDocJSActions")}getPageJSActions(g){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:g})}getStructTree(g){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:g})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(g){return Qr(this,s1,qS).call(this,"GetOptionalContentConfig").then(et=>new OptionalContentConfig(et,g))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const g="GetMetadata",et=Jt(this,l0).get(g);if(et)return et;const ot=this.messageHandler.sendWithPromise(g,null).then(ut=>{var ct,dt;return{info:ut[0],metadata:ut[1]?new Metadata(ut[1]):null,contentDispositionFilename:((ct=this._fullReader)==null?void 0:ct.filename)??null,contentLength:((dt=this._fullReader)==null?void 0:dt.contentLength)??null}});return Jt(this,l0).set(g,ot),ot}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(g=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const et of Jt(this,gm).values())if(!et.cleanup())throw new Error(`startCleanup: Page ${et.pageNumber} is currently rendering.`);this.commonObjs.clear(),g||this.fontLoader.clear(),Jt(this,l0).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(g){if(!isRefProxy(g))return null;const et=g.gen===0?`${g.num}R`:`${g.num}R${g.gen}`;return Jt(this,fE).get(et)??null}}l0=new WeakMap,gm=new WeakMap,dE=new WeakMap,fE=new WeakMap,u0=new WeakMap,s1=new WeakSet,qS=function(g,et=null){const ot=Jt(this,l0).get(g);if(ot)return ot;const ut=this.messageHandler.sendWithPromise(g,et);return Jt(this,l0).set(g,ut),ut};var hv;class RenderTask{constructor(g){Mr(this,hv,null);Kn(this,"onContinue",null);Kn(this,"onError",null);Ir(this,hv,g)}get promise(){return Jt(this,hv).capability.promise}cancel(g=0){Jt(this,hv).cancel(null,g)}get separateAnnots(){const{separateAnnots:g}=Jt(this,hv).operatorList;if(!g)return!1;const{annotationCanvasMap:et}=Jt(this,hv);return g.form||g.canvas&&(et==null?void 0:et.size)>0}}hv=new WeakMap;var dv,a1;const oy=class oy{constructor({callback:g,params:et,objs:ot,commonObjs:ut,annotationCanvasMap:ct,operatorList:dt,pageIndex:ft,canvasFactory:St,filterFactory:kt,useRequestAnimationFrame:Tt=!1,pdfBug:Rt=!1,pageColors:Ft=null,enableHWA:jt=!1,operationsFilter:Bt=null}){Mr(this,dv,null);this.callback=g,this.params=et,this.objs=ot,this.commonObjs=ut,this.annotationCanvasMap=ct,this.operatorListIdx=null,this.operatorList=dt,this._pageIndex=ft,this.canvasFactory=St,this.filterFactory=kt,this._pdfBug=Rt,this.pageColors=Ft,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Tt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=et.canvas,this._canvasContext=et.canvas?null:et.canvasContext,this._enableHWA=jt,this._dependencyTracker=et.dependencyTracker,this._operationsFilter=Bt}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:et}){var St,kt;if(this.cancelled)return;if(this._canvas){if(Jt(oy,a1).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Jt(oy,a1).add(this._canvas)}this._pdfBug&&((St=globalThis.StepperManager)!=null&&St.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:ot,transform:ut,background:ct,dependencyTracker:dt}=this.params,ft=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(ft,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:et},this.annotationCanvasMap,this.pageColors,dt),this.gfx.beginDrawing({transform:ut,viewport:ot,transparency:g,background:ct}),this.operatorListIdx=0,this.graphicsReady=!0,(kt=this.graphicsReadyCallback)==null||kt.call(this)}cancel(g=null,et=0){var ot,ut,ct;this.running=!1,this.cancelled=!0,(ot=this.gfx)==null||ot.endDrawing(),Jt(this,dv)&&(window.cancelAnimationFrame(Jt(this,dv)),Ir(this,dv,null)),Jt(oy,a1).delete(this._canvas),g||(g=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,et)),this.callback(g),(ct=(ut=this.task).onError)==null||ct.call(ut,g)}operatorListChanged(){var g,et;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(g=this.gfx.dependencyTracker)==null||g.growOperationsCount(this.operatorList.fnArray.length),(et=this.stepper)==null||et.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?Ir(this,dv,window.requestAnimationFrame(()=>{Ir(this,dv,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Jt(oy,a1).delete(this._canvas),this.callback())))}};dv=new WeakMap,a1=new WeakMap,Mr(oy,a1,new WeakSet);let InternalRenderTask=oy;const version="5.4.296",build="f56dc8601";var Wu,o1,pE,Zo,b2,mE,c0,E2,fv,Bp,S2,w2,BP,_2,$P,C2,VP,h0,ry,DA,R5,vm,O0;const _u=class _u{constructor({editor:g=null,uiManager:et=null}){Mr(this,w2);Mr(this,_2);Mr(this,C2);Mr(this,h0);Mr(this,DA);Mr(this,vm);Mr(this,Wu,null);Mr(this,o1,null);Mr(this,pE,void 0);Mr(this,Zo,null);Mr(this,b2,!1);Mr(this,mE,!1);Mr(this,c0,null);Mr(this,E2,void 0);Mr(this,fv,null);Mr(this,Bp,null);var ot,ut;g?(Ir(this,mE,!1),Ir(this,c0,g)):Ir(this,mE,!0),Ir(this,Bp,(g==null?void 0:g._uiManager)||et),Ir(this,E2,Jt(this,Bp)._eventBus),Ir(this,pE,((ot=g==null?void 0:g.color)==null?void 0:ot.toUpperCase())||((ut=Jt(this,Bp))==null?void 0:ut.highlightColors.values().next().value)||"#FFFF98"),Jt(_u,S2)||Ir(_u,S2,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],_u.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],_u.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],_u.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],_u.prototype._moveToPrevious],[["Home","mac+Home"],_u.prototype._moveToBeginning],[["End","mac+End"],_u.prototype._moveToEnd]]))}renderButton(){const g=Ir(this,Wu,document.createElement("button"));g.className="colorPicker",g.tabIndex="0",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),g.ariaHasPopup="true",Jt(this,c0)&&(g.ariaControls=`${Jt(this,c0).id}_colorpicker_dropdown`);const et=Jt(this,Bp)._signal;g.addEventListener("click",Qr(this,h0,ry).bind(this),{signal:et}),g.addEventListener("keydown",Qr(this,C2,VP).bind(this),{signal:et});const ot=Ir(this,o1,document.createElement("span"));return ot.className="swatch",ot.ariaHidden="true",ot.style.backgroundColor=Jt(this,pE),g.append(ot),g}renderMainDropdown(){const g=Ir(this,Zo,Qr(this,w2,BP).call(this));return g.ariaOrientation="horizontal",g.ariaLabelledBy="highlightColorPickerLabel",g}_colorSelectFromKeyboard(g){if(g.target===Jt(this,Wu)){Qr(this,h0,ry).call(this,g);return}const et=g.target.getAttribute("data-color");et&&Qr(this,_2,$P).call(this,et,g)}_moveToNext(g){var et,ot;if(!Jt(this,vm,O0)){Qr(this,h0,ry).call(this,g);return}if(g.target===Jt(this,Wu)){(et=Jt(this,Zo).firstChild)==null||et.focus();return}(ot=g.target.nextSibling)==null||ot.focus()}_moveToPrevious(g){var et,ot;if(g.target===((et=Jt(this,Zo))==null?void 0:et.firstChild)||g.target===Jt(this,Wu)){Jt(this,vm,O0)&&this._hideDropdownFromKeyboard();return}Jt(this,vm,O0)||Qr(this,h0,ry).call(this,g),(ot=g.target.previousSibling)==null||ot.focus()}_moveToBeginning(g){var et;if(!Jt(this,vm,O0)){Qr(this,h0,ry).call(this,g);return}(et=Jt(this,Zo).firstChild)==null||et.focus()}_moveToEnd(g){var et;if(!Jt(this,vm,O0)){Qr(this,h0,ry).call(this,g);return}(et=Jt(this,Zo).lastChild)==null||et.focus()}hideDropdown(){var g,et;(g=Jt(this,Zo))==null||g.classList.add("hidden"),Jt(this,Wu).ariaExpanded="false",(et=Jt(this,fv))==null||et.abort(),Ir(this,fv,null)}_hideDropdownFromKeyboard(){var g;if(!Jt(this,mE)){if(!Jt(this,vm,O0)){(g=Jt(this,c0))==null||g.unselect();return}this.hideDropdown(),Jt(this,Wu).focus({preventScroll:!0,focusVisible:Jt(this,b2)})}}updateColor(g){if(Jt(this,o1)&&(Jt(this,o1).style.backgroundColor=g),!Jt(this,Zo))return;const et=Jt(this,Bp).highlightColors.values();for(const ot of Jt(this,Zo).children)ot.ariaSelected=et.next().value===g.toUpperCase()}destroy(){var g,et;(g=Jt(this,Wu))==null||g.remove(),Ir(this,Wu,null),Ir(this,o1,null),(et=Jt(this,Zo))==null||et.remove(),Ir(this,Zo,null)}};Wu=new WeakMap,o1=new WeakMap,pE=new WeakMap,Zo=new WeakMap,b2=new WeakMap,mE=new WeakMap,c0=new WeakMap,E2=new WeakMap,fv=new WeakMap,Bp=new WeakMap,S2=new WeakMap,w2=new WeakSet,BP=function(){const g=document.createElement("div"),et=Jt(this,Bp)._signal;g.addEventListener("contextmenu",noContextMenu,{signal:et}),g.className="dropdown",g.role="listbox",g.ariaMultiSelectable="false",g.ariaOrientation="vertical",g.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),Jt(this,c0)&&(g.id=`${Jt(this,c0).id}_colorpicker_dropdown`);for(const[ot,ut]of Jt(this,Bp).highlightColors){const ct=document.createElement("button");ct.tabIndex="0",ct.role="option",ct.setAttribute("data-color",ut),ct.title=ot,ct.setAttribute("data-l10n-id",Jt(_u,S2)[ot]);const dt=document.createElement("span");ct.append(dt),dt.className="swatch",dt.style.backgroundColor=ut,ct.ariaSelected=ut===Jt(this,pE),ct.addEventListener("click",Qr(this,_2,$P).bind(this,ut),{signal:et}),g.append(ct)}return g.addEventListener("keydown",Qr(this,C2,VP).bind(this),{signal:et}),g},_2=new WeakSet,$P=function(g,et){et.stopPropagation(),Jt(this,E2).dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:g}),this.updateColor(g)},C2=new WeakSet,VP=function(g){_u._keyboardManager.exec(this,g)},h0=new WeakSet,ry=function(g){if(Jt(this,vm,O0)){this.hideDropdown();return}if(Ir(this,b2,g.detail===0),Jt(this,fv)||(Ir(this,fv,new AbortController),window.addEventListener("pointerdown",Qr(this,DA,R5).bind(this),{signal:Jt(this,Bp).combinedSignal(Jt(this,fv))})),Jt(this,Wu).ariaExpanded="true",Jt(this,Zo)){Jt(this,Zo).classList.remove("hidden");return}const et=Ir(this,Zo,Qr(this,w2,BP).call(this));Jt(this,Wu).append(et)},DA=new WeakSet,R5=function(g){var et;(et=Jt(this,Zo))!=null&&et.contains(g.target)||this.hideDropdown()},vm=new WeakSet,O0=function(){return Jt(this,Zo)&&!Jt(this,Zo).classList.contains("hidden")},Mr(_u,S2,null);let ColorPicker=_u;var ym,A2,gE,k2;const ly=class ly{constructor(g){Mr(this,ym,null);Mr(this,A2,null);Mr(this,gE,null);Ir(this,A2,g),Ir(this,gE,g._uiManager),Jt(ly,k2)||Ir(ly,k2,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(Jt(this,ym))return Jt(this,ym);const{editorType:g,colorType:et,colorValue:ot}=Jt(this,A2),ut=Ir(this,ym,document.createElement("input"));return ut.type="color",ut.value=ot||"#000000",ut.className="basicColorPicker",ut.tabIndex=0,ut.setAttribute("data-l10n-id",Jt(ly,k2)[g]),ut.addEventListener("input",()=>{Jt(this,gE).updateParams(et,ut.value)},{signal:Jt(this,gE)._signal}),ut}update(g){Jt(this,ym)&&(Jt(this,ym).value=g)}destroy(){var g;(g=Jt(this,ym))==null||g.remove(),Ir(this,ym,null)}hideDropdown(){}};ym=new WeakMap,A2=new WeakMap,gE=new WeakMap,k2=new WeakMap,Mr(ly,k2,null);let BasicColorPicker=ly;function makeColorComp(it){return Math.floor(Math.max(0,Math.min(1,it))*255).toString(16).padStart(2,"0")}function scaleAndClamp(it){return Math.max(0,Math.min(255,255*it))}class ColorConverters{static CMYK_G([g,et,ot,ut]){return["G",1-Math.min(1,.3*g+.59*ot+.11*et+ut)]}static G_CMYK([g]){return["CMYK",0,0,0,1-g]}static G_RGB([g]){return["RGB",g,g,g]}static G_rgb([g]){return g=scaleAndClamp(g),[g,g,g]}static G_HTML([g]){const et=makeColorComp(g);return`#${et}${et}${et}`}static RGB_G([g,et,ot]){return["G",.3*g+.59*et+.11*ot]}static RGB_rgb(g){return g.map(scaleAndClamp)}static RGB_HTML(g){return`#${g.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([g,et,ot,ut]){return["RGB",1-Math.min(1,g+ut),1-Math.min(1,ot+ut),1-Math.min(1,et+ut)]}static CMYK_rgb([g,et,ot,ut]){return[scaleAndClamp(1-Math.min(1,g+ut)),scaleAndClamp(1-Math.min(1,ot+ut)),scaleAndClamp(1-Math.min(1,et+ut))]}static CMYK_HTML(g){const et=this.CMYK_RGB(g).slice(1);return this.RGB_HTML(et)}static RGB_CMYK([g,et,ot]){const ut=1-g,ct=1-et,dt=1-ot,ft=Math.min(ut,ct,dt);return["CMYK",ut,ct,dt,ft]}}class BaseSVGFactory{create(g,et,ot=!1){if(g<=0||et<=0)throw new Error("Invalid SVG dimensions");const ut=this._createSVG("svg:svg");return ut.setAttribute("version","1.1"),ot||(ut.setAttribute("width",`${g}px`),ut.setAttribute("height",`${et}px`)),ut.setAttribute("preserveAspectRatio","none"),ut.setAttribute("viewBox",`0 0 ${g} ${et}`),ut}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(g){return document.createElementNS(SVG_NS,g)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(g){switch(g.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(g);case AnnotationType.TEXT:return new TextAnnotationElement(g);case AnnotationType.WIDGET:switch(g.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(g);case"Btn":return g.data.radioButton?new RadioButtonWidgetAnnotationElement(g):g.data.checkBox?new CheckboxWidgetAnnotationElement(g):new PushButtonWidgetAnnotationElement(g);case"Ch":return new ChoiceWidgetAnnotationElement(g);case"Sig":return new SignatureWidgetAnnotationElement(g)}return new WidgetAnnotationElement(g);case AnnotationType.POPUP:return new PopupAnnotationElement(g);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(g);case AnnotationType.LINE:return new LineAnnotationElement(g);case AnnotationType.SQUARE:return new SquareAnnotationElement(g);case AnnotationType.CIRCLE:return new CircleAnnotationElement(g);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(g);case AnnotationType.CARET:return new CaretAnnotationElement(g);case AnnotationType.INK:return new InkAnnotationElement(g);case AnnotationType.POLYGON:return new PolygonAnnotationElement(g);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(g);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(g);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(g);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(g);case AnnotationType.STAMP:return new StampAnnotationElement(g);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(g);default:return new AnnotationElement(g)}}}var l1,vE,bp,T2,zP;const SR=class SR{constructor(g,{isRenderable:et=!1,ignoreBorder:ot=!1,createQuadrilaterals:ut=!1}={}){Mr(this,T2);Mr(this,l1,null);Mr(this,vE,!1);Mr(this,bp,null);this.isRenderable=et,this.data=g.data,this.layer=g.layer,this.linkService=g.linkService,this.downloadManager=g.downloadManager,this.imageResourcesPath=g.imageResourcesPath,this.renderForms=g.renderForms,this.svgFactory=g.svgFactory,this.annotationStorage=g.annotationStorage,this.enableComment=g.enableComment,this.enableScripting=g.enableScripting,this.hasJSActions=g.hasJSActions,this._fieldObjects=g.fieldObjects,this.parent=g.parent,et&&(this.container=this._createContainer(ot)),ut&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:g,richText:et}){return!!(g!=null&&g.str||et!=null&&et.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return SR._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var ot;const{data:g}=this,et=(ot=this.annotationStorage)==null?void 0:ot.getEditor(g.id);return et?et.getData():g}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var ft;const g=(ft=this.annotationStorage)==null?void 0:ft.getEditor(this.data.id);if(g)return g.commentButtonPositionInPage;const{quadPoints:et,inkLists:ot,rect:ut}=this.data;let ct=-1/0,dt=-1/0;if((et==null?void 0:et.length)>=8){for(let St=0;St<et.length;St+=8)et[St+1]>dt?(dt=et[St+1],ct=et[St+2]):et[St+1]===dt&&(ct=Math.max(ct,et[St+2]));return[ct,dt]}if((ot==null?void 0:ot.length)>=1){for(const St of ot)for(let kt=0,Tt=St.length;kt<Tt;kt+=2)St[kt+1]>dt?(dt=St[kt+1],ct=St[kt]):St[kt+1]===dt&&(ct=Math.max(ct,St[kt]));if(ct!==1/0)return[ct,dt]}return ut?[ut[2],ut[3]]:null}_normalizePoint(g){const{page:{view:et},viewport:{rawDims:{pageWidth:ot,pageHeight:ut,pageX:ct,pageY:dt}}}=this.parent;return g[1]=et[3]-g[1]+et[1],g[0]=100*(g[0]-ct)/ot,g[1]=100*(g[1]-dt)/ut,g}get commentText(){var et,ot,ut;const{data:g}=this;return((ot=(et=this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${g.id}`))==null?void 0:et.popup)==null?void 0:ot.contents)||((ut=g.contentsObj)==null?void 0:ut.str)||""}set commentText(g){const{data:et}=this,ot={deleted:!g,contents:g||""};this.annotationStorage.updateEditor(et.id,{popup:ot})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${et.id}`,{id:et.id,annotationType:et.annotationType,pageIndex:this.parent.page._pageIndex,popup:ot,popupRef:et.popupRef,modificationDate:new Date}),g||this.removePopup()}removePopup(){var g,et;(et=((g=Jt(this,bp))==null?void 0:g.popup)||this.popup)==null||et.remove(),Ir(this,bp,this.popup=null)}updateEdited(g){var ct;if(!this.container)return;g.rect&&(Jt(this,l1)||Ir(this,l1,{rect:this.data.rect.slice(0)}));const{rect:et,popup:ot}=g;et&&Qr(this,T2,zP).call(this,et);let ut=((ct=Jt(this,bp))==null?void 0:ct.popup)||this.popup;!ut&&(ot!=null&&ot.text)&&(this._createPopup(ot),ut=Jt(this,bp).popup),ut&&(ut.updateEdited(g),ot!=null&&ot.deleted&&(ut.remove(),Ir(this,bp,null),this.popup=null))}resetEdited(){var g;Jt(this,l1)&&(Qr(this,T2,zP).call(this,Jt(this,l1).rect),(g=Jt(this,bp))==null||g.popup.resetEdited(),Ir(this,l1,null))}_createContainer(g){const{data:et,parent:{page:ot,viewport:ut}}=this,ct=document.createElement("section");ct.setAttribute("data-annotation-id",et.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(ct.tabIndex=0);const{style:dt}=ct;if(dt.zIndex=this.parent.zIndex,this.parent.zIndex+=2,et.alternativeText&&(ct.title=et.alternativeText),et.noRotate&&ct.classList.add("norotate"),!et.rect||this instanceof PopupAnnotationElement){const{rotation:zt}=et;return!et.hasOwnCanvas&&zt!==0&&this.setRotation(zt,ct),ct}const{width:ft,height:St}=this;if(!g&&et.borderStyle.width>0){dt.borderWidth=`${et.borderStyle.width}px`;const zt=et.borderStyle.horizontalCornerRadius,Ht=et.borderStyle.verticalCornerRadius;if(zt>0||Ht>0){const Kt=`calc(${zt}px * var(--total-scale-factor)) / calc(${Ht}px * var(--total-scale-factor))`;dt.borderRadius=Kt}else if(this instanceof RadioButtonWidgetAnnotationElement){const Kt=`calc(${ft}px * var(--total-scale-factor)) / calc(${St}px * var(--total-scale-factor))`;dt.borderRadius=Kt}switch(et.borderStyle.style){case AnnotationBorderStyleType.SOLID:dt.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:dt.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:dt.borderBottomStyle="solid";break}const Ut=et.borderColor||null;Ut?(Ir(this,vE,!0),dt.borderColor=Util$1.makeHexColor(Ut[0]|0,Ut[1]|0,Ut[2]|0)):dt.borderWidth=0}const kt=Util$1.normalizeRect([et.rect[0],ot.view[3]-et.rect[1]+ot.view[1],et.rect[2],ot.view[3]-et.rect[3]+ot.view[1]]),{pageWidth:Tt,pageHeight:Rt,pageX:Ft,pageY:jt}=ut.rawDims;dt.left=`${100*(kt[0]-Ft)/Tt}%`,dt.top=`${100*(kt[1]-jt)/Rt}%`;const{rotation:Bt}=et;return et.hasOwnCanvas||Bt===0?(dt.width=`${100*ft/Tt}%`,dt.height=`${100*St/Rt}%`):this.setRotation(Bt,ct),ct}setRotation(g,et=this.container){if(!this.data.rect)return;const{pageWidth:ot,pageHeight:ut}=this.parent.viewport.rawDims;let{width:ct,height:dt}=this;g%180!==0&&([ct,dt]=[dt,ct]),et.style.width=`${100*ct/ot}%`,et.style.height=`${100*dt/ut}%`,et.setAttribute("data-main-rotation",(360-g)%360)}get _commonActions(){const g=(et,ot,ut)=>{const ct=ut.detail[et],dt=ct[0],ft=ct.slice(1);ut.target.style[ot]=ColorConverters[`${dt}_HTML`](ft),this.annotationStorage.setValue(this.data.id,{[ot]:ColorConverters[`${dt}_rgb`](ft)})};return shadow(this,"_commonActions",{display:et=>{const{display:ot}=et.detail,ut=ot%2===1;this.container.style.visibility=ut?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ut,noPrint:ot===1||ot===2})},print:et=>{this.annotationStorage.setValue(this.data.id,{noPrint:!et.detail.print})},hidden:et=>{const{hidden:ot}=et.detail;this.container.style.visibility=ot?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:ot,noView:ot})},focus:et=>{setTimeout(()=>et.target.focus({preventScroll:!1}),0)},userName:et=>{et.target.title=et.detail.userName},readonly:et=>{et.target.disabled=et.detail.readonly},required:et=>{this._setRequired(et.target,et.detail.required)},bgColor:et=>{g("bgColor","backgroundColor",et)},fillColor:et=>{g("fillColor","backgroundColor",et)},fgColor:et=>{g("fgColor","color",et)},textColor:et=>{g("textColor","color",et)},borderColor:et=>{g("borderColor","borderColor",et)},strokeColor:et=>{g("strokeColor","borderColor",et)},rotation:et=>{const ot=et.detail.rotation;this.setRotation(ot),this.annotationStorage.setValue(this.data.id,{rotation:ot})}})}_dispatchEventFromSandbox(g,et){const ot=this._commonActions;for(const ut of Object.keys(et.detail)){const ct=g[ut]||ot[ut];ct==null||ct(et)}}_setDefaultPropertiesFromJS(g){if(!this.enableScripting)return;const et=this.annotationStorage.getRawValue(this.data.id);if(!et)return;const ot=this._commonActions;for(const[ut,ct]of Object.entries(et)){const dt=ot[ut];if(dt){const ft={detail:{[ut]:ct},target:g};dt(ft),delete et[ut]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:g}=this.data;if(!g)return;const[et,ot,ut,ct]=this.data.rect.map(zt=>Math.fround(zt));if(g.length===8){const[zt,Ht,Ut,Kt]=g.subarray(2,6);if(ut===zt&&ct===Ht&&et===Ut&&ot===Kt)return}const{style:dt}=this.container;let ft;if(Jt(this,vE)){const{borderColor:zt,borderWidth:Ht}=dt;dt.borderWidth=0,ft=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${zt}" stroke-width="${Ht}">`],this.container.classList.add("hasBorder")}const St=ut-et,kt=ct-ot,{svgFactory:Tt}=this,Rt=Tt.createElement("svg");Rt.classList.add("quadrilateralsContainer"),Rt.setAttribute("width",0),Rt.setAttribute("height",0),Rt.role="none";const Ft=Tt.createElement("defs");Rt.append(Ft);const jt=Tt.createElement("clipPath"),Bt=`clippath_${this.data.id}`;jt.setAttribute("id",Bt),jt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(jt);for(let zt=2,Ht=g.length;zt<Ht;zt+=8){const Ut=g[zt],Kt=g[zt+1],Yt=g[zt+2],er=g[zt+3],ar=Tt.createElement("rect"),ir=(Yt-et)/St,lr=(ct-Kt)/kt,cr=(Ut-Yt)/St,vr=(Kt-er)/kt;ar.setAttribute("x",ir),ar.setAttribute("y",lr),ar.setAttribute("width",cr),ar.setAttribute("height",vr),jt.append(ar),ft==null||ft.push(`<rect vector-effect="non-scaling-stroke" x="${ir}" y="${lr}" width="${cr}" height="${vr}"/>`)}Jt(this,vE)&&(ft.push("</g></svg>')"),dt.backgroundImage=ft.join("")),this.container.append(Rt),this.container.style.clipPath=`url(#${Bt})`}_createPopup(g=null){const{data:et}=this;let ot,ut;g?(ot={str:g.text},ut=g.date):(ot=et.contentsObj,ut=et.modificationDate);const ct=Ir(this,bp,new PopupAnnotationElement({data:{color:et.color,titleObj:et.titleObj,modificationDate:ut,contentsObj:ot,richText:et.richText,parentRect:et.rect,borderStyle:0,id:`popup_${et.id}`,rotation:et.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(ct.render())}get hasPopupElement(){return!!(Jt(this,bp)||this.popup||this.data.popupRef)}get extraPopupElement(){return Jt(this,bp)}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(g,et=null){const ot=[];if(this._fieldObjects){const ut=this._fieldObjects[g];if(ut)for(const{page:ct,id:dt,exportValues:ft}of ut){if(ct===-1||dt===et)continue;const St=typeof ft=="string"?ft:null,kt=document.querySelector(`[data-element-id="${dt}"]`);if(kt&&!GetElementsByNameSet.has(kt)){warn(`_getElementsByName - element not allowed: ${dt}`);continue}ot.push({id:dt,exportValue:St,domElement:kt})}return ot}for(const ut of document.getElementsByName(g)){const{exportValue:ct}=ut,dt=ut.getAttribute("data-element-id");dt!==et&&GetElementsByNameSet.has(ut)&&ot.push({id:dt,exportValue:ct,domElement:ut})}return ot}show(){var g;this.container&&(this.container.hidden=!1),(g=this.popup)==null||g.maybeShow()}hide(){var g;this.container&&(this.container.hidden=!0),(g=this.popup)==null||g.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const g=this.getElementsToTriggerPopup();if(Array.isArray(g))for(const et of g)et.classList.add("highlightArea");else g.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:g,data:{id:et}}=this;this.container.addEventListener("dblclick",()=>{var ot;(ot=this.linkService.eventBus)==null||ot.dispatch("switchannotationeditormode",{source:this,mode:g,editId:et,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};l1=new WeakMap,vE=new WeakMap,bp=new WeakMap,T2=new WeakSet,zP=function(g){const{container:{style:et},data:{rect:ot,rotation:ut},parent:{viewport:{rawDims:{pageWidth:ct,pageHeight:dt,pageX:ft,pageY:St}}}}=this;ot==null||ot.splice(0,4,...g),et.left=`${100*(g[0]-ft)/ct}%`,et.top=`${100*(dt-g[3]+St)/dt}%`,ut===0?(et.width=`${100*(g[2]-g[0])/ct}%`,et.height=`${100*(g[3]-g[1])/dt}%`):this.setRotation(ut)};let AnnotationElement=SR;class EditorAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.editor=g.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:g}=this;g.hasComment&&(this._createPopup(g.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(g){this.editor.comment=g,g||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var d0,ny,MA,N5,FA,D5;class LinkAnnotationElement extends AnnotationElement{constructor(et,ot=null){super(et,{isRenderable:!0,ignoreBorder:!!(ot!=null&&ot.ignoreBorder),createQuadrilaterals:!0});Mr(this,d0);Mr(this,MA);Mr(this,FA);this.isTooltipOnly=et.data.isTooltipOnly}render(){const{data:et,linkService:ot}=this,ut=document.createElement("a");ut.setAttribute("data-element-id",et.id);let ct=!1;return et.url?(ot.addLinkAttributes(ut,et.url,et.newWindow),ct=!0):et.action?(this._bindNamedAction(ut,et.action,et.overlaidText),ct=!0):et.attachment?(Qr(this,MA,N5).call(this,ut,et.attachment,et.overlaidText,et.attachmentDest),ct=!0):et.setOCGState?(Qr(this,FA,D5).call(this,ut,et.setOCGState,et.overlaidText),ct=!0):et.dest?(this._bindLink(ut,et.dest,et.overlaidText),ct=!0):(et.actions&&(et.actions.Action||et.actions["Mouse Up"]||et.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ut,et),ct=!0),et.resetForm?(this._bindResetFormAction(ut,et.resetForm),ct=!0):this.isTooltipOnly&&!ct&&(this._bindLink(ut,""),ct=!0)),this.container.classList.add("linkAnnotation"),ct&&this.container.append(ut),this.container}_bindLink(et,ot,ut=""){et.href=this.linkService.getDestinationHash(ot),et.onclick=()=>(ot&&this.linkService.goToDestination(ot),!1),(ot||ot==="")&&Qr(this,d0,ny).call(this),ut&&(et.title=ut)}_bindNamedAction(et,ot,ut=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeNamedAction(ot),!1),ut&&(et.title=ut),Qr(this,d0,ny).call(this)}_bindJSAction(et,ot){et.href=this.linkService.getAnchorUrl("");const ut=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ct of Object.keys(ot.actions)){const dt=ut.get(ct);dt&&(et[dt]=()=>{var ft;return(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ot.id,name:ct}}),!1})}ot.overlaidText&&(et.title=ot.overlaidText),et.onclick||(et.onclick=()=>!1),Qr(this,d0,ny).call(this)}_bindResetFormAction(et,ot){const ut=et.onclick;if(ut||(et.href=this.linkService.getAnchorUrl("")),Qr(this,d0,ny).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ut||(et.onclick=()=>!1);return}et.onclick=()=>{var Rt;ut==null||ut();const{fields:ct,refs:dt,include:ft}=ot,St=[];if(ct.length!==0||dt.length!==0){const Ft=new Set(dt);for(const jt of ct){const Bt=this._fieldObjects[jt]||[];for(const{id:zt}of Bt)Ft.add(zt)}for(const jt of Object.values(this._fieldObjects))for(const Bt of jt)Ft.has(Bt.id)===ft&&St.push(Bt)}else for(const Ft of Object.values(this._fieldObjects))St.push(...Ft);const kt=this.annotationStorage,Tt=[];for(const Ft of St){const{id:jt}=Ft;switch(Tt.push(jt),Ft.type){case"text":{const zt=Ft.defaultValue||"";kt.setValue(jt,{value:zt});break}case"checkbox":case"radiobutton":{const zt=Ft.defaultValue===Ft.exportValues;kt.setValue(jt,{value:zt});break}case"combobox":case"listbox":{const zt=Ft.defaultValue||"";kt.setValue(jt,{value:zt});break}default:continue}const Bt=document.querySelector(`[data-element-id="${jt}"]`);if(Bt){if(!GetElementsByNameSet.has(Bt)){warn(`_bindResetFormAction - element not allowed: ${jt}`);continue}}else continue;Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Tt,name:"ResetForm"}})),!1}}}d0=new WeakSet,ny=function(){this.container.setAttribute("data-internal-link","")},MA=new WeakSet,N5=function(et,ot,ut="",ct=null){et.href=this.linkService.getAnchorUrl(""),ot.description?et.title=ot.description:ut&&(et.title=ut),et.onclick=()=>{var dt;return(dt=this.downloadManager)==null||dt.openOrDownloadData(ot.content,ot.filename,ct),!1},Qr(this,d0,ny).call(this)},FA=new WeakSet,D5=function(et,ot,ut=""){et.href=this.linkService.getAnchorUrl(""),et.onclick=()=>(this.linkService.executeSetOCGState(ot),!1),ut&&(et.title=ut),Qr(this,d0,ny).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const g=document.createElement("img");return g.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",g.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),g.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(g),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(g){var et;this.data.hasOwnCanvas&&(((et=g.previousSibling)==null?void 0:et.nodeName)==="CANVAS"&&(g.previousSibling.hidden=!0),g.hidden=!1)}_getKeyModifier(g){return util_FeatureTest.platform.isMac?g.metaKey:g.ctrlKey}_setEventListener(g,et,ot,ut,ct){ot.includes("mouse")?g.addEventListener(ot,dt=>{var ft;(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ut,value:ct(dt),shift:dt.shiftKey,modifier:this._getKeyModifier(dt)}})}):g.addEventListener(ot,dt=>{var ft;if(ot==="blur"){if(!et.focused||!dt.relatedTarget)return;et.focused=!1}else if(ot==="focus"){if(et.focused)return;et.focused=!0}ct&&((ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ut,value:ct(dt)}}))})}_setEventListeners(g,et,ot,ut){var ct,dt,ft;for(const[St,kt]of ot)(kt==="Action"||(ct=this.data.actions)!=null&&ct[kt])&&((kt==="Focus"||kt==="Blur")&&(et||(et={focused:!1})),this._setEventListener(g,et,St,kt,ut),kt==="Focus"&&!((dt=this.data.actions)!=null&&dt.Blur)?this._setEventListener(g,et,"blur","Blur",null):kt==="Blur"&&!((ft=this.data.actions)!=null&&ft.Focus)&&this._setEventListener(g,et,"focus","Focus",null))}_setBackgroundColor(g){const et=this.data.backgroundColor||null;g.style.backgroundColor=et===null?"transparent":Util$1.makeHexColor(et[0],et[1],et[2])}_setTextStyle(g){const et=["left","center","right"],{fontColor:ot}=this.data.defaultAppearanceData,ut=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,ct=g.style;let dt;const ft=2,St=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft),Tt=Math.round(kt/(LINE_FACTOR*ut))||1,Rt=kt/Tt;dt=Math.min(ut,St(Rt/LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-ft);dt=Math.min(ut,St(kt/LINE_FACTOR))}ct.fontSize=`calc(${dt}px * var(--total-scale-factor))`,ct.color=Util$1.makeHexColor(ot[0],ot[1],ot[2]),this.data.textAlignment!==null&&(ct.textAlign=et[this.data.textAlignment])}_setRequired(g,et){et?g.setAttribute("required",!0):g.removeAttribute("required"),g.setAttribute("aria-required",et)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){const et=g.renderForms||g.data.hasOwnCanvas||!g.data.hasAppearance&&!!g.data.fieldValue;super(g,{isRenderable:et})}setPropertyOnSiblings(g,et,ot,ut){const ct=this.annotationStorage;for(const dt of this._getElementsByName(g.name,g.id))dt.domElement&&(dt.domElement[et]=ot),ct.setValue(dt.id,{[ut]:ot})}render(){var ut,ct;const g=this.annotationStorage,et=this.data.id;this.container.classList.add("textWidgetAnnotation");let ot=null;if(this.renderForms){const dt=g.getValue(et,{value:this.data.fieldValue});let ft=dt.value||"";const St=g.getValue(et,{charLimit:this.data.maxLen}).charLimit;St&&ft.length>St&&(ft=ft.slice(0,St));let kt=dt.formattedValue||((ut=this.data.textContent)==null?void 0:ut.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Tt={userValue:ft,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(ot=document.createElement("textarea"),ot.textContent=kt??ft,this.data.doNotScroll&&(ot.style.overflowY="hidden")):(ot=document.createElement("input"),ot.type=this.data.password?"password":"text",ot.setAttribute("value",kt??ft),this.data.doNotScroll&&(ot.style.overflowX="hidden")),this.data.hasOwnCanvas&&(ot.hidden=!0),GetElementsByNameSet.add(ot),ot.setAttribute("data-element-id",et),ot.disabled=this.data.readOnly,ot.name=this.data.fieldName,ot.tabIndex=0;const{datetimeFormat:Rt,datetimeType:Ft,timeStep:jt}=this.data,Bt=!!Ft&&this.enableScripting;Rt&&(ot.title=Rt),this._setRequired(ot,this.data.required),St&&(ot.maxLength=St),ot.addEventListener("input",Ht=>{g.setValue(et,{value:Ht.target.value}),this.setPropertyOnSiblings(ot,"value",Ht.target.value,"value"),Tt.formattedValue=null}),ot.addEventListener("resetform",Ht=>{const Ut=this.data.defaultFieldValue??"";ot.value=Tt.userValue=Ut,Tt.formattedValue=null});let zt=Ht=>{const{formattedValue:Ut}=Tt;Ut!=null&&(Ht.target.value=Ut),Ht.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ot.addEventListener("focus",Ut=>{var Yt;if(Tt.focused)return;const{target:Kt}=Ut;if(Bt&&(Kt.type=Ft,jt&&(Kt.step=jt)),Tt.userValue){const er=Tt.userValue;if(Bt)if(Ft==="time"){const ar=new Date(er),ir=[ar.getHours(),ar.getMinutes(),ar.getSeconds()];Kt.value=ir.map(lr=>lr.toString().padStart(2,"0")).join(":")}else Kt.value=new Date(er-TIMEZONE_OFFSET).toISOString().split(Ft==="date"?"T":".",1)[0];else Kt.value=er}Tt.lastCommittedValue=Kt.value,Tt.commitKey=1,(Yt=this.data.actions)!=null&&Yt.Focus||(Tt.focused=!0)}),ot.addEventListener("updatefromsandbox",Ut=>{this.showElementAndHideCanvas(Ut.target);const Kt={value(Yt){Tt.userValue=Yt.detail.value??"",Bt||g.setValue(et,{value:Tt.userValue.toString()}),Yt.target.value=Tt.userValue},formattedValue(Yt){const{formattedValue:er}=Yt.detail;Tt.formattedValue=er,er!=null&&Yt.target!==document.activeElement&&(Yt.target.value=er);const ar={formattedValue:er};Bt&&(ar.value=er),g.setValue(et,ar)},selRange(Yt){Yt.target.setSelectionRange(...Yt.detail.selRange)},charLimit:Yt=>{var lr;const{charLimit:er}=Yt.detail,{target:ar}=Yt;if(er===0){ar.removeAttribute("maxLength");return}ar.setAttribute("maxLength",er);let ir=Tt.userValue;!ir||ir.length<=er||(ir=ir.slice(0,er),ar.value=Tt.userValue=ir,g.setValue(et,{value:ir}),(lr=this.linkService.eventBus)==null||lr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:ir,willCommit:!0,commitKey:1,selStart:ar.selectionStart,selEnd:ar.selectionEnd}}))}};this._dispatchEventFromSandbox(Kt,Ut)}),ot.addEventListener("keydown",Ut=>{var er;Tt.commitKey=1;let Kt=-1;if(Ut.key==="Escape"?Kt=0:Ut.key==="Enter"&&!this.data.multiLine?Kt=2:Ut.key==="Tab"&&(Tt.commitKey=3),Kt===-1)return;const{value:Yt}=Ut.target;Tt.lastCommittedValue!==Yt&&(Tt.lastCommittedValue=Yt,Tt.userValue=Yt,(er=this.linkService.eventBus)==null||er.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Kt,selStart:Ut.target.selectionStart,selEnd:Ut.target.selectionEnd}}))});const Ht=zt;zt=null,ot.addEventListener("blur",Ut=>{var er,ar;if(!Tt.focused||!Ut.relatedTarget)return;(er=this.data.actions)!=null&&er.Blur||(Tt.focused=!1);const{target:Kt}=Ut;let{value:Yt}=Kt;if(Bt){if(Yt&&Ft==="time"){const ir=Yt.split(":").map(lr=>parseInt(lr,10));Yt=new Date(2e3,0,1,ir[0],ir[1],ir[2]||0).valueOf(),Kt.step=""}else Yt.includes("T")||(Yt=`${Yt}T00:00`),Yt=new Date(Yt).valueOf();Kt.type="text"}Tt.userValue=Yt,Tt.lastCommittedValue!==Yt&&((ar=this.linkService.eventBus)==null||ar.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Tt.commitKey,selStart:Ut.target.selectionStart,selEnd:Ut.target.selectionEnd}})),Ht(Ut)}),(ct=this.data.actions)!=null&&ct.Keystroke&&ot.addEventListener("beforeinput",Ut=>{var vr;Tt.lastCommittedValue=null;const{data:Kt,target:Yt}=Ut,{value:er,selectionStart:ar,selectionEnd:ir}=Yt;let lr=ar,cr=ir;switch(Ut.inputType){case"deleteWordBackward":{const xr=er.substring(0,ar).match(/\w*[^\w]*$/);xr&&(lr-=xr[0].length);break}case"deleteWordForward":{const xr=er.substring(ar).match(/^[^\w]*\w*/);xr&&(cr+=xr[0].length);break}case"deleteContentBackward":ar===ir&&(lr-=1);break;case"deleteContentForward":ar===ir&&(cr+=1);break}Ut.preventDefault(),(vr=this.linkService.eventBus)==null||vr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:er,change:Kt||"",willCommit:!1,selStart:lr,selEnd:cr}})}),this._setEventListeners(ot,Tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ut=>Ut.target.value)}if(zt&&ot.addEventListener("blur",zt),this.data.comb){const Ut=(this.data.rect[2]-this.data.rect[0])/St;ot.classList.add("comb"),ot.style.letterSpacing=`calc(${Ut}px * var(--total-scale-factor) - 1ch)`}}else ot=document.createElement("div"),ot.textContent=this.data.fieldValue,ot.style.verticalAlign="middle",ot.style.display="table-cell",this.data.hasOwnCanvas&&(ot.hidden=!0);return this._setTextStyle(ot),this._setBackgroundColor(ot),this._setDefaultPropertiesFromJS(ot),this.container.append(ot),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:!!g.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){const g=this.annotationStorage,et=this.data,ot=et.id;let ut=g.getValue(ot,{value:et.exportValue===et.fieldValue}).value;typeof ut=="string"&&(ut=ut!=="Off",g.setValue(ot,{value:ut})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ct=document.createElement("input");return GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",ot),ct.disabled=et.readOnly,this._setRequired(ct,this.data.required),ct.type="checkbox",ct.name=et.fieldName,ut&&ct.setAttribute("checked",!0),ct.setAttribute("exportValue",et.exportValue),ct.tabIndex=0,ct.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot)){const Tt=St&&kt.exportValue===et.exportValue;kt.domElement&&(kt.domElement.checked=Tt),g.setValue(kt.id,{value:Tt})}g.setValue(ot,{value:St})}),ct.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue||"Off";dt.target.checked=ft===et.exportValue}),this.enableScripting&&this.hasJSActions&&(ct.addEventListener("updatefromsandbox",dt=>{const ft={value(St){St.target.checked=St.detail.value!=="Off",g.setValue(ot,{value:St.target.checked})}};this._dispatchEventFromSandbox(ft,dt)}),this._setEventListeners(ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dt=>dt.target.checked)),this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const g=this.annotationStorage,et=this.data,ot=et.id;let ut=g.getValue(ot,{value:et.fieldValue===et.buttonValue}).value;if(typeof ut=="string"&&(ut=ut!==et.buttonValue,g.setValue(ot,{value:ut})),ut)for(const dt of this._getElementsByName(et.fieldName,ot))g.setValue(dt.id,{value:!1});const ct=document.createElement("input");if(GetElementsByNameSet.add(ct),ct.setAttribute("data-element-id",ot),ct.disabled=et.readOnly,this._setRequired(ct,this.data.required),ct.type="radio",ct.name=et.fieldName,ut&&ct.setAttribute("checked",!0),ct.tabIndex=0,ct.addEventListener("change",dt=>{const{name:ft,checked:St}=dt.target;for(const kt of this._getElementsByName(ft,ot))g.setValue(kt.id,{value:!1});g.setValue(ot,{value:St})}),ct.addEventListener("resetform",dt=>{const ft=et.defaultFieldValue;dt.target.checked=ft!=null&&ft===et.buttonValue}),this.enableScripting&&this.hasJSActions){const dt=et.buttonValue;ct.addEventListener("updatefromsandbox",ft=>{const St={value:kt=>{const Tt=dt===kt.detail.value;for(const Rt of this._getElementsByName(kt.target.name)){const Ft=Tt&&Rt.id===ot;Rt.domElement&&(Rt.domElement.checked=Ft),g.setValue(Rt.id,{value:Ft})}}};this._dispatchEventFromSandbox(St,ft)}),this._setEventListeners(ct,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ft=>ft.target.checked)}return this._setBackgroundColor(ct),this._setDefaultPropertiesFromJS(ct),this.container.append(ct),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(g){super(g,{ignoreBorder:g.data.hasAppearance})}render(){const g=super.render();g.classList.add("buttonWidgetAnnotation","pushButton");const et=g.lastChild;return this.enableScripting&&this.hasJSActions&&et&&(this._setDefaultPropertiesFromJS(et),et.addEventListener("updatefromsandbox",ot=>{this._dispatchEventFromSandbox({},ot)})),g}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(g){super(g,{isRenderable:g.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const g=this.annotationStorage,et=this.data.id,ot=g.getValue(et,{value:this.data.fieldValue}),ut=document.createElement("select");GetElementsByNameSet.add(ut),ut.setAttribute("data-element-id",et),ut.disabled=this.data.readOnly,this._setRequired(ut,this.data.required),ut.name=this.data.fieldName,ut.tabIndex=0;let ct=this.data.combo&&this.data.options.length>0;this.data.combo||(ut.size=this.data.options.length,this.data.multiSelect&&(ut.multiple=!0)),ut.addEventListener("resetform",Tt=>{const Rt=this.data.defaultFieldValue;for(const Ft of ut.options)Ft.selected=Ft.value===Rt});for(const Tt of this.data.options){const Rt=document.createElement("option");Rt.textContent=Tt.displayValue,Rt.value=Tt.exportValue,ot.value.includes(Tt.exportValue)&&(Rt.setAttribute("selected",!0),ct=!1),ut.append(Rt)}let dt=null;if(ct){const Tt=document.createElement("option");Tt.value=" ",Tt.setAttribute("hidden",!0),Tt.setAttribute("selected",!0),ut.prepend(Tt),dt=()=>{Tt.remove(),ut.removeEventListener("input",dt),dt=null},ut.addEventListener("input",dt)}const ft=Tt=>{const Rt=Tt?"value":"textContent",{options:Ft,multiple:jt}=ut;return jt?Array.prototype.filter.call(Ft,Bt=>Bt.selected).map(Bt=>Bt[Rt]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][Rt]};let St=ft(!1);const kt=Tt=>{const Rt=Tt.target.options;return Array.prototype.map.call(Rt,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(ut.addEventListener("updatefromsandbox",Tt=>{const Rt={value(Ft){dt==null||dt();const jt=Ft.detail.value,Bt=new Set(Array.isArray(jt)?jt:[jt]);for(const zt of ut.options)zt.selected=Bt.has(zt.value);g.setValue(et,{value:ft(!0)}),St=ft(!1)},multipleSelection(Ft){ut.multiple=!0},remove(Ft){const jt=ut.options,Bt=Ft.detail.remove;jt[Bt].selected=!1,ut.remove(Bt),jt.length>0&&Array.prototype.findIndex.call(jt,Ht=>Ht.selected)===-1&&(jt[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(Ft)}),St=ft(!1)},clear(Ft){for(;ut.length!==0;)ut.remove(0);g.setValue(et,{value:null,items:[]}),St=ft(!1)},insert(Ft){const{index:jt,displayValue:Bt,exportValue:zt}=Ft.detail.insert,Ht=ut.children[jt],Ut=document.createElement("option");Ut.textContent=Bt,Ut.value=zt,Ht?Ht.before(Ut):ut.append(Ut),g.setValue(et,{value:ft(!0),items:kt(Ft)}),St=ft(!1)},items(Ft){const{items:jt}=Ft.detail;for(;ut.length!==0;)ut.remove(0);for(const Bt of jt){const{displayValue:zt,exportValue:Ht}=Bt,Ut=document.createElement("option");Ut.textContent=zt,Ut.value=Ht,ut.append(Ut)}ut.options.length>0&&(ut.options[0].selected=!0),g.setValue(et,{value:ft(!0),items:kt(Ft)}),St=ft(!1)},indices(Ft){const jt=new Set(Ft.detail.indices);for(const Bt of Ft.target.options)Bt.selected=jt.has(Bt.index);g.setValue(et,{value:ft(!0)}),St=ft(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(Rt,Tt)}),ut.addEventListener("input",Tt=>{var jt;const Rt=ft(!0),Ft=ft(!1);g.setValue(et,{value:Rt}),Tt.preventDefault(),(jt=this.linkService.eventBus)==null||jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:et,name:"Keystroke",value:St,change:Ft,changeEx:Rt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ut,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Tt=>Tt.target.value)):ut.addEventListener("input",function(Tt){g.setValue(et,{value:ft(!0)})}),this.data.combo&&this._setTextStyle(ut),this._setBackgroundColor(ut),this._setDefaultPropertiesFromJS(ut),this.container.append(ut),this.container}}var P2,HP;class PopupAnnotationElement extends AnnotationElement{constructor(et){const{data:ot,elements:ut,parent:ct}=et,dt=!!ct._commentManager;super(et,{isRenderable:!dt&&AnnotationElement._hasPopupData(ot)});Mr(this,P2);if(this.elements=ut,dt&&AnnotationElement._hasPopupData(ot)){const ft=this.popup=Qr(this,P2,HP).call(this);for(const St of ut)St.popup=ft}else this.popup=null}render(){const{container:et}=this;et.classList.add("popupAnnotation"),et.role="comment";const ot=this.popup=Qr(this,P2,HP).call(this),ut=[];for(const ct of this.elements)ct.popup=ot,ct.container.ariaHasPopup="dialog",ut.push(ct.data.id),ct.addHighlightArea();return this.container.setAttribute("aria-controls",ut.map(ct=>`${AnnotationPrefix}${ct}`).join(",")),this.container}}P2=new WeakSet,HP=function(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var qu,pv,OA,IA,yE,xE,Fo,xm,mv,u1,bE,EE,bm,Ku,f0,p0,Sl,m0,gv,R2,g0,SE,c1,vv,Ql,yv,wE,xC,N2,GP,D2,WP,M2,qP,_E,bC,F2,KP,LA,M5,jA,F5,BA,O5,$A,I5,CE,EC,AE,SC,O2,XP;class PopupElement{constructor({container:g,color:et,elements:ot,titleObj:ut,modificationDate:ct,contentsObj:dt,richText:ft,parent:St,rect:kt,parentRect:Tt,open:Rt,commentManager:Ft=null}){Mr(this,wE);Mr(this,N2);Mr(this,D2);Mr(this,M2);Mr(this,_E);Mr(this,F2);Mr(this,LA);Mr(this,jA);Mr(this,BA);Mr(this,$A);Mr(this,CE);Mr(this,AE);Mr(this,O2);Mr(this,qu,null);Mr(this,pv,Qr(this,BA,O5).bind(this));Mr(this,OA,Qr(this,O2,XP).bind(this));Mr(this,IA,Qr(this,AE,SC).bind(this));Mr(this,yE,Qr(this,CE,EC).bind(this));Mr(this,xE,null);Mr(this,Fo,null);Mr(this,xm,null);Mr(this,mv,null);Mr(this,u1,null);Mr(this,bE,null);Mr(this,EE,null);Mr(this,bm,!1);Mr(this,Ku,null);Mr(this,f0,null);Mr(this,p0,null);Mr(this,Sl,null);Mr(this,m0,null);Mr(this,gv,null);Mr(this,R2,null);Mr(this,g0,null);Mr(this,SE,null);Mr(this,c1,null);Mr(this,vv,!1);Mr(this,Ql,null);Mr(this,yv,null);Ir(this,Fo,g),Ir(this,SE,ut),Ir(this,xm,dt),Ir(this,g0,ft),Ir(this,bE,St),Ir(this,xE,et),Ir(this,R2,kt),Ir(this,EE,Tt),Ir(this,u1,ot),Ir(this,qu,Ft),Ir(this,Ql,ot[0]),Ir(this,mv,PDFDateString.toDateObject(ct)),this.trigger=ot.flatMap(jt=>jt.getElementsToTriggerPopup()),Ft?this.renderCommentButton():(Qr(this,wE,xC).call(this),Jt(this,Fo).hidden=!0,Rt&&Qr(this,CE,EC).call(this))}renderCommentButton(){if(Jt(this,Sl)||(Jt(this,m0)||Qr(this,N2,GP).call(this),!Jt(this,m0)))return;const{signal:g}=Ir(this,f0,new AbortController),et=!!Jt(this,Ql).extraPopupElement,ot=()=>{Jt(this,qu).toggleCommentPopup(this,!0,void 0,!et)},ut=()=>{Jt(this,qu).toggleCommentPopup(this,!1,!0,!et)},ct=()=>{Jt(this,qu).toggleCommentPopup(this,!1,!1)};if(et){Ir(this,Sl,Jt(this,Ql).container);for(const dt of this.trigger)dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.addEventListener("keydown",Jt(this,pv),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ut,{signal:g}),dt.addEventListener("pointerleave",ct,{signal:g}),dt.classList.add("popupTriggerArea")}else{const dt=Ir(this,Sl,document.createElement("button"));dt.className="annotationCommentButton";const ft=Jt(this,Ql).container;dt.style.zIndex=ft.style.zIndex+1,dt.tabIndex=0,dt.ariaHasPopup="dialog",dt.ariaControls="commentPopup",dt.setAttribute("data-l10n-id","pdfjs-show-comment-button"),Qr(this,M2,qP).call(this),Qr(this,D2,WP).call(this),dt.addEventListener("keydown",Jt(this,pv),{signal:g}),dt.addEventListener("click",ot,{signal:g}),dt.addEventListener("pointerenter",ut,{signal:g}),dt.addEventListener("pointerleave",ct,{signal:g}),ft.after(dt)}}get commentButtonColor(){const{color:g,opacity:et}=Jt(this,Ql).commentData;return g?Jt(this,bE)._commentManager.makeCommentColor(g,et):null}focusCommentButton(){setTimeout(()=>{var g;(g=Jt(this,Sl))==null||g.focus()},0)}getData(){const{richText:g,color:et,opacity:ot,creationDate:ut,modificationDate:ct}=Jt(this,Ql).commentData;return{contentsObj:{str:this.comment},richText:g,color:et,opacity:ot,creationDate:ut,modificationDate:ct}}get elementBeforePopup(){return Jt(this,Sl)}get comment(){return Jt(this,yv)||Ir(this,yv,Jt(this,Ql).commentText),Jt(this,yv)}set comment(g){g!==this.comment&&(Jt(this,Ql).commentText=Ir(this,yv,g))}get parentBoundingClientRect(){return Jt(this,Ql).layer.getBoundingClientRect()}setCommentButtonStates({selected:g,hasPopup:et}){Jt(this,Sl)&&(Jt(this,Sl).classList.toggle("selected",g),Jt(this,Sl).ariaExpanded=et)}setSelectedCommentButton(g){Jt(this,Sl).classList.toggle("selected",g)}get commentPopupPosition(){if(Jt(this,gv))return Jt(this,gv);const{x:g,y:et,height:ot}=Jt(this,Sl).getBoundingClientRect(),{x:ut,y:ct,width:dt,height:ft}=Jt(this,Ql).layer.getBoundingClientRect();return[(g-ut)/dt,(et+ot-ct)/ft]}set commentPopupPosition(g){Ir(this,gv,g)}hasDefaultPopupPosition(){return Jt(this,gv)===null}get commentButtonPosition(){return Jt(this,m0)}get commentButtonWidth(){return Jt(this,Sl).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(g){const[et,ot]=Jt(this,gv)||this.commentButtonPosition.map(kt=>kt/100),ut=this.parentBoundingClientRect,{x:ct,y:dt,width:ft,height:St}=ut;Jt(this,qu).showDialog(null,this,ct+et*ft,dt+ot*St,{...g,parentDimensions:ut})}render(){var ot,ut;if(Jt(this,Ku))return;const g=Ir(this,Ku,document.createElement("div"));if(g.className="popup",Jt(this,xE)){const ct=g.style.outlineColor=Util$1.makeHexColor(...Jt(this,xE));g.style.backgroundColor=`color-mix(in srgb, ${ct} 30%, white)`}const et=document.createElement("span");if(et.className="header",(ot=Jt(this,SE))!=null&&ot.str){const ct=document.createElement("span");ct.className="title",et.append(ct),{dir:ct.dir,str:ct.textContent}=Jt(this,SE)}if(g.append(et),Jt(this,mv)){const ct=document.createElement("time");ct.className="popupDate",ct.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),ct.setAttribute("data-l10n-args",JSON.stringify({dateObj:Jt(this,mv).valueOf()})),ct.dateTime=Jt(this,mv).toISOString(),et.append(ct)}renderRichText({html:Jt(this,_E,bC)||Jt(this,xm).str,dir:(ut=Jt(this,xm))==null?void 0:ut.dir,className:"popupContent"},g),Jt(this,Fo).append(g)}updateEdited({rect:g,popup:et,deleted:ot}){var ut;if(Jt(this,qu)){ot?(this.remove(),Ir(this,yv,null)):et&&(et.deleted?this.remove():(Qr(this,M2,qP).call(this),Ir(this,yv,et.text))),g&&(Ir(this,m0,null),Qr(this,N2,GP).call(this),Qr(this,D2,WP).call(this));return}if(ot||et!=null&&et.deleted){this.remove();return}Qr(this,wE,xC).call(this),Jt(this,c1)||Ir(this,c1,{contentsObj:Jt(this,xm),richText:Jt(this,g0)}),g&&Ir(this,p0,null),et&&et.text&&(Ir(this,g0,Qr(this,jA,F5).call(this,et.text)),Ir(this,mv,PDFDateString.toDateObject(et.date)),Ir(this,xm,null)),(ut=Jt(this,Ku))==null||ut.remove(),Ir(this,Ku,null)}resetEdited(){var g;Jt(this,c1)&&({contentsObj:Ko(this,xm)._,richText:Ko(this,g0)._}=Jt(this,c1),Ir(this,c1,null),(g=Jt(this,Ku))==null||g.remove(),Ir(this,Ku,null),Ir(this,p0,null))}remove(){var g,et,ot;if((g=Jt(this,f0))==null||g.abort(),Ir(this,f0,null),(et=Jt(this,Ku))==null||et.remove(),Ir(this,Ku,null),Ir(this,vv,!1),Ir(this,bm,!1),(ot=Jt(this,Sl))==null||ot.remove(),Ir(this,Sl,null),this.trigger)for(const ut of this.trigger)ut.classList.remove("popupTriggerArea")}forceHide(){Ir(this,vv,this.isVisible),Jt(this,vv)&&(Jt(this,Fo).hidden=!0)}maybeShow(){Jt(this,qu)||(Qr(this,wE,xC).call(this),Jt(this,vv)&&(Jt(this,Ku)||Qr(this,AE,SC).call(this),Ir(this,vv,!1),Jt(this,Fo).hidden=!1))}get isVisible(){return Jt(this,qu)?!1:Jt(this,Fo).hidden===!1}}qu=new WeakMap,pv=new WeakMap,OA=new WeakMap,IA=new WeakMap,yE=new WeakMap,xE=new WeakMap,Fo=new WeakMap,xm=new WeakMap,mv=new WeakMap,u1=new WeakMap,bE=new WeakMap,EE=new WeakMap,bm=new WeakMap,Ku=new WeakMap,f0=new WeakMap,p0=new WeakMap,Sl=new WeakMap,m0=new WeakMap,gv=new WeakMap,R2=new WeakMap,g0=new WeakMap,SE=new WeakMap,c1=new WeakMap,vv=new WeakMap,Ql=new WeakMap,yv=new WeakMap,wE=new WeakSet,xC=function(){var et;if(Jt(this,f0))return;Ir(this,f0,new AbortController);const{signal:g}=Jt(this,f0);for(const ot of this.trigger)ot.addEventListener("click",Jt(this,yE),{signal:g}),ot.addEventListener("pointerenter",Jt(this,IA),{signal:g}),ot.addEventListener("pointerleave",Jt(this,OA),{signal:g}),ot.classList.add("popupTriggerArea");for(const ot of Jt(this,u1))(et=ot.container)==null||et.addEventListener("keydown",Jt(this,pv),{signal:g})},N2=new WeakSet,GP=function(){const g=Jt(this,u1).find(et=>et.hasCommentButton);g&&Ir(this,m0,g._normalizePoint(g.commentButtonPosition))},D2=new WeakSet,WP=function(){if(Jt(this,Ql).extraPopupElement&&!Jt(this,Ql).editor)return;this.renderCommentButton();const[g,et]=Jt(this,m0),{style:ot}=Jt(this,Sl);ot.left=`calc(${g}%)`,ot.top=`calc(${et}% - var(--comment-button-dim))`},M2=new WeakSet,qP=function(){Jt(this,Ql).extraPopupElement||(this.renderCommentButton(),Jt(this,Sl).style.backgroundColor=this.commentButtonColor||"")},_E=new WeakSet,bC=function(){const g=Jt(this,g0),et=Jt(this,xm);return g!=null&&g.str&&(!(et!=null&&et.str)||et.str===g.str)&&Jt(this,g0).html||null},F2=new WeakSet,KP=function(){var g,et,ot;return((ot=(et=(g=Jt(this,_E,bC))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.fontSize)||0},LA=new WeakSet,M5=function(){var g,et,ot;return((ot=(et=(g=Jt(this,_E,bC))==null?void 0:g.attributes)==null?void 0:et.style)==null?void 0:ot.color)||null},jA=new WeakSet,F5=function(g){const et=[],ot={str:g,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:et}]}},ut={style:{color:Jt(this,LA,M5),fontSize:Jt(this,F2,KP)?`calc(${Jt(this,F2,KP)}px * var(--total-scale-factor))`:""}};for(const ct of g.split(`
`))et.push({name:"span",value:ct,attributes:ut});return ot},BA=new WeakSet,O5=function(g){g.altKey||g.shiftKey||g.ctrlKey||g.metaKey||(g.key==="Enter"||g.key==="Escape"&&Jt(this,bm))&&Qr(this,CE,EC).call(this)},$A=new WeakSet,I5=function(){if(Jt(this,p0)!==null)return;const{page:{view:g},viewport:{rawDims:{pageWidth:et,pageHeight:ot,pageX:ut,pageY:ct}}}=Jt(this,bE);let dt=!!Jt(this,EE),ft=dt?Jt(this,EE):Jt(this,R2);for(const Bt of Jt(this,u1))if(!ft||Util$1.intersect(Bt.data.rect,ft)!==null){ft=Bt.data.rect,dt=!0;break}const St=Util$1.normalizeRect([ft[0],g[3]-ft[1]+g[1],ft[2],g[3]-ft[3]+g[1]]),kt=5,Tt=dt?ft[2]-ft[0]+kt:0,Rt=St[0]+Tt,Ft=St[1];Ir(this,p0,[100*(Rt-ut)/et,100*(Ft-ct)/ot]);const{style:jt}=Jt(this,Fo);jt.left=`${Jt(this,p0)[0]}%`,jt.top=`${Jt(this,p0)[1]}%`},CE=new WeakSet,EC=function(){if(Jt(this,qu)){Jt(this,qu).toggleCommentPopup(this,!1);return}Ir(this,bm,!Jt(this,bm)),Jt(this,bm)?(Qr(this,AE,SC).call(this),Jt(this,Fo).addEventListener("click",Jt(this,yE)),Jt(this,Fo).addEventListener("keydown",Jt(this,pv))):(Qr(this,O2,XP).call(this),Jt(this,Fo).removeEventListener("click",Jt(this,yE)),Jt(this,Fo).removeEventListener("keydown",Jt(this,pv)))},AE=new WeakSet,SC=function(){Jt(this,Ku)||this.render(),this.isVisible?Jt(this,bm)&&Jt(this,Fo).classList.add("focused"):(Qr(this,$A,I5).call(this),Jt(this,Fo).hidden=!1,Jt(this,Fo).style.zIndex=parseInt(Jt(this,Fo).style.zIndex)+1e3)},O2=new WeakSet,XP=function(){Jt(this,Fo).classList.remove("focused"),!(Jt(this,bm)||!this.isVisible)&&(Jt(this,Fo).hidden=!0,Jt(this,Fo).style.zIndex=parseInt(Jt(this,Fo).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.textContent=g.data.textContent,this.textPosition=g.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const g=document.createElement("div");g.classList.add("annotationTextContent"),g.setAttribute("role","comment");for(const et of this.textContent){const ot=document.createElement("span");ot.textContent=et,g.append(ot)}this.container.append(g)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var I2;class LineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Mr(this,I2,null)}render(){this.container.classList.add("lineAnnotation");const{data:et,width:ot,height:ut}=this,ct=this.svgFactory.create(ot,ut,!0),dt=Ir(this,I2,this.svgFactory.createElement("svg:line"));return dt.setAttribute("x1",et.rect[2]-et.lineCoordinates[0]),dt.setAttribute("y1",et.rect[3]-et.lineCoordinates[1]),dt.setAttribute("x2",et.rect[2]-et.lineCoordinates[2]),dt.setAttribute("y2",et.rect[3]-et.lineCoordinates[3]),dt.setAttribute("stroke-width",et.borderStyle.width||1),dt.setAttribute("stroke","transparent"),dt.setAttribute("fill","transparent"),ct.append(dt),this.container.append(ct),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Jt(this,I2)}addHighlightArea(){this.container.classList.add("highlightArea")}}I2=new WeakMap;var L2;class SquareAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Mr(this,L2,null)}render(){this.container.classList.add("squareAnnotation");const{data:et,width:ot,height:ut}=this,ct=this.svgFactory.create(ot,ut,!0),dt=et.borderStyle.width,ft=Ir(this,L2,this.svgFactory.createElement("svg:rect"));return ft.setAttribute("x",dt/2),ft.setAttribute("y",dt/2),ft.setAttribute("width",ot-dt),ft.setAttribute("height",ut-dt),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ct.append(ft),this.container.append(ct),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Jt(this,L2)}addHighlightArea(){this.container.classList.add("highlightArea")}}L2=new WeakMap;var j2;class CircleAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Mr(this,j2,null)}render(){this.container.classList.add("circleAnnotation");const{data:et,width:ot,height:ut}=this,ct=this.svgFactory.create(ot,ut,!0),dt=et.borderStyle.width,ft=Ir(this,j2,this.svgFactory.createElement("svg:ellipse"));return ft.setAttribute("cx",ot/2),ft.setAttribute("cy",ut/2),ft.setAttribute("rx",ot/2-dt/2),ft.setAttribute("ry",ut/2-dt/2),ft.setAttribute("stroke-width",dt||1),ft.setAttribute("stroke","transparent"),ft.setAttribute("fill","transparent"),ct.append(ft),this.container.append(ct),!et.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Jt(this,j2)}addHighlightArea(){this.container.classList.add("highlightArea")}}j2=new WeakMap;var B2;class PolylineAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Mr(this,B2,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,vertices:ot,borderStyle:ut,popupRef:ct},width:dt,height:ft}=this;if(!ot)return this.container;const St=this.svgFactory.create(dt,ft,!0);let kt=[];for(let Rt=0,Ft=ot.length;Rt<Ft;Rt+=2){const jt=ot[Rt]-et[0],Bt=et[3]-ot[Rt+1];kt.push(`${jt},${Bt}`)}kt=kt.join(" ");const Tt=Ir(this,B2,this.svgFactory.createElement(this.svgElementName));return Tt.setAttribute("points",kt),Tt.setAttribute("stroke-width",ut.width||1),Tt.setAttribute("stroke","transparent"),Tt.setAttribute("fill","transparent"),St.append(Tt),this.container.append(St),!ct&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Jt(this,B2)}addHighlightArea(){this.container.classList.add("highlightArea")}}B2=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(g){super(g),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var $2,h1,V2,YP;class InkAnnotationElement extends AnnotationElement{constructor(et){super(et,{isRenderable:!0,ignoreBorder:!0});Mr(this,V2);Mr(this,$2,null);Mr(this,h1,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:et,rotation:ot,inkLists:ut,borderStyle:ct,popupRef:dt}}=this,{transform:ft,width:St,height:kt}=Qr(this,V2,YP).call(this,ot,et),Tt=this.svgFactory.create(St,kt,!0),Rt=Ir(this,$2,this.svgFactory.createElement("svg:g"));Tt.append(Rt),Rt.setAttribute("stroke-width",ct.width||1),Rt.setAttribute("stroke-linecap","round"),Rt.setAttribute("stroke-linejoin","round"),Rt.setAttribute("stroke-miterlimit",10),Rt.setAttribute("stroke","transparent"),Rt.setAttribute("fill","transparent"),Rt.setAttribute("transform",ft);for(let Ft=0,jt=ut.length;Ft<jt;Ft++){const Bt=this.svgFactory.createElement(this.svgElementName);Jt(this,h1).push(Bt),Bt.setAttribute("points",ut[Ft].join(",")),Rt.append(Bt)}return!dt&&this.hasPopupData&&this._createPopup(),this.container.append(Tt),this._editOnDoubleClick(),this.container}updateEdited(et){super.updateEdited(et);const{thickness:ot,points:ut,rect:ct}=et,dt=Jt(this,$2);if(ot>=0&&dt.setAttribute("stroke-width",ot||1),ut)for(let ft=0,St=Jt(this,h1).length;ft<St;ft++)Jt(this,h1)[ft].setAttribute("points",ut[ft].join(","));if(ct){const{transform:ft,width:St,height:kt}=Qr(this,V2,YP).call(this,this.data.rotation,ct);dt.parentElement.setAttribute("viewBox",`0 0 ${St} ${kt}`),dt.setAttribute("transform",ft)}}getElementsToTriggerPopup(){return Jt(this,h1)}addHighlightArea(){this.container.classList.add("highlightArea")}}$2=new WeakMap,h1=new WeakMap,V2=new WeakSet,YP=function(et,ot){switch(et){case 90:return{transform:`rotate(90) translate(${-ot[0]},${ot[1]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};case 180:return{transform:`rotate(180) translate(${-ot[2]},${ot[1]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]};case 270:return{transform:`rotate(270) translate(${-ot[2]},${ot[3]}) scale(1,-1)`,width:ot[3]-ot[1],height:ot[2]-ot[0]};default:return{transform:`translate(${-ot[0]},${ot[3]}) scale(1,-1)`,width:ot[2]-ot[0],height:ot[3]-ot[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),g){const ot=document.createElement("mark");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),g){const ot=document.createElement("u");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:g,popupRef:et}}=this;if(!et&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),g){const ot=document.createElement("s");ot.classList.add("overlaidText"),ot.textContent=g,this.container.append(ot)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(g){super(g,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var z2,U2,ZP;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(et){var ut;super(et,{isRenderable:!0});Mr(this,U2);Mr(this,z2,null);const{file:ot}=this.data;this.filename=ot.filename,this.content=ot.content,(ut=this.linkService.eventBus)==null||ut.dispatch("fileattachmentannotation",{source:this,...ot})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:et,data:ot}=this;let ut;ot.hasAppearance||ot.fillAlpha===0?ut=document.createElement("div"):(ut=document.createElement("img"),ut.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(ot.name)?"paperclip":"pushpin"}.svg`,ot.fillAlpha&&ot.fillAlpha<1&&(ut.style=`filter: opacity(${Math.round(ot.fillAlpha*100)}%);`)),ut.addEventListener("dblclick",Qr(this,U2,ZP).bind(this)),Ir(this,z2,ut);const{isMac:ct}=util_FeatureTest.platform;return et.addEventListener("keydown",dt=>{dt.key==="Enter"&&(ct?dt.metaKey:dt.ctrlKey)&&Qr(this,U2,ZP).call(this)}),!ot.popupRef&&this.hasPopupData?this._createPopup():ut.classList.add("popupTriggerArea"),et.append(ut),et}getElementsToTriggerPopup(){return Jt(this,z2)}addHighlightArea(){this.container.classList.add("highlightArea")}}z2=new WeakMap,U2=new WeakSet,ZP=function(){var et;(et=this.downloadManager)==null||et.openOrDownloadData(this.content,this.filename)};var kE,d1,TE,xv,H2,f1,G2,JP,W2,QP,q2;let AnnotationLayer$1=(q2=class{constructor({div:g,accessibilityManager:et,annotationCanvasMap:ot,annotationEditorUIManager:ut,page:ct,viewport:dt,structTreeLayer:ft,commentManager:St,linkService:kt,annotationStorage:Tt}){Mr(this,G2);Mr(this,W2);Mr(this,kE,null);Mr(this,d1,null);Mr(this,TE,null);Mr(this,xv,new Map);Mr(this,H2,null);Mr(this,f1,null);this.div=g,Ir(this,kE,et),Ir(this,d1,ot),Ir(this,H2,ft||null),Ir(this,f1,kt||null),Ir(this,TE,Tt||new AnnotationStorage),this.page=ct,this.viewport=dt,this.zIndex=0,this._annotationEditorUIManager=ut,this._commentManager=St||null}hasEditableAnnotations(){return Jt(this,xv).size>0}async render(g){var dt,ft,St;const{annotations:et}=g,ot=this.div;setLayerDimensions(ot,this.viewport);const ut=new Map,ct={data:null,layer:ot,linkService:Jt(this,f1),downloadManager:g.downloadManager,imageResourcesPath:g.imageResourcesPath||"",renderForms:g.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:Jt(this,TE),enableComment:g.enableComment===!0,enableScripting:g.enableScripting===!0,hasJSActions:g.hasJSActions,fieldObjects:g.fieldObjects,parent:this,elements:null};for(const kt of et){if(kt.noHTML)continue;const Tt=kt.annotationType===AnnotationType.POPUP;if(Tt){const jt=ut.get(kt.id);if(!jt)continue;ct.elements=jt}else if(kt.rect[2]===kt.rect[0]||kt.rect[3]===kt.rect[1])continue;ct.data=kt;const Rt=AnnotationElementFactory.create(ct);if(!Rt.isRenderable)continue;if(!Tt&&kt.popupRef){const jt=ut.get(kt.popupRef);jt?jt.push(Rt):ut.set(kt.popupRef,[Rt])}const Ft=Rt.render();kt.hidden&&(Ft.style.visibility="hidden"),await Qr(this,G2,JP).call(this,Ft,kt.id,ct.elements),(ft=(dt=Rt.extraPopupElement)==null?void 0:dt.popup)==null||ft.renderCommentButton(),Rt._isEditable&&(Jt(this,xv).set(Rt.data.id,Rt),(St=this._annotationEditorUIManager)==null||St.renderAnnotationElement(Rt))}Qr(this,W2,QP).call(this)}async addLinkAnnotations(g){const et={data:null,layer:this.div,linkService:Jt(this,f1),svgFactory:new DOMSVGFactory,parent:this};for(const ot of g){ot.borderStyle||(ot.borderStyle=q2._defaultBorderStyle),et.data=ot;const ut=AnnotationElementFactory.create(et);if(!ut.isRenderable)continue;const ct=ut.render();await Qr(this,G2,JP).call(this,ct,ot.id,null)}}update({viewport:g}){const et=this.div;this.viewport=g,setLayerDimensions(et,{rotation:g.rotation}),Qr(this,W2,QP).call(this),et.hidden=!1}getEditableAnnotations(){return Array.from(Jt(this,xv).values())}getEditableAnnotation(g){return Jt(this,xv).get(g)}addFakeAnnotation(g){var ft;const{div:et}=this,{id:ot,rotation:ut}=g,ct=new EditorAnnotationElement({data:{id:ot,rect:g.getPDFRect(),rotation:ut},editor:g,layer:et,parent:this,enableComment:!!this._commentManager,linkService:Jt(this,f1),annotationStorage:Jt(this,TE)}),dt=ct.render();return et.append(dt),(ft=Jt(this,kE))==null||ft.moveElementInDOM(et,dt,dt,!1),ct.createOrUpdatePopup(),ct}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},kE=new WeakMap,d1=new WeakMap,TE=new WeakMap,xv=new WeakMap,H2=new WeakMap,f1=new WeakMap,G2=new WeakSet,JP=async function(g,et,ot){var ft,St;const ut=g.firstChild||g,ct=ut.id=`${AnnotationPrefix}${et}`,dt=await((ft=Jt(this,H2))==null?void 0:ft.getAriaAttributes(ct));if(dt)for(const[kt,Tt]of dt)ut.setAttribute(kt,Tt);ot?ot.at(-1).container.after(g):(this.div.append(g),(St=Jt(this,kE))==null||St.moveElementInDOM(this.div,g,ut,!1))},W2=new WeakSet,QP=function(){var et;if(!Jt(this,d1))return;const g=this.div;for(const[ot,ut]of Jt(this,d1)){const ct=g.querySelector(`[data-annotation-id="${ot}"]`);if(!ct)continue;ut.className="annotationContent";const{firstChild:dt}=ct;dt?dt.nodeName==="CANVAS"?dt.replaceWith(ut):dt.classList.contains("annotationContent")?dt.after(ut):dt.before(ut):ct.append(ut);const ft=Jt(this,xv).get(ot);ft&&(ft._hasNoCanvas?((et=this._annotationEditorUIManager)==null||et.setMissingCanvas(ot,ct.id,ut),ft._hasNoCanvas=!1):ft.canvas=ut)}Jt(this,d1).clear()},q2);const EOL_PATTERN=/\r\n?|\n/g;var Xu,K2,p1,Yu,VA,L5,zA,j5,UA,B5,PE,wC,RE,_C,NE,CC,HA,$5,X2,eR,GA,V5;const fo=class fo extends AnnotationEditor{constructor(et){super({...et,name:"freeTextEditor"});Mr(this,VA);Mr(this,zA);Mr(this,UA);Mr(this,PE);Mr(this,NE);Mr(this,HA);Mr(this,GA);Mr(this,Xu,"");Mr(this,K2,`${this.id}-editor`);Mr(this,p1,null);Mr(this,Yu,void 0);Kn(this,"_colorPicker",null);this.color=et.color||fo._defaultColor||AnnotationEditor._defaultLineColor,Ir(this,Yu,et.fontSize||fo._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const et=fo.prototype,ot=dt=>dt.isEmpty(),ut=AnnotationEditorUIManager.TRANSLATE_SMALL,ct=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],et.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],et.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],et._translateEmpty,{args:[-ut,0],checker:ot}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],et._translateEmpty,{args:[-ct,0],checker:ot}],[["ArrowRight","mac+ArrowRight"],et._translateEmpty,{args:[ut,0],checker:ot}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],et._translateEmpty,{args:[ct,0],checker:ot}],[["ArrowUp","mac+ArrowUp"],et._translateEmpty,{args:[0,-ut],checker:ot}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],et._translateEmpty,{args:[0,-ct],checker:ot}],[["ArrowDown","mac+ArrowDown"],et._translateEmpty,{args:[0,ut],checker:ot}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],et._translateEmpty,{args:[0,ct],checker:ot}]]))}static initialize(et,ot){AnnotationEditor.initialize(et,ot);const ut=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ut.getPropertyValue("--freetext-padding"))}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:fo._defaultFontSize=ot;break;case AnnotationEditorParamsType.FREETEXT_COLOR:fo._defaultColor=ot;break}}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.FREETEXT_SIZE:Qr(this,VA,L5).call(this,ot);break;case AnnotationEditorParamsType.FREETEXT_COLOR:Qr(this,zA,j5).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,fo._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,fo._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Jt(this,Yu)],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}onUpdatedColor(){var et;this.editorDiv.style.color=this.color,(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_translateEmpty(et,ot){this._uiManager.translateSelectedEditors(et,ot,!0)}getInitialTranslation(){const et=this.parentScale;return[-fo._internalPadding*et,-(fo._internalPadding+Jt(this,Yu))*et]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),Ir(this,p1,new AbortController);const et=this._uiManager.combinedSignal(Jt(this,p1));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:et}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:et}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:et}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:et}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:et}),!0}disableEditMode(){var et;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Jt(this,K2)),this._isDraggable=!0,(et=Jt(this,p1))==null||et.abort(),Ir(this,p1,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(et){this._focusEventsAllowed&&(super.focusin(et),et.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(et){var ot;this.width||(this.enableEditMode(),et&&this.editorDiv.focus(),(ot=this._initialOptions)!=null&&ot.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const et=Jt(this,Xu),ot=Ir(this,Xu,Qr(this,UA,B5).call(this).trimEnd());if(et===ot)return;const ut=ct=>{if(Ir(this,Xu,ct),!ct){this.remove();return}Qr(this,NE,CC).call(this),this._uiManager.rebuild(this),Qr(this,PE,wC).call(this)};this.addCommands({cmd:()=>{ut(ot)},undo:()=>{ut(et)},mustExec:!1}),Qr(this,PE,wC).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(et){et.target===this.div&&et.key==="Enter"&&(this.enterInEditMode(),et.preventDefault())}editorDivKeydown(et){fo._keyboardManager.exec(this,et)}editorDivFocus(et){this.isEditing=!0}editorDivBlur(et){this.isEditing=!1}editorDivInput(et){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let et,ot;(this._isCopy||this.annotationElementId)&&(et=this.x,ot=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Jt(this,K2)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:ut}=this.editorDiv;if(ut.fontSize=`calc(${Jt(this,Yu)}px * var(--total-scale-factor))`,ut.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[ct,dt]=this.parentDimensions;if(this.annotationElementId){const{position:ft}=this._initialData;let[St,kt]=this.getInitialTranslation();[St,kt]=this.pageTranslationToScreen(St,kt);const[Tt,Rt]=this.pageDimensions,[Ft,jt]=this.pageTranslation;let Bt,zt;switch(this.rotation){case 0:Bt=et+(ft[0]-Ft)/Tt,zt=ot+this.height-(ft[1]-jt)/Rt;break;case 90:Bt=et+(ft[0]-Ft)/Tt,zt=ot-(ft[1]-jt)/Rt,[St,kt]=[kt,-St];break;case 180:Bt=et-this.width+(ft[0]-Ft)/Tt,zt=ot-(ft[1]-jt)/Rt,[St,kt]=[-St,-kt];break;case 270:Bt=et+(ft[0]-Ft-this.height*Rt)/Tt,zt=ot+(ft[1]-jt-this.width*Tt)/Rt,[St,kt]=[-kt,St];break}this.setAt(Bt*ct,zt*dt,St,kt)}else this._moveAfterPaste(et,ot);Qr(this,NE,CC).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(et){var Bt,zt,Ht;const ot=et.clipboardData||window.clipboardData,{types:ut}=ot;if(ut.length===1&&ut[0]==="text/plain")return;et.preventDefault();const ct=Qr(Bt=fo,X2,eR).call(Bt,ot.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!ct)return;const dt=window.getSelection();if(!dt.rangeCount)return;this.editorDiv.normalize(),dt.deleteFromDocument();const ft=dt.getRangeAt(0);if(!ct.includes(`
`)){ft.insertNode(document.createTextNode(ct)),this.editorDiv.normalize(),dt.collapseToStart();return}const{startContainer:St,startOffset:kt}=ft,Tt=[],Rt=[];if(St.nodeType===Node.TEXT_NODE){const Ut=St.parentElement;if(Rt.push(St.nodeValue.slice(kt).replaceAll(EOL_PATTERN,"")),Ut!==this.editorDiv){let Kt=Tt;for(const Yt of this.editorDiv.childNodes){if(Yt===Ut){Kt=Rt;continue}Kt.push(Qr(zt=fo,RE,_C).call(zt,Yt))}}Tt.push(St.nodeValue.slice(0,kt).replaceAll(EOL_PATTERN,""))}else if(St===this.editorDiv){let Ut=Tt,Kt=0;for(const Yt of this.editorDiv.childNodes)Kt++===kt&&(Ut=Rt),Ut.push(Qr(Ht=fo,RE,_C).call(Ht,Yt))}Ir(this,Xu,`${Tt.join(`
`)}${ct}${Rt.join(`
`)}`),Qr(this,NE,CC).call(this);const Ft=new Range;let jt=Math.sumPrecise(Tt.map(Ut=>Ut.length));for(const{firstChild:Ut}of this.editorDiv.childNodes)if(Ut.nodeType===Node.TEXT_NODE){const Kt=Ut.nodeValue.length;if(jt<=Kt){Ft.setStart(Ut,jt),Ft.setEnd(Ut,jt);break}jt-=Kt}dt.removeAllRanges(),dt.addRange(Ft)}get contentDiv(){return this.editorDiv}getPDFRect(){const et=fo._internalPadding*this.parentScale;return this.getRect(et,et)}static async deserialize(et,ot,ut){var ft;let ct=null;if(et instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:St,fontColor:kt},rect:Tt,rotation:Rt,id:Ft,popupRef:jt,richText:Bt,contentsObj:zt,creationDate:Ht,modificationDate:Ut},textContent:Kt,textPosition:Yt,parent:{page:{pageNumber:er}}}=et;if(!Kt||Kt.length===0)return null;ct=et={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(kt),fontSize:St,value:Kt.join(`
`),position:Yt,pageIndex:er-1,rect:Tt.slice(0),rotation:Rt,annotationElementId:Ft,id:Ft,deleted:!1,popupRef:jt,comment:(zt==null?void 0:zt.str)||null,richText:Bt,creationDate:Ht,modificationDate:Ut}}const dt=await super.deserialize(et,ot,ut);return Ir(dt,Yu,et.fontSize),dt.color=Util$1.makeHexColor(...et.color),Ir(dt,Xu,Qr(ft=fo,X2,eR).call(ft,et.value)),dt._initialData=ct,et.comment&&dt.setCommentData(et),dt}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),ut=Object.assign(super.serialize(et),{color:ot,fontSize:Jt(this,Yu),value:Qr(this,HA,$5).call(this)});return this.addComment(ut),et?(ut.isCopy=!0,ut):this.annotationElementId&&!Qr(this,GA,V5).call(this,ut)?null:(ut.id=this.annotationElementId,ut)}renderAnnotationElement(et){const ot=super.renderAnnotationElement(et);if(!ot)return null;const{style:ut}=ot;ut.fontSize=`calc(${Jt(this,Yu)}px * var(--total-scale-factor))`,ut.color=this.color,ot.replaceChildren();for(const ct of Jt(this,Xu).split(`
`)){const dt=document.createElement("div");dt.append(ct?document.createTextNode(ct):document.createElement("br")),ot.append(dt)}return et.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:Jt(this,Xu)}}),ot}resetAnnotationElement(et){super.resetAnnotationElement(et),et.resetEdited()}};Xu=new WeakMap,K2=new WeakMap,p1=new WeakMap,Yu=new WeakMap,VA=new WeakSet,L5=function(et){const ot=ct=>{this.editorDiv.style.fontSize=`calc(${ct}px * var(--total-scale-factor))`,this.translate(0,-(ct-Jt(this,Yu))*this.parentScale),Ir(this,Yu,ct),Qr(this,PE,wC).call(this)},ut=Jt(this,Yu);this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ut),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zA=new WeakSet,j5=function(et){const ot=ct=>{this.color=ct,this.onUpdatedColor()},ut=this.color;this.addCommands({cmd:ot.bind(this,et),undo:ot.bind(this,ut),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},UA=new WeakSet,B5=function(){var ut;const et=[];this.editorDiv.normalize();let ot=null;for(const ct of this.editorDiv.childNodes)(ot==null?void 0:ot.nodeType)===Node.TEXT_NODE&&ct.nodeName==="BR"||(et.push(Qr(ut=fo,RE,_C).call(ut,ct)),ot=ct);return et.join(`
`)},PE=new WeakSet,wC=function(){const[et,ot]=this.parentDimensions;let ut;if(this.isAttachedToDOM)ut=this.div.getBoundingClientRect();else{const{currentLayer:ct,div:dt}=this,ft=dt.style.display,St=dt.classList.contains("hidden");dt.classList.remove("hidden"),dt.style.display="hidden",ct.div.append(this.div),ut=dt.getBoundingClientRect(),dt.remove(),dt.style.display=ft,dt.classList.toggle("hidden",St)}this.rotation%180===this.parentRotation%180?(this.width=ut.width/et,this.height=ut.height/ot):(this.width=ut.height/et,this.height=ut.width/ot),this.fixAndSetPosition()},RE=new WeakSet,_C=function(et){return(et.nodeType===Node.TEXT_NODE?et.nodeValue:et.innerText).replaceAll(EOL_PATTERN,"")},NE=new WeakSet,CC=function(){if(this.editorDiv.replaceChildren(),!!Jt(this,Xu))for(const et of Jt(this,Xu).split(`
`)){const ot=document.createElement("div");ot.append(et?document.createTextNode(et):document.createElement("br")),this.editorDiv.append(ot)}},HA=new WeakSet,$5=function(){return Jt(this,Xu).replaceAll(""," ")},X2=new WeakSet,eR=function(et){return et.replaceAll(" ","")},GA=new WeakSet,V5=function(et){const{value:ot,fontSize:ut,color:ct,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||et.value!==ot||et.fontSize!==ut||et.color.some((ft,St)=>ft!==ct[St])||et.pageIndex!==dt},Mr(fo,RE),Mr(fo,X2),Kn(fo,"_freeTextDefaultContent",""),Kn(fo,"_internalPadding",0),Kn(fo,"_defaultColor",null),Kn(fo,"_defaultFontSize",10),Kn(fo,"_type","freetext"),Kn(fo,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=fo;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(g,et){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(g,et,ot,ut,ct,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft]*ut,dt[ft+1]=ot+g[ft+1]*ct;return dt}static _rescaleAndSwap(g,et,ot,ut,ct,dt){dt||(dt=new Float32Array(g.length));for(let ft=0,St=g.length;ft<St;ft+=2)dt[ft]=et+g[ft+1]*ut,dt[ft+1]=ot+g[ft]*ct;return dt}static _translate(g,et,ot,ut){ut||(ut=new Float32Array(g.length));for(let ct=0,dt=g.length;ct<dt;ct+=2)ut[ct]=et+g[ct],ut[ct+1]=ot+g[ct+1];return ut}static svgRound(g){return Math.round(g*1e4)}static _normalizePoint(g,et,ot,ut,ct){switch(ct){case 90:return[1-et/ot,g/ut];case 180:return[1-g/ot,1-et/ut];case 270:return[et/ot,1-g/ut];default:return[g/ot,et/ut]}}static _normalizePagePoint(g,et,ot){switch(ot){case 90:return[1-et,g];case 180:return[1-g,1-et];case 270:return[et,1-g];default:return[g,et]}}static createBezierPoints(g,et,ot,ut,ct,dt){return[(g+5*ot)/6,(et+5*ut)/6,(5*ot+ct)/6,(5*ut+dt)/6,(ot+ct)/2,(ut+dt)/2]}}Kn(Outline,"PRECISION",1e-4);var Zu,$p,DE,ME,Em,$s,m1,g1,Y2,Z2,FE,OE,bv,J2,WA,qA,v1,KS,KA,z5,XA,U5,YA,H5,ZA,G5,JA,W5,QA,q5;const zm=class zm{constructor({x:g,y:et},ot,ut,ct,dt,ft=0){Mr(this,v1);Mr(this,KA);Mr(this,XA);Mr(this,YA);Mr(this,ZA);Mr(this,JA);Mr(this,QA);Mr(this,Zu,void 0);Mr(this,$p,[]);Mr(this,DE,void 0);Mr(this,ME,void 0);Mr(this,Em,[]);Mr(this,$s,new Float32Array(18));Mr(this,m1,void 0);Mr(this,g1,void 0);Mr(this,Y2,void 0);Mr(this,Z2,void 0);Mr(this,FE,void 0);Mr(this,OE,void 0);Mr(this,bv,[]);Ir(this,Zu,ot),Ir(this,OE,ct*ut),Ir(this,ME,dt),Jt(this,$s).set([NaN,NaN,NaN,NaN,g,et],6),Ir(this,DE,ft),Ir(this,Z2,Jt(zm,J2)*ut),Ir(this,Y2,Jt(zm,qA)*ut),Ir(this,FE,ut),Jt(this,bv).push(g,et)}isEmpty(){return isNaN(Jt(this,$s)[8])}add({x:g,y:et}){var vr;Ir(this,m1,g),Ir(this,g1,et);const[ot,ut,ct,dt]=Jt(this,Zu);let[ft,St,kt,Tt]=Jt(this,$s).subarray(8,12);const Rt=g-kt,Ft=et-Tt,jt=Math.hypot(Rt,Ft);if(jt<Jt(this,Y2))return!1;const Bt=jt-Jt(this,Z2),zt=Bt/jt,Ht=zt*Rt,Ut=zt*Ft;let Kt=ft,Yt=St;ft=kt,St=Tt,kt+=Ht,Tt+=Ut,(vr=Jt(this,bv))==null||vr.push(g,et);const er=-Ut/Bt,ar=Ht/Bt,ir=er*Jt(this,OE),lr=ar*Jt(this,OE);return Jt(this,$s).set(Jt(this,$s).subarray(2,8),0),Jt(this,$s).set([kt+ir,Tt+lr],4),Jt(this,$s).set(Jt(this,$s).subarray(14,18),12),Jt(this,$s).set([kt-ir,Tt-lr],16),isNaN(Jt(this,$s)[6])?(Jt(this,Em).length===0&&(Jt(this,$s).set([ft+ir,St+lr],2),Jt(this,Em).push(NaN,NaN,NaN,NaN,(ft+ir-ot)/ct,(St+lr-ut)/dt),Jt(this,$s).set([ft-ir,St-lr],14),Jt(this,$p).push(NaN,NaN,NaN,NaN,(ft-ir-ot)/ct,(St-lr-ut)/dt)),Jt(this,$s).set([Kt,Yt,ft,St,kt,Tt],6),!this.isEmpty()):(Jt(this,$s).set([Kt,Yt,ft,St,kt,Tt],6),Math.abs(Math.atan2(Yt-St,Kt-ft)-Math.atan2(Ut,Ht))<Math.PI/2?([ft,St,kt,Tt]=Jt(this,$s).subarray(2,6),Jt(this,Em).push(NaN,NaN,NaN,NaN,((ft+kt)/2-ot)/ct,((St+Tt)/2-ut)/dt),[ft,St,Kt,Yt]=Jt(this,$s).subarray(14,18),Jt(this,$p).push(NaN,NaN,NaN,NaN,((Kt+ft)/2-ot)/ct,((Yt+St)/2-ut)/dt),!0):([Kt,Yt,ft,St,kt,Tt]=Jt(this,$s).subarray(0,6),Jt(this,Em).push(((Kt+5*ft)/6-ot)/ct,((Yt+5*St)/6-ut)/dt,((5*ft+kt)/6-ot)/ct,((5*St+Tt)/6-ut)/dt,((ft+kt)/2-ot)/ct,((St+Tt)/2-ut)/dt),[kt,Tt,ft,St,Kt,Yt]=Jt(this,$s).subarray(12,18),Jt(this,$p).push(((Kt+5*ft)/6-ot)/ct,((Yt+5*St)/6-ut)/dt,((5*ft+kt)/6-ot)/ct,((5*St+Tt)/6-ut)/dt,((ft+kt)/2-ot)/ct,((St+Tt)/2-ut)/dt),!0))}toSVGPath(){if(this.isEmpty())return"";const g=Jt(this,Em),et=Jt(this,$p);if(isNaN(Jt(this,$s)[6])&&!this.isEmpty())return Qr(this,KA,z5).call(this);const ot=[];ot.push(`M${g[4]} ${g[5]}`);for(let ut=6;ut<g.length;ut+=6)isNaN(g[ut])?ot.push(`L${g[ut+4]} ${g[ut+5]}`):ot.push(`C${g[ut]} ${g[ut+1]} ${g[ut+2]} ${g[ut+3]} ${g[ut+4]} ${g[ut+5]}`);Qr(this,YA,H5).call(this,ot);for(let ut=et.length-6;ut>=6;ut-=6)isNaN(et[ut])?ot.push(`L${et[ut+4]} ${et[ut+5]}`):ot.push(`C${et[ut]} ${et[ut+1]} ${et[ut+2]} ${et[ut+3]} ${et[ut+4]} ${et[ut+5]}`);return Qr(this,XA,U5).call(this,ot),ot.join(" ")}newFreeDrawOutline(g,et,ot,ut,ct,dt){return new FreeDrawOutline(g,et,ot,ut,ct,dt)}getOutlines(){var Rt;const g=Jt(this,Em),et=Jt(this,$p),ot=Jt(this,$s),[ut,ct,dt,ft]=Jt(this,Zu),St=new Float32Array((((Rt=Jt(this,bv))==null?void 0:Rt.length)??0)+2);for(let Ft=0,jt=St.length-2;Ft<jt;Ft+=2)St[Ft]=(Jt(this,bv)[Ft]-ut)/dt,St[Ft+1]=(Jt(this,bv)[Ft+1]-ct)/ft;if(St[St.length-2]=(Jt(this,m1)-ut)/dt,St[St.length-1]=(Jt(this,g1)-ct)/ft,isNaN(ot[6])&&!this.isEmpty())return Qr(this,ZA,G5).call(this,St);const kt=new Float32Array(Jt(this,Em).length+24+Jt(this,$p).length);let Tt=g.length;for(let Ft=0;Ft<Tt;Ft+=2){if(isNaN(g[Ft])){kt[Ft]=kt[Ft+1]=NaN;continue}kt[Ft]=g[Ft],kt[Ft+1]=g[Ft+1]}Tt=Qr(this,QA,q5).call(this,kt,Tt);for(let Ft=et.length-6;Ft>=6;Ft-=6)for(let jt=0;jt<6;jt+=2){if(isNaN(et[Ft+jt])){kt[Tt]=kt[Tt+1]=NaN,Tt+=2;continue}kt[Tt]=et[Ft+jt],kt[Tt+1]=et[Ft+jt+1],Tt+=2}return Qr(this,JA,W5).call(this,kt,Tt),this.newFreeDrawOutline(kt,St,Jt(this,Zu),Jt(this,FE),Jt(this,DE),Jt(this,ME))}};Zu=new WeakMap,$p=new WeakMap,DE=new WeakMap,ME=new WeakMap,Em=new WeakMap,$s=new WeakMap,m1=new WeakMap,g1=new WeakMap,Y2=new WeakMap,Z2=new WeakMap,FE=new WeakMap,OE=new WeakMap,bv=new WeakMap,J2=new WeakMap,WA=new WeakMap,qA=new WeakMap,v1=new WeakSet,KS=function(){const g=Jt(this,$s).subarray(4,6),et=Jt(this,$s).subarray(16,18),[ot,ut,ct,dt]=Jt(this,Zu);return[(Jt(this,m1)+(g[0]-et[0])/2-ot)/ct,(Jt(this,g1)+(g[1]-et[1])/2-ut)/dt,(Jt(this,m1)+(et[0]-g[0])/2-ot)/ct,(Jt(this,g1)+(et[1]-g[1])/2-ut)/dt]},KA=new WeakSet,z5=function(){const[g,et,ot,ut]=Jt(this,Zu),[ct,dt,ft,St]=Qr(this,v1,KS).call(this);return`M${(Jt(this,$s)[2]-g)/ot} ${(Jt(this,$s)[3]-et)/ut} L${(Jt(this,$s)[4]-g)/ot} ${(Jt(this,$s)[5]-et)/ut} L${ct} ${dt} L${ft} ${St} L${(Jt(this,$s)[16]-g)/ot} ${(Jt(this,$s)[17]-et)/ut} L${(Jt(this,$s)[14]-g)/ot} ${(Jt(this,$s)[15]-et)/ut} Z`},XA=new WeakSet,U5=function(g){const et=Jt(this,$p);g.push(`L${et[4]} ${et[5]} Z`)},YA=new WeakSet,H5=function(g){const[et,ot,ut,ct]=Jt(this,Zu),dt=Jt(this,$s).subarray(4,6),ft=Jt(this,$s).subarray(16,18),[St,kt,Tt,Rt]=Qr(this,v1,KS).call(this);g.push(`L${(dt[0]-et)/ut} ${(dt[1]-ot)/ct} L${St} ${kt} L${Tt} ${Rt} L${(ft[0]-et)/ut} ${(ft[1]-ot)/ct}`)},ZA=new WeakSet,G5=function(g){const et=Jt(this,$s),[ot,ut,ct,dt]=Jt(this,Zu),[ft,St,kt,Tt]=Qr(this,v1,KS).call(this),Rt=new Float32Array(36);return Rt.set([NaN,NaN,NaN,NaN,(et[2]-ot)/ct,(et[3]-ut)/dt,NaN,NaN,NaN,NaN,(et[4]-ot)/ct,(et[5]-ut)/dt,NaN,NaN,NaN,NaN,ft,St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,(et[16]-ot)/ct,(et[17]-ut)/dt,NaN,NaN,NaN,NaN,(et[14]-ot)/ct,(et[15]-ut)/dt],0),this.newFreeDrawOutline(Rt,g,Jt(this,Zu),Jt(this,FE),Jt(this,DE),Jt(this,ME))},JA=new WeakSet,W5=function(g,et){const ot=Jt(this,$p);return g.set([NaN,NaN,NaN,NaN,ot[4],ot[5]],et),et+=6},QA=new WeakSet,q5=function(g,et){const ot=Jt(this,$s).subarray(4,6),ut=Jt(this,$s).subarray(16,18),[ct,dt,ft,St]=Jt(this,Zu),[kt,Tt,Rt,Ft]=Qr(this,v1,KS).call(this);return g.set([NaN,NaN,NaN,NaN,(ot[0]-ct)/ft,(ot[1]-dt)/St,NaN,NaN,NaN,NaN,kt,Tt,NaN,NaN,NaN,NaN,Rt,Ft,NaN,NaN,NaN,NaN,(ut[0]-ct)/ft,(ut[1]-dt)/St],et),et+=24},Mr(zm,J2,8),Mr(zm,WA,2),Mr(zm,qA,Jt(zm,J2)+Jt(zm,WA));let FreeDrawOutliner=zm;var IE,y1,v0,Q2,Ju,e_,Bo,_k,K5;class FreeDrawOutline extends Outline{constructor(et,ot,ut,ct,dt,ft){super();Mr(this,_k);Mr(this,IE,void 0);Mr(this,y1,new Float32Array(4));Mr(this,v0,void 0);Mr(this,Q2,void 0);Mr(this,Ju,void 0);Mr(this,e_,void 0);Mr(this,Bo,void 0);Ir(this,Bo,et),Ir(this,Ju,ot),Ir(this,IE,ut),Ir(this,e_,ct),Ir(this,v0,dt),Ir(this,Q2,ft),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],Qr(this,_k,K5).call(this,ft);const[St,kt,Tt,Rt]=Jt(this,y1);for(let Ft=0,jt=et.length;Ft<jt;Ft+=2)et[Ft]=(et[Ft]-St)/Tt,et[Ft+1]=(et[Ft+1]-kt)/Rt;for(let Ft=0,jt=ot.length;Ft<jt;Ft+=2)ot[Ft]=(ot[Ft]-St)/Tt,ot[Ft+1]=(ot[Ft+1]-kt)/Rt}toSVGPath(){const et=[`M${Jt(this,Bo)[4]} ${Jt(this,Bo)[5]}`];for(let ot=6,ut=Jt(this,Bo).length;ot<ut;ot+=6){if(isNaN(Jt(this,Bo)[ot])){et.push(`L${Jt(this,Bo)[ot+4]} ${Jt(this,Bo)[ot+5]}`);continue}et.push(`C${Jt(this,Bo)[ot]} ${Jt(this,Bo)[ot+1]} ${Jt(this,Bo)[ot+2]} ${Jt(this,Bo)[ot+3]} ${Jt(this,Bo)[ot+4]} ${Jt(this,Bo)[ot+5]}`)}return et.push("Z"),et.join(" ")}serialize([et,ot,ut,ct],dt){const ft=ut-et,St=ct-ot;let kt,Tt;switch(dt){case 0:kt=Outline._rescale(Jt(this,Bo),et,ct,ft,-St),Tt=Outline._rescale(Jt(this,Ju),et,ct,ft,-St);break;case 90:kt=Outline._rescaleAndSwap(Jt(this,Bo),et,ot,ft,St),Tt=Outline._rescaleAndSwap(Jt(this,Ju),et,ot,ft,St);break;case 180:kt=Outline._rescale(Jt(this,Bo),ut,ot,-ft,St),Tt=Outline._rescale(Jt(this,Ju),ut,ot,-ft,St);break;case 270:kt=Outline._rescaleAndSwap(Jt(this,Bo),ut,ct,-ft,-St),Tt=Outline._rescaleAndSwap(Jt(this,Ju),ut,ct,-ft,-St);break}return{outline:Array.from(kt),points:[Array.from(Tt)]}}get box(){return Jt(this,y1)}newOutliner(et,ot,ut,ct,dt,ft=0){return new FreeDrawOutliner(et,ot,ut,ct,dt,ft)}getNewOutline(et,ot){const[ut,ct,dt,ft]=Jt(this,y1),[St,kt,Tt,Rt]=Jt(this,IE),Ft=dt*Tt,jt=ft*Rt,Bt=ut*Tt+St,zt=ct*Rt+kt,Ht=this.newOutliner({x:Jt(this,Ju)[0]*Ft+Bt,y:Jt(this,Ju)[1]*jt+zt},Jt(this,IE),Jt(this,e_),et,Jt(this,Q2),ot??Jt(this,v0));for(let Ut=2;Ut<Jt(this,Ju).length;Ut+=2)Ht.add({x:Jt(this,Ju)[Ut]*Ft+Bt,y:Jt(this,Ju)[Ut+1]*jt+zt});return Ht.getOutlines()}}IE=new WeakMap,y1=new WeakMap,v0=new WeakMap,Q2=new WeakMap,Ju=new WeakMap,e_=new WeakMap,Bo=new WeakMap,_k=new WeakSet,K5=function(et){const ot=Jt(this,Bo);let ut=ot[4],ct=ot[5];const dt=[ut,ct,ut,ct];let ft=ut,St=ct,kt=ut,Tt=ct;const Rt=et?Math.max:Math.min,Ft=new Float32Array(4);for(let Bt=6,zt=ot.length;Bt<zt;Bt+=6){const Ht=ot[Bt+4],Ut=ot[Bt+5];isNaN(ot[Bt])?(Util$1.pointBoundingBox(Ht,Ut,dt),St>Ut?(ft=Ht,St=Ut):St===Ut&&(ft=Rt(ft,Ht)),Tt<Ut?(kt=Ht,Tt=Ut):Tt===Ut&&(kt=Rt(kt,Ht))):(Ft[0]=Ft[1]=1/0,Ft[2]=Ft[3]=-1/0,Util$1.bezierBoundingBox(ut,ct,...ot.slice(Bt,Bt+6),Ft),Util$1.rectBoundingBox(Ft[0],Ft[1],Ft[2],Ft[3],dt),St>Ft[1]?(ft=Ft[0],St=Ft[1]):St===Ft[1]&&(ft=Rt(ft,Ft[0])),Tt<Ft[3]?(kt=Ft[2],Tt=Ft[3]):Tt===Ft[3]&&(kt=Rt(kt,Ft[2]))),ut=Ht,ct=Ut}const jt=Jt(this,y1);jt[0]=dt[0]-Jt(this,v0),jt[1]=dt[1]-Jt(this,v0),jt[2]=dt[2]-dt[0]+2*Jt(this,v0),jt[3]=dt[3]-dt[1]+2*Jt(this,v0),this.firstPoint=[ft,St],this.lastPoint=[kt,Tt]};var t_,r_,n_,Ev,Vp,eT,X5,LE,AC,tT,Y5,rT,Z5,i_,tR;class HighlightOutliner{constructor(g,et=0,ot=0,ut=!0){Mr(this,eT);Mr(this,LE);Mr(this,tT);Mr(this,rT);Mr(this,i_);Mr(this,t_,void 0);Mr(this,r_,void 0);Mr(this,n_,void 0);Mr(this,Ev,[]);Mr(this,Vp,[]);const ct=[1/0,1/0,-1/0,-1/0],ft=10**-4;for(const{x:Ht,y:Ut,width:Kt,height:Yt}of g){const er=Math.floor((Ht-et)/ft)*ft,ar=Math.ceil((Ht+Kt+et)/ft)*ft,ir=Math.floor((Ut-et)/ft)*ft,lr=Math.ceil((Ut+Yt+et)/ft)*ft,cr=[er,ir,lr,!0],vr=[ar,ir,lr,!1];Jt(this,Ev).push(cr,vr),Util$1.rectBoundingBox(er,ir,ar,lr,ct)}const St=ct[2]-ct[0]+2*ot,kt=ct[3]-ct[1]+2*ot,Tt=ct[0]-ot,Rt=ct[1]-ot;let Ft=ut?-1/0:1/0,jt=1/0;const Bt=Jt(this,Ev).at(ut?-1:-2),zt=[Bt[0],Bt[2]];for(const Ht of Jt(this,Ev)){const[Ut,Kt,Yt,er]=Ht;!er&&ut?Kt<jt?(jt=Kt,Ft=Ut):Kt===jt&&(Ft=Math.max(Ft,Ut)):er&&!ut&&(Kt<jt?(jt=Kt,Ft=Ut):Kt===jt&&(Ft=Math.min(Ft,Ut))),Ht[0]=(Ut-Tt)/St,Ht[1]=(Kt-Rt)/kt,Ht[2]=(Yt-Rt)/kt}Ir(this,t_,new Float32Array([Tt,Rt,St,kt])),Ir(this,r_,[Ft,jt]),Ir(this,n_,zt)}getOutlines(){Jt(this,Ev).sort((et,ot)=>et[0]-ot[0]||et[1]-ot[1]||et[2]-ot[2]);const g=[];for(const et of Jt(this,Ev))et[3]?(g.push(...Qr(this,i_,tR).call(this,et)),Qr(this,tT,Y5).call(this,et)):(Qr(this,rT,Z5).call(this,et),g.push(...Qr(this,i_,tR).call(this,et)));return Qr(this,eT,X5).call(this,g)}}t_=new WeakMap,r_=new WeakMap,n_=new WeakMap,Ev=new WeakMap,Vp=new WeakMap,eT=new WeakSet,X5=function(g){const et=[],ot=new Set;for(const dt of g){const[ft,St,kt]=dt;et.push([ft,St,dt],[ft,kt,dt])}et.sort((dt,ft)=>dt[1]-ft[1]||dt[0]-ft[0]);for(let dt=0,ft=et.length;dt<ft;dt+=2){const St=et[dt][2],kt=et[dt+1][2];St.push(kt),kt.push(St),ot.add(St),ot.add(kt)}const ut=[];let ct;for(;ot.size>0;){const dt=ot.values().next().value;let[ft,St,kt,Tt,Rt]=dt;ot.delete(dt);let Ft=ft,jt=St;for(ct=[ft,kt],ut.push(ct);;){let Bt;if(ot.has(Tt))Bt=Tt;else if(ot.has(Rt))Bt=Rt;else break;ot.delete(Bt),[ft,St,kt,Tt,Rt]=Bt,Ft!==ft&&(ct.push(Ft,jt,ft,jt===St?St:kt),Ft=ft),jt=jt===St?kt:St}ct.push(Ft,jt)}return new HighlightOutline(ut,Jt(this,t_),Jt(this,r_),Jt(this,n_))},LE=new WeakSet,AC=function(g){const et=Jt(this,Vp);let ot=0,ut=et.length-1;for(;ot<=ut;){const ct=ot+ut>>1,dt=et[ct][0];if(dt===g)return ct;dt<g?ot=ct+1:ut=ct-1}return ut+1},tT=new WeakSet,Y5=function([,g,et]){const ot=Qr(this,LE,AC).call(this,g);Jt(this,Vp).splice(ot,0,[g,et])},rT=new WeakSet,Z5=function([,g,et]){const ot=Qr(this,LE,AC).call(this,g);for(let ut=ot;ut<Jt(this,Vp).length;ut++){const[ct,dt]=Jt(this,Vp)[ut];if(ct!==g)break;if(ct===g&&dt===et){Jt(this,Vp).splice(ut,1);return}}for(let ut=ot-1;ut>=0;ut--){const[ct,dt]=Jt(this,Vp)[ut];if(ct!==g)break;if(ct===g&&dt===et){Jt(this,Vp).splice(ut,1);return}}},i_=new WeakSet,tR=function(g){const[et,ot,ut]=g,ct=[[et,ot,ut]],dt=Qr(this,LE,AC).call(this,ut);for(let ft=0;ft<dt;ft++){const[St,kt]=Jt(this,Vp)[ft];for(let Tt=0,Rt=ct.length;Tt<Rt;Tt++){const[,Ft,jt]=ct[Tt];if(!(kt<=Ft||jt<=St)){if(Ft>=St){if(jt>kt)ct[Tt][1]=kt;else{if(Rt===1)return[];ct.splice(Tt,1),Tt--,Rt--}continue}ct[Tt][2]=St,jt>kt&&ct.push([et,kt,jt])}}}return ct};var s_,jE;class HighlightOutline extends Outline{constructor(et,ot,ut,ct){super();Mr(this,s_,void 0);Mr(this,jE,void 0);Ir(this,jE,et),Ir(this,s_,ot),this.firstPoint=ut,this.lastPoint=ct}toSVGPath(){const et=[];for(const ot of Jt(this,jE)){let[ut,ct]=ot;et.push(`M${ut} ${ct}`);for(let dt=2;dt<ot.length;dt+=2){const ft=ot[dt],St=ot[dt+1];ft===ut?(et.push(`V${St}`),ct=St):St===ct&&(et.push(`H${ft}`),ut=ft)}et.push("Z")}return et.join(" ")}serialize([et,ot,ut,ct],dt){const ft=[],St=ut-et,kt=ct-ot;for(const Tt of Jt(this,jE)){const Rt=new Array(Tt.length);for(let Ft=0;Ft<Tt.length;Ft+=2)Rt[Ft]=et+Tt[Ft]*St,Rt[Ft+1]=ct-Tt[Ft+1]*kt;ft.push(Rt)}return ft}get box(){return Jt(this,s_)}get classNamesForOutlining(){return["highlightOutline"]}}s_=new WeakMap,jE=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(g,et,ot,ut,ct,dt){return new FreeHighlightOutline(g,et,ot,ut,ct,dt)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(g,et,ot,ut,ct,dt=0){return new FreeHighlightOutliner(g,et,ot,ut,ct,dt)}}var BE,a_,y0,x1,o_,Ru,l_,u_,b1,Qu,_c,$l,$E,VE,eu,zE,Ep,c_,h_,rR,UE,kC,nT,J5,iT,Q5,sT,eN,d_,nR,x0,iy,Sv,rx,aT,tN,HE,TC,GE,PC,oT,rN,lT,nN,uT,iN,cT,sN,hT,aN;const Us=class Us extends AnnotationEditor{constructor(et){super({...et,name:"highlightEditor"});Mr(this,h_);Mr(this,UE);Mr(this,nT);Mr(this,iT);Mr(this,sT);Mr(this,d_);Mr(this,x0);Mr(this,aT);Mr(this,HE);Mr(this,GE);Mr(this,oT);Mr(this,lT);Mr(this,hT);Mr(this,BE,null);Mr(this,a_,0);Mr(this,y0,void 0);Mr(this,x1,null);Mr(this,o_,null);Mr(this,Ru,null);Mr(this,l_,null);Mr(this,u_,0);Mr(this,b1,null);Mr(this,Qu,null);Mr(this,_c,null);Mr(this,$l,!1);Mr(this,$E,null);Mr(this,VE,null);Mr(this,eu,null);Mr(this,zE,"");Mr(this,Ep,void 0);Mr(this,c_,"");this.color=et.color||Us._defaultColor,Ir(this,Ep,et.thickness||Us._defaultThickness),this.opacity=et.opacity||Us._defaultOpacity,Ir(this,y0,et.boxes||null),Ir(this,c_,et.methodOfCreation||""),Ir(this,zE,et.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",et.highlightId>-1?(Ir(this,$l,!0),Qr(this,UE,kC).call(this,et),Qr(this,x0,iy).call(this)):Jt(this,y0)&&(Ir(this,BE,et.anchorNode),Ir(this,a_,et.anchorOffset),Ir(this,l_,et.focusNode),Ir(this,u_,et.focusOffset),Qr(this,h_,rR).call(this),Qr(this,x0,iy).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const et=Us.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],et._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],et._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],et._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],et._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:Jt(this,$l)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:Jt(this,Ep),methodOfCreation:Jt(this,c_)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(et){return{numberOfColors:et.get("color").size}}static initialize(et,ot){var ut;AnnotationEditor.initialize(et,ot),Us._defaultColor||(Us._defaultColor=((ut=ot.highlightColors)==null?void 0:ut.values().next().value)||"#fff066")}static updateDefaultParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Us._defaultColor=ot;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Us._defaultThickness=ot;break}}translateInPage(et,ot){}get toolbarPosition(){return Jt(this,VE)}get commentButtonPosition(){return Jt(this,$E)}updateParams(et,ot){switch(et){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Qr(this,nT,J5).call(this,ot);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Qr(this,iT,Q5).call(this,ot);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,Us._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Us._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||Us._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,Jt(this,Ep)||Us._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,Jt(this,$l)]]}onUpdatedColor(){var et,ot;(et=this.parent)==null||et.drawLayer.updateProperties(Jt(this,_c),{root:{fill:this.color,"fill-opacity":this.opacity}}),(ot=Jt(this,o_))==null||ot.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",Ir(this,o_,new ColorPicker({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Qr(this,GE,PC).call(this))}getBaseTranslation(){return[0,0]}getRect(et,ot){return super.getRect(et,ot,Qr(this,GE,PC).call(this))}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),et&&this.div.focus()}remove(){Qr(this,d_,nR).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Qr(this,x0,iy).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ut;let ot=!1;this.parent&&!et?Qr(this,d_,nR).call(this):et&&(Qr(this,x0,iy).call(this,et),ot=!this.parent&&((ut=this.div)==null?void 0:ut.classList.contains("selectedEditor"))),super.setParent(et),this.show(this._isVisible),ot&&this.select()}rotate(et){var ct,dt,ft;const{drawLayer:ot}=this.parent;let ut;Jt(this,$l)?(et=(et-this.rotation+360)%360,ut=Qr(ct=Us,Sv,rx).call(ct,Jt(this,Qu).box,et)):ut=Qr(dt=Us,Sv,rx).call(dt,[this.x,this.y,this.width,this.height],et),ot.updateProperties(Jt(this,_c),{bbox:ut,root:{"data-main-rotation":et}}),ot.updateProperties(Jt(this,eu),{bbox:Qr(ft=Us,Sv,rx).call(ft,Jt(this,Ru).box,et),root:{"data-main-rotation":et}})}render(){if(this.div)return this.div;const et=super.render();Jt(this,zE)&&(et.setAttribute("aria-label",Jt(this,zE)),et.setAttribute("role","mark")),Jt(this,$l)?et.classList.add("free"):this.div.addEventListener("keydown",Qr(this,aT,tN).bind(this),{signal:this._uiManager._signal});const ot=Ir(this,b1,document.createElement("div"));return et.append(ot),ot.setAttribute("aria-hidden","true"),ot.className="internal",ot.style.clipPath=Jt(this,x1),this.setDims(this.width,this.height),bindEvents(this,Jt(this,b1),["pointerover","pointerleave"]),this.enableEditing(),et}pointerover(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(Jt(this,eu),{rootClass:{hovered:!0}})}pointerleave(){var et;this.isSelected||(et=this.parent)==null||et.drawLayer.updateProperties(Jt(this,eu),{rootClass:{hovered:!1}})}_moveCaret(et){switch(this.parent.unselect(this),et){case 0:case 2:Qr(this,HE,TC).call(this,!0);break;case 1:case 3:Qr(this,HE,TC).call(this,!1);break}}select(){var et;super.select(),Jt(this,eu)&&((et=this.parent)==null||et.drawLayer.updateProperties(Jt(this,eu),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var et;super.unselect(),Jt(this,eu)&&((et=this.parent)==null||et.drawLayer.updateProperties(Jt(this,eu),{rootClass:{selected:!1}}),Jt(this,$l)||Qr(this,HE,TC).call(this,!1))}get _mustFixPosition(){return!Jt(this,$l)}show(et=this._isVisible){super.show(et),this.parent&&(this.parent.drawLayer.updateProperties(Jt(this,_c),{rootClass:{hidden:!et}}),this.parent.drawLayer.updateProperties(Jt(this,eu),{rootClass:{hidden:!et}}))}static startHighlighting(et,ot,{target:ut,x:ct,y:dt}){const{x:ft,y:St,width:kt,height:Tt}=ut.getBoundingClientRect(),Rt=new AbortController,Ft=et.combinedSignal(Rt),jt=Bt=>{Rt.abort(),Qr(this,cT,sN).call(this,et,Bt)};window.addEventListener("blur",jt,{signal:Ft}),window.addEventListener("pointerup",jt,{signal:Ft}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:Ft}),window.addEventListener("contextmenu",noContextMenu,{signal:Ft}),ut.addEventListener("pointermove",Qr(this,uT,iN).bind(this,et),{signal:Ft}),this._freeHighlight=new FreeHighlightOutliner({x:ct,y:dt},[ft,St,kt,Tt],et.scale,this._defaultThickness/2,ot,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=et.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(et,ot,ut){var zt,Ht,Ut,Kt;let ct=null;if(et instanceof HighlightAnnotationElement){const{data:{quadPoints:Yt,rect:er,rotation:ar,id:ir,color:lr,opacity:cr,popupRef:vr,richText:xr,contentsObj:yr,creationDate:Sr,modificationDate:kr},parent:{page:{pageNumber:Pr}}}=et;ct=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(lr),opacity:cr,quadPoints:Yt,boxes:null,pageIndex:Pr-1,rect:er.slice(0),rotation:ar,annotationElementId:ir,id:ir,deleted:!1,popupRef:vr,richText:xr,comment:(yr==null?void 0:yr.str)||null,creationDate:Sr,modificationDate:kr}}else if(et instanceof InkAnnotationElement){const{data:{inkLists:Yt,rect:er,rotation:ar,id:ir,color:lr,borderStyle:{rawWidth:cr},popupRef:vr,richText:xr,contentsObj:yr,creationDate:Sr,modificationDate:kr},parent:{page:{pageNumber:Pr}}}=et;ct=et={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(lr),thickness:cr,inkLists:Yt,boxes:null,pageIndex:Pr-1,rect:er.slice(0),rotation:ar,annotationElementId:ir,id:ir,deleted:!1,popupRef:vr,richText:xr,comment:(yr==null?void 0:yr.str)||null,creationDate:Sr,modificationDate:kr}}const{color:dt,quadPoints:ft,inkLists:St,opacity:kt}=et,Tt=await super.deserialize(et,ot,ut);Tt.color=Util$1.makeHexColor(...dt),Tt.opacity=kt||1,St&&Ir(Tt,Ep,et.thickness),Tt._initialData=ct,et.comment&&Tt.setCommentData(et);const[Rt,Ft]=Tt.pageDimensions,[jt,Bt]=Tt.pageTranslation;if(ft){const Yt=Ir(Tt,y0,[]);for(let er=0;er<ft.length;er+=8)Yt.push({x:(ft[er]-jt)/Rt,y:1-(ft[er+1]-Bt)/Ft,width:(ft[er+2]-ft[er])/Rt,height:(ft[er+1]-ft[er+5])/Ft});Qr(zt=Tt,h_,rR).call(zt),Qr(Ht=Tt,x0,iy).call(Ht),Tt.rotate(Tt.rotation)}else if(St){Ir(Tt,$l,!0);const Yt=St[0],er={x:Yt[0]-jt,y:Ft-(Yt[1]-Bt)},ar=new FreeHighlightOutliner(er,[0,0,Rt,Ft],1,Jt(Tt,Ep)/2,!0,.001);for(let cr=0,vr=Yt.length;cr<vr;cr+=2)er.x=Yt[cr]-jt,er.y=Ft-(Yt[cr+1]-Bt),ar.add(er);const{id:ir,clipPathId:lr}=ot.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:Tt.color,"fill-opacity":Tt._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:ar.toSVGPath()}},!0,!0);Qr(Ut=Tt,UE,kC).call(Ut,{highlightOutlines:ar.getOutlines(),highlightId:ir,clipPathId:lr}),Qr(Kt=Tt,x0,iy).call(Kt),Tt.rotate(Tt.parentRotation)}return Tt}serialize(et=!1){if(this.isEmpty()||et)return null;if(this.deleted)return this.serializeDeleted();const ot=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),ut=super.serialize(et);return Object.assign(ut,{color:ot,opacity:this.opacity,thickness:Jt(this,Ep),quadPoints:Qr(this,oT,rN).call(this),outlines:Qr(this,lT,nN).call(this,ut.rect)}),this.addComment(ut),this.annotationElementId&&!Qr(this,hT,aN).call(this,ut)?null:(ut.id=this.annotationElementId,ut)}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};BE=new WeakMap,a_=new WeakMap,y0=new WeakMap,x1=new WeakMap,o_=new WeakMap,Ru=new WeakMap,l_=new WeakMap,u_=new WeakMap,b1=new WeakMap,Qu=new WeakMap,_c=new WeakMap,$l=new WeakMap,$E=new WeakMap,VE=new WeakMap,eu=new WeakMap,zE=new WeakMap,Ep=new WeakMap,c_=new WeakMap,h_=new WeakSet,rR=function(){const et=new HighlightOutliner(Jt(this,y0),.001);Ir(this,Qu,et.getOutlines()),[this.x,this.y,this.width,this.height]=Jt(this,Qu).box;const ot=new HighlightOutliner(Jt(this,y0),.0025,.001,this._uiManager.direction==="ltr");Ir(this,Ru,ot.getOutlines());const{firstPoint:ut}=Jt(this,Qu);Ir(this,$E,[(ut[0]-this.x)/this.width,(ut[1]-this.y)/this.height]);const{lastPoint:ct}=Jt(this,Ru);Ir(this,VE,[(ct[0]-this.x)/this.width,(ct[1]-this.y)/this.height])},UE=new WeakSet,kC=function({highlightOutlines:et,highlightId:ot,clipPathId:ut}){var Ft,jt;Ir(this,Qu,et);const ct=1.5;if(Ir(this,Ru,et.getNewOutline(Jt(this,Ep)/2+ct,.0025)),ot>=0)Ir(this,_c,ot),Ir(this,x1,ut),this.parent.drawLayer.finalizeDraw(ot,{bbox:et.box,path:{d:et.toSVGPath()}}),Ir(this,eu,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:Jt(this,Ru).box,path:{d:Jt(this,Ru).toSVGPath()}},!0));else if(this.parent){const Bt=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(Jt(this,_c),{bbox:Qr(Ft=Us,Sv,rx).call(Ft,Jt(this,Qu).box,(Bt-this.rotation+360)%360),path:{d:et.toSVGPath()}}),this.parent.drawLayer.updateProperties(Jt(this,eu),{bbox:Qr(jt=Us,Sv,rx).call(jt,Jt(this,Ru).box,Bt),path:{d:Jt(this,Ru).toSVGPath()}})}const[dt,ft,St,kt]=et.box;switch(this.rotation){case 0:this.x=dt,this.y=ft,this.width=St,this.height=kt;break;case 90:{const[Bt,zt]=this.parentDimensions;this.x=ft,this.y=1-dt,this.width=St*zt/Bt,this.height=kt*Bt/zt;break}case 180:this.x=1-dt,this.y=1-ft,this.width=St,this.height=kt;break;case 270:{const[Bt,zt]=this.parentDimensions;this.x=1-ft,this.y=dt,this.width=St*zt/Bt,this.height=kt*Bt/zt;break}}const{firstPoint:Tt}=et;Ir(this,$E,[(Tt[0]-dt)/St,(Tt[1]-ft)/kt]);const{lastPoint:Rt}=Jt(this,Ru);Ir(this,VE,[(Rt[0]-dt)/St,(Rt[1]-ft)/kt])},nT=new WeakSet,J5=function(et){const ot=(dt,ft)=>{this.color=dt,this.opacity=ft,this.onUpdatedColor()},ut=this.color,ct=this.opacity;this.addCommands({cmd:ot.bind(this,et,Us._defaultOpacity),undo:ot.bind(this,ut,ct),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(et)},!0)},iT=new WeakSet,Q5=function(et){const ot=Jt(this,Ep),ut=ct=>{Ir(this,Ep,ct),Qr(this,sT,eN).call(this,ct)};this.addCommands({cmd:ut.bind(this,et),undo:ut.bind(this,ot),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:et},!0)},sT=new WeakSet,eN=function(et){Jt(this,$l)&&(Qr(this,UE,kC).call(this,{highlightOutlines:Jt(this,Qu).getNewOutline(et/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},d_=new WeakSet,nR=function(){Jt(this,_c)===null||!this.parent||(this.parent.drawLayer.remove(Jt(this,_c)),Ir(this,_c,null),this.parent.drawLayer.remove(Jt(this,eu)),Ir(this,eu,null))},x0=new WeakSet,iy=function(et=this.parent){Jt(this,_c)===null&&({id:Ko(this,_c)._,clipPathId:Ko(this,x1)._}=et.drawLayer.draw({bbox:Jt(this,Qu).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:Jt(this,$l)},path:{d:Jt(this,Qu).toSVGPath()}},!1,!0),Ir(this,eu,et.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:Jt(this,$l)},bbox:Jt(this,Ru).box,path:{d:Jt(this,Ru).toSVGPath()}},Jt(this,$l))),Jt(this,b1)&&(Jt(this,b1).style.clipPath=Jt(this,x1)))},Sv=new WeakSet,rx=function([et,ot,ut,ct],dt){switch(dt){case 90:return[1-ot-ct,et,ct,ut];case 180:return[1-et-ut,1-ot-ct,ut,ct];case 270:return[ot,1-et-ut,ct,ut]}return[et,ot,ut,ct]},aT=new WeakSet,tN=function(et){Us._keyboardManager.exec(this,et)},HE=new WeakSet,TC=function(et){if(!Jt(this,BE))return;const ot=window.getSelection();et?ot.setPosition(Jt(this,BE),Jt(this,a_)):ot.setPosition(Jt(this,l_),Jt(this,u_))},GE=new WeakSet,PC=function(){return Jt(this,$l)?this.rotation:0},oT=new WeakSet,rN=function(){if(Jt(this,$l))return null;const[et,ot]=this.pageDimensions,[ut,ct]=this.pageTranslation,dt=Jt(this,y0),ft=new Float32Array(dt.length*8);let St=0;for(const{x:kt,y:Tt,width:Rt,height:Ft}of dt){const jt=kt*et+ut,Bt=(1-Tt)*ot+ct;ft[St]=ft[St+4]=jt,ft[St+1]=ft[St+3]=Bt,ft[St+2]=ft[St+6]=jt+Rt*et,ft[St+5]=ft[St+7]=Bt-Ft*ot,St+=8}return ft},lT=new WeakSet,nN=function(et){return Jt(this,Qu).serialize(et,Qr(this,GE,PC).call(this))},uT=new WeakSet,iN=function(et,ot){this._freeHighlight.add(ot)&&et.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},cT=new WeakSet,sN=function(et,ot){this._freeHighlight.isEmpty()?et.drawLayer.remove(this._freeHighlightId):et.createAndAddNewEditor(ot,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},hT=new WeakSet,aN=function(et){const{color:ot}=this._initialData;return this.hasEditedComment||et.color.some((ut,ct)=>ut!==ot[ct])},Mr(Us,Sv),Mr(Us,uT),Mr(Us,cT),Kn(Us,"_defaultColor",null),Kn(Us,"_defaultOpacity",1),Kn(Us,"_defaultThickness",12),Kn(Us,"_type","highlight"),Kn(Us,"_editorType",AnnotationEditorType.HIGHLIGHT),Kn(Us,"_freeHighlightId",-1),Kn(Us,"_freeHighlight",null),Kn(Us,"_freeHighlightClipId","");let HighlightEditor=Us;var E1;class DrawingOptions{constructor(){Mr(this,E1,Object.create(null))}updateProperty(g,et){this[g]=et,this.updateSVGProperty(g,et)}updateProperties(g){if(g)for(const[et,ot]of Object.entries(g))et.startsWith("_")||this.updateProperty(et,ot)}updateSVGProperty(g,et){Jt(this,E1)[g]=et}toSVGProperties(){const g=Jt(this,E1);return Ir(this,E1,Object.create(null)),{root:g}}reset(){Ir(this,E1,Object.create(null))}updateAll(g=this){this.updateProperties(g)}clone(){unreachable("Not implemented")}}E1=new WeakMap;var _h,WE,wl,S1,w1,wv,_v,Cv,_1,f_,iR,p_,sR,m_,aR,C1,XS,dT,oN,qE,RC,A1,YS,Av,nx;const fs=class fs extends AnnotationEditor{constructor(et){super(et);Mr(this,f_);Mr(this,p_);Mr(this,m_);Mr(this,C1);Mr(this,dT);Mr(this,qE);Mr(this,A1);Mr(this,Av);Mr(this,_h,null);Mr(this,WE,void 0);Kn(this,"_colorPicker",null);Kn(this,"_drawId",null);Ir(this,WE,et.mustBeCommitted||!1),this._addOutlines(et)}onUpdatedColor(){var et;(et=this._colorPicker)==null||et.update(this.color),super.onUpdatedColor()}_addOutlines(et){et.drawOutlines&&(Qr(this,f_,iR).call(this,et),Qr(this,C1,XS).call(this))}static _mergeSVGProperties(et,ot){const ut=new Set(Object.keys(et));for(const[ct,dt]of Object.entries(ot))ut.has(ct)?Object.assign(et[ct],dt):et[ct]=dt;return et}static getDefaultDrawingOptions(et){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(et,ot){const ut=this.typesMap.get(et);ut&&this._defaultDrawingOptions.updateProperty(ut,ot),this._currentParent&&(Jt(fs,wl).updateProperty(ut,ot),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(et,ot){const ut=this.constructor.typesMap.get(et);ut&&this._updateProperty(et,ut,ot)}static get defaultPropertiesToUpdate(){const et=[],ot=this._defaultDrawingOptions;for(const[ut,ct]of this.typesMap)et.push([ut,ot[ct]]);return et}get propertiesToUpdate(){const et=[],{_drawingOptions:ot}=this;for(const[ut,ct]of this.constructor.typesMap)et.push([ut,ot[ct]]);return et}_updateProperty(et,ot,ut){const ct=this._drawingOptions,dt=ct[ot],ft=St=>{var Tt;ct.updateProperty(ot,St);const kt=Jt(this,_h).updateProperty(ot,St);kt&&Qr(this,A1,YS).call(this,kt),(Tt=this.parent)==null||Tt.drawLayer.updateProperties(this._drawId,ct.toSVGProperties()),et===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:ft.bind(this,ut),undo:ft.bind(this,dt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:et,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,fs._mergeSVGProperties(Jt(this,_h).getPathResizingSVGProperties(Qr(this,qE,RC).call(this)),{bbox:Qr(this,Av,nx).call(this)}))}_onResized(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,fs._mergeSVGProperties(Jt(this,_h).getPathResizedSVGProperties(Qr(this,qE,RC).call(this)),{bbox:Qr(this,Av,nx).call(this)}))}_onTranslating(et,ot){var ut;(ut=this.parent)==null||ut.drawLayer.updateProperties(this._drawId,{bbox:Qr(this,Av,nx).call(this)})}_onTranslated(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,fs._mergeSVGProperties(Jt(this,_h).getPathTranslatedSVGProperties(Qr(this,qE,RC).call(this),this.parentDimensions),{bbox:Qr(this,Av,nx).call(this)}))}_onStartDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var et;(et=this.parent)==null||et.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(et){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,Jt(this,WE)&&(Ir(this,WE,!1),this.commit(),this.parent.setSelected(this),et&&this.isOnScreen&&this.div.focus())}remove(){Qr(this,m_,aR).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Qr(this,C1,XS).call(this),Qr(this,A1,YS).call(this,Jt(this,_h).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(et){var ut;let ot=!1;this.parent&&!et?(this._uiManager.removeShouldRescale(this),Qr(this,m_,aR).call(this)):et&&(this._uiManager.addShouldRescale(this),Qr(this,C1,XS).call(this,et),ot=!this.parent&&((ut=this.div)==null?void 0:ut.classList.contains("selectedEditor"))),super.setParent(et),ot&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,fs._mergeSVGProperties({bbox:Qr(this,Av,nx).call(this)},Jt(this,_h).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Qr(this,A1,YS).call(this,Jt(this,_h).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let et,ot;this._isCopy&&(et=this.x,ot=this.y);const ut=super.render();ut.classList.add("draw");const ct=document.createElement("div");return ut.append(ct),ct.setAttribute("aria-hidden","true"),ct.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(et,ot),ut}static createDrawerInstance(et,ot,ut,ct,dt){unreachable("Not implemented")}static startDrawing(et,ot,ut,ct){var Ht;const{target:dt,offsetX:ft,offsetY:St,pointerId:kt,pointerType:Tt}=ct;if(Jt(fs,_v)&&Jt(fs,_v)!==Tt)return;const{viewport:{rotation:Rt}}=et,{width:Ft,height:jt}=dt.getBoundingClientRect(),Bt=Ir(fs,S1,new AbortController),zt=et.combinedSignal(Bt);if(Jt(fs,wv)||Ir(fs,wv,kt),Jt(fs,_v)??Ir(fs,_v,Tt),window.addEventListener("pointerup",Ut=>{var Kt;Jt(fs,wv)===Ut.pointerId?this._endDraw(Ut):(Kt=Jt(fs,Cv))==null||Kt.delete(Ut.pointerId)},{signal:zt}),window.addEventListener("pointercancel",Ut=>{var Kt;Jt(fs,wv)===Ut.pointerId?this._currentParent.endDrawingSession():(Kt=Jt(fs,Cv))==null||Kt.delete(Ut.pointerId)},{signal:zt}),window.addEventListener("pointerdown",Ut=>{Jt(fs,_v)===Ut.pointerType&&((Jt(fs,Cv)||Ir(fs,Cv,new Set)).add(Ut.pointerId),Jt(fs,wl).isCancellable()&&(Jt(fs,wl).removeLastElement(),Jt(fs,wl).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:zt}),window.addEventListener("contextmenu",noContextMenu,{signal:zt}),dt.addEventListener("pointermove",this._drawMove.bind(this),{signal:zt}),dt.addEventListener("touchmove",Ut=>{Ut.timeStamp===Jt(fs,_1)&&stopEvent(Ut)},{signal:zt}),et.toggleDrawing(),(Ht=ot._editorUndoBar)==null||Ht.hide(),Jt(fs,wl)){et.drawLayer.updateProperties(this._currentDrawId,Jt(fs,wl).startNew(ft,St,Ft,jt,Rt));return}ot.updateUIForDefaultProperties(this),Ir(fs,wl,this.createDrawerInstance(ft,St,Ft,jt,Rt)),Ir(fs,w1,this.getDefaultDrawingOptions()),this._currentParent=et,{id:this._currentDrawId}=et.drawLayer.draw(this._mergeSVGProperties(Jt(fs,w1).toSVGProperties(),Jt(fs,wl).defaultSVGProperties),!0,!1)}static _drawMove(et){var dt;if(Ir(fs,_1,-1),!Jt(fs,wl))return;const{offsetX:ot,offsetY:ut,pointerId:ct}=et;if(Jt(fs,wv)===ct){if(((dt=Jt(fs,Cv))==null?void 0:dt.size)>=1){this._endDraw(et);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Jt(fs,wl).add(ot,ut)),Ir(fs,_1,et.timeStamp),stopEvent(et)}}static _cleanup(et){et&&(this._currentDrawId=-1,this._currentParent=null,Ir(fs,wl,null),Ir(fs,w1,null),Ir(fs,_v,null),Ir(fs,_1,NaN)),Jt(fs,S1)&&(Jt(fs,S1).abort(),Ir(fs,S1,null),Ir(fs,wv,NaN),Ir(fs,Cv,null))}static _endDraw(et){const ot=this._currentParent;if(ot){if(ot.toggleDrawing(!0),this._cleanup(!1),(et==null?void 0:et.target)===ot.div&&ot.drawLayer.updateProperties(this._currentDrawId,Jt(fs,wl).end(et.offsetX,et.offsetY)),this.supportMultipleDrawings){const ut=Jt(fs,wl),ct=this._currentDrawId,dt=ut.getLastElement();ot.addCommands({cmd:()=>{ot.drawLayer.updateProperties(ct,ut.setLastElement(dt))},undo:()=>{ot.drawLayer.updateProperties(ct,ut.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(et){const ot=this._currentParent;if(!ot)return null;if(ot.toggleDrawing(!0),ot.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!Jt(fs,wl).isEmpty()){const{pageDimensions:[ut,ct],scale:dt}=ot,ft=ot.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Jt(fs,wl).getOutlines(ut*dt,ct*dt,dt,this._INNER_MARGIN),drawingOptions:Jt(fs,w1),mustBeCommitted:!et});return this._cleanup(!0),ft}return ot.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(et){}static deserializeDraw(et,ot,ut,ct,dt,ft){unreachable("Not implemented")}static async deserialize(et,ot,ut){var Rt,Ft;const{rawDims:{pageWidth:ct,pageHeight:dt,pageX:ft,pageY:St}}=ot.viewport,kt=this.deserializeDraw(ft,St,ct,dt,this._INNER_MARGIN,et),Tt=await super.deserialize(et,ot,ut);return Tt.createDrawingOptions(et),Qr(Rt=Tt,f_,iR).call(Rt,{drawOutlines:kt}),Qr(Ft=Tt,C1,XS).call(Ft),Tt.onScaleChanging(),Tt.rotate(),Tt}serializeDraw(et){const[ot,ut]=this.pageTranslation,[ct,dt]=this.pageDimensions;return Jt(this,_h).serialize([ot,ut,ct,dt],et)}renderAnnotationElement(et){return et.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};_h=new WeakMap,WE=new WeakMap,wl=new WeakMap,S1=new WeakMap,w1=new WeakMap,wv=new WeakMap,_v=new WeakMap,Cv=new WeakMap,_1=new WeakMap,f_=new WeakSet,iR=function({drawOutlines:et,drawId:ot,drawingOptions:ut}){Ir(this,_h,et),this._drawingOptions||(this._drawingOptions=ut),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),ot>=0?(this._drawId=ot,this.parent.drawLayer.finalizeDraw(ot,et.defaultProperties)):this._drawId=Qr(this,p_,sR).call(this,et,this.parent),Qr(this,A1,YS).call(this,et.box)},p_=new WeakSet,sR=function(et,ot){const{id:ut}=ot.drawLayer.draw(fs._mergeSVGProperties(this._drawingOptions.toSVGProperties(),et.defaultSVGProperties),!1,!1);return ut},m_=new WeakSet,aR=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},C1=new WeakSet,XS=function(et=this.parent){if(!(this._drawId!==null&&this.parent===et)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,et.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=Qr(this,p_,sR).call(this,Jt(this,_h),et)}},dT=new WeakSet,oN=function([et,ot,ut,ct]){const{parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[ot,1-et,ut*(ft/dt),ct*(dt/ft)];case 180:return[1-et,1-ot,ut,ct];case 270:return[1-ot,et,ut*(ft/dt),ct*(dt/ft)];default:return[et,ot,ut,ct]}},qE=new WeakSet,RC=function(){const{x:et,y:ot,width:ut,height:ct,parentDimensions:[dt,ft],rotation:St}=this;switch(St){case 90:return[1-ot,et,ut*(dt/ft),ct*(ft/dt)];case 180:return[1-et,1-ot,ut,ct];case 270:return[ot,1-et,ut*(dt/ft),ct*(ft/dt)];default:return[et,ot,ut,ct]}},A1=new WeakSet,YS=function(et){[this.x,this.y,this.width,this.height]=Qr(this,dT,oN).call(this,et),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Av=new WeakSet,nx=function(){const{x:et,y:ot,width:ut,height:ct,rotation:dt,parentRotation:ft,parentDimensions:[St,kt]}=this;switch((dt*4+ft)/90){case 1:return[1-ot-ct,et,ct,ut];case 2:return[1-et-ut,1-ot-ct,ut,ct];case 3:return[ot,1-et-ut,ct,ut];case 4:return[et,ot-ut*(St/kt),ct*(kt/St),ut*(St/kt)];case 5:return[1-ot,et,ut*(St/kt),ct*(kt/St)];case 6:return[1-et-ct*(kt/St),1-ot,ct*(kt/St),ut*(St/kt)];case 7:return[ot-ut*(St/kt),1-et-ct*(kt/St),ut*(St/kt),ct*(kt/St)];case 8:return[et-ut,ot-ct,ut,ct];case 9:return[1-ot,et-ut,ct,ut];case 10:return[1-et,1-ot,ut,ct];case 11:return[ot-ct,1-et,ct,ut];case 12:return[et-ct*(kt/St),ot,ct*(kt/St),ut*(St/kt)];case 13:return[1-ot-ut*(St/kt),et-ct*(kt/St),ut*(St/kt),ct*(kt/St)];case 14:return[1-et,1-ot-ut*(St/kt),ct*(kt/St),ut*(St/kt)];case 15:return[ot,1-et,ut*(St/kt),ct*(kt/St)];default:return[et,ot,ut,ct]}},Kn(fs,"_currentDrawId",-1),Kn(fs,"_currentParent",null),Mr(fs,wl,null),Mr(fs,S1,null),Mr(fs,w1,null),Mr(fs,wv,NaN),Mr(fs,_v,null),Mr(fs,Cv,null),Mr(fs,_1,NaN),Kn(fs,"_INNER_MARGIN",3);let DrawingEditor=fs;var Sm,_l,Cl,k1,KE,ou,Vl,Sp,T1,P1,R1,XE,NC;class InkDrawOutliner{constructor(g,et,ot,ut,ct,dt){Mr(this,XE);Mr(this,Sm,new Float64Array(6));Mr(this,_l,void 0);Mr(this,Cl,void 0);Mr(this,k1,void 0);Mr(this,KE,void 0);Mr(this,ou,void 0);Mr(this,Vl,"");Mr(this,Sp,0);Mr(this,T1,new InkDrawOutline);Mr(this,P1,void 0);Mr(this,R1,void 0);Ir(this,P1,ot),Ir(this,R1,ut),Ir(this,k1,ct),Ir(this,KE,dt),[g,et]=Qr(this,XE,NC).call(this,g,et);const ft=Ir(this,_l,[NaN,NaN,NaN,NaN,g,et]);Ir(this,ou,[g,et]),Ir(this,Cl,[{line:ft,points:Jt(this,ou)}]),Jt(this,Sm).set(ft,0)}updateProperty(g,et){g==="stroke-width"&&Ir(this,KE,et)}isEmpty(){return!Jt(this,Cl)||Jt(this,Cl).length===0}isCancellable(){return Jt(this,ou).length<=10}add(g,et){[g,et]=Qr(this,XE,NC).call(this,g,et);const[ot,ut,ct,dt]=Jt(this,Sm).subarray(2,6),ft=g-ct,St=et-dt;return Math.hypot(Jt(this,P1)*ft,Jt(this,R1)*St)<=2?null:(Jt(this,ou).push(g,et),isNaN(ot)?(Jt(this,Sm).set([ct,dt,g,et],2),Jt(this,_l).push(NaN,NaN,NaN,NaN,g,et),{path:{d:this.toSVGPath()}}):(isNaN(Jt(this,Sm)[0])&&Jt(this,_l).splice(6,6),Jt(this,Sm).set([ot,ut,ct,dt,g,et],0),Jt(this,_l).push(...Outline.createBezierPoints(ot,ut,ct,dt,g,et)),{path:{d:this.toSVGPath()}}))}end(g,et){const ot=this.add(g,et);return ot||(Jt(this,ou).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(g,et,ot,ut,ct){Ir(this,P1,ot),Ir(this,R1,ut),Ir(this,k1,ct),[g,et]=Qr(this,XE,NC).call(this,g,et);const dt=Ir(this,_l,[NaN,NaN,NaN,NaN,g,et]);Ir(this,ou,[g,et]);const ft=Jt(this,Cl).at(-1);return ft&&(ft.line=new Float32Array(ft.line),ft.points=new Float32Array(ft.points)),Jt(this,Cl).push({line:dt,points:Jt(this,ou)}),Jt(this,Sm).set(dt,0),Ir(this,Sp,0),this.toSVGPath(),null}getLastElement(){return Jt(this,Cl).at(-1)}setLastElement(g){return Jt(this,Cl)?(Jt(this,Cl).push(g),Ir(this,_l,g.line),Ir(this,ou,g.points),Ir(this,Sp,0),{path:{d:this.toSVGPath()}}):Jt(this,T1).setLastElement(g)}removeLastElement(){if(!Jt(this,Cl))return Jt(this,T1).removeLastElement();Jt(this,Cl).pop(),Ir(this,Vl,"");for(let g=0,et=Jt(this,Cl).length;g<et;g++){const{line:ot,points:ut}=Jt(this,Cl)[g];Ir(this,_l,ot),Ir(this,ou,ut),Ir(this,Sp,0),this.toSVGPath()}return{path:{d:Jt(this,Vl)}}}toSVGPath(){const g=Outline.svgRound(Jt(this,_l)[4]),et=Outline.svgRound(Jt(this,_l)[5]);if(Jt(this,ou).length===2)return Ir(this,Vl,`${Jt(this,Vl)} M ${g} ${et} Z`),Jt(this,Vl);if(Jt(this,ou).length<=6){const ut=Jt(this,Vl).lastIndexOf("M");Ir(this,Vl,`${Jt(this,Vl).slice(0,ut)} M ${g} ${et}`),Ir(this,Sp,6)}if(Jt(this,ou).length===4){const ut=Outline.svgRound(Jt(this,_l)[10]),ct=Outline.svgRound(Jt(this,_l)[11]);return Ir(this,Vl,`${Jt(this,Vl)} L ${ut} ${ct}`),Ir(this,Sp,12),Jt(this,Vl)}const ot=[];Jt(this,Sp)===0&&(ot.push(`M ${g} ${et}`),Ir(this,Sp,6));for(let ut=Jt(this,Sp),ct=Jt(this,_l).length;ut<ct;ut+=6){const[dt,ft,St,kt,Tt,Rt]=Jt(this,_l).slice(ut,ut+6).map(Outline.svgRound);ot.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${Rt}`)}return Ir(this,Vl,Jt(this,Vl)+ot.join(" ")),Ir(this,Sp,Jt(this,_l).length),Jt(this,Vl)}getOutlines(g,et,ot,ut){const ct=Jt(this,Cl).at(-1);return ct.line=new Float32Array(ct.line),ct.points=new Float32Array(ct.points),Jt(this,T1).build(Jt(this,Cl),g,et,ot,Jt(this,k1),Jt(this,KE),ut),Ir(this,Sm,null),Ir(this,_l,null),Ir(this,Cl,null),Ir(this,Vl,null),Jt(this,T1)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Sm=new WeakMap,_l=new WeakMap,Cl=new WeakMap,k1=new WeakMap,KE=new WeakMap,ou=new WeakMap,Vl=new WeakMap,Sp=new WeakMap,T1=new WeakMap,P1=new WeakMap,R1=new WeakMap,XE=new WeakSet,NC=function(g,et){return Outline._normalizePoint(g,et,Jt(this,P1),Jt(this,R1),Jt(this,k1))};var lu,g_,v_,_d,wm,_m,YE,ZE,N1,zp,$m,fT,lN,pT,uN,mT,cN;class InkDrawOutline extends Outline{constructor(){super(...arguments);Mr(this,zp);Mr(this,fT);Mr(this,pT);Mr(this,mT);Mr(this,lu,void 0);Mr(this,g_,0);Mr(this,v_,void 0);Mr(this,_d,void 0);Mr(this,wm,void 0);Mr(this,_m,void 0);Mr(this,YE,void 0);Mr(this,ZE,void 0);Mr(this,N1,void 0)}build(et,ot,ut,ct,dt,ft,St){Ir(this,wm,ot),Ir(this,_m,ut),Ir(this,YE,ct),Ir(this,ZE,dt),Ir(this,N1,ft),Ir(this,v_,St??0),Ir(this,_d,et),Qr(this,pT,uN).call(this)}get thickness(){return Jt(this,N1)}setLastElement(et){return Jt(this,_d).push(et),{path:{d:this.toSVGPath()}}}removeLastElement(){return Jt(this,_d).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const et=[];for(const{line:ot}of Jt(this,_d)){if(et.push(`M${Outline.svgRound(ot[4])} ${Outline.svgRound(ot[5])}`),ot.length===6){et.push("Z");continue}if(ot.length===12&&isNaN(ot[6])){et.push(`L${Outline.svgRound(ot[10])} ${Outline.svgRound(ot[11])}`);continue}for(let ut=6,ct=ot.length;ut<ct;ut+=6){const[dt,ft,St,kt,Tt,Rt]=ot.subarray(ut,ut+6).map(Outline.svgRound);et.push(`C${dt} ${ft} ${St} ${kt} ${Tt} ${Rt}`)}}return et.join("")}serialize([et,ot,ut,ct],dt){const ft=[],St=[],[kt,Tt,Rt,Ft]=Qr(this,fT,lN).call(this);let jt,Bt,zt,Ht,Ut,Kt,Yt,er,ar;switch(Jt(this,ZE)){case 0:ar=Outline._rescale,jt=et,Bt=ot+ct,zt=ut,Ht=-ct,Ut=et+kt*ut,Kt=ot+(1-Tt-Ft)*ct,Yt=et+(kt+Rt)*ut,er=ot+(1-Tt)*ct;break;case 90:ar=Outline._rescaleAndSwap,jt=et,Bt=ot,zt=ut,Ht=ct,Ut=et+Tt*ut,Kt=ot+kt*ct,Yt=et+(Tt+Ft)*ut,er=ot+(kt+Rt)*ct;break;case 180:ar=Outline._rescale,jt=et+ut,Bt=ot,zt=-ut,Ht=ct,Ut=et+(1-kt-Rt)*ut,Kt=ot+Tt*ct,Yt=et+(1-kt)*ut,er=ot+(Tt+Ft)*ct;break;case 270:ar=Outline._rescaleAndSwap,jt=et+ut,Bt=ot+ct,zt=-ut,Ht=-ct,Ut=et+(1-Tt-Ft)*ut,Kt=ot+(1-kt-Rt)*ct,Yt=et+(1-Tt)*ut,er=ot+(1-kt)*ct;break}for(const{line:ir,points:lr}of Jt(this,_d))ft.push(ar(ir,jt,Bt,zt,Ht,dt?new Array(ir.length):null)),St.push(ar(lr,jt,Bt,zt,Ht,dt?new Array(lr.length):null));return{lines:ft,points:St,rect:[Ut,Kt,Yt,er]}}static deserialize(et,ot,ut,ct,dt,{paths:{lines:ft,points:St},rotation:kt,thickness:Tt}){const Rt=[];let Ft,jt,Bt,zt,Ht;switch(kt){case 0:Ht=Outline._rescale,Ft=-et/ut,jt=ot/ct+1,Bt=1/ut,zt=-1/ct;break;case 90:Ht=Outline._rescaleAndSwap,Ft=-ot/ct,jt=-et/ut,Bt=1/ct,zt=1/ut;break;case 180:Ht=Outline._rescale,Ft=et/ut+1,jt=-ot/ct,Bt=-1/ut,zt=1/ct;break;case 270:Ht=Outline._rescaleAndSwap,Ft=ot/ct+1,jt=et/ut+1,Bt=-1/ct,zt=-1/ut;break}if(!ft){ft=[];for(const Kt of St){const Yt=Kt.length;if(Yt===2){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Kt[0],Kt[1]]));continue}if(Yt===4){ft.push(new Float32Array([NaN,NaN,NaN,NaN,Kt[0],Kt[1],NaN,NaN,NaN,NaN,Kt[2],Kt[3]]));continue}const er=new Float32Array(3*(Yt-2));ft.push(er);let[ar,ir,lr,cr]=Kt.subarray(0,4);er.set([NaN,NaN,NaN,NaN,ar,ir],0);for(let vr=4;vr<Yt;vr+=2){const xr=Kt[vr],yr=Kt[vr+1];er.set(Outline.createBezierPoints(ar,ir,lr,cr,xr,yr),(vr-2)*3),[ar,ir,lr,cr]=[lr,cr,xr,yr]}}}for(let Kt=0,Yt=ft.length;Kt<Yt;Kt++)Rt.push({line:Ht(ft[Kt].map(er=>er??NaN),Ft,jt,Bt,zt),points:Ht(St[Kt].map(er=>er??NaN),Ft,jt,Bt,zt)});const Ut=new this.prototype.constructor;return Ut.build(Rt,ut,ct,1,kt,Tt,dt),Ut}get box(){return Jt(this,lu)}updateProperty(et,ot){return et==="stroke-width"?Qr(this,mT,cN).call(this,ot):null}updateParentDimensions([et,ot],ut){const[ct,dt]=Qr(this,zp,$m).call(this);Ir(this,wm,et),Ir(this,_m,ot),Ir(this,YE,ut);const[ft,St]=Qr(this,zp,$m).call(this),kt=ft-ct,Tt=St-dt,Rt=Jt(this,lu);return Rt[0]-=kt,Rt[1]-=Tt,Rt[2]+=2*kt,Rt[3]+=2*Tt,Rt}updateRotation(et){return Ir(this,g_,et),{path:{transform:this.rotationTransform}}}get viewBox(){return Jt(this,lu).map(Outline.svgRound).join(" ")}get defaultProperties(){const[et,ot]=Jt(this,lu);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get rotationTransform(){const[,,et,ot]=Jt(this,lu);let ut=0,ct=0,dt=0,ft=0,St=0,kt=0;switch(Jt(this,g_)){case 90:ct=ot/et,dt=-et/ot,St=et;break;case 180:ut=-1,ft=-1,St=et,kt=ot;break;case 270:ct=-ot/et,dt=et/ot,kt=ot;break;default:return""}return`matrix(${ut} ${ct} ${dt} ${ft} ${Outline.svgRound(St)} ${Outline.svgRound(kt)})`}getPathResizingSVGProperties([et,ot,ut,ct]){const[dt,ft]=Qr(this,zp,$m).call(this),[St,kt,Tt,Rt]=Jt(this,lu);if(Math.abs(Tt-dt)<=Outline.PRECISION||Math.abs(Rt-ft)<=Outline.PRECISION){const Ht=et+ut/2-(St+Tt/2),Ut=ot+ct/2-(kt+Rt/2);return{path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:`${this.rotationTransform} translate(${Ht} ${Ut})`}}}const Ft=(ut-2*dt)/(Tt-2*dt),jt=(ct-2*ft)/(Rt-2*ft),Bt=Tt/ut,zt=Rt/ct;return{path:{"transform-origin":`${Outline.svgRound(St)} ${Outline.svgRound(kt)}`,transform:`${this.rotationTransform} scale(${Bt} ${zt}) translate(${Outline.svgRound(dt)} ${Outline.svgRound(ft)}) scale(${Ft} ${jt}) translate(${Outline.svgRound(-dt)} ${Outline.svgRound(-ft)})`}}}getPathResizedSVGProperties([et,ot,ut,ct]){const[dt,ft]=Qr(this,zp,$m).call(this),St=Jt(this,lu),[kt,Tt,Rt,Ft]=St;if(St[0]=et,St[1]=ot,St[2]=ut,St[3]=ct,Math.abs(Rt-dt)<=Outline.PRECISION||Math.abs(Ft-ft)<=Outline.PRECISION){const Ut=et+ut/2-(kt+Rt/2),Kt=ot+ct/2-(Tt+Ft/2);for(const{line:Yt,points:er}of Jt(this,_d))Outline._translate(Yt,Ut,Kt,Yt),Outline._translate(er,Ut,Kt,er);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const jt=(ut-2*dt)/(Rt-2*dt),Bt=(ct-2*ft)/(Ft-2*ft),zt=-jt*(kt+dt)+et+dt,Ht=-Bt*(Tt+ft)+ot+ft;if(jt!==1||Bt!==1||zt!==0||Ht!==0)for(const{line:Ut,points:Kt}of Jt(this,_d))Outline._rescale(Ut,zt,Ht,jt,Bt,Ut),Outline._rescale(Kt,zt,Ht,jt,Bt,Kt);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([et,ot],ut){const[ct,dt]=ut,ft=Jt(this,lu),St=et-ft[0],kt=ot-ft[1];if(Jt(this,wm)===ct&&Jt(this,_m)===dt)for(const{line:Tt,points:Rt}of Jt(this,_d))Outline._translate(Tt,St,kt,Tt),Outline._translate(Rt,St,kt,Rt);else{const Tt=Jt(this,wm)/ct,Rt=Jt(this,_m)/dt;Ir(this,wm,ct),Ir(this,_m,dt);for(const{line:Ft,points:jt}of Jt(this,_d))Outline._rescale(Ft,St,kt,Tt,Rt,Ft),Outline._rescale(jt,St,kt,Tt,Rt,jt);ft[2]*=Tt,ft[3]*=Rt}return ft[0]=et,ft[1]=ot,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(ot)}`}}}get defaultSVGProperties(){const et=Jt(this,lu);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(et[0])} ${Outline.svgRound(et[1])}`,transform:this.rotationTransform||null},bbox:et}}}lu=new WeakMap,g_=new WeakMap,v_=new WeakMap,_d=new WeakMap,wm=new WeakMap,_m=new WeakMap,YE=new WeakMap,ZE=new WeakMap,N1=new WeakMap,zp=new WeakSet,$m=function(et=Jt(this,N1)){const ot=Jt(this,v_)+et/2*Jt(this,YE);return Jt(this,ZE)%180===0?[ot/Jt(this,wm),ot/Jt(this,_m)]:[ot/Jt(this,_m),ot/Jt(this,wm)]},fT=new WeakSet,lN=function(){const[et,ot,ut,ct]=Jt(this,lu),[dt,ft]=Qr(this,zp,$m).call(this,0);return[et+dt,ot+ft,ut-2*dt,ct-2*ft]},pT=new WeakSet,uN=function(){const et=Ir(this,lu,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:ct}of Jt(this,_d)){if(ct.length<=12){for(let St=4,kt=ct.length;St<kt;St+=6)Util$1.pointBoundingBox(ct[St],ct[St+1],et);continue}let dt=ct[4],ft=ct[5];for(let St=6,kt=ct.length;St<kt;St+=6){const[Tt,Rt,Ft,jt,Bt,zt]=ct.subarray(St,St+6);Util$1.bezierBoundingBox(dt,ft,Tt,Rt,Ft,jt,Bt,zt,et),dt=Bt,ft=zt}}const[ot,ut]=Qr(this,zp,$m).call(this);et[0]=MathClamp(et[0]-ot,0,1),et[1]=MathClamp(et[1]-ut,0,1),et[2]=MathClamp(et[2]+ot,0,1),et[3]=MathClamp(et[3]+ut,0,1),et[2]-=et[0],et[3]-=et[1]},mT=new WeakSet,cN=function(et){const[ot,ut]=Qr(this,zp,$m).call(this);Ir(this,N1,et);const[ct,dt]=Qr(this,zp,$m).call(this),[ft,St]=[ct-ot,dt-ut],kt=Jt(this,lu);return kt[0]-=ft,kt[1]-=St,kt[2]+=2*ft,kt[3]+=2*St,kt};class InkDrawingOptions extends DrawingOptions{constructor(g){super(),this._viewParameters=g,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(g,et){g==="stroke-width"&&(et??(et=this["stroke-width"]),et*=this._viewParameters.realScale),super.updateSVGProperty(g,et)}clone(){const g=new InkDrawingOptions(this._viewParameters);return g.updateAll(this),g}}var gT,hN;const lx=class lx extends DrawingEditor{constructor(et){super({...et,name:"inkEditor"});Mr(this,gT);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new InkDrawingOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(et,ot,ut,ct,dt){return new InkDrawOutliner(et,ot,ut,ct,dt,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(et,ot,ut,ct,dt,ft){return InkDrawOutline.deserialize(et,ot,ut,ct,dt,ft)}static async deserialize(et,ot,ut){let ct=null;if(et instanceof InkAnnotationElement){const{data:{inkLists:ft,rect:St,rotation:kt,id:Tt,color:Rt,opacity:Ft,borderStyle:{rawWidth:jt},popupRef:Bt,richText:zt,contentsObj:Ht,creationDate:Ut,modificationDate:Kt},parent:{page:{pageNumber:Yt}}}=et;ct=et={annotationType:AnnotationEditorType.INK,color:Array.from(Rt),thickness:jt,opacity:Ft,paths:{points:ft},boxes:null,pageIndex:Yt-1,rect:St.slice(0),rotation:kt,annotationElementId:Tt,id:Tt,deleted:!1,popupRef:Bt,richText:zt,comment:(Ht==null?void 0:Ht.str)||null,creationDate:Ut,modificationDate:Kt}}const dt=await super.deserialize(et,ot,ut);return dt._initialData=ct,et.comment&&dt.setCommentData(et),dt}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:et,_drawingOptions:ot,parent:ut}=this;ot.updateSVGProperty("stroke-width"),ut.drawLayer.updateProperties(et,ot.toSVGProperties())}static onScaleChangingWhenDrawing(){const et=this._currentParent;et&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),et.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:et,thickness:ot,opacity:ut}){this._drawingOptions=lx.getDefaultDrawingOptions({stroke:Util$1.makeHexColor(...et),"stroke-width":ot,"stroke-opacity":ut})}serialize(et=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:ot,points:ut}=this.serializeDraw(et),{_drawingOptions:{stroke:ct,"stroke-opacity":dt,"stroke-width":ft}}=this,St=Object.assign(super.serialize(et),{color:AnnotationEditor._colorManager.convert(ct),opacity:dt,thickness:ft,paths:{lines:ot,points:ut}});return this.addComment(St),et?(St.isCopy=!0,St):this.annotationElementId&&!Qr(this,gT,hN).call(this,St)?null:(St.id=this.annotationElementId,St)}renderAnnotationElement(et){if(this.deleted)return et.hide(),null;const{points:ot,rect:ut}=this.serializeDraw(!1);return et.updateEdited({rect:ut,thickness:this._drawingOptions["stroke-width"],points:ot,popup:this.comment}),null}};gT=new WeakSet,hN=function(et){const{color:ot,thickness:ut,opacity:ct,pageIndex:dt}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||et.color.some((ft,St)=>ft!==ot[St])||et.thickness!==ut||et.opacity!==ct||et.pageIndex!==dt},Kn(lx,"_type","ink"),Kn(lx,"_editorType",AnnotationEditorType.INK),Kn(lx,"_defaultDrawingOptions",null);let InkEditor=lx;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let g=super.toSVGPath();return g.endsWith("Z")||(g+="Z"),g}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var D1,y_,oR,Up,vT,dN,yT,fN,x_,lR,JE,DC,xT,pN,bT,mN,ET,gN,b_,uR,E_,cR,ST,vN;class SignatureExtractor{static extractContoursFromText(g,{fontFamily:et,fontStyle:ot,fontWeight:ut},ct,dt,ft,St){let kt=new OffscreenCanvas(1,1),Tt=kt.getContext("2d",{alpha:!1});const Rt=200,Ft=Tt.font=`${ot} ${ut} ${Rt}px ${et}`,{actualBoundingBoxLeft:jt,actualBoundingBoxRight:Bt,actualBoundingBoxAscent:zt,actualBoundingBoxDescent:Ht,fontBoundingBoxAscent:Ut,fontBoundingBoxDescent:Kt,width:Yt}=Tt.measureText(g),er=1.5,ar=Math.ceil(Math.max(Math.abs(jt)+Math.abs(Bt)||0,Yt)*er),ir=Math.ceil(Math.max(Math.abs(zt)+Math.abs(Ht)||Rt,Math.abs(Ut)+Math.abs(Kt)||Rt)*er);kt=new OffscreenCanvas(ar,ir),Tt=kt.getContext("2d",{alpha:!0,willReadFrequently:!0}),Tt.font=Ft,Tt.filter="grayscale(1)",Tt.fillStyle="white",Tt.fillRect(0,0,ar,ir),Tt.fillStyle="black",Tt.fillText(g,ar*(er-1)/2,ir*(3-er)/2);const lr=Qr(this,b_,uR).call(this,Tt.getImageData(0,0,ar,ir).data),cr=Qr(this,ET,gN).call(this,lr),vr=Qr(this,E_,cR).call(this,cr),xr=Qr(this,x_,lR).call(this,lr,ar,ir,vr);return this.processDrawnLines({lines:{curves:xr,width:ar,height:ir},pageWidth:ct,pageHeight:dt,rotation:ft,innerMargin:St,mustSmooth:!0,areContours:!0})}static process(g,et,ot,ut,ct){const[dt,ft,St]=Qr(this,ST,vN).call(this,g),[kt,Tt]=Qr(this,bT,mN).call(this,dt,ft,St,Math.hypot(ft,St)*Jt(this,D1).sigmaSFactor,Jt(this,D1).sigmaR,Jt(this,D1).kernelSize),Rt=Qr(this,E_,cR).call(this,Tt),Ft=Qr(this,x_,lR).call(this,kt,ft,St,Rt);return this.processDrawnLines({lines:{curves:Ft,width:ft,height:St},pageWidth:et,pageHeight:ot,rotation:ut,innerMargin:ct,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:g,pageWidth:et,pageHeight:ot,rotation:ut,innerMargin:ct,mustSmooth:dt,areContours:ft}){ut%180!==0&&([et,ot]=[ot,et]);const{curves:St,width:kt,height:Tt}=g,Rt=g.thickness??0,Ft=[],jt=Math.min(et/kt,ot/Tt),Bt=jt/et,zt=jt/ot,Ht=[];for(const{points:Kt}of St){const Yt=dt?Qr(this,xT,pN).call(this,Kt):Kt;if(!Yt)continue;Ht.push(Yt);const er=Yt.length,ar=new Float32Array(er),ir=new Float32Array(3*(er===2?2:er-2));if(Ft.push({line:ir,points:ar}),er===2){ar[0]=Yt[0]*Bt,ar[1]=Yt[1]*zt,ir.set([NaN,NaN,NaN,NaN,ar[0],ar[1]],0);continue}let[lr,cr,vr,xr]=Yt;lr*=Bt,cr*=zt,vr*=Bt,xr*=zt,ar.set([lr,cr,vr,xr],0),ir.set([NaN,NaN,NaN,NaN,lr,cr],0);for(let yr=4;yr<er;yr+=2){const Sr=ar[yr]=Yt[yr]*Bt,kr=ar[yr+1]=Yt[yr+1]*zt;ir.set(Outline.createBezierPoints(lr,cr,vr,xr,Sr,kr),(yr-2)*3),[lr,cr,vr,xr]=[vr,xr,Sr,kr]}}if(Ft.length===0)return null;const Ut=ft?new ContourDrawOutline:new InkDrawOutline;return Ut.build(Ft,et,ot,1,ut,ft?0:Rt,ct),{outline:Ut,newCurves:Ht,areContours:ft,thickness:Rt,width:kt,height:Tt}}static async compressSignature({outlines:g,areContours:et,thickness:ot,width:ut,height:ct}){let dt=1/0,ft=-1/0,St=0;for(const Yt of g){St+=Yt.length;for(let er=2,ar=Yt.length;er<ar;er++){const ir=Yt[er]-Yt[er-2];dt=Math.min(dt,ir),ft=Math.max(ft,ir)}}let kt;dt>=-128&&ft<=127?kt=Int8Array:dt>=-32768&&ft<=32767?kt=Int16Array:kt=Int32Array;const Tt=g.length,Rt=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Tt,Ft=new Uint32Array(Rt);let jt=0;Ft[jt++]=Rt*Uint32Array.BYTES_PER_ELEMENT+(St-2*Tt)*kt.BYTES_PER_ELEMENT,Ft[jt++]=0,Ft[jt++]=ut,Ft[jt++]=ct,Ft[jt++]=et?0:1,Ft[jt++]=Math.max(0,Math.floor(ot??0)),Ft[jt++]=Tt,Ft[jt++]=kt.BYTES_PER_ELEMENT;for(const Yt of g)Ft[jt++]=Yt.length-2,Ft[jt++]=Yt[0],Ft[jt++]=Yt[1];const Bt=new CompressionStream("deflate-raw"),zt=Bt.writable.getWriter();await zt.ready,zt.write(Ft);const Ht=kt.prototype.constructor;for(const Yt of g){const er=new Ht(Yt.length-2);for(let ar=2,ir=Yt.length;ar<ir;ar++)er[ar-2]=Yt[ar]-Yt[ar-2];zt.write(er)}zt.close();const Ut=await new Response(Bt.readable).arrayBuffer(),Kt=new Uint8Array(Ut);return toBase64Util(Kt)}static async decompressSignature(g){try{const et=fromBase64Util(g),{readable:ot,writable:ut}=new DecompressionStream("deflate-raw"),ct=ut.getWriter();await ct.ready,ct.write(et).then(async()=>{await ct.ready,await ct.close()}).catch(()=>{});let dt=null,ft=0;for await(const Yt of ot)dt||(dt=new Uint8Array(new Uint32Array(Yt.buffer,0,4)[0])),dt.set(Yt,ft),ft+=Yt.length;const St=new Uint32Array(dt.buffer,0,dt.length>>2),kt=St[1];if(kt!==0)throw new Error(`Invalid version: ${kt}`);const Tt=St[2],Rt=St[3],Ft=St[4]===0,jt=St[5],Bt=St[6],zt=St[7],Ht=[],Ut=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Bt)*Uint32Array.BYTES_PER_ELEMENT;let Kt;switch(zt){case Int8Array.BYTES_PER_ELEMENT:Kt=new Int8Array(dt.buffer,Ut);break;case Int16Array.BYTES_PER_ELEMENT:Kt=new Int16Array(dt.buffer,Ut);break;case Int32Array.BYTES_PER_ELEMENT:Kt=new Int32Array(dt.buffer,Ut);break}ft=0;for(let Yt=0;Yt<Bt;Yt++){const er=St[POINTS_PROPERTIES_NUMBER*Yt+BASE_HEADER_LENGTH],ar=new Float32Array(er+2);Ht.push(ar);for(let ir=0;ir<POINTS_PROPERTIES_NUMBER-1;ir++)ar[ir]=St[POINTS_PROPERTIES_NUMBER*Yt+BASE_HEADER_LENGTH+ir+1];for(let ir=0;ir<er;ir++)ar[ir+2]=ar[ir]+Kt[ft++]}return{areContours:Ft,thickness:jt,outlines:Ht,width:Tt,height:Rt}}catch(et){return warn(`decompressSignature: ${et}`),null}}}D1=new WeakMap,y_=new WeakSet,oR=function(g,et,ot,ut){return ot-=g,ut-=et,ot===0?ut>0?0:4:ot===1?ut+6:2-ut},Up=new WeakMap,vT=new WeakSet,dN=function(g,et,ot,ut,ct,dt,ft){const St=Qr(this,y_,oR).call(this,ot,ut,ct,dt);for(let kt=0;kt<8;kt++){const Tt=(-kt+St-ft+16)%8,Rt=Jt(this,Up)[2*Tt],Ft=Jt(this,Up)[2*Tt+1];if(g[(ot+Rt)*et+(ut+Ft)]!==0)return Tt}return-1},yT=new WeakSet,fN=function(g,et,ot,ut,ct,dt,ft){const St=Qr(this,y_,oR).call(this,ot,ut,ct,dt);for(let kt=0;kt<8;kt++){const Tt=(kt+St+ft+16)%8,Rt=Jt(this,Up)[2*Tt],Ft=Jt(this,Up)[2*Tt+1];if(g[(ot+Rt)*et+(ut+Ft)]!==0)return Tt}return-1},x_=new WeakSet,lR=function(g,et,ot,ut){const ct=g.length,dt=new Int32Array(ct);for(let Tt=0;Tt<ct;Tt++)dt[Tt]=g[Tt]<=ut?1:0;for(let Tt=1;Tt<ot-1;Tt++)dt[Tt*et]=dt[Tt*et+et-1]=0;for(let Tt=0;Tt<et;Tt++)dt[Tt]=dt[et*ot-1-Tt]=0;let ft=1,St;const kt=[];for(let Tt=1;Tt<ot-1;Tt++){St=1;for(let Rt=1;Rt<et-1;Rt++){const Ft=Tt*et+Rt,jt=dt[Ft];if(jt===0)continue;let Bt=Tt,zt=Rt;if(jt===1&&dt[Ft-1]===0)ft+=1,zt-=1;else if(jt>=1&&dt[Ft+1]===0)ft+=1,zt+=1,jt>1&&(St=jt);else{jt!==1&&(St=Math.abs(jt));continue}const Ht=[Rt,Tt],Ut=zt===Rt+1,Kt={isHole:Ut,points:Ht,id:ft,parent:0};kt.push(Kt);let Yt;for(const yr of kt)if(yr.id===St){Yt=yr;break}Yt?Yt.isHole?Kt.parent=Ut?Yt.parent:St:Kt.parent=Ut?St:Yt.parent:Kt.parent=Ut?St:0;const er=Qr(this,vT,dN).call(this,dt,et,Tt,Rt,Bt,zt,0);if(er===-1){dt[Ft]=-ft,dt[Ft]!==1&&(St=Math.abs(dt[Ft]));continue}let ar=Jt(this,Up)[2*er],ir=Jt(this,Up)[2*er+1];const lr=Tt+ar,cr=Rt+ir;Bt=lr,zt=cr;let vr=Tt,xr=Rt;for(;;){const yr=Qr(this,yT,fN).call(this,dt,et,vr,xr,Bt,zt,1);ar=Jt(this,Up)[2*yr],ir=Jt(this,Up)[2*yr+1];const Sr=vr+ar,kr=xr+ir;Ht.push(kr,Sr);const Pr=vr*et+xr;if(dt[Pr+1]===0?dt[Pr]=-ft:dt[Pr]===1&&(dt[Pr]=ft),Sr===Tt&&kr===Rt&&vr===lr&&xr===cr){dt[Ft]!==1&&(St=Math.abs(dt[Ft]));break}else Bt=vr,zt=xr,vr=Sr,xr=kr}}}return kt},JE=new WeakSet,DC=function(g,et,ot,ut){if(ot-et<=4){for(let lr=et;lr<ot-2;lr+=2)ut.push(g[lr],g[lr+1]);return}const ct=g[et],dt=g[et+1],ft=g[ot-4]-ct,St=g[ot-3]-dt,kt=Math.hypot(ft,St),Tt=ft/kt,Rt=St/kt,Ft=Tt*dt-Rt*ct,jt=St/ft,Bt=1/kt,zt=Math.atan(jt),Ht=Math.cos(zt),Ut=Math.sin(zt),Kt=Bt*(Math.abs(Ht)+Math.abs(Ut)),Yt=Bt*(1-Kt+Kt**2),er=Math.max(Math.atan(Math.abs(Ut+Ht)*Yt),Math.atan(Math.abs(Ut-Ht)*Yt));let ar=0,ir=et;for(let lr=et+2;lr<ot-2;lr+=2){const cr=Math.abs(Ft-Tt*g[lr+1]+Rt*g[lr]);cr>ar&&(ir=lr,ar=cr)}ar>(kt*er)**2?(Qr(this,JE,DC).call(this,g,et,ir+2,ut),Qr(this,JE,DC).call(this,g,ir,ot,ut)):ut.push(ct,dt)},xT=new WeakSet,pN=function(g){const et=[],ot=g.length;return Qr(this,JE,DC).call(this,g,0,ot,et),et.push(g[ot-2],g[ot-1]),et.length<=4?null:et},bT=new WeakSet,mN=function(g,et,ot,ut,ct,dt){const ft=new Float32Array(dt**2),St=-2*ut**2,kt=dt>>1;for(let zt=0;zt<dt;zt++){const Ht=(zt-kt)**2;for(let Ut=0;Ut<dt;Ut++)ft[zt*dt+Ut]=Math.exp((Ht+(Ut-kt)**2)/St)}const Tt=new Float32Array(256),Rt=-2*ct**2;for(let zt=0;zt<256;zt++)Tt[zt]=Math.exp(zt**2/Rt);const Ft=g.length,jt=new Uint8Array(Ft),Bt=new Uint32Array(256);for(let zt=0;zt<ot;zt++)for(let Ht=0;Ht<et;Ht++){const Ut=zt*et+Ht,Kt=g[Ut];let Yt=0,er=0;for(let ir=0;ir<dt;ir++){const lr=zt+ir-kt;if(!(lr<0||lr>=ot))for(let cr=0;cr<dt;cr++){const vr=Ht+cr-kt;if(vr<0||vr>=et)continue;const xr=g[lr*et+vr],yr=ft[ir*dt+cr]*Tt[Math.abs(xr-Kt)];Yt+=xr*yr,er+=yr}}const ar=jt[Ut]=Math.round(Yt/er);Bt[ar]++}return[jt,Bt]},ET=new WeakSet,gN=function(g){const et=new Uint32Array(256);for(const ot of g)et[ot]++;return et},b_=new WeakSet,uR=function(g){const et=g.length,ot=new Uint8ClampedArray(et>>2);let ut=-1/0,ct=1/0;for(let ft=0,St=ot.length;ft<St;ft++){const kt=ot[ft]=g[ft<<2];ut=Math.max(ut,kt),ct=Math.min(ct,kt)}const dt=255/(ut-ct);for(let ft=0,St=ot.length;ft<St;ft++)ot[ft]=(ot[ft]-ct)*dt;return ot},E_=new WeakSet,cR=function(g){let et,ot=-1/0,ut=-1/0;const ct=g.findIndex(St=>St!==0);let dt=ct,ft=ct;for(et=ct;et<256;et++){const St=g[et];St>ot&&(et-dt>ut&&(ut=et-dt,ft=et-1),ot=St,dt=et)}for(et=ft-1;et>=0&&!(g[et]>g[et+1]);et--);return et},ST=new WeakSet,vN=function(g){const et=g,{width:ot,height:ut}=g,{maxDim:ct}=Jt(this,D1);let dt=ot,ft=ut;if(ot>ct||ut>ct){let Ft=ot,jt=ut,Bt=Math.log2(Math.max(ot,ut)/ct);const zt=Math.floor(Bt);Bt=Bt===zt?zt-1:zt;for(let Ut=0;Ut<Bt;Ut++){dt=Math.ceil(Ft/2),ft=Math.ceil(jt/2);const Kt=new OffscreenCanvas(dt,ft);Kt.getContext("2d").drawImage(g,0,0,Ft,jt,0,0,dt,ft),Ft=dt,jt=ft,g!==et&&g.close(),g=Kt.transferToImageBitmap()}const Ht=Math.min(ct/dt,ct/ft);dt=Math.round(dt*Ht),ft=Math.round(ft*Ht)}const kt=new OffscreenCanvas(dt,ft).getContext("2d",{willReadFrequently:!0});kt.fillStyle="white",kt.fillRect(0,0,dt,ft),kt.filter="grayscale(1)",kt.drawImage(g,0,0,g.width,g.height,0,0,dt,ft);const Tt=kt.getImageData(0,0,dt,ft).data;return[Qr(this,b_,uR).call(this,Tt),dt,ft]},Mr(SignatureExtractor,y_),Mr(SignatureExtractor,vT),Mr(SignatureExtractor,yT),Mr(SignatureExtractor,x_),Mr(SignatureExtractor,JE),Mr(SignatureExtractor,xT),Mr(SignatureExtractor,bT),Mr(SignatureExtractor,ET),Mr(SignatureExtractor,b_),Mr(SignatureExtractor,E_),Mr(SignatureExtractor,ST),Mr(SignatureExtractor,D1,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),Mr(SignatureExtractor,Up,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const g=new SignatureOptions;return g.updateAll(this),g}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(g){super(g),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const g=new DrawnSignatureOptions(this._viewParameters);return g.updateAll(this),g}}var kv,Cm,Tv,M1;const Bu=class Bu extends DrawingEditor{constructor(et){super({...et,mustBeCommitted:!0,name:"signatureEditor"});Mr(this,kv,!1);Mr(this,Cm,null);Mr(this,Tv,null);Mr(this,M1,null);this._willKeepAspectRatio=!0,Ir(this,Tv,et.signatureData||null),Ir(this,Cm,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(et,ot){AnnotationEditor.initialize(et,ot),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(ot.viewParameters)}static getDefaultDrawingOptions(et){const ot=this._defaultDrawingOptions.clone();return ot.updateProperties(et),ot}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!Jt(this,Cm)}}static computeTelemetryFinalData(et){const ot=et.get("hasDescription");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let et,ot;const{_isCopy:ut}=this;if(ut&&(this._isCopy=!1,et=this.x,ot=this.y),super.render(),this._drawId===null)if(Jt(this,Tv)){const{lines:ct,mustSmooth:dt,areContours:ft,description:St,uuid:kt,heightInPage:Tt}=Jt(this,Tv),{rawDims:{pageWidth:Rt,pageHeight:Ft},rotation:jt}=this.parent.viewport,Bt=SignatureExtractor.processDrawnLines({lines:ct,pageWidth:Rt,pageHeight:Ft,rotation:jt,innerMargin:Bu._INNER_MARGIN,mustSmooth:dt,areContours:ft});this.addSignature(Bt,Tt,St,kt)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:Jt(this,Cm)||""}));return ut&&(this._isCopy=!0,this._moveAfterPaste(et,ot)),this.div}setUuid(et){Ir(this,M1,et),this.addEditToolbar()}getUuid(){return Jt(this,M1)}get description(){return Jt(this,Cm)}set description(et){Ir(this,Cm,et),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:et})),super.addEditToolbar().then(ot=>{ot==null||ot.updateEditSignatureButton(et)}))}getSignaturePreview(){const{newCurves:et,areContours:ot,thickness:ut,width:ct,height:dt}=Jt(this,Tv),ft=Math.max(ct,dt),St=SignatureExtractor.processDrawnLines({lines:{curves:et.map(kt=>({points:kt})),thickness:ut,width:ct,height:dt},pageWidth:ft,pageHeight:ft,rotation:0,innerMargin:0,mustSmooth:!1,areContours:ot});return{areContours:ot,outline:St.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(et,ot,ut,ct){const{x:dt,y:ft}=this,{outline:St}=Ir(this,Tv,et);Ir(this,kv,St instanceof ContourDrawOutline),this.description=ut;let kt;Jt(this,kv)?kt=Bu.getDefaultDrawingOptions():(kt=Bu._defaultDrawnSignatureOptions.clone(),kt.updateProperties({"stroke-width":St.thickness})),this._addOutlines({drawOutlines:St,drawingOptions:kt});const[,Tt]=this.pageDimensions;let Rt=ot/Tt;Rt=Rt>=1?.5:Rt,this.width*=Rt/this.height,this.width>=1&&(Rt*=.9/this.width,this.width=.9),this.height=Rt,this.setDims(),this.x=dt,this.y=ft,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(ct),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!ct,hasDescription:!!ut}}),this.div.hidden=!1}getFromImage(et){const{rawDims:{pageWidth:ot,pageHeight:ut},rotation:ct}=this.parent.viewport;return SignatureExtractor.process(et,ot,ut,ct,Bu._INNER_MARGIN)}getFromText(et,ot){const{rawDims:{pageWidth:ut,pageHeight:ct},rotation:dt}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(et,ot,ut,ct,dt,Bu._INNER_MARGIN)}getDrawnSignature(et){const{rawDims:{pageWidth:ot,pageHeight:ut},rotation:ct}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:et,pageWidth:ot,pageHeight:ut,rotation:ct,innerMargin:Bu._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:et,thickness:ot}){et?this._drawingOptions=Bu.getDefaultDrawingOptions():(this._drawingOptions=Bu._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":ot}))}serialize(et=!1){if(this.isEmpty())return null;const{lines:ot,points:ut}=this.serializeDraw(et),{_drawingOptions:{"stroke-width":ct}}=this,dt=Object.assign(super.serialize(et),{isSignature:!0,areContours:Jt(this,kv),color:[0,0,0],thickness:Jt(this,kv)?0:ct});return this.addComment(dt),et?(dt.paths={lines:ot,points:ut},dt.uuid=Jt(this,M1),dt.isCopy=!0):dt.lines=ot,Jt(this,Cm)&&(dt.accessibilityData={type:"Figure",alt:Jt(this,Cm)}),dt}static deserializeDraw(et,ot,ut,ct,dt,ft){return ft.areContours?ContourDrawOutline.deserialize(et,ot,ut,ct,dt,ft):InkDrawOutline.deserialize(et,ot,ut,ct,dt,ft)}static async deserialize(et,ot,ut){var dt;const ct=await super.deserialize(et,ot,ut);return Ir(ct,kv,et.areContours),ct.description=((dt=et.accessibilityData)==null?void 0:dt.alt)||"",Ir(ct,M1,et.uuid),ct}};kv=new WeakMap,Cm=new WeakMap,Tv=new WeakMap,M1=new WeakMap,Kn(Bu,"_type","signature"),Kn(Bu,"_editorType",AnnotationEditorType.SIGNATURE),Kn(Bu,"_defaultDrawingOptions",null);let SignatureEditor=Bu;var wo,Al,Pv,b0,Rv,QE,E0,F1,Am,_f,eS,O1,ZS,I1,JS,tS,MC,rS,FC,nS,OC,S_,hR,iS,IC,wT,yN;class StampEditor extends AnnotationEditor{constructor(et){super({...et,name:"stampEditor"});Mr(this,O1);Mr(this,I1);Mr(this,tS);Mr(this,rS);Mr(this,nS);Mr(this,S_);Mr(this,iS);Mr(this,wT);Mr(this,wo,null);Mr(this,Al,null);Mr(this,Pv,null);Mr(this,b0,null);Mr(this,Rv,null);Mr(this,QE,"");Mr(this,E0,null);Mr(this,F1,!1);Mr(this,Am,null);Mr(this,_f,!1);Mr(this,eS,!1);Ir(this,b0,et.bitmapUrl),Ir(this,Rv,et.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(et,ot){AnnotationEditor.initialize(et,ot)}static isHandlingMimeForPasting(et){return SupportedImageMimeTypes.includes(et)}static paste(et,ot){ot.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:et.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var et;return{type:"stamp",hasAltText:!!((et=this.altTextData)!=null&&et.altText)}}static computeTelemetryFinalData(et){const ot=et.get("hasAltText");return{hasAltText:ot.get(!0)??0,hasNoAltText:ot.get(!1)??0}}async mlGuessAltText(et=null,ot=!0){if(this.hasAltTextData())return null;const{mlManager:ut}=this._uiManager;if(!ut)throw new Error("No ML.");if(!await ut.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:ct,width:dt,height:ft}=et||this.copyCanvas(null,null,!0).imageData,St=await ut.guess({name:"altText",request:{data:ct,width:dt,height:ft,channels:ct.length/(dt*ft)}});if(!St)throw new Error("No response from the AI service.");if(St.error)throw new Error("Error from the AI service.");if(St.cancel)return null;if(!St.output)throw new Error("No valid response from the AI service.");const kt=St.output;return await this.setGuessedAltText(kt),ot&&!this.hasAltTextData()&&(this.altTextData={alt:kt,decorative:!1}),kt}remove(){var et;Jt(this,Al)&&(Ir(this,wo,null),this._uiManager.imageManager.deleteId(Jt(this,Al)),(et=Jt(this,E0))==null||et.remove(),Ir(this,E0,null),Jt(this,Am)&&(clearTimeout(Jt(this,Am)),Ir(this,Am,null))),super.remove()}rebuild(){if(!this.parent){Jt(this,Al)&&Qr(this,tS,MC).call(this);return}super.rebuild(),this.div!==null&&(Jt(this,Al)&&Jt(this,E0)===null&&Qr(this,tS,MC).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(et){this._isDraggable=!0,et&&this.div.focus()}isEmpty(){return!(Jt(this,Pv)||Jt(this,wo)||Jt(this,b0)||Jt(this,Rv)||Jt(this,Al)||Jt(this,F1))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let et,ot;return this._isCopy&&(et=this.x,ot=this.y),super.render(),this.div.hidden=!0,this.createAltText(),Jt(this,F1)||(Jt(this,wo)?Qr(this,rS,FC).call(this):Qr(this,tS,MC).call(this)),this._isCopy&&this._moveAfterPaste(et,ot),this._uiManager.addShouldRescale(this),this.div}setCanvas(et,ot){const{id:ut,bitmap:ct}=this._uiManager.imageManager.getFromCanvas(et,ot);ot.remove(),ut&&this._uiManager.imageManager.isValidId(ut)&&(Ir(this,Al,ut),ct&&Ir(this,wo,ct),Ir(this,F1,!1),Qr(this,rS,FC).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;Jt(this,Am)!==null&&clearTimeout(Jt(this,Am)),Ir(this,Am,setTimeout(()=>{Ir(this,Am,null),Qr(this,S_,hR).call(this)},200))}copyCanvas(et,ot,ut=!1){et||(et=224);const{width:ct,height:dt}=Jt(this,wo),ft=new OutputScale;let St=Jt(this,wo),kt=ct,Tt=dt,Rt=null;if(ot){if(ct>ot||dt>ot){const lr=Math.min(ot/ct,ot/dt);kt=Math.floor(ct*lr),Tt=Math.floor(dt*lr)}Rt=document.createElement("canvas");const jt=Rt.width=Math.ceil(kt*ft.sx),Bt=Rt.height=Math.ceil(Tt*ft.sy);Jt(this,_f)||(St=Qr(this,nS,OC).call(this,jt,Bt));const zt=Rt.getContext("2d");zt.filter=this._uiManager.hcmFilter;let Ht="white",Ut="#cfcfd8";this._uiManager.hcmFilter!=="none"?Ut="black":ColorScheme.isDarkMode&&(Ht="#8f8f9d",Ut="#42414d");const Kt=15,Yt=Kt*ft.sx,er=Kt*ft.sy,ar=new OffscreenCanvas(Yt*2,er*2),ir=ar.getContext("2d");ir.fillStyle=Ht,ir.fillRect(0,0,Yt*2,er*2),ir.fillStyle=Ut,ir.fillRect(0,0,Yt,er),ir.fillRect(Yt,er,Yt,er),zt.fillStyle=zt.createPattern(ar,"repeat"),zt.fillRect(0,0,jt,Bt),zt.drawImage(St,0,0,St.width,St.height,0,0,jt,Bt)}let Ft=null;if(ut){let jt,Bt;if(ft.symmetric&&St.width<et&&St.height<et)jt=St.width,Bt=St.height;else if(St=Jt(this,wo),ct>et||dt>et){const Ut=Math.min(et/ct,et/dt);jt=Math.floor(ct*Ut),Bt=Math.floor(dt*Ut),Jt(this,_f)||(St=Qr(this,nS,OC).call(this,jt,Bt))}const Ht=new OffscreenCanvas(jt,Bt).getContext("2d",{willReadFrequently:!0});Ht.drawImage(St,0,0,St.width,St.height,0,0,jt,Bt),Ft={width:jt,height:Bt,data:Ht.getImageData(0,0,jt,Bt).data}}return{canvas:Rt,width:kt,height:Tt,imageData:Ft}}static async deserialize(et,ot,ut){var Ht;let ct=null,dt=!1;if(et instanceof StampAnnotationElement){const{data:{rect:Ut,rotation:Kt,id:Yt,structParent:er,popupRef:ar,richText:ir,contentsObj:lr,creationDate:cr,modificationDate:vr},container:xr,parent:{page:{pageNumber:yr}},canvas:Sr}=et;let kr,Pr;Sr?(delete et.canvas,{id:kr,bitmap:Pr}=ut.imageManager.getFromCanvas(xr.id,Sr),Sr.remove()):(dt=!0,et._hasNoCanvas=!0);const Or=((Ht=await ot._structTree.getAriaAttributes(`${AnnotationPrefix}${Yt}`))==null?void 0:Ht.get("aria-label"))||"";ct=et={annotationType:AnnotationEditorType.STAMP,bitmapId:kr,bitmap:Pr,pageIndex:yr-1,rect:Ut.slice(0),rotation:Kt,annotationElementId:Yt,id:Yt,deleted:!1,accessibilityData:{decorative:!1,altText:Or},isSvg:!1,structParent:er,popupRef:ar,richText:ir,comment:(lr==null?void 0:lr.str)||null,creationDate:cr,modificationDate:vr}}const ft=await super.deserialize(et,ot,ut),{rect:St,bitmap:kt,bitmapUrl:Tt,bitmapId:Rt,isSvg:Ft,accessibilityData:jt}=et;dt?(ut.addMissingCanvas(et.id,ft),Ir(ft,F1,!0)):Rt&&ut.imageManager.isValidId(Rt)?(Ir(ft,Al,Rt),kt&&Ir(ft,wo,kt)):Ir(ft,b0,Tt),Ir(ft,_f,Ft);const[Bt,zt]=ft.pageDimensions;return ft.width=(St[2]-St[0])/Bt,ft.height=(St[3]-St[1])/zt,jt&&(ft.altTextData=jt),ft._initialData=ct,et.comment&&ft.setCommentData(et),Ir(ft,eS,!!ct),ft}serialize(et=!1,ot=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const ut=Object.assign(super.serialize(et),{bitmapId:Jt(this,Al),isSvg:Jt(this,_f)});if(this.addComment(ut),et)return ut.bitmapUrl=Qr(this,iS,IC).call(this,!0),ut.accessibilityData=this.serializeAltText(!0),ut.isCopy=!0,ut;const{decorative:ct,altText:dt}=this.serializeAltText(!1);if(!ct&&dt&&(ut.accessibilityData={type:"Figure",alt:dt}),this.annotationElementId){const St=Qr(this,wT,yN).call(this,ut);return St.isSame?null:(St.isSameAltText?delete ut.accessibilityData:ut.accessibilityData.structParent=this._initialData.structParent??-1,ut.id=this.annotationElementId,delete ut.bitmapId,ut)}if(ot===null)return ut;ot.stamps||(ot.stamps=new Map);const ft=Jt(this,_f)?(ut.rect[2]-ut.rect[0])*(ut.rect[3]-ut.rect[1]):null;if(!ot.stamps.has(Jt(this,Al)))ot.stamps.set(Jt(this,Al),{area:ft,serialized:ut}),ut.bitmap=Qr(this,iS,IC).call(this,!1);else if(Jt(this,_f)){const St=ot.stamps.get(Jt(this,Al));ft>St.area&&(St.area=ft,St.serialized.bitmap.close(),St.serialized.bitmap=Qr(this,iS,IC).call(this,!1))}return ut}renderAnnotationElement(et){return this.deleted?(et.hide(),null):(et.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}wo=new WeakMap,Al=new WeakMap,Pv=new WeakMap,b0=new WeakMap,Rv=new WeakMap,QE=new WeakMap,E0=new WeakMap,F1=new WeakMap,Am=new WeakMap,_f=new WeakMap,eS=new WeakMap,O1=new WeakSet,ZS=function(et,ot=!1){if(!et){this.remove();return}Ir(this,wo,et.bitmap),ot||(Ir(this,Al,et.id),Ir(this,_f,et.isSvg)),et.file&&Ir(this,QE,et.file.name),Qr(this,rS,FC).call(this)},I1=new WeakSet,JS=function(){if(Ir(this,Pv,null),this._uiManager.enableWaiting(!1),!!Jt(this,E0)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Jt(this,wo)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&Jt(this,wo)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},tS=new WeakSet,MC=function(){if(Jt(this,Al)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Jt(this,Al)).then(ut=>Qr(this,O1,ZS).call(this,ut,!0)).finally(()=>Qr(this,I1,JS).call(this));return}if(Jt(this,b0)){const ut=Jt(this,b0);Ir(this,b0,null),this._uiManager.enableWaiting(!0),Ir(this,Pv,this._uiManager.imageManager.getFromUrl(ut).then(ct=>Qr(this,O1,ZS).call(this,ct)).finally(()=>Qr(this,I1,JS).call(this)));return}if(Jt(this,Rv)){const ut=Jt(this,Rv);Ir(this,Rv,null),this._uiManager.enableWaiting(!0),Ir(this,Pv,this._uiManager.imageManager.getFromFile(ut).then(ct=>Qr(this,O1,ZS).call(this,ct)).finally(()=>Qr(this,I1,JS).call(this)));return}const et=document.createElement("input");et.type="file",et.accept=SupportedImageMimeTypes.join(",");const ot=this._uiManager._signal;Ir(this,Pv,new Promise(ut=>{et.addEventListener("change",async()=>{if(!et.files||et.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ct=await this._uiManager.imageManager.getFromFile(et.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Qr(this,O1,ZS).call(this,ct)}ut()},{signal:ot}),et.addEventListener("cancel",()=>{this.remove(),ut()},{signal:ot})}).finally(()=>Qr(this,I1,JS).call(this))),et.click()},rS=new WeakSet,FC=function(){var kt;const{div:et}=this;let{width:ot,height:ut}=Jt(this,wo);const[ct,dt]=this.pageDimensions,ft=.75;if(this.width)ot=this.width*ct,ut=this.height*dt;else if(ot>ft*ct||ut>ft*dt){const Tt=Math.min(ft*ct/ot,ft*dt/ut);ot*=Tt,ut*=Tt}this._uiManager.enableWaiting(!1);const St=Ir(this,E0,document.createElement("canvas"));St.setAttribute("role","img"),this.addContainer(St),this.width=ot/ct,this.height=ut/dt,this.setDims(),(kt=this._initialOptions)!=null&&kt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(et.hidden=!1),Qr(this,S_,hR).call(this),Jt(this,eS)||(this.parent.addUndoableEditor(this),Ir(this,eS,!0)),this._reportTelemetry({action:"inserted_image"}),Jt(this,QE)&&this.div.setAttribute("aria-description",Jt(this,QE)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},nS=new WeakSet,OC=function(et,ot){const{width:ut,height:ct}=Jt(this,wo);let dt=ut,ft=ct,St=Jt(this,wo);for(;dt>2*et||ft>2*ot;){const kt=dt,Tt=ft;dt>2*et&&(dt=dt>=16384?Math.floor(dt/2)-1:Math.ceil(dt/2)),ft>2*ot&&(ft=ft>=16384?Math.floor(ft/2)-1:Math.ceil(ft/2));const Rt=new OffscreenCanvas(dt,ft);Rt.getContext("2d").drawImage(St,0,0,kt,Tt,0,0,dt,ft),St=Rt.transferToImageBitmap()}return St},S_=new WeakSet,hR=function(){const[et,ot]=this.parentDimensions,{width:ut,height:ct}=this,dt=new OutputScale,ft=Math.ceil(ut*et*dt.sx),St=Math.ceil(ct*ot*dt.sy),kt=Jt(this,E0);if(!kt||kt.width===ft&&kt.height===St)return;kt.width=ft,kt.height=St;const Tt=Jt(this,_f)?Jt(this,wo):Qr(this,nS,OC).call(this,ft,St),Rt=kt.getContext("2d");Rt.filter=this._uiManager.hcmFilter,Rt.drawImage(Tt,0,0,Tt.width,Tt.height,0,0,ft,St)},iS=new WeakSet,IC=function(et){if(et){if(Jt(this,_f)){const ct=this._uiManager.imageManager.getSvgUrl(Jt(this,Al));if(ct)return ct}const ot=document.createElement("canvas");return{width:ot.width,height:ot.height}=Jt(this,wo),ot.getContext("2d").drawImage(Jt(this,wo),0,0),ot.toDataURL()}if(Jt(this,_f)){const[ot,ut]=this.pageDimensions,ct=Math.round(this.width*ot*PixelsPerInch.PDF_TO_CSS_UNITS),dt=Math.round(this.height*ut*PixelsPerInch.PDF_TO_CSS_UNITS),ft=new OffscreenCanvas(ct,dt);return ft.getContext("2d").drawImage(Jt(this,wo),0,0,Jt(this,wo).width,Jt(this,wo).height,0,0,ct,dt),ft.transferToImageBitmap()}return structuredClone(Jt(this,wo))},wT=new WeakSet,yN=function(et){var ft;const{pageIndex:ot,accessibilityData:{altText:ut}}=this._initialData,ct=et.pageIndex===ot,dt=(((ft=et.accessibilityData)==null?void 0:ft.alt)||"")===ut;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&ct&&dt,isSameAltText:dt}},Kn(StampEditor,"_type","stamp"),Kn(StampEditor,"_editorType",AnnotationEditorType.STAMP);var L1,sS,Nv,Dv,S0,Nu,Mv,aS,oS,Hp,w0,Tl,_0,Fv,lS,ms,Ov,w_,dR,_T,xN,wp,em,__,fR,C_,pR,uS,LC;const Np=class Np{constructor({uiManager:g,pageIndex:et,div:ot,structTreeLayer:ut,accessibilityManager:ct,annotationLayer:dt,drawLayer:ft,textLayer:St,viewport:kt,l10n:Tt}){Mr(this,w_);Mr(this,_T);Mr(this,wp);Mr(this,__);Mr(this,C_);Mr(this,uS);Mr(this,L1,void 0);Mr(this,sS,!1);Mr(this,Nv,null);Mr(this,Dv,null);Mr(this,S0,null);Mr(this,Nu,new Map);Mr(this,Mv,!1);Mr(this,aS,!1);Mr(this,oS,!1);Mr(this,Hp,null);Mr(this,w0,null);Mr(this,Tl,null);Mr(this,_0,null);Mr(this,Fv,null);Mr(this,lS,-1);Mr(this,ms,void 0);const Rt=[...Jt(Np,Ov).values()];if(!Np._initialized){Np._initialized=!0;for(const Ft of Rt)Ft.initialize(Tt,g)}g.registerEditorTypes(Rt),Ir(this,ms,g),this.pageIndex=et,this.div=ot,Ir(this,L1,ct),Ir(this,Nv,dt),this.viewport=kt,Ir(this,Tl,St),this.drawLayer=ft,this._structTree=ut,Jt(this,ms).addLayer(this)}get isEmpty(){return Jt(this,Nu).size===0}get isInvisible(){return this.isEmpty&&Jt(this,ms).getMode()===AnnotationEditorType.NONE}updateToolbar(g){Jt(this,ms).updateToolbar(g)}updateMode(g=Jt(this,ms).getMode()){switch(Qr(this,uS,LC).call(this),g){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:et}=this.div;if(et.toggle("nonEditing",!1),g===AnnotationEditorType.POPUP)et.toggle("commentEditing",!0);else{et.toggle("commentEditing",!1);for(const ot of Jt(Np,Ov).values())et.toggle(`${ot._type}Editing`,g===ot._editorType)}this.div.hidden=!1}hasTextLayer(g){var et;return g===((et=Jt(this,Tl))==null?void 0:et.div)}setEditingState(g){Jt(this,ms).setEditingState(g)}addCommands(g){Jt(this,ms).addCommands(g)}cleanUndoStack(g){Jt(this,ms).cleanUndoStack(g)}toggleDrawing(g=!1){this.div.classList.toggle("drawing",!g)}togglePointerEvents(g=!1){this.div.classList.toggle("disabled",!g)}toggleAnnotationLayerPointerEvents(g=!1){var et;(et=Jt(this,Nv))==null||et.div.classList.toggle("disabled",!g)}async enable(){var ot;Ir(this,oS,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(ot=Jt(this,Fv))==null||ot.abort(),Ir(this,Fv,null);const g=new Set;for(const ut of Jt(this,w_,dR))ut.enableEditing(),ut.show(!0),ut.annotationElementId&&(Jt(this,ms).removeChangedExistingAnnotation(ut),g.add(ut.annotationElementId));const et=Jt(this,Nv);if(et)for(const ut of et.getEditableAnnotations()){if(ut.hide(),Jt(this,ms).isDeletedAnnotationElement(ut.data.id)||g.has(ut.data.id))continue;const ct=await this.deserialize(ut);ct&&(this.addOrRebuild(ct),ct.enableEditing())}Ir(this,oS,!1),Jt(this,ms)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var ot;if(Ir(this,aS,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),Jt(this,Tl)&&!Jt(this,Fv)){Ir(this,Fv,new AbortController);const ut=Jt(this,ms).combinedSignal(Jt(this,Fv));Jt(this,Tl).div.addEventListener("pointerdown",ct=>{const{clientX:ft,clientY:St,timeStamp:kt}=ct,Tt=Jt(this,lS);if(kt-Tt>500){Ir(this,lS,kt);return}Ir(this,lS,-1);const{classList:Rt}=this.div;Rt.toggle("getElements",!0);const Ft=document.elementsFromPoint(ft,St);if(Rt.toggle("getElements",!1),!this.div.contains(Ft[0]))return;let jt;const Bt=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const Ht of Ft)if(Bt.test(Ht.id)){jt=Ht.id;break}if(!jt)return;const zt=Jt(this,Nu).get(jt);(zt==null?void 0:zt.annotationElementId)===null&&(ct.stopPropagation(),ct.preventDefault(),zt.dblclick(ct))},{signal:ut,capture:!0})}const g=Jt(this,Nv);if(g){const ut=new Map,ct=new Map;for(const ft of Jt(this,w_,dR)){if(ft.disableEditing(),!ft.annotationElementId){ft.updateFakeAnnotationElement(g);continue}if(ft.serialize()!==null){ut.set(ft.annotationElementId,ft);continue}else ct.set(ft.annotationElementId,ft);(ot=this.getEditableAnnotation(ft.annotationElementId))==null||ot.show(),ft.remove()}const dt=g.getEditableAnnotations();for(const ft of dt){const{id:St}=ft.data;if(Jt(this,ms).isDeletedAnnotationElement(St)){ft.updateEdited({deleted:!0});continue}let kt=ct.get(St);if(kt){kt.resetAnnotationElement(ft),kt.show(!1),ft.show();continue}kt=ut.get(St),kt&&(Jt(this,ms).addChangedExistingAnnotation(kt),kt.renderAnnotationElement(ft)&&kt.show(!1)),ft.show()}}Qr(this,uS,LC).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:et}=this.div;for(const ut of Jt(Np,Ov).values())et.remove(`${ut._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),Ir(this,aS,!1)}getEditableAnnotation(g){var et;return((et=Jt(this,Nv))==null?void 0:et.getEditableAnnotation(g))||null}setActiveEditor(g){Jt(this,ms).getActive()!==g&&Jt(this,ms).setActiveEditor(g)}enableTextSelection(){var g;if(this.div.tabIndex=-1,(g=Jt(this,Tl))!=null&&g.div&&!Jt(this,_0)){Ir(this,_0,new AbortController);const et=Jt(this,ms).combinedSignal(Jt(this,_0));Jt(this,Tl).div.addEventListener("pointerdown",Qr(this,_T,xN).bind(this),{signal:et}),Jt(this,Tl).div.classList.add("highlighting")}}disableTextSelection(){var g;this.div.tabIndex=0,(g=Jt(this,Tl))!=null&&g.div&&Jt(this,_0)&&(Jt(this,_0).abort(),Ir(this,_0,null),Jt(this,Tl).div.classList.remove("highlighting"))}enableClick(){if(Jt(this,Dv))return;Ir(this,Dv,new AbortController);const g=Jt(this,ms).combinedSignal(Jt(this,Dv));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:g});const et=this.pointerup.bind(this);this.div.addEventListener("pointerup",et,{signal:g}),this.div.addEventListener("pointercancel",et,{signal:g})}disableClick(){var g;(g=Jt(this,Dv))==null||g.abort(),Ir(this,Dv,null)}attach(g){Jt(this,Nu).set(g.id,g);const{annotationElementId:et}=g;et&&Jt(this,ms).isDeletedAnnotationElement(et)&&Jt(this,ms).removeDeletedAnnotationElement(g)}detach(g){var et;Jt(this,Nu).delete(g.id),(et=Jt(this,L1))==null||et.removePointerInTextLayer(g.contentDiv),!Jt(this,aS)&&g.annotationElementId&&Jt(this,ms).addDeletedAnnotationElement(g)}remove(g){this.detach(g),Jt(this,ms).removeEditor(g),g.div.remove(),g.isAttachedToDOM=!1}changeParent(g){var et;g.parent!==this&&(g.parent&&g.annotationElementId&&(Jt(this,ms).addDeletedAnnotationElement(g.annotationElementId),AnnotationEditor.deleteAnnotationElement(g),g.annotationElementId=null),this.attach(g),(et=g.parent)==null||et.detach(g),g.setParent(this),g.div&&g.isAttachedToDOM&&(g.div.remove(),this.div.append(g.div)))}add(g){if(!(g.parent===this&&g.isAttachedToDOM)){if(this.changeParent(g),Jt(this,ms).addEditor(g),this.attach(g),!g.isAttachedToDOM){const et=g.render();this.div.append(et),g.isAttachedToDOM=!0}g.fixAndSetPosition(),g.onceAdded(!Jt(this,oS)),Jt(this,ms).addToAnnotationStorage(g),g._reportTelemetry(g.telemetryInitialData)}}moveEditorInDOM(g){var ot;if(!g.isAttachedToDOM)return;const{activeElement:et}=document;g.div.contains(et)&&!Jt(this,S0)&&(g._focusEventsAllowed=!1,Ir(this,S0,setTimeout(()=>{Ir(this,S0,null),g.div.contains(document.activeElement)?g._focusEventsAllowed=!0:(g.div.addEventListener("focusin",()=>{g._focusEventsAllowed=!0},{once:!0,signal:Jt(this,ms)._signal}),et.focus())},0))),g._structTreeParentId=(ot=Jt(this,L1))==null?void 0:ot.moveElementInDOM(this.div,g.div,g.contentDiv,!0)}addOrRebuild(g){g.needsToBeRebuilt()?(g.parent||(g.parent=this),g.rebuild(),g.show()):this.add(g)}addUndoableEditor(g){const et=()=>g._uiManager.rebuild(g),ot=()=>{g.remove()};this.addCommands({cmd:et,undo:ot,mustExec:!1})}getEditorByUID(g){for(const et of Jt(this,Nu).values())if(et.uid===g)return et;return null}getNextId(){return Jt(this,ms).getId()}combinedSignal(g){return Jt(this,ms).combinedSignal(g)}canCreateNewEmptyEditor(){var g;return(g=Jt(this,wp,em))==null?void 0:g.canCreateNewEmptyEditor()}async pasteEditor(g,et){this.updateToolbar(g),await Jt(this,ms).updateMode(g.mode);const{offsetX:ot,offsetY:ut}=Qr(this,C_,pR).call(this),ct=this.getNextId(),dt=Qr(this,__,fR).call(this,{parent:this,id:ct,x:ot,y:ut,uiManager:Jt(this,ms),isCentered:!0,...et});dt&&this.add(dt)}async deserialize(g){var et;return await((et=Jt(Np,Ov).get(g.annotationType??g.annotationEditorType))==null?void 0:et.deserialize(g,this,Jt(this,ms)))||null}createAndAddNewEditor(g,et,ot={}){const ut=this.getNextId(),ct=Qr(this,__,fR).call(this,{parent:this,id:ut,x:g.offsetX,y:g.offsetY,uiManager:Jt(this,ms),isCentered:et,...ot});return ct&&this.add(ct),ct}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(g={}){this.createAndAddNewEditor(Qr(this,C_,pR).call(this),!0,g)}setSelected(g){Jt(this,ms).setSelected(g)}toggleSelected(g){Jt(this,ms).toggleSelected(g)}unselect(g){Jt(this,ms).unselect(g)}pointerup(g){var ut;const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div||!Jt(this,Mv)||(Ir(this,Mv,!1),(ut=Jt(this,wp,em))!=null&&ut.isDrawer&&Jt(this,wp,em).supportMultipleDrawings))return;if(!Jt(this,sS)){Ir(this,sS,!0);return}const ot=Jt(this,ms).getMode();if(ot===AnnotationEditorType.STAMP||ot===AnnotationEditorType.SIGNATURE){Jt(this,ms).unselectAll();return}this.createAndAddNewEditor(g,!1)}pointerdown(g){var ut;if(Jt(this,ms).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),Jt(this,Mv)){Ir(this,Mv,!1);return}const{isMac:et}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&et||g.target!==this.div)return;if(Ir(this,Mv,!0),(ut=Jt(this,wp,em))!=null&&ut.isDrawer){this.startDrawingSession(g);return}const ot=Jt(this,ms).getActive();Ir(this,sS,!ot||ot.isEmpty())}startDrawingSession(g){if(this.div.focus({preventScroll:!0}),Jt(this,Hp)){Jt(this,wp,em).startDrawing(this,Jt(this,ms),!1,g);return}Jt(this,ms).setCurrentDrawingSession(this),Ir(this,Hp,new AbortController);const et=Jt(this,ms).combinedSignal(Jt(this,Hp));this.div.addEventListener("blur",({relatedTarget:ot})=>{ot&&!this.div.contains(ot)&&(Ir(this,w0,null),this.commitOrRemove())},{signal:et}),Jt(this,wp,em).startDrawing(this,Jt(this,ms),!1,g)}pause(g){if(g){const{activeElement:et}=document;this.div.contains(et)&&Ir(this,w0,et);return}Jt(this,w0)&&setTimeout(()=>{var et;(et=Jt(this,w0))==null||et.focus(),Ir(this,w0,null)},0)}endDrawingSession(g=!1){return Jt(this,Hp)?(Jt(this,ms).setCurrentDrawingSession(null),Jt(this,Hp).abort(),Ir(this,Hp,null),Ir(this,w0,null),Jt(this,wp,em).endDrawing(g)):null}findNewParent(g,et,ot){const ut=Jt(this,ms).findParent(et,ot);return ut===null||ut===this?!1:(ut.changeParent(g),!0)}commitOrRemove(){return Jt(this,Hp)?(this.endDrawingSession(),!0):!1}onScaleChanging(){Jt(this,Hp)&&Jt(this,wp,em).onScaleChangingWhenDrawing(this)}destroy(){var g,et;this.commitOrRemove(),((g=Jt(this,ms).getActive())==null?void 0:g.parent)===this&&(Jt(this,ms).commitOrRemove(),Jt(this,ms).setActiveEditor(null)),Jt(this,S0)&&(clearTimeout(Jt(this,S0)),Ir(this,S0,null));for(const ot of Jt(this,Nu).values())(et=Jt(this,L1))==null||et.removePointerInTextLayer(ot.contentDiv),ot.setParent(null),ot.isAttachedToDOM=!1,ot.div.remove();this.div=null,Jt(this,Nu).clear(),Jt(this,ms).removeLayer(this)}render({viewport:g}){this.viewport=g,setLayerDimensions(this.div,g);for(const et of Jt(this,ms).getEditors(this.pageIndex))this.add(et),et.rebuild();this.updateMode()}update({viewport:g}){Jt(this,ms).commitOrRemove(),Qr(this,uS,LC).call(this);const et=this.viewport.rotation,ot=g.rotation;if(this.viewport=g,setLayerDimensions(this.div,{rotation:ot}),et!==ot)for(const ut of Jt(this,Nu).values())ut.rotate(ot)}get pageDimensions(){const{pageWidth:g,pageHeight:et}=this.viewport.rawDims;return[g,et]}get scale(){return Jt(this,ms).viewParameters.realScale}};L1=new WeakMap,sS=new WeakMap,Nv=new WeakMap,Dv=new WeakMap,S0=new WeakMap,Nu=new WeakMap,Mv=new WeakMap,aS=new WeakMap,oS=new WeakMap,Hp=new WeakMap,w0=new WeakMap,Tl=new WeakMap,_0=new WeakMap,Fv=new WeakMap,lS=new WeakMap,ms=new WeakMap,Ov=new WeakMap,w_=new WeakSet,dR=function(){return Jt(this,Nu).size!==0?Jt(this,Nu).values():Jt(this,ms).getEditors(this.pageIndex)},_T=new WeakSet,xN=function(g){Jt(this,ms).unselectAll();const{target:et}=g;if(et===Jt(this,Tl).div||(et.getAttribute("role")==="img"||et.classList.contains("endOfContent"))&&Jt(this,Tl).div.contains(et)){const{isMac:ot}=util_FeatureTest.platform;if(g.button!==0||g.ctrlKey&&ot)return;Jt(this,ms).showAllEditors("highlight",!0,!0),Jt(this,Tl).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,Jt(this,ms).direction==="ltr",{target:Jt(this,Tl).div,x:g.x,y:g.y}),Jt(this,Tl).div.addEventListener("pointerup",()=>{Jt(this,Tl).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:Jt(this,ms)._signal}),g.preventDefault()}},wp=new WeakSet,em=function(){return Jt(Np,Ov).get(Jt(this,ms).getMode())},__=new WeakSet,fR=function(g){const et=Jt(this,wp,em);return et?new et.prototype.constructor(g):null},C_=new WeakSet,pR=function(){const{x:g,y:et,width:ot,height:ut}=this.boundingClientRect,ct=Math.max(0,g),dt=Math.max(0,et),ft=Math.min(window.innerWidth,g+ot),St=Math.min(window.innerHeight,et+ut),kt=(ct+ft)/2-g,Tt=(dt+St)/2-et,[Rt,Ft]=this.viewport.rotation%180===0?[kt,Tt]:[Tt,kt];return{offsetX:Rt,offsetY:Ft}},uS=new WeakSet,LC=function(){for(const g of Jt(this,Nu).values())g.isEmpty()&&g.remove()},Kn(Np,"_initialized",!1),Mr(Np,Ov,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(g=>[g._editorType,g])));let AnnotationEditorLayer=Np;var Gp,uu,j1,A_,CT,bN,k_,mR,kT,EN,T_,gR;const Xo=class Xo{constructor({pageIndex:g}){Mr(this,k_);Mr(this,kT);Mr(this,T_);Mr(this,Gp,null);Mr(this,uu,new Map);Mr(this,j1,new Map);this.pageIndex=g}setParent(g){if(!Jt(this,Gp)){Ir(this,Gp,g);return}if(Jt(this,Gp)!==g){if(Jt(this,uu).size>0)for(const et of Jt(this,uu).values())et.remove(),g.append(et);Ir(this,Gp,g)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(g,et=!1,ot=!1){const ut=Ko(Xo,A_)._++,ct=Qr(this,k_,mR).call(this),dt=Xo._svgFactory.createElement("defs");ct.append(dt);const ft=Xo._svgFactory.createElement("path");dt.append(ft);const St=`path_p${this.pageIndex}_${ut}`;ft.setAttribute("id",St),ft.setAttribute("vector-effect","non-scaling-stroke"),et&&Jt(this,j1).set(ut,ft);const kt=ot?Qr(this,kT,EN).call(this,dt,St):null,Tt=Xo._svgFactory.createElement("use");return ct.append(Tt),Tt.setAttribute("href",`#${St}`),this.updateProperties(ct,g),Jt(this,uu).set(ut,ct),{id:ut,clipPathId:`url(#${kt})`}}drawOutline(g,et){const ot=Ko(Xo,A_)._++,ut=Qr(this,k_,mR).call(this),ct=Xo._svgFactory.createElement("defs");ut.append(ct);const dt=Xo._svgFactory.createElement("path");ct.append(dt);const ft=`path_p${this.pageIndex}_${ot}`;dt.setAttribute("id",ft),dt.setAttribute("vector-effect","non-scaling-stroke");let St;if(et){const Rt=Xo._svgFactory.createElement("mask");ct.append(Rt),St=`mask_p${this.pageIndex}_${ot}`,Rt.setAttribute("id",St),Rt.setAttribute("maskUnits","objectBoundingBox");const Ft=Xo._svgFactory.createElement("rect");Rt.append(Ft),Ft.setAttribute("width","1"),Ft.setAttribute("height","1"),Ft.setAttribute("fill","white");const jt=Xo._svgFactory.createElement("use");Rt.append(jt),jt.setAttribute("href",`#${ft}`),jt.setAttribute("stroke","none"),jt.setAttribute("fill","black"),jt.setAttribute("fill-rule","nonzero"),jt.classList.add("mask")}const kt=Xo._svgFactory.createElement("use");ut.append(kt),kt.setAttribute("href",`#${ft}`),St&&kt.setAttribute("mask",`url(#${St})`);const Tt=kt.cloneNode();return ut.append(Tt),kt.classList.add("mainOutline"),Tt.classList.add("secondaryOutline"),this.updateProperties(ut,g),Jt(this,uu).set(ot,ut),ot}finalizeDraw(g,et){Jt(this,j1).delete(g),this.updateProperties(g,et)}updateProperties(g,et){var St;if(!et)return;const{root:ot,bbox:ut,rootClass:ct,path:dt}=et,ft=typeof g=="number"?Jt(this,uu).get(g):g;if(ft){if(ot&&Qr(this,T_,gR).call(this,ft,ot),ut&&Qr(St=Xo,CT,bN).call(St,ft,ut),ct){const{classList:kt}=ft;for(const[Tt,Rt]of Object.entries(ct))kt.toggle(Tt,Rt)}if(dt){const Tt=ft.firstChild.firstChild;Qr(this,T_,gR).call(this,Tt,dt)}}}updateParent(g,et){if(et===this)return;const ot=Jt(this,uu).get(g);ot&&(Jt(et,Gp).append(ot),Jt(this,uu).delete(g),Jt(et,uu).set(g,ot))}remove(g){Jt(this,j1).delete(g),Jt(this,Gp)!==null&&(Jt(this,uu).get(g).remove(),Jt(this,uu).delete(g))}destroy(){Ir(this,Gp,null);for(const g of Jt(this,uu).values())g.remove();Jt(this,uu).clear(),Jt(this,j1).clear()}};Gp=new WeakMap,uu=new WeakMap,j1=new WeakMap,A_=new WeakMap,CT=new WeakSet,bN=function(g,[et,ot,ut,ct]){const{style:dt}=g;dt.top=`${100*ot}%`,dt.left=`${100*et}%`,dt.width=`${100*ut}%`,dt.height=`${100*ct}%`},k_=new WeakSet,mR=function(){const g=Xo._svgFactory.create(1,1,!0);return Jt(this,Gp).append(g),g.setAttribute("aria-hidden",!0),g},kT=new WeakSet,EN=function(g,et){const ot=Xo._svgFactory.createElement("clipPath");g.append(ot);const ut=`clip_${et}`;ot.setAttribute("id",ut),ot.setAttribute("clipPathUnits","objectBoundingBox");const ct=Xo._svgFactory.createElement("use");return ot.append(ct),ct.setAttribute("href",`#${et}`),ct.classList.add("clip"),ut},T_=new WeakSet,gR=function(g,et){for(const[ot,ut]of Object.entries(et))ut===null?g.removeAttribute(ot):g.setAttribute(ot,ut)},Mr(Xo,CT),Mr(Xo,A_,0);let DrawLayer=Xo;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$2,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util:Util$1,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$2,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util:Util$1,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));var has=Object.prototype.hasOwnProperty;function find(it,g,et){for(et of it.keys())if(dequal(et,g))return et}function dequal(it,g){var et,ot,ut;if(it===g)return!0;if(it&&g&&(et=it.constructor)===g.constructor){if(et===Date)return it.getTime()===g.getTime();if(et===RegExp)return it.toString()===g.toString();if(et===Array){if((ot=it.length)===g.length)for(;ot--&&dequal(it[ot],g[ot]););return ot===-1}if(et===Set){if(it.size!==g.size)return!1;for(ot of it)if(ut=ot,ut&&typeof ut=="object"&&(ut=find(g,ut),!ut)||!g.has(ut))return!1;return!0}if(et===Map){if(it.size!==g.size)return!1;for(ot of it)if(ut=ot[0],ut&&typeof ut=="object"&&(ut=find(g,ut),!ut)||!dequal(ot[1],g.get(ut)))return!1;return!0}if(et===ArrayBuffer)it=new Uint8Array(it),g=new Uint8Array(g);else if(et===DataView){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it.getInt8(ot)===g.getInt8(ot););return ot===-1}if(ArrayBuffer.isView(it)){if((ot=it.byteLength)===g.byteLength)for(;ot--&&it[ot]===g[ot];);return ot===-1}if(!et||typeof it=="object"){ot=0;for(et in it)if(has.call(it,et)&&++ot&&!has.call(g,et)||!(et in g)||!dequal(it[et],g[et]))return!1;return Object.keys(g).length===ot}}return it!==it&&g!==g}function makeCancellablePromise(it){let g=!1;return{promise:new Promise((ot,ut)=>{it.then(ct=>!g&&ot(ct)).catch(ct=>!g&&ut(ct))}),cancel(){g=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(it,g){const et={};for(const ot of allEvents){const ut=it[ot];ut&&(g?et[ot]=ct=>ut(ct,g(ot)):et[ot]=ut)}return et}var isProduction=!0,prefix="Invariant failed";function invariant(it,g){if(!it){if(isProduction)throw new Error(prefix);var et=typeof g=="function"?g():g,ot=et?"".concat(prefix,": ").concat(et):prefix;throw new Error(ot)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),documentContext=reactExports.createContext(null),DocumentContext=documentContext,DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(g){this.pdfDocument=g}setViewer(g){this.pdfViewer=g}setExternalLinkRel(g){this.externalLinkRel=g}setExternalLinkTarget(g){this.externalLinkTarget=g}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(g){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=g}get rotation(){return 0}set rotation(g){}addLinkAttributes(g,et,ot){g.href=et,g.rel=this.externalLinkRel||DEFAULT_LINK_REL,g.target=ot?"_blank":this.externalLinkTarget||""}goToDestination(g){return new Promise(et=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(g,"Destination is not specified."),typeof g=="string"?this.pdfDocument.getDestination(g).then(et):Array.isArray(g)?et(g):g.then(et)}).then(et=>{invariant(Array.isArray(et),`"${et}" is not a valid destination array.`);const ot=et[0];new Promise(ut=>{invariant(this.pdfDocument,"PDF document not loaded."),ot instanceof Object?this.pdfDocument.getPageIndex(ot).then(ct=>{ut(ct)}).catch(()=>{invariant(!1,`"${ot}" is not a valid page reference.`)}):typeof ot=="number"?ut(ot):invariant(!1,`"${ot}" is not a valid destination reference.`)}).then(ut=>{const ct=ut+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(ct>=1&&ct<=this.pagesCount,`"${ct}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:et,pageIndex:ut,pageNumber:ct})})})}goToPage(g){const et=g-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(g>=1&&g<=this.pagesCount,`"${g}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:et,pageNumber:g})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(g){this.goToDestination(g)}}function Message({children:it,type:g}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${g}`,children:it})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses;function reducer$1(it,g){switch(g.type){case"RESOLVE":return{value:g.value,error:void 0};case"REJECT":return{value:!1,error:g.error};case"RESET":return{value:void 0,error:void 0};default:return it}}function useResolver(){return reactExports.useReducer(reducer$1,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(it){return typeof it<"u"}function isProvided(it){return isDefined(it)&&it!==null}function isString(it){return typeof it=="string"}function isArrayBuffer(it){return it instanceof ArrayBuffer}function isBlob(it){return invariant(isBrowser,"isBlob can only be used in a browser environment"),it instanceof Blob}function isDataURI(it){return isString(it)&&/^data:/.test(it)}function dataURItoByteString(it){invariant(isDataURI(it),"Invalid data URI.");const[g="",et=""]=it.split(",");return g.split(";").indexOf("base64")!==-1?atob(et):unescape(et)}function getDevicePixelRatio$1(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(it){it!=null&&it.cancel&&it.cancel()}function makePageCallback(it,g){return Object.defineProperty(it,"width",{get(){return this.view[2]*g},configurable:!0}),Object.defineProperty(it,"height",{get(){return this.view[3]*g},configurable:!0}),Object.defineProperty(it,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(it,"originalHeight",{get(){return this.view[3]},configurable:!0}),it}function isCancelException(it){return it.name==="RenderingCancelledException"}function loadFromFile(it){return new Promise((g,et)=>{const ot=new FileReader;ot.onload=()=>{if(!ot.result)return et(new Error("Error while reading a file."));g(ot.result)},ot.onerror=ut=>{if(!ut.target)return et(new Error("Error while reading a file."));const{error:ct}=ut.target;if(!ct)return et(new Error("Error while reading a file."));switch(ct.code){case ct.NOT_FOUND_ERR:return et(new Error("Error while reading a file: File not found."));case ct.SECURITY_ERR:return et(new Error("Error while reading a file: Security error."));case ct.ABORT_ERR:return et(new Error("Error while reading a file: Aborted."));default:return et(new Error("Error while reading a file."))}},ot.readAsArrayBuffer(it)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(it,g)=>{switch(g){case PasswordResponses$1.NEED_PASSWORD:{const et=prompt("Enter the password to open this PDF file.");it(et);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const et=prompt("Invalid password. Please try again.");it(et);break}}};function isParameterObject(it){return typeof it=="object"&&it!==null&&("data"in it||"range"in it||"url"in it)}const Document=reactExports.forwardRef(function it({children:g,className:et,error:ot="Failed to load PDF file.",externalLinkRel:ut,externalLinkTarget:ct,file:dt,inputRef:ft,imageResourcesPath:St,loading:kt="Loading PDF",noData:Tt="No PDF file specified.",onItemClick:Rt,onLoadError:Ft,onLoadProgress:jt,onLoadSuccess:Bt,onPassword:zt=defaultOnPassword,onSourceError:Ht,onSourceSuccess:Ut,options:Kt,renderMode:Yt,rotate:er,scale:ar,...ir},lr){const[cr,vr]=useResolver(),{value:xr,error:yr}=cr,[Sr,kr]=useResolver(),{value:Pr,error:Or}=Sr,hr=reactExports.useRef(new LinkService),Tr=reactExports.useRef([]),mr=reactExports.useRef(void 0),Er=reactExports.useRef(void 0);dt&&dt!==mr.current&&isParameterObject(dt)&&(warning$1(!dequal(dt,mr.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),mr.current=dt),Kt&&Kt!==Er.current&&(warning$1(!dequal(Kt,Er.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Er.current=Kt);const Dr=reactExports.useRef({scrollPageIntoView:Un=>{const{dest:Ln,pageNumber:ns,pageIndex:gs=ns-1}=Un;if(Rt){Rt({dest:Ln,pageIndex:gs,pageNumber:ns});return}const Es=Tr.current[gs];if(Es){Es.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${ns} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(lr,()=>({linkService:hr,pages:Tr,viewer:Dr}),[]);function Cr(){Ut&&Ut()}function Lr(){yr&&(warning$1(!1,yr.toString()),Ht&&Ht(yr))}function qr(){vr({type:"RESET"})}reactExports.useEffect(qr,[dt,vr]);const sn=reactExports.useCallback(async()=>{if(!dt)return null;if(typeof dt=="string")return isDataURI(dt)?{data:dataURItoByteString(dt)}:(displayCORSWarning(),{url:dt});if(dt instanceof PDFDataRangeTransport)return{range:dt};if(isArrayBuffer(dt))return{data:dt};if(isBrowser&&isBlob(dt))return{data:await loadFromFile(dt)};if(invariant(typeof dt=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(dt),"Invalid parameter object: need either .data, .range or .url"),"url"in dt&&typeof dt.url=="string"){if(isDataURI(dt.url)){const{url:Un,...Ln}=dt;return{data:dataURItoByteString(Un),...Ln}}displayCORSWarning()}return dt},[dt]);reactExports.useEffect(()=>{const Un=makeCancellablePromise(sn());return Un.promise.then(Ln=>{vr({type:"RESOLVE",value:Ln})}).catch(Ln=>{vr({type:"REJECT",error:Ln})}),()=>{cancelRunningTask(Un)}},[sn,vr]),reactExports.useEffect(()=>{if(!(typeof xr>"u")){if(xr===!1){Lr();return}Cr()}},[xr]);function an(){Pr&&(Bt&&Bt(Pr),Tr.current=new Array(Pr.numPages),hr.current.setDocument(Pr))}function tn(){Or&&(warning$1(!1,Or.toString()),Ft&&Ft(Or))}reactExports.useEffect(function(){kr({type:"RESET"})},[kr,xr]),reactExports.useEffect(function(){if(!xr)return;const Ln=Kt?{...xr,...Kt}:xr,ns=getDocument(Ln);jt&&(ns.onProgress=jt),zt&&(ns.onPassword=zt);const gs=ns,Es=gs.promise.then(wn=>{kr({type:"RESOLVE",value:wn})}).catch(wn=>{gs.destroyed||kr({type:"REJECT",error:wn})});return()=>{Es.finally(()=>gs.destroy())}},[Kt,kr,xr]),reactExports.useEffect(()=>{if(!(typeof Pr>"u")){if(Pr===!1){tn();return}an()}},[Pr]),reactExports.useEffect(function(){hr.current.setViewer(Dr.current),hr.current.setExternalLinkRel(ut),hr.current.setExternalLinkTarget(ct)},[ut,ct]);const ln=reactExports.useCallback((Un,Ln)=>{Tr.current[Un]=Ln},[]),yn=reactExports.useCallback(Un=>{delete Tr.current[Un]},[]),pn=reactExports.useMemo(()=>({imageResourcesPath:St,linkService:hr.current,onItemClick:Rt,pdf:Pr,registerPage:ln,renderMode:Yt,rotate:er,scale:ar,unregisterPage:yn}),[St,Rt,Pr,ln,Yt,er,ar,yn]),En=reactExports.useMemo(()=>makeEventProps(ir,()=>Pr),[ir,Pr]);function On(){function Un(ns){return!!(ns!=null&&ns.pdf)}if(!Un(pn))throw new Error("pdf is undefined");const Ln=typeof g=="function"?g(pn):g;return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:pn,children:Ln})}function Xn(){return dt?Pr==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof kt=="function"?kt():kt}):Pr===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof ot=="function"?ot():ot}):On():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Tt=="function"?Tt():Tt})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",et),ref:ft,...En,children:Xn()})}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var it=[],g=0;g<arguments.length;g++)it[g]=arguments[g];var et=it.filter(Boolean);if(et.length<=1){var ot=et[0];return ot||null}return function(ct){for(var dt=0,ft=et;dt<ft.length;dt++){var St=ft[dt];typeof St=="function"?St(ct):St&&(St.current=ct)}}}const pageContext=reactExports.createContext(null),PageContext=pageContext;function usePageContext(){return reactExports.useContext(PageContext)}function AnnotationLayer(){const it=useDocumentContext(),g=usePageContext();invariant(g,"Unable to find Page context.");const et={...it,...g},{imageResourcesPath:ot,linkService:ut,onGetAnnotationsError:ct,onGetAnnotationsSuccess:dt,onRenderAnnotationLayerError:ft,onRenderAnnotationLayerSuccess:St,page:kt,pdf:Tt,renderForms:Rt,rotate:Ft,scale:jt=1}=et;invariant(Tt,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(kt,"Attempted to load page annotations, but no page was specified."),invariant(ut,"Attempted to load page annotations, but no linkService was specified.");const[Bt,zt]=useResolver(),{value:Ht,error:Ut}=Bt,Kt=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function Yt(){Ht&&dt&&dt(Ht)}function er(){Ut&&(warning$1(!1,Ut.toString()),ct&&ct(Ut))}reactExports.useEffect(function(){zt({type:"RESET"})},[zt,kt]),reactExports.useEffect(function(){if(!kt)return;const vr=makeCancellablePromise(kt.getAnnotations()),xr=vr;return vr.promise.then(yr=>{zt({type:"RESOLVE",value:yr})}).catch(yr=>{zt({type:"REJECT",error:yr})}),()=>{cancelRunningTask(xr)}},[zt,kt]),reactExports.useEffect(()=>{if(Ht!==void 0){if(Ht===!1){er();return}Yt()}},[Ht]);function ar(){St&&St()}function ir(cr){warning$1(!1,`${cr}`),ft&&ft(cr)}const lr=reactExports.useMemo(()=>kt.getViewport({scale:jt,rotation:Ft}),[kt,Ft,jt]);return reactExports.useEffect(function(){if(!Tt||!kt||!ut||!Ht)return;const{current:vr}=Kt;if(!vr)return;const xr=lr.clone({dontFlip:!0}),yr={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:Tt.annotationStorage,commentManager:null,div:vr,l10n:null,linkService:ut,page:kt,structTreeLayer:null,viewport:xr},Sr={annotations:Ht,annotationStorage:Tt.annotationStorage,div:vr,imageResourcesPath:ot,linkService:ut,page:kt,renderForms:Rt,viewport:xr};vr.innerHTML="";try{new AnnotationLayer$1(yr).render(Sr),ar()}catch(kr){ir(kr)}return()=>{}},[Ht,ot,ut,kt,Tt,Rt,lr]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:Kt})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(it){return it in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(it){return"children"in it}function isStructTreeNodeWithOnlyContentChild(it){return isStructTreeNode(it)?it.children.length===1&&0 in it.children&&"id"in it.children[0]:!1}function getRoleAttributes(it){const g={};if(isStructTreeNode(it)){const{role:et}=it,ot=et.match(HEADING_PATTERN);if(ot)g.role="heading",g["aria-level"]=Number(ot[1]);else if(isPdfRole(et)){const ut=PDF_ROLE_TO_HTML_ROLE[et];ut&&(g.role=ut)}}return g}function getBaseAttributes(it){const g={};if(isStructTreeNode(it)){if(it.alt!==void 0&&(g["aria-label"]=it.alt),it.lang!==void 0&&(g.lang=it.lang),isStructTreeNodeWithOnlyContentChild(it)){const[et]=it.children;if(et){const ot=getBaseAttributes(et);return{...g,...ot}}}}else"id"in it&&(g["aria-owns"]=it.id);return g}function getAttributes(it){return it?{...getRoleAttributes(it),...getBaseAttributes(it)}:null}function StructTreeItem({className:it,node:g}){const et=reactExports.useMemo(()=>getAttributes(g),[g]),ot=reactExports.useMemo(()=>!isStructTreeNode(g)||isStructTreeNodeWithOnlyContentChild(g)?null:g.children.map((ut,ct)=>jsxRuntimeExports.jsx(StructTreeItem,{node:ut},ct)),[g]);return jsxRuntimeExports.jsx("span",{className:it,...et,children:ot})}function StructTree(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{onGetStructTreeError:g,onGetStructTreeSuccess:et}=it,[ot,ut]=useResolver(),{value:ct,error:dt}=ot,{customTextRenderer:ft,page:St}=it;function kt(){ct&&et&&et(ct)}function Tt(){dt&&(warning$1(!1,dt.toString()),g&&g(dt))}return reactExports.useEffect(function(){ut({type:"RESET"})},[ut,St]),reactExports.useEffect(function(){if(ft||!St)return;const Ft=makeCancellablePromise(St.getStructTree()),jt=Ft;return Ft.promise.then(Bt=>{ut({type:"RESOLVE",value:Bt})}).catch(Bt=>{ut({type:"REJECT",error:Bt})}),()=>cancelRunningTask(jt)},[ft,St,ut]),reactExports.useEffect(()=>{if(ct!==void 0){if(ct===!1){Tt();return}kt()}},[ct]),ct?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:ct}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas$1(it){const g=usePageContext();invariant(g,"Unable to find Page context.");const et={...g,...it},{_className:ot,canvasBackground:ut,devicePixelRatio:ct=getDevicePixelRatio$1(),onRenderError:dt,onRenderSuccess:ft,page:St,renderForms:kt,renderTextLayer:Tt,rotate:Rt,scale:Ft}=et,{canvasRef:jt}=it;invariant(St,"Attempted to render page canvas, but no page was specified.");const Bt=reactExports.useRef(null);function zt(){St&&ft&&ft(makePageCallback(St,Ft))}function Ht(er){isCancelException(er)||(warning$1(!1,er.toString()),dt&&dt(er))}const Ut=reactExports.useMemo(()=>St.getViewport({scale:Ft*ct,rotation:Rt}),[ct,St,Rt,Ft]),Kt=reactExports.useMemo(()=>St.getViewport({scale:Ft,rotation:Rt}),[St,Rt,Ft]);reactExports.useEffect(function(){if(!St)return;St.cleanup();const{current:ar}=Bt;if(!ar)return;ar.width=Ut.width,ar.height=Ut.height,ar.style.width=`${Math.floor(Kt.width)}px`,ar.style.height=`${Math.floor(Kt.height)}px`,ar.style.visibility="hidden";const ir={annotationMode:kt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:ar,canvasContext:ar.getContext("2d",{alpha:!1}),viewport:Ut};ut&&(ir.background=ut);const lr=St.render(ir),cr=lr;return lr.promise.then(()=>{ar.style.visibility="",zt()}).catch(Ht),()=>cancelRunningTask(cr)},[ut,St,kt,Ut,Kt]);const Yt=reactExports.useCallback(()=>{const{current:er}=Bt;er&&(er.width=0,er.height=0)},[]);return reactExports.useEffect(()=>Yt,[Yt]),jsxRuntimeExports.jsx("canvas",{className:`${ot}__canvas`,dir:"ltr",ref:mergeRefs(jt,Bt),style:{display:"block",userSelect:"none"},children:Tt?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(it){return"str"in it}function TextLayer(){const it=usePageContext();invariant(it,"Unable to find Page context.");const{customTextRenderer:g,onGetTextError:et,onGetTextSuccess:ot,onRenderTextLayerError:ut,onRenderTextLayerSuccess:ct,page:dt,pageIndex:ft,pageNumber:St,rotate:kt,scale:Tt}=it;invariant(dt,"Attempted to load page text content, but no page was specified.");const[Rt,Ft]=useResolver(),{value:jt,error:Bt}=Rt,zt=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function Ht(){jt&&ot&&ot(jt)}function Ut(){Bt&&(warning$1(!1,Bt.toString()),et&&et(Bt))}reactExports.useEffect(function(){Ft({type:"RESET"})},[dt,Ft]),reactExports.useEffect(function(){if(!dt)return;const cr=makeCancellablePromise(dt.getTextContent()),vr=cr;return cr.promise.then(xr=>{Ft({type:"RESOLVE",value:xr})}).catch(xr=>{Ft({type:"REJECT",error:xr})}),()=>cancelRunningTask(vr)},[dt,Ft]),reactExports.useEffect(()=>{if(jt!==void 0){if(jt===!1){Ut();return}Ht()}},[jt]);const Kt=reactExports.useCallback(()=>{ct&&ct()},[ct]),Yt=reactExports.useCallback(lr=>{warning$1(!1,lr.toString()),ut&&ut(lr)},[ut]);function er(){const lr=zt.current;lr&&lr.classList.add("selecting")}function ar(){const lr=zt.current;lr&&lr.classList.remove("selecting")}const ir=reactExports.useMemo(()=>dt.getViewport({scale:Tt,rotation:kt}),[dt,kt,Tt]);return reactExports.useLayoutEffect(function(){if(!dt||!jt)return;const{current:cr}=zt;if(!cr)return;cr.innerHTML="";const vr=dt.streamTextContent({includeMarkedContent:!0}),xr={container:cr,textContentSource:vr,viewport:ir},yr=new TextLayer$1(xr),Sr=yr;return yr.render().then(()=>{const kr=document.createElement("div");kr.className="endOfContent",cr.append(kr);const Pr=cr.querySelectorAll('[role="presentation"]');if(g){let Or=0;jt.items.forEach((hr,Tr)=>{if(!isTextItem(hr))return;const mr=Pr[Or];if(!mr)return;const Er=g({pageIndex:ft,pageNumber:St,itemIndex:Tr,...hr});mr.innerHTML=Er,Or+=hr.str&&hr.hasEOL?2:1})}Kt()}).catch(Yt),()=>cancelRunningTask(Sr)},[g,Yt,Kt,dt,ft,St,jt,ir]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:ar,onMouseDown:er,ref:zt})}const defaultScale=1;function Page(it){const et={...useDocumentContext(),...it},{_className:ot="react-pdf__Page",_enableRegisterUnregisterPage:ut=!0,canvasBackground:ct,canvasRef:dt,children:ft,className:St,customRenderer:kt,customTextRenderer:Tt,devicePixelRatio:Rt,error:Ft="Failed to load the page.",height:jt,inputRef:Bt,loading:zt="Loading page",noData:Ht="No page specified.",onGetAnnotationsError:Ut,onGetAnnotationsSuccess:Kt,onGetStructTreeError:Yt,onGetStructTreeSuccess:er,onGetTextError:ar,onGetTextSuccess:ir,onLoadError:lr,onLoadSuccess:cr,onRenderAnnotationLayerError:vr,onRenderAnnotationLayerSuccess:xr,onRenderError:yr,onRenderSuccess:Sr,onRenderTextLayerError:kr,onRenderTextLayerSuccess:Pr,pageIndex:Or,pageNumber:hr,pdf:Tr,registerPage:mr,renderAnnotationLayer:Er=!0,renderForms:Dr=!1,renderMode:Cr="canvas",renderTextLayer:Lr=!0,rotate:qr,scale:sn=defaultScale,unregisterPage:an,width:tn,...ln}=et,[yn,pn]=useResolver(),{value:En,error:On}=yn,Xn=reactExports.useRef(null);invariant(Tr,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Un=isProvided(hr)?hr-1:Or??null,Ln=hr??(isProvided(Or)?Or+1:null),ns=qr??(En?En.rotate:null),gs=reactExports.useMemo(()=>{if(!En)return null;let Zt=1;const or=sn??defaultScale;if(tn||jt){const ur=En.getViewport({scale:1,rotation:ns});tn?Zt=tn/ur.width:jt&&(Zt=jt/ur.height)}return or*Zt},[jt,En,ns,sn,tn]);reactExports.useEffect(function(){return()=>{isProvided(Un)&&ut&&an&&an(Un)}},[ut,Tr,Un,an]);function Es(){if(cr){if(!En||!gs)return;cr(makePageCallback(En,gs))}if(ut&&mr){if(!isProvided(Un)||!Xn.current)return;mr(Un,Xn.current)}}function wn(){On&&(warning$1(!1,On.toString()),lr&&lr(On))}reactExports.useEffect(function(){pn({type:"RESET"})},[pn,Tr,Un]),reactExports.useEffect(function(){if(!Tr||!Ln)return;const or=makeCancellablePromise(Tr.getPage(Ln)),ur=or;return or.promise.then(dr=>{pn({type:"RESOLVE",value:dr})}).catch(dr=>{pn({type:"REJECT",error:dr})}),()=>cancelRunningTask(ur)},[pn,Tr,Ln]),reactExports.useEffect(()=>{if(En!==void 0){if(En===!1){wn();return}Es()}},[En,gs]);const mn=reactExports.useMemo(()=>isProvided(Un)&&Ln&&isProvided(ns)&&isProvided(gs)?{_className:ot,canvasBackground:ct,customTextRenderer:Tt,devicePixelRatio:Rt,onGetAnnotationsError:Ut,onGetAnnotationsSuccess:Kt,onGetStructTreeError:Yt,onGetStructTreeSuccess:er,onGetTextError:ar,onGetTextSuccess:ir,onRenderAnnotationLayerError:vr,onRenderAnnotationLayerSuccess:xr,onRenderError:yr,onRenderSuccess:Sr,onRenderTextLayerError:kr,onRenderTextLayerSuccess:Pr,page:En,pageIndex:Un,pageNumber:Ln,renderForms:Dr,renderTextLayer:Lr,rotate:ns,scale:gs}:null,[ot,ct,Tt,Rt,Ut,Kt,Yt,er,ar,ir,vr,xr,yr,Sr,kr,Pr,En,Un,Ln,Dr,Lr,ns,gs]),Dn=reactExports.useMemo(()=>makeEventProps(ln,()=>En&&(gs?makePageCallback(En,gs):void 0)),[ln,En,gs]),Tn=`${Un}@${gs}/${ns}`;function An(){switch(Cr){case"custom":return invariant(kt,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(kt,{},`${Tn}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas$1,{canvasRef:dt},`${Tn}_canvas`)}}function $n(){return Lr?jsxRuntimeExports.jsx(TextLayer,{},`${Tn}_text`):null}function qn(){return Er?jsxRuntimeExports.jsx(AnnotationLayer,{},`${Tn}_annotations`):null}function Bn(){function Zt(ur){return!!(ur!=null&&ur.page)}if(!Zt(mn))throw new Error("page is undefined");const or=typeof ft=="function"?ft(mn):ft;return jsxRuntimeExports.jsxs(PageContext.Provider,{value:mn,children:[An(),$n(),qn(),or]})}function $t(){return Ln?Tr===null||En===void 0||En===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof zt=="function"?zt():zt}):Tr===!1||En===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof Ft=="function"?Ft():Ft}):Bn():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Ht=="function"?Ht():Ht})}return jsxRuntimeExports.jsx("div",{className:clsx(ot,St),"data-page-number":Ln,ref:mergeRefs(Bt,Xn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${gs}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:ct||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Dn,children:$t()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPreviewModal({fileUrl:it,fileTitle:g,partNumber:et,sourceType:ot="magnet",onClose:ut}){const[ct,dt]=reactExports.useState(null),[ft,St]=reactExports.useState(1.2),[kt,Tt]=reactExports.useState(!1),[Rt,Ft]=reactExports.useState(!1),[jt,Bt]=reactExports.useState(null),zt=reactExports.useMemo(()=>it?{url:`https://cre8tlystudio.com/api/pdf/proxy?url=${encodeURIComponent(it)}`}:null,[it]);if(!it)return null;reactExports.useEffect(()=>{if(!it)return;let Ut,Kt=0;const Yt=async()=>{try{const er=await fetch(zt.url,{method:"HEAD"}),ar=er.headers.get("content-type");er.ok&&(ar!=null&&ar.includes("pdf"))?Tt(!0):Kt<10?(Kt++,Ut=setTimeout(Yt,1500)):Bt("PDF is still being finalized. Try again in a few seconds.")}catch{Kt<10?(Kt++,Ut=setTimeout(Yt,1500)):Bt("PDF is still being finalized. Try again shortly.")}};return Yt(),()=>clearTimeout(Ut)},[it]);const Ht=async()=>{try{Ft(!0);const Ut=await fetch(zt.url);if(!Ut.ok)throw new Error(`Failed: ${Ut.status} ${Ut.statusText}`);const Kt=await Ut.blob(),Yt=URL.createObjectURL(Kt),er=document.createElement("a");if(er.href=Yt,ot==="book"){const ar=(g||"Book").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_"),ir=et?`_Part_${et}`:"";er.download=`${ar}${ir}.pdf`}else if(ot==="magnet"){const ar=(g||"Lead_Magnet").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_");er.download=`${ar}.pdf`}else er.download="document.pdf";document.body.appendChild(er),er.click(),document.body.removeChild(er),URL.revokeObjectURL(Yt),await new Promise(ar=>setTimeout(ar,2e3))}catch(Ut){console.error("Download error:",Ut),alert(" Download failed. Please try again.")}finally{Ft(!1)}};return reactExports.useEffect(()=>{if(!it){Tt(!1),Bt(null),Ft(!1),dt(null),St(1.2);return}Tt(!1),Bt(null),Ft(!1),dt(null),St(1.2)},[it,ut]),reactExports.useEffect(()=>{const Ut=()=>St(window.innerWidth<640?.8:1.2);return window.addEventListener("resize",Ut),Ut(),()=>window.removeEventListener("resize",Ut)},[]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md z-50 flex flex-col items-center justify-center p-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between mb-4 bg-[#111]/80 border border-gray-800 rounded-xl px-5 py-3 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 text-white/80 font-semibold text-lg tracking-wide",children:" PDF Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>St(ft+.2),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>St(Math.max(ft-.2,.6)),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:Ht,disabled:Rt,className:`p-2 rounded-lg transition text-white ${Rt?"bg-green-800 cursor-wait":"bg-green-600 hover:bg-green-600/90"}`,title:"Download",children:Rt?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"white",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),"Downloading"]}):jsxRuntimeExports.jsx(Download,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:ut,className:"p-2 rounded-lg hover:bg-red-600/90 bg-red-600 text-white transition",title:"Close",children:jsxRuntimeExports.jsx(X$2,{size:20})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-5xl max-h-[85vh] overflow-y-auto bg-[#121212] border border-gray-800 rounded-xl shadow-lg flex justify-center p-2 sm:p-6",children:[!kt&&!jt&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#00e0ff] mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium animate-pulse",children:" Finalizing your PDF  just a few more seconds..."}),jsxRuntimeExports.jsx("div",{className:"w-64 h-2 bg-gray-800 rounded-full overflow-hidden mt-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-[#00e0ff] via-[#00e07a] to-[#00e0ff] animate-progress"})})]}),jt&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-red-400 z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-center px-6 text-sm",children:jt})}),jsxRuntimeExports.jsx("div",{className:`w-full flex justify-center transition-opacity duration-500 ${kt?"opacity-100":"opacity-0"}`,children:kt&&!jt&&jsxRuntimeExports.jsx(Document$1,{file:zt,onLoadSuccess:({numPages:Ut})=>dt(Ut),onLoadError:Ut=>{console.error("PDF load error:",Ut),Bt("Failed to load PDF file.")},loading:jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading PDF"}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center w-full",children:Array.from(new Array(ct||0),(Ut,Kt)=>jsxRuntimeExports.jsx(Page,{pageNumber:Kt+1,scale:ft,renderTextLayer:!1,renderAnnotationLayer:!1,className:"mb-4",width:Math.min(window.innerWidth-40,900)},`page_${Kt+1}`))})})})]})]})}function NewContentModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ut,ct]=reactExports.useState(!1);async function dt(){if(!et){y$4.error("Please select a document type.",{position:"top-right",autoClose:2500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"dark"});return}ct(!0),it({contentType:et})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-6 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Select Document Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-3",children:[{label:"Lead Magnet",value:"lead_magnet",description:"Generate a persuasive, marketing-focused guide designed to attract and convert readers."},{label:"Learning Document",value:"learning_doc",description:"Create a detailed, step-by-step educational document that teaches practical real-world skills."}].map(ft=>jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg border p-3 transition ${et===ft.value?"border-green bg-green/10":"border-gray-700 hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"contentType",value:ft.value,checked:et===ft.value,onChange:St=>ot(St.target.value),className:"accent-green mt-1"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-base",children:ft.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:ft.description})]})]},ft.value))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:dt,disabled:ut,className:"bg-muteGrey px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:ut?"Loading...":"Continue"})]})]})})}function MagnetCardList({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var Rt;const[ot,ut]=reactExports.useState(null),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!kt.length)return null;function Tt(Ft){dt(!1),g(ft,Ft.contentType)}return jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[kt.map(Ft=>{var jt,Bt;return jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"aspect-[4/3] rounded-lg overflow-hidden border border-gray-700 mb-3",children:Ft.cover_image?jsxRuntimeExports.jsx("img",{src:Ft.cover_image,alt:Ft.title||"Cover",className:"object-cover w-full h-full"}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-xs text-gray-500 italic",children:"No Preview"})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate max-w-[70%]",children:Ft.title||"Digital Asset"}),Ft.theme?jsxRuntimeExports.jsx("span",{className:"px-2 py-[2px] rounded-full text-[10px]",style:{background:((jt=themeStyles[Ft.theme])==null?void 0:jt.background)||"#333",color:((Bt=themeStyles[Ft.theme])==null?void 0:Bt.color)||"#fff"},children:Ft.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-[10px]",children:"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",Ft.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(Ft.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-2 mb-2",children:[Ft.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:Ft.status==="completed"?"Completed":Ft.status==="pending"?"Building...":Ft.status==="failed"?"Failed":"Idle"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Ft.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(Ft.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),Ft.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ut(Ft.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Ft.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ft.edit_used||et(Ft.id)},disabled:Ft.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${Ft.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${Ft.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:Ft.edit_used?"Closed":"Edit"})]})]})]})]},Ft.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((Rt=kt.find(Ft=>Ft.pdf_url===ot))==null?void 0:Rt.title)||"Lead Magnet",onClose:()=>ut(null)}),ct&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function PaginationControls({currentPage:it,totalPages:g,onPageChange:et}){return g<=1?null:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{disabled:it===1,onClick:()=>et(it-1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:["Page ",it," of ",g]}),jsxRuntimeExports.jsx("button",{disabled:it===g,onClick:()=>et(it+1),className:"px-4 py-2 bg-gray-700 text-white rounded disabled:opacity-50",children:"Next"})]})}function SupportTab(){const[it,g]=reactExports.useState(!1),et=[{q:"How do I generate a lead magnet?",a:"Fill out your prompt, upload a logo, add your link, select a theme, and click Generate. Your PDF will be automatically created and ready to download."},{q:"How long does it take?",a:"Most PDFs take between 515 seconds to generate, depending on the number of pages and theme you select."},{q:"Where can I find my generated PDFs?",a:"All completed lead magnets are available in your dashboard under My Lead Magnets. You can view, download, or regenerate them anytime."},{q:"Can I generate more than one lead magnet?",a:"Yes! You can create as many as you want. Simply open the Lead Magnet Creator and repeat the process with a new prompt or design."},{q:"Can I use my own branding?",a:"Absolutely. You can upload your own logo and link to your website or product page. Themes adjust automatically to fit your brand look."},{q:"What are Pro Covers?",a:"Pro Covers is an exclusive upgrade that lets you upload custom cover images for your lead magnets. Your uploaded cover appears as the first page of your PDF, giving your content a professional, branded presentation. In addition to uploading your own designs, Pro Covers also includes access to thousands of royalty-free Unsplash images you can instantly use as backgrounds or full covers. This gives you unlimited creative flexibility without any licensing worriesavailable only with the Pro Covers plan."},{q:"Can I edit or regenerate an existing PDF?",a:"No. Each slot is designed for a single finalized PDF to ensure fair usage and prevent system abuse. Allowing unlimited regenerations could cause performance issues and disrupt other users workflows. If youd like to create a new version, please start a new lead magnet using a fresh slot."},{q:"Do you offer refunds?",a:"Since Cre8tly Studio is a digital service that instantly generates custom content, we do not offer refunds after delivery. However, if you experience a technical issue or duplicate charge, please reach out, well make it right."},{q:"Can I upgrade my plan or buy more credits?",a:"Yes. Additional credits and premium plans are available directly from your account dashboard."},{q:"What if I reach my limit?",a:"If youve hit your plan limit, youll see a message prompting you to upgrade or purchase more credits. Youll never lose access to past PDFs."},{q:"How do I contact support?",a:"You can reach out anytime on our Contact Us page Our team typically responds within 24-48 hours, MondayFriday."}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>g(!0),className:"fixed bottom-6 right-6 bg-green text-black font-semibold px-2 py-2 rounded-full shadow-lg hover:opacity-90 transition-all z-50 design-text text-sm",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{size:20})}),it&&jsxRuntimeExports.jsx("div",{onClick:()=>g(!1),className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{onClick:ot=>ot.stopPropagation(),className:"bg-gray-900 text-white p-8 rounded-2xl w-full max-w-2xl border border-gray-700 shadow-2xl relative max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 right-4 flex justify-between",children:jsxRuntimeExports.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-red-400 text-xl",children:""})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green",children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx("div",{className:"space-y-5 text-gray-300",children:et.map((ot,ut)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:ot.q}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1 leading-relaxed",children:ot.a})]},ut))}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx(Link$1,{to:"/contact",className:"text-green font-medium hover:underline",children:"Need more help? Contact Support "})})]})})]})}function GenerationOverlay({visible:it,progress:g,type:et="lead"}){return jsxRuntimeExports.jsx(AnimatePresence,{children:it&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"fixed inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm z-[9999] text-center p-6",children:[jsxRuntimeExports.jsx(motion.h2,{animate:{opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-white text-xl sm:text-2xl font-semibold mb-4",children:et==="book"?" Generating your book...":" Creating your digital asset..."}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-3/4 max-w-md mt-6",children:jsxRuntimeExports.jsx("div",{className:"relative w-full h-[3px] bg-gray-800/60 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full 
                bg-gradient-to-r from-white to-[#00E07A]
                transition-all duration-200 ease-linear animate-progressGlowGreen`,style:{width:`${g}%`,boxShadow:`
                    0 0 8px rgba(0,224,122,0.8),
                    0 0 16px rgba(0,224,122,0.7),
                    0 0 28px rgba(0,224,122,0.6),
                    0 0 45px rgba(0,224,122,0.5)
                  `}})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:g>=100&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:[0,.9,0]},transition:{duration:.5,ease:"easeOut"},className:"absolute inset-0 bg-white/30"},"complete-flash")}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{delay:.4,duration:.6}},className:"text-gray-400 text-sm mt-4 italic",children:et==="book"?"This may take a few minutes  crafting a great story takes time ":"This might take a moment  crafting something powerful "})]},"overlay")})}function DashboardLayout({children:it}){const g=useNavigate(),et=useLocation(),{user:ot,logout:ut}=useAuth(),[ct,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(0);reactExports.useEffect(()=>{const Tt=()=>{dt(window.innerWidth>=1024)};return Tt(),window.addEventListener("resize",Tt),()=>window.removeEventListener("resize",Tt)},[]),reactExports.useEffect(()=>{if(!(ot!=null&&ot.id))return;const Tt=async()=>{try{const Ft=await axiosInstance.get("/admin/messages/count");St(Ft.data.count||0)}catch(Ft){console.error("Failed to fetch unread count:",Ft)}};Tt();const Rt=setInterval(Tt,3e4);return()=>clearInterval(Rt)},[ot==null?void 0:ot.id]);const kt=[{label:"Digital Products",path:"/dashboard",icon:jsxRuntimeExports.jsx(Package,{size:22})},{label:"Assistant",path:"/books",icon:jsxRuntimeExports.jsx(BookOpen,{size:22})},{label:"Settings",path:"/settings",icon:jsxRuntimeExports.jsx(Settings,{size:22})},{label:"Prompt Memory",path:"/prompts",icon:jsxRuntimeExports.jsx(SquareTerminal,{size:22})},{label:"Inbox",path:"/notifications",icon:jsxRuntimeExports.jsx(Inbox$1,{size:22})},{label:"Plans",path:"/plans",icon:jsxRuntimeExports.jsx(DollarSign,{size:22})}];return jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-[#030712] text-white relative",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("aside",{className:`fixed top-0 left-0 w-[120px] h-full bg-gray-900/95 border-r border-gray-800 
       flex flex-col justify-between transform transition-transform duration-300 z-[60]
       ${ct?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-between h-full p-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center mt-6 mb-4",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Cre8tly",className:"w-16 h-16 mb-2"}),jsxRuntimeExports.jsx("h1",{className:"text-sm font-semibold text-white text-center tracking-wide",children:"Cre8tly Studio"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!1),className:"lg:hidden text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})})]}),jsxRuntimeExports.jsxs("nav",{className:"flex flex-col items-center gap-5 mt-8",children:[kt.map(Tt=>{const Rt=et.pathname===Tt.path,Ft=(ot==null?void 0:ot.brand_identity_file)&&Tt.path==="/settings";return jsxRuntimeExports.jsx("button",{onClick:()=>{g(Tt.path),window.innerWidth<1024&&dt(!1)},className:"flex flex-col items-center justify-center space-y-2 focus:outline-none",children:jsxRuntimeExports.jsxs("div",{className:`relative flex items-center justify-center w-12 h-12 rounded-xl border transition-all 
            ${Rt?"bg-green/10 border-green text-green shadow-[0_0_12px_rgba(34,197,94,0.4)]":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-green hover:text-green"}`,children:[Tt.icon,Tt.path==="/notifications"&&ft>0&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-[18px] h-[18px] text-[10px] bg-red-600 text-white font-bold rounded-full shadow-md",children:ft>9?"9+":ft}),Ft&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full opacity-75 animate-ping"}),jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-green rounded-full shadow-[0_0_6px_2px_rgba(34,197,94,0.8)]"})]})]})},Tt.path)}),(ot==null?void 0:ot.pro_status)==="active"&&jsxRuntimeExports.jsx("button",{onClick:()=>{g("/landing-page-builder"),window.innerWidth<1024&&dt(!1)},className:"flex flex-col items-center justify-center space-y-2 focus:outline-none",children:jsxRuntimeExports.jsxs("div",{className:`relative flex items-center justify-center w-12 h-12 rounded-xl border transition-all 
        ${et.pathname==="/landing-page-builder"?"bg-green/10 border-green text-green shadow-[0_0_12px_rgba(34,197,94,0.4)]":"bg-gray-800/50 border-gray-700 text-gray-300 hover:border-green hover:text-green"}`,children:[jsxRuntimeExports.jsx(Globe,{size:22}),jsxRuntimeExports.jsx("span",{className:"absolute -bottom-5 text-[10px] text-gray-400 whitespace-nowrap",children:"Builder"})]})})]})]}),jsxRuntimeExports.jsx("button",{onClick:ut,className:`relative flex items-center justify-center w-12 h-12 mx-auto mb-6 rounded-xl 
             bg-red-600/20 border border-red-600/40 text-red-500 hover:text-white hover:bg-red-600/40 
             hover:shadow-[0_0_12px_rgba(239,68,68,0.4)] transition-all`,title:"Logout",children:jsxRuntimeExports.jsx(LogOut,{size:20})})]})}),ct&&window.innerWidth<1024&&jsxRuntimeExports.jsx("div",{onClick:()=>dt(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 lg:hidden"}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(!ct),className:"lg:hidden fixed top-4 right-4 bg-gray-800/80 p-2 rounded-lg text-gray-200 hover:text-white z-50 transition",children:jsxRuntimeExports.jsx(Menu,{size:22})}),jsxRuntimeExports.jsx("main",{className:"flex-1 min-h-screen overflow-y-auto transition-all duration-300 lg:ml-[120px]",children:it})]})}async function startLeadMagnetEdit(it){var g,et,ot;try{return(await axiosInstance.post(`/edit/${it}/editor/start`)).data}catch(ut){throw console.error(" Error starting lead magnet edit:",((g=ut.response)==null?void 0:g.data)||ut.message),new Error(((ot=(et=ut.response)==null?void 0:et.data)==null?void 0:ot.error)||"Failed to start editor session.")}}async function commitLeadMagnetEdit(it,g,et){var ot,ut,ct;try{return(await axiosInstance.put(`/edit/${it}/editor/commit`,{token:g,updatedHtml:et})).data}catch(dt){throw console.error(" Error committing lead magnet edit:",((ot=dt.response)==null?void 0:ot.data)||dt.message),new Error(((ct=(ut=dt.response)==null?void 0:ut.data)==null?void 0:ct.error)||"Failed to save edited PDF.")}}var inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$3=Node3.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:it}){return["img",mergeAttributes(this.options.HTMLAttributes,it)]},parseMarkdown:(it,g)=>g.createNode("image",{src:it.href,title:it.title,alt:it.text}),renderMarkdown:it=>{var g,et,ot,ut,ct,dt;const ft=(et=(g=it.attrs)==null?void 0:g.src)!=null?et:"",St=(ut=(ot=it.attrs)==null?void 0:ot.alt)!=null?ut:"",kt=(dt=(ct=it.attrs)==null?void 0:ct.title)!=null?dt:"";return kt?`![${St}](${ft} "${kt}")`:`![${St}](${ft})`},addCommands(){return{setImage:it=>({commands:g})=>g.insertContent({type:this.name,attrs:it})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:it=>{const[,,g,et,ot]=it;return{src:et,alt:g,title:ot}}})]}}),index_default=Image$3;function isDarkColor(it){if(!it)return!1;const g=it.replace("#",""),et=parseInt(g.length===3?g[0]+g[0]:g.substring(0,2),16),ot=parseInt(g.length===3?g[1]+g[1]:g.substring(2,4),16),ut=parseInt(g.length===3?g[2]+g[2]:g.substring(4,6),16);return(.299*et+.587*ot+.114*ut)/255<.5}function EditorModal({leadMagnetId:it,open:g,onClose:et,onCommitted:ot}){var vr,xr,yr;const[ut,ct]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(null),[Tt,Rt]=reactExports.useState(""),[Ft,jt]=reactExports.useState(""),[Bt,zt]=reactExports.useState("#fff330"),Ht=reactExports.useRef(null),Ut=Sr=>{const kr=Sr.target.value;if(zt(kr),!Kt)return;Kt.chain().focus().updateAttributes("highlight",{color:kr}).run(),Kt.chain().focus().setHighlight({color:kr}).run()},Kt=useEditor({extensions:[index_default$7,index_default,index_default$3.configure({multicolor:!0})],content:"",editable:!0});reactExports.useEffect(()=>{!g||!it||(async()=>{const Sr=await startLeadMagnetEdit(it);ct(Sr.token),kt(Sr.meta),Rt(Sr.editableHtml||""),Kt==null||Kt.commands.setContent(Sr.editableHtml||"")})().catch(et)},[g,it,Kt]);async function Yt(){ft(!0);try{const Sr=(Kt==null?void 0:Kt.getHTML())||Tt,kr=await commitLeadMagnetEdit(it,ut,Sr);ot(kr.pdf_url),et()}finally{ft(!1)}}reactExports.useEffect(()=>{if(Tt){const Sr=new Blob([Tt],{type:"text/html"}),kr=URL.createObjectURL(Sr);return jt(kr),()=>URL.revokeObjectURL(kr)}},[Tt]),reactExports.useEffect(()=>{var kr,Pr,Or;const Sr=((kr=Ht.current)==null?void 0:kr.contentDocument)||((Or=(Pr=Ht.current)==null?void 0:Pr.contentWindow)==null?void 0:Or.document);Sr&&Sr.documentElement.style.setProperty("--hl",Bt||"#fff330")},[Bt,Ft]),reactExports.useEffect(()=>{var Dr,Cr,Lr,qr,sn;const Sr=((Dr=Ht.current)==null?void 0:Dr.contentDocument)||((Lr=(Cr=Ht.current)==null?void 0:Cr.contentWindow)==null?void 0:Lr.document);if(!Sr)return;const kr=((qr=St==null?void 0:St.bgTheme)==null?void 0:qr.toLowerCase())||"",Pr=(((sn=colorThemes[kr])==null?void 0:sn.background)||"#ffffff").trim(),Tr=["dark","royal","navy","graphite","purple","lavender"].includes(kr)||isDarkColor(Pr)?"#ffffff":"#000000";Sr.documentElement.style.setProperty("--text-color",Tr),Sr.documentElement.style.setProperty("--hl",Bt||"#fff330"),Sr.documentElement.style.setProperty("--hl-text","#000000");const mr=Sr.getElementById("color-fix");mr&&mr.remove();const Er=Sr.createElement("style");Er.id="color-fix",Er.innerHTML=`
    body, .page-inner, .page, .cover-page,
    h1, h2, h3, h4, h5, h6,
    p, div, span, strong, b, em, li {
      color: var(--text-color, ${Tr}) !important;
      -webkit-text-fill-color: var(--text-color, ${Tr}) !important;
    }
  `,Sr.head.appendChild(Er)},[St==null?void 0:St.bgTheme,Bt,Ft]),reactExports.useEffect(()=>{var Or;const Sr=Ht.current;if(!Sr||!(St!=null&&St.theme))return;const kr=fontThemes[(Or=St.theme)==null?void 0:Or.toLowerCase()];if(!kr)return;const Pr=async()=>{var Tr;const hr=Sr.contentDocument;if(!(!hr||!hr.body))try{const mr=(((Tr=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:Tr.background)||"#ffffff").trim(),Er=isDarkColor(mr);hr.documentElement.style.setProperty("--text-color",Er?"#ffffff":"#000000"),hr.documentElement.style.setProperty("--hl",Bt||"#fff330"),hr.documentElement.style.setProperty("--hl-text","#000000");const Cr=await(await fetch(kr.file)).arrayBuffer(),Lr=btoa(new Uint8Array(Cr).reduce((tn,ln)=>tn+String.fromCharCode(ln),"")),qr=hr.createElement("style");qr.id="custom-font-style",qr.innerHTML=`
        @font-face {
          font-family: '${kr.name}';
          src: url(data:font/ttf;base64,${Lr}) format('truetype');
        }
        html, body, .page, .page-inner, .formatted-content,
        p, h1, h2, h3, h4, h5, h6, div, span, li {
          font-family: '${kr.name}', sans-serif !important;
        }
      `,hr.head.appendChild(qr);const sn=hr.createElement("style");sn.id="responsive-width-fix",sn.innerHTML=`
  html, body {
    width: 100% !important;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  /* Let the main page adapt naturally */
  .page, .page-inner {
    width: 100% !important;
    max-width: 667px !important; /* keep backend alignment on desktop */
    margin: 0 auto !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    box-sizing: border-box !important;
  }

  .cover-page {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important;
  width: 100% !important;
  background: transparent !important;
}

.cover-page .cover-img {
  display: block !important;
  margin: 0 auto !important;
  max-width: 100% !important;
  height: auto !important;
  object-fit: contain !important;
  float: none !important;
}

.footer-link {
  margin-top: 60px !important;
  margin-bottom: 40px !important;
  text-align: center !important;
  padding-bottom: 40px !important;
}

.footer-link p {
  margin-bottom: 20px !important;
  font-size: 1.1rem !important;
  line-height: 1.5 !important;
  font-weight: 600 !important;
}

.footer-link .link-button {
  display: inline-block !important;
  padding: 12px 28px !important;
  border-radius: 30px !important;
  color: white !important;
  font-weight: 600 !important;
  text-decoration: none !important;
  border: 2px solid white !important;
  transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  box-shadow: 0 0 6px rgba(0, 0, 0, 0.25) !important;
}

.footer-link .link-button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

  /* Typography adjusts only if viewport is small */
  @media (max-width: 768px) {
    body {
      font-size: 90% !important; /* small font scaling only */
      line-height: 1.6 !important;
    }
    h1, h2, h3 {
      line-height: 1.3 !important;
      word-break: break-word !important;
    }
    img {
    display: block !important;
    margin: 0 auto !important;      /*  centers images horizontally */
    max-width: 100% !important;
    height: auto !important;
    float: none !important;         /*  removes any old float rules */
  }

  .cover-page {
    padding: 0 !important;
    margin-bottom: 1rem !important;
  }
  .cover-page .cover-img {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
  }
      .footer-link {
    margin-top: 40px !important;
    margin-bottom: 30px !important;
    padding-bottom: 2rem !important;
  }
  .footer-link .link-button {
    font-size: 1rem !important;
  }
    pre {
  background-color: #0f0f0f;
  color: #f5f5f5;
  padding: 1rem 1.25rem;
  border-radius: 10px;
  font-family: "Courier New", monospace;
  font-size: 0.9rem;
  line-height: 1.6;
  overflow-x: auto;
  margin: 0 0 1.5rem 0; /* remove top margin, only keep bottom spacing */
  white-space: pre-wrap;
  page-break-inside: avoid; /* keeps the block from splitting across PDF pages */
  box-decoration-break: clone;
}

pre + pre {
  margin-top: -0.25rem; /* closes any hairline gap between stacked blocks */
}

code {
  background-color: #1a1a1a;
  color: #00ff80;
  padding: 0.2rem 0.4rem;
  border-radius: 5px;
  font-family: "Courier New", monospace;
  font-size: 0.85rem;
}

/* Optional  better color contrast for multi-line snippets */
pre code {
  background: transparent; /* removes duplicate block background */
  color: #f5f5f5;
}
  }
`,hr.head.appendChild(sn);const an=hr.createElement("style");an.id="dark-preview-text",an.innerHTML=`
  /*  Only affect text, not the background */
  body, .page-inner, p, span, div, li, strong, b, h1, h2, h3, h4, h5, h6 {
  color: var(--text-color) !important;
  -webkit-text-fill-color: var(--text-color) !important;
}

  /* Keep background untouched (retain the original white page color) */
  .page, .cover-page {
    background-color: inherit !important;
  }

  /* Highlight and links remain readable */
  a {
    color: #4FC3F7 !important;
  }
  mark {
  background-color: var(--hl, #fff330) !important;
  color: var(--hl-text, #000000) !important;
  -webkit-text-fill-color: var(--hl-text, #000000) !important;
  border-radius: 2px;
  padding: 0 2px;
}
`,hr.head.appendChild(an),hr.documentElement.style.setProperty("--hl",typeof Bt=="string"&&Bt?Bt:"#fff330");try{}catch{}}catch(mr){console.error(" Font apply failed:",mr)}};return Sr.addEventListener("load",Pr),()=>Sr.removeEventListener("load",Pr)},[St==null?void 0:St.theme,Ft]),reactExports.useEffect(()=>{if(!Kt||!Ht.current)return;const Sr=Ht.current,kr=()=>{var hr;if(!(Sr.contentDocument||((hr=Sr.contentWindow)==null?void 0:hr.document)))return;const Or=()=>{var Tr;try{const mr=Sr.contentDocument||((Tr=Sr.contentWindow)==null?void 0:Tr.document);if(!mr)return;let Er=Kt.getHTML();Er=Er.replace(/<img[^>]+unsplash[^>]+>/gi,""),Er=Er.replace(/<img[^>]+base64[^>]+>/gi,"");const Dr=mr.querySelector(".page-inner");Dr?(Dr.innerHTML=Er,console.log(" Updated .page-inner content live (cleaned images)")):console.warn(" .page-inner not found in iframe")}catch(mr){console.error(" Failed to update iframe:",mr)}};return Kt.on("update",Or),console.log(" Live preview handler attached after iframe load"),()=>Kt.off("update",Or)};return Sr.addEventListener("load",kr),()=>{Sr.removeEventListener("load",kr)}},[Kt,Ft]);const[er,ar]=reactExports.useState(""),[ir,lr]=reactExports.useState("");function cr(){if(!Kt||!er)return;const Sr=Kt.getHTML(),kr=er.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Pr=new RegExp(kr,"gi"),Or=Sr.replace(Pr,ir);Kt.commands.setContent(Or),y$4.success(`Replaced all "${er}" with "${ir}"`)}return jsxRuntimeExports.jsxs(yt,{open:g,onClose:et,className:"fixed inset-0 z-50",children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:jsxRuntimeExports.jsxs(je,{className:"w-full max-w-[1650px] bg-[#0f0f10] rounded-2xl p-4 sm:p-6 shadow-2xl flex flex-col gap-4 sm:gap-6 overflow-y-auto max-h-[95vh]",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between border-b border-gray-800 pb-3 mb-4",children:jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"Live Editor"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-2 gap-4 w-full",children:[jsxRuntimeExports.jsx("div",{className:"w-full flex-1 bg-white text-black rounded-xl overflow-y-auto min-h-[50vh] lg:h-[70vh]",children:jsxRuntimeExports.jsx(EditorContent,{editor:Kt})}),jsxRuntimeExports.jsx("div",{className:"w-full flex-1 relative min-h-[50vh] lg:h-[70vh] rounded-xl overflow-hidden",children:jsxRuntimeExports.jsx("iframe",{ref:Ht,title:"preview",src:Ft,allowTransparency:!0,className:"w-full flex-1 border border-gray-800 rounded-xl overflow-hidden min-h-[50vh] lg:h-[70vh]",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-pointer-lock allow-popups-to-escape-sandbox allow-modals",style:{position:"relative",zIndex:0,width:"100%",borderRadius:"0.75rem",background:((vr=colorThemes[St==null?void 0:St.bgTheme])==null?void 0:vr.background)||"#fff",color:["dark","royal","navy","graphite","purple","lavender"].includes(((yr=(xr=St==null?void 0:St.bgTheme)==null?void 0:xr.toLowerCase)==null?void 0:yr.call(xr))||"")?"#ffffff":"#000000"}})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between border border-gray-800 rounded-lg p-3 bg-[#1b1b1b]",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Find...",value:er,onChange:Sr=>ar(Sr.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Replace with...",value:ir,onChange:Sr=>lr(Sr.target.value),className:"px-3 py-2 rounded-md bg-[#0f0f10] text-white border border-gray-700 w-40 sm:w-56"}),jsxRuntimeExports.jsx("button",{onClick:cr,disabled:!er,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50",children:"Replace All"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Highlight color:"}),jsxRuntimeExports.jsx("input",{type:"color",value:Bt,onInput:Ut,className:"w-9 h-9 rounded-lg cursor-pointer  shadow-inner shadow-black/40 bg-[#1a1a1a] hover:scale-105 transition-transform duration-150"}),jsxRuntimeExports.jsx("button",{onClick:()=>Kt.chain().focus().toggleHighlight({color:Bt}).run(),className:"px-5 py-2.5 rounded-lg bg-[#1e1e1e] text-white font-medium border border-gray-700 hover:border-emerald-400 hover:text-emerald-300 transition-all duration-200 shadow-sm",children:"Highlight"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2 w-full",children:[jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-gray-700 rounded-lg w-full sm:w-auto",onClick:et,children:"Cancel"}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-green rounded-lg disabled:opacity-50 text-black w-full sm:w-auto",disabled:dt,onClick:Yt,children:dt?"Reprinting...":"Commit Edit"})]})]})})]})}function MagnetGrid({magnets:it=[],onAddPrompt:g,onOpenEditor:et}){var Rt;const[ot,ut]=reactExports.useState(null),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),kt=Array.isArray(it)?it:(it==null?void 0:it.magnets)||[];if(!Array.isArray(kt)||kt.length===0)return null;function Tt(Ft){dt(!1),g(ft,Ft.contentType)}return jsxRuntimeExports.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:[kt.map(Ft=>{var jt,Bt,zt;return jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 blur-xl -z-10 transition-all",animate:{opacity:[.1,.3,.1]},transition:{duration:4,repeat:1/0}}),jsxRuntimeExports.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl flex items-center justify-center overflow-hidden border border-gray-700 relative",children:[Ft.cover_image?jsxRuntimeExports.jsx("img",{src:Ft.cover_image,alt:Ft.title||"Lead Magnet Cover",className:"object-cover w-full h-full rounded-xl transition-transform duration-300 group-hover:scale-105"}):Ft.pdf_url?jsxRuntimeExports.jsx("img",{src:`https://cre8tlystudio.com/api/preview/${Ft.id}`,alt:Ft.title,className:"object-cover w-full h-full rounded-xl opacity-80"}):jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-xs italic",children:"No Preview"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsxs("span",{children:["Slot #",Ft.slot_number]}),jsxRuntimeExports.jsx("span",{children:new Date(Ft.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold mt-2 truncate",children:Ft.title||"Digital Asset"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[Ft.theme?jsxRuntimeExports.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-[10px] font-semibold capitalize",style:{background:((jt=themeStyles[Ft.theme])==null?void 0:jt.background)||"#333",color:((Bt=themeStyles[Ft.theme])==null?void 0:Bt.color)||"#fff",border:((zt=themeStyles[Ft.theme])==null?void 0:zt.border)||"none"},children:Ft.theme}):jsxRuntimeExports.jsx("span",{className:"text-gray-500 italic text-[10px]",children:"N/A"}),Ft.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:16,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:16,className:"text-gray-500"})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-xs font-semibold text-center",children:Ft.status==="completed"?jsxRuntimeExports.jsx("span",{className:"bg-black text-green border border-green px-3 py-[3px] rounded-full",children:"Completed"}):Ft.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Ft.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"building..."]}):jsxRuntimeExports.jsx("span",{className:"bg-black text-purple border border-white px-4 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-[11px] text-gray-400 text-center",children:Ft.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Ft.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Ft.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Ft.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>{St(Ft.id),dt(!0)},className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create New Document",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Document"})]})}),Ft.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ut(Ft.pdf_url),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview PDF",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Ft.status==="completed"?"text-green":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:"View"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ft.edit_used||et(Ft.id)},disabled:Ft.edit_used,className:`w-full py-2 rounded-lg text-sm font-semibold flex items-center justify-center gap-2 transition-all ${Ft.edit_used?"bg-gray-600 text-gray-400 cursor-not-allowed opacity-60":"bg-gray-700 hover:bg-gray-600 text-white"}`,title:"Open Editor",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:`${Ft.edit_used?"text-gray-500":"text-white"} transition-colors`}),jsxRuntimeExports.jsx("span",{children:Ft.edit_used?"Closed":"Edit"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{if(!Ft.id||!Ft.pdf_url){alert("Missing lead magnet ID or PDF URL.");return}const Ht=`/canvas-editor?id=${Ft.id}&pdf=${encodeURIComponent(Ft.pdf_url)}`;window.open(Ht,"_blank")},className:"hidden md:flex w-full bg-hotPink text-white font-semibold rounded-lg py-2 text-sm items-center justify-center gap-2 transition-all",title:"Edit in Canvas Editor",children:[jsxRuntimeExports.jsx(Package,{size:16}),jsxRuntimeExports.jsx("span",{children:"Canvas Editor"})]})]})]})]},Ft.id)}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot,sourceType:"magnet",fileTitle:((Rt=kt.find(Ft=>Ft.pdf_url===ot))==null?void 0:Rt.title)||"Lead Magnet",onClose:()=>ut(null)}),ct&&jsxRuntimeExports.jsx(NewContentModal,{onCreate:Tt,onClose:()=>dt(!1)})]})}function CustomerDashboard(){const{user:it,accessToken:g,refreshUser:et}=useAuth(),{magnets:ot,setMagnets:ut,fetchMagnets:ct,loading:dt}=useMagnets(),[ft,St]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),[Rt,Ft]=reactExports.useState(null),[jt,Bt]=reactExports.useState(1),[zt,Ht]=reactExports.useState(!1),[Ut,Kt]=reactExports.useState(0),[Yt,er]=reactExports.useState("lead_magnet"),[ar,ir]=reactExports.useState(0);function lr(){vr(null),setTimeout(()=>ir(sn=>sn+1),100)}const[cr,vr]=reactExports.useState(null);function xr(sn){vr(sn)}const yr=(ot.magnets||[]).find(sn=>sn.id===cr),Sr=useLocation(),kr=useNavigate(),Pr=10;if(typeof window<"u"){const sn=new URLSearchParams(Sr.search);sn.get("session_id")&&(console.log(" Stripe checkout success:",sn.get("session_id")),ct(),window.history.replaceState({},document.title,"/dashboard"))}function Or(sn,an,tn){ut(ln=>{const yn=(ln.magnets||[]).map(pn=>pn.id===sn?{...pn,prompt:an,status:"pending",theme:tn}:pn);return{...ln,magnets:yn}}),setTimeout(ct,3e3)}function hr(){kr("/plans")}const mr=[...(ot==null?void 0:ot.magnets)||[]].sort((sn,an)=>(sn.slot_number||0)-(an.slot_number||0)),Er=Math.ceil(mr.length/Pr),Dr=(jt-1)*Pr,Cr=mr.slice(Dr,Dr+Pr);function Lr(sn,an="lead_magnet"){Ft(sn),er(an),Tt(!0)}async function qr(){try{await et(),await ct()}catch(sn){console.error("Failed to refresh user slots:",sn)}}return reactExports.useEffect(()=>{it!=null&&it.has_book&&!(it!=null&&it.has_magnet)&&kr("/books")},[it]),jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"magnet",items:ot.magnets||[],summary:ot.summary||{},onCheckout:hr}),dt?jsxRuntimeExports.jsx(LoadingState,{}):ot.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:hr,type:"magnet"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MagnetGrid,{magnets:Cr,onAddPrompt:Lr,onOpenEditor:xr}),jsxRuntimeExports.jsx(MagnetCardList,{magnets:Cr,onAddPrompt:Lr,onOpenEditor:xr}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:jt,totalPages:Er,onPageChange:Bt}),jsxRuntimeExports.jsx(SupportTab,{})]}),Rt&&jsxRuntimeExports.jsx(PromptModal,{isOpen:kt,onClose:()=>Tt(!1),magnetId:Rt,accessToken:g,contentType:Yt,setShowGenerating:Ht,setProgress:Kt,onSubmitted:Or}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:ft,onClose:()=>St(!1),onRefresh:qr,isFirstTime:ot.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:zt,progress:Ut,type:"lead"}),jsxRuntimeExports.jsx(EditorModal,{leadMagnetId:cr,open:!!cr,onClose:lr,onCommitted:sn=>ct(),bgTheme:(yr==null?void 0:yr.bg_theme)||"modern"},ar)]})})}function AdminDashboard(){const{accessToken:it}=useAuth(),[g,et]=reactExports.useState([]);return reactExports.useEffect(()=>{async function ot(){try{const ut=await axios$1.get("https://cre8tlystudio.com/api/lead-magnets/all",{headers:{Authorization:`Bearer ${it}`}});et(ut.data)}catch(ut){console.error("Error fetching all lead magnets:",ut)}}ot()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"All Lead Magnets"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:g.map(ot=>jsxRuntimeExports.jsxs("li",{className:"bg-charcoal p-4 rounded-lg text-white",children:[jsxRuntimeExports.jsxs("p",{children:["User: ",ot.user_id]}),jsxRuntimeExports.jsxs("p",{children:["Prompt: ",ot.prompt]}),jsxRuntimeExports.jsxs("p",{children:["Status: ",jsxRuntimeExports.jsx("span",{className:"text-green",children:ot.status})]})]},ot.id))})]})}function Contact(){const[it,g]=reactExports.useState({name:"",email:"",subject:"",message:""}),[et,ot]=reactExports.useState(!1),ut=dt=>{g({...it,[dt.target.name]:dt.target.value})},ct=async dt=>{dt.preventDefault(),ot(!0);try{await axios$1.post("https://cre8tlystudio.com/api/support/contact",it),y$4.success(" Message sent! We'll get back to you soon.",{position:"top-center"}),g({name:"",email:"",subject:"",message:""})}catch(ft){console.error(ft),y$4.error(" Something went wrong. Please try again later.",{position:"top-center"})}finally{ot(!1)}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"min-h-screen text-white flex items-center justify-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("div",{className:"max-w-2xl w-full bg-metalBlack p-8 rounded-2xl border border-gray-700 shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-center",children:jsxRuntimeExports.jsx(AnimatedLogo,{})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Contact Support"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Have questions or need help? Fill out the form below and our support team will respond within 2448 hours."}),jsxRuntimeExports.jsxs("form",{onSubmit:ct,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:it.name,onChange:ut,placeholder:"Your Name",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:it.email,onChange:ut,placeholder:"Email associated with your account",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"text",name:"subject",value:it.subject,onChange:ut,placeholder:"Subject (optional)",className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("textarea",{name:"message",value:it.message,onChange:ut,placeholder:"Write your message...",rows:6,required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white resize-none"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Message"})]})]})]}),jsxRuntimeExports.jsx(Footer,{})]})}function PlanDetailsModal({plan:it,onClose:g}){if(!it)return null;const et={basic:{title:"Basic Creator",content:`
The Basic Creator Plan gives you 5 Lead Magnet Slots to design professional, conversion-ready lead magnets using Cre8tlys AI tools. Access standard templates, custom branding, and editable layouts so you can attract new subscribers and showcase your expertise with ease.`},pro:{title:"Pro Covers",content:`
The Pro Covers Plan includes everything in Basic, plus unlimited custom cover uploads for both books and lead magnets. Personalize your visuals with full creative controlupload, test, and update covers that match your unique style and brand. Youll also gain access to thousands of royalty-free Unsplash images, making it easy to design stunning, professional-quality covers in seconds without worrying about licensing or costs.`},author:{title:"Authors Assistant",content:`
Transform your writing with intelligent support, not automation.
The Authors Assistant is your creative co-writer, an AI partner that helps you plan your story structure, build rich scenes, and craft powerful chapters without losing your authentic voice. Generate up to 750 pages with built-in editing tools that perfect your tone, pacing, and style. Plus, enjoy unlimited custom cover uploads to bring your book to life with a professional finish.`},bundle:{title:"All-In-One Bundle",content:`
The All-In-One Bundle gives you everything in a single discounted package:  
 5 Lead Magnet Slots to grow your audience  
 Pro Covers for both books and lead magnets  
 1 Authors Assistant Book Slot (750 pages + editor)  
A full creative suite that lets you write, design, and publish with complete control from start to finish.`},prompt_memory:{title:"Prompt Memory Subscription",content:`
The Prompt Memory Plan gives you a persistent AI memory across your entire Cre8tly Studio experience.
It learns your tone, writing style, and preferences, letting you generate faster, more accurate, and
on-brand results every time. Cancel anytime, no contracts.`}},{title:ot,content:ut}=et[it]||{};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl p-8 max-w-lg w-full text-white relative shadow-xl",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-3 right-3 text-gray-400 hover:text-white transition",children:jsxRuntimeExports.jsx(X$2,{size:22})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:ot}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 whitespace-pre-line leading-relaxed",children:ut}),jsxRuntimeExports.jsx("div",{className:"text-center mt-8",children:jsxRuntimeExports.jsx("button",{onClick:g,className:"px-6 py-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg font-semibold hover:opacity-90 transition",children:"Got it"})})]})})}function PlansPage(){const[it,g]=reactExports.useState(null),[et,ot]=reactExports.useState(null),{user:ut}=useAuth(),ct=async dt=>{if(!ut||!ut.id){y$4.error("Please sign in before selecting a plan");return}try{g(dt);const ft=localStorage.getItem("accessToken"),St=await axiosInstance.post("/checkout",{userId:ut.id,productType:dt},{headers:{Authorization:`Bearer ${ft}`}});window.location.href=St.data.url}catch(ft){console.error("Checkout error:",ft),y$4.error("Failed to start checkout session"),g(null)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center justify-center px-6 py-16",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold mb-12 tracking-tight text-center design-text",children:"Choose Your Plan"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-6xl",children:[jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-purple-600 via-blue-500 to-purple-600 shadow-[0_0_25px_rgba(147,51,234,0.4)] hover:shadow-[0_0_45px_rgba(147,51,234,0.7)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-white design-text",children:"Basic Creator"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"5 digital asset slots"})," and access to all standard templates. Turn ideas into irresistible lead magnets fast."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("basic"),className:"text-blue-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-white design-text",children:"$47"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("basic"),disabled:it==="basic",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="basic"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-royalPurple hover:bg-purple-800 hover:shadow-[0_0_25px_rgba(147,51,234,0.6)] text-white design-text"}`,children:it==="basic"?"Redirecting...":"Select Basic Plan"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-400 design-text",children:"Pro Covers"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Everything in Basic plus ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"unlimited custom and unsplash cover uploads"}),". Single purchase unlocks pro covers for lifetime."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("pro"),className:"text-green-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-green-400 design-text",children:"$150"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("pro"),disabled:it==="pro",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="pro"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black design-text"}`,children:it==="pro"?"Redirecting...":"Pro Covers"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-pink-500 via-rose-400 to-pink-500 shadow-[0_0_25px_rgba(255,105,180,0.3)] hover:shadow-[0_0_45px_rgba(255,105,180,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-pink-400 design-text",children:"Authors Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:"AI-powered co-writer that helps you structure, write, and edit up to 750 pages while keeping your unique voice."}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("author"),className:"text-pink-400 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-pink-400 design-text",children:"$850 "})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("author"),disabled:it==="author",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="author"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-pink-600 hover:bg-pink-700 hover:shadow-[0_0_25px_rgba(255,105,180,0.6)] text-white design-text"}`,children:it==="author"?"Redirecting...":"Authors Assistant"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-yellow-400 via-amber-300 to-yellow-400 shadow-[0_0_25px_rgba(255,215,0,0.3)] hover:shadow-[0_0_45px_rgba(255,215,0,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-yellow-300 design-text",children:"All-In-One Bundle"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Includes ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Basic, Pro Covers, and Authors Assistant"})," in one discounted package."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("bundle"),className:"text-yellow-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold mb-6 text-yellow-300 design-text",children:"$999"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("bundle"),disabled:it==="bundle",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="bundle"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-yellow hover:bg-yellow hover:shadow-[0_0_25px_rgba(255,215,0,0.6)] text-black font-bold design-text"}`,children:it==="bundle"?"Redirecting...":"Get the Bundle"})]})}),jsxRuntimeExports.jsx("div",{className:"relative p-[2px] rounded-3xl bg-gradient-to-r from-green-500 via-emerald-400 to-green-500 shadow-[0_0_25px_rgba(0,255,153,0.3)] hover:shadow-[0_0_45px_rgba(0,255,153,0.6)] transition-all duration-500",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-gray-900 to-gray-800 p-10 flex flex-col justify-between min-h-[460px] text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-semibold mb-3 text-green-300 design-text",children:"Prompt Memory"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 mb-4 text-sm leading-relaxed",children:["Unlock ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"AI Prompt Memory"})," your personalized creative memory that remembers your tone, style, and preferences across every generation. Stay consistent, save time, and build smarter prompts automatically."]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot("prompt_memory"),className:"text-green-300 text-sm hover:underline mb-3",children:"Learn More"}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold mb-6 text-green-300 design-text",children:["$14.99",jsxRuntimeExports.jsx("span",{className:"text-lg font-normal text-gray-400",children:" / month"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct("prompt_memory"),disabled:it==="prompt_memory",className:`mt-auto py-3 px-6 text-2xl font-semibold rounded-xl transition-all duration-300 shadow-lg ${it==="prompt_memory"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen hover:bg-green-700 hover:shadow-[0_0_25px_rgba(0,255,153,0.6)] text-black font-bold design-text"}`,children:it==="prompt_memory"?"Redirecting...":"Subscribe"})]})})]}),et&&jsxRuntimeExports.jsx(PlanDetailsModal,{plan:et,onClose:()=>ot(null)}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-10 text-center",children:" Secure Checkout"})]})}function t(it,g,et){return Math.max(it,Math.min(g,et))}class Animate{advance(g){var ft;if(!this.isRunning)return;let et=!1;if(this.lerp)this.value=(ot=this.value,ut=this.to,ct=60*this.lerp,dt=g,function(St,kt,Tt){return(1-Tt)*St+Tt*kt}(ot,ut,1-Math.exp(-ct*dt))),Math.round(this.value)===this.to&&(this.value=this.to,et=!0);else{this.currentTime+=g;const St=t(0,this.currentTime/this.duration,1);et=St>=1;const kt=et?1:this.easing(St);this.value=this.from+(this.to-this.from)*kt}var ot,ut,ct,dt;(ft=this.onUpdate)==null||ft.call(this,this.value,et),et&&this.stop()}stop(){this.isRunning=!1}fromTo(g,et,{lerp:ot=.1,duration:ut=1,easing:ct=St=>St,onStart:dt,onUpdate:ft}){this.from=this.value=g,this.to=et,this.lerp=ot,this.duration=ut,this.easing=ct,this.currentTime=0,this.isRunning=!0,dt==null||dt(),this.onUpdate=ft}}class Dimensions{constructor({wrapper:g,content:et,autoResize:ot=!0,debounce:ut=250}={}){Kn(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});Kn(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});Kn(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=g,this.content=et,ot&&(this.debouncedResize=function(ct,dt){let ft;return function(){let St=arguments,kt=this;clearTimeout(ft),ft=setTimeout(function(){ct.apply(kt,St)},dt)}}(this.resize,ut),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var g,et;(g=this.wrapperResizeObserver)==null||g.disconnect(),(et=this.contentResizeObserver)==null||et.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(g,...et){let ot=this.events[g]||[];for(let ut=0,ct=ot.length;ut<ct;ut++)ot[ut](...et)}on(g,et){var ot;return(ot=this.events[g])!=null&&ot.push(et)||(this.events[g]=[et]),()=>{var ut;this.events[g]=(ut=this.events[g])==null?void 0:ut.filter(ct=>et!==ct)}}off(g,et){var ot;this.events[g]=(ot=this.events[g])==null?void 0:ot.filter(ut=>et!==ut)}destroy(){this.events={}}}const e=100/6;class VirtualScroll{constructor(g,{wheelMultiplier:et=1,touchMultiplier:ot=1}){Kn(this,"onTouchStart",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:g})});Kn(this,"onTouchMove",g=>{const{clientX:et,clientY:ot}=g.targetTouches?g.targetTouches[0]:g,ut=-(et-this.touchStart.x)*this.touchMultiplier,ct=-(ot-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=et,this.touchStart.y=ot,this.lastDelta={x:ut,y:ct},this.emitter.emit("scroll",{deltaX:ut,deltaY:ct,event:g})});Kn(this,"onTouchEnd",g=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:g})});Kn(this,"onWheel",g=>{let{deltaX:et,deltaY:ot,deltaMode:ut}=g;et*=ut===1?e:ut===2?this.windowWidth:1,ot*=ut===1?e:ut===2?this.windowHeight:1,et*=this.wheelMultiplier,ot*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:et,deltaY:ot,event:g})});Kn(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=g,this.wheelMultiplier=et,this.touchMultiplier=ot,this.touchStart={x:null,y:null},this.emitter=new Emitter,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(g,et){return this.emitter.on(g,et)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Lenis{constructor({wrapper:g=window,content:et=document.documentElement,wheelEventsTarget:ot=g,eventsTarget:ut=ot,smoothWheel:ct=!0,syncTouch:dt=!1,syncTouchLerp:ft=.075,touchInertiaMultiplier:St=35,duration:kt,easing:Tt=Yt=>Math.min(1,1.001-Math.pow(2,-10*Yt)),lerp:Rt=!kt&&.1,infinite:Ft=!1,orientation:jt="vertical",gestureOrientation:Bt="vertical",touchMultiplier:zt=1,wheelMultiplier:Ht=1,autoResize:Ut=!0,__experimental__naiveDimensions:Kt=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:Yt,deltaY:er,event:ar})=>{if(ar.ctrlKey)return;const ir=ar.type.includes("touch"),lr=ar.type.includes("wheel");if(this.options.syncTouch&&ir&&ar.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const cr=Yt===0&&er===0,vr=this.options.gestureOrientation==="vertical"&&er===0||this.options.gestureOrientation==="horizontal"&&Yt===0;if(cr||vr)return;let xr=ar.composedPath();if(xr=xr.slice(0,xr.indexOf(this.rootElement)),xr.find(Pr=>{var Or,hr,Tr,mr,Er;return((Or=Pr.hasAttribute)===null||Or===void 0?void 0:Or.call(Pr,"data-lenis-prevent"))||ir&&((hr=Pr.hasAttribute)===null||hr===void 0?void 0:hr.call(Pr,"data-lenis-prevent-touch"))||lr&&((Tr=Pr.hasAttribute)===null||Tr===void 0?void 0:Tr.call(Pr,"data-lenis-prevent-wheel"))||((mr=Pr.classList)===null||mr===void 0?void 0:mr.contains("lenis"))&&!(!((Er=Pr.classList)===null||Er===void 0)&&Er.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked)return void ar.preventDefault();if(this.isSmooth=this.options.syncTouch&&ir||this.options.smoothWheel&&lr,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();ar.preventDefault();let yr=er;this.options.gestureOrientation==="both"?yr=Math.abs(er)>Math.abs(Yt)?er:Yt:this.options.gestureOrientation==="horizontal"&&(yr=Yt);const Sr=ir&&this.options.syncTouch,kr=ir&&ar.type==="touchend"&&Math.abs(yr)>5;kr&&(yr=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+yr,Object.assign({programmatic:!1},Sr?{lerp:kr?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const Yt=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-Yt),this.emit()}},window.lenisVersion="1.0.42",g!==document.documentElement&&g!==document.body||(g=window),this.options={wrapper:g,content:et,wheelEventsTarget:ot,eventsTarget:ut,smoothWheel:ct,syncTouch:dt,syncTouchLerp:ft,touchInertiaMultiplier:St,duration:kt,easing:Tt,lerp:Rt,infinite:Ft,gestureOrientation:Bt,orientation:jt,touchMultiplier:zt,wheelMultiplier:Ht,autoResize:Ut,__experimental__naiveDimensions:Kt},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:g,content:et,autoResize:Ut}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=dt||ct,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new VirtualScroll(ut,{touchMultiplier:zt,wheelMultiplier:Ht}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(g,et){return this.emitter.on(g,et)}off(g,et){return this.emitter.off(g,et)}setScroll(g){this.isHorizontal?this.rootElement.scrollLeft=g:this.rootElement.scrollTop=g}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(g){const et=g-(this.time||g);this.time=g,this.animate.advance(.001*et)}scrollTo(g,{offset:et=0,immediate:ot=!1,lock:ut=!1,duration:ct=this.options.duration,easing:dt=this.options.easing,lerp:ft=!ct&&this.options.lerp,onComplete:St,force:kt=!1,programmatic:Tt=!0}={}){if(!this.isStopped&&!this.isLocked||kt){if(["top","left","start"].includes(g))g=0;else if(["bottom","right","end"].includes(g))g=this.limit;else{let Rt;if(typeof g=="string"?Rt=document.querySelector(g):g!=null&&g.nodeType&&(Rt=g),Rt){if(this.options.wrapper!==window){const jt=this.options.wrapper.getBoundingClientRect();et-=this.isHorizontal?jt.left:jt.top}const Ft=Rt.getBoundingClientRect();g=(this.isHorizontal?Ft.left:Ft.top)+this.animatedScroll}}if(typeof g=="number"){if(g+=et,g=Math.round(g),this.options.infinite?Tt&&(this.targetScroll=this.animatedScroll=this.scroll):g=t(0,g,this.limit),ot)return this.animatedScroll=this.targetScroll=g,this.setScroll(this.scroll),this.reset(),void(St==null||St(this));if(!Tt){if(g===this.targetScroll)return;this.targetScroll=g}this.animate.fromTo(this.animatedScroll,g,{duration:ct,easing:dt,lerp:ft,onStart:()=>{ut&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(Rt,Ft)=>{this.isScrolling=!0,this.velocity=Rt-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=Rt,this.setScroll(this.scroll),Tt&&(this.targetScroll=Rt),Ft||this.emit(),Ft&&(this.reset(),this.emit(),St==null||St(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(g=this.animatedScroll,et=this.limit,(g%et+et)%et):this.animatedScroll;var g,et}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(g){this.__isSmooth!==g&&(this.__isSmooth=g,this.toggleClassName("lenis-smooth",g))}get isScrolling(){return this.__isScrolling}set isScrolling(g){this.__isScrolling!==g&&(this.__isScrolling=g,this.toggleClassName("lenis-scrolling",g))}get isStopped(){return this.__isStopped}set isStopped(g){this.__isStopped!==g&&(this.__isStopped=g,this.toggleClassName("lenis-stopped",g))}get isLocked(){return this.__isLocked}set isLocked(g){this.__isLocked!==g&&(this.__isLocked=g,this.toggleClassName("lenis-locked",g))}get className(){let g="lenis";return this.isStopped&&(g+=" lenis-stopped"),this.isLocked&&(g+=" lenis-locked"),this.isScrolling&&(g+=" lenis-scrolling"),this.isSmooth&&(g+=" lenis-smooth"),g}toggleClassName(g,et){this.rootElement.classList.toggle(g,et),this.emitter.emit("className change",this)}}const App=()=>{const it=useLocation();return reactExports.useEffect(()=>{const g=new Lenis({duration:1.4,easing:ot=>1-Math.pow(1-ot,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function et(ot){g.raf(ot),requestAnimationFrame(et)}return requestAnimationFrame(et),g.on("scroll",({scroll:ot,limit:ut,velocity:ct,direction:dt,progress:ft})=>{}),()=>g.destroy()},[]),reactExports.useEffect(()=>{if(it.hash){const g=document.querySelector(it.hash);g&&setTimeout(()=>{g.scrollIntoView({behavior:"smooth",block:"start"})},200)}},[it]),jsxRuntimeExports.jsxs("main",{className:"relative min-h-screen bg-transparent",children:[jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx("section",{id:"landing",className:"padding",children:jsxRuntimeExports.jsx(Landing,{})}),jsxRuntimeExports.jsx(Footer,{})]})},ReactToastify="",index="";function ForgotPassword(){const[it,g]=reactExports.useState(""),[et,ot]=reactExports.useState(!1),ut=useNavigate(),ct=async dt=>{var ft,St;if(dt.preventDefault(),!it)return y$4.error("Please enter your email address.");ot(!0);try{console.log("sending email:",it);const kt=await axiosInstance.post("/auth/forgot-password",{email:it});y$4.success(kt.data.message),g(""),setTimeout(()=>ut("/login"),2500)}catch(kt){console.error("Forgot password error:",kt),y$4.error(((St=(ft=kt.response)==null?void 0:ft.data)==null?void 0:St.message)||"Error sending reset email.")}finally{ot(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Forgot Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your email below and well send you a link to reset your password."}),jsxRuntimeExports.jsxs("form",{onSubmit:ct,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"email",value:it,onChange:dt=>g(dt.target.value),placeholder:"Email Address",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:et,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:et?"Sending...":"Send Reset Link"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 text-center mt-6",children:["Remember your password?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})]})]})}),jsxRuntimeExports.jsx(Footer,{})]})}function ResetPassword(){const[it]=useSearchParams(),[g,et]=reactExports.useState(""),[ot,ut]=reactExports.useState(""),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(!1),kt=useNavigate(),Tt=it.get("token");reactExports.useEffect(()=>{Tt||(y$4.error("Invalid or missing reset token."),kt("/login"))},[Tt,kt]);const Rt=async Ft=>{var jt,Bt;if(Ft.preventDefault(),!g||!ot)return y$4.error("Please enter and confirm your new password.");if(g!==ot)return y$4.error("Passwords do not match.");dt(!0);try{const zt=await axiosInstance.post("/auth/reset-password",{token:Tt,newPassword:g});y$4.success(zt.data.message||"Password reset successful!"),St(!0),setTimeout(()=>kt("/login"),3500)}catch(zt){console.error("Reset password error:",zt),y$4.error(((Bt=(jt=zt.response)==null?void 0:jt.data)==null?void 0:Bt.message)||"Error resetting password.")}finally{dt(!1)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#030712",isolation:"isolate",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow text-white px-6 py-20",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:ft?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green mb-6",children:"Password Reset Successful"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6",children:"Your password has been updated successfully. You can now log in with your new password."}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>kt("/login"),className:"bg-green text-black font-semibold px-6 py-3 rounded-lg hover:opacity-90 transition-all",children:"Go to Login"})})]},"success"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.4},className:"w-full max-w-md bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-green text-center mb-6",children:"Reset Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-center mb-8",children:"Enter your new password below to reset your account."}),jsxRuntimeExports.jsxs("form",{onSubmit:Rt,className:"space-y-5",children:[jsxRuntimeExports.jsx("input",{type:"password",value:g,onChange:Ft=>et(Ft.target.value),placeholder:"New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("input",{type:"password",value:ot,onChange:Ft=>ut(Ft.target.value),placeholder:"Confirm New Password",required:!0,className:"w-full px-4 py-3 rounded-lg bg-gray-800 border border-gray-700 focus:outline-none focus:border-green text-white"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ct,className:"w-full bg-green text-black font-semibold py-3 rounded-lg hover:opacity-90 transition-all",children:ct?"Resetting...":"Reset Password"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center mt-6",children:jsxRuntimeExports.jsx("a",{href:"/login",className:"text-green hover:underline",children:"Back to Login"})})]},"form")})}),jsxRuntimeExports.jsx(Footer,{})]})}function EbookModal({ebook:it,onClose:g,onBuy:et,loadingBook:ot}){return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl max-w-2xl w-full shadow-xl p-8 relative",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-gray-400 hover:text-white text-xl",children:""}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("img",{src:it.image_url,alt:it.title,className:"w-56 h-auto object-contain rounded-lg border border-gray-700"})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-left",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl font-bold text-white mb-3",children:[it.title," (guide)"]}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 text-sm leading-relaxed space-y-3 overflow-y-auto max-h-[300px] pr-2 mb-5 py-4",dangerouslySetInnerHTML:{__html:it.description}}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold text-white mb-5",children:["$",it.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>et(it),disabled:ot===it.product_type,className:`py-3 px-8 rounded-xl text-lg font-semibold shadow-lg ${ot===it.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-headerGreen text-black hover:bg-green-400 transition"}`,children:ot===it.product_type?"Redirecting...":"Buy Now"})]})]})})}function EbooksStore(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ut,ct]=reactExports.useState(null),[dt,ft]=reactExports.useState(!0),{user:St}=useAuth();reactExports.useEffect(()=>{(async()=>{try{const Rt=await axiosInstance.get("/ebooks");g(Rt.data)}catch(Rt){console.error("Failed to fetch ebooks:",Rt),y$4.error("Failed to load ebooks")}finally{ft(!1)}})()},[]),reactExports.useEffect(()=>{const Tt=new Lenis({duration:1.4,easing:Ft=>1-Math.pow(1-Ft,3),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!0,touchMultiplier:1.5,wheelMultiplier:1,infinite:!1});function Rt(Ft){Tt.raf(Ft),requestAnimationFrame(Rt)}return requestAnimationFrame(Rt),Tt.on("scroll",({scroll:Ft,limit:jt,velocity:Bt,direction:zt,progress:Ht})=>{}),()=>Tt.destroy()},[]);const kt=async Tt=>{var Rt;try{ot(Tt.product_type);const Ft=localStorage.getItem("accessToken"),jt=await axiosInstance.post("/ebooks/checkout",{userId:(St==null?void 0:St.id)||null,title:Tt.title,description:Tt.description,price:Tt.price,productType:Tt.product_type},Ft?{headers:{Authorization:`Bearer ${Ft}`}}:{});window.location.href=jt.data.url}catch(Ft){console.error("Checkout error:",((Rt=Ft.response)==null?void 0:Rt.data)||Ft.message),y$4.error("Failed to start checkout session"),ot(null)}};return dt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"Loading ebooks..."}):it.length===0?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-400",children:"No ebooks available yet."}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white flex flex-col items-center px-6 py-20",children:[jsxRuntimeExports.jsx(CustomCursor,{}),jsxRuntimeExports.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-extrabold mb-12 tracking-tight text-center lead-text",children:["Shop Our ",jsxRuntimeExports.jsx("span",{className:"text-green design-text",children:"Premium Guides"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center max-w-2xl mb-16 leading-relaxed",children:"Professionally written, conversion-focused guides generated by our software Cre8tly Studio. Instantly downloadable after purchase, no subscriptions, just pure value."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-7xl",children:it.map(Tt=>jsxRuntimeExports.jsx("div",{className:`relative rounded-3xl p-[2px] bg-gradient-to-r from-[#9ca3af] via-[#f3f4f6] to-[#9ca3af]
        shadow-[0_0_25px_rgba(255,255,255,0.15)] hover:shadow-[0_0_45px_rgba(255,255,255,0.35)]
        transition-all duration-300`,children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-gradient-to-b from-[#1a1a1a] via-[#111111] to-[#0b0b0b] p-8 flex flex-col text-center shadow-[inset_0_0_20px_rgba(255,255,255,0.05)] min-h-[550px] relative overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.05)_0%,rgba(255,255,255,0.15)_40%,rgba(255,255,255,0)_60%)] opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 relative",children:jsxRuntimeExports.jsx("img",{src:Tt.image_url,alt:Tt.title,className:"rounded-lg w-48 h-auto object-contain border border-gray-700 shadow-[0_4px_20px_rgba(0,0,0,0.4)]"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-3 text-white min-h-[64px] flex items-center justify-center",children:Tt.title}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 mb-5 text-sm leading-relaxed line-clamp-3 text-left",dangerouslySetInnerHTML:{__html:Tt.description}}),jsxRuntimeExports.jsx("button",{onClick:()=>ct(Tt),className:"text-gray-400 text-sm hover:text-white hover:underline mb-4 transition-colors",children:"Read More"}),jsxRuntimeExports.jsxs("div",{className:"mt-auto",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-extrabold mb-5 text-white tracking-wide drop-shadow-[0_0_5px_rgba(255,255,255,0.2)]",children:["$",Tt.price]}),jsxRuntimeExports.jsx("button",{onClick:()=>kt(Tt),disabled:et===Tt.product_type,className:`w-full py-3 px-6 text-lg font-semibold rounded-xl transition-all duration-300 
                ${et===Tt.product_type?"opacity-50 cursor-not-allowed bg-gray-700":"bg-gradient-to-r from-[#d1d5db] to-[#9ca3af] text-black hover:from-white hover:to-gray-300 hover:shadow-[0_0_35px_rgba(255,255,255,0.5)]"}`,children:et===Tt.product_type?"Redirecting...":"Purchase Guide"})]})]})},Tt.id))}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-12 text-center",children:" Secure Checkout"}),ut&&jsxRuntimeExports.jsx(EbookModal,{ebook:ut,onClose:()=>ct(null),onBuy:kt,loadingBook:et})]})}const BookContext=reactExports.createContext();function BookProvider({children:it}){const{accessToken:g}=useAuth(),[et,ot]=reactExports.useState([]),[ut,ct]=reactExports.useState(!0),[dt,ft]=reactExports.useState(null),St=async()=>{if(g)try{const kt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(kt.data)}catch(kt){console.error("Error fetching books:",kt),ft(kt)}finally{ct(!1)}};return reactExports.useEffect(()=>{if(!g)return;St();const kt=setInterval(async()=>{try{const Tt=await axios$1.get("https://cre8tlystudio.com/api/books",{headers:{Authorization:`Bearer ${g}`}});ot(Rt=>JSON.stringify(Rt)===JSON.stringify(Tt.data)?Rt:Tt.data)}catch(Tt){console.warn("Polling error:",Tt.message)}},5e3);return()=>clearInterval(kt)},[g]),jsxRuntimeExports.jsx(BookContext.Provider,{value:{books:et,setBooks:ot,fetchBooks:St,loading:ut,error:dt},children:it})}function useBooks(){return reactExports.useContext(BookContext)}function BookPromptModal({isOpen:it,onClose:g,bookId:et,partNumber:ot=1,accessToken:ut,onSubmitted:ct,setShowGenerating:dt,setProgress:ft,initialBookData:St}){const[kt,Tt]=reactExports.useState(""),[Rt,Ft]=reactExports.useState(10),[jt,Bt]=reactExports.useState(""),[zt,Ht]=reactExports.useState(null),[Ut,Kt]=reactExports.useState(""),[Yt,er]=reactExports.useState(!1),[ar,ir]=reactExports.useState(!1),[lr,cr]=reactExports.useState(!1),[vr,xr]=reactExports.useState((St==null?void 0:St.title)||""),[yr,Sr]=reactExports.useState((St==null?void 0:St.authorName)||""),[kr,Pr]=reactExports.useState((St==null?void 0:St.bookType)||"fiction"),[Or,hr]=reactExports.useState("Classic AdobeArabic"),[Tr,mr]=reactExports.useState("/fonts/AdobeArabic-Regular.ttf");reactExports.useEffect(()=>{St&&(console.log(" Syncing initialBookData to state:",St),xr(St.title||""),Sr(St.authorName||""),Pr(St.bookType||"fiction"))},[St]),reactExports.useEffect(()=>{it||(Tt(""),Ft(10),Bt(""),Ht(null),Kt(""),Sr(""),ft(0))},[it]),reactExports.useEffect(()=>{async function Dr(){var Cr;if(et)try{const qr=(await axios$1.get(`https://cre8tlystudio.com/books/draft/${et}`)).data;qr!=null&&qr.draft_text?(Tt(qr.draft_text),qr.title&&xr(qr.title),qr.link&&Bt(qr.link),qr.author_name&&Sr(qr.author_name),qr.book_type&&Pr(qr.book_type),y$4.info(`Loaded last draft from ${new Date(qr.last_saved_at).toLocaleString()}`)):console.log("No draft found for this book.")}catch(Lr){((Cr=Lr.response)==null?void 0:Cr.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",Lr),y$4.error("Failed to fetch saved draft."))}}Dr()},[et]),reactExports.useEffect(()=>{async function Dr(){var Cr;if(et)try{const Lr=ot>1?`https://cre8tlystudio.com/api/books/${et}/part/${ot}/draft`:`https://cre8tlystudio.com/api/books/draft/${et}`,sn=(await axios$1.get(Lr,{headers:{Authorization:`Bearer ${ut}`}})).data;sn!=null&&sn.draft_text?(Tt(sn.draft_text),sn.title&&Kt(sn.title),sn.link&&Bt(sn.link),sn.author_name&&Sr(sn.author_name),sn.book_type&&Pr(sn.book_type),y$4.info(`Loaded last draft from ${new Date(sn.last_saved_at||sn.updated_at||Date.now()).toLocaleString()}`)):console.log("No draft found for this book or part.")}catch(Lr){((Cr=Lr.response)==null?void 0:Cr.status)===404?console.log("No saved draft yet."):(console.error("Failed to fetch draft:",Lr),y$4.error("Failed to fetch saved draft."))}}Dr()},[et,ot]);async function Er(Dr){var Lr,qr;if(Dr.preventDefault(),!kt.trim()){y$4.error("Please enter your book idea or prompt first.");return}g(),er(!0),ft(0),dt(!0);let Cr;try{Cr=setInterval(()=>{ft(an=>an<90?an+Math.random()*4:an)},400);const sn=await axios$1.post("https://cre8tlystudio.com/api/books/prompt",{bookId:et,prompt:kt,pages:Rt,link:jt,coverImage:zt,title:Ut,authorName:yr,bookName:vr,partNumber:ot,bookType:kr},{headers:{Authorization:`Bearer ${ut}`},timeout:0,maxBodyLength:1/0,maxContentLength:1/0});clearInterval(Cr),ft(100),y$4.success(" Book section generated successfully!"),dt(!1),await new Promise(an=>setTimeout(an,1e3)),window.dispatchEvent(new Event("refreshBooks")),typeof ct=="function"&&setTimeout(()=>ct(et,kt),1e3)}catch(sn){if(clearInterval(Cr),ft(0),dt(!1),sn.code==="ECONNABORTED"){y$4.info(" Your book is still generating  please wait");return}y$4.error(((qr=(Lr=sn.response)==null?void 0:Lr.data)==null?void 0:qr.message)||"Book generation failed. Try again."),console.error(" Book generation error:",sn)}finally{er(!1)}}return it?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-[#0b0b0b] text-white flex flex-col overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center px-6 py-5 border-b border-gray-700 bg-[#111]",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold text-white text-center",children:[" Build Your Novel  Part ",ot]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"absolute left-6 md:left-36 text-silver hover:text-white transition text-lg",children:" Back"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-8 max-w-5xl mx-auto w-full",children:jsxRuntimeExports.jsx(BookPromptForm,{text:kt,setText:Tt,pages:Rt,setPages:Ft,link:jt,setLink:Bt,cover:zt,setCover:Ht,title:Ut,setTitle:Kt,authorName:yr,setAuthorName:Sr,bookName:vr,setBookName:xr,bookType:kr,setBookType:Pr,onSubmit:Er,loading:Yt,showPreview:ar,setShowPreview:ir,setShowGenerating:dt,bookId:et,setBookId:()=>{},partLocked:lr,partNumber:ot,onClose:g,setProgress:ft,fontName:Or,setFontName:hr,fontFile:Tr,setFontFile:mr})})]}):null}function BookPartsModal({bookId:it,accessToken:g,onClose:et}){const[ot,ut]=reactExports.useState([]),[ct,dt]=reactExports.useState(!0),[ft,St]=reactExports.useState(null);return reactExports.useEffect(()=>{async function kt(){try{const Rt=await(await fetch(`https://cre8tlystudio.com/api/books/${it}/parts`,{headers:{Authorization:`Bearer ${g}`}})).json();ut(Rt)}catch(Tt){console.error(" Failed to load book parts:",Tt)}finally{dt(!1)}}kt()},[it,g]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-2xl p-6 relative",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:" Book Parts"}),ct?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"Loading parts..."}):ot.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"No parts found yet."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:ot.map(kt=>jsxRuntimeExports.jsxs("li",{className:"flex justify-between items-center border-b border-gray-700 pb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold",children:["Part ",kt.part_number,": ",kt.title||"Untitled"]}),jsxRuntimeExports.jsxs("p",{className:"text-white",children:["Total pages: ",kt.pages]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:new Date(kt.created_at).toLocaleString()})]}),jsxRuntimeExports.jsx("button",{onClick:()=>St({url:kt.file_url,title:kt.title,partNumber:kt.part_number}),className:"px-3 py-1 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] rounded text-sm text-black font-semibold hover:opacity-90 transition",children:"Open PDF"})]},kt.id))}),jsxRuntimeExports.jsx("button",{onClick:et,className:"absolute top-3 right-3 text-white text-xl hover:text-red-400 transition",children:""})]})}),ft&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ft.url,fileTitle:ft.title,partNumber:ft.partNumber,sourceType:"book",onClose:()=>St(null)})]})}function BookCardList({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ut]=reactExports.useState(null),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),{accessToken:kt}=useAuth();function Tt(Rt){St(Rt),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[it.map(Rt=>jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:"bg-[#0a0a0a]/90 rounded-xl border border-gray-800 p-4 shadow hover:shadow-[0_0_10px_rgba(0,255,150,0.15)] transition-all",children:[jsxRuntimeExports.jsx("h3",{className:"text-white text-sm font-semibold truncate mb-1",children:Rt.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"text-[11px] text-gray-400 flex justify-between mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Rt.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Rt.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Rt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Rt.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Rt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Rt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Rt.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Rt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Rt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Rt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Rt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Rt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-3 w-full",children:[!Rt.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Rt.id,Rt.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsx("button",{onClick:()=>ut({url:Rt.pdf_url,title:Rt.book_name||"Untitled",partNumber:Rt.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Rt.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Rt.pages>=750?"Download Book":"Preview"})]})}),Rt.pdf_url&&jsxRuntimeExports.jsxs("button",{onClick:()=>Tt(Rt.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]}),Rt.prompt&&Rt.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Rt.id,(Rt.part_number||1)+1),className:"w-full bg-gradient-to-r from-green to-royalPurple text-black rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Rt.pages>=740?"Finish Book":`Continue (Part ${(Rt.part_number||1)+1})`})]})]})]},Rt.id)),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ut(null)}),ct&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:kt,onClose:()=>dt(!1)})]})}function NewBookModal({onCreate:it,onClose:g}){const[et,ot]=reactExports.useState(""),[ut,ct]=reactExports.useState(""),[dt,ft]=reactExports.useState(""),[St,kt]=reactExports.useState(!1);async function Tt(){if(!et||!ut||!dt){alert("Please fill in all fields, including book type.");return}it({title:et,authorName:ut,bookType:dt})}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] p-6 rounded-xl w-[90%] max-w-md border border-gray-700 text-white space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center",children:"Set Up Your Book"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Book Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Burning City",value:et,onChange:Rt=>ot(Rt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Dean Koontz",value:ut,onChange:Rt=>ct(Rt.target.value),className:"w-full p-2 rounded bg-gray-800"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-2",children:"Select Book Type"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:["Fiction","Non-Fiction","Educational"].map(Rt=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:Rt.toLowerCase(),checked:dt===Rt.toLowerCase(),onChange:Ft=>ft(Ft.target.value),className:"accent-royalPurple"}),jsxRuntimeExports.jsx("span",{className:"capitalize",children:Rt})]},Rt))})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-3",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"text-gray-400 hover:text-white transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Tt,disabled:St,className:"bg-royalPurple px-4 py-2 rounded text-white font-semibold hover:opacity-90 transition",children:St?"Saving...":"Continue"})]})]})})}function OnboardingGuide({steps:it=[],onFinish:g}){const[et,ot]=reactExports.useState(0),[ut,ct]=reactExports.useState(null);reactExports.useEffect(()=>{if(it.length>0&&it[et]){const kt=document.querySelector(it[et].target);if(kt){const Tt=kt.getBoundingClientRect();ct(Tt)}}},[et,it]);function dt(){et<it.length-1?ot(et+1):g==null||g()}function ft(){et>0&&ot(et-1)}if(!it.length||!ut)return null;const St=it[et];return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 bg-black/70 z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute border-4 border-emerald-400 rounded-xl shadow-[0_0_25px_5px_rgba(16,185,129,0.6)] pointer-events-none",style:{top:ut.top-8,left:ut.left-8,width:ut.width+16,height:ut.height+16},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute bg-[#111827] text-white rounded-xl shadow-lg border border-emerald-500/30 p-4 w-72",style:{top:ut.bottom+12,left:ut.left},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-4 leading-relaxed",children:St.content}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("button",{onClick:ft,disabled:et===0,className:`px-3 py-1 rounded-lg border border-gray-600 hover:bg-gray-800 transition ${et===0&&"opacity-50 cursor-not-allowed"}`,children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition",children:et===it.length-1?"Finish":"Next"})]})]})]},"overlay")})}function BookGrid({books:it=[],onAddPrompt:g,onGenerateNext:et}){const[ot,ut]=reactExports.useState(null),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),{accessToken:Rt,user:Ft,refreshUser:jt}=useAuth(),Bt=[{target:".book-title",content:"This displays the title of your book project."},{target:".pages-progress",content:"Displays how many pages youve used so far. Each book slot includes up to 750 total pages."},{target:".book-status",content:"Indicates your books current status."},{target:".book-actions",content:"Use these buttons to add chapters, preview, or continue your book."}];reactExports.useEffect(()=>{if(it.length>0&&Ft&&!Ft.has_completed_book_onboarding){const Ht=setTimeout(()=>Tt(!0),800);return()=>clearTimeout(Ht)}},[it,Ft]);function zt(Ht){St(Ht),dt(!0)}return!Array.isArray(it)||it.length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:it.map(Ht=>jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:"relative group bg-[#0a0a0a]/90 rounded-2xl p-4 border border-gray-800 hover:border-green hover:shadow-[0_0_15px_rgba(0,255,150,0.25)] transition-all",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx("h3",{className:"book-title text-white text-sm font-semibold truncate mb-2",children:Ht.book_name||"Untitled Book"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-400 mb-2",children:[jsxRuntimeExports.jsxs("span",{children:["Part ",Ht.part_number||1]}),jsxRuntimeExports.jsx("span",{children:new Date(Ht.created_at).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})})]}),jsxRuntimeExports.jsxs("div",{className:"pages-progress flex flex-col items-center my-3",children:[jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-800 rounded-full overflow-hidden h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Ht.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Ht.pages||0,"/750 pages"]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Ht.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Ht.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Ht.pages>=750?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Completed"}):Ht.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Ht.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-gray-500"})}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-gray-400 text-center mt-2",children:Ht.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(Ht.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Ht.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsxs("div",{className:"book-actions flex flex-col items-stretch gap-2 mt-4 w-full",children:[!Ht.prompt&&jsxRuntimeExports.jsx("button",{onClick:()=>g(Ht.id,Ht.part_number),className:"w-full bg-green text-black rounded-lg py-2 text-sm font-semibold hover:bg-green transition-all",title:"Create Chapter",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]})}),Ht.has_part_1===0&&(Ht.is_draft===1||Ht.draft_text)&&jsxRuntimeExports.jsxs("button",{onClick:()=>g(Ht.id,Ht.part_number||1),className:"w-full bg-blue hover:bg-blue text-white rounded-lg py-2 text-sm font-semibold flex items-center justify-center gap-2 transition-all",title:"Continue Draft",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),Ht.pdf_url&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ut({url:Ht.pdf_url,title:Ht.book_name||"Untitled",partNumber:Ht.part_number||1}),className:"w-full bg-gray-800 hover:bg-gray-700 text-white rounded-lg py-2 text-sm transition-all",title:"Preview Book",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:`${Ht.pages>=750?"text-green":"text-white"}`}),jsxRuntimeExports.jsx("span",{children:Ht.pages>=750?"Download Book":"Preview"})]})}),jsxRuntimeExports.jsxs("button",{onClick:()=>zt(Ht.id),className:"w-full bg-gray-700 hover:bg-gray-600 text-white rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition",title:"View All Parts",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]})]}),Ht.prompt&&Ht.pages<750&&jsxRuntimeExports.jsxs("button",{onClick:()=>et(Ht.id,(Ht.part_number||1)+1),className:"w-full bg-royalPurple text-white rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",title:"Continue Story",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Ht.pages>=740?"Finish Book":`Continue Story (Part ${(Ht.part_number||1)+1})`})]})]})]},Ht.id))}),ot&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:ot.url,fileTitle:ot.title,partNumber:ot.partNumber,sourceType:"book",onClose:()=>ut(null)}),ct&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:ft,accessToken:Rt,onClose:()=>dt(!1)}),kt&&jsxRuntimeExports.jsx(OnboardingGuide,{steps:Bt,onFinish:async()=>{try{localStorage.setItem("bookOnboardingComplete","true"),Tt(!1),await axiosInstance.post("https://cre8tlystudio.com/api/books/book-complete",{userId:Ft==null?void 0:Ft.id},{headers:{Authorization:`Bearer ${Rt}`}}),await jt()}catch(Ht){console.error(" Failed to save onboarding status:",Ht)}}})]})}function BooksDashboard(){const{accessToken:it}=useAuth(),{books:g,setBooks:et,fetchBooks:ot,loading:ut}=useBooks(),[ct,dt]=reactExports.useState(!1),[ft,St]=reactExports.useState(null),[kt,Tt]=reactExports.useState(!1),[Rt,Ft]=reactExports.useState(0),[jt,Bt]=reactExports.useState(!1),[zt,Ht]=reactExports.useState(1),[Ut,Kt]=reactExports.useState(!1),[Yt,er]=reactExports.useState(null),ar=useNavigate(),ir=10,lr=[...g].sort((Or,hr)=>new Date(hr.created_at)-new Date(Or.created_at)),cr=Math.ceil(lr.length/ir),vr=(zt-1)*ir,xr=lr.slice(vr,vr+ir);async function yr(Or,hr=1){let Tr=g.find(Dr=>Dr.id===Or);try{const Dr=await axios$1.get(`https://cre8tlystudio.com/api/books/${Or}`,{headers:{Authorization:`Bearer ${it}`},withCredentials:!0});Dr.data&&(console.log(" Fresh data from backend:",Dr.data),Tr={...Tr,...Dr.data})}catch(Dr){console.error(" Failed to fetch book by ID:",Dr),toast.error("Could not refresh book info  using cached version")}if(!Tr)return;const mr=!Tr.author_name||Tr.author_name.trim()==="",Er=!Tr.title||Tr.title.trim()===""||Tr.title==="Untitled"||Tr.title==="Untitled Book";if(mr||Er){St({id:Or,part_number:hr}),Kt(!0);return}St({id:Tr.id,part_number:hr,title:Tr.title||Tr.book_name||"",author_name:Tr.author_name||"",book_type:Tr.bookType||Tr.book_type||"fiction"}),dt(!0)}function Sr(Or,hr){et(Tr=>Tr.map(mr=>mr.id===Or?{...mr,prompt:hr,status:"pending"}:mr)),setTimeout(ot,3e3)}function kr({title:Or,authorName:hr,bookType:Tr}){er({title:Or,authorName:hr,bookType:Tr}),Kt(!1),dt(!0)}async function Pr(){try{await(await fetch("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${it}`},credentials:"include"})).json()&&ot()}catch(Or){console.error("Failed to refresh slots:",Or)}}return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsx(DashboardHeader,{type:"book",items:g,onCheckout:()=>ar("/plans")}),ut?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:()=>ar("/plans"),type:"book"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookGrid,{books:xr,onAddPrompt:(Or,hr)=>yr(Or,hr),onGenerateNext:(Or,hr)=>yr(Or,hr)}),jsxRuntimeExports.jsx(BookCardList,{books:xr,onAddPrompt:(Or,hr)=>yr(Or,hr),onGenerateNext:(Or,hr)=>yr(Or,hr)}),jsxRuntimeExports.jsx(PaginationControls,{currentPage:zt,totalPages:cr,onPageChange:Ht}),jsxRuntimeExports.jsx(SupportTab,{})]}),Ut&&ft&&jsxRuntimeExports.jsx(NewBookModal,{bookId:ft.id,accessToken:it,onCreate:kr,onClose:()=>Kt(!1)}),ft&&jsxRuntimeExports.jsx(BookPromptModal,{isOpen:ct,onClose:()=>dt(!1),bookId:ft.id,partNumber:ft.part_number,accessToken:it,setShowGenerating:Tt,setProgress:Ft,onSubmitted:Sr,initialBookData:{title:(Yt==null?void 0:Yt.title)||ft.title||"",authorName:(Yt==null?void 0:Yt.authorName)||ft.author_name||"",bookType:(Yt==null?void 0:Yt.bookType)||ft.book_type||"fiction"}}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:jt,onClose:()=>Bt(!1),onRefresh:Pr,isFirstTime:g.length===0}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:kt,progress:Rt,type:"book"})]})})}function DashboardSettings(){const{user:it,setUser:g}=useAuth(),[et,ot]=reactExports.useState(null),[ut,ct]=reactExports.useState(null),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1),Tt=reactExports.useRef(null);reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;(async()=>{try{const Ut=await axiosInstance.get(`upload-data/user/settings/${it.id}`);ot(Ut.data.settings)}catch(Ut){console.error("Failed to load settings:",Ut),y$4.error("Failed to load brand settings.")}})()},[it==null?void 0:it.id]);const Rt=async()=>{if(!ut){y$4.warning("Please select a file first.");return}const Ht=new FileReader;Ht.onloadend=async()=>{const Ut=Ht.result.split(",")[1];ft(!0);try{const Kt=await axiosInstance.post("upload-data/user/settings/upload",{user_id:it.id,file_name:ut.name,file_data:Ut});ot(Yt=>({...Yt,brand_identity_file:Kt.data.fileUrl})),g(Yt=>({...Yt,brand_identity_file:Kt.data.fileUrl})),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:Kt.data.fileUrl})),y$4.success("Brand file uploaded successfully!"),ct(null),Tt.current&&(Tt.current.value="")}catch(Kt){console.error(Kt),y$4.error("Upload failed. Please try again.")}finally{ft(!1)}},Ht.readAsDataURL(ut)},Ft=async()=>{try{(await axiosInstance.delete(`upload-data/user/settings/remove/${it.id}`)).data.success?(ot(Ut=>({...Ut,brand_identity_file:null})),g(Ut=>({...Ut,brand_identity_file:null})),ct(null),Tt.current&&(Tt.current.value=""),localStorage.setItem("user",JSON.stringify({...it,brand_identity_file:null})),y$4.info("Brand identity file removed. Defaults restored.")):y$4.warning("Failed to remove brand file. Try again.")}catch(Ht){console.error("Error removing brand file:",Ht),y$4.error("Error removing file.")}},jt=async()=>{try{await axiosInstance.put("upload-data/user/settings/update-cta",{userId:it.id,cta:(et==null?void 0:et.cta)||""}),g(Ht=>({...Ht,cta:et==null?void 0:et.cta})),localStorage.setItem("user",JSON.stringify({...it,cta:et==null?void 0:et.cta})),kt(!0),y$4.success("CTA saved successfully!"),setTimeout(()=>kt(!1),3e3)}catch(Ht){console.error("Failed to update CTA:",Ht),y$4.error("Failed to update CTA. Please try again.")}},zt=(()=>{if(!it)return[];const Ht=[];return it.has_book&&Ht.push("Assistant"),it.has_magnet&&Ht.push("Magnets"),it.pro_covers&&Ht.push("Pro Covers"),Ht})();return jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full min-h-screen bg-[#030712] text-white",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-5",children:[jsxRuntimeExports.jsxs("div",{className:"mb-10 border-b border-gray-800 pb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white design-text",children:"Brand Settings"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your brand tone and upload a reference file for AI generation."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-2xl p-8 mb-10 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white",children:"Your Plan"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:[new Date().toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," "]})]}),zt.length>0?jsxRuntimeExports.jsx("div",{className:"grid sm:grid-cols-3 gap-6",children:zt.map(Ht=>{let Ut="active",Kt=null;return Ht.includes("Assistant")?(Kt=(it==null?void 0:it.book_slots)??0,Kt<=0&&(Ut="expired")):Ht.includes("Magnets")?(Kt=(it==null?void 0:it.magnet_slots)??0,Kt<=0&&(Ut="expired")):Ht.includes("Pro")&&(Ut=it!=null&&it.pro_covers?"lifetime":"expired"),jsxRuntimeExports.jsxs("div",{className:`relative flex flex-col justify-between transition-all rounded-xl p-5 border shadow-inner
              ${Ut==="expired"?"bg-[#0c0f18]/80 border-gray-800 opacity-70":"bg-[#111827]/80 hover:bg-[#1f2937]/80 border-gray-700 hover:border-gray-600 hover:shadow-[0_0_20px_rgba(0,255,170,0.15)]"}`,children:[jsxRuntimeExports.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide px-2 py-1 rounded-md mb-2 self-start ${Ut==="expired"?"text-red-400 bg-red-400/10":"text-green bg-green-400/10"}`,children:Ht.includes("Pro")||Ut==="active"?"Active":"Expired"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ht.includes("Assistant")&&jsxRuntimeExports.jsxs("svg",{className:"w-6 h-6 text-hotPink",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20l9-5-9-5-9 5 9 5z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12l9-5-9-5-9 5 9 5z"})]}),Ht.includes("Magnets")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11M9 21V3m12 7h-5a2 2 0 00-2 2v9"})}),Ht.includes("Pro")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-royalPurple",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m9-9H3"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:Ht})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:Ht.includes("Assistant")?"Access advanced book creation and AI writing tools.":Ht.includes("Magnets")?"Generate digital products and marketing assets.":"Unlock pro cover uploads and customization tools."}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:Ut==="lifetime"?jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-gray-500 tracking-wide",children:"Lifetime"}):jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Slots remaining:"," ",jsxRuntimeExports.jsx("span",{className:`font-semibold ${Kt>0?"text-gray-300":"text-red-400"}`,children:Kt})]})})]},Ht)})}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No active plan detected. Please contact support if this seems incorrect."})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-3 shadow-lg mb-8",children:et!=null&&et.brand_identity_file?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Active Brand File"})}),jsxRuntimeExports.jsx("button",{onClick:Ft,className:"text-xs bg-red-600 hover:bg-red-700 px-3 py-1.5 rounded-md font-semibold shadow-sm transition",children:"Remove"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic",children:["Uploaded on: ",new Date().toLocaleDateString()]})]}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center",children:"No brand identity uploaded yet."})}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Upload New Brand File"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:["Accepted formats:"," ",jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:".pdf, .docx, .doc, .txt"})," (max 5 MB)"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 w-full",children:[jsxRuntimeExports.jsx("input",{ref:Tt,type:"file",accept:".pdf,.docx,.doc,.txt",onChange:Ht=>ct(Ht.target.files[0]),className:"w-full text-sm text-gray-300 file:mr-3 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-gradient-to-r file:from-green-500 file:to-purple-600 hover:file:opacity-90"}),ut&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 italic mt-1",children:["Selected: ",jsxRuntimeExports.jsx("span",{className:"text-gray-200",children:ut.name})]})]}),jsxRuntimeExports.jsxs("button",{onClick:Rt,disabled:dt,className:`relative w-full sm:w-auto px-6 py-2.5 rounded-lg font-semibold transition-all duration-300
    ${dt?"opacity-60 cursor-not-allowed bg-gradient-to-r from-green-700 to-green-600":"bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-400 hover:to-emerald-500 hover:shadow-[0_0_20px_rgba(34,197,94,0.4)]"}
    text-white shadow-[inset_0_0_6px_rgba(255,255,255,0.15)]`,children:[jsxRuntimeExports.jsx("span",{className:"relative z-10",children:dt?"Uploading...":"Save Brand"}),!dt&&jsxRuntimeExports.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 rounded-lg"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 space-y-4 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200",children:"Default Closing Message / CTA"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"This message will appear at the end of your lead magnets or books. You can change it anytime."}),jsxRuntimeExports.jsx("textarea",{placeholder:`Example:
Create your first lead magnet today with Cre8tlyStudio or join my free newsletter at https://yourwebsite.com.

Lets keep this journey going together  no tech overwhelm, no burnout, just steady growth.`,value:(et==null?void 0:et.cta)||"",onChange:Ht=>ot(Ut=>({...Ut,cta:Ht.target.value})),rows:5,className:"w-full px-4 py-3 rounded-lg bg-gray-800 text-white border border-gray-600 placeholder-gray-500 focus:ring-2 focus:ring-green focus:outline-none"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:jt,className:"mt-3 px-6 py-2 rounded-lg bg-green text-black font-semibold hover:opacity-90 transition",children:"Save CTA"})}),it!=null&&it.has_book?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Guided Tour"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Replay the Book Builder onboarding walkthrough to revisit all key features."}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.post("https://cre8tlystudio.com/api/books/onboarding/replay",{},{headers:{Authorization:`Bearer ${it==null?void 0:it.accessToken}`}}),y$4.success(" Tour reset! It will replay next time you open Book Builder.")}catch(Ht){console.error(" Failed to reset onboarding:",Ht),y$4.error("Could not reset tour. Please try again.")}},className:"px-5 py-2.5 rounded-lg bg-[#6a5acd] text-black font-semibold hover:opacity-90 transition",children:"Replay Book Tour"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/80 border border-gray-800 rounded-xl p-6 shadow-lg mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-200 mb-2",children:"ISBN Assistance"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4 leading-relaxed",children:"Need an ISBN for your book? Cre8tly Studio can guide you through the process. An ISBN (International Standard Book Number) identifies your book worldwide and is required for publishing on major retailers like Amazon, Apple Books, and Barnes & Noble."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://www.myidentifiers.com/","_blank"),className:"flex-1 bg-green text-black font-semibold py-2.5 rounded-lg shadow-md hover:opacity-90 transition text-center",children:"Get ISBN from Bowker"}),jsxRuntimeExports.jsx("button",{onClick:()=>y$4.info("Our team will soon offer a Pro ISBN Concierge service directly inside Cre8tly Studio!"),className:"flex-1 bg-gray-800 text-gray-300 font-semibold py-2.5 rounded-lg border border-gray-700 hover:border-green hover:text-green transition",children:"Coming Soon: ISBN Concierge"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 italic mt-3",children:"Available for Assistant Plan users. Stay tuned for automated ISBN requests inside the dashboard."})]})]}):null]})]})})}function PromptMemoryTable({prompts:it=[]}){const[g,et]=reactExports.useState(null),[ot,ut]=reactExports.useState(!1),{user:ct,accessToken:dt}=useAuth(),ft=useNavigate();reactExports.useEffect(()=>{async function kt(){try{if(!(ct!=null&&ct.id))return;const Tt=await axiosInstance.get("https://cre8tlystudio.com/api/auth/me",{headers:{Authorization:`Bearer ${dt}`}});ut(!!Tt.data.has_memory)}catch(Tt){console.error(" Failed to check memory access:",Tt)}}kt()},[ct,dt]);const St=async(kt,Tt)=>{try{const Rt=kt.replace(/<[^>]*>/g,"");await navigator.clipboard.writeText(Rt),et(Tt),y$4.success("Prompt copied to clipboard"),setTimeout(()=>et(null),2e3)}catch{y$4.error("Failed to copy prompt")}};return!Array.isArray(it)||it.length===0?jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center min-h-[70vh] text-gray-400 px-4",children:jsxRuntimeExports.jsx("p",{children:"No prompts found yet."})}):ot?jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-2 sm:px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111] w-full max-w-6xl rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})}),jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full text-white",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-800/90",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Prompt"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Created"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-300",children:"Copy"})]})}),jsxRuntimeExports.jsx("tbody",{children:it.map(kt=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-700 hover:bg-gray-900/60 transition",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-3 max-w-lg",children:jsxRuntimeExports.jsx("p",{className:"truncate text-white/90",children:kt.prompt.replace(/<[^>]*>/g,"")})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm whitespace-nowrap",children:kt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(kt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):jsxRuntimeExports.jsx("span",{className:"italic text-gray-500",children:"N/A"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-3",children:jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:18}):jsxRuntimeExports.jsx(Copy,{size:18})})})]},kt.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex flex-col divide-y divide-gray-800",children:it.map(kt=>jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-white/90 text-sm mb-2",children:kt.prompt.replace(/<[^>]*>/g,"")}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400",children:[jsxRuntimeExports.jsx("span",{children:kt.created_at_prompt?new Date(kt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"}):"N/A"}),jsxRuntimeExports.jsx("button",{onClick:()=>St(kt.prompt,kt.id),className:"text-gray-400 hover:text-green transition",children:g===kt.id?jsxRuntimeExports.jsx(Check,{size:16}):jsxRuntimeExports.jsx(Copy,{size:16})})]})]},kt.id))})]})}):jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10 md:mt-20 px-4",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-[#111] w-full max-w-6xl overflow-hidden rounded-xl border border-gray-700 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"opacity-40 pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"bg-[#111] px-4 sm:px-6 py-3 border-b border-gray-700 flex justify-between items-center",children:jsxRuntimeExports.jsxs("h2",{className:"text-white font-semibold text-lg",children:["Prompt Memory"," ",jsxRuntimeExports.jsx("span",{className:"text-[#d2b6ff] text-sm ml-2",children:"PRO Feature"})]})}),jsxRuntimeExports.jsx("div",{className:"min-h-[400px] flex items-center justify-center text-gray-500 text-sm",children:jsxRuntimeExports.jsx("p",{children:"Prompt data will appear here once unlocked."})})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center backdrop-blur-md bg-black/40 rounded-xl text-center px-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Lock,{size:20,className:"text-gray-300"}),jsxRuntimeExports.jsx("h2",{className:"text-white font-semibold text-lg",children:"Prompt Memory"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-4 max-w-md",children:"Unlock this feature to access and reuse your previously generated prompts."}),jsxRuntimeExports.jsx("button",{onClick:()=>ft("/plans"),className:`border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
                         text-black font-semibold px-5 py-2 rounded-lg hover:opacity-90 transition`,children:"Unlock Feature"})]})]})})}function PromptMemoryDashboard(){const{user:it}=useAuth(),[g,et]=reactExports.useState([]),[ot,ut]=reactExports.useState(!0);return reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;async function ct(){try{const dt=await axiosInstance.get(`/lead-magnets/prompt-memory/${it.id}`);et(dt.data)}catch(dt){console.error("Failed to load prompts:",dt)}finally{ut(!1)}}ct()},[it]),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col mb-8 mt-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-white mb-2 design-text",children:"My Prompt Memory"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"View all prompts youve generated with Cre8tly Studio."})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-3 mb-8"}),ot?jsxRuntimeExports.jsx(LoadingState,{}):g.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-20 border border-gray-700 rounded-xl bg-gray-900/40",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"No Prompts Yet"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 max-w-md mx-auto",children:["You dont have any saved prompts yet. Create your first ",jsxRuntimeExports.jsx("span",{className:"text-green-400 font-semibold",children:"Digital Product"})," to start building your prompt memory."]})]}):jsxRuntimeExports.jsx(PromptMemoryTable,{prompts:g})]})}function Inbox(){const[it,g]=reactExports.useState([]),[et,ot]=reactExports.useState(null),[ut,ct]=reactExports.useState(!0),[dt,ft]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1);reactExports.useEffect(()=>{Tt()},[]);async function Tt(){try{const Bt=await axiosInstance.get("/admin/messages");g(Bt.data||[])}catch(Bt){console.error("Failed to load messages:",Bt),y$4.error("Failed to load inbox.")}finally{ct(!1)}}async function Rt(Bt){if(ot(Bt),!Bt.read_status)try{ft(!0),await axiosInstance.post(`/admin/messages/${Bt.id}/read`),g(zt=>zt.map(Ht=>Ht.id===Bt.id?{...Ht,read_status:1}:Ht))}catch(zt){console.error("Failed to mark message as read:",zt)}finally{ft(!1)}}async function Ft(Bt){y$4.dismiss(),y$4(({closeToast:zt})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Are you sure you want to delete this message?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{try{kt(!0),await axiosInstance.delete(`/admin/messages/user/${Bt}`),g(Ht=>Ht.filter(Ut=>Ut.id!==Bt)),ot(null),y$4.success("Message deleted successfully.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(Ht){console.error("Failed to delete message:",Ht),y$4.error("Failed to delete message.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{kt(!1),zt()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:zt,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"top-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}function jt(){ot(null)}return jsxRuntimeExports.jsxs("div",{className:"w-full min-h-screen bg-[#030712] text-white flex flex-col lg:flex-row",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 lg:max-w-[380px] border-r border-gray-800 h-screen overflow-y-auto p-6",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-800 pb-4 mb-6 flex items-center justify-between",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold design-text",children:"Inbox"}),jsxRuntimeExports.jsx(Bell,{size:18,className:"text-green"})]}),ut?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Loading messages..."}):it.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"No messages found."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:it.map(Bt=>jsxRuntimeExports.jsxs("li",{onClick:()=>Rt(Bt),className:`cursor-pointer p-4 rounded-lg border transition-all duration-200 ${Bt.id===(et==null?void 0:et.id)?"bg-[#111827]/80 border-green":Bt.read_status?"bg-[#0c0f18]/70 border-gray-800 hover:border-gray-700":"bg-[#111827]/80 border-green/40 hover:border-green"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("h3",{className:`font-semibold truncate ${Bt.read_status?"text-gray-300":"text-white"}`,children:Bt.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:new Date(Bt.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),jsxRuntimeExports.jsx("p",{className:`text-xs truncate ${Bt.read_status?"text-gray-500":"text-gray-300"}`,children:Bt.message}),!Bt.read_status&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-green font-semibold",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," New"]})]},Bt.id))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-y-auto h-screen bg-[#0B0F19]",children:et?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-6",children:jsxRuntimeExports.jsxs("button",{onClick:jt,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-white",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16})," Back to Inbox"]})}),jsxRuntimeExports.jsxs("div",{className:"bg-[#111827]/60 border border-gray-800 rounded-2xl p-6 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between border-b border-gray-800 pb-4 mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:et.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-2 sm:mt-0",children:[jsxRuntimeExports.jsx(Calendar,{size:12}),new Date(et.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-line text-sm",children:et.message}),jsxRuntimeExports.jsxs("div",{className:"mt-6 border-t border-gray-800 pt-4 flex items-center justify-between text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("p",{children:["Sent by"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Cre8tly Support"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ft(et.id),disabled:St,className:`flex items-center gap-2 text-sm px-3 py-1.5 rounded-md font-semibold transition-all ${St?"bg-red-900 text-gray-400 opacity-60 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),St?"Deleting...":"Delete"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500",children:[jsxRuntimeExports.jsx(Mail,{size:40,className:"mb-4 text-gray-600"}),jsxRuntimeExports.jsx("p",{children:"Select a message to read"})]})})]})}function useMaintenance(){const[it,g]=reactExports.useState(!1),[et,ot]=reactExports.useState(!0);return reactExports.useEffect(()=>{async function ut(){try{const{data:ct}=await axiosInstance.get("https://cre8tlystudio.com/api/settings/maintenance");g(ct.maintenance)}catch{g(!1)}finally{ot(!1)}}ut()},[]),{maintenance:it,loading:et}}function MaintenanceScreen(){return jsxRuntimeExports.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0f0f10] text-white text-center px-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4",children:" Down for Maintenance"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-400 max-w-md mb-8",children:["Cre8tly Studio is ",jsxRuntimeExports.jsx("span",{className:"text-yellow",children:"temporarily offline"})," while we make improvements.",jsxRuntimeExports.jsx("br",{}),"Well be back shortly, thank you for your patience."]}),jsxRuntimeExports.jsx("a",{href:"/",className:"px-6 py-3 bg-green hover:bg-emerald-600 text-black font-semibold rounded-lg shadow-md transition-all duration-200",children:"Return Home"}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-sm text-gray-600",children:jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," Alure Digital"]})})]})}const PI_OVER_180=Math.PI/180;function detectBrowser(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Konva$2={_global:glob,version:"10.0.8",isBrowser:detectBrowser(),isUnminified:/param/.test((function(it){}).toString()),dblClickWindow:400,getAngle(it){return Konva$2.angleDeg?it*PI_OVER_180:it},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Konva$2.DD.isDragging},isTransforming(){var it,g;return(g=(it=Konva$2.Transformer)===null||it===void 0?void 0:it.isTransforming())!==null&&g!==void 0?g:!1},isDragReady(){return!!Konva$2.DD.node},releaseCanvasOnDestroy:!0,document:glob.document,_injectGlobal(it){typeof glob.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),glob.Konva=it}},_registerNode=it=>{Konva$2[it.prototype.getClassName()]=it};Konva$2._injectGlobal(Konva$2);const NODE_ERROR=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ensureBrowser=()=>{if(typeof document>"u")throw new Error(NODE_ERROR)};class Transform{constructor(g=[1,0,0,1,0,0]){this.dirty=!1,this.m=g&&g.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Transform(this.m)}copyInto(g){g.m[0]=this.m[0],g.m[1]=this.m[1],g.m[2]=this.m[2],g.m[3]=this.m[3],g.m[4]=this.m[4],g.m[5]=this.m[5]}point(g){const et=this.m;return{x:et[0]*g.x+et[2]*g.y+et[4],y:et[1]*g.x+et[3]*g.y+et[5]}}translate(g,et){return this.m[4]+=this.m[0]*g+this.m[2]*et,this.m[5]+=this.m[1]*g+this.m[3]*et,this}scale(g,et){return this.m[0]*=g,this.m[1]*=g,this.m[2]*=et,this.m[3]*=et,this}rotate(g){const et=Math.cos(g),ot=Math.sin(g),ut=this.m[0]*et+this.m[2]*ot,ct=this.m[1]*et+this.m[3]*ot,dt=this.m[0]*-ot+this.m[2]*et,ft=this.m[1]*-ot+this.m[3]*et;return this.m[0]=ut,this.m[1]=ct,this.m[2]=dt,this.m[3]=ft,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(g,et){const ot=this.m[0]+this.m[2]*et,ut=this.m[1]+this.m[3]*et,ct=this.m[2]+this.m[0]*g,dt=this.m[3]+this.m[1]*g;return this.m[0]=ot,this.m[1]=ut,this.m[2]=ct,this.m[3]=dt,this}multiply(g){const et=this.m[0]*g.m[0]+this.m[2]*g.m[1],ot=this.m[1]*g.m[0]+this.m[3]*g.m[1],ut=this.m[0]*g.m[2]+this.m[2]*g.m[3],ct=this.m[1]*g.m[2]+this.m[3]*g.m[3],dt=this.m[0]*g.m[4]+this.m[2]*g.m[5]+this.m[4],ft=this.m[1]*g.m[4]+this.m[3]*g.m[5]+this.m[5];return this.m[0]=et,this.m[1]=ot,this.m[2]=ut,this.m[3]=ct,this.m[4]=dt,this.m[5]=ft,this}invert(){const g=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),et=this.m[3]*g,ot=-this.m[1]*g,ut=-this.m[2]*g,ct=this.m[0]*g,dt=g*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),ft=g*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=et,this.m[1]=ot,this.m[2]=ut,this.m[3]=ct,this.m[4]=dt,this.m[5]=ft,this}getMatrix(){return this.m}decompose(){const g=this.m[0],et=this.m[1],ot=this.m[2],ut=this.m[3],ct=this.m[4],dt=this.m[5],ft=g*ut-et*ot,St={x:ct,y:dt,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(g!=0||et!=0){const kt=Math.sqrt(g*g+et*et);St.rotation=et>0?Math.acos(g/kt):-Math.acos(g/kt),St.scaleX=kt,St.scaleY=ft/kt,St.skewX=(g*ot+et*ut)/ft,St.skewY=0}else if(ot!=0||ut!=0){const kt=Math.sqrt(ot*ot+ut*ut);St.rotation=Math.PI/2-(ut>0?Math.acos(-ot/kt):-Math.acos(ot/kt)),St.scaleX=ft/kt,St.scaleY=kt,St.skewX=0,St.skewY=(g*ot+et*ut)/ft}return St.rotation=Util._getRotation(St.rotation),St}}const OBJECT_ARRAY="[object Array]",OBJECT_NUMBER="[object Number]",OBJECT_STRING="[object String]",OBJECT_BOOLEAN="[object Boolean]",PI_OVER_DEG180=Math.PI/180,DEG180_OVER_PI=180/Math.PI,HASH$1="#",EMPTY_STRING$1="",ZERO="0",KONVA_WARNING="Konva warning: ",KONVA_ERROR="Konva error: ",RGB_PAREN="rgb(",COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},RGB_REGEX=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let animQueue=[];const req=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(it){setTimeout(it,60)},Util={_isElement(it){return!!(it&&it.nodeType==1)},_isFunction(it){return!!(it&&it.constructor&&it.call&&it.apply)},_isPlainObject(it){return!!it&&it.constructor===Object},_isArray(it){return Object.prototype.toString.call(it)===OBJECT_ARRAY},_isNumber(it){return Object.prototype.toString.call(it)===OBJECT_NUMBER&&!isNaN(it)&&isFinite(it)},_isString(it){return Object.prototype.toString.call(it)===OBJECT_STRING},_isBoolean(it){return Object.prototype.toString.call(it)===OBJECT_BOOLEAN},isObject(it){return it instanceof Object},isValidSelector(it){if(typeof it!="string")return!1;const g=it[0];return g==="#"||g==="."||g===g.toUpperCase()},_sign(it){return it===0||it>0?1:-1},requestAnimFrame(it){animQueue.push(it),animQueue.length===1&&req(function(){const g=animQueue;animQueue=[],g.forEach(function(et){et()})})},createCanvasElement(){ensureBrowser();const it=document.createElement("canvas");try{it.style=it.style||{}}catch{}return it},createImageElement(){return ensureBrowser(),document.createElement("img")},_isInDocument(it){for(;it=it.parentNode;)if(it==document)return!0;return!1},_urlToImage(it,g){const et=Util.createImageElement();et.onload=function(){g(et)},et.src=it},_rgbToHex(it,g,et){return((1<<24)+(it<<16)+(g<<8)+et).toString(16).slice(1)},_hexToRgb(it){it=it.replace(HASH$1,EMPTY_STRING$1);const g=parseInt(it,16);return{r:g>>16&255,g:g>>8&255,b:g&255}},getRandomColor(){let it=(Math.random()*16777215<<0).toString(16);for(;it.length<6;)it=ZERO+it;return HASH$1+it},getRGB(it){let g;return it in COLORS?(g=COLORS[it],{r:g[0],g:g[1],b:g[2]}):it[0]===HASH$1?this._hexToRgb(it.substring(1)):it.substr(0,4)===RGB_PAREN?(g=RGB_REGEX.exec(it.replace(/ /g,"")),{r:parseInt(g[1],10),g:parseInt(g[2],10),b:parseInt(g[3],10)}):{r:0,g:0,b:0}},colorToRGBA(it){return it=it||"black",Util._namedColorToRBA(it)||Util._hex3ColorToRGBA(it)||Util._hex4ColorToRGBA(it)||Util._hex6ColorToRGBA(it)||Util._hex8ColorToRGBA(it)||Util._rgbColorToRGBA(it)||Util._rgbaColorToRGBA(it)||Util._hslColorToRGBA(it)},_namedColorToRBA(it){const g=COLORS[it.toLowerCase()];return g?{r:g[0],g:g[1],b:g[2],a:1}:null},_rgbColorToRGBA(it){if(it.indexOf("rgb(")===0){it=it.match(/rgb\(([^)]+)\)/)[1];const g=it.split(/ *, */).map(Number);return{r:g[0],g:g[1],b:g[2],a:1}}},_rgbaColorToRGBA(it){if(it.indexOf("rgba(")===0){it=it.match(/rgba\(([^)]+)\)/)[1];const g=it.split(/ *, */).map((et,ot)=>et.slice(-1)==="%"?ot===3?parseInt(et)/100:parseInt(et)/100*255:Number(et));return{r:g[0],g:g[1],b:g[2],a:g[3]}}},_hex8ColorToRGBA(it){if(it[0]==="#"&&it.length===9)return{r:parseInt(it.slice(1,3),16),g:parseInt(it.slice(3,5),16),b:parseInt(it.slice(5,7),16),a:parseInt(it.slice(7,9),16)/255}},_hex6ColorToRGBA(it){if(it[0]==="#"&&it.length===7)return{r:parseInt(it.slice(1,3),16),g:parseInt(it.slice(3,5),16),b:parseInt(it.slice(5,7),16),a:1}},_hex4ColorToRGBA(it){if(it[0]==="#"&&it.length===5)return{r:parseInt(it[1]+it[1],16),g:parseInt(it[2]+it[2],16),b:parseInt(it[3]+it[3],16),a:parseInt(it[4]+it[4],16)/255}},_hex3ColorToRGBA(it){if(it[0]==="#"&&it.length===4)return{r:parseInt(it[1]+it[1],16),g:parseInt(it[2]+it[2],16),b:parseInt(it[3]+it[3],16),a:1}},_hslColorToRGBA(it){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(it)){const[g,...et]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(it),ot=Number(et[0])/360,ut=Number(et[1])/100,ct=Number(et[2])/100;let dt,ft,St;if(ut===0)return St=ct*255,{r:Math.round(St),g:Math.round(St),b:Math.round(St),a:1};ct<.5?dt=ct*(1+ut):dt=ct+ut-ct*ut;const kt=2*ct-dt,Tt=[0,0,0];for(let Rt=0;Rt<3;Rt++)ft=ot+1/3*-(Rt-1),ft<0&&ft++,ft>1&&ft--,6*ft<1?St=kt+(dt-kt)*6*ft:2*ft<1?St=dt:3*ft<2?St=kt+(dt-kt)*(2/3-ft)*6:St=kt,Tt[Rt]=St*255;return{r:Math.round(Tt[0]),g:Math.round(Tt[1]),b:Math.round(Tt[2]),a:1}}},haveIntersection(it,g){return!(g.x>it.x+it.width||g.x+g.width<it.x||g.y>it.y+it.height||g.y+g.height<it.y)},cloneObject(it){const g={};for(const et in it)this._isPlainObject(it[et])?g[et]=this.cloneObject(it[et]):this._isArray(it[et])?g[et]=this.cloneArray(it[et]):g[et]=it[et];return g},cloneArray(it){return it.slice(0)},degToRad(it){return it*PI_OVER_DEG180},radToDeg(it){return it*DEG180_OVER_PI},_degToRad(it){return Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Util.degToRad(it)},_radToDeg(it){return Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Util.radToDeg(it)},_getRotation(it){return Konva$2.angleDeg?Util.radToDeg(it):it},_capitalize(it){return it.charAt(0).toUpperCase()+it.slice(1)},throw(it){throw new Error(KONVA_ERROR+it)},error(it){console.error(KONVA_ERROR+it)},warn(it){Konva$2.showWarnings&&console.warn(KONVA_WARNING+it)},each(it,g){for(const et in it)g(et,it[et])},_inRange(it,g,et){return g<=it&&it<et},_getProjectionToSegment(it,g,et,ot,ut,ct){let dt,ft,St;const kt=(it-et)*(it-et)+(g-ot)*(g-ot);if(kt==0)dt=it,ft=g,St=(ut-et)*(ut-et)+(ct-ot)*(ct-ot);else{const Tt=((ut-it)*(et-it)+(ct-g)*(ot-g))/kt;Tt<0?(dt=it,ft=g,St=(it-ut)*(it-ut)+(g-ct)*(g-ct)):Tt>1?(dt=et,ft=ot,St=(et-ut)*(et-ut)+(ot-ct)*(ot-ct)):(dt=it+Tt*(et-it),ft=g+Tt*(ot-g),St=(dt-ut)*(dt-ut)+(ft-ct)*(ft-ct))}return[dt,ft,St]},_getProjectionToLine(it,g,et){const ot=Util.cloneObject(it);let ut=Number.MAX_VALUE;return g.forEach(function(ct,dt){if(!et&&dt===g.length-1)return;const ft=g[(dt+1)%g.length],St=Util._getProjectionToSegment(ct.x,ct.y,ft.x,ft.y,it.x,it.y),kt=St[0],Tt=St[1],Rt=St[2];Rt<ut&&(ot.x=kt,ot.y=Tt,ut=Rt)}),ot},_prepareArrayForTween(it,g,et){const ot=[],ut=[];if(it.length>g.length){const dt=g;g=it,it=dt}for(let dt=0;dt<it.length;dt+=2)ot.push({x:it[dt],y:it[dt+1]});for(let dt=0;dt<g.length;dt+=2)ut.push({x:g[dt],y:g[dt+1]});const ct=[];return ut.forEach(function(dt){const ft=Util._getProjectionToLine(dt,ot,et);ct.push(ft.x),ct.push(ft.y)}),ct},_prepareToStringify(it){let g;it.visitedByCircularReferenceRemoval=!0;for(const et in it)if(it.hasOwnProperty(et)&&it[et]&&typeof it[et]=="object"){if(g=Object.getOwnPropertyDescriptor(it,et),it[et].visitedByCircularReferenceRemoval||Util._isElement(it[et]))if(g.configurable)delete it[et];else return null;else if(Util._prepareToStringify(it[et])===null)if(g.configurable)delete it[et];else return null}return delete it.visitedByCircularReferenceRemoval,it},_assign(it,g){for(const et in g)it[et]=g[et];return it},_getFirstPointerId(it){return it.touches?it.changedTouches[0].identifier:it.pointerId||999},releaseCanvas(...it){Konva$2.releaseCanvasOnDestroy&&it.forEach(g=>{g.width=0,g.height=0})},drawRoundedRectPath(it,g,et,ot){let ut=g<0?g:0,ct=et<0?et:0;g=Math.abs(g),et=Math.abs(et);let dt=0,ft=0,St=0,kt=0;typeof ot=="number"?dt=ft=St=kt=Math.min(ot,g/2,et/2):(dt=Math.min(ot[0]||0,g/2,et/2),ft=Math.min(ot[1]||0,g/2,et/2),kt=Math.min(ot[2]||0,g/2,et/2),St=Math.min(ot[3]||0,g/2,et/2)),it.moveTo(ut+dt,ct),it.lineTo(ut+g-ft,ct),it.arc(ut+g-ft,ct+ft,ft,Math.PI*3/2,0,!1),it.lineTo(ut+g,ct+et-kt),it.arc(ut+g-kt,ct+et-kt,kt,0,Math.PI/2,!1),it.lineTo(ut+St,ct+et),it.arc(ut+St,ct+et-St,St,Math.PI/2,Math.PI,!1),it.lineTo(ut,ct+dt),it.arc(ut+dt,ct+dt,dt,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(it,g,et,ot,ut){ot=Math.abs(ot);for(let ct=0;ct<et;ct++){const dt=g[(ct-1+et)%et],ft=g[ct],St=g[(ct+1)%et],kt={x:ft.x-dt.x,y:ft.y-dt.y},Tt={x:St.x-ft.x,y:St.y-ft.y},Rt=Math.hypot(kt.x,kt.y),Ft=Math.hypot(Tt.x,Tt.y);let jt;typeof ut=="number"?jt=ut:jt=ct<ut.length?ut[ct]:0,jt=ot*Math.cos(Math.PI/et)*Math.min(1,jt/ot*2);const zt={x:kt.x/Rt,y:kt.y/Rt},Ht={x:Tt.x/Ft,y:Tt.y/Ft},Ut={x:ft.x-zt.x*jt,y:ft.y-zt.y*jt},Kt={x:ft.x+Ht.x*jt,y:ft.y+Ht.y*jt};ct===0?it.moveTo(Ut.x,Ut.y):it.lineTo(Ut.x,Ut.y),it.arcTo(ft.x,ft.y,Kt.x,Kt.y,jt)}}};function simplifyArray(it){const g=[],et=it.length,ot=Util;for(let ut=0;ut<et;ut++){let ct=it[ut];ot._isNumber(ct)?ct=Math.round(ct*1e3)/1e3:ot._isString(ct)||(ct=ct+""),g.push(ct)}return g}const COMMA=",",OPEN_PAREN="(",CLOSE_PAREN=")",OPEN_PAREN_BRACKET="([",CLOSE_BRACKET_PAREN="])",SEMICOLON=";",DOUBLE_PAREN="()",EQUALS="=",CONTEXT_METHODS=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CONTEXT_PROPERTIES=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],traceArrMax=100;let _cssFiltersSupported=null;function isCSSFiltersSupported(){if(_cssFiltersSupported!==null)return _cssFiltersSupported;try{const g=Util.createCanvasElement().getContext("2d");return g?!!g&&"filter"in g:(_cssFiltersSupported=!1,!1)}catch{return _cssFiltersSupported=!1,!1}}let Context$1=class{constructor(g){this.canvas=g,Konva$2.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(g){g.fillEnabled()&&this._fill(g)}_fill(g){}strokeShape(g){g.hasStroke()&&this._stroke(g)}_stroke(g){}fillStrokeShape(g){g.attrs.fillAfterStrokeEnabled?(this.strokeShape(g),this.fillShape(g)):(this.fillShape(g),this.strokeShape(g))}getTrace(g,et){let ot=this.traceArr,ut=ot.length,ct="",dt,ft,St,kt;for(dt=0;dt<ut;dt++)ft=ot[dt],St=ft.method,St?(kt=ft.args,ct+=St,g?ct+=DOUBLE_PAREN:Util._isArray(kt[0])?ct+=OPEN_PAREN_BRACKET+kt.join(COMMA)+CLOSE_BRACKET_PAREN:(et&&(kt=kt.map(Tt=>typeof Tt=="number"?Math.floor(Tt):Tt)),ct+=OPEN_PAREN+kt.join(COMMA)+CLOSE_PAREN)):(ct+=ft.property,g||(ct+=EQUALS+ft.val)),ct+=SEMICOLON;return ct}clearTrace(){this.traceArr=[]}_trace(g){let et=this.traceArr,ot;et.push(g),ot=et.length,ot>=traceArrMax&&et.shift()}reset(){const g=this.getCanvas().getPixelRatio();this.setTransform(1*g,0,0,1*g,0,0)}getCanvas(){return this.canvas}clear(g){const et=this.getCanvas();g?this.clearRect(g.x||0,g.y||0,g.width||0,g.height||0):this.clearRect(0,0,et.getWidth()/et.pixelRatio,et.getHeight()/et.pixelRatio)}_applyLineCap(g){const et=g.attrs.lineCap;et&&this.setAttr("lineCap",et)}_applyOpacity(g){const et=g.getAbsoluteOpacity();et!==1&&this.setAttr("globalAlpha",et)}_applyLineJoin(g){const et=g.attrs.lineJoin;et&&this.setAttr("lineJoin",et)}_applyMiterLimit(g){const et=g.attrs.miterLimit;et!=null&&this.setAttr("miterLimit",et)}setAttr(g,et){this._context[g]=et}arc(g,et,ot,ut,ct,dt){this._context.arc(g,et,ot,ut,ct,dt)}arcTo(g,et,ot,ut,ct){this._context.arcTo(g,et,ot,ut,ct)}beginPath(){this._context.beginPath()}bezierCurveTo(g,et,ot,ut,ct,dt){this._context.bezierCurveTo(g,et,ot,ut,ct,dt)}clearRect(g,et,ot,ut){this._context.clearRect(g,et,ot,ut)}clip(...g){this._context.clip.apply(this._context,g)}closePath(){this._context.closePath()}createImageData(g,et){const ot=arguments;if(ot.length===2)return this._context.createImageData(g,et);if(ot.length===1)return this._context.createImageData(g)}createLinearGradient(g,et,ot,ut){return this._context.createLinearGradient(g,et,ot,ut)}createPattern(g,et){return this._context.createPattern(g,et)}createRadialGradient(g,et,ot,ut,ct,dt){return this._context.createRadialGradient(g,et,ot,ut,ct,dt)}drawImage(g,et,ot,ut,ct,dt,ft,St,kt){const Tt=arguments,Rt=this._context;Tt.length===3?Rt.drawImage(g,et,ot):Tt.length===5?Rt.drawImage(g,et,ot,ut,ct):Tt.length===9&&Rt.drawImage(g,et,ot,ut,ct,dt,ft,St,kt)}ellipse(g,et,ot,ut,ct,dt,ft,St){this._context.ellipse(g,et,ot,ut,ct,dt,ft,St)}isPointInPath(g,et,ot,ut){return ot?this._context.isPointInPath(ot,g,et,ut):this._context.isPointInPath(g,et,ut)}fill(...g){this._context.fill.apply(this._context,g)}fillRect(g,et,ot,ut){this._context.fillRect(g,et,ot,ut)}strokeRect(g,et,ot,ut){this._context.strokeRect(g,et,ot,ut)}fillText(g,et,ot,ut){ut?this._context.fillText(g,et,ot,ut):this._context.fillText(g,et,ot)}measureText(g){return this._context.measureText(g)}getImageData(g,et,ot,ut){return this._context.getImageData(g,et,ot,ut)}lineTo(g,et){this._context.lineTo(g,et)}moveTo(g,et){this._context.moveTo(g,et)}rect(g,et,ot,ut){this._context.rect(g,et,ot,ut)}roundRect(g,et,ot,ut,ct){this._context.roundRect(g,et,ot,ut,ct)}putImageData(g,et,ot){this._context.putImageData(g,et,ot)}quadraticCurveTo(g,et,ot,ut){this._context.quadraticCurveTo(g,et,ot,ut)}restore(){this._context.restore()}rotate(g){this._context.rotate(g)}save(){this._context.save()}scale(g,et){this._context.scale(g,et)}setLineDash(g){this._context.setLineDash?this._context.setLineDash(g):"mozDash"in this._context?this._context.mozDash=g:"webkitLineDash"in this._context&&(this._context.webkitLineDash=g)}getLineDash(){return this._context.getLineDash()}setTransform(g,et,ot,ut,ct,dt){this._context.setTransform(g,et,ot,ut,ct,dt)}stroke(g){g?this._context.stroke(g):this._context.stroke()}strokeText(g,et,ot,ut){this._context.strokeText(g,et,ot,ut)}transform(g,et,ot,ut,ct,dt){this._context.transform(g,et,ot,ut,ct,dt)}translate(g,et){this._context.translate(g,et)}_enableTrace(){let g=this,et=CONTEXT_METHODS.length,ot=this.setAttr,ut,ct;const dt=function(ft){let St=g[ft],kt;g[ft]=function(){return ct=simplifyArray(Array.prototype.slice.call(arguments,0)),kt=St.apply(g,arguments),g._trace({method:ft,args:ct}),kt}};for(ut=0;ut<et;ut++)dt(CONTEXT_METHODS[ut]);g.setAttr=function(){ot.apply(g,arguments);const ft=arguments[0];let St=arguments[1];(ft==="shadowOffsetX"||ft==="shadowOffsetY"||ft==="shadowBlur")&&(St=St/this.canvas.getPixelRatio()),g._trace({property:ft,val:St})}}_applyGlobalCompositeOperation(g){const et=g.attrs.globalCompositeOperation;!et||et==="source-over"||this.setAttr("globalCompositeOperation",et)}};CONTEXT_PROPERTIES.forEach(function(it){Object.defineProperty(Context$1.prototype,it,{get(){return this._context[it]},set(g){this._context[it]=g}})});class SceneContext extends Context$1{constructor(g,{willReadFrequently:et=!1}={}){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:et})}_fillColor(g){const et=g.fill();this.setAttr("fillStyle",et),g._fillFunc(this)}_fillPattern(g){this.setAttr("fillStyle",g._getFillPattern()),g._fillFunc(this)}_fillLinearGradient(g){const et=g._getLinearGradient();et&&(this.setAttr("fillStyle",et),g._fillFunc(this))}_fillRadialGradient(g){const et=g._getRadialGradient();et&&(this.setAttr("fillStyle",et),g._fillFunc(this))}_fill(g){const et=g.fill(),ot=g.getFillPriority();if(et&&ot==="color"){this._fillColor(g);return}const ut=g.getFillPatternImage();if(ut&&ot==="pattern"){this._fillPattern(g);return}const ct=g.getFillLinearGradientColorStops();if(ct&&ot==="linear-gradient"){this._fillLinearGradient(g);return}const dt=g.getFillRadialGradientColorStops();if(dt&&ot==="radial-gradient"){this._fillRadialGradient(g);return}et?this._fillColor(g):ut?this._fillPattern(g):ct?this._fillLinearGradient(g):dt&&this._fillRadialGradient(g)}_strokeLinearGradient(g){const et=g.getStrokeLinearGradientStartPoint(),ot=g.getStrokeLinearGradientEndPoint(),ut=g.getStrokeLinearGradientColorStops(),ct=this.createLinearGradient(et.x,et.y,ot.x,ot.y);if(ut){for(let dt=0;dt<ut.length;dt+=2)ct.addColorStop(ut[dt],ut[dt+1]);this.setAttr("strokeStyle",ct)}}_stroke(g){const et=g.dash(),ot=g.getStrokeScaleEnabled();if(g.hasStroke()){if(!ot){this.save();const ct=this.getCanvas().getPixelRatio();this.setTransform(ct,0,0,ct,0,0)}this._applyLineCap(g),et&&g.dashEnabled()&&(this.setLineDash(et),this.setAttr("lineDashOffset",g.dashOffset())),this.setAttr("lineWidth",g.strokeWidth()),g.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),g.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(g):this.setAttr("strokeStyle",g.stroke()),g._strokeFunc(this),ot||this.restore()}}_applyShadow(g){var et,ot,ut;const ct=(et=g.getShadowRGBA())!==null&&et!==void 0?et:"black",dt=(ot=g.getShadowBlur())!==null&&ot!==void 0?ot:5,ft=(ut=g.getShadowOffset())!==null&&ut!==void 0?ut:{x:0,y:0},St=g.getAbsoluteScale(),kt=this.canvas.getPixelRatio(),Tt=St.x*kt,Rt=St.y*kt;this.setAttr("shadowColor",ct),this.setAttr("shadowBlur",dt*Math.min(Math.abs(Tt),Math.abs(Rt))),this.setAttr("shadowOffsetX",ft.x*Tt),this.setAttr("shadowOffsetY",ft.y*Rt)}}class HitContext extends Context$1{constructor(g){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:!0})}_fill(g){this.save(),this.setAttr("fillStyle",g.colorKey),g._fillFuncHit(this),this.restore()}strokeShape(g){g.hasHitStroke()&&this._stroke(g)}_stroke(g){if(g.hasHitStroke()){const et=g.getStrokeScaleEnabled();if(!et){this.save();const ct=this.getCanvas().getPixelRatio();this.setTransform(ct,0,0,ct,0,0)}this._applyLineCap(g);const ot=g.hitStrokeWidth(),ut=ot==="auto"?g.strokeWidth():ot;this.setAttr("lineWidth",ut),this.setAttr("strokeStyle",g.colorKey),g._strokeFuncHit(this),et||this.restore()}}}let _pixelRatio;function getDevicePixelRatio(){if(_pixelRatio)return _pixelRatio;const it=Util.createCanvasElement(),g=it.getContext("2d");return _pixelRatio=function(){const et=Konva$2._global.devicePixelRatio||1,ot=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return et/ot}(),Util.releaseCanvas(it),_pixelRatio}class Canvas{constructor(g){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const ot=(g||{}).pixelRatio||Konva$2.pixelRatio||getDevicePixelRatio();this.pixelRatio=ot,this._canvas=Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(g){const et=this.pixelRatio;this.pixelRatio=g,this.setSize(this.getWidth()/et,this.getHeight()/et)}setWidth(g){this.width=this._canvas.width=g*this.pixelRatio,this._canvas.style.width=g+"px";const et=this.pixelRatio;this.getContext()._context.scale(et,et)}setHeight(g){this.height=this._canvas.height=g*this.pixelRatio,this._canvas.style.height=g+"px";const et=this.pixelRatio;this.getContext()._context.scale(et,et)}getWidth(){return this.width}getHeight(){return this.height}setSize(g,et){this.setWidth(g||0),this.setHeight(et||0)}toDataURL(g,et){try{return this._canvas.toDataURL(g,et)}catch{try{return this._canvas.toDataURL()}catch(ut){return Util.error("Unable to get data URL. "+ut.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class SceneCanvas extends Canvas{constructor(g={width:0,height:0,willReadFrequently:!1}){super(g),this.context=new SceneContext(this,{willReadFrequently:g.willReadFrequently}),this.setSize(g.width,g.height)}}function isCanvasFarblingActive(){const it=Util.createCanvasElement();it.width=1,it.height=1;const g=it.getContext("2d",{willReadFrequently:!0});g.clearRect(0,0,1,1),g.fillStyle="rgba(255,0,255,1)",g.fillRect(0,0,1,1);const et=g.getImageData(0,0,1,1).data;return!(et[0]===255&&et[1]===0&&et[2]===255&&et[3]===255)}function isBraveBrowser(){var it,g;return typeof navigator>"u"?!1:(g=(it=navigator.brave)===null||it===void 0?void 0:it.isBrave())!==null&&g!==void 0?g:!1}let warned=!1;function checkHitCanvasSupport(){return isBraveBrowser()&&isCanvasFarblingActive()&&!warned&&(warned=!0,Util.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),isBraveBrowser()&&isCanvasFarblingActive()}class HitCanvas extends Canvas{constructor(g={width:0,height:0}){super(g),this.hitCanvas=!0,this.context=new HitContext(this),this.setSize(g.width,g.height),checkHitCanvasSupport()}}const DD={get isDragging(){let it=!1;return DD._dragElements.forEach(g=>{g.dragStatus==="dragging"&&(it=!0)}),it},justDragged:!1,get node(){let it;return DD._dragElements.forEach(g=>{it=g.node}),it},_dragElements:new Map,_drag(it){const g=[];DD._dragElements.forEach((et,ot)=>{const{node:ut}=et,ct=ut.getStage();ct.setPointersPositions(it),et.pointerId===void 0&&(et.pointerId=Util._getFirstPointerId(it));const dt=ct._changedPointerPositions.find(ft=>ft.id===et.pointerId);if(dt){if(et.dragStatus!=="dragging"){const ft=ut.dragDistance();if(Math.max(Math.abs(dt.x-et.startPointerPos.x),Math.abs(dt.y-et.startPointerPos.y))<ft||(ut.startDrag({evt:it}),!ut.isDragging()))return}ut._setDragPosition(it,et),g.push(ut)}}),g.forEach(et=>{et.fire("dragmove",{type:"dragmove",target:et,evt:it},!0)})},_endDragBefore(it){const g=[];DD._dragElements.forEach(et=>{const{node:ot}=et,ut=ot.getStage();if(it&&ut.setPointersPositions(it),!ut._changedPointerPositions.find(ft=>ft.id===et.pointerId))return;(et.dragStatus==="dragging"||et.dragStatus==="stopped")&&(DD.justDragged=!0,Konva$2._mouseListenClick=!1,Konva$2._touchListenClick=!1,Konva$2._pointerListenClick=!1,et.dragStatus="stopped");const dt=et.node.getLayer()||et.node instanceof Konva$2.Stage&&et.node;dt&&g.indexOf(dt)===-1&&g.push(dt)}),g.forEach(et=>{et.draw()})},_endDragAfter(it){DD._dragElements.forEach((g,et)=>{g.dragStatus==="stopped"&&g.node.fire("dragend",{type:"dragend",target:g.node,evt:it},!0),g.dragStatus!=="dragging"&&DD._dragElements.delete(et)})}};Konva$2.isBrowser&&(window.addEventListener("mouseup",DD._endDragBefore,!0),window.addEventListener("touchend",DD._endDragBefore,!0),window.addEventListener("touchcancel",DD._endDragBefore,!0),window.addEventListener("mousemove",DD._drag),window.addEventListener("touchmove",DD._drag),window.addEventListener("mouseup",DD._endDragAfter,!1),window.addEventListener("touchend",DD._endDragAfter,!1),window.addEventListener("touchcancel",DD._endDragAfter,!1));function _formatValue(it){return Util._isString(it)?'"'+it+'"':Object.prototype.toString.call(it)==="[object Number]"||Util._isBoolean(it)?it:Object.prototype.toString.call(it)}function RGBComponent(it){return it>255?255:it<0?0:Math.round(it)}function getNumberValidator(){if(Konva$2.isUnminified)return function(it,g){return Util._isNumber(it)||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a number.'),it}}function getNumberOrArrayOfNumbersValidator(it){if(Konva$2.isUnminified)return function(g,et){let ot=Util._isNumber(g),ut=Util._isArray(g)&&g.length==it;return!ot&&!ut&&Util.warn(_formatValue(g)+' is a not valid value for "'+et+'" attribute. The value should be a number or Array<number>('+it+")"),g}}function getNumberOrAutoValidator(){if(Konva$2.isUnminified)return function(it,g){return Util._isNumber(it)||it==="auto"||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a number or "auto".'),it}}function getStringValidator(){if(Konva$2.isUnminified)return function(it,g){return Util._isString(it)||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a string.'),it}}function getStringOrGradientValidator(){if(Konva$2.isUnminified)return function(it,g){const et=Util._isString(it),ot=Object.prototype.toString.call(it)==="[object CanvasGradient]"||it&&it.addColorStop;return et||ot||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a string or a native gradient.'),it}}function getNumberArrayValidator(){if(Konva$2.isUnminified)return function(it,g){const et=Int8Array?Object.getPrototypeOf(Int8Array):null;return et&&it instanceof et||(Util._isArray(it)?it.forEach(function(ot){Util._isNumber(ot)||Util.warn('"'+g+'" attribute has non numeric element '+ot+". Make sure that all elements are numbers.")}):Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a array of numbers.')),it}}function getBooleanValidator(){if(Konva$2.isUnminified)return function(it,g){return it===!0||it===!1||Util.warn(_formatValue(it)+' is a not valid value for "'+g+'" attribute. The value should be a boolean.'),it}}function getComponentValidator(it){if(Konva$2.isUnminified)return function(g,et){return g==null||Util.isObject(g)||Util.warn(_formatValue(g)+' is a not valid value for "'+et+'" attribute. The value should be an object with properties '+it),g}}const GET="get",SET$1="set",Factory={addGetterSetter(it,g,et,ot,ut){Factory.addGetter(it,g,et),Factory.addSetter(it,g,ot,ut),Factory.addOverloadedGetterSetter(it,g)},addGetter(it,g,et){const ot=GET+Util._capitalize(g);it.prototype[ot]=it.prototype[ot]||function(){const ut=this.attrs[g];return ut===void 0?et:ut}},addSetter(it,g,et,ot){const ut=SET$1+Util._capitalize(g);it.prototype[ut]||Factory.overWriteSetter(it,g,et,ot)},overWriteSetter(it,g,et,ot){const ut=SET$1+Util._capitalize(g);it.prototype[ut]=function(ct){return et&&ct!==void 0&&ct!==null&&(ct=et.call(this,ct,g)),this._setAttr(g,ct),ot&&ot.call(this),this}},addComponentsGetterSetter(it,g,et,ot,ut){const ct=et.length,dt=Util._capitalize,ft=GET+dt(g),St=SET$1+dt(g);it.prototype[ft]=function(){const Tt={};for(let Rt=0;Rt<ct;Rt++){const Ft=et[Rt];Tt[Ft]=this.getAttr(g+dt(Ft))}return Tt};const kt=getComponentValidator(et);it.prototype[St]=function(Tt){const Rt=this.attrs[g];ot&&(Tt=ot.call(this,Tt,g)),kt&&kt.call(this,Tt,g);for(const Ft in Tt)Tt.hasOwnProperty(Ft)&&this._setAttr(g+dt(Ft),Tt[Ft]);return Tt||et.forEach(Ft=>{this._setAttr(g+dt(Ft),void 0)}),this._fireChangeEvent(g,Rt,Tt),ut&&ut.call(this),this},Factory.addOverloadedGetterSetter(it,g)},addOverloadedGetterSetter(it,g){const et=Util._capitalize(g),ot=SET$1+et,ut=GET+et;it.prototype[g]=function(){return arguments.length?(this[ot](arguments[0]),this):this[ut]()}},addDeprecatedGetterSetter(it,g,et,ot){Util.error("Adding deprecated "+g);const ut=GET+Util._capitalize(g),ct=g+" property is deprecated and will be removed soon. Look at Konva change log for more information.";it.prototype[ut]=function(){Util.error(ct);const dt=this.attrs[g];return dt===void 0?et:dt},Factory.addSetter(it,g,ot,function(){Util.error(ct)}),Factory.addOverloadedGetterSetter(it,g)},backCompat(it,g){Util.each(g,function(et,ot){const ut=it.prototype[ot],ct=GET+Util._capitalize(et),dt=SET$1+Util._capitalize(et);function ft(){ut.apply(this,arguments),Util.error('"'+et+'" method is deprecated and will be removed soon. Use ""'+ot+'" instead.')}it.prototype[et]=ft,it.prototype[ct]=ft,it.prototype[dt]=ft})},afterSetFilter(){this._filterUpToDate=!1}};function parseCSSFilters(it){const g=/(\w+)\(([^)]+)\)/g;let et;for(;(et=g.exec(it))!==null;){const[,ot,ut]=et;switch(ot){case"blur":{const ct=parseFloat(ut.replace("px",""));return function(dt){this.blurRadius(ct*.5);const ft=Konva$2.Filters;ft&&ft.Blur&&ft.Blur.call(this,dt)}}case"brightness":{const ct=ut.includes("%")?parseFloat(ut)/100:parseFloat(ut);return function(dt){this.brightness(ct);const ft=Konva$2.Filters;ft&&ft.Brightness&&ft.Brightness.call(this,dt)}}case"contrast":{const ct=parseFloat(ut);return function(dt){const ft=100*(Math.sqrt(ct)-1);this.contrast(ft);const St=Konva$2.Filters;St&&St.Contrast&&St.Contrast.call(this,dt)}}case"grayscale":return function(ct){const dt=Konva$2.Filters;dt&&dt.Grayscale&&dt.Grayscale.call(this,ct)};case"sepia":return function(ct){const dt=Konva$2.Filters;dt&&dt.Sepia&&dt.Sepia.call(this,ct)};case"invert":return function(ct){const dt=Konva$2.Filters;dt&&dt.Invert&&dt.Invert.call(this,ct)};default:Util.warn(`CSS filter "${ot}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const ABSOLUTE_OPACITY="absoluteOpacity",ALL_LISTENERS="allEventListeners",ABSOLUTE_TRANSFORM="absoluteTransform",ABSOLUTE_SCALE="absoluteScale",CANVAS="canvas",CHANGE="Change",CHILDREN="children",KONVA="konva",LISTENING="listening",MOUSEENTER$1="mouseenter",MOUSELEAVE$1="mouseleave",POINTERENTER$1="pointerenter",POINTERLEAVE$1="pointerleave",TOUCHENTER="touchenter",TOUCHLEAVE="touchleave",SET="set",SHAPE="Shape",SPACE$1=" ",STAGE$1="stage",TRANSFORM="transform",UPPER_STAGE="Stage",VISIBLE="visible",TRANSFORM_CHANGE_STR$1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(SPACE$1);let idCounter$1=1,Node$1=class vR{constructor(g){this._id=idCounter$1++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(g),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(g){(g===TRANSFORM||g===ABSOLUTE_TRANSFORM)&&this._cache.get(g)?this._cache.get(g).dirty=!0:g?this._cache.delete(g):this._cache.clear()}_getCache(g,et){let ot=this._cache.get(g);return(ot===void 0||(g===TRANSFORM||g===ABSOLUTE_TRANSFORM)&&ot.dirty===!0)&&(ot=et.call(this),this._cache.set(g,ot)),ot}_calculate(g,et,ot){if(!this._attachedDepsListeners.get(g)){const ut=et.map(ct=>ct+"Change.konva").join(SPACE$1);this.on(ut,()=>{this._clearCache(g)}),this._attachedDepsListeners.set(g,!0)}return this._getCache(g,ot)}_getCanvasCache(){return this._cache.get(CANVAS)}_clearSelfAndDescendantCache(g){this._clearCache(g),g===ABSOLUTE_TRANSFORM&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(CANVAS)){const{scene:g,filter:et,hit:ot,buffer:ut}=this._cache.get(CANVAS);Util.releaseCanvas(g,et,ot,ut),this._cache.delete(CANVAS)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(g){const et=g||{};let ot={};(et.x===void 0||et.y===void 0||et.width===void 0||et.height===void 0)&&(ot=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let ut=Math.ceil(et.width||ot.width),ct=Math.ceil(et.height||ot.height),dt=et.pixelRatio,ft=et.x===void 0?Math.floor(ot.x):et.x,St=et.y===void 0?Math.floor(ot.y):et.y,kt=et.offset||0,Tt=et.drawBorder||!1,Rt=et.hitCanvasPixelRatio||1;if(!ut||!ct){Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const Ft=Math.abs(Math.round(ot.x)-ft)>.5?1:0,jt=Math.abs(Math.round(ot.y)-St)>.5?1:0;ut+=kt*2+Ft,ct+=kt*2+jt,ft-=kt,St-=kt;const Bt=new SceneCanvas({pixelRatio:dt,width:ut,height:ct}),zt=new SceneCanvas({pixelRatio:dt,width:0,height:0,willReadFrequently:!0}),Ht=new HitCanvas({pixelRatio:Rt,width:ut,height:ct}),Ut=Bt.getContext(),Kt=Ht.getContext(),Yt=new SceneCanvas({width:Bt.width/Bt.pixelRatio+Math.abs(ft),height:Bt.height/Bt.pixelRatio+Math.abs(St),pixelRatio:Bt.pixelRatio}),er=Yt.getContext();return Ht.isCache=!0,Bt.isCache=!0,this._cache.delete(CANVAS),this._filterUpToDate=!1,et.imageSmoothingEnabled===!1&&(Bt.getContext()._context.imageSmoothingEnabled=!1,zt.getContext()._context.imageSmoothingEnabled=!1),Ut.save(),Kt.save(),er.save(),Ut.translate(-ft,-St),Kt.translate(-ft,-St),er.translate(-ft,-St),Yt.x=ft,Yt.y=St,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this.drawScene(Bt,this,Yt),this.drawHit(Ht,this),this._isUnderCache=!1,Ut.restore(),Kt.restore(),Tt&&(Ut.save(),Ut.beginPath(),Ut.rect(0,0,ut,ct),Ut.closePath(),Ut.setAttr("strokeStyle","red"),Ut.setAttr("lineWidth",5),Ut.stroke(),Ut.restore()),this._cache.set(CANVAS,{scene:Bt,filter:zt,hit:Ht,buffer:Yt,x:ft,y:St}),this._requestDraw(),this}isCached(){return this._cache.has(CANVAS)}getClientRect(g){throw new Error('abstract "getClientRect" method call')}_transformedRect(g,et){const ot=[{x:g.x,y:g.y},{x:g.x+g.width,y:g.y},{x:g.x+g.width,y:g.y+g.height},{x:g.x,y:g.y+g.height}];let ut=1/0,ct=1/0,dt=-1/0,ft=-1/0;const St=this.getAbsoluteTransform(et);return ot.forEach(function(kt){const Tt=St.point(kt);ut===void 0&&(ut=dt=Tt.x,ct=ft=Tt.y),ut=Math.min(ut,Tt.x),ct=Math.min(ct,Tt.y),dt=Math.max(dt,Tt.x),ft=Math.max(ft,Tt.y)}),{x:ut,y:ct,width:dt-ut,height:ft-ct}}_drawCachedSceneCanvas(g){g.save(),g._applyOpacity(this),g._applyGlobalCompositeOperation(this);const et=this._getCanvasCache();g.translate(et.x,et.y);const ot=this._getCachedSceneCanvas(),ut=ot.pixelRatio;g.drawImage(ot._canvas,0,0,ot.width/ut,ot.height/ut),g.restore()}_drawCachedHitCanvas(g){const et=this._getCanvasCache(),ot=et.hit;g.save(),g.translate(et.x,et.y),g.drawImage(ot._canvas,0,0,ot.width/ot.pixelRatio,ot.height/ot.pixelRatio),g.restore()}_getCachedSceneCanvas(){let g=this.filters(),et=this._getCanvasCache(),ot=et.scene,ut=et.filter,ct=ut.getContext(),dt,ft,St,kt;if(!g||g.length===0)return ot;if(this._filterUpToDate)return ut;let Tt=!0;for(let Ft=0;Ft<g.length;Ft++)if(typeof g[Ft]=="string"&&isCSSFiltersSupported(),typeof g[Ft]!="string"||!isCSSFiltersSupported()){Tt=!1;break}const Rt=ot.pixelRatio;if(ut.setSize(ot.width/ot.pixelRatio,ot.height/ot.pixelRatio),Tt){const Ft=g.join(" ");return ct.save(),ct.setAttr("filter",Ft),ct.drawImage(ot._canvas,0,0,ot.getWidth()/Rt,ot.getHeight()/Rt),ct.restore(),this._filterUpToDate=!0,ut}try{for(dt=g.length,ct.clear(),ct.drawImage(ot._canvas,0,0,ot.getWidth()/Rt,ot.getHeight()/Rt),ft=ct.getImageData(0,0,ut.getWidth(),ut.getHeight()),St=0;St<dt;St++)kt=g[St],typeof kt=="string"&&(kt=parseCSSFilters(kt)),kt.call(this,ft),ct.putImageData(ft,0,0)}catch(Ft){Util.error("Unable to apply filter. "+Ft.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,ut}on(g,et){if(this._cache&&this._cache.delete(ALL_LISTENERS),arguments.length===3)return this._delegate.apply(this,arguments);const ot=g.split(SPACE$1);for(let ut=0;ut<ot.length;ut++){const dt=ot[ut].split("."),ft=dt[0],St=dt[1]||"";this.eventListeners[ft]||(this.eventListeners[ft]=[]),this.eventListeners[ft].push({name:St,handler:et})}return this}off(g,et){let ot=(g||"").split(SPACE$1),ut=ot.length,ct,dt,ft,St,kt,Tt;if(this._cache&&this._cache.delete(ALL_LISTENERS),!g)for(dt in this.eventListeners)this._off(dt);for(ct=0;ct<ut;ct++)if(ft=ot[ct],St=ft.split("."),kt=St[0],Tt=St[1],kt)this.eventListeners[kt]&&this._off(kt,Tt,et);else for(dt in this.eventListeners)this._off(dt,Tt,et);return this}dispatchEvent(g){const et={target:this,type:g.type,evt:g};return this.fire(g.type,et),this}addEventListener(g,et){return this.on(g,function(ot){et.call(this,ot.evt)}),this}removeEventListener(g){return this.off(g),this}_delegate(g,et,ot){const ut=this;this.on(g,function(ct){const dt=ct.target.findAncestors(et,!0,ut);for(let ft=0;ft<dt.length;ft++)ct=Util.cloneObject(ct),ct.currentTarget=dt[ft],ot.call(dt[ft],ct)})}remove(){return this.isDragging()&&this.stopDrag(),DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this._clearSelfAndDescendantCache(STAGE$1),this._clearSelfAndDescendantCache(VISIBLE),this._clearSelfAndDescendantCache(LISTENING)}_remove(){this._clearCaches();const g=this.getParent();g&&g.children&&(g.children.splice(this.index,1),g._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(g){const et="get"+Util._capitalize(g);return Util._isFunction(this[et])?this[et]():this.attrs[g]}getAncestors(){let g=this.getParent(),et=[];for(;g;)et.push(g),g=g.getParent();return et}getAttrs(){return this.attrs||{}}setAttrs(g){return this._batchTransformChanges(()=>{let et,ot;if(!g)return this;for(et in g)et!==CHILDREN&&(ot=SET+Util._capitalize(et),Util._isFunction(this[ot])?this[ot](g[et]):this._setAttr(et,g[et]))}),this}isListening(){return this._getCache(LISTENING,this._isListening)}_isListening(g){if(!this.listening())return!1;const ot=this.getParent();return ot&&ot!==g&&this!==g?ot._isListening(g):!0}isVisible(){return this._getCache(VISIBLE,this._isVisible)}_isVisible(g){if(!this.visible())return!1;const ot=this.getParent();return ot&&ot!==g&&this!==g?ot._isVisible(g):!0}shouldDrawHit(g,et=!1){if(g)return this._isVisible(g)&&this._isListening(g);const ot=this.getLayer();let ut=!1;DD._dragElements.forEach(dt=>{dt.dragStatus==="dragging"&&(dt.node.nodeType==="Stage"||dt.node.getLayer()===ot)&&(ut=!0)});const ct=!et&&!Konva$2.hitOnDragEnabled&&(ut||Konva$2.isTransforming());return this.isListening()&&this.isVisible()&&!ct}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let g=this.getDepth(),et=this,ot=0,ut,ct,dt,ft;function St(Tt){for(ut=[],ct=Tt.length,dt=0;dt<ct;dt++)ft=Tt[dt],ot++,ft.nodeType!==SHAPE&&(ut=ut.concat(ft.getChildren().slice())),ft._id===et._id&&(dt=ct);ut.length>0&&ut[0].getDepth()<=g&&St(ut)}const kt=this.getStage();return et.nodeType!==UPPER_STAGE&&kt&&St(kt.getChildren()),ot}getDepth(){let g=0,et=this.parent;for(;et;)g++,et=et.parent;return g}_batchTransformChanges(g){this._batchingTransformChange=!0,g(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)),this._needClearTransformCache=!1}setPosition(g){return this._batchTransformChanges(()=>{this.x(g.x),this.y(g.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const g=this.getStage();if(!g)return null;const et=g.getPointerPosition();if(!et)return null;const ot=this.getAbsoluteTransform().copy();return ot.invert(),ot.point(et)}getAbsolutePosition(g){let et=!1,ot=this.parent;for(;ot;){if(ot.isCached()){et=!0;break}ot=ot.parent}et&&!g&&(g=!0);const ut=this.getAbsoluteTransform(g).getMatrix(),ct=new Transform,dt=this.offset();return ct.m=ut.slice(),ct.translate(dt.x,dt.y),ct.getTranslation()}setAbsolutePosition(g){const{x:et,y:ot,...ut}=this._clearTransform();this.attrs.x=et,this.attrs.y=ot,this._clearCache(TRANSFORM);const ct=this._getAbsoluteTransform().copy();return ct.invert(),ct.translate(g.x,g.y),g={x:this.attrs.x+ct.getTranslation().x,y:this.attrs.y+ct.getTranslation().y},this._setTransform(ut),this.setPosition({x:g.x,y:g.y}),this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this}_setTransform(g){let et;for(et in g)this.attrs[et]=g[et]}_clearTransform(){const g={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,g}move(g){let et=g.x,ot=g.y,ut=this.x(),ct=this.y();return et!==void 0&&(ut+=et),ot!==void 0&&(ct+=ot),this.setPosition({x:ut,y:ct}),this}_eachAncestorReverse(g,et){let ot=[],ut=this.getParent(),ct,dt;if(!(et&&et._id===this._id)){for(ot.unshift(this);ut&&(!et||ut._id!==et._id);)ot.unshift(ut),ut=ut.parent;for(ct=ot.length,dt=0;dt<ct;dt++)g(ot[dt])}}rotate(g){return this.rotation(this.rotation()+g),this}moveToTop(){if(!this.parent)return Util.warn("Node has no parent. moveToTop function is ignored."),!1;const g=this.index,et=this.parent.getChildren().length;return g<et-1?(this.parent.children.splice(g,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Util.warn("Node has no parent. moveUp function is ignored."),!1;const g=this.index,et=this.parent.getChildren().length;return g<et-1?(this.parent.children.splice(g,1),this.parent.children.splice(g+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Util.warn("Node has no parent. moveDown function is ignored."),!1;const g=this.index;return g>0?(this.parent.children.splice(g,1),this.parent.children.splice(g-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const g=this.index;return g>0?(this.parent.children.splice(g,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(g){if(!this.parent)return Util.warn("Node has no parent. zIndex parameter is ignored."),this;(g<0||g>=this.parent.children.length)&&Util.warn("Unexpected value "+g+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const et=this.index;return this.parent.children.splice(et,1),this.parent.children.splice(g,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ABSOLUTE_OPACITY,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let g=this.opacity();const et=this.getParent();return et&&!et._isUnderCache&&(g*=et.getAbsoluteOpacity()),g}moveTo(g){return this.getParent()!==g&&(this._remove(),g.add(this)),this}toObject(){let g=this.getAttrs(),et,ot,ut,ct,dt;const ft={attrs:{},className:this.getClassName()};for(et in g)ot=g[et],dt=Util.isObject(ot)&&!Util._isPlainObject(ot)&&!Util._isArray(ot),!dt&&(ut=typeof this[et]=="function"&&this[et],delete g[et],ct=ut?ut.call(this):null,g[et]=ot,ct!==ot&&(ft.attrs[et]=ot));return Util._prepareToStringify(ft)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(g,et,ot){const ut=[];et&&this._isMatch(g)&&ut.push(this);let ct=this.parent;for(;ct;){if(ct===ot)return ut;ct._isMatch(g)&&ut.push(ct),ct=ct.parent}return ut}isAncestorOf(g){return!1}findAncestor(g,et,ot){return this.findAncestors(g,et,ot)[0]}_isMatch(g){if(!g)return!1;if(typeof g=="function")return g(this);let et=g.replace(/ /g,"").split(","),ot=et.length,ut,ct;for(ut=0;ut<ot;ut++)if(ct=et[ut],Util.isValidSelector(ct)||(Util.warn('Selector "'+ct+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Util.warn("Konva is awesome, right?")),ct.charAt(0)==="#"){if(this.id()===ct.slice(1))return!0}else if(ct.charAt(0)==="."){if(this.hasName(ct.slice(1)))return!0}else if(this.className===ct||this.nodeType===ct)return!0;return!1}getLayer(){const g=this.getParent();return g?g.getLayer():null}getStage(){return this._getCache(STAGE$1,this._getStage)}_getStage(){const g=this.getParent();return g?g.getStage():null}fire(g,et={},ot){return et.target=et.target||this,ot?this._fireAndBubble(g,et):this._fire(g,et),this}getAbsoluteTransform(g){return g?this._getAbsoluteTransform(g):this._getCache(ABSOLUTE_TRANSFORM,this._getAbsoluteTransform)}_getAbsoluteTransform(g){let et;if(g)return et=new Transform,this._eachAncestorReverse(function(ot){const ut=ot.transformsEnabled();ut==="all"?et.multiply(ot.getTransform()):ut==="position"&&et.translate(ot.x()-ot.offsetX(),ot.y()-ot.offsetY())},g),et;{et=this._cache.get(ABSOLUTE_TRANSFORM)||new Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(et):et.reset();const ot=this.transformsEnabled();if(ot==="all")et.multiply(this.getTransform());else if(ot==="position"){const ut=this.attrs.x||0,ct=this.attrs.y||0,dt=this.attrs.offsetX||0,ft=this.attrs.offsetY||0;et.translate(ut-dt,ct-ft)}return et.dirty=!1,et}}getAbsoluteScale(g){let et=this;for(;et;)et._isUnderCache&&(g=et),et=et.getParent();const ut=this.getAbsoluteTransform(g).decompose();return{x:ut.scaleX,y:ut.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(TRANSFORM,this._getTransform)}_getTransform(){var g,et;const ot=this._cache.get(TRANSFORM)||new Transform;ot.reset();const ut=this.x(),ct=this.y(),dt=Konva$2.getAngle(this.rotation()),ft=(g=this.attrs.scaleX)!==null&&g!==void 0?g:1,St=(et=this.attrs.scaleY)!==null&&et!==void 0?et:1,kt=this.attrs.skewX||0,Tt=this.attrs.skewY||0,Rt=this.attrs.offsetX||0,Ft=this.attrs.offsetY||0;return(ut!==0||ct!==0)&&ot.translate(ut,ct),dt!==0&&ot.rotate(dt),(kt!==0||Tt!==0)&&ot.skew(kt,Tt),(ft!==1||St!==1)&&ot.scale(ft,St),(Rt!==0||Ft!==0)&&ot.translate(-1*Rt,-1*Ft),ot.dirty=!1,ot}clone(g){let et=Util.cloneObject(this.attrs),ot,ut,ct,dt,ft;for(ot in g)et[ot]=g[ot];const St=new this.constructor(et);for(ot in this.eventListeners)for(ut=this.eventListeners[ot],ct=ut.length,dt=0;dt<ct;dt++)ft=ut[dt],ft.name.indexOf(KONVA)<0&&(St.eventListeners[ot]||(St.eventListeners[ot]=[]),St.eventListeners[ot].push(ft));return St}_toKonvaCanvas(g){g=g||{};const et=this.getClientRect(),ot=this.getStage(),ut=g.x!==void 0?g.x:Math.floor(et.x),ct=g.y!==void 0?g.y:Math.floor(et.y),dt=g.pixelRatio||1,ft=new SceneCanvas({width:g.width||Math.ceil(et.width)||(ot?ot.width():0),height:g.height||Math.ceil(et.height)||(ot?ot.height():0),pixelRatio:dt}),St=ft.getContext(),kt=new SceneCanvas({width:ft.width/ft.pixelRatio+Math.abs(ut),height:ft.height/ft.pixelRatio+Math.abs(ct),pixelRatio:ft.pixelRatio});return g.imageSmoothingEnabled===!1&&(St._context.imageSmoothingEnabled=!1),St.save(),(ut||ct)&&St.translate(-1*ut,-1*ct),this.drawScene(ft,void 0,kt),St.restore(),ft}toCanvas(g){return this._toKonvaCanvas(g)._canvas}toDataURL(g){g=g||{};const et=g.mimeType||null,ot=g.quality||null,ut=this._toKonvaCanvas(g).toDataURL(et,ot);return g.callback&&g.callback(ut),ut}toImage(g){return new Promise((et,ot)=>{try{const ut=g==null?void 0:g.callback;ut&&delete g.callback,Util._urlToImage(this.toDataURL(g),function(ct){et(ct),ut==null||ut(ct)})}catch(ut){ot(ut)}})}toBlob(g){return new Promise((et,ot)=>{try{const ut=g==null?void 0:g.callback;ut&&delete g.callback,this.toCanvas(g).toBlob(ct=>{et(ct),ut==null||ut(ct)},g==null?void 0:g.mimeType,g==null?void 0:g.quality)}catch(ut){ot(ut)}})}setSize(g){return this.width(g.width),this.height(g.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Konva$2.dragDistance}_off(g,et,ot){let ut=this.eventListeners[g],ct,dt,ft;for(ct=0;ct<ut.length;ct++)if(dt=ut[ct].name,ft=ut[ct].handler,(dt!=="konva"||et==="konva")&&(!et||dt===et)&&(!ot||ot===ft)){if(ut.splice(ct,1),ut.length===0){delete this.eventListeners[g];break}ct--}}_fireChangeEvent(g,et,ot){this._fire(g+CHANGE,{oldVal:et,newVal:ot})}addName(g){if(!this.hasName(g)){const et=this.name(),ot=et?et+" "+g:g;this.name(ot)}return this}hasName(g){if(!g)return!1;const et=this.name();return et?(et||"").split(/\s/g).indexOf(g)!==-1:!1}removeName(g){const et=(this.name()||"").split(/\s/g),ot=et.indexOf(g);return ot!==-1&&(et.splice(ot,1),this.name(et.join(" "))),this}setAttr(g,et){const ot=this[SET+Util._capitalize(g)];return Util._isFunction(ot)?ot.call(this,et):this._setAttr(g,et),this}_requestDraw(){if(Konva$2.autoDrawEnabled){const g=this.getLayer()||this.getStage();g==null||g.batchDraw()}}_setAttr(g,et){const ot=this.attrs[g];ot===et&&!Util.isObject(et)||(et==null?delete this.attrs[g]:this.attrs[g]=et,this._shouldFireChangeEvents&&this._fireChangeEvent(g,ot,et),this._requestDraw())}_setComponentAttr(g,et,ot){let ut;ot!==void 0&&(ut=this.attrs[g],ut||(this.attrs[g]=this.getAttr(g)),this.attrs[g][et]=ot,this._fireChangeEvent(g,ut,ot))}_fireAndBubble(g,et,ot){et&&this.nodeType===SHAPE&&(et.target=this);const ut=[MOUSEENTER$1,MOUSELEAVE$1,POINTERENTER$1,POINTERLEAVE$1,TOUCHENTER,TOUCHLEAVE];if(!(ut.indexOf(g)!==-1&&(ot&&(this===ot||this.isAncestorOf&&this.isAncestorOf(ot))||this.nodeType==="Stage"&&!ot))){this._fire(g,et);const dt=ut.indexOf(g)!==-1&&ot&&ot.isAncestorOf&&ot.isAncestorOf(this)&&!ot.isAncestorOf(this.parent);(et&&!et.cancelBubble||!et)&&this.parent&&this.parent.isListening()&&!dt&&(ot&&ot.parent?this._fireAndBubble.call(this.parent,g,et,ot):this._fireAndBubble.call(this.parent,g,et))}}_getProtoListeners(g){var et,ot,ut;const ct=(et=this._cache.get(ALL_LISTENERS))!==null&&et!==void 0?et:{};let dt=ct==null?void 0:ct[g];if(dt===void 0){dt=[];let ft=Object.getPrototypeOf(this);for(;ft;){const St=(ut=(ot=ft.eventListeners)===null||ot===void 0?void 0:ot[g])!==null&&ut!==void 0?ut:[];dt.push(...St),ft=Object.getPrototypeOf(ft)}ct[g]=dt,this._cache.set(ALL_LISTENERS,ct)}return dt}_fire(g,et){et=et||{},et.currentTarget=this,et.type=g;const ot=this._getProtoListeners(g);if(ot)for(let ct=0;ct<ot.length;ct++)ot[ct].handler.call(this,et);const ut=this.eventListeners[g];if(ut)for(let ct=0;ct<ut.length;ct++)ut[ct].handler.call(this,et)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(g){const et=g?g.pointerId:void 0,ot=this.getStage(),ut=this.getAbsolutePosition();if(!ot)return;const ct=ot._getPointerById(et)||ot._changedPointerPositions[0]||ut;DD._dragElements.set(this._id,{node:this,startPointerPos:ct,offset:{x:ct.x-ut.x,y:ct.y-ut.y},dragStatus:"ready",pointerId:et})}startDrag(g,et=!0){DD._dragElements.has(this._id)||this._createDragElement(g);const ot=DD._dragElements.get(this._id);ot.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:g&&g.evt},et)}_setDragPosition(g,et){const ot=this.getStage()._getPointerById(et.pointerId);if(!ot)return;let ut={x:ot.x-et.offset.x,y:ot.y-et.offset.y};const ct=this.dragBoundFunc();if(ct!==void 0){const dt=ct.call(this,ut,g);dt?ut=dt:Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==ut.x||this._lastPos.y!==ut.y)&&(this.setAbsolutePosition(ut),this._requestDraw()),this._lastPos=ut}stopDrag(g){const et=DD._dragElements.get(this._id);et&&(et.dragStatus="stopped"),DD._endDragBefore(g),DD._endDragAfter(g)}setDraggable(g){this._setAttr("draggable",g),this._dragChange()}isDragging(){const g=DD._dragElements.get(this._id);return g?g.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(g){if(!(!(g.evt.button!==void 0)||Konva$2.dragButtons.indexOf(g.evt.button)>=0)||this.isDragging())return;let ut=!1;DD._dragElements.forEach(ct=>{this.isAncestorOf(ct.node)&&(ut=!0)}),ut||this._createDragElement(g)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const et=DD._dragElements.get(this._id),ot=et&&et.dragStatus==="dragging",ut=et&&et.dragStatus==="ready";ot?this.stopDrag():ut&&DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(g={x:0,y:0}){const et=this.getStage();if(!et)return!1;const ot={x:-g.x,y:-g.y,width:et.width()+2*g.x,height:et.height()+2*g.y};return Util.haveIntersection(ot,this.getClientRect())}static create(g,et){return Util._isString(g)&&(g=JSON.parse(g)),this._createNode(g,et)}static _createNode(g,et){let ot=vR.prototype.getClassName.call(g),ut=g.children,ct,dt,ft;et&&(g.attrs.container=et),Konva$2[ot]||(Util.warn('Can not find a node with class name "'+ot+'". Fallback to "Shape".'),ot="Shape");const St=Konva$2[ot];if(ct=new St(g.attrs),ut)for(dt=ut.length,ft=0;ft<dt;ft++)ct.add(vR._createNode(ut[ft]));return ct}};Node$1.prototype.nodeType="Node";Node$1.prototype._attrsAffectingSize=[];Node$1.prototype.eventListeners={};Node$1.prototype.on.call(Node$1.prototype,TRANSFORM_CHANGE_STR$1,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)});Node$1.prototype.on.call(Node$1.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(VISIBLE)});Node$1.prototype.on.call(Node$1.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(LISTENING)});Node$1.prototype.on.call(Node$1.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY)});const addGetterSetter=Factory.addGetterSetter;addGetterSetter(Node$1,"zIndex");addGetterSetter(Node$1,"absolutePosition");addGetterSetter(Node$1,"position");addGetterSetter(Node$1,"x",0,getNumberValidator());addGetterSetter(Node$1,"y",0,getNumberValidator());addGetterSetter(Node$1,"globalCompositeOperation","source-over",getStringValidator());addGetterSetter(Node$1,"opacity",1,getNumberValidator());addGetterSetter(Node$1,"name","",getStringValidator());addGetterSetter(Node$1,"id","",getStringValidator());addGetterSetter(Node$1,"rotation",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"scale",["x","y"]);addGetterSetter(Node$1,"scaleX",1,getNumberValidator());addGetterSetter(Node$1,"scaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"skew",["x","y"]);addGetterSetter(Node$1,"skewX",0,getNumberValidator());addGetterSetter(Node$1,"skewY",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"offset",["x","y"]);addGetterSetter(Node$1,"offsetX",0,getNumberValidator());addGetterSetter(Node$1,"offsetY",0,getNumberValidator());addGetterSetter(Node$1,"dragDistance",void 0,getNumberValidator());addGetterSetter(Node$1,"width",0,getNumberValidator());addGetterSetter(Node$1,"height",0,getNumberValidator());addGetterSetter(Node$1,"listening",!0,getBooleanValidator());addGetterSetter(Node$1,"preventDefault",!0,getBooleanValidator());addGetterSetter(Node$1,"filters",void 0,function(it){return this._filterUpToDate=!1,it});addGetterSetter(Node$1,"visible",!0,getBooleanValidator());addGetterSetter(Node$1,"transformsEnabled","all",getStringValidator());addGetterSetter(Node$1,"size");addGetterSetter(Node$1,"dragBoundFunc");addGetterSetter(Node$1,"draggable",!1,getBooleanValidator());Factory.backCompat(Node$1,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Container extends Node$1{constructor(){super(...arguments),this.children=[]}getChildren(g){const et=this.children||[];return g?et.filter(g):et}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(g=>{g.parent=null,g.index=0,g.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(g=>{g.parent=null,g.index=0,g.destroy()}),this.children=[],this._requestDraw(),this}add(...g){if(g.length===0)return this;if(g.length>1){for(let ot=0;ot<g.length;ot++)this.add(g[ot]);return this}const et=g[0];return et.getParent()?(et.moveTo(this),this):(this._validateAdd(et),et.index=this.getChildren().length,et.parent=this,et._clearCaches(),this.getChildren().push(et),this._fire("add",{child:et}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(g){return this._generalFind(g,!1)}findOne(g){const et=this._generalFind(g,!0);return et.length>0?et[0]:void 0}_generalFind(g,et){const ot=[];return this._descendants(ut=>{const ct=ut._isMatch(g);return ct&&ot.push(ut),!!(ct&&et)}),ot}_descendants(g){let et=!1;const ot=this.getChildren();for(const ut of ot){if(et=g(ut),et)return!0;if(ut.hasChildren()&&(et=ut._descendants(g),et))return!0}return!1}toObject(){const g=Node$1.prototype.toObject.call(this);return g.children=[],this.getChildren().forEach(et=>{g.children.push(et.toObject())}),g}isAncestorOf(g){let et=g.getParent();for(;et;){if(et._id===this._id)return!0;et=et.getParent()}return!1}clone(g){const et=Node$1.prototype.clone.call(this,g);return this.getChildren().forEach(function(ot){et.add(ot.clone())}),et}getAllIntersections(g){const et=[];return this.find("Shape").forEach(ot=>{ot.isVisible()&&ot.intersects(g)&&et.push(ot)}),et}_clearSelfAndDescendantCache(g){var et;super._clearSelfAndDescendantCache(g),!this.isCached()&&((et=this.children)===null||et===void 0||et.forEach(function(ot){ot._clearSelfAndDescendantCache(g)}))}_setChildrenIndices(){var g;(g=this.children)===null||g===void 0||g.forEach(function(et,ot){et.index=ot}),this._requestDraw()}drawScene(g,et,ot){const ut=this.getLayer(),ct=g||ut&&ut.getCanvas(),dt=ct&&ct.getContext(),ft=this._getCanvasCache(),St=ft&&ft.scene,kt=ct&&ct.isCache;if(!this.isVisible()&&!kt)return this;if(St){dt.save();const Tt=this.getAbsoluteTransform(et).getMatrix();dt.transform(Tt[0],Tt[1],Tt[2],Tt[3],Tt[4],Tt[5]),this._drawCachedSceneCanvas(dt),dt.restore()}else this._drawChildren("drawScene",ct,et,ot);return this}drawHit(g,et){if(!this.shouldDrawHit(et))return this;const ot=this.getLayer(),ut=g||ot&&ot.hitCanvas,ct=ut&&ut.getContext(),dt=this._getCanvasCache();if(dt&&dt.hit){ct.save();const St=this.getAbsoluteTransform(et).getMatrix();ct.transform(St[0],St[1],St[2],St[3],St[4],St[5]),this._drawCachedHitCanvas(ct),ct.restore()}else this._drawChildren("drawHit",ut,et);return this}_drawChildren(g,et,ot,ut){var ct;const dt=et&&et.getContext(),ft=this.clipWidth(),St=this.clipHeight(),kt=this.clipFunc(),Tt=typeof ft=="number"&&typeof St=="number"||kt,Rt=ot===this;if(Tt){dt.save();const jt=this.getAbsoluteTransform(ot);let Bt=jt.getMatrix();dt.transform(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5]),dt.beginPath();let zt;if(kt)zt=kt.call(this,dt,this);else{const Ht=this.clipX(),Ut=this.clipY();dt.rect(Ht||0,Ut||0,ft,St)}dt.clip.apply(dt,zt),Bt=jt.copy().invert().getMatrix(),dt.transform(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5])}const Ft=!Rt&&this.globalCompositeOperation()!=="source-over"&&g==="drawScene";Ft&&(dt.save(),dt._applyGlobalCompositeOperation(this)),(ct=this.children)===null||ct===void 0||ct.forEach(function(jt){jt[g](et,ot,ut)}),Ft&&dt.restore(),Tt&&dt.restore()}getClientRect(g={}){var et;const ot=g.skipTransform,ut=g.relativeTo;let ct,dt,ft,St,kt={x:1/0,y:1/0,width:0,height:0};const Tt=this;(et=this.children)===null||et===void 0||et.forEach(function(jt){if(!jt.visible())return;const Bt=jt.getClientRect({relativeTo:Tt,skipShadow:g.skipShadow,skipStroke:g.skipStroke});Bt.width===0&&Bt.height===0||(ct===void 0?(ct=Bt.x,dt=Bt.y,ft=Bt.x+Bt.width,St=Bt.y+Bt.height):(ct=Math.min(ct,Bt.x),dt=Math.min(dt,Bt.y),ft=Math.max(ft,Bt.x+Bt.width),St=Math.max(St,Bt.y+Bt.height)))});const Rt=this.find("Shape");let Ft=!1;for(let jt=0;jt<Rt.length;jt++)if(Rt[jt]._isVisible(this)){Ft=!0;break}return Ft&&ct!==void 0?kt={x:ct,y:dt,width:ft-ct,height:St-dt}:kt={x:0,y:0,width:0,height:0},ot?kt:this._transformedRect(kt,ut)}}Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]);Factory.addGetterSetter(Container,"clipX",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipY",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipWidth",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipHeight",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipFunc");const Captures=new Map,SUPPORT_POINTER_EVENTS=Konva$2._global.PointerEvent!==void 0;function getCapturedShape(it){return Captures.get(it)}function createEvent(it){return{evt:it,pointerId:it.pointerId}}function hasPointerCapture(it,g){return Captures.get(it)===g}function setPointerCapture(it,g){releaseCapture(it),g.getStage()&&(Captures.set(it,g),SUPPORT_POINTER_EVENTS&&g._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))}function releaseCapture(it,g){const et=Captures.get(it);if(!et)return;const ot=et.getStage();ot&&ot.content,Captures.delete(it),SUPPORT_POINTER_EVENTS&&et._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}const STAGE="Stage",STRING="string",PX="px",MOUSEOUT="mouseout",MOUSELEAVE="mouseleave",MOUSEOVER="mouseover",MOUSEENTER="mouseenter",MOUSEMOVE="mousemove",MOUSEDOWN="mousedown",MOUSEUP="mouseup",POINTERMOVE="pointermove",POINTERDOWN="pointerdown",POINTERUP="pointerup",POINTERCANCEL="pointercancel",LOSTPOINTERCAPTURE="lostpointercapture",POINTEROUT="pointerout",POINTERLEAVE="pointerleave",POINTEROVER="pointerover",POINTERENTER="pointerenter",CONTEXTMENU="contextmenu",TOUCHSTART="touchstart",TOUCHEND="touchend",TOUCHMOVE="touchmove",TOUCHCANCEL="touchcancel",WHEEL="wheel",MAX_LAYERS_NUMBER=5,EVENTS=[[MOUSEENTER,"_pointerenter"],[MOUSEDOWN,"_pointerdown"],[MOUSEMOVE,"_pointermove"],[MOUSEUP,"_pointerup"],[MOUSELEAVE,"_pointerleave"],[TOUCHSTART,"_pointerdown"],[TOUCHMOVE,"_pointermove"],[TOUCHEND,"_pointerup"],[TOUCHCANCEL,"_pointercancel"],[MOUSEOVER,"_pointerover"],[WHEEL,"_wheel"],[CONTEXTMENU,"_contextmenu"],[POINTERDOWN,"_pointerdown"],[POINTERMOVE,"_pointermove"],[POINTERUP,"_pointerup"],[POINTERCANCEL,"_pointercancel"],[POINTERLEAVE,"_pointerleave"],[LOSTPOINTERCAPTURE,"_lostpointercapture"]],EVENTS_MAP={mouse:{[POINTEROUT]:MOUSEOUT,[POINTERLEAVE]:MOUSELEAVE,[POINTEROVER]:MOUSEOVER,[POINTERENTER]:MOUSEENTER,[POINTERMOVE]:MOUSEMOVE,[POINTERDOWN]:MOUSEDOWN,[POINTERUP]:MOUSEUP,[POINTERCANCEL]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[POINTEROUT]:"touchout",[POINTERLEAVE]:"touchleave",[POINTEROVER]:"touchover",[POINTERENTER]:"touchenter",[POINTERMOVE]:TOUCHMOVE,[POINTERDOWN]:TOUCHSTART,[POINTERUP]:TOUCHEND,[POINTERCANCEL]:TOUCHCANCEL,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[POINTEROUT]:POINTEROUT,[POINTERLEAVE]:POINTERLEAVE,[POINTEROVER]:POINTEROVER,[POINTERENTER]:POINTERENTER,[POINTERMOVE]:POINTERMOVE,[POINTERDOWN]:POINTERDOWN,[POINTERUP]:POINTERUP,[POINTERCANCEL]:POINTERCANCEL,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},getEventType=it=>it.indexOf("pointer")>=0?"pointer":it.indexOf("touch")>=0?"touch":"mouse",getEventsMap=it=>{const g=getEventType(it);if(g==="pointer")return Konva$2.pointerEventsEnabled&&EVENTS_MAP.pointer;if(g==="touch")return EVENTS_MAP.touch;if(g==="mouse")return EVENTS_MAP.mouse};function checkNoClip(it={}){return(it.clipFunc||it.clipWidth||it.clipHeight)&&Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),it}const NO_POINTERS_MESSAGE="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",stages=[];let Stage$1=class extends Container{constructor(g){super(checkNoClip(g)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{checkNoClip(this.attrs)}),this._checkVisibility()}_validateAdd(g){const et=g.getType()==="Layer",ot=g.getType()==="FastLayer";et||ot||Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const g=this.visible()?"":"none";this.content.style.display=g}setContainer(g){if(typeof g===STRING){let et;if(g.charAt(0)==="."){const ot=g.slice(1);g=document.getElementsByClassName(ot)[0]}else g.charAt(0)!=="#"?et=g:et=g.slice(1),g=document.getElementById(et);if(!g)throw"Can not find container in document with id "+et}return this._setAttr("container",g),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),g.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const g=this.children,et=g.length;for(let ot=0;ot<et;ot++)g[ot].clear();return this}clone(g){return g||(g={}),g.container=typeof document<"u"&&document.createElement("div"),Container.prototype.clone.call(this,g)}destroy(){super.destroy();const g=this.content;g&&Util._isInDocument(g)&&this.container().removeChild(g);const et=stages.indexOf(this);return et>-1&&stages.splice(et,1),Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const g=this._pointerPositions[0]||this._changedPointerPositions[0];return g?{x:g.x,y:g.y}:(Util.warn(NO_POINTERS_MESSAGE),null)}_getPointerById(g){return this._pointerPositions.find(et=>et.id===g)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(g){g={...g},g.x=g.x||0,g.y=g.y||0,g.width=g.width||this.width(),g.height=g.height||this.height();const et=new SceneCanvas({width:g.width,height:g.height,pixelRatio:g.pixelRatio||1}),ot=et.getContext()._context,ut=this.children;return(g.x||g.y)&&ot.translate(-1*g.x,-1*g.y),ut.forEach(function(ct){if(!ct.isVisible())return;const dt=ct._toKonvaCanvas(g);ot.drawImage(dt._canvas,g.x,g.y,dt.getWidth()/dt.getPixelRatio(),dt.getHeight()/dt.getPixelRatio())}),et}getIntersection(g){if(!g)return null;const et=this.children,ot=et.length,ut=ot-1;for(let ct=ut;ct>=0;ct--){const dt=et[ct].getIntersection(g);if(dt)return dt}return null}_resizeDOM(){const g=this.width(),et=this.height();this.content&&(this.content.style.width=g+PX,this.content.style.height=et+PX),this.bufferCanvas.setSize(g,et),this.bufferHitCanvas.setSize(g,et),this.children.forEach(ot=>{ot.setSize({width:g,height:et}),ot.draw()})}add(g,...et){if(arguments.length>1){for(let ut=0;ut<arguments.length;ut++)this.add(arguments[ut]);return this}super.add(g);const ot=this.children.length;return ot>MAX_LAYERS_NUMBER&&Util.warn("The stage has "+ot+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),g.setSize({width:this.width(),height:this.height()}),g.draw(),Konva$2.isBrowser&&this.content.appendChild(g.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(g){return hasPointerCapture(g,this)}setPointerCapture(g){setPointerCapture(g,this)}releaseCapture(g){releaseCapture(g)}getLayers(){return this.children}_bindContentEvents(){Konva$2.isBrowser&&EVENTS.forEach(([g,et])=>{this.content.addEventListener(g,ot=>{this[et](ot)},{passive:!1})})}_pointerenter(g){this.setPointersPositions(g);const et=getEventsMap(g.type);et&&this._fire(et.pointerenter,{evt:g,target:this,currentTarget:this})}_pointerover(g){this.setPointersPositions(g);const et=getEventsMap(g.type);et&&this._fire(et.pointerover,{evt:g,target:this,currentTarget:this})}_getTargetShape(g){let et=this[g+"targetShape"];return et&&!et.getStage()&&(et=null),et}_pointerleave(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);const ut=this._getTargetShape(ot),ct=!(Konva$2.isDragging()||Konva$2.isTransforming())||Konva$2.hitOnDragEnabled;ut&&ct?(ut._fireAndBubble(et.pointerout,{evt:g}),ut._fireAndBubble(et.pointerleave,{evt:g}),this._fire(et.pointerleave,{evt:g,target:this,currentTarget:this}),this[ot+"targetShape"]=null):ct&&(this._fire(et.pointerleave,{evt:g,target:this,currentTarget:this}),this._fire(et.pointerout,{evt:g,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);let ut=!1;this._changedPointerPositions.forEach(ct=>{const dt=this.getIntersection(ct);if(DD.justDragged=!1,Konva$2["_"+ot+"ListenClick"]=!0,!dt||!dt.isListening()){this[ot+"ClickStartShape"]=void 0;return}Konva$2.capturePointerEventsEnabled&&dt.setPointerCapture(ct.id),this[ot+"ClickStartShape"]=dt,dt._fireAndBubble(et.pointerdown,{evt:g,pointerId:ct.id}),ut=!0;const ft=g.type.indexOf("touch")>=0;dt.preventDefault()&&g.cancelable&&ft&&g.preventDefault()}),ut||this._fire(et.pointerdown,{evt:g,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;const ut=g.type.indexOf("touch")>=0||g.pointerType==="touch";if(Konva$2.isDragging()&&DD.node.preventDefault()&&g.cancelable&&ut&&g.preventDefault(),this.setPointersPositions(g),!(!(Konva$2.isDragging()||Konva$2.isTransforming())||Konva$2.hitOnDragEnabled))return;const dt={};let ft=!1;const St=this._getTargetShape(ot);this._changedPointerPositions.forEach(kt=>{const Tt=getCapturedShape(kt.id)||this.getIntersection(kt),Rt=kt.id,Ft={evt:g,pointerId:Rt},jt=St!==Tt;if(jt&&St&&(St._fireAndBubble(et.pointerout,{...Ft},Tt),St._fireAndBubble(et.pointerleave,{...Ft},Tt)),Tt){if(dt[Tt._id])return;dt[Tt._id]=!0}Tt&&Tt.isListening()?(ft=!0,jt&&(Tt._fireAndBubble(et.pointerover,{...Ft},St),Tt._fireAndBubble(et.pointerenter,{...Ft},St),this[ot+"targetShape"]=Tt),Tt._fireAndBubble(et.pointermove,{...Ft})):St&&(this._fire(et.pointerover,{evt:g,target:this,currentTarget:this,pointerId:Rt}),this[ot+"targetShape"]=null)}),ft||this._fire(et.pointermove,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(g){const et=getEventsMap(g.type),ot=getEventType(g.type);if(!et)return;this.setPointersPositions(g);const ut=this[ot+"ClickStartShape"],ct=this[ot+"ClickEndShape"],dt={};let ft=!1;this._changedPointerPositions.forEach(St=>{const kt=getCapturedShape(St.id)||this.getIntersection(St);if(kt){if(kt.releaseCapture(St.id),dt[kt._id])return;dt[kt._id]=!0}const Tt=St.id,Rt={evt:g,pointerId:Tt};let Ft=!1;Konva$2["_"+ot+"InDblClickWindow"]?(Ft=!0,clearTimeout(this[ot+"DblTimeout"])):DD.justDragged||(Konva$2["_"+ot+"InDblClickWindow"]=!0,clearTimeout(this[ot+"DblTimeout"])),this[ot+"DblTimeout"]=setTimeout(function(){Konva$2["_"+ot+"InDblClickWindow"]=!1},Konva$2.dblClickWindow),kt&&kt.isListening()?(ft=!0,this[ot+"ClickEndShape"]=kt,kt._fireAndBubble(et.pointerup,{...Rt}),Konva$2["_"+ot+"ListenClick"]&&ut&&ut===kt&&(kt._fireAndBubble(et.pointerclick,{...Rt}),Ft&&ct&&ct===kt&&kt._fireAndBubble(et.pointerdblclick,{...Rt}))):(this[ot+"ClickEndShape"]=null,ft||(this._fire(et.pointerup,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),ft=!0),Konva$2["_"+ot+"ListenClick"]&&this._fire(et.pointerclick,{evt:g,target:this,currentTarget:this,pointerId:Tt}),Ft&&this._fire(et.pointerdblclick,{evt:g,target:this,currentTarget:this,pointerId:Tt}))}),ft||this._fire(et.pointerup,{evt:g,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Konva$2["_"+ot+"ListenClick"]=!1,g.cancelable&&ot!=="touch"&&ot!=="pointer"&&g.preventDefault()}_contextmenu(g){this.setPointersPositions(g);const et=this.getIntersection(this.getPointerPosition());et&&et.isListening()?et._fireAndBubble(CONTEXTMENU,{evt:g}):this._fire(CONTEXTMENU,{evt:g,target:this,currentTarget:this})}_wheel(g){this.setPointersPositions(g);const et=this.getIntersection(this.getPointerPosition());et&&et.isListening()?et._fireAndBubble(WHEEL,{evt:g}):this._fire(WHEEL,{evt:g,target:this,currentTarget:this})}_pointercancel(g){this.setPointersPositions(g);const et=getCapturedShape(g.pointerId)||this.getIntersection(this.getPointerPosition());et&&et._fireAndBubble(POINTERUP,createEvent(g)),releaseCapture(g.pointerId)}_lostpointercapture(g){releaseCapture(g.pointerId)}setPointersPositions(g){const et=this._getContentPosition();let ot=null,ut=null;g=g||window.event,g.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(g.touches,ct=>{this._pointerPositions.push({id:ct.identifier,x:(ct.clientX-et.left)/et.scaleX,y:(ct.clientY-et.top)/et.scaleY})}),Array.prototype.forEach.call(g.changedTouches||g.touches,ct=>{this._changedPointerPositions.push({id:ct.identifier,x:(ct.clientX-et.left)/et.scaleX,y:(ct.clientY-et.top)/et.scaleY})})):(ot=(g.clientX-et.left)/et.scaleX,ut=(g.clientY-et.top)/et.scaleY,this.pointerPos={x:ot,y:ut},this._pointerPositions=[{x:ot,y:ut,id:Util._getFirstPointerId(g)}],this._changedPointerPositions=[{x:ot,y:ut,id:Util._getFirstPointerId(g)}])}_setPointerPosition(g){Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(g)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const g=this.content.getBoundingClientRect();return{top:g.top,left:g.left,scaleX:g.width/this.content.clientWidth||1,scaleY:g.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!Konva$2.isBrowser)return;const g=this.container();if(!g)throw"Stage has no container. A container is required.";g.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),g.appendChild(this.content),this._resizeDOM()}cache(){return Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(g){g.batchDraw()}),this}};Stage$1.prototype.nodeType=STAGE;_registerNode(Stage$1);Factory.addGetterSetter(Stage$1,"container");Konva$2.isBrowser&&document.addEventListener("visibilitychange",()=>{stages.forEach(it=>{it.batchDraw()})});const HAS_SHADOW="hasShadow",SHADOW_RGBA="shadowRGBA",patternImage="patternImage",linearGradient="linearGradient",radialGradient="radialGradient";let dummyContext$1;function getDummyContext$1(){return dummyContext$1||(dummyContext$1=Util.createCanvasElement().getContext("2d"),dummyContext$1)}const shapes={};function _fillFunc$2(it){const g=this.attrs.fillRule;g?it.fill(g):it.fill()}function _strokeFunc$2(it){it.stroke()}function _fillFuncHit(it){const g=this.attrs.fillRule;g?it.fill(g):it.fill()}function _strokeFuncHit(it){it.stroke()}function _clearHasShadowCache(){this._clearCache(HAS_SHADOW)}function _clearGetShadowRGBACache(){this._clearCache(SHADOW_RGBA)}function _clearFillPatternCache(){this._clearCache(patternImage)}function _clearLinearGradientCache(){this._clearCache(linearGradient)}function _clearRadialGradientCache(){this._clearCache(radialGradient)}class Shape extends Node$1{constructor(g){super(g);let et;for(;et=Util.getRandomColor(),!(et&&!(et in shapes)););this.colorKey=et,shapes[et]=this}getContext(){return Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(HAS_SHADOW,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(patternImage,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const et=getDummyContext$1().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(et&&et.setTransform){const ot=new Transform;ot.translate(this.fillPatternX(),this.fillPatternY()),ot.rotate(Konva$2.getAngle(this.fillPatternRotation())),ot.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),ot.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ut=ot.getMatrix(),ct=typeof DOMMatrix>"u"?{a:ut[0],b:ut[1],c:ut[2],d:ut[3],e:ut[4],f:ut[5]}:new DOMMatrix(ut);et.setTransform(ct)}return et}}_getLinearGradient(){return this._getCache(linearGradient,this.__getLinearGradient)}__getLinearGradient(){const g=this.fillLinearGradientColorStops();if(g){const et=getDummyContext$1(),ot=this.fillLinearGradientStartPoint(),ut=this.fillLinearGradientEndPoint(),ct=et.createLinearGradient(ot.x,ot.y,ut.x,ut.y);for(let dt=0;dt<g.length;dt+=2)ct.addColorStop(g[dt],g[dt+1]);return ct}}_getRadialGradient(){return this._getCache(radialGradient,this.__getRadialGradient)}__getRadialGradient(){const g=this.fillRadialGradientColorStops();if(g){const et=getDummyContext$1(),ot=this.fillRadialGradientStartPoint(),ut=this.fillRadialGradientEndPoint(),ct=et.createRadialGradient(ot.x,ot.y,this.fillRadialGradientStartRadius(),ut.x,ut.y,this.fillRadialGradientEndRadius());for(let dt=0;dt<g.length;dt+=2)ct.addColorStop(g[dt],g[dt+1]);return ct}}getShadowRGBA(){return this._getCache(SHADOW_RGBA,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const g=Util.colorToRGBA(this.shadowColor());if(g)return"rgba("+g.r+","+g.g+","+g.b+","+g.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const g=this.hitStrokeWidth();return g==="auto"?this.hasStroke():this.strokeEnabled()&&!!g}intersects(g){const et=this.getStage();if(!et)return!1;const ot=et.bufferHitCanvas;return ot.getContext().clear(),this.drawHit(ot,void 0,!0),ot.context.getImageData(Math.round(g.x),Math.round(g.y),1,1).data[3]>0}destroy(){return Node$1.prototype.destroy.call(this),delete shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(g){var et;if(!((et=this.attrs.perfectDrawEnabled)!==null&&et!==void 0?et:!0))return!1;const ut=g||this.hasFill(),ct=this.hasStroke(),dt=this.getAbsoluteOpacity()!==1;if(ut&&ct&&dt)return!0;const ft=this.hasShadow(),St=this.shadowForStrokeEnabled();return!!(ut&&ct&&ft&&St)}setStrokeHitEnabled(g){Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),g?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const g=this.size();return{x:this._centroid?-g.width/2:0,y:this._centroid?-g.height/2:0,width:g.width,height:g.height}}getClientRect(g={}){let et=!1,ot=this.getParent();for(;ot;){if(ot.isCached()){et=!0;break}ot=ot.getParent()}const ut=g.skipTransform,ct=g.relativeTo||et&&this.getStage()||void 0,dt=this.getSelfRect(),St=!g.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,kt=dt.width+St,Tt=dt.height+St,Rt=!g.skipShadow&&this.hasShadow(),Ft=Rt?this.shadowOffsetX():0,jt=Rt?this.shadowOffsetY():0,Bt=kt+Math.abs(Ft),zt=Tt+Math.abs(jt),Ht=Rt&&this.shadowBlur()||0,Ut=Bt+Ht*2,Kt=zt+Ht*2,Yt={width:Ut,height:Kt,x:-(St/2+Ht)+Math.min(Ft,0)+dt.x,y:-(St/2+Ht)+Math.min(jt,0)+dt.y};return ut?Yt:this._transformedRect(Yt,ct)}drawScene(g,et,ot){const ut=this.getLayer(),ct=g||ut.getCanvas(),dt=ct.getContext(),ft=this._getCanvasCache(),St=this.getSceneFunc(),kt=this.hasShadow();let Tt;const Rt=!1,Ft=et===this;if(!this.isVisible()&&!Ft)return this;if(ft){dt.save();const jt=this.getAbsoluteTransform(et).getMatrix();return dt.transform(jt[0],jt[1],jt[2],jt[3],jt[4],jt[5]),this._drawCachedSceneCanvas(dt),dt.restore(),this}if(!St)return this;if(dt.save(),this._useBufferCanvas()&&!Rt){Tt=this.getStage();const jt=ot||Tt.bufferCanvas,Bt=jt.getContext();Bt.clear(),Bt.save(),Bt._applyLineJoin(this),Bt._applyMiterLimit(this);const zt=this.getAbsoluteTransform(et).getMatrix();Bt.transform(zt[0],zt[1],zt[2],zt[3],zt[4],zt[5]),St.call(this,Bt,this),Bt.restore();const Ht=jt.pixelRatio;kt&&dt._applyShadow(this),Ft||(dt._applyOpacity(this),dt._applyGlobalCompositeOperation(this)),dt.drawImage(jt._canvas,jt.x||0,jt.y||0,jt.width/Ht,jt.height/Ht)}else{if(dt._applyLineJoin(this),dt._applyMiterLimit(this),!Ft){const jt=this.getAbsoluteTransform(et).getMatrix();dt.transform(jt[0],jt[1],jt[2],jt[3],jt[4],jt[5]),dt._applyOpacity(this),dt._applyGlobalCompositeOperation(this)}kt&&dt._applyShadow(this),St.call(this,dt,this)}return dt.restore(),this}drawHit(g,et,ot=!1){if(!this.shouldDrawHit(et,ot))return this;const ut=this.getLayer(),ct=g||ut.hitCanvas,dt=ct&&ct.getContext(),ft=this.hitFunc()||this.sceneFunc(),St=this._getCanvasCache(),kt=St&&St.hit;if(this.colorKey||Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),kt){dt.save();const Rt=this.getAbsoluteTransform(et).getMatrix();return dt.transform(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]),this._drawCachedHitCanvas(dt),dt.restore(),this}if(!ft)return this;if(dt.save(),dt._applyLineJoin(this),dt._applyMiterLimit(this),!(this===et)){const Rt=this.getAbsoluteTransform(et).getMatrix();dt.transform(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5])}return ft.call(this,dt,this),dt.restore(),this}drawHitFromCache(g=0){const et=this._getCanvasCache(),ot=this._getCachedSceneCanvas(),ut=et.hit,ct=ut.getContext(),dt=ut.getWidth(),ft=ut.getHeight();ct.clear(),ct.drawImage(ot._canvas,0,0,dt,ft);try{const St=ct.getImageData(0,0,dt,ft),kt=St.data,Tt=kt.length,Rt=Util._hexToRgb(this.colorKey);for(let Ft=0;Ft<Tt;Ft+=4)kt[Ft+3]>g?(kt[Ft]=Rt.r,kt[Ft+1]=Rt.g,kt[Ft+2]=Rt.b,kt[Ft+3]=255):kt[Ft+3]=0;ct.putImageData(St,0,0)}catch(St){Util.error("Unable to draw hit graph from cached scene canvas. "+St.message)}return this}hasPointerCapture(g){return hasPointerCapture(g,this)}setPointerCapture(g){setPointerCapture(g,this)}releaseCapture(g){releaseCapture(g)}}Shape.prototype._fillFunc=_fillFunc$2;Shape.prototype._strokeFunc=_strokeFunc$2;Shape.prototype._fillFuncHit=_fillFuncHit;Shape.prototype._strokeFuncHit=_strokeFuncHit;Shape.prototype._centroid=!1;Shape.prototype.nodeType="Shape";_registerNode(Shape);Shape.prototype.eventListeners={};Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearHasShadowCache);Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearGetShadowRGBACache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",_clearFillPatternCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",_clearLinearGradientCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_clearRadialGradientCache);Factory.addGetterSetter(Shape,"stroke",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"strokeWidth",2,getNumberValidator());Factory.addGetterSetter(Shape,"fillAfterStrokeEnabled",!1);Factory.addGetterSetter(Shape,"hitStrokeWidth","auto",getNumberOrAutoValidator());Factory.addGetterSetter(Shape,"strokeHitEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"perfectDrawEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"shadowForStrokeEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"lineJoin");Factory.addGetterSetter(Shape,"lineCap");Factory.addGetterSetter(Shape,"miterLimit");Factory.addGetterSetter(Shape,"sceneFunc");Factory.addGetterSetter(Shape,"hitFunc");Factory.addGetterSetter(Shape,"dash");Factory.addGetterSetter(Shape,"dashOffset",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowColor",void 0,getStringValidator());Factory.addGetterSetter(Shape,"shadowBlur",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOpacity",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"shadowOffset",["x","y"]);Factory.addGetterSetter(Shape,"shadowOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOffsetY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternImage");Factory.addGetterSetter(Shape,"fill",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"fillPatternX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillLinearGradientColorStops");Factory.addGetterSetter(Shape,"strokeLinearGradientColorStops");Factory.addGetterSetter(Shape,"fillRadialGradientStartRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientColorStops");Factory.addGetterSetter(Shape,"fillPatternRepeat","repeat");Factory.addGetterSetter(Shape,"fillEnabled",!0);Factory.addGetterSetter(Shape,"strokeEnabled",!0);Factory.addGetterSetter(Shape,"shadowEnabled",!0);Factory.addGetterSetter(Shape,"dashEnabled",!0);Factory.addGetterSetter(Shape,"strokeScaleEnabled",!0);Factory.addGetterSetter(Shape,"fillPriority","color");Factory.addComponentsGetterSetter(Shape,"fillPatternOffset",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternOffsetY",0,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillPatternScale",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternScaleX",1,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternScaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillLinearGradientStartPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillLinearGradientEndPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointY",0);Factory.addGetterSetter(Shape,"fillPatternRotation",0);Factory.addGetterSetter(Shape,"fillRule",void 0,getStringValidator());Factory.backCompat(Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const HASH="#",BEFORE_DRAW="beforeDraw",DRAW="draw",INTERSECTION_OFFSETS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],INTERSECTION_OFFSETS_LEN=INTERSECTION_OFFSETS.length;let Layer$1=class extends Container{constructor(g){super(g),this.canvas=new SceneCanvas,this.hitCanvas=new HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(g){return this.getContext().clear(g),this.getHitCanvas().getContext().clear(g),this}setZIndex(g){super.setZIndex(g);const et=this.getStage();return et&&et.content&&(et.content.removeChild(this.getNativeCanvasElement()),g<et.children.length-1?et.content.insertBefore(this.getNativeCanvasElement(),et.children[g+1].getCanvas()._canvas):et.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Node$1.prototype.moveToTop.call(this);const g=this.getStage();return g&&g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Node$1.prototype.moveUp.call(this))return!1;const et=this.getStage();return!et||!et.content?!1:(et.content.removeChild(this.getNativeCanvasElement()),this.index<et.children.length-1?et.content.insertBefore(this.getNativeCanvasElement(),et.children[this.index+1].getCanvas()._canvas):et.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Node$1.prototype.moveDown.call(this)){const g=this.getStage();if(g){const et=g.children;g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.insertBefore(this.getNativeCanvasElement(),et[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Node$1.prototype.moveToBottom.call(this)){const g=this.getStage();if(g){const et=g.children;g.content&&(g.content.removeChild(this.getNativeCanvasElement()),g.content.insertBefore(this.getNativeCanvasElement(),et[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const g=this.getNativeCanvasElement();return Node$1.prototype.remove.call(this),g&&g.parentNode&&Util._isInDocument(g)&&g.parentNode.removeChild(g),this}getStage(){return this.parent}setSize({width:g,height:et}){return this.canvas.setSize(g,et),this.hitCanvas.setSize(g,et),this._setSmoothEnabled(),this}_validateAdd(g){const et=g.getType();et!=="Group"&&et!=="Shape"&&Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(g){return g={...g},g.width=g.width||this.getWidth(),g.height=g.height||this.getHeight(),g.x=g.x!==void 0?g.x:this.x(),g.y=g.y!==void 0?g.y:this.y(),Node$1.prototype._toKonvaCanvas.call(this,g)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(g){if(!this.isListening()||!this.isVisible())return null;let et=1,ot=!1;for(;;){for(let ut=0;ut<INTERSECTION_OFFSETS_LEN;ut++){const ct=INTERSECTION_OFFSETS[ut],dt=this._getIntersection({x:g.x+ct.x*et,y:g.y+ct.y*et}),ft=dt.shape;if(ft)return ft;if(ot=!!dt.antialiased,!dt.antialiased)break}if(ot)et+=1;else return null}}_getIntersection(g){const et=this.hitCanvas.pixelRatio,ot=this.hitCanvas.context.getImageData(Math.round(g.x*et),Math.round(g.y*et),1,1).data,ut=ot[3];if(ut===255){const ct=Util._rgbToHex(ot[0],ot[1],ot[2]),dt=shapes[HASH+ct];return dt?{shape:dt}:{antialiased:!0}}else if(ut>0)return{antialiased:!0};return{}}drawScene(g,et,ot){const ut=this.getLayer(),ct=g||ut&&ut.getCanvas();return this._fire(BEFORE_DRAW,{node:this}),this.clearBeforeDraw()&&ct.getContext().clear(),Container.prototype.drawScene.call(this,ct,et,ot),this._fire(DRAW,{node:this}),this}drawHit(g,et){const ot=this.getLayer(),ut=g||ot&&ot.hitCanvas;return ot&&ot.clearBeforeDraw()&&ot.getHitCanvas().getContext().clear(),Container.prototype.drawHit.call(this,ut,et),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(g){Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(g)}getHitGraphEnabled(g){return Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const g=this.parent;!!this.hitCanvas._canvas.parentNode?g.content.removeChild(this.hitCanvas._canvas):g.content.appendChild(this.hitCanvas._canvas)}destroy(){return Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Layer$1.prototype.nodeType="Layer";_registerNode(Layer$1);Factory.addGetterSetter(Layer$1,"imageSmoothingEnabled",!0);Factory.addGetterSetter(Layer$1,"clearBeforeDraw",!0);Factory.addGetterSetter(Layer$1,"hitGraphEnabled",!0,getBooleanValidator());class FastLayer extends Layer$1{constructor(g){super(g),this.listening(!1),Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FastLayer.prototype.nodeType="FastLayer";_registerNode(FastLayer);let Group$1=class extends Container{_validateAdd(g){const et=g.getType();et!=="Group"&&et!=="Shape"&&Util.throw("You may only add groups and shapes to groups.")}};Group$1.prototype.nodeType="Group";_registerNode(Group$1);const now=function(){return glob.performance&&glob.performance.now?function(){return glob.performance.now()}:function(){return new Date().getTime()}}();class Animation{constructor(g,et){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:now(),frameRate:0},this.func=g,this.setLayers(et)}setLayers(g){let et=[];return g&&(et=Array.isArray(g)?g:[g]),this.layers=et,this}getLayers(){return this.layers}addLayer(g){const et=this.layers,ot=et.length;for(let ut=0;ut<ot;ut++)if(et[ut]._id===g._id)return!1;return this.layers.push(g),!0}isRunning(){const et=Animation.animations,ot=et.length;for(let ut=0;ut<ot;ut++)if(et[ut].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=now(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(g){this.frame.timeDiff=g-this.frame.lastTime,this.frame.lastTime=g,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(g){this.animations.push(g),this._handleAnimation()}static _removeAnimation(g){const et=g.id,ot=this.animations,ut=ot.length;for(let ct=0;ct<ut;ct++)if(ot[ct].id===et){this.animations.splice(ct,1);break}}static _runFrames(){const g={},et=this.animations;for(let ot=0;ot<et.length;ot++){const ut=et[ot],ct=ut.layers,dt=ut.func;ut._updateFrameObject(now());const ft=ct.length;let St;if(dt?St=dt.call(ut,ut.frame)!==!1:St=!0,!!St)for(let kt=0;kt<ft;kt++){const Tt=ct[kt];Tt._id!==void 0&&(g[Tt._id]=Tt)}}for(const ot in g)g.hasOwnProperty(ot)&&g[ot].batchDraw()}static _animationLoop(){const g=Animation;g.animations.length?(g._runFrames(),Util.requestAnimFrame(g._animationLoop)):g.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Util.requestAnimFrame(this._animationLoop))}}Animation.animations=[];Animation.animIdCounter=0;Animation.animRunning=!1;const blacklist={node:1,duration:1,easing:1,onFinish:1,yoyo:1},PAUSED=1,PLAYING=2,REVERSING=3,colorAttrs=["fill","stroke","shadowColor"];let idCounter=0;class TweenEngine{constructor(g,et,ot,ut,ct,dt,ft){this.prop=g,this.propFunc=et,this.begin=ut,this._pos=ut,this.duration=dt,this._change=0,this.prevPos=0,this.yoyo=ft,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=ot,this._change=ct-this.begin,this.pause()}fire(g){const et=this[g];et&&et()}setTime(g){g>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():g<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=g,this.update())}getTime(){return this._time}setPosition(g){this.prevPos=this._pos,this.propFunc(g),this._pos=g}getPosition(g){return g===void 0&&(g=this._time),this.func(g,this.begin,this._change,this.duration)}play(){this.state=PLAYING,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=REVERSING,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(g){this.pause(),this._time=g,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const g=this.getTimer()-this._startTime;this.state===PLAYING?this.setTime(g):this.state===REVERSING&&this.setTime(this.duration-g)}pause(){this.state=PAUSED,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tween{constructor(g){const et=this,ot=g.node,ut=ot._id,ct=g.easing||Easings.Linear,dt=!!g.yoyo;let ft,St;typeof g.duration>"u"?ft=.3:g.duration===0?ft=.001:ft=g.duration,this.node=ot,this._id=idCounter++;const kt=ot.getLayer()||(ot instanceof Konva$2.Stage?ot.getLayers():null);kt||Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Animation(function(){et.tween.onEnterFrame()},kt),this.tween=new TweenEngine(St,function(Tt){et._tweenFunc(Tt)},ct,0,1,ft*1e3,dt),this._addListeners(),Tween.attrs[ut]||(Tween.attrs[ut]={}),Tween.attrs[ut][this._id]||(Tween.attrs[ut][this._id]={}),Tween.tweens[ut]||(Tween.tweens[ut]={});for(St in g)blacklist[St]===void 0&&this._addAttr(St,g[St]);this.reset(),this.onFinish=g.onFinish,this.onReset=g.onReset,this.onUpdate=g.onUpdate}_addAttr(g,et){const ot=this.node,ut=ot._id;let ct,dt,ft,St,kt;const Tt=Tween.tweens[ut][g];Tt&&delete Tween.attrs[ut][Tt][g];let Rt=ot.getAttr(g);if(Util._isArray(et))if(ct=[],dt=Math.max(et.length,Rt.length),g==="points"&&et.length!==Rt.length&&(et.length>Rt.length?(St=Rt,Rt=Util._prepareArrayForTween(Rt,et,ot.closed())):(ft=et,et=Util._prepareArrayForTween(et,Rt,ot.closed()))),g.indexOf("fill")===0)for(let Ft=0;Ft<dt;Ft++)if(Ft%2===0)ct.push(et[Ft]-Rt[Ft]);else{const jt=Util.colorToRGBA(Rt[Ft]);kt=Util.colorToRGBA(et[Ft]),Rt[Ft]=jt,ct.push({r:kt.r-jt.r,g:kt.g-jt.g,b:kt.b-jt.b,a:kt.a-jt.a})}else for(let Ft=0;Ft<dt;Ft++)ct.push(et[Ft]-Rt[Ft]);else colorAttrs.indexOf(g)!==-1?(Rt=Util.colorToRGBA(Rt),kt=Util.colorToRGBA(et),ct={r:kt.r-Rt.r,g:kt.g-Rt.g,b:kt.b-Rt.b,a:kt.a-Rt.a}):ct=et-Rt;Tween.attrs[ut][this._id][g]={start:Rt,diff:ct,end:et,trueEnd:ft,trueStart:St},Tween.tweens[ut][g]=this._id}_tweenFunc(g){const et=this.node,ot=Tween.attrs[et._id][this._id];let ut,ct,dt,ft,St,kt,Tt,Rt;for(ut in ot){if(ct=ot[ut],dt=ct.start,ft=ct.diff,Rt=ct.end,Util._isArray(dt))if(St=[],Tt=Math.max(dt.length,Rt.length),ut.indexOf("fill")===0)for(kt=0;kt<Tt;kt++)kt%2===0?St.push((dt[kt]||0)+ft[kt]*g):St.push("rgba("+Math.round(dt[kt].r+ft[kt].r*g)+","+Math.round(dt[kt].g+ft[kt].g*g)+","+Math.round(dt[kt].b+ft[kt].b*g)+","+(dt[kt].a+ft[kt].a*g)+")");else for(kt=0;kt<Tt;kt++)St.push((dt[kt]||0)+ft[kt]*g);else colorAttrs.indexOf(ut)!==-1?St="rgba("+Math.round(dt.r+ft.r*g)+","+Math.round(dt.g+ft.g*g)+","+Math.round(dt.b+ft.b*g)+","+(dt.a+ft.a*g)+")":St=dt+ft*g;et.setAttr(ut,St)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const g=this.node,et=Tween.attrs[g._id][this._id];et.points&&et.points.trueEnd&&g.setAttr("points",et.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const g=this.node,et=Tween.attrs[g._id][this._id];et.points&&et.points.trueStart&&g.points(et.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(g){return this.tween.seek(g*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const g=this.node._id,et=this._id,ot=Tween.tweens[g];this.pause(),this.anim&&this.anim.stop();for(const ut in ot)delete Tween.tweens[g][ut];delete Tween.attrs[g][et],Tween.tweens[g]&&(Object.keys(Tween.tweens[g]).length===0&&delete Tween.tweens[g],Object.keys(Tween.attrs[g]).length===0&&delete Tween.attrs[g])}}Tween.attrs={};Tween.tweens={};Node$1.prototype.to=function(it){const g=it.onFinish;it.node=this,it.onFinish=function(){this.destroy(),g&&g()},new Tween(it).play()};const Easings={BackEaseIn(it,g,et,ot){return et*(it/=ot)*it*((1.70158+1)*it-1.70158)+g},BackEaseOut(it,g,et,ot){return et*((it=it/ot-1)*it*((1.70158+1)*it+1.70158)+1)+g},BackEaseInOut(it,g,et,ot){let ut=1.70158;return(it/=ot/2)<1?et/2*(it*it*(((ut*=1.525)+1)*it-ut))+g:et/2*((it-=2)*it*(((ut*=1.525)+1)*it+ut)+2)+g},ElasticEaseIn(it,g,et,ot,ut,ct){let dt=0;return it===0?g:(it/=ot)===1?g+et:(ct||(ct=ot*.3),!ut||ut<Math.abs(et)?(ut=et,dt=ct/4):dt=ct/(2*Math.PI)*Math.asin(et/ut),-(ut*Math.pow(2,10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ct))+g)},ElasticEaseOut(it,g,et,ot,ut,ct){let dt=0;return it===0?g:(it/=ot)===1?g+et:(ct||(ct=ot*.3),!ut||ut<Math.abs(et)?(ut=et,dt=ct/4):dt=ct/(2*Math.PI)*Math.asin(et/ut),ut*Math.pow(2,-10*it)*Math.sin((it*ot-dt)*(2*Math.PI)/ct)+et+g)},ElasticEaseInOut(it,g,et,ot,ut,ct){let dt=0;return it===0?g:(it/=ot/2)===2?g+et:(ct||(ct=ot*(.3*1.5)),!ut||ut<Math.abs(et)?(ut=et,dt=ct/4):dt=ct/(2*Math.PI)*Math.asin(et/ut),it<1?-.5*(ut*Math.pow(2,10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ct))+g:ut*Math.pow(2,-10*(it-=1))*Math.sin((it*ot-dt)*(2*Math.PI)/ct)*.5+et+g)},BounceEaseOut(it,g,et,ot){return(it/=ot)<1/2.75?et*(7.5625*it*it)+g:it<2/2.75?et*(7.5625*(it-=1.5/2.75)*it+.75)+g:it<2.5/2.75?et*(7.5625*(it-=2.25/2.75)*it+.9375)+g:et*(7.5625*(it-=2.625/2.75)*it+.984375)+g},BounceEaseIn(it,g,et,ot){return et-Easings.BounceEaseOut(ot-it,0,et,ot)+g},BounceEaseInOut(it,g,et,ot){return it<ot/2?Easings.BounceEaseIn(it*2,0,et,ot)*.5+g:Easings.BounceEaseOut(it*2-ot,0,et,ot)*.5+et*.5+g},EaseIn(it,g,et,ot){return et*(it/=ot)*it+g},EaseOut(it,g,et,ot){return-et*(it/=ot)*(it-2)+g},EaseInOut(it,g,et,ot){return(it/=ot/2)<1?et/2*it*it+g:-et/2*(--it*(it-2)-1)+g},StrongEaseIn(it,g,et,ot){return et*(it/=ot)*it*it*it*it+g},StrongEaseOut(it,g,et,ot){return et*((it=it/ot-1)*it*it*it*it+1)+g},StrongEaseInOut(it,g,et,ot){return(it/=ot/2)<1?et/2*it*it*it*it*it+g:et/2*((it-=2)*it*it*it*it+2)+g},Linear(it,g,et,ot){return et*it/ot+g}},Konva$1=Util._assign(Konva$2,{Util,Transform,Node:Node$1,Container,Stage:Stage$1,stages,Layer:Layer$1,FastLayer,Group:Group$1,DD,Shape,shapes,Animation,Tween,Easings,Context:Context$1,Canvas});class Arc extends Shape{_sceneFunc(g){const et=Konva$2.getAngle(this.angle()),ot=this.clockwise();g.beginPath(),g.arc(0,0,this.outerRadius(),0,et,ot),g.arc(0,0,this.innerRadius(),et,0,!ot),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}getSelfRect(){const g=this.innerRadius(),et=this.outerRadius(),ot=this.clockwise(),ut=Konva$2.getAngle(ot?360-this.angle():this.angle()),ct=Math.cos(Math.min(ut,Math.PI)),dt=1,ft=Math.sin(Math.min(Math.max(Math.PI,ut),3*Math.PI/2)),St=Math.sin(Math.min(ut,Math.PI/2)),kt=ct*(ct>0?g:et),Tt=dt*et,Rt=ft*(ft>0?g:et),Ft=St*(St>0?et:g);return{x:kt,y:ot?-1*Ft:Rt,width:Tt-kt,height:Ft-Rt}}}Arc.prototype._centroid=!0;Arc.prototype.className="Arc";Arc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];_registerNode(Arc);Factory.addGetterSetter(Arc,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"outerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"angle",0,getNumberValidator());Factory.addGetterSetter(Arc,"clockwise",!1,getBooleanValidator());function getControlPoints(it,g,et,ot,ut,ct,dt){const ft=Math.sqrt(Math.pow(et-it,2)+Math.pow(ot-g,2)),St=Math.sqrt(Math.pow(ut-et,2)+Math.pow(ct-ot,2)),kt=dt*ft/(ft+St),Tt=dt*St/(ft+St),Rt=et-kt*(ut-it),Ft=ot-kt*(ct-g),jt=et+Tt*(ut-it),Bt=ot+Tt*(ct-g);return[Rt,Ft,jt,Bt]}function expandPoints(it,g){const et=it.length,ot=[];for(let ut=2;ut<et-2;ut+=2){const ct=getControlPoints(it[ut-2],it[ut-1],it[ut],it[ut+1],it[ut+2],it[ut+3],g);isNaN(ct[0])||(ot.push(ct[0]),ot.push(ct[1]),ot.push(it[ut]),ot.push(it[ut+1]),ot.push(ct[2]),ot.push(ct[3]))}return ot}let Line$1=class extends Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){const et=this.points(),ot=et.length,ut=this.tension(),ct=this.closed(),dt=this.bezier();if(!ot)return;let ft=0;if(g.beginPath(),g.moveTo(et[0],et[1]),ut!==0&&ot>4){const St=this.getTensionPoints(),kt=St.length;for(ft=ct?0:4,ct||g.quadraticCurveTo(St[0],St[1],St[2],St[3]);ft<kt-2;)g.bezierCurveTo(St[ft++],St[ft++],St[ft++],St[ft++],St[ft++],St[ft++]);ct||g.quadraticCurveTo(St[kt-2],St[kt-1],et[ot-2],et[ot-1])}else if(dt)for(ft=2;ft<ot;)g.bezierCurveTo(et[ft++],et[ft++],et[ft++],et[ft++],et[ft++],et[ft++]);else for(ft=2;ft<ot;ft+=2)g.lineTo(et[ft],et[ft+1]);ct?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),et=g.length,ot=this.tension(),ut=getControlPoints(g[et-2],g[et-1],g[0],g[1],g[2],g[3],ot),ct=getControlPoints(g[et-4],g[et-3],g[et-2],g[et-1],g[0],g[1],ot),dt=expandPoints(g,ot);return[ut[2],ut[3]].concat(dt).concat([ct[0],ct[1],g[et-2],g[et-1],ct[2],ct[3],ut[0],ut[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let et=g[0],ot=g[0],ut=g[1],ct=g[1],dt,ft;for(let St=0;St<g.length/2;St++)dt=g[St*2],ft=g[St*2+1],et=Math.min(et,dt),ot=Math.max(ot,dt),ut=Math.min(ut,ft),ct=Math.max(ct,ft);return{x:et,y:ut,width:ot-et,height:ct-ut}}};Line$1.prototype.className="Line";Line$1.prototype._attrsAffectingSize=["points","bezier","tension"];_registerNode(Line$1);Factory.addGetterSetter(Line$1,"closed",!1);Factory.addGetterSetter(Line$1,"bezier",!1);Factory.addGetterSetter(Line$1,"tension",0,getNumberValidator());Factory.addGetterSetter(Line$1,"points",[],getNumberArrayValidator());const tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],getCubicArcLength=(it,g,et)=>{let ot,ut;const dt=et/2;ot=0;for(let ft=0;ft<20;ft++)ut=dt*tValues[20][ft]+dt,ot+=cValues[20][ft]*BFunc(it,g,ut);return dt*ot},getQuadraticArcLength=(it,g,et)=>{et===void 0&&(et=1);const ot=it[0]-2*it[1]+it[2],ut=g[0]-2*g[1]+g[2],ct=2*it[1]-2*it[0],dt=2*g[1]-2*g[0],ft=4*(ot*ot+ut*ut),St=4*(ot*ct+ut*dt),kt=ct*ct+dt*dt;if(ft===0)return et*Math.sqrt(Math.pow(it[2]-it[0],2)+Math.pow(g[2]-g[0],2));const Tt=St/(2*ft),Rt=kt/ft,Ft=et+Tt,jt=Rt-Tt*Tt,Bt=Ft*Ft+jt>0?Math.sqrt(Ft*Ft+jt):0,zt=Tt*Tt+jt>0?Math.sqrt(Tt*Tt+jt):0,Ht=Tt+Math.sqrt(Tt*Tt+jt)!==0?jt*Math.log(Math.abs((Ft+Bt)/(Tt+zt))):0;return Math.sqrt(ft)/2*(Ft*Bt-Tt*zt+Ht)};function BFunc(it,g,et){const ot=getDerivative(1,et,it),ut=getDerivative(1,et,g),ct=ot*ot+ut*ut;return Math.sqrt(ct)}const getDerivative=(it,g,et)=>{const ot=et.length-1;let ut,ct;if(ot===0)return 0;if(it===0){ct=0;for(let dt=0;dt<=ot;dt++)ct+=binomialCoefficients[ot][dt]*Math.pow(1-g,ot-dt)*Math.pow(g,dt)*et[dt];return ct}else{ut=new Array(ot);for(let dt=0;dt<ot;dt++)ut[dt]=ot*(et[dt+1]-et[dt]);return getDerivative(it-1,g,ut)}},t2length=(it,g,et)=>{let ot=1,ut=it/g,ct=(it-et(ut))/g,dt=0;for(;ot>.001;){const ft=et(ut+ct),St=Math.abs(it-ft)/g;if(St<ot)ot=St,ut+=ct;else{const kt=et(ut-ct),Tt=Math.abs(it-kt)/g;Tt<ot?(ot=Tt,ut-=ct):ct/=2}if(dt++,dt>500)break}return ut};let Path$1=class wu extends Shape{constructor(g){super(g),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=wu.parsePathData(this.data()),this.pathLength=wu.getPathLength(this.dataArray)}_sceneFunc(g){const et=this.dataArray;g.beginPath();let ot=!1;for(let ut=0;ut<et.length;ut++){const ct=et[ut].command,dt=et[ut].points;switch(ct){case"L":g.lineTo(dt[0],dt[1]);break;case"M":g.moveTo(dt[0],dt[1]);break;case"C":g.bezierCurveTo(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5]);break;case"Q":g.quadraticCurveTo(dt[0],dt[1],dt[2],dt[3]);break;case"A":const ft=dt[0],St=dt[1],kt=dt[2],Tt=dt[3],Rt=dt[4],Ft=dt[5],jt=dt[6],Bt=dt[7],zt=kt>Tt?kt:Tt,Ht=kt>Tt?1:kt/Tt,Ut=kt>Tt?Tt/kt:1;g.translate(ft,St),g.rotate(jt),g.scale(Ht,Ut),g.arc(0,0,zt,Rt,Rt+Ft,1-Bt),g.scale(1/Ht,1/Ut),g.rotate(-jt),g.translate(-ft,-St);break;case"z":ot=!0,g.closePath();break}}!ot&&!this.hasFill()?g.strokeShape(this):g.fillStrokeShape(this)}getSelfRect(){let g=[];this.dataArray.forEach(function(St){if(St.command==="A"){const kt=St.points[4],Tt=St.points[5],Rt=St.points[4]+Tt;let Ft=Math.PI/180;if(Math.abs(kt-Rt)<Ft&&(Ft=Math.abs(kt-Rt)),Tt<0)for(let jt=kt-Ft;jt>Rt;jt-=Ft){const Bt=wu.getPointOnEllipticalArc(St.points[0],St.points[1],St.points[2],St.points[3],jt,0);g.push(Bt.x,Bt.y)}else for(let jt=kt+Ft;jt<Rt;jt+=Ft){const Bt=wu.getPointOnEllipticalArc(St.points[0],St.points[1],St.points[2],St.points[3],jt,0);g.push(Bt.x,Bt.y)}}else if(St.command==="C")for(let kt=0;kt<=1;kt+=.01){const Tt=wu.getPointOnCubicBezier(kt,St.start.x,St.start.y,St.points[0],St.points[1],St.points[2],St.points[3],St.points[4],St.points[5]);g.push(Tt.x,Tt.y)}else g=g.concat(St.points)});let et=g[0],ot=g[0],ut=g[1],ct=g[1],dt,ft;for(let St=0;St<g.length/2;St++)dt=g[St*2],ft=g[St*2+1],isNaN(dt)||(et=Math.min(et,dt),ot=Math.max(ot,dt)),isNaN(ft)||(ut=Math.min(ut,ft),ct=Math.max(ct,ft));return{x:et,y:ut,width:ot-et,height:ct-ut}}getLength(){return this.pathLength}getPointAtLength(g){return wu.getPointAtLengthOfDataArray(g,this.dataArray)}static getLineLength(g,et,ot,ut){return Math.sqrt((ot-g)*(ot-g)+(ut-et)*(ut-et))}static getPathLength(g){let et=0;for(let ot=0;ot<g.length;++ot)et+=g[ot].pathLength;return et}static getPointAtLengthOfDataArray(g,et){let ot,ut=0,ct=et.length;if(!ct)return null;for(;ut<ct&&g>et[ut].pathLength;)g-=et[ut].pathLength,++ut;if(ut===ct)return ot=et[ut-1].points.slice(-2),{x:ot[0],y:ot[1]};if(g<.01)return et[ut].command==="M"?(ot=et[ut].points.slice(0,2),{x:ot[0],y:ot[1]}):{x:et[ut].start.x,y:et[ut].start.y};const dt=et[ut],ft=dt.points;switch(dt.command){case"L":return wu.getPointOnLine(g,dt.start.x,dt.start.y,ft[0],ft[1]);case"C":return wu.getPointOnCubicBezier(t2length(g,wu.getPathLength(et),zt=>getCubicArcLength([dt.start.x,ft[0],ft[2],ft[4]],[dt.start.y,ft[1],ft[3],ft[5]],zt)),dt.start.x,dt.start.y,ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]);case"Q":return wu.getPointOnQuadraticBezier(t2length(g,wu.getPathLength(et),zt=>getQuadraticArcLength([dt.start.x,ft[0],ft[2]],[dt.start.y,ft[1],ft[3]],zt)),dt.start.x,dt.start.y,ft[0],ft[1],ft[2],ft[3]);case"A":const St=ft[0],kt=ft[1],Tt=ft[2],Rt=ft[3],Ft=ft[5],jt=ft[6];let Bt=ft[4];return Bt+=Ft*g/dt.pathLength,wu.getPointOnEllipticalArc(St,kt,Tt,Rt,Bt,jt)}return null}static getPointOnLine(g,et,ot,ut,ct,dt,ft){dt=dt??et,ft=ft??ot;const St=this.getLineLength(et,ot,ut,ct);if(St<1e-10)return{x:et,y:ot};if(ut===et)return{x:dt,y:ft+(ct>ot?g:-g)};const kt=(ct-ot)/(ut-et),Tt=Math.sqrt(g*g/(1+kt*kt))*(ut<et?-1:1),Rt=kt*Tt;if(Math.abs(ft-ot-kt*(dt-et))<1e-10)return{x:dt+Tt,y:ft+Rt};const Ft=((dt-et)*(ut-et)+(ft-ot)*(ct-ot))/(St*St),jt=et+Ft*(ut-et),Bt=ot+Ft*(ct-ot),zt=this.getLineLength(dt,ft,jt,Bt),Ht=Math.sqrt(g*g-zt*zt),Ut=Math.sqrt(Ht*Ht/(1+kt*kt))*(ut<et?-1:1),Kt=kt*Ut;return{x:jt+Ut,y:Bt+Kt}}static getPointOnCubicBezier(g,et,ot,ut,ct,dt,ft,St,kt){function Tt(Ht){return Ht*Ht*Ht}function Rt(Ht){return 3*Ht*Ht*(1-Ht)}function Ft(Ht){return 3*Ht*(1-Ht)*(1-Ht)}function jt(Ht){return(1-Ht)*(1-Ht)*(1-Ht)}const Bt=St*Tt(g)+dt*Rt(g)+ut*Ft(g)+et*jt(g),zt=kt*Tt(g)+ft*Rt(g)+ct*Ft(g)+ot*jt(g);return{x:Bt,y:zt}}static getPointOnQuadraticBezier(g,et,ot,ut,ct,dt,ft){function St(jt){return jt*jt}function kt(jt){return 2*jt*(1-jt)}function Tt(jt){return(1-jt)*(1-jt)}const Rt=dt*St(g)+ut*kt(g)+et*Tt(g),Ft=ft*St(g)+ct*kt(g)+ot*Tt(g);return{x:Rt,y:Ft}}static getPointOnEllipticalArc(g,et,ot,ut,ct,dt){const ft=Math.cos(dt),St=Math.sin(dt),kt={x:ot*Math.cos(ct),y:ut*Math.sin(ct)};return{x:g+(kt.x*ft-kt.y*St),y:et+(kt.x*St+kt.y*ft)}}static parsePathData(g){if(!g)return[];let et=g;const ot=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];et=et.replace(new RegExp(" ","g"),",");for(let Rt=0;Rt<ot.length;Rt++)et=et.replace(new RegExp(ot[Rt],"g"),"|"+ot[Rt]);const ut=et.split("|"),ct=[],dt=[];let ft=0,St=0;const kt=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let Tt;for(let Rt=1;Rt<ut.length;Rt++){let Ft=ut[Rt],jt=Ft.charAt(0);for(Ft=Ft.slice(1),dt.length=0;Tt=kt.exec(Ft);)dt.push(Tt[0]);let Bt=[],zt=jt==="A"||jt==="a"?0:-1;for(let Ht=0,Ut=dt.length;Ht<Ut;Ht++){const Kt=dt[Ht];if(Kt==="00"){Bt.push(0,0),zt>=0&&(zt+=2,zt>=7&&(zt-=7));continue}if(zt>=0){if(zt===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(Kt)){Bt.push(parseInt(Kt[0],10)),Bt.push(parseInt(Kt[1],10)),Bt.push(parseFloat(Kt.slice(2))),zt+=3,zt>=7&&(zt-=7);continue}if(Kt==="11"||Kt==="10"||Kt==="01"){Bt.push(parseInt(Kt[0],10)),Bt.push(parseInt(Kt[1],10)),zt+=2,zt>=7&&(zt-=7);continue}if(Kt==="0"||Kt==="1"){Bt.push(parseInt(Kt,10)),zt+=1,zt>=7&&(zt-=7);continue}}else if(zt===4){if(/^[01]\d+(?:\.\d+)?$/.test(Kt)){Bt.push(parseInt(Kt[0],10)),Bt.push(parseFloat(Kt.slice(1))),zt+=2,zt>=7&&(zt-=7);continue}if(Kt==="0"||Kt==="1"){Bt.push(parseInt(Kt,10)),zt+=1,zt>=7&&(zt-=7);continue}}const Yt=parseFloat(Kt);isNaN(Yt)?Bt.push(0):Bt.push(Yt),zt+=1,zt>=7&&(zt-=7)}else{const Yt=parseFloat(Kt);isNaN(Yt)?Bt.push(0):Bt.push(Yt)}}for(;Bt.length>0&&!isNaN(Bt[0]);){let Ht="",Ut=[];const Kt=ft,Yt=St;let er,ar,ir,lr,cr,vr,xr,yr,Sr,kr;switch(jt){case"l":ft+=Bt.shift(),St+=Bt.shift(),Ht="L",Ut.push(ft,St);break;case"L":ft=Bt.shift(),St=Bt.shift(),Ut.push(ft,St);break;case"m":const Pr=Bt.shift(),Or=Bt.shift();if(ft+=Pr,St+=Or,Ht="M",ct.length>2&&ct[ct.length-1].command==="z"){for(let hr=ct.length-2;hr>=0;hr--)if(ct[hr].command==="M"){ft=ct[hr].points[0]+Pr,St=ct[hr].points[1]+Or;break}}Ut.push(ft,St),jt="l";break;case"M":ft=Bt.shift(),St=Bt.shift(),Ht="M",Ut.push(ft,St),jt="L";break;case"h":ft+=Bt.shift(),Ht="L",Ut.push(ft,St);break;case"H":ft=Bt.shift(),Ht="L",Ut.push(ft,St);break;case"v":St+=Bt.shift(),Ht="L",Ut.push(ft,St);break;case"V":St=Bt.shift(),Ht="L",Ut.push(ft,St);break;case"C":Ut.push(Bt.shift(),Bt.shift(),Bt.shift(),Bt.shift()),ft=Bt.shift(),St=Bt.shift(),Ut.push(ft,St);break;case"c":Ut.push(ft+Bt.shift(),St+Bt.shift(),ft+Bt.shift(),St+Bt.shift()),ft+=Bt.shift(),St+=Bt.shift(),Ht="C",Ut.push(ft,St);break;case"S":ar=ft,ir=St,er=ct[ct.length-1],er.command==="C"&&(ar=ft+(ft-er.points[2]),ir=St+(St-er.points[3])),Ut.push(ar,ir,Bt.shift(),Bt.shift()),ft=Bt.shift(),St=Bt.shift(),Ht="C",Ut.push(ft,St);break;case"s":ar=ft,ir=St,er=ct[ct.length-1],er.command==="C"&&(ar=ft+(ft-er.points[2]),ir=St+(St-er.points[3])),Ut.push(ar,ir,ft+Bt.shift(),St+Bt.shift()),ft+=Bt.shift(),St+=Bt.shift(),Ht="C",Ut.push(ft,St);break;case"Q":Ut.push(Bt.shift(),Bt.shift()),ft=Bt.shift(),St=Bt.shift(),Ut.push(ft,St);break;case"q":Ut.push(ft+Bt.shift(),St+Bt.shift()),ft+=Bt.shift(),St+=Bt.shift(),Ht="Q",Ut.push(ft,St);break;case"T":ar=ft,ir=St,er=ct[ct.length-1],er.command==="Q"&&(ar=ft+(ft-er.points[0]),ir=St+(St-er.points[1])),ft=Bt.shift(),St=Bt.shift(),Ht="Q",Ut.push(ar,ir,ft,St);break;case"t":ar=ft,ir=St,er=ct[ct.length-1],er.command==="Q"&&(ar=ft+(ft-er.points[0]),ir=St+(St-er.points[1])),ft+=Bt.shift(),St+=Bt.shift(),Ht="Q",Ut.push(ar,ir,ft,St);break;case"A":lr=Bt.shift(),cr=Bt.shift(),vr=Bt.shift(),xr=Bt.shift(),yr=Bt.shift(),Sr=ft,kr=St,ft=Bt.shift(),St=Bt.shift(),Ht="A",Ut=this.convertEndpointToCenterParameterization(Sr,kr,ft,St,xr,yr,lr,cr,vr);break;case"a":lr=Bt.shift(),cr=Bt.shift(),vr=Bt.shift(),xr=Bt.shift(),yr=Bt.shift(),Sr=ft,kr=St,ft+=Bt.shift(),St+=Bt.shift(),Ht="A",Ut=this.convertEndpointToCenterParameterization(Sr,kr,ft,St,xr,yr,lr,cr,vr);break}ct.push({command:Ht||jt,points:Ut,start:{x:Kt,y:Yt},pathLength:this.calcLength(Kt,Yt,Ht||jt,Ut)})}(jt==="z"||jt==="Z")&&ct.push({command:"z",points:[],start:void 0,pathLength:0})}return ct}static calcLength(g,et,ot,ut){let ct,dt,ft,St;const kt=wu;switch(ot){case"L":return kt.getLineLength(g,et,ut[0],ut[1]);case"C":return getCubicArcLength([g,ut[0],ut[2],ut[4]],[et,ut[1],ut[3],ut[5]],1);case"Q":return getQuadraticArcLength([g,ut[0],ut[2]],[et,ut[1],ut[3]],1);case"A":ct=0;const Tt=ut[4],Rt=ut[5],Ft=ut[4]+Rt;let jt=Math.PI/180;if(Math.abs(Tt-Ft)<jt&&(jt=Math.abs(Tt-Ft)),dt=kt.getPointOnEllipticalArc(ut[0],ut[1],ut[2],ut[3],Tt,0),Rt<0)for(St=Tt-jt;St>Ft;St-=jt)ft=kt.getPointOnEllipticalArc(ut[0],ut[1],ut[2],ut[3],St,0),ct+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),dt=ft;else for(St=Tt+jt;St<Ft;St+=jt)ft=kt.getPointOnEllipticalArc(ut[0],ut[1],ut[2],ut[3],St,0),ct+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),dt=ft;return ft=kt.getPointOnEllipticalArc(ut[0],ut[1],ut[2],ut[3],Ft,0),ct+=kt.getLineLength(dt.x,dt.y,ft.x,ft.y),ct}return 0}static convertEndpointToCenterParameterization(g,et,ot,ut,ct,dt,ft,St,kt){const Tt=kt*(Math.PI/180),Rt=Math.cos(Tt)*(g-ot)/2+Math.sin(Tt)*(et-ut)/2,Ft=-1*Math.sin(Tt)*(g-ot)/2+Math.cos(Tt)*(et-ut)/2,jt=Rt*Rt/(ft*ft)+Ft*Ft/(St*St);jt>1&&(ft*=Math.sqrt(jt),St*=Math.sqrt(jt));let Bt=Math.sqrt((ft*ft*(St*St)-ft*ft*(Ft*Ft)-St*St*(Rt*Rt))/(ft*ft*(Ft*Ft)+St*St*(Rt*Rt)));ct===dt&&(Bt*=-1),isNaN(Bt)&&(Bt=0);const zt=Bt*ft*Ft/St,Ht=Bt*-St*Rt/ft,Ut=(g+ot)/2+Math.cos(Tt)*zt-Math.sin(Tt)*Ht,Kt=(et+ut)/2+Math.sin(Tt)*zt+Math.cos(Tt)*Ht,Yt=function(xr){return Math.sqrt(xr[0]*xr[0]+xr[1]*xr[1])},er=function(xr,yr){return(xr[0]*yr[0]+xr[1]*yr[1])/(Yt(xr)*Yt(yr))},ar=function(xr,yr){return(xr[0]*yr[1]<xr[1]*yr[0]?-1:1)*Math.acos(er(xr,yr))},ir=ar([1,0],[(Rt-zt)/ft,(Ft-Ht)/St]),lr=[(Rt-zt)/ft,(Ft-Ht)/St],cr=[(-1*Rt-zt)/ft,(-1*Ft-Ht)/St];let vr=ar(lr,cr);return er(lr,cr)<=-1&&(vr=Math.PI),er(lr,cr)>=1&&(vr=0),dt===0&&vr>0&&(vr=vr-2*Math.PI),dt===1&&vr<0&&(vr=vr+2*Math.PI),[Ut,Kt,ft,St,ir,vr,Tt,dt]}};Path$1.prototype.className="Path";Path$1.prototype._attrsAffectingSize=["data"];_registerNode(Path$1);Factory.addGetterSetter(Path$1,"data");let Arrow$1=class extends Line$1{_sceneFunc(g){super._sceneFunc(g);const et=Math.PI*2,ot=this.points();let ut=ot;const ct=this.tension()!==0&&ot.length>4;ct&&(ut=this.getTensionPoints());const dt=this.pointerLength(),ft=ot.length;let St,kt;if(ct){const Ft=[ut[ut.length-4],ut[ut.length-3],ut[ut.length-2],ut[ut.length-1],ot[ft-2],ot[ft-1]],jt=Path$1.calcLength(ut[ut.length-4],ut[ut.length-3],"C",Ft),Bt=Path$1.getPointOnQuadraticBezier(Math.min(1,1-dt/jt),Ft[0],Ft[1],Ft[2],Ft[3],Ft[4],Ft[5]);St=ot[ft-2]-Bt.x,kt=ot[ft-1]-Bt.y}else St=ot[ft-2]-ot[ft-4],kt=ot[ft-1]-ot[ft-3];const Tt=(Math.atan2(kt,St)+et)%et,Rt=this.pointerWidth();this.pointerAtEnding()&&(g.save(),g.beginPath(),g.translate(ot[ft-2],ot[ft-1]),g.rotate(Tt),g.moveTo(0,0),g.lineTo(-dt,Rt/2),g.lineTo(-dt,-Rt/2),g.closePath(),g.restore(),this.__fillStroke(g)),this.pointerAtBeginning()&&(g.save(),g.beginPath(),g.translate(ot[0],ot[1]),ct?(St=(ut[0]+ut[2])/2-ot[0],kt=(ut[1]+ut[3])/2-ot[1]):(St=ot[2]-ot[0],kt=ot[3]-ot[1]),g.rotate((Math.atan2(-kt,-St)+et)%et),g.moveTo(0,0),g.lineTo(-dt,Rt/2),g.lineTo(-dt,-Rt/2),g.closePath(),g.restore(),this.__fillStroke(g))}__fillStroke(g){const et=this.dashEnabled();et&&(this.attrs.dashEnabled=!1,g.setLineDash([])),g.fillStrokeShape(this),et&&(this.attrs.dashEnabled=!0)}getSelfRect(){const g=super.getSelfRect(),et=this.pointerWidth()/2;return{x:g.x,y:g.y-et,width:g.width,height:g.height+et*2}}};Arrow$1.prototype.className="Arrow";_registerNode(Arrow$1);Factory.addGetterSetter(Arrow$1,"pointerLength",10,getNumberValidator());Factory.addGetterSetter(Arrow$1,"pointerWidth",10,getNumberValidator());Factory.addGetterSetter(Arrow$1,"pointerAtBeginning",!1);Factory.addGetterSetter(Arrow$1,"pointerAtEnding",!0);class Circle extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius()!==g/2&&this.radius(g/2)}setHeight(g){this.radius()!==g/2&&this.radius(g/2)}}Circle.prototype._centroid=!0;Circle.prototype.className="Circle";Circle.prototype._attrsAffectingSize=["radius"];_registerNode(Circle);Factory.addGetterSetter(Circle,"radius",0,getNumberValidator());let Ellipse$1=class extends Shape{_sceneFunc(g){const et=this.radiusX(),ot=this.radiusY();g.beginPath(),g.save(),et!==ot&&g.scale(1,ot/et),g.arc(0,0,et,0,Math.PI*2,!1),g.restore(),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(g){this.radiusX(g/2)}setHeight(g){this.radiusY(g/2)}};Ellipse$1.prototype.className="Ellipse";Ellipse$1.prototype._centroid=!0;Ellipse$1.prototype._attrsAffectingSize=["radiusX","radiusY"];_registerNode(Ellipse$1);Factory.addComponentsGetterSetter(Ellipse$1,"radius",["x","y"]);Factory.addGetterSetter(Ellipse$1,"radiusX",0,getNumberValidator());Factory.addGetterSetter(Ellipse$1,"radiusY",0,getNumberValidator());let Image$2=class SN extends Shape{constructor(g){super(g),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",et=>{this._removeImageLoad(et.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const g=this.image();g&&g.complete||g&&g.readyState===4||g&&g.addEventListener&&g.addEventListener("load",this._loadListener)}_removeImageLoad(g){g&&g.removeEventListener&&g.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const g=!!this.cornerRadius(),et=this.hasShadow();return g&&et?!0:super._useBufferCanvas(!0)}_sceneFunc(g){const et=this.getWidth(),ot=this.getHeight(),ut=this.cornerRadius(),ct=this.attrs.image;let dt;if(ct){const ft=this.attrs.cropWidth,St=this.attrs.cropHeight;ft&&St?dt=[ct,this.cropX(),this.cropY(),ft,St,0,0,et,ot]:dt=[ct,0,0,et,ot]}(this.hasFill()||this.hasStroke()||ut)&&(g.beginPath(),ut?Util.drawRoundedRectPath(g,et,ot,ut):g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)),ct&&(ut&&g.clip(),g.drawImage.apply(g,dt))}_hitFunc(g){const et=this.width(),ot=this.height(),ut=this.cornerRadius();g.beginPath(),ut?Util.drawRoundedRectPath(g,et,ot,ut):g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)}getWidth(){var g,et,ot;return(ot=(g=this.attrs.width)!==null&&g!==void 0?g:(et=this.image())===null||et===void 0?void 0:et.width)!==null&&ot!==void 0?ot:0}getHeight(){var g,et,ot;return(ot=(g=this.attrs.height)!==null&&g!==void 0?g:(et=this.image())===null||et===void 0?void 0:et.height)!==null&&ot!==void 0?ot:0}static fromURL(g,et,ot=null){const ut=Util.createImageElement();ut.onload=function(){const ct=new SN({image:ut});et(ct)},ut.onerror=ot,ut.crossOrigin="Anonymous",ut.src=g}};Image$2.prototype.className="Image";Image$2.prototype._attrsAffectingSize=["image"];_registerNode(Image$2);Factory.addGetterSetter(Image$2,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));Factory.addGetterSetter(Image$2,"image");Factory.addComponentsGetterSetter(Image$2,"crop",["x","y","width","height"]);Factory.addGetterSetter(Image$2,"cropX",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropY",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropWidth",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropHeight",0,getNumberValidator());const ATTR_CHANGE_LIST$2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CHANGE_KONVA$1="Change.konva",NONE$1="none",UP="up",RIGHT$1="right",DOWN="down",LEFT$1="left",attrChangeListLen$1=ATTR_CHANGE_LIST$2.length;class Label extends Group$1{constructor(g){super(g),this.on("add.konva",function(et){this._addListeners(et.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(g){let et=this,ot;const ut=function(){et._sync()};for(ot=0;ot<attrChangeListLen$1;ot++)g.on(ATTR_CHANGE_LIST$2[ot]+CHANGE_KONVA$1,ut)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let g=this.getText(),et=this.getTag(),ot,ut,ct,dt,ft,St,kt;if(g&&et){switch(ot=g.width(),ut=g.height(),ct=et.pointerDirection(),dt=et.pointerWidth(),kt=et.pointerHeight(),ft=0,St=0,ct){case UP:ft=ot/2,St=-1*kt;break;case RIGHT$1:ft=ot+dt,St=ut/2;break;case DOWN:ft=ot/2,St=ut+kt;break;case LEFT$1:ft=-1*dt,St=ut/2;break}et.setAttrs({x:-1*ft,y:-1*St,width:ot,height:ut}),g.setAttrs({x:-1*ft,y:-1*St})}}}Label.prototype.className="Label";_registerNode(Label);class Tag extends Shape{_sceneFunc(g){const et=this.width(),ot=this.height(),ut=this.pointerDirection(),ct=this.pointerWidth(),dt=this.pointerHeight(),ft=this.cornerRadius();let St=0,kt=0,Tt=0,Rt=0;typeof ft=="number"?St=kt=Tt=Rt=Math.min(ft,et/2,ot/2):(St=Math.min(ft[0]||0,et/2,ot/2),kt=Math.min(ft[1]||0,et/2,ot/2),Rt=Math.min(ft[2]||0,et/2,ot/2),Tt=Math.min(ft[3]||0,et/2,ot/2)),g.beginPath(),g.moveTo(St,0),ut===UP&&(g.lineTo((et-ct)/2,0),g.lineTo(et/2,-1*dt),g.lineTo((et+ct)/2,0)),g.lineTo(et-kt,0),g.arc(et-kt,kt,kt,Math.PI*3/2,0,!1),ut===RIGHT$1&&(g.lineTo(et,(ot-dt)/2),g.lineTo(et+ct,ot/2),g.lineTo(et,(ot+dt)/2)),g.lineTo(et,ot-Rt),g.arc(et-Rt,ot-Rt,Rt,0,Math.PI/2,!1),ut===DOWN&&(g.lineTo((et+ct)/2,ot),g.lineTo(et/2,ot+dt),g.lineTo((et-ct)/2,ot)),g.lineTo(Tt,ot),g.arc(Tt,ot-Tt,Tt,Math.PI/2,Math.PI,!1),ut===LEFT$1&&(g.lineTo(0,(ot+dt)/2),g.lineTo(-1*ct,ot/2),g.lineTo(0,(ot-dt)/2)),g.lineTo(0,St),g.arc(St,St,St,Math.PI,Math.PI*3/2,!1),g.closePath(),g.fillStrokeShape(this)}getSelfRect(){let g=0,et=0,ot=this.pointerWidth(),ut=this.pointerHeight(),ct=this.pointerDirection(),dt=this.width(),ft=this.height();return ct===UP?(et-=ut,ft+=ut):ct===DOWN?ft+=ut:ct===LEFT$1?(g-=ot*1.5,dt+=ot):ct===RIGHT$1&&(dt+=ot*1.5),{x:g,y:et,width:dt,height:ft}}}Tag.prototype.className="Tag";_registerNode(Tag);Factory.addGetterSetter(Tag,"pointerDirection",NONE$1);Factory.addGetterSetter(Tag,"pointerWidth",0,getNumberValidator());Factory.addGetterSetter(Tag,"pointerHeight",0,getNumberValidator());Factory.addGetterSetter(Tag,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));let Rect$2=class extends Shape{_sceneFunc(g){const et=this.cornerRadius(),ot=this.width(),ut=this.height();g.beginPath(),et?Util.drawRoundedRectPath(g,ot,ut,et):g.rect(0,0,ot,ut),g.closePath(),g.fillStrokeShape(this)}};Rect$2.prototype.className="Rect";_registerNode(Rect$2);Factory.addGetterSetter(Rect$2,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));class RegularPolygon extends Shape{_sceneFunc(g){const et=this._getPoints(),ot=this.radius(),ut=this.sides(),ct=this.cornerRadius();if(g.beginPath(),ct)Util.drawRoundedPolygonPath(g,et,ut,ot,ct);else{g.moveTo(et[0].x,et[0].y);for(let dt=1;dt<et.length;dt++)g.lineTo(et[dt].x,et[dt].y)}g.closePath(),g.fillStrokeShape(this)}_getPoints(){const g=this.attrs.sides,et=this.attrs.radius||0,ot=[];for(let ut=0;ut<g;ut++)ot.push({x:et*Math.sin(ut*2*Math.PI/g),y:-1*et*Math.cos(ut*2*Math.PI/g)});return ot}getSelfRect(){const g=this._getPoints();let et=g[0].x,ot=g[0].y,ut=g[0].x,ct=g[0].y;return g.forEach(dt=>{et=Math.min(et,dt.x),ot=Math.max(ot,dt.x),ut=Math.min(ut,dt.y),ct=Math.max(ct,dt.y)}),{x:et,y:ut,width:ot-et,height:ct-ut}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}}RegularPolygon.prototype.className="RegularPolygon";RegularPolygon.prototype._centroid=!0;RegularPolygon.prototype._attrsAffectingSize=["radius"];_registerNode(RegularPolygon);Factory.addGetterSetter(RegularPolygon,"radius",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"sides",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));const PIx2=Math.PI*2;class Ring extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.innerRadius(),0,PIx2,!1),g.moveTo(this.outerRadius(),0),g.arc(0,0,this.outerRadius(),PIx2,0,!0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}}Ring.prototype.className="Ring";Ring.prototype._centroid=!0;Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Ring);Factory.addGetterSetter(Ring,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Ring,"outerRadius",0,getNumberValidator());class Sprite extends Shape{constructor(g){super(g),this._updated=!0,this.anim=new Animation(()=>{const et=this._updated;return this._updated=!1,et}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(g){const et=this.animation(),ot=this.frameIndex(),ut=ot*4,ct=this.animations()[et],dt=this.frameOffsets(),ft=ct[ut+0],St=ct[ut+1],kt=ct[ut+2],Tt=ct[ut+3],Rt=this.image();if((this.hasFill()||this.hasStroke())&&(g.beginPath(),g.rect(0,0,kt,Tt),g.closePath(),g.fillStrokeShape(this)),Rt)if(dt){const Ft=dt[et],jt=ot*2;g.drawImage(Rt,ft,St,kt,Tt,Ft[jt+0],Ft[jt+1],kt,Tt)}else g.drawImage(Rt,ft,St,kt,Tt,0,0,kt,Tt)}_hitFunc(g){const et=this.animation(),ot=this.frameIndex(),ut=ot*4,ct=this.animations()[et],dt=this.frameOffsets(),ft=ct[ut+2],St=ct[ut+3];if(g.beginPath(),dt){const kt=dt[et],Tt=ot*2;g.rect(kt[Tt+0],kt[Tt+1],ft,St)}else g.rect(0,0,ft,St);g.closePath(),g.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const g=this;this.interval=setInterval(function(){g._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const g=this.getLayer();this.anim.setLayers(g),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const g=this.frameIndex(),et=this.animation(),ot=this.animations(),ut=ot[et],ct=ut.length/4;g<ct-1?this.frameIndex(g+1):this.frameIndex(0)}}Sprite.prototype.className="Sprite";_registerNode(Sprite);Factory.addGetterSetter(Sprite,"animation");Factory.addGetterSetter(Sprite,"animations");Factory.addGetterSetter(Sprite,"frameOffsets");Factory.addGetterSetter(Sprite,"image");Factory.addGetterSetter(Sprite,"frameIndex",0,getNumberValidator());Factory.addGetterSetter(Sprite,"frameRate",17,getNumberValidator());Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Star extends Shape{_sceneFunc(g){const et=this.innerRadius(),ot=this.outerRadius(),ut=this.numPoints();g.beginPath(),g.moveTo(0,0-ot);for(let ct=1;ct<ut*2;ct++){const dt=ct%2===0?ot:et,ft=dt*Math.sin(ct*Math.PI/ut),St=-1*dt*Math.cos(ct*Math.PI/ut);g.lineTo(ft,St)}g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(g){this.outerRadius(g/2)}setHeight(g){this.outerRadius(g/2)}}Star.prototype.className="Star";Star.prototype._centroid=!0;Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Star);Factory.addGetterSetter(Star,"numPoints",5,getNumberValidator());Factory.addGetterSetter(Star,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Star,"outerRadius",0,getNumberValidator());function stringToArray(it){return[...it].reduce((g,et,ot,ut)=>{if(/\p{Emoji}/u.test(et)){const ct=ut[ot+1];ct&&/\p{Emoji_Modifier}|\u200D/u.test(ct)?(g.push(et+ct),ut[ot+1]=""):g.push(et)}else/\p{Regional_Indicator}{2}/u.test(et+(ut[ot+1]||""))?g.push(et+ut[ot+1]):ot>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(et)?g[g.length-1]+=et:et&&g.push(et);return g},[])}const AUTO="auto",CENTER="center",INHERIT="inherit",JUSTIFY="justify",CHANGE_KONVA="Change.konva",CONTEXT_2D="2d",DASH="-",LEFT="left",TEXT="text",TEXT_UPPER="Text",TOP="top",BOTTOM="bottom",MIDDLE="middle",NORMAL$1="normal",PX_SPACE="px ",SPACE=" ",RIGHT="right",RTL="rtl",WORD="word",CHAR="char",NONE="none",ELLIPSIS="",ATTR_CHANGE_LIST$1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],attrChangeListLen=ATTR_CHANGE_LIST$1.length;function normalizeFontFamily(it){return it.split(",").map(g=>{g=g.trim();const et=g.indexOf(" ")>=0,ot=g.indexOf('"')>=0||g.indexOf("'")>=0;return et&&!ot&&(g=`"${g}"`),g}).join(", ")}let dummyContext;function getDummyContext(){return dummyContext||(dummyContext=Util.createCanvasElement().getContext(CONTEXT_2D),dummyContext)}function _fillFunc$1(it){it.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _strokeFunc$1(it){it.setAttr("miterLimit",2),it.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function checkDefaultFill(it){return it=it||{},!it.fillLinearGradientColorStops&&!it.fillRadialGradientColorStops&&!it.fillPatternImage&&(it.fill=it.fill||"black"),it}let Text$2=class extends Shape{constructor(g){super(checkDefaultFill(g)),this._partialTextX=0,this._partialTextY=0;for(let et=0;et<attrChangeListLen;et++)this.on(ATTR_CHANGE_LIST$1[et]+CHANGE_KONVA,this._setTextData);this._setTextData()}_sceneFunc(g){var et,ot;const ut=this.textArr,ct=ut.length;if(!this.text())return;let dt=this.padding(),ft=this.fontSize(),St=this.lineHeight()*ft,kt=this.verticalAlign(),Tt=this.direction(),Rt=0,Ft=this.align(),jt=this.getWidth(),Bt=this.letterSpacing(),zt=this.charRenderFunc(),Ht=this.fill(),Ut=this.textDecoration(),Kt=Ut.indexOf("underline")!==-1,Yt=Ut.indexOf("line-through")!==-1,er;Tt=Tt===INHERIT?g.direction:Tt;let ar=St/2,ir=MIDDLE;if(!Konva$2.legacyTextRendering){const lr=this.measureSize("M");ir="alphabetic";const cr=(et=lr.fontBoundingBoxAscent)!==null&&et!==void 0?et:lr.actualBoundingBoxAscent,vr=(ot=lr.fontBoundingBoxDescent)!==null&&ot!==void 0?ot:lr.actualBoundingBoxDescent;ar=(cr-vr)/2+St/2}for(Tt===RTL&&g.setAttr("direction",Tt),g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",ir),g.setAttr("textAlign",LEFT),kt===MIDDLE?Rt=(this.getHeight()-ct*St-dt*2)/2:kt===BOTTOM&&(Rt=this.getHeight()-ct*St-dt*2),g.translate(dt,Rt+dt),er=0;er<ct;er++){let lr=0,cr=0;const vr=ut[er],xr=vr.text,yr=vr.width,Sr=vr.lastInParagraph;if(g.save(),Ft===RIGHT?lr+=jt-yr-dt*2:Ft===CENTER&&(lr+=(jt-yr-dt*2)/2),Kt){g.save(),g.beginPath();const kr=Konva$2.legacyTextRendering?Math.round(ft/2):Math.round(ft/4),Pr=lr,Or=ar+cr+kr;g.moveTo(Pr,Or);const hr=Ft===JUSTIFY&&!Sr?jt-dt*2:yr;g.lineTo(Pr+Math.round(hr),Or),g.lineWidth=ft/15;const Tr=this._getLinearGradient();g.strokeStyle=Tr||Ht,g.stroke(),g.restore()}if(Tt!==RTL&&(Bt!==0||Ft===JUSTIFY||zt)){const kr=xr.split(" ").length-1,Pr=stringToArray(xr);for(let Or=0;Or<Pr.length;Or++){const hr=Pr[Or];if(hr===" "&&!Sr&&Ft===JUSTIFY&&(lr+=(jt-dt*2-yr)/kr),this._partialTextX=lr,this._partialTextY=ar+cr,this._partialText=hr,zt){g.save();const mr=ut.slice(0,er).reduce((Dr,Cr)=>Dr+stringToArray(Cr.text).length,0),Er=Or+mr;zt({char:hr,index:Er,x:lr,y:ar+cr,lineIndex:er,column:Or,isLastInLine:Sr,width:this.measureSize(hr).width,context:g})}g.fillStrokeShape(this),zt&&g.restore(),lr+=this.measureSize(hr).width+Bt}}else Bt!==0&&g.setAttr("letterSpacing",`${Bt}px`),this._partialTextX=lr,this._partialTextY=ar+cr,this._partialText=xr,g.fillStrokeShape(this);if(Yt){g.save(),g.beginPath();const kr=Konva$2.legacyTextRendering?0:-Math.round(ft/4),Pr=Ft===JUSTIFY?0:lr;g.moveTo(Pr,ar+cr+kr);const Or=Ft===JUSTIFY&&!Sr?jt-dt*2:yr;g.lineTo(Pr+Math.round(Or),ar+cr+kr),g.lineWidth=ft/15;const hr=this._getLinearGradient();g.strokeStyle=hr||Ht,g.stroke(),g.restore()}g.restore(),ct>1&&(ar+=St)}}_hitFunc(g){const et=this.getWidth(),ot=this.getHeight();g.beginPath(),g.rect(0,0,et,ot),g.closePath(),g.fillStrokeShape(this)}setText(g){const et=Util._isString(g)?g:g==null?"":g+"";return this._setAttr(TEXT,et),this}getWidth(){return this.attrs.width===AUTO||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===AUTO||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(g){var et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft;let jt=getDummyContext(),Bt=this.fontSize(),zt;jt.save(),jt.font=this._getContextFont(),zt=jt.measureText(g),jt.restore();const Ht=Bt/100;return{actualBoundingBoxAscent:(et=zt.actualBoundingBoxAscent)!==null&&et!==void 0?et:71.58203125*Ht,actualBoundingBoxDescent:(ot=zt.actualBoundingBoxDescent)!==null&&ot!==void 0?ot:0,actualBoundingBoxLeft:(ut=zt.actualBoundingBoxLeft)!==null&&ut!==void 0?ut:-7.421875*Ht,actualBoundingBoxRight:(ct=zt.actualBoundingBoxRight)!==null&&ct!==void 0?ct:75.732421875*Ht,alphabeticBaseline:(dt=zt.alphabeticBaseline)!==null&&dt!==void 0?dt:0,emHeightAscent:(ft=zt.emHeightAscent)!==null&&ft!==void 0?ft:100*Ht,emHeightDescent:(St=zt.emHeightDescent)!==null&&St!==void 0?St:-20*Ht,fontBoundingBoxAscent:(kt=zt.fontBoundingBoxAscent)!==null&&kt!==void 0?kt:91*Ht,fontBoundingBoxDescent:(Tt=zt.fontBoundingBoxDescent)!==null&&Tt!==void 0?Tt:21*Ht,hangingBaseline:(Rt=zt.hangingBaseline)!==null&&Rt!==void 0?Rt:72.80000305175781*Ht,ideographicBaseline:(Ft=zt.ideographicBaseline)!==null&&Ft!==void 0?Ft:-21*Ht,width:zt.width,height:Bt}}_getContextFont(){return this.fontStyle()+SPACE+this.fontVariant()+SPACE+(this.fontSize()+PX_SPACE)+normalizeFontFamily(this.fontFamily())}_addTextLine(g){this.align()===JUSTIFY&&(g=g.trim());const ot=this._getTextWidth(g);return this.textArr.push({text:g,width:ot,lastInParagraph:!1})}_getTextWidth(g){const et=this.letterSpacing(),ot=g.length;return getDummyContext().measureText(g).width+et*ot}_setTextData(){let g=this.text().split(`
`),et=+this.fontSize(),ot=0,ut=this.lineHeight()*et,ct=this.attrs.width,dt=this.attrs.height,ft=ct!==AUTO&&ct!==void 0,St=dt!==AUTO&&dt!==void 0,kt=this.padding(),Tt=ct-kt*2,Rt=dt-kt*2,Ft=0,jt=this.wrap(),Bt=jt!==NONE,zt=jt!==CHAR&&Bt,Ht=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();const Ut=Ht?this._getTextWidth(ELLIPSIS):0;for(let Kt=0,Yt=g.length;Kt<Yt;++Kt){let er=g[Kt],ar=this._getTextWidth(er);if(ft&&ar>Tt)for(;er.length>0;){let ir=0,lr=stringToArray(er).length,cr="",vr=0;for(;ir<lr;){const xr=ir+lr>>>1,yr=stringToArray(er),Sr=yr.slice(0,xr+1).join(""),kr=this._getTextWidth(Sr);(Ht&&St&&Ft+ut>Rt?kr+Ut:kr)<=Tt?(ir=xr+1,cr=Sr,vr=kr):lr=xr}if(cr){if(zt){const Sr=stringToArray(er),kr=stringToArray(cr),Pr=Sr[kr.length],Or=Pr===SPACE||Pr===DASH;let hr;if(Or&&vr<=Tt)hr=kr.length;else{const Tr=kr.lastIndexOf(SPACE),mr=kr.lastIndexOf(DASH);hr=Math.max(Tr,mr)+1}hr>0&&(ir=hr,cr=Sr.slice(0,ir).join(""),vr=this._getTextWidth(cr))}if(cr=cr.trimRight(),this._addTextLine(cr),ot=Math.max(ot,vr),Ft+=ut,this._shouldHandleEllipsis(Ft)){this._tryToAddEllipsisToLastLine();break}if(er=stringToArray(er).slice(ir).join("").trimLeft(),er.length>0&&(ar=this._getTextWidth(er),ar<=Tt)){this._addTextLine(er),Ft+=ut,ot=Math.max(ot,ar);break}}else break}else this._addTextLine(er),Ft+=ut,ot=Math.max(ot,ar),this._shouldHandleEllipsis(Ft)&&Kt<Yt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),St&&Ft+ut>Rt)break}this.textHeight=et,this.textWidth=ot}_shouldHandleEllipsis(g){const et=+this.fontSize(),ot=this.lineHeight()*et,ut=this.attrs.height,ct=ut!==AUTO&&ut!==void 0,dt=this.padding(),ft=ut-dt*2;return!(this.wrap()!==NONE)||ct&&g+ot>ft}_tryToAddEllipsisToLastLine(){const g=this.attrs.width,et=g!==AUTO&&g!==void 0,ot=this.padding(),ut=g-ot*2,ct=this.ellipsis(),dt=this.textArr[this.textArr.length-1];!dt||!ct||(et&&(this._getTextWidth(dt.text+ELLIPSIS)<ut||(dt.text=dt.text.slice(0,dt.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(dt.text+ELLIPSIS))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const g=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,et=this.hasShadow();return g&&et?!0:super._useBufferCanvas()}};Text$2.prototype._fillFunc=_fillFunc$1;Text$2.prototype._strokeFunc=_strokeFunc$1;Text$2.prototype.className=TEXT_UPPER;Text$2.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];_registerNode(Text$2);Factory.overWriteSetter(Text$2,"width",getNumberOrAutoValidator());Factory.overWriteSetter(Text$2,"height",getNumberOrAutoValidator());Factory.addGetterSetter(Text$2,"direction",INHERIT);Factory.addGetterSetter(Text$2,"fontFamily","Arial");Factory.addGetterSetter(Text$2,"fontSize",12,getNumberValidator());Factory.addGetterSetter(Text$2,"fontStyle",NORMAL$1);Factory.addGetterSetter(Text$2,"fontVariant",NORMAL$1);Factory.addGetterSetter(Text$2,"padding",0,getNumberValidator());Factory.addGetterSetter(Text$2,"align",LEFT);Factory.addGetterSetter(Text$2,"verticalAlign",TOP);Factory.addGetterSetter(Text$2,"lineHeight",1,getNumberValidator());Factory.addGetterSetter(Text$2,"wrap",WORD);Factory.addGetterSetter(Text$2,"ellipsis",!1,getBooleanValidator());Factory.addGetterSetter(Text$2,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(Text$2,"text","",getStringValidator());Factory.addGetterSetter(Text$2,"textDecoration","");Factory.addGetterSetter(Text$2,"charRenderFunc",void 0);const EMPTY_STRING="",NORMAL="normal";function _fillFunc(it){it.fillText(this.partialText,0,0)}function _strokeFunc(it){it.strokeText(this.partialText,0,0)}class TextPath extends Shape{constructor(g){super(g),this.dummyCanvas=Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Path$1.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const et=this.pathLength;return g>et?null:Path$1.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=Path$1.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const et=this.textDecoration(),ot=this.fill(),ut=this.fontSize(),ct=this.glyphInfo,dt=et.indexOf("underline")!==-1,ft=et.indexOf("line-through")!==-1;dt&&g.beginPath();for(let St=0;St<ct.length;St++){g.save();const kt=ct[St].p0;g.translate(kt.x,kt.y),g.rotate(ct[St].rotation),this.partialText=ct[St].text,g.fillStrokeShape(this),dt&&(St===0&&g.moveTo(0,ut/2+1),g.lineTo(ct[St].width,ut/2+1)),g.restore()}if(dt&&(g.strokeStyle=ot,g.lineWidth=ut/20,g.stroke()),ft){g.beginPath();for(let St=0;St<ct.length;St++){g.save();const kt=ct[St].p0;g.translate(kt.x,kt.y),g.rotate(ct[St].rotation),St===0&&g.moveTo(0,0),g.lineTo(ct[St].width,0),g.restore()}g.strokeStyle=ot,g.lineWidth=ut/20,g.stroke()}g.restore()}_hitFunc(g){g.beginPath();const et=this.glyphInfo;if(et.length>=1){const ot=et[0].p0;g.moveTo(ot.x,ot.y)}for(let ot=0;ot<et.length;ot++){const ut=et[ot].p1;g.lineTo(ut.x,ut.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return Text$2.prototype.setText.call(this,g)}_getContextFont(){return Text$2.prototype._getContextFont.call(this)}_getTextSize(g){const ot=this.dummyCanvas.getContext("2d");ot.save(),ot.font=this._getContextFont();const ut=ot.measureText(g);return ot.restore(),{width:ut.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const g=stringToArray(this.text()),et=[];let ot=0;for(let Rt=0;Rt<g.length;Rt++)et.push({char:g[Rt],width:this._getTextSize(g[Rt]).width}),ot+=et[Rt].width;const{height:ut}=this._getTextSize(this.attrs.text);if(this.textWidth=ot,this.textHeight=ut,this.glyphInfo=[],!this.attrs.data)return null;const ct=this.letterSpacing(),dt=this.align(),ft=this.kerningFunc(),St=Math.max(this.textWidth+((this.attrs.text||"").length-1)*ct,0);let kt=0;dt==="center"&&(kt=Math.max(0,this.pathLength/2-St/2)),dt==="right"&&(kt=Math.max(0,this.pathLength-St));let Tt=kt;for(let Rt=0;Rt<et.length;Rt++){const Ft=this._getPointAtLength(Tt);if(!Ft)return;const jt=et[Rt].char;let Bt=et[Rt].width+ct;if(jt===" "&&dt==="justify"){const er=this.text().split(" ").length-1;Bt+=(this.pathLength-St)/er}const zt=this._getPointAtLength(Tt+Bt);if(!zt)return;const Ht=Path$1.getLineLength(Ft.x,Ft.y,zt.x,zt.y);let Ut=0;if(ft)try{Ut=ft(et[Rt-1].char,jt)*this.fontSize()}catch{Ut=0}Ft.x+=Ut,zt.x+=Ut,this.textWidth+=Ut;const Kt=Path$1.getPointOnLine(Ut+Ht/2,Ft.x,Ft.y,zt.x,zt.y),Yt=Math.atan2(zt.y-Ft.y,zt.x-Ft.x);this.glyphInfo.push({transposeX:Kt.x,transposeY:Kt.y,text:g[Rt],rotation:Yt,p0:Ft,p1:zt,width:Ht}),Tt+=Bt}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(kt){g.push(kt.p0.x),g.push(kt.p0.y),g.push(kt.p1.x),g.push(kt.p1.y)});let et=g[0]||0,ot=g[0]||0,ut=g[1]||0,ct=g[1]||0,dt,ft;for(let kt=0;kt<g.length/2;kt++)dt=g[kt*2],ft=g[kt*2+1],et=Math.min(et,dt),ot=Math.max(ot,dt),ut=Math.min(ut,ft),ct=Math.max(ct,ft);const St=this.fontSize();return{x:et-St/2,y:ut-St/2,width:ot-et+St,height:ct-ut+St}}destroy(){return Util.releaseCanvas(this.dummyCanvas),super.destroy()}}TextPath.prototype._fillFunc=_fillFunc;TextPath.prototype._strokeFunc=_strokeFunc;TextPath.prototype._fillFuncHit=_fillFunc;TextPath.prototype._strokeFuncHit=_strokeFunc;TextPath.prototype.className="TextPath";TextPath.prototype._attrsAffectingSize=["text","fontSize","data"];_registerNode(TextPath);Factory.addGetterSetter(TextPath,"data");Factory.addGetterSetter(TextPath,"fontFamily","Arial");Factory.addGetterSetter(TextPath,"fontSize",12,getNumberValidator());Factory.addGetterSetter(TextPath,"fontStyle",NORMAL);Factory.addGetterSetter(TextPath,"align","left");Factory.addGetterSetter(TextPath,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(TextPath,"textBaseline","middle");Factory.addGetterSetter(TextPath,"fontVariant",NORMAL);Factory.addGetterSetter(TextPath,"text",EMPTY_STRING);Factory.addGetterSetter(TextPath,"textDecoration","");Factory.addGetterSetter(TextPath,"kerningFunc",void 0);const EVENTS_NAME="tr-konva",ATTR_CHANGE_LIST=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(it=>it+`.${EVENTS_NAME}`).join(" "),NODES_RECT="nodesRect",TRANSFORM_CHANGE_STR=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],ANGLES={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},TOUCH_DEVICE="ontouchstart"in Konva$2._global;function getCursor(it,g,et){if(it==="rotater")return et;g+=Util.degToRad(ANGLES[it]||0);const ot=(Util.radToDeg(g)%360+360)%360;return Util._inRange(ot,315+22.5,360)||Util._inRange(ot,0,22.5)?"ns-resize":Util._inRange(ot,45-22.5,45+22.5)?"nesw-resize":Util._inRange(ot,90-22.5,90+22.5)?"ew-resize":Util._inRange(ot,135-22.5,135+22.5)?"nwse-resize":Util._inRange(ot,180-22.5,180+22.5)?"ns-resize":Util._inRange(ot,225-22.5,225+22.5)?"nesw-resize":Util._inRange(ot,270-22.5,270+22.5)?"ew-resize":Util._inRange(ot,315-22.5,315+22.5)?"nwse-resize":(Util.error("Transformer has unknown angle for cursor detection: "+ot),"pointer")}const ANCHORS_NAMES=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],MAX_SAFE_INTEGER=1e8;function getCenter(it){return{x:it.x+it.width/2*Math.cos(it.rotation)+it.height/2*Math.sin(-it.rotation),y:it.y+it.height/2*Math.cos(it.rotation)+it.width/2*Math.sin(it.rotation)}}function rotateAroundPoint(it,g,et){const ot=et.x+(it.x-et.x)*Math.cos(g)-(it.y-et.y)*Math.sin(g),ut=et.y+(it.x-et.x)*Math.sin(g)+(it.y-et.y)*Math.cos(g);return{...it,rotation:it.rotation+g,x:ot,y:ut}}function rotateAroundCenter(it,g){const et=getCenter(it);return rotateAroundPoint(it,g,et)}function getSnap(it,g,et){let ot=g;for(let ut=0;ut<it.length;ut++){const ct=Konva$2.getAngle(it[ut]),dt=Math.abs(ct-g)%(Math.PI*2);Math.min(dt,Math.PI*2-dt)<et&&(ot=ct)}return ot}let activeTransformersCount=0,Transformer$1=class extends Group$1{constructor(g){super(g),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ATTR_CHANGE_LIST,this.update),this.getNode()&&this.update()}attachTo(g){return this.setNode(g),this}setNode(g){return Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([g])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return EVENTS_NAME+this._id}setNodes(g=[]){this._nodes&&this._nodes.length&&this.detach();const et=g.filter(ut=>ut.isAncestorOf(this)?(Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=g=et,g.length===1&&this.useSingleNodeRotation()?this.rotation(g[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(ut=>{const ct=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(ut._attrsAffectingSize.length){const dt=ut._attrsAffectingSize.map(ft=>ft+"Change."+this._getEventNamespace()).join(" ");ut.on(dt,ct)}ut.on(TRANSFORM_CHANGE_STR.map(dt=>dt+`.${this._getEventNamespace()}`).join(" "),ct),ut.on(`absoluteTransformChange.${this._getEventNamespace()}`,ct),this._proxyDrag(ut)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(g){let et;g.on(`dragstart.${this._getEventNamespace()}`,ot=>{et=g.getAbsolutePosition(),!this.isDragging()&&g!==this.findOne(".back")&&this.startDrag(ot,!1)}),g.on(`dragmove.${this._getEventNamespace()}`,ot=>{if(!et)return;const ut=g.getAbsolutePosition(),ct=ut.x-et.x,dt=ut.y-et.y;this.nodes().forEach(ft=>{if(ft===g||ft.isDragging())return;const St=ft.getAbsolutePosition();ft.setAbsolutePosition({x:St.x+ct,y:St.y+dt}),ft.startDrag(ot)}),et=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(g=>{g.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(NODES_RECT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(NODES_RECT,this.__getNodeRect)}__getNodeShape(g,et=this.rotation(),ot){const ut=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ct=g.getAbsoluteScale(ot),dt=g.getAbsolutePosition(ot),ft=ut.x*ct.x-g.offsetX()*ct.x,St=ut.y*ct.y-g.offsetY()*ct.y,kt=(Konva$2.getAngle(g.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),Tt={x:dt.x+ft*Math.cos(kt)+St*Math.sin(-kt),y:dt.y+St*Math.cos(kt)+ft*Math.sin(kt),width:ut.width*ct.x,height:ut.height*ct.y,rotation:kt};return rotateAroundPoint(Tt,-Konva$2.getAngle(et),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-MAX_SAFE_INTEGER,y:-MAX_SAFE_INTEGER,width:0,height:0,rotation:0};const et=[];this.nodes().map(kt=>{const Tt=kt.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Rt=[{x:Tt.x,y:Tt.y},{x:Tt.x+Tt.width,y:Tt.y},{x:Tt.x+Tt.width,y:Tt.y+Tt.height},{x:Tt.x,y:Tt.y+Tt.height}],Ft=kt.getAbsoluteTransform();Rt.forEach(function(jt){const Bt=Ft.point(jt);et.push(Bt)})});const ot=new Transform;ot.rotate(-Konva$2.getAngle(this.rotation()));let ut=1/0,ct=1/0,dt=-1/0,ft=-1/0;et.forEach(function(kt){const Tt=ot.point(kt);ut===void 0&&(ut=dt=Tt.x,ct=ft=Tt.y),ut=Math.min(ut,Tt.x),ct=Math.min(ct,Tt.y),dt=Math.max(dt,Tt.x),ft=Math.max(ft,Tt.y)}),ot.invert();const St=ot.point({x:ut,y:ct});return{x:St.x,y:St.y,width:dt-ut,height:ft-ct,rotation:Konva$2.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ANCHORS_NAMES.forEach(g=>{this._createAnchor(g)}),this._createAnchor("rotater")}_createAnchor(g){const et=new Rect$2({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:g+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:TOUCH_DEVICE?10:"auto"}),ot=this;et.on("mousedown touchstart",function(ut){ot._handleMouseDown(ut)}),et.on("dragstart",ut=>{et.stopDrag(),ut.cancelBubble=!0}),et.on("dragend",ut=>{ut.cancelBubble=!0}),et.on("mouseenter",()=>{const ut=Konva$2.getAngle(this.rotation()),ct=this.rotateAnchorCursor(),dt=getCursor(g,ut,ct);et.getStage().content&&(et.getStage().content.style.cursor=dt),this._cursorChange=!0}),et.on("mouseout",()=>{et.getStage().content&&(et.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(et)}_createBack(){const g=new Shape({name:"back",width:0,height:0,sceneFunc(et,ot){const ut=ot.getParent(),ct=ut.padding();et.beginPath(),et.rect(-ct,-ct,ot.width()+ct*2,ot.height()+ct*2),et.moveTo(ot.width()/2,-ct),ut.rotateEnabled()&&ut.rotateLineVisible()&&et.lineTo(ot.width()/2,-ut.rotateAnchorOffset()*Util._sign(ot.height())-ct),et.fillStrokeShape(ot)},hitFunc:(et,ot)=>{if(!this.shouldOverdrawWholeArea())return;const ut=this.padding();et.beginPath(),et.rect(-ut,-ut,ot.width()+ut*2,ot.height()+ut*2),et.fillStrokeShape(ot)}});this.add(g),this._proxyDrag(g),g.on("dragstart",et=>{et.cancelBubble=!0}),g.on("dragmove",et=>{et.cancelBubble=!0}),g.on("dragend",et=>{et.cancelBubble=!0}),this.on("dragmove",et=>{this.update()})}_handleMouseDown(g){if(this._transforming)return;this._movingAnchorName=g.target.name().split(" ")[0];const et=this._getNodeRect(),ot=et.width,ut=et.height,ct=Math.sqrt(Math.pow(ot,2)+Math.pow(ut,2));this.sin=Math.abs(ut/ct),this.cos=Math.abs(ot/ct),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const dt=g.target.getAbsolutePosition(),ft=g.target.getStage().getPointerPosition();this._anchorDragOffset={x:ft.x-dt.x,y:ft.y-dt.y},activeTransformersCount++,this._fire("transformstart",{evt:g.evt,target:this.getNode()}),this._nodes.forEach(St=>{St._fire("transformstart",{evt:g.evt,target:St})})}_handleMouseMove(g){let et,ot,ut;const ct=this.findOne("."+this._movingAnchorName),dt=ct.getStage();dt.setPointersPositions(g);const ft=dt.getPointerPosition();let St={x:ft.x-this._anchorDragOffset.x,y:ft.y-this._anchorDragOffset.y};const kt=ct.getAbsolutePosition();this.anchorDragBoundFunc()&&(St=this.anchorDragBoundFunc()(kt,St,g)),ct.setAbsolutePosition(St);const Tt=ct.getAbsolutePosition();if(kt.x===Tt.x&&kt.y===Tt.y)return;if(this._movingAnchorName==="rotater"){const Kt=this._getNodeRect();et=ct.x()-Kt.width/2,ot=-ct.y()+Kt.height/2;let Yt=Math.atan2(-ot,et)+Math.PI/2;Kt.height<0&&(Yt-=Math.PI);const ar=Konva$2.getAngle(this.rotation())+Yt,ir=Konva$2.getAngle(this.rotationSnapTolerance()),cr=getSnap(this.rotationSnaps(),ar,ir)-Kt.rotation,vr=rotateAroundCenter(Kt,cr);this._fitNodesInto(vr,g);return}const Rt=this.shiftBehavior();let Ft;Rt==="inverted"?Ft=this.keepRatio()&&!g.shiftKey:Rt==="none"?Ft=this.keepRatio():Ft=this.keepRatio()||g.shiftKey;let jt=this.centeredScaling()||g.altKey;if(this._movingAnchorName==="top-left"){if(Ft){const Kt=jt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};ut=Math.sqrt(Math.pow(Kt.x-ct.x(),2)+Math.pow(Kt.y-ct.y(),2));const Yt=this.findOne(".top-left").x()>Kt.x?-1:1,er=this.findOne(".top-left").y()>Kt.y?-1:1;et=ut*this.cos*Yt,ot=ut*this.sin*er,this.findOne(".top-left").x(Kt.x-et),this.findOne(".top-left").y(Kt.y-ot)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(ct.y());else if(this._movingAnchorName==="top-right"){if(Ft){const Kt=jt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};ut=Math.sqrt(Math.pow(ct.x()-Kt.x,2)+Math.pow(Kt.y-ct.y(),2));const Yt=this.findOne(".top-right").x()<Kt.x?-1:1,er=this.findOne(".top-right").y()>Kt.y?-1:1;et=ut*this.cos*Yt,ot=ut*this.sin*er,this.findOne(".top-right").x(Kt.x+et),this.findOne(".top-right").y(Kt.y-ot)}var Bt=ct.position();this.findOne(".top-left").y(Bt.y),this.findOne(".bottom-right").x(Bt.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(ct.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(ct.x());else if(this._movingAnchorName==="bottom-left"){if(Ft){const Kt=jt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};ut=Math.sqrt(Math.pow(Kt.x-ct.x(),2)+Math.pow(ct.y()-Kt.y,2));const Yt=Kt.x<ct.x()?-1:1,er=ct.y()<Kt.y?-1:1;et=ut*this.cos*Yt,ot=ut*this.sin*er,ct.x(Kt.x-et),ct.y(Kt.y+ot)}Bt=ct.position(),this.findOne(".top-left").x(Bt.x),this.findOne(".bottom-right").y(Bt.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(ct.y());else if(this._movingAnchorName==="bottom-right"){if(Ft){const Kt=jt?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};ut=Math.sqrt(Math.pow(ct.x()-Kt.x,2)+Math.pow(ct.y()-Kt.y,2));const Yt=this.findOne(".bottom-right").x()<Kt.x?-1:1,er=this.findOne(".bottom-right").y()<Kt.y?-1:1;et=ut*this.cos*Yt,ot=ut*this.sin*er,this.findOne(".bottom-right").x(Kt.x+et),this.findOne(".bottom-right").y(Kt.y+ot)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(jt=this.centeredScaling()||g.altKey,jt){const Kt=this.findOne(".top-left"),Yt=this.findOne(".bottom-right"),er=Kt.x(),ar=Kt.y(),ir=this.getWidth()-Yt.x(),lr=this.getHeight()-Yt.y();Yt.move({x:-er,y:-ar}),Kt.move({x:ir,y:lr})}const zt=this.findOne(".top-left").getAbsolutePosition();et=zt.x,ot=zt.y;const Ht=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Ut=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:et,y:ot,width:Ht,height:Ut,rotation:Konva$2.getAngle(this.rotation())},g)}_handleMouseUp(g){this._removeEvents(g)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(g){var et;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const ot=this.getNode();activeTransformersCount--,this._fire("transformend",{evt:g,target:ot}),(et=this.getLayer())===null||et===void 0||et.batchDraw(),ot&&this._nodes.forEach(ut=>{var ct;ut._fire("transformend",{evt:g,target:ut}),(ct=ut.getLayer())===null||ct===void 0||ct.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(g,et){const ot=this._getNodeRect(),ut=1;if(Util._inRange(g.width,-this.padding()*2-ut,ut)){this.update();return}if(Util._inRange(g.height,-this.padding()*2-ut,ut)){this.update();return}const ct=new Transform;if(ct.rotate(Konva$2.getAngle(this.rotation())),this._movingAnchorName&&g.width<0&&this._movingAnchorName.indexOf("left")>=0){const Ft=ct.point({x:-this.padding()*2,y:0});g.x+=Ft.x,g.y+=Ft.y,g.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=Ft.x,this._anchorDragOffset.y-=Ft.y}else if(this._movingAnchorName&&g.width<0&&this._movingAnchorName.indexOf("right")>=0){const Ft=ct.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=Ft.x,this._anchorDragOffset.y-=Ft.y,g.width+=this.padding()*2}if(this._movingAnchorName&&g.height<0&&this._movingAnchorName.indexOf("top")>=0){const Ft=ct.point({x:0,y:-this.padding()*2});g.x+=Ft.x,g.y+=Ft.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=Ft.x,this._anchorDragOffset.y-=Ft.y,g.height+=this.padding()*2}else if(this._movingAnchorName&&g.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const Ft=ct.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=Ft.x,this._anchorDragOffset.y-=Ft.y,g.height+=this.padding()*2}if(this.boundBoxFunc()){const Ft=this.boundBoxFunc()(ot,g);Ft?g=Ft:Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const dt=1e7,ft=new Transform;ft.translate(ot.x,ot.y),ft.rotate(ot.rotation),ft.scale(ot.width/dt,ot.height/dt);const St=new Transform,kt=g.width/dt,Tt=g.height/dt;this.flipEnabled()===!1?(St.translate(g.x,g.y),St.rotate(g.rotation),St.translate(g.width<0?g.width:0,g.height<0?g.height:0),St.scale(Math.abs(kt),Math.abs(Tt))):(St.translate(g.x,g.y),St.rotate(g.rotation),St.scale(kt,Tt));const Rt=St.multiply(ft.invert());this._nodes.forEach(Ft=>{var jt;if(!Ft.getStage())return;const Bt=Ft.getParent().getAbsoluteTransform(),zt=Ft.getTransform().copy();zt.translate(Ft.offsetX(),Ft.offsetY());const Ht=new Transform;Ht.multiply(Bt.copy().invert()).multiply(Rt).multiply(Bt).multiply(zt);const Ut=Ht.decompose();Ft.setAttrs(Ut),(jt=Ft.getLayer())===null||jt===void 0||jt.batchDraw()}),this.rotation(Util._getRotation(g.rotation)),this._nodes.forEach(Ft=>{this._fire("transform",{evt:et,target:Ft}),Ft._fire("transform",{evt:et,target:Ft})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(g,et){this.findOne(g).setAttrs(et)}update(){var g;const et=this._getNodeRect();this.rotation(Util._getRotation(et.rotation));const ot=et.width,ut=et.height,ct=this.enabledAnchors(),dt=this.resizeEnabled(),ft=this.padding(),St=this.anchorSize(),kt=this.find("._anchor");kt.forEach(Rt=>{Rt.setAttrs({width:St,height:St,offsetX:St/2,offsetY:St/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:St/2+ft,offsetY:St/2+ft,visible:dt&&ct.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:ot/2,y:0,offsetY:St/2+ft,visible:dt&&ct.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:ot,y:0,offsetX:St/2-ft,offsetY:St/2+ft,visible:dt&&ct.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:ut/2,offsetX:St/2+ft,visible:dt&&ct.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:ot,y:ut/2,offsetX:St/2-ft,visible:dt&&ct.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:ut,offsetX:St/2+ft,offsetY:St/2-ft,visible:dt&&ct.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:ot/2,y:ut,offsetY:St/2-ft,visible:dt&&ct.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:ot,y:ut,offsetX:St/2-ft,offsetY:St/2-ft,visible:dt&&ct.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:ot/2,y:-this.rotateAnchorOffset()*Util._sign(ut)-ft,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:ot,height:ut,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(Rt=>Rt.draggable()),x:0,y:0});const Tt=this.anchorStyleFunc();Tt&&kt.forEach(Rt=>{Tt(Rt)}),(g=this.getLayer())===null||g===void 0||g.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const g=this.findOne("."+this._movingAnchorName);g&&g.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Group$1.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Node$1.prototype.toObject.call(this)}clone(g){return Node$1.prototype.clone.call(this,g)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Transformer$1.isTransforming=()=>activeTransformersCount>0;function validateAnchors(it){return it instanceof Array||Util.warn("enabledAnchors value should be an array"),it instanceof Array&&it.forEach(function(g){ANCHORS_NAMES.indexOf(g)===-1&&Util.warn("Unknown anchor name: "+g+". Available names are: "+ANCHORS_NAMES.join(", "))}),it||[]}Transformer$1.prototype.className="Transformer";_registerNode(Transformer$1);Factory.addGetterSetter(Transformer$1,"enabledAnchors",ANCHORS_NAMES,validateAnchors);Factory.addGetterSetter(Transformer$1,"flipEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Transformer$1,"resizeEnabled",!0);Factory.addGetterSetter(Transformer$1,"anchorSize",10,getNumberValidator());Factory.addGetterSetter(Transformer$1,"rotateEnabled",!0);Factory.addGetterSetter(Transformer$1,"rotateLineVisible",!0);Factory.addGetterSetter(Transformer$1,"rotationSnaps",[]);Factory.addGetterSetter(Transformer$1,"rotateAnchorOffset",50,getNumberValidator());Factory.addGetterSetter(Transformer$1,"rotateAnchorCursor","crosshair");Factory.addGetterSetter(Transformer$1,"rotationSnapTolerance",5,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderEnabled",!0);Factory.addGetterSetter(Transformer$1,"anchorStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer$1,"anchorStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer$1,"anchorFill","white");Factory.addGetterSetter(Transformer$1,"anchorCornerRadius",0,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer$1,"borderStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer$1,"borderDash");Factory.addGetterSetter(Transformer$1,"keepRatio",!0);Factory.addGetterSetter(Transformer$1,"shiftBehavior","default");Factory.addGetterSetter(Transformer$1,"centeredScaling",!1);Factory.addGetterSetter(Transformer$1,"ignoreStroke",!1);Factory.addGetterSetter(Transformer$1,"padding",0,getNumberValidator());Factory.addGetterSetter(Transformer$1,"nodes");Factory.addGetterSetter(Transformer$1,"node");Factory.addGetterSetter(Transformer$1,"boundBoxFunc");Factory.addGetterSetter(Transformer$1,"anchorDragBoundFunc");Factory.addGetterSetter(Transformer$1,"anchorStyleFunc");Factory.addGetterSetter(Transformer$1,"shouldOverdrawWholeArea",!1);Factory.addGetterSetter(Transformer$1,"useSingleNodeRotation",!0);Factory.backCompat(Transformer$1,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Wedge extends Shape{_sceneFunc(g){g.beginPath(),g.arc(0,0,this.radius(),0,Konva$2.getAngle(this.angle()),this.clockwise()),g.lineTo(0,0),g.closePath(),g.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(g){this.radius(g/2)}setHeight(g){this.radius(g/2)}}Wedge.prototype.className="Wedge";Wedge.prototype._centroid=!0;Wedge.prototype._attrsAffectingSize=["radius"];_registerNode(Wedge);Factory.addGetterSetter(Wedge,"radius",0,getNumberValidator());Factory.addGetterSetter(Wedge,"angle",0,getNumberValidator());Factory.addGetterSetter(Wedge,"clockwise",!1);Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function filterGaussBlurRGBA(it,g){const et=it.data,ot=it.width,ut=it.height;let ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht,Ut,Kt,Yt,er,ar,ir,lr,cr;const vr=g+g+1,xr=ot-1,yr=ut-1,Sr=g+1,kr=Sr*(Sr+1)/2,Pr=new BlurStack,Or=mul_table[g],hr=shg_table[g];let Tr=null,mr=Pr,Er=null,Dr=null;for(let Cr=1;Cr<vr;Cr++)mr=mr.next=new BlurStack,Cr===Sr&&(Tr=mr);mr.next=Pr,ft=dt=0;for(let Cr=0;Cr<ut;Cr++){Ht=Ut=Kt=Yt=St=kt=Tt=Rt=0,Ft=Sr*(er=et[dt]),jt=Sr*(ar=et[dt+1]),Bt=Sr*(ir=et[dt+2]),zt=Sr*(lr=et[dt+3]),St+=kr*er,kt+=kr*ar,Tt+=kr*ir,Rt+=kr*lr,mr=Pr;for(let Lr=0;Lr<Sr;Lr++)mr.r=er,mr.g=ar,mr.b=ir,mr.a=lr,mr=mr.next;for(let Lr=1;Lr<Sr;Lr++)ct=dt+((xr<Lr?xr:Lr)<<2),St+=(mr.r=er=et[ct])*(cr=Sr-Lr),kt+=(mr.g=ar=et[ct+1])*cr,Tt+=(mr.b=ir=et[ct+2])*cr,Rt+=(mr.a=lr=et[ct+3])*cr,Ht+=er,Ut+=ar,Kt+=ir,Yt+=lr,mr=mr.next;Er=Pr,Dr=Tr;for(let Lr=0;Lr<ot;Lr++)et[dt+3]=lr=Rt*Or>>hr,lr!==0?(lr=255/lr,et[dt]=(St*Or>>hr)*lr,et[dt+1]=(kt*Or>>hr)*lr,et[dt+2]=(Tt*Or>>hr)*lr):et[dt]=et[dt+1]=et[dt+2]=0,St-=Ft,kt-=jt,Tt-=Bt,Rt-=zt,Ft-=Er.r,jt-=Er.g,Bt-=Er.b,zt-=Er.a,ct=ft+((ct=Lr+g+1)<xr?ct:xr)<<2,Ht+=Er.r=et[ct],Ut+=Er.g=et[ct+1],Kt+=Er.b=et[ct+2],Yt+=Er.a=et[ct+3],St+=Ht,kt+=Ut,Tt+=Kt,Rt+=Yt,Er=Er.next,Ft+=er=Dr.r,jt+=ar=Dr.g,Bt+=ir=Dr.b,zt+=lr=Dr.a,Ht-=er,Ut-=ar,Kt-=ir,Yt-=lr,Dr=Dr.next,dt+=4;ft+=ot}for(let Cr=0;Cr<ot;Cr++){Ut=Kt=Yt=Ht=kt=Tt=Rt=St=0,dt=Cr<<2,Ft=Sr*(er=et[dt]),jt=Sr*(ar=et[dt+1]),Bt=Sr*(ir=et[dt+2]),zt=Sr*(lr=et[dt+3]),St+=kr*er,kt+=kr*ar,Tt+=kr*ir,Rt+=kr*lr,mr=Pr;for(let qr=0;qr<Sr;qr++)mr.r=er,mr.g=ar,mr.b=ir,mr.a=lr,mr=mr.next;let Lr=ot;for(let qr=1;qr<=g;qr++)dt=Lr+Cr<<2,St+=(mr.r=er=et[dt])*(cr=Sr-qr),kt+=(mr.g=ar=et[dt+1])*cr,Tt+=(mr.b=ir=et[dt+2])*cr,Rt+=(mr.a=lr=et[dt+3])*cr,Ht+=er,Ut+=ar,Kt+=ir,Yt+=lr,mr=mr.next,qr<yr&&(Lr+=ot);dt=Cr,Er=Pr,Dr=Tr;for(let qr=0;qr<ut;qr++)ct=dt<<2,et[ct+3]=lr=Rt*Or>>hr,lr>0?(lr=255/lr,et[ct]=(St*Or>>hr)*lr,et[ct+1]=(kt*Or>>hr)*lr,et[ct+2]=(Tt*Or>>hr)*lr):et[ct]=et[ct+1]=et[ct+2]=0,St-=Ft,kt-=jt,Tt-=Bt,Rt-=zt,Ft-=Er.r,jt-=Er.g,Bt-=Er.b,zt-=Er.a,ct=Cr+((ct=qr+Sr)<yr?ct:yr)*ot<<2,St+=Ht+=Er.r=et[ct],kt+=Ut+=Er.g=et[ct+1],Tt+=Kt+=Er.b=et[ct+2],Rt+=Yt+=Er.a=et[ct+3],Er=Er.next,Ft+=er=Dr.r,jt+=ar=Dr.g,Bt+=ir=Dr.b,zt+=lr=Dr.a,Ht-=er,Ut-=ar,Kt-=ir,Yt-=lr,Dr=Dr.next,dt+=ot}}const Blur=function it(g){const et=Math.round(this.blurRadius());et>0&&filterGaussBlurRGBA(g,et)};Factory.addGetterSetter(Node$1,"blurRadius",0,getNumberValidator(),Factory.afterSetFilter);const Brighten=function(it){const g=this.brightness()*255,et=it.data,ot=et.length;for(let ut=0;ut<ot;ut+=4)et[ut]+=g,et[ut+1]+=g,et[ut+2]+=g};Factory.addGetterSetter(Node$1,"brightness",0,getNumberValidator(),Factory.afterSetFilter);const Brightness=function(it){const g=this.brightness(),et=it.data,ot=et.length;for(let ut=0;ut<ot;ut+=4)et[ut]=Math.min(255,et[ut]*g),et[ut+1]=Math.min(255,et[ut+1]*g),et[ut+2]=Math.min(255,et[ut+2]*g)},Contrast=function(it){const g=Math.pow((this.contrast()+100)/100,2),et=it.data,ot=et.length;let ut=150,ct=150,dt=150;for(let ft=0;ft<ot;ft+=4)ut=et[ft],ct=et[ft+1],dt=et[ft+2],ut/=255,ut-=.5,ut*=g,ut+=.5,ut*=255,ct/=255,ct-=.5,ct*=g,ct+=.5,ct*=255,dt/=255,dt-=.5,dt*=g,dt+=.5,dt*=255,ut=ut<0?0:ut>255?255:ut,ct=ct<0?0:ct>255?255:ct,dt=dt<0?0:dt>255?255:dt,et[ft]=ut,et[ft+1]=ct,et[ft+2]=dt};Factory.addGetterSetter(Node$1,"contrast",0,getNumberValidator(),Factory.afterSetFilter);const Emboss=function(it){var g,et,ot,ut,ct,dt,ft,St,kt;const Tt=it.data,Rt=it.width,Ft=it.height,jt=Math.min(1,Math.max(0,(et=(g=this.embossStrength)===null||g===void 0?void 0:g.call(this))!==null&&et!==void 0?et:.5)),Bt=Math.min(1,Math.max(0,(ut=(ot=this.embossWhiteLevel)===null||ot===void 0?void 0:ot.call(this))!==null&&ut!==void 0?ut:.5)),Ht=(ft={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(dt=(ct=this.embossDirection)===null||ct===void 0?void 0:ct.call(this))!==null&&dt!==void 0?dt:"top-left"])!==null&&ft!==void 0?ft:315,Ut=!!((kt=(St=this.embossBlend)===null||St===void 0?void 0:St.call(this))!==null&&kt!==void 0&&kt),Kt=jt*10,Yt=Bt*255,er=Ht*Math.PI/180,ar=Math.cos(er),ir=Math.sin(er),lr=128/1020*Kt,cr=new Uint8ClampedArray(Tt),vr=new Float32Array(Rt*Ft);for(let Pr=0,Or=0;Or<Tt.length;Or+=4,Pr++)vr[Pr]=.2126*cr[Or]+.7152*cr[Or+1]+.0722*cr[Or+2];const xr=[-1,0,1,-2,0,2,-1,0,1],yr=[-1,-2,-1,0,0,0,1,2,1],Sr=[-Rt-1,-Rt,-Rt+1,-1,0,1,Rt-1,Rt,Rt+1],kr=Pr=>Pr<0?0:Pr>255?255:Pr;for(let Pr=1;Pr<Ft-1;Pr++)for(let Or=1;Or<Rt-1;Or++){const hr=Pr*Rt+Or;let Tr=0,mr=0;Tr+=vr[hr+Sr[0]]*xr[0],mr+=vr[hr+Sr[0]]*yr[0],Tr+=vr[hr+Sr[1]]*xr[1],mr+=vr[hr+Sr[1]]*yr[1],Tr+=vr[hr+Sr[2]]*xr[2],mr+=vr[hr+Sr[2]]*yr[2],Tr+=vr[hr+Sr[3]]*xr[3],mr+=vr[hr+Sr[3]]*yr[3],Tr+=vr[hr+Sr[5]]*xr[5],mr+=vr[hr+Sr[5]]*yr[5],Tr+=vr[hr+Sr[6]]*xr[6],mr+=vr[hr+Sr[6]]*yr[6],Tr+=vr[hr+Sr[7]]*xr[7],mr+=vr[hr+Sr[7]]*yr[7],Tr+=vr[hr+Sr[8]]*xr[8],mr+=vr[hr+Sr[8]]*yr[8];const Er=ar*Tr+ir*mr,Dr=kr(Yt+Er*lr),Cr=hr*4;if(Ut){const Lr=Dr-Yt;Tt[Cr]=kr(cr[Cr]+Lr),Tt[Cr+1]=kr(cr[Cr+1]+Lr),Tt[Cr+2]=kr(cr[Cr+2]+Lr),Tt[Cr+3]=cr[Cr+3]}else Tt[Cr]=Tt[Cr+1]=Tt[Cr+2]=Dr,Tt[Cr+3]=cr[Cr+3]}for(let Pr=0;Pr<Rt;Pr++){let Or=Pr*4,hr=((Ft-1)*Rt+Pr)*4;Tt[Or]=cr[Or],Tt[Or+1]=cr[Or+1],Tt[Or+2]=cr[Or+2],Tt[Or+3]=cr[Or+3],Tt[hr]=cr[hr],Tt[hr+1]=cr[hr+1],Tt[hr+2]=cr[hr+2],Tt[hr+3]=cr[hr+3]}for(let Pr=1;Pr<Ft-1;Pr++){let Or=Pr*Rt*4,hr=(Pr*Rt+(Rt-1))*4;Tt[Or]=cr[Or],Tt[Or+1]=cr[Or+1],Tt[Or+2]=cr[Or+2],Tt[Or+3]=cr[Or+3],Tt[hr]=cr[hr],Tt[hr+1]=cr[hr+1],Tt[hr+2]=cr[hr+2],Tt[hr+3]=cr[hr+3]}return it};Factory.addGetterSetter(Node$1,"embossStrength",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossWhiteLevel",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossDirection","top-left",void 0,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossBlend",!1,void 0,Factory.afterSetFilter);function remap(it,g,et,ot,ut){const ct=et-g,dt=ut-ot;if(ct===0)return ot+dt/2;if(dt===0)return ot;let ft=(it-g)/ct;return ft=dt*ft+ot,ft}const Enhance=function(it){const g=it.data,et=g.length;let ot=g[0],ut=ot,ct,dt=g[1],ft=dt,St,kt=g[2],Tt=kt,Rt;const Ft=this.enhance();if(Ft===0)return;for(let Yt=0;Yt<et;Yt+=4)ct=g[Yt+0],ct<ot?ot=ct:ct>ut&&(ut=ct),St=g[Yt+1],St<dt?dt=St:St>ft&&(ft=St),Rt=g[Yt+2],Rt<kt?kt=Rt:Rt>Tt&&(Tt=Rt);ut===ot&&(ut=255,ot=0),ft===dt&&(ft=255,dt=0),Tt===kt&&(Tt=255,kt=0);let jt,Bt,zt,Ht,Ut,Kt;if(Ft>0)jt=ut+Ft*(255-ut),Bt=ot-Ft*(ot-0),zt=ft+Ft*(255-ft),Ht=dt-Ft*(dt-0),Ut=Tt+Ft*(255-Tt),Kt=kt-Ft*(kt-0);else{const Yt=(ut+ot)*.5;jt=ut+Ft*(ut-Yt),Bt=ot+Ft*(ot-Yt);const er=(ft+dt)*.5;zt=ft+Ft*(ft-er),Ht=dt+Ft*(dt-er);const ar=(Tt+kt)*.5;Ut=Tt+Ft*(Tt-ar),Kt=kt+Ft*(kt-ar)}for(let Yt=0;Yt<et;Yt+=4)g[Yt+0]=remap(g[Yt+0],ot,ut,Bt,jt),g[Yt+1]=remap(g[Yt+1],dt,ft,Ht,zt),g[Yt+2]=remap(g[Yt+2],kt,Tt,Kt,Ut)};Factory.addGetterSetter(Node$1,"enhance",0,getNumberValidator(),Factory.afterSetFilter);const Grayscale$1=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4){const ut=.34*g[ot]+.5*g[ot+1]+.16*g[ot+2];g[ot]=ut,g[ot+1]=ut,g[ot+2]=ut}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"luminance",0,getNumberValidator(),Factory.afterSetFilter);const HSL=function(it){const g=it.data,et=g.length,ot=1,ut=Math.pow(2,this.saturation()),ct=Math.abs(this.hue()+360)%360,dt=this.luminance()*127,ft=ot*ut*Math.cos(ct*Math.PI/180),St=ot*ut*Math.sin(ct*Math.PI/180),kt=.299*ot+.701*ft+.167*St,Tt=.587*ot-.587*ft+.33*St,Rt=.114*ot-.114*ft-.497*St,Ft=.299*ot-.299*ft-.328*St,jt=.587*ot+.413*ft+.035*St,Bt=.114*ot-.114*ft+.293*St,zt=.299*ot-.3*ft+1.25*St,Ht=.587*ot-.586*ft-1.05*St,Ut=.114*ot+.886*ft-.2*St;let Kt,Yt,er,ar;for(let ir=0;ir<et;ir+=4)Kt=g[ir+0],Yt=g[ir+1],er=g[ir+2],ar=g[ir+3],g[ir+0]=kt*Kt+Tt*Yt+Rt*er+dt,g[ir+1]=Ft*Kt+jt*Yt+Bt*er+dt,g[ir+2]=zt*Kt+Ht*Yt+Ut*er+dt,g[ir+3]=ar},HSV=function(it){const g=it.data,et=g.length,ot=Math.pow(2,this.value()),ut=Math.pow(2,this.saturation()),ct=Math.abs(this.hue()+360)%360,dt=ot*ut*Math.cos(ct*Math.PI/180),ft=ot*ut*Math.sin(ct*Math.PI/180),St=.299*ot+.701*dt+.167*ft,kt=.587*ot-.587*dt+.33*ft,Tt=.114*ot-.114*dt-.497*ft,Rt=.299*ot-.299*dt-.328*ft,Ft=.587*ot+.413*dt+.035*ft,jt=.114*ot-.114*dt+.293*ft,Bt=.299*ot-.3*dt+1.25*ft,zt=.587*ot-.586*dt-1.05*ft,Ht=.114*ot+.886*dt-.2*ft;for(let Ut=0;Ut<et;Ut+=4){const Kt=g[Ut+0],Yt=g[Ut+1],er=g[Ut+2],ar=g[Ut+3];g[Ut+0]=St*Kt+kt*Yt+Tt*er,g[Ut+1]=Rt*Kt+Ft*Yt+jt*er,g[Ut+2]=Bt*Kt+zt*Yt+Ht*er,g[Ut+3]=ar}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"value",0,getNumberValidator(),Factory.afterSetFilter);const Invert=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4)g[ot]=255-g[ot],g[ot+1]=255-g[ot+1],g[ot+2]=255-g[ot+2]},ToPolar=function(it,g,et){const ot=it.data,ut=g.data,ct=it.width,dt=it.height,ft=et.polarCenterX||ct/2,St=et.polarCenterY||dt/2;let kt=Math.sqrt(ft*ft+St*St),Tt=ct-ft,Rt=dt-St;const Ft=Math.sqrt(Tt*Tt+Rt*Rt);kt=Ft>kt?Ft:kt;const jt=dt,Bt=ct,zt=360/Bt*Math.PI/180;for(let Ht=0;Ht<Bt;Ht+=1){const Ut=Math.sin(Ht*zt),Kt=Math.cos(Ht*zt);for(let Yt=0;Yt<jt;Yt+=1){Tt=Math.floor(ft+kt*Yt/jt*Kt),Rt=Math.floor(St+kt*Yt/jt*Ut);let er=(Rt*ct+Tt)*4;const ar=ot[er+0],ir=ot[er+1],lr=ot[er+2],cr=ot[er+3];er=(Ht+Yt*ct)*4,ut[er+0]=ar,ut[er+1]=ir,ut[er+2]=lr,ut[er+3]=cr}}},FromPolar=function(it,g,et){const ot=it.data,ut=g.data,ct=it.width,dt=it.height,ft=et.polarCenterX||ct/2,St=et.polarCenterY||dt/2;let kt=Math.sqrt(ft*ft+St*St),Tt=ct-ft,Rt=dt-St;const Ft=Math.sqrt(Tt*Tt+Rt*Rt);kt=Ft>kt?Ft:kt;const jt=dt,Bt=ct,zt=et.polarRotation||0;let Ht,Ut;for(Tt=0;Tt<ct;Tt+=1)for(Rt=0;Rt<dt;Rt+=1){const Kt=Tt-ft,Yt=Rt-St,er=Math.sqrt(Kt*Kt+Yt*Yt)*jt/kt;let ar=(Math.atan2(Yt,Kt)*180/Math.PI+360+zt)%360;ar=ar*Bt/360,Ht=Math.floor(ar),Ut=Math.floor(er);let ir=(Ut*ct+Ht)*4;const lr=ot[ir+0],cr=ot[ir+1],vr=ot[ir+2],xr=ot[ir+3];ir=(Rt*ct+Tt)*4,ut[ir+0]=lr,ut[ir+1]=cr,ut[ir+2]=vr,ut[ir+3]=xr}},Kaleidoscope=function(it){const g=it.width,et=it.height;let ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt=Math.round(this.kaleidoscopePower());const Bt=Math.round(this.kaleidoscopeAngle()),zt=Math.floor(g*(Bt%360)/360);if(jt<1)return;const Ht=Util.createCanvasElement();Ht.width=g,Ht.height=et;const Ut=Ht.getContext("2d").getImageData(0,0,g,et);Util.releaseCanvas(Ht),ToPolar(it,Ut,{polarCenterX:g/2,polarCenterY:et/2});let Kt=g/Math.pow(2,jt);for(;Kt<=8;)Kt=Kt*2,jt-=1;Kt=Math.ceil(Kt);let Yt=Kt,er=0,ar=Yt,ir=1;for(zt+Kt>g&&(er=Yt,ar=0,ir=-1),ut=0;ut<et;ut+=1)for(ot=er;ot!==ar;ot+=ir)ct=Math.round(ot+zt)%g,Rt=(g*ut+ct)*4,ft=Ut.data[Rt+0],St=Ut.data[Rt+1],kt=Ut.data[Rt+2],Tt=Ut.data[Rt+3],Ft=(g*ut+ot)*4,Ut.data[Ft+0]=ft,Ut.data[Ft+1]=St,Ut.data[Ft+2]=kt,Ut.data[Ft+3]=Tt;for(ut=0;ut<et;ut+=1)for(Yt=Math.floor(Kt),dt=0;dt<jt;dt+=1){for(ot=0;ot<Yt+1;ot+=1)Rt=(g*ut+ot)*4,ft=Ut.data[Rt+0],St=Ut.data[Rt+1],kt=Ut.data[Rt+2],Tt=Ut.data[Rt+3],Ft=(g*ut+Yt*2-ot-1)*4,Ut.data[Ft+0]=ft,Ut.data[Ft+1]=St,Ut.data[Ft+2]=kt,Ut.data[Ft+3]=Tt;Yt*=2}FromPolar(Ut,it,{polarRotation:0})};Factory.addGetterSetter(Node$1,"kaleidoscopePower",2,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"kaleidoscopeAngle",0,getNumberValidator(),Factory.afterSetFilter);function pixelAt(it,g,et){let ot=(et*it.width+g)*4;const ut=[];return ut.push(it.data[ot++],it.data[ot++],it.data[ot++],it.data[ot++]),ut}function rgbDistance(it,g){return Math.sqrt(Math.pow(it[0]-g[0],2)+Math.pow(it[1]-g[1],2)+Math.pow(it[2]-g[2],2))}function rgbMean(it){const g=[0,0,0];for(let et=0;et<it.length;et++)g[0]+=it[et][0],g[1]+=it[et][1],g[2]+=it[et][2];return g[0]/=it.length,g[1]/=it.length,g[2]/=it.length,g}function backgroundMask(it,g){const et=pixelAt(it,0,0),ot=pixelAt(it,it.width-1,0),ut=pixelAt(it,0,it.height-1),ct=pixelAt(it,it.width-1,it.height-1),dt=g||10;if(rgbDistance(et,ot)<dt&&rgbDistance(ot,ct)<dt&&rgbDistance(ct,ut)<dt&&rgbDistance(ut,et)<dt){const ft=rgbMean([ot,et,ct,ut]),St=[];for(let kt=0;kt<it.width*it.height;kt++){const Tt=rgbDistance(ft,[it.data[kt*4],it.data[kt*4+1],it.data[kt*4+2]]);St[kt]=Tt<dt?0:255}return St}}function applyMask(it,g){for(let et=0;et<it.width*it.height;et++)it.data[4*et+3]=g[et]}function erodeMask(it,g,et){const ot=[1,1,1,1,0,1,1,1,1],ut=Math.round(Math.sqrt(ot.length)),ct=Math.floor(ut/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ut;Rt++)for(let Ft=0;Ft<ut;Ft++){const jt=ft+Rt-ct,Bt=St+Ft-ct;if(jt>=0&&jt<et&&Bt>=0&&Bt<g){const zt=jt*g+Bt,Ht=ot[Rt*ut+Ft];Tt+=it[zt]*Ht}}dt[kt]=Tt===255*8?255:0}return dt}function dilateMask(it,g,et){const ot=[1,1,1,1,1,1,1,1,1],ut=Math.round(Math.sqrt(ot.length)),ct=Math.floor(ut/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ut;Rt++)for(let Ft=0;Ft<ut;Ft++){const jt=ft+Rt-ct,Bt=St+Ft-ct;if(jt>=0&&jt<et&&Bt>=0&&Bt<g){const zt=jt*g+Bt,Ht=ot[Rt*ut+Ft];Tt+=it[zt]*Ht}}dt[kt]=Tt>=255*4?255:0}return dt}function smoothEdgeMask(it,g,et){const ot=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],ut=Math.round(Math.sqrt(ot.length)),ct=Math.floor(ut/2),dt=[];for(let ft=0;ft<et;ft++)for(let St=0;St<g;St++){const kt=ft*g+St;let Tt=0;for(let Rt=0;Rt<ut;Rt++)for(let Ft=0;Ft<ut;Ft++){const jt=ft+Rt-ct,Bt=St+Ft-ct;if(jt>=0&&jt<et&&Bt>=0&&Bt<g){const zt=jt*g+Bt,Ht=ot[Rt*ut+Ft];Tt+=it[zt]*Ht}}dt[kt]=Tt}return dt}const Mask=function(it){const g=this.threshold();let et=backgroundMask(it,g);return et&&(et=erodeMask(et,it.width,it.height),et=dilateMask(et,it.width,it.height),et=smoothEdgeMask(et,it.width,it.height),applyMask(it,et)),it};Factory.addGetterSetter(Node$1,"threshold",0,getNumberValidator(),Factory.afterSetFilter);const Noise=function(it){const g=this.noise()*255,et=it.data,ot=et.length,ut=g/2;for(let ct=0;ct<ot;ct+=4)et[ct+0]+=ut-2*ut*Math.random(),et[ct+1]+=ut-2*ut*Math.random(),et[ct+2]+=ut-2*ut*Math.random()};Factory.addGetterSetter(Node$1,"noise",.2,getNumberValidator(),Factory.afterSetFilter);const Pixelate=function(it){let g=Math.ceil(this.pixelSize()),et=it.width,ot=it.height,ut=Math.ceil(et/g),ct=Math.ceil(ot/g),dt=it.data;if(g<=0){Util.error("pixelSize value can not be <= 0");return}for(let ft=0;ft<ut;ft+=1)for(let St=0;St<ct;St+=1){let kt=0,Tt=0,Rt=0,Ft=0;const jt=ft*g,Bt=jt+g,zt=St*g,Ht=zt+g;let Ut=0;for(let Kt=jt;Kt<Bt;Kt+=1)if(!(Kt>=et))for(let Yt=zt;Yt<Ht;Yt+=1){if(Yt>=ot)continue;const er=(et*Yt+Kt)*4;kt+=dt[er+0],Tt+=dt[er+1],Rt+=dt[er+2],Ft+=dt[er+3],Ut+=1}kt=kt/Ut,Tt=Tt/Ut,Rt=Rt/Ut,Ft=Ft/Ut;for(let Kt=jt;Kt<Bt;Kt+=1)if(!(Kt>=et))for(let Yt=zt;Yt<Ht;Yt+=1){if(Yt>=ot)continue;const er=(et*Yt+Kt)*4;dt[er+0]=kt,dt[er+1]=Tt,dt[er+2]=Rt,dt[er+3]=Ft}}};Factory.addGetterSetter(Node$1,"pixelSize",8,getNumberValidator(),Factory.afterSetFilter);const Posterize=function(it){const g=Math.round(this.levels()*254)+1,et=it.data,ot=et.length,ut=255/g;for(let ct=0;ct<ot;ct+=1)et[ct]=Math.floor(et[ct]/ut)*ut};Factory.addGetterSetter(Node$1,"levels",.5,getNumberValidator(),Factory.afterSetFilter);const RGB$1=function(it){const g=it.data,et=g.length,ot=this.red(),ut=this.green(),ct=this.blue();for(let dt=0;dt<et;dt+=4){const ft=(.34*g[dt]+.5*g[dt+1]+.16*g[dt+2])/255;g[dt]=ft*ot,g[dt+1]=ft*ut,g[dt+2]=ft*ct,g[dt+3]=g[dt+3]}};Factory.addGetterSetter(Node$1,"red",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"green",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);const RGBA=function(it){const g=it.data,et=g.length,ot=this.red(),ut=this.green(),ct=this.blue(),dt=this.alpha();for(let ft=0;ft<et;ft+=4){const St=1-dt;g[ft]=ot*dt+g[ft]*St,g[ft+1]=ut*dt+g[ft+1]*St,g[ft+2]=ct*dt+g[ft+2]*St}};Factory.addGetterSetter(Node$1,"red",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"green",0,function(it){return this._filterUpToDate=!1,it>255?255:it<0?0:Math.round(it)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"alpha",1,function(it){return this._filterUpToDate=!1,it>1?1:it<0?0:it});const Sepia=function(it){const g=it.data,et=g.length;for(let ot=0;ot<et;ot+=4){const ut=g[ot+0],ct=g[ot+1],dt=g[ot+2];g[ot+0]=Math.min(255,ut*.393+ct*.769+dt*.189),g[ot+1]=Math.min(255,ut*.349+ct*.686+dt*.168),g[ot+2]=Math.min(255,ut*.272+ct*.534+dt*.131)}},Solarize=function(it){const et=it.data;for(let ot=0;ot<et.length;ot+=4){const ut=et[ot],ct=et[ot+1],dt=et[ot+2];.2126*ut+.7152*ct+.0722*dt>=128&&(et[ot]=255-ut,et[ot+1]=255-ct,et[ot+2]=255-dt)}return it},Threshold=function(it){const g=this.threshold()*255,et=it.data,ot=et.length;for(let ut=0;ut<ot;ut+=1)et[ut]=et[ut]<g?0:255};Factory.addGetterSetter(Node$1,"threshold",.5,getNumberValidator(),Factory.afterSetFilter);Konva$1.Util._assign(Konva$1,{Arc,Arrow:Arrow$1,Circle,Ellipse:Ellipse$1,Image:Image$2,Label,Tag,Line:Line$1,Path:Path$1,Rect:Rect$2,RegularPolygon,Ring,Sprite,Star,Text:Text$2,TextPath,Transformer:Transformer$1,Wedge,Filters:{Blur,Brightness,Brighten,Contrast,Emboss,Enhance,Grayscale:Grayscale$1,HSL,HSV,Invert,Kaleidoscope,Mask,Noise,Pixelate,Posterize,RGB:RGB$1,RGBA,Sepia,Solarize,Threshold}});var reactReconciler={exports:{}},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(it){function g(mr,Er){var Dr=mr.length;mr.push(Er);e:for(;0<Dr;){var Cr=Dr-1>>>1,Lr=mr[Cr];if(0<ut(Lr,Er))mr[Cr]=Er,mr[Dr]=Lr,Dr=Cr;else break e}}function et(mr){return mr.length===0?null:mr[0]}function ot(mr){if(mr.length===0)return null;var Er=mr[0],Dr=mr.pop();if(Dr!==Er){mr[0]=Dr;e:for(var Cr=0,Lr=mr.length,qr=Lr>>>1;Cr<qr;){var sn=2*(Cr+1)-1,an=mr[sn],tn=sn+1,ln=mr[tn];if(0>ut(an,Dr))tn<Lr&&0>ut(ln,an)?(mr[Cr]=ln,mr[tn]=Dr,Cr=tn):(mr[Cr]=an,mr[sn]=Dr,Cr=sn);else if(tn<Lr&&0>ut(ln,Dr))mr[Cr]=ln,mr[tn]=Dr,Cr=tn;else break e}}return Er}function ut(mr,Er){var Dr=mr.sortIndex-Er.sortIndex;return Dr!==0?Dr:mr.id-Er.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ct=performance;it.unstable_now=function(){return ct.now()}}else{var dt=Date,ft=dt.now();it.unstable_now=function(){return dt.now()-ft}}var St=[],kt=[],Tt=1,Rt=null,Ft=3,jt=!1,Bt=!1,zt=!1,Ht=typeof setTimeout=="function"?setTimeout:null,Ut=typeof clearTimeout=="function"?clearTimeout:null,Kt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Yt(mr){for(var Er=et(kt);Er!==null;){if(Er.callback===null)ot(kt);else if(Er.startTime<=mr)ot(kt),Er.sortIndex=Er.expirationTime,g(St,Er);else break;Er=et(kt)}}function er(mr){if(zt=!1,Yt(mr),!Bt)if(et(St)!==null)Bt=!0,hr(ar);else{var Er=et(kt);Er!==null&&Tr(er,Er.startTime-mr)}}function ar(mr,Er){Bt=!1,zt&&(zt=!1,Ut(cr),cr=-1),jt=!0;var Dr=Ft;try{for(Yt(Er),Rt=et(St);Rt!==null&&(!(Rt.expirationTime>Er)||mr&&!yr());){var Cr=Rt.callback;if(typeof Cr=="function"){Rt.callback=null,Ft=Rt.priorityLevel;var Lr=Cr(Rt.expirationTime<=Er);Er=it.unstable_now(),typeof Lr=="function"?Rt.callback=Lr:Rt===et(St)&&ot(St),Yt(Er)}else ot(St);Rt=et(St)}if(Rt!==null)var qr=!0;else{var sn=et(kt);sn!==null&&Tr(er,sn.startTime-Er),qr=!1}return qr}finally{Rt=null,Ft=Dr,jt=!1}}var ir=!1,lr=null,cr=-1,vr=5,xr=-1;function yr(){return!(it.unstable_now()-xr<vr)}function Sr(){if(lr!==null){var mr=it.unstable_now();xr=mr;var Er=!0;try{Er=lr(!0,mr)}finally{Er?kr():(ir=!1,lr=null)}}else ir=!1}var kr;if(typeof Kt=="function")kr=function(){Kt(Sr)};else if(typeof MessageChannel<"u"){var Pr=new MessageChannel,Or=Pr.port2;Pr.port1.onmessage=Sr,kr=function(){Or.postMessage(null)}}else kr=function(){Ht(Sr,0)};function hr(mr){lr=mr,ir||(ir=!0,kr())}function Tr(mr,Er){cr=Ht(function(){mr(it.unstable_now())},Er)}it.unstable_IdlePriority=5,it.unstable_ImmediatePriority=1,it.unstable_LowPriority=4,it.unstable_NormalPriority=3,it.unstable_Profiling=null,it.unstable_UserBlockingPriority=2,it.unstable_cancelCallback=function(mr){mr.callback=null},it.unstable_continueExecution=function(){Bt||jt||(Bt=!0,hr(ar))},it.unstable_forceFrameRate=function(mr){0>mr||125<mr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):vr=0<mr?Math.floor(1e3/mr):5},it.unstable_getCurrentPriorityLevel=function(){return Ft},it.unstable_getFirstCallbackNode=function(){return et(St)},it.unstable_next=function(mr){switch(Ft){case 1:case 2:case 3:var Er=3;break;default:Er=Ft}var Dr=Ft;Ft=Er;try{return mr()}finally{Ft=Dr}},it.unstable_pauseExecution=function(){},it.unstable_requestPaint=function(){},it.unstable_runWithPriority=function(mr,Er){switch(mr){case 1:case 2:case 3:case 4:case 5:break;default:mr=3}var Dr=Ft;Ft=mr;try{return Er()}finally{Ft=Dr}},it.unstable_scheduleCallback=function(mr,Er,Dr){var Cr=it.unstable_now();switch(typeof Dr=="object"&&Dr!==null?(Dr=Dr.delay,Dr=typeof Dr=="number"&&0<Dr?Cr+Dr:Cr):Dr=Cr,mr){case 1:var Lr=-1;break;case 2:Lr=250;break;case 5:Lr=1073741823;break;case 4:Lr=1e4;break;default:Lr=5e3}return Lr=Dr+Lr,mr={id:Tt++,callback:Er,priorityLevel:mr,startTime:Dr,expirationTime:Lr,sortIndex:-1},Dr>Cr?(mr.sortIndex=Dr,g(kt,mr),et(St)===null&&mr===et(kt)&&(zt?(Ut(cr),cr=-1):zt=!0,Tr(er,Dr-Cr))):(mr.sortIndex=Lr,g(St,mr),Bt||jt||(Bt=!0,hr(ar))),mr},it.unstable_shouldYield=yr,it.unstable_wrapCallback=function(mr){var Er=Ft;return function(){var Dr=Ft;Ft=Er;try{return mr.apply(this,arguments)}finally{Ft=Dr}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function it(g){var et={},ot=reactExports,ut=requireScheduler(),ct=Object.assign;function dt(rr){for(var nr="https://reactjs.org/docs/error-decoder.html?invariant="+rr,pr=1;pr<arguments.length;pr++)nr+="&args[]="+encodeURIComponent(arguments[pr]);return"Minified React error #"+rr+"; visit "+nr+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ft=ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,St=Symbol.for("react.element"),kt=Symbol.for("react.portal"),Tt=Symbol.for("react.fragment"),Rt=Symbol.for("react.strict_mode"),Ft=Symbol.for("react.profiler"),jt=Symbol.for("react.provider"),Bt=Symbol.for("react.context"),zt=Symbol.for("react.forward_ref"),Ht=Symbol.for("react.suspense"),Ut=Symbol.for("react.suspense_list"),Kt=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),er=Symbol.for("react.offscreen"),ar=Symbol.iterator;function ir(rr){return rr===null||typeof rr!="object"?null:(rr=ar&&rr[ar]||rr["@@iterator"],typeof rr=="function"?rr:null)}function lr(rr){if(rr==null)return null;if(typeof rr=="function")return rr.displayName||rr.name||null;if(typeof rr=="string")return rr;switch(rr){case Tt:return"Fragment";case kt:return"Portal";case Ft:return"Profiler";case Rt:return"StrictMode";case Ht:return"Suspense";case Ut:return"SuspenseList"}if(typeof rr=="object")switch(rr.$$typeof){case Bt:return(rr.displayName||"Context")+".Consumer";case jt:return(rr._context.displayName||"Context")+".Provider";case zt:var nr=rr.render;return rr=rr.displayName,rr||(rr=nr.displayName||nr.name||"",rr=rr!==""?"ForwardRef("+rr+")":"ForwardRef"),rr;case Kt:return nr=rr.displayName||null,nr!==null?nr:lr(rr.type)||"Memo";case Yt:nr=rr._payload,rr=rr._init;try{return lr(rr(nr))}catch{}}return null}function cr(rr){var nr=rr.type;switch(rr.tag){case 24:return"Cache";case 9:return(nr.displayName||"Context")+".Consumer";case 10:return(nr._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return rr=nr.render,rr=rr.displayName||rr.name||"",nr.displayName||(rr!==""?"ForwardRef("+rr+")":"ForwardRef");case 7:return"Fragment";case 5:return nr;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lr(nr);case 8:return nr===Rt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof nr=="function")return nr.displayName||nr.name||null;if(typeof nr=="string")return nr}return null}function vr(rr){var nr=rr,pr=rr;if(rr.alternate)for(;nr.return;)nr=nr.return;else{rr=nr;do nr=rr,nr.flags&4098&&(pr=nr.return),rr=nr.return;while(rr)}return nr.tag===3?pr:null}function xr(rr){if(vr(rr)!==rr)throw Error(dt(188))}function yr(rr){var nr=rr.alternate;if(!nr){if(nr=vr(rr),nr===null)throw Error(dt(188));return nr!==rr?null:rr}for(var pr=rr,wr=nr;;){var Rr=pr.return;if(Rr===null)break;var Gr=Rr.alternate;if(Gr===null){if(wr=Rr.return,wr!==null){pr=wr;continue}break}if(Rr.child===Gr.child){for(Gr=Rr.child;Gr;){if(Gr===pr)return xr(Rr),rr;if(Gr===wr)return xr(Rr),nr;Gr=Gr.sibling}throw Error(dt(188))}if(pr.return!==wr.return)pr=Rr,wr=Gr;else{for(var un=!1,kn=Rr.child;kn;){if(kn===pr){un=!0,pr=Rr,wr=Gr;break}if(kn===wr){un=!0,wr=Rr,pr=Gr;break}kn=kn.sibling}if(!un){for(kn=Gr.child;kn;){if(kn===pr){un=!0,pr=Gr,wr=Rr;break}if(kn===wr){un=!0,wr=Gr,pr=Rr;break}kn=kn.sibling}if(!un)throw Error(dt(189))}}if(pr.alternate!==wr)throw Error(dt(190))}if(pr.tag!==3)throw Error(dt(188));return pr.stateNode.current===pr?rr:nr}function Sr(rr){return rr=yr(rr),rr!==null?kr(rr):null}function kr(rr){if(rr.tag===5||rr.tag===6)return rr;for(rr=rr.child;rr!==null;){var nr=kr(rr);if(nr!==null)return nr;rr=rr.sibling}return null}function Pr(rr){if(rr.tag===5||rr.tag===6)return rr;for(rr=rr.child;rr!==null;){if(rr.tag!==4){var nr=Pr(rr);if(nr!==null)return nr}rr=rr.sibling}return null}var Or=Array.isArray,hr=g.getPublicInstance,Tr=g.getRootHostContext,mr=g.getChildHostContext,Er=g.prepareForCommit,Dr=g.resetAfterCommit,Cr=g.createInstance,Lr=g.appendInitialChild,qr=g.finalizeInitialChildren,sn=g.prepareUpdate,an=g.shouldSetTextContent,tn=g.createTextInstance,ln=g.scheduleTimeout,yn=g.cancelTimeout,pn=g.noTimeout,En=g.isPrimaryRenderer,On=g.supportsMutation,Xn=g.supportsPersistence,Un=g.supportsHydration,Ln=g.getInstanceFromNode,ns=g.preparePortalMount,gs=g.getCurrentEventPriority,Es=g.detachDeletedInstance,wn=g.supportsMicrotasks,mn=g.scheduleMicrotask,Dn=g.supportsTestSelectors,Tn=g.findFiberRoot,An=g.getBoundingRect,$n=g.getTextContent,qn=g.isHiddenSubtree,Bn=g.matchAccessibilityRole,$t=g.setFocusIfFocusable,Zt=g.setupIntersectionObserver,or=g.appendChild,ur=g.appendChildToContainer,dr=g.commitTextUpdate,gr=g.commitMount,Ar=g.commitUpdate,_r=g.insertBefore,Nr=g.insertInContainerBefore,Fr=g.removeChild,Vr=g.removeChildFromContainer,Hr=g.resetTextContent,$r=g.hideInstance,Br=g.hideTextInstance,en=g.unhideInstance,Kr=g.unhideTextInstance,Yr=g.clearContainer,zr=g.cloneInstance,Wr=g.createContainerChildSet,jr=g.appendChildToContainerChildSet,Xr=g.finalizeContainerChildren,Jr=g.replaceContainerChildren,nn=g.cloneHiddenInstance,Zr=g.cloneHiddenTextInstance,on=g.canHydrateInstance,hn=g.canHydrateTextInstance,fn=g.canHydrateSuspenseInstance,xn=g.isSuspenseInstancePending,cn=g.isSuspenseInstanceFallback,vn=g.getSuspenseInstanceFallbackErrorDetails,bn=g.registerSuspenseInstanceRetry,_n=g.getNextHydratableSibling,Cn=g.getFirstHydratableChild,Fn=g.getFirstHydratableChildWithinContainer,Wn=g.getFirstHydratableChildWithinSuspenseInstance,Yn=g.hydrateInstance,Qn=g.hydrateTextInstance,ss=g.hydrateSuspenseInstance,zn=g.getNextHydratableInstanceAfterSuspenseInstance,Gn=g.commitHydratedContainer,es=g.commitHydratedSuspenseInstance,ls=g.clearSuspenseBoundary,as=g.clearSuspenseBoundaryFromContainer,ys=g.shouldDeleteUnhydratedTailInstances,vs=g.didNotMatchHydratedContainerTextInstance,_s=g.didNotMatchHydratedTextInstance,Cs;function xs(rr){if(Cs===void 0)try{throw Error()}catch(pr){var nr=pr.stack.trim().match(/\n( *(at )?)/);Cs=nr&&nr[1]||""}return`
`+Cs+rr}var ga=!1;function uo(rr,nr){if(!rr||ga)return"";ga=!0;var pr=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(nr)if(nr=function(){throw Error()},Object.defineProperty(nr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nr,[])}catch(_i){var wr=_i}Reflect.construct(rr,[],nr)}else{try{nr.call()}catch(_i){wr=_i}rr.call(nr.prototype)}else{try{throw Error()}catch(_i){wr=_i}rr()}}catch(_i){if(_i&&wr&&typeof _i.stack=="string"){for(var Rr=_i.stack.split(`
`),Gr=wr.stack.split(`
`),un=Rr.length-1,kn=Gr.length-1;1<=un&&0<=kn&&Rr[un]!==Gr[kn];)kn--;for(;1<=un&&0<=kn;un--,kn--)if(Rr[un]!==Gr[kn]){if(un!==1||kn!==1)do if(un--,kn--,0>kn||Rr[un]!==Gr[kn]){var jn=`
`+Rr[un].replace(" at new "," at ");return rr.displayName&&jn.includes("<anonymous>")&&(jn=jn.replace("<anonymous>",rr.displayName)),jn}while(1<=un&&0<=kn);break}}}finally{ga=!1,Error.prepareStackTrace=pr}return(rr=rr?rr.displayName||rr.name:"")?xs(rr):""}var Oo=Object.prototype.hasOwnProperty,Jn=[],Is=-1;function Ls(rr){return{current:rr}}function Fs(rr){0>Is||(rr.current=Jn[Is],Jn[Is]=null,Is--)}function ks(rr,nr){Is++,Jn[Is]=rr.current,rr.current=nr}var yo={},xa=Ls(yo),Xs=Ls(!1),Po=yo;function Ao(rr,nr){var pr=rr.type.contextTypes;if(!pr)return yo;var wr=rr.stateNode;if(wr&&wr.__reactInternalMemoizedUnmaskedChildContext===nr)return wr.__reactInternalMemoizedMaskedChildContext;var Rr={},Gr;for(Gr in pr)Rr[Gr]=nr[Gr];return wr&&(rr=rr.stateNode,rr.__reactInternalMemoizedUnmaskedChildContext=nr,rr.__reactInternalMemoizedMaskedChildContext=Rr),Rr}function Ws(rr){return rr=rr.childContextTypes,rr!=null}function ko(){Fs(Xs),Fs(xa)}function ba(rr,nr,pr){if(xa.current!==yo)throw Error(dt(168));ks(xa,nr),ks(Xs,pr)}function km(rr,nr,pr){var wr=rr.stateNode;if(nr=nr.childContextTypes,typeof wr.getChildContext!="function")return pr;wr=wr.getChildContext();for(var Rr in wr)if(!(Rr in nr))throw Error(dt(108,cr(rr)||"Unknown",Rr));return ct({},pr,wr)}function Wp(rr){return rr=(rr=rr.stateNode)&&rr.__reactInternalMemoizedMergedChildContext||yo,Po=xa.current,ks(xa,rr),ks(Xs,Xs.current),!0}function Iv(rr,nr,pr){var wr=rr.stateNode;if(!wr)throw Error(dt(169));pr?(rr=km(rr,nr,Po),wr.__reactInternalMemoizedMergedChildContext=rr,Fs(Xs),Fs(xa),ks(xa,rr)):Fs(Xs),ks(Xs,pr)}var zl=Math.clz32?Math.clz32:_p,B1=Math.log,$1=Math.LN2;function _p(rr){return rr>>>=0,rr===0?32:31-(B1(rr)/$1|0)|0}var Cp=64,ep=4194304;function Du(rr){switch(rr&-rr){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return rr&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return rr&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return rr}}function Ul(rr,nr){var pr=rr.pendingLanes;if(pr===0)return 0;var wr=0,Rr=rr.suspendedLanes,Gr=rr.pingedLanes,un=pr&268435455;if(un!==0){var kn=un&~Rr;kn!==0?wr=Du(kn):(Gr&=un,Gr!==0&&(wr=Du(Gr)))}else un=pr&~Rr,un!==0?wr=Du(un):Gr!==0&&(wr=Du(Gr));if(wr===0)return 0;if(nr!==0&&nr!==wr&&!(nr&Rr)&&(Rr=wr&-wr,Gr=nr&-nr,Rr>=Gr||Rr===16&&(Gr&4194240)!==0))return nr;if(wr&4&&(wr|=pr&16),nr=rr.entangledLanes,nr!==0)for(rr=rr.entanglements,nr&=wr;0<nr;)pr=31-zl(nr),Rr=1<<pr,wr|=rr[pr],nr&=~Rr;return wr}function Ps(rr,nr){switch(rr){case 1:case 2:case 4:return nr+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return nr+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cu(rr,nr){for(var pr=rr.suspendedLanes,wr=rr.pingedLanes,Rr=rr.expirationTimes,Gr=rr.pendingLanes;0<Gr;){var un=31-zl(Gr),kn=1<<un,jn=Rr[un];jn===-1?(!(kn&pr)||kn&wr)&&(Rr[un]=Ps(kn,nr)):jn<=nr&&(rr.expiredLanes|=kn),Gr&=~kn}}function Jo(rr){return rr=rr.pendingLanes&-1073741825,rr!==0?rr:rr&1073741824?1073741824:0}function tu(){var rr=Cp;return Cp<<=1,!(Cp&4194240)&&(Cp=64),rr}function Pl(rr){for(var nr=[],pr=0;31>pr;pr++)nr.push(rr);return nr}function hu(rr,nr,pr){rr.pendingLanes|=nr,nr!==536870912&&(rr.suspendedLanes=0,rr.pingedLanes=0),rr=rr.eventTimes,nr=31-zl(nr),rr[nr]=pr}function Lv(rr,nr){var pr=rr.pendingLanes&~nr;rr.pendingLanes=nr,rr.suspendedLanes=0,rr.pingedLanes=0,rr.expiredLanes&=nr,rr.mutableReadLanes&=nr,rr.entangledLanes&=nr,nr=rr.entanglements;var wr=rr.eventTimes;for(rr=rr.expirationTimes;0<pr;){var Rr=31-zl(pr),Gr=1<<Rr;nr[Rr]=0,wr[Rr]=-1,rr[Rr]=-1,pr&=~Gr}}function Tm(rr,nr){var pr=rr.entangledLanes|=nr;for(rr=rr.entanglements;pr;){var wr=31-zl(pr),Rr=1<<wr;Rr&nr|rr[wr]&nr&&(rr[wr]|=nr),pr&=~Rr}}var sr=0;function br(rr){return rr&=-rr,1<rr?4<rr?rr&268435455?16:536870912:4:1}var Ur=ut.unstable_scheduleCallback,rn=ut.unstable_cancelCallback,dn=ut.unstable_shouldYield,Rn=ut.unstable_requestPaint,Nn=ut.unstable_now,Zn=ut.unstable_ImmediatePriority,rs=ut.unstable_UserBlockingPriority,Ts=ut.unstable_NormalPriority,As=ut.unstable_IdlePriority,co=null,$o=null;function Pm(rr){if($o&&typeof $o.onCommitFiberRoot=="function")try{$o.onCommitFiberRoot(co,rr,void 0,(rr.current.flags&128)===128)}catch{}}function qp(rr,nr){return rr===nr&&(rr!==0||1/rr===1/nr)||rr!==rr&&nr!==nr}var Ho=typeof Object.is=="function"?Object.is:qp,Ro=null,Mu=!1,cS=!1;function hS(rr){Ro===null?Ro=[rr]:Ro.push(rr)}function V1(rr){Mu=!0,hS(rr)}function tp(){if(!cS&&Ro!==null){cS=!0;var rr=0,nr=sr;try{var pr=Ro;for(sr=1;rr<pr.length;rr++){var wr=pr[rr];do wr=wr(!0);while(wr!==null)}Ro=null,Mu=!1}catch(Rr){throw Ro!==null&&(Ro=Ro.slice(rr+1)),Ur(Zn,tp),Rr}finally{sr=nr,cS=!1}}return null}var C0=[],Rm=0,z1=null,jv=0,du=[],Rl=0,fu=null,pu=1,rp="";function ru(rr,nr){C0[Rm++]=jv,C0[Rm++]=z1,z1=rr,jv=nr}function dS(rr,nr,pr){du[Rl++]=pu,du[Rl++]=rp,du[Rl++]=fu,fu=rr;var wr=pu;rr=rp;var Rr=32-zl(wr)-1;wr&=~(1<<Rr),pr+=1;var Gr=32-zl(nr)+Rr;if(30<Gr){var un=Rr-Rr%5;Gr=(wr&(1<<un)-1).toString(32),wr>>=un,Rr-=un,pu=1<<32-zl(nr)+Rr|pr<<Rr|wr,rp=Gr+rr}else pu=1<<Gr|pr<<Rr|wr,rp=rr}function No(rr){rr.return!==null&&(ru(rr,1),dS(rr,1,0))}function fS(rr){for(;rr===z1;)z1=C0[--Rm],C0[Rm]=null,jv=C0[--Rm],C0[Rm]=null;for(;rr===fu;)fu=du[--Rl],du[Rl]=null,rp=du[--Rl],du[Rl]=null,pu=du[--Rl],du[Rl]=null}var Dl=null,Go=null,ho=!1,Bv=!1,Fu=null;function P_(rr,nr){var pr=hp(5,null,null,0);pr.elementType="DELETED",pr.stateNode=nr,pr.return=rr,nr=rr.deletions,nr===null?(rr.deletions=[pr],rr.flags|=16):nr.push(pr)}function R_(rr,nr){switch(rr.tag){case 5:return nr=on(nr,rr.type,rr.pendingProps),nr!==null?(rr.stateNode=nr,Dl=rr,Go=Cn(nr),!0):!1;case 6:return nr=hn(nr,rr.pendingProps),nr!==null?(rr.stateNode=nr,Dl=rr,Go=null,!0):!1;case 13:if(nr=fn(nr),nr!==null){var pr=fu!==null?{id:pu,overflow:rp}:null;return rr.memoizedState={dehydrated:nr,treeContext:pr,retryLane:1073741824},pr=hp(18,null,null,0),pr.stateNode=nr,pr.return=rr,rr.child=pr,Dl=rr,Go=null,!0}return!1;default:return!1}}function pS(rr){return(rr.mode&1)!==0&&(rr.flags&128)===0}function mS(rr){if(ho){var nr=Go;if(nr){var pr=nr;if(!R_(rr,nr)){if(pS(rr))throw Error(dt(418));nr=_n(pr);var wr=Dl;nr&&R_(rr,nr)?P_(wr,pr):(rr.flags=rr.flags&-4097|2,ho=!1,Dl=rr)}}else{if(pS(rr))throw Error(dt(418));rr.flags=rr.flags&-4097|2,ho=!1,Dl=rr}}}function N_(rr){for(rr=rr.return;rr!==null&&rr.tag!==5&&rr.tag!==3&&rr.tag!==13;)rr=rr.return;Dl=rr}function U1(rr){if(!Un||rr!==Dl)return!1;if(!ho)return N_(rr),ho=!0,!1;if(rr.tag!==3&&(rr.tag!==5||ys(rr.type)&&!an(rr.type,rr.memoizedProps))){var nr=Go;if(nr){if(pS(rr))throw Kp(),Error(dt(418));for(;nr;)P_(rr,nr),nr=_n(nr)}}if(N_(rr),rr.tag===13){if(!Un)throw Error(dt(316));if(rr=rr.memoizedState,rr=rr!==null?rr.dehydrated:null,!rr)throw Error(dt(317));Go=zn(rr)}else Go=Dl?_n(rr.stateNode):null;return!0}function Kp(){for(var rr=Go;rr;)rr=_n(rr)}function mo(){Un&&(Go=Dl=null,Bv=ho=!1)}function H1(rr){Fu===null?Fu=[rr]:Fu.push(rr)}var $v=ft.ReactCurrentBatchConfig;function G1(rr,nr){if(Ho(rr,nr))return!0;if(typeof rr!="object"||rr===null||typeof nr!="object"||nr===null)return!1;var pr=Object.keys(rr),wr=Object.keys(nr);if(pr.length!==wr.length)return!1;for(wr=0;wr<pr.length;wr++){var Rr=pr[wr];if(!Oo.call(nr,Rr)||!Ho(rr[Rr],nr[Rr]))return!1}return!0}function D_(rr){switch(rr.tag){case 5:return xs(rr.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return rr=uo(rr.type,!1),rr;case 11:return rr=uo(rr.type.render,!1),rr;case 1:return rr=uo(rr.type,!0),rr;default:return""}}function Vv(rr,nr,pr){if(rr=pr.ref,rr!==null&&typeof rr!="function"&&typeof rr!="object"){if(pr._owner){if(pr=pr._owner,pr){if(pr.tag!==1)throw Error(dt(309));var wr=pr.stateNode}if(!wr)throw Error(dt(147,rr));var Rr=wr,Gr=""+rr;return nr!==null&&nr.ref!==null&&typeof nr.ref=="function"&&nr.ref._stringRef===Gr?nr.ref:(nr=function(un){var kn=Rr.refs;un===null?delete kn[Gr]:kn[Gr]=un},nr._stringRef=Gr,nr)}if(typeof rr!="string")throw Error(dt(284));if(!pr._owner)throw Error(dt(290,rr))}return rr}function Nm(rr,nr){throw rr=Object.prototype.toString.call(nr),Error(dt(31,rr==="[object Object]"?"object with keys {"+Object.keys(nr).join(", ")+"}":rr))}function Dm(rr){var nr=rr._init;return nr(rr._payload)}function gS(rr){function nr(In,Pn){if(rr){var Hn=In.deletions;Hn===null?(In.deletions=[Pn],In.flags|=16):Hn.push(Pn)}}function pr(In,Pn){if(!rr)return null;for(;Pn!==null;)nr(In,Pn),Pn=Pn.sibling;return null}function wr(In,Pn){for(In=new Map;Pn!==null;)Pn.key!==null?In.set(Pn.key,Pn):In.set(Pn.index,Pn),Pn=Pn.sibling;return In}function Rr(In,Pn){return In=M0(In,Pn),In.index=0,In.sibling=null,In}function Gr(In,Pn,Hn){return In.index=Hn,rr?(Hn=In.alternate,Hn!==null?(Hn=Hn.index,Hn<Pn?(In.flags|=2,Pn):Hn):(In.flags|=2,Pn)):(In.flags|=1048576,Pn)}function un(In){return rr&&In.alternate===null&&(In.flags|=2),In}function kn(In,Pn,Hn,cs){return Pn===null||Pn.tag!==6?(Pn=lP(Hn,In.mode,cs),Pn.return=In,Pn):(Pn=Rr(Pn,Hn),Pn.return=In,Pn)}function jn(In,Pn,Hn,cs){var ws=Hn.type;return ws===Tt?ps(In,Pn,Hn.props.children,cs,Hn.key):Pn!==null&&(Pn.elementType===ws||typeof ws=="object"&&ws!==null&&ws.$$typeof===Yt&&Dm(ws)===Pn.type)?(cs=Rr(Pn,Hn.props),cs.ref=Vv(In,Pn,Hn),cs.return=In,cs):(cs=rC(Hn.type,Hn.key,Hn.props,null,In.mode,cs),cs.ref=Vv(In,Pn,Hn),cs.return=In,cs)}function _i(In,Pn,Hn,cs){return Pn===null||Pn.tag!==4||Pn.stateNode.containerInfo!==Hn.containerInfo||Pn.stateNode.implementation!==Hn.implementation?(Pn=uP(Hn,In.mode,cs),Pn.return=In,Pn):(Pn=Rr(Pn,Hn.children||[]),Pn.return=In,Pn)}function ps(In,Pn,Hn,cs,ws){return Pn===null||Pn.tag!==7?(Pn=ty(Hn,In.mode,cs,ws),Pn.return=In,Pn):(Pn=Rr(Pn,Hn),Pn.return=In,Pn)}function Ns(In,Pn,Hn){if(typeof Pn=="string"&&Pn!==""||typeof Pn=="number")return Pn=lP(""+Pn,In.mode,Hn),Pn.return=In,Pn;if(typeof Pn=="object"&&Pn!==null){switch(Pn.$$typeof){case St:return Hn=rC(Pn.type,Pn.key,Pn.props,null,In.mode,Hn),Hn.ref=Vv(In,null,Pn),Hn.return=In,Hn;case kt:return Pn=uP(Pn,In.mode,Hn),Pn.return=In,Pn;case Yt:var cs=Pn._init;return Ns(In,cs(Pn._payload),Hn)}if(Or(Pn)||ir(Pn))return Pn=ty(Pn,In.mode,Hn,null),Pn.return=In,Pn;Nm(In,Pn)}return null}function us(In,Pn,Hn,cs){var ws=Pn!==null?Pn.key:null;if(typeof Hn=="string"&&Hn!==""||typeof Hn=="number")return ws!==null?null:kn(In,Pn,""+Hn,cs);if(typeof Hn=="object"&&Hn!==null){switch(Hn.$$typeof){case St:return Hn.key===ws?jn(In,Pn,Hn,cs):null;case kt:return Hn.key===ws?_i(In,Pn,Hn,cs):null;case Yt:return ws=Hn._init,us(In,Pn,ws(Hn._payload),cs)}if(Or(Hn)||ir(Hn))return ws!==null?null:ps(In,Pn,Hn,cs,null);Nm(In,Hn)}return null}function vo(In,Pn,Hn,cs,ws){if(typeof cs=="string"&&cs!==""||typeof cs=="number")return In=In.get(Hn)||null,kn(Pn,In,""+cs,ws);if(typeof cs=="object"&&cs!==null){switch(cs.$$typeof){case St:return In=In.get(cs.key===null?Hn:cs.key)||null,jn(Pn,In,cs,ws);case kt:return In=In.get(cs.key===null?Hn:cs.key)||null,_i(Pn,In,cs,ws);case Yt:var js=cs._init;return vo(In,Pn,Hn,js(cs._payload),ws)}if(Or(cs)||ir(cs))return In=In.get(Hn)||null,ps(Pn,In,cs,ws,null);Nm(Pn,cs)}return null}function eo(In,Pn,Hn,cs){for(var ws=null,js=null,Ds=Pn,Hs=Pn=0,yl=null;Ds!==null&&Hs<Hn.length;Hs++){Ds.index>Hs?(yl=Ds,Ds=null):yl=Ds.sibling;var Gs=us(In,Ds,Hn[Hs],cs);if(Gs===null){Ds===null&&(Ds=yl);break}rr&&Ds&&Gs.alternate===null&&nr(In,Ds),Pn=Gr(Gs,Pn,Hs),js===null?ws=Gs:js.sibling=Gs,js=Gs,Ds=yl}if(Hs===Hn.length)return pr(In,Ds),ho&&ru(In,Hs),ws;if(Ds===null){for(;Hs<Hn.length;Hs++)Ds=Ns(In,Hn[Hs],cs),Ds!==null&&(Pn=Gr(Ds,Pn,Hs),js===null?ws=Ds:js.sibling=Ds,js=Ds);return ho&&ru(In,Hs),ws}for(Ds=wr(In,Ds);Hs<Hn.length;Hs++)yl=vo(Ds,In,Hs,Hn[Hs],cs),yl!==null&&(rr&&yl.alternate!==null&&Ds.delete(yl.key===null?Hs:yl.key),Pn=Gr(yl,Pn,Hs),js===null?ws=yl:js.sibling=yl,js=yl);return rr&&Ds.forEach(function(F0){return nr(In,F0)}),ho&&ru(In,Hs),ws}function Su(In,Pn,Hn,cs){var ws=ir(Hn);if(typeof ws!="function")throw Error(dt(150));if(Hn=ws.call(Hn),Hn==null)throw Error(dt(151));for(var js=ws=null,Ds=Pn,Hs=Pn=0,yl=null,Gs=Hn.next();Ds!==null&&!Gs.done;Hs++,Gs=Hn.next()){Ds.index>Hs?(yl=Ds,Ds=null):yl=Ds.sibling;var F0=us(In,Ds,Gs.value,cs);if(F0===null){Ds===null&&(Ds=yl);break}rr&&Ds&&F0.alternate===null&&nr(In,Ds),Pn=Gr(F0,Pn,Hs),js===null?ws=F0:js.sibling=F0,js=F0,Ds=yl}if(Gs.done)return pr(In,Ds),ho&&ru(In,Hs),ws;if(Ds===null){for(;!Gs.done;Hs++,Gs=Hn.next())Gs=Ns(In,Gs.value,cs),Gs!==null&&(Pn=Gr(Gs,Pn,Hs),js===null?ws=Gs:js.sibling=Gs,js=Gs);return ho&&ru(In,Hs),ws}for(Ds=wr(In,Ds);!Gs.done;Hs++,Gs=Hn.next())Gs=vo(Ds,In,Hs,Gs.value,cs),Gs!==null&&(rr&&Gs.alternate!==null&&Ds.delete(Gs.key===null?Hs:Gs.key),Pn=Gr(Gs,Pn,Hs),js===null?ws=Gs:js.sibling=Gs,js=Gs);return rr&&Ds.forEach(function(ZN){return nr(In,ZN)}),ho&&ru(In,Hs),ws}function jm(In,Pn,Hn,cs){if(typeof Hn=="object"&&Hn!==null&&Hn.type===Tt&&Hn.key===null&&(Hn=Hn.props.children),typeof Hn=="object"&&Hn!==null){switch(Hn.$$typeof){case St:e:{for(var ws=Hn.key,js=Pn;js!==null;){if(js.key===ws){if(ws=Hn.type,ws===Tt){if(js.tag===7){pr(In,js.sibling),Pn=Rr(js,Hn.props.children),Pn.return=In,In=Pn;break e}}else if(js.elementType===ws||typeof ws=="object"&&ws!==null&&ws.$$typeof===Yt&&Dm(ws)===js.type){pr(In,js.sibling),Pn=Rr(js,Hn.props),Pn.ref=Vv(In,js,Hn),Pn.return=In,In=Pn;break e}pr(In,js);break}else nr(In,js);js=js.sibling}Hn.type===Tt?(Pn=ty(Hn.props.children,In.mode,cs,Hn.key),Pn.return=In,In=Pn):(cs=rC(Hn.type,Hn.key,Hn.props,null,In.mode,cs),cs.ref=Vv(In,Pn,Hn),cs.return=In,In=cs)}return un(In);case kt:e:{for(js=Hn.key;Pn!==null;){if(Pn.key===js)if(Pn.tag===4&&Pn.stateNode.containerInfo===Hn.containerInfo&&Pn.stateNode.implementation===Hn.implementation){pr(In,Pn.sibling),Pn=Rr(Pn,Hn.children||[]),Pn.return=In,In=Pn;break e}else{pr(In,Pn);break}else nr(In,Pn);Pn=Pn.sibling}Pn=uP(Hn,In.mode,cs),Pn.return=In,In=Pn}return un(In);case Yt:return js=Hn._init,jm(In,Pn,js(Hn._payload),cs)}if(Or(Hn))return eo(In,Pn,Hn,cs);if(ir(Hn))return Su(In,Pn,Hn,cs);Nm(In,Hn)}return typeof Hn=="string"&&Hn!==""||typeof Hn=="number"?(Hn=""+Hn,Pn!==null&&Pn.tag===6?(pr(In,Pn.sibling),Pn=Rr(Pn,Hn),Pn.return=In,In=Pn):(pr(In,Pn),Pn=lP(Hn,In.mode,cs),Pn.return=In,In=Pn),un(In)):pr(In,Pn)}return jm}var Mm=gS(!0),zs=gS(!1),A0=Ls(null),zv=null,Fm=null,Io=null;function np(){Io=Fm=zv=null}function Rs(rr,nr,pr){En?(ks(A0,nr._currentValue),nr._currentValue=pr):(ks(A0,nr._currentValue2),nr._currentValue2=pr)}function Uv(rr){var nr=A0.current;Fs(A0),En?rr._currentValue=nr:rr._currentValue2=nr}function $a(rr,nr,pr){for(;rr!==null;){var wr=rr.alternate;if((rr.childLanes&nr)!==nr?(rr.childLanes|=nr,wr!==null&&(wr.childLanes|=nr)):wr!==null&&(wr.childLanes&nr)!==nr&&(wr.childLanes|=nr),rr===pr)break;rr=rr.return}}function Ap(rr,nr){zv=rr,Io=Fm=null,rr=rr.dependencies,rr!==null&&rr.firstContext!==null&&(rr.lanes&nr&&(xu=!0),rr.firstContext=null)}function Vo(rr){var nr=En?rr._currentValue:rr._currentValue2;if(Io!==rr)if(rr={context:rr,memoizedValue:nr,next:null},Fm===null){if(zv===null)throw Error(dt(308));Fm=rr,zv.dependencies={lanes:0,firstContext:rr}}else Fm=Fm.next=rr;return nr}var Ys=null;function Ou(rr){Ys===null?Ys=[rr]:Ys.push(rr)}function Hv(rr,nr,pr,wr){var Rr=nr.interleaved;return Rr===null?(pr.next=pr,Ou(nr)):(pr.next=Rr.next,Rr.next=pr),nr.interleaved=pr,sp(rr,wr)}function sp(rr,nr){rr.lanes|=nr;var pr=rr.alternate;for(pr!==null&&(pr.lanes|=nr),pr=rr,rr=rr.return;rr!==null;)rr.childLanes|=nr,pr=rr.alternate,pr!==null&&(pr.childLanes|=nr),pr=rr,rr=rr.return;return pr.tag===3?pr.stateNode:null}var ap=!1;function vS(rr){rr.updateQueue={baseState:rr.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mu(rr,nr){rr=rr.updateQueue,nr.updateQueue===rr&&(nr.updateQueue={baseState:rr.baseState,firstBaseUpdate:rr.firstBaseUpdate,lastBaseUpdate:rr.lastBaseUpdate,shared:rr.shared,effects:rr.effects})}function nu(rr,nr){return{eventTime:rr,lane:nr,tag:0,payload:null,callback:null,next:null}}function gu(rr,nr,pr){var wr=rr.updateQueue;if(wr===null)return null;if(wr=wr.shared,Bs&2){var Rr=wr.pending;return Rr===null?nr.next=nr:(nr.next=Rr.next,Rr.next=nr),wr.pending=nr,sp(rr,pr)}return Rr=wr.interleaved,Rr===null?(nr.next=nr,Ou(wr)):(nr.next=Rr.next,Rr.next=nr),wr.interleaved=nr,sp(rr,pr)}function k0(rr,nr,pr){if(nr=nr.updateQueue,nr!==null&&(nr=nr.shared,(pr&4194240)!==0)){var wr=nr.lanes;wr&=rr.pendingLanes,pr|=wr,nr.lanes=pr,Tm(rr,pr)}}function yS(rr,nr){var pr=rr.updateQueue,wr=rr.alternate;if(wr!==null&&(wr=wr.updateQueue,pr===wr)){var Rr=null,Gr=null;if(pr=pr.firstBaseUpdate,pr!==null){do{var un={eventTime:pr.eventTime,lane:pr.lane,tag:pr.tag,payload:pr.payload,callback:pr.callback,next:null};Gr===null?Rr=Gr=un:Gr=Gr.next=un,pr=pr.next}while(pr!==null);Gr===null?Rr=Gr=nr:Gr=Gr.next=nr}else Rr=Gr=nr;pr={baseState:wr.baseState,firstBaseUpdate:Rr,lastBaseUpdate:Gr,shared:wr.shared,effects:wr.effects},rr.updateQueue=pr;return}rr=pr.lastBaseUpdate,rr===null?pr.firstBaseUpdate=nr:rr.next=nr,pr.lastBaseUpdate=nr}function Gv(rr,nr,pr,wr){var Rr=rr.updateQueue;ap=!1;var Gr=Rr.firstBaseUpdate,un=Rr.lastBaseUpdate,kn=Rr.shared.pending;if(kn!==null){Rr.shared.pending=null;var jn=kn,_i=jn.next;jn.next=null,un===null?Gr=_i:un.next=_i,un=jn;var ps=rr.alternate;ps!==null&&(ps=ps.updateQueue,kn=ps.lastBaseUpdate,kn!==un&&(kn===null?ps.firstBaseUpdate=_i:kn.next=_i,ps.lastBaseUpdate=jn))}if(Gr!==null){var Ns=Rr.baseState;un=0,ps=_i=jn=null,kn=Gr;do{var us=kn.lane,vo=kn.eventTime;if((wr&us)===us){ps!==null&&(ps=ps.next={eventTime:vo,lane:0,tag:kn.tag,payload:kn.payload,callback:kn.callback,next:null});e:{var eo=rr,Su=kn;switch(us=nr,vo=pr,Su.tag){case 1:if(eo=Su.payload,typeof eo=="function"){Ns=eo.call(vo,Ns,us);break e}Ns=eo;break e;case 3:eo.flags=eo.flags&-65537|128;case 0:if(eo=Su.payload,us=typeof eo=="function"?eo.call(vo,Ns,us):eo,us==null)break e;Ns=ct({},Ns,us);break e;case 2:ap=!0}}kn.callback!==null&&kn.lane!==0&&(rr.flags|=64,us=Rr.effects,us===null?Rr.effects=[kn]:us.push(kn))}else vo={eventTime:vo,lane:us,tag:kn.tag,payload:kn.payload,callback:kn.callback,next:null},ps===null?(_i=ps=vo,jn=Ns):ps=ps.next=vo,un|=us;if(kn=kn.next,kn===null){if(kn=Rr.shared.pending,kn===null)break;us=kn,kn=us.next,us.next=null,Rr.lastBaseUpdate=us,Rr.shared.pending=null}}while(1);if(ps===null&&(jn=Ns),Rr.baseState=jn,Rr.firstBaseUpdate=_i,Rr.lastBaseUpdate=ps,nr=Rr.shared.interleaved,nr!==null){Rr=nr;do un|=Rr.lane,Rr=Rr.next;while(Rr!==nr)}else Gr===null&&(Rr.shared.lanes=0);Zv|=un,rr.lanes=un,rr.memoizedState=Ns}}function Wo(rr,nr,pr){if(rr=nr.effects,nr.effects=null,rr!==null)for(nr=0;nr<rr.length;nr++){var wr=rr[nr],Rr=wr.callback;if(Rr!==null){if(wr.callback=null,wr=pr,typeof Rr!="function")throw Error(dt(191,Rr));Rr.call(wr)}}}var Om={},vu=Ls(Om),Wv=Ls(Om),Xp=Ls(Om);function yu(rr){if(rr===Om)throw Error(dt(174));return rr}function xS(rr,nr){ks(Xp,nr),ks(Wv,rr),ks(vu,Om),rr=Tr(nr),Fs(vu),ks(vu,rr)}function lp(){Fs(vu),Fs(Wv),Fs(Xp)}function W1(rr){var nr=yu(Xp.current),pr=yu(vu.current);nr=mr(pr,rr.type,nr),pr!==nr&&(ks(Wv,rr),ks(vu,nr))}function bS(rr){Wv.current===rr&&(Fs(vu),Fs(Wv))}var go=Ls(0);function qv(rr){for(var nr=rr;nr!==null;){if(nr.tag===13){var pr=nr.memoizedState;if(pr!==null&&(pr=pr.dehydrated,pr===null||xn(pr)||cn(pr)))return nr}else if(nr.tag===19&&nr.memoizedProps.revealOrder!==void 0){if(nr.flags&128)return nr}else if(nr.child!==null){nr.child.return=nr,nr=nr.child;continue}if(nr===rr)break;for(;nr.sibling===null;){if(nr.return===null||nr.return===rr)return null;nr=nr.return}nr.sibling.return=nr.return,nr=nr.sibling}return null}var Kv=[];function Xv(){for(var rr=0;rr<Kv.length;rr++){var nr=Kv[rr];En?nr._workInProgressVersionPrimary=null:nr._workInProgressVersionSecondary=null}Kv.length=0}var Iu=ft.ReactCurrentDispatcher,gn=ft.ReactCurrentBatchConfig,Sn=0,Mn=null,Vn=null,hs=null,bs=!1,Ss=!1,Vs=0,Lu=0;function xo(){throw Error(dt(321))}function Yv(rr,nr){if(nr===null)return!1;for(var pr=0;pr<nr.length&&pr<rr.length;pr++)if(!Ho(rr[pr],nr[pr]))return!1;return!0}function T0(rr,nr,pr,wr,Rr,Gr){if(Sn=Gr,Mn=nr,nr.memoizedState=null,nr.updateQueue=null,nr.lanes=0,Iu.current=rr===null||rr.memoizedState===null?AN:kN,rr=pr(wr,Rr),Ss){Gr=0;do{if(Ss=!1,Vs=0,25<=Gr)throw Error(dt(301));Gr+=1,hs=Vn=null,nr.updateQueue=null,Iu.current=TN,rr=pr(wr,Rr)}while(Ss)}if(Iu.current=O_,nr=Vn!==null&&Vn.next!==null,Sn=0,hs=Vn=Mn=null,bs=!1,nr)throw Error(dt(300));return rr}function ES(){var rr=Vs!==0;return Vs=0,rr}function Yp(){var rr={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hs===null?Mn.memoizedState=hs=rr:hs=hs.next=rr,hs}function up(){if(Vn===null){var rr=Mn.alternate;rr=rr!==null?rr.memoizedState:null}else rr=Vn.next;var nr=hs===null?Mn.memoizedState:hs.next;if(nr!==null)hs=nr,Vn=rr;else{if(rr===null)throw Error(dt(310));Vn=rr,rr={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},hs===null?Mn.memoizedState=hs=rr:hs=hs.next=rr}return hs}function SS(rr,nr){return typeof nr=="function"?nr(rr):nr}function TT(rr){var nr=up(),pr=nr.queue;if(pr===null)throw Error(dt(311));pr.lastRenderedReducer=rr;var wr=Vn,Rr=wr.baseQueue,Gr=pr.pending;if(Gr!==null){if(Rr!==null){var un=Rr.next;Rr.next=Gr.next,Gr.next=un}wr.baseQueue=Rr=Gr,pr.pending=null}if(Rr!==null){Gr=Rr.next,wr=wr.baseState;var kn=un=null,jn=null,_i=Gr;do{var ps=_i.lane;if((Sn&ps)===ps)jn!==null&&(jn=jn.next={lane:0,action:_i.action,hasEagerState:_i.hasEagerState,eagerState:_i.eagerState,next:null}),wr=_i.hasEagerState?_i.eagerState:rr(wr,_i.action);else{var Ns={lane:ps,action:_i.action,hasEagerState:_i.hasEagerState,eagerState:_i.eagerState,next:null};jn===null?(kn=jn=Ns,un=wr):jn=jn.next=Ns,Mn.lanes|=ps,Zv|=ps}_i=_i.next}while(_i!==null&&_i!==Gr);jn===null?un=wr:jn.next=kn,Ho(wr,nr.memoizedState)||(xu=!0),nr.memoizedState=wr,nr.baseState=un,nr.baseQueue=jn,pr.lastRenderedState=wr}if(rr=pr.interleaved,rr!==null){Rr=rr;do Gr=Rr.lane,Mn.lanes|=Gr,Zv|=Gr,Rr=Rr.next;while(Rr!==rr)}else Rr===null&&(pr.lanes=0);return[nr.memoizedState,pr.dispatch]}function PT(rr){var nr=up(),pr=nr.queue;if(pr===null)throw Error(dt(311));pr.lastRenderedReducer=rr;var wr=pr.dispatch,Rr=pr.pending,Gr=nr.memoizedState;if(Rr!==null){pr.pending=null;var un=Rr=Rr.next;do Gr=rr(Gr,un.action),un=un.next;while(un!==Rr);Ho(Gr,nr.memoizedState)||(xu=!0),nr.memoizedState=Gr,nr.baseQueue===null&&(nr.baseState=Gr),pr.lastRenderedState=Gr}return[Gr,wr]}function wR(){}function _R(rr,nr){var pr=Mn,wr=up(),Rr=nr(),Gr=!Ho(wr.memoizedState,Rr);if(Gr&&(wr.memoizedState=Rr,xu=!0),wr=wr.queue,RT(TR.bind(null,pr,wr,rr),[rr]),wr.getSnapshot!==nr||Gr||hs!==null&&hs.memoizedState.tag&1){if(pr.flags|=2048,wS(9,kR.bind(null,pr,wr,Rr,nr),void 0,null),Qo===null)throw Error(dt(349));Sn&30||AR(pr,nr,Rr)}return Rr}function AR(rr,nr,pr){rr.flags|=16384,rr={getSnapshot:nr,value:pr},nr=Mn.updateQueue,nr===null?(nr={lastEffect:null,stores:null},Mn.updateQueue=nr,nr.stores=[rr]):(pr=nr.stores,pr===null?nr.stores=[rr]:pr.push(rr))}function kR(rr,nr,pr,wr){nr.value=pr,nr.getSnapshot=wr,PR(nr)&&RR(rr)}function TR(rr,nr,pr){return pr(function(){PR(nr)&&RR(rr)})}function PR(rr){var nr=rr.getSnapshot;rr=rr.value;try{var pr=nr();return!Ho(rr,pr)}catch{return!0}}function RR(rr){var nr=sp(rr,1);nr!==null&&cp(nr,rr,1,-1)}function NR(rr){var nr=Yp();return typeof rr=="function"&&(rr=rr()),nr.memoizedState=nr.baseState=rr,rr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:SS,lastRenderedState:rr},nr.queue=rr,rr=rr.dispatch=CN.bind(null,Mn,rr),[nr.memoizedState,rr]}function wS(rr,nr,pr,wr){return rr={tag:rr,create:nr,destroy:pr,deps:wr,next:null},nr=Mn.updateQueue,nr===null?(nr={lastEffect:null,stores:null},Mn.updateQueue=nr,nr.lastEffect=rr.next=rr):(pr=nr.lastEffect,pr===null?nr.lastEffect=rr.next=rr:(wr=pr.next,pr.next=rr,rr.next=wr,nr.lastEffect=rr)),rr}function DR(){return up().memoizedState}function M_(rr,nr,pr,wr){var Rr=Yp();Mn.flags|=rr,Rr.memoizedState=wS(1|nr,pr,void 0,wr===void 0?null:wr)}function F_(rr,nr,pr,wr){var Rr=up();wr=wr===void 0?null:wr;var Gr=void 0;if(Vn!==null){var un=Vn.memoizedState;if(Gr=un.destroy,wr!==null&&Yv(wr,un.deps)){Rr.memoizedState=wS(nr,pr,Gr,wr);return}}Mn.flags|=rr,Rr.memoizedState=wS(1|nr,pr,Gr,wr)}function MR(rr,nr){return M_(8390656,8,rr,nr)}function RT(rr,nr){return F_(2048,8,rr,nr)}function FR(rr,nr){return F_(4,2,rr,nr)}function OR(rr,nr){return F_(4,4,rr,nr)}function IR(rr,nr){if(typeof nr=="function")return rr=rr(),nr(rr),function(){nr(null)};if(nr!=null)return rr=rr(),nr.current=rr,function(){nr.current=null}}function LR(rr,nr,pr){return pr=pr!=null?pr.concat([rr]):null,F_(4,4,IR.bind(null,nr,rr),pr)}function NT(){}function jR(rr,nr){var pr=up();nr=nr===void 0?null:nr;var wr=pr.memoizedState;return wr!==null&&nr!==null&&Yv(nr,wr[1])?wr[0]:(pr.memoizedState=[rr,nr],rr)}function BR(rr,nr){var pr=up();nr=nr===void 0?null:nr;var wr=pr.memoizedState;return wr!==null&&nr!==null&&Yv(nr,wr[1])?wr[0]:(rr=rr(),pr.memoizedState=[rr,nr],rr)}function $R(rr,nr,pr){return Sn&21?(Ho(pr,nr)||(pr=tu(),Mn.lanes|=pr,Zv|=pr,rr.baseState=!0),nr):(rr.baseState&&(rr.baseState=!1,xu=!0),rr.memoizedState=pr)}function wN(rr,nr){var pr=sr;sr=pr!==0&&4>pr?pr:4,rr(!0);var wr=gn.transition;gn.transition={};try{rr(!1),nr()}finally{sr=pr,gn.transition=wr}}function VR(){return up().memoizedState}function _N(rr,nr,pr){var wr=N0(rr);if(pr={lane:wr,action:pr,hasEagerState:!1,eagerState:null,next:null},zR(rr))UR(nr,pr);else if(pr=Hv(rr,nr,pr,wr),pr!==null){var Rr=Wl();cp(pr,rr,wr,Rr),HR(pr,nr,wr)}}function CN(rr,nr,pr){var wr=N0(rr),Rr={lane:wr,action:pr,hasEagerState:!1,eagerState:null,next:null};if(zR(rr))UR(nr,Rr);else{var Gr=rr.alternate;if(rr.lanes===0&&(Gr===null||Gr.lanes===0)&&(Gr=nr.lastRenderedReducer,Gr!==null))try{var un=nr.lastRenderedState,kn=Gr(un,pr);if(Rr.hasEagerState=!0,Rr.eagerState=kn,Ho(kn,un)){var jn=nr.interleaved;jn===null?(Rr.next=Rr,Ou(nr)):(Rr.next=jn.next,jn.next=Rr),nr.interleaved=Rr;return}}catch{}finally{}pr=Hv(rr,nr,Rr,wr),pr!==null&&(Rr=Wl(),cp(pr,rr,wr,Rr),HR(pr,nr,wr))}}function zR(rr){var nr=rr.alternate;return rr===Mn||nr!==null&&nr===Mn}function UR(rr,nr){Ss=bs=!0;var pr=rr.pending;pr===null?nr.next=nr:(nr.next=pr.next,pr.next=nr),rr.pending=nr}function HR(rr,nr,pr){if(pr&4194240){var wr=nr.lanes;wr&=rr.pendingLanes,pr|=wr,nr.lanes=pr,Tm(rr,pr)}}var O_={readContext:Vo,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},AN={readContext:Vo,useCallback:function(rr,nr){return Yp().memoizedState=[rr,nr===void 0?null:nr],rr},useContext:Vo,useEffect:MR,useImperativeHandle:function(rr,nr,pr){return pr=pr!=null?pr.concat([rr]):null,M_(4194308,4,IR.bind(null,nr,rr),pr)},useLayoutEffect:function(rr,nr){return M_(4194308,4,rr,nr)},useInsertionEffect:function(rr,nr){return M_(4,2,rr,nr)},useMemo:function(rr,nr){var pr=Yp();return nr=nr===void 0?null:nr,rr=rr(),pr.memoizedState=[rr,nr],rr},useReducer:function(rr,nr,pr){var wr=Yp();return nr=pr!==void 0?pr(nr):nr,wr.memoizedState=wr.baseState=nr,rr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:nr},wr.queue=rr,rr=rr.dispatch=_N.bind(null,Mn,rr),[wr.memoizedState,rr]},useRef:function(rr){var nr=Yp();return rr={current:rr},nr.memoizedState=rr},useState:NR,useDebugValue:NT,useDeferredValue:function(rr){return Yp().memoizedState=rr},useTransition:function(){var rr=NR(!1),nr=rr[0];return rr=wN.bind(null,rr[1]),Yp().memoizedState=rr,[nr,rr]},useMutableSource:function(){},useSyncExternalStore:function(rr,nr,pr){var wr=Mn,Rr=Yp();if(ho){if(pr===void 0)throw Error(dt(407));pr=pr()}else{if(pr=nr(),Qo===null)throw Error(dt(349));Sn&30||AR(wr,nr,pr)}Rr.memoizedState=pr;var Gr={value:pr,getSnapshot:nr};return Rr.queue=Gr,MR(TR.bind(null,wr,Gr,rr),[rr]),wr.flags|=2048,wS(9,kR.bind(null,wr,Gr,pr,nr),void 0,null),pr},useId:function(){var rr=Yp(),nr=Qo.identifierPrefix;if(ho){var pr=rp,wr=pu;pr=(wr&~(1<<32-zl(wr)-1)).toString(32)+pr,nr=":"+nr+"R"+pr,pr=Vs++,0<pr&&(nr+="H"+pr.toString(32)),nr+=":"}else pr=Lu++,nr=":"+nr+"r"+pr.toString(32)+":";return rr.memoizedState=nr},unstable_isNewReconciler:!1},kN={readContext:Vo,useCallback:jR,useContext:Vo,useEffect:RT,useImperativeHandle:LR,useInsertionEffect:FR,useLayoutEffect:OR,useMemo:BR,useReducer:TT,useRef:DR,useState:function(){return TT(SS)},useDebugValue:NT,useDeferredValue:function(rr){var nr=up();return $R(nr,Vn.memoizedState,rr)},useTransition:function(){var rr=TT(SS)[0],nr=up().memoizedState;return[rr,nr]},useMutableSource:wR,useSyncExternalStore:_R,useId:VR,unstable_isNewReconciler:!1},TN={readContext:Vo,useCallback:jR,useContext:Vo,useEffect:RT,useImperativeHandle:LR,useInsertionEffect:FR,useLayoutEffect:OR,useMemo:BR,useReducer:PT,useRef:DR,useState:function(){return PT(SS)},useDebugValue:NT,useDeferredValue:function(rr){var nr=up();return Vn===null?nr.memoizedState=rr:$R(nr,Vn.memoizedState,rr)},useTransition:function(){var rr=PT(SS)[0],nr=up().memoizedState;return[rr,nr]},useMutableSource:wR,useSyncExternalStore:_R,useId:VR,unstable_isNewReconciler:!1};function kp(rr,nr){if(rr&&rr.defaultProps){nr=ct({},nr),rr=rr.defaultProps;for(var pr in rr)nr[pr]===void 0&&(nr[pr]=rr[pr]);return nr}return nr}function DT(rr,nr,pr,wr){nr=rr.memoizedState,pr=pr(wr,nr),pr=pr==null?nr:ct({},nr,pr),rr.memoizedState=pr,rr.lanes===0&&(rr.updateQueue.baseState=pr)}var I_={isMounted:function(rr){return(rr=rr._reactInternals)?vr(rr)===rr:!1},enqueueSetState:function(rr,nr,pr){rr=rr._reactInternals;var wr=Wl(),Rr=N0(rr),Gr=nu(wr,Rr);Gr.payload=nr,pr!=null&&(Gr.callback=pr),nr=gu(rr,Gr,Rr),nr!==null&&(cp(nr,rr,Rr,wr),k0(nr,rr,Rr))},enqueueReplaceState:function(rr,nr,pr){rr=rr._reactInternals;var wr=Wl(),Rr=N0(rr),Gr=nu(wr,Rr);Gr.tag=1,Gr.payload=nr,pr!=null&&(Gr.callback=pr),nr=gu(rr,Gr,Rr),nr!==null&&(cp(nr,rr,Rr,wr),k0(nr,rr,Rr))},enqueueForceUpdate:function(rr,nr){rr=rr._reactInternals;var pr=Wl(),wr=N0(rr),Rr=nu(pr,wr);Rr.tag=2,nr!=null&&(Rr.callback=nr),nr=gu(rr,Rr,wr),nr!==null&&(cp(nr,rr,wr,pr),k0(nr,rr,wr))}};function GR(rr,nr,pr,wr,Rr,Gr,un){return rr=rr.stateNode,typeof rr.shouldComponentUpdate=="function"?rr.shouldComponentUpdate(wr,Gr,un):nr.prototype&&nr.prototype.isPureReactComponent?!G1(pr,wr)||!G1(Rr,Gr):!0}function WR(rr,nr,pr){var wr=!1,Rr=yo,Gr=nr.contextType;return typeof Gr=="object"&&Gr!==null?Gr=Vo(Gr):(Rr=Ws(nr)?Po:xa.current,wr=nr.contextTypes,Gr=(wr=wr!=null)?Ao(rr,Rr):yo),nr=new nr(pr,Gr),rr.memoizedState=nr.state!==null&&nr.state!==void 0?nr.state:null,nr.updater=I_,rr.stateNode=nr,nr._reactInternals=rr,wr&&(rr=rr.stateNode,rr.__reactInternalMemoizedUnmaskedChildContext=Rr,rr.__reactInternalMemoizedMaskedChildContext=Gr),nr}function qR(rr,nr,pr,wr){rr=nr.state,typeof nr.componentWillReceiveProps=="function"&&nr.componentWillReceiveProps(pr,wr),typeof nr.UNSAFE_componentWillReceiveProps=="function"&&nr.UNSAFE_componentWillReceiveProps(pr,wr),nr.state!==rr&&I_.enqueueReplaceState(nr,nr.state,null)}function MT(rr,nr,pr,wr){var Rr=rr.stateNode;Rr.props=pr,Rr.state=rr.memoizedState,Rr.refs={},vS(rr);var Gr=nr.contextType;typeof Gr=="object"&&Gr!==null?Rr.context=Vo(Gr):(Gr=Ws(nr)?Po:xa.current,Rr.context=Ao(rr,Gr)),Rr.state=rr.memoizedState,Gr=nr.getDerivedStateFromProps,typeof Gr=="function"&&(DT(rr,nr,Gr,pr),Rr.state=rr.memoizedState),typeof nr.getDerivedStateFromProps=="function"||typeof Rr.getSnapshotBeforeUpdate=="function"||typeof Rr.UNSAFE_componentWillMount!="function"&&typeof Rr.componentWillMount!="function"||(nr=Rr.state,typeof Rr.componentWillMount=="function"&&Rr.componentWillMount(),typeof Rr.UNSAFE_componentWillMount=="function"&&Rr.UNSAFE_componentWillMount(),nr!==Rr.state&&I_.enqueueReplaceState(Rr,Rr.state,null),Gv(rr,pr,Rr,wr),Rr.state=rr.memoizedState),typeof Rr.componentDidMount=="function"&&(rr.flags|=4194308)}function q1(rr,nr){try{var pr="",wr=nr;do pr+=D_(wr),wr=wr.return;while(wr);var Rr=pr}catch(Gr){Rr=`
Error generating stack: `+Gr.message+`
`+Gr.stack}return{value:rr,source:nr,stack:Rr,digest:null}}function FT(rr,nr,pr){return{value:rr,source:null,stack:pr??null,digest:nr??null}}function OT(rr,nr){try{console.error(nr.value)}catch(pr){setTimeout(function(){throw pr})}}var PN=typeof WeakMap=="function"?WeakMap:Map;function KR(rr,nr,pr){pr=nu(-1,pr),pr.tag=3,pr.payload={element:null};var wr=nr.value;return pr.callback=function(){Y_||(Y_=!0,tP=wr),OT(rr,nr)},pr}function XR(rr,nr,pr){pr=nu(-1,pr),pr.tag=3;var wr=rr.type.getDerivedStateFromError;if(typeof wr=="function"){var Rr=nr.value;pr.payload=function(){return wr(Rr)},pr.callback=function(){OT(rr,nr)}}var Gr=rr.stateNode;return Gr!==null&&typeof Gr.componentDidCatch=="function"&&(pr.callback=function(){OT(rr,nr),typeof wr!="function"&&(P0===null?P0=new Set([this]):P0.add(this));var un=nr.stack;this.componentDidCatch(nr.value,{componentStack:un!==null?un:""})}),pr}function YR(rr,nr,pr){var wr=rr.pingCache;if(wr===null){wr=rr.pingCache=new PN;var Rr=new Set;wr.set(nr,Rr)}else Rr=wr.get(nr),Rr===void 0&&(Rr=new Set,wr.set(nr,Rr));Rr.has(pr)||(Rr.add(pr),rr=UN.bind(null,rr,nr,pr),nr.then(rr,rr))}function ZR(rr){do{var nr;if((nr=rr.tag===13)&&(nr=rr.memoizedState,nr=nr!==null?nr.dehydrated!==null:!0),nr)return rr;rr=rr.return}while(rr!==null);return null}function JR(rr,nr,pr,wr,Rr){return rr.mode&1?(rr.flags|=65536,rr.lanes=Rr,rr):(rr===nr?rr.flags|=65536:(rr.flags|=128,pr.flags|=131072,pr.flags&=-52805,pr.tag===1&&(pr.alternate===null?pr.tag=17:(nr=nu(-1,1),nr.tag=2,gu(pr,nr,1))),pr.lanes|=1),rr)}var RN=ft.ReactCurrentOwner,xu=!1;function iu(rr,nr,pr,wr){nr.child=rr===null?zs(nr,null,pr,wr):Mm(nr,rr.child,pr,wr)}function QR(rr,nr,pr,wr,Rr){pr=pr.render;var Gr=nr.ref;return Ap(nr,Rr),wr=T0(rr,nr,pr,wr,Gr,Rr),pr=ES(),rr!==null&&!xu?(nr.updateQueue=rr.updateQueue,nr.flags&=-2053,rr.lanes&=~Rr,Im(rr,nr,Rr)):(ho&&pr&&No(nr),nr.flags|=1,iu(rr,nr,wr,Rr),nr.child)}function e3(rr,nr,pr,wr,Rr){if(rr===null){var Gr=pr.type;return typeof Gr=="function"&&!oP(Gr)&&Gr.defaultProps===void 0&&pr.compare===null&&pr.defaultProps===void 0?(nr.tag=15,nr.type=Gr,t3(rr,nr,Gr,wr,Rr)):(rr=rC(pr.type,null,wr,nr,nr.mode,Rr),rr.ref=nr.ref,rr.return=nr,nr.child=rr)}if(Gr=rr.child,!(rr.lanes&Rr)){var un=Gr.memoizedProps;if(pr=pr.compare,pr=pr!==null?pr:G1,pr(un,wr)&&rr.ref===nr.ref)return Im(rr,nr,Rr)}return nr.flags|=1,rr=M0(Gr,wr),rr.ref=nr.ref,rr.return=nr,nr.child=rr}function t3(rr,nr,pr,wr,Rr){if(rr!==null){var Gr=rr.memoizedProps;if(G1(Gr,wr)&&rr.ref===nr.ref)if(xu=!1,nr.pendingProps=wr=Gr,(rr.lanes&Rr)!==0)rr.flags&131072&&(xu=!0);else return nr.lanes=rr.lanes,Im(rr,nr,Rr)}return IT(rr,nr,pr,wr,Rr)}function r3(rr,nr,pr){var wr=nr.pendingProps,Rr=wr.children,Gr=rr!==null?rr.memoizedState:null;if(wr.mode==="hidden")if(!(nr.mode&1))nr.memoizedState={baseLanes:0,cachePool:null,transitions:null},ks(X1,ju),ju|=pr;else{if(!(pr&1073741824))return rr=Gr!==null?Gr.baseLanes|pr:pr,nr.lanes=nr.childLanes=1073741824,nr.memoizedState={baseLanes:rr,cachePool:null,transitions:null},nr.updateQueue=null,ks(X1,ju),ju|=rr,null;nr.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr=Gr!==null?Gr.baseLanes:pr,ks(X1,ju),ju|=wr}else Gr!==null?(wr=Gr.baseLanes|pr,nr.memoizedState=null):wr=pr,ks(X1,ju),ju|=wr;return iu(rr,nr,Rr,pr),nr.child}function n3(rr,nr){var pr=nr.ref;(rr===null&&pr!==null||rr!==null&&rr.ref!==pr)&&(nr.flags|=512,nr.flags|=2097152)}function IT(rr,nr,pr,wr,Rr){var Gr=Ws(pr)?Po:xa.current;return Gr=Ao(nr,Gr),Ap(nr,Rr),pr=T0(rr,nr,pr,wr,Gr,Rr),wr=ES(),rr!==null&&!xu?(nr.updateQueue=rr.updateQueue,nr.flags&=-2053,rr.lanes&=~Rr,Im(rr,nr,Rr)):(ho&&wr&&No(nr),nr.flags|=1,iu(rr,nr,pr,Rr),nr.child)}function i3(rr,nr,pr,wr,Rr){if(Ws(pr)){var Gr=!0;Wp(nr)}else Gr=!1;if(Ap(nr,Rr),nr.stateNode===null)j_(rr,nr),WR(nr,pr,wr),MT(nr,pr,wr,Rr),wr=!0;else if(rr===null){var un=nr.stateNode,kn=nr.memoizedProps;un.props=kn;var jn=un.context,_i=pr.contextType;typeof _i=="object"&&_i!==null?_i=Vo(_i):(_i=Ws(pr)?Po:xa.current,_i=Ao(nr,_i));var ps=pr.getDerivedStateFromProps,Ns=typeof ps=="function"||typeof un.getSnapshotBeforeUpdate=="function";Ns||typeof un.UNSAFE_componentWillReceiveProps!="function"&&typeof un.componentWillReceiveProps!="function"||(kn!==wr||jn!==_i)&&qR(nr,un,wr,_i),ap=!1;var us=nr.memoizedState;un.state=us,Gv(nr,wr,un,Rr),jn=nr.memoizedState,kn!==wr||us!==jn||Xs.current||ap?(typeof ps=="function"&&(DT(nr,pr,ps,wr),jn=nr.memoizedState),(kn=ap||GR(nr,pr,kn,wr,us,jn,_i))?(Ns||typeof un.UNSAFE_componentWillMount!="function"&&typeof un.componentWillMount!="function"||(typeof un.componentWillMount=="function"&&un.componentWillMount(),typeof un.UNSAFE_componentWillMount=="function"&&un.UNSAFE_componentWillMount()),typeof un.componentDidMount=="function"&&(nr.flags|=4194308)):(typeof un.componentDidMount=="function"&&(nr.flags|=4194308),nr.memoizedProps=wr,nr.memoizedState=jn),un.props=wr,un.state=jn,un.context=_i,wr=kn):(typeof un.componentDidMount=="function"&&(nr.flags|=4194308),wr=!1)}else{un=nr.stateNode,mu(rr,nr),kn=nr.memoizedProps,_i=nr.type===nr.elementType?kn:kp(nr.type,kn),un.props=_i,Ns=nr.pendingProps,us=un.context,jn=pr.contextType,typeof jn=="object"&&jn!==null?jn=Vo(jn):(jn=Ws(pr)?Po:xa.current,jn=Ao(nr,jn));var vo=pr.getDerivedStateFromProps;(ps=typeof vo=="function"||typeof un.getSnapshotBeforeUpdate=="function")||typeof un.UNSAFE_componentWillReceiveProps!="function"&&typeof un.componentWillReceiveProps!="function"||(kn!==Ns||us!==jn)&&qR(nr,un,wr,jn),ap=!1,us=nr.memoizedState,un.state=us,Gv(nr,wr,un,Rr);var eo=nr.memoizedState;kn!==Ns||us!==eo||Xs.current||ap?(typeof vo=="function"&&(DT(nr,pr,vo,wr),eo=nr.memoizedState),(_i=ap||GR(nr,pr,_i,wr,us,eo,jn)||!1)?(ps||typeof un.UNSAFE_componentWillUpdate!="function"&&typeof un.componentWillUpdate!="function"||(typeof un.componentWillUpdate=="function"&&un.componentWillUpdate(wr,eo,jn),typeof un.UNSAFE_componentWillUpdate=="function"&&un.UNSAFE_componentWillUpdate(wr,eo,jn)),typeof un.componentDidUpdate=="function"&&(nr.flags|=4),typeof un.getSnapshotBeforeUpdate=="function"&&(nr.flags|=1024)):(typeof un.componentDidUpdate!="function"||kn===rr.memoizedProps&&us===rr.memoizedState||(nr.flags|=4),typeof un.getSnapshotBeforeUpdate!="function"||kn===rr.memoizedProps&&us===rr.memoizedState||(nr.flags|=1024),nr.memoizedProps=wr,nr.memoizedState=eo),un.props=wr,un.state=eo,un.context=jn,wr=_i):(typeof un.componentDidUpdate!="function"||kn===rr.memoizedProps&&us===rr.memoizedState||(nr.flags|=4),typeof un.getSnapshotBeforeUpdate!="function"||kn===rr.memoizedProps&&us===rr.memoizedState||(nr.flags|=1024),wr=!1)}return LT(rr,nr,pr,wr,Gr,Rr)}function LT(rr,nr,pr,wr,Rr,Gr){n3(rr,nr);var un=(nr.flags&128)!==0;if(!wr&&!un)return Rr&&Iv(nr,pr,!1),Im(rr,nr,Gr);wr=nr.stateNode,RN.current=nr;var kn=un&&typeof pr.getDerivedStateFromError!="function"?null:wr.render();return nr.flags|=1,rr!==null&&un?(nr.child=Mm(nr,rr.child,null,Gr),nr.child=Mm(nr,null,kn,Gr)):iu(rr,nr,kn,Gr),nr.memoizedState=wr.state,Rr&&Iv(nr,pr,!0),nr.child}function s3(rr){var nr=rr.stateNode;nr.pendingContext?ba(rr,nr.pendingContext,nr.pendingContext!==nr.context):nr.context&&ba(rr,nr.context,!1),xS(rr,nr.containerInfo)}function a3(rr,nr,pr,wr,Rr){return mo(),H1(Rr),nr.flags|=256,iu(rr,nr,pr,wr),nr.child}var jT={dehydrated:null,treeContext:null,retryLane:0};function BT(rr){return{baseLanes:rr,cachePool:null,transitions:null}}function o3(rr,nr,pr){var wr=nr.pendingProps,Rr=go.current,Gr=!1,un=(nr.flags&128)!==0,kn;if((kn=un)||(kn=rr!==null&&rr.memoizedState===null?!1:(Rr&2)!==0),kn?(Gr=!0,nr.flags&=-129):(rr===null||rr.memoizedState!==null)&&(Rr|=1),ks(go,Rr&1),rr===null)return mS(nr),rr=nr.memoizedState,rr!==null&&(rr=rr.dehydrated,rr!==null)?(nr.mode&1?cn(rr)?nr.lanes=8:nr.lanes=1073741824:nr.lanes=1,null):(un=wr.children,rr=wr.fallback,Gr?(wr=nr.mode,Gr=nr.child,un={mode:"hidden",children:un},!(wr&1)&&Gr!==null?(Gr.childLanes=0,Gr.pendingProps=un):Gr=nC(un,wr,0,null),rr=ty(rr,wr,pr,null),Gr.return=nr,rr.return=nr,Gr.sibling=rr,nr.child=Gr,nr.child.memoizedState=BT(pr),nr.memoizedState=jT,rr):$T(nr,un));if(Rr=rr.memoizedState,Rr!==null&&(kn=Rr.dehydrated,kn!==null))return NN(rr,nr,un,wr,kn,Rr,pr);if(Gr){Gr=wr.fallback,un=nr.mode,Rr=rr.child,kn=Rr.sibling;var jn={mode:"hidden",children:wr.children};return!(un&1)&&nr.child!==Rr?(wr=nr.child,wr.childLanes=0,wr.pendingProps=jn,nr.deletions=null):(wr=M0(Rr,jn),wr.subtreeFlags=Rr.subtreeFlags&14680064),kn!==null?Gr=M0(kn,Gr):(Gr=ty(Gr,un,pr,null),Gr.flags|=2),Gr.return=nr,wr.return=nr,wr.sibling=Gr,nr.child=wr,wr=Gr,Gr=nr.child,un=rr.child.memoizedState,un=un===null?BT(pr):{baseLanes:un.baseLanes|pr,cachePool:null,transitions:un.transitions},Gr.memoizedState=un,Gr.childLanes=rr.childLanes&~pr,nr.memoizedState=jT,wr}return Gr=rr.child,rr=Gr.sibling,wr=M0(Gr,{mode:"visible",children:wr.children}),!(nr.mode&1)&&(wr.lanes=pr),wr.return=nr,wr.sibling=null,rr!==null&&(pr=nr.deletions,pr===null?(nr.deletions=[rr],nr.flags|=16):pr.push(rr)),nr.child=wr,nr.memoizedState=null,wr}function $T(rr,nr){return nr=nC({mode:"visible",children:nr},rr.mode,0,null),nr.return=rr,rr.child=nr}function L_(rr,nr,pr,wr){return wr!==null&&H1(wr),Mm(nr,rr.child,null,pr),rr=$T(nr,nr.pendingProps.children),rr.flags|=2,nr.memoizedState=null,rr}function NN(rr,nr,pr,wr,Rr,Gr,un){if(pr)return nr.flags&256?(nr.flags&=-257,wr=FT(Error(dt(422))),L_(rr,nr,un,wr)):nr.memoizedState!==null?(nr.child=rr.child,nr.flags|=128,null):(Gr=wr.fallback,Rr=nr.mode,wr=nC({mode:"visible",children:wr.children},Rr,0,null),Gr=ty(Gr,Rr,un,null),Gr.flags|=2,wr.return=nr,Gr.return=nr,wr.sibling=Gr,nr.child=wr,nr.mode&1&&Mm(nr,rr.child,null,un),nr.child.memoizedState=BT(un),nr.memoizedState=jT,Gr);if(!(nr.mode&1))return L_(rr,nr,un,null);if(cn(Rr))return wr=vn(Rr).digest,Gr=Error(dt(419)),wr=FT(Gr,wr,void 0),L_(rr,nr,un,wr);if(pr=(un&rr.childLanes)!==0,xu||pr){if(wr=Qo,wr!==null){switch(un&-un){case 4:Rr=2;break;case 16:Rr=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Rr=32;break;case 536870912:Rr=268435456;break;default:Rr=0}Rr=Rr&(wr.suspendedLanes|un)?0:Rr,Rr!==0&&Rr!==Gr.retryLane&&(Gr.retryLane=Rr,sp(rr,Rr),cp(wr,rr,Rr,-1))}return aP(),wr=FT(Error(dt(421))),L_(rr,nr,un,wr)}return xn(Rr)?(nr.flags|=128,nr.child=rr.child,nr=HN.bind(null,rr),bn(Rr,nr),null):(rr=Gr.treeContext,Un&&(Go=Wn(Rr),Dl=nr,ho=!0,Fu=null,Bv=!1,rr!==null&&(du[Rl++]=pu,du[Rl++]=rp,du[Rl++]=fu,pu=rr.id,rp=rr.overflow,fu=nr)),nr=$T(nr,wr.children),nr.flags|=4096,nr)}function l3(rr,nr,pr){rr.lanes|=nr;var wr=rr.alternate;wr!==null&&(wr.lanes|=nr),$a(rr.return,nr,pr)}function VT(rr,nr,pr,wr,Rr){var Gr=rr.memoizedState;Gr===null?rr.memoizedState={isBackwards:nr,rendering:null,renderingStartTime:0,last:wr,tail:pr,tailMode:Rr}:(Gr.isBackwards=nr,Gr.rendering=null,Gr.renderingStartTime=0,Gr.last=wr,Gr.tail=pr,Gr.tailMode=Rr)}function u3(rr,nr,pr){var wr=nr.pendingProps,Rr=wr.revealOrder,Gr=wr.tail;if(iu(rr,nr,wr.children,pr),wr=go.current,wr&2)wr=wr&1|2,nr.flags|=128;else{if(rr!==null&&rr.flags&128)e:for(rr=nr.child;rr!==null;){if(rr.tag===13)rr.memoizedState!==null&&l3(rr,pr,nr);else if(rr.tag===19)l3(rr,pr,nr);else if(rr.child!==null){rr.child.return=rr,rr=rr.child;continue}if(rr===nr)break e;for(;rr.sibling===null;){if(rr.return===null||rr.return===nr)break e;rr=rr.return}rr.sibling.return=rr.return,rr=rr.sibling}wr&=1}if(ks(go,wr),!(nr.mode&1))nr.memoizedState=null;else switch(Rr){case"forwards":for(pr=nr.child,Rr=null;pr!==null;)rr=pr.alternate,rr!==null&&qv(rr)===null&&(Rr=pr),pr=pr.sibling;pr=Rr,pr===null?(Rr=nr.child,nr.child=null):(Rr=pr.sibling,pr.sibling=null),VT(nr,!1,Rr,pr,Gr);break;case"backwards":for(pr=null,Rr=nr.child,nr.child=null;Rr!==null;){if(rr=Rr.alternate,rr!==null&&qv(rr)===null){nr.child=Rr;break}rr=Rr.sibling,Rr.sibling=pr,pr=Rr,Rr=rr}VT(nr,!0,pr,null,Gr);break;case"together":VT(nr,!1,null,null,void 0);break;default:nr.memoizedState=null}return nr.child}function j_(rr,nr){!(nr.mode&1)&&rr!==null&&(rr.alternate=null,nr.alternate=null,nr.flags|=2)}function Im(rr,nr,pr){if(rr!==null&&(nr.dependencies=rr.dependencies),Zv|=nr.lanes,!(pr&nr.childLanes))return null;if(rr!==null&&nr.child!==rr.child)throw Error(dt(153));if(nr.child!==null){for(rr=nr.child,pr=M0(rr,rr.pendingProps),nr.child=pr,pr.return=nr;rr.sibling!==null;)rr=rr.sibling,pr=pr.sibling=M0(rr,rr.pendingProps),pr.return=nr;pr.sibling=null}return nr.child}function DN(rr,nr,pr){switch(nr.tag){case 3:s3(nr),mo();break;case 5:W1(nr);break;case 1:Ws(nr.type)&&Wp(nr);break;case 4:xS(nr,nr.stateNode.containerInfo);break;case 10:Rs(nr,nr.type._context,nr.memoizedProps.value);break;case 13:var wr=nr.memoizedState;if(wr!==null)return wr.dehydrated!==null?(ks(go,go.current&1),nr.flags|=128,null):pr&nr.child.childLanes?o3(rr,nr,pr):(ks(go,go.current&1),rr=Im(rr,nr,pr),rr!==null?rr.sibling:null);ks(go,go.current&1);break;case 19:if(wr=(pr&nr.childLanes)!==0,rr.flags&128){if(wr)return u3(rr,nr,pr);nr.flags|=128}var Rr=nr.memoizedState;if(Rr!==null&&(Rr.rendering=null,Rr.tail=null,Rr.lastEffect=null),ks(go,go.current),wr)break;return null;case 22:case 23:return nr.lanes=0,r3(rr,nr,pr)}return Im(rr,nr,pr)}function Zp(rr){rr.flags|=4}function c3(rr,nr){if(rr!==null&&rr.child===nr.child)return!0;if(nr.flags&16)return!1;for(rr=nr.child;rr!==null;){if(rr.flags&12854||rr.subtreeFlags&12854)return!1;rr=rr.sibling}return!0}var _S,CS,B_,$_;if(On)_S=function(rr,nr){for(var pr=nr.child;pr!==null;){if(pr.tag===5||pr.tag===6)Lr(rr,pr.stateNode);else if(pr.tag!==4&&pr.child!==null){pr.child.return=pr,pr=pr.child;continue}if(pr===nr)break;for(;pr.sibling===null;){if(pr.return===null||pr.return===nr)return;pr=pr.return}pr.sibling.return=pr.return,pr=pr.sibling}},CS=function(){},B_=function(rr,nr,pr,wr,Rr){if(rr=rr.memoizedProps,rr!==wr){var Gr=nr.stateNode,un=yu(vu.current);pr=sn(Gr,pr,rr,wr,Rr,un),(nr.updateQueue=pr)&&Zp(nr)}},$_=function(rr,nr,pr,wr){pr!==wr&&Zp(nr)};else if(Xn){_S=function(rr,nr,pr,wr){for(var Rr=nr.child;Rr!==null;){if(Rr.tag===5){var Gr=Rr.stateNode;pr&&wr&&(Gr=nn(Gr,Rr.type,Rr.memoizedProps,Rr)),Lr(rr,Gr)}else if(Rr.tag===6)Gr=Rr.stateNode,pr&&wr&&(Gr=Zr(Gr,Rr.memoizedProps,Rr)),Lr(rr,Gr);else if(Rr.tag!==4){if(Rr.tag===22&&Rr.memoizedState!==null)Gr=Rr.child,Gr!==null&&(Gr.return=Rr),_S(rr,Rr,!0,!0);else if(Rr.child!==null){Rr.child.return=Rr,Rr=Rr.child;continue}}if(Rr===nr)break;for(;Rr.sibling===null;){if(Rr.return===null||Rr.return===nr)return;Rr=Rr.return}Rr.sibling.return=Rr.return,Rr=Rr.sibling}};var h3=function(rr,nr,pr,wr){for(var Rr=nr.child;Rr!==null;){if(Rr.tag===5){var Gr=Rr.stateNode;pr&&wr&&(Gr=nn(Gr,Rr.type,Rr.memoizedProps,Rr)),jr(rr,Gr)}else if(Rr.tag===6)Gr=Rr.stateNode,pr&&wr&&(Gr=Zr(Gr,Rr.memoizedProps,Rr)),jr(rr,Gr);else if(Rr.tag!==4){if(Rr.tag===22&&Rr.memoizedState!==null)Gr=Rr.child,Gr!==null&&(Gr.return=Rr),h3(rr,Rr,!0,!0);else if(Rr.child!==null){Rr.child.return=Rr,Rr=Rr.child;continue}}if(Rr===nr)break;for(;Rr.sibling===null;){if(Rr.return===null||Rr.return===nr)return;Rr=Rr.return}Rr.sibling.return=Rr.return,Rr=Rr.sibling}};CS=function(rr,nr){var pr=nr.stateNode;if(!c3(rr,nr)){rr=pr.containerInfo;var wr=Wr(rr);h3(wr,nr,!1,!1),pr.pendingChildren=wr,Zp(nr),Xr(rr,wr)}},B_=function(rr,nr,pr,wr,Rr){var Gr=rr.stateNode,un=rr.memoizedProps;if((rr=c3(rr,nr))&&un===wr)nr.stateNode=Gr;else{var kn=nr.stateNode,jn=yu(vu.current),_i=null;un!==wr&&(_i=sn(kn,pr,un,wr,Rr,jn)),rr&&_i===null?nr.stateNode=Gr:(Gr=zr(Gr,_i,pr,un,wr,nr,rr,kn),qr(Gr,pr,wr,Rr,jn)&&Zp(nr),nr.stateNode=Gr,rr?Zp(nr):_S(Gr,nr,!1,!1))}},$_=function(rr,nr,pr,wr){pr!==wr?(rr=yu(Xp.current),pr=yu(vu.current),nr.stateNode=tn(wr,rr,pr,nr),Zp(nr)):nr.stateNode=rr.stateNode}}else CS=function(){},B_=function(){},$_=function(){};function AS(rr,nr){if(!ho)switch(rr.tailMode){case"hidden":nr=rr.tail;for(var pr=null;nr!==null;)nr.alternate!==null&&(pr=nr),nr=nr.sibling;pr===null?rr.tail=null:pr.sibling=null;break;case"collapsed":pr=rr.tail;for(var wr=null;pr!==null;)pr.alternate!==null&&(wr=pr),pr=pr.sibling;wr===null?nr||rr.tail===null?rr.tail=null:rr.tail.sibling=null:wr.sibling=null}}function Hl(rr){var nr=rr.alternate!==null&&rr.alternate.child===rr.child,pr=0,wr=0;if(nr)for(var Rr=rr.child;Rr!==null;)pr|=Rr.lanes|Rr.childLanes,wr|=Rr.subtreeFlags&14680064,wr|=Rr.flags&14680064,Rr.return=rr,Rr=Rr.sibling;else for(Rr=rr.child;Rr!==null;)pr|=Rr.lanes|Rr.childLanes,wr|=Rr.subtreeFlags,wr|=Rr.flags,Rr.return=rr,Rr=Rr.sibling;return rr.subtreeFlags|=wr,rr.childLanes=pr,nr}function MN(rr,nr,pr){var wr=nr.pendingProps;switch(fS(nr),nr.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hl(nr),null;case 1:return Ws(nr.type)&&ko(),Hl(nr),null;case 3:return pr=nr.stateNode,lp(),Fs(Xs),Fs(xa),Xv(),pr.pendingContext&&(pr.context=pr.pendingContext,pr.pendingContext=null),(rr===null||rr.child===null)&&(U1(nr)?Zp(nr):rr===null||rr.memoizedState.isDehydrated&&!(nr.flags&256)||(nr.flags|=1024,Fu!==null&&(iP(Fu),Fu=null))),CS(rr,nr),Hl(nr),null;case 5:bS(nr),pr=yu(Xp.current);var Rr=nr.type;if(rr!==null&&nr.stateNode!=null)B_(rr,nr,Rr,wr,pr),rr.ref!==nr.ref&&(nr.flags|=512,nr.flags|=2097152);else{if(!wr){if(nr.stateNode===null)throw Error(dt(166));return Hl(nr),null}if(rr=yu(vu.current),U1(nr)){if(!Un)throw Error(dt(175));rr=Yn(nr.stateNode,nr.type,nr.memoizedProps,pr,rr,nr,!Bv),nr.updateQueue=rr,rr!==null&&Zp(nr)}else{var Gr=Cr(Rr,wr,pr,rr,nr);_S(Gr,nr,!1,!1),nr.stateNode=Gr,qr(Gr,Rr,wr,pr,rr)&&Zp(nr)}nr.ref!==null&&(nr.flags|=512,nr.flags|=2097152)}return Hl(nr),null;case 6:if(rr&&nr.stateNode!=null)$_(rr,nr,rr.memoizedProps,wr);else{if(typeof wr!="string"&&nr.stateNode===null)throw Error(dt(166));if(rr=yu(Xp.current),pr=yu(vu.current),U1(nr)){if(!Un)throw Error(dt(176));if(rr=nr.stateNode,pr=nr.memoizedProps,(wr=Qn(rr,pr,nr,!Bv))&&(Rr=Dl,Rr!==null))switch(Rr.tag){case 3:vs(Rr.stateNode.containerInfo,rr,pr,(Rr.mode&1)!==0);break;case 5:_s(Rr.type,Rr.memoizedProps,Rr.stateNode,rr,pr,(Rr.mode&1)!==0)}wr&&Zp(nr)}else nr.stateNode=tn(wr,rr,pr,nr)}return Hl(nr),null;case 13:if(Fs(go),wr=nr.memoizedState,rr===null||rr.memoizedState!==null&&rr.memoizedState.dehydrated!==null){if(ho&&Go!==null&&nr.mode&1&&!(nr.flags&128))Kp(),mo(),nr.flags|=98560,Rr=!1;else if(Rr=U1(nr),wr!==null&&wr.dehydrated!==null){if(rr===null){if(!Rr)throw Error(dt(318));if(!Un)throw Error(dt(344));if(Rr=nr.memoizedState,Rr=Rr!==null?Rr.dehydrated:null,!Rr)throw Error(dt(317));ss(Rr,nr)}else mo(),!(nr.flags&128)&&(nr.memoizedState=null),nr.flags|=4;Hl(nr),Rr=!1}else Fu!==null&&(iP(Fu),Fu=null),Rr=!0;if(!Rr)return nr.flags&65536?nr:null}return nr.flags&128?(nr.lanes=pr,nr):(pr=wr!==null,pr!==(rr!==null&&rr.memoizedState!==null)&&pr&&(nr.child.flags|=8192,nr.mode&1&&(rr===null||go.current&1?qo===0&&(qo=3):aP())),nr.updateQueue!==null&&(nr.flags|=4),Hl(nr),null);case 4:return lp(),CS(rr,nr),rr===null&&ns(nr.stateNode.containerInfo),Hl(nr),null;case 10:return Uv(nr.type._context),Hl(nr),null;case 17:return Ws(nr.type)&&ko(),Hl(nr),null;case 19:if(Fs(go),Rr=nr.memoizedState,Rr===null)return Hl(nr),null;if(wr=(nr.flags&128)!==0,Gr=Rr.rendering,Gr===null)if(wr)AS(Rr,!1);else{if(qo!==0||rr!==null&&rr.flags&128)for(rr=nr.child;rr!==null;){if(Gr=qv(rr),Gr!==null){for(nr.flags|=128,AS(Rr,!1),rr=Gr.updateQueue,rr!==null&&(nr.updateQueue=rr,nr.flags|=4),nr.subtreeFlags=0,rr=pr,pr=nr.child;pr!==null;)wr=pr,Rr=rr,wr.flags&=14680066,Gr=wr.alternate,Gr===null?(wr.childLanes=0,wr.lanes=Rr,wr.child=null,wr.subtreeFlags=0,wr.memoizedProps=null,wr.memoizedState=null,wr.updateQueue=null,wr.dependencies=null,wr.stateNode=null):(wr.childLanes=Gr.childLanes,wr.lanes=Gr.lanes,wr.child=Gr.child,wr.subtreeFlags=0,wr.deletions=null,wr.memoizedProps=Gr.memoizedProps,wr.memoizedState=Gr.memoizedState,wr.updateQueue=Gr.updateQueue,wr.type=Gr.type,Rr=Gr.dependencies,wr.dependencies=Rr===null?null:{lanes:Rr.lanes,firstContext:Rr.firstContext}),pr=pr.sibling;return ks(go,go.current&1|2),nr.child}rr=rr.sibling}Rr.tail!==null&&Nn()>eP&&(nr.flags|=128,wr=!0,AS(Rr,!1),nr.lanes=4194304)}else{if(!wr)if(rr=qv(Gr),rr!==null){if(nr.flags|=128,wr=!0,rr=rr.updateQueue,rr!==null&&(nr.updateQueue=rr,nr.flags|=4),AS(Rr,!0),Rr.tail===null&&Rr.tailMode==="hidden"&&!Gr.alternate&&!ho)return Hl(nr),null}else 2*Nn()-Rr.renderingStartTime>eP&&pr!==1073741824&&(nr.flags|=128,wr=!0,AS(Rr,!1),nr.lanes=4194304);Rr.isBackwards?(Gr.sibling=nr.child,nr.child=Gr):(rr=Rr.last,rr!==null?rr.sibling=Gr:nr.child=Gr,Rr.last=Gr)}return Rr.tail!==null?(nr=Rr.tail,Rr.rendering=nr,Rr.tail=nr.sibling,Rr.renderingStartTime=Nn(),nr.sibling=null,rr=go.current,ks(go,wr?rr&1|2:rr&1),nr):(Hl(nr),null);case 22:case 23:return sP(),pr=nr.memoizedState!==null,rr!==null&&rr.memoizedState!==null!==pr&&(nr.flags|=8192),pr&&nr.mode&1?ju&1073741824&&(Hl(nr),On&&nr.subtreeFlags&6&&(nr.flags|=8192)):Hl(nr),null;case 24:return null;case 25:return null}throw Error(dt(156,nr.tag))}function FN(rr,nr){switch(fS(nr),nr.tag){case 1:return Ws(nr.type)&&ko(),rr=nr.flags,rr&65536?(nr.flags=rr&-65537|128,nr):null;case 3:return lp(),Fs(Xs),Fs(xa),Xv(),rr=nr.flags,rr&65536&&!(rr&128)?(nr.flags=rr&-65537|128,nr):null;case 5:return bS(nr),null;case 13:if(Fs(go),rr=nr.memoizedState,rr!==null&&rr.dehydrated!==null){if(nr.alternate===null)throw Error(dt(340));mo()}return rr=nr.flags,rr&65536?(nr.flags=rr&-65537|128,nr):null;case 19:return Fs(go),null;case 4:return lp(),null;case 10:return Uv(nr.type._context),null;case 22:case 23:return sP(),null;case 24:return null;default:return null}}var V_=!1,Gl=!1,ON=typeof WeakSet=="function"?WeakSet:Set,ds=null;function K1(rr,nr){var pr=rr.ref;if(pr!==null)if(typeof pr=="function")try{pr(null)}catch(wr){bo(rr,nr,wr)}else pr.current=null}function zT(rr,nr,pr){try{pr()}catch(wr){bo(rr,nr,wr)}}var d3=!1;function IN(rr,nr){for(Er(rr.containerInfo),ds=nr;ds!==null;)if(rr=ds,nr=rr.child,(rr.subtreeFlags&1028)!==0&&nr!==null)nr.return=rr,ds=nr;else for(;ds!==null;){rr=ds;try{var pr=rr.alternate;if(rr.flags&1024)switch(rr.tag){case 0:case 11:case 15:break;case 1:if(pr!==null){var wr=pr.memoizedProps,Rr=pr.memoizedState,Gr=rr.stateNode,un=Gr.getSnapshotBeforeUpdate(rr.elementType===rr.type?wr:kp(rr.type,wr),Rr);Gr.__reactInternalSnapshotBeforeUpdate=un}break;case 3:On&&Yr(rr.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(dt(163))}}catch(kn){bo(rr,rr.return,kn)}if(nr=rr.sibling,nr!==null){nr.return=rr.return,ds=nr;break}ds=rr.return}return pr=d3,d3=!1,pr}function kS(rr,nr,pr){var wr=nr.updateQueue;if(wr=wr!==null?wr.lastEffect:null,wr!==null){var Rr=wr=wr.next;do{if((Rr.tag&rr)===rr){var Gr=Rr.destroy;Rr.destroy=void 0,Gr!==void 0&&zT(nr,pr,Gr)}Rr=Rr.next}while(Rr!==wr)}}function z_(rr,nr){if(nr=nr.updateQueue,nr=nr!==null?nr.lastEffect:null,nr!==null){var pr=nr=nr.next;do{if((pr.tag&rr)===rr){var wr=pr.create;pr.destroy=wr()}pr=pr.next}while(pr!==nr)}}function UT(rr){var nr=rr.ref;if(nr!==null){var pr=rr.stateNode;switch(rr.tag){case 5:rr=hr(pr);break;default:rr=pr}typeof nr=="function"?nr(rr):nr.current=rr}}function f3(rr){var nr=rr.alternate;nr!==null&&(rr.alternate=null,f3(nr)),rr.child=null,rr.deletions=null,rr.sibling=null,rr.tag===5&&(nr=rr.stateNode,nr!==null&&Es(nr)),rr.stateNode=null,rr.return=null,rr.dependencies=null,rr.memoizedProps=null,rr.memoizedState=null,rr.pendingProps=null,rr.stateNode=null,rr.updateQueue=null}function p3(rr){return rr.tag===5||rr.tag===3||rr.tag===4}function m3(rr){e:for(;;){for(;rr.sibling===null;){if(rr.return===null||p3(rr.return))return null;rr=rr.return}for(rr.sibling.return=rr.return,rr=rr.sibling;rr.tag!==5&&rr.tag!==6&&rr.tag!==18;){if(rr.flags&2||rr.child===null||rr.tag===4)continue e;rr.child.return=rr,rr=rr.child}if(!(rr.flags&2))return rr.stateNode}}function HT(rr,nr,pr){var wr=rr.tag;if(wr===5||wr===6)rr=rr.stateNode,nr?Nr(pr,rr,nr):ur(pr,rr);else if(wr!==4&&(rr=rr.child,rr!==null))for(HT(rr,nr,pr),rr=rr.sibling;rr!==null;)HT(rr,nr,pr),rr=rr.sibling}function GT(rr,nr,pr){var wr=rr.tag;if(wr===5||wr===6)rr=rr.stateNode,nr?_r(pr,rr,nr):or(pr,rr);else if(wr!==4&&(rr=rr.child,rr!==null))for(GT(rr,nr,pr),rr=rr.sibling;rr!==null;)GT(rr,nr,pr),rr=rr.sibling}var Ml=null,Tp=!1;function Jp(rr,nr,pr){for(pr=pr.child;pr!==null;)WT(rr,nr,pr),pr=pr.sibling}function WT(rr,nr,pr){if($o&&typeof $o.onCommitFiberUnmount=="function")try{$o.onCommitFiberUnmount(co,pr)}catch{}switch(pr.tag){case 5:Gl||K1(pr,nr);case 6:if(On){var wr=Ml,Rr=Tp;Ml=null,Jp(rr,nr,pr),Ml=wr,Tp=Rr,Ml!==null&&(Tp?Vr(Ml,pr.stateNode):Fr(Ml,pr.stateNode))}else Jp(rr,nr,pr);break;case 18:On&&Ml!==null&&(Tp?as(Ml,pr.stateNode):ls(Ml,pr.stateNode));break;case 4:On?(wr=Ml,Rr=Tp,Ml=pr.stateNode.containerInfo,Tp=!0,Jp(rr,nr,pr),Ml=wr,Tp=Rr):(Xn&&(wr=pr.stateNode.containerInfo,Rr=Wr(wr),Jr(wr,Rr)),Jp(rr,nr,pr));break;case 0:case 11:case 14:case 15:if(!Gl&&(wr=pr.updateQueue,wr!==null&&(wr=wr.lastEffect,wr!==null))){Rr=wr=wr.next;do{var Gr=Rr,un=Gr.destroy;Gr=Gr.tag,un!==void 0&&(Gr&2||Gr&4)&&zT(pr,nr,un),Rr=Rr.next}while(Rr!==wr)}Jp(rr,nr,pr);break;case 1:if(!Gl&&(K1(pr,nr),wr=pr.stateNode,typeof wr.componentWillUnmount=="function"))try{wr.props=pr.memoizedProps,wr.state=pr.memoizedState,wr.componentWillUnmount()}catch(kn){bo(pr,nr,kn)}Jp(rr,nr,pr);break;case 21:Jp(rr,nr,pr);break;case 22:pr.mode&1?(Gl=(wr=Gl)||pr.memoizedState!==null,Jp(rr,nr,pr),Gl=wr):Jp(rr,nr,pr);break;default:Jp(rr,nr,pr)}}function g3(rr){var nr=rr.updateQueue;if(nr!==null){rr.updateQueue=null;var pr=rr.stateNode;pr===null&&(pr=rr.stateNode=new ON),nr.forEach(function(wr){var Rr=GN.bind(null,rr,wr);pr.has(wr)||(pr.add(wr),wr.then(Rr,Rr))})}}function Pp(rr,nr){var pr=nr.deletions;if(pr!==null)for(var wr=0;wr<pr.length;wr++){var Rr=pr[wr];try{var Gr=rr,un=nr;if(On){var kn=un;e:for(;kn!==null;){switch(kn.tag){case 5:Ml=kn.stateNode,Tp=!1;break e;case 3:Ml=kn.stateNode.containerInfo,Tp=!0;break e;case 4:Ml=kn.stateNode.containerInfo,Tp=!0;break e}kn=kn.return}if(Ml===null)throw Error(dt(160));WT(Gr,un,Rr),Ml=null,Tp=!1}else WT(Gr,un,Rr);var jn=Rr.alternate;jn!==null&&(jn.return=null),Rr.return=null}catch(_i){bo(Rr,nr,_i)}}if(nr.subtreeFlags&12854)for(nr=nr.child;nr!==null;)v3(nr,rr),nr=nr.sibling}function v3(rr,nr){var pr=rr.alternate,wr=rr.flags;switch(rr.tag){case 0:case 11:case 14:case 15:if(Pp(nr,rr),Qp(rr),wr&4){try{kS(3,rr,rr.return),z_(3,rr)}catch(us){bo(rr,rr.return,us)}try{kS(5,rr,rr.return)}catch(us){bo(rr,rr.return,us)}}break;case 1:Pp(nr,rr),Qp(rr),wr&512&&pr!==null&&K1(pr,pr.return);break;case 5:if(Pp(nr,rr),Qp(rr),wr&512&&pr!==null&&K1(pr,pr.return),On){if(rr.flags&32){var Rr=rr.stateNode;try{Hr(Rr)}catch(us){bo(rr,rr.return,us)}}if(wr&4&&(Rr=rr.stateNode,Rr!=null)){var Gr=rr.memoizedProps;if(pr=pr!==null?pr.memoizedProps:Gr,wr=rr.type,nr=rr.updateQueue,rr.updateQueue=null,nr!==null)try{Ar(Rr,nr,wr,pr,Gr,rr)}catch(us){bo(rr,rr.return,us)}}}break;case 6:if(Pp(nr,rr),Qp(rr),wr&4&&On){if(rr.stateNode===null)throw Error(dt(162));Rr=rr.stateNode,Gr=rr.memoizedProps,pr=pr!==null?pr.memoizedProps:Gr;try{dr(Rr,pr,Gr)}catch(us){bo(rr,rr.return,us)}}break;case 3:if(Pp(nr,rr),Qp(rr),wr&4){if(On&&Un&&pr!==null&&pr.memoizedState.isDehydrated)try{Gn(nr.containerInfo)}catch(us){bo(rr,rr.return,us)}if(Xn){Rr=nr.containerInfo,Gr=nr.pendingChildren;try{Jr(Rr,Gr)}catch(us){bo(rr,rr.return,us)}}}break;case 4:if(Pp(nr,rr),Qp(rr),wr&4&&Xn){Gr=rr.stateNode,Rr=Gr.containerInfo,Gr=Gr.pendingChildren;try{Jr(Rr,Gr)}catch(us){bo(rr,rr.return,us)}}break;case 13:Pp(nr,rr),Qp(rr),Rr=rr.child,Rr.flags&8192&&(Gr=Rr.memoizedState!==null,Rr.stateNode.isHidden=Gr,!Gr||Rr.alternate!==null&&Rr.alternate.memoizedState!==null||(QT=Nn())),wr&4&&g3(rr);break;case 22:var un=pr!==null&&pr.memoizedState!==null;if(rr.mode&1?(Gl=(pr=Gl)||un,Pp(nr,rr),Gl=pr):Pp(nr,rr),Qp(rr),wr&8192){if(pr=rr.memoizedState!==null,(rr.stateNode.isHidden=pr)&&!un&&rr.mode&1)for(ds=rr,wr=rr.child;wr!==null;){for(nr=ds=wr;ds!==null;){un=ds;var kn=un.child;switch(un.tag){case 0:case 11:case 14:case 15:kS(4,un,un.return);break;case 1:K1(un,un.return);var jn=un.stateNode;if(typeof jn.componentWillUnmount=="function"){var _i=un,ps=un.return;try{var Ns=_i;jn.props=Ns.memoizedProps,jn.state=Ns.memoizedState,jn.componentWillUnmount()}catch(us){bo(_i,ps,us)}}break;case 5:K1(un,un.return);break;case 22:if(un.memoizedState!==null){b3(nr);continue}}kn!==null?(kn.return=un,ds=kn):b3(nr)}wr=wr.sibling}if(On){e:if(wr=null,On)for(nr=rr;;){if(nr.tag===5){if(wr===null){wr=nr;try{Rr=nr.stateNode,pr?$r(Rr):en(nr.stateNode,nr.memoizedProps)}catch(us){bo(rr,rr.return,us)}}}else if(nr.tag===6){if(wr===null)try{Gr=nr.stateNode,pr?Br(Gr):Kr(Gr,nr.memoizedProps)}catch(us){bo(rr,rr.return,us)}}else if((nr.tag!==22&&nr.tag!==23||nr.memoizedState===null||nr===rr)&&nr.child!==null){nr.child.return=nr,nr=nr.child;continue}if(nr===rr)break e;for(;nr.sibling===null;){if(nr.return===null||nr.return===rr)break e;wr===nr&&(wr=null),nr=nr.return}wr===nr&&(wr=null),nr.sibling.return=nr.return,nr=nr.sibling}}}break;case 19:Pp(nr,rr),Qp(rr),wr&4&&g3(rr);break;case 21:break;default:Pp(nr,rr),Qp(rr)}}function Qp(rr){var nr=rr.flags;if(nr&2){try{if(On){e:{for(var pr=rr.return;pr!==null;){if(p3(pr)){var wr=pr;break e}pr=pr.return}throw Error(dt(160))}switch(wr.tag){case 5:var Rr=wr.stateNode;wr.flags&32&&(Hr(Rr),wr.flags&=-33);var Gr=m3(rr);GT(rr,Gr,Rr);break;case 3:case 4:var un=wr.stateNode.containerInfo,kn=m3(rr);HT(rr,kn,un);break;default:throw Error(dt(161))}}}catch(jn){bo(rr,rr.return,jn)}rr.flags&=-3}nr&4096&&(rr.flags&=-4097)}function LN(rr,nr,pr){ds=rr,y3(rr)}function y3(rr,nr,pr){for(var wr=(rr.mode&1)!==0;ds!==null;){var Rr=ds,Gr=Rr.child;if(Rr.tag===22&&wr){var un=Rr.memoizedState!==null||V_;if(!un){var kn=Rr.alternate,jn=kn!==null&&kn.memoizedState!==null||Gl;kn=V_;var _i=Gl;if(V_=un,(Gl=jn)&&!_i)for(ds=Rr;ds!==null;)un=ds,jn=un.child,un.tag===22&&un.memoizedState!==null?E3(Rr):jn!==null?(jn.return=un,ds=jn):E3(Rr);for(;Gr!==null;)ds=Gr,y3(Gr),Gr=Gr.sibling;ds=Rr,V_=kn,Gl=_i}x3(rr)}else Rr.subtreeFlags&8772&&Gr!==null?(Gr.return=Rr,ds=Gr):x3(rr)}}function x3(rr){for(;ds!==null;){var nr=ds;if(nr.flags&8772){var pr=nr.alternate;try{if(nr.flags&8772)switch(nr.tag){case 0:case 11:case 15:Gl||z_(5,nr);break;case 1:var wr=nr.stateNode;if(nr.flags&4&&!Gl)if(pr===null)wr.componentDidMount();else{var Rr=nr.elementType===nr.type?pr.memoizedProps:kp(nr.type,pr.memoizedProps);wr.componentDidUpdate(Rr,pr.memoizedState,wr.__reactInternalSnapshotBeforeUpdate)}var Gr=nr.updateQueue;Gr!==null&&Wo(nr,Gr,wr);break;case 3:var un=nr.updateQueue;if(un!==null){if(pr=null,nr.child!==null)switch(nr.child.tag){case 5:pr=hr(nr.child.stateNode);break;case 1:pr=nr.child.stateNode}Wo(nr,un,pr)}break;case 5:var kn=nr.stateNode;pr===null&&nr.flags&4&&gr(kn,nr.type,nr.memoizedProps,nr);break;case 6:break;case 4:break;case 12:break;case 13:if(Un&&nr.memoizedState===null){var jn=nr.alternate;if(jn!==null){var _i=jn.memoizedState;if(_i!==null){var ps=_i.dehydrated;ps!==null&&es(ps)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dt(163))}Gl||nr.flags&512&&UT(nr)}catch(Ns){bo(nr,nr.return,Ns)}}if(nr===rr){ds=null;break}if(pr=nr.sibling,pr!==null){pr.return=nr.return,ds=pr;break}ds=nr.return}}function b3(rr){for(;ds!==null;){var nr=ds;if(nr===rr){ds=null;break}var pr=nr.sibling;if(pr!==null){pr.return=nr.return,ds=pr;break}ds=nr.return}}function E3(rr){for(;ds!==null;){var nr=ds;try{switch(nr.tag){case 0:case 11:case 15:var pr=nr.return;try{z_(4,nr)}catch(jn){bo(nr,pr,jn)}break;case 1:var wr=nr.stateNode;if(typeof wr.componentDidMount=="function"){var Rr=nr.return;try{wr.componentDidMount()}catch(jn){bo(nr,Rr,jn)}}var Gr=nr.return;try{UT(nr)}catch(jn){bo(nr,Gr,jn)}break;case 5:var un=nr.return;try{UT(nr)}catch(jn){bo(nr,un,jn)}}}catch(jn){bo(nr,nr.return,jn)}if(nr===rr){ds=null;break}var kn=nr.sibling;if(kn!==null){kn.return=nr.return,ds=kn;break}ds=nr.return}}var U_=0,H_=1,G_=2,W_=3,q_=4;if(typeof Symbol=="function"&&Symbol.for){var TS=Symbol.for;U_=TS("selector.component"),H_=TS("selector.has_pseudo_class"),G_=TS("selector.role"),W_=TS("selector.test_id"),q_=TS("selector.text")}function qT(rr){var nr=Ln(rr);if(nr!=null){if(typeof nr.memoizedProps["data-testname"]!="string")throw Error(dt(364));return nr}if(rr=Tn(rr),rr===null)throw Error(dt(362));return rr.stateNode.current}function KT(rr,nr){switch(nr.$$typeof){case U_:if(rr.type===nr.value)return!0;break;case H_:e:{nr=nr.value,rr=[rr,0];for(var pr=0;pr<rr.length;){var wr=rr[pr++],Rr=rr[pr++],Gr=nr[Rr];if(wr.tag!==5||!qn(wr)){for(;Gr!=null&&KT(wr,Gr);)Rr++,Gr=nr[Rr];if(Rr===nr.length){nr=!0;break e}else for(wr=wr.child;wr!==null;)rr.push(wr,Rr),wr=wr.sibling}}nr=!1}return nr;case G_:if(rr.tag===5&&Bn(rr.stateNode,nr.value))return!0;break;case q_:if((rr.tag===5||rr.tag===6)&&(rr=$n(rr),rr!==null&&0<=rr.indexOf(nr.value)))return!0;break;case W_:if(rr.tag===5&&(rr=rr.memoizedProps["data-testname"],typeof rr=="string"&&rr.toLowerCase()===nr.value.toLowerCase()))return!0;break;default:throw Error(dt(365))}return!1}function XT(rr){switch(rr.$$typeof){case U_:return"<"+(lr(rr.value)||"Unknown")+">";case H_:return":has("+(XT(rr)||"")+")";case G_:return'[role="'+rr.value+'"]';case q_:return'"'+rr.value+'"';case W_:return'[data-testname="'+rr.value+'"]';default:throw Error(dt(365))}}function S3(rr,nr){var pr=[];rr=[rr,0];for(var wr=0;wr<rr.length;){var Rr=rr[wr++],Gr=rr[wr++],un=nr[Gr];if(Rr.tag!==5||!qn(Rr)){for(;un!=null&&KT(Rr,un);)Gr++,un=nr[Gr];if(Gr===nr.length)pr.push(Rr);else for(Rr=Rr.child;Rr!==null;)rr.push(Rr,Gr),Rr=Rr.sibling}}return pr}function YT(rr,nr){if(!Dn)throw Error(dt(363));rr=qT(rr),rr=S3(rr,nr),nr=[],rr=Array.from(rr);for(var pr=0;pr<rr.length;){var wr=rr[pr++];if(wr.tag===5)qn(wr)||nr.push(wr.stateNode);else for(wr=wr.child;wr!==null;)rr.push(wr),wr=wr.sibling}return nr}var jN=Math.ceil,K_=ft.ReactCurrentDispatcher,ZT=ft.ReactCurrentOwner,Lo=ft.ReactCurrentBatchConfig,Bs=0,Qo=null,zo=null,Fl=0,ju=0,X1=Ls(0),qo=0,PS=null,Zv=0,X_=0,JT=0,RS=null,bu=null,QT=0,eP=1/0,Lm=null;function Y1(){eP=Nn()+500}var Y_=!1,tP=null,P0=null,Z_=!1,R0=null,J_=0,NS=0,rP=null,Q_=-1,eC=0;function Wl(){return Bs&6?Nn():Q_!==-1?Q_:Q_=Nn()}function N0(rr){return rr.mode&1?Bs&2&&Fl!==0?Fl&-Fl:$v.transition!==null?(eC===0&&(eC=tu()),eC):(rr=sr,rr!==0?rr:gs()):1}function cp(rr,nr,pr,wr){if(50<NS)throw NS=0,rP=null,Error(dt(185));hu(rr,pr,wr),(!(Bs&2)||rr!==Qo)&&(rr===Qo&&(!(Bs&2)&&(X_|=pr),qo===4&&D0(rr,Fl)),Eu(rr,wr),pr===1&&Bs===0&&!(nr.mode&1)&&(Y1(),Mu&&tp()))}function Eu(rr,nr){var pr=rr.callbackNode;cu(rr,nr);var wr=Ul(rr,rr===Qo?Fl:0);if(wr===0)pr!==null&&rn(pr),rr.callbackNode=null,rr.callbackPriority=0;else if(nr=wr&-wr,rr.callbackPriority!==nr){if(pr!=null&&rn(pr),nr===1)rr.tag===0?V1(_3.bind(null,rr)):hS(_3.bind(null,rr)),wn?mn(function(){!(Bs&6)&&tp()}):Ur(Zn,tp),pr=null;else{switch(br(wr)){case 1:pr=Zn;break;case 4:pr=rs;break;case 16:pr=Ts;break;case 536870912:pr=As;break;default:pr=Ts}pr=M3(pr,w3.bind(null,rr))}rr.callbackPriority=nr,rr.callbackNode=pr}}function w3(rr,nr){if(Q_=-1,eC=0,Bs&6)throw Error(dt(327));var pr=rr.callbackNode;if(ey()&&rr.callbackNode!==pr)return null;var wr=Ul(rr,rr===Qo?Fl:0);if(wr===0)return null;if(wr&30||wr&rr.expiredLanes||nr)nr=tC(rr,wr);else{nr=wr;var Rr=Bs;Bs|=2;var Gr=k3();(Qo!==rr||Fl!==nr)&&(Lm=null,Y1(),Jv(rr,nr));do try{VN();break}catch(kn){A3(rr,kn)}while(1);np(),K_.current=Gr,Bs=Rr,zo!==null?nr=0:(Qo=null,Fl=0,nr=qo)}if(nr!==0){if(nr===2&&(Rr=Jo(rr),Rr!==0&&(wr=Rr,nr=nP(rr,Rr))),nr===1)throw pr=PS,Jv(rr,0),D0(rr,wr),Eu(rr,Nn()),pr;if(nr===6)D0(rr,wr);else{if(Rr=rr.current.alternate,!(wr&30)&&!BN(Rr)&&(nr=tC(rr,wr),nr===2&&(Gr=Jo(rr),Gr!==0&&(wr=Gr,nr=nP(rr,Gr))),nr===1))throw pr=PS,Jv(rr,0),D0(rr,wr),Eu(rr,Nn()),pr;switch(rr.finishedWork=Rr,rr.finishedLanes=wr,nr){case 0:case 1:throw Error(dt(345));case 2:Qv(rr,bu,Lm);break;case 3:if(D0(rr,wr),(wr&130023424)===wr&&(nr=QT+500-Nn(),10<nr)){if(Ul(rr,0)!==0)break;if(Rr=rr.suspendedLanes,(Rr&wr)!==wr){Wl(),rr.pingedLanes|=rr.suspendedLanes&Rr;break}rr.timeoutHandle=ln(Qv.bind(null,rr,bu,Lm),nr);break}Qv(rr,bu,Lm);break;case 4:if(D0(rr,wr),(wr&4194240)===wr)break;for(nr=rr.eventTimes,Rr=-1;0<wr;){var un=31-zl(wr);Gr=1<<un,un=nr[un],un>Rr&&(Rr=un),wr&=~Gr}if(wr=Rr,wr=Nn()-wr,wr=(120>wr?120:480>wr?480:1080>wr?1080:1920>wr?1920:3e3>wr?3e3:4320>wr?4320:1960*jN(wr/1960))-wr,10<wr){rr.timeoutHandle=ln(Qv.bind(null,rr,bu,Lm),wr);break}Qv(rr,bu,Lm);break;case 5:Qv(rr,bu,Lm);break;default:throw Error(dt(329))}}}return Eu(rr,Nn()),rr.callbackNode===pr?w3.bind(null,rr):null}function nP(rr,nr){var pr=RS;return rr.current.memoizedState.isDehydrated&&(Jv(rr,nr).flags|=256),rr=tC(rr,nr),rr!==2&&(nr=bu,bu=pr,nr!==null&&iP(nr)),rr}function iP(rr){bu===null?bu=rr:bu.push.apply(bu,rr)}function BN(rr){for(var nr=rr;;){if(nr.flags&16384){var pr=nr.updateQueue;if(pr!==null&&(pr=pr.stores,pr!==null))for(var wr=0;wr<pr.length;wr++){var Rr=pr[wr],Gr=Rr.getSnapshot;Rr=Rr.value;try{if(!Ho(Gr(),Rr))return!1}catch{return!1}}}if(pr=nr.child,nr.subtreeFlags&16384&&pr!==null)pr.return=nr,nr=pr;else{if(nr===rr)break;for(;nr.sibling===null;){if(nr.return===null||nr.return===rr)return!0;nr=nr.return}nr.sibling.return=nr.return,nr=nr.sibling}}return!0}function D0(rr,nr){for(nr&=~JT,nr&=~X_,rr.suspendedLanes|=nr,rr.pingedLanes&=~nr,rr=rr.expirationTimes;0<nr;){var pr=31-zl(nr),wr=1<<pr;rr[pr]=-1,nr&=~wr}}function _3(rr){if(Bs&6)throw Error(dt(327));ey();var nr=Ul(rr,0);if(!(nr&1))return Eu(rr,Nn()),null;var pr=tC(rr,nr);if(rr.tag!==0&&pr===2){var wr=Jo(rr);wr!==0&&(nr=wr,pr=nP(rr,wr))}if(pr===1)throw pr=PS,Jv(rr,0),D0(rr,nr),Eu(rr,Nn()),pr;if(pr===6)throw Error(dt(345));return rr.finishedWork=rr.current.alternate,rr.finishedLanes=nr,Qv(rr,bu,Lm),Eu(rr,Nn()),null}function C3(rr){R0!==null&&R0.tag===0&&!(Bs&6)&&ey();var nr=Bs;Bs|=1;var pr=Lo.transition,wr=sr;try{if(Lo.transition=null,sr=1,rr)return rr()}finally{sr=wr,Lo.transition=pr,Bs=nr,!(Bs&6)&&tp()}}function sP(){ju=X1.current,Fs(X1)}function Jv(rr,nr){rr.finishedWork=null,rr.finishedLanes=0;var pr=rr.timeoutHandle;if(pr!==pn&&(rr.timeoutHandle=pn,yn(pr)),zo!==null)for(pr=zo.return;pr!==null;){var wr=pr;switch(fS(wr),wr.tag){case 1:wr=wr.type.childContextTypes,wr!=null&&ko();break;case 3:lp(),Fs(Xs),Fs(xa),Xv();break;case 5:bS(wr);break;case 4:lp();break;case 13:Fs(go);break;case 19:Fs(go);break;case 10:Uv(wr.type._context);break;case 22:case 23:sP()}pr=pr.return}if(Qo=rr,zo=rr=M0(rr.current,null),Fl=ju=nr,qo=0,PS=null,JT=X_=Zv=0,bu=RS=null,Ys!==null){for(nr=0;nr<Ys.length;nr++)if(pr=Ys[nr],wr=pr.interleaved,wr!==null){pr.interleaved=null;var Rr=wr.next,Gr=pr.pending;if(Gr!==null){var un=Gr.next;Gr.next=Rr,wr.next=un}pr.pending=wr}Ys=null}return rr}function A3(rr,nr){do{var pr=zo;try{if(np(),Iu.current=O_,bs){for(var wr=Mn.memoizedState;wr!==null;){var Rr=wr.queue;Rr!==null&&(Rr.pending=null),wr=wr.next}bs=!1}if(Sn=0,hs=Vn=Mn=null,Ss=!1,Vs=0,ZT.current=null,pr===null||pr.return===null){qo=1,PS=nr,zo=null;break}e:{var Gr=rr,un=pr.return,kn=pr,jn=nr;if(nr=Fl,kn.flags|=32768,jn!==null&&typeof jn=="object"&&typeof jn.then=="function"){var _i=jn,ps=kn,Ns=ps.tag;if(!(ps.mode&1)&&(Ns===0||Ns===11||Ns===15)){var us=ps.alternate;us?(ps.updateQueue=us.updateQueue,ps.memoizedState=us.memoizedState,ps.lanes=us.lanes):(ps.updateQueue=null,ps.memoizedState=null)}var vo=ZR(un);if(vo!==null){vo.flags&=-257,JR(vo,un,kn,Gr,nr),vo.mode&1&&YR(Gr,_i,nr),nr=vo,jn=_i;var eo=nr.updateQueue;if(eo===null){var Su=new Set;Su.add(jn),nr.updateQueue=Su}else eo.add(jn);break e}else{if(!(nr&1)){YR(Gr,_i,nr),aP();break e}jn=Error(dt(426))}}else if(ho&&kn.mode&1){var jm=ZR(un);if(jm!==null){!(jm.flags&65536)&&(jm.flags|=256),JR(jm,un,kn,Gr,nr),H1(q1(jn,kn));break e}}Gr=jn=q1(jn,kn),qo!==4&&(qo=2),RS===null?RS=[Gr]:RS.push(Gr),Gr=un;do{switch(Gr.tag){case 3:Gr.flags|=65536,nr&=-nr,Gr.lanes|=nr;var In=KR(Gr,jn,nr);yS(Gr,In);break e;case 1:kn=jn;var Pn=Gr.type,Hn=Gr.stateNode;if(!(Gr.flags&128)&&(typeof Pn.getDerivedStateFromError=="function"||Hn!==null&&typeof Hn.componentDidCatch=="function"&&(P0===null||!P0.has(Hn)))){Gr.flags|=65536,nr&=-nr,Gr.lanes|=nr;var cs=XR(Gr,kn,nr);yS(Gr,cs);break e}}Gr=Gr.return}while(Gr!==null)}P3(pr)}catch(ws){nr=ws,zo===pr&&pr!==null&&(zo=pr=pr.return);continue}break}while(1)}function k3(){var rr=K_.current;return K_.current=O_,rr===null?O_:rr}function aP(){(qo===0||qo===3||qo===2)&&(qo=4),Qo===null||!(Zv&268435455)&&!(X_&268435455)||D0(Qo,Fl)}function tC(rr,nr){var pr=Bs;Bs|=2;var wr=k3();(Qo!==rr||Fl!==nr)&&(Lm=null,Jv(rr,nr));do try{$N();break}catch(Rr){A3(rr,Rr)}while(1);if(np(),Bs=pr,K_.current=wr,zo!==null)throw Error(dt(261));return Qo=null,Fl=0,qo}function $N(){for(;zo!==null;)T3(zo)}function VN(){for(;zo!==null&&!dn();)T3(zo)}function T3(rr){var nr=D3(rr.alternate,rr,ju);rr.memoizedProps=rr.pendingProps,nr===null?P3(rr):zo=nr,ZT.current=null}function P3(rr){var nr=rr;do{var pr=nr.alternate;if(rr=nr.return,nr.flags&32768){if(pr=FN(pr,nr),pr!==null){pr.flags&=32767,zo=pr;return}if(rr!==null)rr.flags|=32768,rr.subtreeFlags=0,rr.deletions=null;else{qo=6,zo=null;return}}else if(pr=MN(pr,nr,ju),pr!==null){zo=pr;return}if(nr=nr.sibling,nr!==null){zo=nr;return}zo=nr=rr}while(nr!==null);qo===0&&(qo=5)}function Qv(rr,nr,pr){var wr=sr,Rr=Lo.transition;try{Lo.transition=null,sr=1,zN(rr,nr,pr,wr)}finally{Lo.transition=Rr,sr=wr}return null}function zN(rr,nr,pr,wr){do ey();while(R0!==null);if(Bs&6)throw Error(dt(327));pr=rr.finishedWork;var Rr=rr.finishedLanes;if(pr===null)return null;if(rr.finishedWork=null,rr.finishedLanes=0,pr===rr.current)throw Error(dt(177));rr.callbackNode=null,rr.callbackPriority=0;var Gr=pr.lanes|pr.childLanes;if(Lv(rr,Gr),rr===Qo&&(zo=Qo=null,Fl=0),!(pr.subtreeFlags&2064)&&!(pr.flags&2064)||Z_||(Z_=!0,M3(Ts,function(){return ey(),null})),Gr=(pr.flags&15990)!==0,pr.subtreeFlags&15990||Gr){Gr=Lo.transition,Lo.transition=null;var un=sr;sr=1;var kn=Bs;Bs|=4,ZT.current=null,IN(rr,pr),v3(pr,rr),Dr(rr.containerInfo),rr.current=pr,LN(pr),Rn(),Bs=kn,sr=un,Lo.transition=Gr}else rr.current=pr;if(Z_&&(Z_=!1,R0=rr,J_=Rr),Gr=rr.pendingLanes,Gr===0&&(P0=null),Pm(pr.stateNode),Eu(rr,Nn()),nr!==null)for(wr=rr.onRecoverableError,pr=0;pr<nr.length;pr++)Rr=nr[pr],wr(Rr.value,{componentStack:Rr.stack,digest:Rr.digest});if(Y_)throw Y_=!1,rr=tP,tP=null,rr;return J_&1&&rr.tag!==0&&ey(),Gr=rr.pendingLanes,Gr&1?rr===rP?NS++:(NS=0,rP=rr):NS=0,tp(),null}function ey(){if(R0!==null){var rr=br(J_),nr=Lo.transition,pr=sr;try{if(Lo.transition=null,sr=16>rr?16:rr,R0===null)var wr=!1;else{if(rr=R0,R0=null,J_=0,Bs&6)throw Error(dt(331));var Rr=Bs;for(Bs|=4,ds=rr.current;ds!==null;){var Gr=ds,un=Gr.child;if(ds.flags&16){var kn=Gr.deletions;if(kn!==null){for(var jn=0;jn<kn.length;jn++){var _i=kn[jn];for(ds=_i;ds!==null;){var ps=ds;switch(ps.tag){case 0:case 11:case 15:kS(8,ps,Gr)}var Ns=ps.child;if(Ns!==null)Ns.return=ps,ds=Ns;else for(;ds!==null;){ps=ds;var us=ps.sibling,vo=ps.return;if(f3(ps),ps===_i){ds=null;break}if(us!==null){us.return=vo,ds=us;break}ds=vo}}}var eo=Gr.alternate;if(eo!==null){var Su=eo.child;if(Su!==null){eo.child=null;do{var jm=Su.sibling;Su.sibling=null,Su=jm}while(Su!==null)}}ds=Gr}}if(Gr.subtreeFlags&2064&&un!==null)un.return=Gr,ds=un;else e:for(;ds!==null;){if(Gr=ds,Gr.flags&2048)switch(Gr.tag){case 0:case 11:case 15:kS(9,Gr,Gr.return)}var In=Gr.sibling;if(In!==null){In.return=Gr.return,ds=In;break e}ds=Gr.return}}var Pn=rr.current;for(ds=Pn;ds!==null;){un=ds;var Hn=un.child;if(un.subtreeFlags&2064&&Hn!==null)Hn.return=un,ds=Hn;else e:for(un=Pn;ds!==null;){if(kn=ds,kn.flags&2048)try{switch(kn.tag){case 0:case 11:case 15:z_(9,kn)}}catch(ws){bo(kn,kn.return,ws)}if(kn===un){ds=null;break e}var cs=kn.sibling;if(cs!==null){cs.return=kn.return,ds=cs;break e}ds=kn.return}}if(Bs=Rr,tp(),$o&&typeof $o.onPostCommitFiberRoot=="function")try{$o.onPostCommitFiberRoot(co,rr)}catch{}wr=!0}return wr}finally{sr=pr,Lo.transition=nr}}return!1}function R3(rr,nr,pr){nr=q1(pr,nr),nr=KR(rr,nr,1),rr=gu(rr,nr,1),nr=Wl(),rr!==null&&(hu(rr,1,nr),Eu(rr,nr))}function bo(rr,nr,pr){if(rr.tag===3)R3(rr,rr,pr);else for(;nr!==null;){if(nr.tag===3){R3(nr,rr,pr);break}else if(nr.tag===1){var wr=nr.stateNode;if(typeof nr.type.getDerivedStateFromError=="function"||typeof wr.componentDidCatch=="function"&&(P0===null||!P0.has(wr))){rr=q1(pr,rr),rr=XR(nr,rr,1),nr=gu(nr,rr,1),rr=Wl(),nr!==null&&(hu(nr,1,rr),Eu(nr,rr));break}}nr=nr.return}}function UN(rr,nr,pr){var wr=rr.pingCache;wr!==null&&wr.delete(nr),nr=Wl(),rr.pingedLanes|=rr.suspendedLanes&pr,Qo===rr&&(Fl&pr)===pr&&(qo===4||qo===3&&(Fl&130023424)===Fl&&500>Nn()-QT?Jv(rr,0):JT|=pr),Eu(rr,nr)}function N3(rr,nr){nr===0&&(rr.mode&1?(nr=ep,ep<<=1,!(ep&130023424)&&(ep=4194304)):nr=1);var pr=Wl();rr=sp(rr,nr),rr!==null&&(hu(rr,nr,pr),Eu(rr,pr))}function HN(rr){var nr=rr.memoizedState,pr=0;nr!==null&&(pr=nr.retryLane),N3(rr,pr)}function GN(rr,nr){var pr=0;switch(rr.tag){case 13:var wr=rr.stateNode,Rr=rr.memoizedState;Rr!==null&&(pr=Rr.retryLane);break;case 19:wr=rr.stateNode;break;default:throw Error(dt(314))}wr!==null&&wr.delete(nr),N3(rr,pr)}var D3;D3=function(rr,nr,pr){if(rr!==null)if(rr.memoizedProps!==nr.pendingProps||Xs.current)xu=!0;else{if(!(rr.lanes&pr)&&!(nr.flags&128))return xu=!1,DN(rr,nr,pr);xu=!!(rr.flags&131072)}else xu=!1,ho&&nr.flags&1048576&&dS(nr,jv,nr.index);switch(nr.lanes=0,nr.tag){case 2:var wr=nr.type;j_(rr,nr),rr=nr.pendingProps;var Rr=Ao(nr,xa.current);Ap(nr,pr),Rr=T0(null,nr,wr,rr,Rr,pr);var Gr=ES();return nr.flags|=1,typeof Rr=="object"&&Rr!==null&&typeof Rr.render=="function"&&Rr.$$typeof===void 0?(nr.tag=1,nr.memoizedState=null,nr.updateQueue=null,Ws(wr)?(Gr=!0,Wp(nr)):Gr=!1,nr.memoizedState=Rr.state!==null&&Rr.state!==void 0?Rr.state:null,vS(nr),Rr.updater=I_,nr.stateNode=Rr,Rr._reactInternals=nr,MT(nr,wr,rr,pr),nr=LT(null,nr,wr,!0,Gr,pr)):(nr.tag=0,ho&&Gr&&No(nr),iu(null,nr,Rr,pr),nr=nr.child),nr;case 16:wr=nr.elementType;e:{switch(j_(rr,nr),rr=nr.pendingProps,Rr=wr._init,wr=Rr(wr._payload),nr.type=wr,Rr=nr.tag=qN(wr),rr=kp(wr,rr),Rr){case 0:nr=IT(null,nr,wr,rr,pr);break e;case 1:nr=i3(null,nr,wr,rr,pr);break e;case 11:nr=QR(null,nr,wr,rr,pr);break e;case 14:nr=e3(null,nr,wr,kp(wr.type,rr),pr);break e}throw Error(dt(306,wr,""))}return nr;case 0:return wr=nr.type,Rr=nr.pendingProps,Rr=nr.elementType===wr?Rr:kp(wr,Rr),IT(rr,nr,wr,Rr,pr);case 1:return wr=nr.type,Rr=nr.pendingProps,Rr=nr.elementType===wr?Rr:kp(wr,Rr),i3(rr,nr,wr,Rr,pr);case 3:e:{if(s3(nr),rr===null)throw Error(dt(387));wr=nr.pendingProps,Gr=nr.memoizedState,Rr=Gr.element,mu(rr,nr),Gv(nr,wr,null,pr);var un=nr.memoizedState;if(wr=un.element,Un&&Gr.isDehydrated)if(Gr={element:wr,isDehydrated:!1,cache:un.cache,pendingSuspenseBoundaries:un.pendingSuspenseBoundaries,transitions:un.transitions},nr.updateQueue.baseState=Gr,nr.memoizedState=Gr,nr.flags&256){Rr=q1(Error(dt(423)),nr),nr=a3(rr,nr,wr,pr,Rr);break e}else if(wr!==Rr){Rr=q1(Error(dt(424)),nr),nr=a3(rr,nr,wr,pr,Rr);break e}else for(Un&&(Go=Fn(nr.stateNode.containerInfo),Dl=nr,ho=!0,Fu=null,Bv=!1),pr=zs(nr,null,wr,pr),nr.child=pr;pr;)pr.flags=pr.flags&-3|4096,pr=pr.sibling;else{if(mo(),wr===Rr){nr=Im(rr,nr,pr);break e}iu(rr,nr,wr,pr)}nr=nr.child}return nr;case 5:return W1(nr),rr===null&&mS(nr),wr=nr.type,Rr=nr.pendingProps,Gr=rr!==null?rr.memoizedProps:null,un=Rr.children,an(wr,Rr)?un=null:Gr!==null&&an(wr,Gr)&&(nr.flags|=32),n3(rr,nr),iu(rr,nr,un,pr),nr.child;case 6:return rr===null&&mS(nr),null;case 13:return o3(rr,nr,pr);case 4:return xS(nr,nr.stateNode.containerInfo),wr=nr.pendingProps,rr===null?nr.child=Mm(nr,null,wr,pr):iu(rr,nr,wr,pr),nr.child;case 11:return wr=nr.type,Rr=nr.pendingProps,Rr=nr.elementType===wr?Rr:kp(wr,Rr),QR(rr,nr,wr,Rr,pr);case 7:return iu(rr,nr,nr.pendingProps,pr),nr.child;case 8:return iu(rr,nr,nr.pendingProps.children,pr),nr.child;case 12:return iu(rr,nr,nr.pendingProps.children,pr),nr.child;case 10:e:{if(wr=nr.type._context,Rr=nr.pendingProps,Gr=nr.memoizedProps,un=Rr.value,Rs(nr,wr,un),Gr!==null)if(Ho(Gr.value,un)){if(Gr.children===Rr.children&&!Xs.current){nr=Im(rr,nr,pr);break e}}else for(Gr=nr.child,Gr!==null&&(Gr.return=nr);Gr!==null;){var kn=Gr.dependencies;if(kn!==null){un=Gr.child;for(var jn=kn.firstContext;jn!==null;){if(jn.context===wr){if(Gr.tag===1){jn=nu(-1,pr&-pr),jn.tag=2;var _i=Gr.updateQueue;if(_i!==null){_i=_i.shared;var ps=_i.pending;ps===null?jn.next=jn:(jn.next=ps.next,ps.next=jn),_i.pending=jn}}Gr.lanes|=pr,jn=Gr.alternate,jn!==null&&(jn.lanes|=pr),$a(Gr.return,pr,nr),kn.lanes|=pr;break}jn=jn.next}}else if(Gr.tag===10)un=Gr.type===nr.type?null:Gr.child;else if(Gr.tag===18){if(un=Gr.return,un===null)throw Error(dt(341));un.lanes|=pr,kn=un.alternate,kn!==null&&(kn.lanes|=pr),$a(un,pr,nr),un=Gr.sibling}else un=Gr.child;if(un!==null)un.return=Gr;else for(un=Gr;un!==null;){if(un===nr){un=null;break}if(Gr=un.sibling,Gr!==null){Gr.return=un.return,un=Gr;break}un=un.return}Gr=un}iu(rr,nr,Rr.children,pr),nr=nr.child}return nr;case 9:return Rr=nr.type,wr=nr.pendingProps.children,Ap(nr,pr),Rr=Vo(Rr),wr=wr(Rr),nr.flags|=1,iu(rr,nr,wr,pr),nr.child;case 14:return wr=nr.type,Rr=kp(wr,nr.pendingProps),Rr=kp(wr.type,Rr),e3(rr,nr,wr,Rr,pr);case 15:return t3(rr,nr,nr.type,nr.pendingProps,pr);case 17:return wr=nr.type,Rr=nr.pendingProps,Rr=nr.elementType===wr?Rr:kp(wr,Rr),j_(rr,nr),nr.tag=1,Ws(wr)?(rr=!0,Wp(nr)):rr=!1,Ap(nr,pr),WR(nr,wr,Rr),MT(nr,wr,Rr,pr),LT(null,nr,wr,!0,rr,pr);case 19:return u3(rr,nr,pr);case 22:return r3(rr,nr,pr)}throw Error(dt(156,nr.tag))};function M3(rr,nr){return Ur(rr,nr)}function WN(rr,nr,pr,wr){this.tag=rr,this.key=pr,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=nr,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=wr,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hp(rr,nr,pr,wr){return new WN(rr,nr,pr,wr)}function oP(rr){return rr=rr.prototype,!(!rr||!rr.isReactComponent)}function qN(rr){if(typeof rr=="function")return oP(rr)?1:0;if(rr!=null){if(rr=rr.$$typeof,rr===zt)return 11;if(rr===Kt)return 14}return 2}function M0(rr,nr){var pr=rr.alternate;return pr===null?(pr=hp(rr.tag,nr,rr.key,rr.mode),pr.elementType=rr.elementType,pr.type=rr.type,pr.stateNode=rr.stateNode,pr.alternate=rr,rr.alternate=pr):(pr.pendingProps=nr,pr.type=rr.type,pr.flags=0,pr.subtreeFlags=0,pr.deletions=null),pr.flags=rr.flags&14680064,pr.childLanes=rr.childLanes,pr.lanes=rr.lanes,pr.child=rr.child,pr.memoizedProps=rr.memoizedProps,pr.memoizedState=rr.memoizedState,pr.updateQueue=rr.updateQueue,nr=rr.dependencies,pr.dependencies=nr===null?null:{lanes:nr.lanes,firstContext:nr.firstContext},pr.sibling=rr.sibling,pr.index=rr.index,pr.ref=rr.ref,pr}function rC(rr,nr,pr,wr,Rr,Gr){var un=2;if(wr=rr,typeof rr=="function")oP(rr)&&(un=1);else if(typeof rr=="string")un=5;else e:switch(rr){case Tt:return ty(pr.children,Rr,Gr,nr);case Rt:un=8,Rr|=8;break;case Ft:return rr=hp(12,pr,nr,Rr|2),rr.elementType=Ft,rr.lanes=Gr,rr;case Ht:return rr=hp(13,pr,nr,Rr),rr.elementType=Ht,rr.lanes=Gr,rr;case Ut:return rr=hp(19,pr,nr,Rr),rr.elementType=Ut,rr.lanes=Gr,rr;case er:return nC(pr,Rr,Gr,nr);default:if(typeof rr=="object"&&rr!==null)switch(rr.$$typeof){case jt:un=10;break e;case Bt:un=9;break e;case zt:un=11;break e;case Kt:un=14;break e;case Yt:un=16,wr=null;break e}throw Error(dt(130,rr==null?rr:typeof rr,""))}return nr=hp(un,pr,nr,Rr),nr.elementType=rr,nr.type=wr,nr.lanes=Gr,nr}function ty(rr,nr,pr,wr){return rr=hp(7,rr,wr,nr),rr.lanes=pr,rr}function nC(rr,nr,pr,wr){return rr=hp(22,rr,wr,nr),rr.elementType=er,rr.lanes=pr,rr.stateNode={isHidden:!1},rr}function lP(rr,nr,pr){return rr=hp(6,rr,null,nr),rr.lanes=pr,rr}function uP(rr,nr,pr){return nr=hp(4,rr.children!==null?rr.children:[],rr.key,nr),nr.lanes=pr,nr.stateNode={containerInfo:rr.containerInfo,pendingChildren:null,implementation:rr.implementation},nr}function KN(rr,nr,pr,wr,Rr){this.tag=nr,this.containerInfo=rr,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=pn,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pl(0),this.expirationTimes=Pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.identifierPrefix=wr,this.onRecoverableError=Rr,Un&&(this.mutableSourceEagerHydrationData=null)}function F3(rr,nr,pr,wr,Rr,Gr,un,kn,jn){return rr=new KN(rr,nr,pr,kn,jn),nr===1?(nr=1,Gr===!0&&(nr|=8)):nr=0,Gr=hp(3,null,null,nr),rr.current=Gr,Gr.stateNode=rr,Gr.memoizedState={element:wr,isDehydrated:pr,cache:null,transitions:null,pendingSuspenseBoundaries:null},vS(Gr),rr}function O3(rr){if(!rr)return yo;rr=rr._reactInternals;e:{if(vr(rr)!==rr||rr.tag!==1)throw Error(dt(170));var nr=rr;do{switch(nr.tag){case 3:nr=nr.stateNode.context;break e;case 1:if(Ws(nr.type)){nr=nr.stateNode.__reactInternalMemoizedMergedChildContext;break e}}nr=nr.return}while(nr!==null);throw Error(dt(171))}if(rr.tag===1){var pr=rr.type;if(Ws(pr))return km(rr,pr,nr)}return nr}function I3(rr){var nr=rr._reactInternals;if(nr===void 0)throw typeof rr.render=="function"?Error(dt(188)):(rr=Object.keys(rr).join(","),Error(dt(268,rr)));return rr=Sr(nr),rr===null?null:rr.stateNode}function L3(rr,nr){if(rr=rr.memoizedState,rr!==null&&rr.dehydrated!==null){var pr=rr.retryLane;rr.retryLane=pr!==0&&pr<nr?pr:nr}}function iC(rr,nr){L3(rr,nr),(rr=rr.alternate)&&L3(rr,nr)}function XN(rr){return rr=Sr(rr),rr===null?null:rr.stateNode}function YN(){return null}return et.attemptContinuousHydration=function(rr){if(rr.tag===13){var nr=sp(rr,134217728);if(nr!==null){var pr=Wl();cp(nr,rr,134217728,pr)}iC(rr,134217728)}},et.attemptDiscreteHydration=function(rr){if(rr.tag===13){var nr=sp(rr,1);if(nr!==null){var pr=Wl();cp(nr,rr,1,pr)}iC(rr,1)}},et.attemptHydrationAtCurrentPriority=function(rr){if(rr.tag===13){var nr=N0(rr),pr=sp(rr,nr);if(pr!==null){var wr=Wl();cp(pr,rr,nr,wr)}iC(rr,nr)}},et.attemptSynchronousHydration=function(rr){switch(rr.tag){case 3:var nr=rr.stateNode;if(nr.current.memoizedState.isDehydrated){var pr=Du(nr.pendingLanes);pr!==0&&(Tm(nr,pr|1),Eu(nr,Nn()),!(Bs&6)&&(Y1(),tp()))}break;case 13:C3(function(){var wr=sp(rr,1);if(wr!==null){var Rr=Wl();cp(wr,rr,1,Rr)}}),iC(rr,1)}},et.batchedUpdates=function(rr,nr){var pr=Bs;Bs|=1;try{return rr(nr)}finally{Bs=pr,Bs===0&&(Y1(),Mu&&tp())}},et.createComponentSelector=function(rr){return{$$typeof:U_,value:rr}},et.createContainer=function(rr,nr,pr,wr,Rr,Gr,un){return F3(rr,nr,!1,null,pr,wr,Rr,Gr,un)},et.createHasPseudoClassSelector=function(rr){return{$$typeof:H_,value:rr}},et.createHydrationContainer=function(rr,nr,pr,wr,Rr,Gr,un,kn,jn){return rr=F3(pr,wr,!0,rr,Rr,Gr,un,kn,jn),rr.context=O3(null),pr=rr.current,wr=Wl(),Rr=N0(pr),Gr=nu(wr,Rr),Gr.callback=nr??null,gu(pr,Gr,Rr),rr.current.lanes=Rr,hu(rr,Rr,wr),Eu(rr,wr),rr},et.createPortal=function(rr,nr,pr){var wr=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kt,key:wr==null?null:""+wr,children:rr,containerInfo:nr,implementation:pr}},et.createRoleSelector=function(rr){return{$$typeof:G_,value:rr}},et.createTestNameSelector=function(rr){return{$$typeof:W_,value:rr}},et.createTextSelector=function(rr){return{$$typeof:q_,value:rr}},et.deferredUpdates=function(rr){var nr=sr,pr=Lo.transition;try{return Lo.transition=null,sr=16,rr()}finally{sr=nr,Lo.transition=pr}},et.discreteUpdates=function(rr,nr,pr,wr,Rr){var Gr=sr,un=Lo.transition;try{return Lo.transition=null,sr=1,rr(nr,pr,wr,Rr)}finally{sr=Gr,Lo.transition=un,Bs===0&&Y1()}},et.findAllNodes=YT,et.findBoundingRects=function(rr,nr){if(!Dn)throw Error(dt(363));nr=YT(rr,nr),rr=[];for(var pr=0;pr<nr.length;pr++)rr.push(An(nr[pr]));for(nr=rr.length-1;0<nr;nr--){pr=rr[nr];for(var wr=pr.x,Rr=wr+pr.width,Gr=pr.y,un=Gr+pr.height,kn=nr-1;0<=kn;kn--)if(nr!==kn){var jn=rr[kn],_i=jn.x,ps=_i+jn.width,Ns=jn.y,us=Ns+jn.height;if(wr>=_i&&Gr>=Ns&&Rr<=ps&&un<=us){rr.splice(nr,1);break}else if(wr!==_i||pr.width!==jn.width||us<Gr||Ns>un){if(!(Gr!==Ns||pr.height!==jn.height||ps<wr||_i>Rr)){_i>wr&&(jn.width+=_i-wr,jn.x=wr),ps<Rr&&(jn.width=Rr-_i),rr.splice(nr,1);break}}else{Ns>Gr&&(jn.height+=Ns-Gr,jn.y=Gr),us<un&&(jn.height=un-Ns),rr.splice(nr,1);break}}}return rr},et.findHostInstance=I3,et.findHostInstanceWithNoPortals=function(rr){return rr=yr(rr),rr=rr!==null?Pr(rr):null,rr===null?null:rr.stateNode},et.findHostInstanceWithWarning=function(rr){return I3(rr)},et.flushControlled=function(rr){var nr=Bs;Bs|=1;var pr=Lo.transition,wr=sr;try{Lo.transition=null,sr=1,rr()}finally{sr=wr,Lo.transition=pr,Bs=nr,Bs===0&&(Y1(),tp())}},et.flushPassiveEffects=ey,et.flushSync=C3,et.focusWithin=function(rr,nr){if(!Dn)throw Error(dt(363));for(rr=qT(rr),nr=S3(rr,nr),nr=Array.from(nr),rr=0;rr<nr.length;){var pr=nr[rr++];if(!qn(pr)){if(pr.tag===5&&$t(pr.stateNode))return!0;for(pr=pr.child;pr!==null;)nr.push(pr),pr=pr.sibling}}return!1},et.getCurrentUpdatePriority=function(){return sr},et.getFindAllNodesFailureDescription=function(rr,nr){if(!Dn)throw Error(dt(363));var pr=0,wr=[];rr=[qT(rr),0];for(var Rr=0;Rr<rr.length;){var Gr=rr[Rr++],un=rr[Rr++],kn=nr[un];if((Gr.tag!==5||!qn(Gr))&&(KT(Gr,kn)&&(wr.push(XT(kn)),un++,un>pr&&(pr=un)),un<nr.length))for(Gr=Gr.child;Gr!==null;)rr.push(Gr,un),Gr=Gr.sibling}if(pr<nr.length){for(rr=[];pr<nr.length;pr++)rr.push(XT(nr[pr]));return`findAllNodes was able to match part of the selector:
  `+(wr.join(" > ")+`

No matching component was found for:
  `)+rr.join(" > ")}return null},et.getPublicRootInstance=function(rr){if(rr=rr.current,!rr.child)return null;switch(rr.child.tag){case 5:return hr(rr.child.stateNode);default:return rr.child.stateNode}},et.injectIntoDevTools=function(rr){if(rr={bundleType:rr.bundleType,version:rr.version,rendererPackageName:rr.rendererPackageName,rendererConfig:rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ft.ReactCurrentDispatcher,findHostInstanceByFiber:XN,findFiberByHostInstance:rr.findFiberByHostInstance||YN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")rr=!1;else{var nr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(nr.isDisabled||!nr.supportsFiber)rr=!0;else{try{co=nr.inject(rr),$o=nr}catch{}rr=!!nr.checkDCE}}return rr},et.isAlreadyRendering=function(){return!1},et.observeVisibleRects=function(rr,nr,pr,wr){if(!Dn)throw Error(dt(363));rr=YT(rr,nr);var Rr=Zt(rr,pr,wr).disconnect;return{disconnect:function(){Rr()}}},et.registerMutableSourceForHydration=function(rr,nr){var pr=nr._getVersion;pr=pr(nr._source),rr.mutableSourceEagerHydrationData==null?rr.mutableSourceEagerHydrationData=[nr,pr]:rr.mutableSourceEagerHydrationData.push(nr,pr)},et.runWithPriority=function(rr,nr){var pr=sr;try{return sr=rr,nr()}finally{sr=pr}},et.shouldError=function(){return null},et.shouldSuspend=function(){return!1},et.updateContainer=function(rr,nr,pr,wr){var Rr=nr.current,Gr=Wl(),un=N0(Rr);return pr=O3(pr),nr.context===null?nr.context=pr:nr.pendingContext=pr,nr=nu(Gr,un),nr.payload={element:rr},wr=wr===void 0?null:wr,wr!==null&&(nr.callback=wr),rr=gu(Rr,nr,un),rr!==null&&(cp(rr,Rr,un,Gr),k0(rr,Rr,un)),un},et};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const ReactFiberReconciler=getDefaultExportFromCjs(reactReconcilerExports);var constants$2={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants$2.exports=reactReconcilerConstants_production_min;var constantsExports=constants$2.exports;const propsToSkip={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let zIndexWarningShowed=!1,dragWarningShowed=!1;const EVENTS_NAMESPACE=".react-konva-event",DRAGGABLE_WARNING=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Z_INDEX_WARNING=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,EMPTY_PROPS={};function applyNodeProps(it,g,et=EMPTY_PROPS){if(!zIndexWarningShowed&&"zIndex"in g&&(console.warn(Z_INDEX_WARNING),zIndexWarningShowed=!0),!dragWarningShowed&&g.draggable){var ot=g.x!==void 0||g.y!==void 0,ut=g.onDragEnd||g.onDragMove;ot&&!ut&&(console.warn(DRAGGABLE_WARNING),dragWarningShowed=!0)}for(var ct in et)if(!propsToSkip[ct]){var dt=ct.slice(0,2)==="on",ft=et[ct]!==g[ct];if(dt&&ft){var St=ct.substr(2).toLowerCase();St.substr(0,7)==="content"&&(St="content"+St.substr(7,1).toUpperCase()+St.substr(8)),it.off(St,et[ct])}var kt=!g.hasOwnProperty(ct);kt&&it.setAttr(ct,void 0)}var Tt=g._useStrictMode,Rt={},Ft=!1;const jt={};for(var ct in g)if(!propsToSkip[ct]){var dt=ct.slice(0,2)==="on",Bt=et[ct]!==g[ct];if(dt&&Bt){var St=ct.substr(2).toLowerCase();St.substr(0,7)==="content"&&(St="content"+St.substr(7,1).toUpperCase()+St.substr(8)),g[ct]&&(jt[St]=g[ct])}!dt&&(g[ct]!==et[ct]||Tt&&g[ct]!==it.getAttr(ct))&&(Ft=!0,Rt[ct]=g[ct])}Ft&&(it.setAttrs(Rt),updatePicture(it));for(var St in jt)it.on(St+EVENTS_NAMESPACE,jt[St])}function updatePicture(it){if(!Konva$2.autoDrawEnabled){var g=it.getLayer()||it.getStage();g&&g.batchDraw()}}var schedulerExports=requireScheduler();const NO_CONTEXT={},UPDATE_SIGNAL={};Konva$1.Node.prototype._applyProps=applyNodeProps;function appendInitialChild(it,g){if(typeof g=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${g}`);return}it.add(g),updatePicture(it)}function createInstance(it,g,et){let ot=Konva$1[it];ot||(console.error(`Konva has no node with the type ${it}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${it}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),ot=Konva$1.Group);const ut={},ct={};for(var dt in g){var ft=dt.slice(0,2)==="on";ft?ct[dt]=g[dt]:ut[dt]=g[dt]}const St=new ot(ut);return applyNodeProps(St,ct),St}function createTextInstance(it,g,et){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${it}"`)}function finalizeInitialChildren(it,g,et){return!1}function getPublicInstance(it){return it}function prepareForCommit(){return null}function preparePortalMount(){return null}function prepareUpdate(it,g,et,ot){return UPDATE_SIGNAL}function resetAfterCommit(){}function resetTextContent(it){}function shouldDeprioritizeSubtree(it,g){return!1}function getRootHostContext(){return NO_CONTEXT}function getChildHostContext(){return NO_CONTEXT}const scheduleTimeout=setTimeout,cancelTimeout=clearTimeout,noTimeout=-1;function shouldSetTextContent(it,g){return!1}const isPrimaryRenderer=!1,warnsIfNotActing=!0,supportsMutation=!0;function appendChild(it,g){g.parent===it?g.moveToTop():it.add(g),updatePicture(it)}function appendChildToContainer(it,g){g.parent===it?g.moveToTop():it.add(g),updatePicture(it)}function insertBefore(it,g,et){g._remove(),it.add(g),g.setZIndex(et.getZIndex()),updatePicture(it)}function insertInContainerBefore(it,g,et){insertBefore(it,g,et)}function removeChild(it,g){g.destroy(),g.off(EVENTS_NAMESPACE),updatePicture(it)}function removeChildFromContainer(it,g){g.destroy(),g.off(EVENTS_NAMESPACE),updatePicture(it)}function commitTextUpdate(it,g,et){console.error(`Text components are not yet supported in ReactKonva. You text is: "${et}"`)}function commitMount(it,g,et){}function commitUpdate(it,g,et,ot,ut){applyNodeProps(it,ut,ot)}function hideInstance(it){it.hide(),updatePicture(it)}function hideTextInstance(it){}function unhideInstance(it,g){(g.visible==null||g.visible)&&it.show()}function unhideTextInstance(it,g){}function clearContainer(it){}function detachDeletedInstance(){}const getCurrentEventPriority=()=>constantsExports.DefaultEventPriority,HostConfig=Object.freeze(Object.defineProperty({__proto__:null,appendChild,appendChildToContainer,appendInitialChild,cancelTimeout,clearContainer,commitMount,commitTextUpdate,commitUpdate,createInstance,createTextInstance,detachDeletedInstance,finalizeInitialChildren,getChildHostContext,getCurrentEventPriority,getPublicInstance,getRootHostContext,hideInstance,hideTextInstance,idlePriority:schedulerExports.unstable_IdlePriority,insertBefore,insertInContainerBefore,isPrimaryRenderer,noTimeout,now:schedulerExports.unstable_now,prepareForCommit,preparePortalMount,prepareUpdate,removeChild,removeChildFromContainer,resetAfterCommit,resetTextContent,run:schedulerExports.unstable_runWithPriority,scheduleTimeout,shouldDeprioritizeSubtree,shouldSetTextContent,supportsMutation,unhideInstance,unhideTextInstance,warnsIfNotActing},Symbol.toStringTag,{value:"Module"}));var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(it,g,et)=>g in it?__defProp(it,g,{enumerable:!0,configurable:!0,writable:!0,value:et}):it[g]=et,__spreadValues=(it,g)=>{for(var et in g||(g={}))__hasOwnProp.call(g,et)&&__defNormalProp(it,et,g[et]);if(__getOwnPropSymbols)for(var et of __getOwnPropSymbols(g))__propIsEnum.call(g,et)&&__defNormalProp(it,et,g[et]);return it},__spreadProps=(it,g)=>__defProps(it,__getOwnPropDescs(g)),_a,_b;typeof window<"u"&&((_a=window.document)!=null&&_a.createElement||((_b=window.navigator)==null?void 0:_b.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function traverseFiber(it,g,et){if(!it)return;if(et(it)===!0)return it;let ot=g?it.return:it.child;for(;ot;){const ut=traverseFiber(ot,g,et);if(ut)return ut;ot=g?null:ot.sibling}}function wrapContext(it){try{return Object.defineProperties(it,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return it}}const error$1=console.error;console.error=function(){const it=[...arguments].join("");if(it!=null&&it.startsWith("Warning:")&&it.includes("useContext")){console.error=error$1;return}return error$1.apply(this,arguments)};const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}function useFiber(){const it=reactExports.useContext(FiberContext);if(it===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const g=reactExports.useId();return reactExports.useMemo(()=>{for(const ot of[it,it==null?void 0:it.alternate]){if(!ot)continue;const ut=traverseFiber(ot,!1,ct=>{let dt=ct.memoizedState;for(;dt;){if(dt.memoizedState===g)return!0;dt=dt.next}});if(ut)return ut}},[it,g])}function useContextMap(){const it=useFiber(),[g]=reactExports.useState(()=>new Map);g.clear();let et=it;for(;et;){if(et.type&&typeof et.type=="object"){const ut=et.type._context===void 0&&et.type.Provider===et.type?et.type:et.type._context;ut&&ut!==FiberContext&&!g.has(ut)&&g.set(ut,reactExports.useContext(wrapContext(ut)))}et=et.return}return g}function useContextBridge(){const it=useContextMap();return reactExports.useMemo(()=>Array.from(it.keys()).reduce((g,et)=>ot=>reactExports.createElement(g,null,reactExports.createElement(et.Provider,__spreadProps(__spreadValues({},ot),{value:it.get(et)}))),g=>reactExports.createElement(FiberProvider,__spreadValues({},g))),[it])}function usePrevious$1(it){const g=React$3.useRef({});return React$3.useLayoutEffect(()=>{g.current=it}),React$3.useLayoutEffect(()=>()=>{g.current={}},[]),g.current}const StageWrap=it=>{const g=React$3.useRef(null),et=React$3.useRef(null),ot=React$3.useRef(null),ut=usePrevious$1(it),ct=useContextBridge(),dt=ft=>{const{forwardedRef:St}=it;St&&(typeof St=="function"?St(ft):St.current=ft)};return React$3.useLayoutEffect(()=>(et.current=new Konva$1.Stage({width:it.width,height:it.height,container:g.current}),dt(et.current),ot.current=KonvaRenderer.createContainer(et.current,constantsExports.LegacyRoot,!1,null),KonvaRenderer.updateContainer(React$3.createElement(ct,{},it.children),ot.current),()=>{Konva$1.isBrowser&&(dt(null),KonvaRenderer.updateContainer(null,ot.current,null),et.current.destroy())}),[]),React$3.useLayoutEffect(()=>{dt(et.current),applyNodeProps(et.current,it,ut),KonvaRenderer.updateContainer(React$3.createElement(ct,{},it.children),ot.current,null)}),React$3.createElement("div",{ref:g,id:it.id,accessKey:it.accessKey,className:it.className,role:it.role,style:it.style,tabIndex:it.tabIndex,title:it.title})},Layer="Layer",Group="Group",Rect$1="Rect",Ellipse="Ellipse",Line="Line",Image$1="Image",Text$1="Text",Path="Path",Arrow="Arrow",Transformer="Transformer",KonvaRenderer=ReactFiberReconciler(HostConfig);KonvaRenderer.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:React$3.version,rendererPackageName:"react-konva"});const Stage=React$3.forwardRef((it,g)=>React$3.createElement(FiberProvider,{},React$3.createElement(StageWrap,{...it,forwardedRef:g})));var React=reactExports,useImage=function it(g,et,ot){const ut=React.useRef("loading"),ct=React.useRef(),[dt,ft]=React.useState(0),St=React.useRef(),kt=React.useRef(),Tt=React.useRef();return(St.current!==g||kt.current!==et||Tt.current!==ot)&&(ut.current="loading",ct.current=void 0,St.current=g,kt.current=et,Tt.current=ot),React.useLayoutEffect(function(){if(!g)return;var Rt=document.createElement("img");function Ft(){Rt.decode().catch(()=>{}).finally(()=>{ut.current="loaded",ct.current=Rt,ft(Math.random())})}function jt(){ut.current="failed",ct.current=void 0,ft(Math.random())}return Rt.addEventListener("load",Ft),Rt.addEventListener("error",jt),et&&(Rt.crossOrigin=et),ot&&(Rt.referrerPolicy=ot),Rt.src=g,function(){Rt.removeEventListener("load",Ft),Rt.removeEventListener("error",jt)}},[g,et,ot]),[ct.current,ut.current]};const useImage$1=getDefaultExportFromCjs(useImage);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(it,g){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,ot){et.__proto__=ot}||function(et,ot){for(var ut in ot)ot.hasOwnProperty(ut)&&(et[ut]=ot[ut])},extendStatics(it,g)};function __extends(it,g){extendStatics(it,g);function et(){this.constructor=it}it.prototype=g===null?Object.create(g):(et.prototype=g.prototype,new et)}var __assign=function(){return __assign=Object.assign||function(g){for(var et,ot=1,ut=arguments.length;ot<ut;ot++){et=arguments[ot];for(var ct in et)Object.prototype.hasOwnProperty.call(et,ct)&&(g[ct]=et[ct])}return g},__assign.apply(this,arguments)};function __rest$1(it,g){var et={};for(var ot in it)Object.prototype.hasOwnProperty.call(it,ot)&&g.indexOf(ot)<0&&(et[ot]=it[ot]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,ot=Object.getOwnPropertySymbols(it);ut<ot.length;ut++)g.indexOf(ot[ut])<0&&Object.prototype.propertyIsEnumerable.call(it,ot[ut])&&(et[ot[ut]]=it[ot[ut]]);return et}function __awaiter(it,g,et,ot){function ut(ct){return ct instanceof et?ct:new et(function(dt){dt(ct)})}return new(et||(et=Promise))(function(ct,dt){function ft(Tt){try{kt(ot.next(Tt))}catch(Rt){dt(Rt)}}function St(Tt){try{kt(ot.throw(Tt))}catch(Rt){dt(Rt)}}function kt(Tt){Tt.done?ct(Tt.value):ut(Tt.value).then(ft,St)}kt((ot=ot.apply(it,g||[])).next())})}function __generator(it,g){var et={label:0,sent:function(){if(ct[0]&1)throw ct[1];return ct[1]},trys:[],ops:[]},ot,ut,ct,dt;return dt={next:ft(0),throw:ft(1),return:ft(2)},typeof Symbol=="function"&&(dt[Symbol.iterator]=function(){return this}),dt;function ft(kt){return function(Tt){return St([kt,Tt])}}function St(kt){if(ot)throw new TypeError("Generator is already executing.");for(;et;)try{if(ot=1,ut&&(ct=kt[0]&2?ut.return:kt[0]?ut.throw||((ct=ut.return)&&ct.call(ut),0):ut.next)&&!(ct=ct.call(ut,kt[1])).done)return ct;switch(ut=0,ct&&(kt=[kt[0]&2,ct.value]),kt[0]){case 0:case 1:ct=kt;break;case 4:return et.label++,{value:kt[1],done:!1};case 5:et.label++,ut=kt[1],kt=[0];continue;case 7:kt=et.ops.pop(),et.trys.pop();continue;default:if(ct=et.trys,!(ct=ct.length>0&&ct[ct.length-1])&&(kt[0]===6||kt[0]===2)){et=0;continue}if(kt[0]===3&&(!ct||kt[1]>ct[0]&&kt[1]<ct[3])){et.label=kt[1];break}if(kt[0]===6&&et.label<ct[1]){et.label=ct[1],ct=kt;break}if(ct&&et.label<ct[2]){et.label=ct[2],et.ops.push(kt);break}ct[2]&&et.ops.pop(),et.trys.pop();continue}kt=g.call(it,et)}catch(Tt){kt=[6,Tt],ut=0}finally{ot=ct=0}if(kt[0]&5)throw kt[1];return{value:kt[0]?kt[1]:void 0,done:!0}}}function __spreadArrays(){for(var it=0,g=0,et=arguments.length;g<et;g++)it+=arguments[g].length;for(var ot=Array(it),ut=0,g=0;g<et;g++)for(var ct=arguments[g],dt=0,ft=ct.length;dt<ft;dt++,ut++)ot[ut]=ct[dt];return ot}var chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=new Uint8Array(256);for(var i$1=0;i$1<chars$1.length;i$1++)lookup$1[chars$1.charCodeAt(i$1)]=i$1;var encodeToBase64=function(it){for(var g="",et=it.length,ot=0;ot<et;ot+=3)g+=chars$1[it[ot]>>2],g+=chars$1[(it[ot]&3)<<4|it[ot+1]>>4],g+=chars$1[(it[ot+1]&15)<<2|it[ot+2]>>6],g+=chars$1[it[ot+2]&63];return et%3===2?g=g.substring(0,g.length-1)+"=":et%3===1&&(g=g.substring(0,g.length-2)+"=="),g},decodeFromBase64$1=function(it){var g=it.length*.75,et=it.length,ot,ut=0,ct,dt,ft,St;it[it.length-1]==="="&&(g--,it[it.length-2]==="="&&g--);var kt=new Uint8Array(g);for(ot=0;ot<et;ot+=4)ct=lookup$1[it.charCodeAt(ot)],dt=lookup$1[it.charCodeAt(ot+1)],ft=lookup$1[it.charCodeAt(ot+2)],St=lookup$1[it.charCodeAt(ot+3)],kt[ut++]=ct<<2|dt>>4,kt[ut++]=(dt&15)<<4|ft>>2,kt[ut++]=(ft&3)<<6|St&63;return kt},DATA_URI_PREFIX_REGEX=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,decodeFromBase64DataUri=function(it){var g=it.trim(),et=g.substring(0,100),ot=et.match(DATA_URI_PREFIX_REGEX);if(!ot)return decodeFromBase64$1(g);var ut=ot[0],ct=g.substring(ut.length);return decodeFromBase64$1(ct)},toCharCode=function(it){return it.charCodeAt(0)},toCodePoint=function(it){return it.codePointAt(0)},toHexStringOfMinLength=function(it,g){return padStart$1(it.toString(16),g,"0").toUpperCase()},toHexString=function(it){return toHexStringOfMinLength(it,2)},charFromCode=function(it){return String.fromCharCode(it)},charFromHexCode=function(it){return charFromCode(parseInt(it,16))},padStart$1=function(it,g,et){for(var ot="",ut=0,ct=g-it.length;ut<ct;ut++)ot+=et;return ot+it},copyStringIntoBuffer=function(it,g,et){for(var ot=it.length,ut=0;ut<ot;ut++)g[et++]=it.charCodeAt(ut);return ot},escapeRegExp=function(it){return it.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},cleanText=function(it){return it.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},escapedNewlineChars=["\\n","\\f","\\r","\\u000B"],isNewlineChar=function(it){return/^[\n\f\r\u000B]$/.test(it)},lineSplit=function(it){return it.split(/[\n\f\r\u000B]/)},mergeLines=function(it){return it.replace(/[\n\f\r\u000B]/g," ")},charAtIndex=function(it,g){var et=it.charCodeAt(g),ot,ut=g+1,ct=1;return et>=55296&&et<=56319&&it.length>ut&&(ot=it.charCodeAt(ut),ot>=56320&&ot<=57343&&(ct=2)),[it.slice(g,g+ct),ct]},charSplit=function(it){for(var g=[],et=0,ot=it.length;et<ot;){var ut=charAtIndex(it,et),ct=ut[0],dt=ut[1];g.push(ct),et+=dt}return g},buildWordBreakRegex=function(it){for(var g=escapedNewlineChars.join("|"),et=["$"],ot=0,ut=it.length;ot<ut;ot++){var ct=it[ot];if(isNewlineChar(ct))throw new TypeError("`wordBreak` must not include "+g);et.push(ct===""?".":escapeRegExp(ct))}var dt=et.join("|");return new RegExp("("+g+")|((.*?)("+dt+"))","gm")},breakTextIntoLines=function(it,g,et,ot){for(var ut=buildWordBreakRegex(g),ct=cleanText(it).match(ut),dt="",ft=0,St=[],kt=function(){dt!==""&&St.push(dt),dt="",ft=0},Tt=0,Rt=ct.length;Tt<Rt;Tt++){var Ft=ct[Tt];if(isNewlineChar(Ft))kt();else{var jt=ot(Ft);ft+jt>et&&kt(),dt+=Ft,ft+=jt}}return kt(),St},dateRegex=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,parseDate=function(it){var g=it.match(dateRegex);if(g){var et=g[1],ot=g[2],ut=ot===void 0?"01":ot,ct=g[3],dt=ct===void 0?"01":ct,ft=g[4],St=ft===void 0?"00":ft,kt=g[5],Tt=kt===void 0?"00":kt,Rt=g[6],Ft=Rt===void 0?"00":Rt,jt=g[7],Bt=jt===void 0?"Z":jt,zt=g[8],Ht=zt===void 0?"00":zt,Ut=g[9],Kt=Ut===void 0?"00":Ut,Yt=Bt==="Z"?"Z":""+Bt+Ht+":"+Kt,er=new Date(et+"-"+ut+"-"+dt+"T"+St+":"+Tt+":"+Ft+Yt);return er}},findLastMatch=function(it,g){for(var et,ot=0,ut;ot<it.length;){var ct=it.substring(ot).match(g);if(!ct)return{match:ut,pos:ot};ut=ct,ot+=((et=ct.index)!==null&&et!==void 0?et:0)+ct[0].length}return{match:ut,pos:ot}},last=function(it){return it[it.length-1]},typedArrayFor=function(it){if(it instanceof Uint8Array)return it;for(var g=it.length,et=new Uint8Array(g),ot=0;ot<g;ot++)et[ot]=it.charCodeAt(ot);return et},mergeIntoTypedArray=function(){for(var it=[],g=0;g<arguments.length;g++)it[g]=arguments[g];for(var et=it.length,ot=[],ut=0;ut<et;ut++){var ct=it[ut];ot[ut]=ct instanceof Uint8Array?ct:typedArrayFor(ct)}for(var dt=0,ut=0;ut<et;ut++)dt+=it[ut].length;for(var ft=new Uint8Array(dt),St=0,kt=0;kt<et;kt++)for(var Tt=ot[kt],Rt=0,Ft=Tt.length;Rt<Ft;Rt++)ft[St++]=Tt[Rt];return ft},mergeUint8Arrays=function(it){for(var g=0,et=0,ot=it.length;et<ot;et++)g+=it[et].length;for(var ut=new Uint8Array(g),ct=0,et=0,ot=it.length;et<ot;et++){var dt=it[et];ut.set(dt,ct),ct+=dt.length}return ut},arrayAsString=function(it){for(var g="",et=0,ot=it.length;et<ot;et++)g+=charFromCode(it[et]);return g},byAscendingId=function(it,g){return it.id-g.id},sortedUniq=function(it,g){for(var et=[],ot=0,ut=it.length;ot<ut;ot++){var ct=it[ot],dt=it[ot-1];(ot===0||g(ct)!==g(dt))&&et.push(ct)}return et},reverseArray=function(it){for(var g=it.length,et=0,ot=Math.floor(g/2);et<ot;et++){var ut=et,ct=g-et-1,dt=it[et];it[ut]=it[ct],it[ct]=dt}return it},sum=function(it){for(var g=0,et=0,ot=it.length;et<ot;et++)g+=it[et];return g},range=function(it,g){for(var et=new Array(g-it),ot=0,ut=et.length;ot<ut;ot++)et[ot]=it+ot;return et},pluckIndices=function(it,g){for(var et=new Array(g.length),ot=0,ut=g.length;ot<ut;ot++)et[ot]=it[g[ot]];return et},canBeConvertedToUint8Array=function(it){return it instanceof Uint8Array||it instanceof ArrayBuffer||typeof it=="string"},toUint8Array=function(it){if(typeof it=="string")return decodeFromBase64DataUri(it);if(it instanceof ArrayBuffer)return new Uint8Array(it);if(it instanceof Uint8Array)return it;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")},waitForTick=function(){return new Promise(function(it){setTimeout(function(){return it()},0)})},utf16Encode=function(it,g){g===void 0&&(g=!0);var et=[];g&&et.push(65279);for(var ot=0,ut=it.length;ot<ut;){var ct=it.codePointAt(ot);if(ct<65536)et.push(ct),ot+=1;else if(ct<1114112)et.push(highSurrogate(ct),lowSurrogate(ct)),ot+=2;else throw new Error("Invalid code point: 0x"+toHexString(ct))}return new Uint16Array(et)},isWithinBMP=function(it){return it>=0&&it<=65535},hasSurrogates=function(it){return it>=65536&&it<=1114111},highSurrogate=function(it){return Math.floor((it-65536)/1024)+55296},lowSurrogate=function(it){return(it-65536)%1024+56320},ByteOrder;(function(it){it.BigEndian="BigEndian",it.LittleEndian="LittleEndian"})(ByteOrder||(ByteOrder={}));var REPLACEMENT="".codePointAt(0),utf16Decode=function(it,g){if(g===void 0&&(g=!0),it.length<=1)return String.fromCodePoint(REPLACEMENT);for(var et=g?readBOM(it):ByteOrder.BigEndian,ot=g?2:0,ut=[];it.length-ot>=2;){var ct=decodeValues(it[ot++],it[ot++],et);if(isHighSurrogate(ct))if(it.length-ot<2)ut.push(REPLACEMENT);else{var dt=decodeValues(it[ot++],it[ot++],et);isLowSurrogate(dt)?ut.push(ct,dt):ut.push(REPLACEMENT)}else isLowSurrogate(ct)?(ot+=2,ut.push(REPLACEMENT)):ut.push(ct)}return ot<it.length&&ut.push(REPLACEMENT),String.fromCodePoint.apply(String,ut)},isHighSurrogate=function(it){return it>=55296&&it<=56319},isLowSurrogate=function(it){return it>=56320&&it<=57343},decodeValues=function(it,g,et){if(et===ByteOrder.LittleEndian)return g<<8|it;if(et===ByteOrder.BigEndian)return it<<8|g;throw new Error("Invalid byteOrder: "+et)},readBOM=function(it){return hasUtf16BigEndianBOM(it)?ByteOrder.BigEndian:hasUtf16LittleEndianBOM(it)?ByteOrder.LittleEndian:ByteOrder.BigEndian},hasUtf16BigEndianBOM=function(it){return it[0]===254&&it[1]===255},hasUtf16LittleEndianBOM=function(it){return it[0]===255&&it[1]===254},hasUtf16BOM=function(it){return hasUtf16BigEndianBOM(it)||hasUtf16LittleEndianBOM(it)},numberToString=function(it){var g=String(it);if(Math.abs(it)<1){var et=parseInt(it.toString().split("e-")[1]);if(et){var ot=it<0;ot&&(it*=-1),it*=Math.pow(10,et-1),g="0."+new Array(et).join("0")+it.toString().substring(2),ot&&(g="-"+g)}}else{var et=parseInt(it.toString().split("+")[1]);et>20&&(et-=20,it/=Math.pow(10,et),g=it.toString()+new Array(et+1).join("0"))}return g},sizeInBytes=function(it){return Math.ceil(it.toString(2).length/8)},bytesFor=function(it){for(var g=new Uint8Array(sizeInBytes(it)),et=1;et<=g.length;et++)g[et-1]=it>>(g.length-et)*8;return g},error=function(it){throw new Error(it)},common={};(function(it){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function et(ct,dt){return Object.prototype.hasOwnProperty.call(ct,dt)}it.assign=function(ct){for(var dt=Array.prototype.slice.call(arguments,1);dt.length;){var ft=dt.shift();if(ft){if(typeof ft!="object")throw new TypeError(ft+"must be non-object");for(var St in ft)et(ft,St)&&(ct[St]=ft[St])}}return ct},it.shrinkBuf=function(ct,dt){return ct.length===dt?ct:ct.subarray?ct.subarray(0,dt):(ct.length=dt,ct)};var ot={arraySet:function(ct,dt,ft,St,kt){if(dt.subarray&&ct.subarray){ct.set(dt.subarray(ft,ft+St),kt);return}for(var Tt=0;Tt<St;Tt++)ct[kt+Tt]=dt[ft+Tt]},flattenChunks:function(ct){var dt,ft,St,kt,Tt,Rt;for(St=0,dt=0,ft=ct.length;dt<ft;dt++)St+=ct[dt].length;for(Rt=new Uint8Array(St),kt=0,dt=0,ft=ct.length;dt<ft;dt++)Tt=ct[dt],Rt.set(Tt,kt),kt+=Tt.length;return Rt}},ut={arraySet:function(ct,dt,ft,St,kt){for(var Tt=0;Tt<St;Tt++)ct[kt+Tt]=dt[ft+Tt]},flattenChunks:function(ct){return[].concat.apply([],ct)}};it.setTyped=function(ct){ct?(it.Buf8=Uint8Array,it.Buf16=Uint16Array,it.Buf32=Int32Array,it.assign(it,ot)):(it.Buf8=Array,it.Buf16=Array,it.Buf32=Array,it.assign(it,ut))},it.setTyped(g)})(common);var deflate$4={},deflate$3={},trees$1={},utils$6=common,Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(it){for(var g=it.length;--g>=0;)it[g]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);var static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);var _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);var base_length=new Array(LENGTH_CODES$1);zero$1(base_length);var base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(it,g,et,ot,ut){this.static_tree=it,this.extra_bits=g,this.extra_base=et,this.elems=ot,this.max_length=ut,this.has_stree=it&&it.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(it,g){this.dyn_tree=it,this.max_code=0,this.stat_desc=g}function d_code(it){return it<256?_dist_code[it]:_dist_code[256+(it>>>7)]}function put_short(it,g){it.pending_buf[it.pending++]=g&255,it.pending_buf[it.pending++]=g>>>8&255}function send_bits(it,g,et){it.bi_valid>Buf_size-et?(it.bi_buf|=g<<it.bi_valid&65535,put_short(it,it.bi_buf),it.bi_buf=g>>Buf_size-it.bi_valid,it.bi_valid+=et-Buf_size):(it.bi_buf|=g<<it.bi_valid&65535,it.bi_valid+=et)}function send_code(it,g,et){send_bits(it,et[g*2],et[g*2+1])}function bi_reverse(it,g){var et=0;do et|=it&1,it>>>=1,et<<=1;while(--g>0);return et>>>1}function bi_flush(it){it.bi_valid===16?(put_short(it,it.bi_buf),it.bi_buf=0,it.bi_valid=0):it.bi_valid>=8&&(it.pending_buf[it.pending++]=it.bi_buf&255,it.bi_buf>>=8,it.bi_valid-=8)}function gen_bitlen(it,g){var et=g.dyn_tree,ot=g.max_code,ut=g.stat_desc.static_tree,ct=g.stat_desc.has_stree,dt=g.stat_desc.extra_bits,ft=g.stat_desc.extra_base,St=g.stat_desc.max_length,kt,Tt,Rt,Ft,jt,Bt,zt=0;for(Ft=0;Ft<=MAX_BITS$1;Ft++)it.bl_count[Ft]=0;for(et[it.heap[it.heap_max]*2+1]=0,kt=it.heap_max+1;kt<HEAP_SIZE$1;kt++)Tt=it.heap[kt],Ft=et[et[Tt*2+1]*2+1]+1,Ft>St&&(Ft=St,zt++),et[Tt*2+1]=Ft,!(Tt>ot)&&(it.bl_count[Ft]++,jt=0,Tt>=ft&&(jt=dt[Tt-ft]),Bt=et[Tt*2],it.opt_len+=Bt*(Ft+jt),ct&&(it.static_len+=Bt*(ut[Tt*2+1]+jt)));if(zt!==0){do{for(Ft=St-1;it.bl_count[Ft]===0;)Ft--;it.bl_count[Ft]--,it.bl_count[Ft+1]+=2,it.bl_count[St]--,zt-=2}while(zt>0);for(Ft=St;Ft!==0;Ft--)for(Tt=it.bl_count[Ft];Tt!==0;)Rt=it.heap[--kt],!(Rt>ot)&&(et[Rt*2+1]!==Ft&&(it.opt_len+=(Ft-et[Rt*2+1])*et[Rt*2],et[Rt*2+1]=Ft),Tt--)}}function gen_codes(it,g,et){var ot=new Array(MAX_BITS$1+1),ut=0,ct,dt;for(ct=1;ct<=MAX_BITS$1;ct++)ot[ct]=ut=ut+et[ct-1]<<1;for(dt=0;dt<=g;dt++){var ft=it[dt*2+1];ft!==0&&(it[dt*2]=bi_reverse(ot[ft]++,ft))}}function tr_static_init(){var it,g,et,ot,ut,ct=new Array(MAX_BITS$1+1);for(et=0,ot=0;ot<LENGTH_CODES$1-1;ot++)for(base_length[ot]=et,it=0;it<1<<extra_lbits[ot];it++)_length_code[et++]=ot;for(_length_code[et-1]=ot,ut=0,ot=0;ot<16;ot++)for(base_dist[ot]=ut,it=0;it<1<<extra_dbits[ot];it++)_dist_code[ut++]=ot;for(ut>>=7;ot<D_CODES$1;ot++)for(base_dist[ot]=ut<<7,it=0;it<1<<extra_dbits[ot]-7;it++)_dist_code[256+ut++]=ot;for(g=0;g<=MAX_BITS$1;g++)ct[g]=0;for(it=0;it<=143;)static_ltree[it*2+1]=8,it++,ct[8]++;for(;it<=255;)static_ltree[it*2+1]=9,it++,ct[9]++;for(;it<=279;)static_ltree[it*2+1]=7,it++,ct[7]++;for(;it<=287;)static_ltree[it*2+1]=8,it++,ct[8]++;for(gen_codes(static_ltree,L_CODES$1+1,ct),it=0;it<D_CODES$1;it++)static_dtree[it*2+1]=5,static_dtree[it*2]=bi_reverse(it,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)}function init_block(it){var g;for(g=0;g<L_CODES$1;g++)it.dyn_ltree[g*2]=0;for(g=0;g<D_CODES$1;g++)it.dyn_dtree[g*2]=0;for(g=0;g<BL_CODES$1;g++)it.bl_tree[g*2]=0;it.dyn_ltree[END_BLOCK*2]=1,it.opt_len=it.static_len=0,it.last_lit=it.matches=0}function bi_windup(it){it.bi_valid>8?put_short(it,it.bi_buf):it.bi_valid>0&&(it.pending_buf[it.pending++]=it.bi_buf),it.bi_buf=0,it.bi_valid=0}function copy_block(it,g,et,ot){bi_windup(it),ot&&(put_short(it,et),put_short(it,~et)),utils$6.arraySet(it.pending_buf,it.window,g,et,it.pending),it.pending+=et}function smaller(it,g,et,ot){var ut=g*2,ct=et*2;return it[ut]<it[ct]||it[ut]===it[ct]&&ot[g]<=ot[et]}function pqdownheap(it,g,et){for(var ot=it.heap[et],ut=et<<1;ut<=it.heap_len&&(ut<it.heap_len&&smaller(g,it.heap[ut+1],it.heap[ut],it.depth)&&ut++,!smaller(g,ot,it.heap[ut],it.depth));)it.heap[et]=it.heap[ut],et=ut,ut<<=1;it.heap[et]=ot}function compress_block(it,g,et){var ot,ut,ct=0,dt,ft;if(it.last_lit!==0)do ot=it.pending_buf[it.d_buf+ct*2]<<8|it.pending_buf[it.d_buf+ct*2+1],ut=it.pending_buf[it.l_buf+ct],ct++,ot===0?send_code(it,ut,g):(dt=_length_code[ut],send_code(it,dt+LITERALS$1+1,g),ft=extra_lbits[dt],ft!==0&&(ut-=base_length[dt],send_bits(it,ut,ft)),ot--,dt=d_code(ot),send_code(it,dt,et),ft=extra_dbits[dt],ft!==0&&(ot-=base_dist[dt],send_bits(it,ot,ft)));while(ct<it.last_lit);send_code(it,END_BLOCK,g)}function build_tree(it,g){var et=g.dyn_tree,ot=g.stat_desc.static_tree,ut=g.stat_desc.has_stree,ct=g.stat_desc.elems,dt,ft,St=-1,kt;for(it.heap_len=0,it.heap_max=HEAP_SIZE$1,dt=0;dt<ct;dt++)et[dt*2]!==0?(it.heap[++it.heap_len]=St=dt,it.depth[dt]=0):et[dt*2+1]=0;for(;it.heap_len<2;)kt=it.heap[++it.heap_len]=St<2?++St:0,et[kt*2]=1,it.depth[kt]=0,it.opt_len--,ut&&(it.static_len-=ot[kt*2+1]);for(g.max_code=St,dt=it.heap_len>>1;dt>=1;dt--)pqdownheap(it,et,dt);kt=ct;do dt=it.heap[1],it.heap[1]=it.heap[it.heap_len--],pqdownheap(it,et,1),ft=it.heap[1],it.heap[--it.heap_max]=dt,it.heap[--it.heap_max]=ft,et[kt*2]=et[dt*2]+et[ft*2],it.depth[kt]=(it.depth[dt]>=it.depth[ft]?it.depth[dt]:it.depth[ft])+1,et[dt*2+1]=et[ft*2+1]=kt,it.heap[1]=kt++,pqdownheap(it,et,1);while(it.heap_len>=2);it.heap[--it.heap_max]=it.heap[1],gen_bitlen(it,g),gen_codes(et,St,it.bl_count)}function scan_tree(it,g,et){var ot,ut=-1,ct,dt=g[0*2+1],ft=0,St=7,kt=4;for(dt===0&&(St=138,kt=3),g[(et+1)*2+1]=65535,ot=0;ot<=et;ot++)ct=dt,dt=g[(ot+1)*2+1],!(++ft<St&&ct===dt)&&(ft<kt?it.bl_tree[ct*2]+=ft:ct!==0?(ct!==ut&&it.bl_tree[ct*2]++,it.bl_tree[REP_3_6*2]++):ft<=10?it.bl_tree[REPZ_3_10*2]++:it.bl_tree[REPZ_11_138*2]++,ft=0,ut=ct,dt===0?(St=138,kt=3):ct===dt?(St=6,kt=3):(St=7,kt=4))}function send_tree(it,g,et){var ot,ut=-1,ct,dt=g[0*2+1],ft=0,St=7,kt=4;for(dt===0&&(St=138,kt=3),ot=0;ot<=et;ot++)if(ct=dt,dt=g[(ot+1)*2+1],!(++ft<St&&ct===dt)){if(ft<kt)do send_code(it,ct,it.bl_tree);while(--ft!==0);else ct!==0?(ct!==ut&&(send_code(it,ct,it.bl_tree),ft--),send_code(it,REP_3_6,it.bl_tree),send_bits(it,ft-3,2)):ft<=10?(send_code(it,REPZ_3_10,it.bl_tree),send_bits(it,ft-3,3)):(send_code(it,REPZ_11_138,it.bl_tree),send_bits(it,ft-11,7));ft=0,ut=ct,dt===0?(St=138,kt=3):ct===dt?(St=6,kt=3):(St=7,kt=4)}}function build_bl_tree(it){var g;for(scan_tree(it,it.dyn_ltree,it.l_desc.max_code),scan_tree(it,it.dyn_dtree,it.d_desc.max_code),build_tree(it,it.bl_desc),g=BL_CODES$1-1;g>=3&&it.bl_tree[bl_order[g]*2+1]===0;g--);return it.opt_len+=3*(g+1)+5+5+4,g}function send_all_trees(it,g,et,ot){var ut;for(send_bits(it,g-257,5),send_bits(it,et-1,5),send_bits(it,ot-4,4),ut=0;ut<ot;ut++)send_bits(it,it.bl_tree[bl_order[ut]*2+1],3);send_tree(it,it.dyn_ltree,g-1),send_tree(it,it.dyn_dtree,et-1)}function detect_data_type(it){var g=4093624447,et;for(et=0;et<=31;et++,g>>>=1)if(g&1&&it.dyn_ltree[et*2]!==0)return Z_BINARY;if(it.dyn_ltree[9*2]!==0||it.dyn_ltree[10*2]!==0||it.dyn_ltree[13*2]!==0)return Z_TEXT;for(et=32;et<LITERALS$1;et++)if(it.dyn_ltree[et*2]!==0)return Z_TEXT;return Z_BINARY}var static_init_done=!1;function _tr_init(it){static_init_done||(tr_static_init(),static_init_done=!0),it.l_desc=new TreeDesc(it.dyn_ltree,static_l_desc),it.d_desc=new TreeDesc(it.dyn_dtree,static_d_desc),it.bl_desc=new TreeDesc(it.bl_tree,static_bl_desc),it.bi_buf=0,it.bi_valid=0,init_block(it)}function _tr_stored_block(it,g,et,ot){send_bits(it,(STORED_BLOCK<<1)+(ot?1:0),3),copy_block(it,g,et,!0)}function _tr_align(it){send_bits(it,STATIC_TREES<<1,3),send_code(it,END_BLOCK,static_ltree),bi_flush(it)}function _tr_flush_block(it,g,et,ot){var ut,ct,dt=0;it.level>0?(it.strm.data_type===Z_UNKNOWN$1&&(it.strm.data_type=detect_data_type(it)),build_tree(it,it.l_desc),build_tree(it,it.d_desc),dt=build_bl_tree(it),ut=it.opt_len+3+7>>>3,ct=it.static_len+3+7>>>3,ct<=ut&&(ut=ct)):ut=ct=et+5,et+4<=ut&&g!==-1?_tr_stored_block(it,g,et,ot):it.strategy===Z_FIXED$1||ct===ut?(send_bits(it,(STATIC_TREES<<1)+(ot?1:0),3),compress_block(it,static_ltree,static_dtree)):(send_bits(it,(DYN_TREES<<1)+(ot?1:0),3),send_all_trees(it,it.l_desc.max_code+1,it.d_desc.max_code+1,dt+1),compress_block(it,it.dyn_ltree,it.dyn_dtree)),init_block(it),ot&&bi_windup(it)}function _tr_tally(it,g,et){return it.pending_buf[it.d_buf+it.last_lit*2]=g>>>8&255,it.pending_buf[it.d_buf+it.last_lit*2+1]=g&255,it.pending_buf[it.l_buf+it.last_lit]=et&255,it.last_lit++,g===0?it.dyn_ltree[et*2]++:(it.matches++,g--,it.dyn_ltree[(_length_code[et]+LITERALS$1+1)*2]++,it.dyn_dtree[d_code(g)*2]++),it.last_lit===it.lit_bufsize-1}trees$1._tr_init=_tr_init;trees$1._tr_stored_block=_tr_stored_block;trees$1._tr_flush_block=_tr_flush_block;trees$1._tr_tally=_tr_tally;trees$1._tr_align=_tr_align;function adler32$2(it,g,et,ot){for(var ut=it&65535|0,ct=it>>>16&65535|0,dt=0;et!==0;){dt=et>2e3?2e3:et,et-=dt;do ut=ut+g[ot++]|0,ct=ct+ut|0;while(--dt);ut%=65521,ct%=65521}return ut|ct<<16|0}var adler32_1=adler32$2;function makeTable(){for(var it,g=[],et=0;et<256;et++){it=et;for(var ot=0;ot<8;ot++)it=it&1?3988292384^it>>>1:it>>>1;g[et]=it}return g}var crcTable=makeTable();function crc32$2(it,g,et,ot){var ut=crcTable,ct=ot+et;it^=-1;for(var dt=ot;dt<ct;dt++)it=it>>>8^ut[(it^g[dt])&255];return it^-1}var crc32_1=crc32$2,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},utils$5=common,trees=trees$1,adler32$1=adler32_1,crc32$1=crc32_1,msg$2=messages,Z_NO_FLUSH$1=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH$2=4,Z_BLOCK$1=5,Z_OK$2=0,Z_STREAM_END$2=1,Z_STREAM_ERROR$1=-2,Z_DATA_ERROR$1=-3,Z_BUF_ERROR$1=-5,Z_DEFAULT_COMPRESSION$1=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY$1=0,Z_UNKNOWN=2,Z_DEFLATED$2=8,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(it,g){return it.msg=msg$2[g],g}function rank(it){return(it<<1)-(it>4?9:0)}function zero(it){for(var g=it.length;--g>=0;)it[g]=0}function flush_pending(it){var g=it.state,et=g.pending;et>it.avail_out&&(et=it.avail_out),et!==0&&(utils$5.arraySet(it.output,g.pending_buf,g.pending_out,et,it.next_out),it.next_out+=et,g.pending_out+=et,it.total_out+=et,it.avail_out-=et,g.pending-=et,g.pending===0&&(g.pending_out=0))}function flush_block_only(it,g){trees._tr_flush_block(it,it.block_start>=0?it.block_start:-1,it.strstart-it.block_start,g),it.block_start=it.strstart,flush_pending(it.strm)}function put_byte(it,g){it.pending_buf[it.pending++]=g}function putShortMSB(it,g){it.pending_buf[it.pending++]=g>>>8&255,it.pending_buf[it.pending++]=g&255}function read_buf(it,g,et,ot){var ut=it.avail_in;return ut>ot&&(ut=ot),ut===0?0:(it.avail_in-=ut,utils$5.arraySet(g,it.input,it.next_in,ut,et),it.state.wrap===1?it.adler=adler32$1(it.adler,g,ut,et):it.state.wrap===2&&(it.adler=crc32$1(it.adler,g,ut,et)),it.next_in+=ut,it.total_in+=ut,ut)}function longest_match(it,g){var et=it.max_chain_length,ot=it.strstart,ut,ct,dt=it.prev_length,ft=it.nice_match,St=it.strstart>it.w_size-MIN_LOOKAHEAD?it.strstart-(it.w_size-MIN_LOOKAHEAD):0,kt=it.window,Tt=it.w_mask,Rt=it.prev,Ft=it.strstart+MAX_MATCH,jt=kt[ot+dt-1],Bt=kt[ot+dt];it.prev_length>=it.good_match&&(et>>=2),ft>it.lookahead&&(ft=it.lookahead);do if(ut=g,!(kt[ut+dt]!==Bt||kt[ut+dt-1]!==jt||kt[ut]!==kt[ot]||kt[++ut]!==kt[ot+1])){ot+=2,ut++;do;while(kt[++ot]===kt[++ut]&&kt[++ot]===kt[++ut]&&kt[++ot]===kt[++ut]&&kt[++ot]===kt[++ut]&&kt[++ot]===kt[++ut]&&kt[++ot]===kt[++ut]&&kt[++ot]===kt[++ut]&&kt[++ot]===kt[++ut]&&ot<Ft);if(ct=MAX_MATCH-(Ft-ot),ot=Ft-MAX_MATCH,ct>dt){if(it.match_start=g,dt=ct,ct>=ft)break;jt=kt[ot+dt-1],Bt=kt[ot+dt]}}while((g=Rt[g&Tt])>St&&--et!==0);return dt<=it.lookahead?dt:it.lookahead}function fill_window(it){var g=it.w_size,et,ot,ut,ct,dt;do{if(ct=it.window_size-it.lookahead-it.strstart,it.strstart>=g+(g-MIN_LOOKAHEAD)){utils$5.arraySet(it.window,it.window,g,g,0),it.match_start-=g,it.strstart-=g,it.block_start-=g,ot=it.hash_size,et=ot;do ut=it.head[--et],it.head[et]=ut>=g?ut-g:0;while(--ot);ot=g,et=ot;do ut=it.prev[--et],it.prev[et]=ut>=g?ut-g:0;while(--ot);ct+=g}if(it.strm.avail_in===0)break;if(ot=read_buf(it.strm,it.window,it.strstart+it.lookahead,ct),it.lookahead+=ot,it.lookahead+it.insert>=MIN_MATCH)for(dt=it.strstart-it.insert,it.ins_h=it.window[dt],it.ins_h=(it.ins_h<<it.hash_shift^it.window[dt+1])&it.hash_mask;it.insert&&(it.ins_h=(it.ins_h<<it.hash_shift^it.window[dt+MIN_MATCH-1])&it.hash_mask,it.prev[dt&it.w_mask]=it.head[it.ins_h],it.head[it.ins_h]=dt,dt++,it.insert--,!(it.lookahead+it.insert<MIN_MATCH)););}while(it.lookahead<MIN_LOOKAHEAD&&it.strm.avail_in!==0)}function deflate_stored(it,g){var et=65535;for(et>it.pending_buf_size-5&&(et=it.pending_buf_size-5);;){if(it.lookahead<=1){if(fill_window(it),it.lookahead===0&&g===Z_NO_FLUSH$1)return BS_NEED_MORE;if(it.lookahead===0)break}it.strstart+=it.lookahead,it.lookahead=0;var ot=it.block_start+et;if((it.strstart===0||it.strstart>=ot)&&(it.lookahead=it.strstart-ot,it.strstart=ot,flush_block_only(it,!1),it.strm.avail_out===0)||it.strstart-it.block_start>=it.w_size-MIN_LOOKAHEAD&&(flush_block_only(it,!1),it.strm.avail_out===0))return BS_NEED_MORE}return it.insert=0,g===Z_FINISH$2?(flush_block_only(it,!0),it.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(it.strstart>it.block_start&&(flush_block_only(it,!1),it.strm.avail_out===0),BS_NEED_MORE)}function deflate_fast(it,g){for(var et,ot;;){if(it.lookahead<MIN_LOOKAHEAD){if(fill_window(it),it.lookahead<MIN_LOOKAHEAD&&g===Z_NO_FLUSH$1)return BS_NEED_MORE;if(it.lookahead===0)break}if(et=0,it.lookahead>=MIN_MATCH&&(it.ins_h=(it.ins_h<<it.hash_shift^it.window[it.strstart+MIN_MATCH-1])&it.hash_mask,et=it.prev[it.strstart&it.w_mask]=it.head[it.ins_h],it.head[it.ins_h]=it.strstart),et!==0&&it.strstart-et<=it.w_size-MIN_LOOKAHEAD&&(it.match_length=longest_match(it,et)),it.match_length>=MIN_MATCH)if(ot=trees._tr_tally(it,it.strstart-it.match_start,it.match_length-MIN_MATCH),it.lookahead-=it.match_length,it.match_length<=it.max_lazy_match&&it.lookahead>=MIN_MATCH){it.match_length--;do it.strstart++,it.ins_h=(it.ins_h<<it.hash_shift^it.window[it.strstart+MIN_MATCH-1])&it.hash_mask,et=it.prev[it.strstart&it.w_mask]=it.head[it.ins_h],it.head[it.ins_h]=it.strstart;while(--it.match_length!==0);it.strstart++}else it.strstart+=it.match_length,it.match_length=0,it.ins_h=it.window[it.strstart],it.ins_h=(it.ins_h<<it.hash_shift^it.window[it.strstart+1])&it.hash_mask;else ot=trees._tr_tally(it,0,it.window[it.strstart]),it.lookahead--,it.strstart++;if(ot&&(flush_block_only(it,!1),it.strm.avail_out===0))return BS_NEED_MORE}return it.insert=it.strstart<MIN_MATCH-1?it.strstart:MIN_MATCH-1,g===Z_FINISH$2?(flush_block_only(it,!0),it.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):it.last_lit&&(flush_block_only(it,!1),it.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(it,g){for(var et,ot,ut;;){if(it.lookahead<MIN_LOOKAHEAD){if(fill_window(it),it.lookahead<MIN_LOOKAHEAD&&g===Z_NO_FLUSH$1)return BS_NEED_MORE;if(it.lookahead===0)break}if(et=0,it.lookahead>=MIN_MATCH&&(it.ins_h=(it.ins_h<<it.hash_shift^it.window[it.strstart+MIN_MATCH-1])&it.hash_mask,et=it.prev[it.strstart&it.w_mask]=it.head[it.ins_h],it.head[it.ins_h]=it.strstart),it.prev_length=it.match_length,it.prev_match=it.match_start,it.match_length=MIN_MATCH-1,et!==0&&it.prev_length<it.max_lazy_match&&it.strstart-et<=it.w_size-MIN_LOOKAHEAD&&(it.match_length=longest_match(it,et),it.match_length<=5&&(it.strategy===Z_FILTERED||it.match_length===MIN_MATCH&&it.strstart-it.match_start>4096)&&(it.match_length=MIN_MATCH-1)),it.prev_length>=MIN_MATCH&&it.match_length<=it.prev_length){ut=it.strstart+it.lookahead-MIN_MATCH,ot=trees._tr_tally(it,it.strstart-1-it.prev_match,it.prev_length-MIN_MATCH),it.lookahead-=it.prev_length-1,it.prev_length-=2;do++it.strstart<=ut&&(it.ins_h=(it.ins_h<<it.hash_shift^it.window[it.strstart+MIN_MATCH-1])&it.hash_mask,et=it.prev[it.strstart&it.w_mask]=it.head[it.ins_h],it.head[it.ins_h]=it.strstart);while(--it.prev_length!==0);if(it.match_available=0,it.match_length=MIN_MATCH-1,it.strstart++,ot&&(flush_block_only(it,!1),it.strm.avail_out===0))return BS_NEED_MORE}else if(it.match_available){if(ot=trees._tr_tally(it,0,it.window[it.strstart-1]),ot&&flush_block_only(it,!1),it.strstart++,it.lookahead--,it.strm.avail_out===0)return BS_NEED_MORE}else it.match_available=1,it.strstart++,it.lookahead--}return it.match_available&&(ot=trees._tr_tally(it,0,it.window[it.strstart-1]),it.match_available=0),it.insert=it.strstart<MIN_MATCH-1?it.strstart:MIN_MATCH-1,g===Z_FINISH$2?(flush_block_only(it,!0),it.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):it.last_lit&&(flush_block_only(it,!1),it.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(it,g){for(var et,ot,ut,ct,dt=it.window;;){if(it.lookahead<=MAX_MATCH){if(fill_window(it),it.lookahead<=MAX_MATCH&&g===Z_NO_FLUSH$1)return BS_NEED_MORE;if(it.lookahead===0)break}if(it.match_length=0,it.lookahead>=MIN_MATCH&&it.strstart>0&&(ut=it.strstart-1,ot=dt[ut],ot===dt[++ut]&&ot===dt[++ut]&&ot===dt[++ut])){ct=it.strstart+MAX_MATCH;do;while(ot===dt[++ut]&&ot===dt[++ut]&&ot===dt[++ut]&&ot===dt[++ut]&&ot===dt[++ut]&&ot===dt[++ut]&&ot===dt[++ut]&&ot===dt[++ut]&&ut<ct);it.match_length=MAX_MATCH-(ct-ut),it.match_length>it.lookahead&&(it.match_length=it.lookahead)}if(it.match_length>=MIN_MATCH?(et=trees._tr_tally(it,1,it.match_length-MIN_MATCH),it.lookahead-=it.match_length,it.strstart+=it.match_length,it.match_length=0):(et=trees._tr_tally(it,0,it.window[it.strstart]),it.lookahead--,it.strstart++),et&&(flush_block_only(it,!1),it.strm.avail_out===0))return BS_NEED_MORE}return it.insert=0,g===Z_FINISH$2?(flush_block_only(it,!0),it.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):it.last_lit&&(flush_block_only(it,!1),it.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(it,g){for(var et;;){if(it.lookahead===0&&(fill_window(it),it.lookahead===0)){if(g===Z_NO_FLUSH$1)return BS_NEED_MORE;break}if(it.match_length=0,et=trees._tr_tally(it,0,it.window[it.strstart]),it.lookahead--,it.strstart++,et&&(flush_block_only(it,!1),it.strm.avail_out===0))return BS_NEED_MORE}return it.insert=0,g===Z_FINISH$2?(flush_block_only(it,!0),it.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):it.last_lit&&(flush_block_only(it,!1),it.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(it,g,et,ot,ut){this.good_length=it,this.max_lazy=g,this.nice_length=et,this.max_chain=ot,this.func=ut}var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(it){it.window_size=2*it.w_size,zero(it.head),it.max_lazy_match=configuration_table[it.level].max_lazy,it.good_match=configuration_table[it.level].good_length,it.nice_match=configuration_table[it.level].nice_length,it.max_chain_length=configuration_table[it.level].max_chain,it.strstart=0,it.block_start=0,it.lookahead=0,it.insert=0,it.match_length=it.prev_length=MIN_MATCH-1,it.match_available=0,it.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils$5.Buf16(HEAP_SIZE*2),this.dyn_dtree=new utils$5.Buf16((2*D_CODES+1)*2),this.bl_tree=new utils$5.Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils$5.Buf16(MAX_BITS+1),this.heap=new utils$5.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils$5.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(it){var g;return!it||!it.state?err(it,Z_STREAM_ERROR$1):(it.total_in=it.total_out=0,it.data_type=Z_UNKNOWN,g=it.state,g.pending=0,g.pending_out=0,g.wrap<0&&(g.wrap=-g.wrap),g.status=g.wrap?INIT_STATE:BUSY_STATE,it.adler=g.wrap===2?0:1,g.last_flush=Z_NO_FLUSH$1,trees._tr_init(g),Z_OK$2)}function deflateReset(it){var g=deflateResetKeep(it);return g===Z_OK$2&&lm_init(it.state),g}function deflateSetHeader(it,g){return!it||!it.state||it.state.wrap!==2?Z_STREAM_ERROR$1:(it.state.gzhead=g,Z_OK$2)}function deflateInit2(it,g,et,ot,ut,ct){if(!it)return Z_STREAM_ERROR$1;var dt=1;if(g===Z_DEFAULT_COMPRESSION$1&&(g=6),ot<0?(dt=0,ot=-ot):ot>15&&(dt=2,ot-=16),ut<1||ut>MAX_MEM_LEVEL||et!==Z_DEFLATED$2||ot<8||ot>15||g<0||g>9||ct<0||ct>Z_FIXED)return err(it,Z_STREAM_ERROR$1);ot===8&&(ot=9);var ft=new DeflateState;return it.state=ft,ft.strm=it,ft.wrap=dt,ft.gzhead=null,ft.w_bits=ot,ft.w_size=1<<ft.w_bits,ft.w_mask=ft.w_size-1,ft.hash_bits=ut+7,ft.hash_size=1<<ft.hash_bits,ft.hash_mask=ft.hash_size-1,ft.hash_shift=~~((ft.hash_bits+MIN_MATCH-1)/MIN_MATCH),ft.window=new utils$5.Buf8(ft.w_size*2),ft.head=new utils$5.Buf16(ft.hash_size),ft.prev=new utils$5.Buf16(ft.w_size),ft.lit_bufsize=1<<ut+6,ft.pending_buf_size=ft.lit_bufsize*4,ft.pending_buf=new utils$5.Buf8(ft.pending_buf_size),ft.d_buf=1*ft.lit_bufsize,ft.l_buf=(1+2)*ft.lit_bufsize,ft.level=g,ft.strategy=ct,ft.method=et,deflateReset(it)}function deflateInit(it,g){return deflateInit2(it,g,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1)}function deflate$2(it,g){var et,ot,ut,ct;if(!it||!it.state||g>Z_BLOCK$1||g<0)return it?err(it,Z_STREAM_ERROR$1):Z_STREAM_ERROR$1;if(ot=it.state,!it.output||!it.input&&it.avail_in!==0||ot.status===FINISH_STATE&&g!==Z_FINISH$2)return err(it,it.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$1);if(ot.strm=it,et=ot.last_flush,ot.last_flush=g,ot.status===INIT_STATE)if(ot.wrap===2)it.adler=0,put_byte(ot,31),put_byte(ot,139),put_byte(ot,8),ot.gzhead?(put_byte(ot,(ot.gzhead.text?1:0)+(ot.gzhead.hcrc?2:0)+(ot.gzhead.extra?4:0)+(ot.gzhead.name?8:0)+(ot.gzhead.comment?16:0)),put_byte(ot,ot.gzhead.time&255),put_byte(ot,ot.gzhead.time>>8&255),put_byte(ot,ot.gzhead.time>>16&255),put_byte(ot,ot.gzhead.time>>24&255),put_byte(ot,ot.level===9?2:ot.strategy>=Z_HUFFMAN_ONLY||ot.level<2?4:0),put_byte(ot,ot.gzhead.os&255),ot.gzhead.extra&&ot.gzhead.extra.length&&(put_byte(ot,ot.gzhead.extra.length&255),put_byte(ot,ot.gzhead.extra.length>>8&255)),ot.gzhead.hcrc&&(it.adler=crc32$1(it.adler,ot.pending_buf,ot.pending,0)),ot.gzindex=0,ot.status=EXTRA_STATE):(put_byte(ot,0),put_byte(ot,0),put_byte(ot,0),put_byte(ot,0),put_byte(ot,0),put_byte(ot,ot.level===9?2:ot.strategy>=Z_HUFFMAN_ONLY||ot.level<2?4:0),put_byte(ot,OS_CODE),ot.status=BUSY_STATE);else{var dt=Z_DEFLATED$2+(ot.w_bits-8<<4)<<8,ft=-1;ot.strategy>=Z_HUFFMAN_ONLY||ot.level<2?ft=0:ot.level<6?ft=1:ot.level===6?ft=2:ft=3,dt|=ft<<6,ot.strstart!==0&&(dt|=PRESET_DICT),dt+=31-dt%31,ot.status=BUSY_STATE,putShortMSB(ot,dt),ot.strstart!==0&&(putShortMSB(ot,it.adler>>>16),putShortMSB(ot,it.adler&65535)),it.adler=1}if(ot.status===EXTRA_STATE)if(ot.gzhead.extra){for(ut=ot.pending;ot.gzindex<(ot.gzhead.extra.length&65535)&&!(ot.pending===ot.pending_buf_size&&(ot.gzhead.hcrc&&ot.pending>ut&&(it.adler=crc32$1(it.adler,ot.pending_buf,ot.pending-ut,ut)),flush_pending(it),ut=ot.pending,ot.pending===ot.pending_buf_size));)put_byte(ot,ot.gzhead.extra[ot.gzindex]&255),ot.gzindex++;ot.gzhead.hcrc&&ot.pending>ut&&(it.adler=crc32$1(it.adler,ot.pending_buf,ot.pending-ut,ut)),ot.gzindex===ot.gzhead.extra.length&&(ot.gzindex=0,ot.status=NAME_STATE)}else ot.status=NAME_STATE;if(ot.status===NAME_STATE)if(ot.gzhead.name){ut=ot.pending;do{if(ot.pending===ot.pending_buf_size&&(ot.gzhead.hcrc&&ot.pending>ut&&(it.adler=crc32$1(it.adler,ot.pending_buf,ot.pending-ut,ut)),flush_pending(it),ut=ot.pending,ot.pending===ot.pending_buf_size)){ct=1;break}ot.gzindex<ot.gzhead.name.length?ct=ot.gzhead.name.charCodeAt(ot.gzindex++)&255:ct=0,put_byte(ot,ct)}while(ct!==0);ot.gzhead.hcrc&&ot.pending>ut&&(it.adler=crc32$1(it.adler,ot.pending_buf,ot.pending-ut,ut)),ct===0&&(ot.gzindex=0,ot.status=COMMENT_STATE)}else ot.status=COMMENT_STATE;if(ot.status===COMMENT_STATE)if(ot.gzhead.comment){ut=ot.pending;do{if(ot.pending===ot.pending_buf_size&&(ot.gzhead.hcrc&&ot.pending>ut&&(it.adler=crc32$1(it.adler,ot.pending_buf,ot.pending-ut,ut)),flush_pending(it),ut=ot.pending,ot.pending===ot.pending_buf_size)){ct=1;break}ot.gzindex<ot.gzhead.comment.length?ct=ot.gzhead.comment.charCodeAt(ot.gzindex++)&255:ct=0,put_byte(ot,ct)}while(ct!==0);ot.gzhead.hcrc&&ot.pending>ut&&(it.adler=crc32$1(it.adler,ot.pending_buf,ot.pending-ut,ut)),ct===0&&(ot.status=HCRC_STATE)}else ot.status=HCRC_STATE;if(ot.status===HCRC_STATE&&(ot.gzhead.hcrc?(ot.pending+2>ot.pending_buf_size&&flush_pending(it),ot.pending+2<=ot.pending_buf_size&&(put_byte(ot,it.adler&255),put_byte(ot,it.adler>>8&255),it.adler=0,ot.status=BUSY_STATE)):ot.status=BUSY_STATE),ot.pending!==0){if(flush_pending(it),it.avail_out===0)return ot.last_flush=-1,Z_OK$2}else if(it.avail_in===0&&rank(g)<=rank(et)&&g!==Z_FINISH$2)return err(it,Z_BUF_ERROR$1);if(ot.status===FINISH_STATE&&it.avail_in!==0)return err(it,Z_BUF_ERROR$1);if(it.avail_in!==0||ot.lookahead!==0||g!==Z_NO_FLUSH$1&&ot.status!==FINISH_STATE){var St=ot.strategy===Z_HUFFMAN_ONLY?deflate_huff(ot,g):ot.strategy===Z_RLE?deflate_rle(ot,g):configuration_table[ot.level].func(ot,g);if((St===BS_FINISH_STARTED||St===BS_FINISH_DONE)&&(ot.status=FINISH_STATE),St===BS_NEED_MORE||St===BS_FINISH_STARTED)return it.avail_out===0&&(ot.last_flush=-1),Z_OK$2;if(St===BS_BLOCK_DONE&&(g===Z_PARTIAL_FLUSH?trees._tr_align(ot):g!==Z_BLOCK$1&&(trees._tr_stored_block(ot,0,0,!1),g===Z_FULL_FLUSH&&(zero(ot.head),ot.lookahead===0&&(ot.strstart=0,ot.block_start=0,ot.insert=0))),flush_pending(it),it.avail_out===0))return ot.last_flush=-1,Z_OK$2}return g!==Z_FINISH$2?Z_OK$2:ot.wrap<=0?Z_STREAM_END$2:(ot.wrap===2?(put_byte(ot,it.adler&255),put_byte(ot,it.adler>>8&255),put_byte(ot,it.adler>>16&255),put_byte(ot,it.adler>>24&255),put_byte(ot,it.total_in&255),put_byte(ot,it.total_in>>8&255),put_byte(ot,it.total_in>>16&255),put_byte(ot,it.total_in>>24&255)):(putShortMSB(ot,it.adler>>>16),putShortMSB(ot,it.adler&65535)),flush_pending(it),ot.wrap>0&&(ot.wrap=-ot.wrap),ot.pending!==0?Z_OK$2:Z_STREAM_END$2)}function deflateEnd(it){var g;return!it||!it.state?Z_STREAM_ERROR$1:(g=it.state.status,g!==INIT_STATE&&g!==EXTRA_STATE&&g!==NAME_STATE&&g!==COMMENT_STATE&&g!==HCRC_STATE&&g!==BUSY_STATE&&g!==FINISH_STATE?err(it,Z_STREAM_ERROR$1):(it.state=null,g===BUSY_STATE?err(it,Z_DATA_ERROR$1):Z_OK$2))}function deflateSetDictionary(it,g){var et=g.length,ot,ut,ct,dt,ft,St,kt,Tt;if(!it||!it.state||(ot=it.state,dt=ot.wrap,dt===2||dt===1&&ot.status!==INIT_STATE||ot.lookahead))return Z_STREAM_ERROR$1;for(dt===1&&(it.adler=adler32$1(it.adler,g,et,0)),ot.wrap=0,et>=ot.w_size&&(dt===0&&(zero(ot.head),ot.strstart=0,ot.block_start=0,ot.insert=0),Tt=new utils$5.Buf8(ot.w_size),utils$5.arraySet(Tt,g,et-ot.w_size,ot.w_size,0),g=Tt,et=ot.w_size),ft=it.avail_in,St=it.next_in,kt=it.input,it.avail_in=et,it.next_in=0,it.input=g,fill_window(ot);ot.lookahead>=MIN_MATCH;){ut=ot.strstart,ct=ot.lookahead-(MIN_MATCH-1);do ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[ut+MIN_MATCH-1])&ot.hash_mask,ot.prev[ut&ot.w_mask]=ot.head[ot.ins_h],ot.head[ot.ins_h]=ut,ut++;while(--ct);ot.strstart=ut,ot.lookahead=MIN_MATCH-1,fill_window(ot)}return ot.strstart+=ot.lookahead,ot.block_start=ot.strstart,ot.insert=ot.lookahead,ot.lookahead=0,ot.match_length=ot.prev_length=MIN_MATCH-1,ot.match_available=0,it.next_in=St,it.input=kt,it.avail_in=ft,ot.wrap=dt,Z_OK$2}deflate$3.deflateInit=deflateInit;deflate$3.deflateInit2=deflateInit2;deflate$3.deflateReset=deflateReset;deflate$3.deflateResetKeep=deflateResetKeep;deflate$3.deflateSetHeader=deflateSetHeader;deflate$3.deflate=deflate$2;deflate$3.deflateEnd=deflateEnd;deflate$3.deflateSetDictionary=deflateSetDictionary;deflate$3.deflateInfo="pako deflate (from Nodeca project)";var strings$2={},utils$4=common,STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(it){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(it){STR_APPLY_UIA_OK=!1}var _utf8len=new utils$4.Buf8(256);for(var q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1;strings$2.string2buf=function(it){var g,et,ot,ut,ct,dt=it.length,ft=0;for(ut=0;ut<dt;ut++)et=it.charCodeAt(ut),(et&64512)===55296&&ut+1<dt&&(ot=it.charCodeAt(ut+1),(ot&64512)===56320&&(et=65536+(et-55296<<10)+(ot-56320),ut++)),ft+=et<128?1:et<2048?2:et<65536?3:4;for(g=new utils$4.Buf8(ft),ct=0,ut=0;ct<ft;ut++)et=it.charCodeAt(ut),(et&64512)===55296&&ut+1<dt&&(ot=it.charCodeAt(ut+1),(ot&64512)===56320&&(et=65536+(et-55296<<10)+(ot-56320),ut++)),et<128?g[ct++]=et:et<2048?(g[ct++]=192|et>>>6,g[ct++]=128|et&63):et<65536?(g[ct++]=224|et>>>12,g[ct++]=128|et>>>6&63,g[ct++]=128|et&63):(g[ct++]=240|et>>>18,g[ct++]=128|et>>>12&63,g[ct++]=128|et>>>6&63,g[ct++]=128|et&63);return g};function buf2binstring(it,g){if(g<65534&&(it.subarray&&STR_APPLY_UIA_OK||!it.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils$4.shrinkBuf(it,g));for(var et="",ot=0;ot<g;ot++)et+=String.fromCharCode(it[ot]);return et}strings$2.buf2binstring=function(it){return buf2binstring(it,it.length)};strings$2.binstring2buf=function(it){for(var g=new utils$4.Buf8(it.length),et=0,ot=g.length;et<ot;et++)g[et]=it.charCodeAt(et);return g};strings$2.buf2string=function(it,g){var et,ot,ut,ct,dt=g||it.length,ft=new Array(dt*2);for(ot=0,et=0;et<dt;){if(ut=it[et++],ut<128){ft[ot++]=ut;continue}if(ct=_utf8len[ut],ct>4){ft[ot++]=65533,et+=ct-1;continue}for(ut&=ct===2?31:ct===3?15:7;ct>1&&et<dt;)ut=ut<<6|it[et++]&63,ct--;if(ct>1){ft[ot++]=65533;continue}ut<65536?ft[ot++]=ut:(ut-=65536,ft[ot++]=55296|ut>>10&1023,ft[ot++]=56320|ut&1023)}return buf2binstring(ft,ot)};strings$2.utf8border=function(it,g){var et;for(g=g||it.length,g>it.length&&(g=it.length),et=g-1;et>=0&&(it[et]&192)===128;)et--;return et<0||et===0?g:et+_utf8len[it[et]]>g?et:g};function ZStream$2(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream$2,zlib_deflate=deflate$3,utils$3=common,strings$1=strings$2,msg$1=messages,ZStream$1=zstream,toString$1=Object.prototype.toString,Z_NO_FLUSH=0,Z_FINISH$1=4,Z_OK$1=0,Z_STREAM_END$1=1,Z_SYNC_FLUSH=2,Z_DEFAULT_COMPRESSION=-1,Z_DEFAULT_STRATEGY=0,Z_DEFLATED$1=8;function Deflate(it){if(!(this instanceof Deflate))return new Deflate(it);this.options=utils$3.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY,to:""},it||{});var g=this.options;g.raw&&g.windowBits>0?g.windowBits=-g.windowBits:g.gzip&&g.windowBits>0&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream$1,this.strm.avail_out=0;var et=zlib_deflate.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(et!==Z_OK$1)throw new Error(msg$1[et]);if(g.header&&zlib_deflate.deflateSetHeader(this.strm,g.header),g.dictionary){var ot;if(typeof g.dictionary=="string"?ot=strings$1.string2buf(g.dictionary):toString$1.call(g.dictionary)==="[object ArrayBuffer]"?ot=new Uint8Array(g.dictionary):ot=g.dictionary,et=zlib_deflate.deflateSetDictionary(this.strm,ot),et!==Z_OK$1)throw new Error(msg$1[et]);this._dict_set=!0}}Deflate.prototype.push=function(it,g){var et=this.strm,ot=this.options.chunkSize,ut,ct;if(this.ended)return!1;ct=g===~~g?g:g===!0?Z_FINISH$1:Z_NO_FLUSH,typeof it=="string"?et.input=strings$1.string2buf(it):toString$1.call(it)==="[object ArrayBuffer]"?et.input=new Uint8Array(it):et.input=it,et.next_in=0,et.avail_in=et.input.length;do{if(et.avail_out===0&&(et.output=new utils$3.Buf8(ot),et.next_out=0,et.avail_out=ot),ut=zlib_deflate.deflate(et,ct),ut!==Z_STREAM_END$1&&ut!==Z_OK$1)return this.onEnd(ut),this.ended=!0,!1;(et.avail_out===0||et.avail_in===0&&(ct===Z_FINISH$1||ct===Z_SYNC_FLUSH))&&(this.options.to==="string"?this.onData(strings$1.buf2binstring(utils$3.shrinkBuf(et.output,et.next_out))):this.onData(utils$3.shrinkBuf(et.output,et.next_out)))}while((et.avail_in>0||et.avail_out===0)&&ut!==Z_STREAM_END$1);return ct===Z_FINISH$1?(ut=zlib_deflate.deflateEnd(this.strm),this.onEnd(ut),this.ended=!0,ut===Z_OK$1):(ct===Z_SYNC_FLUSH&&(this.onEnd(Z_OK$1),et.avail_out=0),!0)};Deflate.prototype.onData=function(it){this.chunks.push(it)};Deflate.prototype.onEnd=function(it){it===Z_OK$1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=utils$3.flattenChunks(this.chunks)),this.chunks=[],this.err=it,this.msg=this.strm.msg};function deflate$1(it,g){var et=new Deflate(g);if(et.push(it,!0),et.err)throw et.msg||msg$1[et.err];return et.result}function deflateRaw(it,g){return g=g||{},g.raw=!0,deflate$1(it,g)}function gzip(it,g){return g=g||{},g.gzip=!0,deflate$1(it,g)}deflate$4.Deflate=Deflate;deflate$4.deflate=deflate$1;deflate$4.deflateRaw=deflateRaw;deflate$4.gzip=gzip;var inflate$4={},inflate$3={},BAD$1=30,TYPE$1=12,inffast=function it(g,et){var ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht,Ut,Kt,Yt,er,ar,ir,lr,cr,vr,xr,yr;ot=g.state,ut=g.next_in,xr=g.input,ct=ut+(g.avail_in-5),dt=g.next_out,yr=g.output,ft=dt-(et-g.avail_out),St=dt+(g.avail_out-257),kt=ot.dmax,Tt=ot.wsize,Rt=ot.whave,Ft=ot.wnext,jt=ot.window,Bt=ot.hold,zt=ot.bits,Ht=ot.lencode,Ut=ot.distcode,Kt=(1<<ot.lenbits)-1,Yt=(1<<ot.distbits)-1;e:do{zt<15&&(Bt+=xr[ut++]<<zt,zt+=8,Bt+=xr[ut++]<<zt,zt+=8),er=Ht[Bt&Kt];t:for(;;){if(ar=er>>>24,Bt>>>=ar,zt-=ar,ar=er>>>16&255,ar===0)yr[dt++]=er&65535;else if(ar&16){ir=er&65535,ar&=15,ar&&(zt<ar&&(Bt+=xr[ut++]<<zt,zt+=8),ir+=Bt&(1<<ar)-1,Bt>>>=ar,zt-=ar),zt<15&&(Bt+=xr[ut++]<<zt,zt+=8,Bt+=xr[ut++]<<zt,zt+=8),er=Ut[Bt&Yt];r:for(;;){if(ar=er>>>24,Bt>>>=ar,zt-=ar,ar=er>>>16&255,ar&16){if(lr=er&65535,ar&=15,zt<ar&&(Bt+=xr[ut++]<<zt,zt+=8,zt<ar&&(Bt+=xr[ut++]<<zt,zt+=8)),lr+=Bt&(1<<ar)-1,lr>kt){g.msg="invalid distance too far back",ot.mode=BAD$1;break e}if(Bt>>>=ar,zt-=ar,ar=dt-ft,lr>ar){if(ar=lr-ar,ar>Rt&&ot.sane){g.msg="invalid distance too far back",ot.mode=BAD$1;break e}if(cr=0,vr=jt,Ft===0){if(cr+=Tt-ar,ar<ir){ir-=ar;do yr[dt++]=jt[cr++];while(--ar);cr=dt-lr,vr=yr}}else if(Ft<ar){if(cr+=Tt+Ft-ar,ar-=Ft,ar<ir){ir-=ar;do yr[dt++]=jt[cr++];while(--ar);if(cr=0,Ft<ir){ar=Ft,ir-=ar;do yr[dt++]=jt[cr++];while(--ar);cr=dt-lr,vr=yr}}}else if(cr+=Ft-ar,ar<ir){ir-=ar;do yr[dt++]=jt[cr++];while(--ar);cr=dt-lr,vr=yr}for(;ir>2;)yr[dt++]=vr[cr++],yr[dt++]=vr[cr++],yr[dt++]=vr[cr++],ir-=3;ir&&(yr[dt++]=vr[cr++],ir>1&&(yr[dt++]=vr[cr++]))}else{cr=dt-lr;do yr[dt++]=yr[cr++],yr[dt++]=yr[cr++],yr[dt++]=yr[cr++],ir-=3;while(ir>2);ir&&(yr[dt++]=yr[cr++],ir>1&&(yr[dt++]=yr[cr++]))}}else if(ar&64){g.msg="invalid distance code",ot.mode=BAD$1;break e}else{er=Ut[(er&65535)+(Bt&(1<<ar)-1)];continue r}break}}else if(ar&64)if(ar&32){ot.mode=TYPE$1;break e}else{g.msg="invalid literal/length code",ot.mode=BAD$1;break e}else{er=Ht[(er&65535)+(Bt&(1<<ar)-1)];continue t}break}}while(ut<ct&&dt<St);ir=zt>>3,ut-=ir,zt-=ir<<3,Bt&=(1<<zt)-1,g.next_in=ut,g.next_out=dt,g.avail_in=ut<ct?5+(ct-ut):5-(ut-ct),g.avail_out=dt<St?257+(St-dt):257-(dt-St),ot.hold=Bt,ot.bits=zt},utils$2=common,MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],inftrees=function it(g,et,ot,ut,ct,dt,ft,St){var kt=St.bits,Tt=0,Rt=0,Ft=0,jt=0,Bt=0,zt=0,Ht=0,Ut=0,Kt=0,Yt=0,er,ar,ir,lr,cr,vr=null,xr=0,yr,Sr=new utils$2.Buf16(MAXBITS+1),kr=new utils$2.Buf16(MAXBITS+1),Pr=null,Or=0,hr,Tr,mr;for(Tt=0;Tt<=MAXBITS;Tt++)Sr[Tt]=0;for(Rt=0;Rt<ut;Rt++)Sr[et[ot+Rt]]++;for(Bt=kt,jt=MAXBITS;jt>=1&&Sr[jt]===0;jt--);if(Bt>jt&&(Bt=jt),jt===0)return ct[dt++]=1<<24|64<<16|0,ct[dt++]=1<<24|64<<16|0,St.bits=1,0;for(Ft=1;Ft<jt&&Sr[Ft]===0;Ft++);for(Bt<Ft&&(Bt=Ft),Ut=1,Tt=1;Tt<=MAXBITS;Tt++)if(Ut<<=1,Ut-=Sr[Tt],Ut<0)return-1;if(Ut>0&&(g===CODES$1||jt!==1))return-1;for(kr[1]=0,Tt=1;Tt<MAXBITS;Tt++)kr[Tt+1]=kr[Tt]+Sr[Tt];for(Rt=0;Rt<ut;Rt++)et[ot+Rt]!==0&&(ft[kr[et[ot+Rt]]++]=Rt);if(g===CODES$1?(vr=Pr=ft,yr=19):g===LENS$1?(vr=lbase,xr-=257,Pr=lext,Or-=257,yr=256):(vr=dbase,Pr=dext,yr=-1),Yt=0,Rt=0,Tt=Ft,cr=dt,zt=Bt,Ht=0,ir=-1,Kt=1<<Bt,lr=Kt-1,g===LENS$1&&Kt>ENOUGH_LENS$1||g===DISTS$1&&Kt>ENOUGH_DISTS$1)return 1;for(;;){hr=Tt-Ht,ft[Rt]<yr?(Tr=0,mr=ft[Rt]):ft[Rt]>yr?(Tr=Pr[Or+ft[Rt]],mr=vr[xr+ft[Rt]]):(Tr=32+64,mr=0),er=1<<Tt-Ht,ar=1<<zt,Ft=ar;do ar-=er,ct[cr+(Yt>>Ht)+ar]=hr<<24|Tr<<16|mr|0;while(ar!==0);for(er=1<<Tt-1;Yt&er;)er>>=1;if(er!==0?(Yt&=er-1,Yt+=er):Yt=0,Rt++,--Sr[Tt]===0){if(Tt===jt)break;Tt=et[ot+ft[Rt]]}if(Tt>Bt&&(Yt&lr)!==ir){for(Ht===0&&(Ht=Bt),cr+=Ft,zt=Tt-Ht,Ut=1<<zt;zt+Ht<jt&&(Ut-=Sr[zt+Ht],!(Ut<=0));)zt++,Ut<<=1;if(Kt+=1<<zt,g===LENS$1&&Kt>ENOUGH_LENS$1||g===DISTS$1&&Kt>ENOUGH_DISTS$1)return 1;ir=Yt&lr,ct[ir]=Bt<<24|zt<<16|cr-dt|0}}return Yt!==0&&(ct[cr+Yt]=Tt-Ht<<24|64<<16|0),St.bits=Bt,0},utils$1=common,adler32=adler32_1,crc32=crc32_1,inflate_fast=inffast,inflate_table=inftrees,CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS;function zswap32(it){return(it>>>24&255)+(it>>>8&65280)+((it&65280)<<8)+((it&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils$1.Buf16(320),this.work=new utils$1.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(it){var g;return!it||!it.state?Z_STREAM_ERROR:(g=it.state,it.total_in=it.total_out=g.total=0,it.msg="",g.wrap&&(it.adler=g.wrap&1),g.mode=HEAD,g.last=0,g.havedict=0,g.dmax=32768,g.head=null,g.hold=0,g.bits=0,g.lencode=g.lendyn=new utils$1.Buf32(ENOUGH_LENS),g.distcode=g.distdyn=new utils$1.Buf32(ENOUGH_DISTS),g.sane=1,g.back=-1,Z_OK)}function inflateReset(it){var g;return!it||!it.state?Z_STREAM_ERROR:(g=it.state,g.wsize=0,g.whave=0,g.wnext=0,inflateResetKeep(it))}function inflateReset2(it,g){var et,ot;return!it||!it.state||(ot=it.state,g<0?(et=0,g=-g):(et=(g>>4)+1,g<48&&(g&=15)),g&&(g<8||g>15))?Z_STREAM_ERROR:(ot.window!==null&&ot.wbits!==g&&(ot.window=null),ot.wrap=et,ot.wbits=g,inflateReset(it))}function inflateInit2(it,g){var et,ot;return it?(ot=new InflateState,it.state=ot,ot.window=null,et=inflateReset2(it,g),et!==Z_OK&&(it.state=null),et):Z_STREAM_ERROR}function inflateInit(it){return inflateInit2(it,DEF_WBITS)}var virgin=!0,lenfix,distfix;function fixedtables(it){if(virgin){var g;for(lenfix=new utils$1.Buf32(512),distfix=new utils$1.Buf32(32),g=0;g<144;)it.lens[g++]=8;for(;g<256;)it.lens[g++]=9;for(;g<280;)it.lens[g++]=7;for(;g<288;)it.lens[g++]=8;for(inflate_table(LENS,it.lens,0,288,lenfix,0,it.work,{bits:9}),g=0;g<32;)it.lens[g++]=5;inflate_table(DISTS,it.lens,0,32,distfix,0,it.work,{bits:5}),virgin=!1}it.lencode=lenfix,it.lenbits=9,it.distcode=distfix,it.distbits=5}function updatewindow(it,g,et,ot){var ut,ct=it.state;return ct.window===null&&(ct.wsize=1<<ct.wbits,ct.wnext=0,ct.whave=0,ct.window=new utils$1.Buf8(ct.wsize)),ot>=ct.wsize?(utils$1.arraySet(ct.window,g,et-ct.wsize,ct.wsize,0),ct.wnext=0,ct.whave=ct.wsize):(ut=ct.wsize-ct.wnext,ut>ot&&(ut=ot),utils$1.arraySet(ct.window,g,et-ot,ut,ct.wnext),ot-=ut,ot?(utils$1.arraySet(ct.window,g,et-ot,ot,0),ct.wnext=ot,ct.whave=ct.wsize):(ct.wnext+=ut,ct.wnext===ct.wsize&&(ct.wnext=0),ct.whave<ct.wsize&&(ct.whave+=ut))),0}function inflate$2(it,g){var et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht=0,Ut,Kt,Yt,er,ar,ir,lr,cr,vr=new utils$1.Buf8(4),xr,yr,Sr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!it||!it.state||!it.output||!it.input&&it.avail_in!==0)return Z_STREAM_ERROR;et=it.state,et.mode===TYPE&&(et.mode=TYPEDO),dt=it.next_out,ut=it.output,St=it.avail_out,ct=it.next_in,ot=it.input,ft=it.avail_in,kt=et.hold,Tt=et.bits,Rt=ft,Ft=St,cr=Z_OK;e:for(;;)switch(et.mode){case HEAD:if(et.wrap===0){et.mode=TYPEDO;break}for(;Tt<16;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(et.wrap&2&&kt===35615){et.check=0,vr[0]=kt&255,vr[1]=kt>>>8&255,et.check=crc32(et.check,vr,2,0),kt=0,Tt=0,et.mode=FLAGS;break}if(et.flags=0,et.head&&(et.head.done=!1),!(et.wrap&1)||(((kt&255)<<8)+(kt>>8))%31){it.msg="incorrect header check",et.mode=BAD;break}if((kt&15)!==Z_DEFLATED){it.msg="unknown compression method",et.mode=BAD;break}if(kt>>>=4,Tt-=4,lr=(kt&15)+8,et.wbits===0)et.wbits=lr;else if(lr>et.wbits){it.msg="invalid window size",et.mode=BAD;break}et.dmax=1<<lr,it.adler=et.check=1,et.mode=kt&512?DICTID:TYPE,kt=0,Tt=0;break;case FLAGS:for(;Tt<16;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(et.flags=kt,(et.flags&255)!==Z_DEFLATED){it.msg="unknown compression method",et.mode=BAD;break}if(et.flags&57344){it.msg="unknown header flags set",et.mode=BAD;break}et.head&&(et.head.text=kt>>8&1),et.flags&512&&(vr[0]=kt&255,vr[1]=kt>>>8&255,et.check=crc32(et.check,vr,2,0)),kt=0,Tt=0,et.mode=TIME;case TIME:for(;Tt<32;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}et.head&&(et.head.time=kt),et.flags&512&&(vr[0]=kt&255,vr[1]=kt>>>8&255,vr[2]=kt>>>16&255,vr[3]=kt>>>24&255,et.check=crc32(et.check,vr,4,0)),kt=0,Tt=0,et.mode=OS;case OS:for(;Tt<16;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}et.head&&(et.head.xflags=kt&255,et.head.os=kt>>8),et.flags&512&&(vr[0]=kt&255,vr[1]=kt>>>8&255,et.check=crc32(et.check,vr,2,0)),kt=0,Tt=0,et.mode=EXLEN;case EXLEN:if(et.flags&1024){for(;Tt<16;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}et.length=kt,et.head&&(et.head.extra_len=kt),et.flags&512&&(vr[0]=kt&255,vr[1]=kt>>>8&255,et.check=crc32(et.check,vr,2,0)),kt=0,Tt=0}else et.head&&(et.head.extra=null);et.mode=EXTRA;case EXTRA:if(et.flags&1024&&(jt=et.length,jt>ft&&(jt=ft),jt&&(et.head&&(lr=et.head.extra_len-et.length,et.head.extra||(et.head.extra=new Array(et.head.extra_len)),utils$1.arraySet(et.head.extra,ot,ct,jt,lr)),et.flags&512&&(et.check=crc32(et.check,ot,jt,ct)),ft-=jt,ct+=jt,et.length-=jt),et.length))break e;et.length=0,et.mode=NAME;case NAME:if(et.flags&2048){if(ft===0)break e;jt=0;do lr=ot[ct+jt++],et.head&&lr&&et.length<65536&&(et.head.name+=String.fromCharCode(lr));while(lr&&jt<ft);if(et.flags&512&&(et.check=crc32(et.check,ot,jt,ct)),ft-=jt,ct+=jt,lr)break e}else et.head&&(et.head.name=null);et.length=0,et.mode=COMMENT;case COMMENT:if(et.flags&4096){if(ft===0)break e;jt=0;do lr=ot[ct+jt++],et.head&&lr&&et.length<65536&&(et.head.comment+=String.fromCharCode(lr));while(lr&&jt<ft);if(et.flags&512&&(et.check=crc32(et.check,ot,jt,ct)),ft-=jt,ct+=jt,lr)break e}else et.head&&(et.head.comment=null);et.mode=HCRC;case HCRC:if(et.flags&512){for(;Tt<16;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(kt!==(et.check&65535)){it.msg="header crc mismatch",et.mode=BAD;break}kt=0,Tt=0}et.head&&(et.head.hcrc=et.flags>>9&1,et.head.done=!0),it.adler=et.check=0,et.mode=TYPE;break;case DICTID:for(;Tt<32;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}it.adler=et.check=zswap32(kt),kt=0,Tt=0,et.mode=DICT;case DICT:if(et.havedict===0)return it.next_out=dt,it.avail_out=St,it.next_in=ct,it.avail_in=ft,et.hold=kt,et.bits=Tt,Z_NEED_DICT;it.adler=et.check=1,et.mode=TYPE;case TYPE:if(g===Z_BLOCK||g===Z_TREES)break e;case TYPEDO:if(et.last){kt>>>=Tt&7,Tt-=Tt&7,et.mode=CHECK;break}for(;Tt<3;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}switch(et.last=kt&1,kt>>>=1,Tt-=1,kt&3){case 0:et.mode=STORED;break;case 1:if(fixedtables(et),et.mode=LEN_,g===Z_TREES){kt>>>=2,Tt-=2;break e}break;case 2:et.mode=TABLE;break;case 3:it.msg="invalid block type",et.mode=BAD}kt>>>=2,Tt-=2;break;case STORED:for(kt>>>=Tt&7,Tt-=Tt&7;Tt<32;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if((kt&65535)!==(kt>>>16^65535)){it.msg="invalid stored block lengths",et.mode=BAD;break}if(et.length=kt&65535,kt=0,Tt=0,et.mode=COPY_,g===Z_TREES)break e;case COPY_:et.mode=COPY;case COPY:if(jt=et.length,jt){if(jt>ft&&(jt=ft),jt>St&&(jt=St),jt===0)break e;utils$1.arraySet(ut,ot,ct,jt,dt),ft-=jt,ct+=jt,St-=jt,dt+=jt,et.length-=jt;break}et.mode=TYPE;break;case TABLE:for(;Tt<14;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(et.nlen=(kt&31)+257,kt>>>=5,Tt-=5,et.ndist=(kt&31)+1,kt>>>=5,Tt-=5,et.ncode=(kt&15)+4,kt>>>=4,Tt-=4,et.nlen>286||et.ndist>30){it.msg="too many length or distance symbols",et.mode=BAD;break}et.have=0,et.mode=LENLENS;case LENLENS:for(;et.have<et.ncode;){for(;Tt<3;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}et.lens[Sr[et.have++]]=kt&7,kt>>>=3,Tt-=3}for(;et.have<19;)et.lens[Sr[et.have++]]=0;if(et.lencode=et.lendyn,et.lenbits=7,xr={bits:et.lenbits},cr=inflate_table(CODES,et.lens,0,19,et.lencode,0,et.work,xr),et.lenbits=xr.bits,cr){it.msg="invalid code lengths set",et.mode=BAD;break}et.have=0,et.mode=CODELENS;case CODELENS:for(;et.have<et.nlen+et.ndist;){for(;Ht=et.lencode[kt&(1<<et.lenbits)-1],Ut=Ht>>>24,Kt=Ht>>>16&255,Yt=Ht&65535,!(Ut<=Tt);){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(Yt<16)kt>>>=Ut,Tt-=Ut,et.lens[et.have++]=Yt;else{if(Yt===16){for(yr=Ut+2;Tt<yr;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(kt>>>=Ut,Tt-=Ut,et.have===0){it.msg="invalid bit length repeat",et.mode=BAD;break}lr=et.lens[et.have-1],jt=3+(kt&3),kt>>>=2,Tt-=2}else if(Yt===17){for(yr=Ut+3;Tt<yr;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}kt>>>=Ut,Tt-=Ut,lr=0,jt=3+(kt&7),kt>>>=3,Tt-=3}else{for(yr=Ut+7;Tt<yr;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}kt>>>=Ut,Tt-=Ut,lr=0,jt=11+(kt&127),kt>>>=7,Tt-=7}if(et.have+jt>et.nlen+et.ndist){it.msg="invalid bit length repeat",et.mode=BAD;break}for(;jt--;)et.lens[et.have++]=lr}}if(et.mode===BAD)break;if(et.lens[256]===0){it.msg="invalid code -- missing end-of-block",et.mode=BAD;break}if(et.lenbits=9,xr={bits:et.lenbits},cr=inflate_table(LENS,et.lens,0,et.nlen,et.lencode,0,et.work,xr),et.lenbits=xr.bits,cr){it.msg="invalid literal/lengths set",et.mode=BAD;break}if(et.distbits=6,et.distcode=et.distdyn,xr={bits:et.distbits},cr=inflate_table(DISTS,et.lens,et.nlen,et.ndist,et.distcode,0,et.work,xr),et.distbits=xr.bits,cr){it.msg="invalid distances set",et.mode=BAD;break}if(et.mode=LEN_,g===Z_TREES)break e;case LEN_:et.mode=LEN;case LEN:if(ft>=6&&St>=258){it.next_out=dt,it.avail_out=St,it.next_in=ct,it.avail_in=ft,et.hold=kt,et.bits=Tt,inflate_fast(it,Ft),dt=it.next_out,ut=it.output,St=it.avail_out,ct=it.next_in,ot=it.input,ft=it.avail_in,kt=et.hold,Tt=et.bits,et.mode===TYPE&&(et.back=-1);break}for(et.back=0;Ht=et.lencode[kt&(1<<et.lenbits)-1],Ut=Ht>>>24,Kt=Ht>>>16&255,Yt=Ht&65535,!(Ut<=Tt);){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(Kt&&!(Kt&240)){for(er=Ut,ar=Kt,ir=Yt;Ht=et.lencode[ir+((kt&(1<<er+ar)-1)>>er)],Ut=Ht>>>24,Kt=Ht>>>16&255,Yt=Ht&65535,!(er+Ut<=Tt);){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}kt>>>=er,Tt-=er,et.back+=er}if(kt>>>=Ut,Tt-=Ut,et.back+=Ut,et.length=Yt,Kt===0){et.mode=LIT;break}if(Kt&32){et.back=-1,et.mode=TYPE;break}if(Kt&64){it.msg="invalid literal/length code",et.mode=BAD;break}et.extra=Kt&15,et.mode=LENEXT;case LENEXT:if(et.extra){for(yr=et.extra;Tt<yr;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}et.length+=kt&(1<<et.extra)-1,kt>>>=et.extra,Tt-=et.extra,et.back+=et.extra}et.was=et.length,et.mode=DIST;case DIST:for(;Ht=et.distcode[kt&(1<<et.distbits)-1],Ut=Ht>>>24,Kt=Ht>>>16&255,Yt=Ht&65535,!(Ut<=Tt);){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(!(Kt&240)){for(er=Ut,ar=Kt,ir=Yt;Ht=et.distcode[ir+((kt&(1<<er+ar)-1)>>er)],Ut=Ht>>>24,Kt=Ht>>>16&255,Yt=Ht&65535,!(er+Ut<=Tt);){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}kt>>>=er,Tt-=er,et.back+=er}if(kt>>>=Ut,Tt-=Ut,et.back+=Ut,Kt&64){it.msg="invalid distance code",et.mode=BAD;break}et.offset=Yt,et.extra=Kt&15,et.mode=DISTEXT;case DISTEXT:if(et.extra){for(yr=et.extra;Tt<yr;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}et.offset+=kt&(1<<et.extra)-1,kt>>>=et.extra,Tt-=et.extra,et.back+=et.extra}if(et.offset>et.dmax){it.msg="invalid distance too far back",et.mode=BAD;break}et.mode=MATCH;case MATCH:if(St===0)break e;if(jt=Ft-St,et.offset>jt){if(jt=et.offset-jt,jt>et.whave&&et.sane){it.msg="invalid distance too far back",et.mode=BAD;break}jt>et.wnext?(jt-=et.wnext,Bt=et.wsize-jt):Bt=et.wnext-jt,jt>et.length&&(jt=et.length),zt=et.window}else zt=ut,Bt=dt-et.offset,jt=et.length;jt>St&&(jt=St),St-=jt,et.length-=jt;do ut[dt++]=zt[Bt++];while(--jt);et.length===0&&(et.mode=LEN);break;case LIT:if(St===0)break e;ut[dt++]=et.length,St--,et.mode=LEN;break;case CHECK:if(et.wrap){for(;Tt<32;){if(ft===0)break e;ft--,kt|=ot[ct++]<<Tt,Tt+=8}if(Ft-=St,it.total_out+=Ft,et.total+=Ft,Ft&&(it.adler=et.check=et.flags?crc32(et.check,ut,Ft,dt-Ft):adler32(et.check,ut,Ft,dt-Ft)),Ft=St,(et.flags?kt:zswap32(kt))!==et.check){it.msg="incorrect data check",et.mode=BAD;break}kt=0,Tt=0}et.mode=LENGTH;case LENGTH:if(et.wrap&&et.flags){for(;Tt<32;){if(ft===0)break e;ft--,kt+=ot[ct++]<<Tt,Tt+=8}if(kt!==(et.total&4294967295)){it.msg="incorrect length check",et.mode=BAD;break}kt=0,Tt=0}et.mode=DONE;case DONE:cr=Z_STREAM_END;break e;case BAD:cr=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return it.next_out=dt,it.avail_out=St,it.next_in=ct,it.avail_in=ft,et.hold=kt,et.bits=Tt,(et.wsize||Ft!==it.avail_out&&et.mode<BAD&&(et.mode<CHECK||g!==Z_FINISH))&&updatewindow(it,it.output,it.next_out,Ft-it.avail_out),Rt-=it.avail_in,Ft-=it.avail_out,it.total_in+=Rt,it.total_out+=Ft,et.total+=Ft,et.wrap&&Ft&&(it.adler=et.check=et.flags?crc32(et.check,ut,Ft,it.next_out-Ft):adler32(et.check,ut,Ft,it.next_out-Ft)),it.data_type=et.bits+(et.last?64:0)+(et.mode===TYPE?128:0)+(et.mode===LEN_||et.mode===COPY_?256:0),(Rt===0&&Ft===0||g===Z_FINISH)&&cr===Z_OK&&(cr=Z_BUF_ERROR),cr}function inflateEnd(it){if(!it||!it.state)return Z_STREAM_ERROR;var g=it.state;return g.window&&(g.window=null),it.state=null,Z_OK}function inflateGetHeader(it,g){var et;return!it||!it.state||(et=it.state,!(et.wrap&2))?Z_STREAM_ERROR:(et.head=g,g.done=!1,Z_OK)}function inflateSetDictionary(it,g){var et=g.length,ot,ut,ct;return!it||!it.state||(ot=it.state,ot.wrap!==0&&ot.mode!==DICT)?Z_STREAM_ERROR:ot.mode===DICT&&(ut=1,ut=adler32(ut,g,et,0),ut!==ot.check)?Z_DATA_ERROR:(ct=updatewindow(it,g,et,et),ct?(ot.mode=MEM,Z_MEM_ERROR):(ot.havedict=1,Z_OK))}inflate$3.inflateReset=inflateReset;inflate$3.inflateReset2=inflateReset2;inflate$3.inflateResetKeep=inflateResetKeep;inflate$3.inflateInit=inflateInit;inflate$3.inflateInit2=inflateInit2;inflate$3.inflate=inflate$2;inflate$3.inflateEnd=inflateEnd;inflate$3.inflateGetHeader=inflateGetHeader;inflate$3.inflateSetDictionary=inflateSetDictionary;inflate$3.inflateInfo="pako inflate (from Nodeca project)";var constants$1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function GZheader$1(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader$1,zlib_inflate=inflate$3,utils=common,strings=strings$2,c=constants$1,msg=messages,ZStream=zstream,GZheader=gzheader,toString=Object.prototype.toString;function Inflate(it){if(!(this instanceof Inflate))return new Inflate(it);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},it||{});var g=this.options;g.raw&&g.windowBits>=0&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),g.windowBits>=0&&g.windowBits<16&&!(it&&it.windowBits)&&(g.windowBits+=32),g.windowBits>15&&g.windowBits<48&&(g.windowBits&15||(g.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var et=zlib_inflate.inflateInit2(this.strm,g.windowBits);if(et!==c.Z_OK)throw new Error(msg[et]);if(this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header),g.dictionary&&(typeof g.dictionary=="string"?g.dictionary=strings.string2buf(g.dictionary):toString.call(g.dictionary)==="[object ArrayBuffer]"&&(g.dictionary=new Uint8Array(g.dictionary)),g.raw&&(et=zlib_inflate.inflateSetDictionary(this.strm,g.dictionary),et!==c.Z_OK)))throw new Error(msg[et])}Inflate.prototype.push=function(it,g){var et=this.strm,ot=this.options.chunkSize,ut=this.options.dictionary,ct,dt,ft,St,kt,Tt=!1;if(this.ended)return!1;dt=g===~~g?g:g===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof it=="string"?et.input=strings.binstring2buf(it):toString.call(it)==="[object ArrayBuffer]"?et.input=new Uint8Array(it):et.input=it,et.next_in=0,et.avail_in=et.input.length;do{if(et.avail_out===0&&(et.output=new utils.Buf8(ot),et.next_out=0,et.avail_out=ot),ct=zlib_inflate.inflate(et,c.Z_NO_FLUSH),ct===c.Z_NEED_DICT&&ut&&(ct=zlib_inflate.inflateSetDictionary(this.strm,ut)),ct===c.Z_BUF_ERROR&&Tt===!0&&(ct=c.Z_OK,Tt=!1),ct!==c.Z_STREAM_END&&ct!==c.Z_OK)return this.onEnd(ct),this.ended=!0,!1;et.next_out&&(et.avail_out===0||ct===c.Z_STREAM_END||et.avail_in===0&&(dt===c.Z_FINISH||dt===c.Z_SYNC_FLUSH))&&(this.options.to==="string"?(ft=strings.utf8border(et.output,et.next_out),St=et.next_out-ft,kt=strings.buf2string(et.output,ft),et.next_out=St,et.avail_out=ot-St,St&&utils.arraySet(et.output,et.output,ft,St,0),this.onData(kt)):this.onData(utils.shrinkBuf(et.output,et.next_out))),et.avail_in===0&&et.avail_out===0&&(Tt=!0)}while((et.avail_in>0||et.avail_out===0)&&ct!==c.Z_STREAM_END);return ct===c.Z_STREAM_END&&(dt=c.Z_FINISH),dt===c.Z_FINISH?(ct=zlib_inflate.inflateEnd(this.strm),this.onEnd(ct),this.ended=!0,ct===c.Z_OK):(dt===c.Z_SYNC_FLUSH&&(this.onEnd(c.Z_OK),et.avail_out=0),!0)};Inflate.prototype.onData=function(it){this.chunks.push(it)};Inflate.prototype.onEnd=function(it){it===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=it,this.msg=this.strm.msg};function inflate$1(it,g){var et=new Inflate(g);if(et.push(it,!0),et.err)throw et.msg||msg[et.err];return et.result}function inflateRaw(it,g){return g=g||{},g.raw=!0,inflate$1(it,g)}inflate$4.Inflate=Inflate;inflate$4.inflate=inflate$1;inflate$4.inflateRaw=inflateRaw;inflate$4.ungzip=inflate$1;var assign=common.assign,deflate=deflate$4,inflate=inflate$4,constants=constants$1,pako={};assign(pako,deflate,inflate,constants);var pako_1=pako;const pako$1=getDefaultExportFromCjs(pako_1);var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256);for(var i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var decodeFromBase64=function(it){var g=it.length*.75,et=it.length,ot,ut=0,ct,dt,ft,St;it[it.length-1]==="="&&(g--,it[it.length-2]==="="&&g--);var kt=new Uint8Array(g);for(ot=0;ot<et;ot+=4)ct=lookup[it.charCodeAt(ot)],dt=lookup[it.charCodeAt(ot+1)],ft=lookup[it.charCodeAt(ot+2)],St=lookup[it.charCodeAt(ot+3)],kt[ut++]=ct<<2|dt>>4,kt[ut++]=(dt&15)<<4|ft>>2,kt[ut++]=(ft&3)<<6|St&63;return kt},arrayToString=function(it){for(var g="",et=0;et<it.length;et++)g+=String.fromCharCode(it[et]);return g},decompressJson=function(it){return arrayToString(pako$1.inflate(decodeFromBase64(it)))},padStart=function(it,g,et){for(var ot="",ut=0,ct=g-it.length;ut<ct;ut++)ot+=et;return ot+it};const CourierBoldCompressed="eJyFWdtyGjkQ/RVqnnar8Bb4lpg3jEnCxgEvGDtxKg9iphm01oyILrZxKv++mrGd3az6KC8UnNa0+nrUGr5lI11VVLtskF198FaU1Dns9w9OOkf7/ePDrJu90bWbiorCgpH2RpLZO9WqaCReqZ8lnReJqKTa/SwL8DXJctPs9Lxs4oSS+bAuVVjXC7/tG/lAxYV0+SYbOOOpm402wojckVlQ8+T4wVFdUDHXlaifrTs91Q/Z4PNeMLu7t3/U6746POm+7vW/dLNlWGuUrOlCW+mkrrPBXr/X+4/gciPz25qszQbhyeyKjG2XZb3ewR+9Xi/sMdVO5k+ebHemcaHzW/57p3/y+qQbPk967We//TxoP191hoVeUWexs44q25nUuTZbbYSj4o9OZ6hUZ97osZ05WTJ3AQ37jMOqQtblIt9QG7lWycKJuhCmeJGGhSOxffccyqPj/W728eXX4cFJNxvavAmRyQbH++HnGf34vdc/etXNFq54d50NXh+2X6/C137v+CnQH8gZmYdQfP6WXX8MCppQTYMlditCBL53/wfTQ65EFeNfvQ6erlQsqX21akJc1rGs0EoJE+NbMnlToZFAVEFkQ3iABW2uGH3CUK1ojUTgMWEbjfaWeUp5G6N5aCwRw5vddkOM98EVqRlPrBJ2E8OPZHSM6prJkrtnVrqNIWbtOjQrg8o7Zq2VDwxId5x3xMe0lpzBuVaa0WGpkkCkmgaON/3qBVODpaHQiIybXz3ZliTi3DO2D2PoNIZGMXQWQ+MYehNDb2PoXQxNYujPGHofQ+cx9CGGpjE0i6GLGPorhuYxtIihyxhaxtBVDF3H0McY+hRDNzG0CqfQLTmeNlZBBvr0+TnIKbmUuTS5Z1jUN6xtw8nBtEjLb7wxDOesmB5j+JfpIIYLmIZiWC6GZAz9HUMMvTItzESL6VqG9rZMKGOI4QaGXpjY+xi6i6H7GGKYdMeQPl9foBBW3GHark9Vo5OqgEd9oe+ZOPOnc3NcqmZgiUuomehYnt1xZ8daaSPZ8wBoyb0Jx3jOBLBtGyvbiRNOLXw0Sy+DpNKAAhpxq/gXYhD6NdMda6bwwyTH0kwhypI70p5wdhR7Gjia3JEhpvfDLCRKI7YcqYXJnxgv/g3vSthEhNNSEKIfCQByUkpurWQaNXjqNtqjSfHp0OdLOwSAG31E7h03uLRMvlbEtDPoq0rkhqvhlSFu40I7kfP9VoRLFrH+G7YLcypCQLkJ1delML5SwjPb6DIMmQxL54L1gyq+YIfMyKNNsQ4zHj8UnoMDdoZwfoMqkJxX7A6Cj3czWzLdqcC+GuGM9tCa4RobSp5J2gTnk0D5CVA0Pp1RAqn7hC0o5J3kqvkTsGyY6gwBHlqmHtqBh2x77UI9QimVS75PljgMAjXDEljn0QNjvMlZIAju/pF0NH95VcFshSgnB3Ug+LhMkwYoVKOAUS+T2kZIG2DVcYInLXDTQkKUYHelH6kuGcEcbPE26aRPNklKOEQpNcCQHPp6k4jc5UYbRtkM7T4HcVsAvADWLtEGnq/M9t2G9e2Aw8xEM1CCQ4QDWq28cnKrmDHTAwcvgYNh1HJSqEKumdvVDlPDFOwjU8UyTpZZ4tTBohzYUSMaRAmdggBNgKLmzVsYGLjXbyujb6lm70CGSmnB1PsWJHuSYhQfupq/ioxBTRngkEaRuQEP3ICIPb/kAq/Axo6ZUEaQFFSStxwa/eDpiARDND4kqhIE+BG1Btp7hjKCjh6UKYt2xk7MkmMJ8PCMlGNy5XiSdvc6wYjYtIp5pSGBRTo9Z45R6Asw4bQ8HgrYhEJmTFsk6pWvyPfJOj4HiXNGFFQJw1hOCVaYgChNUOGcA6tD0DZCMSdDczMBDa5TFVWDqWn5i/yB+BByqARcGhx6ziqXVD4Ii2TqZmnLi8AS3L8dGqRoBIzwkM0LmXNpOAOKTNKbKciPBvg8XdZJ6RDoHEKO5meuGdDzmOiQMTrt0d63SVfAIDBJtgIwwaUvN7ps8l1r7v0I5lKPRUEV+rcqfaHlDvJH4FSdVBVCjk8IiXp87Jv/Ib90s/dk6gshTfPv8Zfv/wDUfBK2",CourierBoldObliqueCompressed="eJyFWdtyGjkQ/RVqnnarcAo7vuE3jEnCxgEvGDtxKg9iRgxaa0ZEF9s4lX/fnrGdTVZ9lBcKTmvU96PW8C0bmqqStc9OsqsPwYlSdnaPDvb6naP+3v5+1s3emNpPRCVpwdAEq6TdOTW6mC61+hpksyBo/euCTrOg89MKUSm9/XUNwddSletGcbOcfo+90Cof1KWmdTu7e4S4N+pBFhfK5+vsxNsgu9lwLazIvbRz2Tw7evCyLmQxM5Won809PTUP2cnnnYOj7s7eQa97fNjvHvd2v3SzBS21WtXywjjllakbRb3eT4LLtcpva+lcdkJPZlfSunZZ1uu9ftXr9UjFxHiVP7my2drGh84f+Z+d3f5xv0uf/V77udt+vm4/jzqDwixlZ751XlauM65zYzfGCi+LV53OQOvOrNnHdWbSSXtHKOkZ0apC1eU8X8s2dO0mcy/qQtjiRUoLh2Lz7jmWB4cUto8vv/Zf97vZwOVNhGx2crhHP8/kj987uxShbO6Ld9fZyfF++/WKvu72Dp/i/EF6q3IKxedv2fVH2qAJ1YQscRtBEfje/R8sH3Itqhj/Ggx5utSxpA7VsglxWceywmgtbIxvpM2bio0EoiKRo/AAC9pcMfsJK2stV0gEHhOu2dHdMk/p4GI0p0YTMbzebtaS8Z5cUYbxxGnh1jH8KK2JUVMzWfL3zEq/tpJZu6JuZVB1x6x16oEB5R3nneRjWivO4Nxow+zhZKWASDcNHCv9GgRTg6WV1IiMm8ReriWJOPeM7YMYOo2hYQydxdAoht7E0NsYehdD4xj6K4bex9B5DH2IoUkMTWPoIob+jqFZDM1j6DKGFjF0FUPXMfQxhj7F0E0MLekQupWep40lyUCfPj8HOSVXKlc2DwyLhoa1HZ0cTIu0/MYbw3DOkukxhn+ZDmK4gGkohuViSMXQPzHE0CvTwky0mK5laG/DhDKGGG5g6IWJfYihuxi6jyGGSbcM6fP1BQphyR2m7fpUNXqlC3jUF+aeiTN/OjfHpW4GlriEmoGO5dktd3astLGKPQ/ALnmwdIznTADbtnGqHTnh1MJHswyKJJUBFNCI241/IwahXzHdsWIKnyY5lmYKUZbckfaEs6PY08DR5E5ayfQ+zUKitGLDkRpdASTjxX/hXQqXiHBaCkL0IwFALrVWG6eYRiVP/doENCk+Hfp8aVMAuNFH5MFzg0vL5CstmXYGfVWJ3HI1vLSSU1wYL3K+3wq6ZUnWf8t2YS4LCig3oYa6FDZUWgRGjSlpyGRYOhesH7LiC3bAjDzGFiua8fih8BwcsFOE8woqIrmgWQ2Cj3czWzLdqYFeg3Bmd2pNusVSyTNJG+N8SlB+AhRNSGdUgtR9whYU6k5x1fwJWDZIdYYADy1SD23BQ669dqEekaktF3yfLHAYBGqGBbAuoAdGWMkZEQR3/0g6mr+8qmBUIcrJQR0IPi6TpAEa1Shg1MvkbkO0G2DVUYInHXDTQUJUQLs2j7IuGcEMqHibdDIkmyQlHKCUWmBIDn29SUTucm0ss9kUaZ+BuM0BXgBrF0hB4CuzfbfhQjvgMDPRFJTgAOGAVqugvdpoZswMwMFL4CCNWl4JXagVc7vaYmqYAD0qVSyjZJklTh0syoEdNaJBlNAJCNAYbNS8eaOBgXv9trTmVtbsHcjKUjkw9b4FyR6nGCVQV/NXkRGoKQscMigyN+CBGxCx55dc4BXYyDMTyhCSgk7ylkejHzwdkWCAxodEVYIAP6LWQLqnKCPo6EGZckgzdmKaHEuAh2dSeyZXnidpf28SjIhNq5hXGgpYZNJz5giFvgATTsvjVMCWCpkxbZ6oV74i3yfr+BwkzltRyEpYxnKZYIUxiNIYFc45sJqCthaaORmamwlocJOqqBpMTYvf5A/ERyKHSsCl5NBzVrmk8kGYJ1M3TVteEEtw/3YYkKIhMCJANi9UzqXhDGxkk95MQH4MwGfpsk5KB2DPAeRofuaagn0eEx0yQqc90n2bdAUMAuNkKwATfPpyY8om37Xh3o9gLg1YRFuhf6vSF1ruIH8ETtXJrSjk+IRQqMdHofkf8ks3ey9tfSGUbf49/vL9XxrnGMA=",CourierObliqueCompressed="eJyFWVtT2zgU/isZP+3OhE5Iy/UtDaHNFhI2IdDS4UGxFUeLbKW6AKHT/77Hhnbb1fnUFw98x9K5fzpyvmZDU1Wy9tlxdnUenChlZ3e//+awc7B32D/Kutmpqf1EVJJeGJpglbQ706VWX4JshEHrX4Wdn4SiUnr7q5jga6nKdaPvXBYqVISMvdAqH9Slpjd3dvuEuFP1KIsL5fN1duxtkN1suBZW5F7auWxWjx69rAtZzEwl6hc73741j9nx553+QXenv9frHr456h729m672YJetVrV8sI45ZWpG0W93k+Cy7XK72rpXHZMK7MraV37WtbrvX7V6/VIxcR4lT87s9naxovOH/mfnd2jw6MuPY967XO3ffbb5+v2edAZFGYpO/Ot87JynXGdG7sxVnhZvOp0Blp3Zs1urjOTTtp7QknbiN4qVF3O87VsQ9huMveiLoQtvkvpxaHYvH+J6d4+Be/j9//e9Pe72cDlTZxsdrzfP+pmJ/LH/zu7ewfdbO6L99e0crf98+rlzybY59JblVM8Pn/Nrj/S+iZeEzLEbQSF4Vv3f7B8zLWoYvxLMOToUseSOlTLJs5lHcsKo7WwMb6RNm/qNRKIikSOogMsaBPG7CesrLVcIRFYJlyzo7tjVungYjSnNhMxvN5u1pLxnlxRhvHEaeHWMfwkrYlRUzNZ8g/Mm35tJfPuipqWQdU9865Tjwwo7znvJB/TWnEG50YbZg8nKwVEuuniWOmXIJgaLK2kPmTcJBJzLVPEuWdsH8TQ2xgaxtBJDI1i6DSG3sXQ+xgax9BfMfQhhs5i6DyGJjE0jaGLGPo7hmYxNI+hyxhaxNBVDF3H0McY+hRDNzG0pJPoTnqeNpYkA336sg5ySq5UrmweGBYNDWk7OjiYFmn5jTeG4Zwl02MM/zIdxHAB01AMy8WQiqF/YoihV6aFmWgxXcvQ3oYJZQwx3MDQCxP7EEP3MfQQQwyTbhnS5+sLFMKSO0zb91PV6JUu4FFfmAcmzvzp3ByXuplX4hJqpjqWZ7fc2bHSxir2PAC75MHSMZ4zAWzbxql27oRTCx/NMiiSVAZQQCNuN/6NGIR+xXTHiil8GuRYmilEWXJH2jPOjmLPA0eTO2kl0/s0C4nSig1HanQJkIwX/4V3KVwiwmkpCNGPBAC51FptnGIalTz1axPQpPh86POlTQHgRh+RB88NLi2Tr7Rk2hn0VSVyy9Xw0kpOcWG8yPl+K+iyJVn/LduFOV3GaOBmuDvUpbCh0iIwakxJQybD0rlg/ZAVX7ADZuQxtljRjMcPhWfggJ0inFdQEckFzWoQfLyb2ZLpTg30GoQzu1Nr0lWWSp5J2hjnU4LyE6BoQjqjEqTuE7agUPeKq+ZPwLJBqjMEWLRILdqCRa69dqEekaktF3yfLHAYBGqGBbAuoAUjrOSECIK7fyQdzb9/r2BUIcrJQR0IPi6TpAEa1Shg1MvkbkO0G2DVUYInHXDTQUJUQLs2T7IuGcEMqHiXdDIkmyQlHKCUWmBIDn29SUTucm0ss9kUaZ+BuM0BXgBrF0hB4Cuz/bbhQjvgMDPRFJTgAOGAVqugvdpoZswMwMFL4CCNWl4JXagVc7vaYmqYAD0qVSyjZJklTh0syoEdNaJBlNAJCNAYbNR8eaOBgfv8trTmTtbsHcjKUjkw9b4DyR6nGCVQV/NXkRGoKQscMigyN2DBDYjYy0cu8Als5JkJZQhJQSd5y6PRD56OSDBA40OiKkGAn1BrIN1TlBF09KBMOaQZOzFNjiXAwxOpPZMrz5O0fzAJRsSmVcwnDQUsMuk5c4RCX4AJp+VxKmBLhcyYNk/UK1+RH5J1fAYS560oZCUsY7lMsMIYRGmMCucMWE1BWwvNnAzNzQQ0uElVVA2mpsVv8gfiI5FDJeBScuglq1xS+SDMk6mbpi0viCW4XzsMSNEQGBEgmxcq59JwAjaySW8mID8G4LN0WSelA7DnAHI0P3NNwT5PiQ4ZodMe6b5LugIGgXGyFYAJPn25MWWT79pw30cwlwYsoq3Qr1XpCy13kD8Bp+rkVhRyfEIo1OOj0PwOedvNPkhbXwhlm1+Pb7/9C/NFF2U=",CourierCompressed="eJyFWdtSGzkQ/RXXPO1WmZSBEAJvjnESb8AmGENCKg+ypj3Wohk5ugAmlX9fzUCyW6s+ysuUfVqXvh61Zr4XI1PX1PjiuLg6C05U1Ns/Ojx42TsYHB4eFf3irWn8VNQUB4xMsIpsCwatU1DUSm8T+JpUtW7XP6NShToiEy+0ksOm0nHkIP53b9UDlefKy3Vx7G2gfjFaCyukJzundu74wVNTUnlhatE8a/XmjXkojr/s7O33d/YOBv3D3YP+68HB136xiEOtVg2dG6e8Mk1xvLM7GPxHcLlW8rYh54rjOLO4Iuu6YcVgsP9iMBjELabGK/lkymZrWxt6f8g/e7tHr4/68Xk06J673XOve+53z8PesDRL6s23zlPtepNGGrsxVngqX/R6Q617F+1qrndBjuxdRONu4ziqVE01l2vqHNgtMveiKYUtf0rjwJHYvH/26MGrvX7x6ee/l3uv+sXQydZPtjh+tXfUL07o1/+d3YPDfjH35fvrOHO3+3n1/LN19hl5q2T0x5fvxfWnOL/11zQq4jYiuuFH/38wPUgt6hT/Fkw0dKlTSRPqZevnqkllpdFa2BTfkJVtdiYCUUeRi94BGnQBY9YTlhpNKyQC04RrV3S3zCwdXIrKWFQihdfbzZoY66MpyjCWOC3cOoUfyZoUNQ0TJX/PjPRrS8zYVSxZBlV3zFinHhiQ7jjriPdpoziFpdGGWcNRrYBIt1WcbvotCCYHK0uxDhkzvwVyHVOksWd0H6bQmxQapdBJCo1T6G0KvUuh9yk0SaG/UuhDCp2m0FkKTVNolkLnKfQxhS5SaJ5Clym0SKGrFLpOoU8p9DmFblJoGU+iW/I8bSyjDNTp8zzIKVIpqawMDIuGlrRdPDiYEun4jVeG4ZwlU2MM/zIVxHABU1AMy6WQSqG/U4ihV6aEGW8xVcvQ3oZxZQox3MDQC+P7kEJ3KXSfQgyTbhnS5/MLJMKSO0y78bls9EqX8KgvzT3jZ/50bo9L3fYraQq1XR3Ls1vu7FhpYxV7HoBVZLDxGJeMA7uycarrOmHXwnuzCipKagMooBV3C/9GDFy/YqpjxSR+bORYmilFVXFH2hPOtmJPDUcbO7LE1H7shURlxYYjtdj6E2PFv+5dCpfxcF4KXPQrAEBOWquNU0yhRkv92gTUKT4d+nxqRwdwrY+QwXONS8fkK01MOYO6qoW0XA4vLXEbl8YLyddbGa9axNpv2SqU8SoWG26Gu0NTCRtqLQKzjalik8mwtBSsHVTzCTtkWh5jy1Xs8fim8BQcsDOE8xvUkeSCZncQvL/b3pKpTg32NQhnVo+lGa+yMeWZoE1wPAmknwBJE/IRJRC6z1iDUt0pLps/A82GucoQYNIiN2kLJrnu2oVqhHJLLvg6WWA3CFQMC6BdQBPGeJOTSBDc/SNrqPz5voLZClGOBHkgeL9MswpolKOAUS+zq43QaoBVxxmedMBMBwlRgd21eaSmYgQXYIt3WSNDtkhywiEKqQWKSGjrTcZzl2tjmcVmaPcL4Lc5wEug7QJtEPjM7N5tuNA1OExPNAMpOEQ4oNU6aK82mmkzAzDwEhgYWy2vhC7VirldbTE1TME+Kpcs42yaZU4dLJJAjwbRIAroFDhoAhZq37zFhoF7/ba05pYa9g5kqVIOdL3vQLAnOUYJsar5q8gY5JQFBhnkmRsw4QZ47PklF3gFNvZMhzKCpKCzvOVR6wdPRyQYovYhk5XAwY+oNNDeMxQRdPSgSDm0MzZilm1LgIUnpD0TK8+TtL83GUbEqtXMKw0FNDL5PnOMXF+CDqfj8ZjANiYyo9o8k698Rn7I5vEpCJy3oqRaWEZzyrDCBHhpghLnFGgdnbYWmjkZ2psJKHCTy6gGdE2L38QP+IeQQRXg0mjQc1S5oPJOmGdDN8trXkaW4L52GBCiEVAiQDYvleTCcAIWsllrpiA+BuAX+bTOSodgzSHkaL7nmoF1HjMVMkanPdr7NmsKaAQm2VIAKvj85cZUbbwbw70fwVwasCguhb5W5S+03EH+CIxqsktFl+MTQqEaH4f2O+TXfvGBbHMulG2/Hn/98Q/b2xEO",HelveticaBoldCompressed="eJyNnVtzG0eyrf8KA0/7RMhzJJK6+U2+zMX2mJYsEuJMzANEtihsgYQMEITaO/Z/P41CV+bKlaug86JQf6uArsrKXNVX8H8m3y9vb7u7+8m3k4t/btazm+7o5PmTZy+PTl88eXk6eTT56/Lu/tfZbTc0+Hu3eOju51ezb75bLq532maxYO2oarPb+aJndRCm3fzm425/Y8N/3M8W86tXdzeLoeXjYXv91/mX7vq3+f3Vx8m396tN92jy/cfZanZ1361+73af/PHLfXd33V2/Wd7O7sY+fvfd8svk239/8+T540ffHB+/ePTk8eOTRy+fHf/n0eR8aLxazO+635br+f18eTf59ptBBuHtx/nVp7tuvZ58+3TgF91qXZpNHj8+/svjx4+Hnfy6HAawG8z3y8/9ajeGo/+6+j9HT16+ePpo9+/z8u/L3b8vH5d/nx+9ul6+745+79f33e366B93V8vV5+Vqdt9d/+Xo6NVicfRm9z3rozfduls9DNTDOF8fzY7uV7Pr7na2+nS0/HD0y/xued9/7r4ZGi2OXv3taHZ3/X+Xq6P58AXrzfv1/Ho+W8279V+Gzv447Op6fnfz+9XHrsxA6cnv98NHZqvrqg4Nv599/vs4Ic+fvHg0eVe3np4cP5q8Wl/tAr0axR862/7m+PHzR5Pf76//Pp18+2QnDv+/2P3/9PF+vv7Z3a/mV0NA//0/k+m7ybfHz4dGvw5dWX+eDXH830d7fHJyssfdl6vF7Nb46fPTPf9jsxzi9X5hytOnz/bK3eb2/W6ibu6ydr1cLGYr4y+GiSn8c7e62qV7FZ4fH++F2e0grYf4mGQdLj0oM557/Xm26u4W3YeWRB+r3Zitd9+4/uQdfzEO9/Nis85duBqqdJZ38bH//LG7y82HocyXYiTrxWz9MQfrz261zHR512V4vxUt7z+uOtH2w3KzEnT+INqu518E7B46MbddiKmnw/xOpNXVcrG8y3jd3c6jZDOw2NlAot0fm9ki45tVN5SzD/PZkyc1abp1sZqqvHz+dJx7kX2vMvouo+8z+sH3/Oz5Hv2YO/NX/2BNhb/l7/p7Tph/5DD/lD/4c97jL156NeT/zB/8NffrLA/ot9zqdf6uN/mDv+d+vc0fPM8fvPBZOx0neppbvcvoMu/xXzn53g+L2afuPtiGhfz9oMU65c9FT7FUnK2v5vOr+epqc5tnbbOz7fWw/nR5j8XfQmfsY7M8nve51VVudZ1bieL8kD94k9HH3OV5Rv+d9/gpt/IStiXhNu/xLqNlRp9F1WerFxa4zpG4z9+1yR98yJWwza2Ek/aOdsc9xfRzV3f5FRPh+MXjmpWrRvtD2Xg/X1w3l/rr5VaYe1idPWL35TjNk+NJrbgPuwND9Fkfs1o7PiyWq7ng667xLVeb1bCMX3kAj0+wbNbzcuCaoluPWnRZ3Wzmg3K7vNdHDju5fPFX5Bh6S5wPc8HE8dNwKCcPB65nNzedSNs9x0MxOuDYzV236kTtD8dCs5vV7DOY2tOaWcNJRCd80MP7frY+EOHD6kofK9gERH04KRg/Pxxizz+v52shDWO9/7jchGPFtOyH5PaZW80eRD3Mrjb36tClePmHRfcla43Kup1drdThzvtVp3Z8vbyfXYWKc2k+zCQGwJQV1qF3trseQqqOUTd3N7PV5nYx24jdLG+Gw8xP4utmOA6Yl9uQsy688sOek+cjW66uPwzHeeHA0I9Q4iLrByCR+x7OYA/Pntoebgen2yxwF7ayzMRie70r+vVaLGCLuGNfeSK3I5KlGNRQn8Mp8ZD34hziH2lK3QliBvryH/PGlyY5qf51cfb86Cj3oC4X1/OHOSS0fyT2zA+YRXF4txsfOj/0ob4Rg3U596IygaHmr/T9hVJx3J6IGdWDfyb2zmeCPuBnAWknfs4weASchBxXJ1YDfX7yvIrjVQ+xK3IdXztjHvgodVx+VR3w8mjlaDRVP9KXw7FTqda3RWOFcCarhAzRw1yzJ/rha9z76ct66rn8s7u7EZn7Ju7Cz+LUID05DhbJocx9xQuJHc02xnrFY/Xznxw5i+rbj8uVGNUZ7d3DQFVgJ3pU8Kd1EaOwWTXRDjxienErFzjWm3KUsxL9jSnoUWzxaKtmgrebxf3886IX/WqU/9s4QEuk4Xjrfj5bXM8/fMhz1bet4de4H09YkSxeGwfT7MCq05auGuO9a9lgK2N+jQHyxZDqHy+/DUcMeA3OToFWy0/dHZ4ImTmuupv5Oh76eonGyYblONdFPdRYb4aqDucjHmw6hrTCbERm2Ur1fzU+8C+q8NOX9di1XOmK18Eszj/ef8zw+6YBLpRv2VjuGybTNVfHlvCqdfhwICtjgP18uVUavG9zhdaMtJae1jK6bu0517Ht++BhCa+Y9bigW9wLA78PJu2euF0ecMTUNfu6240YSWMNX8rjTK8FPvixq0/xCOfFySn4+JDAqyGR1/n7fud8Pa2Tv2gsJD8fXH9/iRPnpxJ2X0eZYrIFt4wYJuetGv8ldtviMETt42wBS0Mt8t2pSaxwnwu1BJgvx8MmT7WvTGCjFLrWgG6imeKAxmlVs6rPRn6XB4iWwbLnlhDXg010KmMbS/731AlbuMhtTs3Or+dXymh/iF8EB2aHDnd/pcNa625j3t4czuuD+3rV+M5XTZOOpwM2A/F73IgPHFD+2Fruad9+iVie3dkBWTwSsG87WAo0QeaXB/e0WN7s5vtuKcK9bJvpJq9jNYOGr2pU8s3Bye1gJfeYN9L3Tq7jdnHnLh80u+e3lrsfN7u7kf95NPm5W939NpuvdveQ/z15tbtbPXn0zenj/zwat/buEdC+nxGNpo7wb8PWU9/au0pAODAUzsL3nOUu4NIbuE1VoPv6Dyg4T1DGkAW2vzoU0L5wEL0OW2+HrZe+VWOGKIzehfMQi/M6ekBh9MBh9EDr6AHR6EGx0QMb6zqwYidILoatF7Y1Hbae2dblsPXkiW/WISGDvgPeDJsnvlU/CCjEAjh8H9AaC0AUC1AsFsAsFsDGWDh5CJmwDVoft/KI+tzzsRGWpiEqDuNUpM65UqsC5WqIata4LNyqnuXv5hI2rurYxFzMJlFFG9dlbTLXtglU4Mapyit/nRHUuyEqeueq8qt6niPKHmBcGYGJ2Q1MIkswrn3BZDYHE9ghTIg2UTF4RUVgGBWhaxhj6zBB+EfVwEQMUd0ZV3ZiYrsy2ViMa3cxmS3GBPYZE6LZVPyQE3KbW/UCNQIhXGg0A3QhQ1TfxsmFnLMLVQVcyBC5kHHpQlU9y9/NLmRcuZCJ2YVMIhcyrl3IZHYhE8iFjJMLVf46I3AhQ+RCzpULVfU8R5RdyLhyIROzC5lELmRcu5DJ7EImsAuZEF2oYnChisCFKkIXMsYuZIJwoaqBCxmi4jOuXMjEdmWyCxnXLmQyu5AJ7EImRBeq+CEn5Da36gVqBEK4EIYGrShyqvQokimRyM4UZLCnyMmjoiiNKjQ5a+yPLSuKyrdii2xeUScHi6K2sdiGvSyqZGhRJFcL4usGB3+LnEyOROV0ocl5Y17Y86KojC+2yO4XdbLAKGofjG3YDKPKjhjVaItBA28MHAwycHTJKLBVRlX4ZWgAphk5GUYUlX3GFl/xFTbSKGo3jW3YUqPKvhrVaK5Be2jUxbbRvm/xQ/ETrusEPRcpGRVK5LdBYrcFEbwWKTktStJnocGZ3A97LErKYVHP/ooquStK2luxBTsrauSrKJGrgvRaUnBUpOSnQVJuCg3OZezZSVFSPop6dlFUyUNR0g6KLdg/UWP3RC16JyjgnEDBN4GiayJmz0RNOCbI4JdIqdpRUl6J+kEvYJ9ESbsktmCPRI0dErXoj6A8yAzfyra9pu1ICVccR4+WaIhMxTiZoXN2wqqADRoiDzQuDbCqZ/m72fqMK98zMZueSeR4xrXdmcxeZwIZnXFyucpfZwT+ZojMzblytqqe54iypxlXhmZidjOTyMqMax8zmU3MBHYwE6J9VQzeVREYV0XoWsbYskwQflU1MCtDVH/GlU2Z2K5MNijj2p1MZmsygX3JhGhKFT/khNzmVr1AjUAIF6p9RRtyRhXuAhkRCOxEJoEVOSMvckGakcln4vvZjlxQfuRqNiTXyJFc0JbkOnuSK2RKLpArmfBaMPAlZ2RMIChnMvlcxJe9yQVlTq5md3KN7MkF7U+us0G5wg7lSrQo4+BRxsCkjKFLOWSbckX4lIlgVM6oQF1QVuXqgfpls3JBu5XrbFeusF+5Eg3L+IPI1a1o1yvWiolwrdoxdC1nZAQukGuBwK5lEriWM3ItF6RrmXwmvp9dywXlWq5m13KNXMsF7Vqus2u5Qq7lArmWCa8FA9dyRq4FgnItk89FfNm1XFCu5Wp2LdfItVzQruU6u5Yr7FquRNcyDq5lDFzLGLqWQ3YtV4RrmQiu5Ywq1AXlWq4eqF92LRe0a7nOruUKu5Yr0bWMP4hc3Yp2vWKtmAjXWo2/6OG7q4RMoGLyK8PsVqMAXlUJOVXF0qdG8Sx9L3tUxcqhqpb9qSrkThVrb6oqO1Pl5EsVkyuN+HUi4EiVkB8ZVm40iucphuxEFSsfqlp2oaqQB1WsHaiq7D+Vs/tUHr1npOA8IwHfGQm6TkXsOZULxxkl8JtKqLIqVl5TtWbNsc9UrF2mquwxlbPDVB79ZaQPKeu2qU2fiR69cJUx19FWDFHhGidjcc7OUhWwFkPkLcaluVT1LH8324tx5S8mZoMxiRzGuLYYk9ljTCCTMU4uU/nrjMBnDJHROFdOU9XzHFH2GuPKbEzMbmMS2Y1x7Tcms+GYwI5jQrScisFzKgLTqQhdxxjbjgnCd6oGxmOIas+4sh4T25XJ5mNcu4/JbD8msP+YEA2o4oeckNvcqheoEYjsQt8N9FXcip8tqDoGIBHSwvUeYiALoiAVRvEpLISmkFq+jnbV9cS3LJ0che4CxwRzWrsLiKYcFBsIMBsIsHEge/LDGPdT34pu+gPGHZDw1h8o7kCjo/4Q4g7Mugts7C6QaJs/jCXvW9OwtSv0575VRwcIuux0/3tsdXJ3ZPzJNUOj/2L4DFEMjVMgjatomphDahLF1TgH1wSOsAkxzIYp1pVfZDTNCEJviOJvPE9ClWgmKk7TUV4IjNNREU9H5TwdlcvpqKKYjirxdFSepqMKaTqqQNNRMU/HyC8ymmaE01ERT0flYjpGiadjxDQdfx1n4oVv1V0BqvEHFEIPHDoEtAYckMUamIUZ2BhhIDW4jnbjPPatOgJAdQSAwgiAwwiA1hEAshEAsxEAG0cApI7AUZ2tJ48N2UyN7Kdxqo59Kw70J5wqQGKgP9FUAY0D/SlMFTAa6E8wVUDiQH+CgTqxcTraxK08zE1jTBs5pk0eEx+SgSJGuxGj3YTR/jzZn/Kc+FY8LipIHAQVng6CCo0HQQXJA8mi0OFRYfV8BlA8Ftqhctzy1LbsWMhRPYFBFA6PnOPhEVB7TTRgO2py5MdGzvzYyNhyNwLfskg7ipF2jpF2apF2xJF2xSPtzCLtyCJtaBPivsn5oc47fp6oU46fJ+ls42eR1aCI/ODTi58nfGaxI70tUGUrLtEFpYU2vIsf6oIECgGpKhrUJAeGGlCMSNXhokYcOZKpyEileosqJD8JVIWkUkGyKmqTmuQy5Qa5YqkFFS+pXMckc0lHGaqbBCp0UlXNU5Nc/tSAnIBUbQrUiP2BZLIKUsk1orppJRJ7CalfLyThMNTgYCE1fIcaHS6k5EYkR2OKIngUCWRXpCbn+mWC1/DKVrx8t0fiyt1O2B3ej5eddptTO0bdbZULWce+aSUODOvScfwFzUE6jZLgfo3nl0m6vPPLRF3Z+SW/o+qIgnDwHVVTMRz4BueLiDAw+Q1OFkSIqtaKU9BbYp8DwWFrv/X4S8wriCAJFEdWVTRjG4xpVCCyUcD4ksJRJlnEOrZoRVy0Otykb4WS56BdwGOD0V5xDgxR9J2ruFcVI14ZxLoijLIxjq8JIrJVa8U06C2xz4HgCBpPsRuO08oJ5lPfirccCop3gwoSNyAKT/ceCo23HQqiWwqF0d2EwsKNhELqeunorZn5Gc45ojDdLlyE75mGrXdhy6/QnE3SxZmzibous6P13Nd3aee+I6oWA9NgiObCOE2IcTUrJuapMYnmxzhPkgk8UybE6TJMc4brDoWBZ6+x7pB6kb97mtG7jGBa00LEPE9wlWiWK+apDi9TwXxHTpMeRZr5KKrpjy1yDkSdEiGKnA1R5ZSIasyLqFFypPc6VfQ4TQ6916maXDT2N23wdw0O+aNfb5RizqSgUzoFjXMKXkSBjEJK+YQSZRNKKpdQz5mEKuURSpxFqHEOoRYzCBXKH3qHLceJc6f9DltucCH3M5X0naSQMerVLiHlbAGVcgUUzpT6pgCkiSHKEeOUIMZVdpiYU8MkygvjnBQmcEaYENPBMOUCvuxDYeAsaLzsQ+pF/u5pRu8ygmlP78YwzxNeJZrtinmq47k5zjgrNPEs0/yzrNKA2+Rs4BaUFCxzbrDOKcJ6zBRWKWFIftuMKadPklUWUaOL5n6nTeVdU4EMY4USjeWcb9SC0o5Uzj57uh/yzhllnAuUay6oLHM155drlFkucE65wtnkSswj55RB4UUejghnTetFHpYvxPdPBXsnGORFft8lCTkXTKMsMM7zX083YfoN0ewbp8k3rubexDz1JtHMG+eJN4Hn3YQ47YZp1vEaBIWB57xxDYLUi/zd04zeZQTTnS5KMM+TXSWa64p5qutTYzDVhmiqjdNUG1dTbWKeapNoqo3zVJvAU21CnGrDNNX44CeFgae68eAnqRf5u6cZvcsIpjo9J8k8T3WVaKorpqn+bZzl8cmE33CGkdXZRUZP1rkQHq1z7M/WOYNH6BzCM3QO7SE6R3UGgflzMmUrXjErKD7RWJC4q1J4uq5WaLx/UhDdDymMboIUFu58FBLvKv4G8zZeTdyh2KDLg7L7iIj0oDo5qHCbEHAeayfG2omxLkOK2f0+QOKRr8LTrZxC44NeBcmHw4tCT38VFh8JLyg+2/UbVscY/dcTfMS0bMVHTAsSj5gWnh4xLTQ+YlqQfMS0KPSIaWH0iGlh4RHT155GPow6tD15M9nfzYet+GxOQeLZnMLTszmFxmdzCpLP5hSFns0prE4RoPjY0ZvRn2GrZj6i4MounMetPN7zxnjP5XjP83h5IkER4z2nZ5HewEQ68WXkzQQfMnwzrhSuXcal+Q2tDyOtVzFh9g1RSIyruJiYg2MSRci4DpPJHCsTKEGMU5bgdWhGlC+N69CkngvUiJXMIRPbseJsMn44VimvTODkMiFmWL7UbghyDa+rUyvOOnVdfZTqg8SQeoYonMZVOE3M4TSJwmlch9NkDqcJlHrGKfUqfysQpZ5zlXpVPReoESuZeia2Y8WpZ/xwrFLqmcCpZ0JMPXy0nTIEUg8fbadWnHrq0fYqpefYjqXAoT3wHJtuIsKsn2PTaiPkjefYtMypqp9jk+rbpsDJe+h5B9nmvCkcjLlO6tjkazFPCR7V/5+Y52SPckr5KFPipwdBZJZiEaTnQOQnUkE0nwLZNximu5z9vfSt+g2A6hkToDApwGEPQGv4AVk4gVkMgY2BA1Lz15G/oPoWSxiQONV4S8UKNJ5qvBVlCQqdarzFAgQUTzV2aHeO98K34rsaBcV3NQoS72oUnt7VKDS+q1EQvatRGL2rUVh4V6OQ+K7GDl0tFzTyeu7qbXafeOZbdZSAqrEgwlECh1EihVNXwHXwgGzwwGzwzj72nz925Zzr2NgyjGqZZ2vZmJqlnJplnho+nQVFTJqdzgLKM2Sns45WcSsPZBW93IV1dzvPU74JpbjJ9rFpeMVGesUmewU/kgqKcJGNcJFNcpFtmPA+buUk7XPm4buILwlRENK7iMxVhNS7iCxRrPK7iCxwbPhdRMbktXj8fkqIXFcfv7OY/TcdvzPXTpyP31kgT07H78TBxQxRrRgnnzauHMHEbAsmkTcYZxswgQ3chOjihsko/LXPhQodmXrFXa4Ftnfj5PHOhdGb2K45Zfmmke8bZ/M3gVeAKqRloArLHAxeEIwfygGxNJjUyIHGImFyK0V4uTDeSAVeOCpfCdQYul5HqioWkyrBimKo4ahybTGx7Zy8yhjXS43JLWNNi44J2li3Odt6gRrlpFajcKCPa1IUOI5R5fUpqjLWsYmIeGzAcY9qCm+UU5CjTKGOIq9k6XLAqRR4VTtwOUA3ESucvhyg1cZq17gcoGVe+fTlAKmi7UeBiz6qvCJGVXpibCKcMTZgf4xqssEop/UyyrRqRpENM6jsaCTGdTS+SNeq5bSmRpVXVlLV+hqbfM1L5FobW/CKG9W07kY5rb5BzmtwfMmuFc60Hkf16xmo1ubY4GAGttbp2OhwmqY1O6oHEzGt30FdNYWDYWus6KGNWtdDA1zdo3BwbdIrfWzytdUnrfpRbaz9sdHhJSofB0T50BK1bdVA3xQOWkM+Sjif4BM953g8ACg+x3OeVn7g6XriOa7xgOiZnfOwmgMLT+qc47rtqNroiRH6IZR6PRnH2nj1xjmN+tCrNy7m8TdevXHOkWi9euNCjEnj1RvjFJ30ysrIG6+sEKdgHXplhUQVtq+8skI6BfDgKyukcigPvLJCGgVVvr2hIsjhlW9vBEqhbb+9ESQV1oNvbwSVQnrg7Y2gcTibb28EhUIpXm3IseIw5lcbHFEAG682OFeha7/a4BIFrfVqgwscLv1qg2MKFL8SQKHgEDVfCUgKBezwKwFJVuH76isBqQUF8yuvBCSdQ3vwlYCkUqAbz8LruHLYxbPwwCjUrWfhQVDhPfAsPGgU0uaz8KBwGBvPwgOn0KVHxzkqHC77iW0IlzMKlwsULhdUuFzN4XKNwuUCh8sVDpcrMVzOKVwmULiMc7jGXw6GYFVCoaqYAlWxClPVcpCqQiGqmANUOYen8hicSik0I6bAjJTCcjGG5IVvxdOVCwwFIHG2d0EhABrP6y7C0IHRNYQLGDKQeJK2Q/6zzGUrzlxB8SzLhbO4FVOhIDHfhae5LjTOc0Hy94KLQrNfWD0/BRSnd4d20/rMt+IpS0E1BIDEdYvC0ylNofH6Q0F00aEwutJQ2DhjQOoIHMXT2YtJekR7h+Kguzw5dqUGkZ6vTs5XuBADOE9jJyarozLdMbu44tm5u6Dy0rfiKXlB4jy88HTyXWg84y5InmYXhc6tC6s5Biheyr2Y5Ke2dyxfiNjRTZjZTc7GTSP1NjL1Njn1+DICKCIpNyIpNyEpp6PrwVbs9RRdD5AYyJRcD2gcyDS4HjDq7hRcD0isoekEH7iboncBEo95Tcm7gMYHuqbCu0ChR7em6F2A4oNx09G7Tn0r3gyYoncBEjcFpuRdQOPl/2nwLmD0q7VT8C4g8Vr+FLzrCRC8Cj0drWv/I2VTtC5A9nYJoPwLbVOyLqT4donj+BNt02BdwPztEmNmXT7UZUi4ZS6SZaMilrIilrki2LpAEbVi1gUoFwZdqJ2Sc/m87Zzr1MZvzgUoJp5zTDynlniO+GaTK56SzjwlndWUNNKHeupz3fepvi9Hwxt/qekSHQ+ZvZEGLL6IAwK+iQPYXsUB5m/cAPRXbgDWd24A2RtpznbW99y34ot8l8n6gKd3+y7R+gDRxIFigwFW8xJQ7bajmS2wl2h9gOLN4stkfcDTscElWh8gOgK4DNYHLFxHv0Trc1RL6CmQW/xl5svR+174VjyfuETvQ5TPJy7J+5CC9wGOpxmXwfuA0WnG5Wh0MARzOmTq1cxL8jrE9GrmpXA7lPitzUv0O2T0hublJP8Y9iVZns/XJjbaiIFuWgPd6IFuxEDZ91BSA3XnQxhfT7206/RgBukmRBLY0/RtiKQKd0s3IpKQfC7fikgKOV66GcECeF96x4y5ckH1jhlL5Ietd8xYZmdM75gxJ4+sHIzSELmlcbJM48o3TczmaRI5qHG2URPYS02IhmqYXNVvMoVS5XtPXANgc4bIaY2T3ToXnmtiNl6XsvuaRhZsnH3YBDbjKizFoJMtmyAty1ThW6axeZnQcDDTk42ZwqZtAjt3upPIgvDwKm1E8+TmJhyMj/J101rxaTm86c34ZK83hQyfbvlVJ1T3/JTGzt+866caCP9X9/2UllYBeedPibQWqHt/QoMVASktCiipdQH1vDSgSqsDSnqBwBa8RqBGywRKtFKABIsFUlovUKIlAyW1aqCeFw5Uae1AiZcP1HgFQS0uIqjQOhJuBgfHELeJRYGBaSOlNQUlWlaCJFYW1PPiEtS8vqBMSwxKvMqgxgsNaEsdkrTcoCYdFRsIU0WZfRW1hrVik+SuKPIChBqvQepRAaGJlQjUjf5QWo9Q+1oA1aqE8oEAttYmbHIogHmFQjEuUkM5TfxXQsqW/66PoXj/yYXd3yTc/5WH3dY2bPl1nrIVr/MUlK7zVNfDHhmibhmXfasqdLCibUZ97gH313ju9Ngx7LQh6rRx2emqQqcr2mbU5x5wp43nTodnlaDnkVP3oyjHEJrAQALfNnjf6B+PK4p5cJDuMDSkNDCU5LCgAQwK6FbSXvaJh4NSHkx9zAdGYoiGYVyOoaowgIq2GfW5B9xv47nT9tgH9NoZddsF2W+ToePGtoL1oh/cdxdy5+0hDOi8M+q8C7Lz4c/Tjx0Nf56eWS/6wZ2Xf55+1MYHJaDrlVDHK5bdhr96PXYQ/up1JH3aN3dX/NXrUam/QAe9NUTdNS77i38kd+we/pFcQn3uAfdZ/ZHcvfR+oAvbc9ny4wRDqpdF8IObijbhq+nv4b1PxxrAZd/o7+G9FwcUoNCN0Pfh8AFY+LWK92OkfauPW3kMOY5XA/VA7LY+Be2T+gGRqzH4sBX3dZWDD0K8xXs1dtx70MeZvKKOj7QeC3zMCIZgSPamqguBaETGD38RjQ2PbaiTPEp1bDNK9uJrRjBUQ7KHVV0IREM1fviLaKj4viR1koeq3pes0nBat1jMaLAGcbgOdT9NX0jIg3bla1/HAzelV11Og3clD39/cjRZf55d7T5yOtJywp3/bM1xlhta/MLh9GxybTstW1f7v10LyE38Ovj3dR2ob9kIHeHQ9nTcA+7YEO298of86W1GvUDUI+OpW7uKG4O03zleSj028hA+sA1bX8JWH7diR1J97yldpx87whd2jyN+yJ/fZvQlo14g6qb0or1EPz4w9pVfTz+O+CF/fpvRl4x6gaiv0kxGSbwmUjus3hI5FtpD4+u2Df6lwfsW5+G0zqpGPV+IG0ckrsEcJ+VBftFW0i+S9prSKBonU1X1a3M8CFB4FCA96O/aavxF476BeSio5bHQayHjOPitkOOIH/Lntxl9yagXiPqrzgdHiV8PGDub3g44Jv4gvmIr2BfBesWoy/I0cNT4Gf2xz+kR/WPiD+IrtoJ9EaxXjPosz/722ocJXiSvpItb8aigoHotHFH+AePC05HDnuKflHUcf9e4IPr14sLo14t3bGlHOWUrHjIVJE6KCk8nGoXGk6KC5ElRUeikqLB46FVQfDr0wyRcgq6IDp1OohDozX6unvjGOGwg40whgTgA9jAg9GkCOsYGSA0AoDpHjvykXVxeaF5aqO1gpEbicA3HMTvOAzctjd6VFAKTYhwMUzCMU0TyZeCbxmXgm4OXgSOEMOkfgdBiDNmBn4DQLVL42j8AoRvEUDZ+/kGrFNao3rTCxCEmVQW6/knNY9+KNsN/SHNPP43utHfcT+hOgKJ9Ok+W/QndCRDfA3LFHdSZXVVyZHfK9ij/SoYWaCyHfiVDN8kjbPxKhlb1uFu/kqFlikbjVzL26iKszouwBi/y6ruQ6+4inwct8knPonHSs2if9MQrAvj1+QchtEC7av8gxNig/v2XbUa9QPT16u/P7qXbCV7pLFux2goSi3rhqQoLjYt6QXJRLwot6oXRlc7CwpXO2wn+2d1bHDEg6N2e3k3qTWXbikddd2mwwNMh1t0k3DA2JP9GxN0k3h42RkdZdxO8GVzJ7uD11LbcHsU9FH335C4+4RURBaH1fFcUczjE012R68CoZ7uiwCHKT3YFDMHKt5LvUrUzz7HD37t7Qohip3/vjsUcu/R7d8x17PLv3bHAsePfuyMMscNLLhQIjp265FKl9JtCT6TAcTzwm0K6iYip/k0hrTbi2/hNIS2nWMvfFJIixj0tITKUaQ6aS8jYoN47gzkwRNE3ruJuYo64SRRr4zrKJnN8TeDImhBjivcbTyPqcyA4gu2bi8sJ3llbhnV4t+V/uGkZdrXMe1nqHaB3EYJd4UXck9iqzx/kPbcdbpmucCoOHUlXOE9E+77xPdyvrzw3Aoeu2DV5uRIpdEs++xEodengsx9LvGpHCLqCV+1OYqs+f5B70H6Kg47FsRekQGdIgT6R0je/jXvIcu5ouF7IDDoXrheeULtefJa7cuCxkXrWgX3IB9OGoAd4fE0f5P2r4+tRQksiBLuvCHafjWvZMK5l27g+T/D84DN+FlA6K6gXzFp3GKPeEuM9RvoqU1+4uug+3Ncv3f//m9NnptYPXscPGa73DIXmN3wjjnGMmrrpG1vEa49BC3ERY1jFsBiuHVJavRostdBZ0WI3t88ErjtUWvzFUtLqTWuthu6oFnnyq+SFMgRp96wHbsUJK6j2EpF1DuB4/f2ZkeugW/o4urF6KFt2KcsRXb8ywV569y9bxq08EHXlvPBU1IXGk+yC5El2Uegku7CYvQXFK+c7ZFfOPWx/hAbrMO51NJcVZhEimx+EjVje11s5ZSO0cv5QL0yu9oYHG+GC7Cra3QjtdrsPzRBNlHFKO+ece3Qvv0ay4uvcklPRnqn2uBiipDQuo2lPSFF6Vr4UqDF+ma0m5pQ1ifLWuE5ekzmDTaA0Nk65zM9O8DT8kZuuc+A4v41TkjvnTHfl0AR5bhtRiQ8nDZTJfSaxDsS5wKjY8xweEUOUDMapGJxzMfBfqngW8XVuycVQORSDISoG4zLW6Y9H0A6WAjXGL4tB/e0IlqgYWn87gmUuhvS3I5hTMaS/HUHT8Eduus6B42IwTsXgnIvBlUMT5PluRBUDXMGiTO4zicUgLl9VJVxUwZKIAidGVLk8SE1FEnUqlSBetz6Vyibfr3uqBC6hg/frVJtUTukGlxYORlAXWPMGl27AxXbwBpdulApP3+DSKhdhUFMpBvWP1sfWrWlIxRlVLlFSU6GS/vU0gLqMXJYuXwqV1de3OBVz6zroXo/Xi2qYEOUHEj0gATbuAcJLjXQKPG6Vv905vuhnyJ/1IU63yIN6YadQlUwT2f0JyvHM3JAlB3G8EBClevY+npa/yOKo7PN3mMOJO1rZigVeUDUbQKLQC0/VXWgs6YKoRAuj+4mFhfuJhcT6fADrfWFk518nvhVvOj4kpwKebkY+oCcBIiMCxX9xzVm1HEB1HI7op8u2MLRTI27N2+zH24YJb6XzbrPdbpseuxXGus1uus0WusWh7Qeyu4Ls9x3KVry1UVB8rm6P8o2OwtM9jj1Nz9UVHO96FER3NAqjmxn9WCsnvhXzqsdaASRSradaARpTrQ+1Asx/ws/ZWCtAYo71qVb6MA99noc+z0PfmIdezkOv56HP89CLeegb81CK4KltWRE4ikXgHIvAqRWBIy4CV7wInFkROLIiMET1XRdEzCpDlFrGKb+MqyQzMWeaSZRuxjnnTODEMyFmn2FKQb7MQqGAdDBEGWmc0tK5yE0Tc4K6lLPUNEpV45yvJnDShms3TyOi9G1cuyExJ3K+dkNcp7S4dkMCJXe+dhM5pzncpINMR0rJjhLlO0oq5VHPWY8qJT5KnPuocfqjFisAFSqC/C6IiBWkG1KqBpSoIIIkagL1XBZBzZWBMhUHSlwfqHGJgAZVgpQKBSVVK6jnckGVKgYlXTTYgusGNSodlKh6xGtAY1L8OYHnmP+EHAASnlj+k2ccMJ9n/UnzCzQ8hfwnziag+Lzxn+DjTGKn2cUTzt0XHp6UNBB2cMY0pOTfI68nm10mcVyG47gc53GZlsblShqXSXFchmlcxmlc+JJUp2kcX5DiGKOUxxn0NNaopvEGOY45SDTuoMHY//O//w/7Vd1G",HelveticaBoldObliqueCompressed="eJyNnVtzG0eyrf8KA0/7RMhzRIq6+U2+zMX2mJYsEuJMzANEtihsgYQMEITaO/Z/P41CV+bKlaug86JQf6uArsrKXNVX8H8m3y9vb7u7+8m3k4t/btazm+7o+PT0xcnRsxdPXzybPJr8dXl3/+vsthsa/L1bPHT386vZN98tF9dn7xfzPzbdrslmseAmR7smR9Bmdjtf9NxqEKbd/Objbve7Dwzb/7ifLeZXr+5uFkPLb45PBrL+6/xLd/3b/P7q4+Tb+9WmezT5/uNsNbu671a/d7vP/vjlvru77q7fLG9nd2Onv/tu+WXy7b+/OX5++uibk5MXj46Pj08fvXx28p9Hk/Oh8Woxv+t+W67n9/Pl3W5Xjx+D8Pbj/OrTXbdeT759OvCLbrUuzSaPH5/85fHjx8NOfl0OQ9gN5/vl5361G8XRf139n6Pjly+ePtr9+7z8+3L378vH5d/nR6+ul++7o9/79X13uz76x93VcvV5uZrdd9d/OTp6tVgcvdl9z/roTbfuVg8D9YDO10ezo/vV7Lq7na0+HS0/HP0yv1ve95+7b4ZGi6NXfzua3V3/3+XqaD58wXrzfj2/ns9W8279l6GzPw67up7f3fx+9bErc1B68vv98JHZ6rqqQ8PvZ5//Pk7J8+MXjybv6tbTJ8NcvFpf7QK9GsUfOtv+5uTx80eT3++v/z6dfHu8E4f/X+z+f/p4P1//7O5X86shoP/+n8n03eTbk+dDo1+Hrqw/z4Y4/u+jPX7y5Mked1+uFrNb46fDPBb+x2Y5xOv9wpSnT5/tlbvN7fvdRN3cZe16uVjMVsZfDBNT+OdudbXL/yo8PznZC7PbQVoP8THJOlx6UGY89/rzbNXdLboPLYk+VrsxW+++cf3JO/5iHO7nxWadu3A1lO0s7+Jj//ljd5ebD0OZL8VI1ovZ+mMO1p/dapnp8q7L8H4rWt5/XHWi7YflZiXo/EG0Xc+/CNg9dGJuuxBTT4f5nUirq+VieZfxurudR8lmYLGzgUS7PzazRcY3q24oZx/ms+PjmjTdulhNVV4+fzrOvci+Vxl9l9H3Gf3ge372fI9+zJ35q3+wpsLf8nf9PSfMP3KYf8of/Dnv8RcvvRryf+YP/pr7dZYH9Ftu9Tp/15v8wd9zv97mD57nD174rJ2OEz3Nrd5ldJn3+K+cfO+HxexTdx9sw0L+ftBinfLnoqdYKs7WV/P51Xx1tbnNs7bZ2fZ6WH+6vMfib6Ez9rFZHs/73Ooqt7rOrURxfsgfvMnoY+7yPKP/znv8lFt5CduScJv3eJfRMqPPouqz1QsLXOdI3Ofv2uQPPuRK2OZWwkl7R7vjnmL6uau7/IqJcPLicc3KVaP9oWy8ny+um0v99XIrzD2szh6x+3Kc5slxXCvuw+7AEH3Wx6zWjg+L5Wou+LprfMvVZjUs41cewJMnWDbreTl0TdGtRy26rG4280G5Xd7rI4edXL74K3IMvSXOh7lg4vhpOJSThwPXs5ubTqTtnuOhGB1w7OauW3Wi9odjodnNavYZTO1pzazhdKITPujhfT9bH4jwYXWljxVsAqI+nBSMnx8Oseef1/O1kIax3n9cbsKxYlr2Q3L7zK1mD6IeZlebe3XoUrz8w6L7krVGZd3OrlbqcOf9qlM7vl7ez65Cxbk0H2YSA2DKCuvQO9tdDyFVx6ibu5vZanO7mG3EbpY3w2HmJ/F1MxwHzMttyFkXXvlhz5PnI1uurj8Mx3nhwNCPUOIi6wcgkfsezmAPz57aHm4Hp9sscBe2sszEYnu9K/r1Wixgi7hjX3kityOSpRjUUJ/DKfGQ9+Ic4h9pSt0JYgb68h/zxpcmOan+dXH2/Ogo96AuF9fzhzkktH8k9swPmEVxeLcbHzo/9KG+EYN1OfeiMoGh5q/0/YVScdyeiBnVg38m9s5ngj7gZwFpJ37OMHgEnIScVCdWA33+5HkVx6seYlfkOr52xjzwUeq4/Ko64OXRytFoqn6kL4djp1Ktb4vGCuFMVgkZooe5Zk/0w9e499OX9dRz+Wd3dyMy903chZ/FqUF6chwskkOZ+4oXEjuabYz1isfq5z85chbVtx+XKzGqM9q7h4GqwE70qOBP6yJGYbNqoh14xPTiVi5wrDflKGcl+htT0KPY4tFWzQRvN4v7+edFL/rVKP+3cYCWSMPx1v18trief/iQ56pvW8OvcT+esCJZvDYOptmBVactXTXGe9eywVbG/BoD5Ish1T9efhuOGPAanJ0CrZafujs8ETJzXHU383U89PUSjZMNy3Gui3qosd4MVR3ORzzYdAxphdmIzLKV6v9qfOBfVOGnL+uxa7nSFa+DWZx/vP+Y4fdNA1wo37Kx3DdMpmuuji3hVevw4UBWxgD7+XKrNHjf5gqtGWktPa1ldN3ac65j2/fBwxJeMetxQbe4FwZ+H0zaPXG7POCIqWv2dbcbMZLGGr6Ux5leC3zwY1ef4hHOiyen4ONDAq+GRF7n7/ud8/W0Tv6isZD8fHD9/SVOnJ9K2H0dZYrJFtwyYpict2r8l9hti8MQtY+zBSwNtch3pyaxwn0u1BJgvhwPmzzVvjKBjVLoWgO6iWaKAxqnVc2qPhv5XR4gWgbLnltCXA820amMbSz531MnbOEitzk1O7+eXymj/SF+ERyYHTrc/ZUOa627jXl7czivD+7rVeM7XzVNOp4O2AzE73EjPnBA+WNruad9+yVieXZnB2TxSMC+7WAp0ASZXx7c02J5s5vvu6UI97Jtppu8jtUMGr6qUck3Bye3g5XcY95I3zu5jtvFnbt80Oye31ruftzs7kb+59Hk525199tsvtrdQ/735NXubvXk0Tenj//zaNzau0dA+35GNJo6wr8NW099a+8qAeHAUDgL33OWu4BLb+A2VYHu6z+g4DxBGUMW2P7qUED7wkH0Omy9HbZe+laNGaIwehfOQyzO6+gBhdEDh9EDraMHRKMHxUYPbKzrwIqdILkYtl7Y1nTYemZbl8PW8bFv1iEhg74D3gybT3yrfhBQiAVw+D6gNRaAKBagWCyAWSyAjbFw8hAyYRu0Pm7lEfW552MjLE1DVBzGqUidc6VWBcrVENWscVm4VT3L380lbFzVsYm5mE2iijauy9pkrm0TqMCNU5VX/jojqHdDVPTOVeVX9TxHlD3AuDICE7MbmESWYFz7gslsDiawQ5gQbaJi8IqKwDAqQtcwxtZhgvCPqoGJGKK6M67sxMR2ZbKxGNfuYjJbjAnsMyZEs6n4ISfkNrfqBWoEQrjQaAboQoaovo2TCzlnF6oKuJAhciHj0oWqepa/m13IuHIhE7MLmUQuZFy7kMnsQiaQCxknF6r8dUbgQobIhZwrF6rqeY4ou5Bx5UImZhcyiVzIuHYhk9mFTGAXMiG6UMXgQhWBC1WELmSMXcgE4UJVAxcyRMVnXLmQie3KZBcyrl3IZHYhE9iFTIguVPFDTshtbtUL1AiEcCEMDVpR5FTpUSRTIpGdKchgT5GTR0VRGlVoctbYH1tWFJVvxRbZvKJODhZFbWOxDXtZVMnQokiuFsTXDQ7+FjmZHInK6UKT88a8sOdFURlfbJHdL+pkgVHUPhjbsBlGlR0xqtEWgwbeGDgYZODoklFgq4yq8MvQAEwzcjKMKCr7jC2+4itspFHUbhrbsKVGlX01qtFcg/bQqItto33f4ofiJ1zXCXouUjIqlMhvg8RuCyJ4LVJyWpSkz0KDM7kf9liUlMOinv0VVXJXlLS3Ygt2VtTIV1EiVwXptaTgqEjJT4Ok3BQanMvYs5OipHwU9eyiqJKHoqQdFFuwf6LG7ola9E5QwDmBgm8CRddEzJ6JmnBMkMEvkVK1o6S8EvWDXsA+iZJ2SWzBHokaOyRq0R9BeZAZvpVte03bkRKuOI4eLdEQmYpxMkPn7IRVARs0RB5oXBpgVc/yd7P1GVe+Z2I2PZPI8YxruzOZvc4EMjrj5HKVv84I/M0QmZtz5WxVPc8RZU8zrgzNxOxmJpGVGdc+ZjKbmAnsYCZE+6oYvKsiMK6K0LWMsWWZIPyqamBWhqj+jCubMrFdmWxQxrU7mczWZAL7kgnRlCp+yAm5za16gRqBEC5U+4o25Iwq3AUyIhDYiUwCK3JGXuSCNCOTz8T3sx25oPzI1WxIrpEjuaAtyXX2JFfIlFwgVzLhtWDgS87ImEBQzmTyuYgve5MLypxcze7kGtmTC9qfXGeDcoUdypVoUcbBo4yBSRlDl3LINuWK8CkTwaicUYG6oKzK1QP1y2blgnYr19muXGG/ciUalvEHkatb0a5XrBUT4Vq1Y+hazsgIXCDXAoFdyyRwLWfkWi5I1zL5THw/u5YLyrVcza7lGrmWC9q1XGfXcoVcywVyLRNeCwau5YxcCwTlWiafi/iya7mgXMvV7FqukWu5oF3LdXYtV9i1XImuZRxcyxi4ljF0LYfsWq4I1zIRXMsZVagLyrVcPVC/7FouaNdynV3LFXYtV6JrGX8QuboV7XrFWjERrrUaf9HDd1cJmUDF5FeG2a1GAbyqEnKqiqVPjeJZ+l72qIqVQ1Ut+1NVyJ0q1t5UVXamysmXKiZXGvHrRMCRKiE/MqzcaBTPUwzZiSpWPlS17EJVIQ+qWDtQVdl/Kmf3qTx6z0jBeUYCvjMSdJ2K2HMqF44zSuA3lVBlVay8pmrNmmOfqVi7TFXZYypnh6k8+stIH1LWbVObPhM9euEqY66jrRiiwjVOxuKcnaUqYC2GyFuMS3Op6ln+brYX48pfTMwGYxI5jHFtMSazx5hAJmOcXKby1xmBzxgio3GunKaq5zmi7DXGldmYmN3GJLIb49pvTGbDMYEdx4RoORWD51QEplMRuo4xth0ThO9UDYzHENWecWU9JrYrk83HuHYfk9l+TGD/MSEaUMUPOSG3uVUvUCMQ2YW+G+iruBU/W1B1DEAipIXrPcRAFkRBKoziU1gITSG1fB3tquvYtyydHIXuAscEc1q7C4imHBQbCDAbCLBxIHvywxj3U9+KbvoDxh2Q8NYfKO5Ao6P+EOIOzLoLbOwukGibP4wl71vTsLUr9Oe+VUcHCLrsdP97bHVyd2T8yTVDo/9i+AxRDI1TII2raJqYQ2oSxdU4B9cEjrAJMcyGKdaVX2Q0zQhCb4jibzxPQpVoJipO01FeCIzTURFPR+U8HZXL6aiimI4q8XRUnqajCmk6qkDTUTFPx8gvMppmhNNREU9H5WI6RomnY8Q0HX8dZ+KFb9VdAarxBxRCDxw6BLQGHJDFGpiFGdgYYSA1uI524zzxrToCQHUEgMIIgMMIgNYRALIRALMRABtHAKSOwFGdrePHhmymRvbTOFUnvhUH+hNOFSAx0J9oqoDGgf4UpgoYDfQnmCogcaA/wUCd2DgdbeJWHuamMaaNHNMmj4kPyUARo92I0W7CaH+e7E95nvhWPC4qSBwEFZ4OggqNB0EFyQPJotDhUWH1fAZQPBbaoXLc8tS27FjIUT2BQRQOj5zj4RFQe000YDtqcuTHRs782MjYcjcC37JIO4qRdo6RdmqRdsSRdsUj7cwi7cgibWgT4r7J+aHOO36eqFOOnyfpbONnkdWgiPzg04ufJ3xmsSO9LVBlKy7RBaWFNryLH+qCBAoBqSoa1CQHhhpQjEjV4aJGHDmSqchIpXqLKiQ/CVSFpFJBsipqk5rkMuUGuWKpBRUvqVzHJHNJRxmqmwQqdFJVzVOTXP7UgJyAVG0K1Ij9gWSyClLJNaK6aSUSewmpXy8k4TDU4GAhNXyHGh0upORGJEdjiiJ4FAlkV6Qm5/plgtfwyla8fLdH4srdTtgd3o+XnXabUztG3W2VC1knvmklDgzr0nH8Bc1BOo2S4H6N55dJurzzy0Rd2fklv6PqiIJw8B1VUzEc+Abni4gwMPkNThZEiKrWilPQW2KfA8Fha7/1+EvMK4ggCRRHVlU0YxuMaVQgslHA+JLCUSZZxDq2aEVctDrcpG+FkuegXcBjg9FecQ4MUfSdq7hXFSNeGcS6IoyyMY6vCSKyVWvFNOgtsc+B4AgaT7EbjtPKCeZT34q3HAqKd4MKEjcgCk/3HgqNtx0KolsKhdHdhMLCjYRC6nrp6K2Z+RnOOaIw3S5chO+Zhq13Ycuv0JxN0sWZs4m6LrOj9dzXd2nnviOqFgPTYIjmwjhNiHE1KybmqTGJ5sc4T5IJPFMmxOkyTHOG6w6FgWevse6QepG/e5rRu4xgWtNCxDxPcJVolivmqQ4vU8F8R06THkWa+Siq6Y8tcg5EnRIhipwNUeWUiGrMi6hRcqT3OlX0OE0Ovdepmlw09jdt8HcNDvmjX2+UYs6koFM6BY1zCl5EgYxCSvmEEmUTSiqXUM+ZhCrlEUqcRahxDqEWMwgVyh96hy3HiXOn/Q5bbnAh9zOV9J2kkDHq1S4h5WwBlXIFFM6U+qYApIkhyhHjlCDGVXaYmFPDJMoL45wUJnBGmBDTwTDlAr7sQ2HgLGi87EPqRf7uaUbvMoJpT+/GMM8TXiWa7Yp5quO5Oc44KzTxLNP8s6zSgNvkbOAWlBQsc26wzinCeswUVilhSH7bjCmnT5JVFlGji+Z+p03lXVOBDGOFEo3lnG/UgtKOVM4+e7of8s4ZZZwLlGsuqCxzNeeXa5RZLnBOucLZ5ErMI+eUQeFFHo4IZ03rRR6WL8T3TwV7JxjkRX7fJQk5F0yjLDDO819PN2H6DdHsG6fJN67m3sQ89SbRzBvniTeB592EOO2GadbxGgSFgee8cQ2C1Iv83dOM3mUE050uSjDPk10lmuuKearrU2Mw1YZoqo3TVBtXU21inmqTaKqN81SbwFNtQpxqwzTV+OAnhYGnuvHgJ6kX+bunGb3LCKY6PSfJPE91lWiqK6ap/m2c5fHJhN9whpHV2UVGT9a5EB6tc+zP1jmDR+gcwjN0Du0hOkd1BoH5czJlK14xKyg+0ViQuKtSeLquVmi8f1IQ3Q8pjG6CFBbufBQS7yr+BvM2Xk3codigy4Oy+4iI9KA6OahwmxBwHmsnxtqJsS5Ditn9PkDika/C062cQuODXgXJh8OLQk9/FRYfCS8oPtv1G1bHGP3XE3zEtGzFR0wLEo+YFp4eMS00PmJakHzEtCj0iGlh9IhpYeER09eeRj6MOrQ9eTPZ382HrfhsTkHi2ZzC07M5hcZncwqSz+YUhZ7NKaxOEaD42NGb0Z9hq2Y+ouDKLpzHrTze88Z4z+V4z/N4eSJBEeM9p2eR3sBEOvFl5M0EHzJ8M64Url3GpfkNrQ8jrVcxYfYNUUiMq7iYmINjEkXIuA6TyRwrEyhBjFOW4HVoRpQvjevQpJ4L1IiVzCET27HibDJ+OFYpr0zg5DIhZli+1G4Icg2vq1Mrzjp1XX2U6oPEkHqGKJzGVThNzOE0icJpXIfTZA6nCZR6xin1Kn8rEKWec5V6VT0XqBErmXomtmPFqWf8cKxS6pnAqWdCTD18tJ0yBFIPH22nVpx66tH2KqXn2E6kwKE98BybbiLCrJ9j02oj5I3n2LTMqaqfY5Pq26bAyXvoeQfZ5rwpHIy5TurY5GsxTwke1f+fmOdkj3JK+ShT4qcHQWSWYhGk50DkJ1JBNJ8C2TcYpruc/b30rfoNgOoZE6AwKcBhD0Br+AFZOIFZDIGNgQNS89eRv6D6FksYkDjVeEvFCjSearwVZQkKnWq8xQIEFE81dmh3jvfCt+K7GgXFdzUKEu9qFJ7e1Sg0vqtREL2rURi9q1FYeFejkPiuxg5dLRc08nru6m12n3jmW3WUgKqxIMJRAodRIoVTV8B18IBs8MBs8M4+9p8/duWc68TYMoxqmWdr2ZiapZyaZZ4aPp0FRUyanc4CyjNkp7OOVnErD2QVvdyFdXc7z1O+CaW4yfaxaXjFRnrFJnsFP5IKinCRjXCRTXKRbZjwPm7lJO1z5uG7iC8JURDSu4jMVYTUu4gsUazyu4gscGz4XUTG5LV4/H5KiFxXH7+zmP03Hb8z106cj99ZIE9Ox+/EwcUMUa0YJ582rhzBxGwLJpE3GGcbMIEN3ITo4obJKPy1z4UKHZl6xV2uBbZ34+TxzoXRm9iuOWX5ppHvG2fzN4FXgCqkZaAKyxwMXhCMH8oBsTSY1MiBxiJhcitFeLkw3kgFXjgqXwnUGLpeR6oqFpMqwYpiqOGocm0xse2cvMoY10uNyS1jTYuOCdpYtznbeoEa5aRWo3Cgj2tSFDiOUeX1Kaoy1rGJiHhswHGPagpvlFOQo0yhjiKvZOlywKkUeFU7cDlANxErnL4coNXGate4HKBlXvn05QCpou1HgYs+qrwiRlV6YmwinDE2YH+MarLBKKf1Msq0akaRDTOo7GgkxnU0vkjXquW0pkaVV1ZS1foam3zNS+RaG1vwihvVtO5GOa2+Qc5rcHzJrhXOtB5H9esZqNbm2OBgBrbW6djocJqmNTuqBxMxrd9BXTWFg2FrrOihjVrXQwNc3aNwcG3SK31s8rXVJ636UW2s/bHR4SUqHwdE+dAStW3VQN8UDlpDPko4n+ATPed4PAAoPsdznlZ+4Ol64jmu8YDomZ3zsJoDC0/qnOO67aja6BMj9EMo9XoyjrXx6o1zGvWhV29czONvvHrjnCPRevXGhRiTxqs3xik66ZWVkTdeWSFOwTr0ygqJKmxfeWWFdArgwVdWSOVQHnhlhTQKqnx7Q0WQwyvf3giUQtt+eyNIKqwH394IKoX0wNsbQeNwNt/eCAqFUrzakGPFYcyvNjiiADZebXCuQtd+tcElClrr1QYXOFz61QbHFCh+JYBCwSFqvhKQFArY4VcCkqzC99VXAlILCuZXXglIOof24CsBSaVAN56F13HlsItn4YFRqFvPwoOgwnvgWXjQKKTNZ+FB4TA2noUHTqFLj45zVDhc9hPbEC5nFC4XKFwuqHC5msPlGoXLBQ6XKxwuV2K4nFO4TKBwGedwjb8cDMGqhEJVMQWqYhWmquUgVYVCVDEHqHIOT+UxOJVSaEZMgRkpheViDMkL34qnKxcYCkDibO+CQgA0ntddhKEDo2sIFzBkIPEkbYf8Z5nLVpy5guJZlgtncSumQkFivgtPc11onOeC5O8FF4Vmv7B6fgooTu8O7ab1mW/FU5aCaggAiesWhadTmkLj9YeC6KJDYXSlobBxxoDUETiKp7MXk/SI9g7FQXd5cuxKDSI9X52cr3AhBnCexk5MVkdlumN2ccWzc3dB5aVvxVPygsR5eOHp5LvQeMZdkDzNLgqdWxdWcwxQvJR7MclPbe9YvhCxo5sws5ucjZtG6m1k6m1y6vFlBFBEUm5EUm5CUk5H14Ot2Ospuh4gMZApuR7QOJBpcD1g1N0puB6QWEPTCT5wN0XvAiQe85qSdwGND3RNhXeBQo9uTdG7AMUH46ajd536VrwZMEXvAiRuCkzJu4DGy//T4F3A6Fdrp+BdQOK1/Cl41zEQvAo9Ha1r/yNlU7QuQPZ2CaD8C21Tsi6k+HaJ4/gTbdNgXcD87RJjZl0+1GVIuGUukmWjIpayIpa5Iti6QBG1YtYFKBcGXaidknP5vO2c69TGb84FKCaec0w8p5Z4jvhmkyueks48JZ3VlDTSh3rqc933qb4vR8Mbf6npEh0Pmb2RBiy+iAMCvokD2F7FAeZv3AD0V24A1nduANkbac521vfct+KLfJfJ+oCnd/su0foA0cSBYoMBVvMSUO22o5ktsJdofYDizeLLZH3A07HBJVofIDoCuAzWByxcR79E63NUS+gpkFv8ZebL0fte+FY8n7hE70OUzycuyfuQgvcBjqcZl8H7gNFpxuVodDAEczpk6tXMS/I6xPRq5qVwO5T4rc1L9Dtk9Ibm5ST/GPYlWZ7P1yY22oiBbloD3eiBbsRA2fdQUgN150MYX0+9tOv0YAbpJkQS2NP0bYikCndLNyKSkHwu34pICjleuhnBAnhfeseMuXJB9Y4ZS+SHrXfMWGZnTO+YMSePrByM0hC5pXGyTOPKN03M5mkSOahxtlET2EtNiIZqmFzVbzKFUuV7T1wDYHOGyGmNk906F55rYjZel7L7mkYWbJx92AQ24yosxaCTLZsgLctU4VumsXmZ0HAw05ONmcKmbQI7d7qTyILw8CptRPPk5iYcjI/yddNa8Wk5vOnN+GSvN4UMn275VSdU9/yUxs7fvOunGgj/V/f9lJZWAXnnT4m0Fqh7f0KDFQEpLQooqXUB9bw0oEqrA0p6gcAWvEagRssESrRSgASLBVJaL1CiJQMltWqgnhcOVGntQImXD9R4BUEtLiKo0DoSbgYHxxC3iUWBgWkjpTUFJVpWgiRWFtTz4hLUvL6gTEsMSrzKoMYLDWhLHZK03KAmHRUbCFNFmX0VtYa1YpPkrijyAoQar0HqUQGhiZUI1I3+UFqPUPtaANWqhPKBALbWJmxyKIB5hUIxLlJDOU38V0LKlv+uj6F4/8mF3d8k3P+Vh93WNmz5dZ6yFa/zFJSu81TXwx4Zom4Zl32rKnSwom1Gfe4B99d47vTYMey0Ieq0cdnpqkKnK9pm1OcecKeN506HZ5Wg55FT96MoxxCawEAC3zZ43+gfjyuKeXCQ7jA0pDQwlOSwoAEMCuhW0l72iYeDUh5MfcwHRmKIhmFcjqGqMICKthn1uQfcb+O50/bYB/TaGXXbBdlvk6HjxraC9aIf3HcXcuftIQzovDPqvAuy8+HP048dDX+enlkv+sGdl3+eftTGByWg65VQxyuW3Ya/ej12EP7qdSR92jd3V/zV61Gpv0AHvTVE3TUu+4t/JHfsHv6RXEJ97gH3Wf2R3L30fqAL23PZ8uMEQ6qXRfCDm4o24avp7+G9T8cawGXf6O/hvRcHFKDQjdD34fABWPi1ivdjpH2rj1t5DDmOVwP1QOy2PgXtk/oBkasx+LAV93WVgw9CvMV7NXbce9DHmbyijo+0Hgt8zAiGYEj2pqoLgWhExg9/EY0Nj22okzxKdWwzSvbia0YwVEOyh1VdCERDNX74i2io+L4kdZKHqt6XrNJwWrdYzGiwBnG4DnU/TV9IyIN25WtfxwM3pVddToN3JQ9/f3I0WX+eXe0+cjrScsKd/2zNSZYbWvzC4fRscm07LVtX+79dC8hN/Dr493UdqG/ZCB3h0PZ03APu2BDtvfKH/OltRr1A1CPjqVu7ihuDtN85Xko9MfIQPrANW1/CVh+3YkdSfe8pXacfO8IXdk8ifsif32b0JaNeIOqm9KK9RD8+MPaVX08/ifghf36b0ZeMeoGor9JMRkm8JlI7rN4SORHaQ+Prtg3+pcH7FufhtM6qRj1fiBtHJK7BnCTlQX7RVtIvkvaa0igaJ1NV9WtzPAhQeBQgPejv2mr8ReO+gXkoqOWx0Gsh4zj4rZCTiB/y57cZfcmoF4j6q84HR4lfDxg7m94OOCH+IL5iK9gXwXrFqMvyNHDU+Bn9sc/pEf0T4g/iK7aCfRGsV4z6LM/+9tqHCV4kr6SLW/GooKB6LRxR/gHjwtORw57in5R1HH/XuCD69eLC6NeLd2xpRzllKx4yFSROigpPJxqFxpOiguRJUVHopKiweOhVUHw69MMkXIKuiA6dnkQh0Jv9XB37xjhsIONMIYE4APYwIPRpAjrGBkgNAKA6R478pF1cXmheWqjtYKRG4nANxzE7zgM3LY3elRQCk2IcDFMwjFNE8mXgm8Zl4JuDl4EjhDDpH4HQYgzZgZ+A0C1S+No/AKEbxFA2fv5BqxTWqN60wsQhJlUFuv5JzRPfijbDf0hzTz+N7rR33E/oToCifTpPlv0J3QkQ3wNyxR3UmV1VcmR3yvYo/0qGFmgsh34lQzfJI2z8SoZW9bhbv5KhZYpG41cy9uoirM6LsAYv8uq7kOvuIp8HLfJJz6Jx0rNon/TEKwL49fkHIbRAu2r/IMTYoP79l21GvUD09ervz+6l2wle6SxbsdoKEot64akKC42LekFyUS8KLeqF0ZXOwsKVztsJ/tndWxwxIOjdnt5N6k1l24pHXXdpsMDTIdbdJNwwNiT/RsTdJN4eNkZHWXcTvBlcye7g9dS23B7FPRR99+QuPuEVEQWh9XxXFHM4xNNdkevAqGe7osAhyk92BQzByreS71K1M8+xw9+7OyZEsdO/d8dijl36vTvmOnb59+5Y4Njx790RhtjhJRcKBMdOXXKpUvpNoWMpcBwP/KaQbiJiqn9TSKuN+DZ+U0jLKdbyN4WkiHFPS4gMZZqD5hIyNqj3zmAODFH0jau4m5gjbhLF2riOsskcXxM4sibEmOL9xtOI+hwIjmD75uJygnfWlmEd3m35H25ahl0t816WegfoXYRgV3gR90ls1ecP8p7bDrdMVzgVh46kK5xPRPu+8T3cr688NwKHrtg1ebkSKXRLPvsRKHXp4LMfS7xqRwi6glftnsRWff4g96D9FAcdi2MvSIHOkAJ9IqVvfhv3kOXc0XC9kBl0LlwvfELtevFZ7sqBx0bqWQf2IR9MG4Ie4PE1fZD3r46vRwktiRDsviLYfTauZcO4lm3j+jzB84PP+FlA6aygXjBr3WGMekuM9xjpq0x94eqi+3Bfv3T//29On5laP3gdP2S43jMUmt/wjTjGMWrqpm9sEa89Bi3ERYxhFcNiuHZIafVqsNRCZ0WL3dw+E7juUGnxF0tJqzettRq6o1rkya+SF8oQpN2zHrgVJ6yg2ktE1jmA4/X3Z0aug27p4+jG6qFs2aUsR3T9ygR76d2/bBm38kDUlfPCU1EXGk+yC5In2UWhk+zCYvYWFK+c75BdOfew/REarMO419FcVphFiGx+EDZieV9v5ZSN0Mr5Q70wudobHmyEC7KraHcjtNvtPjRDNFHGKe2cc+7RvfwayYqvc0tORXum2uNiiJLSuIymPSFF6Vn5UqDG+GW2mphT1iTKW+M6eU3mDDaB0tg45TI/O8HT8Eduus6B4/w2TknunDPdlUMT5LltRCU+nDRQJveZxDoQ5wKjYs9zeEQMUTIYp2JwzsXAf6niWcTXuSUXQ+VQDIaoGIzLWKc/HkE7WArUGL8sBvW3I1iiYmj97QiWuRjS345gTsWQ/nYETcMfuek6B46LwTgVg3MuBlcOTZDnuxFVDHAFizK5zyQWg7h8VZVwUQVLIgqcGFHl8iA1FUnUqVSCeN36VCqbfL/uqRK4hA7er1NtUjmlG1xaOBhBXWDNG1y6ARfbwRtculEqPH2DS6tchEFNpRjUP1ofW7emIRVnVLlESU2FSvrX0wDqMnJZunwpVFZf3+JUzK3roHs9Xi+qYUKUH0j0gATYuAcILzXSKfC4Vf525/iinyF/1oc43SIP6oWdQlUyTWT3JyjHM3NDlhzE8UJAlOrZ+3ha/iKLo7LP32EOJ+5oZSsWeEHVbACJQi88VXehsaQLohItjO4nFhbuJxYS6/MBrPeFkZ1/PfGteNPxITkV8HQz8gE9CRAZESj+i2vOquUAquNwRD9dtoWhnRpxa95mP942THgrnXeb7Xbb9NitMNZtdtNtttAtDm0/kN0VZL/vULbirY2C4nN1e5RvdBSe7nHsaXquruB416MguqNRGN3M6MdaeeJbMa96rBVAItV6qhWgMdX6UCvA/Cf8nI21AiTmWJ9qpQ/z0Od56PM89I156OU89Hoe+jwPvZiHvjEPpQie2pYVgaNYBM6xCJxaETjiInDFi8CZFYEjKwJDVN91QcSsMkSpZZzyy7hKMhNzpplE6Wacc84ETjwTYvYZphTkyywUCkgHQ5SRxiktnYvcNDEnqEs5S02jVDXO+WoCJ224dvM0IkrfxrUbEnMi52s3xHVKi2s3JFBy52s3kXOaw006yHSklOwoUb6jpFIe9Zz1qFLio8S5jxqnP2qxAlChIsjvgohYQbohpWpAiQoiSKImUM9lEdRcGShTcaDE9YEalwhoUCVIqVBQUrWCei4XVKliUNJFgy24blCj0kGJqke8BjQmxZ8TeI75T8gBIOGJ5T95xgHzedafNL9Aw1PIf+JsAorPG/8JPs4kdppdPOHcfeHhSUkDYQdnTENK/j3yerLZZRLHZTiOy3Eel2lpXK6kcZkUx2WYxmWcxoUvSXWaxvEFKY4xSnmcQU9jjWoab5DjmINE4w4ajP0///v/AGoZ428=",HelveticaObliqueCompressed="eJyNnVtzG8mxrf+KAk/nRGh8eBWleZPnItsaD0dXWNvhB5BsUdgC0TLAFgjt2P/9AI2uzJUrV7X8olB/q4CuyspaVX0p8H8mP7V3d83yfvLj5P3fu/Xstnl0fPbsydGjJ89Oz55MHk9+bZf3v8/uml2BvzSLr839/Hr2w+XVYv7vrtnL3WLB8iOQZ3fzxZYL7IRpM7/9tD/r35ubeXe3I3+9ny3m18+Xt4td2R+OT3Zk/ev8obn5Y35//Wny4/2qax5Pfvo0W82u75vVm2b/6V8e7pvlTXPzur2bLYfa/vnP7cPkx3/+cHxx9PiHk5Pzx8fHx08ePzs9/tfjybtd4dVivmz+aNfz+3m73J/q6AiEt5/m15+XzXo9+fF8x983q3VfbHJ0dPKno6Oj3Ul+b3eN2Dfop/bLdrVvx6P/c/1/Hx0/e3r+eP/vRf/vs/2/z476fy8ePb9pr5pHb7br++Zu/eivy+t29aVdze6bmz89evR8sXj0ev8960evm3Wz+rqjHs35+tHs0f1qdtPczVafH7UfH/02X7b32y/ND7tCi0fPXzyaLW/+X7t6NN99wbq7Ws9v5rPVvFn/aVfZX3anupkvb99cf2r6Xuhr8uZ+95HZ6qaou4I/zb78ZeiUi+Onjyf/KEfnJ6ePJ8/X1/tArwbx58aOfzg5ung8eXN/85fpTnzS//f97r9Pnx566+/N/Wp+vQvnP/9nMv3H5MeTi53w+64i6y+zXRT/9zHh5uF6Mbszfnp+fuD/7tpdtK4WppyfPzkoy+7uat9Nt8us3bSLxWxl/OmuW3r+pVld79O+CE+eXByE2d1OWu+i4zU7OYEa9P3ttTs9Hb5vtmqWi+ZjTaKPlWrM1vtvXH/2ij89Gz616NY5ONe70TrLp/i0/fKpWebiu6bM25vM14vZ+lMO1rdm1WbaLpsM7zei5P2nVSPKfmy7laDzr6Lsev4gYPO1EX3bhJh6OsyXIq2u20UrIrRu7uZRsh5Y7E0g0ebf3WyR8e2q2Q1m0cydD657oynK8dHxkNEzkX7PM/qzoYuSiT9l9HP+4C+Ojo8P6Ff/YInAi/xdf8lx+qu3bG+Xe/S3fMaXuf2/+dgr2fr3fMbfc70u89f/kUu9yt/1On/wTY7E2/zBd/mD7w09Oxt6eppL/SOjD/mM/5WjerWbyz4398E3XNxpcaDy56KpnD0xU7mez6/nq+vuLvdHt3ft9W76gTESDC5Uxj42y+gqp8S1MGAxbnODPuZStxl9ylWeZ/TfuV6fc6lFzksRLeE6wve+iGGfTXqV6yUcXsS+yx/8mrN3k0s9ZLTN6BtU9czzKybCyZOjkpWrSvmYjeaMfTbezxc3TQ7JYa6/aTcizmF69qngvl+meXIclxH3cb8uRKO1z2zV5PFx0a7mgq+byrdcd6vdPH7tATx+dgzDZj3vV66piWXZoofVbTffKXftvV467OX+i78jU+hLz36cCyYWULuVnFwP3Mxub9WcduC4FqMVx77vmlUDY//0whZDs9vV7Iuf7fS8ZNbuUqKBjAuu1DfzarYeifC4utKLBeuAqO+uCYZa7VbY8y/r+VpIu7bef2q7sFg0ty/zfkhu77nV7Kuo7Oy6uxf44OUfF81D1ioj6252vWrFia9WjTrxTXs/uw4jzqX5ricxAG5oOA69srsLut2aWyxSu+XtbNXdLWadOE17u1tnfhZfN1uFxZP1y13IWRee+7Ln9GJg7erm426hF1aGvkKJk6wvQCL3M1zCGZ6c2xnudk7XLfAUdrUxE1PezX7Qr9diAlvEE1tKtZHbiqRtctnd+NxdEe/yXkwxf01d6k4QM9Cn/5g3PjXJTvWvi73nq6NcgzJd3My/ziGh/SOxZr5gFoPDqx0/5Cs99SGbIikGNln3F180TKCp+Sv9fGGoOK53xIzGg3+m0kMdfcCvAtJJ/Jph5xFwEXJSnFg19KI4+HW56SFORa7j68KYB95KHZffVQV8eNRyNJqqr/Rlc+xSqvZt0VghnMkqIUNmsvlr9kQbivN49rOLoc6L9luzvBWZ+zqewq/iRpOzGx0kQvThVZtIVpW2XnNb/fonR85O8/ZTuxKtuqSzexgqbvCG+FmZxChsNpo4Yy1ienLr73Csu36VsxL1pRS0KNY42WoxwbtucT//stiKelEDPclDA88uyqXJbHU/ny1u5h8/5r7a1q3h93geT9ixZPllNM1GZp0sWTpVhueyZoO1jPk9BsgnQ/oivP+2WzHgTTi7BFq1n5slXgiZOa6a2/k6Ln19iMbOhuk4jwtzjm43qsP1iAe7soZcVSLTUmR8XFZS6r9ohJ89K2vX/lZXvBFmcf7l/lOGPyUDNDNXvnV6PLTxvjJvNNXZsTYLPq8tH0ayMgbYr5dpaNitCK6UuUKtR2pTT20aXdcGZR7Hdu7RZQnPmGVd0CzuxQ2f+2DS7ombdsQR6/G960RLKOYWKrnO9LFAofcr1bjCeVpuWPQ+vkvg1S6R1/n73qR8ffas5Kte0b4cnX9/ix3nlxL2WEeZYrIFt4wYJue16ey3WG2Lwy5qn2YLmBrKIN9fmtCtbuuLMZdfxmWTp9p3OrAyFJpag26jmWKDhm5Vvar77o1cIFoGy5qflR682dmEeujRxi4CK9SW1sXyZ+dm5zfza2W0P8cvgoXZ2HL399g/Xt1Kv70ez2ulurdWltDPqyYdLwesB6jOZsQjC8pfatM9O4XdIpYNtQVZXAnYt40OhUoV7kfPtGhv9/29bEW427qZdlkqQ3n3VZWRfDt+RQszuce8kr5LOY/bzZ1lXjS759fG+C/d/nHkvx5PXjar5R+z+Wr/EPmfk+f7h9WTxz+cHv3r8XB0cI+ADvWMaDB1hC/i0cFVAsKGoXAZj3IVcOoN3Loq0MP4Dyg4T1CGkAV2uDsU0GHgIHoVjt7ujo5P/LAELbDQflDe7Q7P/agEAFAIAHAIANASAEAUAFAsAMCGoR1Y7yhI3u+OLuxoGrQP+wYe+WFpEjKoO+AuhLXLydBVkqGTydDlZOiqydCJZOgsFsCGWDj5ujs6s6NNONrGo9IiQFDzgQ6FcHQaopAYp3HqnAdrUV4IRMPWuBy7Rb0UqFJLOZRNzF1oEvWjcd2ZJnOPmkBj3DgN9MJfZYRD3hiPexfk4C8yOIAhsgHjygtMzIZgErmCcW0NJrM/mMAmYUJ0ioLBLgqa5lJoHMbYPUwQFlK0LncYm4nxsZwUtmJSJScrBmNyLSeT1ZgQ/aZgMJ2CNhltBSIPMp6NaPADNCJDFE7jZETO2YiK8kIgMiLj0oiKeilQpZbSiEzMnW4Sdbpx3ekmc6ebQEZknIyo8FcZoREZYyNyQRpRkcGIDJERGVdGZGI2IpPIiIxrIzKZjcgENiITohEVDEZU0DSXQiMyxkZkgjCionW5w9iIjI/lpDAikyo5WTEik2s5mYzIhGhEBYMRFbTJaCsQGZHxbEQYGnSjyCmwUSRfIpHNKcgvapxsKorSq0KRyxofa4i0rlgi50rUKWGiqLMmluHUiSp5WhTJ2IL4qsLR4qLAPkeqNLtQBhwvcrK9KCrviyWyAUadXDCK2gpjGfbDqLIpRjU6Y9DAHgOfVsqjUUaB3TKqwjJDga6SCmyeUfzu0BA2GvWxoVEx1FhmdGgka41q9NeggckGvqnwbY2T50YxG68TtF2k1CEokeUGiQ0XxBeaktmiJK0WClxqWq+6NFnUcx6hSlmEks4hLMEZhBpZK0pkrCC9khRNFTFbatCkoUIJsFOkZKYoKStFPRspqmSjKGkTxRJsoaixgaIW7RMUME+gU1kWjRMx2yZqwjRB7mQ3s2Gi9J0kF2aJaj3JK0aJJUaSPJkkatEiQQGDBLqRdKspWSNK2RiH1qMrGqKQGyc/dM5mWJQXApENGpceWNRLgSq1lNZnYk4JkygfjOtkMJkzwQTyOuNkdIW/yggtzhj7mwvS3IoMzmaIbM248jQTs6GZRG5mXFuZyexjJrCJmRAdrGCwr4KmuRQalzF2LROEZRWtyx3GZmV8LCeFTZlUycmKQZlcy8lkTSZEXyoYTKmgTUZbgciLjGcjKnVFJ3JGAXWBvAgENiOTXihGduSC9COTLxWrVVZakqu5/12jBHBBZ4DrnAKukC+5QMZkwivB0JocsjeBIs3JdHAnZ2RPLih/cjUblGvkUC5oi3KdPcoVNilXoksZB5syNhXl0KgcslO5IqzKxE50IZuVC6PpKuzKtVq6VgzL9Wq6JstyJXqWcTAtYxvBtoqRb7mQjatUDI3LGQXXBTIuENi4THqhGBmXC9K4TL5UrFZZaVyu5kxwjTLBBZ0JrnMmuELG5QIZlwmvBEPjcsjGBYo0LtPBuJyRcbmgjMvVbFyukXG5oI3LdTYuV9i4XInGZRyMy9hUlEPjcsjG5YowLhM70YVsXC6MpqswLtdq6VoxLter6ZqMy5VoXMbBuIxtBNsqRsblQjau1fBDH16FQiiwBZNlGWbDGoQXmZBZFSytahAvM9HVkyZVtNznRaEeL1j3d1G5twsnayqYjGnArxJBUyqILcm4NKRBBTsqhMyoYGVFRctGVBSyoYK1CRWVLahwNqDCo/0MFMxnINNUBo2nILadwoXpDFKXuocNp+CRxBNmUxSdeBWjKWol8ZLJFB4tZqBgMAPZJLLNhKyl4GwsQ7qjsxiiEBonb3HO5lKUFwKRvRiX/lLUS4EqtZQWY2LuapOor43rzjaZe9sE8hnjZDSFv8oIrcYYe40L0myKDG5jiOzGuPIbE7PhmESOY1xbjsnsOSaw6ZgQXadgsJ2CprkUGo8xdh4ThPUUrcsdxuZjfCwnhf2YVMnJigGZXMvJZEEmRA8qGEyooE1GW4HIh4wnI/rzkJvHfuSdYSjED3joHqMlaoAoYKBYrIBZmIANEXJy+F2vxz+cGBl+uqugn6DQqRErNKDyShyVLJiLD8OfixecihdrTh8wgT7y8w49t+7pj2Jn9qi4OKDQR8BTl/e09BEg6wlg1hPAhp4AUizVkXvBz4MNuLZ3gGd+VFoHCKrstATQv9YiN6DSCRA+QxRD4xRI4yqaJuaQmkRxNc7BNYEjbEIMs2GKdeHvcximuRSE3hDF33juBM59Ol/qjn4fYeyOgrg7CufuKFx2RxFFdxSJu6Pw1B1FSN1RBOqOgrk7Bv4+h2GaS2F3FMTdUbjojkHi7hgwdcevQ0889aNyKkAl/oBC6IFDhYCWgAOyWAOzMAMbIgykBNfRzBYU/VFcQfWotACQWE/1PC2lehpXUT2iFVLPaHHUs7Au6klpgaPSW8eOfIXRH8VFTI/iyv+A8pKm52k1c6C27S/guL7pEa1dekbLlj1r41Guc1upYCsr2OaatHKR1Suijm1c7vcorvR/xTEB0V/tx+W5HZkzOSrRRxQW+wfhb8MIO6w+/oYjDFDJT0AhUsAhUkBLpABZPIBZnwEb8hNICZGjWTzKLZjlFswqLZjJFsxyC2aiBTPRgllqwSy3IK60/paXWHvUhY90uZldpU2dbFOX28QXCaCI1naitV1o7cvJ4Tr83I+i/fVIeF3Pk9f1NHpdj+TFYq+QC/asjDpA0fJeDv525kdx7n+J/oYoz/gvyd+Qgr8BjtP/y+BvwGjSfzn4GxzlOreVCraygm2uCfsbKKKO5m+A4trj5QSviV9O0uXwy5TVwJMrv5yk69+XIqtBIVd+OckXvC8nfK27J9uQLduc1ducvcGAcVyQQF9GqhotVOS7p6YxRKoeTlSIRxbJNMhIpfEWVUgPEiijSaUByapIfSqSRwEXyCOWStCQIZXHCMk8pKPcVoXRsMgxT0W+13B2AlK1KVCh8bazVZBKrhFVMBASyEtIVbZCRbLDUAEyG1K171AhtiCS2Y1IjsYUxW1thLFdkZrs47fJcGP52A/tnjKyeDvZlffxcH9ZeWFH/d3VMz+0e3nA8Kad4/ijr1ky/sT41oL1GwYCUOrz38Ke6mNiHIfanmqS3wsGYQk7js+IcYDkjmPSaqEKOscLd+lSLDhyapfuIJV7LRg+Yxw+F2T48NYRMwgf3jsqLU03j5Igwle0WviCzuEr4jbHgsNnXIQvDM4QxKikUJKsAxoKva8qGNwghBBHJQU6yircoUQ16LlUCn0yQhnN1A1VIxwKDNNU6AZj3AEuyNAX+b1gEO6CMNDGOMQmiOAWrRbWoHNAi7jNseAgGk/h2y154W5DfxQvYnsUr9V7JK5re56ua3sar2t7RFevPaOr156Fq9eexGv1y6Hvz/woLjsvc3+78N5m1Muhjz0u/9gdPbGjD9b/l9jNgKDpTsttBD+l3UYYUPFp6AZD1BfGqUOMq14xMXeNSdQ/xrmTTOCeMiF2l2HqM5y/KQzce5XZm1ToR5y7TyOCHsXp/IIQ9a2azEmiXk6P/QYe9k5Cf0dOnR5F6vkoqu6PJXIORJ0SIYqcDVHllIhqzIuoUXKkndwqepwmY/u4VRFImLRt+VRwSJ20nflCcUqi6mZmpVM6BY1zCjadQUYhpXxCibIJJZVLqOdMQpXyCCXOItQ4h1CLGYQK5Q9tWc1x4typb1jNBSBvaMfmaaKQM7SP8yJTypfKLs6sUq6AwplStgRBmhiiHDFOCWJcZYeJOTVMorwwzklhAmeECTEdDFMu4MY+CgNnQWVbH6nQ/7jl7TQi6HncBXdBiPpc7YEjiXq7YO7qeJsDe5wV6niWqf9ZVmnAZXI2cAlKCpY5N1jnFGE9ZgqrlDAkv63GlNMnySqLqBAkEymQU6RAapECGcYKJRrLOd+oBKUdqZx9tocH8s4ZZZwLlGsuqCxzNeeXa5RZLnBOucLZ5ErMI+eUQWHHHkeEs6a2X49lyJSwhe2UGGRH2NZ2wYwyQm5qY42ywDj3f7nchO43RL1vnDrfuOp7E3PXm0Q9b5w73gTudxNitxumXsfbEBQG7vPKTQhSocfxFsRpRNDfeFfighD1tronQRL1dcHc1eWVUOhqQ9TVxqmrjauuNjF3tUnU1ca5q03grjYhdrVh6mp8sZvCwF1dea2bVOhqfOX5NCLoanwL+oIQdbV6B5ok6uqCqav/GHp5eCX9D+xhZKV3kcUXf0HAe2KA7dVfYP6GL0B/xRdgeccXUOlBYLPQMntDBVB8i7BH4sldz9Pjup7GZ3Q9omduPaOHjD0L7wn2JD5w+wP67fipocYyqT+KD5V6VBIUUX583fP00OlA4Ykr4Pj8ukf0PLpn9L7bnrXxKNe5rVSwlRVsc034cSgooo724BNQfDr+B46OIfqvJvgGfH8U34DvkXgDvufpDfiexjfgeyTfgO8VegO+Z/QGfM/CG/CvJ4e3Hk78KLp2j4Qx9zx5ck+jHfdIvsPUK+TRPSvxBxQd+PVgvqd+FF9tfJ0t14V3NoheYy8BEqP8NfUS0DjKX4teAoXG/+vQS8DC+H8d5ojXYXp4PUwDrn2II+g1mf9Ayy1K6H1DlALGVR6YmJPBJMoI4zotTObcMIESxDhlCd5kPiVE+VK5yUwqZI4hSh/jKodMzIlkEmWTcZ1SJnNemcDJZULMsHwf3dA0B+JDLsVZp26aD1J5sgqpZ4hSz7hKPRNz6plEqWdcp57JnHomUOoZp9TDB+ynhCj1Ko/XSYXUM0SpZ1ylnok59Uyi1DOuU89kTj0TOPVMiKmHLxBQhkxzID7kUpx66u2BIqX3/U6kwGk48r6fLiJSUr/vp9VKelbe99Myp6p+30+qmLb6jYaKKlM4lMFEjgKnc1RlUsciIrVjAU7wqFbSPBZKyR7llPJRpsRPL3rILJ3WQvmh9ok0IKpveRwKvJnwPsg3k7QP8g0/6yTMxXmbF+FUPG1xTEL6SGgWfyyI9NFdfuO1bH9I17I9o2vZnqlr2V7I17I9pmvZnvG1bA/5WraH8Vq2R3Qt+3YwsjM/iiPpbbIs4GnMvEVzAiRHx9tgQ8Diu6Nv0XAczWIjZqIH7Br8iaNaB8x0B8xEB/hlOHyviv8sx98uxP2j1+0CfPgtJCN8jqrQiNbaxXlgleY2urnh+hx5CYNXuxFRaFQUPm2/fGr6ennntbFIK5rT1qre6qq3oqf40h0lUX27dsdyucP84t2LrehQNGgl+of2cIGybu7mOTO6WKgTp+lqcet03DoRN37RGSURt051e5eTfxMPt3QoGoOvnA3nww3WpWTaYZ0E9mK9xzqpImRpl3USkj/nfdZJoWClndYsgGenqx/myr3V1Q9L5OO1qx+W2dHT1Q9z8vbCZ6LZyeVNIKs3Ptq/yvRNq/Vvsn8Tqt3LE4FxMhdf9YSBz4sh/hpVyzRDmMA25MJYqNSE4ZqYNUykqcN4LYx5EilKmkmK0IrCaU4xYbSdanYxrZYStXnG9Fpb04xjQiUz0txThJVitRCkqcgFOR8VWUxKRepE8TQ9mTDaBWqiMq3WBbUpy/RaF+TJy5TKqN0ItlWs1nw1q4ULjjC3RSV9Z5TTPBdlHfdYRkU/lkh9EOU8/0U9BzzqHPaophkx3ZQ5kwLPjiM3ZXQRMVPqmzJarcyalZsyWuYZVN+UkeqsGrI8p0aZZ9ao/gcZJWfZWGI8o/KMG+XvJFSafaPKTkv3BaLbyZsG+ovr7clzc5STO5P8/ZDL2ZpKqDk7FuGZO6rjnSJm8aDnuTzIbfWDeV6P8n8QHTnHxxLjCVmd72Op8QjluT/Ko3mZ1wFBXtWV8fDllQHJen0QCqlVQijQVT+aVwxR/g86V64eYonxzq2uJGKp8c4Vq4qoj3rSpqps68p46PKa492w0DjzozhHvsMFBSAxV76jhQPQOCu+CwsEYHTv+x0sBIDEKe7dhF8/ejdJbx6VJwPY1rRDijm1Wu+QYjG3P+2QYs6RyDukWIgxSTukiFN0KjuLwuMRjJPeWSRFitjIziJZIsdO7yySIkexsrNIqjGeemeREimyY5ts4NESBldtshESBba6yUboOahqk42QOKByk43QYjDVJpssUSDrO1DKAziMYdqBwpyip3egsJjjlnagMOeI5R0oLMRYpR0oxClKlZ0b73h7Ql2hgNV2blRkFb6RnRuVEhTM6s6Nis6hrezcqKgU6NEtC6xy2MOWhcQo1HnLQhJUeOWWhaRRSMWWhaRwGNOWhcQpdJU3/J1zuOyPHTxXjMLlAoXLBRUuV3O4XKNwucDhcoXD5UoMl3MKlwkULuMcruEH3J9nQqEqmAJVsApT0XKQikIhKpgDVDiHp/AYnEIpNAOmwAyUwvJ+CMlTPyrhABR/S/R9CgPw9Fui77H5gOi3RN+HZgMLvyX6Hpvr6EVoz4vYcz2KV1wuXMajmAo9Ev3d89TXPY393CN5y6pXqPd7Fm9O9Sh27x75b8T2R3G7QY9KCACFhgBPmxJ6WhoCyKoLzHoM2NBjQEoLHJUr2zMg5TbQeUGxk5ucmHaPB5FOzEYmZrh/AzjnayPytRH5andkHLXxKDejrdS5lXVuc+X4Tgoootp2ywRQHlNwb8Q6BO9JeM91oWe7nI1dJfU6mXpdTj2+mQCKSMpOJGUXknI6uN65H8XXtaboeoDELogpuR7QuAtiGlwPGO3HmILrAYnbH6YTfHVyit4FSLwkOSXvAhpfh5wK7wKFXnyconcBiq84Tie452eK3gUo2vc0eRfwZMJT9C5AZLXT4F3AwgQ7Re9yVJzqqZG9fupHpU2A4jub02RUwNPvA03ZqADHX9qbBqMCRj+XN0Wj8oa1oUCbm6F+CXpKRgU0V07/EvQ0GBWw+EvQUzQqR2ZU3h9dKNDlhqhfOZySIwHNDdE/YjgNjgRMxD/+RuGebMM42ebxvE3j9sNgZMMPZX1AJ0NmDzSBxbvAIOCtX8B2vxeYP6QE6DdtAZY7tYDsGaSzvaU9PbcjmyodxanSOU6VTm2qdMRTpSs+VTqzqdKRTZWG+mXLmTXCHwUCiwuyD8nUsGz+lbIPaGvIaPr7EHwNC5b4A7L4OyuT+xMgw7LMC9FnGtFcf/iGrNLeRrc3PlsDLuLQiDg0Kg78wGzP5mE4zeO46xFtVv4weCV8RyuC0NYa3OoGt6Jh6RkZSD74ANrjMGCio3115wxXd54AXRyhnbCXrmYlnbaSTlhJel4EknKZTrlMRy6DDy0S44akxxZJkM1UDy6Sxg3Ojy6SktrHDy8SZz/F7YWDWaXthcyVvarthSyR0da2F7LMlpu2FzIn8y0cHcoYD0kTyIuNy/Fqqhi0pvHINYF9yYRkTqaQUxuPF9HGacTyMyv+GlXL5OAmsI27MBYqZeiuCVc3sRbH5O8mVOOYnL4IYPeGyPONs/EXoRXfm6YAE0aDpSYD02rxqE0LptfileYHE3iSSE85WRDTRZFwzjBW81s9e5g6YqtpHjGhMpmYXrXdPK2YQrZLjyMV5harB5JKkwGpPJJUModFPpRUYmq8eCypJJ55QIPJBynNPyipKQj1PAuhShMRSnouwhI8HaFGMxJKNCmBhA6MmK0CNZqdUJJGggWEl6DMdoIaOwZqyWRRpPkKJZqywvPqYBziSbb4vkrV0/SFGs9gQftOONU8FmQxlaE+Eu40oaE2Fu40rYEGMxtSmtxQ4vkNtFafI81yqH0voGquQ3kkYLUZD4ukCyIUeeJDjec+9fqE0MQMCCpOgohHZgU9FWKBcedPEyJqlTkRi4xNDnlmRDFODvudwl8tq/ZHm3DkP5feH8X7cz1K9+GKZeL3FrTJaJs/yKcxns81WDCeq6BNRtv8QT6X8Xyu8M4TnDDwTYVvK9/D549irgR0JVQB6EbSrfwGPjlK+dTlJRw4b0GbjLb5g3w64/lc9i4FnMzYRrCt+Cyfz4V8QnsbAU5obCPYVnyWT+hCPiH8zfuTQDaJbNOn+ETib94PCv5Z65OINhlt8wf5VOrPWh+kqx292luLHcUXG/ZkYefsj+KE16P4/B+E+MzqapLekLia4J8YvEIHBySetF2RXwONT9quhDuDQk/aroIXAws/nHgVOudqgk8XrjD+gFJdr3E5dl7I56B/VpG9TnchzgP+nEvq70l7Ns8D/pxLVr4n/bJF+SYTPqvS+tsOU/5k/WV2vQ/h+UD7L85/R+Qoy6TlSMULb0NfbVTEkbY/egjaNmjU2zzQBqo7zTDXByfk0/gNm/ylD7nUNpfiiqo5epB0ahjm2hYOtcWdiPSlD7nUNpfi2qqdiUVSbz2Xqsm3npWIldfLg8gfKuW3lfKpQbVlw6Cry7ZzVrhFtNY4TV+1kSd4kGW3siy3o7ICKapfxqVmgJTaARo2BPBGn+RBl97q0qkxqOXW8LvOQ23Tu87EoQV5+WXoIZfa5lJcY7UiG6T01utQrfzWKwtQYbGEc/Ygym1FOa60XNYNWnr5dKhcfvmUBai1WAc6exDltqIc11quDQ/ax8nhftSpH8VFWI/K3SdA4l2JnqelWk/juxI9ojciekZvRPQsvBHRk/i2x0eIuJPdeFg063V/8+NpgfFDTW4ovZFzQLqh+Y2cA01v5PQ4t5/fyOmZaH8bj3Kd1es3PZcVbHNN9Os3vSLqSK/f9Ch3CP1F7o95CfQkCgM9rJr21xf9Nks/svsjjuwmHqC4hfIglMvslUD0tcbpu52rE4j9oVKgk9V2h2pVnDj+jTnx5+X0X5b7PIyEEz+KfvEZRwKifDnzmUYCUhgJgONVzucwEoDRtcznYSTAUa5zW6lgKyvY5prwSABF1LGNV4mfcSQMKO9a1wK1pbJnvaKKRtd3rFcK5L6q7FfXKkentl9dym1VGA2L7O36ZnRdYLRZlXSo7UTXMiVJZSP6Qb2bDDeI/Sh6Ro/ET5X3HO8CO40/Vd4j+VPlvUI/Vd4z+qnynoWfKr8bbOiwqrlDGwKEtevpMjR2mRu7rDR2KRu7zI1dVhu7FI1disYuU2PjfcJlaPoyN52XigMNj8SPIqIgVB6Ik5jDkR+HE9eBEQ/DSeAQpUfhEUOw8BKfAsFhU5f4gxR+FekoIopd5TeRSMyxy7+IRFzHLv8eEgscu/RzSBFD7MKPIcVAcOzUDYci5d+KOFICx3HslyJkERHTyu9ESLUS38qvRGg5xVr/SIQSMe75JyJUKFMfVH8gYihQbm1DHxii6BtXcTcxR9wkirVxHWWTOb4mcGRNiDHNjwOWeO+fAsERVPf+D9JuvUB3+/eEbtC3w4n9I5tw5NdKbVhFt3kV3cpVdFmccFXSjVHiUCm8MUroIZ9nKxBVtP7wspW3Gs+ExvVOtxqHmqZbjYo/VCqwrXFq0HeeUML6jtukbjVmCdpDtxozfZCn3WpK7Rh92NnyzbmziLn+eHNuqCbenCP0kM+zFYgqXH9c2o7u5meV604yNIGUTVV5qFZlW1eoeSznVlY23rf5FiQL0KZwC5LZgzjZVjGq+8iT5XKx0d/ROz+PqHwNc9vQSDzuaiQRTs2S7W8k7pscSfCdjiSU7Y6Ebc9j5FcZXQtUCUN5VJh5eeyXlCExnkV8k0ve7Bo+u89cVKOpVK+pVK8Z66Wm3kvxj4WRVunBptaDTa0HP2YkOvS2koHxFhirnzKaC1SJ53wsbvN63OaV2MxrsZnXYvPfGYlSn0djsBCo0uDF+BfZX1aL/C4j0cZl5ZzLStIuR+uyrIzvVqDKidux3m3rvdtWejf9mTqSa53fVsLaVpr4RaAyzZDN/DsXXQlUCdCq0jOr0Z4REVtXTrCunGBdtdP16KkVGv1AJ1Clrt1YtnT1bOkq2cLXVSzXsqWrWUWnJ8L9QuMizvubjPx9eUPbXMoWGcyh+SR9yzX6Vonwt0o2fBOzkP7bp4Z52YUXmcfxGzYZwZorv4bWVl5Da+uvoX2Bip6eF+IPvwxtw0foBF/0dw/fUnt3KOo1sbyOdHjcRl9l6pmri+bjffnSw/9/OL8wtXywX+UcZWwrnayFaoqvXOmPuYUJzfJKadEecol1BY+ccD1yQrQ2pX63OkNfHIbZaljFH/tRvC20wrU7IHGTaEUrdqDx1tAqrNOB0R2fFazOgdgL84aGl+JOARwGy7mR3aLtMEhXsFwDgu0B7M0BOLQGSGkMoNIWR/EgdJTzRThI9VzUPjZ4nZPdmurEDpbhYPhWIEO+IcHzAB+C7+QLxt0syQMP+xS83O47z/wgnMt5h83pUig63WWd6rIudRnNniDkvuxyXw5zpYOv2LxtOBhqDsSrOMByRw2GoiEaj8ZpUBpXI9PEPDxNojFqnAeqCTxaTYhD1jCNW7+xicnBtzvPI/ZhbCQmhmGRHaalFDEl5olhygnjlBjwijETNW6LuMhEN0qOfhOjBRTsPlDIMpPoCIajLTgW3mBiNAi7TZ06mK2i8OwXRXFzMKKcAx56Uig6HVVlJOKJJys6VbSvpMedzCuJFG0G7u1TaLaZRNcRt+wHJfytJkJkPekvNTFX1iP/UBNJZD35zzSxwNaT/koTYbIe+iNNp0yD9RTs1mMk5pNhkU+mpXwyJeaTYcoY45QxsCuBiTKNIi4y0Y2S1mNitJ6C3XoKWWYSrcdwtB7HwnpMjNZjL+OnDmbrEX8biT7h7mJEWQ+8M0Ch6HRUlfWIFwZY0amirSe9LcC8kkjReuBVAQrNNpNoPeI9gaKEp9doQFFgG4oqm1FUpSXFIsKYYgG2p6gmk4pysqook2FFkW0rqJSppEULCyIYWeSUo1FUmRpL5HyNOmVtFDk7o8o5GtQql5YViixqfCwU2gpjETLEIIItBr6scbLIKJJRkqjsMhYh0wzil0p6JQMNqrDRoINfRi4tlV8lkiFle62/SKRLfCd12XDH3iLSZUbTO1mweoVIal8rId7WOFlz7fWhg563VoktVeVNhuEjfP02FEqrfuLwDXpv3TpN3sTxGyobLtfiT4knBb9Hemr5hB4RUoXv9LFBWziHo/3fzGUS7wY6Frf6ivg+kandfy1k/+fjn0VSZlrCMENGpdzoHe7gnmZxUA73hb8O0/zBbL7i3A6oTOiA4jvYzvHFa6f2trUjf3vamb8u7qzsY3Zir04bKonw1NoU9Sa3yd+tB6Tb1Mg2xVfnHeemNqKpjWhqG49yndtKBVtZwTbXJL3X7oqoo7/B7ijHnn5vd1PWjed2FN/v24QVoqO4LHSe3gLchAWgI1/1OfOlnrOyvnNiizpDJaGeWJt80bfBhAIUt/FsUkIBT+vbDScU4LjW3YSEAkar2s2QUHCU69xWKtjKCra5JulneFwRdfQf3XEUF9QbTKhD8B8muH3vAYMPKG7fe0jBB56etz1w8AHHTXMPIfjAaPvetriqH9lodmSu6kjsbNmyqzqNe1i20VWd0SacLbqqk7ghZYvT65GhWKDJjaItS9tsq85lo8SOpG2wVUeirbzhaFts1Y9yndV+oi3bqtNcE71daBtt1VncGLQNtmrIly9D9PGBxAkhalN6IMFcNVg9kGCJmp4fSLDA3cEPJBhTHNLSlWIhinJOGqfEdD4SC5GiLuU8Na0Sp5SxJtTi1ApUaaDMYhPrDeF8Nq6T2uRaWzi9jVf6NiU6vDINuY6UIoASZTxKKj6o5xChSlFCiSOBGncsanEMoEKhUr+rkYOlP8DjASUaEkEaD5YYGEHNYwPleizTCEFtJJatpvW2y9GC+mgDecygpIcNlhhpIw8elOpJwUPoW1mvnttRXIN/C+tVQHkN/o3Xq0Bxveo4Ls2/xfWqM1qafyvrVT/KdW4rFWxlBdtck7RedUXU0derjuK1wjeciRhR/dNMlLhonJqJkpT7Ic1EzLm1eSYioRWo0kDZS2omYqlS2Uqn5ZmIBeq+NBMNvNyvUoiaaJz60Llouom56S7lPjSNwmKc220C92ERWoEqDZR9aGK9IdyHxnUfmlxrC/ehcepD/BWkGqamBo36M2oiFKFADkeUc98GnUIWNI5LELmfUWwreCQIss9DgfGGct8HTfd/KDLWVs6DoEEu/Ot//z8nhUqv",HelveticaCompressed="eJyNnVtzG8mxrf+KAk/nRGh8eBWleZPnItsaj0ZXWNvhB5BsUdgE0TLAFgjt2P/9AI2uzJUrV7X8olB/q4CuyspaVX0p8H8mP7V3d83yfvLj5MPfu/Xspnl0enH05Nmjs6dHz84mjye/tsv732d3za7AX5rF1+Z+fjXb426xUHh2N19shTBt5jef92f5e3M97+525K/3s8X86vnyZrEre7Q7Xv86f2iu/5jfX32e/Hi/6prHk58+z1azq/tm9bbZf/aXh/tmed1cv2nvZsuhbn/+c/sw+fGfPxw/efL4h5OT88fHR0dHj5+dHv/r8eT9rvBqMV82f7Tr+f28XU5+/GEng/Du8/zqdtms15Mfz3f8Q7Na98UmR0cnf9p90e4kv7e7Juyb81P7Zbvat+LR/7n6v4+Onz09f7z/96L/99n+32dH/b8Xj55ft5fNo7fb9X1zt3701+VVu/rSrmb3zfWfHj16vlg8erP/nvWjN826WX3dUQvVo/n60ezR/Wp23dzNVreP2k+Pfpsv2/vtl+aHXaHFo+cvHs2W1/+vXT2a775g3V2u59fz2WrerP+0q+wvu1Ndz5c3b68+N30f9DV5e7/7yGx1XdRdwZ9mX/4ydMnF8dPHk3+Uo/OT08eT5+urfaBXg/hzY8c/nBxdPJ68vb/+y3QnPun/+2H336dPD7319+Z+Nb/ahfOf/zOZ/mPy48nFTvh9V5H1l9kuiv/7mHDzcLWY3Rk/PT8/8H937S5alwtTzs+fHJRld3e576abZdau28VitjL+dNctPf/SrK72SV6EJ08uDsLsbietd9Hxmp2cQA36/vbanZ4O3zdbNctF86km0cdKNWbr/Teub73iT8+GTy26dQ7O1W5szvIpPm+/fG6WufiuKfP2OvP1Yrb+nIP1rVm1mbbLJsP7jSh5/3nViLKf2m4l6PyrKLuePwjYfG1E3zYhpp4O86VIq6t20YoIrZu7eZSsBxZ7E0i0+Xc3W2R8s2p2g1k0899ds+6NpijHR8dDRs9E+j3P6M+GLkom/pTRz/mDvzg6Pj6gX/2DJQIv8nf9Jcfpr96yvV3u0d/yGV/m9v/mY69k69/zGX/P9XqVv/6PXOp1/q43+YNvcyTe5Q++zx/8YOjZ2dDT01zqHxl9zGf8rxzVy91cdtvcB99wcafFgcqfi6Zy9sRM5Wo+v5qvrrq73B/d3rXXu+kHxkgwuFAZ+9gso8ucElfCgMW4zQ36lEvdZPQ5V3me0X/net3mUouclyJawnWE730Rwz6b9CrXSzi8iH2XP/g1Z+8ml3rIaJvRN6jqmedXTISTJ0clK1eV8jEbzRn7bLyfL66bHJLDXH/dbkScw/TsU8F9v0zz5DguI+7Tfl2IRmuf2arJ49OiXc0FXzeVb7nqVrt5/MoDePzsGIbNet6vW1MTy7JFD6ubbr5T7tp7vXTYy/0Xf0em0Jee/TQXTCygdis5uR64nt3cqDntwHEtRiuOfd81qwbG/umFLYZmN6vZFz/b6XnJrN0FRAMZF1ypb+blbD0S4XF1pRcL1gFR7y8ZDrFZLOZf1vO1kHZtvf/cdmGxaG5f5v2Q3N5zq9lXUdnZVXcv8MHLPy2ah6xVRtbd7GrVihNfrhp14uv2fnYVRpxL811PYgDc0HAcemV3l3O7NbdYpHbLm9mqu1vMOnGa9ma3zrwVXzdbhcWT9ctdyFkXnvuyZ3fdOnz56vrTbqEXVoa+QomTrC9AIvczvIIzPDm3M9ztnK5b4CnsamMmprzr/aBfr8UEtogntpRqI7cVSdvksrvxubsi3uW9mGL+mrrUnSBmoE//MW98apKd6l8Xe89XR7kGZbq4nn+dQ0L7R2LNfMEsBodXO37IV3rqQzZFUgxssu4vvmiYQFPzV/r5wlBxXO+IGY0H/0ylhzr6gF8FpJP4NcPOI+Ai5KQ4sWroRXHwq3LTQ5yKXMfXhTEPvJU6Lr+rCvjwqOVoNFVf6cvm2KVU7duisUI4k1VChsxk89fsiTYU5/HsZxdDnRftt2Z5IzL3TTyFX8WNJmc3OkiE6MOrNpGsKm294rb69U+OnJ3m3ed2JVr1is7uYai4wVviZ2USo7DZaOKMtYjpya2/w7Hu+lXOStSXUtCiWONkq8UE77rF/fzLYivqRQ30JA8NPLsolyaz1f18trief/qU+2pbt4bf43k8YceS5ZfRNBuZdbJk6VQZnsuaDdYy5vcYIJ8M6Yvw/ttuxYA34ewSaNXeNku8EDJzXDU383Vc+voQjZ0N03EeF+Yc3W5Uh+sRD3ZlDbmqRKalyPi4rKTUf9EIP3tW1q79ra54I8zi/Mv95wx/SgZoZq586/R4aON9Zd5oqrNjbRZ8Xls+jGRlDLBfL9PQsFsRXClzhVqP1Kae2jS6rg3KPI7t3KPLEp4xy7qgWdyLGz73waTdEzftiCPW43vXiZZQzC1Ucp3pY4FC71eqcYXztNyw6H18l8CrXSKv8/e9Tfn67FnJV72ifTk6//4WO84vJeyxjjLFZAtuGTFMzmvT2W+x2haHXdQ+zxYwNZRBvr80oVvd1hdjLr+MyyZPte90YGUoNLUG3UQzxQYN3ap6VffdW7lAtAyWNT8rPXi9swn10KONXQRWqC2ti+XPzs3Or+dXymh/jl8EC7Ox5e7vsX+8upV+ezOe10p1b60soZ9XTTpeDlgPUJ3NiEcWlL/Upnt2CrtFLBtqC7K4ErBvGx0KlSrcj55p0d7s+3vZinC3dTPtslSG8u6rKiP5ZvyKFmZyj3klfZdyHrebO8u8aHbPr43xX7r948h/PZ68bFbLP2bz1f4h8j8nz/cPqyePfzg9+tfj4ejgHgEd6hnRYOoIX8Sjg6sEhA1D4VU8ylXAqTdw66pAD+M/oOA8QRlCFtjh7lBAh4GD6HU4erc7Oj7xwxK0wEL7QXm/Ozz3oxIAQCEAwCEAQEsAAFEAQLEAABuGdmC9oyD5sDu6sKNp0D7uG3jkh6VJyKDugLsQ1i4nQ1dJhk4mQ5eToasmQyeSobNYABti4eTr7ujMjjbhaBuPSosAQc0HOhTC0WmIQmKcxqlzHqxFeSEQDVvjcuwW9ZVAlVrKoWxi7kKTqB+N6840mXvUBBrjxmmgF/46IxzyxnjcuyAHf5HBAQyRDRhXXmBiNgSTyBWMa2swmf3BBDYJE6JTFAx2UdA0l0LjMMbuYYKwkKJ1ucPYTIyP5aSwFZMqOVkxGJNrOZmsxoToNwWD6RS0yWgrEHmQ8WxEgx+gERmicBonI3LORlSUFwKRERmXRlTUVwJVaimNyMTc6SZRpxvXnW4yd7oJZETGyYgKf50RGpExNiIXpBEVGYzIEBmRcWVEJmYjMomMyLg2IpPZiExgIzIhGlHBYEQFTXMpNCJjbEQmCCMqWpc7jI3I+FhOCiMyqZKTFSMyuZaTyYhMiEZUMBhRQZuMtgKRERnPRoShQTeKnAIbRfIlEtmcgvyixsmmoii9KhR5VeNjDZHWFUvkXIk6JUwUddbEMpw6USVPiyIZWxBfVzhaXBTY50iVZhfKgONFTrYXReV9sUQ2wKiTC0ZRW2Esw34YVTbFqEZnDBrYY+DTSnk0yiiwW0ZVWGYo0FVSgc0zit8dGsJGoz42NCqGGsuMDo1krVGN/ho0MNnANxW+rXHy3Chm43WCtouUOgQlstwgseGC+EJTMluUpNVCgVea1qsuTRb1nEeoUhahpHMIS3AGoUbWihIZK0ivJUVTRcyWGjRpqFAC7BQpmSlKykpRz0aKKtkoStpEsQRbKGpsoKhF+wQFzBPoVJZF40TMtomaME2QO9nNbJgofSfJhVmiWk/yilFiiZEkTyaJWrRIUMAggW4k3WpK1ohSNsah9eiKhijkxskPnbMZFuWFQGSDxqUHFvWVQJVaSuszMaeESZQPxnUymMyZYAJ5nXEyusJfZ4QWZ4z9zQVpbkUGZzNEtmZceZqJ2dBMIjczrq3MZPYxE9jETIgOVjDYV0HTXAqNyxi7lgnCsorW5Q5jszI+lpPCpkyq5GTFoEyu5WSyJhOiLxUMplTQJqOtQORFxrMRlbqiEzmjgLpAXgQCm5FJLxQjO3JB+pHJrxSrVVZakqu5/12jBHBBZ4DrnAKukC+5QMZkwmvB0JocsjeBIs3JdHAnZ2RPLih/cjUblGvkUC5oi3KdPcoVNilXoksZB5syNhXl0KgcslO5IqzKxE50IZuVC6PpKuzKtVq6VgzL9Wq6JstyJXqWcTAtYxvBtoqRb7mQjatUDI3LGQXXBTIuENi4THqhGBmXC9K4TH6lWK2y0rhczZngGmWCCzoTXOdMcIWMywUyLhNeC4bG5ZCNCxRpXKaDcTkj43JBGZer2bhcI+NyQRuX62xcrrBxuRKNyzgYl7GpKIfG5ZCNyxVhXCZ2ogvZuFwYTVdhXK7V0rViXK5X0zUZlyvRuIyDcRnbCLZVjIzLhWxcq+GHPrwKhVBgCybLMsyGNQgvMiGzKlha1SC+ykRXT5pU0XKfF4V6vGDd30Xl3i6crKlgMqYBv04ETakgtiTj0pAGFeyoEDKjgpUVFS0bUVHIhgrWJlRUtqDC2YAKj/YzUDCfgUxTGTSegth2ChemM0hd6h42nIJHEk+YTVF04lWMpqiVxEsmU3i0mIGCwQxkk8g2E7KWgrOxDOmOzmKIQmicvMU5m0tRXghE9mJc+ktRXwlUqaW0GBNzV5tEfW1cd7bJ3NsmkM8YJ6Mp/HVGaDXG2GtckGZTZHAbQ2Q3xpXfmJgNxyRyHOPackxmzzGBTceE6DoFg+0UNM2l0HiMsfOYIKynaF3uMDYf42M5KezHpEpOVgzI5FpOJgsyIXpQwWBCBW0y2gpEPmQ8GdGfh9w89iPvDEMhfsBD9xgtUQNEAQPFYgXMwgRsiJCTw+96Pf7hxMjw010F/QSFTo1YoQGVV+KoZMFcfBj+XLzgVLxYc/qACfSRn3fouXVPfxQ7s0fFxQGFPgKeurynpY8AWU8As54ANvQEkGKpjtwLfh5swLW9Azzzo9I6QFBlpyWA/rUWuQGVToDwGaIYGqdAGlfRNDGH1CSKq3EOrgkcYRNimA1TrAv/kMMwzaUg9IYo/sZzJ3Du0/lSd/T7CGN3FMTdUTh3R+GyO4oouqNI3B2Fp+4oQuqOIlB3FMzdMfAPOQzTXAq7oyDujsJFdwwSd8eAqTt+HXriqR+VUwEq8QcUQg8cKgS0BByQxRqYhRnYEGEgJbiOZrag6I/iCqpHpQWAxHqq52kp1dO4iuoRrZB6RoujnoV1UU9KCxyV3jp25CuM/iguYnoUV/4HlJc0PU+rmQO1bX8Bx/VNj2jt0jNatuxZG49yndtKBVtZwTbXpJWLrF4RdWzjcr9HcaX/K44JiP5qPy7P7cicyVGJPqKw2D8IfxtG2GH18TccYYBKfgIKkQIOkQJaIgXI4gHM+gzYkJ9ASogczeJRbsEst2BWacFMtmCWWzATLZiJFsxSC2a5BXGl9be8xNqjLnyky83sKm3qZJu63Ca+SABFtLYTre1Ca19ODtfh534U7a9Hwut6nryup9HreiQvFnuFXLBnZdQBipb3cvC3Mz+Kc/9L9DdEecZ/Sf6GFPwNcJz+XwZ/A0aT/svB3+Ao17mtVLCVFWxzTdjfQBF1NH8DFNceLyd4Tfxyki6HX6asBp5c+eUkXf++FFkNCrnyy0m+4H054WvdPdmGbNnmrN7m7A0GjOOCBPoyUtVooSLfPTWNIVL1cKJCPLJIpkFGKo23qEJ6kEAZTSoNSFZF6lORPAq4QB6xVIKGDKk8RkjmIR3ltiqMhkWOeSryvYazE5CqTYEKjbedrYJUco2ogoGQQF5CqrIVKpIdhgqQ2ZCqfYcKsQWRzG5EcjSmKG5rI4ztitRkH79NhhvLx35o95SRxdvJrnyIh/vLygs76u+unvmh3csDhjftHMcffc2S8SfGtxas3zAQgFKf/xb2VB8T4zjU9lST/EEwCEvYcXxGjAMkdxyTVgtV0DleuEuXYsGRU7t0B6nca8HwGePwuSDDh7eOmEH48N5RaWm6eZQEEb6i1cIXdA5fEbc5Fhw+4yJ8YXCGIEYlhZJkHdBQ6ENVweAGIYQ4KinQUVbhDiWqQc+lUuiTEcpopm6oGuFQYJimQjcY4w5wQYa+yB8Eg3AXhIE2xiE2QQS3aLWwBp0DWsRtjgUH0XgK327JC3cb+qN4EdujeK3eI3Fd2/N0XdvTeF3bI7p67RldvfYsXL32JF6rvxr6/syP4rLzVe5vFz7YjPpq6GOPyz92R0/s6KP1/yvsZkDQdKflNoKf0m4jDKj4NHSDIeoL49QhxlWvmJi7xiTqH+PcSSZwT5kQu8sw9RnO3xQG7r3K7E0q9CPO3acRQY/idH5BiPpWTeYkUS+nx34DD3snob8jp06PIvV8FFX3xxI5B6JOiRBFzoaockpENeZF1Cg50k5uFT1Ok7F93KoIJEzatnwqOKRO2s58oTglUXUzs9IpnYLGOQWbziCjkFI+oUTZhJLKJdRzJqFKeYQSZxFqnEOoxQxChfKHtqzmOHHu1Des5gKQN7Rj8zRRyBnax3mRKeVLZRdnVilXQOFMKVuCIE0MUY4YpwQxrrLDxJwaJlFeGOekMIEzwoSYDoYpF3BjH4WBs6CyrY9U6H/c8nYaEfQ87oK7IER9rvbAkUS9XTB3dbzNgT3OCnU8y9T/LKs04DI5G7gEJQXLnBusc4qwHjOFVUoYkt9VY8rpk2SVRVQIkokUyClSILVIgQxjhRKN5ZxvVILSjlTOPtvDA3nnjDLOBco1F1SWuZrzyzXKLBc4p1zhbHIl5pFzyqCwY48jwllT26/HMmRK2MJ2SgyyI2xru2BGGSE3tbFGWWCc+79cbkL3G6LeN06db1z1vYm5602injfOHW8C97sJsdsNU6/jbQgKA/d55SYEqdDjeAviNCLob7wrcUGIelvdkyCJ+rpg7urySih0tSHqauPU1cZVV5uYu9ok6mrj3NUmcFebELvaMHU1vthNYeCurrzWTSp0Nb7yfBoRdDW+BX1BiLpavQNNEnV1wdTVfwy9PLyS/gf2MLLSu8jii78g4D0xwPbqLzB/wxegv+ILsLzjC6j0ILBZaJm9oQIovkXYI/HkrufpcV1P4zO6HtEzt57RQ8aehfcEexIfuP0B/Xb81FBjmdQfxYdKPSoJiig/vu55euh0oPDEFXB8ft0jeh7dM3rfbc/aeJTr3FYq2MoKtrkm/DgUFFFHe/AJKD4d/wNHxxD91xN8A74/im/A90i8Ad/z9AZ8T+Mb8D2Sb8D3Cr0B3zN6A75n4Q34N5PDWw8nfhRdu0fCmHuePLmn0Y57JN9h6hXy6J6V+AOKDvxmMN9TP4qvNr7JluvCextEb7CXAIlR/oZ6CWgc5W9EL4FC4/9N6CVgYfy/CXPEmzA9vBmmAdc+xhH0hsx/oOUWJfS+IUoB4yoPTMzJYBJlhHGdFiZzbphACWKcsgRvMp8Sonyp3GQmFTLHEKWPcZVDJuZEMomyybhOKZM5r0zg5DIhZli+j25omgPxMZfirFM3zQepPFmF1DNEqWdcpZ6JOfVMotQzrlPPZE49Eyj1jFPq4QP2U0KUepXH66RC6hmi1DOuUs/EnHomUeoZ16lnMqeeCZx6JsTUwxcIKEOmORAfcylOPfX2QJHS+34nUuA0HHnfTxcRKanf99NqJT0r7/tpmVNVv+8nVUxb/UZDRZUpHMpgIkeB0zmqMqljEZHasQAneFQraR4LpWSPckr5KFPipxc9ZJZOa6H8WPtEGhDVtzwOBd5OeB/k20naB/mWn3US5uK8zYtwKp62OCYhfSQ0iz8WRProLr/xWrY/pGvZntG1bM/UtWwv5GvZHtO1bM/4WraHfC3bw3gt2yO6ln03GNmZH8WR9C5ZFvA0Zt6hOQGSo+NdsCFg8d3Rd2g4jmaxETPRA3YN/sRRrQNmugNmogP8Mhy+V8V/luNvF+L+0at2AT78DpIRPkdVaERr7eI8sEpzG93ccH2OvITBq92IKDQqCp+3Xz43fb2889pYpBXNaWtVb3XVW9FTfOmOkqi+XbtjudxhfvHuxVZ0KBq0Ev1De7hAWTd385wZXSzUidN0tbh1Om6diBu/6IySiFunur3Lyb+Jh1s6FI3BV86G8+EG61Iy7bBOAnux3mOdVBGytMs6Ccmf8z7rpFCw0k5rFsCz09UPc+Xe6uqHJfLx2tUPy+zo6eqHOXl74TPR7OTyJpDVGx/tX2X6ptX6N9m/CdXu5YnAOJmLr3rCwOfFEH+NqmWaIUxgG3JhLFRqwnBNzBom0tRhvBbGPIkUJc0kRWhF4TSnmDDaTjW7mFZLido8Y3qtrWnGMaGSGWnuKcJKsVoI0lTkgpyPiiwmpSJ1oniankwY7QI1UZlW64LalGV6rQvy5GVKZdRuBNsqVmu+mtXCBUeY26KSvjPKaZ6Lso57LKOiH0ukPohynv+ingMedQ57VNOMmG7KnEmBZ8eRmzK6iJgp9U0ZrVZmzcpNGS3zDKpvykh1Vg1ZnlOjzDNrVP+DjJKzbCwxnlF5xo3ydxIqzb5RZael+wLR7eRNA/3F9fbkuTnKyZ1J/n7I5WxNJdScHYvwzB3V8U4Rs3jQ81we5Lb6wTyvR/k/iI6c42OJ8YSszvex1HiE8twf5dG8zOuAIK/qynj48sqAZL0+CIXUKiEU6KofzSuGKP8HnStXD7HEeOdWVxKx1HjnilVF1Ec9aVNVtnVlPHR5zfF+WGic+VGcI9/jggKQmCvf08IBaJwV34cFAjC69/0eFgJA4hT3fsKvH72fpDePypMBbGvaIcWcWq13SLGY2592SDHnSOQdUizEmKQdUsQpOpWdReHxCMZJ7yySIkVsZGeRLJFjp3cWSZGjWNlZJNUYT72zSIkU2bFNNvBoCYOrNtkIiQJb3WQj9BxUtclGSBxQuclGaDGYapNNliiQ9R0o5QEcxjDtQGFO0dM7UFjMcUs7UJhzxPIOFBZirNIOFOIUpcrOjfe8PaGuUMBqOzcqsgrfyM6NSgkKZnXnRkXn0FZ2blRUCvTolgVWOexhy0JiFOq8ZSEJKrxyy0LSKKRiy0JSOIxpy0LiFLrKG/7OOVz2xw6eK0bhcoHC5YIKl6s5XK5RuFzgcLnC4XIlhss5hcsECpdxDtfwA+7PM6FQFUyBKliFqWg5SEWhEBXMASqcw1N4DE6hFJoBU2AGSmH5MITkqR+VcACKvyX6IYUBePot0Q/YfED0W6IfQrOBhd8S/YDNdfQitOdF7LkexSsuF17Fo5gKPRL93fPU1z2N/dwjecuqV6j3exZvTvUodu8e+W/E9kdxu0GPSggAhYYAT5sSeloaAsiqC8x6DNjQY0BKCxyVK9szIOU20HlBsZObnJh2jweRTsxGJma4fwM452sj8rUR+Wp3ZBy18Sg3o63UuZV1bnPl+E4KKKLadssEUB5TcG/EOgTvSXjPdaFnu5yNXSX1Opl6XU49vpkAikjKTiRlF5JyOrjeuR/F17Wm6HqAxC6IKbke0LgLYhpcDxjtx5iC6wGJ2x+mE3x1coreBUi8JDkl7wIaX4ecCu8ChV58nKJ3AYqvOE4nuOdnit4FKNr3NHkX8GTCU/QuQGS10+BdwMIEO0XvclSc6qmRvX7qR6VNgOI7m9NkVMDT7wNN2agAx1/amwajAkY/lzdFo/KGtaFAm5uhfgl6SkYFNFdO/xL0NBgVsPhL0FM0KkdmVN4fXSjQ5YaoXzmckiMBzQ3RP2I4DY4ETMQ//kbhnmzDONnm8bxN4/bjYGTDD2V9RCdDZg80gcW7wCDgrV/Adr8XmD+kBOg3bQGWO7WA7Bmks72lPT23I5sqHcWp0jlOlU5tqnTEU6UrPlU6s6nSkU2Vhvply5k1wh8FAosLso/J1LBs/pWyj2hryGj6+xh8DQuW+AOy+Dsrk/sTIMOyzAvRZxrRXH/4hqzS3ka3Nz5bAy7i0Ig4NCoO/MBsz+ZhOM3juOsRbVb+OHglfEcrgtDWGtzqBreiYekZGUg++ADa4zBgoqN9decMV3eeAF0coZ2wl65mJZ22kk5YSXpeBJJymU65TEcugw8tEuOGpMcWSZDNVA8uksYNzo8ukpLaxw8vEmc/xe2Fg1ml7YXMlb2q7YUskdHWtheyzJabthcyJ/MtHB3KGA9JE8iLjcvxaqoYtKbxyDWBfcmEZE6mkFMbjxfRxmnE8jMr/hpVy+TgJrCNuzAWKmXorglXN7EWx+TvJlTjmJy+CGD3hsjzjbPxF6EV35umABNGg6UmA9Nq8ahNC6bX4pXmBxN4kkhPOVkQ00WRcM4wVvNbPXuYOmKraR4xoTKZmF613TytmEK2S48jFeYWqweSSpMBqTySVDKHRT6UVGJqvHgsqSSeeUCDyQcpzT8oqSkI9TwLoUoTEUp6LsISPB2hRjMSSjQpgYQOjJitAjWanVCSRoIFhJegzHaCGjsGaslkUaT5CiWassLz6mAc4km2+L5K1dP0hRrPYEH7TjjVPBZkMZWhPhLuNKGhNhbuNK2BBjMbUprcUOL5DbRWnyPNcqh9L6BqrkN5JGC1GQ+LpAsiFHniQ43nPvX6hNDEDAgqToKIR2YFPRVigXHnTxMiapU5EYuMTQ55ZkQxTg77ncJfLav2R5tw5D+X3h/F+3M9SvfhimXi9xa0yWibP8inMZ7PNVgwnqugTUbb/EE+l/F8rvDOE5ww8E2Fbyvfw+ePYq4EdCVUAehG0q38Bj45SvnU5SUcOG9Bm4y2+YN8OuP5XPYuBZzM2Eawrfgsn8+FfEJ7GwFOaGwj2FZ8lk/oQj4h/M37k0A2iWzTp/hE4m/eDwr+WeuTiDYZbfMH+VTqz1ofpMsdvdxbix3FFxv2ZGHn7I/ihNej+PwfhPjM6nKS3pC4nOCfGLxEBwcknrRdkl8DjU/aLoU7g0JP2i6DFwMLP5x4GTrncoJPFy4x/oBSXa9wOXZeyG3Qb1Vkr9JdiPOAb3NJ/T1pz+Z5wLe5ZOV70i9blG8y4VaV1t92mPIn6y+zq30Izwfaf3H+OyJHWSYtRypeeBv6aqMijrT90UPQtkGj3uaBNlDdaYa5Pjghn8Zv2OQvfciltrkUV1TN0YOkU8Mw17ZwqC3uRKQvfciltrkU11btTCySeuu5VE2+9axErLxeHkT+UCm/rZRPDaotGwZdXbads8ItorXGafqqjTzBgyy7lWW5HZUVSFH9Mi41A6TUDtCwIYA3+iQPuvRWl06NQS23ht91Hmqb3nUmDi3Iyy9DD7nUNpfiGqsV2SClt16HauW3XlmACoslnLMHUW4rynGl5bJu0NLLp0Pl8sunLECtxTrQ2YMotxXluNZybXjQPk0O96NO/SguwnpU7j4BEu9K9Dwt1Xoa35XoEb0R0TN6I6Jn4Y2InsS3PT5BxJ3sxsOiWa/7mx9PC4wfanJD6Y2cA9INzW/kHGh6I6fHuf38Rk7PRPvbeJTrrF6/6bmsYJtrol+/6RVRR3r9pke5Q+gvcn/KS6AnURjoYdW0v77ot1n6kd0fcWQ38QDFLZQHoVxmrwSirzVO3+1cnUDsD5UCnay2O1Sr4sTxb8yJPy+n/7Lc7TASTvwo+sUtjgRE+XLmlkYCUhgJgONVzm0YCcDoWuZ2GAlwlOvcVirYygq2uSY8EkARdWzjVeItjoQB5V3rWqC2VPasV1TR6PqO9UqB3FeV/epa5ejU9qtLua0Ko2GRvV3fjK4LjDarkg61nehapiSpbEQ/qHeT4QaxH0XP6JH4qfKe411gp/Gnynskf6q8V+inyntGP1Xes/BT5XeDDR1WNXdoQ4Cwdj1dhsYuc2OXlcYuZWOXubHLamOXorFL0dhlamy8T7gMTV/mpvNScaDhkfhRRBSEygNxEnM48uNw4jow4mE4CRyi9Cg8YggWXuJTIDhs6hJ/kMKvIh1FRLGr/CYSiTl2+ReRiOvY5d9DYoFjl34OKWKIXfgxpBgIjp264VCk/FsRR0rgOI79UoQsImJa+Z0IqVbiW/mVCC2nWOsfiVAixj3/RIQKZeqD6g9EDAXKrW3oA0MUfeMq7ibmiJtEsTauo2wyx9cEjqwJMab5ccAS7/1TIDiC6t7/QdqtF+hu/57QDfp2OLF/ZBOO/FqpDavoNq+iW7mKLosTrkq6MUocKoU3Rgk95PNsBaKK1h9etvJW45nQuN7pVuNQ03SrUfGHSgW2NU4N+s4TSljfcZvUrcYsQXvoVmOmD/K0W02pHaMPO1u+OXcWMdcfb84N1cSbc4Qe8nm2AlGF649L29Hd/Kxy3UmGJpCyqSoP1aps6wo1j+XcysrG+zbfgmQB2hRuQTJ7ECfbKkZ1H3myXC42+jt65+cRla9hbhsaicddjSTCqVmy/Y3EfZMjCb7TkYSy3ZGw7XmM/DKjK4EqYSiPCjMvj/2SMiTGs4ivc8nrXcNn95mLajSV6jWV6jVjvdTUeyn+sTDSKj3Y1HqwqfXgp4xEh95UMjDeAmP1c0ZzgSrxnI/FbV6P27wSm3ktNvNabP47I1HqdjQGC4EqDV6Mf5H9ZbXI7zISbVxWzrmsJO1ytC7LyvhuBaqcuB3r3bbeu22ld9OfqSO51vltJaxtpYlfBCrTDNnMv3PRlUCVAK0qPbMa7RkRsXXlBOvKCdZVO12Pnlqh0Q90AlXq2o1lS1fPlq6SLXxdxXItW7qaVXR6ItwvNC7ivL/JyN+XN7TNpWyRwRyaT9K3XKNvlQh/q2TDNzEL6b99apiXXXiReRy/YZMRrLnya2ht5TW0tv4a2heo6Ol5If7wy9A2fIRO8EV/9/AttXeHol4Ty+tIh8dt9FWmnrm6aD7dly89/P+H8wtTywf7Vc5RxrbSyVqopvjKlf6YW5jQLK+UFu0hl1hX8MgJ1yMnRGtT6nerM/TFYZithlX8sR/F20IrXLsDEjeJVrRiBxpvDa3COh0Y3fFZweociL0wb2h4Ke4UwGGwnBvZLdoOg3QFyzUg2B7A3hyAQ2uAlMYAKm1xFA9CRzlfhINUz0XtY4PXOdmtqU7sYBkOhm8FMuQbEjwP8CH4Tr5g3M2SPPCwT8HL7b7zzA/CuZx32JwuhaLTXdapLutSl9HsCULuyy735TBXOviKzduGg6HmQLyKAyx31GAoGqLxaJwGpXE1Mk3Mw9MkGqPGeaCawKPVhDhkDdO49RubmBx8u/M8Yh/GRmJiGBbZYVpKEVNinhimnDBOiQGvGDNR47aIi0x0o+ToNzFaQMHuA4UsM4mOYDjagmPhDSZGg7Db1KmD2SoKz35RFDcHI8o54KEnhaLTUVVGIp54sqJTRftKetzJvJJI0Wbg3j6FZptJdB1xy35Qwt9qIkTWk/5SE3NlPfIPNZFE1pP/TBMLbD3przQRJuuhP9J0yjRYT8FuPUZiPhkW+WRayidTYj4ZpowxThkDuxKYKNMo4iIT3ShpPSZG6ynYraeQZSbRegxH63EsrMfEaD32Mn7qYLYe8beR6BPuLkaU9cA7AxSKTkdVWY94YYAVnSraetLbAswriRStB14VoNBsM4nWI94TKEp4eo0GFAW2oaiyGUVVWlIsIowpFmB7imoyqSgnq4oyGVYU2baCSplKWrSwIIKRRU45GkWVqbFEzteoU9ZGkbMzqpyjQa1yaVmhyKLGx0KhrTAWIUMMIthi4MsaJ4uMIhklicouYxEyzSB+qaRXMtCgChsNOvhl5NJS+VUiGVK21/qLRLrEd1KXDXfsLSJdZjS9kwWrV4ik9rUS4m2NkzXXXh866HlrldhSVd5kGD7C129DobTqJw7foPfWrdPkTRy/obLhci3+lHhS8Hukp5ZP6BEhVfhOHxu0hXM42v/NXCbxbqBjcauviB8Smdr910L2fz7+WSRlpiUMM2RUyo3e4Q7uaRYH5XBf+OswzR/M5ivO7YDKhA4ovoPtHF+8dmpvWzvyt6ed+evizso+Zif26rShkghPrU1Rb3Kb/N16QLpNjWxTfHXecW5qI5raiKa28SjXua1UsJUVbHNN0nvtrog6+hvsjnLs6fd2N2XdeG5H8f2+TVghOorLQufpLcBNWAA68lWfM1/qOSvrOye2qDNUEuqJtckXfRtMKEBxG88mJRTwtL7dcEIBjmvdTUgoYLSq3QwJBUe5zm2lgq2sYJtrkn6GxxVRR//RHUdxQb3BhDoE/2GC2/ceMPiA4va9hxR84Ol52wMHH3DcNPcQgg+Mtu9ti6v6kY1mR+aqjsTOli27qtO4h2UbXdUZbcLZoqs6iRtStji9HhmKBZrcKNqytM226lw2SuxI2gZbdSTayhuOtsVW/SjXWe0n2rKtOs010duFttFWncWNQdtgq4Z8+TJEHx9InBCiNqUHEsxVg9UDCZao6fmBBAvcHfxAgjHFIS1dKRaiKOekcUpM5yOxECnqUs5T0ypxShlrQi1OrUCVBsosNrHeEM5n4zqpTa61hdPbeKVvU6LDK9OQ60gpAihRxqOk4oN6DhGqFCWUOBKocceiFscAKhQq9bsaOVj6AzweUKIhEaTxYImBEdQ8NlCuxzKNENRGYtlqWm+7HC2ojzaQxwxKethgiZE28uBBqZ4UPIS+lfXquR3FNfi3sF4FlNfg33i9ChTXq47j0vxbXK86o6X5t7Je9aNc57ZSwVZWsM01SetVV0Qdfb3qKF4rfMOZiBHVP81EiYvGqZkoSbkf0kzEnFubZyISWoEqDZS9pGYiliqVrXRanolYoO5LM9HAy/0qhaiJxqkPnYumm5ib7lLuQ9MoLMa53SZwHxahFajSQNmHJtYbwn1oXPehybW2cB8apz7EX0GqYWpq0Kg/oyZCEQrkcEQ5923QKWRB47gEkfsZxbaCR4Ig+zwUGG8o933QdP+HImNt5TwIGuTCv/73/wO+9kRf",TimesBoldCompressed="eJyFnVtzG0eShf8KA0+7EfKseJXkN9nj0Vj0yNaNEHZiHkCySWEJsmmAIA1PzH/fRqMr8+TJU9CLQv2dYqMrK/NU9Q349+jH9va2uXsYfT86+8dqOb1u9o72Tw5P9o4PTk72R89Gf2vvHt5Nb5uuwafZbbP87od2frnhq/kc+V7h09vZfI1KB8fN7Prr5jOGRj8/TOezi9d31/Ou1fNue/m32R/N5W+zh4uvo+8fFqvm2ejHr9PF9OKhWXxsNn/50x8Pzd1lc/mhvZ3eDcf1ww/tH6Pv//nd/snLZ98d7L98tv/8+fNnrw6P//Vs9LlrvJjP7prf2uXsYdbejb7/rpNB+PR1dnFz1yyXo++PO37WLJZ9s9Hz5wd/6XbUfci79mF2senIj+39erHpw95/Xfz33v6rl8fPNv++6P99tfn31fP+38P+3xd7ry/b82bv43r50Nwu936+u2gX9+1i+tBc/mVv7/V8vvdhs7fl3odm2SweO7oN4my5N917WEwvm9vp4mavvdr7ZXbXPqzvm+/+3nR/9frN3vTu8n/axd6s++Pl6nw5u5xNF7Nm+ZfucH/qPuZydnf98eJr08e/P4qPD92fTBeXRe0a/ji9//swJCcvTp6NvpSto5P9Z6PXy4tNqBed+PLw2eivjW13QX7xbPTx4fLv467tUf/fs+6/+4evtgP2j+ZhMbvoIvrPf4/GX0bfH2wi+647kuX9tAvkf55t8eHh4RY3f1zMp7fGj4+Pt/z3VduF6nzuyvNhR3er2/PNSF3fZe2ync+nC+N9NvTCfbO42CR5UV6Wz5/edtKyi08+tP4Q+jHP2v100dzNm6uaFP/Mjm+63OxxeePKi3KA89XSqAXtoqvNaf6Ir+v7r81dbt51ZdZ6Tw5evBxiP58uv+aj+bNZtJm2d02GD0+i5cPXRSPaXrWrhaCzR9F2OftDwOaxEYPb6Jjeze5EXl208/Yu42VzO4uSjcB8YwSJNr+vpvOMrxdNV8qim7+vmmVvNkV5dVjG3o/9xcHBlr02dHLyYot+yK1+zOiv+Q9/crS/v0V/8z8sqfAmo797mDon69HPuWNv8x+e5oP4xfu9cYcN+kc++nd5X7/mo/8tt3qf9/UBvONkiz7m4/qU//BzRmfCOca52ZeMJvkj/zdn33k3n900D8E3rEjPOy0WKv8dmcrL/WIqF7PZxWxxsbrNw7ba+Paym3xEjfQGFw7GjSpH9dzQURnai9zqMrcSn3yVP/E67+trDtIs7+v/8h/e5D/0Gjbrv81/KFynza3uM/o9d9vNwcpqmY/+Ie9rlQ/iMWfcU24lrHSdj+tPP4hXR55fMREODp6XrFxU2lM2HjyHbHyYzS+rk/1l+yTiHKZnnwoe+qWaJ8d+Ka+rzdoQjdb7rCaPq3m7mAm+bCp7uVgtunn8Yp1TqS+b5axfuwr/365bdFldr2adcts+6KXDRu53/A2ZQl8S52ommFhBdWs5uR64nF5fqzlty3ExRiuOzdg1i8Zr//io6N0S/noxvQdTK3963p0/NKKXHt7z6XJHhHerlQWYDUDU3e67NfbsfjlbCqnr68PXdhUWi2neD8ntI7eYPop6mF6sHtTapffyq3nzR9YqlXU7vVio9c75olEffNk+TC9Cxbk060YSA2DKAuvQD7a57EKqFqmru+vpYnU7n67Ex7TX3TrzRuxuiv2AcbkNOevCa1/3HJpnLy6vuoVeWBn6EiVOsr4Cidw/4Vf4hEP/hNvO6VZz/Ajz5qkzc43LTdEvl7OszCvL85YOtOy9hbQvZd7VZ3dW3OU9jJst5tKQ+tQcM9Cn/5g3PjXJQfXdxdHz1VE6AltIX84eZ5cihJN4ZL5iFsXhh135o8+7/mhNVWiTdX/yRWUCXc279M8LpeI4h8GOnOrB/4ZGyEaC/sBPA9KH+ElD5xFwFhLPMqmjL45eFHG48CE+ilzH14UxD7yXOi7v1AF4edRyNJqqL/Vld+xcqra3aKwQzmyVniGhm8DJE335Gj/9qCyo5u2fzd21yNwPVFF2Gqc66cmxs0h2Ze7r2pAu4oHAUFNf/fwnR85O7T59bReiV7/Sp3sYKlXwMfKTF0P7y4oRfaYP8IjFyS1c4Viu+lXOQhxvTEGPYo2TrRYTvF3NH2b387U4LuqgJ3kcjpJI3XrrYTadX86uxCnWum4N7+LneMKKZPHa2JlmO2adunRRGei7mg3WMuZdpTZ/ph3h9bduxYAX4ewUaNHeNHd4ImTmuGiuZ8u49PUSpbWXT8e5LuxsZNVVdTgf8WDHnPLCrBhaS5Hxuqyk1P+SaR+9KmvX/lJXvBBmcf7pQaxQfqwa4FxOqvvDaD5UTKapzo414XVt+bAjKysB/rNWGvzZ5gq1EalNPbx4t3mk9sm5ju2zdy5LaMbcL+uCZv4gLvg8BJN2T3xqdzhiXuKU3d2uRE/iEXmo5DrTa4FC71ef4grnxTH6eJfAiy6RxaF9TCcxNjFX5t9Tlcd+ihEHzk8l7MaOMsX6QuNnOn80XqvxX+iwSxy6qH2dzmFqKEW+OTWhS902FsrlzZfjsslT7RsDSOsgCwLPz3beHs0UOzQMqxrVqZzrP8oFomWwPsWxayGdTaibHm1lyv+xchAryvwyEF2CzC6U0f614o2Lncvdd3F8/HAr4/Zhd17v/KzXlX2+rpp0PB2wEYj7cSMWE6cvRSrTfc0pbuQC2hZkYSXge9tZCnQIdsVm5yfN2+vNeN+14mJVWzfTVZZKBnW7qlTytTwSu8ICM7nHvJK+d2pXfv3lLi+a3fNrNf7TanM78l/PRqfN4u636WyxuYv8z9Hrze3q0bPvjo//9WzY2rpHQNvjjGgwdYRv4tbWVQLCjqHwa7d15FvlEABBcgRuQxXotv4DCs4TlCFkgW2vDgW0LRxE78PWp27rlW+VmCEKvXfh8yYWz23LBsBR6D1w6D3Q0ntA1HtQrPfAhroOrLcTJGfd1r53f7zZPDR1stl87pulU8jg6AHfd5sHtlt4TuDZdy+OCl6FQ1nlkK0qIVvJkK1yyFbVkK1EyFYiZKsUssfY06dNFtjWOnRwXboECA59oEMjLGFDVMfGqZidc0UX5Y1AVNvGZYEXFarcEJW6cVXvJuaiN4kq37guf5PZA0wgIzBOblD4+4zAFwyROThXDlFUsAlDlPjGVfabmEvAJKoD47oYTOaKMIHLwoRYGwWjpxSGxlIYuosxthgThM8UDcymIOU4RVvlQ2bvMb5rCIQLmVQZgoofmVwbguRMJugheBRRAqMqaJ2Dw5ZlPPvWYB/oW4bIt4yTbzln3yrKG4HIt4xL3yoq+JYh8i3jyrdMzL5lEvmWce1bJrNvmUC+ZZx8q/D3GYFvGSLfcq58q6jgW4aoaIyrojExF41JVDTGddGYzEVjAheNCbFoCkbfKgx9qzD0LWPsWyYI3yoa+FZByreKtsqHzL5lfNcQCN8yqTIEFd8yuTYEybdM0EPwKKIEvlXQOgeHfct49i2MDZpX5ORgUSQbI5G9LMhvapxcLYrS2kIT8LfIyeSiqJwutsh2F3XyvChq44tt2P2iShYYRfLBIL6vcHDEyMkWSVTeGJqAQUZOJRpFVaexRS7WqFPFRlGXbWzDtRtVLuCoxioOGrppENBSg4C+GgU216gKhw0NwGYDV14bGqwqXWPXjeI3h1T4b9R3DWnFiWObnUOaPDmqO4b0sRZhsOjA15XAsllHMTu2E/RrpOTWKJFXB4mdGsQ3mpJLoyQ9GhqAQyMlf0ZJuTPq2ZtRJWdGSfsytmBXRo08GSVyZJDeSwpujJS8OEjKiaEB+DBSKlmUVMGinssVVSpWlHSpYgsuVNS4TFGLRQoKui5g9FzA6LiI2W9RE24LMngtUOW0IK9kV9hlUfrGkAmHRbU+ZBV3xRY7hiw5K2rVIXvUkQRPBbqWAWQ/RSm76dB9tFJD5KPGyUSds4MW5Y1A5J3GpXEWFVzTEFmmceWXJmazNImc0ri2SZPZI00ggzRO7lj4+4zAFw2RKTpXjlhUsENDVFjGVVWZmEvKJKon47qYTOZKMoHLyIRYQwWj5xWGhlcYup0xtjoThM8VDUyuIOVwRVvlQ2ZvM75rCISrmVQZgoqfmVwbguRkJugheBRRAgMraJ2Dw9ZlPPtWOVg0LmfkXC6QdYHA3mXSG8XIvVyQ9mUy+JczMjAXlIO5mi3MNfIwF7SJuc4u5grZmAvkYya8FwyczBlZGQjKy0wGM3NGpeSCqiVXczG5RtXkgi4n17meXOGCciVWlHF0NYNoawbR1xyysbkinM1EsDZjyttMXIlDZ3dzYeeQCH9zrTYkFYdzvTokyeNcqQzJo4oY2JyxtQgUG50L2enKkaHTOSOnc4GcDgR2OpPeKEZO54J0OpPB6ZyR07mgnM7V7HSukdO5oJ3OdXY6V8jpXCCnM+G9YOB0zsjpQFBOZzI4nTMqKxdUWbmay8o1KisXdFm5zmXlCpeVK7GsjKPTGUSnM4hO55CdzhXhdCaC0xlTTmfiShw6O50LO4dEOJ1rtSGpOJ3r1SFJTudKZUgeVcTA6YxtnO6QAmVOlwTo9qAthi9bcTsphFyuYPI4w+xwg/AmE3K3gqW3DSI4WyHkawUrVyta9rSikKMVrP2sqOxmhZOXFUxONuD3iYCLFUIeZlg52CCCfxVCpVKwKpSi5TIpChVJwbpEisoFUjiXR+GxOAaKbjUg9KoBoVMVxD5VuHCpQQKPGohyqEFapUNldyp4R8iFMxVFh7ziSkWthDw5UuEy5I85MuBFA1mngPCKq+C83hpqA23IEPmQcTIi5+xERXkjEHmRcWlGRQU3MkR2ZFz5kYnZkEwiRzKuLclk9iQTyJSMkysV/j4j8CVDZEzOlTMVFazJEBWKcVUpJuZSMYlqxbguFpO5WkzgcjEh1kvB6FGFoUkVhi5ljG3KBOFTRQOjKkg5VdFW+ZDZq4zvGgLhViZVhqDiVybXhiA5lgl6CB5FlMC0Clrn4LBtGU++9UNHX2/WUs9ty5ZejorHAAoxBY7rM6clkoAsSsAsQMCG2AApBe/ocx8p2/L0MxQOF3hISKPlcAHRmINiHQFmHQE2dGRL/lrifmxbFndHFndHMe7OMe5OLe6OPO7OPO7OStydWNwNbUziyPozDluTuGWziyOcO4wO367XecEWDf6MwTJEETNOYTOuYmdiDqBJFEXjHEoTOJ4mxKAapsgWDuEtaJzRRCCKtvEc8iKluPfveMa4F8RxL5zjXriMexFF3IvEcS88xb0IKe5FoLgXzHEfOMZ9QOOMJgJx3AsXcR8kivvfhpC/8q2yT0Al0IBCjIHDJwMtkQVkQQVm8QQ2hBJIiaKjqc3l/VbpAaDSA0ChB8ChB0BLDwBZD4BZD4ANPQBSeuBo+52gXZ8OCol6k/vUlKUkIt2nRvYJXk4OOHe1EV1tRFfbuJWPua0cYCsPsM1H0tK8CIo4xras4QHl2FtJ7G/nyrdhjfI2r1He5jXK28oa5a1co7zNa5S3Yo3yVqxR3qY1ytu8Rnk71MT+sW3ZGsVR6QGguGxxjssWp7ZsceSLE2e+OHFWFidOSg8c0VbugVUAIt2DRvYgVADg3LFGdKwRHWvjVj7mtnKArTzANh8JVwAo4hitAgDlSNOksEGr0GCVO7KqdGQlO7LKHeHTGlBER1Yi2KuQRaej7XWGbQn0W7FseyRqtOepRnsaa7RHdNSgUPX2rIQfUCzV02D1p9nqT7PVn1as/lRa/am2+tNs9afC6k+F1Z8Gqz/NVn9asfpTafWn2epPq1Z/Kqz+NFv9abb605DVpzmrTytZfSqz+jRn9Wk1q09FVp+KrD6VWb054z7yrXjhrEfpslj4KpNQFyRQiZCqqoWa5MKhBlRDpOpyokZcWSRTkZFK9RZVSA8SKKNJpYJkVaQ+NclVwA1yxVILKhlSuUZI5pKOclsVdoZF1jw1+VbH2QlI1aZAjXb3na2CVHKNqIKBkEBeQqqyFWqSHYYakNmQqn2HGrEFkcxuRHI0piiCR5FAdkVqcq5fRsOF8wPbsmvmgOLlchPOwtY4bE3ilp3nOsKTV6Pxy4fLGsmUgoeTh1+GWBxbZywAgPAi8JaGt/YPIqL+197aj+pZRuOMJgJRYNTr7CRVQiTfbC9xwhe6KQYcMfVC9yDFbILgkUAhZFUFMrY5qwnjmjCpChRgUnOYY4NKsEUjDnmuWBlFDn+9YocGg59i+A1R4J2rkBf1LKNxRhOBKLTGc1CLVAlnkDmQRVznGHDwjKewvRttLzNsP7DfssnVkV24chQnWec4szq16dSRT4/OfD3grFy4cmJz4xaVwnwtEPXFOHXIuOqViblrJlH/jHMnTeCemhC7a5j6jDcIGFGf0w0C5qrP6gYBS9TnfIOABe4z3yBgzH0ODvC6KnD/o8pRiKqMRWwiIhIbcFyimqIT5RSjKFOkokjxKvc/XwtEMTJO0TGu4mJijohJFAvjHAUTuP8mxJ4bjn3+dejukW/FmxO/YicBxcc9nKdbGL9irwD5AxzOrC/Ahm4AsSc5DH2KW2XyQhTmLRc2U9axbY3D1pfQchI0m7EApUcEfkWjPSJEYU5Gy1wFXBktSxT6bLQs8CCw0TKm4cAVMSMamMqKmNSzHM9xRl/yH05yKx42tUgepPCmOAxg5DSKUaShjKIaz9giD2rUaWSjyMMbVR7jqMaBjhqNdvrCC8lp3Hd94YVqclYZlXGFf6nsZ1Jpz1lR/dKHQYeXXiExkFJaoERJgZJKCdRzQqBK6YASJwNqnAqoxURAhdKA3rMXlFKg/p59bnAmIz+W9Ivcw0S25WGvvHs+qOV1QRhxQzTcxmmsjauBNjGPskk0xMZ5fE3gwTUhjqxhGlZ8R5gRDWjlHWFSz3I8xxl9yX84ya14+NT7tIMUL7LhELJCI8kyDSjLaly5TR5ebkGjzDIPNus85qzHoWeVMoDkT3WF8iHJKi2o0Vl1xMZV5Ut1b5Pq33DmsJwTyF6hg9RxRknjAqWLCypRXM0p4holhwucFq5wQrgSU8E5JUF4wzYxGvjaG7Ysn4nojgX7Iv52ItrxoMq3UAetXN2B0TREg2mcxtK4GkoT80iaRANpnMfRBB5GE+IoGqZBxKt9jGgIK1f7SD3L8Rxn9CX/4SS34sFTFwAHCU/SjwjR2KWTdOZq7NRJOks0dvkknQUeOz5JZ0xjh28mMKKxq7yZQOpZjuc4oy/5Dye5FY+deop/K/02DNv2mfLfcMQAlcECFMYJeHpO/TccHUA2MMBsTIANwwGkjISj/gkt648/oeXIntByJB4s73l6sLyn8cHyHtHj4z2jx8d7Fh4f74k9N2QoPrW4IX5BqN+KF7t6ZHfOAeVLXD1PV7e2FG+MO47Xu3pEl7p6Rle5NqyNW/mY28oBtvIA23wk6a61K+IY/f60o3ixbYP4qcX3I3wvod+KGdUjkT49T+nT05g+PZLvJfQKJVbPKLF6FhLr/Sg9ffZhhM+r9FvxIZUeiSdTep4eR+lpfAalR/LBk16hp016Fh8x6VF8ruRDcNUP2VA/1Lz0wzBwvp/Pub+fK/39LPv7OfeXBw4U0d/P9NTpBxg4J735H5etje8f2tYkbsVH+D+Qqw+0XESD0TdEITGu4mJiDo5JFCHjOkwmc6xMoAQxTlmSL2o6onzZeVHT1M9535w+xnfFSiSSSZVYVVLK5FqsUnKZEDMsXLeNGTLOSTMRiLJOXaQdpHLnC1LPEIXTuAqniTmcJlE4jetwmszhNIFSzzilXuGQeoYo9Zyr1Cvq57xvTj3ju2IlUs+kSqwqqWdyLVYp9UyIqYdvRB3HDBnnpJkIRKmn3ogqUuVJTRY4tN98UpObiDDvelKT1UrIdz6pyTKn6q4nNUnFtNXP9lRUmcKhzefaZ6Z0juq3Y65SOzbYGfNamsdGu2OeUz7KlPjpoadjlaXjWvpOqgIXRPWhp22DbrjhxbR+y57tcRRfTOuReDGt5+nFtJ7GF9N6RC+m9YxeTOtZeDGtJ/HFtE9DNe+/tC1bkDuKC3LnuCB3agtyR7wgd8UX5M7sdRBHdlpnyE/p+q34TFWP7EsgHMWX3p3jybtTe9Xdkb/G7szj7qzE3Unpgf/hRTuHs/Qt2Z6qOoldanIv7VQVUcgu57KX4VQVGufON6Lzjej81/X91yYe0iwM3Syn2MxPwoy1YRdt7ntb6Sie8gK1MnJEeQmKF5izkpeArJoM2YmiF9giDOkiXgXqURlERGFKcGHZ3M5y5qzCMaxyrFaVWK1krFY5VvzsNigiViuRF6tUFE+hD/6dV/2WebGj9D1XZVpFF04PujEnP9YPurGYnTk96MacPTo/6MZCdOv0oBtx8O10GsBcObg6DWCJvLx2GsAyu3o6DWBO/l44mLwhym3jZPfGleebmC3RJDJA4+yCJnDKmxDz3jDNCIVTcTsOc0PBIhI8SxinqcK5sAYT6xFSM4dpleilOcSEWvR4Nil8lrOF5xXjPLkUoc275WnG+K4giQnHJHJS49pOTWZPNYEmIeM0ExXO01Hhi5xKPDEZp9nJuZqiiirmqSKt8mHyjGV8V9jF3GVSJeyVWczkWtjTfGaCLu6n3GuY3gzRHGdcTHTp6eYyoPrpZq3y1Lfj6WbdREyD+ulmraYpsfJ0s5ZpetRPN0sVp0p9wUKrctqsXrDQDXgK3XnBQjdK06m+YKFVnlqDihNsFLggo8qTbVTllBubiGklNuAJJKppGolyqtYoU81GkafloLKjkRin6Pgya+0D03QdVZ60SVX2GJt8K9JyGo8tdo5FntKjvHss0vQe1Fktb9NUH9U04Qe5rX1cmvyj+u1gq4VAbMDzUlQrs1NslOaoKPMCIaq8TAhqWiwEdVFL7bRwiCovH0iVi4jQRi0lQoNVrUNpWRHVbw+oWmLEBjsHtLbciI12D2heekR5l5k91SKGi5Eo8JIkqmlh8nlYjZw8t62yB0BlugAUYg8cPgFoiTIgixowCxWwIT5ASg04Ks59bMRKYUD4cssJIepwermFueq6ermFJQpCfrmFBQ4Hv9zCmAJTOEWnYA5ReofkRHEKln6HRIoqbNV3SKROAay8QyJVDqV8h0RqFNQgUmSDxuGl9zBOMqXQqvcwhKTCWnkPQ6gUUvkehtA4nOI9DKFQKEGiQILCYcQ3G04IUQDTmw3MVejUmw0sUdDymw0scLj4zQbGFKjCKUoFc4jECwQnWqGA1V4gqMgqfDteIKi0oGBWXyCo6BzaygsEFZUCTTLFm1QOe3js/oQZhTo/dp8EFV752H3SKKTisfukcBjTY/eJU+hMoKAZ53DZz19AuJxRuFygcLmgwuVqDpdrFC4XOFyucLhcieFyTuEygcLlv8NC4Rq+pR+CVQiFqmAKVMEqTEXLQSoKhahgDlDhHJ7CY3AKpdAMmAJTfvohhuVsCMn+9ob+GcYDmT3kDCxeHAIBLwkBtgtBwPzKDkA/ewVYnkgFZFd2nG1+DOHQema/gwAonm+54L9+0G/ZywWOxG8e9Dx9O1JP4y8d9Ej+yEGv0O8b9Cz+tEGP4q8abJBfv+q34ulej+ySpyNx2tfzdK7X03iC1yM6YesZnaX1LJya9SSefp+N/IoSkm3i7h+8Kqgf5ec2Vv41o8DKaXZg8UlqF8Kj1IDxq0aB+zPWzuBRaofwLLVBu8SzPRPdoM11ncMXtmXnnI7iY0vO8QTUqT2g5MgfOHLmTxkZa+OxtiKybS2KrY5iK6KVvhAVJBVI/0pUYP5ugzF/wN5rAi+XeFat4lauFHU1pOeyLFa5LPTFjl4RBcOXNXoWCmZcvHn7yP04eDMw82ZgcchAwCEDbEMGzMcFoCc4wOLNgGysnPU3IXwrvvgwTg4LPL34MEaHBSRffBgHhwXmOWYovj4zHhz25Ni2bLHgyBYKjuIiwTkuEJza4sCRLwyc+aLAWVkQOLHFgKFSC8dA8JWg8WCw/hdN7qXZKyLdy0b2Mngr4Nz5RnS+EZ03X9262XiE18vHo3SRfDzKV8bHgwW+sL2aAwKKb6Q5xzfSnNobaY4oL0Hxd9WclbwEZC+mGfJr1TaIaHw+2P6jOGM0PkDip3DGZHxA4w/gjIXxgUI/ezMOxgcs/NjNhmwu0J74Vlyj9ygttifFL/d90zIAmPklsOg8IKD1ADbvAeYWA9DzDWDxS0BmPM76p8yPbSs+mztJfgk8Pag7Qb8ExI8uu0I/pzFBvwQUfyxjMvjlS98qRw2oxB9Q6Ahw6AjQ0hFAdrjALPTAhsgDKT1wFNcOk+SXk8Ev9/f3bdPzzJktSJHFPHMBrQQorkehtVmMIzcSZ5B8BumG42SEq9HJKK1GJ6O8cJwMrgm7bUUE2lpvw8IRsFeVM57SQYKCc2iTOjAvLmNkn5ORWjdORrhunIzSunGS7BN4WjdORmndOBH2CQqtGyejvG6cjHjdOLH7GeAn6WZNEtgW9e2apAqDTDdskpCsMt+ySQqZZrppwwLYZ35BkbgyUvmCIklkqdUXFElmc80vKBInmy0cvNYQGa5xcl3jynpNzP5rEpmwcXZiE9iOTYiebJiM2W/GhQrle3SEseqNsVWZwI7tgjIyU7N3uyQM3ERyceNs5SYkPy8Km3rh4OyGyN6Ns8cXoRWfl9zehJ2RUr5vGpu/CZUZwPQ0DZjCc4EJPCGkW7oURzE1FGklEE0SxtVMYWKeLkyiOcO4njhM5tnDBJ5CTIjzCN1xLQarbrkqjSeU6k1X1UBMK+q2q9LS5CJvvCqRphh161VoMNEgpbkGJTXdoJ5nHFRp0kFJzzvYgqce1Gj2QYkmIJBgDkJK0xBKNBOhpCYj1PN8hCpNSSjxrIQaT0yoxbkJFZqewr34YBTiLn1W0IwQs8+ixrNV0JQNY4M8ZwVVTFuo08yFEk9eqKX5C0SewkCCWQwpTWQo8VwGWqs/Ps1oqH0rmmpeQ5mnNtQqsxs2SRMcijzHocbTnHosJIdbTHagrjSlKQ8lNeuhnic+VGnuQ0lPf9iCZ0DUeBJELcyDXcX2P7u8/a2Z4myIBkdDFB5lAg6fArQ8iQLI7vsDs5vbwOC37AeCPxW9Refd1vmoXNU+x+E/MrQZ2APfKgMKSHzD0jkNIND4DUvnYsBAoW9YOg8DBCx8zfn50Mntb90M5pp+K+Ioq0XaXiTtwtA/KLrdzeXF8COsjprwOQ0mwIDKiyuIOAEGTglQqBsuYsyLAYW8GFjIiy27gunGSfcx82a5nNlMfjXY64FttXHL0sCR+P2oKzJBoPGXoq6E5YFCvwl1hQYHKP760xXms/eV8mB7afmKUmCbAdd5D9elpplXnhjfquX3RmDL5hVHOFv0dFaGrj/GWUiwLcrZtOWcTVsa0maLYtpsWUybnt2UtYhvxft0N2HlASjfuruhdQbScJ/dcLyjdxOWE8DoC8tuyqx+bFsx6Dd5DneeBuMmzNiO5G933cT52Vn8Sc+bMBsbWsetfNQ5VW7yWzVDFCpv1WiVRnDXWzW6SR7XHW/V6BY02rW3arTMOZDfcJHx4szY9YaLbvKtEeHU2f2Gi27ECVV5w0WrlGb5vQct7AxMzsNiJdv1wx1a1oBwTiwo7BQEXLJsURtsqS3z8XYrG6QhaFXxzMihvfRSpNA2O6whaEUPvD5WFfgbYdTOoF350tzHjKAVBpaQtyqTWFo6bWfHKEet/MW8uSqPSm/3yUK0I1bjd6iyKuyImyQ74gbRbFgls2GZzIbl8GWZLMYnSnpVB2tHpHaE6Vsx2h2gHdHZFZpdcakH5dsRgf9/d3Jo6pByI//60YiHFbvSQsqKXS70ny3i2U/UytwptfB0qWjhD+5FHC9mRK18oNS6mXg+n9bU+LCraHE/vegv5Bwl6dE60AVpdLEZsJe2FZ+s6ZEtKQDZwQEM18AWZQ1jepN33eRd0xLFOeY5UFyMOI6vpi/issMZPTO0YZ7a/VYszB7F0LtATy1tkM/0/VaciXtkAQAU9+9CnP8XZTVkh97mALeVaLYymm0OW1rWuCIC2sYX9hdh1WLoPoTNT7SeG/s9tPcprlQvJq0h6r1xyjHnnMP6jqNhsW9O6Xy/kbkYDnW3MUk5zdPNRuY8PuJmYxSuc5w5/43LIkg3LYdKKBwS3RDVhHEqDOeqOkylEgl3OmNnuVgq9zlJrA8R1071JifJtVHiUsp3OCO/z8OQKqsIv+c/hxqz72XyVoYoaMYp351zjfGXPg01hl/6RC25xtKXPiUuBlB96VOSco2lL31izqOXv/SJhOscZ64x47LG0rdHDTVWONSMIaox41RjzlWNmUo1hl85RZ3lGtNfOcVifYi4xmpfOcVybZS4xtJXThG/z8OQaqwIv+c/xxqLX68CbaPAAYwqVwCpqfbkd7qUCsxXn9RfpWqsXH3Sqhr2+tUn3UBUaeXqk1RTLtSuPin5ujaCqYajqitZf11MqeegYpVGgWs7qlzhpMo6j2242vPVOBWoVPm7rsbJJt9KhOQFu6/GyUa7cyG5Q+VqnFLva8Oc/SLIv9d26N4xnNj1Fxm2l2qMlKATtq+0iji+HBA1fEEgKvaSQMT+OkDk/kpA5OW1gEjtG6oC/jQqr3MasRNnwuIV0CJuvk37KOx3nNpM0mdPdEwnKUDdAMFPCvVb8XpPj6JN9Ehc3+l5uq7T03g9p0d0HadndP2mZ+G6TU/i9ZpHmBS8T1Fvcp/ojsNjNnrnsk/ihsJj8HFHoqt8v+Cx2JJv5WPmFx+NywNs85Hktx5NEcfYxvfRHoN9GDJreNGjpzQcT6FrT7lrT5WuPcmuPeWuPVW79iS69pS79pS79pS7tk5dW4dMW+dMW+dMW1cybS0zba0zbZ0zbS0ybS0ybT3Ce+prHA5A4p76moYDaLynvhbDAQrdU1/jcACK99TXYjj4wscwJuHCR2zJo5MvfDAX4yQvfLCURyxf+CDOYycufEQBRjFdHmCuxlNdHmCJRrZ2eYBlHuN0eYA5jXa6FjAMuXh2cRh1fnYxteexl08uCklkQOW5RaXmPFCPLQqJs0E/tpg0yAn1MKGQVGZUHiUUKuXHjgcJRQvOEvUYoZAoV9RDhF26/Os//w8s8zdF",TimesBoldItalicCompressed="eJyFnV9TG0myxb8K0U/3RjC7NgZj5o0ZZnYGz5pZGyH3bsyDEA3oImhWfxCajf3ut1Xqyjx5Mkt+cbh/p9RdlZV1qrrVJf5T/dg+PjZPi+r76urvy/nortk7PPpwfLh39P7DyUm1X/3cPi0+jR6brsDl5LGZf/dDO735dTGaTsYbdTmdorq3UfdUHj1Opmss0MFhM7m731xwU7Y73pY+fbqbdqW+e3vUkfnPk9fm5vfJYnxffb+YLZv96sf70Ww0XjSzL83msz+9Lpqnm+bmc/s4euqr+cMP7Wv1/b++O3jzZv+7g7cf9k9O3u+fHLz9Y78adGVn08lT83s7nywm7dPmSl0xFS7vJ+OHp2Y+r74/6vhVM5unYtWbNwd/efPmTXeNT+1iMt605Mf2eT3bNGLvf8b/u/f25MPR/ubf4/Tvyebfkzfp33fp3+O905v2utn7sp4vmsf53q9P43b23M5Gi+bmL3t7p9Pp3ufN2eZ7n5t5M3vp6DaYk/neaG8xG900j6PZw157u/fb5KldrJ+b735puk+d/m1v9HTz13a2N+k+PF9ezyc3k9Fs0sz/0lX3p+4yN5Onuy/j+yZ1QKrFl0X3kdHsJqtdwR9Hz7/0ffL+/cl+9TUfHb4/2K9O5+NNpGed+OHdfnXWyHEX4+P96svi5pdhV/Yg/feq++/bg7fb/vp7s5hNxl1E//Wfavi1+v5gE9lPXU3mz6MukP/d3+J3XcwSbl7H09Gj8KOjoy3/97LtQnU9VeVNf6Kn5eP1pqfunrx2006no5nwD+/ebflzMxtvMj4Lx8cftsLosZPmXXi0ZvkzqQapy732PJo1T9PmtiTZj0n1RvPNGecPqhz3yvN0ORcqMRt3A3XkL3G/fr5vnnzxrimTVltykBs5n47m9742fzaz1tP2qfFwsQpKLu5nTVD2tl3OAjp5CcrOJ68BbF6aoG+bOKZPE6iwhGjcTtsnj+fN48RK0gPTjQ842vx7OZp6fDdrupEcNPPfy2aevEZT8KDve637+/fHW3bq0Q8e/ahpe9Cf7MyX+smjn/0H/+aHwC9+UP7qG3buT/9R0du3W/Sbtjuf6+++Ep88uvDn+t2X+oevxGewjvdb9MWf69Kfa+DPdeVrP/SlvvrT1x790yffdTeZPTQLYxsyRq87zY5T/hx5yrF4yngyGU9m4+Wj77XlxrXn3dQTDJHkb6Yy6lMeXQs6PDzsx1jgv75UcOVb/8E73433PkgTj/7Pn+vBl9IhLGn/6K8YmE5ge8/BqPdDaObR3Ndr4Sux9CF88Um48pV49R9c+0r8qejwg+aXTYSDg9zrMJna8ruycTGZ3hSn+pt2FcTZzM46EyzSQk2T421u/+1mYYg+K59ZR3PH7bSdTQI+bwpnGS9n3TQ+XvsuS8NmPklL18D+t6uWeFjdLSed8tgu4pXDRk4n/oZMoc+JczsJWLB+6lZy4XLgZnR3F01pW45LMVpwbPqumTU3/qPdWmh0Nxs9g6nlj153dxFN0EoN7/VoviPCu9XC+ks6wOrdXUGOzXQ6eZ5P5oHUtXVx3y7NWtFN+ya5tedmo5fABkfj5SJauiQvv502r16jkZXx42g8i5Y717MmuvBNuxiNzYhTadL1JAZAlBmOQ61sc9OFNFqjLp/uRrPl43S0DC7T3nXLzIfgdCNsB/TLo8nZk2xwp7rqOXjf53w7u7ntlnlmXagLFDvH6vrDcrnAhV7gncwJs5vHzueWU7yCnGmkTDzjZjPk5/Ng+poW1uZtoZ5tkPTd6OxuiLush16TlZzrUJ2Ybf7p5G+zRiemsEv1dLbvdG3kaiCTxc3kZXITdFJta6bL5WBoaLXth3SdF3xIJ0gagzJVpzsvGiTQVH9KvZ4ZKIp9GKTmNBr0M9RD0hP0Ab0HcBfRO4bOIeAWxN5iUkOPD4+z2D/0CC5FnqOrQpsH2so4Lp+iCujwKOWotVRd50dn0xup0tmsrUI4vVFqhphmAidH1MWrvfrhSR+waftn83QXXP6zvYTew0WN1OTYOUgCUYcXTyOylrUVga6mturdj4+c9tF9OwtadUFX1zAURsEXcok32WwLYRvQBTRidmozjzfmy7TGmQX1pRSUKJY42Wo2wcfldDF5nq6DelEDNcltd+RE6lZbi8loejO5vfV9tS5bwyd7HU3YXcny08402zHrlKVxoaOfSjZIHQqeEo/NX+lE+PCtWzDgEzi5AZq1D80T3gaJOc6au8ncLnx1iNLKS6djPy7kXmTZjWpzN6LBphWkDMyCobU8lmRcFlLqn2Tahyd55Zqec9mnYNLKnxb3vq4/Fg1wGvnWu7xsWxRMpinOjqVZ8LS0fNiRlYUA/1kaGqVKXZR6pDT1lDx3XrpyeRxf7FyW8IyZ1wXNdBE87lkYk1ZPXLU7HDFY6b3PJhe0xNZIQxWuM3UsUOj1PtWucI6P0Me7BJ51iQxVk2nE3cJ8OMj5OgonpI/hIkPuMGzH6T2MfKkTmWJ5ofFrITV/LY3x32j+y3HoonY/msKztzzIN7cm9Jxb+iJyefFlu2zSVPtGB9I6SILA87Pc31gzxQb13Rr16iic67+E613J4PgWRzKss4noG4+2MOX/WKjEkjL/UOz8ZjKOjPasMKHNdrbmk+0frW5huft5d17vXFqfFs55WjTp+HbgovDs8M9g4tSlSGG6LznFQ9iUN9mrzEpAz7ZzKNgq6PPdnVeatneb/n5qg0dVrTdTSR8v5QzqTlUYyXfhTYM8X4GZXGNeSN+ncB6H7w/dFKGeXxrjPy0330X+sV99bGZPv48ms803yP+qTjdfVVf7370/+mO/P9q6h0HbelrUmzrCv22O3sjR1lUMwoahcNEdHelRrgIgSA7DpasM3Y5/g4zzGKUPmWHbp0MGbQcOon9sjqT1l/YoxwyRab0KA3PWgW/9oND6Qdj6gW/9oNj6QdD6vPAzLNkJkqvu6ETaMOyOuqk4H9bd4bEe5SYBgqorhVcCOnyY8bI7eieFlvlsgEyAgMNVgOYAAaIAgSIBAiYBAtYHSMmLacPKHK3tkcRHEcZnS/tCOF4F0aAVTiNXOQ/frMAYFkQDWXg4mrMKQ1oQZbbwKL1F9DkuEiW68DjbReaUF4FGvXAa+pnD+M/oMkDkBMojO8jqwF+OjUH4rvAFFiFSIXwFsxC5FD5nGyJY78gYDCQjdJHMwEoEkZ8I96aSpchZsgb2Iog8RnhkNCJ6txGJLEd47Dsis/mIwA4kgrWhjF98q1cerQNE1iTc+1NvE+hPgsifhJM/KWd/ygr4kyDyJ+GhP2UV/EkQDTDh0QAT0Q8wkWiACY8HmMg8wEQgfxJO/pQ5+FNGlwEif1Ie+VNWB/5y7E/Cd4Uv8CeRCuEr+JPIpfA5fxLB+lPG4E8ZoT9lBv4kiPxJuPenLEX+lDXwJ0HkT8IjfxLR+5NI5E/CY38Smf1JBPYnEaw/ZfziW73yaB0g8ifh3p8wNGhSlpNTWZHsikT2LCODcVlO7mXF0MJMEfAxy2k0WjEakraEH5dWp8FpxXiE2jI8TK1KVmdF8jsjgukZflniZH8kRh5oigwK9WA3tOI34x/4otV3xb/gkLbMzvg7r7SqNUyjgWsajtZpBPBPy8lEreid1OiRnZoC4KmWk7FaMXJXW8JbrNXJZ60Ym60tw45rVbZdq1rvNdpLIU6rAl+XOPmxFb0pK0FLRkqGjBLZsZHYjEEEK0ZKRoxSaMNQAEwYKVkASpEBoO6HP6o0+FGKhz6W4IGPGtkuSmS6IIHlAr2MKdmtkSKzhQKD8OpstCh9I8qByaJajnLBYLHEjig7c0XNWisoYKxA0VYBg6kiJUtFyRsqqJGdggxmipSsFKXISFH3NooqmShKsYViCTZQ1Ng+UbPmCcpLGJNVSNcxJdNEyVtm33r0S0FklsLJKZWzTWYFPFIQGaTw0B2zCtYoiEas8Gi4iujHqkg0UIXHo1RkHqIikAsKJwvMHPwvo8sAkfMpj2wvqwN/OTY84bvCF1idSIXwFUxO5FL4nL2JYL0tYzC2jNDVMgNLE0R+JtybWZYiJ8sa2Jgg8jDhkYGJ6N1LJLIu4bFvicymJQI7lgjWrjJ+8a1eebQOEFmUcO9Pua5oUMrIoVQgiwKBPUokMCll5FIqhDYlMviUMhppKkRDTVU/1lSjwaZCPNpU5+GmCtmVCuRXIoBhCbuMGFkWCJFniTwIrsmupcLOWAa+pVoplgXnUr0YS+ddqljzEg7uJQztSyD4lzIyMBW8g4kWWZiI4GHKyMRUiFxMVW9jqpGPqRAbmersZKqwlalivUz4S9D+VcDWESM/U8EbWq4YGpoyMjQVyNBAYEMTCQxNGRmaCqGhiQyGpowGoQrRIFTVD0LVaBCqEA9C1XkQqkKGpgIZmghgaMIuI0aGBkJkaCIPgmuyoamwM5aBoalWimXB0FQvxtIZmirW0ISDoQlDQxMIhqaMDE0Fb2iiRYYmIhiaMjI0FSJDU9UbmmpkaCrEhqY6G5oqbGiqWEMT/hK0fxWwjaG9YyYxYQFbvdVm/W+UqANlQmaWMVmZYDayXgAby4RMLOPQwnoRDCwTGnIZRwMua364ZYUGW8bxUMsqD7TMybIyJsPqMdhVTy49IasSHBlVLw7cldikMt4RscCgshJHrGBOWS1EzBlT5taWegqm1BO0pB6BIWVCdpSxN6Neiayol8CIMiEbyjgyoax5C8oKGVDGsf1klc0nc7aezK3x9PTFtXXlyNoTWkFl7NdP/SBAvxFEhiOcHEc5W05WwHMEkekID10nq2A7gmgUCY+GkYh+HIlEA0l4PJJE5qEkArmPcLKfzMF/MroMEDmQ8siCsjrwl2MTEr4rfIENiVQIX8GIRC6Fz1mRCNaLMgYzygjdKDOwI0HkR8K9IWUpcqSsgSUJIk8SHpmSiN6VRCJbEh77kshsTCKwM4lgrSnjF9/qlUfrAJE9CXf+9ENHT7ujgyM5yp8FlL0EkAkpcLgC0BxIQBIkYBIfYH1ogOSBrWiQMlCOcgsAmeoCh+oCzdUFRF0OijQEmDQEWN+QLTkzcT/zcT/zcT8rxP0sjPuZj/tZEPezIO5nLu5nPu5nvRkcSXs2PnAoR7XRamuDZzTue9qbLkZGEIVHOMVIeBQoEX20RKKQCee4icDBE8FGUDCFMfMrHwYIaEa1L8WhFR7EN21itPHNiOObOcc38zC+WQzimyWOb+Yuvllw8c0CxTdjjm/Pr3wYML49qn0pF9/MXXx/7kPbT4Y/Y1iR5ZAiI4NSwTiUYrUoZeBECsGKFIoXKcphAzaSuT4d5aYAyi0BZBoCHNoBNDcDkLQCmDQCWN8GILkJira/cdk16uAkI2pjE3RQkxd/hhU6qIk7CHbdWh50XBN1XBN13EQyNh3lugMy1QQOtQSaKwNI6gJMqqKsldVaOrJru4RMTYC75V6iuSaAaMoFReoILN8GAMr5oKj/EVOTEDMzfmd2tCck9wKA7G1AEs6Ns557Uz33fnpesNLz0EXPvYGeB955HtjmuXPMc2+W5/2gP5T2jGyKneOgBxRk3TkNeqA2687NoAdGWXcOgx5IboEiGfRCrN74NsmIRxS3qQnbZIY7YN/UJmhqEzS1tUe+zm2hgm1YwdbXhAcYKEEdZYAB8rHXASZoaQosfUOWhYYsw4YsfUP4fgyUoCHLINhLk1cfq+2TkHd6ZO8sEwpuKhN395OJ2lvJhMK7yKTQDWRiOfyAcvgV6VD+iIkOKCc6Im8/HynRkUKiA7au9NEkOjBypY99osORr3NbqGAbVrD1NeFEByWooyQ6IGuTH/usPpC4S1YDsrVWjrVWKrVWxLVWRWutTCOrLPu9kLU98rVe+9qZqQ7HBQk0REiNRgsV8QOHCtAYIjUeTlSIRxbJNMhIpfFmVUgPEiijSaUByWqQ+lTEjwIu4EcslaAhQyqPEZJ5SFu5LQo7wxKOeSryrYazE5AamwIV2t12tgpSyTWsuiyNMPYSUiNboSLfGsNsNqTGvkOF2IJIZjci2RqTFddFYWdgvHP9Vm0f7b/9IEdyYwfIrORV2DwveHecj4bmqLZH4nyK0MuEmsfZ268OfusbrIXW/mxrfzbcc9/X2e25dzxqKW5Ip3MPPaoDRPWN9qOTFMUBt2FTcY5ItA27l2xKQHBIoBCxGgXKlrkqXXNYEuqiQM0j9VuNjILpB1T4UQ5seUD1BXq7w8AKopAqj4KZ1St/7qFHdYCo6sLLlY4ClbW1L87BEe6u8Kna3vdvlwXpyK6FEsp3zYCCNVHibiGUqF39JESrmcToO6bEzNdLidilzKc8pE4DRG0RTg0SHrVKRN80kah9wrmRInBLRbDNFUxtxi8bGFGb3ZcNzKM2R182sERt9l82sMBt5i8bGHObzQg/LQrcfqtyFKwaxsIWCSJiC3BcrOqiY2UXIytTpKxI8cpfnJ4GiGIknKIjPIqLiD4iIlEshHMUROD2i2BbLti2+aJv7qEe2Uc2F9hIQMFTnAtqGlD7FOfCNAgYPau5gGYAsc+hLvoZCo7s470LPy+poN8TXfSzkR59NSVro9HXRBdV9A3RBRrtISEKszNa5lHAI6NliULvjZYF7gQ2WsbUHbhWZUQdU1irknrl4zn06Kv/YO1LcbdFy9deMtu5oQMtp160InWlFaP+tCV8p1qdetaK3L1W5T62qu1oq1Fvux+eCDn1+64fnoiKXBV6ZVjgXwvnqQvlOSuKv7/Q67BpFRIDKaUFSpQUKEUpgbpPCFQpHVDiZECNUwE1mwioUBrQZviAUgqUN8P7Aldh5Ich/RqeoQ7LcrcX9oj3at4GCD0uiLpbOPW18KijRfS9LBJ1sXDuXxG4c0WwPSuYuhX3+DKiDi3s8SX1ysdz6NFX/8Hal+Lui7bE9pJ9xoVdyAr1JMvUoSxH/cplfPdyCepllrmzWec+Z912PauUASRflhXKBydHaUGFroo9NiwqX4tnq4uf4cxh2SeQ7JmD1FFGSaMCpYsKUaKo6lNENUoOFTgtVOGEUMWmgnJKArNz1jHq+NLOWZavgugOA/Y1+GwdlONODTeY9lp+ugO9KYg6Uzj1pfCoK0X0PSkSdaRw7kcRuBtFsL0omDoRn+Yxoi4sPM0j9crHc+jRV//B2pfizose8PUS3qQfEqK+czfpzKO+i27SWaK+8zfpLHDf8U06Y+o73LrAiPqusHWB1Csfz6FHX/0Ha1+K+y56038r/d5324cjOcqfBZQ7C5DpJ+BwBaC5dwBJxwCTPgHWdweQ3BOK9JWpdGRzLiGbbgkFmZa4S7JEbX4lRKmVGGVVYiahErG5tEH0nuQGNaaTGtulCdnX4rbIb2pJPOx488U0YLvDJSHavZIYbVzZsM2XzUfSLfINMyBbQeVYQaVSE0W8zUYVraMy2ZukSLYlCeKXEv9R4Y6GdGR3NCQU7GhI3O1oSNTuaEgo3NGQFNrRkBjtaEjM7Gj4XG1fDjnUIzsQEgqyPnGX9YnarE8ofNUrKTQeErPvrCVkk/9z76Hv9CinNSLjnCoMzHkGvr2DQnsHYXsHvr3cS6AE7R3Q+P8MvaRkY/Xb7+E+9y6vR7U9krxThPm1pfmRGfS+IAqJ8CguIvrgiEQREh6HSWSOlQiUIMIpS/AR5jtClC+FR5ikDvy5OX2E74pVkEgiFWJVSCmRS7FyySWCzTB8SksZMvSoDhBlXfRItpfy91yQeoIonMKjcIrowykShVN4HE6ROZwiUOoJp9TLHFJPEKWe8ij1sjrw5+bUE74rVkHqiVSIVSH1RC7FyqWeCDb1cC8VZcjQozpAlHrRXqosudcicyXi1yJjNQxw8bXIuAAHe+drkXEhF/j4tchY5YR17+C8CwVO3l3v4IRlBqVrunS26rdjHqW2LbAz5qU0t4V2x9ynvJUp8d3LSWGWDktCXRR4QBRfTtoW6Lo73dBtV7fpyK7CE8q3Q4CChXnibmGeqF2YJ0TL78T0FkFZ3tauxK7IL/vRrO25sDG4dOMWeBgQGaGAePWtiq6+leUBCEj26wlK2/UO5CjXGpBs11Nkt+spx+16SmW7niLdrqdMt+spy9v1lMh2PUHjdrrd1nWoZHtjqmXsJxrfSrkvRRS30tyXAoX7UigsSadIk05Z0Pj79fN9Y6u02cm3fX0sHdmXzRLS1ziEbe5vTyRL5f4WULD7MnG3+zJRu/syIcpLUGhfZmI5LwHZTZgbJPe32vqZadbMt1723CGyU4II8+Zx4jNnacos/SXoVyGUuxf8EpXXcBTxjgNV9N0cZUF/yu8+CFmZo7U98m3wLyPmaRVd2L3Wxpz8OH6tjUXvzO61Nubs0f61NhasW7vX2oiDb7vbAOaRg0e3ASyRl5duA1hmV3e3AczJ3zMHMxREHiic7F545IYieuMXidxfOE8BIrAVimAnA8E0I2ROg1uxmRsyDk7As4RwmiqU74hQMGmo5GcO0Wj6EM5ziAil6PFskjlMKYLIMoSzGWUBZhhBNM0Ij+YaEf2EIxLNOsLjqUdknn9EoElIOM1EmfN0lPnMR4MnJuE0OymPpqisBvNUlpa+NM9YwqNpS8TyfMATmPB4FhOZpzIRSilEk1rGK4/WASq0Opro3LvMeTaI32WOVZ76drzLHBcJpsH4XeZYdVNi4V3mWKbpMX6XOVRxqowfWMRqOG0WH1jEBXgK3fnAIi7kptP4gUWs8tRqVJxRrMCTiFV5srVqOKHYIsHEawvw9GtVNwlb2U0mVqYJ2Yo8LRuVHY1EO0XbnaNFYWek3aRN6jcjHU3gVCCYxm0Jnsyt6qZ0K+/uCze9GxUneSuwc1rVubXdqgrTpBV48rdquASwRYKFgC3AywGrFhYFtpBbGliZFwhW5WWCUd1iwaizUjzdwsGqvHwgNVxEmDLRUsIUWJY+6ZYVVg0XF7bIt2Zit9CwamG5YQu5RYeVdyczL0CMuCoJ66KwM2J+YTLoVyOHR3Ikz6MVyRshiuxzaeX4MFqpPIFWpE+UleljZGX52bESeYS/RWaXCiFqi9+lQjxqVbhLhSRqX7BLhQRuqdulQpja7Hd3RJxaX9jdEYlRHMq7OyKdIlLa3RGpHJt4d0ekUZR4o4OnFKFwo4OXouiUNjp4lSITb3TwGkcl2ujgFYqI2QVAiGLhdwEQj6IQ7gIgidof7AIggVvudgEQpjZHb8/HCkWg+PZ8LEfx2PX2fFyColN+ez7WOValt+djlSJnXxtnRtEKXhtnIYpQ/No4axSV6LVxVjgS/rVx5tR6+bsMpxGj1qtArVchar2qvvWqUetV4Narwq1XxbZeObW+/5H4U0+o5RlTuzOOWp013+asUIsz5vZmzq3N3LY1U9vSq76VH/TIvtV7ha0DFLzVe0WtAmrf6r0yrQFGb/VeQSuA2Ld6N2jzo/rbVxvTkf5oqyC7UFdBfyMrHdmN4gkFe8ETd9vAE7U7wBMKf+wqKbQtPDH7s1YJ2U3fG5Te/337Vg7lORAwCQIw+0QIBHwOBFie/gDTxzkA9ZVTgPmdU0DyOEeZvTfaEvOG8wbRZ5qgwfpLsMgKDcbnCsdA8YdgobT84qki/V1TZVEU5BHBsfTe5rnAkeTuxD70TIgeJW5Ya0/bBhFoS61t4+5tg+7lm3iUop6XG3ZkQS/zi9Mb5u+MN3Rpmr300VkGT3oTd493E7XPdBMKXwxPCj3iTSzojKV5mDvsPXTbhiF6KKA8HgHZn91VjsmpVJJQkSahMqkusL66QOT3dgWlp8zSHn20rMiml3LMLqWSXIo4t1TR1FImmaVIEkvQSOaBIRohIDt3DZ0NAndz1xBNEBDNXUNjgcDM3DVEA1SUR8ARkK3/ad+kZ15v5Ege9CmSB62AzAM/5W6Dx5CtDwrbDR5D43zA9DGpMDE+LaYPRIeVewo6rPyjz2FvfB/kFOJ7gGx3KsfuVCrdqYjyEhTtaGU5LwFJrwoSv9NORLvTzl7aI2t3w4LdDUO7G3q7GxbtbhjY3TCwu2Fod2t75Gu9drWrjUvW3iVr75J1wSXr0CVr75J14JJ14JK1c8nau2Tdu+SBtEdcElDwa5g1uSRQ+7uXdeCSoNAvXNbokoDsb1nWFX5RVlfu27G6cl+J1c4lgbsvv+rKfeNVV/5rrrry323VFX+hVVfuW6waXBIJfl9VV2aRWFd+kVhXfpFYO6M8Vu7WiDUbJZ7FrhHryq8R6ypYI9aV+xqprnCNWFdujVhXfo1YV2aNWFd+jVg7s0TBrxHryq8R68AvUeI1Yl35NWJd+TVi7T2zJs/U4CztkU/nZSF3l2HuLn3usmeCEmT1Msjqpc1qfEzfN889pmdOXhg/pmfRu6J7TM+c/dE/pmfBOqV7TE8cPNNtNmMeuWe02Ywl8tHSZjOW2VHdZjPm5K2Zj3xPs8sKJ6sVHuWsiD5xRaLsFc6JKgJnqwhxyrIbZ07jUrHx5YxxrAtjgxKBbVqFwKtF9IatUuDaIpJ1C2f/FsGZeFbYyTMHOxdEni6cjT0LbXA9Z/EihD4vamD2orHji1CwfdGd94vCE4AIPAtkgaeCzIP5IEvLABWGYDg9iFgeajxRCI9nC5FLI9HNGyLYkUjf5PUxib7JCySaRYrf5AW6n0uib/ICiWeU8Ju8QLPzSvRNnpdgdkFKEwxK0RyDup9mUKWZBqV4ssESPN+gRlMOSjTrgDQKs4TnHpRo+kEpGhao+5GBKg0OlHgAoMZjALXiMOA5CSSyB6OYmQkUtCDE7K6o8RRltGCWQt1PVEYN5irUabpCiWcs1NykBSLPWyDB1IWUZi+UeAIDrY0v76Yx1MKZDAsEkxnKPJ+hVpjSsIib1VDkiQ01nttA4+kNpGCGA3UZ0/JwD6c61HeOaZ7wUIrnPCyxY9S7mQ81M+qvO3Jd5a/srjF4h4L0D3RcYzgABX+K45qaD9T+0Y3roLmg0J/XuDbNA2b+kMZ4M+ikWZujB3sUfWE5lmWmRw8BCs8hW1M8eghQfI78183NWQQ+hDA809aStz/4f3M9zb/5v33B06hWakxaZKNGlFuACF+XAg7Jh1RtGHF+0QaQvEQBTF4tUHZb8R+825DuMtNmPk/PxgU2pgj84UtB9m9WCqbf/tmw2yq/Pn+bHVi01p+Z/Fa5/V2i28g+VRFjVKR/tTQj+gt0t9TV2+njoQ/HNjgPGA5A9hcKHtwkDNx9cf/A8QRsv89/MHMsMPod9wcT6Acf6IdCoB94PlNqw/9QDP+DnbSU2S558F1iRygGvfDOf6xSV+x65z8u4jtoxzv/cQnqttI7/7HMnenfvw/jxV286/37uIjv+ML797Eap0Pp/ftYpiQpvH+/VTeO9yLz8FP2YEDZgxGZM4KQf3lQUdsfbb/t3Rxt3gg/kCMN5OZobY9sZyTkwttilfurZASXyujVf3AdILqycH95Mx9BHQyHihj+WjjPusSpXlb0lYNJEaoGFCoG9DU8wzqmVCWUfIXyxAu1yQiqktGr/+A6QFQD4f7y9LYo1IIUqAwpr8WzrcsK1ZBlX1FZjUAVhUHlhL0Gn11HjKqigq9E/g1YqENGUIWMXv0H1wGi60d/5qmX0Ez6y2cEl8/o1X9wHSC6vHB3+byuKSxrrWy1hKbN7SLL2//3N4r4gepG2mbxePtH7yPNXDA45Sz+mGyRijR5DhJpdsnvS8zjeszt80yr5QuGWr7diFVTnajE82hcuKxugLI42gFmSmgKdtGV9f97IbII7hF/j0KYi/MvLBB2xcM9n6FIH+1js/37SseG2Bd5BMtfV7I42LcmGi79rGJ3qgmm3WfC6UUi4Wa/mVB5w9bgzW9zbd/azGToSO2J5K7F+MwvKS/QAdsLv/Sr7m26vOBSG5AdcC9uUQ3cvZn3wstnwPaFvRezUAamd5jCWnvk69wWKtiGFWx9TdzaVpWgjq19dfDFLF0FSX5vg9/NC5Xemacja/gJ2VfLEwoW9om7aSFRu4RPiJbkidF9fGLmN3wTsevxlUuoVYWPElaVe5SwMgkFKG5TE7YpeBaxMgmlKGgqP7JYmYRa+YRaFRJqFSbUyifUqphQqyChVj6hVj6hVj6hXk3wX33wX33wXwvBfw2D/xoH/9UH/zUI/msQ/LVLobVv2JqnKMJcPPgKxiv4oT/++/9jjgIE",TimesItalicCompressed="eJyNnV1320aWtf+KF6/mXcvpsWTJsnPnTtLdsdNx7ESGMb36gpZgmSNKcEhRCjNr/vsLgqhz9tlnFz03XsaziwDqVNWuDxSg/5l919/cdLd3s29n7/+5Wc+vukcnZ2fHZ49On5+dHs8ez/7W3979PL/phgS/LW669Tc/3s2Xi4udslkuUXnkyvxmsdyiNsCmW1x93l3nn93lYnMzkH36l7dXyyHdN0enfzkd2Ppviz+6y18WdxefZ9/erTbd49l3n+er+cVdt/q12/3+hz/uutvL7vJdfzO/ne7wr3/t/5h9+69vjp69ePzN8dHZ46MnR08eP3/+9N+PZ+dD4tVycdv90q8Xd4v+dnexJ09A+O3z4uL6tluvZ9+eDvx9t1qPyWZPnhz/5cmTJ8NFfu7vFhe77HzXf9mudjl59B8X/+/R0Yvnp493/56N/77Y/fviyfjv0/Hfs0cvL/uP3aNft+u77maI0e1Fv/rSr+Z33eVfHj16uVw+erc72/rRu27dre4Hug/mYv1o/uhuNb/sbuar60f9p0c/LW77u+2X7pt/dMOvXv790fz28j/71aPF8OP15uN6cbmYrxbd+i/D7f4wXOZycXv168XnbiyF8S5+vRt+Ml9dFnVI+N38yz+mgnl2+vTx7EM5Ojk5ejx7ub7YhXo1iM8H8fvOjscgz369u/xHM/v26fH43/fDf8+e7cvrn93danExBPRf/zNrPsy+Pd4F9ufhRtZf5kMc//fxHj99+nSPuz8ulvMb4yfHU/LfN/0QqY9LU06fTMrt5ubjrqCubrN22S+X85Xx5+UqX7rVxa6yF+Hs7PlemN8M0nqITr6z8Q7GEs/al/mqu112n2pS/Jnd3ny9O+P62pRnZ6fTr5abtVGL2cXQRuf5Ep+3Xz53tzn5kJVF7zk5LplcL+frz/lu/uxWfab9bZfh3YNIefd51Ym0n/rNStDFvUi7XvwhYHffibLtdExvF7eiWl30y/4243V3s4iSlcByZwOJdr9v5suMr1bd0JBFNn/fdOvRaoryolToud/7s6OjPXuZ0V8dPTvbo++82h4f79H3+Yc/ZPS3/MO/Z/SPHKYfvT2enOzRq3xfrz37p8/26Kfc9P6Zf/hzvok3+e5/yane5lTvchn8mu/rt3yu83yu9/num5zqQz59m9F/eVSH3mFEH4fO7Lq7C7ZhbfTjoMV2yr+LnnJS8jFfXywWF4vVxeYmh2KzM+310POIJjL6W7gZ96mMPuYqcSH8N6fqcl4/5R9eZfQ5/3CR0X/nK17nVMtc/iJawnSE7X0RrT4X2iqjdb4vEftNztB9bkIPOdUfGW3zTfzpqaxoh/rVUa08LbVyVUlPPdzJEdTGu8XyssuX3nf1l/2DiHPonb0nuBvHaV45jkr+P+0Ghuiz9put6js+LfvVQvB1VznLxWY1dOMXHsDjoxNoNuvFOHhNrb6MWnSzutosBuWmv9Mjh508nvgrcmVw8Wmh8i360WEoqIYDl/OrK9Wl7TkOxWjAsSu7btV52z899rHQ/Go1/wKmVn76cZhEdCKXHt6P8/WBCB9WKyGyAoj6c6uhy+Xiy3rhDXWYLnhW7z73mzBUTL1+qNtecKv5vfDf+cXmTo1cRiv/tOz+yBo1rIJv5hcrNdr5uOrUhS/7u/lFaHAuLYaCxACYssJm6Dc7TOmGEbcYom5ur+arzc1yvhGX6a+GUea1ON0c8+HFchNqrPGXPuY5PptqQL+6/DQM8sKo0IcnsYf10UfkL4p/vvELPD16Yhe4GVxus8QrmC/PRXd3uWvw67XovJaVkXkfuZ29F0PooW0O0+GhzotC+zGVp3fLsfp51x8rjXdLskT9dLHofGSU7sDG0JeL+8WlKKQ23pkPlkXL8NuOP/JRnviRd4/UBK2jHudd1EYgq/mUfr3QThynMPidU2Pw31RKaEM/8BlAuojPFwaDgAlInGBSRs+emTiteIhLkeX4mJDqgeUyxMVnAuoGvHnU6mh0VB/lq7P5NKp2tuiqEM7sk15DQjaBkyH60DVe/eRsusqy/7O7vRKXfxcv4TM4lUmvHAcbiRC9eXEvYiPZeCNQ1JRXn/vkyNllfvvcr0Su3tDVPQyVUvuVeLmry0rYzukCHrHYs4XFjfVmHOGsxP3GKuhRrPFoq2aCN5vl3eLLcivuizLolTwWR+n4hrHW3WK+vFx8+pTLaptt2JpgvI5X2EOV5YeD1exAr1OXLioFfVuzQa4x7ilzORr6kfoVXHobBgy4/mbTn1V/3d3iJMjMcdVdLdZx2OtNtDLw+lG0C5uJbIZWHeYiHmwaQFrDrESm56pu7bJSpf6LTPvkRRm4jqtccQ3McvnDnRihfFc1wKXyLW9uFZPpqr1jrRd8WRs+HKiVlQD/WWsatZt6UyuRWtdT89x17cr1Lv7NwWEJ21IZF3TLO7HYcxdM2gvpoT/giPUhzs1G5IT6cAuVHGd6W6DQ+yw1jnDOTtHHhwq8GiqyuLVf0wymKMtYI33VU/a/NsOIBffiebmN8kBHeWJ9PvZjZe74Y627/Im6vxKGIWif50tYeCttfDcziQ3ci+KQyd/GUZPXtK+UHw2DLAi17vkqeilmaCpVVah6EPqrHO5aBdYzHKtgg0uoxx09NS13Qn0Tm5j+5LRMsIdu80L57PeVsebq4Gj351g+fruV0e67w9VaXsustXLOl1WP1rOkN5WFwz8PjCd/qPX2dG1fHZZZsfFYGAj42Q42hXgLvrh78ErL/mpX3re9GMX3dS/dZKk05eFUlZZ8dXDO0N2Jhw5/Vqrv7cFufAh56iHc8mtt/IfN7kHkvx/PXner21/mi9Xu8fG/Zi93j6lnj795+uTfj6ejvXsEtL/PiCZPR/j33dGpHe1dJSDMGApvhqMTO8+bcguAoHIEbkUV6L79BxScJyhTyALbLw4FtG84iN6Go992OTqzI4sZoJh7E86Ho1M7z3nJPaCQe+CQe6Al94Ao96BY7oFN7Tqw0U6QvB+Ojp5YETbD4Qs7andJ/ciy5Ahv3SjsB8AAbYajY7vwppwNUAgQcLgK0BIgQBQgUCxAwCxAwKYAObkPWXsIR9t4lOOzzfGZEmF7NUSN1ji1XOfcfIsCbdgQNWTjsjUXFZq0IWrXxlXjNjG3cJOomRvXbd1kbvAmUKs3Tk2/8LcZgQkYIidwruygqOAJhsgYjCt3MDFbhEnkE8a1WZjMjmEC24YJ0TsKRgMpDFykoDa3APYT4/VGo5ylaGAvhshjjCujMTG7jUlkOca175jM5mMCO5AJ0YYKvs8RechoK1Al1MKfJptAfzJE/mSc/Mk5+1NRwJ8MkT8Zl/5UVPAnQ+RPxpU/mZj9ySTyJ+Pan0xmfzKB/Mk4+VPhbzMCfzJE/uRc+VNRwZ8MkT8ZV/5kYvYnk8ifjGt/Mpn9yQT2JxOiPxWM/lQY+FNBbW4B7E/G641G+VPRwJ8MkT8ZV/5kYvYnk8ifjGt/Mpn9yQT2JxOiPxV8nyPykNFWoEqohT9haNCkIieniiLZFYnsWUEG44qc3CuK0sJCEvCxyMnMoqgcLabIthZ18rYoaoOLadjlokpWF0XyuyC+rXBwvsjJ/khUHhiSgBFGTm4YRWWJMUX2xaiTOUZRO2RMwzYZVfbKqEbDDBq6ZhDAOgNvKy2UTTSKX2neyk5DAvDUyMlYo6jcNabIFht18tkoarONadhxo8q2G9XovUG7rwTyocK3NX6o1IQpO0FLRkqGjBLZcZDYjEEEK0ZKRoyStGFIACaMlCwYJWXAqGf7RZXMFyVtvZiCjRc1sl2UyHRBeispGC5SstsgKbOFBGC1SMloUVI2i3o2WVTJYlHSBosp2F5RY3NFLVorKGisgMFWgbayhbGlonSwaSo7BRnMFClZKUrKSFHPNooqmShK2kIxBRsoamyfqEXzBOVehuxB0q2m9XIRljnlHv3SEJmlcXJK52yTRQGPNEQGaVy6Y1HBGg2RLxpXpmhidkSTyA6Nay80mY3QBHJB42SBhb/NCMzPEDmfc2V7RQXPM0SGZ1y5nYnZ6kwinzOuTc5kdjgT2N5MiN5WMBpbYeBqBbW5BbCfGa83GuVkRQMbM0QeZlwZmInZvUwi6zKufctkNi0T2LFMiHZV8H2OyENGW4EqoRb+VO4VDcoZOZQLZFEgsEeZBCbljFzKBWlTJoNPOSOjckE5lavZqlwjr3JBm5Xr7FaukF25QH5lwlvBwLGckWWBoDzLZDAtZ+RaLijbcjX7lmtkXC5o53KdrcsV9i5XonkZR/cyCPZlrBUthA3MhQPNSlmYieBhzsjEXFAu5mq2MdfIx1zQRuY6O5krbGWuRC8zfi+C8yDYVrFa5IWhlRtDQ3NGhuYCGRoIbGgmgaE5I0NzQRqayWBozsjQXFCG5mo2NNfI0FzQhuY6G5orZGgukKGZ8FYwMDRnZGggKEMzGQzNGRmaC8rQXM2G5hoZmgva0FxnQ3OFDc2VaGjG0dAMgqEZa0ULYUNz4UCzUoZmIhiaMzI0F5ShuZoNzTUyNBe0obnOhuYKG5or0dCM34vgPAi2VawWeWFoq+n7JO5AhZCZFUxWZpiNbBLAxgohEytYWtgkgoEVQvZVsDKvomXrKgoZV8HatorKplU4WVbBZFgTfpsImFUhZFWGlVFNIthUIWRSBSuLKlo2qKKQPRWszamobE2FszEVHm1pomhKEwJLmkibajjbUcHVJqGsaJLAiAohGypYmVDRsgUVhQyoYG0/RWXzKZytp/BoPBO9T2F4SGSbiY6tsJupEaDfGCLDMU6O45wtpyjgOYbIdIxL1ykq2I4h8h3jynhMzM5jElmPce09JrP5mEDuY5zsp/C3GYEBGSIHcq4sqKjgQYbIhIwrFzIx25BJ5EPGtRGZzE5kAluRCdGLCkYzKgzcqKA2twD2I+P1RqMcqWhgSYbIk4wrUzIxu5JJZEvGtS+ZzMZkAjuTCdGaCr7PEXnIaCtQJdTZn/460Je7K/uRBdFR8RJAMaTOMZpOLZCOPEjOPD7OSmiclIbt6HyslHZUcgAo3C5wuF2g5XYBUZGDYhkBZhkBNmVkT76f4r733+8x7oCih3+f4g4cMgK0ZASQ3S4wu11g0+0CKXF39N689PvJBvyojUexF/me2v1EJ9PFyBii8BinGBlXgTIxR8skCplxjpsJHDwTYgQNUxgLf5/D0GTUCkShNS7iO77DGONbEMe3cI5v4TK+RRTxLRLHt/AU3yKk+BaB4lswx3fi73MYmoxagTi+haf4/m0K7dHRqR2aFwErIUUWDQoEdCjAZlHA3IkAuhUBLF4EqIQN2G6keeZHJSuASk4AhYwAh3wALdkAZLkAZpkANuUBSMmCo/0HLodMPTUUE3Q5U10Z+iHSmepkpuCF24BzXjuR107kdbGrYn5kFdJRHIw7xzrq1Ibgjnx47czuxFnvw7/x0LtaZ9TXuhA6W8fe2zpL3a1L0N86LJMAZFajnU1fMA0VYmWDofEoDp1GVCoEojAN2Auvpua/N4NX2PoBlSYDSMykXlHTBxrnT69CwwfmhedsajJA4iTp1dTon1p+5rFbeIWNHpDoDF5Rowcau4BXodEDI+N/BY0eSLT7V9Doj4108SiOcF9hm0eUR7ivqM0jhTYPOA58X4U2D4wGvq+mlgZH+Z77yg328gb7fCfcyEAR92hNDFAcib/CBuZoEwpnkyvUplJ7NrL2bHLt4fkYKKJebUS92oR69Xq2XwnZT33HoziLH5GYwI88zd1HGqftI5Iz9lGhyfrISvgBlfA76kIeuhjr11jREeXwv6aKjhQqOuBYKq9DRQdGsX89VfQTy0EfLfN1qujAkz++xooOSC4tvQ4VHVhcUHqNFd3RJh7lu95U7noj73qT75prNSjirjfk96+hVjvZxqN819t8d6Grw3ZBAjURUlVroSS54VACakOk6uZEibhlkUyNjFRqb1GFyk8CtUJSqUGyKtomJcnNlBPkFkspqPGSyu2YZG7SUe5rFYkbOqmq9VCSr1VVdgJSdfOiRNzSSCarIJVcI6qbqnAwMNJWKMnXAsNmQ+r/JTDJgkhmNyI5GlMUt1XhYGCyc/002y/tH/uRDfMAhZG8C7v1gv24fnfUhKM2pGzjsvOI0qLyjorl7J+mDD+1RJZLQNjE9xTfuT8mRJmsvHNPKmQX30cn1OYfcu7V++gkqTjga9iUR46Ieg17kmKVgOCQQCFiVQUqpoFwRaGpCW3tVBxAUnMYYwIVzNygZHw4sPUGNSWY7A4Da4hC6lwFs6gQxoKajNr8Qw6a8RyuIqlAFW2b88jBMZ7C8vNseoZyZkd2d47sGYqjOIFzjnlwahM4Rz5Nc+ZTSWflGYoTm7ntUWlSLwWivBinDBlXuTIxZ80kyp9xzqQJnFMTYnYNU57xYQMjynN62MBc5Vk9bGCJ8pwfNrDAeeaHDYw5z6GFv6wKnP+ochSiKmMRk4iIxAQcl6im6EQ5xSjKFKkoUrzKg9OXAlGMjFN0jKu4mJgjYhLFwjhHwQTOvwkx54Zjnt9M2d178BvMKaCSSUBxhuc8PXN+g7kC5HMzZ747wVnZmODEJmaGfrNR4BvsnBCFfsmFsUuyoyYcfQgp26D59gZHaUb7Bo12uttktMwp1tpoWcxRT0bLnOOfjZaFWBLJaIlDmaSxauKqdMJYNaImow/5h21OxcWmhq+TFF7nhgKMnEoxilSUUVTlGVPkQo06lWwUuXijymUc1VjQUaPSTh+eOBHR43I/9OEJleR9pVSaCv9QOU9bSc+1ov79hb0OL61CxUBK1QIlqhQoqSqBeq4QqFJ1QIkrA2pcFVCLFQEVqgb0MvxJihNXgfrL8DnBexn5RtIP8gytTMvFXntHfK+W1wChxA1RcRunsjauCtrEXMomUREb5/I1gQvXhFiyhqlY8R3fkxgGLtDKO76kvs/xbDL6kH/Y5lRcfPKV2L0U17iwCFmhkmSZCpRlVa6cJhcvp6BSZpkLm3Uuc9Zj0bNKNYBkqAisUH1IsqoWlOh9tcSaqvKhera2+huuOSznCmTvzEHVcUaVxgWqLi6oiuJqriKuUeVwgauFK1whXIlVwTlVgvDm7AlFhAu+9uYsy+9FdBvBPojftiIdF6p+wXSvldUdKE1DVJjGqSyNq6I0MZekSVSQxrkcTeBiNCGWomEqRFzNO4lh4CKsrOaR+j7Hs8noQ/5hm1Nx4akFvknCSfqUtTRJZ05lpyfpLOayS5N05lx2eZLOQiy7NEknDmWXXl1IXJUd7uuneDYZfcg/bHMqLju503+UfpmK7YUfld8CKoUFKJQTcLgC0FI6gKxggFmZAJuKA0gpCUe7zUbP/ajkAFDJAaCQA+CQA6AlB4AsB8AsB8CmHAApOXBE+yR3KCbocqbsyTUinalOZio8mAac89qJvHYir308yvfcV26wlzfY5zvhp8agiHu058OAcvB5U+LbGb7RMB7FNxpGJN5oGHl6o2Gk8Y2GEck3GkaF3mgYGb3RMLLwRsO7Gb4+Nh7F57UjEk+vR54e3o40PqcekXw4PSr0RHpk8fn8iOJD+XdTrOEo3/V55a7P5V2f57vmWIMi7vqcHp6/g1g7GV/Eel6OmnDUxiOrPY6wluxpWfiCMjREITGu4mJiDo5JFCHjOkwmc6xMoGI2TmVd+LlAlSzKojexnkWuBMYPZzFVBxO4TpgQKwYukVLBNhm1AlFlUeuhk1QeMkGNMUThNK7CaWIOp0kUTuM6nCZzOE2gGmOcakzh5wJVsihrjIn1LHKNMX44i6nGmMA1xoRYY/D9IyrYJqNWIKox6v2jIqWthOUm9FZCrcoAV7cS6gQc7INbCXWiFHi9lVCrXM+Cel4VDgZG17yY5GuBSbUwqv+XwOQaGeVUL6NMtTPtupFVqakJbVXgWlvddbNPMEy09hPMJ3YUZzkjsmmlI7HxdeRpLjTSuMV1RLRldWT00vbIwvvaI4n7VX+bmpzn502MwW+pcQGXAbFmBIiHla74sNKZvbfjyF7bMbSbmbw4tiObITqyGaKjOEN0jjNEpzZDdOQzRGc+Q3RWZohObIZo6KJfwirAnuxnXGcnhcRfdDmXNuFCFGqXc6xdQGHCBSexSufIK50zkfnP2y+fu9uQjUXIpr2rBoiWPnasD2ftc977SnH2sjj7XJw8cQNFFLRN3ADlUrWJm+d+FbK1yrmnl8n2SLxMthPW3c2i1JxnRjchzSZfYiMWsUae1q9GGpeuRsRb6V2h9ayRifLchFWsHXkIYdrGo5IHQLjLbk9xv9bkaGm/FnPyY71fi8XszGm/FnP26Lxfi4Xo1mm/FnHw7TTEZq4cXA2xWSIvrw2xWWZXT0Ns5uTvhYPJGyIfME52b1yZhInZKUwiuzDOzmACW6EJsTMwTN5ROHULjkPfULA4AfcSxqmrcC76CxNzp+FS7jlMo+7DOPchJtSix71J4YscIu5XjLMZFaHPl+NuxvihaiQ6HJMq1ajS9Zhcq2XcCRmv1Cbujgpf5Whwx2SceifnqosqquinirTJqbnHMq66LRNz32USdWDGdS9mMndlJtSqEHVqBT/kiG8Foj7OuOjo0ibd0hvoTbpa5a7vwCZdnUR0g3qTrlZTl1jZpKtl6h71Jl2pYlepVxW0KrvN6qqCTsBd6MFVBZ0odad6VUGr3LUGFTvYKLAPRpU726hKr4xJhGPGBOybUU32GOXUmUSZOuQospEGlTtnEmMXnV4FladM3bV+FbSiqq67+ipoJYHoxvWroPr3qUuvvAoqz52696AuaqFOXX1Uk1vHdzBrN5M6/6h+vVqrgUBMcLBa1wYFMdHhup8GCFE9WLvTYCGoq1o808Ahqjx8IFUOIkIaNZSIr47WfpmGFVGVg4uYRAwxYgIeaES1MtyIidKgI8qHKzMPQIL4UCvLbVXgIUn99b8xwfk0GtkvzZ7jEARQ/L7NeRpsAE+L0ec4rABEK8rnYQABLKwdn+NQwVFx7v0HSs5n6ZslZZEd85re0WBOudbvaLCY85/e0WDOkcjvaLAQY5Le0SBO0SmYQ5RehZhOo1+FkCJF7MCrEDJFjp1+FUKKHMXKqxBSjfHUr0IokSIbNA4vvU4wnU69TiAkCmz1dQKh56Cq1wmExAGVrxMILQZTvU6QJQokKBxG3KA/nSdt0GdO0dMb9FnMcUsb9JlzxPIGfRZirNIGfeIUpYI5RGIf/HSi2j74ikxxO7gPvpImR7G2D74ic0yr++AreoxwbR+8linepHLYw+7x6YR593gSKMiV3eNJzYHNu8eTwMEUu8eTEgOYd4+zQEEzzuGyv+cA4XJG4XKBwuWCCperOVyuUbhc4HC5wuFyJYbLOYXLBAqXcQ7X9DV6CFYhFKqCKVAFqzAVLQepKBSigjlAhXN4Co/BKZRCM2EKzEQpLO+nkDx7YkclHIBKKACFMACHEAAt2QdkWQdm2QY2ZRlIya6j3fLWUz8qOQAUPxnlPH23YqT26SdH/DU9V/xLUM7KHBSQfZLR0Li3+OjIDm0pDph/FdcZfRXXBVyKA+xfxXUGX8V1CF/FdWhfxXXkX8U1Fqen76H6HR2/KIh+04kM23JPYJUMhy/NAoX1HExtn5p15J+adaaiYKs0p5a/3dLMfo44HsVp44hinXOe5pAjtTrnyGuWM/8QrrE+3msvwtrXQtjrOtOLOpM+PwuSqk7++Vlgour4Tm+vKbji4RndxKMc8rigARwrilOrEI4oj6B4VXEmCqMsR+xJE+y1yfbaZHttKvbaSHttsr02wl4bYa9Nstcm22sz2eu+u2jQXgGJr642ZK9A41dXG2GvoNBXVxu0V0Dxq6vNDJf2m1laz29maRG/Sd4KPK1rNrO0Rt/M8sJ8M8ur8c2Ml+CbWVp3b5KpNmCqnib+osu5pAX0Jhkq8LRU3rCfQuK4KN7M8kp4M8vL3w266f6DU80MF7qbWVrdbmZ5SbuZ4Tp2M0uL102yPeCyOPtcnHpBupnlVehmlpaem1lab27Q7xzlBd5mhqu6zSwt5TbJ7oCnRdtmllZqG2F3oNCabDPLC7HNjFdfd2RcWTXr8OVUR2jGI21n+ES3RZcEFJ/dtsklgaentC26JCB6HtsGlwQWnry26JKOxmesp3ZkvbCj2Ak7xz7YqXXBjrgHdsU7YGfW/zqy7teQu0mbXbLNLtlWXLKVLtlml2yFS7bCJdvkkm12yTa5ZJtcsg0u2WaXbLNLthWXbKVLttol2+ySrXDJVrhkO0tPBtsZjjnbWRpzjkiMOUeexpwjjWPOEdGYs53lMWcbrLfN1ttWrLeV1ttm622r1tsK622z9bbZettsva203nayXk+zydnbVLK3kdnb5Oyx9YIisrcR9WMTGwc+oJlMKT2gYU6Wqh/QsJjNNT2gYc42mx/QsBANNz2gIQ7Wm17PY65MWL2exxLZce31PJbZmNPreczJoguf55JmszZOjm1c1VkTc8U1iWqvca6oJnBtNUFXWTZ1f+4W2iU/jqPU4gRs9MbJ7Z0fiJDwfZey+ZtGPYBx7gZMqEWPO4TCFwJR12Bc9Q8m5k7CJOopjHN3YQL3GUXoc7649zB+qDREP2JSpb5WehSTa9WZ+xbjlWrLvUzhoqsp0ian5k7H+KGoiO7HpEpUKh2RybWopC7JhNjI+StwTxKl3kl+BS5Lqo+qfQUuq9RT6a/AZY37K/UVuKxQrwUSdFxIqe9CSXVfqOceDFXqxFDS/Rim4K4MNerNUKIODaS5rCXcraFEPRtKqlmgnlsGqtQ4UOIGgBq3AdSqzYC7u/AYP9iDeMCff6PPxF0fStT7BelwFEUfGNTcDaJMPSFK3BmidiDI3CWCtNCUOkaUVN+Ieu4eUaUeEiXuJFHjfhK0XmaZe0uUvlJ6os9Etd4GKj0npjjQSrj/RKneFLgXBUl0pKBu5G+4O0XpK2ETnSqq9bBVulZMcSBsqYNFLZjL4Asz/+bMeGTPDR3FjaaTUDrtK4HoHMbliabEeCJDdCLj8kRhD9hVjdMpoyjPC9G70pTOiZI8Y9k+dCUQncu4PJFt8bhSjE7lgjyX7X+4UozO5YI817Rl4CoTOk/B8izlQ2dXAtF5jKsTfURTODHkf/L8IzZzQPHhlHN8OOXUHk45kn/Z/GNovsDo75l/hOa6Jxe7jssGRLuj66Bdx9xPgs0C/ZcFXedU+hz2TqGfo6DrnKpyjmEMsFzO6SwGr1VKfab9iGb/J0guPy7LXyE5OskyabgKcGTEd8aEugUo3oYL/gj6tKD7cPQQjrwe7Y78z6SMR3HzyYjSJpMyOONMoBufEKLsVNyYVM5Y4fcZPWQE+Sxom/PAOTaes83v8h5FDNk2RNk2LrOdXvqcMlT4fUYPGUG28d1FygNnW767OElqy/OR0DAAsruTog6F3EpdcorifYU/VDiGB/m2kuEUqCDmaIlJz1FSIFKqCxeSjJIab055Bule0gdJITpAtzJ7HBmURFx8cpUCAxJGBjGHBjUdG0iRggPavcYPGmN8AG91PlOEUMsh4n3eRxFDaNJAjbkMSdowPmWw8PuMHjKCEBS0zXngrBvP2U5bh4+IQ8bzuDIJMut5G/KUKxPuBXsQDLJvbCsywwFwIUcg7QY+Ig4RyKPhJMgI5J3FU85MuBfsQTCIgLGtyAxHwIUUgU8p7zsyNJdlt17vlkKeGfw0K+9C744Wdi/jEQ1eP+XsfqIx2X4KepWuvyNdPLJlTUe23RNQ/obryHFlEyhu9nQcP+06IvqA68joA65xtiNmOtVZzlUOVPkpx6XgTiCKkHEKk3MRKxNzwFzKUTONQmec42cCBzEvBVxVlgKuDi4FmMqB1W+dTz/Kb51rgUJdeeu8ooqw1986ryTIRVB561yrXBy1t86lfFUVqIBIlcVUeYd6X1jXoRCuc+Svc7ivKzG+loG91tG8ziG8FnG7FsHasT4e5XvuKzfYyxvs852k/dSuiHv03dSO7MmKoW08yne9zXdXazAs0MkONpikilh9rcGkBLmIDzYYVjmohxsMyX1VOBgWWUnqn0zQCQ5mq1KLap9M0DLVrconE6S6rQoHA5PrYRlC7kdbt7hSMSGcxRcUTgpCWUl01Afb67PX9TWD68vQbn+Ul8z7tEjDXJ42LMbsUWXxuz+0+N1/ffG7zxP+PZeL4r2aUQtJXomnzXual8r7ylJ5f3CpvA8zrT2it0qv6gpdiWV5QUoE1xWr9n1t1b4/vGrfx0nUnpU/7nIlEJ3duDx5UeHceU2+r6zJ9wfX5HtsZ3tU+v/aum7USRzZsvt0V/T9/8vrQviTmb/EGPEQyfmd1uIlxTlX+nf2gRellZ5PanHdO6dYmz9FXC6otHJBqZU1d62KeW1M8WV+0VVis/vJ0/yTu3hSkcLrxhDe/VuPp3YUt7qMyCqgI7HrZeRpt8tI4y6XEdHelZF5j++svO3oJG5f2aGLWXlzZTyySbqjUkKIrGAAlpnLPtqrqVJ7AqvLjuKVunzxLl88Dr+A4zICUBhoAbYNDo58Y4Mzi6qzq3hUyhcQ1SETbH/HsdWf3UjsxMrChl+A4hvaziG3QO3NbEf8QXdX/H1tZ/ZNe0f2QrYhnxV5Wf8esuojoRUaAKA4xF7F5o5QGHVxMGx+aR8xc2qIeh8xi7lJpn3EzLlx5n3ELMRmmvYRE4cGa4gajnFqPc65/aZHeFPBFn6Zk3Jzxp3LjCr3x61b71xmMbdzuXOZNWrxeecyC9z2cajMiFygMlQmlf0AdxWfxEJnZ9C7ilnMHpF2FTPXbpF3FbNAvpF2FRNPDlKE33OYwEsMkaEYJ1dxztbiivIX/GL11PzSF6uZk7/oL1azmP0lfbGaOftL/mI1C9Ff0heriYO/GKL2a5zar3P2l/SsfCr2wi9zUvYX/EY2o8r9sb/ob2SzmP1FfiObNfKX/I1sFthfcOMAI/KXysYBUtlf8EPZJ7HQ2V/0h7JZzP6SPpTNXPtL/lA2C+Qv6UPZxJO/FOH3HCbwF0PkL8bJX5yzv7gi/SWs9KDLRIG9JqrsOFGVvhOTCPeJCdiDopqcKMrJj6JMrhRF9qb4jATKMArsA1FlNyA1eZZ+MFMqVFAvaz9LLpbWp7VwMCfJ1w6sT+skwuPq69M6BftdZX1ay8n70gMdLbAPHnqgI9MkT0wL4yeqyiV/PLAwrpMIr9QL41qt+GZlYVzL7KF6YVyq2U+D/Hst3OitUWCHjSr7LKnJbUkXnjstBo2vbe03DBixW4nY7DVi8RV509BQoxK/G2+YvgVv3L0z8mKakcaPwhf8WyYWVsIxXkHc/UG2/R+tLWT3l9hOQkx3f4LtLKSxv71GGAK0V+7BWvcvjdxjddujh5ToISfaQqL9Bzy2mGhCPNElzMnF9r2s4I/+/b//H63X5Vs=",TimesRomanCompressed="eJyFnVtzG0mOhf+Kgk+7Ee5ZSdbN/aa+ebzuMdvupmjORD9QUlnmmmJpSMoSZ2L++9YNwMEBkn5xuL6TdUkkgLxUFvXv0Y/1/X212o6+H1397XEzv6sOTl6+Onx1cHry6uXJ6MXol3q1fTe/r5oCfyzuq813H+r7+aoVHpdLFA5UmN8vljuUGjitFnef27tIqTfb+XJxc7m6WzbFDpvjzS+L5+r2t8X25vPo++36sXox+vHzfD2/2Vbr36v21J+ft9XqtrrVGzWP9sMP9fPo+398d3R28eK746OLF0eHh4cvLl5d/PliNGkKr5eLVfVbvVlsF/Vq9P13jQzCH58XN19W1WYz+v604VfVetMVGx0eHv+luVBzk3f1dnHT1uTH+mG3bitx8F83/31w9Ori9EX773n376v231eH3b8vu3/PDy5v6+vq4PfdZlvdbw7erG7q9UO9nm+r278cHFwulwcf2qs1dqs21fprQ3szLjYH84Pten5b3c/XXw7qTwe/Llb1dvdQfffXqjnr8vXBfHX7P/X6YNGcvHm83ixuF/P1otr8pXncn5vb3C5Wd7/ffK66Buie4vdtc8p8fStqU/DH+cNfhzY5Ozt+MfooRyetJS43N62p14148fLF6KdKjxsjn78Y/b69/et09P3xRfffq+a/Fyd9e/2t2q4XN41B//Hv0fRjU6S93LvmQTYP88aO/3nR45cvX/a4er5Zzu+Vnxxe9Pyfj3VjqeulKqeHw4VWj/fXbUPdraJ2Wy+X87XyC7nLQ7W+ab1chPPz4Tbz+0baNNaJT9Y9QdfiUXuYr6vVsvpUkvxp+njzTXvFzRdTzk6Gs5aPG6Vqs5smOOfxFp93D5+rVSzeVGVRW02OpZKb5XzzOT7Nv6p1HWm9qiLcPiUlt5/XVVL2U/24Tujia1J2s3hOYPW1Stq2ym26WsADa5Vv6mW9SixR3S+8pC2wbNNAoNU/H+fLiO/WVRPIVs2TkxNxmmrTpRpRXh0fDW0P3nd83LNLRWdn5z36IaIf44k/Wamj4fo/21OenvXol3ji64j+Gh3sjaEmtXXof+OJb+ND/GqhJyf+LZ74LqJxfPrfYqn30Tgf4om/x+f6I15rEtGVtZq05zSW+hjRLN7x79Gq101n9qXaurShnnndaD5O+TyfU07OXklOuVksbhbrm0fLohocj23S3jQ9T5J5u/zmHka9eB6vdB1L3ST5N5ZK7vwpnngX0edopEVE/xdP/BJLWQhr5k+slSSdJO09RPTPWEfLDRpCm/hcST57jOhr9LinWCrJpLvYHP8ydHFo/uUd4VhbHTpTX556uJMj8MbtYnlb7Opv66fEzq53tp5g243TzDmOJOw/tQNDzLNW56zv+LSs14uEb6rCVW4e1003fmMGPJLad2GzWXQD1yT996MWZ01z8sdFo9zX23zk0Mrdhb8hk+kl7X1aJCwZPzUDuXQ4cDu/u6uSnrvnOBSjAUfbdtW6gtg/tbHQ/G49f4CkJqdeN9OHKqmlmfd6vtlj4f1qYfylDeD1bs7Q22a5XDxsFptEauq6/Vw/urFi6Padc1vLredfk3iY3zxuE9zn8k/L6jlqhci6n9+s6+TG1+squ/FtvZ3fuIgzadG0JBrAEhrGoT1sdduYNBujPq7u5uvH++X8MblNfdcMM78kl5tjPaBd7p3P6uDi0kY9x+eDz9fr20/NMM+NC22A4vtYG394rjcY2w1eHh3qDe6bPPe4dHeQzDRPRqO3bchvNkn3tSyMzevCc9bJILqJzmZC3Hh90mpvQoNax+z9zzp/7zXWMaVNapfzbWdjo/AEOoq+XXxdgDvbKf7JbLichIY9duGkSXKSdRYUg9pVdzMvChKoaryk3c8FiuFyQ8wpGuwc/3TWEnSCzQHCTWzG0GQImIL4KSZV9PxMxWHNI7kV5RwbFXo/sFrmdnmXPYCFR8lHfUq1cX52NZtIla7m0yqYMyZK8xBXTeCUEW3wSnc/H+6yrP9Vre6STPKhEFGvs0qac+wNkn2ee1nqRtaFJr3hutrsJ1pOxyR/fK7XSa3GdHczA0WBTvOIX0iyLZhtQjcwi/muzS1vbB67Mc46eV7vgmbFEqe0Kknw/nG5XTwsd8lz+QqCk/vmkI6vGW1tF/Pl7eJTMsHalVPDO38fc9jEWSw29rrZnl6nLN0U0t2qlAapQSGnzFM/fkMXwsW3ZsCAK3A6AVrXX6oVToM0Oa6ru8XGD3wtRAsjrzcxLs50LvLYRLWbjZixCyPIdcEyNceSxmXBpf7uLXZ68kpGrt06l18F01r+vLURiiXZYgJcZnnr5fHgvdtCkqmKvWNJuCwNH/Z4pTewzZZLoVG697jUIqWuh3Ou9iOlO5fjeLx3WMI9powLquU2We7ZuiRtOfGp3pMR40hPzrt/TGrin8hMlY4zLRbI9DZP9SOc81PM440DrxtHhkfTbiRMYaRtloWO5G06yNAZhm+4V7JuoK90spxYnpC9KYT+m1KI/0pPLWZojPZ5voSeQWK8nZnQMrc2xb6x88qPmszTvtF+hUioSt3znc+lWKGhVbNG9fnMeDbcVQfOZzjqYE2WyF541BRalgnn+XiDks2pZvPbxU2WZ38q9GfrvbV559vHHpdGuzbc3OvWe+91WfCFy2KOzmcDY38dy8NJv2kjkUJvX0oUX9Lxs47H3EDArrY3FPwj2PLu3jst67u2vVd1Moqvy7n0MUoSys2lCpF8t3fOUEFHbjYvuO8q7cbh9WHoISzll2L858f2VeSfL0Zvq/Xqt/li3b5A/sfosn1RPXrx3cnhny+Goz57ONQ/p0dDTkf42h/1WcUhrBgK4+bo9FSP5BEAgXM4rk3laB//DrnM45TBZI71i0MO9YGD6L07+qM5Ojo60kMxmmOu/qBM3KUm0QCTggEmqQEm0QCTogEmiQFk6OdYl1GQXLWVeKmH0+bwlbbprBUPVZxJnZDBwwOGfQHOSF+bw/MTOXpq73YsRzt/JDcDBPca6FAIA0ARRYFyCgXjHA+ivE4QRYbyNDxEhRhRRH6iPHMWFaPHqERuozz3HZXZgVSgMFJOsST8fUQYVco4tExI40vkSbw8R5ryfRZMYk6lggUL0adyyYIhDlXwwSgYI1IYhKUgjE1lHKAqJFEqWhqqIkK8CoKgFbRLEIWv8hjDQyhhDCuiGFZOMWycY1iU1wmiGFaexrCoEMOKyAOVZx6oYvRAlcgDleceqDJ7oAoUw8ophoW/jwhjWBnHsAlpDIs8iZfnGFa+z4JJDKtUsGAhhlUuWTDEsAo+hgVjDAuDGBaEMayMY1iFJIZFS2NYRIhhQRDDgnYJohhWHmMY2wkD2XOKZi9SSJPIce3k1yVOEe7FNMxdEYh1z8ldvZj5rC8RHdfr5L1ezF3Yl2E/9iqlAy9STnDi+wLH7OAFThGkpnnClZkUbskZw4vfbIIkd3h9XxMUsogvs7cJQj7xqk8qTsPM4gRIL45jjvECJxqvJtnGFUhTjisBecdxSD6O70qc0pAXYy4ygpkIKeUhlCgLOYlzEIivc0r5B6U0+0AByD1Iye1Rypwe9ejyqJLDo5S7O5ZgZ0eNsg1KlGtAep9SzDOIOcs4Lc0xUGKS3orzC0rfMHSSW1AtG7qQV7DEHkOHnIKazyigYD4BDNkEKOYSxJxJUEvyCMhpFgEdcghQyCBAdzml7IFSzB1D42DiUERZQzmlDOOcL0R5nSDKFMrTNCEq5AhF5LfKM6dVMXqsSuSuynNfVZkdVQVKB8opFwh/HxFmAWWcAkxI41/kSbw8R77yfRZMYl6lggUL0a5yyYIhzlXwQS4YI1wYhLcgjG1lHNgqJFEtWhrSIkI8C4JgFrRLEIWx8hjDYjgMYmMUxSZQGIPAcazS64xRJJuQhrLKEMvGyBVNyHzR1OiMppE3mpC7o+nsj6ZQSJtAMa3C+4RhVBvksAYljWvVJ8ktOLJN2GvOJLZNK5mzEN2mF80Z4tsUH+DKMcIVQogrwxg3yEFuShLlKqZhrirEuTIIdGW7jFGomxBjXWyFsW6MYt0EinUQONZVep0xinUT0lhXGWLdGDmnCZlzmhqd0zRyThNy5zSdndMUinUTKNZVeJ8wjHWDHOugpLGu+iS5Bce6CXvNmcS6aSVzFmLd9KI5Q6yb4mNdOca6Qoh1ZRjrBjnWTUliXcU01lWFWFfWxvopheguY9pMLGBD9Np6+CjbAkoIxblginLFHOOD8DoSim/BaXQPIsS2EHJFwZkjihbdUBRyQsG5C4rKDiicolkwxfKA3weCcSyIo1h5GsODOgmX5vgVvMdoSeyKkhutELeiFowWYla4j9iBYrwOCKJ1IBirgjhShSdxOkhplA4axOhAoDceyC4S6okFx3548BgMTkUUncopPI1zfIryOkEUocrTEBUVYlQR+ZvyzOFUjB6nErmc8tznVGanU4FCVTnFqvD3EWG0KuNwNSGNV5En8fIcscr3WTCJWZUKFixErcolC4a4VcEHrmCMXGEQuoIwdpVx8KqQRK9oafiKCPErCAJY0C5BFMLKQwz/0NDL5qivcnck5wKSeAPk2hc43AGotCogbTFg2ljAhnYCIs5vaNJZVo+sIRS5xwXumkapPC4g8j9QtCLAtCLAhor05KfB7id25DPmT2h3QK4iwKEiQKUigPRxgenjAhseF4jY3dCVO2rj5KUezTS4fsLgABSywLCb11lGEZlHOdlIeWYoFaO1VCKTKWe7qcDGU8FbUDGZUfhVRGBQQbNoLDat8sS+3XcA3r6C2L7C2b7CU/uKmNhXJLav8GBfEYJ9RSD7Cmb7DvwqIrTvgGbRWMG+woN9fxlM2+fsX9CqgMSggJwtgcMdgIoFAanxgKndgA0mAyLWMtSOwY60PnNNpoakBoB8fjWO+dWo5ldDlkWNWRY1JlnUiNTAUP/jUC++uzgUUju9jnWqCxWo0wrUsQI1dxCmJFWrZWAHKNZj+NUqqcj/Du51ZkdSEUDSOIBc3YBD3YBK3QBpDYBp4wAbGgeIVKpHb0f9MPylHelow5AfWhjHoYVRHVoYoqYAxQYdxqQpAOkIQ1F7dHyqR/LUgGRMjQgrAhwqglQ/5HBY6gdIawFMm8NYrWOkt+j0gJJB3FtyeqB+EPc2cXpQaHj3Fp0ekB/LtehRQ6A78qHaoSRUOx5CtaM+VDuUhmqnUKh2jLJQx1wWasnOWX4X/WMXG91NtjAuSKAQITWLFioSA4cKUAyRmocTFeLIIpmCjFSKN69WJYtxFJJKAclqEptU5FstlkUslaDgJZXjmGQOaS9DdJNAgU5qFvNUJIY/FaBMQGqeFKgQ5weSKVWQSlnDq5BASKBcQmqWVqhIzDBUgJINqXneoUKcgkjmbESyT0xe3JVcidMVqSEOfh3160r9EkJ3JMGGyK0lmdAtsRweyuFUB5+/jmRhRUVYUzHm5uyK3UqK3a17/6BPvfNj+V+pegPFb1iGK4VPWALPauu+7hgeFb/uGOrtv+7wxYIF8q87vJbZAj/boHqyVbLPNgZJJpfZHUTbxeJ8B+XJHZzzQROQQA3BatYcvgw2ilegabwwK54SmonkpLF8idSgIXxTGwXjFsN3KDAkVzSuIjKr8cygoqIphYERBc2SYsFwKiQmEy0zlmi7WE82kPJgmncjXA7tjnxv2iG/HNqhpFfteOhKO+r7zw5Rf9gxWg7tmFsO7YjvDN9J8F4miOqinCqkPKuVirFqKlH9lHMlVeCaquCrq5jqjOuGjKjOYd2QeVbnbN2QJapzXDdkgevM64aMuc4uyi+LAtffq2wFr6a28EUSi/gCbBevBut4OdjIy2QpL5K95B3IZYLIRsrJOsozu6gYLaIS2UI5W0EFrr8KvuaKfZ3HrrrjWNNxrOS4UL9xWrVxrNU4qdA4qcs4VGOc16DtpfqF2zF2UIiS177joVs61aOpu+pHV3LmStqKryHsKnoaE+24kGjHhUQ73pdox+VEOy4k2nEp0Y5LiXacJ9pxIdEqhzYJI+PAs9bBkTHZcxpv9zGeOIsncrNlI+VBcl8TQQN6Tq3oRWpKL2bt6UvERvU6tawXuXm9ym3sVd/QXqPWDp/7nSTW43bf97FfVuSq0CrTwnN8LFxnVrgOe0Xxg7dBh09FwDGQklugRE6BUuYSqEeHQJXcASV2BtTYFVDzjoAKuQF9i3US7MQuUP4SKxa4Si0/Te/+Mb3CLL0CN3vh66RBlQ8LoMUVUXMrp7ZWnjW0irGVVaImVs7tqwI3rgq+ZRVTs+KXNSfeDNyghe9qSL2K9pzG232MJ87iidx82Tcog+RX1bAJWaGWZJkalOWsXblMbF4uQa3MMjc269zmrPumZ5U8gGRwBFbIH4KcuQUVuiq22LT4RB+LV5sVr8aew3J0IP3UAFzHGDmNCeQuJmSOYmp0EdPIOUxgtzCFHcIU7wrGyQnctzgnZBFu+NKXOCxfJdadJvf8mJw7S87lRk2/Vhk0Wd2B1lREjamc2lJ51pQqxpZUiRpSObejCtyMKvhWVEyNiCt6J94M3ISFFT1Sr6I9p/F2H+OJs3giN162wjdIcZI+LkzSx4VJ+njfJH1cnqSPC5P0cWmSPi5N0sf5JH1cmqTjTt0TbwZuu8I+XVKvoj2n8XYf44mzeCK3XbantZd+G5qtX479DVsMkDQWINdOwMNe1d+wdQBpwwDTNgE2NAcQaQlDtvmpO/JvDDvkNz91KHlz2PHwurCj/h1hh+idX8foRV/H3Nu9jvhNQy2SzU/DZuIW6T6igb0f4ZbZ7shvme1QsmW242HLbEf9ltkOpVtmO4W2zHaMtsx2zG2Z/TDqN0mc2JHfs9ihZFtix8OOxI76zYgdoqcGhXYodkzeUwPy+w8/DJF9ZkcS1IhcPJswcdeZxPpOCvWdpPWdxPpyK4GS1HdCmzE/QCsZaRPQhR61uad/u/JhyDFndqQb2AzhrrSeykIOtL4iMonyzC4qRuOoRBZSnptJZbaVCuQgyslLcGHtjBD5S2FhjdRJvDa7j/J9tkocSaWCrQoupXLJVsG5VPAehmuHFx6Br+FCIfkRe122UDhI8vYFXE8RmVN5Zk4VozlVInMqz82pMptTBXI95eR6wsH1FJHrGc9cT9RJvDa7nvJ9tkpcT6WCrQqup3LJVsH1VPCuh5v1LzwC18PN+uRH7HrZZn2RwvZAeYh8e2CupgYubg/MC7Cx924PzAsFw+fbA3OVHTbsEDlLBXbefTtE0jKT0j2DO3v12zbPXNsX2Gvzkpv7QvttHl3ey+T4YevMRSZgEISdM6lfh4Ao7pvpC/wxGqYZL/VIpxmGdJphyE8zjOM0w6hOMwzZNMOYTTOMyTTDiE4zFLXRfHShRzr6NuRH38Zx9G1UR9+GePRtio2+jen3CIZ0aqHIvqnojuSpAYndAbmKAA8R0FHv9h0iN+6Y2h0uONgdiM8bLer/wrVMWXvST5f6rUotac84V103GQOSxILIfcFjPGy97ilsHIbC+mGPIdpW3TH7sEfZ8HfPZSbbosVIpvzdkV896RCtW7SsdgasYwvXhebEPcNApUaAyC9B0boCE78EJK1qSOe31ohrV611rP1aGhGR6xJMsL+NLtmtpe0+4xM70i7BkO8HjKPrG1XXN8Rp3hQLCmOW0I1JFlfy5Cy380exvXexXXGz1ZDRwmYr5pSP881WLMbMHDZbMeccHTdbseCzddhsRRzydpgGMM8yeDYNYIlyeWkawDJn9TANYE75Xfg8tjRneuWU7pVnSULFmPhVouyvnLsAFbgfUMF3BoqpRxBO3YJh1zcIhhStiHoJ5dRVGI9f7ZgYOw2TYs+hGnUfyrkPUYE7EhG4NxEOXYoiyqzKuXMRoY6twt2M8n1ulHQ4KlGvozzvelTm/kcF6oSUU08knLsj4etoDe6YlFPvZDzrokRN+imRoLNSRD2W8qzbUjH2XSpRB6Y878VU5q5MBe7PVPCdmuCn2BK7BBWcLevowg5b6Q3yHba5yl3fnh22eZGkG8x32OZq6BILO2xzmbrHfIdtqmJXmS9Y5GrabRYXLPIC3IXuXbDIC4XuNF+wyFXuWp06L3lY6Ga9yp2tV9Nc6YskHa8vwN2vV0Mn7OXQFXuZOmQvcrfsVO6cSfRdtP+CEro2L3B37VXutEnNum5fJOnAqUDSjfsS/pNcVu33HlI5dOxODt27U7GT9wL3VV4NHb7/ZLPU9qHz9+q33TobCPgCPBzwamFQ4AuFoYGXeYDgVR4mODUMFpy6LtkzDBy8ysMHUtNBhCuTDSVcARxQeIGHFV5NBxe+SDLE8AV4oOHVwnDDFwqDDi+HoYeXaQDixKdSS++Kwt4QiAOTyTAaObEjvx49wXEHoGRdekIjDKC+N5i4sQQwWkaewKgBiM/wsn6O1QjfTjCnCuXfTrAYqxa+nWDOlYzfTrDgqxu+nRh4+OYg5VT7/JuDVMzsUPzmINXJIoVvDlKVbZN+c5BqZCXafp9QslC2/T6RMusUtt8nKlkm3X6faGyVZPt9opBFcG86I7JF2JvOPLNCtjedJap/3JvOAtec96Yzpjone7oLClmgtKe7IGf22LOnu1CCrFPc013Q2VaFPd0FlSznNjMHRtaKm5mDkFko3cwcNLJKspk5KGyJsJk5cKq9/pL0Zcao9iZQ7U3Iam9qrL1pVHsTuPamcO1N8bU3TrUffqn3MhKquWCqt+Cs1qLFOotCNRbM9RXOtRXu6yrU1/RqqOXwS61XWEVkulcTmF9fAAFXFQDrWgIwWxwAaBsYAcoORkC6OGCs/Y3jIzvyW0w75IfsJoydTWgvSIeSxux4aMiO+kbsULrXoFOoaTvmd3J0KLYd7E/tDrXtgKkRgPm3rMbxdxKN6nq4IZs3G7N2gztJuwHSX0pUJBOkfurWk2Hz7fErQVSHKqmrLTgAyqtapVV16wl44WiCKjFBlZlAVwmGH99oWbs2cGZHunXDkP9ZLeP4G0JG9eexDNlvYhmjnxpsWe2NbL/oCMxHOgg4ozKqywSGeKUQrmErAsZ0URDK6eRfke3GtmI43TZvaufY5xrqOrEG5L3EOHqJUfUGQ1RDUMxPjNm6kjH5SdGOTCUx9603dYkZmAY3MGouEzAxA9bEDMwSM0DzboAS4IA0MRvrFrHtyO+Sn4b0Cjzskp9iegWU7pKfuvQKTF3MkD62Ilthno7CsvJ0FNaSpyG3Ag/LD1PMrYBojWw6iovC0xGvBE8xsxqSWHh5bqTPrP2a5XRIrHZGFWupaRVRXssq9IZTTqtQ2HeSU5dVgSWV16R6puGycCctfA8+denPWO2uWse6ZwunU859RmNz5uui01FcDJ2OwgrodBSWPaeY+awRMfFZY7eJ71RP08QHyP95AePhs6QpJj5A/PcETLE/JWDM/oqAMfkDAkraBb7zl3qk6doQpuWOzny+nCX5cpbky1kpX87yfDlL8uUsy5ezLF/OYr6cJflyNsIfMZ1hvgSUvD2ZUb4E6t+CzJJ8CQrtc5hhvgTkf2x0NuTLYZQzw4SJTFsAGOV+E3DXqlH/w8ozlzOBwYdQBvVLKEP+p5VnkDX78JqNwnh0NqRNuEyVVFYTp2OFylZpZf2IFEpHI1SJEarMCDYi7UepsyF79u8nZpg9AdEfAJkN2fPoSK9rg0dgvrogYAwb9XtvZkkCxWvQ67sZZlAsp1MORTx4nFEOtaZ/9IZ6pHnHLGRRFMIsY4ZpFFCopEk00Zi5PIoF/VxrpuvnkFrCy4EgcIbMXw8ENcmV4QVBEELWjK8IgkL5M7wkYAEyafjWjXmWU7Nv3Vii7Fr61o1lzrPhWzfmlHGFY9pVxulIBU7AKqSJSdWYnVSiVKSc85EKISmpQulZOeVo4RSthn22Fp5VO+RtFTh5m7DPUEkaNynJ5SoWrBiyugpFK4b8LgIkeUWU6ZVzuhcBc74yTvwqpNlf1dgFqET9gPJCZ6A69wgqcLegAvUNwkMHIULSS4j0mNg89BcqpJ2GqrHnUIm6D+WFPkR17khUCL2JKtSl0EtFybXZW8VM476l+F4xK5D0MNmbxUwL/Uz6bjETqbfJ3i4mGvQ5SKnbQSnreVCPnQ+q1P+glHdBWIJ7IdSoI0KJ+iKQsDtCzIkWNe6UUEvTLRaIGRdVyqsocWpFLWRXFKmbQslWkYJGWcMpvsMCqXCt0G2hxj2X075hzaT/cmrShaFetnboyFDbZ+3QnYEGPRpS6tRQ4n4NNOzaEHPvhlrawWGB2MehSt0cSoWeDotwZ4ca93eoUZcHUuj1QEs6PlAf8wYK3R9qaQ+IBWIniCr1gygVukIswr0haqFDRNH3iU3Ydn9fsu8F2qN241r/YlFSHhYQBKWG5IelBEEpt9sHijoO5eGRoTRQKCvbR6CgICiluwWgmDIo5/629VDO/W3roRz8dd2hFPx13aEM/gnPoRD+Cc++1DV6br+4ez245LEdiScCSt6yXZPfAfVv2a4TPwOF3r9dO7cCNniTka9arZtRvxYKRxpNhnBc1FNxsV2C6ALK41Xw2w9GdJXs2w+R5M8Ru+sY5CuZEq/Vd5L9Hy24vV7K3y3os5hTvdRW0H7uqTvyOwM6lO0MUM/Toyd39OxK7vyRr1puZenG8fkU0UMqT5/UpRqPniJ6jifuEkRVKHuLDDmwHoqoHsrTeogK9cAPkwg9xxN3CaJ6lP3VDY9cZRznGjkxr1bI3gl/KvDnwnV2Jc71dWKsNHQKdzmlCqOUVpc7n0CfUvqcXmGXU6okSkkVbdzq6oiYK4laXksogdUE/JTj5/wiuwLmqqIW6ypd912CqI7K0/q5YYFHTxE9xxN3CaK6KI/10LHFXcaoJiakVfFjF2JPCXtOzt1ljOpjQqyQDoLuMkYVMiGtkB9kEXtK2HNy7i5jVCETQoU+jWS2r0d+Z0eHbG6vKNns0fGw2aOjfrNHh2hLR8fohw875n74sCN+l0eLmmhaVptNN5VU+Ekt2B4tdITWHfmR5CcadfQTy7vBNnagk1IlYhkj/nW8Ynwbr1BfxiuxN+6KbLqrSN63KxCT9ESmHvNIfA0U+2ooTuqiWqiQKr5Wiqlqyql+yl0llfqaxs9JU+5rXfiYNBUTC5Q/JU11b43Sh6SpSpbJPyNNNWcl/VNgeuDsEf78VwsXLi0t4tB0URgOLdJxwyL2Q4skny+SlNgeWbR3Rz5DdcjWywzFDNXxkKF66lbFFPvE1SFKXB2jxNWy2h/FZ64LD1inD1jHJwnrS6Ykz1j7/XId8pnUdydJR5J3IV/il8bD9QpfGucqteC+L43zItFse740zkuQjUtfGucy+0D86jcX9poldZLyV795gb3VKnhR6avfXCbfKnz1m6q7kiOx85W/Be0LLIdRU3+XpVul61H8OnUQ5GfYDUleOtEje85kzJiPFleYNocrxbn6qjBXX5Xn6iucYg8XjpPnVWHyvCpPnlfeRHj5QqOxwLf6RqOtcHVwuJWgXSzFl1ceLlyPcB2udiPqWi5+qEc+CGu+ZE+xOYfrxgWa2rWwP5Fvk7ZwL4XudbhhYbWhjqsKyXX4/uVVhV6nvnx4hHQNoObZfrgC37w02+9VHDAM940T19rNUv2JfLt0ltpL9B0h3JIUuDMpu+LV+DlYjo/jBkbDgyQT3dpPaulcvm0+qe01SX9wP8yIxx7t4ol8s+yvyg4SxvtwL3wbcOzRLp7I90pTQCc9uAs8xHMf8tOG1xCFVWove03OWFaf5Fvdi1SQ58hV/0kCq8l2di4CdcoL+E3urNKudpZpMz/L7qMGFv1O+E7NjbXHUnvM9C0b7TfQHuvsM80+u5SN8m2LwP+HL6HQ5Ubtm7LTw4ibB5xvc22pTu6xDwuv0dJVUsIP/pzmYyTWYZ0/p/6kS6bJRCHV3MMmJboJ7mnEfruB1/SGmSZvu3LVP05S4mF+U+Wm6ax9ETG1RyzxVWveWFf3pZwoudPTuiNd2zOU3aIVdBvHsV5M39n2lZOG49u6d2QXHtEDlN6ReZUfJez5G56Hf79yeB73ruvCI3qe0rsur/LzhB9AlOdJf7JLnsqJ+Gxe4Cf0av6c+c9eHWc3pmcefLRL0ER81CjWFTWP/Vqa13D9ySu6fuaxrZx5TpuDlMtqmae6TubwH2o3Jbo6QTixtYj2t6eEdH96ypH2t+BfeSI2JQwG6pUmzLsFz37E1B3porYhaQpAfseEcdwxYVR3TBiyfRHGbF+EMdkXYUTMbUgi4EyJze66Iz/h65C2BaD4Z6c6HqaFPcWFIMP+r1F1iP4aVcfor1G1rNZQ6o78y4UOJdtUOh62qXTUb1PpULpNpVNom0rHpEsGpLZXpHHeG/9phK+CntChAPlXQU/BoYCHkfUTOhQgWlx6cg4FzL0KekKHMuQd6mmEK29Po7Dc9hQaB3hagTpWIF9CexrFdbOnUVgsexqFFbKn2DjPLjKeY2Q8x8h4LkTGcxoZz3lkPMfIeE4i4zmJjF1ojl2s2I5HDIS5eLLlNip40p//+X+DG1I7",SymbolCompressed="eJx9WFlv2zgQ/iuGnnYBt5DkS85bmk13g27SoEkPbNEHWqIlIhSpklSuov99R7JIkSLtFyGZjxzN8c0h/4oueF1jpqKz6Mt1K1GJZ4s4S+PZYrvdbqJ59J4zdYNqDAfuXuodp52spdSToZrQl6n0KyZl1Sm/xgVpa5BcKURJfs5KCgdj+F++J8+4uCUqr6IzJVo8jy4qJFCusLjD3d27BucE0cGYd+/4c3T2/U2SxfM36XYxT+JtDI8k/jGPPrMCC0oYvuWSKMJZdPYmiWMLuK9I/sCwlNHZCuRfsJD9sSiOk7dxnMFbbrgieefGBW9eROfA7I/8z1myzVbz7rnpn9vuCW/unpvZecF3eHb3IhWu5eyK5Vw0XCCFi7ezc0pnvRo5E1hi8QhCeM0lHCoIK+/yCvdR67zrfd2THPA7VfzzNTrbpv2fX+BPeH8fm2usBMnBg++/oq/forO08+QGNMgGgeG/5wfxYrE4iPFzTlFt5JtkkLeMPIL/EFoNreJBE2vrXReako3YcqvVEXCTKWJdzPS7Gizyjk/mZZvsAKC66d7FCgMtF4NC2eaVqpDyLW+QwIzi/TGoD6tvPQL7BJEPNVKVb39DW2mkJnY5FALyD9eEhU6DL4SPrqTaS0mRrHyDXrHgvpQz7AvVU+CkqgQOnN3zVgSkkFVfKslzQIgfMfPFOBxWRiyDjcs5p5wFIoFr4kImprQrP59WP1ubiVpcCgxlNLq5XC4PwM8Wy77EvSs5ZyU0EpuFaXqAzmlTjVlerzcH8TuskH/4oiLj0WQQ/oWpdXadJAfxZSOJ7exmPfD01lYSD8K/kU0288JLS7Mh+hW337dINCPA5MRX8QE1jXU8Wx/E/6J6V4zyLBtCdd36Km4Cso+QTOG4N6T5dvRusxxsu6/scK5Wgw2fKovZ20HxHSnrQDjv0WjEejvw7/MkxmMD6ZQkvnEfa1xayperg/ibZfN2kN1K4lvxHw4lZAfD6QErpy1lOt2QF4H3XATa8HDP7VnrVWY6SoNZQfKWokBRt90Ak7mt2GACwTVE8bNPE+Tw3VTIzkmQqRuLqsvtUGaFw3cTcjzJxSod3tjYSnQgS4fvpgyc8KaDZuLwXR8FtYlv8YPD9rHBuGxfbQYG1q1vL2v9+3zC9nF0EF+BqoLBFBbbjRfSYbsJprLYboxtpx1Fj23esXoMhqlx7rB9uR2OPxP/aCMDmX61/Vhm8cha7HA91bzbWUR1z0/m8tLUKSyJ1qWNHqeXrTUf16lb76Or6XIzTmWFA4mHyeLOkUS3+H23UpJQPAnbE0bUS2CSUi6IdWM13Mhpu/OlBUE1t/YbA1QYCeWLYVsrRh+SeDm0RCQEf9pxa3Xpds4RcpJhqNVDbXPkzqTpOJcK/mT1VO17gUtn57C3J3cpMlUucW77Px3hRwZ83VJFGvriJ6YRHJboLmnWPUNXWAC7FbQg+/0IrjUL4RMFBxhYkEdSBLxiXB0xD8TkEZorywPXoP0I/jxhXGzWKEoJUFgeiTvs3srq2eO9Hq2Aeq92S9eDIgeYwIeawKoVY+KyVOumuBmpY0r+CgrgQVn7ohl9n6aIoc4TJjB0lEDWvmaGa05ETrGfPRd3lm1jI64b9SKtBJlbhAFTgEhuqWoUvlhCFdwRBW613cNWqnGYyDAdj+OQfdnugpBWHUa14jAKbbN2tlDrfR6mXUT9p7F3peyGvHNBb0UCl933GHgmyN6Hc/0R6+KZxiG7Ba6ReJjg6RiAos0DpTRsHWNz1s284Mr58DI+UF52N8B7vyIGzP4+nGJcWLXiNMtiR0/0S0BPtExAj3ZNwE42zh11e6duTZS/YlZaK6DebfrkOsb4aURMnsqiA+viHpPowDrwsoX1y6moRTZ20cMXtmpOgFYf8sGd8kFrRw4ptuCQagu2lJvwmpXEUu2DNSlOoEf12vY4aXOZkG6WY8OC4hzrwHRcjVhWepjd4KdYKK7jrx5H89WjRxPWoycydlS3jZ/I2VS/G9yp9gB6PG1T1aY4YAp3LfPHPPqABbtFRHS/jf34/T82FAfb",ZapfDingbatsCompressed="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var compressedJsonForFontName={Courier:CourierCompressed,"Courier-Bold":CourierBoldCompressed,"Courier-Oblique":CourierObliqueCompressed,"Courier-BoldOblique":CourierBoldObliqueCompressed,Helvetica:HelveticaCompressed,"Helvetica-Bold":HelveticaBoldCompressed,"Helvetica-Oblique":HelveticaObliqueCompressed,"Helvetica-BoldOblique":HelveticaBoldObliqueCompressed,"Times-Roman":TimesRomanCompressed,"Times-Bold":TimesBoldCompressed,"Times-Italic":TimesItalicCompressed,"Times-BoldItalic":TimesBoldItalicCompressed,Symbol:SymbolCompressed,ZapfDingbats:ZapfDingbatsCompressed},FontNames;(function(it){it.Courier="Courier",it.CourierBold="Courier-Bold",it.CourierOblique="Courier-Oblique",it.CourierBoldOblique="Courier-BoldOblique",it.Helvetica="Helvetica",it.HelveticaBold="Helvetica-Bold",it.HelveticaOblique="Helvetica-Oblique",it.HelveticaBoldOblique="Helvetica-BoldOblique",it.TimesRoman="Times-Roman",it.TimesRomanBold="Times-Bold",it.TimesRomanItalic="Times-Italic",it.TimesRomanBoldItalic="Times-BoldItalic",it.Symbol="Symbol",it.ZapfDingbats="ZapfDingbats"})(FontNames||(FontNames={}));var fontCache={},Font=function(){function it(){var g=this;this.getWidthOfGlyph=function(et){return g.CharWidths[et]},this.getXAxisKerningForPair=function(et,ot){return(g.KernPairXAmounts[et]||{})[ot]}}return it.load=function(g){var et=fontCache[g];if(et)return et;var ot=decompressJson(compressedJsonForFontName[g]),ut=Object.assign(new it,JSON.parse(ot));return ut.CharWidths=ut.CharMetrics.reduce(function(ct,dt){return ct[dt.N]=dt.WX,ct},{}),ut.KernPairXAmounts=ut.KernPairs.reduce(function(ct,dt){var ft=dt[0],St=dt[1],kt=dt[2];return ct[ft]||(ct[ft]={}),ct[ft][St]=kt,ct},{}),fontCache[g]=ut,ut},it}();const AllEncodingsCompressed="eJztWsuy48iN/Ret74KZfHtX47meqfGjPHaXx4/wgpJ4JbooUU1JVXXb0f9u4JwESF13R7TD29koIpFi8gCJBHDA/Pvm+nraTuPmZ3/f5HHzs7/k8WlzvXS7fvPXp02eqyR/2vRfd2N3gqhUUfm0Od9P236+DoczxLWK66fNpZ93/fkGWaOy5mnTnUR67c57lRaZSItM/tnN/XnsX/DfIqg0JOk8HI4UK4BCAFzG+xWCQgXF02Y3nU4dJJVKKrx5mPgKBVMImOvYXY+QKJRCoHzXzxMErQrap810hqaloioF1e0L5kvFUwqe23Hu+Q+1TinWeZnuMwSKrRRsL8Nn/kOxlYLtOnzFWE1Viqmu/eceVioVaylYe1OwVKilQD0PCYgiLRtVcJz4kEItW13mNLi0UsCVAB77KyxTKeJKEPff3rsREkVcCeLD3He3HqArBV0J6G/v/fU2cK1WH23l0e3c7T71N9uUVv/c5i73bWlVs1Y0u5/3srO7aQb2EPUB+eUTva0TYgG5mGbbzZSUkJTpn75ygF4PThhq1SMGMds4HYZdN54n/rdWc8rv02bfH9I2hbqGsKbPnIYzHSc0qmTIxI6nuwpiAIQmU8F4Gy7jK8RwntAI1v3wedj39FmFECp508s4zUOyGmwpKrwbL8eOIlVU//Yf/S1J9C212Pa/uuSwbVDYlWzxf/aj/UtfWgm258t1GG1X1BVawfdnX0xdoRbjPCdBVGs1svo3R/tPVD1r2YL3k0kUfC04f9ldLkmk0NVwv+pO232SKXa126/vHAO5wPxNGivsRsZ/HDhWzLVg/iBuOSfMUTGrTX+b/qSIG0H8u+NEl1J4jcD7/XBI9kDcUYN/0/FNCDuNAP64skYOeLrykUsjElWC9+cmAEAB9NtrEijCplaE/YHvKuC5Iup8zxBAWtFrayakC2QC8uCbhggSskx9zXYNQSRkeuZWQBFKQowabNIfS/qeqOgSOFTINcC4DKcnE70H2zqElJAJ3k++dwgrIRPA47J5iCwr724RWELINFBTAAWiCL7SOogrIQj6abWBOH8hCPoL/4a4EoJgn9MWIq40lcY52cJAGbCHMgkpA3g9t7e0sRWgB1HnvjJYRez6yrSTlYJvRZmdCQhe80Pa24roNYL75uLo10WyKYHVeFLjYnImilM0qPDOJOKWNGlFCJsIrw/qsNv7OPY3SnNYSQ9DP46DLHylvGCcEFU08Nz6JIVx9Chd+93ENNhEWroSuC8SAi0WNznNpqH9+c5k1RQ0nIbi9/LnTzdmoKZAaAwaib/0g0Ti29wxG8gUgLey/O8eHmmqt4eiKTNYo416LPrLkcIWa2u06eZ5+mLBXCaoTp4m7pckBm41P8Qe0mUG6DUCYWY/fTmnCQbwkCa2043vrhA2gqakncwM3aGfe9GAj1Vw9qiuzPW2o4Or4PcxhmUu4atwAGKMy8wCscJhiDFfJh1lhY2K6mo250DrTJXOC82EUgVIkTMmOd0moqC5Dd24H15e0hRKJS0Cvg7Xm9RKgz9ErdWrTpfb6zV5Wx2ytwlDZLplUQ/8Ye72Qyq5RI5kqY4t6fe0iHOItdCYbo8zKOi0vLjvjrdjZ2IYRAPUZZ72910SI7vEiL9LaHSvrZFkipKOf02y8gc9vEbmKHQjRP95uH6ShZI9c9pao41otTPLICMETXSC5jLNupbP8bxo2Dy/DOfh9prk8BKNk935MPIo1jiKUSNQqiVSVSozBWYan5nmNMGz1+r6AleO8KJJwXdk2H8XwgVVP31AticBhdvqIZPwNPcvqWhqah74iIB6GsYuvbdGeYFS93yY775hPNh6giUlzNNXr/eaJmNYKrnLKznOt4ZsEQ6f5ZCfWVvJFK2Xs5BcP8ND23r5uJqDyaPmM90Oscl9a87aIC3HLCxz+uOzNFgOhA+P4XRq8hPTjP3Xhzn4oiYIm1svybSpOX03zDuJX4kqyAx3rrKZdZ3XNMggGh9lsUt/Fm+7m+1bGCxqOttPN/fOFiExKh+xnb1d0gz8qiiXmS0r5YxLaaULN/TaOsu4WEgTS3Fd1TCvlsvj9F1/PvQpPzHAZqiN9yZEntcyaDfet0mGOKLl5LGX6EMhU5ZGkf3QnVIWqvJA5FoG7KbLK1BcBcyLTfNYZGr7g8ar+WEWm63VgmSefX/q5k+r6Rplrdo/Heb+q00gKzcWUiVy3pY5RkGL7kept7/zSRS8Uc+Kw+nOV5ukqeu1KqtZ2Ds2a6yrWZghX/NS7q3OwQZ5WM0tgGCBPK7muPM6B2fP8wditayKMKG5YzW7rIvzkJcPs8vKOBGaRJxo+boMocrFfe407G0SJlJS7pO+KOrwqKkAcw4lp28Xi28vU7AM2Lfz9gUITKM8fJlcnoRtlJIvkwsSRtD2kXkuC8M2ytbX08vSME4ZHqd9cTQgojL5hXr60uhDxDJfTy7WQ3kXy2I9q+t+L7V+d3nZD+fDtrtdf7iZ8gPUNhVNSLOdFKmrqgg5UGR5ktUWkERW4ETnYSnQpK5PsqU2k3I5yZbCTGhJki0lmbJ2ypxOd8rYKXM23Slnp6yxclZkVZK1li1EVlMWmY0yyJokC5bIRdYm6sDCW/9X54knZEYnurpKJCEzNtHVdYqTmdGJrm6SiJRMsdWJmTS1MYWuSZwAHg3D5dSJO6tnpqPiNXIHapSQHkL9WNCyDwEZymTtQzyGcfx/rQVukWUP4RgGS29oG5RieEMSVKm67GISoHZUs0g6TKImlZMdbde2cDMFUCZBSBWevKlNIlRrBNQkEVpt0CXUSYTWGvzG1q5TldeFIklgFfiMvQ6tNXgMtk5IM+qSAjbJSpOh4wdUtYnQYgOqxkRosgFVayK02SJsYCJ02tRw9HkVodUG00UTodcG4+UmQrdN0dPhVYR2m8KPBhX1t/bkumgaofzWplwXDT2Oo9K2Lhp6dogUvT+HBpGC98fQxlDs/lSVCr/OVGZ7CGY3lXEIKyD3fylyrQS63P4VjTl0uRkGJxB+l5th2CBS5LkZhg0iRZ6bYdgPUqC5aYMEh8CSmzrsCinU3PRBKkNYyQ0qTgSiSmFQcSAQVAqDimSFmFIYVPaKFGphUNktUqiFQUVaUvLVFbaHSEZK47vC0LNfpOgLQ8+OkaIvDD2SjZbOXWHokWBQgJeGHkmlwaEz9EglKHFKQ48og8qmNPQgJEp0u9LQg4mAjJeGnm0rRV8aeratFH1p6EE8tBnQlYYebSutwLrS0KNrhRZYZegRbpV3dpWhR8tKSU9XGXr2rJTsdJXBTz0ruLjhT00rVaAyBVLTSjWoTIPUs1IVKlOBbSulAV1lOrBzpZS2q0wJNq8yhH7TovIOb1cb5tSXUny14Ut9KUYQUyS1phRgbaDZmEIiFrKThCnpIMMYGrZh0JBo7M01e+H65sZeUpPp6ZsbX4+dcH1xa1YgxYsIAWYF9rXBI1p/L9tiiL6ZmYGtrYpZybaz8caUCA1iA4iIPcEN0ZAQIuq70g2ZPCOQ7R+yE5riIjTojfMRESbsge1zHMhgsSlk5PR4u0WnQDraMOdEE7JTj7dbhAqpw4K3W4wKGZv3eHtempBkA+nHQldgrwXHM1jwCgj0pB7BwlcIbI7BnhbAAmsvHNJgISyw+MIxDRbEAqsvHNRgYSyw/GqZSE0j1l84rMFCWWABhuMaLJgFVmA4sMHCWUi8CRpZQAvkSzizwUJaIE/CoQ0W1ALpEU5tsLDGDzqg6yI0jaKzfxGaRuRBOLjBglsgAcpYHZhG5D04usECXCDdQd0WLMQFshwc6GBBLqQOETSyMBdIa3DMgwW6QD6Dcx4s1AXyDpSRYmoTsrpmzWKQyDJw0GWjTci2GCBZIAtkFDj+wSJZIJPA+Q8WygIJRCQkw8meFCJAsGAWCu8BiNAsjzTAXkKwEBfYg2IQqM3y7EFFauT/ZAcUGlk0DAU7nyzETPeSHBIa1aZmSe4IjWpTsyRphEa1qVmSTFMjU7Mki4ZGreEsSZ+hUWO6s7+bc4/8cdJlaNSYQdjTRbEbM3+c5BgaWTgOSA7stkSLiqFiCwbgLUiHinQX4C1Kh4pEl+BN94oEl+DNdBWJLcH74yS0AG8RPeCjRmRZ3JiR0ZWKrItbW7MmZWVlbG+vSVWxHY2tyW+lJTUy0yEVgdTKmmYlNplKagSDCMFlTIaH8GmVMWkpIj6sMsQv+Ae3UmUIX3AP6q0yRC94x/IOBC84B4+VyhC7yHTIELQRhGgM32hchmAM14hMRCpEMIZrNC6DJvAMWkxl0ASOQYOpDJqACrX+EmgCX9EQ8f3T5stwlggXf/otCfss8O19uvX7LfqmP3Z1AiRPP2JPY2pA/vTbFIhHqhFedB2s0/2v3bIAG1z14yH8CVcvwJFFoePr5cgbDv9/G+Pfvo2BUIP6ix0r8EO9ZYARuKFeMMAIvFA/gWMESqifiTACG9QrBTpCBFGK9wuMQKz0UgJGoH+C7L8xAvPTL40Y4au7gPkfjEAB9SYBRmB/eokAIxA/vT6AETifXh7ACHRPrwroqAFX0i/5GIEmCZb/xQj8Tu8LYARqp5cFMAKr03sCGIHQ6SUBjMDlBMsfMLIP//+HERicXlzACORNsPxJR2iW4I4FRj92EQa8TTuGInY3/vHrMSBwuoPX3TDot4c7osKPXJtBm0XLvsPc0XfRZkHNhxE4nLZsMQJ902/jDOQIkriXkAL7JhEyNh1ZemtZ98IxCZvebeCYZE3AHjkmUdMPGRyTpAm6v3FMgqY3EjgmOdPPZhyTmOlFBIwZxHEPgWNeJ9BbBxyz+af9c45J2PRMcEyyph8EOSZP03PMMTmaXjLgmN0+vWLAMfBpFfeZY7838AVjNilxLYJj4NOy7ZVjUju9zcHxv3/FiVcKULCpf9yGcb9qEOPL/6pp7GyO2cU+S7N2AaOzDMHKBXxO4/goyYBiZ3S7+yxxf0fNKud0r31a0gnddp4+9WfTpHJOt/r4yfIlfVDq5z7dgWABg8amf4SBnLxZQ9A0718keFqMZSGDNurhPoxjf5r84LGeQY/77d0vb3QvyYc1DTrd9nWo56movd196uyqy792faz2prfkJHyAHPiBONTe+kZ2ephrlhb4Ll0HSRfRNOLxqk5onB1LWu4kCPAGRmicIDOZ6j67Ro0T5V2/F6t1lDpTlkz6iMTpspj/JI53H83+jZNmt/+ybY2TZ1lRctmcUldonEDLxLEbGV5aZ9AwRnqAJmydSFu6c2dunU6/8yDIL5Og0+8W67VOp98xsL6kr1H8FglO/W45Uq1z6ncPXto6rX432zlpnVW/e6bAGfXPV0aOmXPqZwcbM+fUzw42Zs6pnx/BxsyJ9fMaV8ycW79fre3c+v1qbefW79+u7QT7/ePazrGf+UE7Zk6wf+Mmi8EJ9ocFQnCC/WGBEJxgf3gDgddNNIp/WC3Mb12i24cHXIEfkcs3FzGDM/UPnnJjcKb+cQXOmfrHFThn6h/fgItO1z8+4IjO2P+0LBOdsX9znHgBKUYn7Id+Pkklvh3TCgtpX9DFhbSvll1I+1t0C3NfTBcX5v4IeSHv5sYxX7g7H86dt+/Wbpw7c+8XsLkz934Bmztz79+AzZ2+9w+4cmfww2ptZ/DDam1n8MPbtZ3GDw9rs9ui3KZPblw4tz8vJiuc208LhMK5/bRAKJzbT28gFE7wp9XCTvCnR1zO8ZeLw7Fwjj8tTlw4x78v0Ern+PcFWukc//4GWulE//6AonSu/7paxrn+zZ2YnRclRK/rBXJsCAjxh2cKEAWVJ02ku/wOoFv2+12XkmnODwHgW4uQGVbZ0uM7mAJ1b/68/JlpUMnWdy5MF6/Vd5eL19YYSPd6FqPwBkNQo/h2NQxdQQ3bn/dpCxrGrqCW7U8rKZl/mfi0Xytk3Am66ZhYbg4y+KAVslDwbXdNL2d5qU5hnYBlTZaa6hs2t1qWdaeeTptcLco+hl5R7w4H5uOGcQbtEkpT18GusOI2xT9dYcVJf7zCSjmbD+Iud2s1NPRb9E+0UICmizb8ZK/+5JOLOulSqwaw5VJr2vB8dSFn89fvv/8H0oq1dA==";var decompressedEncodings=decompressJson(AllEncodingsCompressed),allUnicodeMappings=JSON.parse(decompressedEncodings),Encoding=function(){function it(g,et){var ot=this;this.canEncodeUnicodeCodePoint=function(ut){return ut in ot.unicodeMappings},this.encodeUnicodeCodePoint=function(ut){var ct=ot.unicodeMappings[ut];if(!ct){var dt=String.fromCharCode(ut),ft="0x"+padStart(ut.toString(16),4,"0"),St=ot.name+' cannot encode "'+dt+'" ('+ft+")";throw new Error(St)}return{code:ct[0],name:ct[1]}},this.name=g,this.supportedCodePoints=Object.keys(et).map(Number).sort(function(ut,ct){return ut-ct}),this.unicodeMappings=et}return it}(),Encodings={Symbol:new Encoding("Symbol",allUnicodeMappings.symbol),ZapfDingbats:new Encoding("ZapfDingbats",allUnicodeMappings.zapfdingbats),WinAnsi:new Encoding("WinAnsi",allUnicodeMappings.win1252)},values=function(it){return Object.keys(it).map(function(g){return it[g]})},StandardFontValues=values(FontNames),isStandardFont=function(it){return StandardFontValues.includes(it)},rectanglesAreEqual=function(it,g){return it.x===g.x&&it.y===g.y&&it.width===g.width&&it.height===g.height},backtick=function(it){return"`"+it+"`"},singleQuote=function(it){return"'"+it+"'"},formatValue=function(it){var g=typeof it;return g==="string"?singleQuote(it):g==="undefined"?backtick(it):it},createValueErrorMsg=function(it,g,et){for(var ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++){var dt=et[ut];ot[ut]=formatValue(dt)}var ft=ot.join(" or ");return backtick(g)+" must be one of "+ft+", but was actually "+formatValue(it)},assertIsOneOf=function(it,g,et){Array.isArray(et)||(et=values(et));for(var ot=0,ut=et.length;ot<ut;ot++)if(it===et[ot])return;throw new TypeError(createValueErrorMsg(it,g,et))},assertIsOneOfOrUndefined=function(it,g,et){Array.isArray(et)||(et=values(et)),assertIsOneOf(it,g,et.concat(void 0))},assertIsSubset=function(it,g,et){Array.isArray(et)||(et=values(et));for(var ot=0,ut=it.length;ot<ut;ot++)assertIsOneOf(it[ot],g,et)},getType=function(it){return it===null?"null":it===void 0?"undefined":typeof it=="string"?"string":isNaN(it)?"NaN":typeof it=="number"?"number":typeof it=="boolean"?"boolean":typeof it=="symbol"?"symbol":typeof it=="bigint"?"bigint":it.constructor&&it.constructor.name?it.constructor.name:it.name?it.name:it.constructor?String(it.constructor):String(it)},isType=function(it,g){return g==="null"?it===null:g==="undefined"?it===void 0:g==="string"?typeof it=="string":g==="number"?typeof it=="number"&&!isNaN(it):g==="boolean"?typeof it=="boolean":g==="symbol"?typeof it=="symbol":g==="bigint"?typeof it=="bigint":g===Date?it instanceof Date:g===Array?it instanceof Array:g===Uint8Array?it instanceof Uint8Array:g===ArrayBuffer?it instanceof ArrayBuffer:g===Function?it instanceof Function:it instanceof g[0]},createTypeErrorMsg=function(it,g,et){for(var ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++){var dt=et[ut];dt==="null"&&(ot[ut]=backtick("null")),dt==="undefined"&&(ot[ut]=backtick("undefined")),dt==="string"?ot[ut]=backtick("string"):dt==="number"?ot[ut]=backtick("number"):dt==="boolean"?ot[ut]=backtick("boolean"):dt==="symbol"?ot[ut]=backtick("symbol"):dt==="bigint"?ot[ut]=backtick("bigint"):dt===Array?ot[ut]=backtick("Array"):dt===Uint8Array?ot[ut]=backtick("Uint8Array"):dt===ArrayBuffer?ot[ut]=backtick("ArrayBuffer"):ot[ut]=backtick(dt[1])}var ft=ot.join(" or ");return backtick(g)+" must be of type "+ft+", but was actually of type "+backtick(getType(it))},assertIs=function(it,g,et){for(var ot=0,ut=et.length;ot<ut;ot++)if(isType(it,et[ot]))return;throw new TypeError(createTypeErrorMsg(it,g,et))},assertOrUndefined=function(it,g,et){assertIs(it,g,et.concat("undefined"))},assertEachIs=function(it,g,et){for(var ot=0,ut=it.length;ot<ut;ot++)assertIs(it[ot],g,et)},assertRange=function(it,g,et,ot){if(assertIs(it,g,["number"]),assertIs(et,"min",["number"]),assertIs(ot,"max",["number"]),ot=Math.max(et,ot),it<et||it>ot)throw new Error(backtick(g)+" must be at least "+et+" and at most "+ot+", but was actually "+it)},assertRangeOrUndefined=function(it,g,et,ot){assertIs(it,g,["number","undefined"]),typeof it=="number"&&assertRange(it,g,et,ot)},assertMultiple=function(it,g,et){if(assertIs(it,g,["number"]),it%et!==0)throw new Error(backtick(g)+" must be a multiple of "+et+", but was actually "+it)},assertInteger=function(it,g){if(!Number.isInteger(it))throw new Error(backtick(g)+" must be an integer, but was actually "+it)},assertPositive=function(it,g){if(![1,0].includes(Math.sign(it)))throw new Error(backtick(g)+" must be a positive number or 0, but was actually "+it)},pdfDocEncodingToUnicode=new Uint16Array(256);for(var idx$2=0;idx$2<256;idx$2++)pdfDocEncodingToUnicode[idx$2]=idx$2;pdfDocEncodingToUnicode[22]=toCharCode("");pdfDocEncodingToUnicode[24]=toCharCode("");pdfDocEncodingToUnicode[25]=toCharCode("");pdfDocEncodingToUnicode[26]=toCharCode("");pdfDocEncodingToUnicode[27]=toCharCode("");pdfDocEncodingToUnicode[28]=toCharCode("");pdfDocEncodingToUnicode[29]=toCharCode("");pdfDocEncodingToUnicode[30]=toCharCode("");pdfDocEncodingToUnicode[31]=toCharCode("");pdfDocEncodingToUnicode[127]=toCharCode("");pdfDocEncodingToUnicode[128]=toCharCode("");pdfDocEncodingToUnicode[129]=toCharCode("");pdfDocEncodingToUnicode[130]=toCharCode("");pdfDocEncodingToUnicode[131]=toCharCode("");pdfDocEncodingToUnicode[132]=toCharCode("");pdfDocEncodingToUnicode[133]=toCharCode("");pdfDocEncodingToUnicode[134]=toCharCode("");pdfDocEncodingToUnicode[135]=toCharCode("");pdfDocEncodingToUnicode[136]=toCharCode("");pdfDocEncodingToUnicode[137]=toCharCode("");pdfDocEncodingToUnicode[138]=toCharCode("");pdfDocEncodingToUnicode[139]=toCharCode("");pdfDocEncodingToUnicode[140]=toCharCode("");pdfDocEncodingToUnicode[141]=toCharCode("");pdfDocEncodingToUnicode[142]=toCharCode("");pdfDocEncodingToUnicode[143]=toCharCode("");pdfDocEncodingToUnicode[144]=toCharCode("");pdfDocEncodingToUnicode[145]=toCharCode("");pdfDocEncodingToUnicode[146]=toCharCode("");pdfDocEncodingToUnicode[147]=toCharCode("");pdfDocEncodingToUnicode[148]=toCharCode("");pdfDocEncodingToUnicode[149]=toCharCode("");pdfDocEncodingToUnicode[150]=toCharCode("");pdfDocEncodingToUnicode[151]=toCharCode("");pdfDocEncodingToUnicode[152]=toCharCode("");pdfDocEncodingToUnicode[153]=toCharCode("");pdfDocEncodingToUnicode[154]=toCharCode("");pdfDocEncodingToUnicode[155]=toCharCode("");pdfDocEncodingToUnicode[156]=toCharCode("");pdfDocEncodingToUnicode[157]=toCharCode("");pdfDocEncodingToUnicode[158]=toCharCode("");pdfDocEncodingToUnicode[159]=toCharCode("");pdfDocEncodingToUnicode[160]=toCharCode("");pdfDocEncodingToUnicode[173]=toCharCode("");var pdfDocEncodingDecode=function(it){for(var g=new Array(it.length),et=0,ot=it.length;et<ot;et++)g[et]=pdfDocEncodingToUnicode[it[et]];return String.fromCodePoint.apply(String,g)},Cache=function(){function it(g){this.populate=g,this.value=void 0}return it.prototype.getValue=function(){return this.value},it.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},it.prototype.invalidate=function(){this.value=void 0},it.populatedBy=function(g){return new it(g)},it}(),MethodNotImplementedError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Method "+et+"."+ot+"() not implemented";return ut=it.call(this,ct)||this,ut}return g}(Error),PrivateConstructorError=function(it){__extends(g,it);function g(et){var ot=this,ut="Cannot construct "+et+" - it has a private constructor";return ot=it.call(this,ut)||this,ot}return g}(Error),UnexpectedObjectTypeError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct=function(St){var kt,Tt;return(kt=St==null?void 0:St.name)!==null&&kt!==void 0?kt:(Tt=St==null?void 0:St.constructor)===null||Tt===void 0?void 0:Tt.name},dt=Array.isArray(et)?et.map(ct):[ct(et)],ft="Expected instance of "+dt.join(" or ")+", "+("but got instance of "+(ot&&ct(ot)));return ut=it.call(this,ft)||this,ut}return g}(Error),UnsupportedEncodingError=function(it){__extends(g,it);function g(et){var ot=this,ut=et+" stream encoding not supported";return ot=it.call(this,ut)||this,ot}return g}(Error),ReparseError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Cannot call "+et+"."+ot+"() more than once";return ut=it.call(this,ct)||this,ut}return g}(Error);(function(it){__extends(g,it);function g(et){var ot=this,ut="Missing catalog (ref="+et+")";return ot=it.call(this,ut)||this,ot}return g})(Error);var MissingPageContentsEmbeddingError=function(it){__extends(g,it);function g(){var et=this,ot="Can't embed page with missing Contents";return et=it.call(this,ot)||this,et}return g}(Error),UnrecognizedStreamTypeError=function(it){__extends(g,it);function g(et){var ot,ut,ct,dt=this,ft=(ct=(ut=(ot=et==null?void 0:et.contructor)===null||ot===void 0?void 0:ot.name)!==null&&ut!==void 0?ut:et==null?void 0:et.name)!==null&&ct!==void 0?ct:et,St="Unrecognized stream type: "+ft;return dt=it.call(this,St)||this,dt}return g}(Error),PageEmbeddingMismatchedContextError=function(it){__extends(g,it);function g(){var et=this,ot="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return et=it.call(this,ot)||this,et}return g}(Error),PDFArrayIsNotRectangleError=function(it){__extends(g,it);function g(et){var ot=this,ut="Attempted to convert PDFArray with "+et+" elements to rectangle, but must have exactly 4 elements.";return ot=it.call(this,ut)||this,ot}return g}(Error),InvalidPDFDateStringError=function(it){__extends(g,it);function g(et){var ot=this,ut='Attempted to convert "'+et+'" to a date, but it does not match the PDF date string format.';return ot=it.call(this,ut)||this,ot}return g}(Error),InvalidTargetIndexError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Invalid targetIndex specified: targetIndex="+et+" must be less than Count="+ot;return ut=it.call(this,ct)||this,ut}return g}(Error),CorruptPageTreeError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Failed to "+ot+" at targetIndex="+et+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return ut=it.call(this,ct)||this,ut}return g}(Error),IndexOutOfBoundsError=function(it){__extends(g,it);function g(et,ot,ut){var ct=this,dt="index should be at least "+ot+" and at most "+ut+", but was actually "+et;return ct=it.call(this,dt)||this,ct}return g}(Error),InvalidAcroFieldValueError=function(it){__extends(g,it);function g(){var et=this,ot="Attempted to set invalid field value";return et=it.call(this,ot)||this,et}return g}(Error),MultiSelectValueError=function(it){__extends(g,it);function g(){var et=this,ot="Attempted to select multiple values for single-select field";return et=it.call(this,ot)||this,et}return g}(Error),MissingDAEntryError=function(it){__extends(g,it);function g(et){var ot=this,ut="No /DA (default appearance) entry found for field: "+et;return ot=it.call(this,ut)||this,ot}return g}(Error),MissingTfOperatorError=function(it){__extends(g,it);function g(et){var ot=this,ut="No Tf operator found for DA of field: "+et;return ot=it.call(this,ut)||this,ot}return g}(Error),NumberParsingError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Failed to parse number "+("(line:"+et.line+" col:"+et.column+" offset="+et.offset+'): "'+ot+'"');return ut=it.call(this,ct)||this,ut}return g}(Error),PDFParsingError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Failed to parse PDF document "+("(line:"+et.line+" col:"+et.column+" offset="+et.offset+"): "+ot);return ut=it.call(this,ct)||this,ut}return g}(Error),NextByteAssertionError=function(it){__extends(g,it);function g(et,ot,ut){var ct=this,dt="Expected next byte to be "+ot+" but it was actually "+ut;return ct=it.call(this,et,dt)||this,ct}return g}(PDFParsingError),PDFObjectParsingError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Failed to parse PDF object starting with the following byte: "+ot;return ut=it.call(this,et,ct)||this,ut}return g}(PDFParsingError),PDFInvalidObjectParsingError=function(it){__extends(g,it);function g(et){var ot=this,ut="Failed to parse invalid PDF object";return ot=it.call(this,et,ut)||this,ot}return g}(PDFParsingError),PDFStreamParsingError=function(it){__extends(g,it);function g(et){var ot=this,ut="Failed to parse PDF stream";return ot=it.call(this,et,ut)||this,ot}return g}(PDFParsingError),UnbalancedParenthesisError=function(it){__extends(g,it);function g(et){var ot=this,ut="Failed to parse PDF literal string due to unbalanced parenthesis";return ot=it.call(this,et,ut)||this,ot}return g}(PDFParsingError),StalledParserError=function(it){__extends(g,it);function g(et){var ot=this,ut="Parser stalled";return ot=it.call(this,et,ut)||this,ot}return g}(PDFParsingError),MissingPDFHeaderError=function(it){__extends(g,it);function g(et){var ot=this,ut="No PDF header found";return ot=it.call(this,et,ut)||this,ot}return g}(PDFParsingError),MissingKeywordError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Did not find expected keyword '"+arrayAsString(ot)+"'";return ut=it.call(this,et,ct)||this,ut}return g}(PDFParsingError),CharCodes;(function(it){it[it.Null=0]="Null",it[it.Backspace=8]="Backspace",it[it.Tab=9]="Tab",it[it.Newline=10]="Newline",it[it.FormFeed=12]="FormFeed",it[it.CarriageReturn=13]="CarriageReturn",it[it.Space=32]="Space",it[it.ExclamationPoint=33]="ExclamationPoint",it[it.Hash=35]="Hash",it[it.Percent=37]="Percent",it[it.LeftParen=40]="LeftParen",it[it.RightParen=41]="RightParen",it[it.Plus=43]="Plus",it[it.Minus=45]="Minus",it[it.Dash=45]="Dash",it[it.Period=46]="Period",it[it.ForwardSlash=47]="ForwardSlash",it[it.Zero=48]="Zero",it[it.One=49]="One",it[it.Two=50]="Two",it[it.Three=51]="Three",it[it.Four=52]="Four",it[it.Five=53]="Five",it[it.Six=54]="Six",it[it.Seven=55]="Seven",it[it.Eight=56]="Eight",it[it.Nine=57]="Nine",it[it.LessThan=60]="LessThan",it[it.GreaterThan=62]="GreaterThan",it[it.A=65]="A",it[it.D=68]="D",it[it.E=69]="E",it[it.F=70]="F",it[it.O=79]="O",it[it.P=80]="P",it[it.R=82]="R",it[it.LeftSquareBracket=91]="LeftSquareBracket",it[it.BackSlash=92]="BackSlash",it[it.RightSquareBracket=93]="RightSquareBracket",it[it.a=97]="a",it[it.b=98]="b",it[it.d=100]="d",it[it.e=101]="e",it[it.f=102]="f",it[it.i=105]="i",it[it.j=106]="j",it[it.l=108]="l",it[it.m=109]="m",it[it.n=110]="n",it[it.o=111]="o",it[it.r=114]="r",it[it.s=115]="s",it[it.t=116]="t",it[it.u=117]="u",it[it.x=120]="x",it[it.LeftCurly=123]="LeftCurly",it[it.RightCurly=125]="RightCurly",it[it.Tilde=126]="Tilde"})(CharCodes||(CharCodes={}));const CharCodes$1=CharCodes;var PDFHeader=function(){function it(g,et){this.major=String(g),this.minor=String(et)}return it.prototype.toString=function(){var g=charFromCode(129);return"%PDF-"+this.major+"."+this.minor+`
%`+g+g+g+g},it.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},it.prototype.copyBytesInto=function(g,et){var ot=et;return g[et++]=CharCodes$1.Percent,g[et++]=CharCodes$1.P,g[et++]=CharCodes$1.D,g[et++]=CharCodes$1.F,g[et++]=CharCodes$1.Dash,et+=copyStringIntoBuffer(this.major,g,et),g[et++]=CharCodes$1.Period,et+=copyStringIntoBuffer(this.minor,g,et),g[et++]=CharCodes$1.Newline,g[et++]=CharCodes$1.Percent,g[et++]=129,g[et++]=129,g[et++]=129,g[et++]=129,et-ot},it.forVersion=function(g,et){return new it(g,et)},it}(),PDFObject=function(){function it(){}return it.prototype.clone=function(g){throw new MethodNotImplementedError(this.constructor.name,"clone")},it.prototype.toString=function(){throw new MethodNotImplementedError(this.constructor.name,"toString")},it.prototype.sizeInBytes=function(){throw new MethodNotImplementedError(this.constructor.name,"sizeInBytes")},it.prototype.copyBytesInto=function(g,et){throw new MethodNotImplementedError(this.constructor.name,"copyBytesInto")},it}(),PDFNumber=function(it){__extends(g,it);function g(et){var ot=it.call(this)||this;return ot.numberValue=et,ot.stringValue=numberToString(et),ot}return g.prototype.asNumber=function(){return this.numberValue},g.prototype.value=function(){return this.numberValue},g.prototype.clone=function(){return g.of(this.numberValue)},g.prototype.toString=function(){return this.stringValue},g.prototype.sizeInBytes=function(){return this.stringValue.length},g.prototype.copyBytesInto=function(et,ot){return ot+=copyStringIntoBuffer(this.stringValue,et,ot),this.stringValue.length},g.of=function(et){return new g(et)},g}(PDFObject),PDFArray=function(it){__extends(g,it);function g(et){var ot=it.call(this)||this;return ot.array=[],ot.context=et,ot}return g.prototype.size=function(){return this.array.length},g.prototype.push=function(et){this.array.push(et)},g.prototype.insert=function(et,ot){this.array.splice(et,0,ot)},g.prototype.indexOf=function(et){var ot=this.array.indexOf(et);return ot===-1?void 0:ot},g.prototype.remove=function(et){this.array.splice(et,1)},g.prototype.set=function(et,ot){this.array[et]=ot},g.prototype.get=function(et){return this.array[et]},g.prototype.lookupMaybe=function(et){for(var ot,ut=[],ct=1;ct<arguments.length;ct++)ut[ct-1]=arguments[ct];return(ot=this.context).lookupMaybe.apply(ot,__spreadArrays([this.get(et)],ut))},g.prototype.lookup=function(et){for(var ot,ut=[],ct=1;ct<arguments.length;ct++)ut[ct-1]=arguments[ct];return(ot=this.context).lookup.apply(ot,__spreadArrays([this.get(et)],ut))},g.prototype.asRectangle=function(){if(this.size()!==4)throw new PDFArrayIsNotRectangleError(this.size());var et=this.lookup(0,PDFNumber).asNumber(),ot=this.lookup(1,PDFNumber).asNumber(),ut=this.lookup(2,PDFNumber).asNumber(),ct=this.lookup(3,PDFNumber).asNumber(),dt=et,ft=ot,St=ut-et,kt=ct-ot;return{x:dt,y:ft,width:St,height:kt}},g.prototype.asArray=function(){return this.array.slice()},g.prototype.clone=function(et){for(var ot=g.withContext(et||this.context),ut=0,ct=this.size();ut<ct;ut++)ot.push(this.array[ut]);return ot},g.prototype.toString=function(){for(var et="[ ",ot=0,ut=this.size();ot<ut;ot++)et+=this.get(ot).toString(),et+=" ";return et+="]",et},g.prototype.sizeInBytes=function(){for(var et=3,ot=0,ut=this.size();ot<ut;ot++)et+=this.get(ot).sizeInBytes()+1;return et},g.prototype.copyBytesInto=function(et,ot){var ut=ot;et[ot++]=CharCodes$1.LeftSquareBracket,et[ot++]=CharCodes$1.Space;for(var ct=0,dt=this.size();ct<dt;ct++)ot+=this.get(ct).copyBytesInto(et,ot),et[ot++]=CharCodes$1.Space;return et[ot++]=CharCodes$1.RightSquareBracket,ot-ut},g.prototype.scalePDFNumbers=function(et,ot){for(var ut=0,ct=this.size();ut<ct;ut++){var dt=this.lookup(ut);if(dt instanceof PDFNumber){var ft=ut%2===0?et:ot;this.set(ut,PDFNumber.of(dt.asNumber()*ft))}}},g.withContext=function(et){return new g(et)},g}(PDFObject),ENFORCER$2={},PDFBool=function(it){__extends(g,it);function g(et,ot){var ut=this;if(et!==ENFORCER$2)throw new PrivateConstructorError("PDFBool");return ut=it.call(this)||this,ut.value=ot,ut}return g.prototype.asBoolean=function(){return this.value},g.prototype.clone=function(){return this},g.prototype.toString=function(){return String(this.value)},g.prototype.sizeInBytes=function(){return this.value?4:5},g.prototype.copyBytesInto=function(et,ot){return this.value?(et[ot++]=CharCodes$1.t,et[ot++]=CharCodes$1.r,et[ot++]=CharCodes$1.u,et[ot++]=CharCodes$1.e,4):(et[ot++]=CharCodes$1.f,et[ot++]=CharCodes$1.a,et[ot++]=CharCodes$1.l,et[ot++]=CharCodes$1.s,et[ot++]=CharCodes$1.e,5)},g.True=new g(ENFORCER$2,!0),g.False=new g(ENFORCER$2,!1),g}(PDFObject),IsDelimiter=new Uint8Array(256);IsDelimiter[CharCodes$1.LeftParen]=1;IsDelimiter[CharCodes$1.RightParen]=1;IsDelimiter[CharCodes$1.LessThan]=1;IsDelimiter[CharCodes$1.GreaterThan]=1;IsDelimiter[CharCodes$1.LeftSquareBracket]=1;IsDelimiter[CharCodes$1.RightSquareBracket]=1;IsDelimiter[CharCodes$1.LeftCurly]=1;IsDelimiter[CharCodes$1.RightCurly]=1;IsDelimiter[CharCodes$1.ForwardSlash]=1;IsDelimiter[CharCodes$1.Percent]=1;var IsWhitespace=new Uint8Array(256);IsWhitespace[CharCodes$1.Null]=1;IsWhitespace[CharCodes$1.Tab]=1;IsWhitespace[CharCodes$1.Newline]=1;IsWhitespace[CharCodes$1.FormFeed]=1;IsWhitespace[CharCodes$1.CarriageReturn]=1;IsWhitespace[CharCodes$1.Space]=1;var IsIrregular=new Uint8Array(256);for(var idx$1=0,len$1=256;idx$1<len$1;idx$1++)IsIrregular[idx$1]=IsWhitespace[idx$1]||IsDelimiter[idx$1]?1:0;IsIrregular[CharCodes$1.Hash]=1;var decodeName=function(it){return it.replace(/#([\dABCDEF]{2})/g,function(g,et){return charFromHexCode(et)})},isRegularChar=function(it){return it>=CharCodes$1.ExclamationPoint&&it<=CharCodes$1.Tilde&&!IsIrregular[it]},ENFORCER$1={},pool$1=new Map,PDFName=function(it){__extends(g,it);function g(et,ot){var ut=this;if(et!==ENFORCER$1)throw new PrivateConstructorError("PDFName");ut=it.call(this)||this;for(var ct="/",dt=0,ft=ot.length;dt<ft;dt++){var St=ot[dt],kt=toCharCode(St);ct+=isRegularChar(kt)?St:"#"+toHexString(kt)}return ut.encodedName=ct,ut}return g.prototype.asBytes=function(){for(var et=[],ot="",ut=!1,ct=function(Rt){Rt!==void 0&&et.push(Rt),ut=!1},dt=1,ft=this.encodedName.length;dt<ft;dt++){var St=this.encodedName[dt],kt=toCharCode(St),Tt=this.encodedName[dt+1];ut?kt>=CharCodes$1.Zero&&kt<=CharCodes$1.Nine||kt>=CharCodes$1.a&&kt<=CharCodes$1.f||kt>=CharCodes$1.A&&kt<=CharCodes$1.F?(ot+=St,(ot.length===2||!(Tt>="0"&&Tt<="9"||Tt>="a"&&Tt<="f"||Tt>="A"&&Tt<="F"))&&(ct(parseInt(ot,16)),ot="")):ct(kt):kt===CharCodes$1.Hash?ut=!0:ct(kt)}return new Uint8Array(et)},g.prototype.decodeText=function(){var et=this.asBytes();return String.fromCharCode.apply(String,Array.from(et))},g.prototype.asString=function(){return this.encodedName},g.prototype.value=function(){return this.encodedName},g.prototype.clone=function(){return this},g.prototype.toString=function(){return this.encodedName},g.prototype.sizeInBytes=function(){return this.encodedName.length},g.prototype.copyBytesInto=function(et,ot){return ot+=copyStringIntoBuffer(this.encodedName,et,ot),this.encodedName.length},g.of=function(et){var ot=decodeName(et),ut=pool$1.get(ot);return ut||(ut=new g(ENFORCER$1,ot),pool$1.set(ot,ut)),ut},g.Length=g.of("Length"),g.FlateDecode=g.of("FlateDecode"),g.Resources=g.of("Resources"),g.Font=g.of("Font"),g.XObject=g.of("XObject"),g.ExtGState=g.of("ExtGState"),g.Contents=g.of("Contents"),g.Type=g.of("Type"),g.Parent=g.of("Parent"),g.MediaBox=g.of("MediaBox"),g.Page=g.of("Page"),g.Annots=g.of("Annots"),g.TrimBox=g.of("TrimBox"),g.ArtBox=g.of("ArtBox"),g.BleedBox=g.of("BleedBox"),g.CropBox=g.of("CropBox"),g.Rotate=g.of("Rotate"),g.Title=g.of("Title"),g.Author=g.of("Author"),g.Subject=g.of("Subject"),g.Creator=g.of("Creator"),g.Keywords=g.of("Keywords"),g.Producer=g.of("Producer"),g.CreationDate=g.of("CreationDate"),g.ModDate=g.of("ModDate"),g}(PDFObject),PDFNull=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.asNull=function(){return null},g.prototype.clone=function(){return this},g.prototype.toString=function(){return"null"},g.prototype.sizeInBytes=function(){return 4},g.prototype.copyBytesInto=function(et,ot){return et[ot++]=CharCodes$1.n,et[ot++]=CharCodes$1.u,et[ot++]=CharCodes$1.l,et[ot++]=CharCodes$1.l,4},g}(PDFObject);const PDFNull$1=new PDFNull;var PDFDict=function(it){__extends(g,it);function g(et,ot){var ut=it.call(this)||this;return ut.dict=et,ut.context=ot,ut}return g.prototype.keys=function(){return Array.from(this.dict.keys())},g.prototype.values=function(){return Array.from(this.dict.values())},g.prototype.entries=function(){return Array.from(this.dict.entries())},g.prototype.set=function(et,ot){this.dict.set(et,ot)},g.prototype.get=function(et,ot){ot===void 0&&(ot=!1);var ut=this.dict.get(et);if(!(ut===PDFNull$1&&!ot))return ut},g.prototype.has=function(et){var ot=this.dict.get(et);return ot!==void 0&&ot!==PDFNull$1},g.prototype.lookupMaybe=function(et){for(var ot,ut=[],ct=1;ct<arguments.length;ct++)ut[ct-1]=arguments[ct];var dt=ut.includes(PDFNull$1),ft=(ot=this.context).lookupMaybe.apply(ot,__spreadArrays([this.get(et,dt)],ut));if(!(ft===PDFNull$1&&!dt))return ft},g.prototype.lookup=function(et){for(var ot,ut=[],ct=1;ct<arguments.length;ct++)ut[ct-1]=arguments[ct];var dt=ut.includes(PDFNull$1),ft=(ot=this.context).lookup.apply(ot,__spreadArrays([this.get(et,dt)],ut));if(!(ft===PDFNull$1&&!dt))return ft},g.prototype.delete=function(et){return this.dict.delete(et)},g.prototype.asMap=function(){return new Map(this.dict)},g.prototype.uniqueKey=function(et){et===void 0&&(et="");for(var ot=this.keys(),ut=PDFName.of(this.context.addRandomSuffix(et,10));ot.includes(ut);)ut=PDFName.of(this.context.addRandomSuffix(et,10));return ut},g.prototype.clone=function(et){for(var ot=g.withContext(et||this.context),ut=this.entries(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct],St=ft[0],kt=ft[1];ot.set(St,kt)}return ot},g.prototype.toString=function(){for(var et=`<<
`,ot=this.entries(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=dt[0],St=dt[1];et+=ft.toString()+" "+St.toString()+`
`}return et+=">>",et},g.prototype.sizeInBytes=function(){for(var et=5,ot=this.entries(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=dt[0],St=dt[1];et+=ft.sizeInBytes()+St.sizeInBytes()+2}return et},g.prototype.copyBytesInto=function(et,ot){var ut=ot;et[ot++]=CharCodes$1.LessThan,et[ot++]=CharCodes$1.LessThan,et[ot++]=CharCodes$1.Newline;for(var ct=this.entries(),dt=0,ft=ct.length;dt<ft;dt++){var St=ct[dt],kt=St[0],Tt=St[1];ot+=kt.copyBytesInto(et,ot),et[ot++]=CharCodes$1.Space,ot+=Tt.copyBytesInto(et,ot),et[ot++]=CharCodes$1.Newline}return et[ot++]=CharCodes$1.GreaterThan,et[ot++]=CharCodes$1.GreaterThan,ot-ut},g.withContext=function(et){return new g(new Map,et)},g.fromMapWithContext=function(et,ot){return new g(et,ot)},g}(PDFObject),PDFStream=function(it){__extends(g,it);function g(et){var ot=it.call(this)||this;return ot.dict=et,ot}return g.prototype.clone=function(et){throw new MethodNotImplementedError(this.constructor.name,"clone")},g.prototype.getContentsString=function(){throw new MethodNotImplementedError(this.constructor.name,"getContentsString")},g.prototype.getContents=function(){throw new MethodNotImplementedError(this.constructor.name,"getContents")},g.prototype.getContentsSize=function(){throw new MethodNotImplementedError(this.constructor.name,"getContentsSize")},g.prototype.updateDict=function(){var et=this.getContentsSize();this.dict.set(PDFName.Length,PDFNumber.of(et))},g.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},g.prototype.toString=function(){this.updateDict();var et=this.dict.toString();return et+=`
stream
`,et+=this.getContentsString(),et+=`
endstream`,et},g.prototype.copyBytesInto=function(et,ot){this.updateDict();var ut=ot;ot+=this.dict.copyBytesInto(et,ot),et[ot++]=CharCodes$1.Newline,et[ot++]=CharCodes$1.s,et[ot++]=CharCodes$1.t,et[ot++]=CharCodes$1.r,et[ot++]=CharCodes$1.e,et[ot++]=CharCodes$1.a,et[ot++]=CharCodes$1.m,et[ot++]=CharCodes$1.Newline;for(var ct=this.getContents(),dt=0,ft=ct.length;dt<ft;dt++)et[ot++]=ct[dt];return et[ot++]=CharCodes$1.Newline,et[ot++]=CharCodes$1.e,et[ot++]=CharCodes$1.n,et[ot++]=CharCodes$1.d,et[ot++]=CharCodes$1.s,et[ot++]=CharCodes$1.t,et[ot++]=CharCodes$1.r,et[ot++]=CharCodes$1.e,et[ot++]=CharCodes$1.a,et[ot++]=CharCodes$1.m,ot-ut},g}(PDFObject),PDFRawStream=function(it){__extends(g,it);function g(et,ot){var ut=it.call(this,et)||this;return ut.contents=ot,ut}return g.prototype.asUint8Array=function(){return this.contents.slice()},g.prototype.clone=function(et){return g.of(this.dict.clone(et),this.contents.slice())},g.prototype.getContentsString=function(){return arrayAsString(this.contents)},g.prototype.getContents=function(){return this.contents},g.prototype.getContentsSize=function(){return this.contents.length},g.of=function(et,ot){return new g(et,ot)},g}(PDFStream),ENFORCER={},pool=new Map,PDFRef=function(it){__extends(g,it);function g(et,ot,ut){var ct=this;if(et!==ENFORCER)throw new PrivateConstructorError("PDFRef");return ct=it.call(this)||this,ct.objectNumber=ot,ct.generationNumber=ut,ct.tag=ot+" "+ut+" R",ct}return g.prototype.clone=function(){return this},g.prototype.toString=function(){return this.tag},g.prototype.sizeInBytes=function(){return this.tag.length},g.prototype.copyBytesInto=function(et,ot){return ot+=copyStringIntoBuffer(this.tag,et,ot),this.tag.length},g.of=function(et,ot){ot===void 0&&(ot=0);var ut=et+" "+ot+" R",ct=pool.get(ut);return ct||(ct=new g(ENFORCER,et,ot),pool.set(ut,ct)),ct},g}(PDFObject),PDFOperator=function(){function it(g,et){this.name=g,this.args=et||[]}return it.prototype.clone=function(g){for(var et=new Array(this.args.length),ot=0,ut=et.length;ot<ut;ot++){var ct=this.args[ot];et[ot]=ct instanceof PDFObject?ct.clone(g):ct}return it.of(this.name,et)},it.prototype.toString=function(){for(var g="",et=0,ot=this.args.length;et<ot;et++)g+=String(this.args[et])+" ";return g+=this.name,g},it.prototype.sizeInBytes=function(){for(var g=0,et=0,ot=this.args.length;et<ot;et++){var ut=this.args[et];g+=(ut instanceof PDFObject?ut.sizeInBytes():ut.length)+1}return g+=this.name.length,g},it.prototype.copyBytesInto=function(g,et){for(var ot=et,ut=0,ct=this.args.length;ut<ct;ut++){var dt=this.args[ut];dt instanceof PDFObject?et+=dt.copyBytesInto(g,et):et+=copyStringIntoBuffer(dt,g,et),g[et++]=CharCodes$1.Space}return et+=copyStringIntoBuffer(this.name,g,et),et-ot},it.of=function(g,et){return new it(g,et)},it}(),PDFOperatorNames;(function(it){it.NonStrokingColor="sc",it.NonStrokingColorN="scn",it.NonStrokingColorRgb="rg",it.NonStrokingColorGray="g",it.NonStrokingColorCmyk="k",it.NonStrokingColorspace="cs",it.StrokingColor="SC",it.StrokingColorN="SCN",it.StrokingColorRgb="RG",it.StrokingColorGray="G",it.StrokingColorCmyk="K",it.StrokingColorspace="CS",it.BeginMarkedContentSequence="BDC",it.BeginMarkedContent="BMC",it.EndMarkedContent="EMC",it.MarkedContentPointWithProps="DP",it.MarkedContentPoint="MP",it.DrawObject="Do",it.ConcatTransformationMatrix="cm",it.PopGraphicsState="Q",it.PushGraphicsState="q",it.SetFlatness="i",it.SetGraphicsStateParams="gs",it.SetLineCapStyle="J",it.SetLineDashPattern="d",it.SetLineJoinStyle="j",it.SetLineMiterLimit="M",it.SetLineWidth="w",it.SetTextMatrix="Tm",it.SetRenderingIntent="ri",it.AppendRectangle="re",it.BeginInlineImage="BI",it.BeginInlineImageData="ID",it.EndInlineImage="EI",it.ClipEvenOdd="W*",it.ClipNonZero="W",it.CloseAndStroke="s",it.CloseFillEvenOddAndStroke="b*",it.CloseFillNonZeroAndStroke="b",it.ClosePath="h",it.AppendBezierCurve="c",it.CurveToReplicateFinalPoint="y",it.CurveToReplicateInitialPoint="v",it.EndPath="n",it.FillEvenOddAndStroke="B*",it.FillEvenOdd="f*",it.FillNonZeroAndStroke="B",it.FillNonZero="f",it.LegacyFillNonZero="F",it.LineTo="l",it.MoveTo="m",it.ShadingFill="sh",it.StrokePath="S",it.BeginText="BT",it.EndText="ET",it.MoveText="Td",it.MoveTextSetLeading="TD",it.NextLine="T*",it.SetCharacterSpacing="Tc",it.SetFontAndSize="Tf",it.SetTextHorizontalScaling="Tz",it.SetTextLineHeight="TL",it.SetTextRenderingMode="Tr",it.SetTextRise="Ts",it.SetWordSpacing="Tw",it.ShowText="Tj",it.ShowTextAdjusted="TJ",it.ShowTextLine="'",it.ShowTextLineAndSpace='"',it.Type3D0="d0",it.Type3D1="d1",it.BeginCompatibilitySection="BX",it.EndCompatibilitySection="EX"})(PDFOperatorNames||(PDFOperatorNames={}));const Ops=PDFOperatorNames;var PDFFlateStream=function(it){__extends(g,it);function g(et,ot){var ut=it.call(this,et)||this;return ut.computeContents=function(){var ct=ut.getUnencodedContents();return ut.encode?pako$1.deflate(ct):ct},ut.encode=ot,ot&&et.set(PDFName.of("Filter"),PDFName.of("FlateDecode")),ut.contentsCache=Cache.populatedBy(ut.computeContents),ut}return g.prototype.getContents=function(){return this.contentsCache.access()},g.prototype.getContentsSize=function(){return this.contentsCache.access().length},g.prototype.getUnencodedContents=function(){throw new MethodNotImplementedError(this.constructor.name,"getUnencodedContents")},g}(PDFStream),PDFContentStream=function(it){__extends(g,it);function g(et,ot,ut){ut===void 0&&(ut=!0);var ct=it.call(this,et,ut)||this;return ct.operators=ot,ct}return g.prototype.push=function(){for(var et,ot=[],ut=0;ut<arguments.length;ut++)ot[ut]=arguments[ut];(et=this.operators).push.apply(et,ot)},g.prototype.clone=function(et){for(var ot=new Array(this.operators.length),ut=0,ct=this.operators.length;ut<ct;ut++)ot[ut]=this.operators[ut].clone(et);var dt=this,ft=dt.dict,St=dt.encode;return g.of(ft.clone(et),ot,St)},g.prototype.getContentsString=function(){for(var et="",ot=0,ut=this.operators.length;ot<ut;ot++)et+=this.operators[ot]+`
`;return et},g.prototype.getUnencodedContents=function(){for(var et=new Uint8Array(this.getUnencodedContentsSize()),ot=0,ut=0,ct=this.operators.length;ut<ct;ut++)ot+=this.operators[ut].copyBytesInto(et,ot),et[ot++]=CharCodes$1.Newline;return et},g.prototype.getUnencodedContentsSize=function(){for(var et=0,ot=0,ut=this.operators.length;ot<ut;ot++)et+=this.operators[ot].sizeInBytes()+1;return et},g.of=function(et,ot,ut){return ut===void 0&&(ut=!0),new g(et,ot,ut)},g}(PDFFlateStream),SimpleRNG=function(){function it(g){this.seed=g}return it.prototype.nextInt=function(){var g=Math.sin(this.seed++)*1e4;return g-Math.floor(g)},it.withSeed=function(g){return new it(g)},it}(),byAscendingObjectNumber=function(it,g){var et=it[0],ot=g[0];return et.objectNumber-ot.objectNumber},PDFContext=function(){function it(){this.largestObjectNumber=0,this.header=PDFHeader.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=SimpleRNG.withSeed(1)}return it.prototype.assign=function(g,et){this.indirectObjects.set(g,et),g.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=g.objectNumber)},it.prototype.nextRef=function(){return this.largestObjectNumber+=1,PDFRef.of(this.largestObjectNumber)},it.prototype.register=function(g){var et=this.nextRef();return this.assign(et,g),et},it.prototype.delete=function(g){return this.indirectObjects.delete(g)},it.prototype.lookupMaybe=function(g){for(var et=[],ot=1;ot<arguments.length;ot++)et[ot-1]=arguments[ot];var ut=et.includes(PDFNull$1),ct=g instanceof PDFRef?this.indirectObjects.get(g):g;if(!(!ct||ct===PDFNull$1&&!ut)){for(var dt=0,ft=et.length;dt<ft;dt++){var St=et[dt];if(St===PDFNull$1){if(ct===PDFNull$1)return ct}else if(ct instanceof St)return ct}throw new UnexpectedObjectTypeError(et,ct)}},it.prototype.lookup=function(g){for(var et=[],ot=1;ot<arguments.length;ot++)et[ot-1]=arguments[ot];var ut=g instanceof PDFRef?this.indirectObjects.get(g):g;if(et.length===0)return ut;for(var ct=0,dt=et.length;ct<dt;ct++){var ft=et[ct];if(ft===PDFNull$1){if(ut===PDFNull$1)return ut}else if(ut instanceof ft)return ut}throw new UnexpectedObjectTypeError(et,ut)},it.prototype.getObjectRef=function(g){for(var et=Array.from(this.indirectObjects.entries()),ot=0,ut=et.length;ot<ut;ot++){var ct=et[ot],dt=ct[0],ft=ct[1];if(ft===g)return dt}},it.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(byAscendingObjectNumber)},it.prototype.obj=function(g){if(g instanceof PDFObject)return g;if(g==null)return PDFNull$1;if(typeof g=="string")return PDFName.of(g);if(typeof g=="number")return PDFNumber.of(g);if(typeof g=="boolean")return g?PDFBool.True:PDFBool.False;if(Array.isArray(g)){for(var et=PDFArray.withContext(this),ot=0,ut=g.length;ot<ut;ot++)et.push(this.obj(g[ot]));return et}else{for(var ct=PDFDict.withContext(this),dt=Object.keys(g),ot=0,ut=dt.length;ot<ut;ot++){var ft=dt[ot],St=g[ft];St!==void 0&&ct.set(PDFName.of(ft),this.obj(St))}return ct}},it.prototype.stream=function(g,et){return et===void 0&&(et={}),PDFRawStream.of(this.obj(et),typedArrayFor(g))},it.prototype.flateStream=function(g,et){return et===void 0&&(et={}),this.stream(pako$1.deflate(typedArrayFor(g)),__assign(__assign({},et),{Filter:"FlateDecode"}))},it.prototype.contentStream=function(g,et){return et===void 0&&(et={}),PDFContentStream.of(this.obj(et),g)},it.prototype.formXObject=function(g,et){return et===void 0&&(et={}),this.contentStream(g,__assign(__assign({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},et),{Type:"XObject",Subtype:"Form"}))},it.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var g=this.obj({}),et=PDFOperator.of(Ops.PushGraphicsState),ot=PDFContentStream.of(g,[et]);return this.pushGraphicsStateContentStreamRef=this.register(ot),this.pushGraphicsStateContentStreamRef},it.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var g=this.obj({}),et=PDFOperator.of(Ops.PopGraphicsState),ot=PDFContentStream.of(g,[et]);return this.popGraphicsStateContentStreamRef=this.register(ot),this.popGraphicsStateContentStreamRef},it.prototype.addRandomSuffix=function(g,et){return et===void 0&&(et=4),g+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,et))},it.create=function(){return new it},it}(),PDFPageLeaf=function(it){__extends(g,it);function g(et,ot,ut){ut===void 0&&(ut=!0);var ct=it.call(this,et,ot)||this;return ct.normalized=!1,ct.autoNormalizeCTM=ut,ct}return g.prototype.clone=function(et){for(var ot=g.fromMapWithContext(new Map,et||this.context,this.autoNormalizeCTM),ut=this.entries(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct],St=ft[0],kt=ft[1];ot.set(St,kt)}return ot},g.prototype.Parent=function(){return this.lookupMaybe(PDFName.Parent,PDFDict)},g.prototype.Contents=function(){return this.lookup(PDFName.of("Contents"))},g.prototype.Annots=function(){return this.lookupMaybe(PDFName.Annots,PDFArray)},g.prototype.BleedBox=function(){return this.lookupMaybe(PDFName.BleedBox,PDFArray)},g.prototype.TrimBox=function(){return this.lookupMaybe(PDFName.TrimBox,PDFArray)},g.prototype.ArtBox=function(){return this.lookupMaybe(PDFName.ArtBox,PDFArray)},g.prototype.Resources=function(){var et=this.getInheritableAttribute(PDFName.Resources);return this.context.lookupMaybe(et,PDFDict)},g.prototype.MediaBox=function(){var et=this.getInheritableAttribute(PDFName.MediaBox);return this.context.lookup(et,PDFArray)},g.prototype.CropBox=function(){var et=this.getInheritableAttribute(PDFName.CropBox);return this.context.lookupMaybe(et,PDFArray)},g.prototype.Rotate=function(){var et=this.getInheritableAttribute(PDFName.Rotate);return this.context.lookupMaybe(et,PDFNumber)},g.prototype.getInheritableAttribute=function(et){var ot;return this.ascend(function(ut){ot||(ot=ut.get(et))}),ot},g.prototype.setParent=function(et){this.set(PDFName.Parent,et)},g.prototype.addContentStream=function(et){var ot=this.normalizedEntries().Contents||this.context.obj([]);this.set(PDFName.Contents,ot),ot.push(et)},g.prototype.wrapContentStreams=function(et,ot){var ut=this.Contents();return ut instanceof PDFArray?(ut.insert(0,et),ut.push(ot),!0):!1},g.prototype.addAnnot=function(et){var ot=this.normalizedEntries().Annots;ot.push(et)},g.prototype.removeAnnot=function(et){var ot=this.normalizedEntries().Annots,ut=ot.indexOf(et);ut!==void 0&&ot.remove(ut)},g.prototype.setFontDictionary=function(et,ot){var ut=this.normalizedEntries().Font;ut.set(et,ot)},g.prototype.newFontDictionaryKey=function(et){var ot=this.normalizedEntries().Font;return ot.uniqueKey(et)},g.prototype.newFontDictionary=function(et,ot){var ut=this.newFontDictionaryKey(et);return this.setFontDictionary(ut,ot),ut},g.prototype.setXObject=function(et,ot){var ut=this.normalizedEntries().XObject;ut.set(et,ot)},g.prototype.newXObjectKey=function(et){var ot=this.normalizedEntries().XObject;return ot.uniqueKey(et)},g.prototype.newXObject=function(et,ot){var ut=this.newXObjectKey(et);return this.setXObject(ut,ot),ut},g.prototype.setExtGState=function(et,ot){var ut=this.normalizedEntries().ExtGState;ut.set(et,ot)},g.prototype.newExtGStateKey=function(et){var ot=this.normalizedEntries().ExtGState;return ot.uniqueKey(et)},g.prototype.newExtGState=function(et,ot){var ut=this.newExtGStateKey(et);return this.setExtGState(ut,ot),ut},g.prototype.ascend=function(et){et(this);var ot=this.Parent();ot&&ot.ascend(et)},g.prototype.normalize=function(){if(!this.normalized){var et=this.context,ot=this.get(PDFName.Contents),ut=this.context.lookup(ot);ut instanceof PDFStream&&this.set(PDFName.Contents,et.obj([ot])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var ct=this.getInheritableAttribute(PDFName.Resources),dt=et.lookupMaybe(ct,PDFDict)||et.obj({});this.set(PDFName.Resources,dt);var ft=dt.lookupMaybe(PDFName.Font,PDFDict)||et.obj({});dt.set(PDFName.Font,ft);var St=dt.lookupMaybe(PDFName.XObject,PDFDict)||et.obj({});dt.set(PDFName.XObject,St);var kt=dt.lookupMaybe(PDFName.ExtGState,PDFDict)||et.obj({});dt.set(PDFName.ExtGState,kt);var Tt=this.Annots()||et.obj([]);this.set(PDFName.Annots,Tt),this.normalized=!0}},g.prototype.normalizedEntries=function(){this.normalize();var et=this.Annots(),ot=this.Resources(),ut=this.Contents();return{Annots:et,Resources:ot,Contents:ut,Font:ot.lookup(PDFName.Font,PDFDict),XObject:ot.lookup(PDFName.XObject,PDFDict),ExtGState:ot.lookup(PDFName.ExtGState,PDFDict)}},g.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],g.withContextAndParent=function(et,ot){var ut=new Map;return ut.set(PDFName.Type,PDFName.Page),ut.set(PDFName.Parent,ot),ut.set(PDFName.Resources,et.obj({})),ut.set(PDFName.MediaBox,et.obj([0,0,612,792])),new g(ut,et,!1)},g.fromMapWithContext=function(et,ot,ut){return ut===void 0&&(ut=!0),new g(et,ot,ut)},g}(PDFDict),PDFObjectCopier=function(){function it(g,et){var ot=this;this.traversedObjects=new Map,this.copy=function(ut){return ut instanceof PDFPageLeaf?ot.copyPDFPage(ut):ut instanceof PDFDict?ot.copyPDFDict(ut):ut instanceof PDFArray?ot.copyPDFArray(ut):ut instanceof PDFStream?ot.copyPDFStream(ut):ut instanceof PDFRef?ot.copyPDFIndirectObject(ut):ut.clone()},this.copyPDFPage=function(ut){for(var ct=ut.clone(),dt=PDFPageLeaf.InheritableEntries,ft=0,St=dt.length;ft<St;ft++){var kt=PDFName.of(dt[ft]),Tt=ct.getInheritableAttribute(kt);!ct.get(kt)&&Tt&&ct.set(kt,Tt)}return ct.delete(PDFName.of("Parent")),ot.copyPDFDict(ct)},this.copyPDFDict=function(ut){if(ot.traversedObjects.has(ut))return ot.traversedObjects.get(ut);var ct=ut.clone(ot.dest);ot.traversedObjects.set(ut,ct);for(var dt=ut.entries(),ft=0,St=dt.length;ft<St;ft++){var kt=dt[ft],Tt=kt[0],Rt=kt[1];ct.set(Tt,ot.copy(Rt))}return ct},this.copyPDFArray=function(ut){if(ot.traversedObjects.has(ut))return ot.traversedObjects.get(ut);var ct=ut.clone(ot.dest);ot.traversedObjects.set(ut,ct);for(var dt=0,ft=ut.size();dt<ft;dt++){var St=ut.get(dt);ct.set(dt,ot.copy(St))}return ct},this.copyPDFStream=function(ut){if(ot.traversedObjects.has(ut))return ot.traversedObjects.get(ut);var ct=ut.clone(ot.dest);ot.traversedObjects.set(ut,ct);for(var dt=ut.dict.entries(),ft=0,St=dt.length;ft<St;ft++){var kt=dt[ft],Tt=kt[0],Rt=kt[1];ct.dict.set(Tt,ot.copy(Rt))}return ct},this.copyPDFIndirectObject=function(ut){var ct=ot.traversedObjects.has(ut);if(!ct){var dt=ot.dest.nextRef();ot.traversedObjects.set(ut,dt);var ft=ot.src.lookup(ut);if(ft){var St=ot.copy(ft);ot.dest.assign(dt,St)}}return ot.traversedObjects.get(ut)},this.src=g,this.dest=et}return it.for=function(g,et){return new it(g,et)},it}(),PDFCrossRefSection=function(){function it(g){this.subsections=g?[[g]]:[],this.chunkIdx=0,this.chunkLength=g?1:0}return it.prototype.addEntry=function(g,et){this.append({ref:g,offset:et,deleted:!1})},it.prototype.addDeletedEntry=function(g,et){this.append({ref:g,offset:et,deleted:!0})},it.prototype.toString=function(){for(var g=`xref
`,et=0,ot=this.subsections.length;et<ot;et++){var ut=this.subsections[et];g+=ut[0].ref.objectNumber+" "+ut.length+`
`;for(var ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct];g+=padStart$1(String(ft.offset),10,"0"),g+=" ",g+=padStart$1(String(ft.ref.generationNumber),5,"0"),g+=" ",g+=ft.deleted?"f":"n",g+=` 
`}}return g},it.prototype.sizeInBytes=function(){for(var g=5,et=0,ot=this.subsections.length;et<ot;et++){var ut=this.subsections[et],ct=ut.length,dt=ut[0];g+=2,g+=String(dt.ref.objectNumber).length,g+=String(ct).length,g+=20*ct}return g},it.prototype.copyBytesInto=function(g,et){var ot=et;return g[et++]=CharCodes$1.x,g[et++]=CharCodes$1.r,g[et++]=CharCodes$1.e,g[et++]=CharCodes$1.f,g[et++]=CharCodes$1.Newline,et+=this.copySubsectionsIntoBuffer(this.subsections,g,et),et-ot},it.prototype.copySubsectionsIntoBuffer=function(g,et,ot){for(var ut=ot,ct=g.length,dt=0;dt<ct;dt++){var ft=this.subsections[dt],St=String(ft[0].ref.objectNumber);ot+=copyStringIntoBuffer(St,et,ot),et[ot++]=CharCodes$1.Space;var kt=String(ft.length);ot+=copyStringIntoBuffer(kt,et,ot),et[ot++]=CharCodes$1.Newline,ot+=this.copyEntriesIntoBuffer(ft,et,ot)}return ot-ut},it.prototype.copyEntriesIntoBuffer=function(g,et,ot){for(var ut=g.length,ct=0;ct<ut;ct++){var dt=g[ct],ft=padStart$1(String(dt.offset),10,"0");ot+=copyStringIntoBuffer(ft,et,ot),et[ot++]=CharCodes$1.Space;var St=padStart$1(String(dt.ref.generationNumber),5,"0");ot+=copyStringIntoBuffer(St,et,ot),et[ot++]=CharCodes$1.Space,et[ot++]=dt.deleted?CharCodes$1.f:CharCodes$1.n,et[ot++]=CharCodes$1.Space,et[ot++]=CharCodes$1.Newline}return 20*ut},it.prototype.append=function(g){if(this.chunkLength===0){this.subsections.push([g]),this.chunkIdx=0,this.chunkLength=1;return}var et=this.subsections[this.chunkIdx],ot=et[this.chunkLength-1];g.ref.objectNumber-ot.ref.objectNumber>1?(this.subsections.push([g]),this.chunkIdx+=1,this.chunkLength=1):(et.push(g),this.chunkLength+=1)},it.create=function(){return new it({ref:PDFRef.of(0,65535),offset:0,deleted:!0})},it.createEmpty=function(){return new it},it}(),PDFTrailer=function(){function it(g){this.lastXRefOffset=String(g)}return it.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},it.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},it.prototype.copyBytesInto=function(g,et){var ot=et;return g[et++]=CharCodes$1.s,g[et++]=CharCodes$1.t,g[et++]=CharCodes$1.a,g[et++]=CharCodes$1.r,g[et++]=CharCodes$1.t,g[et++]=CharCodes$1.x,g[et++]=CharCodes$1.r,g[et++]=CharCodes$1.e,g[et++]=CharCodes$1.f,g[et++]=CharCodes$1.Newline,et+=copyStringIntoBuffer(this.lastXRefOffset,g,et),g[et++]=CharCodes$1.Newline,g[et++]=CharCodes$1.Percent,g[et++]=CharCodes$1.Percent,g[et++]=CharCodes$1.E,g[et++]=CharCodes$1.O,g[et++]=CharCodes$1.F,et-ot},it.forLastCrossRefSectionOffset=function(g){return new it(g)},it}(),PDFTrailerDict=function(){function it(g){this.dict=g}return it.prototype.toString=function(){return`trailer
`+this.dict.toString()},it.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},it.prototype.copyBytesInto=function(g,et){var ot=et;return g[et++]=CharCodes$1.t,g[et++]=CharCodes$1.r,g[et++]=CharCodes$1.a,g[et++]=CharCodes$1.i,g[et++]=CharCodes$1.l,g[et++]=CharCodes$1.e,g[et++]=CharCodes$1.r,g[et++]=CharCodes$1.Newline,et+=this.dict.copyBytesInto(g,et),et-ot},it.of=function(g){return new it(g)},it}(),PDFObjectStream=function(it){__extends(g,it);function g(et,ot,ut){ut===void 0&&(ut=!0);var ct=it.call(this,et.obj({}),ut)||this;return ct.objects=ot,ct.offsets=ct.computeObjectOffsets(),ct.offsetsString=ct.computeOffsetsString(),ct.dict.set(PDFName.of("Type"),PDFName.of("ObjStm")),ct.dict.set(PDFName.of("N"),PDFNumber.of(ct.objects.length)),ct.dict.set(PDFName.of("First"),PDFNumber.of(ct.offsetsString.length)),ct}return g.prototype.getObjectsCount=function(){return this.objects.length},g.prototype.clone=function(et){return g.withContextAndObjects(et||this.dict.context,this.objects.slice(),this.encode)},g.prototype.getContentsString=function(){for(var et=this.offsetsString,ot=0,ut=this.objects.length;ot<ut;ot++){var ct=this.objects[ot],dt=ct[1];et+=dt+`
`}return et},g.prototype.getUnencodedContents=function(){for(var et=new Uint8Array(this.getUnencodedContentsSize()),ot=copyStringIntoBuffer(this.offsetsString,et,0),ut=0,ct=this.objects.length;ut<ct;ut++){var dt=this.objects[ut],ft=dt[1];ot+=ft.copyBytesInto(et,ot),et[ot++]=CharCodes$1.Newline}return et},g.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+last(this.offsets)[1]+last(this.objects)[1].sizeInBytes()+1},g.prototype.computeOffsetsString=function(){for(var et="",ot=0,ut=this.offsets.length;ot<ut;ot++){var ct=this.offsets[ot],dt=ct[0],ft=ct[1];et+=dt+" "+ft+" "}return et},g.prototype.computeObjectOffsets=function(){for(var et=0,ot=new Array(this.objects.length),ut=0,ct=this.objects.length;ut<ct;ut++){var dt=this.objects[ut],ft=dt[0],St=dt[1];ot[ut]=[ft.objectNumber,et],et+=St.sizeInBytes()+1}return ot},g.withContextAndObjects=function(et,ot,ut){return ut===void 0&&(ut=!0),new g(et,ot,ut)},g}(PDFFlateStream),PDFWriter=function(){function it(g,et){var ot=this;this.parsedObjects=0,this.shouldWaitForTick=function(ut){return ot.parsedObjects+=ut,ot.parsedObjects%ot.objectsPerTick===0},this.context=g,this.objectsPerTick=et}return it.prototype.serializeToBuffer=function(){return __awaiter(this,void 0,void 0,function(){var g,et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht,Ut;return __generator(this,function(Kt){switch(Kt.label){case 0:return[4,this.computeBufferSize()];case 1:g=Kt.sent(),et=g.size,ot=g.header,ut=g.indirectObjects,ct=g.xref,dt=g.trailerDict,ft=g.trailer,St=0,kt=new Uint8Array(et),St+=ot.copyBytesInto(kt,St),kt[St++]=CharCodes$1.Newline,kt[St++]=CharCodes$1.Newline,Tt=0,Rt=ut.length,Kt.label=2;case 2:return Tt<Rt?(Ft=ut[Tt],jt=Ft[0],Bt=Ft[1],zt=String(jt.objectNumber),St+=copyStringIntoBuffer(zt,kt,St),kt[St++]=CharCodes$1.Space,Ht=String(jt.generationNumber),St+=copyStringIntoBuffer(Ht,kt,St),kt[St++]=CharCodes$1.Space,kt[St++]=CharCodes$1.o,kt[St++]=CharCodes$1.b,kt[St++]=CharCodes$1.j,kt[St++]=CharCodes$1.Newline,St+=Bt.copyBytesInto(kt,St),kt[St++]=CharCodes$1.Newline,kt[St++]=CharCodes$1.e,kt[St++]=CharCodes$1.n,kt[St++]=CharCodes$1.d,kt[St++]=CharCodes$1.o,kt[St++]=CharCodes$1.b,kt[St++]=CharCodes$1.j,kt[St++]=CharCodes$1.Newline,kt[St++]=CharCodes$1.Newline,Ut=Bt instanceof PDFObjectStream?Bt.getObjectsCount():1,this.shouldWaitForTick(Ut)?[4,waitForTick()]:[3,4]):[3,5];case 3:Kt.sent(),Kt.label=4;case 4:return Tt++,[3,2];case 5:return ct&&(St+=ct.copyBytesInto(kt,St),kt[St++]=CharCodes$1.Newline),dt&&(St+=dt.copyBytesInto(kt,St),kt[St++]=CharCodes$1.Newline,kt[St++]=CharCodes$1.Newline),St+=ft.copyBytesInto(kt,St),[2,kt]}})})},it.prototype.computeIndirectObjectSize=function(g){var et=g[0],ot=g[1],ut=et.sizeInBytes()+3,ct=ot.sizeInBytes()+9;return ut+ct},it.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},it.prototype.computeBufferSize=function(){return __awaiter(this,void 0,void 0,function(){var g,et,ot,ut,ct,dt,ft,St,kt,Tt,Rt;return __generator(this,function(Ft){switch(Ft.label){case 0:g=PDFHeader.forVersion(1,7),et=g.sizeInBytes()+2,ot=PDFCrossRefSection.create(),ut=this.context.enumerateIndirectObjects(),ct=0,dt=ut.length,Ft.label=1;case 1:return ct<dt?(ft=ut[ct],St=ft[0],ot.addEntry(St,et),et+=this.computeIndirectObjectSize(ft),this.shouldWaitForTick(1)?[4,waitForTick()]:[3,3]):[3,4];case 2:Ft.sent(),Ft.label=3;case 3:return ct++,[3,1];case 4:return kt=et,et+=ot.sizeInBytes()+1,Tt=PDFTrailerDict.of(this.createTrailerDict()),et+=Tt.sizeInBytes()+2,Rt=PDFTrailer.forLastCrossRefSectionOffset(kt),et+=Rt.sizeInBytes(),[2,{size:et,header:g,indirectObjects:ut,xref:ot,trailerDict:Tt,trailer:Rt}]}})})},it.forContext=function(g,et){return new it(g,et)},it}(),PDFInvalidObject=function(it){__extends(g,it);function g(et){var ot=it.call(this)||this;return ot.data=et,ot}return g.prototype.clone=function(){return g.of(this.data.slice())},g.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},g.prototype.sizeInBytes=function(){return this.data.length},g.prototype.copyBytesInto=function(et,ot){for(var ut=this.data.length,ct=0;ct<ut;ct++)et[ot++]=this.data[ct];return ut},g.of=function(et){return new g(et)},g}(PDFObject),EntryType;(function(it){it[it.Deleted=0]="Deleted",it[it.Uncompressed=1]="Uncompressed",it[it.Compressed=2]="Compressed"})(EntryType||(EntryType={}));var PDFCrossRefStream=function(it){__extends(g,it);function g(et,ot,ut){ut===void 0&&(ut=!0);var ct=it.call(this,et,ut)||this;return ct.computeIndex=function(){for(var dt=[],ft=0,St=0,kt=ct.entries.length;St<kt;St++){var Tt=ct.entries[St],Rt=ct.entries[St-1];St===0?dt.push(Tt.ref.objectNumber):Tt.ref.objectNumber-Rt.ref.objectNumber>1&&(dt.push(ft),dt.push(Tt.ref.objectNumber),ft=0),ft+=1}return dt.push(ft),dt},ct.computeEntryTuples=function(){for(var dt=new Array(ct.entries.length),ft=0,St=ct.entries.length;ft<St;ft++){var kt=ct.entries[ft];if(kt.type===EntryType.Deleted){var Tt=kt.type,Rt=kt.nextFreeObjectNumber,Ft=kt.ref;dt[ft]=[Tt,Rt,Ft.generationNumber]}if(kt.type===EntryType.Uncompressed){var Tt=kt.type,jt=kt.offset,Ft=kt.ref;dt[ft]=[Tt,jt,Ft.generationNumber]}if(kt.type===EntryType.Compressed){var Tt=kt.type,Bt=kt.objectStreamRef,zt=kt.index;dt[ft]=[Tt,Bt.objectNumber,zt]}}return dt},ct.computeMaxEntryByteWidths=function(){for(var dt=ct.entryTuplesCache.access(),ft=[0,0,0],St=0,kt=dt.length;St<kt;St++){var Tt=dt[St],Rt=Tt[0],Ft=Tt[1],jt=Tt[2],Bt=sizeInBytes(Rt),zt=sizeInBytes(Ft),Ht=sizeInBytes(jt);Bt>ft[0]&&(ft[0]=Bt),zt>ft[1]&&(ft[1]=zt),Ht>ft[2]&&(ft[2]=Ht)}return ft},ct.entries=ot||[],ct.entryTuplesCache=Cache.populatedBy(ct.computeEntryTuples),ct.maxByteWidthsCache=Cache.populatedBy(ct.computeMaxEntryByteWidths),ct.indexCache=Cache.populatedBy(ct.computeIndex),et.set(PDFName.of("Type"),PDFName.of("XRef")),ct}return g.prototype.addDeletedEntry=function(et,ot){var ut=EntryType.Deleted;this.entries.push({type:ut,ref:et,nextFreeObjectNumber:ot}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},g.prototype.addUncompressedEntry=function(et,ot){var ut=EntryType.Uncompressed;this.entries.push({type:ut,ref:et,offset:ot}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},g.prototype.addCompressedEntry=function(et,ot,ut){var ct=EntryType.Compressed;this.entries.push({type:ct,ref:et,objectStreamRef:ot,index:ut}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},g.prototype.clone=function(et){var ot=this,ut=ot.dict,ct=ot.entries,dt=ot.encode;return g.of(ut.clone(et),ct.slice(),dt)},g.prototype.getContentsString=function(){for(var et=this.entryTuplesCache.access(),ot=this.maxByteWidthsCache.access(),ut="",ct=0,dt=et.length;ct<dt;ct++){for(var ft=et[ct],St=ft[0],kt=ft[1],Tt=ft[2],Rt=reverseArray(bytesFor(St)),Ft=reverseArray(bytesFor(kt)),jt=reverseArray(bytesFor(Tt)),Bt=ot[0]-1;Bt>=0;Bt--)ut+=(Rt[Bt]||0).toString(2);for(var Bt=ot[1]-1;Bt>=0;Bt--)ut+=(Ft[Bt]||0).toString(2);for(var Bt=ot[2]-1;Bt>=0;Bt--)ut+=(jt[Bt]||0).toString(2)}return ut},g.prototype.getUnencodedContents=function(){for(var et=this.entryTuplesCache.access(),ot=this.maxByteWidthsCache.access(),ut=new Uint8Array(this.getUnencodedContentsSize()),ct=0,dt=0,ft=et.length;dt<ft;dt++){for(var St=et[dt],kt=St[0],Tt=St[1],Rt=St[2],Ft=reverseArray(bytesFor(kt)),jt=reverseArray(bytesFor(Tt)),Bt=reverseArray(bytesFor(Rt)),zt=ot[0]-1;zt>=0;zt--)ut[ct++]=Ft[zt]||0;for(var zt=ot[1]-1;zt>=0;zt--)ut[ct++]=jt[zt]||0;for(var zt=ot[2]-1;zt>=0;zt--)ut[ct++]=Bt[zt]||0}return ut},g.prototype.getUnencodedContentsSize=function(){var et=this.maxByteWidthsCache.access(),ot=sum(et);return ot*this.entries.length},g.prototype.updateDict=function(){it.prototype.updateDict.call(this);var et=this.maxByteWidthsCache.access(),ot=this.indexCache.access(),ut=this.dict.context;this.dict.set(PDFName.of("W"),ut.obj(et)),this.dict.set(PDFName.of("Index"),ut.obj(ot))},g.create=function(et,ot){ot===void 0&&(ot=!0);var ut=new g(et,[],ot);return ut.addDeletedEntry(PDFRef.of(0,65535),0),ut},g.of=function(et,ot,ut){return ut===void 0&&(ut=!0),new g(et,ot,ut)},g}(PDFFlateStream),PDFStreamWriter=function(it){__extends(g,it);function g(et,ot,ut,ct){var dt=it.call(this,et,ot)||this;return dt.encodeStreams=ut,dt.objectsPerStream=ct,dt}return g.prototype.computeBufferSize=function(){return __awaiter(this,void 0,void 0,function(){var et,ot,ut,ct,dt,ft,St,kt,Bt,zt,Tt,Ut,Rt,Ft,Ht,jt,Bt,zt,Ht,Ut,Kt,Yt,er,ar;return __generator(this,function(ir){switch(ir.label){case 0:et=this.context.largestObjectNumber+1,ot=PDFHeader.forVersion(1,7),ut=ot.sizeInBytes()+2,ct=PDFCrossRefStream.create(this.createTrailerDict(),this.encodeStreams),dt=[],ft=[],St=[],kt=this.context.enumerateIndirectObjects(),Bt=0,zt=kt.length,ir.label=1;case 1:return Bt<zt?(Tt=kt[Bt],Ut=Tt[0],Rt=Tt[1],Ft=Ut===this.context.trailerInfo.Encrypt||Rt instanceof PDFStream||Rt instanceof PDFInvalidObject||Ut.generationNumber!==0,Ft?(dt.push(Tt),ct.addUncompressedEntry(Ut,ut),ut+=this.computeIndirectObjectSize(Tt),this.shouldWaitForTick(1)?[4,waitForTick()]:[3,3]):[3,4]):[3,6];case 2:ir.sent(),ir.label=3;case 3:return[3,5];case 4:Ht=last(ft),jt=last(St),(!Ht||Ht.length%this.objectsPerStream===0)&&(Ht=[],ft.push(Ht),jt=PDFRef.of(et++),St.push(jt)),ct.addCompressedEntry(Ut,jt,Ht.length),Ht.push(Tt),ir.label=5;case 5:return Bt++,[3,1];case 6:Bt=0,zt=ft.length,ir.label=7;case 7:return Bt<zt?(Ht=ft[Bt],Ut=St[Bt],Kt=PDFObjectStream.withContextAndObjects(this.context,Ht,this.encodeStreams),ct.addUncompressedEntry(Ut,ut),ut+=this.computeIndirectObjectSize([Ut,Kt]),dt.push([Ut,Kt]),this.shouldWaitForTick(Ht.length)?[4,waitForTick()]:[3,9]):[3,10];case 8:ir.sent(),ir.label=9;case 9:return Bt++,[3,7];case 10:return Yt=PDFRef.of(et++),ct.dict.set(PDFName.of("Size"),PDFNumber.of(et)),ct.addUncompressedEntry(Yt,ut),er=ut,ut+=this.computeIndirectObjectSize([Yt,ct]),dt.push([Yt,ct]),ar=PDFTrailer.forLastCrossRefSectionOffset(er),ut+=ar.sizeInBytes(),[2,{size:ut,header:ot,indirectObjects:dt,trailer:ar}]}})})},g.forContext=function(et,ot,ut,ct){return ut===void 0&&(ut=!0),ct===void 0&&(ct=50),new g(et,ot,ut,ct)},g}(PDFWriter),PDFHexString=function(it){__extends(g,it);function g(et){var ot=it.call(this)||this;return ot.value=et,ot}return g.prototype.asBytes=function(){for(var et=this.value+(this.value.length%2===1?"0":""),ot=et.length,ut=new Uint8Array(et.length/2),ct=0,dt=0;ct<ot;){var ft=parseInt(et.substring(ct,ct+2),16);ut[dt]=ft,ct+=2,dt+=1}return ut},g.prototype.decodeText=function(){var et=this.asBytes();return hasUtf16BOM(et)?utf16Decode(et):pdfDocEncodingDecode(et)},g.prototype.decodeDate=function(){var et=this.decodeText(),ot=parseDate(et);if(!ot)throw new InvalidPDFDateStringError(et);return ot},g.prototype.asString=function(){return this.value},g.prototype.clone=function(){return g.of(this.value)},g.prototype.toString=function(){return"<"+this.value+">"},g.prototype.sizeInBytes=function(){return this.value.length+2},g.prototype.copyBytesInto=function(et,ot){return et[ot++]=CharCodes$1.LessThan,ot+=copyStringIntoBuffer(this.value,et,ot),et[ot++]=CharCodes$1.GreaterThan,this.value.length+2},g.of=function(et){return new g(et)},g.fromText=function(et){for(var ot=utf16Encode(et),ut="",ct=0,dt=ot.length;ct<dt;ct++)ut+=toHexStringOfMinLength(ot[ct],4);return new g(ut)},g}(PDFObject),StandardFontEmbedder=function(){function it(g,et){this.encoding=g===FontNames.ZapfDingbats?Encodings.ZapfDingbats:g===FontNames.Symbol?Encodings.Symbol:Encodings.WinAnsi,this.font=Font.load(g),this.fontName=this.font.FontName,this.customName=et}return it.prototype.encodeText=function(g){for(var et=this.encodeTextAsGlyphs(g),ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++)ot[ut]=toHexString(et[ut].code);return PDFHexString.of(ot.join(""))},it.prototype.widthOfTextAtSize=function(g,et){for(var ot=this.encodeTextAsGlyphs(g),ut=0,ct=0,dt=ot.length;ct<dt;ct++){var ft=ot[ct].name,St=(ot[ct+1]||{}).name,kt=this.font.getXAxisKerningForPair(ft,St)||0;ut+=this.widthOfGlyph(ft)+kt}var Tt=et/1e3;return ut*Tt},it.prototype.heightOfFontAtSize=function(g,et){et===void 0&&(et={});var ot=et.descender,ut=ot===void 0?!0:ot,ct=this.font,dt=ct.Ascender,ft=ct.Descender,St=ct.FontBBox,kt=dt||St[3],Tt=ft||St[1],Rt=kt-Tt;return ut||(Rt+=ft||0),Rt/1e3*g},it.prototype.sizeOfFontAtHeight=function(g){var et=this.font,ot=et.Ascender,ut=et.Descender,ct=et.FontBBox,dt=ot||ct[3],ft=ut||ct[1];return 1e3*g/(dt-ft)},it.prototype.embedIntoContext=function(g,et){var ot=g.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===Encodings.WinAnsi?"WinAnsiEncoding":void 0});return et?(g.assign(et,ot),et):g.register(ot)},it.prototype.widthOfGlyph=function(g){return this.font.getWidthOfGlyph(g)||250},it.prototype.encodeTextAsGlyphs=function(g){for(var et=Array.from(g),ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++){var dt=toCodePoint(et[ut]);ot[ut]=this.encoding.encodeUnicodeCodePoint(dt)}return ot},it.for=function(g,et){return new it(g,et)},it}(),createCmap=function(it,g){for(var et=new Array(it.length),ot=0,ut=it.length;ot<ut;ot++){var ct=it[ot],dt=cmapHexFormat(cmapHexString(g(ct))),ft=cmapHexFormat.apply(void 0,ct.codePoints.map(cmapCodePointFormat));et[ot]=[dt,ft]}return fillCmapTemplate(et)},fillCmapTemplate=function(it){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+it.length+` beginbfchar
`+it.map(function(g){var et=g[0],ot=g[1];return et+" "+ot}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},cmapHexFormat=function(){for(var it=[],g=0;g<arguments.length;g++)it[g]=arguments[g];return"<"+it.join("")+">"},cmapHexString=function(it){return toHexStringOfMinLength(it,4)},cmapCodePointFormat=function(it){if(isWithinBMP(it))return cmapHexString(it);if(hasSurrogates(it)){var g=highSurrogate(it),et=lowSurrogate(it);return""+cmapHexString(g)+cmapHexString(et)}var ot=toHexString(it),ut="0x"+ot+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(ut)},makeFontFlags=function(it){var g=0,et=function(ot){g|=1<<ot-1};return it.fixedPitch&&et(1),it.serif&&et(2),it.symbolic&&et(3),it.script&&et(4),it.nonsymbolic&&et(6),it.italic&&et(7),it.allCap&&et(17),it.smallCap&&et(18),it.forceBold&&et(19),g},deriveFontFlags=function(it){var g=it["OS/2"]?it["OS/2"].sFamilyClass:0,et=makeFontFlags({fixedPitch:it.post.isFixedPitch,serif:1<=g&&g<=7,symbolic:!0,script:g===10,italic:it.head.macStyle.italic});return et},PDFString=function(it){__extends(g,it);function g(et){var ot=it.call(this)||this;return ot.value=et,ot}return g.prototype.asBytes=function(){for(var et=[],ot="",ut=!1,ct=function(Rt){Rt!==void 0&&et.push(Rt),ut=!1},dt=0,ft=this.value.length;dt<ft;dt++){var St=this.value[dt],kt=toCharCode(St),Tt=this.value[dt+1];ut?kt===CharCodes$1.Newline||kt===CharCodes$1.CarriageReturn?ct():kt===CharCodes$1.n?ct(CharCodes$1.Newline):kt===CharCodes$1.r?ct(CharCodes$1.CarriageReturn):kt===CharCodes$1.t?ct(CharCodes$1.Tab):kt===CharCodes$1.b?ct(CharCodes$1.Backspace):kt===CharCodes$1.f?ct(CharCodes$1.FormFeed):kt===CharCodes$1.LeftParen?ct(CharCodes$1.LeftParen):kt===CharCodes$1.RightParen?ct(CharCodes$1.RightParen):kt===CharCodes$1.Backspace?ct(CharCodes$1.BackSlash):kt>=CharCodes$1.Zero&&kt<=CharCodes$1.Seven?(ot+=St,(ot.length===3||!(Tt>="0"&&Tt<="7"))&&(ct(parseInt(ot,8)),ot="")):ct(kt):kt===CharCodes$1.BackSlash?ut=!0:ct(kt)}return new Uint8Array(et)},g.prototype.decodeText=function(){var et=this.asBytes();return hasUtf16BOM(et)?utf16Decode(et):pdfDocEncodingDecode(et)},g.prototype.decodeDate=function(){var et=this.decodeText(),ot=parseDate(et);if(!ot)throw new InvalidPDFDateStringError(et);return ot},g.prototype.asString=function(){return this.value},g.prototype.clone=function(){return g.of(this.value)},g.prototype.toString=function(){return"("+this.value+")"},g.prototype.sizeInBytes=function(){return this.value.length+2},g.prototype.copyBytesInto=function(et,ot){return et[ot++]=CharCodes$1.LeftParen,ot+=copyStringIntoBuffer(this.value,et,ot),et[ot++]=CharCodes$1.RightParen,this.value.length+2},g.of=function(et){return new g(et)},g.fromDate=function(et){var ot=padStart$1(String(et.getUTCFullYear()),4,"0"),ut=padStart$1(String(et.getUTCMonth()+1),2,"0"),ct=padStart$1(String(et.getUTCDate()),2,"0"),dt=padStart$1(String(et.getUTCHours()),2,"0"),ft=padStart$1(String(et.getUTCMinutes()),2,"0"),St=padStart$1(String(et.getUTCSeconds()),2,"0");return new g("D:"+ot+ut+ct+dt+ft+St+"Z")},g}(PDFObject),CustomFontEmbedder=function(){function it(g,et,ot,ut){var ct=this;this.allGlyphsInFontSortedById=function(){for(var dt=new Array(ct.font.characterSet.length),ft=0,St=dt.length;ft<St;ft++){var kt=ct.font.characterSet[ft];dt[ft]=ct.font.glyphForCodePoint(kt)}return sortedUniq(dt.sort(byAscendingId),function(Tt){return Tt.id})},this.font=g,this.scale=1e3/this.font.unitsPerEm,this.fontData=et,this.fontName=this.font.postscriptName||"Font",this.customName=ot,this.fontFeatures=ut,this.baseFontName="",this.glyphCache=Cache.populatedBy(this.allGlyphsInFontSortedById)}return it.for=function(g,et,ot,ut){return __awaiter(this,void 0,void 0,function(){var ct;return __generator(this,function(dt){switch(dt.label){case 0:return[4,g.create(et)];case 1:return ct=dt.sent(),[2,new it(ct,et,ot,ut)]}})})},it.prototype.encodeText=function(g){for(var et=this.font.layout(g,this.fontFeatures).glyphs,ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++)ot[ut]=toHexStringOfMinLength(et[ut].id,4);return PDFHexString.of(ot.join(""))},it.prototype.widthOfTextAtSize=function(g,et){for(var ot=this.font.layout(g,this.fontFeatures).glyphs,ut=0,ct=0,dt=ot.length;ct<dt;ct++)ut+=ot[ct].advanceWidth*this.scale;var ft=et/1e3;return ut*ft},it.prototype.heightOfFontAtSize=function(g,et){et===void 0&&(et={});var ot=et.descender,ut=ot===void 0?!0:ot,ct=this.font,dt=ct.ascent,ft=ct.descent,St=ct.bbox,kt=(dt||St.maxY)*this.scale,Tt=(ft||St.minY)*this.scale,Rt=kt-Tt;return ut||(Rt-=Math.abs(ft)||0),Rt/1e3*g},it.prototype.sizeOfFontAtHeight=function(g){var et=this.font,ot=et.ascent,ut=et.descent,ct=et.bbox,dt=(ot||ct.maxY)*this.scale,ft=(ut||ct.minY)*this.scale;return 1e3*g/(dt-ft)},it.prototype.embedIntoContext=function(g,et){return this.baseFontName=this.customName||g.addRandomSuffix(this.fontName),this.embedFontDict(g,et)},it.prototype.embedFontDict=function(g,et){return __awaiter(this,void 0,void 0,function(){var ot,ut,ct;return __generator(this,function(dt){switch(dt.label){case 0:return[4,this.embedCIDFontDict(g)];case 1:return ot=dt.sent(),ut=this.embedUnicodeCmap(g),ct=g.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[ot],ToUnicode:ut}),et?(g.assign(et,ct),[2,et]):[2,g.register(ct)]}})})},it.prototype.isCFF=function(){return this.font.cff},it.prototype.embedCIDFontDict=function(g){return __awaiter(this,void 0,void 0,function(){var et,ot;return __generator(this,function(ut){switch(ut.label){case 0:return[4,this.embedFontDescriptor(g)];case 1:return et=ut.sent(),ot=g.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:PDFString.of("Adobe"),Ordering:PDFString.of("Identity"),Supplement:0},FontDescriptor:et,W:this.computeWidths()}),[2,g.register(ot)]}})})},it.prototype.embedFontDescriptor=function(g){return __awaiter(this,void 0,void 0,function(){var et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht;return __generator(this,function(Ut){switch(Ut.label){case 0:return[4,this.embedFontStream(g)];case 1:return et=Ut.sent(),ot=this.scale,ut=this.font,ct=ut.italicAngle,dt=ut.ascent,ft=ut.descent,St=ut.capHeight,kt=ut.xHeight,Tt=this.font.bbox,Rt=Tt.minX,Ft=Tt.minY,jt=Tt.maxX,Bt=Tt.maxY,zt=g.obj((Ht={Type:"FontDescriptor",FontName:this.baseFontName,Flags:deriveFontFlags(this.font),FontBBox:[Rt*ot,Ft*ot,jt*ot,Bt*ot],ItalicAngle:ct,Ascent:dt*ot,Descent:ft*ot,CapHeight:(St||dt)*ot,XHeight:(kt||0)*ot,StemV:0},Ht[this.isCFF()?"FontFile3":"FontFile2"]=et,Ht)),[2,g.register(zt)]}})})},it.prototype.serializeFont=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(g){return[2,this.fontData]})})},it.prototype.embedFontStream=function(g){return __awaiter(this,void 0,void 0,function(){var et,ot,ut;return __generator(this,function(ct){switch(ct.label){case 0:return ut=(ot=g).flateStream,[4,this.serializeFont()];case 1:return et=ut.apply(ot,[ct.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,g.register(et)]}})})},it.prototype.embedUnicodeCmap=function(g){var et=createCmap(this.glyphCache.access(),this.glyphId.bind(this)),ot=g.flateStream(et);return g.register(ot)},it.prototype.glyphId=function(g){return g?g.id:-1},it.prototype.computeWidths=function(){for(var g=this.glyphCache.access(),et=[],ot=[],ut=0,ct=g.length;ut<ct;ut++){var dt=g[ut],ft=g[ut-1],St=this.glyphId(dt),kt=this.glyphId(ft);ut===0?et.push(St):St-kt!==1&&(et.push(ot),et.push(St),ot=[]),ot.push(dt.advanceWidth*this.scale)}return et.push(ot),et},it}(),CustomFontSubsetEmbedder=function(it){__extends(g,it);function g(et,ot,ut,ct){var dt=it.call(this,et,ot,ut,ct)||this;return dt.subset=dt.font.createSubset(),dt.glyphs=[],dt.glyphCache=Cache.populatedBy(function(){return dt.glyphs}),dt.glyphIdMap=new Map,dt}return g.for=function(et,ot,ut,ct){return __awaiter(this,void 0,void 0,function(){var dt;return __generator(this,function(ft){switch(ft.label){case 0:return[4,et.create(ot)];case 1:return dt=ft.sent(),[2,new g(dt,ot,ut,ct)]}})})},g.prototype.encodeText=function(et){for(var ot=this.font.layout(et,this.fontFeatures).glyphs,ut=new Array(ot.length),ct=0,dt=ot.length;ct<dt;ct++){var ft=ot[ct],St=this.subset.includeGlyph(ft);this.glyphs[St-1]=ft,this.glyphIdMap.set(ft.id,St),ut[ct]=toHexStringOfMinLength(St,4)}return this.glyphCache.invalidate(),PDFHexString.of(ut.join(""))},g.prototype.isCFF=function(){return this.subset.cff},g.prototype.glyphId=function(et){return et?this.glyphIdMap.get(et.id):-1},g.prototype.serializeFont=function(){var et=this;return new Promise(function(ot,ut){var ct=[];et.subset.encodeStream().on("data",function(dt){return ct.push(dt)}).on("end",function(){return ot(mergeUint8Arrays(ct))}).on("error",function(dt){return ut(dt)})})},g}(CustomFontEmbedder),AFRelationship;(function(it){it.Source="Source",it.Data="Data",it.Alternative="Alternative",it.Supplement="Supplement",it.EncryptedPayload="EncryptedPayload",it.FormData="EncryptedPayload",it.Schema="Schema",it.Unspecified="Unspecified"})(AFRelationship||(AFRelationship={}));var FileEmbedder=function(){function it(g,et,ot){ot===void 0&&(ot={}),this.fileData=g,this.fileName=et,this.options=ot}return it.for=function(g,et,ot){return ot===void 0&&(ot={}),new it(g,et,ot)},it.prototype.embedIntoContext=function(g,et){return __awaiter(this,void 0,void 0,function(){var ot,ut,ct,dt,ft,St,kt,Tt,Rt;return __generator(this,function(Ft){return ot=this.options,ut=ot.mimeType,ct=ot.description,dt=ot.creationDate,ft=ot.modificationDate,St=ot.afRelationship,kt=g.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:ut??void 0,Params:{Size:this.fileData.length,CreationDate:dt?PDFString.fromDate(dt):void 0,ModDate:ft?PDFString.fromDate(ft):void 0}}),Tt=g.register(kt),Rt=g.obj({Type:"Filespec",F:PDFString.of(this.fileName),UF:PDFHexString.fromText(this.fileName),EF:{F:Tt},Desc:ct?PDFHexString.fromText(ct):void 0,AFRelationship:St??void 0}),et?(g.assign(et,Rt),[2,et]):[2,g.register(Rt)]})})},it}(),MARKERS=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],ColorSpace;(function(it){it.DeviceGray="DeviceGray",it.DeviceRGB="DeviceRGB",it.DeviceCMYK="DeviceCMYK"})(ColorSpace||(ColorSpace={}));var ChannelToColorSpace={1:ColorSpace.DeviceGray,3:ColorSpace.DeviceRGB,4:ColorSpace.DeviceCMYK},JpegEmbedder=function(){function it(g,et,ot,ut,ct){this.imageData=g,this.bitsPerComponent=et,this.width=ot,this.height=ut,this.colorSpace=ct}return it.for=function(g){return __awaiter(this,void 0,void 0,function(){var et,ot,ut,ct,dt,ft,St,kt,Tt,Rt;return __generator(this,function(Ft){if(et=new DataView(g.buffer),ot=et.getUint16(0),ot!==65496)throw new Error("SOI not found in JPEG");for(ut=2;ut<et.byteLength&&(ct=et.getUint16(ut),ut+=2,!MARKERS.includes(ct));)ut+=et.getUint16(ut);if(!MARKERS.includes(ct))throw new Error("Invalid JPEG");if(ut+=2,dt=et.getUint8(ut++),ft=et.getUint16(ut),ut+=2,St=et.getUint16(ut),ut+=2,kt=et.getUint8(ut++),Tt=ChannelToColorSpace[kt],!Tt)throw new Error("Unknown JPEG channel.");return Rt=Tt,[2,new it(g,dt,St,ft,Rt)]})})},it.prototype.embedIntoContext=function(g,et){return __awaiter(this,void 0,void 0,function(){var ot;return __generator(this,function(ut){return ot=g.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===ColorSpace.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),et?(g.assign(et,ot),[2,et]):[2,g.register(ot)]})})},it}(),UPNG={};UPNG.toRGBA8=function(it){var g=it.width,et=it.height;if(it.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(it.data,g,et,it).buffer];var ot=[];it.frames[0].data==null&&(it.frames[0].data=it.data);for(var ut=g*et*4,ct=new Uint8Array(ut),dt=new Uint8Array(ut),ft=new Uint8Array(ut),St=0;St<it.frames.length;St++){var kt=it.frames[St],Tt=kt.rect.x,Rt=kt.rect.y,Ft=kt.rect.width,jt=kt.rect.height,Bt=UPNG.toRGBA8.decodeImage(kt.data,Ft,jt,it);if(St!=0)for(var zt=0;zt<ut;zt++)ft[zt]=ct[zt];if(kt.blend==0?UPNG._copyTile(Bt,Ft,jt,ct,g,et,Tt,Rt,0):kt.blend==1&&UPNG._copyTile(Bt,Ft,jt,ct,g,et,Tt,Rt,1),ot.push(ct.buffer.slice(0)),kt.dispose!=0){if(kt.dispose==1)UPNG._copyTile(dt,Ft,jt,ct,g,et,Tt,Rt,0);else if(kt.dispose==2)for(var zt=0;zt<ut;zt++)ct[zt]=ft[zt]}}return ot};UPNG.toRGBA8.decodeImage=function(it,g,et,ot){var ut=g*et,ct=UPNG.decode._getBPP(ot),dt=Math.ceil(g*ct/8),ft=new Uint8Array(ut*4),St=new Uint32Array(ft.buffer),kt=ot.ctype,Tt=ot.depth,Rt=UPNG._bin.readUshort;if(kt==6){var Ft=ut<<2;if(Tt==8)for(var jt=0;jt<Ft;jt+=4)ft[jt]=it[jt],ft[jt+1]=it[jt+1],ft[jt+2]=it[jt+2],ft[jt+3]=it[jt+3];if(Tt==16)for(var jt=0;jt<Ft;jt++)ft[jt]=it[jt<<1]}else if(kt==2){var Bt=ot.tabs.tRNS;if(Bt==null){if(Tt==8)for(var jt=0;jt<ut;jt++){var zt=jt*3;St[jt]=255<<24|it[zt+2]<<16|it[zt+1]<<8|it[zt]}if(Tt==16)for(var jt=0;jt<ut;jt++){var zt=jt*6;St[jt]=255<<24|it[zt+4]<<16|it[zt+2]<<8|it[zt]}}else{var Ht=Bt[0],Ut=Bt[1],Kt=Bt[2];if(Tt==8)for(var jt=0;jt<ut;jt++){var Yt=jt<<2,zt=jt*3;St[jt]=255<<24|it[zt+2]<<16|it[zt+1]<<8|it[zt],it[zt]==Ht&&it[zt+1]==Ut&&it[zt+2]==Kt&&(ft[Yt+3]=0)}if(Tt==16)for(var jt=0;jt<ut;jt++){var Yt=jt<<2,zt=jt*6;St[jt]=255<<24|it[zt+4]<<16|it[zt+2]<<8|it[zt],Rt(it,zt)==Ht&&Rt(it,zt+2)==Ut&&Rt(it,zt+4)==Kt&&(ft[Yt+3]=0)}}}else if(kt==3){var er=ot.tabs.PLTE,ar=ot.tabs.tRNS,ir=ar?ar.length:0;if(Tt==1)for(var lr=0;lr<et;lr++)for(var cr=lr*dt,vr=lr*g,jt=0;jt<g;jt++){var Yt=vr+jt<<2,xr=it[cr+(jt>>3)]>>7-((jt&7)<<0)&1,yr=3*xr;ft[Yt]=er[yr],ft[Yt+1]=er[yr+1],ft[Yt+2]=er[yr+2],ft[Yt+3]=xr<ir?ar[xr]:255}if(Tt==2)for(var lr=0;lr<et;lr++)for(var cr=lr*dt,vr=lr*g,jt=0;jt<g;jt++){var Yt=vr+jt<<2,xr=it[cr+(jt>>2)]>>6-((jt&3)<<1)&3,yr=3*xr;ft[Yt]=er[yr],ft[Yt+1]=er[yr+1],ft[Yt+2]=er[yr+2],ft[Yt+3]=xr<ir?ar[xr]:255}if(Tt==4)for(var lr=0;lr<et;lr++)for(var cr=lr*dt,vr=lr*g,jt=0;jt<g;jt++){var Yt=vr+jt<<2,xr=it[cr+(jt>>1)]>>4-((jt&1)<<2)&15,yr=3*xr;ft[Yt]=er[yr],ft[Yt+1]=er[yr+1],ft[Yt+2]=er[yr+2],ft[Yt+3]=xr<ir?ar[xr]:255}if(Tt==8)for(var jt=0;jt<ut;jt++){var Yt=jt<<2,xr=it[jt],yr=3*xr;ft[Yt]=er[yr],ft[Yt+1]=er[yr+1],ft[Yt+2]=er[yr+2],ft[Yt+3]=xr<ir?ar[xr]:255}}else if(kt==4){if(Tt==8)for(var jt=0;jt<ut;jt++){var Yt=jt<<2,Sr=jt<<1,kr=it[Sr];ft[Yt]=kr,ft[Yt+1]=kr,ft[Yt+2]=kr,ft[Yt+3]=it[Sr+1]}if(Tt==16)for(var jt=0;jt<ut;jt++){var Yt=jt<<2,Sr=jt<<2,kr=it[Sr];ft[Yt]=kr,ft[Yt+1]=kr,ft[Yt+2]=kr,ft[Yt+3]=it[Sr+2]}}else if(kt==0)for(var Ht=ot.tabs.tRNS?ot.tabs.tRNS:-1,lr=0;lr<et;lr++){var Pr=lr*dt,Or=lr*g;if(Tt==1)for(var hr=0;hr<g;hr++){var kr=255*(it[Pr+(hr>>>3)]>>>7-(hr&7)&1),Tr=kr==Ht*255?0:255;St[Or+hr]=Tr<<24|kr<<16|kr<<8|kr}else if(Tt==2)for(var hr=0;hr<g;hr++){var kr=85*(it[Pr+(hr>>>2)]>>>6-((hr&3)<<1)&3),Tr=kr==Ht*85?0:255;St[Or+hr]=Tr<<24|kr<<16|kr<<8|kr}else if(Tt==4)for(var hr=0;hr<g;hr++){var kr=17*(it[Pr+(hr>>>1)]>>>4-((hr&1)<<2)&15),Tr=kr==Ht*17?0:255;St[Or+hr]=Tr<<24|kr<<16|kr<<8|kr}else if(Tt==8)for(var hr=0;hr<g;hr++){var kr=it[Pr+hr],Tr=kr==Ht?0:255;St[Or+hr]=Tr<<24|kr<<16|kr<<8|kr}else if(Tt==16)for(var hr=0;hr<g;hr++){var kr=it[Pr+(hr<<1)],Tr=Rt(it,Pr+(hr<<jt))==Ht?0:255;St[Or+hr]=Tr<<24|kr<<16|kr<<8|kr}}return ft};UPNG.decode=function(it){for(var g=new Uint8Array(it),et=8,ot=UPNG._bin,ut=ot.readUshort,ct=ot.readUint,dt={tabs:{},frames:[]},ft=new Uint8Array(g.length),St=0,kt,Tt=0,Rt=[137,80,78,71,13,10,26,10],Ft=0;Ft<8;Ft++)if(g[Ft]!=Rt[Ft])throw"The input is not a PNG file!";for(;et<g.length;){var jt=ot.readUint(g,et);et+=4;var Bt=ot.readASCII(g,et,4);if(et+=4,Bt=="IHDR")UPNG.decode._IHDR(g,et,dt);else if(Bt=="IDAT"){for(var Ft=0;Ft<jt;Ft++)ft[St+Ft]=g[et+Ft];St+=jt}else if(Bt=="acTL")dt.tabs[Bt]={num_frames:ct(g,et),num_plays:ct(g,et+4)},kt=new Uint8Array(g.length);else if(Bt=="fcTL"){if(Tt!=0){var zt=dt.frames[dt.frames.length-1];zt.data=UPNG.decode._decompress(dt,kt.slice(0,Tt),zt.rect.width,zt.rect.height),Tt=0}var Ht={x:ct(g,et+12),y:ct(g,et+16),width:ct(g,et+4),height:ct(g,et+8)},Ut=ut(g,et+22);Ut=ut(g,et+20)/(Ut==0?100:Ut);var Kt={rect:Ht,delay:Math.round(Ut*1e3),dispose:g[et+24],blend:g[et+25]};dt.frames.push(Kt)}else if(Bt=="fdAT"){for(var Ft=0;Ft<jt-4;Ft++)kt[Tt+Ft]=g[et+Ft+4];Tt+=jt-4}else if(Bt=="pHYs")dt.tabs[Bt]=[ot.readUint(g,et),ot.readUint(g,et+4),g[et+8]];else if(Bt=="cHRM"){dt.tabs[Bt]=[];for(var Ft=0;Ft<8;Ft++)dt.tabs[Bt].push(ot.readUint(g,et+Ft*4))}else if(Bt=="tEXt"){dt.tabs[Bt]==null&&(dt.tabs[Bt]={});var Yt=ot.nextZero(g,et),er=ot.readASCII(g,et,Yt-et),ar=ot.readASCII(g,Yt+1,et+jt-Yt-1);dt.tabs[Bt][er]=ar}else if(Bt=="iTXt"){dt.tabs[Bt]==null&&(dt.tabs[Bt]={});var Yt=0,ir=et;Yt=ot.nextZero(g,ir);var er=ot.readASCII(g,ir,Yt-ir);ir=Yt+1,g[ir],g[ir+1],ir+=2,Yt=ot.nextZero(g,ir),ot.readASCII(g,ir,Yt-ir),ir=Yt+1,Yt=ot.nextZero(g,ir),ot.readUTF8(g,ir,Yt-ir),ir=Yt+1;var ar=ot.readUTF8(g,ir,jt-(ir-et));dt.tabs[Bt][er]=ar}else if(Bt=="PLTE")dt.tabs[Bt]=ot.readBytes(g,et,jt);else if(Bt=="hIST"){var lr=dt.tabs.PLTE.length/3;dt.tabs[Bt]=[];for(var Ft=0;Ft<lr;Ft++)dt.tabs[Bt].push(ut(g,et+Ft*2))}else if(Bt=="tRNS")dt.ctype==3?dt.tabs[Bt]=ot.readBytes(g,et,jt):dt.ctype==0?dt.tabs[Bt]=ut(g,et):dt.ctype==2&&(dt.tabs[Bt]=[ut(g,et),ut(g,et+2),ut(g,et+4)]);else if(Bt=="gAMA")dt.tabs[Bt]=ot.readUint(g,et)/1e5;else if(Bt=="sRGB")dt.tabs[Bt]=g[et];else if(Bt=="bKGD")dt.ctype==0||dt.ctype==4?dt.tabs[Bt]=[ut(g,et)]:dt.ctype==2||dt.ctype==6?dt.tabs[Bt]=[ut(g,et),ut(g,et+2),ut(g,et+4)]:dt.ctype==3&&(dt.tabs[Bt]=g[et]);else if(Bt=="IEND")break;et+=jt,ot.readUint(g,et),et+=4}if(Tt!=0){var zt=dt.frames[dt.frames.length-1];zt.data=UPNG.decode._decompress(dt,kt.slice(0,Tt),zt.rect.width,zt.rect.height),Tt=0}return dt.data=UPNG.decode._decompress(dt,ft,dt.width,dt.height),delete dt.compress,delete dt.interlace,delete dt.filter,dt};UPNG.decode._decompress=function(it,g,et,ot){var ut=UPNG.decode._getBPP(it),ct=Math.ceil(et*ut/8),dt=new Uint8Array((ct+1+it.interlace)*ot);return g=UPNG.decode._inflate(g,dt),it.interlace==0?g=UPNG.decode._filterZero(g,it,0,et,ot):it.interlace==1&&(g=UPNG.decode._readInterlace(g,it)),g};UPNG.decode._inflate=function(it,g){var et=UPNG.inflateRaw(new Uint8Array(it.buffer,2,it.length-6),g);return et};UPNG.inflateRaw=function(){var it={};return it.H={},it.H.N=function(g,et){var ot=Uint8Array,ut=0,ct=0,dt=0,ft=0,St=0,kt=0,Tt=0,Rt=0,Ft=0,jt,Bt;if(g[0]==3&&g[1]==0)return et||new ot(0);var zt=it.H,Ht=zt.b,Ut=zt.e,Kt=zt.R,Yt=zt.n,er=zt.A,ar=zt.Z,ir=zt.m,lr=et==null;for(lr&&(et=new ot(g.length>>>2<<3));ut==0;){if(ut=Ht(g,Ft,1),ct=Ht(g,Ft+1,2),Ft+=3,ct==0){Ft&7&&(Ft+=8-(Ft&7));var cr=(Ft>>>3)+4,vr=g[cr-4]|g[cr-3]<<8;lr&&(et=it.H.W(et,Rt+vr)),et.set(new ot(g.buffer,g.byteOffset+cr,vr),Rt),Ft=cr+vr<<3,Rt+=vr;continue}if(lr&&(et=it.H.W(et,Rt+(1<<17))),ct==1&&(jt=ir.J,Bt=ir.h,kt=512-1,Tt=32-1),ct==2){dt=Ut(g,Ft,5)+257,ft=Ut(g,Ft+5,5)+1,St=Ut(g,Ft+10,4)+4,Ft+=14;for(var xr=1,yr=0;yr<38;yr+=2)ir.Q[yr]=0,ir.Q[yr+1]=0;for(var yr=0;yr<St;yr++){var Sr=Ut(g,Ft+yr*3,3);ir.Q[(ir.X[yr]<<1)+1]=Sr,Sr>xr&&(xr=Sr)}Ft+=3*St,Yt(ir.Q,xr),er(ir.Q,xr,ir.u),jt=ir.w,Bt=ir.d,Ft=Kt(ir.u,(1<<xr)-1,dt+ft,g,Ft,ir.v);var kr=zt.V(ir.v,0,dt,ir.C);kt=(1<<kr)-1;var Pr=zt.V(ir.v,dt,ft,ir.D);Tt=(1<<Pr)-1,Yt(ir.C,kr),er(ir.C,kr,jt),Yt(ir.D,Pr),er(ir.D,Pr,Bt)}for(;;){var Or=jt[ar(g,Ft)&kt];Ft+=Or&15;var hr=Or>>>4;if(!(hr>>>8))et[Rt++]=hr;else{if(hr==256)break;var Tr=Rt+hr-254;if(hr>264){var mr=ir.q[hr-257];Tr=Rt+(mr>>>3)+Ut(g,Ft,mr&7),Ft+=mr&7}var Er=Bt[ar(g,Ft)&Tt];Ft+=Er&15;var Dr=Er>>>4,Cr=ir.c[Dr],Lr=(Cr>>>4)+Ht(g,Ft,Cr&15);for(Ft+=Cr&15;Rt<Tr;)et[Rt]=et[Rt++-Lr],et[Rt]=et[Rt++-Lr],et[Rt]=et[Rt++-Lr],et[Rt]=et[Rt++-Lr];Rt=Tr}}}return et.length==Rt?et:et.slice(0,Rt)},it.H.W=function(g,et){var ot=g.length;if(et<=ot)return g;var ut=new Uint8Array(ot<<1);return ut.set(g,0),ut},it.H.R=function(g,et,ot,ut,ct,dt){for(var ft=it.H.e,St=it.H.Z,kt=0;kt<ot;){var Tt=g[St(ut,ct)&et];ct+=Tt&15;var Rt=Tt>>>4;if(Rt<=15)dt[kt]=Rt,kt++;else{var Ft=0,jt=0;Rt==16?(jt=3+ft(ut,ct,2),ct+=2,Ft=dt[kt-1]):Rt==17?(jt=3+ft(ut,ct,3),ct+=3):Rt==18&&(jt=11+ft(ut,ct,7),ct+=7);for(var Bt=kt+jt;kt<Bt;)dt[kt]=Ft,kt++}}return ct},it.H.V=function(g,et,ot,ut){for(var ct=0,dt=0,ft=ut.length>>>1;dt<ot;){var St=g[dt+et];ut[dt<<1]=0,ut[(dt<<1)+1]=St,St>ct&&(ct=St),dt++}for(;dt<ft;)ut[dt<<1]=0,ut[(dt<<1)+1]=0,dt++;return ct},it.H.n=function(g,et){for(var ot=it.H.m,ut=g.length,ct,dt,ft,St,kt,Tt=ot.j,St=0;St<=et;St++)Tt[St]=0;for(St=1;St<ut;St+=2)Tt[g[St]]++;var Rt=ot.K;for(ct=0,Tt[0]=0,dt=1;dt<=et;dt++)ct=ct+Tt[dt-1]<<1,Rt[dt]=ct;for(ft=0;ft<ut;ft+=2)kt=g[ft+1],kt!=0&&(g[ft]=Rt[kt],Rt[kt]++)},it.H.A=function(g,et,ot){for(var ut=g.length,ct=it.H.m,dt=ct.r,ft=0;ft<ut;ft+=2)if(g[ft+1]!=0)for(var St=ft>>1,kt=g[ft+1],Tt=St<<4|kt,Rt=et-kt,Ft=g[ft]<<Rt,jt=Ft+(1<<Rt);Ft!=jt;){var Bt=dt[Ft]>>>15-et;ot[Bt]=Tt,Ft++}},it.H.l=function(g,et){for(var ot=it.H.m.r,ut=15-et,ct=0;ct<g.length;ct+=2){var dt=g[ct]<<et-g[ct+1];g[ct]=ot[dt]>>>ut}},it.H.M=function(g,et,ot){ot=ot<<(et&7);var ut=et>>>3;g[ut]|=ot,g[ut+1]|=ot>>>8},it.H.I=function(g,et,ot){ot=ot<<(et&7);var ut=et>>>3;g[ut]|=ot,g[ut+1]|=ot>>>8,g[ut+2]|=ot>>>16},it.H.e=function(g,et,ot){return(g[et>>>3]|g[(et>>>3)+1]<<8)>>>(et&7)&(1<<ot)-1},it.H.b=function(g,et,ot){return(g[et>>>3]|g[(et>>>3)+1]<<8|g[(et>>>3)+2]<<16)>>>(et&7)&(1<<ot)-1},it.H.Z=function(g,et){return(g[et>>>3]|g[(et>>>3)+1]<<8|g[(et>>>3)+2]<<16)>>>(et&7)},it.H.i=function(g,et){return(g[et>>>3]|g[(et>>>3)+1]<<8|g[(et>>>3)+2]<<16|g[(et>>>3)+3]<<24)>>>(et&7)},it.H.m=function(){var g=Uint16Array,et=Uint32Array;return{K:new g(16),j:new g(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new g(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new et(32),J:new g(512),_:[],h:new g(32),$:[],w:new g(32768),C:[],v:[],d:new g(32768),D:[],u:new g(512),Q:[],r:new g(32768),s:new et(286),Y:new et(30),a:new et(19),t:new et(15e3),k:new g(65536),g:new g(32768)}}(),function(){for(var g=it.H.m,et=32768,ot=0;ot<et;ot++){var ut=ot;ut=(ut&2863311530)>>>1|(ut&1431655765)<<1,ut=(ut&3435973836)>>>2|(ut&858993459)<<2,ut=(ut&4042322160)>>>4|(ut&252645135)<<4,ut=(ut&4278255360)>>>8|(ut&16711935)<<8,g.r[ot]=(ut>>>16|ut<<16)>>>17}function ct(dt,ft,St){for(;ft--!=0;)dt.push(0,St)}for(var ot=0;ot<32;ot++)g.q[ot]=g.S[ot]<<3|g.T[ot],g.c[ot]=g.p[ot]<<4|g.z[ot];ct(g._,144,8),ct(g._,255-143,9),ct(g._,279-255,7),ct(g._,287-279,8),it.H.n(g._,9),it.H.A(g._,9,g.J),it.H.l(g._,9),ct(g.$,32,5),it.H.n(g.$,5),it.H.A(g.$,5,g.h),it.H.l(g.$,5),ct(g.Q,19,0),ct(g.C,286,0),ct(g.D,30,0),ct(g.v,320,0)}(),it.H.N}();UPNG.decode._readInterlace=function(it,g){for(var et=g.width,ot=g.height,ut=UPNG.decode._getBPP(g),ct=ut>>3,dt=Math.ceil(et*ut/8),ft=new Uint8Array(ot*dt),St=0,kt=[0,0,4,0,2,0,1],Tt=[0,4,0,2,0,1,0],Rt=[8,8,8,4,4,2,2],Ft=[8,8,4,4,2,2,1],jt=0;jt<7;){for(var Bt=Rt[jt],zt=Ft[jt],Ht=0,Ut=0,Kt=kt[jt];Kt<ot;)Kt+=Bt,Ut++;for(var Yt=Tt[jt];Yt<et;)Yt+=zt,Ht++;var er=Math.ceil(Ht*ut/8);UPNG.decode._filterZero(it,g,St,Ht,Ut);for(var ar=0,ir=kt[jt];ir<ot;){for(var lr=Tt[jt],cr=St+ar*er<<3;lr<et;){if(ut==1){var vr=it[cr>>3];vr=vr>>7-(cr&7)&1,ft[ir*dt+(lr>>3)]|=vr<<7-((lr&7)<<0)}if(ut==2){var vr=it[cr>>3];vr=vr>>6-(cr&7)&3,ft[ir*dt+(lr>>2)]|=vr<<6-((lr&3)<<1)}if(ut==4){var vr=it[cr>>3];vr=vr>>4-(cr&7)&15,ft[ir*dt+(lr>>1)]|=vr<<4-((lr&1)<<2)}if(ut>=8)for(var xr=ir*dt+lr*ct,yr=0;yr<ct;yr++)ft[xr+yr]=it[(cr>>3)+yr];cr+=ut,lr+=zt}ar++,ir+=Bt}Ht*Ut!=0&&(St+=Ut*(1+er)),jt=jt+1}return ft};UPNG.decode._getBPP=function(it){var g=[1,null,3,1,2,null,4][it.ctype];return g*it.depth};UPNG.decode._filterZero=function(it,g,et,ot,ut){var ct=UPNG.decode._getBPP(g),dt=Math.ceil(ot*ct/8),ft=UPNG.decode._paeth;ct=Math.ceil(ct/8);var St=0,kt=1,Tt=it[et],Rt=0;if(Tt>1&&(it[et]=[0,0,1][Tt-2]),Tt==3)for(Rt=ct;Rt<dt;Rt++)it[Rt+1]=it[Rt+1]+(it[Rt+1-ct]>>>1)&255;for(var Ft=0;Ft<ut;Ft++)if(St=et+Ft*dt,kt=St+Ft+1,Tt=it[kt-1],Rt=0,Tt==0)for(;Rt<dt;Rt++)it[St+Rt]=it[kt+Rt];else if(Tt==1){for(;Rt<ct;Rt++)it[St+Rt]=it[kt+Rt];for(;Rt<dt;Rt++)it[St+Rt]=it[kt+Rt]+it[St+Rt-ct]}else if(Tt==2)for(;Rt<dt;Rt++)it[St+Rt]=it[kt+Rt]+it[St+Rt-dt];else if(Tt==3){for(;Rt<ct;Rt++)it[St+Rt]=it[kt+Rt]+(it[St+Rt-dt]>>>1);for(;Rt<dt;Rt++)it[St+Rt]=it[kt+Rt]+(it[St+Rt-dt]+it[St+Rt-ct]>>>1)}else{for(;Rt<ct;Rt++)it[St+Rt]=it[kt+Rt]+ft(0,it[St+Rt-dt],0);for(;Rt<dt;Rt++)it[St+Rt]=it[kt+Rt]+ft(it[St+Rt-ct],it[St+Rt-dt],it[St+Rt-ct-dt])}return it};UPNG.decode._paeth=function(it,g,et){var ot=it+g-et,ut=ot-it,ct=ot-g,dt=ot-et;return ut*ut<=ct*ct&&ut*ut<=dt*dt?it:ct*ct<=dt*dt?g:et};UPNG.decode._IHDR=function(it,g,et){var ot=UPNG._bin;et.width=ot.readUint(it,g),g+=4,et.height=ot.readUint(it,g),g+=4,et.depth=it[g],g++,et.ctype=it[g],g++,et.compress=it[g],g++,et.filter=it[g],g++,et.interlace=it[g],g++};UPNG._bin={nextZero:function(it,g){for(;it[g]!=0;)g++;return g},readUshort:function(it,g){return it[g]<<8|it[g+1]},writeUshort:function(it,g,et){it[g]=et>>8&255,it[g+1]=et&255},readUint:function(it,g){return it[g]*(256*256*256)+(it[g+1]<<16|it[g+2]<<8|it[g+3])},writeUint:function(it,g,et){it[g]=et>>24&255,it[g+1]=et>>16&255,it[g+2]=et>>8&255,it[g+3]=et&255},readASCII:function(it,g,et){for(var ot="",ut=0;ut<et;ut++)ot+=String.fromCharCode(it[g+ut]);return ot},writeASCII:function(it,g,et){for(var ot=0;ot<et.length;ot++)it[g+ot]=et.charCodeAt(ot)},readBytes:function(it,g,et){for(var ot=[],ut=0;ut<et;ut++)ot.push(it[g+ut]);return ot},pad:function(it){return it.length<2?"0"+it:it},readUTF8:function(it,g,et){for(var ot="",ut,ct=0;ct<et;ct++)ot+="%"+UPNG._bin.pad(it[g+ct].toString(16));try{ut=decodeURIComponent(ot)}catch{return UPNG._bin.readASCII(it,g,et)}return ut}};UPNG._copyTile=function(it,g,et,ot,ut,ct,dt,ft,St){for(var kt=Math.min(g,ut),Tt=Math.min(et,ct),Rt=0,Ft=0,jt=0;jt<Tt;jt++)for(var Bt=0;Bt<kt;Bt++)if(dt>=0&&ft>=0?(Rt=jt*g+Bt<<2,Ft=(ft+jt)*ut+dt+Bt<<2):(Rt=(-ft+jt)*g-dt+Bt<<2,Ft=jt*ut+Bt<<2),St==0)ot[Ft]=it[Rt],ot[Ft+1]=it[Rt+1],ot[Ft+2]=it[Rt+2],ot[Ft+3]=it[Rt+3];else if(St==1){var zt=it[Rt+3]*.00392156862745098,Ht=it[Rt]*zt,Ut=it[Rt+1]*zt,Kt=it[Rt+2]*zt,Yt=ot[Ft+3]*(1/255),er=ot[Ft]*Yt,ar=ot[Ft+1]*Yt,ir=ot[Ft+2]*Yt,lr=1-zt,cr=zt+Yt*lr,vr=cr==0?0:1/cr;ot[Ft+3]=255*cr,ot[Ft+0]=(Ht+er*lr)*vr,ot[Ft+1]=(Ut+ar*lr)*vr,ot[Ft+2]=(Kt+ir*lr)*vr}else if(St==2){var zt=it[Rt+3],Ht=it[Rt],Ut=it[Rt+1],Kt=it[Rt+2],Yt=ot[Ft+3],er=ot[Ft],ar=ot[Ft+1],ir=ot[Ft+2];zt==Yt&&Ht==er&&Ut==ar&&Kt==ir?(ot[Ft]=0,ot[Ft+1]=0,ot[Ft+2]=0,ot[Ft+3]=0):(ot[Ft]=Ht,ot[Ft+1]=Ut,ot[Ft+2]=Kt,ot[Ft+3]=zt)}else if(St==3){var zt=it[Rt+3],Ht=it[Rt],Ut=it[Rt+1],Kt=it[Rt+2],Yt=ot[Ft+3],er=ot[Ft],ar=ot[Ft+1],ir=ot[Ft+2];if(zt==Yt&&Ht==er&&Ut==ar&&Kt==ir)continue;if(zt<220&&Yt>20)return!1}return!0};UPNG.encode=function(it,g,et,ot,ut,ct,dt){ot==null&&(ot=0),dt==null&&(dt=!1);var ft=UPNG.encode.compress(it,g,et,ot,[!1,!1,!1,0,dt]);return UPNG.encode.compressPNG(ft,-1),UPNG.encode._main(ft,g,et,ut,ct)};UPNG.encodeLL=function(it,g,et,ot,ut,ct,dt,ft){for(var St={ctype:0+(ot==1?0:2)+(ut==0?0:4),depth:ct,frames:[]},kt=(ot+ut)*ct,Tt=kt*g,Rt=0;Rt<it.length;Rt++)St.frames.push({rect:{x:0,y:0,width:g,height:et},img:new Uint8Array(it[Rt]),blend:0,dispose:1,bpp:Math.ceil(kt/8),bpl:Math.ceil(Tt/8)});UPNG.encode.compressPNG(St,0,!0);var Ft=UPNG.encode._main(St,g,et,dt,ft);return Ft};UPNG.encode._main=function(it,g,et,ot,ut){ut==null&&(ut={});var ct=UPNG.crc.crc,dt=UPNG._bin.writeUint,ft=UPNG._bin.writeUshort,St=UPNG._bin.writeASCII,kt=8,Tt=it.frames.length>1,Rt=!1,Ft=8+(16+5+4)+(Tt?20:0);if(ut.sRGB!=null&&(Ft+=8+1+4),ut.pHYs!=null&&(Ft+=8+9+4),it.ctype==3){for(var jt=it.plte.length,Bt=0;Bt<jt;Bt++)it.plte[Bt]>>>24!=255&&(Rt=!0);Ft+=8+jt*3+4+(Rt?8+jt*1+4:0)}for(var zt=0;zt<it.frames.length;zt++){var Ht=it.frames[zt];Tt&&(Ft+=38),Ft+=Ht.cimg.length+12,zt!=0&&(Ft+=4)}Ft+=12;for(var Ut=new Uint8Array(Ft),Kt=[137,80,78,71,13,10,26,10],Bt=0;Bt<8;Bt++)Ut[Bt]=Kt[Bt];if(dt(Ut,kt,13),kt+=4,St(Ut,kt,"IHDR"),kt+=4,dt(Ut,kt,g),kt+=4,dt(Ut,kt,et),kt+=4,Ut[kt]=it.depth,kt++,Ut[kt]=it.ctype,kt++,Ut[kt]=0,kt++,Ut[kt]=0,kt++,Ut[kt]=0,kt++,dt(Ut,kt,ct(Ut,kt-17,17)),kt+=4,ut.sRGB!=null&&(dt(Ut,kt,1),kt+=4,St(Ut,kt,"sRGB"),kt+=4,Ut[kt]=ut.sRGB,kt++,dt(Ut,kt,ct(Ut,kt-5,5)),kt+=4),ut.pHYs!=null&&(dt(Ut,kt,9),kt+=4,St(Ut,kt,"pHYs"),kt+=4,dt(Ut,kt,ut.pHYs[0]),kt+=4,dt(Ut,kt,ut.pHYs[1]),kt+=4,Ut[kt]=ut.pHYs[2],kt++,dt(Ut,kt,ct(Ut,kt-13,13)),kt+=4),Tt&&(dt(Ut,kt,8),kt+=4,St(Ut,kt,"acTL"),kt+=4,dt(Ut,kt,it.frames.length),kt+=4,dt(Ut,kt,ut.loop!=null?ut.loop:0),kt+=4,dt(Ut,kt,ct(Ut,kt-12,12)),kt+=4),it.ctype==3){var jt=it.plte.length;dt(Ut,kt,jt*3),kt+=4,St(Ut,kt,"PLTE"),kt+=4;for(var Bt=0;Bt<jt;Bt++){var Yt=Bt*3,er=it.plte[Bt],ar=er&255,ir=er>>>8&255,lr=er>>>16&255;Ut[kt+Yt+0]=ar,Ut[kt+Yt+1]=ir,Ut[kt+Yt+2]=lr}if(kt+=jt*3,dt(Ut,kt,ct(Ut,kt-jt*3-4,jt*3+4)),kt+=4,Rt){dt(Ut,kt,jt),kt+=4,St(Ut,kt,"tRNS"),kt+=4;for(var Bt=0;Bt<jt;Bt++)Ut[kt+Bt]=it.plte[Bt]>>>24&255;kt+=jt,dt(Ut,kt,ct(Ut,kt-jt-4,jt+4)),kt+=4}}for(var cr=0,zt=0;zt<it.frames.length;zt++){var Ht=it.frames[zt];Tt&&(dt(Ut,kt,26),kt+=4,St(Ut,kt,"fcTL"),kt+=4,dt(Ut,kt,cr++),kt+=4,dt(Ut,kt,Ht.rect.width),kt+=4,dt(Ut,kt,Ht.rect.height),kt+=4,dt(Ut,kt,Ht.rect.x),kt+=4,dt(Ut,kt,Ht.rect.y),kt+=4,ft(Ut,kt,ot[zt]),kt+=2,ft(Ut,kt,1e3),kt+=2,Ut[kt]=Ht.dispose,kt++,Ut[kt]=Ht.blend,kt++,dt(Ut,kt,ct(Ut,kt-30,30)),kt+=4);var vr=Ht.cimg,jt=vr.length;dt(Ut,kt,jt+(zt==0?0:4)),kt+=4;var xr=kt;St(Ut,kt,zt==0?"IDAT":"fdAT"),kt+=4,zt!=0&&(dt(Ut,kt,cr++),kt+=4),Ut.set(vr,kt),kt+=jt,dt(Ut,kt,ct(Ut,xr,kt-xr)),kt+=4}return dt(Ut,kt,0),kt+=4,St(Ut,kt,"IEND"),kt+=4,dt(Ut,kt,ct(Ut,kt-4,4)),kt+=4,Ut.buffer};UPNG.encode.compressPNG=function(it,g,et){for(var ot=0;ot<it.frames.length;ot++){var ut=it.frames[ot];ut.rect.width;var ct=ut.rect.height,dt=new Uint8Array(ct*ut.bpl+ct);ut.cimg=UPNG.encode._filterZero(ut.img,ct,ut.bpp,ut.bpl,dt,g,et)}};UPNG.encode.compress=function(it,g,et,ot,ut){for(var ct=ut[0],dt=ut[1],ft=ut[2],St=ut[3],kt=ut[4],Tt=6,Rt=8,Ft=255,jt=0;jt<it.length;jt++)for(var Bt=new Uint8Array(it[jt]),zt=Bt.length,Ht=0;Ht<zt;Ht+=4)Ft&=Bt[Ht+3];var Ut=Ft!=255,Kt=UPNG.encode.framize(it,g,et,ct,dt,ft),Yt={},er=[],ar=[];if(ot!=0){for(var ir=[],Ht=0;Ht<Kt.length;Ht++)ir.push(Kt[Ht].img.buffer);for(var lr=UPNG.encode.concatRGBA(ir),cr=UPNG.quantize(lr,ot),vr=0,xr=new Uint8Array(cr.abuf),Ht=0;Ht<Kt.length;Ht++){var yr=Kt[Ht].img,Sr=yr.length;ar.push(new Uint8Array(cr.inds.buffer,vr>>2,Sr>>2));for(var jt=0;jt<Sr;jt+=4)yr[jt]=xr[vr+jt],yr[jt+1]=xr[vr+jt+1],yr[jt+2]=xr[vr+jt+2],yr[jt+3]=xr[vr+jt+3];vr+=Sr}for(var Ht=0;Ht<cr.plte.length;Ht++)er.push(cr.plte[Ht].est.rgba)}else for(var jt=0;jt<Kt.length;jt++){var kr=Kt[jt],Pr=new Uint32Array(kr.img.buffer),Or=kr.rect.width,zt=Pr.length,hr=new Uint8Array(zt);ar.push(hr);for(var Ht=0;Ht<zt;Ht++){var Tr=Pr[Ht];if(Ht!=0&&Tr==Pr[Ht-1])hr[Ht]=hr[Ht-1];else if(Ht>Or&&Tr==Pr[Ht-Or])hr[Ht]=hr[Ht-Or];else{var mr=Yt[Tr];if(mr==null&&(Yt[Tr]=mr=er.length,er.push(Tr),er.length>=300))break;hr[Ht]=mr}}}var Er=er.length;Er<=256&&kt==!1&&(Er<=2?Rt=1:Er<=4?Rt=2:Er<=16?Rt=4:Rt=8,Rt=Math.max(Rt,St));for(var jt=0;jt<Kt.length;jt++){var kr=Kt[jt];kr.rect.x,kr.rect.y;var Or=kr.rect.width,Dr=kr.rect.height,Cr=kr.img;new Uint32Array(Cr.buffer);var Lr=4*Or,qr=4;if(Er<=256&&kt==!1){Lr=Math.ceil(Rt*Or/8);for(var sn=new Uint8Array(Lr*Dr),an=ar[jt],tn=0;tn<Dr;tn++){var Ht=tn*Lr,ln=tn*Or;if(Rt==8)for(var yn=0;yn<Or;yn++)sn[Ht+yn]=an[ln+yn];else if(Rt==4)for(var yn=0;yn<Or;yn++)sn[Ht+(yn>>1)]|=an[ln+yn]<<4-(yn&1)*4;else if(Rt==2)for(var yn=0;yn<Or;yn++)sn[Ht+(yn>>2)]|=an[ln+yn]<<6-(yn&3)*2;else if(Rt==1)for(var yn=0;yn<Or;yn++)sn[Ht+(yn>>3)]|=an[ln+yn]<<7-(yn&7)*1}Cr=sn,Tt=3,qr=1}else if(Ut==!1&&Kt.length==1){for(var sn=new Uint8Array(Or*Dr*3),pn=Or*Dr,Ht=0;Ht<pn;Ht++){var yr=Ht*3,En=Ht*4;sn[yr]=Cr[En],sn[yr+1]=Cr[En+1],sn[yr+2]=Cr[En+2]}Cr=sn,Tt=2,qr=3,Lr=3*Or}kr.img=Cr,kr.bpl=Lr,kr.bpp=qr}return{ctype:Tt,depth:Rt,plte:er,frames:Kt}};UPNG.encode.framize=function(it,g,et,ot,ut,ct){for(var dt=[],ft=0;ft<it.length;ft++){var St=new Uint8Array(it[ft]),kt=new Uint32Array(St.buffer),Tt,Rt=0,Ft=0,jt=g,Bt=et,zt=ot?1:0;if(ft!=0){for(var Ht=ct||ot||ft==1||dt[ft-2].dispose!=0?1:2,Ut=0,Kt=1e9,Yt=0;Yt<Ht;Yt++){for(var kr=new Uint8Array(it[ft-1-Yt]),er=new Uint32Array(it[ft-1-Yt]),ar=g,ir=et,lr=-1,cr=-1,vr=0;vr<et;vr++)for(var xr=0;xr<g;xr++){var yr=vr*g+xr;kt[yr]!=er[yr]&&(xr<ar&&(ar=xr),xr>lr&&(lr=xr),vr<ir&&(ir=vr),vr>cr&&(cr=vr))}lr==-1&&(ar=ir=lr=cr=0),ut&&((ar&1)==1&&ar--,(ir&1)==1&&ir--);var Sr=(lr-ar+1)*(cr-ir+1);Sr<Kt&&(Kt=Sr,Ut=Yt,Rt=ar,Ft=ir,jt=lr-ar+1,Bt=cr-ir+1)}var kr=new Uint8Array(it[ft-1-Ut]);Ut==1&&(dt[ft-1].dispose=2),Tt=new Uint8Array(jt*Bt*4),UPNG._copyTile(kr,g,et,Tt,jt,Bt,-Rt,-Ft,0),zt=UPNG._copyTile(St,g,et,Tt,jt,Bt,-Rt,-Ft,3)?1:0,zt==1?UPNG.encode._prepareDiff(St,g,et,Tt,{x:Rt,y:Ft,width:jt,height:Bt}):UPNG._copyTile(St,g,et,Tt,jt,Bt,-Rt,-Ft,0)}else Tt=St.slice(0);dt.push({rect:{x:Rt,y:Ft,width:jt,height:Bt},img:Tt,blend:zt,dispose:0})}if(ot)for(var ft=0;ft<dt.length;ft++){var Pr=dt[ft];if(Pr.blend!=1){var Or=Pr.rect,hr=dt[ft-1].rect,Tr=Math.min(Or.x,hr.x),mr=Math.min(Or.y,hr.y),Er=Math.max(Or.x+Or.width,hr.x+hr.width),Dr=Math.max(Or.y+Or.height,hr.y+hr.height),Cr={x:Tr,y:mr,width:Er-Tr,height:Dr-mr};dt[ft-1].dispose=1,ft-1!=0&&UPNG.encode._updateFrame(it,g,et,dt,ft-1,Cr,ut),UPNG.encode._updateFrame(it,g,et,dt,ft,Cr,ut)}}var Lr=0;if(it.length!=1)for(var yr=0;yr<dt.length;yr++){var Pr=dt[yr];Lr+=Pr.rect.width*Pr.rect.height}return dt};UPNG.encode._updateFrame=function(it,g,et,ot,ut,ct,dt){for(var ft=Uint8Array,St=Uint32Array,kt=new ft(it[ut-1]),Tt=new St(it[ut-1]),Rt=ut+1<it.length?new ft(it[ut+1]):null,Ft=new ft(it[ut]),jt=new St(Ft.buffer),Bt=g,zt=et,Ht=-1,Ut=-1,Kt=0;Kt<ct.height;Kt++)for(var Yt=0;Yt<ct.width;Yt++){var er=ct.x+Yt,ar=ct.y+Kt,ir=ar*g+er,lr=jt[ir];lr==0||ot[ut-1].dispose==0&&Tt[ir]==lr&&(Rt==null||Rt[ir*4+3]!=0)||(er<Bt&&(Bt=er),er>Ht&&(Ht=er),ar<zt&&(zt=ar),ar>Ut&&(Ut=ar))}Ht==-1&&(Bt=zt=Ht=Ut=0),dt&&((Bt&1)==1&&Bt--,(zt&1)==1&&zt--),ct={x:Bt,y:zt,width:Ht-Bt+1,height:Ut-zt+1};var cr=ot[ut];cr.rect=ct,cr.blend=1,cr.img=new Uint8Array(ct.width*ct.height*4),ot[ut-1].dispose==0?(UPNG._copyTile(kt,g,et,cr.img,ct.width,ct.height,-ct.x,-ct.y,0),UPNG.encode._prepareDiff(Ft,g,et,cr.img,ct)):UPNG._copyTile(Ft,g,et,cr.img,ct.width,ct.height,-ct.x,-ct.y,0)};UPNG.encode._prepareDiff=function(it,g,et,ot,ut){UPNG._copyTile(it,g,et,ot,ut.width,ut.height,-ut.x,-ut.y,2)};UPNG.encode._filterZero=function(it,g,et,ot,ut,ct,dt){var ft=[],St=[0,1,2,3,4];ct!=-1?St=[ct]:(g*ot>5e5||et==1)&&(St=[0]);var kt;dt&&(kt={level:0});for(var Tt=dt&&UZIP!=null?UZIP:pako$1,Rt=0;Rt<St.length;Rt++){for(var Ft=0;Ft<g;Ft++)UPNG.encode._filterLine(ut,it,Ft,ot,et,St[Rt]);ft.push(Tt.deflate(ut,kt))}for(var jt,Bt=1e9,Rt=0;Rt<ft.length;Rt++)ft[Rt].length<Bt&&(jt=Rt,Bt=ft[Rt].length);return ft[jt]};UPNG.encode._filterLine=function(it,g,et,ot,ut,ct){var dt=et*ot,ft=dt+et,St=UPNG.decode._paeth;if(it[ft]=ct,ft++,ct==0)if(ot<500)for(var kt=0;kt<ot;kt++)it[ft+kt]=g[dt+kt];else it.set(new Uint8Array(g.buffer,dt,ot),ft);else if(ct==1){for(var kt=0;kt<ut;kt++)it[ft+kt]=g[dt+kt];for(var kt=ut;kt<ot;kt++)it[ft+kt]=g[dt+kt]-g[dt+kt-ut]+256&255}else if(et==0){for(var kt=0;kt<ut;kt++)it[ft+kt]=g[dt+kt];if(ct==2)for(var kt=ut;kt<ot;kt++)it[ft+kt]=g[dt+kt];if(ct==3)for(var kt=ut;kt<ot;kt++)it[ft+kt]=g[dt+kt]-(g[dt+kt-ut]>>1)+256&255;if(ct==4)for(var kt=ut;kt<ot;kt++)it[ft+kt]=g[dt+kt]-St(g[dt+kt-ut],0,0)+256&255}else{if(ct==2)for(var kt=0;kt<ot;kt++)it[ft+kt]=g[dt+kt]+256-g[dt+kt-ot]&255;if(ct==3){for(var kt=0;kt<ut;kt++)it[ft+kt]=g[dt+kt]+256-(g[dt+kt-ot]>>1)&255;for(var kt=ut;kt<ot;kt++)it[ft+kt]=g[dt+kt]+256-(g[dt+kt-ot]+g[dt+kt-ut]>>1)&255}if(ct==4){for(var kt=0;kt<ut;kt++)it[ft+kt]=g[dt+kt]+256-St(0,g[dt+kt-ot],0)&255;for(var kt=ut;kt<ot;kt++)it[ft+kt]=g[dt+kt]+256-St(g[dt+kt-ut],g[dt+kt-ot],g[dt+kt-ut-ot])&255}}};UPNG.crc={table:function(){for(var it=new Uint32Array(256),g=0;g<256;g++){for(var et=g,ot=0;ot<8;ot++)et&1?et=3988292384^et>>>1:et=et>>>1;it[g]=et}return it}(),update:function(it,g,et,ot){for(var ut=0;ut<ot;ut++)it=UPNG.crc.table[(it^g[et+ut])&255]^it>>>8;return it},crc:function(it,g,et){return UPNG.crc.update(4294967295,it,g,et)^4294967295}};UPNG.quantize=function(it,g){var et=new Uint8Array(it),ot=et.slice(0),ut=new Uint32Array(ot.buffer),ct=UPNG.quantize.getKDtree(ot,g),dt=ct[0],ft=ct[1];UPNG.quantize.planeDst;for(var St=et,kt=ut,Tt=St.length,Rt=new Uint8Array(et.length>>2),Ft=0;Ft<Tt;Ft+=4){var jt=St[Ft]*.00392156862745098,Bt=St[Ft+1]*(1/255),zt=St[Ft+2]*(1/255),Ht=St[Ft+3]*(1/255),Ut=UPNG.quantize.getNearest(dt,jt,Bt,zt,Ht);Rt[Ft>>2]=Ut.ind,kt[Ft>>2]=Ut.est.rgba}return{abuf:ot.buffer,inds:Rt,plte:ft}};UPNG.quantize.getKDtree=function(it,g,et){et==null&&(et=1e-4);var ot=new Uint32Array(it.buffer),ut={i0:0,i1:it.length,bst:null,est:null,tdst:0,left:null,right:null};ut.bst=UPNG.quantize.stats(it,ut.i0,ut.i1),ut.est=UPNG.quantize.estats(ut.bst);for(var ct=[ut];ct.length<g;){for(var dt=0,ft=0,St=0;St<ct.length;St++)ct[St].est.L>dt&&(dt=ct[St].est.L,ft=St);if(dt<et)break;var kt=ct[ft],Tt=UPNG.quantize.splitPixels(it,ot,kt.i0,kt.i1,kt.est.e,kt.est.eMq255),Rt=kt.i0>=Tt||kt.i1<=Tt;if(Rt){kt.est.L=0;continue}var Ft={i0:kt.i0,i1:Tt,bst:null,est:null,tdst:0,left:null,right:null};Ft.bst=UPNG.quantize.stats(it,Ft.i0,Ft.i1),Ft.est=UPNG.quantize.estats(Ft.bst);var jt={i0:Tt,i1:kt.i1,bst:null,est:null,tdst:0,left:null,right:null};jt.bst={R:[],m:[],N:kt.bst.N-Ft.bst.N};for(var St=0;St<16;St++)jt.bst.R[St]=kt.bst.R[St]-Ft.bst.R[St];for(var St=0;St<4;St++)jt.bst.m[St]=kt.bst.m[St]-Ft.bst.m[St];jt.est=UPNG.quantize.estats(jt.bst),kt.left=Ft,kt.right=jt,ct[ft]=Ft,ct.push(jt)}ct.sort(function(Bt,zt){return zt.bst.N-Bt.bst.N});for(var St=0;St<ct.length;St++)ct[St].ind=St;return[ut,ct]};UPNG.quantize.getNearest=function(it,g,et,ot,ut){if(it.left==null)return it.tdst=UPNG.quantize.dist(it.est.q,g,et,ot,ut),it;var ct=UPNG.quantize.planeDst(it.est,g,et,ot,ut),dt=it.left,ft=it.right;ct>0&&(dt=it.right,ft=it.left);var St=UPNG.quantize.getNearest(dt,g,et,ot,ut);if(St.tdst<=ct*ct)return St;var kt=UPNG.quantize.getNearest(ft,g,et,ot,ut);return kt.tdst<St.tdst?kt:St};UPNG.quantize.planeDst=function(it,g,et,ot,ut){var ct=it.e;return ct[0]*g+ct[1]*et+ct[2]*ot+ct[3]*ut-it.eMq};UPNG.quantize.dist=function(it,g,et,ot,ut){var ct=g-it[0],dt=et-it[1],ft=ot-it[2],St=ut-it[3];return ct*ct+dt*dt+ft*ft+St*St};UPNG.quantize.splitPixels=function(it,g,et,ot,ut,ct){var dt=UPNG.quantize.vecDot;for(ot-=4;et<ot;){for(;dt(it,et,ut)<=ct;)et+=4;for(;dt(it,ot,ut)>ct;)ot-=4;if(et>=ot)break;var ft=g[et>>2];g[et>>2]=g[ot>>2],g[ot>>2]=ft,et+=4,ot-=4}for(;dt(it,et,ut)>ct;)et-=4;return et+4};UPNG.quantize.vecDot=function(it,g,et){return it[g]*et[0]+it[g+1]*et[1]+it[g+2]*et[2]+it[g+3]*et[3]};UPNG.quantize.stats=function(it,g,et){for(var ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ut=[0,0,0,0],ct=et-g>>2,dt=g;dt<et;dt+=4){var ft=it[dt]*.00392156862745098,St=it[dt+1]*(1/255),kt=it[dt+2]*(1/255),Tt=it[dt+3]*(1/255);ut[0]+=ft,ut[1]+=St,ut[2]+=kt,ut[3]+=Tt,ot[0]+=ft*ft,ot[1]+=ft*St,ot[2]+=ft*kt,ot[3]+=ft*Tt,ot[5]+=St*St,ot[6]+=St*kt,ot[7]+=St*Tt,ot[10]+=kt*kt,ot[11]+=kt*Tt,ot[15]+=Tt*Tt}return ot[4]=ot[1],ot[8]=ot[2],ot[9]=ot[6],ot[12]=ot[3],ot[13]=ot[7],ot[14]=ot[11],{R:ot,m:ut,N:ct}};UPNG.quantize.estats=function(it){var g=it.R,et=it.m,ot=it.N,ut=et[0],ct=et[1],dt=et[2],ft=et[3],St=ot==0?0:1/ot,kt=[g[0]-ut*ut*St,g[1]-ut*ct*St,g[2]-ut*dt*St,g[3]-ut*ft*St,g[4]-ct*ut*St,g[5]-ct*ct*St,g[6]-ct*dt*St,g[7]-ct*ft*St,g[8]-dt*ut*St,g[9]-dt*ct*St,g[10]-dt*dt*St,g[11]-dt*ft*St,g[12]-ft*ut*St,g[13]-ft*ct*St,g[14]-ft*dt*St,g[15]-ft*ft*St],Tt=kt,Rt=UPNG.M4,Ft=[.5,.5,.5,.5],jt=0,Bt=0;if(ot!=0)for(var zt=0;zt<10&&(Ft=Rt.multVec(Tt,Ft),Bt=Math.sqrt(Rt.dot(Ft,Ft)),Ft=Rt.sml(1/Bt,Ft),!(Math.abs(Bt-jt)<1e-9));zt++)jt=Bt;var Ht=[ut*St,ct*St,dt*St,ft*St],Ut=Rt.dot(Rt.sml(255,Ht),Ft);return{Cov:kt,q:Ht,e:Ft,L:jt,eMq255:Ut,eMq:Rt.dot(Ft,Ht),rgba:(Math.round(255*Ht[3])<<24|Math.round(255*Ht[2])<<16|Math.round(255*Ht[1])<<8|Math.round(255*Ht[0])<<0)>>>0}};UPNG.M4={multVec:function(it,g){return[it[0]*g[0]+it[1]*g[1]+it[2]*g[2]+it[3]*g[3],it[4]*g[0]+it[5]*g[1]+it[6]*g[2]+it[7]*g[3],it[8]*g[0]+it[9]*g[1]+it[10]*g[2]+it[11]*g[3],it[12]*g[0]+it[13]*g[1]+it[14]*g[2]+it[15]*g[3]]},dot:function(it,g){return it[0]*g[0]+it[1]*g[1]+it[2]*g[2]+it[3]*g[3]},sml:function(it,g){return[it*g[0],it*g[1],it*g[2],it*g[3]]}};UPNG.encode.concatRGBA=function(it){for(var g=0,et=0;et<it.length;et++)g+=it[et].byteLength;for(var ot=new Uint8Array(g),ut=0,et=0;et<it.length;et++){for(var ct=new Uint8Array(it[et]),dt=ct.length,ft=0;ft<dt;ft+=4){var St=ct[ft],kt=ct[ft+1],Tt=ct[ft+2],Rt=ct[ft+3];Rt==0&&(St=kt=Tt=0),ot[ut+ft]=St,ot[ut+ft+1]=kt,ot[ut+ft+2]=Tt,ot[ut+ft+3]=Rt}ut+=dt}return ot.buffer};var getImageType=function(it){if(it===0)return PngType.Greyscale;if(it===2)return PngType.Truecolour;if(it===3)return PngType.IndexedColour;if(it===4)return PngType.GreyscaleWithAlpha;if(it===6)return PngType.TruecolourWithAlpha;throw new Error("Unknown color type: "+it)},splitAlphaChannel=function(it){for(var g=Math.floor(it.length/4),et=new Uint8Array(g*3),ot=new Uint8Array(g*1),ut=0,ct=0,dt=0;ut<it.length;)et[ct++]=it[ut++],et[ct++]=it[ut++],et[ct++]=it[ut++],ot[dt++]=it[ut++];return{rgbChannel:et,alphaChannel:ot}},PngType;(function(it){it.Greyscale="Greyscale",it.Truecolour="Truecolour",it.IndexedColour="IndexedColour",it.GreyscaleWithAlpha="GreyscaleWithAlpha",it.TruecolourWithAlpha="TruecolourWithAlpha"})(PngType||(PngType={}));var PNG=function(){function it(g){var et=UPNG.decode(g),ot=UPNG.toRGBA8(et);if(ot.length>1)throw new Error("Animated PNGs are not supported");var ut=new Uint8Array(ot[0]),ct=splitAlphaChannel(ut),dt=ct.rgbChannel,ft=ct.alphaChannel;this.rgbChannel=dt;var St=ft.some(function(kt){return kt<255});St&&(this.alphaChannel=ft),this.type=getImageType(et.ctype),this.width=et.width,this.height=et.height,this.bitsPerComponent=8}return it.load=function(g){return new it(g)},it}(),PngEmbedder=function(){function it(g){this.image=g,this.bitsPerComponent=g.bitsPerComponent,this.width=g.width,this.height=g.height,this.colorSpace="DeviceRGB"}return it.for=function(g){return __awaiter(this,void 0,void 0,function(){var et;return __generator(this,function(ot){return et=PNG.load(g),[2,new it(et)]})})},it.prototype.embedIntoContext=function(g,et){return __awaiter(this,void 0,void 0,function(){var ot,ut;return __generator(this,function(ct){return ot=this.embedAlphaChannel(g),ut=g.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:ot}),et?(g.assign(et,ut),[2,et]):[2,g.register(ut)]})})},it.prototype.embedAlphaChannel=function(g){if(this.image.alphaChannel){var et=g.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return g.register(et)}},it}(),Stream=function(){function it(g,et,ot){this.bytes=g,this.start=et||0,this.pos=this.start,this.end=et&&ot?et+ot:this.bytes.length}return Object.defineProperty(it.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(it.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),it.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},it.prototype.getUint16=function(){var g=this.getByte(),et=this.getByte();return g===-1||et===-1?-1:(g<<8)+et},it.prototype.getInt32=function(){var g=this.getByte(),et=this.getByte(),ot=this.getByte(),ut=this.getByte();return(g<<24)+(et<<16)+(ot<<8)+ut},it.prototype.getBytes=function(g,et){et===void 0&&(et=!1);var ot=this.bytes,ut=this.pos,ct=this.end;if(g){var ft=ut+g;ft>ct&&(ft=ct),this.pos=ft;var dt=ot.subarray(ut,ft);return et?new Uint8ClampedArray(dt):dt}else{var dt=ot.subarray(ut,ct);return et?new Uint8ClampedArray(dt):dt}},it.prototype.peekByte=function(){var g=this.getByte();return this.pos--,g},it.prototype.peekBytes=function(g,et){et===void 0&&(et=!1);var ot=this.getBytes(g,et);return this.pos-=ot.length,ot},it.prototype.skip=function(g){g||(g=1),this.pos+=g},it.prototype.reset=function(){this.pos=this.start},it.prototype.moveStart=function(){this.start=this.pos},it.prototype.makeSubStream=function(g,et){return new it(this.bytes,g,et)},it.prototype.decode=function(){return this.bytes},it}(),emptyBuffer=new Uint8Array(0),DecodeStream=function(){function it(g){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=emptyBuffer,this.minBufferLength=512,g)for(;this.minBufferLength<g;)this.minBufferLength*=2}return Object.defineProperty(it.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),it.prototype.getByte=function(){for(var g=this.pos;this.bufferLength<=g;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},it.prototype.getUint16=function(){var g=this.getByte(),et=this.getByte();return g===-1||et===-1?-1:(g<<8)+et},it.prototype.getInt32=function(){var g=this.getByte(),et=this.getByte(),ot=this.getByte(),ut=this.getByte();return(g<<24)+(et<<16)+(ot<<8)+ut},it.prototype.getBytes=function(g,et){et===void 0&&(et=!1);var ot,ut=this.pos;if(g){for(this.ensureBuffer(ut+g),ot=ut+g;!this.eof&&this.bufferLength<ot;)this.readBlock();var ct=this.bufferLength;ot>ct&&(ot=ct)}else{for(;!this.eof;)this.readBlock();ot=this.bufferLength}this.pos=ot;var dt=this.buffer.subarray(ut,ot);return et&&!(dt instanceof Uint8ClampedArray)?new Uint8ClampedArray(dt):dt},it.prototype.peekByte=function(){var g=this.getByte();return this.pos--,g},it.prototype.peekBytes=function(g,et){et===void 0&&(et=!1);var ot=this.getBytes(g,et);return this.pos-=ot.length,ot},it.prototype.skip=function(g){g||(g=1),this.pos+=g},it.prototype.reset=function(){this.pos=0},it.prototype.makeSubStream=function(g,et){for(var ot=g+et;this.bufferLength<=ot&&!this.eof;)this.readBlock();return new Stream(this.buffer,g,et)},it.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},it.prototype.readBlock=function(){throw new MethodNotImplementedError(this.constructor.name,"readBlock")},it.prototype.ensureBuffer=function(g){var et=this.buffer;if(g<=et.byteLength)return et;for(var ot=this.minBufferLength;ot<g;)ot*=2;var ut=new Uint8Array(ot);return ut.set(et),this.buffer=ut},it}(),isSpace=function(it){return it===32||it===9||it===13||it===10},Ascii85Stream=function(it){__extends(g,it);function g(et,ot){var ut=it.call(this,ot)||this;return ut.stream=et,ut.input=new Uint8Array(5),ot&&(ot=.8*ot),ut}return g.prototype.readBlock=function(){for(var et=126,ot=122,ut=-1,ct=this.stream,dt=ct.getByte();isSpace(dt);)dt=ct.getByte();if(dt===ut||dt===et){this.eof=!0;return}var ft=this.bufferLength,St,kt;if(dt===ot){for(St=this.ensureBuffer(ft+4),kt=0;kt<4;++kt)St[ft+kt]=0;this.bufferLength+=4}else{var Tt=this.input;for(Tt[0]=dt,kt=1;kt<5;++kt){for(dt=ct.getByte();isSpace(dt);)dt=ct.getByte();if(Tt[kt]=dt,dt===ut||dt===et)break}if(St=this.ensureBuffer(ft+kt-1),this.bufferLength+=kt-1,kt<5){for(;kt<5;++kt)Tt[kt]=33+84;this.eof=!0}var Rt=0;for(kt=0;kt<5;++kt)Rt=Rt*85+(Tt[kt]-33);for(kt=3;kt>=0;--kt)St[ft+kt]=Rt&255,Rt>>=8}},g}(DecodeStream),AsciiHexStream=function(it){__extends(g,it);function g(et,ot){var ut=it.call(this,ot)||this;return ut.stream=et,ut.firstDigit=-1,ot&&(ot=.5*ot),ut}return g.prototype.readBlock=function(){var et=8e3,ot=this.stream.getBytes(et);if(!ot.length){this.eof=!0;return}for(var ut=ot.length+1>>1,ct=this.ensureBuffer(this.bufferLength+ut),dt=this.bufferLength,ft=this.firstDigit,St=0,kt=ot.length;St<kt;St++){var Tt=ot[St],Rt=void 0;if(Tt>=48&&Tt<=57)Rt=Tt&15;else if(Tt>=65&&Tt<=70||Tt>=97&&Tt<=102)Rt=(Tt&15)+9;else if(Tt===62){this.eof=!0;break}else continue;ft<0?ft=Rt:(ct[dt++]=ft<<4|Rt,ft=-1)}ft>=0&&this.eof&&(ct[dt++]=ft<<4,ft=-1),this.firstDigit=ft,this.bufferLength=dt},g}(DecodeStream),codeLenCodeMap=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lengthDecode=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),distDecode=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),fixedLitCodeTab=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],fixedDistCodeTab=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],FlateStream=function(it){__extends(g,it);function g(et,ot){var ut=it.call(this,ot)||this;ut.stream=et;var ct=et.getByte(),dt=et.getByte();if(ct===-1||dt===-1)throw new Error("Invalid header in flate stream: "+ct+", "+dt);if((ct&15)!==8)throw new Error("Unknown compression method in flate stream: "+ct+", "+dt);if(((ct<<8)+dt)%31!==0)throw new Error("Bad FCHECK in flate stream: "+ct+", "+dt);if(dt&32)throw new Error("FDICT bit set in flate stream: "+ct+", "+dt);return ut.codeSize=0,ut.codeBuf=0,ut}return g.prototype.readBlock=function(){var et,ot,ut=this.stream,ct=this.getBits(3);if(ct&1&&(this.eof=!0),ct>>=1,ct===0){var dt=void 0;if((dt=ut.getByte())===-1)throw new Error("Bad block header in flate stream");var ft=dt;if((dt=ut.getByte())===-1)throw new Error("Bad block header in flate stream");if(ft|=dt<<8,(dt=ut.getByte())===-1)throw new Error("Bad block header in flate stream");var St=dt;if((dt=ut.getByte())===-1)throw new Error("Bad block header in flate stream");if(St|=dt<<8,St!==(~ft&65535)&&(ft!==0||St!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var kt=this.bufferLength;et=this.ensureBuffer(kt+ft);var Tt=kt+ft;if(this.bufferLength=Tt,ft===0)ut.peekByte()===-1&&(this.eof=!0);else for(var Rt=kt;Rt<Tt;++Rt){if((dt=ut.getByte())===-1){this.eof=!0;break}et[Rt]=dt}return}var Ft,jt;if(ct===1)Ft=fixedLitCodeTab,jt=fixedDistCodeTab;else if(ct===2){var Bt=this.getBits(5)+257,zt=this.getBits(5)+1,Ht=this.getBits(4)+4,Ut=new Uint8Array(codeLenCodeMap.length),Kt=void 0;for(Kt=0;Kt<Ht;++Kt)Ut[codeLenCodeMap[Kt]]=this.getBits(3);var Yt=this.generateHuffmanTable(Ut);ot=0,Kt=0;for(var er=Bt+zt,ar=new Uint8Array(er),ir=void 0,lr=void 0,cr=void 0;Kt<er;){var vr=this.getCode(Yt);if(vr===16)ir=2,lr=3,cr=ot;else if(vr===17)ir=3,lr=3,cr=ot=0;else if(vr===18)ir=7,lr=11,cr=ot=0;else{ar[Kt++]=ot=vr;continue}for(var xr=this.getBits(ir)+lr;xr-- >0;)ar[Kt++]=cr}Ft=this.generateHuffmanTable(ar.subarray(0,Bt)),jt=this.generateHuffmanTable(ar.subarray(Bt,er))}else throw new Error("Unknown block type in flate stream");et=this.buffer;for(var yr=et?et.length:0,Sr=this.bufferLength;;){var kr=this.getCode(Ft);if(kr<256){Sr+1>=yr&&(et=this.ensureBuffer(Sr+1),yr=et.length),et[Sr++]=kr;continue}if(kr===256){this.bufferLength=Sr;return}kr-=257,kr=lengthDecode[kr];var Pr=kr>>16;Pr>0&&(Pr=this.getBits(Pr)),ot=(kr&65535)+Pr,kr=this.getCode(jt),kr=distDecode[kr],Pr=kr>>16,Pr>0&&(Pr=this.getBits(Pr));var Or=(kr&65535)+Pr;Sr+ot>=yr&&(et=this.ensureBuffer(Sr+ot),yr=et.length);for(var hr=0;hr<ot;++hr,++Sr)et[Sr]=et[Sr-Or]}},g.prototype.getBits=function(et){for(var ot=this.stream,ut=this.codeSize,ct=this.codeBuf,dt;ut<et;){if((dt=ot.getByte())===-1)throw new Error("Bad encoding in flate stream");ct|=dt<<ut,ut+=8}return dt=ct&(1<<et)-1,this.codeBuf=ct>>et,this.codeSize=ut-=et,dt},g.prototype.getCode=function(et){for(var ot=this.stream,ut=et[0],ct=et[1],dt=this.codeSize,ft=this.codeBuf,St;dt<ct&&(St=ot.getByte())!==-1;)ft|=St<<dt,dt+=8;var kt=ut[ft&(1<<ct)-1];typeof ut=="number"&&console.log("FLATE:",kt);var Tt=kt>>16,Rt=kt&65535;if(Tt<1||dt<Tt)throw new Error("Bad encoding in flate stream");return this.codeBuf=ft>>Tt,this.codeSize=dt-Tt,Rt},g.prototype.generateHuffmanTable=function(et){var ot=et.length,ut=0,ct;for(ct=0;ct<ot;++ct)et[ct]>ut&&(ut=et[ct]);for(var dt=1<<ut,ft=new Int32Array(dt),St=1,kt=0,Tt=2;St<=ut;++St,kt<<=1,Tt<<=1)for(var Rt=0;Rt<ot;++Rt)if(et[Rt]===St){var Ft=0,jt=kt;for(ct=0;ct<St;++ct)Ft=Ft<<1|jt&1,jt>>=1;for(ct=Ft;ct<dt;ct+=Tt)ft[ct]=St<<16|Rt;++kt}return[ft,ut]},g}(DecodeStream),LZWStream=function(it){__extends(g,it);function g(et,ot,ut){var ct=it.call(this,ot)||this;ct.stream=et,ct.cachedData=0,ct.bitsCached=0;for(var dt=4096,ft={earlyChange:ut,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(dt),dictionaryLengths:new Uint16Array(dt),dictionaryPrevCodes:new Uint16Array(dt),currentSequence:new Uint8Array(dt),currentSequenceLength:0},St=0;St<256;++St)ft.dictionaryValues[St]=St,ft.dictionaryLengths[St]=1;return ct.lzwState=ft,ct}return g.prototype.readBlock=function(){var et=512,ot=et*2,ut=et,ct,dt,ft,St=this.lzwState;if(St){var kt=St.earlyChange,Tt=St.nextCode,Rt=St.dictionaryValues,Ft=St.dictionaryLengths,jt=St.dictionaryPrevCodes,Bt=St.codeLength,zt=St.prevCode,Ht=St.currentSequence,Ut=St.currentSequenceLength,Kt=0,Yt=this.bufferLength,er=this.ensureBuffer(this.bufferLength+ot);for(ct=0;ct<et;ct++){var ar=this.readBits(Bt),ir=Ut>0;if(!ar||ar<256)Ht[0]=ar,Ut=1;else if(ar>=258)if(ar<Tt)for(Ut=Ft[ar],dt=Ut-1,ft=ar;dt>=0;dt--)Ht[dt]=Rt[ft],ft=jt[ft];else Ht[Ut++]=Ht[0];else if(ar===256){Bt=9,Tt=258,Ut=0;continue}else{this.eof=!0,delete this.lzwState;break}if(ir&&(jt[Tt]=zt,Ft[Tt]=Ft[zt]+1,Rt[Tt]=Ht[0],Tt++,Bt=Tt+kt&Tt+kt-1?Bt:Math.min(Math.log(Tt+kt)/.6931471805599453+1,12)|0),zt=ar,Kt+=Ut,ot<Kt){do ot+=ut;while(ot<Kt);er=this.ensureBuffer(this.bufferLength+ot)}for(dt=0;dt<Ut;dt++)er[Yt++]=Ht[dt]}St.nextCode=Tt,St.codeLength=Bt,St.prevCode=zt,St.currentSequenceLength=Ut,this.bufferLength=Yt}},g.prototype.readBits=function(et){for(var ot=this.bitsCached,ut=this.cachedData;ot<et;){var ct=this.stream.getByte();if(ct===-1)return this.eof=!0,null;ut=ut<<8|ct,ot+=8}return this.bitsCached=ot-=et,this.cachedData=ut,ut>>>ot&(1<<et)-1},g}(DecodeStream),RunLengthStream=function(it){__extends(g,it);function g(et,ot){var ut=it.call(this,ot)||this;return ut.stream=et,ut}return g.prototype.readBlock=function(){var et=this.stream.getBytes(2);if(!et||et.length<2||et[0]===128){this.eof=!0;return}var ot,ut=this.bufferLength,ct=et[0];if(ct<128){if(ot=this.ensureBuffer(ut+ct+1),ot[ut++]=et[1],ct>0){var dt=this.stream.getBytes(ct);ot.set(dt,ut),ut+=ct}}else{ct=257-ct;var ft=et[1];ot=this.ensureBuffer(ut+ct+1);for(var St=0;St<ct;St++)ot[ut++]=ft}this.bufferLength=ut},g}(DecodeStream),decodeStream=function(it,g,et){if(g===PDFName.of("FlateDecode"))return new FlateStream(it);if(g===PDFName.of("LZWDecode")){var ot=1;if(et instanceof PDFDict){var ut=et.lookup(PDFName.of("EarlyChange"));ut instanceof PDFNumber&&(ot=ut.asNumber())}return new LZWStream(it,void 0,ot)}if(g===PDFName.of("ASCII85Decode"))return new Ascii85Stream(it);if(g===PDFName.of("ASCIIHexDecode"))return new AsciiHexStream(it);if(g===PDFName.of("RunLengthDecode"))return new RunLengthStream(it);throw new UnsupportedEncodingError(g.asString())},decodePDFRawStream=function(it){var g=it.dict,et=it.contents,ot=new Stream(et),ut=g.lookup(PDFName.of("Filter")),ct=g.lookup(PDFName.of("DecodeParms"));if(ut instanceof PDFName)ot=decodeStream(ot,ut,ct);else if(ut instanceof PDFArray)for(var dt=0,ft=ut.size();dt<ft;dt++)ot=decodeStream(ot,ut.lookup(dt,PDFName),ct&&ct.lookupMaybe(dt,PDFDict));else if(ut)throw new UnexpectedObjectTypeError([PDFName,PDFArray],ut);return ot},fullPageBoundingBox=function(it){var g=it.MediaBox(),et=g.lookup(2,PDFNumber).asNumber()-g.lookup(0,PDFNumber).asNumber(),ot=g.lookup(3,PDFNumber).asNumber()-g.lookup(1,PDFNumber).asNumber();return{left:0,bottom:0,right:et,top:ot}},boundingBoxAdjustedMatrix=function(it){return[1,0,0,1,-it.left,-it.bottom]},PDFPageEmbedder=function(){function it(g,et,ot){this.page=g;var ut=et??fullPageBoundingBox(g);this.width=ut.right-ut.left,this.height=ut.top-ut.bottom,this.boundingBox=ut,this.transformationMatrix=ot??boundingBoxAdjustedMatrix(ut)}return it.for=function(g,et,ot){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(ut){return[2,new it(g,et,ot)]})})},it.prototype.embedIntoContext=function(g,et){return __awaiter(this,void 0,void 0,function(){var ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft;return __generator(this,function(jt){if(ot=this.page.normalizedEntries(),ut=ot.Contents,ct=ot.Resources,!ut)throw new MissingPageContentsEmbeddingError;return dt=this.decodeContents(ut),ft=this.boundingBox,St=ft.left,kt=ft.bottom,Tt=ft.right,Rt=ft.top,Ft=g.flateStream(dt,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[St,kt,Tt,Rt],Matrix:this.transformationMatrix,Resources:ct}),et?(g.assign(et,Ft),[2,et]):[2,g.register(Ft)]})})},it.prototype.decodeContents=function(g){for(var et=Uint8Array.of(CharCodes$1.Newline),ot=[],ut=0,ct=g.size();ut<ct;ut++){var dt=g.lookup(ut,PDFStream),ft=void 0;if(dt instanceof PDFRawStream)ft=decodePDFRawStream(dt).decode();else if(dt instanceof PDFContentStream)ft=dt.getUnencodedContents();else throw new UnrecognizedStreamTypeError(dt);ot.push(ft,et)}return mergeIntoTypedArray.apply(void 0,ot)},it}(),asEnum=function(it,g){if(it!==void 0)return g[it]},NonFullScreenPageMode;(function(it){it.UseNone="UseNone",it.UseOutlines="UseOutlines",it.UseThumbs="UseThumbs",it.UseOC="UseOC"})(NonFullScreenPageMode||(NonFullScreenPageMode={}));var ReadingDirection;(function(it){it.L2R="L2R",it.R2L="R2L"})(ReadingDirection||(ReadingDirection={}));var PrintScaling;(function(it){it.None="None",it.AppDefault="AppDefault"})(PrintScaling||(PrintScaling={}));var Duplex;(function(it){it.Simplex="Simplex",it.DuplexFlipShortEdge="DuplexFlipShortEdge",it.DuplexFlipLongEdge="DuplexFlipLongEdge"})(Duplex||(Duplex={}));var ViewerPreferences=function(){function it(g){this.dict=g}return it.prototype.lookupBool=function(g){var et=this.dict.lookup(PDFName.of(g));if(et instanceof PDFBool)return et},it.prototype.lookupName=function(g){var et=this.dict.lookup(PDFName.of(g));if(et instanceof PDFName)return et},it.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},it.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},it.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},it.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},it.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},it.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},it.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},it.prototype.Direction=function(){return this.lookupName("Direction")},it.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},it.prototype.Duplex=function(){return this.lookupName("Duplex")},it.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},it.prototype.PrintPageRange=function(){var g=this.dict.lookup(PDFName.of("PrintPageRange"));if(g instanceof PDFArray)return g},it.prototype.NumCopies=function(){var g=this.dict.lookup(PDFName.of("NumCopies"));if(g instanceof PDFNumber)return g},it.prototype.getHideToolbar=function(){var g,et;return(et=(g=this.HideToolbar())===null||g===void 0?void 0:g.asBoolean())!==null&&et!==void 0?et:!1},it.prototype.getHideMenubar=function(){var g,et;return(et=(g=this.HideMenubar())===null||g===void 0?void 0:g.asBoolean())!==null&&et!==void 0?et:!1},it.prototype.getHideWindowUI=function(){var g,et;return(et=(g=this.HideWindowUI())===null||g===void 0?void 0:g.asBoolean())!==null&&et!==void 0?et:!1},it.prototype.getFitWindow=function(){var g,et;return(et=(g=this.FitWindow())===null||g===void 0?void 0:g.asBoolean())!==null&&et!==void 0?et:!1},it.prototype.getCenterWindow=function(){var g,et;return(et=(g=this.CenterWindow())===null||g===void 0?void 0:g.asBoolean())!==null&&et!==void 0?et:!1},it.prototype.getDisplayDocTitle=function(){var g,et;return(et=(g=this.DisplayDocTitle())===null||g===void 0?void 0:g.asBoolean())!==null&&et!==void 0?et:!1},it.prototype.getNonFullScreenPageMode=function(){var g,et,ot=(g=this.NonFullScreenPageMode())===null||g===void 0?void 0:g.decodeText();return(et=asEnum(ot,NonFullScreenPageMode))!==null&&et!==void 0?et:NonFullScreenPageMode.UseNone},it.prototype.getReadingDirection=function(){var g,et,ot=(g=this.Direction())===null||g===void 0?void 0:g.decodeText();return(et=asEnum(ot,ReadingDirection))!==null&&et!==void 0?et:ReadingDirection.L2R},it.prototype.getPrintScaling=function(){var g,et,ot=(g=this.PrintScaling())===null||g===void 0?void 0:g.decodeText();return(et=asEnum(ot,PrintScaling))!==null&&et!==void 0?et:PrintScaling.AppDefault},it.prototype.getDuplex=function(){var g,et=(g=this.Duplex())===null||g===void 0?void 0:g.decodeText();return asEnum(et,Duplex)},it.prototype.getPickTrayByPDFSize=function(){var g;return(g=this.PickTrayByPDFSize())===null||g===void 0?void 0:g.asBoolean()},it.prototype.getPrintPageRange=function(){var g=this.PrintPageRange();if(!g)return[];for(var et=[],ot=0;ot<g.size();ot+=2){var ut=g.lookup(ot,PDFNumber).asNumber(),ct=g.lookup(ot+1,PDFNumber).asNumber();et.push({start:ut,end:ct})}return et},it.prototype.getNumCopies=function(){var g,et;return(et=(g=this.NumCopies())===null||g===void 0?void 0:g.asNumber())!==null&&et!==void 0?et:1},it.prototype.setHideToolbar=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("HideToolbar"),et)},it.prototype.setHideMenubar=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("HideMenubar"),et)},it.prototype.setHideWindowUI=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("HideWindowUI"),et)},it.prototype.setFitWindow=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("FitWindow"),et)},it.prototype.setCenterWindow=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("CenterWindow"),et)},it.prototype.setDisplayDocTitle=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("DisplayDocTitle"),et)},it.prototype.setNonFullScreenPageMode=function(g){assertIsOneOf(g,"nonFullScreenPageMode",NonFullScreenPageMode);var et=PDFName.of(g);this.dict.set(PDFName.of("NonFullScreenPageMode"),et)},it.prototype.setReadingDirection=function(g){assertIsOneOf(g,"readingDirection",ReadingDirection);var et=PDFName.of(g);this.dict.set(PDFName.of("Direction"),et)},it.prototype.setPrintScaling=function(g){assertIsOneOf(g,"printScaling",PrintScaling);var et=PDFName.of(g);this.dict.set(PDFName.of("PrintScaling"),et)},it.prototype.setDuplex=function(g){assertIsOneOf(g,"duplex",Duplex);var et=PDFName.of(g);this.dict.set(PDFName.of("Duplex"),et)},it.prototype.setPickTrayByPDFSize=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("PickTrayByPDFSize"),et)},it.prototype.setPrintPageRange=function(g){Array.isArray(g)||(g=[g]);for(var et=[],ot=0,ut=g.length;ot<ut;ot++)et.push(g[ot].start),et.push(g[ot].end);assertEachIs(et,"printPageRange",["number"]);var ct=this.dict.context.obj(et);this.dict.set(PDFName.of("PrintPageRange"),ct)},it.prototype.setNumCopies=function(g){assertRange(g,"numCopies",1,Number.MAX_VALUE),assertInteger(g,"numCopies");var et=this.dict.context.obj(g);this.dict.set(PDFName.of("NumCopies"),et)},it.fromDict=function(g){return new it(g)},it.create=function(g){var et=g.obj({});return new it(et)},it}(),tfRegex$1=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,PDFAcroField=function(){function it(g,et){this.dict=g,this.ref=et}return it.prototype.T=function(){return this.dict.lookupMaybe(PDFName.of("T"),PDFString,PDFHexString)},it.prototype.Ff=function(){var g=this.getInheritableAttribute(PDFName.of("Ff"));return this.dict.context.lookupMaybe(g,PDFNumber)},it.prototype.V=function(){var g=this.getInheritableAttribute(PDFName.of("V"));return this.dict.context.lookup(g)},it.prototype.Kids=function(){return this.dict.lookupMaybe(PDFName.of("Kids"),PDFArray)},it.prototype.DA=function(){var g=this.dict.lookup(PDFName.of("DA"));if(g instanceof PDFString||g instanceof PDFHexString)return g},it.prototype.setKids=function(g){this.dict.set(PDFName.of("Kids"),this.dict.context.obj(g))},it.prototype.getParent=function(){var g=this.dict.get(PDFName.of("Parent"));if(g instanceof PDFRef){var et=this.dict.lookup(PDFName.of("Parent"),PDFDict);return new it(et,g)}},it.prototype.setParent=function(g){g?this.dict.set(PDFName.of("Parent"),g):this.dict.delete(PDFName.of("Parent"))},it.prototype.getFullyQualifiedName=function(){var g=this.getParent();return g?g.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},it.prototype.getPartialName=function(){var g;return(g=this.T())===null||g===void 0?void 0:g.decodeText()},it.prototype.setPartialName=function(g){g?this.dict.set(PDFName.of("T"),PDFHexString.fromText(g)):this.dict.delete(PDFName.of("T"))},it.prototype.setDefaultAppearance=function(g){this.dict.set(PDFName.of("DA"),PDFString.of(g))},it.prototype.getDefaultAppearance=function(){var g=this.DA();return g instanceof PDFHexString?g.decodeText():g==null?void 0:g.asString()},it.prototype.setFontSize=function(g){var et,ot=(et=this.getFullyQualifiedName())!==null&&et!==void 0?et:"",ut=this.getDefaultAppearance();if(!ut)throw new MissingDAEntryError(ot);var ct=findLastMatch(ut,tfRegex$1);if(!ct.match)throw new MissingTfOperatorError(ot);var dt=ut.slice(0,ct.pos-ct.match[0].length),ft=ct.pos<=ut.length?ut.slice(ct.pos):"",St=ct.match[1],kt=dt+" /"+St+" "+g+" Tf "+ft;this.setDefaultAppearance(kt)},it.prototype.getFlags=function(){var g,et;return(et=(g=this.Ff())===null||g===void 0?void 0:g.asNumber())!==null&&et!==void 0?et:0},it.prototype.setFlags=function(g){this.dict.set(PDFName.of("Ff"),PDFNumber.of(g))},it.prototype.hasFlag=function(g){var et=this.getFlags();return(et&g)!==0},it.prototype.setFlag=function(g){var et=this.getFlags();this.setFlags(et|g)},it.prototype.clearFlag=function(g){var et=this.getFlags();this.setFlags(et&~g)},it.prototype.setFlagTo=function(g,et){et?this.setFlag(g):this.clearFlag(g)},it.prototype.getInheritableAttribute=function(g){var et;return this.ascend(function(ot){et||(et=ot.dict.get(g))}),et},it.prototype.ascend=function(g){g(this);var et=this.getParent();et&&et.ascend(g)},it}(),BorderStyle=function(){function it(g){this.dict=g}return it.prototype.W=function(){var g=this.dict.lookup(PDFName.of("W"));if(g instanceof PDFNumber)return g},it.prototype.getWidth=function(){var g,et;return(et=(g=this.W())===null||g===void 0?void 0:g.asNumber())!==null&&et!==void 0?et:1},it.prototype.setWidth=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("W"),et)},it.fromDict=function(g){return new it(g)},it}(),PDFAnnotation=function(){function it(g){this.dict=g}return it.prototype.Rect=function(){return this.dict.lookup(PDFName.of("Rect"),PDFArray)},it.prototype.AP=function(){return this.dict.lookupMaybe(PDFName.of("AP"),PDFDict)},it.prototype.F=function(){var g=this.dict.lookup(PDFName.of("F"));return this.dict.context.lookupMaybe(g,PDFNumber)},it.prototype.getRectangle=function(){var g,et=this.Rect();return(g=et==null?void 0:et.asRectangle())!==null&&g!==void 0?g:{x:0,y:0,width:0,height:0}},it.prototype.setRectangle=function(g){var et=g.x,ot=g.y,ut=g.width,ct=g.height,dt=this.dict.context.obj([et,ot,et+ut,ot+ct]);this.dict.set(PDFName.of("Rect"),dt)},it.prototype.getAppearanceState=function(){var g=this.dict.lookup(PDFName.of("AS"));if(g instanceof PDFName)return g},it.prototype.setAppearanceState=function(g){this.dict.set(PDFName.of("AS"),g)},it.prototype.setAppearances=function(g){this.dict.set(PDFName.of("AP"),g)},it.prototype.ensureAP=function(){var g=this.AP();return g||(g=this.dict.context.obj({}),this.dict.set(PDFName.of("AP"),g)),g},it.prototype.getNormalAppearance=function(){var g=this.ensureAP(),et=g.get(PDFName.of("N"));if(et instanceof PDFRef||et instanceof PDFDict)return et;throw new Error("Unexpected N type: "+(et==null?void 0:et.constructor.name))},it.prototype.setNormalAppearance=function(g){var et=this.ensureAP();et.set(PDFName.of("N"),g)},it.prototype.setRolloverAppearance=function(g){var et=this.ensureAP();et.set(PDFName.of("R"),g)},it.prototype.setDownAppearance=function(g){var et=this.ensureAP();et.set(PDFName.of("D"),g)},it.prototype.removeRolloverAppearance=function(){var g=this.AP();g==null||g.delete(PDFName.of("R"))},it.prototype.removeDownAppearance=function(){var g=this.AP();g==null||g.delete(PDFName.of("D"))},it.prototype.getAppearances=function(){var g=this.AP();if(g){var et=g.lookup(PDFName.of("N"),PDFDict,PDFStream),ot=g.lookupMaybe(PDFName.of("R"),PDFDict,PDFStream),ut=g.lookupMaybe(PDFName.of("D"),PDFDict,PDFStream);return{normal:et,rollover:ot,down:ut}}},it.prototype.getFlags=function(){var g,et;return(et=(g=this.F())===null||g===void 0?void 0:g.asNumber())!==null&&et!==void 0?et:0},it.prototype.setFlags=function(g){this.dict.set(PDFName.of("F"),PDFNumber.of(g))},it.prototype.hasFlag=function(g){var et=this.getFlags();return(et&g)!==0},it.prototype.setFlag=function(g){var et=this.getFlags();this.setFlags(et|g)},it.prototype.clearFlag=function(g){var et=this.getFlags();this.setFlags(et&~g)},it.prototype.setFlagTo=function(g,et){et?this.setFlag(g):this.clearFlag(g)},it.fromDict=function(g){return new it(g)},it}(),AppearanceCharacteristics=function(){function it(g){this.dict=g}return it.prototype.R=function(){var g=this.dict.lookup(PDFName.of("R"));if(g instanceof PDFNumber)return g},it.prototype.BC=function(){var g=this.dict.lookup(PDFName.of("BC"));if(g instanceof PDFArray)return g},it.prototype.BG=function(){var g=this.dict.lookup(PDFName.of("BG"));if(g instanceof PDFArray)return g},it.prototype.CA=function(){var g=this.dict.lookup(PDFName.of("CA"));if(g instanceof PDFHexString||g instanceof PDFString)return g},it.prototype.RC=function(){var g=this.dict.lookup(PDFName.of("RC"));if(g instanceof PDFHexString||g instanceof PDFString)return g},it.prototype.AC=function(){var g=this.dict.lookup(PDFName.of("AC"));if(g instanceof PDFHexString||g instanceof PDFString)return g},it.prototype.getRotation=function(){var g;return(g=this.R())===null||g===void 0?void 0:g.asNumber()},it.prototype.getBorderColor=function(){var g=this.BC();if(g){for(var et=[],ot=0,ut=g==null?void 0:g.size();ot<ut;ot++){var ct=g.get(ot);ct instanceof PDFNumber&&et.push(ct.asNumber())}return et}},it.prototype.getBackgroundColor=function(){var g=this.BG();if(g){for(var et=[],ot=0,ut=g==null?void 0:g.size();ot<ut;ot++){var ct=g.get(ot);ct instanceof PDFNumber&&et.push(ct.asNumber())}return et}},it.prototype.getCaptions=function(){var g=this.CA(),et=this.RC(),ot=this.AC();return{normal:g==null?void 0:g.decodeText(),rollover:et==null?void 0:et.decodeText(),down:ot==null?void 0:ot.decodeText()}},it.prototype.setRotation=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("R"),et)},it.prototype.setBorderColor=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("BC"),et)},it.prototype.setBackgroundColor=function(g){var et=this.dict.context.obj(g);this.dict.set(PDFName.of("BG"),et)},it.prototype.setCaptions=function(g){var et=PDFHexString.fromText(g.normal);if(this.dict.set(PDFName.of("CA"),et),g.rollover){var ot=PDFHexString.fromText(g.rollover);this.dict.set(PDFName.of("RC"),ot)}else this.dict.delete(PDFName.of("RC"));if(g.down){var ut=PDFHexString.fromText(g.down);this.dict.set(PDFName.of("AC"),ut)}else this.dict.delete(PDFName.of("AC"))},it.fromDict=function(g){return new it(g)},it}(),PDFWidgetAnnotation=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.MK=function(){var et=this.dict.lookup(PDFName.of("MK"));if(et instanceof PDFDict)return et},g.prototype.BS=function(){var et=this.dict.lookup(PDFName.of("BS"));if(et instanceof PDFDict)return et},g.prototype.DA=function(){var et=this.dict.lookup(PDFName.of("DA"));if(et instanceof PDFString||et instanceof PDFHexString)return et},g.prototype.P=function(){var et=this.dict.get(PDFName.of("P"));if(et instanceof PDFRef)return et},g.prototype.setP=function(et){this.dict.set(PDFName.of("P"),et)},g.prototype.setDefaultAppearance=function(et){this.dict.set(PDFName.of("DA"),PDFString.of(et))},g.prototype.getDefaultAppearance=function(){var et=this.DA();return et instanceof PDFHexString?et.decodeText():et==null?void 0:et.asString()},g.prototype.getAppearanceCharacteristics=function(){var et=this.MK();if(et)return AppearanceCharacteristics.fromDict(et)},g.prototype.getOrCreateAppearanceCharacteristics=function(){var et=this.MK();if(et)return AppearanceCharacteristics.fromDict(et);var ot=AppearanceCharacteristics.fromDict(this.dict.context.obj({}));return this.dict.set(PDFName.of("MK"),ot.dict),ot},g.prototype.getBorderStyle=function(){var et=this.BS();if(et)return BorderStyle.fromDict(et)},g.prototype.getOrCreateBorderStyle=function(){var et=this.BS();if(et)return BorderStyle.fromDict(et);var ot=BorderStyle.fromDict(this.dict.context.obj({}));return this.dict.set(PDFName.of("BS"),ot.dict),ot},g.prototype.getOnValue=function(){var et,ot=(et=this.getAppearances())===null||et===void 0?void 0:et.normal;if(ot instanceof PDFDict)for(var ut=ot.keys(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct];if(ft!==PDFName.of("Off"))return ft}},g.fromDict=function(et){return new g(et)},g.create=function(et,ot){var ut=et.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:ot});return new g(ut)},g}(PDFAnnotation),PDFAcroTerminal=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.FT=function(){var et=this.getInheritableAttribute(PDFName.of("FT"));return this.dict.context.lookup(et,PDFName)},g.prototype.getWidgets=function(){var et=this.Kids();if(!et)return[PDFWidgetAnnotation.fromDict(this.dict)];for(var ot=new Array(et.size()),ut=0,ct=et.size();ut<ct;ut++){var dt=et.lookup(ut,PDFDict);ot[ut]=PDFWidgetAnnotation.fromDict(dt)}return ot},g.prototype.addWidget=function(et){var ot=this.normalizedEntries().Kids;ot.push(et)},g.prototype.removeWidget=function(et){var ot=this.Kids();if(ot){if(et<0||et>ot.size())throw new IndexOutOfBoundsError(et,0,ot.size());ot.remove(et)}else{if(et!==0)throw new IndexOutOfBoundsError(et,0,0);this.setKids([])}},g.prototype.normalizedEntries=function(){var et=this.Kids();return et||(et=this.dict.context.obj([this.ref]),this.dict.set(PDFName.of("Kids"),et)),{Kids:et}},g.fromDict=function(et,ot){return new g(et,ot)},g}(PDFAcroField),PDFAcroButton=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.Opt=function(){return this.dict.lookupMaybe(PDFName.of("Opt"),PDFString,PDFHexString,PDFArray)},g.prototype.setOpt=function(et){this.dict.set(PDFName.of("Opt"),this.dict.context.obj(et))},g.prototype.getExportValues=function(){var et=this.Opt();if(et){if(et instanceof PDFString||et instanceof PDFHexString)return[et];for(var ot=[],ut=0,ct=et.size();ut<ct;ut++){var dt=et.lookup(ut);(dt instanceof PDFString||dt instanceof PDFHexString)&&ot.push(dt)}return ot}},g.prototype.removeExportValue=function(et){var ot=this.Opt();if(ot)if(ot instanceof PDFString||ot instanceof PDFHexString){if(et!==0)throw new IndexOutOfBoundsError(et,0,0);this.setOpt([])}else{if(et<0||et>ot.size())throw new IndexOutOfBoundsError(et,0,ot.size());ot.remove(et)}},g.prototype.normalizeExportValues=function(){for(var et,ot,ut,ct,dt=(et=this.getExportValues())!==null&&et!==void 0?et:[],ft=[],St=this.getWidgets(),kt=0,Tt=St.length;kt<Tt;kt++){var Rt=St[kt],Ft=(ot=dt[kt])!==null&&ot!==void 0?ot:PDFHexString.fromText((ct=(ut=Rt.getOnValue())===null||ut===void 0?void 0:ut.decodeText())!==null&&ct!==void 0?ct:"");ft.push(Ft)}this.setOpt(ft)},g.prototype.addOpt=function(et,ot){var ut;this.normalizeExportValues();var ct=et.decodeText(),dt;if(ot)for(var ft=(ut=this.getExportValues())!==null&&ut!==void 0?ut:[],St=0,kt=ft.length;St<kt;St++){var Tt=ft[St];Tt.decodeText()===ct&&(dt=St)}var Rt=this.Opt();return Rt.push(et),dt??Rt.size()-1},g.prototype.addWidgetWithOpt=function(et,ot,ut){var ct=this.addOpt(ot,ut),dt=PDFName.of(String(ct));return this.addWidget(et),dt},g}(PDFAcroTerminal),PDFAcroCheckBox=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.setValue=function(et){var ot,ut=(ot=this.getOnValue())!==null&&ot!==void 0?ot:PDFName.of("Yes");if(et!==ut&&et!==PDFName.of("Off"))throw new InvalidAcroFieldValueError;this.dict.set(PDFName.of("V"),et);for(var ct=this.getWidgets(),dt=0,ft=ct.length;dt<ft;dt++){var St=ct[dt],kt=St.getOnValue()===et?et:PDFName.of("Off");St.setAppearanceState(kt)}},g.prototype.getValue=function(){var et=this.V();return et instanceof PDFName?et:PDFName.of("Off")},g.prototype.getOnValue=function(){var et=this.getWidgets()[0];return et==null?void 0:et.getOnValue()},g.fromDict=function(et,ot){return new g(et,ot)},g.create=function(et){var ot=et.obj({FT:"Btn",Kids:[]}),ut=et.register(ot);return new g(ot,ut)},g}(PDFAcroButton),flag$1=function(it){return 1<<it},AcroFieldFlags;(function(it){it[it.ReadOnly=flag$1(1-1)]="ReadOnly",it[it.Required=flag$1(2-1)]="Required",it[it.NoExport=flag$1(3-1)]="NoExport"})(AcroFieldFlags||(AcroFieldFlags={}));var AcroButtonFlags;(function(it){it[it.NoToggleToOff=flag$1(15-1)]="NoToggleToOff",it[it.Radio=flag$1(16-1)]="Radio",it[it.PushButton=flag$1(17-1)]="PushButton",it[it.RadiosInUnison=flag$1(26-1)]="RadiosInUnison"})(AcroButtonFlags||(AcroButtonFlags={}));var AcroTextFlags;(function(it){it[it.Multiline=flag$1(13-1)]="Multiline",it[it.Password=flag$1(14-1)]="Password",it[it.FileSelect=flag$1(21-1)]="FileSelect",it[it.DoNotSpellCheck=flag$1(23-1)]="DoNotSpellCheck",it[it.DoNotScroll=flag$1(24-1)]="DoNotScroll",it[it.Comb=flag$1(25-1)]="Comb",it[it.RichText=flag$1(26-1)]="RichText"})(AcroTextFlags||(AcroTextFlags={}));var AcroChoiceFlags;(function(it){it[it.Combo=flag$1(18-1)]="Combo",it[it.Edit=flag$1(19-1)]="Edit",it[it.Sort=flag$1(20-1)]="Sort",it[it.MultiSelect=flag$1(22-1)]="MultiSelect",it[it.DoNotSpellCheck=flag$1(23-1)]="DoNotSpellCheck",it[it.CommitOnSelChange=flag$1(27-1)]="CommitOnSelChange"})(AcroChoiceFlags||(AcroChoiceFlags={}));var PDFAcroChoice=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.setValues=function(et){if(this.hasFlag(AcroChoiceFlags.Combo)&&!this.hasFlag(AcroChoiceFlags.Edit)&&!this.valuesAreValid(et))throw new InvalidAcroFieldValueError;if(et.length===0&&this.dict.delete(PDFName.of("V")),et.length===1&&this.dict.set(PDFName.of("V"),et[0]),et.length>1){if(!this.hasFlag(AcroChoiceFlags.MultiSelect))throw new MultiSelectValueError;this.dict.set(PDFName.of("V"),this.dict.context.obj(et))}this.updateSelectedIndices(et)},g.prototype.valuesAreValid=function(et){for(var ot=this.getOptions(),ut=function(St,kt){var Tt=et[St].decodeText();if(!ot.find(function(Rt){return Tt===(Rt.display||Rt.value).decodeText()}))return{value:!1}},ct=0,dt=et.length;ct<dt;ct++){var ft=ut(ct);if(typeof ft=="object")return ft.value}return!0},g.prototype.updateSelectedIndices=function(et){if(et.length>1){for(var ot=new Array(et.length),ut=this.getOptions(),ct=function(St,kt){var Tt=et[St].decodeText();ot[St]=ut.findIndex(function(Rt){return Tt===(Rt.display||Rt.value).decodeText()})},dt=0,ft=et.length;dt<ft;dt++)ct(dt,ft);this.dict.set(PDFName.of("I"),this.dict.context.obj(ot.sort()))}else this.dict.delete(PDFName.of("I"))},g.prototype.getValues=function(){var et=this.V();if(et instanceof PDFString||et instanceof PDFHexString)return[et];if(et instanceof PDFArray){for(var ot=[],ut=0,ct=et.size();ut<ct;ut++){var dt=et.lookup(ut);(dt instanceof PDFString||dt instanceof PDFHexString)&&ot.push(dt)}return ot}return[]},g.prototype.Opt=function(){return this.dict.lookupMaybe(PDFName.of("Opt"),PDFString,PDFHexString,PDFArray)},g.prototype.setOptions=function(et){for(var ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++){var dt=et[ut],ft=dt.value,St=dt.display;ot[ut]=this.dict.context.obj([ft,St||ft])}this.dict.set(PDFName.of("Opt"),this.dict.context.obj(ot))},g.prototype.getOptions=function(){var et=this.Opt();if(et instanceof PDFString||et instanceof PDFHexString)return[{value:et,display:et}];if(et instanceof PDFArray){for(var ot=[],ut=0,ct=et.size();ut<ct;ut++){var dt=et.lookup(ut);if((dt instanceof PDFString||dt instanceof PDFHexString)&&ot.push({value:dt,display:dt}),dt instanceof PDFArray&&dt.size()>0){var ft=dt.lookup(0,PDFString,PDFHexString),St=dt.lookupMaybe(1,PDFString,PDFHexString);ot.push({value:ft,display:St||ft})}}return ot}return[]},g}(PDFAcroTerminal),PDFAcroComboBox=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.fromDict=function(et,ot){return new g(et,ot)},g.create=function(et){var ot=et.obj({FT:"Ch",Ff:AcroChoiceFlags.Combo,Kids:[]}),ut=et.register(ot);return new g(ot,ut)},g}(PDFAcroChoice),PDFAcroNonTerminal=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.addField=function(et){var ot=this.normalizedEntries().Kids;ot==null||ot.push(et)},g.prototype.normalizedEntries=function(){var et=this.Kids();return et||(et=this.dict.context.obj([]),this.dict.set(PDFName.of("Kids"),et)),{Kids:et}},g.fromDict=function(et,ot){return new g(et,ot)},g.create=function(et){var ot=et.obj({}),ut=et.register(ot);return new g(ot,ut)},g}(PDFAcroField),PDFAcroSignature=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.fromDict=function(et,ot){return new g(et,ot)},g}(PDFAcroTerminal),PDFAcroText=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.MaxLen=function(){var et=this.dict.lookup(PDFName.of("MaxLen"));if(et instanceof PDFNumber)return et},g.prototype.Q=function(){var et=this.dict.lookup(PDFName.of("Q"));if(et instanceof PDFNumber)return et},g.prototype.setMaxLength=function(et){this.dict.set(PDFName.of("MaxLen"),PDFNumber.of(et))},g.prototype.removeMaxLength=function(){this.dict.delete(PDFName.of("MaxLen"))},g.prototype.getMaxLength=function(){var et;return(et=this.MaxLen())===null||et===void 0?void 0:et.asNumber()},g.prototype.setQuadding=function(et){this.dict.set(PDFName.of("Q"),PDFNumber.of(et))},g.prototype.getQuadding=function(){var et;return(et=this.Q())===null||et===void 0?void 0:et.asNumber()},g.prototype.setValue=function(et){this.dict.set(PDFName.of("V"),et)},g.prototype.removeValue=function(){this.dict.delete(PDFName.of("V"))},g.prototype.getValue=function(){var et=this.V();if(et instanceof PDFString||et instanceof PDFHexString)return et},g.fromDict=function(et,ot){return new g(et,ot)},g.create=function(et){var ot=et.obj({FT:"Tx",Kids:[]}),ut=et.register(ot);return new g(ot,ut)},g}(PDFAcroTerminal),PDFAcroPushButton=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.fromDict=function(et,ot){return new g(et,ot)},g.create=function(et){var ot=et.obj({FT:"Btn",Ff:AcroButtonFlags.PushButton,Kids:[]}),ut=et.register(ot);return new g(ot,ut)},g}(PDFAcroButton),PDFAcroRadioButton=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.setValue=function(et){var ot=this.getOnValues();if(!ot.includes(et)&&et!==PDFName.of("Off"))throw new InvalidAcroFieldValueError;this.dict.set(PDFName.of("V"),et);for(var ut=this.getWidgets(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct],St=ft.getOnValue()===et?et:PDFName.of("Off");ft.setAppearanceState(St)}},g.prototype.getValue=function(){var et=this.V();return et instanceof PDFName?et:PDFName.of("Off")},g.prototype.getOnValues=function(){for(var et=this.getWidgets(),ot=[],ut=0,ct=et.length;ut<ct;ut++){var dt=et[ut].getOnValue();dt&&ot.push(dt)}return ot},g.fromDict=function(et,ot){return new g(et,ot)},g.create=function(et){var ot=et.obj({FT:"Btn",Ff:AcroButtonFlags.Radio,Kids:[]}),ut=et.register(ot);return new g(ot,ut)},g}(PDFAcroButton),PDFAcroListBox=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.fromDict=function(et,ot){return new g(et,ot)},g.create=function(et){var ot=et.obj({FT:"Ch",Kids:[]}),ut=et.register(ot);return new g(ot,ut)},g}(PDFAcroChoice),createPDFAcroFields=function(it){if(!it)return[];for(var g=[],et=0,ot=it.size();et<ot;et++){var ut=it.get(et),ct=it.lookup(et);ut instanceof PDFRef&&ct instanceof PDFDict&&g.push([createPDFAcroField(ct,ut),ut])}return g},createPDFAcroField=function(it,g){var et=isNonTerminalAcroField(it);return et?PDFAcroNonTerminal.fromDict(it,g):createPDFAcroTerminal(it,g)},isNonTerminalAcroField=function(it){var g=it.lookup(PDFName.of("Kids"));if(g instanceof PDFArray)for(var et=0,ot=g.size();et<ot;et++){var ut=g.lookup(et),ct=ut instanceof PDFDict&&ut.has(PDFName.of("T"));if(ct)return!0}return!1},createPDFAcroTerminal=function(it,g){var et=getInheritableAttribute(it,PDFName.of("FT")),ot=it.context.lookup(et,PDFName);return ot===PDFName.of("Btn")?createPDFAcroButton(it,g):ot===PDFName.of("Ch")?createPDFAcroChoice(it,g):ot===PDFName.of("Tx")?PDFAcroText.fromDict(it,g):ot===PDFName.of("Sig")?PDFAcroSignature.fromDict(it,g):PDFAcroTerminal.fromDict(it,g)},createPDFAcroButton=function(it,g){var et,ot=getInheritableAttribute(it,PDFName.of("Ff")),ut=it.context.lookupMaybe(ot,PDFNumber),ct=(et=ut==null?void 0:ut.asNumber())!==null&&et!==void 0?et:0;return flagIsSet(ct,AcroButtonFlags.PushButton)?PDFAcroPushButton.fromDict(it,g):flagIsSet(ct,AcroButtonFlags.Radio)?PDFAcroRadioButton.fromDict(it,g):PDFAcroCheckBox.fromDict(it,g)},createPDFAcroChoice=function(it,g){var et,ot=getInheritableAttribute(it,PDFName.of("Ff")),ut=it.context.lookupMaybe(ot,PDFNumber),ct=(et=ut==null?void 0:ut.asNumber())!==null&&et!==void 0?et:0;return flagIsSet(ct,AcroChoiceFlags.Combo)?PDFAcroComboBox.fromDict(it,g):PDFAcroListBox.fromDict(it,g)},flagIsSet=function(it,g){return(it&g)!==0},getInheritableAttribute=function(it,g){var et;return ascend(it,function(ot){et||(et=ot.get(g))}),et},ascend=function(it,g){g(it);var et=it.lookupMaybe(PDFName.of("Parent"),PDFDict);et&&ascend(et,g)},PDFAcroForm=function(){function it(g){this.dict=g}return it.prototype.Fields=function(){var g=this.dict.lookup(PDFName.of("Fields"));if(g instanceof PDFArray)return g},it.prototype.getFields=function(){for(var g=this.normalizedEntries().Fields,et=new Array(g.size()),ot=0,ut=g.size();ot<ut;ot++){var ct=g.get(ot),dt=g.lookup(ot,PDFDict);et[ot]=[createPDFAcroField(dt,ct),ct]}return et},it.prototype.getAllFields=function(){var g=[],et=function(ot){if(ot)for(var ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut];g.push(dt);var ft=dt[0];ft instanceof PDFAcroNonTerminal&&et(createPDFAcroFields(ft.Kids()))}};return et(this.getFields()),g},it.prototype.addField=function(g){var et=this.normalizedEntries().Fields;et==null||et.push(g)},it.prototype.removeField=function(g){var et=g.getParent(),ot=et===void 0?this.normalizedEntries().Fields:et.Kids(),ut=ot==null?void 0:ot.indexOf(g.ref);if(ot===void 0||ut===void 0)throw new Error("Tried to remove inexistent field "+g.getFullyQualifiedName());ot.remove(ut),et!==void 0&&ot.size()===0&&this.removeField(et)},it.prototype.normalizedEntries=function(){var g=this.Fields();return g||(g=this.dict.context.obj([]),this.dict.set(PDFName.of("Fields"),g)),{Fields:g}},it.fromDict=function(g){return new it(g)},it.create=function(g){var et=g.obj({Fields:[]});return new it(et)},it}(),PDFCatalog=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.Pages=function(){return this.lookup(PDFName.of("Pages"),PDFDict)},g.prototype.AcroForm=function(){return this.lookupMaybe(PDFName.of("AcroForm"),PDFDict)},g.prototype.getAcroForm=function(){var et=this.AcroForm();if(et)return PDFAcroForm.fromDict(et)},g.prototype.getOrCreateAcroForm=function(){var et=this.getAcroForm();if(!et){et=PDFAcroForm.create(this.context);var ot=this.context.register(et.dict);this.set(PDFName.of("AcroForm"),ot)}return et},g.prototype.ViewerPreferences=function(){return this.lookupMaybe(PDFName.of("ViewerPreferences"),PDFDict)},g.prototype.getViewerPreferences=function(){var et=this.ViewerPreferences();if(et)return ViewerPreferences.fromDict(et)},g.prototype.getOrCreateViewerPreferences=function(){var et=this.getViewerPreferences();if(!et){et=ViewerPreferences.create(this.context);var ot=this.context.register(et.dict);this.set(PDFName.of("ViewerPreferences"),ot)}return et},g.prototype.insertLeafNode=function(et,ot){var ut=this.get(PDFName.of("Pages")),ct=this.Pages().insertLeafNode(et,ot);return ct||ut},g.prototype.removeLeafNode=function(et){this.Pages().removeLeafNode(et)},g.withContextAndPages=function(et,ot){var ut=new Map;return ut.set(PDFName.of("Type"),PDFName.of("Catalog")),ut.set(PDFName.of("Pages"),ot),new g(ut,et)},g.fromMapWithContext=function(et,ot){return new g(et,ot)},g}(PDFDict),PDFPageTree=function(it){__extends(g,it);function g(){return it!==null&&it.apply(this,arguments)||this}return g.prototype.Parent=function(){return this.lookup(PDFName.of("Parent"))},g.prototype.Kids=function(){return this.lookup(PDFName.of("Kids"),PDFArray)},g.prototype.Count=function(){return this.lookup(PDFName.of("Count"),PDFNumber)},g.prototype.pushTreeNode=function(et){var ot=this.Kids();ot.push(et)},g.prototype.pushLeafNode=function(et){var ot=this.Kids();this.insertLeafKid(ot.size(),et)},g.prototype.insertLeafNode=function(et,ot){var ut=this.Kids(),ct=this.Count().asNumber();if(ot>ct)throw new InvalidTargetIndexError(ot,ct);for(var dt=ot,ft=0,St=ut.size();ft<St;ft++){if(dt===0){this.insertLeafKid(ft,et);return}var kt=ut.get(ft),Tt=this.context.lookup(kt);if(Tt instanceof g){if(Tt.Count().asNumber()>dt)return Tt.insertLeafNode(et,dt)||kt;dt-=Tt.Count().asNumber()}Tt instanceof PDFPageLeaf&&(dt-=1)}if(dt===0){this.insertLeafKid(ut.size(),et);return}throw new CorruptPageTreeError(ot,"insertLeafNode")},g.prototype.removeLeafNode=function(et,ot){ot===void 0&&(ot=!0);var ut=this.Kids(),ct=this.Count().asNumber();if(et>=ct)throw new InvalidTargetIndexError(et,ct);for(var dt=et,ft=0,St=ut.size();ft<St;ft++){var kt=ut.get(ft),Tt=this.context.lookup(kt);if(Tt instanceof g)if(Tt.Count().asNumber()>dt){Tt.removeLeafNode(dt,ot),ot&&Tt.Kids().size()===0&&ut.remove(ft);return}else dt-=Tt.Count().asNumber();if(Tt instanceof PDFPageLeaf)if(dt===0){this.removeKid(ft);return}else dt-=1}throw new CorruptPageTreeError(et,"removeLeafNode")},g.prototype.ascend=function(et){et(this);var ot=this.Parent();ot&&ot.ascend(et)},g.prototype.traverse=function(et){for(var ot=this.Kids(),ut=0,ct=ot.size();ut<ct;ut++){var dt=ot.get(ut),ft=this.context.lookup(dt);ft instanceof g&&ft.traverse(et),et(ft,dt)}},g.prototype.insertLeafKid=function(et,ot){var ut=this.Kids();this.ascend(function(ct){var dt=ct.Count().asNumber()+1;ct.set(PDFName.of("Count"),PDFNumber.of(dt))}),ut.insert(et,ot)},g.prototype.removeKid=function(et){var ot=this.Kids(),ut=ot.lookup(et);ut instanceof PDFPageLeaf&&this.ascend(function(ct){var dt=ct.Count().asNumber()-1;ct.set(PDFName.of("Count"),PDFNumber.of(dt))}),ot.remove(et)},g.withContext=function(et,ot){var ut=new Map;return ut.set(PDFName.of("Type"),PDFName.of("Pages")),ut.set(PDFName.of("Kids"),et.obj([])),ut.set(PDFName.of("Count"),et.obj(0)),ot&&ut.set(PDFName.of("Parent"),ot),new g(ut,et)},g.fromMapWithContext=function(et,ot){return new g(et,ot)},g}(PDFDict),IsDigit=new Uint8Array(256);IsDigit[CharCodes$1.Zero]=1;IsDigit[CharCodes$1.One]=1;IsDigit[CharCodes$1.Two]=1;IsDigit[CharCodes$1.Three]=1;IsDigit[CharCodes$1.Four]=1;IsDigit[CharCodes$1.Five]=1;IsDigit[CharCodes$1.Six]=1;IsDigit[CharCodes$1.Seven]=1;IsDigit[CharCodes$1.Eight]=1;IsDigit[CharCodes$1.Nine]=1;var IsNumericPrefix=new Uint8Array(256);IsNumericPrefix[CharCodes$1.Period]=1;IsNumericPrefix[CharCodes$1.Plus]=1;IsNumericPrefix[CharCodes$1.Minus]=1;var IsNumeric=new Uint8Array(256);for(var idx=0,len=256;idx<len;idx++)IsNumeric[idx]=IsDigit[idx]||IsNumericPrefix[idx]?1:0;var Newline$1=CharCodes$1.Newline,CarriageReturn$1=CharCodes$1.CarriageReturn,BaseParser=function(){function it(g,et){et===void 0&&(et=!1),this.bytes=g,this.capNumbers=et}return it.prototype.parseRawInt=function(){for(var g="";!this.bytes.done();){var et=this.bytes.peek();if(!IsDigit[et])break;g+=charFromCode(this.bytes.next())}var ot=Number(g);if(!g||!isFinite(ot))throw new NumberParsingError(this.bytes.position(),g);return ot},it.prototype.parseRawNumber=function(){for(var g="";!this.bytes.done();){var et=this.bytes.peek();if(!IsNumeric[et]||(g+=charFromCode(this.bytes.next()),et===CharCodes$1.Period))break}for(;!this.bytes.done();){var et=this.bytes.peek();if(!IsDigit[et])break;g+=charFromCode(this.bytes.next())}var ot=Number(g);if(!g||!isFinite(ot))throw new NumberParsingError(this.bytes.position(),g);if(ot>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var ut="Parsed number that is too large for some PDF readers: "+g+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(ut),Number.MAX_SAFE_INTEGER}else{var ut="Parsed number that is too large for some PDF readers: "+g+", not capping.";console.warn(ut)}return ot},it.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&IsWhitespace[this.bytes.peek()];)this.bytes.next()},it.prototype.skipLine=function(){for(;!this.bytes.done();){var g=this.bytes.peek();if(g===Newline$1||g===CarriageReturn$1)return;this.bytes.next()}},it.prototype.skipComment=function(){if(this.bytes.peek()!==CharCodes$1.Percent)return!1;for(;!this.bytes.done();){var g=this.bytes.peek();if(g===Newline$1||g===CarriageReturn$1)return!0;this.bytes.next()}return!0},it.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},it.prototype.matchKeyword=function(g){for(var et=this.bytes.offset(),ot=0,ut=g.length;ot<ut;ot++)if(this.bytes.done()||this.bytes.next()!==g[ot])return this.bytes.moveTo(et),!1;return!0},it}(),ByteStream=function(){function it(g){this.idx=0,this.line=0,this.column=0,this.bytes=g,this.length=this.bytes.length}return it.prototype.moveTo=function(g){this.idx=g},it.prototype.next=function(){var g=this.bytes[this.idx++];return g===CharCodes$1.Newline?(this.line+=1,this.column=0):this.column+=1,g},it.prototype.assertNext=function(g){if(this.peek()!==g)throw new NextByteAssertionError(this.position(),g,this.peek());return this.next()},it.prototype.peek=function(){return this.bytes[this.idx]},it.prototype.peekAhead=function(g){return this.bytes[this.idx+g]},it.prototype.peekAt=function(g){return this.bytes[g]},it.prototype.done=function(){return this.idx>=this.length},it.prototype.offset=function(){return this.idx},it.prototype.slice=function(g,et){return this.bytes.slice(g,et)},it.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},it.of=function(g){return new it(g)},it.fromPDFRawStream=function(g){return it.of(decodePDFRawStream(g).decode())},it}(),Space=CharCodes$1.Space,CarriageReturn=CharCodes$1.CarriageReturn,Newline=CharCodes$1.Newline,stream=[CharCodes$1.s,CharCodes$1.t,CharCodes$1.r,CharCodes$1.e,CharCodes$1.a,CharCodes$1.m],endstream=[CharCodes$1.e,CharCodes$1.n,CharCodes$1.d,CharCodes$1.s,CharCodes$1.t,CharCodes$1.r,CharCodes$1.e,CharCodes$1.a,CharCodes$1.m],Keywords={header:[CharCodes$1.Percent,CharCodes$1.P,CharCodes$1.D,CharCodes$1.F,CharCodes$1.Dash],eof:[CharCodes$1.Percent,CharCodes$1.Percent,CharCodes$1.E,CharCodes$1.O,CharCodes$1.F],obj:[CharCodes$1.o,CharCodes$1.b,CharCodes$1.j],endobj:[CharCodes$1.e,CharCodes$1.n,CharCodes$1.d,CharCodes$1.o,CharCodes$1.b,CharCodes$1.j],xref:[CharCodes$1.x,CharCodes$1.r,CharCodes$1.e,CharCodes$1.f],trailer:[CharCodes$1.t,CharCodes$1.r,CharCodes$1.a,CharCodes$1.i,CharCodes$1.l,CharCodes$1.e,CharCodes$1.r],startxref:[CharCodes$1.s,CharCodes$1.t,CharCodes$1.a,CharCodes$1.r,CharCodes$1.t,CharCodes$1.x,CharCodes$1.r,CharCodes$1.e,CharCodes$1.f],true:[CharCodes$1.t,CharCodes$1.r,CharCodes$1.u,CharCodes$1.e],false:[CharCodes$1.f,CharCodes$1.a,CharCodes$1.l,CharCodes$1.s,CharCodes$1.e],null:[CharCodes$1.n,CharCodes$1.u,CharCodes$1.l,CharCodes$1.l],stream,streamEOF1:__spreadArrays(stream,[Space,CarriageReturn,Newline]),streamEOF2:__spreadArrays(stream,[CarriageReturn,Newline]),streamEOF3:__spreadArrays(stream,[CarriageReturn]),streamEOF4:__spreadArrays(stream,[Newline]),endstream,EOF1endstream:__spreadArrays([CarriageReturn,Newline],endstream),EOF2endstream:__spreadArrays([CarriageReturn],endstream),EOF3endstream:__spreadArrays([Newline],endstream)},PDFObjectParser=function(it){__extends(g,it);function g(et,ot,ut){ut===void 0&&(ut=!1);var ct=it.call(this,et,ut)||this;return ct.context=ot,ct}return g.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.true))return PDFBool.True;if(this.matchKeyword(Keywords.false))return PDFBool.False;if(this.matchKeyword(Keywords.null))return PDFNull$1;var et=this.bytes.peek();if(et===CharCodes$1.LessThan&&this.bytes.peekAhead(1)===CharCodes$1.LessThan)return this.parseDictOrStream();if(et===CharCodes$1.LessThan)return this.parseHexString();if(et===CharCodes$1.LeftParen)return this.parseString();if(et===CharCodes$1.ForwardSlash)return this.parseName();if(et===CharCodes$1.LeftSquareBracket)return this.parseArray();if(IsNumeric[et])return this.parseNumberOrRef();throw new PDFObjectParsingError(this.bytes.position(),et)},g.prototype.parseNumberOrRef=function(){var et=this.parseRawNumber();this.skipWhitespaceAndComments();var ot=this.bytes.offset();if(IsDigit[this.bytes.peek()]){var ut=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===CharCodes$1.R)return this.bytes.assertNext(CharCodes$1.R),PDFRef.of(et,ut)}return this.bytes.moveTo(ot),PDFNumber.of(et)},g.prototype.parseHexString=function(){var et="";for(this.bytes.assertNext(CharCodes$1.LessThan);!this.bytes.done()&&this.bytes.peek()!==CharCodes$1.GreaterThan;)et+=charFromCode(this.bytes.next());return this.bytes.assertNext(CharCodes$1.GreaterThan),PDFHexString.of(et)},g.prototype.parseString=function(){for(var et=0,ot=!1,ut="";!this.bytes.done();){var ct=this.bytes.next();if(ut+=charFromCode(ct),ot||(ct===CharCodes$1.LeftParen&&(et+=1),ct===CharCodes$1.RightParen&&(et-=1)),ct===CharCodes$1.BackSlash?ot=!ot:ot&&(ot=!1),et===0)return PDFString.of(ut.substring(1,ut.length-1))}throw new UnbalancedParenthesisError(this.bytes.position())},g.prototype.parseName=function(){this.bytes.assertNext(CharCodes$1.ForwardSlash);for(var et="";!this.bytes.done();){var ot=this.bytes.peek();if(IsWhitespace[ot]||IsDelimiter[ot])break;et+=charFromCode(ot),this.bytes.next()}return PDFName.of(et)},g.prototype.parseArray=function(){this.bytes.assertNext(CharCodes$1.LeftSquareBracket),this.skipWhitespaceAndComments();for(var et=PDFArray.withContext(this.context);this.bytes.peek()!==CharCodes$1.RightSquareBracket;){var ot=this.parseObject();et.push(ot),this.skipWhitespaceAndComments()}return this.bytes.assertNext(CharCodes$1.RightSquareBracket),et},g.prototype.parseDict=function(){this.bytes.assertNext(CharCodes$1.LessThan),this.bytes.assertNext(CharCodes$1.LessThan),this.skipWhitespaceAndComments();for(var et=new Map;!this.bytes.done()&&this.bytes.peek()!==CharCodes$1.GreaterThan&&this.bytes.peekAhead(1)!==CharCodes$1.GreaterThan;){var ot=this.parseName(),ut=this.parseObject();et.set(ot,ut),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(CharCodes$1.GreaterThan),this.bytes.assertNext(CharCodes$1.GreaterThan);var ct=et.get(PDFName.of("Type"));return ct===PDFName.of("Catalog")?PDFCatalog.fromMapWithContext(et,this.context):ct===PDFName.of("Pages")?PDFPageTree.fromMapWithContext(et,this.context):ct===PDFName.of("Page")?PDFPageLeaf.fromMapWithContext(et,this.context):PDFDict.fromMapWithContext(et,this.context)},g.prototype.parseDictOrStream=function(){var et=this.bytes.position(),ot=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Keywords.streamEOF1)&&!this.matchKeyword(Keywords.streamEOF2)&&!this.matchKeyword(Keywords.streamEOF3)&&!this.matchKeyword(Keywords.streamEOF4)&&!this.matchKeyword(Keywords.stream))return ot;var ut=this.bytes.offset(),ct,dt=ot.get(PDFName.of("Length"));dt instanceof PDFNumber?(ct=ut+dt.asNumber(),this.bytes.moveTo(ct),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.endstream)||(this.bytes.moveTo(ut),ct=this.findEndOfStreamFallback(et))):ct=this.findEndOfStreamFallback(et);var ft=this.bytes.slice(ut,ct);return PDFRawStream.of(ot,ft)},g.prototype.findEndOfStreamFallback=function(et){for(var ot=1,ut=this.bytes.offset();!this.bytes.done()&&(ut=this.bytes.offset(),this.matchKeyword(Keywords.stream)?ot+=1:this.matchKeyword(Keywords.EOF1endstream)||this.matchKeyword(Keywords.EOF2endstream)||this.matchKeyword(Keywords.EOF3endstream)||this.matchKeyword(Keywords.endstream)?ot-=1:this.bytes.next(),ot!==0););if(ot!==0)throw new PDFStreamParsingError(et);return ut},g.forBytes=function(et,ot,ut){return new g(ByteStream.of(et),ot,ut)},g.forByteStream=function(et,ot,ut){return ut===void 0&&(ut=!1),new g(et,ot,ut)},g}(BaseParser),PDFObjectStreamParser=function(it){__extends(g,it);function g(et,ot){var ut=it.call(this,ByteStream.fromPDFRawStream(et),et.dict.context)||this,ct=et.dict;return ut.alreadyParsed=!1,ut.shouldWaitForTick=ot||function(){return!1},ut.firstOffset=ct.lookup(PDFName.of("First"),PDFNumber).asNumber(),ut.objectCount=ct.lookup(PDFName.of("N"),PDFNumber).asNumber(),ut}return g.prototype.parseIntoContext=function(){return __awaiter(this,void 0,void 0,function(){var et,ot,ut,ct,dt,ft,St,kt;return __generator(this,function(Tt){switch(Tt.label){case 0:if(this.alreadyParsed)throw new ReparseError("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,et=this.parseOffsetsAndObjectNumbers(),ot=0,ut=et.length,Tt.label=1;case 1:return ot<ut?(ct=et[ot],dt=ct.objectNumber,ft=ct.offset,this.bytes.moveTo(this.firstOffset+ft),St=this.parseObject(),kt=PDFRef.of(dt,0),this.context.assign(kt,St),this.shouldWaitForTick()?[4,waitForTick()]:[3,3]):[3,4];case 2:Tt.sent(),Tt.label=3;case 3:return ot++,[3,1];case 4:return[2]}})})},g.prototype.parseOffsetsAndObjectNumbers=function(){for(var et=[],ot=0,ut=this.objectCount;ot<ut;ot++){this.skipWhitespaceAndComments();var ct=this.parseRawInt();this.skipWhitespaceAndComments();var dt=this.parseRawInt();et.push({objectNumber:ct,offset:dt})}return et},g.forStream=function(et,ot){return new g(et,ot)},g}(PDFObjectParser),PDFXRefStreamParser=function(){function it(g){this.alreadyParsed=!1,this.dict=g.dict,this.bytes=ByteStream.fromPDFRawStream(g),this.context=this.dict.context;var et=this.dict.lookup(PDFName.of("Size"),PDFNumber),ot=this.dict.lookup(PDFName.of("Index"));if(ot instanceof PDFArray){this.subsections=[];for(var ut=0,ct=ot.size();ut<ct;ut+=2){var dt=ot.lookup(ut+0,PDFNumber).asNumber(),ft=ot.lookup(ut+1,PDFNumber).asNumber();this.subsections.push({firstObjectNumber:dt,length:ft})}}else this.subsections=[{firstObjectNumber:0,length:et.asNumber()}];var St=this.dict.lookup(PDFName.of("W"),PDFArray);this.byteWidths=[-1,-1,-1];for(var ut=0,ct=St.size();ut<ct;ut++)this.byteWidths[ut]=St.lookup(ut,PDFNumber).asNumber()}return it.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new ReparseError("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(PDFName.of("Root")),Encrypt:this.dict.get(PDFName.of("Encrypt")),Info:this.dict.get(PDFName.of("Info")),ID:this.dict.get(PDFName.of("ID"))};var g=this.parseEntries();return g},it.prototype.parseEntries=function(){for(var g=[],et=this.byteWidths,ot=et[0],ut=et[1],ct=et[2],dt=0,ft=this.subsections.length;dt<ft;dt++)for(var St=this.subsections[dt],kt=St.firstObjectNumber,Tt=St.length,Rt=0;Rt<Tt;Rt++){for(var Ft=0,jt=0,Bt=ot;jt<Bt;jt++)Ft=Ft<<8|this.bytes.next();for(var zt=0,jt=0,Bt=ut;jt<Bt;jt++)zt=zt<<8|this.bytes.next();for(var Ht=0,jt=0,Bt=ct;jt<Bt;jt++)Ht=Ht<<8|this.bytes.next();ot===0&&(Ft=1);var Ut=kt+Rt,Kt={ref:PDFRef.of(Ut,Ht),offset:zt,deleted:Ft===0,inObjectStream:Ft===2};g.push(Kt)}return g},it.forStream=function(g){return new it(g)},it}(),PDFParser=function(it){__extends(g,it);function g(et,ot,ut,ct){ot===void 0&&(ot=1/0),ut===void 0&&(ut=!1),ct===void 0&&(ct=!1);var dt=it.call(this,ByteStream.of(et),PDFContext.create(),ct)||this;return dt.alreadyParsed=!1,dt.parsedObjects=0,dt.shouldWaitForTick=function(){return dt.parsedObjects+=1,dt.parsedObjects%dt.objectsPerTick===0},dt.objectsPerTick=ot,dt.throwOnInvalidObject=ut,dt}return g.prototype.parseDocument=function(){return __awaiter(this,void 0,void 0,function(){var et,ot;return __generator(this,function(ut){switch(ut.label){case 0:if(this.alreadyParsed)throw new ReparseError("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),ut.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(ut.sent(),ot=this.bytes.offset(),ot===et)throw new StalledParserError(this.bytes.position());return et=ot,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(PDFRef.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(PDFRef.of(0))),[2,this.context]}})})},g.prototype.maybeRecoverRoot=function(){var et=function(Tt){return Tt instanceof PDFDict&&Tt.lookup(PDFName.of("Type"))===PDFName.of("Catalog")},ot=this.context.lookup(this.context.trailerInfo.Root);if(!et(ot))for(var ut=this.context.enumerateIndirectObjects(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct],St=ft[0],kt=ft[1];et(kt)&&(this.context.trailerInfo.Root=St)}},g.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(Keywords.header)){var et=this.parseRawInt();this.bytes.assertNext(CharCodes$1.Period);var ot=this.parseRawInt(),ut=PDFHeader.forVersion(et,ot);return this.skipBinaryHeaderComment(),ut}this.bytes.next()}throw new MissingPDFHeaderError(this.bytes.position())},g.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var et=this.parseRawInt();this.skipWhitespaceAndComments();var ot=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Keywords.obj))throw new MissingKeywordError(this.bytes.position(),Keywords.obj);return PDFRef.of(et,ot)},g.prototype.matchIndirectObjectHeader=function(){var et=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(et),!1}},g.prototype.parseIndirectObject=function(){return __awaiter(this,void 0,void 0,function(){var et,ot;return __generator(this,function(ut){switch(ut.label){case 0:return et=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),ot=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.endobj),ot instanceof PDFRawStream&&ot.dict.lookup(PDFName.of("Type"))===PDFName.of("ObjStm")?[4,PDFObjectStreamParser.forStream(ot,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return ut.sent(),[3,3];case 2:ot instanceof PDFRawStream&&ot.dict.lookup(PDFName.of("Type"))===PDFName.of("XRef")?PDFXRefStreamParser.forStream(ot).parseIntoContext():this.context.assign(et,ot),ut.label=3;case 3:return[2,et]}})})},g.prototype.tryToParseInvalidIndirectObject=function(){var et=this.bytes.position(),ot="Trying to parse invalid object: "+JSON.stringify(et)+")";if(this.throwOnInvalidObject)throw new Error(ot);console.warn(ot);var ut=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+ut),this.skipWhitespaceAndComments();for(var ct=this.bytes.offset(),dt=!0;!this.bytes.done()&&(this.matchKeyword(Keywords.endobj)&&(dt=!1),!!dt);)this.bytes.next();if(dt)throw new PDFInvalidObjectParsingError(et);var ft=this.bytes.offset()-Keywords.endobj.length,St=PDFInvalidObject.of(this.bytes.slice(ct,ft));return this.context.assign(ut,St),ut},g.prototype.parseIndirectObjects=function(){return __awaiter(this,void 0,void 0,function(){var et;return __generator(this,function(ot){switch(ot.label){case 0:this.skipWhitespaceAndComments(),ot.label=1;case 1:if(!(!this.bytes.done()&&IsDigit[this.bytes.peek()]))return[3,8];et=this.bytes.offset(),ot.label=2;case 2:return ot.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return ot.sent(),[3,5];case 4:return ot.sent(),this.bytes.moveTo(et),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,waitForTick()]:[3,7];case 6:ot.sent(),ot.label=7;case 7:return[3,1];case 8:return[2]}})})},g.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.xref)){this.skipWhitespaceAndComments();for(var et=-1,ot=PDFCrossRefSection.createEmpty();!this.bytes.done()&&IsDigit[this.bytes.peek()];){var ut=this.parseRawInt();this.skipWhitespaceAndComments();var ct=this.parseRawInt();this.skipWhitespaceAndComments();var dt=this.bytes.peek();if(dt===CharCodes$1.n||dt===CharCodes$1.f){var ft=PDFRef.of(et,ct);this.bytes.next()===CharCodes$1.n?ot.addEntry(ft,ut):ot.addDeletedEntry(ft,ut),et+=1}else et=ut;this.skipWhitespaceAndComments()}return ot}},g.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.trailer)){this.skipWhitespaceAndComments();var et=this.parseDict(),ot=this.context;ot.trailerInfo={Root:et.get(PDFName.of("Root"))||ot.trailerInfo.Root,Encrypt:et.get(PDFName.of("Encrypt"))||ot.trailerInfo.Encrypt,Info:et.get(PDFName.of("Info"))||ot.trailerInfo.Info,ID:et.get(PDFName.of("ID"))||ot.trailerInfo.ID}}},g.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Keywords.startxref)){this.skipWhitespaceAndComments();var et=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(Keywords.eof),this.skipWhitespaceAndComments(),this.matchKeyword(Keywords.eof),this.skipWhitespaceAndComments(),PDFTrailer.forLastCrossRefSectionOffset(et)}},g.prototype.parseDocumentSection=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(et){switch(et.label){case 0:return[4,this.parseIndirectObjects()];case 1:return et.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},g.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var et=this.bytes.offset(),ot=this.bytes.peek(),ut=ot>=CharCodes$1.Space&&ot<=CharCodes$1.Tilde;if(ut&&(this.matchKeyword(Keywords.xref)||this.matchKeyword(Keywords.trailer)||this.matchKeyword(Keywords.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(et);break}this.bytes.next()}},g.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var et=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(et)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},g.forBytesWithOptions=function(et,ot,ut,ct){return new g(et,ot,ut,ct)},g}(PDFObjectParser),flag=function(it){return 1<<it},AnnotationFlags;(function(it){it[it.Invisible=flag(1-1)]="Invisible",it[it.Hidden=flag(2-1)]="Hidden",it[it.Print=flag(3-1)]="Print",it[it.NoZoom=flag(4-1)]="NoZoom",it[it.NoRotate=flag(5-1)]="NoRotate",it[it.NoView=flag(6-1)]="NoView",it[it.ReadOnly=flag(7-1)]="ReadOnly",it[it.Locked=flag(8-1)]="Locked",it[it.ToggleNoView=flag(9-1)]="ToggleNoView",it[it.LockedContents=flag(10-1)]="LockedContents"})(AnnotationFlags||(AnnotationFlags={}));var asPDFName=function(it){return it instanceof PDFName?it:PDFName.of(it)},asPDFNumber=function(it){return it instanceof PDFNumber?it:PDFNumber.of(it)},asNumber=function(it){return it instanceof PDFNumber?it.asNumber():it},RotationTypes;(function(it){it.Degrees="degrees",it.Radians="radians"})(RotationTypes||(RotationTypes={}));var degrees=function(it){return assertIs(it,"degreeAngle",["number"]),{type:RotationTypes.Degrees,angle:it}},Radians=RotationTypes.Radians,Degrees=RotationTypes.Degrees,degreesToRadians=function(it){return it*Math.PI/180},radiansToDegrees=function(it){return it*180/Math.PI},toRadians=function(it){return it.type===Radians?it.angle:it.type===Degrees?degreesToRadians(it.angle):error("Invalid rotation: "+JSON.stringify(it))},toDegrees=function(it){return it.type===Radians?radiansToDegrees(it.angle):it.type===Degrees?it.angle:error("Invalid rotation: "+JSON.stringify(it))},reduceRotation=function(it){it===void 0&&(it=0);var g=it/90%4;return g===0?0:g===1?90:g===2?180:g===3?270:0},adjustDimsForRotation=function(it,g){g===void 0&&(g=0);var et=reduceRotation(g);return et===90||et===270?{width:it.height,height:it.width}:{width:it.width,height:it.height}},rotateRectangle=function(it,g,et){g===void 0&&(g=0),et===void 0&&(et=0);var ot=it.x,ut=it.y,ct=it.width,dt=it.height,ft=reduceRotation(et),St=g/2;return ft===0?{x:ot-St,y:ut-St,width:ct,height:dt}:ft===90?{x:ot-dt+St,y:ut-St,width:dt,height:ct}:ft===180?{x:ot-ct+St,y:ut-dt+St,width:ct,height:dt}:ft===270?{x:ot-St,y:ut-ct+St,width:dt,height:ct}:{x:ot-St,y:ut-St,width:ct,height:dt}},clip=function(){return PDFOperator.of(Ops.ClipNonZero)},cos=Math.cos,sin=Math.sin,tan=Math.tan,concatTransformationMatrix=function(it,g,et,ot,ut,ct){return PDFOperator.of(Ops.ConcatTransformationMatrix,[asPDFNumber(it),asPDFNumber(g),asPDFNumber(et),asPDFNumber(ot),asPDFNumber(ut),asPDFNumber(ct)])},translate=function(it,g){return concatTransformationMatrix(1,0,0,1,it,g)},scale=function(it,g){return concatTransformationMatrix(it,0,0,g,0,0)},rotateRadians=function(it){return concatTransformationMatrix(cos(asNumber(it)),sin(asNumber(it)),-sin(asNumber(it)),cos(asNumber(it)),0,0)},rotateDegrees=function(it){return rotateRadians(degreesToRadians(asNumber(it)))},skewRadians=function(it,g){return concatTransformationMatrix(1,tan(asNumber(it)),tan(asNumber(g)),1,0,0)},setDashPattern=function(it,g){return PDFOperator.of(Ops.SetLineDashPattern,["["+it.map(asPDFNumber).join(" ")+"]",asPDFNumber(g)])},LineCapStyle;(function(it){it[it.Butt=0]="Butt",it[it.Round=1]="Round",it[it.Projecting=2]="Projecting"})(LineCapStyle||(LineCapStyle={}));var setLineCap=function(it){return PDFOperator.of(Ops.SetLineCapStyle,[asPDFNumber(it)])},LineJoinStyle;(function(it){it[it.Miter=0]="Miter",it[it.Round=1]="Round",it[it.Bevel=2]="Bevel"})(LineJoinStyle||(LineJoinStyle={}));var setGraphicsState=function(it){return PDFOperator.of(Ops.SetGraphicsStateParams,[asPDFName(it)])},pushGraphicsState=function(){return PDFOperator.of(Ops.PushGraphicsState)},popGraphicsState=function(){return PDFOperator.of(Ops.PopGraphicsState)},setLineWidth=function(it){return PDFOperator.of(Ops.SetLineWidth,[asPDFNumber(it)])},appendBezierCurve=function(it,g,et,ot,ut,ct){return PDFOperator.of(Ops.AppendBezierCurve,[asPDFNumber(it),asPDFNumber(g),asPDFNumber(et),asPDFNumber(ot),asPDFNumber(ut),asPDFNumber(ct)])},appendQuadraticCurve=function(it,g,et,ot){return PDFOperator.of(Ops.CurveToReplicateInitialPoint,[asPDFNumber(it),asPDFNumber(g),asPDFNumber(et),asPDFNumber(ot)])},closePath=function(){return PDFOperator.of(Ops.ClosePath)},moveTo=function(it,g){return PDFOperator.of(Ops.MoveTo,[asPDFNumber(it),asPDFNumber(g)])},lineTo=function(it,g){return PDFOperator.of(Ops.LineTo,[asPDFNumber(it),asPDFNumber(g)])},stroke=function(){return PDFOperator.of(Ops.StrokePath)},fill=function(){return PDFOperator.of(Ops.FillNonZero)},fillAndStroke=function(){return PDFOperator.of(Ops.FillNonZeroAndStroke)},endPath=function(){return PDFOperator.of(Ops.EndPath)},nextLine=function(){return PDFOperator.of(Ops.NextLine)},showText=function(it){return PDFOperator.of(Ops.ShowText,[it])},beginText=function(){return PDFOperator.of(Ops.BeginText)},endText=function(){return PDFOperator.of(Ops.EndText)},setFontAndSize=function(it,g){return PDFOperator.of(Ops.SetFontAndSize,[asPDFName(it),asPDFNumber(g)])},setLineHeight=function(it){return PDFOperator.of(Ops.SetTextLineHeight,[asPDFNumber(it)])},TextRenderingMode;(function(it){it[it.Fill=0]="Fill",it[it.Outline=1]="Outline",it[it.FillAndOutline=2]="FillAndOutline",it[it.Invisible=3]="Invisible",it[it.FillAndClip=4]="FillAndClip",it[it.OutlineAndClip=5]="OutlineAndClip",it[it.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",it[it.Clip=7]="Clip"})(TextRenderingMode||(TextRenderingMode={}));var setTextMatrix=function(it,g,et,ot,ut,ct){return PDFOperator.of(Ops.SetTextMatrix,[asPDFNumber(it),asPDFNumber(g),asPDFNumber(et),asPDFNumber(ot),asPDFNumber(ut),asPDFNumber(ct)])},rotateAndSkewTextRadiansAndTranslate=function(it,g,et,ot,ut){return setTextMatrix(cos(asNumber(it)),sin(asNumber(it))+tan(asNumber(g)),-sin(asNumber(it))+tan(asNumber(et)),cos(asNumber(it)),ot,ut)},drawObject=function(it){return PDFOperator.of(Ops.DrawObject,[asPDFName(it)])},setFillingGrayscaleColor=function(it){return PDFOperator.of(Ops.NonStrokingColorGray,[asPDFNumber(it)])},setStrokingGrayscaleColor=function(it){return PDFOperator.of(Ops.StrokingColorGray,[asPDFNumber(it)])},setFillingRgbColor=function(it,g,et){return PDFOperator.of(Ops.NonStrokingColorRgb,[asPDFNumber(it),asPDFNumber(g),asPDFNumber(et)])},setStrokingRgbColor=function(it,g,et){return PDFOperator.of(Ops.StrokingColorRgb,[asPDFNumber(it),asPDFNumber(g),asPDFNumber(et)])},setFillingCmykColor=function(it,g,et,ot){return PDFOperator.of(Ops.NonStrokingColorCmyk,[asPDFNumber(it),asPDFNumber(g),asPDFNumber(et),asPDFNumber(ot)])},setStrokingCmykColor=function(it,g,et,ot){return PDFOperator.of(Ops.StrokingColorCmyk,[asPDFNumber(it),asPDFNumber(g),asPDFNumber(et),asPDFNumber(ot)])},beginMarkedContent=function(it){return PDFOperator.of(Ops.BeginMarkedContent,[asPDFName(it)])},endMarkedContent=function(){return PDFOperator.of(Ops.EndMarkedContent)},ColorTypes;(function(it){it.Grayscale="Grayscale",it.RGB="RGB",it.CMYK="CMYK"})(ColorTypes||(ColorTypes={}));var grayscale=function(it){return assertRange(it,"gray",0,1),{type:ColorTypes.Grayscale,gray:it}},rgb=function(it,g,et){return assertRange(it,"red",0,1),assertRange(g,"green",0,1),assertRange(et,"blue",0,1),{type:ColorTypes.RGB,red:it,green:g,blue:et}},cmyk=function(it,g,et,ot){return assertRange(it,"cyan",0,1),assertRange(g,"magenta",0,1),assertRange(et,"yellow",0,1),assertRange(ot,"key",0,1),{type:ColorTypes.CMYK,cyan:it,magenta:g,yellow:et,key:ot}},Grayscale=ColorTypes.Grayscale,RGB=ColorTypes.RGB,CMYK=ColorTypes.CMYK,setFillingColor=function(it){return it.type===Grayscale?setFillingGrayscaleColor(it.gray):it.type===RGB?setFillingRgbColor(it.red,it.green,it.blue):it.type===CMYK?setFillingCmykColor(it.cyan,it.magenta,it.yellow,it.key):error("Invalid color: "+JSON.stringify(it))},setStrokingColor=function(it){return it.type===Grayscale?setStrokingGrayscaleColor(it.gray):it.type===RGB?setStrokingRgbColor(it.red,it.green,it.blue):it.type===CMYK?setStrokingCmykColor(it.cyan,it.magenta,it.yellow,it.key):error("Invalid color: "+JSON.stringify(it))},componentsToColor=function(it,g){return g===void 0&&(g=1),(it==null?void 0:it.length)===1?grayscale(it[0]*g):(it==null?void 0:it.length)===3?rgb(it[0]*g,it[1]*g,it[2]*g):(it==null?void 0:it.length)===4?cmyk(it[0]*g,it[1]*g,it[2]*g,it[3]*g):void 0},colorToComponents=function(it){return it.type===Grayscale?[it.gray]:it.type===RGB?[it.red,it.green,it.blue]:it.type===CMYK?[it.cyan,it.magenta,it.yellow,it.key]:error("Invalid color: "+JSON.stringify(it))},cx=0,cy=0,px=0,py=0,sx=0,sy=0,parameters=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),parse=function(it){for(var g,et=[],ot=[],ut="",ct=!1,dt=0,ft=0,St=it;ft<St.length;ft++){var kt=St[ft];if(parameters.has(kt))dt=parameters.get(kt),g&&(ut.length>0&&(ot[ot.length]=+ut),et[et.length]={cmd:g,args:ot},ot=[],ut="",ct=!1),g=kt;else if([" ",","].includes(kt)||kt==="-"&&ut.length>0&&ut[ut.length-1]!=="e"||kt==="."&&ct){if(ut.length===0)continue;ot.length===dt?(et[et.length]={cmd:g,args:ot},ot=[+ut],g==="M"&&(g="L"),g==="m"&&(g="l")):ot[ot.length]=+ut,ct=kt===".",ut=["-","."].includes(kt)?kt:""}else ut+=kt,kt==="."&&(ct=!0)}return ut.length>0&&(ot.length===dt?(et[et.length]={cmd:g,args:ot},ot=[+ut],g==="M"&&(g="L"),g==="m"&&(g="l")):ot[ot.length]=+ut),et[et.length]={cmd:g,args:ot},et},apply=function(it){cx=cy=px=py=sx=sy=0;for(var g=[],et=0;et<it.length;et++){var ot=it[et];if(ot.cmd&&typeof runners[ot.cmd]=="function"){var ut=runners[ot.cmd](ot.args);Array.isArray(ut)?g=g.concat(ut):g.push(ut)}}return g},runners={M:function(it){return cx=it[0],cy=it[1],px=py=null,sx=cx,sy=cy,moveTo(cx,cy)},m:function(it){return cx+=it[0],cy+=it[1],px=py=null,sx=cx,sy=cy,moveTo(cx,cy)},C:function(it){return cx=it[4],cy=it[5],px=it[2],py=it[3],appendBezierCurve(it[0],it[1],it[2],it[3],it[4],it[5])},c:function(it){var g=appendBezierCurve(it[0]+cx,it[1]+cy,it[2]+cx,it[3]+cy,it[4]+cx,it[5]+cy);return px=cx+it[2],py=cy+it[3],cx+=it[4],cy+=it[5],g},S:function(it){(px===null||py===null)&&(px=cx,py=cy);var g=appendBezierCurve(cx-(px-cx),cy-(py-cy),it[0],it[1],it[2],it[3]);return px=it[0],py=it[1],cx=it[2],cy=it[3],g},s:function(it){(px===null||py===null)&&(px=cx,py=cy);var g=appendBezierCurve(cx-(px-cx),cy-(py-cy),cx+it[0],cy+it[1],cx+it[2],cy+it[3]);return px=cx+it[0],py=cy+it[1],cx+=it[2],cy+=it[3],g},Q:function(it){return px=it[0],py=it[1],cx=it[2],cy=it[3],appendQuadraticCurve(it[0],it[1],cx,cy)},q:function(it){var g=appendQuadraticCurve(it[0]+cx,it[1]+cy,it[2]+cx,it[3]+cy);return px=cx+it[0],py=cy+it[1],cx+=it[2],cy+=it[3],g},T:function(it){px===null||py===null?(px=cx,py=cy):(px=cx-(px-cx),py=cy-(py-cy));var g=appendQuadraticCurve(px,py,it[0],it[1]);return px=cx-(px-cx),py=cy-(py-cy),cx=it[0],cy=it[1],g},t:function(it){px===null||py===null?(px=cx,py=cy):(px=cx-(px-cx),py=cy-(py-cy));var g=appendQuadraticCurve(px,py,cx+it[0],cy+it[1]);return cx+=it[0],cy+=it[1],g},A:function(it){var g=solveArc(cx,cy,it);return cx=it[5],cy=it[6],g},a:function(it){it[5]+=cx,it[6]+=cy;var g=solveArc(cx,cy,it);return cx=it[5],cy=it[6],g},L:function(it){return cx=it[0],cy=it[1],px=py=null,lineTo(cx,cy)},l:function(it){return cx+=it[0],cy+=it[1],px=py=null,lineTo(cx,cy)},H:function(it){return cx=it[0],px=py=null,lineTo(cx,cy)},h:function(it){return cx+=it[0],px=py=null,lineTo(cx,cy)},V:function(it){return cy=it[0],px=py=null,lineTo(cx,cy)},v:function(it){return cy+=it[0],px=py=null,lineTo(cx,cy)},Z:function(){var it=closePath();return cx=sx,cy=sy,it},z:function(){var it=closePath();return cx=sx,cy=sy,it}},solveArc=function(it,g,et){for(var ot=et[0],ut=et[1],ct=et[2],dt=et[3],ft=et[4],St=et[5],kt=et[6],Tt=arcToSegments(St,kt,ot,ut,dt,ft,ct,it,g),Rt=[],Ft=0,jt=Tt;Ft<jt.length;Ft++){var Bt=jt[Ft],zt=segmentToBezier.apply(void 0,Bt);Rt.push(appendBezierCurve.apply(void 0,zt))}return Rt},arcToSegments=function(it,g,et,ot,ut,ct,dt,ft,St){var kt=dt*(Math.PI/180),Tt=Math.sin(kt),Rt=Math.cos(kt);et=Math.abs(et),ot=Math.abs(ot),px=Rt*(ft-it)*.5+Tt*(St-g)*.5,py=Rt*(St-g)*.5-Tt*(ft-it)*.5;var Ft=px*px/(et*et)+py*py/(ot*ot);Ft>1&&(Ft=Math.sqrt(Ft),et*=Ft,ot*=Ft);var jt=Rt/et,Bt=Tt/et,zt=-Tt/ot,Ht=Rt/ot,Ut=jt*ft+Bt*St,Kt=zt*ft+Ht*St,Yt=jt*it+Bt*g,er=zt*it+Ht*g,ar=(Yt-Ut)*(Yt-Ut)+(er-Kt)*(er-Kt),ir=1/ar-.25;ir<0&&(ir=0);var lr=Math.sqrt(ir);ct===ut&&(lr=-lr);var cr=.5*(Ut+Yt)-lr*(er-Kt),vr=.5*(Kt+er)+lr*(Yt-Ut),xr=Math.atan2(Kt-vr,Ut-cr),yr=Math.atan2(er-vr,Yt-cr),Sr=yr-xr;Sr<0&&ct===1?Sr+=2*Math.PI:Sr>0&&ct===0&&(Sr-=2*Math.PI);for(var kr=Math.ceil(Math.abs(Sr/(Math.PI*.5+.001))),Pr=[],Or=0;Or<kr;Or++){var hr=xr+Or*Sr/kr,Tr=xr+(Or+1)*Sr/kr;Pr[Or]=[cr,vr,hr,Tr,et,ot,Tt,Rt]}return Pr},segmentToBezier=function(it,g,et,ot,ut,ct,dt,ft){var St=ft*ut,kt=-dt*ct,Tt=dt*ut,Rt=ft*ct,Ft=.5*(ot-et),jt=8/3*Math.sin(Ft*.5)*Math.sin(Ft*.5)/Math.sin(Ft),Bt=it+Math.cos(et)-jt*Math.sin(et),zt=g+Math.sin(et)+jt*Math.cos(et),Ht=it+Math.cos(ot),Ut=g+Math.sin(ot),Kt=Ht+jt*Math.sin(ot),Yt=Ut-jt*Math.cos(ot),er=[St*Bt+kt*zt,Tt*Bt+Rt*zt,St*Kt+kt*Yt,Tt*Kt+Rt*Yt,St*Ht+kt*Ut,Tt*Ht+Rt*Ut];return er},svgPathToOperators=function(it){return apply(parse(it))},drawLinesOfText=function(it,g){for(var et=[pushGraphicsState(),g.graphicsState&&setGraphicsState(g.graphicsState),beginText(),setFillingColor(g.color),setFontAndSize(g.font,g.size),setLineHeight(g.lineHeight),rotateAndSkewTextRadiansAndTranslate(toRadians(g.rotate),toRadians(g.xSkew),toRadians(g.ySkew),g.x,g.y)].filter(Boolean),ot=0,ut=it.length;ot<ut;ot++)et.push(showText(it[ot]),nextLine());return et.push(endText(),popGraphicsState()),et},drawImage=function(it,g){return[pushGraphicsState(),g.graphicsState&&setGraphicsState(g.graphicsState),translate(g.x,g.y),rotateRadians(toRadians(g.rotate)),scale(g.width,g.height),skewRadians(toRadians(g.xSkew),toRadians(g.ySkew)),drawObject(it),popGraphicsState()].filter(Boolean)},drawPage=function(it,g){return[pushGraphicsState(),g.graphicsState&&setGraphicsState(g.graphicsState),translate(g.x,g.y),rotateRadians(toRadians(g.rotate)),scale(g.xScale,g.yScale),skewRadians(toRadians(g.xSkew),toRadians(g.ySkew)),drawObject(it),popGraphicsState()].filter(Boolean)},drawLine=function(it){var g,et;return[pushGraphicsState(),it.graphicsState&&setGraphicsState(it.graphicsState),it.color&&setStrokingColor(it.color),setLineWidth(it.thickness),setDashPattern((g=it.dashArray)!==null&&g!==void 0?g:[],(et=it.dashPhase)!==null&&et!==void 0?et:0),moveTo(it.start.x,it.start.y),it.lineCap&&setLineCap(it.lineCap),moveTo(it.start.x,it.start.y),lineTo(it.end.x,it.end.y),stroke(),popGraphicsState()].filter(Boolean)},drawRectangle=function(it){var g,et;return[pushGraphicsState(),it.graphicsState&&setGraphicsState(it.graphicsState),it.color&&setFillingColor(it.color),it.borderColor&&setStrokingColor(it.borderColor),setLineWidth(it.borderWidth),it.borderLineCap&&setLineCap(it.borderLineCap),setDashPattern((g=it.borderDashArray)!==null&&g!==void 0?g:[],(et=it.borderDashPhase)!==null&&et!==void 0?et:0),translate(it.x,it.y),rotateRadians(toRadians(it.rotate)),skewRadians(toRadians(it.xSkew),toRadians(it.ySkew)),moveTo(0,0),lineTo(0,it.height),lineTo(it.width,it.height),lineTo(it.width,0),closePath(),it.color&&it.borderWidth?fillAndStroke():it.color?fill():it.borderColor?stroke():closePath(),popGraphicsState()].filter(Boolean)},KAPPA=4*((Math.sqrt(2)-1)/3),drawEllipsePath=function(it){var g=asNumber(it.x),et=asNumber(it.y),ot=asNumber(it.xScale),ut=asNumber(it.yScale);g-=ot,et-=ut;var ct=ot*KAPPA,dt=ut*KAPPA,ft=g+ot*2,St=et+ut*2,kt=g+ot,Tt=et+ut;return[pushGraphicsState(),moveTo(g,Tt),appendBezierCurve(g,Tt-dt,kt-ct,et,kt,et),appendBezierCurve(kt+ct,et,ft,Tt-dt,ft,Tt),appendBezierCurve(ft,Tt+dt,kt+ct,St,kt,St),appendBezierCurve(kt-ct,St,g,Tt+dt,g,Tt),popGraphicsState()]},drawEllipseCurves=function(it){var g=asNumber(it.x),et=asNumber(it.y),ot=asNumber(it.xScale),ut=asNumber(it.yScale),ct=-ot,dt=-ut,ft=ot*KAPPA,St=ut*KAPPA,kt=ct+ot*2,Tt=dt+ut*2,Rt=ct+ot,Ft=dt+ut;return[translate(g,et),rotateRadians(toRadians(it.rotate)),moveTo(ct,Ft),appendBezierCurve(ct,Ft-St,Rt-ft,dt,Rt,dt),appendBezierCurve(Rt+ft,dt,kt,Ft-St,kt,Ft),appendBezierCurve(kt,Ft+St,Rt+ft,Tt,Rt,Tt),appendBezierCurve(Rt-ft,Tt,ct,Ft+St,ct,Ft)]},drawEllipse=function(it){var g,et,ot;return __spreadArrays([pushGraphicsState(),it.graphicsState&&setGraphicsState(it.graphicsState),it.color&&setFillingColor(it.color),it.borderColor&&setStrokingColor(it.borderColor),setLineWidth(it.borderWidth),it.borderLineCap&&setLineCap(it.borderLineCap),setDashPattern((g=it.borderDashArray)!==null&&g!==void 0?g:[],(et=it.borderDashPhase)!==null&&et!==void 0?et:0)],it.rotate===void 0?drawEllipsePath({x:it.x,y:it.y,xScale:it.xScale,yScale:it.yScale}):drawEllipseCurves({x:it.x,y:it.y,xScale:it.xScale,yScale:it.yScale,rotate:(ot=it.rotate)!==null&&ot!==void 0?ot:degrees(0)}),[it.color&&it.borderWidth?fillAndStroke():it.color?fill():it.borderColor?stroke():closePath(),popGraphicsState()]).filter(Boolean)},drawSvgPath=function(it,g){var et,ot,ut;return __spreadArrays([pushGraphicsState(),g.graphicsState&&setGraphicsState(g.graphicsState),translate(g.x,g.y),rotateRadians(toRadians((et=g.rotate)!==null&&et!==void 0?et:degrees(0))),g.scale?scale(g.scale,-g.scale):scale(1,-1),g.color&&setFillingColor(g.color),g.borderColor&&setStrokingColor(g.borderColor),g.borderWidth&&setLineWidth(g.borderWidth),g.borderLineCap&&setLineCap(g.borderLineCap),setDashPattern((ot=g.borderDashArray)!==null&&ot!==void 0?ot:[],(ut=g.borderDashPhase)!==null&&ut!==void 0?ut:0)],svgPathToOperators(it),[g.color&&g.borderWidth?fillAndStroke():g.color?fill():g.borderColor?stroke():closePath(),popGraphicsState()]).filter(Boolean)},drawCheckMark=function(it){var g=asNumber(it.size),et=-1+.75,ot=-1+.51,ut=1-.525,ct=1-.31,dt=-1+.325,ft=-((dt-et)*(ct-et))/(ut-ot)+ot;return[pushGraphicsState(),it.color&&setStrokingColor(it.color),setLineWidth(it.thickness),translate(it.x,it.y),moveTo(dt*g,ft*g),lineTo(et*g,ot*g),lineTo(ct*g,ut*g),stroke(),popGraphicsState()].filter(Boolean)},rotateInPlace=function(it){return it.rotation===0?[translate(0,0),rotateDegrees(0)]:it.rotation===90?[translate(it.width,0),rotateDegrees(90)]:it.rotation===180?[translate(it.width,it.height),rotateDegrees(180)]:it.rotation===270?[translate(0,it.height),rotateDegrees(270)]:[]},drawCheckBox=function(it){var g=drawRectangle({x:it.x,y:it.y,width:it.width,height:it.height,borderWidth:it.borderWidth,color:it.color,borderColor:it.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)});if(!it.filled)return g;var et=asNumber(it.width),ot=asNumber(it.height),ut=Math.min(et,ot)/2,ct=drawCheckMark({x:et/2,y:ot/2,size:ut,thickness:it.thickness,color:it.markColor});return __spreadArrays([pushGraphicsState()],g,ct,[popGraphicsState()])},drawRadioButton=function(it){var g=asNumber(it.width),et=asNumber(it.height),ot=Math.min(g,et)/2,ut=drawEllipse({x:it.x,y:it.y,xScale:ot,yScale:ot,color:it.color,borderColor:it.borderColor,borderWidth:it.borderWidth});if(!it.filled)return ut;var ct=drawEllipse({x:it.x,y:it.y,xScale:ot*.45,yScale:ot*.45,color:it.dotColor,borderColor:void 0,borderWidth:0});return __spreadArrays([pushGraphicsState()],ut,ct,[popGraphicsState()])},drawButton=function(it){var g=asNumber(it.x),et=asNumber(it.y),ot=asNumber(it.width),ut=asNumber(it.height),ct=drawRectangle({x:g,y:et,width:ot,height:ut,borderWidth:it.borderWidth,color:it.color,borderColor:it.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),dt=drawTextLines(it.textLines,{color:it.textColor,font:it.font,size:it.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)});return __spreadArrays([pushGraphicsState()],ct,dt,[popGraphicsState()])},drawTextLines=function(it,g){for(var et=[beginText(),setFillingColor(g.color),setFontAndSize(g.font,g.size)],ot=0,ut=it.length;ot<ut;ot++){var ct=it[ot],dt=ct.encoded,ft=ct.x,St=ct.y;et.push(rotateAndSkewTextRadiansAndTranslate(toRadians(g.rotate),toRadians(g.xSkew),toRadians(g.ySkew),ft,St),showText(dt))}return et.push(endText()),et},drawTextField=function(it){var g=asNumber(it.x),et=asNumber(it.y),ot=asNumber(it.width),ut=asNumber(it.height),ct=asNumber(it.borderWidth),dt=asNumber(it.padding),ft=g+ct/2+dt,St=et+ct/2+dt,kt=ot-(ct/2+dt)*2,Tt=ut-(ct/2+dt)*2,Rt=[moveTo(ft,St),lineTo(ft,St+Tt),lineTo(ft+kt,St+Tt),lineTo(ft+kt,St),closePath(),clip(),endPath()],Ft=drawRectangle({x:g,y:et,width:ot,height:ut,borderWidth:it.borderWidth,color:it.color,borderColor:it.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),jt=drawTextLines(it.textLines,{color:it.textColor,font:it.font,size:it.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),Bt=__spreadArrays([beginMarkedContent("Tx"),pushGraphicsState()],jt,[popGraphicsState(),endMarkedContent()]);return __spreadArrays([pushGraphicsState()],Ft,Rt,Bt,[popGraphicsState()])},drawOptionList=function(it){for(var g=asNumber(it.x),et=asNumber(it.y),ot=asNumber(it.width),ut=asNumber(it.height),ct=asNumber(it.lineHeight),dt=asNumber(it.borderWidth),ft=asNumber(it.padding),St=g+dt/2+ft,kt=et+dt/2+ft,Tt=ot-(dt/2+ft)*2,Rt=ut-(dt/2+ft)*2,Ft=[moveTo(St,kt),lineTo(St,kt+Rt),lineTo(St+Tt,kt+Rt),lineTo(St+Tt,kt),closePath(),clip(),endPath()],jt=drawRectangle({x:g,y:et,width:ot,height:ut,borderWidth:it.borderWidth,color:it.color,borderColor:it.borderColor,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),Bt=[],zt=0,Ht=it.selectedLines.length;zt<Ht;zt++){var Ut=it.textLines[it.selectedLines[zt]];Bt.push.apply(Bt,drawRectangle({x:Ut.x-ft,y:Ut.y-(ct-Ut.height)/2,width:ot-dt,height:Ut.height+(ct-Ut.height)/2,borderWidth:0,color:it.selectedColor,borderColor:void 0,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}))}var Kt=drawTextLines(it.textLines,{color:it.textColor,font:it.font,size:it.fontSize,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)}),Yt=__spreadArrays([beginMarkedContent("Tx"),pushGraphicsState()],Kt,[popGraphicsState(),endMarkedContent()]);return __spreadArrays([pushGraphicsState()],jt,Bt,Ft,Yt,[popGraphicsState()])},EncryptedPDFError=function(it){__extends(g,it);function g(){var et=this,ot="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return et=it.call(this,ot)||this,et}return g}(Error),FontkitNotRegisteredError=function(it){__extends(g,it);function g(){var et=this,ot="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return et=it.call(this,ot)||this,et}return g}(Error),ForeignPageError=function(it){__extends(g,it);function g(){var et=this,ot="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return et=it.call(this,ot)||this,et}return g}(Error),RemovePageFromEmptyDocumentError=function(it){__extends(g,it);function g(){var et=this,ot="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return et=it.call(this,ot)||this,et}return g}(Error),NoSuchFieldError=function(it){__extends(g,it);function g(et){var ot=this,ut='PDFDocument has no form field with the name "'+et+'"';return ot=it.call(this,ut)||this,ot}return g}(Error),UnexpectedFieldTypeError=function(it){__extends(g,it);function g(et,ot,ut){var ct,dt,ft=this,St=ot==null?void 0:ot.name,kt=(dt=(ct=ut==null?void 0:ut.constructor)===null||ct===void 0?void 0:ct.name)!==null&&dt!==void 0?dt:ut,Tt='Expected field "'+et+'" to be of type '+St+", "+("but it is actually of type "+kt);return ft=it.call(this,Tt)||this,ft}return g}(Error);(function(it){__extends(g,it);function g(et){var ot=this,ut='Failed to select check box due to missing onValue: "'+et+'"';return ot=it.call(this,ut)||this,ot}return g})(Error);var FieldAlreadyExistsError=function(it){__extends(g,it);function g(et){var ot=this,ut='A field already exists with the specified name: "'+et+'"';return ot=it.call(this,ut)||this,ot}return g}(Error),InvalidFieldNamePartError=function(it){__extends(g,it);function g(et){var ot=this,ut='Field name contains invalid component: "'+et+'"';return ot=it.call(this,ut)||this,ot}return g}(Error);(function(it){__extends(g,it);function g(et){var ot=this,ut='A non-terminal field already exists with the specified name: "'+et+'"';return ot=it.call(this,ut)||this,ot}return g})(Error);var RichTextFieldReadError=function(it){__extends(g,it);function g(et){var ot=this,ut="Reading rich text fields is not supported: Attempted to read rich text field: "+et;return ot=it.call(this,ut)||this,ot}return g}(Error),CombedTextLayoutError=function(it){__extends(g,it);function g(et,ot){var ut=this,ct="Failed to layout combed text as lineLength="+et+" is greater than cellCount="+ot;return ut=it.call(this,ct)||this,ut}return g}(Error),ExceededMaxLengthError=function(it){__extends(g,it);function g(et,ot,ut){var ct=this,dt="Attempted to set text with length="+et+" for TextField with maxLength="+ot+" and name="+ut;return ct=it.call(this,dt)||this,ct}return g}(Error),InvalidMaxLengthError=function(it){__extends(g,it);function g(et,ot,ut){var ct=this,dt="Attempted to set maxLength="+ot+", which is less than "+et+", the length of this field's current value (name="+ut+")";return ct=it.call(this,dt)||this,ct}return g}(Error),TextAlignment;(function(it){it[it.Left=0]="Left",it[it.Center=1]="Center",it[it.Right=2]="Right"})(TextAlignment||(TextAlignment={}));var MIN_FONT_SIZE=4,MAX_FONT_SIZE=500,computeFontSize=function(it,g,et,ot){ot===void 0&&(ot=!1);for(var ut=MIN_FONT_SIZE;ut<MAX_FONT_SIZE;){for(var ct=0,dt=0,ft=it.length;dt<ft;dt++){ct+=1;for(var St=it[dt],kt=St.split(" "),Tt=et.width,Rt=0,Ft=kt.length;Rt<Ft;Rt++){var jt=Rt===Ft-1,Bt=jt?kt[Rt]:kt[Rt]+" ",zt=g.widthOfTextAtSize(Bt,ut);Tt-=zt,Tt<=0&&(ct+=1,Tt=et.width-zt)}}if(!ot&&ct>it.length)return ut-1;var Ht=g.heightAtSize(ut),Ut=Ht+Ht*.2,Kt=Ut*ct;if(Kt>Math.abs(et.height))return ut-1;ut+=1}return ut},computeCombedFontSize=function(it,g,et,ot){for(var ut=et.width/ot,ct=et.height,dt=MIN_FONT_SIZE,ft=charSplit(it);dt<MAX_FONT_SIZE;){for(var St=0,kt=ft.length;St<kt;St++){var Tt=ft[St],Rt=g.widthOfTextAtSize(Tt,dt)>ut*.75;if(Rt)return dt-1}var Ft=g.heightAtSize(dt,{descender:!1});if(Ft>ct)return dt-1;dt+=1}return dt},lastIndexOfWhitespace=function(it){for(var g=it.length;g>0;g--)if(/\s/.test(it[g]))return g},splitOutLines=function(it,g,et,ot){for(var ut,ct=it.length;ct>0;){var dt=it.substring(0,ct),ft=et.encodeText(dt),St=et.widthOfTextAtSize(dt,ot);if(St<g){var kt=it.substring(ct)||void 0;return{line:dt,encoded:ft,width:St,remainder:kt}}ct=(ut=lastIndexOfWhitespace(dt))!==null&&ut!==void 0?ut:0}return{line:it,encoded:et.encodeText(it),width:et.widthOfTextAtSize(it,ot),remainder:void 0}},layoutMultilineText=function(it,g){var et=g.alignment,ot=g.fontSize,ut=g.font,ct=g.bounds,dt=lineSplit(cleanText(it));(ot===void 0||ot===0)&&(ot=computeFontSize(dt,ut,ct,!0));for(var ft=ut.heightAtSize(ot),St=ft+ft*.2,kt=[],Tt=ct.x,Rt=ct.y,Ft=ct.x+ct.width,jt=ct.y+ct.height,Bt=ct.y+ct.height,zt=0,Ht=dt.length;zt<Ht;zt++)for(var Ut=dt[zt];Ut!==void 0;){var Kt=splitOutLines(Ut,ct.width,ut,ot),Yt=Kt.line,er=Kt.encoded,ar=Kt.width,ir=Kt.remainder,lr=et===TextAlignment.Left?ct.x:et===TextAlignment.Center?ct.x+ct.width/2-ar/2:et===TextAlignment.Right?ct.x+ct.width-ar:ct.x;Bt-=St,lr<Tt&&(Tt=lr),Bt<Rt&&(Rt=Bt),lr+ar>Ft&&(Ft=lr+ar),Bt+ft>jt&&(jt=Bt+ft),kt.push({text:Yt,encoded:er,width:ar,height:ft,x:lr,y:Bt}),Ut=ir==null?void 0:ir.trim()}return{fontSize:ot,lineHeight:St,lines:kt,bounds:{x:Tt,y:Rt,width:Ft-Tt,height:jt-Rt}}},layoutCombedText=function(it,g){var et=g.fontSize,ot=g.font,ut=g.bounds,ct=g.cellCount,dt=mergeLines(cleanText(it));if(dt.length>ct)throw new CombedTextLayoutError(dt.length,ct);(et===void 0||et===0)&&(et=computeCombedFontSize(dt,ot,ut,ct));for(var ft=ut.width/ct,St=ot.heightAtSize(et,{descender:!1}),kt=ut.y+(ut.height/2-St/2),Tt=[],Rt=ut.x,Ft=ut.y,jt=ut.x+ut.width,Bt=ut.y+ut.height,zt=0,Ht=0;zt<ct;){var Ut=charAtIndex(dt,Ht),Kt=Ut[0],Yt=Ut[1],er=ot.encodeText(Kt),ar=ot.widthOfTextAtSize(Kt,et),ir=ut.x+(ft*zt+ft/2),lr=ir-ar/2;lr<Rt&&(Rt=lr),kt<Ft&&(Ft=kt),lr+ar>jt&&(jt=lr+ar),kt+St>Bt&&(Bt=kt+St),Tt.push({text:dt,encoded:er,width:ar,height:St,x:lr,y:kt}),zt+=1,Ht+=Yt}return{fontSize:et,cells:Tt,bounds:{x:Rt,y:Ft,width:jt-Rt,height:Bt-Ft}}},layoutSinglelineText=function(it,g){var et=g.alignment,ot=g.fontSize,ut=g.font,ct=g.bounds,dt=mergeLines(cleanText(it));(ot===void 0||ot===0)&&(ot=computeFontSize([dt],ut,ct));var ft=ut.encodeText(dt),St=ut.widthOfTextAtSize(dt,ot),kt=ut.heightAtSize(ot,{descender:!1}),Tt=et===TextAlignment.Left?ct.x:et===TextAlignment.Center?ct.x+ct.width/2-St/2:et===TextAlignment.Right?ct.x+ct.width-St:ct.x,Rt=ct.y+(ct.height/2-kt/2);return{fontSize:ot,line:{text:dt,encoded:ft,width:St,height:kt,x:Tt,y:Rt},bounds:{x:Tt,y:Rt,width:St,height:kt}}},normalizeAppearance=function(it){return"normal"in it?it:{normal:it}},tfRegex=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,getDefaultFontSize=function(it){var g,et,ot=(g=it.getDefaultAppearance())!==null&&g!==void 0?g:"",ut=(et=findLastMatch(ot,tfRegex).match)!==null&&et!==void 0?et:[],ct=Number(ut[2]);return isFinite(ct)?ct:void 0},colorRegex=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,getDefaultColor=function(it){var g,et=(g=it.getDefaultAppearance())!==null&&g!==void 0?g:"",ot=findLastMatch(et,colorRegex).match,ut=ot??[],ct=ut[1],dt=ut[2],ft=ut[3],St=ut[4],kt=ut[5];if(kt==="g"&&ct)return grayscale(Number(ct));if(kt==="rg"&&ct&&dt&&ft)return rgb(Number(ct),Number(dt),Number(ft));if(kt==="k"&&ct&&dt&&ft&&St)return cmyk(Number(ct),Number(dt),Number(ft),Number(St))},updateDefaultAppearance=function(it,g,et,ot){var ut;ot===void 0&&(ot=0);var ct=[setFillingColor(g).toString(),setFontAndSize((ut=et==null?void 0:et.name)!==null&&ut!==void 0?ut:"dummy__noop",ot).toString()].join(`
`);it.setDefaultAppearance(ct)},defaultCheckBoxAppearanceProvider=function(it,g){var et,ot,ut,ct=getDefaultColor(g),dt=getDefaultColor(it.acroField),ft=g.getRectangle(),St=g.getAppearanceCharacteristics(),kt=g.getBorderStyle(),Tt=(et=kt==null?void 0:kt.getWidth())!==null&&et!==void 0?et:0,Rt=reduceRotation(St==null?void 0:St.getRotation()),Ft=adjustDimsForRotation(ft,Rt),jt=Ft.width,Bt=Ft.height,zt=rotateInPlace(__assign(__assign({},ft),{rotation:Rt})),Ht=rgb(0,0,0),Ut=(ot=componentsToColor(St==null?void 0:St.getBorderColor()))!==null&&ot!==void 0?ot:Ht,Kt=componentsToColor(St==null?void 0:St.getBackgroundColor()),Yt=componentsToColor(St==null?void 0:St.getBackgroundColor(),.8),er=(ut=ct??dt)!==null&&ut!==void 0?ut:Ht;updateDefaultAppearance(ct?g:it.acroField,er);var ar={x:0+Tt/2,y:0+Tt/2,width:jt-Tt,height:Bt-Tt,thickness:1.5,borderWidth:Tt,borderColor:Ut,markColor:er};return{normal:{on:__spreadArrays(zt,drawCheckBox(__assign(__assign({},ar),{color:Kt,filled:!0}))),off:__spreadArrays(zt,drawCheckBox(__assign(__assign({},ar),{color:Kt,filled:!1})))},down:{on:__spreadArrays(zt,drawCheckBox(__assign(__assign({},ar),{color:Yt,filled:!0}))),off:__spreadArrays(zt,drawCheckBox(__assign(__assign({},ar),{color:Yt,filled:!1})))}}},defaultRadioGroupAppearanceProvider=function(it,g){var et,ot,ut,ct=getDefaultColor(g),dt=getDefaultColor(it.acroField),ft=g.getRectangle(),St=g.getAppearanceCharacteristics(),kt=g.getBorderStyle(),Tt=(et=kt==null?void 0:kt.getWidth())!==null&&et!==void 0?et:0,Rt=reduceRotation(St==null?void 0:St.getRotation()),Ft=adjustDimsForRotation(ft,Rt),jt=Ft.width,Bt=Ft.height,zt=rotateInPlace(__assign(__assign({},ft),{rotation:Rt})),Ht=rgb(0,0,0),Ut=(ot=componentsToColor(St==null?void 0:St.getBorderColor()))!==null&&ot!==void 0?ot:Ht,Kt=componentsToColor(St==null?void 0:St.getBackgroundColor()),Yt=componentsToColor(St==null?void 0:St.getBackgroundColor(),.8),er=(ut=ct??dt)!==null&&ut!==void 0?ut:Ht;updateDefaultAppearance(ct?g:it.acroField,er);var ar={x:jt/2,y:Bt/2,width:jt-Tt,height:Bt-Tt,borderWidth:Tt,borderColor:Ut,dotColor:er};return{normal:{on:__spreadArrays(zt,drawRadioButton(__assign(__assign({},ar),{color:Kt,filled:!0}))),off:__spreadArrays(zt,drawRadioButton(__assign(__assign({},ar),{color:Kt,filled:!1})))},down:{on:__spreadArrays(zt,drawRadioButton(__assign(__assign({},ar),{color:Yt,filled:!0}))),off:__spreadArrays(zt,drawRadioButton(__assign(__assign({},ar),{color:Yt,filled:!1})))}}},defaultButtonAppearanceProvider=function(it,g,et){var ot,ut,ct,dt,ft,St=getDefaultColor(g),kt=getDefaultColor(it.acroField),Tt=getDefaultFontSize(g),Rt=getDefaultFontSize(it.acroField),Ft=g.getRectangle(),jt=g.getAppearanceCharacteristics(),Bt=g.getBorderStyle(),zt=jt==null?void 0:jt.getCaptions(),Ht=(ot=zt==null?void 0:zt.normal)!==null&&ot!==void 0?ot:"",Ut=(ct=(ut=zt==null?void 0:zt.down)!==null&&ut!==void 0?ut:Ht)!==null&&ct!==void 0?ct:"",Kt=(dt=Bt==null?void 0:Bt.getWidth())!==null&&dt!==void 0?dt:0,Yt=reduceRotation(jt==null?void 0:jt.getRotation()),er=adjustDimsForRotation(Ft,Yt),ar=er.width,ir=er.height,lr=rotateInPlace(__assign(__assign({},Ft),{rotation:Yt})),cr=rgb(0,0,0),vr=componentsToColor(jt==null?void 0:jt.getBorderColor()),xr=componentsToColor(jt==null?void 0:jt.getBackgroundColor()),yr=componentsToColor(jt==null?void 0:jt.getBackgroundColor(),.8),Sr={x:Kt,y:Kt,width:ar-Kt*2,height:ir-Kt*2},kr=layoutSinglelineText(Ht,{alignment:TextAlignment.Center,fontSize:Tt??Rt,font:et,bounds:Sr}),Pr=layoutSinglelineText(Ut,{alignment:TextAlignment.Center,fontSize:Tt??Rt,font:et,bounds:Sr}),Or=Math.min(kr.fontSize,Pr.fontSize),hr=(ft=St??kt)!==null&&ft!==void 0?ft:cr;updateDefaultAppearance(St||Tt!==void 0?g:it.acroField,hr,et,Or);var Tr={x:0+Kt/2,y:0+Kt/2,width:ar-Kt,height:ir-Kt,borderWidth:Kt,borderColor:vr,textColor:hr,font:et.name,fontSize:Or};return{normal:__spreadArrays(lr,drawButton(__assign(__assign({},Tr),{color:xr,textLines:[kr.line]}))),down:__spreadArrays(lr,drawButton(__assign(__assign({},Tr),{color:yr,textLines:[Pr.line]})))}},defaultTextFieldAppearanceProvider=function(it,g,et){var ot,ut,ct,dt,ft=getDefaultColor(g),St=getDefaultColor(it.acroField),kt=getDefaultFontSize(g),Tt=getDefaultFontSize(it.acroField),Rt=g.getRectangle(),Ft=g.getAppearanceCharacteristics(),jt=g.getBorderStyle(),Bt=(ot=it.getText())!==null&&ot!==void 0?ot:"",zt=(ut=jt==null?void 0:jt.getWidth())!==null&&ut!==void 0?ut:0,Ht=reduceRotation(Ft==null?void 0:Ft.getRotation()),Ut=adjustDimsForRotation(Rt,Ht),Kt=Ut.width,Yt=Ut.height,er=rotateInPlace(__assign(__assign({},Rt),{rotation:Ht})),ar=rgb(0,0,0),ir=componentsToColor(Ft==null?void 0:Ft.getBorderColor()),lr=componentsToColor(Ft==null?void 0:Ft.getBackgroundColor()),cr,vr,xr=it.isCombed()?0:1,yr={x:zt+xr,y:zt+xr,width:Kt-(zt+xr)*2,height:Yt-(zt+xr)*2};if(it.isMultiline()){var Sr=layoutMultilineText(Bt,{alignment:it.getAlignment(),fontSize:kt??Tt,font:et,bounds:yr});cr=Sr.lines,vr=Sr.fontSize}else if(it.isCombed()){var Sr=layoutCombedText(Bt,{fontSize:kt??Tt,font:et,bounds:yr,cellCount:(ct=it.getMaxLength())!==null&&ct!==void 0?ct:0});cr=Sr.cells,vr=Sr.fontSize}else{var Sr=layoutSinglelineText(Bt,{alignment:it.getAlignment(),fontSize:kt??Tt,font:et,bounds:yr});cr=[Sr.line],vr=Sr.fontSize}var kr=(dt=ft??St)!==null&&dt!==void 0?dt:ar;updateDefaultAppearance(ft||kt!==void 0?g:it.acroField,kr,et,vr);var Pr={x:0+zt/2,y:0+zt/2,width:Kt-zt,height:Yt-zt,borderWidth:zt??0,borderColor:ir,textColor:kr,font:et.name,fontSize:vr,color:lr,textLines:cr,padding:xr};return __spreadArrays(er,drawTextField(Pr))},defaultDropdownAppearanceProvider=function(it,g,et){var ot,ut,ct,dt=getDefaultColor(g),ft=getDefaultColor(it.acroField),St=getDefaultFontSize(g),kt=getDefaultFontSize(it.acroField),Tt=g.getRectangle(),Rt=g.getAppearanceCharacteristics(),Ft=g.getBorderStyle(),jt=(ot=it.getSelected()[0])!==null&&ot!==void 0?ot:"",Bt=(ut=Ft==null?void 0:Ft.getWidth())!==null&&ut!==void 0?ut:0,zt=reduceRotation(Rt==null?void 0:Rt.getRotation()),Ht=adjustDimsForRotation(Tt,zt),Ut=Ht.width,Kt=Ht.height,Yt=rotateInPlace(__assign(__assign({},Tt),{rotation:zt})),er=rgb(0,0,0),ar=componentsToColor(Rt==null?void 0:Rt.getBorderColor()),ir=componentsToColor(Rt==null?void 0:Rt.getBackgroundColor()),lr=1,cr={x:Bt+lr,y:Bt+lr,width:Ut-(Bt+lr)*2,height:Kt-(Bt+lr)*2},vr=layoutSinglelineText(jt,{alignment:TextAlignment.Left,fontSize:St??kt,font:et,bounds:cr}),xr=vr.line,yr=vr.fontSize,Sr=(ct=dt??ft)!==null&&ct!==void 0?ct:er;updateDefaultAppearance(dt||St!==void 0?g:it.acroField,Sr,et,yr);var kr={x:0+Bt/2,y:0+Bt/2,width:Ut-Bt,height:Kt-Bt,borderWidth:Bt??0,borderColor:ar,textColor:Sr,font:et.name,fontSize:yr,color:ir,textLines:[xr],padding:lr};return __spreadArrays(Yt,drawTextField(kr))},defaultOptionListAppearanceProvider=function(it,g,et){var ot,ut,ct=getDefaultColor(g),dt=getDefaultColor(it.acroField),ft=getDefaultFontSize(g),St=getDefaultFontSize(it.acroField),kt=g.getRectangle(),Tt=g.getAppearanceCharacteristics(),Rt=g.getBorderStyle(),Ft=(ot=Rt==null?void 0:Rt.getWidth())!==null&&ot!==void 0?ot:0,jt=reduceRotation(Tt==null?void 0:Tt.getRotation()),Bt=adjustDimsForRotation(kt,jt),zt=Bt.width,Ht=Bt.height,Ut=rotateInPlace(__assign(__assign({},kt),{rotation:jt})),Kt=rgb(0,0,0),Yt=componentsToColor(Tt==null?void 0:Tt.getBorderColor()),er=componentsToColor(Tt==null?void 0:Tt.getBackgroundColor()),ar=it.getOptions(),ir=it.getSelected();it.isSorted()&&ar.sort();for(var lr="",cr=0,vr=ar.length;cr<vr;cr++)lr+=ar[cr],cr<vr-1&&(lr+=`
`);for(var xr=1,yr={x:Ft+xr,y:Ft+xr,width:zt-(Ft+xr)*2,height:Ht-(Ft+xr)*2},Sr=layoutMultilineText(lr,{alignment:TextAlignment.Left,fontSize:ft??St,font:et,bounds:yr}),kr=Sr.lines,Pr=Sr.fontSize,Or=Sr.lineHeight,hr=[],cr=0,vr=kr.length;cr<vr;cr++){var Tr=kr[cr];ir.includes(Tr.text)&&hr.push(cr)}var mr=rgb(153/255,193/255,218/255),Er=(ut=ct??dt)!==null&&ut!==void 0?ut:Kt;return updateDefaultAppearance(ct||ft!==void 0?g:it.acroField,Er,et,Pr),__spreadArrays(Ut,drawOptionList({x:0+Ft/2,y:0+Ft/2,width:zt-Ft,height:Ht-Ft,borderWidth:Ft??0,borderColor:Yt,textColor:Er,font:et.name,fontSize:Pr,color:er,textLines:kr,lineHeight:Or,selectedColor:mr,selectedLines:hr,padding:xr}))},PDFEmbeddedPage=function(){function it(g,et,ot){this.alreadyEmbedded=!1,assertIs(g,"ref",[[PDFRef,"PDFRef"]]),assertIs(et,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(ot,"embedder",[[PDFPageEmbedder,"PDFPageEmbedder"]]),this.ref=g,this.doc=et,this.width=ot.width,this.height=ot.height,this.embedder=ot}return it.prototype.scale=function(g){return assertIs(g,"factor",["number"]),{width:this.width*g,height:this.height*g}},it.prototype.size=function(){return this.scale(1)},it.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(g){switch(g.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:g.sent(),this.alreadyEmbedded=!0,g.label=2;case 2:return[2]}})})},it.of=function(g,et,ot){return new it(g,et,ot)},it}(),PDFFont=function(){function it(g,et,ot){this.modified=!0,assertIs(g,"ref",[[PDFRef,"PDFRef"]]),assertIs(et,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(ot,"embedder",[[CustomFontEmbedder,"CustomFontEmbedder"],[StandardFontEmbedder,"StandardFontEmbedder"]]),this.ref=g,this.doc=et,this.name=ot.fontName,this.embedder=ot}return it.prototype.encodeText=function(g){return assertIs(g,"text",["string"]),this.modified=!0,this.embedder.encodeText(g)},it.prototype.widthOfTextAtSize=function(g,et){return assertIs(g,"text",["string"]),assertIs(et,"size",["number"]),this.embedder.widthOfTextAtSize(g,et)},it.prototype.heightAtSize=function(g,et){var ot;return assertIs(g,"size",["number"]),assertOrUndefined(et==null?void 0:et.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(g,{descender:(ot=et==null?void 0:et.descender)!==null&&ot!==void 0?ot:!0})},it.prototype.sizeAtHeight=function(g){return assertIs(g,"height",["number"]),this.embedder.sizeOfFontAtHeight(g)},it.prototype.getCharacterSet=function(){return this.embedder instanceof StandardFontEmbedder?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},it.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(g){switch(g.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:g.sent(),this.modified=!1,g.label=2;case 2:return[2]}})})},it.of=function(g,et,ot){return new it(g,et,ot)},it}(),PDFImage=function(){function it(g,et,ot){assertIs(g,"ref",[[PDFRef,"PDFRef"]]),assertIs(et,"doc",[[PDFDocument,"PDFDocument"]]),assertIs(ot,"embedder",[[JpegEmbedder,"JpegEmbedder"],[PngEmbedder,"PngEmbedder"]]),this.ref=g,this.doc=et,this.width=ot.width,this.height=ot.height,this.embedder=ot}return it.prototype.scale=function(g){return assertIs(g,"factor",["number"]),{width:this.width*g,height:this.height*g}},it.prototype.scaleToFit=function(g,et){assertIs(g,"width",["number"]),assertIs(et,"height",["number"]);var ot=g/this.width,ut=et/this.height,ct=Math.min(ot,ut);return this.scale(ct)},it.prototype.size=function(){return this.scale(1)},it.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var g,et,ot;return __generator(this,function(ut){switch(ut.label){case 0:return this.embedder?(this.embedTask||(g=this,et=g.doc,ot=g.ref,this.embedTask=this.embedder.embedIntoContext(et.context,ot)),[4,this.embedTask]):[2];case 1:return ut.sent(),this.embedder=void 0,[2]}})})},it.of=function(g,et,ot){return new it(g,et,ot)},it}(),ImageAlignment;(function(it){it[it.Left=0]="Left",it[it.Center=1]="Center",it[it.Right=2]="Right"})(ImageAlignment||(ImageAlignment={}));var assertFieldAppearanceOptions=function(it){assertOrUndefined(it==null?void 0:it.x,"options.x",["number"]),assertOrUndefined(it==null?void 0:it.y,"options.y",["number"]),assertOrUndefined(it==null?void 0:it.width,"options.width",["number"]),assertOrUndefined(it==null?void 0:it.height,"options.height",["number"]),assertOrUndefined(it==null?void 0:it.textColor,"options.textColor",[[Object,"Color"]]),assertOrUndefined(it==null?void 0:it.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),assertOrUndefined(it==null?void 0:it.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(it==null?void 0:it.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(it==null?void 0:it.rotate,"options.rotate",[[Object,"Rotation"]])},PDFField=function(){function it(g,et,ot){assertIs(g,"acroField",[[PDFAcroTerminal,"PDFAcroTerminal"]]),assertIs(et,"ref",[[PDFRef,"PDFRef"]]),assertIs(ot,"doc",[[PDFDocument,"PDFDocument"]]),this.acroField=g,this.ref=et,this.doc=ot}return it.prototype.getName=function(){var g;return(g=this.acroField.getFullyQualifiedName())!==null&&g!==void 0?g:""},it.prototype.isReadOnly=function(){return this.acroField.hasFlag(AcroFieldFlags.ReadOnly)},it.prototype.enableReadOnly=function(){this.acroField.setFlagTo(AcroFieldFlags.ReadOnly,!0)},it.prototype.disableReadOnly=function(){this.acroField.setFlagTo(AcroFieldFlags.ReadOnly,!1)},it.prototype.isRequired=function(){return this.acroField.hasFlag(AcroFieldFlags.Required)},it.prototype.enableRequired=function(){this.acroField.setFlagTo(AcroFieldFlags.Required,!0)},it.prototype.disableRequired=function(){this.acroField.setFlagTo(AcroFieldFlags.Required,!1)},it.prototype.isExported=function(){return!this.acroField.hasFlag(AcroFieldFlags.NoExport)},it.prototype.enableExporting=function(){this.acroField.setFlagTo(AcroFieldFlags.NoExport,!1)},it.prototype.disableExporting=function(){this.acroField.setFlagTo(AcroFieldFlags.NoExport,!0)},it.prototype.needsAppearancesUpdate=function(){throw new MethodNotImplementedError(this.constructor.name,"needsAppearancesUpdate")},it.prototype.defaultUpdateAppearances=function(g){throw new MethodNotImplementedError(this.constructor.name,"defaultUpdateAppearances")},it.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},it.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},it.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},it.prototype.createWidget=function(g){var et,ot=g.textColor,ut=g.backgroundColor,ct=g.borderColor,dt=g.borderWidth,ft=toDegrees(g.rotate),St=g.caption,kt=g.x,Tt=g.y,Rt=g.width+dt,Ft=g.height+dt,jt=!!g.hidden,Bt=g.page;assertMultiple(ft,"degreesAngle",90);var zt=PDFWidgetAnnotation.create(this.doc.context,this.ref),Ht=rotateRectangle({x:kt,y:Tt,width:Rt,height:Ft},dt,ft);zt.setRectangle(Ht),Bt&&zt.setP(Bt);var Ut=zt.getOrCreateAppearanceCharacteristics();ut&&Ut.setBackgroundColor(colorToComponents(ut)),Ut.setRotation(ft),St&&Ut.setCaptions({normal:St}),ct&&Ut.setBorderColor(colorToComponents(ct));var Kt=zt.getOrCreateBorderStyle();if(dt!==void 0&&Kt.setWidth(dt),zt.setFlagTo(AnnotationFlags.Print,!0),zt.setFlagTo(AnnotationFlags.Hidden,jt),zt.setFlagTo(AnnotationFlags.Invisible,!1),ot){var Yt=(et=this.acroField.getDefaultAppearance())!==null&&et!==void 0?et:"",er=Yt+`
`+setFillingColor(ot).toString();this.acroField.setDefaultAppearance(er)}return zt},it.prototype.updateWidgetAppearanceWithFont=function(g,et,ot){var ut=ot.normal,ct=ot.rollover,dt=ot.down;this.updateWidgetAppearances(g,{normal:this.createAppearanceStream(g,ut,et),rollover:ct&&this.createAppearanceStream(g,ct,et),down:dt&&this.createAppearanceStream(g,dt,et)})},it.prototype.updateOnOffWidgetAppearance=function(g,et,ot){var ut=ot.normal,ct=ot.rollover,dt=ot.down;this.updateWidgetAppearances(g,{normal:this.createAppearanceDict(g,ut,et),rollover:ct&&this.createAppearanceDict(g,ct,et),down:dt&&this.createAppearanceDict(g,dt,et)})},it.prototype.updateWidgetAppearances=function(g,et){var ot=et.normal,ut=et.rollover,ct=et.down;g.setNormalAppearance(ot),ut?g.setRolloverAppearance(ut):g.removeRolloverAppearance(),ct?g.setDownAppearance(ct):g.removeDownAppearance()},it.prototype.createAppearanceStream=function(g,et,ot){var ut,ct=this.acroField.dict.context,dt=g.getRectangle(),ft=dt.width,St=dt.height,kt=ot&&{Font:(ut={},ut[ot.name]=ot.ref,ut)},Tt=ct.formXObject(et,{Resources:kt,BBox:ct.obj([0,0,ft,St]),Matrix:ct.obj([1,0,0,1,0,0])}),Rt=ct.register(Tt);return Rt},it.prototype.createImageAppearanceStream=function(g,et,ot){var ut,ct,dt=this.acroField.dict.context,ft=g.getRectangle(),St=g.getAppearanceCharacteristics(),kt=g.getBorderStyle(),Tt=(ct=kt==null?void 0:kt.getWidth())!==null&&ct!==void 0?ct:0,Rt=reduceRotation(St==null?void 0:St.getRotation()),Ft=rotateInPlace(__assign(__assign({},ft),{rotation:Rt})),jt=adjustDimsForRotation(ft,Rt),Bt=et.scaleToFit(jt.width-Tt*2,jt.height-Tt*2),zt={x:Tt,y:Tt,width:Bt.width,height:Bt.height,rotate:degrees(0),xSkew:degrees(0),ySkew:degrees(0)};ot===ImageAlignment.Center?(zt.x+=(jt.width-Tt*2)/2-Bt.width/2,zt.y+=(jt.height-Tt*2)/2-Bt.height/2):ot===ImageAlignment.Right&&(zt.x=jt.width-Tt-Bt.width,zt.y=jt.height-Tt-Bt.height);var Ht=this.doc.context.addRandomSuffix("Image",10),Ut=__spreadArrays(Ft,drawImage(Ht,zt)),Kt={XObject:(ut={},ut[Ht]=et.ref,ut)},Yt=dt.formXObject(Ut,{Resources:Kt,BBox:dt.obj([0,0,ft.width,ft.height]),Matrix:dt.obj([1,0,0,1,0,0])});return dt.register(Yt)},it.prototype.createAppearanceDict=function(g,et,ot){var ut=this.acroField.dict.context,ct=this.createAppearanceStream(g,et.on),dt=this.createAppearanceStream(g,et.off),ft=ut.obj({});return ft.set(ot,ct),ft.set(PDFName.of("Off"),dt),ft},it}(),PDFCheckBox=function(it){__extends(g,it);function g(et,ot,ut){var ct=it.call(this,et,ot,ut)||this;return assertIs(et,"acroCheckBox",[[PDFAcroCheckBox,"PDFAcroCheckBox"]]),ct.acroField=et,ct}return g.prototype.check=function(){var et,ot=(et=this.acroField.getOnValue())!==null&&et!==void 0?et:PDFName.of("Yes");this.markAsDirty(),this.acroField.setValue(ot)},g.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(PDFName.of("Off"))},g.prototype.isChecked=function(){var et=this.acroField.getOnValue();return!!et&&et===this.acroField.getValue()},g.prototype.addToPage=function(et,ot){var ut,ct,dt,ft,St,kt;assertIs(et,"page",[[PDFPage$1,"PDFPage"]]),assertFieldAppearanceOptions(ot),ot||(ot={}),"textColor"in ot||(ot.textColor=rgb(0,0,0)),"backgroundColor"in ot||(ot.backgroundColor=rgb(1,1,1)),"borderColor"in ot||(ot.borderColor=rgb(0,0,0)),"borderWidth"in ot||(ot.borderWidth=1);var Tt=this.createWidget({x:(ut=ot.x)!==null&&ut!==void 0?ut:0,y:(ct=ot.y)!==null&&ct!==void 0?ct:0,width:(dt=ot.width)!==null&&dt!==void 0?dt:50,height:(ft=ot.height)!==null&&ft!==void 0?ft:50,textColor:ot.textColor,backgroundColor:ot.backgroundColor,borderColor:ot.borderColor,borderWidth:(St=ot.borderWidth)!==null&&St!==void 0?St:0,rotate:(kt=ot.rotate)!==null&&kt!==void 0?kt:degrees(0),hidden:ot.hidden,page:et.ref}),Rt=this.doc.context.register(Tt.dict);this.acroField.addWidget(Rt),Tt.setAppearanceState(PDFName.of("Off")),this.updateWidgetAppearance(Tt,PDFName.of("Yes")),et.node.addAnnot(Rt)},g.prototype.needsAppearancesUpdate=function(){for(var et,ot=this.acroField.getWidgets(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=dt.getAppearanceState(),St=(et=dt.getAppearances())===null||et===void 0?void 0:et.normal;if(!(St instanceof PDFDict)||ft&&!St.has(ft))return!0}return!1},g.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},g.prototype.updateAppearances=function(et){var ot;assertOrUndefined(et,"provider",[Function]);for(var ut=this.acroField.getWidgets(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct],St=(ot=ft.getOnValue())!==null&&ot!==void 0?ot:PDFName.of("Yes");St&&this.updateWidgetAppearance(ft,St,et)}this.markAsClean()},g.prototype.updateWidgetAppearance=function(et,ot,ut){var ct=ut??defaultCheckBoxAppearanceProvider,dt=normalizeAppearance(ct(this,et));this.updateOnOffWidgetAppearance(et,ot,dt)},g.of=function(et,ot,ut){return new g(et,ot,ut)},g}(PDFField),PDFDropdown=function(it){__extends(g,it);function g(et,ot,ut){var ct=it.call(this,et,ot,ut)||this;return assertIs(et,"acroComboBox",[[PDFAcroComboBox,"PDFAcroComboBox"]]),ct.acroField=et,ct}return g.prototype.getOptions=function(){for(var et=this.acroField.getOptions(),ot=new Array(et.length),ut=0,ct=ot.length;ut<ct;ut++){var dt=et[ut],ft=dt.display,St=dt.value;ot[ut]=(ft??St).decodeText()}return ot},g.prototype.getSelected=function(){for(var et=this.acroField.getValues(),ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++)ot[ut]=et[ut].decodeText();return ot},g.prototype.setOptions=function(et){assertIs(et,"options",[Array]);for(var ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++)ot[ut]={value:PDFHexString.fromText(et[ut])};this.acroField.setOptions(ot)},g.prototype.addOptions=function(et){assertIs(et,"options",["string",Array]);for(var ot=Array.isArray(et)?et:[et],ut=this.acroField.getOptions(),ct=new Array(ot.length),dt=0,ft=ot.length;dt<ft;dt++)ct[dt]={value:PDFHexString.fromText(ot[dt])};this.acroField.setOptions(ut.concat(ct))},g.prototype.select=function(et,ot){ot===void 0&&(ot=!1),assertIs(et,"options",["string",Array]),assertIs(ot,"merge",["boolean"]);var ut=Array.isArray(et)?et:[et],ct=this.getOptions(),dt=ut.find(function(Rt){return!ct.includes(Rt)});dt&&this.enableEditing(),this.markAsDirty(),(ut.length>1||ut.length===1&&ot)&&this.enableMultiselect();for(var ft=new Array(ut.length),St=0,kt=ut.length;St<kt;St++)ft[St]=PDFHexString.fromText(ut[St]);if(ot){var Tt=this.acroField.getValues();this.acroField.setValues(Tt.concat(ft))}else this.acroField.setValues(ft)},g.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},g.prototype.setFontSize=function(et){assertPositive(et,"fontSize"),this.acroField.setFontSize(et),this.markAsDirty()},g.prototype.isEditable=function(){return this.acroField.hasFlag(AcroChoiceFlags.Edit)},g.prototype.enableEditing=function(){this.acroField.setFlagTo(AcroChoiceFlags.Edit,!0)},g.prototype.disableEditing=function(){this.acroField.setFlagTo(AcroChoiceFlags.Edit,!1)},g.prototype.isSorted=function(){return this.acroField.hasFlag(AcroChoiceFlags.Sort)},g.prototype.enableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!0)},g.prototype.disableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!1)},g.prototype.isMultiselect=function(){return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect)},g.prototype.enableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!0)},g.prototype.disableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!1)},g.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(AcroChoiceFlags.DoNotSpellCheck)},g.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck,!1)},g.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(AcroChoiceFlags.DoNotSpellCheck,!0)},g.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange)},g.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!0)},g.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!1)},g.prototype.addToPage=function(et,ot){var ut,ct,dt,ft,St,kt,Tt;assertIs(et,"page",[[PDFPage$1,"PDFPage"]]),assertFieldAppearanceOptions(ot),ot||(ot={}),"textColor"in ot||(ot.textColor=rgb(0,0,0)),"backgroundColor"in ot||(ot.backgroundColor=rgb(1,1,1)),"borderColor"in ot||(ot.borderColor=rgb(0,0,0)),"borderWidth"in ot||(ot.borderWidth=1);var Rt=this.createWidget({x:(ut=ot.x)!==null&&ut!==void 0?ut:0,y:(ct=ot.y)!==null&&ct!==void 0?ct:0,width:(dt=ot.width)!==null&&dt!==void 0?dt:200,height:(ft=ot.height)!==null&&ft!==void 0?ft:50,textColor:ot.textColor,backgroundColor:ot.backgroundColor,borderColor:ot.borderColor,borderWidth:(St=ot.borderWidth)!==null&&St!==void 0?St:0,rotate:(kt=ot.rotate)!==null&&kt!==void 0?kt:degrees(0),hidden:ot.hidden,page:et.ref}),Ft=this.doc.context.register(Rt.dict);this.acroField.addWidget(Ft);var jt=(Tt=ot.font)!==null&&Tt!==void 0?Tt:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(Rt,jt),et.node.addAnnot(Ft)},g.prototype.needsAppearancesUpdate=function(){var et;if(this.isDirty())return!0;for(var ot=this.acroField.getWidgets(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=((et=dt.getAppearances())===null||et===void 0?void 0:et.normal)instanceof PDFStream;if(!ft)return!0}return!1},g.prototype.defaultUpdateAppearances=function(et){assertIs(et,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(et)},g.prototype.updateAppearances=function(et,ot){assertIs(et,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(ot,"provider",[Function]);for(var ut=this.acroField.getWidgets(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct];this.updateWidgetAppearance(ft,et,ot)}this.markAsClean()},g.prototype.updateWidgetAppearance=function(et,ot,ut){var ct=ut??defaultDropdownAppearanceProvider,dt=normalizeAppearance(ct(this,et,ot));this.updateWidgetAppearanceWithFont(et,ot,dt)},g.of=function(et,ot,ut){return new g(et,ot,ut)},g}(PDFField),PDFOptionList=function(it){__extends(g,it);function g(et,ot,ut){var ct=it.call(this,et,ot,ut)||this;return assertIs(et,"acroListBox",[[PDFAcroListBox,"PDFAcroListBox"]]),ct.acroField=et,ct}return g.prototype.getOptions=function(){for(var et=this.acroField.getOptions(),ot=new Array(et.length),ut=0,ct=ot.length;ut<ct;ut++){var dt=et[ut],ft=dt.display,St=dt.value;ot[ut]=(ft??St).decodeText()}return ot},g.prototype.getSelected=function(){for(var et=this.acroField.getValues(),ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++)ot[ut]=et[ut].decodeText();return ot},g.prototype.setOptions=function(et){assertIs(et,"options",[Array]),this.markAsDirty();for(var ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++)ot[ut]={value:PDFHexString.fromText(et[ut])};this.acroField.setOptions(ot)},g.prototype.addOptions=function(et){assertIs(et,"options",["string",Array]),this.markAsDirty();for(var ot=Array.isArray(et)?et:[et],ut=this.acroField.getOptions(),ct=new Array(ot.length),dt=0,ft=ot.length;dt<ft;dt++)ct[dt]={value:PDFHexString.fromText(ot[dt])};this.acroField.setOptions(ut.concat(ct))},g.prototype.select=function(et,ot){ot===void 0&&(ot=!1),assertIs(et,"options",["string",Array]),assertIs(ot,"merge",["boolean"]);var ut=Array.isArray(et)?et:[et],ct=this.getOptions();assertIsSubset(ut,"option",ct),this.markAsDirty(),(ut.length>1||ut.length===1&&ot)&&this.enableMultiselect();for(var dt=new Array(ut.length),ft=0,St=ut.length;ft<St;ft++)dt[ft]=PDFHexString.fromText(ut[ft]);if(ot){var kt=this.acroField.getValues();this.acroField.setValues(kt.concat(dt))}else this.acroField.setValues(dt)},g.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},g.prototype.setFontSize=function(et){assertPositive(et,"fontSize"),this.acroField.setFontSize(et),this.markAsDirty()},g.prototype.isSorted=function(){return this.acroField.hasFlag(AcroChoiceFlags.Sort)},g.prototype.enableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!0)},g.prototype.disableSorting=function(){this.acroField.setFlagTo(AcroChoiceFlags.Sort,!1)},g.prototype.isMultiselect=function(){return this.acroField.hasFlag(AcroChoiceFlags.MultiSelect)},g.prototype.enableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!0)},g.prototype.disableMultiselect=function(){this.acroField.setFlagTo(AcroChoiceFlags.MultiSelect,!1)},g.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(AcroChoiceFlags.CommitOnSelChange)},g.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!0)},g.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(AcroChoiceFlags.CommitOnSelChange,!1)},g.prototype.addToPage=function(et,ot){var ut,ct,dt,ft,St,kt,Tt;assertIs(et,"page",[[PDFPage$1,"PDFPage"]]),assertFieldAppearanceOptions(ot),ot||(ot={}),"textColor"in ot||(ot.textColor=rgb(0,0,0)),"backgroundColor"in ot||(ot.backgroundColor=rgb(1,1,1)),"borderColor"in ot||(ot.borderColor=rgb(0,0,0)),"borderWidth"in ot||(ot.borderWidth=1);var Rt=this.createWidget({x:(ut=ot.x)!==null&&ut!==void 0?ut:0,y:(ct=ot.y)!==null&&ct!==void 0?ct:0,width:(dt=ot.width)!==null&&dt!==void 0?dt:200,height:(ft=ot.height)!==null&&ft!==void 0?ft:100,textColor:ot.textColor,backgroundColor:ot.backgroundColor,borderColor:ot.borderColor,borderWidth:(St=ot.borderWidth)!==null&&St!==void 0?St:0,rotate:(kt=ot.rotate)!==null&&kt!==void 0?kt:degrees(0),hidden:ot.hidden,page:et.ref}),Ft=this.doc.context.register(Rt.dict);this.acroField.addWidget(Ft);var jt=(Tt=ot.font)!==null&&Tt!==void 0?Tt:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(Rt,jt),et.node.addAnnot(Ft)},g.prototype.needsAppearancesUpdate=function(){var et;if(this.isDirty())return!0;for(var ot=this.acroField.getWidgets(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=((et=dt.getAppearances())===null||et===void 0?void 0:et.normal)instanceof PDFStream;if(!ft)return!0}return!1},g.prototype.defaultUpdateAppearances=function(et){assertIs(et,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(et)},g.prototype.updateAppearances=function(et,ot){assertIs(et,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(ot,"provider",[Function]);for(var ut=this.acroField.getWidgets(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct];this.updateWidgetAppearance(ft,et,ot)}this.markAsClean()},g.prototype.updateWidgetAppearance=function(et,ot,ut){var ct=ut??defaultOptionListAppearanceProvider,dt=normalizeAppearance(ct(this,et,ot));this.updateWidgetAppearanceWithFont(et,ot,dt)},g.of=function(et,ot,ut){return new g(et,ot,ut)},g}(PDFField),PDFRadioGroup=function(it){__extends(g,it);function g(et,ot,ut){var ct=it.call(this,et,ot,ut)||this;return assertIs(et,"acroRadioButton",[[PDFAcroRadioButton,"PDFAcroRadioButton"]]),ct.acroField=et,ct}return g.prototype.getOptions=function(){var et=this.acroField.getExportValues();if(et){for(var ot=new Array(et.length),ut=0,ct=et.length;ut<ct;ut++)ot[ut]=et[ut].decodeText();return ot}for(var dt=this.acroField.getOnValues(),ft=new Array(dt.length),ut=0,ct=ft.length;ut<ct;ut++)ft[ut]=dt[ut].decodeText();return ft},g.prototype.getSelected=function(){var et=this.acroField.getValue();if(et!==PDFName.of("Off")){var ot=this.acroField.getExportValues();if(ot){for(var ut=this.acroField.getOnValues(),ct=0,dt=ut.length;ct<dt;ct++)if(ut[ct]===et)return ot[ct].decodeText()}return et.decodeText()}},g.prototype.select=function(et){assertIs(et,"option",["string"]);var ot=this.getOptions();assertIsOneOf(et,"option",ot),this.markAsDirty();var ut=this.acroField.getOnValues(),ct=this.acroField.getExportValues();if(ct)for(var dt=0,ft=ct.length;dt<ft;dt++)ct[dt].decodeText()===et&&this.acroField.setValue(ut[dt]);else for(var dt=0,ft=ut.length;dt<ft;dt++){var St=ut[dt];St.decodeText()===et&&this.acroField.setValue(St)}},g.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(PDFName.of("Off"))},g.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(AcroButtonFlags.NoToggleToOff)},g.prototype.enableOffToggling=function(){this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff,!1)},g.prototype.disableOffToggling=function(){this.acroField.setFlagTo(AcroButtonFlags.NoToggleToOff,!0)},g.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(AcroButtonFlags.RadiosInUnison)},g.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison,!1)},g.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(AcroButtonFlags.RadiosInUnison,!0)},g.prototype.addOptionToPage=function(et,ot,ut){var ct,dt,ft,St,kt,Tt,Rt,Ft,jt;assertIs(et,"option",["string"]),assertIs(ot,"page",[[PDFPage$1,"PDFPage"]]),assertFieldAppearanceOptions(ut);var Bt=this.createWidget({x:(ct=ut==null?void 0:ut.x)!==null&&ct!==void 0?ct:0,y:(dt=ut==null?void 0:ut.y)!==null&&dt!==void 0?dt:0,width:(ft=ut==null?void 0:ut.width)!==null&&ft!==void 0?ft:50,height:(St=ut==null?void 0:ut.height)!==null&&St!==void 0?St:50,textColor:(kt=ut==null?void 0:ut.textColor)!==null&&kt!==void 0?kt:rgb(0,0,0),backgroundColor:(Tt=ut==null?void 0:ut.backgroundColor)!==null&&Tt!==void 0?Tt:rgb(1,1,1),borderColor:(Rt=ut==null?void 0:ut.borderColor)!==null&&Rt!==void 0?Rt:rgb(0,0,0),borderWidth:(Ft=ut==null?void 0:ut.borderWidth)!==null&&Ft!==void 0?Ft:1,rotate:(jt=ut==null?void 0:ut.rotate)!==null&&jt!==void 0?jt:degrees(0),hidden:ut==null?void 0:ut.hidden,page:ot.ref}),zt=this.doc.context.register(Bt.dict),Ht=this.acroField.addWidgetWithOpt(zt,PDFHexString.fromText(et),!this.isMutuallyExclusive());Bt.setAppearanceState(PDFName.of("Off")),this.updateWidgetAppearance(Bt,Ht),ot.node.addAnnot(zt)},g.prototype.needsAppearancesUpdate=function(){for(var et,ot=this.acroField.getWidgets(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=dt.getAppearanceState(),St=(et=dt.getAppearances())===null||et===void 0?void 0:et.normal;if(!(St instanceof PDFDict)||ft&&!St.has(ft))return!0}return!1},g.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},g.prototype.updateAppearances=function(et){assertOrUndefined(et,"provider",[Function]);for(var ot=this.acroField.getWidgets(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=dt.getOnValue();ft&&this.updateWidgetAppearance(dt,ft,et)}},g.prototype.updateWidgetAppearance=function(et,ot,ut){var ct=ut??defaultRadioGroupAppearanceProvider,dt=normalizeAppearance(ct(this,et));this.updateOnOffWidgetAppearance(et,ot,dt)},g.of=function(et,ot,ut){return new g(et,ot,ut)},g}(PDFField),PDFSignature=function(it){__extends(g,it);function g(et,ot,ut){var ct=it.call(this,et,ot,ut)||this;return assertIs(et,"acroSignature",[[PDFAcroSignature,"PDFAcroSignature"]]),ct.acroField=et,ct}return g.prototype.needsAppearancesUpdate=function(){return!1},g.of=function(et,ot,ut){return new g(et,ot,ut)},g}(PDFField),PDFTextField=function(it){__extends(g,it);function g(et,ot,ut){var ct=it.call(this,et,ot,ut)||this;return assertIs(et,"acroText",[[PDFAcroText,"PDFAcroText"]]),ct.acroField=et,ct}return g.prototype.getText=function(){var et=this.acroField.getValue();if(!et&&this.isRichFormatted())throw new RichTextFieldReadError(this.getName());return et==null?void 0:et.decodeText()},g.prototype.setText=function(et){assertOrUndefined(et,"text",["string"]);var ot=this.getMaxLength();if(ot!==void 0&&et&&et.length>ot)throw new ExceededMaxLengthError(et.length,ot,this.getName());this.markAsDirty(),this.disableRichFormatting(),et?this.acroField.setValue(PDFHexString.fromText(et)):this.acroField.removeValue()},g.prototype.getAlignment=function(){var et=this.acroField.getQuadding();return et===0?TextAlignment.Left:et===1?TextAlignment.Center:et===2?TextAlignment.Right:TextAlignment.Left},g.prototype.setAlignment=function(et){assertIsOneOf(et,"alignment",TextAlignment),this.markAsDirty(),this.acroField.setQuadding(et)},g.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},g.prototype.setMaxLength=function(et){if(assertRangeOrUndefined(et,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),et===void 0)this.acroField.removeMaxLength();else{var ot=this.getText();if(ot&&ot.length>et)throw new InvalidMaxLengthError(ot.length,et,this.getName());this.acroField.setMaxLength(et)}},g.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},g.prototype.setImage=function(et){for(var ot=this.getAlignment(),ut=ot===TextAlignment.Center?ImageAlignment.Center:ot===TextAlignment.Right?ImageAlignment.Right:ImageAlignment.Left,ct=this.acroField.getWidgets(),dt=0,ft=ct.length;dt<ft;dt++){var St=ct[dt],kt=this.createImageAppearanceStream(St,et,ut);this.updateWidgetAppearances(St,{normal:kt})}this.markAsClean()},g.prototype.setFontSize=function(et){assertPositive(et,"fontSize"),this.acroField.setFontSize(et),this.markAsDirty()},g.prototype.isMultiline=function(){return this.acroField.hasFlag(AcroTextFlags.Multiline)},g.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Multiline,!0)},g.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Multiline,!1)},g.prototype.isPassword=function(){return this.acroField.hasFlag(AcroTextFlags.Password)},g.prototype.enablePassword=function(){this.acroField.setFlagTo(AcroTextFlags.Password,!0)},g.prototype.disablePassword=function(){this.acroField.setFlagTo(AcroTextFlags.Password,!1)},g.prototype.isFileSelector=function(){return this.acroField.hasFlag(AcroTextFlags.FileSelect)},g.prototype.enableFileSelection=function(){this.acroField.setFlagTo(AcroTextFlags.FileSelect,!0)},g.prototype.disableFileSelection=function(){this.acroField.setFlagTo(AcroTextFlags.FileSelect,!1)},g.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(AcroTextFlags.DoNotSpellCheck)},g.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck,!1)},g.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotSpellCheck,!0)},g.prototype.isScrollable=function(){return!this.acroField.hasFlag(AcroTextFlags.DoNotScroll)},g.prototype.enableScrolling=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotScroll,!1)},g.prototype.disableScrolling=function(){this.acroField.setFlagTo(AcroTextFlags.DoNotScroll,!0)},g.prototype.isCombed=function(){return this.acroField.hasFlag(AcroTextFlags.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},g.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var et="PDFTextFields must have a max length in order to be combed";console.warn(et)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(AcroTextFlags.Comb,!0)},g.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(AcroTextFlags.Comb,!1)},g.prototype.isRichFormatted=function(){return this.acroField.hasFlag(AcroTextFlags.RichText)},g.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(AcroTextFlags.RichText,!0)},g.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(AcroTextFlags.RichText,!1)},g.prototype.addToPage=function(et,ot){var ut,ct,dt,ft,St,kt,Tt;assertIs(et,"page",[[PDFPage$1,"PDFPage"]]),assertFieldAppearanceOptions(ot),ot||(ot={}),"textColor"in ot||(ot.textColor=rgb(0,0,0)),"backgroundColor"in ot||(ot.backgroundColor=rgb(1,1,1)),"borderColor"in ot||(ot.borderColor=rgb(0,0,0)),"borderWidth"in ot||(ot.borderWidth=1);var Rt=this.createWidget({x:(ut=ot.x)!==null&&ut!==void 0?ut:0,y:(ct=ot.y)!==null&&ct!==void 0?ct:0,width:(dt=ot.width)!==null&&dt!==void 0?dt:200,height:(ft=ot.height)!==null&&ft!==void 0?ft:50,textColor:ot.textColor,backgroundColor:ot.backgroundColor,borderColor:ot.borderColor,borderWidth:(St=ot.borderWidth)!==null&&St!==void 0?St:0,rotate:(kt=ot.rotate)!==null&&kt!==void 0?kt:degrees(0),hidden:ot.hidden,page:et.ref}),Ft=this.doc.context.register(Rt.dict);this.acroField.addWidget(Ft);var jt=(Tt=ot.font)!==null&&Tt!==void 0?Tt:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(Rt,jt),et.node.addAnnot(Ft)},g.prototype.needsAppearancesUpdate=function(){var et;if(this.isDirty())return!0;for(var ot=this.acroField.getWidgets(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=((et=dt.getAppearances())===null||et===void 0?void 0:et.normal)instanceof PDFStream;if(!ft)return!0}return!1},g.prototype.defaultUpdateAppearances=function(et){assertIs(et,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(et)},g.prototype.updateAppearances=function(et,ot){assertIs(et,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(ot,"provider",[Function]);for(var ut=this.acroField.getWidgets(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct];this.updateWidgetAppearance(ft,et,ot)}this.markAsClean()},g.prototype.updateWidgetAppearance=function(et,ot,ut){var ct=ut??defaultTextFieldAppearanceProvider,dt=normalizeAppearance(ct(this,et,ot));this.updateWidgetAppearanceWithFont(et,ot,dt)},g.of=function(et,ot,ut){return new g(et,ot,ut)},g}(PDFField),StandardFonts;(function(it){it.Courier="Courier",it.CourierBold="Courier-Bold",it.CourierOblique="Courier-Oblique",it.CourierBoldOblique="Courier-BoldOblique",it.Helvetica="Helvetica",it.HelveticaBold="Helvetica-Bold",it.HelveticaOblique="Helvetica-Oblique",it.HelveticaBoldOblique="Helvetica-BoldOblique",it.TimesRoman="Times-Roman",it.TimesRomanBold="Times-Bold",it.TimesRomanItalic="Times-Italic",it.TimesRomanBoldItalic="Times-BoldItalic",it.Symbol="Symbol",it.ZapfDingbats="ZapfDingbats"})(StandardFonts||(StandardFonts={}));var PDFForm=function(){function it(g,et){var ot=this;this.embedDefaultFont=function(){return ot.doc.embedStandardFont(StandardFonts.Helvetica)},assertIs(g,"acroForm",[[PDFAcroForm,"PDFAcroForm"]]),assertIs(et,"doc",[[PDFDocument,"PDFDocument"]]),this.acroForm=g,this.doc=et,this.dirtyFields=new Set,this.defaultFontCache=Cache.populatedBy(this.embedDefaultFont)}return it.prototype.hasXFA=function(){return this.acroForm.dict.has(PDFName.of("XFA"))},it.prototype.deleteXFA=function(){this.acroForm.dict.delete(PDFName.of("XFA"))},it.prototype.getFields=function(){for(var g=this.acroForm.getAllFields(),et=[],ot=0,ut=g.length;ot<ut;ot++){var ct=g[ot],dt=ct[0],ft=ct[1],St=convertToPDFField(dt,ft,this.doc);St&&et.push(St)}return et},it.prototype.getFieldMaybe=function(g){assertIs(g,"name",["string"]);for(var et=this.getFields(),ot=0,ut=et.length;ot<ut;ot++){var ct=et[ot];if(ct.getName()===g)return ct}},it.prototype.getField=function(g){assertIs(g,"name",["string"]);var et=this.getFieldMaybe(g);if(et)return et;throw new NoSuchFieldError(g)},it.prototype.getButton=function(g){assertIs(g,"name",["string"]);var et=this.getField(g);if(et instanceof PDFButton$1)return et;throw new UnexpectedFieldTypeError(g,PDFButton$1,et)},it.prototype.getCheckBox=function(g){assertIs(g,"name",["string"]);var et=this.getField(g);if(et instanceof PDFCheckBox)return et;throw new UnexpectedFieldTypeError(g,PDFCheckBox,et)},it.prototype.getDropdown=function(g){assertIs(g,"name",["string"]);var et=this.getField(g);if(et instanceof PDFDropdown)return et;throw new UnexpectedFieldTypeError(g,PDFDropdown,et)},it.prototype.getOptionList=function(g){assertIs(g,"name",["string"]);var et=this.getField(g);if(et instanceof PDFOptionList)return et;throw new UnexpectedFieldTypeError(g,PDFOptionList,et)},it.prototype.getRadioGroup=function(g){assertIs(g,"name",["string"]);var et=this.getField(g);if(et instanceof PDFRadioGroup)return et;throw new UnexpectedFieldTypeError(g,PDFRadioGroup,et)},it.prototype.getSignature=function(g){assertIs(g,"name",["string"]);var et=this.getField(g);if(et instanceof PDFSignature)return et;throw new UnexpectedFieldTypeError(g,PDFSignature,et)},it.prototype.getTextField=function(g){assertIs(g,"name",["string"]);var et=this.getField(g);if(et instanceof PDFTextField)return et;throw new UnexpectedFieldTypeError(g,PDFTextField,et)},it.prototype.createButton=function(g){assertIs(g,"name",["string"]);var et=splitFieldName(g),ot=this.findOrCreateNonTerminals(et.nonTerminal),ut=PDFAcroPushButton.create(this.doc.context);return ut.setPartialName(et.terminal),addFieldToParent(ot,[ut,ut.ref],et.terminal),PDFButton$1.of(ut,ut.ref,this.doc)},it.prototype.createCheckBox=function(g){assertIs(g,"name",["string"]);var et=splitFieldName(g),ot=this.findOrCreateNonTerminals(et.nonTerminal),ut=PDFAcroCheckBox.create(this.doc.context);return ut.setPartialName(et.terminal),addFieldToParent(ot,[ut,ut.ref],et.terminal),PDFCheckBox.of(ut,ut.ref,this.doc)},it.prototype.createDropdown=function(g){assertIs(g,"name",["string"]);var et=splitFieldName(g),ot=this.findOrCreateNonTerminals(et.nonTerminal),ut=PDFAcroComboBox.create(this.doc.context);return ut.setPartialName(et.terminal),addFieldToParent(ot,[ut,ut.ref],et.terminal),PDFDropdown.of(ut,ut.ref,this.doc)},it.prototype.createOptionList=function(g){assertIs(g,"name",["string"]);var et=splitFieldName(g),ot=this.findOrCreateNonTerminals(et.nonTerminal),ut=PDFAcroListBox.create(this.doc.context);return ut.setPartialName(et.terminal),addFieldToParent(ot,[ut,ut.ref],et.terminal),PDFOptionList.of(ut,ut.ref,this.doc)},it.prototype.createRadioGroup=function(g){assertIs(g,"name",["string"]);var et=splitFieldName(g),ot=this.findOrCreateNonTerminals(et.nonTerminal),ut=PDFAcroRadioButton.create(this.doc.context);return ut.setPartialName(et.terminal),addFieldToParent(ot,[ut,ut.ref],et.terminal),PDFRadioGroup.of(ut,ut.ref,this.doc)},it.prototype.createTextField=function(g){assertIs(g,"name",["string"]);var et=splitFieldName(g),ot=this.findOrCreateNonTerminals(et.nonTerminal),ut=PDFAcroText.create(this.doc.context);return ut.setPartialName(et.terminal),addFieldToParent(ot,[ut,ut.ref],et.terminal),PDFTextField.of(ut,ut.ref,this.doc)},it.prototype.flatten=function(g){g===void 0&&(g={updateFieldAppearances:!0}),g.updateFieldAppearances&&this.updateFieldAppearances();for(var et=this.getFields(),ot=0,ut=et.length;ot<ut;ot++){for(var ct=et[ot],dt=ct.acroField.getWidgets(),ft=0,St=dt.length;ft<St;ft++){var kt=dt[ft],Tt=this.findWidgetPage(kt),Rt=this.findWidgetAppearanceRef(ct,kt),Ft=Tt.node.newXObject("FlatWidget",Rt),jt=kt.getRectangle(),Bt=__spreadArrays([pushGraphicsState(),translate(jt.x,jt.y)],rotateInPlace(__assign(__assign({},jt),{rotation:0})),[drawObject(Ft),popGraphicsState()]).filter(Boolean);Tt.pushOperators.apply(Tt,Bt)}this.removeField(ct)}},it.prototype.removeField=function(g){for(var et=g.acroField.getWidgets(),ot=new Set,ut=0,ct=et.length;ut<ct;ut++){var dt=et[ut],ft=this.findWidgetAppearanceRef(g,dt),St=this.findWidgetPage(dt);ot.add(St),St.node.removeAnnot(ft)}ot.forEach(function(jt){return jt.node.removeAnnot(g.ref)}),this.acroForm.removeField(g.acroField);for(var kt=g.acroField.normalizedEntries().Kids,Tt=kt.size(),Rt=0;Rt<Tt;Rt++){var Ft=kt.get(Rt);Ft instanceof PDFRef&&this.doc.context.delete(Ft)}this.doc.context.delete(g.ref)},it.prototype.updateFieldAppearances=function(g){assertOrUndefined(g,"font",[[PDFFont,"PDFFont"]]),g=g??this.getDefaultFont();for(var et=this.getFields(),ot=0,ut=et.length;ot<ut;ot++){var ct=et[ot];ct.needsAppearancesUpdate()&&ct.defaultUpdateAppearances(g)}},it.prototype.markFieldAsDirty=function(g){assertOrUndefined(g,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.add(g)},it.prototype.markFieldAsClean=function(g){assertOrUndefined(g,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.delete(g)},it.prototype.fieldIsDirty=function(g){return assertOrUndefined(g,"fieldRef",[[PDFRef,"PDFRef"]]),this.dirtyFields.has(g)},it.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},it.prototype.findWidgetPage=function(g){var et=g.P(),ot=this.doc.getPages().find(function(ct){return ct.ref===et});if(ot===void 0){var ut=this.doc.context.getObjectRef(g.dict);if(ut===void 0)throw new Error("Could not find PDFRef for PDFObject");if(ot=this.doc.findPageForAnnotationRef(ut),ot===void 0)throw new Error("Could not find page for PDFRef "+ut)}return ot},it.prototype.findWidgetAppearanceRef=function(g,et){var ot,ut=et.getNormalAppearance();if(ut instanceof PDFDict&&(g instanceof PDFCheckBox||g instanceof PDFRadioGroup)){var ct=g.acroField.getValue(),dt=(ot=ut.get(ct))!==null&&ot!==void 0?ot:ut.get(PDFName.of("Off"));dt instanceof PDFRef&&(ut=dt)}if(!(ut instanceof PDFRef)){var ft=g.getName();throw new Error("Failed to extract appearance ref for: "+ft)}return ut},it.prototype.findOrCreateNonTerminals=function(g){for(var et=[this.acroForm],ot=0,ut=g.length;ot<ut;ot++){var ct=g[ot];if(!ct)throw new InvalidFieldNamePartError(ct);var dt=et[0],ft=et[1],St=this.findNonTerminal(ct,dt);if(St)et=St;else{var kt=PDFAcroNonTerminal.create(this.doc.context);kt.setPartialName(ct),kt.setParent(ft);var Tt=this.doc.context.register(kt.dict);dt.addField(Tt),et=[kt,Tt]}}return et},it.prototype.findNonTerminal=function(g,et){for(var ot=et instanceof PDFAcroForm?this.acroForm.getFields():createPDFAcroFields(et.Kids()),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=dt[0],St=dt[1];if(ft.getPartialName()===g){if(ft instanceof PDFAcroNonTerminal)return[ft,St];throw new FieldAlreadyExistsError(g)}}},it.of=function(g,et){return new it(g,et)},it}(),convertToPDFField=function(it,g,et){if(it instanceof PDFAcroPushButton)return PDFButton$1.of(it,g,et);if(it instanceof PDFAcroCheckBox)return PDFCheckBox.of(it,g,et);if(it instanceof PDFAcroComboBox)return PDFDropdown.of(it,g,et);if(it instanceof PDFAcroListBox)return PDFOptionList.of(it,g,et);if(it instanceof PDFAcroText)return PDFTextField.of(it,g,et);if(it instanceof PDFAcroRadioButton)return PDFRadioGroup.of(it,g,et);if(it instanceof PDFAcroSignature)return PDFSignature.of(it,g,et)},splitFieldName=function(it){if(it.length===0)throw new Error("PDF field names must not be empty strings");for(var g=it.split("."),et=0,ot=g.length;et<ot;et++)if(g[et]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+it+'"');return g.length===1?{nonTerminal:[],terminal:g[0]}:{nonTerminal:g.slice(0,g.length-1),terminal:g[g.length-1]}},addFieldToParent=function(it,g,et){for(var ot=it[0],ut=it[1],ct=g[0],dt=g[1],ft=ot.normalizedEntries(),St=createPDFAcroFields("Kids"in ft?ft.Kids:ft.Fields),kt=0,Tt=St.length;kt<Tt;kt++)if(St[kt][0].getPartialName()===et)throw new FieldAlreadyExistsError(et);ot.addField(dt),ct.setParent(ut)},PageSizes={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],Executive:[521.86,756],Folio:[612,936],Legal:[612,1008],Letter:[612,792],Tabloid:[792,1224]},ParseSpeeds;(function(it){it[it.Fastest=1/0]="Fastest",it[it.Fast=1500]="Fast",it[it.Medium=500]="Medium",it[it.Slow=100]="Slow"})(ParseSpeeds||(ParseSpeeds={}));var PDFEmbeddedFile=function(){function it(g,et,ot){this.alreadyEmbedded=!1,this.ref=g,this.doc=et,this.embedder=ot}return it.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var g,et,ot,ut,ct;return __generator(this,function(dt){switch(dt.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:g=dt.sent(),this.doc.catalog.has(PDFName.of("Names"))||this.doc.catalog.set(PDFName.of("Names"),this.doc.context.obj({})),et=this.doc.catalog.lookup(PDFName.of("Names"),PDFDict),et.has(PDFName.of("EmbeddedFiles"))||et.set(PDFName.of("EmbeddedFiles"),this.doc.context.obj({})),ot=et.lookup(PDFName.of("EmbeddedFiles"),PDFDict),ot.has(PDFName.of("Names"))||ot.set(PDFName.of("Names"),this.doc.context.obj([])),ut=ot.lookup(PDFName.of("Names"),PDFArray),ut.push(PDFHexString.fromText(this.embedder.fileName)),ut.push(g),this.doc.catalog.has(PDFName.of("AF"))||this.doc.catalog.set(PDFName.of("AF"),this.doc.context.obj([])),ct=this.doc.catalog.lookup(PDFName.of("AF"),PDFArray),ct.push(g),this.alreadyEmbedded=!0,dt.label=2;case 2:return[2]}})})},it.of=function(g,et,ot){return new it(g,et,ot)},it}(),PDFJavaScript=function(){function it(g,et,ot){this.alreadyEmbedded=!1,this.ref=g,this.doc=et,this.embedder=ot}return it.prototype.embed=function(){return __awaiter(this,void 0,void 0,function(){var g,et,ot,ut,ct,dt,ft;return __generator(this,function(St){switch(St.label){case 0:return this.alreadyEmbedded?[3,2]:(g=this.doc,et=g.catalog,ot=g.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:ut=St.sent(),et.has(PDFName.of("Names"))||et.set(PDFName.of("Names"),ot.obj({})),ct=et.lookup(PDFName.of("Names"),PDFDict),ct.has(PDFName.of("JavaScript"))||ct.set(PDFName.of("JavaScript"),ot.obj({})),dt=ct.lookup(PDFName.of("JavaScript"),PDFDict),dt.has(PDFName.of("Names"))||dt.set(PDFName.of("Names"),ot.obj([])),ft=dt.lookup(PDFName.of("Names"),PDFArray),ft.push(PDFHexString.fromText(this.embedder.scriptName)),ft.push(ut),this.alreadyEmbedded=!0,St.label=2;case 2:return[2]}})})},it.of=function(g,et,ot){return new it(g,et,ot)},it}(),JavaScriptEmbedder=function(){function it(g,et){this.script=g,this.scriptName=et}return it.for=function(g,et){return new it(g,et)},it.prototype.embedIntoContext=function(g,et){return __awaiter(this,void 0,void 0,function(){var ot;return __generator(this,function(ut){return ot=g.obj({Type:"Action",S:"JavaScript",JS:PDFHexString.fromText(this.script)}),et?(g.assign(et,ot),[2,et]):[2,g.register(ot)]})})},it}(),PDFDocument=function(){function it(g,et,ot){var ut=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var ct=[];return ut.catalog.Pages().traverse(function(dt,ft){if(dt instanceof PDFPageLeaf){var St=ut.pageMap.get(dt);St||(St=PDFPage$1.of(dt,ft,ut),ut.pageMap.set(dt,St)),ct.push(St)}}),ct},this.getOrCreateForm=function(){var ct=ut.catalog.getOrCreateAcroForm();return PDFForm.of(ct,ut)},assertIs(g,"context",[[PDFContext,"PDFContext"]]),assertIs(et,"ignoreEncryption",["boolean"]),this.context=g,this.catalog=g.lookup(g.trailerInfo.Root),this.isEncrypted=!!g.lookup(g.trailerInfo.Encrypt),this.pageCache=Cache.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=Cache.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!et&&this.isEncrypted)throw new EncryptedPDFError;ot&&this.updateInfoDict()}return it.load=function(g,et){return et===void 0&&(et={}),__awaiter(this,void 0,void 0,function(){var ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt;return __generator(this,function(zt){switch(zt.label){case 0:return ot=et.ignoreEncryption,ut=ot===void 0?!1:ot,ct=et.parseSpeed,dt=ct===void 0?ParseSpeeds.Slow:ct,ft=et.throwOnInvalidObject,St=ft===void 0?!1:ft,kt=et.updateMetadata,Tt=kt===void 0?!0:kt,Rt=et.capNumbers,Ft=Rt===void 0?!1:Rt,assertIs(g,"pdf",["string",Uint8Array,ArrayBuffer]),assertIs(ut,"ignoreEncryption",["boolean"]),assertIs(dt,"parseSpeed",["number"]),assertIs(St,"throwOnInvalidObject",["boolean"]),jt=toUint8Array(g),[4,PDFParser.forBytesWithOptions(jt,dt,St,Ft).parseDocument()];case 1:return Bt=zt.sent(),[2,new it(Bt,ut,Tt)]}})})},it.create=function(g){return g===void 0&&(g={}),__awaiter(this,void 0,void 0,function(){var et,ot,ut,ct,dt,ft;return __generator(this,function(St){return et=g.updateMetadata,ot=et===void 0?!0:et,ut=PDFContext.create(),ct=PDFPageTree.withContext(ut),dt=ut.register(ct),ft=PDFCatalog.withContextAndPages(ut,dt),ut.trailerInfo.Root=ut.register(ft),[2,new it(ut,!1,ot)]})})},it.prototype.registerFontkit=function(g){this.fontkit=g},it.prototype.getForm=function(){var g=this.formCache.access();return g.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),g.deleteXFA()),g},it.prototype.getTitle=function(){var g=this.getInfoDict().lookup(PDFName.Title);if(g)return assertIsLiteralOrHexString(g),g.decodeText()},it.prototype.getAuthor=function(){var g=this.getInfoDict().lookup(PDFName.Author);if(g)return assertIsLiteralOrHexString(g),g.decodeText()},it.prototype.getSubject=function(){var g=this.getInfoDict().lookup(PDFName.Subject);if(g)return assertIsLiteralOrHexString(g),g.decodeText()},it.prototype.getKeywords=function(){var g=this.getInfoDict().lookup(PDFName.Keywords);if(g)return assertIsLiteralOrHexString(g),g.decodeText()},it.prototype.getCreator=function(){var g=this.getInfoDict().lookup(PDFName.Creator);if(g)return assertIsLiteralOrHexString(g),g.decodeText()},it.prototype.getProducer=function(){var g=this.getInfoDict().lookup(PDFName.Producer);if(g)return assertIsLiteralOrHexString(g),g.decodeText()},it.prototype.getCreationDate=function(){var g=this.getInfoDict().lookup(PDFName.CreationDate);if(g)return assertIsLiteralOrHexString(g),g.decodeDate()},it.prototype.getModificationDate=function(){var g=this.getInfoDict().lookup(PDFName.ModDate);if(g)return assertIsLiteralOrHexString(g),g.decodeDate()},it.prototype.setTitle=function(g,et){assertIs(g,"title",["string"]);var ot=PDFName.of("Title");if(this.getInfoDict().set(ot,PDFHexString.fromText(g)),et!=null&&et.showInWindowTitleBar){var ut=this.catalog.getOrCreateViewerPreferences();ut.setDisplayDocTitle(!0)}},it.prototype.setAuthor=function(g){assertIs(g,"author",["string"]);var et=PDFName.of("Author");this.getInfoDict().set(et,PDFHexString.fromText(g))},it.prototype.setSubject=function(g){assertIs(g,"author",["string"]);var et=PDFName.of("Subject");this.getInfoDict().set(et,PDFHexString.fromText(g))},it.prototype.setKeywords=function(g){assertIs(g,"keywords",[Array]);var et=PDFName.of("Keywords");this.getInfoDict().set(et,PDFHexString.fromText(g.join(" ")))},it.prototype.setCreator=function(g){assertIs(g,"creator",["string"]);var et=PDFName.of("Creator");this.getInfoDict().set(et,PDFHexString.fromText(g))},it.prototype.setProducer=function(g){assertIs(g,"creator",["string"]);var et=PDFName.of("Producer");this.getInfoDict().set(et,PDFHexString.fromText(g))},it.prototype.setLanguage=function(g){assertIs(g,"language",["string"]);var et=PDFName.of("Lang");this.catalog.set(et,PDFString.of(g))},it.prototype.setCreationDate=function(g){assertIs(g,"creationDate",[[Date,"Date"]]);var et=PDFName.of("CreationDate");this.getInfoDict().set(et,PDFString.fromDate(g))},it.prototype.setModificationDate=function(g){assertIs(g,"modificationDate",[[Date,"Date"]]);var et=PDFName.of("ModDate");this.getInfoDict().set(et,PDFString.fromDate(g))},it.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},it.prototype.getPages=function(){return this.pageCache.access()},it.prototype.getPage=function(g){var et=this.getPages();return assertRange(g,"index",0,et.length-1),et[g]},it.prototype.getPageIndices=function(){return range(0,this.getPageCount())},it.prototype.removePage=function(g){var et=this.getPageCount();if(this.pageCount===0)throw new RemovePageFromEmptyDocumentError;assertRange(g,"index",0,et-1),this.catalog.removeLeafNode(g),this.pageCount=et-1},it.prototype.addPage=function(g){return assertIs(g,"page",["undefined",[PDFPage$1,"PDFPage"],Array]),this.insertPage(this.getPageCount(),g)},it.prototype.insertPage=function(g,et){var ot=this.getPageCount();if(assertRange(g,"index",0,ot),assertIs(et,"page",["undefined",[PDFPage$1,"PDFPage"],Array]),!et||Array.isArray(et)){var ut=Array.isArray(et)?et:PageSizes.A4;et=PDFPage$1.create(this),et.setSize.apply(et,ut)}else if(et.doc!==this)throw new ForeignPageError;var ct=this.catalog.insertLeafNode(et.ref,g);return et.node.setParent(ct),this.pageMap.set(et.node,et),this.pageCache.invalidate(),this.pageCount=ot+1,et},it.prototype.copyPages=function(g,et){return __awaiter(this,void 0,void 0,function(){var ot,ut,ct,dt,ft,St,kt,Tt;return __generator(this,function(Rt){switch(Rt.label){case 0:return assertIs(g,"srcDoc",[[it,"PDFDocument"]]),assertIs(et,"indices",[Array]),[4,g.flush()];case 1:for(Rt.sent(),ot=PDFObjectCopier.for(g.context,this.context),ut=g.getPages(),ct=new Array(et.length),dt=0,ft=et.length;dt<ft;dt++)St=ut[et[dt]],kt=ot.copy(St.node),Tt=this.context.register(kt),ct[dt]=PDFPage$1.of(kt,Tt,this);return[2,ct]}})})},it.prototype.copy=function(){return __awaiter(this,void 0,void 0,function(){var g,et,ot,ut;return __generator(this,function(ct){switch(ct.label){case 0:return[4,it.create()];case 1:return g=ct.sent(),[4,g.copyPages(this,this.getPageIndices())];case 2:for(et=ct.sent(),ot=0,ut=et.length;ot<ut;ot++)g.addPage(et[ot]);return this.getAuthor()!==void 0&&g.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&g.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&g.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&g.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&g.setProducer(this.getProducer()),this.getSubject()!==void 0&&g.setSubject(this.getSubject()),this.getTitle()!==void 0&&g.setTitle(this.getTitle()),g.defaultWordBreaks=this.defaultWordBreaks,[2,g]}})})},it.prototype.addJavaScript=function(g,et){assertIs(g,"name",["string"]),assertIs(et,"script",["string"]);var ot=JavaScriptEmbedder.for(et,g),ut=this.context.nextRef(),ct=PDFJavaScript.of(ut,this,ot);this.javaScripts.push(ct)},it.prototype.attach=function(g,et,ot){return ot===void 0&&(ot={}),__awaiter(this,void 0,void 0,function(){var ut,ct,dt,ft;return __generator(this,function(St){return assertIs(g,"attachment",["string",Uint8Array,ArrayBuffer]),assertIs(et,"name",["string"]),assertOrUndefined(ot.mimeType,"mimeType",["string"]),assertOrUndefined(ot.description,"description",["string"]),assertOrUndefined(ot.creationDate,"options.creationDate",[Date]),assertOrUndefined(ot.modificationDate,"options.modificationDate",[Date]),assertIsOneOfOrUndefined(ot.afRelationship,"options.afRelationship",AFRelationship),ut=toUint8Array(g),ct=FileEmbedder.for(ut,et,ot),dt=this.context.nextRef(),ft=PDFEmbeddedFile.of(dt,this,ct),this.embeddedFiles.push(ft),[2]})})},it.prototype.embedFont=function(g,et){return et===void 0&&(et={}),__awaiter(this,void 0,void 0,function(){var ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft;return __generator(this,function(jt){switch(jt.label){case 0:return ot=et.subset,ut=ot===void 0?!1:ot,ct=et.customName,dt=et.features,assertIs(g,"font",["string",Uint8Array,ArrayBuffer]),assertIs(ut,"subset",["boolean"]),isStandardFont(g)?(ft=StandardFontEmbedder.for(g,ct),[3,7]):[3,1];case 1:return canBeConvertedToUint8Array(g)?(St=toUint8Array(g),kt=this.assertFontkit(),ut?[4,CustomFontSubsetEmbedder.for(kt,St,ct,dt)]:[3,3]):[3,6];case 2:return Tt=jt.sent(),[3,5];case 3:return[4,CustomFontEmbedder.for(kt,St,ct,dt)];case 4:Tt=jt.sent(),jt.label=5;case 5:return ft=Tt,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return Rt=this.context.nextRef(),Ft=PDFFont.of(Rt,this,ft),this.fonts.push(Ft),[2,Ft]}})})},it.prototype.embedStandardFont=function(g,et){if(assertIs(g,"font",["string"]),!isStandardFont(g))throw new TypeError("`font` must be one of type `StandardFonts`");var ot=StandardFontEmbedder.for(g,et),ut=this.context.nextRef(),ct=PDFFont.of(ut,this,ot);return this.fonts.push(ct),ct},it.prototype.embedJpg=function(g){return __awaiter(this,void 0,void 0,function(){var et,ot,ut,ct;return __generator(this,function(dt){switch(dt.label){case 0:return assertIs(g,"jpg",["string",Uint8Array,ArrayBuffer]),et=toUint8Array(g),[4,JpegEmbedder.for(et)];case 1:return ot=dt.sent(),ut=this.context.nextRef(),ct=PDFImage.of(ut,this,ot),this.images.push(ct),[2,ct]}})})},it.prototype.embedPng=function(g){return __awaiter(this,void 0,void 0,function(){var et,ot,ut,ct;return __generator(this,function(dt){switch(dt.label){case 0:return assertIs(g,"png",["string",Uint8Array,ArrayBuffer]),et=toUint8Array(g),[4,PngEmbedder.for(et)];case 1:return ot=dt.sent(),ut=this.context.nextRef(),ct=PDFImage.of(ut,this,ot),this.images.push(ct),[2,ct]}})})},it.prototype.embedPdf=function(g,et){return et===void 0&&(et=[0]),__awaiter(this,void 0,void 0,function(){var ot,ut,ct;return __generator(this,function(dt){switch(dt.label){case 0:return assertIs(g,"pdf",["string",Uint8Array,ArrayBuffer,[it,"PDFDocument"]]),assertIs(et,"indices",[Array]),g instanceof it?(ut=g,[3,3]):[3,1];case 1:return[4,it.load(g)];case 2:ut=dt.sent(),dt.label=3;case 3:return ot=ut,ct=pluckIndices(ot.getPages(),et),[2,this.embedPages(ct)]}})})},it.prototype.embedPage=function(g,et,ot){return __awaiter(this,void 0,void 0,function(){var ut;return __generator(this,function(ct){switch(ct.label){case 0:return assertIs(g,"page",[[PDFPage$1,"PDFPage"]]),[4,this.embedPages([g],[et],[ot])];case 1:return ut=ct.sent()[0],[2,ut]}})})},it.prototype.embedPages=function(g,et,ot){return et===void 0&&(et=[]),ot===void 0&&(ot=[]),__awaiter(this,void 0,void 0,function(){var kt,Tt,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt,zt,Ht;return __generator(this,function(Ut){switch(Ut.label){case 0:if(g.length===0)return[2,[]];for(kt=0,Tt=g.length-1;kt<Tt;kt++)if(ut=g[kt],ct=g[kt+1],ut.node.context!==ct.node.context)throw new PageEmbeddingMismatchedContextError;dt=g[0].node.context,ft=dt===this.context?function(Kt){return Kt}:PDFObjectCopier.for(dt,this.context).copy,St=new Array(g.length),kt=0,Tt=g.length,Ut.label=1;case 1:return kt<Tt?(Rt=ft(g[kt].node),Ft=et[kt],jt=ot[kt],[4,PDFPageEmbedder.for(Rt,Ft,jt)]):[3,4];case 2:Bt=Ut.sent(),zt=this.context.nextRef(),St[kt]=PDFEmbeddedPage.of(zt,this,Bt),Ut.label=3;case 3:return kt++,[3,1];case 4:return(Ht=this.embeddedPages).push.apply(Ht,St),[2,St]}})})},it.prototype.flush=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(g){switch(g.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return g.sent(),[4,this.embedAll(this.images)];case 2:return g.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return g.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return g.sent(),[4,this.embedAll(this.javaScripts)];case 5:return g.sent(),[2]}})})},it.prototype.save=function(g){return g===void 0&&(g={}),__awaiter(this,void 0,void 0,function(){var et,ot,ut,ct,dt,ft,St,kt,Tt,Rt;return __generator(this,function(Ft){switch(Ft.label){case 0:return et=g.useObjectStreams,ot=et===void 0?!0:et,ut=g.addDefaultPage,ct=ut===void 0?!0:ut,dt=g.objectsPerTick,ft=dt===void 0?50:dt,St=g.updateFieldAppearances,kt=St===void 0?!0:St,assertIs(ot,"useObjectStreams",["boolean"]),assertIs(ct,"addDefaultPage",["boolean"]),assertIs(ft,"objectsPerTick",["number"]),assertIs(kt,"updateFieldAppearances",["boolean"]),ct&&this.getPageCount()===0&&this.addPage(),kt&&(Tt=this.formCache.getValue(),Tt&&Tt.updateFieldAppearances()),[4,this.flush()];case 1:return Ft.sent(),Rt=ot?PDFStreamWriter:PDFWriter,[2,Rt.forContext(this.context,ft).serializeToBuffer()]}})})},it.prototype.saveAsBase64=function(g){return g===void 0&&(g={}),__awaiter(this,void 0,void 0,function(){var et,ot,ut,ct,dt;return __generator(this,function(ft){switch(ft.label){case 0:return et=g.dataUri,ot=et===void 0?!1:et,ut=__rest$1(g,["dataUri"]),assertIs(ot,"dataUri",["boolean"]),[4,this.save(ut)];case 1:return ct=ft.sent(),dt=encodeToBase64(ct),[2,ot?"data:application/pdf;base64,"+dt:dt]}})})},it.prototype.findPageForAnnotationRef=function(g){for(var et=this.getPages(),ot=0,ut=et.length;ot<ut;ot++){var ct=et[ot],dt=ct.node.Annots();if((dt==null?void 0:dt.indexOf(g))!==void 0)return ct}},it.prototype.embedAll=function(g){return __awaiter(this,void 0,void 0,function(){var et,ot;return __generator(this,function(ut){switch(ut.label){case 0:et=0,ot=g.length,ut.label=1;case 1:return et<ot?[4,g[et].embed()]:[3,4];case 2:ut.sent(),ut.label=3;case 3:return et++,[3,1];case 4:return[2]}})})},it.prototype.updateInfoDict=function(){var g="pdf-lib (https://github.com/Hopding/pdf-lib)",et=new Date,ot=this.getInfoDict();this.setProducer(g),this.setModificationDate(et),ot.get(PDFName.of("Creator"))||this.setCreator(g),ot.get(PDFName.of("CreationDate"))||this.setCreationDate(et)},it.prototype.getInfoDict=function(){var g=this.context.lookup(this.context.trailerInfo.Info);if(g instanceof PDFDict)return g;var et=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(et),et},it.prototype.assertFontkit=function(){if(!this.fontkit)throw new FontkitNotRegisteredError;return this.fontkit},it}();function assertIsLiteralOrHexString(it){if(!(it instanceof PDFHexString)&&!(it instanceof PDFString))throw new UnexpectedObjectTypeError([PDFHexString,PDFString],it)}var BlendMode;(function(it){it.Normal="Normal",it.Multiply="Multiply",it.Screen="Screen",it.Overlay="Overlay",it.Darken="Darken",it.Lighten="Lighten",it.ColorDodge="ColorDodge",it.ColorBurn="ColorBurn",it.HardLight="HardLight",it.SoftLight="SoftLight",it.Difference="Difference",it.Exclusion="Exclusion"})(BlendMode||(BlendMode={}));var PDFPage$1=function(){function it(g,et,ot){this.fontSize=24,this.fontColor=rgb(0,0,0),this.lineHeight=24,this.x=0,this.y=0,assertIs(g,"leafNode",[[PDFPageLeaf,"PDFPageLeaf"]]),assertIs(et,"ref",[[PDFRef,"PDFRef"]]),assertIs(ot,"doc",[[PDFDocument,"PDFDocument"]]),this.node=g,this.ref=et,this.doc=ot}return it.prototype.setRotation=function(g){var et=toDegrees(g);assertMultiple(et,"degreesAngle",90),this.node.set(PDFName.of("Rotate"),this.doc.context.obj(et))},it.prototype.getRotation=function(){var g=this.node.Rotate();return degrees(g?g.asNumber():0)},it.prototype.setSize=function(g,et){assertIs(g,"width",["number"]),assertIs(et,"height",["number"]);var ot=this.getMediaBox();this.setMediaBox(ot.x,ot.y,g,et);var ut=this.getCropBox(),ct=this.getBleedBox(),dt=this.getTrimBox(),ft=this.getArtBox(),St=this.node.CropBox(),kt=this.node.BleedBox(),Tt=this.node.TrimBox(),Rt=this.node.ArtBox();St&&rectanglesAreEqual(ut,ot)&&this.setCropBox(ot.x,ot.y,g,et),kt&&rectanglesAreEqual(ct,ot)&&this.setBleedBox(ot.x,ot.y,g,et),Tt&&rectanglesAreEqual(dt,ot)&&this.setTrimBox(ot.x,ot.y,g,et),Rt&&rectanglesAreEqual(ft,ot)&&this.setArtBox(ot.x,ot.y,g,et)},it.prototype.setWidth=function(g){assertIs(g,"width",["number"]),this.setSize(g,this.getSize().height)},it.prototype.setHeight=function(g){assertIs(g,"height",["number"]),this.setSize(this.getSize().width,g)},it.prototype.setMediaBox=function(g,et,ot,ut){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),assertIs(ot,"width",["number"]),assertIs(ut,"height",["number"]);var ct=this.doc.context.obj([g,et,g+ot,et+ut]);this.node.set(PDFName.MediaBox,ct)},it.prototype.setCropBox=function(g,et,ot,ut){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),assertIs(ot,"width",["number"]),assertIs(ut,"height",["number"]);var ct=this.doc.context.obj([g,et,g+ot,et+ut]);this.node.set(PDFName.CropBox,ct)},it.prototype.setBleedBox=function(g,et,ot,ut){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),assertIs(ot,"width",["number"]),assertIs(ut,"height",["number"]);var ct=this.doc.context.obj([g,et,g+ot,et+ut]);this.node.set(PDFName.BleedBox,ct)},it.prototype.setTrimBox=function(g,et,ot,ut){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),assertIs(ot,"width",["number"]),assertIs(ut,"height",["number"]);var ct=this.doc.context.obj([g,et,g+ot,et+ut]);this.node.set(PDFName.TrimBox,ct)},it.prototype.setArtBox=function(g,et,ot,ut){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),assertIs(ot,"width",["number"]),assertIs(ut,"height",["number"]);var ct=this.doc.context.obj([g,et,g+ot,et+ut]);this.node.set(PDFName.ArtBox,ct)},it.prototype.getSize=function(){var g=this.getMediaBox(),et=g.width,ot=g.height;return{width:et,height:ot}},it.prototype.getWidth=function(){return this.getSize().width},it.prototype.getHeight=function(){return this.getSize().height},it.prototype.getMediaBox=function(){var g=this.node.MediaBox();return g.asRectangle()},it.prototype.getCropBox=function(){var g,et=this.node.CropBox();return(g=et==null?void 0:et.asRectangle())!==null&&g!==void 0?g:this.getMediaBox()},it.prototype.getBleedBox=function(){var g,et=this.node.BleedBox();return(g=et==null?void 0:et.asRectangle())!==null&&g!==void 0?g:this.getCropBox()},it.prototype.getTrimBox=function(){var g,et=this.node.TrimBox();return(g=et==null?void 0:et.asRectangle())!==null&&g!==void 0?g:this.getCropBox()},it.prototype.getArtBox=function(){var g,et=this.node.ArtBox();return(g=et==null?void 0:et.asRectangle())!==null&&g!==void 0?g:this.getCropBox()},it.prototype.translateContent=function(g,et){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),this.node.normalize(),this.getContentStream();var ot=this.createContentStream(pushGraphicsState(),translate(g,et)),ut=this.doc.context.register(ot),ct=this.createContentStream(popGraphicsState()),dt=this.doc.context.register(ct);this.node.wrapContentStreams(ut,dt)},it.prototype.scale=function(g,et){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),this.setSize(this.getWidth()*g,this.getHeight()*et),this.scaleContent(g,et),this.scaleAnnotations(g,et)},it.prototype.scaleContent=function(g,et){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),this.node.normalize(),this.getContentStream();var ot=this.createContentStream(pushGraphicsState(),scale(g,et)),ut=this.doc.context.register(ot),ct=this.createContentStream(popGraphicsState()),dt=this.doc.context.register(ct);this.node.wrapContentStreams(ut,dt)},it.prototype.scaleAnnotations=function(g,et){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]);var ot=this.node.Annots();if(ot)for(var ut=0;ut<ot.size();ut++){var ct=ot.lookup(ut);ct instanceof PDFDict&&this.scaleAnnot(ct,g,et)}},it.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},it.prototype.setFont=function(g){assertIs(g,"font",[[PDFFont,"PDFFont"]]),this.font=g,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},it.prototype.setFontSize=function(g){assertIs(g,"fontSize",["number"]),this.fontSize=g},it.prototype.setFontColor=function(g){assertIs(g,"fontColor",[[Object,"Color"]]),this.fontColor=g},it.prototype.setLineHeight=function(g){assertIs(g,"lineHeight",["number"]),this.lineHeight=g},it.prototype.getPosition=function(){return{x:this.x,y:this.y}},it.prototype.getX=function(){return this.x},it.prototype.getY=function(){return this.y},it.prototype.moveTo=function(g,et){assertIs(g,"x",["number"]),assertIs(et,"y",["number"]),this.x=g,this.y=et},it.prototype.moveDown=function(g){assertIs(g,"yDecrease",["number"]),this.y-=g},it.prototype.moveUp=function(g){assertIs(g,"yIncrease",["number"]),this.y+=g},it.prototype.moveLeft=function(g){assertIs(g,"xDecrease",["number"]),this.x-=g},it.prototype.moveRight=function(g){assertIs(g,"xIncrease",["number"]),this.x+=g},it.prototype.pushOperators=function(){for(var g=[],et=0;et<arguments.length;et++)g[et]=arguments[et];assertEachIs(g,"operator",[[PDFOperator,"PDFOperator"]]);var ot=this.getContentStream();ot.push.apply(ot,g)},it.prototype.drawText=function(g,et){var ot,ut,ct,dt,ft,St,kt;et===void 0&&(et={}),assertIs(g,"text",["string"]),assertOrUndefined(et.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(et.opacity,"opacity.opacity",0,1),assertOrUndefined(et.font,"options.font",[[PDFFont,"PDFFont"]]),assertOrUndefined(et.size,"options.size",["number"]),assertOrUndefined(et.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(et.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(et.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertOrUndefined(et.x,"options.x",["number"]),assertOrUndefined(et.y,"options.y",["number"]),assertOrUndefined(et.lineHeight,"options.lineHeight",["number"]),assertOrUndefined(et.maxWidth,"options.maxWidth",["number"]),assertOrUndefined(et.wordBreaks,"options.wordBreaks",[Array]),assertIsOneOfOrUndefined(et.blendMode,"options.blendMode",BlendMode);for(var Tt=this.setOrEmbedFont(et.font),Rt=Tt.oldFont,Ft=Tt.newFont,jt=Tt.newFontKey,Bt=et.size||this.fontSize,zt=et.wordBreaks||this.doc.defaultWordBreaks,Ht=function(lr){return Ft.widthOfTextAtSize(lr,Bt)},Ut=et.maxWidth===void 0?lineSplit(cleanText(g)):breakTextIntoLines(g,zt,et.maxWidth,Ht),Kt=new Array(Ut.length),Yt=0,er=Ut.length;Yt<er;Yt++)Kt[Yt]=Ft.encodeText(Ut[Yt]);var ar=this.maybeEmbedGraphicsState({opacity:et.opacity,blendMode:et.blendMode}),ir=this.getContentStream();ir.push.apply(ir,drawLinesOfText(Kt,{color:(ot=et.color)!==null&&ot!==void 0?ot:this.fontColor,font:jt,size:Bt,rotate:(ut=et.rotate)!==null&&ut!==void 0?ut:degrees(0),xSkew:(ct=et.xSkew)!==null&&ct!==void 0?ct:degrees(0),ySkew:(dt=et.ySkew)!==null&&dt!==void 0?dt:degrees(0),x:(ft=et.x)!==null&&ft!==void 0?ft:this.x,y:(St=et.y)!==null&&St!==void 0?St:this.y,lineHeight:(kt=et.lineHeight)!==null&&kt!==void 0?kt:this.lineHeight,graphicsState:ar})),et.font&&(Rt?this.setFont(Rt):this.resetFont())},it.prototype.drawImage=function(g,et){var ot,ut,ct,dt,ft,St,kt;et===void 0&&(et={}),assertIs(g,"image",[[PDFImage,"PDFImage"]]),assertOrUndefined(et.x,"options.x",["number"]),assertOrUndefined(et.y,"options.y",["number"]),assertOrUndefined(et.width,"options.width",["number"]),assertOrUndefined(et.height,"options.height",["number"]),assertOrUndefined(et.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(et.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(et.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertRangeOrUndefined(et.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(et.blendMode,"options.blendMode",BlendMode);var Tt=this.node.newXObject("Image",g.ref),Rt=this.maybeEmbedGraphicsState({opacity:et.opacity,blendMode:et.blendMode}),Ft=this.getContentStream();Ft.push.apply(Ft,drawImage(Tt,{x:(ot=et.x)!==null&&ot!==void 0?ot:this.x,y:(ut=et.y)!==null&&ut!==void 0?ut:this.y,width:(ct=et.width)!==null&&ct!==void 0?ct:g.size().width,height:(dt=et.height)!==null&&dt!==void 0?dt:g.size().height,rotate:(ft=et.rotate)!==null&&ft!==void 0?ft:degrees(0),xSkew:(St=et.xSkew)!==null&&St!==void 0?St:degrees(0),ySkew:(kt=et.ySkew)!==null&&kt!==void 0?kt:degrees(0),graphicsState:Rt}))},it.prototype.drawPage=function(g,et){var ot,ut,ct,dt,ft;et===void 0&&(et={}),assertIs(g,"embeddedPage",[[PDFEmbeddedPage,"PDFEmbeddedPage"]]),assertOrUndefined(et.x,"options.x",["number"]),assertOrUndefined(et.y,"options.y",["number"]),assertOrUndefined(et.xScale,"options.xScale",["number"]),assertOrUndefined(et.yScale,"options.yScale",["number"]),assertOrUndefined(et.width,"options.width",["number"]),assertOrUndefined(et.height,"options.height",["number"]),assertOrUndefined(et.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(et.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(et.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertRangeOrUndefined(et.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(et.blendMode,"options.blendMode",BlendMode);var St=this.node.newXObject("EmbeddedPdfPage",g.ref),kt=this.maybeEmbedGraphicsState({opacity:et.opacity,blendMode:et.blendMode}),Tt=et.width!==void 0?et.width/g.width:et.xScale!==void 0?et.xScale:1,Rt=et.height!==void 0?et.height/g.height:et.yScale!==void 0?et.yScale:1,Ft=this.getContentStream();Ft.push.apply(Ft,drawPage(St,{x:(ot=et.x)!==null&&ot!==void 0?ot:this.x,y:(ut=et.y)!==null&&ut!==void 0?ut:this.y,xScale:Tt,yScale:Rt,rotate:(ct=et.rotate)!==null&&ct!==void 0?ct:degrees(0),xSkew:(dt=et.xSkew)!==null&&dt!==void 0?dt:degrees(0),ySkew:(ft=et.ySkew)!==null&&ft!==void 0?ft:degrees(0),graphicsState:kt}))},it.prototype.drawSvgPath=function(g,et){var ot,ut,ct,dt,ft,St,kt,Tt,Rt;et===void 0&&(et={}),assertIs(g,"path",["string"]),assertOrUndefined(et.x,"options.x",["number"]),assertOrUndefined(et.y,"options.y",["number"]),assertOrUndefined(et.scale,"options.scale",["number"]),assertOrUndefined(et.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(et.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(et.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(et.opacity,"opacity.opacity",0,1),assertOrUndefined(et.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(et.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(et.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(et.borderLineCap,"options.borderLineCap",LineCapStyle),assertRangeOrUndefined(et.borderOpacity,"options.borderOpacity",0,1),assertIsOneOfOrUndefined(et.blendMode,"options.blendMode",BlendMode);var Ft=this.maybeEmbedGraphicsState({opacity:et.opacity,borderOpacity:et.borderOpacity,blendMode:et.blendMode});!("color"in et)&&!("borderColor"in et)&&(et.borderColor=rgb(0,0,0));var jt=this.getContentStream();jt.push.apply(jt,drawSvgPath(g,{x:(ot=et.x)!==null&&ot!==void 0?ot:this.x,y:(ut=et.y)!==null&&ut!==void 0?ut:this.y,scale:et.scale,rotate:(ct=et.rotate)!==null&&ct!==void 0?ct:degrees(0),color:(dt=et.color)!==null&&dt!==void 0?dt:void 0,borderColor:(ft=et.borderColor)!==null&&ft!==void 0?ft:void 0,borderWidth:(St=et.borderWidth)!==null&&St!==void 0?St:0,borderDashArray:(kt=et.borderDashArray)!==null&&kt!==void 0?kt:void 0,borderDashPhase:(Tt=et.borderDashPhase)!==null&&Tt!==void 0?Tt:void 0,borderLineCap:(Rt=et.borderLineCap)!==null&&Rt!==void 0?Rt:void 0,graphicsState:Ft}))},it.prototype.drawLine=function(g){var et,ot,ut,ct,dt;assertIs(g.start,"options.start",[[Object,"{ x: number, y: number }"]]),assertIs(g.end,"options.end",[[Object,"{ x: number, y: number }"]]),assertIs(g.start.x,"options.start.x",["number"]),assertIs(g.start.y,"options.start.y",["number"]),assertIs(g.end.x,"options.end.x",["number"]),assertIs(g.end.y,"options.end.y",["number"]),assertOrUndefined(g.thickness,"options.thickness",["number"]),assertOrUndefined(g.color,"options.color",[[Object,"Color"]]),assertOrUndefined(g.dashArray,"options.dashArray",[Array]),assertOrUndefined(g.dashPhase,"options.dashPhase",["number"]),assertIsOneOfOrUndefined(g.lineCap,"options.lineCap",LineCapStyle),assertRangeOrUndefined(g.opacity,"opacity.opacity",0,1),assertIsOneOfOrUndefined(g.blendMode,"options.blendMode",BlendMode);var ft=this.maybeEmbedGraphicsState({borderOpacity:g.opacity,blendMode:g.blendMode});"color"in g||(g.color=rgb(0,0,0));var St=this.getContentStream();St.push.apply(St,drawLine({start:g.start,end:g.end,thickness:(et=g.thickness)!==null&&et!==void 0?et:1,color:(ot=g.color)!==null&&ot!==void 0?ot:void 0,dashArray:(ut=g.dashArray)!==null&&ut!==void 0?ut:void 0,dashPhase:(ct=g.dashPhase)!==null&&ct!==void 0?ct:void 0,lineCap:(dt=g.lineCap)!==null&&dt!==void 0?dt:void 0,graphicsState:ft}))},it.prototype.drawRectangle=function(g){var et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt;g===void 0&&(g={}),assertOrUndefined(g.x,"options.x",["number"]),assertOrUndefined(g.y,"options.y",["number"]),assertOrUndefined(g.width,"options.width",["number"]),assertOrUndefined(g.height,"options.height",["number"]),assertOrUndefined(g.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(g.xSkew,"options.xSkew",[[Object,"Rotation"]]),assertOrUndefined(g.ySkew,"options.ySkew",[[Object,"Rotation"]]),assertOrUndefined(g.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(g.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(g.opacity,"opacity.opacity",0,1),assertOrUndefined(g.borderColor,"options.borderColor",[[Object,"Color"]]),assertOrUndefined(g.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(g.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(g.borderLineCap,"options.borderLineCap",LineCapStyle),assertRangeOrUndefined(g.borderOpacity,"options.borderOpacity",0,1),assertIsOneOfOrUndefined(g.blendMode,"options.blendMode",BlendMode);var zt=this.maybeEmbedGraphicsState({opacity:g.opacity,borderOpacity:g.borderOpacity,blendMode:g.blendMode});!("color"in g)&&!("borderColor"in g)&&(g.color=rgb(0,0,0));var Ht=this.getContentStream();Ht.push.apply(Ht,drawRectangle({x:(et=g.x)!==null&&et!==void 0?et:this.x,y:(ot=g.y)!==null&&ot!==void 0?ot:this.y,width:(ut=g.width)!==null&&ut!==void 0?ut:150,height:(ct=g.height)!==null&&ct!==void 0?ct:100,rotate:(dt=g.rotate)!==null&&dt!==void 0?dt:degrees(0),xSkew:(ft=g.xSkew)!==null&&ft!==void 0?ft:degrees(0),ySkew:(St=g.ySkew)!==null&&St!==void 0?St:degrees(0),borderWidth:(kt=g.borderWidth)!==null&&kt!==void 0?kt:0,color:(Tt=g.color)!==null&&Tt!==void 0?Tt:void 0,borderColor:(Rt=g.borderColor)!==null&&Rt!==void 0?Rt:void 0,borderDashArray:(Ft=g.borderDashArray)!==null&&Ft!==void 0?Ft:void 0,borderDashPhase:(jt=g.borderDashPhase)!==null&&jt!==void 0?jt:void 0,graphicsState:zt,borderLineCap:(Bt=g.borderLineCap)!==null&&Bt!==void 0?Bt:void 0}))},it.prototype.drawSquare=function(g){g===void 0&&(g={});var et=g.size;assertOrUndefined(et,"size",["number"]),this.drawRectangle(__assign(__assign({},g),{width:et,height:et}))},it.prototype.drawEllipse=function(g){var et,ot,ut,ct,dt,ft,St,kt,Tt,Rt,Ft;g===void 0&&(g={}),assertOrUndefined(g.x,"options.x",["number"]),assertOrUndefined(g.y,"options.y",["number"]),assertOrUndefined(g.xScale,"options.xScale",["number"]),assertOrUndefined(g.yScale,"options.yScale",["number"]),assertOrUndefined(g.rotate,"options.rotate",[[Object,"Rotation"]]),assertOrUndefined(g.color,"options.color",[[Object,"Color"]]),assertRangeOrUndefined(g.opacity,"opacity.opacity",0,1),assertOrUndefined(g.borderColor,"options.borderColor",[[Object,"Color"]]),assertRangeOrUndefined(g.borderOpacity,"options.borderOpacity",0,1),assertOrUndefined(g.borderWidth,"options.borderWidth",["number"]),assertOrUndefined(g.borderDashArray,"options.borderDashArray",[Array]),assertOrUndefined(g.borderDashPhase,"options.borderDashPhase",["number"]),assertIsOneOfOrUndefined(g.borderLineCap,"options.borderLineCap",LineCapStyle),assertIsOneOfOrUndefined(g.blendMode,"options.blendMode",BlendMode);var jt=this.maybeEmbedGraphicsState({opacity:g.opacity,borderOpacity:g.borderOpacity,blendMode:g.blendMode});!("color"in g)&&!("borderColor"in g)&&(g.color=rgb(0,0,0));var Bt=this.getContentStream();Bt.push.apply(Bt,drawEllipse({x:(et=g.x)!==null&&et!==void 0?et:this.x,y:(ot=g.y)!==null&&ot!==void 0?ot:this.y,xScale:(ut=g.xScale)!==null&&ut!==void 0?ut:100,yScale:(ct=g.yScale)!==null&&ct!==void 0?ct:100,rotate:(dt=g.rotate)!==null&&dt!==void 0?dt:void 0,color:(ft=g.color)!==null&&ft!==void 0?ft:void 0,borderColor:(St=g.borderColor)!==null&&St!==void 0?St:void 0,borderWidth:(kt=g.borderWidth)!==null&&kt!==void 0?kt:0,borderDashArray:(Tt=g.borderDashArray)!==null&&Tt!==void 0?Tt:void 0,borderDashPhase:(Rt=g.borderDashPhase)!==null&&Rt!==void 0?Rt:void 0,borderLineCap:(Ft=g.borderLineCap)!==null&&Ft!==void 0?Ft:void 0,graphicsState:jt}))},it.prototype.drawCircle=function(g){g===void 0&&(g={});var et=g.size,ot=et===void 0?100:et;assertOrUndefined(ot,"size",["number"]),this.drawEllipse(__assign(__assign({},g),{xScale:ot,yScale:ot}))},it.prototype.setOrEmbedFont=function(g){var et=this.font,ot=this.fontKey;g?this.setFont(g):this.getFont();var ut=this.font,ct=this.fontKey;return{oldFont:et,oldFontKey:ot,newFont:ut,newFontKey:ct}},it.prototype.getFont=function(){if(!this.font||!this.fontKey){var g=this.doc.embedStandardFont(StandardFonts.Helvetica);this.setFont(g)}return[this.font,this.fontKey]},it.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},it.prototype.getContentStream=function(g){return g===void 0&&(g=!0),g&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},it.prototype.createContentStream=function(){for(var g=[],et=0;et<arguments.length;et++)g[et]=arguments[et];var ot=this.doc.context.obj({}),ut=PDFContentStream.of(ot,g);return ut},it.prototype.maybeEmbedGraphicsState=function(g){var et=g.opacity,ot=g.borderOpacity,ut=g.blendMode;if(!(et===void 0&&ot===void 0&&ut===void 0)){var ct=this.doc.context.obj({Type:"ExtGState",ca:et,CA:ot,BM:ut}),dt=this.node.newExtGState("GS",ct);return dt}},it.prototype.scaleAnnot=function(g,et,ot){for(var ut=["RD","CL","Vertices","QuadPoints","L","Rect"],ct=0,dt=ut.length;ct<dt;ct++){var ft=g.lookup(PDFName.of(ut[ct]));ft instanceof PDFArray&&ft.scalePDFNumbers(et,ot)}var St=g.lookup(PDFName.of("InkList"));if(St instanceof PDFArray)for(var ct=0,dt=St.size();ct<dt;ct++){var kt=St.lookup(ct);kt instanceof PDFArray&&kt.scalePDFNumbers(et,ot)}},it.of=function(g,et,ot){return new it(g,et,ot)},it.create=function(g){assertIs(g,"doc",[[PDFDocument,"PDFDocument"]]);var et=PDFRef.of(-1),ot=PDFPageLeaf.withContextAndParent(g.context,et),ut=g.context.register(ot);return new it(ot,ut,g)},it}(),PDFButton=function(it){__extends(g,it);function g(et,ot,ut){var ct=it.call(this,et,ot,ut)||this;return assertIs(et,"acroButton",[[PDFAcroPushButton,"PDFAcroPushButton"]]),ct.acroField=et,ct}return g.prototype.setImage=function(et,ot){ot===void 0&&(ot=ImageAlignment.Center);for(var ut=this.acroField.getWidgets(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct],St=this.createImageAppearanceStream(ft,et,ot);this.updateWidgetAppearances(ft,{normal:St})}this.markAsClean()},g.prototype.setFontSize=function(et){assertPositive(et,"fontSize"),this.acroField.setFontSize(et),this.markAsDirty()},g.prototype.addToPage=function(et,ot,ut){var ct,dt,ft,St,kt,Tt,Rt,Ft,jt,Bt,zt;assertOrUndefined(et,"text",["string"]),assertOrUndefined(ot,"page",[[PDFPage$1,"PDFPage"]]),assertFieldAppearanceOptions(ut);var Ht=this.createWidget({x:((ct=ut==null?void 0:ut.x)!==null&&ct!==void 0?ct:0)-((dt=ut==null?void 0:ut.borderWidth)!==null&&dt!==void 0?dt:0)/2,y:((ft=ut==null?void 0:ut.y)!==null&&ft!==void 0?ft:0)-((St=ut==null?void 0:ut.borderWidth)!==null&&St!==void 0?St:0)/2,width:(kt=ut==null?void 0:ut.width)!==null&&kt!==void 0?kt:100,height:(Tt=ut==null?void 0:ut.height)!==null&&Tt!==void 0?Tt:50,textColor:(Rt=ut==null?void 0:ut.textColor)!==null&&Rt!==void 0?Rt:rgb(0,0,0),backgroundColor:(Ft=ut==null?void 0:ut.backgroundColor)!==null&&Ft!==void 0?Ft:rgb(.75,.75,.75),borderColor:ut==null?void 0:ut.borderColor,borderWidth:(jt=ut==null?void 0:ut.borderWidth)!==null&&jt!==void 0?jt:0,rotate:(Bt=ut==null?void 0:ut.rotate)!==null&&Bt!==void 0?Bt:degrees(0),caption:et,hidden:ut==null?void 0:ut.hidden,page:ot.ref}),Ut=this.doc.context.register(Ht.dict);this.acroField.addWidget(Ut);var Kt=(zt=ut==null?void 0:ut.font)!==null&&zt!==void 0?zt:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(Ht,Kt),ot.node.addAnnot(Ut)},g.prototype.needsAppearancesUpdate=function(){var et;if(this.isDirty())return!0;for(var ot=this.acroField.getWidgets(),ut=0,ct=ot.length;ut<ct;ut++){var dt=ot[ut],ft=((et=dt.getAppearances())===null||et===void 0?void 0:et.normal)instanceof PDFStream;if(!ft)return!0}return!1},g.prototype.defaultUpdateAppearances=function(et){assertIs(et,"font",[[PDFFont,"PDFFont"]]),this.updateAppearances(et)},g.prototype.updateAppearances=function(et,ot){assertIs(et,"font",[[PDFFont,"PDFFont"]]),assertOrUndefined(ot,"provider",[Function]);for(var ut=this.acroField.getWidgets(),ct=0,dt=ut.length;ct<dt;ct++){var ft=ut[ct];this.updateWidgetAppearance(ft,et,ot)}},g.prototype.updateWidgetAppearance=function(et,ot,ut){var ct=ut??defaultButtonAppearanceProvider,dt=normalizeAppearance(ct(this,et,ot));this.updateWidgetAppearanceWithFont(et,ot,dt)},g.of=function(et,ot,ut){return new g(et,ot,ut)},g}(PDFField);const PDFButton$1=PDFButton;var __rest=globalThis&&globalThis.__rest||function(it,g){var et={};for(var ot in it)Object.prototype.hasOwnProperty.call(it,ot)&&g.indexOf(ot)<0&&(et[ot]=it[ot]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,ot=Object.getOwnPropertySymbols(it);ut<ot.length;ut++)g.indexOf(ot[ut])<0&&Object.prototype.propertyIsEnumerable.call(it,ot[ut])&&(et[ot[ut]]=it[ot[ut]]);return et};const needForceStyle=it=>{const g=window.getComputedStyle(it).position;return!(g==="absolute"||g==="relative")};function useEvent$1(it=()=>{}){const g=React$3.useRef(it);return g.current=it,React$3.useCallback((...et)=>g.current.apply(null,et),[])}const Html=({children:it,groupProps:g,divProps:et,transform:ot,transformFunc:ut,parentNodeFunc:ct})=>{const dt=useContextBridge(),ft=React$3.useRef(null),[St]=React$3.useState(()=>document.createElement("div")),kt=React$3.useMemo(()=>client.createRoot(St),[St]),Tt=ot??!0,Rt=useEvent$1(()=>{if(Tt&&ft.current){let Ht=ft.current.getAbsoluteTransform().decompose();ut&&(Ht=ut(Ht)),St.style.position="absolute",St.style.zIndex="10",St.style.top="0px",St.style.left="0px",St.style.transform=`translate(${Ht.x}px, ${Ht.y}px) rotate(${Ht.rotation}deg) scaleX(${Ht.scaleX}) scaleY(${Ht.scaleY})`,St.style.transformOrigin="top left"}else St.style.position="",St.style.zIndex="",St.style.top="",St.style.left="",St.style.transform="",St.style.transformOrigin="";const Ft=et||{},{style:jt}=Ft,Bt=__rest(Ft,["style"]);Object.assign(St.style,jt),Object.assign(St,Bt)});return React$3.useLayoutEffect(()=>{var Ft;const jt=ft.current;if(!jt)return;const Bt=ct?ct({stage:jt.getStage()}):(Ft=jt.getStage())===null||Ft===void 0?void 0:Ft.container();if(Bt)return Bt.appendChild(St),Tt&&needForceStyle(Bt)&&(Bt.style.position="relative"),jt.on("absoluteTransformChange",Rt),Rt(),()=>{var zt;jt.off("absoluteTransformChange",Rt),(zt=St.parentNode)===null||zt===void 0||zt.removeChild(St)}},[Tt,ct]),React$3.useLayoutEffect(()=>{Rt()},[et,ut]),React$3.useLayoutEffect(()=>{queueMicrotask(()=>{reactDomExports.flushSync(()=>{kt.render(React$3.createElement(dt,null,it))})})}),React$3.useLayoutEffect(()=>()=>{setTimeout(()=>{kt.unmount()})},[]),React$3.createElement(Group,Object.assign({ref:ft},g))};function ShapePropertiesPanel({panelOpen:it,selectedIds:g=[],shapes:et,updateSelected:ot,deleteSelected:ut}){var Rt,Ft,jt,Bt,zt;const ct=et.filter(Ht=>g.includes(Ht.id)),dt=ct.length===1?ct[0]:null,[ft,St]=reactExports.useState(!1),kt=reactExports.useCallback(Ht=>{Ht.stopPropagation(),St(!0)},[]),Tt=reactExports.useCallback(()=>St(!1),[]);return(dt==null?void 0:dt.type)==="image"?jsxRuntimeExports.jsx(AnimatePresence,{children:it&&jsxRuntimeExports.jsxs(motion.div,{onMouseDown:Ht=>Ht.stopPropagation(),onClick:Ht=>Ht.stopPropagation(),initial:{x:300},animate:{x:0},exit:{x:300},transition:{type:"spring",stiffness:200,damping:25},className:"fixed top-0 right-0 h-screen w-96 bg-[#111]/95 backdrop-blur-md border-l border-gray-700/60 p-5 flex flex-col gap-4 shadow-[0_0_25px_rgba(0,0,0,0.6)] overflow-y-auto z-[9999]",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold text-sm mb-1 sticky top-0 bg-[#111]/95 py-1 z-10",children:"Image Properties"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Width"}),jsxRuntimeExports.jsx("input",{type:"range",min:"10",max:"2000",step:"1",value:dt.width??200,onChange:Ht=>ot({width:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"}),jsxRuntimeExports.jsx("input",{type:"number",value:dt.width??200,onChange:Ht=>ot({width:parseFloat(Ht.target.value)||200}),className:"w-full bg-[#1a1a1a] border border-gray-700 text-gray-300 text-xs rounded-md px-2 py-1 text-center"}),jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300 mt-3",children:"Height"}),jsxRuntimeExports.jsx("input",{type:"range",min:"10",max:"2000",step:"1",value:dt.height??200,onChange:Ht=>ot({height:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"}),jsxRuntimeExports.jsx("input",{type:"number",value:dt.height??200,onChange:Ht=>ot({height:parseFloat(Ht.target.value)||200}),className:"w-full bg-[#1a1a1a] border border-gray-700 text-gray-300 text-xs rounded-md px-2 py-1 text-center"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Rotation"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400",children:[Math.round(dt.rotation??0),""]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:dt.rotation??0,onChange:Ht=>ot({rotation:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Opacity"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400",children:(dt.opacity??1).toFixed(2)})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:dt.opacity??1,onChange:Ht=>ot({opacity:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Corner Radius"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400",children:[dt.cornerRadius??0,"px"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:dt.cornerRadius??0,onChange:Ht=>ot({cornerRadius:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Tint"}),jsxRuntimeExports.jsx("input",{type:"color",value:dt.tint||"#ffffff",onChange:Ht=>ot({tint:Ht.target.value}),className:"w-6 h-6 rounded cursor-pointer"})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/40 mt-4"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Stroke"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:dt.stroke||"#000000",onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({stroke:Ht.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:dt.stroke||"#000000"}})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/40"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Width"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(dt.strokeWidth||0).toFixed(1)})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"0.01",onMouseDown:kt,onMouseUp:Tt,onTouchStart:kt,onTouchEnd:Tt,value:dt.strokeWidth||2,onChange:Ht=>ot({strokeWidth:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/40 mt-4"}),jsxRuntimeExports.jsx("h4",{className:"text-white text-sm font-semibold",children:"Shadow"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Blend Mode"}),jsxRuntimeExports.jsxs("select",{value:dt.shadowBlend||"multiply",onChange:Ht=>ot({shadowBlend:Ht.target.value}),className:"bg-[#1a1a1a] border border-gray-700 text-gray-300 text-xs rounded-md px-2 py-1",children:[jsxRuntimeExports.jsx("option",{value:"multiply",children:"Multiply"}),jsxRuntimeExports.jsx("option",{value:"overlay",children:"Overlay"}),jsxRuntimeExports.jsx("option",{value:"soft-light",children:"Soft Light"}),jsxRuntimeExports.jsx("option",{value:"hard-light",children:"Hard Light"}),jsxRuntimeExports.jsx("option",{value:"normal",children:"Normal"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Opacity"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400",children:[Math.round((dt.shadowOpacity??.5)*100),"%"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:dt.shadowOpacity??.5,onChange:Ht=>ot({shadowOpacity:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Radius"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400",children:[dt.shadowRadius??0,"px"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:dt.shadowRadius??0,onChange:Ht=>ot({shadowRadius:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Offset"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400",children:[dt.shadowOffset??0,"px"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:dt.shadowOffset??0,onChange:Ht=>ot({shadowOffset:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:dt.shadowColor||"#000000",onChange:Ht=>ot({shadowColor:Ht.target.value}),className:"w-6 h-6 rounded cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Angle"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-16 h-16",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full text-gray-500 cursor-pointer select-none",onMouseDown:Ht=>{kt();const Ut=Yt=>{const er=Ht.currentTarget.getBoundingClientRect(),ar=er.left+er.width/2,ir=er.top+er.height/2,lr=Yt.clientX-ar,cr=Yt.clientY-ir,xr=((Math.atan2(cr,lr)*180/Math.PI+90)%360+360)%360;ot({shadowAngle:xr})},Kt=()=>{Tt(),window.removeEventListener("mousemove",Ut),window.removeEventListener("mouseup",Kt)};window.addEventListener("mousemove",Ut),window.addEventListener("mouseup",Kt)},children:[jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"rgba(255,255,255,0.1)",strokeWidth:"3",fill:"none"}),jsxRuntimeExports.jsx("line",{x1:"50",y1:"50",x2:50+40*Math.sin((dt.shadowAngle??315)*Math.PI/180),y2:50-40*Math.cos((dt.shadowAngle??315)*Math.PI/180),stroke:"#3b82f6",strokeWidth:"2.5",strokeLinecap:"round"})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-gray-300 font-medium",children:[Math.round(dt.shadowAngle??315),""]})]}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",max:"360",step:"1",value:Math.round(dt.shadowAngle??315),onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({shadowAngle:Number(Ht.target.value)||0}),className:"w-16 bg-[#1a1a1a] border border-gray-700 rounded-md text-gray-300 text-xs text-center px-2 py-1"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(g),className:"self-end mt-6 p-1.5 bg-white/5 hover:bg-red-700/20 text-white rounded-md flex items-center justify-center transition-all duration-150",title:"Delete image",children:jsxRuntimeExports.jsx(Trash2,{className:"text-red-500",size:16})})]})}):jsxRuntimeExports.jsx(AnimatePresence,{children:it&&dt&&jsxRuntimeExports.jsxs(motion.div,{initial:{x:300},animate:{x:0},exit:{x:300},transition:{type:"spring",stiffness:200,damping:25},className:"fixed top-0 right-0 h-screen w-96 bg-[#111]/95 backdrop-blur-md border-l border-gray-700/60 p-5 flex flex-col gap-4 shadow-[0_0_25px_rgba(0,0,0,0.6)] overflow-y-auto z-[9999] select-none",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold text-sm mb-1 sticky top-0 bg-[#111]/95 py-1 z-10",children:"Shape Properties"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Fill"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:dt.fill||"#000000",onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({fill:Ht.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:dt.fill||"#000000"}})]})]}),dt&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-3 border-t border-gray-700/40 pt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Fill Type"}),jsxRuntimeExports.jsxs("select",{value:dt.fillType||"solid",onChange:Ht=>ot({fillType:Ht.target.value}),onMouseDown:kt,onMouseUp:Tt,className:"bg-[#1a1a1a] border border-gray-700 text-gray-300 text-xs rounded-md px-2 py-1",children:[jsxRuntimeExports.jsx("option",{value:"solid",children:"Solid"}),jsxRuntimeExports.jsx("option",{value:"gradient",children:"Gradient"})]})]}),dt.fillType==="gradient"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"From"}),jsxRuntimeExports.jsx("input",{type:"color",value:((Rt=dt.gradient)==null?void 0:Rt.from)||"#00b4ff",onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({gradient:{...dt.gradient,from:Ht.target.value}}),className:"w-6 h-6 rounded cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"To"}),jsxRuntimeExports.jsx("input",{type:"color",value:((Ft=dt.gradient)==null?void 0:Ft.to)||"#ff00ff",onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({gradient:{...dt.gradient,to:Ht.target.value}}),className:"w-6 h-6 rounded cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Angle"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400",children:[Math.round(((jt=dt.gradient)==null?void 0:jt.angle)??0),""]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"360",step:"1",onMouseDown:kt,onMouseUp:Tt,value:((Bt=dt.gradient)==null?void 0:Bt.angle)??0,onChange:Ht=>ot({gradient:{...dt.gradient,angle:parseInt(Ht.target.value)}}),className:"cre8tly-slider w-full"})]})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/40"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Stroke"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:dt.stroke||"#000000",onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({stroke:Ht.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:dt.stroke||"#000000"}})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-gray-700/40"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Width"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(dt.strokeWidth||0).toFixed(1)})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"0.01",onMouseDown:kt,onMouseUp:Tt,onTouchStart:kt,onTouchEnd:Tt,value:dt.strokeWidth||2,onChange:Ht=>ot({strokeWidth:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Opacity"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:(dt.opacity??1).toFixed(2)})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",onMouseDown:kt,onMouseUp:Tt,onTouchStart:kt,onTouchEnd:Tt,value:dt.opacity??1,onChange:Ht=>ot({opacity:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),dt.type==="text"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Word Wrap"}),jsxRuntimeExports.jsx("button",{onMouseDown:kt,onMouseUp:Tt,onClick:()=>ot({textMode:dt.textMode==="box"?"line":"box"}),className:`px-2 py-1 text-xs rounded-md transition-all duration-150 ${dt.textMode==="box"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:dt.textMode==="box"?"Box":"Line"})]}),dt.type==="text"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Font Size"}),jsxRuntimeExports.jsx("input",{type:"number",value:dt.fontSize||20,onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({fontSize:parseFloat(Ht.target.value)}),className:"w-16 bg-[#1a1a1a] border border-gray-700 rounded-md text-gray-300 text-xs text-center px-2 py-1"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Font"}),jsxRuntimeExports.jsxs("select",{value:dt.fontFamily||"Inter",onChange:Ht=>ot({fontFamily:Ht.target.value}),onMouseDown:kt,onMouseUp:Tt,className:"bg-[#1a1a1a] border border-gray-700 text-gray-300 text-xs rounded-md px-2 py-1",children:[jsxRuntimeExports.jsx("option",{value:"Inter",children:"Inter"}),jsxRuntimeExports.jsx("option",{value:"Palanquin",children:"Palanquin"}),jsxRuntimeExports.jsx("option",{value:"Montserrat",children:"Montserrat"}),jsxRuntimeExports.jsx("option",{value:"Cormorant",children:"Cormorant"}),jsxRuntimeExports.jsx("option",{value:"Ephesis",children:"Ephesis"})]})]})]}),dt.type==="rect"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Corners"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",max:Math.min(dt.width||0,dt.height||0)/2,step:"0.1",value:((zt=dt.cornerRadius)==null?void 0:zt.toFixed(1))||0,onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({cornerRadius:parseFloat(Ht.target.value)}),className:"w-14 bg-[#1a1a1a] border border-gray-700 rounded-md text-gray-300 text-xs text-right px-2 py-1"})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:Math.min(dt.width||0,dt.height||0)/2,step:"0.1",value:dt.cornerRadius||0,onMouseDown:kt,onMouseUp:Tt,onTouchStart:kt,onTouchEnd:Tt,onChange:Ht=>ot({cornerRadius:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),dt&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 mt-4 border-t border-gray-700/40 pt-3",children:[jsxRuntimeExports.jsx("h4",{className:"text-white text-sm font-semibold",children:"Shadow"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Blend mode"}),jsxRuntimeExports.jsxs("select",{value:dt.shadowBlend||"multiply",onChange:Ht=>ot({shadowBlend:Ht.target.value}),onMouseDown:kt,onMouseUp:Tt,className:"bg-[#1a1a1a] border border-gray-700 text-gray-300 text-xs rounded-md px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"multiply",children:"Multiply"}),jsxRuntimeExports.jsx("option",{value:"overlay",children:"Overlay"}),jsxRuntimeExports.jsx("option",{value:"soft-light",children:"Soft Light"}),jsxRuntimeExports.jsx("option",{value:"hard-light",children:"Hard Light"}),jsxRuntimeExports.jsx("option",{value:"normal",children:"Normal"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Opacity"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:[Math.round((dt.shadowOpacity??.5)*100),"%"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",onMouseDown:kt,onMouseUp:Tt,onTouchStart:kt,onTouchEnd:Tt,value:dt.shadowOpacity??.5,onChange:Ht=>ot({shadowOpacity:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Radius"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:[dt.shadowRadius??0,"px"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",onMouseDown:kt,onMouseUp:Tt,onTouchStart:kt,onTouchEnd:Tt,value:dt.shadowRadius??0,onChange:Ht=>ot({shadowRadius:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Offset"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:[dt.shadowOffset??0,"px"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",onMouseDown:kt,onMouseUp:Tt,onTouchStart:kt,onTouchEnd:Tt,value:dt.shadowOffset??0,onChange:Ht=>ot({shadowOffset:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Intensity"}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] text-gray-400 w-8 text-right",children:[dt.shadowIntensity??0,"%"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",onMouseDown:kt,onMouseUp:Tt,onTouchStart:kt,onTouchEnd:Tt,value:dt.shadowIntensity??0,onChange:Ht=>ot({shadowIntensity:parseFloat(Ht.target.value)}),className:"cre8tly-slider w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Color"}),jsxRuntimeExports.jsxs("div",{className:"relative w-5 h-5",children:[jsxRuntimeExports.jsx("input",{type:"color",value:dt.shadowColor||"#000000",onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({shadowColor:Ht.target.value}),className:"absolute inset-0 opacity-0 cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-full border border-gray-500 shadow-inner",style:{backgroundColor:dt.shadowColor||"#000000"}})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Angle"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-16 h-16",children:[jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full text-gray-500 cursor-pointer select-none",onMouseDown:Ht=>{kt();const Ut=Yt=>{const er=Ht.currentTarget.getBoundingClientRect(),ar=er.left+er.width/2,ir=er.top+er.height/2,lr=Yt.clientX-ar,cr=Yt.clientY-ir,xr=((Math.atan2(cr,lr)*180/Math.PI+90)%360+360)%360;ot({shadowAngle:xr})},Kt=()=>{Tt(),window.removeEventListener("mousemove",Ut),window.removeEventListener("mouseup",Kt)};window.addEventListener("mousemove",Ut),window.addEventListener("mouseup",Kt)},children:[jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"rgba(255,255,255,0.1)",strokeWidth:"3",fill:"none"}),jsxRuntimeExports.jsx("line",{x1:"50",y1:"50",x2:50+40*Math.sin((dt.shadowAngle??315)*Math.PI/180),y2:50-40*Math.cos((dt.shadowAngle??315)*Math.PI/180),stroke:"#3b82f6",strokeWidth:"2.5",strokeLinecap:"round"})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-gray-300 font-medium",children:[Math.round(dt.shadowAngle??315),""]})]}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",max:"360",step:"1",value:Math.round(dt.shadowAngle??315),onMouseDown:kt,onMouseUp:Tt,onChange:Ht=>ot({shadowAngle:Number(Ht.target.value)||0}),className:"w-16 bg-[#1a1a1a] border border-gray-700 rounded-md text-gray-300 text-xs text-center px-2 py-1"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!dt.shadowKnockout,onChange:Ht=>ot({shadowKnockout:Ht.target.checked}),onMouseDown:kt,onMouseUp:Tt,className:"accent-blue-500 w-4 h-4"}),jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-300",children:"Fill knocks out shadow"})]})]}),jsxRuntimeExports.jsx("button",{onMouseDown:kt,onMouseUp:Tt,onClick:()=>ut(g),className:"self-end mt-4 p-1.5 bg-white/5 hover:bg-red-700/20 text-white rounded-md flex items-center justify-center transition-all duration-150",title:"Delete shape",children:jsxRuntimeExports.jsx(Trash2,{className:"text-red-500",size:16})})]})})}const handleShapeDuplicate=({e:it,shapes:g,selectedIds:et,setShapes:ot,setSelectedIds:ut,isDuplicating:ct,offset:dt=20})=>{if(!(it.evt.metaKey||it.evt.ctrlKey))return;ct.current=!0;const St=it.target,kt=St.id(),Tt=(et==null?void 0:et.length)>1,Rt=Date.now(),Ft=Tt?g.filter(Bt=>et.includes(Bt.id)):[g.find(Bt=>Bt.id.toString()===kt)].filter(Boolean);if(!Ft.length)return;St.stopDrag();const jt=Ft.map((Bt,zt)=>({...Bt,id:`shape-${Rt}-${zt}-${Math.random().toString(36).slice(2,7)}`,x:(Bt.x||0)+dt,y:(Bt.y||0)+dt}));ot(Bt=>[...Bt,...jt]),ut([]),requestAnimationFrame(()=>{const Bt=jt.map(Ut=>Ut.id);ut(Bt);const Ht=St.getStage().findOne(`#${jt[0].id}`);Ht&&Ht.startDrag()})};function getGuides(it,g,et,ot,ut={}){const{GAP:ct=6,grid:dt=[],snapToCanvasCenter:ft=!0,snapToEdges:St=!0}=ut,kt={vertical:[],horizontal:[]},Tt={},Rt=et/2,Ft=ot/2,jt=it.x,Bt=it.x+it.width,zt=it.y,Ht=it.y+it.height,Ut=it.x+it.width/2,Kt=it.y+it.height/2;ft&&(Math.abs(Ut-Rt)<ct&&(kt.vertical.push(Rt),Tt.x=Rt-it.width/2),Math.abs(Kt-Ft)<ct&&(kt.horizontal.push(Ft),Tt.y=Ft-it.height/2));for(const Yt of dt)Math.abs(Ut-Yt)<ct&&(kt.vertical.push(Yt),Tt.x=Yt-it.width/2);for(const Yt of dt)Math.abs(Kt-Yt)<ct&&(kt.horizontal.push(Yt),Tt.y=Yt-it.height/2);if(St)for(const Yt of g){if(Yt.id===it.id)continue;const er=Yt.x,ar=Yt.x+Yt.width,ir=Yt.y,lr=Yt.y+Yt.height,cr=Yt.x+Yt.width/2,vr=Yt.y+Yt.height/2;if(Math.abs(jt-er)<ct?(kt.vertical.push(er),Tt.x=er):Math.abs(Bt-ar)<ct?(kt.vertical.push(ar),Tt.x=ar-it.width):Math.abs(Ut-cr)<ct&&(kt.vertical.push(cr),Tt.x=cr-it.width/2),Math.abs(zt-ir)<ct?(kt.horizontal.push(ir),Tt.y=ir):Math.abs(Ht-lr)<ct?(kt.horizontal.push(lr),Tt.y=lr-it.height):Math.abs(Kt-vr)<ct&&(kt.horizontal.push(vr),Tt.y=vr-it.height/2),Yt.type==="text"&&Yt.fontSize){const xr=Yt.y+Yt.fontSize;Math.abs(Ht-xr)<ct&&(kt.horizontal.push(xr),Tt.y=xr-it.height)}}return kt.vertical=[...new Set(kt.vertical.map(Yt=>Math.round(Yt)))],kt.horizontal=[...new Set(kt.horizontal.map(Yt=>Math.round(Yt)))],{...kt,snapPosition:Tt}}function PDFOverlayCanvas({shapes:it,setShapes:g,selectedTool:et,setSelectedTool:ot,selectedIds:ut,setSelectedIds:ct}){it=Array.isArray(it)?it:[];const dt=reactExports.useRef(null),ft=reactExports.useRef(null),[St,kt]=reactExports.useState({width:0,height:0}),[Tt,Rt]=reactExports.useState(!1),[Ft,jt]=reactExports.useState(null),[Bt,zt]=reactExports.useState(null),Ht=reactExports.useRef(null),[Ut,Kt]=reactExports.useState({vertical:[],horizontal:[]}),Yt=reactExports.useRef(null),er=reactExports.useRef(!1),ar=reactExports.useRef(!1),ir=`cre8tly_canvas_shapes_page_${window.currentPDFPage??0}`;function lr({shape:hr,setShapes:Tr,setSelectedIds:mr,setPanelOpen:Er,isDuplicating:Dr}){const[Cr,Lr]=useImage$1(hr.src,"anonymous");if(reactExports.useEffect(()=>{console.log(" Loading image:",hr.id,Lr)},[Lr,hr.id]),!(hr!=null&&hr.src)||Lr!=="loaded"||!Cr)return null;const qr=hr.shadowOffset&&hr.shadowAngle!==void 0?Math.cos(hr.shadowAngle*Math.PI/180)*hr.shadowOffset:0,sn=hr.shadowOffset&&hr.shadowAngle!==void 0?Math.sin(hr.shadowAngle*Math.PI/180)*hr.shadowOffset:0;return jsxRuntimeExports.jsxs(Group,{id:String(hr.id),x:hr.x??0,y:hr.y??0,draggable:!0,rotation:hr.rotation??0,onClick:an=>{an.cancelBubble=!0;const tn=an.evt.shiftKey;Er(!0),mr(ln=>tn?ln.includes(hr.id)?ln.filter(yn=>yn!==hr.id):[...ln,hr.id]:[hr.id])},onDragStart:an=>{Dr!=null&&Dr.current||(an.cancelBubble=!0,an.target.moveToTop())},onDragEnd:an=>{const tn=an.target,{x:ln,y:yn}=tn.position();Tr(pn=>pn.map(En=>En.id===hr.id?{...En,x:ln,y:yn}:En))},onTransformEnd:an=>{const tn=an.target,ln=tn.scaleX(),yn=tn.scaleY(),pn=Math.max(20,(hr.width??200)*ln),En=Math.max(20,(hr.height??200)*yn);Tr(On=>On.map(Xn=>Xn.id===hr.id?{...Xn,x:tn.x(),y:tn.y(),width:pn,height:En}:Xn)),tn.scaleX(1),tn.scaleY(1)},children:[jsxRuntimeExports.jsx(Image$1,{image:Cr,width:hr.width??Cr.width??200,height:hr.height??Cr.height??200,opacity:hr.opacity??1,cornerRadius:hr.cornerRadius??0,shadowEnabled:!0,shadowColor:hr.shadowColor??"transparent",shadowBlur:(hr.shadowRadius??0)*1.5,shadowOpacity:hr.shadowOpacity??.5,shadowOffsetX:qr,shadowOffsetY:sn,filters:hr.tint?[Konva.Filters.RGBA]:[],red:hr.tint?parseInt(hr.tint.slice(1,3),16):255,green:hr.tint?parseInt(hr.tint.slice(3,5),16):255,blue:hr.tint?parseInt(hr.tint.slice(5,7),16):255,alpha:1}),hr.strokeWidth>0&&jsxRuntimeExports.jsx(Rect$1,{width:hr.width??Cr.width??200,height:hr.height??Cr.height??200,stroke:hr.strokeWidth>0?hr.stroke||"#000000":"transparent",strokeWidth:hr.strokeWidth??0,cornerRadius:hr.cornerRadius??0,listening:!1})]},hr.id)}reactExports.useEffect(()=>{const hr=dt.current;if(!hr||!(hr instanceof Element))return;const Tr=new ResizeObserver(mr=>{if(!mr.length)return;const{width:Er,height:Dr}=mr[0].contentRect;kt({width:Er,height:Dr})});try{Tr.observe(hr)}catch(mr){console.warn("ResizeObserver failed to attach:",mr)}return()=>Tr.disconnect()},[]),reactExports.useEffect(()=>{const hr=()=>{g([])};return window.addEventListener("clearCanvasShapes",hr),()=>window.removeEventListener("clearCanvasShapes",hr)},[g]),reactExports.useEffect(()=>{function hr(){if(!dt.current)return;const{clientWidth:Tr,clientHeight:mr}=dt.current;kt({width:Tr,height:mr})}return hr(),window.addEventListener("resize",hr),()=>window.removeEventListener("resize",hr)},[]),reactExports.useEffect(()=>{const hr=Tr=>{var Lr;const{id:mr}=Tr.detail,Er=(Lr=ft.current)==null?void 0:Lr.getStage();if(!Er)return;const Dr=Er.findOne(`#${mr}`);if(!Dr)return;const Cr={target:Dr};Dr.fire("dblclick",Cr)};return window.addEventListener("autoEditText",hr),()=>window.removeEventListener("autoEditText",hr)},[]),reactExports.useEffect(()=>{const hr=localStorage.getItem(ir);if(hr)try{g(JSON.parse(hr)),console.log(` Restored shapes for page ${window.currentPDFPage}`)}catch(Tr){console.error(" Failed to parse saved shapes:",Tr)}},[ir]),reactExports.useEffect(()=>{ar.current=!0},[ir]),reactExports.useEffect(()=>{ar.current&&(it.length>0?localStorage.setItem(ir,JSON.stringify(it)):localStorage.removeItem(ir))},[it,ir]);const cr=(hr=[])=>{hr.length&&(g(Tr=>Tr.filter(mr=>!hr.includes(mr.id))),ct([]),Rt(!1))},vr=hr=>{g(Tr=>Tr.map(mr=>ut.includes(mr.id)?{...mr,...hr}:mr))};reactExports.useEffect(()=>{var mr;const hr=ft.current,Tr=(mr=Yt.current)==null?void 0:mr.getStage();!hr||!Tr||requestAnimationFrame(()=>{var Dr;const Er=ut.map(Cr=>Tr.findOne(`#${Cr}`)).filter(Boolean);console.log("Transformer nodes:",Er.map(Cr=>Cr.id())),Er.length>0?(hr.nodes(Er),hr.moveToTop()):hr.nodes([]),(Dr=hr.getLayer())==null||Dr.batchDraw()})},[ut,it]),reactExports.useEffect(()=>{localStorage.setItem("cre8tly_canvas_shapes",JSON.stringify(it))},[it]),reactExports.useEffect(()=>{const hr=Tr=>{var mr;Tr.target.closest(".canvas-toolbar")||(mr=dt.current)!=null&&mr.contains(Tr.target)||(ct([]),Rt(!1))};return document.addEventListener("mousedown",hr),()=>document.removeEventListener("mousedown",hr)},[]),reactExports.useEffect(()=>{var mr;if(!ft.current)return;const hr=ft.current.getStage();if(!hr)return;const Tr=it.filter(Er=>ut.includes(Er.id)).map(Er=>hr.findOne(`#${Er.id}`)).filter(Boolean);ft.current.nodes(Tr),(mr=ft.current.getLayer())==null||mr.batchDraw()},[ut,it]);const xr=reactExports.useRef(!1),yr=reactExports.useRef({x:0,y:0}),Sr=hr=>{var Cr,Lr;const Tr=hr.target;if(Tr&&Tr.getClassName&&Tr.getClassName()!=="Stage"||(hr.evt.preventDefault(),(Lr=(Cr=hr==null?void 0:hr.evt)==null?void 0:Cr.target)!=null&&Lr.closest&&hr.evt.target.closest(".canvas-toolbar")))return;const mr=hr.target.getStage(),Er=hr.target===mr||hr.target.getParent()===mr.findOne("Layer"),Dr=mr.getPointerPosition();if(!et&&Er){ot==null||ot(null),jt(null),xr.current=!1,Ht.current=Dr,zt({x:Dr.x,y:Dr.y,width:0,height:0});return}if(et&&Er){if(et==="text"){xr.current=!0,yr.current=Dr,jt({id:"preview-text",type:"text",x:Dr.x,y:Dr.y,width:200,height:40,text:"Type here",wrap:"none",align:"left",verticalAlign:"top",fontSize:20,fillType:"solid",fill:"#ffffff",gradient:{from:"#00b4ff",to:"#ff00ff",angle:90},stroke:"transparent",strokeWidth:0,opacity:.9,fontFamily:"Inter",draggable:!1,isRichEditing:!1,html:null});return}if(et==="arrow"){xr.current=!0,yr.current=Dr,jt({id:"preview-arrow",type:"arrow",points:[Dr.x,Dr.y,Dr.x,Dr.y],pointerLength:15,pointerWidth:15,strokeWidth:4,fillType:"gradient",gradient:{from:"#00b4ff",to:"#ff00ff",angle:0},shadowColor:"#000000",shadowOpacity:.5,shadowRadius:10,opacity:1});return}xr.current=!0,yr.current=Dr,jt({id:"preview-shape",type:et,x:Dr.x,y:Dr.y,width:0,height:0,radiusX:0,radiusY:0,fill:"rgba(0,128,255,0.15)",stroke:"#00b4ff",strokeWidth:0,opacity:.6,shadowColor:"#000000",shadowOpacity:.5,shadowRadius:10,shadowOffset:5,shadowAngle:315,shadowIntensity:100,fillType:"solid",gradient:{from:"#00b4ff",to:"#ff00ff",angle:0}});return}},kr=hr=>{const mr=hr.target.getStage().getPointerPosition();if(mr){if(xr.current&&Ft){const Er=mr.x-yr.current.x,Dr=mr.y-yr.current.y,Cr=hr.evt.shiftKey;if(Ft.type==="rect"){let Lr=Math.abs(Er),qr=Math.abs(Dr);Cr&&(Lr=qr=Math.max(Lr,qr));const sn=Math.min(yr.current.x,mr.x),an=Math.min(yr.current.y,mr.y);jt(tn=>({...tn,x:sn,y:an,width:Lr,height:qr}));return}if(Ft.type==="circle"){let Lr=Math.abs(Er)/2,qr=Math.abs(Dr)/2;Cr&&(Lr=qr=Math.max(Lr,qr));const sn=yr.current.x+Er/2,an=yr.current.y+Dr/2;jt(tn=>({...tn,x:sn,y:an,radiusX:Lr,radiusY:qr}));return}if(Ft.type==="arrow"){jt(Lr=>({...Lr,points:[yr.current.x,yr.current.y,mr.x,mr.y]}));return}if(Ft.type==="text"){const Lr=mr.x-yr.current.x,qr=mr.y-yr.current.y,sn=Math.min(yr.current.x,mr.x),an=Math.min(yr.current.y,mr.y),tn=Math.abs(Lr),ln=Math.abs(qr);jt(yn=>({...yn,x:sn,y:an,width:tn,height:ln}));return}}if(Bt&&Ht.current){const Er=Math.min(mr.x,Ht.current.x),Dr=Math.min(mr.y,Ht.current.y),Cr=Math.abs(mr.x-Ht.current.x),Lr=Math.abs(mr.y-Ht.current.y);zt({x:Er,y:Dr,width:Cr,height:Lr})}}},Pr=hr=>{var mr,Er;const Tr=hr.target.getStage();if(Bt){const Dr=Tr.scaleX(),Cr=Tr.scaleY(),Lr={x:Bt.x/Dr,y:Bt.y/Cr,width:Bt.width/Dr,height:Bt.height/Cr},qr={x:Math.min(Lr.x,Lr.x+Lr.width),y:Math.min(Lr.y,Lr.y+Lr.height),x2:Math.max(Lr.x,Lr.x+Lr.width),y2:Math.max(Lr.y,Lr.y+Lr.height)},sn=it.filter(an=>{const tn=Tr.findOne(`#${an.id}`);if(!tn)return!1;const ln=tn.getClientRect({relativeTo:Tr});return!(ln.x+ln.width<qr.x||ln.x>qr.x2||ln.y+ln.height<qr.y||ln.y>qr.y2)}).map(an=>an.id);ct(sn),Rt(sn.length===1),zt(null),Kt({vertical:[],horizontal:[],active:!1}),Ht.current=null;return}if(Ft&&Ft.type==="text"){if(xr.current=!1,!(Ft.width<5||Ft.height<5)){const Cr={...Ft,id:`text-${Date.now()}`,isEditing:!0,text:"A",draggable:!0};g(Lr=>[...Lr,Cr]),ct([Cr.id]),Rt(!0),setTimeout(()=>{var sn;const Lr=(sn=Yt.current)==null?void 0:sn.getStage(),qr=Lr==null?void 0:Lr.findOne(`#${Cr.id}`);qr&&qr.fire("dblclick")},50)}jt(null),ot(null);return}if(xr.current&&Ft){xr.current=!1,Ft.type==="rect"&&(Ft.width<2||Ft.height<2)||Ft.type==="circle"&&(Ft.radiusX<1||Ft.radiusY<1)||Ft.type==="arrow"&&!Ft.points||g(Lr=>[...Lr,{...Ft,id:`shape-${Date.now()}`,strokeWidth:Ft.type==="arrow"?2:0}]),jt(null),ot(null);const Cr=(Er=(mr=Yt.current)==null?void 0:mr.getStage())==null?void 0:Er.container();Cr&&(Cr.style.cursor="default")}};reactExports.useEffect(()=>{var Tr,mr;const hr=(mr=(Tr=Yt.current)==null?void 0:Tr.getStage())==null?void 0:mr.container();hr&&(hr.style.cursor=et?"crosshair":"default")},[et]);const Or=()=>{var Tr,mr;xr.current&&(xr.current=!1,jt(null));const hr=(mr=(Tr=Yt.current)==null?void 0:Tr.getStage())==null?void 0:mr.container();hr&&(hr.style.cursor="default")};return reactExports.useEffect(()=>{const hr=()=>{var mr,Er;if(!xr.current)return;xr.current=!1,jt(null),ot(null);const Tr=(Er=(mr=Yt.current)==null?void 0:mr.getStage())==null?void 0:Er.container();Tr&&(Tr.style.cursor="default")};return document.addEventListener("mouseup",hr),()=>document.removeEventListener("mouseup",hr)},[ot]),reactExports.useEffect(()=>{const hr=Tr=>{const mr=Tr.target;mr&&(mr.tagName==="INPUT"||mr.tagName==="TEXTAREA"||mr.isContentEditable)||(Tr.key==="Delete"||Tr.key==="Backspace")&&(ut!=null&&ut.length)&&(Tr.preventDefault(),cr(ut))};return window.addEventListener("keydown",hr),()=>window.removeEventListener("keydown",hr)},[ut,cr]),reactExports.useEffect(()=>{function hr(){var mr;xr.current=!1,jt(null),zt(null),Ht.current=null,ct([]),Rt(!1),Kt({vertical:[],horizontal:[],active:!1});const Tr=(mr=ft.current)==null?void 0:mr.getStage();Tr!=null&&Tr.container()&&(Tr.container().style.cursor="default"),typeof ot=="function"&&ot(null)}return window.addEventListener("canvas:resetTool",hr),()=>window.removeEventListener("canvas:resetTool",hr)},[ot,ct]),jsxRuntimeExports.jsxs("div",{ref:dt,className:"absolute inset-0 pointer-events-auto",style:{zIndex:50},children:[St.width>0&&jsxRuntimeExports.jsx(Stage,{ref:Yt,width:St.width,height:St.height,className:"absolute inset-0 konva-overlay",style:{background:"transparent",cursor:et?"crosshair":"default"},onMouseDown:Sr,onMouseMove:kr,onMouseUp:Pr,onMouseLeave:Or,children:jsxRuntimeExports.jsxs(Layer,{children:[it.map(hr=>{var Er,Dr,Cr,Lr,qr,sn,an,tn,ln,yn,pn,En,On,Xn,Un,Ln,ns,gs,Es;console.groupCollapsed(" Rendering shapes batch"),console.table(it.map(wn=>{var mn;return{id:wn.id,type:wn.type,src:(mn=wn.src)==null?void 0:mn.slice(0,60)}})),console.groupEnd();const Tr=(hr.shadowIntensity??50)/100,mr=Math.pow(Tr,1.5);switch(hr.type==="rect"&&typeof hr.cornerRadius!="number"&&(hr.cornerRadius=0),hr.type){case"circle":return jsxRuntimeExports.jsx(Ellipse,{id:hr.id.toString(),...hr,radiusX:hr.radiusX??hr.radius??50,radiusY:hr.radiusY??hr.radius??50,fill:hr.fillType==="gradient"?void 0:hr.fill??"rgba(0,128,255,0.25)",fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:Math.cos((((Er=hr.gradient)==null?void 0:Er.angle)??0)*Math.PI/180)*(hr.radiusX??50)*2,y:Math.sin((((Dr=hr.gradient)==null?void 0:Dr.angle)??0)*Math.PI/180)*(hr.radiusY??50)*2},fillLinearGradientColorStops:[0,((Cr=hr.gradient)==null?void 0:Cr.from)??"#00b4ff",1,((Lr=hr.gradient)==null?void 0:Lr.to)??"#ff00ff"],stroke:hr.stroke??"#00b4ff",strokeWidth:hr.strokeWidth??2,perfectDrawEnabled:!1,strokeScaleEnabled:!1,opacity:hr.opacity??1,shadowColor:hr.shadowColor||"transparent",shadowBlur:(hr.shadowRadius??10)*(.5+mr*1.5),shadowOffset:{x:(hr.shadowOffset??0)*Math.cos((hr.shadowAngle??315)*Math.PI/180),y:(hr.shadowOffset??0)*Math.sin((hr.shadowAngle??315)*Math.PI/180)},shadowOpacity:(hr.shadowOpacity??.5)*mr,shadowEnabled:mr>.01,onClick:wn=>{const mn=wn.evt.shiftKey;Rt(!0),ct(Dn=>mn?Dn.includes(hr.id)?Dn.filter(Tn=>Tn!==hr.id):[...Dn,hr.id]:[hr.id])},draggable:!0,onDragStart:wn=>handleShapeDuplicate({e:wn,shapes:it,selectedIds:ut,setShapes:g,setSelectedIds:ct,isDuplicating:er}),onDragMove:wn=>{var or,ur;const mn=wn.target,{x:Dn,y:Tn}=mn.position(),An=(((or=mn.radiusX)==null?void 0:or.call(mn))||hr.radiusX||50)*2,$n=(((ur=mn.radiusY)==null?void 0:ur.call(mn))||hr.radiusY||50)*2,qn={id:hr.id,x:Dn-An/2,y:Tn-$n/2,width:An,height:$n,type:hr.type},Bn=mn.getStage(),$t=getGuides(qn,it,Bn.width(),Bn.height(),{GAP:6,grid:Array.from({length:Math.floor(Bn.width()/50)},(dr,gr)=>gr*50)});$t.snapPosition.x!==void 0&&mn.x($t.snapPosition.x+An/2),$t.snapPosition.y!==void 0&&mn.y($t.snapPosition.y+$n/2);const Zt=$t.vertical.length>0||$t.horizontal.length>0;Kt({vertical:$t.vertical,horizontal:$t.horizontal,active:Zt})},onDragEnd:wn=>{if(!er.current){const mn=wn.target,{x:Dn,y:Tn}=mn.position(),An=mn.radiusX(),$n=mn.radiusY();g(qn=>qn.map(Bn=>Bn.id===hr.id?{...Bn,x:Dn,y:Tn,radiusX:An,radiusY:$n,width:An*2,height:$n*2}:Bn))}er.current=!1,Kt({vertical:[],horizontal:[]})},onTransformEnd:wn=>{const mn=wn.target,Dn=mn.scaleX(),Tn=mn.scaleY();g(An=>An.map($n=>{if($n.id!==hr.id)return $n;if($n.type==="circle"){const $t=($n.radiusX??$n.radius??50)*Dn,Zt=($n.radiusY??$n.radius??50)*Tn;return{...$n,x:mn.x(),y:mn.y(),radiusX:$t,radiusY:Zt,radius:Math.max($t,Zt),width:$t*2,height:Zt*2,rotation:mn.rotation()}}const qn=Math.max(20,($n.width??100)*Dn),Bn=Math.max(20,($n.height??100)*Tn);return{...$n,x:mn.x(),y:mn.y(),width:qn,height:Bn,rotation:mn.rotation(),cornerRadius:$n.cornerRadius?Math.min(qn,Bn)*.1:0}})),mn.scaleX(1),mn.scaleY(1)}},hr.id);case"arrow":{const wn=hr.points??[0,0,100,0];let mn={x:200,y:0};if(wn.length>=4){const[Dn,Tn,An,$n]=wn,qn=An-Dn,Bn=$n-Tn,$t=Math.sqrt(qn*qn+Bn*Bn)||1;mn={x:qn/$t*200,y:Bn/$t*200}}return jsxRuntimeExports.jsx(Arrow,{id:hr.id.toString(),points:hr.points??[0,0,100,0],...hr,pointerLength:hr.pointerLength??15,pointerWidth:hr.pointerWidth??15,stroke:hr.fillType==="gradient"?void 0:hr.stroke??"#00b4ff",fill:hr.fillType==="gradient"?void 0:hr.fill??hr.stroke??"#00b4ff",fillLinearGradientStartPoint:hr.fillType==="gradient"?{x:0,y:0}:void 0,fillLinearGradientEndPoint:hr.fillType==="gradient"?mn:void 0,fillLinearGradientColorStops:hr.fillType==="gradient"?[0,((qr=hr.gradient)==null?void 0:qr.from)??"#00b4ff",1,((sn=hr.gradient)==null?void 0:sn.to)??"#ff00ff"]:void 0,strokeWidth:hr.strokeWidth??3,hitStrokeWidth:20,opacity:hr.opacity??1,perfectDrawEnabled:!1,strokeScaleEnabled:!1,shadowColor:hr.shadowColor||"transparent",shadowBlur:(hr.shadowRadius??10)*(.5+mr*1.5),shadowOffset:{x:(hr.shadowOffset??0)*Math.cos((hr.shadowAngle??315)*Math.PI/180),y:(hr.shadowOffset??0)*Math.sin((hr.shadowAngle??315)*Math.PI/180)},shadowOpacity:(hr.shadowOpacity??.5)*mr,shadowEnabled:mr>.01,onClick:Dn=>{const Tn=Dn.evt.shiftKey;Rt(!0),ct(An=>Tn?An.includes(hr.id)?An.filter($n=>$n!==hr.id):[...An,hr.id]:[hr.id])},draggable:!0,onDragStart:Dn=>handleShapeDuplicate({e:Dn,shapes:it,selectedIds:ut,setShapes:g,setSelectedIds:ct,isDuplicating:er}),onDragMove:Dn=>{const Tn=Dn.target,An=Tn.getStage(),$n=Tn.getClientRect({relativeTo:An}),{x:qn,y:Bn,width:$t,height:Zt}=$n,or={id:hr.id,x:qn,y:Bn,width:$t,height:Zt,type:hr.type},ur=getGuides(or,it,An.width(),An.height(),{GAP:6,grid:Array.from({length:Math.floor(An.width()/50)},(_r,Nr)=>Nr*50)}),dr=Tn.x()-qn,gr=Tn.y()-Bn;ur.snapPosition.x!==void 0&&Tn.x(ur.snapPosition.x+dr),ur.snapPosition.y!==void 0&&Tn.y(ur.snapPosition.y+gr);const Ar=ur.vertical.length>0||ur.horizontal.length>0;Kt({vertical:ur.vertical,horizontal:ur.horizontal,active:Ar})},onDragEnd:Dn=>{if(!er.current){const{x:Tn,y:An}=Dn.target.position();g($n=>$n.map(qn=>qn.id===hr.id?{...qn,x:Tn,y:An}:qn))}er.current=!1,Kt({vertical:[],horizontal:[]})},onTransformEnd:Dn=>{const Tn=Dn.target,An=Tn.scaleX(),$n=Tn.scaleY(),qn=(hr.points||[0,0,100,0]).map((Bn,$t)=>$t%2===0?Bn*An:Bn*$n);g(Bn=>Bn.map($t=>$t.id===hr.id?{...$t,x:Tn.x(),y:Tn.y(),points:qn,rotation:Tn.rotation()}:$t)),Tn.scaleX(1),Tn.scaleY(1)}},hr.id)}case"text":if(hr.isRichEditing){const wn=(an=Yt.current)==null?void 0:an.getStage(),mn=(wn==null?void 0:wn.scaleX())??1,Dn=(wn==null?void 0:wn.scaleY())??1,Tn=1/mn,An=1/Dn;return jsxRuntimeExports.jsx(Html,{groupProps:{x:hr.x,y:hr.y,rotation:hr.rotation||0},divProps:{style:{pointerEvents:"none"}},children:jsxRuntimeExports.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:hr.html||hr.text||""},style:{display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",minWidth:"10px",minHeight:`${hr.fontSize*1.2}px`,fontSize:`${hr.fontSize||20}px`,fontFamily:hr.fontFamily||"Inter",color:hr.fill||"#fff",background:"transparent",outline:"none",border:"none",padding:"0",margin:"0",direction:"ltr",textAlign:hr.align||"left",lineHeight:"1.2",transformOrigin:"top left",transform:`scale(${Tn}, ${An})`,pointerEvents:hr.isRichEditing?"auto":"none",cursor:hr.isRichEditing?"text":"move"},onFocus:()=>{const $n=wn==null?void 0:wn.findOne(`#${hr.id}`);$n&&$n.draggable(!1)},onInput:$n=>{const qn=$n.currentTarget,Bn=qn.innerText||"",$t=document.createElement("span");$t.style.font=`${hr.fontSize||20}px ${hr.fontFamily||"Inter"}`,$t.style.whiteSpace="nowrap",$t.style.visibility="hidden",$t.textContent=Bn||" ",document.body.appendChild($t);const Zt=$t.offsetWidth+10;document.body.removeChild($t),qn.style.width=`${Zt}px`,g(or=>or.map(ur=>ur.id===hr.id?{...ur,text:Bn,width:Zt}:ur))},onBlur:$n=>{const qn=$n.currentTarget;qn.style.pointerEvents="none";const Bn=qn.innerHTML,$t=qn.innerText||"",Zt=document.createElement("div");Zt.innerHTML=Bn;const or=Zt.querySelector("[style*='color']"),ur=(or==null?void 0:or.style.color)||hr.fill||"#fff",dr=wn==null?void 0:wn.findOne(`#${hr.id}`);dr&&dr.draggable(!0),g(gr=>gr.map(Ar=>Ar.id===hr.id?{...Ar,html:Bn,text:$t,fill:ur,isRichEditing:!1,draggable:!0}:Ar)),setTimeout(()=>wn==null?void 0:wn.batchDraw(),20)}})},hr.id)}return jsxRuntimeExports.jsx(Text$1,{id:hr.id.toString(),...hr,fill:hr.fillType==="gradient"?void 0:hr.fill??"#ffffff",fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:Math.cos((((tn=hr.gradient)==null?void 0:tn.angle)??0)*Math.PI/180)*(hr.width??200),y:Math.sin((((ln=hr.gradient)==null?void 0:ln.angle)??0)*Math.PI/180)*(hr.height??50)},fillLinearGradientColorStops:[0,((yn=hr.gradient)==null?void 0:yn.from)??"#00b4ff",1,((pn=hr.gradient)==null?void 0:pn.to)??"#ff00ff"],stroke:hr.stroke,strokeWidth:hr.strokeWidth??1,fontSize:hr.fontSize??20,fontFamily:hr.fontFamily??"Inter",width:hr.textMode==="box"?hr.width||200:hr.width||300,height:hr.textMode==="box"&&hr.height||hr.fontSize*1.5,wrap:hr.textMode==="box"?"word":"none",align:hr.align||"left",ellipsis:hr.textMode==="line",shadowColor:hr.shadowColor||"transparent",shadowBlur:(hr.shadowRadius??10)*(.5+mr*1.5),shadowOffset:{x:(hr.shadowOffset??0)*Math.cos((hr.shadowAngle??315)*Math.PI/180),y:(hr.shadowOffset??0)*Math.sin((hr.shadowAngle??315)*Math.PI/180)},shadowOpacity:(hr.shadowOpacity??.5)*mr,shadowEnabled:mr>.01,draggable:!hr.isEditing,opacity:hr.opacity??1,onClick:wn=>{const mn=wn.evt.shiftKey;Rt(!0),ct(Dn=>mn?Dn.includes(hr.id)?Dn.filter(Tn=>Tn!==hr.id):[...Dn,hr.id]:[hr.id])},onDblClick:wn=>{g(mn=>mn.map(Dn=>Dn.id===hr.id?{...Dn,isRichEditing:!0}:Dn))},onDragStart:wn=>handleShapeDuplicate({e:wn,shapes:it,selectedIds:ut,setShapes:g,setSelectedIds:ct,isDuplicating:er}),onDragMove:wn=>{const mn=wn.target,Dn=mn.getStage(),Tn=mn.getClientRect({relativeTo:Dn}),{x:An,y:$n,width:qn,height:Bn}=Tn,$t={id:hr.id,x:An,y:$n,width:qn,height:Bn,type:hr.type},Zt=getGuides($t,it,Dn.width(),Dn.height(),{GAP:6,grid:Array.from({length:Math.floor(Dn.width()/50)},(gr,Ar)=>Ar*50)}),or=mn.x()-An,ur=mn.y()-$n;Zt.snapPosition.x!==void 0&&mn.x(Zt.snapPosition.x+or),Zt.snapPosition.y!==void 0&&mn.y(Zt.snapPosition.y+ur);const dr=Zt.vertical.length>0||Zt.horizontal.length>0;Kt({vertical:Zt.vertical,horizontal:Zt.horizontal,active:dr})},onDragEnd:wn=>{if(!er.current){const{x:mn,y:Dn}=wn.target.position();g(Tn=>Tn.map(An=>An.id===hr.id?{...An,x:mn,y:Dn}:An))}er.current=!1,Kt({vertical:[],horizontal:[]})},onTransformEnd:wn=>{const mn=wn.target;vr({x:mn.x(),y:mn.y(),rotation:mn.rotation(),scaleX:mn.scaleX(),scaleY:mn.scaleY()}),mn.scaleX(1),mn.scaleY(1)}},hr.id);case"image":return jsxRuntimeExports.jsx(lr,{shape:hr,setShapes:g,setSelectedIds:ct,setPanelOpen:Rt,selectedIds:ut,isDuplicating:er},hr.id);case"path":return jsxRuntimeExports.jsx(Path,{id:hr.id.toString(),data:hr.data,fill:hr.fillType==="gradient"?void 0:hr.fill??"rgba(0,128,255,0.25)",fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:Math.cos((((En=hr.gradient)==null?void 0:En.angle)??0)*Math.PI/180)*(hr.width??100),y:Math.sin((((On=hr.gradient)==null?void 0:On.angle)??0)*Math.PI/180)*(hr.height??100)},fillLinearGradientColorStops:[0,((Xn=hr.gradient)==null?void 0:Xn.from)??"#00b4ff",1,((Un=hr.gradient)==null?void 0:Un.to)??"#ff00ff"],stroke:hr.stroke,strokeWidth:hr.strokeWidth,opacity:hr.opacity??1,shadowColor:hr.shadowColor||"transparent",shadowBlur:(hr.shadowRadius??10)*(.5+mr*1.5),shadowOffset:{x:(hr.shadowOffset??0)*Math.cos((hr.shadowAngle??315)*Math.PI/180),y:(hr.shadowOffset??0)*Math.sin((hr.shadowAngle??315)*Math.PI/180)},shadowOpacity:(hr.shadowOpacity??.5)*mr,shadowEnabled:mr>.01,draggable:!0,onClick:wn=>{const mn=wn.evt.shiftKey;ct(Dn=>mn?[...Dn,hr.id]:[hr.id]),Rt(!0)},onDragStart:wn=>handleShapeDuplicate({e:wn,shapes:it,selectedIds:ut,setShapes:g,setSelectedIds:ct,isDuplicating:er}),onDragMove:wn=>{var or,ur,dr,gr;const mn=wn.target,{x:Dn,y:Tn}=mn.position(),An=((or=mn.width)==null?void 0:or.call(mn))||((ur=mn.radiusX)==null?void 0:ur.call(mn))*2||hr.width||0,$n=((dr=mn.height)==null?void 0:dr.call(mn))||((gr=mn.radiusY)==null?void 0:gr.call(mn))*2||hr.height||0,qn={id:hr.id,x:Dn,y:Tn,width:An,height:$n,type:hr.type},Bn=mn.getStage(),$t=getGuides(qn,it,Bn.width(),Bn.height(),{GAP:6,grid:Array.from({length:Math.floor(Bn.width()/50)},(Ar,_r)=>_r*50)});$t.snapPosition.x!==void 0&&mn.x($t.snapPosition.x),$t.snapPosition.y!==void 0&&mn.y($t.snapPosition.y);const Zt=$t.vertical.length>0||$t.horizontal.length>0;Kt({vertical:$t.vertical,horizontal:$t.horizontal,active:Zt})},onDragEnd:wn=>{if(!er.current){const mn=wn.target,Dn=mn.getStage(),Tn=mn.getClientRect({relativeTo:Dn});g(An=>An.map($n=>$n.id===hr.id?{...$n,x:Tn.x,y:Tn.y,width:Tn.width??$n.width,height:Tn.height??$n.height}:$n))}er.current=!1,Kt({vertical:[],horizontal:[]})},onTransformEnd:wn=>{const mn=wn.target,Dn=mn.scaleX(),Tn=mn.scaleY(),An=mn.getClientRect({relativeTo:mn.getStage()});g($n=>$n.map(qn=>{if(qn.id!==hr.id)return qn;const Bn=(qn.width??An.width)*Dn,$t=(qn.height??An.height)*Tn,Zt=An.x+An.width/2-Bn/2,or=An.y+An.height/2-$t/2;return{...qn,x:Zt,y:or,width:Bn,height:$t,rotation:mn.rotation()}})),mn.scaleX(1),mn.scaleY(1)}},hr.id);default:return jsxRuntimeExports.jsx(Rect$1,{id:hr.id.toString(),...hr,fill:hr.fillType==="gradient"?void 0:hr.fill??"rgba(0,128,255,0.25)",fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:Math.cos((((Ln=hr.gradient)==null?void 0:Ln.angle)??0)*Math.PI/180)*(hr.width??100),y:Math.sin((((ns=hr.gradient)==null?void 0:ns.angle)??0)*Math.PI/180)*(hr.height??100)},fillLinearGradientColorStops:[0,((gs=hr.gradient)==null?void 0:gs.from)??"#00b4ff",1,((Es=hr.gradient)==null?void 0:Es.to)??"#ff00ff"],stroke:hr.stroke??"#00b4ff",strokeWidth:hr.strokeWidth??2,opacity:hr.opacity??1,perfectDrawEnabled:!1,strokeScaleEnabled:!1,shadowColor:hr.shadowColor||"transparent",shadowBlur:(hr.shadowRadius??10)*(.5+mr*1.5),shadowOffset:{x:(hr.shadowOffset??0)*Math.cos((hr.shadowAngle??315)*Math.PI/180),y:(hr.shadowOffset??0)*Math.sin((hr.shadowAngle??315)*Math.PI/180)},shadowOpacity:(hr.shadowOpacity??.5)*mr,shadowEnabled:mr>.01,onClick:wn=>{const mn=wn.evt.shiftKey;Rt(!0),ct(Dn=>mn?Dn.includes(hr.id)?Dn.filter(Tn=>Tn!==hr.id):[...Dn,hr.id]:[hr.id])},draggable:!0,onDragStart:wn=>handleShapeDuplicate({e:wn,shapes:it,selectedIds:ut,setShapes:g,setSelectedIds:ct,isDuplicating:er}),onDragMove:wn=>{var or,ur,dr,gr;const mn=wn.target,{x:Dn,y:Tn}=mn.position(),An=((or=mn.width)==null?void 0:or.call(mn))||((ur=mn.radiusX)==null?void 0:ur.call(mn))*2||hr.width||0,$n=((dr=mn.height)==null?void 0:dr.call(mn))||((gr=mn.radiusY)==null?void 0:gr.call(mn))*2||hr.height||0,qn={id:hr.id,x:Dn,y:Tn,width:An,height:$n,type:hr.type},Bn=mn.getStage(),$t=getGuides(qn,it,Bn.width(),Bn.height(),{GAP:6,grid:Array.from({length:Math.floor(Bn.width()/50)},(Ar,_r)=>_r*50)});$t.snapPosition.x!==void 0&&mn.x($t.snapPosition.x),$t.snapPosition.y!==void 0&&mn.y($t.snapPosition.y);const Zt=$t.vertical.length>0||$t.horizontal.length>0;Kt({vertical:$t.vertical,horizontal:$t.horizontal,active:Zt})},onDragEnd:wn=>{if(!er.current){const{x:mn,y:Dn}=wn.target.position();g(Tn=>Tn.map(An=>An.id===hr.id?{...An,x:mn,y:Dn}:An))}er.current=!1,Kt({vertical:[],horizontal:[]})},onTransformEnd:wn=>{const mn=wn.target,Dn=mn.scaleX(),Tn=mn.scaleY();g(An=>An.map($n=>{if($n.id!==hr.id)return $n;const qn=Math.max(20,($n.width??100)*Dn),Bn=Math.max(20,($n.height??100)*Tn);let $t=$n.cornerRadius??0;if($t>0){const Zt=(Dn+Tn)/2;$t=$t*Zt}return{...$n,x:mn.x(),y:mn.y(),width:qn,height:Bn,rotation:mn.rotation(),cornerRadius:$t}})),mn.scaleX(1),mn.scaleY(1)}},hr.id)}}),Ft&&(Ft.type==="rect"?jsxRuntimeExports.jsx(Rect$1,{...Ft}):Ft.type==="circle"?jsxRuntimeExports.jsx(Ellipse,{...Ft}):Ft.type==="arrow"?jsxRuntimeExports.jsx(Arrow,{...Ft}):null),Bt&&jsxRuntimeExports.jsx(Rect$1,{x:Bt.x,y:Bt.y,width:Bt.width,height:Bt.height,fill:"rgba(0, 128, 255, 0.1)",stroke:"#00b4ff",strokeWidth:1,dash:[4,4],listening:!1}),Array.from({length:Math.floor(St.width/50)},(hr,Tr)=>jsxRuntimeExports.jsx(Line,{points:[Tr*50,0,Tr*50,St.height],stroke:"rgba(255,255,255,0.05)",strokeWidth:.5,listening:!1},`grid-v-${Tr}`)),Array.from({length:Math.floor(St.height/50)},(hr,Tr)=>jsxRuntimeExports.jsx(Line,{points:[0,Tr*50,St.width,Tr*50],stroke:"rgba(255,255,255,0.05)",strokeWidth:.5,listening:!1},`grid-h-${Tr}`)),[...new Set(Ut.vertical.map(hr=>Math.round(hr)))].map(hr=>jsxRuntimeExports.jsx(Line,{points:[hr,0,hr,St.height],stroke:"#00b4ff",strokeWidth:1,dash:[4,4],listening:!1},`v-${hr}`)),[...new Set(Ut.horizontal.map(hr=>Math.round(hr)))].map(hr=>jsxRuntimeExports.jsx(Line,{points:[0,hr,St.width,hr],stroke:"#00b4ff",strokeWidth:1,dash:[4,4],listening:!1},`h-${hr}`)),jsxRuntimeExports.jsx(Transformer,{ref:ft,rotateEnabled:!0,resizeEnabled:!0,keepRatio:!1,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],anchorCornerRadius:50,anchorSize:5,anchorStroke:"#00b4ff",anchorStrokeWidth:.5,anchorFill:"#ffffff",borderStroke:"#00b4ff",borderStrokeWidth:1.5,borderDash:[3,3],ignoreStroke:!1})]})}),reactDomExports.createPortal(jsxRuntimeExports.jsx(ShapePropertiesPanel,{panelOpen:Tt,selectedIds:ut,shapes:it,updateSelected:vr,deleteSelected:cr}),document.body)]})}function commonjsRequire(it){throw new Error('Could not dynamically require "'+it+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var paperFull={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);var acorn={exports:{}},hasRequiredAcorn;function requireAcorn(){return hasRequiredAcorn||(hasRequiredAcorn=1,function(it,g){(function(et,ot){ot(g)})(commonjsGlobal,function(et){var ot=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],ut=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],ct="-----------------------------------------------------------------------------------------------------------------------------------------------------",dt="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ft={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},St="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",kt={5:St,"5module":St+" export import",6:St+" const class extends export import super"},Tt=/^in(stanceof)?$/,Rt=new RegExp("["+dt+"]"),Ft=new RegExp("["+dt+ct+"]");function jt(sr,br){for(var Ur=65536,rn=0;rn<br.length;rn+=2){if(Ur+=br[rn],Ur>sr)return!1;if(Ur+=br[rn+1],Ur>=sr)return!0}return!1}function Bt(sr,br){return sr<65?sr===36:sr<91?!0:sr<97?sr===95:sr<123?!0:sr<=65535?sr>=170&&Rt.test(String.fromCharCode(sr)):br===!1?!1:jt(sr,ut)}function zt(sr,br){return sr<48?sr===36:sr<58?!0:sr<65?!1:sr<91?!0:sr<97?sr===95:sr<123?!0:sr<=65535?sr>=170&&Ft.test(String.fromCharCode(sr)):br===!1?!1:jt(sr,ut)||jt(sr,ot)}var Ht=function(br,Ur){Ur===void 0&&(Ur={}),this.label=br,this.keyword=Ur.keyword,this.beforeExpr=!!Ur.beforeExpr,this.startsExpr=!!Ur.startsExpr,this.isLoop=!!Ur.isLoop,this.isAssign=!!Ur.isAssign,this.prefix=!!Ur.prefix,this.postfix=!!Ur.postfix,this.binop=Ur.binop||null,this.updateContext=null};function Ut(sr,br){return new Ht(sr,{beforeExpr:!0,binop:br})}var Kt={beforeExpr:!0},Yt={startsExpr:!0},er={};function ar(sr,br){return br===void 0&&(br={}),br.keyword=sr,er[sr]=new Ht(sr,br)}var ir={num:new Ht("num",Yt),regexp:new Ht("regexp",Yt),string:new Ht("string",Yt),name:new Ht("name",Yt),privateId:new Ht("privateId",Yt),eof:new Ht("eof"),bracketL:new Ht("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ht("]"),braceL:new Ht("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ht("}"),parenL:new Ht("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ht(")"),comma:new Ht(",",Kt),semi:new Ht(";",Kt),colon:new Ht(":",Kt),dot:new Ht("."),question:new Ht("?",Kt),questionDot:new Ht("?."),arrow:new Ht("=>",Kt),template:new Ht("template"),invalidTemplate:new Ht("invalidTemplate"),ellipsis:new Ht("...",Kt),backQuote:new Ht("`",Yt),dollarBraceL:new Ht("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ht("=",{beforeExpr:!0,isAssign:!0}),assign:new Ht("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ht("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ht("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ut("||",1),logicalAND:Ut("&&",2),bitwiseOR:Ut("|",3),bitwiseXOR:Ut("^",4),bitwiseAND:Ut("&",5),equality:Ut("==/!=/===/!==",6),relational:Ut("</>/<=/>=",7),bitShift:Ut("<</>>/>>>",8),plusMin:new Ht("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ut("%",10),star:Ut("*",10),slash:Ut("/",10),starstar:new Ht("**",{beforeExpr:!0}),coalesce:Ut("??",1),_break:ar("break"),_case:ar("case",Kt),_catch:ar("catch"),_continue:ar("continue"),_debugger:ar("debugger"),_default:ar("default",Kt),_do:ar("do",{isLoop:!0,beforeExpr:!0}),_else:ar("else",Kt),_finally:ar("finally"),_for:ar("for",{isLoop:!0}),_function:ar("function",Yt),_if:ar("if"),_return:ar("return",Kt),_switch:ar("switch"),_throw:ar("throw",Kt),_try:ar("try"),_var:ar("var"),_const:ar("const"),_while:ar("while",{isLoop:!0}),_with:ar("with"),_new:ar("new",{beforeExpr:!0,startsExpr:!0}),_this:ar("this",Yt),_super:ar("super",Yt),_class:ar("class",Yt),_extends:ar("extends",Kt),_export:ar("export"),_import:ar("import",Yt),_null:ar("null",Yt),_true:ar("true",Yt),_false:ar("false",Yt),_in:ar("in",{beforeExpr:!0,binop:7}),_instanceof:ar("instanceof",{beforeExpr:!0,binop:7}),_typeof:ar("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:ar("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:ar("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lr=/\r\n?|\n|\u2028|\u2029/,cr=new RegExp(lr.source,"g");function vr(sr){return sr===10||sr===13||sr===8232||sr===8233}function xr(sr,br,Ur){Ur===void 0&&(Ur=sr.length);for(var rn=br;rn<Ur;rn++){var dn=sr.charCodeAt(rn);if(vr(dn))return rn<Ur-1&&dn===13&&sr.charCodeAt(rn+1)===10?rn+2:rn+1}return-1}var yr=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Sr=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,kr=Object.prototype,Pr=kr.hasOwnProperty,Or=kr.toString,hr=Object.hasOwn||function(sr,br){return Pr.call(sr,br)},Tr=Array.isArray||function(sr){return Or.call(sr)==="[object Array]"},mr=Object.create(null);function Er(sr){return mr[sr]||(mr[sr]=new RegExp("^(?:"+sr.replace(/ /g,"|")+")$"))}function Dr(sr){return sr<=65535?String.fromCharCode(sr):(sr-=65536,String.fromCharCode((sr>>10)+55296,(sr&1023)+56320))}var Cr=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Lr=function(br,Ur){this.line=br,this.column=Ur};Lr.prototype.offset=function(br){return new Lr(this.line,this.column+br)};var qr=function(br,Ur,rn){this.start=Ur,this.end=rn,br.sourceFile!==null&&(this.source=br.sourceFile)};function sn(sr,br){for(var Ur=1,rn=0;;){var dn=xr(sr,rn,br);if(dn<0)return new Lr(Ur,br-rn);++Ur,rn=dn}}var an={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},tn=!1;function ln(sr){var br={};for(var Ur in an)br[Ur]=sr&&hr(sr,Ur)?sr[Ur]:an[Ur];if(br.ecmaVersion==="latest"?br.ecmaVersion=1e8:br.ecmaVersion==null?(!tn&&typeof console=="object"&&console.warn&&(tn=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),br.ecmaVersion=11):br.ecmaVersion>=2015&&(br.ecmaVersion-=2009),br.allowReserved==null&&(br.allowReserved=br.ecmaVersion<5),(!sr||sr.allowHashBang==null)&&(br.allowHashBang=br.ecmaVersion>=14),Tr(br.onToken)){var rn=br.onToken;br.onToken=function(dn){return rn.push(dn)}}return Tr(br.onComment)&&(br.onComment=yn(br,br.onComment)),br}function yn(sr,br){return function(Ur,rn,dn,Rn,Nn,Zn){var rs={type:Ur?"Block":"Line",value:rn,start:dn,end:Rn};sr.locations&&(rs.loc=new qr(this,Nn,Zn)),sr.ranges&&(rs.range=[dn,Rn]),br.push(rs)}}var pn=1,En=2,On=4,Xn=8,Un=16,Ln=32,ns=64,gs=128,Es=256,wn=pn|En|Es;function mn(sr,br){return En|(sr?On:0)|(br?Xn:0)}var Dn=0,Tn=1,An=2,$n=3,qn=4,Bn=5,$t=function(br,Ur,rn){this.options=br=ln(br),this.sourceFile=br.sourceFile,this.keywords=Er(kt[br.ecmaVersion>=6?6:br.sourceType==="module"?"5module":5]);var dn="";br.allowReserved!==!0&&(dn=ft[br.ecmaVersion>=6?6:br.ecmaVersion===5?5:3],br.sourceType==="module"&&(dn+=" await")),this.reservedWords=Er(dn);var Rn=(dn?dn+" ":"")+ft.strict;this.reservedWordsStrict=Er(Rn),this.reservedWordsStrictBind=Er(Rn+" "+ft.strictBind),this.input=String(Ur),this.containsEsc=!1,rn?(this.pos=rn,this.lineStart=this.input.lastIndexOf(`
`,rn-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lr).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ir.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=br.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&br.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(pn),this.regexpState=null,this.privateNameStack=[]},Zt={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};$t.prototype.parse=function(){var br=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(br)},Zt.inFunction.get=function(){return(this.currentVarScope().flags&En)>0},Zt.inGenerator.get=function(){return(this.currentVarScope().flags&Xn)>0&&!this.currentVarScope().inClassFieldInit},Zt.inAsync.get=function(){return(this.currentVarScope().flags&On)>0&&!this.currentVarScope().inClassFieldInit},Zt.canAwait.get=function(){for(var sr=this.scopeStack.length-1;sr>=0;sr--){var br=this.scopeStack[sr];if(br.inClassFieldInit||br.flags&Es)return!1;if(br.flags&En)return(br.flags&On)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},Zt.allowSuper.get=function(){var sr=this.currentThisScope(),br=sr.flags,Ur=sr.inClassFieldInit;return(br&ns)>0||Ur||this.options.allowSuperOutsideMethod},Zt.allowDirectSuper.get=function(){return(this.currentThisScope().flags&gs)>0},Zt.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Zt.allowNewDotTarget.get=function(){var sr=this.currentThisScope(),br=sr.flags,Ur=sr.inClassFieldInit;return(br&(En|Es))>0||Ur},Zt.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Es)>0},$t.extend=function(){for(var br=[],Ur=arguments.length;Ur--;)br[Ur]=arguments[Ur];for(var rn=this,dn=0;dn<br.length;dn++)rn=br[dn](rn);return rn},$t.parse=function(br,Ur){return new this(Ur,br).parse()},$t.parseExpressionAt=function(br,Ur,rn){var dn=new this(rn,br,Ur);return dn.nextToken(),dn.parseExpression()},$t.tokenizer=function(br,Ur){return new this(Ur,br)},Object.defineProperties($t.prototype,Zt);var or=$t.prototype,ur=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;or.strictDirective=function(sr){if(this.options.ecmaVersion<5)return!1;for(;;){Sr.lastIndex=sr,sr+=Sr.exec(this.input)[0].length;var br=ur.exec(this.input.slice(sr));if(!br)return!1;if((br[1]||br[2])==="use strict"){Sr.lastIndex=sr+br[0].length;var Ur=Sr.exec(this.input),rn=Ur.index+Ur[0].length,dn=this.input.charAt(rn);return dn===";"||dn==="}"||lr.test(Ur[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(dn)||dn==="!"&&this.input.charAt(rn+1)==="=")}sr+=br[0].length,Sr.lastIndex=sr,sr+=Sr.exec(this.input)[0].length,this.input[sr]===";"&&sr++}},or.eat=function(sr){return this.type===sr?(this.next(),!0):!1},or.isContextual=function(sr){return this.type===ir.name&&this.value===sr&&!this.containsEsc},or.eatContextual=function(sr){return this.isContextual(sr)?(this.next(),!0):!1},or.expectContextual=function(sr){this.eatContextual(sr)||this.unexpected()},or.canInsertSemicolon=function(){return this.type===ir.eof||this.type===ir.braceR||lr.test(this.input.slice(this.lastTokEnd,this.start))},or.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},or.semicolon=function(){!this.eat(ir.semi)&&!this.insertSemicolon()&&this.unexpected()},or.afterTrailingComma=function(sr,br){if(this.type===sr)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),br||this.next(),!0},or.expect=function(sr){this.eat(sr)||this.unexpected()},or.unexpected=function(sr){this.raise(sr??this.start,"Unexpected token")};var dr=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};or.checkPatternErrors=function(sr,br){if(sr){sr.trailingComma>-1&&this.raiseRecoverable(sr.trailingComma,"Comma is not permitted after the rest element");var Ur=br?sr.parenthesizedAssign:sr.parenthesizedBind;Ur>-1&&this.raiseRecoverable(Ur,br?"Assigning to rvalue":"Parenthesized pattern")}},or.checkExpressionErrors=function(sr,br){if(!sr)return!1;var Ur=sr.shorthandAssign,rn=sr.doubleProto;if(!br)return Ur>=0||rn>=0;Ur>=0&&this.raise(Ur,"Shorthand property assignments are valid only in destructuring patterns"),rn>=0&&this.raiseRecoverable(rn,"Redefinition of __proto__ property")},or.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},or.isSimpleAssignTarget=function(sr){return sr.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(sr.expression):sr.type==="Identifier"||sr.type==="MemberExpression"};var gr=$t.prototype;gr.parseTopLevel=function(sr){var br=Object.create(null);for(sr.body||(sr.body=[]);this.type!==ir.eof;){var Ur=this.parseStatement(null,!0,br);sr.body.push(Ur)}if(this.inModule)for(var rn=0,dn=Object.keys(this.undefinedExports);rn<dn.length;rn+=1){var Rn=dn[rn];this.raiseRecoverable(this.undefinedExports[Rn].start,"Export '"+Rn+"' is not defined")}return this.adaptDirectivePrologue(sr.body),this.next(),sr.sourceType=this.options.sourceType,this.finishNode(sr,"Program")};var Ar={kind:"loop"},_r={kind:"switch"};gr.isLet=function(sr){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Sr.lastIndex=this.pos;var br=Sr.exec(this.input),Ur=this.pos+br[0].length,rn=this.input.charCodeAt(Ur);if(rn===91||rn===92)return!0;if(sr)return!1;if(rn===123||rn>55295&&rn<56320)return!0;if(Bt(rn,!0)){for(var dn=Ur+1;zt(rn=this.input.charCodeAt(dn),!0);)++dn;if(rn===92||rn>55295&&rn<56320)return!0;var Rn=this.input.slice(Ur,dn);if(!Tt.test(Rn))return!0}return!1},gr.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Sr.lastIndex=this.pos;var sr=Sr.exec(this.input),br=this.pos+sr[0].length,Ur;return!lr.test(this.input.slice(this.pos,br))&&this.input.slice(br,br+8)==="function"&&(br+8===this.input.length||!(zt(Ur=this.input.charCodeAt(br+8))||Ur>55295&&Ur<56320))},gr.parseStatement=function(sr,br,Ur){var rn=this.type,dn=this.startNode(),Rn;switch(this.isLet(sr)&&(rn=ir._var,Rn="let"),rn){case ir._break:case ir._continue:return this.parseBreakContinueStatement(dn,rn.keyword);case ir._debugger:return this.parseDebuggerStatement(dn);case ir._do:return this.parseDoStatement(dn);case ir._for:return this.parseForStatement(dn);case ir._function:return sr&&(this.strict||sr!=="if"&&sr!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(dn,!1,!sr);case ir._class:return sr&&this.unexpected(),this.parseClass(dn,!0);case ir._if:return this.parseIfStatement(dn);case ir._return:return this.parseReturnStatement(dn);case ir._switch:return this.parseSwitchStatement(dn);case ir._throw:return this.parseThrowStatement(dn);case ir._try:return this.parseTryStatement(dn);case ir._const:case ir._var:return Rn=Rn||this.value,sr&&Rn!=="var"&&this.unexpected(),this.parseVarStatement(dn,Rn);case ir._while:return this.parseWhileStatement(dn);case ir._with:return this.parseWithStatement(dn);case ir.braceL:return this.parseBlock(!0,dn);case ir.semi:return this.parseEmptyStatement(dn);case ir._export:case ir._import:if(this.options.ecmaVersion>10&&rn===ir._import){Sr.lastIndex=this.pos;var Nn=Sr.exec(this.input),Zn=this.pos+Nn[0].length,rs=this.input.charCodeAt(Zn);if(rs===40||rs===46)return this.parseExpressionStatement(dn,this.parseExpression())}return this.options.allowImportExportEverywhere||(br||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),rn===ir._import?this.parseImport(dn):this.parseExport(dn,Ur);default:if(this.isAsyncFunction())return sr&&this.unexpected(),this.next(),this.parseFunctionStatement(dn,!0,!sr);var Ts=this.value,As=this.parseExpression();return rn===ir.name&&As.type==="Identifier"&&this.eat(ir.colon)?this.parseLabeledStatement(dn,Ts,As,sr):this.parseExpressionStatement(dn,As)}},gr.parseBreakContinueStatement=function(sr,br){var Ur=br==="break";this.next(),this.eat(ir.semi)||this.insertSemicolon()?sr.label=null:this.type!==ir.name?this.unexpected():(sr.label=this.parseIdent(),this.semicolon());for(var rn=0;rn<this.labels.length;++rn){var dn=this.labels[rn];if((sr.label==null||dn.name===sr.label.name)&&(dn.kind!=null&&(Ur||dn.kind==="loop")||sr.label&&Ur))break}return rn===this.labels.length&&this.raise(sr.start,"Unsyntactic "+br),this.finishNode(sr,Ur?"BreakStatement":"ContinueStatement")},gr.parseDebuggerStatement=function(sr){return this.next(),this.semicolon(),this.finishNode(sr,"DebuggerStatement")},gr.parseDoStatement=function(sr){return this.next(),this.labels.push(Ar),sr.body=this.parseStatement("do"),this.labels.pop(),this.expect(ir._while),sr.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ir.semi):this.semicolon(),this.finishNode(sr,"DoWhileStatement")},gr.parseForStatement=function(sr){this.next();var br=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Ar),this.enterScope(0),this.expect(ir.parenL),this.type===ir.semi)return br>-1&&this.unexpected(br),this.parseFor(sr,null);var Ur=this.isLet();if(this.type===ir._var||this.type===ir._const||Ur){var rn=this.startNode(),dn=Ur?"let":this.value;return this.next(),this.parseVar(rn,!0,dn),this.finishNode(rn,"VariableDeclaration"),(this.type===ir._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&rn.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===ir._in?br>-1&&this.unexpected(br):sr.await=br>-1),this.parseForIn(sr,rn)):(br>-1&&this.unexpected(br),this.parseFor(sr,rn))}var Rn=this.isContextual("let"),Nn=!1,Zn=this.containsEsc,rs=new dr,Ts=this.start,As=br>-1?this.parseExprSubscripts(rs,"await"):this.parseExpression(!0,rs);return this.type===ir._in||(Nn=this.options.ecmaVersion>=6&&this.isContextual("of"))?(br>-1?(this.type===ir._in&&this.unexpected(br),sr.await=!0):Nn&&this.options.ecmaVersion>=8&&(As.start===Ts&&!Zn&&As.type==="Identifier"&&As.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(sr.await=!1)),Rn&&Nn&&this.raise(As.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(As,!1,rs),this.checkLValPattern(As),this.parseForIn(sr,As)):(this.checkExpressionErrors(rs,!0),br>-1&&this.unexpected(br),this.parseFor(sr,As))},gr.parseFunctionStatement=function(sr,br,Ur){return this.next(),this.parseFunction(sr,Fr|(Ur?0:Vr),!1,br)},gr.parseIfStatement=function(sr){return this.next(),sr.test=this.parseParenExpression(),sr.consequent=this.parseStatement("if"),sr.alternate=this.eat(ir._else)?this.parseStatement("if"):null,this.finishNode(sr,"IfStatement")},gr.parseReturnStatement=function(sr){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ir.semi)||this.insertSemicolon()?sr.argument=null:(sr.argument=this.parseExpression(),this.semicolon()),this.finishNode(sr,"ReturnStatement")},gr.parseSwitchStatement=function(sr){this.next(),sr.discriminant=this.parseParenExpression(),sr.cases=[],this.expect(ir.braceL),this.labels.push(_r),this.enterScope(0);for(var br,Ur=!1;this.type!==ir.braceR;)if(this.type===ir._case||this.type===ir._default){var rn=this.type===ir._case;br&&this.finishNode(br,"SwitchCase"),sr.cases.push(br=this.startNode()),br.consequent=[],this.next(),rn?br.test=this.parseExpression():(Ur&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),Ur=!0,br.test=null),this.expect(ir.colon)}else br||this.unexpected(),br.consequent.push(this.parseStatement(null));return this.exitScope(),br&&this.finishNode(br,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(sr,"SwitchStatement")},gr.parseThrowStatement=function(sr){return this.next(),lr.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),sr.argument=this.parseExpression(),this.semicolon(),this.finishNode(sr,"ThrowStatement")};var Nr=[];gr.parseCatchClauseParam=function(){var sr=this.parseBindingAtom(),br=sr.type==="Identifier";return this.enterScope(br?Ln:0),this.checkLValPattern(sr,br?qn:An),this.expect(ir.parenR),sr},gr.parseTryStatement=function(sr){if(this.next(),sr.block=this.parseBlock(),sr.handler=null,this.type===ir._catch){var br=this.startNode();this.next(),this.eat(ir.parenL)?br.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),br.param=null,this.enterScope(0)),br.body=this.parseBlock(!1),this.exitScope(),sr.handler=this.finishNode(br,"CatchClause")}return sr.finalizer=this.eat(ir._finally)?this.parseBlock():null,!sr.handler&&!sr.finalizer&&this.raise(sr.start,"Missing catch or finally clause"),this.finishNode(sr,"TryStatement")},gr.parseVarStatement=function(sr,br,Ur){return this.next(),this.parseVar(sr,!1,br,Ur),this.semicolon(),this.finishNode(sr,"VariableDeclaration")},gr.parseWhileStatement=function(sr){return this.next(),sr.test=this.parseParenExpression(),this.labels.push(Ar),sr.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(sr,"WhileStatement")},gr.parseWithStatement=function(sr){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),sr.object=this.parseParenExpression(),sr.body=this.parseStatement("with"),this.finishNode(sr,"WithStatement")},gr.parseEmptyStatement=function(sr){return this.next(),this.finishNode(sr,"EmptyStatement")},gr.parseLabeledStatement=function(sr,br,Ur,rn){for(var dn=0,Rn=this.labels;dn<Rn.length;dn+=1){var Nn=Rn[dn];Nn.name===br&&this.raise(Ur.start,"Label '"+br+"' is already declared")}for(var Zn=this.type.isLoop?"loop":this.type===ir._switch?"switch":null,rs=this.labels.length-1;rs>=0;rs--){var Ts=this.labels[rs];if(Ts.statementStart===sr.start)Ts.statementStart=this.start,Ts.kind=Zn;else break}return this.labels.push({name:br,kind:Zn,statementStart:this.start}),sr.body=this.parseStatement(rn?rn.indexOf("label")===-1?rn+"label":rn:"label"),this.labels.pop(),sr.label=Ur,this.finishNode(sr,"LabeledStatement")},gr.parseExpressionStatement=function(sr,br){return sr.expression=br,this.semicolon(),this.finishNode(sr,"ExpressionStatement")},gr.parseBlock=function(sr,br,Ur){for(sr===void 0&&(sr=!0),br===void 0&&(br=this.startNode()),br.body=[],this.expect(ir.braceL),sr&&this.enterScope(0);this.type!==ir.braceR;){var rn=this.parseStatement(null);br.body.push(rn)}return Ur&&(this.strict=!1),this.next(),sr&&this.exitScope(),this.finishNode(br,"BlockStatement")},gr.parseFor=function(sr,br){return sr.init=br,this.expect(ir.semi),sr.test=this.type===ir.semi?null:this.parseExpression(),this.expect(ir.semi),sr.update=this.type===ir.parenR?null:this.parseExpression(),this.expect(ir.parenR),sr.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(sr,"ForStatement")},gr.parseForIn=function(sr,br){var Ur=this.type===ir._in;return this.next(),br.type==="VariableDeclaration"&&br.declarations[0].init!=null&&(!Ur||this.options.ecmaVersion<8||this.strict||br.kind!=="var"||br.declarations[0].id.type!=="Identifier")&&this.raise(br.start,(Ur?"for-in":"for-of")+" loop variable declaration may not have an initializer"),sr.left=br,sr.right=Ur?this.parseExpression():this.parseMaybeAssign(),this.expect(ir.parenR),sr.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(sr,Ur?"ForInStatement":"ForOfStatement")},gr.parseVar=function(sr,br,Ur,rn){for(sr.declarations=[],sr.kind=Ur;;){var dn=this.startNode();if(this.parseVarId(dn,Ur),this.eat(ir.eq)?dn.init=this.parseMaybeAssign(br):!rn&&Ur==="const"&&!(this.type===ir._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!rn&&dn.id.type!=="Identifier"&&!(br&&(this.type===ir._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):dn.init=null,sr.declarations.push(this.finishNode(dn,"VariableDeclarator")),!this.eat(ir.comma))break}return sr},gr.parseVarId=function(sr,br){sr.id=this.parseBindingAtom(),this.checkLValPattern(sr.id,br==="var"?Tn:An,!1)};var Fr=1,Vr=2,Hr=4;gr.parseFunction=function(sr,br,Ur,rn,dn){this.initFunction(sr),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!rn)&&(this.type===ir.star&&br&Vr&&this.unexpected(),sr.generator=this.eat(ir.star)),this.options.ecmaVersion>=8&&(sr.async=!!rn),br&Fr&&(sr.id=br&Hr&&this.type!==ir.name?null:this.parseIdent(),sr.id&&!(br&Vr)&&this.checkLValSimple(sr.id,this.strict||sr.generator||sr.async?this.treatFunctionsAsVar?Tn:An:$n));var Rn=this.yieldPos,Nn=this.awaitPos,Zn=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(mn(sr.async,sr.generator)),br&Fr||(sr.id=this.type===ir.name?this.parseIdent():null),this.parseFunctionParams(sr),this.parseFunctionBody(sr,Ur,!1,dn),this.yieldPos=Rn,this.awaitPos=Nn,this.awaitIdentPos=Zn,this.finishNode(sr,br&Fr?"FunctionDeclaration":"FunctionExpression")},gr.parseFunctionParams=function(sr){this.expect(ir.parenL),sr.params=this.parseBindingList(ir.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},gr.parseClass=function(sr,br){this.next();var Ur=this.strict;this.strict=!0,this.parseClassId(sr,br),this.parseClassSuper(sr);var rn=this.enterClassBody(),dn=this.startNode(),Rn=!1;for(dn.body=[],this.expect(ir.braceL);this.type!==ir.braceR;){var Nn=this.parseClassElement(sr.superClass!==null);Nn&&(dn.body.push(Nn),Nn.type==="MethodDefinition"&&Nn.kind==="constructor"?(Rn&&this.raiseRecoverable(Nn.start,"Duplicate constructor in the same class"),Rn=!0):Nn.key&&Nn.key.type==="PrivateIdentifier"&&$r(rn,Nn)&&this.raiseRecoverable(Nn.key.start,"Identifier '#"+Nn.key.name+"' has already been declared"))}return this.strict=Ur,this.next(),sr.body=this.finishNode(dn,"ClassBody"),this.exitClassBody(),this.finishNode(sr,br?"ClassDeclaration":"ClassExpression")},gr.parseClassElement=function(sr){if(this.eat(ir.semi))return null;var br=this.options.ecmaVersion,Ur=this.startNode(),rn="",dn=!1,Rn=!1,Nn="method",Zn=!1;if(this.eatContextual("static")){if(br>=13&&this.eat(ir.braceL))return this.parseClassStaticBlock(Ur),Ur;this.isClassElementNameStart()||this.type===ir.star?Zn=!0:rn="static"}if(Ur.static=Zn,!rn&&br>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===ir.star)&&!this.canInsertSemicolon()?Rn=!0:rn="async"),!rn&&(br>=9||!Rn)&&this.eat(ir.star)&&(dn=!0),!rn&&!Rn&&!dn){var rs=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Nn=rs:rn=rs)}if(rn?(Ur.computed=!1,Ur.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),Ur.key.name=rn,this.finishNode(Ur.key,"Identifier")):this.parseClassElementName(Ur),br<13||this.type===ir.parenL||Nn!=="method"||dn||Rn){var Ts=!Ur.static&&Br(Ur,"constructor"),As=Ts&&sr;Ts&&Nn!=="method"&&this.raise(Ur.key.start,"Constructor can't have get/set modifier"),Ur.kind=Ts?"constructor":Nn,this.parseClassMethod(Ur,dn,Rn,As)}else this.parseClassField(Ur);return Ur},gr.isClassElementNameStart=function(){return this.type===ir.name||this.type===ir.privateId||this.type===ir.num||this.type===ir.string||this.type===ir.bracketL||this.type.keyword},gr.parseClassElementName=function(sr){this.type===ir.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),sr.computed=!1,sr.key=this.parsePrivateIdent()):this.parsePropertyName(sr)},gr.parseClassMethod=function(sr,br,Ur,rn){var dn=sr.key;sr.kind==="constructor"?(br&&this.raise(dn.start,"Constructor can't be a generator"),Ur&&this.raise(dn.start,"Constructor can't be an async method")):sr.static&&Br(sr,"prototype")&&this.raise(dn.start,"Classes may not have a static property named prototype");var Rn=sr.value=this.parseMethod(br,Ur,rn);return sr.kind==="get"&&Rn.params.length!==0&&this.raiseRecoverable(Rn.start,"getter should have no params"),sr.kind==="set"&&Rn.params.length!==1&&this.raiseRecoverable(Rn.start,"setter should have exactly one param"),sr.kind==="set"&&Rn.params[0].type==="RestElement"&&this.raiseRecoverable(Rn.params[0].start,"Setter cannot use rest params"),this.finishNode(sr,"MethodDefinition")},gr.parseClassField=function(sr){if(Br(sr,"constructor")?this.raise(sr.key.start,"Classes can't have a field named 'constructor'"):sr.static&&Br(sr,"prototype")&&this.raise(sr.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ir.eq)){var br=this.currentThisScope(),Ur=br.inClassFieldInit;br.inClassFieldInit=!0,sr.value=this.parseMaybeAssign(),br.inClassFieldInit=Ur}else sr.value=null;return this.semicolon(),this.finishNode(sr,"PropertyDefinition")},gr.parseClassStaticBlock=function(sr){sr.body=[];var br=this.labels;for(this.labels=[],this.enterScope(Es|ns);this.type!==ir.braceR;){var Ur=this.parseStatement(null);sr.body.push(Ur)}return this.next(),this.exitScope(),this.labels=br,this.finishNode(sr,"StaticBlock")},gr.parseClassId=function(sr,br){this.type===ir.name?(sr.id=this.parseIdent(),br&&this.checkLValSimple(sr.id,An,!1)):(br===!0&&this.unexpected(),sr.id=null)},gr.parseClassSuper=function(sr){sr.superClass=this.eat(ir._extends)?this.parseExprSubscripts(null,!1):null},gr.enterClassBody=function(){var sr={declared:Object.create(null),used:[]};return this.privateNameStack.push(sr),sr.declared},gr.exitClassBody=function(){var sr=this.privateNameStack.pop(),br=sr.declared,Ur=sr.used;if(this.options.checkPrivateFields)for(var rn=this.privateNameStack.length,dn=rn===0?null:this.privateNameStack[rn-1],Rn=0;Rn<Ur.length;++Rn){var Nn=Ur[Rn];hr(br,Nn.name)||(dn?dn.used.push(Nn):this.raiseRecoverable(Nn.start,"Private field '#"+Nn.name+"' must be declared in an enclosing class"))}};function $r(sr,br){var Ur=br.key.name,rn=sr[Ur],dn="true";return br.type==="MethodDefinition"&&(br.kind==="get"||br.kind==="set")&&(dn=(br.static?"s":"i")+br.kind),rn==="iget"&&dn==="iset"||rn==="iset"&&dn==="iget"||rn==="sget"&&dn==="sset"||rn==="sset"&&dn==="sget"?(sr[Ur]="true",!1):rn?!0:(sr[Ur]=dn,!1)}function Br(sr,br){var Ur=sr.computed,rn=sr.key;return!Ur&&(rn.type==="Identifier"&&rn.name===br||rn.type==="Literal"&&rn.value===br)}gr.parseExportAllDeclaration=function(sr,br){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(sr.exported=this.parseModuleExportName(),this.checkExport(br,sr.exported,this.lastTokStart)):sr.exported=null),this.expectContextual("from"),this.type!==ir.string&&this.unexpected(),sr.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(sr.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(sr,"ExportAllDeclaration")},gr.parseExport=function(sr,br){if(this.next(),this.eat(ir.star))return this.parseExportAllDeclaration(sr,br);if(this.eat(ir._default))return this.checkExport(br,"default",this.lastTokStart),sr.declaration=this.parseExportDefaultDeclaration(),this.finishNode(sr,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())sr.declaration=this.parseExportDeclaration(sr),sr.declaration.type==="VariableDeclaration"?this.checkVariableExport(br,sr.declaration.declarations):this.checkExport(br,sr.declaration.id,sr.declaration.id.start),sr.specifiers=[],sr.source=null;else{if(sr.declaration=null,sr.specifiers=this.parseExportSpecifiers(br),this.eatContextual("from"))this.type!==ir.string&&this.unexpected(),sr.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(sr.attributes=this.parseWithClause());else{for(var Ur=0,rn=sr.specifiers;Ur<rn.length;Ur+=1){var dn=rn[Ur];this.checkUnreserved(dn.local),this.checkLocalExport(dn.local),dn.local.type==="Literal"&&this.raise(dn.local.start,"A string literal cannot be used as an exported binding without `from`.")}sr.source=null}this.semicolon()}return this.finishNode(sr,"ExportNamedDeclaration")},gr.parseExportDeclaration=function(sr){return this.parseStatement(null)},gr.parseExportDefaultDeclaration=function(){var sr;if(this.type===ir._function||(sr=this.isAsyncFunction())){var br=this.startNode();return this.next(),sr&&this.next(),this.parseFunction(br,Fr|Hr,!1,sr)}else if(this.type===ir._class){var Ur=this.startNode();return this.parseClass(Ur,"nullableID")}else{var rn=this.parseMaybeAssign();return this.semicolon(),rn}},gr.checkExport=function(sr,br,Ur){sr&&(typeof br!="string"&&(br=br.type==="Identifier"?br.name:br.value),hr(sr,br)&&this.raiseRecoverable(Ur,"Duplicate export '"+br+"'"),sr[br]=!0)},gr.checkPatternExport=function(sr,br){var Ur=br.type;if(Ur==="Identifier")this.checkExport(sr,br,br.start);else if(Ur==="ObjectPattern")for(var rn=0,dn=br.properties;rn<dn.length;rn+=1){var Rn=dn[rn];this.checkPatternExport(sr,Rn)}else if(Ur==="ArrayPattern")for(var Nn=0,Zn=br.elements;Nn<Zn.length;Nn+=1){var rs=Zn[Nn];rs&&this.checkPatternExport(sr,rs)}else Ur==="Property"?this.checkPatternExport(sr,br.value):Ur==="AssignmentPattern"?this.checkPatternExport(sr,br.left):Ur==="RestElement"&&this.checkPatternExport(sr,br.argument)},gr.checkVariableExport=function(sr,br){if(sr)for(var Ur=0,rn=br;Ur<rn.length;Ur+=1){var dn=rn[Ur];this.checkPatternExport(sr,dn.id)}},gr.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},gr.parseExportSpecifier=function(sr){var br=this.startNode();return br.local=this.parseModuleExportName(),br.exported=this.eatContextual("as")?this.parseModuleExportName():br.local,this.checkExport(sr,br.exported,br.exported.start),this.finishNode(br,"ExportSpecifier")},gr.parseExportSpecifiers=function(sr){var br=[],Ur=!0;for(this.expect(ir.braceL);!this.eat(ir.braceR);){if(Ur)Ur=!1;else if(this.expect(ir.comma),this.afterTrailingComma(ir.braceR))break;br.push(this.parseExportSpecifier(sr))}return br},gr.parseImport=function(sr){return this.next(),this.type===ir.string?(sr.specifiers=Nr,sr.source=this.parseExprAtom()):(sr.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),sr.source=this.type===ir.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(sr.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(sr,"ImportDeclaration")},gr.parseImportSpecifier=function(){var sr=this.startNode();return sr.imported=this.parseModuleExportName(),this.eatContextual("as")?sr.local=this.parseIdent():(this.checkUnreserved(sr.imported),sr.local=sr.imported),this.checkLValSimple(sr.local,An),this.finishNode(sr,"ImportSpecifier")},gr.parseImportDefaultSpecifier=function(){var sr=this.startNode();return sr.local=this.parseIdent(),this.checkLValSimple(sr.local,An),this.finishNode(sr,"ImportDefaultSpecifier")},gr.parseImportNamespaceSpecifier=function(){var sr=this.startNode();return this.next(),this.expectContextual("as"),sr.local=this.parseIdent(),this.checkLValSimple(sr.local,An),this.finishNode(sr,"ImportNamespaceSpecifier")},gr.parseImportSpecifiers=function(){var sr=[],br=!0;if(this.type===ir.name&&(sr.push(this.parseImportDefaultSpecifier()),!this.eat(ir.comma)))return sr;if(this.type===ir.star)return sr.push(this.parseImportNamespaceSpecifier()),sr;for(this.expect(ir.braceL);!this.eat(ir.braceR);){if(br)br=!1;else if(this.expect(ir.comma),this.afterTrailingComma(ir.braceR))break;sr.push(this.parseImportSpecifier())}return sr},gr.parseWithClause=function(){var sr=[];if(!this.eat(ir._with))return sr;this.expect(ir.braceL);for(var br={},Ur=!0;!this.eat(ir.braceR);){if(Ur)Ur=!1;else if(this.expect(ir.comma),this.afterTrailingComma(ir.braceR))break;var rn=this.parseImportAttribute(),dn=rn.key.type==="Identifier"?rn.key.name:rn.key.value;hr(br,dn)&&this.raiseRecoverable(rn.key.start,"Duplicate attribute key '"+dn+"'"),br[dn]=!0,sr.push(rn)}return sr},gr.parseImportAttribute=function(){var sr=this.startNode();return sr.key=this.type===ir.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(ir.colon),this.type!==ir.string&&this.unexpected(),sr.value=this.parseExprAtom(),this.finishNode(sr,"ImportAttribute")},gr.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ir.string){var sr=this.parseLiteral(this.value);return Cr.test(sr.value)&&this.raise(sr.start,"An export name cannot include a lone surrogate."),sr}return this.parseIdent(!0)},gr.adaptDirectivePrologue=function(sr){for(var br=0;br<sr.length&&this.isDirectiveCandidate(sr[br]);++br)sr[br].directive=sr[br].expression.raw.slice(1,-1)},gr.isDirectiveCandidate=function(sr){return this.options.ecmaVersion>=5&&sr.type==="ExpressionStatement"&&sr.expression.type==="Literal"&&typeof sr.expression.value=="string"&&(this.input[sr.start]==='"'||this.input[sr.start]==="'")};var en=$t.prototype;en.toAssignable=function(sr,br,Ur){if(this.options.ecmaVersion>=6&&sr)switch(sr.type){case"Identifier":this.inAsync&&sr.name==="await"&&this.raise(sr.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":sr.type="ObjectPattern",Ur&&this.checkPatternErrors(Ur,!0);for(var rn=0,dn=sr.properties;rn<dn.length;rn+=1){var Rn=dn[rn];this.toAssignable(Rn,br),Rn.type==="RestElement"&&(Rn.argument.type==="ArrayPattern"||Rn.argument.type==="ObjectPattern")&&this.raise(Rn.argument.start,"Unexpected token")}break;case"Property":sr.kind!=="init"&&this.raise(sr.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(sr.value,br);break;case"ArrayExpression":sr.type="ArrayPattern",Ur&&this.checkPatternErrors(Ur,!0),this.toAssignableList(sr.elements,br);break;case"SpreadElement":sr.type="RestElement",this.toAssignable(sr.argument,br),sr.argument.type==="AssignmentPattern"&&this.raise(sr.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":sr.operator!=="="&&this.raise(sr.left.end,"Only '=' operator can be used for specifying default value."),sr.type="AssignmentPattern",delete sr.operator,this.toAssignable(sr.left,br);break;case"ParenthesizedExpression":this.toAssignable(sr.expression,br,Ur);break;case"ChainExpression":this.raiseRecoverable(sr.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!br)break;default:this.raise(sr.start,"Assigning to rvalue")}else Ur&&this.checkPatternErrors(Ur,!0);return sr},en.toAssignableList=function(sr,br){for(var Ur=sr.length,rn=0;rn<Ur;rn++){var dn=sr[rn];dn&&this.toAssignable(dn,br)}if(Ur){var Rn=sr[Ur-1];this.options.ecmaVersion===6&&br&&Rn&&Rn.type==="RestElement"&&Rn.argument.type!=="Identifier"&&this.unexpected(Rn.argument.start)}return sr},en.parseSpread=function(sr){var br=this.startNode();return this.next(),br.argument=this.parseMaybeAssign(!1,sr),this.finishNode(br,"SpreadElement")},en.parseRestBinding=function(){var sr=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==ir.name&&this.unexpected(),sr.argument=this.parseBindingAtom(),this.finishNode(sr,"RestElement")},en.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ir.bracketL:var sr=this.startNode();return this.next(),sr.elements=this.parseBindingList(ir.bracketR,!0,!0),this.finishNode(sr,"ArrayPattern");case ir.braceL:return this.parseObj(!0)}return this.parseIdent()},en.parseBindingList=function(sr,br,Ur,rn){for(var dn=[],Rn=!0;!this.eat(sr);)if(Rn?Rn=!1:this.expect(ir.comma),br&&this.type===ir.comma)dn.push(null);else{if(Ur&&this.afterTrailingComma(sr))break;if(this.type===ir.ellipsis){var Nn=this.parseRestBinding();this.parseBindingListItem(Nn),dn.push(Nn),this.type===ir.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(sr);break}else dn.push(this.parseAssignableListItem(rn))}return dn},en.parseAssignableListItem=function(sr){var br=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(br),br},en.parseBindingListItem=function(sr){return sr},en.parseMaybeDefault=function(sr,br,Ur){if(Ur=Ur||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ir.eq))return Ur;var rn=this.startNodeAt(sr,br);return rn.left=Ur,rn.right=this.parseMaybeAssign(),this.finishNode(rn,"AssignmentPattern")},en.checkLValSimple=function(sr,br,Ur){br===void 0&&(br=Dn);var rn=br!==Dn;switch(sr.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(sr.name)&&this.raiseRecoverable(sr.start,(rn?"Binding ":"Assigning to ")+sr.name+" in strict mode"),rn&&(br===An&&sr.name==="let"&&this.raiseRecoverable(sr.start,"let is disallowed as a lexically bound name"),Ur&&(hr(Ur,sr.name)&&this.raiseRecoverable(sr.start,"Argument name clash"),Ur[sr.name]=!0),br!==Bn&&this.declareName(sr.name,br,sr.start));break;case"ChainExpression":this.raiseRecoverable(sr.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":rn&&this.raiseRecoverable(sr.start,"Binding member expression");break;case"ParenthesizedExpression":return rn&&this.raiseRecoverable(sr.start,"Binding parenthesized expression"),this.checkLValSimple(sr.expression,br,Ur);default:this.raise(sr.start,(rn?"Binding":"Assigning to")+" rvalue")}},en.checkLValPattern=function(sr,br,Ur){switch(br===void 0&&(br=Dn),sr.type){case"ObjectPattern":for(var rn=0,dn=sr.properties;rn<dn.length;rn+=1){var Rn=dn[rn];this.checkLValInnerPattern(Rn,br,Ur)}break;case"ArrayPattern":for(var Nn=0,Zn=sr.elements;Nn<Zn.length;Nn+=1){var rs=Zn[Nn];rs&&this.checkLValInnerPattern(rs,br,Ur)}break;default:this.checkLValSimple(sr,br,Ur)}},en.checkLValInnerPattern=function(sr,br,Ur){switch(br===void 0&&(br=Dn),sr.type){case"Property":this.checkLValInnerPattern(sr.value,br,Ur);break;case"AssignmentPattern":this.checkLValPattern(sr.left,br,Ur);break;case"RestElement":this.checkLValPattern(sr.argument,br,Ur);break;default:this.checkLValPattern(sr,br,Ur)}};var Kr=function(br,Ur,rn,dn,Rn){this.token=br,this.isExpr=!!Ur,this.preserveSpace=!!rn,this.override=dn,this.generator=!!Rn},Yr={b_stat:new Kr("{",!1),b_expr:new Kr("{",!0),b_tmpl:new Kr("${",!1),p_stat:new Kr("(",!1),p_expr:new Kr("(",!0),q_tmpl:new Kr("`",!0,!0,function(sr){return sr.tryReadTemplateToken()}),f_stat:new Kr("function",!1),f_expr:new Kr("function",!0),f_expr_gen:new Kr("function",!0,!1,null,!0),f_gen:new Kr("function",!1,!1,null,!0)},zr=$t.prototype;zr.initialContext=function(){return[Yr.b_stat]},zr.curContext=function(){return this.context[this.context.length-1]},zr.braceIsBlock=function(sr){var br=this.curContext();return br===Yr.f_expr||br===Yr.f_stat?!0:sr===ir.colon&&(br===Yr.b_stat||br===Yr.b_expr)?!br.isExpr:sr===ir._return||sr===ir.name&&this.exprAllowed?lr.test(this.input.slice(this.lastTokEnd,this.start)):sr===ir._else||sr===ir.semi||sr===ir.eof||sr===ir.parenR||sr===ir.arrow?!0:sr===ir.braceL?br===Yr.b_stat:sr===ir._var||sr===ir._const||sr===ir.name?!1:!this.exprAllowed},zr.inGeneratorContext=function(){for(var sr=this.context.length-1;sr>=1;sr--){var br=this.context[sr];if(br.token==="function")return br.generator}return!1},zr.updateContext=function(sr){var br,Ur=this.type;Ur.keyword&&sr===ir.dot?this.exprAllowed=!1:(br=Ur.updateContext)?br.call(this,sr):this.exprAllowed=Ur.beforeExpr},zr.overrideContext=function(sr){this.curContext()!==sr&&(this.context[this.context.length-1]=sr)},ir.parenR.updateContext=ir.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var sr=this.context.pop();sr===Yr.b_stat&&this.curContext().token==="function"&&(sr=this.context.pop()),this.exprAllowed=!sr.isExpr},ir.braceL.updateContext=function(sr){this.context.push(this.braceIsBlock(sr)?Yr.b_stat:Yr.b_expr),this.exprAllowed=!0},ir.dollarBraceL.updateContext=function(){this.context.push(Yr.b_tmpl),this.exprAllowed=!0},ir.parenL.updateContext=function(sr){var br=sr===ir._if||sr===ir._for||sr===ir._with||sr===ir._while;this.context.push(br?Yr.p_stat:Yr.p_expr),this.exprAllowed=!0},ir.incDec.updateContext=function(){},ir._function.updateContext=ir._class.updateContext=function(sr){sr.beforeExpr&&sr!==ir._else&&!(sr===ir.semi&&this.curContext()!==Yr.p_stat)&&!(sr===ir._return&&lr.test(this.input.slice(this.lastTokEnd,this.start)))&&!((sr===ir.colon||sr===ir.braceL)&&this.curContext()===Yr.b_stat)?this.context.push(Yr.f_expr):this.context.push(Yr.f_stat),this.exprAllowed=!1},ir.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},ir.backQuote.updateContext=function(){this.curContext()===Yr.q_tmpl?this.context.pop():this.context.push(Yr.q_tmpl),this.exprAllowed=!1},ir.star.updateContext=function(sr){if(sr===ir._function){var br=this.context.length-1;this.context[br]===Yr.f_expr?this.context[br]=Yr.f_expr_gen:this.context[br]=Yr.f_gen}this.exprAllowed=!0},ir.name.updateContext=function(sr){var br=!1;this.options.ecmaVersion>=6&&sr!==ir.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(br=!0),this.exprAllowed=br};var Wr=$t.prototype;Wr.checkPropClash=function(sr,br,Ur){if(!(this.options.ecmaVersion>=9&&sr.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(sr.computed||sr.method||sr.shorthand))){var rn=sr.key,dn;switch(rn.type){case"Identifier":dn=rn.name;break;case"Literal":dn=String(rn.value);break;default:return}var Rn=sr.kind;if(this.options.ecmaVersion>=6){dn==="__proto__"&&Rn==="init"&&(br.proto&&(Ur?Ur.doubleProto<0&&(Ur.doubleProto=rn.start):this.raiseRecoverable(rn.start,"Redefinition of __proto__ property")),br.proto=!0);return}dn="$"+dn;var Nn=br[dn];if(Nn){var Zn;Rn==="init"?Zn=this.strict&&Nn.init||Nn.get||Nn.set:Zn=Nn.init||Nn[Rn],Zn&&this.raiseRecoverable(rn.start,"Redefinition of property")}else Nn=br[dn]={init:!1,get:!1,set:!1};Nn[Rn]=!0}},Wr.parseExpression=function(sr,br){var Ur=this.start,rn=this.startLoc,dn=this.parseMaybeAssign(sr,br);if(this.type===ir.comma){var Rn=this.startNodeAt(Ur,rn);for(Rn.expressions=[dn];this.eat(ir.comma);)Rn.expressions.push(this.parseMaybeAssign(sr,br));return this.finishNode(Rn,"SequenceExpression")}return dn},Wr.parseMaybeAssign=function(sr,br,Ur){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(sr);this.exprAllowed=!1}var rn=!1,dn=-1,Rn=-1,Nn=-1;br?(dn=br.parenthesizedAssign,Rn=br.trailingComma,Nn=br.doubleProto,br.parenthesizedAssign=br.trailingComma=-1):(br=new dr,rn=!0);var Zn=this.start,rs=this.startLoc;(this.type===ir.parenL||this.type===ir.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=sr==="await");var Ts=this.parseMaybeConditional(sr,br);if(Ur&&(Ts=Ur.call(this,Ts,Zn,rs)),this.type.isAssign){var As=this.startNodeAt(Zn,rs);return As.operator=this.value,this.type===ir.eq&&(Ts=this.toAssignable(Ts,!1,br)),rn||(br.parenthesizedAssign=br.trailingComma=br.doubleProto=-1),br.shorthandAssign>=Ts.start&&(br.shorthandAssign=-1),this.type===ir.eq?this.checkLValPattern(Ts):this.checkLValSimple(Ts),As.left=Ts,this.next(),As.right=this.parseMaybeAssign(sr),Nn>-1&&(br.doubleProto=Nn),this.finishNode(As,"AssignmentExpression")}else rn&&this.checkExpressionErrors(br,!0);return dn>-1&&(br.parenthesizedAssign=dn),Rn>-1&&(br.trailingComma=Rn),Ts},Wr.parseMaybeConditional=function(sr,br){var Ur=this.start,rn=this.startLoc,dn=this.parseExprOps(sr,br);if(this.checkExpressionErrors(br))return dn;if(this.eat(ir.question)){var Rn=this.startNodeAt(Ur,rn);return Rn.test=dn,Rn.consequent=this.parseMaybeAssign(),this.expect(ir.colon),Rn.alternate=this.parseMaybeAssign(sr),this.finishNode(Rn,"ConditionalExpression")}return dn},Wr.parseExprOps=function(sr,br){var Ur=this.start,rn=this.startLoc,dn=this.parseMaybeUnary(br,!1,!1,sr);return this.checkExpressionErrors(br)||dn.start===Ur&&dn.type==="ArrowFunctionExpression"?dn:this.parseExprOp(dn,Ur,rn,-1,sr)},Wr.parseExprOp=function(sr,br,Ur,rn,dn){var Rn=this.type.binop;if(Rn!=null&&(!dn||this.type!==ir._in)&&Rn>rn){var Nn=this.type===ir.logicalOR||this.type===ir.logicalAND,Zn=this.type===ir.coalesce;Zn&&(Rn=ir.logicalAND.binop);var rs=this.value;this.next();var Ts=this.start,As=this.startLoc,co=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,dn),Ts,As,Rn,dn),$o=this.buildBinary(br,Ur,sr,co,rs,Nn||Zn);return(Nn&&this.type===ir.coalesce||Zn&&(this.type===ir.logicalOR||this.type===ir.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp($o,br,Ur,rn,dn)}return sr},Wr.buildBinary=function(sr,br,Ur,rn,dn,Rn){rn.type==="PrivateIdentifier"&&this.raise(rn.start,"Private identifier can only be left side of binary expression");var Nn=this.startNodeAt(sr,br);return Nn.left=Ur,Nn.operator=dn,Nn.right=rn,this.finishNode(Nn,Rn?"LogicalExpression":"BinaryExpression")},Wr.parseMaybeUnary=function(sr,br,Ur,rn){var dn=this.start,Rn=this.startLoc,Nn;if(this.isContextual("await")&&this.canAwait)Nn=this.parseAwait(rn),br=!0;else if(this.type.prefix){var Zn=this.startNode(),rs=this.type===ir.incDec;Zn.operator=this.value,Zn.prefix=!0,this.next(),Zn.argument=this.parseMaybeUnary(null,!0,rs,rn),this.checkExpressionErrors(sr,!0),rs?this.checkLValSimple(Zn.argument):this.strict&&Zn.operator==="delete"&&jr(Zn.argument)?this.raiseRecoverable(Zn.start,"Deleting local variable in strict mode"):Zn.operator==="delete"&&Xr(Zn.argument)?this.raiseRecoverable(Zn.start,"Private fields can not be deleted"):br=!0,Nn=this.finishNode(Zn,rs?"UpdateExpression":"UnaryExpression")}else if(!br&&this.type===ir.privateId)(rn||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Nn=this.parsePrivateIdent(),this.type!==ir._in&&this.unexpected();else{if(Nn=this.parseExprSubscripts(sr,rn),this.checkExpressionErrors(sr))return Nn;for(;this.type.postfix&&!this.canInsertSemicolon();){var Ts=this.startNodeAt(dn,Rn);Ts.operator=this.value,Ts.prefix=!1,Ts.argument=Nn,this.checkLValSimple(Nn),this.next(),Nn=this.finishNode(Ts,"UpdateExpression")}}if(!Ur&&this.eat(ir.starstar))if(br)this.unexpected(this.lastTokStart);else return this.buildBinary(dn,Rn,Nn,this.parseMaybeUnary(null,!1,!1,rn),"**",!1);else return Nn};function jr(sr){return sr.type==="Identifier"||sr.type==="ParenthesizedExpression"&&jr(sr.expression)}function Xr(sr){return sr.type==="MemberExpression"&&sr.property.type==="PrivateIdentifier"||sr.type==="ChainExpression"&&Xr(sr.expression)||sr.type==="ParenthesizedExpression"&&Xr(sr.expression)}Wr.parseExprSubscripts=function(sr,br){var Ur=this.start,rn=this.startLoc,dn=this.parseExprAtom(sr,br);if(dn.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return dn;var Rn=this.parseSubscripts(dn,Ur,rn,!1,br);return sr&&Rn.type==="MemberExpression"&&(sr.parenthesizedAssign>=Rn.start&&(sr.parenthesizedAssign=-1),sr.parenthesizedBind>=Rn.start&&(sr.parenthesizedBind=-1),sr.trailingComma>=Rn.start&&(sr.trailingComma=-1)),Rn},Wr.parseSubscripts=function(sr,br,Ur,rn,dn){for(var Rn=this.options.ecmaVersion>=8&&sr.type==="Identifier"&&sr.name==="async"&&this.lastTokEnd===sr.end&&!this.canInsertSemicolon()&&sr.end-sr.start===5&&this.potentialArrowAt===sr.start,Nn=!1;;){var Zn=this.parseSubscript(sr,br,Ur,rn,Rn,Nn,dn);if(Zn.optional&&(Nn=!0),Zn===sr||Zn.type==="ArrowFunctionExpression"){if(Nn){var rs=this.startNodeAt(br,Ur);rs.expression=Zn,Zn=this.finishNode(rs,"ChainExpression")}return Zn}sr=Zn}},Wr.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(ir.arrow)},Wr.parseSubscriptAsyncArrow=function(sr,br,Ur,rn){return this.parseArrowExpression(this.startNodeAt(sr,br),Ur,!0,rn)},Wr.parseSubscript=function(sr,br,Ur,rn,dn,Rn,Nn){var Zn=this.options.ecmaVersion>=11,rs=Zn&&this.eat(ir.questionDot);rn&&rs&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Ts=this.eat(ir.bracketL);if(Ts||rs&&this.type!==ir.parenL&&this.type!==ir.backQuote||this.eat(ir.dot)){var As=this.startNodeAt(br,Ur);As.object=sr,Ts?(As.property=this.parseExpression(),this.expect(ir.bracketR)):this.type===ir.privateId&&sr.type!=="Super"?As.property=this.parsePrivateIdent():As.property=this.parseIdent(this.options.allowReserved!=="never"),As.computed=!!Ts,Zn&&(As.optional=rs),sr=this.finishNode(As,"MemberExpression")}else if(!rn&&this.eat(ir.parenL)){var co=new dr,$o=this.yieldPos,Pm=this.awaitPos,qp=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Ho=this.parseExprList(ir.parenR,this.options.ecmaVersion>=8,!1,co);if(dn&&!rs&&this.shouldParseAsyncArrow())return this.checkPatternErrors(co,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=$o,this.awaitPos=Pm,this.awaitIdentPos=qp,this.parseSubscriptAsyncArrow(br,Ur,Ho,Nn);this.checkExpressionErrors(co,!0),this.yieldPos=$o||this.yieldPos,this.awaitPos=Pm||this.awaitPos,this.awaitIdentPos=qp||this.awaitIdentPos;var Ro=this.startNodeAt(br,Ur);Ro.callee=sr,Ro.arguments=Ho,Zn&&(Ro.optional=rs),sr=this.finishNode(Ro,"CallExpression")}else if(this.type===ir.backQuote){(rs||Rn)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Mu=this.startNodeAt(br,Ur);Mu.tag=sr,Mu.quasi=this.parseTemplate({isTagged:!0}),sr=this.finishNode(Mu,"TaggedTemplateExpression")}return sr},Wr.parseExprAtom=function(sr,br,Ur){this.type===ir.slash&&this.readRegexp();var rn,dn=this.potentialArrowAt===this.start;switch(this.type){case ir._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),rn=this.startNode(),this.next(),this.type===ir.parenL&&!this.allowDirectSuper&&this.raise(rn.start,"super() call outside constructor of a subclass"),this.type!==ir.dot&&this.type!==ir.bracketL&&this.type!==ir.parenL&&this.unexpected(),this.finishNode(rn,"Super");case ir._this:return rn=this.startNode(),this.next(),this.finishNode(rn,"ThisExpression");case ir.name:var Rn=this.start,Nn=this.startLoc,Zn=this.containsEsc,rs=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Zn&&rs.name==="async"&&!this.canInsertSemicolon()&&this.eat(ir._function))return this.overrideContext(Yr.f_expr),this.parseFunction(this.startNodeAt(Rn,Nn),0,!1,!0,br);if(dn&&!this.canInsertSemicolon()){if(this.eat(ir.arrow))return this.parseArrowExpression(this.startNodeAt(Rn,Nn),[rs],!1,br);if(this.options.ecmaVersion>=8&&rs.name==="async"&&this.type===ir.name&&!Zn&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return rs=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(ir.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(Rn,Nn),[rs],!0,br)}return rs;case ir.regexp:var Ts=this.value;return rn=this.parseLiteral(Ts.value),rn.regex={pattern:Ts.pattern,flags:Ts.flags},rn;case ir.num:case ir.string:return this.parseLiteral(this.value);case ir._null:case ir._true:case ir._false:return rn=this.startNode(),rn.value=this.type===ir._null?null:this.type===ir._true,rn.raw=this.type.keyword,this.next(),this.finishNode(rn,"Literal");case ir.parenL:var As=this.start,co=this.parseParenAndDistinguishExpression(dn,br);return sr&&(sr.parenthesizedAssign<0&&!this.isSimpleAssignTarget(co)&&(sr.parenthesizedAssign=As),sr.parenthesizedBind<0&&(sr.parenthesizedBind=As)),co;case ir.bracketL:return rn=this.startNode(),this.next(),rn.elements=this.parseExprList(ir.bracketR,!0,!0,sr),this.finishNode(rn,"ArrayExpression");case ir.braceL:return this.overrideContext(Yr.b_expr),this.parseObj(!1,sr);case ir._function:return rn=this.startNode(),this.next(),this.parseFunction(rn,0);case ir._class:return this.parseClass(this.startNode(),!1);case ir._new:return this.parseNew();case ir.backQuote:return this.parseTemplate();case ir._import:return this.options.ecmaVersion>=11?this.parseExprImport(Ur):this.unexpected();default:return this.parseExprAtomDefault()}},Wr.parseExprAtomDefault=function(){this.unexpected()},Wr.parseExprImport=function(sr){var br=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===ir.parenL&&!sr)return this.parseDynamicImport(br);if(this.type===ir.dot){var Ur=this.startNodeAt(br.start,br.loc&&br.loc.start);return Ur.name="import",br.meta=this.finishNode(Ur,"Identifier"),this.parseImportMeta(br)}else this.unexpected()},Wr.parseDynamicImport=function(sr){if(this.next(),sr.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(ir.parenR)?sr.options=null:(this.expect(ir.comma),this.afterTrailingComma(ir.parenR)?sr.options=null:(sr.options=this.parseMaybeAssign(),this.eat(ir.parenR)||(this.expect(ir.comma),this.afterTrailingComma(ir.parenR)||this.unexpected())));else if(!this.eat(ir.parenR)){var br=this.start;this.eat(ir.comma)&&this.eat(ir.parenR)?this.raiseRecoverable(br,"Trailing comma is not allowed in import()"):this.unexpected(br)}return this.finishNode(sr,"ImportExpression")},Wr.parseImportMeta=function(sr){this.next();var br=this.containsEsc;return sr.property=this.parseIdent(!0),sr.property.name!=="meta"&&this.raiseRecoverable(sr.property.start,"The only valid meta property for import is 'import.meta'"),br&&this.raiseRecoverable(sr.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(sr.start,"Cannot use 'import.meta' outside a module"),this.finishNode(sr,"MetaProperty")},Wr.parseLiteral=function(sr){var br=this.startNode();return br.value=sr,br.raw=this.input.slice(this.start,this.end),br.raw.charCodeAt(br.raw.length-1)===110&&(br.bigint=br.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(br,"Literal")},Wr.parseParenExpression=function(){this.expect(ir.parenL);var sr=this.parseExpression();return this.expect(ir.parenR),sr},Wr.shouldParseArrow=function(sr){return!this.canInsertSemicolon()},Wr.parseParenAndDistinguishExpression=function(sr,br){var Ur=this.start,rn=this.startLoc,dn,Rn=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Nn=this.start,Zn=this.startLoc,rs=[],Ts=!0,As=!1,co=new dr,$o=this.yieldPos,Pm=this.awaitPos,qp;for(this.yieldPos=0,this.awaitPos=0;this.type!==ir.parenR;)if(Ts?Ts=!1:this.expect(ir.comma),Rn&&this.afterTrailingComma(ir.parenR,!0)){As=!0;break}else if(this.type===ir.ellipsis){qp=this.start,rs.push(this.parseParenItem(this.parseRestBinding())),this.type===ir.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else rs.push(this.parseMaybeAssign(!1,co,this.parseParenItem));var Ho=this.lastTokEnd,Ro=this.lastTokEndLoc;if(this.expect(ir.parenR),sr&&this.shouldParseArrow(rs)&&this.eat(ir.arrow))return this.checkPatternErrors(co,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=$o,this.awaitPos=Pm,this.parseParenArrowList(Ur,rn,rs,br);(!rs.length||As)&&this.unexpected(this.lastTokStart),qp&&this.unexpected(qp),this.checkExpressionErrors(co,!0),this.yieldPos=$o||this.yieldPos,this.awaitPos=Pm||this.awaitPos,rs.length>1?(dn=this.startNodeAt(Nn,Zn),dn.expressions=rs,this.finishNodeAt(dn,"SequenceExpression",Ho,Ro)):dn=rs[0]}else dn=this.parseParenExpression();if(this.options.preserveParens){var Mu=this.startNodeAt(Ur,rn);return Mu.expression=dn,this.finishNode(Mu,"ParenthesizedExpression")}else return dn},Wr.parseParenItem=function(sr){return sr},Wr.parseParenArrowList=function(sr,br,Ur,rn){return this.parseArrowExpression(this.startNodeAt(sr,br),Ur,!1,rn)};var Jr=[];Wr.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var sr=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===ir.dot){var br=this.startNodeAt(sr.start,sr.loc&&sr.loc.start);br.name="new",sr.meta=this.finishNode(br,"Identifier"),this.next();var Ur=this.containsEsc;return sr.property=this.parseIdent(!0),sr.property.name!=="target"&&this.raiseRecoverable(sr.property.start,"The only valid meta property for new is 'new.target'"),Ur&&this.raiseRecoverable(sr.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(sr.start,"'new.target' can only be used in functions and class static block"),this.finishNode(sr,"MetaProperty")}var rn=this.start,dn=this.startLoc;return sr.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),rn,dn,!0,!1),this.eat(ir.parenL)?sr.arguments=this.parseExprList(ir.parenR,this.options.ecmaVersion>=8,!1):sr.arguments=Jr,this.finishNode(sr,"NewExpression")},Wr.parseTemplateElement=function(sr){var br=sr.isTagged,Ur=this.startNode();return this.type===ir.invalidTemplate?(br||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Ur.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):Ur.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),Ur.tail=this.type===ir.backQuote,this.finishNode(Ur,"TemplateElement")},Wr.parseTemplate=function(sr){sr===void 0&&(sr={});var br=sr.isTagged;br===void 0&&(br=!1);var Ur=this.startNode();this.next(),Ur.expressions=[];var rn=this.parseTemplateElement({isTagged:br});for(Ur.quasis=[rn];!rn.tail;)this.type===ir.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ir.dollarBraceL),Ur.expressions.push(this.parseExpression()),this.expect(ir.braceR),Ur.quasis.push(rn=this.parseTemplateElement({isTagged:br}));return this.next(),this.finishNode(Ur,"TemplateLiteral")},Wr.isAsyncProp=function(sr){return!sr.computed&&sr.key.type==="Identifier"&&sr.key.name==="async"&&(this.type===ir.name||this.type===ir.num||this.type===ir.string||this.type===ir.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ir.star)&&!lr.test(this.input.slice(this.lastTokEnd,this.start))},Wr.parseObj=function(sr,br){var Ur=this.startNode(),rn=!0,dn={};for(Ur.properties=[],this.next();!this.eat(ir.braceR);){if(rn)rn=!1;else if(this.expect(ir.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ir.braceR))break;var Rn=this.parseProperty(sr,br);sr||this.checkPropClash(Rn,dn,br),Ur.properties.push(Rn)}return this.finishNode(Ur,sr?"ObjectPattern":"ObjectExpression")},Wr.parseProperty=function(sr,br){var Ur=this.startNode(),rn,dn,Rn,Nn;if(this.options.ecmaVersion>=9&&this.eat(ir.ellipsis))return sr?(Ur.argument=this.parseIdent(!1),this.type===ir.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(Ur,"RestElement")):(Ur.argument=this.parseMaybeAssign(!1,br),this.type===ir.comma&&br&&br.trailingComma<0&&(br.trailingComma=this.start),this.finishNode(Ur,"SpreadElement"));this.options.ecmaVersion>=6&&(Ur.method=!1,Ur.shorthand=!1,(sr||br)&&(Rn=this.start,Nn=this.startLoc),sr||(rn=this.eat(ir.star)));var Zn=this.containsEsc;return this.parsePropertyName(Ur),!sr&&!Zn&&this.options.ecmaVersion>=8&&!rn&&this.isAsyncProp(Ur)?(dn=!0,rn=this.options.ecmaVersion>=9&&this.eat(ir.star),this.parsePropertyName(Ur)):dn=!1,this.parsePropertyValue(Ur,sr,rn,dn,Rn,Nn,br,Zn),this.finishNode(Ur,"Property")},Wr.parseGetterSetter=function(sr){sr.kind=sr.key.name,this.parsePropertyName(sr),sr.value=this.parseMethod(!1);var br=sr.kind==="get"?0:1;if(sr.value.params.length!==br){var Ur=sr.value.start;sr.kind==="get"?this.raiseRecoverable(Ur,"getter should have no params"):this.raiseRecoverable(Ur,"setter should have exactly one param")}else sr.kind==="set"&&sr.value.params[0].type==="RestElement"&&this.raiseRecoverable(sr.value.params[0].start,"Setter cannot use rest params")},Wr.parsePropertyValue=function(sr,br,Ur,rn,dn,Rn,Nn,Zn){(Ur||rn)&&this.type===ir.colon&&this.unexpected(),this.eat(ir.colon)?(sr.value=br?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Nn),sr.kind="init"):this.options.ecmaVersion>=6&&this.type===ir.parenL?(br&&this.unexpected(),sr.kind="init",sr.method=!0,sr.value=this.parseMethod(Ur,rn)):!br&&!Zn&&this.options.ecmaVersion>=5&&!sr.computed&&sr.key.type==="Identifier"&&(sr.key.name==="get"||sr.key.name==="set")&&this.type!==ir.comma&&this.type!==ir.braceR&&this.type!==ir.eq?((Ur||rn)&&this.unexpected(),this.parseGetterSetter(sr)):this.options.ecmaVersion>=6&&!sr.computed&&sr.key.type==="Identifier"?((Ur||rn)&&this.unexpected(),this.checkUnreserved(sr.key),sr.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=dn),sr.kind="init",br?sr.value=this.parseMaybeDefault(dn,Rn,this.copyNode(sr.key)):this.type===ir.eq&&Nn?(Nn.shorthandAssign<0&&(Nn.shorthandAssign=this.start),sr.value=this.parseMaybeDefault(dn,Rn,this.copyNode(sr.key))):sr.value=this.copyNode(sr.key),sr.shorthand=!0):this.unexpected()},Wr.parsePropertyName=function(sr){if(this.options.ecmaVersion>=6){if(this.eat(ir.bracketL))return sr.computed=!0,sr.key=this.parseMaybeAssign(),this.expect(ir.bracketR),sr.key;sr.computed=!1}return sr.key=this.type===ir.num||this.type===ir.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},Wr.initFunction=function(sr){sr.id=null,this.options.ecmaVersion>=6&&(sr.generator=sr.expression=!1),this.options.ecmaVersion>=8&&(sr.async=!1)},Wr.parseMethod=function(sr,br,Ur){var rn=this.startNode(),dn=this.yieldPos,Rn=this.awaitPos,Nn=this.awaitIdentPos;return this.initFunction(rn),this.options.ecmaVersion>=6&&(rn.generator=sr),this.options.ecmaVersion>=8&&(rn.async=!!br),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(mn(br,rn.generator)|ns|(Ur?gs:0)),this.expect(ir.parenL),rn.params=this.parseBindingList(ir.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(rn,!1,!0,!1),this.yieldPos=dn,this.awaitPos=Rn,this.awaitIdentPos=Nn,this.finishNode(rn,"FunctionExpression")},Wr.parseArrowExpression=function(sr,br,Ur,rn){var dn=this.yieldPos,Rn=this.awaitPos,Nn=this.awaitIdentPos;return this.enterScope(mn(Ur,!1)|Un),this.initFunction(sr),this.options.ecmaVersion>=8&&(sr.async=!!Ur),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,sr.params=this.toAssignableList(br,!0),this.parseFunctionBody(sr,!0,!1,rn),this.yieldPos=dn,this.awaitPos=Rn,this.awaitIdentPos=Nn,this.finishNode(sr,"ArrowFunctionExpression")},Wr.parseFunctionBody=function(sr,br,Ur,rn){var dn=br&&this.type!==ir.braceL,Rn=this.strict,Nn=!1;if(dn)sr.body=this.parseMaybeAssign(rn),sr.expression=!0,this.checkParams(sr,!1);else{var Zn=this.options.ecmaVersion>=7&&!this.isSimpleParamList(sr.params);(!Rn||Zn)&&(Nn=this.strictDirective(this.end),Nn&&Zn&&this.raiseRecoverable(sr.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var rs=this.labels;this.labels=[],Nn&&(this.strict=!0),this.checkParams(sr,!Rn&&!Nn&&!br&&!Ur&&this.isSimpleParamList(sr.params)),this.strict&&sr.id&&this.checkLValSimple(sr.id,Bn),sr.body=this.parseBlock(!1,void 0,Nn&&!Rn),sr.expression=!1,this.adaptDirectivePrologue(sr.body.body),this.labels=rs}this.exitScope()},Wr.isSimpleParamList=function(sr){for(var br=0,Ur=sr;br<Ur.length;br+=1){var rn=Ur[br];if(rn.type!=="Identifier")return!1}return!0},Wr.checkParams=function(sr,br){for(var Ur=Object.create(null),rn=0,dn=sr.params;rn<dn.length;rn+=1){var Rn=dn[rn];this.checkLValInnerPattern(Rn,Tn,br?null:Ur)}},Wr.parseExprList=function(sr,br,Ur,rn){for(var dn=[],Rn=!0;!this.eat(sr);){if(Rn)Rn=!1;else if(this.expect(ir.comma),br&&this.afterTrailingComma(sr))break;var Nn=void 0;Ur&&this.type===ir.comma?Nn=null:this.type===ir.ellipsis?(Nn=this.parseSpread(rn),rn&&this.type===ir.comma&&rn.trailingComma<0&&(rn.trailingComma=this.start)):Nn=this.parseMaybeAssign(!1,rn),dn.push(Nn)}return dn},Wr.checkUnreserved=function(sr){var br=sr.start,Ur=sr.end,rn=sr.name;if(this.inGenerator&&rn==="yield"&&this.raiseRecoverable(br,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&rn==="await"&&this.raiseRecoverable(br,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&rn==="arguments"&&this.raiseRecoverable(br,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(rn==="arguments"||rn==="await")&&this.raise(br,"Cannot use "+rn+" in class static initialization block"),this.keywords.test(rn)&&this.raise(br,"Unexpected keyword '"+rn+"'"),!(this.options.ecmaVersion<6&&this.input.slice(br,Ur).indexOf("\\")!==-1)){var dn=this.strict?this.reservedWordsStrict:this.reservedWords;dn.test(rn)&&(!this.inAsync&&rn==="await"&&this.raiseRecoverable(br,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(br,"The keyword '"+rn+"' is reserved"))}},Wr.parseIdent=function(sr){var br=this.parseIdentNode();return this.next(!!sr),this.finishNode(br,"Identifier"),sr||(this.checkUnreserved(br),br.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=br.start)),br},Wr.parseIdentNode=function(){var sr=this.startNode();return this.type===ir.name?sr.name=this.value:this.type.keyword?(sr.name=this.type.keyword,(sr.name==="class"||sr.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=ir.name):this.unexpected(),sr},Wr.parsePrivateIdent=function(){var sr=this.startNode();return this.type===ir.privateId?sr.name=this.value:this.unexpected(),this.next(),this.finishNode(sr,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(sr.start,"Private field '#"+sr.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(sr)),sr},Wr.parseYield=function(sr){this.yieldPos||(this.yieldPos=this.start);var br=this.startNode();return this.next(),this.type===ir.semi||this.canInsertSemicolon()||this.type!==ir.star&&!this.type.startsExpr?(br.delegate=!1,br.argument=null):(br.delegate=this.eat(ir.star),br.argument=this.parseMaybeAssign(sr)),this.finishNode(br,"YieldExpression")},Wr.parseAwait=function(sr){this.awaitPos||(this.awaitPos=this.start);var br=this.startNode();return this.next(),br.argument=this.parseMaybeUnary(null,!0,!1,sr),this.finishNode(br,"AwaitExpression")};var nn=$t.prototype;nn.raise=function(sr,br){var Ur=sn(this.input,sr);br+=" ("+Ur.line+":"+Ur.column+")";var rn=new SyntaxError(br);throw rn.pos=sr,rn.loc=Ur,rn.raisedAt=this.pos,rn},nn.raiseRecoverable=nn.raise,nn.curPosition=function(){if(this.options.locations)return new Lr(this.curLine,this.pos-this.lineStart)};var Zr=$t.prototype,on=function(br){this.flags=br,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Zr.enterScope=function(sr){this.scopeStack.push(new on(sr))},Zr.exitScope=function(){this.scopeStack.pop()},Zr.treatFunctionsAsVarInScope=function(sr){return sr.flags&En||!this.inModule&&sr.flags&pn},Zr.declareName=function(sr,br,Ur){var rn=!1;if(br===An){var dn=this.currentScope();rn=dn.lexical.indexOf(sr)>-1||dn.functions.indexOf(sr)>-1||dn.var.indexOf(sr)>-1,dn.lexical.push(sr),this.inModule&&dn.flags&pn&&delete this.undefinedExports[sr]}else if(br===qn){var Rn=this.currentScope();Rn.lexical.push(sr)}else if(br===$n){var Nn=this.currentScope();this.treatFunctionsAsVar?rn=Nn.lexical.indexOf(sr)>-1:rn=Nn.lexical.indexOf(sr)>-1||Nn.var.indexOf(sr)>-1,Nn.functions.push(sr)}else for(var Zn=this.scopeStack.length-1;Zn>=0;--Zn){var rs=this.scopeStack[Zn];if(rs.lexical.indexOf(sr)>-1&&!(rs.flags&Ln&&rs.lexical[0]===sr)||!this.treatFunctionsAsVarInScope(rs)&&rs.functions.indexOf(sr)>-1){rn=!0;break}if(rs.var.push(sr),this.inModule&&rs.flags&pn&&delete this.undefinedExports[sr],rs.flags&wn)break}rn&&this.raiseRecoverable(Ur,"Identifier '"+sr+"' has already been declared")},Zr.checkLocalExport=function(sr){this.scopeStack[0].lexical.indexOf(sr.name)===-1&&this.scopeStack[0].var.indexOf(sr.name)===-1&&(this.undefinedExports[sr.name]=sr)},Zr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Zr.currentVarScope=function(){for(var sr=this.scopeStack.length-1;;sr--){var br=this.scopeStack[sr];if(br.flags&wn)return br}},Zr.currentThisScope=function(){for(var sr=this.scopeStack.length-1;;sr--){var br=this.scopeStack[sr];if(br.flags&wn&&!(br.flags&Un))return br}};var hn=function(br,Ur,rn){this.type="",this.start=Ur,this.end=0,br.options.locations&&(this.loc=new qr(br,rn)),br.options.directSourceFile&&(this.sourceFile=br.options.directSourceFile),br.options.ranges&&(this.range=[Ur,0])},fn=$t.prototype;fn.startNode=function(){return new hn(this,this.start,this.startLoc)},fn.startNodeAt=function(sr,br){return new hn(this,sr,br)};function xn(sr,br,Ur,rn){return sr.type=br,sr.end=Ur,this.options.locations&&(sr.loc.end=rn),this.options.ranges&&(sr.range[1]=Ur),sr}fn.finishNode=function(sr,br){return xn.call(this,sr,br,this.lastTokEnd,this.lastTokEndLoc)},fn.finishNodeAt=function(sr,br,Ur,rn){return xn.call(this,sr,br,Ur,rn)},fn.copyNode=function(sr){var br=new hn(this,sr.start,this.startLoc);for(var Ur in sr)br[Ur]=sr[Ur];return br};var cn="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",vn="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",bn=vn+" Extended_Pictographic",_n=bn,Cn=_n+" EBase EComp EMod EPres ExtPict",Fn=Cn,Wn=Fn,Yn={9:vn,10:bn,11:_n,12:Cn,13:Fn,14:Wn},Qn="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",ss={9:"",10:"",11:"",12:"",13:"",14:Qn},zn="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Gn="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",es=Gn+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ls=es+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",as=ls+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ys=as+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",vs=ys+" "+cn,_s={9:Gn,10:es,11:ls,12:as,13:ys,14:vs},Cs={};function xs(sr){var br=Cs[sr]={binary:Er(Yn[sr]+" "+zn),binaryOfStrings:Er(ss[sr]),nonBinary:{General_Category:Er(zn),Script:Er(_s[sr])}};br.nonBinary.Script_Extensions=br.nonBinary.Script,br.nonBinary.gc=br.nonBinary.General_Category,br.nonBinary.sc=br.nonBinary.Script,br.nonBinary.scx=br.nonBinary.Script_Extensions}for(var ga=0,uo=[9,10,11,12,13,14];ga<uo.length;ga+=1){var Oo=uo[ga];xs(Oo)}var Jn=$t.prototype,Is=function(br,Ur){this.parent=br,this.base=Ur||this};Is.prototype.separatedFrom=function(br){for(var Ur=this;Ur;Ur=Ur.parent)for(var rn=br;rn;rn=rn.parent)if(Ur.base===rn.base&&Ur!==rn)return!0;return!1},Is.prototype.sibling=function(){return new Is(this.parent,this.base)};var Ls=function(br){this.parser=br,this.validFlags="gim"+(br.options.ecmaVersion>=6?"uy":"")+(br.options.ecmaVersion>=9?"s":"")+(br.options.ecmaVersion>=13?"d":"")+(br.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Cs[br.options.ecmaVersion>=14?14:br.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Ls.prototype.reset=function(br,Ur,rn){var dn=rn.indexOf("v")!==-1,Rn=rn.indexOf("u")!==-1;this.start=br|0,this.source=Ur+"",this.flags=rn,dn&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=Rn&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=Rn&&this.parser.options.ecmaVersion>=9)},Ls.prototype.raise=function(br){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+br)},Ls.prototype.at=function(br,Ur){Ur===void 0&&(Ur=!1);var rn=this.source,dn=rn.length;if(br>=dn)return-1;var Rn=rn.charCodeAt(br);if(!(Ur||this.switchU)||Rn<=55295||Rn>=57344||br+1>=dn)return Rn;var Nn=rn.charCodeAt(br+1);return Nn>=56320&&Nn<=57343?(Rn<<10)+Nn-56613888:Rn},Ls.prototype.nextIndex=function(br,Ur){Ur===void 0&&(Ur=!1);var rn=this.source,dn=rn.length;if(br>=dn)return dn;var Rn=rn.charCodeAt(br),Nn;return!(Ur||this.switchU)||Rn<=55295||Rn>=57344||br+1>=dn||(Nn=rn.charCodeAt(br+1))<56320||Nn>57343?br+1:br+2},Ls.prototype.current=function(br){return br===void 0&&(br=!1),this.at(this.pos,br)},Ls.prototype.lookahead=function(br){return br===void 0&&(br=!1),this.at(this.nextIndex(this.pos,br),br)},Ls.prototype.advance=function(br){br===void 0&&(br=!1),this.pos=this.nextIndex(this.pos,br)},Ls.prototype.eat=function(br,Ur){return Ur===void 0&&(Ur=!1),this.current(Ur)===br?(this.advance(Ur),!0):!1},Ls.prototype.eatChars=function(br,Ur){Ur===void 0&&(Ur=!1);for(var rn=this.pos,dn=0,Rn=br;dn<Rn.length;dn+=1){var Nn=Rn[dn],Zn=this.at(rn,Ur);if(Zn===-1||Zn!==Nn)return!1;rn=this.nextIndex(rn,Ur)}return this.pos=rn,!0},Jn.validateRegExpFlags=function(sr){for(var br=sr.validFlags,Ur=sr.flags,rn=!1,dn=!1,Rn=0;Rn<Ur.length;Rn++){var Nn=Ur.charAt(Rn);br.indexOf(Nn)===-1&&this.raise(sr.start,"Invalid regular expression flag"),Ur.indexOf(Nn,Rn+1)>-1&&this.raise(sr.start,"Duplicate regular expression flag"),Nn==="u"&&(rn=!0),Nn==="v"&&(dn=!0)}this.options.ecmaVersion>=15&&rn&&dn&&this.raise(sr.start,"Invalid regular expression flag")};function Fs(sr){for(var br in sr)return!0;return!1}Jn.validateRegExpPattern=function(sr){this.regexp_pattern(sr),!sr.switchN&&this.options.ecmaVersion>=9&&Fs(sr.groupNames)&&(sr.switchN=!0,this.regexp_pattern(sr))},Jn.regexp_pattern=function(sr){sr.pos=0,sr.lastIntValue=0,sr.lastStringValue="",sr.lastAssertionIsQuantifiable=!1,sr.numCapturingParens=0,sr.maxBackReference=0,sr.groupNames=Object.create(null),sr.backReferenceNames.length=0,sr.branchID=null,this.regexp_disjunction(sr),sr.pos!==sr.source.length&&(sr.eat(41)&&sr.raise("Unmatched ')'"),(sr.eat(93)||sr.eat(125))&&sr.raise("Lone quantifier brackets")),sr.maxBackReference>sr.numCapturingParens&&sr.raise("Invalid escape");for(var br=0,Ur=sr.backReferenceNames;br<Ur.length;br+=1){var rn=Ur[br];sr.groupNames[rn]||sr.raise("Invalid named capture referenced")}},Jn.regexp_disjunction=function(sr){var br=this.options.ecmaVersion>=16;for(br&&(sr.branchID=new Is(sr.branchID,null)),this.regexp_alternative(sr);sr.eat(124);)br&&(sr.branchID=sr.branchID.sibling()),this.regexp_alternative(sr);br&&(sr.branchID=sr.branchID.parent),this.regexp_eatQuantifier(sr,!0)&&sr.raise("Nothing to repeat"),sr.eat(123)&&sr.raise("Lone quantifier brackets")},Jn.regexp_alternative=function(sr){for(;sr.pos<sr.source.length&&this.regexp_eatTerm(sr););},Jn.regexp_eatTerm=function(sr){return this.regexp_eatAssertion(sr)?(sr.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(sr)&&sr.switchU&&sr.raise("Invalid quantifier"),!0):(sr.switchU?this.regexp_eatAtom(sr):this.regexp_eatExtendedAtom(sr))?(this.regexp_eatQuantifier(sr),!0):!1},Jn.regexp_eatAssertion=function(sr){var br=sr.pos;if(sr.lastAssertionIsQuantifiable=!1,sr.eat(94)||sr.eat(36))return!0;if(sr.eat(92)){if(sr.eat(66)||sr.eat(98))return!0;sr.pos=br}if(sr.eat(40)&&sr.eat(63)){var Ur=!1;if(this.options.ecmaVersion>=9&&(Ur=sr.eat(60)),sr.eat(61)||sr.eat(33))return this.regexp_disjunction(sr),sr.eat(41)||sr.raise("Unterminated group"),sr.lastAssertionIsQuantifiable=!Ur,!0}return sr.pos=br,!1},Jn.regexp_eatQuantifier=function(sr,br){return br===void 0&&(br=!1),this.regexp_eatQuantifierPrefix(sr,br)?(sr.eat(63),!0):!1},Jn.regexp_eatQuantifierPrefix=function(sr,br){return sr.eat(42)||sr.eat(43)||sr.eat(63)||this.regexp_eatBracedQuantifier(sr,br)},Jn.regexp_eatBracedQuantifier=function(sr,br){var Ur=sr.pos;if(sr.eat(123)){var rn=0,dn=-1;if(this.regexp_eatDecimalDigits(sr)&&(rn=sr.lastIntValue,sr.eat(44)&&this.regexp_eatDecimalDigits(sr)&&(dn=sr.lastIntValue),sr.eat(125)))return dn!==-1&&dn<rn&&!br&&sr.raise("numbers out of order in {} quantifier"),!0;sr.switchU&&!br&&sr.raise("Incomplete quantifier"),sr.pos=Ur}return!1},Jn.regexp_eatAtom=function(sr){return this.regexp_eatPatternCharacters(sr)||sr.eat(46)||this.regexp_eatReverseSolidusAtomEscape(sr)||this.regexp_eatCharacterClass(sr)||this.regexp_eatUncapturingGroup(sr)||this.regexp_eatCapturingGroup(sr)},Jn.regexp_eatReverseSolidusAtomEscape=function(sr){var br=sr.pos;if(sr.eat(92)){if(this.regexp_eatAtomEscape(sr))return!0;sr.pos=br}return!1},Jn.regexp_eatUncapturingGroup=function(sr){var br=sr.pos;if(sr.eat(40)){if(sr.eat(63)){if(this.options.ecmaVersion>=16){var Ur=this.regexp_eatModifiers(sr),rn=sr.eat(45);if(Ur||rn){for(var dn=0;dn<Ur.length;dn++){var Rn=Ur.charAt(dn);Ur.indexOf(Rn,dn+1)>-1&&sr.raise("Duplicate regular expression modifiers")}if(rn){var Nn=this.regexp_eatModifiers(sr);!Ur&&!Nn&&sr.current()===58&&sr.raise("Invalid regular expression modifiers");for(var Zn=0;Zn<Nn.length;Zn++){var rs=Nn.charAt(Zn);(Nn.indexOf(rs,Zn+1)>-1||Ur.indexOf(rs)>-1)&&sr.raise("Duplicate regular expression modifiers")}}}}if(sr.eat(58)){if(this.regexp_disjunction(sr),sr.eat(41))return!0;sr.raise("Unterminated group")}}sr.pos=br}return!1},Jn.regexp_eatCapturingGroup=function(sr){if(sr.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(sr):sr.current()===63&&sr.raise("Invalid group"),this.regexp_disjunction(sr),sr.eat(41))return sr.numCapturingParens+=1,!0;sr.raise("Unterminated group")}return!1},Jn.regexp_eatModifiers=function(sr){for(var br="",Ur=0;(Ur=sr.current())!==-1&&ks(Ur);)br+=Dr(Ur),sr.advance();return br};function ks(sr){return sr===105||sr===109||sr===115}Jn.regexp_eatExtendedAtom=function(sr){return sr.eat(46)||this.regexp_eatReverseSolidusAtomEscape(sr)||this.regexp_eatCharacterClass(sr)||this.regexp_eatUncapturingGroup(sr)||this.regexp_eatCapturingGroup(sr)||this.regexp_eatInvalidBracedQuantifier(sr)||this.regexp_eatExtendedPatternCharacter(sr)},Jn.regexp_eatInvalidBracedQuantifier=function(sr){return this.regexp_eatBracedQuantifier(sr,!0)&&sr.raise("Nothing to repeat"),!1},Jn.regexp_eatSyntaxCharacter=function(sr){var br=sr.current();return yo(br)?(sr.lastIntValue=br,sr.advance(),!0):!1};function yo(sr){return sr===36||sr>=40&&sr<=43||sr===46||sr===63||sr>=91&&sr<=94||sr>=123&&sr<=125}Jn.regexp_eatPatternCharacters=function(sr){for(var br=sr.pos,Ur=0;(Ur=sr.current())!==-1&&!yo(Ur);)sr.advance();return sr.pos!==br},Jn.regexp_eatExtendedPatternCharacter=function(sr){var br=sr.current();return br!==-1&&br!==36&&!(br>=40&&br<=43)&&br!==46&&br!==63&&br!==91&&br!==94&&br!==124?(sr.advance(),!0):!1},Jn.regexp_groupSpecifier=function(sr){if(sr.eat(63)){this.regexp_eatGroupName(sr)||sr.raise("Invalid group");var br=this.options.ecmaVersion>=16,Ur=sr.groupNames[sr.lastStringValue];if(Ur)if(br)for(var rn=0,dn=Ur;rn<dn.length;rn+=1){var Rn=dn[rn];Rn.separatedFrom(sr.branchID)||sr.raise("Duplicate capture group name")}else sr.raise("Duplicate capture group name");br?(Ur||(sr.groupNames[sr.lastStringValue]=[])).push(sr.branchID):sr.groupNames[sr.lastStringValue]=!0}},Jn.regexp_eatGroupName=function(sr){if(sr.lastStringValue="",sr.eat(60)){if(this.regexp_eatRegExpIdentifierName(sr)&&sr.eat(62))return!0;sr.raise("Invalid capture group name")}return!1},Jn.regexp_eatRegExpIdentifierName=function(sr){if(sr.lastStringValue="",this.regexp_eatRegExpIdentifierStart(sr)){for(sr.lastStringValue+=Dr(sr.lastIntValue);this.regexp_eatRegExpIdentifierPart(sr);)sr.lastStringValue+=Dr(sr.lastIntValue);return!0}return!1},Jn.regexp_eatRegExpIdentifierStart=function(sr){var br=sr.pos,Ur=this.options.ecmaVersion>=11,rn=sr.current(Ur);return sr.advance(Ur),rn===92&&this.regexp_eatRegExpUnicodeEscapeSequence(sr,Ur)&&(rn=sr.lastIntValue),xa(rn)?(sr.lastIntValue=rn,!0):(sr.pos=br,!1)};function xa(sr){return Bt(sr,!0)||sr===36||sr===95}Jn.regexp_eatRegExpIdentifierPart=function(sr){var br=sr.pos,Ur=this.options.ecmaVersion>=11,rn=sr.current(Ur);return sr.advance(Ur),rn===92&&this.regexp_eatRegExpUnicodeEscapeSequence(sr,Ur)&&(rn=sr.lastIntValue),Xs(rn)?(sr.lastIntValue=rn,!0):(sr.pos=br,!1)};function Xs(sr){return zt(sr,!0)||sr===36||sr===95||sr===8204||sr===8205}Jn.regexp_eatAtomEscape=function(sr){return this.regexp_eatBackReference(sr)||this.regexp_eatCharacterClassEscape(sr)||this.regexp_eatCharacterEscape(sr)||sr.switchN&&this.regexp_eatKGroupName(sr)?!0:(sr.switchU&&(sr.current()===99&&sr.raise("Invalid unicode escape"),sr.raise("Invalid escape")),!1)},Jn.regexp_eatBackReference=function(sr){var br=sr.pos;if(this.regexp_eatDecimalEscape(sr)){var Ur=sr.lastIntValue;if(sr.switchU)return Ur>sr.maxBackReference&&(sr.maxBackReference=Ur),!0;if(Ur<=sr.numCapturingParens)return!0;sr.pos=br}return!1},Jn.regexp_eatKGroupName=function(sr){if(sr.eat(107)){if(this.regexp_eatGroupName(sr))return sr.backReferenceNames.push(sr.lastStringValue),!0;sr.raise("Invalid named reference")}return!1},Jn.regexp_eatCharacterEscape=function(sr){return this.regexp_eatControlEscape(sr)||this.regexp_eatCControlLetter(sr)||this.regexp_eatZero(sr)||this.regexp_eatHexEscapeSequence(sr)||this.regexp_eatRegExpUnicodeEscapeSequence(sr,!1)||!sr.switchU&&this.regexp_eatLegacyOctalEscapeSequence(sr)||this.regexp_eatIdentityEscape(sr)},Jn.regexp_eatCControlLetter=function(sr){var br=sr.pos;if(sr.eat(99)){if(this.regexp_eatControlLetter(sr))return!0;sr.pos=br}return!1},Jn.regexp_eatZero=function(sr){return sr.current()===48&&!_p(sr.lookahead())?(sr.lastIntValue=0,sr.advance(),!0):!1},Jn.regexp_eatControlEscape=function(sr){var br=sr.current();return br===116?(sr.lastIntValue=9,sr.advance(),!0):br===110?(sr.lastIntValue=10,sr.advance(),!0):br===118?(sr.lastIntValue=11,sr.advance(),!0):br===102?(sr.lastIntValue=12,sr.advance(),!0):br===114?(sr.lastIntValue=13,sr.advance(),!0):!1},Jn.regexp_eatControlLetter=function(sr){var br=sr.current();return Po(br)?(sr.lastIntValue=br%32,sr.advance(),!0):!1};function Po(sr){return sr>=65&&sr<=90||sr>=97&&sr<=122}Jn.regexp_eatRegExpUnicodeEscapeSequence=function(sr,br){br===void 0&&(br=!1);var Ur=sr.pos,rn=br||sr.switchU;if(sr.eat(117)){if(this.regexp_eatFixedHexDigits(sr,4)){var dn=sr.lastIntValue;if(rn&&dn>=55296&&dn<=56319){var Rn=sr.pos;if(sr.eat(92)&&sr.eat(117)&&this.regexp_eatFixedHexDigits(sr,4)){var Nn=sr.lastIntValue;if(Nn>=56320&&Nn<=57343)return sr.lastIntValue=(dn-55296)*1024+(Nn-56320)+65536,!0}sr.pos=Rn,sr.lastIntValue=dn}return!0}if(rn&&sr.eat(123)&&this.regexp_eatHexDigits(sr)&&sr.eat(125)&&Ao(sr.lastIntValue))return!0;rn&&sr.raise("Invalid unicode escape"),sr.pos=Ur}return!1};function Ao(sr){return sr>=0&&sr<=1114111}Jn.regexp_eatIdentityEscape=function(sr){if(sr.switchU)return this.regexp_eatSyntaxCharacter(sr)?!0:sr.eat(47)?(sr.lastIntValue=47,!0):!1;var br=sr.current();return br!==99&&(!sr.switchN||br!==107)?(sr.lastIntValue=br,sr.advance(),!0):!1},Jn.regexp_eatDecimalEscape=function(sr){sr.lastIntValue=0;var br=sr.current();if(br>=49&&br<=57){do sr.lastIntValue=10*sr.lastIntValue+(br-48),sr.advance();while((br=sr.current())>=48&&br<=57);return!0}return!1};var Ws=0,ko=1,ba=2;Jn.regexp_eatCharacterClassEscape=function(sr){var br=sr.current();if(km(br))return sr.lastIntValue=-1,sr.advance(),ko;var Ur=!1;if(sr.switchU&&this.options.ecmaVersion>=9&&((Ur=br===80)||br===112)){sr.lastIntValue=-1,sr.advance();var rn;if(sr.eat(123)&&(rn=this.regexp_eatUnicodePropertyValueExpression(sr))&&sr.eat(125))return Ur&&rn===ba&&sr.raise("Invalid property name"),rn;sr.raise("Invalid property name")}return Ws};function km(sr){return sr===100||sr===68||sr===115||sr===83||sr===119||sr===87}Jn.regexp_eatUnicodePropertyValueExpression=function(sr){var br=sr.pos;if(this.regexp_eatUnicodePropertyName(sr)&&sr.eat(61)){var Ur=sr.lastStringValue;if(this.regexp_eatUnicodePropertyValue(sr)){var rn=sr.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(sr,Ur,rn),ko}}if(sr.pos=br,this.regexp_eatLoneUnicodePropertyNameOrValue(sr)){var dn=sr.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(sr,dn)}return Ws},Jn.regexp_validateUnicodePropertyNameAndValue=function(sr,br,Ur){hr(sr.unicodeProperties.nonBinary,br)||sr.raise("Invalid property name"),sr.unicodeProperties.nonBinary[br].test(Ur)||sr.raise("Invalid property value")},Jn.regexp_validateUnicodePropertyNameOrValue=function(sr,br){if(sr.unicodeProperties.binary.test(br))return ko;if(sr.switchV&&sr.unicodeProperties.binaryOfStrings.test(br))return ba;sr.raise("Invalid property name")},Jn.regexp_eatUnicodePropertyName=function(sr){var br=0;for(sr.lastStringValue="";Wp(br=sr.current());)sr.lastStringValue+=Dr(br),sr.advance();return sr.lastStringValue!==""};function Wp(sr){return Po(sr)||sr===95}Jn.regexp_eatUnicodePropertyValue=function(sr){var br=0;for(sr.lastStringValue="";Iv(br=sr.current());)sr.lastStringValue+=Dr(br),sr.advance();return sr.lastStringValue!==""};function Iv(sr){return Wp(sr)||_p(sr)}Jn.regexp_eatLoneUnicodePropertyNameOrValue=function(sr){return this.regexp_eatUnicodePropertyValue(sr)},Jn.regexp_eatCharacterClass=function(sr){if(sr.eat(91)){var br=sr.eat(94),Ur=this.regexp_classContents(sr);return sr.eat(93)||sr.raise("Unterminated character class"),br&&Ur===ba&&sr.raise("Negated character class may contain strings"),!0}return!1},Jn.regexp_classContents=function(sr){return sr.current()===93?ko:sr.switchV?this.regexp_classSetExpression(sr):(this.regexp_nonEmptyClassRanges(sr),ko)},Jn.regexp_nonEmptyClassRanges=function(sr){for(;this.regexp_eatClassAtom(sr);){var br=sr.lastIntValue;if(sr.eat(45)&&this.regexp_eatClassAtom(sr)){var Ur=sr.lastIntValue;sr.switchU&&(br===-1||Ur===-1)&&sr.raise("Invalid character class"),br!==-1&&Ur!==-1&&br>Ur&&sr.raise("Range out of order in character class")}}},Jn.regexp_eatClassAtom=function(sr){var br=sr.pos;if(sr.eat(92)){if(this.regexp_eatClassEscape(sr))return!0;if(sr.switchU){var Ur=sr.current();(Ur===99||Du(Ur))&&sr.raise("Invalid class escape"),sr.raise("Invalid escape")}sr.pos=br}var rn=sr.current();return rn!==93?(sr.lastIntValue=rn,sr.advance(),!0):!1},Jn.regexp_eatClassEscape=function(sr){var br=sr.pos;if(sr.eat(98))return sr.lastIntValue=8,!0;if(sr.switchU&&sr.eat(45))return sr.lastIntValue=45,!0;if(!sr.switchU&&sr.eat(99)){if(this.regexp_eatClassControlLetter(sr))return!0;sr.pos=br}return this.regexp_eatCharacterClassEscape(sr)||this.regexp_eatCharacterEscape(sr)},Jn.regexp_classSetExpression=function(sr){var br=ko,Ur;if(!this.regexp_eatClassSetRange(sr))if(Ur=this.regexp_eatClassSetOperand(sr)){Ur===ba&&(br=ba);for(var rn=sr.pos;sr.eatChars([38,38]);){if(sr.current()!==38&&(Ur=this.regexp_eatClassSetOperand(sr))){Ur!==ba&&(br=ko);continue}sr.raise("Invalid character in character class")}if(rn!==sr.pos)return br;for(;sr.eatChars([45,45]);)this.regexp_eatClassSetOperand(sr)||sr.raise("Invalid character in character class");if(rn!==sr.pos)return br}else sr.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(sr)){if(Ur=this.regexp_eatClassSetOperand(sr),!Ur)return br;Ur===ba&&(br=ba)}},Jn.regexp_eatClassSetRange=function(sr){var br=sr.pos;if(this.regexp_eatClassSetCharacter(sr)){var Ur=sr.lastIntValue;if(sr.eat(45)&&this.regexp_eatClassSetCharacter(sr)){var rn=sr.lastIntValue;return Ur!==-1&&rn!==-1&&Ur>rn&&sr.raise("Range out of order in character class"),!0}sr.pos=br}return!1},Jn.regexp_eatClassSetOperand=function(sr){return this.regexp_eatClassSetCharacter(sr)?ko:this.regexp_eatClassStringDisjunction(sr)||this.regexp_eatNestedClass(sr)},Jn.regexp_eatNestedClass=function(sr){var br=sr.pos;if(sr.eat(91)){var Ur=sr.eat(94),rn=this.regexp_classContents(sr);if(sr.eat(93))return Ur&&rn===ba&&sr.raise("Negated character class may contain strings"),rn;sr.pos=br}if(sr.eat(92)){var dn=this.regexp_eatCharacterClassEscape(sr);if(dn)return dn;sr.pos=br}return null},Jn.regexp_eatClassStringDisjunction=function(sr){var br=sr.pos;if(sr.eatChars([92,113])){if(sr.eat(123)){var Ur=this.regexp_classStringDisjunctionContents(sr);if(sr.eat(125))return Ur}else sr.raise("Invalid escape");sr.pos=br}return null},Jn.regexp_classStringDisjunctionContents=function(sr){for(var br=this.regexp_classString(sr);sr.eat(124);)this.regexp_classString(sr)===ba&&(br=ba);return br},Jn.regexp_classString=function(sr){for(var br=0;this.regexp_eatClassSetCharacter(sr);)br++;return br===1?ko:ba},Jn.regexp_eatClassSetCharacter=function(sr){var br=sr.pos;if(sr.eat(92))return this.regexp_eatCharacterEscape(sr)||this.regexp_eatClassSetReservedPunctuator(sr)?!0:sr.eat(98)?(sr.lastIntValue=8,!0):(sr.pos=br,!1);var Ur=sr.current();return Ur<0||Ur===sr.lookahead()&&zl(Ur)||B1(Ur)?!1:(sr.advance(),sr.lastIntValue=Ur,!0)};function zl(sr){return sr===33||sr>=35&&sr<=38||sr>=42&&sr<=44||sr===46||sr>=58&&sr<=64||sr===94||sr===96||sr===126}function B1(sr){return sr===40||sr===41||sr===45||sr===47||sr>=91&&sr<=93||sr>=123&&sr<=125}Jn.regexp_eatClassSetReservedPunctuator=function(sr){var br=sr.current();return $1(br)?(sr.lastIntValue=br,sr.advance(),!0):!1};function $1(sr){return sr===33||sr===35||sr===37||sr===38||sr===44||sr===45||sr>=58&&sr<=62||sr===64||sr===96||sr===126}Jn.regexp_eatClassControlLetter=function(sr){var br=sr.current();return _p(br)||br===95?(sr.lastIntValue=br%32,sr.advance(),!0):!1},Jn.regexp_eatHexEscapeSequence=function(sr){var br=sr.pos;if(sr.eat(120)){if(this.regexp_eatFixedHexDigits(sr,2))return!0;sr.switchU&&sr.raise("Invalid escape"),sr.pos=br}return!1},Jn.regexp_eatDecimalDigits=function(sr){var br=sr.pos,Ur=0;for(sr.lastIntValue=0;_p(Ur=sr.current());)sr.lastIntValue=10*sr.lastIntValue+(Ur-48),sr.advance();return sr.pos!==br};function _p(sr){return sr>=48&&sr<=57}Jn.regexp_eatHexDigits=function(sr){var br=sr.pos,Ur=0;for(sr.lastIntValue=0;Cp(Ur=sr.current());)sr.lastIntValue=16*sr.lastIntValue+ep(Ur),sr.advance();return sr.pos!==br};function Cp(sr){return sr>=48&&sr<=57||sr>=65&&sr<=70||sr>=97&&sr<=102}function ep(sr){return sr>=65&&sr<=70?10+(sr-65):sr>=97&&sr<=102?10+(sr-97):sr-48}Jn.regexp_eatLegacyOctalEscapeSequence=function(sr){if(this.regexp_eatOctalDigit(sr)){var br=sr.lastIntValue;if(this.regexp_eatOctalDigit(sr)){var Ur=sr.lastIntValue;br<=3&&this.regexp_eatOctalDigit(sr)?sr.lastIntValue=br*64+Ur*8+sr.lastIntValue:sr.lastIntValue=br*8+Ur}else sr.lastIntValue=br;return!0}return!1},Jn.regexp_eatOctalDigit=function(sr){var br=sr.current();return Du(br)?(sr.lastIntValue=br-48,sr.advance(),!0):(sr.lastIntValue=0,!1)};function Du(sr){return sr>=48&&sr<=55}Jn.regexp_eatFixedHexDigits=function(sr,br){var Ur=sr.pos;sr.lastIntValue=0;for(var rn=0;rn<br;++rn){var dn=sr.current();if(!Cp(dn))return sr.pos=Ur,!1;sr.lastIntValue=16*sr.lastIntValue+ep(dn),sr.advance()}return!0};var Ul=function(br){this.type=br.type,this.value=br.value,this.start=br.start,this.end=br.end,br.options.locations&&(this.loc=new qr(br,br.startLoc,br.endLoc)),br.options.ranges&&(this.range=[br.start,br.end])},Ps=$t.prototype;Ps.next=function(sr){!sr&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Ul(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Ps.getToken=function(){return this.next(),new Ul(this)},typeof Symbol<"u"&&(Ps[Symbol.iterator]=function(){var sr=this;return{next:function(){var br=sr.getToken();return{done:br.type===ir.eof,value:br}}}}),Ps.nextToken=function(){var sr=this.curContext();if((!sr||!sr.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(ir.eof);if(sr.override)return sr.override(this);this.readToken(this.fullCharCodeAtPos())},Ps.readToken=function(sr){return Bt(sr,this.options.ecmaVersion>=6)||sr===92?this.readWord():this.getTokenFromCode(sr)},Ps.fullCharCodeAtPos=function(){var sr=this.input.charCodeAt(this.pos);if(sr<=55295||sr>=56320)return sr;var br=this.input.charCodeAt(this.pos+1);return br<=56319||br>=57344?sr:(sr<<10)+br-56613888},Ps.skipBlockComment=function(){var sr=this.options.onComment&&this.curPosition(),br=this.pos,Ur=this.input.indexOf("*/",this.pos+=2);if(Ur===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=Ur+2,this.options.locations)for(var rn=void 0,dn=br;(rn=xr(this.input,dn,this.pos))>-1;)++this.curLine,dn=this.lineStart=rn;this.options.onComment&&this.options.onComment(!0,this.input.slice(br+2,Ur),br,this.pos,sr,this.curPosition())},Ps.skipLineComment=function(sr){for(var br=this.pos,Ur=this.options.onComment&&this.curPosition(),rn=this.input.charCodeAt(this.pos+=sr);this.pos<this.input.length&&!vr(rn);)rn=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(br+sr,this.pos),br,this.pos,Ur,this.curPosition())},Ps.skipSpace=function(){e:for(;this.pos<this.input.length;){var sr=this.input.charCodeAt(this.pos);switch(sr){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(sr>8&&sr<14||sr>=5760&&yr.test(String.fromCharCode(sr)))++this.pos;else break e}}},Ps.finishToken=function(sr,br){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var Ur=this.type;this.type=sr,this.value=br,this.updateContext(Ur)},Ps.readToken_dot=function(){var sr=this.input.charCodeAt(this.pos+1);if(sr>=48&&sr<=57)return this.readNumber(!0);var br=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&sr===46&&br===46?(this.pos+=3,this.finishToken(ir.ellipsis)):(++this.pos,this.finishToken(ir.dot))},Ps.readToken_slash=function(){var sr=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):sr===61?this.finishOp(ir.assign,2):this.finishOp(ir.slash,1)},Ps.readToken_mult_modulo_exp=function(sr){var br=this.input.charCodeAt(this.pos+1),Ur=1,rn=sr===42?ir.star:ir.modulo;return this.options.ecmaVersion>=7&&sr===42&&br===42&&(++Ur,rn=ir.starstar,br=this.input.charCodeAt(this.pos+2)),br===61?this.finishOp(ir.assign,Ur+1):this.finishOp(rn,Ur)},Ps.readToken_pipe_amp=function(sr){var br=this.input.charCodeAt(this.pos+1);if(br===sr){if(this.options.ecmaVersion>=12){var Ur=this.input.charCodeAt(this.pos+2);if(Ur===61)return this.finishOp(ir.assign,3)}return this.finishOp(sr===124?ir.logicalOR:ir.logicalAND,2)}return br===61?this.finishOp(ir.assign,2):this.finishOp(sr===124?ir.bitwiseOR:ir.bitwiseAND,1)},Ps.readToken_caret=function(){var sr=this.input.charCodeAt(this.pos+1);return sr===61?this.finishOp(ir.assign,2):this.finishOp(ir.bitwiseXOR,1)},Ps.readToken_plus_min=function(sr){var br=this.input.charCodeAt(this.pos+1);return br===sr?br===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||lr.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(ir.incDec,2):br===61?this.finishOp(ir.assign,2):this.finishOp(ir.plusMin,1)},Ps.readToken_lt_gt=function(sr){var br=this.input.charCodeAt(this.pos+1),Ur=1;return br===sr?(Ur=sr===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+Ur)===61?this.finishOp(ir.assign,Ur+1):this.finishOp(ir.bitShift,Ur)):br===33&&sr===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(br===61&&(Ur=2),this.finishOp(ir.relational,Ur))},Ps.readToken_eq_excl=function(sr){var br=this.input.charCodeAt(this.pos+1);return br===61?this.finishOp(ir.equality,this.input.charCodeAt(this.pos+2)===61?3:2):sr===61&&br===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ir.arrow)):this.finishOp(sr===61?ir.eq:ir.prefix,1)},Ps.readToken_question=function(){var sr=this.options.ecmaVersion;if(sr>=11){var br=this.input.charCodeAt(this.pos+1);if(br===46){var Ur=this.input.charCodeAt(this.pos+2);if(Ur<48||Ur>57)return this.finishOp(ir.questionDot,2)}if(br===63){if(sr>=12){var rn=this.input.charCodeAt(this.pos+2);if(rn===61)return this.finishOp(ir.assign,3)}return this.finishOp(ir.coalesce,2)}}return this.finishOp(ir.question,1)},Ps.readToken_numberSign=function(){var sr=this.options.ecmaVersion,br=35;if(sr>=13&&(++this.pos,br=this.fullCharCodeAtPos(),Bt(br,!0)||br===92))return this.finishToken(ir.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Dr(br)+"'")},Ps.getTokenFromCode=function(sr){switch(sr){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ir.parenL);case 41:return++this.pos,this.finishToken(ir.parenR);case 59:return++this.pos,this.finishToken(ir.semi);case 44:return++this.pos,this.finishToken(ir.comma);case 91:return++this.pos,this.finishToken(ir.bracketL);case 93:return++this.pos,this.finishToken(ir.bracketR);case 123:return++this.pos,this.finishToken(ir.braceL);case 125:return++this.pos,this.finishToken(ir.braceR);case 58:return++this.pos,this.finishToken(ir.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ir.backQuote);case 48:var br=this.input.charCodeAt(this.pos+1);if(br===120||br===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(br===111||br===79)return this.readRadixNumber(8);if(br===98||br===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(sr);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(sr);case 124:case 38:return this.readToken_pipe_amp(sr);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(sr);case 60:case 62:return this.readToken_lt_gt(sr);case 61:case 33:return this.readToken_eq_excl(sr);case 63:return this.readToken_question();case 126:return this.finishOp(ir.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Dr(sr)+"'")},Ps.finishOp=function(sr,br){var Ur=this.input.slice(this.pos,this.pos+br);return this.pos+=br,this.finishToken(sr,Ur)},Ps.readRegexp=function(){for(var sr,br,Ur=this.pos;;){this.pos>=this.input.length&&this.raise(Ur,"Unterminated regular expression");var rn=this.input.charAt(this.pos);if(lr.test(rn)&&this.raise(Ur,"Unterminated regular expression"),sr)sr=!1;else{if(rn==="[")br=!0;else if(rn==="]"&&br)br=!1;else if(rn==="/"&&!br)break;sr=rn==="\\"}++this.pos}var dn=this.input.slice(Ur,this.pos);++this.pos;var Rn=this.pos,Nn=this.readWord1();this.containsEsc&&this.unexpected(Rn);var Zn=this.regexpState||(this.regexpState=new Ls(this));Zn.reset(Ur,dn,Nn),this.validateRegExpFlags(Zn),this.validateRegExpPattern(Zn);var rs=null;try{rs=new RegExp(dn,Nn)}catch{}return this.finishToken(ir.regexp,{pattern:dn,flags:Nn,value:rs})},Ps.readInt=function(sr,br,Ur){for(var rn=this.options.ecmaVersion>=12&&br===void 0,dn=Ur&&this.input.charCodeAt(this.pos)===48,Rn=this.pos,Nn=0,Zn=0,rs=0,Ts=br??1/0;rs<Ts;++rs,++this.pos){var As=this.input.charCodeAt(this.pos),co=void 0;if(rn&&As===95){dn&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Zn===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),rs===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Zn=As;continue}if(As>=97?co=As-97+10:As>=65?co=As-65+10:As>=48&&As<=57?co=As-48:co=1/0,co>=sr)break;Zn=As,Nn=Nn*sr+co}return rn&&Zn===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===Rn||br!=null&&this.pos-Rn!==br?null:Nn};function cu(sr,br){return br?parseInt(sr,8):parseFloat(sr.replace(/_/g,""))}function Jo(sr){return typeof BigInt!="function"?null:BigInt(sr.replace(/_/g,""))}Ps.readRadixNumber=function(sr){var br=this.pos;this.pos+=2;var Ur=this.readInt(sr);return Ur==null&&this.raise(this.start+2,"Expected number in radix "+sr),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(Ur=Jo(this.input.slice(br,this.pos)),++this.pos):Bt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ir.num,Ur)},Ps.readNumber=function(sr){var br=this.pos;!sr&&this.readInt(10,void 0,!0)===null&&this.raise(br,"Invalid number");var Ur=this.pos-br>=2&&this.input.charCodeAt(br)===48;Ur&&this.strict&&this.raise(br,"Invalid number");var rn=this.input.charCodeAt(this.pos);if(!Ur&&!sr&&this.options.ecmaVersion>=11&&rn===110){var dn=Jo(this.input.slice(br,this.pos));return++this.pos,Bt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ir.num,dn)}Ur&&/[89]/.test(this.input.slice(br,this.pos))&&(Ur=!1),rn===46&&!Ur&&(++this.pos,this.readInt(10),rn=this.input.charCodeAt(this.pos)),(rn===69||rn===101)&&!Ur&&(rn=this.input.charCodeAt(++this.pos),(rn===43||rn===45)&&++this.pos,this.readInt(10)===null&&this.raise(br,"Invalid number")),Bt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var Rn=cu(this.input.slice(br,this.pos),Ur);return this.finishToken(ir.num,Rn)},Ps.readCodePoint=function(){var sr=this.input.charCodeAt(this.pos),br;if(sr===123){this.options.ecmaVersion<6&&this.unexpected();var Ur=++this.pos;br=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,br>1114111&&this.invalidStringToken(Ur,"Code point out of bounds")}else br=this.readHexChar(4);return br},Ps.readString=function(sr){for(var br="",Ur=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var rn=this.input.charCodeAt(this.pos);if(rn===sr)break;rn===92?(br+=this.input.slice(Ur,this.pos),br+=this.readEscapedChar(!1),Ur=this.pos):rn===8232||rn===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(vr(rn)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return br+=this.input.slice(Ur,this.pos++),this.finishToken(ir.string,br)};var tu={};Ps.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(sr){if(sr===tu)this.readInvalidTemplateToken();else throw sr}this.inTemplateElement=!1},Ps.invalidStringToken=function(sr,br){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw tu;this.raise(sr,br)},Ps.readTmplToken=function(){for(var sr="",br=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var Ur=this.input.charCodeAt(this.pos);if(Ur===96||Ur===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===ir.template||this.type===ir.invalidTemplate)?Ur===36?(this.pos+=2,this.finishToken(ir.dollarBraceL)):(++this.pos,this.finishToken(ir.backQuote)):(sr+=this.input.slice(br,this.pos),this.finishToken(ir.template,sr));if(Ur===92)sr+=this.input.slice(br,this.pos),sr+=this.readEscapedChar(!0),br=this.pos;else if(vr(Ur)){switch(sr+=this.input.slice(br,this.pos),++this.pos,Ur){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:sr+=`
`;break;default:sr+=String.fromCharCode(Ur);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),br=this.pos}else++this.pos}},Ps.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(ir.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Ps.readEscapedChar=function(sr){var br=this.input.charCodeAt(++this.pos);switch(++this.pos,br){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Dr(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),sr){var Ur=this.pos-1;this.invalidStringToken(Ur,"Invalid escape sequence in template string")}default:if(br>=48&&br<=55){var rn=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],dn=parseInt(rn,8);return dn>255&&(rn=rn.slice(0,-1),dn=parseInt(rn,8)),this.pos+=rn.length-1,br=this.input.charCodeAt(this.pos),(rn!=="0"||br===56||br===57)&&(this.strict||sr)&&this.invalidStringToken(this.pos-1-rn.length,sr?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(dn)}return vr(br)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(br)}},Ps.readHexChar=function(sr){var br=this.pos,Ur=this.readInt(16,sr);return Ur===null&&this.invalidStringToken(br,"Bad character escape sequence"),Ur},Ps.readWord1=function(){this.containsEsc=!1;for(var sr="",br=!0,Ur=this.pos,rn=this.options.ecmaVersion>=6;this.pos<this.input.length;){var dn=this.fullCharCodeAtPos();if(zt(dn,rn))this.pos+=dn<=65535?1:2;else if(dn===92){this.containsEsc=!0,sr+=this.input.slice(Ur,this.pos);var Rn=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Nn=this.readCodePoint();(br?Bt:zt)(Nn,rn)||this.invalidStringToken(Rn,"Invalid Unicode escape"),sr+=Dr(Nn),Ur=this.pos}else break;br=!1}return sr+this.input.slice(Ur,this.pos)},Ps.readWord=function(){var sr=this.readWord1(),br=ir.name;return this.keywords.test(sr)&&(br=er[sr]),this.finishToken(br,sr)};var Pl="8.14.0";$t.acorn={Parser:$t,version:Pl,defaultOptions:an,Position:Lr,SourceLocation:qr,getLineInfo:sn,Node:hn,TokenType:Ht,tokTypes:ir,keywordTypes:er,TokContext:Kr,tokContexts:Yr,isIdentifierChar:zt,isIdentifierStart:Bt,Token:Ul,isNewLine:vr,lineBreak:lr,lineBreakG:cr,nonASCIIwhitespace:yr};function hu(sr,br){return $t.parse(sr,br)}function Lv(sr,br,Ur){return $t.parseExpressionAt(sr,br,Ur)}function Tm(sr,br){return $t.tokenizer(sr,br)}et.Node=hn,et.Parser=$t,et.Position=Lr,et.SourceLocation=qr,et.TokContext=Kr,et.Token=Ul,et.TokenType=Ht,et.defaultOptions=an,et.getLineInfo=sn,et.isIdentifierChar=zt,et.isIdentifierStart=Bt,et.isNewLine=vr,et.keywordTypes=er,et.lineBreak=lr,et.lineBreakG=cr,et.nonASCIIwhitespace=yr,et.parse=hu,et.parseExpressionAt=Lv,et.tokContexts=Yr,et.tokTypes=ir,et.tokenizer=Tm,et.version=Pl})}(acorn,acorn.exports)),acorn.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */(function(it){(function(g,et){g=g||require$$2;var ot=g.window,ut=g.document,ct=new function(){var $t=/^(statics|enumerable|beans|preserve)$/,Zt=[],or=Zt.slice,ur=Object.create,dr=Object.getOwnPropertyDescriptor,gr=Object.defineProperty,Ar=Zt.forEach||function($r,Br){for(var en=0,Kr=this.length;en<Kr;en++)$r.call(Br,this[en],en,this)},_r=function($r,Br){for(var en in this)this.hasOwnProperty(en)&&$r.call(Br,this[en],en,this)},Nr=Object.assign||function($r){for(var Br=1,en=arguments.length;Br<en;Br++){var Kr=arguments[Br];for(var Yr in Kr)Kr.hasOwnProperty(Yr)&&($r[Yr]=Kr[Yr])}return $r},Fr=function($r,Br,en){if($r){var Kr=dr($r,"length");(Kr&&typeof Kr.value=="number"?Ar:_r).call($r,Br,en=en||$r)}return en};function Vr($r,Br,en,Kr,Yr){var zr={};function Wr(Zr,on){on=on||(on=dr(Br,Zr))&&(on.get?on:on.value),typeof on=="string"&&on[0]==="#"&&(on=$r[on.substring(1)]||on);var hn=typeof on=="function",fn=on,xn=Yr||hn&&!on.base?on&&on.get?Zr in $r:$r[Zr]:null,cn;(!Yr||!xn)&&(hn&&xn&&(on.base=xn),hn&&Kr!==!1&&(cn=Zr.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(zr[cn[3].toLowerCase()+cn[4]]=cn[2]),(!fn||hn||!fn.get||typeof fn.get!="function"||!Hr.isPlainObject(fn))&&(fn={value:fn,writable:!0}),(dr($r,Zr)||{configurable:!0}).configurable&&(fn.configurable=!0,fn.enumerable=en??!cn),gr($r,Zr,fn))}if(Br){for(var jr in Br)Br.hasOwnProperty(jr)&&!$t.test(jr)&&Wr(jr);for(var jr in zr){var Xr=zr[jr],Jr=$r["set"+Xr],nn=$r["get"+Xr]||Jr&&$r["is"+Xr];nn&&(Kr===!0||nn.length===0)&&Wr(jr,{get:nn,set:Jr})}}return $r}function Hr(){for(var $r=0,Br=arguments.length;$r<Br;$r++){var en=arguments[$r];en&&Nr(this,en)}return this}return Vr(Hr,{inject:function($r){if($r){var Br=$r.statics===!0?$r:$r.statics,en=$r.beans,Kr=$r.preserve;Br!==$r&&Vr(this.prototype,$r,$r.enumerable,en,Kr),Vr(this,Br,null,en,Kr)}for(var Yr=1,zr=arguments.length;Yr<zr;Yr++)this.inject(arguments[Yr]);return this},extend:function(){for(var $r=this,Br,en,Kr=0,Yr,zr=arguments.length;Kr<zr&&!(Br&&en);Kr++)Yr=arguments[Kr],Br=Br||Yr.initialize,en=en||Yr.prototype;return Br=Br||function(){$r.apply(this,arguments)},en=Br.prototype=en||ur(this.prototype),gr(en,"constructor",{value:Br,writable:!0,configurable:!0}),Vr(Br,this),arguments.length&&this.inject.apply(Br,arguments),Br.base=$r,Br}}).inject({enumerable:!1,initialize:Hr,set:Hr,inject:function(){for(var $r=0,Br=arguments.length;$r<Br;$r++){var en=arguments[$r];en&&Vr(this,en,en.enumerable,en.beans,en.preserve)}return this},extend:function(){var $r=ur(this);return $r.inject.apply($r,arguments)},each:function($r,Br){return Fr(this,$r,Br)},clone:function(){return new this.constructor(this)},statics:{set:Nr,each:Fr,create:ur,define:gr,describe:dr,clone:function($r){return Nr(new $r.constructor,$r)},isPlainObject:function($r){var Br=$r!=null&&$r.constructor;return Br&&(Br===Object||Br===Hr||Br.name==="Object")},pick:function($r,Br){return $r!==et?$r:Br},slice:function($r,Br,en){return or.call($r,Br,en)}}})};it.exports=ct,ct.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+ct.each(this,function($t,Zt){if(!/^_/.test(Zt)){var or=typeof $t;this.push(Zt+": "+(or==="number"?Tt.instance.number($t):or==="string"?"'"+$t+"'":$t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function($t){return ct.importJSON($t,this)},exportJSON:function($t){return ct.exportJSON(this,$t)},toJSON:function(){return ct.serialize(this)},set:function($t,Zt){return $t&&ct.filter(this,$t,Zt,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function $t(){var Zt=$t.base.apply(this,arguments),or=Zt.prototype._class;return or&&!ct.exports[or]&&(ct.exports[or]=Zt),Zt},equals:function($t,Zt){if($t===Zt)return!0;if($t&&$t.equals)return $t.equals(Zt);if(Zt&&Zt.equals)return Zt.equals($t);if($t&&Zt&&typeof $t=="object"&&typeof Zt=="object"){if(Array.isArray($t)&&Array.isArray(Zt)){var or=$t.length;if(or!==Zt.length)return!1;for(;or--;)if(!ct.equals($t[or],Zt[or]))return!1}else{var ur=Object.keys($t),or=ur.length;if(or!==Object.keys(Zt).length)return!1;for(;or--;){var dr=ur[or];if(!(Zt.hasOwnProperty(dr)&&ct.equals($t[dr],Zt[dr])))return!1}}return!0}return!1},read:function($t,Zt,or,ur){if(this===ct){var dr=this.peek($t,Zt);return $t.__index++,dr}var gr=this.prototype,Ar=gr._readIndex,_r=Zt||Ar&&$t.__index||0,Nr=$t.length,Fr=$t[_r];if(ur=ur||Nr-_r,Fr instanceof this||or&&or.readNull&&Fr==null&&ur<=1)return Ar&&($t.__index=_r+1),Fr&&or&&or.clone?Fr.clone():Fr;if(Fr=ct.create(gr),Ar&&(Fr.__read=!0),Fr=Fr.initialize.apply(Fr,_r>0||_r+ur<Nr?ct.slice($t,_r,_r+ur):$t)||Fr,Ar){$t.__index=_r+Fr.__read;var Vr=Fr.__filtered;Vr&&($t.__filtered=Vr,Fr.__filtered=et),Fr.__read=et}return Fr},peek:function($t,Zt){return $t[$t.__index=Zt||$t.__index||0]},remain:function($t){return $t.length-($t.__index||0)},readList:function($t,Zt,or,ur){for(var dr=[],gr,Ar=Zt||0,_r=ur?Ar+ur:$t.length,Nr=Ar;Nr<_r;Nr++)dr.push(Array.isArray(gr=$t[Nr])?this.read(gr,0,or):this.read($t,Nr,or,1));return dr},readNamed:function($t,Zt,or,ur,dr){var gr=this.getNamed($t,Zt),Ar=gr!==et;if(Ar){var _r=$t.__filtered;if(!_r){var Nr=this.getSource($t);_r=$t.__filtered=ct.create(Nr),_r.__unfiltered=Nr}_r[Zt]=et}return this.read(Ar?[gr]:$t,or,ur,dr)},readSupported:function($t,Zt){var or=this.getSource($t),ur=this,dr=!1;return or&&Object.keys(or).forEach(function(gr){if(gr in Zt){var Ar=ur.readNamed($t,gr);Ar!==et&&(Zt[gr]=Ar),dr=!0}}),dr},getSource:function($t){var Zt=$t.__source;if(Zt===et){var or=$t.length===1&&$t[0];Zt=$t.__source=or&&ct.isPlainObject(or)?or:null}return Zt},getNamed:function($t,Zt){var or=this.getSource($t);if(or)return Zt?or[Zt]:$t.__filtered||or},hasNamed:function($t,Zt){return!!this.getNamed($t,Zt)},filter:function($t,Zt,or,ur){var dr;function gr(Vr){if(!(or&&Vr in or)&&!(dr&&Vr in dr)){var Hr=Zt[Vr];Hr!==et&&($t[Vr]=Hr)}}if(ur){for(var Ar={},_r=0,Nr,Fr=ur.length;_r<Fr;_r++)(Nr=ur[_r])in Zt&&(gr(Nr),Ar[Nr]=!0);dr=Ar}return Object.keys(Zt.__unfiltered||Zt).forEach(gr),$t},isPlainValue:function($t,Zt){return ct.isPlainObject($t)||Array.isArray($t)||Zt&&typeof $t=="string"},serialize:function($t,Zt,or,ur){Zt=Zt||{};var dr=!ur,gr;if(dr&&(Zt.formatter=new Tt(Zt.precision),ur={length:0,definitions:{},references:{},add:function(Hr,$r){var Br="#"+Hr._id,en=this.references[Br];if(!en){this.length++;var Kr=$r.call(Hr),Yr=Hr._class;Yr&&Kr[0]!==Yr&&Kr.unshift(Yr),this.definitions[Br]=Kr,en=this.references[Br]=[Br]}return en}}),$t&&$t._serialize){gr=$t._serialize(Zt,ur);var Ar=$t._class;Ar&&!$t._compactSerialize&&(dr||!or)&&gr[0]!==Ar&&gr.unshift(Ar)}else if(Array.isArray($t)){gr=[];for(var _r=0,Nr=$t.length;_r<Nr;_r++)gr[_r]=ct.serialize($t[_r],Zt,or,ur)}else if(ct.isPlainObject($t)){gr={};for(var Fr=Object.keys($t),_r=0,Nr=Fr.length;_r<Nr;_r++){var Vr=Fr[_r];gr[Vr]=ct.serialize($t[Vr],Zt,or,ur)}}else typeof $t=="number"?gr=Zt.formatter.number($t,Zt.precision):gr=$t;return dr&&ur.length>0?[["dictionary",ur.definitions],gr]:gr},deserialize:function($t,Zt,or,ur,dr){var gr=$t,Ar=!or,_r=Ar&&$t&&$t.length&&$t[0][0]==="dictionary";if(or=or||{},Array.isArray($t)){var Nr=$t[0],Fr=Nr==="dictionary";if($t.length==1&&/^#/.test(Nr))return or.dictionary[Nr];Nr=ct.exports[Nr],gr=[];for(var Vr=Nr?1:0,Hr=$t.length;Vr<Hr;Vr++)gr.push(ct.deserialize($t[Vr],Zt,or,Fr,_r));if(Nr){var $r=gr;Zt?gr=Zt(Nr,$r,Ar||dr):gr=new Nr($r)}}else if(ct.isPlainObject($t)){gr={},ur&&(or.dictionary=gr);for(var Br in $t)gr[Br]=ct.deserialize($t[Br],Zt,or)}return _r?gr[1]:gr},exportJSON:function($t,Zt){var or=ct.serialize($t,Zt);return Zt&&Zt.asString==!1?or:JSON.stringify(or)},importJSON:function($t,Zt){return ct.deserialize(typeof $t=="string"?JSON.parse($t):$t,function(or,ur,dr){var gr=dr&&Zt&&Zt.constructor===or,Ar=gr?Zt:ct.create(or.prototype);if(ur.length===1&&Ar instanceof ir&&(gr||!(Ar instanceof cr))){var _r=ur[0];ct.isPlainObject(_r)&&(_r.insert=!1,gr&&(ur=ur.concat([ir.INSERT])))}return(gr?Ar.set:or).apply(Ar,ur),gr&&(Zt=null),Ar})},push:function($t,Zt){var or=Zt.length;if(or<4096)$t.push.apply($t,Zt);else{var ur=$t.length;$t.length+=or;for(var dr=0;dr<or;dr++)$t[ur+dr]=Zt[dr]}return $t},splice:function($t,Zt,or,ur){var dr=Zt&&Zt.length,gr=or===et;or=gr?$t.length:or,or>$t.length&&(or=$t.length);for(var Ar=0;Ar<dr;Ar++)Zt[Ar]._index=or+Ar;if(gr)return ct.push($t,Zt),[];var _r=[or,ur];Zt&&ct.push(_r,Zt);for(var Nr=$t.splice.apply($t,_r),Ar=0,Fr=Nr.length;Ar<Fr;Ar++)Nr[Ar]._index=et;for(var Ar=or+dr,Fr=$t.length;Ar<Fr;Ar++)$t[Ar]._index=Ar;return Nr},capitalize:function($t){return $t.replace(/\b[a-z]/g,function(Zt){return Zt.toUpperCase()})},camelize:function($t){return $t.replace(/-(.)/g,function(Zt,or){return or.toUpperCase()})},hyphenate:function($t){return $t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var dt={on:function($t,Zt){if(typeof $t!="string")ct.each($t,function(gr,Ar){this.on(Ar,gr)},this);else{var or=this._eventTypes,ur=or&&or[$t],dr=this._callbacks=this._callbacks||{};dr=dr[$t]=dr[$t]||[],dr.indexOf(Zt)===-1&&(dr.push(Zt),ur&&ur.install&&dr.length===1&&ur.install.call(this,$t))}return this},off:function($t,Zt){if(typeof $t!="string"){ct.each($t,function(Ar,_r){this.off(_r,Ar)},this);return}var or=this._eventTypes,ur=or&&or[$t],dr=this._callbacks&&this._callbacks[$t],gr;return dr&&(!Zt||(gr=dr.indexOf(Zt))!==-1&&dr.length===1?(ur&&ur.uninstall&&ur.uninstall.call(this,$t),delete this._callbacks[$t]):gr!==-1&&dr.splice(gr,1)),this},once:function($t,Zt){return this.on($t,function or(){Zt.apply(this,arguments),this.off($t,or)})},emit:function($t,Zt){var or=this._callbacks&&this._callbacks[$t];if(!or)return!1;var ur=ct.slice(arguments,1),dr=Zt&&Zt.target&&!Zt.currentTarget;or=or.slice(),dr&&(Zt.currentTarget=this);for(var gr=0,Ar=or.length;gr<Ar;gr++)if(or[gr].apply(this,ur)==!1){Zt&&Zt.stop&&Zt.stop();break}return dr&&delete Zt.currentTarget,!0},responds:function($t){return!!(this._callbacks&&this._callbacks[$t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function($t){var Zt=this._eventTypes,or=this._callbacks,ur=$t?"install":"uninstall";if(Zt){for(var dr in or)if(or[dr].length>0){var gr=Zt[dr],Ar=gr&&gr[ur];Ar&&Ar.call(this,dr)}}},statics:{inject:function $t(Zt){var or=Zt._events;if(or){var ur={};ct.each(or,function(dr,gr){var Ar=typeof dr=="string",_r=Ar?dr:gr,Nr=ct.capitalize(_r),Fr=_r.substring(2).toLowerCase();ur[Fr]=Ar?{}:dr,_r="_"+_r,Zt["get"+Nr]=function(){return this[_r]},Zt["set"+Nr]=function(Vr){var Hr=this[_r];Hr&&this.off(Fr,Hr),Vr&&this.on(Fr,Vr),this[_r]=Vr}}),Zt._eventTypes=ur}return $t.base.apply(this,arguments)}}},ft=ct.extend({_class:"PaperScope",initialize:function $t(){Bn=this,this.settings=new ct({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=$t._id++,$t._scopes[this._id]=this;var Zt=$t.prototype;if(!this.support){var or=Tn.getContext(1,1)||{};Zt.support={nativeDash:"setLineDash"in or||"mozDash"in or,nativeBlendModes:An.nativeModes},Tn.release(or)}if(!this.agent){var ur=g.navigator.userAgent.toLowerCase(),dr=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(ur)||[])[0],gr=dr==="darwin"?"mac":dr,Ar=Zt.agent=Zt.browser={platform:gr};gr&&(Ar[gr]=!0),ur.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(_r,Nr,Fr,Vr,Hr){if(!Ar.chrome){var $r=Nr==="opera"?Vr:/^(node|trident)$/.test(Nr)?Hr:Fr;Ar.version=$r,Ar.versionNumber=parseFloat($r),Nr={trident:"msie",jsdom:"node"}[Nr]||Nr,Ar.name=Nr,Ar[Nr]=!0}}),Ar.chrome&&delete Ar.webkit,Ar.atom&&delete Ar.chrome}},version:"0.12.18",getView:function(){var $t=this.project;return $t&&$t._view},getPaper:function(){return this},execute:function($t,Zt){var or=Bn.PaperScript.execute($t,this,Zt);return On.updateFocus(),or},install:function($t){var Zt=this;ct.each(["project","view","tool"],function(ur){ct.define($t,ur,{configurable:!0,get:function(){return Zt[ur]}})});for(var or in this)!/^_/.test(or)&&this[or]&&($t[or]=this[or])},setup:function($t){return Bn=this,this.project=new ar($t),this},createCanvas:function($t,Zt){return Tn.getCanvas($t,Zt)},activate:function(){Bn=this},clear:function(){for(var $t=this.projects,Zt=this.tools,or=$t.length-1;or>=0;or--)$t[or].remove();for(var or=Zt.length-1;or>=0;or--)Zt[or].remove()},remove:function(){this.clear(),delete ft._scopes[this._id]},statics:new function(){function $t(Zt){return Zt+="Attribute",function(or,ur){return or[Zt](ur)||or[Zt]("data-paper-"+ur)}}return{_scopes:{},_id:0,get:function(Zt){return this._scopes[Zt]||null},getAttribute:$t("get"),hasAttribute:$t("has")}}}),St=ct.extend(dt,{initialize:function($t){this._scope=Bn,this._index=this._scope[this._list].push(this)-1,($t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var $t=this._scope[this._reference];return $t&&$t!==this&&$t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",$t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(ct.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),kt={findItemBoundsCollisions:function($t,Zt,or){function ur(Ar){for(var _r=new Array(Ar.length),Nr=0;Nr<Ar.length;Nr++){var Fr=Ar[Nr].getBounds();_r[Nr]=[Fr.left,Fr.top,Fr.right,Fr.bottom]}return _r}var dr=ur($t),gr=!Zt||Zt===$t?dr:ur(Zt);return this.findBoundsCollisions(dr,gr,or||0)},findCurveBoundsCollisions:function($t,Zt,or,ur){function dr($r){for(var Br=Math.min,en=Math.max,Kr=new Array($r.length),Yr=0;Yr<$r.length;Yr++){var zr=$r[Yr];Kr[Yr]=[Br(zr[0],zr[2],zr[4],zr[6]),Br(zr[1],zr[3],zr[5],zr[7]),en(zr[0],zr[2],zr[4],zr[6]),en(zr[1],zr[3],zr[5],zr[7])]}return Kr}var gr=dr($t),Ar=!Zt||Zt===$t?gr:dr(Zt);if(ur){for(var _r=this.findBoundsCollisions(gr,Ar,or||0,!1,!0),Nr=this.findBoundsCollisions(gr,Ar,or||0,!0,!0),Fr=[],Vr=0,Hr=_r.length;Vr<Hr;Vr++)Fr[Vr]={hor:_r[Vr],ver:Nr[Vr]};return Fr}return this.findBoundsCollisions(gr,Ar,or||0)},findBoundsCollisions:function($t,Zt,or,ur,dr){var gr=!Zt||$t===Zt,Ar=gr?$t:$t.concat(Zt),_r=$t.length,Nr=Ar.length;function Fr(Yn,Qn,ss){for(var zn=0,Gn=Yn.length;zn<Gn;){var es=Gn+zn>>>1;Ar[Yn[es]][Qn]<ss?zn=es+1:Gn=es}return zn-1}for(var Vr=ur?1:0,Hr=Vr+2,$r=ur?0:1,Br=$r+2,en=new Array(Nr),Kr=0;Kr<Nr;Kr++)en[Kr]=Kr;en.sort(function(Yn,Qn){return Ar[Yn][Vr]-Ar[Qn][Vr]});for(var Yr=[],zr=new Array(_r),Kr=0;Kr<Nr;Kr++){var Wr=en[Kr],jr=Ar[Wr],Xr=gr?Wr:Wr-_r,Jr=Wr<_r,nn=gr||!Jr,Zr=Jr?[]:null;if(Yr.length){var on=Fr(Yr,Hr,jr[Vr]-or)+1;if(Yr.splice(0,on),gr&&dr){Zr=Zr.concat(Yr);for(var hn=0;hn<Yr.length;hn++){var fn=Yr[hn];zr[fn].push(Xr)}}else for(var xn=jr[Br],cn=jr[$r],hn=0;hn<Yr.length;hn++){var fn=Yr[hn],vn=Ar[fn],bn=fn<_r,_n=gr||fn>=_r;(dr||(Jr&&_n||nn&&bn)&&xn>=vn[$r]-or&&cn<=vn[Br]+or)&&(Jr&&_n&&Zr.push(gr?fn:fn-_r),nn&&bn&&zr[fn].push(Xr))}}if(Jr&&($t===Zt&&Zr.push(Wr),zr[Wr]=Zr),Yr.length){var Cn=jr[Hr],Fn=Fr(Yr,Hr,Cn);Yr.splice(Fn+1,0,Wr)}else Yr.push(Wr)}for(var Kr=0;Kr<zr.length;Kr++){var Wn=zr[Kr];Wn&&Wn.sort(function(Qn,ss){return Qn-ss})}return zr}},Tt=ct.extend({initialize:function($t){this.precision=ct.pick($t,5),this.multiplier=Math.pow(10,this.precision)},number:function($t){return this.precision<16?Math.round($t*this.multiplier)/this.multiplier:$t},pair:function($t,Zt,or){return this.number($t)+(or||",")+this.number(Zt)},point:function($t,Zt){return this.number($t.x)+(Zt||",")+this.number($t.y)},size:function($t,Zt){return this.number($t.width)+(Zt||",")+this.number($t.height)},rectangle:function($t,Zt){return this.point($t,Zt)+(Zt||",")+this.size($t,Zt)}});Tt.instance=new Tt;var Rt=new function(){var $t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],Zt=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],or=Math.abs,ur=Math.sqrt,dr=Math.pow,gr=Math.log2||function(Hr){return Math.log(Hr)*Math.LOG2E},Ar=1e-12,_r=112e-18;function Nr(Hr,$r,Br){return Hr<$r?$r:Hr>Br?Br:Hr}function Fr(Hr,$r,Br){function en(on){var hn=on*134217729,fn=on-hn,xn=fn+hn,cn=on-xn;return[xn,cn]}var Kr=$r*$r-Hr*Br,Yr=$r*$r+Hr*Br;if(or(Kr)*3<Yr){var zr=en(Hr),Wr=en($r),jr=en(Br),Xr=$r*$r,Jr=Wr[0]*Wr[0]-Xr+2*Wr[0]*Wr[1]+Wr[1]*Wr[1],nn=Hr*Br,Zr=zr[0]*jr[0]-nn+zr[0]*jr[1]+zr[1]*jr[0]+zr[1]*jr[1];Kr=Xr-nn+(Jr-Zr)}return Kr}function Vr(){var Hr=Math.max.apply(Math,arguments);return Hr&&(Hr<1e-8||Hr>1e8)?dr(2,-Math.round(gr(Hr))):0}return{EPSILON:Ar,MACHINE_EPSILON:_r,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(ur(2)-1)/3,isZero:function(Hr){return Hr>=-Ar&&Hr<=Ar},isMachineZero:function(Hr){return Hr>=-_r&&Hr<=_r},clamp:Nr,integrate:function(Hr,$r,Br,en){for(var Kr=$t[en-2],Yr=Zt[en-2],zr=(Br-$r)*.5,Wr=zr+$r,jr=0,Xr=en+1>>1,Jr=en&1?Yr[jr++]*Hr(Wr):0;jr<Xr;){var nn=zr*Kr[jr];Jr+=Yr[jr++]*(Hr(Wr+nn)+Hr(Wr-nn))}return zr*Jr},findRoot:function(Hr,$r,Br,en,Kr,Yr,zr){for(var Wr=0;Wr<Yr;Wr++){var jr=Hr(Br),Xr=jr/$r(Br),Jr=Br-Xr;if(or(Xr)<zr){Br=Jr;break}jr>0?(Kr=Br,Br=Jr<=en?(en+Kr)*.5:Jr):(en=Br,Br=Jr>=Kr?(en+Kr)*.5:Jr)}return Nr(Br,en,Kr)},solveQuadratic:function(Hr,$r,Br,en,Kr,Yr){var zr,Wr=1/0;if(or(Hr)<Ar){if(or($r)<Ar)return or(Br)<Ar?-1:0;zr=-Br/$r}else{$r*=-.5;var jr=Fr(Hr,$r,Br);if(jr&&or(jr)<_r){var Xr=Vr(or(Hr),or($r),or(Br));Xr&&(Hr*=Xr,$r*=Xr,Br*=Xr,jr=Fr(Hr,$r,Br))}if(jr>=-_r){var Jr=jr<0?0:ur(jr),nn=$r+($r<0?-Jr:Jr);nn===0?(zr=Br/Hr,Wr=-zr):(zr=nn/Hr,Wr=Br/nn)}}var Zr=0,on=Kr==null,hn=Kr-Ar,fn=Yr+Ar;return isFinite(zr)&&(on||zr>hn&&zr<fn)&&(en[Zr++]=on?zr:Nr(zr,Kr,Yr)),Wr!==zr&&isFinite(Wr)&&(on||Wr>hn&&Wr<fn)&&(en[Zr++]=on?Wr:Nr(Wr,Kr,Yr)),Zr},solveCubic:function(Hr,$r,Br,en,Kr,Yr,zr){var Wr=Vr(or(Hr),or($r),or(Br),or(en)),jr,Xr,Jr,nn,Zr;Wr&&(Hr*=Wr,$r*=Wr,Br*=Wr,en*=Wr);function on(Fn){jr=Fn;var Wn=Hr*jr;Xr=Wn+$r,Jr=Xr*jr+Br,nn=(Wn+Xr)*jr+Jr,Zr=Jr*jr+en}if(or(Hr)<Ar)Hr=$r,Xr=Br,Jr=en,jr=1/0;else if(or(en)<Ar)Xr=$r,Jr=Br,jr=0;else{on(-($r/Hr)/3);var hn=Zr/Hr,fn=dr(or(hn),1/3),xn=hn<0?-1:1,cn=-nn/Hr,vn=cn>0?1.324717957244746*Math.max(fn,ur(cn)):fn,bn=jr-xn*vn;if(bn!==jr){do on(bn),bn=nn===0?jr:jr-Zr/nn/(1+_r);while(xn*bn>xn*jr);or(Hr)*jr*jr>or(en/jr)&&(Jr=-en/jr,Xr=(Jr-Br)/jr)}}var _n=Rt.solveQuadratic(Hr,Xr,Jr,Kr,Yr,zr),Cn=Yr==null;return isFinite(jr)&&(_n===0||_n>0&&jr!==Kr[0]&&jr!==Kr[1])&&(Cn||jr>Yr-Ar&&jr<zr+Ar)&&(Kr[_n++]=Cn?jr:Nr(jr,Yr,zr)),_n}}},Ft={_id:1,_pools:{},get:function($t){if($t){var Zt=this._pools[$t];return Zt||(Zt=this._pools[$t]={_id:1}),Zt._id++}else return this._id++}},jt=ct.extend({_class:"Point",_readIndex:!0,initialize:function(Zt,or){var ur=typeof Zt,dr=this.__read,gr=0;if(ur==="number"){var Ar=typeof or=="number";this._set(Zt,Ar?or:Zt),dr&&(gr=Ar?2:1)}else if(ur==="undefined"||Zt===null)this._set(0,0),dr&&(gr=Zt===null?1:0);else{var _r=ur==="string"?Zt.split(/[\s,]+/)||[]:Zt;gr=1,Array.isArray(_r)?this._set(+_r[0],+(_r.length>1?_r[1]:_r[0])):"x"in _r?this._set(_r.x||0,_r.y||0):"width"in _r?this._set(_r.width||0,_r.height||0):"angle"in _r?(this._set(_r.length||0,0),this.setAngle(_r.angle||0)):(this._set(0,0),gr=0)}return dr&&(this.__read=gr),this},set:"#initialize",_set:function($t,Zt){return this.x=$t,this.y=Zt,this},equals:function($t){return this===$t||$t&&(this.x===$t.x&&this.y===$t.y||Array.isArray($t)&&this.x===$t[0]&&this.y===$t[1])||!1},clone:function(){return new jt(this.x,this.y)},toString:function(){var $t=Tt.instance;return"{ x: "+$t.number(this.x)+", y: "+$t.number(this.y)+" }"},_serialize:function($t){var Zt=$t.formatter;return[Zt.number(this.x),Zt.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function($t){if(this.isZero()){var Zt=this._angle||0;this._set(Math.cos(Zt)*$t,Math.sin(Zt)*$t)}else{var or=$t/this.getLength();Rt.isZero(or)&&this.getAngle(),this._set(this.x*or,this.y*or)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function($t){this.setAngleInRadians.call(this,$t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var $t=jt.read(arguments),Zt=this.getLength()*$t.getLength();if(Rt.isZero(Zt))return NaN;var or=this.dot($t)/Zt;return Math.acos(or<-1?-1:or>1?1:or)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function($t){if(this._angle=$t,!this.isZero()){var Zt=this.getLength();this._set(Math.cos($t)*Zt,Math.sin($t)*Zt)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var $t=jt.read(arguments);return Math.atan2(this.cross($t),this.dot($t))*180/Math.PI},getDistance:function(){var $t=arguments,Zt=jt.read($t),or=Zt.x-this.x,ur=Zt.y-this.y,dr=or*or+ur*ur,gr=ct.read($t);return gr?dr:Math.sqrt(dr)},normalize:function($t){$t===et&&($t=1);var Zt=this.getLength(),or=Zt!==0?$t/Zt:0,ur=new jt(this.x*or,this.y*or);return or>=0&&(ur._angle=this._angle),ur},rotate:function($t,Zt){if($t===0)return this.clone();$t=$t*Math.PI/180;var or=Zt?this.subtract(Zt):this,ur=Math.sin($t),dr=Math.cos($t);return or=new jt(or.x*dr-or.y*ur,or.x*ur+or.y*dr),Zt?or.add(Zt):or},transform:function($t){return $t?$t._transformPoint(this):this},add:function(){var $t=jt.read(arguments);return new jt(this.x+$t.x,this.y+$t.y)},subtract:function(){var $t=jt.read(arguments);return new jt(this.x-$t.x,this.y-$t.y)},multiply:function(){var $t=jt.read(arguments);return new jt(this.x*$t.x,this.y*$t.y)},divide:function(){var $t=jt.read(arguments);return new jt(this.x/$t.x,this.y/$t.y)},modulo:function(){var $t=jt.read(arguments);return new jt(this.x%$t.x,this.y%$t.y)},negate:function(){return new jt(-this.x,-this.y)},isInside:function(){return Ut.read(arguments).contains(this)},isClose:function(){var $t=arguments,Zt=jt.read($t),or=ct.read($t);return this.getDistance(Zt)<=or},isCollinear:function(){var $t=jt.read(arguments);return jt.isCollinear(this.x,this.y,$t.x,$t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var $t=jt.read(arguments);return jt.isOrthogonal(this.x,this.y,$t.x,$t.y)},isZero:function(){var $t=Rt.isZero;return $t(this.x)&&$t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function($t){return this.x*($t>1&&$t<4?-1:1)>=0&&this.y*($t>2?-1:1)>=0},dot:function(){var $t=jt.read(arguments);return this.x*$t.x+this.y*$t.y},cross:function(){var $t=jt.read(arguments);return this.x*$t.y-this.y*$t.x},project:function(){var $t=jt.read(arguments),Zt=$t.isZero()?0:this.dot($t)/$t.dot($t);return new jt($t.x*Zt,$t.y*Zt)},statics:{min:function(){var $t=arguments,Zt=jt.read($t),or=jt.read($t);return new jt(Math.min(Zt.x,or.x),Math.min(Zt.y,or.y))},max:function(){var $t=arguments,Zt=jt.read($t),or=jt.read($t);return new jt(Math.max(Zt.x,or.x),Math.max(Zt.y,or.y))},random:function(){return new jt(Math.random(),Math.random())},isCollinear:function($t,Zt,or,ur){return Math.abs($t*ur-Zt*or)<=Math.sqrt(($t*$t+Zt*Zt)*(or*or+ur*ur))*1e-8},isOrthogonal:function($t,Zt,or,ur){return Math.abs($t*or+Zt*ur)<=Math.sqrt(($t*$t+Zt*Zt)*(or*or+ur*ur))*1e-8}}},ct.each(["round","ceil","floor","abs"],function($t){var Zt=Math[$t];this[$t]=function(){return new jt(Zt(this.x),Zt(this.y))}},{})),Bt=jt.extend({initialize:function(Zt,or,ur,dr){this._x=Zt,this._y=or,this._owner=ur,this._setter=dr},_set:function($t,Zt,or){return this._x=$t,this._y=Zt,or||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function($t){this._x=$t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function($t){this._y=$t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function($t){this._owner._changeSelection(this._getSelection(),$t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),zt=ct.extend({_class:"Size",_readIndex:!0,initialize:function(Zt,or){var ur=typeof Zt,dr=this.__read,gr=0;if(ur==="number"){var Ar=typeof or=="number";this._set(Zt,Ar?or:Zt),dr&&(gr=Ar?2:1)}else if(ur==="undefined"||Zt===null)this._set(0,0),dr&&(gr=Zt===null?1:0);else{var _r=ur==="string"?Zt.split(/[\s,]+/)||[]:Zt;gr=1,Array.isArray(_r)?this._set(+_r[0],+(_r.length>1?_r[1]:_r[0])):"width"in _r?this._set(_r.width||0,_r.height||0):"x"in _r?this._set(_r.x||0,_r.y||0):(this._set(0,0),gr=0)}return dr&&(this.__read=gr),this},set:"#initialize",_set:function($t,Zt){return this.width=$t,this.height=Zt,this},equals:function($t){return $t===this||$t&&(this.width===$t.width&&this.height===$t.height||Array.isArray($t)&&this.width===$t[0]&&this.height===$t[1])||!1},clone:function(){return new zt(this.width,this.height)},toString:function(){var $t=Tt.instance;return"{ width: "+$t.number(this.width)+", height: "+$t.number(this.height)+" }"},_serialize:function($t){var Zt=$t.formatter;return[Zt.number(this.width),Zt.number(this.height)]},add:function(){var $t=zt.read(arguments);return new zt(this.width+$t.width,this.height+$t.height)},subtract:function(){var $t=zt.read(arguments);return new zt(this.width-$t.width,this.height-$t.height)},multiply:function(){var $t=zt.read(arguments);return new zt(this.width*$t.width,this.height*$t.height)},divide:function(){var $t=zt.read(arguments);return new zt(this.width/$t.width,this.height/$t.height)},modulo:function(){var $t=zt.read(arguments);return new zt(this.width%$t.width,this.height%$t.height)},negate:function(){return new zt(-this.width,-this.height)},isZero:function(){var $t=Rt.isZero;return $t(this.width)&&$t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function($t,Zt){return new zt(Math.min($t.width,Zt.width),Math.min($t.height,Zt.height))},max:function($t,Zt){return new zt(Math.max($t.width,Zt.width),Math.max($t.height,Zt.height))},random:function(){return new zt(Math.random(),Math.random())}}},ct.each(["round","ceil","floor","abs"],function($t){var Zt=Math[$t];this[$t]=function(){return new zt(Zt(this.width),Zt(this.height))}},{})),Ht=zt.extend({initialize:function(Zt,or,ur,dr){this._width=Zt,this._height=or,this._owner=ur,this._setter=dr},_set:function($t,Zt,or){return this._width=$t,this._height=Zt,or||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function($t){this._width=$t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function($t){this._height=$t,this._owner[this._setter](this)}}),Ut=ct.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(Zt,or,ur,dr){var gr=arguments,Ar=typeof Zt,_r;if(Ar==="number"?(this._set(Zt,or,ur,dr),_r=4):Ar==="undefined"||Zt===null?(this._set(0,0,0,0),_r=Zt===null?1:0):gr.length===1&&(Array.isArray(Zt)?(this._set.apply(this,Zt),_r=1):Zt.x!==et||Zt.width!==et?(this._set(Zt.x||0,Zt.y||0,Zt.width||0,Zt.height||0),_r=1):Zt.from===et&&Zt.to===et&&(this._set(0,0,0,0),ct.readSupported(gr,this)&&(_r=1))),_r===et){var Nr=jt.readNamed(gr,"from"),Fr=ct.peek(gr),Vr=Nr.x,Hr=Nr.y,$r,Br;if(Fr&&Fr.x!==et||ct.hasNamed(gr,"to")){var en=jt.readNamed(gr,"to");$r=en.x-Vr,Br=en.y-Hr,$r<0&&(Vr=en.x,$r=-$r),Br<0&&(Hr=en.y,Br=-Br)}else{var Kr=zt.read(gr);$r=Kr.width,Br=Kr.height}this._set(Vr,Hr,$r,Br),_r=gr.__index}var Yr=gr.__filtered;return Yr&&(this.__filtered=Yr),this.__read&&(this.__read=_r),this},set:"#initialize",_set:function($t,Zt,or,ur){return this.x=$t,this.y=Zt,this.width=or,this.height=ur,this},clone:function(){return new Ut(this.x,this.y,this.width,this.height)},equals:function($t){var Zt=ct.isPlainValue($t)?Ut.read(arguments):$t;return Zt===this||Zt&&this.x===Zt.x&&this.y===Zt.y&&this.width===Zt.width&&this.height===Zt.height||!1},toString:function(){var $t=Tt.instance;return"{ x: "+$t.number(this.x)+", y: "+$t.number(this.y)+", width: "+$t.number(this.width)+", height: "+$t.number(this.height)+" }"},_serialize:function($t){var Zt=$t.formatter;return[Zt.number(this.x),Zt.number(this.y),Zt.number(this.width),Zt.number(this.height)]},getPoint:function($t){var Zt=$t?jt:Bt;return new Zt(this.x,this.y,this,"setPoint")},setPoint:function(){var $t=jt.read(arguments);this.x=$t.x,this.y=$t.y},getSize:function($t){var Zt=$t?zt:Ht;return new Zt(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var $t=zt.read(arguments),Zt=this._sx,or=this._sy,ur=$t.width,dr=$t.height;Zt&&(this.x+=(this.width-ur)*Zt),or&&(this.y+=(this.height-dr)*or),this.width=ur,this.height=dr,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function($t){if(!this._fw){var Zt=$t-this.x;this.width-=this._sx===.5?Zt*2:Zt}this.x=$t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function($t){if(!this._fh){var Zt=$t-this.y;this.height-=this._sy===.5?Zt*2:Zt}this.y=$t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function($t){if(!this._fw){var Zt=$t-this.x;this.width=this._sx===.5?Zt*2:Zt}this.x=$t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function($t){if(!this._fh){var Zt=$t-this.y;this.height=this._sy===.5?Zt*2:Zt}this.y=$t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function($t){this._fw||this._sx===.5?this.x=$t-this.width/2:(this._sx&&(this.x+=($t-this.x)*2*this._sx),this.width=($t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function($t){this._fh||this._sy===.5?this.y=$t-this.height/2:(this._sy&&(this.y+=($t-this.y)*2*this._sy),this.height=($t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function($t){var Zt=$t?jt:Bt;return new Zt(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var $t=jt.read(arguments);return this.setCenterX($t.x),this.setCenterY($t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function($t){return $t&&$t.width!==et||(Array.isArray($t)?$t:arguments).length===4?this._containsRectangle(Ut.read(arguments)):this._containsPoint(jt.read(arguments))},_containsPoint:function($t){var Zt=$t.x,or=$t.y;return Zt>=this.x&&or>=this.y&&Zt<=this.x+this.width&&or<=this.y+this.height},_containsRectangle:function($t){var Zt=$t.x,or=$t.y;return Zt>=this.x&&or>=this.y&&Zt+$t.width<=this.x+this.width&&or+$t.height<=this.y+this.height},intersects:function(){var $t=Ut.read(arguments),Zt=ct.read(arguments)||0;return $t.x+$t.width>this.x-Zt&&$t.y+$t.height>this.y-Zt&&$t.x<this.x+this.width+Zt&&$t.y<this.y+this.height+Zt},intersect:function(){var $t=Ut.read(arguments),Zt=Math.max(this.x,$t.x),or=Math.max(this.y,$t.y),ur=Math.min(this.x+this.width,$t.x+$t.width),dr=Math.min(this.y+this.height,$t.y+$t.height);return new Ut(Zt,or,ur-Zt,dr-or)},unite:function(){var $t=Ut.read(arguments),Zt=Math.min(this.x,$t.x),or=Math.min(this.y,$t.y),ur=Math.max(this.x+this.width,$t.x+$t.width),dr=Math.max(this.y+this.height,$t.y+$t.height);return new Ut(Zt,or,ur-Zt,dr-or)},include:function(){var $t=jt.read(arguments),Zt=Math.min(this.x,$t.x),or=Math.min(this.y,$t.y),ur=Math.max(this.x+this.width,$t.x),dr=Math.max(this.y+this.height,$t.y);return new Ut(Zt,or,ur-Zt,dr-or)},expand:function(){var $t=zt.read(arguments),Zt=$t.width,or=$t.height;return new Ut(this.x-Zt/2,this.y-or/2,this.width+Zt,this.height+or)},scale:function($t,Zt){return this.expand(this.width*$t-this.width,this.height*(Zt===et?$t:Zt)-this.height)}},ct.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function($t,Zt){var or=$t.join(""),ur=/^[RL]/.test(or);Zt>=4&&($t[1]+=ur?"Y":"X");var dr=$t[ur?0:1],gr=$t[ur?1:0],Ar="get"+dr,_r="get"+gr,Nr="set"+dr,Fr="set"+gr,Vr="get"+or,Hr="set"+or;this[Vr]=function($r){var Br=$r?jt:Bt;return new Br(this[Ar](),this[_r](),this,Hr)},this[Hr]=function(){var $r=jt.read(arguments);this[Nr]($r.x),this[Fr]($r.y)}},{beans:!0})),Kt=Ut.extend({initialize:function(Zt,or,ur,dr,gr,Ar){this._set(Zt,or,ur,dr,!0),this._owner=gr,this._setter=Ar},_set:function($t,Zt,or,ur,dr){return this._x=$t,this._y=Zt,this._width=or,this._height=ur,dr||this._owner[this._setter](this),this}},new function(){var $t=Ut.prototype;return ct.each(["x","y","width","height"],function(Zt){var or=ct.capitalize(Zt),ur="_"+Zt;this["get"+or]=function(){return this[ur]},this["set"+or]=function(dr){this[ur]=dr,this._dontNotify||this._owner[this._setter](this)}},ct.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(Zt){var or="set"+Zt;this[or]=function(){this._dontNotify=!0,$t[or].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(Zt){var or=this._owner;or._changeSelection&&or._changeSelection(2,Zt)}}))}),Yt=ct.extend({_class:"Matrix",initialize:function $t(Zt,or){var ur=arguments,dr=ur.length,gr=!0;if(dr>=6?this._set.apply(this,ur):dr===1||dr===2?Zt instanceof $t?this._set(Zt._a,Zt._b,Zt._c,Zt._d,Zt._tx,Zt._ty,or):Array.isArray(Zt)?this._set.apply(this,or?Zt.concat([or]):Zt):gr=!1:dr?gr=!1:this.reset(),!gr)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function($t,Zt,or,ur,dr,gr,Ar){return this._a=$t,this._b=Zt,this._c=or,this._d=ur,this._tx=dr,this._ty=gr,Ar||this._changed(),this},_serialize:function($t,Zt){return ct.serialize(this.getValues(),$t,!0,Zt)},_changed:function(){var $t=this._owner;$t&&($t._applyMatrix?$t.transform(null,!0):$t._changed(25))},clone:function(){return new Yt(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function($t){return $t===this||$t&&this._a===$t._a&&this._b===$t._b&&this._c===$t._c&&this._d===$t._d&&this._tx===$t._tx&&this._ty===$t._ty},toString:function(){var $t=Tt.instance;return"[["+[$t.number(this._a),$t.number(this._c),$t.number(this._tx)].join(", ")+"], ["+[$t.number(this._b),$t.number(this._d),$t.number(this._ty)].join(", ")+"]]"},reset:function($t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,$t||this._changed(),this},apply:function($t,Zt){var or=this._owner;return or?(or.transform(null,ct.pick($t,!0),Zt),this.isIdentity()):!1},translate:function(){var $t=jt.read(arguments),Zt=$t.x,or=$t.y;return this._tx+=Zt*this._a+or*this._c,this._ty+=Zt*this._b+or*this._d,this._changed(),this},scale:function(){var $t=arguments,Zt=jt.read($t),or=jt.read($t,0,{readNull:!0});return or&&this.translate(or),this._a*=Zt.x,this._b*=Zt.x,this._c*=Zt.y,this._d*=Zt.y,or&&this.translate(or.negate()),this._changed(),this},rotate:function($t){$t*=Math.PI/180;var Zt=jt.read(arguments,1),or=Zt.x,ur=Zt.y,dr=Math.cos($t),gr=Math.sin($t),Ar=or-or*dr+ur*gr,_r=ur-or*gr-ur*dr,Nr=this._a,Fr=this._b,Vr=this._c,Hr=this._d;return this._a=dr*Nr+gr*Vr,this._b=dr*Fr+gr*Hr,this._c=-gr*Nr+dr*Vr,this._d=-gr*Fr+dr*Hr,this._tx+=Ar*Nr+_r*Vr,this._ty+=Ar*Fr+_r*Hr,this._changed(),this},shear:function(){var $t=arguments,Zt=jt.read($t),or=jt.read($t,0,{readNull:!0});or&&this.translate(or);var ur=this._a,dr=this._b;return this._a+=Zt.y*this._c,this._b+=Zt.y*this._d,this._c+=Zt.x*ur,this._d+=Zt.x*dr,or&&this.translate(or.negate()),this._changed(),this},skew:function(){var $t=arguments,Zt=jt.read($t),or=jt.read($t,0,{readNull:!0}),ur=Math.PI/180,dr=new jt(Math.tan(Zt.x*ur),Math.tan(Zt.y*ur));return this.shear(dr,or)},append:function($t,Zt){if($t){var or=this._a,ur=this._b,dr=this._c,gr=this._d,Ar=$t._a,_r=$t._c,Nr=$t._b,Fr=$t._d,Vr=$t._tx,Hr=$t._ty;this._a=Ar*or+Nr*dr,this._c=_r*or+Fr*dr,this._b=Ar*ur+Nr*gr,this._d=_r*ur+Fr*gr,this._tx+=Vr*or+Hr*dr,this._ty+=Vr*ur+Hr*gr,Zt||this._changed()}return this},prepend:function($t,Zt){if($t){var or=this._a,ur=this._b,dr=this._c,gr=this._d,Ar=this._tx,_r=this._ty,Nr=$t._a,Fr=$t._c,Vr=$t._b,Hr=$t._d,$r=$t._tx,Br=$t._ty;this._a=Nr*or+Fr*ur,this._c=Nr*dr+Fr*gr,this._b=Vr*or+Hr*ur,this._d=Vr*dr+Hr*gr,this._tx=Nr*Ar+Fr*_r+$r,this._ty=Vr*Ar+Hr*_r+Br,Zt||this._changed()}return this},appended:function($t){return this.clone().append($t)},prepended:function($t){return this.clone().prepend($t)},invert:function(){var $t=this._a,Zt=this._b,or=this._c,ur=this._d,dr=this._tx,gr=this._ty,Ar=$t*ur-Zt*or,_r=null;return Ar&&!isNaN(Ar)&&isFinite(dr)&&isFinite(gr)&&(this._a=ur/Ar,this._b=-Zt/Ar,this._c=-or/Ar,this._d=$t/Ar,this._tx=(or*gr-ur*dr)/Ar,this._ty=(Zt*dr-$t*gr)/Ar,_r=this),_r},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new Yt(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var $t=this._a*this._d-this._c*this._b;return $t&&!isNaN($t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function($t,Zt,or){return arguments.length<3?this._transformPoint(jt.read(arguments)):this._transformCoordinates($t,Zt,or)},_transformPoint:function($t,Zt,or){var ur=$t.x,dr=$t.y;return Zt||(Zt=new jt),Zt._set(ur*this._a+dr*this._c+this._tx,ur*this._b+dr*this._d+this._ty,or)},_transformCoordinates:function($t,Zt,or){for(var ur=0,dr=2*or;ur<dr;ur+=2){var gr=$t[ur],Ar=$t[ur+1];Zt[ur]=gr*this._a+Ar*this._c+this._tx,Zt[ur+1]=gr*this._b+Ar*this._d+this._ty}return Zt},_transformCorners:function($t){var Zt=$t.x,or=$t.y,ur=Zt+$t.width,dr=or+$t.height,gr=[Zt,or,ur,or,ur,dr,Zt,dr];return this._transformCoordinates(gr,gr,4)},_transformBounds:function($t,Zt,or){for(var ur=this._transformCorners($t),dr=ur.slice(0,2),gr=dr.slice(),Ar=2;Ar<8;Ar++){var _r=ur[Ar],Nr=Ar&1;_r<dr[Nr]?dr[Nr]=_r:_r>gr[Nr]&&(gr[Nr]=_r)}return Zt||(Zt=new Ut),Zt._set(dr[0],dr[1],gr[0]-dr[0],gr[1]-dr[1],or)},inverseTransform:function(){return this._inverseTransform(jt.read(arguments))},_inverseTransform:function($t,Zt,or){var ur=this._a,dr=this._b,gr=this._c,Ar=this._d,_r=this._tx,Nr=this._ty,Fr=ur*Ar-dr*gr,Vr=null;if(Fr&&!isNaN(Fr)&&isFinite(_r)&&isFinite(Nr)){var Hr=$t.x-this._tx,$r=$t.y-this._ty;Zt||(Zt=new jt),Vr=Zt._set((Hr*Ar-$r*gr)/Fr,($r*ur-Hr*dr)/Fr,or)}return Vr},decompose:function(){var $t=this._a,Zt=this._b,or=this._c,ur=this._d,dr=$t*ur-Zt*or,gr=Math.sqrt,Ar=Math.atan2,_r=180/Math.PI,Nr,Fr,Vr;if($t!==0||Zt!==0){var Hr=gr($t*$t+Zt*Zt);Nr=Math.acos($t/Hr)*(Zt>0?1:-1),Fr=[Hr,dr/Hr],Vr=[Ar($t*or+Zt*ur,Hr*Hr),0]}else if(or!==0||ur!==0){var $r=gr(or*or+ur*ur);Nr=Math.asin(or/$r)*(ur>0?1:-1),Fr=[dr/$r,$r],Vr=[0,Ar($t*or+Zt*ur,$r*$r)]}else Nr=0,Vr=Fr=[0,0];return{translation:this.getTranslation(),rotation:Nr*_r,scaling:new jt(Fr),skewing:new jt(Vr[0]*_r,Vr[1]*_r)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new jt(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function($t){this.isIdentity()||$t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},ct.each(["a","b","c","d","tx","ty"],function($t){var Zt=ct.capitalize($t),or="_"+$t;this["get"+Zt]=function(){return this[or]},this["set"+Zt]=function(ur){this[or]=ur,this._changed()}},{})),er=ct.extend({_class:"Line",initialize:function(Zt,or,ur,dr,gr){var Ar=!1;arguments.length>=4?(this._px=Zt,this._py=or,this._vx=ur,this._vy=dr,Ar=gr):(this._px=Zt.x,this._py=Zt.y,this._vx=or.x,this._vy=or.y,Ar=ur),Ar||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new jt(this._px,this._py)},getVector:function(){return new jt(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function($t,Zt){return er.intersect(this._px,this._py,this._vx,this._vy,$t._px,$t._py,$t._vx,$t._vy,!0,Zt)},getSide:function($t,Zt){return er.getSide(this._px,this._py,this._vx,this._vy,$t.x,$t.y,!0,Zt)},getDistance:function($t){return Math.abs(this.getSignedDistance($t))},getSignedDistance:function($t){return er.getSignedDistance(this._px,this._py,this._vx,this._vy,$t.x,$t.y,!0)},isCollinear:function($t){return jt.isCollinear(this._vx,this._vy,$t._vx,$t._vy)},isOrthogonal:function($t){return jt.isOrthogonal(this._vx,this._vy,$t._vx,$t._vy)},statics:{intersect:function($t,Zt,or,ur,dr,gr,Ar,_r,Nr,Fr){Nr||(or-=$t,ur-=Zt,Ar-=dr,_r-=gr);var Vr=or*_r-ur*Ar;if(!Rt.isMachineZero(Vr)){var Hr=$t-dr,$r=Zt-gr,Br=(Ar*$r-_r*Hr)/Vr,en=(or*$r-ur*Hr)/Vr,Kr=1e-12,Yr=-Kr,zr=1+Kr;if(Fr||Yr<Br&&Br<zr&&Yr<en&&en<zr)return Fr||(Br=Br<=0?0:Br>=1?1:Br),new jt($t+Br*or,Zt+Br*ur)}},getSide:function($t,Zt,or,ur,dr,gr,Ar,_r){Ar||(or-=$t,ur-=Zt);var Nr=dr-$t,Fr=gr-Zt,Vr=Nr*ur-Fr*or;return!_r&&Rt.isMachineZero(Vr)&&(Vr=(Nr*or+Nr*or)/(or*or+ur*ur),Vr>=0&&Vr<=1&&(Vr=0)),Vr<0?-1:Vr>0?1:0},getSignedDistance:function($t,Zt,or,ur,dr,gr,Ar){return Ar||(or-=$t,ur-=Zt),or===0?ur>0?dr-$t:$t-dr:ur===0?or<0?gr-Zt:Zt-gr:((dr-$t)*ur-(gr-Zt)*or)/(ur>or?ur*Math.sqrt(1+or*or/(ur*ur)):or*Math.sqrt(1+ur*ur/(or*or)))},getDistance:function($t,Zt,or,ur,dr,gr,Ar){return Math.abs(er.getSignedDistance($t,Zt,or,ur,dr,gr,Ar))}}}),ar=St.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(Zt){St.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new yn(null,null,this),this._view=On.create(this,Zt||Tn.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function($t,Zt){return ct.serialize(this._children,$t,!0,Zt)},_changed:function($t,Zt){if($t&1){var or=this._view;or&&(or._needsUpdate=!0,!or._requested&&or._autoUpdate&&or.requestUpdate())}var ur=this._changes;if(ur&&Zt){var dr=this._changesById,gr=Zt._id,Ar=dr[gr];Ar?Ar.flags|=$t:ur.push(dr[gr]={item:Zt,flags:$t})}},clear:function(){for(var $t=this._children,Zt=$t.length-1;Zt>=0;Zt--)$t[Zt].remove()},isEmpty:function(){return!this._children.length},remove:function $t(){return $t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function($t){this._currentStyle.set($t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new cr({project:this,insert:!0})},getSymbolDefinitions:function(){var $t=[],Zt={};return this.getItems({class:yr,match:function(or){var ur=or._definition,dr=ur._id;return Zt[dr]||(Zt[dr]=!0,$t.push(ur)),!1}}),$t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var $t=this._selectionItems,Zt=[];for(var or in $t){var ur=$t[or],dr=ur._selection;dr&1&&ur.isInserted()?Zt.push(ur):dr||this._updateSelection(ur)}return Zt},_updateSelection:function($t){var Zt=$t._id,or=this._selectionItems;$t._selection?or[Zt]!==$t&&(this._selectionCount++,or[Zt]=$t):or[Zt]===$t&&(this._selectionCount--,delete or[Zt])},selectAll:function(){for(var $t=this._children,Zt=0,or=$t.length;Zt<or;Zt++)$t[Zt].setFullySelected(!0)},deselectAll:function(){var $t=this._selectionItems;for(var Zt in $t)$t[Zt].setFullySelected(!1)},addLayer:function($t){return this.insertLayer(et,$t)},insertLayer:function($t,Zt){if(Zt instanceof cr){Zt._remove(!1,!0),ct.splice(this._children,[Zt],$t,0),Zt._setProject(this,!0);var or=Zt._name;or&&Zt.setName(or),this._changes&&Zt._changed(5),this._activeLayer||(this._activeLayer=Zt)}else Zt=null;return Zt},_insertItem:function($t,Zt,or){return Zt=this.insertLayer($t,Zt)||(this._activeLayer||this._insertItem(et,new cr(ir.NO_INSERT),!0)).insertChild($t,Zt),or&&Zt.activate&&Zt.activate(),Zt},getItems:function($t){return ir._getItems(this,$t)},getItem:function($t){return ir._getItems(this,$t,null,null,!0)[0]||null},importJSON:function($t){this.activate();var Zt=this._activeLayer;return ct.importJSON($t,Zt&&Zt.isEmpty()&&Zt)},removeOn:function($t){var Zt=this._removeSets;if(Zt){$t==="mouseup"&&(Zt.mousedrag=null);var or=Zt[$t];if(or){for(var ur in or){var dr=or[ur];for(var gr in Zt){var Ar=Zt[gr];Ar&&Ar!=or&&delete Ar[dr._id]}dr.remove()}Zt[$t]=null}}},draw:function($t,Zt,or){this._updateVersion++,$t.save(),Zt.applyToContext($t);for(var ur=this._children,dr=new ct({offset:new jt(0,0),pixelRatio:or,viewMatrix:Zt.isIdentity()?null:Zt,matrices:[new Yt],updateMatrix:!0}),gr=0,Ar=ur.length;gr<Ar;gr++)ur[gr].draw($t,dr);if($t.restore(),this._selectionCount>0){$t.save(),$t.strokeWidth=1;var _r=this._selectionItems,Nr=this._scope.settings.handleSize,Fr=this._updateVersion;for(var Vr in _r)_r[Vr]._drawSelection($t,Zt,Nr,_r,Fr);$t.restore()}}}),ir=ct.extend(dt,{statics:{extend:function $t(Zt){return Zt._serializeFields&&(Zt._serializeFields=ct.set({},this.prototype._serializeFields,Zt._serializeFields)),$t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new Yt,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var $t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return ct.each($t,function(Zt){this._events[Zt]={install:function(or){this.getView()._countItemEvent(or,1)},uninstall:function(or){this.getView()._countItemEvent(or,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:$t}})},{initialize:function(){},_initialize:function($t,Zt){var or=$t&&ct.isPlainObject($t),ur=or&&$t.internal===!0,dr=this._matrix=new Yt,gr=or&&$t.project||Bn.project,Ar=Bn.settings;return this._id=ur?null:Ft.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&Ar.applyMatrix,Zt&&dr.translate(Zt),dr._owner=this,this._style=new yn(gr._currentStyle,this,gr),ur||or&&$t.insert==!1||!Ar.insertItems&&!(or&&$t.insert==!0)?this._setProject(gr):(or&&$t.parent||gr)._insertItem(et,this,!0),or&&$t!==ir.NO_INSERT&&$t!==ir.INSERT&&this.set($t,{internal:!0,insert:!0,project:!0,parent:!0}),or},_serialize:function($t,Zt){var or={},ur=this;function dr(gr){for(var Ar in gr){var _r=ur[Ar];ct.equals(_r,Ar==="leading"?gr.fontSize*1.2:gr[Ar])||(or[Ar]=ct.serialize(_r,$t,Ar!=="data",Zt))}}return dr(this._serializeFields),this instanceof lr||dr(this._style._defaults),[this._class,or]},_changed:function($t){var Zt=this._symbol,or=this._parent||Zt,ur=this._project;$t&8&&(this._bounds=this._position=this._decomposed=et),$t&16&&(this._globalMatrix=et),or&&$t&72&&ir._clearBoundsCache(or),$t&2&&ir._clearBoundsCache(this),ur&&ur._changed($t,this),Zt&&Zt._changed($t)},getId:function(){return this._id},getName:function(){return this._name},setName:function($t){if(this._name&&this._removeNamed(),$t===+$t+"")throw new Error("Names consisting only of numbers are not supported.");var Zt=this._getOwner();if($t&&Zt){var or=Zt._children,ur=Zt._namedChildren;(ur[$t]=ur[$t]||[]).push(this),$t in or||(or[$t]=this)}this._name=$t||et,this._changed(256)},getStyle:function(){return this._style},setStyle:function($t){this.getStyle().set($t)}},ct.each(["locked","visible","blendMode","opacity","guide"],function($t){var Zt=ct.capitalize($t),or="_"+$t,ur={locked:256,visible:265};this["get"+Zt]=function(){return this[or]},this["set"+Zt]=function(dr){dr!=this[or]&&(this[or]=dr,this._changed(ur[$t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function($t){if($t!==this._selection){this._selection=$t;var Zt=this._project;Zt&&(Zt._updateSelection(this),this._changed(257))}},_changeSelection:function($t,Zt){var or=this._selection;this.setSelection(Zt?or|$t:or&~$t)},isSelected:function(){if(this._selectChildren){for(var $t=this._children,Zt=0,or=$t.length;Zt<or;Zt++)if($t[Zt].isSelected())return!0}return!!(this._selection&1)},setSelected:function($t){if(this._selectChildren)for(var Zt=this._children,or=0,ur=Zt.length;or<ur;or++)Zt[or].setSelected($t);this._changeSelection(1,$t)},isFullySelected:function(){var $t=this._children,Zt=!!(this._selection&1);if($t&&Zt){for(var or=0,ur=$t.length;or<ur;or++)if(!$t[or].isFullySelected())return!1;return!0}return Zt},setFullySelected:function($t){var Zt=this._children;if(Zt)for(var or=0,ur=Zt.length;or<ur;or++)Zt[or].setFullySelected($t);this._changeSelection(1,$t)},isClipMask:function(){return this._clipMask},setClipMask:function($t){this._clipMask!=($t=!!$t)&&(this._clipMask=$t,$t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function($t){this._data=$t},getPosition:function($t){var Zt=$t?jt:Bt,or=this._position||(this._position=this._getPositionFromBounds());return new Zt(or.x,or.y,this,"setPosition")},setPosition:function(){this.translate(jt.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function($t){return this._pivot?this._matrix._transformPoint(this._pivot):($t||this.getBounds()).getCenter(!0)},getPivot:function(){var $t=this._pivot;return $t?new Bt($t.x,$t.y,this,"setPivot"):null},setPivot:function(){this._pivot=jt.read(arguments,0,{clone:!0,readNull:!0}),this._position=et}},ct.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function($t,Zt){this[Zt]=function(or){return this.getBounds(or,$t)}},{beans:!0,getBounds:function($t,Zt){var or=Zt||$t instanceof Yt,ur=ct.set({},or?Zt:$t,this._boundsOptions);(!ur.stroke||this.getStrokeScaling())&&(ur.cacheItem=this);var dr=this._getCachedBounds(or&&$t,ur).rect;return arguments.length?dr:new Kt(dr.x,dr.y,dr.width,dr.height,this,"setBounds")},setBounds:function(){var $t=Ut.read(arguments),Zt=this.getBounds(),or=this._matrix,ur=new Yt,dr=$t.getCenter();ur.translate(dr),($t.width!=Zt.width||$t.height!=Zt.height)&&(or.isInvertible()||(or.set(or._backup||new Yt().translate(or.getTranslation())),Zt=this.getBounds()),ur.scale(Zt.width!==0?$t.width/Zt.width:0,Zt.height!==0?$t.height/Zt.height:0)),dr=Zt.getCenter(),ur.translate(-dr.x,-dr.y),this.transform(ur)},_getBounds:function($t,Zt){var or=this._children;return!or||!or.length?new Ut:(ir._updateBoundsCache(this,Zt.cacheItem),ir._getBounds(or,$t,Zt))},_getBoundsCacheKey:function($t,Zt){return[$t.stroke?1:0,$t.handle?1:0,Zt?1:0].join("")},_getCachedBounds:function($t,Zt,or){$t=$t&&$t._orNullIfIdentity();var ur=Zt.internal&&!or,dr=Zt.cacheItem,gr=ur?null:this._matrix._orNullIfIdentity(),Ar=dr&&(!$t||$t.equals(gr))&&this._getBoundsCacheKey(Zt,ur),_r=this._bounds;if(ir._updateBoundsCache(this._parent||this._symbol,dr),Ar&&_r&&Ar in _r){var Nr=_r[Ar];return{rect:Nr.rect.clone(),nonscaling:Nr.nonscaling}}var Fr=this._getBounds($t||gr,Zt),Vr=Fr.rect||Fr,Hr=this._style,$r=Fr.nonscaling||Hr.hasStroke()&&!Hr.getStrokeScaling();if(Ar){_r||(this._bounds=_r={});var Nr=_r[Ar]={rect:Vr.clone(),nonscaling:$r,internal:ur}}return{rect:Vr,nonscaling:$r}},_getStrokeMatrix:function($t,Zt){var or=this.getStrokeScaling()?null:Zt&&Zt.internal?this:this._parent||this._symbol&&this._symbol._item,ur=or?or.getViewMatrix().invert():$t;return ur&&ur._shiftless()},statics:{_updateBoundsCache:function($t,Zt){if($t&&Zt){var or=Zt._id,ur=$t._boundsCache=$t._boundsCache||{ids:{},list:[]};ur.ids[or]||(ur.list.push(Zt),ur.ids[or]=Zt)}},_clearBoundsCache:function($t){var Zt=$t._boundsCache;if(Zt){$t._bounds=$t._position=$t._boundsCache=et;for(var or=0,ur=Zt.list,dr=ur.length;or<dr;or++){var gr=ur[or];gr!==$t&&(gr._bounds=gr._position=et,gr._boundsCache&&ir._clearBoundsCache(gr))}}},_getBounds:function($t,Zt,or){var ur=1/0,dr=-ur,gr=ur,Ar=dr,_r=!1;or=or||{};for(var Nr=0,Fr=$t.length;Nr<Fr;Nr++){var Vr=$t[Nr];if(Vr._visible&&!Vr.isEmpty(!0)){var Hr=Vr._getCachedBounds(Zt&&Zt.appended(Vr._matrix),or,!0),$r=Hr.rect;ur=Math.min($r.x,ur),gr=Math.min($r.y,gr),dr=Math.max($r.x+$r.width,dr),Ar=Math.max($r.y+$r.height,Ar),Hr.nonscaling&&(_r=!0)}}return{rect:isFinite(ur)?new Ut(ur,gr,dr-ur,Ar-gr):new Ut,nonscaling:_r}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var $t=this._decompose();return $t?$t.rotation:0},setRotation:function($t){var Zt=this.getRotation();if(Zt!=null&&$t!=null){var or=this._decomposed;this.rotate($t-Zt),or&&(or.rotation=$t,this._decomposed=or)}},getScaling:function(){var $t=this._decompose(),Zt=$t&&$t.scaling;return new Bt(Zt?Zt.x:1,Zt?Zt.y:1,this,"setScaling")},setScaling:function(){var $t=this.getScaling(),Zt=jt.read(arguments,0,{clone:!0,readNull:!0});if($t&&Zt&&!$t.equals(Zt)){var or=this.getRotation(),ur=this._decomposed,dr=new Yt,gr=Rt.isZero;if(gr($t.x)||gr($t.y))dr.translate(ur.translation),or&&dr.rotate(or),dr.scale(Zt.x,Zt.y),this._matrix.set(dr);else{var Ar=this.getPosition(!0);dr.translate(Ar),or&&dr.rotate(or),dr.scale(Zt.x/$t.x,Zt.y/$t.y),or&&dr.rotate(-or),dr.translate(Ar.negate()),this.transform(dr)}ur&&(ur.scaling=Zt,this._decomposed=ur)}},getMatrix:function(){return this._matrix},setMatrix:function(){var $t=this._matrix;$t.set.apply($t,arguments)},getGlobalMatrix:function($t){var Zt=this._globalMatrix;if(Zt)for(var or=this._parent,ur=[];or;){if(!or._globalMatrix){Zt=null;for(var dr=0,gr=ur.length;dr<gr;dr++)ur[dr]._globalMatrix=null;break}ur.push(or),or=or._parent}if(!Zt){Zt=this._globalMatrix=this._matrix.clone();var or=this._parent;or&&Zt.prepend(or.getGlobalMatrix(!0))}return $t?Zt:Zt.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function($t){(this._applyMatrix=this._canApplyMatrix&&!!$t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function($t,Zt){if(this._project!==$t){this._project&&this._installEvents(!1),this._project=$t;for(var or=this._children,ur=0,dr=or&&or.length;ur<dr;ur++)or[ur]._setProject($t);Zt=!0}Zt&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function $t(Zt){$t.base.call(this,Zt);for(var or=this._children,ur=0,dr=or&&or.length;ur<dr;ur++)or[ur]._installEvents(Zt)},getLayer:function(){for(var $t=this;$t=$t._parent;)if($t instanceof cr)return $t;return null},getParent:function(){return this._parent},setParent:function($t){return $t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function($t){this.removeChildren(),this.addChildren($t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var $t=this._getOwner();return $t&&$t._children[this._index+1]||null},getPreviousSibling:function(){var $t=this._getOwner();return $t&&$t._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function($t){var Zt=this._parent,or=Zt&&Zt._children;or&&Zt.insertChildren($t in or?$t:et,[this])},equals:function($t){return $t===this||$t&&this._class===$t._class&&this._style.equals($t._style)&&this._matrix.equals($t._matrix)&&this._locked===$t._locked&&this._visible===$t._visible&&this._blendMode===$t._blendMode&&this._opacity===$t._opacity&&this._clipMask===$t._clipMask&&this._guide===$t._guide&&this._equals($t)||!1},_equals:function($t){return ct.equals(this._children,$t._children)},clone:function($t){var Zt=new this.constructor(ir.NO_INSERT),or=this._children,ur=ct.pick($t?$t.insert:et,$t===et||$t===!0),dr=ct.pick($t?$t.deep:et,!0);or&&Zt.copyAttributes(this),(!or||dr)&&Zt.copyContent(this),or||Zt.copyAttributes(this),ur&&Zt.insertAbove(this);var gr=this._name,Ar=this._parent;if(gr&&Ar){for(var or=Ar._children,_r=gr,Nr=1;or[gr];)gr=_r+" "+Nr++;gr!==_r&&Zt.setName(gr)}return Zt},copyContent:function($t){for(var Zt=$t._children,or=0,ur=Zt&&Zt.length;or<ur;or++)this.addChild(Zt[or].clone(!1),!0)},copyAttributes:function($t,Zt){this.setStyle($t._style);for(var or=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],ur=0,dr=or.length;ur<dr;ur++){var gr=or[ur];$t.hasOwnProperty(gr)&&(this[gr]=$t[gr])}Zt||this._matrix.set($t._matrix,!0),this.setApplyMatrix($t._applyMatrix),this.setPivot($t._pivot),this.setSelection($t._selection);var Ar=$t._data,_r=$t._name;this._data=Ar?ct.clone(Ar):null,_r&&this.setName(_r)},rasterize:function($t,Zt){var or,ur,dr;ct.isPlainObject($t)?(or=$t.resolution,ur=$t.insert,dr=$t.raster):(or=$t,ur=Zt),dr||(dr=new xr(ir.NO_INSERT));var gr=this.getStrokeBounds(),Ar=(or||this.getView().getResolution())/72,_r=gr.getTopLeft().floor(),Nr=gr.getBottomRight().ceil(),Fr=new zt(Nr.subtract(_r)),Vr=Fr.multiply(Ar);if(dr.setSize(Vr,!0),!Vr.isZero()){var Hr=dr.getContext(!0),$r=new Yt().scale(Ar).translate(_r.negate());Hr.save(),$r.applyToContext(Hr),this.draw(Hr,new ct({matrices:[$r]})),Hr.restore()}return dr._matrix.set(new Yt().translate(_r.add(Fr.divide(2))).scale(1/Ar)),(ur===et||ur)&&dr.insertAbove(this),dr},contains:function(){var $t=this._matrix;return $t.isInvertible()&&!!this._contains($t._inverseTransform(jt.read(arguments)))},_contains:function($t){var Zt=this._children;if(Zt){for(var or=Zt.length-1;or>=0;or--)if(Zt[or].contains($t))return!0;return!1}return $t.isInside(this.getInternalBounds())},isInside:function(){return Ut.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Er.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function($t,Zt){return $t instanceof ir?this._asPathItem().getIntersections($t._asPathItem(),null,Zt,!0).length>0:!1}},new function(){function $t(){var ur=arguments;return this._hitTest(jt.read(ur),kr.getOptions(ur))}function Zt(){var ur=arguments,dr=jt.read(ur),gr=kr.getOptions(ur),Ar=[];return this._hitTest(dr,new ct({all:Ar},gr)),Ar}function or(ur,dr,gr,Ar){var _r=this._children;if(_r)for(var Nr=_r.length-1;Nr>=0;Nr--){var Fr=_r[Nr],Vr=Fr!==Ar&&Fr._hitTest(ur,dr,gr);if(Vr&&!dr.all)return Vr}return null}return ar.inject({hitTest:$t,hitTestAll:Zt,_hitTest:or}),{hitTest:$t,hitTestAll:Zt,_hitTestChildren:or}},{_hitTest:function($t,Zt,or){if(this._locked||!this._visible||this._guide&&!Zt.guides||this.isEmpty())return null;var ur=this._matrix,dr=or?or.appended(ur):this.getGlobalMatrix().prepend(this.getView()._matrix),gr=Math.max(Zt.tolerance,1e-12),Ar=Zt._tolerancePadding=new zt(Er._getStrokePadding(gr,ur._shiftless().invert()));if($t=ur._inverseTransform($t),!$t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(Ar.multiply(2))._containsPoint($t))return null;var _r=!(Zt.guides&&!this._guide||Zt.selected&&!this.isSelected()||Zt.type&&Zt.type!==ct.hyphenate(this._class)||Zt.class&&!(this instanceof Zt.class)),Nr=Zt.match,Fr=this,Vr,Hr;function $r(jr){return jr&&Nr&&!Nr(jr)&&(jr=null),jr&&Zt.all&&Zt.all.push(jr),jr}function Br(jr,Xr){var Jr=Xr?Vr["get"+Xr]():Fr.getPosition();if($t.subtract(Jr).divide(Ar).length<=1)return new kr(jr,Fr,{name:Xr?ct.hyphenate(Xr):jr,point:Jr})}var en=Zt.position,Kr=Zt.center,Yr=Zt.bounds;if(_r&&this._parent&&(en||Kr||Yr)){if((Kr||Yr)&&(Vr=this.getInternalBounds()),Hr=en&&Br("position")||Kr&&Br("center","Center"),!Hr&&Yr)for(var zr=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],Wr=0;Wr<8&&!Hr;Wr++)Hr=Br("bounds",zr[Wr]);Hr=$r(Hr)}return Hr||(Hr=this._hitTestChildren($t,Zt,dr)||_r&&$r(this._hitTestSelf($t,Zt,dr,this.getStrokeScaling()?null:dr._shiftless().invert()))||null),Hr&&Hr.point&&(Hr.point=ur.transform(Hr.point)),Hr},_hitTestSelf:function($t,Zt){if(Zt.fill&&this.hasFill()&&this._contains($t))return new kr("fill",this)},matches:function($t,Zt){function or(Ar,_r){for(var Nr in Ar)if(Ar.hasOwnProperty(Nr)){var Fr=Ar[Nr],Vr=_r[Nr];if(ct.isPlainObject(Fr)&&ct.isPlainObject(Vr)){if(!or(Fr,Vr))return!1}else if(!ct.equals(Fr,Vr))return!1}return!0}var ur=typeof $t;if(ur==="object"){for(var dr in $t)if($t.hasOwnProperty(dr)&&!this.matches(dr,$t[dr]))return!1;return!0}else{if(ur==="function")return $t(this);if($t==="match")return Zt(this);var gr=/^(empty|editable)$/.test($t)?this["is"+ct.capitalize($t)]():$t==="type"?ct.hyphenate(this._class):this[$t];if($t==="class"){if(typeof Zt=="function")return this instanceof Zt;gr=this._class}if(typeof Zt=="function")return!!Zt(gr);if(Zt){if(Zt.test)return Zt.test(gr);if(ct.isPlainObject(Zt))return or(Zt,gr)}return ct.equals(gr,Zt)}},getItems:function($t){return ir._getItems(this,$t,this._matrix)},getItem:function($t){return ir._getItems(this,$t,this._matrix,null,!0)[0]||null},statics:{_getItems:function $t(Zt,or,ur,dr,gr){if(!dr){var Ar=typeof or=="object"&&or,_r=Ar&&Ar.overlapping,Nr=Ar&&Ar.inside,Fr=_r||Nr,$r=Fr&&Ut.read([Fr]);dr={items:[],recursive:Ar&&Ar.recursive!==!1,inside:!!Nr,overlapping:!!_r,rect:$r,path:_r&&new Er.Rectangle({rectangle:$r,insert:!1})},Ar&&(or=ct.filter({},or,{recursive:!0,inside:!0,overlapping:!0}))}var Vr=Zt._children,Hr=dr.items,$r=dr.rect;ur=$r&&(ur||new Yt);for(var Br=0,en=Vr&&Vr.length;Br<en;Br++){var Kr=Vr[Br],Yr=ur&&ur.appended(Kr._matrix),zr=!0;if($r){var Fr=Kr.getBounds(Yr);if(!$r.intersects(Fr))continue;$r.contains(Fr)||dr.overlapping&&(Fr.contains($r)||dr.path.intersects(Kr,Yr))||(zr=!1)}if(zr&&Kr.matches(or)&&(Hr.push(Kr),gr)||(dr.recursive!==!1&&$t(Kr,or,Yr,dr,gr),gr&&Hr.length>0))break}return Hr}}},{importJSON:function($t){var Zt=ct.importJSON($t,this);return Zt!==this?this.addChild(Zt):Zt},addChild:function($t){return this.insertChild(et,$t)},insertChild:function($t,Zt){var or=Zt?this.insertChildren($t,[Zt]):null;return or&&or[0]},addChildren:function($t){return this.insertChildren(this._children.length,$t)},insertChildren:function($t,Zt){var or=this._children;if(or&&Zt&&Zt.length>0){Zt=ct.slice(Zt);for(var ur={},dr=Zt.length-1;dr>=0;dr--){var gr=Zt[dr],Ar=gr&&gr._id;!gr||ur[Ar]?Zt.splice(dr,1):(gr._remove(!1,!0),ur[Ar]=!0)}ct.splice(or,Zt,$t,0);for(var _r=this._project,Nr=_r._changes,dr=0,Fr=Zt.length;dr<Fr;dr++){var gr=Zt[dr],Vr=gr._name;gr._parent=this,gr._setProject(_r,!0),Vr&&gr.setName(Vr),Nr&&gr._changed(5)}this._changed(11)}else Zt=null;return Zt},_insertItem:"#insertChild",_insertAt:function($t,Zt){var or=$t&&$t._getOwner(),ur=$t!==this&&or?this:null;return ur&&(ur._remove(!1,!0),or._insertItem($t._index+Zt,ur)),ur},insertAbove:function($t){return this._insertAt($t,1)},insertBelow:function($t){return this._insertAt($t,0)},sendToBack:function(){var $t=this._getOwner();return $t?$t._insertItem(0,this):null},bringToFront:function(){var $t=this._getOwner();return $t?$t._insertItem(et,this):null},appendTop:"#addChild",appendBottom:function($t){return this.insertChild(0,$t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function($t){return $t._insertItem(et,this)},copyTo:function($t){return this.clone(!1).addTo($t)},reduce:function($t){var Zt=this._children;if(Zt&&Zt.length===1){var or=Zt[0].reduce($t);return this._parent?(or.insertAbove(this),this.remove()):or.remove(),or}return this},_removeNamed:function(){var $t=this._getOwner();if($t){var Zt=$t._children,or=$t._namedChildren,ur=this._name,dr=or[ur],gr=dr?dr.indexOf(this):-1;gr!==-1&&(Zt[ur]==this&&delete Zt[ur],dr.splice(gr,1),dr.length?Zt[ur]=dr[0]:delete or[ur])}},_remove:function($t,Zt){var or=this._getOwner(),ur=this._project,dr=this._index;return this._style&&this._style._dispose(),or?(this._name&&this._removeNamed(),dr!=null&&(ur._activeLayer===this&&(ur._activeLayer=this.getNextSibling()||this.getPreviousSibling()),ct.splice(or._children,null,dr,1)),this._installEvents(!1),$t&&ur._changes&&this._changed(5),Zt&&or._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function($t){var Zt=$t&&$t.insertBelow(this);return Zt&&this.remove(),Zt},removeChildren:function($t,Zt){if(!this._children)return null;$t=$t||0,Zt=ct.pick(Zt,this._children.length);for(var or=ct.splice(this._children,null,$t,Zt-$t),ur=or.length-1;ur>=0;ur--)or[ur]._remove(!0,!1);return or.length>0&&this._changed(11),or},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var $t=0,Zt=this._children.length;$t<Zt;$t++)this._children[$t]._index=$t;this._changed(11)}},isEmpty:function($t){var Zt=this._children,or=Zt?Zt.length:0;if($t){for(var ur=0;ur<or;ur++)if(!Zt[ur].isEmpty($t))return!1;return!0}return!or},isEditable:function(){for(var $t=this;$t;){if(!$t._visible||$t._locked)return!1;$t=$t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function($t){function Zt(Ar){var _r=[];do _r.unshift(Ar);while(Ar=Ar._parent);return _r}for(var or=Zt(this),ur=Zt($t),dr=0,gr=Math.min(or.length,ur.length);dr<gr;dr++)if(or[dr]!=ur[dr])return or[dr]._index<ur[dr]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function($t){return this._getOrder($t)===-1},isBelow:function($t){return this._getOrder($t)===1},isParent:function($t){return this._parent===$t},isChild:function($t){return $t&&$t._parent===this},isDescendant:function($t){for(var Zt=this;Zt=Zt._parent;)if(Zt===$t)return!0;return!1},isAncestor:function($t){return $t?$t.isDescendant(this):!1},isSibling:function($t){return this._parent===$t._parent},isGroupedWith:function($t){for(var Zt=this._parent;Zt;){if(Zt._parent&&/^(Group|Layer|CompoundPath)$/.test(Zt._class)&&$t.isDescendant(Zt))return!0;Zt=Zt._parent}return!1}},ct.each(["rotate","scale","shear","skew"],function($t){var Zt=$t==="rotate";this[$t]=function(){var or=arguments,ur=(Zt?ct:jt).read(or),dr=jt.read(or,0,{readNull:!0});return this.transform(new Yt()[$t](ur,dr||this.getPosition(!0)))}},{translate:function(){var $t=new Yt;return this.transform($t.translate.apply($t,arguments))},transform:function($t,Zt,or){var ur=this._matrix,dr=$t&&!$t.isIdentity(),gr=or&&this._canApplyMatrix||this._applyMatrix&&(dr||!ur.isIdentity()||Zt&&this._children);if(!dr&&!gr)return this;if(dr){!$t.isInvertible()&&ur.isInvertible()&&(ur._backup=ur.getValues()),ur.prepend($t,!0);var Ar=this._style,_r=Ar.getFillColor(!0),Nr=Ar.getStrokeColor(!0);_r&&_r.transform($t),Nr&&Nr.transform($t)}if(gr&&(gr=this._transformContent(ur,Zt,or))){var Fr=this._pivot;Fr&&ur._transformPoint(Fr,Fr,!0),ur.reset(!0),or&&this._canApplyMatrix&&(this._applyMatrix=!0)}var Vr=this._bounds,Hr=this._position;(dr||gr)&&this._changed(25);var $r=dr&&Vr&&$t.decompose();if($r&&$r.skewing.isZero()&&$r.rotation%90===0){for(var Br in Vr){var en=Vr[Br];if(en.nonscaling)delete Vr[Br];else if(gr||!en.internal){var Kr=en.rect;$t._transformBounds(Kr,Kr)}}this._bounds=Vr;var Yr=Vr[this._getBoundsCacheKey(this._boundsOptions||{})];Yr&&(this._position=this._getPositionFromBounds(Yr.rect))}else dr&&Hr&&this._pivot&&(this._position=$t._transformPoint(Hr,Hr));return this},_transformContent:function($t,Zt,or){var ur=this._children;if(ur){for(var dr=0,gr=ur.length;dr<gr;dr++)ur[dr].transform($t,Zt,or);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(jt.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(jt.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(jt.read(arguments))},localToParent:function(){return this._matrix._transformPoint(jt.read(arguments))},fitBounds:function($t,Zt){$t=Ut.read(arguments);var or=this.getBounds(),ur=or.height/or.width,dr=$t.height/$t.width,gr=(Zt?ur>dr:ur<dr)?$t.width/or.width:$t.height/or.height,Ar=new Ut(new jt,new zt(or.width*gr,or.height*gr));Ar.setCenter($t.getCenter()),this.setBounds(Ar)}}),{_setStyles:function($t,Zt,or){var ur=this._style,dr=this._matrix;if(ur.hasFill()&&($t.fillStyle=ur.getFillColor().toCanvasStyle($t,dr)),ur.hasStroke()){$t.strokeStyle=ur.getStrokeColor().toCanvasStyle($t,dr),$t.lineWidth=ur.getStrokeWidth();var gr=ur.getStrokeJoin(),Ar=ur.getStrokeCap(),_r=ur.getMiterLimit();if(gr&&($t.lineJoin=gr),Ar&&($t.lineCap=Ar),_r&&($t.miterLimit=_r),Bn.support.nativeDash){var Nr=ur.getDashArray(),Fr=ur.getDashOffset();Nr&&Nr.length&&("setLineDash"in $t?($t.setLineDash(Nr),$t.lineDashOffset=Fr):($t.mozDash=Nr,$t.mozDashOffset=Fr))}}if(ur.hasShadow()){var Vr=Zt.pixelRatio||1,Hr=or._shiftless().prepend(new Yt().scale(Vr,Vr)),$r=Hr.transform(new jt(ur.getShadowBlur(),0)),Br=Hr.transform(this.getShadowOffset());$t.shadowColor=ur.getShadowColor().toCanvasStyle($t),$t.shadowBlur=$r.getLength(),$t.shadowOffsetX=Br.x,$t.shadowOffsetY=Br.y}},draw:function($t,Zt,or){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var ur=Zt.matrices,dr=Zt.viewMatrix,gr=this._matrix,Ar=ur[ur.length-1].appended(gr);if(Ar.isInvertible()){dr=dr?dr.appended(Ar):Ar,ur.push(Ar),Zt.updateMatrix&&(this._globalMatrix=Ar);var _r=this._blendMode,Nr=Rt.clamp(this._opacity,0,1),Fr=_r==="normal",Vr=An.nativeModes[_r],Hr=Fr&&Nr===1||Zt.dontStart||Zt.clip||(Vr||Fr&&Nr<1)&&this._canComposite(),$r=Zt.pixelRatio||1,Br,en,Kr;if(!Hr){var Yr=this.getStrokeBounds(dr);if(!Yr.width||!Yr.height){ur.pop();return}Kr=Zt.offset,en=Zt.offset=Yr.getTopLeft().floor(),Br=$t,$t=Tn.getContext(Yr.getSize().ceil().add(1).multiply($r)),$r!==1&&$t.scale($r,$r)}$t.save();var zr=or?or.appended(gr):this._canScaleStroke&&!this.getStrokeScaling(!0)&&dr,Wr=!Hr&&Zt.clipItem,jr=!zr||Wr;if(Hr?($t.globalAlpha=Nr,Vr&&($t.globalCompositeOperation=_r)):jr&&$t.translate(-en.x,-en.y),jr&&(Hr?gr:dr).applyToContext($t),Wr&&Zt.clipItem.draw($t,Zt.extend({clip:!0})),zr){$t.setTransform($r,0,0,$r,0,0);var Xr=Zt.offset;Xr&&$t.translate(-Xr.x,-Xr.y)}this._draw($t,Zt,dr,zr),$t.restore(),ur.pop(),Zt.clip&&!Zt.dontFinish&&$t.clip(this.getFillRule()),Hr||(An.process(_r,$t,Br,Nr,en.subtract(Kr).multiply($r)),Tn.release($t),Zt.offset=Kr)}}},_isUpdated:function($t){var Zt=this._parent;if(Zt instanceof Dr)return Zt._isUpdated($t);var or=this._updateVersion===$t;return!or&&Zt&&Zt._visible&&Zt._isUpdated($t)&&(this._updateVersion=$t,or=!0),or},_drawSelection:function($t,Zt,or,ur,dr){var gr=this._selection,Ar=gr&1,_r=gr&2||Ar&&this._selectBounds,Nr=gr&4;if(this._drawSelected||(Ar=!1),(Ar||_r||Nr)&&this._isUpdated(dr)){var Fr,Vr=this.getSelectedColor(!0)||(Fr=this.getLayer())&&Fr.getSelectedColor(!0),Hr=Zt.appended(this.getGlobalMatrix(!0)),$r=or/2;if($t.strokeStyle=$t.fillStyle=Vr?Vr.toCanvasStyle($t):"#009dec",Ar&&this._drawSelected($t,Hr,ur),Nr){var Br=this.getPosition(!0),en=this._parent,Kr=en?en.localToGlobal(Br):Br,Yr=Kr.x,zr=Kr.y;$t.beginPath(),$t.arc(Yr,zr,$r,0,Math.PI*2,!0),$t.stroke();for(var Wr=[[0,-1],[1,0],[0,1],[-1,0]],jr=$r,Xr=or+1,Jr=0;Jr<4;Jr++){var nn=Wr[Jr],Zr=nn[0],on=nn[1];$t.moveTo(Yr+Zr*jr,zr+on*jr),$t.lineTo(Yr+Zr*Xr,zr+on*Xr),$t.stroke()}}if(_r){var hn=Hr._transformCorners(this.getInternalBounds());$t.beginPath();for(var Jr=0;Jr<8;Jr++)$t[Jr?"lineTo":"moveTo"](hn[Jr],hn[++Jr]);$t.closePath(),$t.stroke();for(var Jr=0;Jr<8;Jr++)$t.fillRect(hn[Jr]-$r,hn[++Jr]-$r,or,or)}}},_canComposite:function(){return!1}},ct.each(["down","drag","up","move"],function($t){this["removeOn"+ct.capitalize($t)]=function(){var Zt={};return Zt[$t]=!0,this.removeOn(Zt)}},{removeOn:function($t){for(var Zt in $t)if($t[Zt]){var or="mouse"+Zt,ur=this._project,dr=ur._removeSets=ur._removeSets||{};dr[or]=dr[or]||{},dr[or][this._id]=this}return this}}),{tween:function($t,Zt,or){or||(or=Zt,Zt=$t,$t=null,or||(or=Zt,Zt=null));var ur=or&&or.easing,dr=or&&or.start,gr=or!=null&&(typeof or=="number"?or:or.duration),Ar=new mn(this,$t,Zt,gr,ur,dr);function _r(Nr){Ar._handleFrame(Nr.time*1e3),Ar.running||this.off("frame",_r)}return gr&&this.on("frame",_r),Ar},tweenTo:function($t,Zt){return this.tween(null,$t,Zt)},tweenFrom:function($t,Zt){return this.tween($t,null,Zt)}}),lr=ir.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(Zt){this._children=[],this._namedChildren={},this._initialize(Zt)||this.addChildren(Array.isArray(Zt)?Zt:arguments)},_changed:function $t(Zt){$t.base.call(this,Zt),Zt&2050&&(this._clipItem=et)},_getClipItem:function(){var $t=this._clipItem;if($t===et){$t=null;for(var Zt=this._children,or=0,ur=Zt.length;or<ur;or++)if(Zt[or]._clipMask){$t=Zt[or];break}this._clipItem=$t}return $t},isClipped:function(){return!!this._getClipItem()},setClipped:function($t){var Zt=this.getFirstChild();Zt&&Zt.setClipMask($t)},_getBounds:function $t(Zt,or){var ur=this._getClipItem();return ur?ur._getCachedBounds(ur._matrix.prepended(Zt),ct.set({},or,{stroke:!1})):$t.base.call(this,Zt,or)},_hitTestChildren:function $t(Zt,or,ur){var dr=this._getClipItem();return(!dr||dr.contains(Zt))&&$t.base.call(this,Zt,or,ur,dr)},_draw:function($t,Zt){var or=Zt.clip,ur=!or&&this._getClipItem();Zt=Zt.extend({clipItem:ur,clip:!1}),or?($t.beginPath(),Zt.dontStart=Zt.dontFinish=!0):ur&&ur.draw($t,Zt.extend({clip:!0}));for(var dr=this._children,gr=0,Ar=dr.length;gr<Ar;gr++){var _r=dr[gr];_r!==ur&&_r.draw($t,Zt)}}}),cr=lr.extend({_class:"Layer",initialize:function(){lr.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function $t(){return this._parent?$t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),vr=ir.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(Zt,or){this._initialize(Zt,or)},_equals:function($t){return this._type===$t._type&&this._size.equals($t._size)&&ct.equals(this._radius,$t._radius)},copyContent:function($t){this.setType($t._type),this.setSize($t._size),this.setRadius($t._radius)},getType:function(){return this._type},setType:function($t){this._type=$t},getShape:"#getType",setShape:"#setType",getSize:function(){var $t=this._size;return new Ht($t.width,$t.height,this,"setSize")},setSize:function(){var $t=zt.read(arguments);if(!this._size)this._size=$t.clone();else if(!this._size.equals($t)){var Zt=this._type,or=$t.width,ur=$t.height;Zt==="rectangle"?this._radius.set(zt.min(this._radius,$t.divide(2).abs())):Zt==="circle"?(or=ur=(or+ur)/2,this._radius=or/2):Zt==="ellipse"&&this._radius._set(or/2,ur/2),this._size._set(or,ur),this._changed(9)}},getRadius:function(){var $t=this._radius;return this._type==="circle"?$t:new Ht($t.width,$t.height,this,"setRadius")},setRadius:function($t){var Zt=this._type;if(Zt==="circle"){if($t===this._radius)return;var or=$t*2;this._radius=$t,this._size._set(or,or)}else if($t=zt.read(arguments),!this._radius)this._radius=$t.clone();else{if(this._radius.equals($t))return;if(this._radius.set($t),Zt==="rectangle"){var or=zt.max(this._size,$t.multiply(2));this._size.set(or)}else Zt==="ellipse"&&this._size._set($t.width*2,$t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function($t){var Zt=new Er[ct.capitalize(this._type)]({center:new jt,size:this._size,radius:this._radius,insert:!1});return Zt.copyAttributes(this),Bn.settings.applyMatrix&&Zt.setApplyMatrix(!0),($t===et||$t)&&Zt.insertAbove(this),Zt},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function($t,Zt,or,ur){var dr=this._style,gr=dr.hasFill(),Ar=dr.hasStroke(),_r=Zt.dontFinish||Zt.clip,Nr=!ur;if(gr||Ar||_r){var Fr=this._type,Vr=this._radius,Hr=Fr==="circle";if(Zt.dontStart||$t.beginPath(),Nr&&Hr)$t.arc(0,0,Vr,0,Math.PI*2,!0);else{var $r=Hr?Vr:Vr.width,Br=Hr?Vr:Vr.height,en=this._size,Kr=en.width,Yr=en.height;if(Nr&&Fr==="rectangle"&&$r===0&&Br===0)$t.rect(-Kr/2,-Yr/2,Kr,Yr);else{var zr=Kr/2,Wr=Yr/2,jr=1-.5522847498307936,Xr=$r*jr,Jr=Br*jr,nn=[-zr,-Wr+Br,-zr,-Wr+Jr,-zr+Xr,-Wr,-zr+$r,-Wr,zr-$r,-Wr,zr-Xr,-Wr,zr,-Wr+Jr,zr,-Wr+Br,zr,Wr-Br,zr,Wr-Jr,zr-Xr,Wr,zr-$r,Wr,-zr+$r,Wr,-zr+Xr,Wr,-zr,Wr-Jr,-zr,Wr-Br];ur&&ur.transform(nn,nn,32),$t.moveTo(nn[0],nn[1]),$t.bezierCurveTo(nn[2],nn[3],nn[4],nn[5],nn[6],nn[7]),zr!==$r&&$t.lineTo(nn[8],nn[9]),$t.bezierCurveTo(nn[10],nn[11],nn[12],nn[13],nn[14],nn[15]),Wr!==Br&&$t.lineTo(nn[16],nn[17]),$t.bezierCurveTo(nn[18],nn[19],nn[20],nn[21],nn[22],nn[23]),zr!==$r&&$t.lineTo(nn[24],nn[25]),$t.bezierCurveTo(nn[26],nn[27],nn[28],nn[29],nn[30],nn[31])}}$t.closePath()}!_r&&(gr||Ar)&&(this._setStyles($t,Zt,or),gr&&($t.fill(dr.getFillRule()),$t.shadowColor="rgba(0,0,0,0)"),Ar&&$t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function($t,Zt){var or=new Ut(this._size).setCenter(0,0),ur=this._style,dr=Zt.stroke&&ur.hasStroke()&&ur.getStrokeWidth();return $t&&(or=$t._transformBounds(or)),dr?or.expand(Er._getStrokePadding(dr,this._getStrokeMatrix($t,Zt))):or}},new function(){function $t(or,ur,dr){var gr=or._radius;if(!gr.isZero())for(var Ar=or._size.divide(2),_r=1;_r<=4;_r++){var Nr=new jt(_r>1&&_r<4?-1:1,_r>2?-1:1),Fr=Nr.multiply(Ar),Vr=Fr.subtract(Nr.multiply(gr)),Hr=new Ut(dr?Fr.add(Nr.multiply(dr)):Fr,Vr);if(Hr.contains(ur))return{point:Vr,quadrant:_r}}}function Zt(or,ur,dr,gr){var Ar=or.divide(ur);return(!gr||Ar.isInQuadrant(gr))&&Ar.subtract(Ar.normalize()).multiply(ur).divide(dr).length<=1}return{_contains:function or(ur){if(this._type==="rectangle"){var dr=$t(this,ur);return dr?ur.subtract(dr.point).divide(this._radius).getLength()<=1:or.base.call(this,ur)}else return ur.divide(this.size).getLength()<=.5},_hitTestSelf:function or(ur,dr,gr,Ar){var _r=!1,Nr=this._style,Fr=dr.stroke&&Nr.hasStroke(),Vr=dr.fill&&Nr.hasFill();if(Fr||Vr){var Hr=this._type,$r=this._radius,Br=Fr?Nr.getStrokeWidth()/2:0,en=dr._tolerancePadding.add(Er._getStrokePadding(Br,!Nr.getStrokeScaling()&&Ar));if(Hr==="rectangle"){var Kr=en.multiply(2),Yr=$t(this,ur,Kr);if(Yr)_r=Zt(ur.subtract(Yr.point),$r,en,Yr.quadrant);else{var zr=new Ut(this._size).setCenter(0,0),Wr=zr.expand(Kr),jr=zr.expand(Kr.negate());_r=Wr._containsPoint(ur)&&!jr._containsPoint(ur)}}else _r=Zt(ur,$r,en)}return _r?new kr(Fr?"stroke":"fill",this):or.base.apply(this,arguments)}}},{statics:new function(){function $t(Zt,or,ur,dr,gr){var Ar=ct.create(vr.prototype);return Ar._type=Zt,Ar._size=ur,Ar._radius=dr,Ar._initialize(ct.getNamed(gr),or),Ar}return{Circle:function(){var Zt=arguments,or=jt.readNamed(Zt,"center"),ur=ct.readNamed(Zt,"radius");return $t("circle",or,new zt(ur*2),ur,Zt)},Rectangle:function(){var Zt=arguments,or=Ut.readNamed(Zt,"rectangle"),ur=zt.min(zt.readNamed(Zt,"radius"),or.getSize(!0).divide(2));return $t("rectangle",or.getCenter(!0),or.getSize(!0),ur,Zt)},Ellipse:function(){var Zt=arguments,or=vr._readEllipse(Zt),ur=or.radius;return $t("ellipse",or.center,ur.multiply(2),ur,Zt)},_readEllipse:function(Zt){var or,ur;if(ct.hasNamed(Zt,"radius"))or=jt.readNamed(Zt,"center"),ur=zt.readNamed(Zt,"radius");else{var dr=Ut.readNamed(Zt,"rectangle");or=dr.getCenter(!0),ur=dr.getSize(!0).divide(2)}return{center:or,radius:ur}}}}}),xr=ir.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(Zt,or){if(!this._initialize(Zt,or!==et&&jt.read(arguments))){var ur,dr=typeof Zt,gr=dr==="string"?ut.getElementById(Zt):dr==="object"?Zt:null;if(gr&&gr!==ir.NO_INSERT){if(gr.getContext||gr.naturalHeight!=null)ur=gr;else if(gr){var Ar=zt.read(arguments);Ar.isZero()||(ur=Tn.getCanvas(Ar))}}ur?this.setImage(ur):this.setSource(Zt)}this._size||(this._size=new zt,this._loaded=!1)},_equals:function($t){return this.getSource()===$t.getSource()},copyContent:function($t){var Zt=$t._image,or=$t._canvas;if(Zt)this._setImage(Zt);else if(or){var ur=Tn.getCanvas($t._size);ur.getContext("2d").drawImage(or,0,0),this._setImage(ur)}this._crossOrigin=$t._crossOrigin},getSize:function(){var $t=this._size;return new Ht($t?$t.width:0,$t?$t.height:0,this,"setSize")},setSize:function($t,Zt){var or=zt.read(arguments);if(or.equals(this._size))Zt&&this.clear();else if(or.width>0&&or.height>0){var ur=!Zt&&this.getElement();this._setImage(Tn.getCanvas(or)),ur&&this.getContext(!0).drawImage(ur,0,0,or.width,or.height)}else this._canvas&&Tn.release(this._canvas),this._size=or.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function($t){this.setSize($t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function($t){this.setSize(this.getWidth(),$t)},getLoaded:function(){return this._loaded},isEmpty:function(){var $t=this._size;return!$t||$t.width===0&&$t.height===0},getResolution:function(){var $t=this._matrix,Zt=new jt(0,0).transform($t),or=new jt(1,0).transform($t).subtract(Zt),ur=new jt(0,1).transform($t).subtract(Zt);return new zt(72/or.getLength(),72/ur.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function($t){var Zt=this;function or(ur){var dr=Zt.getView(),gr=ur&&ur.type||"load";dr&&Zt.responds(gr)&&(Bn=dr._scope,Zt.emit(gr,new Un(ur)))}this._setImage($t),this._loaded?setTimeout(or,0):$t&&En.add($t,{load:function(ur){Zt._setImage($t),or(ur)},error:or})},_setImage:function($t){this._canvas&&Tn.release(this._canvas),$t&&$t.getContext?(this._image=null,this._canvas=$t,this._loaded=!0):(this._image=$t,this._canvas=null,this._loaded=!!($t&&$t.src&&$t.complete)),this._size=new zt($t?$t.naturalWidth||$t.width:0,$t?$t.naturalHeight||$t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var $t=Tn.getContext(this._size);try{this._image&&$t.drawImage(this._image,0,0),this._canvas=$t.canvas}catch{Tn.release($t)}}return this._canvas},setCanvas:"#setImage",getContext:function($t){return this._context||(this._context=this.getCanvas().getContext("2d")),$t&&(this._image=null,this._changed(1025)),this._context},setContext:function($t){this._context=$t},getSource:function(){var $t=this._image;return $t&&$t.src||this.toDataURL()},setSource:function($t){var Zt=new g.Image,or=this._crossOrigin;or&&(Zt.crossOrigin=or),$t&&(Zt.src=$t),this.setImage(Zt)},getCrossOrigin:function(){var $t=this._image;return $t&&$t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function($t){this._crossOrigin=$t;var Zt=this._image;Zt&&(Zt.crossOrigin=$t)},getSmoothing:function(){return this._smoothing},setSmoothing:function($t){this._smoothing=typeof $t=="string"?$t:$t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var $t=Ut.read(arguments),Zt=Tn.getContext($t.getSize());return Zt.drawImage(this.getCanvas(),$t.x,$t.y,$t.width,$t.height,0,0,$t.width,$t.height),Zt.canvas},getSubRaster:function(){var $t=Ut.read(arguments),Zt=new xr(ir.NO_INSERT);return Zt._setImage(this.getSubCanvas($t)),Zt.translate($t.getCenter().subtract(this.getSize().divide(2))),Zt._matrix.prepend(this._matrix),Zt.insertAbove(this),Zt},toDataURL:function(){var $t=this._image,Zt=$t&&$t.src;if(/^data:/.test(Zt))return Zt;var or=this.getCanvas();return or?or.toDataURL.apply(or,arguments):null},drawImage:function($t){var Zt=jt.read(arguments,1);this.getContext(!0).drawImage($t,Zt.x,Zt.y)},getAverageColor:function($t){var Zt,or;if($t?$t instanceof mr?(or=$t,Zt=$t.getBounds()):typeof $t=="object"&&("width"in $t?Zt=new Ut($t):"x"in $t&&(Zt=new Ut($t.x-.5,$t.y-.5,1,1))):Zt=this.getBounds(),!Zt)return null;var ur=32,dr=Math.min(Zt.width,ur),gr=Math.min(Zt.height,ur),Ar=xr._sampleContext;Ar?Ar.clearRect(0,0,ur+1,ur+1):Ar=xr._sampleContext=Tn.getContext(new zt(ur)),Ar.save();var _r=new Yt().scale(dr/Zt.width,gr/Zt.height).translate(-Zt.x,-Zt.y);_r.applyToContext(Ar),or&&or.draw(Ar,new ct({clip:!0,matrices:[_r]})),this._matrix.applyToContext(Ar);var Nr=this.getElement(),Fr=this._size;Nr&&Ar.drawImage(Nr,-Fr.width/2,-Fr.height/2),Ar.restore();for(var Vr=Ar.getImageData(.5,.5,Math.ceil(dr),Math.ceil(gr)).data,Hr=[0,0,0],$r=0,Br=0,en=Vr.length;Br<en;Br+=4){var Kr=Vr[Br+3];$r+=Kr,Kr/=255,Hr[0]+=Vr[Br]*Kr,Hr[1]+=Vr[Br+1]*Kr,Hr[2]+=Vr[Br+2]*Kr}for(var Br=0;Br<3;Br++)Hr[Br]/=$r;return $r?an.read(Hr):null},getPixel:function(){var $t=jt.read(arguments),Zt=this.getContext().getImageData($t.x,$t.y,1,1).data;return new an("rgb",[Zt[0]/255,Zt[1]/255,Zt[2]/255],Zt[3]/255)},setPixel:function(){var $t=arguments,Zt=jt.read($t),or=an.read($t),ur=or._convert("rgb"),dr=or._alpha,gr=this.getContext(!0),Ar=gr.createImageData(1,1),_r=Ar.data;_r[0]=ur[0]*255,_r[1]=ur[1]*255,_r[2]=ur[2]*255,_r[3]=dr!=null?dr*255:255,gr.putImageData(Ar,Zt.x,Zt.y)},clear:function(){var $t=this._size;this.getContext(!0).clearRect(0,0,$t.width+1,$t.height+1)},createImageData:function(){var $t=zt.read(arguments);return this.getContext().createImageData($t.width,$t.height)},getImageData:function(){var $t=Ut.read(arguments);return $t.isEmpty()&&($t=new Ut(this._size)),this.getContext().getImageData($t.x,$t.y,$t.width,$t.height)},putImageData:function($t){var Zt=jt.read(arguments,1);this.getContext(!0).putImageData($t,Zt.x,Zt.y)},setImageData:function($t){this.setSize($t),this.getContext(!0).putImageData($t,0,0)},_getBounds:function($t,Zt){var or=new Ut(this._size).setCenter(0,0);return $t?$t._transformBounds(or):or},_hitTestSelf:function($t){if(this._contains($t)){var Zt=this;return new kr("pixel",Zt,{offset:$t.add(Zt._size.divide(2)).round(),color:{get:function(){return Zt.getPixel(this.offset)}}})}},_draw:function($t,Zt,or){var ur=this.getElement();if(ur&&ur.width>0&&ur.height>0){$t.globalAlpha=Rt.clamp(this._opacity,0,1),this._setStyles($t,Zt,or);var dr=this._smoothing,gr=dr==="off";pn.setPrefixed($t,gr?"imageSmoothingEnabled":"imageSmoothingQuality",gr?!1:dr),$t.drawImage(ur,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),yr=ir.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(Zt,or){this._initialize(Zt,or!==et&&jt.read(arguments,1))||this.setDefinition(Zt instanceof Sr?Zt:new Sr(Zt))},_equals:function($t){return this._definition===$t._definition},copyContent:function($t){this.setDefinition($t._definition)},getDefinition:function(){return this._definition},setDefinition:function($t){this._definition=$t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function($t,Zt){var or=this._definition._item;return or._getCachedBounds(or._matrix.prepended($t),Zt)},_hitTestSelf:function($t,Zt,or){var ur=Zt.extend({all:!1}),dr=this._definition._item._hitTest($t,ur,or);return dr&&(dr.item=this),dr},_draw:function($t,Zt){this._definition._item.draw($t,Zt)}}),Sr=ct.extend({_class:"SymbolDefinition",initialize:function(Zt,or){this._id=Ft.get(),this.project=Bn.project,Zt&&this.setItem(Zt,or)},_serialize:function($t,Zt){return Zt.add(this,function(){return ct.serialize([this._class,this._item],$t,!1,Zt)})},_changed:function($t){$t&8&&ir._clearBoundsCache(this),$t&1&&this.project._changed($t)},getItem:function(){return this._item},setItem:function($t,Zt){$t._symbol&&($t=$t.clone()),this._item&&(this._item._symbol=null),this._item=$t,$t.remove(),$t.setSelected(!1),Zt||$t.setPosition(new jt),$t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function($t){return new yr(this,$t)},clone:function(){return new Sr(this._item.clone(!1))},equals:function($t){return $t===this||$t&&this._item.equals($t._item)||!1}}),kr=ct.extend({_class:"HitResult",initialize:function(Zt,or,ur){this.type=Zt,this.item=or,ur&&this.inject(ur)},statics:{getOptions:function($t){var Zt=$t&&ct.read($t);return new ct({type:null,tolerance:Bn.settings.hitTolerance,fill:!Zt,stroke:!Zt,segments:!Zt,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},Zt)}}}),Pr=ct.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(Zt,or,ur,dr,gr,Ar){var _r=arguments.length,Nr,Fr,Vr,Hr;_r>0&&(Zt==null||typeof Zt=="object"?_r===1&&Zt&&"point"in Zt?(Nr=Zt.point,Fr=Zt.handleIn,Vr=Zt.handleOut,Hr=Zt.selection):(Nr=Zt,Fr=or,Vr=ur,Hr=dr):(Nr=[Zt,or],Fr=ur!==et?[ur,dr]:null,Vr=gr!==et?[gr,Ar]:null)),new Or(Nr,this,"_point"),new Or(Fr,this,"_handleIn"),new Or(Vr,this,"_handleOut"),Hr&&this.setSelection(Hr)},_serialize:function($t,Zt){var or=this._point,ur=this._selection,dr=ur||this.hasHandles()?[or,this._handleIn,this._handleOut]:or;return ur&&dr.push(ur),ct.serialize(dr,$t,!0,Zt)},_changed:function($t){var Zt=this._path;if(Zt){var or=Zt._curves,ur=this._index,dr;or&&((!$t||$t===this._point||$t===this._handleIn)&&(dr=ur>0?or[ur-1]:Zt._closed?or[or.length-1]:null)&&dr._changed(),(!$t||$t===this._point||$t===this._handleOut)&&(dr=or[ur])&&dr._changed()),Zt._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(jt.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(jt.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(jt.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var $t=this._handleIn,Zt=this._handleOut;return!$t.isZero()&&!Zt.isZero()&&$t.isCollinear(Zt)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function($t){var Zt=this._selection,or=this._path;this._selection=$t=$t||0,or&&$t!==Zt&&(or._updateSelection(this,Zt,$t),or._changed(257))},_changeSelection:function($t,Zt){var or=this._selection;this.setSelection(Zt?or|$t:or&~$t)},isSelected:function(){return!!(this._selection&7)},setSelected:function($t){this._changeSelection(7,$t)},getIndex:function(){return this._index!==et?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var $t=this._path,Zt=this._index;return $t?(Zt>0&&!$t._closed&&Zt===$t._segments.length-1&&Zt--,$t.getCurves()[Zt]||null):null},getLocation:function(){var $t=this.getCurve();return $t?new Tr($t,this===$t._segment1?0:1):null},getNext:function(){var $t=this._path&&this._path._segments;return $t&&($t[this._index+1]||this._path._closed&&$t[0])||null},smooth:function($t,Zt,or){var ur=$t||{},dr=ur.type,gr=ur.factor,Ar=this.getPrevious(),_r=this.getNext(),Nr=(Ar||this)._point,Fr=this._point,Vr=(_r||this)._point,Hr=Nr.getDistance(Fr),$r=Fr.getDistance(Vr);if(!dr||dr==="catmull-rom"){var Br=gr===et?.5:gr,en=Math.pow(Hr,Br),Kr=en*en,Yr=Math.pow($r,Br),zr=Yr*Yr;if(!Zt&&Ar){var Wr=2*zr+3*Yr*en+Kr,jr=3*Yr*(Yr+en);this.setHandleIn(jr!==0?new jt((zr*Nr._x+Wr*Fr._x-Kr*Vr._x)/jr-Fr._x,(zr*Nr._y+Wr*Fr._y-Kr*Vr._y)/jr-Fr._y):new jt)}if(!or&&_r){var Wr=2*Kr+3*en*Yr+zr,jr=3*en*(en+Yr);this.setHandleOut(jr!==0?new jt((Kr*Vr._x+Wr*Fr._x-zr*Nr._x)/jr-Fr._x,(Kr*Vr._y+Wr*Fr._y-zr*Nr._y)/jr-Fr._y):new jt)}}else if(dr==="geometric"){if(Ar&&_r){var Xr=Nr.subtract(Vr),Jr=gr===et?.4:gr,nn=Jr*Hr/(Hr+$r);Zt||this.setHandleIn(Xr.multiply(nn)),or||this.setHandleOut(Xr.multiply(nn-Jr))}}else throw new Error("Smoothing method '"+dr+"' not supported.")},getPrevious:function(){var $t=this._path&&this._path._segments;return $t&&($t[this._index-1]||this._path._closed&&$t[$t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var $t=this._path;return $t&&this._index===$t._segments.length-1||!1},reverse:function(){var $t=this._handleIn,Zt=this._handleOut,or=$t.clone();$t.set(Zt),Zt.set(or)},reversed:function(){return new Pr(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Pr(this._point,this._handleIn,this._handleOut)},equals:function($t){return $t===this||$t&&this._class===$t._class&&this._point.equals($t._point)&&this._handleIn.equals($t._handleIn)&&this._handleOut.equals($t._handleOut)||!1},toString:function(){var $t=["point: "+this._point];return this._handleIn.isZero()||$t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||$t.push("handleOut: "+this._handleOut),"{ "+$t.join(", ")+" }"},transform:function($t){this._transformCoordinates($t,new Array(6),!0),this._changed()},interpolate:function($t,Zt,or){var ur=1-or,dr=or,gr=$t._point,Ar=Zt._point,_r=$t._handleIn,Nr=Zt._handleIn,Fr=Zt._handleOut,Vr=$t._handleOut;this._point._set(ur*gr._x+dr*Ar._x,ur*gr._y+dr*Ar._y,!0),this._handleIn._set(ur*_r._x+dr*Nr._x,ur*_r._y+dr*Nr._y,!0),this._handleOut._set(ur*Vr._x+dr*Fr._x,ur*Vr._y+dr*Fr._y,!0),this._changed()},_transformCoordinates:function($t,Zt,or){var ur=this._point,dr=!or||!this._handleIn.isZero()?this._handleIn:null,gr=!or||!this._handleOut.isZero()?this._handleOut:null,Ar=ur._x,_r=ur._y,Nr=2;return Zt[0]=Ar,Zt[1]=_r,dr&&(Zt[Nr++]=dr._x+Ar,Zt[Nr++]=dr._y+_r),gr&&(Zt[Nr++]=gr._x+Ar,Zt[Nr++]=gr._y+_r),$t&&($t._transformCoordinates(Zt,Zt,Nr/2),Ar=Zt[0],_r=Zt[1],or?(ur._x=Ar,ur._y=_r,Nr=2,dr&&(dr._x=Zt[Nr++]-Ar,dr._y=Zt[Nr++]-_r),gr&&(gr._x=Zt[Nr++]-Ar,gr._y=Zt[Nr++]-_r)):(dr||(Zt[Nr++]=Ar,Zt[Nr++]=_r),gr||(Zt[Nr++]=Ar,Zt[Nr++]=_r))),Zt}}),Or=jt.extend({initialize:function(Zt,or,ur){var dr,gr,Ar;if(!Zt)dr=gr=0;else if((dr=Zt[0])!==et)gr=Zt[1];else{var _r=Zt;(dr=_r.x)===et&&(_r=jt.read(arguments),dr=_r.x),gr=_r.y,Ar=_r.selected}this._x=dr,this._y=gr,this._owner=or,or[ur]=this,Ar&&this.setSelected(!0)},_set:function($t,Zt){return this._x=$t,this._y=Zt,this._owner._changed(this),this},getX:function(){return this._x},setX:function($t){this._x=$t,this._owner._changed(this)},getY:function(){return this._y},setY:function($t){this._y=$t,this._owner._changed(this)},isZero:function(){var $t=Rt.isZero;return $t(this._x)&&$t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function($t){this._owner._changeSelection(this._getSelection(),$t)},_getSelection:function(){var $t=this._owner;return this===$t._point?1:this===$t._handleIn?2:this===$t._handleOut?4:0}}),hr=ct.extend({_class:"Curve",beans:!0,initialize:function(Zt,or,ur,dr,gr,Ar,_r,Nr){var Fr=arguments.length,Vr,Hr,$r,Br,en,Kr;Fr===3?(this._path=Zt,Vr=or,Hr=ur):Fr?Fr===1?"segment1"in Zt?(Vr=new Pr(Zt.segment1),Hr=new Pr(Zt.segment2)):"point1"in Zt?($r=Zt.point1,en=Zt.handle1,Kr=Zt.handle2,Br=Zt.point2):Array.isArray(Zt)&&($r=[Zt[0],Zt[1]],Br=[Zt[6],Zt[7]],en=[Zt[2]-Zt[0],Zt[3]-Zt[1]],Kr=[Zt[4]-Zt[6],Zt[5]-Zt[7]]):Fr===2?(Vr=new Pr(Zt),Hr=new Pr(or)):Fr===4?($r=Zt,en=or,Kr=ur,Br=dr):Fr===8&&($r=[Zt,or],Br=[_r,Nr],en=[ur-Zt,dr-or],Kr=[gr-_r,Ar-Nr]):(Vr=new Pr,Hr=new Pr),this._segment1=Vr||new Pr($r,null,en),this._segment2=Hr||new Pr(Br,Kr,null)},_serialize:function($t,Zt){return ct.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],$t,!0,Zt)},_changed:function(){this._length=this._bounds=et},clone:function(){return new hr(this._segment1,this._segment2)},toString:function(){var $t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||$t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||$t.push("handle2: "+this._segment2._handleIn),$t.push("point2: "+this._segment2._point),"{ "+$t.join(", ")+" }"},classify:function(){return hr.classify(this.getValues())},remove:function(){var $t=!1;if(this._path){var Zt=this._segment2,or=Zt._handleOut;$t=Zt.remove(),$t&&this._segment1._handleOut.set(or)}return $t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(jt.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(jt.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(jt.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(jt.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var $t=this._path&&this._path._curves;return $t&&($t[this._segment1._index+1]||this._path._closed&&$t[0])||null},getPrevious:function(){var $t=this._path&&this._path._curves;return $t&&($t[this._segment1._index-1]||this._path._closed&&$t[$t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var $t=this._path;return $t&&this._segment1._index===$t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function($t){this.getPoint1().setSelected($t),this.getHandle1().setSelected($t),this.getHandle2().setSelected($t),this.getPoint2().setSelected($t)},getValues:function($t){return hr.getValues(this._segment1,this._segment2,$t)},getPoints:function(){for(var $t=this.getValues(),Zt=[],or=0;or<8;or+=2)Zt.push(new jt($t[or],$t[or+1]));return Zt}},{getLength:function(){return this._length==null&&(this._length=hr.getLength(this.getValues(),0,1)),this._length},getArea:function(){return hr.getArea(this.getValues())},getLine:function(){return new er(this._segment1._point,this._segment2._point)},getPart:function($t,Zt){return new hr(hr.getPart(this.getValues(),$t,Zt))},getPartLength:function($t,Zt){return hr.getLength(this.getValues(),$t,Zt)},divideAt:function($t){return this.divideAtTime($t&&$t.curve===this?$t.time:this.getTimeAt($t))},divideAtTime:function($t,Zt){var or=1e-8,ur=1-or,dr=null;if($t>=or&&$t<=ur){var gr=hr.subdivide(this.getValues(),$t),Ar=gr[0],_r=gr[1],Nr=Zt||this.hasHandles(),Fr=this._segment1,Vr=this._segment2,Hr=this._path;Nr&&(Fr._handleOut._set(Ar[2]-Ar[0],Ar[3]-Ar[1]),Vr._handleIn._set(_r[4]-_r[6],_r[5]-_r[7]));var $r=Ar[6],Br=Ar[7],en=new Pr(new jt($r,Br),Nr&&new jt(Ar[4]-$r,Ar[5]-Br),Nr&&new jt(_r[2]-$r,_r[3]-Br));Hr?(Hr.insert(Fr._index+1,en),dr=this.getNext()):(this._segment2=en,this._changed(),dr=new hr(en,Vr))}return dr},splitAt:function($t){var Zt=this._path;return Zt?Zt.splitAt($t):null},splitAtTime:function($t){return this.splitAt(this.getLocationAtTime($t))},divide:function($t,Zt){return this.divideAtTime($t===et?.5:Zt?$t:this.getTimeAt($t))},split:function($t,Zt){return this.splitAtTime($t===et?.5:Zt?$t:this.getTimeAt($t))},reversed:function(){return new hr(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function($t,Zt,or,ur){var dr=$t._point,gr=$t._handleOut,Ar=Zt._handleIn,_r=Zt._point,Nr=dr.x,Fr=dr.y,Vr=_r.x,Hr=_r.y,$r=ur?[Nr,Fr,Nr,Fr,Vr,Hr,Vr,Hr]:[Nr,Fr,Nr+gr._x,Fr+gr._y,Vr+Ar._x,Hr+Ar._y,Vr,Hr];return or&&or._transformCoordinates($r,$r,4),$r},subdivide:function($t,Zt){var or=$t[0],ur=$t[1],dr=$t[2],gr=$t[3],Ar=$t[4],_r=$t[5],Nr=$t[6],Fr=$t[7];Zt===et&&(Zt=.5);var Vr=1-Zt,Hr=Vr*or+Zt*dr,$r=Vr*ur+Zt*gr,Br=Vr*dr+Zt*Ar,en=Vr*gr+Zt*_r,Kr=Vr*Ar+Zt*Nr,Yr=Vr*_r+Zt*Fr,zr=Vr*Hr+Zt*Br,Wr=Vr*$r+Zt*en,jr=Vr*Br+Zt*Kr,Xr=Vr*en+Zt*Yr,Jr=Vr*zr+Zt*jr,nn=Vr*Wr+Zt*Xr;return[[or,ur,Hr,$r,zr,Wr,Jr,nn],[Jr,nn,jr,Xr,Kr,Yr,Nr,Fr]]},getMonoCurves:function($t,Zt){var or=[],ur=Zt?0:1,dr=$t[ur+0],gr=$t[ur+2],Ar=$t[ur+4],_r=$t[ur+6];if(dr>=gr==gr>=Ar&&gr>=Ar==Ar>=_r||hr.isStraight($t))or.push($t);else{var Nr=3*(gr-Ar)-dr+_r,Fr=2*(dr+Ar)-4*gr,Vr=gr-dr,Hr=1e-8,$r=1-Hr,Br=[],en=Rt.solveQuadratic(Nr,Fr,Vr,Br,Hr,$r);if(!en)or.push($t);else{Br.sort();var Kr=Br[0],Yr=hr.subdivide($t,Kr);or.push(Yr[0]),en>1&&(Kr=(Br[1]-Kr)/(1-Kr),Yr=hr.subdivide(Yr[1],Kr),or.push(Yr[0])),or.push(Yr[1])}}return or},solveCubic:function($t,Zt,or,ur,dr,gr){var Ar=$t[Zt],_r=$t[Zt+2],Nr=$t[Zt+4],Fr=$t[Zt+6],Vr=0;if(!(Ar<or&&Fr<or&&_r<or&&Nr<or||Ar>or&&Fr>or&&_r>or&&Nr>or)){var Hr=3*(_r-Ar),$r=3*(Nr-_r)-Hr,Br=Fr-Ar-Hr-$r;Vr=Rt.solveCubic(Br,$r,Hr,Ar-or,ur,dr,gr)}return Vr},getTimeOf:function($t,Zt){var or=new jt($t[0],$t[1]),ur=new jt($t[6],$t[7]),dr=1e-12,gr=1e-7,Ar=Zt.isClose(or,dr)?0:Zt.isClose(ur,dr)?1:null;if(Ar===null)for(var _r=[Zt.x,Zt.y],Nr=[],Fr=0;Fr<2;Fr++)for(var Vr=hr.solveCubic($t,Fr,_r[Fr],Nr,0,1),Hr=0;Hr<Vr;Hr++){var $r=Nr[Hr];if(Zt.isClose(hr.getPoint($t,$r),gr))return $r}return Zt.isClose(or,gr)?0:Zt.isClose(ur,gr)?1:null},getNearestTime:function($t,Zt){if(hr.isStraight($t)){var or=$t[0],ur=$t[1],dr=$t[6],gr=$t[7],Ar=dr-or,_r=gr-ur,Nr=Ar*Ar+_r*_r;if(Nr===0)return 0;var Fr=((Zt.x-or)*Ar+(Zt.y-ur)*_r)/Nr;return Fr<1e-12?0:Fr>.999999999999?1:hr.getTimeOf($t,new jt(or+Fr*Ar,ur+Fr*_r))}var Vr=100,Hr=1/0,$r=0;function Br(Yr){if(Yr>=0&&Yr<=1){var zr=Zt.getDistance(hr.getPoint($t,Yr),!0);if(zr<Hr)return Hr=zr,$r=Yr,!0}}for(var en=0;en<=Vr;en++)Br(en/Vr);for(var Kr=1/(Vr*2);Kr>1e-8;)!Br($r-Kr)&&!Br($r+Kr)&&(Kr/=2);return $r},getPart:function($t,Zt,or){var ur=Zt>or;if(ur){var dr=Zt;Zt=or,or=dr}return Zt>0&&($t=hr.subdivide($t,Zt)[1]),or<1&&($t=hr.subdivide($t,(or-Zt)/(1-Zt))[0]),ur?[$t[6],$t[7],$t[4],$t[5],$t[2],$t[3],$t[0],$t[1]]:$t},isFlatEnough:function($t,Zt){var or=$t[0],ur=$t[1],dr=$t[2],gr=$t[3],Ar=$t[4],_r=$t[5],Nr=$t[6],Fr=$t[7],Vr=3*dr-2*or-Nr,Hr=3*gr-2*ur-Fr,$r=3*Ar-2*Nr-or,Br=3*_r-2*Fr-ur;return Math.max(Vr*Vr,$r*$r)+Math.max(Hr*Hr,Br*Br)<=16*Zt*Zt},getArea:function($t){var Zt=$t[0],or=$t[1],ur=$t[2],dr=$t[3],gr=$t[4],Ar=$t[5],_r=$t[6],Nr=$t[7];return 3*((Nr-or)*(ur+gr)-(_r-Zt)*(dr+Ar)+dr*(Zt-gr)-ur*(or-Ar)+Nr*(gr+Zt/3)-_r*(Ar+or/3))/20},getBounds:function($t){for(var Zt=$t.slice(0,2),or=Zt.slice(),ur=[0,0],dr=0;dr<2;dr++)hr._addBounds($t[dr],$t[dr+2],$t[dr+4],$t[dr+6],dr,0,Zt,or,ur);return new Ut(Zt[0],Zt[1],or[0]-Zt[0],or[1]-Zt[1])},_addBounds:function($t,Zt,or,ur,dr,gr,Ar,_r,Nr){function Fr(Jr,nn){var Zr=Jr-nn,on=Jr+nn;Zr<Ar[dr]&&(Ar[dr]=Zr),on>_r[dr]&&(_r[dr]=on)}gr/=2;var Vr=Ar[dr]+gr,Hr=_r[dr]-gr;if($t<Vr||Zt<Vr||or<Vr||ur<Vr||$t>Hr||Zt>Hr||or>Hr||ur>Hr)if(Zt<$t!=Zt<ur&&or<$t!=or<ur)Fr($t,0),Fr(ur,0);else{var $r=3*(Zt-or)-$t+ur,Br=2*($t+or)-4*Zt,en=Zt-$t,Kr=Rt.solveQuadratic($r,Br,en,Nr),Yr=1e-8,zr=1-Yr;Fr(ur,0);for(var Wr=0;Wr<Kr;Wr++){var jr=Nr[Wr],Xr=1-jr;Yr<=jr&&jr<=zr&&Fr(Xr*Xr*Xr*$t+3*Xr*Xr*jr*Zt+3*Xr*jr*jr*or+jr*jr*jr*ur,gr)}}}}},ct.each(["getBounds","getStrokeBounds","getHandleBounds"],function($t){this[$t]=function(){this._bounds||(this._bounds={});var Zt=this._bounds[$t];return Zt||(Zt=this._bounds[$t]=Er[$t]([this._segment1,this._segment2],!1,this._path)),Zt.clone()}},{}),ct.each({isStraight:function($t,Zt,or,ur){if(Zt.isZero()&&or.isZero())return!0;var dr=ur.subtract($t);if(dr.isZero())return!1;if(dr.isCollinear(Zt)&&dr.isCollinear(or)){var gr=new er($t,ur),Ar=1e-7;if(gr.getDistance($t.add(Zt))<Ar&&gr.getDistance(ur.add(or))<Ar){var _r=dr.dot(dr),Nr=dr.dot(Zt)/_r,Fr=dr.dot(or)/_r;return Nr>=0&&Nr<=1&&Fr<=0&&Fr>=-1}}return!1},isLinear:function($t,Zt,or,ur){var dr=ur.subtract($t).divide(3);return Zt.equals(dr)&&or.negate().equals(dr)}},function($t,Zt){this[Zt]=function(or){var ur=this._segment1,dr=this._segment2;return $t(ur._point,ur._handleOut,dr._handleIn,dr._point,or)},this.statics[Zt]=function(or,ur){var dr=or[0],gr=or[1],Ar=or[6],_r=or[7];return $t(new jt(dr,gr),new jt(or[2]-dr,or[3]-gr),new jt(or[4]-Ar,or[5]-_r),new jt(Ar,_r),ur)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function($t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>($t||0)},isCollinear:function($t){return $t&&this.isStraight()&&$t.isStraight()&&this.getLine().isCollinear($t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function($t,Zt){return this.getLocationAtTime(Zt?$t:this.getTimeAt($t))},getLocationAtTime:function($t){return $t!=null&&$t>=0&&$t<=1?new Tr(this,$t):null},getTimeAt:function($t,Zt){return hr.getTimeAt(this.getValues(),$t,Zt)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var $t=jt.read(arguments);return $t.isZero()?[]:hr.getTimesWithTangent(this.getValues(),$t)},getOffsetAtTime:function($t){return this.getPartLength(0,$t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(jt.read(arguments)))},getOffsetOf:function(){var $t=this.getLocationOf.apply(this,arguments);return $t?$t.getOffset():null},getTimeOf:function(){return hr.getTimeOf(this.getValues(),jt.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var $t=jt.read(arguments),Zt=this.getValues(),or=hr.getNearestTime(Zt,$t),ur=hr.getPoint(Zt,or);return new Tr(this,or,ur,null,$t.getDistance(ur))},getNearestPoint:function(){var $t=this.getNearestLocation.apply(this,arguments);return $t&&$t.getPoint()}},new function(){var $t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return ct.each($t,function(Zt){this[Zt+"At"]=function(or,ur){var dr=this.getValues();return hr[Zt](dr,ur?or:hr.getTimeAt(dr,or))},this[Zt+"AtTime"]=function(or){return hr[Zt](this.getValues(),or)}},{statics:{_evaluateMethods:$t}})},new function(){function $t(ur){var dr=ur[0],gr=ur[1],Ar=ur[2],_r=ur[3],Nr=ur[4],Fr=ur[5],Vr=ur[6],Hr=ur[7],$r=9*(Ar-Nr)+3*(Vr-dr),Br=6*(dr+Nr)-12*Ar,en=3*(Ar-dr),Kr=9*(_r-Fr)+3*(Hr-gr),Yr=6*(gr+Fr)-12*_r,zr=3*(_r-gr);return function(Wr){var jr=($r*Wr+Br)*Wr+en,Xr=(Kr*Wr+Yr)*Wr+zr;return Math.sqrt(jr*jr+Xr*Xr)}}function Zt(ur,dr){return Math.max(2,Math.min(16,Math.ceil(Math.abs(dr-ur)*32)))}function or(ur,dr,gr,Ar){if(dr==null||dr<0||dr>1)return null;var _r=ur[0],Nr=ur[1],Fr=ur[2],Vr=ur[3],Hr=ur[4],$r=ur[5],Br=ur[6],en=ur[7],Kr=Rt.isZero;Kr(Fr-_r)&&Kr(Vr-Nr)&&(Fr=_r,Vr=Nr),Kr(Hr-Br)&&Kr($r-en)&&(Hr=Br,$r=en);var Yr=3*(Fr-_r),zr=3*(Hr-Fr)-Yr,Wr=Br-_r-Yr-zr,jr=3*(Vr-Nr),Xr=3*($r-Vr)-jr,Jr=en-Nr-jr-Xr,nn,Zr;if(gr===0)nn=dr===0?_r:dr===1?Br:((Wr*dr+zr)*dr+Yr)*dr+_r,Zr=dr===0?Nr:dr===1?en:((Jr*dr+Xr)*dr+jr)*dr+Nr;else{var on=1e-8,hn=1-on;if(dr<on?(nn=Yr,Zr=jr):dr>hn?(nn=3*(Br-Hr),Zr=3*(en-$r)):(nn=(3*Wr*dr+2*zr)*dr+Yr,Zr=(3*Jr*dr+2*Xr)*dr+jr),Ar){nn===0&&Zr===0&&(dr<on||dr>hn)&&(nn=Hr-Fr,Zr=$r-Vr);var fn=Math.sqrt(nn*nn+Zr*Zr);fn&&(nn/=fn,Zr/=fn)}if(gr===3){var Hr=6*Wr*dr+2*zr,$r=6*Jr*dr+2*Xr,xn=Math.pow(nn*nn+Zr*Zr,3/2);nn=xn!==0?(nn*$r-Zr*Hr)/xn:0,Zr=0}}return gr===2?new jt(Zr,-nn):new jt(nn,Zr)}return{statics:{classify:function(ur){var dr=ur[0],gr=ur[1],Ar=ur[2],_r=ur[3],Nr=ur[4],Fr=ur[5],Vr=ur[6],Hr=ur[7],$r=dr*(Hr-Fr)+gr*(Nr-Vr)+Vr*Fr-Hr*Nr,Br=Ar*(gr-Hr)+_r*(Vr-dr)+dr*Hr-gr*Vr,en=Nr*(_r-gr)+Fr*(dr-Ar)+Ar*gr-_r*dr,Kr=3*en,Yr=Kr-Br,zr=Yr-Br+$r,Wr=Math.sqrt(zr*zr+Yr*Yr+Kr*Kr),jr=Wr!==0?1/Wr:0,Xr=Rt.isZero,Jr="serpentine";zr*=jr,Yr*=jr,Kr*=jr;function nn(fn,xn,cn){var vn=xn!==et,bn=vn&&xn>0&&xn<1,_n=vn&&cn>0&&cn<1;return vn&&(!(bn||_n)||fn==="loop"&&!(bn&&_n))&&(fn="arch",bn=_n=!1),{type:fn,roots:bn||_n?bn&&_n?xn<cn?[xn,cn]:[cn,xn]:[bn?xn:cn]:null}}if(Xr(zr))return Xr(Yr)?nn(Xr(Kr)?"line":"quadratic"):nn(Jr,Kr/(3*Yr));var Zr=3*Yr*Yr-4*zr*Kr;if(Xr(Zr))return nn("cusp",Yr/(2*zr));var on=Zr>0?Math.sqrt(Zr/3):Math.sqrt(-Zr),hn=2*zr;return nn(Zr>0?Jr:"loop",(Yr+on)/hn,(Yr-on)/hn)},getLength:function(ur,dr,gr,Ar){if(dr===et&&(dr=0),gr===et&&(gr=1),hr.isStraight(ur)){var _r=ur;gr<1&&(_r=hr.subdivide(_r,gr)[0],dr/=gr),dr>0&&(_r=hr.subdivide(_r,dr)[1]);var Nr=_r[6]-_r[0],Fr=_r[7]-_r[1];return Math.sqrt(Nr*Nr+Fr*Fr)}return Rt.integrate(Ar||$t(ur),dr,gr,Zt(dr,gr))},getTimeAt:function(ur,dr,gr){if(gr===et&&(gr=dr<0?1:0),dr===0)return gr;var Ar=Math.abs,_r=1e-12,Nr=dr>0,Fr=Nr?gr:0,Vr=Nr?1:gr,Hr=$t(ur),$r=hr.getLength(ur,Fr,Vr,Hr),Br=Ar(dr)-$r;if(Ar(Br)<_r)return Nr?Vr:Fr;if(Br>_r)return null;var en=dr/$r,Kr=0;function Yr(zr){return Kr+=Rt.integrate(Hr,gr,zr,Zt(gr,zr)),gr=zr,Kr-dr}return Rt.findRoot(Yr,Hr,gr+en,Fr,Vr,32,1e-12)},getPoint:function(ur,dr){return or(ur,dr,0,!1)},getTangent:function(ur,dr){return or(ur,dr,1,!0)},getWeightedTangent:function(ur,dr){return or(ur,dr,1,!1)},getNormal:function(ur,dr){return or(ur,dr,2,!0)},getWeightedNormal:function(ur,dr){return or(ur,dr,2,!1)},getCurvature:function(ur,dr){return or(ur,dr,3,!1).x},getPeaks:function(ur){var dr=ur[0],gr=ur[1],Ar=ur[2],_r=ur[3],Nr=ur[4],Fr=ur[5],Vr=ur[6],Hr=ur[7],$r=-dr+3*Ar-3*Nr+Vr,Br=3*dr-6*Ar+3*Nr,en=-3*dr+3*Ar,Kr=-gr+3*_r-3*Fr+Hr,Yr=3*gr-6*_r+3*Fr,zr=-3*gr+3*_r,Wr=1e-8,jr=1-Wr,Xr=[];return Rt.solveCubic(9*($r*$r+Kr*Kr),9*($r*Br+Yr*Kr),2*(Br*Br+Yr*Yr)+3*(en*$r+zr*Kr),en*Br+Yr*zr,Xr,Wr,jr),Xr.sort()}}}},new function(){function $t(Br,en,Kr,Yr,zr,Wr,jr){var Xr=!jr&&Kr.getPrevious()===zr,Jr=!jr&&Kr!==zr&&Kr.getNext()===zr,nn=1e-8,Zr=1-nn;if(Yr!==null&&Yr>=(Xr?nn:0)&&Yr<=(Jr?Zr:1)&&Wr!==null&&Wr>=(Jr?nn:0)&&Wr<=(Xr?Zr:1)){var on=new Tr(Kr,Yr,null,jr),hn=new Tr(zr,Wr,null,jr);on._intersection=hn,hn._intersection=on,(!en||en(on))&&Tr.insert(Br,on,!0)}}function Zt(Br,en,Kr,Yr,zr,Wr,jr,Xr,Jr,nn,Zr,on,hn){if(++Jr>=4096||++Xr>=40)return Jr;var fn=1e-9,xn=en[0],cn=en[1],vn=en[6],bn=en[7],_n=er.getSignedDistance,Cn=_n(xn,cn,vn,bn,en[2],en[3]),Fn=_n(xn,cn,vn,bn,en[4],en[5]),Wn=Cn*Fn>0?3/4:4/9,Yn=Wn*Math.min(0,Cn,Fn),Qn=Wn*Math.max(0,Cn,Fn),ss=_n(xn,cn,vn,bn,Br[0],Br[1]),zn=_n(xn,cn,vn,bn,Br[2],Br[3]),Gn=_n(xn,cn,vn,bn,Br[4],Br[5]),es=_n(xn,cn,vn,bn,Br[6],Br[7]),ls=or(ss,zn,Gn,es),as=ls[0],ys=ls[1],vs,_s;if(Cn===0&&Fn===0&&ss===0&&zn===0&&Gn===0&&es===0||(vs=ur(as,ys,Yn,Qn))==null||(_s=ur(as.reverse(),ys.reverse(),Yn,Qn))==null)return Jr;var Cs=nn+(Zr-nn)*vs,xs=nn+(Zr-nn)*_s;if(Math.max(hn-on,xs-Cs)<fn){var ga=(Cs+xs)/2,uo=(on+hn)/2;$t(zr,Wr,jr?Yr:Kr,jr?uo:ga,jr?Kr:Yr,jr?ga:uo)}else{Br=hr.getPart(Br,vs,_s);var Oo=hn-on;if(_s-vs>.8)if(xs-Cs>Oo){var Jn=hr.subdivide(Br,.5),ga=(Cs+xs)/2;Jr=Zt(en,Jn[0],Yr,Kr,zr,Wr,!jr,Xr,Jr,on,hn,Cs,ga),Jr=Zt(en,Jn[1],Yr,Kr,zr,Wr,!jr,Xr,Jr,on,hn,ga,xs)}else{var Jn=hr.subdivide(en,.5),uo=(on+hn)/2;Jr=Zt(Jn[0],Br,Yr,Kr,zr,Wr,!jr,Xr,Jr,on,uo,Cs,xs),Jr=Zt(Jn[1],Br,Yr,Kr,zr,Wr,!jr,Xr,Jr,uo,hn,Cs,xs)}else Oo===0||Oo>=fn?Jr=Zt(en,Br,Yr,Kr,zr,Wr,!jr,Xr,Jr,on,hn,Cs,xs):Jr=Zt(Br,en,Kr,Yr,zr,Wr,jr,Xr,Jr,Cs,xs,on,hn)}return Jr}function or(Br,en,Kr,Yr){var zr=[0,Br],Wr=[1/3,en],jr=[2/3,Kr],Xr=[1,Yr],Jr=en-(2*Br+Yr)/3,nn=Kr-(Br+2*Yr)/3,Zr;if(Jr*nn<0)Zr=[[zr,Wr,Xr],[zr,jr,Xr]];else{var on=Jr/nn;Zr=[on>=2?[zr,Wr,Xr]:on<=.5?[zr,jr,Xr]:[zr,Wr,jr,Xr],[zr,Xr]]}return(Jr||nn)<0?Zr.reverse():Zr}function ur(Br,en,Kr,Yr){return Br[0][1]<Kr?dr(Br,!0,Kr):en[0][1]>Yr?dr(en,!1,Yr):Br[0][0]}function dr(Br,en,Kr){for(var Yr=Br[0][0],zr=Br[0][1],Wr=1,jr=Br.length;Wr<jr;Wr++){var Xr=Br[Wr][0],Jr=Br[Wr][1];if(en?Jr>=Kr:Jr<=Kr)return Jr===Kr?Xr:Yr+(Kr-zr)*(Xr-Yr)/(Jr-zr);Yr=Xr,zr=Jr}return null}function gr(Br,en,Kr,Yr,zr){var Wr=Rt.isZero;if(Wr(Yr)&&Wr(zr)){var jr=hr.getTimeOf(Br,new jt(en,Kr));return jr===null?[]:[jr]}for(var Xr=Math.atan2(-zr,Yr),Jr=Math.sin(Xr),nn=Math.cos(Xr),Zr=[],on=[],hn=0;hn<8;hn+=2){var fn=Br[hn]-en,xn=Br[hn+1]-Kr;Zr.push(fn*nn-xn*Jr,fn*Jr+xn*nn)}return hr.solveCubic(Zr,1,0,on,0,1),on}function Ar(Br,en,Kr,Yr,zr,Wr,jr){for(var Xr=en[0],Jr=en[1],nn=en[6],Zr=en[7],on=gr(Br,Xr,Jr,nn-Xr,Zr-Jr),hn=0,fn=on.length;hn<fn;hn++){var xn=on[hn],cn=hr.getPoint(Br,xn),vn=hr.getTimeOf(en,cn);vn!==null&&$t(zr,Wr,jr?Yr:Kr,jr?vn:xn,jr?Kr:Yr,jr?xn:vn)}}function _r(Br,en,Kr,Yr,zr,Wr){var jr=er.intersect(Br[0],Br[1],Br[6],Br[7],en[0],en[1],en[6],en[7]);jr&&$t(zr,Wr,Kr,hr.getTimeOf(Br,jr),Yr,hr.getTimeOf(en,jr))}function Nr(Br,en,Kr,Yr,zr,Wr){var jr=1e-12,Xr=Math.min,Jr=Math.max;if(Jr(Br[0],Br[2],Br[4],Br[6])+jr>Xr(en[0],en[2],en[4],en[6])&&Xr(Br[0],Br[2],Br[4],Br[6])-jr<Jr(en[0],en[2],en[4],en[6])&&Jr(Br[1],Br[3],Br[5],Br[7])+jr>Xr(en[1],en[3],en[5],en[7])&&Xr(Br[1],Br[3],Br[5],Br[7])-jr<Jr(en[1],en[3],en[5],en[7])){var nn=Hr(Br,en);if(nn)for(var Zr=0;Zr<2;Zr++){var on=nn[Zr];$t(zr,Wr,Kr,on[0],Yr,on[1],!0)}else{var hn=hr.isStraight(Br),fn=hr.isStraight(en),xn=hn&&fn,cn=hn&&!fn,vn=zr.length;if((xn?_r:hn||fn?Ar:Zt)(cn?en:Br,cn?Br:en,cn?Yr:Kr,cn?Kr:Yr,zr,Wr,cn,0,0,0,1,0,1),!xn||zr.length===vn)for(var Zr=0;Zr<4;Zr++){var bn=Zr>>1,_n=Zr&1,Cn=bn*6,Fn=_n*6,Wn=new jt(Br[Cn],Br[Cn+1]),Yn=new jt(en[Fn],en[Fn+1]);Wn.isClose(Yn,jr)&&$t(zr,Wr,Kr,bn,Yr,_n)}}}return zr}function Fr(Br,en,Kr,Yr){var zr=hr.classify(Br);if(zr.type==="loop"){var Wr=zr.roots;$t(Kr,Yr,en,Wr[0],en,Wr[1])}return Kr}function Vr(Br,en,Kr,Yr,zr,Wr){var jr=1e-7,Xr=!en;Xr&&(en=Br);for(var Jr=Br.length,nn=en.length,Zr=new Array(Jr),on=Xr?Zr:new Array(nn),hn=[],fn=0;fn<Jr;fn++)Zr[fn]=Br[fn].getValues(Yr);if(!Xr)for(var fn=0;fn<nn;fn++)on[fn]=en[fn].getValues(zr);for(var xn=kt.findCurveBoundsCollisions(Zr,on,jr),cn=0;cn<Jr;cn++){var vn=Br[cn],bn=Zr[cn];Xr&&Fr(bn,vn,hn,Kr);var _n=xn[cn];if(_n)for(var Cn=0;Cn<_n.length;Cn++){if(Wr&&hn.length)return hn;var Fn=_n[Cn];if(!Xr||Fn>cn){var Wn=en[Fn],Yn=on[Fn];Nr(bn,Yn,vn,Wn,hn,Kr)}}}return hn}function Hr(Br,en){function Kr(es){var ls=es[6]-es[0],as=es[7]-es[1];return ls*ls+as*as}var Yr=Math.abs,zr=er.getDistance,Wr=1e-8,jr=1e-7,Xr=hr.isStraight(Br),Jr=hr.isStraight(en),nn=Xr&&Jr,Zr=Kr(Br)<Kr(en),on=Zr?en:Br,hn=Zr?Br:en,fn=on[0],xn=on[1],cn=on[6]-fn,vn=on[7]-xn;if(zr(fn,xn,cn,vn,hn[0],hn[1],!0)<jr&&zr(fn,xn,cn,vn,hn[6],hn[7],!0)<jr)!nn&&zr(fn,xn,cn,vn,on[2],on[3],!0)<jr&&zr(fn,xn,cn,vn,on[4],on[5],!0)<jr&&zr(fn,xn,cn,vn,hn[2],hn[3],!0)<jr&&zr(fn,xn,cn,vn,hn[4],hn[5],!0)<jr&&(Xr=Jr=nn=!0);else if(nn)return null;if(Xr^Jr)return null;for(var bn=[Br,en],_n=[],Cn=0;Cn<4&&_n.length<2;Cn++){var Fn=Cn&1,Wn=Fn^1,Yn=Cn>>1,Qn=hr.getTimeOf(bn[Fn],new jt(bn[Wn][Yn?6:0],bn[Wn][Yn?7:1]));if(Qn!=null){var ss=Fn?[Yn,Qn]:[Qn,Yn];(!_n.length||Yr(ss[0]-_n[0][0])>Wr&&Yr(ss[1]-_n[0][1])>Wr)&&_n.push(ss)}if(Cn>2&&!_n.length)break}if(_n.length!==2)_n=null;else if(!nn){var zn=hr.getPart(Br,_n[0][0],_n[1][0]),Gn=hr.getPart(en,_n[0][1],_n[1][1]);(Yr(Gn[2]-zn[2])>jr||Yr(Gn[3]-zn[3])>jr||Yr(Gn[4]-zn[4])>jr||Yr(Gn[5]-zn[5])>jr)&&(_n=null)}return _n}function $r(Br,en){var Kr=Br[0],Yr=Br[1],zr=Br[2],Wr=Br[3],jr=Br[4],Xr=Br[5],Jr=Br[6],nn=Br[7],Zr=en.normalize(),on=Zr.x,hn=Zr.y,fn=3*Jr-9*jr+9*zr-3*Kr,xn=3*nn-9*Xr+9*Wr-3*Yr,cn=6*jr-12*zr+6*Kr,vn=6*Xr-12*Wr+6*Yr,bn=3*zr-3*Kr,_n=3*Wr-3*Yr,Cn=2*fn*hn-2*xn*on,Fn=[];if(Math.abs(Cn)<Rt.CURVETIME_EPSILON){var Wn=fn*_n-xn*bn,Cn=fn*vn-xn*cn;if(Cn!=0){var Yn=-Wn/Cn;Yn>=0&&Yn<=1&&Fn.push(Yn)}}else{var Qn=(cn*cn-4*fn*bn)*hn*hn+(-2*cn*vn+4*xn*bn+4*fn*_n)*on*hn+(vn*vn-4*xn*_n)*on*on,ss=cn*hn-vn*on;if(Qn>=0&&Cn!=0){var zn=Math.sqrt(Qn),Gn=-(ss+zn)/Cn,es=(-ss+zn)/Cn;Gn>=0&&Gn<=1&&Fn.push(Gn),es>=0&&es<=1&&Fn.push(es)}}return Fn}return{getIntersections:function(Br){var en=this.getValues(),Kr=Br&&Br!==this&&Br.getValues();return Kr?Nr(en,Kr,this,Br,[]):Fr(en,this,[])},statics:{getOverlaps:Hr,getIntersections:Vr,getCurveLineIntersections:gr,getTimesWithTangent:$r}}}),Tr=ct.extend({_class:"CurveLocation",initialize:function(Zt,or,ur,dr,gr){if(or>=.99999999){var Ar=Zt.getNext();Ar&&(or=0,Zt=Ar)}this._setCurve(Zt),this._time=or,this._point=ur||Zt.getPointAtTime(or),this._overlap=dr,this._distance=gr,this._intersection=this._next=this._previous=null},_setPath:function($t){this._path=$t,this._version=$t?$t._version:0},_setCurve:function($t){this._setPath($t._path),this._curve=$t,this._segment=null,this._segment1=$t._segment1,this._segment2=$t._segment2},_setSegment:function($t){var Zt=$t.getCurve();Zt?this._setCurve(Zt):(this._setPath($t._path),this._segment1=$t,this._segment2=null),this._segment=$t,this._time=$t===this._segment1?0:1,this._point=$t._point.clone()},getSegment:function(){var $t=this._segment;if(!$t){var Zt=this.getCurve(),or=this.getTime();or===0?$t=Zt._segment1:or===1?$t=Zt._segment2:or!=null&&($t=Zt.getPartLength(0,or)<Zt.getPartLength(or,1)?Zt._segment1:Zt._segment2),this._segment=$t}return $t},getCurve:function(){var $t=this._path,Zt=this;$t&&$t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function or(ur){var dr=ur&&ur.getCurve();if(dr&&(Zt._time=dr.getTimeOf(Zt._point))!=null)return Zt._setCurve(dr),dr}return this._curve||or(this._segment)||or(this._segment1)||or(this._segment2.getPrevious())},getPath:function(){var $t=this.getCurve();return $t&&$t._path},getIndex:function(){var $t=this.getCurve();return $t&&$t.getIndex()},getTime:function(){var $t=this.getCurve(),Zt=this._time;return $t&&Zt==null?this._time=$t.getTimeOf(this._point):Zt},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var $t=this._offset;if($t==null){$t=0;var Zt=this.getPath(),or=this.getIndex();if(Zt&&or!=null)for(var ur=Zt.getCurves(),dr=0;dr<or;dr++)$t+=ur[dr].getLength();this._offset=$t+=this.getCurveOffset()}return $t},getCurveOffset:function(){var $t=this._curveOffset;if($t==null){var Zt=this.getCurve(),or=this.getTime();this._curveOffset=$t=or!=null&&Zt&&Zt.getPartLength(0,or)}return $t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var $t=this.getCurve(),Zt=$t&&$t.divideAtTime(this.getTime());return Zt&&this._setSegment(Zt._segment1),Zt},split:function(){var $t=this.getCurve(),Zt=$t._path,or=$t&&$t.splitAtTime(this.getTime());return or&&this._setSegment(Zt.getLastSegment()),or},equals:function($t,Zt){var or=this===$t;if(!or&&$t instanceof Tr){var ur=this.getCurve(),dr=$t.getCurve(),gr=ur._path,Ar=dr._path;if(gr===Ar){var _r=Math.abs,Nr=1e-7,Fr=_r(this.getOffset()-$t.getOffset()),Vr=!Zt&&this._intersection,Hr=!Zt&&$t._intersection;or=(Fr<Nr||gr&&_r(gr.getLength()-Fr)<Nr)&&(!Vr&&!Hr||Vr&&Hr&&Vr.equals(Hr,!0))}}return or},toString:function(){var $t=[],Zt=this.getPoint(),or=Tt.instance;Zt&&$t.push("point: "+Zt);var ur=this.getIndex();ur!=null&&$t.push("index: "+ur);var dr=this.getTime();return dr!=null&&$t.push("time: "+or.number(dr)),this._distance!=null&&$t.push("distance: "+or.number(this._distance)),"{ "+$t.join(", ")+" }"},isTouching:function(){var $t=this._intersection;if($t&&this.getTangent().isCollinear($t.getTangent())){var Zt=this.getCurve(),or=$t.getCurve();return!(Zt.isStraight()&&or.isStraight()&&Zt.getLine().intersect(or.getLine()))}return!1},isCrossing:function(){var $t=this._intersection;if(!$t)return!1;var Zt=this.getTime(),or=$t.getTime(),ur=1e-8,dr=1-ur,gr=Zt>=ur&&Zt<=dr,Ar=or>=ur&&or<=dr;if(gr&&Ar)return!this.isTouching();var _r=this.getCurve(),Nr=_r&&Zt<ur?_r.getPrevious():_r,Fr=$t.getCurve(),Vr=Fr&&or<ur?Fr.getPrevious():Fr;if(Zt>dr&&(_r=_r.getNext()),or>dr&&(Fr=Fr.getNext()),!Nr||!_r||!Vr||!Fr)return!1;var Hr=[];function $r(on,hn){var fn=on.getValues(),xn=hr.classify(fn).roots||hr.getPeaks(fn),cn=xn.length,vn=hr.getLength(fn,hn&&cn?xn[cn-1]:0,!hn&&cn?xn[0]:1);Hr.push(cn?vn:vn/32)}function Br(on,hn,fn){return hn<fn?on>hn&&on<fn:on>hn||on<fn}gr||($r(Nr,!0),$r(_r,!1)),Ar||($r(Vr,!0),$r(Fr,!1));var en=this.getPoint(),Kr=Math.min.apply(Math,Hr),Yr=gr?_r.getTangentAtTime(Zt):_r.getPointAt(Kr).subtract(en),zr=gr?Yr.negate():Nr.getPointAt(-Kr).subtract(en),Wr=Ar?Fr.getTangentAtTime(or):Fr.getPointAt(Kr).subtract(en),jr=Ar?Wr.negate():Vr.getPointAt(-Kr).subtract(en),Xr=zr.getAngle(),Jr=Yr.getAngle(),nn=jr.getAngle(),Zr=Wr.getAngle();return!!(gr?Br(Xr,nn,Zr)^Br(Jr,nn,Zr)&&Br(Xr,Zr,nn)^Br(Jr,Zr,nn):Br(nn,Xr,Jr)^Br(Zr,Xr,Jr)&&Br(nn,Jr,Xr)^Br(Zr,Jr,Xr))},hasOverlap:function(){return!!this._overlap}},ct.each(hr._evaluateMethods,function($t){var Zt=$t+"At";this[$t]=function(){var or=this.getCurve(),ur=this.getTime();return ur!=null&&or&&or[Zt](ur,!0)}},{preserve:!0}),new function(){function $t(Zt,or,ur){var dr=Zt.length,gr=0,Ar=dr-1;function _r(en,Kr){for(var Yr=en+Kr;Yr>=-1&&Yr<=dr;Yr+=Kr){var zr=Zt[(Yr%dr+dr)%dr];if(!or.getPoint().isClose(zr.getPoint(),1e-7))break;if(or.equals(zr))return zr}return null}for(;gr<=Ar;){var Nr=gr+Ar>>>1,Fr=Zt[Nr],Vr;if(ur&&(Vr=or.equals(Fr)?Fr:_r(Nr,-1)||_r(Nr,1)))return or._overlap&&(Vr._overlap=Vr._intersection._overlap=!0),Vr;var Hr=or.getPath(),$r=Fr.getPath(),Br=Hr!==$r?Hr._id-$r._id:or.getIndex()+or.getTime()-(Fr.getIndex()+Fr.getTime());Br<0?Ar=Nr-1:gr=Nr+1}return Zt.splice(gr,0,or),or}return{statics:{insert:$t,expand:function(Zt){for(var or=Zt.slice(),ur=Zt.length-1;ur>=0;ur--)$t(or,Zt[ur]._intersection,!1);return or}}}}),mr=ir.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function($t){var Zt,or,ur;if(ct.isPlainObject($t)?(or=$t.segments,Zt=$t.pathData):Array.isArray($t)?or=$t:typeof $t=="string"&&(Zt=$t),or){var dr=or[0];ur=dr&&Array.isArray(dr[0])}else Zt&&(ur=(Zt.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(Zt));var gr=ur?Dr:Er;return new gr($t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function($t){this.isClockwise()!=($t=!!$t)&&this.reverse()},setPathData:function($t){var Zt=$t&&$t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),or,ur=!1,dr,gr,Ar=new jt,_r=new jt;function Nr(jr,Xr){var Jr=+or[jr];return ur&&(Jr+=Ar[Xr]),Jr}function Fr(jr){return new jt(Nr(jr,"x"),Nr(jr+1,"y"))}this.clear();for(var Vr=0,Hr=Zt&&Zt.length;Vr<Hr;Vr++){var $r=Zt[Vr],Br=$r[0],en=Br.toLowerCase();or=$r.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var Kr=or&&or.length;switch(ur=Br===en,dr==="z"&&!/[mz]/.test(en)&&this.moveTo(Ar),en){case"m":case"l":for(var Yr=en==="m",zr=0;zr<Kr;zr+=2)this[Yr?"moveTo":"lineTo"](Ar=Fr(zr)),Yr&&(_r=Ar,Yr=!1);gr=Ar;break;case"h":case"v":var Wr=en==="h"?"x":"y";Ar=Ar.clone();for(var zr=0;zr<Kr;zr++)Ar[Wr]=Nr(zr,Wr),this.lineTo(Ar);gr=Ar;break;case"c":for(var zr=0;zr<Kr;zr+=6)this.cubicCurveTo(Fr(zr),gr=Fr(zr+2),Ar=Fr(zr+4));break;case"s":for(var zr=0;zr<Kr;zr+=4)this.cubicCurveTo(/[cs]/.test(dr)?Ar.multiply(2).subtract(gr):Ar,gr=Fr(zr),Ar=Fr(zr+2)),dr=en;break;case"q":for(var zr=0;zr<Kr;zr+=4)this.quadraticCurveTo(gr=Fr(zr),Ar=Fr(zr+2));break;case"t":for(var zr=0;zr<Kr;zr+=2)this.quadraticCurveTo(gr=/[qt]/.test(dr)?Ar.multiply(2).subtract(gr):Ar,Ar=Fr(zr)),dr=en;break;case"a":for(var zr=0;zr<Kr;zr+=7)this.arcTo(Ar=Fr(zr+5),new zt(+or[zr],+or[zr+1]),+or[zr+2],+or[zr+4],+or[zr+3]);break;case"z":this.closePath(1e-12),Ar=_r;break}dr=en}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function($t){var Zt=$t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding($t):{};return Zt.onPath||!!(this.getFillRule()==="evenodd"?Zt.windingL&1||Zt.windingR&1:Zt.winding)},getIntersections:function($t,Zt,or,ur){var dr=this===$t||!$t,gr=this._matrix._orNullIfIdentity(),Ar=dr?gr:(or||$t._matrix)._orNullIfIdentity();return dr||this.getBounds(gr).intersects($t.getBounds(Ar),1e-12)?hr.getIntersections(this.getCurves(),!dr&&$t.getCurves(),Zt,gr,Ar,ur):[]},getCrossings:function($t){return this.getIntersections($t,function(Zt){return Zt.isCrossing()})},getNearestLocation:function(){for(var $t=jt.read(arguments),Zt=this.getCurves(),or=1/0,ur=null,dr=0,gr=Zt.length;dr<gr;dr++){var Ar=Zt[dr].getNearestLocation($t);Ar._distance<or&&(or=Ar._distance,ur=Ar)}return ur},getNearestPoint:function(){var $t=this.getNearestLocation.apply(this,arguments);return $t&&$t.getPoint()},interpolate:function($t,Zt,or){var ur=!this._children,dr=ur?"_segments":"_children",gr=$t[dr],Ar=Zt[dr],_r=this[dr];if(!gr||!Ar||gr.length!==Ar.length)throw new Error("Invalid operands in interpolate() call: "+$t+", "+Zt);var Nr=_r.length,Fr=Ar.length;if(Nr<Fr)for(var Vr=ur?Pr:Er,Hr=Nr;Hr<Fr;Hr++)this.add(new Vr);else Nr>Fr&&this[ur?"removeSegments":"removeChildren"](Fr,Nr);for(var Hr=0;Hr<Fr;Hr++)_r[Hr].interpolate(gr[Hr],Ar[Hr],or);ur&&(this.setClosed($t._closed),this._changed(9))},compare:function($t){var Zt=!1;if($t){var or=this._children||[this],ur=$t._children?$t._children.slice():[$t],dr=or.length,gr=ur.length,Ar=[],_r=0;Zt=!0;for(var Nr=kt.findItemBoundsCollisions(or,ur,Rt.GEOMETRIC_EPSILON),Fr=dr-1;Fr>=0&&Zt;Fr--){var Vr=or[Fr];Zt=!1;var Hr=Nr[Fr];if(Hr)for(var $r=Hr.length-1;$r>=0&&!Zt;$r--)Vr.compare(ur[Hr[$r]])&&(Ar[Hr[$r]]||(Ar[Hr[$r]]=!0,_r++),Zt=!0)}Zt=Zt&&_r===gr}return Zt}}),Er=mr.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(Zt){this._closed=!1,this._segments=[],this._version=0;var or=arguments,ur=Array.isArray(Zt)?typeof Zt[0]=="object"?Zt:or:Zt&&Zt.size===et&&(Zt.x!==et||Zt.point!==et)?or:null;ur&&ur.length>0?this.setSegments(ur):(this._curves=et,this._segmentSelection=0,!ur&&typeof Zt=="string"&&(this.setPathData(Zt),Zt=null)),this._initialize(!ur&&Zt)},_equals:function($t){return this._closed===$t._closed&&ct.equals(this._segments,$t._segments)},copyContent:function($t){this.setSegments($t._segments),this._closed=$t._closed},_changed:function $t(Zt){if($t.base.call(this,Zt),Zt&8){if(this._length=this._area=et,Zt&32)this._version++;else if(this._curves)for(var or=0,ur=this._curves.length;or<ur;or++)this._curves[or]._changed()}else Zt&64&&(this._bounds=et)},getStyle:function(){var $t=this._parent;return($t instanceof Dr?$t:this)._style},getSegments:function(){return this._segments},setSegments:function($t){var Zt=this.isFullySelected(),or=$t&&$t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=et,or){var ur=$t[or-1];typeof ur=="boolean"&&(this.setClosed(ur),or--),this._add(Pr.readList($t,0,{},or))}Zt&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var $t=this._curves,Zt=this._segments;if(!$t){var or=this._countCurves();$t=this._curves=new Array(or);for(var ur=0;ur<or;ur++)$t[ur]=new hr(this,Zt[ur],Zt[ur+1]||Zt[0])}return $t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var $t=this.getCurves();return $t[$t.length-1]},isClosed:function(){return this._closed},setClosed:function($t){if(this._closed!=($t=!!$t)){if(this._closed=$t,this._curves){var Zt=this._curves.length=this._countCurves();$t&&(this._curves[Zt-1]=new hr(this,this._segments[Zt-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function($t,Zt){var or=this._segments,ur=or.length,dr=new Tt(Zt),gr=new Array(6),Ar=!0,_r,Nr,Fr,Vr,Hr,$r,Br,en,Kr=[];function Yr(Wr,jr){if(Wr._transformCoordinates($t,gr),_r=gr[0],Nr=gr[1],Ar)Kr.push("M"+dr.pair(_r,Nr)),Ar=!1;else if(Hr=gr[2],$r=gr[3],Hr===_r&&$r===Nr&&Br===Fr&&en===Vr){if(!jr){var Xr=_r-Fr,Jr=Nr-Vr;Kr.push(Xr===0?"v"+dr.number(Jr):Jr===0?"h"+dr.number(Xr):"l"+dr.pair(Xr,Jr))}}else Kr.push("c"+dr.pair(Br-Fr,en-Vr)+" "+dr.pair(Hr-Fr,$r-Vr)+" "+dr.pair(_r-Fr,Nr-Vr));Fr=_r,Vr=Nr,Br=gr[4],en=gr[5]}if(!ur)return"";for(var zr=0;zr<ur;zr++)Yr(or[zr]);return this._closed&&ur>0&&(Yr(or[0],!0),Kr.push("z")),Kr.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function($t){for(var Zt=this._segments,or=new Array(6),ur=0,dr=Zt.length;ur<dr;ur++)Zt[ur]._transformCoordinates($t,or,!0);return!0},_add:function($t,Ar){for(var or=this._segments,ur=this._curves,dr=$t.length,gr=Ar==null,Ar=gr?or.length:Ar,_r=0;_r<dr;_r++){var Nr=$t[_r];Nr._path&&(Nr=$t[_r]=Nr.clone()),Nr._path=this,Nr._index=Ar+_r,Nr._selection&&this._updateSelection(Nr,0,Nr._selection)}if(gr)ct.push(or,$t);else{or.splice.apply(or,[Ar,0].concat($t));for(var _r=Ar+dr,Fr=or.length;_r<Fr;_r++)or[_r]._index=_r}if(ur){var Vr=this._countCurves(),Hr=Ar>0&&Ar+dr-1===Vr?Ar-1:Ar,$r=Hr,Br=Math.min(Hr+dr,Vr);$t._curves&&(ur.splice.apply(ur,[Hr,0].concat($t._curves)),$r+=$t._curves.length);for(var _r=$r;_r<Br;_r++)ur.splice(_r,0,new hr(this,null,null));this._adjustCurves(Hr,Br)}return this._changed(41),$t},_adjustCurves:function($t,Zt){for(var or=this._segments,ur=this._curves,dr,gr=$t;gr<Zt;gr++)dr=ur[gr],dr._path=this,dr._segment1=or[gr],dr._segment2=or[gr+1]||or[0],dr._changed();(dr=ur[this._closed&&!$t?or.length-1:$t-1])&&(dr._segment2=or[$t]||or[0],dr._changed()),(dr=ur[Zt])&&(dr._segment1=or[Zt],dr._changed())},_countCurves:function(){var $t=this._segments.length;return!this._closed&&$t>0?$t-1:$t},add:function($t){var Zt=arguments;return Zt.length>1&&typeof $t!="number"?this._add(Pr.readList(Zt)):this._add([Pr.read(Zt)])[0]},insert:function($t,Zt){var or=arguments;return or.length>2&&typeof Zt!="number"?this._add(Pr.readList(or,1),$t):this._add([Pr.read(or,1)],$t)[0]},addSegment:function(){return this._add([Pr.read(arguments)])[0]},insertSegment:function($t){return this._add([Pr.read(arguments,1)],$t)[0]},addSegments:function($t){return this._add(Pr.readList($t))},insertSegments:function($t,Zt){return this._add(Pr.readList(Zt),$t)},removeSegment:function($t){return this.removeSegments($t,$t+1)[0]||null},removeSegments:function($t,Zt,or){$t=$t||0,Zt=ct.pick(Zt,this._segments.length);var ur=this._segments,dr=this._curves,gr=ur.length,Ar=ur.splice($t,Zt-$t),_r=Ar.length;if(!_r)return Ar;for(var Nr=0;Nr<_r;Nr++){var Fr=Ar[Nr];Fr._selection&&this._updateSelection(Fr,Fr._selection,0),Fr._index=Fr._path=null}for(var Nr=$t,Vr=ur.length;Nr<Vr;Nr++)ur[Nr]._index=Nr;if(dr){for(var Hr=$t>0&&Zt===gr+(this._closed?1:0)?$t-1:$t,dr=dr.splice(Hr,_r),Nr=dr.length-1;Nr>=0;Nr--)dr[Nr]._path=null;or&&(Ar._curves=dr.slice(1)),this._adjustCurves(Hr,Hr)}return this._changed(41),Ar},clear:"#removeSegments",hasHandles:function(){for(var $t=this._segments,Zt=0,or=$t.length;Zt<or;Zt++)if($t[Zt].hasHandles())return!0;return!1},clearHandles:function(){for(var $t=this._segments,Zt=0,or=$t.length;Zt<or;Zt++)$t[Zt].clearHandles()},getLength:function(){if(this._length==null){for(var $t=this.getCurves(),Zt=0,or=0,ur=$t.length;or<ur;or++)Zt+=$t[or].getLength();this._length=Zt}return this._length},getArea:function(){var $t=this._area;if($t==null){var Zt=this._segments,or=this._closed;$t=0;for(var ur=0,dr=Zt.length;ur<dr;ur++){var gr=ur+1===dr;$t+=hr.getArea(hr.getValues(Zt[ur],Zt[gr?0:ur+1],null,gr&&!or))}this._area=$t}return $t},isFullySelected:function(){var $t=this._segments.length;return this.isSelected()&&$t>0&&this._segmentSelection===$t*7},setFullySelected:function($t){$t&&this._selectSegments(!0),this.setSelected($t)},setSelection:function $t(Zt){Zt&1||this._selectSegments(!1),$t.base.call(this,Zt)},_selectSegments:function($t){var Zt=this._segments,or=Zt.length,ur=$t?7:0;this._segmentSelection=ur*or;for(var dr=0;dr<or;dr++)Zt[dr]._selection=ur},_updateSelection:function($t,Zt,or){$t._selection=or;var ur=this._segmentSelection+=or-Zt;ur>0&&this.setSelected(!0)},divideAt:function($t){var Zt=this.getLocationAt($t),or;return Zt&&(or=Zt.getCurve().divideAt(Zt.getCurveOffset()))?or._segment1:null},splitAt:function($t){var Zt=this.getLocationAt($t),or=Zt&&Zt.index,ur=Zt&&Zt.time,dr=1e-8,gr=1-dr;ur>gr&&(or++,ur=0);var Ar=this.getCurves();if(or>=0&&or<Ar.length){ur>=dr&&Ar[or++].divideAtTime(ur);var _r=this.removeSegments(or,this._segments.length,!0),Nr;return this._closed?(this.setClosed(!1),Nr=this):(Nr=new Er(ir.NO_INSERT),Nr.insertAbove(this),Nr.copyAttributes(this)),Nr._add(_r,0),this.addSegment(_r[0]),Nr}return null},split:function($t,Zt){var or,ur=Zt===et?$t:(or=this.getCurves()[$t])&&or.getLocationAtTime(Zt);return ur!=null?this.splitAt(ur):null},join:function($t,Zt){var or=Zt||0;if($t&&$t!==this){var ur=$t._segments,dr=this.getLastSegment(),gr=$t.getLastSegment();if(!gr)return this;dr&&dr._point.isClose(gr._point,or)&&$t.reverse();var Ar=$t.getFirstSegment();if(dr&&dr._point.isClose(Ar._point,or))dr.setHandleOut(Ar._handleOut),this._add(ur.slice(1));else{var _r=this.getFirstSegment();_r&&_r._point.isClose(Ar._point,or)&&$t.reverse(),gr=$t.getLastSegment(),_r&&_r._point.isClose(gr._point,or)?(_r.setHandleIn(gr._handleIn),this._add(ur.slice(0,ur.length-1),0)):this._add(ur.slice())}$t._closed&&this._add([ur[0]]),$t.remove()}var Nr=this.getFirstSegment(),Fr=this.getLastSegment();return Nr!==Fr&&Nr._point.isClose(Fr._point,or)&&(Nr.setHandleIn(Fr._handleIn),Fr.remove(),this.setClosed(!0)),this},reduce:function($t){for(var Zt=this.getCurves(),or=$t&&$t.simplify,ur=or?1e-7:0,dr=Zt.length-1;dr>=0;dr--){var gr=Zt[dr];!gr.hasHandles()&&(!gr.hasLength(ur)||or&&gr.isCollinear(gr.getNext()))&&gr.remove()}return this},reverse:function(){this._segments.reverse();for(var $t=0,Zt=this._segments.length;$t<Zt;$t++){var or=this._segments[$t],ur=or._handleIn;or._handleIn=or._handleOut,or._handleOut=ur,or._index=$t}this._curves=null,this._changed(9)},flatten:function($t){for(var Zt=new Cr(this,$t||.25,256,!0),or=Zt.parts,ur=or.length,dr=[],gr=0;gr<ur;gr++)dr.push(new Pr(or[gr].curve.slice(0,2)));!this._closed&&ur>0&&dr.push(new Pr(or[ur-1].curve.slice(6))),this.setSegments(dr)},simplify:function($t){var Zt=new Lr(this).fit($t||2.5);return Zt&&this.setSegments(Zt),!!Zt},smooth:function($t){var Zt=this,or=$t||{},ur=or.type||"asymmetric",dr=this._segments,gr=dr.length,Ar=this._closed;function _r(as,ys){var vs=as&&as.index;if(vs!=null){var _s=as.path;if(_s&&_s!==Zt)throw new Error(as._class+" "+vs+" of "+_s+" is not part of "+Zt);ys&&as instanceof hr&&vs++}else vs=typeof as=="number"?as:ys;return Math.min(vs<0&&Ar?vs%gr:vs<0?vs+gr:vs,gr-1)}var Nr=Ar&&or.from===et&&or.to===et,Fr=_r(or.from,0),Vr=_r(or.to,gr-1);if(Fr>Vr)if(Ar)Fr-=gr;else{var Hr=Fr;Fr=Vr,Vr=Hr}if(/^(?:asymmetric|continuous)$/.test(ur)){var $r=ur==="asymmetric",Br=Math.min,en=Vr-Fr+1,Kr=en-1,Yr=Nr?Br(en,4):1,zr=Yr,Wr=Yr,jr=[];if(Ar||(zr=Br(1,Fr),Wr=Br(1,gr-Vr-1)),Kr+=zr+Wr,Kr<=1)return;for(var Xr=0,Jr=Fr-zr;Xr<=Kr;Xr++,Jr++)jr[Xr]=dr[(Jr<0?Jr+gr:Jr)%gr]._point;for(var nn=jr[0]._x+2*jr[1]._x,Zr=jr[0]._y+2*jr[1]._y,on=2,hn=Kr-1,fn=[nn],xn=[Zr],cn=[on],vn=[],bn=[],Xr=1;Xr<Kr;Xr++){var _n=Xr<hn,Cn=_n||$r?1:2,Fn=_n?4:$r?2:7,Wn=_n?4:$r?3:8,Yn=_n?2:$r?0:1,Qn=Cn/on;on=cn[Xr]=Fn-Qn,nn=fn[Xr]=Wn*jr[Xr]._x+Yn*jr[Xr+1]._x-Qn*nn,Zr=xn[Xr]=Wn*jr[Xr]._y+Yn*jr[Xr+1]._y-Qn*Zr}vn[hn]=fn[hn]/cn[hn],bn[hn]=xn[hn]/cn[hn];for(var Xr=Kr-2;Xr>=0;Xr--)vn[Xr]=(fn[Xr]-vn[Xr+1])/cn[Xr],bn[Xr]=(xn[Xr]-bn[Xr+1])/cn[Xr];vn[Kr]=(3*jr[Kr]._x-vn[hn])/2,bn[Kr]=(3*jr[Kr]._y-bn[hn])/2;for(var Xr=zr,ss=Kr-Wr,Jr=Fr;Xr<=ss;Xr++,Jr++){var zn=dr[Jr<0?Jr+gr:Jr],Gn=zn._point,es=vn[Xr]-Gn._x,ls=bn[Xr]-Gn._y;(Nr||Xr<ss)&&zn.setHandleOut(es,ls),(Nr||Xr>zr)&&zn.setHandleIn(-es,-ls)}}else for(var Xr=Fr;Xr<=Vr;Xr++)dr[Xr<0?Xr+gr:Xr].smooth(or,!Nr&&Xr===Fr,!Nr&&Xr===Vr)},toShape:function($t){if(!this._closed)return null;var Zt=this._segments,or,ur,dr,gr;function Ar($r,Br){var en=Zt[$r],Kr=en.getNext(),Yr=Zt[Br],zr=Yr.getNext();return en._handleOut.isZero()&&Kr._handleIn.isZero()&&Yr._handleOut.isZero()&&zr._handleIn.isZero()&&Kr._point.subtract(en._point).isCollinear(zr._point.subtract(Yr._point))}function _r($r){var Br=Zt[$r],en=Br.getPrevious(),Kr=Br.getNext();return en._handleOut.isZero()&&Br._handleIn.isZero()&&Br._handleOut.isZero()&&Kr._handleIn.isZero()&&Br._point.subtract(en._point).isOrthogonal(Kr._point.subtract(Br._point))}function Nr($r){var Br=Zt[$r],en=Br.getNext(),Kr=Br._handleOut,Yr=en._handleIn,zr=.5522847498307936;if(Kr.isOrthogonal(Yr)){var Wr=Br._point,jr=en._point,Xr=new er(Wr,Kr,!0).intersect(new er(jr,Yr,!0),!0);return Xr&&Rt.isZero(Kr.getLength()/Xr.subtract(Wr).getLength()-zr)&&Rt.isZero(Yr.getLength()/Xr.subtract(jr).getLength()-zr)}return!1}function Fr($r,Br){return Zt[$r]._point.getDistance(Zt[Br]._point)}if(!this.hasHandles()&&Zt.length===4&&Ar(0,2)&&Ar(1,3)&&_r(1)?(or=vr.Rectangle,ur=new zt(Fr(0,3),Fr(0,1)),gr=Zt[1]._point.add(Zt[2]._point).divide(2)):Zt.length===8&&Nr(0)&&Nr(2)&&Nr(4)&&Nr(6)&&Ar(1,5)&&Ar(3,7)?(or=vr.Rectangle,ur=new zt(Fr(1,6),Fr(0,3)),dr=ur.subtract(new zt(Fr(0,7),Fr(1,2))).divide(2),gr=Zt[3]._point.add(Zt[4]._point).divide(2)):Zt.length===4&&Nr(0)&&Nr(1)&&Nr(2)&&Nr(3)&&(Rt.isZero(Fr(0,2)-Fr(1,3))?(or=vr.Circle,dr=Fr(0,2)/2):(or=vr.Ellipse,dr=new zt(Fr(2,0)/2,Fr(3,1)/2)),gr=Zt[1]._point),or){var Vr=this.getPosition(!0),Hr=new or({center:Vr,size:ur,radius:dr,insert:!1});return Hr.copyAttributes(this,!0),Hr._matrix.prepend(this._matrix),Hr.rotate(gr.subtract(Vr).getAngle()+90),($t===et||$t)&&Hr.insertAbove(this),Hr}return null},toPath:"#clone",compare:function $t(Zt){if(!Zt||Zt instanceof Dr)return $t.base.call(this,Zt);var or=this.getCurves(),ur=Zt.getCurves(),dr=or.length,gr=ur.length;if(!dr||!gr)return dr==gr;for(var Ar=or[0].getValues(),_r=[],Nr=0,Fr,Vr=0,Hr,$r=0;$r<gr;$r++){var Yr=ur[$r].getValues();_r.push(Yr);var Br=hr.getOverlaps(Ar,Yr);if(Br){Fr=!$r&&Br[0][0]>0?gr-1:$r,Hr=Br[0][1];break}}for(var en=Math.abs,Kr=1e-8,Yr=_r[Fr],zr;Ar&&Yr;){var Br=hr.getOverlaps(Ar,Yr);if(Br){var Wr=Br[0][0];if(en(Wr-Vr)<Kr){Vr=Br[1][0],Vr===1&&(Ar=++Nr<dr?or[Nr].getValues():null,Vr=0);var jr=Br[0][1];if(en(jr-Hr)<Kr){if(zr||(zr=[Fr,jr]),Hr=Br[1][1],Hr===1&&(++Fr>=gr&&(Fr=0),Yr=_r[Fr]||ur[Fr].getValues(),Hr=0),!Ar)return zr[0]===Fr&&zr[1]===Hr;continue}}}break}return!1},_hitTestSelf:function($t,Zt,or,ur){var dr=this,gr=this.getStyle(),Ar=this._segments,_r=Ar.length,Nr=this._closed,Fr=Zt._tolerancePadding,Vr=Fr,Hr,$r,Br,en,Kr,Yr,zr=Zt.stroke&&gr.hasStroke(),Wr=Zt.fill&&gr.hasFill(),jr=Zt.curves,Xr=zr?gr.getStrokeWidth()/2:Wr&&Zt.tolerance>0||jr?0:null;Xr!==null&&(Xr>0?(Hr=gr.getStrokeJoin(),$r=gr.getStrokeCap(),Br=gr.getMiterLimit(),Vr=Vr.add(Er._getStrokePadding(Xr,ur))):Hr=$r="round");function Jr(vn,bn){return $t.subtract(vn).divide(bn).length<=1}function nn(vn,bn,_n){if(!Zt.selected||bn.isSelected()){var Cn=vn._point;if(bn!==Cn&&(bn=bn.add(Cn)),Jr(bn,Vr))return new kr(_n,dr,{segment:vn,point:bn})}}function Zr(vn,bn){return(bn||Zt.segments)&&nn(vn,vn._point,"segment")||!bn&&Zt.handles&&(nn(vn,vn._handleIn,"handle-in")||nn(vn,vn._handleOut,"handle-out"))}function on(vn){en.add(vn)}function hn(vn){var bn=Nr||vn._index>0&&vn._index<_r-1;if((bn?Hr:$r)==="round")return Jr(vn._point,Vr);if(en=new Er({internal:!0,closed:!0}),bn?vn.isSmooth()||Er._addBevelJoin(vn,Hr,Xr,Br,null,ur,on,!0):$r==="square"&&Er._addSquareCap(vn,$r,Xr,null,ur,on,!0),!en.isEmpty()){var _n;return en.contains($t)||(_n=en.getNearestLocation($t))&&Jr(_n.getPoint(),Fr)}}if(Zt.ends&&!Zt.segments&&!Nr){if(Yr=Zr(Ar[0],!0)||Zr(Ar[_r-1],!0))return Yr}else if(Zt.segments||Zt.handles){for(var fn=0;fn<_r;fn++)if(Yr=Zr(Ar[fn]))return Yr}if(Xr!==null){if(Kr=this.getNearestLocation($t),Kr){var xn=Kr.getTime();xn===0||xn===1&&_r>1?hn(Kr.getSegment())||(Kr=null):Jr(Kr.getPoint(),Vr)||(Kr=null)}if(!Kr&&Hr==="miter"&&_r>1)for(var fn=0;fn<_r;fn++){var cn=Ar[fn];if($t.getDistance(cn._point)<=Br*Xr&&hn(cn)){Kr=cn.getLocation();break}}}return!Kr&&Wr&&this._contains($t)||Kr&&!zr&&!jr?new kr("fill",this):Kr?new kr(zr?"stroke":"curve",this,{location:Kr,point:Kr.getPoint()}):null}},ct.each(hr._evaluateMethods,function($t){this[$t+"At"]=function(Zt){var or=this.getLocationAt(Zt);return or&&or[$t]()}},{beans:!1,getLocationOf:function(){for(var $t=jt.read(arguments),Zt=this.getCurves(),or=0,ur=Zt.length;or<ur;or++){var dr=Zt[or].getLocationOf($t);if(dr)return dr}return null},getOffsetOf:function(){var $t=this.getLocationOf.apply(this,arguments);return $t?$t.getOffset():null},getLocationAt:function($t){if(typeof $t=="number"){for(var Zt=this.getCurves(),or=0,ur=0,dr=Zt.length;ur<dr;ur++){var gr=or,Ar=Zt[ur];if(or+=Ar.getLength(),or>$t)return Ar.getLocationAt($t-gr)}if(Zt.length>0&&$t<=this.getLength())return new Tr(Zt[Zt.length-1],1)}else if($t&&$t.getPath&&$t.getPath()===this)return $t;return null},getOffsetsWithTangent:function(){var $t=jt.read(arguments);if($t.isZero())return[];for(var Zt=[],or=0,ur=this.getCurves(),dr=0,gr=ur.length;dr<gr;dr++){for(var Ar=ur[dr],_r=Ar.getTimesWithTangent($t),Nr=0,Fr=_r.length;Nr<Fr;Nr++){var Vr=or+Ar.getOffsetAtTime(_r[Nr]);Zt.indexOf(Vr)<0&&Zt.push(Vr)}or+=Ar.length}return Zt}}),new function(){function $t(or,ur,dr,gr){if(gr<=0)return;var Ar=gr/2,_r=gr-2,Nr=Ar-1,Fr=new Array(6),Vr,Hr;function $r(Wr){var jr=Fr[Wr],Xr=Fr[Wr+1];(Vr!=jr||Hr!=Xr)&&(or.beginPath(),or.moveTo(Vr,Hr),or.lineTo(jr,Xr),or.stroke(),or.beginPath(),or.arc(jr,Xr,Ar,0,Math.PI*2,!0),or.fill())}for(var Br=0,en=ur.length;Br<en;Br++){var Kr=ur[Br],Yr=Kr._selection;if(Kr._transformCoordinates(dr,Fr),Vr=Fr[0],Hr=Fr[1],Yr&2&&$r(2),Yr&4&&$r(4),or.fillRect(Vr-Ar,Hr-Ar,gr,gr),_r>0&&!(Yr&1)){var zr=or.fillStyle;or.fillStyle="#ffffff",or.fillRect(Vr-Nr,Hr-Nr,_r,_r),or.fillStyle=zr}}}function Zt(or,ur,dr){var gr=ur._segments,Ar=gr.length,_r=new Array(6),Nr=!0,Fr,Vr,Hr,$r,Br,en,Kr,Yr;function zr(jr){if(dr)jr._transformCoordinates(dr,_r),Fr=_r[0],Vr=_r[1];else{var Xr=jr._point;Fr=Xr._x,Vr=Xr._y}if(Nr)or.moveTo(Fr,Vr),Nr=!1;else{if(dr)Br=_r[2],en=_r[3];else{var Jr=jr._handleIn;Br=Fr+Jr._x,en=Vr+Jr._y}Br===Fr&&en===Vr&&Kr===Hr&&Yr===$r?or.lineTo(Fr,Vr):or.bezierCurveTo(Kr,Yr,Br,en,Fr,Vr)}if(Hr=Fr,$r=Vr,dr)Kr=_r[4],Yr=_r[5];else{var Jr=jr._handleOut;Kr=Hr+Jr._x,Yr=$r+Jr._y}}for(var Wr=0;Wr<Ar;Wr++)zr(gr[Wr]);ur._closed&&Ar>0&&zr(gr[0])}return{_draw:function(or,ur,dr,gr){var Ar=ur.dontStart,_r=ur.dontFinish||ur.clip,Nr=this.getStyle(),Fr=Nr.hasFill(),Vr=Nr.hasStroke(),Hr=Nr.getDashArray(),$r=!Bn.support.nativeDash&&Vr&&Hr&&Hr.length;Ar||or.beginPath(),(Fr||Vr&&!$r||_r)&&(Zt(or,this,gr),this._closed&&or.closePath());function Br(jr){return Hr[(jr%$r+$r)%$r]}if(!_r&&(Fr||Vr)&&(this._setStyles(or,ur,dr),Fr&&(or.fill(Nr.getFillRule()),or.shadowColor="rgba(0,0,0,0)"),Vr)){if($r){Ar||or.beginPath();for(var en=new Cr(this,.25,32,!1,gr),Kr=en.length,Yr=-Nr.getDashOffset(),zr,Wr=0;Yr>0;)Yr-=Br(Wr--)+Br(Wr--);for(;Yr<Kr;)zr=Yr+Br(Wr++),(Yr>0||zr>0)&&en.drawPart(or,Math.max(Yr,0),Math.max(zr,0)),Yr=zr+Br(Wr++)}or.stroke()}},_drawSelected:function(or,ur){or.beginPath(),Zt(or,this,ur),or.stroke(),$t(or,this._segments,ur,Bn.settings.handleSize)}}},new function(){function $t(Zt){var or=Zt._segments;if(!or.length)throw new Error("Use a moveTo() command first");return or[or.length-1]}return{moveTo:function(){var Zt=this._segments;Zt.length===1&&this.removeSegment(0),Zt.length||this._add([new Pr(jt.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Pr(jt.read(arguments))])},cubicCurveTo:function(){var Zt=arguments,or=jt.read(Zt),ur=jt.read(Zt),dr=jt.read(Zt),gr=$t(this);gr.setHandleOut(or.subtract(gr._point)),this._add([new Pr(dr,ur.subtract(dr))])},quadraticCurveTo:function(){var Zt=arguments,or=jt.read(Zt),ur=jt.read(Zt),dr=$t(this)._point;this.cubicCurveTo(or.add(dr.subtract(or).multiply(1/3)),or.add(ur.subtract(or).multiply(1/3)),ur)},curveTo:function(){var Zt=arguments,or=jt.read(Zt),ur=jt.read(Zt),dr=ct.pick(ct.read(Zt),.5),gr=1-dr,Ar=$t(this)._point,_r=or.subtract(Ar.multiply(gr*gr)).subtract(ur.multiply(dr*dr)).divide(2*dr*gr);if(_r.isNaN())throw new Error("Cannot put a curve through points with parameter = "+dr);this.quadraticCurveTo(_r,ur)},arcTo:function(){var Zt=arguments,or=Math.abs,ur=Math.sqrt,dr=$t(this),gr=dr._point,Ar=jt.read(Zt),_r,Nr=ct.peek(Zt),Fr=ct.pick(Nr,!0),Vr,Hr,$r,Br;if(typeof Fr=="boolean")var en=gr.add(Ar).divide(2),_r=en.add(en.subtract(gr).rotate(Fr?-90:90));else if(ct.remain(Zt)<=2)_r=Ar,Ar=jt.read(Zt);else if(!gr.equals(Ar)){var Kr=zt.read(Zt),Yr=Rt.isZero;if(Yr(Kr.width)||Yr(Kr.height))return this.lineTo(Ar);var zr=ct.read(Zt),Fr=!!ct.read(Zt),Wr=!!ct.read(Zt),en=gr.add(Ar).divide(2),jr=gr.subtract(en).rotate(-zr),Xr=jr.x,Jr=jr.y,nn=or(Kr.width),Zr=or(Kr.height),on=nn*nn,hn=Zr*Zr,fn=Xr*Xr,xn=Jr*Jr,cn=ur(fn/on+xn/hn);if(cn>1&&(nn*=cn,Zr*=cn,on=nn*nn,hn=Zr*Zr),cn=(on*hn-on*xn-hn*fn)/(on*xn+hn*fn),or(cn)<1e-12&&(cn=0),cn<0)throw new Error("Cannot create an arc with the given arguments");Vr=new jt(nn*Jr/Zr,-Zr*Xr/nn).multiply((Wr===Fr?-1:1)*ur(cn)).rotate(zr).add(en),Br=new Yt().translate(Vr).rotate(zr).scale(nn,Zr),$r=Br._inverseTransform(gr),Hr=$r.getDirectedAngle(Br._inverseTransform(Ar)),!Fr&&Hr>0?Hr-=360:Fr&&Hr<0&&(Hr+=360)}if(_r){var vn=new er(gr.add(_r).divide(2),_r.subtract(gr).rotate(90),!0),bn=new er(_r.add(Ar).divide(2),Ar.subtract(_r).rotate(90),!0),_n=new er(gr,Ar),Cn=_n.getSide(_r);if(Vr=vn.intersect(bn,!0),!Vr){if(!Cn)return this.lineTo(Ar);throw new Error("Cannot create an arc with the given arguments")}$r=gr.subtract(Vr),Hr=$r.getDirectedAngle(Ar.subtract(Vr));var Fn=_n.getSide(Vr,!0);Fn===0?Hr=Cn*or(Hr):Cn===Fn&&(Hr+=Hr<0?360:-360)}if(Hr){for(var Wn=1e-5,Yn=or(Hr),Qn=Yn>=360?4:Math.ceil((Yn-Wn)/90),ss=Hr/Qn,zn=ss*Math.PI/360,Gn=4/3*Math.sin(zn)/(1+Math.cos(zn)),es=[],ls=0;ls<=Qn;ls++){var jr=Ar,as=null;if(ls<Qn&&(as=$r.rotate(90).multiply(Gn),Br?(jr=Br._transformPoint($r),as=Br._transformPoint($r.add(as)).subtract(jr)):jr=Vr.add($r)),!ls)dr.setHandleOut(as);else{var ys=$r.rotate(-90).multiply(Gn);Br&&(ys=Br._transformPoint($r.add(ys)).subtract(jr)),es.push(new Pr(jr,ys,as))}$r=$r.rotate(ss)}this._add(es)}},lineBy:function(){var Zt=jt.read(arguments),or=$t(this)._point;this.lineTo(or.add(Zt))},curveBy:function(){var Zt=arguments,or=jt.read(Zt),ur=jt.read(Zt),dr=ct.read(Zt),gr=$t(this)._point;this.curveTo(gr.add(or),gr.add(ur),dr)},cubicCurveBy:function(){var Zt=arguments,or=jt.read(Zt),ur=jt.read(Zt),dr=jt.read(Zt),gr=$t(this)._point;this.cubicCurveTo(gr.add(or),gr.add(ur),gr.add(dr))},quadraticCurveBy:function(){var Zt=arguments,or=jt.read(Zt),ur=jt.read(Zt),dr=$t(this)._point;this.quadraticCurveTo(dr.add(or),dr.add(ur))},arcBy:function(){var Zt=arguments,or=$t(this)._point,ur=or.add(jt.read(Zt)),dr=ct.pick(ct.peek(Zt),!0);typeof dr=="boolean"?this.arcTo(ur,dr):this.arcTo(ur,or.add(jt.read(Zt)))},closePath:function(Zt){this.setClosed(!0),this.join(this,Zt)}}},{_getBounds:function($t,Zt){var or=Zt.handle?"getHandleBounds":Zt.stroke?"getStrokeBounds":"getBounds";return Er[or](this._segments,this._closed,this,$t,Zt)},statics:{getBounds:function($t,Zt,or,ur,dr,gr){var Ar=$t[0];if(!Ar)return new Ut;var _r=new Array(6),Nr=Ar._transformCoordinates(ur,new Array(6)),Fr=Nr.slice(0,2),Vr=Fr.slice(),Hr=new Array(2);function $r(Kr){Kr._transformCoordinates(ur,_r);for(var Yr=0;Yr<2;Yr++)hr._addBounds(Nr[Yr],Nr[Yr+4],_r[Yr+2],_r[Yr],Yr,gr?gr[Yr]:0,Fr,Vr,Hr);var zr=Nr;Nr=_r,_r=zr}for(var Br=1,en=$t.length;Br<en;Br++)$r($t[Br]);return Zt&&$r(Ar),new Ut(Fr[0],Fr[1],Vr[0]-Fr[0],Vr[1]-Fr[1])},getStrokeBounds:function($t,Zt,or,ur,dr){var gr=or.getStyle(),Ar=gr.hasStroke(),_r=gr.getStrokeWidth(),Nr=Ar&&or._getStrokeMatrix(ur,dr),Fr=Ar&&Er._getStrokePadding(_r,Nr),Vr=Er.getBounds($t,Zt,or,ur,dr,Fr);if(!Ar)return Vr;var Hr=_r/2,$r=gr.getStrokeJoin(),Br=gr.getStrokeCap(),en=gr.getMiterLimit(),Kr=new Ut(new zt(Fr));function Yr(nn){Vr=Vr.include(nn)}function zr(nn){Vr=Vr.unite(Kr.setCenter(nn._point.transform(ur)))}function Wr(nn,Zr){Zr==="round"||nn.isSmooth()?zr(nn):Er._addBevelJoin(nn,Zr,Hr,en,ur,Nr,Yr)}function jr(nn,Zr){Zr==="round"?zr(nn):Er._addSquareCap(nn,Zr,Hr,ur,Nr,Yr)}var Xr=$t.length-(Zt?0:1);if(Xr>0){for(var Jr=1;Jr<Xr;Jr++)Wr($t[Jr],$r);Zt?Wr($t[0],$r):(jr($t[0],Br),jr($t[$t.length-1],Br))}return Vr},_getStrokePadding:function($t,Zt){if(!Zt)return[$t,$t];var or=new jt($t,0).transform(Zt),ur=new jt(0,$t).transform(Zt),dr=or.getAngleInRadians(),gr=or.getLength(),Ar=ur.getLength(),_r=Math.sin(dr),Nr=Math.cos(dr),Fr=Math.tan(dr),Vr=Math.atan2(Ar*Fr,gr),Hr=Math.atan2(Ar,Fr*gr);return[Math.abs(gr*Math.cos(Vr)*Nr+Ar*Math.sin(Vr)*_r),Math.abs(Ar*Math.sin(Hr)*Nr+gr*Math.cos(Hr)*_r)]},_addBevelJoin:function($t,Zt,or,ur,dr,gr,Ar,_r){var Nr=$t.getCurve(),Fr=Nr.getPrevious(),Vr=Nr.getPoint1().transform(dr),Hr=Fr.getNormalAtTime(1).multiply(or).transform(gr),$r=Nr.getNormalAtTime(0).multiply(or).transform(gr),Br=Hr.getDirectedAngle($r);if((Br<0||Br>=180)&&(Hr=Hr.negate(),$r=$r.negate()),_r&&Ar(Vr),Ar(Vr.add(Hr)),Zt==="miter"){var en=new er(Vr.add(Hr),new jt(-Hr.y,Hr.x),!0).intersect(new er(Vr.add($r),new jt(-$r.y,$r.x),!0),!0);en&&Vr.getDistance(en)<=ur*or&&Ar(en)}Ar(Vr.add($r))},_addSquareCap:function($t,Zt,or,ur,dr,gr,Ar){var _r=$t._point.transform(ur),Nr=$t.getLocation(),Fr=Nr.getNormal().multiply(Nr.getTime()===0?or:-or).transform(dr);Zt==="square"&&(Ar&&(gr(_r.subtract(Fr)),gr(_r.add(Fr))),_r=_r.add(Fr.rotate(-90))),gr(_r.add(Fr)),gr(_r.subtract(Fr))},getHandleBounds:function($t,Zt,or,ur,dr){var gr=or.getStyle(),Ar=dr.stroke&&gr.hasStroke(),_r,Nr;if(Ar){var Fr=or._getStrokeMatrix(ur,dr),Vr=gr.getStrokeWidth()/2,Hr=Vr;gr.getStrokeJoin()==="miter"&&(Hr=Vr*gr.getMiterLimit()),gr.getStrokeCap()==="square"&&(Hr=Math.max(Hr,Vr*Math.SQRT2)),_r=Er._getStrokePadding(Vr,Fr),Nr=Er._getStrokePadding(Hr,Fr)}for(var $r=new Array(6),Br=1/0,en=-Br,Kr=Br,Yr=en,zr=0,Wr=$t.length;zr<Wr;zr++){var jr=$t[zr];jr._transformCoordinates(ur,$r);for(var Xr=0;Xr<6;Xr+=2){var Jr=Xr?_r:Nr,nn=Jr?Jr[0]:0,Zr=Jr?Jr[1]:0,on=$r[Xr],hn=$r[Xr+1],fn=on-nn,xn=on+nn,cn=hn-Zr,vn=hn+Zr;fn<Br&&(Br=fn),xn>en&&(en=xn),cn<Kr&&(Kr=cn),vn>Yr&&(Yr=vn)}}return new Ut(Br,Kr,en-Br,Yr-Kr)}}});Er.inject({statics:new function(){var $t=.5522847498307936,Zt=[new Pr([-1,0],[0,$t],[0,-$t]),new Pr([0,-1],[-$t,0],[$t,0]),new Pr([1,0],[0,-$t],[0,$t]),new Pr([0,1],[$t,0],[-$t,0])];function or(dr,gr,Ar){var _r=ct.getNamed(Ar),Nr=new Er(_r&&(_r.insert==!0?ir.INSERT:_r.insert==!1?ir.NO_INSERT:null));return Nr._add(dr),Nr._closed=gr,Nr.set(_r,ir.INSERT)}function ur(dr,gr,Ar){for(var _r=new Array(4),Nr=0;Nr<4;Nr++){var Fr=Zt[Nr];_r[Nr]=new Pr(Fr._point.multiply(gr).add(dr),Fr._handleIn.multiply(gr),Fr._handleOut.multiply(gr))}return or(_r,!0,Ar)}return{Line:function(){var dr=arguments;return or([new Pr(jt.readNamed(dr,"from")),new Pr(jt.readNamed(dr,"to"))],!1,dr)},Circle:function(){var dr=arguments,gr=jt.readNamed(dr,"center"),Ar=ct.readNamed(dr,"radius");return ur(gr,new zt(Ar),dr)},Rectangle:function(){var dr=arguments,gr=Ut.readNamed(dr,"rectangle"),Ar=zt.readNamed(dr,"radius",0,{readNull:!0}),_r=gr.getBottomLeft(!0),Nr=gr.getTopLeft(!0),Fr=gr.getTopRight(!0),Vr=gr.getBottomRight(!0),Hr;if(!Ar||Ar.isZero())Hr=[new Pr(_r),new Pr(Nr),new Pr(Fr),new Pr(Vr)];else{Ar=zt.min(Ar,gr.getSize(!0).divide(2));var $r=Ar.width,Br=Ar.height,en=$r*$t,Kr=Br*$t;Hr=[new Pr(_r.add($r,0),null,[-en,0]),new Pr(_r.subtract(0,Br),[0,Kr]),new Pr(Nr.add(0,Br),null,[0,-Kr]),new Pr(Nr.add($r,0),[-en,0],null),new Pr(Fr.subtract($r,0),null,[en,0]),new Pr(Fr.add(0,Br),[0,-Kr],null),new Pr(Vr.subtract(0,Br),null,[0,Kr]),new Pr(Vr.subtract($r,0),[en,0])]}return or(Hr,!0,dr)},RoundRectangle:"#Rectangle",Ellipse:function(){var dr=arguments,gr=vr._readEllipse(dr);return ur(gr.center,gr.radius,dr)},Oval:"#Ellipse",Arc:function(){var dr=arguments,gr=jt.readNamed(dr,"from"),Ar=jt.readNamed(dr,"through"),_r=jt.readNamed(dr,"to"),Nr=ct.getNamed(dr),Fr=new Er(Nr&&Nr.insert==!1&&ir.NO_INSERT);return Fr.moveTo(gr),Fr.arcTo(Ar,_r),Fr.set(Nr)},RegularPolygon:function(){for(var dr=arguments,gr=jt.readNamed(dr,"center"),Ar=ct.readNamed(dr,"sides"),_r=ct.readNamed(dr,"radius"),Nr=360/Ar,Fr=Ar%3===0,Vr=new jt(0,Fr?-_r:_r),Hr=Fr?-1:.5,$r=new Array(Ar),Br=0;Br<Ar;Br++)$r[Br]=new Pr(gr.add(Vr.rotate((Br+Hr)*Nr)));return or($r,!0,dr)},Star:function(){for(var dr=arguments,gr=jt.readNamed(dr,"center"),Ar=ct.readNamed(dr,"points")*2,_r=ct.readNamed(dr,"radius1"),Nr=ct.readNamed(dr,"radius2"),Fr=360/Ar,Vr=new jt(0,-1),Hr=new Array(Ar),$r=0;$r<Ar;$r++)Hr[$r]=new Pr(gr.add(Vr.rotate(Fr*$r).multiply($r%2?Nr:_r)));return or(Hr,!0,dr)}}}});var Dr=mr.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(Zt){this._children=[],this._namedChildren={},this._initialize(Zt)||(typeof Zt=="string"?this.setPathData(Zt):this.addChildren(Array.isArray(Zt)?Zt:arguments))},insertChildren:function $t(Zt,or){var ur=or,dr=ur[0];dr&&typeof dr[0]=="number"&&(ur=[ur]);for(var gr=or.length-1;gr>=0;gr--){var Ar=ur[gr];ur===or&&!(Ar instanceof Er)&&(ur=ct.slice(ur)),Array.isArray(Ar)?ur[gr]=new Er({segments:Ar,insert:!1}):Ar instanceof Dr&&(ur.splice.apply(ur,[gr,1].concat(Ar.removeChildren())),Ar.remove())}return $t.base.call(this,Zt,ur)},reduce:function $t(Zt){for(var or=this._children,ur=or.length-1;ur>=0;ur--){var dr=or[ur].reduce(Zt);dr.isEmpty()&&dr.remove()}if(!or.length){var dr=new Er(ir.NO_INSERT);return dr.copyAttributes(this),dr.insertAbove(this),this.remove(),dr}return $t.base.call(this)},isClosed:function(){for(var $t=this._children,Zt=0,or=$t.length;Zt<or;Zt++)if(!$t[Zt]._closed)return!1;return!0},setClosed:function($t){for(var Zt=this._children,or=0,ur=Zt.length;or<ur;or++)Zt[or].setClosed($t)},getFirstSegment:function(){var $t=this.getFirstChild();return $t&&$t.getFirstSegment()},getLastSegment:function(){var $t=this.getLastChild();return $t&&$t.getLastSegment()},getCurves:function(){for(var $t=this._children,Zt=[],or=0,ur=$t.length;or<ur;or++)ct.push(Zt,$t[or].getCurves());return Zt},getFirstCurve:function(){var $t=this.getFirstChild();return $t&&$t.getFirstCurve()},getLastCurve:function(){var $t=this.getLastChild();return $t&&$t.getLastCurve()},getArea:function(){for(var $t=this._children,Zt=0,or=0,ur=$t.length;or<ur;or++)Zt+=$t[or].getArea();return Zt},getLength:function(){for(var $t=this._children,Zt=0,or=0,ur=$t.length;or<ur;or++)Zt+=$t[or].getLength();return Zt},getPathData:function($t,Zt){for(var or=this._children,ur=[],dr=0,gr=or.length;dr<gr;dr++){var Ar=or[dr],_r=Ar._matrix;ur.push(Ar.getPathData($t&&!_r.isIdentity()?$t.appended(_r):$t,Zt))}return ur.join("")},_hitTestChildren:function $t(Zt,or,ur){return $t.base.call(this,Zt,or.class===Er||or.type==="path"?or:ct.set({},or,{fill:!1}),ur)},_draw:function($t,Zt,or,ur){var dr=this._children;if(dr.length){Zt=Zt.extend({dontStart:!0,dontFinish:!0}),$t.beginPath();for(var gr=0,Ar=dr.length;gr<Ar;gr++)dr[gr].draw($t,Zt,ur);if(!Zt.clip){this._setStyles($t,Zt,or);var _r=this._style;_r.hasFill()&&($t.fill(_r.getFillRule()),$t.shadowColor="rgba(0,0,0,0)"),_r.hasStroke()&&$t.stroke()}}},_drawSelected:function($t,Zt,or){for(var ur=this._children,dr=0,gr=ur.length;dr<gr;dr++){var Ar=ur[dr],_r=Ar._matrix;or[Ar._id]||Ar._drawSelected($t,_r.isIdentity()?Zt:Zt.appended(_r))}}},new function(){function $t(Zt,or){var ur=Zt._children;if(or&&!ur.length)throw new Error("Use a moveTo() command first");return ur[ur.length-1]}return ct.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(Zt){this[Zt]=function(){var or=$t(this,!0);or[Zt].apply(or,arguments)}},{moveTo:function(){var Zt=$t(this),or=Zt&&Zt.isEmpty()?Zt:new Er(ir.NO_INSERT);or!==Zt&&this.addChild(or),or.moveTo.apply(or,arguments)},moveBy:function(){var Zt=$t(this,!0),or=Zt&&Zt.getLastSegment(),ur=jt.read(arguments);this.moveTo(or?ur.add(or._point):ur)},closePath:function(Zt){$t(this,!0).closePath(Zt)}})},ct.each(["reverse","flatten","simplify","smooth"],function($t){this[$t]=function(Zt){for(var or=this._children,ur,dr=0,gr=or.length;dr<gr;dr++)ur=or[dr][$t](Zt)||ur;return ur}},{}));mr.inject(new function(){var $t=Math.min,Zt=Math.max,or=Math.abs,ur={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function dr(zr){return zr._children||[zr]}function gr(zr,Wr){var jr=zr.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(Wr){for(var Xr=dr(jr),Jr=0,nn=Xr.length;Jr<nn;Jr++){var zr=Xr[Jr];!zr._closed&&!zr.isEmpty()&&(zr.closePath(1e-12),zr.getFirstSegment().setHandleIn(0,0),zr.getLastSegment().setHandleOut(0,0))}jr=jr.resolveCrossings().reorient(jr.getFillRule()==="nonzero",!0)}return jr}function Ar(zr,Wr,jr,Xr,Jr){var nn=new Dr(ir.NO_INSERT);return nn.addChildren(zr,!0),nn=nn.reduce({simplify:Wr}),Jr&&Jr.insert==!1||nn.insertAbove(Xr&&jr.isSibling(Xr)&&jr.getIndex()<Xr.getIndex()?Xr:jr),nn.copyAttributes(jr,!0),nn}function _r(zr){return zr.hasOverlap()||zr.isCrossing()}function Nr(zr,Wr,jr,Xr){if(Xr&&(Xr.trace==!1||Xr.stroke)&&/^(subtract|intersect)$/.test(jr))return Fr(zr,Wr,jr);var Jr=gr(zr,!0),nn=Wr&&zr!==Wr&&gr(Wr,!0),Zr=ur[jr];Zr[jr]=!0,nn&&(Zr.subtract||Zr.exclude)^(nn.isClockwise()^Jr.isClockwise())&&nn.reverse();var on=Br(Tr.expand(Jr.getIntersections(nn,_r))),hn=dr(Jr),fn=nn&&dr(nn),xn=[],cn=[],vn;function bn(as){for(var ys=0,vs=as.length;ys<vs;ys++){var _s=as[ys];ct.push(xn,_s._segments),ct.push(cn,_s.getCurves()),_s._overlapsOnly=!0}}function _n(as){for(var ys=[],vs=0,_s=as&&as.length;vs<_s;vs++)ys.push(cn[as[vs]]);return ys}if(on.length){bn(hn),fn&&bn(fn);for(var Cn=new Array(cn.length),Fn=0,Wn=cn.length;Fn<Wn;Fn++)Cn[Fn]=cn[Fn].getValues();for(var Yn=kt.findCurveBoundsCollisions(Cn,Cn,0,!0),Qn={},Fn=0;Fn<cn.length;Fn++){var ss=cn[Fn],zn=ss._path._id,Gn=Qn[zn]=Qn[zn]||{};Gn[ss.getIndex()]={hor:_n(Yn[Fn].hor),ver:_n(Yn[Fn].ver)}}for(var Fn=0,Wn=on.length;Fn<Wn;Fn++)Kr(on[Fn]._segment,Jr,nn,Qn,Zr);for(var Fn=0,Wn=xn.length;Fn<Wn;Fn++){var es=xn[Fn],ls=es._intersection;es._winding||Kr(es,Jr,nn,Qn,Zr),ls&&ls._overlap||(es._path._overlapsOnly=!1)}vn=Yr(xn,Zr)}else vn=$r(fn?hn.concat(fn):hn.slice(),function(as){return!!Zr[as]});return Ar(vn,!0,zr,Wr,Xr)}function Fr(zr,Wr,jr){var Xr=gr(zr),Jr=gr(Wr),nn=Xr.getIntersections(Jr,_r),Zr=jr==="subtract",on=jr==="divide",hn={},fn=[];function xn(bn){if(!hn[bn._id]&&(on||Jr.contains(bn.getPointAt(bn.getLength()/2))^Zr))return fn.unshift(bn),hn[bn._id]=!0}for(var cn=nn.length-1;cn>=0;cn--){var vn=nn[cn].split();vn&&(xn(vn)&&vn.getFirstSegment().setHandleIn(0,0),Xr.getLastSegment().setHandleOut(0,0))}return xn(Xr),Ar(fn,!1,zr,Wr)}function Vr(zr,Wr){for(var jr=zr;jr;){if(jr===Wr)return;jr=jr._previous}for(;zr._next&&zr._next!==Wr;)zr=zr._next;if(!zr._next){for(;Wr._previous;)Wr=Wr._previous;zr._next=Wr,Wr._previous=zr}}function Hr(zr){for(var Wr=zr.length-1;Wr>=0;Wr--)zr[Wr].clearHandles()}function $r(zr,Wr,jr){var Xr=zr&&zr.length;if(Xr){var Jr=ct.each(zr,function(Yn,Qn){this[Yn._id]={container:null,winding:Yn.isClockwise()?1:-1,index:Qn}},{}),nn=zr.slice().sort(function(Yn,Qn){return or(Qn.getArea())-or(Yn.getArea())}),Zr=nn[0],on=kt.findItemBoundsCollisions(nn,null,Rt.GEOMETRIC_EPSILON);jr==null&&(jr=Zr.isClockwise());for(var hn=0;hn<Xr;hn++){var fn=nn[hn],xn=Jr[fn._id],cn=0,vn=on[hn];if(vn){for(var bn=null,_n=vn.length-1;_n>=0;_n--)if(vn[_n]<hn){bn=bn||fn.getInteriorPoint();var Cn=nn[vn[_n]];if(Cn.contains(bn)){var Fn=Jr[Cn._id];cn=Fn.winding,xn.winding+=cn,xn.container=Fn.exclude?Fn.container:Cn;break}}}if(Wr(xn.winding)===Wr(cn))xn.exclude=!0,zr[xn.index]=null;else{var Wn=xn.container;fn.setClockwise(Wn?!Wn.isClockwise():jr)}}}return zr}function Br(zr,Wr,jr){var Xr=Wr&&[],Jr=1e-8,nn=1-Jr,Zr=!1,on=jr||[],hn=jr&&{},fn,xn,cn;function vn(ys){return ys._path._id+"."+ys._segment1._index}for(var bn=(jr&&jr.length)-1;bn>=0;bn--){var _n=jr[bn];_n._path&&(hn[vn(_n)]=!0)}for(var bn=zr.length-1;bn>=0;bn--){var Cn=zr[bn],Fn=Cn._time,Wn=Fn,Yn=Wr&&!Wr(Cn),_n=Cn._curve,Qn;if(_n&&(_n!==xn?(Zr=!_n.hasHandles()||hn&&hn[vn(_n)],fn=[],cn=null,xn=_n):cn>=Jr&&(Fn/=cn)),Yn){fn&&fn.push(Cn);continue}else Wr&&Xr.unshift(Cn);if(cn=Wn,Fn<Jr)Qn=_n._segment1;else if(Fn>nn)Qn=_n._segment2;else{var ss=_n.divideAtTime(Fn,!0);Zr&&on.push(_n,ss),Qn=ss._segment1;for(var zn=fn.length-1;zn>=0;zn--){var Gn=fn[zn];Gn._time=(Gn._time-Fn)/(1-Fn)}}Cn._setSegment(Qn);var es=Qn._intersection,ls=Cn._intersection;if(es){Vr(es,ls);for(var as=es;as;)Vr(as._intersection,es),as=as._next}else Qn._intersection=ls}return jr||Hr(on),Xr||zr}function en(zr,Wr,jr,Xr,Jr){var nn=Array.isArray(Wr)?Wr:Wr[jr?"hor":"ver"],Zr=jr?1:0,on=Zr^1,hn=[zr.x,zr.y],fn=hn[Zr],xn=hn[on],cn=1e-9,vn=1e-6,bn=fn-cn,_n=fn+cn,Cn=0,Fn=0,Wn=0,Yn=0,Qn=!1,ss=!1,zn=1,Gn=[],es,ls;function as(Is){var Ls=Is[on+0],Fs=Is[on+6];if(!(xn<$t(Ls,Fs)||xn>Zt(Ls,Fs))){var ks=Is[Zr+0],yo=Is[Zr+2],xa=Is[Zr+4],Xs=Is[Zr+6];if(Ls===Fs){(ks<_n&&Xs>bn||Xs<_n&&ks>bn)&&(Qn=!0);return}var Po=xn===Ls?0:xn===Fs||bn>Zt(ks,yo,xa,Xs)||_n<$t(ks,yo,xa,Xs)?1:hr.solveCubic(Is,on,xn,Gn,0,1)>0?Gn[0]:1,Ao=Po===0?ks:Po===1?Xs:hr.getPoint(Is,Po)[jr?"y":"x"],Ws=Ls>Fs?1:-1,ko=es[on]>es[on+6]?1:-1,ba=es[Zr+6];return xn!==Ls?(Ao<bn?Wn+=Ws:Ao>_n?Yn+=Ws:Qn=!0,Ao>fn-vn&&Ao<fn+vn&&(zn/=2)):(Ws!==ko?ks<bn?Wn+=Ws:ks>_n&&(Yn+=Ws):ks!=ba&&(ba<_n&&Ao>_n?(Yn+=Ws,Qn=!0):ba>bn&&Ao<bn&&(Wn+=Ws,Qn=!0)),zn/=4),es=Is,!Jr&&Ao>bn&&Ao<_n&&hr.getTangent(Is,Po)[jr?"x":"y"]===0&&en(zr,Wr,!jr,Xr,!0)}}function ys(Is){var Ls=Is[on+0],Fs=Is[on+2],ks=Is[on+4],yo=Is[on+6];if(xn<=Zt(Ls,Fs,ks,yo)&&xn>=$t(Ls,Fs,ks,yo)){for(var xa=Is[Zr+0],Xs=Is[Zr+2],Po=Is[Zr+4],Ao=Is[Zr+6],Ws=bn>Zt(xa,Xs,Po,Ao)||_n<$t(xa,Xs,Po,Ao)?[Is]:hr.getMonoCurves(Is,jr),ko,ba=0,km=Ws.length;ba<km;ba++)if(ko=as(Ws[ba]))return ko}}for(var vs=0,_s=nn.length;vs<_s;vs++){var Cs=nn[vs],xs=Cs._path,ga=Cs.getValues(),uo;if((!vs||nn[vs-1]._path!==xs)&&(es=null,xs._closed||(ls=hr.getValues(xs.getLastCurve().getSegment2(),Cs.getSegment1(),null,!Xr),ls[on]!==ls[on+6]&&(es=ls)),!es)){es=ga;for(var Oo=xs.getLastCurve();Oo&&Oo!==Cs;){var Jn=Oo.getValues();if(Jn[on]!==Jn[on+6]){es=Jn;break}Oo=Oo.getPrevious()}}if(uo=ys(ga))return uo;if(vs+1===_s||nn[vs+1]._path!==xs){if(ls&&(uo=ys(ls)))return uo;Qn&&!Wn&&!Yn&&(Wn=Yn=xs.isClockwise(Xr)^jr?1:-1),Cn+=Wn,Fn+=Yn,Wn=Yn=0,Qn&&(ss=!0,Qn=!1),ls=null}}return Cn=or(Cn),Fn=or(Fn),{winding:Zt(Cn,Fn),windingL:Cn,windingR:Fn,quality:zn,onPath:ss}}function Kr(zr,Wr,jr,Xr,Jr){var nn=[],Zr=zr,on=0,cn;do{var hn=zr.getCurve();if(hn){var fn=hn.getLength();nn.push({segment:zr,curve:hn,length:fn}),on+=fn}zr=zr.getNext()}while(zr&&!zr._intersection&&zr!==Zr);for(var xn=[.5,.25,.75],cn={winding:0,quality:-1},vn=.001,bn=1-vn,_n=0;_n<xn.length&&cn.quality<.5;_n++)for(var fn=on*xn[_n],Cn=0,Fn=nn.length;Cn<Fn;Cn++){var Wn=nn[Cn],Yn=Wn.length;if(fn<=Yn){var hn=Wn.curve,Qn=hn._path,ss=Qn._parent,zn=ss instanceof Dr?ss:Qn,Gn=Rt.clamp(hn.getTimeAt(fn),vn,bn),es=hn.getPointAtTime(Gn),ls=or(hn.getTangentAtTime(Gn).y)<Math.SQRT1_2,as=null;if(Jr.subtract&&jr){var ys=zn===Wr?jr:Wr,vs=ys._getWinding(es,ls,!0);if(zn===Wr&&vs.winding||zn===jr&&!vs.winding){if(vs.quality<1)continue;as={winding:0,quality:1}}}as=as||en(es,Xr[Qn._id][hn.getIndex()],ls,!0),as.quality>cn.quality&&(cn=as);break}fn-=Yn}for(var Cn=nn.length-1;Cn>=0;Cn--)nn[Cn].segment._winding=cn}function Yr(zr,Wr){var jr=[],Xr;function Jr(_s){var Cs;return!!(_s&&!_s._visited&&(!Wr||Wr[(Cs=_s._winding||{}).winding]&&!(Wr.unite&&Cs.winding===2&&Cs.windingL&&Cs.windingR)))}function nn(_s){if(_s){for(var Cs=0,xs=Xr.length;Cs<xs;Cs++)if(_s===Xr[Cs])return!0}return!1}function Zr(_s){for(var Cs=_s._segments,xs=0,ga=Cs.length;xs<ga;xs++)Cs[xs]._visited=!0}function on(_s,Cs){var xs=_s._intersection,ga=xs,uo=[];Cs&&(Xr=[_s]);function Oo(Jn,Is){for(;Jn&&Jn!==Is;){var Ls=Jn._segment,Fs=Ls&&Ls._path;if(Fs){var ks=Ls.getNext()||Fs.getFirstSegment(),yo=ks._intersection;Ls!==_s&&(nn(Ls)||nn(ks)||ks&&Jr(Ls)&&(Jr(ks)||yo&&Jr(yo._segment)))&&uo.push(Ls),Cs&&Xr.push(Ls)}Jn=Jn._next}}if(xs){for(Oo(xs);xs&&xs._previous;)xs=xs._previous;Oo(xs,ga)}return uo}zr.sort(function(_s,Cs){var xs=_s._intersection,ga=Cs._intersection,uo=!!(xs&&xs._overlap),Oo=!!(ga&&ga._overlap),Jn=_s._path,Is=Cs._path;return uo^Oo?uo?1:-1:!xs^!ga?xs?1:-1:Jn!==Is?Jn._id-Is._id:_s._index-Cs._index});for(var hn=0,fn=zr.length;hn<fn;hn++){var xn=zr[hn],cn=Jr(xn),vn=null,bn=!1,_n=!0,Cn=[],Fn,Wn,Yn;if(cn&&xn._path._overlapsOnly){var Qn=xn._path,ss=xn._intersection._segment._path;Qn.compare(ss)&&(Qn.getArea()&&jr.push(Qn.clone(!1)),Zr(Qn),Zr(ss),cn=!1)}for(;cn;){var zn=!vn,Gn=on(xn,zn),es=Gn.shift(),bn=!zn&&(nn(xn)||nn(es)),ls=!bn&&es;if(zn&&(vn=new Er(ir.NO_INSERT),Fn=null),bn){(xn.isFirst()||xn.isLast())&&(_n=xn._path._closed),xn._visited=!0;break}if(ls&&Fn&&(Cn.push(Fn),Fn=null),Fn||(ls&&Gn.push(xn),Fn={start:vn._segments.length,crossings:Gn,visited:Wn=[],handleIn:Yn}),ls&&(xn=es),!Jr(xn)){vn.removeSegments(Fn.start);for(var as=0,ys=Wn.length;as<ys;as++)Wn[as]._visited=!1;Wn.length=0;do xn=Fn&&Fn.crossings.shift(),(!xn||!xn._path)&&(xn=null,Fn=Cn.pop(),Fn&&(Wn=Fn.visited,Yn=Fn.handleIn));while(Fn&&!Jr(xn));if(!xn)break}var vs=xn.getNext();vn.add(new Pr(xn._point,Yn,vs&&xn._handleOut)),xn._visited=!0,Wn.push(xn),xn=vs||xn._path.getFirstSegment(),Yn=vs&&vs._handleIn}bn&&(_n&&(vn.getFirstSegment().setHandleIn(Yn),vn.setClosed(_n)),vn.getArea()!==0&&jr.push(vn))}return jr}return{_getWinding:function(zr,Wr,jr){return en(zr,this.getCurves(),Wr,jr)},unite:function(zr,Wr){return Nr(this,zr,"unite",Wr)},intersect:function(zr,Wr){return Nr(this,zr,"intersect",Wr)},subtract:function(zr,Wr){return Nr(this,zr,"subtract",Wr)},exclude:function(zr,Wr){return Nr(this,zr,"exclude",Wr)},divide:function(zr,Wr){return Wr&&(Wr.trace==!1||Wr.stroke)?Fr(this,zr,"divide"):Ar([this.subtract(zr,Wr),this.intersect(zr,Wr)],!0,this,zr,Wr)},resolveCrossings:function(){var zr=this._children,Wr=zr||[this];function jr(Fn,Wn){var Yn=Fn&&Fn._intersection;return Yn&&Yn._overlap&&Yn._path===Wn}var Xr=!1,Jr=!1,nn=this.getIntersections(null,function(Fn){return Fn.hasOverlap()&&(Xr=!0)||Fn.isCrossing()&&(Jr=!0)}),Zr=Xr&&Jr&&[];if(nn=Tr.expand(nn),Xr)for(var on=Br(nn,function(Fn){return Fn.hasOverlap()},Zr),hn=on.length-1;hn>=0;hn--){var fn=on[hn],xn=fn._path,cn=fn._segment,vn=cn.getPrevious(),bn=cn.getNext();jr(vn,xn)&&jr(bn,xn)&&(cn.remove(),vn._handleOut._set(0,0),bn._handleIn._set(0,0),vn!==cn&&!vn.getCurve().hasLength()&&(bn._handleIn.set(vn._handleIn),vn.remove()))}Jr&&(Br(nn,Xr&&function(Fn){var Wn=Fn.getCurve(),Yn=Fn.getSegment(),Qn=Fn._intersection,ss=Qn._curve,zn=Qn._segment;if(Wn&&ss&&Wn._path&&ss._path)return!0;Yn&&(Yn._intersection=null),zn&&(zn._intersection=null)},Zr),Zr&&Hr(Zr),Wr=Yr(ct.each(Wr,function(Fn){ct.push(this,Fn._segments)},[])));var _n=Wr.length,Cn;return _n>1&&zr?(Wr!==zr&&this.setChildren(Wr),Cn=this):_n===1&&!zr&&(Wr[0]!==this&&this.setSegments(Wr[0].removeSegments()),Cn=this),Cn||(Cn=new Dr(ir.NO_INSERT),Cn.addChildren(Wr),Cn=Cn.reduce(),Cn.copyAttributes(this),this.replaceWith(Cn)),Cn},reorient:function(zr,Wr){var jr=this._children;return jr&&jr.length?this.setChildren($r(this.removeChildren(),function(Xr){return!!(zr?Xr:Xr&1)},Wr)):Wr!==et&&this.setClockwise(Wr),this},getInteriorPoint:function(){var zr=this.getBounds(),Wr=zr.getCenter(!0);if(!this.contains(Wr)){for(var jr=this.getCurves(),Xr=Wr.y,Jr=[],nn=[],Zr=0,on=jr.length;Zr<on;Zr++){var hn=jr[Zr].getValues(),fn=hn[1],xn=hn[3],cn=hn[5],vn=hn[7];if(Xr>=$t(fn,xn,cn,vn)&&Xr<=Zt(fn,xn,cn,vn))for(var bn=hr.getMonoCurves(hn),_n=0,Cn=bn.length;_n<Cn;_n++){var Fn=bn[_n],Wn=Fn[1],Yn=Fn[7];if(Wn!==Yn&&(Xr>=Wn&&Xr<=Yn||Xr>=Yn&&Xr<=Wn)){var Qn=Xr===Wn?Fn[0]:Xr===Yn?Fn[6]:hr.solveCubic(Fn,1,Xr,nn,0,1)===1?hr.getPoint(Fn,nn[0]).x:(Fn[0]+Fn[6])/2;Jr.push(Qn)}}}Jr.length>1&&(Jr.sort(function(ss,zn){return ss-zn}),Wr.x=(Jr[0]+Jr[1])/2)}return Wr}}});var Cr=ct.extend({_class:"PathFlattener",initialize:function($t,Zt,or,ur,dr){var gr=[],Ar=[],_r=0,Nr=1/(or||32),Fr=$t._segments,Vr=Fr[0],Hr;function $r(Yr,zr){var Wr=hr.getValues(Yr,zr,dr);gr.push(Wr),Br(Wr,Yr._index,0,1)}function Br(Yr,zr,Wr,jr){if(jr-Wr>Nr&&!(ur&&hr.isStraight(Yr))&&!hr.isFlatEnough(Yr,Zt||.25)){var Xr=hr.subdivide(Yr,.5),Jr=(Wr+jr)/2;Br(Xr[0],zr,Wr,Jr),Br(Xr[1],zr,Jr,jr)}else{var nn=Yr[6]-Yr[0],Zr=Yr[7]-Yr[1],on=Math.sqrt(nn*nn+Zr*Zr);on>0&&(_r+=on,Ar.push({offset:_r,curve:Yr,index:zr,time:jr}))}}for(var en=1,Kr=Fr.length;en<Kr;en++)Hr=Fr[en],$r(Vr,Hr),Vr=Hr;$t._closed&&$r(Hr||Vr,Fr[0]),this.curves=gr,this.parts=Ar,this.length=_r,this.index=0},_get:function($t){for(var Zt=this.parts,or=Zt.length,ur,dr=this.index;ur=dr,!(!dr||Zt[--dr].offset<$t););for(;ur<or;ur++){var gr=Zt[ur];if(gr.offset>=$t){this.index=ur;var Ar=Zt[ur-1],_r=Ar&&Ar.index===gr.index?Ar.time:0,Nr=Ar?Ar.offset:0;return{index:gr.index,time:_r+(gr.time-_r)*($t-Nr)/(gr.offset-Nr)}}}return{index:Zt[or-1].index,time:1}},drawPart:function($t,Zt,or){for(var ur=this._get(Zt),dr=this._get(or),gr=ur.index,Ar=dr.index;gr<=Ar;gr++){var _r=hr.getPart(this.curves[gr],gr===ur.index?ur.time:0,gr===dr.index?dr.time:1);gr===ur.index&&$t.moveTo(_r[0],_r[1]),$t.bezierCurveTo.apply($t,_r.slice(2))}}},ct.each(hr._evaluateMethods,function($t){this[$t+"At"]=function(Zt){var or=this._get(Zt);return hr[$t](this.curves[or.index],or.time)}},{})),Lr=ct.extend({initialize:function($t){for(var Zt=this.points=[],or=$t._segments,ur=$t._closed,dr=0,gr,Ar=or.length;dr<Ar;dr++){var _r=or[dr].point;(!gr||!gr.equals(_r))&&Zt.push(gr=_r.clone())}ur&&(Zt.unshift(Zt[Zt.length-1]),Zt.push(Zt[1])),this.closed=ur},fit:function($t){var Zt=this.points,or=Zt.length,ur=null;return or>0&&(ur=[new Pr(Zt[0])],or>1&&(this.fitCubic(ur,$t,0,or-1,Zt[1].subtract(Zt[0]),Zt[or-2].subtract(Zt[or-1])),this.closed&&(ur.shift(),ur.pop()))),ur},fitCubic:function($t,Zt,or,ur,dr,gr){var Ar=this.points;if(ur-or===1){var _r=Ar[or],Nr=Ar[ur],Fr=_r.getDistance(Nr)/3;this.addCurve($t,[_r,_r.add(dr.normalize(Fr)),Nr.add(gr.normalize(Fr)),Nr]);return}for(var Vr=this.chordLengthParameterize(or,ur),Hr=Math.max(Zt,Zt*Zt),$r,Br=!0,en=0;en<=4;en++){var Kr=this.generateBezier(or,ur,Vr,dr,gr),Yr=this.findMaxError(or,ur,Kr,Vr);if(Yr.error<Zt&&Br){this.addCurve($t,Kr);return}if($r=Yr.index,Yr.error>=Hr)break;Br=this.reparameterize(or,ur,Vr,Kr),Hr=Yr.error}var zr=Ar[$r-1].subtract(Ar[$r+1]);this.fitCubic($t,Zt,or,$r,dr,zr),this.fitCubic($t,Zt,$r,ur,zr.negate(),gr)},addCurve:function($t,Zt){var or=$t[$t.length-1];or.setHandleOut(Zt[1].subtract(Zt[0])),$t.push(new Pr(Zt[3],Zt[2].subtract(Zt[3])))},generateBezier:function($t,Zt,or,ur,dr){for(var gr=1e-12,Ar=Math.abs,_r=this.points,Nr=_r[$t],Fr=_r[Zt],Vr=[[0,0],[0,0]],Hr=[0,0],$r=0,Br=Zt-$t+1;$r<Br;$r++){var en=or[$r],Kr=1-en,Yr=3*en*Kr,zr=Kr*Kr*Kr,Wr=Yr*Kr,jr=Yr*en,Xr=en*en*en,Jr=ur.normalize(Wr),nn=dr.normalize(jr),Zr=_r[$t+$r].subtract(Nr.multiply(zr+Wr)).subtract(Fr.multiply(jr+Xr));Vr[0][0]+=Jr.dot(Jr),Vr[0][1]+=Jr.dot(nn),Vr[1][0]=Vr[0][1],Vr[1][1]+=nn.dot(nn),Hr[0]+=Jr.dot(Zr),Hr[1]+=nn.dot(Zr)}var on=Vr[0][0]*Vr[1][1]-Vr[1][0]*Vr[0][1],hn,fn;if(Ar(on)>gr){var xn=Vr[0][0]*Hr[1]-Vr[1][0]*Hr[0],cn=Hr[0]*Vr[1][1]-Hr[1]*Vr[0][1];hn=cn/on,fn=xn/on}else{var vn=Vr[0][0]+Vr[0][1],bn=Vr[1][0]+Vr[1][1];hn=fn=Ar(vn)>gr?Hr[0]/vn:Ar(bn)>gr?Hr[1]/bn:0}var _n=Fr.getDistance(Nr),Cn=gr*_n,Fn,Wn;if(hn<Cn||fn<Cn)hn=fn=_n/3;else{var Yn=Fr.subtract(Nr);Fn=ur.normalize(hn),Wn=dr.normalize(fn),Fn.dot(Yn)-Wn.dot(Yn)>_n*_n&&(hn=fn=_n/3,Fn=Wn=null)}return[Nr,Nr.add(Fn||ur.normalize(hn)),Fr.add(Wn||dr.normalize(fn)),Fr]},reparameterize:function($t,Zt,or,ur){for(var dr=$t;dr<=Zt;dr++)or[dr-$t]=this.findRoot(ur,this.points[dr],or[dr-$t]);for(var dr=1,gr=or.length;dr<gr;dr++)if(or[dr]<=or[dr-1])return!1;return!0},findRoot:function($t,Zt,or){for(var ur=[],dr=[],gr=0;gr<=2;gr++)ur[gr]=$t[gr+1].subtract($t[gr]).multiply(3);for(var gr=0;gr<=1;gr++)dr[gr]=ur[gr+1].subtract(ur[gr]).multiply(2);var Ar=this.evaluate(3,$t,or),_r=this.evaluate(2,ur,or),Nr=this.evaluate(1,dr,or),Fr=Ar.subtract(Zt),Vr=_r.dot(_r)+Fr.dot(Nr);return Rt.isMachineZero(Vr)?or:or-Fr.dot(_r)/Vr},evaluate:function($t,Zt,or){for(var ur=Zt.slice(),dr=1;dr<=$t;dr++)for(var gr=0;gr<=$t-dr;gr++)ur[gr]=ur[gr].multiply(1-or).add(ur[gr+1].multiply(or));return ur[0]},chordLengthParameterize:function($t,Zt){for(var or=[0],ur=$t+1;ur<=Zt;ur++)or[ur-$t]=or[ur-$t-1]+this.points[ur].getDistance(this.points[ur-1]);for(var ur=1,dr=Zt-$t;ur<=dr;ur++)or[ur]/=or[dr];return or},findMaxError:function($t,Zt,or,ur){for(var dr=Math.floor((Zt-$t+1)/2),gr=0,Ar=$t+1;Ar<Zt;Ar++){var _r=this.evaluate(3,or,ur[Ar-$t]),Nr=_r.subtract(this.points[Ar]),Fr=Nr.x*Nr.x+Nr.y*Nr.y;Fr>=gr&&(gr=Fr,dr=Ar)}return{error:gr,index:dr}}}),qr=ir.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(Zt){this._content="",this._lines=[];var or=Zt&&ct.isPlainObject(Zt)&&Zt.x===et&&Zt.y===et;this._initialize(or&&Zt,!or&&jt.read(arguments))},_equals:function($t){return this._content===$t._content},copyContent:function($t){this.setContent($t._content)},getContent:function(){return this._content},setContent:function($t){this._content=""+$t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),sn=qr.extend({_class:"PointText",initialize:function(){qr.apply(this,arguments)},getPoint:function(){var $t=this._matrix.getTranslation();return new Bt($t.x,$t.y,this,"setPoint")},setPoint:function(){var $t=jt.read(arguments);this.translate($t.subtract(this._matrix.getTranslation()))},_draw:function($t,Zt,or){if(this._content){this._setStyles($t,Zt,or);var ur=this._lines,dr=this._style,gr=dr.hasFill(),Ar=dr.hasStroke(),_r=dr.getLeading(),Nr=$t.shadowColor;$t.font=dr.getFontStyle(),$t.textAlign=dr.getJustification();for(var Fr=0,Vr=ur.length;Fr<Vr;Fr++){$t.shadowColor=Nr;var Hr=ur[Fr];gr&&($t.fillText(Hr,0,0),$t.shadowColor="rgba(0,0,0,0)"),Ar&&$t.strokeText(Hr,0,0),$t.translate(0,_r)}}},_getBounds:function($t,Zt){var or=this._style,ur=this._lines,dr=ur.length,gr=or.getJustification(),Ar=or.getLeading(),_r=this.getView().getTextWidth(or.getFontStyle(),ur),Nr=0;gr!=="left"&&(Nr-=_r/(gr==="center"?2:1));var Fr=new Ut(Nr,dr?-.75*Ar:0,_r,dr*Ar);return $t?$t._transformBounds(Fr,Fr):Fr}}),an=ct.extend(new function(){var $t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},Zt={},or={transparent:[0,0,0,0]},ur;function dr(_r){var Nr=_r.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||_r.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),Fr="rgb",Vr;if(Nr){var Hr=Nr[4]?4:3;Vr=new Array(Hr);for(var $r=0;$r<Hr;$r++){var Br=Nr[$r+1];Vr[$r]=parseInt(Br.length==1?Br+Br:Br,16)/255}}else if(Nr=_r.match(/^(rgb|hsl)a?\((.*)\)$/)){Fr=Nr[1],Vr=Nr[2].trim().split(/[,\s]+/g);for(var en=Fr==="hsl",$r=0,Kr=Math.min(Vr.length,4);$r<Kr;$r++){var Yr=Vr[$r],Br=parseFloat(Yr);if(en)if($r===0){var zr=Yr.match(/([a-z]*)$/)[1];Br*={turn:360,rad:180/Math.PI,grad:.9}[zr]||1}else $r<3&&(Br/=100);else $r<3&&(Br/=/%$/.test(Yr)?100:255);Vr[$r]=Br}}else{var Wr=or[_r];if(!Wr)if(ot){ur||(ur=Tn.getContext(1,1,{willReadFrequently:!0}),ur.globalCompositeOperation="copy"),ur.fillStyle="rgba(0,0,0,0)",ur.fillStyle=_r,ur.fillRect(0,0,1,1);var jr=ur.getImageData(0,0,1,1).data;Wr=or[_r]=[jr[0]/255,jr[1]/255,jr[2]/255]}else Wr=[0,0,0];Vr=Wr.slice()}return[Fr,Vr]}var gr=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],Ar={"rgb-hsb":function(_r,Nr,Fr){var Vr=Math.max(_r,Nr,Fr),Hr=Math.min(_r,Nr,Fr),$r=Vr-Hr,Br=$r===0?0:(Vr==_r?(Nr-Fr)/$r+(Nr<Fr?6:0):Vr==Nr?(Fr-_r)/$r+2:(_r-Nr)/$r+4)*60;return[Br,Vr===0?0:$r/Vr,Vr]},"hsb-rgb":function(_r,Nr,Fr){_r=(_r/60%6+6)%6;var Hr=Math.floor(_r),Vr=_r-Hr,Hr=gr[Hr],$r=[Fr,Fr*(1-Nr),Fr*(1-Nr*Vr),Fr*(1-Nr*(1-Vr))];return[$r[Hr[0]],$r[Hr[1]],$r[Hr[2]]]},"rgb-hsl":function(_r,Nr,Fr){var Vr=Math.max(_r,Nr,Fr),Hr=Math.min(_r,Nr,Fr),$r=Vr-Hr,Br=$r===0,en=Br?0:(Vr==_r?(Nr-Fr)/$r+(Nr<Fr?6:0):Vr==Nr?(Fr-_r)/$r+2:(_r-Nr)/$r+4)*60,Kr=(Vr+Hr)/2,Yr=Br?0:Kr<.5?$r/(Vr+Hr):$r/(2-Vr-Hr);return[en,Yr,Kr]},"hsl-rgb":function(_r,Nr,Fr){if(_r=(_r/360%1+1)%1,Nr===0)return[Fr,Fr,Fr];for(var Vr=[_r+1/3,_r,_r-1/3],Hr=Fr<.5?Fr*(1+Nr):Fr+Nr-Fr*Nr,$r=2*Fr-Hr,Br=[],en=0;en<3;en++){var Kr=Vr[en];Kr<0&&(Kr+=1),Kr>1&&(Kr-=1),Br[en]=6*Kr<1?$r+(Hr-$r)*6*Kr:2*Kr<1?Hr:3*Kr<2?$r+(Hr-$r)*(2/3-Kr)*6:$r}return Br},"rgb-gray":function(_r,Nr,Fr){return[_r*.2989+Nr*.587+Fr*.114]},"gray-rgb":function(_r){return[_r,_r,_r]},"gray-hsb":function(_r){return[0,0,_r]},"gray-hsl":function(_r){return[0,0,_r]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return ct.each($t,function(_r,Nr){Zt[Nr]=[],ct.each(_r,function(Fr,Vr){var Hr=ct.capitalize(Fr),$r=/^(hue|saturation)$/.test(Fr),Br=Zt[Nr][Vr]=Nr==="gradient"?Fr==="gradient"?function(en){var Kr=this._components[0];return en=tn.read(Array.isArray(en)?en:arguments,0,{readNull:!0}),Kr!==en&&(Kr&&Kr._removeOwner(this),en&&en._addOwner(this)),en}:function(){return jt.read(arguments,0,{readNull:Fr==="highlight",clone:!0})}:function(en){return en==null||isNaN(en)?0:+en};this["get"+Hr]=function(){return this._type===Nr||$r&&/^hs[bl]$/.test(this._type)?this._components[Vr]:this._convert(Nr)[Vr]},this["set"+Hr]=function(en){this._type!==Nr&&!($r&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(Nr),this._properties=$t[Nr],this._type=Nr),this._components[Vr]=Br.call(this,en),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function _r(Nr){var Fr=arguments,Vr=this.__read,Hr=0,$r,Br,en,Kr;Array.isArray(Nr)&&(Fr=Nr,Nr=Fr[0]);var Yr=Nr!=null&&typeof Nr;if(Yr==="string"&&Nr in $t&&($r=Nr,Nr=Fr[1],Array.isArray(Nr)?(Br=Nr,en=Fr[2]):(Vr&&(Hr=1),Fr=ct.slice(Fr,1),Yr=typeof Nr)),!Br){if(Kr=Yr==="number"?Fr:Yr==="object"&&Nr.length!=null?Nr:null,Kr){$r||($r=Kr.length>=3?"rgb":"gray");var zr=$t[$r].length;en=Kr[zr],Vr&&(Hr+=Kr===arguments?zr+(en!=null?1:0):1),Kr.length>zr&&(Kr=ct.slice(Kr,0,zr))}else if(Yr==="string"){var Wr=dr(Nr);$r=Wr[0],Br=Wr[1],Br.length===4&&(en=Br[3],Br.length--)}else if(Yr==="object")if(Nr.constructor===_r){if($r=Nr._type,Br=Nr._components.slice(),en=Nr._alpha,$r==="gradient")for(var jr=1,Xr=Br.length;jr<Xr;jr++){var Jr=Br[jr];Jr&&(Br[jr]=Jr.clone())}}else if(Nr.constructor===tn)$r="gradient",Kr=Fr;else{$r="hue"in Nr?"lightness"in Nr?"hsl":"hsb":"gradient"in Nr||"stops"in Nr||"radial"in Nr?"gradient":"gray"in Nr?"gray":"rgb";var nn=$t[$r],Zr=Zt[$r];this._components=Br=[];for(var jr=0,Xr=nn.length;jr<Xr;jr++){var on=Nr[nn[jr]];on==null&&!jr&&$r==="gradient"&&"stops"in Nr&&(on={stops:Nr.stops,radial:Nr.radial}),on=Zr[jr].call(this,on),on!=null&&(Br[jr]=on)}en=Nr.alpha}Vr&&$r&&(Hr=1)}if(this._type=$r||"rgb",!Br){this._components=Br=[];for(var Zr=Zt[this._type],jr=0,Xr=Zr.length;jr<Xr;jr++){var on=Zr[jr].call(this,Kr&&Kr[jr]);on!=null&&(Br[jr]=on)}}return this._components=Br,this._properties=$t[this._type],this._alpha=en,Vr&&(this.__read=Hr),this},set:"#initialize",_serialize:function(_r,Nr){var Fr=this.getComponents();return ct.serialize(/^(gray|rgb)$/.test(this._type)?Fr:[this._type].concat(Fr),_r,!0,Nr)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(_r){var Nr;return this._type===_r?this._components.slice():(Nr=Ar[this._type+"-"+_r])?Nr.apply(this,this._components):Ar["rgb-"+_r].apply(this,Ar[this._type+"-rgb"].apply(this,this._components))},convert:function(_r){return new an(_r,this._convert(_r),this._alpha)},getType:function(){return this._type},setType:function(_r){this._components=this._convert(_r),this._properties=$t[_r],this._type=_r},getComponents:function(){var _r=this._components.slice();return this._alpha!=null&&_r.push(this._alpha),_r},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(_r){this._alpha=_r==null?null:Math.min(Math.max(_r,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(_r){var Nr=ct.isPlainValue(_r,!0)?an.read(arguments):_r;return Nr===this||Nr&&this._class===Nr._class&&this._type===Nr._type&&this.getAlpha()===Nr.getAlpha()&&ct.equals(this._components,Nr._components)||!1},toString:function(){for(var _r=this._properties,Nr=[],Fr=this._type==="gradient",Vr=Tt.instance,Hr=0,$r=_r.length;Hr<$r;Hr++){var Br=this._components[Hr];Br!=null&&Nr.push(_r[Hr]+": "+(Fr?Br:Vr.number(Br)))}return this._alpha!=null&&Nr.push("alpha: "+Vr.number(this._alpha)),"{ "+Nr.join(", ")+" }"},toCSS:function(_r){var Nr=this._convert("rgb"),Fr=_r||this._alpha==null?1:this._alpha;function Vr(Hr){return Math.round((Hr<0?0:Hr>1?1:Hr)*255)}return Nr=[Vr(Nr[0]),Vr(Nr[1]),Vr(Nr[2])],Fr<1&&Nr.push(Fr<0?0:Fr),_r?"#"+((1<<24)+(Nr[0]<<16)+(Nr[1]<<8)+Nr[2]).toString(16).slice(1):(Nr.length==4?"rgba(":"rgb(")+Nr.join(",")+")"},toCanvasStyle:function(_r,Nr){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var Fr=this._components,Vr=Fr[0],Hr=Vr._stops,$r=Fr[1],Br=Fr[2],en=Fr[3],Kr=Nr&&Nr.inverted(),Yr;if(Kr&&($r=Kr._transformPoint($r),Br=Kr._transformPoint(Br),en&&(en=Kr._transformPoint(en))),Vr._radial){var zr=Br.getDistance($r);if(en){var Wr=en.subtract($r);Wr.getLength()>zr&&(en=$r.add(Wr.normalize(zr-.1)))}var jr=en||$r;Yr=_r.createRadialGradient(jr.x,jr.y,0,$r.x,$r.y,zr)}else Yr=_r.createLinearGradient($r.x,$r.y,Br.x,Br.y);for(var Xr=0,Jr=Hr.length;Xr<Jr;Xr++){var nn=Hr[Xr],Zr=nn._offset;Yr.addColorStop(Zr??Xr/(Jr-1),nn._color.toCanvasStyle())}return this._canvasStyle=Yr},transform:function(_r){if(this._type==="gradient"){for(var Nr=this._components,Fr=1,Vr=Nr.length;Fr<Vr;Fr++){var Hr=Nr[Fr];_r._transformPoint(Hr,Hr,!0)}this._changed()}},statics:{_types:$t,random:function(){var _r=Math.random;return new an(_r(),_r(),_r())},_setOwner:function(_r,Nr,Fr){return _r&&(_r._owner&&Nr&&_r._owner!==Nr&&(_r=_r.clone()),!_r._owner^!Nr&&(_r._owner=Nr||null,_r._setter=Fr||null)),_r}}})},new function(){var $t={add:function(Zt,or){return Zt+or},subtract:function(Zt,or){return Zt-or},multiply:function(Zt,or){return Zt*or},divide:function(Zt,or){return Zt/or}};return ct.each($t,function(Zt,or){this[or]=function(ur){ur=an.read(arguments);for(var dr=this._type,gr=this._components,Ar=ur._convert(dr),_r=0,Nr=gr.length;_r<Nr;_r++)Ar[_r]=Zt(gr[_r],Ar[_r]);return new an(dr,Ar,this._alpha!=null?Zt(this._alpha,ur.getAlpha()):null)}},{})}),tn=ct.extend({_class:"Gradient",initialize:function(Zt,or){this._id=Ft.get(),Zt&&ct.isPlainObject(Zt)&&(this.set(Zt),Zt=or=null),this._stops==null&&this.setStops(Zt||["white","black"]),this._radial==null&&this.setRadial(typeof or=="string"&&or==="radial"||or||!1)},_serialize:function($t,Zt){return Zt.add(this,function(){return ct.serialize([this._stops,this._radial],$t,!0,Zt)})},_changed:function(){for(var $t=0,Zt=this._owners&&this._owners.length;$t<Zt;$t++)this._owners[$t]._changed()},_addOwner:function($t){this._owners||(this._owners=[]),this._owners.push($t)},_removeOwner:function($t){var Zt=this._owners?this._owners.indexOf($t):-1;Zt!=-1&&(this._owners.splice(Zt,1),this._owners.length||(this._owners=et))},clone:function(){for(var $t=[],Zt=0,or=this._stops.length;Zt<or;Zt++)$t[Zt]=this._stops[Zt].clone();return new tn($t,this._radial)},getStops:function(){return this._stops},setStops:function($t){if($t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var Zt=this._stops;if(Zt)for(var or=0,ur=Zt.length;or<ur;or++)Zt[or]._owner=et;Zt=this._stops=ln.readList($t,0,{clone:!0});for(var or=0,ur=Zt.length;or<ur;or++)Zt[or]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function($t){this._radial=$t,this._changed()},equals:function($t){if($t===this)return!0;if($t&&this._class===$t._class){var Zt=this._stops,or=$t._stops,ur=Zt.length;if(ur===or.length){for(var dr=0;dr<ur;dr++)if(!Zt[dr].equals(or[dr]))return!1;return!0}}return!1}}),ln=ct.extend({_class:"GradientStop",initialize:function(Zt,or){var ur=Zt,dr=or;typeof Zt=="object"&&or===et&&(Array.isArray(Zt)&&typeof Zt[0]!="number"?(ur=Zt[0],dr=Zt[1]):("color"in Zt||"offset"in Zt||"rampPoint"in Zt)&&(ur=Zt.color,dr=Zt.offset||Zt.rampPoint||0)),this.setColor(ur),this.setOffset(dr)},clone:function(){return new ln(this._color.clone(),this._offset)},_serialize:function($t,Zt){var or=this._color,ur=this._offset;return ct.serialize(ur==null?[or]:[or,ur],$t,!0,Zt)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function($t){this._offset=$t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){an._setOwner(this._color,null),this._color=an._setOwner(an.read(arguments,0),this,"setColor"),this._changed()},equals:function($t){return $t===this||$t&&this._class===$t._class&&this._color.equals($t._color)&&this._offset==$t._offset||!1}}),yn=ct.extend(new function(){var $t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new jt,selectedColor:null},Zt=ct.set({},$t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),or=ct.set({},Zt,{fillColor:new an}),ur={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},dr={beans:!0},gr={_class:"Style",beans:!0,initialize:function(_r,Nr,Fr){this._values={},this._owner=Nr,this._project=Nr&&Nr._project||Fr||Bn.project,this._defaults=!Nr||Nr instanceof lr?Zt:Nr instanceof qr?or:$t,_r&&this.set(_r)}};return ct.each(Zt,function(Ar,_r){var Nr=/Color$/.test(_r),Fr=_r==="shadowOffset",Vr=ct.capitalize(_r),Hr=ur[_r],$r="set"+Vr,Br="get"+Vr;gr[$r]=function(en){var Kr=this._owner,Yr=Kr&&Kr._children,zr=Yr&&Yr.length>0&&!(Kr instanceof Dr);if(zr)for(var Wr=0,jr=Yr.length;Wr<jr;Wr++)Yr[Wr]._style[$r](en);if((_r==="selectedColor"||!zr)&&_r in this._defaults){var Xr=this._values[_r];Xr!==en&&(Nr&&(Xr&&(an._setOwner(Xr,null),Xr._canvasStyle=null),en&&en.constructor===an&&(en=an._setOwner(en,Kr,zr&&$r))),this._values[_r]=en,Kr&&Kr._changed(Hr||129))}},gr[Br]=function(en){var Kr=this._owner,Yr=Kr&&Kr._children,zr=Yr&&Yr.length>0&&!(Kr instanceof Dr),Wr;if(zr&&!en)for(var jr=0,Xr=Yr.length;jr<Xr;jr++){var Jr=Yr[jr]._style[Br]();if(!jr)Wr=Jr;else if(!ct.equals(Wr,Jr))return et}else if(_r in this._defaults){var Wr=this._values[_r];if(Wr===et)Wr=this._defaults[_r],Wr&&Wr.clone&&(Wr=Wr.clone());else{var nn=Nr?an:Fr?jt:null;nn&&!(Wr&&Wr.constructor===nn)&&(this._values[_r]=Wr=nn.read([Wr],0,{readNull:!0,clone:!0}))}}return Wr&&Nr&&(Wr=an._setOwner(Wr,Kr,zr&&$r)),Wr},dr[Br]=function(en){return this._style[Br](en)},dr[$r]=function(en){this._style[$r](en)}}),ct.each({Font:"FontFamily",WindingRule:"FillRule"},function(Ar,_r){var Nr="get"+_r,Fr="set"+_r;gr[Nr]=dr[Nr]="#get"+Ar,gr[Fr]=dr[Fr]="#set"+Ar}),ir.inject(dr),gr},{set:function($t){var Zt=$t instanceof yn,or=Zt?$t._values:$t;if(or){for(var ur in or)if(ur in this._defaults){var dr=or[ur];this[ur]=dr&&Zt&&dr.clone?dr.clone():dr}}},equals:function($t){function Zt(or,ur,dr){var gr=or._values,Ar=ur._values,_r=ur._defaults;for(var Nr in gr){var Fr=gr[Nr],Vr=Ar[Nr];if(!(dr&&Nr in Ar)&&!ct.equals(Fr,Vr===et?_r[Nr]:Vr))return!1}return!0}return $t===this||$t&&this._class===$t._class&&Zt(this,$t)&&Zt($t,this,!0)||!1},_dispose:function(){var $t;$t=this.getFillColor(),$t&&($t._canvasStyle=null),$t=this.getStrokeColor(),$t&&($t._canvasStyle=null),$t=this.getShadowColor(),$t&&($t._canvasStyle=null)},hasFill:function(){var $t=this.getFillColor();return!!$t&&$t.alpha>0},hasStroke:function(){var $t=this.getStrokeColor();return!!$t&&$t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var $t=this.getShadowColor();return!!$t&&$t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var $t=this.getFontSize();return this.getFontWeight()+" "+$t+(/[a-z]/i.test($t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function $t(){var Zt=$t.base.call(this),or=this.getFontSize();return/pt|em|%|px/.test(or)&&(or=this.getView().getPixelSize(or)),Zt??or*1.2}}),pn=new function(){function $t(Zt,or,ur,dr){for(var gr=["","webkit","moz","Moz","ms","o"],Ar=or[0].toUpperCase()+or.substring(1),_r=0;_r<6;_r++){var Nr=gr[_r],Fr=Nr?Nr+Ar:or;if(Fr in Zt){if(ur)Zt[Fr]=dr;else return Zt[Fr];break}}}return{getStyles:function(Zt){var or=Zt&&Zt.nodeType!==9?Zt.ownerDocument:Zt,ur=or&&or.defaultView;return ur&&ur.getComputedStyle(Zt,"")},getBounds:function(Zt,or){var ur=Zt.ownerDocument,dr=ur.body,gr=ur.documentElement,Ar;try{Ar=Zt.getBoundingClientRect()}catch{Ar={left:0,top:0,width:0,height:0}}var _r=Ar.left-(gr.clientLeft||dr.clientLeft||0),Nr=Ar.top-(gr.clientTop||dr.clientTop||0);if(!or){var Fr=ur.defaultView;_r+=Fr.pageXOffset||gr.scrollLeft||dr.scrollLeft,Nr+=Fr.pageYOffset||gr.scrollTop||dr.scrollTop}return new Ut(_r,Nr,Ar.width,Ar.height)},getViewportBounds:function(Zt){var or=Zt.ownerDocument,ur=or.defaultView,dr=or.documentElement;return new Ut(0,0,ur.innerWidth||dr.clientWidth,ur.innerHeight||dr.clientHeight)},getOffset:function(Zt,or){return pn.getBounds(Zt,or).getPoint()},getSize:function(Zt){return pn.getBounds(Zt,!0).getSize()},isInvisible:function(Zt){return pn.getSize(Zt).equals(new zt(0,0))},isInView:function(Zt){return!pn.isInvisible(Zt)&&pn.getViewportBounds(Zt).intersects(pn.getBounds(Zt,!0))},isInserted:function(Zt){return ut.body.contains(Zt)},getPrefixed:function(Zt,or){return Zt&&$t(Zt,or)},setPrefixed:function(Zt,or,ur){if(typeof or=="object")for(var dr in or)$t(Zt,dr,!0,or[dr]);else $t(Zt,or,!0,ur)}}},En={add:function($t,Zt){if($t)for(var or in Zt)for(var ur=Zt[or],dr=or.split(/[\s,]+/g),gr=0,Ar=dr.length;gr<Ar;gr++){var _r=dr[gr],Nr=$t===ut&&(_r==="touchstart"||_r==="touchmove")?{passive:!1}:!1;$t.addEventListener(_r,ur,Nr)}},remove:function($t,Zt){if($t)for(var or in Zt)for(var ur=Zt[or],dr=or.split(/[\s,]+/g),gr=0,Ar=dr.length;gr<Ar;gr++)$t.removeEventListener(dr[gr],ur,!1)},getPoint:function($t){var Zt=$t.targetTouches?$t.targetTouches.length?$t.targetTouches[0]:$t.changedTouches[0]:$t;return new jt(Zt.pageX||Zt.clientX+ut.documentElement.scrollLeft,Zt.pageY||Zt.clientY+ut.documentElement.scrollTop)},getTarget:function($t){return $t.target||$t.srcElement},getRelatedTarget:function($t){return $t.relatedTarget||$t.toElement},getOffset:function($t,Zt){return En.getPoint($t).subtract(pn.getOffset(Zt||En.getTarget($t)))}};En.requestAnimationFrame=new function(){var $t=pn.getPrefixed(ot,"requestAnimationFrame"),Zt=!1,or=[],ur;function dr(){var gr=or;or=[];for(var Ar=0,_r=gr.length;Ar<_r;Ar++)gr[Ar]();Zt=$t&&or.length,Zt&&$t(dr)}return function(gr){or.push(gr),$t?Zt||($t(dr),Zt=!0):ur||(ur=setInterval(dr,1e3/60))}};var On=ct.extend(dt,{_class:"View",initialize:function $t(Zt,or){function ur(Hr){return or[Hr]||parseInt(or.getAttribute(Hr),10)}function dr(){var Hr=pn.getSize(or);return Hr.isNaN()||Hr.isZero()?new zt(ur("width"),ur("height")):Hr}var gr;if(ot&&or){this._id=or.getAttribute("id"),this._id==null&&or.setAttribute("id",this._id="paper-view-"+$t._id++),En.add(or,this._viewEvents);var Ar="none";if(pn.setPrefixed(or.style,{userDrag:Ar,userSelect:Ar,touchCallout:Ar,contentZooming:Ar,tapHighlightColor:"rgba(0,0,0,0)"}),ft.hasAttribute(or,"resize")){var _r=this;En.add(ot,this._windowEvents={resize:function(){_r.setViewSize(dr())}})}if(gr=dr(),ft.hasAttribute(or,"stats")&&typeof Stats<"u"){this._stats=new Stats;var Nr=this._stats.domElement,Fr=Nr.style,Vr=pn.getOffset(or);Fr.position="absolute",Fr.left=Vr.x+"px",Fr.top=Vr.y+"px",ut.body.appendChild(Nr)}}else gr=new zt(or),or=null;this._project=Zt,this._scope=Zt._scope,this._element=or,this._pixelRatio||(this._pixelRatio=ot&&ot.devicePixelRatio||1),this._setElementSize(gr.width,gr.height),this._viewSize=gr,$t._views.push(this),$t._viewsById[this._id]=this,(this._matrix=new Yt)._owner=this,$t._focused||($t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Bn.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;On._focused===this&&(On._focused=null),On._views.splice(On._views.indexOf(this),1),delete On._viewsById[this._id];var $t=this._project;return $t._view===this&&($t._view=null),En.remove(this._element,this._viewEvents),En.remove(ot,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:ct.each(ir._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function($t){this[$t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function($t){this._autoUpdate=$t,$t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var $t=this;En.requestAnimationFrame(function(){if($t._requested=!1,$t._animate){$t.requestUpdate();var Zt=$t._element;(!pn.getPrefixed(ut,"hidden")||ft.getAttribute(Zt,"keepalive")==="true")&&pn.isInView(Zt)&&$t._handleFrame()}$t._autoUpdate&&$t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Bn=this._scope;var $t=Date.now()/1e3,Zt=this._last?$t-this._last:0;this._last=$t,this.emit("frame",new ct({delta:Zt,time:this._time+=Zt,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function($t,Zt){var or=this._frameItems;Zt?(or[$t._id]={item:$t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete or[$t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function($t){for(var Zt in this._frameItems){var or=this._frameItems[Zt];or.item.emit("frame",new ct($t,{time:or.time+=$t.delta,count:or.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=et},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var $t=this._viewSize;return new Ht($t.width,$t.height,this,"setViewSize")},setViewSize:function(){var $t=zt.read(arguments),Zt=$t.subtract(this._viewSize);Zt.isZero()||(this._setElementSize($t.width,$t.height),this._viewSize.set($t),this._changed(),this.emit("resize",{size:$t,delta:Zt}),this._autoUpdate&&this.update())},_setElementSize:function($t,Zt){var or=this._element;or&&(or.width!==$t&&(or.width=$t),or.height!==Zt&&(or.height=Zt))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new Ut(new jt,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return pn.isInView(this._element)},isInserted:function(){return pn.isInserted(this._element)},getPixelSize:function($t){var Zt=this._element,or;if(Zt){var ur=Zt.parentNode,dr=ut.createElement("div");dr.style.fontSize=$t,ur.appendChild(dr),or=parseFloat(pn.getStyles(dr).fontSize),ur.removeChild(dr)}else or=parseFloat(or);return or},getTextWidth:function($t,Zt){return 0}},ct.each(["rotate","scale","shear","skew"],function($t){var Zt=$t==="rotate";this[$t]=function(){var or=arguments,ur=(Zt?ct:jt).read(or),dr=jt.read(or,0,{readNull:!0});return this.transform(new Yt()[$t](ur,dr||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var $t=new Yt;return this.transform($t.translate.apply($t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var $t=jt.read(arguments);this.translate(this.getCenter().subtract($t))},getZoom:function(){var $t=this._decompose().scaling;return($t.x+$t.y)/2},setZoom:function($t){this.transform(new Yt().scale($t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function($t){var Zt=this.getRotation();Zt!=null&&$t!=null&&this.rotate($t-Zt)},getScaling:function(){var $t=this._decompose().scaling;return new Bt($t.x,$t.y,this,"setScaling")},setScaling:function(){var $t=this.getScaling(),Zt=jt.read(arguments,0,{clone:!0,readNull:!0});$t&&Zt&&this.scale(Zt.x/$t.x,Zt.y/$t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var $t=this._matrix;$t.set.apply($t,arguments)},transform:function($t){this._matrix.append($t)},scrollBy:function(){this.translate(jt.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(jt.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(jt.read(arguments))},getEventPoint:function($t){return this.viewToProject(En.getOffset($t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function($t,Zt){ut&&typeof Zt=="string"&&(Zt=ut.getElementById(Zt));var or=ot?Xn:On;return new or($t,Zt)}}},new function(){if(!ot)return;var $t,Zt,or=!1,ur=!1;function dr(cn){var vn=En.getTarget(cn);return vn.getAttribute&&On._viewsById[vn.getAttribute("id")]}function gr(){var cn=On._focused;if(!cn||!cn.isVisible()){for(var vn=0,bn=On._views.length;vn<bn;vn++)if((cn=On._views[vn]).isVisible()){On._focused=Zt=cn;break}}}function Ar(cn,vn,bn){cn._handleMouseEvent("mousemove",vn,bn)}var _r=ot.navigator,Nr,Fr,Vr;_r.pointerEnabled||_r.msPointerEnabled?(Nr="pointerdown MSPointerDown",Fr="pointermove MSPointerMove",Vr="pointerup pointercancel MSPointerUp MSPointerCancel"):(Nr="touchstart",Fr="touchmove",Vr="touchend touchcancel","ontouchstart"in ot&&_r.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(Nr+=" mousedown",Fr+=" mousemove",Vr+=" mouseup"));var Hr={},$r={mouseout:function(cn){var vn=On._focused,bn=En.getRelatedTarget(cn);if(vn&&(!bn||bn.nodeName==="HTML")){var _n=En.getOffset(cn,vn._element),Cn=_n.x,Fn=Math.abs,Wn=Fn(Cn),Yn=1<<25,Qn=Wn-Yn;_n.x=Fn(Qn)<Wn?Qn*(Cn<0?-1:1):Cn,Ar(vn,cn,vn.viewToProject(_n))}},scroll:gr};Hr[Nr]=function(cn){var vn=On._focused=dr(cn);or||(or=!0,vn._handleMouseEvent("mousedown",cn))},$r[Fr]=function(cn){var vn=On._focused;if(!ur){var bn=dr(cn);bn?vn!==bn&&(vn&&Ar(vn,cn),$t||($t=vn),vn=On._focused=Zt=bn):Zt&&Zt===vn&&($t&&!$t.isInserted()&&($t=null),vn=On._focused=$t,$t=null,gr())}vn&&Ar(vn,cn)},$r[Nr]=function(){ur=!0},$r[Vr]=function(cn){var vn=On._focused;vn&&or&&vn._handleMouseEvent("mouseup",cn),ur=or=!1},En.add(ut,$r),En.add(ot,{load:gr});var Br=!1,en=!1,Kr={doubleclick:"click",mousedrag:"mousemove"},Yr=!1,zr,Wr,jr,Xr,Jr,nn,Zr,on;function hn(cn,vn,bn,_n,Cn,Fn,Wn){var Yn=!1,Qn;function ss(zn,Gn){if(zn.responds(Gn)){if(Qn||(Qn=new gs(Gn,_n,Cn,vn||zn,Fn?Cn.subtract(Fn):null)),zn.emit(Gn,Qn)&&(Br=!0,Qn.prevented&&(en=!0),Qn.stopped))return Yn=!0}else{var es=Kr[Gn];if(es)return ss(zn,es)}}for(;cn&&cn!==Wn&&!ss(cn,bn);)cn=cn._parent;return Yn}function fn(cn,vn,bn,_n,Cn,Fn){return cn._project.removeOn(bn),en=Br=!1,Jr&&hn(Jr,null,bn,_n,Cn,Fn)||vn&&vn!==Jr&&!vn.isDescendant(Jr)&&hn(vn,null,bn==="mousedrag"?"mousemove":bn,_n,Cn,Fn,Jr)||hn(cn,Jr||vn||cn,bn,_n,Cn,Fn)}var xn={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:Hr,_handleMouseEvent:function(cn,vn,bn){var _n=this._itemEvents,Cn=_n.native[cn],Fn=cn==="mousemove",Wn=this._scope.tool,Yn=this;function Qn(ys){return _n.virtual[ys]||Yn.responds(ys)||Wn&&Wn.responds(ys)}Fn&&or&&Qn("mousedrag")&&(cn="mousedrag"),bn||(bn=this.getEventPoint(vn));var ss=this.getBounds().contains(bn),zn=Cn&&ss&&Yn._project.hitTest(bn,{tolerance:0,fill:!0,stroke:!0}),Gn=zn&&zn.item||null,es=!1,ls={};if(ls[cn.substr(5)]=!0,Cn&&Gn!==Xr&&(Xr&&hn(Xr,null,"mouseleave",vn,bn),Gn&&hn(Gn,null,"mouseenter",vn,bn),Xr=Gn),Yr^ss&&(hn(this,null,ss?"mouseenter":"mouseleave",vn,bn),es=!0),(ss||ls.drag)&&!bn.equals(Wr)&&(fn(this,Gn,Fn?cn:"mousemove",vn,bn,Wr),es=!0),Yr=ss,ls.down&&ss||ls.up&&zr){if(fn(this,Gn,cn,vn,bn,zr),ls.down){if(on=Gn===nn&&Date.now()-Zr<300,jr=nn=Gn,!en&&Gn){for(var as=Gn;as&&!as.responds("mousedrag");)as=as._parent;as&&(Jr=Gn)}zr=bn}else ls.up&&(!en&&Gn===jr&&(Zr=Date.now(),fn(this,Gn,on?"doubleclick":"click",vn,bn,zr),on=!1),jr=Jr=null);Yr=!1,es=!0}Wr=bn,es&&Wn&&(Br=Wn._handleMouseEvent(cn,vn,bn,ls)||Br),vn.cancelable!==!1&&(Br&&!ls.move||ls.down&&Qn("mouseup"))&&vn.preventDefault()},_handleKeyEvent:function(cn,vn,bn,_n){var Cn=this._scope,Fn=Cn.tool,Wn;function Yn(Qn){Qn.responds(cn)&&(Bn=Cn,Qn.emit(cn,Wn=Wn||new Ln(cn,vn,bn,_n)))}this.isVisible()&&(Yn(this),Fn&&Fn.responds(cn)&&Yn(Fn))},_countItemEvent:function(cn,vn){var bn=this._itemEvents,_n=bn.native,Cn=bn.virtual;for(var Fn in xn)_n[Fn]=(_n[Fn]||0)+(xn[Fn][cn]||0)*vn;Cn[cn]=(Cn[cn]||0)+vn},statics:{updateFocus:gr,_resetState:function(){or=ur=Br=Yr=!1,$t=Zt=zr=Wr=jr=Xr=Jr=nn=Zr=on=null}}}}),Xn=On.extend({_class:"CanvasView",initialize:function(Zt,or){if(!(or instanceof ot.HTMLCanvasElement)){var ur=zt.read(arguments,1);if(ur.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+ct.slice(arguments,1));or=Tn.getCanvas(ur)}var dr=this._context=or.getContext("2d");if(dr.save(),this._pixelRatio=1,!/^off|false$/.test(ft.getAttribute(or,"hidpi"))){var gr=ot.devicePixelRatio||1,Ar=pn.getPrefixed(dr,"backingStorePixelRatio")||1;this._pixelRatio=gr/Ar}On.call(this,Zt,or),this._needsUpdate=!0},remove:function $t(){return this._context.restore(),$t.base.call(this)},_setElementSize:function $t(Zt,or){var ur=this._pixelRatio;if($t.base.call(this,Zt*ur,or*ur),ur!==1){var dr=this._element,gr=this._context;if(!ft.hasAttribute(dr,"resize")){var Ar=dr.style;Ar.width=Zt+"px",Ar.height=or+"px"}gr.restore(),gr.save(),gr.scale(ur,ur)}},getContext:function(){return this._context},getPixelSize:function $t(Zt){var or=Bn.agent,ur;if(or&&or.firefox)ur=$t.base.call(this,Zt);else{var dr=this._context,gr=dr.font;dr.font=Zt+" serif",ur=parseFloat(dr.font),dr.font=gr}return ur},getTextWidth:function($t,Zt){var or=this._context,ur=or.font,dr=0;or.font=$t;for(var gr=0,Ar=Zt.length;gr<Ar;gr++)dr=Math.max(dr,or.measureText(Zt[gr]).width);return or.font=ur,dr},update:function(){if(!this._needsUpdate)return!1;var $t=this._project,Zt=this._context,or=this._viewSize;return Zt.clearRect(0,0,or.width+1,or.height+1),$t&&$t.draw(Zt,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Un=ct.extend({_class:"Event",initialize:function(Zt){this.event=Zt,this.type=Zt&&Zt.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return ns.modifiers}}),Ln=Un.extend({_class:"KeyEvent",initialize:function(Zt,or,ur,dr){this.type=Zt,this.event=or,this.key=ur,this.character=dr},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),ns=new function(){var $t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},Zt={tab:"	",space:" ",enter:"\r"},or={},ur={},dr,gr,Ar=new ct({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var Fr=Bn&&Bn.agent;return Fr&&Fr.mac?this.meta:this.control}}});function _r(Fr){var Vr=Fr.key||Fr.keyIdentifier;return Vr=/^U\+/.test(Vr)?String.fromCharCode(parseInt(Vr.substr(2),16)):/^Arrow[A-Z]/.test(Vr)?Vr.substr(5):Vr==="Unidentified"||Vr===et?String.fromCharCode(Fr.keyCode):Vr,$t[Vr]||(Vr.length>1?ct.hyphenate(Vr):Vr.toLowerCase())}function Nr(Fr,Vr,Hr,$r){var Br=On._focused,en;if(or[Vr]=Fr,Fr?ur[Vr]=Hr:delete ur[Vr],Vr.length>1&&(en=ct.camelize(Vr))in Ar){Ar[en]=Fr;var Kr=Bn&&Bn.agent;if(en==="meta"&&Kr&&Kr.mac)if(Fr)dr={};else{for(var Yr in dr)Yr in ur&&Nr(!1,Yr,dr[Yr],$r);dr=null}}else Fr&&dr&&(dr[Vr]=Hr);Br&&Br._handleKeyEvent(Fr?"keydown":"keyup",$r,Vr,Hr)}return En.add(ut,{keydown:function(Fr){var Vr=_r(Fr),Hr=Bn&&Bn.agent;Vr.length>1||Hr&&Hr.chrome&&(Fr.altKey||Hr.mac&&Fr.metaKey||!Hr.mac&&Fr.ctrlKey)?Nr(!0,Vr,Zt[Vr]||(Vr.length>1?"":Vr),Fr):gr=Vr},keypress:function(Fr){if(gr){var Vr=_r(Fr),Hr=Fr.charCode,$r=Hr>=32?String.fromCharCode(Hr):Vr.length>1?"":Vr;Vr!==gr&&(Vr=$r.toLowerCase()),Nr(!0,Vr,$r,Fr),gr=null}},keyup:function(Fr){var Vr=_r(Fr);Vr in ur&&Nr(!1,Vr,ur[Vr],Fr)}}),En.add(ot,{blur:function(Fr){for(var Vr in ur)Nr(!1,Vr,ur[Vr],Fr)}}),{modifiers:Ar,isDown:function(Fr){return!!or[Fr]}}},gs=Un.extend({_class:"MouseEvent",initialize:function(Zt,or,ur,dr,gr){this.type=Zt,this.event=or,this.point=ur,this.target=dr,this.delta=gr},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Es=Un.extend({_class:"ToolEvent",_item:null,initialize:function(Zt,or,ur){this.tool=Zt,this.type=or,this.event=ur},_choosePoint:function($t,Zt){return $t||(Zt?Zt.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function($t){this._point=$t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function($t){this._lastPoint=$t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function($t){this._downPoint=$t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function($t){this._middlePoint=$t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function($t){this._delta=$t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function($t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=$t},getItem:function(){if(!this._item){var $t=this.tool._scope.project.hitTest(this.getPoint());if($t){for(var Zt=$t.item,or=Zt._parent;/^(Group|CompoundPath)$/.test(or._class);)Zt=or,or=or._parent;this._item=Zt}}return this._item},setItem:function($t){this._item=$t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),wn=St.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(Zt){St.call(this),this._moveCount=-1,this._downCount=-1,this.set(Zt)},getMinDistance:function(){return this._minDistance},setMinDistance:function($t){this._minDistance=$t,$t!=null&&this._maxDistance!=null&&$t>this._maxDistance&&(this._maxDistance=$t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function($t){this._maxDistance=$t,this._minDistance!=null&&$t!=null&&$t<this._minDistance&&(this._minDistance=$t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function($t){this._minDistance=this._maxDistance=$t},_handleMouseEvent:function($t,Zt,or,ur){Bn=this._scope,ur.drag&&!this.responds($t)&&($t="mousemove");var dr=ur.move||ur.drag,gr=this.responds($t),Ar=!1,_r=this;function Nr(Vr,Hr){var $r=or,Br=dr?_r._point:_r._downPoint||$r;if(dr){if(_r._moveCount>=0&&$r.equals(Br))return!1;if(Br&&(Vr!=null||Hr!=null)){var en=$r.subtract(Br),Kr=en.getLength();if(Kr<(Vr||0))return!1;Hr&&($r=Br.add(en.normalize(Math.min(Kr,Hr))))}_r._moveCount++}return _r._point=$r,_r._lastPoint=Br||$r,ur.down&&(_r._moveCount=-1,_r._downPoint=$r,_r._downCount++),!0}function Fr(){gr&&(Ar=_r.emit($t,new Es(_r,$t,Zt))||Ar)}if(ur.down)Nr(),Fr();else if(ur.up)Nr(null,this._maxDistance),Fr();else if(gr)for(;Nr(this._minDistance,this._maxDistance);)Fr();return Ar}}),mn=ct.extend(dt,{_class:"Tween",statics:{easings:new ct({linear:function($t){return $t},easeInQuad:function($t){return $t*$t},easeOutQuad:function($t){return $t*(2-$t)},easeInOutQuad:function($t){return $t<.5?2*$t*$t:-1+2*(2-$t)*$t},easeInCubic:function($t){return $t*$t*$t},easeOutCubic:function($t){return--$t*$t*$t+1},easeInOutCubic:function($t){return $t<.5?4*$t*$t*$t:($t-1)*(2*$t-2)*(2*$t-2)+1},easeInQuart:function($t){return $t*$t*$t*$t},easeOutQuart:function($t){return 1- --$t*$t*$t*$t},easeInOutQuart:function($t){return $t<.5?8*$t*$t*$t*$t:1-8*--$t*$t*$t*$t},easeInQuint:function($t){return $t*$t*$t*$t*$t},easeOutQuint:function($t){return 1+--$t*$t*$t*$t*$t},easeInOutQuint:function($t){return $t<.5?16*$t*$t*$t*$t*$t:1+16*--$t*$t*$t*$t*$t}})},initialize:function $t(Zt,or,ur,dr,gr,Ar){this.object=Zt;var _r=typeof gr,Nr=_r==="function";this.type=Nr?_r:_r==="string"?gr:"linear",this.easing=Nr?gr:$t.easings[this.type],this.duration=dr,this.running=!1,this._then=null,this._startTime=null;var Fr=or||ur;this._keys=Fr?Object.keys(Fr):[],this._parsedKeys=this._parseKeys(this._keys),this._from=Fr&&this._getState(or),this._to=Fr&&this._getState(ur),Ar!==!1&&this.start()},then:function($t){return this._then=$t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function($t){if(this.running){$t>=1&&($t=1,this.running=!1);for(var Zt=this.easing($t),or=this._keys,ur=function(Vr){return typeof Vr=="function"?Vr(Zt,$t):Vr},dr=0,gr=or&&or.length;dr<gr;dr++){var Ar=or[dr],_r=ur(this._from[Ar]),Nr=ur(this._to[Ar]),Fr=_r&&Nr&&_r.__add&&Nr.__add?Nr.__subtract(_r).__multiply(Zt).__add(_r):(Nr-_r)*Zt+_r;this._setProperty(this._parsedKeys[Ar],Fr)}this.responds("update")&&this.emit("update",new ct({progress:$t,factor:Zt})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function($t){var Zt=this._startTime,or=Zt?($t-Zt)/this.duration:0;Zt||(this._startTime=$t),this.update(or)},_getState:function($t){for(var Zt=this._keys,or={},ur=0,dr=Zt.length;ur<dr;ur++){var gr=Zt[ur],Ar=this._parsedKeys[gr],_r=this._getProperty(Ar),Nr;if($t){var Fr=this._resolveValue(_r,$t[gr]);this._setProperty(Ar,Fr),Nr=this._getProperty(Ar),Nr=Nr&&Nr.clone?Nr.clone():Nr,this._setProperty(Ar,_r)}else Nr=_r&&_r.clone?_r.clone():_r;or[gr]=Nr}return or},_resolveValue:function($t,Zt){if(Zt){if(Array.isArray(Zt)&&Zt.length===2){var or=Zt[0];return or&&or.match&&or.match(/^[+\-\*\/]=/)?this._calculate($t,or[0],Zt[1]):Zt}else if(typeof Zt=="string"){var ur=Zt.match(/^[+\-*/]=(.*)/);if(ur){var dr=JSON.parse(ur[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate($t,Zt[0],dr)}}}return Zt},_calculate:function($t,Zt,or){return Bn.PaperScript.calculateBinary($t,Zt,or)},_parseKeys:function($t){for(var Zt={},or=0,ur=$t.length;or<ur;or++){var dr=$t[or],gr=dr.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");Zt[dr]=gr.split("/")}return Zt},_getProperty:function($t,Zt){for(var or=this.object,ur=0,dr=$t.length-(Zt||0);ur<dr&&or;ur++)or=or[$t[ur]];return or},_setProperty:function($t,Zt){var or=this._getProperty($t,1);or&&(or[$t[$t.length-1]]=Zt)}}),Dn={request:function($t){var Zt=new g.XMLHttpRequest;return Zt.open(($t.method||"get").toUpperCase(),$t.url,ct.pick($t.async,!0)),$t.mimeType&&Zt.overrideMimeType($t.mimeType),Zt.onload=function(){var or=Zt.status;or===0||or===200?$t.onLoad&&$t.onLoad.call(Zt,Zt.responseText):Zt.onerror()},Zt.onerror=function(){var or=Zt.status,ur='Could not load "'+$t.url+'" (Status: '+or+")";if($t.onError)$t.onError(ur,or);else throw new Error(ur)},Zt.send(null)}},Tn=ct.exports.CanvasProvider={canvases:[],getCanvas:function($t,Zt,or){if(!ot)return null;var ur,dr=!0;typeof $t=="object"&&(Zt=$t.height,$t=$t.width),this.canvases.length?ur=this.canvases.pop():(ur=ut.createElement("canvas"),dr=!1);var gr=ur.getContext("2d",or||{});if(!gr)throw new Error("Canvas "+ur+" is unable to provide a 2D context.");return ur.width===$t&&ur.height===Zt?dr&&gr.clearRect(0,0,$t+1,Zt+1):(ur.width=$t,ur.height=Zt),gr.save(),ur},getContext:function($t,Zt,or){var ur=this.getCanvas($t,Zt,or);return ur?ur.getContext("2d",or||{}):null},release:function($t){var Zt=$t&&$t.canvas?$t.canvas:$t;Zt&&Zt.getContext&&(Zt.getContext("2d").restore(),this.canvases.push(Zt))}},An=new function(){var $t=Math.min,Zt=Math.max,or=Math.abs,ur,dr,gr,Ar,_r,Nr,Fr,Vr,Hr,$r,Br;function en(Jr,nn,Zr){return .2989*Jr+.587*nn+.114*Zr}function Kr(Jr,nn,Zr,fn){var hn=fn-en(Jr,nn,Zr);Hr=Jr+hn,$r=nn+hn,Br=Zr+hn;var fn=en(Hr,$r,Br),xn=$t(Hr,$r,Br),cn=Zt(Hr,$r,Br);if(xn<0){var vn=fn-xn;Hr=fn+(Hr-fn)*fn/vn,$r=fn+($r-fn)*fn/vn,Br=fn+(Br-fn)*fn/vn}if(cn>255){var bn=255-fn,_n=cn-fn;Hr=fn+(Hr-fn)*bn/_n,$r=fn+($r-fn)*bn/_n,Br=fn+(Br-fn)*bn/_n}}function Yr(Jr,nn,Zr){return Zt(Jr,nn,Zr)-$t(Jr,nn,Zr)}function zr(Jr,nn,Zr,on){var hn=[Jr,nn,Zr],fn=Zt(Jr,nn,Zr),xn=$t(Jr,nn,Zr),cn;xn=xn===Jr?0:xn===nn?1:2,fn=fn===Jr?0:fn===nn?1:2,cn=$t(xn,fn)===0?Zt(xn,fn)===1?2:1:0,hn[fn]>hn[xn]?(hn[cn]=(hn[cn]-hn[xn])*on/(hn[fn]-hn[xn]),hn[fn]=on):hn[cn]=hn[fn]=0,hn[xn]=0,Hr=hn[0],$r=hn[1],Br=hn[2]}var Wr={multiply:function(){Hr=_r*ur/255,$r=Nr*dr/255,Br=Fr*gr/255},screen:function(){Hr=_r+ur-_r*ur/255,$r=Nr+dr-Nr*dr/255,Br=Fr+gr-Fr*gr/255},overlay:function(){Hr=_r<128?2*_r*ur/255:255-2*(255-_r)*(255-ur)/255,$r=Nr<128?2*Nr*dr/255:255-2*(255-Nr)*(255-dr)/255,Br=Fr<128?2*Fr*gr/255:255-2*(255-Fr)*(255-gr)/255},"soft-light":function(){var Jr=ur*_r/255;Hr=Jr+_r*(255-(255-_r)*(255-ur)/255-Jr)/255,Jr=dr*Nr/255,$r=Jr+Nr*(255-(255-Nr)*(255-dr)/255-Jr)/255,Jr=gr*Fr/255,Br=Jr+Fr*(255-(255-Fr)*(255-gr)/255-Jr)/255},"hard-light":function(){Hr=ur<128?2*ur*_r/255:255-2*(255-ur)*(255-_r)/255,$r=dr<128?2*dr*Nr/255:255-2*(255-dr)*(255-Nr)/255,Br=gr<128?2*gr*Fr/255:255-2*(255-gr)*(255-Fr)/255},"color-dodge":function(){Hr=_r===0?0:ur===255?255:$t(255,255*_r/(255-ur)),$r=Nr===0?0:dr===255?255:$t(255,255*Nr/(255-dr)),Br=Fr===0?0:gr===255?255:$t(255,255*Fr/(255-gr))},"color-burn":function(){Hr=_r===255?255:ur===0?0:Zt(0,255-(255-_r)*255/ur),$r=Nr===255?255:dr===0?0:Zt(0,255-(255-Nr)*255/dr),Br=Fr===255?255:gr===0?0:Zt(0,255-(255-Fr)*255/gr)},darken:function(){Hr=_r<ur?_r:ur,$r=Nr<dr?Nr:dr,Br=Fr<gr?Fr:gr},lighten:function(){Hr=_r>ur?_r:ur,$r=Nr>dr?Nr:dr,Br=Fr>gr?Fr:gr},difference:function(){Hr=_r-ur,Hr<0&&(Hr=-Hr),$r=Nr-dr,$r<0&&($r=-$r),Br=Fr-gr,Br<0&&(Br=-Br)},exclusion:function(){Hr=_r+ur*(255-_r-_r)/255,$r=Nr+dr*(255-Nr-Nr)/255,Br=Fr+gr*(255-Fr-Fr)/255},hue:function(){zr(ur,dr,gr,Yr(_r,Nr,Fr)),Kr(Hr,$r,Br,en(_r,Nr,Fr))},saturation:function(){zr(_r,Nr,Fr,Yr(ur,dr,gr)),Kr(Hr,$r,Br,en(_r,Nr,Fr))},luminosity:function(){Kr(_r,Nr,Fr,en(ur,dr,gr))},color:function(){Kr(ur,dr,gr,en(_r,Nr,Fr))},add:function(){Hr=$t(_r+ur,255),$r=$t(Nr+dr,255),Br=$t(Fr+gr,255)},subtract:function(){Hr=Zt(_r-ur,0),$r=Zt(Nr-dr,0),Br=Zt(Fr-gr,0)},average:function(){Hr=(_r+ur)/2,$r=(Nr+dr)/2,Br=(Fr+gr)/2},negation:function(){Hr=255-or(255-ur-_r),$r=255-or(255-dr-Nr),Br=255-or(255-gr-Fr)}},jr=this.nativeModes=ct.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(Jr){this[Jr]=!0},{}),Xr=Tn.getContext(1,1,{willReadFrequently:!0});Xr&&(ct.each(Wr,function(Jr,nn){var Zr=nn==="darken",on=!1;Xr.save();try{Xr.fillStyle=Zr?"#300":"#a00",Xr.fillRect(0,0,1,1),Xr.globalCompositeOperation=nn,Xr.globalCompositeOperation===nn&&(Xr.fillStyle=Zr?"#a00":"#300",Xr.fillRect(0,0,1,1),on=Xr.getImageData(0,0,1,1).data[0]!==Zr?170:51)}catch{}Xr.restore(),jr[nn]=on}),Tn.release(Xr)),this.process=function(Jr,nn,Zr,on,hn){var fn=nn.canvas,xn=Jr==="normal";if(xn||jr[Jr])Zr.save(),Zr.setTransform(1,0,0,1,0,0),Zr.globalAlpha=on,xn||(Zr.globalCompositeOperation=Jr),Zr.drawImage(fn,hn.x,hn.y),Zr.restore();else{var cn=Wr[Jr];if(!cn)return;for(var vn=Zr.getImageData(hn.x,hn.y,fn.width,fn.height),bn=vn.data,_n=nn.getImageData(0,0,fn.width,fn.height).data,Cn=0,Fn=bn.length;Cn<Fn;Cn+=4){ur=_n[Cn],_r=bn[Cn],dr=_n[Cn+1],Nr=bn[Cn+1],gr=_n[Cn+2],Fr=bn[Cn+2],Ar=_n[Cn+3],Vr=bn[Cn+3],cn();var Wn=Ar*on/255,Yn=1-Wn;bn[Cn]=Wn*Hr+Yn*_r,bn[Cn+1]=Wn*$r+Yn*Nr,bn[Cn+2]=Wn*Br+Yn*Fr,bn[Cn+3]=Ar*on+Yn*Vr}Zr.putImageData(vn,hn.x,hn.y)}}},$n=new function(){var $t="http://www.w3.org/2000/svg",Zt="http://www.w3.org/2000/xmlns",or="http://www.w3.org/1999/xlink",ur={href:or,xlink:Zt,xmlns:Zt+"/","xmlns:xlink":Zt+"/"};function dr(_r,Nr,Fr){return Ar(ut.createElementNS($t,_r),Nr,Fr)}function gr(_r,Nr){var Fr=ur[Nr],Vr=Fr?_r.getAttributeNS(Fr,Nr):_r.getAttribute(Nr);return Vr==="null"?null:Vr}function Ar(_r,Nr,Fr){for(var Vr in Nr){var Hr=Nr[Vr],$r=ur[Vr];typeof Hr=="number"&&Fr&&(Hr=Fr.number(Hr)),$r?_r.setAttributeNS($r,Vr,Hr):_r.setAttribute(Vr,Hr)}return _r}return{svg:$t,xmlns:Zt,xlink:or,create:dr,get:gr,set:Ar}},qn=ct.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function($t,Zt){return!Zt&&($t instanceof mr||$t instanceof vr||$t instanceof qr)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function($t,Zt){var or=ct.capitalize(Zt),ur=$t[2];this[Zt]={type:$t[1],property:Zt,attribute:$t[0],toSVG:ur,fromSVG:ur&&ct.each(ur,function(dr,gr){this[dr]=gr},{}),exportFilter:$t[3],get:"get"+or,set:"set"+or}},{});new function(){var $t;function Zt(Wr,jr,Xr){var Jr=new ct,nn=Wr.getTranslation();if(jr){var Zr;Wr.isInvertible()?(Wr=Wr._shiftless(),Zr=Wr._inverseTransform(nn),nn=null):Zr=new jt,Jr[Xr?"cx":"x"]=Zr.x,Jr[Xr?"cy":"y"]=Zr.y}if(!Wr.isIdentity()){var on=Wr.decompose();if(on){var hn=[],fn=on.rotation,xn=on.scaling,cn=on.skewing;nn&&!nn.isZero()&&hn.push("translate("+$t.point(nn)+")"),fn&&hn.push("rotate("+$t.number(fn)+")"),(!Rt.isZero(xn.x-1)||!Rt.isZero(xn.y-1))&&hn.push("scale("+$t.point(xn)+")"),cn.x&&hn.push("skewX("+$t.number(cn.x)+")"),cn.y&&hn.push("skewY("+$t.number(cn.y)+")"),Jr.transform=hn.join(" ")}else Jr.transform="matrix("+Wr.getValues().join(",")+")"}return Jr}function or(Wr,jr){for(var Xr=Zt(Wr._matrix),Jr=Wr._children,nn=$n.create("g",Xr,$t),Zr=0,on=Jr.length;Zr<on;Zr++){var hn=Jr[Zr],fn=Yr(hn,jr);if(fn)if(hn.isClipMask()){var xn=$n.create("clipPath");xn.appendChild(fn),en(hn,xn,"clip"),$n.set(nn,{"clip-path":"url(#"+xn.id+")"})}else nn.appendChild(fn)}return nn}function ur(Wr,jr){var Xr=Zt(Wr._matrix,!0),Jr=Wr.getSize(),nn=Wr.getImage();return Xr.x-=Jr.width/2,Xr.y-=Jr.height/2,Xr.width=Jr.width,Xr.height=Jr.height,Xr.href=jr.embedImages==!1&&nn&&nn.src||Wr.toDataURL(),$n.create("image",Xr,$t)}function dr(Wr,jr){var Xr=jr.matchShapes;if(Xr){var Jr=Wr.toShape(!1);if(Jr)return gr(Jr)}var nn=Wr._segments,Zr=nn.length,on,hn=Zt(Wr._matrix);if(Xr&&Zr>=2&&!Wr.hasHandles())if(Zr>2){on=Wr._closed?"polygon":"polyline";for(var fn=[],xn=0;xn<Zr;xn++)fn.push($t.point(nn[xn]._point));hn.points=fn.join(" ")}else{on="line";var cn=nn[0]._point,vn=nn[1]._point;hn.set({x1:cn.x,y1:cn.y,x2:vn.x,y2:vn.y})}else on="path",hn.d=Wr.getPathData(null,jr.precision);return $n.create(on,hn,$t)}function gr(Wr){var jr=Wr._type,Xr=Wr._radius,Jr=Zt(Wr._matrix,!0,jr!=="rectangle");if(jr==="rectangle"){jr="rect";var nn=Wr._size,Zr=nn.width,on=nn.height;Jr.x-=Zr/2,Jr.y-=on/2,Jr.width=Zr,Jr.height=on,Xr.isZero()&&(Xr=null)}return Xr&&(jr==="circle"?Jr.r=Xr:(Jr.rx=Xr.width,Jr.ry=Xr.height)),$n.create(jr,Jr,$t)}function Ar(Wr,jr){var Xr=Zt(Wr._matrix),Jr=Wr.getPathData(null,jr.precision);return Jr&&(Xr.d=Jr),$n.create("path",Xr,$t)}function _r(Wr,jr){var Xr=Zt(Wr._matrix,!0),Jr=Wr._definition,nn=Br(Jr,"symbol"),Zr=Jr._item,on=Zr.getStrokeBounds();return nn||(nn=$n.create("symbol",{viewBox:$t.rectangle(on)}),nn.appendChild(Yr(Zr,jr)),en(Jr,nn,"symbol")),Xr.href="#"+nn.id,Xr.x+=on.x,Xr.y+=on.y,Xr.width=on.width,Xr.height=on.height,Xr.overflow="visible",$n.create("use",Xr,$t)}function Nr(Wr){var jr=Br(Wr,"color");if(!jr){var Xr=Wr.getGradient(),Jr=Xr._radial,nn=Wr.getOrigin(),Zr=Wr.getDestination(),on;if(Jr){on={cx:nn.x,cy:nn.y,r:nn.getDistance(Zr)};var hn=Wr.getHighlight();hn&&(on.fx=hn.x,on.fy=hn.y)}else on={x1:nn.x,y1:nn.y,x2:Zr.x,y2:Zr.y};on.gradientUnits="userSpaceOnUse",jr=$n.create((Jr?"radial":"linear")+"Gradient",on,$t);for(var fn=Xr._stops,xn=0,cn=fn.length;xn<cn;xn++){var vn=fn[xn],bn=vn._color,_n=bn.getAlpha(),Cn=vn._offset;on={offset:Cn??xn/(cn-1)},bn&&(on["stop-color"]=bn.toCSS(!0)),_n<1&&(on["stop-opacity"]=_n),jr.appendChild($n.create("stop",on,$t))}en(Wr,jr,"color")}return"url(#"+jr.id+")"}function Fr(Wr){var jr=$n.create("text",Zt(Wr._matrix,!0),$t);return jr.textContent=Wr._content,jr}var Vr={Group:or,Layer:or,Raster:ur,Path:dr,Shape:gr,CompoundPath:Ar,SymbolItem:_r,PointText:Fr};function Hr(Wr,jr,Xr,Jr){var nn={},Zr=!Jr&&Wr.getParent(),on=[];return Wr._name!=null&&(nn.id=Wr._name),ct.each(qn,function(hn){var fn=hn.get,xn=hn.type,cn=Wr[fn]();if(hn.exportFilter?hn.exportFilter(Wr,cn):Xr.reduceAttributes==!1||!Zr||!ct.equals(Zr[fn](),cn)){if(xn==="color"&&cn!=null){var vn=cn.getAlpha();vn<1&&(nn[hn.attribute+"-opacity"]=vn)}xn==="style"?on.push(hn.attribute+": "+cn):nn[hn.attribute]=cn==null?"none":xn==="color"?cn.gradient?Nr(cn):cn.toCSS(!0):xn==="array"?cn.join(","):xn==="lookup"?hn.toSVG[cn]:cn}}),on.length&&(nn.style=on.join(";")),nn.opacity===1&&delete nn.opacity,Wr._visible||(nn.visibility="hidden"),$n.set(jr,nn,$t)}var $r;function Br(Wr,jr){return $r||($r={ids:{},svgs:{}}),Wr&&$r.svgs[jr+"-"+(Wr._id||Wr.__id||(Wr.__id=Ft.get("svg")))]}function en(Wr,jr,Xr){$r||Br();var Jr=$r.ids[Xr]=($r.ids[Xr]||0)+1;jr.id=Xr+"-"+Jr,$r.svgs[Xr+"-"+(Wr._id||Wr.__id)]=jr}function Kr(Wr,jr){var Xr=Wr,Jr=null;if($r){Xr=Wr.nodeName.toLowerCase()==="svg"&&Wr;for(var nn in $r.svgs)Jr||(Xr||(Xr=$n.create("svg"),Xr.appendChild(Wr)),Jr=Xr.insertBefore($n.create("defs"),Xr.firstChild)),Jr.appendChild($r.svgs[nn]);$r=null}return jr.asString?new g.XMLSerializer().serializeToString(Xr):Xr}function Yr(Wr,jr,Xr){var Jr=Vr[Wr._class],nn=Jr&&Jr(Wr,jr);if(nn){var Zr=jr.onExport;Zr&&(nn=Zr(Wr,nn,jr)||nn);var on=JSON.stringify(Wr._data);on&&on!=="{}"&&on!=="null"&&nn.setAttribute("data-paper-data",on)}return nn&&Hr(Wr,nn,jr,Xr)}function zr(Wr){return Wr||(Wr={}),$t=new Tt(Wr.precision),Wr}ir.inject({exportSVG:function(Wr){return Wr=zr(Wr),Kr(Yr(this,Wr,!0),Wr)}}),ar.inject({exportSVG:function(Wr){Wr=zr(Wr);var jr=this._children,Xr=this.getView(),Jr=ct.pick(Wr.bounds,"view"),nn=Wr.matrix||Jr==="view"&&Xr._matrix,Zr=nn&&Yt.read([nn]),on=Jr==="view"?new Ut([0,0],Xr.getViewSize()):Jr==="content"?ir._getBounds(jr,Zr,{stroke:!0}).rect:Ut.read([Jr],0,{readNull:!0}),hn={version:"1.1",xmlns:$n.svg,"xmlns:xlink":$n.xlink};on&&(hn.width=on.width,hn.height=on.height,(on.x||on.x===0||on.y||on.y===0)&&(hn.viewBox=$t.rectangle(on)));var fn=$n.create("svg",hn,$t),xn=fn;Zr&&!Zr.isIdentity()&&(xn=fn.appendChild($n.create("g",Zt(Zr),$t)));for(var cn=0,vn=jr.length;cn<vn;cn++)xn.appendChild(Yr(jr[cn],Wr,!0));return Kr(fn,Wr)}})},new function(){var $t={},Zt;function or(jr,Xr,Jr,nn,Zr,on){var hn=$n.get(jr,Xr)||on,fn=hn==null?nn?null:Jr?"":0:Jr?hn:parseFloat(hn);return/%\s*$/.test(hn)?fn/100*(Zr?1:Zt[/x|^width/.test(Xr)?"width":"height"]):fn}function ur(jr,Xr,Jr,nn,Zr,on,hn){return Xr=or(jr,Xr||"x",!1,nn,Zr,on),Jr=or(jr,Jr||"y",!1,nn,Zr,hn),nn&&(Xr==null||Jr==null)?null:new jt(Xr,Jr)}function dr(jr,Xr,Jr,nn,Zr){return Xr=or(jr,Xr||"width",!1,nn,Zr),Jr=or(jr,Jr||"height",!1,nn,Zr),nn&&(Xr==null||Jr==null)?null:new zt(Xr,Jr)}function gr(jr,Xr,Jr){return jr==="none"?null:Xr==="number"?parseFloat(jr):Xr==="array"?jr?jr.split(/[\s,]+/g).map(parseFloat):[]:Xr==="color"?Yr(jr)||jr:Xr==="lookup"?Jr[jr]:jr}function Ar(jr,Xr,Jr,nn){var Zr=jr.childNodes,on=Xr==="clippath",hn=Xr==="defs",fn=new lr,xn=fn._project,cn=xn._currentStyle,vn=[];if(!on&&!hn&&(fn=Kr(fn,jr,nn),xn._currentStyle=fn._style.clone()),nn)for(var bn=jr.querySelectorAll("defs"),_n=0,Cn=bn.length;_n<Cn;_n++)zr(bn[_n],Jr,!1);for(var _n=0,Cn=Zr.length;_n<Cn;_n++){var Fn=Zr[_n],Wn;Fn.nodeType===1&&!/^defs$/i.test(Fn.nodeName)&&(Wn=zr(Fn,Jr,!1))&&!(Wn instanceof Sr)&&vn.push(Wn)}return fn.addChildren(vn),on&&(fn=Kr(fn.reduce(),jr,nn)),xn._currentStyle=cn,(on||hn)&&(fn.remove(),fn=null),fn}function _r(jr,Xr){for(var Jr=jr.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),nn=[],Zr=0,on=Jr.length;Zr<on;Zr+=2)nn.push(new jt(parseFloat(Jr[Zr]),parseFloat(Jr[Zr+1])));var hn=new Er(nn);return Xr==="polygon"&&hn.closePath(),hn}function Nr(jr){return mr.create(jr.getAttribute("d"))}function Fr(jr,Xr){var Jr=(or(jr,"href",!0)||"").substring(1),nn=Xr==="radialgradient",Zr;if(Jr)Zr=$t[Jr].getGradient(),Zr._radial^nn&&(Zr=Zr.clone(),Zr._radial=nn);else{for(var on=jr.childNodes,hn=[],fn=0,xn=on.length;fn<xn;fn++){var cn=on[fn];cn.nodeType===1&&hn.push(Kr(new ln,cn))}Zr=new tn(hn,nn)}var vn,bn,_n,Cn=or(jr,"gradientUnits",!0)!=="userSpaceOnUse";nn?(vn=ur(jr,"cx","cy",!1,Cn,"50%","50%"),bn=vn.add(or(jr,"r",!1,!1,Cn,"50%"),0),_n=ur(jr,"fx","fy",!0,Cn)):(vn=ur(jr,"x1","y1",!1,Cn,"0%","0%"),bn=ur(jr,"x2","y2",!1,Cn,"100%","0%"));var Fn=Kr(new an(Zr,vn,bn,_n),jr);return Fn._scaleToBounds=Cn,null}var Vr={"#document":function(jr,Xr,Jr,nn){for(var Zr=jr.childNodes,on=0,hn=Zr.length;on<hn;on++){var fn=Zr[on];if(fn.nodeType===1)return zr(fn,Jr,nn)}},g:Ar,svg:Ar,clippath:Ar,polygon:_r,polyline:_r,path:Nr,lineargradient:Fr,radialgradient:Fr,image:function(jr){var Xr=new xr(or(jr,"href",!0));return Xr.on("load",function(){var Jr=dr(jr);this.setSize(Jr);var nn=ur(jr).add(Jr.divide(2));this._matrix.append(new Yt().translate(nn))}),Xr},symbol:function(jr,Xr,Jr,nn){return new Sr(Ar(jr,Xr,Jr,nn),!0)},defs:Ar,use:function(jr){var Xr=(or(jr,"href",!0)||"").substring(1),Jr=$t[Xr],nn=ur(jr);return Jr?Jr instanceof Sr?Jr.place(nn):Jr.clone().translate(nn):null},circle:function(jr){return new vr.Circle(ur(jr,"cx","cy"),or(jr,"r"))},ellipse:function(jr){return new vr.Ellipse({center:ur(jr,"cx","cy"),radius:dr(jr,"rx","ry")})},rect:function(jr){return new vr.Rectangle(new Ut(ur(jr),dr(jr)),dr(jr,"rx","ry"))},line:function(jr){return new Er.Line(ur(jr,"x1","y1"),ur(jr,"x2","y2"))},text:function(jr){var Xr=new sn(ur(jr).add(ur(jr,"dx","dy")));return Xr.setContent(jr.textContent.trim()||""),Xr},switch:Ar};function Hr(jr,Xr,Jr,nn){if(jr.transform){for(var Zr=(nn.getAttribute(Jr)||"").split(/\)\s*/g),on=new Yt,hn=0,fn=Zr.length;hn<fn;hn++){var xn=Zr[hn];if(!xn)break;for(var cn=xn.split(/\(\s*/),vn=cn[0].trim(),bn=cn[1].split(/[\s,]+/g),_n=0,Cn=bn.length;_n<Cn;_n++)bn[_n]=parseFloat(bn[_n]);switch(vn){case"matrix":on.append(new Yt(bn[0],bn[1],bn[2],bn[3],bn[4],bn[5]));break;case"rotate":on.rotate(bn[0],bn[1]||0,bn[2]||0);break;case"translate":on.translate(bn[0],bn[1]||0);break;case"scale":on.scale(bn);break;case"skewX":on.skew(bn[0],0);break;case"skewY":on.skew(0,bn[0]);break}}jr.transform(on)}}function $r(jr,Xr,Jr){var nn=Jr==="fill-opacity"?"getFillColor":"getStrokeColor",Zr=jr[nn]&&jr[nn]();Zr&&Zr.setAlpha(parseFloat(Xr))}var Br=ct.set(ct.each(qn,function(jr){this[jr.attribute]=function(Xr,Jr){if(Xr[jr.set]&&(Xr[jr.set](gr(Jr,jr.type,jr.fromSVG)),jr.type==="color")){var nn=Xr[jr.get]();if(nn&&nn._scaleToBounds){var Zr=Xr.getBounds();nn.transform(new Yt().translate(Zr.getPoint()).scale(Zr.getSize()))}}}},{}),{id:function(jr,Xr){$t[Xr]=jr,jr.setName&&jr.setName(Xr)},"clip-path":function(jr,Xr){var Jr=Yr(Xr);if(Jr)if(Jr=Jr.clone(),Jr.setClipMask(!0),jr instanceof lr)jr.insertChild(0,Jr);else return new lr(Jr,jr)},gradientTransform:Hr,transform:Hr,"fill-opacity":$r,"stroke-opacity":$r,visibility:function(jr,Xr){jr.setVisible&&jr.setVisible(Xr==="visible")},display:function(jr,Xr){jr.setVisible&&jr.setVisible(Xr!==null)},"stop-color":function(jr,Xr){jr.setColor&&jr.setColor(Xr)},"stop-opacity":function(jr,Xr){jr._color&&jr._color.setAlpha(parseFloat(Xr))},offset:function(jr,Xr){if(jr.setOffset){var Jr=Xr.match(/(.*)%$/);jr.setOffset(Jr?Jr[1]/100:parseFloat(Xr))}},viewBox:function(jr,Xr,Jr,nn,Zr){var on=new Ut(gr(Xr,"array")),hn=dr(nn,null,null,!0),fn,xn;if(jr instanceof lr){var cn=hn?hn.divide(on.getSize()):1,xn=new Yt().scale(cn).translate(on.getPoint().negate());fn=jr}else jr instanceof Sr&&(hn&&on.setSize(hn),fn=jr._item);if(fn){if(en(nn,"overflow",Zr)!=="visible"){var vn=new vr.Rectangle(on);vn.setClipMask(!0),fn.addChild(vn)}xn&&fn.transform(xn)}}});function en(jr,Xr,Jr){var nn=jr.attributes[Xr],Zr=nn&&nn.value;if(!Zr&&jr.style){var on=ct.camelize(Xr);Zr=jr.style[on],!Zr&&Jr.node[on]!==Jr.parent[on]&&(Zr=Jr.node[on])}return Zr?Zr==="none"?null:Zr:et}function Kr(jr,Xr,Jr){var nn=Xr.parentNode,Zr={node:pn.getStyles(Xr)||{},parent:!Jr&&!/^defs$/i.test(nn.tagName)&&pn.getStyles(nn)||{}};return ct.each(Br,function(on,hn){var fn=en(Xr,hn,Zr);jr=fn!==et&&on(jr,fn,hn,Xr,Zr)||jr}),jr}function Yr(jr){var Xr=jr&&jr.match(/\((?:["'#]*)([^"')]+)/),Jr=Xr&&Xr[1],nn=Jr&&$t[ot?Jr.replace(ot.location.href.split("#")[0]+"#",""):Jr];return nn&&nn._scaleToBounds&&(nn=nn.clone(),nn._scaleToBounds=!0),nn}function zr(jr,Xr,Jr){var nn=jr.nodeName.toLowerCase(),Zr=nn!=="#document",on=ut.body,hn,fn,xn;Jr&&Zr&&(Zt=Bn.getView().getSize(),Zt=dr(jr,null,null,!0)||Zt,hn=$n.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),fn=jr.parentNode,xn=jr.nextSibling,hn.appendChild(jr),on.appendChild(hn));var cn=Bn.settings,vn=cn.applyMatrix,bn=cn.insertItems;cn.applyMatrix=!1,cn.insertItems=!1;var _n=Vr[nn],Cn=_n&&_n(jr,nn,Xr,Jr)||null;if(cn.insertItems=bn,cn.applyMatrix=vn,Cn){Zr&&!(Cn instanceof lr)&&(Cn=Kr(Cn,jr,Jr));var Fn=Xr.onImport,Wn=Zr&&jr.getAttribute("data-paper-data");Fn&&(Cn=Fn(jr,Cn,Xr)||Cn),Xr.expandShapes&&Cn instanceof vr&&(Cn.remove(),Cn=Cn.toPath()),Wn&&(Cn._data=JSON.parse(Wn))}return hn&&(on.removeChild(hn),fn&&(xn?fn.insertBefore(jr,xn):fn.appendChild(jr))),Jr&&($t={},Cn&&ct.pick(Xr.applyMatrix,vn)&&Cn.matrix.apply(!0,!0)),Cn}function Wr(jr,Xr,Jr){if(!jr)return null;Xr=typeof Xr=="function"?{onLoad:Xr}:Xr||{};var nn=Bn,Zr=null;function on(cn){try{var vn=typeof cn=="object"?cn:new g.DOMParser().parseFromString(cn.trim(),"image/svg+xml");if(!vn.nodeName)throw vn=null,new Error("Unsupported SVG source: "+jr);Bn=nn,Zr=zr(vn,Xr,!0),(!Xr||Xr.insert!==!1)&&Jr._insertItem(et,Zr);var bn=Xr.onLoad;bn&&bn(Zr,cn)}catch(_n){hn(_n)}}function hn(cn,vn){var bn=Xr.onError;if(bn)bn(cn,vn);else throw new Error(cn)}if(typeof jr=="string"&&!/^[\s\S]*</.test(jr)){var fn=ut.getElementById(jr);fn?on(fn):Dn.request({url:jr,async:!0,onLoad:on,onError:hn})}else if(typeof File<"u"&&jr instanceof File){var xn=new FileReader;return xn.onload=function(){on(xn.result)},xn.onerror=function(){hn(xn.error)},xn.readAsText(jr)}else on(jr);return Zr}ir.inject({importSVG:function(jr,Xr){return Wr(jr,Xr,this)}}),ar.inject({importSVG:function(jr,Xr){return this.activate(),Wr(jr,Xr,this)}})},ct.exports.PaperScript=(function(){var $t=this,Zt=$t.acorn;if(!Zt&&typeof commonjsRequire<"u")try{Zt=requireAcorn()}catch{}if(!Zt){var or,ur;Zt=or=ur={},function(Kr,Yr){if(typeof or=="object"&&typeof ur=="object")return Yr(or);if(typeof et=="function"&&et.amd)return et(["exports"],Yr);Yr(Kr.acorn||(Kr.acorn={}))}(this,function(Kr){Kr.version="0.5.0";var Yr,zr,Wr,jr;Kr.parse=function(gn,Sn){return zr=String(gn),Wr=zr.length,Jr(Sn),dS(),sp(Yr.program)};var Xr=Kr.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function Jr(gn){Yr=gn||{};for(var Sn in Xr)Object.prototype.hasOwnProperty.call(Yr,Sn)||(Yr[Sn]=Xr[Sn]);jr=Yr.sourceFile||null}var nn=Kr.getLineInfo=function(gn,Sn){for(var Mn=1,Vn=0;;){fu.lastIndex=Vn;var hs=fu.exec(gn);if(hs&&hs.index<Sn)++Mn,Vn=hs.index+hs[0].length;else break}return{line:Mn,column:Sn-Vn}};Kr.tokenize=function(gn,Sn){zr=String(gn),Wr=zr.length,Jr(Sn),dS();var Mn={};function Vn(hs){return Wn=hn,Kp(hs),Mn.start=on,Mn.end=hn,Mn.startLoc=fn,Mn.endLoc=xn,Mn.type=cn,Mn.value=vn,Mn}return Vn.jumpTo=function(hs,bs){if(Zr=hs,Yr.locations){_n=1,Cn=fu.lastIndex=0;for(var Ss;(Ss=fu.exec(zr))&&Ss.index<hs;)++_n,Cn=Ss.index+Ss[0].length}bn=bs,Go()},Vn};var Zr,on,hn,fn,xn,cn,vn,bn,_n,Cn,Fn,Wn,Yn,Qn,ss,zn;function Gn(gn,Sn){var Mn=nn(zr,gn);Sn+=" ("+Mn.line+":"+Mn.column+")";var Vn=new SyntaxError(Sn);throw Vn.pos=gn,Vn.loc=Mn,Vn.raisedAt=Zr,Vn}var es=[],ls={type:"num"},as={type:"regexp"},ys={type:"string"},vs={type:"name"},_s={type:"eof"},Cs={keyword:"break"},xs={keyword:"case",beforeExpr:!0},ga={keyword:"catch"},uo={keyword:"continue"},Oo={keyword:"debugger"},Jn={keyword:"default"},Is={keyword:"do",isLoop:!0},Ls={keyword:"else",beforeExpr:!0},Fs={keyword:"finally"},ks={keyword:"for",isLoop:!0},yo={keyword:"function"},xa={keyword:"if"},Xs={keyword:"return",beforeExpr:!0},Po={keyword:"switch"},Ao={keyword:"throw",beforeExpr:!0},Ws={keyword:"try"},ko={keyword:"var"},ba={keyword:"while",isLoop:!0},km={keyword:"with"},Wp={keyword:"new",beforeExpr:!0},Iv={keyword:"this"},zl={keyword:"null",atomValue:null},B1={keyword:"true",atomValue:!0},$1={keyword:"false",atomValue:!1},_p={keyword:"in",binop:7,beforeExpr:!0},Cp={break:Cs,case:xs,catch:ga,continue:uo,debugger:Oo,default:Jn,do:Is,else:Ls,finally:Fs,for:ks,function:yo,if:xa,return:Xs,switch:Po,throw:Ao,try:Ws,var:ko,while:ba,with:km,null:zl,true:B1,false:$1,new:Wp,in:_p,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Iv,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ep={type:"[",beforeExpr:!0},Du={type:"]"},Ul={type:"{",beforeExpr:!0},Ps={type:"}"},cu={type:"(",beforeExpr:!0},Jo={type:")"},tu={type:",",beforeExpr:!0},Pl={type:";",beforeExpr:!0},hu={type:":",beforeExpr:!0},Lv={type:"."},Tm={type:"?",beforeExpr:!0},sr={binop:10,beforeExpr:!0},br={isAssign:!0,beforeExpr:!0},Ur={isAssign:!0,beforeExpr:!0},rn={postfix:!0,prefix:!0,isUpdate:!0},dn={prefix:!0,beforeExpr:!0},Rn={binop:1,beforeExpr:!0},Nn={binop:2,beforeExpr:!0},Zn={binop:3,beforeExpr:!0},rs={binop:4,beforeExpr:!0},Ts={binop:5,beforeExpr:!0},As={binop:6,beforeExpr:!0},co={binop:7,beforeExpr:!0},$o={binop:8,beforeExpr:!0},Pm={binop:9,prefix:!0,beforeExpr:!0},qp={binop:10,beforeExpr:!0};Kr.tokTypes={bracketL:ep,bracketR:Du,braceL:Ul,braceR:Ps,parenL:cu,parenR:Jo,comma:tu,semi:Pl,colon:hu,dot:Lv,question:Tm,slash:sr,eq:br,name:vs,eof:_s,num:ls,regexp:as,string:ys};for(var Ho in Cp)Kr.tokTypes["_"+Ho]=Cp[Ho];function Ro(gn){gn=gn.split(" ");var Sn="",Mn=[];e:for(var Vn=0;Vn<gn.length;++Vn){for(var hs=0;hs<Mn.length;++hs)if(Mn[hs][0].length==gn[Vn].length){Mn[hs].push(gn[Vn]);continue e}Mn.push([gn[Vn]])}function bs(Vs){if(Vs.length==1)return Sn+="return str === "+JSON.stringify(Vs[0])+";";Sn+="switch(str){";for(var Lu=0;Lu<Vs.length;++Lu)Sn+="case "+JSON.stringify(Vs[Lu])+":";Sn+="return true}return false;"}if(Mn.length>3){Mn.sort(function(Vs,Lu){return Lu.length-Vs.length}),Sn+="switch(str.length){";for(var Vn=0;Vn<Mn.length;++Vn){var Ss=Mn[Vn];Sn+="case "+Ss[0].length+":",bs(Ss)}Sn+="}"}else bs(gn);return new Function("str",Sn)}var Mu=Ro("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),cS=Ro("class enum extends super const export import"),hS=Ro("implements interface let package private protected public static yield"),V1=Ro("eval arguments"),tp=Ro("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),C0=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Rm="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",z1="------------------------------------------------------------------------------------------------------------------------------------------",jv=new RegExp("["+Rm+"]"),du=new RegExp("["+Rm+z1+"]"),Rl=/[\n\r\u2028\u2029]/,fu=/\r\n|[\n\r\u2028\u2029]/g,pu=Kr.isIdentifierStart=function(gn){return gn<65?gn===36:gn<91?!0:gn<97?gn===95:gn<123?!0:gn>=170&&jv.test(String.fromCharCode(gn))},rp=Kr.isIdentifierChar=function(gn){return gn<48?gn===36:gn<58?!0:gn<65?!1:gn<91?!0:gn<97?gn===95:gn<123?!0:gn>=170&&du.test(String.fromCharCode(gn))};function ru(){this.line=_n,this.column=Zr-Cn}function dS(){_n=1,Zr=Cn=0,bn=!0,Go()}function No(gn,Sn){hn=Zr,Yr.locations&&(xn=new ru),cn=gn,Go(),vn=Sn,bn=gn.beforeExpr}function fS(){var gn=Yr.onComment&&Yr.locations&&new ru,Sn=Zr,Mn=zr.indexOf("*/",Zr+=2);if(Mn===-1&&Gn(Zr-2,"Unterminated comment"),Zr=Mn+2,Yr.locations){fu.lastIndex=Sn;for(var Vn;(Vn=fu.exec(zr))&&Vn.index<Zr;)++_n,Cn=Vn.index+Vn[0].length}Yr.onComment&&Yr.onComment(!0,zr.slice(Sn+2,Mn),Sn,Zr,gn,Yr.locations&&new ru)}function Dl(){for(var gn=Zr,Sn=Yr.onComment&&Yr.locations&&new ru,Mn=zr.charCodeAt(Zr+=2);Zr<Wr&&Mn!==10&&Mn!==13&&Mn!==8232&&Mn!==8233;)++Zr,Mn=zr.charCodeAt(Zr);Yr.onComment&&Yr.onComment(!1,zr.slice(gn+2,Zr),gn,Zr,Sn,Yr.locations&&new ru)}function Go(){for(;Zr<Wr;){var gn=zr.charCodeAt(Zr);if(gn===32)++Zr;else if(gn===13){++Zr;var Sn=zr.charCodeAt(Zr);Sn===10&&++Zr,Yr.locations&&(++_n,Cn=Zr)}else if(gn===10||gn===8232||gn===8233)++Zr,Yr.locations&&(++_n,Cn=Zr);else if(gn>8&&gn<14)++Zr;else if(gn===47){var Sn=zr.charCodeAt(Zr+1);if(Sn===42)fS();else if(Sn===47)Dl();else break}else if(gn===160)++Zr;else if(gn>=5760&&C0.test(String.fromCharCode(gn)))++Zr;else break}}function ho(){var gn=zr.charCodeAt(Zr+1);return gn>=48&&gn<=57?D_(!0):(++Zr,No(Lv))}function Bv(){var gn=zr.charCodeAt(Zr+1);return bn?(++Zr,H1()):gn===61?mo(Ur,2):mo(sr,1)}function Fu(){var gn=zr.charCodeAt(Zr+1);return gn===61?mo(Ur,2):mo(qp,1)}function P_(gn){var Sn=zr.charCodeAt(Zr+1);return Sn===gn?mo(gn===124?Rn:Nn,2):Sn===61?mo(Ur,2):mo(gn===124?Zn:Ts,1)}function R_(){var gn=zr.charCodeAt(Zr+1);return gn===61?mo(Ur,2):mo(rs,1)}function pS(gn){var Sn=zr.charCodeAt(Zr+1);return Sn===gn?Sn==45&&zr.charCodeAt(Zr+2)==62&&Rl.test(zr.slice(Wn,Zr))?(Zr+=3,Dl(),Go(),Kp()):mo(rn,2):Sn===61?mo(Ur,2):mo(Pm,1)}function mS(gn){var Sn=zr.charCodeAt(Zr+1),Mn=1;return Sn===gn?(Mn=gn===62&&zr.charCodeAt(Zr+2)===62?3:2,zr.charCodeAt(Zr+Mn)===61?mo(Ur,Mn+1):mo($o,Mn)):Sn==33&&gn==60&&zr.charCodeAt(Zr+2)==45&&zr.charCodeAt(Zr+3)==45?(Zr+=4,Dl(),Go(),Kp()):(Sn===61&&(Mn=zr.charCodeAt(Zr+2)===61?3:2),mo(co,Mn))}function N_(gn){var Sn=zr.charCodeAt(Zr+1);return Sn===61?mo(As,zr.charCodeAt(Zr+2)===61?3:2):mo(gn===61?br:dn,1)}function U1(gn){switch(gn){case 46:return ho();case 40:return++Zr,No(cu);case 41:return++Zr,No(Jo);case 59:return++Zr,No(Pl);case 44:return++Zr,No(tu);case 91:return++Zr,No(ep);case 93:return++Zr,No(Du);case 123:return++Zr,No(Ul);case 125:return++Zr,No(Ps);case 58:return++Zr,No(hu);case 63:return++Zr,No(Tm);case 48:var Sn=zr.charCodeAt(Zr+1);if(Sn===120||Sn===88)return G1();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return D_(!1);case 34:case 39:return Vv(gn);case 47:return Bv();case 37:case 42:return Fu();case 124:case 38:return P_(gn);case 94:return R_();case 43:case 45:return pS(gn);case 60:case 62:return mS(gn);case 61:case 33:return N_(gn);case 126:return mo(dn,1)}return!1}function Kp(gn){if(gn?Zr=on+1:on=Zr,Yr.locations&&(fn=new ru),gn)return H1();if(Zr>=Wr)return No(_s);var Sn=zr.charCodeAt(Zr);if(pu(Sn)||Sn===92)return Mm();var Mn=U1(Sn);if(Mn===!1){var Vn=String.fromCharCode(Sn);if(Vn==="\\"||jv.test(Vn))return Mm();Gn(Zr,"Unexpected character '"+Vn+"'")}return Mn}function mo(gn,Sn){var Mn=zr.slice(Zr,Zr+Sn);Zr+=Sn,No(gn,Mn)}function H1(){for(var hs="",gn,Sn,Mn=Zr;;){Zr>=Wr&&Gn(Mn,"Unterminated regular expression");var Vn=zr.charAt(Zr);if(Rl.test(Vn)&&Gn(Mn,"Unterminated regular expression"),gn)gn=!1;else{if(Vn==="[")Sn=!0;else if(Vn==="]"&&Sn)Sn=!1;else if(Vn==="/"&&!Sn)break;gn=Vn==="\\"}++Zr}var hs=zr.slice(Mn,Zr);++Zr;var bs=gS();bs&&!/^[gmsiy]*$/.test(bs)&&Gn(Mn,"Invalid regexp flag");try{var Ss=new RegExp(hs,bs)}catch(Vs){Vs instanceof SyntaxError&&Gn(Mn,Vs.message),Gn(Vs)}return No(as,Ss)}function $v(gn,Sn){for(var Mn=Zr,Vn=0,hs=0,bs=Sn??1/0;hs<bs;++hs){var Ss=zr.charCodeAt(Zr),Vs;if(Ss>=97?Vs=Ss-97+10:Ss>=65?Vs=Ss-65+10:Ss>=48&&Ss<=57?Vs=Ss-48:Vs=1/0,Vs>=gn)break;++Zr,Vn=Vn*gn+Vs}return Zr===Mn||Sn!=null&&Zr-Mn!==Sn?null:Vn}function G1(){Zr+=2;var gn=$v(16);return gn==null&&Gn(on+2,"Expected hexadecimal number"),pu(zr.charCodeAt(Zr))&&Gn(Zr,"Identifier directly after number"),No(ls,gn)}function D_(gn){var Sn=Zr,Mn=!1,Vn=zr.charCodeAt(Zr)===48;!gn&&$v(10)===null&&Gn(Sn,"Invalid number"),zr.charCodeAt(Zr)===46&&(++Zr,$v(10),Mn=!0);var hs=zr.charCodeAt(Zr);(hs===69||hs===101)&&(hs=zr.charCodeAt(++Zr),(hs===43||hs===45)&&++Zr,$v(10)===null&&Gn(Sn,"Invalid number"),Mn=!0),pu(zr.charCodeAt(Zr))&&Gn(Zr,"Identifier directly after number");var bs=zr.slice(Sn,Zr),Ss;return Mn?Ss=parseFloat(bs):!Vn||bs.length===1?Ss=parseInt(bs,10):/[89]/.test(bs)||zn?Gn(Sn,"Invalid number"):Ss=parseInt(bs,8),No(ls,Ss)}function Vv(gn){Zr++;for(var Sn="";;){Zr>=Wr&&Gn(on,"Unterminated string constant");var Mn=zr.charCodeAt(Zr);if(Mn===gn)return++Zr,No(ys,Sn);if(Mn===92){Mn=zr.charCodeAt(++Zr);var Vn=/^[0-7]+/.exec(zr.slice(Zr,Zr+3));for(Vn&&(Vn=Vn[0]);Vn&&parseInt(Vn,8)>255;)Vn=Vn.slice(0,-1);if(Vn==="0"&&(Vn=null),++Zr,Vn)zn&&Gn(Zr-2,"Octal literal in strict mode"),Sn+=String.fromCharCode(parseInt(Vn,8)),Zr+=Vn.length-1;else switch(Mn){case 110:Sn+=`
`;break;case 114:Sn+="\r";break;case 120:Sn+=String.fromCharCode(Nm(2));break;case 117:Sn+=String.fromCharCode(Nm(4));break;case 85:Sn+=String.fromCharCode(Nm(8));break;case 116:Sn+="	";break;case 98:Sn+="\b";break;case 118:Sn+="\v";break;case 102:Sn+="\f";break;case 48:Sn+="\0";break;case 13:zr.charCodeAt(Zr)===10&&++Zr;case 10:Yr.locations&&(Cn=Zr,++_n);break;default:Sn+=String.fromCharCode(Mn);break}}else(Mn===13||Mn===10||Mn===8232||Mn===8233)&&Gn(on,"Unterminated string constant"),Sn+=String.fromCharCode(Mn),++Zr}}function Nm(gn){var Sn=$v(16,gn);return Sn===null&&Gn(on,"Bad character escape sequence"),Sn}var Dm;function gS(){Dm=!1;for(var gn,Sn=!0,Mn=Zr;;){var Vn=zr.charCodeAt(Zr);if(rp(Vn))Dm&&(gn+=zr.charAt(Zr)),++Zr;else if(Vn===92){Dm||(gn=zr.slice(Mn,Zr)),Dm=!0,zr.charCodeAt(++Zr)!=117&&Gn(Zr,"Expecting Unicode escape sequence \\uXXXX"),++Zr;var hs=Nm(4),bs=String.fromCharCode(hs);bs||Gn(Zr-1,"Invalid Unicode escape"),(Sn?pu(hs):rp(hs))||Gn(Zr-4,"Invalid Unicode escape"),gn+=bs}else break;Sn=!1}return Dm?gn:zr.slice(Mn,Zr)}function Mm(){var gn=gS(),Sn=vs;return!Dm&&tp(gn)&&(Sn=Cp[gn]),No(Sn,gn)}function zs(){Fn=on,Wn=hn,Yn=xn,Kp()}function A0(gn){if(zn=gn,Zr=on,Yr.locations)for(;Zr<Cn;)Cn=zr.lastIndexOf(`
`,Cn-2)+1,--_n;Go(),Kp()}function zv(){this.type=null,this.start=on,this.end=null}function Fm(){this.start=fn,this.end=null,jr!==null&&(this.source=jr)}function Io(){var gn=new zv;return Yr.locations&&(gn.loc=new Fm),Yr.directSourceFile&&(gn.sourceFile=Yr.directSourceFile),Yr.ranges&&(gn.range=[on,0]),gn}function np(gn){var Sn=new zv;return Sn.start=gn.start,Yr.locations&&(Sn.loc=new Fm,Sn.loc.start=gn.loc.start),Yr.ranges&&(Sn.range=[gn.range[0],0]),Sn}function Rs(gn,Sn){return gn.type=Sn,gn.end=Wn,Yr.locations&&(gn.loc.end=Yn),Yr.ranges&&(gn.range[1]=Wn),gn}function Uv(gn){return Yr.ecmaVersion>=5&&gn.type==="ExpressionStatement"&&gn.expression.type==="Literal"&&gn.expression.value==="use strict"}function $a(gn){if(cn===gn)return zs(),!0}function Ap(){return!Yr.strictSemicolons&&(cn===_s||cn===Ps||Rl.test(zr.slice(Wn,on)))}function Vo(){!$a(Pl)&&!Ap()&&Ou()}function Ys(gn){cn===gn?zs():Ou()}function Ou(){Gn(on,"Unexpected token")}function Hv(gn){gn.type!=="Identifier"&&gn.type!=="MemberExpression"&&Gn(gn.start,"Assigning to rvalue"),zn&&gn.type==="Identifier"&&V1(gn.name)&&Gn(gn.start,"Assigning to "+gn.name+" in strict mode")}function sp(gn){Fn=Wn=Zr,Yr.locations&&(Yn=new ru),Qn=zn=null,ss=[],Kp();var Sn=gn||Io(),Mn=!0;for(gn||(Sn.body=[]);cn!==_s;){var Vn=mu();Sn.body.push(Vn),Mn&&Uv(Vn)&&A0(!0),Mn=!1}return Rs(Sn,"Program")}var ap={kind:"loop"},vS={kind:"switch"};function mu(){(cn===sr||cn===Ur&&vn=="/=")&&Kp(!0);var gn=cn,Sn=Io();switch(gn){case Cs:case uo:zs();var Mn=gn===Cs;$a(Pl)||Ap()?Sn.label=null:cn!==vs?Ou():(Sn.label=Iu(),Vo());for(var Vn=0;Vn<ss.length;++Vn){var hs=ss[Vn];if((Sn.label==null||hs.name===Sn.label.name)&&(hs.kind!=null&&(Mn||hs.kind==="loop")||Sn.label&&Mn))break}return Vn===ss.length&&Gn(Sn.start,"Unsyntactic "+gn.keyword),Rs(Sn,Mn?"BreakStatement":"ContinueStatement");case Oo:return zs(),Vo(),Rs(Sn,"DebuggerStatement");case Is:return zs(),ss.push(ap),Sn.body=mu(),ss.pop(),Ys(ba),Sn.test=nu(),Vo(),Rs(Sn,"DoWhileStatement");case ks:if(zs(),ss.push(ap),Ys(cu),cn===Pl)return k0(Sn,null);if(cn===ko){var bs=Io();return zs(),Gv(bs,!0),Rs(bs,"VariableDeclaration"),bs.declarations.length===1&&$a(_p)?yS(Sn,bs):k0(Sn,bs)}var bs=Wo(!1,!0);return $a(_p)?(Hv(bs),yS(Sn,bs)):k0(Sn,bs);case yo:return zs(),Kv(Sn,!0);case xa:return zs(),Sn.test=nu(),Sn.consequent=mu(),Sn.alternate=$a(Ls)?mu():null,Rs(Sn,"IfStatement");case Xs:return!Qn&&!Yr.allowReturnOutsideFunction&&Gn(on,"'return' outside of function"),zs(),$a(Pl)||Ap()?Sn.argument=null:(Sn.argument=Wo(),Vo()),Rs(Sn,"ReturnStatement");case Po:zs(),Sn.discriminant=nu(),Sn.cases=[],Ys(Ul),ss.push(vS);for(var Ss,Vs;cn!=Ps;)if(cn===xs||cn===Jn){var Lu=cn===xs;Ss&&Rs(Ss,"SwitchCase"),Sn.cases.push(Ss=Io()),Ss.consequent=[],zs(),Lu?Ss.test=Wo():(Vs&&Gn(Fn,"Multiple default clauses"),Vs=!0,Ss.test=null),Ys(hu)}else Ss||Ou(),Ss.consequent.push(mu());return Ss&&Rs(Ss,"SwitchCase"),zs(),ss.pop(),Rs(Sn,"SwitchStatement");case Ao:return zs(),Rl.test(zr.slice(Wn,on))&&Gn(Wn,"Illegal newline after throw"),Sn.argument=Wo(),Vo(),Rs(Sn,"ThrowStatement");case Ws:if(zs(),Sn.block=gu(),Sn.handler=null,cn===ga){var xo=Io();zs(),Ys(cu),xo.param=Iu(),zn&&V1(xo.param.name)&&Gn(xo.param.start,"Binding "+xo.param.name+" in strict mode"),Ys(Jo),xo.guard=null,xo.body=gu(),Sn.handler=Rs(xo,"CatchClause")}return Sn.guardedHandlers=es,Sn.finalizer=$a(Fs)?gu():null,!Sn.handler&&!Sn.finalizer&&Gn(Sn.start,"Missing catch or finally clause"),Rs(Sn,"TryStatement");case ko:return zs(),Gv(Sn),Vo(),Rs(Sn,"VariableDeclaration");case ba:return zs(),Sn.test=nu(),ss.push(ap),Sn.body=mu(),ss.pop(),Rs(Sn,"WhileStatement");case km:return zn&&Gn(on,"'with' in strict mode"),zs(),Sn.object=nu(),Sn.body=mu(),Rs(Sn,"WithStatement");case Ul:return gu();case Pl:return zs(),Rs(Sn,"EmptyStatement");default:var Yv=vn,T0=Wo();if(gn===vs&&T0.type==="Identifier"&&$a(hu)){for(var Vn=0;Vn<ss.length;++Vn)ss[Vn].name===Yv&&Gn(T0.start,"Label '"+Yv+"' is already declared");var ES=cn.isLoop?"loop":cn===Po?"switch":null;return ss.push({name:Yv,kind:ES}),Sn.body=mu(),ss.pop(),Sn.label=T0,Rs(Sn,"LabeledStatement")}else return Sn.expression=T0,Vo(),Rs(Sn,"ExpressionStatement")}}function nu(){Ys(cu);var gn=Wo();return Ys(Jo),gn}function gu(gn){var Sn=Io(),Mn=!0,Vn=!1,hs;for(Sn.body=[],Ys(Ul);!$a(Ps);){var bs=mu();Sn.body.push(bs),Mn&&gn&&Uv(bs)&&(hs=Vn,A0(Vn=!0)),Mn=!1}return Vn&&!hs&&A0(!1),Rs(Sn,"BlockStatement")}function k0(gn,Sn){return gn.init=Sn,Ys(Pl),gn.test=cn===Pl?null:Wo(),Ys(Pl),gn.update=cn===Jo?null:Wo(),Ys(Jo),gn.body=mu(),ss.pop(),Rs(gn,"ForStatement")}function yS(gn,Sn){return gn.left=Sn,gn.right=Wo(),Ys(Jo),gn.body=mu(),ss.pop(),Rs(gn,"ForInStatement")}function Gv(gn,Sn){for(gn.declarations=[],gn.kind="var";;){var Mn=Io();if(Mn.id=Iu(),zn&&V1(Mn.id.name)&&Gn(Mn.id.start,"Binding "+Mn.id.name+" in strict mode"),Mn.init=$a(br)?Wo(!0,Sn):null,gn.declarations.push(Rs(Mn,"VariableDeclarator")),!$a(tu))break}return gn}function Wo(gn,Sn){var Mn=Om(Sn);if(!gn&&cn===tu){var Vn=np(Mn);for(Vn.expressions=[Mn];$a(tu);)Vn.expressions.push(Om(Sn));return Rs(Vn,"SequenceExpression")}return Mn}function Om(gn){var Sn=vu(gn);if(cn.isAssign){var Mn=np(Sn);return Mn.operator=vn,Mn.left=Sn,zs(),Mn.right=Om(gn),Hv(Sn),Rs(Mn,"AssignmentExpression")}return Sn}function vu(gn){var Sn=Wv(gn);if($a(Tm)){var Mn=np(Sn);return Mn.test=Sn,Mn.consequent=Wo(!0),Ys(hu),Mn.alternate=Wo(!0,gn),Rs(Mn,"ConditionalExpression")}return Sn}function Wv(gn){return Xp(yu(),-1,gn)}function Xp(gn,Sn,Mn){var Vn=cn.binop;if(Vn!=null&&(!Mn||cn!==_p)&&Vn>Sn){var hs=np(gn);hs.left=gn,hs.operator=vn;var bs=cn;zs(),hs.right=Xp(yu(),Vn,Mn);var Ss=Rs(hs,bs===Rn||bs===Nn?"LogicalExpression":"BinaryExpression");return Xp(Ss,Sn,Mn)}return gn}function yu(){if(cn.prefix){var gn=Io(),Sn=cn.isUpdate;return gn.operator=vn,gn.prefix=!0,bn=!0,zs(),gn.argument=yu(),Sn?Hv(gn.argument):zn&&gn.operator==="delete"&&gn.argument.type==="Identifier"&&Gn(gn.start,"Deleting local variable in strict mode"),Rs(gn,Sn?"UpdateExpression":"UnaryExpression")}for(var Mn=xS();cn.postfix&&!Ap();){var gn=np(Mn);gn.operator=vn,gn.prefix=!1,gn.argument=Mn,Hv(Mn),zs(),Mn=Rs(gn,"UpdateExpression")}return Mn}function xS(){return lp(W1())}function lp(gn,Sn){if($a(Lv)){var Mn=np(gn);return Mn.object=gn,Mn.property=Iu(!0),Mn.computed=!1,lp(Rs(Mn,"MemberExpression"),Sn)}else if($a(ep)){var Mn=np(gn);return Mn.object=gn,Mn.property=Wo(),Mn.computed=!0,Ys(Du),lp(Rs(Mn,"MemberExpression"),Sn)}else if(!Sn&&$a(cu)){var Mn=np(gn);return Mn.callee=gn,Mn.arguments=Xv(Jo,!1),lp(Rs(Mn,"CallExpression"),Sn)}else return gn}function W1(){switch(cn){case Iv:var Vn=Io();return zs(),Rs(Vn,"ThisExpression");case vs:return Iu();case ls:case ys:case as:var Vn=Io();return Vn.value=vn,Vn.raw=zr.slice(on,hn),zs(),Rs(Vn,"Literal");case zl:case B1:case $1:var Vn=Io();return Vn.value=cn.atomValue,Vn.raw=cn.keyword,zs(),Rs(Vn,"Literal");case cu:var gn=fn,Sn=on;zs();var Mn=Wo();return Mn.start=Sn,Mn.end=hn,Yr.locations&&(Mn.loc.start=gn,Mn.loc.end=xn),Yr.ranges&&(Mn.range=[Sn,hn]),Ys(Jo),Mn;case ep:var Vn=Io();return zs(),Vn.elements=Xv(Du,!0,!0),Rs(Vn,"ArrayExpression");case Ul:return go();case yo:var Vn=Io();return zs(),Kv(Vn,!1);case Wp:return bS();default:Ou()}}function bS(){var gn=Io();return zs(),gn.callee=lp(W1(),!0),$a(cu)?gn.arguments=Xv(Jo,!1):gn.arguments=es,Rs(gn,"NewExpression")}function go(){var gn=Io(),Sn=!0,Mn=!1;for(gn.properties=[],zs();!$a(Ps);){if(Sn)Sn=!1;else if(Ys(tu),Yr.allowTrailingCommas&&$a(Ps))break;var Vn={key:qv()},hs=!1,bs;if($a(hu)?(Vn.value=Wo(!0),bs=Vn.kind="init"):Yr.ecmaVersion>=5&&Vn.key.type==="Identifier"&&(Vn.key.name==="get"||Vn.key.name==="set")?(hs=Mn=!0,bs=Vn.kind=Vn.key.name,Vn.key=qv(),cn!==cu&&Ou(),Vn.value=Kv(Io(),!1)):Ou(),Vn.key.type==="Identifier"&&(zn||Mn))for(var Ss=0;Ss<gn.properties.length;++Ss){var Vs=gn.properties[Ss];if(Vs.key.name===Vn.key.name){var Lu=bs==Vs.kind||hs&&Vs.kind==="init"||bs==="init"&&(Vs.kind==="get"||Vs.kind==="set");Lu&&!zn&&bs==="init"&&Vs.kind==="init"&&(Lu=!1),Lu&&Gn(Vn.key.start,"Redefinition of property")}}gn.properties.push(Vn)}return Rs(gn,"ObjectExpression")}function qv(){return cn===ls||cn===ys?W1():Iu(!0)}function Kv(gn,Sn){cn===vs?gn.id=Iu():Sn?Ou():gn.id=null,gn.params=[];var Mn=!0;for(Ys(cu);!$a(Jo);)Mn?Mn=!1:Ys(tu),gn.params.push(Iu());var Vn=Qn,hs=ss;if(Qn=!0,ss=[],gn.body=gu(!0),Qn=Vn,ss=hs,zn||gn.body.body.length&&Uv(gn.body.body[0]))for(var bs=gn.id?-1:0;bs<gn.params.length;++bs){var Ss=bs<0?gn.id:gn.params[bs];if((hS(Ss.name)||V1(Ss.name))&&Gn(Ss.start,"Defining '"+Ss.name+"' in strict mode"),bs>=0)for(var Vs=0;Vs<bs;++Vs)Ss.name===gn.params[Vs].name&&Gn(Ss.start,"Argument name clash in strict mode")}return Rs(gn,Sn?"FunctionDeclaration":"FunctionExpression")}function Xv(gn,Sn,Mn){for(var Vn=[],hs=!0;!$a(gn);){if(hs)hs=!1;else if(Ys(tu),Sn&&Yr.allowTrailingCommas&&$a(gn))break;Mn&&cn===tu?Vn.push(null):Vn.push(Wo(!0))}return Vn}function Iu(gn){var Sn=Io();return gn&&Yr.forbidReserved=="everywhere"&&(gn=!1),cn===vs?(!gn&&(Yr.forbidReserved&&(Yr.ecmaVersion===3?Mu:cS)(vn)||zn&&hS(vn))&&zr.slice(on,hn).indexOf("\\")==-1&&Gn(on,"The keyword '"+vn+"' is reserved"),Sn.name=vn):gn&&cn.keyword?Sn.name=cn.keyword:Ou(),bn=!1,zs(),Rs(Sn,"Identifier")}}),Zt.version||(Zt=null)}function dr(Kr,Yr){return($t.acorn||Zt).parse(Kr,Yr)}var gr={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},Ar={"-":"__negate","+":"__self"},_r=ct.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(Kr){this["__"+Kr]="#"+Kr},{__self:function(){return this}});jt.inject(_r),zt.inject(_r),an.inject(_r);function Nr(Kr,Yr,zr){var Wr=gr[Yr];if(Kr&&Kr[Wr]){var jr=Kr[Wr](zr);return Yr==="!="?!jr:jr}switch(Yr){case"+":return Kr+zr;case"-":return Kr-zr;case"*":return Kr*zr;case"/":return Kr/zr;case"%":return Kr%zr;case"==":return Kr==zr;case"!=":return Kr!=zr}}function Fr(Kr,Yr){var zr=Ar[Kr];if(Yr&&Yr[zr])return Yr[zr]();switch(Kr){case"+":return+Yr;case"-":return-Yr}}function Vr(Kr,Yr){if(!Kr)return"";Yr=Yr||{};var zr=[];function Wr(zn){for(var Gn=0,es=zr.length;Gn<es;Gn++){var ls=zr[Gn];if(ls[0]>=zn)break;zn+=ls[1]}return zn}function jr(zn){return Kr.substring(Wr(zn.range[0]),Wr(zn.range[1]))}function Xr(zn,Gn){return Kr.substring(Wr(zn.range[1]),Wr(Gn.range[0]))}function Jr(zn,Gn){for(var es=Wr(zn.range[0]),ls=Wr(zn.range[1]),as=0,ys=zr.length-1;ys>=0;ys--)if(es>zr[ys][0]){as=ys+1;break}zr.splice(as,0,[es,Gn.length-ls+es]),Kr=Kr.substring(0,es)+Gn+Kr.substring(ls)}function nn(zn,Gn){switch(zn.type){case"UnaryExpression":if(zn.operator in Ar&&zn.argument.type!=="Literal"){var es=jr(zn.argument);Jr(zn,'$__("'+zn.operator+'", '+es+")")}break;case"BinaryExpression":if(zn.operator in gr&&zn.left.type!=="Literal"){var ls=jr(zn.left),as=jr(zn.right),ys=Xr(zn.left,zn.right),vs=zn.operator;Jr(zn,"__$__("+ls+","+ys.replace(new RegExp("\\"+vs),'"'+vs+'"')+", "+as+")")}break;case"UpdateExpression":case"AssignmentExpression":var _s=Gn&&Gn.type;if(!(_s==="ForStatement"||_s==="BinaryExpression"&&/^[=!<>]/.test(Gn.operator)||_s==="MemberExpression"&&Gn.computed)){if(zn.type==="UpdateExpression"){var es=jr(zn.argument),Cs="__$__("+es+', "'+zn.operator[0]+'", 1)',xs=es+" = "+Cs;zn.prefix?xs="("+xs+")":(_s==="AssignmentExpression"||_s==="VariableDeclarator"||_s==="BinaryExpression")&&(jr(Gn.left||Gn.id)===es&&(xs=Cs),xs=es+"; "+xs),Jr(zn,xs)}else if(/^.=$/.test(zn.operator)&&zn.left.type!=="Literal"){var ls=jr(zn.left),as=jr(zn.right),Cs=ls+" = __$__("+ls+', "'+zn.operator[0]+'", '+as+")";Jr(zn,/^\(.*\)$/.test(jr(zn))?"("+Cs+")":Cs)}}break}}function Zr(zn){switch(zn.type){case"ExportDefaultDeclaration":Jr({range:[zn.start,zn.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var Gn=zn.declaration,es=zn.specifiers;if(Gn){var ls=Gn.declarations;ls&&(ls.forEach(function(ys){Jr(ys,"module.exports."+jr(ys))}),Jr({range:[zn.start,Gn.start+Gn.kind.length]},""))}else if(es){var as=es.map(function(ys){var vs=jr(ys);return"module.exports."+vs+" = "+vs+"; "}).join("");as&&Jr(zn,as)}break}}function on(zn,Gn,es){if(zn){for(var ls in zn)if(ls!=="range"&&ls!=="loc"){var as=zn[ls];if(Array.isArray(as))for(var ys=0,vs=as.length;ys<vs;ys++)on(as[ys],zn,es);else as&&typeof as=="object"&&on(as,zn,es)}es.operatorOverloading!==!1&&nn(zn,Gn),es.moduleExports!==!1&&Zr(zn)}}function hn(zn){var Gn="",es="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(zn=(Math.abs(zn)<<1)+(zn<0?1:0);zn||!Gn;){var ls=zn&31;zn>>=5,zn&&(ls|=32),Gn+=es[ls]}return Gn}var fn=Yr.url||"",xn=Yr.sourceMaps,cn=Yr.paperFeatures||{},vn=Yr.source||Kr,bn=Yr.offset||0,_n=Bn.agent,Cn=_n.versionNumber,Fn=!1,Wn=/\r\n|\n|\r/mg,Yn;if(xn&&(_n.chrome&&Cn>=30||_n.webkit&&Cn>=537.76||_n.firefox&&Cn>=23||_n.node)){if(_n.node)bn-=2;else if(ot&&fn&&!ot.location.href.indexOf(fn)){var Qn=ut.getElementsByTagName("html")[0].innerHTML;bn=Qn.substr(0,Qn.indexOf(Kr)+1).match(Wn).length+1}Fn=bn>0&&!(_n.chrome&&Cn>=36||_n.safari&&Cn>=600||_n.firefox&&Cn>=40||_n.node);var ss=["AA"+hn(Fn?0:bn)+"A"];ss.length=(Kr.match(Wn)||[]).length+1+(Fn?bn:0),Yn={version:3,file:fn,names:[],mappings:ss.join(";AACA"),sourceRoot:"",sources:[fn],sourcesContent:[vn]}}return(cn.operatorOverloading!==!1||cn.moduleExports!==!1)&&on(dr(Kr,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,cn),Yn&&(Fn&&(Kr=new Array(bn+1).join(`
`)+Kr),/^(inline|both)$/.test(xn)&&(Kr+=`
//# sourceMappingURL=data:application/json;base64,`+g.btoa(unescape(encodeURIComponent(JSON.stringify(Yn))))),Kr+=`
//# sourceURL=`+(fn||"paperscript")),{url:fn,source:vn,code:Kr,map:Yn}}function Hr(Kr,Yr,zr){Bn=Yr;var Wr=Yr.getView(),jr=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(Kr)&&!/\bnew\s+Tool\b/.test(Kr)?new wn:null,Xr=jr?jr._events:[],Jr=["onFrame","onResize"].concat(Xr),nn=[],Zr=[],on,hn=typeof Kr=="object"?Kr:Vr(Kr,zr);Kr=hn.code;function fn(Cn,Fn){for(var Wn in Cn)(Fn||!/^_/.test(Wn))&&new RegExp("([\\b\\s\\W]|^)"+Wn.replace(/\$/g,"\\$")+"\\b").test(Kr)&&(nn.push(Wn),Zr.push(Cn[Wn]))}fn({__$__:Nr,$__:Fr,paper:Yr,tool:jr},!0),fn(Yr),Kr="var module = { exports: {} }; "+Kr;var bn=ct.each(Jr,function(Cn){new RegExp("\\s+"+Cn+"\\b").test(Kr)&&(nn.push(Cn),this.push("module.exports."+Cn+" = "+Cn+";"))},[]).join(`
`);bn&&(Kr+=`
`+bn),Kr+=`
return module.exports;`;var xn=Bn.agent;if(ut&&(xn.chrome||xn.firefox&&xn.versionNumber<40)){var cn=ut.createElement("script"),vn=ut.head||ut.getElementsByTagName("head")[0];xn.firefox&&(Kr=`
`+Kr),cn.appendChild(ut.createTextNode("document.__paperscript__ = function("+nn+") {"+Kr+`
}`)),vn.appendChild(cn),on=ut.__paperscript__,delete ut.__paperscript__,vn.removeChild(cn)}else on=Function(nn,Kr);var bn=on&&on.apply(Yr,Zr),_n=bn||{};return ct.each(Xr,function(Cn){var Fn=_n[Cn];Fn&&(jr[Cn]=Fn)}),Wr&&(_n.onResize&&Wr.setOnResize(_n.onResize),Wr.emit("resize",{size:Wr.size,delta:new jt}),_n.onFrame&&Wr.setOnFrame(_n.onFrame),Wr.requestUpdate()),bn}function $r(Kr){if(/^text\/(?:x-|)paperscript$/.test(Kr.type)&&ft.getAttribute(Kr,"ignore")!=="true"){var Yr=ft.getAttribute(Kr,"canvas"),zr=ut.getElementById(Yr),Wr=Kr.src||Kr.getAttribute("data-src"),jr=ft.hasAttribute(Kr,"async"),Xr="data-paper-scope";if(!zr)throw new Error('Unable to find canvas with id "'+Yr+'"');var Jr=ft.get(zr.getAttribute(Xr))||new ft().setup(zr);return zr.setAttribute(Xr,Jr._id),Wr?Dn.request({url:Wr,async:jr,mimeType:"text/plain",onLoad:function(nn){Hr(nn,Jr,Wr)}}):Hr(Kr.innerHTML,Jr,Kr.baseURI),Kr.setAttribute("data-paper-ignore","true"),Jr}}function Br(){ct.each(ut&&ut.getElementsByTagName("script"),$r)}function en(Kr){return Kr?$r(Kr):Br()}return ot&&(ut.readyState==="complete"?setTimeout(Br):En.add(ot,{load:Br})),{compile:Vr,execute:Hr,load:en,parse:dr,calculateBinary:Nr,calculateUnary:Fr}}).call(this);var Bn=new(ft.inject(ct.exports,{Base:ct,Numerical:Rt,Key:ns,DomEvent:En,DomElement:pn,document:ut,window:ot,Symbol:Sr,PlacedSymbol:yr}));return Bn.agent.node&&require$$2(Bn),typeof et=="function"&&et.amd?et("paper",Bn):it&&(it.exports=Bn),Bn}).call(commonjsGlobal,typeof self=="object"?self:null)})(paperFull);var paperFullExports=paperFull.exports;const paper=getDefaultExportFromCjs(paperFullExports);function performBooleanOperation(it,g){if(!it||it.length!==2)return console.warn(" Need exactly 2 shapes to combine:",it),null;const et=document.createElement("canvas");paper.setup(et);const ot=St=>{switch(St.type){case"rect":return new paper.Path.Rectangle(new paper.Point(St.x,St.y),new paper.Size(St.width,St.height));case"circle":return new paper.Path.Ellipse({center:[St.x,St.y],radius:[St.radiusX||St.radius||50,St.radiusY||St.radius||50]});default:return console.warn(" Unsupported shape type:",St.type),null}},[ut,ct]=it.map(ot).filter(Boolean);if(!ut||!ct)return null;let dt;switch(g){case"union":dt=ut.unite(ct);break;case"subtract":dt=ut.subtract(ct);break;case"intersect":dt=ut.intersect(ct);break;case"xor":dt=ut.exclude(ct);break;case"divide":dt=ut.divide(ct);break;default:return console.warn(" Unknown operation:",g),null}const ft=(dt==null?void 0:dt.pathData)||null;return ut.remove(),ct.remove(),dt==null||dt.remove(),ft}GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPage({pageIndex:it,imageUrl:g,shapes:et,setShapes:ot,setSelectedTool:ut,selectedTool:ct,selectedIds:dt,setSelectedIds:ft}){const[St]=useImage$1(g),kt=reactExports.useRef(null),[Tt,Rt]=reactExports.useState({width:0,height:0}),[Ft,jt]=reactExports.useState(1),[Bt,zt]=reactExports.useState(1),[Ht,Ut]=reactExports.useState({x:0,y:0}),[Kt,Yt]=reactExports.useState(null),[er,ar]=reactExports.useState(!1),[ir,lr]=reactExports.useState(!1);reactExports.useEffect(()=>{if(!St||!kt.current)return;const Pr=kt.current.getBoundingClientRect(),Or=Pr.width/St.width,hr=Pr.height/St.height,Tr=Math.min(Or,hr);jt(Tr),Rt({width:St.width*Tr,height:St.height*Tr})},[St]),reactExports.useEffect(()=>{const Pr=hr=>hr.code==="Space"&&lr(!0),Or=hr=>hr.code==="Space"&&lr(!1);return window.addEventListener("keydown",Pr),window.addEventListener("keyup",Or),()=>{window.removeEventListener("keydown",Pr),window.removeEventListener("keyup",Or)}},[]);const cr=(Pr,Or)=>{const hr=kt.current.getBoundingClientRect(),Tr=Or.clientX-hr.left,mr=Or.clientY-hr.top,Er=1.5,Dr=8,Cr=1;zt(Lr=>{let qr=Pr==="in"?Math.min(Lr*Er,Dr):Math.max(Lr/Er,Cr);return qr===Lr?Lr:(Ut({x:Ht.x-(Tr-Tt.width/2)*(qr-Lr)*.3,y:Ht.y-(mr-Tt.height/2)*(qr-Lr)*.3}),qr)})},vr=Pr=>{ct==="magnify"&&(Pr.preventDefault(),Pr.button===2||Pr.altKey?cr("out",Pr):cr("in",Pr))},xr=Pr=>{if(Pr.target.closest(".konvajs-content")&&ct!=="magnify")return;Bt>1&&(ir||ct==="magnify"||ct===null)&&Pr.button===0&&(Pr.preventDefault(),ar(!0),Yt({x:Pr.clientX,y:Pr.clientY,startOffset:{...Ht}}))},yr=Pr=>{if(!er||!Kt)return;const Or=Pr.clientX-Kt.x,hr=Pr.clientY-Kt.y;Ut({x:Kt.startOffset.x+Or,y:Kt.startOffset.y+hr})},Sr=()=>ar(!1),kr=()=>{zt(1),Ut({x:0,y:0})};return reactExports.useEffect(()=>{const Pr=Or=>Or.preventDefault();return document.addEventListener("contextmenu",Pr),()=>document.removeEventListener("contextmenu",Pr)},[]),jsxRuntimeExports.jsx("div",{ref:kt,"data-pdf-page":it,onMouseDown:xr,onMouseMove:yr,onMouseUp:Sr,onClick:vr,onDoubleClick:kr,className:"relative w-full h-[80vh] overflow-hidden bg-[#0f0f10] rounded-lg",style:{cursor:Bt>1?er?"grabbing":"grab":ct==="magnify"?"zoom-in":ir?"grab":"default"},children:St&&jsxRuntimeExports.jsxs("div",{className:"absolute top-1/2 left-1/2",style:{transform:`translate(calc(-50% + ${Ht.x}px), calc(-50% + ${Ht.y}px)) scale(${Bt})`,transformOrigin:"center center",width:`${Tt.width}px`,height:`${Tt.height}px`,transition:er?"none":"transform 0.2s ease-out"},children:[jsxRuntimeExports.jsx(Stage,{width:Tt.width,height:Tt.height,scaleX:Ft,scaleY:Ft,className:"absolute",style:{zIndex:0,pointerEvents:"none"},children:jsxRuntimeExports.jsx(Layer,{listening:!1,children:jsxRuntimeExports.jsx(Image$1,{image:St})})}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 z-30",style:{width:`${Tt.width}px`,height:`${Tt.height}px`,pointerEvents:"auto"},children:jsxRuntimeExports.jsx(PDFOverlayCanvas,{shapes:et,setShapes:ot,selectedTool:ct,setSelectedTool:ut,selectedIds:dt,setSelectedIds:ft,zoom:Bt})})]})})}function CanvasEditor(){const it=new URLSearchParams(window.location.search),g=it.get("id"),et=decodeURIComponent(it.get("pdf")||""),[ot,ut]=reactExports.useState([]),[ct,dt]=reactExports.useState(0),[ft,St]=reactExports.useState({}),[kt,Tt]=reactExports.useState(!0),[Rt,Ft]=reactExports.useState(null),[jt,Bt]=reactExports.useState([]);reactExports.useEffect(()=>{const lr=()=>Ft(null);return window.addEventListener("clearSelectedTool",lr),()=>window.removeEventListener("clearSelectedTool",lr)},[]),reactExports.useEffect(()=>{if(!et)return;(async()=>{Tt(!0);try{const cr=`https://cre8tlystudio.com/api/pdf/proxy?url=${encodeURIComponent(et)}`,xr=await(await axiosInstance.get(cr,{responseType:"blob"})).data.arrayBuffer(),yr=await getDocument({data:xr}).promise,Sr=[];for(let kr=1;kr<=yr.numPages;kr++){const Pr=await yr.getPage(kr),Or=Pr.getViewport({scale:1.5}),hr=document.createElement("canvas"),Tr=hr.getContext("2d");hr.width=Or.width,hr.height=Or.height,await Pr.render({canvasContext:Tr,viewport:Or}).promise,Sr.push(hr.toDataURL())}ut(Sr)}catch(cr){console.error(" PDF load error:",cr)}finally{Tt(!1)}})()},[et]);const zt=lr=>{Ft(cr=>cr===lr?null:lr)},Ht=reactExports.useRef({});function Ut(lr){return Ht.current[lr]||(Ht.current[lr]={past:[],future:[]}),Ht.current[lr]}function Kt(lr,cr){const{past:vr}=Ut(lr);vr.push(JSON.parse(JSON.stringify(cr||[]))),Ht.current[lr].future=[]}const Yt=reactExports.useCallback(()=>{const lr=ct,{past:cr,future:vr}=Ut(lr);if(cr.length===0)return;const xr=ft[lr]||[],yr=cr.pop();vr.push(JSON.parse(JSON.stringify(xr))),St(Sr=>({...Sr,[lr]:yr})),Bt([])},[ct,ft,St]),er=reactExports.useCallback(()=>{const lr=ct,{past:cr,future:vr}=Ut(lr);if(vr.length===0)return;const xr=ft[lr]||[],yr=vr.pop();cr.push(JSON.parse(JSON.stringify(xr))),St(Sr=>({...Sr,[lr]:yr})),Bt([])},[ct,ft,St]);reactExports.useEffect(()=>{function lr(cr){const vr=cr.target;if(vr&&(vr.tagName==="INPUT"||vr.tagName==="TEXTAREA"||vr.isContentEditable))return;(navigator.platform.toUpperCase().includes("MAC")?cr.metaKey:cr.ctrlKey)&&cr.key.toLowerCase()==="z"&&(cr.preventDefault(),cr.shiftKey?er():Yt())}return window.addEventListener("keydown",lr),()=>window.removeEventListener("keydown",lr)},[Yt,er]);function ar(lr){const cr=ft[ct]||[],vr=jt.map(String),xr=cr.filter(kr=>vr.includes(String(kr.id)));if(xr.length!==2){alert("Select exactly 2 shapes to combine.");return}const yr=performBooleanOperation(xr,lr);if(!yr)return;const Sr={id:`shape-${Date.now()}`,type:"path",data:yr,fill:"rgba(0,128,255,0.25)",stroke:"#00b4ff",strokeWidth:1};Kt(ct,cr),St(kr=>({...kr,[ct]:[...cr.filter(Pr=>!vr.includes(String(Pr.id))),Sr]})),Bt([Sr.id])}async function ir(){var lr,cr,vr;try{if(!et){y$4.error("No PDF URL provided  cannot save.");return}if(!ot.length)throw new Error("No pages loaded");y$4.info(" Saving your design Please wait.",{position:"top-right",autoClose:2500,hideProgressBar:!1,pauseOnHover:!0,draggable:!0,theme:"dark"});const yr=await(await fetch(`https://cre8tlystudio.com/api/pdf/proxy?url=${encodeURIComponent(et)}`)).arrayBuffer(),Sr=await PDFDocument.load(yr);for(let mr=0;mr<ot.length;mr++){const Er=document.querySelector(`[data-pdf-page="${mr}"] .konva-overlay .konvajs-content canvas:first-child`);if(!Er)continue;console.log(" Exporting overlay for page",mr,Er),document.body.appendChild(Er.cloneNode(!0));const Dr=Er.toDataURL("image/png"),Cr=await Sr.embedPng(Dr),Lr=Sr.getPages()[mr],{width:qr,height:sn}=Lr.getSize();Lr.drawImage(Cr,{x:0,y:0,width:qr,height:sn})}const kr=await Sr.save(),Pr=new Blob([kr],{type:"application/pdf"}),Or=new FormData;Or.append("file",Pr,"final.pdf");const Tr=((lr=(await axiosInstance.put(`https://cre8tlystudio.com/api/edit/${g}/editor/commit`,Or,{headers:{"Content-Type":"multipart/form-data"}})).data)==null?void 0:lr.title)||"Lead Magnet";y$4.success(` "${Tr}" saved and committed successfully!`,{position:"top-right",autoClose:3e3,hideProgressBar:!1,pauseOnHover:!0,draggable:!0,theme:"dark"}),setTimeout(()=>{window.location.href="/dashboard"},2e3)}catch(xr){console.error(" Save failed:",xr),y$4.error(` Failed to save final PDF. ${((vr=(cr=xr.response)==null?void 0:cr.data)==null?void 0:vr.error)||"Check console for details."}`,{position:"top-right",autoClose:4e3,hideProgressBar:!1,pauseOnHover:!0,draggable:!0,theme:"dark"})}}return kt?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-green mb-3"}),jsxRuntimeExports.jsx("p",{children:"Opening design portal..."})]}):jsxRuntimeExports.jsxs("div",{className:"flex h-screen bg-[#111] text-white",children:[jsxRuntimeExports.jsx("input",{id:"hiddenImageUpload",type:"file",accept:"image/*",style:{display:"none"},onChange:lr=>{var kr,Pr,Or;const cr=(kr=lr.target.files)==null?void 0:kr[0];if(!cr)return;const vr=URL.createObjectURL(cr),xr=((Pr=document.querySelector(".konva-overlay"))==null?void 0:Pr.clientWidth)||600,yr=((Or=document.querySelector(".konva-overlay"))==null?void 0:Or.clientHeight)||800,Sr={id:`image-${Date.now()}`,type:"image",src:vr,x:xr/2-100,y:yr/2-100,width:200,height:200,draggable:!0};console.log(" Added image shape:",Sr),St(hr=>{const Tr=hr[ct]||[],mr=[...Tr,Sr];return Kt(ct,Tr),{...hr,[ct]:mr}}),y$4.success(" Image added to canvas!"),lr.target.value=""}}),jsxRuntimeExports.jsxs("div",{className:"w-28 flex-shrink-0 overflow-y-auto p-3 border-r border-gray-800",children:[jsxRuntimeExports.jsx("h1",{className:"text-sm font-semibold mb-3 text-gray-300",children:"Pages"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:ot.map((lr,cr)=>jsxRuntimeExports.jsx("img",{src:lr,alt:`Page ${cr+1}`,onClick:()=>dt(cr),className:`cursor-pointer rounded-md border-2 transition-all ${ct===cr?"border-emerald-500 scale-105":"border-gray-700 hover:border-gray-500"}`},cr))})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col p-4 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>window.location.href="/dashboard",className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-gray-800 hover:bg-gray-700 border border-gray-700/60 transition text-white text-sm font-medium",title:"Dashboard",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:18}),"Back"]}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Canvas Editor"})]}),jsxRuntimeExports.jsxs("button",{onClick:ir,className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-green hover:bg-green border border-grey-700 transition text-black text-sm font-medium",children:[jsxRuntimeExports.jsx(Package,{size:18}),"Save Final PDF"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-auto bg-[#0f0f10] rounded-lg border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 flex gap-2 z-50 bg-[#1a1a1a]/90 backdrop-blur-md px-3 py-2 rounded-lg border border-gray-700/60 shadow-md canvas-toolbar",onMouseDown:lr=>lr.stopPropagation(),onClick:lr=>lr.stopPropagation(),children:[jsxRuntimeExports.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("canvas:resetTool")),Ft(null),Bt([])},title:"Reset to Default",className:`w-8 h-8 flex items-center justify-center rounded-md border transition-all duration-150
    ${Rt?"bg-black border-gray-700/50 hover:border-green hover:bg-[#1a1a1a]":"bg-[#0f0f10] border-green shadow-[0_0_8px_rgba(0,255,0,0.4)] scale-105"}`,children:jsxRuntimeExports.jsx(MousePointerClick,{size:16,className:`${Rt?"text-gray-300":"text-green"} transition-colors`})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center mb-1 mt-0 border-b border-gray-700/40 pb-1",children:[jsxRuntimeExports.jsx("button",{onClick:Yt,title:"Undo",className:"w-8 h-8 flex items-center justify-center rounded-md border border-gray-700/50 bg-black hover:border-green hover:bg-[#1a1a1a] active:scale-95 transition-all duration-150",children:jsxRuntimeExports.jsx(Undo2,{size:18,className:"text-green transition-transform group-hover:scale-110"})}),jsxRuntimeExports.jsx("button",{onClick:er,title:"Redo",className:"w-8 h-8 flex items-center justify-center rounded-md border border-gray-700/50 bg-black hover:border-green hover:bg-[#1a1a1a] active:scale-95 transition-all duration-150",children:jsxRuntimeExports.jsx(Redo2,{size:18,className:"text-green transition-transform group-hover:scale-110"})})]}),[{icon:ZoomIn,type:"magnify",color:"bg-black",title:"Magnify Tool (click & drag to zoom)"},{icon:Square,type:"rect",color:"bg-black",title:"Rectangle Tool"},{icon:Circle$1,type:"circle",color:"bg-black",title:"Ellipse Tool"},{icon:ArrowRight,type:"arrow",color:"bg-black",title:"Arrow Tool"},{icon:Type,type:"text",color:"bg-black",title:"Artistic Text Tool"},{icon:Image$4,type:"image",color:"bg-black",title:"Image Tool"}].map(({icon:lr,type:cr,color:vr,title:xr})=>jsxRuntimeExports.jsx("button",{onClick:()=>{var yr;if(cr==="image"){(yr=document.getElementById("hiddenImageUpload"))==null||yr.click();return}zt(cr)},title:xr,className:`w-8 h-8 flex items-center justify-center rounded-md border transition-all duration-150
      ${Rt===cr?"bg-[#0f0f10] border-green shadow-[0_0_8px_rgba(0,255,0,0.4)] scale-105":`${vr} border-gray-700/50 hover:border-green hover:bg-[#1a1a1a]`}`,children:jsxRuntimeExports.jsx(lr,{size:18,className:`${Rt===cr?"text-green":"text-gray-300"} transition-colors`})},cr)),jsxRuntimeExports.jsx("div",{className:"flex gap-2 ml-0",children:[{icon:Plus,title:"Add",action:"union"},{icon:Minus,title:"Subtract",action:"subtract"},{icon:Combine,title:"Intersect",action:"intersect"},{icon:Slash,title:"XOR / Exclude",action:"xor"},{icon:Divide,title:"Divide",action:"divide"}].map(({icon:lr,title:cr,action:vr})=>jsxRuntimeExports.jsx("button",{onClick:()=>ar(vr),title:cr,className:`w-8 h-8 flex items-center justify-center rounded-md border transition-all duration-150
      bg-black border-gray-700/50 hover:border-cyan-400 hover:bg-[#1a1a1a]
      active:scale-95 focus:outline-none
      ${Rt===vr?"border-cyan-400 shadow-[0_0_8px_rgba(0,255,255,0.4)] scale-105":""}`,children:jsxRuntimeExports.jsx(lr,{size:18,className:"text-cyan-400 transition-transform"})},vr))})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{localStorage.removeItem("cre8tly_canvas_shapes"),window.dispatchEvent(new CustomEvent("clearCanvasShapes"))},className:"absolute bottom-6 right-6 flex items-center gap-1 px-3 py-1.5 rounded-md bg-red-600 text-white hover:text-red-400 border border-gray-700/50 text-xs transition",children:[jsxRuntimeExports.jsx(Trash2,{size:14}),"Clear"]}),ot.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(()=>{window.currentPDFPage=ct})()," ",jsxRuntimeExports.jsx(PDFPage,{pageIndex:ct,imageUrl:ot[ct],shapes:ft[ct]||[],setShapes:lr=>{St(cr=>{const vr=Array.isArray(cr[ct])?cr[ct]:[],xr=typeof lr=="function"?lr(vr):Array.isArray(lr)?lr:[];return Kt(ct,vr),{...cr,[ct]:xr}})},selectedIds:jt,setSelectedIds:Bt,selectedTool:Rt})]})]})]})]})}function useCombinedRefs(){for(var it=arguments.length,g=new Array(it),et=0;et<it;et++)g[et]=arguments[et];return reactExports.useMemo(()=>ot=>{g.forEach(ut=>ut(ot))},g)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(it){const g=Object.prototype.toString.call(it);return g==="[object Window]"||g==="[object global]"}function isNode(it){return"nodeType"in it}function getWindow(it){var g,et;return it?isWindow(it)?it:isNode(it)&&(g=(et=it.ownerDocument)==null?void 0:et.defaultView)!=null?g:window:window}function isDocument(it){const{Document:g}=getWindow(it);return it instanceof g}function isHTMLElement(it){return isWindow(it)?!1:it instanceof getWindow(it).HTMLElement}function isSVGElement(it){return it instanceof getWindow(it).SVGElement}function getOwnerDocument(it){return it?isWindow(it)?it.document:isNode(it)?isDocument(it)?it:isHTMLElement(it)||isSVGElement(it)?it.ownerDocument:document:document:document}const useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(it){const g=reactExports.useRef(it);return useIsomorphicLayoutEffect(()=>{g.current=it}),reactExports.useCallback(function(){for(var et=arguments.length,ot=new Array(et),ut=0;ut<et;ut++)ot[ut]=arguments[ut];return g.current==null?void 0:g.current(...ot)},[])}function useInterval(){const it=reactExports.useRef(null),g=reactExports.useCallback((ot,ut)=>{it.current=setInterval(ot,ut)},[]),et=reactExports.useCallback(()=>{it.current!==null&&(clearInterval(it.current),it.current=null)},[]);return[g,et]}function useLatestValue(it,g){g===void 0&&(g=[it]);const et=reactExports.useRef(it);return useIsomorphicLayoutEffect(()=>{et.current!==it&&(et.current=it)},g),et}function useLazyMemo(it,g){const et=reactExports.useRef();return reactExports.useMemo(()=>{const ot=it(et.current);return et.current=ot,ot},[...g])}function useNodeRef(it){const g=useEvent(it),et=reactExports.useRef(null),ot=reactExports.useCallback(ut=>{ut!==et.current&&(g==null||g(ut,et.current)),et.current=ut},[]);return[et,ot]}function usePrevious(it){const g=reactExports.useRef();return reactExports.useEffect(()=>{g.current=it},[it]),g.current}let ids={};function useUniqueId(it,g){return reactExports.useMemo(()=>{if(g)return g;const et=ids[it]==null?0:ids[it]+1;return ids[it]=et,it+"-"+et},[it,g])}function createAdjustmentFn(it){return function(g){for(var et=arguments.length,ot=new Array(et>1?et-1:0),ut=1;ut<et;ut++)ot[ut-1]=arguments[ut];return ot.reduce((ct,dt)=>{const ft=Object.entries(dt);for(const[St,kt]of ft){const Tt=ct[St];Tt!=null&&(ct[St]=Tt+it*kt)}return ct},{...g})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(it){return"clientX"in it&&"clientY"in it}function isKeyboardEvent(it){if(!it)return!1;const{KeyboardEvent:g}=getWindow(it.target);return g&&it instanceof g}function isTouchEvent(it){if(!it)return!1;const{TouchEvent:g}=getWindow(it.target);return g&&it instanceof g}function getEventCoordinates(it){if(isTouchEvent(it)){if(it.touches&&it.touches.length){const{clientX:g,clientY:et}=it.touches[0];return{x:g,y:et}}else if(it.changedTouches&&it.changedTouches.length){const{clientX:g,clientY:et}=it.changedTouches[0];return{x:g,y:et}}}return hasViewportRelativeCoordinates(it)?{x:it.clientX,y:it.clientY}:null}const CSS=Object.freeze({Translate:{toString(it){if(!it)return;const{x:g,y:et}=it;return"translate3d("+(g?Math.round(g):0)+"px, "+(et?Math.round(et):0)+"px, 0)"}},Scale:{toString(it){if(!it)return;const{scaleX:g,scaleY:et}=it;return"scaleX("+g+") scaleY("+et+")"}},Transform:{toString(it){if(it)return[CSS.Translate.toString(it),CSS.Scale.toString(it)].join(" ")}},Transition:{toString(it){let{property:g,duration:et,easing:ot}=it;return g+" "+et+"ms "+ot}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(it){return it.matches(SELECTOR)?it:it.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(it){let{id:g,value:et}=it;return React$3.createElement("div",{id:g,style:hiddenStyles},et)}function LiveRegion(it){let{id:g,announcement:et,ariaLiveType:ot="assertive"}=it;const ut={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React$3.createElement("div",{id:g,style:ut,role:"status","aria-live":ot,"aria-atomic":!0},et)}function useAnnouncement(){const[it,g]=reactExports.useState("");return{announce:reactExports.useCallback(ot=>{ot!=null&&g(ot)},[]),announcement:it}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(it){const g=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!g)throw new Error("useDndMonitor must be used within a children of <DndContext>");return g(it)},[it,g])}function useDndMonitorProvider(){const[it]=reactExports.useState(()=>new Set),g=reactExports.useCallback(ot=>(it.add(ot),()=>it.delete(ot)),[it]);return[reactExports.useCallback(ot=>{let{type:ut,event:ct}=ot;it.forEach(dt=>{var ft;return(ft=dt[ut])==null?void 0:ft.call(dt,ct)})},[it]),g]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(it){let{active:g}=it;return"Picked up draggable item "+g.id+"."},onDragOver(it){let{active:g,over:et}=it;return et?"Draggable item "+g.id+" was moved over droppable area "+et.id+".":"Draggable item "+g.id+" is no longer over a droppable area."},onDragEnd(it){let{active:g,over:et}=it;return et?"Draggable item "+g.id+" was dropped over droppable area "+et.id:"Draggable item "+g.id+" was dropped."},onDragCancel(it){let{active:g}=it;return"Dragging was cancelled. Draggable item "+g.id+" was dropped."}};function Accessibility(it){let{announcements:g=defaultAnnouncements,container:et,hiddenTextDescribedById:ot,screenReaderInstructions:ut=defaultScreenReaderInstructions}=it;const{announce:ct,announcement:dt}=useAnnouncement(),ft=useUniqueId("DndLiveRegion"),[St,kt]=reactExports.useState(!1);if(reactExports.useEffect(()=>{kt(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(Rt){let{active:Ft}=Rt;ct(g.onDragStart({active:Ft}))},onDragMove(Rt){let{active:Ft,over:jt}=Rt;g.onDragMove&&ct(g.onDragMove({active:Ft,over:jt}))},onDragOver(Rt){let{active:Ft,over:jt}=Rt;ct(g.onDragOver({active:Ft,over:jt}))},onDragEnd(Rt){let{active:Ft,over:jt}=Rt;ct(g.onDragEnd({active:Ft,over:jt}))},onDragCancel(Rt){let{active:Ft,over:jt}=Rt;ct(g.onDragCancel({active:Ft,over:jt}))}}),[ct,g])),!St)return null;const Tt=React$3.createElement(React$3.Fragment,null,React$3.createElement(HiddenText,{id:ot,value:ut.draggable}),React$3.createElement(LiveRegion,{id:ft,announcement:dt}));return et?reactDomExports.createPortal(Tt,et):Tt}var Action;(function(it){it.DragStart="dragStart",it.DragMove="dragMove",it.DragEnd="dragEnd",it.DragCancel="dragCancel",it.DragOver="dragOver",it.RegisterDroppable="registerDroppable",it.SetDroppableDisabled="setDroppableDisabled",it.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop(){}const defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(it,g){return Math.sqrt(Math.pow(it.x-g.x,2)+Math.pow(it.y-g.y,2))}function sortCollisionsAsc(it,g){let{data:{value:et}}=it,{data:{value:ot}}=g;return et-ot}function sortCollisionsDesc(it,g){let{data:{value:et}}=it,{data:{value:ot}}=g;return ot-et}function getFirstCollision(it,g){if(!it||it.length===0)return null;const[et]=it;return g?et[g]:et}function centerOfRectangle(it,g,et){return g===void 0&&(g=it.left),et===void 0&&(et=it.top),{x:g+it.width*.5,y:et+it.height*.5}}const closestCenter=it=>{let{collisionRect:g,droppableRects:et,droppableContainers:ot}=it;const ut=centerOfRectangle(g,g.left,g.top),ct=[];for(const dt of ot){const{id:ft}=dt,St=et.get(ft);if(St){const kt=distanceBetween(centerOfRectangle(St),ut);ct.push({id:ft,data:{droppableContainer:dt,value:kt}})}}return ct.sort(sortCollisionsAsc)};function getIntersectionRatio(it,g){const et=Math.max(g.top,it.top),ot=Math.max(g.left,it.left),ut=Math.min(g.left+g.width,it.left+it.width),ct=Math.min(g.top+g.height,it.top+it.height),dt=ut-ot,ft=ct-et;if(ot<ut&&et<ct){const St=g.width*g.height,kt=it.width*it.height,Tt=dt*ft,Rt=Tt/(St+kt-Tt);return Number(Rt.toFixed(4))}return 0}const rectIntersection=it=>{let{collisionRect:g,droppableRects:et,droppableContainers:ot}=it;const ut=[];for(const ct of ot){const{id:dt}=ct,ft=et.get(dt);if(ft){const St=getIntersectionRatio(ft,g);St>0&&ut.push({id:dt,data:{droppableContainer:ct,value:St}})}}return ut.sort(sortCollisionsDesc)};function adjustScale(it,g,et){return{...it,scaleX:g&&et?g.width/et.width:1,scaleY:g&&et?g.height/et.height:1}}function getRectDelta(it,g){return it&&g?{x:it.left-g.left,y:it.top-g.top}:defaultCoordinates}function createRectAdjustmentFn(it){return function(et){for(var ot=arguments.length,ut=new Array(ot>1?ot-1:0),ct=1;ct<ot;ct++)ut[ct-1]=arguments[ct];return ut.reduce((dt,ft)=>({...dt,top:dt.top+it*ft.y,bottom:dt.bottom+it*ft.y,left:dt.left+it*ft.x,right:dt.right+it*ft.x}),{...et})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(it){if(it.startsWith("matrix3d(")){const g=it.slice(9,-1).split(/, /);return{x:+g[12],y:+g[13],scaleX:+g[0],scaleY:+g[5]}}else if(it.startsWith("matrix(")){const g=it.slice(7,-1).split(/, /);return{x:+g[4],y:+g[5],scaleX:+g[0],scaleY:+g[3]}}return null}function inverseTransform(it,g,et){const ot=parseTransform(g);if(!ot)return it;const{scaleX:ut,scaleY:ct,x:dt,y:ft}=ot,St=it.left-dt-(1-ut)*parseFloat(et),kt=it.top-ft-(1-ct)*parseFloat(et.slice(et.indexOf(" ")+1)),Tt=ut?it.width/ut:it.width,Rt=ct?it.height/ct:it.height;return{width:Tt,height:Rt,top:kt,right:St+Tt,bottom:kt+Rt,left:St}}const defaultOptions={ignoreTransform:!1};function getClientRect(it,g){g===void 0&&(g=defaultOptions);let et=it.getBoundingClientRect();if(g.ignoreTransform){const{transform:kt,transformOrigin:Tt}=getWindow(it).getComputedStyle(it);kt&&(et=inverseTransform(et,kt,Tt))}const{top:ot,left:ut,width:ct,height:dt,bottom:ft,right:St}=et;return{top:ot,left:ut,width:ct,height:dt,bottom:ft,right:St}}function getTransformAgnosticClientRect(it){return getClientRect(it,{ignoreTransform:!0})}function getWindowClientRect(it){const g=it.innerWidth,et=it.innerHeight;return{top:0,left:0,right:g,bottom:et,width:g,height:et}}function isFixed(it,g){return g===void 0&&(g=getWindow(it).getComputedStyle(it)),g.position==="fixed"}function isScrollable(it,g){g===void 0&&(g=getWindow(it).getComputedStyle(it));const et=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(ut=>{const ct=g[ut];return typeof ct=="string"?et.test(ct):!1})}function getScrollableAncestors(it,g){const et=[];function ot(ut){if(g!=null&&et.length>=g||!ut)return et;if(isDocument(ut)&&ut.scrollingElement!=null&&!et.includes(ut.scrollingElement))return et.push(ut.scrollingElement),et;if(!isHTMLElement(ut)||isSVGElement(ut)||et.includes(ut))return et;const ct=getWindow(it).getComputedStyle(ut);return ut!==it&&isScrollable(ut,ct)&&et.push(ut),isFixed(ut,ct)?et:ot(ut.parentNode)}return it?ot(it):et}function getFirstScrollableAncestor(it){const[g]=getScrollableAncestors(it,1);return g??null}function getScrollableElement(it){return!canUseDOM||!it?null:isWindow(it)?it:isNode(it)?isDocument(it)||it===getOwnerDocument(it).scrollingElement?window:isHTMLElement(it)?it:null:null}function getScrollXCoordinate(it){return isWindow(it)?it.scrollX:it.scrollLeft}function getScrollYCoordinate(it){return isWindow(it)?it.scrollY:it.scrollTop}function getScrollCoordinates(it){return{x:getScrollXCoordinate(it),y:getScrollYCoordinate(it)}}var Direction;(function(it){it[it.Forward=1]="Forward",it[it.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(it){return!canUseDOM||!it?!1:it===document.scrollingElement}function getScrollPosition(it){const g={x:0,y:0},et=isDocumentScrollingElement(it)?{height:window.innerHeight,width:window.innerWidth}:{height:it.clientHeight,width:it.clientWidth},ot={x:it.scrollWidth-et.width,y:it.scrollHeight-et.height},ut=it.scrollTop<=g.y,ct=it.scrollLeft<=g.x,dt=it.scrollTop>=ot.y,ft=it.scrollLeft>=ot.x;return{isTop:ut,isLeft:ct,isBottom:dt,isRight:ft,maxScroll:ot,minScroll:g}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(it,g,et,ot,ut){let{top:ct,left:dt,right:ft,bottom:St}=et;ot===void 0&&(ot=10),ut===void 0&&(ut=defaultThreshold);const{isTop:kt,isBottom:Tt,isLeft:Rt,isRight:Ft}=getScrollPosition(it),jt={x:0,y:0},Bt={x:0,y:0},zt={height:g.height*ut.y,width:g.width*ut.x};return!kt&&ct<=g.top+zt.height?(jt.y=Direction.Backward,Bt.y=ot*Math.abs((g.top+zt.height-ct)/zt.height)):!Tt&&St>=g.bottom-zt.height&&(jt.y=Direction.Forward,Bt.y=ot*Math.abs((g.bottom-zt.height-St)/zt.height)),!Ft&&ft>=g.right-zt.width?(jt.x=Direction.Forward,Bt.x=ot*Math.abs((g.right-zt.width-ft)/zt.width)):!Rt&&dt<=g.left+zt.width&&(jt.x=Direction.Backward,Bt.x=ot*Math.abs((g.left+zt.width-dt)/zt.width)),{direction:jt,speed:Bt}}function getScrollElementRect(it){if(it===document.scrollingElement){const{innerWidth:ct,innerHeight:dt}=window;return{top:0,left:0,right:ct,bottom:dt,width:ct,height:dt}}const{top:g,left:et,right:ot,bottom:ut}=it.getBoundingClientRect();return{top:g,left:et,right:ot,bottom:ut,width:it.clientWidth,height:it.clientHeight}}function getScrollOffsets(it){return it.reduce((g,et)=>add(g,getScrollCoordinates(et)),defaultCoordinates)}function getScrollXOffset(it){return it.reduce((g,et)=>g+getScrollXCoordinate(et),0)}function getScrollYOffset(it){return it.reduce((g,et)=>g+getScrollYCoordinate(et),0)}function scrollIntoViewIfNeeded(it,g){if(g===void 0&&(g=getClientRect),!it)return;const{top:et,left:ot,bottom:ut,right:ct}=g(it);getFirstScrollableAncestor(it)&&(ut<=0||ct<=0||et>=window.innerHeight||ot>=window.innerWidth)&&it.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(g,et){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const ot=getScrollableAncestors(et),ut=getScrollOffsets(ot);this.rect={...g},this.width=g.width,this.height=g.height;for(const[ct,dt,ft]of properties)for(const St of dt)Object.defineProperty(this,St,{get:()=>{const kt=ft(ot),Tt=ut[ct]-kt;return this.rect[St]+Tt},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(g){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(et=>{var ot;return(ot=this.target)==null?void 0:ot.removeEventListener(...et)})},this.target=g}add(g,et,ot){var ut;(ut=this.target)==null||ut.addEventListener(g,et,ot),this.listeners.push([g,et,ot])}}function getEventListenerTarget(it){const{EventTarget:g}=getWindow(it);return it instanceof g?it:getOwnerDocument(it)}function hasExceededDistance(it,g){const et=Math.abs(it.x),ot=Math.abs(it.y);return typeof g=="number"?Math.sqrt(et**2+ot**2)>g:"x"in g&&"y"in g?et>g.x&&ot>g.y:"x"in g?et>g.x:"y"in g?ot>g.y:!1}var EventName;(function(it){it.Click="click",it.DragStart="dragstart",it.Keydown="keydown",it.ContextMenu="contextmenu",it.Resize="resize",it.SelectionChange="selectionchange",it.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(it){it.preventDefault()}function stopPropagation(it){it.stopPropagation()}var KeyboardCode;(function(it){it.Space="Space",it.Down="ArrowDown",it.Right="ArrowRight",it.Left="ArrowLeft",it.Up="ArrowUp",it.Esc="Escape",it.Enter="Enter",it.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(it,g)=>{let{currentCoordinates:et}=g;switch(it.code){case KeyboardCode.Right:return{...et,x:et.x+25};case KeyboardCode.Left:return{...et,x:et.x-25};case KeyboardCode.Down:return{...et,y:et.y+25};case KeyboardCode.Up:return{...et,y:et.y-25}}};class KeyboardSensor{constructor(g){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=g;const{event:{target:et}}=g;this.props=g,this.listeners=new Listeners(getOwnerDocument(et)),this.windowListeners=new Listeners(getWindow(et)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:g,onStart:et}=this.props,ot=g.node.current;ot&&scrollIntoViewIfNeeded(ot),et(defaultCoordinates)}handleKeyDown(g){if(isKeyboardEvent(g)){const{active:et,context:ot,options:ut}=this.props,{keyboardCodes:ct=defaultKeyboardCodes,coordinateGetter:dt=defaultKeyboardCoordinateGetter,scrollBehavior:ft="smooth"}=ut,{code:St}=g;if(ct.end.includes(St)){this.handleEnd(g);return}if(ct.cancel.includes(St)){this.handleCancel(g);return}const{collisionRect:kt}=ot.current,Tt=kt?{x:kt.left,y:kt.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=Tt);const Rt=dt(g,{active:et,context:ot.current,currentCoordinates:Tt});if(Rt){const Ft=subtract(Rt,Tt),jt={x:0,y:0},{scrollableAncestors:Bt}=ot.current;for(const zt of Bt){const Ht=g.code,{isTop:Ut,isRight:Kt,isLeft:Yt,isBottom:er,maxScroll:ar,minScroll:ir}=getScrollPosition(zt),lr=getScrollElementRect(zt),cr={x:Math.min(Ht===KeyboardCode.Right?lr.right-lr.width/2:lr.right,Math.max(Ht===KeyboardCode.Right?lr.left:lr.left+lr.width/2,Rt.x)),y:Math.min(Ht===KeyboardCode.Down?lr.bottom-lr.height/2:lr.bottom,Math.max(Ht===KeyboardCode.Down?lr.top:lr.top+lr.height/2,Rt.y))},vr=Ht===KeyboardCode.Right&&!Kt||Ht===KeyboardCode.Left&&!Yt,xr=Ht===KeyboardCode.Down&&!er||Ht===KeyboardCode.Up&&!Ut;if(vr&&cr.x!==Rt.x){const yr=zt.scrollLeft+Ft.x,Sr=Ht===KeyboardCode.Right&&yr<=ar.x||Ht===KeyboardCode.Left&&yr>=ir.x;if(Sr&&!Ft.y){zt.scrollTo({left:yr,behavior:ft});return}Sr?jt.x=zt.scrollLeft-yr:jt.x=Ht===KeyboardCode.Right?zt.scrollLeft-ar.x:zt.scrollLeft-ir.x,jt.x&&zt.scrollBy({left:-jt.x,behavior:ft});break}else if(xr&&cr.y!==Rt.y){const yr=zt.scrollTop+Ft.y,Sr=Ht===KeyboardCode.Down&&yr<=ar.y||Ht===KeyboardCode.Up&&yr>=ir.y;if(Sr&&!Ft.x){zt.scrollTo({top:yr,behavior:ft});return}Sr?jt.y=zt.scrollTop-yr:jt.y=Ht===KeyboardCode.Down?zt.scrollTop-ar.y:zt.scrollTop-ir.y,jt.y&&zt.scrollBy({top:-jt.y,behavior:ft});break}}this.handleMove(g,add(subtract(Rt,this.referenceCoordinates),jt))}}}handleMove(g,et){const{onMove:ot}=this.props;g.preventDefault(),ot(et)}handleEnd(g){const{onEnd:et}=this.props;g.preventDefault(),this.detach(),et()}handleCancel(g){const{onCancel:et}=this.props;g.preventDefault(),this.detach(),et()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(it,g,et)=>{let{keyboardCodes:ot=defaultKeyboardCodes,onActivation:ut}=g,{active:ct}=et;const{code:dt}=it.nativeEvent;if(ot.start.includes(dt)){const ft=ct.activatorNode.current;return ft&&it.target!==ft?!1:(it.preventDefault(),ut==null||ut({event:it.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(it){return!!(it&&"distance"in it)}function isDelayConstraint(it){return!!(it&&"delay"in it)}class AbstractPointerSensor{constructor(g,et,ot){var ut;ot===void 0&&(ot=getEventListenerTarget(g.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=g,this.events=et;const{event:ct}=g,{target:dt}=ct;this.props=g,this.events=et,this.document=getOwnerDocument(dt),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(ot),this.windowListeners=new Listeners(getWindow(dt)),this.initialCoordinates=(ut=getEventCoordinates(ct))!=null?ut:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:g,props:{options:{activationConstraint:et,bypassActivationConstraint:ot}}}=this;if(this.listeners.add(g.move.name,this.handleMove,{passive:!1}),this.listeners.add(g.end.name,this.handleEnd),g.cancel&&this.listeners.add(g.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),et){if(ot!=null&&ot({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(et)){this.timeoutId=setTimeout(this.handleStart,et.delay),this.handlePending(et);return}if(isDistanceConstraint(et)){this.handlePending(et);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(g,et){const{active:ot,onPending:ut}=this.props;ut(ot,g,this.initialCoordinates,et)}handleStart(){const{initialCoordinates:g}=this,{onStart:et}=this.props;g&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),et(g))}handleMove(g){var et;const{activated:ot,initialCoordinates:ut,props:ct}=this,{onMove:dt,options:{activationConstraint:ft}}=ct;if(!ut)return;const St=(et=getEventCoordinates(g))!=null?et:defaultCoordinates,kt=subtract(ut,St);if(!ot&&ft){if(isDistanceConstraint(ft)){if(ft.tolerance!=null&&hasExceededDistance(kt,ft.tolerance))return this.handleCancel();if(hasExceededDistance(kt,ft.distance))return this.handleStart()}if(isDelayConstraint(ft)&&hasExceededDistance(kt,ft.tolerance))return this.handleCancel();this.handlePending(ft,kt);return}g.cancelable&&g.preventDefault(),dt(St)}handleEnd(){const{onAbort:g,onEnd:et}=this.props;this.detach(),this.activated||g(this.props.active),et()}handleCancel(){const{onAbort:g,onCancel:et}=this.props;this.detach(),this.activated||g(this.props.active),et()}handleKeydown(g){g.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var g;(g=this.document.getSelection())==null||g.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(g){const{event:et}=g,ot=getOwnerDocument(et.target);super(g,events,ot)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(it,g)=>{let{nativeEvent:et}=it,{onActivation:ot}=g;return!et.isPrimary||et.button!==0?!1:(ot==null||ot({event:et}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(it){it[it.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(g){super(g,events$1,getOwnerDocument(g.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(it,g)=>{let{nativeEvent:et}=it,{onActivation:ot}=g;return et.button===MouseButton.RightClick?!1:(ot==null||ot({event:et}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(g){super(g,events$2)}static setup(){return window.addEventListener(events$2.move.name,g,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,g)};function g(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(it,g)=>{let{nativeEvent:et}=it,{onActivation:ot}=g;const{touches:ut}=et;return ut.length>1?!1:(ot==null||ot({event:et}),!0)}}];var AutoScrollActivator;(function(it){it[it.Pointer=0]="Pointer",it[it.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(it){it[it.TreeOrder=0]="TreeOrder",it[it.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(it){let{acceleration:g,activator:et=AutoScrollActivator.Pointer,canScroll:ot,draggingRect:ut,enabled:ct,interval:dt=5,order:ft=TraversalOrder.TreeOrder,pointerCoordinates:St,scrollableAncestors:kt,scrollableAncestorRects:Tt,delta:Rt,threshold:Ft}=it;const jt=useScrollIntent({delta:Rt,disabled:!ct}),[Bt,zt]=useInterval(),Ht=reactExports.useRef({x:0,y:0}),Ut=reactExports.useRef({x:0,y:0}),Kt=reactExports.useMemo(()=>{switch(et){case AutoScrollActivator.Pointer:return St?{top:St.y,bottom:St.y,left:St.x,right:St.x}:null;case AutoScrollActivator.DraggableRect:return ut}},[et,ut,St]),Yt=reactExports.useRef(null),er=reactExports.useCallback(()=>{const ir=Yt.current;if(!ir)return;const lr=Ht.current.x*Ut.current.x,cr=Ht.current.y*Ut.current.y;ir.scrollBy(lr,cr)},[]),ar=reactExports.useMemo(()=>ft===TraversalOrder.TreeOrder?[...kt].reverse():kt,[ft,kt]);reactExports.useEffect(()=>{if(!ct||!kt.length||!Kt){zt();return}for(const ir of ar){if((ot==null?void 0:ot(ir))===!1)continue;const lr=kt.indexOf(ir),cr=Tt[lr];if(!cr)continue;const{direction:vr,speed:xr}=getScrollDirectionAndSpeed(ir,cr,Kt,g,Ft);for(const yr of["x","y"])jt[yr][vr[yr]]||(xr[yr]=0,vr[yr]=0);if(xr.x>0||xr.y>0){zt(),Yt.current=ir,Bt(er,dt),Ht.current=xr,Ut.current=vr;return}}Ht.current={x:0,y:0},Ut.current={x:0,y:0},zt()},[g,er,ot,zt,ct,dt,JSON.stringify(Kt),JSON.stringify(jt),Bt,kt,ar,Tt,JSON.stringify(Ft)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(it){let{delta:g,disabled:et}=it;const ot=usePrevious(g);return useLazyMemo(ut=>{if(et||!ot||!ut)return defaultScrollIntent;const ct={x:Math.sign(g.x-ot.x),y:Math.sign(g.y-ot.y)};return{x:{[Direction.Backward]:ut.x[Direction.Backward]||ct.x===-1,[Direction.Forward]:ut.x[Direction.Forward]||ct.x===1},y:{[Direction.Backward]:ut.y[Direction.Backward]||ct.y===-1,[Direction.Forward]:ut.y[Direction.Forward]||ct.y===1}}},[et,g,ot])}function useCachedNode(it,g){const et=g!=null?it.get(g):void 0,ot=et?et.node.current:null;return useLazyMemo(ut=>{var ct;return g==null?null:(ct=ot??ut)!=null?ct:null},[ot,g])}function useCombineActivators(it,g){return reactExports.useMemo(()=>it.reduce((et,ot)=>{const{sensor:ut}=ot,ct=ut.activators.map(dt=>({eventName:dt.eventName,handler:g(dt.handler,ot)}));return[...et,...ct]},[]),[it,g])}var MeasuringStrategy;(function(it){it[it.Always=0]="Always",it[it.BeforeDragging=1]="BeforeDragging",it[it.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(it){it.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(it,g){let{dragging:et,dependencies:ot,config:ut}=g;const[ct,dt]=reactExports.useState(null),{frequency:ft,measure:St,strategy:kt}=ut,Tt=reactExports.useRef(it),Rt=Ht(),Ft=useLatestValue(Rt),jt=reactExports.useCallback(function(Ut){Ut===void 0&&(Ut=[]),!Ft.current&&dt(Kt=>Kt===null?Ut:Kt.concat(Ut.filter(Yt=>!Kt.includes(Yt))))},[Ft]),Bt=reactExports.useRef(null),zt=useLazyMemo(Ut=>{if(Rt&&!et)return defaultValue;if(!Ut||Ut===defaultValue||Tt.current!==it||ct!=null){const Kt=new Map;for(let Yt of it){if(!Yt)continue;if(ct&&ct.length>0&&!ct.includes(Yt.id)&&Yt.rect.current){Kt.set(Yt.id,Yt.rect.current);continue}const er=Yt.node.current,ar=er?new Rect(St(er),er):null;Yt.rect.current=ar,ar&&Kt.set(Yt.id,ar)}return Kt}return Ut},[it,ct,et,Rt,St]);return reactExports.useEffect(()=>{Tt.current=it},[it]),reactExports.useEffect(()=>{Rt||jt()},[et,Rt]),reactExports.useEffect(()=>{ct&&ct.length>0&&dt(null)},[JSON.stringify(ct)]),reactExports.useEffect(()=>{Rt||typeof ft!="number"||Bt.current!==null||(Bt.current=setTimeout(()=>{jt(),Bt.current=null},ft))},[ft,Rt,jt,...ot]),{droppableRects:zt,measureDroppableContainers:jt,measuringScheduled:ct!=null};function Ht(){switch(kt){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return et;default:return!et}}}function useInitialValue(it,g){return useLazyMemo(et=>it?et||(typeof g=="function"?g(it):it):null,[g,it])}function useInitialRect(it,g){return useInitialValue(it,g)}function useMutationObserver(it){let{callback:g,disabled:et}=it;const ot=useEvent(g),ut=reactExports.useMemo(()=>{if(et||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:ct}=window;return new ct(ot)},[ot,et]);return reactExports.useEffect(()=>()=>ut==null?void 0:ut.disconnect(),[ut]),ut}function useResizeObserver(it){let{callback:g,disabled:et}=it;const ot=useEvent(g),ut=reactExports.useMemo(()=>{if(et||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:ct}=window;return new ct(ot)},[et]);return reactExports.useEffect(()=>()=>ut==null?void 0:ut.disconnect(),[ut]),ut}function defaultMeasure(it){return new Rect(getClientRect(it),it)}function useRect(it,g,et){g===void 0&&(g=defaultMeasure);const[ot,ut]=reactExports.useState(null);function ct(){ut(St=>{if(!it)return null;if(it.isConnected===!1){var kt;return(kt=St??et)!=null?kt:null}const Tt=g(it);return JSON.stringify(St)===JSON.stringify(Tt)?St:Tt})}const dt=useMutationObserver({callback(St){if(it)for(const kt of St){const{type:Tt,target:Rt}=kt;if(Tt==="childList"&&Rt instanceof HTMLElement&&Rt.contains(it)){ct();break}}}}),ft=useResizeObserver({callback:ct});return useIsomorphicLayoutEffect(()=>{ct(),it?(ft==null||ft.observe(it),dt==null||dt.observe(document.body,{childList:!0,subtree:!0})):(ft==null||ft.disconnect(),dt==null||dt.disconnect())},[it]),ot}function useRectDelta(it){const g=useInitialValue(it);return getRectDelta(it,g)}const defaultValue$1=[];function useScrollableAncestors(it){const g=reactExports.useRef(it),et=useLazyMemo(ot=>it?ot&&ot!==defaultValue$1&&it&&g.current&&it.parentNode===g.current.parentNode?ot:getScrollableAncestors(it):defaultValue$1,[it]);return reactExports.useEffect(()=>{g.current=it},[it]),et}function useScrollOffsets(it){const[g,et]=reactExports.useState(null),ot=reactExports.useRef(it),ut=reactExports.useCallback(ct=>{const dt=getScrollableElement(ct.target);dt&&et(ft=>ft?(ft.set(dt,getScrollCoordinates(dt)),new Map(ft)):null)},[]);return reactExports.useEffect(()=>{const ct=ot.current;if(it!==ct){dt(ct);const ft=it.map(St=>{const kt=getScrollableElement(St);return kt?(kt.addEventListener("scroll",ut,{passive:!0}),[kt,getScrollCoordinates(kt)]):null}).filter(St=>St!=null);et(ft.length?new Map(ft):null),ot.current=it}return()=>{dt(it),dt(ct)};function dt(ft){ft.forEach(St=>{const kt=getScrollableElement(St);kt==null||kt.removeEventListener("scroll",ut)})}},[ut,it]),reactExports.useMemo(()=>it.length?g?Array.from(g.values()).reduce((ct,dt)=>add(ct,dt),defaultCoordinates):getScrollOffsets(it):defaultCoordinates,[it,g])}function useScrollOffsetsDelta(it,g){g===void 0&&(g=[]);const et=reactExports.useRef(null);return reactExports.useEffect(()=>{et.current=null},g),reactExports.useEffect(()=>{const ot=it!==defaultCoordinates;ot&&!et.current&&(et.current=it),!ot&&et.current&&(et.current=null)},[it]),et.current?subtract(it,et.current):defaultCoordinates}function useSensorSetup(it){reactExports.useEffect(()=>{if(!canUseDOM)return;const g=it.map(et=>{let{sensor:ot}=et;return ot.setup==null?void 0:ot.setup()});return()=>{for(const et of g)et==null||et()}},it.map(g=>{let{sensor:et}=g;return et}))}function useSyntheticListeners(it,g){return reactExports.useMemo(()=>it.reduce((et,ot)=>{let{eventName:ut,handler:ct}=ot;return et[ut]=dt=>{ct(dt,g)},et},{}),[it,g])}function useWindowRect(it){return reactExports.useMemo(()=>it?getWindowClientRect(it):null,[it])}const defaultValue$2=[];function useRects(it,g){g===void 0&&(g=getClientRect);const[et]=it,ot=useWindowRect(et?getWindow(et):null),[ut,ct]=reactExports.useState(defaultValue$2);function dt(){ct(()=>it.length?it.map(St=>isDocumentScrollingElement(St)?ot:new Rect(g(St),St)):defaultValue$2)}const ft=useResizeObserver({callback:dt});return useIsomorphicLayoutEffect(()=>{ft==null||ft.disconnect(),dt(),it.forEach(St=>ft==null?void 0:ft.observe(St))},[it]),ut}function getMeasurableNode(it){if(!it)return null;if(it.children.length>1)return it;const g=it.children[0];return isHTMLElement(g)?g:it}function useDragOverlayMeasuring(it){let{measure:g}=it;const[et,ot]=reactExports.useState(null),ut=reactExports.useCallback(kt=>{for(const{target:Tt}of kt)if(isHTMLElement(Tt)){ot(Rt=>{const Ft=g(Tt);return Rt?{...Rt,width:Ft.width,height:Ft.height}:Ft});break}},[g]),ct=useResizeObserver({callback:ut}),dt=reactExports.useCallback(kt=>{const Tt=getMeasurableNode(kt);ct==null||ct.disconnect(),Tt&&(ct==null||ct.observe(Tt)),ot(Tt?g(Tt):null)},[g,ct]),[ft,St]=useNodeRef(dt);return reactExports.useMemo(()=>({nodeRef:ft,rect:et,setRef:St}),[et,ft,St])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(g){var et;return g!=null&&(et=super.get(g))!=null?et:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(g=>{let{disabled:et}=g;return!et})}getNodeFor(g){var et,ot;return(et=(ot=this.get(g))==null?void 0:ot.node.current)!=null?et:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop,draggableNodes:new Map,over:null,measureDroppableContainers:noop},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(it,g){switch(g.type){case Action.DragStart:return{...it,draggable:{...it.draggable,initialCoordinates:g.initialCoordinates,active:g.active}};case Action.DragMove:return it.draggable.active==null?it:{...it,draggable:{...it.draggable,translate:{x:g.coordinates.x-it.draggable.initialCoordinates.x,y:g.coordinates.y-it.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...it,draggable:{...it.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:et}=g,{id:ot}=et,ut=new DroppableContainersMap(it.droppable.containers);return ut.set(ot,et),{...it,droppable:{...it.droppable,containers:ut}}}case Action.SetDroppableDisabled:{const{id:et,key:ot,disabled:ut}=g,ct=it.droppable.containers.get(et);if(!ct||ot!==ct.key)return it;const dt=new DroppableContainersMap(it.droppable.containers);return dt.set(et,{...ct,disabled:ut}),{...it,droppable:{...it.droppable,containers:dt}}}case Action.UnregisterDroppable:{const{id:et,key:ot}=g,ut=it.droppable.containers.get(et);if(!ut||ot!==ut.key)return it;const ct=new DroppableContainersMap(it.droppable.containers);return ct.delete(et),{...it,droppable:{...it.droppable,containers:ct}}}default:return it}}function RestoreFocus(it){let{disabled:g}=it;const{active:et,activatorEvent:ot,draggableNodes:ut}=reactExports.useContext(InternalContext),ct=usePrevious(ot),dt=usePrevious(et==null?void 0:et.id);return reactExports.useEffect(()=>{if(!g&&!ot&&ct&&dt!=null){if(!isKeyboardEvent(ct)||document.activeElement===ct.target)return;const ft=ut.get(dt);if(!ft)return;const{activatorNode:St,node:kt}=ft;if(!St.current&&!kt.current)return;requestAnimationFrame(()=>{for(const Tt of[St.current,kt.current]){if(!Tt)continue;const Rt=findFirstFocusableNode(Tt);if(Rt){Rt.focus();break}}})}},[ot,g,ut,dt,ct]),null}function applyModifiers(it,g){let{transform:et,...ot}=g;return it!=null&&it.length?it.reduce((ut,ct)=>ct({transform:ut,...ot}),et):et}function useMeasuringConfiguration(it){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...it==null?void 0:it.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...it==null?void 0:it.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...it==null?void 0:it.dragOverlay}}),[it==null?void 0:it.draggable,it==null?void 0:it.droppable,it==null?void 0:it.dragOverlay])}function useLayoutShiftScrollCompensation(it){let{activeNode:g,measure:et,initialRect:ot,config:ut=!0}=it;const ct=reactExports.useRef(!1),{x:dt,y:ft}=typeof ut=="boolean"?{x:ut,y:ut}:ut;useIsomorphicLayoutEffect(()=>{if(!dt&&!ft||!g){ct.current=!1;return}if(ct.current||!ot)return;const kt=g==null?void 0:g.node.current;if(!kt||kt.isConnected===!1)return;const Tt=et(kt),Rt=getRectDelta(Tt,ot);if(dt||(Rt.x=0),ft||(Rt.y=0),ct.current=!0,Math.abs(Rt.x)>0||Math.abs(Rt.y)>0){const Ft=getFirstScrollableAncestor(kt);Ft&&Ft.scrollBy({top:Rt.y,left:Rt.x})}},[g,dt,ft,ot,et])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(it){it[it.Uninitialized=0]="Uninitialized",it[it.Initializing=1]="Initializing",it[it.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function it(g){var et,ot,ut,ct;let{id:dt,accessibility:ft,autoScroll:St=!0,children:kt,sensors:Tt=defaultSensors,collisionDetection:Rt=rectIntersection,measuring:Ft,modifiers:jt,...Bt}=g;const zt=reactExports.useReducer(reducer,void 0,getInitialState),[Ht,Ut]=zt,[Kt,Yt]=useDndMonitorProvider(),[er,ar]=reactExports.useState(Status.Uninitialized),ir=er===Status.Initialized,{draggable:{active:lr,nodes:cr,translate:vr},droppable:{containers:xr}}=Ht,yr=lr!=null?cr.get(lr):null,Sr=reactExports.useRef({initial:null,translated:null}),kr=reactExports.useMemo(()=>{var Yr;return lr!=null?{id:lr,data:(Yr=yr==null?void 0:yr.data)!=null?Yr:defaultData,rect:Sr}:null},[lr,yr]),Pr=reactExports.useRef(null),[Or,hr]=reactExports.useState(null),[Tr,mr]=reactExports.useState(null),Er=useLatestValue(Bt,Object.values(Bt)),Dr=useUniqueId("DndDescribedBy",dt),Cr=reactExports.useMemo(()=>xr.getEnabled(),[xr]),Lr=useMeasuringConfiguration(Ft),{droppableRects:qr,measureDroppableContainers:sn,measuringScheduled:an}=useDroppableMeasuring(Cr,{dragging:ir,dependencies:[vr.x,vr.y],config:Lr.droppable}),tn=useCachedNode(cr,lr),ln=reactExports.useMemo(()=>Tr?getEventCoordinates(Tr):null,[Tr]),yn=Kr(),pn=useInitialRect(tn,Lr.draggable.measure);useLayoutShiftScrollCompensation({activeNode:lr!=null?cr.get(lr):null,config:yn.layoutShiftCompensation,initialRect:pn,measure:Lr.draggable.measure});const En=useRect(tn,Lr.draggable.measure,pn),On=useRect(tn?tn.parentElement:null),Xn=reactExports.useRef({activatorEvent:null,active:null,activeNode:tn,collisionRect:null,collisions:null,droppableRects:qr,draggableNodes:cr,draggingNode:null,draggingNodeRect:null,droppableContainers:xr,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Un=xr.getNodeFor((et=Xn.current.over)==null?void 0:et.id),Ln=useDragOverlayMeasuring({measure:Lr.dragOverlay.measure}),ns=(ot=Ln.nodeRef.current)!=null?ot:tn,gs=ir?(ut=Ln.rect)!=null?ut:En:null,Es=!!(Ln.nodeRef.current&&Ln.rect),wn=useRectDelta(Es?null:En),mn=useWindowRect(ns?getWindow(ns):null),Dn=useScrollableAncestors(ir?Un??tn:null),Tn=useRects(Dn),An=applyModifiers(jt,{transform:{x:vr.x-wn.x,y:vr.y-wn.y,scaleX:1,scaleY:1},activatorEvent:Tr,active:kr,activeNodeRect:En,containerNodeRect:On,draggingNodeRect:gs,over:Xn.current.over,overlayNodeRect:Ln.rect,scrollableAncestors:Dn,scrollableAncestorRects:Tn,windowRect:mn}),$n=ln?add(ln,vr):null,qn=useScrollOffsets(Dn),Bn=useScrollOffsetsDelta(qn),$t=useScrollOffsetsDelta(qn,[En]),Zt=add(An,Bn),or=gs?getAdjustedRect(gs,An):null,ur=kr&&or?Rt({active:kr,collisionRect:or,droppableRects:qr,droppableContainers:Cr,pointerCoordinates:$n}):null,dr=getFirstCollision(ur,"id"),[gr,Ar]=reactExports.useState(null),_r=Es?An:add(An,$t),Nr=adjustScale(_r,(ct=gr==null?void 0:gr.rect)!=null?ct:null,En),Fr=reactExports.useRef(null),Vr=reactExports.useCallback((Yr,zr)=>{let{sensor:Wr,options:jr}=zr;if(Pr.current==null)return;const Xr=cr.get(Pr.current);if(!Xr)return;const Jr=Yr.nativeEvent,nn=new Wr({active:Pr.current,activeNode:Xr,event:Jr,options:jr,context:Xn,onAbort(on){if(!cr.get(on))return;const{onDragAbort:fn}=Er.current,xn={id:on};fn==null||fn(xn),Kt({type:"onDragAbort",event:xn})},onPending(on,hn,fn,xn){if(!cr.get(on))return;const{onDragPending:vn}=Er.current,bn={id:on,constraint:hn,initialCoordinates:fn,offset:xn};vn==null||vn(bn),Kt({type:"onDragPending",event:bn})},onStart(on){const hn=Pr.current;if(hn==null)return;const fn=cr.get(hn);if(!fn)return;const{onDragStart:xn}=Er.current,cn={activatorEvent:Jr,active:{id:hn,data:fn.data,rect:Sr}};reactDomExports.unstable_batchedUpdates(()=>{xn==null||xn(cn),ar(Status.Initializing),Ut({type:Action.DragStart,initialCoordinates:on,active:hn}),Kt({type:"onDragStart",event:cn}),hr(Fr.current),mr(Jr)})},onMove(on){Ut({type:Action.DragMove,coordinates:on})},onEnd:Zr(Action.DragEnd),onCancel:Zr(Action.DragCancel)});Fr.current=nn;function Zr(on){return async function(){const{active:fn,collisions:xn,over:cn,scrollAdjustedTranslate:vn}=Xn.current;let bn=null;if(fn&&vn){const{cancelDrop:_n}=Er.current;bn={activatorEvent:Jr,active:fn,collisions:xn,delta:vn,over:cn},on===Action.DragEnd&&typeof _n=="function"&&await Promise.resolve(_n(bn))&&(on=Action.DragCancel)}Pr.current=null,reactDomExports.unstable_batchedUpdates(()=>{Ut({type:on}),ar(Status.Uninitialized),Ar(null),hr(null),mr(null),Fr.current=null;const _n=on===Action.DragEnd?"onDragEnd":"onDragCancel";if(bn){const Cn=Er.current[_n];Cn==null||Cn(bn),Kt({type:_n,event:bn})}})}}},[cr]),Hr=reactExports.useCallback((Yr,zr)=>(Wr,jr)=>{const Xr=Wr.nativeEvent,Jr=cr.get(jr);if(Pr.current!==null||!Jr||Xr.dndKit||Xr.defaultPrevented)return;const nn={active:Jr};Yr(Wr,zr.options,nn)===!0&&(Xr.dndKit={capturedBy:zr.sensor},Pr.current=jr,Vr(Wr,zr))},[cr,Vr]),$r=useCombineActivators(Tt,Hr);useSensorSetup(Tt),useIsomorphicLayoutEffect(()=>{En&&er===Status.Initializing&&ar(Status.Initialized)},[En,er]),reactExports.useEffect(()=>{const{onDragMove:Yr}=Er.current,{active:zr,activatorEvent:Wr,collisions:jr,over:Xr}=Xn.current;if(!zr||!Wr)return;const Jr={active:zr,activatorEvent:Wr,collisions:jr,delta:{x:Zt.x,y:Zt.y},over:Xr};reactDomExports.unstable_batchedUpdates(()=>{Yr==null||Yr(Jr),Kt({type:"onDragMove",event:Jr})})},[Zt.x,Zt.y]),reactExports.useEffect(()=>{const{active:Yr,activatorEvent:zr,collisions:Wr,droppableContainers:jr,scrollAdjustedTranslate:Xr}=Xn.current;if(!Yr||Pr.current==null||!zr||!Xr)return;const{onDragOver:Jr}=Er.current,nn=jr.get(dr),Zr=nn&&nn.rect.current?{id:nn.id,rect:nn.rect.current,data:nn.data,disabled:nn.disabled}:null,on={active:Yr,activatorEvent:zr,collisions:Wr,delta:{x:Xr.x,y:Xr.y},over:Zr};reactDomExports.unstable_batchedUpdates(()=>{Ar(Zr),Jr==null||Jr(on),Kt({type:"onDragOver",event:on})})},[dr]),useIsomorphicLayoutEffect(()=>{Xn.current={activatorEvent:Tr,active:kr,activeNode:tn,collisionRect:or,collisions:ur,droppableRects:qr,draggableNodes:cr,draggingNode:ns,draggingNodeRect:gs,droppableContainers:xr,over:gr,scrollableAncestors:Dn,scrollAdjustedTranslate:Zt},Sr.current={initial:gs,translated:or}},[kr,tn,ur,or,cr,ns,gs,qr,xr,gr,Dn,Zt]),useAutoScroller({...yn,delta:vr,draggingRect:or,pointerCoordinates:$n,scrollableAncestors:Dn,scrollableAncestorRects:Tn});const Br=reactExports.useMemo(()=>({active:kr,activeNode:tn,activeNodeRect:En,activatorEvent:Tr,collisions:ur,containerNodeRect:On,dragOverlay:Ln,draggableNodes:cr,droppableContainers:xr,droppableRects:qr,over:gr,measureDroppableContainers:sn,scrollableAncestors:Dn,scrollableAncestorRects:Tn,measuringConfiguration:Lr,measuringScheduled:an,windowRect:mn}),[kr,tn,En,Tr,ur,On,Ln,cr,xr,qr,gr,sn,Dn,Tn,Lr,an,mn]),en=reactExports.useMemo(()=>({activatorEvent:Tr,activators:$r,active:kr,activeNodeRect:En,ariaDescribedById:{draggable:Dr},dispatch:Ut,draggableNodes:cr,over:gr,measureDroppableContainers:sn}),[Tr,$r,kr,En,Ut,Dr,cr,gr,sn]);return React$3.createElement(DndMonitorContext.Provider,{value:Yt},React$3.createElement(InternalContext.Provider,{value:en},React$3.createElement(PublicContext.Provider,{value:Br},React$3.createElement(ActiveDraggableContext.Provider,{value:Nr},kt)),React$3.createElement(RestoreFocus,{disabled:(ft==null?void 0:ft.restoreFocus)===!1})),React$3.createElement(Accessibility,{...ft,hiddenTextDescribedById:Dr}));function Kr(){const Yr=(Or==null?void 0:Or.autoScrollEnabled)===!1,zr=typeof St=="object"?St.enabled===!1:St===!1,Wr=ir&&!Yr&&!zr;return typeof St=="object"?{...St,enabled:Wr}:{enabled:Wr}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Draggable";function useDraggable(it){let{id:g,data:et,disabled:ot=!1,attributes:ut}=it;const ct=useUniqueId(ID_PREFIX$1),{activators:dt,activatorEvent:ft,active:St,activeNodeRect:kt,ariaDescribedById:Tt,draggableNodes:Rt,over:Ft}=reactExports.useContext(InternalContext),{role:jt=defaultRole,roleDescription:Bt="draggable",tabIndex:zt=0}=ut??{},Ht=(St==null?void 0:St.id)===g,Ut=reactExports.useContext(Ht?ActiveDraggableContext:NullContext),[Kt,Yt]=useNodeRef(),[er,ar]=useNodeRef(),ir=useSyntheticListeners(dt,g),lr=useLatestValue(et);useIsomorphicLayoutEffect(()=>(Rt.set(g,{id:g,key:ct,node:Kt,activatorNode:er,data:lr}),()=>{const vr=Rt.get(g);vr&&vr.key===ct&&Rt.delete(g)}),[Rt,g]);const cr=reactExports.useMemo(()=>({role:jt,tabIndex:zt,"aria-disabled":ot,"aria-pressed":Ht&&jt===defaultRole?!0:void 0,"aria-roledescription":Bt,"aria-describedby":Tt.draggable}),[ot,jt,zt,Ht,Bt,Tt.draggable]);return{active:St,activatorEvent:ft,activeNodeRect:kt,attributes:cr,isDragging:Ht,listeners:ot?void 0:ir,node:Kt,over:Ft,setNodeRef:Yt,setActivatorNodeRef:ar,transform:Ut}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(it){let{data:g,disabled:et=!1,id:ot,resizeObserverConfig:ut}=it;const ct=useUniqueId(ID_PREFIX$1$1),{active:dt,dispatch:ft,over:St,measureDroppableContainers:kt}=reactExports.useContext(InternalContext),Tt=reactExports.useRef({disabled:et}),Rt=reactExports.useRef(!1),Ft=reactExports.useRef(null),jt=reactExports.useRef(null),{disabled:Bt,updateMeasurementsFor:zt,timeout:Ht}={...defaultResizeObserverConfig,...ut},Ut=useLatestValue(zt??ot),Kt=reactExports.useCallback(()=>{if(!Rt.current){Rt.current=!0;return}jt.current!=null&&clearTimeout(jt.current),jt.current=setTimeout(()=>{kt(Array.isArray(Ut.current)?Ut.current:[Ut.current]),jt.current=null},Ht)},[Ht]),Yt=useResizeObserver({callback:Kt,disabled:Bt||!dt}),er=reactExports.useCallback((cr,vr)=>{Yt&&(vr&&(Yt.unobserve(vr),Rt.current=!1),cr&&Yt.observe(cr))},[Yt]),[ar,ir]=useNodeRef(er),lr=useLatestValue(g);return reactExports.useEffect(()=>{!Yt||!ar.current||(Yt.disconnect(),Rt.current=!1,Yt.observe(ar.current))},[ar,Yt]),reactExports.useEffect(()=>(ft({type:Action.RegisterDroppable,element:{id:ot,key:ct,disabled:et,node:ar,rect:Ft,data:lr}}),()=>ft({type:Action.UnregisterDroppable,key:ct,id:ot})),[ot]),reactExports.useEffect(()=>{et!==Tt.current.disabled&&(ft({type:Action.SetDroppableDisabled,id:ot,key:ct,disabled:et}),Tt.current.disabled=et)},[ot,ct,et,ft]),{active:dt,rect:Ft,isOver:(St==null?void 0:St.id)===ot,node:ar,over:St,setNodeRef:ir}}function arrayMove(it,g,et){const ot=it.slice();return ot.splice(et<0?ot.length+et:et,0,ot.splice(g,1)[0]),ot}function getSortedRects(it,g){return it.reduce((et,ot,ut)=>{const ct=g.get(ot);return ct&&(et[ut]=ct),et},Array(it.length))}function isValidIndex(it){return it!==null&&it>=0}function itemsEqual(it,g){if(it===g)return!0;if(it.length!==g.length)return!1;for(let et=0;et<it.length;et++)if(it[et]!==g[et])return!1;return!0}function normalizeDisabled(it){return typeof it=="boolean"?{draggable:it,droppable:it}:it}const rectSortingStrategy=it=>{let{rects:g,activeIndex:et,overIndex:ot,index:ut}=it;const ct=arrayMove(g,ot,et),dt=g[ut],ft=ct[ut];return!ft||!dt?null:{x:ft.left-dt.left,y:ft.top-dt.top,scaleX:ft.width/dt.width,scaleY:ft.height/dt.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=it=>{var g;let{activeIndex:et,activeNodeRect:ot,index:ut,rects:ct,overIndex:dt}=it;const ft=(g=ct[et])!=null?g:ot;if(!ft)return null;if(ut===et){const kt=ct[dt];return kt?{x:0,y:et<dt?kt.top+kt.height-(ft.top+ft.height):kt.top-ft.top,...defaultScale$1}:null}const St=getItemGap$1(ct,ut,et);return ut>et&&ut<=dt?{x:0,y:-ft.height-St,...defaultScale$1}:ut<et&&ut>=dt?{x:0,y:ft.height+St,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(it,g,et){const ot=it[g],ut=it[g-1],ct=it[g+1];return ot?et<g?ut?ot.top-(ut.top+ut.height):ct?ct.top-(ot.top+ot.height):0:ct?ct.top-(ot.top+ot.height):ut?ot.top-(ut.top+ut.height):0:0}const ID_PREFIX="Sortable",Context=React$3.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(it){let{children:g,id:et,items:ot,strategy:ut=rectSortingStrategy,disabled:ct=!1}=it;const{active:dt,dragOverlay:ft,droppableRects:St,over:kt,measureDroppableContainers:Tt}=useDndContext(),Rt=useUniqueId(ID_PREFIX,et),Ft=ft.rect!==null,jt=reactExports.useMemo(()=>ot.map(ir=>typeof ir=="object"&&"id"in ir?ir.id:ir),[ot]),Bt=dt!=null,zt=dt?jt.indexOf(dt.id):-1,Ht=kt?jt.indexOf(kt.id):-1,Ut=reactExports.useRef(jt),Kt=!itemsEqual(jt,Ut.current),Yt=Ht!==-1&&zt===-1||Kt,er=normalizeDisabled(ct);useIsomorphicLayoutEffect(()=>{Kt&&Bt&&Tt(jt)},[Kt,jt,Bt,Tt]),reactExports.useEffect(()=>{Ut.current=jt},[jt]);const ar=reactExports.useMemo(()=>({activeIndex:zt,containerId:Rt,disabled:er,disableTransforms:Yt,items:jt,overIndex:Ht,useDragOverlay:Ft,sortedRects:getSortedRects(jt,St),strategy:ut}),[zt,Rt,er.draggable,er.droppable,Yt,jt,Ht,St,Ft,ut]);return React$3.createElement(Context.Provider,{value:ar},g)}const defaultNewIndexGetter=it=>{let{id:g,items:et,activeIndex:ot,overIndex:ut}=it;return arrayMove(et,ot,ut).indexOf(g)},defaultAnimateLayoutChanges=it=>{let{containerId:g,isSorting:et,wasDragging:ot,index:ut,items:ct,newIndex:dt,previousItems:ft,previousContainerId:St,transition:kt}=it;return!kt||!ot||ft!==ct&&ut===dt?!1:et?!0:dt!==ut&&g===St},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(it){let{disabled:g,index:et,node:ot,rect:ut}=it;const[ct,dt]=reactExports.useState(null),ft=reactExports.useRef(et);return useIsomorphicLayoutEffect(()=>{if(!g&&et!==ft.current&&ot.current){const St=ut.current;if(St){const kt=getClientRect(ot.current,{ignoreTransform:!0}),Tt={x:St.left-kt.left,y:St.top-kt.top,scaleX:St.width/kt.width,scaleY:St.height/kt.height};(Tt.x||Tt.y)&&dt(Tt)}}et!==ft.current&&(ft.current=et)},[g,et,ot,ut]),reactExports.useEffect(()=>{ct&&dt(null)},[ct]),ct}function useSortable(it){let{animateLayoutChanges:g=defaultAnimateLayoutChanges,attributes:et,disabled:ot,data:ut,getNewIndex:ct=defaultNewIndexGetter,id:dt,strategy:ft,resizeObserverConfig:St,transition:kt=defaultTransition}=it;const{items:Tt,containerId:Rt,activeIndex:Ft,disabled:jt,disableTransforms:Bt,sortedRects:zt,overIndex:Ht,useDragOverlay:Ut,strategy:Kt}=reactExports.useContext(Context),Yt=normalizeLocalDisabled(ot,jt),er=Tt.indexOf(dt),ar=reactExports.useMemo(()=>({sortable:{containerId:Rt,index:er,items:Tt},...ut}),[Rt,ut,er,Tt]),ir=reactExports.useMemo(()=>Tt.slice(Tt.indexOf(dt)),[Tt,dt]),{rect:lr,node:cr,isOver:vr,setNodeRef:xr}=useDroppable({id:dt,data:ar,disabled:Yt.droppable,resizeObserverConfig:{updateMeasurementsFor:ir,...St}}),{active:yr,activatorEvent:Sr,activeNodeRect:kr,attributes:Pr,setNodeRef:Or,listeners:hr,isDragging:Tr,over:mr,setActivatorNodeRef:Er,transform:Dr}=useDraggable({id:dt,data:ar,attributes:{...defaultAttributes,...et},disabled:Yt.draggable}),Cr=useCombinedRefs(xr,Or),Lr=!!yr,qr=Lr&&!Bt&&isValidIndex(Ft)&&isValidIndex(Ht),sn=!Ut&&Tr,an=sn&&qr?Dr:null,ln=qr?an??(ft??Kt)({rects:zt,activeNodeRect:kr,activeIndex:Ft,overIndex:Ht,index:er}):null,yn=isValidIndex(Ft)&&isValidIndex(Ht)?ct({id:dt,items:Tt,activeIndex:Ft,overIndex:Ht}):er,pn=yr==null?void 0:yr.id,En=reactExports.useRef({activeId:pn,items:Tt,newIndex:yn,containerId:Rt}),On=Tt!==En.current.items,Xn=g({active:yr,containerId:Rt,isDragging:Tr,isSorting:Lr,id:dt,index:er,items:Tt,newIndex:En.current.newIndex,previousItems:En.current.items,previousContainerId:En.current.containerId,transition:kt,wasDragging:En.current.activeId!=null}),Un=useDerivedTransform({disabled:!Xn,index:er,node:cr,rect:lr});return reactExports.useEffect(()=>{Lr&&En.current.newIndex!==yn&&(En.current.newIndex=yn),Rt!==En.current.containerId&&(En.current.containerId=Rt),Tt!==En.current.items&&(En.current.items=Tt)},[Lr,yn,Rt,Tt]),reactExports.useEffect(()=>{if(pn===En.current.activeId)return;if(pn!=null&&En.current.activeId==null){En.current.activeId=pn;return}const ns=setTimeout(()=>{En.current.activeId=pn},50);return()=>clearTimeout(ns)},[pn]),{active:yr,activeIndex:Ft,attributes:Pr,data:ar,rect:lr,index:er,newIndex:yn,items:Tt,isOver:vr,isSorting:Lr,isDragging:Tr,listeners:hr,node:cr,overIndex:Ht,over:mr,setNodeRef:Cr,setActivatorNodeRef:Er,setDroppableNodeRef:xr,setDraggableNodeRef:Or,transform:Un??ln,transition:Ln()};function Ln(){if(Un||On&&En.current.newIndex===er)return disabledTransition;if(!(sn&&!isKeyboardEvent(Sr)||!kt)&&(Lr||Xn))return CSS.Transition.toString({...kt,property:transitionProperty})}}function normalizeLocalDisabled(it,g){var et,ot;return typeof it=="boolean"?{draggable:it,droppable:!1}:{draggable:(et=it==null?void 0:it.draggable)!=null?et:g.draggable,droppable:(ot=it==null?void 0:it.droppable)!=null?ot:g.droppable}}KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left;function SortableBlock({id:it,block:g,index:et,updateBlock:ot,removeBlock:ut}){const{attributes:ct,listeners:dt,setNodeRef:ft,transform:St,transition:kt}=useSortable({id:it}),Tt={transform:CSS.Transform.toString(St),transition:kt};return jsxRuntimeExports.jsxs("div",{ref:ft,style:Tt,className:"mb-6 bg-gray-50 border border-gray-200 p-4 rounded-lg relative",children:[jsxRuntimeExports.jsx("div",{...ct,...dt,title:"Drag to reorder",className:"absolute -left-3 top-1/2 -translate-y-1/2 cursor-grab bg-gray-300 hover:bg-gray-400 text-xs px-1 py-0.5 rounded",children:""}),["heading","subheading","subsubheading"].includes(g.type)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"font-semibold text-sm mb-1",children:g.type==="heading"?"Heading (H1)":g.type==="subheading"?"Subheading (H2)":"Sub-Subheading (H3)"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:g.type==="heading"?"Enter your main headline":g.type==="subheading"?"Enter your subheading":"Enter your supporting header",value:g.text,onChange:Rt=>ot(et,"text",Rt.target.value),onFocus:Rt=>Rt.stopPropagation(),onPointerDown:Rt=>Rt.stopPropagation(),onKeyDown:Rt=>Rt.stopPropagation(),className:"w-full mt-1 p-2 border rounded"})]}),g.type==="paragraph"&&jsxRuntimeExports.jsx("textarea",{value:g.text,onChange:Rt=>ot(et,"text",Rt.target.value),onFocus:Rt=>Rt.stopPropagation(),onPointerDown:Rt=>Rt.stopPropagation(),onKeyDown:Rt=>Rt.stopPropagation(),className:"w-full mt-1 p-2 border rounded h-24"}),g.type==="button"&&jsxRuntimeExports.jsx("input",{type:"text",value:g.text,onChange:Rt=>ot(et,"text",Rt.target.value),onFocus:Rt=>Rt.stopPropagation(),onPointerDown:Rt=>Rt.stopPropagation(),onKeyDown:Rt=>Rt.stopPropagation(),className:"w-full mt-1 p-2 border rounded"}),jsxRuntimeExports.jsx("button",{className:"mt-3 text-red-500 text-sm hover:underline",onClick:()=>ut(et),children:"Remove"})]})}const MemoizedSortableBlock=React$3.memo(SortableBlock);function LandingPageBuilder(){var ar,ir;const{user:it}=useAuth(),[g,et]=reactExports.useState(null),[ot,ut]=reactExports.useState(!0),[ct,dt]=reactExports.useState(""),[ft,St]=reactExports.useState(""),[kt,Tt]=reactExports.useState("default"),[Rt,Ft]=reactExports.useState([]),[jt,Bt]=reactExports.useState(!1),zt=[...colorThemes,...gradientThemes],Ht=React$3.useCallback((lr,cr,vr)=>{et(xr=>{const yr=xr.content_blocks.map((Sr,kr)=>kr===lr?{...Sr,[cr]:vr}:Sr);return{...xr,content_blocks:yr}})},[]),Ut=lr=>{if(!lr)return;const cr={id:crypto.randomUUID(),type:lr,text:"",padding:20};et(vr=>({...vr,content_blocks:[...vr.content_blocks||[],cr]})),Bt(!1)},Kt=lr=>{const cr=g.content_blocks.filter((vr,xr)=>xr!==lr);et({...g,content_blocks:cr})};if(reactExports.useEffect(()=>{if(!(it!=null&&it.id))return;const lr=async()=>{try{const vr=await axiosInstance.get(`https://cre8tlystudio.com/api/landing/builder/${it.id}`);if(vr.data.success&&vr.data.landingPage){const xr=vr.data.landingPage;let yr=[];try{yr=typeof xr.content_blocks=="string"?JSON.parse(xr.content_blocks):xr.content_blocks||[]}catch{yr=[]}et({...xr,content_blocks:yr}),dt(xr.font||"Montserrat"),St(xr.font_file||""),xr.bg_theme&&xr.bg_theme!=="default"?Tt(xr.bg_theme):Tt("linear-gradient(to bottom, #ffffff, #F285C3)")}else y$4.error(vr.data.message||"Landing page not found")}catch(vr){console.error(vr),y$4.error("Failed to load landing page")}finally{ut(!1)}},cr=async()=>{var vr;try{const xr=await axiosInstance.get("https://cre8tlystudio.com/api/lead-magnets");Ft(xr.data.magnets||[])}catch(xr){console.error("Error loading PDFs:",((vr=xr.response)==null?void 0:vr.data)||xr.message)}};lr(),cr()},[it]),reactExports.useEffect(()=>{const lr=cr=>{cr.target.closest(".add-section-dropdown")||Bt(!1)};return document.addEventListener("click",lr),()=>document.removeEventListener("click",lr)},[]),ot)return jsxRuntimeExports.jsx("p",{className:"text-center mt-10 text-gray-400",children:"Loading..."});if(!ot&&(it==null?void 0:it.pro_status)!=="active")return jsxRuntimeExports.jsxs("div",{className:"text-center mt-20 text-gray-400",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"Upgrade Required"}),jsxRuntimeExports.jsxs("p",{className:"mt-2",children:["This feature is available only for PRO members.",jsxRuntimeExports.jsx("a",{href:"/plans",className:"text-[#F285C3] underline ml-1 hover:text-[#e070ad]",children:"Upgrade now"})]})]});if(!g)return jsxRuntimeExports.jsxs("div",{className:"text-center mt-20 text-gray-400",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"No Landing Page Found"}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:"We couldnt load your landing page data."})]});const Yt=async lr=>{lr.preventDefault();try{let cr=g.content_blocks;if(typeof cr=="string")try{cr=JSON.parse(cr)}catch{console.warn("Invalid content_blocks string, resetting to []"),cr=[]}await axiosInstance.put(`https://cre8tlystudio.com/api/landing/update/${g.id}`,{...g,content_blocks:cr,pdf_url:g.pdf_url}),y$4.success("Landing page saved successfully!")}catch(cr){console.error(cr),y$4.error("Error saving landing page")}},er=((ar=[...colorThemes,...gradientThemes].find(lr=>lr.name===kt))==null?void 0:ar.preview)||"linear-gradient(to bottom, #ffffff, #F285C3)";return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-gray-900 p-10 overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto bg-black/70 backdrop-blur-sm rounded-2xl shadow-lg p-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-silver",children:"Landing Page Builder"}),jsxRuntimeExports.jsxs("form",{onSubmit:Yt,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block font-semibold mb-1 text-silver ",children:"Page Url Username"}),jsxRuntimeExports.jsx("input",{type:"text",value:g.username||"",onChange:lr=>et({...g,username:lr.target.value}),onBlur:async()=>{var lr,cr;if(((cr=(lr=g.username)==null?void 0:lr.trim())==null?void 0:cr.length)>=3)try{const vr=await axiosInstance.get(`/check-username/${g.username.trim()}`);y$4[vr.data.available?"success":"error"](vr.data.message)}catch{y$4.error("Error checking username")}},placeholder:"e.g. cre8tlydesigns",className:"w-full border border-gray-300 rounded-lg px-4 py-2"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-200 mt-1",children:["This will be used for your page URL:"," ",jsxRuntimeExports.jsx("span",{className:"text-blue",children:g.username?`https://${g.username}.cre8tlystudio.com`:"https://yourname.cre8tlystudio.com"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsx(DndContext,{collisionDetection:closestCenter,onDragEnd:({active:lr,over:cr})=>{if(!cr||lr.id===cr.id)return;const vr=g.content_blocks.findIndex(Sr=>Sr.id===lr.id),xr=g.content_blocks.findIndex(Sr=>Sr.id===cr.id),yr=arrayMove(g.content_blocks,vr,xr);et(Sr=>({...Sr,content_blocks:yr}))},children:jsxRuntimeExports.jsx(SortableContext,{items:g.content_blocks.map(lr=>lr.id),strategy:verticalListSortingStrategy,children:g.content_blocks.filter(lr=>lr&&lr.type).map((lr,cr)=>jsxRuntimeExports.jsx(MemoizedSortableBlock,{id:lr.id,block:lr,index:cr,updateBlock:Ht,removeBlock:Kt},lr.id))})})}),jsxRuntimeExports.jsxs("div",{className:"relative inline-block add-section-dropdown mt-10 mb-10",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Bt(lr=>!lr),className:"bg-blue text-white py-2 px-4 rounded-lg shadow transition relative",children:"+ Add Section"}),jt&&jsxRuntimeExports.jsx("div",{className:"absolute left-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[{label:"Heading (H1)",value:"heading"},{label:"Subheading (H2)",value:"subheading"},{label:"Sub-Subheading (H3)",value:"subsubheading"},{label:"Paragraph",value:"paragraph"},{label:"Button",value:"button"}].map(lr=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ut(lr.value),className:"block w-full text-left px-4 py-2 text-gray-700 hover:bg-blue/10 hover:text-black transition",children:lr.label},lr.value))})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8",children:[jsxRuntimeExports.jsx("label",{className:"block font-semibold mb-2 text-silver",children:"Choose PDF to Offer"}),jsxRuntimeExports.jsxs("select",{value:g.pdf_url||"",onChange:lr=>et({...g,pdf_url:lr.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 mt-2",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Select a Completed PDF --"}),Rt.filter(lr=>lr.status==="completed"&&lr.pdf_url).map(lr=>jsxRuntimeExports.jsxs("option",{value:lr.pdf_url,children:[lr.title||"Untitled PDF","  (Ready)"]},lr.id))]}),g.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Selected file:"," ",jsxRuntimeExports.jsx("a",{href:g.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue underline",children:"Preview PDF"})]})]}),jsxRuntimeExports.jsx(ColorThemeChooser,{bgTheme:kt,setBgTheme:lr=>{Tt(lr);const cr=zt.find(vr=>vr.name===lr);et({...g,bg_theme:(cr==null?void 0:cr.preview)||lr})},colorThemes:zt}),jsxRuntimeExports.jsx("div",{className:"relative z-[60]",children:jsxRuntimeExports.jsx(FontSelector,{fontName:ct,setFontName:lr=>{dt(lr),et({...g,font:lr})},fontFile:ft,setFontFile:lr=>{St(lr),et({...g,font_file:lr})}})}),jsxRuntimeExports.jsxs("div",{className:"relative z-[10] mt-10 bg-[#111827] rounded-xl p-6 shadow-inner border border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-silver text-lg font-semibold mb-4",children:"Text Colors"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6",children:[{key:"font_color_h1",label:"Heading 1"},{key:"font_color_h2",label:"Heading 2"},{key:"font_color_h3",label:"Heading 3"},{key:"font_color_p",label:"Paragraph"}].map(({key:lr,label:cr})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center bg-[#1f2937] rounded-lg p-4 border border-gray-600 hover:border-[#F285C3] transition-all duration-200",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-white mb-2",children:cr}),jsxRuntimeExports.jsx("input",{type:"color",value:g[lr]||"#FFFFFF",onChange:vr=>et({...g,[lr]:vr.target.value}),className:"w-14 h-14 p-0 rounded-lg cursor-pointer border border-gray-400 hover:scale-105 transition-transform",style:{backgroundColor:g[lr]}}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-300 mt-2 tracking-wider",children:g[lr]||"#FFFFFF"})]},lr))})]}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-silver",children:"Landing Page Preview"}),jsxRuntimeExports.jsx("div",{className:"mt-16 p-10 rounded-xl text-center shadow-lg transition-all duration-500",style:{background:er,fontFamily:ct},children:(ir=g.content_blocks)!=null&&ir.length?g.content_blocks.map((lr,cr)=>{const vr={marginBottom:`${lr.padding||20}px`};switch(lr.type){case"heading":return jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold",style:{...vr,color:g.font_color_h1||"#FFFFFF"},children:lr.text||"Heading Example"},cr);case"subheading":return jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold",style:{...vr,color:g.font_color_h2||"#E5E5E5"},children:lr.text||"Subheading Example"},cr);case"subsubheading":return jsxRuntimeExports.jsx("h3",{className:"text-xl font-medium",style:{...vr,color:g.font_color_h3||"#CCCCCC"},children:lr.text||"Supporting Header"},cr);case"paragraph":return jsxRuntimeExports.jsx("p",{className:"text-lg max-w-2xl mx-auto",style:{...vr,color:g.font_color_p||"#DDDDDD"},children:lr.text||"Your paragraph will appear here."},cr);case"button":return jsxRuntimeExports.jsx("div",{style:vr,children:jsxRuntimeExports.jsx("a",{href:lr.url||"#",className:"inline-block bg-black text-white px-6 py-3 rounded-lg shadow hover:bg-[#F285C3] transition",children:lr.text||"Click Here"})},cr);default:return null}}):jsxRuntimeExports.jsx("p",{className:"text-gray-400 italic",children:"Start adding sections to preview your landing page..."})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-center sm:text-left mt-8",children:[jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-green text-black px-6 py-3 rounded-lg shadow hover:bg-green transition mx-auto sm:mx-0",children:"Save Changes"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center sm:items-end mt-4 sm:mt-0",children:[jsxRuntimeExports.jsx("a",{href:g.username?`https://${g.username}.cre8tlystudio.com`:"#",target:"_blank",rel:"noopener noreferrer",className:`${g.username?"text-white font-semibold underline hover:text-blue":"text-gray-400 cursor-not-allowed"}`,children:g.username?"View Live Page":"Set Username to View Page"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Live URL:"," ",jsxRuntimeExports.jsx("span",{className:"text-blue font-medium",children:g.username?`https://${g.username}.cre8tlystudio.com`:"Not set"})]})]})]})]})]})})}const AnimatedRoutes=()=>{const it=useLocation();return jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsxs(Routes,{location:it,children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(App,{})})}),jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/canvas-editor",element:jsxRuntimeExports.jsx(CanvasEditor,{})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DashboardSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/prompts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(PromptMemoryDashboard,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/notifications",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Inbox,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/thank-you",element:jsxRuntimeExports.jsx(ThankYou,{})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"/shop",element:jsxRuntimeExports.jsx(EbooksStore,{})}),jsxRuntimeExports.jsx(Route,{path:"/books",element:jsxRuntimeExports.jsx(BooksDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy-policy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"/refund-policy",element:jsxRuntimeExports.jsx(Refund,{})}),jsxRuntimeExports.jsx(Route,{path:"/cookie-policy",element:jsxRuntimeExports.jsx(Cookie,{})}),jsxRuntimeExports.jsx(Route,{path:"/prompt",element:jsxRuntimeExports.jsx(PromptPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/sign-up",element:jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/forgot-password",element:jsxRuntimeExports.jsx(ForgotPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/plans",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(PlansPage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/landing-page-builder",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingPageBuilder,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(CustomerDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(PrivateRoute,{role:"admin",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(AdminDashboard,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/debug",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},style:{backgroundColor:"#030712",color:"#fff",minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:"Debug Test Page"})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]},it.pathname)})},RootApp=()=>{const{maintenance:it,loading:g}=useMaintenance();return g?null:it?jsxRuntimeExports.jsx(MaintenanceScreen,{}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProviderWithRouter,{children:jsxRuntimeExports.jsx(BookProvider,{children:jsxRuntimeExports.jsxs(MagnetProvider,{children:[jsxRuntimeExports.jsx(Lt,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx(AnimatedRoutes,{})]})})})})},container=document.getElementById("root"),root=createRoot(container);root.render(jsxRuntimeExports.jsx(RootApp,{}));
