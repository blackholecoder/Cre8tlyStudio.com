var dC=Object.defineProperty;var uC=(et,dt,$t)=>dt in et?dC(et,dt,{enumerable:!0,configurable:!0,writable:!0,value:$t}):et[dt]=$t;var Es=(et,dt,$t)=>(uC(et,typeof dt!="symbol"?dt+"":dt,$t),$t),H2=(et,dt,$t)=>{if(!dt.has(et))throw TypeError("Cannot "+$t)};var ar=(et,dt,$t)=>(H2(et,dt,"read from private field"),$t?$t.call(et):dt.get(et)),yr=(et,dt,$t)=>{if(dt.has(et))throw TypeError("Cannot add the same private member more than once");dt instanceof WeakSet?dt.add(et):dt.set(et,$t)},vr=(et,dt,$t,kt)=>(H2(et,dt,"write to private field"),kt?kt.call(et,$t):dt.set(et,$t),$t);var ga=(et,dt,$t,kt)=>({set _(Tt){vr(et,dt,Tt,$t)},get _(){return ar(et,dt,kt)}}),Br=(et,dt,$t)=>(H2(et,dt,"access private method"),$t);function _mergeNamespaces(et,dt){for(var $t=0;$t<dt.length;$t++){const kt=dt[$t];if(typeof kt!="string"&&!Array.isArray(kt)){for(const Tt in kt)if(Tt!=="default"&&!(Tt in et)){const Dt=Object.getOwnPropertyDescriptor(kt,Tt);Dt&&Object.defineProperty(et,Tt,Dt.get?Dt:{enumerable:!0,get:()=>kt[Tt]})}}}return Object.freeze(Object.defineProperty(et,Symbol.toStringTag,{value:"Module"}))}(function(){const dt=document.createElement("link").relList;if(dt&&dt.supports&&dt.supports("modulepreload"))return;for(const Tt of document.querySelectorAll('link[rel="modulepreload"]'))kt(Tt);new MutationObserver(Tt=>{for(const Dt of Tt)if(Dt.type==="childList")for(const Ft of Dt.addedNodes)Ft.tagName==="LINK"&&Ft.rel==="modulepreload"&&kt(Ft)}).observe(document,{childList:!0,subtree:!0});function $t(Tt){const Dt={};return Tt.integrity&&(Dt.integrity=Tt.integrity),Tt.referrerPolicy&&(Dt.referrerPolicy=Tt.referrerPolicy),Tt.crossOrigin==="use-credentials"?Dt.credentials="include":Tt.crossOrigin==="anonymous"?Dt.credentials="omit":Dt.credentials="same-origin",Dt}function kt(Tt){if(Tt.ep)return;Tt.ep=!0;const Dt=$t(Tt);fetch(Tt.href,Dt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(et){return et&&et.__esModule&&Object.prototype.hasOwnProperty.call(et,"default")?et.default:et}function getAugmentedNamespace(et){if(et.__esModule)return et;var dt=et.default;if(typeof dt=="function"){var $t=function kt(){return this instanceof kt?Reflect.construct(dt,arguments,this.constructor):dt.apply(this,arguments)};$t.prototype=dt.prototype}else $t={};return Object.defineProperty($t,"__esModule",{value:!0}),Object.keys(et).forEach(function(kt){var Tt=Object.getOwnPropertyDescriptor(et,kt);Object.defineProperty($t,kt,Tt.get?Tt:{enumerable:!0,get:function(){return et[kt]}})}),$t}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$4=Symbol.for("react.portal"),p$6=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$4=Symbol.for("react.profiler"),t$4=Symbol.for("react.provider"),u$6=Symbol.for("react.context"),v$6=Symbol.for("react.forward_ref"),w$8=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$5=Symbol.for("react.lazy"),z$8=Symbol.iterator;function A$8(et){return et===null||typeof et!="object"?null:(et=z$8&&et[z$8]||et["@@iterator"],typeof et=="function"?et:null)}var B$6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$9=Object.assign,D$5={};function E$8(et,dt,$t){this.props=et,this.context=dt,this.refs=D$5,this.updater=$t||B$6}E$8.prototype.isReactComponent={};E$8.prototype.setState=function(et,dt){if(typeof et!="object"&&typeof et!="function"&&et!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,et,dt,"setState")};E$8.prototype.forceUpdate=function(et){this.updater.enqueueForceUpdate(this,et,"forceUpdate")};function F$4(){}F$4.prototype=E$8.prototype;function G$4(et,dt,$t){this.props=et,this.context=dt,this.refs=D$5,this.updater=$t||B$6}var H$3=G$4.prototype=new F$4;H$3.constructor=G$4;C$9(H$3,E$8.prototype);H$3.isPureReactComponent=!0;var I$5=Array.isArray,J$3=Object.prototype.hasOwnProperty,K$5={current:null},L$a={key:!0,ref:!0,__self:!0,__source:!0};function M$7(et,dt,$t){var kt,Tt={},Dt=null,Ft=null;if(dt!=null)for(kt in dt.ref!==void 0&&(Ft=dt.ref),dt.key!==void 0&&(Dt=""+dt.key),dt)J$3.call(dt,kt)&&!L$a.hasOwnProperty(kt)&&(Tt[kt]=dt[kt]);var Ut=arguments.length-2;if(Ut===1)Tt.children=$t;else if(1<Ut){for(var Ht=Array(Ut),Kt=0;Kt<Ut;Kt++)Ht[Kt]=arguments[Kt+2];Tt.children=Ht}if(et&&et.defaultProps)for(kt in Ut=et.defaultProps,Ut)Tt[kt]===void 0&&(Tt[kt]=Ut[kt]);return{$$typeof:l$3,type:et,key:Dt,ref:Ft,props:Tt,_owner:K$5.current}}function N$4(et,dt){return{$$typeof:l$3,type:et.type,key:dt,ref:et.ref,props:et.props,_owner:et._owner}}function O$8(et){return typeof et=="object"&&et!==null&&et.$$typeof===l$3}function escape$1(et){var dt={"=":"=0",":":"=2"};return"$"+et.replace(/[=:]/g,function($t){return dt[$t]})}var P$7=/\/+/g;function Q$5(et,dt){return typeof et=="object"&&et!==null&&et.key!=null?escape$1(""+et.key):dt.toString(36)}function R$5(et,dt,$t,kt,Tt){var Dt=typeof et;(Dt==="undefined"||Dt==="boolean")&&(et=null);var Ft=!1;if(et===null)Ft=!0;else switch(Dt){case"string":case"number":Ft=!0;break;case"object":switch(et.$$typeof){case l$3:case n$4:Ft=!0}}if(Ft)return Ft=et,Tt=Tt(Ft),et=kt===""?"."+Q$5(Ft,0):kt,I$5(Tt)?($t="",et!=null&&($t=et.replace(P$7,"$&/")+"/"),R$5(Tt,dt,$t,"",function(Kt){return Kt})):Tt!=null&&(O$8(Tt)&&(Tt=N$4(Tt,$t+(!Tt.key||Ft&&Ft.key===Tt.key?"":(""+Tt.key).replace(P$7,"$&/")+"/")+et)),dt.push(Tt)),1;if(Ft=0,kt=kt===""?".":kt+":",I$5(et))for(var Ut=0;Ut<et.length;Ut++){Dt=et[Ut];var Ht=kt+Q$5(Dt,Ut);Ft+=R$5(Dt,dt,$t,Ht,Tt)}else if(Ht=A$8(et),typeof Ht=="function")for(et=Ht.call(et),Ut=0;!(Dt=et.next()).done;)Dt=Dt.value,Ht=kt+Q$5(Dt,Ut++),Ft+=R$5(Dt,dt,$t,Ht,Tt);else if(Dt==="object")throw dt=String(et),Error("Objects are not valid as a React child (found: "+(dt==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":dt)+"). If you meant to render a collection of children, use an array instead.");return Ft}function S$5(et,dt,$t){if(et==null)return et;var kt=[],Tt=0;return R$5(et,kt,"","",function(Dt){return dt.call($t,Dt,Tt++)}),kt}function T$6(et){if(et._status===-1){var dt=et._result;dt=dt(),dt.then(function($t){(et._status===0||et._status===-1)&&(et._status=1,et._result=$t)},function($t){(et._status===0||et._status===-1)&&(et._status=2,et._result=$t)}),et._status===-1&&(et._status=0,et._result=dt)}if(et._status===1)return et._result.default;throw et._result}var U$6={current:null},V$4={transition:null},W$9={ReactCurrentDispatcher:U$6,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$5};function X$8(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$5,forEach:function(et,dt,$t){S$5(et,function(){dt.apply(this,arguments)},$t)},count:function(et){var dt=0;return S$5(et,function(){dt++}),dt},toArray:function(et){return S$5(et,function(dt){return dt})||[]},only:function(et){if(!O$8(et))throw Error("React.Children.only expected to receive a single React element child.");return et}};react_production_min.Component=E$8;react_production_min.Fragment=p$6;react_production_min.Profiler=r$4;react_production_min.PureComponent=G$4;react_production_min.StrictMode=q$5;react_production_min.Suspense=w$8;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$9;react_production_min.act=X$8;react_production_min.cloneElement=function(et,dt,$t){if(et==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+et+".");var kt=C$9({},et.props),Tt=et.key,Dt=et.ref,Ft=et._owner;if(dt!=null){if(dt.ref!==void 0&&(Dt=dt.ref,Ft=K$5.current),dt.key!==void 0&&(Tt=""+dt.key),et.type&&et.type.defaultProps)var Ut=et.type.defaultProps;for(Ht in dt)J$3.call(dt,Ht)&&!L$a.hasOwnProperty(Ht)&&(kt[Ht]=dt[Ht]===void 0&&Ut!==void 0?Ut[Ht]:dt[Ht])}var Ht=arguments.length-2;if(Ht===1)kt.children=$t;else if(1<Ht){Ut=Array(Ht);for(var Kt=0;Kt<Ht;Kt++)Ut[Kt]=arguments[Kt+2];kt.children=Ut}return{$$typeof:l$3,type:et.type,key:Tt,ref:Dt,props:kt,_owner:Ft}};react_production_min.createContext=function(et){return et={$$typeof:u$6,_currentValue:et,_currentValue2:et,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},et.Provider={$$typeof:t$4,_context:et},et.Consumer=et};react_production_min.createElement=M$7;react_production_min.createFactory=function(et){var dt=M$7.bind(null,et);return dt.type=et,dt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(et){return{$$typeof:v$6,render:et}};react_production_min.isValidElement=O$8;react_production_min.lazy=function(et){return{$$typeof:y$5,_payload:{_status:-1,_result:et},_init:T$6}};react_production_min.memo=function(et,dt){return{$$typeof:x$2,type:et,compare:dt===void 0?null:dt}};react_production_min.startTransition=function(et){var dt=V$4.transition;V$4.transition={};try{et()}finally{V$4.transition=dt}};react_production_min.unstable_act=X$8;react_production_min.useCallback=function(et,dt){return U$6.current.useCallback(et,dt)};react_production_min.useContext=function(et){return U$6.current.useContext(et)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(et){return U$6.current.useDeferredValue(et)};react_production_min.useEffect=function(et,dt){return U$6.current.useEffect(et,dt)};react_production_min.useId=function(){return U$6.current.useId()};react_production_min.useImperativeHandle=function(et,dt,$t){return U$6.current.useImperativeHandle(et,dt,$t)};react_production_min.useInsertionEffect=function(et,dt){return U$6.current.useInsertionEffect(et,dt)};react_production_min.useLayoutEffect=function(et,dt){return U$6.current.useLayoutEffect(et,dt)};react_production_min.useMemo=function(et,dt){return U$6.current.useMemo(et,dt)};react_production_min.useReducer=function(et,dt,$t){return U$6.current.useReducer(et,dt,$t)};react_production_min.useRef=function(et){return U$6.current.useRef(et)};react_production_min.useState=function(et){return U$6.current.useState(et)};react_production_min.useSyncExternalStore=function(et,dt,$t){return U$6.current.useSyncExternalStore(et,dt,$t)};react_production_min.useTransition=function(){return U$6.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React$2=getDefaultExportFromCjs(reactExports),t$3=_mergeNamespaces({__proto__:null,default:React$2},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$5=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$3=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$4(et,dt,$t){var kt,Tt={},Dt=null,Ft=null;$t!==void 0&&(Dt=""+$t),dt.key!==void 0&&(Dt=""+dt.key),dt.ref!==void 0&&(Ft=dt.ref);for(kt in dt)m$4.call(dt,kt)&&!p$5.hasOwnProperty(kt)&&(Tt[kt]=dt[kt]);if(et&&et.defaultProps)for(kt in dt=et.defaultProps,dt)Tt[kt]===void 0&&(Tt[kt]=dt[kt]);return{$$typeof:k$5,type:et,key:Dt,ref:Ft,props:Tt,_owner:n$3.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(et){function dt(br,wr){var zr=br.length;br.push(wr);e:for(;0<zr;){var Hr=zr-1>>>1,Yr=br[Hr];if(0<Tt(Yr,wr))br[Hr]=wr,br[zr]=Yr,zr=Hr;else break e}}function $t(br){return br.length===0?null:br[0]}function kt(br){if(br.length===0)return null;var wr=br[0],zr=br.pop();if(zr!==wr){br[0]=zr;e:for(var Hr=0,Yr=br.length,es=Yr>>>1;Hr<es;){var rs=2*(Hr+1)-1,Wr=br[rs],Xr=rs+1,ns=br[Xr];if(0>Tt(Wr,zr))Xr<Yr&&0>Tt(ns,Wr)?(br[Hr]=ns,br[Xr]=zr,Hr=Xr):(br[Hr]=Wr,br[rs]=zr,Hr=rs);else if(Xr<Yr&&0>Tt(ns,zr))br[Hr]=ns,br[Xr]=zr,Hr=Xr;else break e}}return wr}function Tt(br,wr){var zr=br.sortIndex-wr.sortIndex;return zr!==0?zr:br.id-wr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Dt=performance;et.unstable_now=function(){return Dt.now()}}else{var Ft=Date,Ut=Ft.now();et.unstable_now=function(){return Ft.now()-Ut}}var Ht=[],Kt=[],Yt=1,Jt=null,Zt=3,er=!1,rr=!1,sr=!1,nr=typeof setTimeout=="function"?setTimeout:null,ir=typeof clearTimeout=="function"?clearTimeout:null,or=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function lr(br){for(var wr=$t(Kt);wr!==null;){if(wr.callback===null)kt(Kt);else if(wr.startTime<=br)kt(Kt),wr.sortIndex=wr.expirationTime,dt(Ht,wr);else break;wr=$t(Kt)}}function cr(br){if(sr=!1,lr(br),!rr)if($t(Ht)!==null)rr=!0,_r(dr);else{var wr=$t(Kt);wr!==null&&Pr(cr,wr.startTime-br)}}function dr(br,wr){rr=!1,sr&&(sr=!1,ir(mr),mr=-1),er=!0;var zr=Zt;try{for(lr(wr),Jt=$t(Ht);Jt!==null&&(!(Jt.expirationTime>wr)||br&&!xr());){var Hr=Jt.callback;if(typeof Hr=="function"){Jt.callback=null,Zt=Jt.priorityLevel;var Yr=Hr(Jt.expirationTime<=wr);wr=et.unstable_now(),typeof Yr=="function"?Jt.callback=Yr:Jt===$t(Ht)&&kt(Ht),lr(wr)}else kt(Ht);Jt=$t(Ht)}if(Jt!==null)var es=!0;else{var rs=$t(Kt);rs!==null&&Pr(cr,rs.startTime-wr),es=!1}return es}finally{Jt=null,Zt=zr,er=!1}}var ur=!1,pr=null,mr=-1,jr=5,Rr=-1;function xr(){return!(et.unstable_now()-Rr<jr)}function kr(){if(pr!==null){var br=et.unstable_now();Rr=br;var wr=!0;try{wr=pr(!0,br)}finally{wr?Mr():(ur=!1,pr=null)}}else ur=!1}var Mr;if(typeof or=="function")Mr=function(){or(kr)};else if(typeof MessageChannel<"u"){var Tr=new MessageChannel,Or=Tr.port2;Tr.port1.onmessage=kr,Mr=function(){Or.postMessage(null)}}else Mr=function(){nr(kr,0)};function _r(br){pr=br,ur||(ur=!0,Mr())}function Pr(br,wr){mr=nr(function(){br(et.unstable_now())},wr)}et.unstable_IdlePriority=5,et.unstable_ImmediatePriority=1,et.unstable_LowPriority=4,et.unstable_NormalPriority=3,et.unstable_Profiling=null,et.unstable_UserBlockingPriority=2,et.unstable_cancelCallback=function(br){br.callback=null},et.unstable_continueExecution=function(){rr||er||(rr=!0,_r(dr))},et.unstable_forceFrameRate=function(br){0>br||125<br?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):jr=0<br?Math.floor(1e3/br):5},et.unstable_getCurrentPriorityLevel=function(){return Zt},et.unstable_getFirstCallbackNode=function(){return $t(Ht)},et.unstable_next=function(br){switch(Zt){case 1:case 2:case 3:var wr=3;break;default:wr=Zt}var zr=Zt;Zt=wr;try{return br()}finally{Zt=zr}},et.unstable_pauseExecution=function(){},et.unstable_requestPaint=function(){},et.unstable_runWithPriority=function(br,wr){switch(br){case 1:case 2:case 3:case 4:case 5:break;default:br=3}var zr=Zt;Zt=br;try{return wr()}finally{Zt=zr}},et.unstable_scheduleCallback=function(br,wr,zr){var Hr=et.unstable_now();switch(typeof zr=="object"&&zr!==null?(zr=zr.delay,zr=typeof zr=="number"&&0<zr?Hr+zr:Hr):zr=Hr,br){case 1:var Yr=-1;break;case 2:Yr=250;break;case 5:Yr=1073741823;break;case 4:Yr=1e4;break;default:Yr=5e3}return Yr=zr+Yr,br={id:Yt++,callback:wr,priorityLevel:br,startTime:zr,expirationTime:Yr,sortIndex:-1},zr>Hr?(br.sortIndex=zr,dt(Kt,br),$t(Ht)===null&&br===$t(Kt)&&(sr?(ir(mr),mr=-1):sr=!0,Pr(cr,zr-Hr))):(br.sortIndex=Yr,dt(Ht,br),rr||er||(rr=!0,_r(dr))),br},et.unstable_shouldYield=xr,et.unstable_wrapCallback=function(br){var wr=Zt;return function(){var zr=Zt;Zt=wr;try{return br.apply(this,arguments)}finally{Zt=zr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$4(et){for(var dt="https://reactjs.org/docs/error-decoder.html?invariant="+et,$t=1;$t<arguments.length;$t++)dt+="&args[]="+encodeURIComponent(arguments[$t]);return"Minified React error #"+et+"; visit "+dt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(et,dt){ha(et,dt),ha(et+"Capture",dt)}function ha(et,dt){for(ea[et]=dt,et=0;et<dt.length;et++)da.add(dt[et])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(et){return ja.call(ma,et)?!0:ja.call(la,et)?!1:ka.test(et)?ma[et]=!0:(la[et]=!0,!1)}function pa(et,dt,$t,kt){if($t!==null&&$t.type===0)return!1;switch(typeof dt){case"function":case"symbol":return!0;case"boolean":return kt?!1:$t!==null?!$t.acceptsBooleans:(et=et.toLowerCase().slice(0,5),et!=="data-"&&et!=="aria-");default:return!1}}function qa(et,dt,$t,kt){if(dt===null||typeof dt>"u"||pa(et,dt,$t,kt))return!0;if(kt)return!1;if($t!==null)switch($t.type){case 3:return!dt;case 4:return dt===!1;case 5:return isNaN(dt);case 6:return isNaN(dt)||1>dt}return!1}function v$5(et,dt,$t,kt,Tt,Dt,Ft){this.acceptsBooleans=dt===2||dt===3||dt===4,this.attributeName=kt,this.attributeNamespace=Tt,this.mustUseProperty=$t,this.propertyName=et,this.type=dt,this.sanitizeURL=Dt,this.removeEmptyString=Ft}var z$7={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(et){z$7[et]=new v$5(et,0,!1,et,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(et){var dt=et[0];z$7[dt]=new v$5(dt,1,!1,et[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(et){z$7[et]=new v$5(et,2,!1,et.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(et){z$7[et]=new v$5(et,2,!1,et,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(et){z$7[et]=new v$5(et,3,!1,et.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(et){z$7[et]=new v$5(et,3,!0,et,null,!1,!1)});["capture","download"].forEach(function(et){z$7[et]=new v$5(et,4,!1,et,null,!1,!1)});["cols","rows","size","span"].forEach(function(et){z$7[et]=new v$5(et,6,!1,et,null,!1,!1)});["rowSpan","start"].forEach(function(et){z$7[et]=new v$5(et,5,!1,et.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(et){return et[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(et){var dt=et.replace(ra,sa);z$7[dt]=new v$5(dt,1,!1,et,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(et){var dt=et.replace(ra,sa);z$7[dt]=new v$5(dt,1,!1,et,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(et){var dt=et.replace(ra,sa);z$7[dt]=new v$5(dt,1,!1,et,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(et){z$7[et]=new v$5(et,1,!1,et.toLowerCase(),null,!1,!1)});z$7.xlinkHref=new v$5("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(et){z$7[et]=new v$5(et,1,!1,et.toLowerCase(),null,!0,!0)});function ta$1(et,dt,$t,kt){var Tt=z$7.hasOwnProperty(dt)?z$7[dt]:null;(Tt!==null?Tt.type!==0:kt||!(2<dt.length)||dt[0]!=="o"&&dt[0]!=="O"||dt[1]!=="n"&&dt[1]!=="N")&&(qa(dt,$t,Tt,kt)&&($t=null),kt||Tt===null?oa(dt)&&($t===null?et.removeAttribute(dt):et.setAttribute(dt,""+$t)):Tt.mustUseProperty?et[Tt.propertyName]=$t===null?Tt.type===3?!1:"":$t:(dt=Tt.attributeName,kt=Tt.attributeNamespace,$t===null?et.removeAttribute(dt):(Tt=Tt.type,$t=Tt===3||Tt===4&&$t===!0?"":""+$t,kt?et.setAttributeNS(kt,dt,$t):et.setAttribute(dt,$t))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(et){return et===null||typeof et!="object"?null:(et=Ja&&et[Ja]||et["@@iterator"],typeof et=="function"?et:null)}var A$7=Object.assign,La;function Ma(et){if(La===void 0)try{throw Error()}catch($t){var dt=$t.stack.trim().match(/\n( *(at )?)/);La=dt&&dt[1]||""}return`
`+La+et}var Na=!1;function Oa(et,dt){if(!et||Na)return"";Na=!0;var $t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(dt)if(dt=function(){throw Error()},Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Kt){var kt=Kt}Reflect.construct(et,[],dt)}else{try{dt.call()}catch(Kt){kt=Kt}et.call(dt.prototype)}else{try{throw Error()}catch(Kt){kt=Kt}et()}}catch(Kt){if(Kt&&kt&&typeof Kt.stack=="string"){for(var Tt=Kt.stack.split(`
`),Dt=kt.stack.split(`
`),Ft=Tt.length-1,Ut=Dt.length-1;1<=Ft&&0<=Ut&&Tt[Ft]!==Dt[Ut];)Ut--;for(;1<=Ft&&0<=Ut;Ft--,Ut--)if(Tt[Ft]!==Dt[Ut]){if(Ft!==1||Ut!==1)do if(Ft--,Ut--,0>Ut||Tt[Ft]!==Dt[Ut]){var Ht=`
`+Tt[Ft].replace(" at new "," at ");return et.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",et.displayName)),Ht}while(1<=Ft&&0<=Ut);break}}}finally{Na=!1,Error.prepareStackTrace=$t}return(et=et?et.displayName||et.name:"")?Ma(et):""}function Pa(et){switch(et.tag){case 5:return Ma(et.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return et=Oa(et.type,!1),et;case 11:return et=Oa(et.type.render,!1),et;case 1:return et=Oa(et.type,!0),et;default:return""}}function Qa(et){if(et==null)return null;if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et;switch(et){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof et=="object")switch(et.$$typeof){case Ca:return(et.displayName||"Context")+".Consumer";case Ba:return(et._context.displayName||"Context")+".Provider";case Da:var dt=et.render;return et=et.displayName,et||(et=dt.displayName||dt.name||"",et=et!==""?"ForwardRef("+et+")":"ForwardRef"),et;case Ga:return dt=et.displayName||null,dt!==null?dt:Qa(et.type)||"Memo";case Ha:dt=et._payload,et=et._init;try{return Qa(et(dt))}catch{}}return null}function Ra(et){var dt=et.type;switch(et.tag){case 24:return"Cache";case 9:return(dt.displayName||"Context")+".Consumer";case 10:return(dt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return et=dt.render,et=et.displayName||et.name||"",dt.displayName||(et!==""?"ForwardRef("+et+")":"ForwardRef");case 7:return"Fragment";case 5:return dt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(dt);case 8:return dt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof dt=="function")return dt.displayName||dt.name||null;if(typeof dt=="string")return dt}return null}function Sa(et){switch(typeof et){case"boolean":case"number":case"string":case"undefined":return et;case"object":return et;default:return""}}function Ta(et){var dt=et.type;return(et=et.nodeName)&&et.toLowerCase()==="input"&&(dt==="checkbox"||dt==="radio")}function Ua(et){var dt=Ta(et)?"checked":"value",$t=Object.getOwnPropertyDescriptor(et.constructor.prototype,dt),kt=""+et[dt];if(!et.hasOwnProperty(dt)&&typeof $t<"u"&&typeof $t.get=="function"&&typeof $t.set=="function"){var Tt=$t.get,Dt=$t.set;return Object.defineProperty(et,dt,{configurable:!0,get:function(){return Tt.call(this)},set:function(Ft){kt=""+Ft,Dt.call(this,Ft)}}),Object.defineProperty(et,dt,{enumerable:$t.enumerable}),{getValue:function(){return kt},setValue:function(Ft){kt=""+Ft},stopTracking:function(){et._valueTracker=null,delete et[dt]}}}}function Va(et){et._valueTracker||(et._valueTracker=Ua(et))}function Wa(et){if(!et)return!1;var dt=et._valueTracker;if(!dt)return!0;var $t=dt.getValue(),kt="";return et&&(kt=Ta(et)?et.checked?"true":"false":et.value),et=kt,et!==$t?(dt.setValue(et),!0):!1}function Xa(et){if(et=et||(typeof document<"u"?document:void 0),typeof et>"u")return null;try{return et.activeElement||et.body}catch{return et.body}}function Ya(et,dt){var $t=dt.checked;return A$7({},dt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:$t??et._wrapperState.initialChecked})}function Za(et,dt){var $t=dt.defaultValue==null?"":dt.defaultValue,kt=dt.checked!=null?dt.checked:dt.defaultChecked;$t=Sa(dt.value!=null?dt.value:$t),et._wrapperState={initialChecked:kt,initialValue:$t,controlled:dt.type==="checkbox"||dt.type==="radio"?dt.checked!=null:dt.value!=null}}function ab(et,dt){dt=dt.checked,dt!=null&&ta$1(et,"checked",dt,!1)}function bb(et,dt){ab(et,dt);var $t=Sa(dt.value),kt=dt.type;if($t!=null)kt==="number"?($t===0&&et.value===""||et.value!=$t)&&(et.value=""+$t):et.value!==""+$t&&(et.value=""+$t);else if(kt==="submit"||kt==="reset"){et.removeAttribute("value");return}dt.hasOwnProperty("value")?cb(et,dt.type,$t):dt.hasOwnProperty("defaultValue")&&cb(et,dt.type,Sa(dt.defaultValue)),dt.checked==null&&dt.defaultChecked!=null&&(et.defaultChecked=!!dt.defaultChecked)}function db(et,dt,$t){if(dt.hasOwnProperty("value")||dt.hasOwnProperty("defaultValue")){var kt=dt.type;if(!(kt!=="submit"&&kt!=="reset"||dt.value!==void 0&&dt.value!==null))return;dt=""+et._wrapperState.initialValue,$t||dt===et.value||(et.value=dt),et.defaultValue=dt}$t=et.name,$t!==""&&(et.name=""),et.defaultChecked=!!et._wrapperState.initialChecked,$t!==""&&(et.name=$t)}function cb(et,dt,$t){(dt!=="number"||Xa(et.ownerDocument)!==et)&&($t==null?et.defaultValue=""+et._wrapperState.initialValue:et.defaultValue!==""+$t&&(et.defaultValue=""+$t))}var eb=Array.isArray;function fb(et,dt,$t,kt){if(et=et.options,dt){dt={};for(var Tt=0;Tt<$t.length;Tt++)dt["$"+$t[Tt]]=!0;for($t=0;$t<et.length;$t++)Tt=dt.hasOwnProperty("$"+et[$t].value),et[$t].selected!==Tt&&(et[$t].selected=Tt),Tt&&kt&&(et[$t].defaultSelected=!0)}else{for($t=""+Sa($t),dt=null,Tt=0;Tt<et.length;Tt++){if(et[Tt].value===$t){et[Tt].selected=!0,kt&&(et[Tt].defaultSelected=!0);return}dt!==null||et[Tt].disabled||(dt=et[Tt])}dt!==null&&(dt.selected=!0)}}function gb(et,dt){if(dt.dangerouslySetInnerHTML!=null)throw Error(p$4(91));return A$7({},dt,{value:void 0,defaultValue:void 0,children:""+et._wrapperState.initialValue})}function hb(et,dt){var $t=dt.value;if($t==null){if($t=dt.children,dt=dt.defaultValue,$t!=null){if(dt!=null)throw Error(p$4(92));if(eb($t)){if(1<$t.length)throw Error(p$4(93));$t=$t[0]}dt=$t}dt==null&&(dt=""),$t=dt}et._wrapperState={initialValue:Sa($t)}}function ib(et,dt){var $t=Sa(dt.value),kt=Sa(dt.defaultValue);$t!=null&&($t=""+$t,$t!==et.value&&(et.value=$t),dt.defaultValue==null&&et.defaultValue!==$t&&(et.defaultValue=$t)),kt!=null&&(et.defaultValue=""+kt)}function jb(et){var dt=et.textContent;dt===et._wrapperState.initialValue&&dt!==""&&dt!==null&&(et.value=dt)}function kb(et){switch(et){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(et,dt){return et==null||et==="http://www.w3.org/1999/xhtml"?kb(dt):et==="http://www.w3.org/2000/svg"&&dt==="foreignObject"?"http://www.w3.org/1999/xhtml":et}var mb,nb=function(et){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(dt,$t,kt,Tt){MSApp.execUnsafeLocalFunction(function(){return et(dt,$t,kt,Tt)})}:et}(function(et,dt){if(et.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in et)et.innerHTML=dt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+dt.valueOf().toString()+"</svg>",dt=mb.firstChild;et.firstChild;)et.removeChild(et.firstChild);for(;dt.firstChild;)et.appendChild(dt.firstChild)}});function ob(et,dt){if(dt){var $t=et.firstChild;if($t&&$t===et.lastChild&&$t.nodeType===3){$t.nodeValue=dt;return}}et.textContent=dt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(et){qb.forEach(function(dt){dt=dt+et.charAt(0).toUpperCase()+et.substring(1),pb[dt]=pb[et]})});function rb(et,dt,$t){return dt==null||typeof dt=="boolean"||dt===""?"":$t||typeof dt!="number"||dt===0||pb.hasOwnProperty(et)&&pb[et]?(""+dt).trim():dt+"px"}function sb(et,dt){et=et.style;for(var $t in dt)if(dt.hasOwnProperty($t)){var kt=$t.indexOf("--")===0,Tt=rb($t,dt[$t],kt);$t==="float"&&($t="cssFloat"),kt?et.setProperty($t,Tt):et[$t]=Tt}}var tb=A$7({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(et,dt){if(dt){if(tb[et]&&(dt.children!=null||dt.dangerouslySetInnerHTML!=null))throw Error(p$4(137,et));if(dt.dangerouslySetInnerHTML!=null){if(dt.children!=null)throw Error(p$4(60));if(typeof dt.dangerouslySetInnerHTML!="object"||!("__html"in dt.dangerouslySetInnerHTML))throw Error(p$4(61))}if(dt.style!=null&&typeof dt.style!="object")throw Error(p$4(62))}}function vb(et,dt){if(et.indexOf("-")===-1)return typeof dt.is=="string";switch(et){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(et){return et=et.target||et.srcElement||window,et.correspondingUseElement&&(et=et.correspondingUseElement),et.nodeType===3?et.parentNode:et}var yb=null,zb=null,Ab=null;function Bb(et){if(et=Cb(et)){if(typeof yb!="function")throw Error(p$4(280));var dt=et.stateNode;dt&&(dt=Db(dt),yb(et.stateNode,et.type,dt))}}function Eb(et){zb?Ab?Ab.push(et):Ab=[et]:zb=et}function Fb(){if(zb){var et=zb,dt=Ab;if(Ab=zb=null,Bb(et),dt)for(et=0;et<dt.length;et++)Bb(dt[et])}}function Gb(et,dt){return et(dt)}function Hb(){}var Ib=!1;function Jb(et,dt,$t){if(Ib)return et(dt,$t);Ib=!0;try{return Gb(et,dt,$t)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(et,dt){var $t=et.stateNode;if($t===null)return null;var kt=Db($t);if(kt===null)return null;$t=kt[dt];e:switch(dt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(kt=!kt.disabled)||(et=et.type,kt=!(et==="button"||et==="input"||et==="select"||et==="textarea")),et=!kt;break e;default:et=!1}if(et)return null;if($t&&typeof $t!="function")throw Error(p$4(231,dt,typeof $t));return $t}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){var Kt=Array.prototype.slice.call(arguments,3);try{dt.apply($t,Kt)}catch(Yt){this.onError(Yt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(et){Ob=!0,Pb=et}};function Tb(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){if(Tb.apply(this,arguments),Ob){if(Ob){var Kt=Pb;Ob=!1,Pb=null}else throw Error(p$4(198));Qb||(Qb=!0,Rb=Kt)}}function Vb(et){var dt=et,$t=et;if(et.alternate)for(;dt.return;)dt=dt.return;else{et=dt;do dt=et,dt.flags&4098&&($t=dt.return),et=dt.return;while(et)}return dt.tag===3?$t:null}function Wb(et){if(et.tag===13){var dt=et.memoizedState;if(dt===null&&(et=et.alternate,et!==null&&(dt=et.memoizedState)),dt!==null)return dt.dehydrated}return null}function Xb(et){if(Vb(et)!==et)throw Error(p$4(188))}function Yb(et){var dt=et.alternate;if(!dt){if(dt=Vb(et),dt===null)throw Error(p$4(188));return dt!==et?null:et}for(var $t=et,kt=dt;;){var Tt=$t.return;if(Tt===null)break;var Dt=Tt.alternate;if(Dt===null){if(kt=Tt.return,kt!==null){$t=kt;continue}break}if(Tt.child===Dt.child){for(Dt=Tt.child;Dt;){if(Dt===$t)return Xb(Tt),et;if(Dt===kt)return Xb(Tt),dt;Dt=Dt.sibling}throw Error(p$4(188))}if($t.return!==kt.return)$t=Tt,kt=Dt;else{for(var Ft=!1,Ut=Tt.child;Ut;){if(Ut===$t){Ft=!0,$t=Tt,kt=Dt;break}if(Ut===kt){Ft=!0,kt=Tt,$t=Dt;break}Ut=Ut.sibling}if(!Ft){for(Ut=Dt.child;Ut;){if(Ut===$t){Ft=!0,$t=Dt,kt=Tt;break}if(Ut===kt){Ft=!0,kt=Dt,$t=Tt;break}Ut=Ut.sibling}if(!Ft)throw Error(p$4(189))}}if($t.alternate!==kt)throw Error(p$4(190))}if($t.tag!==3)throw Error(p$4(188));return $t.stateNode.current===$t?et:dt}function Zb(et){return et=Yb(et),et!==null?$b(et):null}function $b(et){if(et.tag===5||et.tag===6)return et;for(et=et.child;et!==null;){var dt=$b(et);if(dt!==null)return dt;et=et.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$5=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(et){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,et,void 0,(et.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(et){return et>>>=0,et===0?32:31-(pc(et)/qc|0)|0}var rc=64,sc=4194304;function tc(et){switch(et&-et){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return et&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return et}}function uc(et,dt){var $t=et.pendingLanes;if($t===0)return 0;var kt=0,Tt=et.suspendedLanes,Dt=et.pingedLanes,Ft=$t&268435455;if(Ft!==0){var Ut=Ft&~Tt;Ut!==0?kt=tc(Ut):(Dt&=Ft,Dt!==0&&(kt=tc(Dt)))}else Ft=$t&~Tt,Ft!==0?kt=tc(Ft):Dt!==0&&(kt=tc(Dt));if(kt===0)return 0;if(dt!==0&&dt!==kt&&!(dt&Tt)&&(Tt=kt&-kt,Dt=dt&-dt,Tt>=Dt||Tt===16&&(Dt&4194240)!==0))return dt;if(kt&4&&(kt|=$t&16),dt=et.entangledLanes,dt!==0)for(et=et.entanglements,dt&=kt;0<dt;)$t=31-oc(dt),Tt=1<<$t,kt|=et[$t],dt&=~Tt;return kt}function vc(et,dt){switch(et){case 1:case 2:case 4:return dt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return dt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(et,dt){for(var $t=et.suspendedLanes,kt=et.pingedLanes,Tt=et.expirationTimes,Dt=et.pendingLanes;0<Dt;){var Ft=31-oc(Dt),Ut=1<<Ft,Ht=Tt[Ft];Ht===-1?(!(Ut&$t)||Ut&kt)&&(Tt[Ft]=vc(Ut,dt)):Ht<=dt&&(et.expiredLanes|=Ut),Dt&=~Ut}}function xc(et){return et=et.pendingLanes&-1073741825,et!==0?et:et&1073741824?1073741824:0}function yc(){var et=rc;return rc<<=1,!(rc&4194240)&&(rc=64),et}function zc(et){for(var dt=[],$t=0;31>$t;$t++)dt.push(et);return dt}function Ac(et,dt,$t){et.pendingLanes|=dt,dt!==536870912&&(et.suspendedLanes=0,et.pingedLanes=0),et=et.eventTimes,dt=31-oc(dt),et[dt]=$t}function Bc(et,dt){var $t=et.pendingLanes&~dt;et.pendingLanes=dt,et.suspendedLanes=0,et.pingedLanes=0,et.expiredLanes&=dt,et.mutableReadLanes&=dt,et.entangledLanes&=dt,dt=et.entanglements;var kt=et.eventTimes;for(et=et.expirationTimes;0<$t;){var Tt=31-oc($t),Dt=1<<Tt;dt[Tt]=0,kt[Tt]=-1,et[Tt]=-1,$t&=~Dt}}function Cc(et,dt){var $t=et.entangledLanes|=dt;for(et=et.entanglements;$t;){var kt=31-oc($t),Tt=1<<kt;Tt&dt|et[kt]&dt&&(et[kt]|=dt),$t&=~Tt}}var C$8=0;function Dc(et){return et&=-et,1<et?4<et?et&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(et,dt){switch(et){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(dt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(dt.pointerId)}}function Tc(et,dt,$t,kt,Tt,Dt){return et===null||et.nativeEvent!==Dt?(et={blockedOn:dt,domEventName:$t,eventSystemFlags:kt,nativeEvent:Dt,targetContainers:[Tt]},dt!==null&&(dt=Cb(dt),dt!==null&&Fc(dt)),et):(et.eventSystemFlags|=kt,dt=et.targetContainers,Tt!==null&&dt.indexOf(Tt)===-1&&dt.push(Tt),et)}function Uc(et,dt,$t,kt,Tt){switch(dt){case"focusin":return Lc=Tc(Lc,et,dt,$t,kt,Tt),!0;case"dragenter":return Mc=Tc(Mc,et,dt,$t,kt,Tt),!0;case"mouseover":return Nc=Tc(Nc,et,dt,$t,kt,Tt),!0;case"pointerover":var Dt=Tt.pointerId;return Oc.set(Dt,Tc(Oc.get(Dt)||null,et,dt,$t,kt,Tt)),!0;case"gotpointercapture":return Dt=Tt.pointerId,Pc.set(Dt,Tc(Pc.get(Dt)||null,et,dt,$t,kt,Tt)),!0}return!1}function Vc(et){var dt=Wc(et.target);if(dt!==null){var $t=Vb(dt);if($t!==null){if(dt=$t.tag,dt===13){if(dt=Wb($t),dt!==null){et.blockedOn=dt,Ic(et.priority,function(){Gc($t)});return}}else if(dt===3&&$t.stateNode.current.memoizedState.isDehydrated){et.blockedOn=$t.tag===3?$t.stateNode.containerInfo:null;return}}}et.blockedOn=null}function Xc(et){if(et.blockedOn!==null)return!1;for(var dt=et.targetContainers;0<dt.length;){var $t=Yc(et.domEventName,et.eventSystemFlags,dt[0],et.nativeEvent);if($t===null){$t=et.nativeEvent;var kt=new $t.constructor($t.type,$t);wb=kt,$t.target.dispatchEvent(kt),wb=null}else return dt=Cb($t),dt!==null&&Fc(dt),et.blockedOn=$t,!1;dt.shift()}return!0}function Zc(et,dt,$t){Xc(et)&&$t.delete(dt)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(et,dt){et.blockedOn===dt&&(et.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(et){function dt(Tt){return ad(Tt,et)}if(0<Kc.length){ad(Kc[0],et);for(var $t=1;$t<Kc.length;$t++){var kt=Kc[$t];kt.blockedOn===et&&(kt.blockedOn=null)}}for(Lc!==null&&ad(Lc,et),Mc!==null&&ad(Mc,et),Nc!==null&&ad(Nc,et),Oc.forEach(dt),Pc.forEach(dt),$t=0;$t<Qc.length;$t++)kt=Qc[$t],kt.blockedOn===et&&(kt.blockedOn=null);for(;0<Qc.length&&($t=Qc[0],$t.blockedOn===null);)Vc($t),$t.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(et,dt,$t,kt){var Tt=C$8,Dt=cd.transition;cd.transition=null;try{C$8=1,fd(et,dt,$t,kt)}finally{C$8=Tt,cd.transition=Dt}}function gd(et,dt,$t,kt){var Tt=C$8,Dt=cd.transition;cd.transition=null;try{C$8=4,fd(et,dt,$t,kt)}finally{C$8=Tt,cd.transition=Dt}}function fd(et,dt,$t,kt){if(dd){var Tt=Yc(et,dt,$t,kt);if(Tt===null)hd(et,dt,kt,id$2,$t),Sc(et,kt);else if(Uc(Tt,et,dt,$t,kt))kt.stopPropagation();else if(Sc(et,kt),dt&4&&-1<Rc.indexOf(et)){for(;Tt!==null;){var Dt=Cb(Tt);if(Dt!==null&&Ec(Dt),Dt=Yc(et,dt,$t,kt),Dt===null&&hd(et,dt,kt,id$2,$t),Dt===Tt)break;Tt=Dt}Tt!==null&&kt.stopPropagation()}else hd(et,dt,kt,null,$t)}}var id$2=null;function Yc(et,dt,$t,kt){if(id$2=null,et=xb(kt),et=Wc(et),et!==null)if(dt=Vb(et),dt===null)et=null;else if($t=dt.tag,$t===13){if(et=Wb(dt),et!==null)return et;et=null}else if($t===3){if(dt.stateNode.current.memoizedState.isDehydrated)return dt.tag===3?dt.stateNode.containerInfo:null;et=null}else dt!==et&&(et=null);return id$2=et,null}function jd(et){switch(et){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var et,dt=ld,$t=dt.length,kt,Tt="value"in kd?kd.value:kd.textContent,Dt=Tt.length;for(et=0;et<$t&&dt[et]===Tt[et];et++);var Ft=$t-et;for(kt=1;kt<=Ft&&dt[$t-kt]===Tt[Dt-kt];kt++);return md=Tt.slice(et,1<kt?1-kt:void 0)}function od(et){var dt=et.keyCode;return"charCode"in et?(et=et.charCode,et===0&&dt===13&&(et=13)):et=dt,et===10&&(et=13),32<=et||et===13?et:0}function pd(){return!0}function qd(){return!1}function rd(et){function dt($t,kt,Tt,Dt,Ft){this._reactName=$t,this._targetInst=Tt,this.type=kt,this.nativeEvent=Dt,this.target=Ft,this.currentTarget=null;for(var Ut in et)et.hasOwnProperty(Ut)&&($t=et[Ut],this[Ut]=$t?$t(Dt):Dt[Ut]);return this.isDefaultPrevented=(Dt.defaultPrevented!=null?Dt.defaultPrevented:Dt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$7(dt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var $t=this.nativeEvent;$t&&($t.preventDefault?$t.preventDefault():typeof $t.returnValue!="unknown"&&($t.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var $t=this.nativeEvent;$t&&($t.stopPropagation?$t.stopPropagation():typeof $t.cancelBubble!="unknown"&&($t.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),dt}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(et){return et.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$7({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$7({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(et){return et.relatedTarget===void 0?et.fromElement===et.srcElement?et.toElement:et.fromElement:et.relatedTarget},movementX:function(et){return"movementX"in et?et.movementX:(et!==yd&&(yd&&et.type==="mousemove"?(wd=et.screenX-yd.screenX,xd=et.screenY-yd.screenY):xd=wd=0,yd=et),wd)},movementY:function(et){return"movementY"in et?et.movementY:xd}}),Bd=rd(Ad),Cd=A$7({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$7({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$7({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$7({},sd,{clipboardData:function(et){return"clipboardData"in et?et.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$7({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(et){var dt=this.nativeEvent;return dt.getModifierState?dt.getModifierState(et):(et=Od[et])?!!dt[et]:!1}function zd(){return Pd}var Qd=A$7({},ud,{key:function(et){if(et.key){var dt=Md[et.key]||et.key;if(dt!=="Unidentified")return dt}return et.type==="keypress"?(et=od(et),et===13?"Enter":String.fromCharCode(et)):et.type==="keydown"||et.type==="keyup"?Nd[et.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(et){return et.type==="keypress"?od(et):0},keyCode:function(et){return et.type==="keydown"||et.type==="keyup"?et.keyCode:0},which:function(et){return et.type==="keypress"?od(et):et.type==="keydown"||et.type==="keyup"?et.keyCode:0}}),Rd=rd(Qd),Sd=A$7({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$7({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$7({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$7({},Ad,{deltaX:function(et){return"deltaX"in et?et.deltaX:"wheelDeltaX"in et?-et.wheelDeltaX:0},deltaY:function(et){return"deltaY"in et?et.deltaY:"wheelDeltaY"in et?-et.wheelDeltaY:"wheelDelta"in et?-et.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$2=ia&&"TextEvent"in window&&!be$2,de$3=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$1=String.fromCharCode(32),fe$3=!1;function ge$2(et,dt){switch(et){case"keyup":return $d.indexOf(dt.keyCode)!==-1;case"keydown":return dt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(et){return et=et.detail,typeof et=="object"&&"data"in et?et.data:null}var ie$3=!1;function je$1(et,dt){switch(et){case"compositionend":return he$2(dt);case"keypress":return dt.which!==32?null:(fe$3=!0,ee$1);case"textInput":return et=dt.data,et===ee$1&&fe$3?null:et;default:return null}}function ke$2(et,dt){if(ie$3)return et==="compositionend"||!ae$2&&ge$2(et,dt)?(et=nd(),md=ld=kd=null,ie$3=!1,et):null;switch(et){case"paste":return null;case"keypress":if(!(dt.ctrlKey||dt.altKey||dt.metaKey)||dt.ctrlKey&&dt.altKey){if(dt.char&&1<dt.char.length)return dt.char;if(dt.which)return String.fromCharCode(dt.which)}return null;case"compositionend":return de$3&&dt.locale!=="ko"?null:dt.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$3(et){var dt=et&&et.nodeName&&et.nodeName.toLowerCase();return dt==="input"?!!le$2[et.type]:dt==="textarea"}function ne$2(et,dt,$t,kt){Eb(kt),dt=oe$1(dt,"onChange"),0<dt.length&&($t=new td("onChange","change",null,$t,kt),et.push({event:$t,listeners:dt}))}var pe$2=null,qe$1=null;function re$2(et){se$2(et,0)}function te$2(et){var dt=ue$3(et);if(Wa(dt))return et}function ve$2(et,dt){if(et==="change")return dt}var we$1=!1;if(ia){var xe$1;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$2=typeof ze$2.oninput=="function"}xe$1=ye$2}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$2&&(pe$2.detachEvent("onpropertychange",Be$1),qe$1=pe$2=null)}function Be$1(et){if(et.propertyName==="value"&&te$2(qe$1)){var dt=[];ne$2(dt,qe$1,et,xb(et)),Jb(re$2,dt)}}function Ce$2(et,dt,$t){et==="focusin"?(Ae$2(),pe$2=dt,qe$1=$t,pe$2.attachEvent("onpropertychange",Be$1)):et==="focusout"&&Ae$2()}function De$3(et){if(et==="selectionchange"||et==="keyup"||et==="keydown")return te$2(qe$1)}function Ee$1(et,dt){if(et==="click")return te$2(dt)}function Fe$3(et,dt){if(et==="input"||et==="change")return te$2(dt)}function Ge$1(et,dt){return et===dt&&(et!==0||1/et===1/dt)||et!==et&&dt!==dt}var He$3=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(et,dt){if(He$3(et,dt))return!0;if(typeof et!="object"||et===null||typeof dt!="object"||dt===null)return!1;var $t=Object.keys(et),kt=Object.keys(dt);if($t.length!==kt.length)return!1;for(kt=0;kt<$t.length;kt++){var Tt=$t[kt];if(!ja.call(dt,Tt)||!He$3(et[Tt],dt[Tt]))return!1}return!0}function Je$1(et){for(;et&&et.firstChild;)et=et.firstChild;return et}function Ke$1(et,dt){var $t=Je$1(et);et=0;for(var kt;$t;){if($t.nodeType===3){if(kt=et+$t.textContent.length,et<=dt&&kt>=dt)return{node:$t,offset:dt-et};et=kt}e:{for(;$t;){if($t.nextSibling){$t=$t.nextSibling;break e}$t=$t.parentNode}$t=void 0}$t=Je$1($t)}}function Le$2(et,dt){return et&&dt?et===dt?!0:et&&et.nodeType===3?!1:dt&&dt.nodeType===3?Le$2(et,dt.parentNode):"contains"in et?et.contains(dt):et.compareDocumentPosition?!!(et.compareDocumentPosition(dt)&16):!1:!1}function Me$2(){for(var et=window,dt=Xa();dt instanceof et.HTMLIFrameElement;){try{var $t=typeof dt.contentWindow.location.href=="string"}catch{$t=!1}if($t)et=dt.contentWindow;else break;dt=Xa(et.document)}return dt}function Ne(et){var dt=et&&et.nodeName&&et.nodeName.toLowerCase();return dt&&(dt==="input"&&(et.type==="text"||et.type==="search"||et.type==="tel"||et.type==="url"||et.type==="password")||dt==="textarea"||et.contentEditable==="true")}function Oe$1(et){var dt=Me$2(),$t=et.focusedElem,kt=et.selectionRange;if(dt!==$t&&$t&&$t.ownerDocument&&Le$2($t.ownerDocument.documentElement,$t)){if(kt!==null&&Ne($t)){if(dt=kt.start,et=kt.end,et===void 0&&(et=dt),"selectionStart"in $t)$t.selectionStart=dt,$t.selectionEnd=Math.min(et,$t.value.length);else if(et=(dt=$t.ownerDocument||document)&&dt.defaultView||window,et.getSelection){et=et.getSelection();var Tt=$t.textContent.length,Dt=Math.min(kt.start,Tt);kt=kt.end===void 0?Dt:Math.min(kt.end,Tt),!et.extend&&Dt>kt&&(Tt=kt,kt=Dt,Dt=Tt),Tt=Ke$1($t,Dt);var Ft=Ke$1($t,kt);Tt&&Ft&&(et.rangeCount!==1||et.anchorNode!==Tt.node||et.anchorOffset!==Tt.offset||et.focusNode!==Ft.node||et.focusOffset!==Ft.offset)&&(dt=dt.createRange(),dt.setStart(Tt.node,Tt.offset),et.removeAllRanges(),Dt>kt?(et.addRange(dt),et.extend(Ft.node,Ft.offset)):(dt.setEnd(Ft.node,Ft.offset),et.addRange(dt)))}}for(dt=[],et=$t;et=et.parentNode;)et.nodeType===1&&dt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof $t.focus=="function"&&$t.focus(),$t=0;$t<dt.length;$t++)et=dt[$t],et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}var Pe$2=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$2=null,Se$2=null,Te$3=!1;function Ue$1(et,dt,$t){var kt=$t.window===$t?$t.document:$t.nodeType===9?$t:$t.ownerDocument;Te$3||Qe$1==null||Qe$1!==Xa(kt)||(kt=Qe$1,"selectionStart"in kt&&Ne(kt)?kt={start:kt.selectionStart,end:kt.selectionEnd}:(kt=(kt.ownerDocument&&kt.ownerDocument.defaultView||window).getSelection(),kt={anchorNode:kt.anchorNode,anchorOffset:kt.anchorOffset,focusNode:kt.focusNode,focusOffset:kt.focusOffset}),Se$2&&Ie$2(Se$2,kt)||(Se$2=kt,kt=oe$1(Re$2,"onSelect"),0<kt.length&&(dt=new td("onSelect","select",null,dt,$t),et.push({event:dt,listeners:kt}),dt.target=Qe$1)))}function Ve$2(et,dt){var $t={};return $t[et.toLowerCase()]=dt.toLowerCase(),$t["Webkit"+et]="webkit"+dt,$t["Moz"+et]="moz"+dt,$t}var We$2={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$2={},Ye$2={};ia&&(Ye$2=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze(et){if(Xe$2[et])return Xe$2[et];if(!We$2[et])return et;var dt=We$2[et],$t;for($t in dt)if(dt.hasOwnProperty($t)&&$t in Ye$2)return Xe$2[et]=dt[$t];return et}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(et,dt){df.set(et,dt),fa(dt,[et])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(et,dt,$t){var kt=et.type||"unknown-event";et.currentTarget=$t,Ub(kt,dt,void 0,et),et.currentTarget=null}function se$2(et,dt){dt=(dt&4)!==0;for(var $t=0;$t<et.length;$t++){var kt=et[$t],Tt=kt.event;kt=kt.listeners;e:{var Dt=void 0;if(dt)for(var Ft=kt.length-1;0<=Ft;Ft--){var Ut=kt[Ft],Ht=Ut.instance,Kt=Ut.currentTarget;if(Ut=Ut.listener,Ht!==Dt&&Tt.isPropagationStopped())break e;nf(Tt,Ut,Kt),Dt=Ht}else for(Ft=0;Ft<kt.length;Ft++){if(Ut=kt[Ft],Ht=Ut.instance,Kt=Ut.currentTarget,Ut=Ut.listener,Ht!==Dt&&Tt.isPropagationStopped())break e;nf(Tt,Ut,Kt),Dt=Ht}}}if(Qb)throw et=Rb,Qb=!1,Rb=null,et}function D$4(et,dt){var $t=dt[of];$t===void 0&&($t=dt[of]=new Set);var kt=et+"__bubble";$t.has(kt)||(pf(dt,et,2,!1),$t.add(kt))}function qf(et,dt,$t){var kt=0;dt&&(kt|=4),pf($t,et,kt,dt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(et){if(!et[rf]){et[rf]=!0,da.forEach(function($t){$t!=="selectionchange"&&(mf.has($t)||qf($t,!1,et),qf($t,!0,et))});var dt=et.nodeType===9?et:et.ownerDocument;dt===null||dt[rf]||(dt[rf]=!0,qf("selectionchange",!1,dt))}}function pf(et,dt,$t,kt){switch(jd(dt)){case 1:var Tt=ed;break;case 4:Tt=gd;break;default:Tt=fd}$t=Tt.bind(null,dt,$t,et),Tt=void 0,!Lb||dt!=="touchstart"&&dt!=="touchmove"&&dt!=="wheel"||(Tt=!0),kt?Tt!==void 0?et.addEventListener(dt,$t,{capture:!0,passive:Tt}):et.addEventListener(dt,$t,!0):Tt!==void 0?et.addEventListener(dt,$t,{passive:Tt}):et.addEventListener(dt,$t,!1)}function hd(et,dt,$t,kt,Tt){var Dt=kt;if(!(dt&1)&&!(dt&2)&&kt!==null)e:for(;;){if(kt===null)return;var Ft=kt.tag;if(Ft===3||Ft===4){var Ut=kt.stateNode.containerInfo;if(Ut===Tt||Ut.nodeType===8&&Ut.parentNode===Tt)break;if(Ft===4)for(Ft=kt.return;Ft!==null;){var Ht=Ft.tag;if((Ht===3||Ht===4)&&(Ht=Ft.stateNode.containerInfo,Ht===Tt||Ht.nodeType===8&&Ht.parentNode===Tt))return;Ft=Ft.return}for(;Ut!==null;){if(Ft=Wc(Ut),Ft===null)return;if(Ht=Ft.tag,Ht===5||Ht===6){kt=Dt=Ft;continue e}Ut=Ut.parentNode}}kt=kt.return}Jb(function(){var Kt=Dt,Yt=xb($t),Jt=[];e:{var Zt=df.get(et);if(Zt!==void 0){var er=td,rr=et;switch(et){case"keypress":if(od($t)===0)break e;case"keydown":case"keyup":er=Rd;break;case"focusin":rr="focus",er=Fd;break;case"focusout":rr="blur",er=Fd;break;case"beforeblur":case"afterblur":er=Fd;break;case"click":if($t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":er=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":er=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":er=Vd;break;case $e$1:case af:case bf:er=Hd;break;case cf:er=Xd;break;case"scroll":er=vd;break;case"wheel":er=Zd;break;case"copy":case"cut":case"paste":er=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":er=Td}var sr=(dt&4)!==0,nr=!sr&&et==="scroll",ir=sr?Zt!==null?Zt+"Capture":null:Zt;sr=[];for(var or=Kt,lr;or!==null;){lr=or;var cr=lr.stateNode;if(lr.tag===5&&cr!==null&&(lr=cr,ir!==null&&(cr=Kb(or,ir),cr!=null&&sr.push(tf(or,cr,lr)))),nr)break;or=or.return}0<sr.length&&(Zt=new er(Zt,rr,null,$t,Yt),Jt.push({event:Zt,listeners:sr}))}}if(!(dt&7)){e:{if(Zt=et==="mouseover"||et==="pointerover",er=et==="mouseout"||et==="pointerout",Zt&&$t!==wb&&(rr=$t.relatedTarget||$t.fromElement)&&(Wc(rr)||rr[uf]))break e;if((er||Zt)&&(Zt=Yt.window===Yt?Yt:(Zt=Yt.ownerDocument)?Zt.defaultView||Zt.parentWindow:window,er?(rr=$t.relatedTarget||$t.toElement,er=Kt,rr=rr?Wc(rr):null,rr!==null&&(nr=Vb(rr),rr!==nr||rr.tag!==5&&rr.tag!==6)&&(rr=null)):(er=null,rr=Kt),er!==rr)){if(sr=Bd,cr="onMouseLeave",ir="onMouseEnter",or="mouse",(et==="pointerout"||et==="pointerover")&&(sr=Td,cr="onPointerLeave",ir="onPointerEnter",or="pointer"),nr=er==null?Zt:ue$3(er),lr=rr==null?Zt:ue$3(rr),Zt=new sr(cr,or+"leave",er,$t,Yt),Zt.target=nr,Zt.relatedTarget=lr,cr=null,Wc(Yt)===Kt&&(sr=new sr(ir,or+"enter",rr,$t,Yt),sr.target=lr,sr.relatedTarget=nr,cr=sr),nr=cr,er&&rr)t:{for(sr=er,ir=rr,or=0,lr=sr;lr;lr=vf(lr))or++;for(lr=0,cr=ir;cr;cr=vf(cr))lr++;for(;0<or-lr;)sr=vf(sr),or--;for(;0<lr-or;)ir=vf(ir),lr--;for(;or--;){if(sr===ir||ir!==null&&sr===ir.alternate)break t;sr=vf(sr),ir=vf(ir)}sr=null}else sr=null;er!==null&&wf(Jt,Zt,er,sr,!1),rr!==null&&nr!==null&&wf(Jt,nr,rr,sr,!0)}}e:{if(Zt=Kt?ue$3(Kt):window,er=Zt.nodeName&&Zt.nodeName.toLowerCase(),er==="select"||er==="input"&&Zt.type==="file")var dr=ve$2;else if(me$3(Zt))if(we$1)dr=Fe$3;else{dr=De$3;var ur=Ce$2}else(er=Zt.nodeName)&&er.toLowerCase()==="input"&&(Zt.type==="checkbox"||Zt.type==="radio")&&(dr=Ee$1);if(dr&&(dr=dr(et,Kt))){ne$2(Jt,dr,$t,Yt);break e}ur&&ur(et,Zt,Kt),et==="focusout"&&(ur=Zt._wrapperState)&&ur.controlled&&Zt.type==="number"&&cb(Zt,"number",Zt.value)}switch(ur=Kt?ue$3(Kt):window,et){case"focusin":(me$3(ur)||ur.contentEditable==="true")&&(Qe$1=ur,Re$2=Kt,Se$2=null);break;case"focusout":Se$2=Re$2=Qe$1=null;break;case"mousedown":Te$3=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$3=!1,Ue$1(Jt,$t,Yt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$1(Jt,$t,Yt)}var pr;if(ae$2)e:{switch(et){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else ie$3?ge$2(et,$t)&&(mr="onCompositionEnd"):et==="keydown"&&$t.keyCode===229&&(mr="onCompositionStart");mr&&(de$3&&$t.locale!=="ko"&&(ie$3||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&ie$3&&(pr=nd()):(kd=Yt,ld="value"in kd?kd.value:kd.textContent,ie$3=!0)),ur=oe$1(Kt,mr),0<ur.length&&(mr=new Ld(mr,et,null,$t,Yt),Jt.push({event:mr,listeners:ur}),pr?mr.data=pr:(pr=he$2($t),pr!==null&&(mr.data=pr)))),(pr=ce$2?je$1(et,$t):ke$2(et,$t))&&(Kt=oe$1(Kt,"onBeforeInput"),0<Kt.length&&(Yt=new Ld("onBeforeInput","beforeinput",null,$t,Yt),Jt.push({event:Yt,listeners:Kt}),Yt.data=pr))}se$2(Jt,dt)})}function tf(et,dt,$t){return{instance:et,listener:dt,currentTarget:$t}}function oe$1(et,dt){for(var $t=dt+"Capture",kt=[];et!==null;){var Tt=et,Dt=Tt.stateNode;Tt.tag===5&&Dt!==null&&(Tt=Dt,Dt=Kb(et,$t),Dt!=null&&kt.unshift(tf(et,Dt,Tt)),Dt=Kb(et,dt),Dt!=null&&kt.push(tf(et,Dt,Tt))),et=et.return}return kt}function vf(et){if(et===null)return null;do et=et.return;while(et&&et.tag!==5);return et||null}function wf(et,dt,$t,kt,Tt){for(var Dt=dt._reactName,Ft=[];$t!==null&&$t!==kt;){var Ut=$t,Ht=Ut.alternate,Kt=Ut.stateNode;if(Ht!==null&&Ht===kt)break;Ut.tag===5&&Kt!==null&&(Ut=Kt,Tt?(Ht=Kb($t,Dt),Ht!=null&&Ft.unshift(tf($t,Ht,Ut))):Tt||(Ht=Kb($t,Dt),Ht!=null&&Ft.push(tf($t,Ht,Ut)))),$t=$t.return}Ft.length!==0&&et.push({event:dt,listeners:Ft})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(et){return(typeof et=="string"?et:""+et).replace(xf,`
`).replace(yf,"")}function Af(et,dt,$t){if(dt=zf(dt),zf(et)!==dt&&$t)throw Error(p$4(425))}function Bf(){}var Cf=null,Df=null;function Ef(et,dt){return et==="textarea"||et==="noscript"||typeof dt.children=="string"||typeof dt.children=="number"||typeof dt.dangerouslySetInnerHTML=="object"&&dt.dangerouslySetInnerHTML!==null&&dt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(et){return Hf.resolve(null).then(et).catch(If)}:Ff;function If(et){setTimeout(function(){throw et})}function Kf(et,dt){var $t=dt,kt=0;do{var Tt=$t.nextSibling;if(et.removeChild($t),Tt&&Tt.nodeType===8)if($t=Tt.data,$t==="/$"){if(kt===0){et.removeChild(Tt),bd(dt);return}kt--}else $t!=="$"&&$t!=="$?"&&$t!=="$!"||kt++;$t=Tt}while($t);bd(dt)}function Lf(et){for(;et!=null;et=et.nextSibling){var dt=et.nodeType;if(dt===1||dt===3)break;if(dt===8){if(dt=et.data,dt==="$"||dt==="$!"||dt==="$?")break;if(dt==="/$")return null}}return et}function Mf(et){et=et.previousSibling;for(var dt=0;et;){if(et.nodeType===8){var $t=et.data;if($t==="$"||$t==="$!"||$t==="$?"){if(dt===0)return et;dt--}else $t==="/$"&&dt++}et=et.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(et){var dt=et[Of];if(dt)return dt;for(var $t=et.parentNode;$t;){if(dt=$t[uf]||$t[Of]){if($t=dt.alternate,dt.child!==null||$t!==null&&$t.child!==null)for(et=Mf(et);et!==null;){if($t=et[Of])return $t;et=Mf(et)}return dt}et=$t,$t=et.parentNode}return null}function Cb(et){return et=et[Of]||et[uf],!et||et.tag!==5&&et.tag!==6&&et.tag!==13&&et.tag!==3?null:et}function ue$3(et){if(et.tag===5||et.tag===6)return et.stateNode;throw Error(p$4(33))}function Db(et){return et[Pf]||null}var Sf=[],Tf=-1;function Uf(et){return{current:et}}function E$7(et){0>Tf||(et.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$3(et,dt){Tf++,Sf[Tf]=et.current,et.current=dt}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(et,dt){var $t=et.type.contextTypes;if(!$t)return Vf;var kt=et.stateNode;if(kt&&kt.__reactInternalMemoizedUnmaskedChildContext===dt)return kt.__reactInternalMemoizedMaskedChildContext;var Tt={},Dt;for(Dt in $t)Tt[Dt]=dt[Dt];return kt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=dt,et.__reactInternalMemoizedMaskedChildContext=Tt),Tt}function Zf(et){return et=et.childContextTypes,et!=null}function $f(){E$7(Wf),E$7(H$2)}function ag(et,dt,$t){if(H$2.current!==Vf)throw Error(p$4(168));G$3(H$2,dt),G$3(Wf,$t)}function bg(et,dt,$t){var kt=et.stateNode;if(dt=dt.childContextTypes,typeof kt.getChildContext!="function")return $t;kt=kt.getChildContext();for(var Tt in kt)if(!(Tt in dt))throw Error(p$4(108,Ra(et)||"Unknown",Tt));return A$7({},$t,kt)}function cg(et){return et=(et=et.stateNode)&&et.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$3(H$2,et),G$3(Wf,Wf.current),!0}function dg(et,dt,$t){var kt=et.stateNode;if(!kt)throw Error(p$4(169));$t?(et=bg(et,dt,Xf),kt.__reactInternalMemoizedMergedChildContext=et,E$7(Wf),E$7(H$2),G$3(H$2,et)):E$7(Wf),G$3(Wf,$t)}var eg=null,fg=!1,gg=!1;function hg(et){eg===null?eg=[et]:eg.push(et)}function ig(et){fg=!0,hg(et)}function jg(){if(!gg&&eg!==null){gg=!0;var et=0,dt=C$8;try{var $t=eg;for(C$8=1;et<$t.length;et++){var kt=$t[et];do kt=kt(!0);while(kt!==null)}eg=null,fg=!1}catch(Tt){throw eg!==null&&(eg=eg.slice(et+1)),ac(fc,jg),Tt}finally{C$8=dt,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(et,dt){kg[lg++]=ng,kg[lg++]=mg,mg=et,ng=dt}function ug(et,dt,$t){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=et;var kt=rg;et=sg;var Tt=32-oc(kt)-1;kt&=~(1<<Tt),$t+=1;var Dt=32-oc(dt)+Tt;if(30<Dt){var Ft=Tt-Tt%5;Dt=(kt&(1<<Ft)-1).toString(32),kt>>=Ft,Tt-=Ft,rg=1<<32-oc(dt)+Tt|$t<<Tt|kt,sg=Dt+et}else rg=1<<Dt|$t<<Tt|kt,sg=et}function vg(et){et.return!==null&&(tg(et,1),ug(et,1,0))}function wg(et){for(;et===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;et===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(et,dt){var $t=Bg(5,null,null,0);$t.elementType="DELETED",$t.stateNode=dt,$t.return=et,dt=et.deletions,dt===null?(et.deletions=[$t],et.flags|=16):dt.push($t)}function Cg(et,dt){switch(et.tag){case 5:var $t=et.type;return dt=dt.nodeType!==1||$t.toLowerCase()!==dt.nodeName.toLowerCase()?null:dt,dt!==null?(et.stateNode=dt,xg=et,yg=Lf(dt.firstChild),!0):!1;case 6:return dt=et.pendingProps===""||dt.nodeType!==3?null:dt,dt!==null?(et.stateNode=dt,xg=et,yg=null,!0):!1;case 13:return dt=dt.nodeType!==8?null:dt,dt!==null?($t=qg!==null?{id:rg,overflow:sg}:null,et.memoizedState={dehydrated:dt,treeContext:$t,retryLane:1073741824},$t=Bg(18,null,null,0),$t.stateNode=dt,$t.return=et,et.child=$t,xg=et,yg=null,!0):!1;default:return!1}}function Dg(et){return(et.mode&1)!==0&&(et.flags&128)===0}function Eg(et){if(I$4){var dt=yg;if(dt){var $t=dt;if(!Cg(et,dt)){if(Dg(et))throw Error(p$4(418));dt=Lf($t.nextSibling);var kt=xg;dt&&Cg(et,dt)?Ag(kt,$t):(et.flags=et.flags&-4097|2,I$4=!1,xg=et)}}else{if(Dg(et))throw Error(p$4(418));et.flags=et.flags&-4097|2,I$4=!1,xg=et}}}function Fg(et){for(et=et.return;et!==null&&et.tag!==5&&et.tag!==3&&et.tag!==13;)et=et.return;xg=et}function Gg(et){if(et!==xg)return!1;if(!I$4)return Fg(et),I$4=!0,!1;var dt;if((dt=et.tag!==3)&&!(dt=et.tag!==5)&&(dt=et.type,dt=dt!=="head"&&dt!=="body"&&!Ef(et.type,et.memoizedProps)),dt&&(dt=yg)){if(Dg(et))throw Hg(),Error(p$4(418));for(;dt;)Ag(et,dt),dt=Lf(dt.nextSibling)}if(Fg(et),et.tag===13){if(et=et.memoizedState,et=et!==null?et.dehydrated:null,!et)throw Error(p$4(317));e:{for(et=et.nextSibling,dt=0;et;){if(et.nodeType===8){var $t=et.data;if($t==="/$"){if(dt===0){yg=Lf(et.nextSibling);break e}dt--}else $t!=="$"&&$t!=="$!"&&$t!=="$?"||dt++}et=et.nextSibling}yg=null}}else yg=xg?Lf(et.stateNode.nextSibling):null;return!0}function Hg(){for(var et=yg;et;)et=Lf(et.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(et){zg===null?zg=[et]:zg.push(et)}var Kg=ua.ReactCurrentBatchConfig;function Lg(et,dt,$t){if(et=$t.ref,et!==null&&typeof et!="function"&&typeof et!="object"){if($t._owner){if($t=$t._owner,$t){if($t.tag!==1)throw Error(p$4(309));var kt=$t.stateNode}if(!kt)throw Error(p$4(147,et));var Tt=kt,Dt=""+et;return dt!==null&&dt.ref!==null&&typeof dt.ref=="function"&&dt.ref._stringRef===Dt?dt.ref:(dt=function(Ft){var Ut=Tt.refs;Ft===null?delete Ut[Dt]:Ut[Dt]=Ft},dt._stringRef=Dt,dt)}if(typeof et!="string")throw Error(p$4(284));if(!$t._owner)throw Error(p$4(290,et))}return et}function Mg(et,dt){throw et=Object.prototype.toString.call(dt),Error(p$4(31,et==="[object Object]"?"object with keys {"+Object.keys(dt).join(", ")+"}":et))}function Ng(et){var dt=et._init;return dt(et._payload)}function Og(et){function dt(ir,or){if(et){var lr=ir.deletions;lr===null?(ir.deletions=[or],ir.flags|=16):lr.push(or)}}function $t(ir,or){if(!et)return null;for(;or!==null;)dt(ir,or),or=or.sibling;return null}function kt(ir,or){for(ir=new Map;or!==null;)or.key!==null?ir.set(or.key,or):ir.set(or.index,or),or=or.sibling;return ir}function Tt(ir,or){return ir=Pg(ir,or),ir.index=0,ir.sibling=null,ir}function Dt(ir,or,lr){return ir.index=lr,et?(lr=ir.alternate,lr!==null?(lr=lr.index,lr<or?(ir.flags|=2,or):lr):(ir.flags|=2,or)):(ir.flags|=1048576,or)}function Ft(ir){return et&&ir.alternate===null&&(ir.flags|=2),ir}function Ut(ir,or,lr,cr){return or===null||or.tag!==6?(or=Qg(lr,ir.mode,cr),or.return=ir,or):(or=Tt(or,lr),or.return=ir,or)}function Ht(ir,or,lr,cr){var dr=lr.type;return dr===ya?Yt(ir,or,lr.props.children,cr,lr.key):or!==null&&(or.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===Ha&&Ng(dr)===or.type)?(cr=Tt(or,lr.props),cr.ref=Lg(ir,or,lr),cr.return=ir,cr):(cr=Rg(lr.type,lr.key,lr.props,null,ir.mode,cr),cr.ref=Lg(ir,or,lr),cr.return=ir,cr)}function Kt(ir,or,lr,cr){return or===null||or.tag!==4||or.stateNode.containerInfo!==lr.containerInfo||or.stateNode.implementation!==lr.implementation?(or=Sg(lr,ir.mode,cr),or.return=ir,or):(or=Tt(or,lr.children||[]),or.return=ir,or)}function Yt(ir,or,lr,cr,dr){return or===null||or.tag!==7?(or=Tg(lr,ir.mode,cr,dr),or.return=ir,or):(or=Tt(or,lr),or.return=ir,or)}function Jt(ir,or,lr){if(typeof or=="string"&&or!==""||typeof or=="number")return or=Qg(""+or,ir.mode,lr),or.return=ir,or;if(typeof or=="object"&&or!==null){switch(or.$$typeof){case va:return lr=Rg(or.type,or.key,or.props,null,ir.mode,lr),lr.ref=Lg(ir,null,or),lr.return=ir,lr;case wa:return or=Sg(or,ir.mode,lr),or.return=ir,or;case Ha:var cr=or._init;return Jt(ir,cr(or._payload),lr)}if(eb(or)||Ka(or))return or=Tg(or,ir.mode,lr,null),or.return=ir,or;Mg(ir,or)}return null}function Zt(ir,or,lr,cr){var dr=or!==null?or.key:null;if(typeof lr=="string"&&lr!==""||typeof lr=="number")return dr!==null?null:Ut(ir,or,""+lr,cr);if(typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case va:return lr.key===dr?Ht(ir,or,lr,cr):null;case wa:return lr.key===dr?Kt(ir,or,lr,cr):null;case Ha:return dr=lr._init,Zt(ir,or,dr(lr._payload),cr)}if(eb(lr)||Ka(lr))return dr!==null?null:Yt(ir,or,lr,cr,null);Mg(ir,lr)}return null}function er(ir,or,lr,cr,dr){if(typeof cr=="string"&&cr!==""||typeof cr=="number")return ir=ir.get(lr)||null,Ut(or,ir,""+cr,dr);if(typeof cr=="object"&&cr!==null){switch(cr.$$typeof){case va:return ir=ir.get(cr.key===null?lr:cr.key)||null,Ht(or,ir,cr,dr);case wa:return ir=ir.get(cr.key===null?lr:cr.key)||null,Kt(or,ir,cr,dr);case Ha:var ur=cr._init;return er(ir,or,lr,ur(cr._payload),dr)}if(eb(cr)||Ka(cr))return ir=ir.get(lr)||null,Yt(or,ir,cr,dr,null);Mg(or,cr)}return null}function rr(ir,or,lr,cr){for(var dr=null,ur=null,pr=or,mr=or=0,jr=null;pr!==null&&mr<lr.length;mr++){pr.index>mr?(jr=pr,pr=null):jr=pr.sibling;var Rr=Zt(ir,pr,lr[mr],cr);if(Rr===null){pr===null&&(pr=jr);break}et&&pr&&Rr.alternate===null&&dt(ir,pr),or=Dt(Rr,or,mr),ur===null?dr=Rr:ur.sibling=Rr,ur=Rr,pr=jr}if(mr===lr.length)return $t(ir,pr),I$4&&tg(ir,mr),dr;if(pr===null){for(;mr<lr.length;mr++)pr=Jt(ir,lr[mr],cr),pr!==null&&(or=Dt(pr,or,mr),ur===null?dr=pr:ur.sibling=pr,ur=pr);return I$4&&tg(ir,mr),dr}for(pr=kt(ir,pr);mr<lr.length;mr++)jr=er(pr,ir,mr,lr[mr],cr),jr!==null&&(et&&jr.alternate!==null&&pr.delete(jr.key===null?mr:jr.key),or=Dt(jr,or,mr),ur===null?dr=jr:ur.sibling=jr,ur=jr);return et&&pr.forEach(function(xr){return dt(ir,xr)}),I$4&&tg(ir,mr),dr}function sr(ir,or,lr,cr){var dr=Ka(lr);if(typeof dr!="function")throw Error(p$4(150));if(lr=dr.call(lr),lr==null)throw Error(p$4(151));for(var ur=dr=null,pr=or,mr=or=0,jr=null,Rr=lr.next();pr!==null&&!Rr.done;mr++,Rr=lr.next()){pr.index>mr?(jr=pr,pr=null):jr=pr.sibling;var xr=Zt(ir,pr,Rr.value,cr);if(xr===null){pr===null&&(pr=jr);break}et&&pr&&xr.alternate===null&&dt(ir,pr),or=Dt(xr,or,mr),ur===null?dr=xr:ur.sibling=xr,ur=xr,pr=jr}if(Rr.done)return $t(ir,pr),I$4&&tg(ir,mr),dr;if(pr===null){for(;!Rr.done;mr++,Rr=lr.next())Rr=Jt(ir,Rr.value,cr),Rr!==null&&(or=Dt(Rr,or,mr),ur===null?dr=Rr:ur.sibling=Rr,ur=Rr);return I$4&&tg(ir,mr),dr}for(pr=kt(ir,pr);!Rr.done;mr++,Rr=lr.next())Rr=er(pr,ir,mr,Rr.value,cr),Rr!==null&&(et&&Rr.alternate!==null&&pr.delete(Rr.key===null?mr:Rr.key),or=Dt(Rr,or,mr),ur===null?dr=Rr:ur.sibling=Rr,ur=Rr);return et&&pr.forEach(function(kr){return dt(ir,kr)}),I$4&&tg(ir,mr),dr}function nr(ir,or,lr,cr){if(typeof lr=="object"&&lr!==null&&lr.type===ya&&lr.key===null&&(lr=lr.props.children),typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case va:e:{for(var dr=lr.key,ur=or;ur!==null;){if(ur.key===dr){if(dr=lr.type,dr===ya){if(ur.tag===7){$t(ir,ur.sibling),or=Tt(ur,lr.props.children),or.return=ir,ir=or;break e}}else if(ur.elementType===dr||typeof dr=="object"&&dr!==null&&dr.$$typeof===Ha&&Ng(dr)===ur.type){$t(ir,ur.sibling),or=Tt(ur,lr.props),or.ref=Lg(ir,ur,lr),or.return=ir,ir=or;break e}$t(ir,ur);break}else dt(ir,ur);ur=ur.sibling}lr.type===ya?(or=Tg(lr.props.children,ir.mode,cr,lr.key),or.return=ir,ir=or):(cr=Rg(lr.type,lr.key,lr.props,null,ir.mode,cr),cr.ref=Lg(ir,or,lr),cr.return=ir,ir=cr)}return Ft(ir);case wa:e:{for(ur=lr.key;or!==null;){if(or.key===ur)if(or.tag===4&&or.stateNode.containerInfo===lr.containerInfo&&or.stateNode.implementation===lr.implementation){$t(ir,or.sibling),or=Tt(or,lr.children||[]),or.return=ir,ir=or;break e}else{$t(ir,or);break}else dt(ir,or);or=or.sibling}or=Sg(lr,ir.mode,cr),or.return=ir,ir=or}return Ft(ir);case Ha:return ur=lr._init,nr(ir,or,ur(lr._payload),cr)}if(eb(lr))return rr(ir,or,lr,cr);if(Ka(lr))return sr(ir,or,lr,cr);Mg(ir,lr)}return typeof lr=="string"&&lr!==""||typeof lr=="number"?(lr=""+lr,or!==null&&or.tag===6?($t(ir,or.sibling),or=Tt(or,lr),or.return=ir,ir=or):($t(ir,or),or=Qg(lr,ir.mode,cr),or.return=ir,ir=or),Ft(ir)):$t(ir,or)}return nr}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(et){var dt=Wg.current;E$7(Wg),et._currentValue=dt}function bh(et,dt,$t){for(;et!==null;){var kt=et.alternate;if((et.childLanes&dt)!==dt?(et.childLanes|=dt,kt!==null&&(kt.childLanes|=dt)):kt!==null&&(kt.childLanes&dt)!==dt&&(kt.childLanes|=dt),et===$t)break;et=et.return}}function ch(et,dt){Xg=et,Zg=Yg=null,et=et.dependencies,et!==null&&et.firstContext!==null&&(et.lanes&dt&&(dh=!0),et.firstContext=null)}function eh(et){var dt=et._currentValue;if(Zg!==et)if(et={context:et,memoizedValue:dt,next:null},Yg===null){if(Xg===null)throw Error(p$4(308));Yg=et,Xg.dependencies={lanes:0,firstContext:et}}else Yg=Yg.next=et;return dt}var fh=null;function gh(et){fh===null?fh=[et]:fh.push(et)}function hh(et,dt,$t,kt){var Tt=dt.interleaved;return Tt===null?($t.next=$t,gh(dt)):($t.next=Tt.next,Tt.next=$t),dt.interleaved=$t,ih(et,kt)}function ih(et,dt){et.lanes|=dt;var $t=et.alternate;for($t!==null&&($t.lanes|=dt),$t=et,et=et.return;et!==null;)et.childLanes|=dt,$t=et.alternate,$t!==null&&($t.childLanes|=dt),$t=et,et=et.return;return $t.tag===3?$t.stateNode:null}var jh=!1;function kh(et){et.updateQueue={baseState:et.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(et,dt){et=et.updateQueue,dt.updateQueue===et&&(dt.updateQueue={baseState:et.baseState,firstBaseUpdate:et.firstBaseUpdate,lastBaseUpdate:et.lastBaseUpdate,shared:et.shared,effects:et.effects})}function mh(et,dt){return{eventTime:et,lane:dt,tag:0,payload:null,callback:null,next:null}}function nh(et,dt,$t){var kt=et.updateQueue;if(kt===null)return null;if(kt=kt.shared,K$4&2){var Tt=kt.pending;return Tt===null?dt.next=dt:(dt.next=Tt.next,Tt.next=dt),kt.pending=dt,ih(et,$t)}return Tt=kt.interleaved,Tt===null?(dt.next=dt,gh(kt)):(dt.next=Tt.next,Tt.next=dt),kt.interleaved=dt,ih(et,$t)}function oh(et,dt,$t){if(dt=dt.updateQueue,dt!==null&&(dt=dt.shared,($t&4194240)!==0)){var kt=dt.lanes;kt&=et.pendingLanes,$t|=kt,dt.lanes=$t,Cc(et,$t)}}function ph(et,dt){var $t=et.updateQueue,kt=et.alternate;if(kt!==null&&(kt=kt.updateQueue,$t===kt)){var Tt=null,Dt=null;if($t=$t.firstBaseUpdate,$t!==null){do{var Ft={eventTime:$t.eventTime,lane:$t.lane,tag:$t.tag,payload:$t.payload,callback:$t.callback,next:null};Dt===null?Tt=Dt=Ft:Dt=Dt.next=Ft,$t=$t.next}while($t!==null);Dt===null?Tt=Dt=dt:Dt=Dt.next=dt}else Tt=Dt=dt;$t={baseState:kt.baseState,firstBaseUpdate:Tt,lastBaseUpdate:Dt,shared:kt.shared,effects:kt.effects},et.updateQueue=$t;return}et=$t.lastBaseUpdate,et===null?$t.firstBaseUpdate=dt:et.next=dt,$t.lastBaseUpdate=dt}function qh(et,dt,$t,kt){var Tt=et.updateQueue;jh=!1;var Dt=Tt.firstBaseUpdate,Ft=Tt.lastBaseUpdate,Ut=Tt.shared.pending;if(Ut!==null){Tt.shared.pending=null;var Ht=Ut,Kt=Ht.next;Ht.next=null,Ft===null?Dt=Kt:Ft.next=Kt,Ft=Ht;var Yt=et.alternate;Yt!==null&&(Yt=Yt.updateQueue,Ut=Yt.lastBaseUpdate,Ut!==Ft&&(Ut===null?Yt.firstBaseUpdate=Kt:Ut.next=Kt,Yt.lastBaseUpdate=Ht))}if(Dt!==null){var Jt=Tt.baseState;Ft=0,Yt=Kt=Ht=null,Ut=Dt;do{var Zt=Ut.lane,er=Ut.eventTime;if((kt&Zt)===Zt){Yt!==null&&(Yt=Yt.next={eventTime:er,lane:0,tag:Ut.tag,payload:Ut.payload,callback:Ut.callback,next:null});e:{var rr=et,sr=Ut;switch(Zt=dt,er=$t,sr.tag){case 1:if(rr=sr.payload,typeof rr=="function"){Jt=rr.call(er,Jt,Zt);break e}Jt=rr;break e;case 3:rr.flags=rr.flags&-65537|128;case 0:if(rr=sr.payload,Zt=typeof rr=="function"?rr.call(er,Jt,Zt):rr,Zt==null)break e;Jt=A$7({},Jt,Zt);break e;case 2:jh=!0}}Ut.callback!==null&&Ut.lane!==0&&(et.flags|=64,Zt=Tt.effects,Zt===null?Tt.effects=[Ut]:Zt.push(Ut))}else er={eventTime:er,lane:Zt,tag:Ut.tag,payload:Ut.payload,callback:Ut.callback,next:null},Yt===null?(Kt=Yt=er,Ht=Jt):Yt=Yt.next=er,Ft|=Zt;if(Ut=Ut.next,Ut===null){if(Ut=Tt.shared.pending,Ut===null)break;Zt=Ut,Ut=Zt.next,Zt.next=null,Tt.lastBaseUpdate=Zt,Tt.shared.pending=null}}while(1);if(Yt===null&&(Ht=Jt),Tt.baseState=Ht,Tt.firstBaseUpdate=Kt,Tt.lastBaseUpdate=Yt,dt=Tt.shared.interleaved,dt!==null){Tt=dt;do Ft|=Tt.lane,Tt=Tt.next;while(Tt!==dt)}else Dt===null&&(Tt.shared.lanes=0);rh|=Ft,et.lanes=Ft,et.memoizedState=Jt}}function sh(et,dt,$t){if(et=dt.effects,dt.effects=null,et!==null)for(dt=0;dt<et.length;dt++){var kt=et[dt],Tt=kt.callback;if(Tt!==null){if(kt.callback=null,kt=$t,typeof Tt!="function")throw Error(p$4(191,Tt));Tt.call(kt)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(et){if(et===th)throw Error(p$4(174));return et}function yh(et,dt){switch(G$3(wh,dt),G$3(vh$1,et),G$3(uh,th),et=dt.nodeType,et){case 9:case 11:dt=(dt=dt.documentElement)?dt.namespaceURI:lb(null,"");break;default:et=et===8?dt.parentNode:dt,dt=et.namespaceURI||null,et=et.tagName,dt=lb(dt,et)}E$7(uh),G$3(uh,dt)}function zh(){E$7(uh),E$7(vh$1),E$7(wh)}function Ah(et){xh(wh.current);var dt=xh(uh.current),$t=lb(dt,et.type);dt!==$t&&(G$3(vh$1,et),G$3(uh,$t))}function Bh(et){vh$1.current===et&&(E$7(uh),E$7(vh$1))}var L$9=Uf(0);function Ch(et){for(var dt=et;dt!==null;){if(dt.tag===13){var $t=dt.memoizedState;if($t!==null&&($t=$t.dehydrated,$t===null||$t.data==="$?"||$t.data==="$!"))return dt}else if(dt.tag===19&&dt.memoizedProps.revealOrder!==void 0){if(dt.flags&128)return dt}else if(dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===et)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===et)return null;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}return null}var Dh=[];function Eh(){for(var et=0;et<Dh.length;et++)Dh[et]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$6=null,N$3=null,O$7=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$6(){throw Error(p$4(321))}function Mh(et,dt){if(dt===null)return!1;for(var $t=0;$t<dt.length&&$t<et.length;$t++)if(!He$3(et[$t],dt[$t]))return!1;return!0}function Nh(et,dt,$t,kt,Tt,Dt){if(Hh=Dt,M$6=dt,dt.memoizedState=null,dt.updateQueue=null,dt.lanes=0,Fh.current=et===null||et.memoizedState===null?Oh:Ph,et=$t(kt,Tt),Jh){Dt=0;do{if(Jh=!1,Kh=0,25<=Dt)throw Error(p$4(301));Dt+=1,O$7=N$3=null,dt.updateQueue=null,Fh.current=Qh,et=$t(kt,Tt)}while(Jh)}if(Fh.current=Rh,dt=N$3!==null&&N$3.next!==null,Hh=0,O$7=N$3=M$6=null,Ih=!1,dt)throw Error(p$4(300));return et}function Sh(){var et=Kh!==0;return Kh=0,et}function Th(){var et={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$7===null?M$6.memoizedState=O$7=et:O$7=O$7.next=et,O$7}function Uh(){if(N$3===null){var et=M$6.alternate;et=et!==null?et.memoizedState:null}else et=N$3.next;var dt=O$7===null?M$6.memoizedState:O$7.next;if(dt!==null)O$7=dt,N$3=et;else{if(et===null)throw Error(p$4(310));N$3=et,et={memoizedState:N$3.memoizedState,baseState:N$3.baseState,baseQueue:N$3.baseQueue,queue:N$3.queue,next:null},O$7===null?M$6.memoizedState=O$7=et:O$7=O$7.next=et}return O$7}function Vh(et,dt){return typeof dt=="function"?dt(et):dt}function Wh(et){var dt=Uh(),$t=dt.queue;if($t===null)throw Error(p$4(311));$t.lastRenderedReducer=et;var kt=N$3,Tt=kt.baseQueue,Dt=$t.pending;if(Dt!==null){if(Tt!==null){var Ft=Tt.next;Tt.next=Dt.next,Dt.next=Ft}kt.baseQueue=Tt=Dt,$t.pending=null}if(Tt!==null){Dt=Tt.next,kt=kt.baseState;var Ut=Ft=null,Ht=null,Kt=Dt;do{var Yt=Kt.lane;if((Hh&Yt)===Yt)Ht!==null&&(Ht=Ht.next={lane:0,action:Kt.action,hasEagerState:Kt.hasEagerState,eagerState:Kt.eagerState,next:null}),kt=Kt.hasEagerState?Kt.eagerState:et(kt,Kt.action);else{var Jt={lane:Yt,action:Kt.action,hasEagerState:Kt.hasEagerState,eagerState:Kt.eagerState,next:null};Ht===null?(Ut=Ht=Jt,Ft=kt):Ht=Ht.next=Jt,M$6.lanes|=Yt,rh|=Yt}Kt=Kt.next}while(Kt!==null&&Kt!==Dt);Ht===null?Ft=kt:Ht.next=Ut,He$3(kt,dt.memoizedState)||(dh=!0),dt.memoizedState=kt,dt.baseState=Ft,dt.baseQueue=Ht,$t.lastRenderedState=kt}if(et=$t.interleaved,et!==null){Tt=et;do Dt=Tt.lane,M$6.lanes|=Dt,rh|=Dt,Tt=Tt.next;while(Tt!==et)}else Tt===null&&($t.lanes=0);return[dt.memoizedState,$t.dispatch]}function Xh(et){var dt=Uh(),$t=dt.queue;if($t===null)throw Error(p$4(311));$t.lastRenderedReducer=et;var kt=$t.dispatch,Tt=$t.pending,Dt=dt.memoizedState;if(Tt!==null){$t.pending=null;var Ft=Tt=Tt.next;do Dt=et(Dt,Ft.action),Ft=Ft.next;while(Ft!==Tt);He$3(Dt,dt.memoizedState)||(dh=!0),dt.memoizedState=Dt,dt.baseQueue===null&&(dt.baseState=Dt),$t.lastRenderedState=Dt}return[Dt,kt]}function Yh(){}function Zh(et,dt){var $t=M$6,kt=Uh(),Tt=dt(),Dt=!He$3(kt.memoizedState,Tt);if(Dt&&(kt.memoizedState=Tt,dh=!0),kt=kt.queue,$h(ai.bind(null,$t,kt,et),[et]),kt.getSnapshot!==dt||Dt||O$7!==null&&O$7.memoizedState.tag&1){if($t.flags|=2048,bi(9,ci.bind(null,$t,kt,Tt,dt),void 0,null),Q$4===null)throw Error(p$4(349));Hh&30||di($t,dt,Tt)}return Tt}function di(et,dt,$t){et.flags|=16384,et={getSnapshot:dt,value:$t},dt=M$6.updateQueue,dt===null?(dt={lastEffect:null,stores:null},M$6.updateQueue=dt,dt.stores=[et]):($t=dt.stores,$t===null?dt.stores=[et]:$t.push(et))}function ci(et,dt,$t,kt){dt.value=$t,dt.getSnapshot=kt,ei(dt)&&fi(et)}function ai(et,dt,$t){return $t(function(){ei(dt)&&fi(et)})}function ei(et){var dt=et.getSnapshot;et=et.value;try{var $t=dt();return!He$3(et,$t)}catch{return!0}}function fi(et){var dt=ih(et,1);dt!==null&&gi(dt,et,1,-1)}function hi(et){var dt=Th();return typeof et=="function"&&(et=et()),dt.memoizedState=dt.baseState=et,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:et},dt.queue=et,et=et.dispatch=ii.bind(null,M$6,et),[dt.memoizedState,et]}function bi(et,dt,$t,kt){return et={tag:et,create:dt,destroy:$t,deps:kt,next:null},dt=M$6.updateQueue,dt===null?(dt={lastEffect:null,stores:null},M$6.updateQueue=dt,dt.lastEffect=et.next=et):($t=dt.lastEffect,$t===null?dt.lastEffect=et.next=et:(kt=$t.next,$t.next=et,et.next=kt,dt.lastEffect=et)),et}function ji(){return Uh().memoizedState}function ki(et,dt,$t,kt){var Tt=Th();M$6.flags|=et,Tt.memoizedState=bi(1|dt,$t,void 0,kt===void 0?null:kt)}function li(et,dt,$t,kt){var Tt=Uh();kt=kt===void 0?null:kt;var Dt=void 0;if(N$3!==null){var Ft=N$3.memoizedState;if(Dt=Ft.destroy,kt!==null&&Mh(kt,Ft.deps)){Tt.memoizedState=bi(dt,$t,Dt,kt);return}}M$6.flags|=et,Tt.memoizedState=bi(1|dt,$t,Dt,kt)}function mi(et,dt){return ki(8390656,8,et,dt)}function $h(et,dt){return li(2048,8,et,dt)}function ni(et,dt){return li(4,2,et,dt)}function oi(et,dt){return li(4,4,et,dt)}function pi(et,dt){if(typeof dt=="function")return et=et(),dt(et),function(){dt(null)};if(dt!=null)return et=et(),dt.current=et,function(){dt.current=null}}function qi(et,dt,$t){return $t=$t!=null?$t.concat([et]):null,li(4,4,pi.bind(null,dt,et),$t)}function ri(){}function si(et,dt){var $t=Uh();dt=dt===void 0?null:dt;var kt=$t.memoizedState;return kt!==null&&dt!==null&&Mh(dt,kt[1])?kt[0]:($t.memoizedState=[et,dt],et)}function ti(et,dt){var $t=Uh();dt=dt===void 0?null:dt;var kt=$t.memoizedState;return kt!==null&&dt!==null&&Mh(dt,kt[1])?kt[0]:(et=et(),$t.memoizedState=[et,dt],et)}function ui(et,dt,$t){return Hh&21?(He$3($t,dt)||($t=yc(),M$6.lanes|=$t,rh|=$t,et.baseState=!0),dt):(et.baseState&&(et.baseState=!1,dh=!0),et.memoizedState=$t)}function vi(et,dt){var $t=C$8;C$8=$t!==0&&4>$t?$t:4,et(!0);var kt=Gh.transition;Gh.transition={};try{et(!1),dt()}finally{C$8=$t,Gh.transition=kt}}function wi(){return Uh().memoizedState}function xi(et,dt,$t){var kt=yi(et);if($t={lane:kt,action:$t,hasEagerState:!1,eagerState:null,next:null},zi(et))Ai(dt,$t);else if($t=hh(et,dt,$t,kt),$t!==null){var Tt=R$4();gi($t,et,kt,Tt),Bi($t,dt,kt)}}function ii(et,dt,$t){var kt=yi(et),Tt={lane:kt,action:$t,hasEagerState:!1,eagerState:null,next:null};if(zi(et))Ai(dt,Tt);else{var Dt=et.alternate;if(et.lanes===0&&(Dt===null||Dt.lanes===0)&&(Dt=dt.lastRenderedReducer,Dt!==null))try{var Ft=dt.lastRenderedState,Ut=Dt(Ft,$t);if(Tt.hasEagerState=!0,Tt.eagerState=Ut,He$3(Ut,Ft)){var Ht=dt.interleaved;Ht===null?(Tt.next=Tt,gh(dt)):(Tt.next=Ht.next,Ht.next=Tt),dt.interleaved=Tt;return}}catch{}finally{}$t=hh(et,dt,Tt,kt),$t!==null&&(Tt=R$4(),gi($t,et,kt,Tt),Bi($t,dt,kt))}}function zi(et){var dt=et.alternate;return et===M$6||dt!==null&&dt===M$6}function Ai(et,dt){Jh=Ih=!0;var $t=et.pending;$t===null?dt.next=dt:(dt.next=$t.next,$t.next=dt),et.pending=dt}function Bi(et,dt,$t){if($t&4194240){var kt=dt.lanes;kt&=et.pendingLanes,$t|=kt,dt.lanes=$t,Cc(et,$t)}}var Rh={readContext:eh,useCallback:P$6,useContext:P$6,useEffect:P$6,useImperativeHandle:P$6,useInsertionEffect:P$6,useLayoutEffect:P$6,useMemo:P$6,useReducer:P$6,useRef:P$6,useState:P$6,useDebugValue:P$6,useDeferredValue:P$6,useTransition:P$6,useMutableSource:P$6,useSyncExternalStore:P$6,useId:P$6,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(et,dt){return Th().memoizedState=[et,dt===void 0?null:dt],et},useContext:eh,useEffect:mi,useImperativeHandle:function(et,dt,$t){return $t=$t!=null?$t.concat([et]):null,ki(4194308,4,pi.bind(null,dt,et),$t)},useLayoutEffect:function(et,dt){return ki(4194308,4,et,dt)},useInsertionEffect:function(et,dt){return ki(4,2,et,dt)},useMemo:function(et,dt){var $t=Th();return dt=dt===void 0?null:dt,et=et(),$t.memoizedState=[et,dt],et},useReducer:function(et,dt,$t){var kt=Th();return dt=$t!==void 0?$t(dt):dt,kt.memoizedState=kt.baseState=dt,et={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:et,lastRenderedState:dt},kt.queue=et,et=et.dispatch=xi.bind(null,M$6,et),[kt.memoizedState,et]},useRef:function(et){var dt=Th();return et={current:et},dt.memoizedState=et},useState:hi,useDebugValue:ri,useDeferredValue:function(et){return Th().memoizedState=et},useTransition:function(){var et=hi(!1),dt=et[0];return et=vi.bind(null,et[1]),Th().memoizedState=et,[dt,et]},useMutableSource:function(){},useSyncExternalStore:function(et,dt,$t){var kt=M$6,Tt=Th();if(I$4){if($t===void 0)throw Error(p$4(407));$t=$t()}else{if($t=dt(),Q$4===null)throw Error(p$4(349));Hh&30||di(kt,dt,$t)}Tt.memoizedState=$t;var Dt={value:$t,getSnapshot:dt};return Tt.queue=Dt,mi(ai.bind(null,kt,Dt,et),[et]),kt.flags|=2048,bi(9,ci.bind(null,kt,Dt,$t,dt),void 0,null),$t},useId:function(){var et=Th(),dt=Q$4.identifierPrefix;if(I$4){var $t=sg,kt=rg;$t=(kt&~(1<<32-oc(kt)-1)).toString(32)+$t,dt=":"+dt+"R"+$t,$t=Kh++,0<$t&&(dt+="H"+$t.toString(32)),dt+=":"}else $t=Lh++,dt=":"+dt+"r"+$t.toString(32)+":";return et.memoizedState=dt},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(et){var dt=Uh();return ui(dt,N$3.memoizedState,et)},useTransition:function(){var et=Wh(Vh)[0],dt=Uh().memoizedState;return[et,dt]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(et){var dt=Uh();return N$3===null?dt.memoizedState=et:ui(dt,N$3.memoizedState,et)},useTransition:function(){var et=Xh(Vh)[0],dt=Uh().memoizedState;return[et,dt]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(et,dt){if(et&&et.defaultProps){dt=A$7({},dt),et=et.defaultProps;for(var $t in et)dt[$t]===void 0&&(dt[$t]=et[$t]);return dt}return dt}function Di(et,dt,$t,kt){dt=et.memoizedState,$t=$t(kt,dt),$t=$t==null?dt:A$7({},dt,$t),et.memoizedState=$t,et.lanes===0&&(et.updateQueue.baseState=$t)}var Ei={isMounted:function(et){return(et=et._reactInternals)?Vb(et)===et:!1},enqueueSetState:function(et,dt,$t){et=et._reactInternals;var kt=R$4(),Tt=yi(et),Dt=mh(kt,Tt);Dt.payload=dt,$t!=null&&(Dt.callback=$t),dt=nh(et,Dt,Tt),dt!==null&&(gi(dt,et,Tt,kt),oh(dt,et,Tt))},enqueueReplaceState:function(et,dt,$t){et=et._reactInternals;var kt=R$4(),Tt=yi(et),Dt=mh(kt,Tt);Dt.tag=1,Dt.payload=dt,$t!=null&&(Dt.callback=$t),dt=nh(et,Dt,Tt),dt!==null&&(gi(dt,et,Tt,kt),oh(dt,et,Tt))},enqueueForceUpdate:function(et,dt){et=et._reactInternals;var $t=R$4(),kt=yi(et),Tt=mh($t,kt);Tt.tag=2,dt!=null&&(Tt.callback=dt),dt=nh(et,Tt,kt),dt!==null&&(gi(dt,et,kt,$t),oh(dt,et,kt))}};function Fi(et,dt,$t,kt,Tt,Dt,Ft){return et=et.stateNode,typeof et.shouldComponentUpdate=="function"?et.shouldComponentUpdate(kt,Dt,Ft):dt.prototype&&dt.prototype.isPureReactComponent?!Ie$2($t,kt)||!Ie$2(Tt,Dt):!0}function Gi(et,dt,$t){var kt=!1,Tt=Vf,Dt=dt.contextType;return typeof Dt=="object"&&Dt!==null?Dt=eh(Dt):(Tt=Zf(dt)?Xf:H$2.current,kt=dt.contextTypes,Dt=(kt=kt!=null)?Yf(et,Tt):Vf),dt=new dt($t,Dt),et.memoizedState=dt.state!==null&&dt.state!==void 0?dt.state:null,dt.updater=Ei,et.stateNode=dt,dt._reactInternals=et,kt&&(et=et.stateNode,et.__reactInternalMemoizedUnmaskedChildContext=Tt,et.__reactInternalMemoizedMaskedChildContext=Dt),dt}function Hi(et,dt,$t,kt){et=dt.state,typeof dt.componentWillReceiveProps=="function"&&dt.componentWillReceiveProps($t,kt),typeof dt.UNSAFE_componentWillReceiveProps=="function"&&dt.UNSAFE_componentWillReceiveProps($t,kt),dt.state!==et&&Ei.enqueueReplaceState(dt,dt.state,null)}function Ii(et,dt,$t,kt){var Tt=et.stateNode;Tt.props=$t,Tt.state=et.memoizedState,Tt.refs={},kh(et);var Dt=dt.contextType;typeof Dt=="object"&&Dt!==null?Tt.context=eh(Dt):(Dt=Zf(dt)?Xf:H$2.current,Tt.context=Yf(et,Dt)),Tt.state=et.memoizedState,Dt=dt.getDerivedStateFromProps,typeof Dt=="function"&&(Di(et,dt,Dt,$t),Tt.state=et.memoizedState),typeof dt.getDerivedStateFromProps=="function"||typeof Tt.getSnapshotBeforeUpdate=="function"||typeof Tt.UNSAFE_componentWillMount!="function"&&typeof Tt.componentWillMount!="function"||(dt=Tt.state,typeof Tt.componentWillMount=="function"&&Tt.componentWillMount(),typeof Tt.UNSAFE_componentWillMount=="function"&&Tt.UNSAFE_componentWillMount(),dt!==Tt.state&&Ei.enqueueReplaceState(Tt,Tt.state,null),qh(et,$t,Tt,kt),Tt.state=et.memoizedState),typeof Tt.componentDidMount=="function"&&(et.flags|=4194308)}function Ji(et,dt){try{var $t="",kt=dt;do $t+=Pa(kt),kt=kt.return;while(kt);var Tt=$t}catch(Dt){Tt=`
Error generating stack: `+Dt.message+`
`+Dt.stack}return{value:et,source:dt,stack:Tt,digest:null}}function Ki(et,dt,$t){return{value:et,source:null,stack:$t??null,digest:dt??null}}function Li(et,dt){try{console.error(dt.value)}catch($t){setTimeout(function(){throw $t})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(et,dt,$t){$t=mh(-1,$t),$t.tag=3,$t.payload={element:null};var kt=dt.value;return $t.callback=function(){Oi||(Oi=!0,Pi=kt),Li(et,dt)},$t}function Qi(et,dt,$t){$t=mh(-1,$t),$t.tag=3;var kt=et.type.getDerivedStateFromError;if(typeof kt=="function"){var Tt=dt.value;$t.payload=function(){return kt(Tt)},$t.callback=function(){Li(et,dt)}}var Dt=et.stateNode;return Dt!==null&&typeof Dt.componentDidCatch=="function"&&($t.callback=function(){Li(et,dt),typeof kt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var Ft=dt.stack;this.componentDidCatch(dt.value,{componentStack:Ft!==null?Ft:""})}),$t}function Si(et,dt,$t){var kt=et.pingCache;if(kt===null){kt=et.pingCache=new Mi;var Tt=new Set;kt.set(dt,Tt)}else Tt=kt.get(dt),Tt===void 0&&(Tt=new Set,kt.set(dt,Tt));Tt.has($t)||(Tt.add($t),et=Ti.bind(null,et,dt,$t),dt.then(et,et))}function Ui(et){do{var dt;if((dt=et.tag===13)&&(dt=et.memoizedState,dt=dt!==null?dt.dehydrated!==null:!0),dt)return et;et=et.return}while(et!==null);return null}function Vi(et,dt,$t,kt,Tt){return et.mode&1?(et.flags|=65536,et.lanes=Tt,et):(et===dt?et.flags|=65536:(et.flags|=128,$t.flags|=131072,$t.flags&=-52805,$t.tag===1&&($t.alternate===null?$t.tag=17:(dt=mh(-1,1),dt.tag=2,nh($t,dt,1))),$t.lanes|=1),et)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(et,dt,$t,kt){dt.child=et===null?Vg(dt,null,$t,kt):Ug(dt,et.child,$t,kt)}function Yi(et,dt,$t,kt,Tt){$t=$t.render;var Dt=dt.ref;return ch(dt,Tt),kt=Nh(et,dt,$t,kt,Dt,Tt),$t=Sh(),et!==null&&!dh?(dt.updateQueue=et.updateQueue,dt.flags&=-2053,et.lanes&=~Tt,Zi(et,dt,Tt)):(I$4&&$t&&vg(dt),dt.flags|=1,Xi(et,dt,kt,Tt),dt.child)}function $i(et,dt,$t,kt,Tt){if(et===null){var Dt=$t.type;return typeof Dt=="function"&&!aj(Dt)&&Dt.defaultProps===void 0&&$t.compare===null&&$t.defaultProps===void 0?(dt.tag=15,dt.type=Dt,bj(et,dt,Dt,kt,Tt)):(et=Rg($t.type,null,kt,dt,dt.mode,Tt),et.ref=dt.ref,et.return=dt,dt.child=et)}if(Dt=et.child,!(et.lanes&Tt)){var Ft=Dt.memoizedProps;if($t=$t.compare,$t=$t!==null?$t:Ie$2,$t(Ft,kt)&&et.ref===dt.ref)return Zi(et,dt,Tt)}return dt.flags|=1,et=Pg(Dt,kt),et.ref=dt.ref,et.return=dt,dt.child=et}function bj(et,dt,$t,kt,Tt){if(et!==null){var Dt=et.memoizedProps;if(Ie$2(Dt,kt)&&et.ref===dt.ref)if(dh=!1,dt.pendingProps=kt=Dt,(et.lanes&Tt)!==0)et.flags&131072&&(dh=!0);else return dt.lanes=et.lanes,Zi(et,dt,Tt)}return cj(et,dt,$t,kt,Tt)}function dj(et,dt,$t){var kt=dt.pendingProps,Tt=kt.children,Dt=et!==null?et.memoizedState:null;if(kt.mode==="hidden")if(!(dt.mode&1))dt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$3(ej,fj),fj|=$t;else{if(!($t&1073741824))return et=Dt!==null?Dt.baseLanes|$t:$t,dt.lanes=dt.childLanes=1073741824,dt.memoizedState={baseLanes:et,cachePool:null,transitions:null},dt.updateQueue=null,G$3(ej,fj),fj|=et,null;dt.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt=Dt!==null?Dt.baseLanes:$t,G$3(ej,fj),fj|=kt}else Dt!==null?(kt=Dt.baseLanes|$t,dt.memoizedState=null):kt=$t,G$3(ej,fj),fj|=kt;return Xi(et,dt,Tt,$t),dt.child}function gj(et,dt){var $t=dt.ref;(et===null&&$t!==null||et!==null&&et.ref!==$t)&&(dt.flags|=512,dt.flags|=2097152)}function cj(et,dt,$t,kt,Tt){var Dt=Zf($t)?Xf:H$2.current;return Dt=Yf(dt,Dt),ch(dt,Tt),$t=Nh(et,dt,$t,kt,Dt,Tt),kt=Sh(),et!==null&&!dh?(dt.updateQueue=et.updateQueue,dt.flags&=-2053,et.lanes&=~Tt,Zi(et,dt,Tt)):(I$4&&kt&&vg(dt),dt.flags|=1,Xi(et,dt,$t,Tt),dt.child)}function hj(et,dt,$t,kt,Tt){if(Zf($t)){var Dt=!0;cg(dt)}else Dt=!1;if(ch(dt,Tt),dt.stateNode===null)ij(et,dt),Gi(dt,$t,kt),Ii(dt,$t,kt,Tt),kt=!0;else if(et===null){var Ft=dt.stateNode,Ut=dt.memoizedProps;Ft.props=Ut;var Ht=Ft.context,Kt=$t.contextType;typeof Kt=="object"&&Kt!==null?Kt=eh(Kt):(Kt=Zf($t)?Xf:H$2.current,Kt=Yf(dt,Kt));var Yt=$t.getDerivedStateFromProps,Jt=typeof Yt=="function"||typeof Ft.getSnapshotBeforeUpdate=="function";Jt||typeof Ft.UNSAFE_componentWillReceiveProps!="function"&&typeof Ft.componentWillReceiveProps!="function"||(Ut!==kt||Ht!==Kt)&&Hi(dt,Ft,kt,Kt),jh=!1;var Zt=dt.memoizedState;Ft.state=Zt,qh(dt,kt,Ft,Tt),Ht=dt.memoizedState,Ut!==kt||Zt!==Ht||Wf.current||jh?(typeof Yt=="function"&&(Di(dt,$t,Yt,kt),Ht=dt.memoizedState),(Ut=jh||Fi(dt,$t,Ut,kt,Zt,Ht,Kt))?(Jt||typeof Ft.UNSAFE_componentWillMount!="function"&&typeof Ft.componentWillMount!="function"||(typeof Ft.componentWillMount=="function"&&Ft.componentWillMount(),typeof Ft.UNSAFE_componentWillMount=="function"&&Ft.UNSAFE_componentWillMount()),typeof Ft.componentDidMount=="function"&&(dt.flags|=4194308)):(typeof Ft.componentDidMount=="function"&&(dt.flags|=4194308),dt.memoizedProps=kt,dt.memoizedState=Ht),Ft.props=kt,Ft.state=Ht,Ft.context=Kt,kt=Ut):(typeof Ft.componentDidMount=="function"&&(dt.flags|=4194308),kt=!1)}else{Ft=dt.stateNode,lh(et,dt),Ut=dt.memoizedProps,Kt=dt.type===dt.elementType?Ut:Ci(dt.type,Ut),Ft.props=Kt,Jt=dt.pendingProps,Zt=Ft.context,Ht=$t.contextType,typeof Ht=="object"&&Ht!==null?Ht=eh(Ht):(Ht=Zf($t)?Xf:H$2.current,Ht=Yf(dt,Ht));var er=$t.getDerivedStateFromProps;(Yt=typeof er=="function"||typeof Ft.getSnapshotBeforeUpdate=="function")||typeof Ft.UNSAFE_componentWillReceiveProps!="function"&&typeof Ft.componentWillReceiveProps!="function"||(Ut!==Jt||Zt!==Ht)&&Hi(dt,Ft,kt,Ht),jh=!1,Zt=dt.memoizedState,Ft.state=Zt,qh(dt,kt,Ft,Tt);var rr=dt.memoizedState;Ut!==Jt||Zt!==rr||Wf.current||jh?(typeof er=="function"&&(Di(dt,$t,er,kt),rr=dt.memoizedState),(Kt=jh||Fi(dt,$t,Kt,kt,Zt,rr,Ht)||!1)?(Yt||typeof Ft.UNSAFE_componentWillUpdate!="function"&&typeof Ft.componentWillUpdate!="function"||(typeof Ft.componentWillUpdate=="function"&&Ft.componentWillUpdate(kt,rr,Ht),typeof Ft.UNSAFE_componentWillUpdate=="function"&&Ft.UNSAFE_componentWillUpdate(kt,rr,Ht)),typeof Ft.componentDidUpdate=="function"&&(dt.flags|=4),typeof Ft.getSnapshotBeforeUpdate=="function"&&(dt.flags|=1024)):(typeof Ft.componentDidUpdate!="function"||Ut===et.memoizedProps&&Zt===et.memoizedState||(dt.flags|=4),typeof Ft.getSnapshotBeforeUpdate!="function"||Ut===et.memoizedProps&&Zt===et.memoizedState||(dt.flags|=1024),dt.memoizedProps=kt,dt.memoizedState=rr),Ft.props=kt,Ft.state=rr,Ft.context=Ht,kt=Kt):(typeof Ft.componentDidUpdate!="function"||Ut===et.memoizedProps&&Zt===et.memoizedState||(dt.flags|=4),typeof Ft.getSnapshotBeforeUpdate!="function"||Ut===et.memoizedProps&&Zt===et.memoizedState||(dt.flags|=1024),kt=!1)}return jj(et,dt,$t,kt,Dt,Tt)}function jj(et,dt,$t,kt,Tt,Dt){gj(et,dt);var Ft=(dt.flags&128)!==0;if(!kt&&!Ft)return Tt&&dg(dt,$t,!1),Zi(et,dt,Dt);kt=dt.stateNode,Wi.current=dt;var Ut=Ft&&typeof $t.getDerivedStateFromError!="function"?null:kt.render();return dt.flags|=1,et!==null&&Ft?(dt.child=Ug(dt,et.child,null,Dt),dt.child=Ug(dt,null,Ut,Dt)):Xi(et,dt,Ut,Dt),dt.memoizedState=kt.state,Tt&&dg(dt,$t,!0),dt.child}function kj(et){var dt=et.stateNode;dt.pendingContext?ag(et,dt.pendingContext,dt.pendingContext!==dt.context):dt.context&&ag(et,dt.context,!1),yh(et,dt.containerInfo)}function lj(et,dt,$t,kt,Tt){return Ig(),Jg(Tt),dt.flags|=256,Xi(et,dt,$t,kt),dt.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(et){return{baseLanes:et,cachePool:null,transitions:null}}function oj(et,dt,$t){var kt=dt.pendingProps,Tt=L$9.current,Dt=!1,Ft=(dt.flags&128)!==0,Ut;if((Ut=Ft)||(Ut=et!==null&&et.memoizedState===null?!1:(Tt&2)!==0),Ut?(Dt=!0,dt.flags&=-129):(et===null||et.memoizedState!==null)&&(Tt|=1),G$3(L$9,Tt&1),et===null)return Eg(dt),et=dt.memoizedState,et!==null&&(et=et.dehydrated,et!==null)?(dt.mode&1?et.data==="$!"?dt.lanes=8:dt.lanes=1073741824:dt.lanes=1,null):(Ft=kt.children,et=kt.fallback,Dt?(kt=dt.mode,Dt=dt.child,Ft={mode:"hidden",children:Ft},!(kt&1)&&Dt!==null?(Dt.childLanes=0,Dt.pendingProps=Ft):Dt=pj(Ft,kt,0,null),et=Tg(et,kt,$t,null),Dt.return=dt,et.return=dt,Dt.sibling=et,dt.child=Dt,dt.child.memoizedState=nj($t),dt.memoizedState=mj,et):qj(dt,Ft));if(Tt=et.memoizedState,Tt!==null&&(Ut=Tt.dehydrated,Ut!==null))return rj(et,dt,Ft,kt,Ut,Tt,$t);if(Dt){Dt=kt.fallback,Ft=dt.mode,Tt=et.child,Ut=Tt.sibling;var Ht={mode:"hidden",children:kt.children};return!(Ft&1)&&dt.child!==Tt?(kt=dt.child,kt.childLanes=0,kt.pendingProps=Ht,dt.deletions=null):(kt=Pg(Tt,Ht),kt.subtreeFlags=Tt.subtreeFlags&14680064),Ut!==null?Dt=Pg(Ut,Dt):(Dt=Tg(Dt,Ft,$t,null),Dt.flags|=2),Dt.return=dt,kt.return=dt,kt.sibling=Dt,dt.child=kt,kt=Dt,Dt=dt.child,Ft=et.child.memoizedState,Ft=Ft===null?nj($t):{baseLanes:Ft.baseLanes|$t,cachePool:null,transitions:Ft.transitions},Dt.memoizedState=Ft,Dt.childLanes=et.childLanes&~$t,dt.memoizedState=mj,kt}return Dt=et.child,et=Dt.sibling,kt=Pg(Dt,{mode:"visible",children:kt.children}),!(dt.mode&1)&&(kt.lanes=$t),kt.return=dt,kt.sibling=null,et!==null&&($t=dt.deletions,$t===null?(dt.deletions=[et],dt.flags|=16):$t.push(et)),dt.child=kt,dt.memoizedState=null,kt}function qj(et,dt){return dt=pj({mode:"visible",children:dt},et.mode,0,null),dt.return=et,et.child=dt}function sj(et,dt,$t,kt){return kt!==null&&Jg(kt),Ug(dt,et.child,null,$t),et=qj(dt,dt.pendingProps.children),et.flags|=2,dt.memoizedState=null,et}function rj(et,dt,$t,kt,Tt,Dt,Ft){if($t)return dt.flags&256?(dt.flags&=-257,kt=Ki(Error(p$4(422))),sj(et,dt,Ft,kt)):dt.memoizedState!==null?(dt.child=et.child,dt.flags|=128,null):(Dt=kt.fallback,Tt=dt.mode,kt=pj({mode:"visible",children:kt.children},Tt,0,null),Dt=Tg(Dt,Tt,Ft,null),Dt.flags|=2,kt.return=dt,Dt.return=dt,kt.sibling=Dt,dt.child=kt,dt.mode&1&&Ug(dt,et.child,null,Ft),dt.child.memoizedState=nj(Ft),dt.memoizedState=mj,Dt);if(!(dt.mode&1))return sj(et,dt,Ft,null);if(Tt.data==="$!"){if(kt=Tt.nextSibling&&Tt.nextSibling.dataset,kt)var Ut=kt.dgst;return kt=Ut,Dt=Error(p$4(419)),kt=Ki(Dt,kt,void 0),sj(et,dt,Ft,kt)}if(Ut=(Ft&et.childLanes)!==0,dh||Ut){if(kt=Q$4,kt!==null){switch(Ft&-Ft){case 4:Tt=2;break;case 16:Tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Tt=32;break;case 536870912:Tt=268435456;break;default:Tt=0}Tt=Tt&(kt.suspendedLanes|Ft)?0:Tt,Tt!==0&&Tt!==Dt.retryLane&&(Dt.retryLane=Tt,ih(et,Tt),gi(kt,et,Tt,-1))}return tj(),kt=Ki(Error(p$4(421))),sj(et,dt,Ft,kt)}return Tt.data==="$?"?(dt.flags|=128,dt.child=et.child,dt=uj.bind(null,et),Tt._reactRetry=dt,null):(et=Dt.treeContext,yg=Lf(Tt.nextSibling),xg=dt,I$4=!0,zg=null,et!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=et.id,sg=et.overflow,qg=dt),dt=qj(dt,kt.children),dt.flags|=4096,dt)}function vj(et,dt,$t){et.lanes|=dt;var kt=et.alternate;kt!==null&&(kt.lanes|=dt),bh(et.return,dt,$t)}function wj(et,dt,$t,kt,Tt){var Dt=et.memoizedState;Dt===null?et.memoizedState={isBackwards:dt,rendering:null,renderingStartTime:0,last:kt,tail:$t,tailMode:Tt}:(Dt.isBackwards=dt,Dt.rendering=null,Dt.renderingStartTime=0,Dt.last=kt,Dt.tail=$t,Dt.tailMode=Tt)}function xj(et,dt,$t){var kt=dt.pendingProps,Tt=kt.revealOrder,Dt=kt.tail;if(Xi(et,dt,kt.children,$t),kt=L$9.current,kt&2)kt=kt&1|2,dt.flags|=128;else{if(et!==null&&et.flags&128)e:for(et=dt.child;et!==null;){if(et.tag===13)et.memoizedState!==null&&vj(et,$t,dt);else if(et.tag===19)vj(et,$t,dt);else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===dt)break e;for(;et.sibling===null;){if(et.return===null||et.return===dt)break e;et=et.return}et.sibling.return=et.return,et=et.sibling}kt&=1}if(G$3(L$9,kt),!(dt.mode&1))dt.memoizedState=null;else switch(Tt){case"forwards":for($t=dt.child,Tt=null;$t!==null;)et=$t.alternate,et!==null&&Ch(et)===null&&(Tt=$t),$t=$t.sibling;$t=Tt,$t===null?(Tt=dt.child,dt.child=null):(Tt=$t.sibling,$t.sibling=null),wj(dt,!1,Tt,$t,Dt);break;case"backwards":for($t=null,Tt=dt.child,dt.child=null;Tt!==null;){if(et=Tt.alternate,et!==null&&Ch(et)===null){dt.child=Tt;break}et=Tt.sibling,Tt.sibling=$t,$t=Tt,Tt=et}wj(dt,!0,$t,null,Dt);break;case"together":wj(dt,!1,null,null,void 0);break;default:dt.memoizedState=null}return dt.child}function ij(et,dt){!(dt.mode&1)&&et!==null&&(et.alternate=null,dt.alternate=null,dt.flags|=2)}function Zi(et,dt,$t){if(et!==null&&(dt.dependencies=et.dependencies),rh|=dt.lanes,!($t&dt.childLanes))return null;if(et!==null&&dt.child!==et.child)throw Error(p$4(153));if(dt.child!==null){for(et=dt.child,$t=Pg(et,et.pendingProps),dt.child=$t,$t.return=dt;et.sibling!==null;)et=et.sibling,$t=$t.sibling=Pg(et,et.pendingProps),$t.return=dt;$t.sibling=null}return dt.child}function yj(et,dt,$t){switch(dt.tag){case 3:kj(dt),Ig();break;case 5:Ah(dt);break;case 1:Zf(dt.type)&&cg(dt);break;case 4:yh(dt,dt.stateNode.containerInfo);break;case 10:var kt=dt.type._context,Tt=dt.memoizedProps.value;G$3(Wg,kt._currentValue),kt._currentValue=Tt;break;case 13:if(kt=dt.memoizedState,kt!==null)return kt.dehydrated!==null?(G$3(L$9,L$9.current&1),dt.flags|=128,null):$t&dt.child.childLanes?oj(et,dt,$t):(G$3(L$9,L$9.current&1),et=Zi(et,dt,$t),et!==null?et.sibling:null);G$3(L$9,L$9.current&1);break;case 19:if(kt=($t&dt.childLanes)!==0,et.flags&128){if(kt)return xj(et,dt,$t);dt.flags|=128}if(Tt=dt.memoizedState,Tt!==null&&(Tt.rendering=null,Tt.tail=null,Tt.lastEffect=null),G$3(L$9,L$9.current),kt)break;return null;case 22:case 23:return dt.lanes=0,dj(et,dt,$t)}return Zi(et,dt,$t)}var zj,Aj,Bj,Cj;zj=function(et,dt){for(var $t=dt.child;$t!==null;){if($t.tag===5||$t.tag===6)et.appendChild($t.stateNode);else if($t.tag!==4&&$t.child!==null){$t.child.return=$t,$t=$t.child;continue}if($t===dt)break;for(;$t.sibling===null;){if($t.return===null||$t.return===dt)return;$t=$t.return}$t.sibling.return=$t.return,$t=$t.sibling}};Aj=function(){};Bj=function(et,dt,$t,kt){var Tt=et.memoizedProps;if(Tt!==kt){et=dt.stateNode,xh(uh.current);var Dt=null;switch($t){case"input":Tt=Ya(et,Tt),kt=Ya(et,kt),Dt=[];break;case"select":Tt=A$7({},Tt,{value:void 0}),kt=A$7({},kt,{value:void 0}),Dt=[];break;case"textarea":Tt=gb(et,Tt),kt=gb(et,kt),Dt=[];break;default:typeof Tt.onClick!="function"&&typeof kt.onClick=="function"&&(et.onclick=Bf)}ub($t,kt);var Ft;$t=null;for(Kt in Tt)if(!kt.hasOwnProperty(Kt)&&Tt.hasOwnProperty(Kt)&&Tt[Kt]!=null)if(Kt==="style"){var Ut=Tt[Kt];for(Ft in Ut)Ut.hasOwnProperty(Ft)&&($t||($t={}),$t[Ft]="")}else Kt!=="dangerouslySetInnerHTML"&&Kt!=="children"&&Kt!=="suppressContentEditableWarning"&&Kt!=="suppressHydrationWarning"&&Kt!=="autoFocus"&&(ea.hasOwnProperty(Kt)?Dt||(Dt=[]):(Dt=Dt||[]).push(Kt,null));for(Kt in kt){var Ht=kt[Kt];if(Ut=Tt!=null?Tt[Kt]:void 0,kt.hasOwnProperty(Kt)&&Ht!==Ut&&(Ht!=null||Ut!=null))if(Kt==="style")if(Ut){for(Ft in Ut)!Ut.hasOwnProperty(Ft)||Ht&&Ht.hasOwnProperty(Ft)||($t||($t={}),$t[Ft]="");for(Ft in Ht)Ht.hasOwnProperty(Ft)&&Ut[Ft]!==Ht[Ft]&&($t||($t={}),$t[Ft]=Ht[Ft])}else $t||(Dt||(Dt=[]),Dt.push(Kt,$t)),$t=Ht;else Kt==="dangerouslySetInnerHTML"?(Ht=Ht?Ht.__html:void 0,Ut=Ut?Ut.__html:void 0,Ht!=null&&Ut!==Ht&&(Dt=Dt||[]).push(Kt,Ht)):Kt==="children"?typeof Ht!="string"&&typeof Ht!="number"||(Dt=Dt||[]).push(Kt,""+Ht):Kt!=="suppressContentEditableWarning"&&Kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(Kt)?(Ht!=null&&Kt==="onScroll"&&D$4("scroll",et),Dt||Ut===Ht||(Dt=[])):(Dt=Dt||[]).push(Kt,Ht))}$t&&(Dt=Dt||[]).push("style",$t);var Kt=Dt;(dt.updateQueue=Kt)&&(dt.flags|=4)}};Cj=function(et,dt,$t,kt){$t!==kt&&(dt.flags|=4)};function Dj(et,dt){if(!I$4)switch(et.tailMode){case"hidden":dt=et.tail;for(var $t=null;dt!==null;)dt.alternate!==null&&($t=dt),dt=dt.sibling;$t===null?et.tail=null:$t.sibling=null;break;case"collapsed":$t=et.tail;for(var kt=null;$t!==null;)$t.alternate!==null&&(kt=$t),$t=$t.sibling;kt===null?dt||et.tail===null?et.tail=null:et.tail.sibling=null:kt.sibling=null}}function S$4(et){var dt=et.alternate!==null&&et.alternate.child===et.child,$t=0,kt=0;if(dt)for(var Tt=et.child;Tt!==null;)$t|=Tt.lanes|Tt.childLanes,kt|=Tt.subtreeFlags&14680064,kt|=Tt.flags&14680064,Tt.return=et,Tt=Tt.sibling;else for(Tt=et.child;Tt!==null;)$t|=Tt.lanes|Tt.childLanes,kt|=Tt.subtreeFlags,kt|=Tt.flags,Tt.return=et,Tt=Tt.sibling;return et.subtreeFlags|=kt,et.childLanes=$t,dt}function Ej(et,dt,$t){var kt=dt.pendingProps;switch(wg(dt),dt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$4(dt),null;case 1:return Zf(dt.type)&&$f(),S$4(dt),null;case 3:return kt=dt.stateNode,zh(),E$7(Wf),E$7(H$2),Eh(),kt.pendingContext&&(kt.context=kt.pendingContext,kt.pendingContext=null),(et===null||et.child===null)&&(Gg(dt)?dt.flags|=4:et===null||et.memoizedState.isDehydrated&&!(dt.flags&256)||(dt.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(et,dt),S$4(dt),null;case 5:Bh(dt);var Tt=xh(wh.current);if($t=dt.type,et!==null&&dt.stateNode!=null)Bj(et,dt,$t,kt,Tt),et.ref!==dt.ref&&(dt.flags|=512,dt.flags|=2097152);else{if(!kt){if(dt.stateNode===null)throw Error(p$4(166));return S$4(dt),null}if(et=xh(uh.current),Gg(dt)){kt=dt.stateNode,$t=dt.type;var Dt=dt.memoizedProps;switch(kt[Of]=dt,kt[Pf]=Dt,et=(dt.mode&1)!==0,$t){case"dialog":D$4("cancel",kt),D$4("close",kt);break;case"iframe":case"object":case"embed":D$4("load",kt);break;case"video":case"audio":for(Tt=0;Tt<lf.length;Tt++)D$4(lf[Tt],kt);break;case"source":D$4("error",kt);break;case"img":case"image":case"link":D$4("error",kt),D$4("load",kt);break;case"details":D$4("toggle",kt);break;case"input":Za(kt,Dt),D$4("invalid",kt);break;case"select":kt._wrapperState={wasMultiple:!!Dt.multiple},D$4("invalid",kt);break;case"textarea":hb(kt,Dt),D$4("invalid",kt)}ub($t,Dt),Tt=null;for(var Ft in Dt)if(Dt.hasOwnProperty(Ft)){var Ut=Dt[Ft];Ft==="children"?typeof Ut=="string"?kt.textContent!==Ut&&(Dt.suppressHydrationWarning!==!0&&Af(kt.textContent,Ut,et),Tt=["children",Ut]):typeof Ut=="number"&&kt.textContent!==""+Ut&&(Dt.suppressHydrationWarning!==!0&&Af(kt.textContent,Ut,et),Tt=["children",""+Ut]):ea.hasOwnProperty(Ft)&&Ut!=null&&Ft==="onScroll"&&D$4("scroll",kt)}switch($t){case"input":Va(kt),db(kt,Dt,!0);break;case"textarea":Va(kt),jb(kt);break;case"select":case"option":break;default:typeof Dt.onClick=="function"&&(kt.onclick=Bf)}kt=Tt,dt.updateQueue=kt,kt!==null&&(dt.flags|=4)}else{Ft=Tt.nodeType===9?Tt:Tt.ownerDocument,et==="http://www.w3.org/1999/xhtml"&&(et=kb($t)),et==="http://www.w3.org/1999/xhtml"?$t==="script"?(et=Ft.createElement("div"),et.innerHTML="<script><\/script>",et=et.removeChild(et.firstChild)):typeof kt.is=="string"?et=Ft.createElement($t,{is:kt.is}):(et=Ft.createElement($t),$t==="select"&&(Ft=et,kt.multiple?Ft.multiple=!0:kt.size&&(Ft.size=kt.size))):et=Ft.createElementNS(et,$t),et[Of]=dt,et[Pf]=kt,zj(et,dt,!1,!1),dt.stateNode=et;e:{switch(Ft=vb($t,kt),$t){case"dialog":D$4("cancel",et),D$4("close",et),Tt=kt;break;case"iframe":case"object":case"embed":D$4("load",et),Tt=kt;break;case"video":case"audio":for(Tt=0;Tt<lf.length;Tt++)D$4(lf[Tt],et);Tt=kt;break;case"source":D$4("error",et),Tt=kt;break;case"img":case"image":case"link":D$4("error",et),D$4("load",et),Tt=kt;break;case"details":D$4("toggle",et),Tt=kt;break;case"input":Za(et,kt),Tt=Ya(et,kt),D$4("invalid",et);break;case"option":Tt=kt;break;case"select":et._wrapperState={wasMultiple:!!kt.multiple},Tt=A$7({},kt,{value:void 0}),D$4("invalid",et);break;case"textarea":hb(et,kt),Tt=gb(et,kt),D$4("invalid",et);break;default:Tt=kt}ub($t,Tt),Ut=Tt;for(Dt in Ut)if(Ut.hasOwnProperty(Dt)){var Ht=Ut[Dt];Dt==="style"?sb(et,Ht):Dt==="dangerouslySetInnerHTML"?(Ht=Ht?Ht.__html:void 0,Ht!=null&&nb(et,Ht)):Dt==="children"?typeof Ht=="string"?($t!=="textarea"||Ht!=="")&&ob(et,Ht):typeof Ht=="number"&&ob(et,""+Ht):Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&Dt!=="autoFocus"&&(ea.hasOwnProperty(Dt)?Ht!=null&&Dt==="onScroll"&&D$4("scroll",et):Ht!=null&&ta$1(et,Dt,Ht,Ft))}switch($t){case"input":Va(et),db(et,kt,!1);break;case"textarea":Va(et),jb(et);break;case"option":kt.value!=null&&et.setAttribute("value",""+Sa(kt.value));break;case"select":et.multiple=!!kt.multiple,Dt=kt.value,Dt!=null?fb(et,!!kt.multiple,Dt,!1):kt.defaultValue!=null&&fb(et,!!kt.multiple,kt.defaultValue,!0);break;default:typeof Tt.onClick=="function"&&(et.onclick=Bf)}switch($t){case"button":case"input":case"select":case"textarea":kt=!!kt.autoFocus;break e;case"img":kt=!0;break e;default:kt=!1}}kt&&(dt.flags|=4)}dt.ref!==null&&(dt.flags|=512,dt.flags|=2097152)}return S$4(dt),null;case 6:if(et&&dt.stateNode!=null)Cj(et,dt,et.memoizedProps,kt);else{if(typeof kt!="string"&&dt.stateNode===null)throw Error(p$4(166));if($t=xh(wh.current),xh(uh.current),Gg(dt)){if(kt=dt.stateNode,$t=dt.memoizedProps,kt[Of]=dt,(Dt=kt.nodeValue!==$t)&&(et=xg,et!==null))switch(et.tag){case 3:Af(kt.nodeValue,$t,(et.mode&1)!==0);break;case 5:et.memoizedProps.suppressHydrationWarning!==!0&&Af(kt.nodeValue,$t,(et.mode&1)!==0)}Dt&&(dt.flags|=4)}else kt=($t.nodeType===9?$t:$t.ownerDocument).createTextNode(kt),kt[Of]=dt,dt.stateNode=kt}return S$4(dt),null;case 13:if(E$7(L$9),kt=dt.memoizedState,et===null||et.memoizedState!==null&&et.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&dt.mode&1&&!(dt.flags&128))Hg(),Ig(),dt.flags|=98560,Dt=!1;else if(Dt=Gg(dt),kt!==null&&kt.dehydrated!==null){if(et===null){if(!Dt)throw Error(p$4(318));if(Dt=dt.memoizedState,Dt=Dt!==null?Dt.dehydrated:null,!Dt)throw Error(p$4(317));Dt[Of]=dt}else Ig(),!(dt.flags&128)&&(dt.memoizedState=null),dt.flags|=4;S$4(dt),Dt=!1}else zg!==null&&(Fj(zg),zg=null),Dt=!0;if(!Dt)return dt.flags&65536?dt:null}return dt.flags&128?(dt.lanes=$t,dt):(kt=kt!==null,kt!==(et!==null&&et.memoizedState!==null)&&kt&&(dt.child.flags|=8192,dt.mode&1&&(et===null||L$9.current&1?T$5===0&&(T$5=3):tj())),dt.updateQueue!==null&&(dt.flags|=4),S$4(dt),null);case 4:return zh(),Aj(et,dt),et===null&&sf(dt.stateNode.containerInfo),S$4(dt),null;case 10:return ah(dt.type._context),S$4(dt),null;case 17:return Zf(dt.type)&&$f(),S$4(dt),null;case 19:if(E$7(L$9),Dt=dt.memoizedState,Dt===null)return S$4(dt),null;if(kt=(dt.flags&128)!==0,Ft=Dt.rendering,Ft===null)if(kt)Dj(Dt,!1);else{if(T$5!==0||et!==null&&et.flags&128)for(et=dt.child;et!==null;){if(Ft=Ch(et),Ft!==null){for(dt.flags|=128,Dj(Dt,!1),kt=Ft.updateQueue,kt!==null&&(dt.updateQueue=kt,dt.flags|=4),dt.subtreeFlags=0,kt=$t,$t=dt.child;$t!==null;)Dt=$t,et=kt,Dt.flags&=14680066,Ft=Dt.alternate,Ft===null?(Dt.childLanes=0,Dt.lanes=et,Dt.child=null,Dt.subtreeFlags=0,Dt.memoizedProps=null,Dt.memoizedState=null,Dt.updateQueue=null,Dt.dependencies=null,Dt.stateNode=null):(Dt.childLanes=Ft.childLanes,Dt.lanes=Ft.lanes,Dt.child=Ft.child,Dt.subtreeFlags=0,Dt.deletions=null,Dt.memoizedProps=Ft.memoizedProps,Dt.memoizedState=Ft.memoizedState,Dt.updateQueue=Ft.updateQueue,Dt.type=Ft.type,et=Ft.dependencies,Dt.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext}),$t=$t.sibling;return G$3(L$9,L$9.current&1|2),dt.child}et=et.sibling}Dt.tail!==null&&B$5()>Gj&&(dt.flags|=128,kt=!0,Dj(Dt,!1),dt.lanes=4194304)}else{if(!kt)if(et=Ch(Ft),et!==null){if(dt.flags|=128,kt=!0,$t=et.updateQueue,$t!==null&&(dt.updateQueue=$t,dt.flags|=4),Dj(Dt,!0),Dt.tail===null&&Dt.tailMode==="hidden"&&!Ft.alternate&&!I$4)return S$4(dt),null}else 2*B$5()-Dt.renderingStartTime>Gj&&$t!==1073741824&&(dt.flags|=128,kt=!0,Dj(Dt,!1),dt.lanes=4194304);Dt.isBackwards?(Ft.sibling=dt.child,dt.child=Ft):($t=Dt.last,$t!==null?$t.sibling=Ft:dt.child=Ft,Dt.last=Ft)}return Dt.tail!==null?(dt=Dt.tail,Dt.rendering=dt,Dt.tail=dt.sibling,Dt.renderingStartTime=B$5(),dt.sibling=null,$t=L$9.current,G$3(L$9,kt?$t&1|2:$t&1),dt):(S$4(dt),null);case 22:case 23:return Hj(),kt=dt.memoizedState!==null,et!==null&&et.memoizedState!==null!==kt&&(dt.flags|=8192),kt&&dt.mode&1?fj&1073741824&&(S$4(dt),dt.subtreeFlags&6&&(dt.flags|=8192)):S$4(dt),null;case 24:return null;case 25:return null}throw Error(p$4(156,dt.tag))}function Ij(et,dt){switch(wg(dt),dt.tag){case 1:return Zf(dt.type)&&$f(),et=dt.flags,et&65536?(dt.flags=et&-65537|128,dt):null;case 3:return zh(),E$7(Wf),E$7(H$2),Eh(),et=dt.flags,et&65536&&!(et&128)?(dt.flags=et&-65537|128,dt):null;case 5:return Bh(dt),null;case 13:if(E$7(L$9),et=dt.memoizedState,et!==null&&et.dehydrated!==null){if(dt.alternate===null)throw Error(p$4(340));Ig()}return et=dt.flags,et&65536?(dt.flags=et&-65537|128,dt):null;case 19:return E$7(L$9),null;case 4:return zh(),null;case 10:return ah(dt.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$5=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Lj(et,dt){var $t=et.ref;if($t!==null)if(typeof $t=="function")try{$t(null)}catch(kt){W$8(et,dt,kt)}else $t.current=null}function Mj(et,dt,$t){try{$t()}catch(kt){W$8(et,dt,kt)}}var Nj=!1;function Oj(et,dt){if(Cf=dd,et=Me$2(),Ne(et)){if("selectionStart"in et)var $t={start:et.selectionStart,end:et.selectionEnd};else e:{$t=($t=et.ownerDocument)&&$t.defaultView||window;var kt=$t.getSelection&&$t.getSelection();if(kt&&kt.rangeCount!==0){$t=kt.anchorNode;var Tt=kt.anchorOffset,Dt=kt.focusNode;kt=kt.focusOffset;try{$t.nodeType,Dt.nodeType}catch{$t=null;break e}var Ft=0,Ut=-1,Ht=-1,Kt=0,Yt=0,Jt=et,Zt=null;t:for(;;){for(var er;Jt!==$t||Tt!==0&&Jt.nodeType!==3||(Ut=Ft+Tt),Jt!==Dt||kt!==0&&Jt.nodeType!==3||(Ht=Ft+kt),Jt.nodeType===3&&(Ft+=Jt.nodeValue.length),(er=Jt.firstChild)!==null;)Zt=Jt,Jt=er;for(;;){if(Jt===et)break t;if(Zt===$t&&++Kt===Tt&&(Ut=Ft),Zt===Dt&&++Yt===kt&&(Ht=Ft),(er=Jt.nextSibling)!==null)break;Jt=Zt,Zt=Jt.parentNode}Jt=er}$t=Ut===-1||Ht===-1?null:{start:Ut,end:Ht}}else $t=null}$t=$t||{start:0,end:0}}else $t=null;for(Df={focusedElem:et,selectionRange:$t},dd=!1,V$3=dt;V$3!==null;)if(dt=V$3,et=dt.child,(dt.subtreeFlags&1028)!==0&&et!==null)et.return=dt,V$3=et;else for(;V$3!==null;){dt=V$3;try{var rr=dt.alternate;if(dt.flags&1024)switch(dt.tag){case 0:case 11:case 15:break;case 1:if(rr!==null){var sr=rr.memoizedProps,nr=rr.memoizedState,ir=dt.stateNode,or=ir.getSnapshotBeforeUpdate(dt.elementType===dt.type?sr:Ci(dt.type,sr),nr);ir.__reactInternalSnapshotBeforeUpdate=or}break;case 3:var lr=dt.stateNode.containerInfo;lr.nodeType===1?lr.textContent="":lr.nodeType===9&&lr.documentElement&&lr.removeChild(lr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$4(163))}}catch(cr){W$8(dt,dt.return,cr)}if(et=dt.sibling,et!==null){et.return=dt.return,V$3=et;break}V$3=dt.return}return rr=Nj,Nj=!1,rr}function Pj(et,dt,$t){var kt=dt.updateQueue;if(kt=kt!==null?kt.lastEffect:null,kt!==null){var Tt=kt=kt.next;do{if((Tt.tag&et)===et){var Dt=Tt.destroy;Tt.destroy=void 0,Dt!==void 0&&Mj(dt,$t,Dt)}Tt=Tt.next}while(Tt!==kt)}}function Qj(et,dt){if(dt=dt.updateQueue,dt=dt!==null?dt.lastEffect:null,dt!==null){var $t=dt=dt.next;do{if(($t.tag&et)===et){var kt=$t.create;$t.destroy=kt()}$t=$t.next}while($t!==dt)}}function Rj(et){var dt=et.ref;if(dt!==null){var $t=et.stateNode;switch(et.tag){case 5:et=$t;break;default:et=$t}typeof dt=="function"?dt(et):dt.current=et}}function Sj(et){var dt=et.alternate;dt!==null&&(et.alternate=null,Sj(dt)),et.child=null,et.deletions=null,et.sibling=null,et.tag===5&&(dt=et.stateNode,dt!==null&&(delete dt[Of],delete dt[Pf],delete dt[of],delete dt[Qf],delete dt[Rf])),et.stateNode=null,et.return=null,et.dependencies=null,et.memoizedProps=null,et.memoizedState=null,et.pendingProps=null,et.stateNode=null,et.updateQueue=null}function Tj(et){return et.tag===5||et.tag===3||et.tag===4}function Uj(et){e:for(;;){for(;et.sibling===null;){if(et.return===null||Tj(et.return))return null;et=et.return}for(et.sibling.return=et.return,et=et.sibling;et.tag!==5&&et.tag!==6&&et.tag!==18;){if(et.flags&2||et.child===null||et.tag===4)continue e;et.child.return=et,et=et.child}if(!(et.flags&2))return et.stateNode}}function Vj(et,dt,$t){var kt=et.tag;if(kt===5||kt===6)et=et.stateNode,dt?$t.nodeType===8?$t.parentNode.insertBefore(et,dt):$t.insertBefore(et,dt):($t.nodeType===8?(dt=$t.parentNode,dt.insertBefore(et,$t)):(dt=$t,dt.appendChild(et)),$t=$t._reactRootContainer,$t!=null||dt.onclick!==null||(dt.onclick=Bf));else if(kt!==4&&(et=et.child,et!==null))for(Vj(et,dt,$t),et=et.sibling;et!==null;)Vj(et,dt,$t),et=et.sibling}function Wj(et,dt,$t){var kt=et.tag;if(kt===5||kt===6)et=et.stateNode,dt?$t.insertBefore(et,dt):$t.appendChild(et);else if(kt!==4&&(et=et.child,et!==null))for(Wj(et,dt,$t),et=et.sibling;et!==null;)Wj(et,dt,$t),et=et.sibling}var X$7=null,Xj=!1;function Yj(et,dt,$t){for($t=$t.child;$t!==null;)Zj(et,dt,$t),$t=$t.sibling}function Zj(et,dt,$t){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,$t)}catch{}switch($t.tag){case 5:U$5||Lj($t,dt);case 6:var kt=X$7,Tt=Xj;X$7=null,Yj(et,dt,$t),X$7=kt,Xj=Tt,X$7!==null&&(Xj?(et=X$7,$t=$t.stateNode,et.nodeType===8?et.parentNode.removeChild($t):et.removeChild($t)):X$7.removeChild($t.stateNode));break;case 18:X$7!==null&&(Xj?(et=X$7,$t=$t.stateNode,et.nodeType===8?Kf(et.parentNode,$t):et.nodeType===1&&Kf(et,$t),bd(et)):Kf(X$7,$t.stateNode));break;case 4:kt=X$7,Tt=Xj,X$7=$t.stateNode.containerInfo,Xj=!0,Yj(et,dt,$t),X$7=kt,Xj=Tt;break;case 0:case 11:case 14:case 15:if(!U$5&&(kt=$t.updateQueue,kt!==null&&(kt=kt.lastEffect,kt!==null))){Tt=kt=kt.next;do{var Dt=Tt,Ft=Dt.destroy;Dt=Dt.tag,Ft!==void 0&&(Dt&2||Dt&4)&&Mj($t,dt,Ft),Tt=Tt.next}while(Tt!==kt)}Yj(et,dt,$t);break;case 1:if(!U$5&&(Lj($t,dt),kt=$t.stateNode,typeof kt.componentWillUnmount=="function"))try{kt.props=$t.memoizedProps,kt.state=$t.memoizedState,kt.componentWillUnmount()}catch(Ut){W$8($t,dt,Ut)}Yj(et,dt,$t);break;case 21:Yj(et,dt,$t);break;case 22:$t.mode&1?(U$5=(kt=U$5)||$t.memoizedState!==null,Yj(et,dt,$t),U$5=kt):Yj(et,dt,$t);break;default:Yj(et,dt,$t)}}function ak(et){var dt=et.updateQueue;if(dt!==null){et.updateQueue=null;var $t=et.stateNode;$t===null&&($t=et.stateNode=new Kj),dt.forEach(function(kt){var Tt=bk.bind(null,et,kt);$t.has(kt)||($t.add(kt),kt.then(Tt,Tt))})}}function ck(et,dt){var $t=dt.deletions;if($t!==null)for(var kt=0;kt<$t.length;kt++){var Tt=$t[kt];try{var Dt=et,Ft=dt,Ut=Ft;e:for(;Ut!==null;){switch(Ut.tag){case 5:X$7=Ut.stateNode,Xj=!1;break e;case 3:X$7=Ut.stateNode.containerInfo,Xj=!0;break e;case 4:X$7=Ut.stateNode.containerInfo,Xj=!0;break e}Ut=Ut.return}if(X$7===null)throw Error(p$4(160));Zj(Dt,Ft,Tt),X$7=null,Xj=!1;var Ht=Tt.alternate;Ht!==null&&(Ht.return=null),Tt.return=null}catch(Kt){W$8(Tt,dt,Kt)}}if(dt.subtreeFlags&12854)for(dt=dt.child;dt!==null;)dk(dt,et),dt=dt.sibling}function dk(et,dt){var $t=et.alternate,kt=et.flags;switch(et.tag){case 0:case 11:case 14:case 15:if(ck(dt,et),ek(et),kt&4){try{Pj(3,et,et.return),Qj(3,et)}catch(sr){W$8(et,et.return,sr)}try{Pj(5,et,et.return)}catch(sr){W$8(et,et.return,sr)}}break;case 1:ck(dt,et),ek(et),kt&512&&$t!==null&&Lj($t,$t.return);break;case 5:if(ck(dt,et),ek(et),kt&512&&$t!==null&&Lj($t,$t.return),et.flags&32){var Tt=et.stateNode;try{ob(Tt,"")}catch(sr){W$8(et,et.return,sr)}}if(kt&4&&(Tt=et.stateNode,Tt!=null)){var Dt=et.memoizedProps,Ft=$t!==null?$t.memoizedProps:Dt,Ut=et.type,Ht=et.updateQueue;if(et.updateQueue=null,Ht!==null)try{Ut==="input"&&Dt.type==="radio"&&Dt.name!=null&&ab(Tt,Dt),vb(Ut,Ft);var Kt=vb(Ut,Dt);for(Ft=0;Ft<Ht.length;Ft+=2){var Yt=Ht[Ft],Jt=Ht[Ft+1];Yt==="style"?sb(Tt,Jt):Yt==="dangerouslySetInnerHTML"?nb(Tt,Jt):Yt==="children"?ob(Tt,Jt):ta$1(Tt,Yt,Jt,Kt)}switch(Ut){case"input":bb(Tt,Dt);break;case"textarea":ib(Tt,Dt);break;case"select":var Zt=Tt._wrapperState.wasMultiple;Tt._wrapperState.wasMultiple=!!Dt.multiple;var er=Dt.value;er!=null?fb(Tt,!!Dt.multiple,er,!1):Zt!==!!Dt.multiple&&(Dt.defaultValue!=null?fb(Tt,!!Dt.multiple,Dt.defaultValue,!0):fb(Tt,!!Dt.multiple,Dt.multiple?[]:"",!1))}Tt[Pf]=Dt}catch(sr){W$8(et,et.return,sr)}}break;case 6:if(ck(dt,et),ek(et),kt&4){if(et.stateNode===null)throw Error(p$4(162));Tt=et.stateNode,Dt=et.memoizedProps;try{Tt.nodeValue=Dt}catch(sr){W$8(et,et.return,sr)}}break;case 3:if(ck(dt,et),ek(et),kt&4&&$t!==null&&$t.memoizedState.isDehydrated)try{bd(dt.containerInfo)}catch(sr){W$8(et,et.return,sr)}break;case 4:ck(dt,et),ek(et);break;case 13:ck(dt,et),ek(et),Tt=et.child,Tt.flags&8192&&(Dt=Tt.memoizedState!==null,Tt.stateNode.isHidden=Dt,!Dt||Tt.alternate!==null&&Tt.alternate.memoizedState!==null||(fk=B$5())),kt&4&&ak(et);break;case 22:if(Yt=$t!==null&&$t.memoizedState!==null,et.mode&1?(U$5=(Kt=U$5)||Yt,ck(dt,et),U$5=Kt):ck(dt,et),ek(et),kt&8192){if(Kt=et.memoizedState!==null,(et.stateNode.isHidden=Kt)&&!Yt&&et.mode&1)for(V$3=et,Yt=et.child;Yt!==null;){for(Jt=V$3=Yt;V$3!==null;){switch(Zt=V$3,er=Zt.child,Zt.tag){case 0:case 11:case 14:case 15:Pj(4,Zt,Zt.return);break;case 1:Lj(Zt,Zt.return);var rr=Zt.stateNode;if(typeof rr.componentWillUnmount=="function"){kt=Zt,$t=Zt.return;try{dt=kt,rr.props=dt.memoizedProps,rr.state=dt.memoizedState,rr.componentWillUnmount()}catch(sr){W$8(kt,$t,sr)}}break;case 5:Lj(Zt,Zt.return);break;case 22:if(Zt.memoizedState!==null){gk(Jt);continue}}er!==null?(er.return=Zt,V$3=er):gk(Jt)}Yt=Yt.sibling}e:for(Yt=null,Jt=et;;){if(Jt.tag===5){if(Yt===null){Yt=Jt;try{Tt=Jt.stateNode,Kt?(Dt=Tt.style,typeof Dt.setProperty=="function"?Dt.setProperty("display","none","important"):Dt.display="none"):(Ut=Jt.stateNode,Ht=Jt.memoizedProps.style,Ft=Ht!=null&&Ht.hasOwnProperty("display")?Ht.display:null,Ut.style.display=rb("display",Ft))}catch(sr){W$8(et,et.return,sr)}}}else if(Jt.tag===6){if(Yt===null)try{Jt.stateNode.nodeValue=Kt?"":Jt.memoizedProps}catch(sr){W$8(et,et.return,sr)}}else if((Jt.tag!==22&&Jt.tag!==23||Jt.memoizedState===null||Jt===et)&&Jt.child!==null){Jt.child.return=Jt,Jt=Jt.child;continue}if(Jt===et)break e;for(;Jt.sibling===null;){if(Jt.return===null||Jt.return===et)break e;Yt===Jt&&(Yt=null),Jt=Jt.return}Yt===Jt&&(Yt=null),Jt.sibling.return=Jt.return,Jt=Jt.sibling}}break;case 19:ck(dt,et),ek(et),kt&4&&ak(et);break;case 21:break;default:ck(dt,et),ek(et)}}function ek(et){var dt=et.flags;if(dt&2){try{e:{for(var $t=et.return;$t!==null;){if(Tj($t)){var kt=$t;break e}$t=$t.return}throw Error(p$4(160))}switch(kt.tag){case 5:var Tt=kt.stateNode;kt.flags&32&&(ob(Tt,""),kt.flags&=-33);var Dt=Uj(et);Wj(et,Dt,Tt);break;case 3:case 4:var Ft=kt.stateNode.containerInfo,Ut=Uj(et);Vj(et,Ut,Ft);break;default:throw Error(p$4(161))}}catch(Ht){W$8(et,et.return,Ht)}et.flags&=-3}dt&4096&&(et.flags&=-4097)}function hk(et,dt,$t){V$3=et,ik(et)}function ik(et,dt,$t){for(var kt=(et.mode&1)!==0;V$3!==null;){var Tt=V$3,Dt=Tt.child;if(Tt.tag===22&&kt){var Ft=Tt.memoizedState!==null||Jj;if(!Ft){var Ut=Tt.alternate,Ht=Ut!==null&&Ut.memoizedState!==null||U$5;Ut=Jj;var Kt=U$5;if(Jj=Ft,(U$5=Ht)&&!Kt)for(V$3=Tt;V$3!==null;)Ft=V$3,Ht=Ft.child,Ft.tag===22&&Ft.memoizedState!==null?jk(Tt):Ht!==null?(Ht.return=Ft,V$3=Ht):jk(Tt);for(;Dt!==null;)V$3=Dt,ik(Dt),Dt=Dt.sibling;V$3=Tt,Jj=Ut,U$5=Kt}kk(et)}else Tt.subtreeFlags&8772&&Dt!==null?(Dt.return=Tt,V$3=Dt):kk(et)}}function kk(et){for(;V$3!==null;){var dt=V$3;if(dt.flags&8772){var $t=dt.alternate;try{if(dt.flags&8772)switch(dt.tag){case 0:case 11:case 15:U$5||Qj(5,dt);break;case 1:var kt=dt.stateNode;if(dt.flags&4&&!U$5)if($t===null)kt.componentDidMount();else{var Tt=dt.elementType===dt.type?$t.memoizedProps:Ci(dt.type,$t.memoizedProps);kt.componentDidUpdate(Tt,$t.memoizedState,kt.__reactInternalSnapshotBeforeUpdate)}var Dt=dt.updateQueue;Dt!==null&&sh(dt,Dt,kt);break;case 3:var Ft=dt.updateQueue;if(Ft!==null){if($t=null,dt.child!==null)switch(dt.child.tag){case 5:$t=dt.child.stateNode;break;case 1:$t=dt.child.stateNode}sh(dt,Ft,$t)}break;case 5:var Ut=dt.stateNode;if($t===null&&dt.flags&4){$t=Ut;var Ht=dt.memoizedProps;switch(dt.type){case"button":case"input":case"select":case"textarea":Ht.autoFocus&&$t.focus();break;case"img":Ht.src&&($t.src=Ht.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(dt.memoizedState===null){var Kt=dt.alternate;if(Kt!==null){var Yt=Kt.memoizedState;if(Yt!==null){var Jt=Yt.dehydrated;Jt!==null&&bd(Jt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$4(163))}U$5||dt.flags&512&&Rj(dt)}catch(Zt){W$8(dt,dt.return,Zt)}}if(dt===et){V$3=null;break}if($t=dt.sibling,$t!==null){$t.return=dt.return,V$3=$t;break}V$3=dt.return}}function gk(et){for(;V$3!==null;){var dt=V$3;if(dt===et){V$3=null;break}var $t=dt.sibling;if($t!==null){$t.return=dt.return,V$3=$t;break}V$3=dt.return}}function jk(et){for(;V$3!==null;){var dt=V$3;try{switch(dt.tag){case 0:case 11:case 15:var $t=dt.return;try{Qj(4,dt)}catch(Ht){W$8(dt,$t,Ht)}break;case 1:var kt=dt.stateNode;if(typeof kt.componentDidMount=="function"){var Tt=dt.return;try{kt.componentDidMount()}catch(Ht){W$8(dt,Tt,Ht)}}var Dt=dt.return;try{Rj(dt)}catch(Ht){W$8(dt,Dt,Ht)}break;case 5:var Ft=dt.return;try{Rj(dt)}catch(Ht){W$8(dt,Ft,Ht)}}}catch(Ht){W$8(dt,dt.return,Ht)}if(dt===et){V$3=null;break}var Ut=dt.sibling;if(Ut!==null){Ut.return=dt.return,V$3=Ut;break}V$3=dt.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$4=0,Q$4=null,Y$4=null,Z$5=0,fj=0,ej=Uf(0),T$5=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk$1=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$4(){return K$4&6?B$5():Ak!==-1?Ak:Ak=B$5()}function yi(et){return et.mode&1?K$4&2&&Z$5!==0?Z$5&-Z$5:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(et=C$8,et!==0||(et=window.event,et=et===void 0?16:jd(et.type)),et):1}function gi(et,dt,$t,kt){if(50<yk)throw yk=0,zk=null,Error(p$4(185));Ac(et,$t,kt),(!(K$4&2)||et!==Q$4)&&(et===Q$4&&(!(K$4&2)&&(qk|=$t),T$5===4&&Ck(et,Z$5)),Dk(et,kt),$t===1&&K$4===0&&!(dt.mode&1)&&(Gj=B$5()+500,fg&&jg()))}function Dk(et,dt){var $t=et.callbackNode;wc(et,dt);var kt=uc(et,et===Q$4?Z$5:0);if(kt===0)$t!==null&&bc($t),et.callbackNode=null,et.callbackPriority=0;else if(dt=kt&-kt,et.callbackPriority!==dt){if($t!=null&&bc($t),dt===1)et.tag===0?ig(Ek.bind(null,et)):hg(Ek.bind(null,et)),Jf(function(){!(K$4&6)&&jg()}),$t=null;else{switch(Dc(kt)){case 1:$t=fc;break;case 4:$t=gc;break;case 16:$t=hc;break;case 536870912:$t=jc;break;default:$t=hc}$t=Fk($t,Gk.bind(null,et))}et.callbackPriority=dt,et.callbackNode=$t}}function Gk(et,dt){if(Ak=-1,Bk=0,K$4&6)throw Error(p$4(327));var $t=et.callbackNode;if(Hk()&&et.callbackNode!==$t)return null;var kt=uc(et,et===Q$4?Z$5:0);if(kt===0)return null;if(kt&30||kt&et.expiredLanes||dt)dt=Ik(et,kt);else{dt=kt;var Tt=K$4;K$4|=2;var Dt=Jk();(Q$4!==et||Z$5!==dt)&&(uk=null,Gj=B$5()+500,Kk(et,dt));do try{Lk();break}catch(Ut){Mk(et,Ut)}while(1);$g(),mk.current=Dt,K$4=Tt,Y$4!==null?dt=0:(Q$4=null,Z$5=0,dt=T$5)}if(dt!==0){if(dt===2&&(Tt=xc(et),Tt!==0&&(kt=Tt,dt=Nk(et,Tt))),dt===1)throw $t=pk,Kk(et,0),Ck(et,kt),Dk(et,B$5()),$t;if(dt===6)Ck(et,kt);else{if(Tt=et.current.alternate,!(kt&30)&&!Ok(Tt)&&(dt=Ik(et,kt),dt===2&&(Dt=xc(et),Dt!==0&&(kt=Dt,dt=Nk(et,Dt))),dt===1))throw $t=pk,Kk(et,0),Ck(et,kt),Dk(et,B$5()),$t;switch(et.finishedWork=Tt,et.finishedLanes=kt,dt){case 0:case 1:throw Error(p$4(345));case 2:Pk(et,tk$1,uk);break;case 3:if(Ck(et,kt),(kt&130023424)===kt&&(dt=fk+500-B$5(),10<dt)){if(uc(et,0)!==0)break;if(Tt=et.suspendedLanes,(Tt&kt)!==kt){R$4(),et.pingedLanes|=et.suspendedLanes&Tt;break}et.timeoutHandle=Ff(Pk.bind(null,et,tk$1,uk),dt);break}Pk(et,tk$1,uk);break;case 4:if(Ck(et,kt),(kt&4194240)===kt)break;for(dt=et.eventTimes,Tt=-1;0<kt;){var Ft=31-oc(kt);Dt=1<<Ft,Ft=dt[Ft],Ft>Tt&&(Tt=Ft),kt&=~Dt}if(kt=Tt,kt=B$5()-kt,kt=(120>kt?120:480>kt?480:1080>kt?1080:1920>kt?1920:3e3>kt?3e3:4320>kt?4320:1960*lk(kt/1960))-kt,10<kt){et.timeoutHandle=Ff(Pk.bind(null,et,tk$1,uk),kt);break}Pk(et,tk$1,uk);break;case 5:Pk(et,tk$1,uk);break;default:throw Error(p$4(329))}}}return Dk(et,B$5()),et.callbackNode===$t?Gk.bind(null,et):null}function Nk(et,dt){var $t=sk;return et.current.memoizedState.isDehydrated&&(Kk(et,dt).flags|=256),et=Ik(et,dt),et!==2&&(dt=tk$1,tk$1=$t,dt!==null&&Fj(dt)),et}function Fj(et){tk$1===null?tk$1=et:tk$1.push.apply(tk$1,et)}function Ok(et){for(var dt=et;;){if(dt.flags&16384){var $t=dt.updateQueue;if($t!==null&&($t=$t.stores,$t!==null))for(var kt=0;kt<$t.length;kt++){var Tt=$t[kt],Dt=Tt.getSnapshot;Tt=Tt.value;try{if(!He$3(Dt(),Tt))return!1}catch{return!1}}}if($t=dt.child,dt.subtreeFlags&16384&&$t!==null)$t.return=dt,dt=$t;else{if(dt===et)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===et)return!0;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}}return!0}function Ck(et,dt){for(dt&=~rk,dt&=~qk,et.suspendedLanes|=dt,et.pingedLanes&=~dt,et=et.expirationTimes;0<dt;){var $t=31-oc(dt),kt=1<<$t;et[$t]=-1,dt&=~kt}}function Ek(et){if(K$4&6)throw Error(p$4(327));Hk();var dt=uc(et,0);if(!(dt&1))return Dk(et,B$5()),null;var $t=Ik(et,dt);if(et.tag!==0&&$t===2){var kt=xc(et);kt!==0&&(dt=kt,$t=Nk(et,kt))}if($t===1)throw $t=pk,Kk(et,0),Ck(et,dt),Dk(et,B$5()),$t;if($t===6)throw Error(p$4(345));return et.finishedWork=et.current.alternate,et.finishedLanes=dt,Pk(et,tk$1,uk),Dk(et,B$5()),null}function Qk(et,dt){var $t=K$4;K$4|=1;try{return et(dt)}finally{K$4=$t,K$4===0&&(Gj=B$5()+500,fg&&jg())}}function Rk(et){wk!==null&&wk.tag===0&&!(K$4&6)&&Hk();var dt=K$4;K$4|=1;var $t=ok.transition,kt=C$8;try{if(ok.transition=null,C$8=1,et)return et()}finally{C$8=kt,ok.transition=$t,K$4=dt,!(K$4&6)&&jg()}}function Hj(){fj=ej.current,E$7(ej)}function Kk(et,dt){et.finishedWork=null,et.finishedLanes=0;var $t=et.timeoutHandle;if($t!==-1&&(et.timeoutHandle=-1,Gf($t)),Y$4!==null)for($t=Y$4.return;$t!==null;){var kt=$t;switch(wg(kt),kt.tag){case 1:kt=kt.type.childContextTypes,kt!=null&&$f();break;case 3:zh(),E$7(Wf),E$7(H$2),Eh();break;case 5:Bh(kt);break;case 4:zh();break;case 13:E$7(L$9);break;case 19:E$7(L$9);break;case 10:ah(kt.type._context);break;case 22:case 23:Hj()}$t=$t.return}if(Q$4=et,Y$4=et=Pg(et.current,null),Z$5=fj=dt,T$5=0,pk=null,rk=qk=rh=0,tk$1=sk=null,fh!==null){for(dt=0;dt<fh.length;dt++)if($t=fh[dt],kt=$t.interleaved,kt!==null){$t.interleaved=null;var Tt=kt.next,Dt=$t.pending;if(Dt!==null){var Ft=Dt.next;Dt.next=Tt,kt.next=Ft}$t.pending=kt}fh=null}return et}function Mk(et,dt){do{var $t=Y$4;try{if($g(),Fh.current=Rh,Ih){for(var kt=M$6.memoizedState;kt!==null;){var Tt=kt.queue;Tt!==null&&(Tt.pending=null),kt=kt.next}Ih=!1}if(Hh=0,O$7=N$3=M$6=null,Jh=!1,Kh=0,nk.current=null,$t===null||$t.return===null){T$5=1,pk=dt,Y$4=null;break}e:{var Dt=et,Ft=$t.return,Ut=$t,Ht=dt;if(dt=Z$5,Ut.flags|=32768,Ht!==null&&typeof Ht=="object"&&typeof Ht.then=="function"){var Kt=Ht,Yt=Ut,Jt=Yt.tag;if(!(Yt.mode&1)&&(Jt===0||Jt===11||Jt===15)){var Zt=Yt.alternate;Zt?(Yt.updateQueue=Zt.updateQueue,Yt.memoizedState=Zt.memoizedState,Yt.lanes=Zt.lanes):(Yt.updateQueue=null,Yt.memoizedState=null)}var er=Ui(Ft);if(er!==null){er.flags&=-257,Vi(er,Ft,Ut,Dt,dt),er.mode&1&&Si(Dt,Kt,dt),dt=er,Ht=Kt;var rr=dt.updateQueue;if(rr===null){var sr=new Set;sr.add(Ht),dt.updateQueue=sr}else rr.add(Ht);break e}else{if(!(dt&1)){Si(Dt,Kt,dt),tj();break e}Ht=Error(p$4(426))}}else if(I$4&&Ut.mode&1){var nr=Ui(Ft);if(nr!==null){!(nr.flags&65536)&&(nr.flags|=256),Vi(nr,Ft,Ut,Dt,dt),Jg(Ji(Ht,Ut));break e}}Dt=Ht=Ji(Ht,Ut),T$5!==4&&(T$5=2),sk===null?sk=[Dt]:sk.push(Dt),Dt=Ft;do{switch(Dt.tag){case 3:Dt.flags|=65536,dt&=-dt,Dt.lanes|=dt;var ir=Ni(Dt,Ht,dt);ph(Dt,ir);break e;case 1:Ut=Ht;var or=Dt.type,lr=Dt.stateNode;if(!(Dt.flags&128)&&(typeof or.getDerivedStateFromError=="function"||lr!==null&&typeof lr.componentDidCatch=="function"&&(Ri===null||!Ri.has(lr)))){Dt.flags|=65536,dt&=-dt,Dt.lanes|=dt;var cr=Qi(Dt,Ut,dt);ph(Dt,cr);break e}}Dt=Dt.return}while(Dt!==null)}Sk($t)}catch(dr){dt=dr,Y$4===$t&&$t!==null&&(Y$4=$t=$t.return);continue}break}while(1)}function Jk(){var et=mk.current;return mk.current=Rh,et===null?Rh:et}function tj(){(T$5===0||T$5===3||T$5===2)&&(T$5=4),Q$4===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$4,Z$5)}function Ik(et,dt){var $t=K$4;K$4|=2;var kt=Jk();(Q$4!==et||Z$5!==dt)&&(uk=null,Kk(et,dt));do try{Tk();break}catch(Tt){Mk(et,Tt)}while(1);if($g(),K$4=$t,mk.current=kt,Y$4!==null)throw Error(p$4(261));return Q$4=null,Z$5=0,T$5}function Tk(){for(;Y$4!==null;)Uk(Y$4)}function Lk(){for(;Y$4!==null&&!cc();)Uk(Y$4)}function Uk(et){var dt=Vk(et.alternate,et,fj);et.memoizedProps=et.pendingProps,dt===null?Sk(et):Y$4=dt,nk.current=null}function Sk(et){var dt=et;do{var $t=dt.alternate;if(et=dt.return,dt.flags&32768){if($t=Ij($t,dt),$t!==null){$t.flags&=32767,Y$4=$t;return}if(et!==null)et.flags|=32768,et.subtreeFlags=0,et.deletions=null;else{T$5=6,Y$4=null;return}}else if($t=Ej($t,dt,fj),$t!==null){Y$4=$t;return}if(dt=dt.sibling,dt!==null){Y$4=dt;return}Y$4=dt=et}while(dt!==null);T$5===0&&(T$5=5)}function Pk(et,dt,$t){var kt=C$8,Tt=ok.transition;try{ok.transition=null,C$8=1,Wk(et,dt,$t,kt)}finally{ok.transition=Tt,C$8=kt}return null}function Wk(et,dt,$t,kt){do Hk();while(wk!==null);if(K$4&6)throw Error(p$4(327));$t=et.finishedWork;var Tt=et.finishedLanes;if($t===null)return null;if(et.finishedWork=null,et.finishedLanes=0,$t===et.current)throw Error(p$4(177));et.callbackNode=null,et.callbackPriority=0;var Dt=$t.lanes|$t.childLanes;if(Bc(et,Dt),et===Q$4&&(Y$4=Q$4=null,Z$5=0),!($t.subtreeFlags&2064)&&!($t.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),Dt=($t.flags&15990)!==0,$t.subtreeFlags&15990||Dt){Dt=ok.transition,ok.transition=null;var Ft=C$8;C$8=1;var Ut=K$4;K$4|=4,nk.current=null,Oj(et,$t),dk($t,et),Oe$1(Df),dd=!!Cf,Df=Cf=null,et.current=$t,hk($t),dc(),K$4=Ut,C$8=Ft,ok.transition=Dt}else et.current=$t;if(vk&&(vk=!1,wk=et,xk=Tt),Dt=et.pendingLanes,Dt===0&&(Ri=null),mc($t.stateNode),Dk(et,B$5()),dt!==null)for(kt=et.onRecoverableError,$t=0;$t<dt.length;$t++)Tt=dt[$t],kt(Tt.value,{componentStack:Tt.stack,digest:Tt.digest});if(Oi)throw Oi=!1,et=Pi,Pi=null,et;return xk&1&&et.tag!==0&&Hk(),Dt=et.pendingLanes,Dt&1?et===zk?yk++:(yk=0,zk=et):yk=0,jg(),null}function Hk(){if(wk!==null){var et=Dc(xk),dt=ok.transition,$t=C$8;try{if(ok.transition=null,C$8=16>et?16:et,wk===null)var kt=!1;else{if(et=wk,wk=null,xk=0,K$4&6)throw Error(p$4(331));var Tt=K$4;for(K$4|=4,V$3=et.current;V$3!==null;){var Dt=V$3,Ft=Dt.child;if(V$3.flags&16){var Ut=Dt.deletions;if(Ut!==null){for(var Ht=0;Ht<Ut.length;Ht++){var Kt=Ut[Ht];for(V$3=Kt;V$3!==null;){var Yt=V$3;switch(Yt.tag){case 0:case 11:case 15:Pj(8,Yt,Dt)}var Jt=Yt.child;if(Jt!==null)Jt.return=Yt,V$3=Jt;else for(;V$3!==null;){Yt=V$3;var Zt=Yt.sibling,er=Yt.return;if(Sj(Yt),Yt===Kt){V$3=null;break}if(Zt!==null){Zt.return=er,V$3=Zt;break}V$3=er}}}var rr=Dt.alternate;if(rr!==null){var sr=rr.child;if(sr!==null){rr.child=null;do{var nr=sr.sibling;sr.sibling=null,sr=nr}while(sr!==null)}}V$3=Dt}}if(Dt.subtreeFlags&2064&&Ft!==null)Ft.return=Dt,V$3=Ft;else e:for(;V$3!==null;){if(Dt=V$3,Dt.flags&2048)switch(Dt.tag){case 0:case 11:case 15:Pj(9,Dt,Dt.return)}var ir=Dt.sibling;if(ir!==null){ir.return=Dt.return,V$3=ir;break e}V$3=Dt.return}}var or=et.current;for(V$3=or;V$3!==null;){Ft=V$3;var lr=Ft.child;if(Ft.subtreeFlags&2064&&lr!==null)lr.return=Ft,V$3=lr;else e:for(Ft=or;V$3!==null;){if(Ut=V$3,Ut.flags&2048)try{switch(Ut.tag){case 0:case 11:case 15:Qj(9,Ut)}}catch(dr){W$8(Ut,Ut.return,dr)}if(Ut===Ft){V$3=null;break e}var cr=Ut.sibling;if(cr!==null){cr.return=Ut.return,V$3=cr;break e}V$3=Ut.return}}if(K$4=Tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,et)}catch{}kt=!0}return kt}finally{C$8=$t,ok.transition=dt}}return!1}function Xk(et,dt,$t){dt=Ji($t,dt),dt=Ni(et,dt,1),et=nh(et,dt,1),dt=R$4(),et!==null&&(Ac(et,1,dt),Dk(et,dt))}function W$8(et,dt,$t){if(et.tag===3)Xk(et,et,$t);else for(;dt!==null;){if(dt.tag===3){Xk(dt,et,$t);break}else if(dt.tag===1){var kt=dt.stateNode;if(typeof dt.type.getDerivedStateFromError=="function"||typeof kt.componentDidCatch=="function"&&(Ri===null||!Ri.has(kt))){et=Ji($t,et),et=Qi(dt,et,1),dt=nh(dt,et,1),et=R$4(),dt!==null&&(Ac(dt,1,et),Dk(dt,et));break}}dt=dt.return}}function Ti(et,dt,$t){var kt=et.pingCache;kt!==null&&kt.delete(dt),dt=R$4(),et.pingedLanes|=et.suspendedLanes&$t,Q$4===et&&(Z$5&$t)===$t&&(T$5===4||T$5===3&&(Z$5&130023424)===Z$5&&500>B$5()-fk?Kk(et,0):rk|=$t),Dk(et,dt)}function Yk(et,dt){dt===0&&(et.mode&1?(dt=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):dt=1);var $t=R$4();et=ih(et,dt),et!==null&&(Ac(et,dt,$t),Dk(et,$t))}function uj(et){var dt=et.memoizedState,$t=0;dt!==null&&($t=dt.retryLane),Yk(et,$t)}function bk(et,dt){var $t=0;switch(et.tag){case 13:var kt=et.stateNode,Tt=et.memoizedState;Tt!==null&&($t=Tt.retryLane);break;case 19:kt=et.stateNode;break;default:throw Error(p$4(314))}kt!==null&&kt.delete(dt),Yk(et,$t)}var Vk;Vk=function(et,dt,$t){if(et!==null)if(et.memoizedProps!==dt.pendingProps||Wf.current)dh=!0;else{if(!(et.lanes&$t)&&!(dt.flags&128))return dh=!1,yj(et,dt,$t);dh=!!(et.flags&131072)}else dh=!1,I$4&&dt.flags&1048576&&ug(dt,ng,dt.index);switch(dt.lanes=0,dt.tag){case 2:var kt=dt.type;ij(et,dt),et=dt.pendingProps;var Tt=Yf(dt,H$2.current);ch(dt,$t),Tt=Nh(null,dt,kt,et,Tt,$t);var Dt=Sh();return dt.flags|=1,typeof Tt=="object"&&Tt!==null&&typeof Tt.render=="function"&&Tt.$$typeof===void 0?(dt.tag=1,dt.memoizedState=null,dt.updateQueue=null,Zf(kt)?(Dt=!0,cg(dt)):Dt=!1,dt.memoizedState=Tt.state!==null&&Tt.state!==void 0?Tt.state:null,kh(dt),Tt.updater=Ei,dt.stateNode=Tt,Tt._reactInternals=dt,Ii(dt,kt,et,$t),dt=jj(null,dt,kt,!0,Dt,$t)):(dt.tag=0,I$4&&Dt&&vg(dt),Xi(null,dt,Tt,$t),dt=dt.child),dt;case 16:kt=dt.elementType;e:{switch(ij(et,dt),et=dt.pendingProps,Tt=kt._init,kt=Tt(kt._payload),dt.type=kt,Tt=dt.tag=Zk(kt),et=Ci(kt,et),Tt){case 0:dt=cj(null,dt,kt,et,$t);break e;case 1:dt=hj(null,dt,kt,et,$t);break e;case 11:dt=Yi(null,dt,kt,et,$t);break e;case 14:dt=$i(null,dt,kt,Ci(kt.type,et),$t);break e}throw Error(p$4(306,kt,""))}return dt;case 0:return kt=dt.type,Tt=dt.pendingProps,Tt=dt.elementType===kt?Tt:Ci(kt,Tt),cj(et,dt,kt,Tt,$t);case 1:return kt=dt.type,Tt=dt.pendingProps,Tt=dt.elementType===kt?Tt:Ci(kt,Tt),hj(et,dt,kt,Tt,$t);case 3:e:{if(kj(dt),et===null)throw Error(p$4(387));kt=dt.pendingProps,Dt=dt.memoizedState,Tt=Dt.element,lh(et,dt),qh(dt,kt,null,$t);var Ft=dt.memoizedState;if(kt=Ft.element,Dt.isDehydrated)if(Dt={element:kt,isDehydrated:!1,cache:Ft.cache,pendingSuspenseBoundaries:Ft.pendingSuspenseBoundaries,transitions:Ft.transitions},dt.updateQueue.baseState=Dt,dt.memoizedState=Dt,dt.flags&256){Tt=Ji(Error(p$4(423)),dt),dt=lj(et,dt,kt,$t,Tt);break e}else if(kt!==Tt){Tt=Ji(Error(p$4(424)),dt),dt=lj(et,dt,kt,$t,Tt);break e}else for(yg=Lf(dt.stateNode.containerInfo.firstChild),xg=dt,I$4=!0,zg=null,$t=Vg(dt,null,kt,$t),dt.child=$t;$t;)$t.flags=$t.flags&-3|4096,$t=$t.sibling;else{if(Ig(),kt===Tt){dt=Zi(et,dt,$t);break e}Xi(et,dt,kt,$t)}dt=dt.child}return dt;case 5:return Ah(dt),et===null&&Eg(dt),kt=dt.type,Tt=dt.pendingProps,Dt=et!==null?et.memoizedProps:null,Ft=Tt.children,Ef(kt,Tt)?Ft=null:Dt!==null&&Ef(kt,Dt)&&(dt.flags|=32),gj(et,dt),Xi(et,dt,Ft,$t),dt.child;case 6:return et===null&&Eg(dt),null;case 13:return oj(et,dt,$t);case 4:return yh(dt,dt.stateNode.containerInfo),kt=dt.pendingProps,et===null?dt.child=Ug(dt,null,kt,$t):Xi(et,dt,kt,$t),dt.child;case 11:return kt=dt.type,Tt=dt.pendingProps,Tt=dt.elementType===kt?Tt:Ci(kt,Tt),Yi(et,dt,kt,Tt,$t);case 7:return Xi(et,dt,dt.pendingProps,$t),dt.child;case 8:return Xi(et,dt,dt.pendingProps.children,$t),dt.child;case 12:return Xi(et,dt,dt.pendingProps.children,$t),dt.child;case 10:e:{if(kt=dt.type._context,Tt=dt.pendingProps,Dt=dt.memoizedProps,Ft=Tt.value,G$3(Wg,kt._currentValue),kt._currentValue=Ft,Dt!==null)if(He$3(Dt.value,Ft)){if(Dt.children===Tt.children&&!Wf.current){dt=Zi(et,dt,$t);break e}}else for(Dt=dt.child,Dt!==null&&(Dt.return=dt);Dt!==null;){var Ut=Dt.dependencies;if(Ut!==null){Ft=Dt.child;for(var Ht=Ut.firstContext;Ht!==null;){if(Ht.context===kt){if(Dt.tag===1){Ht=mh(-1,$t&-$t),Ht.tag=2;var Kt=Dt.updateQueue;if(Kt!==null){Kt=Kt.shared;var Yt=Kt.pending;Yt===null?Ht.next=Ht:(Ht.next=Yt.next,Yt.next=Ht),Kt.pending=Ht}}Dt.lanes|=$t,Ht=Dt.alternate,Ht!==null&&(Ht.lanes|=$t),bh(Dt.return,$t,dt),Ut.lanes|=$t;break}Ht=Ht.next}}else if(Dt.tag===10)Ft=Dt.type===dt.type?null:Dt.child;else if(Dt.tag===18){if(Ft=Dt.return,Ft===null)throw Error(p$4(341));Ft.lanes|=$t,Ut=Ft.alternate,Ut!==null&&(Ut.lanes|=$t),bh(Ft,$t,dt),Ft=Dt.sibling}else Ft=Dt.child;if(Ft!==null)Ft.return=Dt;else for(Ft=Dt;Ft!==null;){if(Ft===dt){Ft=null;break}if(Dt=Ft.sibling,Dt!==null){Dt.return=Ft.return,Ft=Dt;break}Ft=Ft.return}Dt=Ft}Xi(et,dt,Tt.children,$t),dt=dt.child}return dt;case 9:return Tt=dt.type,kt=dt.pendingProps.children,ch(dt,$t),Tt=eh(Tt),kt=kt(Tt),dt.flags|=1,Xi(et,dt,kt,$t),dt.child;case 14:return kt=dt.type,Tt=Ci(kt,dt.pendingProps),Tt=Ci(kt.type,Tt),$i(et,dt,kt,Tt,$t);case 15:return bj(et,dt,dt.type,dt.pendingProps,$t);case 17:return kt=dt.type,Tt=dt.pendingProps,Tt=dt.elementType===kt?Tt:Ci(kt,Tt),ij(et,dt),dt.tag=1,Zf(kt)?(et=!0,cg(dt)):et=!1,ch(dt,$t),Gi(dt,kt,Tt),Ii(dt,kt,Tt,$t),jj(null,dt,kt,!0,et,$t);case 19:return xj(et,dt,$t);case 22:return dj(et,dt,$t)}throw Error(p$4(156,dt.tag))};function Fk(et,dt){return ac(et,dt)}function $k(et,dt,$t,kt){this.tag=et,this.key=$t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=dt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=kt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(et,dt,$t,kt){return new $k(et,dt,$t,kt)}function aj(et){return et=et.prototype,!(!et||!et.isReactComponent)}function Zk(et){if(typeof et=="function")return aj(et)?1:0;if(et!=null){if(et=et.$$typeof,et===Da)return 11;if(et===Ga)return 14}return 2}function Pg(et,dt){var $t=et.alternate;return $t===null?($t=Bg(et.tag,dt,et.key,et.mode),$t.elementType=et.elementType,$t.type=et.type,$t.stateNode=et.stateNode,$t.alternate=et,et.alternate=$t):($t.pendingProps=dt,$t.type=et.type,$t.flags=0,$t.subtreeFlags=0,$t.deletions=null),$t.flags=et.flags&14680064,$t.childLanes=et.childLanes,$t.lanes=et.lanes,$t.child=et.child,$t.memoizedProps=et.memoizedProps,$t.memoizedState=et.memoizedState,$t.updateQueue=et.updateQueue,dt=et.dependencies,$t.dependencies=dt===null?null:{lanes:dt.lanes,firstContext:dt.firstContext},$t.sibling=et.sibling,$t.index=et.index,$t.ref=et.ref,$t}function Rg(et,dt,$t,kt,Tt,Dt){var Ft=2;if(kt=et,typeof et=="function")aj(et)&&(Ft=1);else if(typeof et=="string")Ft=5;else e:switch(et){case ya:return Tg($t.children,Tt,Dt,dt);case za:Ft=8,Tt|=8;break;case Aa:return et=Bg(12,$t,dt,Tt|2),et.elementType=Aa,et.lanes=Dt,et;case Ea:return et=Bg(13,$t,dt,Tt),et.elementType=Ea,et.lanes=Dt,et;case Fa:return et=Bg(19,$t,dt,Tt),et.elementType=Fa,et.lanes=Dt,et;case Ia:return pj($t,Tt,Dt,dt);default:if(typeof et=="object"&&et!==null)switch(et.$$typeof){case Ba:Ft=10;break e;case Ca:Ft=9;break e;case Da:Ft=11;break e;case Ga:Ft=14;break e;case Ha:Ft=16,kt=null;break e}throw Error(p$4(130,et==null?et:typeof et,""))}return dt=Bg(Ft,$t,dt,Tt),dt.elementType=et,dt.type=kt,dt.lanes=Dt,dt}function Tg(et,dt,$t,kt){return et=Bg(7,et,kt,dt),et.lanes=$t,et}function pj(et,dt,$t,kt){return et=Bg(22,et,kt,dt),et.elementType=Ia,et.lanes=$t,et.stateNode={isHidden:!1},et}function Qg(et,dt,$t){return et=Bg(6,et,null,dt),et.lanes=$t,et}function Sg(et,dt,$t){return dt=Bg(4,et.children!==null?et.children:[],et.key,dt),dt.lanes=$t,dt.stateNode={containerInfo:et.containerInfo,pendingChildren:null,implementation:et.implementation},dt}function al(et,dt,$t,kt,Tt){this.tag=dt,this.containerInfo=et,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=kt,this.onRecoverableError=Tt,this.mutableSourceEagerHydrationData=null}function bl(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){return et=new al(et,dt,$t,Ut,Ht),dt===1?(dt=1,Dt===!0&&(dt|=8)):dt=0,Dt=Bg(3,null,null,dt),et.current=Dt,Dt.stateNode=et,Dt.memoizedState={element:kt,isDehydrated:$t,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(Dt),et}function cl(et,dt,$t){var kt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:kt==null?null:""+kt,children:et,containerInfo:dt,implementation:$t}}function dl(et){if(!et)return Vf;et=et._reactInternals;e:{if(Vb(et)!==et||et.tag!==1)throw Error(p$4(170));var dt=et;do{switch(dt.tag){case 3:dt=dt.stateNode.context;break e;case 1:if(Zf(dt.type)){dt=dt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}dt=dt.return}while(dt!==null);throw Error(p$4(171))}if(et.tag===1){var $t=et.type;if(Zf($t))return bg(et,$t,dt)}return dt}function el(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){return et=bl($t,kt,!0,et,Tt,Dt,Ft,Ut,Ht),et.context=dl(null),$t=et.current,kt=R$4(),Tt=yi($t),Dt=mh(kt,Tt),Dt.callback=dt??null,nh($t,Dt,Tt),et.current.lanes=Tt,Ac(et,Tt,kt),Dk(et,kt),et}function fl(et,dt,$t,kt){var Tt=dt.current,Dt=R$4(),Ft=yi(Tt);return $t=dl($t),dt.context===null?dt.context=$t:dt.pendingContext=$t,dt=mh(Dt,Ft),dt.payload={element:et},kt=kt===void 0?null:kt,kt!==null&&(dt.callback=kt),et=nh(Tt,dt,Ft),et!==null&&(gi(et,Tt,Ft,Dt),oh(et,Tt,Ft)),Ft}function gl(et){if(et=et.current,!et.child)return null;switch(et.child.tag){case 5:return et.child.stateNode;default:return et.child.stateNode}}function hl(et,dt){if(et=et.memoizedState,et!==null&&et.dehydrated!==null){var $t=et.retryLane;et.retryLane=$t!==0&&$t<dt?$t:dt}}function il(et,dt){hl(et,dt),(et=et.alternate)&&hl(et,dt)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(et){console.error(et)};function ll(et){this._internalRoot=et}ml.prototype.render=ll.prototype.render=function(et){var dt=this._internalRoot;if(dt===null)throw Error(p$4(409));fl(et,dt,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var et=this._internalRoot;if(et!==null){this._internalRoot=null;var dt=et.containerInfo;Rk(function(){fl(null,et,null,null)}),dt[uf]=null}};function ml(et){this._internalRoot=et}ml.prototype.unstable_scheduleHydration=function(et){if(et){var dt=Hc();et={blockedOn:null,target:et,priority:dt};for(var $t=0;$t<Qc.length&&dt!==0&&dt<Qc[$t].priority;$t++);Qc.splice($t,0,et),$t===0&&Vc(et)}};function nl(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11)}function ol(et){return!(!et||et.nodeType!==1&&et.nodeType!==9&&et.nodeType!==11&&(et.nodeType!==8||et.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(et,dt,$t,kt,Tt){if(Tt){if(typeof kt=="function"){var Dt=kt;kt=function(){var Kt=gl(Ft);Dt.call(Kt)}}var Ft=el(dt,kt,et,0,null,!1,!1,"",pl);return et._reactRootContainer=Ft,et[uf]=Ft.current,sf(et.nodeType===8?et.parentNode:et),Rk(),Ft}for(;Tt=et.lastChild;)et.removeChild(Tt);if(typeof kt=="function"){var Ut=kt;kt=function(){var Kt=gl(Ht);Ut.call(Kt)}}var Ht=bl(et,0,!1,null,null,!1,!1,"",pl);return et._reactRootContainer=Ht,et[uf]=Ht.current,sf(et.nodeType===8?et.parentNode:et),Rk(function(){fl(dt,Ht,$t,kt)}),Ht}function rl(et,dt,$t,kt,Tt){var Dt=$t._reactRootContainer;if(Dt){var Ft=Dt;if(typeof Tt=="function"){var Ut=Tt;Tt=function(){var Ht=gl(Ft);Ut.call(Ht)}}fl(dt,Ft,et,Tt)}else Ft=ql($t,dt,et,Tt,kt);return gl(Ft)}Ec=function(et){switch(et.tag){case 3:var dt=et.stateNode;if(dt.current.memoizedState.isDehydrated){var $t=tc(dt.pendingLanes);$t!==0&&(Cc(dt,$t|1),Dk(dt,B$5()),!(K$4&6)&&(Gj=B$5()+500,jg()))}break;case 13:Rk(function(){var kt=ih(et,1);if(kt!==null){var Tt=R$4();gi(kt,et,1,Tt)}}),il(et,1)}};Fc=function(et){if(et.tag===13){var dt=ih(et,134217728);if(dt!==null){var $t=R$4();gi(dt,et,134217728,$t)}il(et,134217728)}};Gc=function(et){if(et.tag===13){var dt=yi(et),$t=ih(et,dt);if($t!==null){var kt=R$4();gi($t,et,dt,kt)}il(et,dt)}};Hc=function(){return C$8};Ic=function(et,dt){var $t=C$8;try{return C$8=et,dt()}finally{C$8=$t}};yb=function(et,dt,$t){switch(dt){case"input":if(bb(et,$t),dt=$t.name,$t.type==="radio"&&dt!=null){for($t=et;$t.parentNode;)$t=$t.parentNode;for($t=$t.querySelectorAll("input[name="+JSON.stringify(""+dt)+'][type="radio"]'),dt=0;dt<$t.length;dt++){var kt=$t[dt];if(kt!==et&&kt.form===et.form){var Tt=Db(kt);if(!Tt)throw Error(p$4(90));Wa(kt),bb(kt,Tt)}}}break;case"textarea":ib(et,$t);break;case"select":dt=$t.value,dt!=null&&fb(et,!!$t.multiple,dt,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$3,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(et){return et=Zb(et),et===null?null:et.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(et,dt){var $t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(dt))throw Error(p$4(200));return cl(et,dt,null,$t)};reactDom_production_min.createRoot=function(et,dt){if(!nl(et))throw Error(p$4(299));var $t=!1,kt="",Tt=kl;return dt!=null&&(dt.unstable_strictMode===!0&&($t=!0),dt.identifierPrefix!==void 0&&(kt=dt.identifierPrefix),dt.onRecoverableError!==void 0&&(Tt=dt.onRecoverableError)),dt=bl(et,1,!1,null,null,$t,!1,kt,Tt),et[uf]=dt.current,sf(et.nodeType===8?et.parentNode:et),new ll(dt)};reactDom_production_min.findDOMNode=function(et){if(et==null)return null;if(et.nodeType===1)return et;var dt=et._reactInternals;if(dt===void 0)throw typeof et.render=="function"?Error(p$4(188)):(et=Object.keys(et).join(","),Error(p$4(268,et)));return et=Zb(dt),et=et===null?null:et.stateNode,et};reactDom_production_min.flushSync=function(et){return Rk(et)};reactDom_production_min.hydrate=function(et,dt,$t){if(!ol(dt))throw Error(p$4(200));return rl(null,et,dt,!0,$t)};reactDom_production_min.hydrateRoot=function(et,dt,$t){if(!nl(et))throw Error(p$4(405));var kt=$t!=null&&$t.hydratedSources||null,Tt=!1,Dt="",Ft=kl;if($t!=null&&($t.unstable_strictMode===!0&&(Tt=!0),$t.identifierPrefix!==void 0&&(Dt=$t.identifierPrefix),$t.onRecoverableError!==void 0&&(Ft=$t.onRecoverableError)),dt=el(dt,null,et,1,$t??null,Tt,!1,Dt,Ft),et[uf]=dt.current,sf(et),kt)for(et=0;et<kt.length;et++)$t=kt[et],Tt=$t._getVersion,Tt=Tt($t._source),dt.mutableSourceEagerHydrationData==null?dt.mutableSourceEagerHydrationData=[$t,Tt]:dt.mutableSourceEagerHydrationData.push($t,Tt);return new ml(dt)};reactDom_production_min.render=function(et,dt,$t){if(!ol(dt))throw Error(p$4(200));return rl(null,et,dt,!1,$t)};reactDom_production_min.unmountComponentAtNode=function(et){if(!ol(et))throw Error(p$4(40));return et._reactRootContainer?(Rk(function(){rl(null,null,et,!1,function(){et._reactRootContainer=null,et[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(et,dt,$t,kt){if(!ol($t))throw Error(p$4(200));if(et==null||et._reactInternals===void 0)throw Error(p$4(38));return rl(et,dt,$t,!1,kt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(et){console.error(et)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var createRoot,m$3=reactDomExports;createRoot=m$3.createRoot,m$3.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)Object.prototype.hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},_extends$4.apply(this,arguments)}var Action$1;(function(et){et.Pop="POP",et.Push="PUSH",et.Replace="REPLACE"})(Action$1||(Action$1={}));const PopStateEventType="popstate";function createBrowserHistory(et){et===void 0&&(et={});function dt(kt,Tt){let{pathname:Dt,search:Ft,hash:Ut}=kt.location;return createLocation("",{pathname:Dt,search:Ft,hash:Ut},Tt.state&&Tt.state.usr||null,Tt.state&&Tt.state.key||"default")}function $t(kt,Tt){return typeof Tt=="string"?Tt:createPath(Tt)}return getUrlBasedHistory(dt,$t,null,et)}function invariant$2(et,dt){if(et===!1||et===null||typeof et>"u")throw new Error(dt)}function warning$2(et,dt){if(!et){typeof console<"u"&&console.warn(dt);try{throw new Error(dt)}catch{}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function getHistoryState(et,dt){return{usr:et.state,key:et.key,idx:dt}}function createLocation(et,dt,$t,kt){return $t===void 0&&($t=null),_extends$4({pathname:typeof et=="string"?et:et.pathname,search:"",hash:""},typeof dt=="string"?parsePath(dt):dt,{state:$t,key:dt&&dt.key||kt||createKey$1()})}function createPath(et){let{pathname:dt="/",search:$t="",hash:kt=""}=et;return $t&&$t!=="?"&&(dt+=$t.charAt(0)==="?"?$t:"?"+$t),kt&&kt!=="#"&&(dt+=kt.charAt(0)==="#"?kt:"#"+kt),dt}function parsePath(et){let dt={};if(et){let $t=et.indexOf("#");$t>=0&&(dt.hash=et.substr($t),et=et.substr(0,$t));let kt=et.indexOf("?");kt>=0&&(dt.search=et.substr(kt),et=et.substr(0,kt)),et&&(dt.pathname=et)}return dt}function getUrlBasedHistory(et,dt,$t,kt){kt===void 0&&(kt={});let{window:Tt=document.defaultView,v5Compat:Dt=!1}=kt,Ft=Tt.history,Ut=Action$1.Pop,Ht=null,Kt=Yt();Kt==null&&(Kt=0,Ft.replaceState(_extends$4({},Ft.state,{idx:Kt}),""));function Yt(){return(Ft.state||{idx:null}).idx}function Jt(){Ut=Action$1.Pop;let nr=Yt(),ir=nr==null?null:nr-Kt;Kt=nr,Ht&&Ht({action:Ut,location:sr.location,delta:ir})}function Zt(nr,ir){Ut=Action$1.Push;let or=createLocation(sr.location,nr,ir);$t&&$t(or,nr),Kt=Yt()+1;let lr=getHistoryState(or,Kt),cr=sr.createHref(or);try{Ft.pushState(lr,"",cr)}catch(dr){if(dr instanceof DOMException&&dr.name==="DataCloneError")throw dr;Tt.location.assign(cr)}Dt&&Ht&&Ht({action:Ut,location:sr.location,delta:1})}function er(nr,ir){Ut=Action$1.Replace;let or=createLocation(sr.location,nr,ir);$t&&$t(or,nr),Kt=Yt();let lr=getHistoryState(or,Kt),cr=sr.createHref(or);Ft.replaceState(lr,"",cr),Dt&&Ht&&Ht({action:Ut,location:sr.location,delta:0})}function rr(nr){let ir=Tt.location.origin!=="null"?Tt.location.origin:Tt.location.href,or=typeof nr=="string"?nr:createPath(nr);return or=or.replace(/ $/,"%20"),invariant$2(ir,"No window.location.(origin|href) available to create URL for href: "+or),new URL(or,ir)}let sr={get action(){return Ut},get location(){return et(Tt,Ft)},listen(nr){if(Ht)throw new Error("A history only accepts one active listener");return Tt.addEventListener(PopStateEventType,Jt),Ht=nr,()=>{Tt.removeEventListener(PopStateEventType,Jt),Ht=null}},createHref(nr){return dt(Tt,nr)},createURL:rr,encodeLocation(nr){let ir=rr(nr);return{pathname:ir.pathname,search:ir.search,hash:ir.hash}},push:Zt,replace:er,go(nr){return Ft.go(nr)}};return sr}var ResultType;(function(et){et.data="data",et.deferred="deferred",et.redirect="redirect",et.error="error"})(ResultType||(ResultType={}));function matchRoutes(et,dt,$t){return $t===void 0&&($t="/"),matchRoutesImpl(et,dt,$t,!1)}function matchRoutesImpl(et,dt,$t,kt){let Tt=typeof dt=="string"?parsePath(dt):dt,Dt=stripBasename(Tt.pathname||"/",$t);if(Dt==null)return null;let Ft=flattenRoutes(et);rankRouteBranches(Ft);let Ut=null;for(let Ht=0;Ut==null&&Ht<Ft.length;++Ht){let Kt=decodePath(Dt);Ut=matchRouteBranch(Ft[Ht],Kt,kt)}return Ut}function flattenRoutes(et,dt,$t,kt){dt===void 0&&(dt=[]),$t===void 0&&($t=[]),kt===void 0&&(kt="");let Tt=(Dt,Ft,Ut)=>{let Ht={relativePath:Ut===void 0?Dt.path||"":Ut,caseSensitive:Dt.caseSensitive===!0,childrenIndex:Ft,route:Dt};Ht.relativePath.startsWith("/")&&(invariant$2(Ht.relativePath.startsWith(kt),'Absolute route path "'+Ht.relativePath+'" nested under path '+('"'+kt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),Ht.relativePath=Ht.relativePath.slice(kt.length));let Kt=joinPaths([kt,Ht.relativePath]),Yt=$t.concat(Ht);Dt.children&&Dt.children.length>0&&(invariant$2(Dt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+Kt+'".')),flattenRoutes(Dt.children,dt,Yt,Kt)),!(Dt.path==null&&!Dt.index)&&dt.push({path:Kt,score:computeScore(Kt,Dt.index),routesMeta:Yt})};return et.forEach((Dt,Ft)=>{var Ut;if(Dt.path===""||!((Ut=Dt.path)!=null&&Ut.includes("?")))Tt(Dt,Ft);else for(let Ht of explodeOptionalSegments(Dt.path))Tt(Dt,Ft,Ht)}),dt}function explodeOptionalSegments(et){let dt=et.split("/");if(dt.length===0)return[];let[$t,...kt]=dt,Tt=$t.endsWith("?"),Dt=$t.replace(/\?$/,"");if(kt.length===0)return Tt?[Dt,""]:[Dt];let Ft=explodeOptionalSegments(kt.join("/")),Ut=[];return Ut.push(...Ft.map(Ht=>Ht===""?Dt:[Dt,Ht].join("/"))),Tt&&Ut.push(...Ft),Ut.map(Ht=>et.startsWith("/")&&Ht===""?"/":Ht)}function rankRouteBranches(et){et.sort((dt,$t)=>dt.score!==$t.score?$t.score-dt.score:compareIndexes(dt.routesMeta.map(kt=>kt.childrenIndex),$t.routesMeta.map(kt=>kt.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=et=>et==="*";function computeScore(et,dt){let $t=et.split("/"),kt=$t.length;return $t.some(isSplat)&&(kt+=splatPenalty),dt&&(kt+=indexRouteValue),$t.filter(Tt=>!isSplat(Tt)).reduce((Tt,Dt)=>Tt+(paramRe.test(Dt)?dynamicSegmentValue:Dt===""?emptySegmentValue:staticSegmentValue),kt)}function compareIndexes(et,dt){return et.length===dt.length&&et.slice(0,-1).every((kt,Tt)=>kt===dt[Tt])?et[et.length-1]-dt[dt.length-1]:0}function matchRouteBranch(et,dt,$t){$t===void 0&&($t=!1);let{routesMeta:kt}=et,Tt={},Dt="/",Ft=[];for(let Ut=0;Ut<kt.length;++Ut){let Ht=kt[Ut],Kt=Ut===kt.length-1,Yt=Dt==="/"?dt:dt.slice(Dt.length)||"/",Jt=matchPath({path:Ht.relativePath,caseSensitive:Ht.caseSensitive,end:Kt},Yt),Zt=Ht.route;if(!Jt&&Kt&&$t&&!kt[kt.length-1].route.index&&(Jt=matchPath({path:Ht.relativePath,caseSensitive:Ht.caseSensitive,end:!1},Yt)),!Jt)return null;Object.assign(Tt,Jt.params),Ft.push({params:Tt,pathname:joinPaths([Dt,Jt.pathname]),pathnameBase:normalizePathname(joinPaths([Dt,Jt.pathnameBase])),route:Zt}),Jt.pathnameBase!=="/"&&(Dt=joinPaths([Dt,Jt.pathnameBase]))}return Ft}function matchPath(et,dt){typeof et=="string"&&(et={path:et,caseSensitive:!1,end:!0});let[$t,kt]=compilePath(et.path,et.caseSensitive,et.end),Tt=dt.match($t);if(!Tt)return null;let Dt=Tt[0],Ft=Dt.replace(/(.)\/+$/,"$1"),Ut=Tt.slice(1);return{params:kt.reduce((Kt,Yt,Jt)=>{let{paramName:Zt,isOptional:er}=Yt;if(Zt==="*"){let sr=Ut[Jt]||"";Ft=Dt.slice(0,Dt.length-sr.length).replace(/(.)\/+$/,"$1")}const rr=Ut[Jt];return er&&!rr?Kt[Zt]=void 0:Kt[Zt]=(rr||"").replace(/%2F/g,"/"),Kt},{}),pathname:Dt,pathnameBase:Ft,pattern:et}}function compilePath(et,dt,$t){dt===void 0&&(dt=!1),$t===void 0&&($t=!0),warning$2(et==="*"||!et.endsWith("*")||et.endsWith("/*"),'Route path "'+et+'" will be treated as if it were '+('"'+et.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+et.replace(/\*$/,"/*")+'".'));let kt=[],Tt="^"+et.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(Ft,Ut,Ht)=>(kt.push({paramName:Ut,isOptional:Ht!=null}),Ht?"/?([^\\/]+)?":"/([^\\/]+)"));return et.endsWith("*")?(kt.push({paramName:"*"}),Tt+=et==="*"||et==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):$t?Tt+="\\/*$":et!==""&&et!=="/"&&(Tt+="(?:(?=\\/|$))"),[new RegExp(Tt,dt?void 0:"i"),kt]}function decodePath(et){try{return et.split("/").map(dt=>decodeURIComponent(dt).replace(/\//g,"%2F")).join("/")}catch(dt){return warning$2(!1,'The URL path "'+et+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+dt+").")),et}}function stripBasename(et,dt){if(dt==="/")return et;if(!et.toLowerCase().startsWith(dt.toLowerCase()))return null;let $t=dt.endsWith("/")?dt.length-1:dt.length,kt=et.charAt($t);return kt&&kt!=="/"?null:et.slice($t)||"/"}function resolvePath(et,dt){dt===void 0&&(dt="/");let{pathname:$t,search:kt="",hash:Tt=""}=typeof et=="string"?parsePath(et):et;return{pathname:$t?$t.startsWith("/")?$t:resolvePathname($t,dt):dt,search:normalizeSearch(kt),hash:normalizeHash(Tt)}}function resolvePathname(et,dt){let $t=dt.replace(/\/+$/,"").split("/");return et.split("/").forEach(Tt=>{Tt===".."?$t.length>1&&$t.pop():Tt!=="."&&$t.push(Tt)}),$t.length>1?$t.join("/"):"/"}function getInvalidPathError(et,dt,$t,kt){return"Cannot include a '"+et+"' character in a manually specified "+("`to."+dt+"` field ["+JSON.stringify(kt)+"].  Please separate it out to the ")+("`to."+$t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(et){return et.filter((dt,$t)=>$t===0||dt.route.path&&dt.route.path.length>0)}function getResolveToMatches(et,dt){let $t=getPathContributingMatches(et);return dt?$t.map((kt,Tt)=>Tt===$t.length-1?kt.pathname:kt.pathnameBase):$t.map(kt=>kt.pathnameBase)}function resolveTo(et,dt,$t,kt){kt===void 0&&(kt=!1);let Tt;typeof et=="string"?Tt=parsePath(et):(Tt=_extends$4({},et),invariant$2(!Tt.pathname||!Tt.pathname.includes("?"),getInvalidPathError("?","pathname","search",Tt)),invariant$2(!Tt.pathname||!Tt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Tt)),invariant$2(!Tt.search||!Tt.search.includes("#"),getInvalidPathError("#","search","hash",Tt)));let Dt=et===""||Tt.pathname==="",Ft=Dt?"/":Tt.pathname,Ut;if(Ft==null)Ut=$t;else{let Jt=dt.length-1;if(!kt&&Ft.startsWith("..")){let Zt=Ft.split("/");for(;Zt[0]==="..";)Zt.shift(),Jt-=1;Tt.pathname=Zt.join("/")}Ut=Jt>=0?dt[Jt]:"/"}let Ht=resolvePath(Tt,Ut),Kt=Ft&&Ft!=="/"&&Ft.endsWith("/"),Yt=(Dt||Ft===".")&&$t.endsWith("/");return!Ht.pathname.endsWith("/")&&(Kt||Yt)&&(Ht.pathname+="/"),Ht}const joinPaths=et=>et.join("/").replace(/\/\/+/g,"/"),normalizePathname=et=>et.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=et=>!et||et==="?"?"":et.startsWith("?")?et:"?"+et,normalizeHash=et=>!et||et==="#"?"":et.startsWith("#")?et:"#"+et;function isRouteErrorResponse(et){return et!=null&&typeof et.status=="number"&&typeof et.statusText=="string"&&typeof et.internal=="boolean"&&"data"in et}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)Object.prototype.hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},_extends$3.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(et,dt){let{relative:$t}=dt===void 0?{}:dt;useInRouterContext()||invariant$2(!1);let{basename:kt,navigator:Tt}=reactExports.useContext(NavigationContext),{hash:Dt,pathname:Ft,search:Ut}=useResolvedPath(et,{relative:$t}),Ht=Ft;return kt!=="/"&&(Ht=Ft==="/"?kt:joinPaths([kt,Ft])),Tt.createHref({pathname:Ht,search:Ut,hash:Dt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$9(et){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(et)}function useNavigate(){let{isDataRoute:et}=reactExports.useContext(RouteContext);return et?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let et=reactExports.useContext(DataRouterContext),{basename:dt,future:$t,navigator:kt}=reactExports.useContext(NavigationContext),{matches:Tt}=reactExports.useContext(RouteContext),{pathname:Dt}=useLocation(),Ft=JSON.stringify(getResolveToMatches(Tt,$t.v7_relativeSplatPath)),Ut=reactExports.useRef(!1);return useIsomorphicLayoutEffect$9(()=>{Ut.current=!0}),reactExports.useCallback(function(Kt,Yt){if(Yt===void 0&&(Yt={}),!Ut.current)return;if(typeof Kt=="number"){kt.go(Kt);return}let Jt=resolveTo(Kt,JSON.parse(Ft),Dt,Yt.relative==="path");et==null&&dt!=="/"&&(Jt.pathname=Jt.pathname==="/"?dt:joinPaths([dt,Jt.pathname])),(Yt.replace?kt.replace:kt.push)(Jt,Yt.state,Yt)},[dt,kt,Ft,Dt,et])}const OutletContext=reactExports.createContext(null);function useOutlet(et){let dt=reactExports.useContext(RouteContext).outlet;return dt&&reactExports.createElement(OutletContext.Provider,{value:et},dt)}function useParams(){let{matches:et}=reactExports.useContext(RouteContext),dt=et[et.length-1];return dt?dt.params:{}}function useResolvedPath(et,dt){let{relative:$t}=dt===void 0?{}:dt,{future:kt}=reactExports.useContext(NavigationContext),{matches:Tt}=reactExports.useContext(RouteContext),{pathname:Dt}=useLocation(),Ft=JSON.stringify(getResolveToMatches(Tt,kt.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(et,JSON.parse(Ft),Dt,$t==="path"),[et,Ft,Dt,$t])}function useRoutes(et,dt){return useRoutesImpl(et,dt)}function useRoutesImpl(et,dt,$t,kt){useInRouterContext()||invariant$2(!1);let{navigator:Tt}=reactExports.useContext(NavigationContext),{matches:Dt}=reactExports.useContext(RouteContext),Ft=Dt[Dt.length-1],Ut=Ft?Ft.params:{};Ft&&Ft.pathname;let Ht=Ft?Ft.pathnameBase:"/";Ft&&Ft.route;let Kt=useLocation(),Yt;if(dt){var Jt;let nr=typeof dt=="string"?parsePath(dt):dt;Ht==="/"||(Jt=nr.pathname)!=null&&Jt.startsWith(Ht)||invariant$2(!1),Yt=nr}else Yt=Kt;let Zt=Yt.pathname||"/",er=Zt;if(Ht!=="/"){let nr=Ht.replace(/^\//,"").split("/");er="/"+Zt.replace(/^\//,"").split("/").slice(nr.length).join("/")}let rr=matchRoutes(et,{pathname:er}),sr=_renderMatches(rr&&rr.map(nr=>Object.assign({},nr,{params:Object.assign({},Ut,nr.params),pathname:joinPaths([Ht,Tt.encodeLocation?Tt.encodeLocation(nr.pathname).pathname:nr.pathname]),pathnameBase:nr.pathnameBase==="/"?Ht:joinPaths([Ht,Tt.encodeLocation?Tt.encodeLocation(nr.pathnameBase).pathname:nr.pathnameBase])})),Dt,$t,kt);return dt&&sr?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$3({pathname:"/",search:"",hash:"",state:null,key:"default"},Yt),navigationType:Action$1.Pop}},sr):sr}function DefaultErrorComponent(){let et=useRouteError(),dt=isRouteErrorResponse(et)?et.status+" "+et.statusText:et instanceof Error?et.message:JSON.stringify(et),$t=et instanceof Error?et.stack:null,Tt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},Dt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},dt),$t?reactExports.createElement("pre",{style:Tt},$t):null,Dt)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(dt){super(dt),this.state={location:dt.location,revalidation:dt.revalidation,error:dt.error}}static getDerivedStateFromError(dt){return{error:dt}}static getDerivedStateFromProps(dt,$t){return $t.location!==dt.location||$t.revalidation!=="idle"&&dt.revalidation==="idle"?{error:dt.error,location:dt.location,revalidation:dt.revalidation}:{error:dt.error!==void 0?dt.error:$t.error,location:$t.location,revalidation:dt.revalidation||$t.revalidation}}componentDidCatch(dt,$t){console.error("React Router caught the following error during render",dt,$t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(et){let{routeContext:dt,match:$t,children:kt}=et,Tt=reactExports.useContext(DataRouterContext);return Tt&&Tt.static&&Tt.staticContext&&($t.route.errorElement||$t.route.ErrorBoundary)&&(Tt.staticContext._deepestRenderedBoundaryId=$t.route.id),reactExports.createElement(RouteContext.Provider,{value:dt},kt)}function _renderMatches(et,dt,$t,kt){var Tt;if(dt===void 0&&(dt=[]),$t===void 0&&($t=null),kt===void 0&&(kt=null),et==null){var Dt;if(!$t)return null;if($t.errors)et=$t.matches;else if((Dt=kt)!=null&&Dt.v7_partialHydration&&dt.length===0&&!$t.initialized&&$t.matches.length>0)et=$t.matches;else return null}let Ft=et,Ut=(Tt=$t)==null?void 0:Tt.errors;if(Ut!=null){let Yt=Ft.findIndex(Jt=>Jt.route.id&&(Ut==null?void 0:Ut[Jt.route.id])!==void 0);Yt>=0||invariant$2(!1),Ft=Ft.slice(0,Math.min(Ft.length,Yt+1))}let Ht=!1,Kt=-1;if($t&&kt&&kt.v7_partialHydration)for(let Yt=0;Yt<Ft.length;Yt++){let Jt=Ft[Yt];if((Jt.route.HydrateFallback||Jt.route.hydrateFallbackElement)&&(Kt=Yt),Jt.route.id){let{loaderData:Zt,errors:er}=$t,rr=Jt.route.loader&&Zt[Jt.route.id]===void 0&&(!er||er[Jt.route.id]===void 0);if(Jt.route.lazy||rr){Ht=!0,Kt>=0?Ft=Ft.slice(0,Kt+1):Ft=[Ft[0]];break}}}return Ft.reduceRight((Yt,Jt,Zt)=>{let er,rr=!1,sr=null,nr=null;$t&&(er=Ut&&Jt.route.id?Ut[Jt.route.id]:void 0,sr=Jt.route.errorElement||defaultErrorElement,Ht&&(Kt<0&&Zt===0?(warningOnce("route-fallback",!1),rr=!0,nr=null):Kt===Zt&&(rr=!0,nr=Jt.route.hydrateFallbackElement||null)));let ir=dt.concat(Ft.slice(0,Zt+1)),or=()=>{let lr;return er?lr=sr:rr?lr=nr:Jt.route.Component?lr=reactExports.createElement(Jt.route.Component,null):Jt.route.element?lr=Jt.route.element:lr=Yt,reactExports.createElement(RenderedRoute,{match:Jt,routeContext:{outlet:Yt,matches:ir,isDataRoute:$t!=null},children:lr})};return $t&&(Jt.route.ErrorBoundary||Jt.route.errorElement||Zt===0)?reactExports.createElement(RenderErrorBoundary,{location:$t.location,revalidation:$t.revalidation,component:sr,error:er,children:or(),routeContext:{outlet:null,matches:ir,isDataRoute:!0}}):or()},null)}var DataRouterHook$1=function(et){return et.UseBlocker="useBlocker",et.UseRevalidator="useRevalidator",et.UseNavigateStable="useNavigate",et}(DataRouterHook$1||{}),DataRouterStateHook$1=function(et){return et.UseBlocker="useBlocker",et.UseLoaderData="useLoaderData",et.UseActionData="useActionData",et.UseRouteError="useRouteError",et.UseNavigation="useNavigation",et.UseRouteLoaderData="useRouteLoaderData",et.UseMatches="useMatches",et.UseRevalidator="useRevalidator",et.UseNavigateStable="useNavigate",et.UseRouteId="useRouteId",et}(DataRouterStateHook$1||{});function useDataRouterContext(et){let dt=reactExports.useContext(DataRouterContext);return dt||invariant$2(!1),dt}function useDataRouterState(et){let dt=reactExports.useContext(DataRouterStateContext);return dt||invariant$2(!1),dt}function useRouteContext(et){let dt=reactExports.useContext(RouteContext);return dt||invariant$2(!1),dt}function useCurrentRouteId(et){let dt=useRouteContext(),$t=dt.matches[dt.matches.length-1];return $t.route.id||invariant$2(!1),$t.route.id}function useRouteError(){var et;let dt=reactExports.useContext(RouteErrorContext),$t=useDataRouterState(DataRouterStateHook$1.UseRouteError),kt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return dt!==void 0?dt:(et=$t.errors)==null?void 0:et[kt]}function useNavigateStable(){let{router:et}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),dt=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),$t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$9(()=>{$t.current=!0}),reactExports.useCallback(function(Tt,Dt){Dt===void 0&&(Dt={}),$t.current&&(typeof Tt=="number"?et.navigate(Tt):et.navigate(Tt,_extends$3({fromRouteId:dt},Dt)))},[et,dt])}const alreadyWarned$1={};function warningOnce(et,dt,$t){!dt&&!alreadyWarned$1[et]&&(alreadyWarned$1[et]=!0)}const alreadyWarned={};function warnOnce(et,dt){alreadyWarned[dt]||(alreadyWarned[dt]=!0,console.warn(dt))}const logDeprecation=(et,dt,$t)=>warnOnce(et," React Router Future Flag Warning: "+dt+". "+("You can use the `"+et+"` future flag to opt-in early. ")+("For more information, see "+$t+"."));function logV6DeprecationWarnings(et,dt){(et==null?void 0:et.v7_startTransition)===void 0&&logDeprecation("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(et==null?void 0:et.v7_relativeSplatPath)===void 0&&(!dt||!dt.v7_relativeSplatPath)&&logDeprecation("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),dt&&(dt.v7_fetcherPersist===void 0&&logDeprecation("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),dt.v7_normalizeFormMethod===void 0&&logDeprecation("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),dt.v7_partialHydration===void 0&&logDeprecation("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),dt.v7_skipActionErrorRevalidation===void 0&&logDeprecation("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Navigate(et){let{to:dt,replace:$t,state:kt,relative:Tt}=et;useInRouterContext()||invariant$2(!1);let{future:Dt,static:Ft}=reactExports.useContext(NavigationContext),{matches:Ut}=reactExports.useContext(RouteContext),{pathname:Ht}=useLocation(),Kt=useNavigate(),Yt=resolveTo(dt,getResolveToMatches(Ut,Dt.v7_relativeSplatPath),Ht,Tt==="path"),Jt=JSON.stringify(Yt);return reactExports.useEffect(()=>Kt(JSON.parse(Jt),{replace:$t,state:kt,relative:Tt}),[Kt,Jt,Tt,$t,kt]),null}function Outlet(et){return useOutlet(et.context)}function Route(et){invariant$2(!1)}function Router(et){let{basename:dt="/",children:$t=null,location:kt,navigationType:Tt=Action$1.Pop,navigator:Dt,static:Ft=!1,future:Ut}=et;useInRouterContext()&&invariant$2(!1);let Ht=dt.replace(/^\/*/,"/"),Kt=reactExports.useMemo(()=>({basename:Ht,navigator:Dt,static:Ft,future:_extends$3({v7_relativeSplatPath:!1},Ut)}),[Ht,Ut,Dt,Ft]);typeof kt=="string"&&(kt=parsePath(kt));let{pathname:Yt="/",search:Jt="",hash:Zt="",state:er=null,key:rr="default"}=kt,sr=reactExports.useMemo(()=>{let nr=stripBasename(Yt,Ht);return nr==null?null:{location:{pathname:nr,search:Jt,hash:Zt,state:er,key:rr},navigationType:Tt}},[Ht,Yt,Jt,Zt,er,rr,Tt]);return sr==null?null:reactExports.createElement(NavigationContext.Provider,{value:Kt},reactExports.createElement(LocationContext.Provider,{children:$t,value:sr}))}function Routes(et){let{children:dt,location:$t}=et;return useRoutes(createRoutesFromChildren(dt),$t)}new Promise(()=>{});function createRoutesFromChildren(et,dt){dt===void 0&&(dt=[]);let $t=[];return reactExports.Children.forEach(et,(kt,Tt)=>{if(!reactExports.isValidElement(kt))return;let Dt=[...dt,Tt];if(kt.type===reactExports.Fragment){$t.push.apply($t,createRoutesFromChildren(kt.props.children,Dt));return}kt.type!==Route&&invariant$2(!1),!kt.props.index||!kt.props.children||invariant$2(!1);let Ft={id:kt.props.id||Dt.join("-"),caseSensitive:kt.props.caseSensitive,element:kt.props.element,Component:kt.props.Component,index:kt.props.index,path:kt.props.path,loader:kt.props.loader,action:kt.props.action,errorElement:kt.props.errorElement,ErrorBoundary:kt.props.ErrorBoundary,hasErrorBoundary:kt.props.ErrorBoundary!=null||kt.props.errorElement!=null,shouldRevalidate:kt.props.shouldRevalidate,handle:kt.props.handle,lazy:kt.props.lazy};kt.props.children&&(Ft.children=createRoutesFromChildren(kt.props.children,Dt)),$t.push(Ft)}),$t}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)Object.prototype.hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},_extends$2.apply(this,arguments)}function _objectWithoutPropertiesLoose$2(et,dt){if(et==null)return{};var $t={},kt=Object.keys(et),Tt,Dt;for(Dt=0;Dt<kt.length;Dt++)Tt=kt[Dt],!(dt.indexOf(Tt)>=0)&&($t[Tt]=et[Tt]);return $t}function isModifiedEvent(et){return!!(et.metaKey||et.altKey||et.ctrlKey||et.shiftKey)}function shouldProcessLinkClick(et,dt){return et.button===0&&(!dt||dt==="_self")&&!isModifiedEvent(et)}function createSearchParams(et){return et===void 0&&(et=""),new URLSearchParams(typeof et=="string"||Array.isArray(et)||et instanceof URLSearchParams?et:Object.keys(et).reduce((dt,$t)=>{let kt=et[$t];return dt.concat(Array.isArray(kt)?kt.map(Tt=>[$t,Tt]):[[$t,kt]])},[]))}function getSearchParamsForLocation(et,dt){let $t=createSearchParams(et);return dt&&dt.forEach((kt,Tt)=>{$t.has(Tt)||dt.getAll(Tt).forEach(Dt=>{$t.append(Tt,Dt)})}),$t}const _excluded$3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=t$3[START_TRANSITION];function BrowserRouter(et){let{basename:dt,children:$t,future:kt,window:Tt}=et,Dt=reactExports.useRef();Dt.current==null&&(Dt.current=createBrowserHistory({window:Tt,v5Compat:!0}));let Ft=Dt.current,[Ut,Ht]=reactExports.useState({action:Ft.action,location:Ft.location}),{v7_startTransition:Kt}=kt||{},Yt=reactExports.useCallback(Jt=>{Kt&&startTransitionImpl?startTransitionImpl(()=>Ht(Jt)):Ht(Jt)},[Ht,Kt]);return reactExports.useLayoutEffect(()=>Ft.listen(Yt),[Ft,Yt]),reactExports.useEffect(()=>logV6DeprecationWarnings(kt),[kt]),reactExports.createElement(Router,{basename:dt,children:$t,location:Ut.location,navigationType:Ut.action,navigator:Ft,future:kt})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$2=reactExports.forwardRef(function(dt,$t){let{onClick:kt,relative:Tt,reloadDocument:Dt,replace:Ft,state:Ut,target:Ht,to:Kt,preventScrollReset:Yt,viewTransition:Jt}=dt,Zt=_objectWithoutPropertiesLoose$2(dt,_excluded$3),{basename:er}=reactExports.useContext(NavigationContext),rr,sr=!1;if(typeof Kt=="string"&&ABSOLUTE_URL_REGEX.test(Kt)&&(rr=Kt,isBrowser$2))try{let lr=new URL(window.location.href),cr=Kt.startsWith("//")?new URL(lr.protocol+Kt):new URL(Kt),dr=stripBasename(cr.pathname,er);cr.origin===lr.origin&&dr!=null?Kt=dr+cr.search+cr.hash:sr=!0}catch{}let nr=useHref(Kt,{relative:Tt}),ir=useLinkClickHandler(Kt,{replace:Ft,state:Ut,target:Ht,preventScrollReset:Yt,relative:Tt,viewTransition:Jt});function or(lr){kt&&kt(lr),lr.defaultPrevented||ir(lr)}return reactExports.createElement("a",_extends$2({},Zt,{href:rr||nr,onClick:sr||Dt?kt:or,ref:$t,target:Ht}))});var DataRouterHook;(function(et){et.UseScrollRestoration="useScrollRestoration",et.UseSubmit="useSubmit",et.UseSubmitFetcher="useSubmitFetcher",et.UseFetcher="useFetcher",et.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(et){et.UseFetcher="useFetcher",et.UseFetchers="useFetchers",et.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(et,dt){let{target:$t,replace:kt,state:Tt,preventScrollReset:Dt,relative:Ft,viewTransition:Ut}=dt===void 0?{}:dt,Ht=useNavigate(),Kt=useLocation(),Yt=useResolvedPath(et,{relative:Ft});return reactExports.useCallback(Jt=>{if(shouldProcessLinkClick(Jt,$t)){Jt.preventDefault();let Zt=kt!==void 0?kt:createPath(Kt)===createPath(Yt);Ht(et,{replace:Zt,state:Tt,preventScrollReset:Dt,relative:Ft,viewTransition:Ut})}},[Kt,Ht,Yt,kt,Tt,$t,et,Dt,Ft,Ut])}function useSearchParams(et){let dt=reactExports.useRef(createSearchParams(et)),$t=reactExports.useRef(!1),kt=useLocation(),Tt=reactExports.useMemo(()=>getSearchParamsForLocation(kt.search,$t.current?null:dt.current),[kt.search]),Dt=useNavigate(),Ft=reactExports.useCallback((Ut,Ht)=>{const Kt=createSearchParams(typeof Ut=="function"?Ut(Tt):Ut);$t.current=!0,Dt("?"+Kt,Ht)},[Dt,Tt]);return[Tt,Ft]}function createDOMMotionComponentProxy(et){if(typeof Proxy>"u")return et;const dt=new Map,$t=(...kt)=>et(...kt);return new Proxy($t,{get:(kt,Tt)=>Tt==="create"?et:(dt.has(Tt)||dt.set(Tt,et(Tt)),dt.get(Tt))})}function isAnimationControls(et){return et!==null&&typeof et=="object"&&typeof et.start=="function"}const isKeyframesTarget=et=>Array.isArray(et);function shallowCompare(et,dt){if(!Array.isArray(dt))return!1;const $t=dt.length;if($t!==et.length)return!1;for(let kt=0;kt<$t;kt++)if(dt[kt]!==et[kt])return!1;return!0}function isVariantLabel(et){return typeof et=="string"||Array.isArray(et)}function getValueState(et){const dt=[{},{}];return et==null||et.values.forEach(($t,kt)=>{dt[0][kt]=$t.get(),dt[1][kt]=$t.getVelocity()}),dt}function resolveVariantFromProps(et,dt,$t,kt){if(typeof dt=="function"){const[Tt,Dt]=getValueState(kt);dt=dt($t!==void 0?$t:et.custom,Tt,Dt)}if(typeof dt=="string"&&(dt=et.variants&&et.variants[dt]),typeof dt=="function"){const[Tt,Dt]=getValueState(kt);dt=dt($t!==void 0?$t:et.custom,Tt,Dt)}return dt}function resolveVariant(et,dt,$t){const kt=et.getProps();return resolveVariantFromProps(kt,dt,$t!==void 0?$t:kt.custom,et)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder],transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),secondsToMilliseconds=et=>et*1e3,millisecondsToSeconds=et=>et/1e3,underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=et=>({type:"spring",stiffness:550,damping:et===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(et,{keyframes:dt})=>dt.length>2?keyframesTransition:transformProps.has(et)?et.startsWith("scale")?criticallyDampedSpring(dt[1]):underDampedSpring:ease;function getValueTransition(et,dt){return et?et[dt]||et.default||et:void 0}const MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1},isNotNull=et=>et!==null;function getFinalKeyframe(et,{repeat:dt,repeatType:$t="loop"},kt){const Tt=et.filter(isNotNull),Dt=dt&&$t!=="loop"&&dt%2===1?0:Tt.length-1;return!Dt||kt===void 0?Tt[Dt]:kt}const noop$c=et=>et;let invariant$1=noop$c;function createRenderStep(et){let dt=new Set,$t=new Set,kt=!1,Tt=!1;const Dt=new WeakSet;let Ft={delta:0,timestamp:0,isProcessing:!1};function Ut(Kt){Dt.has(Kt)&&(Ht.schedule(Kt),et()),Kt(Ft)}const Ht={schedule:(Kt,Yt=!1,Jt=!1)=>{const er=Jt&&kt?dt:$t;return Yt&&Dt.add(Kt),er.has(Kt)||er.add(Kt),Kt},cancel:Kt=>{$t.delete(Kt),Dt.delete(Kt)},process:Kt=>{if(Ft=Kt,kt){Tt=!0;return}kt=!0,[dt,$t]=[$t,dt],dt.forEach(Ut),dt.clear(),kt=!1,Tt&&(Tt=!1,Ht.process(Kt))}};return Ht}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(et,dt){let $t=!1,kt=!0;const Tt={delta:0,timestamp:0,isProcessing:!1},Dt=()=>$t=!0,Ft=stepsOrder.reduce((ir,or)=>(ir[or]=createRenderStep(Dt),ir),{}),{read:Ut,resolveKeyframes:Ht,update:Kt,preRender:Yt,render:Jt,postRender:Zt}=Ft,er=()=>{const ir=performance.now();$t=!1,Tt.delta=kt?1e3/60:Math.max(Math.min(ir-Tt.timestamp,maxElapsed),1),Tt.timestamp=ir,Tt.isProcessing=!0,Ut.process(Tt),Ht.process(Tt),Kt.process(Tt),Yt.process(Tt),Jt.process(Tt),Zt.process(Tt),Tt.isProcessing=!1,$t&&dt&&(kt=!1,et(er))},rr=()=>{$t=!0,kt=!0,Tt.isProcessing||et(er)};return{schedule:stepsOrder.reduce((ir,or)=>{const lr=Ft[or];return ir[or]=(cr,dr=!1,ur=!1)=>($t||rr(),lr.schedule(cr,dr,ur)),ir},{}),cancel:ir=>{for(let or=0;or<stepsOrder.length;or++)Ft[stepsOrder[or]].cancel(ir)},state:Tt,steps:Ft}}const{schedule:frame,cancel:cancelFrame$1,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$c,!0),calcBezier=(et,dt,$t)=>(((1-3*$t+3*dt)*et+(3*$t-6*dt))*et+3*dt)*et,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(et,dt,$t,kt,Tt){let Dt,Ft,Ut=0;do Ft=dt+($t-dt)/2,Dt=calcBezier(Ft,kt,Tt)-et,Dt>0?$t=Ft:dt=Ft;while(Math.abs(Dt)>subdivisionPrecision&&++Ut<subdivisionMaxIterations);return Ft}function cubicBezier(et,dt,$t,kt){if(et===dt&&$t===kt)return noop$c;const Tt=Dt=>binarySubdivide(Dt,0,1,et,$t);return Dt=>Dt===0||Dt===1?Dt:calcBezier(Tt(Dt),dt,kt)}const mirrorEasing=et=>dt=>dt<=.5?et(2*dt)/2:(2-et(2*(1-dt)))/2,reverseEasing=et=>dt=>1-et(1-dt),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=et=>(et*=2)<1?.5*backIn(et):.5*(2-Math.pow(2,-10*(et-1))),circIn=et=>1-Math.sin(Math.acos(et)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=et=>/^0[^.\s]+$/u.test(et);function isNone(et){return typeof et=="number"?et===0:et!==null?et==="none"||et==="0"||isZeroValueString(et):!0}const isNumericalString=et=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(et),checkStringStartsWith=et=>dt=>typeof dt=="string"&&dt.startsWith(et),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=et=>startsAsVariableToken(et)?singleCssVariableRegex.test(et.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable$6(et){const dt=splitCSSVariableRegex.exec(et);if(!dt)return[,];const[,$t,kt,Tt]=dt;return[`--${$t??kt}`,Tt]}function getVariableValue(et,dt,$t=1){const[kt,Tt]=parseCSSVariable$6(et);if(!kt)return;const Dt=window.getComputedStyle(dt).getPropertyValue(kt);if(Dt){const Ft=Dt.trim();return isNumericalString(Ft)?parseFloat(Ft):Ft}return isCSSVariableToken(Tt)?getVariableValue(Tt,dt,$t+1):Tt}const clamp$6=(et,dt,$t)=>$t>dt?dt:$t<et?et:$t,number$3={test:et=>typeof et=="number",parse:parseFloat,transform:et=>et},alpha$1={...number$3,transform:et=>clamp$6(0,1,et)},scale={...number$3,default:1},createUnitType=et=>({test:dt=>typeof dt=="string"&&dt.endsWith(et)&&dt.split(" ").length===1,parse:parseFloat,transform:dt=>`${dt}${et}`}),degrees$1=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:et=>percent.parse(et)/100,transform:et=>percent.transform(et*100)},positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isNumOrPxType=et=>et===number$3||et===px,getPosFromMatrix=(et,dt)=>parseFloat(et.split(", ")[dt]),getTranslateFromMatrix=(et,dt)=>($t,{transform:kt})=>{if(kt==="none"||!kt)return 0;const Tt=kt.match(/^matrix3d\((.+)\)$/u);if(Tt)return getPosFromMatrix(Tt[1],dt);{const Dt=kt.match(/^matrix\((.+)\)$/u);return Dt?getPosFromMatrix(Dt[1],et):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(et=>!transformKeys.has(et));function removeNonTranslationalTransform(et){const dt=[];return nonTranslationalTransformKeys.forEach($t=>{const kt=et.getValue($t);kt!==void 0&&(dt.push([$t,kt.get()]),kt.set($t.startsWith("scale")?1:0))}),dt}const positionalValues={width:({x:et},{paddingLeft:dt="0",paddingRight:$t="0"})=>et.max-et.min-parseFloat(dt)-parseFloat($t),height:({y:et},{paddingTop:dt="0",paddingBottom:$t="0"})=>et.max-et.min-parseFloat(dt)-parseFloat($t),top:(et,{top:dt})=>parseFloat(dt),left:(et,{left:dt})=>parseFloat(dt),bottom:({y:et},{top:dt})=>parseFloat(dt)+(et.max-et.min),right:({x:et},{left:dt})=>parseFloat(dt)+(et.max-et.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const testValueType=et=>dt=>dt.test(et),auto={test:et=>et==="auto",parse:et=>et},dimensionValueTypes=[number$3,px,percent,degrees$1,vw,vh,auto],findDimensionValueType=et=>dimensionValueTypes.find(testValueType(et)),toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const et=Array.from(toResolve).filter(kt=>kt.needsMeasurement),dt=new Set(et.map(kt=>kt.element)),$t=new Map;dt.forEach(kt=>{const Tt=removeNonTranslationalTransform(kt);Tt.length&&($t.set(kt,Tt),kt.render())}),et.forEach(kt=>kt.measureInitialState()),dt.forEach(kt=>{kt.render();const Tt=$t.get(kt);Tt&&Tt.forEach(([Dt,Ft])=>{var Ut;(Ut=kt.getValue(Dt))===null||Ut===void 0||Ut.set(Ft)})}),et.forEach(kt=>kt.measureEndState()),et.forEach(kt=>{kt.suspendedScrollY!==void 0&&window.scrollTo(0,kt.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(et=>et.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(et=>{et.readKeyframes(),et.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(dt,$t,kt,Tt,Dt,Ft=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...dt],this.onComplete=$t,this.name=kt,this.motionValue=Tt,this.element=Dt,this.isAsync=Ft}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:dt,name:$t,element:kt,motionValue:Tt}=this;for(let Dt=0;Dt<dt.length;Dt++)if(dt[Dt]===null)if(Dt===0){const Ft=Tt==null?void 0:Tt.get(),Ut=dt[dt.length-1];if(Ft!==void 0)dt[0]=Ft;else if(kt&&$t){const Ht=kt.readValue($t,Ut);Ht!=null&&(dt[0]=Ht)}dt[0]===void 0&&(dt[0]=Ut),Tt&&Ft===void 0&&Tt.set(dt[0])}else dt[Dt]=dt[Dt-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const sanitize=et=>Math.round(et*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(et){return et==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(et,dt)=>$t=>!!(typeof $t=="string"&&singleColorRegex.test($t)&&$t.startsWith(et)||dt&&!isNullish($t)&&Object.prototype.hasOwnProperty.call($t,dt)),splitColor=(et,dt,$t)=>kt=>{if(typeof kt!="string")return kt;const[Tt,Dt,Ft,Ut]=kt.match(floatRegex);return{[et]:parseFloat(Tt),[dt]:parseFloat(Dt),[$t]:parseFloat(Ft),alpha:Ut!==void 0?parseFloat(Ut):1}},clampRgbUnit=et=>clamp$6(0,255,et),rgbUnit={...number$3,transform:et=>Math.round(clampRgbUnit(et))},rgba$7={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:et,green:dt,blue:$t,alpha:kt=1})=>"rgba("+rgbUnit.transform(et)+", "+rgbUnit.transform(dt)+", "+rgbUnit.transform($t)+", "+sanitize(alpha$1.transform(kt))+")"};function parseHex(et){let dt="",$t="",kt="",Tt="";return et.length>5?(dt=et.substring(1,3),$t=et.substring(3,5),kt=et.substring(5,7),Tt=et.substring(7,9)):(dt=et.substring(1,2),$t=et.substring(2,3),kt=et.substring(3,4),Tt=et.substring(4,5),dt+=dt,$t+=$t,kt+=kt,Tt+=Tt),{red:parseInt(dt,16),green:parseInt($t,16),blue:parseInt(kt,16),alpha:Tt?parseInt(Tt,16)/255:1}}const hex$1={test:isColorString("#"),parse:parseHex,transform:rgba$7.transform},hsla$7={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:et,saturation:dt,lightness:$t,alpha:kt=1})=>"hsla("+Math.round(et)+", "+percent.transform(sanitize(dt))+", "+percent.transform(sanitize($t))+", "+sanitize(alpha$1.transform(kt))+")"},color$1={test:et=>rgba$7.test(et)||hex$1.test(et)||hsla$7.test(et),parse:et=>rgba$7.test(et)?rgba$7.parse(et):hsla$7.test(et)?hsla$7.parse(et):hex$1.parse(et),transform:et=>typeof et=="string"?et:et.hasOwnProperty("red")?rgba$7.transform(et):hsla$7.transform(et)},colorRegex$6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(et){var dt,$t;return isNaN(et)&&typeof et=="string"&&(((dt=et.match(floatRegex))===null||dt===void 0?void 0:dt.length)||0)+((($t=et.match(colorRegex$6))===null||$t===void 0?void 0:$t.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(et){const dt=et.toString(),$t=[],kt={color:[],number:[],var:[]},Tt=[];let Dt=0;const Ut=dt.replace(complexRegex,Ht=>(color$1.test(Ht)?(kt.color.push(Dt),Tt.push(COLOR_TOKEN),$t.push(color$1.parse(Ht))):Ht.startsWith(VAR_FUNCTION_TOKEN)?(kt.var.push(Dt),Tt.push(VAR_TOKEN),$t.push(Ht)):(kt.number.push(Dt),Tt.push(NUMBER_TOKEN),$t.push(parseFloat(Ht))),++Dt,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:$t,split:Ut,indexes:kt,types:Tt}}function parseComplexValue(et){return analyseComplexValue(et).values}function createTransformer(et){const{split:dt,types:$t}=analyseComplexValue(et),kt=dt.length;return Tt=>{let Dt="";for(let Ft=0;Ft<kt;Ft++)if(Dt+=dt[Ft],Tt[Ft]!==void 0){const Ut=$t[Ft];Ut===NUMBER_TOKEN?Dt+=sanitize(Tt[Ft]):Ut===COLOR_TOKEN?Dt+=color$1.transform(Tt[Ft]):Dt+=Tt[Ft]}return Dt}}const convertNumbersToZero=et=>typeof et=="number"?0:et;function getAnimatableNone$1(et){const dt=parseComplexValue(et);return createTransformer(et)(dt.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(et){const[dt,$t]=et.slice(0,-1).split("(");if(dt==="drop-shadow")return et;const[kt]=$t.match(floatRegex)||[];if(!kt)return et;const Tt=$t.replace(kt,"");let Dt=maxDefaults.has(dt)?1:0;return kt!==$t&&(Dt*=100),dt+"("+Dt+Tt+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter$1={...complex,getAnimatableNone:et=>{const dt=et.match(functionRegex);return dt?dt.map(applyDefaultFilter).join(" "):et}},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees$1,rotateX:degrees$1,rotateY:degrees$1,rotateZ:degrees$1,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees$1,skewX:degrees$1,skewY:degrees$1,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha$1,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number$3,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha$1,strokeOpacity:alpha$1,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter:filter$1,WebkitFilter:filter$1},getDefaultValueType=et=>defaultValueTypes[et];function getAnimatableNone(et,dt){let $t=getDefaultValueType(et);return $t!==filter$1&&($t=complex),$t.getAnimatableNone?$t.getAnimatableNone(dt):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(et,dt,$t){let kt=0,Tt;for(;kt<et.length&&!Tt;){const Dt=et[kt];typeof Dt=="string"&&!invalidTemplates.has(Dt)&&analyseComplexValue(Dt).values.length&&(Tt=et[kt]),kt++}if(Tt&&$t)for(const Dt of dt)et[Dt]=getAnimatableNone($t,Tt)}class DOMKeyframesResolver extends KeyframeResolver{constructor(dt,$t,kt,Tt,Dt){super(dt,$t,kt,Tt,Dt,!0)}readKeyframes(){const{unresolvedKeyframes:dt,element:$t,name:kt}=this;if(!$t||!$t.current)return;super.readKeyframes();for(let Ht=0;Ht<dt.length;Ht++){let Kt=dt[Ht];if(typeof Kt=="string"&&(Kt=Kt.trim(),isCSSVariableToken(Kt))){const Yt=getVariableValue(Kt,$t.current);Yt!==void 0&&(dt[Ht]=Yt),Ht===dt.length-1&&(this.finalKeyframe=Kt)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(kt)||dt.length!==2)return;const[Tt,Dt]=dt,Ft=findDimensionValueType(Tt),Ut=findDimensionValueType(Dt);if(Ft!==Ut)if(isNumOrPxType(Ft)&&isNumOrPxType(Ut))for(let Ht=0;Ht<dt.length;Ht++){const Kt=dt[Ht];typeof Kt=="string"&&(dt[Ht]=parseFloat(Kt))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:dt,name:$t}=this,kt=[];for(let Tt=0;Tt<dt.length;Tt++)isNone(dt[Tt])&&kt.push(Tt);kt.length&&makeNoneKeyframesAnimatable(dt,kt,$t)}measureInitialState(){const{element:dt,unresolvedKeyframes:$t,name:kt}=this;if(!dt||!dt.current)return;kt==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[kt](dt.measureViewportBox(),window.getComputedStyle(dt.current)),$t[0]=this.measuredOrigin;const Tt=$t[$t.length-1];Tt!==void 0&&dt.getValue(kt,Tt).jump(Tt,!1)}measureEndState(){var dt;const{element:$t,name:kt,unresolvedKeyframes:Tt}=this;if(!$t||!$t.current)return;const Dt=$t.getValue(kt);Dt&&Dt.jump(this.measuredOrigin,!1);const Ft=Tt.length-1,Ut=Tt[Ft];Tt[Ft]=positionalValues[kt]($t.measureViewportBox(),window.getComputedStyle($t.current)),Ut!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=Ut),!((dt=this.removedTransforms)===null||dt===void 0)&&dt.length&&this.removedTransforms.forEach(([Ht,Kt])=>{$t.getValue(Ht).set(Kt)}),this.resolveNoneKeyframes()}}function isGenerator(et){return typeof et=="function"}let now;function clearTime(){now=void 0}const time$1={now:()=>(now===void 0&&time$1.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:et=>{now=et,queueMicrotask(clearTime)}},isAnimatable=(et,dt)=>dt==="zIndex"?!1:!!(typeof et=="number"||Array.isArray(et)||typeof et=="string"&&(complex.test(et)||et==="0")&&!et.startsWith("url("));function hasKeyframesChanged(et){const dt=et[0];if(et.length===1)return!0;for(let $t=0;$t<et.length;$t++)if(et[$t]!==dt)return!0}function canAnimate(et,dt,$t,kt){const Tt=et[0];if(Tt===null)return!1;if(dt==="display"||dt==="visibility")return!0;const Dt=et[et.length-1],Ft=isAnimatable(Tt,dt),Ut=isAnimatable(Dt,dt);return!Ft||!Ut?!1:hasKeyframesChanged(et)||($t==="spring"||isGenerator($t))&&kt}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:dt=!0,delay:$t=0,type:kt="keyframes",repeat:Tt=0,repeatDelay:Dt=0,repeatType:Ft="loop",...Ut}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time$1.now(),this.options={autoplay:dt,delay:$t,type:kt,repeat:Tt,repeatDelay:Dt,repeatType:Ft,...Ut},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(dt,$t){this.resolvedAt=time$1.now(),this.hasAttemptedResolve=!0;const{name:kt,type:Tt,velocity:Dt,delay:Ft,onComplete:Ut,onUpdate:Ht,isGenerator:Kt}=this.options;if(!Kt&&!canAnimate(dt,kt,Tt,Dt))if(Ft)this.options.duration=0;else{Ht==null||Ht(getFinalKeyframe(dt,this.options,$t)),Ut==null||Ut(),this.resolveFinishedPromise();return}const Yt=this.initPlayback(dt,$t);Yt!==!1&&(this._resolved={keyframes:dt,finalKeyframe:$t,...Yt},this.onPostResolved())}onPostResolved(){}then(dt,$t){return this.currentFinishedPromise.then(dt,$t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(dt=>{this.resolveFinishedPromise=dt})}}const progress=(et,dt,$t)=>{const kt=dt-et;return kt===0?1:($t-et)/kt},generateLinearEasing=(et,dt,$t=10)=>{let kt="";const Tt=Math.max(Math.round(dt/$t),2);for(let Dt=0;Dt<Tt;Dt++)kt+=et(progress(0,Tt-1,Dt))+", ";return`linear(${kt.substring(0,kt.length-2)})`};function velocityPerSecond(et,dt){return dt?et*(1e3/dt):0}const velocitySampleDuration=5;function calcGeneratorVelocity(et,dt,$t){const kt=Math.max(dt-velocitySampleDuration,0);return velocityPerSecond($t-et(kt),dt-kt)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:et=springDefaults.duration,bounce:dt=springDefaults.bounce,velocity:$t=springDefaults.velocity,mass:kt=springDefaults.mass}){let Tt,Dt,Ft=1-dt;Ft=clamp$6(springDefaults.minDamping,springDefaults.maxDamping,Ft),et=clamp$6(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(et)),Ft<1?(Tt=Kt=>{const Yt=Kt*Ft,Jt=Yt*et,Zt=Yt-$t,er=calcAngularFreq(Kt,Ft),rr=Math.exp(-Jt);return safeMin-Zt/er*rr},Dt=Kt=>{const Jt=Kt*Ft*et,Zt=Jt*$t+$t,er=Math.pow(Ft,2)*Math.pow(Kt,2)*et,rr=Math.exp(-Jt),sr=calcAngularFreq(Math.pow(Kt,2),Ft);return(-Tt(Kt)+safeMin>0?-1:1)*((Zt-er)*rr)/sr}):(Tt=Kt=>{const Yt=Math.exp(-Kt*et),Jt=(Kt-$t)*et+1;return-safeMin+Yt*Jt},Dt=Kt=>{const Yt=Math.exp(-Kt*et),Jt=($t-Kt)*(et*et);return Yt*Jt});const Ut=5/et,Ht=approximateRoot(Tt,Dt,Ut);if(et=secondsToMilliseconds(et),isNaN(Ht))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:et};{const Kt=Math.pow(Ht,2)*kt;return{stiffness:Kt,damping:Ft*2*Math.sqrt(kt*Kt),duration:et}}}const rootIterations=12;function approximateRoot(et,dt,$t){let kt=$t;for(let Tt=1;Tt<rootIterations;Tt++)kt=kt-et(kt)/dt(kt);return kt}function calcAngularFreq(et,dt){return et*Math.sqrt(1-dt*dt)}const maxGeneratorDuration=2e4;function calcGeneratorDuration(et){let dt=0;const $t=50;let kt=et.next(dt);for(;!kt.done&&dt<maxGeneratorDuration;)dt+=$t,kt=et.next(dt);return dt>=maxGeneratorDuration?1/0:dt}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(et,dt){return dt.some($t=>et[$t]!==void 0)}function getSpringOptions(et){let dt={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...et};if(!isSpringType(et,physicsKeys)&&isSpringType(et,durationKeys))if(et.visualDuration){const $t=et.visualDuration,kt=2*Math.PI/($t*1.2),Tt=kt*kt,Dt=2*clamp$6(.05,1,1-et.bounce)*Math.sqrt(Tt);dt={...dt,mass:springDefaults.mass,stiffness:Tt,damping:Dt}}else{const $t=findSpring(et);dt={...dt,...$t,mass:springDefaults.mass},dt.isResolvedFromDuration=!0}return dt}function spring(et=springDefaults.visualDuration,dt=springDefaults.bounce){const $t=typeof et!="object"?{visualDuration:et,keyframes:[0,1],bounce:dt}:et;let{restSpeed:kt,restDelta:Tt}=$t;const Dt=$t.keyframes[0],Ft=$t.keyframes[$t.keyframes.length-1],Ut={done:!1,value:Dt},{stiffness:Ht,damping:Kt,mass:Yt,duration:Jt,velocity:Zt,isResolvedFromDuration:er}=getSpringOptions({...$t,velocity:-millisecondsToSeconds($t.velocity||0)}),rr=Zt||0,sr=Kt/(2*Math.sqrt(Ht*Yt)),nr=Ft-Dt,ir=millisecondsToSeconds(Math.sqrt(Ht/Yt)),or=Math.abs(nr)<5;kt||(kt=or?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),Tt||(Tt=or?springDefaults.restDelta.granular:springDefaults.restDelta.default);let lr;if(sr<1){const dr=calcAngularFreq(ir,sr);lr=ur=>{const pr=Math.exp(-sr*ir*ur);return Ft-pr*((rr+sr*ir*nr)/dr*Math.sin(dr*ur)+nr*Math.cos(dr*ur))}}else if(sr===1)lr=dr=>Ft-Math.exp(-ir*dr)*(nr+(rr+ir*nr)*dr);else{const dr=ir*Math.sqrt(sr*sr-1);lr=ur=>{const pr=Math.exp(-sr*ir*ur),mr=Math.min(dr*ur,300);return Ft-pr*((rr+sr*ir*nr)*Math.sinh(mr)+dr*nr*Math.cosh(mr))/dr}}const cr={calculatedDuration:er&&Jt||null,next:dr=>{const ur=lr(dr);if(er)Ut.done=dr>=Jt;else{let pr=0;sr<1&&(pr=dr===0?secondsToMilliseconds(rr):calcGeneratorVelocity(lr,dr,ur));const mr=Math.abs(pr)<=kt,jr=Math.abs(Ft-ur)<=Tt;Ut.done=mr&&jr}return Ut.value=Ut.done?Ft:ur,Ut},toString:()=>{const dr=Math.min(calcGeneratorDuration(cr),maxGeneratorDuration),ur=generateLinearEasing(pr=>cr.next(dr*pr).value,dr,30);return dr+"ms "+ur}};return cr}function inertia({keyframes:et,velocity:dt=0,power:$t=.8,timeConstant:kt=325,bounceDamping:Tt=10,bounceStiffness:Dt=500,modifyTarget:Ft,min:Ut,max:Ht,restDelta:Kt=.5,restSpeed:Yt}){const Jt=et[0],Zt={done:!1,value:Jt},er=mr=>Ut!==void 0&&mr<Ut||Ht!==void 0&&mr>Ht,rr=mr=>Ut===void 0?Ht:Ht===void 0||Math.abs(Ut-mr)<Math.abs(Ht-mr)?Ut:Ht;let sr=$t*dt;const nr=Jt+sr,ir=Ft===void 0?nr:Ft(nr);ir!==nr&&(sr=ir-Jt);const or=mr=>-sr*Math.exp(-mr/kt),lr=mr=>ir+or(mr),cr=mr=>{const jr=or(mr),Rr=lr(mr);Zt.done=Math.abs(jr)<=Kt,Zt.value=Zt.done?ir:Rr};let dr,ur;const pr=mr=>{er(Zt.value)&&(dr=mr,ur=spring({keyframes:[Zt.value,rr(Zt.value)],velocity:calcGeneratorVelocity(lr,mr,Zt.value),damping:Tt,stiffness:Dt,restDelta:Kt,restSpeed:Yt}))};return pr(0),{calculatedDuration:null,next:mr=>{let jr=!1;return!ur&&dr===void 0&&(jr=!0,cr(mr),pr(mr)),dr!==void 0&&mr>=dr?ur.next(mr-dr):(!jr&&cr(mr),Zt)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=et=>Array.isArray(et)&&typeof et[0]!="number",isBezierDefinition=et=>Array.isArray(et)&&typeof et[0]=="number",easingLookup={linear:noop$c,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=et=>{if(isBezierDefinition(et)){invariant$1(et.length===4);const[dt,$t,kt,Tt]=et;return cubicBezier(dt,$t,kt,Tt)}else if(typeof et=="string")return easingLookup[et];return et},combineFunctions=(et,dt)=>$t=>dt(et($t)),pipe=(...et)=>et.reduce(combineFunctions),mixNumber$1=(et,dt,$t)=>et+(dt-et)*$t;function hueToRgb(et,dt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?et+(dt-et)*6*$t:$t<1/2?dt:$t<2/3?et+(dt-et)*(2/3-$t)*6:et}function hslaToRgba({hue:et,saturation:dt,lightness:$t,alpha:kt}){et/=360,dt/=100,$t/=100;let Tt=0,Dt=0,Ft=0;if(!dt)Tt=Dt=Ft=$t;else{const Ut=$t<.5?$t*(1+dt):$t+dt-$t*dt,Ht=2*$t-Ut;Tt=hueToRgb(Ht,Ut,et+1/3),Dt=hueToRgb(Ht,Ut,et),Ft=hueToRgb(Ht,Ut,et-1/3)}return{red:Math.round(Tt*255),green:Math.round(Dt*255),blue:Math.round(Ft*255),alpha:kt}}function mixImmediate(et,dt){return $t=>$t>0?dt:et}const mixLinearColor=(et,dt,$t)=>{const kt=et*et,Tt=$t*(dt*dt-kt)+kt;return Tt<0?0:Math.sqrt(Tt)},colorTypes=[hex$1,rgba$7,hsla$7],getColorType=et=>colorTypes.find(dt=>dt.test(et));function asRGBA(et){const dt=getColorType(et);if(!dt)return!1;let $t=dt.parse(et);return dt===hsla$7&&($t=hslaToRgba($t)),$t}const mixColor=(et,dt)=>{const $t=asRGBA(et),kt=asRGBA(dt);if(!$t||!kt)return mixImmediate(et,dt);const Tt={...$t};return Dt=>(Tt.red=mixLinearColor($t.red,kt.red,Dt),Tt.green=mixLinearColor($t.green,kt.green,Dt),Tt.blue=mixLinearColor($t.blue,kt.blue,Dt),Tt.alpha=mixNumber$1($t.alpha,kt.alpha,Dt),rgba$7.transform(Tt))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(et,dt){return invisibleValues.has(et)?$t=>$t<=0?et:dt:$t=>$t>=1?dt:et}function mixNumber(et,dt){return $t=>mixNumber$1(et,dt,$t)}function getMixer(et){return typeof et=="number"?mixNumber:typeof et=="string"?isCSSVariableToken(et)?mixImmediate:color$1.test(et)?mixColor:mixComplex:Array.isArray(et)?mixArray:typeof et=="object"?color$1.test(et)?mixColor:mixObject:mixImmediate}function mixArray(et,dt){const $t=[...et],kt=$t.length,Tt=et.map((Dt,Ft)=>getMixer(Dt)(Dt,dt[Ft]));return Dt=>{for(let Ft=0;Ft<kt;Ft++)$t[Ft]=Tt[Ft](Dt);return $t}}function mixObject(et,dt){const $t={...et,...dt},kt={};for(const Tt in $t)et[Tt]!==void 0&&dt[Tt]!==void 0&&(kt[Tt]=getMixer(et[Tt])(et[Tt],dt[Tt]));return Tt=>{for(const Dt in kt)$t[Dt]=kt[Dt](Tt);return $t}}function matchOrder(et,dt){var $t;const kt=[],Tt={color:0,var:0,number:0};for(let Dt=0;Dt<dt.values.length;Dt++){const Ft=dt.types[Dt],Ut=et.indexes[Ft][Tt[Ft]],Ht=($t=et.values[Ut])!==null&&$t!==void 0?$t:0;kt[Dt]=Ht,Tt[Ft]++}return kt}const mixComplex=(et,dt)=>{const $t=complex.createTransformer(dt),kt=analyseComplexValue(et),Tt=analyseComplexValue(dt);return kt.indexes.var.length===Tt.indexes.var.length&&kt.indexes.color.length===Tt.indexes.color.length&&kt.indexes.number.length>=Tt.indexes.number.length?invisibleValues.has(et)&&!Tt.values.length||invisibleValues.has(dt)&&!kt.values.length?mixVisibility(et,dt):pipe(mixArray(matchOrder(kt,Tt),Tt.values),$t):mixImmediate(et,dt)};function mix(et,dt,$t){return typeof et=="number"&&typeof dt=="number"&&typeof $t=="number"?mixNumber$1(et,dt,$t):getMixer(et)(et,dt)}function createMixers(et,dt,$t){const kt=[],Tt=$t||mix,Dt=et.length-1;for(let Ft=0;Ft<Dt;Ft++){let Ut=Tt(et[Ft],et[Ft+1]);if(dt){const Ht=Array.isArray(dt)?dt[Ft]||noop$c:dt;Ut=pipe(Ht,Ut)}kt.push(Ut)}return kt}function interpolate$7(et,dt,{clamp:$t=!0,ease:kt,mixer:Tt}={}){const Dt=et.length;if(invariant$1(Dt===dt.length),Dt===1)return()=>dt[0];if(Dt===2&&et[0]===et[1])return()=>dt[1];et[0]>et[Dt-1]&&(et=[...et].reverse(),dt=[...dt].reverse());const Ft=createMixers(dt,kt,Tt),Ut=Ft.length,Ht=Kt=>{let Yt=0;if(Ut>1)for(;Yt<et.length-2&&!(Kt<et[Yt+1]);Yt++);const Jt=progress(et[Yt],et[Yt+1],Kt);return Ft[Yt](Jt)};return $t?Kt=>Ht(clamp$6(et[0],et[Dt-1],Kt)):Ht}function fillOffset(et,dt){const $t=et[et.length-1];for(let kt=1;kt<=dt;kt++){const Tt=progress(0,dt,kt);et.push(mixNumber$1($t,1,Tt))}}function defaultOffset(et){const dt=[0];return fillOffset(dt,et.length-1),dt}function convertOffsetToTimes(et,dt){return et.map($t=>$t*dt)}function defaultEasing(et,dt){return et.map(()=>dt||easeInOut).splice(0,et.length-1)}function keyframes({duration:et=300,keyframes:dt,times:$t,ease:kt="easeInOut"}){const Tt=isEasingArray(kt)?kt.map(easingDefinitionToFunction):easingDefinitionToFunction(kt),Dt={done:!1,value:dt[0]},Ft=convertOffsetToTimes($t&&$t.length===dt.length?$t:defaultOffset(dt),et),Ut=interpolate$7(Ft,dt,{ease:Array.isArray(Tt)?Tt:defaultEasing(dt,Tt)});return{calculatedDuration:et,next:Ht=>(Dt.value=Ut(Ht),Dt.done=Ht>=et,Dt)}}const frameloopDriver=et=>{const dt=({timestamp:$t})=>et($t);return{start:()=>frame.update(dt,!0),stop:()=>cancelFrame$1(dt),now:()=>frameData.isProcessing?frameData.timestamp:time$1.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=et=>et/100;class MainThreadAnimation extends BaseAnimation{constructor(dt){super(dt),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:Ht}=this.options;Ht&&Ht()};const{name:$t,motionValue:kt,element:Tt,keyframes:Dt}=this.options,Ft=(Tt==null?void 0:Tt.KeyframeResolver)||KeyframeResolver,Ut=(Ht,Kt)=>this.onKeyframesResolved(Ht,Kt);this.resolver=new Ft(Dt,Ut,$t,kt,Tt),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(dt){const{type:$t="keyframes",repeat:kt=0,repeatDelay:Tt=0,repeatType:Dt,velocity:Ft=0}=this.options,Ut=isGenerator($t)?$t:generators[$t]||keyframes;let Ht,Kt;Ut!==keyframes&&typeof dt[0]!="number"&&(Ht=pipe(percentToProgress,mix(dt[0],dt[1])),dt=[0,100]);const Yt=Ut({...this.options,keyframes:dt});Dt==="mirror"&&(Kt=Ut({...this.options,keyframes:[...dt].reverse(),velocity:-Ft})),Yt.calculatedDuration===null&&(Yt.calculatedDuration=calcGeneratorDuration(Yt));const{calculatedDuration:Jt}=Yt,Zt=Jt+Tt,er=Zt*(kt+1)-Tt;return{generator:Yt,mirroredGenerator:Kt,mapPercentToKeyframes:Ht,calculatedDuration:Jt,resolvedDuration:Zt,totalDuration:er}}onPostResolved(){const{autoplay:dt=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!dt?this.pause():this.state=this.pendingPlayState}tick(dt,$t=!1){const{resolved:kt}=this;if(!kt){const{keyframes:mr}=this.options;return{done:!0,value:mr[mr.length-1]}}const{finalKeyframe:Tt,generator:Dt,mirroredGenerator:Ft,mapPercentToKeyframes:Ut,keyframes:Ht,calculatedDuration:Kt,totalDuration:Yt,resolvedDuration:Jt}=kt;if(this.startTime===null)return Dt.next(0);const{delay:Zt,repeat:er,repeatType:rr,repeatDelay:sr,onUpdate:nr}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,dt):this.speed<0&&(this.startTime=Math.min(dt-Yt/this.speed,this.startTime)),$t?this.currentTime=dt:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(dt-this.startTime)*this.speed;const ir=this.currentTime-Zt*(this.speed>=0?1:-1),or=this.speed>=0?ir<0:ir>Yt;this.currentTime=Math.max(ir,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Yt);let lr=this.currentTime,cr=Dt;if(er){const mr=Math.min(this.currentTime,Yt)/Jt;let jr=Math.floor(mr),Rr=mr%1;!Rr&&mr>=1&&(Rr=1),Rr===1&&jr--,jr=Math.min(jr,er+1),!!(jr%2)&&(rr==="reverse"?(Rr=1-Rr,sr&&(Rr-=sr/Jt)):rr==="mirror"&&(cr=Ft)),lr=clamp$6(0,1,Rr)*Jt}const dr=or?{done:!1,value:Ht[0]}:cr.next(lr);Ut&&(dr.value=Ut(dr.value));let{done:ur}=dr;!or&&Kt!==null&&(ur=this.speed>=0?this.currentTime>=Yt:this.currentTime<=0);const pr=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ur);return pr&&Tt!==void 0&&(dr.value=getFinalKeyframe(Ht,this.options,Tt)),nr&&nr(dr.value),pr&&this.finish(),dr}get duration(){const{resolved:dt}=this;return dt?millisecondsToSeconds(dt.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(dt){dt=secondsToMilliseconds(dt),this.currentTime=dt,this.holdTime!==null||this.speed===0?this.holdTime=dt:this.driver&&(this.startTime=this.driver.now()-dt/this.speed)}get speed(){return this.playbackSpeed}set speed(dt){const $t=this.playbackSpeed!==dt;this.playbackSpeed=dt,$t&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:dt=frameloopDriver,onPlay:$t,startTime:kt}=this.options;this.driver||(this.driver=dt(Dt=>this.tick(Dt))),$t&&$t();const Tt=this.driver.now();this.holdTime!==null?this.startTime=Tt-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=Tt):this.startTime=kt??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var dt;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(dt=this.currentTime)!==null&&dt!==void 0?dt:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:dt}=this.options;dt&&dt()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(dt){return this.startTime=0,this.tick(dt,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function memo(et){let dt;return()=>(dt===void 0&&(dt=et()),dt)}const supportsFlags={linearEasing:void 0};function memoSupports(et,dt){const $t=memo(et);return()=>{var kt;return(kt=supportsFlags[dt])!==null&&kt!==void 0?kt:$t()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function isWaapiSupportedEasing(et){return!!(typeof et=="function"&&supportsLinearEasing()||!et||typeof et=="string"&&(et in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(et)||Array.isArray(et)&&et.every(isWaapiSupportedEasing))}const cubicBezierAsString=([et,dt,$t,kt])=>`cubic-bezier(${et}, ${dt}, ${$t}, ${kt})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(et,dt){if(et)return typeof et=="function"&&supportsLinearEasing()?generateLinearEasing(et,dt):isBezierDefinition(et)?cubicBezierAsString(et):Array.isArray(et)?et.map($t=>mapEasingToNativeEasing($t,dt)||supportedWaapiEasing.easeOut):supportedWaapiEasing[et]}function startWaapiAnimation(et,dt,$t,{delay:kt=0,duration:Tt=300,repeat:Dt=0,repeatType:Ft="loop",ease:Ut="easeInOut",times:Ht}={}){const Kt={[dt]:$t};Ht&&(Kt.offset=Ht);const Yt=mapEasingToNativeEasing(Ut,Tt);return Array.isArray(Yt)&&(Kt.easing=Yt),et.animate(Kt,{delay:kt,duration:Tt,easing:Array.isArray(Yt)?"linear":Yt,fill:"both",iterations:Dt+1,direction:Ft==="reverse"?"alternate":"normal"})}function attachTimeline(et,dt){et.timeline=dt,et.onfinish=null}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(et){return isGenerator(et.type)||et.type==="spring"||!isWaapiSupportedEasing(et.ease)}function pregenerateKeyframes(et,dt){const $t=new MainThreadAnimation({...dt,keyframes:et,repeat:0,delay:0,isGenerator:!0});let kt={done:!1,value:et[0]};const Tt=[];let Dt=0;for(;!kt.done&&Dt<maxDuration;)kt=$t.sample(Dt),Tt.push(kt.value),Dt+=sampleDelta;return{times:void 0,keyframes:Tt,duration:Dt-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(et){return et in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(dt){super(dt);const{name:$t,motionValue:kt,element:Tt,keyframes:Dt}=this.options;this.resolver=new DOMKeyframesResolver(Dt,(Ft,Ut)=>this.onKeyframesResolved(Ft,Ut),$t,kt,Tt),this.resolver.scheduleResolve()}initPlayback(dt,$t){var kt;let{duration:Tt=300,times:Dt,ease:Ft,type:Ut,motionValue:Ht,name:Kt,startTime:Yt}=this.options;if(!(!((kt=Ht.owner)===null||kt===void 0)&&kt.current))return!1;if(typeof Ft=="string"&&supportsLinearEasing()&&isUnsupportedEase(Ft)&&(Ft=unsupportedEasingFunctions[Ft]),requiresPregeneratedKeyframes(this.options)){const{onComplete:Zt,onUpdate:er,motionValue:rr,element:sr,...nr}=this.options,ir=pregenerateKeyframes(dt,nr);dt=ir.keyframes,dt.length===1&&(dt[1]=dt[0]),Tt=ir.duration,Dt=ir.times,Ft=ir.ease,Ut="keyframes"}const Jt=startWaapiAnimation(Ht.owner.current,Kt,dt,{...this.options,duration:Tt,times:Dt,ease:Ft});return Jt.startTime=Yt??this.calcStartTime(),this.pendingTimeline?(attachTimeline(Jt,this.pendingTimeline),this.pendingTimeline=void 0):Jt.onfinish=()=>{const{onComplete:Zt}=this.options;Ht.set(getFinalKeyframe(dt,this.options,$t)),Zt&&Zt(),this.cancel(),this.resolveFinishedPromise()},{animation:Jt,duration:Tt,times:Dt,type:Ut,ease:Ft,keyframes:dt}}get duration(){const{resolved:dt}=this;if(!dt)return 0;const{duration:$t}=dt;return millisecondsToSeconds($t)}get time(){const{resolved:dt}=this;if(!dt)return 0;const{animation:$t}=dt;return millisecondsToSeconds($t.currentTime||0)}set time(dt){const{resolved:$t}=this;if(!$t)return;const{animation:kt}=$t;kt.currentTime=secondsToMilliseconds(dt)}get speed(){const{resolved:dt}=this;if(!dt)return 1;const{animation:$t}=dt;return $t.playbackRate}set speed(dt){const{resolved:$t}=this;if(!$t)return;const{animation:kt}=$t;kt.playbackRate=dt}get state(){const{resolved:dt}=this;if(!dt)return"idle";const{animation:$t}=dt;return $t.playState}get startTime(){const{resolved:dt}=this;if(!dt)return null;const{animation:$t}=dt;return $t.startTime}attachTimeline(dt){if(!this._resolved)this.pendingTimeline=dt;else{const{resolved:$t}=this;if(!$t)return noop$c;const{animation:kt}=$t;attachTimeline(kt,dt)}return noop$c}play(){if(this.isStopped)return;const{resolved:dt}=this;if(!dt)return;const{animation:$t}=dt;$t.playState==="finished"&&this.updateFinishedPromise(),$t.play()}pause(){const{resolved:dt}=this;if(!dt)return;const{animation:$t}=dt;$t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:dt}=this;if(!dt)return;const{animation:$t,keyframes:kt,duration:Tt,type:Dt,ease:Ft,times:Ut}=dt;if($t.playState==="idle"||$t.playState==="finished")return;if(this.time){const{motionValue:Kt,onUpdate:Yt,onComplete:Jt,element:Zt,...er}=this.options,rr=new MainThreadAnimation({...er,keyframes:kt,duration:Tt,type:Dt,ease:Ft,times:Ut,isGenerator:!0}),sr=secondsToMilliseconds(this.time);Kt.setWithVelocity(rr.sample(sr-sampleDelta).value,rr.sample(sr).value,sampleDelta)}const{onStop:Ht}=this.options;Ht&&Ht(),this.cancel()}complete(){const{resolved:dt}=this;dt&&dt.animation.finish()}cancel(){const{resolved:dt}=this;dt&&dt.animation.cancel()}static supports(dt){const{motionValue:$t,name:kt,repeatDelay:Tt,repeatType:Dt,damping:Ft,type:Ut}=dt;return supportsWaapi()&&kt&&acceleratedValues.has(kt)&&$t&&$t.owner&&$t.owner.current instanceof HTMLElement&&!$t.owner.getProps().onUpdate&&!Tt&&Dt!=="mirror"&&Ft!==0&&Ut!=="inertia"}}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class GroupPlaybackControls{constructor(dt){this.stop=()=>this.runAll("stop"),this.animations=dt.filter(Boolean)}then(dt,$t){return Promise.all(this.animations).then(dt).catch($t)}getAll(dt){return this.animations[0][dt]}setAll(dt,$t){for(let kt=0;kt<this.animations.length;kt++)this.animations[kt][dt]=$t}attachTimeline(dt,$t){const kt=this.animations.map(Tt=>supportsScrollTimeline()&&Tt.attachTimeline?Tt.attachTimeline(dt):$t(Tt));return()=>{kt.forEach((Tt,Dt)=>{Tt&&Tt(),this.animations[Dt].stop()})}}get time(){return this.getAll("time")}set time(dt){this.setAll("time",dt)}get speed(){return this.getAll("speed")}set speed(dt){this.setAll("speed",dt)}get startTime(){return this.getAll("startTime")}get duration(){let dt=0;for(let $t=0;$t<this.animations.length;$t++)dt=Math.max(dt,this.animations[$t].duration);return dt}runAll(dt){this.animations.forEach($t=>$t[dt]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function isTransitionDefined({when:et,delay:dt,delayChildren:$t,staggerChildren:kt,staggerDirection:Tt,repeat:Dt,repeatType:Ft,repeatDelay:Ut,from:Ht,elapsed:Kt,...Yt}){return!!Object.keys(Yt).length}const animateMotionValue=(et,dt,$t,kt={},Tt,Dt)=>Ft=>{const Ut=getValueTransition(kt,et)||{},Ht=Ut.delay||kt.delay||0;let{elapsed:Kt=0}=kt;Kt=Kt-secondsToMilliseconds(Ht);let Yt={keyframes:Array.isArray($t)?$t:[null,$t],ease:"easeOut",velocity:dt.getVelocity(),...Ut,delay:-Kt,onUpdate:Zt=>{dt.set(Zt),Ut.onUpdate&&Ut.onUpdate(Zt)},onComplete:()=>{Ft(),Ut.onComplete&&Ut.onComplete()},name:et,motionValue:dt,element:Dt?void 0:Tt};isTransitionDefined(Ut)||(Yt={...Yt,...getDefaultTransition(et,Yt)}),Yt.duration&&(Yt.duration=secondsToMilliseconds(Yt.duration)),Yt.repeatDelay&&(Yt.repeatDelay=secondsToMilliseconds(Yt.repeatDelay)),Yt.from!==void 0&&(Yt.keyframes[0]=Yt.from);let Jt=!1;if((Yt.type===!1||Yt.duration===0&&!Yt.repeatDelay)&&(Yt.duration=0,Yt.delay===0&&(Jt=!0)),Jt&&!Dt&&dt.get()!==void 0){const Zt=getFinalKeyframe(Yt.keyframes,Ut);if(Zt!==void 0)return frame.update(()=>{Yt.onUpdate(Zt),Yt.onComplete()}),new GroupPlaybackControls([])}return!Dt&&AcceleratedAnimation.supports(Yt)?new AcceleratedAnimation(Yt):new MainThreadAnimation(Yt)},isCustomValue=et=>!!(et&&typeof et=="object"&&et.mix&&et.toValue),resolveFinalValueInKeyframes=et=>isKeyframesTarget(et)?et[et.length-1]||0:et;function addUniqueItem(et,dt){et.indexOf(dt)===-1&&et.push(dt)}function removeItem(et,dt){const $t=et.indexOf(dt);$t>-1&&et.splice($t,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(dt){return addUniqueItem(this.subscriptions,dt),()=>removeItem(this.subscriptions,dt)}notify(dt,$t,kt){const Tt=this.subscriptions.length;if(Tt)if(Tt===1)this.subscriptions[0](dt,$t,kt);else for(let Dt=0;Dt<Tt;Dt++){const Ft=this.subscriptions[Dt];Ft&&Ft(dt,$t,kt)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const MAX_VELOCITY_DELTA=30,isFloat=et=>!isNaN(parseFloat(et));class MotionValue{constructor(dt,$t={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(kt,Tt=!0)=>{const Dt=time$1.now();this.updatedAt!==Dt&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(kt),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),Tt&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(dt),this.owner=$t.owner}setCurrent(dt){this.current=dt,this.updatedAt=time$1.now(),this.canTrackVelocity===null&&dt!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(dt=this.current){this.prevFrameValue=dt,this.prevUpdatedAt=this.updatedAt}onChange(dt){return this.on("change",dt)}on(dt,$t){this.events[dt]||(this.events[dt]=new SubscriptionManager);const kt=this.events[dt].add($t);return dt==="change"?()=>{kt(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:kt}clearListeners(){for(const dt in this.events)this.events[dt].clear()}attach(dt,$t){this.passiveEffect=dt,this.stopPassiveEffect=$t}set(dt,$t=!0){!$t||!this.passiveEffect?this.updateAndNotify(dt,$t):this.passiveEffect(dt,this.updateAndNotify)}setWithVelocity(dt,$t,kt){this.set($t),this.prev=void 0,this.prevFrameValue=dt,this.prevUpdatedAt=this.updatedAt-kt}jump(dt,$t=!0){this.updateAndNotify(dt),this.prev=dt,this.prevUpdatedAt=this.prevFrameValue=void 0,$t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const dt=time$1.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||dt-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const $t=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),$t)}start(dt){return this.stop(),new Promise($t=>{this.hasAnimated=!0,this.animation=dt($t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(et,dt){return new MotionValue(et,dt)}function setMotionValue(et,dt,$t){et.hasValue(dt)?et.getValue(dt).set($t):et.addValue(dt,motionValue($t))}function setTarget(et,dt){const $t=resolveVariant(et,dt);let{transitionEnd:kt={},transition:Tt={},...Dt}=$t||{};Dt={...Dt,...kt};for(const Ft in Dt){const Ut=resolveFinalValueInKeyframes(Dt[Ft]);setMotionValue(et,Ft,Ut)}}const camelToDash=et=>et.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(et){return et.props[optimizedAppearDataAttribute]}const isMotionValue=et=>!!(et&&et.getVelocity);function isWillChangeMotionValue(et){return!!(isMotionValue(et)&&et.add)}function addValueToWillChange(et,dt){const $t=et.getValue("willChange");if(isWillChangeMotionValue($t))return $t.add(dt)}function shouldBlockAnimation({protectedKeys:et,needsAnimating:dt},$t){const kt=et.hasOwnProperty($t)&&dt[$t]!==!0;return dt[$t]=!1,kt}function animateTarget(et,dt,{delay:$t=0,transitionOverride:kt,type:Tt}={}){var Dt;let{transition:Ft=et.getDefaultTransition(),transitionEnd:Ut,...Ht}=dt;kt&&(Ft=kt);const Kt=[],Yt=Tt&&et.animationState&&et.animationState.getState()[Tt];for(const Jt in Ht){const Zt=et.getValue(Jt,(Dt=et.latestValues[Jt])!==null&&Dt!==void 0?Dt:null),er=Ht[Jt];if(er===void 0||Yt&&shouldBlockAnimation(Yt,Jt))continue;const rr={delay:$t,...getValueTransition(Ft||{},Jt)};let sr=!1;if(window.MotionHandoffAnimation){const ir=getOptimisedAppearId(et);if(ir){const or=window.MotionHandoffAnimation(ir,Jt,frame);or!==null&&(rr.startTime=or,sr=!0)}}addValueToWillChange(et,Jt),Zt.start(animateMotionValue(Jt,Zt,er,et.shouldReduceMotion&&transformProps.has(Jt)?{type:!1}:rr,et,sr));const nr=Zt.animation;nr&&Kt.push(nr)}return Ut&&Promise.all(Kt).then(()=>{frame.update(()=>{Ut&&setTarget(et,Ut)})}),Kt}function animateVariant(et,dt,$t={}){var kt;const Tt=resolveVariant(et,dt,$t.type==="exit"?(kt=et.presenceContext)===null||kt===void 0?void 0:kt.custom:void 0);let{transition:Dt=et.getDefaultTransition()||{}}=Tt||{};$t.transitionOverride&&(Dt=$t.transitionOverride);const Ft=Tt?()=>Promise.all(animateTarget(et,Tt,$t)):()=>Promise.resolve(),Ut=et.variantChildren&&et.variantChildren.size?(Kt=0)=>{const{delayChildren:Yt=0,staggerChildren:Jt,staggerDirection:Zt}=Dt;return animateChildren(et,dt,Yt+Kt,Jt,Zt,$t)}:()=>Promise.resolve(),{when:Ht}=Dt;if(Ht){const[Kt,Yt]=Ht==="beforeChildren"?[Ft,Ut]:[Ut,Ft];return Kt().then(()=>Yt())}else return Promise.all([Ft(),Ut($t.delay)])}function animateChildren(et,dt,$t=0,kt=0,Tt=1,Dt){const Ft=[],Ut=(et.variantChildren.size-1)*kt,Ht=Tt===1?(Kt=0)=>Kt*kt:(Kt=0)=>Ut-Kt*kt;return Array.from(et.variantChildren).sort(sortByTreeOrder).forEach((Kt,Yt)=>{Kt.notify("AnimationStart",dt),Ft.push(animateVariant(Kt,dt,{...Dt,delay:$t+Ht(Yt)}).then(()=>Kt.notify("AnimationComplete",dt)))}),Promise.all(Ft)}function sortByTreeOrder(et,dt){return et.sortNodePosition(dt)}function animateVisualElement(et,dt,$t={}){et.notify("AnimationStart",dt);let kt;if(Array.isArray(dt)){const Tt=dt.map(Dt=>animateVariant(et,Dt,$t));kt=Promise.all(Tt)}else if(typeof dt=="string")kt=animateVariant(et,dt,$t);else{const Tt=typeof dt=="function"?resolveVariant(et,dt,$t.custom):dt;kt=Promise.all(animateTarget(et,Tt,$t))}return kt.then(()=>{et.notify("AnimationComplete",dt)})}const numVariantProps=variantProps.length;function getVariantContext(et){if(!et)return;if(!et.isControllingVariants){const $t=et.parent?getVariantContext(et.parent)||{}:{};return et.props.initial!==void 0&&($t.initial=et.props.initial),$t}const dt={};for(let $t=0;$t<numVariantProps;$t++){const kt=variantProps[$t],Tt=et.props[kt];(isVariantLabel(Tt)||Tt===!1)&&(dt[kt]=Tt)}return dt}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(et){return dt=>Promise.all(dt.map(({animation:$t,options:kt})=>animateVisualElement(et,$t,kt)))}function createAnimationState(et){let dt=animateList(et),$t=createState(),kt=!0;const Tt=Ht=>(Kt,Yt)=>{var Jt;const Zt=resolveVariant(et,Yt,Ht==="exit"?(Jt=et.presenceContext)===null||Jt===void 0?void 0:Jt.custom:void 0);if(Zt){const{transition:er,transitionEnd:rr,...sr}=Zt;Kt={...Kt,...sr,...rr}}return Kt};function Dt(Ht){dt=Ht(et)}function Ft(Ht){const{props:Kt}=et,Yt=getVariantContext(et.parent)||{},Jt=[],Zt=new Set;let er={},rr=1/0;for(let nr=0;nr<numAnimationTypes;nr++){const ir=reversePriorityOrder[nr],or=$t[ir],lr=Kt[ir]!==void 0?Kt[ir]:Yt[ir],cr=isVariantLabel(lr),dr=ir===Ht?or.isActive:null;dr===!1&&(rr=nr);let ur=lr===Yt[ir]&&lr!==Kt[ir]&&cr;if(ur&&kt&&et.manuallyAnimateOnMount&&(ur=!1),or.protectedKeys={...er},!or.isActive&&dr===null||!lr&&!or.prevProp||isAnimationControls(lr)||typeof lr=="boolean")continue;const pr=checkVariantsDidChange(or.prevProp,lr);let mr=pr||ir===Ht&&or.isActive&&!ur&&cr||nr>rr&&cr,jr=!1;const Rr=Array.isArray(lr)?lr:[lr];let xr=Rr.reduce(Tt(ir),{});dr===!1&&(xr={});const{prevResolvedValues:kr={}}=or,Mr={...kr,...xr},Tr=Pr=>{mr=!0,Zt.has(Pr)&&(jr=!0,Zt.delete(Pr)),or.needsAnimating[Pr]=!0;const br=et.getValue(Pr);br&&(br.liveStyle=!1)};for(const Pr in Mr){const br=xr[Pr],wr=kr[Pr];if(er.hasOwnProperty(Pr))continue;let zr=!1;isKeyframesTarget(br)&&isKeyframesTarget(wr)?zr=!shallowCompare(br,wr):zr=br!==wr,zr?br!=null?Tr(Pr):Zt.add(Pr):br!==void 0&&Zt.has(Pr)?Tr(Pr):or.protectedKeys[Pr]=!0}or.prevProp=lr,or.prevResolvedValues=xr,or.isActive&&(er={...er,...xr}),kt&&et.blockInitialAnimation&&(mr=!1),mr&&(!(ur&&pr)||jr)&&Jt.push(...Rr.map(Pr=>({animation:Pr,options:{type:ir}})))}if(Zt.size){const nr={};Zt.forEach(ir=>{const or=et.getBaseTarget(ir),lr=et.getValue(ir);lr&&(lr.liveStyle=!0),nr[ir]=or??null}),Jt.push({animation:nr})}let sr=!!Jt.length;return kt&&(Kt.initial===!1||Kt.initial===Kt.animate)&&!et.manuallyAnimateOnMount&&(sr=!1),kt=!1,sr?dt(Jt):Promise.resolve()}function Ut(Ht,Kt){var Yt;if($t[Ht].isActive===Kt)return Promise.resolve();(Yt=et.variantChildren)===null||Yt===void 0||Yt.forEach(Zt=>{var er;return(er=Zt.animationState)===null||er===void 0?void 0:er.setActive(Ht,Kt)}),$t[Ht].isActive=Kt;const Jt=Ft(Ht);for(const Zt in $t)$t[Zt].protectedKeys={};return Jt}return{animateChanges:Ft,setActive:Ut,setAnimateFunction:Dt,getState:()=>$t,reset:()=>{$t=createState(),kt=!0}}}function checkVariantsDidChange(et,dt){return typeof dt=="string"?dt!==et:Array.isArray(dt)?!shallowCompare(dt,et):!1}function createTypeState(et=!1){return{isActive:et,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}let Feature$1=class{constructor(dt){this.isMounted=!1,this.node=dt}update(){}};class AnimationFeature extends Feature$1{constructor(dt){super(dt),dt.animationState||(dt.animationState=createAnimationState(dt))}updateAnimationControlsSubscription(){const{animate:dt}=this.node.getProps();isAnimationControls(dt)&&(this.unmountControls=dt.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:dt}=this.node.getProps(),{animate:$t}=this.node.prevProps||{};dt!==$t&&this.updateAnimationControlsSubscription()}unmount(){var dt;this.node.animationState.reset(),(dt=this.unmountControls)===null||dt===void 0||dt.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature$1{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:dt,onExitComplete:$t}=this.node.presenceContext,{isPresent:kt}=this.node.prevPresenceContext||{};if(!this.node.animationState||dt===kt)return;const Tt=this.node.animationState.setActive("exit",!dt);$t&&!dt&&Tt.then(()=>$t(this.id))}mount(){const{register:dt}=this.node.presenceContext||{};dt&&(this.unmount=dt(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(et,dt,$t){var kt;if(et instanceof Element)return[et];if(typeof et=="string"){let Tt=document;dt&&(Tt=dt.current);const Dt=(kt=$t==null?void 0:$t[et])!==null&&kt!==void 0?kt:Tt.querySelectorAll(et);return Dt?Array.from(Dt):[]}return Array.from(et)}function setupGesture(et,dt){const $t=resolveElements(et),kt=new AbortController,Tt={passive:!0,...dt,signal:kt.signal};return[$t,Tt,()=>kt.abort()]}function filterEvents$1(et){return dt=>{dt.pointerType==="touch"||isDragActive()||et(dt)}}function hover(et,dt,$t={}){const[kt,Tt,Dt]=setupGesture(et,$t),Ft=filterEvents$1(Ut=>{const{target:Ht}=Ut,Kt=dt(Ut);if(!Kt||!Ht)return;const Yt=filterEvents$1(Jt=>{Kt(Jt),Ht.removeEventListener("pointerleave",Yt)});Ht.addEventListener("pointerleave",Yt,Tt)});return kt.forEach(Ut=>{Ut.addEventListener("pointerenter",Ft,Tt)}),Dt}const isPrimaryPointer=et=>et.pointerType==="mouse"?typeof et.button!="number"||et.button<=0:et.isPrimary!==!1,isPressing=new WeakSet;function filterEvents(et){return dt=>{dt.key==="Enter"&&et(dt)}}function firePointerEvent(et,dt){et.dispatchEvent(new PointerEvent("pointer"+dt,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(et,dt)=>{const $t=et.currentTarget;if(!$t)return;const kt=filterEvents(()=>{if(isPressing.has($t))return;firePointerEvent($t,"down");const Tt=filterEvents(()=>{firePointerEvent($t,"up")}),Dt=()=>firePointerEvent($t,"cancel");$t.addEventListener("keyup",Tt,dt),$t.addEventListener("blur",Dt,dt)});$t.addEventListener("keydown",kt,dt),$t.addEventListener("blur",()=>$t.removeEventListener("keydown",kt),dt)},focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(et){return focusableElements.has(et.tagName)||et.tabIndex!==-1}const isNodeOrChild=(et,dt)=>dt?et===dt?!0:isNodeOrChild(et,dt.parentElement):!1;function isValidPressEvent(et){return isPrimaryPointer(et)&&!isDragActive()}function press(et,dt,$t={}){const[kt,Tt,Dt]=setupGesture(et,$t),Ft=Ut=>{const Ht=Ut.currentTarget;if(!isValidPressEvent(Ut)||isPressing.has(Ht))return;isPressing.add(Ht);const Kt=dt(Ut),Yt=(er,rr)=>{window.removeEventListener("pointerup",Jt),window.removeEventListener("pointercancel",Zt),!(!isValidPressEvent(er)||!isPressing.has(Ht))&&(isPressing.delete(Ht),Kt&&Kt(er,{success:rr}))},Jt=er=>{Yt(er,$t.useGlobalTarget||isNodeOrChild(Ht,er.target))},Zt=er=>{Yt(er,!1)};window.addEventListener("pointerup",Jt,Tt),window.addEventListener("pointercancel",Zt,Tt)};return kt.forEach(Ut=>{isElementKeyboardAccessible(Ut)||(Ut.tabIndex=0),($t.useGlobalTarget?window:Ut).addEventListener("pointerdown",Ft,Tt),Ut.addEventListener("focus",Kt=>enableKeyboardPress(Kt,Tt),Tt)}),Dt}function setDragLock(et){return et==="x"||et==="y"?isDragging[et]?null:(isDragging[et]=!0,()=>{isDragging[et]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function extractEventInfo(et){return{point:{x:et.pageX,y:et.pageY}}}const addPointerInfo=et=>dt=>isPrimaryPointer(dt)&&et(dt,extractEventInfo(dt));function addDomEvent(et,dt,$t,kt={passive:!0}){return et.addEventListener(dt,$t,kt),()=>et.removeEventListener(dt,$t)}function addPointerEvent(et,dt,$t,kt){return addDomEvent(et,dt,addPointerInfo($t),kt)}const distance=(et,dt)=>Math.abs(et-dt);function distance2D(et,dt){const $t=distance(et.x,dt.x),kt=distance(et.y,dt.y);return Math.sqrt($t**2+kt**2)}class PanSession{constructor(dt,$t,{transformPagePoint:kt,contextWindow:Tt,dragSnapToOrigin:Dt=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Jt=getPanInfo(this.lastMoveEventInfo,this.history),Zt=this.startEvent!==null,er=distance2D(Jt.offset,{x:0,y:0})>=3;if(!Zt&&!er)return;const{point:rr}=Jt,{timestamp:sr}=frameData;this.history.push({...rr,timestamp:sr});const{onStart:nr,onMove:ir}=this.handlers;Zt||(nr&&nr(this.lastMoveEvent,Jt),this.startEvent=this.lastMoveEvent),ir&&ir(this.lastMoveEvent,Jt)},this.handlePointerMove=(Jt,Zt)=>{this.lastMoveEvent=Jt,this.lastMoveEventInfo=transformPoint(Zt,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Jt,Zt)=>{this.end();const{onEnd:er,onSessionEnd:rr,resumeAnimation:sr}=this.handlers;if(this.dragSnapToOrigin&&sr&&sr(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const nr=getPanInfo(Jt.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Zt,this.transformPagePoint),this.history);this.startEvent&&er&&er(Jt,nr),rr&&rr(Jt,nr)},!isPrimaryPointer(dt))return;this.dragSnapToOrigin=Dt,this.handlers=$t,this.transformPagePoint=kt,this.contextWindow=Tt||window;const Ft=extractEventInfo(dt),Ut=transformPoint(Ft,this.transformPagePoint),{point:Ht}=Ut,{timestamp:Kt}=frameData;this.history=[{...Ht,timestamp:Kt}];const{onSessionStart:Yt}=$t;Yt&&Yt(dt,getPanInfo(Ut,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(dt){this.handlers=dt}end(){this.removeListeners&&this.removeListeners(),cancelFrame$1(this.updatePoint)}}function transformPoint(et,dt){return dt?{point:dt(et.point)}:et}function subtractPoint(et,dt){return{x:et.x-dt.x,y:et.y-dt.y}}function getPanInfo({point:et},dt){return{point:et,delta:subtractPoint(et,lastDevicePoint(dt)),offset:subtractPoint(et,startDevicePoint(dt)),velocity:getVelocity(dt,.1)}}function startDevicePoint(et){return et[0]}function lastDevicePoint(et){return et[et.length-1]}function getVelocity(et,dt){if(et.length<2)return{x:0,y:0};let $t=et.length-1,kt=null;const Tt=lastDevicePoint(et);for(;$t>=0&&(kt=et[$t],!(Tt.timestamp-kt.timestamp>secondsToMilliseconds(dt)));)$t--;if(!kt)return{x:0,y:0};const Dt=millisecondsToSeconds(Tt.timestamp-kt.timestamp);if(Dt===0)return{x:0,y:0};const Ft={x:(Tt.x-kt.x)/Dt,y:(Tt.y-kt.y)/Dt};return Ft.x===1/0&&(Ft.x=0),Ft.y===1/0&&(Ft.y=0),Ft}function isRefObject(et){return et&&typeof et=="object"&&Object.prototype.hasOwnProperty.call(et,"current")}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(et){return et.max-et.min}function isNear$1(et,dt,$t){return Math.abs(et-dt)<=$t}function calcAxisDelta(et,dt,$t,kt=.5){et.origin=kt,et.originPoint=mixNumber$1(dt.min,dt.max,et.origin),et.scale=calcLength($t)/calcLength(dt),et.translate=mixNumber$1($t.min,$t.max,et.origin)-et.originPoint,(et.scale>=SCALE_MIN&&et.scale<=SCALE_MAX||isNaN(et.scale))&&(et.scale=1),(et.translate>=TRANSLATE_MIN&&et.translate<=TRANSLATE_MAX||isNaN(et.translate))&&(et.translate=0)}function calcBoxDelta(et,dt,$t,kt){calcAxisDelta(et.x,dt.x,$t.x,kt?kt.originX:void 0),calcAxisDelta(et.y,dt.y,$t.y,kt?kt.originY:void 0)}function calcRelativeAxis(et,dt,$t){et.min=$t.min+dt.min,et.max=et.min+calcLength(dt)}function calcRelativeBox(et,dt,$t){calcRelativeAxis(et.x,dt.x,$t.x),calcRelativeAxis(et.y,dt.y,$t.y)}function calcRelativeAxisPosition(et,dt,$t){et.min=dt.min-$t.min,et.max=et.min+calcLength(dt)}function calcRelativePosition(et,dt,$t){calcRelativeAxisPosition(et.x,dt.x,$t.x),calcRelativeAxisPosition(et.y,dt.y,$t.y)}function applyConstraints(et,{min:dt,max:$t},kt){return dt!==void 0&&et<dt?et=kt?mixNumber$1(dt,et,kt.min):Math.max(et,dt):$t!==void 0&&et>$t&&(et=kt?mixNumber$1($t,et,kt.max):Math.min(et,$t)),et}function calcRelativeAxisConstraints(et,dt,$t){return{min:dt!==void 0?et.min+dt:void 0,max:$t!==void 0?et.max+$t-(et.max-et.min):void 0}}function calcRelativeConstraints(et,{top:dt,left:$t,bottom:kt,right:Tt}){return{x:calcRelativeAxisConstraints(et.x,$t,Tt),y:calcRelativeAxisConstraints(et.y,dt,kt)}}function calcViewportAxisConstraints(et,dt){let $t=dt.min-et.min,kt=dt.max-et.max;return dt.max-dt.min<et.max-et.min&&([$t,kt]=[kt,$t]),{min:$t,max:kt}}function calcViewportConstraints(et,dt){return{x:calcViewportAxisConstraints(et.x,dt.x),y:calcViewportAxisConstraints(et.y,dt.y)}}function calcOrigin$1(et,dt){let $t=.5;const kt=calcLength(et),Tt=calcLength(dt);return Tt>kt?$t=progress(dt.min,dt.max-kt,et.min):kt>Tt&&($t=progress(et.min,et.max-Tt,dt.min)),clamp$6(0,1,$t)}function rebaseAxisConstraints(et,dt){const $t={};return dt.min!==void 0&&($t.min=dt.min-et.min),dt.max!==void 0&&($t.max=dt.max-et.min),$t}const defaultElastic=.35;function resolveDragElastic(et=defaultElastic){return et===!1?et=0:et===!0&&(et=defaultElastic),{x:resolveAxisElastic(et,"left","right"),y:resolveAxisElastic(et,"top","bottom")}}function resolveAxisElastic(et,dt,$t){return{min:resolvePointElastic(et,dt),max:resolvePointElastic(et,$t)}}function resolvePointElastic(et,dt){return typeof et=="number"?et:et[dt]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(et){return[et("x"),et("y")]}function convertBoundingBoxToBox({top:et,left:dt,right:$t,bottom:kt}){return{x:{min:dt,max:$t},y:{min:et,max:kt}}}function convertBoxToBoundingBox({x:et,y:dt}){return{top:dt.min,right:et.max,bottom:dt.max,left:et.min}}function transformBoxPoints(et,dt){if(!dt)return et;const $t=dt({x:et.left,y:et.top}),kt=dt({x:et.right,y:et.bottom});return{top:$t.y,left:$t.x,bottom:kt.y,right:kt.x}}function isIdentityScale(et){return et===void 0||et===1}function hasScale({scale:et,scaleX:dt,scaleY:$t}){return!isIdentityScale(et)||!isIdentityScale(dt)||!isIdentityScale($t)}function hasTransform(et){return hasScale(et)||has2DTranslate(et)||et.z||et.rotate||et.rotateX||et.rotateY||et.skewX||et.skewY}function has2DTranslate(et){return is2DTranslate(et.x)||is2DTranslate(et.y)}function is2DTranslate(et){return et&&et!=="0%"}function scalePoint(et,dt,$t){const kt=et-$t,Tt=dt*kt;return $t+Tt}function applyPointDelta(et,dt,$t,kt,Tt){return Tt!==void 0&&(et=scalePoint(et,Tt,kt)),scalePoint(et,$t,kt)+dt}function applyAxisDelta(et,dt=0,$t=1,kt,Tt){et.min=applyPointDelta(et.min,dt,$t,kt,Tt),et.max=applyPointDelta(et.max,dt,$t,kt,Tt)}function applyBoxDelta(et,{x:dt,y:$t}){applyAxisDelta(et.x,dt.translate,dt.scale,dt.originPoint),applyAxisDelta(et.y,$t.translate,$t.scale,$t.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(et,dt,$t,kt=!1){const Tt=$t.length;if(!Tt)return;dt.x=dt.y=1;let Dt,Ft;for(let Ut=0;Ut<Tt;Ut++){Dt=$t[Ut],Ft=Dt.projectionDelta;const{visualElement:Ht}=Dt.options;Ht&&Ht.props.style&&Ht.props.style.display==="contents"||(kt&&Dt.options.layoutScroll&&Dt.scroll&&Dt!==Dt.root&&transformBox(et,{x:-Dt.scroll.offset.x,y:-Dt.scroll.offset.y}),Ft&&(dt.x*=Ft.x.scale,dt.y*=Ft.y.scale,applyBoxDelta(et,Ft)),kt&&hasTransform(Dt.latestValues)&&transformBox(et,Dt.latestValues))}dt.x<TREE_SCALE_SNAP_MAX&&dt.x>TREE_SCALE_SNAP_MIN&&(dt.x=1),dt.y<TREE_SCALE_SNAP_MAX&&dt.y>TREE_SCALE_SNAP_MIN&&(dt.y=1)}function translateAxis(et,dt){et.min=et.min+dt,et.max=et.max+dt}function transformAxis(et,dt,$t,kt,Tt=.5){const Dt=mixNumber$1(et.min,et.max,Tt);applyAxisDelta(et,dt,$t,Dt,kt)}function transformBox(et,dt){transformAxis(et.x,dt.x,dt.scaleX,dt.scale,dt.originX),transformAxis(et.y,dt.y,dt.scaleY,dt.scale,dt.originY)}function measureViewportBox(et,dt){return convertBoundingBoxToBox(transformBoxPoints(et.getBoundingClientRect(),dt))}function measurePageBox(et,dt,$t){const kt=measureViewportBox(et,$t),{scroll:Tt}=dt;return Tt&&(translateAxis(kt.x,Tt.offset.x),translateAxis(kt.y,Tt.offset.y)),kt}const getContextWindow=({current:et})=>et?et.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(dt){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=dt}start(dt,{snapToCursor:$t=!1}={}){const{presenceContext:kt}=this.visualElement;if(kt&&kt.isPresent===!1)return;const Tt=Yt=>{const{dragSnapToOrigin:Jt}=this.getProps();Jt?this.pauseAnimation():this.stopAnimation(),$t&&this.snapToCursor(extractEventInfo(Yt).point)},Dt=(Yt,Jt)=>{const{drag:Zt,dragPropagation:er,onDragStart:rr}=this.getProps();if(Zt&&!er&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(Zt),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(nr=>{let ir=this.getAxisMotionValue(nr).get()||0;if(percent.test(ir)){const{projection:or}=this.visualElement;if(or&&or.layout){const lr=or.layout.layoutBox[nr];lr&&(ir=calcLength(lr)*(parseFloat(ir)/100))}}this.originPoint[nr]=ir}),rr&&frame.postRender(()=>rr(Yt,Jt)),addValueToWillChange(this.visualElement,"transform");const{animationState:sr}=this.visualElement;sr&&sr.setActive("whileDrag",!0)},Ft=(Yt,Jt)=>{const{dragPropagation:Zt,dragDirectionLock:er,onDirectionLock:rr,onDrag:sr}=this.getProps();if(!Zt&&!this.openDragLock)return;const{offset:nr}=Jt;if(er&&this.currentDirection===null){this.currentDirection=getCurrentDirection(nr),this.currentDirection!==null&&rr&&rr(this.currentDirection);return}this.updateAxis("x",Jt.point,nr),this.updateAxis("y",Jt.point,nr),this.visualElement.render(),sr&&sr(Yt,Jt)},Ut=(Yt,Jt)=>this.stop(Yt,Jt),Ht=()=>eachAxis(Yt=>{var Jt;return this.getAnimationState(Yt)==="paused"&&((Jt=this.getAxisMotionValue(Yt).animation)===null||Jt===void 0?void 0:Jt.play())}),{dragSnapToOrigin:Kt}=this.getProps();this.panSession=new PanSession(dt,{onSessionStart:Tt,onStart:Dt,onMove:Ft,onSessionEnd:Ut,resumeAnimation:Ht},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:Kt,contextWindow:getContextWindow(this.visualElement)})}stop(dt,$t){const kt=this.isDragging;if(this.cancel(),!kt)return;const{velocity:Tt}=$t;this.startAnimation(Tt);const{onDragEnd:Dt}=this.getProps();Dt&&frame.postRender(()=>Dt(dt,$t))}cancel(){this.isDragging=!1;const{projection:dt,animationState:$t}=this.visualElement;dt&&(dt.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:kt}=this.getProps();!kt&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),$t&&$t.setActive("whileDrag",!1)}updateAxis(dt,$t,kt){const{drag:Tt}=this.getProps();if(!kt||!shouldDrag(dt,Tt,this.currentDirection))return;const Dt=this.getAxisMotionValue(dt);let Ft=this.originPoint[dt]+kt[dt];this.constraints&&this.constraints[dt]&&(Ft=applyConstraints(Ft,this.constraints[dt],this.elastic[dt])),Dt.set(Ft)}resolveConstraints(){var dt;const{dragConstraints:$t,dragElastic:kt}=this.getProps(),Tt=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(dt=this.visualElement.projection)===null||dt===void 0?void 0:dt.layout,Dt=this.constraints;$t&&isRefObject($t)?this.constraints||(this.constraints=this.resolveRefConstraints()):$t&&Tt?this.constraints=calcRelativeConstraints(Tt.layoutBox,$t):this.constraints=!1,this.elastic=resolveDragElastic(kt),Dt!==this.constraints&&Tt&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(Ft=>{this.constraints!==!1&&this.getAxisMotionValue(Ft)&&(this.constraints[Ft]=rebaseAxisConstraints(Tt.layoutBox[Ft],this.constraints[Ft]))})}resolveRefConstraints(){const{dragConstraints:dt,onMeasureDragConstraints:$t}=this.getProps();if(!dt||!isRefObject(dt))return!1;const kt=dt.current,{projection:Tt}=this.visualElement;if(!Tt||!Tt.layout)return!1;const Dt=measurePageBox(kt,Tt.root,this.visualElement.getTransformPagePoint());let Ft=calcViewportConstraints(Tt.layout.layoutBox,Dt);if($t){const Ut=$t(convertBoxToBoundingBox(Ft));this.hasMutatedConstraints=!!Ut,Ut&&(Ft=convertBoundingBoxToBox(Ut))}return Ft}startAnimation(dt){const{drag:$t,dragMomentum:kt,dragElastic:Tt,dragTransition:Dt,dragSnapToOrigin:Ft,onDragTransitionEnd:Ut}=this.getProps(),Ht=this.constraints||{},Kt=eachAxis(Yt=>{if(!shouldDrag(Yt,$t,this.currentDirection))return;let Jt=Ht&&Ht[Yt]||{};Ft&&(Jt={min:0,max:0});const Zt=Tt?200:1e6,er=Tt?40:1e7,rr={type:"inertia",velocity:kt?dt[Yt]:0,bounceStiffness:Zt,bounceDamping:er,timeConstant:750,restDelta:1,restSpeed:10,...Dt,...Jt};return this.startAxisValueAnimation(Yt,rr)});return Promise.all(Kt).then(Ut)}startAxisValueAnimation(dt,$t){const kt=this.getAxisMotionValue(dt);return addValueToWillChange(this.visualElement,dt),kt.start(animateMotionValue(dt,kt,0,$t,this.visualElement,!1))}stopAnimation(){eachAxis(dt=>this.getAxisMotionValue(dt).stop())}pauseAnimation(){eachAxis(dt=>{var $t;return($t=this.getAxisMotionValue(dt).animation)===null||$t===void 0?void 0:$t.pause()})}getAnimationState(dt){var $t;return($t=this.getAxisMotionValue(dt).animation)===null||$t===void 0?void 0:$t.state}getAxisMotionValue(dt){const $t=`_drag${dt.toUpperCase()}`,kt=this.visualElement.getProps(),Tt=kt[$t];return Tt||this.visualElement.getValue(dt,(kt.initial?kt.initial[dt]:void 0)||0)}snapToCursor(dt){eachAxis($t=>{const{drag:kt}=this.getProps();if(!shouldDrag($t,kt,this.currentDirection))return;const{projection:Tt}=this.visualElement,Dt=this.getAxisMotionValue($t);if(Tt&&Tt.layout){const{min:Ft,max:Ut}=Tt.layout.layoutBox[$t];Dt.set(dt[$t]-mixNumber$1(Ft,Ut,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:dt,dragConstraints:$t}=this.getProps(),{projection:kt}=this.visualElement;if(!isRefObject($t)||!kt||!this.constraints)return;this.stopAnimation();const Tt={x:0,y:0};eachAxis(Ft=>{const Ut=this.getAxisMotionValue(Ft);if(Ut&&this.constraints!==!1){const Ht=Ut.get();Tt[Ft]=calcOrigin$1({min:Ht,max:Ht},this.constraints[Ft])}});const{transformTemplate:Dt}=this.visualElement.getProps();this.visualElement.current.style.transform=Dt?Dt({},""):"none",kt.root&&kt.root.updateScroll(),kt.updateLayout(),this.resolveConstraints(),eachAxis(Ft=>{if(!shouldDrag(Ft,dt,null))return;const Ut=this.getAxisMotionValue(Ft),{min:Ht,max:Kt}=this.constraints[Ft];Ut.set(mixNumber$1(Ht,Kt,Tt[Ft]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const dt=this.visualElement.current,$t=addPointerEvent(dt,"pointerdown",Ht=>{const{drag:Kt,dragListener:Yt=!0}=this.getProps();Kt&&Yt&&this.start(Ht)}),kt=()=>{const{dragConstraints:Ht}=this.getProps();isRefObject(Ht)&&Ht.current&&(this.constraints=this.resolveRefConstraints())},{projection:Tt}=this.visualElement,Dt=Tt.addEventListener("measure",kt);Tt&&!Tt.layout&&(Tt.root&&Tt.root.updateScroll(),Tt.updateLayout()),frame.read(kt);const Ft=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),Ut=Tt.addEventListener("didUpdate",({delta:Ht,hasLayoutChanged:Kt})=>{this.isDragging&&Kt&&(eachAxis(Yt=>{const Jt=this.getAxisMotionValue(Yt);Jt&&(this.originPoint[Yt]+=Ht[Yt].translate,Jt.set(Jt.get()+Ht[Yt].translate))}),this.visualElement.render())});return()=>{Ft(),$t(),Dt(),Ut&&Ut()}}getProps(){const dt=this.visualElement.getProps(),{drag:$t=!1,dragDirectionLock:kt=!1,dragPropagation:Tt=!1,dragConstraints:Dt=!1,dragElastic:Ft=defaultElastic,dragMomentum:Ut=!0}=dt;return{...dt,drag:$t,dragDirectionLock:kt,dragPropagation:Tt,dragConstraints:Dt,dragElastic:Ft,dragMomentum:Ut}}}function shouldDrag(et,dt,$t){return(dt===!0||dt===et)&&($t===null||$t===et)}function getCurrentDirection(et,dt=10){let $t=null;return Math.abs(et.y)>dt?$t="y":Math.abs(et.x)>dt&&($t="x"),$t}class DragGesture extends Feature$1{constructor(dt){super(dt),this.removeGroupControls=noop$c,this.removeListeners=noop$c,this.controls=new VisualElementDragControls(dt)}mount(){const{dragControls:dt}=this.node.getProps();dt&&(this.removeGroupControls=dt.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$c}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=et=>(dt,$t)=>{et&&frame.postRender(()=>et(dt,$t))};class PanGesture extends Feature$1{constructor(){super(...arguments),this.removePointerDownListener=noop$c}onPointerDown(dt){this.session=new PanSession(dt,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:dt,onPanStart:$t,onPan:kt,onPanEnd:Tt}=this.node.getProps();return{onSessionStart:asyncHandler(dt),onStart:asyncHandler($t),onMove:kt,onEnd:(Dt,Ft)=>{delete this.session,Tt&&frame.postRender(()=>Tt(Dt,Ft))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",dt=>this.onPointerDown(dt))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const PresenceContext=reactExports.createContext(null);function usePresence(){const et=reactExports.useContext(PresenceContext);if(et===null)return[!0,null];const{isPresent:dt,onExitComplete:$t,register:kt}=et,Tt=reactExports.useId();reactExports.useEffect(()=>kt(Tt),[]);const Dt=reactExports.useCallback(()=>$t&&$t(Tt),[Tt,$t]);return!dt&&$t?[!1,Dt]:[!0]}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(et,dt){return dt.max===dt.min?0:et/(dt.max-dt.min)*100}const correctBorderRadius={correct:(et,dt)=>{if(!dt.target)return et;if(typeof et=="string")if(px.test(et))et=parseFloat(et);else return et;const $t=pixelsToPercent(et,dt.target.x),kt=pixelsToPercent(et,dt.target.y);return`${$t}% ${kt}%`}},correctBoxShadow={correct:(et,{treeScale:dt,projectionDelta:$t})=>{const kt=et,Tt=complex.parse(et);if(Tt.length>5)return kt;const Dt=complex.createTransformer(et),Ft=typeof Tt[0]!="number"?1:0,Ut=$t.x.scale*dt.x,Ht=$t.y.scale*dt.y;Tt[0+Ft]/=Ut,Tt[1+Ft]/=Ht;const Kt=mixNumber$1(Ut,Ht,.5);return typeof Tt[2+Ft]=="number"&&(Tt[2+Ft]/=Kt),typeof Tt[3+Ft]=="number"&&(Tt[3+Ft]/=Kt),Dt(Tt)}},scaleCorrectors={};function addScaleCorrector(et){Object.assign(scaleCorrectors,et)}const{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1);class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:dt,layoutGroup:$t,switchLayoutGroup:kt,layoutId:Tt}=this.props,{projection:Dt}=dt;addScaleCorrector(defaultScaleCorrectors),Dt&&($t.group&&$t.group.add(Dt),kt&&kt.register&&Tt&&kt.register(Dt),Dt.root.didUpdate(),Dt.addEventListener("animationComplete",()=>{this.safeToRemove()}),Dt.setOptions({...Dt.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(dt){const{layoutDependency:$t,visualElement:kt,drag:Tt,isPresent:Dt}=this.props,Ft=kt.projection;return Ft&&(Ft.isPresent=Dt,Tt||dt.layoutDependency!==$t||$t===void 0?Ft.willUpdate():this.safeToRemove(),dt.isPresent!==Dt&&(Dt?Ft.promote():Ft.relegate()||frame.postRender(()=>{const Ut=Ft.getStack();(!Ut||!Ut.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:dt}=this.props.visualElement;dt&&(dt.root.didUpdate(),microtask.postRender(()=>{!dt.currentAnimation&&dt.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:dt,layoutGroup:$t,switchLayoutGroup:kt}=this.props,{projection:Tt}=dt;Tt&&(Tt.scheduleCheckAfterUnmount(),$t&&$t.group&&$t.group.remove(Tt),kt&&kt.deregister&&kt.deregister(Tt))}safeToRemove(){const{safeToRemove:dt}=this.props;dt&&dt()}render(){return null}}function MeasureLayout(et){const[dt,$t]=usePresence(),kt=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...et,layoutGroup:kt,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:dt,safeToRemove:$t})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=et=>typeof et=="string"?parseFloat(et):et,isPx=et=>typeof et=="number"||px.test(et);function mixValues(et,dt,$t,kt,Tt,Dt){Tt?(et.opacity=mixNumber$1(0,$t.opacity!==void 0?$t.opacity:1,easeCrossfadeIn(kt)),et.opacityExit=mixNumber$1(dt.opacity!==void 0?dt.opacity:1,0,easeCrossfadeOut(kt))):Dt&&(et.opacity=mixNumber$1(dt.opacity!==void 0?dt.opacity:1,$t.opacity!==void 0?$t.opacity:1,kt));for(let Ft=0;Ft<numBorders;Ft++){const Ut=`border${borders[Ft]}Radius`;let Ht=getRadius(dt,Ut),Kt=getRadius($t,Ut);if(Ht===void 0&&Kt===void 0)continue;Ht||(Ht=0),Kt||(Kt=0),Ht===0||Kt===0||isPx(Ht)===isPx(Kt)?(et[Ut]=Math.max(mixNumber$1(asNumber(Ht),asNumber(Kt),kt),0),(percent.test(Kt)||percent.test(Ht))&&(et[Ut]+="%")):et[Ut]=Kt}(dt.rotate||$t.rotate)&&(et.rotate=mixNumber$1(dt.rotate||0,$t.rotate||0,kt))}function getRadius(et,dt){return et[dt]!==void 0?et[dt]:et.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$c);function compress(et,dt,$t){return kt=>kt<et?0:kt>dt?1:$t(progress(et,dt,kt))}function copyAxisInto(et,dt){et.min=dt.min,et.max=dt.max}function copyBoxInto(et,dt){copyAxisInto(et.x,dt.x),copyAxisInto(et.y,dt.y)}function copyAxisDeltaInto(et,dt){et.translate=dt.translate,et.scale=dt.scale,et.originPoint=dt.originPoint,et.origin=dt.origin}function removePointDelta(et,dt,$t,kt,Tt){return et-=dt,et=scalePoint(et,1/$t,kt),Tt!==void 0&&(et=scalePoint(et,1/Tt,kt)),et}function removeAxisDelta(et,dt=0,$t=1,kt=.5,Tt,Dt=et,Ft=et){if(percent.test(dt)&&(dt=parseFloat(dt),dt=mixNumber$1(Ft.min,Ft.max,dt/100)-Ft.min),typeof dt!="number")return;let Ut=mixNumber$1(Dt.min,Dt.max,kt);et===Dt&&(Ut-=dt),et.min=removePointDelta(et.min,dt,$t,Ut,Tt),et.max=removePointDelta(et.max,dt,$t,Ut,Tt)}function removeAxisTransforms(et,dt,[$t,kt,Tt],Dt,Ft){removeAxisDelta(et,dt[$t],dt[kt],dt[Tt],dt.scale,Dt,Ft)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(et,dt,$t,kt){removeAxisTransforms(et.x,dt,xKeys,$t?$t.x:void 0,kt?kt.x:void 0),removeAxisTransforms(et.y,dt,yKeys,$t?$t.y:void 0,kt?kt.y:void 0)}function isAxisDeltaZero(et){return et.translate===0&&et.scale===1}function isDeltaZero(et){return isAxisDeltaZero(et.x)&&isAxisDeltaZero(et.y)}function axisEquals(et,dt){return et.min===dt.min&&et.max===dt.max}function boxEquals(et,dt){return axisEquals(et.x,dt.x)&&axisEquals(et.y,dt.y)}function axisEqualsRounded(et,dt){return Math.round(et.min)===Math.round(dt.min)&&Math.round(et.max)===Math.round(dt.max)}function boxEqualsRounded(et,dt){return axisEqualsRounded(et.x,dt.x)&&axisEqualsRounded(et.y,dt.y)}function aspectRatio(et){return calcLength(et.x)/calcLength(et.y)}function axisDeltaEquals(et,dt){return et.translate===dt.translate&&et.scale===dt.scale&&et.originPoint===dt.originPoint}class NodeStack{constructor(){this.members=[]}add(dt){addUniqueItem(this.members,dt),dt.scheduleRender()}remove(dt){if(removeItem(this.members,dt),dt===this.prevLead&&(this.prevLead=void 0),dt===this.lead){const $t=this.members[this.members.length-1];$t&&this.promote($t)}}relegate(dt){const $t=this.members.findIndex(Tt=>dt===Tt);if($t===0)return!1;let kt;for(let Tt=$t;Tt>=0;Tt--){const Dt=this.members[Tt];if(Dt.isPresent!==!1){kt=Dt;break}}return kt?(this.promote(kt),!0):!1}promote(dt,$t){const kt=this.lead;if(dt!==kt&&(this.prevLead=kt,this.lead=dt,dt.show(),kt)){kt.instance&&kt.scheduleRender(),dt.scheduleRender(),dt.resumeFrom=kt,$t&&(dt.resumeFrom.preserveOpacity=!0),kt.snapshot&&(dt.snapshot=kt.snapshot,dt.snapshot.latestValues=kt.animationValues||kt.latestValues),dt.root&&dt.root.isUpdating&&(dt.isLayoutDirty=!0);const{crossfade:Tt}=dt.options;Tt===!1&&kt.hide()}}exitAnimationComplete(){this.members.forEach(dt=>{const{options:$t,resumingFrom:kt}=dt;$t.onExitComplete&&$t.onExitComplete(),kt&&kt.options.onExitComplete&&kt.options.onExitComplete()})}scheduleRender(){this.members.forEach(dt=>{dt.instance&&dt.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(et,dt,$t){let kt="";const Tt=et.x.translate/dt.x,Dt=et.y.translate/dt.y,Ft=($t==null?void 0:$t.z)||0;if((Tt||Dt||Ft)&&(kt=`translate3d(${Tt}px, ${Dt}px, ${Ft}px) `),(dt.x!==1||dt.y!==1)&&(kt+=`scale(${1/dt.x}, ${1/dt.y}) `),$t){const{transformPerspective:Kt,rotate:Yt,rotateX:Jt,rotateY:Zt,skewX:er,skewY:rr}=$t;Kt&&(kt=`perspective(${Kt}px) ${kt}`),Yt&&(kt+=`rotate(${Yt}deg) `),Jt&&(kt+=`rotateX(${Jt}deg) `),Zt&&(kt+=`rotateY(${Zt}deg) `),er&&(kt+=`skewX(${er}deg) `),rr&&(kt+=`skewY(${rr}deg) `)}const Ut=et.x.scale*dt.x,Ht=et.y.scale*dt.y;return(Ut!==1||Ht!==1)&&(kt+=`scale(${Ut}, ${Ht})`),kt||"none"}const compareByDepth=(et,dt)=>et.depth-dt.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(dt){addUniqueItem(this.children,dt),this.isDirty=!0}remove(dt){removeItem(this.children,dt),this.isDirty=!0}forEach(dt){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(dt)}}function resolveMotionValue(et){const dt=isMotionValue(et)?et.get():et;return isCustomValue(dt)?dt.toValue():dt}function delay(et,dt){const $t=time$1.now(),kt=({timestamp:Tt})=>{const Dt=Tt-$t;Dt>=dt&&(cancelFrame$1(kt),et(Dt-dt))};return frame.read(kt,!0),()=>cancelFrame$1(kt)}function isSVGElement$1(et){return et instanceof SVGElement&&et.tagName!=="svg"}function animateSingleValue(et,dt,$t){const kt=isMotionValue(et)?et:motionValue(et);return kt.start(animateMotionValue("",kt,dt,$t)),kt.animation}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(et,dt,$t,kt){const{latestValues:Tt}=dt;Tt[et]&&($t[et]=Tt[et],dt.setStaticValue(et,0),kt&&(kt[et]=0))}function cancelTreeOptimisedTransformAnimations(et){if(et.hasCheckedOptimisedAppear=!0,et.root===et)return;const{visualElement:dt}=et.options;if(!dt)return;const $t=getOptimisedAppearId(dt);if(window.MotionHasOptimisedAnimation($t,"transform")){const{layout:Tt,layoutId:Dt}=et.options;window.MotionCancelOptimisedAnimation($t,"transform",frame,!(Tt||Dt))}const{parent:kt}=et;kt&&!kt.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(kt)}function createProjectionNode$1({attachResizeListener:et,defaultParent:dt,measureScroll:$t,checkIsScrollRoot:kt,resetTransform:Tt}){return class{constructor(Ft={},Ut=dt==null?void 0:dt()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=Ft,this.root=Ut?Ut.root||Ut:this,this.path=Ut?[...Ut.path,Ut]:[],this.parent=Ut,this.depth=Ut?Ut.depth+1:0;for(let Ht=0;Ht<this.path.length;Ht++)this.path[Ht].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(Ft,Ut){return this.eventHandlers.has(Ft)||this.eventHandlers.set(Ft,new SubscriptionManager),this.eventHandlers.get(Ft).add(Ut)}notifyListeners(Ft,...Ut){const Ht=this.eventHandlers.get(Ft);Ht&&Ht.notify(...Ut)}hasListeners(Ft){return this.eventHandlers.has(Ft)}mount(Ft,Ut=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement$1(Ft),this.instance=Ft;const{layoutId:Ht,layout:Kt,visualElement:Yt}=this.options;if(Yt&&!Yt.current&&Yt.mount(Ft),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),Ut&&(Kt||Ht)&&(this.isLayoutDirty=!0),et){let Jt;const Zt=()=>this.root.updateBlockedByResize=!1;et(Ft,()=>{this.root.updateBlockedByResize=!0,Jt&&Jt(),Jt=delay(Zt,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}Ht&&this.root.registerSharedNode(Ht,this),this.options.animate!==!1&&Yt&&(Ht||Kt)&&this.addEventListener("didUpdate",({delta:Jt,hasLayoutChanged:Zt,hasRelativeTargetChanged:er,layout:rr})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const sr=this.options.transition||Yt.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:nr,onLayoutAnimationComplete:ir}=Yt.getProps(),or=!this.targetLayout||!boxEqualsRounded(this.targetLayout,rr)||er,lr=!Zt&&er;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||lr||Zt&&(or||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(Jt,lr);const cr={...getValueTransition(sr,"layout"),onPlay:nr,onComplete:ir};(Yt.shouldReduceMotion||this.options.layoutRoot)&&(cr.delay=0,cr.type=!1),this.startAnimation(cr)}else Zt||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=rr})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const Ft=this.getStack();Ft&&Ft.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame$1(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:Ft}=this.options;return Ft&&Ft.getProps().transformTemplate}willUpdate(Ft=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let Yt=0;Yt<this.path.length;Yt++){const Jt=this.path[Yt];Jt.shouldResetTransform=!0,Jt.updateScroll("snapshot"),Jt.options.layoutRoot&&Jt.willUpdate(!1)}const{layoutId:Ut,layout:Ht}=this.options;if(Ut===void 0&&!Ht)return;const Kt=this.getTransformTemplate();this.prevTransformTemplateValue=Kt?Kt(this.latestValues,""):void 0,this.updateSnapshot(),Ft&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const Ut=time$1.now();frameData.delta=clamp$6(0,1e3/60,Ut-frameData.timestamp),frameData.timestamp=Ut,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let Ht=0;Ht<this.path.length;Ht++)this.path[Ht].updateScroll();const Ft=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:Ut}=this.options;Ut&&Ut.notify("LayoutMeasure",this.layout.layoutBox,Ft?Ft.layoutBox:void 0)}updateScroll(Ft="measure"){let Ut=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===Ft&&(Ut=!1),Ut){const Ht=kt(this.instance);this.scroll={animationId:this.root.animationId,phase:Ft,isRoot:Ht,offset:$t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:Ht}}}resetTransform(){if(!Tt)return;const Ft=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,Ut=this.projectionDelta&&!isDeltaZero(this.projectionDelta),Ht=this.getTransformTemplate(),Kt=Ht?Ht(this.latestValues,""):void 0,Yt=Kt!==this.prevTransformTemplateValue;Ft&&(Ut||hasTransform(this.latestValues)||Yt)&&(Tt(this.instance,Kt),this.shouldResetTransform=!1,this.scheduleRender())}measure(Ft=!0){const Ut=this.measurePageBox();let Ht=this.removeElementScroll(Ut);return Ft&&(Ht=this.removeTransform(Ht)),roundBox(Ht),{animationId:this.root.animationId,measuredBox:Ut,layoutBox:Ht,latestValues:{},source:this.id}}measurePageBox(){var Ft;const{visualElement:Ut}=this.options;if(!Ut)return createBox();const Ht=Ut.measureViewportBox();if(!(((Ft=this.scroll)===null||Ft===void 0?void 0:Ft.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:Yt}=this.root;Yt&&(translateAxis(Ht.x,Yt.offset.x),translateAxis(Ht.y,Yt.offset.y))}return Ht}removeElementScroll(Ft){var Ut;const Ht=createBox();if(copyBoxInto(Ht,Ft),!((Ut=this.scroll)===null||Ut===void 0)&&Ut.wasRoot)return Ht;for(let Kt=0;Kt<this.path.length;Kt++){const Yt=this.path[Kt],{scroll:Jt,options:Zt}=Yt;Yt!==this.root&&Jt&&Zt.layoutScroll&&(Jt.wasRoot&&copyBoxInto(Ht,Ft),translateAxis(Ht.x,Jt.offset.x),translateAxis(Ht.y,Jt.offset.y))}return Ht}applyTransform(Ft,Ut=!1){const Ht=createBox();copyBoxInto(Ht,Ft);for(let Kt=0;Kt<this.path.length;Kt++){const Yt=this.path[Kt];!Ut&&Yt.options.layoutScroll&&Yt.scroll&&Yt!==Yt.root&&transformBox(Ht,{x:-Yt.scroll.offset.x,y:-Yt.scroll.offset.y}),hasTransform(Yt.latestValues)&&transformBox(Ht,Yt.latestValues)}return hasTransform(this.latestValues)&&transformBox(Ht,this.latestValues),Ht}removeTransform(Ft){const Ut=createBox();copyBoxInto(Ut,Ft);for(let Ht=0;Ht<this.path.length;Ht++){const Kt=this.path[Ht];if(!Kt.instance||!hasTransform(Kt.latestValues))continue;hasScale(Kt.latestValues)&&Kt.updateSnapshot();const Yt=createBox(),Jt=Kt.measurePageBox();copyBoxInto(Yt,Jt),removeBoxTransforms(Ut,Kt.latestValues,Kt.snapshot?Kt.snapshot.layoutBox:void 0,Yt)}return hasTransform(this.latestValues)&&removeBoxTransforms(Ut,this.latestValues),Ut}setTargetDelta(Ft){this.targetDelta=Ft,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(Ft){this.options={...this.options,...Ft,crossfade:Ft.crossfade!==void 0?Ft.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(Ft=!1){var Ut;const Ht=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=Ht.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=Ht.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=Ht.isSharedProjectionDirty);const Kt=!!this.resumingFrom||this!==Ht;if(!(Ft||Kt&&this.isSharedProjectionDirty||this.isProjectionDirty||!((Ut=this.parent)===null||Ut===void 0)&&Ut.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:Jt,layoutId:Zt}=this.options;if(!(!this.layout||!(Jt||Zt))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const er=this.getClosestProjectingParent();er&&er.layout&&this.animationProgress!==1?(this.relativeParent=er,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,er.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const er=this.getClosestProjectingParent();er&&!!er.resumingFrom==!!this.resumingFrom&&!er.options.layoutScroll&&er.target&&this.animationProgress!==1?(this.relativeParent=er,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,er.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var Ft;const Ut=this.getLead(),Ht=!!this.resumingFrom||this!==Ut;let Kt=!0;if((this.isProjectionDirty||!((Ft=this.parent)===null||Ft===void 0)&&Ft.isProjectionDirty)&&(Kt=!1),Ht&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(Kt=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(Kt=!1),Kt)return;const{layout:Yt,layoutId:Jt}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Yt||Jt))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Zt=this.treeScale.x,er=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,Ht),Ut.layout&&!Ut.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(Ut.target=Ut.layout.layoutBox,Ut.targetWithTransforms=createBox());const{target:rr}=Ut;if(!rr){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,rr,this.latestValues),(this.treeScale.x!==Zt||this.treeScale.y!==er||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",rr)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(Ft=!0){var Ut;if((Ut=this.options.visualElement)===null||Ut===void 0||Ut.scheduleRender(),Ft){const Ht=this.getStack();Ht&&Ht.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(Ft,Ut=!1){const Ht=this.snapshot,Kt=Ht?Ht.latestValues:{},Yt={...this.latestValues},Jt=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!Ut;const Zt=createBox(),er=Ht?Ht.source:void 0,rr=this.layout?this.layout.source:void 0,sr=er!==rr,nr=this.getStack(),ir=!nr||nr.members.length<=1,or=!!(sr&&!ir&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let lr;this.mixTargetDelta=cr=>{const dr=cr/1e3;mixAxisDelta(Jt.x,Ft.x,dr),mixAxisDelta(Jt.y,Ft.y,dr),this.setTargetDelta(Jt),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(Zt,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,Zt,dr),lr&&boxEquals(this.relativeTarget,lr)&&(this.isProjectionDirty=!1),lr||(lr=createBox()),copyBoxInto(lr,this.relativeTarget)),sr&&(this.animationValues=Yt,mixValues(Yt,Kt,this.latestValues,dr,or,ir)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=dr},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(Ft){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame$1(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...Ft,onUpdate:Ut=>{this.mixTargetDelta(Ut),Ft.onUpdate&&Ft.onUpdate(Ut)},onComplete:()=>{Ft.onComplete&&Ft.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const Ft=this.getStack();Ft&&Ft.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const Ft=this.getLead();let{targetWithTransforms:Ut,target:Ht,layout:Kt,latestValues:Yt}=Ft;if(!(!Ut||!Ht||!Kt)){if(this!==Ft&&this.layout&&Kt&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,Kt.layoutBox)){Ht=this.target||createBox();const Jt=calcLength(this.layout.layoutBox.x);Ht.x.min=Ft.target.x.min,Ht.x.max=Ht.x.min+Jt;const Zt=calcLength(this.layout.layoutBox.y);Ht.y.min=Ft.target.y.min,Ht.y.max=Ht.y.min+Zt}copyBoxInto(Ut,Ht),transformBox(Ut,Yt),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,Ut,Yt)}}registerSharedNode(Ft,Ut){this.sharedNodes.has(Ft)||this.sharedNodes.set(Ft,new NodeStack),this.sharedNodes.get(Ft).add(Ut);const Kt=Ut.options.initialPromotionConfig;Ut.promote({transition:Kt?Kt.transition:void 0,preserveFollowOpacity:Kt&&Kt.shouldPreserveFollowOpacity?Kt.shouldPreserveFollowOpacity(Ut):void 0})}isLead(){const Ft=this.getStack();return Ft?Ft.lead===this:!0}getLead(){var Ft;const{layoutId:Ut}=this.options;return Ut?((Ft=this.getStack())===null||Ft===void 0?void 0:Ft.lead)||this:this}getPrevLead(){var Ft;const{layoutId:Ut}=this.options;return Ut?(Ft=this.getStack())===null||Ft===void 0?void 0:Ft.prevLead:void 0}getStack(){const{layoutId:Ft}=this.options;if(Ft)return this.root.sharedNodes.get(Ft)}promote({needsReset:Ft,transition:Ut,preserveFollowOpacity:Ht}={}){const Kt=this.getStack();Kt&&Kt.promote(this,Ht),Ft&&(this.projectionDelta=void 0,this.needsReset=!0),Ut&&this.setOptions({transition:Ut})}relegate(){const Ft=this.getStack();return Ft?Ft.relegate(this):!1}resetSkewAndRotation(){const{visualElement:Ft}=this.options;if(!Ft)return;let Ut=!1;const{latestValues:Ht}=Ft;if((Ht.z||Ht.rotate||Ht.rotateX||Ht.rotateY||Ht.rotateZ||Ht.skewX||Ht.skewY)&&(Ut=!0),!Ut)return;const Kt={};Ht.z&&resetDistortingTransform("z",Ft,Kt,this.animationValues);for(let Yt=0;Yt<transformAxes.length;Yt++)resetDistortingTransform(`rotate${transformAxes[Yt]}`,Ft,Kt,this.animationValues),resetDistortingTransform(`skew${transformAxes[Yt]}`,Ft,Kt,this.animationValues);Ft.render();for(const Yt in Kt)Ft.setStaticValue(Yt,Kt[Yt]),this.animationValues&&(this.animationValues[Yt]=Kt[Yt]);Ft.scheduleRender()}getProjectionStyles(Ft){var Ut,Ht;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const Kt={visibility:""},Yt=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,Kt.opacity="",Kt.pointerEvents=resolveMotionValue(Ft==null?void 0:Ft.pointerEvents)||"",Kt.transform=Yt?Yt(this.latestValues,""):"none",Kt;const Jt=this.getLead();if(!this.projectionDelta||!this.layout||!Jt.target){const sr={};return this.options.layoutId&&(sr.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,sr.pointerEvents=resolveMotionValue(Ft==null?void 0:Ft.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(sr.transform=Yt?Yt({},""):"none",this.hasProjected=!1),sr}const Zt=Jt.animationValues||Jt.latestValues;this.applyTransformsToTarget(),Kt.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,Zt),Yt&&(Kt.transform=Yt(Zt,Kt.transform));const{x:er,y:rr}=this.projectionDelta;Kt.transformOrigin=`${er.origin*100}% ${rr.origin*100}% 0`,Jt.animationValues?Kt.opacity=Jt===this?(Ht=(Ut=Zt.opacity)!==null&&Ut!==void 0?Ut:this.latestValues.opacity)!==null&&Ht!==void 0?Ht:1:this.preserveOpacity?this.latestValues.opacity:Zt.opacityExit:Kt.opacity=Jt===this?Zt.opacity!==void 0?Zt.opacity:"":Zt.opacityExit!==void 0?Zt.opacityExit:0;for(const sr in scaleCorrectors){if(Zt[sr]===void 0)continue;const{correct:nr,applyTo:ir}=scaleCorrectors[sr],or=Kt.transform==="none"?Zt[sr]:nr(Zt[sr],Jt);if(ir){const lr=ir.length;for(let cr=0;cr<lr;cr++)Kt[ir[cr]]=or}else Kt[sr]=or}return this.options.layoutId&&(Kt.pointerEvents=Jt===this?resolveMotionValue(Ft==null?void 0:Ft.pointerEvents)||"":"none"),Kt}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(Ft=>{var Ut;return(Ut=Ft.currentAnimation)===null||Ut===void 0?void 0:Ut.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(et){et.updateLayout()}function notifyLayoutUpdate(et){var dt;const $t=((dt=et.resumeFrom)===null||dt===void 0?void 0:dt.snapshot)||et.snapshot;if(et.isLead()&&et.layout&&$t&&et.hasListeners("didUpdate")){const{layoutBox:kt,measuredBox:Tt}=et.layout,{animationType:Dt}=et.options,Ft=$t.source!==et.layout.source;Dt==="size"?eachAxis(Jt=>{const Zt=Ft?$t.measuredBox[Jt]:$t.layoutBox[Jt],er=calcLength(Zt);Zt.min=kt[Jt].min,Zt.max=Zt.min+er}):shouldAnimatePositionOnly(Dt,$t.layoutBox,kt)&&eachAxis(Jt=>{const Zt=Ft?$t.measuredBox[Jt]:$t.layoutBox[Jt],er=calcLength(kt[Jt]);Zt.max=Zt.min+er,et.relativeTarget&&!et.currentAnimation&&(et.isProjectionDirty=!0,et.relativeTarget[Jt].max=et.relativeTarget[Jt].min+er)});const Ut=createDelta();calcBoxDelta(Ut,kt,$t.layoutBox);const Ht=createDelta();Ft?calcBoxDelta(Ht,et.applyTransform(Tt,!0),$t.measuredBox):calcBoxDelta(Ht,kt,$t.layoutBox);const Kt=!isDeltaZero(Ut);let Yt=!1;if(!et.resumeFrom){const Jt=et.getClosestProjectingParent();if(Jt&&!Jt.resumeFrom){const{snapshot:Zt,layout:er}=Jt;if(Zt&&er){const rr=createBox();calcRelativePosition(rr,$t.layoutBox,Zt.layoutBox);const sr=createBox();calcRelativePosition(sr,kt,er.layoutBox),boxEqualsRounded(rr,sr)||(Yt=!0),Jt.options.layoutRoot&&(et.relativeTarget=sr,et.relativeTargetOrigin=rr,et.relativeParent=Jt)}}}et.notifyListeners("didUpdate",{layout:kt,snapshot:$t,delta:Ht,layoutDelta:Ut,hasLayoutChanged:Kt,hasRelativeTargetChanged:Yt})}else if(et.isLead()){const{onExitComplete:kt}=et.options;kt&&kt()}et.options.transition=void 0}function propagateDirtyNodes(et){isDebug&&metrics.totalNodes++,et.parent&&(et.isProjecting()||(et.isProjectionDirty=et.parent.isProjectionDirty),et.isSharedProjectionDirty||(et.isSharedProjectionDirty=!!(et.isProjectionDirty||et.parent.isProjectionDirty||et.parent.isSharedProjectionDirty)),et.isTransformDirty||(et.isTransformDirty=et.parent.isTransformDirty))}function cleanDirtyNodes(et){et.isProjectionDirty=et.isSharedProjectionDirty=et.isTransformDirty=!1}function clearSnapshot(et){et.clearSnapshot()}function clearMeasurements(et){et.clearMeasurements()}function clearIsLayoutDirty(et){et.isLayoutDirty=!1}function resetTransformStyle(et){const{visualElement:dt}=et.options;dt&&dt.getProps().onBeforeLayoutMeasure&&dt.notify("BeforeLayoutMeasure"),et.resetTransform()}function finishAnimation(et){et.finishAnimation(),et.targetDelta=et.relativeTarget=et.target=void 0,et.isProjectionDirty=!0}function resolveTargetDelta(et){et.resolveTargetDelta()}function calcProjection(et){et.calcProjection()}function resetSkewAndRotation(et){et.resetSkewAndRotation()}function removeLeadSnapshots(et){et.removeLeadSnapshot()}function mixAxisDelta(et,dt,$t){et.translate=mixNumber$1(dt.translate,0,$t),et.scale=mixNumber$1(dt.scale,1,$t),et.origin=dt.origin,et.originPoint=dt.originPoint}function mixAxis(et,dt,$t,kt){et.min=mixNumber$1(dt.min,$t.min,kt),et.max=mixNumber$1(dt.max,$t.max,kt)}function mixBox(et,dt,$t,kt){mixAxis(et.x,dt.x,$t.x,kt),mixAxis(et.y,dt.y,$t.y,kt)}function hasOpacityCrossfade(et){return et.animationValues&&et.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=et=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(et),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$c;function roundAxis(et){et.min=roundPoint(et.min),et.max=roundPoint(et.max)}function roundBox(et){roundAxis(et.x),roundAxis(et.y)}function shouldAnimatePositionOnly(et,dt,$t){return et==="position"||et==="preserve-aspect"&&!isNear$1(aspectRatio(dt),aspectRatio($t),.2)}function checkNodeWasScrollRoot(et){var dt;return et!==et.root&&((dt=et.scroll)===null||dt===void 0?void 0:dt.wasRoot)}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(et,dt)=>addDomEvent(et,"resize",dt),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:et=>({x:et.scrollLeft,y:et.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const et=new DocumentProjectionNode({});et.mount(window),et.setOptions({layoutScroll:!0}),rootProjectionNode.current=et}return rootProjectionNode.current},resetTransform:(et,dt)=>{et.style.transform=dt!==void 0?dt:"none"},checkIsScrollRoot:et=>window.getComputedStyle(et).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(et,dt,$t){const{props:kt}=et;et.animationState&&kt.whileHover&&et.animationState.setActive("whileHover",$t==="Start");const Tt="onHover"+$t,Dt=kt[Tt];Dt&&frame.postRender(()=>Dt(dt,extractEventInfo(dt)))}class HoverGesture extends Feature$1{mount(){const{current:dt}=this.node;dt&&(this.unmount=hover(dt,$t=>(handleHoverEvent(this.node,$t,"Start"),kt=>handleHoverEvent(this.node,kt,"End"))))}unmount(){}}class FocusGesture extends Feature$1{constructor(){super(...arguments),this.isActive=!1}onFocus(){let dt=!1;try{dt=this.node.current.matches(":focus-visible")}catch{dt=!0}!dt||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(et,dt,$t){const{props:kt}=et;et.animationState&&kt.whileTap&&et.animationState.setActive("whileTap",$t==="Start");const Tt="onTap"+($t==="End"?"":$t),Dt=kt[Tt];Dt&&frame.postRender(()=>Dt(dt,extractEventInfo(dt)))}class PressGesture extends Feature$1{mount(){const{current:dt}=this.node;dt&&(this.unmount=press(dt,$t=>(handlePressEvent(this.node,$t,"Start"),(kt,{success:Tt})=>handlePressEvent(this.node,kt,Tt?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=et=>{const dt=observerCallbacks.get(et.target);dt&&dt(et)},fireAllObserverCallbacks=et=>{et.forEach(fireObserverCallback)};function initIntersectionObserver({root:et,...dt}){const $t=et||document;observers.has($t)||observers.set($t,{});const kt=observers.get($t),Tt=JSON.stringify(dt);return kt[Tt]||(kt[Tt]=new IntersectionObserver(fireAllObserverCallbacks,{root:et,...dt})),kt[Tt]}function observeIntersection(et,dt,$t){const kt=initIntersectionObserver(dt);return observerCallbacks.set(et,$t),kt.observe(et),()=>{observerCallbacks.delete(et),kt.unobserve(et)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature$1{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:dt={}}=this.node.getProps(),{root:$t,margin:kt,amount:Tt="some",once:Dt}=dt,Ft={root:$t?$t.current:void 0,rootMargin:kt,threshold:typeof Tt=="number"?Tt:thresholdNames[Tt]},Ut=Ht=>{const{isIntersecting:Kt}=Ht;if(this.isInView===Kt||(this.isInView=Kt,Dt&&!Kt&&this.hasEnteredView))return;Kt&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",Kt);const{onViewportEnter:Yt,onViewportLeave:Jt}=this.node.getProps(),Zt=Kt?Yt:Jt;Zt&&Zt(Ht)};return observeIntersection(this.node.current,Ft,Ut)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:dt,prevProps:$t}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(dt,$t))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:et={}},{viewport:dt={}}={}){return $t=>et[$t]!==dt[$t]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},MotionConfigContext=reactExports.createContext({transformPagePoint:et=>et,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$8=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1});function useVisualElement(et,dt,$t,kt,Tt){var Dt,Ft;const{visualElement:Ut}=reactExports.useContext(MotionContext),Ht=reactExports.useContext(LazyContext),Kt=reactExports.useContext(PresenceContext),Yt=reactExports.useContext(MotionConfigContext).reducedMotion,Jt=reactExports.useRef(null);kt=kt||Ht.renderer,!Jt.current&&kt&&(Jt.current=kt(et,{visualState:dt,parent:Ut,props:$t,presenceContext:Kt,blockInitialAnimation:Kt?Kt.initial===!1:!1,reducedMotionConfig:Yt}));const Zt=Jt.current,er=reactExports.useContext(SwitchLayoutGroupContext);Zt&&!Zt.projection&&Tt&&(Zt.type==="html"||Zt.type==="svg")&&createProjectionNode(Jt.current,$t,Tt,er);const rr=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{Zt&&rr.current&&Zt.update($t,Kt)});const sr=$t[optimizedAppearDataAttribute],nr=reactExports.useRef(!!sr&&!(!((Dt=window.MotionHandoffIsComplete)===null||Dt===void 0)&&Dt.call(window,sr))&&((Ft=window.MotionHasOptimisedAnimation)===null||Ft===void 0?void 0:Ft.call(window,sr)));return useIsomorphicLayoutEffect$8(()=>{Zt&&(rr.current=!0,window.MotionIsMounted=!0,Zt.updateFeatures(),microtask.render(Zt.render),nr.current&&Zt.animationState&&Zt.animationState.animateChanges())}),reactExports.useEffect(()=>{Zt&&(!nr.current&&Zt.animationState&&Zt.animationState.animateChanges(),nr.current&&(queueMicrotask(()=>{var ir;(ir=window.MotionHandoffMarkAsComplete)===null||ir===void 0||ir.call(window,sr)}),nr.current=!1))}),Zt}function createProjectionNode(et,dt,$t,kt){const{layoutId:Tt,layout:Dt,drag:Ft,dragConstraints:Ut,layoutScroll:Ht,layoutRoot:Kt}=dt;et.projection=new $t(et.latestValues,dt["data-framer-portal-id"]?void 0:getClosestProjectingNode(et.parent)),et.projection.setOptions({layoutId:Tt,layout:Dt,alwaysMeasureLayout:!!Ft||Ut&&isRefObject(Ut),visualElement:et,animationType:typeof Dt=="string"?Dt:"both",initialPromotionConfig:kt,layoutScroll:Ht,layoutRoot:Kt})}function getClosestProjectingNode(et){if(et)return et.options.allowProjection!==!1?et.projection:getClosestProjectingNode(et.parent)}function useMotionRef(et,dt,$t){return reactExports.useCallback(kt=>{kt&&et.mount&&et.mount(kt),dt&&(kt?dt.mount(kt):dt.unmount()),$t&&(typeof $t=="function"?$t(kt):isRefObject($t)&&($t.current=kt))},[dt])}function isControllingVariants(et){return isAnimationControls(et.animate)||variantProps.some(dt=>isVariantLabel(et[dt]))}function isVariantNode(et){return!!(isControllingVariants(et)||et.variants)}function getCurrentTreeVariants(et,dt){if(isControllingVariants(et)){const{initial:$t,animate:kt}=et;return{initial:$t===!1||isVariantLabel($t)?$t:void 0,animate:isVariantLabel(kt)?kt:void 0}}return et.inherit!==!1?dt:{}}function useCreateMotionContext(et){const{initial:dt,animate:$t}=getCurrentTreeVariants(et,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:dt,animate:$t}),[variantLabelsAsDependency(dt),variantLabelsAsDependency($t)])}function variantLabelsAsDependency(et){return Array.isArray(et)?et.join(" "):et}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const et in featureProps)featureDefinitions[et]={isEnabled:dt=>featureProps[et].some($t=>!!dt[$t])};function loadFeatures(et){for(const dt in et)featureDefinitions[dt]={...featureDefinitions[dt],...et[dt]}}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function createRendererMotionComponent({preloadedFeatures:et,createVisualElement:dt,useRender:$t,useVisualState:kt,Component:Tt}){et&&loadFeatures(et);function Dt(Ut,Ht){let Kt;const Yt={...reactExports.useContext(MotionConfigContext),...Ut,layoutId:useLayoutId(Ut)},{isStatic:Jt}=Yt,Zt=useCreateMotionContext(Ut),er=kt(Ut,Jt);if(!Jt&&isBrowser$1){useStrictMode();const rr=getProjectionFunctionality(Yt);Kt=rr.MeasureLayout,Zt.visualElement=useVisualElement(Tt,er,Yt,dt,rr.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Zt,children:[Kt&&Zt.visualElement?jsxRuntimeExports.jsx(Kt,{visualElement:Zt.visualElement,...Yt}):null,$t(Tt,Ut,useMotionRef(er,Zt.visualElement,Ht),er,Jt,Zt.visualElement)]})}const Ft=reactExports.forwardRef(Dt);return Ft[motionComponentSymbol]=Tt,Ft}function useLayoutId({layoutId:et}){const dt=reactExports.useContext(LayoutGroupContext).id;return dt&&et!==void 0?dt+"-"+et:et}function useStrictMode(et,dt){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(et){const{drag:dt,layout:$t}=featureDefinitions;if(!dt&&!$t)return{};const kt={...dt,...$t};return{MeasureLayout:dt!=null&&dt.isEnabled(et)||$t!=null&&$t.isEnabled(et)?kt.MeasureLayout:void 0,ProjectionNode:kt.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(et){return typeof et!="string"||et.includes("-")?!1:!!(lowercaseSVGElements.indexOf(et)>-1||/[A-Z]/u.test(et))}function renderHTML(et,{style:dt,vars:$t},kt,Tt){Object.assign(et.style,dt,Tt&&Tt.getProjectionStyles(kt));for(const Dt in $t)et.style.setProperty(Dt,$t[Dt])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(et,dt,$t,kt){renderHTML(et,dt,void 0,kt);for(const Tt in dt.attrs)et.setAttribute(camelCaseAttributes.has(Tt)?Tt:camelToDash(Tt),dt.attrs[Tt])}function isForcedMotionValue(et,{layout:dt,layoutId:$t}){return transformProps.has(et)||et.startsWith("origin")||(dt||$t!==void 0)&&(!!scaleCorrectors[et]||et==="opacity")}function scrapeMotionValuesFromProps$1(et,dt,$t){var kt;const{style:Tt}=et,Dt={};for(const Ft in Tt)(isMotionValue(Tt[Ft])||dt.style&&isMotionValue(dt.style[Ft])||isForcedMotionValue(Ft,et)||((kt=$t==null?void 0:$t.getValue(Ft))===null||kt===void 0?void 0:kt.liveStyle)!==void 0)&&(Dt[Ft]=Tt[Ft]);return Dt}function scrapeMotionValuesFromProps(et,dt,$t){const kt=scrapeMotionValuesFromProps$1(et,dt,$t);for(const Tt in et)if(isMotionValue(et[Tt])||isMotionValue(dt[Tt])){const Dt=transformPropOrder.indexOf(Tt)!==-1?"attr"+Tt.charAt(0).toUpperCase()+Tt.substring(1):Tt;kt[Dt]=et[Tt]}return kt}function useConstant(et){const dt=reactExports.useRef(null);return dt.current===null&&(dt.current=et()),dt.current}function makeState$1({scrapeMotionValuesFromProps:et,createRenderState:dt,onMount:$t},kt,Tt,Dt){const Ft={latestValues:makeLatestValues(kt,Tt,Dt,et),renderState:dt()};return $t&&(Ft.mount=Ut=>$t(kt,Ut,Ft)),Ft}const makeUseVisualState=et=>(dt,$t)=>{const kt=reactExports.useContext(MotionContext),Tt=reactExports.useContext(PresenceContext),Dt=()=>makeState$1(et,dt,kt,Tt);return $t?Dt():useConstant(Dt)};function makeLatestValues(et,dt,$t,kt){const Tt={},Dt=kt(et,{});for(const Zt in Dt)Tt[Zt]=resolveMotionValue(Dt[Zt]);let{initial:Ft,animate:Ut}=et;const Ht=isControllingVariants(et),Kt=isVariantNode(et);dt&&Kt&&!Ht&&et.inherit!==!1&&(Ft===void 0&&(Ft=dt.initial),Ut===void 0&&(Ut=dt.animate));let Yt=$t?$t.initial===!1:!1;Yt=Yt||Ft===!1;const Jt=Yt?Ut:Ft;if(Jt&&typeof Jt!="boolean"&&!isAnimationControls(Jt)){const Zt=Array.isArray(Jt)?Jt:[Jt];for(let er=0;er<Zt.length;er++){const rr=resolveVariantFromProps(et,Zt[er]);if(rr){const{transitionEnd:sr,transition:nr,...ir}=rr;for(const or in ir){let lr=ir[or];if(Array.isArray(lr)){const cr=Yt?lr.length-1:0;lr=lr[cr]}lr!==null&&(Tt[or]=lr)}for(const or in sr)Tt[or]=sr[or]}}}return Tt}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),getValueAsType=(et,dt)=>dt&&typeof et=="number"?dt.transform(et):et,translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(et,dt,$t){let kt="",Tt=!0;for(let Dt=0;Dt<numTransforms;Dt++){const Ft=transformPropOrder[Dt],Ut=et[Ft];if(Ut===void 0)continue;let Ht=!0;if(typeof Ut=="number"?Ht=Ut===(Ft.startsWith("scale")?1:0):Ht=parseFloat(Ut)===0,!Ht||$t){const Kt=getValueAsType(Ut,numberValueTypes[Ft]);if(!Ht){Tt=!1;const Yt=translateAlias[Ft]||Ft;kt+=`${Yt}(${Kt}) `}$t&&(dt[Ft]=Kt)}}return kt=kt.trim(),$t?kt=$t(dt,Tt?"":kt):Tt&&(kt="none"),kt}function buildHTMLStyles(et,dt,$t){const{style:kt,vars:Tt,transformOrigin:Dt}=et;let Ft=!1,Ut=!1;for(const Ht in dt){const Kt=dt[Ht];if(transformProps.has(Ht)){Ft=!0;continue}else if(isCSSVariableName(Ht)){Tt[Ht]=Kt;continue}else{const Yt=getValueAsType(Kt,numberValueTypes[Ht]);Ht.startsWith("origin")?(Ut=!0,Dt[Ht]=Yt):kt[Ht]=Yt}}if(dt.transform||(Ft||$t?kt.transform=buildTransform(dt,et.transform,$t):kt.transform&&(kt.transform="none")),Ut){const{originX:Ht="50%",originY:Kt="50%",originZ:Yt=0}=Dt;kt.transformOrigin=`${Ht} ${Kt} ${Yt}`}}function calcOrigin(et,dt,$t){return typeof et=="string"?et:px.transform(dt+$t*et)}function calcSVGTransformOrigin(et,dt,$t){const kt=calcOrigin(dt,et.x,et.width),Tt=calcOrigin($t,et.y,et.height);return`${kt} ${Tt}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(et,dt,$t=1,kt=0,Tt=!0){et.pathLength=1;const Dt=Tt?dashKeys:camelKeys;et[Dt.offset]=px.transform(-kt);const Ft=px.transform(dt),Ut=px.transform($t);et[Dt.array]=`${Ft} ${Ut}`}function buildSVGAttrs(et,{attrX:dt,attrY:$t,attrScale:kt,originX:Tt,originY:Dt,pathLength:Ft,pathSpacing:Ut=1,pathOffset:Ht=0,...Kt},Yt,Jt){if(buildHTMLStyles(et,Kt,Jt),Yt){et.style.viewBox&&(et.attrs.viewBox=et.style.viewBox);return}et.attrs=et.style,et.style={};const{attrs:Zt,style:er,dimensions:rr}=et;Zt.transform&&(rr&&(er.transform=Zt.transform),delete Zt.transform),rr&&(Tt!==void 0||Dt!==void 0||er.transform)&&(er.transformOrigin=calcSVGTransformOrigin(rr,Tt!==void 0?Tt:.5,Dt!==void 0?Dt:.5)),dt!==void 0&&(Zt.x=dt),$t!==void 0&&(Zt.y=$t),kt!==void 0&&(Zt.scale=kt),Ft!==void 0&&buildSVGPath(Zt,Ft,Ut,Ht,!1)}const isSVGTag=et=>typeof et=="string"&&et.toLowerCase()==="svg",svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(et,dt,{renderState:$t,latestValues:kt})=>{frame.read(()=>{try{$t.dimensions=typeof dt.getBBox=="function"?dt.getBBox():dt.getBoundingClientRect()}catch{$t.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs($t,kt,isSVGTag(dt.tagName),et.transformTemplate),renderSVG(dt,$t)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(et,dt,$t){for(const kt in dt)!isMotionValue(dt[kt])&&!isForcedMotionValue(kt,$t)&&(et[kt]=dt[kt])}function useInitialMotionValues({transformTemplate:et},dt){return reactExports.useMemo(()=>{const $t=createHtmlRenderState();return buildHTMLStyles($t,dt,et),Object.assign({},$t.vars,$t.style)},[dt])}function useStyle(et,dt){const $t=et.style||{},kt={};return copyRawValuesOnly(kt,$t,et),Object.assign(kt,useInitialMotionValues(et,dt)),kt}function useHTMLProps(et,dt){const $t={},kt=useStyle(et,dt);return et.drag&&et.dragListener!==!1&&($t.draggable=!1,kt.userSelect=kt.WebkitUserSelect=kt.WebkitTouchCallout="none",kt.touchAction=et.drag===!0?"none":`pan-${et.drag==="x"?"y":"x"}`),et.tabIndex===void 0&&(et.onTap||et.onTapStart||et.whileTap)&&($t.tabIndex=0),$t.style=kt,$t}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(et){return et.startsWith("while")||et.startsWith("drag")&&et!=="draggable"||et.startsWith("layout")||et.startsWith("onTap")||et.startsWith("onPan")||et.startsWith("onLayout")||validMotionProps.has(et)}let shouldForward=et=>!isValidMotionProp(et);function loadExternalIsValidProp(et){et&&(shouldForward=dt=>dt.startsWith("on")?!isValidMotionProp(dt):et(dt))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(et,dt,$t){const kt={};for(const Tt in et)Tt==="values"&&typeof et.values=="object"||(shouldForward(Tt)||$t===!0&&isValidMotionProp(Tt)||!dt&&!isValidMotionProp(Tt)||et.draggable&&Tt.startsWith("onDrag"))&&(kt[Tt]=et[Tt]);return kt}function useSVGProps(et,dt,$t,kt){const Tt=reactExports.useMemo(()=>{const Dt=createSvgRenderState();return buildSVGAttrs(Dt,dt,isSVGTag(kt),et.transformTemplate),{...Dt.attrs,style:{...Dt.style}}},[dt]);if(et.style){const Dt={};copyRawValuesOnly(Dt,et.style,et),Tt.style={...Dt,...Tt.style}}return Tt}function createUseRender(et=!1){return($t,kt,Tt,{latestValues:Dt},Ft)=>{const Ht=(isSVGComponent($t)?useSVGProps:useHTMLProps)(kt,Dt,Ft,$t),Kt=filterProps(kt,typeof $t=="string",et),Yt=$t!==reactExports.Fragment?{...Kt,...Ht,ref:Tt}:{},{children:Jt}=kt,Zt=reactExports.useMemo(()=>isMotionValue(Jt)?Jt.get():Jt,[Jt]);return reactExports.createElement($t,{...Yt,children:Zt})}}function createMotionComponentFactory(et,dt){return function(kt,{forwardMotionProps:Tt}={forwardMotionProps:!1}){const Ft={...isSVGComponent(kt)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:et,useRender:createUseRender(Tt),createVisualElement:dt,Component:kt};return createRendererMotionComponent(Ft)}}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const et=window.matchMedia("(prefers-reduced-motion)"),dt=()=>prefersReducedMotion.current=et.matches;et.addListener(dt),dt()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(et,dt,$t){for(const kt in dt){const Tt=dt[kt],Dt=$t[kt];if(isMotionValue(Tt))et.addValue(kt,Tt);else if(isMotionValue(Dt))et.addValue(kt,motionValue(Tt,{owner:et}));else if(Dt!==Tt)if(et.hasValue(kt)){const Ft=et.getValue(kt);Ft.liveStyle===!0?Ft.jump(Tt):Ft.hasAnimated||Ft.set(Tt)}else{const Ft=et.getStaticValue(kt);et.addValue(kt,motionValue(Ft!==void 0?Ft:Tt,{owner:et}))}}for(const kt in $t)dt[kt]===void 0&&et.removeValue(kt);return dt}const visualElementStore=new WeakMap,valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=et=>valueTypes.find(testValueType(et)),propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(dt,$t,kt){return{}}constructor({parent:dt,props:$t,presenceContext:kt,reducedMotionConfig:Tt,blockInitialAnimation:Dt,visualState:Ft},Ut={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Zt=time$1.now();this.renderScheduledAt<Zt&&(this.renderScheduledAt=Zt,frame.render(this.render,!1,!0))};const{latestValues:Ht,renderState:Kt}=Ft;this.latestValues=Ht,this.baseTarget={...Ht},this.initialValues=$t.initial?{...Ht}:{},this.renderState=Kt,this.parent=dt,this.props=$t,this.presenceContext=kt,this.depth=dt?dt.depth+1:0,this.reducedMotionConfig=Tt,this.options=Ut,this.blockInitialAnimation=!!Dt,this.isControllingVariants=isControllingVariants($t),this.isVariantNode=isVariantNode($t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(dt&&dt.current);const{willChange:Yt,...Jt}=this.scrapeMotionValuesFromProps($t,{},this);for(const Zt in Jt){const er=Jt[Zt];Ht[Zt]!==void 0&&isMotionValue(er)&&er.set(Ht[Zt],!1)}}mount(dt){this.current=dt,visualElementStore.set(dt,this),this.projection&&!this.projection.instance&&this.projection.mount(dt),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(($t,kt)=>this.bindToMotionValue(kt,$t)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame$1(this.notifyUpdate),cancelFrame$1(this.render),this.valueSubscriptions.forEach(dt=>dt()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const dt in this.events)this.events[dt].clear();for(const dt in this.features){const $t=this.features[dt];$t&&($t.unmount(),$t.isMounted=!1)}this.current=null}bindToMotionValue(dt,$t){this.valueSubscriptions.has(dt)&&this.valueSubscriptions.get(dt)();const kt=transformProps.has(dt),Tt=$t.on("change",Ut=>{this.latestValues[dt]=Ut,this.props.onUpdate&&frame.preRender(this.notifyUpdate),kt&&this.projection&&(this.projection.isTransformDirty=!0)}),Dt=$t.on("renderRequest",this.scheduleRender);let Ft;window.MotionCheckAppearSync&&(Ft=window.MotionCheckAppearSync(this,dt,$t)),this.valueSubscriptions.set(dt,()=>{Tt(),Dt(),Ft&&Ft(),$t.owner&&$t.stop()})}sortNodePosition(dt){return!this.current||!this.sortInstanceNodePosition||this.type!==dt.type?0:this.sortInstanceNodePosition(this.current,dt.current)}updateFeatures(){let dt="animation";for(dt in featureDefinitions){const $t=featureDefinitions[dt];if(!$t)continue;const{isEnabled:kt,Feature:Tt}=$t;if(!this.features[dt]&&Tt&&kt(this.props)&&(this.features[dt]=new Tt(this)),this.features[dt]){const Dt=this.features[dt];Dt.isMounted?Dt.update():(Dt.mount(),Dt.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(dt){return this.latestValues[dt]}setStaticValue(dt,$t){this.latestValues[dt]=$t}update(dt,$t){(dt.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=dt,this.prevPresenceContext=this.presenceContext,this.presenceContext=$t;for(let kt=0;kt<propEventHandlers.length;kt++){const Tt=propEventHandlers[kt];this.propEventSubscriptions[Tt]&&(this.propEventSubscriptions[Tt](),delete this.propEventSubscriptions[Tt]);const Dt="on"+Tt,Ft=dt[Dt];Ft&&(this.propEventSubscriptions[Tt]=this.on(Tt,Ft))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(dt,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(dt){return this.props.variants?this.props.variants[dt]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(dt){const $t=this.getClosestVariantNode();if($t)return $t.variantChildren&&$t.variantChildren.add(dt),()=>$t.variantChildren.delete(dt)}addValue(dt,$t){const kt=this.values.get(dt);$t!==kt&&(kt&&this.removeValue(dt),this.bindToMotionValue(dt,$t),this.values.set(dt,$t),this.latestValues[dt]=$t.get())}removeValue(dt){this.values.delete(dt);const $t=this.valueSubscriptions.get(dt);$t&&($t(),this.valueSubscriptions.delete(dt)),delete this.latestValues[dt],this.removeValueFromRenderState(dt,this.renderState)}hasValue(dt){return this.values.has(dt)}getValue(dt,$t){if(this.props.values&&this.props.values[dt])return this.props.values[dt];let kt=this.values.get(dt);return kt===void 0&&$t!==void 0&&(kt=motionValue($t===null?void 0:$t,{owner:this}),this.addValue(dt,kt)),kt}readValue(dt,$t){var kt;let Tt=this.latestValues[dt]!==void 0||!this.current?this.latestValues[dt]:(kt=this.getBaseTargetFromProps(this.props,dt))!==null&&kt!==void 0?kt:this.readValueFromInstance(this.current,dt,this.options);return Tt!=null&&(typeof Tt=="string"&&(isNumericalString(Tt)||isZeroValueString(Tt))?Tt=parseFloat(Tt):!findValueType(Tt)&&complex.test($t)&&(Tt=getAnimatableNone(dt,$t)),this.setBaseTarget(dt,isMotionValue(Tt)?Tt.get():Tt)),isMotionValue(Tt)?Tt.get():Tt}setBaseTarget(dt,$t){this.baseTarget[dt]=$t}getBaseTarget(dt){var $t;const{initial:kt}=this.props;let Tt;if(typeof kt=="string"||typeof kt=="object"){const Ft=resolveVariantFromProps(this.props,kt,($t=this.presenceContext)===null||$t===void 0?void 0:$t.custom);Ft&&(Tt=Ft[dt])}if(kt&&Tt!==void 0)return Tt;const Dt=this.getBaseTargetFromProps(this.props,dt);return Dt!==void 0&&!isMotionValue(Dt)?Dt:this.initialValues[dt]!==void 0&&Tt===void 0?void 0:this.baseTarget[dt]}on(dt,$t){return this.events[dt]||(this.events[dt]=new SubscriptionManager),this.events[dt].add($t)}notify(dt,...$t){this.events[dt]&&this.events[dt].notify(...$t)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(dt,$t){return dt.compareDocumentPosition($t)&2?1:-1}getBaseTargetFromProps(dt,$t){return dt.style?dt.style[$t]:void 0}removeValueFromRenderState(dt,{vars:$t,style:kt}){delete $t[dt],delete kt[dt]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:dt}=this.props;isMotionValue(dt)&&(this.childSubscription=dt.on("change",$t=>{this.current&&(this.current.textContent=`${$t}`)}))}}function getComputedStyle$1(et){return window.getComputedStyle(et)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(dt,$t){if(transformProps.has($t)){const kt=getDefaultValueType($t);return kt&&kt.default||0}else{const kt=getComputedStyle$1(dt),Tt=(isCSSVariableName($t)?kt.getPropertyValue($t):kt[$t])||0;return typeof Tt=="string"?Tt.trim():Tt}}measureInstanceViewportBox(dt,{transformPagePoint:$t}){return measureViewportBox(dt,$t)}build(dt,$t,kt){buildHTMLStyles(dt,$t,kt.transformTemplate)}scrapeMotionValuesFromProps(dt,$t,kt){return scrapeMotionValuesFromProps$1(dt,$t,kt)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(dt,$t){return dt[$t]}readValueFromInstance(dt,$t){if(transformProps.has($t)){const kt=getDefaultValueType($t);return kt&&kt.default||0}return $t=camelCaseAttributes.has($t)?$t:camelToDash($t),dt.getAttribute($t)}scrapeMotionValuesFromProps(dt,$t,kt){return scrapeMotionValuesFromProps(dt,$t,kt)}build(dt,$t,kt){buildSVGAttrs(dt,$t,this.isSVGTag,kt.transformTemplate)}renderInstance(dt,$t,kt,Tt){renderSVG(dt,$t,kt,Tt)}mount(dt){this.isSVGTag=isSVGTag(dt.tagName),super.mount(dt)}}const createDomVisualElement=(et,dt)=>isSVGComponent(et)?new SVGVisualElement(dt):new HTMLVisualElement(dt,{allowProjection:et!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(dt){const $t=this.props.childRef.current;if($t&&dt.isPresent&&!this.props.isPresent){const kt=this.props.sizeRef.current;kt.height=$t.offsetHeight||0,kt.width=$t.offsetWidth||0,kt.top=$t.offsetTop,kt.left=$t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:et,isPresent:dt}){const $t=reactExports.useId(),kt=reactExports.useRef(null),Tt=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:Dt}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:Ft,height:Ut,top:Ht,left:Kt}=Tt.current;if(dt||!kt.current||!Ft||!Ut)return;kt.current.dataset.motionPopId=$t;const Yt=document.createElement("style");return Dt&&(Yt.nonce=Dt),document.head.appendChild(Yt),Yt.sheet&&Yt.sheet.insertRule(`
          [data-motion-pop-id="${$t}"] {
            position: absolute !important;
            width: ${Ft}px !important;
            height: ${Ut}px !important;
            top: ${Ht}px !important;
            left: ${Kt}px !important;
          }
        `),()=>{document.head.removeChild(Yt)}},[dt]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:dt,childRef:kt,sizeRef:Tt,children:reactExports.cloneElement(et,{ref:kt})})}const PresenceChild=({children:et,initial:dt,isPresent:$t,onExitComplete:kt,custom:Tt,presenceAffectsLayout:Dt,mode:Ft})=>{const Ut=useConstant(newChildrenMap),Ht=reactExports.useId(),Kt=reactExports.useCallback(Jt=>{Ut.set(Jt,!0);for(const Zt of Ut.values())if(!Zt)return;kt&&kt()},[Ut,kt]),Yt=reactExports.useMemo(()=>({id:Ht,initial:dt,isPresent:$t,custom:Tt,onExitComplete:Kt,register:Jt=>(Ut.set(Jt,!1),()=>Ut.delete(Jt))}),Dt?[Math.random(),Kt]:[$t,Kt]);return reactExports.useMemo(()=>{Ut.forEach((Jt,Zt)=>Ut.set(Zt,!1))},[$t]),reactExports.useEffect(()=>{!$t&&!Ut.size&&kt&&kt()},[$t]),Ft==="popLayout"&&(et=jsxRuntimeExports.jsx(PopChild,{isPresent:$t,children:et})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Yt,children:et})};function newChildrenMap(){return new Map}const getChildKey=et=>et.key||"";function onlyElements(et){const dt=[];return reactExports.Children.forEach(et,$t=>{reactExports.isValidElement($t)&&dt.push($t)}),dt}const AnimatePresence=({children:et,exitBeforeEnter:dt,custom:$t,initial:kt=!0,onExitComplete:Tt,presenceAffectsLayout:Dt=!0,mode:Ft="sync"})=>{const Ut=reactExports.useMemo(()=>onlyElements(et),[et]),Ht=Ut.map(getChildKey),Kt=reactExports.useRef(!0),Yt=reactExports.useRef(Ut),Jt=useConstant(()=>new Map),[Zt,er]=reactExports.useState(Ut),[rr,sr]=reactExports.useState(Ut);useIsomorphicLayoutEffect$8(()=>{Kt.current=!1,Yt.current=Ut;for(let or=0;or<rr.length;or++){const lr=getChildKey(rr[or]);Ht.includes(lr)?Jt.delete(lr):Jt.get(lr)!==!0&&Jt.set(lr,!1)}},[rr,Ht.length,Ht.join("-")]);const nr=[];if(Ut!==Zt){let or=[...Ut];for(let lr=0;lr<rr.length;lr++){const cr=rr[lr],dr=getChildKey(cr);Ht.includes(dr)||(or.splice(lr,0,cr),nr.push(cr))}Ft==="wait"&&nr.length&&(or=nr),sr(onlyElements(or)),er(Ut);return}const{forceRender:ir}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:rr.map(or=>{const lr=getChildKey(or),cr=Ut===rr||Ht.includes(lr),dr=()=>{if(Jt.has(lr))Jt.set(lr,!0);else return;let ur=!0;Jt.forEach(pr=>{pr||(ur=!1)}),ur&&(ir==null||ir(),sr(Yt.current),Tt&&Tt())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:cr,initial:!Kt.current||kt?void 0:!1,custom:cr?void 0:$t,presenceAffectsLayout:Dt,mode:Ft,onExitComplete:cr?void 0:dr,children:or},lr)})})};function bind$1(et,dt){return function(){return et.apply(dt,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(et=>dt=>{const $t=toString$2.call(dt);return et[$t]||(et[$t]=$t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=et=>(et=et.toLowerCase(),dt=>kindOf(dt)===et),typeOfTest=et=>dt=>typeof dt===et,{isArray:isArray$f}=Array,isUndefined=typeOfTest("undefined");function isBuffer$5(et){return et!==null&&!isUndefined(et)&&et.constructor!==null&&!isUndefined(et.constructor)&&isFunction$5(et.constructor.isBuffer)&&et.constructor.isBuffer(et)}const isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView(et){let dt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?dt=ArrayBuffer.isView(et):dt=et&&et.buffer&&isArrayBuffer$1(et.buffer),dt}const isString$2=typeOfTest("string"),isFunction$5=typeOfTest("function"),isNumber$2=typeOfTest("number"),isObject$b=et=>et!==null&&typeof et=="object",isBoolean=et=>et===!0||et===!1,isPlainObject$4=et=>{if(kindOf(et)!=="object")return!1;const dt=getPrototypeOf(et);return(dt===null||dt===Object.prototype||Object.getPrototypeOf(dt)===null)&&!(Symbol.toStringTag in et)&&!(Symbol.iterator in et)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob$1=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=et=>isObject$b(et)&&isFunction$5(et.pipe),isFormData=et=>{let dt;return et&&(typeof FormData=="function"&&et instanceof FormData||isFunction$5(et.append)&&((dt=kindOf(et))==="formdata"||dt==="object"&&isFunction$5(et.toString)&&et.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=et=>et.trim?et.trim():et.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(et,dt,{allOwnKeys:$t=!1}={}){if(et===null||typeof et>"u")return;let kt,Tt;if(typeof et!="object"&&(et=[et]),isArray$f(et))for(kt=0,Tt=et.length;kt<Tt;kt++)dt.call(null,et[kt],kt,et);else{const Dt=$t?Object.getOwnPropertyNames(et):Object.keys(et),Ft=Dt.length;let Ut;for(kt=0;kt<Ft;kt++)Ut=Dt[kt],dt.call(null,et[Ut],Ut,et)}}function findKey(et,dt){dt=dt.toLowerCase();const $t=Object.keys(et);let kt=$t.length,Tt;for(;kt-- >0;)if(Tt=$t[kt],dt===Tt.toLowerCase())return Tt;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=et=>!isUndefined(et)&&et!==_global;function merge$1(){const{caseless:et}=isContextDefined(this)&&this||{},dt={},$t=(kt,Tt)=>{const Dt=et&&findKey(dt,Tt)||Tt;isPlainObject$4(dt[Dt])&&isPlainObject$4(kt)?dt[Dt]=merge$1(dt[Dt],kt):isPlainObject$4(kt)?dt[Dt]=merge$1({},kt):isArray$f(kt)?dt[Dt]=kt.slice():dt[Dt]=kt};for(let kt=0,Tt=arguments.length;kt<Tt;kt++)arguments[kt]&&forEach$1(arguments[kt],$t);return dt}const extend$1=(et,dt,$t,{allOwnKeys:kt}={})=>(forEach$1(dt,(Tt,Dt)=>{$t&&isFunction$5(Tt)?et[Dt]=bind$1(Tt,$t):et[Dt]=Tt},{allOwnKeys:kt}),et),stripBOM=et=>(et.charCodeAt(0)===65279&&(et=et.slice(1)),et),inherits=(et,dt,$t,kt)=>{et.prototype=Object.create(dt.prototype,kt),et.prototype.constructor=et,Object.defineProperty(et,"super",{value:dt.prototype}),$t&&Object.assign(et.prototype,$t)},toFlatObject=(et,dt,$t,kt)=>{let Tt,Dt,Ft;const Ut={};if(dt=dt||{},et==null)return dt;do{for(Tt=Object.getOwnPropertyNames(et),Dt=Tt.length;Dt-- >0;)Ft=Tt[Dt],(!kt||kt(Ft,et,dt))&&!Ut[Ft]&&(dt[Ft]=et[Ft],Ut[Ft]=!0);et=$t!==!1&&getPrototypeOf(et)}while(et&&(!$t||$t(et,dt))&&et!==Object.prototype);return dt},endsWith=(et,dt,$t)=>{et=String(et),($t===void 0||$t>et.length)&&($t=et.length),$t-=dt.length;const kt=et.indexOf(dt,$t);return kt!==-1&&kt===$t},toArray$6=et=>{if(!et)return null;if(isArray$f(et))return et;let dt=et.length;if(!isNumber$2(dt))return null;const $t=new Array(dt);for(;dt-- >0;)$t[dt]=et[dt];return $t},isTypedArray$4=(et=>dt=>et&&dt instanceof et)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(et,dt)=>{const kt=(et&&et[Symbol.iterator]).call(et);let Tt;for(;(Tt=kt.next())&&!Tt.done;){const Dt=Tt.value;dt.call(et,Dt[0],Dt[1])}},matchAll=(et,dt)=>{let $t;const kt=[];for(;($t=et.exec(dt))!==null;)kt.push($t);return kt},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=et=>et.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function($t,kt,Tt){return kt.toUpperCase()+Tt}),hasOwnProperty$d=(({hasOwnProperty:et})=>(dt,$t)=>et.call(dt,$t))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(et,dt)=>{const $t=Object.getOwnPropertyDescriptors(et),kt={};forEach$1($t,(Tt,Dt)=>{let Ft;(Ft=dt(Tt,Dt,et))!==!1&&(kt[Dt]=Ft||Tt)}),Object.defineProperties(et,kt)},freezeMethods=et=>{reduceDescriptors(et,(dt,$t)=>{if(isFunction$5(et)&&["arguments","caller","callee"].indexOf($t)!==-1)return!1;const kt=et[$t];if(isFunction$5(kt)){if(dt.enumerable=!1,"writable"in dt){dt.writable=!1;return}dt.set||(dt.set=()=>{throw Error("Can not rewrite read-only method '"+$t+"'")})}})},toObjectSet=(et,dt)=>{const $t={},kt=Tt=>{Tt.forEach(Dt=>{$t[Dt]=!0})};return isArray$f(et)?kt(et):kt(String(et).split(dt)),$t},noop$b=()=>{},toFiniteNumber=(et,dt)=>et!=null&&Number.isFinite(et=+et)?et:dt,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET={DIGIT:DIGIT$1,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT$1},generateString=(et=16,dt=ALPHABET.ALPHA_DIGIT)=>{let $t="";const{length:kt}=dt;for(;et--;)$t+=dt[Math.random()*kt|0];return $t};function isSpecCompliantForm(et){return!!(et&&isFunction$5(et.append)&&et[Symbol.toStringTag]==="FormData"&&et[Symbol.iterator])}const toJSONObject=et=>{const dt=new Array(10),$t=(kt,Tt)=>{if(isObject$b(kt)){if(dt.indexOf(kt)>=0)return;if(!("toJSON"in kt)){dt[Tt]=kt;const Dt=isArray$f(kt)?[]:{};return forEach$1(kt,(Ft,Ut)=>{const Ht=$t(Ft,Tt+1);!isUndefined(Ht)&&(Dt[Ut]=Ht)}),dt[Tt]=void 0,Dt}}return kt};return $t(et,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=et=>et&&(isObject$b(et)||isFunction$5(et))&&isFunction$5(et.then)&&isFunction$5(et.catch),_setImmediate=((et,dt)=>et?setImmediate:dt?(($t,kt)=>(_global.addEventListener("message",({source:Tt,data:Dt})=>{Tt===_global&&Dt===$t&&kt.length&&kt.shift()()},!1),Tt=>{kt.push(Tt),_global.postMessage($t,"*")}))(`axios@${Math.random()}`,[]):$t=>setTimeout($t))(typeof setImmediate=="function",isFunction$5(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$f,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$5,isFormData,isArrayBufferView,isString:isString$2,isNumber:isNumber$2,isBoolean,isObject:isObject$b,isPlainObject:isPlainObject$4,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$5,isStream,isURLSearchParams,isTypedArray:isTypedArray$4,isFileList,forEach:forEach$1,merge:merge$1,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$6,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$d,hasOwnProp:hasOwnProperty$d,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$b,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(et,dt,$t,kt,Tt){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=et,this.name="AxiosError",dt&&(this.code=dt),$t&&(this.config=$t),kt&&(this.request=kt),Tt&&(this.response=Tt,this.status=Tt.status?Tt.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(et=>{descriptors[et]={value:et}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(et,dt,$t,kt,Tt,Dt)=>{const Ft=Object.create(prototype$1);return utils$1.toFlatObject(et,Ft,function(Ht){return Ht!==Error.prototype},Ut=>Ut!=="isAxiosError"),AxiosError.call(Ft,et.message,dt,$t,kt,Tt),Ft.cause=et,Ft.name=et.name,Dt&&Object.assign(Ft,Dt),Ft};const httpAdapter=null;function isVisitable(et){return utils$1.isPlainObject(et)||utils$1.isArray(et)}function removeBrackets(et){return utils$1.endsWith(et,"[]")?et.slice(0,-2):et}function renderKey(et,dt,$t){return et?et.concat(dt).map(function(Tt,Dt){return Tt=removeBrackets(Tt),!$t&&Dt?"["+Tt+"]":Tt}).join($t?".":""):dt}function isFlatArray(et){return utils$1.isArray(et)&&!et.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(dt){return/^is[A-Z]/.test(dt)});function toFormData(et,dt,$t){if(!utils$1.isObject(et))throw new TypeError("target must be an object");dt=dt||new FormData,$t=utils$1.toFlatObject($t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(sr,nr){return!utils$1.isUndefined(nr[sr])});const kt=$t.metaTokens,Tt=$t.visitor||Yt,Dt=$t.dots,Ft=$t.indexes,Ht=($t.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(dt);if(!utils$1.isFunction(Tt))throw new TypeError("visitor must be a function");function Kt(rr){if(rr===null)return"";if(utils$1.isDate(rr))return rr.toISOString();if(!Ht&&utils$1.isBlob(rr))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(rr)||utils$1.isTypedArray(rr)?Ht&&typeof Blob=="function"?new Blob([rr]):Buffer.from(rr):rr}function Yt(rr,sr,nr){let ir=rr;if(rr&&!nr&&typeof rr=="object"){if(utils$1.endsWith(sr,"{}"))sr=kt?sr:sr.slice(0,-2),rr=JSON.stringify(rr);else if(utils$1.isArray(rr)&&isFlatArray(rr)||(utils$1.isFileList(rr)||utils$1.endsWith(sr,"[]"))&&(ir=utils$1.toArray(rr)))return sr=removeBrackets(sr),ir.forEach(function(lr,cr){!(utils$1.isUndefined(lr)||lr===null)&&dt.append(Ft===!0?renderKey([sr],cr,Dt):Ft===null?sr:sr+"[]",Kt(lr))}),!1}return isVisitable(rr)?!0:(dt.append(renderKey(nr,sr,Dt),Kt(rr)),!1)}const Jt=[],Zt=Object.assign(predicates,{defaultVisitor:Yt,convertValue:Kt,isVisitable});function er(rr,sr){if(!utils$1.isUndefined(rr)){if(Jt.indexOf(rr)!==-1)throw Error("Circular reference detected in "+sr.join("."));Jt.push(rr),utils$1.forEach(rr,function(ir,or){(!(utils$1.isUndefined(ir)||ir===null)&&Tt.call(dt,ir,utils$1.isString(or)?or.trim():or,sr,Zt))===!0&&er(ir,sr?sr.concat(or):[or])}),Jt.pop()}}if(!utils$1.isObject(et))throw new TypeError("data must be an object");return er(et),dt}function encode$1(et){const dt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(et).replace(/[!'()~]|%20|%00/g,function(kt){return dt[kt]})}function AxiosURLSearchParams(et,dt){this._pairs=[],et&&toFormData(et,this,dt)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(dt,$t){this._pairs.push([dt,$t])};prototype.toString=function(dt){const $t=dt?function(kt){return dt.call(this,kt,encode$1)}:encode$1;return this._pairs.map(function(Tt){return $t(Tt[0])+"="+$t(Tt[1])},"").join("&")};function encode(et){return encodeURIComponent(et).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(et,dt,$t){if(!dt)return et;const kt=$t&&$t.encode||encode;utils$1.isFunction($t)&&($t={serialize:$t});const Tt=$t&&$t.serialize;let Dt;if(Tt?Dt=Tt(dt,$t):Dt=utils$1.isURLSearchParams(dt)?dt.toString():new AxiosURLSearchParams(dt,$t).toString(kt),Dt){const Ft=et.indexOf("#");Ft!==-1&&(et=et.slice(0,Ft)),et+=(et.indexOf("?")===-1?"?":"&")+Dt}return et}class InterceptorManager{constructor(){this.handlers=[]}use(dt,$t,kt){return this.handlers.push({fulfilled:dt,rejected:$t,synchronous:kt?kt.synchronous:!1,runWhen:kt?kt.runWhen:null}),this.handlers.length-1}eject(dt){this.handlers[dt]&&(this.handlers[dt]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(dt){utils$1.forEach(this.handlers,function(kt){kt!==null&&dt(kt)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(et,dt){return toFormData(et,new platform.classes.URLSearchParams,Object.assign({visitor:function($t,kt,Tt,Dt){return platform.isNode&&utils$1.isBuffer($t)?(this.append(kt,$t.toString("base64")),!1):Dt.defaultVisitor.apply(this,arguments)}},dt))}function parsePropPath(et){return utils$1.matchAll(/\w+|\[(\w*)]/g,et).map(dt=>dt[0]==="[]"?"":dt[1]||dt[0])}function arrayToObject(et){const dt={},$t=Object.keys(et);let kt;const Tt=$t.length;let Dt;for(kt=0;kt<Tt;kt++)Dt=$t[kt],dt[Dt]=et[Dt];return dt}function formDataToJSON(et){function dt($t,kt,Tt,Dt){let Ft=$t[Dt++];if(Ft==="__proto__")return!0;const Ut=Number.isFinite(+Ft),Ht=Dt>=$t.length;return Ft=!Ft&&utils$1.isArray(Tt)?Tt.length:Ft,Ht?(utils$1.hasOwnProp(Tt,Ft)?Tt[Ft]=[Tt[Ft],kt]:Tt[Ft]=kt,!Ut):((!Tt[Ft]||!utils$1.isObject(Tt[Ft]))&&(Tt[Ft]=[]),dt($t,kt,Tt[Ft],Dt)&&utils$1.isArray(Tt[Ft])&&(Tt[Ft]=arrayToObject(Tt[Ft])),!Ut)}if(utils$1.isFormData(et)&&utils$1.isFunction(et.entries)){const $t={};return utils$1.forEachEntry(et,(kt,Tt)=>{dt(parsePropPath(kt),Tt,$t,0)}),$t}return null}function stringifySafely(et,dt,$t){if(utils$1.isString(et))try{return(dt||JSON.parse)(et),utils$1.trim(et)}catch(kt){if(kt.name!=="SyntaxError")throw kt}return($t||JSON.stringify)(et)}const defaults$6={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(dt,$t){const kt=$t.getContentType()||"",Tt=kt.indexOf("application/json")>-1,Dt=utils$1.isObject(dt);if(Dt&&utils$1.isHTMLForm(dt)&&(dt=new FormData(dt)),utils$1.isFormData(dt))return Tt?JSON.stringify(formDataToJSON(dt)):dt;if(utils$1.isArrayBuffer(dt)||utils$1.isBuffer(dt)||utils$1.isStream(dt)||utils$1.isFile(dt)||utils$1.isBlob(dt)||utils$1.isReadableStream(dt))return dt;if(utils$1.isArrayBufferView(dt))return dt.buffer;if(utils$1.isURLSearchParams(dt))return $t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),dt.toString();let Ut;if(Dt){if(kt.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(dt,this.formSerializer).toString();if((Ut=utils$1.isFileList(dt))||kt.indexOf("multipart/form-data")>-1){const Ht=this.env&&this.env.FormData;return toFormData(Ut?{"files[]":dt}:dt,Ht&&new Ht,this.formSerializer)}}return Dt||Tt?($t.setContentType("application/json",!1),stringifySafely(dt)):dt}],transformResponse:[function(dt){const $t=this.transitional||defaults$6.transitional,kt=$t&&$t.forcedJSONParsing,Tt=this.responseType==="json";if(utils$1.isResponse(dt)||utils$1.isReadableStream(dt))return dt;if(dt&&utils$1.isString(dt)&&(kt&&!this.responseType||Tt)){const Ft=!($t&&$t.silentJSONParsing)&&Tt;try{return JSON.parse(dt)}catch(Ut){if(Ft)throw Ut.name==="SyntaxError"?AxiosError.from(Ut,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):Ut}}return dt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(dt){return dt>=200&&dt<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],et=>{defaults$6.headers[et]={}});const defaults$7=defaults$6,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=et=>{const dt={};let $t,kt,Tt;return et&&et.split(`
`).forEach(function(Ft){Tt=Ft.indexOf(":"),$t=Ft.substring(0,Tt).trim().toLowerCase(),kt=Ft.substring(Tt+1).trim(),!(!$t||dt[$t]&&ignoreDuplicateOf[$t])&&($t==="set-cookie"?dt[$t]?dt[$t].push(kt):dt[$t]=[kt]:dt[$t]=dt[$t]?dt[$t]+", "+kt:kt)}),dt},$internals=Symbol("internals");function normalizeHeader(et){return et&&String(et).trim().toLowerCase()}function normalizeValue(et){return et===!1||et==null?et:utils$1.isArray(et)?et.map(normalizeValue):String(et)}function parseTokens(et){const dt=Object.create(null),$t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let kt;for(;kt=$t.exec(et);)dt[kt[1]]=kt[2];return dt}const isValidHeaderName=et=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(et.trim());function matchHeaderValue(et,dt,$t,kt,Tt){if(utils$1.isFunction(kt))return kt.call(this,dt,$t);if(Tt&&(dt=$t),!!utils$1.isString(dt)){if(utils$1.isString(kt))return dt.indexOf(kt)!==-1;if(utils$1.isRegExp(kt))return kt.test(dt)}}function formatHeader(et){return et.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(dt,$t,kt)=>$t.toUpperCase()+kt)}function buildAccessors(et,dt){const $t=utils$1.toCamelCase(" "+dt);["get","set","has"].forEach(kt=>{Object.defineProperty(et,kt+$t,{value:function(Tt,Dt,Ft){return this[kt].call(this,dt,Tt,Dt,Ft)},configurable:!0})})}class AxiosHeaders{constructor(dt){dt&&this.set(dt)}set(dt,$t,kt){const Tt=this;function Dt(Ut,Ht,Kt){const Yt=normalizeHeader(Ht);if(!Yt)throw new Error("header name must be a non-empty string");const Jt=utils$1.findKey(Tt,Yt);(!Jt||Tt[Jt]===void 0||Kt===!0||Kt===void 0&&Tt[Jt]!==!1)&&(Tt[Jt||Ht]=normalizeValue(Ut))}const Ft=(Ut,Ht)=>utils$1.forEach(Ut,(Kt,Yt)=>Dt(Kt,Yt,Ht));if(utils$1.isPlainObject(dt)||dt instanceof this.constructor)Ft(dt,$t);else if(utils$1.isString(dt)&&(dt=dt.trim())&&!isValidHeaderName(dt))Ft(parseHeaders(dt),$t);else if(utils$1.isHeaders(dt))for(const[Ut,Ht]of dt.entries())Dt(Ht,Ut,kt);else dt!=null&&Dt($t,dt,kt);return this}get(dt,$t){if(dt=normalizeHeader(dt),dt){const kt=utils$1.findKey(this,dt);if(kt){const Tt=this[kt];if(!$t)return Tt;if($t===!0)return parseTokens(Tt);if(utils$1.isFunction($t))return $t.call(this,Tt,kt);if(utils$1.isRegExp($t))return $t.exec(Tt);throw new TypeError("parser must be boolean|regexp|function")}}}has(dt,$t){if(dt=normalizeHeader(dt),dt){const kt=utils$1.findKey(this,dt);return!!(kt&&this[kt]!==void 0&&(!$t||matchHeaderValue(this,this[kt],kt,$t)))}return!1}delete(dt,$t){const kt=this;let Tt=!1;function Dt(Ft){if(Ft=normalizeHeader(Ft),Ft){const Ut=utils$1.findKey(kt,Ft);Ut&&(!$t||matchHeaderValue(kt,kt[Ut],Ut,$t))&&(delete kt[Ut],Tt=!0)}}return utils$1.isArray(dt)?dt.forEach(Dt):Dt(dt),Tt}clear(dt){const $t=Object.keys(this);let kt=$t.length,Tt=!1;for(;kt--;){const Dt=$t[kt];(!dt||matchHeaderValue(this,this[Dt],Dt,dt,!0))&&(delete this[Dt],Tt=!0)}return Tt}normalize(dt){const $t=this,kt={};return utils$1.forEach(this,(Tt,Dt)=>{const Ft=utils$1.findKey(kt,Dt);if(Ft){$t[Ft]=normalizeValue(Tt),delete $t[Dt];return}const Ut=dt?formatHeader(Dt):String(Dt).trim();Ut!==Dt&&delete $t[Dt],$t[Ut]=normalizeValue(Tt),kt[Ut]=!0}),this}concat(...dt){return this.constructor.concat(this,...dt)}toJSON(dt){const $t=Object.create(null);return utils$1.forEach(this,(kt,Tt)=>{kt!=null&&kt!==!1&&($t[Tt]=dt&&utils$1.isArray(kt)?kt.join(", "):kt)}),$t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([dt,$t])=>dt+": "+$t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(dt){return dt instanceof this?dt:new this(dt)}static concat(dt,...$t){const kt=new this(dt);return $t.forEach(Tt=>kt.set(Tt)),kt}static accessor(dt){const kt=(this[$internals]=this[$internals]={accessors:{}}).accessors,Tt=this.prototype;function Dt(Ft){const Ut=normalizeHeader(Ft);kt[Ut]||(buildAccessors(Tt,Ft),kt[Ut]=!0)}return utils$1.isArray(dt)?dt.forEach(Dt):Dt(dt),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:et},dt)=>{let $t=dt[0].toUpperCase()+dt.slice(1);return{get:()=>et,set(kt){this[$t]=kt}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(et,dt){const $t=this||defaults$7,kt=dt||$t,Tt=AxiosHeaders$1.from(kt.headers);let Dt=kt.data;return utils$1.forEach(et,function(Ut){Dt=Ut.call($t,Dt,Tt.normalize(),dt?dt.status:void 0)}),Tt.normalize(),Dt}function isCancel(et){return!!(et&&et.__CANCEL__)}function CanceledError(et,dt,$t){AxiosError.call(this,et??"canceled",AxiosError.ERR_CANCELED,dt,$t),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(et,dt,$t){const kt=$t.config.validateStatus;!$t.status||!kt||kt($t.status)?et($t):dt(new AxiosError("Request failed with status code "+$t.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor($t.status/100)-4],$t.config,$t.request,$t))}function parseProtocol(et){const dt=/^([-+\w]{1,25})(:?\/\/|:)/.exec(et);return dt&&dt[1]||""}function speedometer(et,dt){et=et||10;const $t=new Array(et),kt=new Array(et);let Tt=0,Dt=0,Ft;return dt=dt!==void 0?dt:1e3,function(Ht){const Kt=Date.now(),Yt=kt[Dt];Ft||(Ft=Kt),$t[Tt]=Ht,kt[Tt]=Kt;let Jt=Dt,Zt=0;for(;Jt!==Tt;)Zt+=$t[Jt++],Jt=Jt%et;if(Tt=(Tt+1)%et,Tt===Dt&&(Dt=(Dt+1)%et),Kt-Ft<dt)return;const er=Yt&&Kt-Yt;return er?Math.round(Zt*1e3/er):void 0}}function throttle(et,dt){let $t=0,kt=1e3/dt,Tt,Dt;const Ft=(Kt,Yt=Date.now())=>{$t=Yt,Tt=null,Dt&&(clearTimeout(Dt),Dt=null),et.apply(null,Kt)};return[(...Kt)=>{const Yt=Date.now(),Jt=Yt-$t;Jt>=kt?Ft(Kt,Yt):(Tt=Kt,Dt||(Dt=setTimeout(()=>{Dt=null,Ft(Tt)},kt-Jt)))},()=>Tt&&Ft(Tt)]}const progressEventReducer=(et,dt,$t=3)=>{let kt=0;const Tt=speedometer(50,250);return throttle(Dt=>{const Ft=Dt.loaded,Ut=Dt.lengthComputable?Dt.total:void 0,Ht=Ft-kt,Kt=Tt(Ht),Yt=Ft<=Ut;kt=Ft;const Jt={loaded:Ft,total:Ut,progress:Ut?Ft/Ut:void 0,bytes:Ht,rate:Kt||void 0,estimated:Kt&&Ut&&Yt?(Ut-Ft)/Kt:void 0,event:Dt,lengthComputable:Ut!=null,[dt?"download":"upload"]:!0};et(Jt)},$t)},progressEventDecorator=(et,dt)=>{const $t=et!=null;return[kt=>dt[0]({lengthComputable:$t,total:et,loaded:kt}),dt[1]]},asyncDecorator=et=>(...dt)=>utils$1.asap(()=>et(...dt)),isURLSameOrigin=platform.hasStandardBrowserEnv?((et,dt)=>$t=>($t=new URL($t,platform.origin),et.protocol===$t.protocol&&et.host===$t.host&&(dt||et.port===$t.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(et,dt,$t,kt,Tt,Dt){const Ft=[et+"="+encodeURIComponent(dt)];utils$1.isNumber($t)&&Ft.push("expires="+new Date($t).toGMTString()),utils$1.isString(kt)&&Ft.push("path="+kt),utils$1.isString(Tt)&&Ft.push("domain="+Tt),Dt===!0&&Ft.push("secure"),document.cookie=Ft.join("; ")},read(et){const dt=document.cookie.match(new RegExp("(^|;\\s*)("+et+")=([^;]*)"));return dt?decodeURIComponent(dt[3]):null},remove(et){this.write(et,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(et){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(et)}function combineURLs(et,dt){return dt?et.replace(/\/?\/$/,"")+"/"+dt.replace(/^\/+/,""):et}function buildFullPath(et,dt){return et&&!isAbsoluteURL(dt)?combineURLs(et,dt):dt}const headersToObject=et=>et instanceof AxiosHeaders$1?{...et}:et;function mergeConfig$5(et,dt){dt=dt||{};const $t={};function kt(Kt,Yt,Jt,Zt){return utils$1.isPlainObject(Kt)&&utils$1.isPlainObject(Yt)?utils$1.merge.call({caseless:Zt},Kt,Yt):utils$1.isPlainObject(Yt)?utils$1.merge({},Yt):utils$1.isArray(Yt)?Yt.slice():Yt}function Tt(Kt,Yt,Jt,Zt){if(utils$1.isUndefined(Yt)){if(!utils$1.isUndefined(Kt))return kt(void 0,Kt,Jt,Zt)}else return kt(Kt,Yt,Jt,Zt)}function Dt(Kt,Yt){if(!utils$1.isUndefined(Yt))return kt(void 0,Yt)}function Ft(Kt,Yt){if(utils$1.isUndefined(Yt)){if(!utils$1.isUndefined(Kt))return kt(void 0,Kt)}else return kt(void 0,Yt)}function Ut(Kt,Yt,Jt){if(Jt in dt)return kt(Kt,Yt);if(Jt in et)return kt(void 0,Kt)}const Ht={url:Dt,method:Dt,data:Dt,baseURL:Ft,transformRequest:Ft,transformResponse:Ft,paramsSerializer:Ft,timeout:Ft,timeoutMessage:Ft,withCredentials:Ft,withXSRFToken:Ft,adapter:Ft,responseType:Ft,xsrfCookieName:Ft,xsrfHeaderName:Ft,onUploadProgress:Ft,onDownloadProgress:Ft,decompress:Ft,maxContentLength:Ft,maxBodyLength:Ft,beforeRedirect:Ft,transport:Ft,httpAgent:Ft,httpsAgent:Ft,cancelToken:Ft,socketPath:Ft,responseEncoding:Ft,validateStatus:Ut,headers:(Kt,Yt,Jt)=>Tt(headersToObject(Kt),headersToObject(Yt),Jt,!0)};return utils$1.forEach(Object.keys(Object.assign({},et,dt)),function(Yt){const Jt=Ht[Yt]||Tt,Zt=Jt(et[Yt],dt[Yt],Yt);utils$1.isUndefined(Zt)&&Jt!==Ut||($t[Yt]=Zt)}),$t}const resolveConfig=et=>{const dt=mergeConfig$5({},et);let{data:$t,withXSRFToken:kt,xsrfHeaderName:Tt,xsrfCookieName:Dt,headers:Ft,auth:Ut}=dt;dt.headers=Ft=AxiosHeaders$1.from(Ft),dt.url=buildURL(buildFullPath(dt.baseURL,dt.url),et.params,et.paramsSerializer),Ut&&Ft.set("Authorization","Basic "+btoa((Ut.username||"")+":"+(Ut.password?unescape(encodeURIComponent(Ut.password)):"")));let Ht;if(utils$1.isFormData($t)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)Ft.setContentType(void 0);else if((Ht=Ft.getContentType())!==!1){const[Kt,...Yt]=Ht?Ht.split(";").map(Jt=>Jt.trim()).filter(Boolean):[];Ft.setContentType([Kt||"multipart/form-data",...Yt].join("; "))}}if(platform.hasStandardBrowserEnv&&(kt&&utils$1.isFunction(kt)&&(kt=kt(dt)),kt||kt!==!1&&isURLSameOrigin(dt.url))){const Kt=Tt&&Dt&&cookies.read(Dt);Kt&&Ft.set(Tt,Kt)}return dt},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(et){return new Promise(function($t,kt){const Tt=resolveConfig(et);let Dt=Tt.data;const Ft=AxiosHeaders$1.from(Tt.headers).normalize();let{responseType:Ut,onUploadProgress:Ht,onDownloadProgress:Kt}=Tt,Yt,Jt,Zt,er,rr;function sr(){er&&er(),rr&&rr(),Tt.cancelToken&&Tt.cancelToken.unsubscribe(Yt),Tt.signal&&Tt.signal.removeEventListener("abort",Yt)}let nr=new XMLHttpRequest;nr.open(Tt.method.toUpperCase(),Tt.url,!0),nr.timeout=Tt.timeout;function ir(){if(!nr)return;const lr=AxiosHeaders$1.from("getAllResponseHeaders"in nr&&nr.getAllResponseHeaders()),dr={data:!Ut||Ut==="text"||Ut==="json"?nr.responseText:nr.response,status:nr.status,statusText:nr.statusText,headers:lr,config:et,request:nr};settle(function(pr){$t(pr),sr()},function(pr){kt(pr),sr()},dr),nr=null}"onloadend"in nr?nr.onloadend=ir:nr.onreadystatechange=function(){!nr||nr.readyState!==4||nr.status===0&&!(nr.responseURL&&nr.responseURL.indexOf("file:")===0)||setTimeout(ir)},nr.onabort=function(){nr&&(kt(new AxiosError("Request aborted",AxiosError.ECONNABORTED,et,nr)),nr=null)},nr.onerror=function(){kt(new AxiosError("Network Error",AxiosError.ERR_NETWORK,et,nr)),nr=null},nr.ontimeout=function(){let cr=Tt.timeout?"timeout of "+Tt.timeout+"ms exceeded":"timeout exceeded";const dr=Tt.transitional||transitionalDefaults;Tt.timeoutErrorMessage&&(cr=Tt.timeoutErrorMessage),kt(new AxiosError(cr,dr.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,et,nr)),nr=null},Dt===void 0&&Ft.setContentType(null),"setRequestHeader"in nr&&utils$1.forEach(Ft.toJSON(),function(cr,dr){nr.setRequestHeader(dr,cr)}),utils$1.isUndefined(Tt.withCredentials)||(nr.withCredentials=!!Tt.withCredentials),Ut&&Ut!=="json"&&(nr.responseType=Tt.responseType),Kt&&([Zt,rr]=progressEventReducer(Kt,!0),nr.addEventListener("progress",Zt)),Ht&&nr.upload&&([Jt,er]=progressEventReducer(Ht),nr.upload.addEventListener("progress",Jt),nr.upload.addEventListener("loadend",er)),(Tt.cancelToken||Tt.signal)&&(Yt=lr=>{nr&&(kt(!lr||lr.type?new CanceledError(null,et,nr):lr),nr.abort(),nr=null)},Tt.cancelToken&&Tt.cancelToken.subscribe(Yt),Tt.signal&&(Tt.signal.aborted?Yt():Tt.signal.addEventListener("abort",Yt)));const or=parseProtocol(Tt.url);if(or&&platform.protocols.indexOf(or)===-1){kt(new AxiosError("Unsupported protocol "+or+":",AxiosError.ERR_BAD_REQUEST,et));return}nr.send(Dt||null)})},composeSignals=(et,dt)=>{const{length:$t}=et=et?et.filter(Boolean):[];if(dt||$t){let kt=new AbortController,Tt;const Dt=function(Kt){if(!Tt){Tt=!0,Ut();const Yt=Kt instanceof Error?Kt:this.reason;kt.abort(Yt instanceof AxiosError?Yt:new CanceledError(Yt instanceof Error?Yt.message:Yt))}};let Ft=dt&&setTimeout(()=>{Ft=null,Dt(new AxiosError(`timeout ${dt} of ms exceeded`,AxiosError.ETIMEDOUT))},dt);const Ut=()=>{et&&(Ft&&clearTimeout(Ft),Ft=null,et.forEach(Kt=>{Kt.unsubscribe?Kt.unsubscribe(Dt):Kt.removeEventListener("abort",Dt)}),et=null)};et.forEach(Kt=>Kt.addEventListener("abort",Dt));const{signal:Ht}=kt;return Ht.unsubscribe=()=>utils$1.asap(Ut),Ht}},composeSignals$1=composeSignals,streamChunk=function*(et,dt){let $t=et.byteLength;if(!dt||$t<dt){yield et;return}let kt=0,Tt;for(;kt<$t;)Tt=kt+dt,yield et.slice(kt,Tt),kt=Tt},readBytes=async function*(et,dt){for await(const $t of readStream(et))yield*streamChunk($t,dt)},readStream=async function*(et){if(et[Symbol.asyncIterator]){yield*et;return}const dt=et.getReader();try{for(;;){const{done:$t,value:kt}=await dt.read();if($t)break;yield kt}}finally{await dt.cancel()}},trackStream=(et,dt,$t,kt)=>{const Tt=readBytes(et,dt);let Dt=0,Ft,Ut=Ht=>{Ft||(Ft=!0,kt&&kt(Ht))};return new ReadableStream({async pull(Ht){try{const{done:Kt,value:Yt}=await Tt.next();if(Kt){Ut(),Ht.close();return}let Jt=Yt.byteLength;if($t){let Zt=Dt+=Jt;$t(Zt)}Ht.enqueue(new Uint8Array(Yt))}catch(Kt){throw Ut(Kt),Kt}},cancel(Ht){return Ut(Ht),Tt.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(et=>dt=>et.encode(dt))(new TextEncoder):async et=>new Uint8Array(await new Response(et).arrayBuffer())),test=(et,...dt)=>{try{return!!et(...dt)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let et=!1;const dt=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return et=!0,"half"}}).headers.has("Content-Type");return et&&!dt}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(et=>et.body)};isFetchSupported&&(et=>{["text","arrayBuffer","blob","formData","stream"].forEach(dt=>{!resolvers[dt]&&(resolvers[dt]=utils$1.isFunction(et[dt])?$t=>$t[dt]():($t,kt)=>{throw new AxiosError(`Response type '${dt}' is not supported`,AxiosError.ERR_NOT_SUPPORT,kt)})})})(new Response);const getBodyLength=async et=>{if(et==null)return 0;if(utils$1.isBlob(et))return et.size;if(utils$1.isSpecCompliantForm(et))return(await new Request(platform.origin,{method:"POST",body:et}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(et)||utils$1.isArrayBuffer(et))return et.byteLength;if(utils$1.isURLSearchParams(et)&&(et=et+""),utils$1.isString(et))return(await encodeText(et)).byteLength},resolveBodyLength=async(et,dt)=>{const $t=utils$1.toFiniteNumber(et.getContentLength());return $t??getBodyLength(dt)},fetchAdapter=isFetchSupported&&(async et=>{let{url:dt,method:$t,data:kt,signal:Tt,cancelToken:Dt,timeout:Ft,onDownloadProgress:Ut,onUploadProgress:Ht,responseType:Kt,headers:Yt,withCredentials:Jt="same-origin",fetchOptions:Zt}=resolveConfig(et);Kt=Kt?(Kt+"").toLowerCase():"text";let er=composeSignals$1([Tt,Dt&&Dt.toAbortSignal()],Ft),rr;const sr=er&&er.unsubscribe&&(()=>{er.unsubscribe()});let nr;try{if(Ht&&supportsRequestStream&&$t!=="get"&&$t!=="head"&&(nr=await resolveBodyLength(Yt,kt))!==0){let dr=new Request(dt,{method:"POST",body:kt,duplex:"half"}),ur;if(utils$1.isFormData(kt)&&(ur=dr.headers.get("content-type"))&&Yt.setContentType(ur),dr.body){const[pr,mr]=progressEventDecorator(nr,progressEventReducer(asyncDecorator(Ht)));kt=trackStream(dr.body,DEFAULT_CHUNK_SIZE,pr,mr)}}utils$1.isString(Jt)||(Jt=Jt?"include":"omit");const ir="credentials"in Request.prototype;rr=new Request(dt,{...Zt,signal:er,method:$t.toUpperCase(),headers:Yt.normalize().toJSON(),body:kt,duplex:"half",credentials:ir?Jt:void 0});let or=await fetch(rr);const lr=supportsResponseStream&&(Kt==="stream"||Kt==="response");if(supportsResponseStream&&(Ut||lr&&sr)){const dr={};["status","statusText","headers"].forEach(jr=>{dr[jr]=or[jr]});const ur=utils$1.toFiniteNumber(or.headers.get("content-length")),[pr,mr]=Ut&&progressEventDecorator(ur,progressEventReducer(asyncDecorator(Ut),!0))||[];or=new Response(trackStream(or.body,DEFAULT_CHUNK_SIZE,pr,()=>{mr&&mr(),sr&&sr()}),dr)}Kt=Kt||"text";let cr=await resolvers[utils$1.findKey(resolvers,Kt)||"text"](or,et);return!lr&&sr&&sr(),await new Promise((dr,ur)=>{settle(dr,ur,{data:cr,headers:AxiosHeaders$1.from(or.headers),status:or.status,statusText:or.statusText,config:et,request:rr})})}catch(ir){throw sr&&sr(),ir&&ir.name==="TypeError"&&/fetch/i.test(ir.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,et,rr),{cause:ir.cause||ir}):AxiosError.from(ir,ir&&ir.code,et,rr)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(et,dt)=>{if(et){try{Object.defineProperty(et,"name",{value:dt})}catch{}Object.defineProperty(et,"adapterName",{value:dt})}});const renderReason=et=>`- ${et}`,isResolvedHandle=et=>utils$1.isFunction(et)||et===null||et===!1,adapters={getAdapter:et=>{et=utils$1.isArray(et)?et:[et];const{length:dt}=et;let $t,kt;const Tt={};for(let Dt=0;Dt<dt;Dt++){$t=et[Dt];let Ft;if(kt=$t,!isResolvedHandle($t)&&(kt=knownAdapters[(Ft=String($t)).toLowerCase()],kt===void 0))throw new AxiosError(`Unknown adapter '${Ft}'`);if(kt)break;Tt[Ft||"#"+Dt]=kt}if(!kt){const Dt=Object.entries(Tt).map(([Ut,Ht])=>`adapter ${Ut} `+(Ht===!1?"is not supported by the environment":"is not available in the build"));let Ft=dt?Dt.length>1?`since :
`+Dt.map(renderReason).join(`
`):" "+renderReason(Dt[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+Ft,"ERR_NOT_SUPPORT")}return kt},adapters:knownAdapters};function throwIfCancellationRequested(et){if(et.cancelToken&&et.cancelToken.throwIfRequested(),et.signal&&et.signal.aborted)throw new CanceledError(null,et)}function dispatchRequest(et){return throwIfCancellationRequested(et),et.headers=AxiosHeaders$1.from(et.headers),et.data=transformData.call(et,et.transformRequest),["post","put","patch"].indexOf(et.method)!==-1&&et.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(et.adapter||defaults$7.adapter)(et).then(function(kt){return throwIfCancellationRequested(et),kt.data=transformData.call(et,et.transformResponse,kt),kt.headers=AxiosHeaders$1.from(kt.headers),kt},function(kt){return isCancel(kt)||(throwIfCancellationRequested(et),kt&&kt.response&&(kt.response.data=transformData.call(et,et.transformResponse,kt.response),kt.response.headers=AxiosHeaders$1.from(kt.response.headers))),Promise.reject(kt)})}const VERSION="1.7.9",validators$1={};["object","boolean","number","function","string","symbol"].forEach((et,dt)=>{validators$1[et]=function(kt){return typeof kt===et||"a"+(dt<1?"n ":" ")+et}});const deprecatedWarnings={};validators$1.transitional=function(dt,$t,kt){function Tt(Dt,Ft){return"[Axios v"+VERSION+"] Transitional option '"+Dt+"'"+Ft+(kt?". "+kt:"")}return(Dt,Ft,Ut)=>{if(dt===!1)throw new AxiosError(Tt(Ft," has been removed"+($t?" in "+$t:"")),AxiosError.ERR_DEPRECATED);return $t&&!deprecatedWarnings[Ft]&&(deprecatedWarnings[Ft]=!0,console.warn(Tt(Ft," has been deprecated since v"+$t+" and will be removed in the near future"))),dt?dt(Dt,Ft,Ut):!0}};validators$1.spelling=function(dt){return($t,kt)=>(console.warn(`${kt} is likely a misspelling of ${dt}`),!0)};function assertOptions(et,dt,$t){if(typeof et!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const kt=Object.keys(et);let Tt=kt.length;for(;Tt-- >0;){const Dt=kt[Tt],Ft=dt[Dt];if(Ft){const Ut=et[Dt],Ht=Ut===void 0||Ft(Ut,Dt,et);if(Ht!==!0)throw new AxiosError("option "+Dt+" must be "+Ht,AxiosError.ERR_BAD_OPTION_VALUE);continue}if($t!==!0)throw new AxiosError("Unknown option "+Dt,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(dt){this.defaults=dt,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(dt,$t){try{return await this._request(dt,$t)}catch(kt){if(kt instanceof Error){let Tt={};Error.captureStackTrace?Error.captureStackTrace(Tt):Tt=new Error;const Dt=Tt.stack?Tt.stack.replace(/^.+\n/,""):"";try{kt.stack?Dt&&!String(kt.stack).endsWith(Dt.replace(/^.+\n.+\n/,""))&&(kt.stack+=`
`+Dt):kt.stack=Dt}catch{}}throw kt}}_request(dt,$t){typeof dt=="string"?($t=$t||{},$t.url=dt):$t=dt||{},$t=mergeConfig$5(this.defaults,$t);const{transitional:kt,paramsSerializer:Tt,headers:Dt}=$t;kt!==void 0&&validator.assertOptions(kt,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),Tt!=null&&(utils$1.isFunction(Tt)?$t.paramsSerializer={serialize:Tt}:validator.assertOptions(Tt,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions($t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),$t.method=($t.method||this.defaults.method||"get").toLowerCase();let Ft=Dt&&utils$1.merge(Dt.common,Dt[$t.method]);Dt&&utils$1.forEach(["delete","get","head","post","put","patch","common"],rr=>{delete Dt[rr]}),$t.headers=AxiosHeaders$1.concat(Ft,Dt);const Ut=[];let Ht=!0;this.interceptors.request.forEach(function(sr){typeof sr.runWhen=="function"&&sr.runWhen($t)===!1||(Ht=Ht&&sr.synchronous,Ut.unshift(sr.fulfilled,sr.rejected))});const Kt=[];this.interceptors.response.forEach(function(sr){Kt.push(sr.fulfilled,sr.rejected)});let Yt,Jt=0,Zt;if(!Ht){const rr=[dispatchRequest.bind(this),void 0];for(rr.unshift.apply(rr,Ut),rr.push.apply(rr,Kt),Zt=rr.length,Yt=Promise.resolve($t);Jt<Zt;)Yt=Yt.then(rr[Jt++],rr[Jt++]);return Yt}Zt=Ut.length;let er=$t;for(Jt=0;Jt<Zt;){const rr=Ut[Jt++],sr=Ut[Jt++];try{er=rr(er)}catch(nr){sr.call(this,nr);break}}try{Yt=dispatchRequest.call(this,er)}catch(rr){return Promise.reject(rr)}for(Jt=0,Zt=Kt.length;Jt<Zt;)Yt=Yt.then(Kt[Jt++],Kt[Jt++]);return Yt}getUri(dt){dt=mergeConfig$5(this.defaults,dt);const $t=buildFullPath(dt.baseURL,dt.url);return buildURL($t,dt.params,dt.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(dt){Axios.prototype[dt]=function($t,kt){return this.request(mergeConfig$5(kt||{},{method:dt,url:$t,data:(kt||{}).data}))}});utils$1.forEach(["post","put","patch"],function(dt){function $t(kt){return function(Dt,Ft,Ut){return this.request(mergeConfig$5(Ut||{},{method:dt,headers:kt?{"Content-Type":"multipart/form-data"}:{},url:Dt,data:Ft}))}}Axios.prototype[dt]=$t(),Axios.prototype[dt+"Form"]=$t(!0)});const Axios$1=Axios;class CancelToken{constructor(dt){if(typeof dt!="function")throw new TypeError("executor must be a function.");let $t;this.promise=new Promise(function(Dt){$t=Dt});const kt=this;this.promise.then(Tt=>{if(!kt._listeners)return;let Dt=kt._listeners.length;for(;Dt-- >0;)kt._listeners[Dt](Tt);kt._listeners=null}),this.promise.then=Tt=>{let Dt;const Ft=new Promise(Ut=>{kt.subscribe(Ut),Dt=Ut}).then(Tt);return Ft.cancel=function(){kt.unsubscribe(Dt)},Ft},dt(function(Dt,Ft,Ut){kt.reason||(kt.reason=new CanceledError(Dt,Ft,Ut),$t(kt.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(dt){if(this.reason){dt(this.reason);return}this._listeners?this._listeners.push(dt):this._listeners=[dt]}unsubscribe(dt){if(!this._listeners)return;const $t=this._listeners.indexOf(dt);$t!==-1&&this._listeners.splice($t,1)}toAbortSignal(){const dt=new AbortController,$t=kt=>{dt.abort(kt)};return this.subscribe($t),dt.signal.unsubscribe=()=>this.unsubscribe($t),dt.signal}static source(){let dt;return{token:new CancelToken(function(Tt){dt=Tt}),cancel:dt}}}const CancelToken$1=CancelToken;function spread(et){return function($t){return et.apply(null,$t)}}function isAxiosError(et){return utils$1.isObject(et)&&et.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([et,dt])=>{HttpStatusCode[dt]=et});const HttpStatusCode$1=HttpStatusCode;function createInstance(et){const dt=new Axios$1(et),$t=bind$1(Axios$1.prototype.request,dt);return utils$1.extend($t,Axios$1.prototype,dt,{allOwnKeys:!0}),utils$1.extend($t,dt,null,{allOwnKeys:!0}),$t.create=function(Tt){return createInstance(mergeConfig$5(et,Tt))},$t}const axios=createInstance(defaults$7);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(dt){return Promise.all(dt)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig$5;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=et=>formDataToJSON(utils$1.isHTMLForm(et)?new FormData(et):et);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;function r$3(et){var dt,$t,kt="";if(typeof et=="string"||typeof et=="number")kt+=et;else if(typeof et=="object")if(Array.isArray(et)){var Tt=et.length;for(dt=0;dt<Tt;dt++)et[dt]&&($t=r$3(et[dt]))&&(kt&&(kt+=" "),kt+=$t)}else for($t in et)et[$t]&&(kt&&(kt+=" "),kt+=$t);return kt}function clsx(){for(var et,dt,$t=0,kt="",Tt=arguments.length;$t<Tt;$t++)(et=arguments[$t])&&(dt=r$3(et))&&(kt&&(kt+=" "),kt+=dt);return kt}function Mt$1(et){if(!et||typeof document>"u")return;let dt=document.head||document.getElementsByTagName("head")[0],$t=document.createElement("style");$t.type="text/css",dt.firstChild?dt.insertBefore($t,dt.firstChild):dt.appendChild($t),$t.styleSheet?$t.styleSheet.cssText=et:$t.appendChild(document.createTextNode(et))}Mt$1(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L$8=et=>typeof et=="number"&&!isNaN(et),N$2=et=>typeof et=="string",P$5=et=>typeof et=="function",mt$1=et=>N$2(et)||L$8(et),B$4=et=>N$2(et)||P$5(et)?et:null,pt=(et,dt)=>et===!1||L$8(et)&&et>0?et:dt,z$6=et=>reactExports.isValidElement(et)||N$2(et)||P$5(et)||L$8(et);function Z$4(et,dt,$t=300){let{scrollHeight:kt,style:Tt}=et;requestAnimationFrame(()=>{Tt.minHeight="initial",Tt.height=kt+"px",Tt.transition=`all ${$t}ms`,requestAnimationFrame(()=>{Tt.height="0",Tt.padding="0",Tt.margin="0",setTimeout(dt,$t)})})}function $$3({enter:et,exit:dt,appendPosition:$t=!1,collapse:kt=!0,collapseDuration:Tt=300}){return function({children:Dt,position:Ft,preventExitTransition:Ut,done:Ht,nodeRef:Kt,isIn:Yt,playToast:Jt}){let Zt=$t?`${et}--${Ft}`:et,er=$t?`${dt}--${Ft}`:dt,rr=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{let sr=Kt.current,nr=Zt.split(" "),ir=or=>{or.target===Kt.current&&(Jt(),sr.removeEventListener("animationend",ir),sr.removeEventListener("animationcancel",ir),rr.current===0&&or.type!=="animationcancel"&&sr.classList.remove(...nr))};sr.classList.add(...nr),sr.addEventListener("animationend",ir),sr.addEventListener("animationcancel",ir)},[]),reactExports.useEffect(()=>{let sr=Kt.current,nr=()=>{sr.removeEventListener("animationend",nr),kt?Z$4(sr,Ht,Tt):Ht()};Yt||(Ut?nr():(rr.current=1,sr.className+=` ${er}`,sr.addEventListener("animationend",nr)))},[Yt]),React$2.createElement(React$2.Fragment,null,Dt)}}function J$2(et,dt){return{content:tt$2(et.content,et.props),containerId:et.props.containerId,id:et.props.toastId,theme:et.props.theme,type:et.props.type,data:et.props.data||{},isLoading:et.props.isLoading,icon:et.props.icon,reason:et.removalReason,status:dt}}function tt$2(et,dt,$t=!1){return reactExports.isValidElement(et)&&!N$2(et.type)?reactExports.cloneElement(et,{closeToast:dt.closeToast,toastProps:dt,data:dt.data,isPaused:$t}):P$5(et)?et({closeToast:dt.closeToast,toastProps:dt,data:dt.data,isPaused:$t}):et}function yt({closeToast:et,theme:dt,ariaLabel:$t="close"}){return React$2.createElement("button",{className:`Toastify__close-button Toastify__close-button--${dt}`,type:"button",onClick:kt=>{kt.stopPropagation(),et(!0)},"aria-label":$t},React$2.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React$2.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt$1({delay:et,isRunning:dt,closeToast:$t,type:kt="default",hide:Tt,className:Dt,controlledProgress:Ft,progress:Ut,rtl:Ht,isIn:Kt,theme:Yt}){let Jt=Tt||Ft&&Ut===0,Zt={animationDuration:`${et}ms`,animationPlayState:dt?"running":"paused"};Ft&&(Zt.transform=`scaleX(${Ut})`);let er=clsx("Toastify__progress-bar",Ft?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${Yt}`,`Toastify__progress-bar--${kt}`,{"Toastify__progress-bar--rtl":Ht}),rr=P$5(Dt)?Dt({rtl:Ht,type:kt,defaultClassName:er}):clsx(er,Dt),sr={[Ft&&Ut>=1?"onTransitionEnd":"onAnimationEnd"]:Ft&&Ut<1?null:()=>{Kt&&$t()}};return React$2.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":Jt},React$2.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${Yt} Toastify__progress-bar--${kt}`}),React$2.createElement("div",{role:"progressbar","aria-hidden":Jt?"true":"false","aria-label":"notification timer",className:rr,style:Zt,...sr}))}var Xt=1,at$1=()=>`${Xt++}`;function _t$1(et,dt,$t){let kt=1,Tt=0,Dt=[],Ft=[],Ut=dt,Ht=new Map,Kt=new Set,Yt=or=>(Kt.add(or),()=>Kt.delete(or)),Jt=()=>{Ft=Array.from(Ht.values()),Kt.forEach(or=>or())},Zt=({containerId:or,toastId:lr,updateId:cr})=>{let dr=or?or!==et:et!==1,ur=Ht.has(lr)&&cr==null;return dr||ur},er=(or,lr)=>{Ht.forEach(cr=>{var dr;(lr==null||lr===cr.props.toastId)&&((dr=cr.toggle)==null||dr.call(cr,or))})},rr=or=>{var lr,cr;(cr=(lr=or.props)==null?void 0:lr.onClose)==null||cr.call(lr,or.removalReason),or.isActive=!1},sr=or=>{if(or==null)Ht.forEach(rr);else{let lr=Ht.get(or);lr&&rr(lr)}Jt()},nr=()=>{Tt-=Dt.length,Dt=[]},ir=or=>{var lr,cr;let{toastId:dr,updateId:ur}=or.props,pr=ur==null;or.staleId&&Ht.delete(or.staleId),or.isActive=!0,Ht.set(dr,or),Jt(),$t(J$2(or,pr?"added":"updated")),pr&&((cr=(lr=or.props).onOpen)==null||cr.call(lr))};return{id:et,props:Ut,observe:Yt,toggle:er,removeToast:sr,toasts:Ht,clearQueue:nr,buildToast:(or,lr)=>{if(Zt(lr))return;let{toastId:cr,updateId:dr,data:ur,staleId:pr,delay:mr}=lr,jr=dr==null;jr&&Tt++;let Rr={...Ut,style:Ut.toastStyle,key:kt++,...Object.fromEntries(Object.entries(lr).filter(([kr,Mr])=>Mr!=null)),toastId:cr,updateId:dr,data:ur,isIn:!1,className:B$4(lr.className||Ut.toastClassName),progressClassName:B$4(lr.progressClassName||Ut.progressClassName),autoClose:lr.isLoading?!1:pt(lr.autoClose,Ut.autoClose),closeToast(kr){Ht.get(cr).removalReason=kr,sr(cr)},deleteToast(){let kr=Ht.get(cr);if(kr!=null){if($t(J$2(kr,"removed")),Ht.delete(cr),Tt--,Tt<0&&(Tt=0),Dt.length>0){ir(Dt.shift());return}Jt()}}};Rr.closeButton=Ut.closeButton,lr.closeButton===!1||z$6(lr.closeButton)?Rr.closeButton=lr.closeButton:lr.closeButton===!0&&(Rr.closeButton=z$6(Ut.closeButton)?Ut.closeButton:!0);let xr={content:or,props:Rr,staleId:pr};Ut.limit&&Ut.limit>0&&Tt>Ut.limit&&jr?Dt.push(xr):L$8(mr)?setTimeout(()=>{ir(xr)},mr):ir(xr)},setProps(or){Ut=or},setToggle:(or,lr)=>{let cr=Ht.get(or);cr&&(cr.toggle=lr)},isToastActive:or=>{var lr;return(lr=Ht.get(or))==null?void 0:lr.isActive},getSnapshot:()=>Ft}}var I$3=new Map,F$3=[],st=new Set,Vt=et=>st.forEach(dt=>dt(et)),bt=()=>I$3.size>0;function Qt(){F$3.forEach(et=>nt(et.content,et.options)),F$3=[]}var vt$1=(et,{containerId:dt})=>{var $t;return($t=I$3.get(dt||1))==null?void 0:$t.toasts.get(et)};function X$6(et,dt){var $t;if(dt)return!!(($t=I$3.get(dt))!=null&&$t.isToastActive(et));let kt=!1;return I$3.forEach(Tt=>{Tt.isToastActive(et)&&(kt=!0)}),kt}function ht$1(et){if(!bt()){F$3=F$3.filter(dt=>et!=null&&dt.options.toastId!==et);return}if(et==null||mt$1(et))I$3.forEach(dt=>{dt.removeToast(et)});else if(et&&("containerId"in et||"id"in et)){let dt=I$3.get(et.containerId);dt?dt.removeToast(et.id):I$3.forEach($t=>{$t.removeToast(et.id)})}}var Ct=(et={})=>{I$3.forEach(dt=>{dt.props.limit&&(!et.containerId||dt.id===et.containerId)&&dt.clearQueue()})};function nt(et,dt){z$6(et)&&(bt()||F$3.push({content:et,options:dt}),I$3.forEach($t=>{$t.buildToast(et,dt)}))}function xt$1(et){var dt;(dt=I$3.get(et.containerId||1))==null||dt.setToggle(et.id,et.fn)}function rt$1(et,dt){I$3.forEach($t=>{(dt==null||!(dt!=null&&dt.containerId)||(dt==null?void 0:dt.containerId)===$t.id)&&$t.toggle(et,dt==null?void 0:dt.id)})}function Et(et){let dt=et.containerId||1;return{subscribe($t){let kt=_t$1(dt,et,Vt);I$3.set(dt,kt);let Tt=kt.observe($t);return Qt(),()=>{Tt(),I$3.delete(dt)}},setProps($t){var kt;(kt=I$3.get(dt))==null||kt.setProps($t)},getSnapshot(){var $t;return($t=I$3.get(dt))==null?void 0:$t.getSnapshot()}}}function Pt$1(et){return st.add(et),()=>{st.delete(et)}}function Wt(et){return et&&(N$2(et.toastId)||L$8(et.toastId))?et.toastId:at$1()}function U$4(et,dt){return nt(et,dt),dt.toastId}function V$2(et,dt){return{...dt,type:dt&&dt.type||et,toastId:Wt(dt)}}function Q$3(et){return(dt,$t)=>U$4(dt,V$2(et,$t))}function y$4(et,dt){return U$4(et,V$2("default",dt))}y$4.loading=(et,dt)=>U$4(et,V$2("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...dt}));function Gt(et,{pending:dt,error:$t,success:kt},Tt){let Dt;dt&&(Dt=N$2(dt)?y$4.loading(dt,Tt):y$4.loading(dt.render,{...Tt,...dt}));let Ft={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},Ut=(Kt,Yt,Jt)=>{if(Yt==null){y$4.dismiss(Dt);return}let Zt={type:Kt,...Ft,...Tt,data:Jt},er=N$2(Yt)?{render:Yt}:Yt;return Dt?y$4.update(Dt,{...Zt,...er}):y$4(er.render,{...Zt,...er}),Jt},Ht=P$5(et)?et():et;return Ht.then(Kt=>Ut("success",kt,Kt)).catch(Kt=>Ut("error",$t,Kt)),Ht}y$4.promise=Gt;y$4.success=Q$3("success");y$4.info=Q$3("info");y$4.error=Q$3("error");y$4.warning=Q$3("warning");y$4.warn=y$4.warning;y$4.dark=(et,dt)=>U$4(et,V$2("default",{theme:"dark",...dt}));function qt(et){ht$1(et)}y$4.dismiss=qt;y$4.clearWaitingQueue=Ct;y$4.isActive=X$6;y$4.update=(et,dt={})=>{let $t=vt$1(et,dt);if($t){let{props:kt,content:Tt}=$t,Dt={delay:100,...kt,...dt,toastId:dt.toastId||et,updateId:at$1()};Dt.toastId!==et&&(Dt.staleId=et);let Ft=Dt.render||Tt;delete Dt.render,U$4(Ft,Dt)}};y$4.done=et=>{y$4.update(et,{progress:1})};y$4.onChange=Pt$1;y$4.play=et=>rt$1(!0,et);y$4.pause=et=>rt$1(!1,et);function It$1(et){var dt;let{subscribe:$t,getSnapshot:kt,setProps:Tt}=reactExports.useRef(Et(et)).current;Tt(et);let Dt=(dt=reactExports.useSyncExternalStore($t,kt,kt))==null?void 0:dt.slice();function Ft(Ut){if(!Dt)return[];let Ht=new Map;return et.newestOnTop&&Dt.reverse(),Dt.forEach(Kt=>{let{position:Yt}=Kt.props;Ht.has(Yt)||Ht.set(Yt,[]),Ht.get(Yt).push(Kt)}),Array.from(Ht,Kt=>Ut(Kt[0],Kt[1]))}return{getToastToRender:Ft,isToastActive:X$6,count:Dt==null?void 0:Dt.length}}function At(et){let[dt,$t]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(!1),Dt=reactExports.useRef(null),Ft=reactExports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:Ut,pauseOnHover:Ht,closeToast:Kt,onClick:Yt,closeOnClick:Jt}=et;xt$1({id:et.toastId,containerId:et.containerId,fn:$t}),reactExports.useEffect(()=>{if(et.pauseOnFocusLoss)return Zt(),()=>{er()}},[et.pauseOnFocusLoss]);function Zt(){document.hasFocus()||ir(),window.addEventListener("focus",nr),window.addEventListener("blur",ir)}function er(){window.removeEventListener("focus",nr),window.removeEventListener("blur",ir)}function rr(pr){if(et.draggable===!0||et.draggable===pr.pointerType){or();let mr=Dt.current;Ft.canCloseOnClick=!0,Ft.canDrag=!0,mr.style.transition="none",et.draggableDirection==="x"?(Ft.start=pr.clientX,Ft.removalDistance=mr.offsetWidth*(et.draggablePercent/100)):(Ft.start=pr.clientY,Ft.removalDistance=mr.offsetHeight*(et.draggablePercent===80?et.draggablePercent*1.5:et.draggablePercent)/100)}}function sr(pr){let{top:mr,bottom:jr,left:Rr,right:xr}=Dt.current.getBoundingClientRect();pr.nativeEvent.type!=="touchend"&&et.pauseOnHover&&pr.clientX>=Rr&&pr.clientX<=xr&&pr.clientY>=mr&&pr.clientY<=jr?ir():nr()}function nr(){$t(!0)}function ir(){$t(!1)}function or(){Ft.didMove=!1,document.addEventListener("pointermove",cr),document.addEventListener("pointerup",dr)}function lr(){document.removeEventListener("pointermove",cr),document.removeEventListener("pointerup",dr)}function cr(pr){let mr=Dt.current;if(Ft.canDrag&&mr){Ft.didMove=!0,dt&&ir(),et.draggableDirection==="x"?Ft.delta=pr.clientX-Ft.start:Ft.delta=pr.clientY-Ft.start,Ft.start!==pr.clientX&&(Ft.canCloseOnClick=!1);let jr=et.draggableDirection==="x"?`${Ft.delta}px, var(--y)`:`0, calc(${Ft.delta}px + var(--y))`;mr.style.transform=`translate3d(${jr},0)`,mr.style.opacity=`${1-Math.abs(Ft.delta/Ft.removalDistance)}`}}function dr(){lr();let pr=Dt.current;if(Ft.canDrag&&Ft.didMove&&pr){if(Ft.canDrag=!1,Math.abs(Ft.delta)>Ft.removalDistance){Tt(!0),et.closeToast(!0),et.collapseAll();return}pr.style.transition="transform 0.2s, opacity 0.2s",pr.style.removeProperty("transform"),pr.style.removeProperty("opacity")}}let ur={onPointerDown:rr,onPointerUp:sr};return Ut&&Ht&&(ur.onMouseEnter=ir,et.stacked||(ur.onMouseLeave=nr)),Jt&&(ur.onClick=pr=>{Yt&&Yt(pr),Ft.canCloseOnClick&&Kt(!0)}),{playToast:nr,pauseToast:ir,isRunning:dt,preventExitTransition:kt,toastRef:Dt,eventHandlers:ur}}var Ot$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,G$2=({theme:et,type:dt,isLoading:$t,...kt})=>React$2.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:et==="colored"?"currentColor":`var(--toastify-icon-color-${dt})`,...kt});function ao(et){return React$2.createElement(G$2,{...et},React$2.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(et){return React$2.createElement(G$2,{...et},React$2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(et){return React$2.createElement(G$2,{...et},React$2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(et){return React$2.createElement(G$2,{...et},React$2.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React$2.createElement("div",{className:"Toastify__spinner"})}var W$7={info:so,warning:ao,success:no,error:ro,spinner:io},lo=et=>et in W$7;function Nt({theme:et,type:dt,isLoading:$t,icon:kt}){let Tt=null,Dt={theme:et,type:dt};return kt===!1||(P$5(kt)?Tt=kt({...Dt,isLoading:$t}):reactExports.isValidElement(kt)?Tt=reactExports.cloneElement(kt,Dt):$t?Tt=W$7.spinner():lo(dt)&&(Tt=W$7[dt](Dt))),Tt}var wt$1=et=>{let{isRunning:dt,preventExitTransition:$t,toastRef:kt,eventHandlers:Tt,playToast:Dt}=At(et),{closeButton:Ft,children:Ut,autoClose:Ht,onClick:Kt,type:Yt,hideProgressBar:Jt,closeToast:Zt,transition:er,position:rr,className:sr,style:nr,progressClassName:ir,updateId:or,role:lr,progress:cr,rtl:dr,toastId:ur,deleteToast:pr,isIn:mr,isLoading:jr,closeOnClick:Rr,theme:xr,ariaLabel:kr}=et,Mr=clsx("Toastify__toast",`Toastify__toast-theme--${xr}`,`Toastify__toast--${Yt}`,{"Toastify__toast--rtl":dr},{"Toastify__toast--close-on-click":Rr}),Tr=P$5(sr)?sr({rtl:dr,position:rr,type:Yt,defaultClassName:Mr}):clsx(Mr,sr),Or=Nt(et),_r=!!cr||!Ht,Pr={closeToast:Zt,type:Yt,theme:xr},br=null;return Ft===!1||(P$5(Ft)?br=Ft(Pr):reactExports.isValidElement(Ft)?br=reactExports.cloneElement(Ft,Pr):br=yt(Pr)),React$2.createElement(er,{isIn:mr,done:pr,position:rr,preventExitTransition:$t,nodeRef:kt,playToast:Dt},React$2.createElement("div",{id:ur,tabIndex:0,onClick:Kt,"data-in":mr,className:Tr,...Tt,style:nr,ref:kt,...mr&&{role:lr,"aria-label":kr}},Or!=null&&React$2.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!jr})},Or),tt$2(Ut,et,!dt),br,!et.customProgressBar&&React$2.createElement(gt$1,{...or&&!_r?{key:`p-${or}`}:{},rtl:dr,theme:xr,delay:Ht,isRunning:dt,isIn:mr,closeToast:Zt,hide:Jt,type:Yt,className:ir,controlledProgress:_r,progress:cr||0})))},K$3=(et,dt=!1)=>({enter:`Toastify--animate Toastify__${et}-enter`,exit:`Toastify--animate Toastify__${et}-exit`,appendPosition:dt}),lt=$$3(K$3("bounce",!0)),_o={position:"top-right",transition:lt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:et=>et.altKey&&et.code==="KeyT"};function Lt$1(et){let dt={..._o,...et},$t=et.stacked,[kt,Tt]=reactExports.useState(!0),Dt=reactExports.useRef(null),{getToastToRender:Ft,isToastActive:Ut,count:Ht}=It$1(dt),{className:Kt,style:Yt,rtl:Jt,containerId:Zt,hotKeys:er}=dt;function rr(nr){let ir=clsx("Toastify__toast-container",`Toastify__toast-container--${nr}`,{"Toastify__toast-container--rtl":Jt});return P$5(Kt)?Kt({position:nr,rtl:Jt,defaultClassName:ir}):clsx(ir,B$4(Kt))}function sr(){$t&&(Tt(!0),y$4.play())}return Ot$1(()=>{var nr;if($t){let ir=Dt.current.querySelectorAll('[data-in="true"]'),or=12,lr=(nr=dt.position)==null?void 0:nr.includes("top"),cr=0,dr=0;Array.from(ir).reverse().forEach((ur,pr)=>{let mr=ur;mr.classList.add("Toastify__toast--stacked"),pr>0&&(mr.dataset.collapsed=`${kt}`),mr.dataset.pos||(mr.dataset.pos=lr?"top":"bot");let jr=cr*(kt?.2:1)+(kt?0:or*pr);mr.style.setProperty("--y",`${lr?jr:jr*-1}px`),mr.style.setProperty("--g",`${or}`),mr.style.setProperty("--s",`${1-(kt?dr:0)}`),cr+=mr.offsetHeight,dr+=.025})}},[kt,Ht,$t]),reactExports.useEffect(()=>{function nr(ir){var or;let lr=Dt.current;er(ir)&&((or=lr.querySelector('[tabIndex="0"]'))==null||or.focus(),Tt(!1),y$4.pause()),ir.key==="Escape"&&(document.activeElement===lr||lr!=null&&lr.contains(document.activeElement))&&(Tt(!0),y$4.play())}return document.addEventListener("keydown",nr),()=>{document.removeEventListener("keydown",nr)}},[er]),React$2.createElement("section",{ref:Dt,className:"Toastify",id:Zt,onMouseEnter:()=>{$t&&(Tt(!1),y$4.pause())},onMouseLeave:sr,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":dt["aria-label"]},Ft((nr,ir)=>{let or=ir.length?{...Yt}:{...Yt,pointerEvents:"none"};return React$2.createElement("div",{tabIndex:-1,className:rr(nr),"data-stacked":$t,style:or,key:`c-${nr}`},ir.map(({content:lr,props:cr})=>React$2.createElement(wt$1,{...cr,stacked:$t,collapseAll:sr,isIn:Ut(cr.toastId,cr.containerId),key:`t-${cr.key}`},lr)))}))}const BASE_URL$1="https://themessyattic.com/api";let refreshInFlight=!1,refreshPromise=null;function isTokenExpired(et){try{return JSON.parse(atob(et.split(".")[1])).exp*1e3<Date.now()}catch{return!0}}async function refreshAccessToken(){if(refreshInFlight)return refreshPromise;const et=localStorage.getItem("refreshToken");return et?(refreshInFlight=!0,refreshPromise=(async()=>{try{const dt=await axios$1.post(`${BASE_URL$1}/auth/refresh`,{token:et}),{accessToken:$t,refreshToken:kt}=dt.data;return localStorage.setItem("accessToken",$t),kt&&localStorage.setItem("refreshToken",kt),$t}catch(dt){throw localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),dt}finally{refreshInFlight=!1,refreshPromise=null}})(),refreshPromise):null}const BASE_URL="https://themessyattic.com/api",axiosInstance=axios$1.create({baseURL:BASE_URL,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});axiosInstance.interceptors.request.use(async et=>{let dt=localStorage.getItem("accessToken");return dt&&isTokenExpired(dt)&&(dt=await refreshAccessToken()),dt&&(et.headers.Authorization=`Bearer ${dt}`),et});axiosInstance.interceptors.response.use(et=>et,et=>{var dt,$t;return(((dt=et.response)==null?void 0:dt.status)===401||(($t=et.response)==null?void 0:$t.status)===403)&&(y$4.warning("Your session expired. Please log in again."),localStorage.clear(),window.location.href="/"),Promise.reject(et)});axiosInstance.interceptors.response.use(et=>et,async et=>{var dt;if(((dt=et.response)==null?void 0:dt.status)===401)try{await refreshAccessToken(),window.location.reload()}catch{localStorage.clear(),window.location.href="/"}return Promise.reject(et)});const AuthContext=reactExports.createContext();function applyTheme(et){et&&(document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(et),localStorage.setItem("theme",et))}function AuthProvider({children:et}){const dt=useNavigate(),[$t,kt]=reactExports.useState(null),[Tt,Dt]=reactExports.useState(null),[Ft,Ut]=reactExports.useState(!0);function Ht(rr){if(!rr)return null;const sr=new Date,nr=rr.free_trial_expires_at&&new Date(rr.free_trial_expires_at)<sr;return{...rr,theme:rr.theme||"dark",isFreeTier:rr.has_free_magnet===1&&rr.magnet_slots===1,trialExpired:nr}}function Kt(rr,sr,nr){const ir=Ht(rr);kt(ir),Dt(sr),applyTheme(ir.theme),localStorage.setItem("user",JSON.stringify(ir)),localStorage.setItem("accessToken",sr),nr&&localStorage.setItem("refreshToken",nr)}async function Yt(rr,sr){try{const ir=(await axiosInstance.post("/auth/login",{email:rr,password:sr})).data;if(ir.requires2FA&&ir.twofaToken)return{requires2FA:!0,twofaToken:ir.twofaToken,message:ir.message};const or=ir.accessToken,lr=ir.refreshToken;if(!or)throw new Error("Missing access token from login");Dt(or),localStorage.setItem("accessToken",or),lr&&localStorage.setItem("refreshToken",lr);const cr=await axiosInstance.get("/auth/me",{headers:{Authorization:`Bearer ${or}`}}),dr=Ht(cr.data);return kt(dr),applyTheme(dr.theme),localStorage.setItem("user",JSON.stringify(dr)),{requires2FA:!1}}catch(nr){throw console.error("Login failed:",nr),nr}}function Jt(){try{axiosInstance.post("/auth/logout")}catch{}kt(null),Dt(null),localStorage.removeItem("user"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),dt("/login",{replace:!0})}async function Zt(rr){try{applyTheme(rr),await axiosInstance.post("/auth/theme",{theme:rr}),kt(sr=>{if(!sr)return sr;const nr={...sr,theme:rr};return localStorage.setItem("user",JSON.stringify(nr)),nr})}catch(sr){console.error("Failed to save theme:",sr)}}reactExports.useEffect(()=>{async function rr(){try{const sr=localStorage.getItem("user"),nr=localStorage.getItem("accessToken");if(sr){const ir=JSON.parse(sr);kt(ir),applyTheme(ir.theme)}if(nr&&Dt(nr),nr){const ir=await axiosInstance.get("/auth/me"),or=Ht(ir.data);kt(or),localStorage.setItem("user",JSON.stringify(or)),applyTheme(or.theme)}}catch(sr){console.error("Failed to restore user:",sr)}finally{Ut(!1)}}rr()},[]);async function er(){if(!localStorage.getItem("accessToken"))return null;try{const sr=await axiosInstance.get("/auth/me"),nr=Ht(sr.data);return kt(nr),localStorage.setItem("user",JSON.stringify(nr)),nr}catch(sr){return console.error("Failed to refresh user data:",sr),null}}return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:$t,setUser:kt,accessToken:Tt,authLoading:Ft,login:Yt,logout:Jt,refreshUser:er,saveAuth:Kt,updateTheme:Zt},children:et})}function useAuth(){return reactExports.useContext(AuthContext)}function AuthProviderWithRouter({children:et}){const dt=useNavigate();return jsxRuntimeExports.jsx(AuthProvider,{navigate:dt,children:et})}function PrivateRoute({children:et,role:dt}){const{user:$t,authLoading:kt}=useAuth();return kt?null:$t?dt&&!(Array.isArray(dt)?dt:[dt]).includes($t.role)?jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0}):et:jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(et,dt){module.exports=dt()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(dt){_useWebWorker=!!dt},getWebWorker=function(){return _useWebWorker},setLocationHref=function(dt){locationHref=dt},getLocationHref=function(){return locationHref};function createTag(et){return document.createElement(et)}function extendPrototype(et,dt){var $t,kt=et.length,Tt;for($t=0;$t<kt;$t+=1){Tt=et[$t].prototype;for(var Dt in Tt)Object.prototype.hasOwnProperty.call(Tt,Dt)&&(dt.prototype[Dt]=Tt[Dt])}}function getDescriptor(et,dt){return Object.getOwnPropertyDescriptor(et,dt)}function createProxyFunction(et){function dt(){}return dt.prototype=et,dt}var audioControllerFactory=function(){function et(dt){this.audios=[],this.audioFactory=dt,this._volume=1,this._isMuted=!1}return et.prototype={addAudio:function($t){this.audios.push($t)},pause:function(){var $t,kt=this.audios.length;for($t=0;$t<kt;$t+=1)this.audios[$t].pause()},resume:function(){var $t,kt=this.audios.length;for($t=0;$t<kt;$t+=1)this.audios[$t].resume()},setRate:function($t){var kt,Tt=this.audios.length;for(kt=0;kt<Tt;kt+=1)this.audios[kt].setRate($t)},createAudio:function($t){return this.audioFactory?this.audioFactory($t):window.Howl?new window.Howl({src:[$t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function($t){this.audioFactory=$t},setVolume:function($t){this._volume=$t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var $t,kt=this.audios.length;for($t=0;$t<kt;$t+=1)this.audios[$t].volume(this._volume*(this._isMuted?0:1))}},function(){return new et}}(),createTypedArray=function(){function et($t,kt){var Tt=0,Dt=[],Ft;switch($t){case"int16":case"uint8c":Ft=1;break;default:Ft=1.1;break}for(Tt=0;Tt<kt;Tt+=1)Dt.push(Ft);return Dt}function dt($t,kt){return $t==="float32"?new Float32Array(kt):$t==="int16"?new Int16Array(kt):$t==="uint8c"?new Uint8ClampedArray(kt):et($t,kt)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?dt:et}();function createSizedArray(et){return Array.apply(null,{length:et})}function _typeof$6(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function($t){return typeof $t}:_typeof$6=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_typeof$6(et)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var et=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],dt,$t=et.length;for(dt=0;dt<$t;dt+=1)BMMath[et[dt]]=Math[et[dt]]})(),BMMath.random=Math.random,BMMath.abs=function(et){var dt=_typeof$6(et);if(dt==="object"&&et.length){var $t=createSizedArray(et.length),kt,Tt=et.length;for(kt=0;kt<Tt;kt+=1)$t[kt]=Math.abs(et[kt]);return $t}return Math.abs(et)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(et){et.style.position="absolute",et.style.top=0,et.style.left=0,et.style.display="block",et.style.transformOrigin="0 0",et.style.webkitTransformOrigin="0 0",et.style.backfaceVisibility="visible",et.style.webkitBackfaceVisibility="visible",et.style.transformStyle="preserve-3d",et.style.webkitTransformStyle="preserve-3d",et.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(et,dt,$t,kt){this.type=et,this.currentTime=dt,this.totalTime=$t,this.direction=kt<0?-1:1}function BMCompleteEvent(et,dt){this.type=et,this.direction=dt<0?-1:1}function BMCompleteLoopEvent(et,dt,$t,kt){this.type=et,this.currentLoop=$t,this.totalLoops=dt,this.direction=kt<0?-1:1}function BMSegmentStartEvent(et,dt,$t){this.type=et,this.firstFrame=dt,this.totalFrames=$t}function BMDestroyEvent(et,dt){this.type=et,this.target=dt}function BMRenderFrameErrorEvent(et,dt){this.type="renderFrameError",this.nativeError=et,this.currentTime=dt}function BMConfigErrorEvent(et){this.type="configError",this.nativeError=et}var createElementID=function(){var et=0;return function(){return et+=1,idPrefix$1+"__lottie_element_"+et}}();function HSVtoRGB(et,dt,$t){var kt,Tt,Dt,Ft,Ut,Ht,Kt,Yt;switch(Ft=Math.floor(et*6),Ut=et*6-Ft,Ht=$t*(1-dt),Kt=$t*(1-Ut*dt),Yt=$t*(1-(1-Ut)*dt),Ft%6){case 0:kt=$t,Tt=Yt,Dt=Ht;break;case 1:kt=Kt,Tt=$t,Dt=Ht;break;case 2:kt=Ht,Tt=$t,Dt=Yt;break;case 3:kt=Ht,Tt=Kt,Dt=$t;break;case 4:kt=Yt,Tt=Ht,Dt=$t;break;case 5:kt=$t,Tt=Ht,Dt=Kt;break}return[kt,Tt,Dt]}function RGBtoHSV(et,dt,$t){var kt=Math.max(et,dt,$t),Tt=Math.min(et,dt,$t),Dt=kt-Tt,Ft,Ut=kt===0?0:Dt/kt,Ht=kt/255;switch(kt){case Tt:Ft=0;break;case et:Ft=dt-$t+Dt*(dt<$t?6:0),Ft/=6*Dt;break;case dt:Ft=$t-et+Dt*2,Ft/=6*Dt;break;case $t:Ft=et-dt+Dt*4,Ft/=6*Dt;break}return[Ft,Ut,Ht]}function addSaturationToRGB(et,dt){var $t=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return $t[1]+=dt,$t[1]>1?$t[1]=1:$t[1]<=0&&($t[1]=0),HSVtoRGB($t[0],$t[1],$t[2])}function addBrightnessToRGB(et,dt){var $t=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return $t[2]+=dt,$t[2]>1?$t[2]=1:$t[2]<0&&($t[2]=0),HSVtoRGB($t[0],$t[1],$t[2])}function addHueToRGB(et,dt){var $t=RGBtoHSV(et[0]*255,et[1]*255,et[2]*255);return $t[0]+=dt/360,$t[0]>1?$t[0]-=1:$t[0]<0&&($t[0]+=1),HSVtoRGB($t[0],$t[1],$t[2])}var rgbToHex=function(){var et=[],dt,$t;for(dt=0;dt<256;dt+=1)$t=dt.toString(16),et[dt]=$t.length===1?"0"+$t:$t;return function(kt,Tt,Dt){return kt<0&&(kt=0),Tt<0&&(Tt=0),Dt<0&&(Dt=0),"#"+et[kt]+et[Tt]+et[Dt]}}(),setSubframeEnabled=function(dt){subframeEnabled=!!dt},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(dt){expressionsPlugin=dt},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(dt){expressionsInterfaces=dt},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(dt){defaultCurveSegments=dt},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(dt){idPrefix$1=dt};function createNS(et){return document.createElementNS(svgNS,et)}function _typeof$5(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function($t){return typeof $t}:_typeof$5=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_typeof$5(et)}var dataManager=function(){var et=1,dt=[],$t,kt,Tt={onmessage:function(){},postMessage:function(er){$t({data:er})}},Dt={postMessage:function(er){Tt.onmessage({data:er})}};function Ft(Zt){if(window.Worker&&window.Blob&&getWebWorker()){var er=new Blob(["var _workerSelf = self; self.onmessage = ",Zt.toString()],{type:"text/javascript"}),rr=URL.createObjectURL(er);return new Worker(rr)}return $t=Zt,Tt}function Ut(){kt||(kt=Ft(function(er){function rr(){function nr(Or,_r){var Pr,br,wr=Or.length,zr,Hr,Yr,es;for(br=0;br<wr;br+=1)if(Pr=Or[br],"ks"in Pr&&!Pr.completed){if(Pr.completed=!0,Pr.hasMask){var rs=Pr.masksProperties;for(Hr=rs.length,zr=0;zr<Hr;zr+=1)if(rs[zr].pt.k.i)dr(rs[zr].pt.k);else for(es=rs[zr].pt.k.length,Yr=0;Yr<es;Yr+=1)rs[zr].pt.k[Yr].s&&dr(rs[zr].pt.k[Yr].s[0]),rs[zr].pt.k[Yr].e&&dr(rs[zr].pt.k[Yr].e[0])}Pr.ty===0?(Pr.layers=lr(Pr.refId,_r),nr(Pr.layers,_r)):Pr.ty===4?cr(Pr.shapes):Pr.ty===5&&Mr(Pr)}}function ir(Or,_r){if(Or){var Pr=0,br=Or.length;for(Pr=0;Pr<br;Pr+=1)Or[Pr].t===1&&(Or[Pr].data.layers=lr(Or[Pr].data.refId,_r),nr(Or[Pr].data.layers,_r))}}function or(Or,_r){for(var Pr=0,br=_r.length;Pr<br;){if(_r[Pr].id===Or)return _r[Pr];Pr+=1}return null}function lr(Or,_r){var Pr=or(Or,_r);return Pr?Pr.layers.__used?JSON.parse(JSON.stringify(Pr.layers)):(Pr.layers.__used=!0,Pr.layers):null}function cr(Or){var _r,Pr=Or.length,br,wr;for(_r=Pr-1;_r>=0;_r-=1)if(Or[_r].ty==="sh")if(Or[_r].ks.k.i)dr(Or[_r].ks.k);else for(wr=Or[_r].ks.k.length,br=0;br<wr;br+=1)Or[_r].ks.k[br].s&&dr(Or[_r].ks.k[br].s[0]),Or[_r].ks.k[br].e&&dr(Or[_r].ks.k[br].e[0]);else Or[_r].ty==="gr"&&cr(Or[_r].it)}function dr(Or){var _r,Pr=Or.i.length;for(_r=0;_r<Pr;_r+=1)Or.i[_r][0]+=Or.v[_r][0],Or.i[_r][1]+=Or.v[_r][1],Or.o[_r][0]+=Or.v[_r][0],Or.o[_r][1]+=Or.v[_r][1]}function ur(Or,_r){var Pr=_r?_r.split("."):[100,100,100];return Or[0]>Pr[0]?!0:Pr[0]>Or[0]?!1:Or[1]>Pr[1]?!0:Pr[1]>Or[1]?!1:Or[2]>Pr[2]?!0:Pr[2]>Or[2]?!1:null}var pr=function(){var Or=[4,4,14];function _r(br){var wr=br.t.d;br.t.d={k:[{s:wr,t:0}]}}function Pr(br){var wr,zr=br.length;for(wr=0;wr<zr;wr+=1)br[wr].ty===5&&_r(br[wr])}return function(br){if(ur(Or,br.v)&&(Pr(br.layers),br.assets)){var wr,zr=br.assets.length;for(wr=0;wr<zr;wr+=1)br.assets[wr].layers&&Pr(br.assets[wr].layers)}}}(),mr=function(){var Or=[4,7,99];return function(_r){if(_r.chars&&!ur(Or,_r.v)){var Pr,br=_r.chars.length;for(Pr=0;Pr<br;Pr+=1){var wr=_r.chars[Pr];wr.data&&wr.data.shapes&&(cr(wr.data.shapes),wr.data.ip=0,wr.data.op=99999,wr.data.st=0,wr.data.sr=1,wr.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},_r.chars[Pr].t||(wr.data.shapes.push({ty:"no"}),wr.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),jr=function(){var Or=[5,7,15];function _r(br){var wr=br.t.p;typeof wr.a=="number"&&(wr.a={a:0,k:wr.a}),typeof wr.p=="number"&&(wr.p={a:0,k:wr.p}),typeof wr.r=="number"&&(wr.r={a:0,k:wr.r})}function Pr(br){var wr,zr=br.length;for(wr=0;wr<zr;wr+=1)br[wr].ty===5&&_r(br[wr])}return function(br){if(ur(Or,br.v)&&(Pr(br.layers),br.assets)){var wr,zr=br.assets.length;for(wr=0;wr<zr;wr+=1)br.assets[wr].layers&&Pr(br.assets[wr].layers)}}}(),Rr=function(){var Or=[4,1,9];function _r(br){var wr,zr=br.length,Hr,Yr;for(wr=0;wr<zr;wr+=1)if(br[wr].ty==="gr")_r(br[wr].it);else if(br[wr].ty==="fl"||br[wr].ty==="st")if(br[wr].c.k&&br[wr].c.k[0].i)for(Yr=br[wr].c.k.length,Hr=0;Hr<Yr;Hr+=1)br[wr].c.k[Hr].s&&(br[wr].c.k[Hr].s[0]/=255,br[wr].c.k[Hr].s[1]/=255,br[wr].c.k[Hr].s[2]/=255,br[wr].c.k[Hr].s[3]/=255),br[wr].c.k[Hr].e&&(br[wr].c.k[Hr].e[0]/=255,br[wr].c.k[Hr].e[1]/=255,br[wr].c.k[Hr].e[2]/=255,br[wr].c.k[Hr].e[3]/=255);else br[wr].c.k[0]/=255,br[wr].c.k[1]/=255,br[wr].c.k[2]/=255,br[wr].c.k[3]/=255}function Pr(br){var wr,zr=br.length;for(wr=0;wr<zr;wr+=1)br[wr].ty===4&&_r(br[wr].shapes)}return function(br){if(ur(Or,br.v)&&(Pr(br.layers),br.assets)){var wr,zr=br.assets.length;for(wr=0;wr<zr;wr+=1)br.assets[wr].layers&&Pr(br.assets[wr].layers)}}}(),xr=function(){var Or=[4,4,18];function _r(br){var wr,zr=br.length,Hr,Yr;for(wr=zr-1;wr>=0;wr-=1)if(br[wr].ty==="sh")if(br[wr].ks.k.i)br[wr].ks.k.c=br[wr].closed;else for(Yr=br[wr].ks.k.length,Hr=0;Hr<Yr;Hr+=1)br[wr].ks.k[Hr].s&&(br[wr].ks.k[Hr].s[0].c=br[wr].closed),br[wr].ks.k[Hr].e&&(br[wr].ks.k[Hr].e[0].c=br[wr].closed);else br[wr].ty==="gr"&&_r(br[wr].it)}function Pr(br){var wr,zr,Hr=br.length,Yr,es,rs,Wr;for(zr=0;zr<Hr;zr+=1){if(wr=br[zr],wr.hasMask){var Xr=wr.masksProperties;for(es=Xr.length,Yr=0;Yr<es;Yr+=1)if(Xr[Yr].pt.k.i)Xr[Yr].pt.k.c=Xr[Yr].cl;else for(Wr=Xr[Yr].pt.k.length,rs=0;rs<Wr;rs+=1)Xr[Yr].pt.k[rs].s&&(Xr[Yr].pt.k[rs].s[0].c=Xr[Yr].cl),Xr[Yr].pt.k[rs].e&&(Xr[Yr].pt.k[rs].e[0].c=Xr[Yr].cl)}wr.ty===4&&_r(wr.shapes)}}return function(br){if(ur(Or,br.v)&&(Pr(br.layers),br.assets)){var wr,zr=br.assets.length;for(wr=0;wr<zr;wr+=1)br.assets[wr].layers&&Pr(br.assets[wr].layers)}}}();function kr(Or){Or.__complete||(Rr(Or),pr(Or),mr(Or),jr(Or),xr(Or),nr(Or.layers,Or.assets),ir(Or.chars,Or.assets),Or.__complete=!0)}function Mr(Or){Or.t.a.length===0&&"m"in Or.t.p}var Tr={};return Tr.completeData=kr,Tr.checkColors=Rr,Tr.checkChars=mr,Tr.checkPathProperties=jr,Tr.checkShapes=xr,Tr.completeLayers=nr,Tr}if(Dt.dataManager||(Dt.dataManager=rr()),Dt.assetLoader||(Dt.assetLoader=function(){function nr(or){var lr=or.getResponseHeader("content-type");return lr&&or.responseType==="json"&&lr.indexOf("json")!==-1||or.response&&_typeof$5(or.response)==="object"?or.response:or.response&&typeof or.response=="string"?JSON.parse(or.response):or.responseText?JSON.parse(or.responseText):null}function ir(or,lr,cr,dr){var ur,pr=new XMLHttpRequest;try{pr.responseType="json"}catch{}pr.onreadystatechange=function(){if(pr.readyState===4)if(pr.status===200)ur=nr(pr),cr(ur);else try{ur=nr(pr),cr(ur)}catch(mr){dr&&dr(mr)}};try{pr.open(["G","E","T"].join(""),or,!0)}catch{pr.open(["G","E","T"].join(""),lr+"/"+or,!0)}pr.send()}return{load:ir}}()),er.data.type==="loadAnimation")Dt.assetLoader.load(er.data.path,er.data.fullPath,function(nr){Dt.dataManager.completeData(nr),Dt.postMessage({id:er.data.id,payload:nr,status:"success"})},function(){Dt.postMessage({id:er.data.id,status:"error"})});else if(er.data.type==="complete"){var sr=er.data.animation;Dt.dataManager.completeData(sr),Dt.postMessage({id:er.data.id,payload:sr,status:"success"})}else er.data.type==="loadData"&&Dt.assetLoader.load(er.data.path,er.data.fullPath,function(nr){Dt.postMessage({id:er.data.id,payload:nr,status:"success"})},function(){Dt.postMessage({id:er.data.id,status:"error"})})}),kt.onmessage=function(Zt){var er=Zt.data,rr=er.id,sr=dt[rr];dt[rr]=null,er.status==="success"?sr.onComplete(er.payload):sr.onError&&sr.onError()})}function Ht(Zt,er){et+=1;var rr="processId_"+et;return dt[rr]={onComplete:Zt,onError:er},rr}function Kt(Zt,er,rr){Ut();var sr=Ht(er,rr);kt.postMessage({type:"loadAnimation",path:Zt,fullPath:window.location.origin+window.location.pathname,id:sr})}function Yt(Zt,er,rr){Ut();var sr=Ht(er,rr);kt.postMessage({type:"loadData",path:Zt,fullPath:window.location.origin+window.location.pathname,id:sr})}function Jt(Zt,er,rr){Ut();var sr=Ht(er,rr);kt.postMessage({type:"complete",animation:Zt,id:sr})}return{loadAnimation:Kt,loadData:Yt,completeAnimation:Jt}}(),ImagePreloader=function(){var et=function(){var ir=createTag("canvas");ir.width=1,ir.height=1;var or=ir.getContext("2d");return or.fillStyle="rgba(0,0,0,0)",or.fillRect(0,0,1,1),ir}();function dt(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function $t(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function kt(ir,or,lr){var cr="";if(ir.e)cr=ir.p;else if(or){var dr=ir.p;dr.indexOf("images/")!==-1&&(dr=dr.split("/")[1]),cr=or+dr}else cr=lr,cr+=ir.u?ir.u:"",cr+=ir.p;return cr}function Tt(ir){var or=0,lr=setInterval((function(){var cr=ir.getBBox();(cr.width||or>500)&&(this._imageLoaded(),clearInterval(lr)),or+=1}).bind(this),50)}function Dt(ir){var or=kt(ir,this.assetsPath,this.path),lr=createNS("image");isSafari?this.testImageLoaded(lr):lr.addEventListener("load",this._imageLoaded,!1),lr.addEventListener("error",(function(){cr.img=et,this._imageLoaded()}).bind(this),!1),lr.setAttributeNS("http://www.w3.org/1999/xlink","href",or),this._elementHelper.append?this._elementHelper.append(lr):this._elementHelper.appendChild(lr);var cr={img:lr,assetData:ir};return cr}function Ft(ir){var or=kt(ir,this.assetsPath,this.path),lr=createTag("img");lr.crossOrigin="anonymous",lr.addEventListener("load",this._imageLoaded,!1),lr.addEventListener("error",(function(){cr.img=et,this._imageLoaded()}).bind(this),!1),lr.src=or;var cr={img:lr,assetData:ir};return cr}function Ut(ir){var or={assetData:ir},lr=kt(ir,this.assetsPath,this.path);return dataManager.loadData(lr,(function(cr){or.img=cr,this._footageLoaded()}).bind(this),(function(){or.img={},this._footageLoaded()}).bind(this)),or}function Ht(ir,or){this.imagesLoadedCb=or;var lr,cr=ir.length;for(lr=0;lr<cr;lr+=1)ir[lr].layers||(!ir[lr].t||ir[lr].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(ir[lr]))):ir[lr].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(ir[lr]))))}function Kt(ir){this.path=ir||""}function Yt(ir){this.assetsPath=ir||""}function Jt(ir){for(var or=0,lr=this.images.length;or<lr;){if(this.images[or].assetData===ir)return this.images[or].img;or+=1}return null}function Zt(){this.imagesLoadedCb=null,this.images.length=0}function er(){return this.totalImages===this.loadedAssets}function rr(){return this.totalFootages===this.loadedFootagesCount}function sr(ir,or){ir==="svg"?(this._elementHelper=or,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function nr(){this._imageLoaded=dt.bind(this),this._footageLoaded=$t.bind(this),this.testImageLoaded=Tt.bind(this),this.createFootageData=Ut.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return nr.prototype={loadAssets:Ht,setAssetsPath:Yt,setPath:Kt,loadedImages:er,loadedFootages:rr,destroy:Zt,getAsset:Jt,createImgData:Ft,createImageData:Dt,imageLoaded:dt,footageLoaded:$t,setCacheType:sr},nr}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(dt,$t){if(this._cbs[dt])for(var kt=this._cbs[dt],Tt=0;Tt<kt.length;Tt+=1)kt[Tt]($t)},addEventListener:function(dt,$t){return this._cbs[dt]||(this._cbs[dt]=[]),this._cbs[dt].push($t),(function(){this.removeEventListener(dt,$t)}).bind(this)},removeEventListener:function(dt,$t){if(!$t)this._cbs[dt]=null;else if(this._cbs[dt]){for(var kt=0,Tt=this._cbs[dt].length;kt<Tt;)this._cbs[dt][kt]===$t&&(this._cbs[dt].splice(kt,1),kt-=1,Tt-=1),kt+=1;this._cbs[dt].length||(this._cbs[dt]=null)}}};var markerParser=function(){function et(dt){for(var $t=dt.split(`\r
`),kt={},Tt,Dt=0,Ft=0;Ft<$t.length;Ft+=1)Tt=$t[Ft].split(":"),Tt.length===2&&(kt[Tt[0]]=Tt[1].trim(),Dt+=1);if(Dt===0)throw new Error;return kt}return function(dt){for(var $t=[],kt=0;kt<dt.length;kt+=1){var Tt=dt[kt],Dt={time:Tt.tm,duration:Tt.dr};try{Dt.payload=JSON.parse(dt[kt].cm)}catch{try{Dt.payload=et(dt[kt].cm)}catch{Dt.payload={name:dt[kt].cm}}}$t.push(Dt)}return $t}}(),ProjectInterface=function(){function et(dt){this.compositions.push(dt)}return function(){function dt($t){for(var kt=0,Tt=this.compositions.length;kt<Tt;){if(this.compositions[kt].data&&this.compositions[kt].data.nm===$t)return this.compositions[kt].prepareFrame&&this.compositions[kt].data.xt&&this.compositions[kt].prepareFrame(this.currentFrame),this.compositions[kt].compInterface;kt+=1}return null}return dt.compositions=[],dt.currentFrame=0,dt.registerComposition=et,dt}}(),renderers={},registerRenderer=function(dt,$t){renderers[dt]=$t};function getRenderer(et){return renderers[et]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var et in renderers)if(renderers[et])return et;return""}function _typeof$4(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function($t){return typeof $t}:_typeof$4=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_typeof$4(et)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(et){(et.wrapper||et.container)&&(this.wrapper=et.wrapper||et.container);var dt="svg";et.animType?dt=et.animType:et.renderer&&(dt=et.renderer);var $t=getRenderer(dt);this.renderer=new $t(this,et.rendererSettings),this.imagePreloader.setCacheType(dt,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=dt,et.loop===""||et.loop===null||et.loop===void 0||et.loop===!0?this.loop=!0:et.loop===!1?this.loop=!1:this.loop=parseInt(et.loop,10),this.autoplay="autoplay"in et?et.autoplay:!0,this.name=et.name?et.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(et,"autoloadSegments")?et.autoloadSegments:!0,this.assetsPath=et.assetsPath,this.initialSegment=et.initialSegment,et.audioFactory&&this.audioController.setAudioFactory(et.audioFactory),et.animationData?this.setupAnimation(et.animationData):et.path&&(et.path.lastIndexOf("\\")!==-1?this.path=et.path.substr(0,et.path.lastIndexOf("\\")+1):this.path=et.path.substr(0,et.path.lastIndexOf("/")+1),this.fileName=et.path.substr(et.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(et.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(et){dataManager.completeAnimation(et,this.configAnimation)},AnimationItem.prototype.setData=function(et,dt){dt&&_typeof$4(dt)!=="object"&&(dt=JSON.parse(dt));var $t={wrapper:et,animationData:dt},kt=et.attributes;$t.path=kt.getNamedItem("data-animation-path")?kt.getNamedItem("data-animation-path").value:kt.getNamedItem("data-bm-path")?kt.getNamedItem("data-bm-path").value:kt.getNamedItem("bm-path")?kt.getNamedItem("bm-path").value:"",$t.animType=kt.getNamedItem("data-anim-type")?kt.getNamedItem("data-anim-type").value:kt.getNamedItem("data-bm-type")?kt.getNamedItem("data-bm-type").value:kt.getNamedItem("bm-type")?kt.getNamedItem("bm-type").value:kt.getNamedItem("data-bm-renderer")?kt.getNamedItem("data-bm-renderer").value:kt.getNamedItem("bm-renderer")?kt.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var Tt=kt.getNamedItem("data-anim-loop")?kt.getNamedItem("data-anim-loop").value:kt.getNamedItem("data-bm-loop")?kt.getNamedItem("data-bm-loop").value:kt.getNamedItem("bm-loop")?kt.getNamedItem("bm-loop").value:"";Tt==="false"?$t.loop=!1:Tt==="true"?$t.loop=!0:Tt!==""&&($t.loop=parseInt(Tt,10));var Dt=kt.getNamedItem("data-anim-autoplay")?kt.getNamedItem("data-anim-autoplay").value:kt.getNamedItem("data-bm-autoplay")?kt.getNamedItem("data-bm-autoplay").value:kt.getNamedItem("bm-autoplay")?kt.getNamedItem("bm-autoplay").value:!0;$t.autoplay=Dt!=="false",$t.name=kt.getNamedItem("data-name")?kt.getNamedItem("data-name").value:kt.getNamedItem("data-bm-name")?kt.getNamedItem("data-bm-name").value:kt.getNamedItem("bm-name")?kt.getNamedItem("bm-name").value:"";var Ft=kt.getNamedItem("data-anim-prerender")?kt.getNamedItem("data-anim-prerender").value:kt.getNamedItem("data-bm-prerender")?kt.getNamedItem("data-bm-prerender").value:kt.getNamedItem("bm-prerender")?kt.getNamedItem("bm-prerender").value:"";Ft==="false"&&($t.prerender=!1),$t.path?this.setParams($t):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(et){et.op>this.animationData.op&&(this.animationData.op=et.op,this.totalFrames=Math.floor(et.op-this.animationData.ip));var dt=this.animationData.layers,$t,kt=dt.length,Tt=et.layers,Dt,Ft=Tt.length;for(Dt=0;Dt<Ft;Dt+=1)for($t=0;$t<kt;){if(dt[$t].id===Tt[Dt].id){dt[$t]=Tt[Dt];break}$t+=1}if((et.chars||et.fonts)&&(this.renderer.globalData.fontManager.addChars(et.chars),this.renderer.globalData.fontManager.addFonts(et.fonts,this.renderer.globalData.defs)),et.assets)for(kt=et.assets.length,$t=0;$t<kt;$t+=1)this.animationData.assets.push(et.assets[$t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(et){this.animationData=et;var dt=getExpressionsPlugin();dt&&dt.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var et=this.animationData.segments;if(!et||et.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var dt=et.shift();this.timeCompleted=dt.time*this.frameRate;var $t=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData($t,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var et=this.animationData.segments;et||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(et){if(this.renderer)try{this.animationData=et,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(et),et.assets||(et.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(et.assets),this.markers=markerParser(et.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(dt){this.triggerConfigError(dt)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var et=getExpressionsPlugin();et&&et.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(et,dt){var $t=typeof et=="number"?et:void 0,kt=typeof dt=="number"?dt:void 0;this.renderer.updateContainerSize($t,kt)},AnimationItem.prototype.setSubframe=function(et){this.isSubframeEnabled=!!et},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(et){this.triggerRenderFrameError(et)}},AnimationItem.prototype.play=function(et){et&&this.name!==et||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(et){et&&this.name!==et||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(et){et&&this.name!==et||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(et){et&&this.name!==et||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(et){for(var dt,$t=0;$t<this.markers.length;$t+=1)if(dt=this.markers[$t],dt.payload&&dt.payload.name===et)return dt;return null},AnimationItem.prototype.goToAndStop=function(et,dt,$t){if(!($t&&this.name!==$t)){var kt=Number(et);if(isNaN(kt)){var Tt=this.getMarkerData(et);Tt&&this.goToAndStop(Tt.time,!0)}else dt?this.setCurrentRawFrameValue(et):this.setCurrentRawFrameValue(et*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(et,dt,$t){if(!($t&&this.name!==$t)){var kt=Number(et);if(isNaN(kt)){var Tt=this.getMarkerData(et);Tt&&(Tt.duration?this.playSegments([Tt.time,Tt.time+Tt.duration],!0):this.goToAndStop(Tt.time,!0))}else this.goToAndStop(kt,dt,$t);this.play()}},AnimationItem.prototype.advanceTime=function(et){if(!(this.isPaused===!0||this.isLoaded===!1)){var dt=this.currentRawFrame+et*this.frameModifier,$t=!1;dt>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(dt>this.totalFrames?dt%this.totalFrames:0)||($t=!0,dt=this.totalFrames-1):dt>=this.totalFrames?(this.playCount+=1,this.checkSegments(dt%this.totalFrames)||(this.setCurrentRawFrameValue(dt%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(dt):dt<0?this.checkSegments(dt%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+dt%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):($t=!0,dt=0)):this.setCurrentRawFrameValue(dt),$t&&(this.setCurrentRawFrameValue(dt),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(et,dt){this.playCount=0,et[1]<et[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=et[0]-et[1],this.timeCompleted=this.totalFrames,this.firstFrame=et[1],this.setCurrentRawFrameValue(this.totalFrames-.001-dt)):et[1]>et[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=et[1]-et[0],this.timeCompleted=this.totalFrames,this.firstFrame=et[0],this.setCurrentRawFrameValue(.001+dt)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(et,dt){var $t=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<et?$t=et:this.currentRawFrame+this.firstFrame>dt&&($t=dt-et)),this.firstFrame=et,this.totalFrames=dt-et,this.timeCompleted=this.totalFrames,$t!==-1&&this.goToAndStop($t,!0)},AnimationItem.prototype.playSegments=function(et,dt){if(dt&&(this.segments.length=0),_typeof$4(et[0])==="object"){var $t,kt=et.length;for($t=0;$t<kt;$t+=1)this.segments.push(et[$t])}else this.segments.push(et);this.segments.length&&dt&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(et){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),et&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(et){return this.segments.length?(this.adjustSegment(this.segments.shift(),et),!0):!1},AnimationItem.prototype.destroy=function(et){et&&this.name!==et||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(et){this.currentRawFrame=et,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(et){this.playSpeed=et,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(et){this.playDirection=et<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(et){this.loop=et},AnimationItem.prototype.setVolume=function(et,dt){dt&&this.name!==dt||this.audioController.setVolume(et)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(et){et&&this.name!==et||this.audioController.mute()},AnimationItem.prototype.unmute=function(et){et&&this.name!==et||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(et){var dt="";if(et.e)dt=et.p;else if(this.assetsPath){var $t=et.p;$t.indexOf("images/")!==-1&&($t=$t.split("/")[1]),dt=this.assetsPath+$t}else dt=this.path,dt+=et.u?et.u:"",dt+=et.p;return dt},AnimationItem.prototype.getAssetData=function(et){for(var dt=0,$t=this.assets.length;dt<$t;){if(et===this.assets[dt].id)return this.assets[dt];dt+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(et){return et?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(et,dt,$t){try{var kt=this.renderer.getElementByPath(et);kt.updateDocumentData(dt,$t)}catch{}},AnimationItem.prototype.trigger=function(et){if(this._cbs&&this._cbs[et])switch(et){case"enterFrame":this.triggerEvent(et,new BMEnterFrameEvent(et,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(et,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(et,new BMCompleteLoopEvent(et,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(et,new BMCompleteEvent(et,this.frameMult));break;case"segmentStart":this.triggerEvent(et,new BMSegmentStartEvent(et,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(et,new BMDestroyEvent(et,this));break;default:this.triggerEvent(et)}et==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(et,this.currentFrame,this.totalFrames,this.frameMult)),et==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(et,this.loop,this.playCount,this.frameMult)),et==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(et,this.frameMult)),et==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(et,this.firstFrame,this.totalFrames)),et==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(et,this))},AnimationItem.prototype.triggerRenderFrameError=function(et){var dt=new BMRenderFrameErrorEvent(et,this.currentFrame);this.triggerEvent("error",dt),this.onError&&this.onError.call(this,dt)},AnimationItem.prototype.triggerConfigError=function(et){var dt=new BMConfigErrorEvent(et,this.currentFrame);this.triggerEvent("error",dt),this.onError&&this.onError.call(this,dt)};var animationManager=function(){var et={},dt=[],$t=0,kt=0,Tt=0,Dt=!0,Ft=!1;function Ut(_r){for(var Pr=0,br=_r.target;Pr<kt;)dt[Pr].animation===br&&(dt.splice(Pr,1),Pr-=1,kt-=1,br.isPaused||Jt()),Pr+=1}function Ht(_r,Pr){if(!_r)return null;for(var br=0;br<kt;){if(dt[br].elem===_r&&dt[br].elem!==null)return dt[br].animation;br+=1}var wr=new AnimationItem;return Zt(wr,_r),wr.setData(_r,Pr),wr}function Kt(){var _r,Pr=dt.length,br=[];for(_r=0;_r<Pr;_r+=1)br.push(dt[_r].animation);return br}function Yt(){Tt+=1,Rr()}function Jt(){Tt-=1}function Zt(_r,Pr){_r.addEventListener("destroy",Ut),_r.addEventListener("_active",Yt),_r.addEventListener("_idle",Jt),dt.push({elem:Pr,animation:_r}),kt+=1}function er(_r){var Pr=new AnimationItem;return Zt(Pr,null),Pr.setParams(_r),Pr}function rr(_r,Pr){var br;for(br=0;br<kt;br+=1)dt[br].animation.setSpeed(_r,Pr)}function sr(_r,Pr){var br;for(br=0;br<kt;br+=1)dt[br].animation.setDirection(_r,Pr)}function nr(_r){var Pr;for(Pr=0;Pr<kt;Pr+=1)dt[Pr].animation.play(_r)}function ir(_r){var Pr=_r-$t,br;for(br=0;br<kt;br+=1)dt[br].animation.advanceTime(Pr);$t=_r,Tt&&!Ft?window.requestAnimationFrame(ir):Dt=!0}function or(_r){$t=_r,window.requestAnimationFrame(ir)}function lr(_r){var Pr;for(Pr=0;Pr<kt;Pr+=1)dt[Pr].animation.pause(_r)}function cr(_r,Pr,br){var wr;for(wr=0;wr<kt;wr+=1)dt[wr].animation.goToAndStop(_r,Pr,br)}function dr(_r){var Pr;for(Pr=0;Pr<kt;Pr+=1)dt[Pr].animation.stop(_r)}function ur(_r){var Pr;for(Pr=0;Pr<kt;Pr+=1)dt[Pr].animation.togglePause(_r)}function pr(_r){var Pr;for(Pr=kt-1;Pr>=0;Pr-=1)dt[Pr].animation.destroy(_r)}function mr(_r,Pr,br){var wr=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),zr,Hr=wr.length;for(zr=0;zr<Hr;zr+=1)br&&wr[zr].setAttribute("data-bm-type",br),Ht(wr[zr],_r);if(Pr&&Hr===0){br||(br="svg");var Yr=document.getElementsByTagName("body")[0];Yr.innerText="";var es=createTag("div");es.style.width="100%",es.style.height="100%",es.setAttribute("data-bm-type",br),Yr.appendChild(es),Ht(es,_r)}}function jr(){var _r;for(_r=0;_r<kt;_r+=1)dt[_r].animation.resize()}function Rr(){!Ft&&Tt&&Dt&&(window.requestAnimationFrame(or),Dt=!1)}function xr(){Ft=!0}function kr(){Ft=!1,Rr()}function Mr(_r,Pr){var br;for(br=0;br<kt;br+=1)dt[br].animation.setVolume(_r,Pr)}function Tr(_r){var Pr;for(Pr=0;Pr<kt;Pr+=1)dt[Pr].animation.mute(_r)}function Or(_r){var Pr;for(Pr=0;Pr<kt;Pr+=1)dt[Pr].animation.unmute(_r)}return et.registerAnimation=Ht,et.loadAnimation=er,et.setSpeed=rr,et.setDirection=sr,et.play=nr,et.pause=lr,et.stop=dr,et.togglePause=ur,et.searchAnimations=mr,et.resize=jr,et.goToAndStop=cr,et.destroy=pr,et.freeze=xr,et.unfreeze=kr,et.setVolume=Mr,et.mute=Tr,et.unmute=Or,et.getRegisteredAnimations=Kt,et}(),BezierFactory=function(){var et={};et.getBezierEasing=$t;var dt={};function $t(or,lr,cr,dr,ur){var pr=ur||("bez_"+or+"_"+lr+"_"+cr+"_"+dr).replace(/\./g,"p");if(dt[pr])return dt[pr];var mr=new ir([or,lr,cr,dr]);return dt[pr]=mr,mr}var kt=4,Tt=.001,Dt=1e-7,Ft=10,Ut=11,Ht=1/(Ut-1),Kt=typeof Float32Array=="function";function Yt(or,lr){return 1-3*lr+3*or}function Jt(or,lr){return 3*lr-6*or}function Zt(or){return 3*or}function er(or,lr,cr){return((Yt(lr,cr)*or+Jt(lr,cr))*or+Zt(lr))*or}function rr(or,lr,cr){return 3*Yt(lr,cr)*or*or+2*Jt(lr,cr)*or+Zt(lr)}function sr(or,lr,cr,dr,ur){var pr,mr,jr=0;do mr=lr+(cr-lr)/2,pr=er(mr,dr,ur)-or,pr>0?cr=mr:lr=mr;while(Math.abs(pr)>Dt&&++jr<Ft);return mr}function nr(or,lr,cr,dr){for(var ur=0;ur<kt;++ur){var pr=rr(lr,cr,dr);if(pr===0)return lr;var mr=er(lr,cr,dr)-or;lr-=mr/pr}return lr}function ir(or){this._p=or,this._mSampleValues=Kt?new Float32Array(Ut):new Array(Ut),this._precomputed=!1,this.get=this.get.bind(this)}return ir.prototype={get:function(lr){var cr=this._p[0],dr=this._p[1],ur=this._p[2],pr=this._p[3];return this._precomputed||this._precompute(),cr===dr&&ur===pr?lr:lr===0?0:lr===1?1:er(this._getTForX(lr),dr,pr)},_precompute:function(){var lr=this._p[0],cr=this._p[1],dr=this._p[2],ur=this._p[3];this._precomputed=!0,(lr!==cr||dr!==ur)&&this._calcSampleValues()},_calcSampleValues:function(){for(var lr=this._p[0],cr=this._p[2],dr=0;dr<Ut;++dr)this._mSampleValues[dr]=er(dr*Ht,lr,cr)},_getTForX:function(lr){for(var cr=this._p[0],dr=this._p[2],ur=this._mSampleValues,pr=0,mr=1,jr=Ut-1;mr!==jr&&ur[mr]<=lr;++mr)pr+=Ht;--mr;var Rr=(lr-ur[mr])/(ur[mr+1]-ur[mr]),xr=pr+Rr*Ht,kr=rr(xr,cr,dr);return kr>=Tt?nr(lr,xr,cr,dr):kr===0?xr:sr(lr,pr,pr+Ht,cr,dr)}},et}(),pooling=function(){function et(dt){return dt.concat(createSizedArray(dt.length))}return{double:et}}(),poolFactory=function(){return function(et,dt,$t){var kt=0,Tt=et,Dt=createSizedArray(Tt),Ft={newElement:Ut,release:Ht};function Ut(){var Kt;return kt?(kt-=1,Kt=Dt[kt]):Kt=dt(),Kt}function Ht(Kt){kt===Tt&&(Dt=pooling.double(Dt),Tt*=2),$t&&$t(Kt),Dt[kt]=Kt,kt+=1}return Ft}}(),bezierLengthPool=function(){function et(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,et)}(),segmentsLengthPool=function(){function et(){return{lengths:[],totalLength:0}}function dt($t){var kt,Tt=$t.lengths.length;for(kt=0;kt<Tt;kt+=1)bezierLengthPool.release($t.lengths[kt]);$t.lengths.length=0}return poolFactory(8,et,dt)}();function bezFunction(){var et=Math;function dt(Zt,er,rr,sr,nr,ir){var or=Zt*sr+er*nr+rr*ir-nr*sr-ir*Zt-rr*er;return or>-.001&&or<.001}function $t(Zt,er,rr,sr,nr,ir,or,lr,cr){if(rr===0&&ir===0&&cr===0)return dt(Zt,er,sr,nr,or,lr);var dr=et.sqrt(et.pow(sr-Zt,2)+et.pow(nr-er,2)+et.pow(ir-rr,2)),ur=et.sqrt(et.pow(or-Zt,2)+et.pow(lr-er,2)+et.pow(cr-rr,2)),pr=et.sqrt(et.pow(or-sr,2)+et.pow(lr-nr,2)+et.pow(cr-ir,2)),mr;return dr>ur?dr>pr?mr=dr-ur-pr:mr=pr-ur-dr:pr>ur?mr=pr-ur-dr:mr=ur-dr-pr,mr>-1e-4&&mr<1e-4}var kt=function(){return function(Zt,er,rr,sr){var nr=getDefaultCurveSegments(),ir,or,lr,cr,dr,ur=0,pr,mr=[],jr=[],Rr=bezierLengthPool.newElement();for(lr=rr.length,ir=0;ir<nr;ir+=1){for(dr=ir/(nr-1),pr=0,or=0;or<lr;or+=1)cr=bmPow(1-dr,3)*Zt[or]+3*bmPow(1-dr,2)*dr*rr[or]+3*(1-dr)*bmPow(dr,2)*sr[or]+bmPow(dr,3)*er[or],mr[or]=cr,jr[or]!==null&&(pr+=bmPow(mr[or]-jr[or],2)),jr[or]=mr[or];pr&&(pr=bmSqrt(pr),ur+=pr),Rr.percents[ir]=dr,Rr.lengths[ir]=ur}return Rr.addedLength=ur,Rr}}();function Tt(Zt){var er=segmentsLengthPool.newElement(),rr=Zt.c,sr=Zt.v,nr=Zt.o,ir=Zt.i,or,lr=Zt._length,cr=er.lengths,dr=0;for(or=0;or<lr-1;or+=1)cr[or]=kt(sr[or],sr[or+1],nr[or],ir[or+1]),dr+=cr[or].addedLength;return rr&&lr&&(cr[or]=kt(sr[or],sr[0],nr[or],ir[0]),dr+=cr[or].addedLength),er.totalLength=dr,er}function Dt(Zt){this.segmentLength=0,this.points=new Array(Zt)}function Ft(Zt,er){this.partialLength=Zt,this.point=er}var Ut=function(){var Zt={};return function(er,rr,sr,nr){var ir=(er[0]+"_"+er[1]+"_"+rr[0]+"_"+rr[1]+"_"+sr[0]+"_"+sr[1]+"_"+nr[0]+"_"+nr[1]).replace(/\./g,"p");if(!Zt[ir]){var or=getDefaultCurveSegments(),lr,cr,dr,ur,pr,mr=0,jr,Rr,xr=null;er.length===2&&(er[0]!==rr[0]||er[1]!==rr[1])&&dt(er[0],er[1],rr[0],rr[1],er[0]+sr[0],er[1]+sr[1])&&dt(er[0],er[1],rr[0],rr[1],rr[0]+nr[0],rr[1]+nr[1])&&(or=2);var kr=new Dt(or);for(dr=sr.length,lr=0;lr<or;lr+=1){for(Rr=createSizedArray(dr),pr=lr/(or-1),jr=0,cr=0;cr<dr;cr+=1)ur=bmPow(1-pr,3)*er[cr]+3*bmPow(1-pr,2)*pr*(er[cr]+sr[cr])+3*(1-pr)*bmPow(pr,2)*(rr[cr]+nr[cr])+bmPow(pr,3)*rr[cr],Rr[cr]=ur,xr!==null&&(jr+=bmPow(Rr[cr]-xr[cr],2));jr=bmSqrt(jr),mr+=jr,kr.points[lr]=new Ft(jr,Rr),xr=Rr}kr.segmentLength=mr,Zt[ir]=kr}return Zt[ir]}}();function Ht(Zt,er){var rr=er.percents,sr=er.lengths,nr=rr.length,ir=bmFloor((nr-1)*Zt),or=Zt*er.addedLength,lr=0;if(ir===nr-1||ir===0||or===sr[ir])return rr[ir];for(var cr=sr[ir]>or?-1:1,dr=!0;dr;)if(sr[ir]<=or&&sr[ir+1]>or?(lr=(or-sr[ir])/(sr[ir+1]-sr[ir]),dr=!1):ir+=cr,ir<0||ir>=nr-1){if(ir===nr-1)return rr[ir];dr=!1}return rr[ir]+(rr[ir+1]-rr[ir])*lr}function Kt(Zt,er,rr,sr,nr,ir){var or=Ht(nr,ir),lr=1-or,cr=et.round((lr*lr*lr*Zt[0]+(or*lr*lr+lr*or*lr+lr*lr*or)*rr[0]+(or*or*lr+lr*or*or+or*lr*or)*sr[0]+or*or*or*er[0])*1e3)/1e3,dr=et.round((lr*lr*lr*Zt[1]+(or*lr*lr+lr*or*lr+lr*lr*or)*rr[1]+(or*or*lr+lr*or*or+or*lr*or)*sr[1]+or*or*or*er[1])*1e3)/1e3;return[cr,dr]}var Yt=createTypedArray("float32",8);function Jt(Zt,er,rr,sr,nr,ir,or){nr<0?nr=0:nr>1&&(nr=1);var lr=Ht(nr,or);ir=ir>1?1:ir;var cr=Ht(ir,or),dr,ur=Zt.length,pr=1-lr,mr=1-cr,jr=pr*pr*pr,Rr=lr*pr*pr*3,xr=lr*lr*pr*3,kr=lr*lr*lr,Mr=pr*pr*mr,Tr=lr*pr*mr+pr*lr*mr+pr*pr*cr,Or=lr*lr*mr+pr*lr*cr+lr*pr*cr,_r=lr*lr*cr,Pr=pr*mr*mr,br=lr*mr*mr+pr*cr*mr+pr*mr*cr,wr=lr*cr*mr+pr*cr*cr+lr*mr*cr,zr=lr*cr*cr,Hr=mr*mr*mr,Yr=cr*mr*mr+mr*cr*mr+mr*mr*cr,es=cr*cr*mr+mr*cr*cr+cr*mr*cr,rs=cr*cr*cr;for(dr=0;dr<ur;dr+=1)Yt[dr*4]=et.round((jr*Zt[dr]+Rr*rr[dr]+xr*sr[dr]+kr*er[dr])*1e3)/1e3,Yt[dr*4+1]=et.round((Mr*Zt[dr]+Tr*rr[dr]+Or*sr[dr]+_r*er[dr])*1e3)/1e3,Yt[dr*4+2]=et.round((Pr*Zt[dr]+br*rr[dr]+wr*sr[dr]+zr*er[dr])*1e3)/1e3,Yt[dr*4+3]=et.round((Hr*Zt[dr]+Yr*rr[dr]+es*sr[dr]+rs*er[dr])*1e3)/1e3;return Yt}return{getSegmentsLength:Tt,getNewSegment:Jt,getPointInSegment:Kt,buildBezierData:Ut,pointOnLine2D:dt,pointOnLine3D:$t}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(et,dt){var $t=this.offsetTime,kt;this.propType==="multidimensional"&&(kt=createTypedArray("float32",this.pv.length));for(var Tt=dt.lastIndex,Dt=Tt,Ft=this.keyframes.length-1,Ut=!0,Ht,Kt,Yt;Ut;){if(Ht=this.keyframes[Dt],Kt=this.keyframes[Dt+1],Dt===Ft-1&&et>=Kt.t-$t){Ht.h&&(Ht=Kt),Tt=0;break}if(Kt.t-$t>et){Tt=Dt;break}Dt<Ft-1?Dt+=1:(Tt=0,Ut=!1)}Yt=this.keyframesMetadata[Dt]||{};var Jt,Zt,er,rr,sr,nr,ir=Kt.t-$t,or=Ht.t-$t,lr;if(Ht.to){Yt.bezierData||(Yt.bezierData=bez.buildBezierData(Ht.s,Kt.s||Ht.e,Ht.to,Ht.ti));var cr=Yt.bezierData;if(et>=ir||et<or){var dr=et>=ir?cr.points.length-1:0;for(Zt=cr.points[dr].point.length,Jt=0;Jt<Zt;Jt+=1)kt[Jt]=cr.points[dr].point[Jt]}else{Yt.__fnct?nr=Yt.__fnct:(nr=BezierFactory.getBezierEasing(Ht.o.x,Ht.o.y,Ht.i.x,Ht.i.y,Ht.n).get,Yt.__fnct=nr),er=nr((et-or)/(ir-or));var ur=cr.segmentLength*er,pr,mr=dt.lastFrame<et&&dt._lastKeyframeIndex===Dt?dt._lastAddedLength:0;for(sr=dt.lastFrame<et&&dt._lastKeyframeIndex===Dt?dt._lastPoint:0,Ut=!0,rr=cr.points.length;Ut;){if(mr+=cr.points[sr].partialLength,ur===0||er===0||sr===cr.points.length-1){for(Zt=cr.points[sr].point.length,Jt=0;Jt<Zt;Jt+=1)kt[Jt]=cr.points[sr].point[Jt];break}else if(ur>=mr&&ur<mr+cr.points[sr+1].partialLength){for(pr=(ur-mr)/cr.points[sr+1].partialLength,Zt=cr.points[sr].point.length,Jt=0;Jt<Zt;Jt+=1)kt[Jt]=cr.points[sr].point[Jt]+(cr.points[sr+1].point[Jt]-cr.points[sr].point[Jt])*pr;break}sr<rr-1?sr+=1:Ut=!1}dt._lastPoint=sr,dt._lastAddedLength=mr-cr.points[sr].partialLength,dt._lastKeyframeIndex=Dt}}else{var jr,Rr,xr,kr,Mr;if(Ft=Ht.s.length,lr=Kt.s||Ht.e,this.sh&&Ht.h!==1)if(et>=ir)kt[0]=lr[0],kt[1]=lr[1],kt[2]=lr[2];else if(et<=or)kt[0]=Ht.s[0],kt[1]=Ht.s[1],kt[2]=Ht.s[2];else{var Tr=createQuaternion(Ht.s),Or=createQuaternion(lr),_r=(et-or)/(ir-or);quaternionToEuler(kt,slerp(Tr,Or,_r))}else for(Dt=0;Dt<Ft;Dt+=1)Ht.h!==1&&(et>=ir?er=1:et<or?er=0:(Ht.o.x.constructor===Array?(Yt.__fnct||(Yt.__fnct=[]),Yt.__fnct[Dt]?nr=Yt.__fnct[Dt]:(jr=Ht.o.x[Dt]===void 0?Ht.o.x[0]:Ht.o.x[Dt],Rr=Ht.o.y[Dt]===void 0?Ht.o.y[0]:Ht.o.y[Dt],xr=Ht.i.x[Dt]===void 0?Ht.i.x[0]:Ht.i.x[Dt],kr=Ht.i.y[Dt]===void 0?Ht.i.y[0]:Ht.i.y[Dt],nr=BezierFactory.getBezierEasing(jr,Rr,xr,kr).get,Yt.__fnct[Dt]=nr)):Yt.__fnct?nr=Yt.__fnct:(jr=Ht.o.x,Rr=Ht.o.y,xr=Ht.i.x,kr=Ht.i.y,nr=BezierFactory.getBezierEasing(jr,Rr,xr,kr).get,Ht.keyframeMetadata=nr),er=nr((et-or)/(ir-or)))),lr=Kt.s||Ht.e,Mr=Ht.h===1?Ht.s[Dt]:Ht.s[Dt]+(lr[Dt]-Ht.s[Dt])*er,this.propType==="multidimensional"?kt[Dt]=Mr:kt=Mr}return dt.lastIndex=Tt,kt}function slerp(et,dt,$t){var kt=[],Tt=et[0],Dt=et[1],Ft=et[2],Ut=et[3],Ht=dt[0],Kt=dt[1],Yt=dt[2],Jt=dt[3],Zt,er,rr,sr,nr;return er=Tt*Ht+Dt*Kt+Ft*Yt+Ut*Jt,er<0&&(er=-er,Ht=-Ht,Kt=-Kt,Yt=-Yt,Jt=-Jt),1-er>1e-6?(Zt=Math.acos(er),rr=Math.sin(Zt),sr=Math.sin((1-$t)*Zt)/rr,nr=Math.sin($t*Zt)/rr):(sr=1-$t,nr=$t),kt[0]=sr*Tt+nr*Ht,kt[1]=sr*Dt+nr*Kt,kt[2]=sr*Ft+nr*Yt,kt[3]=sr*Ut+nr*Jt,kt}function quaternionToEuler(et,dt){var $t=dt[0],kt=dt[1],Tt=dt[2],Dt=dt[3],Ft=Math.atan2(2*kt*Dt-2*$t*Tt,1-2*kt*kt-2*Tt*Tt),Ut=Math.asin(2*$t*kt+2*Tt*Dt),Ht=Math.atan2(2*$t*Dt-2*kt*Tt,1-2*$t*$t-2*Tt*Tt);et[0]=Ft/degToRads,et[1]=Ut/degToRads,et[2]=Ht/degToRads}function createQuaternion(et){var dt=et[0]*degToRads,$t=et[1]*degToRads,kt=et[2]*degToRads,Tt=Math.cos(dt/2),Dt=Math.cos($t/2),Ft=Math.cos(kt/2),Ut=Math.sin(dt/2),Ht=Math.sin($t/2),Kt=Math.sin(kt/2),Yt=Tt*Dt*Ft-Ut*Ht*Kt,Jt=Ut*Ht*Ft+Tt*Dt*Kt,Zt=Ut*Dt*Ft+Tt*Ht*Kt,er=Tt*Ht*Ft-Ut*Dt*Kt;return[Jt,Zt,er,Yt]}function getValueAtCurrentTime(){var et=this.comp.renderedFrame-this.offsetTime,dt=this.keyframes[0].t-this.offsetTime,$t=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(et===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=$t&&et>=$t||this._caching.lastFrame<dt&&et<dt))){this._caching.lastFrame>=et&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var kt=this.interpolateValue(et,this._caching);this.pv=kt}return this._caching.lastFrame=et,this.pv}function setVValue(et){var dt;if(this.propType==="unidimensional")dt=et*this.mult,mathAbs(this.v-dt)>1e-5&&(this.v=dt,this._mdf=!0);else for(var $t=0,kt=this.v.length;$t<kt;)dt=et[$t]*this.mult,mathAbs(this.v[$t]-dt)>1e-5&&(this.v[$t]=dt,this._mdf=!0),$t+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var et,dt=this.effectsSequence.length,$t=this.kf?this.pv:this.data.k;for(et=0;et<dt;et+=1)$t=this.effectsSequence[et]($t);this.setVValue($t),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(et){this.effectsSequence.push(et),this.container.addDynamicProperty(this)}function ValueProperty(et,dt,$t,kt){this.propType="unidimensional",this.mult=$t||1,this.data=dt,this.v=$t?dt.k*$t:dt.k,this.pv=dt.k,this._mdf=!1,this.elem=et,this.container=kt,this.comp=et.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(et,dt,$t,kt){this.propType="multidimensional",this.mult=$t||1,this.data=dt,this._mdf=!1,this.elem=et,this.container=kt,this.comp=et.comp,this.k=!1,this.kf=!1,this.frameId=-1;var Tt,Dt=dt.k.length;for(this.v=createTypedArray("float32",Dt),this.pv=createTypedArray("float32",Dt),this.vel=createTypedArray("float32",Dt),Tt=0;Tt<Dt;Tt+=1)this.v[Tt]=dt.k[Tt]*this.mult,this.pv[Tt]=dt.k[Tt];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(et,dt,$t,kt){this.propType="unidimensional",this.keyframes=dt.k,this.keyframesMetadata=[],this.offsetTime=et.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=dt,this.mult=$t||1,this.elem=et,this.container=kt,this.comp=et.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(et,dt,$t,kt){this.propType="multidimensional";var Tt,Dt=dt.k.length,Ft,Ut,Ht,Kt;for(Tt=0;Tt<Dt-1;Tt+=1)dt.k[Tt].to&&dt.k[Tt].s&&dt.k[Tt+1]&&dt.k[Tt+1].s&&(Ft=dt.k[Tt].s,Ut=dt.k[Tt+1].s,Ht=dt.k[Tt].to,Kt=dt.k[Tt].ti,(Ft.length===2&&!(Ft[0]===Ut[0]&&Ft[1]===Ut[1])&&bez.pointOnLine2D(Ft[0],Ft[1],Ut[0],Ut[1],Ft[0]+Ht[0],Ft[1]+Ht[1])&&bez.pointOnLine2D(Ft[0],Ft[1],Ut[0],Ut[1],Ut[0]+Kt[0],Ut[1]+Kt[1])||Ft.length===3&&!(Ft[0]===Ut[0]&&Ft[1]===Ut[1]&&Ft[2]===Ut[2])&&bez.pointOnLine3D(Ft[0],Ft[1],Ft[2],Ut[0],Ut[1],Ut[2],Ft[0]+Ht[0],Ft[1]+Ht[1],Ft[2]+Ht[2])&&bez.pointOnLine3D(Ft[0],Ft[1],Ft[2],Ut[0],Ut[1],Ut[2],Ut[0]+Kt[0],Ut[1]+Kt[1],Ut[2]+Kt[2]))&&(dt.k[Tt].to=null,dt.k[Tt].ti=null),Ft[0]===Ut[0]&&Ft[1]===Ut[1]&&Ht[0]===0&&Ht[1]===0&&Kt[0]===0&&Kt[1]===0&&(Ft.length===2||Ft[2]===Ut[2]&&Ht[2]===0&&Kt[2]===0)&&(dt.k[Tt].to=null,dt.k[Tt].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=dt,this.keyframes=dt.k,this.keyframesMetadata=[],this.offsetTime=et.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=$t||1,this.elem=et,this.container=kt,this.comp=et.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Yt=dt.k[0].s.length;for(this.v=createTypedArray("float32",Yt),this.pv=createTypedArray("float32",Yt),Tt=0;Tt<Yt;Tt+=1)this.v[Tt]=initFrame,this.pv[Tt]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Yt)},this.addEffect=addEffect}var PropertyFactory=function(){function et($t,kt,Tt,Dt,Ft){kt.sid&&(kt=$t.globalData.slotManager.getProp(kt));var Ut;if(!kt.k.length)Ut=new ValueProperty($t,kt,Dt,Ft);else if(typeof kt.k[0]=="number")Ut=new MultiDimensionalProperty($t,kt,Dt,Ft);else switch(Tt){case 0:Ut=new KeyframedValueProperty($t,kt,Dt,Ft);break;case 1:Ut=new KeyframedMultidimensionalProperty($t,kt,Dt,Ft);break}return Ut.effectsSequence.length&&Ft.addDynamicProperty(Ut),Ut}var dt={getProp:et};return dt}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(dt){this.dynamicProperties.indexOf(dt)===-1&&(this.dynamicProperties.push(dt),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var dt,$t=this.dynamicProperties.length;for(dt=0;dt<$t;dt+=1)this.dynamicProperties[dt].getValue(),this.dynamicProperties[dt]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(dt){this.container=dt,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function et(){return createTypedArray("float32",2)}return poolFactory(8,et)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(et,dt){this.c=et,this.setLength(dt);for(var $t=0;$t<dt;)this.v[$t]=pointPool.newElement(),this.o[$t]=pointPool.newElement(),this.i[$t]=pointPool.newElement(),$t+=1},ShapePath.prototype.setLength=function(et){for(;this._maxLength<et;)this.doubleArrayLength();this._length=et},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(et,dt,$t,kt,Tt){var Dt;switch(this._length=Math.max(this._length,kt+1),this._length>=this._maxLength&&this.doubleArrayLength(),$t){case"v":Dt=this.v;break;case"i":Dt=this.i;break;case"o":Dt=this.o;break;default:Dt=[];break}(!Dt[kt]||Dt[kt]&&!Tt)&&(Dt[kt]=pointPool.newElement()),Dt[kt][0]=et,Dt[kt][1]=dt},ShapePath.prototype.setTripleAt=function(et,dt,$t,kt,Tt,Dt,Ft,Ut){this.setXYAt(et,dt,"v",Ft,Ut),this.setXYAt($t,kt,"o",Ft,Ut),this.setXYAt(Tt,Dt,"i",Ft,Ut)},ShapePath.prototype.reverse=function(){var et=new ShapePath;et.setPathData(this.c,this._length);var dt=this.v,$t=this.o,kt=this.i,Tt=0;this.c&&(et.setTripleAt(dt[0][0],dt[0][1],kt[0][0],kt[0][1],$t[0][0],$t[0][1],0,!1),Tt=1);var Dt=this._length-1,Ft=this._length,Ut;for(Ut=Tt;Ut<Ft;Ut+=1)et.setTripleAt(dt[Dt][0],dt[Dt][1],kt[Dt][0],kt[Dt][1],$t[Dt][0],$t[Dt][1],Ut,!1),Dt-=1;return et},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function et(){return new ShapePath}function dt(Tt){var Dt=Tt._length,Ft;for(Ft=0;Ft<Dt;Ft+=1)pointPool.release(Tt.v[Ft]),pointPool.release(Tt.i[Ft]),pointPool.release(Tt.o[Ft]),Tt.v[Ft]=null,Tt.i[Ft]=null,Tt.o[Ft]=null;Tt._length=0,Tt.c=!1}function $t(Tt){var Dt=kt.newElement(),Ft,Ut=Tt._length===void 0?Tt.v.length:Tt._length;for(Dt.setLength(Ut),Dt.c=Tt.c,Ft=0;Ft<Ut;Ft+=1)Dt.setTripleAt(Tt.v[Ft][0],Tt.v[Ft][1],Tt.o[Ft][0],Tt.o[Ft][1],Tt.i[Ft][0],Tt.i[Ft][1],Ft);return Dt}var kt=poolFactory(4,et,dt);return kt.clone=$t,kt}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(et){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=et,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var et;for(et=0;et<this._length;et+=1)shapePool.release(this.shapes[et]);this._length=0};var shapeCollectionPool=function(){var et={newShapeCollection:Tt,release:Dt},dt=0,$t=4,kt=createSizedArray($t);function Tt(){var Ft;return dt?(dt-=1,Ft=kt[dt]):Ft=new ShapeCollection,Ft}function Dt(Ft){var Ut,Ht=Ft._length;for(Ut=0;Ut<Ht;Ut+=1)shapePool.release(Ft.shapes[Ut]);Ft._length=0,dt===$t&&(kt=pooling.double(kt),$t*=2),kt[dt]=Ft,dt+=1}return et}(),ShapePropertyFactory=function(){var et=-999999;function dt(ir,or,lr){var cr=lr.lastIndex,dr,ur,pr,mr,jr,Rr,xr,kr,Mr,Tr=this.keyframes;if(ir<Tr[0].t-this.offsetTime)dr=Tr[0].s[0],pr=!0,cr=0;else if(ir>=Tr[Tr.length-1].t-this.offsetTime)dr=Tr[Tr.length-1].s?Tr[Tr.length-1].s[0]:Tr[Tr.length-2].e[0],pr=!0;else{for(var Or=cr,_r=Tr.length-1,Pr=!0,br,wr,zr;Pr&&(br=Tr[Or],wr=Tr[Or+1],!(wr.t-this.offsetTime>ir));)Or<_r-1?Or+=1:Pr=!1;if(zr=this.keyframesMetadata[Or]||{},pr=br.h===1,cr=Or,!pr){if(ir>=wr.t-this.offsetTime)kr=1;else if(ir<br.t-this.offsetTime)kr=0;else{var Hr;zr.__fnct?Hr=zr.__fnct:(Hr=BezierFactory.getBezierEasing(br.o.x,br.o.y,br.i.x,br.i.y).get,zr.__fnct=Hr),kr=Hr((ir-(br.t-this.offsetTime))/(wr.t-this.offsetTime-(br.t-this.offsetTime)))}ur=wr.s?wr.s[0]:br.e[0]}dr=br.s[0]}for(Rr=or._length,xr=dr.i[0].length,lr.lastIndex=cr,mr=0;mr<Rr;mr+=1)for(jr=0;jr<xr;jr+=1)Mr=pr?dr.i[mr][jr]:dr.i[mr][jr]+(ur.i[mr][jr]-dr.i[mr][jr])*kr,or.i[mr][jr]=Mr,Mr=pr?dr.o[mr][jr]:dr.o[mr][jr]+(ur.o[mr][jr]-dr.o[mr][jr])*kr,or.o[mr][jr]=Mr,Mr=pr?dr.v[mr][jr]:dr.v[mr][jr]+(ur.v[mr][jr]-dr.v[mr][jr])*kr,or.v[mr][jr]=Mr}function $t(){var ir=this.comp.renderedFrame-this.offsetTime,or=this.keyframes[0].t-this.offsetTime,lr=this.keyframes[this.keyframes.length-1].t-this.offsetTime,cr=this._caching.lastFrame;return cr!==et&&(cr<or&&ir<or||cr>lr&&ir>lr)||(this._caching.lastIndex=cr<ir?this._caching.lastIndex:0,this.interpolateShape(ir,this.pv,this._caching)),this._caching.lastFrame=ir,this.pv}function kt(){this.paths=this.localShapeCollection}function Tt(ir,or){if(ir._length!==or._length||ir.c!==or.c)return!1;var lr,cr=ir._length;for(lr=0;lr<cr;lr+=1)if(ir.v[lr][0]!==or.v[lr][0]||ir.v[lr][1]!==or.v[lr][1]||ir.o[lr][0]!==or.o[lr][0]||ir.o[lr][1]!==or.o[lr][1]||ir.i[lr][0]!==or.i[lr][0]||ir.i[lr][1]!==or.i[lr][1])return!1;return!0}function Dt(ir){Tt(this.v,ir)||(this.v=shapePool.clone(ir),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function Ft(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var ir;this.kf?ir=this.pv:this.data.ks?ir=this.data.ks.k:ir=this.data.pt.k;var or,lr=this.effectsSequence.length;for(or=0;or<lr;or+=1)ir=this.effectsSequence[or](ir);this.setVValue(ir),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function Ut(ir,or,lr){this.propType="shape",this.comp=ir.comp,this.container=ir,this.elem=ir,this.data=or,this.k=!1,this.kf=!1,this._mdf=!1;var cr=lr===3?or.pt.k:or.ks.k;this.v=shapePool.clone(cr),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=kt,this.effectsSequence=[]}function Ht(ir){this.effectsSequence.push(ir),this.container.addDynamicProperty(this)}Ut.prototype.interpolateShape=dt,Ut.prototype.getValue=Ft,Ut.prototype.setVValue=Dt,Ut.prototype.addEffect=Ht;function Kt(ir,or,lr){this.propType="shape",this.comp=ir.comp,this.elem=ir,this.container=ir,this.offsetTime=ir.data.st,this.keyframes=lr===3?or.pt.k:or.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var cr=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,cr),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=et,this.reset=kt,this._caching={lastFrame:et,lastIndex:0},this.effectsSequence=[$t.bind(this)]}Kt.prototype.getValue=Ft,Kt.prototype.interpolateShape=dt,Kt.prototype.setVValue=Dt,Kt.prototype.addEffect=Ht;var Yt=function(){var ir=roundCorner;function or(lr,cr){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=cr.d,this.elem=lr,this.comp=lr.comp,this.frameId=-1,this.initDynamicPropertyContainer(lr),this.p=PropertyFactory.getProp(lr,cr.p,1,0,this),this.s=PropertyFactory.getProp(lr,cr.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return or.prototype={reset:kt,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var cr=this.p.v[0],dr=this.p.v[1],ur=this.s.v[0]/2,pr=this.s.v[1]/2,mr=this.d!==3,jr=this.v;jr.v[0][0]=cr,jr.v[0][1]=dr-pr,jr.v[1][0]=mr?cr+ur:cr-ur,jr.v[1][1]=dr,jr.v[2][0]=cr,jr.v[2][1]=dr+pr,jr.v[3][0]=mr?cr-ur:cr+ur,jr.v[3][1]=dr,jr.i[0][0]=mr?cr-ur*ir:cr+ur*ir,jr.i[0][1]=dr-pr,jr.i[1][0]=mr?cr+ur:cr-ur,jr.i[1][1]=dr-pr*ir,jr.i[2][0]=mr?cr+ur*ir:cr-ur*ir,jr.i[2][1]=dr+pr,jr.i[3][0]=mr?cr-ur:cr+ur,jr.i[3][1]=dr+pr*ir,jr.o[0][0]=mr?cr+ur*ir:cr-ur*ir,jr.o[0][1]=dr-pr,jr.o[1][0]=mr?cr+ur:cr-ur,jr.o[1][1]=dr+pr*ir,jr.o[2][0]=mr?cr-ur*ir:cr+ur*ir,jr.o[2][1]=dr+pr,jr.o[3][0]=mr?cr-ur:cr+ur,jr.o[3][1]=dr-pr*ir}},extendPrototype([DynamicPropertyContainer],or),or}(),Jt=function(){function ir(or,lr){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=or,this.comp=or.comp,this.data=lr,this.frameId=-1,this.d=lr.d,this.initDynamicPropertyContainer(or),lr.sy===1?(this.ir=PropertyFactory.getProp(or,lr.ir,0,0,this),this.is=PropertyFactory.getProp(or,lr.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(or,lr.pt,0,0,this),this.p=PropertyFactory.getProp(or,lr.p,1,0,this),this.r=PropertyFactory.getProp(or,lr.r,0,degToRads,this),this.or=PropertyFactory.getProp(or,lr.or,0,0,this),this.os=PropertyFactory.getProp(or,lr.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return ir.prototype={reset:kt,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var lr=Math.floor(this.pt.v)*2,cr=Math.PI*2/lr,dr=!0,ur=this.or.v,pr=this.ir.v,mr=this.os.v,jr=this.is.v,Rr=2*Math.PI*ur/(lr*2),xr=2*Math.PI*pr/(lr*2),kr,Mr,Tr,Or,_r=-Math.PI/2;_r+=this.r.v;var Pr=this.data.d===3?-1:1;for(this.v._length=0,kr=0;kr<lr;kr+=1){Mr=dr?ur:pr,Tr=dr?mr:jr,Or=dr?Rr:xr;var br=Mr*Math.cos(_r),wr=Mr*Math.sin(_r),zr=br===0&&wr===0?0:wr/Math.sqrt(br*br+wr*wr),Hr=br===0&&wr===0?0:-br/Math.sqrt(br*br+wr*wr);br+=+this.p.v[0],wr+=+this.p.v[1],this.v.setTripleAt(br,wr,br-zr*Or*Tr*Pr,wr-Hr*Or*Tr*Pr,br+zr*Or*Tr*Pr,wr+Hr*Or*Tr*Pr,kr,!0),dr=!dr,_r+=cr*Pr}},convertPolygonToPath:function(){var lr=Math.floor(this.pt.v),cr=Math.PI*2/lr,dr=this.or.v,ur=this.os.v,pr=2*Math.PI*dr/(lr*4),mr,jr=-Math.PI*.5,Rr=this.data.d===3?-1:1;for(jr+=this.r.v,this.v._length=0,mr=0;mr<lr;mr+=1){var xr=dr*Math.cos(jr),kr=dr*Math.sin(jr),Mr=xr===0&&kr===0?0:kr/Math.sqrt(xr*xr+kr*kr),Tr=xr===0&&kr===0?0:-xr/Math.sqrt(xr*xr+kr*kr);xr+=+this.p.v[0],kr+=+this.p.v[1],this.v.setTripleAt(xr,kr,xr-Mr*pr*ur*Rr,kr-Tr*pr*ur*Rr,xr+Mr*pr*ur*Rr,kr+Tr*pr*ur*Rr,mr,!0),jr+=cr*Rr}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],ir),ir}(),Zt=function(){function ir(or,lr){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=or,this.comp=or.comp,this.frameId=-1,this.d=lr.d,this.initDynamicPropertyContainer(or),this.p=PropertyFactory.getProp(or,lr.p,1,0,this),this.s=PropertyFactory.getProp(or,lr.s,1,0,this),this.r=PropertyFactory.getProp(or,lr.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return ir.prototype={convertRectToPath:function(){var lr=this.p.v[0],cr=this.p.v[1],dr=this.s.v[0]/2,ur=this.s.v[1]/2,pr=bmMin(dr,ur,this.r.v),mr=pr*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(lr+dr,cr-ur+pr,lr+dr,cr-ur+pr,lr+dr,cr-ur+mr,0,!0),this.v.setTripleAt(lr+dr,cr+ur-pr,lr+dr,cr+ur-mr,lr+dr,cr+ur-pr,1,!0),pr!==0?(this.v.setTripleAt(lr+dr-pr,cr+ur,lr+dr-pr,cr+ur,lr+dr-mr,cr+ur,2,!0),this.v.setTripleAt(lr-dr+pr,cr+ur,lr-dr+mr,cr+ur,lr-dr+pr,cr+ur,3,!0),this.v.setTripleAt(lr-dr,cr+ur-pr,lr-dr,cr+ur-pr,lr-dr,cr+ur-mr,4,!0),this.v.setTripleAt(lr-dr,cr-ur+pr,lr-dr,cr-ur+mr,lr-dr,cr-ur+pr,5,!0),this.v.setTripleAt(lr-dr+pr,cr-ur,lr-dr+pr,cr-ur,lr-dr+mr,cr-ur,6,!0),this.v.setTripleAt(lr+dr-pr,cr-ur,lr+dr-mr,cr-ur,lr+dr-pr,cr-ur,7,!0)):(this.v.setTripleAt(lr-dr,cr+ur,lr-dr+mr,cr+ur,lr-dr,cr+ur,2),this.v.setTripleAt(lr-dr,cr-ur,lr-dr,cr-ur+mr,lr-dr,cr-ur,3))):(this.v.setTripleAt(lr+dr,cr-ur+pr,lr+dr,cr-ur+mr,lr+dr,cr-ur+pr,0,!0),pr!==0?(this.v.setTripleAt(lr+dr-pr,cr-ur,lr+dr-pr,cr-ur,lr+dr-mr,cr-ur,1,!0),this.v.setTripleAt(lr-dr+pr,cr-ur,lr-dr+mr,cr-ur,lr-dr+pr,cr-ur,2,!0),this.v.setTripleAt(lr-dr,cr-ur+pr,lr-dr,cr-ur+pr,lr-dr,cr-ur+mr,3,!0),this.v.setTripleAt(lr-dr,cr+ur-pr,lr-dr,cr+ur-mr,lr-dr,cr+ur-pr,4,!0),this.v.setTripleAt(lr-dr+pr,cr+ur,lr-dr+pr,cr+ur,lr-dr+mr,cr+ur,5,!0),this.v.setTripleAt(lr+dr-pr,cr+ur,lr+dr-mr,cr+ur,lr+dr-pr,cr+ur,6,!0),this.v.setTripleAt(lr+dr,cr+ur-pr,lr+dr,cr+ur-pr,lr+dr,cr+ur-mr,7,!0)):(this.v.setTripleAt(lr-dr,cr-ur,lr-dr+mr,cr-ur,lr-dr,cr-ur,1,!0),this.v.setTripleAt(lr-dr,cr+ur,lr-dr,cr+ur-mr,lr-dr,cr+ur,2,!0),this.v.setTripleAt(lr+dr,cr+ur,lr+dr-mr,cr+ur,lr+dr,cr+ur,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:kt},extendPrototype([DynamicPropertyContainer],ir),ir}();function er(ir,or,lr){var cr;if(lr===3||lr===4){var dr=lr===3?or.pt:or.ks,ur=dr.k;ur.length?cr=new Kt(ir,or,lr):cr=new Ut(ir,or,lr)}else lr===5?cr=new Zt(ir,or):lr===6?cr=new Yt(ir,or):lr===7&&(cr=new Jt(ir,or));return cr.k&&ir.addDynamicProperty(cr),cr}function rr(){return Ut}function sr(){return Kt}var nr={};return nr.getShapeProp=er,nr.getConstructorFunction=rr,nr.getKeyframedConstructorFunction=sr,nr}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var et=Math.cos,dt=Math.sin,$t=Math.tan,kt=Math.round;function Tt(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function Dt(br){if(br===0)return this;var wr=et(br),zr=dt(br);return this._t(wr,-zr,0,0,zr,wr,0,0,0,0,1,0,0,0,0,1)}function Ft(br){if(br===0)return this;var wr=et(br),zr=dt(br);return this._t(1,0,0,0,0,wr,-zr,0,0,zr,wr,0,0,0,0,1)}function Ut(br){if(br===0)return this;var wr=et(br),zr=dt(br);return this._t(wr,0,zr,0,0,1,0,0,-zr,0,wr,0,0,0,0,1)}function Ht(br){if(br===0)return this;var wr=et(br),zr=dt(br);return this._t(wr,-zr,0,0,zr,wr,0,0,0,0,1,0,0,0,0,1)}function Kt(br,wr){return this._t(1,wr,br,1,0,0)}function Yt(br,wr){return this.shear($t(br),$t(wr))}function Jt(br,wr){var zr=et(wr),Hr=dt(wr);return this._t(zr,Hr,0,0,-Hr,zr,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,$t(br),1,0,0,0,0,1,0,0,0,0,1)._t(zr,-Hr,0,0,Hr,zr,0,0,0,0,1,0,0,0,0,1)}function Zt(br,wr,zr){return!zr&&zr!==0&&(zr=1),br===1&&wr===1&&zr===1?this:this._t(br,0,0,0,0,wr,0,0,0,0,zr,0,0,0,0,1)}function er(br,wr,zr,Hr,Yr,es,rs,Wr,Xr,ns,gs,us,ps,cs,ss,fs){return this.props[0]=br,this.props[1]=wr,this.props[2]=zr,this.props[3]=Hr,this.props[4]=Yr,this.props[5]=es,this.props[6]=rs,this.props[7]=Wr,this.props[8]=Xr,this.props[9]=ns,this.props[10]=gs,this.props[11]=us,this.props[12]=ps,this.props[13]=cs,this.props[14]=ss,this.props[15]=fs,this}function rr(br,wr,zr){return zr=zr||0,br!==0||wr!==0||zr!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,br,wr,zr,1):this}function sr(br,wr,zr,Hr,Yr,es,rs,Wr,Xr,ns,gs,us,ps,cs,ss,fs){var hs=this.props;if(br===1&&wr===0&&zr===0&&Hr===0&&Yr===0&&es===1&&rs===0&&Wr===0&&Xr===0&&ns===0&&gs===1&&us===0)return hs[12]=hs[12]*br+hs[15]*ps,hs[13]=hs[13]*es+hs[15]*cs,hs[14]=hs[14]*gs+hs[15]*ss,hs[15]*=fs,this._identityCalculated=!1,this;var $s=hs[0],ks=hs[1],Ds=hs[2],_s=hs[3],As=hs[4],Ns=hs[5],Is=hs[6],zs=hs[7],Gs=hs[8],Ws=hs[9],Qs=hs[10],qs=hs[11],Bs=hs[12],Js=hs[13],Ys=hs[14],ln=hs[15];return hs[0]=$s*br+ks*Yr+Ds*Xr+_s*ps,hs[1]=$s*wr+ks*es+Ds*ns+_s*cs,hs[2]=$s*zr+ks*rs+Ds*gs+_s*ss,hs[3]=$s*Hr+ks*Wr+Ds*us+_s*fs,hs[4]=As*br+Ns*Yr+Is*Xr+zs*ps,hs[5]=As*wr+Ns*es+Is*ns+zs*cs,hs[6]=As*zr+Ns*rs+Is*gs+zs*ss,hs[7]=As*Hr+Ns*Wr+Is*us+zs*fs,hs[8]=Gs*br+Ws*Yr+Qs*Xr+qs*ps,hs[9]=Gs*wr+Ws*es+Qs*ns+qs*cs,hs[10]=Gs*zr+Ws*rs+Qs*gs+qs*ss,hs[11]=Gs*Hr+Ws*Wr+Qs*us+qs*fs,hs[12]=Bs*br+Js*Yr+Ys*Xr+ln*ps,hs[13]=Bs*wr+Js*es+Ys*ns+ln*cs,hs[14]=Bs*zr+Js*rs+Ys*gs+ln*ss,hs[15]=Bs*Hr+Js*Wr+Ys*us+ln*fs,this._identityCalculated=!1,this}function nr(br){var wr=br.props;return this.transform(wr[0],wr[1],wr[2],wr[3],wr[4],wr[5],wr[6],wr[7],wr[8],wr[9],wr[10],wr[11],wr[12],wr[13],wr[14],wr[15])}function ir(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function or(br){for(var wr=0;wr<16;){if(br.props[wr]!==this.props[wr])return!1;wr+=1}return!0}function lr(br){var wr;for(wr=0;wr<16;wr+=1)br.props[wr]=this.props[wr];return br}function cr(br){var wr;for(wr=0;wr<16;wr+=1)this.props[wr]=br[wr]}function dr(br,wr,zr){return{x:br*this.props[0]+wr*this.props[4]+zr*this.props[8]+this.props[12],y:br*this.props[1]+wr*this.props[5]+zr*this.props[9]+this.props[13],z:br*this.props[2]+wr*this.props[6]+zr*this.props[10]+this.props[14]}}function ur(br,wr,zr){return br*this.props[0]+wr*this.props[4]+zr*this.props[8]+this.props[12]}function pr(br,wr,zr){return br*this.props[1]+wr*this.props[5]+zr*this.props[9]+this.props[13]}function mr(br,wr,zr){return br*this.props[2]+wr*this.props[6]+zr*this.props[10]+this.props[14]}function jr(){var br=this.props[0]*this.props[5]-this.props[1]*this.props[4],wr=this.props[5]/br,zr=-this.props[1]/br,Hr=-this.props[4]/br,Yr=this.props[0]/br,es=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/br,rs=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/br,Wr=new Matrix;return Wr.props[0]=wr,Wr.props[1]=zr,Wr.props[4]=Hr,Wr.props[5]=Yr,Wr.props[12]=es,Wr.props[13]=rs,Wr}function Rr(br){var wr=this.getInverseMatrix();return wr.applyToPointArray(br[0],br[1],br[2]||0)}function xr(br){var wr,zr=br.length,Hr=[];for(wr=0;wr<zr;wr+=1)Hr[wr]=Rr(br[wr]);return Hr}function kr(br,wr,zr){var Hr=createTypedArray("float32",6);if(this.isIdentity())Hr[0]=br[0],Hr[1]=br[1],Hr[2]=wr[0],Hr[3]=wr[1],Hr[4]=zr[0],Hr[5]=zr[1];else{var Yr=this.props[0],es=this.props[1],rs=this.props[4],Wr=this.props[5],Xr=this.props[12],ns=this.props[13];Hr[0]=br[0]*Yr+br[1]*rs+Xr,Hr[1]=br[0]*es+br[1]*Wr+ns,Hr[2]=wr[0]*Yr+wr[1]*rs+Xr,Hr[3]=wr[0]*es+wr[1]*Wr+ns,Hr[4]=zr[0]*Yr+zr[1]*rs+Xr,Hr[5]=zr[0]*es+zr[1]*Wr+ns}return Hr}function Mr(br,wr,zr){var Hr;return this.isIdentity()?Hr=[br,wr,zr]:Hr=[br*this.props[0]+wr*this.props[4]+zr*this.props[8]+this.props[12],br*this.props[1]+wr*this.props[5]+zr*this.props[9]+this.props[13],br*this.props[2]+wr*this.props[6]+zr*this.props[10]+this.props[14]],Hr}function Tr(br,wr){if(this.isIdentity())return br+","+wr;var zr=this.props;return Math.round((br*zr[0]+wr*zr[4]+zr[12])*100)/100+","+Math.round((br*zr[1]+wr*zr[5]+zr[13])*100)/100}function Or(){for(var br=0,wr=this.props,zr="matrix3d(",Hr=1e4;br<16;)zr+=kt(wr[br]*Hr)/Hr,zr+=br===15?")":",",br+=1;return zr}function _r(br){var wr=1e4;return br<1e-6&&br>0||br>-1e-6&&br<0?kt(br*wr)/wr:br}function Pr(){var br=this.props,wr=_r(br[0]),zr=_r(br[1]),Hr=_r(br[4]),Yr=_r(br[5]),es=_r(br[12]),rs=_r(br[13]);return"matrix("+wr+","+zr+","+Hr+","+Yr+","+es+","+rs+")"}return function(){this.reset=Tt,this.rotate=Dt,this.rotateX=Ft,this.rotateY=Ut,this.rotateZ=Ht,this.skew=Yt,this.skewFromAxis=Jt,this.shear=Kt,this.scale=Zt,this.setTransform=er,this.translate=rr,this.transform=sr,this.multiply=nr,this.applyToPoint=dr,this.applyToX=ur,this.applyToY=pr,this.applyToZ=mr,this.applyToPointArray=Mr,this.applyToTriplePoints=kr,this.applyToPointStringified=Tr,this.toCSS=Or,this.to2dCSS=Pr,this.clone=lr,this.cloneFromProps=cr,this.equals=or,this.inversePoints=xr,this.inversePoint=Rr,this.getInverseMatrix=jr,this._t=this.transform,this.isIdentity=ir,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function($t){return typeof $t}:_typeof$3=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_typeof$3(et)}var lottie={};function setLocation(et){setLocationHref(et)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(et){setSubframeEnabled(et)}function setPrefix(et){setIdPrefix(et)}function loadAnimation(et){return animationManager.loadAnimation(et)}function setQuality(et){if(typeof et=="string")switch(et){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(et)&&et>1&&setDefaultCurveSegments(et)}function inBrowser(){return typeof navigator<"u"}function installPlugin(et,dt){et==="expressions"&&setExpressionsPlugin(dt)}function getFactory(et){switch(et){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(et){for(var dt=queryString.split("&"),$t=0;$t<dt.length;$t+=1){var kt=dt[$t].split("=");if(decodeURIComponent(kt[0])==et)return decodeURIComponent(kt[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(et){}var ShapeModifiers=function(){var et={},dt={};et.registerModifier=$t,et.getModifier=kt;function $t(Tt,Dt){dt[Tt]||(dt[Tt]=Dt)}function kt(Tt,Dt,Ft){return new dt[Tt](Dt,Ft)}return et}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(et){if(!this.closed){et.sh.container.addDynamicProperty(et.sh);var dt={shape:et.sh,data:et,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(dt),this.addShapeToModifier(dt),this._isAnimated&&et.setAsAnimated()}},ShapeModifier.prototype.init=function(et,dt){this.shapes=[],this.elem=et,this.initDynamicPropertyContainer(et),this.initModifierProperties(et,dt),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(et,dt){this.s=PropertyFactory.getProp(et,dt.s,0,.01,this),this.e=PropertyFactory.getProp(et,dt.e,0,.01,this),this.o=PropertyFactory.getProp(et,dt.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=dt.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(et){et.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(et,dt,$t,kt,Tt){var Dt=[];dt<=1?Dt.push({s:et,e:dt}):et>=1?Dt.push({s:et-1,e:dt-1}):(Dt.push({s:et,e:1}),Dt.push({s:0,e:dt-1}));var Ft=[],Ut,Ht=Dt.length,Kt;for(Ut=0;Ut<Ht;Ut+=1)if(Kt=Dt[Ut],!(Kt.e*Tt<kt||Kt.s*Tt>kt+$t)){var Yt,Jt;Kt.s*Tt<=kt?Yt=0:Yt=(Kt.s*Tt-kt)/$t,Kt.e*Tt>=kt+$t?Jt=1:Jt=(Kt.e*Tt-kt)/$t,Ft.push([Yt,Jt])}return Ft.length||Ft.push([0,0]),Ft},TrimModifier.prototype.releasePathsData=function(et){var dt,$t=et.length;for(dt=0;dt<$t;dt+=1)segmentsLengthPool.release(et[dt]);return et.length=0,et},TrimModifier.prototype.processShapes=function(et){var dt,$t;if(this._mdf||et){var kt=this.o.v%360/360;if(kt<0&&(kt+=1),this.s.v>1?dt=1+kt:this.s.v<0?dt=0+kt:dt=this.s.v+kt,this.e.v>1?$t=1+kt:this.e.v<0?$t=0+kt:$t=this.e.v+kt,dt>$t){var Tt=dt;dt=$t,$t=Tt}dt=Math.round(dt*1e4)*1e-4,$t=Math.round($t*1e4)*1e-4,this.sValue=dt,this.eValue=$t}else dt=this.sValue,$t=this.eValue;var Dt,Ft,Ut=this.shapes.length,Ht,Kt,Yt,Jt,Zt,er=0;if($t===dt)for(Ft=0;Ft<Ut;Ft+=1)this.shapes[Ft].localShapeCollection.releaseShapes(),this.shapes[Ft].shape._mdf=!0,this.shapes[Ft].shape.paths=this.shapes[Ft].localShapeCollection,this._mdf&&(this.shapes[Ft].pathsData.length=0);else if($t===1&&dt===0||$t===0&&dt===1){if(this._mdf)for(Ft=0;Ft<Ut;Ft+=1)this.shapes[Ft].pathsData.length=0,this.shapes[Ft].shape._mdf=!0}else{var rr=[],sr,nr;for(Ft=0;Ft<Ut;Ft+=1)if(sr=this.shapes[Ft],!sr.shape._mdf&&!this._mdf&&!et&&this.m!==2)sr.shape.paths=sr.localShapeCollection;else{if(Dt=sr.shape.paths,Kt=Dt._length,Zt=0,!sr.shape._mdf&&sr.pathsData.length)Zt=sr.totalShapeLength;else{for(Yt=this.releasePathsData(sr.pathsData),Ht=0;Ht<Kt;Ht+=1)Jt=bez.getSegmentsLength(Dt.shapes[Ht]),Yt.push(Jt),Zt+=Jt.totalLength;sr.totalShapeLength=Zt,sr.pathsData=Yt}er+=Zt,sr.shape._mdf=!0}var ir=dt,or=$t,lr=0,cr;for(Ft=Ut-1;Ft>=0;Ft-=1)if(sr=this.shapes[Ft],sr.shape._mdf){for(nr=sr.localShapeCollection,nr.releaseShapes(),this.m===2&&Ut>1?(cr=this.calculateShapeEdges(dt,$t,sr.totalShapeLength,lr,er),lr+=sr.totalShapeLength):cr=[[ir,or]],Kt=cr.length,Ht=0;Ht<Kt;Ht+=1){ir=cr[Ht][0],or=cr[Ht][1],rr.length=0,or<=1?rr.push({s:sr.totalShapeLength*ir,e:sr.totalShapeLength*or}):ir>=1?rr.push({s:sr.totalShapeLength*(ir-1),e:sr.totalShapeLength*(or-1)}):(rr.push({s:sr.totalShapeLength*ir,e:sr.totalShapeLength}),rr.push({s:0,e:sr.totalShapeLength*(or-1)}));var dr=this.addShapes(sr,rr[0]);if(rr[0].s!==rr[0].e){if(rr.length>1){var ur=sr.shape.paths.shapes[sr.shape.paths._length-1];if(ur.c){var pr=dr.pop();this.addPaths(dr,nr),dr=this.addShapes(sr,rr[1],pr)}else this.addPaths(dr,nr),dr=this.addShapes(sr,rr[1])}this.addPaths(dr,nr)}}sr.shape.paths=nr}}},TrimModifier.prototype.addPaths=function(et,dt){var $t,kt=et.length;for($t=0;$t<kt;$t+=1)dt.addShape(et[$t])},TrimModifier.prototype.addSegment=function(et,dt,$t,kt,Tt,Dt,Ft){Tt.setXYAt(dt[0],dt[1],"o",Dt),Tt.setXYAt($t[0],$t[1],"i",Dt+1),Ft&&Tt.setXYAt(et[0],et[1],"v",Dt),Tt.setXYAt(kt[0],kt[1],"v",Dt+1)},TrimModifier.prototype.addSegmentFromArray=function(et,dt,$t,kt){dt.setXYAt(et[1],et[5],"o",$t),dt.setXYAt(et[2],et[6],"i",$t+1),kt&&dt.setXYAt(et[0],et[4],"v",$t),dt.setXYAt(et[3],et[7],"v",$t+1)},TrimModifier.prototype.addShapes=function(et,dt,$t){var kt=et.pathsData,Tt=et.shape.paths.shapes,Dt,Ft=et.shape.paths._length,Ut,Ht,Kt=0,Yt,Jt,Zt,er,rr=[],sr,nr=!0;for($t?(Jt=$t._length,sr=$t._length):($t=shapePool.newElement(),Jt=0,sr=0),rr.push($t),Dt=0;Dt<Ft;Dt+=1){for(Zt=kt[Dt].lengths,$t.c=Tt[Dt].c,Ht=Tt[Dt].c?Zt.length:Zt.length+1,Ut=1;Ut<Ht;Ut+=1)if(Yt=Zt[Ut-1],Kt+Yt.addedLength<dt.s)Kt+=Yt.addedLength,$t.c=!1;else if(Kt>dt.e){$t.c=!1;break}else dt.s<=Kt&&dt.e>=Kt+Yt.addedLength?(this.addSegment(Tt[Dt].v[Ut-1],Tt[Dt].o[Ut-1],Tt[Dt].i[Ut],Tt[Dt].v[Ut],$t,Jt,nr),nr=!1):(er=bez.getNewSegment(Tt[Dt].v[Ut-1],Tt[Dt].v[Ut],Tt[Dt].o[Ut-1],Tt[Dt].i[Ut],(dt.s-Kt)/Yt.addedLength,(dt.e-Kt)/Yt.addedLength,Zt[Ut-1]),this.addSegmentFromArray(er,$t,Jt,nr),nr=!1,$t.c=!1),Kt+=Yt.addedLength,Jt+=1;if(Tt[Dt].c&&Zt.length){if(Yt=Zt[Ut-1],Kt<=dt.e){var ir=Zt[Ut-1].addedLength;dt.s<=Kt&&dt.e>=Kt+ir?(this.addSegment(Tt[Dt].v[Ut-1],Tt[Dt].o[Ut-1],Tt[Dt].i[0],Tt[Dt].v[0],$t,Jt,nr),nr=!1):(er=bez.getNewSegment(Tt[Dt].v[Ut-1],Tt[Dt].v[0],Tt[Dt].o[Ut-1],Tt[Dt].i[0],(dt.s-Kt)/ir,(dt.e-Kt)/ir,Zt[Ut-1]),this.addSegmentFromArray(er,$t,Jt,nr),nr=!1,$t.c=!1)}else $t.c=!1;Kt+=Yt.addedLength,Jt+=1}if($t._length&&($t.setXYAt($t.v[sr][0],$t.v[sr][1],"i",sr),$t.setXYAt($t.v[$t._length-1][0],$t.v[$t._length-1][1],"o",$t._length-1)),Kt>dt.e)break;Dt<Ft-1&&($t=shapePool.newElement(),nr=!0,rr.push($t),Jt=0)}return rr};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(et,dt.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(et,dt){var $t=dt/100,kt=[0,0],Tt=et._length,Dt=0;for(Dt=0;Dt<Tt;Dt+=1)kt[0]+=et.v[Dt][0],kt[1]+=et.v[Dt][1];kt[0]/=Tt,kt[1]/=Tt;var Ft=shapePool.newElement();Ft.c=et.c;var Ut,Ht,Kt,Yt,Jt,Zt;for(Dt=0;Dt<Tt;Dt+=1)Ut=et.v[Dt][0]+(kt[0]-et.v[Dt][0])*$t,Ht=et.v[Dt][1]+(kt[1]-et.v[Dt][1])*$t,Kt=et.o[Dt][0]+(kt[0]-et.o[Dt][0])*-$t,Yt=et.o[Dt][1]+(kt[1]-et.o[Dt][1])*-$t,Jt=et.i[Dt][0]+(kt[0]-et.i[Dt][0])*-$t,Zt=et.i[Dt][1]+(kt[1]-et.i[Dt][1])*-$t,Ft.setTripleAt(Ut,Ht,Kt,Yt,Jt,Zt,Dt);return Ft},PuckerAndBloatModifier.prototype.processShapes=function(et){var dt,$t,kt=this.shapes.length,Tt,Dt,Ft=this.amount.v;if(Ft!==0){var Ut,Ht;for($t=0;$t<kt;$t+=1){if(Ut=this.shapes[$t],Ht=Ut.localShapeCollection,!(!Ut.shape._mdf&&!this._mdf&&!et))for(Ht.releaseShapes(),Ut.shape._mdf=!0,dt=Ut.shape.paths.shapes,Dt=Ut.shape.paths._length,Tt=0;Tt<Dt;Tt+=1)Ht.addShape(this.processPath(dt[Tt],Ft));Ut.shape.paths=Ut.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var et=[0,0];function dt(Ht){var Kt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||Kt,this.a&&Ht.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&Ht.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&Ht.skewFromAxis(-this.sk.v,this.sa.v),this.r?Ht.rotate(-this.r.v):Ht.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?Ht.translate(this.px.v,this.py.v,-this.pz.v):Ht.translate(this.px.v,this.py.v,0):Ht.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function $t(Ht){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||Ht){var Kt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Yt,Jt;if(Kt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Yt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/Kt,0),Jt=this.p.getValueAtTime(this.p.keyframes[0].t/Kt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Yt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/Kt,0),Jt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/Kt,0)):(Yt=this.p.pv,Jt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/Kt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Yt=[],Jt=[];var Zt=this.px,er=this.py;Zt._caching.lastFrame+Zt.offsetTime<=Zt.keyframes[0].t?(Yt[0]=Zt.getValueAtTime((Zt.keyframes[0].t+.01)/Kt,0),Yt[1]=er.getValueAtTime((er.keyframes[0].t+.01)/Kt,0),Jt[0]=Zt.getValueAtTime(Zt.keyframes[0].t/Kt,0),Jt[1]=er.getValueAtTime(er.keyframes[0].t/Kt,0)):Zt._caching.lastFrame+Zt.offsetTime>=Zt.keyframes[Zt.keyframes.length-1].t?(Yt[0]=Zt.getValueAtTime(Zt.keyframes[Zt.keyframes.length-1].t/Kt,0),Yt[1]=er.getValueAtTime(er.keyframes[er.keyframes.length-1].t/Kt,0),Jt[0]=Zt.getValueAtTime((Zt.keyframes[Zt.keyframes.length-1].t-.01)/Kt,0),Jt[1]=er.getValueAtTime((er.keyframes[er.keyframes.length-1].t-.01)/Kt,0)):(Yt=[Zt.pv,er.pv],Jt[0]=Zt.getValueAtTime((Zt._caching.lastFrame+Zt.offsetTime-.01)/Kt,Zt.offsetTime),Jt[1]=er.getValueAtTime((er._caching.lastFrame+er.offsetTime-.01)/Kt,er.offsetTime))}else Jt=et,Yt=Jt;this.v.rotate(-Math.atan2(Yt[1]-Jt[1],Yt[0]-Jt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function kt(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function Tt(){}function Dt(Ht){this._addDynamicProperty(Ht),this.elem.addDynamicProperty(Ht),this._isDirty=!0}function Ft(Ht,Kt,Yt){if(this.elem=Ht,this.frameId=-1,this.propType="transform",this.data=Kt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Yt||Ht),Kt.p&&Kt.p.s?(this.px=PropertyFactory.getProp(Ht,Kt.p.x,0,0,this),this.py=PropertyFactory.getProp(Ht,Kt.p.y,0,0,this),Kt.p.z&&(this.pz=PropertyFactory.getProp(Ht,Kt.p.z,0,0,this))):this.p=PropertyFactory.getProp(Ht,Kt.p||{k:[0,0,0]},1,0,this),Kt.rx){if(this.rx=PropertyFactory.getProp(Ht,Kt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(Ht,Kt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(Ht,Kt.rz,0,degToRads,this),Kt.or.k[0].ti){var Jt,Zt=Kt.or.k.length;for(Jt=0;Jt<Zt;Jt+=1)Kt.or.k[Jt].to=null,Kt.or.k[Jt].ti=null}this.or=PropertyFactory.getProp(Ht,Kt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(Ht,Kt.r||{k:0},0,degToRads,this);Kt.sk&&(this.sk=PropertyFactory.getProp(Ht,Kt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(Ht,Kt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(Ht,Kt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(Ht,Kt.s||{k:[100,100,100]},1,.01,this),Kt.o?this.o=PropertyFactory.getProp(Ht,Kt.o,0,.01,Ht):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}Ft.prototype={applyToMatrix:dt,getValue:$t,precalculateMatrix:kt,autoOrient:Tt},extendPrototype([DynamicPropertyContainer],Ft),Ft.prototype.addDynamicProperty=Dt,Ft.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function Ut(Ht,Kt,Yt){return new Ft(Ht,Kt,Yt)}return{getTransformProperty:Ut}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(et,dt.c,0,null,this),this.o=PropertyFactory.getProp(et,dt.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(et,dt.tr,this),this.so=PropertyFactory.getProp(et,dt.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(et,dt.tr.eo,0,.01,this),this.data=dt,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(et,dt,$t,kt,Tt,Dt){var Ft=Dt?-1:1,Ut=kt.s.v[0]+(1-kt.s.v[0])*(1-Tt),Ht=kt.s.v[1]+(1-kt.s.v[1])*(1-Tt);et.translate(kt.p.v[0]*Ft*Tt,kt.p.v[1]*Ft*Tt,kt.p.v[2]),dt.translate(-kt.a.v[0],-kt.a.v[1],kt.a.v[2]),dt.rotate(-kt.r.v*Ft*Tt),dt.translate(kt.a.v[0],kt.a.v[1],kt.a.v[2]),$t.translate(-kt.a.v[0],-kt.a.v[1],kt.a.v[2]),$t.scale(Dt?1/Ut:Ut,Dt?1/Ht:Ht),$t.translate(kt.a.v[0],kt.a.v[1],kt.a.v[2])},RepeaterModifier.prototype.init=function(et,dt,$t,kt){for(this.elem=et,this.arr=dt,this.pos=$t,this.elemsData=kt,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(et),this.initModifierProperties(et,dt[$t]);$t>0;)$t-=1,this._elements.unshift(dt[$t]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(et){var dt,$t=et.length;for(dt=0;dt<$t;dt+=1)et[dt]._processed=!1,et[dt].ty==="gr"&&this.resetElements(et[dt].it)},RepeaterModifier.prototype.cloneElements=function(et){var dt=JSON.parse(JSON.stringify(et));return this.resetElements(dt),dt},RepeaterModifier.prototype.changeGroupRender=function(et,dt){var $t,kt=et.length;for($t=0;$t<kt;$t+=1)et[$t]._render=dt,et[$t].ty==="gr"&&this.changeGroupRender(et[$t].it,dt)},RepeaterModifier.prototype.processShapes=function(et){var dt,$t,kt,Tt,Dt,Ft=!1;if(this._mdf||et){var Ut=Math.ceil(this.c.v);if(this._groups.length<Ut){for(;this._groups.length<Ut;){var Ht={it:this.cloneElements(this._elements),ty:"gr"};Ht.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,Ht),this._groups.splice(0,0,Ht),this._currentCopies+=1}this.elem.reloadShapes(),Ft=!0}Dt=0;var Kt;for(kt=0;kt<=this._groups.length-1;kt+=1){if(Kt=Dt<Ut,this._groups[kt]._render=Kt,this.changeGroupRender(this._groups[kt].it,Kt),!Kt){var Yt=this.elemsData[kt].it,Jt=Yt[Yt.length-1];Jt.transform.op.v!==0?(Jt.transform.op._mdf=!0,Jt.transform.op.v=0):Jt.transform.op._mdf=!1}Dt+=1}this._currentCopies=Ut;var Zt=this.o.v,er=Zt%1,rr=Zt>0?Math.floor(Zt):Math.ceil(Zt),sr=this.pMatrix.props,nr=this.rMatrix.props,ir=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var or=0;if(Zt>0){for(;or<rr;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),or+=1;er&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,er,!1),or+=er)}else if(Zt<0){for(;or>rr;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),or-=1;er&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-er,!0),or-=er)}kt=this.data.m===1?0:this._currentCopies-1,Tt=this.data.m===1?1:-1,Dt=this._currentCopies;for(var lr,cr;Dt;){if(dt=this.elemsData[kt].it,$t=dt[dt.length-1].transform.mProps.v.props,cr=$t.length,dt[dt.length-1].transform.mProps._mdf=!0,dt[dt.length-1].transform.op._mdf=!0,dt[dt.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(kt/(this._currentCopies-1)),or!==0){for((kt!==0&&Tt===1||kt!==this._currentCopies-1&&Tt===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(nr[0],nr[1],nr[2],nr[3],nr[4],nr[5],nr[6],nr[7],nr[8],nr[9],nr[10],nr[11],nr[12],nr[13],nr[14],nr[15]),this.matrix.transform(ir[0],ir[1],ir[2],ir[3],ir[4],ir[5],ir[6],ir[7],ir[8],ir[9],ir[10],ir[11],ir[12],ir[13],ir[14],ir[15]),this.matrix.transform(sr[0],sr[1],sr[2],sr[3],sr[4],sr[5],sr[6],sr[7],sr[8],sr[9],sr[10],sr[11],sr[12],sr[13],sr[14],sr[15]),lr=0;lr<cr;lr+=1)$t[lr]=this.matrix.props[lr];this.matrix.reset()}else for(this.matrix.reset(),lr=0;lr<cr;lr+=1)$t[lr]=this.matrix.props[lr];or+=1,Dt-=1,kt+=Tt}}else for(Dt=this._currentCopies,kt=0,Tt=1;Dt;)dt=this.elemsData[kt].it,$t=dt[dt.length-1].transform.mProps.v.props,dt[dt.length-1].transform.mProps._mdf=!1,dt[dt.length-1].transform.op._mdf=!1,Dt-=1,kt+=Tt;return Ft},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(et,dt.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(et,dt){var $t=shapePool.newElement();$t.c=et.c;var kt,Tt=et._length,Dt,Ft,Ut,Ht,Kt,Yt,Jt=0,Zt,er,rr,sr,nr,ir;for(kt=0;kt<Tt;kt+=1)Dt=et.v[kt],Ut=et.o[kt],Ft=et.i[kt],Dt[0]===Ut[0]&&Dt[1]===Ut[1]&&Dt[0]===Ft[0]&&Dt[1]===Ft[1]?(kt===0||kt===Tt-1)&&!et.c?($t.setTripleAt(Dt[0],Dt[1],Ut[0],Ut[1],Ft[0],Ft[1],Jt),Jt+=1):(kt===0?Ht=et.v[Tt-1]:Ht=et.v[kt-1],Kt=Math.sqrt(Math.pow(Dt[0]-Ht[0],2)+Math.pow(Dt[1]-Ht[1],2)),Yt=Kt?Math.min(Kt/2,dt)/Kt:0,nr=Dt[0]+(Ht[0]-Dt[0])*Yt,Zt=nr,ir=Dt[1]-(Dt[1]-Ht[1])*Yt,er=ir,rr=Zt-(Zt-Dt[0])*roundCorner,sr=er-(er-Dt[1])*roundCorner,$t.setTripleAt(Zt,er,rr,sr,nr,ir,Jt),Jt+=1,kt===Tt-1?Ht=et.v[0]:Ht=et.v[kt+1],Kt=Math.sqrt(Math.pow(Dt[0]-Ht[0],2)+Math.pow(Dt[1]-Ht[1],2)),Yt=Kt?Math.min(Kt/2,dt)/Kt:0,rr=Dt[0]+(Ht[0]-Dt[0])*Yt,Zt=rr,sr=Dt[1]+(Ht[1]-Dt[1])*Yt,er=sr,nr=Zt-(Zt-Dt[0])*roundCorner,ir=er-(er-Dt[1])*roundCorner,$t.setTripleAt(Zt,er,rr,sr,nr,ir,Jt),Jt+=1):($t.setTripleAt(et.v[kt][0],et.v[kt][1],et.o[kt][0],et.o[kt][1],et.i[kt][0],et.i[kt][1],Jt),Jt+=1);return $t},RoundCornersModifier.prototype.processShapes=function(et){var dt,$t,kt=this.shapes.length,Tt,Dt,Ft=this.rd.v;if(Ft!==0){var Ut,Ht;for($t=0;$t<kt;$t+=1){if(Ut=this.shapes[$t],Ht=Ut.localShapeCollection,!(!Ut.shape._mdf&&!this._mdf&&!et))for(Ht.releaseShapes(),Ut.shape._mdf=!0,dt=Ut.shape.paths.shapes,Dt=Ut.shape.paths._length,Tt=0;Tt<Dt;Tt+=1)Ht.addShape(this.processPath(dt[Tt],Ft));Ut.shape.paths=Ut.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(et,dt){return Math.abs(et-dt)*1e5<=Math.min(Math.abs(et),Math.abs(dt))}function floatZero(et){return Math.abs(et)<=1e-5}function lerp(et,dt,$t){return et*(1-$t)+dt*$t}function lerpPoint(et,dt,$t){return[lerp(et[0],dt[0],$t),lerp(et[1],dt[1],$t)]}function quadRoots(et,dt,$t){if(et===0)return[];var kt=dt*dt-4*et*$t;if(kt<0)return[];var Tt=-dt/(2*et);if(kt===0)return[Tt];var Dt=Math.sqrt(kt)/(2*et);return[Tt-Dt,Tt+Dt]}function polynomialCoefficients(et,dt,$t,kt){return[-et+3*dt-3*$t+kt,3*et-6*dt+3*$t,-3*et+3*dt,et]}function singlePoint(et){return new PolynomialBezier(et,et,et,et,!1)}function PolynomialBezier(et,dt,$t,kt,Tt){Tt&&pointEqual(et,dt)&&(dt=lerpPoint(et,kt,1/3)),Tt&&pointEqual($t,kt)&&($t=lerpPoint(et,kt,2/3));var Dt=polynomialCoefficients(et[0],dt[0],$t[0],kt[0]),Ft=polynomialCoefficients(et[1],dt[1],$t[1],kt[1]);this.a=[Dt[0],Ft[0]],this.b=[Dt[1],Ft[1]],this.c=[Dt[2],Ft[2]],this.d=[Dt[3],Ft[3]],this.points=[et,dt,$t,kt]}PolynomialBezier.prototype.point=function(et){return[((this.a[0]*et+this.b[0])*et+this.c[0])*et+this.d[0],((this.a[1]*et+this.b[1])*et+this.c[1])*et+this.d[1]]},PolynomialBezier.prototype.derivative=function(et){return[(3*et*this.a[0]+2*this.b[0])*et+this.c[0],(3*et*this.a[1]+2*this.b[1])*et+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(et){var dt=this.derivative(et);return Math.atan2(dt[1],dt[0])},PolynomialBezier.prototype.normalAngle=function(et){var dt=this.derivative(et);return Math.atan2(dt[0],dt[1])},PolynomialBezier.prototype.inflectionPoints=function(){var et=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(et))return[];var dt=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/et,$t=dt*dt-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/et;if($t<0)return[];var kt=Math.sqrt($t);return floatZero(kt)?kt>0&&kt<1?[dt]:[]:[dt-kt,dt+kt].filter(function(Tt){return Tt>0&&Tt<1})},PolynomialBezier.prototype.split=function(et){if(et<=0)return[singlePoint(this.points[0]),this];if(et>=1)return[this,singlePoint(this.points[this.points.length-1])];var dt=lerpPoint(this.points[0],this.points[1],et),$t=lerpPoint(this.points[1],this.points[2],et),kt=lerpPoint(this.points[2],this.points[3],et),Tt=lerpPoint(dt,$t,et),Dt=lerpPoint($t,kt,et),Ft=lerpPoint(Tt,Dt,et);return[new PolynomialBezier(this.points[0],dt,Tt,Ft,!0),new PolynomialBezier(Ft,Dt,kt,this.points[3],!0)]};function extrema(et,dt){var $t=et.points[0][dt],kt=et.points[et.points.length-1][dt];if($t>kt){var Tt=kt;kt=$t,$t=Tt}for(var Dt=quadRoots(3*et.a[dt],2*et.b[dt],et.c[dt]),Ft=0;Ft<Dt.length;Ft+=1)if(Dt[Ft]>0&&Dt[Ft]<1){var Ut=et.point(Dt[Ft])[dt];Ut<$t?$t=Ut:Ut>kt&&(kt=Ut)}return{min:$t,max:kt}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var et=this.bounds();return{left:et.x.min,right:et.x.max,top:et.y.min,bottom:et.y.max,width:et.x.max-et.x.min,height:et.y.max-et.y.min,cx:(et.x.max+et.x.min)/2,cy:(et.y.max+et.y.min)/2}};function intersectData(et,dt,$t){var kt=et.boundingBox();return{cx:kt.cx,cy:kt.cy,width:kt.width,height:kt.height,bez:et,t:(dt+$t)/2,t1:dt,t2:$t}}function splitData(et){var dt=et.bez.split(.5);return[intersectData(dt[0],et.t1,et.t),intersectData(dt[1],et.t,et.t2)]}function boxIntersect(et,dt){return Math.abs(et.cx-dt.cx)*2<et.width+dt.width&&Math.abs(et.cy-dt.cy)*2<et.height+dt.height}function intersectsImpl(et,dt,$t,kt,Tt,Dt){if(boxIntersect(et,dt)){if($t>=Dt||et.width<=kt&&et.height<=kt&&dt.width<=kt&&dt.height<=kt){Tt.push([et.t,dt.t]);return}var Ft=splitData(et),Ut=splitData(dt);intersectsImpl(Ft[0],Ut[0],$t+1,kt,Tt,Dt),intersectsImpl(Ft[0],Ut[1],$t+1,kt,Tt,Dt),intersectsImpl(Ft[1],Ut[0],$t+1,kt,Tt,Dt),intersectsImpl(Ft[1],Ut[1],$t+1,kt,Tt,Dt)}}PolynomialBezier.prototype.intersections=function(et,dt,$t){dt===void 0&&(dt=2),$t===void 0&&($t=7);var kt=[];return intersectsImpl(intersectData(this,0,1),intersectData(et,0,1),0,dt,kt,$t),kt},PolynomialBezier.shapeSegment=function(et,dt){var $t=(dt+1)%et.length();return new PolynomialBezier(et.v[dt],et.o[dt],et.i[$t],et.v[$t],!0)},PolynomialBezier.shapeSegmentInverted=function(et,dt){var $t=(dt+1)%et.length();return new PolynomialBezier(et.v[$t],et.i[$t],et.o[dt],et.v[dt],!0)};function crossProduct(et,dt){return[et[1]*dt[2]-et[2]*dt[1],et[2]*dt[0]-et[0]*dt[2],et[0]*dt[1]-et[1]*dt[0]]}function lineIntersection(et,dt,$t,kt){var Tt=[et[0],et[1],1],Dt=[dt[0],dt[1],1],Ft=[$t[0],$t[1],1],Ut=[kt[0],kt[1],1],Ht=crossProduct(crossProduct(Tt,Dt),crossProduct(Ft,Ut));return floatZero(Ht[2])?null:[Ht[0]/Ht[2],Ht[1]/Ht[2]]}function polarOffset(et,dt,$t){return[et[0]+Math.cos(dt)*$t,et[1]-Math.sin(dt)*$t]}function pointDistance(et,dt){return Math.hypot(et[0]-dt[0],et[1]-dt[1])}function pointEqual(et,dt){return floatEqual(et[0],dt[0])&&floatEqual(et[1],dt[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(et,dt.s,0,null,this),this.frequency=PropertyFactory.getProp(et,dt.r,0,null,this),this.pointsType=PropertyFactory.getProp(et,dt.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(et,dt,$t,kt,Tt,Dt,Ft){var Ut=$t-Math.PI/2,Ht=$t+Math.PI/2,Kt=dt[0]+Math.cos($t)*kt*Tt,Yt=dt[1]-Math.sin($t)*kt*Tt;et.setTripleAt(Kt,Yt,Kt+Math.cos(Ut)*Dt,Yt-Math.sin(Ut)*Dt,Kt+Math.cos(Ht)*Ft,Yt-Math.sin(Ht)*Ft,et.length())}function getPerpendicularVector(et,dt){var $t=[dt[0]-et[0],dt[1]-et[1]],kt=-Math.PI*.5,Tt=[Math.cos(kt)*$t[0]-Math.sin(kt)*$t[1],Math.sin(kt)*$t[0]+Math.cos(kt)*$t[1]];return Tt}function getProjectingAngle(et,dt){var $t=dt===0?et.length()-1:dt-1,kt=(dt+1)%et.length(),Tt=et.v[$t],Dt=et.v[kt],Ft=getPerpendicularVector(Tt,Dt);return Math.atan2(0,1)-Math.atan2(Ft[1],Ft[0])}function zigZagCorner(et,dt,$t,kt,Tt,Dt,Ft){var Ut=getProjectingAngle(dt,$t),Ht=dt.v[$t%dt._length],Kt=dt.v[$t===0?dt._length-1:$t-1],Yt=dt.v[($t+1)%dt._length],Jt=Dt===2?Math.sqrt(Math.pow(Ht[0]-Kt[0],2)+Math.pow(Ht[1]-Kt[1],2)):0,Zt=Dt===2?Math.sqrt(Math.pow(Ht[0]-Yt[0],2)+Math.pow(Ht[1]-Yt[1],2)):0;setPoint(et,dt.v[$t%dt._length],Ut,Ft,kt,Zt/((Tt+1)*2),Jt/((Tt+1)*2))}function zigZagSegment(et,dt,$t,kt,Tt,Dt){for(var Ft=0;Ft<kt;Ft+=1){var Ut=(Ft+1)/(kt+1),Ht=Tt===2?Math.sqrt(Math.pow(dt.points[3][0]-dt.points[0][0],2)+Math.pow(dt.points[3][1]-dt.points[0][1],2)):0,Kt=dt.normalAngle(Ut),Yt=dt.point(Ut);setPoint(et,Yt,Kt,Dt,$t,Ht/((kt+1)*2),Ht/((kt+1)*2)),Dt=-Dt}return Dt}ZigZagModifier.prototype.processPath=function(et,dt,$t,kt){var Tt=et._length,Dt=shapePool.newElement();if(Dt.c=et.c,et.c||(Tt-=1),Tt===0)return Dt;var Ft=-1,Ut=PolynomialBezier.shapeSegment(et,0);zigZagCorner(Dt,et,0,dt,$t,kt,Ft);for(var Ht=0;Ht<Tt;Ht+=1)Ft=zigZagSegment(Dt,Ut,dt,$t,kt,-Ft),Ht===Tt-1&&!et.c?Ut=null:Ut=PolynomialBezier.shapeSegment(et,(Ht+1)%Tt),zigZagCorner(Dt,et,Ht+1,dt,$t,kt,Ft);return Dt},ZigZagModifier.prototype.processShapes=function(et){var dt,$t,kt=this.shapes.length,Tt,Dt,Ft=this.amplitude.v,Ut=Math.max(0,Math.round(this.frequency.v)),Ht=this.pointsType.v;if(Ft!==0){var Kt,Yt;for($t=0;$t<kt;$t+=1){if(Kt=this.shapes[$t],Yt=Kt.localShapeCollection,!(!Kt.shape._mdf&&!this._mdf&&!et))for(Yt.releaseShapes(),Kt.shape._mdf=!0,dt=Kt.shape.paths.shapes,Dt=Kt.shape.paths._length,Tt=0;Tt<Dt;Tt+=1)Yt.addShape(this.processPath(dt[Tt],Ft,Ut,Ht));Kt.shape.paths=Kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(et,dt,$t){var kt=Math.atan2(dt[0]-et[0],dt[1]-et[1]);return[polarOffset(et,kt,$t),polarOffset(dt,kt,$t)]}function offsetSegment(et,dt){var $t,kt,Tt,Dt,Ft,Ut,Ht;Ht=linearOffset(et.points[0],et.points[1],dt),$t=Ht[0],kt=Ht[1],Ht=linearOffset(et.points[1],et.points[2],dt),Tt=Ht[0],Dt=Ht[1],Ht=linearOffset(et.points[2],et.points[3],dt),Ft=Ht[0],Ut=Ht[1];var Kt=lineIntersection($t,kt,Tt,Dt);Kt===null&&(Kt=kt);var Yt=lineIntersection(Ft,Ut,Tt,Dt);return Yt===null&&(Yt=Ft),new PolynomialBezier($t,Kt,Yt,Ut)}function joinLines(et,dt,$t,kt,Tt){var Dt=dt.points[3],Ft=$t.points[0];if(kt===3||pointEqual(Dt,Ft))return Dt;if(kt===2){var Ut=-dt.tangentAngle(1),Ht=-$t.tangentAngle(0)+Math.PI,Kt=lineIntersection(Dt,polarOffset(Dt,Ut+Math.PI/2,100),Ft,polarOffset(Ft,Ut+Math.PI/2,100)),Yt=Kt?pointDistance(Kt,Dt):pointDistance(Dt,Ft)/2,Jt=polarOffset(Dt,Ut,2*Yt*roundCorner);return et.setXYAt(Jt[0],Jt[1],"o",et.length()-1),Jt=polarOffset(Ft,Ht,2*Yt*roundCorner),et.setTripleAt(Ft[0],Ft[1],Ft[0],Ft[1],Jt[0],Jt[1],et.length()),Ft}var Zt=pointEqual(Dt,dt.points[2])?dt.points[0]:dt.points[2],er=pointEqual(Ft,$t.points[1])?$t.points[3]:$t.points[1],rr=lineIntersection(Zt,Dt,Ft,er);return rr&&pointDistance(rr,Dt)<Tt?(et.setTripleAt(rr[0],rr[1],rr[0],rr[1],rr[0],rr[1],et.length()),rr):Dt}function getIntersection(et,dt){var $t=et.intersections(dt);return $t.length&&floatEqual($t[0][0],1)&&$t.shift(),$t.length?$t[0]:null}function pruneSegmentIntersection(et,dt){var $t=et.slice(),kt=dt.slice(),Tt=getIntersection(et[et.length-1],dt[0]);return Tt&&($t[et.length-1]=et[et.length-1].split(Tt[0])[0],kt[0]=dt[0].split(Tt[1])[1]),et.length>1&&dt.length>1&&(Tt=getIntersection(et[0],dt[dt.length-1]),Tt)?[[et[0].split(Tt[0])[0]],[dt[dt.length-1].split(Tt[1])[1]]]:[$t,kt]}function pruneIntersections(et){for(var dt,$t=1;$t<et.length;$t+=1)dt=pruneSegmentIntersection(et[$t-1],et[$t]),et[$t-1]=dt[0],et[$t]=dt[1];return et.length>1&&(dt=pruneSegmentIntersection(et[et.length-1],et[0]),et[et.length-1]=dt[0],et[0]=dt[1]),et}function offsetSegmentSplit(et,dt){var $t=et.inflectionPoints(),kt,Tt,Dt,Ft;if($t.length===0)return[offsetSegment(et,dt)];if($t.length===1||floatEqual($t[1],1))return Dt=et.split($t[0]),kt=Dt[0],Tt=Dt[1],[offsetSegment(kt,dt),offsetSegment(Tt,dt)];Dt=et.split($t[0]),kt=Dt[0];var Ut=($t[1]-$t[0])/(1-$t[0]);return Dt=Dt[1].split(Ut),Ft=Dt[0],Tt=Dt[1],[offsetSegment(kt,dt),offsetSegment(Ft,dt),offsetSegment(Tt,dt)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(et,dt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(et,dt.a,0,null,this),this.miterLimit=PropertyFactory.getProp(et,dt.ml,0,null,this),this.lineJoin=dt.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(et,dt,$t,kt){var Tt=shapePool.newElement();Tt.c=et.c;var Dt=et.length();et.c||(Dt-=1);var Ft,Ut,Ht,Kt=[];for(Ft=0;Ft<Dt;Ft+=1)Ht=PolynomialBezier.shapeSegment(et,Ft),Kt.push(offsetSegmentSplit(Ht,dt));if(!et.c)for(Ft=Dt-1;Ft>=0;Ft-=1)Ht=PolynomialBezier.shapeSegmentInverted(et,Ft),Kt.push(offsetSegmentSplit(Ht,dt));Kt=pruneIntersections(Kt);var Yt=null,Jt=null;for(Ft=0;Ft<Kt.length;Ft+=1){var Zt=Kt[Ft];for(Jt&&(Yt=joinLines(Tt,Jt,Zt[0],$t,kt)),Jt=Zt[Zt.length-1],Ut=0;Ut<Zt.length;Ut+=1)Ht=Zt[Ut],Yt&&pointEqual(Ht.points[0],Yt)?Tt.setXYAt(Ht.points[1][0],Ht.points[1][1],"o",Tt.length()-1):Tt.setTripleAt(Ht.points[0][0],Ht.points[0][1],Ht.points[1][0],Ht.points[1][1],Ht.points[0][0],Ht.points[0][1],Tt.length()),Tt.setTripleAt(Ht.points[3][0],Ht.points[3][1],Ht.points[3][0],Ht.points[3][1],Ht.points[2][0],Ht.points[2][1],Tt.length()),Yt=Ht.points[3]}return Kt.length&&joinLines(Tt,Jt,Kt[0][0],$t,kt),Tt},OffsetPathModifier.prototype.processShapes=function(et){var dt,$t,kt=this.shapes.length,Tt,Dt,Ft=this.amount.v,Ut=this.miterLimit.v,Ht=this.lineJoin;if(Ft!==0){var Kt,Yt;for($t=0;$t<kt;$t+=1){if(Kt=this.shapes[$t],Yt=Kt.localShapeCollection,!(!Kt.shape._mdf&&!this._mdf&&!et))for(Yt.releaseShapes(),Kt.shape._mdf=!0,dt=Kt.shape.paths.shapes,Dt=Kt.shape.paths._length,Tt=0;Tt<Dt;Tt+=1)Yt.addShape(this.processPath(dt[Tt],Ft,Ht,Ut));Kt.shape.paths=Kt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(et){for(var dt=et.fStyle?et.fStyle.split(" "):[],$t="normal",kt="normal",Tt=dt.length,Dt,Ft=0;Ft<Tt;Ft+=1)switch(Dt=dt[Ft].toLowerCase(),Dt){case"italic":kt="italic";break;case"bold":$t="700";break;case"black":$t="900";break;case"medium":$t="500";break;case"regular":case"normal":$t="400";break;case"light":case"thin":$t="200";break}return{style:kt,weight:et.fWeight||$t}}var FontManager=function(){var et=5e3,dt={w:0,size:0,shapes:[],data:{shapes:[]}},$t=[];$t=$t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var kt=127988,Tt=917631,Dt=917601,Ft=917626,Ut=65039,Ht=8205,Kt=127462,Yt=127487,Jt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function Zt(_r){var Pr=_r.split(","),br,wr=Pr.length,zr=[];for(br=0;br<wr;br+=1)Pr[br]!=="sans-serif"&&Pr[br]!=="monospace"&&zr.push(Pr[br]);return zr.join(",")}function er(_r,Pr){var br=createTag("span");br.setAttribute("aria-hidden",!0),br.style.fontFamily=Pr;var wr=createTag("span");wr.innerText="giItT1WQy@!-/#",br.style.position="absolute",br.style.left="-10000px",br.style.top="-10000px",br.style.fontSize="300px",br.style.fontVariant="normal",br.style.fontStyle="normal",br.style.fontWeight="normal",br.style.letterSpacing="0",br.appendChild(wr),document.body.appendChild(br);var zr=wr.offsetWidth;return wr.style.fontFamily=Zt(_r)+", "+Pr,{node:wr,w:zr,parent:br}}function rr(){var _r,Pr=this.fonts.length,br,wr,zr=Pr;for(_r=0;_r<Pr;_r+=1)this.fonts[_r].loaded?zr-=1:this.fonts[_r].fOrigin==="n"||this.fonts[_r].origin===0?this.fonts[_r].loaded=!0:(br=this.fonts[_r].monoCase.node,wr=this.fonts[_r].monoCase.w,br.offsetWidth!==wr?(zr-=1,this.fonts[_r].loaded=!0):(br=this.fonts[_r].sansCase.node,wr=this.fonts[_r].sansCase.w,br.offsetWidth!==wr&&(zr-=1,this.fonts[_r].loaded=!0)),this.fonts[_r].loaded&&(this.fonts[_r].sansCase.parent.parentNode.removeChild(this.fonts[_r].sansCase.parent),this.fonts[_r].monoCase.parent.parentNode.removeChild(this.fonts[_r].monoCase.parent)));zr!==0&&Date.now()-this.initTime<et?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function sr(_r,Pr){var br=document.body&&Pr?"svg":"canvas",wr,zr=getFontProperties(_r);if(br==="svg"){var Hr=createNS("text");Hr.style.fontSize="100px",Hr.setAttribute("font-family",_r.fFamily),Hr.setAttribute("font-style",zr.style),Hr.setAttribute("font-weight",zr.weight),Hr.textContent="1",_r.fClass?(Hr.style.fontFamily="inherit",Hr.setAttribute("class",_r.fClass)):Hr.style.fontFamily=_r.fFamily,Pr.appendChild(Hr),wr=Hr}else{var Yr=new OffscreenCanvas(500,500).getContext("2d");Yr.font=zr.style+" "+zr.weight+" 100px "+_r.fFamily,wr=Yr}function es(rs){return br==="svg"?(wr.textContent=rs,wr.getComputedTextLength()):wr.measureText(rs).width}return{measureText:es}}function nr(_r,Pr){if(!_r){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=_r.list;return}if(!document.body){this.isLoaded=!0,_r.list.forEach(function(gs){gs.helper=sr(gs),gs.cache={}}),this.fonts=_r.list;return}var br=_r.list,wr,zr=br.length,Hr=zr;for(wr=0;wr<zr;wr+=1){var Yr=!0,es,rs;if(br[wr].loaded=!1,br[wr].monoCase=er(br[wr].fFamily,"monospace"),br[wr].sansCase=er(br[wr].fFamily,"sans-serif"),!br[wr].fPath)br[wr].loaded=!0,Hr-=1;else if(br[wr].fOrigin==="p"||br[wr].origin===3){if(es=document.querySelectorAll('style[f-forigin="p"][f-family="'+br[wr].fFamily+'"], style[f-origin="3"][f-family="'+br[wr].fFamily+'"]'),es.length>0&&(Yr=!1),Yr){var Wr=createTag("style");Wr.setAttribute("f-forigin",br[wr].fOrigin),Wr.setAttribute("f-origin",br[wr].origin),Wr.setAttribute("f-family",br[wr].fFamily),Wr.type="text/css",Wr.innerText="@font-face {font-family: "+br[wr].fFamily+"; font-style: normal; src: url('"+br[wr].fPath+"');}",Pr.appendChild(Wr)}}else if(br[wr].fOrigin==="g"||br[wr].origin===1){for(es=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),rs=0;rs<es.length;rs+=1)es[rs].href.indexOf(br[wr].fPath)!==-1&&(Yr=!1);if(Yr){var Xr=createTag("link");Xr.setAttribute("f-forigin",br[wr].fOrigin),Xr.setAttribute("f-origin",br[wr].origin),Xr.type="text/css",Xr.rel="stylesheet",Xr.href=br[wr].fPath,document.body.appendChild(Xr)}}else if(br[wr].fOrigin==="t"||br[wr].origin===2){for(es=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),rs=0;rs<es.length;rs+=1)br[wr].fPath===es[rs].src&&(Yr=!1);if(Yr){var ns=createTag("link");ns.setAttribute("f-forigin",br[wr].fOrigin),ns.setAttribute("f-origin",br[wr].origin),ns.setAttribute("rel","stylesheet"),ns.setAttribute("href",br[wr].fPath),Pr.appendChild(ns)}}br[wr].helper=sr(br[wr],Pr),br[wr].cache={},this.fonts.push(br[wr])}Hr===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function ir(_r){if(_r){this.chars||(this.chars=[]);var Pr,br=_r.length,wr,zr=this.chars.length,Hr;for(Pr=0;Pr<br;Pr+=1){for(wr=0,Hr=!1;wr<zr;)this.chars[wr].style===_r[Pr].style&&this.chars[wr].fFamily===_r[Pr].fFamily&&this.chars[wr].ch===_r[Pr].ch&&(Hr=!0),wr+=1;Hr||(this.chars.push(_r[Pr]),zr+=1)}}}function or(_r,Pr,br){for(var wr=0,zr=this.chars.length;wr<zr;){if(this.chars[wr].ch===_r&&this.chars[wr].style===Pr&&this.chars[wr].fFamily===br)return this.chars[wr];wr+=1}return(typeof _r=="string"&&_r.charCodeAt(0)!==13||!_r)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",_r,Pr,br)),dt}function lr(_r,Pr,br){var wr=this.getFontByName(Pr),zr=_r;if(!wr.cache[zr]){var Hr=wr.helper;if(_r===" "){var Yr=Hr.measureText("|"+_r+"|"),es=Hr.measureText("||");wr.cache[zr]=(Yr-es)/100}else wr.cache[zr]=Hr.measureText(_r)/100}return wr.cache[zr]*br}function cr(_r){for(var Pr=0,br=this.fonts.length;Pr<br;){if(this.fonts[Pr].fName===_r)return this.fonts[Pr];Pr+=1}return this.fonts[0]}function dr(_r){var Pr=0,br=_r.charCodeAt(0);if(br>=55296&&br<=56319){var wr=_r.charCodeAt(1);wr>=56320&&wr<=57343&&(Pr=(br-55296)*1024+wr-56320+65536)}return Pr}function ur(_r,Pr){var br=_r.toString(16)+Pr.toString(16);return Jt.indexOf(br)!==-1}function pr(_r){return _r===Ht}function mr(_r){return _r===Ut}function jr(_r){var Pr=dr(_r);return Pr>=Kt&&Pr<=Yt}function Rr(_r){return jr(_r.substr(0,2))&&jr(_r.substr(2,2))}function xr(_r){return $t.indexOf(_r)!==-1}function kr(_r,Pr){var br=dr(_r.substr(Pr,2));if(br!==kt)return!1;var wr=0;for(Pr+=2;wr<5;){if(br=dr(_r.substr(Pr,2)),br<Dt||br>Ft)return!1;wr+=1,Pr+=2}return dr(_r.substr(Pr,2))===Tt}function Mr(){this.isLoaded=!0}var Tr=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Tr.isModifier=ur,Tr.isZeroWidthJoiner=pr,Tr.isFlagEmoji=Rr,Tr.isRegionalCode=jr,Tr.isCombinedCharacter=xr,Tr.isRegionalFlag=kr,Tr.isVariationSelector=mr,Tr.BLACK_FLAG_CODE_POINT=kt;var Or={addChars:ir,addFonts:nr,getCharData:or,getFontByName:cr,measureText:lr,checkLoadedFonts:rr,setIsLoaded:Mr};return Tr.prototype=Or,Tr}();function SlotManager(et){this.animationData=et}SlotManager.prototype.getProp=function(et){return this.animationData.slots&&this.animationData.slots[et.sid]?Object.assign(et,this.animationData.slots[et.sid].p):et};function slotFactory(et){return new SlotManager(et)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(dt){this.renderableComponents.indexOf(dt)===-1&&this.renderableComponents.push(dt)},removeRenderableComponent:function(dt){this.renderableComponents.indexOf(dt)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(dt),1)},prepareRenderableFrame:function(dt){this.checkLayerLimits(dt)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(dt){this.data.ip-this.data.st<=dt&&this.data.op-this.data.st>dt?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var dt,$t=this.renderableComponents.length;for(dt=0;dt<$t;dt+=1)this.renderableComponents[dt].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var et={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(dt){return et[dt]||""}}();function SliderEffect(et,dt,$t){this.p=PropertyFactory.getProp(dt,et.v,0,0,$t)}function AngleEffect(et,dt,$t){this.p=PropertyFactory.getProp(dt,et.v,0,0,$t)}function ColorEffect(et,dt,$t){this.p=PropertyFactory.getProp(dt,et.v,1,0,$t)}function PointEffect(et,dt,$t){this.p=PropertyFactory.getProp(dt,et.v,1,0,$t)}function LayerIndexEffect(et,dt,$t){this.p=PropertyFactory.getProp(dt,et.v,0,0,$t)}function MaskIndexEffect(et,dt,$t){this.p=PropertyFactory.getProp(dt,et.v,0,0,$t)}function CheckboxEffect(et,dt,$t){this.p=PropertyFactory.getProp(dt,et.v,0,0,$t)}function NoValueEffect(){this.p={}}function EffectsManager(et,dt){var $t=et.ef||[];this.effectElements=[];var kt,Tt=$t.length,Dt;for(kt=0;kt<Tt;kt+=1)Dt=new GroupEffect($t[kt],dt),this.effectElements.push(Dt)}function GroupEffect(et,dt){this.init(et,dt)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(et,dt){this.data=et,this.effectElements=[],this.initDynamicPropertyContainer(dt);var $t,kt=this.data.ef.length,Tt,Dt=this.data.ef;for($t=0;$t<kt;$t+=1){switch(Tt=null,Dt[$t].ty){case 0:Tt=new SliderEffect(Dt[$t],dt,this);break;case 1:Tt=new AngleEffect(Dt[$t],dt,this);break;case 2:Tt=new ColorEffect(Dt[$t],dt,this);break;case 3:Tt=new PointEffect(Dt[$t],dt,this);break;case 4:case 7:Tt=new CheckboxEffect(Dt[$t],dt,this);break;case 10:Tt=new LayerIndexEffect(Dt[$t],dt,this);break;case 11:Tt=new MaskIndexEffect(Dt[$t],dt,this);break;case 5:Tt=new EffectsManager(Dt[$t],dt);break;default:Tt=new NoValueEffect(Dt[$t]);break}Tt&&this.effectElements.push(Tt)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var dt=0,$t=this.data.masksProperties.length;dt<$t;){if(this.data.masksProperties[dt].mode!=="n"&&this.data.masksProperties[dt].cl!==!1)return!0;dt+=1}return!1},initExpressions:function(){var dt=getExpressionInterfaces();if(dt){var $t=dt("layer"),kt=dt("effects"),Tt=dt("shape"),Dt=dt("text"),Ft=dt("comp");this.layerInterface=$t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var Ut=kt.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(Ut),this.data.ty===0||this.data.xt?this.compInterface=Ft(this):this.data.ty===4?(this.layerInterface.shapeInterface=Tt(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=Dt(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var dt=getBlendMode(this.data.bm),$t=this.baseElement||this.layerElement;$t.style["mix-blend-mode"]=dt},initBaseData:function(dt,$t,kt){this.globalData=$t,this.comp=kt,this.data=dt,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(dt,$t){var kt,Tt=this.dynamicProperties.length;for(kt=0;kt<Tt;kt+=1)($t||this._isParent&&this.dynamicProperties[kt].propType==="transform")&&(this.dynamicProperties[kt].getValue(),this.dynamicProperties[kt]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(dt){this.dynamicProperties.indexOf(dt)===-1&&this.dynamicProperties.push(dt)}};function FootageElement(et,dt,$t){this.initFrame(),this.initRenderable(),this.assetData=dt.getAssetData(et.refId),this.footageData=dt.imageLoader.getAsset(this.assetData),this.initBaseData(et,dt,$t)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var et=getExpressionInterfaces();if(et){var dt=et("footage");this.layerInterface=dt(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(et,dt,$t){this.initFrame(),this.initRenderable(),this.assetData=dt.getAssetData(et.refId),this.initBaseData(et,dt,$t),this._isPlaying=!1,this._canPlay=!1;var kt=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(kt),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,dt.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,et.au&&et.au.lv?et.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(et){if(this.prepareRenderableFrame(et,!0),this.prepareProperties(et,!0),this.tm._placeholder)this._currentTime=et/this.data.sr;else{var dt=this.tm.v;this._currentTime=dt}this._volume=this.lv.v[0];var $t=this._volume*this._volumeMultiplier;this._previousVolume!==$t&&(this._previousVolume=$t,this.audio.volume($t))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(et){this.audio.rate(et)},AudioElement.prototype.volume=function(et){this._volumeMultiplier=et,this._previousVolume=et*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(et){var dt,$t=this.layers.length,kt;for(this.completeLayers=!0,dt=$t-1;dt>=0;dt-=1)this.elements[dt]||(kt=this.layers[dt],kt.ip-kt.st<=et-this.layers[dt].st&&kt.op-kt.st>et-this.layers[dt].st&&this.buildItem(dt)),this.completeLayers=this.elements[dt]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(et){switch(et.ty){case 2:return this.createImage(et);case 0:return this.createComp(et);case 1:return this.createSolid(et);case 3:return this.createNull(et);case 4:return this.createShape(et);case 5:return this.createText(et);case 6:return this.createAudio(et);case 13:return this.createCamera(et);case 15:return this.createFootage(et);default:return this.createNull(et)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(et){return new AudioElement(et,this.globalData,this)},BaseRenderer.prototype.createFootage=function(et){return new FootageElement(et,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var et,dt=this.layers.length;for(et=0;et<dt;et+=1)this.buildItem(et);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(et){this.completeLayers=!1;var dt,$t=et.length,kt,Tt=this.layers.length;for(dt=0;dt<$t;dt+=1)for(kt=0;kt<Tt;){if(this.layers[kt].id===et[dt].id){this.layers[kt]=et[dt];break}kt+=1}},BaseRenderer.prototype.setProjectInterface=function(et){this.globalData.projectInterface=et},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(et,dt,$t){for(var kt=this.elements,Tt=this.layers,Dt=0,Ft=Tt.length;Dt<Ft;)Tt[Dt].ind==dt&&(!kt[Dt]||kt[Dt]===!0?(this.buildItem(Dt),this.addPendingElement(et)):($t.push(kt[Dt]),kt[Dt].setAsParent(),Tt[Dt].parent!==void 0?this.buildElementParenting(et,Tt[Dt].parent,$t):et.setHierarchy($t))),Dt+=1},BaseRenderer.prototype.addPendingElement=function(et){this.pendingElements.push(et)},BaseRenderer.prototype.searchExtraCompositions=function(et){var dt,$t=et.length;for(dt=0;dt<$t;dt+=1)if(et[dt].xt){var kt=this.createComp(et[dt]);kt.initExpressions(),this.globalData.projectInterface.registerComposition(kt)}},BaseRenderer.prototype.getElementById=function(et){var dt,$t=this.elements.length;for(dt=0;dt<$t;dt+=1)if(this.elements[dt].data.ind===et)return this.elements[dt];return null},BaseRenderer.prototype.getElementByPath=function(et){var dt=et.shift(),$t;if(typeof dt=="number")$t=this.elements[dt];else{var kt,Tt=this.elements.length;for(kt=0;kt<Tt;kt+=1)if(this.elements[kt].data.nm===dt){$t=this.elements[kt];break}}return et.length===0?$t:$t.getElementByPath(et)},BaseRenderer.prototype.setupGlobalData=function(et,dt){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(et),this.globalData.fontManager.addChars(et.chars),this.globalData.fontManager.addFonts(et.fonts,dt),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=et.fr,this.globalData.nm=et.nm,this.globalData.compSize={w:et.w,h:et.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var dt=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:dt,localMat:dt,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var dt,$t=this.finalTransform.mat,kt=0,Tt=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;kt<Tt;){if(this.hierarchy[kt].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}kt+=1}if(this.finalTransform._matMdf)for(dt=this.finalTransform.mProp.v.props,$t.cloneFromProps(dt),kt=0;kt<Tt;kt+=1)$t.multiply(this.hierarchy[kt].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var dt=0,$t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;dt<$t;)this.localTransforms[dt]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[dt]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),dt+=1;if(this.finalTransform._localMatMdf){var kt=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(kt),dt=1;dt<$t;dt+=1){var Tt=this.localTransforms[dt].matrix;kt.multiply(Tt)}kt.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var Dt=this.finalTransform.localOpacity;for(dt=0;dt<$t;dt+=1)Dt*=this.localTransforms[dt].opacity*.01;this.finalTransform.localOpacity=Dt}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var dt=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(dt.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var $t=0,kt=dt.length;for($t=0;$t<kt;$t+=1)this.localTransforms.push(dt[$t])}}},globalToLocal:function(dt){var $t=[];$t.push(this.finalTransform);for(var kt=!0,Tt=this.comp;kt;)Tt.finalTransform?(Tt.data.hasMask&&$t.splice(0,0,Tt.finalTransform),Tt=Tt.comp):kt=!1;var Dt,Ft=$t.length,Ut;for(Dt=0;Dt<Ft;Dt+=1)Ut=$t[Dt].mat.applyToPointArray(0,0,0),dt=[dt[0]-Ut[0],dt[1]-Ut[1],0];return dt},mHelper:new Matrix};function MaskElement(et,dt,$t){this.data=et,this.element=dt,this.globalData=$t,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var kt=this.globalData.defs,Tt,Dt=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(Dt),this.solidPath="";var Ft,Ut=this.masksProperties,Ht=0,Kt=[],Yt,Jt,Zt=createElementID(),er,rr,sr,nr,ir="clipPath",or="clip-path";for(Tt=0;Tt<Dt;Tt+=1)if((Ut[Tt].mode!=="a"&&Ut[Tt].mode!=="n"||Ut[Tt].inv||Ut[Tt].o.k!==100||Ut[Tt].o.x)&&(ir="mask",or="mask"),(Ut[Tt].mode==="s"||Ut[Tt].mode==="i")&&Ht===0?(er=createNS("rect"),er.setAttribute("fill","#ffffff"),er.setAttribute("width",this.element.comp.data.w||0),er.setAttribute("height",this.element.comp.data.h||0),Kt.push(er)):er=null,Ft=createNS("path"),Ut[Tt].mode==="n")this.viewData[Tt]={op:PropertyFactory.getProp(this.element,Ut[Tt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Ut[Tt],3),elem:Ft,lastPath:""},kt.appendChild(Ft);else{Ht+=1,Ft.setAttribute("fill",Ut[Tt].mode==="s"?"#000000":"#ffffff"),Ft.setAttribute("clip-rule","nonzero");var lr;if(Ut[Tt].x.k!==0?(ir="mask",or="mask",nr=PropertyFactory.getProp(this.element,Ut[Tt].x,0,null,this.element),lr=createElementID(),rr=createNS("filter"),rr.setAttribute("id",lr),sr=createNS("feMorphology"),sr.setAttribute("operator","erode"),sr.setAttribute("in","SourceGraphic"),sr.setAttribute("radius","0"),rr.appendChild(sr),kt.appendChild(rr),Ft.setAttribute("stroke",Ut[Tt].mode==="s"?"#000000":"#ffffff")):(sr=null,nr=null),this.storedData[Tt]={elem:Ft,x:nr,expan:sr,lastPath:"",lastOperator:"",filterId:lr,lastRadius:0},Ut[Tt].mode==="i"){Jt=Kt.length;var cr=createNS("g");for(Yt=0;Yt<Jt;Yt+=1)cr.appendChild(Kt[Yt]);var dr=createNS("mask");dr.setAttribute("mask-type","alpha"),dr.setAttribute("id",Zt+"_"+Ht),dr.appendChild(Ft),kt.appendChild(dr),cr.setAttribute("mask","url("+getLocationHref()+"#"+Zt+"_"+Ht+")"),Kt.length=0,Kt.push(cr)}else Kt.push(Ft);Ut[Tt].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[Tt]={elem:Ft,lastPath:"",op:PropertyFactory.getProp(this.element,Ut[Tt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Ut[Tt],3),invRect:er},this.viewData[Tt].prop.k||this.drawPath(Ut[Tt],this.viewData[Tt].prop.v,this.viewData[Tt])}for(this.maskElement=createNS(ir),Dt=Kt.length,Tt=0;Tt<Dt;Tt+=1)this.maskElement.appendChild(Kt[Tt]);Ht>0&&(this.maskElement.setAttribute("id",Zt),this.element.maskedElement.setAttribute(or,"url("+getLocationHref()+"#"+Zt+")"),kt.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(et){return this.viewData[et].prop},MaskElement.prototype.renderFrame=function(et){var dt=this.element.finalTransform.mat,$t,kt=this.masksProperties.length;for($t=0;$t<kt;$t+=1)if((this.viewData[$t].prop._mdf||et)&&this.drawPath(this.masksProperties[$t],this.viewData[$t].prop.v,this.viewData[$t]),(this.viewData[$t].op._mdf||et)&&this.viewData[$t].elem.setAttribute("fill-opacity",this.viewData[$t].op.v),this.masksProperties[$t].mode!=="n"&&(this.viewData[$t].invRect&&(this.element.finalTransform.mProp._mdf||et)&&this.viewData[$t].invRect.setAttribute("transform",dt.getInverseMatrix().to2dCSS()),this.storedData[$t].x&&(this.storedData[$t].x._mdf||et))){var Tt=this.storedData[$t].expan;this.storedData[$t].x.v<0?(this.storedData[$t].lastOperator!=="erode"&&(this.storedData[$t].lastOperator="erode",this.storedData[$t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[$t].filterId+")")),Tt.setAttribute("radius",-this.storedData[$t].x.v)):(this.storedData[$t].lastOperator!=="dilate"&&(this.storedData[$t].lastOperator="dilate",this.storedData[$t].elem.setAttribute("filter",null)),this.storedData[$t].elem.setAttribute("stroke-width",this.storedData[$t].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var et="M0,0 ";return et+=" h"+this.globalData.compSize.w,et+=" v"+this.globalData.compSize.h,et+=" h-"+this.globalData.compSize.w,et+=" v-"+this.globalData.compSize.h+" ",et},MaskElement.prototype.drawPath=function(et,dt,$t){var kt=" M"+dt.v[0][0]+","+dt.v[0][1],Tt,Dt;for(Dt=dt._length,Tt=1;Tt<Dt;Tt+=1)kt+=" C"+dt.o[Tt-1][0]+","+dt.o[Tt-1][1]+" "+dt.i[Tt][0]+","+dt.i[Tt][1]+" "+dt.v[Tt][0]+","+dt.v[Tt][1];if(dt.c&&Dt>1&&(kt+=" C"+dt.o[Tt-1][0]+","+dt.o[Tt-1][1]+" "+dt.i[0][0]+","+dt.i[0][1]+" "+dt.v[0][0]+","+dt.v[0][1]),$t.lastPath!==kt){var Ft="";$t.elem&&(dt.c&&(Ft=et.inv?this.solidPath+kt:kt),$t.elem.setAttribute("d",Ft)),$t.lastPath=kt}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var et={};et.createFilter=dt,et.createAlphaToLuminanceFilter=$t;function dt(kt,Tt){var Dt=createNS("filter");return Dt.setAttribute("id",kt),Tt!==!0&&(Dt.setAttribute("filterUnits","objectBoundingBox"),Dt.setAttribute("x","0%"),Dt.setAttribute("y","0%"),Dt.setAttribute("width","100%"),Dt.setAttribute("height","100%")),Dt}function $t(){var kt=createNS("feColorMatrix");return kt.setAttribute("type","matrix"),kt.setAttribute("color-interpolation-filters","sRGB"),kt.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),kt}return et}(),featureSupport=function(){var et={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(et.maskType=!1),/firefox/i.test(navigator.userAgent)&&(et.svgLumaHidden=!1),et}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(et){var dt,$t="SourceGraphic",kt=et.data.ef?et.data.ef.length:0,Tt=createElementID(),Dt=filtersFactory.createFilter(Tt,!0),Ft=0;this.filters=[];var Ut;for(dt=0;dt<kt;dt+=1){Ut=null;var Ht=et.data.ef[dt].ty;if(registeredEffects$1[Ht]){var Kt=registeredEffects$1[Ht].effect;Ut=new Kt(Dt,et.effectsManager.effectElements[dt],et,idPrefix+Ft,$t),$t=idPrefix+Ft,registeredEffects$1[Ht].countsAsEffect&&(Ft+=1)}Ut&&this.filters.push(Ut)}Ft&&(et.globalData.defs.appendChild(Dt),et.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+Tt+")")),this.filters.length&&et.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(et){var dt,$t=this.filters.length;for(dt=0;dt<$t;dt+=1)this.filters[dt].renderFrame(et)},SVGEffects.prototype.getEffects=function(et){var dt,$t=this.filters.length,kt=[];for(dt=0;dt<$t;dt+=1)this.filters[dt].type===et&&kt.push(this.filters[dt]);return kt};function registerEffect$1(et,dt,$t){registeredEffects$1[et]={effect:dt,countsAsEffect:$t}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var dt=null;if(this.data.td){this.matteMasks={};var $t=createNS("g");$t.setAttribute("id",this.layerId),$t.appendChild(this.layerElement),dt=$t,this.globalData.defs.appendChild($t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),dt=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var kt=createNS("clipPath"),Tt=createNS("path");Tt.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var Dt=createElementID();if(kt.setAttribute("id",Dt),kt.appendChild(Tt),this.globalData.defs.appendChild(kt),this.checkMasks()){var Ft=createNS("g");Ft.setAttribute("clip-path","url("+getLocationHref()+"#"+Dt+")"),Ft.appendChild(this.layerElement),this.transformedElement=Ft,dt?dt.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Dt+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(dt){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[dt]){var $t=this.layerId+"_"+dt,kt,Tt,Dt,Ft;if(dt===1||dt===3){var Ut=createNS("mask");Ut.setAttribute("id",$t),Ut.setAttribute("mask-type",dt===3?"luminance":"alpha"),Dt=createNS("use"),Dt.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Ut.appendChild(Dt),this.globalData.defs.appendChild(Ut),!featureSupport.maskType&&dt===1&&(Ut.setAttribute("mask-type","luminance"),kt=createElementID(),Tt=filtersFactory.createFilter(kt),this.globalData.defs.appendChild(Tt),Tt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Ft=createNS("g"),Ft.appendChild(Dt),Ut.appendChild(Ft),Ft.setAttribute("filter","url("+getLocationHref()+"#"+kt+")"))}else if(dt===2){var Ht=createNS("mask");Ht.setAttribute("id",$t),Ht.setAttribute("mask-type","alpha");var Kt=createNS("g");Ht.appendChild(Kt),kt=createElementID(),Tt=filtersFactory.createFilter(kt);var Yt=createNS("feComponentTransfer");Yt.setAttribute("in","SourceGraphic"),Tt.appendChild(Yt);var Jt=createNS("feFuncA");Jt.setAttribute("type","table"),Jt.setAttribute("tableValues","1.0 0.0"),Yt.appendChild(Jt),this.globalData.defs.appendChild(Tt);var Zt=createNS("rect");Zt.setAttribute("width",this.comp.data.w),Zt.setAttribute("height",this.comp.data.h),Zt.setAttribute("x","0"),Zt.setAttribute("y","0"),Zt.setAttribute("fill","#ffffff"),Zt.setAttribute("opacity","0"),Kt.setAttribute("filter","url("+getLocationHref()+"#"+kt+")"),Kt.appendChild(Zt),Dt=createNS("use"),Dt.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Kt.appendChild(Dt),featureSupport.maskType||(Ht.setAttribute("mask-type","luminance"),Tt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Ft=createNS("g"),Kt.appendChild(Zt),Ft.appendChild(this.layerElement),Kt.appendChild(Ft)),this.globalData.defs.appendChild(Ht)}this.matteMasks[dt]=$t}return this.matteMasks[dt]},setMatte:function(dt){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+dt+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(dt){this.hierarchy=dt},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var et={initElement:function($t,kt,Tt){this.initFrame(),this.initBaseData($t,kt,Tt),this.initTransform($t,kt,Tt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var $t=this.baseElement||this.layerElement;$t.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var $t=this.baseElement||this.layerElement;$t.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function($t){this._mdf=!1,this.prepareRenderableFrame($t),this.prepareProperties($t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(et)],RenderableDOMElement)})();function IImageElement(et,dt,$t){this.assetData=dt.getAssetData(et.refId),this.assetData&&this.assetData.sid&&(this.assetData=dt.slotManager.getProp(this.assetData)),this.initElement(et,dt,$t),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var et=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",et),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(et,dt){this.elem=et,this.pos=dt}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(dt){var $t,kt=this.shapeModifiers.length;for($t=0;$t<kt;$t+=1)this.shapeModifiers[$t].addShape(dt)},isShapeInAnimatedModifiers:function(dt){for(var $t=0,kt=this.shapeModifiers.length;$t<kt;)if(this.shapeModifiers[$t].isAnimatedWithShape(dt))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var dt,$t=this.shapes.length;for(dt=0;dt<$t;dt+=1)this.shapes[dt].sh.reset();$t=this.shapeModifiers.length;var kt;for(dt=$t-1;dt>=0&&(kt=this.shapeModifiers[dt].processShapes(this._isFirstFrame),!kt);dt-=1);}},searchProcessedElement:function(dt){for(var $t=this.processedElements,kt=0,Tt=$t.length;kt<Tt;){if($t[kt].elem===dt)return $t[kt].pos;kt+=1}return 0},addProcessedElement:function(dt,$t){for(var kt=this.processedElements,Tt=kt.length;Tt;)if(Tt-=1,kt[Tt].elem===dt){kt[Tt].pos=$t;return}kt.push(new ProcessedElement(dt,$t))},prepareFrame:function(dt){this.prepareRenderableFrame(dt),this.prepareProperties(dt,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(et,dt,$t){this.caches=[],this.styles=[],this.transformers=et,this.lStr="",this.sh=$t,this.lvl=dt,this._isAnimated=!!$t.k;for(var kt=0,Tt=et.length;kt<Tt;){if(et[kt].mProps.dynamicProperties.length){this._isAnimated=!0;break}kt+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(et,dt){this.data=et,this.type=et.ty,this.d="",this.lvl=dt,this._mdf=!1,this.closed=et.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(et,dt,$t,kt){this.elem=et,this.frameId=-1,this.dataProps=createSizedArray(dt.length),this.renderer=$t,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",dt.length?dt.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(kt);var Tt,Dt=dt.length||0,Ft;for(Tt=0;Tt<Dt;Tt+=1)Ft=PropertyFactory.getProp(et,dt[Tt].v,0,0,this),this.k=Ft.k||this.k,this.dataProps[Tt]={n:dt[Tt].n,p:Ft};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(et){if(!(this.elem.globalData.frameId===this.frameId&&!et)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||et,this._mdf)){var dt=0,$t=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),dt=0;dt<$t;dt+=1)this.dataProps[dt].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[dt].p.v:this.dashArray[dt]=this.dataProps[dt].p.v:this.dashoffset[0]=this.dataProps[dt].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(et,dt,$t){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(et,dt.o,0,.01,this),this.w=PropertyFactory.getProp(et,dt.w,0,null,this),this.d=new DashProperty(et,dt.d||{},"svg",this),this.c=PropertyFactory.getProp(et,dt.c,1,255,this),this.style=$t,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(et,dt,$t){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(et,dt.o,0,.01,this),this.c=PropertyFactory.getProp(et,dt.c,1,255,this),this.style=$t}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(et,dt,$t){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.style=$t}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(et,dt,$t){this.data=dt,this.c=createTypedArray("uint8c",dt.p*4);var kt=dt.k.k[0].s?dt.k.k[0].s.length-dt.p*4:dt.k.k.length-dt.p*4;this.o=createTypedArray("float32",kt),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=kt,this.initDynamicPropertyContainer($t),this.prop=PropertyFactory.getProp(et,dt.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(et,dt){for(var $t=0,kt=this.o.length/2,Tt;$t<kt;){if(Tt=Math.abs(et[$t*4]-et[dt*4+$t*2]),Tt>.01)return!1;$t+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var et=0,dt=this.data.k.k.length;et<dt;){if(!this.comparePoints(this.data.k.k[et].s,this.data.p))return!1;et+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(et){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||et){var dt,$t=this.data.p*4,kt,Tt;for(dt=0;dt<$t;dt+=1)kt=dt%4===0?100:255,Tt=Math.round(this.prop.v[dt]*kt),this.c[dt]!==Tt&&(this.c[dt]=Tt,this._cmdf=!et);if(this.o.length)for($t=this.prop.v.length,dt=this.data.p*4;dt<$t;dt+=1)kt=dt%2===0?100:1,Tt=dt%2===0?Math.round(this.prop.v[dt]*100):this.prop.v[dt],this.o[dt-this.data.p*4]!==Tt&&(this.o[dt-this.data.p*4]=Tt,this._omdf=!et);this._mdf=!et}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(et,dt,$t){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.initGradientData(et,dt,$t)}SVGGradientFillStyleData.prototype.initGradientData=function(et,dt,$t){this.o=PropertyFactory.getProp(et,dt.o,0,.01,this),this.s=PropertyFactory.getProp(et,dt.s,1,null,this),this.e=PropertyFactory.getProp(et,dt.e,1,null,this),this.h=PropertyFactory.getProp(et,dt.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(et,dt.a||{k:0},0,degToRads,this),this.g=new GradientProperty(et,dt.g,this),this.style=$t,this.stops=[],this.setGradientData($t.pElem,dt),this.setGradientOpacity(dt,$t),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(et,dt){var $t=createElementID(),kt=createNS(dt.t===1?"linearGradient":"radialGradient");kt.setAttribute("id",$t),kt.setAttribute("spreadMethod","pad"),kt.setAttribute("gradientUnits","userSpaceOnUse");var Tt=[],Dt,Ft,Ut;for(Ut=dt.g.p*4,Ft=0;Ft<Ut;Ft+=4)Dt=createNS("stop"),kt.appendChild(Dt),Tt.push(Dt);et.setAttribute(dt.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+$t+")"),this.gf=kt,this.cst=Tt},SVGGradientFillStyleData.prototype.setGradientOpacity=function(et,dt){if(this.g._hasOpacity&&!this.g._collapsable){var $t,kt,Tt,Dt=createNS("mask"),Ft=createNS("path");Dt.appendChild(Ft);var Ut=createElementID(),Ht=createElementID();Dt.setAttribute("id",Ht);var Kt=createNS(et.t===1?"linearGradient":"radialGradient");Kt.setAttribute("id",Ut),Kt.setAttribute("spreadMethod","pad"),Kt.setAttribute("gradientUnits","userSpaceOnUse"),Tt=et.g.k.k[0].s?et.g.k.k[0].s.length:et.g.k.k.length;var Yt=this.stops;for(kt=et.g.p*4;kt<Tt;kt+=2)$t=createNS("stop"),$t.setAttribute("stop-color","rgb(255,255,255)"),Kt.appendChild($t),Yt.push($t);Ft.setAttribute(et.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+Ut+")"),et.ty==="gs"&&(Ft.setAttribute("stroke-linecap",lineCapEnum[et.lc||2]),Ft.setAttribute("stroke-linejoin",lineJoinEnum[et.lj||2]),et.lj===1&&Ft.setAttribute("stroke-miterlimit",et.ml)),this.of=Kt,this.ms=Dt,this.ost=Yt,this.maskId=Ht,dt.msElem=Ft}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(et,dt,$t){this.initDynamicPropertyContainer(et),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(et,dt.w,0,null,this),this.d=new DashProperty(et,dt.d||{},"svg",this),this.initGradientData(et,dt,$t),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(et,dt,$t){this.transform={mProps:et,op:dt,container:$t},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(dt,$t,kt,Tt){if($t===0)return"";var Dt=dt.o,Ft=dt.i,Ut=dt.v,Ht,Kt=" M"+Tt.applyToPointStringified(Ut[0][0],Ut[0][1]);for(Ht=1;Ht<$t;Ht+=1)Kt+=" C"+Tt.applyToPointStringified(Dt[Ht-1][0],Dt[Ht-1][1])+" "+Tt.applyToPointStringified(Ft[Ht][0],Ft[Ht][1])+" "+Tt.applyToPointStringified(Ut[Ht][0],Ut[Ht][1]);return kt&&$t&&(Kt+=" C"+Tt.applyToPointStringified(Dt[Ht-1][0],Dt[Ht-1][1])+" "+Tt.applyToPointStringified(Ft[0][0],Ft[0][1])+" "+Tt.applyToPointStringified(Ut[0][0],Ut[0][1]),Kt+="z"),Kt},SVGElementsRenderer=function(){var et=new Matrix,dt=new Matrix,$t={createRenderFunction:kt};function kt(Jt){switch(Jt.ty){case"fl":return Ut;case"gf":return Kt;case"gs":return Ht;case"st":return Yt;case"sh":case"el":case"rc":case"sr":return Ft;case"tr":return Tt;case"no":return Dt;default:return null}}function Tt(Jt,Zt,er){(er||Zt.transform.op._mdf)&&Zt.transform.container.setAttribute("opacity",Zt.transform.op.v),(er||Zt.transform.mProps._mdf)&&Zt.transform.container.setAttribute("transform",Zt.transform.mProps.v.to2dCSS())}function Dt(){}function Ft(Jt,Zt,er){var rr,sr,nr,ir,or,lr,cr=Zt.styles.length,dr=Zt.lvl,ur,pr,mr,jr;for(lr=0;lr<cr;lr+=1){if(ir=Zt.sh._mdf||er,Zt.styles[lr].lvl<dr){for(pr=dt.reset(),mr=dr-Zt.styles[lr].lvl,jr=Zt.transformers.length-1;!ir&&mr>0;)ir=Zt.transformers[jr].mProps._mdf||ir,mr-=1,jr-=1;if(ir)for(mr=dr-Zt.styles[lr].lvl,jr=Zt.transformers.length-1;mr>0;)pr.multiply(Zt.transformers[jr].mProps.v),mr-=1,jr-=1}else pr=et;if(ur=Zt.sh.paths,sr=ur._length,ir){for(nr="",rr=0;rr<sr;rr+=1)or=ur.shapes[rr],or&&or._length&&(nr+=buildShapeString(or,or._length,or.c,pr));Zt.caches[lr]=nr}else nr=Zt.caches[lr];Zt.styles[lr].d+=Jt.hd===!0?"":nr,Zt.styles[lr]._mdf=ir||Zt.styles[lr]._mdf}}function Ut(Jt,Zt,er){var rr=Zt.style;(Zt.c._mdf||er)&&rr.pElem.setAttribute("fill","rgb("+bmFloor(Zt.c.v[0])+","+bmFloor(Zt.c.v[1])+","+bmFloor(Zt.c.v[2])+")"),(Zt.o._mdf||er)&&rr.pElem.setAttribute("fill-opacity",Zt.o.v)}function Ht(Jt,Zt,er){Kt(Jt,Zt,er),Yt(Jt,Zt,er)}function Kt(Jt,Zt,er){var rr=Zt.gf,sr=Zt.g._hasOpacity,nr=Zt.s.v,ir=Zt.e.v;if(Zt.o._mdf||er){var or=Jt.ty==="gf"?"fill-opacity":"stroke-opacity";Zt.style.pElem.setAttribute(or,Zt.o.v)}if(Zt.s._mdf||er){var lr=Jt.t===1?"x1":"cx",cr=lr==="x1"?"y1":"cy";rr.setAttribute(lr,nr[0]),rr.setAttribute(cr,nr[1]),sr&&!Zt.g._collapsable&&(Zt.of.setAttribute(lr,nr[0]),Zt.of.setAttribute(cr,nr[1]))}var dr,ur,pr,mr;if(Zt.g._cmdf||er){dr=Zt.cst;var jr=Zt.g.c;for(pr=dr.length,ur=0;ur<pr;ur+=1)mr=dr[ur],mr.setAttribute("offset",jr[ur*4]+"%"),mr.setAttribute("stop-color","rgb("+jr[ur*4+1]+","+jr[ur*4+2]+","+jr[ur*4+3]+")")}if(sr&&(Zt.g._omdf||er)){var Rr=Zt.g.o;for(Zt.g._collapsable?dr=Zt.cst:dr=Zt.ost,pr=dr.length,ur=0;ur<pr;ur+=1)mr=dr[ur],Zt.g._collapsable||mr.setAttribute("offset",Rr[ur*2]+"%"),mr.setAttribute("stop-opacity",Rr[ur*2+1])}if(Jt.t===1)(Zt.e._mdf||er)&&(rr.setAttribute("x2",ir[0]),rr.setAttribute("y2",ir[1]),sr&&!Zt.g._collapsable&&(Zt.of.setAttribute("x2",ir[0]),Zt.of.setAttribute("y2",ir[1])));else{var xr;if((Zt.s._mdf||Zt.e._mdf||er)&&(xr=Math.sqrt(Math.pow(nr[0]-ir[0],2)+Math.pow(nr[1]-ir[1],2)),rr.setAttribute("r",xr),sr&&!Zt.g._collapsable&&Zt.of.setAttribute("r",xr)),Zt.e._mdf||Zt.h._mdf||Zt.a._mdf||er){xr||(xr=Math.sqrt(Math.pow(nr[0]-ir[0],2)+Math.pow(nr[1]-ir[1],2)));var kr=Math.atan2(ir[1]-nr[1],ir[0]-nr[0]),Mr=Zt.h.v;Mr>=1?Mr=.99:Mr<=-1&&(Mr=-.99);var Tr=xr*Mr,Or=Math.cos(kr+Zt.a.v)*Tr+nr[0],_r=Math.sin(kr+Zt.a.v)*Tr+nr[1];rr.setAttribute("fx",Or),rr.setAttribute("fy",_r),sr&&!Zt.g._collapsable&&(Zt.of.setAttribute("fx",Or),Zt.of.setAttribute("fy",_r))}}}function Yt(Jt,Zt,er){var rr=Zt.style,sr=Zt.d;sr&&(sr._mdf||er)&&sr.dashStr&&(rr.pElem.setAttribute("stroke-dasharray",sr.dashStr),rr.pElem.setAttribute("stroke-dashoffset",sr.dashoffset[0])),Zt.c&&(Zt.c._mdf||er)&&rr.pElem.setAttribute("stroke","rgb("+bmFloor(Zt.c.v[0])+","+bmFloor(Zt.c.v[1])+","+bmFloor(Zt.c.v[2])+")"),(Zt.o._mdf||er)&&rr.pElem.setAttribute("stroke-opacity",Zt.o.v),(Zt.w._mdf||er)&&(rr.pElem.setAttribute("stroke-width",Zt.w.v),rr.msElem&&rr.msElem.setAttribute("stroke-width",Zt.w.v))}return $t}();function SVGShapeElement(et,dt,$t){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(et,dt,$t),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var et,dt=this.shapes.length,$t,kt,Tt=this.stylesList.length,Dt,Ft=[],Ut=!1;for(kt=0;kt<Tt;kt+=1){for(Dt=this.stylesList[kt],Ut=!1,Ft.length=0,et=0;et<dt;et+=1)$t=this.shapes[et],$t.styles.indexOf(Dt)!==-1&&(Ft.push($t),Ut=$t._isAnimated||Ut);Ft.length>1&&Ut&&this.setShapesAsAnimated(Ft)}},SVGShapeElement.prototype.setShapesAsAnimated=function(et){var dt,$t=et.length;for(dt=0;dt<$t;dt+=1)et[dt].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(et,dt){var $t,kt=new SVGStyleData(et,dt),Tt=kt.pElem;if(et.ty==="st")$t=new SVGStrokeStyleData(this,et,kt);else if(et.ty==="fl")$t=new SVGFillStyleData(this,et,kt);else if(et.ty==="gf"||et.ty==="gs"){var Dt=et.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;$t=new Dt(this,et,kt),this.globalData.defs.appendChild($t.gf),$t.maskId&&(this.globalData.defs.appendChild($t.ms),this.globalData.defs.appendChild($t.of),Tt.setAttribute("mask","url("+getLocationHref()+"#"+$t.maskId+")"))}else et.ty==="no"&&($t=new SVGNoStyleData(this,et,kt));return(et.ty==="st"||et.ty==="gs")&&(Tt.setAttribute("stroke-linecap",lineCapEnum[et.lc||2]),Tt.setAttribute("stroke-linejoin",lineJoinEnum[et.lj||2]),Tt.setAttribute("fill-opacity","0"),et.lj===1&&Tt.setAttribute("stroke-miterlimit",et.ml)),et.r===2&&Tt.setAttribute("fill-rule","evenodd"),et.ln&&Tt.setAttribute("id",et.ln),et.cl&&Tt.setAttribute("class",et.cl),et.bm&&(Tt.style["mix-blend-mode"]=getBlendMode(et.bm)),this.stylesList.push(kt),this.addToAnimatedContents(et,$t),$t},SVGShapeElement.prototype.createGroupElement=function(et){var dt=new ShapeGroupData;return et.ln&&dt.gr.setAttribute("id",et.ln),et.cl&&dt.gr.setAttribute("class",et.cl),et.bm&&(dt.gr.style["mix-blend-mode"]=getBlendMode(et.bm)),dt},SVGShapeElement.prototype.createTransformElement=function(et,dt){var $t=TransformPropertyFactory.getTransformProperty(this,et,this),kt=new SVGTransformData($t,$t.o,dt);return this.addToAnimatedContents(et,kt),kt},SVGShapeElement.prototype.createShapeElement=function(et,dt,$t){var kt=4;et.ty==="rc"?kt=5:et.ty==="el"?kt=6:et.ty==="sr"&&(kt=7);var Tt=ShapePropertyFactory.getShapeProp(this,et,kt,this),Dt=new SVGShapeData(dt,$t,Tt);return this.shapes.push(Dt),this.addShapeToModifiers(Dt),this.addToAnimatedContents(et,Dt),Dt},SVGShapeElement.prototype.addToAnimatedContents=function(et,dt){for(var $t=0,kt=this.animatedContents.length;$t<kt;){if(this.animatedContents[$t].element===dt)return;$t+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(et),element:dt,data:et})},SVGShapeElement.prototype.setElementStyles=function(et){var dt=et.styles,$t,kt=this.stylesList.length;for($t=0;$t<kt;$t+=1)this.stylesList[$t].closed||dt.push(this.stylesList[$t])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var et,dt=this.itemsData.length;for(et=0;et<dt;et+=1)this.prevViewData[et]=this.itemsData[et];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),dt=this.dynamicProperties.length,et=0;et<dt;et+=1)this.dynamicProperties[et].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(et,dt,$t,kt,Tt,Dt,Ft){var Ut=[].concat(Dt),Ht,Kt=et.length-1,Yt,Jt,Zt=[],er=[],rr,sr,nr;for(Ht=Kt;Ht>=0;Ht-=1){if(nr=this.searchProcessedElement(et[Ht]),nr?dt[Ht]=$t[nr-1]:et[Ht]._render=Ft,et[Ht].ty==="fl"||et[Ht].ty==="st"||et[Ht].ty==="gf"||et[Ht].ty==="gs"||et[Ht].ty==="no")nr?dt[Ht].style.closed=!1:dt[Ht]=this.createStyleElement(et[Ht],Tt),et[Ht]._render&&dt[Ht].style.pElem.parentNode!==kt&&kt.appendChild(dt[Ht].style.pElem),Zt.push(dt[Ht].style);else if(et[Ht].ty==="gr"){if(!nr)dt[Ht]=this.createGroupElement(et[Ht]);else for(Jt=dt[Ht].it.length,Yt=0;Yt<Jt;Yt+=1)dt[Ht].prevViewData[Yt]=dt[Ht].it[Yt];this.searchShapes(et[Ht].it,dt[Ht].it,dt[Ht].prevViewData,dt[Ht].gr,Tt+1,Ut,Ft),et[Ht]._render&&dt[Ht].gr.parentNode!==kt&&kt.appendChild(dt[Ht].gr)}else et[Ht].ty==="tr"?(nr||(dt[Ht]=this.createTransformElement(et[Ht],kt)),rr=dt[Ht].transform,Ut.push(rr)):et[Ht].ty==="sh"||et[Ht].ty==="rc"||et[Ht].ty==="el"||et[Ht].ty==="sr"?(nr||(dt[Ht]=this.createShapeElement(et[Ht],Ut,Tt)),this.setElementStyles(dt[Ht])):et[Ht].ty==="tm"||et[Ht].ty==="rd"||et[Ht].ty==="ms"||et[Ht].ty==="pb"||et[Ht].ty==="zz"||et[Ht].ty==="op"?(nr?(sr=dt[Ht],sr.closed=!1):(sr=ShapeModifiers.getModifier(et[Ht].ty),sr.init(this,et[Ht]),dt[Ht]=sr,this.shapeModifiers.push(sr)),er.push(sr)):et[Ht].ty==="rp"&&(nr?(sr=dt[Ht],sr.closed=!0):(sr=ShapeModifiers.getModifier(et[Ht].ty),dt[Ht]=sr,sr.init(this,et,Ht,dt),this.shapeModifiers.push(sr),Ft=!1),er.push(sr));this.addProcessedElement(et[Ht],Ht+1)}for(Kt=Zt.length,Ht=0;Ht<Kt;Ht+=1)Zt[Ht].closed=!0;for(Kt=er.length,Ht=0;Ht<Kt;Ht+=1)er[Ht].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var et,dt=this.stylesList.length;for(et=0;et<dt;et+=1)this.stylesList[et].reset();for(this.renderShape(),et=0;et<dt;et+=1)(this.stylesList[et]._mdf||this._isFirstFrame)&&(this.stylesList[et].msElem&&(this.stylesList[et].msElem.setAttribute("d",this.stylesList[et].d),this.stylesList[et].d="M0 0"+this.stylesList[et].d),this.stylesList[et].pElem.setAttribute("d",this.stylesList[et].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var et,dt=this.animatedContents.length,$t;for(et=0;et<dt;et+=1)$t=this.animatedContents[et],(this._isFirstFrame||$t.element._isAnimated)&&$t.data!==!0&&$t.fn($t.data,$t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(et,dt,$t,kt,Tt,Dt){this.o=et,this.sw=dt,this.sc=$t,this.fc=kt,this.m=Tt,this.p=Dt,this._mdf={o:!0,sw:!!dt,sc:!!$t,fc:!!kt,m:!0,p:!0}}LetterProps.prototype.update=function(et,dt,$t,kt,Tt,Dt){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var Ft=!1;return this.o!==et&&(this.o=et,this._mdf.o=!0,Ft=!0),this.sw!==dt&&(this.sw=dt,this._mdf.sw=!0,Ft=!0),this.sc!==$t&&(this.sc=$t,this._mdf.sc=!0,Ft=!0),this.fc!==kt&&(this.fc=kt,this._mdf.fc=!0,Ft=!0),this.m!==Tt&&(this.m=Tt,this._mdf.m=!0,Ft=!0),Dt.length&&(this.p[0]!==Dt[0]||this.p[1]!==Dt[1]||this.p[4]!==Dt[4]||this.p[5]!==Dt[5]||this.p[12]!==Dt[12]||this.p[13]!==Dt[13])&&(this.p=Dt,this._mdf.p=!0,Ft=!0),Ft};function TextProperty(et,dt){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,dt.d&&dt.d.sid&&(dt.d=et.globalData.slotManager.getProp(dt.d)),this.data=dt,this.elem=et,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(et,dt){for(var $t in dt)Object.prototype.hasOwnProperty.call(dt,$t)&&(et[$t]=dt[$t]);return et},TextProperty.prototype.setCurrentData=function(et){et.__complete||this.completeTextData(et),this.currentData=et,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(et){this.effectsSequence.push(et),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(et){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!et)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var dt=this.currentData,$t=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var kt,Tt=this.effectsSequence.length,Dt=et||this.data.d.k[this.keysIndex].s;for(kt=0;kt<Tt;kt+=1)$t!==this.keysIndex?Dt=this.effectsSequence[kt](Dt,Dt.t):Dt=this.effectsSequence[kt](this.currentData,Dt.t);dt!==Dt&&this.setCurrentData(Dt),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var et=this.data.d.k,dt=this.elem.comp.renderedFrame,$t=0,kt=et.length;$t<=kt-1&&!($t===kt-1||et[$t+1].t>dt);)$t+=1;return this.keysIndex!==$t&&(this.keysIndex=$t),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(et){for(var dt=[],$t=0,kt=et.length,Tt,Dt,Ft=!1,Ut=!1,Ht="";$t<kt;)Ft=Ut,Ut=!1,Tt=et.charCodeAt($t),Ht=et.charAt($t),FontManager.isCombinedCharacter(Tt)?Ft=!0:Tt>=55296&&Tt<=56319?FontManager.isRegionalFlag(et,$t)?Ht=et.substr($t,14):(Dt=et.charCodeAt($t+1),Dt>=56320&&Dt<=57343&&(FontManager.isModifier(Tt,Dt)?(Ht=et.substr($t,2),Ft=!0):FontManager.isFlagEmoji(et.substr($t,4))?Ht=et.substr($t,4):Ht=et.substr($t,2))):Tt>56319?(Dt=et.charCodeAt($t+1),FontManager.isVariationSelector(Tt)&&(Ft=!0)):FontManager.isZeroWidthJoiner(Tt)&&(Ft=!0,Ut=!0),Ft?(dt[dt.length-1]+=Ht,Ft=!1):dt.push(Ht),$t+=Ht.length;return dt},TextProperty.prototype.completeTextData=function(et){et.__complete=!0;var dt=this.elem.globalData.fontManager,$t=this.data,kt=[],Tt,Dt,Ft,Ut=0,Ht,Kt=$t.m.g,Yt=0,Jt=0,Zt=0,er=[],rr=0,sr=0,nr,ir,or=dt.getFontByName(et.f),lr,cr=0,dr=getFontProperties(or);et.fWeight=dr.weight,et.fStyle=dr.style,et.finalSize=et.s,et.finalText=this.buildFinalText(et.t),Dt=et.finalText.length,et.finalLineHeight=et.lh;var ur=et.tr/1e3*et.finalSize,pr;if(et.sz)for(var mr=!0,jr=et.sz[0],Rr=et.sz[1],xr,kr;mr;){kr=this.buildFinalText(et.t),xr=0,rr=0,Dt=kr.length,ur=et.tr/1e3*et.finalSize;var Mr=-1;for(Tt=0;Tt<Dt;Tt+=1)pr=kr[Tt].charCodeAt(0),Ft=!1,kr[Tt]===" "?Mr=Tt:(pr===13||pr===3)&&(rr=0,Ft=!0,xr+=et.finalLineHeight||et.finalSize*1.2),dt.chars?(lr=dt.getCharData(kr[Tt],or.fStyle,or.fFamily),cr=Ft?0:lr.w*et.finalSize/100):cr=dt.measureText(kr[Tt],et.f,et.finalSize),rr+cr>jr&&kr[Tt]!==" "?(Mr===-1?Dt+=1:Tt=Mr,xr+=et.finalLineHeight||et.finalSize*1.2,kr.splice(Tt,Mr===Tt?1:0,"\r"),Mr=-1,rr=0):(rr+=cr,rr+=ur);xr+=or.ascent*et.finalSize/100,this.canResize&&et.finalSize>this.minimumFontSize&&Rr<xr?(et.finalSize-=1,et.finalLineHeight=et.finalSize*et.lh/et.s):(et.finalText=kr,Dt=et.finalText.length,mr=!1)}rr=-ur,cr=0;var Tr=0,Or;for(Tt=0;Tt<Dt;Tt+=1)if(Ft=!1,Or=et.finalText[Tt],pr=Or.charCodeAt(0),pr===13||pr===3?(Tr=0,er.push(rr),sr=rr>sr?rr:sr,rr=-2*ur,Ht="",Ft=!0,Zt+=1):Ht=Or,dt.chars?(lr=dt.getCharData(Or,or.fStyle,dt.getFontByName(et.f).fFamily),cr=Ft?0:lr.w*et.finalSize/100):cr=dt.measureText(Ht,et.f,et.finalSize),Or===" "?Tr+=cr+ur:(rr+=cr+ur+Tr,Tr=0),kt.push({l:cr,an:cr,add:Yt,n:Ft,anIndexes:[],val:Ht,line:Zt,animatorJustifyOffset:0}),Kt==2){if(Yt+=cr,Ht===""||Ht===" "||Tt===Dt-1){for((Ht===""||Ht===" ")&&(Yt-=cr);Jt<=Tt;)kt[Jt].an=Yt,kt[Jt].ind=Ut,kt[Jt].extra=cr,Jt+=1;Ut+=1,Yt=0}}else if(Kt==3){if(Yt+=cr,Ht===""||Tt===Dt-1){for(Ht===""&&(Yt-=cr);Jt<=Tt;)kt[Jt].an=Yt,kt[Jt].ind=Ut,kt[Jt].extra=cr,Jt+=1;Yt=0,Ut+=1}}else kt[Ut].ind=Ut,kt[Ut].extra=0,Ut+=1;if(et.l=kt,sr=rr>sr?rr:sr,er.push(rr),et.sz)et.boxWidth=et.sz[0],et.justifyOffset=0;else switch(et.boxWidth=sr,et.j){case 1:et.justifyOffset=-et.boxWidth;break;case 2:et.justifyOffset=-et.boxWidth/2;break;default:et.justifyOffset=0}et.lineWidths=er;var _r=$t.a,Pr,br;ir=_r.length;var wr,zr,Hr=[];for(nr=0;nr<ir;nr+=1){for(Pr=_r[nr],Pr.a.sc&&(et.strokeColorAnim=!0),Pr.a.sw&&(et.strokeWidthAnim=!0),(Pr.a.fc||Pr.a.fh||Pr.a.fs||Pr.a.fb)&&(et.fillColorAnim=!0),zr=0,wr=Pr.s.b,Tt=0;Tt<Dt;Tt+=1)br=kt[Tt],br.anIndexes[nr]=zr,(wr==1&&br.val!==""||wr==2&&br.val!==""&&br.val!==" "||wr==3&&(br.n||br.val==" "||Tt==Dt-1)||wr==4&&(br.n||Tt==Dt-1))&&(Pr.s.rn===1&&Hr.push(zr),zr+=1);$t.a[nr].s.totalChars=zr;var Yr=-1,es;if(Pr.s.rn===1)for(Tt=0;Tt<Dt;Tt+=1)br=kt[Tt],Yr!=br.anIndexes[nr]&&(Yr=br.anIndexes[nr],es=Hr.splice(Math.floor(Math.random()*Hr.length),1)[0]),br.anIndexes[nr]=es}et.yOffset=et.finalLineHeight||et.finalSize*1.2,et.ls=et.ls||0,et.ascent=or.ascent*et.finalSize/100},TextProperty.prototype.updateDocumentData=function(et,dt){dt=dt===void 0?this.keysIndex:dt;var $t=this.copyData({},this.data.d.k[dt].s);$t=this.copyData($t,et),this.data.d.k[dt].s=$t,this.recalculate(dt),this.setCurrentData($t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(et){var dt=this.data.d.k[et].s;dt.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(dt)},TextProperty.prototype.canResizeFont=function(et){this.canResize=et,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(et){this.minimumFontSize=Math.floor(et)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var et=Math.max,dt=Math.min,$t=Math.floor;function kt(Dt,Ft){this._currentTextLength=-1,this.k=!1,this.data=Ft,this.elem=Dt,this.comp=Dt.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(Dt),this.s=PropertyFactory.getProp(Dt,Ft.s||{k:0},0,0,this),"e"in Ft?this.e=PropertyFactory.getProp(Dt,Ft.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(Dt,Ft.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(Dt,Ft.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(Dt,Ft.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(Dt,Ft.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(Dt,Ft.a,0,.01,this),this.dynamicProperties.length||this.getValue()}kt.prototype={getMult:function(Ft){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var Ut=0,Ht=0,Kt=1,Yt=1;this.ne.v>0?Ut=this.ne.v/100:Ht=-this.ne.v/100,this.xe.v>0?Kt=1-this.xe.v/100:Yt=1+this.xe.v/100;var Jt=BezierFactory.getBezierEasing(Ut,Ht,Kt,Yt).get,Zt=0,er=this.finalS,rr=this.finalE,sr=this.data.sh;if(sr===2)rr===er?Zt=Ft>=rr?1:0:Zt=et(0,dt(.5/(rr-er)+(Ft-er)/(rr-er),1)),Zt=Jt(Zt);else if(sr===3)rr===er?Zt=Ft>=rr?0:1:Zt=1-et(0,dt(.5/(rr-er)+(Ft-er)/(rr-er),1)),Zt=Jt(Zt);else if(sr===4)rr===er?Zt=0:(Zt=et(0,dt(.5/(rr-er)+(Ft-er)/(rr-er),1)),Zt<.5?Zt*=2:Zt=1-2*(Zt-.5)),Zt=Jt(Zt);else if(sr===5){if(rr===er)Zt=0;else{var nr=rr-er;Ft=dt(et(0,Ft+.5-er),rr-er);var ir=-nr/2+Ft,or=nr/2;Zt=Math.sqrt(1-ir*ir/(or*or))}Zt=Jt(Zt)}else sr===6?(rr===er?Zt=0:(Ft=dt(et(0,Ft+.5-er),rr-er),Zt=(1+Math.cos(Math.PI+Math.PI*2*Ft/(rr-er)))/2),Zt=Jt(Zt)):(Ft>=$t(er)&&(Ft-er<0?Zt=et(0,dt(dt(rr,1)-(er-Ft),1)):Zt=et(0,dt(rr-Ft,1))),Zt=Jt(Zt));if(this.sm.v!==100){var lr=this.sm.v*.01;lr===0&&(lr=1e-8);var cr=.5-lr*.5;Zt<cr?Zt=0:(Zt=(Zt-cr)/lr,Zt>1&&(Zt=1))}return Zt*this.a.v},getValue:function(Ft){this.iterateDynamicProperties(),this._mdf=Ft||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,Ft&&this.data.r===2&&(this.e.v=this._currentTextLength);var Ut=this.data.r===2?1:100/this.data.totalChars,Ht=this.o.v/Ut,Kt=this.s.v/Ut+Ht,Yt=this.e.v/Ut+Ht;if(Kt>Yt){var Jt=Kt;Kt=Yt,Yt=Jt}this.finalS=Kt,this.finalE=Yt}},extendPrototype([DynamicPropertyContainer],kt);function Tt(Dt,Ft,Ut){return new kt(Dt,Ft)}return{getTextSelectorProp:Tt}}();function TextAnimatorDataProperty(et,dt,$t){var kt={propType:!1},Tt=PropertyFactory.getProp,Dt=dt.a;this.a={r:Dt.r?Tt(et,Dt.r,0,degToRads,$t):kt,rx:Dt.rx?Tt(et,Dt.rx,0,degToRads,$t):kt,ry:Dt.ry?Tt(et,Dt.ry,0,degToRads,$t):kt,sk:Dt.sk?Tt(et,Dt.sk,0,degToRads,$t):kt,sa:Dt.sa?Tt(et,Dt.sa,0,degToRads,$t):kt,s:Dt.s?Tt(et,Dt.s,1,.01,$t):kt,a:Dt.a?Tt(et,Dt.a,1,0,$t):kt,o:Dt.o?Tt(et,Dt.o,0,.01,$t):kt,p:Dt.p?Tt(et,Dt.p,1,0,$t):kt,sw:Dt.sw?Tt(et,Dt.sw,0,0,$t):kt,sc:Dt.sc?Tt(et,Dt.sc,1,0,$t):kt,fc:Dt.fc?Tt(et,Dt.fc,1,0,$t):kt,fh:Dt.fh?Tt(et,Dt.fh,0,0,$t):kt,fs:Dt.fs?Tt(et,Dt.fs,0,.01,$t):kt,fb:Dt.fb?Tt(et,Dt.fb,0,.01,$t):kt,t:Dt.t?Tt(et,Dt.t,0,0,$t):kt},this.s=TextSelectorProp.getTextSelectorProp(et,dt.s,$t),this.s.t=dt.s.t}function TextAnimatorProperty(et,dt,$t){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=et,this._renderType=dt,this._elem=$t,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer($t)}TextAnimatorProperty.prototype.searchProperties=function(){var et,dt=this._textData.a.length,$t,kt=PropertyFactory.getProp;for(et=0;et<dt;et+=1)$t=this._textData.a[et],this._animatorsData[et]=new TextAnimatorDataProperty(this._elem,$t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:kt(this._elem,this._textData.p.a,0,0,this),f:kt(this._elem,this._textData.p.f,0,0,this),l:kt(this._elem,this._textData.p.l,0,0,this),r:kt(this._elem,this._textData.p.r,0,0,this),p:kt(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=kt(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(et,dt){if(this.lettersChangedFlag=dt,!(!this._mdf&&!this._isFirstFrame&&!dt&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var $t=this._moreOptions.alignment.v,kt=this._animatorsData,Tt=this._textData,Dt=this.mHelper,Ft=this._renderType,Ut=this.renderedLetters.length,Ht,Kt,Yt,Jt,Zt=et.l,er,rr,sr,nr,ir,or,lr,cr,dr,ur,pr,mr,jr,Rr,xr;if(this._hasMaskedPath){if(xr=this._pathData.m,!this._pathData.n||this._pathData._mdf){var kr=xr.v;this._pathData.r.v&&(kr=kr.reverse()),er={tLength:0,segments:[]},Jt=kr._length-1;var Mr;for(mr=0,Yt=0;Yt<Jt;Yt+=1)Mr=bez.buildBezierData(kr.v[Yt],kr.v[Yt+1],[kr.o[Yt][0]-kr.v[Yt][0],kr.o[Yt][1]-kr.v[Yt][1]],[kr.i[Yt+1][0]-kr.v[Yt+1][0],kr.i[Yt+1][1]-kr.v[Yt+1][1]]),er.tLength+=Mr.segmentLength,er.segments.push(Mr),mr+=Mr.segmentLength;Yt=Jt,xr.v.c&&(Mr=bez.buildBezierData(kr.v[Yt],kr.v[0],[kr.o[Yt][0]-kr.v[Yt][0],kr.o[Yt][1]-kr.v[Yt][1]],[kr.i[0][0]-kr.v[0][0],kr.i[0][1]-kr.v[0][1]]),er.tLength+=Mr.segmentLength,er.segments.push(Mr),mr+=Mr.segmentLength),this._pathData.pi=er}if(er=this._pathData.pi,rr=this._pathData.f.v,lr=0,or=1,nr=0,ir=!0,ur=er.segments,rr<0&&xr.v.c)for(er.tLength<Math.abs(rr)&&(rr=-Math.abs(rr)%er.tLength),lr=ur.length-1,dr=ur[lr].points,or=dr.length-1;rr<0;)rr+=dr[or].partialLength,or-=1,or<0&&(lr-=1,dr=ur[lr].points,or=dr.length-1);dr=ur[lr].points,cr=dr[or-1],sr=dr[or],pr=sr.partialLength}Jt=Zt.length,Ht=0,Kt=0;var Tr=et.finalSize*1.2*.714,Or=!0,_r,Pr,br,wr,zr;wr=kt.length;var Hr,Yr=-1,es,rs,Wr,Xr=rr,ns=lr,gs=or,us=-1,ps,cs,ss,fs,hs,$s,ks,Ds,_s="",As=this.defaultPropsArray,Ns;if(et.j===2||et.j===1){var Is=0,zs=0,Gs=et.j===2?-.5:-1,Ws=0,Qs=!0;for(Yt=0;Yt<Jt;Yt+=1)if(Zt[Yt].n){for(Is&&(Is+=zs);Ws<Yt;)Zt[Ws].animatorJustifyOffset=Is,Ws+=1;Is=0,Qs=!0}else{for(br=0;br<wr;br+=1)_r=kt[br].a,_r.t.propType&&(Qs&&et.j===2&&(zs+=_r.t.v*Gs),Pr=kt[br].s,Hr=Pr.getMult(Zt[Yt].anIndexes[br],Tt.a[br].s.totalChars),Hr.length?Is+=_r.t.v*Hr[0]*Gs:Is+=_r.t.v*Hr*Gs);Qs=!1}for(Is&&(Is+=zs);Ws<Yt;)Zt[Ws].animatorJustifyOffset=Is,Ws+=1}for(Yt=0;Yt<Jt;Yt+=1){if(Dt.reset(),ps=1,Zt[Yt].n)Ht=0,Kt+=et.yOffset,Kt+=Or?1:0,rr=Xr,Or=!1,this._hasMaskedPath&&(lr=ns,or=gs,dr=ur[lr].points,cr=dr[or-1],sr=dr[or],pr=sr.partialLength,nr=0),_s="",Ds="",$s="",Ns="",As=this.defaultPropsArray;else{if(this._hasMaskedPath){if(us!==Zt[Yt].line){switch(et.j){case 1:rr+=mr-et.lineWidths[Zt[Yt].line];break;case 2:rr+=(mr-et.lineWidths[Zt[Yt].line])/2;break}us=Zt[Yt].line}Yr!==Zt[Yt].ind&&(Zt[Yr]&&(rr+=Zt[Yr].extra),rr+=Zt[Yt].an/2,Yr=Zt[Yt].ind),rr+=$t[0]*Zt[Yt].an*.005;var qs=0;for(br=0;br<wr;br+=1)_r=kt[br].a,_r.p.propType&&(Pr=kt[br].s,Hr=Pr.getMult(Zt[Yt].anIndexes[br],Tt.a[br].s.totalChars),Hr.length?qs+=_r.p.v[0]*Hr[0]:qs+=_r.p.v[0]*Hr),_r.a.propType&&(Pr=kt[br].s,Hr=Pr.getMult(Zt[Yt].anIndexes[br],Tt.a[br].s.totalChars),Hr.length?qs+=_r.a.v[0]*Hr[0]:qs+=_r.a.v[0]*Hr);for(ir=!0,this._pathData.a.v&&(rr=Zt[0].an*.5+(mr-this._pathData.f.v-Zt[0].an*.5-Zt[Zt.length-1].an*.5)*Yr/(Jt-1),rr+=this._pathData.f.v);ir;)nr+pr>=rr+qs||!dr?(jr=(rr+qs-nr)/sr.partialLength,rs=cr.point[0]+(sr.point[0]-cr.point[0])*jr,Wr=cr.point[1]+(sr.point[1]-cr.point[1])*jr,Dt.translate(-$t[0]*Zt[Yt].an*.005,-($t[1]*Tr)*.01),ir=!1):dr&&(nr+=sr.partialLength,or+=1,or>=dr.length&&(or=0,lr+=1,ur[lr]?dr=ur[lr].points:xr.v.c?(or=0,lr=0,dr=ur[lr].points):(nr-=sr.partialLength,dr=null)),dr&&(cr=sr,sr=dr[or],pr=sr.partialLength));es=Zt[Yt].an/2-Zt[Yt].add,Dt.translate(-es,0,0)}else es=Zt[Yt].an/2-Zt[Yt].add,Dt.translate(-es,0,0),Dt.translate(-$t[0]*Zt[Yt].an*.005,-$t[1]*Tr*.01,0);for(br=0;br<wr;br+=1)_r=kt[br].a,_r.t.propType&&(Pr=kt[br].s,Hr=Pr.getMult(Zt[Yt].anIndexes[br],Tt.a[br].s.totalChars),(Ht!==0||et.j!==0)&&(this._hasMaskedPath?Hr.length?rr+=_r.t.v*Hr[0]:rr+=_r.t.v*Hr:Hr.length?Ht+=_r.t.v*Hr[0]:Ht+=_r.t.v*Hr));for(et.strokeWidthAnim&&(ss=et.sw||0),et.strokeColorAnim&&(et.sc?cs=[et.sc[0],et.sc[1],et.sc[2]]:cs=[0,0,0]),et.fillColorAnim&&et.fc&&(fs=[et.fc[0],et.fc[1],et.fc[2]]),br=0;br<wr;br+=1)_r=kt[br].a,_r.a.propType&&(Pr=kt[br].s,Hr=Pr.getMult(Zt[Yt].anIndexes[br],Tt.a[br].s.totalChars),Hr.length?Dt.translate(-_r.a.v[0]*Hr[0],-_r.a.v[1]*Hr[1],_r.a.v[2]*Hr[2]):Dt.translate(-_r.a.v[0]*Hr,-_r.a.v[1]*Hr,_r.a.v[2]*Hr));for(br=0;br<wr;br+=1)_r=kt[br].a,_r.s.propType&&(Pr=kt[br].s,Hr=Pr.getMult(Zt[Yt].anIndexes[br],Tt.a[br].s.totalChars),Hr.length?Dt.scale(1+(_r.s.v[0]-1)*Hr[0],1+(_r.s.v[1]-1)*Hr[1],1):Dt.scale(1+(_r.s.v[0]-1)*Hr,1+(_r.s.v[1]-1)*Hr,1));for(br=0;br<wr;br+=1){if(_r=kt[br].a,Pr=kt[br].s,Hr=Pr.getMult(Zt[Yt].anIndexes[br],Tt.a[br].s.totalChars),_r.sk.propType&&(Hr.length?Dt.skewFromAxis(-_r.sk.v*Hr[0],_r.sa.v*Hr[1]):Dt.skewFromAxis(-_r.sk.v*Hr,_r.sa.v*Hr)),_r.r.propType&&(Hr.length?Dt.rotateZ(-_r.r.v*Hr[2]):Dt.rotateZ(-_r.r.v*Hr)),_r.ry.propType&&(Hr.length?Dt.rotateY(_r.ry.v*Hr[1]):Dt.rotateY(_r.ry.v*Hr)),_r.rx.propType&&(Hr.length?Dt.rotateX(_r.rx.v*Hr[0]):Dt.rotateX(_r.rx.v*Hr)),_r.o.propType&&(Hr.length?ps+=(_r.o.v*Hr[0]-ps)*Hr[0]:ps+=(_r.o.v*Hr-ps)*Hr),et.strokeWidthAnim&&_r.sw.propType&&(Hr.length?ss+=_r.sw.v*Hr[0]:ss+=_r.sw.v*Hr),et.strokeColorAnim&&_r.sc.propType)for(hs=0;hs<3;hs+=1)Hr.length?cs[hs]+=(_r.sc.v[hs]-cs[hs])*Hr[0]:cs[hs]+=(_r.sc.v[hs]-cs[hs])*Hr;if(et.fillColorAnim&&et.fc){if(_r.fc.propType)for(hs=0;hs<3;hs+=1)Hr.length?fs[hs]+=(_r.fc.v[hs]-fs[hs])*Hr[0]:fs[hs]+=(_r.fc.v[hs]-fs[hs])*Hr;_r.fh.propType&&(Hr.length?fs=addHueToRGB(fs,_r.fh.v*Hr[0]):fs=addHueToRGB(fs,_r.fh.v*Hr)),_r.fs.propType&&(Hr.length?fs=addSaturationToRGB(fs,_r.fs.v*Hr[0]):fs=addSaturationToRGB(fs,_r.fs.v*Hr)),_r.fb.propType&&(Hr.length?fs=addBrightnessToRGB(fs,_r.fb.v*Hr[0]):fs=addBrightnessToRGB(fs,_r.fb.v*Hr))}}for(br=0;br<wr;br+=1)_r=kt[br].a,_r.p.propType&&(Pr=kt[br].s,Hr=Pr.getMult(Zt[Yt].anIndexes[br],Tt.a[br].s.totalChars),this._hasMaskedPath?Hr.length?Dt.translate(0,_r.p.v[1]*Hr[0],-_r.p.v[2]*Hr[1]):Dt.translate(0,_r.p.v[1]*Hr,-_r.p.v[2]*Hr):Hr.length?Dt.translate(_r.p.v[0]*Hr[0],_r.p.v[1]*Hr[1],-_r.p.v[2]*Hr[2]):Dt.translate(_r.p.v[0]*Hr,_r.p.v[1]*Hr,-_r.p.v[2]*Hr));if(et.strokeWidthAnim&&($s=ss<0?0:ss),et.strokeColorAnim&&(ks="rgb("+Math.round(cs[0]*255)+","+Math.round(cs[1]*255)+","+Math.round(cs[2]*255)+")"),et.fillColorAnim&&et.fc&&(Ds="rgb("+Math.round(fs[0]*255)+","+Math.round(fs[1]*255)+","+Math.round(fs[2]*255)+")"),this._hasMaskedPath){if(Dt.translate(0,-et.ls),Dt.translate(0,$t[1]*Tr*.01+Kt,0),this._pathData.p.v){Rr=(sr.point[1]-cr.point[1])/(sr.point[0]-cr.point[0]);var Bs=Math.atan(Rr)*180/Math.PI;sr.point[0]<cr.point[0]&&(Bs+=180),Dt.rotate(-Bs*Math.PI/180)}Dt.translate(rs,Wr,0),rr-=$t[0]*Zt[Yt].an*.005,Zt[Yt+1]&&Yr!==Zt[Yt+1].ind&&(rr+=Zt[Yt].an/2,rr+=et.tr*.001*et.finalSize)}else{switch(Dt.translate(Ht,Kt,0),et.ps&&Dt.translate(et.ps[0],et.ps[1]+et.ascent,0),et.j){case 1:Dt.translate(Zt[Yt].animatorJustifyOffset+et.justifyOffset+(et.boxWidth-et.lineWidths[Zt[Yt].line]),0,0);break;case 2:Dt.translate(Zt[Yt].animatorJustifyOffset+et.justifyOffset+(et.boxWidth-et.lineWidths[Zt[Yt].line])/2,0,0);break}Dt.translate(0,-et.ls),Dt.translate(es,0,0),Dt.translate($t[0]*Zt[Yt].an*.005,$t[1]*Tr*.01,0),Ht+=Zt[Yt].l+et.tr*.001*et.finalSize}Ft==="html"?_s=Dt.toCSS():Ft==="svg"?_s=Dt.to2dCSS():As=[Dt.props[0],Dt.props[1],Dt.props[2],Dt.props[3],Dt.props[4],Dt.props[5],Dt.props[6],Dt.props[7],Dt.props[8],Dt.props[9],Dt.props[10],Dt.props[11],Dt.props[12],Dt.props[13],Dt.props[14],Dt.props[15]],Ns=ps}Ut<=Yt?(zr=new LetterProps(Ns,$s,ks,Ds,_s,As),this.renderedLetters.push(zr),Ut+=1,this.lettersChangedFlag=!0):(zr=this.renderedLetters[Yt],this.lettersChangedFlag=zr.update(Ns,$s,ks,Ds,_s,As)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(et,dt,$t){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(et,dt,$t),this.textProperty=new TextProperty(this,et.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(et.t,this.renderType,this),this.initTransform(et,dt,$t),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(et){this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange)},ITextElement.prototype.createPathShape=function(et,dt){var $t,kt=dt.length,Tt,Dt="";for($t=0;$t<kt;$t+=1)dt[$t].ty==="sh"&&(Tt=dt[$t].ks.k,Dt+=buildShapeString(Tt,Tt.i.length,!0,et));return Dt},ITextElement.prototype.updateDocumentData=function(et,dt){this.textProperty.updateDocumentData(et,dt)},ITextElement.prototype.canResizeFont=function(et){this.textProperty.canResizeFont(et)},ITextElement.prototype.setMinimumFontSize=function(et){this.textProperty.setMinimumFontSize(et)},ITextElement.prototype.applyTextPropertiesToMatrix=function(et,dt,$t,kt,Tt){switch(et.ps&&dt.translate(et.ps[0],et.ps[1]+et.ascent,0),dt.translate(0,-et.ls,0),et.j){case 1:dt.translate(et.justifyOffset+(et.boxWidth-et.lineWidths[$t]),0,0);break;case 2:dt.translate(et.justifyOffset+(et.boxWidth-et.lineWidths[$t])/2,0,0);break}dt.translate(kt,Tt,0)},ITextElement.prototype.buildColor=function(et){return"rgb("+Math.round(et[0]*255)+","+Math.round(et[1]*255)+","+Math.round(et[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(et,dt,$t){this.textSpans=[],this.renderType="svg",this.initElement(et,dt,$t)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(et){for(var dt=0,$t=et.length,kt=[],Tt="";dt<$t;)et[dt]===String.fromCharCode(13)||et[dt]===String.fromCharCode(3)?(kt.push(Tt),Tt=""):Tt+=et[dt],dt+=1;return kt.push(Tt),kt},SVGTextLottieElement.prototype.buildShapeData=function(et,dt){if(et.shapes&&et.shapes.length){var $t=et.shapes[0];if($t.it){var kt=$t.it[$t.it.length-1];kt.s&&(kt.s.k[0]=dt,kt.s.k[1]=dt)}}return et},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var et,dt,$t=this.textProperty.currentData;this.renderedLetters=createSizedArray($t?$t.l.length:0),$t.fc?this.layerElement.setAttribute("fill",this.buildColor($t.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),$t.sc&&(this.layerElement.setAttribute("stroke",this.buildColor($t.sc)),this.layerElement.setAttribute("stroke-width",$t.sw)),this.layerElement.setAttribute("font-size",$t.finalSize);var kt=this.globalData.fontManager.getFontByName($t.f);if(kt.fClass)this.layerElement.setAttribute("class",kt.fClass);else{this.layerElement.setAttribute("font-family",kt.fFamily);var Tt=$t.fWeight,Dt=$t.fStyle;this.layerElement.setAttribute("font-style",Dt),this.layerElement.setAttribute("font-weight",Tt)}this.layerElement.setAttribute("aria-label",$t.t);var Ft=$t.l||[],Ut=!!this.globalData.fontManager.chars;dt=Ft.length;var Ht,Kt=this.mHelper,Yt="",Jt=this.data.singleShape,Zt=0,er=0,rr=!0,sr=$t.tr*.001*$t.finalSize;if(Jt&&!Ut&&!$t.sz){var nr=this.textContainer,ir="start";switch($t.j){case 1:ir="end";break;case 2:ir="middle";break;default:ir="start";break}nr.setAttribute("text-anchor",ir),nr.setAttribute("letter-spacing",sr);var or=this.buildTextContents($t.finalText);for(dt=or.length,er=$t.ps?$t.ps[1]+$t.ascent:0,et=0;et<dt;et+=1)Ht=this.textSpans[et].span||createNS("tspan"),Ht.textContent=or[et],Ht.setAttribute("x",0),Ht.setAttribute("y",er),Ht.style.display="inherit",nr.appendChild(Ht),this.textSpans[et]||(this.textSpans[et]={span:null,glyph:null}),this.textSpans[et].span=Ht,er+=$t.finalLineHeight;this.layerElement.appendChild(nr)}else{var lr=this.textSpans.length,cr;for(et=0;et<dt;et+=1){if(this.textSpans[et]||(this.textSpans[et]={span:null,childSpan:null,glyph:null}),!Ut||!Jt||et===0){if(Ht=lr>et?this.textSpans[et].span:createNS(Ut?"g":"text"),lr<=et){if(Ht.setAttribute("stroke-linecap","butt"),Ht.setAttribute("stroke-linejoin","round"),Ht.setAttribute("stroke-miterlimit","4"),this.textSpans[et].span=Ht,Ut){var dr=createNS("g");Ht.appendChild(dr),this.textSpans[et].childSpan=dr}this.textSpans[et].span=Ht,this.layerElement.appendChild(Ht)}Ht.style.display="inherit"}if(Kt.reset(),Jt&&(Ft[et].n&&(Zt=-sr,er+=$t.yOffset,er+=rr?1:0,rr=!1),this.applyTextPropertiesToMatrix($t,Kt,Ft[et].line,Zt,er),Zt+=Ft[et].l||0,Zt+=sr),Ut){cr=this.globalData.fontManager.getCharData($t.finalText[et],kt.fStyle,this.globalData.fontManager.getFontByName($t.f).fFamily);var ur;if(cr.t===1)ur=new SVGCompElement(cr.data,this.globalData,this);else{var pr=emptyShapeData;cr.data&&cr.data.shapes&&(pr=this.buildShapeData(cr.data,$t.finalSize)),ur=new SVGShapeElement(pr,this.globalData,this)}if(this.textSpans[et].glyph){var mr=this.textSpans[et].glyph;this.textSpans[et].childSpan.removeChild(mr.layerElement),mr.destroy()}this.textSpans[et].glyph=ur,ur._debug=!0,ur.prepareFrame(0),ur.renderFrame(),this.textSpans[et].childSpan.appendChild(ur.layerElement),cr.t===1&&this.textSpans[et].childSpan.setAttribute("transform","scale("+$t.finalSize/100+","+$t.finalSize/100+")")}else Jt&&Ht.setAttribute("transform","translate("+Kt.props[12]+","+Kt.props[13]+")"),Ht.textContent=Ft[et].val,Ht.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Jt&&Ht&&Ht.setAttribute("d",Yt)}for(;et<this.textSpans.length;)this.textSpans[et].span.style.display="none",et+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var et=this.layerElement.getBBox();this.bbox={top:et.y,left:et.x,width:et.width,height:et.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var et,dt=this.textSpans.length,$t;for(this.renderedFrame=this.comp.renderedFrame,et=0;et<dt;et+=1)$t=this.textSpans[et].glyph,$t&&($t.prepareFrame(this.comp.renderedFrame-this.data.st),$t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var et,dt,$t=this.textAnimator.renderedLetters,kt=this.textProperty.currentData.l;dt=kt.length;var Tt,Dt,Ft;for(et=0;et<dt;et+=1)kt[et].n||(Tt=$t[et],Dt=this.textSpans[et].span,Ft=this.textSpans[et].glyph,Ft&&Ft.renderFrame(),Tt._mdf.m&&Dt.setAttribute("transform",Tt.m),Tt._mdf.o&&Dt.setAttribute("opacity",Tt.o),Tt._mdf.sw&&Dt.setAttribute("stroke-width",Tt.sw),Tt._mdf.sc&&Dt.setAttribute("stroke",Tt.sc),Tt._mdf.fc&&Dt.setAttribute("fill",Tt.fc))}};function ISolidElement(et,dt,$t){this.initElement(et,dt,$t)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var et=createNS("rect");et.setAttribute("width",this.data.sw),et.setAttribute("height",this.data.sh),et.setAttribute("fill",this.data.sc),this.layerElement.appendChild(et)};function NullElement(et,dt,$t){this.initFrame(),this.initBaseData(et,dt,$t),this.initFrame(),this.initTransform(et,dt,$t),this.initHierarchy()}NullElement.prototype.prepareFrame=function(et){this.prepareProperties(et,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(et){return new NullElement(et,this.globalData,this)},SVGRendererBase.prototype.createShape=function(et){return new SVGShapeElement(et,this.globalData,this)},SVGRendererBase.prototype.createText=function(et){return new SVGTextLottieElement(et,this.globalData,this)},SVGRendererBase.prototype.createImage=function(et){return new IImageElement(et,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(et){return new ISolidElement(et,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(et){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+et.w+" "+et.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",et.w),this.svgElement.setAttribute("height",et.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var dt=this.globalData.defs;this.setupGlobalData(et,dt),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=et;var $t=createNS("clipPath"),kt=createNS("rect");kt.setAttribute("width",et.w),kt.setAttribute("height",et.h),kt.setAttribute("x",0),kt.setAttribute("y",0);var Tt=createElementID();$t.setAttribute("id",Tt),$t.appendChild(kt),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Tt+")"),dt.appendChild($t),this.layers=et.layers,this.elements=createSizedArray(et.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var et,dt=this.layers?this.layers.length:0;for(et=0;et<dt;et+=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(et){var dt=0,$t=this.layers.length;for(dt=0;dt<$t;dt+=1)if(this.layers[dt].ind===et)return dt;return-1},SVGRendererBase.prototype.buildItem=function(et){var dt=this.elements;if(!(dt[et]||this.layers[et].ty===99)){dt[et]=!0;var $t=this.createItem(this.layers[et]);if(dt[et]=$t,getExpressionsPlugin()&&(this.layers[et].ty===0&&this.globalData.projectInterface.registerComposition($t),$t.initExpressions()),this.appendElementInPos($t,et),this.layers[et].tt){var kt="tp"in this.layers[et]?this.findIndexByInd(this.layers[et].tp):et-1;if(kt===-1)return;if(!this.elements[kt]||this.elements[kt]===!0)this.buildItem(kt),this.addPendingElement($t);else{var Tt=dt[kt],Dt=Tt.getMatte(this.layers[et].tt);$t.setMatte(Dt)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();if(et.checkParenting(),et.data.tt)for(var dt=0,$t=this.elements.length;dt<$t;){if(this.elements[dt]===et){var kt="tp"in et.data?this.findIndexByInd(et.data.tp):dt-1,Tt=this.elements[kt],Dt=Tt.getMatte(this.layers[dt].tt);et.setMatte(Dt);break}dt+=1}}},SVGRendererBase.prototype.renderFrame=function(et){if(!(this.renderedFrame===et||this.destroyed)){et===null?et=this.renderedFrame:this.renderedFrame=et,this.globalData.frameNum=et,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=et,this.globalData._mdf=!1;var dt,$t=this.layers.length;for(this.completeLayers||this.checkLayers(et),dt=$t-1;dt>=0;dt-=1)(this.completeLayers||this.elements[dt])&&this.elements[dt].prepareFrame(et-this.layers[dt].st);if(this.globalData._mdf)for(dt=0;dt<$t;dt+=1)(this.completeLayers||this.elements[dt])&&this.elements[dt].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(et,dt){var $t=et.getBaseElement();if($t){for(var kt=0,Tt;kt<dt;)this.elements[kt]&&this.elements[kt]!==!0&&this.elements[kt].getBaseElement()&&(Tt=this.elements[kt].getBaseElement()),kt+=1;Tt?this.layerElement.insertBefore($t,Tt):this.layerElement.appendChild($t)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(et,dt,$t){this.initFrame(),this.initBaseData(et,dt,$t),this.initTransform(et,dt,$t),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!dt.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(et){if(this._mdf=!1,this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=et/this.data.sr;else{var dt=this.tm.v;dt===this.data.op&&(dt=this.data.op-1),this.renderedFrame=dt}var $t,kt=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),$t=kt-1;$t>=0;$t-=1)(this.completeLayers||this.elements[$t])&&(this.elements[$t].prepareFrame(this.renderedFrame-this.layers[$t].st),this.elements[$t]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var et,dt=this.layers.length;for(et=0;et<dt;et+=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame()},ICompElement.prototype.setElements=function(et){this.elements=et},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var et,dt=this.layers.length;for(et=0;et<dt;et+=1)this.elements[et]&&this.elements[et].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(et,dt,$t){this.layers=et.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(et,dt,$t),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,dt.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(et){return new SVGCompElement(et,this.globalData,this)};function SVGRenderer(et,dt){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var $t="";if(dt&&dt.title){var kt=createNS("title"),Tt=createElementID();kt.setAttribute("id",Tt),kt.textContent=dt.title,this.svgElement.appendChild(kt),$t+=Tt}if(dt&&dt.description){var Dt=createNS("desc"),Ft=createElementID();Dt.setAttribute("id",Ft),Dt.textContent=dt.description,this.svgElement.appendChild(Dt),$t+=" "+Ft}$t&&this.svgElement.setAttribute("aria-labelledby",$t);var Ut=createNS("defs");this.svgElement.appendChild(Ut);var Ht=createNS("g");this.svgElement.appendChild(Ht),this.layerElement=Ht,this.renderConfig={preserveAspectRatio:dt&&dt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:dt&&dt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:dt&&dt.contentVisibility||"visible",progressiveLoad:dt&&dt.progressiveLoad||!1,hideOnTransparent:!(dt&&dt.hideOnTransparent===!1),viewBoxOnly:dt&&dt.viewBoxOnly||!1,viewBoxSize:dt&&dt.viewBoxSize||!1,className:dt&&dt.className||"",id:dt&&dt.id||"",focusable:dt&&dt.focusable,filterSize:{width:dt&&dt.filterSize&&dt.filterSize.width||"100%",height:dt&&dt.filterSize&&dt.filterSize.height||"100%",x:dt&&dt.filterSize&&dt.filterSize.x||"0%",y:dt&&dt.filterSize&&dt.filterSize.y||"0%"},width:dt&&dt.width,height:dt&&dt.height,runExpressions:!dt||dt.runExpressions===void 0||dt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:Ut,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(et){return new SVGCompElement(et,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(dt){var $t,kt=dt.length,Tt="_";for($t=0;$t<kt;$t+=1)Tt+=dt[$t].transform.key+"_";var Dt=this.sequences[Tt];return Dt||(Dt={transforms:[].concat(dt),finalTransform:new Matrix,_mdf:!1},this.sequences[Tt]=Dt,this.sequenceList.push(Dt)),Dt},processSequence:function(dt,$t){for(var kt=0,Tt=dt.transforms.length,Dt=$t;kt<Tt&&!$t;){if(dt.transforms[kt].transform.mProps._mdf){Dt=!0;break}kt+=1}if(Dt)for(dt.finalTransform.reset(),kt=Tt-1;kt>=0;kt-=1)dt.finalTransform.multiply(dt.transforms[kt].transform.mProps.v);dt._mdf=Dt},processSequences:function(dt){var $t,kt=this.sequenceList.length;for($t=0;$t<kt;$t+=1)this.processSequence(this.sequenceList[$t],dt)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var dt="__lottie_element_luma_buffer",$t=null,kt=null,Tt=null;function Dt(){var Ht=createNS("svg"),Kt=createNS("filter"),Yt=createNS("feColorMatrix");return Kt.setAttribute("id",dt),Yt.setAttribute("type","matrix"),Yt.setAttribute("color-interpolation-filters","sRGB"),Yt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),Kt.appendChild(Yt),Ht.appendChild(Kt),Ht.setAttribute("id",dt+"_svg"),featureSupport.svgLumaHidden&&(Ht.style.display="none"),Ht}function Ft(){$t||(Tt=Dt(),document.body.appendChild(Tt),$t=createTag("canvas"),kt=$t.getContext("2d"),kt.filter="url(#"+dt+")",kt.fillStyle="rgba(0,0,0,0)",kt.fillRect(0,0,1,1))}function Ut(Ht){return $t||Ft(),$t.width=Ht.width,$t.height=Ht.height,kt.filter="url(#"+dt+")",$t}return{load:Ft,get:Ut}};function createCanvas(et,dt){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(et,dt);var $t=createTag("canvas");return $t.width=et,$t.height=dt,$t}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(et){var dt,$t=et.data.ef?et.data.ef.length:0;this.filters=[];var kt;for(dt=0;dt<$t;dt+=1){kt=null;var Tt=et.data.ef[dt].ty;if(registeredEffects[Tt]){var Dt=registeredEffects[Tt].effect;kt=new Dt(et.effectsManager.effectElements[dt],et)}kt&&this.filters.push(kt)}this.filters.length&&et.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(et){var dt,$t=this.filters.length;for(dt=0;dt<$t;dt+=1)this.filters[dt].renderFrame(et)},CVEffects.prototype.getEffects=function(et){var dt,$t=this.filters.length,kt=[];for(dt=0;dt<$t;dt+=1)this.filters[dt].type===et&&kt.push(this.filters[dt]);return kt};function registerEffect(et,dt){registeredEffects[et]={effect:dt}}function CVMaskElement(et,dt){this.data=et,this.element=dt,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var $t,kt=this.masksProperties.length,Tt=!1;for($t=0;$t<kt;$t+=1)this.masksProperties[$t].mode!=="n"&&(Tt=!0),this.viewData[$t]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[$t],3);this.hasMasks=Tt,Tt&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var et=this.element.finalTransform.mat,dt=this.element.canvasContext,$t,kt=this.masksProperties.length,Tt,Dt,Ft;for(dt.beginPath(),$t=0;$t<kt;$t+=1)if(this.masksProperties[$t].mode!=="n"){this.masksProperties[$t].inv&&(dt.moveTo(0,0),dt.lineTo(this.element.globalData.compSize.w,0),dt.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),dt.lineTo(0,this.element.globalData.compSize.h),dt.lineTo(0,0)),Ft=this.viewData[$t].v,Tt=et.applyToPointArray(Ft.v[0][0],Ft.v[0][1],0),dt.moveTo(Tt[0],Tt[1]);var Ut,Ht=Ft._length;for(Ut=1;Ut<Ht;Ut+=1)Dt=et.applyToTriplePoints(Ft.o[Ut-1],Ft.i[Ut],Ft.v[Ut]),dt.bezierCurveTo(Dt[0],Dt[1],Dt[2],Dt[3],Dt[4],Dt[5]);Dt=et.applyToTriplePoints(Ft.o[Ut-1],Ft.i[0],Ft.v[0]),dt.bezierCurveTo(Dt[0],Dt[1],Dt[2],Dt[3],Dt[4],Dt[5])}this.element.globalData.renderer.save(!0),dt.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var dt=this.globalData.canvasContext,$t=assetLoader.createCanvas(dt.canvas.width,dt.canvas.height);this.buffers.push($t);var kt=assetLoader.createCanvas(dt.canvas.width,dt.canvas.height);this.buffers.push(kt),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var dt=this.globalData;if(dt.blendMode!==this.data.bm){dt.blendMode=this.data.bm;var $t=getBlendMode(this.data.bm);dt.canvasContext.globalCompositeOperation=$t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(dt){dt.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var dt=this.buffers[0],$t=dt.getContext("2d");this.clearCanvas($t),$t.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var dt=this.buffers[1],$t=dt.getContext("2d");this.clearCanvas($t),$t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var kt=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(kt.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var Tt=assetLoader.getLumaCanvas(this.canvasContext.canvas),Dt=Tt.getContext("2d");Dt.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(Tt,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(dt,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(dt){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!dt)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var $t=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save($t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore($t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(et,dt,$t,kt){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var Tt=4;dt.ty==="rc"?Tt=5:dt.ty==="el"?Tt=6:dt.ty==="sr"&&(Tt=7),this.sh=ShapePropertyFactory.getShapeProp(et,dt,Tt,et);var Dt,Ft=$t.length,Ut;for(Dt=0;Dt<Ft;Dt+=1)$t[Dt].closed||(Ut={transforms:kt.addTransformSequence($t[Dt].transforms),trNodes:[]},this.styledShapes.push(Ut),$t[Dt].elements.push(Ut))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(et,dt,$t){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(et,dt,$t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(et,dt){var $t={data:et,type:et.ty,preTransforms:this.transformsManager.addTransformSequence(dt),transforms:[],elements:[],closed:et.hd===!0},kt={};if(et.ty==="fl"||et.ty==="st"?(kt.c=PropertyFactory.getProp(this,et.c,1,255,this),kt.c.k||($t.co="rgb("+bmFloor(kt.c.v[0])+","+bmFloor(kt.c.v[1])+","+bmFloor(kt.c.v[2])+")")):(et.ty==="gf"||et.ty==="gs")&&(kt.s=PropertyFactory.getProp(this,et.s,1,null,this),kt.e=PropertyFactory.getProp(this,et.e,1,null,this),kt.h=PropertyFactory.getProp(this,et.h||{k:0},0,.01,this),kt.a=PropertyFactory.getProp(this,et.a||{k:0},0,degToRads,this),kt.g=new GradientProperty(this,et.g,this)),kt.o=PropertyFactory.getProp(this,et.o,0,.01,this),et.ty==="st"||et.ty==="gs"){if($t.lc=lineCapEnum[et.lc||2],$t.lj=lineJoinEnum[et.lj||2],et.lj==1&&($t.ml=et.ml),kt.w=PropertyFactory.getProp(this,et.w,0,null,this),kt.w.k||($t.wi=kt.w.v),et.d){var Tt=new DashProperty(this,et.d,"canvas",this);kt.d=Tt,kt.d.k||($t.da=kt.d.dashArray,$t.do=kt.d.dashoffset[0])}}else $t.r=et.r===2?"evenodd":"nonzero";return this.stylesList.push($t),kt.style=$t,kt},CVShapeElement.prototype.createGroupElement=function(){var et={it:[],prevViewData:[]};return et},CVShapeElement.prototype.createTransformElement=function(et){var dt={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,et.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,et,this)}};return dt},CVShapeElement.prototype.createShapeElement=function(et){var dt=new CVShapeData(this,et,this.stylesList,this.transformsManager);return this.shapes.push(dt),this.addShapeToModifiers(dt),dt},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var et,dt=this.itemsData.length;for(et=0;et<dt;et+=1)this.prevViewData[et]=this.itemsData[et];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),dt=this.dynamicProperties.length,et=0;et<dt;et+=1)this.dynamicProperties[et].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(et){var dt,$t=this.stylesList.length;for(dt=0;dt<$t;dt+=1)this.stylesList[dt].closed||this.stylesList[dt].transforms.push(et)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var et,dt=this.stylesList.length;for(et=0;et<dt;et+=1)this.stylesList[et].closed||this.stylesList[et].transforms.pop()},CVShapeElement.prototype.closeStyles=function(et){var dt,$t=et.length;for(dt=0;dt<$t;dt+=1)et[dt].closed=!0},CVShapeElement.prototype.searchShapes=function(et,dt,$t,kt,Tt){var Dt,Ft=et.length-1,Ut,Ht,Kt=[],Yt=[],Jt,Zt,er,rr=[].concat(Tt);for(Dt=Ft;Dt>=0;Dt-=1){if(Jt=this.searchProcessedElement(et[Dt]),Jt?dt[Dt]=$t[Jt-1]:et[Dt]._shouldRender=kt,et[Dt].ty==="fl"||et[Dt].ty==="st"||et[Dt].ty==="gf"||et[Dt].ty==="gs")Jt?dt[Dt].style.closed=!1:dt[Dt]=this.createStyleElement(et[Dt],rr),Kt.push(dt[Dt].style);else if(et[Dt].ty==="gr"){if(!Jt)dt[Dt]=this.createGroupElement(et[Dt]);else for(Ht=dt[Dt].it.length,Ut=0;Ut<Ht;Ut+=1)dt[Dt].prevViewData[Ut]=dt[Dt].it[Ut];this.searchShapes(et[Dt].it,dt[Dt].it,dt[Dt].prevViewData,kt,rr)}else et[Dt].ty==="tr"?(Jt||(er=this.createTransformElement(et[Dt]),dt[Dt]=er),rr.push(dt[Dt]),this.addTransformToStyleList(dt[Dt])):et[Dt].ty==="sh"||et[Dt].ty==="rc"||et[Dt].ty==="el"||et[Dt].ty==="sr"?Jt||(dt[Dt]=this.createShapeElement(et[Dt])):et[Dt].ty==="tm"||et[Dt].ty==="rd"||et[Dt].ty==="pb"||et[Dt].ty==="zz"||et[Dt].ty==="op"?(Jt?(Zt=dt[Dt],Zt.closed=!1):(Zt=ShapeModifiers.getModifier(et[Dt].ty),Zt.init(this,et[Dt]),dt[Dt]=Zt,this.shapeModifiers.push(Zt)),Yt.push(Zt)):et[Dt].ty==="rp"&&(Jt?(Zt=dt[Dt],Zt.closed=!0):(Zt=ShapeModifiers.getModifier(et[Dt].ty),dt[Dt]=Zt,Zt.init(this,et,Dt,dt),this.shapeModifiers.push(Zt),kt=!1),Yt.push(Zt));this.addProcessedElement(et[Dt],Dt+1)}for(this.removeTransformFromStyleList(),this.closeStyles(Kt),Ft=Yt.length,Dt=0;Dt<Ft;Dt+=1)Yt[Dt].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(et,dt){(et._opMdf||dt.op._mdf||this._isFirstFrame)&&(dt.opacity=et.opacity,dt.opacity*=dt.op.v,dt._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var et,dt=this.stylesList.length,$t,kt,Tt,Dt,Ft,Ut,Ht=this.globalData.renderer,Kt=this.globalData.canvasContext,Yt,Jt;for(et=0;et<dt;et+=1)if(Jt=this.stylesList[et],Yt=Jt.type,!((Yt==="st"||Yt==="gs")&&Jt.wi===0||!Jt.data._shouldRender||Jt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(Ht.save(),Ft=Jt.elements,Yt==="st"||Yt==="gs"?(Ht.ctxStrokeStyle(Yt==="st"?Jt.co:Jt.grd),Ht.ctxLineWidth(Jt.wi),Ht.ctxLineCap(Jt.lc),Ht.ctxLineJoin(Jt.lj),Ht.ctxMiterLimit(Jt.ml||0)):Ht.ctxFillStyle(Yt==="fl"?Jt.co:Jt.grd),Ht.ctxOpacity(Jt.coOp),Yt!=="st"&&Yt!=="gs"&&Kt.beginPath(),Ht.ctxTransform(Jt.preTransforms.finalTransform.props),kt=Ft.length,$t=0;$t<kt;$t+=1){for((Yt==="st"||Yt==="gs")&&(Kt.beginPath(),Jt.da&&(Kt.setLineDash(Jt.da),Kt.lineDashOffset=Jt.do)),Ut=Ft[$t].trNodes,Dt=Ut.length,Tt=0;Tt<Dt;Tt+=1)Ut[Tt].t==="m"?Kt.moveTo(Ut[Tt].p[0],Ut[Tt].p[1]):Ut[Tt].t==="c"?Kt.bezierCurveTo(Ut[Tt].pts[0],Ut[Tt].pts[1],Ut[Tt].pts[2],Ut[Tt].pts[3],Ut[Tt].pts[4],Ut[Tt].pts[5]):Kt.closePath();(Yt==="st"||Yt==="gs")&&(Ht.ctxStroke(),Jt.da&&Kt.setLineDash(this.dashResetter))}Yt!=="st"&&Yt!=="gs"&&this.globalData.renderer.ctxFill(Jt.r),Ht.restore()}},CVShapeElement.prototype.renderShape=function(et,dt,$t,kt){var Tt,Dt=dt.length-1,Ft;for(Ft=et,Tt=Dt;Tt>=0;Tt-=1)dt[Tt].ty==="tr"?(Ft=$t[Tt].transform,this.renderShapeTransform(et,Ft)):dt[Tt].ty==="sh"||dt[Tt].ty==="el"||dt[Tt].ty==="rc"||dt[Tt].ty==="sr"?this.renderPath(dt[Tt],$t[Tt]):dt[Tt].ty==="fl"?this.renderFill(dt[Tt],$t[Tt],Ft):dt[Tt].ty==="st"?this.renderStroke(dt[Tt],$t[Tt],Ft):dt[Tt].ty==="gf"||dt[Tt].ty==="gs"?this.renderGradientFill(dt[Tt],$t[Tt],Ft):dt[Tt].ty==="gr"?this.renderShape(Ft,dt[Tt].it,$t[Tt].it):dt[Tt].ty;kt&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(et,dt){if(this._isFirstFrame||dt._mdf||et.transforms._mdf){var $t=et.trNodes,kt=dt.paths,Tt,Dt,Ft,Ut=kt._length;$t.length=0;var Ht=et.transforms.finalTransform;for(Ft=0;Ft<Ut;Ft+=1){var Kt=kt.shapes[Ft];if(Kt&&Kt.v){for(Dt=Kt._length,Tt=1;Tt<Dt;Tt+=1)Tt===1&&$t.push({t:"m",p:Ht.applyToPointArray(Kt.v[0][0],Kt.v[0][1],0)}),$t.push({t:"c",pts:Ht.applyToTriplePoints(Kt.o[Tt-1],Kt.i[Tt],Kt.v[Tt])});Dt===1&&$t.push({t:"m",p:Ht.applyToPointArray(Kt.v[0][0],Kt.v[0][1],0)}),Kt.c&&Dt&&($t.push({t:"c",pts:Ht.applyToTriplePoints(Kt.o[Tt-1],Kt.i[0],Kt.v[0])}),$t.push({t:"z"}))}}et.trNodes=$t}},CVShapeElement.prototype.renderPath=function(et,dt){if(et.hd!==!0&&et._shouldRender){var $t,kt=dt.styledShapes.length;for($t=0;$t<kt;$t+=1)this.renderStyledShape(dt.styledShapes[$t],dt.sh)}},CVShapeElement.prototype.renderFill=function(et,dt,$t){var kt=dt.style;(dt.c._mdf||this._isFirstFrame)&&(kt.co="rgb("+bmFloor(dt.c.v[0])+","+bmFloor(dt.c.v[1])+","+bmFloor(dt.c.v[2])+")"),(dt.o._mdf||$t._opMdf||this._isFirstFrame)&&(kt.coOp=dt.o.v*$t.opacity)},CVShapeElement.prototype.renderGradientFill=function(et,dt,$t){var kt=dt.style,Tt;if(!kt.grd||dt.g._mdf||dt.s._mdf||dt.e._mdf||et.t!==1&&(dt.h._mdf||dt.a._mdf)){var Dt=this.globalData.canvasContext,Ft=dt.s.v,Ut=dt.e.v;if(et.t===1)Tt=Dt.createLinearGradient(Ft[0],Ft[1],Ut[0],Ut[1]);else{var Ht=Math.sqrt(Math.pow(Ft[0]-Ut[0],2)+Math.pow(Ft[1]-Ut[1],2)),Kt=Math.atan2(Ut[1]-Ft[1],Ut[0]-Ft[0]),Yt=dt.h.v;Yt>=1?Yt=.99:Yt<=-1&&(Yt=-.99);var Jt=Ht*Yt,Zt=Math.cos(Kt+dt.a.v)*Jt+Ft[0],er=Math.sin(Kt+dt.a.v)*Jt+Ft[1];Tt=Dt.createRadialGradient(Zt,er,0,Ft[0],Ft[1],Ht)}var rr,sr=et.g.p,nr=dt.g.c,ir=1;for(rr=0;rr<sr;rr+=1)dt.g._hasOpacity&&dt.g._collapsable&&(ir=dt.g.o[rr*2+1]),Tt.addColorStop(nr[rr*4]/100,"rgba("+nr[rr*4+1]+","+nr[rr*4+2]+","+nr[rr*4+3]+","+ir+")");kt.grd=Tt}kt.coOp=dt.o.v*$t.opacity},CVShapeElement.prototype.renderStroke=function(et,dt,$t){var kt=dt.style,Tt=dt.d;Tt&&(Tt._mdf||this._isFirstFrame)&&(kt.da=Tt.dashArray,kt.do=Tt.dashoffset[0]),(dt.c._mdf||this._isFirstFrame)&&(kt.co="rgb("+bmFloor(dt.c.v[0])+","+bmFloor(dt.c.v[1])+","+bmFloor(dt.c.v[2])+")"),(dt.o._mdf||$t._opMdf||this._isFirstFrame)&&(kt.coOp=dt.o.v*$t.opacity),(dt.w._mdf||this._isFirstFrame)&&(kt.wi=dt.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(et,dt,$t){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(et,dt,$t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et.l?et.l.length:0);var dt=!1;et.fc?(dt=!0,this.values.fill=this.buildColor(et.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=dt;var $t=!1;et.sc&&($t=!0,this.values.stroke=this.buildColor(et.sc),this.values.sWidth=et.sw);var kt=this.globalData.fontManager.getFontByName(et.f),Tt,Dt,Ft=et.l,Ut=this.mHelper;this.stroke=$t,this.values.fValue=et.finalSize+"px "+this.globalData.fontManager.getFontByName(et.f).fFamily,Dt=et.finalText.length;var Ht,Kt,Yt,Jt,Zt,er,rr,sr,nr,ir,or=this.data.singleShape,lr=et.tr*.001*et.finalSize,cr=0,dr=0,ur=!0,pr=0;for(Tt=0;Tt<Dt;Tt+=1){Ht=this.globalData.fontManager.getCharData(et.finalText[Tt],kt.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily),Kt=Ht&&Ht.data||{},Ut.reset(),or&&Ft[Tt].n&&(cr=-lr,dr+=et.yOffset,dr+=ur?1:0,ur=!1),Zt=Kt.shapes?Kt.shapes[0].it:[],rr=Zt.length,Ut.scale(et.finalSize/100,et.finalSize/100),or&&this.applyTextPropertiesToMatrix(et,Ut,Ft[Tt].line,cr,dr),nr=createSizedArray(rr-1);var mr=0;for(er=0;er<rr;er+=1)if(Zt[er].ty==="sh"){for(Jt=Zt[er].ks.k.i.length,sr=Zt[er].ks.k,ir=[],Yt=1;Yt<Jt;Yt+=1)Yt===1&&ir.push(Ut.applyToX(sr.v[0][0],sr.v[0][1],0),Ut.applyToY(sr.v[0][0],sr.v[0][1],0)),ir.push(Ut.applyToX(sr.o[Yt-1][0],sr.o[Yt-1][1],0),Ut.applyToY(sr.o[Yt-1][0],sr.o[Yt-1][1],0),Ut.applyToX(sr.i[Yt][0],sr.i[Yt][1],0),Ut.applyToY(sr.i[Yt][0],sr.i[Yt][1],0),Ut.applyToX(sr.v[Yt][0],sr.v[Yt][1],0),Ut.applyToY(sr.v[Yt][0],sr.v[Yt][1],0));ir.push(Ut.applyToX(sr.o[Yt-1][0],sr.o[Yt-1][1],0),Ut.applyToY(sr.o[Yt-1][0],sr.o[Yt-1][1],0),Ut.applyToX(sr.i[0][0],sr.i[0][1],0),Ut.applyToY(sr.i[0][0],sr.i[0][1],0),Ut.applyToX(sr.v[0][0],sr.v[0][1],0),Ut.applyToY(sr.v[0][0],sr.v[0][1],0)),nr[mr]=ir,mr+=1}or&&(cr+=Ft[Tt].l,cr+=lr),this.textSpans[pr]?this.textSpans[pr].elem=nr:this.textSpans[pr]={elem:nr},pr+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var et=this.canvasContext;et.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var dt,$t,kt,Tt,Dt,Ft,Ut=this.textAnimator.renderedLetters,Ht=this.textProperty.currentData.l;$t=Ht.length;var Kt,Yt=null,Jt=null,Zt=null,er,rr,sr=this.globalData.renderer;for(dt=0;dt<$t;dt+=1)if(!Ht[dt].n){if(Kt=Ut[dt],Kt&&(sr.save(),sr.ctxTransform(Kt.p),sr.ctxOpacity(Kt.o)),this.fill){for(Kt&&Kt.fc?Yt!==Kt.fc&&(sr.ctxFillStyle(Kt.fc),Yt=Kt.fc):Yt!==this.values.fill&&(Yt=this.values.fill,sr.ctxFillStyle(this.values.fill)),er=this.textSpans[dt].elem,Tt=er.length,this.globalData.canvasContext.beginPath(),kt=0;kt<Tt;kt+=1)for(rr=er[kt],Ft=rr.length,this.globalData.canvasContext.moveTo(rr[0],rr[1]),Dt=2;Dt<Ft;Dt+=6)this.globalData.canvasContext.bezierCurveTo(rr[Dt],rr[Dt+1],rr[Dt+2],rr[Dt+3],rr[Dt+4],rr[Dt+5]);this.globalData.canvasContext.closePath(),sr.ctxFill()}if(this.stroke){for(Kt&&Kt.sw?Zt!==Kt.sw&&(Zt=Kt.sw,sr.ctxLineWidth(Kt.sw)):Zt!==this.values.sWidth&&(Zt=this.values.sWidth,sr.ctxLineWidth(this.values.sWidth)),Kt&&Kt.sc?Jt!==Kt.sc&&(Jt=Kt.sc,sr.ctxStrokeStyle(Kt.sc)):Jt!==this.values.stroke&&(Jt=this.values.stroke,sr.ctxStrokeStyle(this.values.stroke)),er=this.textSpans[dt].elem,Tt=er.length,this.globalData.canvasContext.beginPath(),kt=0;kt<Tt;kt+=1)for(rr=er[kt],Ft=rr.length,this.globalData.canvasContext.moveTo(rr[0],rr[1]),Dt=2;Dt<Ft;Dt+=6)this.globalData.canvasContext.bezierCurveTo(rr[Dt],rr[Dt+1],rr[Dt+2],rr[Dt+3],rr[Dt+4],rr[Dt+5]);this.globalData.canvasContext.closePath(),sr.ctxStroke()}Kt&&this.globalData.renderer.restore()}};function CVImageElement(et,dt,$t){this.assetData=dt.getAssetData(et.refId),this.img=dt.imageLoader.getAsset(this.assetData),this.initElement(et,dt,$t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var et=createTag("canvas");et.width=this.assetData.w,et.height=this.assetData.h;var dt=et.getContext("2d"),$t=this.img.width,kt=this.img.height,Tt=$t/kt,Dt=this.assetData.w/this.assetData.h,Ft,Ut,Ht=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;Tt>Dt&&Ht==="xMidYMid slice"||Tt<Dt&&Ht!=="xMidYMid slice"?(Ut=kt,Ft=Ut*Dt):(Ft=$t,Ut=Ft/Dt),dt.drawImage(this.img,($t-Ft)/2,(kt-Ut)/2,Ft,Ut,0,0,this.assetData.w,this.assetData.h),this.img=et}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(et,dt,$t){this.initElement(et,dt,$t)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(et){return new CVShapeElement(et,this.globalData,this)},CanvasRendererBase.prototype.createText=function(et){return new CVTextElement(et,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(et){return new CVImageElement(et,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(et){return new CVSolidElement(et,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(et){et[0]===1&&et[1]===0&&et[4]===0&&et[5]===1&&et[12]===0&&et[13]===0||this.canvasContext.transform(et[0],et[1],et[4],et[5],et[12],et[13])},CanvasRendererBase.prototype.ctxOpacity=function(et){this.canvasContext.globalAlpha*=et<0?0:et},CanvasRendererBase.prototype.ctxFillStyle=function(et){this.canvasContext.fillStyle=et},CanvasRendererBase.prototype.ctxStrokeStyle=function(et){this.canvasContext.strokeStyle=et},CanvasRendererBase.prototype.ctxLineWidth=function(et){this.canvasContext.lineWidth=et},CanvasRendererBase.prototype.ctxLineCap=function(et){this.canvasContext.lineCap=et},CanvasRendererBase.prototype.ctxLineJoin=function(et){this.canvasContext.lineJoin=et},CanvasRendererBase.prototype.ctxMiterLimit=function(et){this.canvasContext.miterLimit=et},CanvasRendererBase.prototype.ctxFill=function(et){this.canvasContext.fill(et)},CanvasRendererBase.prototype.ctxFillRect=function(et,dt,$t,kt){this.canvasContext.fillRect(et,dt,$t,kt)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(et){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}et&&(this.globalData.blendMode="source-over"),this.contextData.restore(et)},CanvasRendererBase.prototype.configAnimation=function(et){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var dt=this.animationItem.container.style;dt.width="100%",dt.height="100%";var $t="0px 0px 0px";dt.transformOrigin=$t,dt.mozTransformOrigin=$t,dt.webkitTransformOrigin=$t,dt["-webkit-transform"]=$t,dt.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=et,this.layers=et.layers,this.transformCanvas={w:et.w,h:et.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(et,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(et.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(et,dt){this.reset();var $t,kt;et?($t=et,kt=dt,this.canvasContext.canvas.width=$t,this.canvasContext.canvas.height=kt):(this.animationItem.wrapper&&this.animationItem.container?($t=this.animationItem.wrapper.offsetWidth,kt=this.animationItem.wrapper.offsetHeight):($t=this.canvasContext.canvas.width,kt=this.canvasContext.canvas.height),this.canvasContext.canvas.width=$t*this.renderConfig.dpr,this.canvasContext.canvas.height=kt*this.renderConfig.dpr);var Tt,Dt;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var Ft=this.renderConfig.preserveAspectRatio.split(" "),Ut=Ft[1]||"meet",Ht=Ft[0]||"xMidYMid",Kt=Ht.substr(0,4),Yt=Ht.substr(4);Tt=$t/kt,Dt=this.transformCanvas.w/this.transformCanvas.h,Dt>Tt&&Ut==="meet"||Dt<Tt&&Ut==="slice"?(this.transformCanvas.sx=$t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=$t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=kt/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=kt/(this.transformCanvas.h/this.renderConfig.dpr)),Kt==="xMid"&&(Dt<Tt&&Ut==="meet"||Dt>Tt&&Ut==="slice")?this.transformCanvas.tx=($t-this.transformCanvas.w*(kt/this.transformCanvas.h))/2*this.renderConfig.dpr:Kt==="xMax"&&(Dt<Tt&&Ut==="meet"||Dt>Tt&&Ut==="slice")?this.transformCanvas.tx=($t-this.transformCanvas.w*(kt/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Yt==="YMid"&&(Dt>Tt&&Ut==="meet"||Dt<Tt&&Ut==="slice")?this.transformCanvas.ty=(kt-this.transformCanvas.h*($t/this.transformCanvas.w))/2*this.renderConfig.dpr:Yt==="YMax"&&(Dt>Tt&&Ut==="meet"||Dt<Tt&&Ut==="slice")?this.transformCanvas.ty=(kt-this.transformCanvas.h*($t/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=$t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=kt/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var et,dt=this.layers?this.layers.length:0;for(et=dt-1;et>=0;et-=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(et,dt){if(!(this.renderedFrame===et&&this.renderConfig.clearCanvas===!0&&!dt||this.destroyed||et===-1)){this.renderedFrame=et,this.globalData.frameNum=et-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||dt,this.globalData.projectInterface.currentFrame=et;var $t,kt=this.layers.length;for(this.completeLayers||this.checkLayers(et),$t=kt-1;$t>=0;$t-=1)(this.completeLayers||this.elements[$t])&&this.elements[$t].prepareFrame(et-this.layers[$t].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),$t=kt-1;$t>=0;$t-=1)(this.completeLayers||this.elements[$t])&&this.elements[$t].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(et){var dt=this.elements;if(!(dt[et]||this.layers[et].ty===99)){var $t=this.createItem(this.layers[et],this,this.globalData);dt[et]=$t,$t.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();et.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var et,dt=15;for(et=0;et<dt;et+=1){var $t=new CanvasContext;this.stack[et]=$t}this._length=dt,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var et=this._length*2,dt=0;for(dt=this._length;dt<et;dt+=1)this.stack[dt]=new CanvasContext;this._length=et},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(et){this.cArrPos-=1;var dt=this.stack[this.cArrPos],$t=dt.transform,kt,Tt=this.cTr.props;for(kt=0;kt<16;kt+=1)Tt[kt]=$t[kt];if(et){this.nativeContext.restore();var Dt=this.stack[this.cArrPos+1];this.appliedFillStyle=Dt.fillStyle,this.appliedStrokeStyle=Dt.strokeStyle,this.appliedLineWidth=Dt.lineWidth,this.appliedLineCap=Dt.lineCap,this.appliedLineJoin=Dt.lineJoin,this.appliedMiterLimit=Dt.miterLimit}this.nativeContext.setTransform($t[0],$t[1],$t[4],$t[5],$t[12],$t[13]),(et||dt.opacity!==-1&&this.currentOpacity!==dt.opacity)&&(this.nativeContext.globalAlpha=dt.opacity,this.currentOpacity=dt.opacity),this.currentFillStyle=dt.fillStyle,this.currentStrokeStyle=dt.strokeStyle,this.currentLineWidth=dt.lineWidth,this.currentLineCap=dt.lineCap,this.currentLineJoin=dt.lineJoin,this.currentMiterLimit=dt.miterLimit},CVContextData.prototype.save=function(et){et&&this.nativeContext.save();var dt=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var $t=this.stack[this.cArrPos],kt;for(kt=0;kt<16;kt+=1)$t.transform[kt]=dt[kt];this.cArrPos+=1;var Tt=this.stack[this.cArrPos];Tt.opacity=$t.opacity,Tt.fillStyle=$t.fillStyle,Tt.strokeStyle=$t.strokeStyle,Tt.lineWidth=$t.lineWidth,Tt.lineCap=$t.lineCap,Tt.lineJoin=$t.lineJoin,Tt.miterLimit=$t.miterLimit},CVContextData.prototype.setOpacity=function(et){this.stack[this.cArrPos].opacity=et},CVContextData.prototype.setContext=function(et){this.nativeContext=et},CVContextData.prototype.fillStyle=function(et){this.stack[this.cArrPos].fillStyle!==et&&(this.currentFillStyle=et,this.stack[this.cArrPos].fillStyle=et)},CVContextData.prototype.strokeStyle=function(et){this.stack[this.cArrPos].strokeStyle!==et&&(this.currentStrokeStyle=et,this.stack[this.cArrPos].strokeStyle=et)},CVContextData.prototype.lineWidth=function(et){this.stack[this.cArrPos].lineWidth!==et&&(this.currentLineWidth=et,this.stack[this.cArrPos].lineWidth=et)},CVContextData.prototype.lineCap=function(et){this.stack[this.cArrPos].lineCap!==et&&(this.currentLineCap=et,this.stack[this.cArrPos].lineCap=et)},CVContextData.prototype.lineJoin=function(et){this.stack[this.cArrPos].lineJoin!==et&&(this.currentLineJoin=et,this.stack[this.cArrPos].lineJoin=et)},CVContextData.prototype.miterLimit=function(et){this.stack[this.cArrPos].miterLimit!==et&&(this.currentMiterLimit=et,this.stack[this.cArrPos].miterLimit=et)},CVContextData.prototype.transform=function(et){this.transformMat.cloneFromProps(et);var dt=this.cTr;this.transformMat.multiply(dt),dt.cloneFromProps(this.transformMat.props);var $t=dt.props;this.nativeContext.setTransform($t[0],$t[1],$t[4],$t[5],$t[12],$t[13])},CVContextData.prototype.opacity=function(et){var dt=this.stack[this.cArrPos].opacity;dt*=et<0?0:et,this.stack[this.cArrPos].opacity!==dt&&(this.currentOpacity!==et&&(this.nativeContext.globalAlpha=et,this.currentOpacity=et),this.stack[this.cArrPos].opacity=dt)},CVContextData.prototype.fill=function(et){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(et)},CVContextData.prototype.fillRect=function(et,dt,$t,kt){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(et,dt,$t,kt)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(et,dt,$t){this.completeLayers=!1,this.layers=et.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(et,dt,$t),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,dt.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var et=this.canvasContext;et.beginPath(),et.moveTo(0,0),et.lineTo(this.data.w,0),et.lineTo(this.data.w,this.data.h),et.lineTo(0,this.data.h),et.lineTo(0,0),et.clip();var dt,$t=this.layers.length;for(dt=$t-1;dt>=0;dt-=1)(this.completeLayers||this.elements[dt])&&this.elements[dt].renderFrame()},CVCompElement.prototype.destroy=function(){var et,dt=this.layers.length;for(et=dt-1;et>=0;et-=1)this.elements[et]&&this.elements[et].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(et){return new CVCompElement(et,this.globalData,this)};function CanvasRenderer(et,dt){this.animationItem=et,this.renderConfig={clearCanvas:dt&&dt.clearCanvas!==void 0?dt.clearCanvas:!0,context:dt&&dt.context||null,progressiveLoad:dt&&dt.progressiveLoad||!1,preserveAspectRatio:dt&&dt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:dt&&dt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:dt&&dt.contentVisibility||"visible",className:dt&&dt.className||"",id:dt&&dt.id||"",runExpressions:!dt||dt.runExpressions===void 0||dt.runExpressions},this.renderConfig.dpr=dt&&dt.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=dt&&dt.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(et){return new CVCompElement(et,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var dt=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var $t=this.finalTransform.mat.toCSS();dt.transform=$t,dt.webkitTransform=$t}this.finalTransform._opMdf&&(dt.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(et,dt,$t){this.initElement(et,dt,$t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var et;this.data.hasMask?(et=createNS("rect"),et.setAttribute("width",this.data.sw),et.setAttribute("height",this.data.sh),et.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(et=createTag("div"),et.style.width=this.data.sw+"px",et.style.height=this.data.sh+"px",et.style.backgroundColor=this.data.sc),this.layerElement.appendChild(et)};function HShapeElement(et,dt,$t){this.shapes=[],this.shapesData=et.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(et,dt,$t),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var et;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),et=this.svgElement;else{et=createNS("svg");var dt=this.comp.data?this.comp.data:this.globalData.compSize;et.setAttribute("width",dt.w),et.setAttribute("height",dt.h),et.appendChild(this.shapesContainer),this.layerElement.appendChild(et)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=et},HShapeElement.prototype.getTransformedPoint=function(et,dt){var $t,kt=et.length;for($t=0;$t<kt;$t+=1)dt=et[$t].mProps.v.applyToPointArray(dt[0],dt[1],0);return dt},HShapeElement.prototype.calculateShapeBoundingBox=function(et,dt){var $t=et.sh.v,kt=et.transformers,Tt,Dt=$t._length,Ft,Ut,Ht,Kt;if(!(Dt<=1)){for(Tt=0;Tt<Dt-1;Tt+=1)Ft=this.getTransformedPoint(kt,$t.v[Tt]),Ut=this.getTransformedPoint(kt,$t.o[Tt]),Ht=this.getTransformedPoint(kt,$t.i[Tt+1]),Kt=this.getTransformedPoint(kt,$t.v[Tt+1]),this.checkBounds(Ft,Ut,Ht,Kt,dt);$t.c&&(Ft=this.getTransformedPoint(kt,$t.v[Tt]),Ut=this.getTransformedPoint(kt,$t.o[Tt]),Ht=this.getTransformedPoint(kt,$t.i[0]),Kt=this.getTransformedPoint(kt,$t.v[0]),this.checkBounds(Ft,Ut,Ht,Kt,dt))}},HShapeElement.prototype.checkBounds=function(et,dt,$t,kt,Tt){this.getBoundsOfCurve(et,dt,$t,kt);var Dt=this.shapeBoundingBox;Tt.x=bmMin(Dt.left,Tt.x),Tt.xMax=bmMax(Dt.right,Tt.xMax),Tt.y=bmMin(Dt.top,Tt.y),Tt.yMax=bmMax(Dt.bottom,Tt.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(et,dt,$t,kt){for(var Tt=[[et[0],kt[0]],[et[1],kt[1]]],Dt,Ft,Ut,Ht,Kt,Yt,Jt,Zt=0;Zt<2;++Zt)Ft=6*et[Zt]-12*dt[Zt]+6*$t[Zt],Dt=-3*et[Zt]+9*dt[Zt]-9*$t[Zt]+3*kt[Zt],Ut=3*dt[Zt]-3*et[Zt],Ft|=0,Dt|=0,Ut|=0,Dt===0&&Ft===0||(Dt===0?(Ht=-Ut/Ft,Ht>0&&Ht<1&&Tt[Zt].push(this.calculateF(Ht,et,dt,$t,kt,Zt))):(Kt=Ft*Ft-4*Ut*Dt,Kt>=0&&(Yt=(-Ft+bmSqrt(Kt))/(2*Dt),Yt>0&&Yt<1&&Tt[Zt].push(this.calculateF(Yt,et,dt,$t,kt,Zt)),Jt=(-Ft-bmSqrt(Kt))/(2*Dt),Jt>0&&Jt<1&&Tt[Zt].push(this.calculateF(Jt,et,dt,$t,kt,Zt)))));this.shapeBoundingBox.left=bmMin.apply(null,Tt[0]),this.shapeBoundingBox.top=bmMin.apply(null,Tt[1]),this.shapeBoundingBox.right=bmMax.apply(null,Tt[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,Tt[1])},HShapeElement.prototype.calculateF=function(et,dt,$t,kt,Tt,Dt){return bmPow(1-et,3)*dt[Dt]+3*bmPow(1-et,2)*et*$t[Dt]+3*(1-et)*bmPow(et,2)*kt[Dt]+bmPow(et,3)*Tt[Dt]},HShapeElement.prototype.calculateBoundingBox=function(et,dt){var $t,kt=et.length;for($t=0;$t<kt;$t+=1)et[$t]&&et[$t].sh?this.calculateShapeBoundingBox(et[$t],dt):et[$t]&&et[$t].it?this.calculateBoundingBox(et[$t].it,dt):et[$t]&&et[$t].style&&et[$t].w&&this.expandStrokeBoundingBox(et[$t].w,dt)},HShapeElement.prototype.expandStrokeBoundingBox=function(et,dt){var $t=0;if(et.keyframes){for(var kt=0;kt<et.keyframes.length;kt+=1){var Tt=et.keyframes[kt].s;Tt>$t&&($t=Tt)}$t*=et.mult}else $t=et.v*et.mult;dt.x-=$t,dt.xMax+=$t,dt.y-=$t,dt.yMax+=$t},HShapeElement.prototype.currentBoxContains=function(et){return this.currentBBox.x<=et.x&&this.currentBBox.y<=et.y&&this.currentBBox.width+this.currentBBox.x>=et.x+et.width&&this.currentBBox.height+this.currentBBox.y>=et.y+et.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var et=this.tempBoundingBox,dt=999999;if(et.x=dt,et.xMax=-dt,et.y=dt,et.yMax=-dt,this.calculateBoundingBox(this.itemsData,et),et.width=et.xMax<et.x?0:et.xMax-et.x,et.height=et.yMax<et.y?0:et.yMax-et.y,this.currentBoxContains(et))return;var $t=!1;if(this.currentBBox.w!==et.width&&(this.currentBBox.w=et.width,this.shapeCont.setAttribute("width",et.width),$t=!0),this.currentBBox.h!==et.height&&(this.currentBBox.h=et.height,this.shapeCont.setAttribute("height",et.height),$t=!0),$t||this.currentBBox.x!==et.x||this.currentBBox.y!==et.y){this.currentBBox.w=et.width,this.currentBBox.h=et.height,this.currentBBox.x=et.x,this.currentBBox.y=et.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var kt=this.shapeCont.style,Tt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";kt.transform=Tt,kt.webkitTransform=Tt}}};function HTextElement(et,dt,$t){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(et,dt,$t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var et=createNS("g");this.maskedElement.appendChild(et),this.innerElem=et}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var et=this.textProperty.currentData;this.renderedLetters=createSizedArray(et.l?et.l.length:0);var dt=this.innerElem.style,$t=et.fc?this.buildColor(et.fc):"rgba(0,0,0,0)";dt.fill=$t,dt.color=$t,et.sc&&(dt.stroke=this.buildColor(et.sc),dt.strokeWidth=et.sw+"px");var kt=this.globalData.fontManager.getFontByName(et.f);if(!this.globalData.fontManager.chars)if(dt.fontSize=et.finalSize+"px",dt.lineHeight=et.finalSize+"px",kt.fClass)this.innerElem.className=kt.fClass;else{dt.fontFamily=kt.fFamily;var Tt=et.fWeight,Dt=et.fStyle;dt.fontStyle=Dt,dt.fontWeight=Tt}var Ft,Ut,Ht=et.l;Ut=Ht.length;var Kt,Yt,Jt,Zt=this.mHelper,er,rr="",sr=0;for(Ft=0;Ft<Ut;Ft+=1){if(this.globalData.fontManager.chars?(this.textPaths[sr]?Kt=this.textPaths[sr]:(Kt=createNS("path"),Kt.setAttribute("stroke-linecap",lineCapEnum[1]),Kt.setAttribute("stroke-linejoin",lineJoinEnum[2]),Kt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[sr]?(Yt=this.textSpans[sr],Jt=Yt.children[0]):(Yt=createTag("div"),Yt.style.lineHeight=0,Jt=createNS("svg"),Jt.appendChild(Kt),styleDiv(Yt)))):this.isMasked?Kt=this.textPaths[sr]?this.textPaths[sr]:createNS("text"):this.textSpans[sr]?(Yt=this.textSpans[sr],Kt=this.textPaths[sr]):(Yt=createTag("span"),styleDiv(Yt),Kt=createTag("span"),styleDiv(Kt),Yt.appendChild(Kt)),this.globalData.fontManager.chars){var nr=this.globalData.fontManager.getCharData(et.finalText[Ft],kt.fStyle,this.globalData.fontManager.getFontByName(et.f).fFamily),ir;if(nr?ir=nr.data:ir=null,Zt.reset(),ir&&ir.shapes&&ir.shapes.length&&(er=ir.shapes[0].it,Zt.scale(et.finalSize/100,et.finalSize/100),rr=this.createPathShape(Zt,er),Kt.setAttribute("d",rr)),this.isMasked)this.innerElem.appendChild(Kt);else{if(this.innerElem.appendChild(Yt),ir&&ir.shapes){document.body.appendChild(Jt);var or=Jt.getBBox();Jt.setAttribute("width",or.width+2),Jt.setAttribute("height",or.height+2),Jt.setAttribute("viewBox",or.x-1+" "+(or.y-1)+" "+(or.width+2)+" "+(or.height+2));var lr=Jt.style,cr="translate("+(or.x-1)+"px,"+(or.y-1)+"px)";lr.transform=cr,lr.webkitTransform=cr,Ht[Ft].yOffset=or.y-1}else Jt.setAttribute("width",1),Jt.setAttribute("height",1);Yt.appendChild(Jt)}}else if(Kt.textContent=Ht[Ft].val,Kt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(Kt);else{this.innerElem.appendChild(Yt);var dr=Kt.style,ur="translate3d(0,"+-et.finalSize/1.2+"px,0)";dr.transform=ur,dr.webkitTransform=ur}this.isMasked?this.textSpans[sr]=Kt:this.textSpans[sr]=Yt,this.textSpans[sr].style.display="block",this.textPaths[sr]=Kt,sr+=1}for(;sr<this.textSpans.length;)this.textSpans[sr].style.display="none",sr+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var et;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),et=this.svgElement.style;var dt="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";et.transform=dt,et.webkitTransform=dt}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var $t,kt,Tt=0,Dt=this.textAnimator.renderedLetters,Ft=this.textProperty.currentData.l;kt=Ft.length;var Ut,Ht,Kt;for($t=0;$t<kt;$t+=1)Ft[$t].n?Tt+=1:(Ht=this.textSpans[$t],Kt=this.textPaths[$t],Ut=Dt[Tt],Tt+=1,Ut._mdf.m&&(this.isMasked?Ht.setAttribute("transform",Ut.m):(Ht.style.webkitTransform=Ut.m,Ht.style.transform=Ut.m)),Ht.style.opacity=Ut.o,Ut.sw&&Ut._mdf.sw&&Kt.setAttribute("stroke-width",Ut.sw),Ut.sc&&Ut._mdf.sc&&Kt.setAttribute("stroke",Ut.sc),Ut.fc&&Ut._mdf.fc&&(Kt.setAttribute("fill",Ut.fc),Kt.style.color=Ut.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Yt=this.innerElem.getBBox();this.currentBBox.w!==Yt.width&&(this.currentBBox.w=Yt.width,this.svgElement.setAttribute("width",Yt.width)),this.currentBBox.h!==Yt.height&&(this.currentBBox.h=Yt.height,this.svgElement.setAttribute("height",Yt.height));var Jt=1;if(this.currentBBox.w!==Yt.width+Jt*2||this.currentBBox.h!==Yt.height+Jt*2||this.currentBBox.x!==Yt.x-Jt||this.currentBBox.y!==Yt.y-Jt){this.currentBBox.w=Yt.width+Jt*2,this.currentBBox.h=Yt.height+Jt*2,this.currentBBox.x=Yt.x-Jt,this.currentBBox.y=Yt.y-Jt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),et=this.svgElement.style;var Zt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";et.transform=Zt,et.webkitTransform=Zt}}}};function HCameraElement(et,dt,$t){this.initFrame(),this.initBaseData(et,dt,$t),this.initHierarchy();var kt=PropertyFactory.getProp;if(this.pe=kt(this,et.pe,0,0,this),et.ks.p.s?(this.px=kt(this,et.ks.p.x,1,0,this),this.py=kt(this,et.ks.p.y,1,0,this),this.pz=kt(this,et.ks.p.z,1,0,this)):this.p=kt(this,et.ks.p,1,0,this),et.ks.a&&(this.a=kt(this,et.ks.a,1,0,this)),et.ks.or.k.length&&et.ks.or.k[0].to){var Tt,Dt=et.ks.or.k.length;for(Tt=0;Tt<Dt;Tt+=1)et.ks.or.k[Tt].to=null,et.ks.or.k[Tt].ti=null}this.or=kt(this,et.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=kt(this,et.ks.rx,0,degToRads,this),this.ry=kt(this,et.ks.ry,0,degToRads,this),this.rz=kt(this,et.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var et,dt=this.comp.threeDElements.length,$t,kt,Tt;for(et=0;et<dt;et+=1)if($t=this.comp.threeDElements[et],$t.type==="3d"){kt=$t.perspectiveElem.style,Tt=$t.container.style;var Dt=this.pe.v+"px",Ft="0px 0px 0px",Ut="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";kt.perspective=Dt,kt.webkitPerspective=Dt,Tt.transformOrigin=Ft,Tt.mozTransformOrigin=Ft,Tt.webkitTransformOrigin=Ft,kt.transform=Ut,kt.webkitTransform=Ut}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var et=this._isFirstFrame,dt,$t;if(this.hierarchy)for($t=this.hierarchy.length,dt=0;dt<$t;dt+=1)et=this.hierarchy[dt].finalTransform.mProp._mdf||et;if(et||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for($t=this.hierarchy.length-1,dt=$t;dt>=0;dt-=1){var kt=this.hierarchy[dt].finalTransform.mProp;this.mat.translate(-kt.p.v[0],-kt.p.v[1],kt.p.v[2]),this.mat.rotateX(-kt.or.v[0]).rotateY(-kt.or.v[1]).rotateZ(kt.or.v[2]),this.mat.rotateX(-kt.rx.v).rotateY(-kt.ry.v).rotateZ(kt.rz.v),this.mat.scale(1/kt.s.v[0],1/kt.s.v[1],1/kt.s.v[2]),this.mat.translate(kt.a.v[0],kt.a.v[1],kt.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var Tt;this.p?Tt=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:Tt=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var Dt=Math.sqrt(Math.pow(Tt[0],2)+Math.pow(Tt[1],2)+Math.pow(Tt[2],2)),Ft=[Tt[0]/Dt,Tt[1]/Dt,Tt[2]/Dt],Ut=Math.sqrt(Ft[2]*Ft[2]+Ft[0]*Ft[0]),Ht=Math.atan2(Ft[1],Ut),Kt=Math.atan2(Ft[0],-Ft[2]);this.mat.rotateY(Kt).rotateX(-Ht)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Yt=!this._prevMat.equals(this.mat);if((Yt||this.pe._mdf)&&this.comp.threeDElements){$t=this.comp.threeDElements.length;var Jt,Zt,er;for(dt=0;dt<$t;dt+=1)if(Jt=this.comp.threeDElements[dt],Jt.type==="3d"){if(Yt){var rr=this.mat.toCSS();er=Jt.container.style,er.transform=rr,er.webkitTransform=rr}this.pe._mdf&&(Zt=Jt.perspectiveElem.style,Zt.perspective=this.pe.v+"px",Zt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(et){this.prepareProperties(et,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(et,dt,$t){this.assetData=dt.getAssetData(et.refId),this.initElement(et,dt,$t)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var et=this.globalData.getAssetsPath(this.assetData),dt=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",et),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(dt),dt.crossOrigin="anonymous",dt.src=et,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(et,dt){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:dt&&dt.className||"",imagePreserveAspectRatio:dt&&dt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(dt&&dt.hideOnTransparent===!1),filterSize:{width:dt&&dt.filterSize&&dt.filterSize.width||"400%",height:dt&&dt.filterSize&&dt.filterSize.height||"400%",x:dt&&dt.filterSize&&dt.filterSize.x||"-100%",y:dt&&dt.filterSize&&dt.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var et=this.pendingElements.pop();et.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(et,dt){var $t=et.getBaseElement();if($t){var kt=this.layers[dt];if(!kt.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer($t,dt);else{for(var Tt=0,Dt,Ft,Ut;Tt<dt;)this.elements[Tt]&&this.elements[Tt]!==!0&&this.elements[Tt].getBaseElement&&(Ft=this.elements[Tt],Ut=this.layers[Tt].ddd?this.getThreeDContainerByPos(Tt):Ft.getBaseElement(),Dt=Ut||Dt),Tt+=1;Dt?(!kt.ddd||!this.supports3d)&&this.layerElement.insertBefore($t,Dt):(!kt.ddd||!this.supports3d)&&this.layerElement.appendChild($t)}else this.addTo3dContainer($t,dt)}},HybridRendererBase.prototype.createShape=function(et){return this.supports3d?new HShapeElement(et,this.globalData,this):new SVGShapeElement(et,this.globalData,this)},HybridRendererBase.prototype.createText=function(et){return this.supports3d?new HTextElement(et,this.globalData,this):new SVGTextLottieElement(et,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(et){return this.camera=new HCameraElement(et,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(et){return this.supports3d?new HImageElement(et,this.globalData,this):new IImageElement(et,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(et){return this.supports3d?new HSolidElement(et,this.globalData,this):new ISolidElement(et,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(et){for(var dt=0,$t=this.threeDElements.length;dt<$t;){if(this.threeDElements[dt].startPos<=et&&this.threeDElements[dt].endPos>=et)return this.threeDElements[dt].perspectiveElem;dt+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(et,dt){var $t=createTag("div"),kt,Tt;styleDiv($t);var Dt=createTag("div");if(styleDiv(Dt),dt==="3d"){kt=$t.style,kt.width=this.globalData.compSize.w+"px",kt.height=this.globalData.compSize.h+"px";var Ft="50% 50%";kt.webkitTransformOrigin=Ft,kt.mozTransformOrigin=Ft,kt.transformOrigin=Ft,Tt=Dt.style;var Ut="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";Tt.transform=Ut,Tt.webkitTransform=Ut}$t.appendChild(Dt);var Ht={container:Dt,perspectiveElem:$t,startPos:et,endPos:et,type:dt};return this.threeDElements.push(Ht),Ht},HybridRendererBase.prototype.build3dContainers=function(){var et,dt=this.layers.length,$t,kt="";for(et=0;et<dt;et+=1)this.layers[et].ddd&&this.layers[et].ty!==3?(kt!=="3d"&&(kt="3d",$t=this.createThreeDContainer(et,"3d")),$t.endPos=Math.max($t.endPos,et)):(kt!=="2d"&&(kt="2d",$t=this.createThreeDContainer(et,"2d")),$t.endPos=Math.max($t.endPos,et));for(dt=this.threeDElements.length,et=dt-1;et>=0;et-=1)this.resizerElem.appendChild(this.threeDElements[et].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(et,dt){for(var $t=0,kt=this.threeDElements.length;$t<kt;){if(dt<=this.threeDElements[$t].endPos){for(var Tt=this.threeDElements[$t].startPos,Dt;Tt<dt;)this.elements[Tt]&&this.elements[Tt].getBaseElement&&(Dt=this.elements[Tt].getBaseElement()),Tt+=1;Dt?this.threeDElements[$t].container.insertBefore(et,Dt):this.threeDElements[$t].container.appendChild(et);break}$t+=1}},HybridRendererBase.prototype.configAnimation=function(et){var dt=createTag("div"),$t=this.animationItem.wrapper,kt=dt.style;kt.width=et.w+"px",kt.height=et.h+"px",this.resizerElem=dt,styleDiv(dt),kt.transformStyle="flat",kt.mozTransformStyle="flat",kt.webkitTransformStyle="flat",this.renderConfig.className&&dt.setAttribute("class",this.renderConfig.className),$t.appendChild(dt),kt.overflow="hidden";var Tt=createNS("svg");Tt.setAttribute("width","1"),Tt.setAttribute("height","1"),styleDiv(Tt),this.resizerElem.appendChild(Tt);var Dt=createNS("defs");Tt.appendChild(Dt),this.data=et,this.setupGlobalData(et,Tt),this.globalData.defs=Dt,this.layers=et.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var et,dt=this.layers?this.layers.length:0;for(et=0;et<dt;et+=1)this.elements[et]&&this.elements[et].destroy&&this.elements[et].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var et=this.animationItem.wrapper.offsetWidth,dt=this.animationItem.wrapper.offsetHeight,$t=et/dt,kt=this.globalData.compSize.w/this.globalData.compSize.h,Tt,Dt,Ft,Ut;kt>$t?(Tt=et/this.globalData.compSize.w,Dt=et/this.globalData.compSize.w,Ft=0,Ut=(dt-this.globalData.compSize.h*(et/this.globalData.compSize.w))/2):(Tt=dt/this.globalData.compSize.h,Dt=dt/this.globalData.compSize.h,Ft=(et-this.globalData.compSize.w*(dt/this.globalData.compSize.h))/2,Ut=0);var Ht=this.resizerElem.style;Ht.webkitTransform="matrix3d("+Tt+",0,0,0,0,"+Dt+",0,0,0,0,1,0,"+Ft+","+Ut+",0,1)",Ht.transform=Ht.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var et=this.globalData.compSize.w,dt=this.globalData.compSize.h,$t,kt=this.threeDElements.length;for($t=0;$t<kt;$t+=1){var Tt=this.threeDElements[$t].perspectiveElem.style;Tt.webkitPerspective=Math.sqrt(Math.pow(et,2)+Math.pow(dt,2))+"px",Tt.perspective=Tt.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(et){var dt,$t=et.length,kt=createTag("div");for(dt=0;dt<$t;dt+=1)if(et[dt].xt){var Tt=this.createComp(et[dt],kt,this.globalData.comp,null);Tt.initExpressions(),this.globalData.projectInterface.registerComposition(Tt)}};function HCompElement(et,dt,$t){this.layers=et.layers,this.supports3d=!et.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(et,dt,$t),this.tm=et.tm?PropertyFactory.getProp(this,et.tm,0,dt.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(et,dt){for(var $t=0,kt;$t<dt;)this.elements[$t]&&this.elements[$t].getBaseElement&&(kt=this.elements[$t].getBaseElement()),$t+=1;kt?this.layerElement.insertBefore(et,kt):this.layerElement.appendChild(et)},HCompElement.prototype.createComp=function(et){return this.supports3d?new HCompElement(et,this.globalData,this):new SVGCompElement(et,this.globalData,this)};function HybridRenderer(et,dt){this.animationItem=et,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:dt&&dt.className||"",imagePreserveAspectRatio:dt&&dt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(dt&&dt.hideOnTransparent===!1),filterSize:{width:dt&&dt.filterSize&&dt.filterSize.width||"400%",height:dt&&dt.filterSize&&dt.filterSize.height||"400%",x:dt&&dt.filterSize&&dt.filterSize.x||"-100%",y:dt&&dt.filterSize&&dt.filterSize.y||"-100%"},runExpressions:!dt||dt.runExpressions===void 0||dt.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(et){return this.supports3d?new HCompElement(et,this.globalData,this):new SVGCompElement(et,this.globalData,this)};var CompExpressionInterface=function(){return function(et){function dt($t){for(var kt=0,Tt=et.layers.length;kt<Tt;){if(et.layers[kt].nm===$t||et.layers[kt].ind===$t)return et.elements[kt].layerInterface;kt+=1}return null}return Object.defineProperty(dt,"_name",{value:et.data.nm}),dt.layer=dt,dt.pixelAspect=1,dt.height=et.data.h||et.globalData.compSize.h,dt.width=et.data.w||et.globalData.compSize.w,dt.pixelAspect=1,dt.frameDuration=1/et.globalData.frameRate,dt.displayStartTime=0,dt.numLayers=et.layers.length,dt}}();function _typeof$2(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function($t){return typeof $t}:_typeof$2=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_typeof$2(et)}function seedRandom(et,dt){var $t=this,kt=256,Tt=6,Dt=52,Ft="random",Ut=dt.pow(kt,Tt),Ht=dt.pow(2,Dt),Kt=Ht*2,Yt=kt-1,Jt;function Zt(lr,cr,dr){var ur=[];cr=cr===!0?{entropy:!0}:cr||{};var pr=nr(sr(cr.entropy?[lr,or(et)]:lr===null?ir():lr,3),ur),mr=new er(ur),jr=function(){for(var xr=mr.g(Tt),kr=Ut,Mr=0;xr<Ht;)xr=(xr+Mr)*kt,kr*=kt,Mr=mr.g(1);for(;xr>=Kt;)xr/=2,kr/=2,Mr>>>=1;return(xr+Mr)/kr};return jr.int32=function(){return mr.g(4)|0},jr.quick=function(){return mr.g(4)/4294967296},jr.double=jr,nr(or(mr.S),et),(cr.pass||dr||function(Rr,xr,kr,Mr){return Mr&&(Mr.S&&rr(Mr,mr),Rr.state=function(){return rr(mr,{})}),kr?(dt[Ft]=Rr,xr):Rr})(jr,pr,"global"in cr?cr.global:this==dt,cr.state)}dt["seed"+Ft]=Zt;function er(lr){var cr,dr=lr.length,ur=this,pr=0,mr=ur.i=ur.j=0,jr=ur.S=[];for(dr||(lr=[dr++]);pr<kt;)jr[pr]=pr++;for(pr=0;pr<kt;pr++)jr[pr]=jr[mr=Yt&mr+lr[pr%dr]+(cr=jr[pr])],jr[mr]=cr;ur.g=function(Rr){for(var xr,kr=0,Mr=ur.i,Tr=ur.j,Or=ur.S;Rr--;)xr=Or[Mr=Yt&Mr+1],kr=kr*kt+Or[Yt&(Or[Mr]=Or[Tr=Yt&Tr+xr])+(Or[Tr]=xr)];return ur.i=Mr,ur.j=Tr,kr}}function rr(lr,cr){return cr.i=lr.i,cr.j=lr.j,cr.S=lr.S.slice(),cr}function sr(lr,cr){var dr=[],ur=_typeof$2(lr),pr;if(cr&&ur=="object")for(pr in lr)try{dr.push(sr(lr[pr],cr-1))}catch{}return dr.length?dr:ur=="string"?lr:lr+"\0"}function nr(lr,cr){for(var dr=lr+"",ur,pr=0;pr<dr.length;)cr[Yt&pr]=Yt&(ur^=cr[Yt&pr]*19)+dr.charCodeAt(pr++);return or(cr)}function ir(){try{var lr=new Uint8Array(kt);return($t.crypto||$t.msCrypto).getRandomValues(lr),or(lr)}catch{var cr=$t.navigator,dr=cr&&cr.plugins;return[+new Date,$t,dr,$t.screen,or(et)]}}function or(lr){return String.fromCharCode.apply(0,lr)}nr(dt.random(),et)}function initialize$2(et){seedRandom([],et)}var propTypes={SHAPE:"shape"};function _typeof$1(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function($t){return typeof $t}:_typeof$1=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_typeof$1(et)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(et){return et.constructor===Array||et.constructor===Float32Array}function isNumerable(et,dt){return et==="number"||dt instanceof Number||et==="boolean"||et==="string"}function $bm_neg(et){var dt=_typeof$1(et);if(dt==="number"||et instanceof Number||dt==="boolean")return-et;if($bm_isInstanceOfArray(et)){var $t,kt=et.length,Tt=[];for($t=0;$t<kt;$t+=1)Tt[$t]=-et[$t];return Tt}return et.propType?et.v:-et}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(et,dt){var $t=_typeof$1(et),kt=_typeof$1(dt);if(isNumerable($t,et)&&isNumerable(kt,dt)||$t==="string"||kt==="string")return et+dt;if($bm_isInstanceOfArray(et)&&isNumerable(kt,dt))return et=et.slice(0),et[0]+=dt,et;if(isNumerable($t,et)&&$bm_isInstanceOfArray(dt))return dt=dt.slice(0),dt[0]=et+dt[0],dt;if($bm_isInstanceOfArray(et)&&$bm_isInstanceOfArray(dt)){for(var Tt=0,Dt=et.length,Ft=dt.length,Ut=[];Tt<Dt||Tt<Ft;)(typeof et[Tt]=="number"||et[Tt]instanceof Number)&&(typeof dt[Tt]=="number"||dt[Tt]instanceof Number)?Ut[Tt]=et[Tt]+dt[Tt]:Ut[Tt]=dt[Tt]===void 0?et[Tt]:et[Tt]||dt[Tt],Tt+=1;return Ut}return 0}var add=sum;function sub(et,dt){var $t=_typeof$1(et),kt=_typeof$1(dt);if(isNumerable($t,et)&&isNumerable(kt,dt))return $t==="string"&&(et=parseInt(et,10)),kt==="string"&&(dt=parseInt(dt,10)),et-dt;if($bm_isInstanceOfArray(et)&&isNumerable(kt,dt))return et=et.slice(0),et[0]-=dt,et;if(isNumerable($t,et)&&$bm_isInstanceOfArray(dt))return dt=dt.slice(0),dt[0]=et-dt[0],dt;if($bm_isInstanceOfArray(et)&&$bm_isInstanceOfArray(dt)){for(var Tt=0,Dt=et.length,Ft=dt.length,Ut=[];Tt<Dt||Tt<Ft;)(typeof et[Tt]=="number"||et[Tt]instanceof Number)&&(typeof dt[Tt]=="number"||dt[Tt]instanceof Number)?Ut[Tt]=et[Tt]-dt[Tt]:Ut[Tt]=dt[Tt]===void 0?et[Tt]:et[Tt]||dt[Tt],Tt+=1;return Ut}return 0}function mul(et,dt){var $t=_typeof$1(et),kt=_typeof$1(dt),Tt;if(isNumerable($t,et)&&isNumerable(kt,dt))return et*dt;var Dt,Ft;if($bm_isInstanceOfArray(et)&&isNumerable(kt,dt)){for(Ft=et.length,Tt=createTypedArray("float32",Ft),Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=et[Dt]*dt;return Tt}if(isNumerable($t,et)&&$bm_isInstanceOfArray(dt)){for(Ft=dt.length,Tt=createTypedArray("float32",Ft),Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=et*dt[Dt];return Tt}return 0}function div(et,dt){var $t=_typeof$1(et),kt=_typeof$1(dt),Tt;if(isNumerable($t,et)&&isNumerable(kt,dt))return et/dt;var Dt,Ft;if($bm_isInstanceOfArray(et)&&isNumerable(kt,dt)){for(Ft=et.length,Tt=createTypedArray("float32",Ft),Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=et[Dt]/dt;return Tt}if(isNumerable($t,et)&&$bm_isInstanceOfArray(dt)){for(Ft=dt.length,Tt=createTypedArray("float32",Ft),Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=et/dt[Dt];return Tt}return 0}function mod(et,dt){return typeof et=="string"&&(et=parseInt(et,10)),typeof dt=="string"&&(dt=parseInt(dt,10)),et%dt}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(et,dt,$t){if(dt>$t){var kt=$t;$t=dt,dt=kt}return Math.min(Math.max(et,dt),$t)}function radiansToDegrees(et){return et/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(et){return et*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(et,dt){if(typeof et=="number"||et instanceof Number)return dt=dt||0,Math.abs(et-dt);dt||(dt=helperLengthArray);var $t,kt=Math.min(et.length,dt.length),Tt=0;for($t=0;$t<kt;$t+=1)Tt+=Math.pow(dt[$t]-et[$t],2);return Math.sqrt(Tt)}function normalize(et){return div(et,length(et))}function rgbToHsl(et){var dt=et[0],$t=et[1],kt=et[2],Tt=Math.max(dt,$t,kt),Dt=Math.min(dt,$t,kt),Ft,Ut,Ht=(Tt+Dt)/2;if(Tt===Dt)Ft=0,Ut=0;else{var Kt=Tt-Dt;switch(Ut=Ht>.5?Kt/(2-Tt-Dt):Kt/(Tt+Dt),Tt){case dt:Ft=($t-kt)/Kt+($t<kt?6:0);break;case $t:Ft=(kt-dt)/Kt+2;break;case kt:Ft=(dt-$t)/Kt+4;break}Ft/=6}return[Ft,Ut,Ht,et[3]]}function hue2rgb(et,dt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?et+(dt-et)*6*$t:$t<1/2?dt:$t<2/3?et+(dt-et)*(2/3-$t)*6:et}function hslToRgb(et){var dt=et[0],$t=et[1],kt=et[2],Tt,Dt,Ft;if($t===0)Tt=kt,Ft=kt,Dt=kt;else{var Ut=kt<.5?kt*(1+$t):kt+$t-kt*$t,Ht=2*kt-Ut;Tt=hue2rgb(Ht,Ut,dt+1/3),Dt=hue2rgb(Ht,Ut,dt),Ft=hue2rgb(Ht,Ut,dt-1/3)}return[Tt,Dt,Ft,et[3]]}function linear(et,dt,$t,kt,Tt){if((kt===void 0||Tt===void 0)&&(kt=dt,Tt=$t,dt=0,$t=1),$t<dt){var Dt=$t;$t=dt,dt=Dt}if(et<=dt)return kt;if(et>=$t)return Tt;var Ft=$t===dt?0:(et-dt)/($t-dt);if(!kt.length)return kt+(Tt-kt)*Ft;var Ut,Ht=kt.length,Kt=createTypedArray("float32",Ht);for(Ut=0;Ut<Ht;Ut+=1)Kt[Ut]=kt[Ut]+(Tt[Ut]-kt[Ut])*Ft;return Kt}function random(et,dt){if(dt===void 0&&(et===void 0?(et=0,dt=1):(dt=et,et=void 0)),dt.length){var $t,kt=dt.length;et||(et=createTypedArray("float32",kt));var Tt=createTypedArray("float32",kt),Dt=BMMath.random();for($t=0;$t<kt;$t+=1)Tt[$t]=et[$t]+Dt*(dt[$t]-et[$t]);return Tt}et===void 0&&(et=0);var Ft=BMMath.random();return et+Ft*(dt-et)}function createPath(et,dt,$t,kt){var Tt,Dt=et.length,Ft=shapePool.newElement();Ft.setPathData(!!kt,Dt);var Ut=[0,0],Ht,Kt;for(Tt=0;Tt<Dt;Tt+=1)Ht=dt&&dt[Tt]?dt[Tt]:Ut,Kt=$t&&$t[Tt]?$t[Tt]:Ut,Ft.setTripleAt(et[Tt][0],et[Tt][1],Kt[0]+et[Tt][0],Kt[1]+et[Tt][1],Ht[0]+et[Tt][0],Ht[1]+et[Tt][1],Tt,!0);return Ft}function initiateExpression(elem,data,property){function noOp(et){return et}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function et(dt,$t){var kt,Tt,Dt=this.pv.length?this.pv.length:1,Ft=createTypedArray("float32",Dt);dt=5;var Ut=Math.floor(time*dt);for(kt=0,Tt=0;kt<Ut;){for(Tt=0;Tt<Dt;Tt+=1)Ft[Tt]+=-$t+$t*2*BMMath.random();kt+=1}var Ht=time*dt,Kt=Ht-Math.floor(Ht),Yt=createTypedArray("float32",Dt);if(Dt>1){for(Tt=0;Tt<Dt;Tt+=1)Yt[Tt]=this.pv[Tt]+Ft[Tt]+(-$t+$t*2*BMMath.random())*Kt;return Yt}return this.pv+Ft[0]+(-$t+$t*2*BMMath.random())*Kt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(et,dt){return loopIn(et,dt,!0)}function loopOutDuration(et,dt){return loopOut(et,dt,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(et,dt){var $t=[dt[0]-et[0],dt[1]-et[1],dt[2]-et[2]],kt=Math.atan2($t[0],Math.sqrt($t[1]*$t[1]+$t[2]*$t[2]))/degToRads,Tt=-Math.atan2($t[1],$t[2])/degToRads;return[Tt,kt,0]}function easeOut(et,dt,$t,kt,Tt){return applyEase(easeOutBez,et,dt,$t,kt,Tt)}function easeIn(et,dt,$t,kt,Tt){return applyEase(easeInBez,et,dt,$t,kt,Tt)}function ease(et,dt,$t,kt,Tt){return applyEase(easeInOutBez,et,dt,$t,kt,Tt)}function applyEase(et,dt,$t,kt,Tt,Dt){Tt===void 0?(Tt=$t,Dt=kt):dt=(dt-$t)/(kt-$t),dt>1?dt=1:dt<0&&(dt=0);var Ft=et(dt);if($bm_isInstanceOfArray(Tt)){var Ut,Ht=Tt.length,Kt=createTypedArray("float32",Ht);for(Ut=0;Ut<Ht;Ut+=1)Kt[Ut]=(Dt[Ut]-Tt[Ut])*Ft+Tt[Ut];return Kt}return(Dt-Tt)*Ft+Tt}function nearestKey(et){var dt,$t=data.k.length,kt,Tt;if(!data.k.length||typeof data.k[0]=="number")kt=0,Tt=0;else if(kt=-1,et*=elem.comp.globalData.frameRate,et<data.k[0].t)kt=1,Tt=data.k[0].t;else{for(dt=0;dt<$t-1;dt+=1)if(et===data.k[dt].t){kt=dt+1,Tt=data.k[dt].t;break}else if(et>data.k[dt].t&&et<data.k[dt+1].t){et-data.k[dt].t>data.k[dt+1].t-et?(kt=dt+2,Tt=data.k[dt+1].t):(kt=dt+1,Tt=data.k[dt].t);break}kt===-1&&(kt=dt+1,Tt=data.k[dt].t)}var Dt={};return Dt.index=kt,Dt.time=Tt/elem.comp.globalData.frameRate,Dt}function key(et){var dt,$t,kt;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+et);et-=1,dt={time:data.k[et].t/elem.comp.globalData.frameRate,value:[]};var Tt=Object.prototype.hasOwnProperty.call(data.k[et],"s")?data.k[et].s:data.k[et-1].e;for(kt=Tt.length,$t=0;$t<kt;$t+=1)dt[$t]=Tt[$t],dt.value[$t]=Tt[$t];return dt}function framesToTime(et,dt){return dt||(dt=elem.comp.globalData.frameRate),et/dt}function timeToFrames(et,dt){return!et&&et!==0&&(et=time),dt||(dt=elem.comp.globalData.frameRate),et*dt}function seedRandom(et){BMMath.seedrandom(randSeed+et)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(et,dt){return typeof value=="string"?dt===void 0?value.substring(et):value.substring(et,dt):""}function substr(et,dt){return typeof value=="string"?dt===void 0?value.substr(et):value.substr(et,dt):""}function posterizeTime(et){time=et===0?0:Math.floor(time*et)/et,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(et){return value=et,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var et={};et.initExpressions=dt,et.resetFrame=ExpressionManager.resetFrame;function dt($t){var kt=0,Tt=[];function Dt(){kt+=1}function Ft(){kt-=1,kt===0&&Ht()}function Ut(Kt){Tt.indexOf(Kt)===-1&&Tt.push(Kt)}function Ht(){var Kt,Yt=Tt.length;for(Kt=0;Kt<Yt;Kt+=1)Tt[Kt].release();Tt.length=0}$t.renderer.compInterface=CompExpressionInterface($t.renderer),$t.renderer.globalData.projectInterface.registerComposition($t.renderer),$t.renderer.globalData.pushExpression=Dt,$t.renderer.globalData.popExpression=Ft,$t.renderer.globalData.registerExpressionProperty=Ut}return et}(),MaskManagerInterface=function(){function et($t,kt){this._mask=$t,this._data=kt}Object.defineProperty(et.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(et.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var dt=function(kt){var Tt=createSizedArray(kt.viewData.length),Dt,Ft=kt.viewData.length;for(Dt=0;Dt<Ft;Dt+=1)Tt[Dt]=new et(kt.viewData[Dt],kt.masksProperties[Dt]);var Ut=function(Kt){for(Dt=0;Dt<Ft;){if(kt.masksProperties[Dt].nm===Kt)return Tt[Dt];Dt+=1}return null};return Ut};return dt}(),ExpressionPropertyInterface=function(){var et={pv:0,v:0,mult:1},dt={pv:[0,0,0],v:[0,0,0],mult:1};function $t(Ft,Ut,Ht){Object.defineProperty(Ft,"velocity",{get:function(){return Ut.getVelocityAtTime(Ut.comp.currentFrame)}}),Ft.numKeys=Ut.keyframes?Ut.keyframes.length:0,Ft.key=function(Kt){if(!Ft.numKeys)return 0;var Yt="";"s"in Ut.keyframes[Kt-1]?Yt=Ut.keyframes[Kt-1].s:"e"in Ut.keyframes[Kt-2]?Yt=Ut.keyframes[Kt-2].e:Yt=Ut.keyframes[Kt-2].s;var Jt=Ht==="unidimensional"?new Number(Yt):Object.assign({},Yt);return Jt.time=Ut.keyframes[Kt-1].t/Ut.elem.comp.globalData.frameRate,Jt.value=Ht==="unidimensional"?Yt[0]:Yt,Jt},Ft.valueAtTime=Ut.getValueAtTime,Ft.speedAtTime=Ut.getSpeedAtTime,Ft.velocityAtTime=Ut.getVelocityAtTime,Ft.propertyGroup=Ut.propertyGroup}function kt(Ft){(!Ft||!("pv"in Ft))&&(Ft=et);var Ut=1/Ft.mult,Ht=Ft.pv*Ut,Kt=new Number(Ht);return Kt.value=Ht,$t(Kt,Ft,"unidimensional"),function(){return Ft.k&&Ft.getValue(),Ht=Ft.v*Ut,Kt.value!==Ht&&(Kt=new Number(Ht),Kt.value=Ht,$t(Kt,Ft,"unidimensional")),Kt}}function Tt(Ft){(!Ft||!("pv"in Ft))&&(Ft=dt);var Ut=1/Ft.mult,Ht=Ft.data&&Ft.data.l||Ft.pv.length,Kt=createTypedArray("float32",Ht),Yt=createTypedArray("float32",Ht);return Kt.value=Yt,$t(Kt,Ft,"multidimensional"),function(){Ft.k&&Ft.getValue();for(var Jt=0;Jt<Ht;Jt+=1)Yt[Jt]=Ft.v[Jt]*Ut,Kt[Jt]=Yt[Jt];return Kt}}function Dt(){return et}return function(Ft){return Ft?Ft.propType==="unidimensional"?kt(Ft):Tt(Ft):Dt}}(),TransformExpressionInterface=function(){return function(et){function dt(Ft){switch(Ft){case"scale":case"Scale":case"ADBE Scale":case 6:return dt.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return dt.rotation;case"ADBE Rotate X":return dt.xRotation;case"ADBE Rotate Y":return dt.yRotation;case"position":case"Position":case"ADBE Position":case 2:return dt.position;case"ADBE Position_0":return dt.xPosition;case"ADBE Position_1":return dt.yPosition;case"ADBE Position_2":return dt.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return dt.anchorPoint;case"opacity":case"Opacity":case 11:return dt.opacity;default:return null}}Object.defineProperty(dt,"rotation",{get:ExpressionPropertyInterface(et.r||et.rz)}),Object.defineProperty(dt,"zRotation",{get:ExpressionPropertyInterface(et.rz||et.r)}),Object.defineProperty(dt,"xRotation",{get:ExpressionPropertyInterface(et.rx)}),Object.defineProperty(dt,"yRotation",{get:ExpressionPropertyInterface(et.ry)}),Object.defineProperty(dt,"scale",{get:ExpressionPropertyInterface(et.s)});var $t,kt,Tt,Dt;return et.p?Dt=ExpressionPropertyInterface(et.p):($t=ExpressionPropertyInterface(et.px),kt=ExpressionPropertyInterface(et.py),et.pz&&(Tt=ExpressionPropertyInterface(et.pz))),Object.defineProperty(dt,"position",{get:function(){return et.p?Dt():[$t(),kt(),Tt?Tt():0]}}),Object.defineProperty(dt,"xPosition",{get:ExpressionPropertyInterface(et.px)}),Object.defineProperty(dt,"yPosition",{get:ExpressionPropertyInterface(et.py)}),Object.defineProperty(dt,"zPosition",{get:ExpressionPropertyInterface(et.pz)}),Object.defineProperty(dt,"anchorPoint",{get:ExpressionPropertyInterface(et.a)}),Object.defineProperty(dt,"opacity",{get:ExpressionPropertyInterface(et.o)}),Object.defineProperty(dt,"skew",{get:ExpressionPropertyInterface(et.sk)}),Object.defineProperty(dt,"skewAxis",{get:ExpressionPropertyInterface(et.sa)}),Object.defineProperty(dt,"orientation",{get:ExpressionPropertyInterface(et.or)}),dt}}(),LayerExpressionInterface=function(){function et(Kt){var Yt=new Matrix;if(Kt!==void 0){var Jt=this._elem.finalTransform.mProp.getValueAtTime(Kt);Jt.clone(Yt)}else{var Zt=this._elem.finalTransform.mProp;Zt.applyToMatrix(Yt)}return Yt}function dt(Kt,Yt){var Jt=this.getMatrix(Yt);return Jt.props[12]=0,Jt.props[13]=0,Jt.props[14]=0,this.applyPoint(Jt,Kt)}function $t(Kt,Yt){var Jt=this.getMatrix(Yt);return this.applyPoint(Jt,Kt)}function kt(Kt,Yt){var Jt=this.getMatrix(Yt);return Jt.props[12]=0,Jt.props[13]=0,Jt.props[14]=0,this.invertPoint(Jt,Kt)}function Tt(Kt,Yt){var Jt=this.getMatrix(Yt);return this.invertPoint(Jt,Kt)}function Dt(Kt,Yt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Jt,Zt=this._elem.hierarchy.length;for(Jt=0;Jt<Zt;Jt+=1)this._elem.hierarchy[Jt].finalTransform.mProp.applyToMatrix(Kt)}return Kt.applyToPointArray(Yt[0],Yt[1],Yt[2]||0)}function Ft(Kt,Yt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Jt,Zt=this._elem.hierarchy.length;for(Jt=0;Jt<Zt;Jt+=1)this._elem.hierarchy[Jt].finalTransform.mProp.applyToMatrix(Kt)}return Kt.inversePoint(Yt)}function Ut(Kt){var Yt=new Matrix;if(Yt.reset(),this._elem.finalTransform.mProp.applyToMatrix(Yt),this._elem.hierarchy&&this._elem.hierarchy.length){var Jt,Zt=this._elem.hierarchy.length;for(Jt=0;Jt<Zt;Jt+=1)this._elem.hierarchy[Jt].finalTransform.mProp.applyToMatrix(Yt);return Yt.inversePoint(Kt)}return Yt.inversePoint(Kt)}function Ht(){return[1,1,1,1]}return function(Kt){var Yt;function Jt(sr){er.mask=new MaskManagerInterface(sr,Kt)}function Zt(sr){er.effect=sr}function er(sr){switch(sr){case"ADBE Root Vectors Group":case"Contents":case 2:return er.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Yt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return er.effect;case"ADBE Text Properties":return er.textInterface;default:return null}}er.getMatrix=et,er.invertPoint=Ft,er.applyPoint=Dt,er.toWorld=$t,er.toWorldVec=dt,er.fromWorld=Tt,er.fromWorldVec=kt,er.toComp=$t,er.fromComp=Ut,er.sampleImage=Ht,er.sourceRectAtTime=Kt.sourceRectAtTime.bind(Kt),er._elem=Kt,Yt=TransformExpressionInterface(Kt.finalTransform.mProp);var rr=getDescriptor(Yt,"anchorPoint");return Object.defineProperties(er,{hasParent:{get:function(){return Kt.hierarchy.length}},parent:{get:function(){return Kt.hierarchy[0].layerInterface}},rotation:getDescriptor(Yt,"rotation"),scale:getDescriptor(Yt,"scale"),position:getDescriptor(Yt,"position"),opacity:getDescriptor(Yt,"opacity"),anchorPoint:rr,anchor_point:rr,transform:{get:function(){return Yt}},active:{get:function(){return Kt.isInRange}}}),er.startTime=Kt.data.st,er.index=Kt.data.ind,er.source=Kt.data.refId,er.height=Kt.data.ty===0?Kt.data.h:100,er.width=Kt.data.ty===0?Kt.data.w:100,er.inPoint=Kt.data.ip/Kt.comp.globalData.frameRate,er.outPoint=Kt.data.op/Kt.comp.globalData.frameRate,er._name=Kt.data.nm,er.registerMaskInterface=Jt,er.registerEffectsInterface=Zt,er}}(),propertyGroupFactory=function(){return function(et,dt){return function($t){return $t=$t===void 0?1:$t,$t<=0?et:dt($t-1)}}}(),PropertyInterface=function(){return function(et,dt){var $t={_name:et};function kt(Tt){return Tt=Tt===void 0?1:Tt,Tt<=0?$t:dt(Tt-1)}return kt}}(),EffectsExpressionInterface=function(){var et={createEffectsInterface:dt};function dt(Tt,Dt){if(Tt.effectsManager){var Ft=[],Ut=Tt.data.ef,Ht,Kt=Tt.effectsManager.effectElements.length;for(Ht=0;Ht<Kt;Ht+=1)Ft.push($t(Ut[Ht],Tt.effectsManager.effectElements[Ht],Dt,Tt));var Yt=Tt.data.ef||[],Jt=function(er){for(Ht=0,Kt=Yt.length;Ht<Kt;){if(er===Yt[Ht].nm||er===Yt[Ht].mn||er===Yt[Ht].ix)return Ft[Ht];Ht+=1}return null};return Object.defineProperty(Jt,"numProperties",{get:function(){return Yt.length}}),Jt}return null}function $t(Tt,Dt,Ft,Ut){function Ht(er){for(var rr=Tt.ef,sr=0,nr=rr.length;sr<nr;){if(er===rr[sr].nm||er===rr[sr].mn||er===rr[sr].ix)return rr[sr].ty===5?Yt[sr]:Yt[sr]();sr+=1}throw new Error}var Kt=propertyGroupFactory(Ht,Ft),Yt=[],Jt,Zt=Tt.ef.length;for(Jt=0;Jt<Zt;Jt+=1)Tt.ef[Jt].ty===5?Yt.push($t(Tt.ef[Jt],Dt.effectElements[Jt],Dt.effectElements[Jt].propertyGroup,Ut)):Yt.push(kt(Dt.effectElements[Jt],Tt.ef[Jt].ty,Ut,Kt));return Tt.mn==="ADBE Color Control"&&Object.defineProperty(Ht,"color",{get:function(){return Yt[0]()}}),Object.defineProperties(Ht,{numProperties:{get:function(){return Tt.np}},_name:{value:Tt.nm},propertyGroup:{value:Kt}}),Ht.enabled=Tt.en!==0,Ht.active=Ht.enabled,Ht}function kt(Tt,Dt,Ft,Ut){var Ht=ExpressionPropertyInterface(Tt.p);function Kt(){return Dt===10?Ft.comp.compInterface(Tt.p.v):Ht()}return Tt.p.setGroupProperty&&Tt.p.setGroupProperty(PropertyInterface("",Ut)),Kt}return et}(),ShapePathInterface=function(){return function(dt,$t,kt){var Tt=$t.sh;function Dt(Ut){return Ut==="Shape"||Ut==="shape"||Ut==="Path"||Ut==="path"||Ut==="ADBE Vector Shape"||Ut===2?Dt.path:null}var Ft=propertyGroupFactory(Dt,kt);return Tt.setGroupProperty(PropertyInterface("Path",Ft)),Object.defineProperties(Dt,{path:{get:function(){return Tt.k&&Tt.getValue(),Tt}},shape:{get:function(){return Tt.k&&Tt.getValue(),Tt}},_name:{value:dt.nm},ix:{value:dt.ix},propertyIndex:{value:dt.ix},mn:{value:dt.mn},propertyGroup:{value:kt}}),Dt}}(),ShapeExpressionInterface=function(){function et(rr,sr,nr){var ir=[],or,lr=rr?rr.length:0;for(or=0;or<lr;or+=1)rr[or].ty==="gr"?ir.push($t(rr[or],sr[or],nr)):rr[or].ty==="fl"?ir.push(kt(rr[or],sr[or],nr)):rr[or].ty==="st"?ir.push(Ft(rr[or],sr[or],nr)):rr[or].ty==="tm"?ir.push(Ut(rr[or],sr[or],nr)):rr[or].ty==="tr"||(rr[or].ty==="el"?ir.push(Kt(rr[or],sr[or],nr)):rr[or].ty==="sr"?ir.push(Yt(rr[or],sr[or],nr)):rr[or].ty==="sh"?ir.push(ShapePathInterface(rr[or],sr[or],nr)):rr[or].ty==="rc"?ir.push(Jt(rr[or],sr[or],nr)):rr[or].ty==="rd"?ir.push(Zt(rr[or],sr[or],nr)):rr[or].ty==="rp"?ir.push(er(rr[or],sr[or],nr)):rr[or].ty==="gf"?ir.push(Tt(rr[or],sr[or],nr)):ir.push(Dt(rr[or],sr[or])));return ir}function dt(rr,sr,nr){var ir,or=function(dr){for(var ur=0,pr=ir.length;ur<pr;){if(ir[ur]._name===dr||ir[ur].mn===dr||ir[ur].propertyIndex===dr||ir[ur].ix===dr||ir[ur].ind===dr)return ir[ur];ur+=1}return typeof dr=="number"?ir[dr-1]:null};or.propertyGroup=propertyGroupFactory(or,nr),ir=et(rr.it,sr.it,or.propertyGroup),or.numProperties=ir.length;var lr=Ht(rr.it[rr.it.length-1],sr.it[sr.it.length-1],or.propertyGroup);return or.transform=lr,or.propertyIndex=rr.cix,or._name=rr.nm,or}function $t(rr,sr,nr){var ir=function(dr){switch(dr){case"ADBE Vectors Group":case"Contents":case 2:return ir.content;default:return ir.transform}};ir.propertyGroup=propertyGroupFactory(ir,nr);var or=dt(rr,sr,ir.propertyGroup),lr=Ht(rr.it[rr.it.length-1],sr.it[sr.it.length-1],ir.propertyGroup);return ir.content=or,ir.transform=lr,Object.defineProperty(ir,"_name",{get:function(){return rr.nm}}),ir.numProperties=rr.np,ir.propertyIndex=rr.ix,ir.nm=rr.nm,ir.mn=rr.mn,ir}function kt(rr,sr,nr){function ir(or){return or==="Color"||or==="color"?ir.color:or==="Opacity"||or==="opacity"?ir.opacity:null}return Object.defineProperties(ir,{color:{get:ExpressionPropertyInterface(sr.c)},opacity:{get:ExpressionPropertyInterface(sr.o)},_name:{value:rr.nm},mn:{value:rr.mn}}),sr.c.setGroupProperty(PropertyInterface("Color",nr)),sr.o.setGroupProperty(PropertyInterface("Opacity",nr)),ir}function Tt(rr,sr,nr){function ir(or){return or==="Start Point"||or==="start point"?ir.startPoint:or==="End Point"||or==="end point"?ir.endPoint:or==="Opacity"||or==="opacity"?ir.opacity:null}return Object.defineProperties(ir,{startPoint:{get:ExpressionPropertyInterface(sr.s)},endPoint:{get:ExpressionPropertyInterface(sr.e)},opacity:{get:ExpressionPropertyInterface(sr.o)},type:{get:function(){return"a"}},_name:{value:rr.nm},mn:{value:rr.mn}}),sr.s.setGroupProperty(PropertyInterface("Start Point",nr)),sr.e.setGroupProperty(PropertyInterface("End Point",nr)),sr.o.setGroupProperty(PropertyInterface("Opacity",nr)),ir}function Dt(){function rr(){return null}return rr}function Ft(rr,sr,nr){var ir=propertyGroupFactory(pr,nr),or=propertyGroupFactory(ur,ir);function lr(mr){Object.defineProperty(ur,rr.d[mr].nm,{get:ExpressionPropertyInterface(sr.d.dataProps[mr].p)})}var cr,dr=rr.d?rr.d.length:0,ur={};for(cr=0;cr<dr;cr+=1)lr(cr),sr.d.dataProps[cr].p.setGroupProperty(or);function pr(mr){return mr==="Color"||mr==="color"?pr.color:mr==="Opacity"||mr==="opacity"?pr.opacity:mr==="Stroke Width"||mr==="stroke width"?pr.strokeWidth:null}return Object.defineProperties(pr,{color:{get:ExpressionPropertyInterface(sr.c)},opacity:{get:ExpressionPropertyInterface(sr.o)},strokeWidth:{get:ExpressionPropertyInterface(sr.w)},dash:{get:function(){return ur}},_name:{value:rr.nm},mn:{value:rr.mn}}),sr.c.setGroupProperty(PropertyInterface("Color",ir)),sr.o.setGroupProperty(PropertyInterface("Opacity",ir)),sr.w.setGroupProperty(PropertyInterface("Stroke Width",ir)),pr}function Ut(rr,sr,nr){function ir(lr){return lr===rr.e.ix||lr==="End"||lr==="end"?ir.end:lr===rr.s.ix?ir.start:lr===rr.o.ix?ir.offset:null}var or=propertyGroupFactory(ir,nr);return ir.propertyIndex=rr.ix,sr.s.setGroupProperty(PropertyInterface("Start",or)),sr.e.setGroupProperty(PropertyInterface("End",or)),sr.o.setGroupProperty(PropertyInterface("Offset",or)),ir.propertyIndex=rr.ix,ir.propertyGroup=nr,Object.defineProperties(ir,{start:{get:ExpressionPropertyInterface(sr.s)},end:{get:ExpressionPropertyInterface(sr.e)},offset:{get:ExpressionPropertyInterface(sr.o)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function Ht(rr,sr,nr){function ir(lr){return rr.a.ix===lr||lr==="Anchor Point"?ir.anchorPoint:rr.o.ix===lr||lr==="Opacity"?ir.opacity:rr.p.ix===lr||lr==="Position"?ir.position:rr.r.ix===lr||lr==="Rotation"||lr==="ADBE Vector Rotation"?ir.rotation:rr.s.ix===lr||lr==="Scale"?ir.scale:rr.sk&&rr.sk.ix===lr||lr==="Skew"?ir.skew:rr.sa&&rr.sa.ix===lr||lr==="Skew Axis"?ir.skewAxis:null}var or=propertyGroupFactory(ir,nr);return sr.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",or)),sr.transform.mProps.p.setGroupProperty(PropertyInterface("Position",or)),sr.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",or)),sr.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",or)),sr.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",or)),sr.transform.mProps.sk&&(sr.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",or)),sr.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",or))),sr.transform.op.setGroupProperty(PropertyInterface("Opacity",or)),Object.defineProperties(ir,{opacity:{get:ExpressionPropertyInterface(sr.transform.mProps.o)},position:{get:ExpressionPropertyInterface(sr.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(sr.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(sr.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(sr.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(sr.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(sr.transform.mProps.sa)},_name:{value:rr.nm}}),ir.ty="tr",ir.mn=rr.mn,ir.propertyGroup=nr,ir}function Kt(rr,sr,nr){function ir(cr){return rr.p.ix===cr?ir.position:rr.s.ix===cr?ir.size:null}var or=propertyGroupFactory(ir,nr);ir.propertyIndex=rr.ix;var lr=sr.sh.ty==="tm"?sr.sh.prop:sr.sh;return lr.s.setGroupProperty(PropertyInterface("Size",or)),lr.p.setGroupProperty(PropertyInterface("Position",or)),Object.defineProperties(ir,{size:{get:ExpressionPropertyInterface(lr.s)},position:{get:ExpressionPropertyInterface(lr.p)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function Yt(rr,sr,nr){function ir(cr){return rr.p.ix===cr?ir.position:rr.r.ix===cr?ir.rotation:rr.pt.ix===cr?ir.points:rr.or.ix===cr||cr==="ADBE Vector Star Outer Radius"?ir.outerRadius:rr.os.ix===cr?ir.outerRoundness:rr.ir&&(rr.ir.ix===cr||cr==="ADBE Vector Star Inner Radius")?ir.innerRadius:rr.is&&rr.is.ix===cr?ir.innerRoundness:null}var or=propertyGroupFactory(ir,nr),lr=sr.sh.ty==="tm"?sr.sh.prop:sr.sh;return ir.propertyIndex=rr.ix,lr.or.setGroupProperty(PropertyInterface("Outer Radius",or)),lr.os.setGroupProperty(PropertyInterface("Outer Roundness",or)),lr.pt.setGroupProperty(PropertyInterface("Points",or)),lr.p.setGroupProperty(PropertyInterface("Position",or)),lr.r.setGroupProperty(PropertyInterface("Rotation",or)),rr.ir&&(lr.ir.setGroupProperty(PropertyInterface("Inner Radius",or)),lr.is.setGroupProperty(PropertyInterface("Inner Roundness",or))),Object.defineProperties(ir,{position:{get:ExpressionPropertyInterface(lr.p)},rotation:{get:ExpressionPropertyInterface(lr.r)},points:{get:ExpressionPropertyInterface(lr.pt)},outerRadius:{get:ExpressionPropertyInterface(lr.or)},outerRoundness:{get:ExpressionPropertyInterface(lr.os)},innerRadius:{get:ExpressionPropertyInterface(lr.ir)},innerRoundness:{get:ExpressionPropertyInterface(lr.is)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function Jt(rr,sr,nr){function ir(cr){return rr.p.ix===cr?ir.position:rr.r.ix===cr?ir.roundness:rr.s.ix===cr||cr==="Size"||cr==="ADBE Vector Rect Size"?ir.size:null}var or=propertyGroupFactory(ir,nr),lr=sr.sh.ty==="tm"?sr.sh.prop:sr.sh;return ir.propertyIndex=rr.ix,lr.p.setGroupProperty(PropertyInterface("Position",or)),lr.s.setGroupProperty(PropertyInterface("Size",or)),lr.r.setGroupProperty(PropertyInterface("Rotation",or)),Object.defineProperties(ir,{position:{get:ExpressionPropertyInterface(lr.p)},roundness:{get:ExpressionPropertyInterface(lr.r)},size:{get:ExpressionPropertyInterface(lr.s)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function Zt(rr,sr,nr){function ir(cr){return rr.r.ix===cr||cr==="Round Corners 1"?ir.radius:null}var or=propertyGroupFactory(ir,nr),lr=sr;return ir.propertyIndex=rr.ix,lr.rd.setGroupProperty(PropertyInterface("Radius",or)),Object.defineProperties(ir,{radius:{get:ExpressionPropertyInterface(lr.rd)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}function er(rr,sr,nr){function ir(cr){return rr.c.ix===cr||cr==="Copies"?ir.copies:rr.o.ix===cr||cr==="Offset"?ir.offset:null}var or=propertyGroupFactory(ir,nr),lr=sr;return ir.propertyIndex=rr.ix,lr.c.setGroupProperty(PropertyInterface("Copies",or)),lr.o.setGroupProperty(PropertyInterface("Offset",or)),Object.defineProperties(ir,{copies:{get:ExpressionPropertyInterface(lr.c)},offset:{get:ExpressionPropertyInterface(lr.o)},_name:{value:rr.nm}}),ir.mn=rr.mn,ir}return function(rr,sr,nr){var ir;function or(cr){if(typeof cr=="number")return cr=cr===void 0?1:cr,cr===0?nr:ir[cr-1];for(var dr=0,ur=ir.length;dr<ur;){if(ir[dr]._name===cr)return ir[dr];dr+=1}return null}function lr(){return nr}return or.propertyGroup=propertyGroupFactory(or,lr),ir=et(rr,sr,or.propertyGroup),or.numProperties=ir.length,or._name="Contents",or}}(),TextExpressionInterface=function(){return function(et){var dt;function $t(kt){switch(kt){case"ADBE Text Document":return $t.sourceText;default:return null}}return Object.defineProperty($t,"sourceText",{get:function(){et.textProperty.getValue();var Tt=et.textProperty.currentData.t;return(!dt||Tt!==dt.value)&&(dt=new String(Tt),dt.value=Tt||new String(Tt),Object.defineProperty(dt,"style",{get:function(){return{fillColor:et.textProperty.currentData.fc}}})),dt}}),$t}}();function _typeof(et){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function($t){return typeof $t}:_typeof=function($t){return $t&&typeof Symbol=="function"&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},_typeof(et)}var FootageInterface=function(){var et=function(kt){var Tt="",Dt=kt.getFootageData();function Ft(){return Tt="",Dt=kt.getFootageData(),Ut}function Ut(Ht){if(Dt[Ht])return Tt=Ht,Dt=Dt[Ht],_typeof(Dt)==="object"?Ut:Dt;var Kt=Ht.indexOf(Tt);if(Kt!==-1){var Yt=parseInt(Ht.substr(Kt+Tt.length),10);return Dt=Dt[Yt],_typeof(Dt)==="object"?Ut:Dt}return""}return Ft},dt=function(kt){function Tt(Dt){return Dt==="Outline"?Tt.outlineInterface():null}return Tt._name="Outline",Tt.outlineInterface=et(kt),Tt};return function($t){function kt(Tt){return Tt==="Data"?kt.dataInterface:null}return kt._name="Data",kt.dataInterface=dt($t),kt}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(et){return interfaces[et]||null}var expressionHelpers=function(){function et(Ft,Ut,Ht){Ut.x&&(Ht.k=!0,Ht.x=!0,Ht.initiateExpression=ExpressionManager.initiateExpression,Ht.effectsSequence.push(Ht.initiateExpression(Ft,Ut,Ht).bind(Ht)))}function dt(Ft){return Ft*=this.elem.globalData.frameRate,Ft-=this.offsetTime,Ft!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<Ft?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(Ft,this._cachingAtTime),this._cachingAtTime.lastFrame=Ft),this._cachingAtTime.value}function $t(Ft){var Ut=-.01,Ht=this.getValueAtTime(Ft),Kt=this.getValueAtTime(Ft+Ut),Yt=0;if(Ht.length){var Jt;for(Jt=0;Jt<Ht.length;Jt+=1)Yt+=Math.pow(Kt[Jt]-Ht[Jt],2);Yt=Math.sqrt(Yt)*100}else Yt=0;return Yt}function kt(Ft){if(this.vel!==void 0)return this.vel;var Ut=-.001,Ht=this.getValueAtTime(Ft),Kt=this.getValueAtTime(Ft+Ut),Yt;if(Ht.length){Yt=createTypedArray("float32",Ht.length);var Jt;for(Jt=0;Jt<Ht.length;Jt+=1)Yt[Jt]=(Kt[Jt]-Ht[Jt])/Ut}else Yt=(Kt-Ht)/Ut;return Yt}function Tt(){return this.pv}function Dt(Ft){this.propertyGroup=Ft}return{searchExpressions:et,getSpeedAtTime:$t,getVelocityAtTime:kt,getValueAtTime:dt,getStaticValueAtTime:Tt,setGroupProperty:Dt}}();function addPropertyDecorator(){function et(Zt,er,rr){if(!this.k||!this.keyframes)return this.pv;Zt=Zt?Zt.toLowerCase():"";var sr=this.comp.renderedFrame,nr=this.keyframes,ir=nr[nr.length-1].t;if(sr<=ir)return this.pv;var or,lr;rr?(er?or=Math.abs(ir-this.elem.comp.globalData.frameRate*er):or=Math.max(0,ir-this.elem.data.ip),lr=ir-or):((!er||er>nr.length-1)&&(er=nr.length-1),lr=nr[nr.length-1-er].t,or=ir-lr);var cr,dr,ur;if(Zt==="pingpong"){var pr=Math.floor((sr-lr)/or);if(pr%2!==0)return this.getValueAtTime((or-(sr-lr)%or+lr)/this.comp.globalData.frameRate,0)}else if(Zt==="offset"){var mr=this.getValueAtTime(lr/this.comp.globalData.frameRate,0),jr=this.getValueAtTime(ir/this.comp.globalData.frameRate,0),Rr=this.getValueAtTime(((sr-lr)%or+lr)/this.comp.globalData.frameRate,0),xr=Math.floor((sr-lr)/or);if(this.pv.length){for(ur=new Array(mr.length),dr=ur.length,cr=0;cr<dr;cr+=1)ur[cr]=(jr[cr]-mr[cr])*xr+Rr[cr];return ur}return(jr-mr)*xr+Rr}else if(Zt==="continue"){var kr=this.getValueAtTime(ir/this.comp.globalData.frameRate,0),Mr=this.getValueAtTime((ir-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ur=new Array(kr.length),dr=ur.length,cr=0;cr<dr;cr+=1)ur[cr]=kr[cr]+(kr[cr]-Mr[cr])*((sr-ir)/this.comp.globalData.frameRate)/5e-4;return ur}return kr+(kr-Mr)*((sr-ir)/.001)}return this.getValueAtTime(((sr-lr)%or+lr)/this.comp.globalData.frameRate,0)}function dt(Zt,er,rr){if(!this.k)return this.pv;Zt=Zt?Zt.toLowerCase():"";var sr=this.comp.renderedFrame,nr=this.keyframes,ir=nr[0].t;if(sr>=ir)return this.pv;var or,lr;rr?(er?or=Math.abs(this.elem.comp.globalData.frameRate*er):or=Math.max(0,this.elem.data.op-ir),lr=ir+or):((!er||er>nr.length-1)&&(er=nr.length-1),lr=nr[er].t,or=lr-ir);var cr,dr,ur;if(Zt==="pingpong"){var pr=Math.floor((ir-sr)/or);if(pr%2===0)return this.getValueAtTime(((ir-sr)%or+ir)/this.comp.globalData.frameRate,0)}else if(Zt==="offset"){var mr=this.getValueAtTime(ir/this.comp.globalData.frameRate,0),jr=this.getValueAtTime(lr/this.comp.globalData.frameRate,0),Rr=this.getValueAtTime((or-(ir-sr)%or+ir)/this.comp.globalData.frameRate,0),xr=Math.floor((ir-sr)/or)+1;if(this.pv.length){for(ur=new Array(mr.length),dr=ur.length,cr=0;cr<dr;cr+=1)ur[cr]=Rr[cr]-(jr[cr]-mr[cr])*xr;return ur}return Rr-(jr-mr)*xr}else if(Zt==="continue"){var kr=this.getValueAtTime(ir/this.comp.globalData.frameRate,0),Mr=this.getValueAtTime((ir+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ur=new Array(kr.length),dr=ur.length,cr=0;cr<dr;cr+=1)ur[cr]=kr[cr]+(kr[cr]-Mr[cr])*(ir-sr)/.001;return ur}return kr+(kr-Mr)*(ir-sr)/.001}return this.getValueAtTime((or-((ir-sr)%or+ir))/this.comp.globalData.frameRate,0)}function $t(Zt,er){if(!this.k)return this.pv;if(Zt=(Zt||.4)*.5,er=Math.floor(er||5),er<=1)return this.pv;var rr=this.comp.renderedFrame/this.comp.globalData.frameRate,sr=rr-Zt,nr=rr+Zt,ir=er>1?(nr-sr)/(er-1):1,or=0,lr=0,cr;this.pv.length?cr=createTypedArray("float32",this.pv.length):cr=0;for(var dr;or<er;){if(dr=this.getValueAtTime(sr+or*ir),this.pv.length)for(lr=0;lr<this.pv.length;lr+=1)cr[lr]+=dr[lr];else cr+=dr;or+=1}if(this.pv.length)for(lr=0;lr<this.pv.length;lr+=1)cr[lr]/=er;else cr/=er;return cr}function kt(Zt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var er=this._transformCachingAtTime.v;if(er.cloneFromProps(this.pre.props),this.appliedTransformations<1){var rr=this.a.getValueAtTime(Zt);er.translate(-rr[0]*this.a.mult,-rr[1]*this.a.mult,rr[2]*this.a.mult)}if(this.appliedTransformations<2){var sr=this.s.getValueAtTime(Zt);er.scale(sr[0]*this.s.mult,sr[1]*this.s.mult,sr[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var nr=this.sk.getValueAtTime(Zt),ir=this.sa.getValueAtTime(Zt);er.skewFromAxis(-nr*this.sk.mult,ir*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var or=this.r.getValueAtTime(Zt);er.rotate(-or*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var lr=this.rz.getValueAtTime(Zt),cr=this.ry.getValueAtTime(Zt),dr=this.rx.getValueAtTime(Zt),ur=this.or.getValueAtTime(Zt);er.rotateZ(-lr*this.rz.mult).rotateY(cr*this.ry.mult).rotateX(dr*this.rx.mult).rotateZ(-ur[2]*this.or.mult).rotateY(ur[1]*this.or.mult).rotateX(ur[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var pr=this.px.getValueAtTime(Zt),mr=this.py.getValueAtTime(Zt);if(this.data.p.z){var jr=this.pz.getValueAtTime(Zt);er.translate(pr*this.px.mult,mr*this.py.mult,-jr*this.pz.mult)}else er.translate(pr*this.px.mult,mr*this.py.mult,0)}else{var Rr=this.p.getValueAtTime(Zt);er.translate(Rr[0]*this.p.mult,Rr[1]*this.p.mult,-Rr[2]*this.p.mult)}return er}function Tt(){return this.v.clone(new Matrix)}var Dt=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(Zt,er,rr){var sr=Dt(Zt,er,rr);return sr.dynamicProperties.length?sr.getValueAtTime=kt.bind(sr):sr.getValueAtTime=Tt.bind(sr),sr.setGroupProperty=expressionHelpers.setGroupProperty,sr};var Ft=PropertyFactory.getProp;PropertyFactory.getProp=function(Zt,er,rr,sr,nr){var ir=Ft(Zt,er,rr,sr,nr);ir.kf?ir.getValueAtTime=expressionHelpers.getValueAtTime.bind(ir):ir.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(ir),ir.setGroupProperty=expressionHelpers.setGroupProperty,ir.loopOut=et,ir.loopIn=dt,ir.smooth=$t,ir.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(ir),ir.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(ir),ir.numKeys=er.a===1?er.k.length:0,ir.propertyIndex=er.ix;var or=0;return rr!==0&&(or=createTypedArray("float32",er.a===1?er.k[0].s.length:er.k.length)),ir._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:or},expressionHelpers.searchExpressions(Zt,er,ir),ir.k&&nr.addDynamicProperty(ir),ir};function Ut(Zt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),Zt*=this.elem.globalData.frameRate,Zt-=this.offsetTime,Zt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<Zt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=Zt,this.interpolateShape(Zt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var Ht=ShapePropertyFactory.getConstructorFunction(),Kt=ShapePropertyFactory.getKeyframedConstructorFunction();function Yt(){}Yt.prototype={vertices:function(er,rr){this.k&&this.getValue();var sr=this.v;rr!==void 0&&(sr=this.getValueAtTime(rr,0));var nr,ir=sr._length,or=sr[er],lr=sr.v,cr=createSizedArray(ir);for(nr=0;nr<ir;nr+=1)er==="i"||er==="o"?cr[nr]=[or[nr][0]-lr[nr][0],or[nr][1]-lr[nr][1]]:cr[nr]=[or[nr][0],or[nr][1]];return cr},points:function(er){return this.vertices("v",er)},inTangents:function(er){return this.vertices("i",er)},outTangents:function(er){return this.vertices("o",er)},isClosed:function(){return this.v.c},pointOnPath:function(er,rr){var sr=this.v;rr!==void 0&&(sr=this.getValueAtTime(rr,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(sr));for(var nr=this._segmentsLength,ir=nr.lengths,or=nr.totalLength*er,lr=0,cr=ir.length,dr=0,ur;lr<cr;){if(dr+ir[lr].addedLength>or){var pr=lr,mr=sr.c&&lr===cr-1?0:lr+1,jr=(or-dr)/ir[lr].addedLength;ur=bez.getPointInSegment(sr.v[pr],sr.v[mr],sr.o[pr],sr.i[mr],jr,ir[lr]);break}else dr+=ir[lr].addedLength;lr+=1}return ur||(ur=sr.c?[sr.v[0][0],sr.v[0][1]]:[sr.v[sr._length-1][0],sr.v[sr._length-1][1]]),ur},vectorOnPath:function(er,rr,sr){er==1?er=this.v.c:er==0&&(er=.999);var nr=this.pointOnPath(er,rr),ir=this.pointOnPath(er+.001,rr),or=ir[0]-nr[0],lr=ir[1]-nr[1],cr=Math.sqrt(Math.pow(or,2)+Math.pow(lr,2));if(cr===0)return[0,0];var dr=sr==="tangent"?[or/cr,lr/cr]:[-lr/cr,or/cr];return dr},tangentOnPath:function(er,rr){return this.vectorOnPath(er,rr,"tangent")},normalOnPath:function(er,rr){return this.vectorOnPath(er,rr,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Yt],Ht),extendPrototype([Yt],Kt),Kt.prototype.getValueAtTime=Ut,Kt.prototype.initiateExpression=ExpressionManager.initiateExpression;var Jt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(Zt,er,rr,sr,nr){var ir=Jt(Zt,er,rr,sr,nr);return ir.propertyIndex=er.ix,ir.lock=!1,rr===3?expressionHelpers.searchExpressions(Zt,er.pt,ir):rr===4&&expressionHelpers.searchExpressions(Zt,er.ks,ir),ir.k&&Zt.addDynamicProperty(ir),ir}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function et(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(dt,$t){var kt=this.calculateExpression($t);if(dt.t!==kt){var Tt={};return this.copyData(Tt,dt),Tt.t=kt.toString(),Tt.__complete=!1,Tt}return dt},TextProperty.prototype.searchProperty=function(){var dt=this.searchKeyframes(),$t=this.searchExpressions();return this.kf=dt||$t,this.kf},TextProperty.prototype.searchExpressions=et}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function et(dt,$t){var kt=createNS("feMerge");kt.setAttribute("result",dt);var Tt,Dt;for(Dt=0;Dt<$t.length;Dt+=1)Tt=createNS("feMergeNode"),Tt.setAttribute("in",$t[Dt]),kt.appendChild(Tt),kt.appendChild(Tt);return kt}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(et,dt,$t,kt,Tt){this.filterManager=dt;var Dt=createNS("feColorMatrix");Dt.setAttribute("type","matrix"),Dt.setAttribute("color-interpolation-filters","linearRGB"),Dt.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=Dt,Dt.setAttribute("result",kt+"_tint_1"),et.appendChild(Dt),Dt=createNS("feColorMatrix"),Dt.setAttribute("type","matrix"),Dt.setAttribute("color-interpolation-filters","sRGB"),Dt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),Dt.setAttribute("result",kt+"_tint_2"),et.appendChild(Dt),this.matrixFilter=Dt;var Ft=this.createMergeNode(kt,[Tt,kt+"_tint_1",kt+"_tint_2"]);et.appendChild(Ft)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt=this.filterManager.effectElements[0].p.v,$t=this.filterManager.effectElements[1].p.v,kt=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+kt+" 0"),this.matrixFilter.setAttribute("values",$t[0]-dt[0]+" 0 0 0 "+dt[0]+" "+($t[1]-dt[1])+" 0 0 0 "+dt[1]+" "+($t[2]-dt[2])+" 0 0 0 "+dt[2]+" 0 0 0 1 0")}};function SVGFillFilter(et,dt,$t,kt){this.filterManager=dt;var Tt=createNS("feColorMatrix");Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),Tt.setAttribute("result",kt),et.appendChild(Tt),this.matrixFilter=Tt}SVGFillFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt=this.filterManager.effectElements[2].p.v,$t=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+dt[0]+" 0 0 0 0 "+dt[1]+" 0 0 0 0 "+dt[2]+" 0 0 0 "+$t+" 0")}};function SVGStrokeEffect(et,dt,$t){this.initialized=!1,this.filterManager=dt,this.elem=$t,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var et=this.elem.layerElement.children||this.elem.layerElement.childNodes,dt,$t,kt,Tt;for(this.filterManager.effectElements[1].p.v===1?(Tt=this.elem.maskManager.masksProperties.length,kt=0):(kt=this.filterManager.effectElements[0].p.v-1,Tt=kt+1),$t=createNS("g"),$t.setAttribute("fill","none"),$t.setAttribute("stroke-linecap","round"),$t.setAttribute("stroke-dashoffset",1),kt;kt<Tt;kt+=1)dt=createNS("path"),$t.appendChild(dt),this.paths.push({p:dt,m:kt});if(this.filterManager.effectElements[10].p.v===3){var Dt=createNS("mask"),Ft=createElementID();Dt.setAttribute("id",Ft),Dt.setAttribute("mask-type","alpha"),Dt.appendChild($t),this.elem.globalData.defs.appendChild(Dt);var Ut=createNS("g");for(Ut.setAttribute("mask","url("+getLocationHref()+"#"+Ft+")");et[0];)Ut.appendChild(et[0]);this.elem.layerElement.appendChild(Ut),this.masker=Dt,$t.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(et=this.elem.layerElement.children||this.elem.layerElement.childNodes;et.length;)this.elem.layerElement.removeChild(et[0]);this.elem.layerElement.appendChild($t),this.elem.layerElement.removeAttribute("mask"),$t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=$t},SVGStrokeEffect.prototype.renderFrame=function(et){this.initialized||this.initialize();var dt,$t=this.paths.length,kt,Tt;for(dt=0;dt<$t;dt+=1)if(this.paths[dt].m!==-1&&(kt=this.elem.maskManager.viewData[this.paths[dt].m],Tt=this.paths[dt].p,(et||this.filterManager._mdf||kt.prop._mdf)&&Tt.setAttribute("d",kt.lastPath),et||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||kt.prop._mdf)){var Dt;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var Ft=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,Ut=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,Ht=Tt.getTotalLength();Dt="0 0 0 "+Ht*Ft+" ";var Kt=Ht*(Ut-Ft),Yt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Jt=Math.floor(Kt/Yt),Zt;for(Zt=0;Zt<Jt;Zt+=1)Dt+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";Dt+="0 "+Ht*10+" 0 0"}else Dt="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;Tt.setAttribute("stroke-dasharray",Dt)}if((et||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(et||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(et||this.filterManager.effectElements[3].p._mdf)){var er=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(er[0]*255)+","+bmFloor(er[1]*255)+","+bmFloor(er[2]*255)+")")}};function SVGTritoneFilter(et,dt,$t,kt){this.filterManager=dt;var Tt=createNS("feColorMatrix");Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","linearRGB"),Tt.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),et.appendChild(Tt);var Dt=createNS("feComponentTransfer");Dt.setAttribute("color-interpolation-filters","sRGB"),Dt.setAttribute("result",kt),this.matrixFilter=Dt;var Ft=createNS("feFuncR");Ft.setAttribute("type","table"),Dt.appendChild(Ft),this.feFuncR=Ft;var Ut=createNS("feFuncG");Ut.setAttribute("type","table"),Dt.appendChild(Ut),this.feFuncG=Ut;var Ht=createNS("feFuncB");Ht.setAttribute("type","table"),Dt.appendChild(Ht),this.feFuncB=Ht,et.appendChild(Dt)}SVGTritoneFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt=this.filterManager.effectElements[0].p.v,$t=this.filterManager.effectElements[1].p.v,kt=this.filterManager.effectElements[2].p.v,Tt=kt[0]+" "+$t[0]+" "+dt[0],Dt=kt[1]+" "+$t[1]+" "+dt[1],Ft=kt[2]+" "+$t[2]+" "+dt[2];this.feFuncR.setAttribute("tableValues",Tt),this.feFuncG.setAttribute("tableValues",Dt),this.feFuncB.setAttribute("tableValues",Ft)}};function SVGProLevelsFilter(et,dt,$t,kt){this.filterManager=dt;var Tt=this.filterManager.effectElements,Dt=createNS("feComponentTransfer");(Tt[10].p.k||Tt[10].p.v!==0||Tt[11].p.k||Tt[11].p.v!==1||Tt[12].p.k||Tt[12].p.v!==1||Tt[13].p.k||Tt[13].p.v!==0||Tt[14].p.k||Tt[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",Dt)),(Tt[17].p.k||Tt[17].p.v!==0||Tt[18].p.k||Tt[18].p.v!==1||Tt[19].p.k||Tt[19].p.v!==1||Tt[20].p.k||Tt[20].p.v!==0||Tt[21].p.k||Tt[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",Dt)),(Tt[24].p.k||Tt[24].p.v!==0||Tt[25].p.k||Tt[25].p.v!==1||Tt[26].p.k||Tt[26].p.v!==1||Tt[27].p.k||Tt[27].p.v!==0||Tt[28].p.k||Tt[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",Dt)),(Tt[31].p.k||Tt[31].p.v!==0||Tt[32].p.k||Tt[32].p.v!==1||Tt[33].p.k||Tt[33].p.v!==1||Tt[34].p.k||Tt[34].p.v!==0||Tt[35].p.k||Tt[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",Dt)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(Dt.setAttribute("color-interpolation-filters","sRGB"),et.appendChild(Dt)),(Tt[3].p.k||Tt[3].p.v!==0||Tt[4].p.k||Tt[4].p.v!==1||Tt[5].p.k||Tt[5].p.v!==1||Tt[6].p.k||Tt[6].p.v!==0||Tt[7].p.k||Tt[7].p.v!==1)&&(Dt=createNS("feComponentTransfer"),Dt.setAttribute("color-interpolation-filters","sRGB"),Dt.setAttribute("result",kt),et.appendChild(Dt),this.feFuncRComposed=this.createFeFunc("feFuncR",Dt),this.feFuncGComposed=this.createFeFunc("feFuncG",Dt),this.feFuncBComposed=this.createFeFunc("feFuncB",Dt))}SVGProLevelsFilter.prototype.createFeFunc=function(et,dt){var $t=createNS(et);return $t.setAttribute("type","table"),dt.appendChild($t),$t},SVGProLevelsFilter.prototype.getTableValue=function(et,dt,$t,kt,Tt){for(var Dt=0,Ft=256,Ut,Ht=Math.min(et,dt),Kt=Math.max(et,dt),Yt=Array.call(null,{length:Ft}),Jt,Zt=0,er=Tt-kt,rr=dt-et;Dt<=256;)Ut=Dt/256,Ut<=Ht?Jt=rr<0?Tt:kt:Ut>=Kt?Jt=rr<0?kt:Tt:Jt=kt+er*Math.pow((Ut-et)/rr,1/$t),Yt[Zt]=Jt,Zt+=1,Dt+=256/(Ft-1);return Yt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt,$t=this.filterManager.effectElements;this.feFuncRComposed&&(et||$t[3].p._mdf||$t[4].p._mdf||$t[5].p._mdf||$t[6].p._mdf||$t[7].p._mdf)&&(dt=this.getTableValue($t[3].p.v,$t[4].p.v,$t[5].p.v,$t[6].p.v,$t[7].p.v),this.feFuncRComposed.setAttribute("tableValues",dt),this.feFuncGComposed.setAttribute("tableValues",dt),this.feFuncBComposed.setAttribute("tableValues",dt)),this.feFuncR&&(et||$t[10].p._mdf||$t[11].p._mdf||$t[12].p._mdf||$t[13].p._mdf||$t[14].p._mdf)&&(dt=this.getTableValue($t[10].p.v,$t[11].p.v,$t[12].p.v,$t[13].p.v,$t[14].p.v),this.feFuncR.setAttribute("tableValues",dt)),this.feFuncG&&(et||$t[17].p._mdf||$t[18].p._mdf||$t[19].p._mdf||$t[20].p._mdf||$t[21].p._mdf)&&(dt=this.getTableValue($t[17].p.v,$t[18].p.v,$t[19].p.v,$t[20].p.v,$t[21].p.v),this.feFuncG.setAttribute("tableValues",dt)),this.feFuncB&&(et||$t[24].p._mdf||$t[25].p._mdf||$t[26].p._mdf||$t[27].p._mdf||$t[28].p._mdf)&&(dt=this.getTableValue($t[24].p.v,$t[25].p.v,$t[26].p.v,$t[27].p.v,$t[28].p.v),this.feFuncB.setAttribute("tableValues",dt)),this.feFuncA&&(et||$t[31].p._mdf||$t[32].p._mdf||$t[33].p._mdf||$t[34].p._mdf||$t[35].p._mdf)&&(dt=this.getTableValue($t[31].p.v,$t[32].p.v,$t[33].p.v,$t[34].p.v,$t[35].p.v),this.feFuncA.setAttribute("tableValues",dt))}};function SVGDropShadowEffect(et,dt,$t,kt,Tt){var Dt=dt.container.globalData.renderConfig.filterSize,Ft=dt.data.fs||Dt;et.setAttribute("x",Ft.x||Dt.x),et.setAttribute("y",Ft.y||Dt.y),et.setAttribute("width",Ft.width||Dt.width),et.setAttribute("height",Ft.height||Dt.height),this.filterManager=dt;var Ut=createNS("feGaussianBlur");Ut.setAttribute("in","SourceAlpha"),Ut.setAttribute("result",kt+"_drop_shadow_1"),Ut.setAttribute("stdDeviation","0"),this.feGaussianBlur=Ut,et.appendChild(Ut);var Ht=createNS("feOffset");Ht.setAttribute("dx","25"),Ht.setAttribute("dy","0"),Ht.setAttribute("in",kt+"_drop_shadow_1"),Ht.setAttribute("result",kt+"_drop_shadow_2"),this.feOffset=Ht,et.appendChild(Ht);var Kt=createNS("feFlood");Kt.setAttribute("flood-color","#00ff00"),Kt.setAttribute("flood-opacity","1"),Kt.setAttribute("result",kt+"_drop_shadow_3"),this.feFlood=Kt,et.appendChild(Kt);var Yt=createNS("feComposite");Yt.setAttribute("in",kt+"_drop_shadow_3"),Yt.setAttribute("in2",kt+"_drop_shadow_2"),Yt.setAttribute("operator","in"),Yt.setAttribute("result",kt+"_drop_shadow_4"),et.appendChild(Yt);var Jt=this.createMergeNode(kt,[kt+"_drop_shadow_4",Tt]);et.appendChild(Jt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){if((et||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),et||this.filterManager.effectElements[0].p._mdf){var dt=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(dt[0]*255),Math.round(dt[1]*255),Math.round(dt[2]*255)))}if((et||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),et||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var $t=this.filterManager.effectElements[3].p.v,kt=(this.filterManager.effectElements[2].p.v-90)*degToRads,Tt=$t*Math.cos(kt),Dt=$t*Math.sin(kt);this.feOffset.setAttribute("dx",Tt),this.feOffset.setAttribute("dy",Dt)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(et,dt,$t){this.initialized=!1,this.filterManager=dt,this.filterElem=et,this.elem=$t,$t.matteElement=createNS("g"),$t.matteElement.appendChild($t.layerElement),$t.matteElement.appendChild($t.transformedElement),$t.baseElement=$t.matteElement}SVGMatte3Effect.prototype.findSymbol=function(et){for(var dt=0,$t=_svgMatteSymbols.length;dt<$t;){if(_svgMatteSymbols[dt]===et)return _svgMatteSymbols[dt];dt+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(et,dt){var $t=et.layerElement.parentNode;if($t){for(var kt=$t.children,Tt=0,Dt=kt.length;Tt<Dt&&kt[Tt]!==et.layerElement;)Tt+=1;var Ft;Tt<=Dt-2&&(Ft=kt[Tt+1]);var Ut=createNS("use");Ut.setAttribute("href","#"+dt),Ft?$t.insertBefore(Ut,Ft):$t.appendChild(Ut)}},SVGMatte3Effect.prototype.setElementAsMask=function(et,dt){if(!this.findSymbol(dt)){var $t=createElementID(),kt=createNS("mask");kt.setAttribute("id",dt.layerId),kt.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(dt);var Tt=et.globalData.defs;Tt.appendChild(kt);var Dt=createNS("symbol");Dt.setAttribute("id",$t),this.replaceInParent(dt,$t),Dt.appendChild(dt.layerElement),Tt.appendChild(Dt);var Ft=createNS("use");Ft.setAttribute("href","#"+$t),kt.appendChild(Ft),dt.data.hd=!1,dt.show()}et.setMatte(dt.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var et=this.filterManager.effectElements[0].p.v,dt=this.elem.comp.elements,$t=0,kt=dt.length;$t<kt;)dt[$t]&&dt[$t].data.ind===et&&this.setElementAsMask(this.elem,dt[$t]),$t+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(et,dt,$t,kt){et.setAttribute("x","-100%"),et.setAttribute("y","-100%"),et.setAttribute("width","300%"),et.setAttribute("height","300%"),this.filterManager=dt;var Tt=createNS("feGaussianBlur");Tt.setAttribute("result",kt),et.appendChild(Tt),this.feGaussianBlur=Tt}SVGGaussianBlurEffect.prototype.renderFrame=function(et){if(et||this.filterManager._mdf){var dt=.3,$t=this.filterManager.effectElements[0].p.v*dt,kt=this.filterManager.effectElements[1].p.v,Tt=kt==3?0:$t,Dt=kt==2?0:$t;this.feGaussianBlur.setAttribute("stdDeviation",Tt+" "+Dt);var Ft=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",Ft)}};function TransformEffect(){}TransformEffect.prototype.init=function(et){this.effectsManager=et,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(et){if(this._opMdf=!1,this._mdf=!1,et||this.effectsManager._mdf){var dt=this.effectsManager.effectElements,$t=dt[0].p.v,kt=dt[1].p.v,Tt=dt[2].p.v===1,Dt=dt[3].p.v,Ft=Tt?Dt:dt[4].p.v,Ut=dt[5].p.v,Ht=dt[6].p.v,Kt=dt[7].p.v;this.matrix.reset(),this.matrix.translate(-$t[0],-$t[1],$t[2]),this.matrix.scale(Ft*.01,Dt*.01,1),this.matrix.rotate(-Kt*degToRads),this.matrix.skewFromAxis(-Ut*degToRads,(Ht+90)*degToRads),this.matrix.translate(kt[0],kt[1],0),this._mdf=!0,this.opacity!==dt[8].p.v&&(this.opacity=dt[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(et,dt){this.init(dt)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(et){this.init(et)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(et,dt){var $t=et==null?null:typeof Symbol<"u"&&et[Symbol.iterator]||et["@@iterator"];if($t!=null){var kt,Tt,Dt,Ft,Ut=[],Ht=!0,Kt=!1;try{if(Dt=($t=$t.call(et)).next,dt===0){if(Object($t)!==$t)return;Ht=!1}else for(;!(Ht=(kt=Dt.call($t)).done)&&(Ut.push(kt.value),Ut.length!==dt);Ht=!0);}catch(Yt){Kt=!0,Tt=Yt}finally{try{if(!Ht&&$t.return!=null&&(Ft=$t.return(),Object(Ft)!==Ft))return}finally{if(Kt)throw Tt}}return Ut}}function ownKeys$2(et,dt){var $t=Object.keys(et);if(Object.getOwnPropertySymbols){var kt=Object.getOwnPropertySymbols(et);dt&&(kt=kt.filter(function(Tt){return Object.getOwnPropertyDescriptor(et,Tt).enumerable})),$t.push.apply($t,kt)}return $t}function _objectSpread2(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt]!=null?arguments[dt]:{};dt%2?ownKeys$2(Object($t),!0).forEach(function(kt){_defineProperty$2(et,kt,$t[kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors($t)):ownKeys$2(Object($t)).forEach(function(kt){Object.defineProperty(et,kt,Object.getOwnPropertyDescriptor($t,kt))})}return et}function _defineProperty$2(et,dt,$t){return dt=_toPropertyKey(dt),dt in et?Object.defineProperty(et,dt,{value:$t,enumerable:!0,configurable:!0,writable:!0}):et[dt]=$t,et}function _objectWithoutPropertiesLoose$1(et,dt){if(et==null)return{};var $t={},kt=Object.keys(et),Tt,Dt;for(Dt=0;Dt<kt.length;Dt++)Tt=kt[Dt],!(dt.indexOf(Tt)>=0)&&($t[Tt]=et[Tt]);return $t}function _objectWithoutProperties$2(et,dt){if(et==null)return{};var $t=_objectWithoutPropertiesLoose$1(et,dt),kt,Tt;if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);for(Tt=0;Tt<Dt.length;Tt++)kt=Dt[Tt],!(dt.indexOf(kt)>=0)&&Object.prototype.propertyIsEnumerable.call(et,kt)&&($t[kt]=et[kt])}return $t}function _slicedToArray(et,dt){return _arrayWithHoles(et)||_iterableToArrayLimit(et,dt)||_unsupportedIterableToArray(et,dt)||_nonIterableRest()}function _arrayWithHoles(et){if(Array.isArray(et))return et}function _unsupportedIterableToArray(et,dt){if(et){if(typeof et=="string")return _arrayLikeToArray(et,dt);var $t=Object.prototype.toString.call(et).slice(8,-1);if($t==="Object"&&et.constructor&&($t=et.constructor.name),$t==="Map"||$t==="Set")return Array.from(et);if($t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($t))return _arrayLikeToArray(et,dt)}}function _arrayLikeToArray(et,dt){(dt==null||dt>et.length)&&(dt=et.length);for(var $t=0,kt=new Array(dt);$t<dt;$t++)kt[$t]=et[$t];return kt}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(et,dt){if(typeof et!="object"||et===null)return et;var $t=et[Symbol.toPrimitive];if($t!==void 0){var kt=$t.call(et,dt||"default");if(typeof kt!="object")return kt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(dt==="string"?String:Number)(et)}function _toPropertyKey(et){var dt=_toPrimitive(et,"string");return typeof dt=="symbol"?dt:String(dt)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function et(dt,$t){var kt=dt.animationData,Tt=dt.loop,Dt=dt.autoplay,Ft=dt.initialSegment,Ut=dt.onComplete,Ht=dt.onLoopComplete,Kt=dt.onEnterFrame,Yt=dt.onSegmentStart,Jt=dt.onConfigReady,Zt=dt.onDataReady,er=dt.onDataFailed,rr=dt.onLoadedImages,sr=dt.onDOMLoaded,nr=dt.onDestroy;dt.lottieRef,dt.renderer,dt.name,dt.assetsPath,dt.rendererSettings;var ir=_objectWithoutProperties$2(dt,_excluded$1),or=reactExports.useState(!1),lr=_slicedToArray(or,2),cr=lr[0],dr=lr[1],ur=reactExports.useRef(),pr=reactExports.useRef(null),mr=function(){var Yr;(Yr=ur.current)===null||Yr===void 0||Yr.play()},jr=function(){var Yr;(Yr=ur.current)===null||Yr===void 0||Yr.stop()},Rr=function(){var Yr;(Yr=ur.current)===null||Yr===void 0||Yr.pause()},xr=function(Yr){var es;(es=ur.current)===null||es===void 0||es.setSpeed(Yr)},kr=function(Yr,es){var rs;(rs=ur.current)===null||rs===void 0||rs.goToAndPlay(Yr,es)},Mr=function(Yr,es){var rs;(rs=ur.current)===null||rs===void 0||rs.goToAndStop(Yr,es)},Tr=function(Yr){var es;(es=ur.current)===null||es===void 0||es.setDirection(Yr)},Or=function(Yr,es){var rs;(rs=ur.current)===null||rs===void 0||rs.playSegments(Yr,es)},_r=function(Yr){var es;(es=ur.current)===null||es===void 0||es.setSubframe(Yr)},Pr=function(Yr){var es;return(es=ur.current)===null||es===void 0?void 0:es.getDuration(Yr)},br=function(){var Yr;(Yr=ur.current)===null||Yr===void 0||Yr.destroy(),ur.current=void 0},wr=function(){var Yr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},es;if(pr.current){(es=ur.current)===null||es===void 0||es.destroy();var rs=_objectSpread2(_objectSpread2(_objectSpread2({},dt),Yr),{},{container:pr.current});return ur.current=lottie.loadAnimation(rs),dr(!!ur.current),function(){var Wr;(Wr=ur.current)===null||Wr===void 0||Wr.destroy(),ur.current=void 0}}};reactExports.useEffect(function(){var Hr=wr();return function(){return Hr==null?void 0:Hr()}},[kt,Tt]),reactExports.useEffect(function(){ur.current&&(ur.current.autoplay=!!Dt)},[Dt]),reactExports.useEffect(function(){if(ur.current){if(!Ft){ur.current.resetSegments(!0);return}!Array.isArray(Ft)||!Ft.length||((ur.current.currentRawFrame<Ft[0]||ur.current.currentRawFrame>Ft[1])&&(ur.current.currentRawFrame=Ft[0]),ur.current.setSegment(Ft[0],Ft[1]))}},[Ft]),reactExports.useEffect(function(){var Hr=[{name:"complete",handler:Ut},{name:"loopComplete",handler:Ht},{name:"enterFrame",handler:Kt},{name:"segmentStart",handler:Yt},{name:"config_ready",handler:Jt},{name:"data_ready",handler:Zt},{name:"data_failed",handler:er},{name:"loaded_images",handler:rr},{name:"DOMLoaded",handler:sr},{name:"destroy",handler:nr}],Yr=Hr.filter(function(rs){return rs.handler!=null});if(Yr.length){var es=Yr.map(function(rs){var Wr;return(Wr=ur.current)===null||Wr===void 0||Wr.addEventListener(rs.name,rs.handler),function(){var Xr;(Xr=ur.current)===null||Xr===void 0||Xr.removeEventListener(rs.name,rs.handler)}});return function(){es.forEach(function(rs){return rs()})}}},[Ut,Ht,Kt,Yt,Jt,Zt,er,rr,sr,nr]);var zr=React$2.createElement("div",_objectSpread2({style:$t,ref:pr},ir));return{View:zr,play:mr,stop:jr,pause:Rr,setSpeed:xr,goToAndStop:Mr,goToAndPlay:kr,setDirection:Tr,playSegments:Or,setSubframe:_r,getDuration:Pr,destroy:br,animationContainerRef:pr,animationLoaded:cr,animationItem:ur.current}};function getContainerVisibility(et){var dt=et.getBoundingClientRect(),$t=dt.top,kt=dt.height,Tt=window.innerHeight-$t,Dt=window.innerHeight+kt;return Tt/Dt}function getContainerCursorPosition(et,dt,$t){var kt=et.getBoundingClientRect(),Tt=kt.top,Dt=kt.left,Ft=kt.width,Ut=kt.height,Ht=(dt-Dt)/Ft,Kt=($t-Tt)/Ut;return{x:Ht,y:Kt}}var useInitInteractivity=function et(dt){var $t=dt.wrapperRef,kt=dt.animationItem,Tt=dt.mode,Dt=dt.actions;reactExports.useEffect(function(){var Ft=$t.current;if(!(!Ft||!kt||!Dt.length)){kt.stop();var Ut=function(){var Yt=null,Jt=function(){var er=getContainerVisibility(Ft),rr=Dt.find(function(nr){var ir=nr.visibility;return ir&&er>=ir[0]&&er<=ir[1]});if(rr){if(rr.type==="seek"&&rr.visibility&&rr.frames.length===2){var sr=rr.frames[0]+Math.ceil((er-rr.visibility[0])/(rr.visibility[1]-rr.visibility[0])*rr.frames[1]);//! goToAndStop must be relative to the start of the current segment
kt.goToAndStop(sr-kt.firstFrame-1,!0)}rr.type==="loop"&&(Yt===null||Yt!==rr.frames||kt.isPaused)&&(kt.playSegments(rr.frames,!0),Yt=rr.frames),rr.type==="play"&&kt.isPaused&&(kt.resetSegments(!0),kt.play()),rr.type==="stop"&&kt.goToAndStop(rr.frames[0]-kt.firstFrame-1,!0)}};return document.addEventListener("scroll",Jt),function(){document.removeEventListener("scroll",Jt)}},Ht=function(){var Yt=function(rr,sr){var nr=rr,ir=sr;if(nr!==-1&&ir!==-1){var or=getContainerCursorPosition(Ft,nr,ir);nr=or.x,ir=or.y}var lr=Dt.find(function(ur){var pr=ur.position;return pr&&Array.isArray(pr.x)&&Array.isArray(pr.y)?nr>=pr.x[0]&&nr<=pr.x[1]&&ir>=pr.y[0]&&ir<=pr.y[1]:pr&&!Number.isNaN(pr.x)&&!Number.isNaN(pr.y)?nr===pr.x&&ir===pr.y:!1});if(lr){if(lr.type==="seek"&&lr.position&&Array.isArray(lr.position.x)&&Array.isArray(lr.position.y)&&lr.frames.length===2){var cr=(nr-lr.position.x[0])/(lr.position.x[1]-lr.position.x[0]),dr=(ir-lr.position.y[0])/(lr.position.y[1]-lr.position.y[0]);kt.playSegments(lr.frames,!0),kt.goToAndStop(Math.ceil((cr+dr)/2*(lr.frames[1]-lr.frames[0])),!0)}lr.type==="loop"&&kt.playSegments(lr.frames,!0),lr.type==="play"&&(kt.isPaused&&kt.resetSegments(!1),kt.playSegments(lr.frames)),lr.type==="stop"&&kt.goToAndStop(lr.frames[0],!0)}},Jt=function(rr){Yt(rr.clientX,rr.clientY)},Zt=function(){Yt(-1,-1)};return Ft.addEventListener("mousemove",Jt),Ft.addEventListener("mouseout",Zt),function(){Ft.removeEventListener("mousemove",Jt),Ft.removeEventListener("mouseout",Zt)}};switch(Tt){case"scroll":return Ut();case"cursor":return Ht()}}},[Tt,kt])},useLottieInteractivity=function et(dt){var $t=dt.actions,kt=dt.mode,Tt=dt.lottieObj,Dt=Tt.animationItem,Ft=Tt.View,Ut=Tt.animationContainerRef;return useInitInteractivity({actions:$t,animationItem:Dt,mode:kt,wrapperRef:Ut}),Ft},_excluded$2=["style","interactivity"],Lottie=function et(dt){var $t,kt,Tt,Dt=dt.style,Ft=dt.interactivity,Ut=_objectWithoutProperties$2(dt,_excluded$2),Ht=useLottie(Ut,Dt),Kt=Ht.View,Yt=Ht.play,Jt=Ht.stop,Zt=Ht.pause,er=Ht.setSpeed,rr=Ht.goToAndStop,sr=Ht.goToAndPlay,nr=Ht.setDirection,ir=Ht.playSegments,or=Ht.setSubframe,lr=Ht.getDuration,cr=Ht.destroy,dr=Ht.animationContainerRef,ur=Ht.animationLoaded,pr=Ht.animationItem;return reactExports.useEffect(function(){dt.lottieRef&&(dt.lottieRef.current={play:Yt,stop:Jt,pause:Zt,setSpeed:er,goToAndPlay:sr,goToAndStop:rr,setDirection:nr,playSegments:ir,setSubframe:or,getDuration:lr,destroy:cr,animationContainerRef:dr,animationLoaded:ur,animationItem:pr})},[($t=dt.lottieRef)===null||$t===void 0?void 0:$t.current]),useLottieInteractivity({lottieObj:{View:Kt,play:Yt,stop:Jt,pause:Zt,setSpeed:er,goToAndStop:rr,goToAndPlay:sr,setDirection:nr,playSegments:ir,setSubframe:or,getDuration:lr,destroy:cr,animationContainerRef:dr,animationLoaded:ur,animationItem:pr},actions:(kt=Ft==null?void 0:Ft.actions)!==null&&kt!==void 0?kt:[],mode:(Tt=Ft==null?void 0:Ft.mode)!==null&&Tt!==void 0?Tt:"scroll"})};const nm="error",ddd=0,h$3=495,w$7=610,meta={g:"@lottiefiles/toolkit-js 0.26.1"},layers=[{ty:4,nm:"onda contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[215.177,7.452,0],ix:1},s:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[100,100,100],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[98,98,100],t:25},{s:[100,100,100],t:50}],ix:6},sk:{a:0,k:0},p:{a:0,k:[290.23,391.787,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.019,-3.444],[11.925,3.71],[15.246,-5.628],[13.16,-1.326],[6.095,1.06],[18.549,-4.579],[20.669,-11.401],[0,0]],o:[[-18.019,3.445],[-11.924,-3.71],[-15.247,5.627],[-13.16,1.325],[-6.094,-1.06],[-18.549,4.579],[0,0],[0,0]],v:[[172.782,-2.665],[120.58,-2.135],[64.933,1.575],[-12.001,-5.314],[-55.9,2.105],[-108.102,-.619],[-214.927,4.199],[214.927,4.171]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.7608,.7961,.9176],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[215.177,7.452],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:1},{ty:4,nm:"mascara contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,td:1,ao:0,ks:{a:{a:0,k:[236.75,48.666,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[306.5,443.092,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[236.5,48.416],[-236.5,48.416],[-236.5,-48.416],[236.5,-48.416]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[1,1,1],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[236.75,48.666],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:2},{ty:4,nm:"barco contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,tt:2,hasMask:!1,ao:0,ks:{a:{a:0,k:[238.525,103.168,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,340.028,0],t:0,ti:[0,0,0],to:[0,.995,0]},{o:{x:.333,y:0},i:{x:.667,y:1},s:[298.895,346,0],t:25,ti:[0,.995,0],to:[0,0,0]},{s:[298.895,340.028,0],t:50}],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[1],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[34.934,18.014],[.174,.101],[0,0],[-20.846,-10.75],[-11.059,-3.23],[0,0]],o:[[-8.314,-1.72],[-20.869,-10.761],[0,0],[.173,.102],[27.561,14.213],[0,0],[0,0]],v:[[50.064,23.648],[-12.12,-2.247],[-50.064,-23.648],[-48.52,-23.283],[-11.623,-3.201],[48.425,22.504],[48.994,22.88]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[50.595,73.639],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.734,-5.533],[2.44,-4.275],[0,0],[-.479,3.608],[.983,3.414],[0,0]],o:[[-.688,5.183],[0,0],[1.73,-2.956],[.497,-3.745],[0,0],[1.453,5.042]],v:[[7.355,.862],[2.555,15.132],[-8.089,9.167],[-4.699,-.739],[-5.492,-11.566],[6.178,-15.132]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[115.743,122.502],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-1.194,-3.664],[0,0],[-.797,6.003],[-2.282,4.144],[0,0],[.434,-3.271]],o:[[0,0],[-1.756,-5.397],[.66,-4.971],[0,0],[-1.473,2.748],[-.541,4.075]],v:[[6.506,11.687],[-6,15.504],[-7.563,-1.76],[-3.057,-15.504],[8.36,-9.109],[5.44,-.034]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.884,114.798],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[5.822,.774],[4.058,2.181],[0,0],[-3.355,-.445],[-3.466,1.022]],o:[[-5.262,1.636],[-4.837,-.641],[0,0],[2.8,1.537],[3.812,.506],[0,0]],v:[[15.093,5.954],[-1.685,7.362],[-15.093,3.043],[-8.832,-8.136],[.45,-5.101],[11.458,-5.945]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[80.698,149.982],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-4.76,-3.116],[0,0],[4.006,.532],[3.244,-.853],[0,0],[-5.01,-.665]],o:[[0,0],[-3.188,-2.051],[-3.528,-.468],[0,0],[4.627,-1.143],[6.014,.799]],v:[[15.421,-1.916],[8.808,8.618],[-2.064,4.637],[-12.292,5.268],[-15.421,-7.166],[-.872,-7.954]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[90.212,87.524],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:6,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[1.729,-2.957],[6.489,-1.913],[3.812,.506],[2.799,1.537],[2.086,6.41],[-.541,4.074],[-1.472,2.748],[-7.128,1.866],[-3.527,-.468],[-3.188,-2.051],[-1.781,-6.203],[.498,-3.746]],o:[[-3.416,5.852],[-3.466,1.023],[-3.355,-.445],[-5.946,-3.261],[-1.194,-3.663],[.435,-3.273],[3.497,-6.508],[3.244,-.852],[4.007,.532],[5.417,3.48],[.983,3.413],[-.479,3.607]],v:[[23.477,13.415],[8.012,25.525],[-2.997,26.37],[-12.279,23.335],[-24.788,8.229],[-25.854,-3.49],[-22.934,-12.566],[-6.225,-25.72],[4.003,-26.349],[14.876,-22.368],[26.073,-7.317],[26.865,3.51]]},ix:2}},{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 2",ix:2,d:1,ks:{a:0,k:{c:!0,i:[[1.452,5.041],[7.856,5.136],[6.015,.797],[4.626,-1.143],[5.274,-9.583],[.66,-4.971],[-1.756,-5.399],[-8.926,-4.799],[-4.837,-.642],[-5.262,1.636],[-4.931,8.644],[-.688,5.182]],o:[[-2.601,-9.045],[-4.761,-3.117],[-5.009,-.667],[-10.62,2.619],[-2.282,4.144],[-.797,6.003],[3.109,9.567],[4.058,2.18],[5.822,.773],[9.469,-2.94],[2.439,-4.276],[.735,-5.533]],v:[[37.744,-10.884],[21.488,-32.902],[5.196,-38.939],[-9.353,-38.152],[-34.352,-18.961],[-38.856,-5.217],[-37.294,12.048],[-18.539,34.514],[-5.132,38.833],[11.646,37.425],[34.121,19.379],[38.919,5.11]]},ix:2}},{ty:"mm",bm:0,hd:!1,mn:"ADBE Vector Filter - Merge",nm:"Mesclar caminhos 1",mm:1},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8784,.8784,.8784],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.144,118.511],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[18.726,2.442],[0,0],[-.705,.04],[0,0]],o:[[0,0],[18.626,2.429],[0,0],[-.706,.041]],v:[[-45.038,-.021],[-44.899,-1.085],[43.292,-2.421],[45.038,-2.008]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.1686,.1608,.3686],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[147.494,97.467],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[130.107,-38.817],[35.758,50.211],[-130.107,28.187],[-111.111,-50.211]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[346.693,155.875],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[238.275,-10.946],[143.925,78.082],[-158.527,37.921],[-238.275,-78.082],[-2.944,-22.34]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[238.525,128.004],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-30.452,-11.733],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[22.546,8.675]],v:[[54.447,15.708],[-29.446,6.601],[-54.448,2.22],[-45.036,-5.08],[-31.336,-15.708]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[181.186,89.557],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[64.818,58.717],[-64.818,-61.806],[.327,61.806]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[309.542,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:2,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[91.565,61.805],[16.21,48.604],[-66.562,34.103],[-91.564,29.721],[-82.154,22.422],[-68.452,11.794],[-64.768,8.934],[26.419,-61.805],[75.721,31.747]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[218.304,62.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:3},{ty:4,nm:"bandeira contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[3.333,103.527,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[508.393,364.277,0],ix:2},r:{a:1,k:[{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[0],t:0},{o:{x:.167,y:.167},i:{x:.833,y:.833},s:[-2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.658,-2.953],[0,0],[0,0],[1.126,4.839]],o:[[-.67,2.999],[0,0],[1.614,-1.725],[.1,.1]],v:[[3.548,.438],[-4.206,5.982],[-4.206,5.979],[.835,-5.982]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[40.042,10.085],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[7.587,6.536],[2.491,-.102],[.116,.13],[0,0],[-.384,.003],[0,0],[0,-.002],[1.614,-1.724],[0,0],[0,0],[0,0],[0,0],[0,0],[-.505,-.066],[0,0],[-7.421,-5.626],[0,0],[0,0]],o:[[0,0],[-6.49,-5.591],[-.022,-.006],[0,0],[0,0],[0,0],[0,.001],[1.126,4.839],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[2.297,-.311],[8.902,6.748],[0,0],[0,0]],v:[[19.81,-1.324],[4.701,-6.806],[-13.361,-12.344],[-14.212,-12.72],[-14.578,-11.828],[-13.731,-11.387],[-13.729,-11.388],[-13.729,-11.384],[-18.77,.577],[-18.77,.58],[-18.771,.58],[-19.525,.237],[-19.809,.93],[-19.81,.932],[-18.689,1.354],[-18.549,1.01],[-1.682,5.948],[16.577,12.72],[14.09,4.741]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[54.606,15.487],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[.027,-.206],[.013,-.035],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.219,-.085]],o:[[-.005,.036],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.089,-.218],[.201,.081]],v:[[20.93,-49.702],[20.902,-49.594],[20.04,-47.383],[20.04,-47.382],[19.668,-46.43],[19.668,-46.428],[15.306,-35.217],[15.079,-34.632],[14.954,-34.311],[14.71,-33.687],[-17.967,50.277],[-20.956,50.137],[13.589,-34.109],[13.59,-34.111],[13.874,-34.805],[18.821,-46.868],[19.188,-47.762],[20.087,-49.956],[20.641,-50.193]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8118,.8314,.9255],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[21.206,50.527],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:4},{ty:4,nm:"hominho contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[61,205,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[153.864,377.089,0],ix:2},r:{a:1,k:[{o:{x:.333,y:0},i:{x:.667,y:1},s:[0],t:0},{o:{x:.333,y:0},i:{x:.667,y:1},s:[2],t:25},{s:[0],t:50}],ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.986,-3.765],[-.075,4.263],[-3.986,-.553],[-3.493,-4.263]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9176,.5529,.3059],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[97.339,38.926],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 2",ix:2,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.562,-8.323],[0,0],[0,0],[1.36,.35],[0,0],[5.078,1.566],[0,0],[.814,1.124],[-5.522,-2.048]],o:[[0,0],[-.808,.107],[0,0],[-1.359,-.356],[0,0],[0,0],[-1.596,-.485],[-3.418,-4.711],[5.522,2.048]],v:[[13.008,-2.493],[12.001,4.652],[10.312,5.359],[7.791,10.466],[6.728,.137],[-5.829,-.359],[-5.828,-.365],[-9.59,-2.727],[-5.788,-7.58]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.2,.2,.2],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[95.438,17.148],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 3",ix:3,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.809,.107],[-.116,-.991],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-.629,4.74],[-.194,.58],[0,0],[0,0],[-1.359,-.356],[0,0]],o:[[.624,-.087],[.272,2.269],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.146,-1.094],[0,0],[5.078,1.566],[0,0],[1.359,.35],[0,0]],v:[[8.821,-8.33],[10.152,-7.222],[7.611,-2.644],[6.924,7.179],[-1.544,13.34],[2.518,5.313],[-4.963,4.813],[-9.338,3.738],[-10.424,2.403],[-9.585,-10.532],[-9.079,-13.115],[-9.01,-13.34],[3.549,-12.844],[4.611,-2.515],[7.132,-7.623]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[98.577,30.124],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 4",ix:4,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0]],o:[[-27.616,-9.801],[0,0],[0,0],[0,0]],v:[[9.572,21.137],[-18.343,-21.136],[-3.118,6.541],[18.343,4.45]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[96.057,55.643],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 5",ix:5,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.764,.72],[-.083,1.851],[1.039,2.566],[-.396,.279],[-1.226,.312],[-.102,-1.634],[-.007,-.046],[-.404,-1.421]],o:[[0,0],[0,0],[-.996,-.933],[.115,-2.484],[-.334,-.82],[.504,-.363],[2.714,-.681],[.001,.039],[.064,.647],[1.219,4.354]],v:[[6.884,6.578],[1.556,9.341],[.103,8.224],[-1.936,3.969],[-6.475,-5.63],[-6.488,-7.344],[-3.696,-8.419],[2.648,-7.707],[2.663,-7.576],[3.415,-4.318]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[78.549,23.927],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 6",ix:6,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-3.947,.211],[0,0],[0,0],[1.336,-.011],[10.934,5.859],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[-6.258,.062],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[.764,.719],[0,0],[0,0],[0,0]],v:[[40.412,1.789],[31.641,18.477],[28.509,35.442],[26.4,35.488],[-9.476,29.344],[-2.174,8.72],[-2.025,-8.292],[-27.405,-8.849],[-40.412,-31.214],[-38.108,-32.53],[-32.811,-35.549],[-19.9,-19.09],[4.664,-26.152],[6.117,-25.035],[3.726,-23.797],[18.953,3.862]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[73.989,58.304],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 7",ix:7,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.27,.029],[0,0],[0,0]],o:[[0,0],[-.244,-.072],[-3.801,-.447],[0,0],[0,0]],v:[[-1.025,-5.379],[9.493,.432],[8.726,.278],[-5.761,5.379],[-9.493,.782]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[106.756,42.408],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 8",ix:8,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[-3.801,-.446],[-.244,-.072],[1.081,-3.632],[3.946,-.205],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[.269,.029],[3.283,.917],[-1.164,3.914],[-3.947,.211],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-6.037,-7.682],[-2.126,-2.866],[1.606,1.731],[16.092,-3.37],[16.859,-3.216],[20.594,5.476],[15.011,14.038],[-6.449,16.11],[-21.675,-11.549],[-19.284,-12.787],[-13.956,-15.55],[-12.88,-16.11],[-11.005,-13.804],[-9.919,-12.469]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.8078,.7882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[99.39,46.056],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 9",ix:9,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[2.188,-1.317],[1.694,2.393],[-2.188,-2.393]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[91.658,35.98],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 10",ix:10,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[-.65,3.078],[0,0],[-.889,.37],[-1.354,-1.521],[-.21,-.673]],o:[[0,0],[0,0],[0,0],[.065,-1.079],[1.178,-.489],[.277,.317],[.805,2.561]],v:[[5.163,4.06],[-.135,7.082],[-4.512,-2.895],[-1.344,-2.878],[-.154,-6.592],[3.301,-4.383],[4.035,-2.846]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.949,.6,.2902],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[36.015,18.694],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 11",ix:11,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[10.718,3.027],[10.627,3.713],[-11.228,.811],[-10.627,-3.713],[11.228,-.811],[11.13,-.076]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.567,14.101],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 12",ix:12,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.063,.647],[0,0]],o:[[0,0],[0,0],[-.404,-1.421],[0,0],[0,0]],v:[[3.357,.796],[3.193,2.03],[-2.853,1.228],[-3.605,-2.03],[3.605,-1.072]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[84.818,18.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 13",ix:13,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[.504,-.363],[-.334,-.819],[0,0]],o:[[0,0],[-1.226,.313],[-.395,.279],[0,0],[0,0]],v:[[-5.372,-2.135],[5.785,-.654],[2.992,.421],[3.005,2.135],[-5.785,.968]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.0667,.0627,.1373],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[69.069,16.161],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 14",ix:14,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-.021,.206],[.454,1.336],[.738,.319],[0,0],[.701,-3.656],[.043,-.319],[-.212,-1.246],[-1.247,-.166],[-.132,.015],[-.518,3.902]],o:[[.185,-1.929],[-.388,-1.146],[0,0],[-1.798,-.141],[-.066,.304],[-.204,1.542],[.366,2.145],[.135,.017],[1.848,-.184],[.028,-.211]],v:[[3.624,-.078],[3.172,-5.105],[1.451,-7.391],[.883,-7.532],[-3.448,-1.343],[-3.605,-.407],[-3.57,3.843],[-1.036,7.656],[-.626,7.658],[3.554,.544]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8627,.2784,.3294],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[4.059,7.923],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 15",ix:15,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[.277,.317],[1.178,-.488],[.065,-1.079],[0,0],[0,0],[0,0],[-.518,3.902],[1.686,.732],[0,0],[0,0]],o:[[0,0],[0,0],[-.21,-.673],[-1.354,-1.521],[-.889,.371],[0,0],[0,0],[0,0],[1.848,-.185],[.512,-3.851],[0,0],[0,0],[0,0]],v:[[18.604,6.72],[18.479,7.66],[17.313,7.656],[16.58,6.119],[13.124,3.909],[11.934,7.625],[8.766,7.608],[-19.296,7.443],[-19.303,7.39],[-15.124,.276],[-17.227,-7.66],[19.303,1.449],[19.204,2.197]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.9098,.4275,.1882],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[22.736,8.191],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 16",ix:16,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[0,0],[0,0],[-7.889,-.188],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[-1.424,-7.763],[0,0],[0,0],[17.34,5.523],[0,0]],v:[[15.789,-4.481],[-5.23,-8.073],[-6.092,24.732],[-21.09,27.96],[-24.038,-13.084],[-11.495,-27.772],[-5.111,-27.618],[-5.104,-27.617],[25.462,-3.139]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.1255,.2627],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[52.459,114.844],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 17",ix:17,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[1.246,-7.213],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-3.821,-6.273],[-4.877,-2.729],[-11.295,4.52],[1.911,6.273],[10.017,.222],[11.295,-4.265]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[82.042,197.797],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 18",ix:18,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[-2.653,-12.601],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-.527,-11.795],[-9.312,13.551],[11.965,-10.136],[10.064,-13.551]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.5137,.6,.702],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[34.803,153.627],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]},{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 19",ix:19,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[0,0],[0,0],[0,0],[17.34,5.522],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[20.148,53.268],[3.293,51.029],[2.995,-28.791],[-27.572,-53.268],[-10.414,-52.845],[27.572,-46.748]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[0,.2039,.4196],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[74.927,140.495],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:5},{ty:4,nm:"nuvem contornos 3",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[173,173,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[441.196,174.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:6},{ty:4,nm:"nuvem contornos 2",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[248,248,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[171.196,120.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:7},{ty:4,nm:"nuvem contornos",sr:1,st:0,op:1750,ip:0,hd:!1,ddd:0,bm:0,hasMask:!1,ao:0,ks:{a:{a:0,k:[48.338,13.382,0],ix:1},s:{a:0,k:[100,100,100],ix:6},sk:{a:0,k:0},p:{a:0,k:[532.196,98.382,0],ix:2},r:{a:0,k:0,ix:10},sa:{a:0,k:0},o:{a:0,k:100,ix:11}},ef:[],shapes:[{ty:"gr",bm:0,hd:!1,mn:"ADBE Vector Group",nm:"Grupo 1",ix:1,cix:2,np:4,it:[{ty:"sh",bm:0,hd:!1,mn:"ADBE Vector Shape - Group",nm:"Caminho 1",ix:1,d:1,ks:{a:0,k:{c:!0,i:[[-13.305,-1.026],[-18.691,-.966],[0,0],[-9.991,-13.554],[0,0]],o:[[0,0],[18.69,.967],[0,0],[0,0],[0,0]],v:[[-29.094,4.319],[-1.289,-13.346],[23.524,4.319],[48.338,13.382],[-48.338,13.382]]},ix:2}},{ty:"fl",bm:0,hd:!1,mn:"ADBE Vector Graphic - Fill",nm:"Preenchimento 1",c:{a:0,k:[.8706,.8902,.9569],ix:4},r:1,o:{a:0,k:100,ix:5}},{ty:"tr",a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},sk:{a:0,k:0,ix:4},p:{a:0,k:[48.338,13.382],ix:2},r:{a:0,k:0,ix:6},sa:{a:0,k:0,ix:5},o:{a:0,k:100,ix:7}}]}],ind:8}],v$4="5.7.3",fr=25,op=50,ip=0,assets=[],notFound={nm,ddd,h:h$3,w:w$7,meta,layers,v:v$4,fr,op,ip,assets},NotFound=()=>jsxRuntimeExports.jsxs("section",{className:"max-xl h-screen bg-gradient-to-r from-black to-silver",children:[jsxRuntimeExports.jsx("div",{className:" flex justify-center items-center",children:jsxRuntimeExports.jsx(Lottie,{className:"w-[500px] h-[500px]",animationData:notFound,loop:!0})}),jsxRuntimeExports.jsx("h3",{className:"font-palanquin padding-x text-center text-8xl font-bold text-phlokkGreen",children:"4 0 4"}),jsxRuntimeExports.jsx("p",{className:"m-auto mt-4 max-w-lg text-center notFound-text",children:"Page does not exist!"}),jsxRuntimeExports.jsx("div",{className:"mt-24 flex-1 justify-center items-center text-center text-white max-lg:flex-col gap-14",children:jsxRuntimeExports.jsxs("h1",{children:["Go back to ",jsxRuntimeExports.jsxs(Link$2,{to:"/",children:[" ",jsxRuntimeExports.jsx("span",{className:"text-phlokkGreen",children:"Homepage"})]})]})})]});function ThankYou(){const{search:et}=useLocation(),dt=reactExports.useMemo(()=>new URLSearchParams(et).get("session_id"),[et]),[$t,kt]=reactExports.useState(null),[Tt,Dt]=reactExports.useState(!0);if(reactExports.useEffect(()=>{async function Jt(){var Zt;if(dt)try{const er=await axiosInstance.get(`/seller-checkout/downloads/${dt}/info`);(Zt=er.data)!=null&&Zt.success&&kt(er.data)}catch(er){console.error(" Failed to load delivery:",er)}finally{Dt(!1)}}Jt()},[dt]),Tt)return jsxRuntimeExports.jsx("main",{className:"min-h-screen flex items-center justify-center text-white",children:"Loading your purchase..."});if(!$t)return jsxRuntimeExports.jsx("main",{className:"min-h-screen flex items-center justify-center text-white",children:"No delivery record found."});const Ft=$t.download_url;let Ut=!1,Ht=!1,Kt=[];try{const Jt=JSON.parse(Ft);Array.isArray(Jt)&&(Ht=!0,Kt=Jt)}catch{Kt=[Ft]}(Ft.endsWith(".pdf")||Ft.includes(".pdf"))&&(Ut=!0);const Yt=Ut?`https://themessyattic.com/api/seller-checkout/downloads/${dt}/file`:null;return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#0b0b0b] text-white flex items-center justify-center px-6",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl font-bold",children:"Thank you for your purchase!"}),$t.cover_url&&jsxRuntimeExports.jsx("img",{src:$t.cover_url,className:"w-40 h-40 object-cover rounded-xl mx-auto mt-6 border border-white/10"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-lg font-semibold",children:$t.product_name}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-300",children:"Your download is ready."}),Ut&&jsxRuntimeExports.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-center gap-4",children:[jsxRuntimeExports.jsx("a",{href:Yt,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold text-black hover:opacity-90 transition",style:{backgroundColor:"#7bed9f"},download:!0,children:"Download PDF"}),jsxRuntimeExports.jsx("a",{href:Yt,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold border border-white/20 hover:bg-white/10 transition",children:"Open in New Tab"})]}),!Ut&&!Ht&&jsxRuntimeExports.jsx("div",{className:"mt-8",children:jsxRuntimeExports.jsx("a",{href:Kt[0],download:!0,className:"inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold text-black hover:opacity-90 transition",style:{backgroundColor:"#7bed9f"},children:"Download Audio"})}),Ht&&jsxRuntimeExports.jsxs("div",{className:"mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Album Tracks"}),Kt.map((Jt,Zt)=>jsxRuntimeExports.jsxs("a",{href:Jt,download:!0,className:"block text-left w-full bg-white/10 p-3 rounded mb-2 hover:bg-white/20 transition",children:["Track ",Zt+1]},Zt))]}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-xs text-slate-500",children:"Having trouble? Forward your receipt email to support and well help."})]})})}const Terms=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Terms and Conditions"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"These Terms and Conditions (Agreement) govern your access to and use of the The Messy Attic website, platform, and all related products and services (collectively, Services). By creating an account, making a purchase, or otherwise using our Services, you (User, you, or your) agree to be legally bound by this Agreement. If you do not agree, you must discontinue use of our Services immediately."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Ownership and License"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic owns and retains all rights, title, and interest in the Services, including all software, source code, algorithms, designs, trade secrets, and intellectual property. Your purchase provides a limited, non-transferable, non-exclusive license to use the Services for your personal or business needs in accordance with this Agreement. No ownership rights are transferred to you. Any attempt to copy, reverse-engineer, resell, or distribute the software or digital output without written permission is strictly prohibited."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Accounts and Membership"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You must be at least 18 years old to use our Services. You are responsible for providing accurate account information and maintaining the confidentiality of your login credentials. You are fully responsible for all activity that occurs under your account. We reserve the right to suspend or terminate accounts that provide false information, violate these terms, or attempt to bypass usage limits (including the maximum 25-page PDF limit per slot)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Custom Domains"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic may allow eligible users to connect and use a custom domain name with their landing pages and digital products. By adding a custom domain, you represent and warrant that you are the legal owner of the domain or have full authorization to use and control it. You grant The Messy Attic permission to route traffic, provision security certificates, and host content associated with the domain for the purpose of providing the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Custom domains are not activated until ownership has been verified through DNS configuration or other technical validation methods determined by The Messy Attic. We do not serve content on unverified domains. You are solely responsible for maintaining control of your domain and ensuring that it does not infringe upon trademarks, intellectual property rights, or applicable laws."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic reserves the right, in its sole discretion, to suspend, disable, or remove any custom domain that is used for unlawful activity, trademark infringement, impersonation, abuse, or violation of these Terms, without prior notice. Loss of access to a custom domain does not entitle you to a refund of subscription fees or credits."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Purchases and Payments"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All purchases, subscriptions, and credits made through our platform are final, as outlined in our Refund Policy. By making a purchase, you agree to provide valid and accurate payment details. We reserve the right to refuse or cancel any order suspected of fraud or unauthorized use. Pricing is subject to change at our discretion."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Seller Dashboard, Marketplace Sales, and Stripe Connect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["The Messy Attic provides tools that allow independent sellers to upload, price, and sell their digital products through their own landing pages using the Seller Dashboard. By becoming a seller, you acknowledge and agree to the following:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," All seller payments and payouts are processed through Stripe Connect, and sellers must maintain a valid Stripe Express account to receive funds.",jsxRuntimeExports.jsx("br",{})," The Messy Attic is a platform provider and is not the merchant of record for seller products. All digital items sold through landing pages are created and owned by the seller.",jsxRuntimeExports.jsx("br",{})," Sellers are fully responsible for the accuracy, legality, and quality of the digital products they provide, including PDFs, guides, templates, or any uploaded content.",jsxRuntimeExports.jsx("br",{})," All sales made through seller landing pages are final. Cre8tly Studio does not issue refunds for seller products and is not responsible for disputes between buyers and sellers.",jsxRuntimeExports.jsx("br",{})," In the event of a technical issue involving file delivery, Cre8tly Studio may assist in verifying delivery errors but is not required to modify, replace, or refund seller content.",jsxRuntimeExports.jsx("br",{})," Sellers are responsible for complying with all applicable laws, including taxes, content rights, and consumer protection regulations related to the digital products they offer.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Digital Products and Slots"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Lead magnet slots and generated PDFs are digital products licensed for your own use. You may not resell, redistribute, or use them for automated scraping or mass content generation beyond what is permitted by your plan. Slots cannot be exchanged, refunded, or rolled over once purchased. Misuse of slots, including attempts to exceed system safeguards, may result in account suspension without refund."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Prohibited Uses"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You may not use our Services for any unlawful purpose, to attempt unauthorized access to our systems, to exceed usage caps, to infringe on intellectual property rights, or to interfere with the operation of the Services, including connecting or attempting to use a custom domain without proper ownership or authorization. We reserve the right to suspend or terminate accounts engaged in abuse, fraud, or misuse."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Intellectual Property"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"All software, designs, branding, content, and related intellectual property are owned exclusively by The Messy Attic or its licensors. You may not reproduce, republish, modify, or exploit any part of the Services without our express written consent."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Disclaimer of Warranties"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Services are provided as is and as available without any warranties of any kind, express or implied. We do not guarantee that the Services will be uninterrupted, error-free, or suitable for your specific purpose. You assume full responsibility for your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Limitation of Liability"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"To the fullest extent permitted by law, The Messy Attic, its owners, employees, and affiliates shall not be liable for any indirect, incidental, consequential, or punitive damages, including but not limited to loss of profits, business interruption, or data loss, arising out of or related to your use of the Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to Terms"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may revise these Terms at any time by posting an updated version on our website. Continued use of the Services after updates constitutes acceptance of the revised Terms."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Governing Law"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Agreement shall be governed by and construed under the laws of Tennessee, United States, without regard to its conflict of law principles. Any disputes shall be resolved exclusively in the courts of Tennessee, United States."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions regarding these Terms and Conditions, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@themessyattic.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Privacy=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Privacy Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic respects your privacy and is committed to protecting it in accordance with this Privacy Policy (Policy). This Policy explains how we collect, use, and safeguard your personal information when you visit our website, purchase subscriptions or credits, or use any of our software services (Services)."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"By accessing or using The Messy Attic's Services, you acknowledge that you have read and understood this Policy and agree to its terms. If you do not agree, please do not use our Services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Information We Collect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may collect personal information you provide directly to us, such as:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Name and contact information (email, phone, billing address)",jsxRuntimeExports.jsx("br",{})," Account login details (if you create an account)",jsxRuntimeExports.jsx("br",{})," Payment and billing information (processed securely by third-party providers)",jsxRuntimeExports.jsx("br",{})," Prompts, themes, and preferences you submit to generate lead magnets or PDFs",jsxRuntimeExports.jsx("br",{})," Device and usage data (IP address, browser type, access times)",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"How We Use Your Information"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["We may use the information we collect for purposes including:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," To process payments and deliver your purchased slots or PDFs",jsxRuntimeExports.jsx("br",{})," To provide, operate, and improve our Services",jsxRuntimeExports.jsx("br",{})," To personalize your experience (themes, saved prompts)",jsxRuntimeExports.jsx("br",{})," To respond to customer inquiries and provide support",jsxRuntimeExports.jsx("br",{})," To send updates, promotional offers, or newsletters (with your consent)",jsxRuntimeExports.jsx("br",{})," To comply with legal obligations",jsxRuntimeExports.jsx("br",{})," To detect and prevent fraud or misuse of our Services",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Custom Domains and Technical Data"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you choose to connect a custom domain to your The Messy Attic account, we may process limited technical information related to that domain, such as the domain name, DNS configuration status, and connection metadata, for the sole purpose of verifying domain ownership, enabling secure connections, and providing the Services. We do not access, store, or control your domain registrar account."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Domain-related data is used strictly for operational and security purposes, including preventing unauthorized domain use, abuse, or misconfiguration, and is not shared with third parties except where required to provide secure infrastructure services or comply with legal obligations."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Payment Processing"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Payments for subscriptions, slots, or digital products are processed securely through third-party providers (such as Stripe). Cre8tly Studio does not store your full payment details. Payment providers may collect certain personal data in accordance with their own privacy policies, which we encourage you to review."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Seller Accounts and Stripe Connect"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["If you choose to become a seller on The Messy Attic, we may collect additional information necessary to operate your Seller Dashboard and process payments through Stripe Connect. This may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Name, email, and business details used for your Stripe Express account",jsxRuntimeExports.jsx("br",{})," Digital products, PDFs, images, and descriptions you upload to the platform",jsxRuntimeExports.jsx("br",{})," Pricing information, customer purchase data, and sales analytics",jsxRuntimeExports.jsx("br",{})," Transaction history and payout activity (visible to you, processed by Stripe)",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Stripe Connect handles identity verification, tax information, payout processing, and bank account details. The Messy Attic does not store your full financial or banking information. Any data collected by Stripe is governed by Stripes own privacy policy.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"When buyers purchase your digital products, limited information (such as the customers email) may be shared with you solely for product delivery or support. Sellers must use buyer information responsibly and in accordance with applicable privacy laws."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Seller Privacy and Data Handling Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Sellers on The Messy Attic are responsible for the handling, storage, and use of any customer information they receive through product purchases on their landing pages. By offering digital products as a seller, you agree to the following:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," You will only use customer information (such as name or email) for delivering the purchased digital product or providing requested support.",jsxRuntimeExports.jsx("br",{})," You may not sell, rent, share, export, or repurpose customer information for advertising, marketing, or any unrelated activity without explicit consent from the customer.",jsxRuntimeExports.jsx("br",{})," You are responsible for complying with all applicable privacy laws and data protection standards in your region, including but not limited to GDPR or CCPA where required.",jsxRuntimeExports.jsx("br",{})," You understand that The Messy Attic does not control or monitor how you use customer information after it has been provided to you. You are independently accountable for your actions as a seller.",jsxRuntimeExports.jsx("br",{})," Any misuse of customer data, including spam, unauthorized marketing, or failure to protect customer information, may result in suspension or termination of your Seller Dashboard access.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The Messy Attic does not provide legal advice to sellers. You are responsible for ensuring that your digital products and data practices comply with all applicable laws and platform requirements."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Cookies and Tracking"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"Our website may use cookies and similar technologies to improve your experience, analyze site traffic, and deliver personalized content. You can control cookie preferences through your browser settings."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Data Retention"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We will retain your personal information only for as long as necessary to fulfill the purposes outlined in this Policy, comply with legal obligations, resolve disputes, and enforce agreements. After this period, your data will be securely deleted or anonymized."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Your Rights"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["Depending on your location, you may have rights under applicable data protection laws (such as GDPR or CCPA). These may include:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," The right to access, correct, or delete your personal information",jsxRuntimeExports.jsx("br",{})," The right to object to processing or withdraw consent",jsxRuntimeExports.jsx("br",{})," The right to request data portability",jsxRuntimeExports.jsx("br",{})," The right to lodge a complaint with a data protection authority",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Childrens Privacy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"The Messy Attic does not knowingly collect personal information from children under the age of 18. If you believe we may have collected such information, please contact us immediately and we will delete it."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Security"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We implement reasonable technical and organizational measures to protect your personal information. However, no system can be 100% secure. You are responsible for maintaining the confidentiality of any account credentials and taking steps to protect your devices."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to This Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Privacy Policy from time to time. Updates will be posted on this page with a revised last updated date. Continued use of our Services after changes indicates acceptance of the revised Policy."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions, concerns, or requests regarding this Privacy Policy, please contact us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"privacy@themessyattic.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Refund=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Refund Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["At The Messy Attic, all purchases of subscriptions, credits, and lead magnet slots are final. Because our Services involve the instant creation and delivery of digital content,"," ",jsxRuntimeExports.jsx("strong",{children:"no refunds will be issued under any circumstances."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"All Sales Are Final"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["By completing a purchase, you acknowledge and agree that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," You are purchasing access to digital services and instantly usable content.",jsxRuntimeExports.jsx("br",{})," We do not provide refunds or exchanges for unused slots, cancelled accounts, or change of mind.",jsxRuntimeExports.jsx("br",{})," Errors caused by incorrect prompt entry, theme selection, or user setup are not eligible for refunds.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Seller Products and Landing Page Purchases"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:["The Messy Attic allows independent sellers to offer digital products such as PDFs, lead magnets, guides, and templates through their custom landing pages. When you purchase a digital product from a seller:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," All sales are final.",jsxRuntimeExports.jsx("br",{})," Digital product purchases are delivered instantly and are not eligible for refunds, returns, or exchanges.",jsxRuntimeExports.jsx("br",{})," The Messy Attic is not responsible for the sellers content, descriptions, or deliverables.",jsxRuntimeExports.jsx("br",{})," Any issues with the product should be addressed directly with the seller, although The Messy Attic may assist in reviewing technical problems involving file delivery.",jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Service Quality"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"While no refunds are available, if you experience a technical problem with your order (such as the PDF not generating correctly), please contact us. Our team will investigate and, where appropriate, provide a replacement or re-issue the digital content you purchased."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"For questions or technical support regarding your order, you can reach us at:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"support@themessyattic.com"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on August 26, 2025."}),jsxRuntimeExports.jsx("br",{})]})}),Cookie=()=>jsxRuntimeExports.jsx("div",{className:"padding",children:jsxRuntimeExports.jsxs("div",{className:"max-container",children:[jsxRuntimeExports.jsx("div",{className:"header-title-text",children:"Cookie Policy"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This Cookie Policy (Policy) explains how The Messy Attic (we, us, or our) uses cookies and similar technologies when you visit our website (Website) or use our related products and services (Services), including generating lead magnets, accessing customer dashboards, or making purchases. By using our Website, you agree to the use of cookies as described in this Policy. For details on how we handle personal data, please also review our Privacy Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Types of cookies we use"}),jsxRuntimeExports.jsxs("p",{className:"document-p-text",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Essential cookies"}),": Required for logging into your account, keeping sessions secure, processing payments, and generating your purchased lead magnets.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Preferences cookies"}),": Remember your settings (such as selected themes or region) to make your experience smoother.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Analytics cookies"}),": Help us understand how customers use dashboards, downloads, and checkout so we can improve our Services.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("strong",{children:"Marketing cookies"}),": May be used (if you opt in) to deliver personalized offers or measure the performance of ad campaigns."]}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Managing cookies"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"You can control or disable cookies in your browser settings. Please note that blocking essential cookies may prevent checkout, login, or access to your purchased lead magnets from working properly."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Changes to this Policy"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"We may update this Cookie Policy from time to time. Any updates will be posted on this page with a new last revised date. Continued use of our Website after changes means you accept the updated Policy."}),jsxRuntimeExports.jsx("h1",{className:"document-title-text",children:"Contact Us"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"If you have any questions about this Cookie Policy, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"legal@themessyattic.com"}),jsxRuntimeExports.jsx("p",{className:"document-p-text",children:"This document was last updated on October 3rd, 2025."}),jsxRuntimeExports.jsx("br",{})]})});/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=et=>et.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=et=>et.replace(/^([A-Z])|[\s-_]+(\w)/g,(dt,$t,kt)=>kt?kt.toUpperCase():$t.toLowerCase()),toPascalCase=et=>{const dt=toCamelCase(et);return dt.charAt(0).toUpperCase()+dt.slice(1)},mergeClasses=(...et)=>et.filter((dt,$t,kt)=>!!dt&&dt.trim()!==""&&kt.indexOf(dt)===$t).join(" ").trim(),hasA11yProp=et=>{for(const dt in et)if(dt.startsWith("aria-")||dt==="role"||dt==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes$1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:et="currentColor",size:dt=24,strokeWidth:$t=2,absoluteStrokeWidth:kt,className:Tt="",children:Dt,iconNode:Ft,...Ut},Ht)=>reactExports.createElement("svg",{ref:Ht,...defaultAttributes$1,width:dt,height:dt,stroke:et,strokeWidth:kt?Number($t)*24/Number(dt):$t,className:mergeClasses("lucide",Tt),...!Dt&&!hasA11yProp(Ut)&&{"aria-hidden":"true"},...Ut},[...Ft.map(([Kt,Yt])=>reactExports.createElement(Kt,Yt)),...Array.isArray(Dt)?Dt:[Dt]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(et,dt)=>{const $t=reactExports.forwardRef(({className:kt,...Tt},Dt)=>reactExports.createElement(Icon,{ref:Dt,iconNode:dt,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(et))}`,`lucide-${et}`,kt),...Tt}));return $t.displayName=toPascalCase(et),$t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1E=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Activity=createLucideIcon("activity",__iconNode$1E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1D=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$1D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1C=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$1C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1B=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Banknote=createLucideIcon("banknote",__iconNode$1B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1A=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],BellRing=createLucideIcon("bell-ring",__iconNode$1A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1z=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$1z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1y=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Bold$1=createLucideIcon("bold",__iconNode$1y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1x=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],BookOpenCheck=createLucideIcon("book-open-check",__iconNode$1x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1w=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$1w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1v=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Book=createLucideIcon("book",__iconNode$1v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1u=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Bookmark=createLucideIcon("bookmark",__iconNode$1u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1t=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$1t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1s=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ChartColumn=createLucideIcon("chart-column",__iconNode$1s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1r=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],ChartNoAxesColumn=createLucideIcon("chart-no-axes-column",__iconNode$1r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1q=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$1q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1p=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$1p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1o=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$1o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1n=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$1n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1m=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$1m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1l=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$1l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1k=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CircleQuestionMark=createLucideIcon("circle-question-mark",__iconNode$1k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1j=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$1j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1i=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],CloudUpload=createLucideIcon("cloud-upload",__iconNode$1i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1h=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Code$1=createLucideIcon("code",__iconNode$1h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1g=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Cog=createLucideIcon("cog",__iconNode$1g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1f=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$1f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1e=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],CreditCard=createLucideIcon("credit-card",__iconNode$1e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1d=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Crown=createLucideIcon("crown",__iconNode$1d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1c=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],DollarSign=createLucideIcon("dollar-sign",__iconNode$1c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1b=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$1b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1a=[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]],Ear=createLucideIcon("ear",__iconNode$1a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$19=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Ellipsis=createLucideIcon("ellipsis",__iconNode$19);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$18=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$18);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$17=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$17);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$16=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$16);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$15=[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]],Feather=createLucideIcon("feather",__iconNode$15);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$14=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],FilePen=createLucideIcon("file-pen",__iconNode$14);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$13=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$13);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$12=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$12);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$11=[["path",{d:"M11 14h2a2 2 0 0 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1v1a37"}],["path",{d:"m14.45 13.39 5.05-4.694C20.196 8 21 6.85 21 5.75a2.75 2.75 0 0 0-4.797-1.837.276.276 0 0 1-.406 0A2.75 2.75 0 0 0 11 5.75c0 1.2.802 2.248 1.5 2.946L16 11.95",key:"fhfbnt"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a1 1 0 0 0-2.75-2.91",key:"1x6kdw"}]],HandHeart=createLucideIcon("hand-heart",__iconNode$11);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$10=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Heart=createLucideIcon("heart",__iconNode$10);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$$=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],House=createLucideIcon("house",__iconNode$$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$2=createLucideIcon("image",__iconNode$_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Z=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Inbox$1=createLucideIcon("inbox",__iconNode$Z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Y=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$Y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$X=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Italic$1=createLucideIcon("italic",__iconNode$X);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$W=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],KeyRound=createLucideIcon("key-round",__iconNode$W);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$V=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],Landmark=createLucideIcon("landmark",__iconNode$V);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$U=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$U);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$T=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],LayoutTemplate=createLucideIcon("layout-template",__iconNode$T);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$S=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Link2=createLucideIcon("link-2",__iconNode$S);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$R=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Link$1=createLucideIcon("link",__iconNode$R);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$Q=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ListOrdered=createLucideIcon("list-ordered",__iconNode$Q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$P=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],List=createLucideIcon("list",__iconNode$P);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$O=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$O);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$N=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$N);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$M=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$M);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$L=[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],MailCheck=createLucideIcon("mail-check",__iconNode$L);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$K=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$J=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$I=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],MessageCircleQuestionMark=createLucideIcon("message-circle-question-mark",__iconNode$I);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],MessageCircle=createLucideIcon("message-circle",__iconNode$H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"M22 8.5V5a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v16.286a.71.71 0 0 0 1.212.502l2.202-2.202A2 2 0 0 1 6.828 19H10",key:"fu6chl"}],["path",{d:"M20 15v-2a2 2 0 0 0-4 0v2",key:"vl8a78"}],["rect",{x:"14",y:"15",width:"8",height:"5",rx:"1",key:"37aafw"}]],MessageSquareLock=createLucideIcon("message-square-lock",__iconNode$G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],MessageSquare=createLucideIcon("message-square",__iconNode$F);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],MessagesSquare=createLucideIcon("messages-square",__iconNode$E);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M5 12h14",key:"1ays0h"}]],Minus=createLucideIcon("minus",__iconNode$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Moon=createLucideIcon("moon",__iconNode$C);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],MousePointerClick=createLucideIcon("mouse-pointer-click",__iconNode$B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],PanelsTopLeft=createLucideIcon("panels-top-left",__iconNode$A);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],PenLine=createLucideIcon("pen-line",__iconNode$z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],PenTool=createLucideIcon("pen-tool",__iconNode$y);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$w);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Repeat=createLucideIcon("repeat",__iconNode$v);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["path",{d:"M14 4a2 2 0 0 1 2-2",key:"1w2hp7"}],["path",{d:"M16 10a2 2 0 0 1-2-2",key:"shjach"}],["path",{d:"M20 2a2 2 0 0 1 2 2",key:"188mtx"}],["path",{d:"M22 8a2 2 0 0 1-2 2",key:"ddf4tu"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5a3 3 0 0 1 3-3h1",key:"3y3t5z"}],["rect",{x:"2",y:"14",width:"8",height:"8",rx:"2",key:"4rksxw"}]],Replace=createLucideIcon("replace",__iconNode$u);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Rocket=createLucideIcon("rocket",__iconNode$t);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$s);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$r);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Share2=createLucideIcon("share-2",__iconNode$p);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ShieldCheck=createLucideIcon("shield-check",__iconNode$o);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ShieldQuestionMark=createLucideIcon("shield-question-mark",__iconNode$n);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$m);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}],["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}]],SquarePlay=createLucideIcon("square-play",__iconNode$l);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Star=createLucideIcon("star",__iconNode$k);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],TextAlignCenter=createLucideIcon("text-align-center",__iconNode$i);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],TextAlignEnd=createLucideIcon("text-align-end",__iconNode$h);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],TextAlignStart=createLucideIcon("text-align-start",__iconNode$g);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Timer=createLucideIcon("timer",__iconNode$f);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash=createLucideIcon("trash",__iconNode$d);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$b);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Type=createLucideIcon("type",__iconNode$a);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],Unlink=createLucideIcon("unlink",__iconNode$9);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$8);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$7);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],WandSparkles=createLucideIcon("wand-sparkles",__iconNode$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Workflow=createLucideIcon("workflow",__iconNode$4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$5=createLucideIcon("x",__iconNode$3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode$2);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomIn=createLucideIcon("zoom-in",__iconNode$1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ZoomOut=createLucideIcon("zoom-out",__iconNode),headerLogo="/assets/themessyattic-logo-adb8bd55.svg",landing="/assets/landing-2fb13e19.webp",blocks="/assets/blocks-78cb89c6.webp",downLoadFeature="/assets/download-feature-52486457.webp",stripeCheckout="/assets/stripe-checkout-4bb3f659.webp",versions="/assets/versions-8ffb9da6.webp",containers="/assets/containers-aef4f254.webp",offer="/assets/offer-f052c9e6.webp",customBranding="/assets/custom-branding-cbb1ed9c.webp",landingPreview="/assets/landing-page-preview-5ea55918.webp",blockFeatures="/assets/block-features-294072f8.webp",blockConversion="/assets/block-conversion-7bc01fb2.webp",secureCheckout="/assets/secure-checkout-a620c5b5.webp",audioPlayer="/assets/audio-player-660b6a61.webp",freeSubDomain="/assets/subdomain-f7ee7110.webp",tools="/assets/tools-3fb83eed.webp",defaultImage="/assets/userImage-def15e8d.png",defaultBrandLogo="/assets/defaultBrandLogo-d1c01baa.webp",bookFeature="/assets/white-author-cd108d4c.webp",aiCopy="/assets/ai-copy-landing-d8ff8e51.webp";function SignupPage(){const{login:et}=useAuth(),[dt,$t]=reactExports.useState(!1),kt=useNavigate(),[Tt,Dt]=reactExports.useState({name:"",email:"",username:"",password:""}),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(""),[Yt]=useSearchParams(),Jt=Yt.get("ref");reactExports.useEffect(()=>{if(Ht){const rr=setTimeout(()=>Kt(""),5e3);return()=>clearTimeout(rr)}},[Ht]);const Zt=rr=>{const{name:sr,value:nr}=rr.target;Dt({...Tt,[sr]:sr==="username"?nr.toLowerCase():nr})},er=async rr=>{var sr,nr;rr.preventDefault(),Ut(!0),Kt("");try{const ir=Tt.username.trim();if(!/^[a-zA-Z0-9_]{3,20}$/.test(ir)){Kt("Username must be 320 characters and contain only letters, numbers, or underscores."),Ut(!1);return}const or={name:Tt.name,email:Tt.email,password:Tt.password,username:ir,...Jt&&{refSlug:Jt}},lr=await axios$1.post("https://themessyattic.com/api/auth/signup",or);lr.status===201?(await et(Tt.email,Tt.password),kt("/community")):Kt(lr.data.message||"Something went wrong")}catch(ir){(nr=(sr=ir.response)==null?void 0:sr.data)!=null&&nr.message?Kt(ir.response.data.message):Kt("Signup failed. Please try again later.")}finally{Ut(!1)}};return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-5",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Create your account"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"font-semibold hover:underline",children:"Log in"})]})]}),Ht&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-700",children:Ht}),jsxRuntimeExports.jsxs("form",{onSubmit:er,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:Tt.name,onChange:Zt,placeholder:"Full Name",required:!0,className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",value:Tt.username,onChange:Zt,placeholder:"Username",required:!0,autoComplete:"username",className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"320 characters, letters, numbers, underscores only"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Tt.email,onChange:Zt,placeholder:"Email Address",required:!0,className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:Tt.password,onChange:Zt,placeholder:"Password",required:!0,className:`
                w-full h-[48px] px-4 py-3 pr-12 rounded-lg
                bg-white
                border border-gray-300
                text-gray-900
                placeholder-gray-400
                focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
              `}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":dt?"Hide password":"Show password",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ft,className:`
              w-full bg-black text-white
              font-semibold py-3 rounded-lg
              hover:opacity-90 transition
            `,children:Ft?"Creating Account...":"Get Started"})]})]})})})}var i$6=Object.defineProperty,d$2=(et,dt,$t)=>dt in et?i$6(et,dt,{enumerable:!0,configurable:!0,writable:!0,value:$t}):et[dt]=$t,r$2=(et,dt,$t)=>(d$2(et,typeof dt!="symbol"?dt+"":dt,$t),$t);let o$5=class{constructor(){r$2(this,"current",this.detect()),r$2(this,"handoffState","pending"),r$2(this,"currentId",0)}set(dt){this.current!==dt&&(this.handoffState="pending",this.currentId=0,this.current=dt)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$4=new o$5;function t$2(et){typeof queueMicrotask=="function"?queueMicrotask(et):Promise.resolve().then(et).catch(dt=>setTimeout(()=>{throw dt}))}function o$4(){let et=[],dt={addEventListener($t,kt,Tt,Dt){return $t.addEventListener(kt,Tt,Dt),dt.add(()=>$t.removeEventListener(kt,Tt,Dt))},requestAnimationFrame(...$t){let kt=requestAnimationFrame(...$t);return dt.add(()=>cancelAnimationFrame(kt))},nextFrame(...$t){return dt.requestAnimationFrame(()=>dt.requestAnimationFrame(...$t))},setTimeout(...$t){let kt=setTimeout(...$t);return dt.add(()=>clearTimeout(kt))},microTask(...$t){let kt={current:!0};return t$2(()=>{kt.current&&$t[0]()}),dt.add(()=>{kt.current=!1})},style($t,kt,Tt){let Dt=$t.style.getPropertyValue(kt);return Object.assign($t.style,{[kt]:Tt}),this.add(()=>{Object.assign($t.style,{[kt]:Dt})})},group($t){let kt=o$4();return $t(kt),this.add(()=>kt.dispose())},add($t){return et.includes($t)||et.push($t),()=>{let kt=et.indexOf($t);if(kt>=0)for(let Tt of et.splice(kt,1))Tt()}},dispose(){for(let $t of et.splice(0))$t()}};return dt}function p$3(){let[et]=reactExports.useState(o$4);return reactExports.useEffect(()=>()=>et.dispose(),[et]),et}let n$2=(et,dt)=>{s$4.isServer?reactExports.useEffect(et,dt):reactExports.useLayoutEffect(et,dt)};function s$3(et){let dt=reactExports.useRef(et);return n$2(()=>{dt.current=et},[et]),dt}let o$3=function(et){let dt=s$3(et);return React$2.useCallback((...$t)=>dt.current(...$t),[dt])};function t$1(...et){return Array.from(new Set(et.flatMap(dt=>typeof dt=="string"?dt.split(" "):[]))).filter(Boolean).join(" ")}function u$5(et,dt,...$t){if(et in dt){let Tt=dt[et];return typeof Tt=="function"?Tt(...$t):Tt}let kt=new Error(`Tried to handle "${et}" but there is no handler defined. Only defined handlers are: ${Object.keys(dt).map(Tt=>`"${Tt}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(kt,u$5),kt}var O$6=(et=>(et[et.None=0]="None",et[et.RenderStrategy=1]="RenderStrategy",et[et.Static=2]="Static",et))(O$6||{}),A$6=(et=>(et[et.Unmount=0]="Unmount",et[et.Hidden=1]="Hidden",et))(A$6||{});function L$7(){let et=U$3();return reactExports.useCallback(dt=>C$7({mergeRefs:et,...dt}),[et])}function C$7({ourProps:et,theirProps:dt,slot:$t,defaultTag:kt,features:Tt,visible:Dt=!0,name:Ft,mergeRefs:Ut}){Ut=Ut??$$2;let Ht=P$4(dt,et);if(Dt)return F$2(Ht,$t,kt,Ft,Ut);let Kt=Tt??0;if(Kt&2){let{static:Yt=!1,...Jt}=Ht;if(Yt)return F$2(Jt,$t,kt,Ft,Ut)}if(Kt&1){let{unmount:Yt=!0,...Jt}=Ht;return u$5(Yt?0:1,{0(){return null},1(){return F$2({...Jt,hidden:!0,style:{display:"none"}},$t,kt,Ft,Ut)}})}return F$2(Ht,$t,kt,Ft,Ut)}function F$2(et,dt={},$t,kt,Tt){let{as:Dt=$t,children:Ft,refName:Ut="ref",...Ht}=h$2(et,["unmount","static"]),Kt=et.ref!==void 0?{[Ut]:et.ref}:{},Yt=typeof Ft=="function"?Ft(dt):Ft;"className"in Ht&&Ht.className&&typeof Ht.className=="function"&&(Ht.className=Ht.className(dt)),Ht["aria-labelledby"]&&Ht["aria-labelledby"]===Ht.id&&(Ht["aria-labelledby"]=void 0);let Jt={};if(dt){let Zt=!1,er=[];for(let[rr,sr]of Object.entries(dt))typeof sr=="boolean"&&(Zt=!0),sr===!0&&er.push(rr.replace(/([A-Z])/g,nr=>`-${nr.toLowerCase()}`));if(Zt){Jt["data-headlessui-state"]=er.join(" ");for(let rr of er)Jt[`data-${rr}`]=""}}if(Dt===reactExports.Fragment&&(Object.keys(m$2(Ht)).length>0||Object.keys(m$2(Jt)).length>0))if(!reactExports.isValidElement(Yt)||Array.isArray(Yt)&&Yt.length>1){if(Object.keys(m$2(Ht)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${kt} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$2(Ht)).concat(Object.keys(m$2(Jt))).map(Zt=>`  - ${Zt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(Zt=>`  - ${Zt}`).join(`
`)].join(`
`))}else{let Zt=Yt.props,er=Zt==null?void 0:Zt.className,rr=typeof er=="function"?(...ir)=>t$1(er(...ir),Ht.className):t$1(er,Ht.className),sr=rr?{className:rr}:{},nr=P$4(Yt.props,m$2(h$2(Ht,["ref"])));for(let ir in Jt)ir in nr&&delete Jt[ir];return reactExports.cloneElement(Yt,Object.assign({},nr,Jt,Kt,{ref:Tt(H$1(Yt),Kt.ref)},sr))}return reactExports.createElement(Dt,Object.assign({},h$2(Ht,["ref"]),Dt!==reactExports.Fragment&&Kt,Dt!==reactExports.Fragment&&Jt),Yt)}function U$3(){let et=reactExports.useRef([]),dt=reactExports.useCallback($t=>{for(let kt of et.current)kt!=null&&(typeof kt=="function"?kt($t):kt.current=$t)},[]);return(...$t)=>{if(!$t.every(kt=>kt==null))return et.current=$t,dt}}function $$2(...et){return et.every(dt=>dt==null)?void 0:dt=>{for(let $t of et)$t!=null&&(typeof $t=="function"?$t(dt):$t.current=dt)}}function P$4(...et){if(et.length===0)return{};if(et.length===1)return et[0];let dt={},$t={};for(let kt of et)for(let Tt in kt)Tt.startsWith("on")&&typeof kt[Tt]=="function"?($t[Tt]!=null||($t[Tt]=[]),$t[Tt].push(kt[Tt])):dt[Tt]=kt[Tt];if(dt.disabled||dt["aria-disabled"])for(let kt in $t)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(kt)&&($t[kt]=[Tt=>{var Dt;return(Dt=Tt==null?void 0:Tt.preventDefault)==null?void 0:Dt.call(Tt)}]);for(let kt in $t)Object.assign(dt,{[kt](Tt,...Dt){let Ft=$t[kt];for(let Ut of Ft){if((Tt instanceof Event||(Tt==null?void 0:Tt.nativeEvent)instanceof Event)&&Tt.defaultPrevented)return;Ut(Tt,...Dt)}}});return dt}function K$2(et){var dt;return Object.assign(reactExports.forwardRef(et),{displayName:(dt=et.displayName)!=null?dt:et.name})}function m$2(et){let dt=Object.assign({},et);for(let $t in dt)dt[$t]===void 0&&delete dt[$t];return dt}function h$2(et,dt=[]){let $t=Object.assign({},et);for(let kt of dt)kt in $t&&delete $t[kt];return $t}function H$1(et){return React$2.version.split(".")[0]>="19"?et.props.ref:et.ref}let u$4=Symbol();function y$3(...et){let dt=reactExports.useRef(et);reactExports.useEffect(()=>{dt.current=et},[et]);let $t=o$3(kt=>{for(let Tt of dt.current)Tt!=null&&(typeof Tt=="function"?Tt(kt):Tt.current=kt)});return et.every(kt=>kt==null||(kt==null?void 0:kt[u$4]))?void 0:$t}function c$5(et=0){let[dt,$t]=reactExports.useState(et),kt=reactExports.useCallback(Ht=>$t(Ht),[dt]),Tt=reactExports.useCallback(Ht=>$t(Kt=>Kt|Ht),[dt]),Dt=reactExports.useCallback(Ht=>(dt&Ht)===Ht,[dt]),Ft=reactExports.useCallback(Ht=>$t(Kt=>Kt&~Ht),[$t]),Ut=reactExports.useCallback(Ht=>$t(Kt=>Kt^Ht),[$t]);return{flags:dt,setFlag:kt,addFlag:Tt,hasFlag:Dt,removeFlag:Ft,toggleFlag:Ut}}var T$4,b$6;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((T$4=process==null?void 0:process.env)==null?void 0:T$4.NODE_ENV)==="test"&&typeof((b$6=Element==null?void 0:Element.prototype)==null?void 0:b$6.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var L$6=(et=>(et[et.None=0]="None",et[et.Closed=1]="Closed",et[et.Enter=2]="Enter",et[et.Leave=4]="Leave",et))(L$6||{});function R$3(et){let dt={};for(let $t in et)et[$t]===!0&&(dt[`data-${$t}`]="");return dt}function x$1(et,dt,$t,kt){let[Tt,Dt]=reactExports.useState($t),{hasFlag:Ft,addFlag:Ut,removeFlag:Ht}=c$5(et&&Tt?3:0),Kt=reactExports.useRef(!1),Yt=reactExports.useRef(!1),Jt=p$3();return n$2(()=>{var Zt;if(et){if($t&&Dt(!0),!dt){$t&&Ut(3);return}return(Zt=kt==null?void 0:kt.start)==null||Zt.call(kt,$t),C$6(dt,{inFlight:Kt,prepare(){Yt.current?Yt.current=!1:Yt.current=Kt.current,Kt.current=!0,!Yt.current&&($t?(Ut(3),Ht(4)):(Ut(4),Ht(2)))},run(){Yt.current?$t?(Ht(3),Ut(4)):(Ht(4),Ut(3)):$t?Ht(1):Ut(1)},done(){var er;Yt.current&&typeof dt.getAnimations=="function"&&dt.getAnimations().length>0||(Kt.current=!1,Ht(7),$t||Dt(!1),(er=kt==null?void 0:kt.end)==null||er.call(kt,$t))}})}},[et,$t,dt,Jt]),et?[Tt,{closed:Ft(1),enter:Ft(2),leave:Ft(4),transition:Ft(2)||Ft(4)}]:[$t,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function C$6(et,{prepare:dt,run:$t,done:kt,inFlight:Tt}){let Dt=o$4();return j$6(et,{prepare:dt,inFlight:Tt}),Dt.nextFrame(()=>{$t(),Dt.requestAnimationFrame(()=>{Dt.add(M$5(et,kt))})}),Dt.dispose}function M$5(et,dt){var $t,kt;let Tt=o$4();if(!et)return Tt.dispose;let Dt=!1;Tt.add(()=>{Dt=!0});let Ft=(kt=($t=et.getAnimations)==null?void 0:$t.call(et).filter(Ut=>Ut instanceof CSSTransition))!=null?kt:[];return Ft.length===0?(dt(),Tt.dispose):(Promise.allSettled(Ft.map(Ut=>Ut.finished)).then(()=>{Dt||dt()}),Tt.dispose)}function j$6(et,{inFlight:dt,prepare:$t}){if(dt!=null&&dt.current){$t();return}let kt=et.style.transition;et.style.transition="none",$t(),et.offsetHeight,et.style.transition=kt}let n$1=reactExports.createContext(null);n$1.displayName="OpenClosedContext";var i$5=(et=>(et[et.Open=1]="Open",et[et.Closed=2]="Closed",et[et.Closing=4]="Closing",et[et.Opening=8]="Opening",et))(i$5||{});function u$3(){return reactExports.useContext(n$1)}function c$4({value:et,children:dt}){return React$2.createElement(n$1.Provider,{value:et},dt)}function s$2(){let et=typeof document>"u";return"useSyncExternalStore"in t$3?(dt=>dt.useSyncExternalStore)(t$3)(()=>()=>{},()=>!1,()=>!et):!1}function l$1(){let et=s$2(),[dt,$t]=reactExports.useState(s$4.isHandoffComplete);return dt&&s$4.isHandoffComplete===!1&&$t(!1),reactExports.useEffect(()=>{dt!==!0&&$t(!0)},[dt]),reactExports.useEffect(()=>s$4.handoff(),[]),et?!1:dt}function f(){let et=reactExports.useRef(!1);return n$2(()=>(et.current=!0,()=>{et.current=!1}),[]),et}function ue$2(et){var dt;return!!(et.enter||et.enterFrom||et.enterTo||et.leave||et.leaveFrom||et.leaveTo)||((dt=et.as)!=null?dt:de$2)!==reactExports.Fragment||React$2.Children.count(et.children)===1}let w$6=reactExports.createContext(null);w$6.displayName="TransitionContext";var _e$1=(et=>(et.Visible="visible",et.Hidden="hidden",et))(_e$1||{});function De$2(){let et=reactExports.useContext(w$6);if(et===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return et}function He$2(){let et=reactExports.useContext(M$4);if(et===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return et}let M$4=reactExports.createContext(null);M$4.displayName="NestingContext";function U$2(et){return"children"in et?U$2(et.children):et.current.filter(({el:dt})=>dt.current!==null).filter(({state:dt})=>dt==="visible").length>0}function Te$2(et,dt){let $t=s$3(et),kt=reactExports.useRef([]),Tt=f(),Dt=p$3(),Ft=o$3((er,rr=A$6.Hidden)=>{let sr=kt.current.findIndex(({el:nr})=>nr===er);sr!==-1&&(u$5(rr,{[A$6.Unmount](){kt.current.splice(sr,1)},[A$6.Hidden](){kt.current[sr].state="hidden"}}),Dt.microTask(()=>{var nr;!U$2(kt)&&Tt.current&&((nr=$t.current)==null||nr.call($t))}))}),Ut=o$3(er=>{let rr=kt.current.find(({el:sr})=>sr===er);return rr?rr.state!=="visible"&&(rr.state="visible"):kt.current.push({el:er,state:"visible"}),()=>Ft(er,A$6.Unmount)}),Ht=reactExports.useRef([]),Kt=reactExports.useRef(Promise.resolve()),Yt=reactExports.useRef({enter:[],leave:[]}),Jt=o$3((er,rr,sr)=>{Ht.current.splice(0),dt&&(dt.chains.current[rr]=dt.chains.current[rr].filter(([nr])=>nr!==er)),dt==null||dt.chains.current[rr].push([er,new Promise(nr=>{Ht.current.push(nr)})]),dt==null||dt.chains.current[rr].push([er,new Promise(nr=>{Promise.all(Yt.current[rr].map(([ir,or])=>or)).then(()=>nr())})]),rr==="enter"?Kt.current=Kt.current.then(()=>dt==null?void 0:dt.wait.current).then(()=>sr(rr)):sr(rr)}),Zt=o$3((er,rr,sr)=>{Promise.all(Yt.current[rr].splice(0).map(([nr,ir])=>ir)).then(()=>{var nr;(nr=Ht.current.shift())==null||nr()}).then(()=>sr(rr))});return reactExports.useMemo(()=>({children:kt,register:Ut,unregister:Ft,onStart:Jt,onStop:Zt,wait:Kt,chains:Yt}),[Ut,Ft,kt,Jt,Zt,Yt,Kt])}let de$2=reactExports.Fragment,fe$2=O$6.RenderStrategy;function Ae$1(et,dt){var $t,kt;let{transition:Tt=!0,beforeEnter:Dt,afterEnter:Ft,beforeLeave:Ut,afterLeave:Ht,enter:Kt,enterFrom:Yt,enterTo:Jt,entered:Zt,leave:er,leaveFrom:rr,leaveTo:sr,...nr}=et,[ir,or]=reactExports.useState(null),lr=reactExports.useRef(null),cr=ue$2(et),dr=y$3(...cr?[lr,dt,or]:dt===null?[]:[dt]),ur=($t=nr.unmount)==null||$t?A$6.Unmount:A$6.Hidden,{show:pr,appear:mr,initial:jr}=De$2(),[Rr,xr]=reactExports.useState(pr?"visible":"hidden"),kr=He$2(),{register:Mr,unregister:Tr}=kr;n$2(()=>Mr(lr),[Mr,lr]),n$2(()=>{if(ur===A$6.Hidden&&lr.current){if(pr&&Rr!=="visible"){xr("visible");return}return u$5(Rr,{hidden:()=>Tr(lr),visible:()=>Mr(lr)})}},[Rr,lr,Mr,Tr,pr,ur]);let Or=l$1();n$2(()=>{if(cr&&Or&&Rr==="visible"&&lr.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[lr,Rr,Or,cr]);let _r=jr&&!mr,Pr=mr&&pr&&jr,br=reactExports.useRef(!1),wr=Te$2(()=>{br.current||(xr("hidden"),Tr(lr))},kr),zr=o$3(ns=>{br.current=!0;let gs=ns?"enter":"leave";wr.onStart(lr,gs,us=>{us==="enter"?Dt==null||Dt():us==="leave"&&(Ut==null||Ut())})}),Hr=o$3(ns=>{let gs=ns?"enter":"leave";br.current=!1,wr.onStop(lr,gs,us=>{us==="enter"?Ft==null||Ft():us==="leave"&&(Ht==null||Ht())}),gs==="leave"&&!U$2(wr)&&(xr("hidden"),Tr(lr))});reactExports.useEffect(()=>{cr&&Tt||(zr(pr),Hr(pr))},[pr,cr,Tt]);let Yr=(()=>!(!Tt||!cr||!Or||_r))(),[,es]=x$1(Yr,ir,pr,{start:zr,end:Hr}),rs=m$2({ref:dr,className:((kt=t$1(nr.className,Pr&&Kt,Pr&&Yt,es.enter&&Kt,es.enter&&es.closed&&Yt,es.enter&&!es.closed&&Jt,es.leave&&er,es.leave&&!es.closed&&rr,es.leave&&es.closed&&sr,!es.transition&&pr&&Zt))==null?void 0:kt.trim())||void 0,...R$3(es)}),Wr=0;Rr==="visible"&&(Wr|=i$5.Open),Rr==="hidden"&&(Wr|=i$5.Closed),es.enter&&(Wr|=i$5.Opening),es.leave&&(Wr|=i$5.Closing);let Xr=L$7();return React$2.createElement(M$4.Provider,{value:wr},React$2.createElement(c$4,{value:Wr},Xr({ourProps:rs,theirProps:nr,defaultTag:de$2,features:fe$2,visible:Rr==="visible",name:"Transition.Child"})))}function Ie$1(et,dt){let{show:$t,appear:kt=!1,unmount:Tt=!0,...Dt}=et,Ft=reactExports.useRef(null),Ut=ue$2(et),Ht=y$3(...Ut?[Ft,dt]:dt===null?[]:[dt]);l$1();let Kt=u$3();if($t===void 0&&Kt!==null&&($t=(Kt&i$5.Open)===i$5.Open),$t===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Yt,Jt]=reactExports.useState($t?"visible":"hidden"),Zt=Te$2(()=>{$t||Jt("hidden")}),[er,rr]=reactExports.useState(!0),sr=reactExports.useRef([$t]);n$2(()=>{er!==!1&&sr.current[sr.current.length-1]!==$t&&(sr.current.push($t),rr(!1))},[sr,$t]);let nr=reactExports.useMemo(()=>({show:$t,appear:kt,initial:er}),[$t,kt,er]);n$2(()=>{$t?Jt("visible"):!U$2(Zt)&&Ft.current!==null&&Jt("hidden")},[$t,Zt]);let ir={unmount:Tt},or=o$3(()=>{var dr;er&&rr(!1),(dr=et.beforeEnter)==null||dr.call(et)}),lr=o$3(()=>{var dr;er&&rr(!1),(dr=et.beforeLeave)==null||dr.call(et)}),cr=L$7();return React$2.createElement(M$4.Provider,{value:Zt},React$2.createElement(w$6.Provider,{value:nr},cr({ourProps:{...ir,as:reactExports.Fragment,children:React$2.createElement(me$2,{ref:Ht,...ir,...Dt,beforeEnter:or,beforeLeave:lr})},theirProps:{},defaultTag:reactExports.Fragment,features:fe$2,visible:Yt==="visible",name:"Transition"})))}function Le$1(et,dt){let $t=reactExports.useContext(w$6)!==null,kt=u$3()!==null;return React$2.createElement(React$2.Fragment,null,!$t&&kt?React$2.createElement(X$4,{ref:dt,...et}):React$2.createElement(me$2,{ref:dt,...et}))}let X$4=K$2(Ie$1),me$2=K$2(Ae$1),Fe$2=K$2(Le$1),ze$1=Object.assign(X$4,{Child:Fe$2,Root:X$4});const navLinks=[{href:"/",label:"Home"},{href:"/sign-up",label:"Sign Up"},{href:"/contact",label:"Contact Us"},{href:"/shop",label:"Shop"},{href:"/login",label:"Login"}],colorThemes=[{name:"ivory",label:"Ivory",preview:"#fefce8"},{name:"cream",label:"Cream",preview:"#fef9c3"},{name:"classic",label:"Classic",preview:"#fffaf5"},{name:"platinum",label:"Platinum",preview:"#f3f4f6"},{name:"modern",label:"Modern",preview:"#e2e8f0"},{name:"fog",label:"Fog",preview:"#cbd5e1"},{name:"stone",label:"Stone",preview:"#d6d3d1"},{name:"smoke",label:"Smoke",preview:"#737373"},{name:"storm",label:"Storm",preview:"#64748b"},{name:"steel",label:"Steel",preview:"#475569"},{name:"slate",label:"Slate",preview:"#334155"},{name:"graphite",label:"Graphite",preview:"#1f2937"},{name:"midnight",label:"Midnight",preview:"#1e293b"},{name:"carbon",label:"Carbon",preview:"#1e293b"},{name:"charcoal",label:"Charcoal",preview:"#111827"},{name:"onyx",label:"Onyx",preview:"#0f172a"},{name:"shadow",label:"Shadow",preview:"#171717"},{name:"jet",label:"Jet",preview:"#0a0a0a"},{name:"dark",label:"Dark",preview:"#030712"},{name:"ice",label:"Ice",preview:"#e0f2fe"},{name:"arcticBlue",label:"Arctic Blue",preview:"#7dd3fc"},{name:"ocean",label:"Ocean",preview:"#bae6fd"},{name:"arctic",label:"Arctic",preview:"#bae6fd"},{name:"sky",label:"Sky",preview:"#60a5fa"},{name:"aqua",label:"Aqua",preview:"#0ea5e9"},{name:"periwinkle",label:"Periwinkle",preview:"#a5b4fc"},{name:"iris",label:"Iris",preview:"#6366f1"},{name:"denim",label:"Denim",preview:"#1d4ed8"},{name:"navy",label:"Navy",preview:"#1e3a8a"},{name:"bold",label:"Bold",preview:"#f9e8ff"},{name:"orchid",label:"Orchid",preview:"#d8b4fe"},{name:"lavender",label:"Lavender",preview:"#c084fc"},{name:"berry",label:"Berry",preview:"#7e22ce"},{name:"ultraviolet",label:"Ultraviolet",preview:"#6d28d9"},{name:"velvet",label:"Velvet",preview:"#581c87"},{name:"royal",label:"Royal",preview:"#2E026D"},{name:"rose",label:"Rose",preview:"#fce7f3"},{name:"blush",label:"Blush",preview:"#fecdd3"},{name:"coral",label:"Coral",preview:"#fb7185"},{name:"candy",label:"Candy",preview:"#ec4899"},{name:"ruby",label:"Ruby",preview:"#be123c"},{name:"cherry",label:"Cherry",preview:"#991b1b"},{name:"wine",label:"Wine",preview:"#7f1d1d"},{name:"rosewood",label:"Rosewood",preview:"#4a0404"},{name:"sand",label:"Sand",preview:"#fcd34d"},{name:"honey",label:"Honey",preview:"#facc15"},{name:"amber",label:"Amber",preview:"#fbbf24"},{name:"gold",label:"Gold",preview:"#f59e0b"},{name:"sunrise",label:"Sunrise",preview:"#fed7aa"},{name:"sunset",label:"Sunset",preview:"#fb923c"},{name:"peach",label:"Peach",preview:"#f97316"},{name:"tangerine",label:"Tangerine",preview:"#f97316"},{name:"copper",label:"Copper",preview:"#b45309"},{name:"bronze",label:"Bronze",preview:"#78350f"},{name:"wineGold",label:"Wine Gold",preview:"#854d0e"},{name:"mintCream",label:"Mint Cream",preview:"#dcfce7"},{name:"mint",label:"Mint",preview:"#d1fae5"},{name:"opal",label:"Opal",preview:"#a7f3d0"},{name:"emerald",label:"Emerald",preview:"#10b981"},{name:"teal",label:"Teal",preview:"#0d9488"},{name:"forest",label:"Forest",preview:"#065f46"},{name:"pine",label:"Pine",preview:"#064e3b"},{name:"moss",label:"Moss",preview:"#14532d"},{name:"coffee",label:"Coffee",preview:"#6b4f4f"},{name:"mocha",label:"Mocha",preview:"#78350f"}],gradientThemes=[{name:"gradientIvory",label:"Gradient Ivory",preview:"linear-gradient(135deg, #fefce8, #fef9c3)"},{name:"gradientCream",label:"Gradient Cream",preview:"linear-gradient(135deg, #fef9c3, #fde68a)"},{name:"gradientClassic",label:"Gradient Classic",preview:"linear-gradient(135deg, #fffaf5, #fde68a)"},{name:"gradientPlatinum",label:"Gradient Platinum",preview:"linear-gradient(135deg, #f3f4f6, #e5e7eb)"},{name:"gradientModern",label:"Gradient Modern",preview:"linear-gradient(135deg, #e2e8f0, #94a3b8)"},{name:"gradientFog",label:"Gradient Fog",preview:"linear-gradient(135deg, #cbd5e1, #94a3b8)"},{name:"gradientStone",label:"Gradient Stone",preview:"linear-gradient(135deg, #d6d3d1, #e7e5e4)"},{name:"gradientSmoke",label:"Gradient Smoke",preview:"linear-gradient(135deg, #737373, #a3a3a3)"},{name:"gradientStorm",label:"Gradient Storm",preview:"linear-gradient(135deg, #64748b, #475569)"},{name:"gradientSteel",label:"Gradient Steel",preview:"linear-gradient(135deg, #475569, #94a3b8)"},{name:"gradientSlate",label:"Gradient Slate",preview:"linear-gradient(135deg, #334155, #475569)"},{name:"gradientGraphite",label:"Gradient Graphite",preview:"linear-gradient(135deg, #1f2937, #4b5563)"},{name:"gradientCarbon",label:"Gradient Carbon",preview:"linear-gradient(135deg, #1e293b, #334155)"},{name:"gradientMidnight",label:"Gradient Midnight",preview:"linear-gradient(135deg, #1e293b, #0f172a)"},{name:"gradientCharcoal",label:"Gradient Charcoal",preview:"linear-gradient(135deg, #111827, #1f2937)"},{name:"gradientOnyx",label:"Gradient Onyx",preview:"linear-gradient(135deg, #0f172a, #1e293b)"},{name:"gradientShadow",label:"Gradient Shadow",preview:"linear-gradient(135deg, #171717, #262626)"},{name:"gradientJet",label:"Gradient Jet",preview:"linear-gradient(135deg, #0a0a0a, #171717)"},{name:"gradientDark",label:"Gradient Dark",preview:"linear-gradient(135deg, #030712, #1e293b)"},{name:"gradientIce",label:"Gradient Ice",preview:"linear-gradient(135deg, #e0f2fe, #7dd3fc)"},{name:"gradientArctic",label:"Gradient Arctic",preview:"linear-gradient(135deg, #bae6fd, #7dd3fc)"},{name:"gradientArcticBlue",label:"Gradient Arctic Blue",preview:"linear-gradient(135deg, #7dd3fc, #38bdf8)"},{name:"gradientOcean",label:"Gradient Ocean",preview:"linear-gradient(135deg, #bae6fd, #0ea5e9)"},{name:"gradientSky",label:"Gradient Sky",preview:"linear-gradient(135deg, #60a5fa, #3b82f6)"},{name:"gradientAqua",label:"Gradient Aqua",preview:"linear-gradient(135deg, #0ea5e9, #06b6d4)"},{name:"gradientSapphire",label:"Gradient Sapphire",preview:"linear-gradient(135deg, #0ea5e9, #2563eb)"},{name:"gradientDenim",label:"Gradient Denim",preview:"linear-gradient(135deg, #1d4ed8, #3b82f6)"},{name:"gradientNavy",label:"Gradient Navy",preview:"linear-gradient(135deg, #1e3a8a, #2563eb)"},{name:"gradientBold",label:"Gradient Bold",preview:"linear-gradient(135deg, #f9e8ff, #e879f9)"},{name:"gradientOrchid",label:"Gradient Orchid",preview:"linear-gradient(135deg, #d8b4fe, #c084fc)"},{name:"gradientLavender",label:"Gradient Lavender",preview:"linear-gradient(135deg, #c084fc, #a855f7)"},{name:"gradientPeriwinkle",label:"Gradient Periwinkle",preview:"linear-gradient(135deg, #a5b4fc, #c7d2fe)"},{name:"gradientIris",label:"Gradient Iris",preview:"linear-gradient(135deg, #6366f1, #818cf8)"},{name:"gradientBerry",label:"Gradient Berry",preview:"linear-gradient(135deg, #7e22ce, #a855f7)"},{name:"gradientUltraviolet",label:"Gradient Ultraviolet",preview:"linear-gradient(135deg, #6d28d9, #7c3aed)"},{name:"gradientVelvet",label:"Gradient Velvet",preview:"linear-gradient(135deg, #581c87, #7e22ce)"},{name:"gradientRoyal",label:"Gradient Royal",preview:"linear-gradient(135deg, #2E026D, #9333ea)"},{name:"gradientRose",label:"Gradient Rose",preview:"linear-gradient(135deg, #fce7f3, #ec4899)"},{name:"gradientBlush",label:"Gradient Blush",preview:"linear-gradient(135deg, #fecdd3, #fda4af)"},{name:"gradientCoral",label:"Gradient Coral",preview:"linear-gradient(135deg, #fb7185, #f43f5e)"},{name:"gradientCandy",label:"Gradient Candy",preview:"linear-gradient(135deg, #ec4899, #f472b6)"},{name:"gradientRuby",label:"Gradient Ruby",preview:"linear-gradient(135deg, #be123c, #e11d48)"},{name:"gradientCherry",label:"Gradient Cherry",preview:"linear-gradient(135deg, #991b1b, #dc2626)"},{name:"gradientWine",label:"Gradient Wine",preview:"linear-gradient(135deg, #7f1d1d, #991b1b)"},{name:"gradientRosewood",label:"Gradient Rosewood",preview:"linear-gradient(135deg, #4a0404, #7f1d1d)"},{name:"gradientSand",label:"Gradient Sand",preview:"linear-gradient(135deg, #fcd34d, #fbbf24)"},{name:"gradientHoney",label:"Gradient Honey",preview:"linear-gradient(135deg, #facc15, #fbbf24)"},{name:"gradientAmber",label:"Gradient Amber",preview:"linear-gradient(135deg, #fbbf24, #f59e0b)"},{name:"gradientGold",label:"Gradient Gold",preview:"linear-gradient(135deg, #f59e0b, #fbbf24)"},{name:"gradientSunrise",label:"Gradient Sunrise",preview:"linear-gradient(135deg, #fed7aa, #fb923c)"},{name:"gradientSunset",label:"Gradient Sunset",preview:"linear-gradient(135deg, #fb923c, #f97316)"},{name:"gradientPeach",label:"Gradient Peach",preview:"linear-gradient(135deg, #f97316, #fb923c)"},{name:"gradientTangerine",label:"Gradient Tangerine",preview:"linear-gradient(135deg, #f97316, #fb923c)"},{name:"gradientCopper",label:"Gradient Copper",preview:"linear-gradient(135deg, #b45309, #f59e0b)"},{name:"gradientBronze",label:"Gradient Bronze",preview:"linear-gradient(135deg, #78350f, #b45309)"},{name:"gradientMocha",label:"Gradient Mocha",preview:"linear-gradient(135deg, #78350f, #b45309)"},{name:"gradientWineGold",label:"Gradient Wine Gold",preview:"linear-gradient(135deg, #854d0e, #f59e0b)"},{name:"gradientMintCream",label:"Gradient Mint Cream",preview:"linear-gradient(135deg, #dcfce7, #bbf7d0)"},{name:"gradientMint",label:"Gradient Mint",preview:"linear-gradient(135deg, #d1fae5, #10b981)"},{name:"gradientOpal",label:"Gradient Opal",preview:"linear-gradient(135deg, #a7f3d0, #6ee7b7)"},{name:"gradientEmerald",label:"Gradient Emerald",preview:"linear-gradient(135deg, #10b981, #34d399)"},{name:"gradientTeal",label:"Gradient Teal",preview:"linear-gradient(135deg, #0d9488, #14b8a6)"},{name:"gradientForest",label:"Gradient Forest",preview:"linear-gradient(135deg, #065f46, #059669)"},{name:"gradientPine",label:"Gradient Pine",preview:"linear-gradient(135deg, #064e3b, #065f46)"},{name:"gradientMoss",label:"Gradient Moss",preview:"linear-gradient(135deg, #14532d, #166534)"},{name:"gradientCoffee",label:"Gradient Coffee",preview:"linear-gradient(135deg, #6b4f4f, #8b5e5e)"}],fontThemes=[{name:"Roboto",label:"Appeal",file:"/fonts/Roboto-Regular.ttf"},{name:"Academy",label:"Academy",file:"/fonts/Academy-Engraved LET-Fonts.ttf"},{name:"Aloevera-Regular",label:"Big Win",file:"/fonts/Aloevera-Regular.ttf"},{name:"ACaslonPro",label:"Blissful",file:"/fonts/ACaslonPro-Regular.ttf"},{name:"Baskerville",label:"Brilliance",file:"/fonts/Baskerville.ttf"},{name:"Frank",label:"Business",file:"/fonts/frank.ttf"},{name:"Butler_Medium",label:"Butler",file:"/fonts/Butler_Medium.ttf"},{name:"AdobeArabic",label:"Classic",file:"/fonts/AdobeArabic-Regular.ttf"},{name:"agencyfb",label:"Dazzle",file:"/fonts/agencyfb-bold.ttf"},{name:"Aloevera-Thin",label:"Excellence",file:"/fonts/Aloevera-Thin.ttf"},{name:"ChopinScript",label:"Fancy",file:"/fonts/ChopinScript.ttf"},{name:"Acens",label:"Financial",file:"/fonts/Acens.ttf"},{name:"cambriab",label:"Footloose",file:"/fonts/cambriab.ttf"},{name:"Archivo",label:"Gorgeous",file:"/fonts/Archivo-Regular.ttf"},{name:"Berylium",label:"Guru",file:"/fonts/Berylium.ttf"},{name:"Impact",label:"Impactful",file:"/fonts/impact.ttf"},{name:"Absalom",label:"Lovely",file:"/fonts/Absalom.ttf"},{name:"Montserrat",label:"Modern",file:"/fonts/Montserrat-Regular.ttf"},{name:"Altoysitalic",label:"Mountain",file:"/fonts/Altoysitalic_personal_only.ttf"},{name:"BigShouldersDisplay",label:"Paradise",file:"/fonts/BigShouldersDisplay-Regular.ttf"},{name:"Bodoni_72",label:"Radiance",file:"/fonts/Bodoni_72.ttf"},{name:"Alipne",label:"Showcase",file:"/fonts/Alpine.ttf"},{name:"cordia",label:"Spontaneous",file:"/fonts/cordia.ttf"},{name:"Bebas Neue",label:"Statement",file:"/fonts/BebasNeue-Regular.ttf"},{name:"Advert",label:"Sunshine",file:"/fonts/Advert.ttf"},{name:"AdobeNaskh",label:"Urgency",file:"/fonts/AdobeNaskh-Medium.ttf"},{name:"Cochin",label:"Wonder",file:"/fonts/Cochin.ttf"},{name:"Galvji",label:"Vexar",file:"/fonts/Galvji.ttf"}],BLOCK_PILL_STYLES={"Heading (H1)":"text-green border-green bg-green/10","Subheading (H2)":"text-green border-green bg-green/10","Sub-Subheading (H3)":"text-green border-green bg-green/10","List Heading":"text-green border-green bg-green/10",Paragraph:"text-green border-green bg-green/10",FAQ:"text-green border-green bg-green/10",Divider:"text-green border-green bg-green/10","Pro Image":"text-mediaBlue border-mediaBlue bg-mediaBlue/10",Video:"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Audio Player":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Single Offer":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Mini Offer":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Profile Card":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Scroll Arrow":"text-mediaBlue border-mediaBlue bg-mediaBlue/10","Offer Banner":"text-brightPurple border-brightPurple bg-brightPurple/10","Stripe Checkout":"text-brightPurple border-brightPurple bg-brightPurple/10","Secure Checkout":"text-brightPurple border-brightPurple bg-brightPurple/10","Verified Reviews":"text-brightPurple border-brightPurple bg-brightPurple/10","Button Url":"text-brightPurple border-brightPurple bg-brightPurple/10",Calendly:"text-newAgeOrange border-newAgeOrange bg-newAgeOrange/15","Countdown Timer":"text-newAgeOrange border-newAgeOrange bg-newAgeOrange/15","Social Links Row":"text-newAgeOrange border-newAgeOrange bg-newAgeOrange/15","Section Container":"text-white-400 border-white/20 bg-white/5","Referral Button":"text-white-400 border-white/20 bg-white/5"},BLOCK_TYPE_TO_LABEL={heading:"Heading (H1)",subheading:"Subheading (H2)",subsubheading:"Sub-Subheading (H3)",list_heading:"List Heading",paragraph:"Paragraph",faq:"FAQ",image:"Pro Image",profile_card:"Profile Card",video:"Video",audio_player:"Audio Player",single_offer:"Single Offer",mini_offer:"Mini Offer",scroll_arrow:"Scroll Arrow",offer_banner:"Offer Banner",stripe_checkout:"Stripe Checkout",secure_checkout:"Secure Checkout",verified_reviews:"Verified Reviews",button_url:"Button Url",calendly:"Calendly",countdown:"Countdown Timer",social_links:"Social Links Row",divider:"Divider",container:"Section Container",referral_button:"Referral Button"},TRUST_ICONS=[{key:"lock",icon:"",label:"Secure"},{key:"shield",icon:"",label:"Protected"},{key:"bolt",icon:"",label:"Instant"},{key:"download",icon:"",label:"Download"},{key:"check",icon:"",label:"Verified"},{key:"star",icon:"",label:"Trusted"},{key:"card",icon:"",label:"Payments"}],SCROLL_ARROW_STYLES={single:{label:"Single Arrow",count:1,stagger:0},double:{label:"Double Arrow",count:2,stagger:.15},triple:{label:"Triple Arrow",count:3,stagger:.18}},Nav=()=>{const{user:et,logout:dt}=useAuth(),$t=useNavigate(),[kt,Tt]=reactExports.useState(!1),Dt=useLocation(),Ft=reactExports.useRef(null),Ut=reactExports.useRef(null),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(!1);reactExports.useEffect(()=>{const nr=ir=>{var or,lr;!((or=Ut.current)!=null&&or.contains(ir.target))&&!((lr=Ft.current)!=null&&lr.contains(ir.target))&&Kt(!1)};return document.addEventListener("pointerdown",nr),()=>document.removeEventListener("pointerdown",nr)},[]),reactExports.useEffect(()=>{const nr=()=>{window.innerWidth>=768&&kt&&Tt(!1)};return window.addEventListener("resize",nr),()=>window.removeEventListener("resize",nr)},[kt]);const Zt=({icon:nr,title:ir,desc:or,onClick:lr,disabled:cr})=>jsxRuntimeExports.jsxs("button",{type:"button",disabled:cr,onClick:()=>{cr||(lr(),Kt(!1))},className:`
      w-full flex items-start gap-3 mb-4 rounded-md p-2 text-left transition
      ${cr?"cursor-default opacity-40":"hover:bg-gray-50 cursor-pointer"}
    `,children:[jsxRuntimeExports.jsx("div",{className:`mt-1 ${cr?"text-gray-400":"text-gray-700"}`,children:jsxRuntimeExports.jsx(nr,{className:"h-5 w-5"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:`text-sm font-semibold ${cr?"text-gray-400":"text-gray-900"}`,children:ir}),jsxRuntimeExports.jsx("div",{className:`text-xs leading-snug ${cr?"text-gray-400":"text-gray-500"}`,children:or})]})]});function er({title:nr,desc:ir,icon:or,onClick:lr}){return jsxRuntimeExports.jsxs("button",{onClick:lr,className:"w-full flex items-start gap-4 py-3 px-3 text-left hover:bg-gray-50 rounded-xl transition",children:[jsxRuntimeExports.jsx("div",{className:"mt-1 flex h-6 w-6 items-center justify-center rounded-lg bg-gray-100",children:or&&jsxRuntimeExports.jsx(or,{className:"h-5 w-5 text-gray-700"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-bold text-gray-900",children:nr}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:ir})]})]})}const rr=nr=>{const ir=localStorage.getItem("ref_slug");return $t(ir?`${nr}?ref=${ir}`:nr)};return reactExports.useEffect(()=>{kt?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="")},[kt]),["/books","/settings","/notifications","/landing-page-builder","/landing-analytics","/seller-dashboard","/docs/landing-page-builder","/docs/analytics-docs","/docs/analytics","/docs/settings","/docs"].includes(Dt.pathname)||Dt.pathname==="/community"?null:(navLinks.filter(nr=>!(nr.label==="Home"&&Dt.pathname==="/"||nr.label==="Contact Us"&&Dt.pathname==="/contact")),jsxRuntimeExports.jsxs("div",{className:"fixed top-0 left-0 w-full z-50 bg-white border-b border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("nav",{onClick:nr=>nr.stopPropagation(),className:"flex justify-between md:grid md:grid-cols-3 items-center h-[72px]",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>rr("/"),children:[jsxRuntimeExports.jsx(motion.img,{src:headerLogo,width:50,height:50,initial:{opacity:0},animate:{opacity:1},transition:{duration:.6}}),jsxRuntimeExports.jsx("span",{style:{fontFamily:'"PT Serif", serif'},className:"ml-2 text-lg font-semibold text-black tracking-tight whitespace-nowrap",children:"The Messy Attic"})]})}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex items-center justify-center gap-8 text-sm font-medium text-gray-700",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{ref:Ft,onClick:nr=>{nr.stopPropagation(),Kt(ir=>!ir)},className:"flex items-center gap-1 text-[16.5px] md:text-[16.5px] lg:text-[16.5px] font-medium text-gray-800 hover:text-black",children:["Products",jsxRuntimeExports.jsx("svg",{className:`h-4 w-4 transition-transform ${Ht?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),jsxRuntimeExports.jsx("div",{ref:Ut,className:`fixed left-0 top-[72px] w-full pt-2
                bg-white border border-gray-200 shadow-2xl z-50
                transition-all duration-150 ease-out
                ${Ht?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 -translate-y-2 pointer-events-none"}`,children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-4 gap-10 p-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold uppercase tracking-wide text-gray-900 mb-6 border-b pb-3",children:"Build & Launch"}),jsxRuntimeExports.jsx(Zt,{icon:LayoutTemplate,title:"Landing Pages",desc:"Create landing pages that sell your books",onClick:()=>rr("/landing")}),jsxRuntimeExports.jsx(Zt,{icon:Users,title:"Communities",desc:"Where writers come to grow",onClick:()=>rr("/community-feature")})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold uppercase tracking-wide text-gray-900 mb-6 border-b pb-3",children:"Scale"}),jsxRuntimeExports.jsx(Zt,{icon:Workflow,title:"Authors Assistant",desc:"Book writing software",onClick:()=>rr("/authors-assistant")})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold uppercase tracking-wide text-gray-900 mb-6 border-b pb-3",children:"Earn & Measure"}),jsxRuntimeExports.jsx(Zt,{icon:CreditCard,title:"Payments",desc:"Accept and track revenue",onClick:()=>rr("/stripe-payments")}),jsxRuntimeExports.jsx(Zt,{icon:ChartColumn,title:"Growth & Analytics",desc:"Performance and insights",onClick:()=>rr("/analytics")})]})]})})]})}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex items-center justify-end relative",children:et?jsxRuntimeExports.jsxs("div",{className:"relative ml-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Jt(nr=>!nr),className:"flex items-center gap-2 text-sm font-medium text-gray-800 hover:text-black",children:[jsxRuntimeExports.jsx(User,{className:"h-4 w-4"}),"Account",jsxRuntimeExports.jsx("svg",{className:`h-4 w-4 transition-transform duration-150 ${Yt?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Yt&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-full mt-2 w-44 rounded-lg border bg-white shadow-lg z-50",onMouseLeave:()=>Jt(!1),children:[jsxRuntimeExports.jsx("button",{onClick:()=>{$t("/community"),Jt(!1)},className:"w-full px-4 py-2 text-left text-sm text-black hover:bg-gray-50",children:"Dashboard"}),jsxRuntimeExports.jsx("button",{onClick:()=>{dt(),Jt(!1),$t("/login")},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50",children:"Logout"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>$t("/login"),className:"text-[16.5px] md:text-[16.5px] lg:text-[16.5px] font-medium text-gray-700 hover:text-black px-5",children:"Login"}),jsxRuntimeExports.jsxs("button",{onClick:()=>rr("/signup-community"),className:"relative overflow-hidden px-5 py-2 rounded-full bg-black text-white text-sm font-semibold hover:bg-gray-900 transition",children:[jsxRuntimeExports.jsx("span",{className:`
                    pointer-events-none
                    absolute top-0 left-[-40%]
                    w-[180%] h-full
                    bg-gradient-to-r
                    from-transparent
                    via-white/25
                    to-transparent
                    animate-button-glide
                    `}),jsxRuntimeExports.jsx("span",{className:"relative z-10",children:"Join for Free "})]})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:()=>Tt(!kt),className:"text-black focus:outline-none z-50 relative",children:kt?jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})})]})}),jsxRuntimeExports.jsx(ze$1,{show:kt,enter:"transition duration-300 ease-out",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition duration-200 ease-in",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:nr=>jsxRuntimeExports.jsxs("div",{ref:nr,className:"fixed inset-0 z-50 bg-white md:hidden flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[jsxRuntimeExports.jsx("span",{className:"font-extrabold text-lg text-black",children:"The Messy Attic"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[!et&&jsxRuntimeExports.jsx("button",{onClick:()=>{rr("/signup-community"),Tt(!1)},className:"rounded-full bg-black px-4 py-2 text-sm font-bold text-white",children:"Get Started"}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt(!1),className:"h-10 w-10 rounded-full bg-gray-600 flex items-center justify-center text-xl text-white hover:bg-gray-500 transition",children:""})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-8 overscroll-contain",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-md rounded-3xl border bg-white shadow-xl p-6 space-y-10",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-extrabold tracking-wide mb-4 text-gray-600",children:"BUILD & LAUNCH"}),jsxRuntimeExports.jsx(er,{icon:LayoutTemplate,title:"Landing Pages",desc:"Create landing pages that sell your books",onClick:()=>{rr("/landing"),Tt(!1)}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-extrabold tracking-wide mb-4 text-gray-600",children:"SCALE"}),jsxRuntimeExports.jsx(er,{icon:Users,title:"Communities",desc:"Where writers come to grow",onClick:()=>{rr("/community-feature"),Tt(!1)}}),jsxRuntimeExports.jsx(er,{icon:BookOpen,title:"Authors Assistant",desc:"Book writing software",onClick:()=>{rr("/authors-assistant"),Tt(!1)}})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-extrabold tracking-wide mb-4 text-gray-600",children:"EARN & MEASURE"}),jsxRuntimeExports.jsx(er,{icon:CreditCard,title:"Payments & Payouts",desc:"Accept payments with Stripe",onClick:()=>{rr("/stripe-payments"),Tt(!1)}}),jsxRuntimeExports.jsx(er,{icon:ChartColumn,title:"Growth & Analytics",desc:"Track clicks, downloads, and performance",onClick:()=>{rr("/analytics"),Tt(!1)}})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t space-y-3",children:[!et&&jsxRuntimeExports.jsx("button",{onClick:()=>{rr("/login"),Tt(!1)},className:"w-full text-left font-semibold text-gray-700",children:"Log in"}),et&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>{$t("/community"),Tt(!1)},className:"w-full text-left font-semibold text-gray-700",children:"Dashboard"}),jsxRuntimeExports.jsx("button",{onClick:()=>{dt(),Tt(!1),$t("/login")},className:"w-full text-left font-semibold text-gray-700",children:"Log out"})]})]})]})})]})})]}))},Landing=()=>{const et=useNavigate(),dt=$t=>{const kt=localStorage.getItem("ref_slug");return et(kt?`${$t}?ref=${kt}`:$t)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-white text-black flex flex-col font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"flex flex-col items-center justify-center text-center px-4 sm:px-6 py-36 relative",children:[jsxRuntimeExports.jsxs(motion.h1,{className:`
           header-landing-font
            text-[36px] sm:text-[48px] md:text-[64px]
            font-semibold
            tracking-tight
            leading-[1.15]
          `,initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.9},children:["A quiet place for writers ",jsxRuntimeExports.jsx("br",{}),"to grow together"]}),jsxRuntimeExports.jsx(motion.p,{style:{fontFamily:'"PT Serif", serif'},className:`
            mt-8
            text-lg sm:text-xl
            text-gray-700
            max-w-2xl
            leading-relaxed
          `,initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:"The Messy Attic is a supportive writing community where drafts are welcomed, feedback is honest, and writers help each other improve. Share your work, read thoughtfully, and grow without algorithms or noise."}),jsxRuntimeExports.jsxs(motion.div,{className:"mt-12 flex gap-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:[jsxRuntimeExports.jsx("button",{onClick:()=>dt("/signup-community"),className:`
            px-8 py-4
            rounded-xl
            bg-black text-white
            text-sm font-medium
            hover:bg-gray-900
            transition
          `,children:"Join the community"}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/community-feature"),className:`
            px-8 py-4
            rounded-xl
            border border-gray-300
            text-sm font-medium
            hover:bg-gray-50
            transition
          `,children:"Read how it works"})]})]}),jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-6xl px-6 py-28",children:[jsxRuntimeExports.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-semibold tracking-tight header-landing-font",children:"What is The Messy Attic?"}),jsxRuntimeExports.jsx("p",{style:{fontFamily:'"PT Serif", serif'},className:"mt-6 text-lg text-gray-700 leading-relaxed",children:"The Messy Attic is a quiet, supportive writing community where writers share work, exchange thoughtful feedback, and grow together. There are no social feeds, and visibility is earned through real reader engagement."})]}),jsxRuntimeExports.jsx("div",{className:"mt-20 grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[{icon:PenTool,title:"Write without pressure",desc:"Share drafts, ideas, and finished pieces in a space designed for honest feedback, not performance."},{icon:MessageSquare,title:"Real discussion",desc:"Comments and replies are the heart of the community. Readers engage thoughtfully and writers respond."},{icon:Lock,title:"Intentional access",desc:"Membership is subscription-based, keeping the space focused, respectful, and free from noise."},{icon:TrendingUp,title:"Earned visibility",desc:"Writing rises through thoughtful discussion and genuine reader interest, not popularity contests."},{icon:FileText,title:"Long-form friendly",desc:"A clean editor built for serious writing, not short posts, trends, or distractions."},{icon:Users,title:"Built for writers",desc:"This isnt social media. Its a place to write, read deeply, and improve together."}].map(({icon:$t,title:kt,desc:Tt})=>jsxRuntimeExports.jsxs("div",{className:`
          rounded-2xl
          border border-gray-200
          bg-white
          p-6
          shadow-sm
          transition
          hover:-translate-y-1
        `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`
              flex h-10 w-10 items-center justify-center
              rounded-md
              border border-gray-200
              text-gray-700
            `,children:jsxRuntimeExports.jsx($t,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:kt})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600 leading-relaxed",children:Tt})]},kt))})]})]})},Footer=()=>jsxRuntimeExports.jsx("footer",{className:"text-white py-8 px-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto border-t border-white/10 pt-6 flex flex-col md:flex-row justify-between items-center text-xs text-black/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center md:flex-row md:items-center gap-4 md:gap-6",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic Logo",width:50,height:50})}),jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," The Messy Attic. All rights reserved"]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center md:items-end gap-2 mt-6 md:mt-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Link$2,{to:"/terms",className:"hover:text-black transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$2,{to:"/privacy-policy",className:"hover:text-black transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$2,{to:"/cookie-policy",className:"hover:text-black transition-colors",children:"Cookies"}),jsxRuntimeExports.jsx("span",{children:"|"}),jsxRuntimeExports.jsx(Link$2,{to:"/refund-policy",className:"hover:text-black transition-colors",children:"Refunds"}),jsxRuntimeExports.jsx("span",{children:"|"})]})})]})});function LoginPage(){const{login:et,saveAuth:dt}=useAuth(),$t=useNavigate(),kt=useLocation(),[Tt,Dt]=reactExports.useState({email:"",password:""}),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(""),[Zt,er]=reactExports.useState(!1),[rr,sr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(""),[or,lr]=reactExports.useState(""),[cr,dr]=reactExports.useState(!1);reactExports.useEffect(()=>{const Mr=new URLSearchParams(kt.search).get("ref");Mr&&localStorage.setItem("ref_slug",Mr)},[kt.search]);const ur=kr=>{Dt({...Tt,[kr.target.name]:kr.target.value})},pr=async kr=>{var Mr,Tr;kr.preventDefault(),Ut(!0),Jt("");try{const Or=await et(Tt.email,Tt.password);if(Or!=null&&Or.requires2FA){lr(Or.twofaToken),sr(!0),Ut(!1);return}$t("/community")}catch(Or){(Tr=(Mr=Or.response)==null?void 0:Mr.data)!=null&&Tr.message?Jt(Or.response.data.message):Jt("Login failed. Please try again later.")}finally{Ut(!1)}};function mr(kr){return btoa(String.fromCharCode(...new Uint8Array(kr))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const jr=async()=>{try{const{email:kr}=Tt;if(!kr){Jt("Enter your email first to use Passkey login.");return}const{data:Mr}=await axiosInstance.post("/auth/webauthn/login-options",{email:kr}),Tr=await navigator.credentials.get({publicKey:{...Mr,challenge:Uint8Array.from(atob(Mr.challenge.replace(/-/g,"+").replace(/_/g,"/")),_r=>_r.charCodeAt(0)),allowCredentials:Mr.allowCredentials.map(_r=>({..._r,id:Uint8Array.from(atob(_r.id.replace(/-/g,"+").replace(/_/g,"/")),Pr=>Pr.charCodeAt(0))}))}}),{data:Or}=await axiosInstance.post("/auth/webauthn/login-verify",{email:kr,assertionResp:{id:Tr.id,rawId:mr(Tr.rawId),type:Tr.type,response:{authenticatorData:mr(Tr.response.authenticatorData),clientDataJSON:mr(Tr.response.clientDataJSON),signature:mr(Tr.response.signature),userHandle:Tr.response.userHandle?mr(Tr.response.userHandle):null}}});Or.success?(dt(Or.user,Or.accessToken,Or.refreshToken),$t("/community")):Jt("Passkey login failed. Try again.")}catch(kr){console.error("Passkey login error:",kr),Jt("Passkey login failed.")}},Rr=async()=>{if(!nr.trim()){Jt("Enter the 6-digit code first.");return}dr(!0),Jt("");try{const kr=await axiosInstance.post("https://themessyattic.com/api/auth/user/verify-login-2fa",{token:nr,twofaToken:or});kr.data.success?(dt(kr.data.user,kr.data.accessToken,kr.data.refreshToken),$t("/community")):Jt("Invalid 2FA code. Try again.")}catch(kr){console.error("2FA verify error:",kr),Jt("Invalid or expired 2FA code.")}finally{dr(!1)}},xr=()=>{const kr=localStorage.getItem("ref_slug");$t(kr?`/plans?ref=${kr}`:"/plans")};return reactExports.useEffect(()=>{if(Yt){er(!1);const kr=setTimeout(()=>er(!0),4e3),Mr=setTimeout(()=>Jt(""),5e3);return()=>{clearTimeout(kr),clearTimeout(Mr)}}},[Yt]),reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-5",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})})]}),jsxRuntimeExports.jsx("div",{className:"flex items-start gap-3 mb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Sign in to your account"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-5",children:["New to The Messy Attic?"," ",jsxRuntimeExports.jsx("button",{onClick:xr,className:"font-semibold hover:underline",children:"Sign Up"})]})]})}),Yt&&jsxRuntimeExports.jsx("div",{className:`bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3 mb-4 text-center transition-opacity duration-1000 ${Zt?"opacity-0":"opacity-100"}`,children:Yt}),rr?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Two-Factor Authentication"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the 6-digit code from your Authenticator app."}),jsxRuntimeExports.jsx("input",{type:"text",value:nr,onChange:kr=>ir(kr.target.value),placeholder:"123456",maxLength:"6",className:`
                w-32 text-center py-2 px-3 rounded-md
                bg-white border border-gray-300
                text-gray-900
                focus:ring-2 focus:ring-black/10 outline-none mb-4
              `}),jsxRuntimeExports.jsx("button",{onClick:Rr,disabled:cr,className:`
                w-full bg-black text-white
                font-semibold py-2 rounded-lg
                hover:opacity-90 transition
              `,children:cr?"Verifying...":"Verify Code"})]}):jsxRuntimeExports.jsxs("form",{onSubmit:pr,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Tt.email,onChange:ur,placeholder:"Email Address",required:!0,className:`
                w-full h-[48px] px-4 py-3 rounded-lg
                bg-white
                border border-gray-300
                text-gray-900
                placeholder-gray-400
                focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black 
              `}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:Ht?"text":"password",name:"password",value:Tt.password,onChange:ur,placeholder:"Password",required:!0,className:`
                  w-full h-[48px] px-4 py-3 pr-12 rounded-lg
                  bg-white
                  border border-gray-300
                  text-gray-900
                  placeholder-gray-400
                  focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
                `}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Kt(!Ht),className:"absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-gray-600","aria-label":Ht?"Hide password":"Show password",children:Ht?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ft,className:`
                w-full bg-black text-white
                font-semibold py-3 rounded-lg
                hover:opacity-90 transition
              `,children:Ft?"Logging In...":"Log In"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:jr,className:`
                w-full mt-2
                bg-gray-100 text-gray-900
                font-semibold py-3 rounded-lg
                border border-gray-300
                hover:bg-gray-200 transition
              `,children:"Sign in with Passkey"})]}),!rr&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 text-center mt-4",children:jsxRuntimeExports.jsx("a",{href:"/forgot-password",className:"hover:underline",children:"Forgot Password?"})})})]})})})}function Contact(){const[et,dt]=reactExports.useState({name:"",email:"",subject:"",message:""}),[$t,kt]=reactExports.useState(!1),Tt=Ft=>{dt({...et,[Ft.target.name]:Ft.target.value})},Dt=async Ft=>{Ft.preventDefault(),kt(!0);try{await axiosInstance.post("/support/contact",et),y$4.success(" Message sent! We'll get back to you soon.",{position:"top-center"}),dt({name:"",email:"",subject:"",message:""})}catch(Ut){console.error(Ut),y$4.error(" Something went wrong. Please try again later.",{position:"top-center"})}finally{kt(!1)}};return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-xl bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-5",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})})]}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Contact Support"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Have questions or need help? Our support team typically responds within 24 to 48 hours."})]}),jsxRuntimeExports.jsxs("form",{onSubmit:Dt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:et.name,onChange:Tt,placeholder:"Your Name",required:!0,className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:et.email,onChange:Tt,placeholder:"Email Address",required:!0,className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("input",{type:"text",name:"subject",value:et.subject,onChange:Tt,placeholder:"Subject (optional)",className:`
              w-full h-[48px] px-4 py-3 rounded-lg
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("textarea",{name:"message",value:et.message,onChange:Tt,placeholder:"Write your message...",rows:5,required:!0,className:`
              w-full px-4 py-3 rounded-lg resize-none
              bg-white
              border border-gray-300
              text-gray-900
              placeholder-gray-400
              focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
            `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:$t,className:`
              w-full bg-black text-white
              font-semibold py-3 rounded-lg
              hover:opacity-90 transition
            `,children:$t?"Sending...":"Send Message"})]})]})})})}function PlanDetailsModal({plan:et,onClose:dt}){if(!et)return null;reactExports.useEffect(()=>{const Dt=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.paddingRight=`${Dt}px`,()=>{document.body.style.overflow="",document.body.style.paddingRight=""}},[]);const $t={basic:{title:"Basic Creator",content:`
The Basic Creator plan gives you free access to The Messy Attic community.

Publish posts and short fragments, join discussions, and connect with other writers in a focused, algorithm-free environment. This plan is ideal for writers who want to share their work, build visibility, and participate in the community without any pressure to monetize.

Upgrade anytime when youre ready to enable paid subscriptions or sell your work professionally.`},business_basic_builder:{title:"Business Basic Builder",content:`
The Business Basic Builder plan is designed for writers who are ready to monetize their work and establish a professional presence.

This plan includes:
 Free access to the community  
 Set your own subscription prices  
 Monthly, annual, and VIP Founder tiers  
 Subscriber-only posts and fragments  
 Direct relationship with your readers  
 Landing page builder to sell books and writing  
 Custom domain support  

Business Basic gives you the tools to sell your work, grow a paid audience, and own your platform without unnecessary complexity. Upgrade anytime when youre ready to scale further.`},author:{title:"Authors Assistant",content:`
Transform your writing with intelligent support, not automation.
Authors Assistant is a complete book creation and publishing system designed for serious writers. It helps you plan structure, develop chapters, revise with intention, and move deliberately from draft to finished work. Write and edit up to 750 pages, per book, with full control over revisions, section locking, and finalization. When your book is ready, combine all chapters into a single publishable EPUB, compatible with Kindle and major ebook platforms. Your voice stays intact, your thinking stays clear, and your work ends as a finished, authoritative book, not an endless draft.
`},business_builder_pack:{title:"Pro Business Builder Pack",content:`
The Pro Business Builder Pack is built for writers and creators who want full control over how their work is presented, sold, and scaled.

This plan includes:
 Everything in Business Basic Builder  
 Unlimited paid subscribers  
 Advanced landing page layouts and themes  
 Custom domains and professional branding  
 Deeper analytics and engagement insights  
 Priority support  

The Business Builder Pack is designed for creators running their writing as a serious business, offering maximum flexibility, ownership, and room to grow without platform limitations.`}},{title:kt,content:Tt}=$t[et]||{};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-start sm:items-center justify-center p-4 sm:p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#141414] border border-gray-700 rounded-2xl w-full max-w-lg relative max-h-[90vh] flex flex-col shadow-2xl shadow-black/40 mt-6 sm:mt-0",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition z-10",children:jsxRuntimeExports.jsx(X$5,{size:22})}),jsxRuntimeExports.jsx("div",{className:"px-8 pt-8 pb-4",children:jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-center text-white",children:kt})}),jsxRuntimeExports.jsx("div",{className:"px-8 pb-6 overflow-y-auto text-gray-300 whitespace-pre-line leading-relaxed",children:Tt}),jsxRuntimeExports.jsx("div",{className:"px-8 pb-6 pt-4 text-center border-t border-gray-800",children:jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-6 py-2 bg-blue rounded-lg font-semibold hover:opacity-90 transition",children:"Got it"})})]})})}function PlansPage(){const[et,dt]=reactExports.useState(null),[$t,kt]=reactExports.useState(null),Tt=useLocation(),{user:Dt}=useAuth();reactExports.useEffect(()=>{const Ht=new URLSearchParams(Tt.search).get("ref");if(Ht){localStorage.setItem("ref_slug",Ht);return}},[Tt]);const Ft=async Ut=>{if(!Dt||!Dt.id){y$4.warning("Create a free account to continue. No credit card required.");return}try{dt(Ut);const Ht=localStorage.getItem("accessToken");if(Ut==="author"){const Zt=await axiosInstance.post("/seller-checkout/create-authors-assistant-subscription",{},{headers:{Authorization:`Bearer ${Ht}`}});window.location.href=Zt.data.url;return}let Kt=Ut,Yt=null;Ut==="business_builder_pack_annual"?(Kt="business_builder_pack",Yt="annual"):Ut==="business_builder_pack_monthly"?(Kt="business_builder_pack",Yt="monthly"):Ut==="business_basic_builder"&&(Kt="business_basic_builder",Yt="annual");const Jt=await axiosInstance.post("/checkout",{userId:Dt.id,productType:Kt,billingCycle:Yt},{headers:{Authorization:`Bearer ${Ht}`}});window.location.href=Jt.data.url}catch(Ht){console.error("Checkout error:",Ht),y$4.error("Failed to start checkout session"),dt(null)}};return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#fff] text-white flex flex-col items-center px-6 py-20",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-10",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-center design-text text-black mt-20",children:"Pricing"}),jsxRuntimeExports.jsxs("p",{className:"text-black mt-4 text-center max-w-xl",children:["The community is always free.",jsxRuntimeExports.jsx("br",{})," Upgrade when youre ready to monetize your work."]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 w-full max-w-6xl mx-auto place-items-stretch",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col rounded-2xl border border-gray-800 bg-[#111]/80 p-10 text-left hover:border-green/50 transition",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-white design-text",children:"Community (free)"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold text-white mb-6",children:"$0"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2 mb-6",children:[jsxRuntimeExports.jsx("li",{children:" Publish posts and short fragments"}),jsxRuntimeExports.jsx("li",{children:" Participate in the community feed"}),jsxRuntimeExports.jsx("li",{children:" Comment and engage in discussion"}),jsxRuntimeExports.jsx("li",{children:" Create a public writing profile"}),jsxRuntimeExports.jsx("li",{children:" Join for free, no credit card"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-8",children:"Set your own subscription prices anytime. We dont control your rates."}),Dt?(Dt==null?void 0:Dt.has_free_magnet)===1?jsxRuntimeExports.jsx("button",{disabled:!0,className:"mt-auto w-full py-3 text-lg font-semibold rounded-lg bg-gray-700 text-gray-300 cursor-not-allowed",children:"Trial Active"}):jsxRuntimeExports.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"mt-auto w-full py-3 text-lg font-semibold rounded-lg bg-gradient-to-r from-green to-royalPurple text-black hover:opacity-90 transition",children:"Go to Dashboard"}):jsxRuntimeExports.jsx("button",{onClick:()=>{const Ut=localStorage.getItem("ref_slug");window.location.href=Ut?`/sign-up?ref=${Ut}`:"/sign-up"},className:"mt-auto w-full py-3 text-lg font-semibold rounded-lg bg-green text-black hover:opacity-90 transition",children:"Join the Community"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col rounded-2xl border border-gray-800 bg-[#111]/80 p-10 text-left hover:border-pink-400 transition",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-pink-400 design-text",children:"Authors Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Active subscription  Up to 750 pages per book"}),jsxRuntimeExports.jsxs("p",{className:"text-4xl font-extrabold text-pink-400",children:["$49.99",jsxRuntimeExports.jsx("span",{className:"text-lg font-medium text-gray-400",children:"/month"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Cancel anytime  Access ends when subscription ends"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 text-sm leading-relaxed",children:"A structured writing and publishing system designed to help you plan, write, finalize, and publish a full-length book, while preserving your unique voice and intent."}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-pink-400 mb-2",children:"Write with confidence"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Generate chapters and structured sections"}),jsxRuntimeExports.jsx("li",{children:" Rewrite, expand, or shorten any passage"}),jsxRuntimeExports.jsx("li",{children:" Save unlimited revisions without losing progress"}),jsxRuntimeExports.jsx("li",{children:" Continue writing with full book-level context"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-pink-400 mb-2",children:"Maintain continuity"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Up to 750 pages across a single book project"}),jsxRuntimeExports.jsx("li",{children:" Import existing drafts, notes, or research"}),jsxRuntimeExports.jsx("li",{children:" Edit chapters individually without breaking structure"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-pink-400 mb-2",children:"Publish professionally"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Finalize and lock your completed book"}),jsxRuntimeExports.jsx("li",{children:" Combine all chapters into a single EPUB"}),jsxRuntimeExports.jsx("li",{children:" Publish EPUBs compatible with Kindle and major platforms"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft("author"),disabled:et==="author",className:`mt-auto w-full py-3 text-lg font-semibold rounded-lg transition-all ${et==="author"?"opacity-50 cursor-not-allowed bg-gray-700":"bg-gradient-to-r from-pink-500 to-rose-400 text-white hover:opacity-90"}`,children:et==="author"?"Redirecting...":"Start Writing with Authors Assistant"}),jsxRuntimeExports.jsx("button",{onClick:()=>kt("author"),className:"text-pink-400 text-sm hover:underline mt-3 text-center",children:"Learn more about Authors Assistant"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col rounded-2xl border border-gray-800 bg-[#111]/80 p-10 text-left hover:border-emerald-400/50 transition",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-white design-text",children:"Business Basic"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"(Annual)"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold text-white",children:"$65"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:"Billed annually ($780/year)"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-6",children:"Best for writers who want a professional home to sell books, set their own subscription tiers, and own their audience."}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400 mb-2",children:"Whats included"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Free access to the community"}),jsxRuntimeExports.jsx("li",{children:" Set your own subscription prices"}),jsxRuntimeExports.jsx("li",{children:" Monthly, annual, and VIP Founder tiers"}),jsxRuntimeExports.jsx("li",{children:" Subscriber-only posts and fragments"}),jsxRuntimeExports.jsx("li",{children:" Direct relationship with your readers"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-2",children:"Professional tools"}),jsxRuntimeExports.jsxs("ul",{className:"text-[13px] text-gray-500 space-y-1 opacity-70",children:[jsxRuntimeExports.jsx("li",{children:" Landing page builder to sell books"}),jsxRuntimeExports.jsx("li",{children:" Custom domain support"}),jsxRuntimeExports.jsx("li",{children:" Clean, professional layouts"}),jsxRuntimeExports.jsx("li",{children:" Shareable links for posts and pages"}),jsxRuntimeExports.jsx("li",{children:" Simple analytics for growth"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft("business_basic_builder"),disabled:et==="business_basic_builder",className:`mt-auto w-full py-3 text-lg font-semibold rounded-lg border transition-all ${et==="business_basic_builder"?"opacity-50 cursor-not-allowed bg-gray-700 border-gray-700":"text-white border-blue-400 hover:opacity-90 shadow-lg shadow-blue-400/30"}`,children:et==="business_basic_builder"?"Redirecting...":"Start with Business Basic"}),jsxRuntimeExports.jsx("button",{onClick:()=>kt("business_basic_builder"),className:"mt-4 text-sm text-gray-400 hover:text-white hover:underline text-center",children:"Learn more about this plan"})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col rounded-2xl border border-blue-500/40 bg-[#111]/90 p-10 text-left shadow-xl shadow-blue-500/10 transition hover:border-blue-400",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-blue-400 design-text",children:"Business Builder"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"(Annual  Full Platform Access)"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold text-white",children:"$129.99"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:"Billed annually ($1,560/year)"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-6",children:"Built for writers and creators who want to scale paid communities, sell books professionally, and fully own their platform."}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-400 mb-2",children:"Everything you need to scale"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Free access to the community"}),jsxRuntimeExports.jsx("li",{children:" Set your own subscription prices"}),jsxRuntimeExports.jsx("li",{children:" Monthly, annual, and VIP Founder tiers"}),jsxRuntimeExports.jsx("li",{children:" Subscriber-only posts and fragments"}),jsxRuntimeExports.jsx("li",{children:" Unlimited paid subscribers"}),jsxRuntimeExports.jsx("li",{children:" Priority support"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 mb-2",children:"Professional tools"}),jsxRuntimeExports.jsxs("ul",{className:"text-[13px] text-gray-500 space-y-1 opacity-75",children:[jsxRuntimeExports.jsx("li",{children:" Landing page builder to sell books"}),jsxRuntimeExports.jsx("li",{children:" Custom domain and branding"}),jsxRuntimeExports.jsx("li",{children:" Advanced layouts and themes"}),jsxRuntimeExports.jsx("li",{children:" Shareable links and pages"}),jsxRuntimeExports.jsx("li",{children:" Deeper analytics and insights"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft("business_builder_pack_annual"),disabled:et==="business_builder_pack_annual",className:`mt-auto w-full py-3 text-lg font-semibold rounded-lg border transition-all ${et==="business_builder_pack_annual"?"opacity-50 cursor-not-allowed bg-gray-700 border-gray-700":"text-white bg-blue-500 border-blue-500 hover:bg-blue-400 shadow-lg shadow-blue-500/30"}`,children:et==="business_builder_pack_annual"?"Redirecting...":"Build with Business Builder"}),jsxRuntimeExports.jsx("button",{onClick:()=>kt("business_builder_pack"),className:"mt-4 text-sm text-blue-400 hover:underline text-center",children:"See everything included"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col rounded-2xl border border-gray-800 bg-[#111]/70 p-10 text-left transition hover:border-sky-400/40",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-1 text-white design-text",children:"Business Builder"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Monthly billing  Same features as annual"}),jsxRuntimeExports.jsx("p",{className:"text-4xl font-extrabold text-white",children:"$199.99"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:"Billed monthly (12-month commitment)"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-6",children:"For writers and creators who want full access to the platform with the flexibility of monthly billing."}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-sky-400 mb-2",children:"Full Business Builder access"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Free access to the community"}),jsxRuntimeExports.jsx("li",{children:" Set your own subscription prices"}),jsxRuntimeExports.jsx("li",{children:" Monthly, annual, and VIP Founder tiers"}),jsxRuntimeExports.jsx("li",{children:" Subscriber-only posts and fragments"}),jsxRuntimeExports.jsx("li",{children:" Landing page builder and custom domains"}),jsxRuntimeExports.jsx("li",{children:" Priority support"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-300 mb-8",children:"Prefer the best value? Save significantly with annual billing."}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft("business_builder_pack_monthly"),disabled:et==="business_builder_pack_monthly",className:`mt-auto w-full py-3 text-lg font-semibold rounded-lg border transition-all ${et==="business_builder_pack_monthly"?"opacity-50 cursor-not-allowed bg-gray-700 border-gray-700":"text-white border-sky-400 hover:bg-sky-400/10"}`,children:et==="business_builder_pack_monthly"?"Redirecting...":"Choose Monthly Billing"}),jsxRuntimeExports.jsx("button",{onClick:()=>kt("business_builder_pack"),className:"mt-4 text-sm text-gray-400 hover:text-white hover:underline text-center",children:"Compare with annual option"})]})]}),$t&&jsxRuntimeExports.jsx(PlanDetailsModal,{plan:$t,onClose:()=>kt(null)}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mt-16 text-center",children:" Secure checkout  powered by Stripe"})]})}const ReactToastify="",quill_snow="",index="";function ForgotPassword(){const[et,dt]=reactExports.useState(""),[$t,kt]=reactExports.useState(!1),Tt=useNavigate();reactExports.useEffect(()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""},[]);const Dt=async Ft=>{var Ut,Ht;if(Ft.preventDefault(),!!et){kt(!0);try{const Kt=await axiosInstance.post("/auth/forgot-password",{email:et});y$4.success(Kt.data.message||"Reset link sent"),dt(""),setTimeout(()=>Tt("/login"),2500)}catch(Kt){y$4.error(((Ht=(Ut=Kt.response)==null?void 0:Ut.data)==null?void 0:Ht.message)||"Error sending reset email")}finally{kt(!1)}}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})]}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Forgot your password?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Enter your email and well send you a reset link."}),jsxRuntimeExports.jsxs("form",{onSubmit:Dt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"email",value:et,onChange:Ft=>dt(Ft.target.value),placeholder:"Email Address",required:!0,className:`
                w-full h-[48px] px-4 rounded-lg
                bg-white
                border border-gray-300
                text-gray-900
                placeholder-gray-400
                focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
              `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:$t,className:`
                w-full bg-black text-white
                font-semibold py-3 rounded-lg
                hover:opacity-90 transition
              `,children:$t?"Sending...":"Send reset link"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 text-center mt-6",children:["Remember your password?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>Tt("/login"),className:"font-semibold hover:underline",children:"Back to Login"})]})]})})})}function ResetPassword(){const[et]=useSearchParams(),[dt,$t]=reactExports.useState(""),[kt,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState(!1),Kt=useNavigate(),Yt=et.get("token");reactExports.useEffect(()=>{Yt||(y$4.error("Invalid or missing reset token."),Kt("/login"))},[Yt,Kt]);const Jt=async Zt=>{var er,rr;if(Zt.preventDefault(),!dt||!kt)return y$4.error("Please enter and confirm your new password.");if(dt!==kt)return y$4.error("Passwords do not match.");Ft(!0);try{const sr=await axiosInstance.post("/auth/reset-password",{token:Yt,newPassword:dt});y$4.success(sr.data.message||"Password reset successful!"),Ht(!0),setTimeout(()=>Kt("/login"),3500)}catch(sr){console.error("Reset password error:",sr),y$4.error(((rr=(er=sr.response)==null?void 0:er.data)==null?void 0:rr.message)||"Error resetting password.")}finally{Ft(!1)}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:Ut?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},transition:{duration:.4},className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Password updated"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been reset successfully. You can now sign in with your new password."}),jsxRuntimeExports.jsx("button",{onClick:()=>Kt("/login"),className:`
                  w-full bg-black text-white
                  font-semibold py-3 rounded-lg
                  hover:opacity-90 transition
                `,children:"Go to Login"})]},"success"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4},className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})]}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reset your password"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Enter a new password for your account."}),jsxRuntimeExports.jsxs("form",{onSubmit:Jt,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"password",value:dt,onChange:Zt=>$t(Zt.target.value),placeholder:"New password",required:!0,className:`
                    w-full h-[48px] px-4 rounded-lg
                    bg-white
                    border border-gray-300
                    text-gray-900
                    placeholder-gray-400
                    focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
                  `}),jsxRuntimeExports.jsx("input",{type:"password",value:kt,onChange:Zt=>Tt(Zt.target.value),placeholder:"Confirm new password",required:!0,className:`
                    w-full h-[48px] px-4 rounded-lg
                    bg-white
                    border border-gray-300
                    text-gray-900
                    placeholder-gray-400
                    focus:outline-none focus:ring-2 focus:ring-black/10 focus:border-black
                  `}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Dt,className:`
                    w-full bg-black text-white
                    font-semibold py-3 rounded-lg
                    hover:opacity-90 transition
                  `,children:Dt?"Resetting...":"Reset password"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 text-center mt-6",children:["Remembered your password?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>Kt("/login"),className:"font-semibold hover:underline",children:"Back to Login"})]})]},"form")})})})}const BookContext=reactExports.createContext();function BookProvider({children:et}){const{accessToken:dt}=useAuth(),[$t,kt]=reactExports.useState([]),[Tt,Dt]=reactExports.useState(!0),[Ft,Ut]=reactExports.useState(null),Ht=async()=>{if(dt)try{const Kt=await axios$1.get("https://themessyattic.com/api/books",{headers:{Authorization:`Bearer ${dt}`}});kt(Kt.data)}catch(Kt){console.error("Error fetching books:",Kt),Ut(Kt)}finally{Dt(!1)}};return reactExports.useEffect(()=>{if(!dt)return;Ht();const Kt=setInterval(async()=>{try{const Yt=await axios$1.get("https://themessyattic.com/api/books",{headers:{Authorization:`Bearer ${dt}`}});kt(Jt=>JSON.stringify(Jt)===JSON.stringify(Yt.data)?Jt:Yt.data)}catch(Yt){console.warn("Polling error:",Yt.message)}},5e3);return()=>clearInterval(Kt)},[dt]),jsxRuntimeExports.jsx(BookContext.Provider,{value:{books:$t,setBooks:kt,fetchBooks:Ht,loading:Tt,error:Ft},children:et})}function useBooks(){return reactExports.useContext(BookContext)}function LoadingState({label:et="Loading your lead magnets..."}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-silver",children:et})]})}function EmptyState({type:et="magnet"}){const dt=et==="book";return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[60vh]",children:[jsxRuntimeExports.jsx("p",{className:"text-silver text-lg max-w-md leading-relaxed italic",children:dt?"You havent written any books yet.":"You havent created any lead magnets yet."}),jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm mt-2",children:"Get started whenever youre ready."})]})}function PaginationControls({currentPage:et,totalPages:dt,onPageChange:$t}){return dt<=1?null:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{disabled:et===1,onClick:()=>$t(et-1),className:`
        px-4 py-2 rounded transition
        bg-gray-200 text-black
        dark:bg-gray-700 dark:text-white
        disabled:opacity-50 disabled:cursor-not-allowed
      `,children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-black dark:text-white",children:["Page ",et," of ",dt]}),jsxRuntimeExports.jsx("button",{disabled:et===dt,onClick:()=>$t(et+1),className:`
        px-4 py-2 rounded transition
        bg-gray-200 text-black
        dark:bg-gray-700 dark:text-white
        disabled:opacity-50 disabled:cursor-not-allowed
      `,children:"Next"})]})}function SupportTab(){const[et,dt]=reactExports.useState(!1),$t=[{q:"What is a lead magnet in Cre8tly Studio?",a:"A lead magnet is a downloadable PDF you create to capture emails or deliver value to your audience. Cre8tly Studio generates a fully designed, ready-to-use PDF based on your prompt, theme, and branding."},{q:"How do I create a lead magnet?",a:"Enter your prompt, choose a theme, optionally upload a logo or link, and click Generate. Cre8tly Studio builds your PDF automatically and saves it to your dashboard."},{q:"How long does it take to generate a PDF?",a:"Most lead magnets are generated within 515 seconds, depending on content length and selected design options."},{q:"Where can I find my generated PDFs?",a:"All completed PDFs are stored in your dashboard under My Lead Magnets. From there you can view, download, or attach them to landing pages."},{q:"Can I create multiple lead magnets?",a:"Yes. You can create multiple lead magnets as long as you have available slots or credits on your plan."},{q:"Can I regenerate an existing PDF?",a:"No. Each lead magnet slot is intended for one finalized PDF. This prevents abuse and ensures consistent system performance. To make changes, youll need to generate a new lead magnet using a new slot."},{q:"Can I use my own branding?",a:"Yes. You can upload your logo and add your own links. Themes automatically adapt to your branding for a consistent look."},{q:"What are Pro Covers?",a:"Pro Covers lets you upload a custom cover image that becomes the first page of your PDF. It also includes access to thousands of royalty-free Unsplash images you can use as covers or backgrounds. This feature is available only with the Business Basic and Business Builder plan."},{q:"What happens if I reach my plan limit?",a:"If you hit your limit, youll be prompted to upgrade or purchase additional credits. Your existing PDFs remain accessible at all times."},{q:"Can I upgrade my plan later?",a:"Yes. You can upgrade your plan or buy more credits directly from your dashboard at any time."},{q:"Do you offer refunds?",a:"Because Cre8tly Studio delivers instant, custom-generated digital content, refunds are not available after generation. If you encounter a technical issue or duplicate charge, contact support and well help resolve it."},{q:"How do I contact support?",a:"You can reach our support team through the Contact page. Responses typically arrive within 2448 hours, Monday through Friday."}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>dt(!0),className:"fixed bottom-6 right-6 bg-green text-black font-semibold px-2 py-2 rounded-full shadow-lg hover:opacity-90 transition-all z-50 design-text text-sm",children:jsxRuntimeExports.jsx(MessageCircleQuestionMark,{size:20})}),et&&jsxRuntimeExports.jsx("div",{onClick:()=>dt(!1),className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{onClick:kt=>kt.stopPropagation(),className:"bg-gray-900 text-white p-8 rounded-2xl w-full max-w-2xl border border-gray-700 shadow-2xl relative max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-4 left-4 right-4 flex justify-between",children:jsxRuntimeExports.jsx("button",{onClick:()=>dt(!1),className:"text-gray-400 hover:text-red-400 text-xl",children:""})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green",children:"Frequently Asked Questions"}),jsxRuntimeExports.jsx("div",{className:"space-y-5 text-gray-300",children:$t.map((kt,Tt)=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:kt.q}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1 leading-relaxed",children:kt.a})]},Tt))}),jsxRuntimeExports.jsx("div",{className:"mt-6 text-center",children:jsxRuntimeExports.jsx(Link$2,{to:"/docs",className:"text-green font-medium hover:underline",children:"Need more help? Visit our Docs "})})]})})]})}function GenerationOverlay({visible:et,type:dt="lead",onClose:$t}){const kt=dt==="book"?"book":dt==="lead"?"lead magnet":"content";return et?jsxRuntimeExports.jsx("div",{className:`
      fixed inset-0 z-[9999]
      flex items-center justify-center
      bg-black/80
      backdrop-blur-sm
      px-6
    `,children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-md rounded-3xl
        bg-[#0b0b0b]
        border border-white/15
        px-10 py-9
        text-center
        shadow-[0_30px_90px_rgba(0,0,0,0.7)]
      `,children:[jsxRuntimeExports.jsx("h2",{className:"text-white text-[22px] font-semibold tracking-tight mb-3",children:"In progress"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-300 text-[15px] leading-relaxed mb-1",children:["Were creating your ",kt,"."]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-[14px] leading-relaxed mb-8",children:"Youll be notified by email when its ready."}),jsxRuntimeExports.jsx("button",{onClick:$t,className:`
          inline-flex items-center justify-center
          px-7 py-2.5
          rounded-full
          bg-green
          text-black
          text-[14px] font-medium
          transition
          hover:opacity-90
          focus:outline-none
          focus:ring-2 focus:ring-green/40
        `,children:"Continue"})]})}):null}function OutOfSlotsModal({open:et,onClose:dt,context:$t="books"}){if(!et)return null;const kt={books:{title:"Book Limit Reached",message:`You can only have 3 active books at one time. Finish or archive an existing book
 to create a new one.`}},{title:Tt,message:Dt}=kt[$t];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 animate-fadeIn font-montserrat",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-br from-[#0b0b0b] via-[#111827] to-[#1f2937] border border-[#00E07A]/40 shadow-[0_0_25px_rgba(0,224,122,0.3)] rounded-2xl p-8 max-w-md mx-auto text-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] opacity-20 blur-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-extrabold mb-4 bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] bg-clip-text text-transparent",children:Tt}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed text-[15px] whitespace-pre-line",children:Dt}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-gradient-to-r from-[#00E07A] to-[#6A5ACD] text-white px-8 py-3 rounded-xl font-semibold tracking-wide shadow-[0_0_12px_rgba(0,224,122,0.6)] hover:shadow-[0_0_20px_rgba(106,90,205,0.8)] hover:scale-[1.03] transition-all duration-200",children:"Close"})]})]})})}const scriptRel="modulepreload",assetsURL=function(et){return"/"+et},seen={},__vitePreload=function et(dt,$t,kt){if(!$t||$t.length===0)return dt();const Tt=document.getElementsByTagName("link");return Promise.all($t.map(Dt=>{if(Dt=assetsURL(Dt),Dt in seen)return;seen[Dt]=!0;const Ft=Dt.endsWith(".css"),Ut=Ft?'[rel="stylesheet"]':"";if(!!kt)for(let Yt=Tt.length-1;Yt>=0;Yt--){const Jt=Tt[Yt];if(Jt.href===Dt&&(!Ft||Jt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${Dt}"]${Ut}`))return;const Kt=document.createElement("link");if(Kt.rel=Ft?"stylesheet":scriptRel,Ft||(Kt.as="script",Kt.crossOrigin=""),Kt.href=Dt,document.head.appendChild(Kt),Ft)return new Promise((Yt,Jt)=>{Kt.addEventListener("load",Yt),Kt.addEventListener("error",()=>Jt(new Error(`Unable to preload CSS for ${Dt}`)))})})).then(()=>dt()).catch(Dt=>{const Ft=new Event("vite:preloadError",{cancelable:!0});if(Ft.payload=Dt,window.dispatchEvent(Ft),!Ft.defaultPrevented)throw Dt})};function UnsplashImagePicker({onSelect:et}){const[dt,$t]=reactExports.useState(""),[kt,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(1),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),Jt=reactExports.useRef(null);reactExports.useEffect(()=>{dt.trim()===""&&(Tt([]),Ft(1),Yt(!1))},[dt]);async function Zt(rr=1,sr=!1){if(dt.trim()){Ht(!0);try{const nr=await axiosInstance.get(`https://themessyattic.com/api/unsplash/search?query=${encodeURIComponent(dt)}&per_page=30&page=${rr}`),ir=nr.data.results||nr.data;(!ir||ir.length===0)&&y$4.info("No results found",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"}),Tt(or=>sr?[...or,...ir]:ir),Yt(ir.length>0),Ft(rr)}catch(nr){console.error("Unsplash fetch failed:",nr),y$4.error("Failed to fetch images. Please try again.",{position:"top-right",autoClose:2500,hideProgressBar:!0,theme:"dark"})}finally{Ht(!1)}}}const er=()=>{Tt([]),Ft(1),Zt(1,!1)};return reactExports.useEffect(()=>{if(!Jt.current)return;const rr=new IntersectionObserver(sr=>{sr[0].isIntersecting&&Kt&&!Ut&&Zt(Dt+1,!0)});return rr.observe(Jt.current),()=>rr.disconnect()},[Kt,Ut,Dt,dt]),jsxRuntimeExports.jsxs("div",{className:`
  space-y-4
  bg-dashboard-sidebar-light
  dark:bg-dashboard-sidebar-dark
  p-4
  rounded-lg
  border border-dashboard-border-light
  dark:border-dashboard-border-dark
`,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsxRuntimeExports.jsx("input",{value:dt,onChange:rr=>$t(rr.target.value),placeholder:"Search Unsplash images (e.g. fitness, coffee, nature)",className:`
          w-full
          p-3
          rounded-lg
          bg-dashboard-bg-light
          dark:bg-dashboard-bg-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          placeholder-dashboard-muted-light
          dark:placeholder-dashboard-muted-dark
          `}),jsxRuntimeExports.jsx("button",{type:"button",onClick:er,disabled:Ut,className:`
          w-full
          sm:w-auto
          px-4
          py-3
          rounded-lg
          font-bold
          bg-dashboard-hover-light
          dark:bg-dashboard-hover-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          hover:bg-green
          hover:text-dashboard-bg-dark
          transition
          disabled:opacity-60
          disabled:cursor-not-allowed
          `,children:Ut?"Searching...":"Search"})]}),jsxRuntimeExports.jsxs("div",{className:`grid
    grid-cols-2
    sm:grid-cols-3
    md:grid-cols-4
    gap-3
    overflow-y-auto
    relative
    max-h-[45vh]
    sm:max-h-[400px]`,children:[kt.map(rr=>jsxRuntimeExports.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>et(rr.urls.full,rr),children:[jsxRuntimeExports.jsx("img",{src:rr.urls.small,alt:rr.alt_description,className:`rounded-lg w-full h-32
    sm:h-40 object-cover group-hover:opacity-75 transition`}),jsxRuntimeExports.jsx("span",{className:`
              absolute bottom-1 left-1
              text-xs
              px-1
              rounded
              bg-dashboard-bg-dark/70
              text-dashboard-text-dark
            `,children:rr.user.name})]},rr.id)),Kt&&!Ut&&jsxRuntimeExports.jsx("div",{ref:Jt,className:"col-span-full h-8"}),Ut&&jsxRuntimeExports.jsx("div",{className:"col-span-full flex justify-center py-4",children:jsxRuntimeExports.jsx("div",{className:`
              w-6 h-6
              border-2
              border-dashboard-border-light
              dark:border-dashboard-border-dark
              border-t-green
              rounded-full
              animate-spin
            `})})]})]})}function CoverUpload({setCover:et}){const[dt,$t]=reactExports.useState(null),[kt,Tt]=reactExports.useState(null),{user:Dt}=useAuth(),Ft=reactExports.useRef(null),Ut=useNavigate(),Ht=!(Dt!=null&&Dt.pro_covers),Kt=er=>{var ir;const rr=(ir=er.target.files)==null?void 0:ir[0];if(!rr)return;const sr=10;if(rr.size>sr*1024*1024){y$4.error(`File too large. Maximum ${sr} MB allowed.`);return}const nr=new FileReader;nr.onloadend=()=>{const or=nr.result;et(or),$t(or),Tt(null)},nr.readAsDataURL(rr)},Yt=()=>Ut("/plans"),Jt=(er,rr)=>{et(er),$t(rr.urls.small),Tt({name:rr.user.name,profile:rr.user.links.html}),y$4.success("Cover image selected!")},Zt=()=>{et(null),$t(null),Tt(null),Ft.current&&(Ft.current.value=""),y$4.info("Cover image removed")};return jsxRuntimeExports.jsxs("div",{className:`
  relative mt-6
  border border-dashboard-border-light
  dark:border-dashboard-border-dark
  rounded-xl p-4
  bg-dashboard-sidebar-light
  dark:bg-dashboard-sidebar-dark
  overflow-hidden
`,children:[Ht&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-10 rounded-xl",children:jsxRuntimeExports.jsxs("button",{onClick:Yt,className:`px-8 py-2.5 rounded-lg border border-royalPurple bg-gradient-to-r from-[#a98aff] via-[#d2b6ff] to-[#8e66ff]
             text-black font-semibold hover:opacity-90 transition shadow-lg flex items-center gap-2 justify-center`,children:[jsxRuntimeExports.jsx(Lock,{size:15,className:"text-black"}),jsxRuntimeExports.jsx("span",{children:"Upgrade to Unlock"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:[jsxRuntimeExports.jsxs("label",{className:`block font-semibold text-lg tracking-wide
        text-dashboard-text-light
        dark:text-dashboard-text-dark`,children:["Upload or Choose a Cover"," ",jsxRuntimeExports.jsx("span",{className:`text-sm ml-1
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark`,children:"(Max 667  1000)"})]}),jsxRuntimeExports.jsx("span",{className:`
  self-start

  text-[11px]
  px-3 py-1
  rounded-full
  bg-dashboard-hover-light
dark:bg-dashboard-hover-dark
text-dashboard-muted-light
dark:text-dashboard-muted-dark
  border border-[#7c3aed]/60
  tracking-wide
  uppercase
  shadow-[inset_0_0_0_1px_rgba(124,58,237,0.15)]
  ${Ht?"opacity-50":""}
`,children:"PRO"})]}),jsxRuntimeExports.jsx("input",{ref:Ft,type:"file",accept:"image/*",onChange:Kt,className:"hidden",disabled:Ht}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>!Ht&&Ft.current.click(),disabled:Ht,className:`w-full sm:w-auto px-5 py-3 rounded-md font-semibold text-sm shadow-md transition 
    flex items-center justify-center gap-2
    ${Ht?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-muted-light dark:text-dashboard-muted-dark cursor-not-allowed":"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-green hover:text-dashboard-bg-dark"}`,children:[jsxRuntimeExports.jsx(Image$2,{size:16})," Choose File"]}),!Ht&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-3",children:jsxRuntimeExports.jsx(UnsplashImagePicker,{onSelect:Jt})})}),dt&&!Ht&&jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("img",{src:dt,alt:"Cover Preview",className:"w-[225px] h-[320px] object-cover rounded-lg shadow-lg mx-auto"}),jsxRuntimeExports.jsx("p",{className:`text-xs mt-1
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark`,children:"This cover will appear before your first page."}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Zt,className:`
    mt-3
    w-full
    sm:w-auto
    text-sm
    font-semibold
    text-red-500
    border
    border-red-400/30
    px-4
    py-2
    rounded-lg
    hover:bg-red-500/10
    hover:text-red-300
    transition
  `,children:"Remove cover image"}),kt&&jsxRuntimeExports.jsxs("p",{className:`text-[10px] mt-1 italic
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:["Photo by"," ",jsxRuntimeExports.jsx("a",{href:kt.profile,target:"_blank",rel:"noopener noreferrer",className:"underline text-blue hover:opacity-80",children:kt.name})," ","on"," ",jsxRuntimeExports.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue hover:opacity-80",children:"Unsplash"})]})]})]})}var shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$7(et,dt){return et===dt&&(et!==0||1/et===1/dt)||et!==et&&dt!==dt}var objectIs$1=typeof Object.is=="function"?Object.is:is$7,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$1=React$1.useDebugValue;function useSyncExternalStore$2(et,dt){var $t=dt(),kt=useState({inst:{value:$t,getSnapshot:dt}}),Tt=kt[0].inst,Dt=kt[1];return useLayoutEffect(function(){Tt.value=$t,Tt.getSnapshot=dt,checkIfSnapshotChanged(Tt)&&Dt({inst:Tt})},[et,$t,dt]),useEffect$1(function(){return checkIfSnapshotChanged(Tt)&&Dt({inst:Tt}),et(function(){checkIfSnapshotChanged(Tt)&&Dt({inst:Tt})})},[et]),useDebugValue$1($t),$t}function checkIfSnapshotChanged(et){var dt=et.getSnapshot;et=et.value;try{var $t=dt();return!objectIs$1(et,$t)}catch{return!0}}function useSyncExternalStore$1(et,dt){return dt()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;function OrderedMap(et){this.content=et}OrderedMap.prototype={constructor:OrderedMap,find:function(et){for(var dt=0;dt<this.content.length;dt+=2)if(this.content[dt]===et)return dt;return-1},get:function(et){var dt=this.find(et);return dt==-1?void 0:this.content[dt+1]},update:function(et,dt,$t){var kt=$t&&$t!=et?this.remove($t):this,Tt=kt.find(et),Dt=kt.content.slice();return Tt==-1?Dt.push($t||et,dt):(Dt[Tt+1]=dt,$t&&(Dt[Tt]=$t)),new OrderedMap(Dt)},remove:function(et){var dt=this.find(et);if(dt==-1)return this;var $t=this.content.slice();return $t.splice(dt,2),new OrderedMap($t)},addToStart:function(et,dt){return new OrderedMap([et,dt].concat(this.remove(et).content))},addToEnd:function(et,dt){var $t=this.remove(et).content.slice();return $t.push(et,dt),new OrderedMap($t)},addBefore:function(et,dt,$t){var kt=this.remove(dt),Tt=kt.content.slice(),Dt=kt.find(et);return Tt.splice(Dt==-1?Tt.length:Dt,0,dt,$t),new OrderedMap(Tt)},forEach:function(et){for(var dt=0;dt<this.content.length;dt+=2)et(this.content[dt],this.content[dt+1])},prepend:function(et){return et=OrderedMap.from(et),et.size?new OrderedMap(et.content.concat(this.subtract(et).content)):this},append:function(et){return et=OrderedMap.from(et),et.size?new OrderedMap(this.subtract(et).content.concat(et.content)):this},subtract:function(et){var dt=this;et=OrderedMap.from(et);for(var $t=0;$t<et.content.length;$t+=2)dt=dt.remove(et.content[$t]);return dt},toObject:function(){var et={};return this.forEach(function(dt,$t){et[dt]=$t}),et},get size(){return this.content.length>>1}};OrderedMap.from=function(et){if(et instanceof OrderedMap)return et;var dt=[];if(et)for(var $t in et)dt.push($t,et[$t]);return new OrderedMap(dt)};function findDiffStart(et,dt,$t){for(let kt=0;;kt++){if(kt==et.childCount||kt==dt.childCount)return et.childCount==dt.childCount?null:$t;let Tt=et.child(kt),Dt=dt.child(kt);if(Tt==Dt){$t+=Tt.nodeSize;continue}if(!Tt.sameMarkup(Dt))return $t;if(Tt.isText&&Tt.text!=Dt.text){for(let Ft=0;Tt.text[Ft]==Dt.text[Ft];Ft++)$t++;return $t}if(Tt.content.size||Dt.content.size){let Ft=findDiffStart(Tt.content,Dt.content,$t+1);if(Ft!=null)return Ft}$t+=Tt.nodeSize}}function findDiffEnd(et,dt,$t,kt){for(let Tt=et.childCount,Dt=dt.childCount;;){if(Tt==0||Dt==0)return Tt==Dt?null:{a:$t,b:kt};let Ft=et.child(--Tt),Ut=dt.child(--Dt),Ht=Ft.nodeSize;if(Ft==Ut){$t-=Ht,kt-=Ht;continue}if(!Ft.sameMarkup(Ut))return{a:$t,b:kt};if(Ft.isText&&Ft.text!=Ut.text){let Kt=0,Yt=Math.min(Ft.text.length,Ut.text.length);for(;Kt<Yt&&Ft.text[Ft.text.length-Kt-1]==Ut.text[Ut.text.length-Kt-1];)Kt++,$t--,kt--;return{a:$t,b:kt}}if(Ft.content.size||Ut.content.size){let Kt=findDiffEnd(Ft.content,Ut.content,$t-1,kt-1);if(Kt)return Kt}$t-=Ht,kt-=Ht}}class Fragment{constructor(dt,$t){if(this.content=dt,this.size=$t||0,$t==null)for(let kt=0;kt<dt.length;kt++)this.size+=dt[kt].nodeSize}nodesBetween(dt,$t,kt,Tt=0,Dt){for(let Ft=0,Ut=0;Ut<$t;Ft++){let Ht=this.content[Ft],Kt=Ut+Ht.nodeSize;if(Kt>dt&&kt(Ht,Tt+Ut,Dt||null,Ft)!==!1&&Ht.content.size){let Yt=Ut+1;Ht.nodesBetween(Math.max(0,dt-Yt),Math.min(Ht.content.size,$t-Yt),kt,Tt+Yt)}Ut=Kt}}descendants(dt){this.nodesBetween(0,this.size,dt)}textBetween(dt,$t,kt,Tt){let Dt="",Ft=!0;return this.nodesBetween(dt,$t,(Ut,Ht)=>{let Kt=Ut.isText?Ut.text.slice(Math.max(dt,Ht)-Ht,$t-Ht):Ut.isLeaf?Tt?typeof Tt=="function"?Tt(Ut):Tt:Ut.type.spec.leafText?Ut.type.spec.leafText(Ut):"":"";Ut.isBlock&&(Ut.isLeaf&&Kt||Ut.isTextblock)&&kt&&(Ft?Ft=!1:Dt+=kt),Dt+=Kt},0),Dt}append(dt){if(!dt.size)return this;if(!this.size)return dt;let $t=this.lastChild,kt=dt.firstChild,Tt=this.content.slice(),Dt=0;for($t.isText&&$t.sameMarkup(kt)&&(Tt[Tt.length-1]=$t.withText($t.text+kt.text),Dt=1);Dt<dt.content.length;Dt++)Tt.push(dt.content[Dt]);return new Fragment(Tt,this.size+dt.size)}cut(dt,$t=this.size){if(dt==0&&$t==this.size)return this;let kt=[],Tt=0;if($t>dt)for(let Dt=0,Ft=0;Ft<$t;Dt++){let Ut=this.content[Dt],Ht=Ft+Ut.nodeSize;Ht>dt&&((Ft<dt||Ht>$t)&&(Ut.isText?Ut=Ut.cut(Math.max(0,dt-Ft),Math.min(Ut.text.length,$t-Ft)):Ut=Ut.cut(Math.max(0,dt-Ft-1),Math.min(Ut.content.size,$t-Ft-1))),kt.push(Ut),Tt+=Ut.nodeSize),Ft=Ht}return new Fragment(kt,Tt)}cutByIndex(dt,$t){return dt==$t?Fragment.empty:dt==0&&$t==this.content.length?this:new Fragment(this.content.slice(dt,$t))}replaceChild(dt,$t){let kt=this.content[dt];if(kt==$t)return this;let Tt=this.content.slice(),Dt=this.size+$t.nodeSize-kt.nodeSize;return Tt[dt]=$t,new Fragment(Tt,Dt)}addToStart(dt){return new Fragment([dt].concat(this.content),this.size+dt.nodeSize)}addToEnd(dt){return new Fragment(this.content.concat(dt),this.size+dt.nodeSize)}eq(dt){if(this.content.length!=dt.content.length)return!1;for(let $t=0;$t<this.content.length;$t++)if(!this.content[$t].eq(dt.content[$t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(dt){let $t=this.content[dt];if(!$t)throw new RangeError("Index "+dt+" out of range for "+this);return $t}maybeChild(dt){return this.content[dt]||null}forEach(dt){for(let $t=0,kt=0;$t<this.content.length;$t++){let Tt=this.content[$t];dt(Tt,kt,$t),kt+=Tt.nodeSize}}findDiffStart(dt,$t=0){return findDiffStart(this,dt,$t)}findDiffEnd(dt,$t=this.size,kt=dt.size){return findDiffEnd(this,dt,$t,kt)}findIndex(dt){if(dt==0)return retIndex(0,dt);if(dt==this.size)return retIndex(this.content.length,dt);if(dt>this.size||dt<0)throw new RangeError(`Position ${dt} outside of fragment (${this})`);for(let $t=0,kt=0;;$t++){let Tt=this.child($t),Dt=kt+Tt.nodeSize;if(Dt>=dt)return Dt==dt?retIndex($t+1,Dt):retIndex($t,kt);kt=Dt}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(dt=>dt.toJSON()):null}static fromJSON(dt,$t){if(!$t)return Fragment.empty;if(!Array.isArray($t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment($t.map(dt.nodeFromJSON))}static fromArray(dt){if(!dt.length)return Fragment.empty;let $t,kt=0;for(let Tt=0;Tt<dt.length;Tt++){let Dt=dt[Tt];kt+=Dt.nodeSize,Tt&&Dt.isText&&dt[Tt-1].sameMarkup(Dt)?($t||($t=dt.slice(0,Tt)),$t[$t.length-1]=Dt.withText($t[$t.length-1].text+Dt.text)):$t&&$t.push(Dt)}return new Fragment($t||dt,kt)}static from(dt){if(!dt)return Fragment.empty;if(dt instanceof Fragment)return dt;if(Array.isArray(dt))return this.fromArray(dt);if(dt.attrs)return new Fragment([dt],dt.nodeSize);throw new RangeError("Can not convert "+dt+" to a Fragment"+(dt.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(et,dt){return found.index=et,found.offset=dt,found}function compareDeep(et,dt){if(et===dt)return!0;if(!(et&&typeof et=="object")||!(dt&&typeof dt=="object"))return!1;let $t=Array.isArray(et);if(Array.isArray(dt)!=$t)return!1;if($t){if(et.length!=dt.length)return!1;for(let kt=0;kt<et.length;kt++)if(!compareDeep(et[kt],dt[kt]))return!1}else{for(let kt in et)if(!(kt in dt)||!compareDeep(et[kt],dt[kt]))return!1;for(let kt in dt)if(!(kt in et))return!1}return!0}let Mark$1=class G2{constructor(dt,$t){this.type=dt,this.attrs=$t}addToSet(dt){let $t,kt=!1;for(let Tt=0;Tt<dt.length;Tt++){let Dt=dt[Tt];if(this.eq(Dt))return dt;if(this.type.excludes(Dt.type))$t||($t=dt.slice(0,Tt));else{if(Dt.type.excludes(this.type))return dt;!kt&&Dt.type.rank>this.type.rank&&($t||($t=dt.slice(0,Tt)),$t.push(this),kt=!0),$t&&$t.push(Dt)}}return $t||($t=dt.slice()),kt||$t.push(this),$t}removeFromSet(dt){for(let $t=0;$t<dt.length;$t++)if(this.eq(dt[$t]))return dt.slice(0,$t).concat(dt.slice($t+1));return dt}isInSet(dt){for(let $t=0;$t<dt.length;$t++)if(this.eq(dt[$t]))return!0;return!1}eq(dt){return this==dt||this.type==dt.type&&compareDeep(this.attrs,dt.attrs)}toJSON(){let dt={type:this.type.name};for(let $t in this.attrs){dt.attrs=this.attrs;break}return dt}static fromJSON(dt,$t){if(!$t)throw new RangeError("Invalid input for Mark.fromJSON");let kt=dt.marks[$t.type];if(!kt)throw new RangeError(`There is no mark type ${$t.type} in this schema`);let Tt=kt.create($t.attrs);return kt.checkAttrs(Tt.attrs),Tt}static sameSet(dt,$t){if(dt==$t)return!0;if(dt.length!=$t.length)return!1;for(let kt=0;kt<dt.length;kt++)if(!dt[kt].eq($t[kt]))return!1;return!0}static setFrom(dt){if(!dt||Array.isArray(dt)&&dt.length==0)return G2.none;if(dt instanceof G2)return[dt];let $t=dt.slice();return $t.sort((kt,Tt)=>kt.type.rank-Tt.type.rank),$t}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(dt,$t,kt){this.content=dt,this.openStart=$t,this.openEnd=kt}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(dt,$t){let kt=insertInto(this.content,dt+this.openStart,$t);return kt&&new Slice(kt,this.openStart,this.openEnd)}removeBetween(dt,$t){return new Slice(removeRange(this.content,dt+this.openStart,$t+this.openStart),this.openStart,this.openEnd)}eq(dt){return this.content.eq(dt.content)&&this.openStart==dt.openStart&&this.openEnd==dt.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let dt={content:this.content.toJSON()};return this.openStart>0&&(dt.openStart=this.openStart),this.openEnd>0&&(dt.openEnd=this.openEnd),dt}static fromJSON(dt,$t){if(!$t)return Slice.empty;let kt=$t.openStart||0,Tt=$t.openEnd||0;if(typeof kt!="number"||typeof Tt!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(dt,$t.content),kt,Tt)}static maxOpen(dt,$t=!0){let kt=0,Tt=0;for(let Dt=dt.firstChild;Dt&&!Dt.isLeaf&&($t||!Dt.type.spec.isolating);Dt=Dt.firstChild)kt++;for(let Dt=dt.lastChild;Dt&&!Dt.isLeaf&&($t||!Dt.type.spec.isolating);Dt=Dt.lastChild)Tt++;return new Slice(dt,kt,Tt)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(et,dt,$t){let{index:kt,offset:Tt}=et.findIndex(dt),Dt=et.maybeChild(kt),{index:Ft,offset:Ut}=et.findIndex($t);if(Tt==dt||Dt.isText){if(Ut!=$t&&!et.child(Ft).isText)throw new RangeError("Removing non-flat range");return et.cut(0,dt).append(et.cut($t))}if(kt!=Ft)throw new RangeError("Removing non-flat range");return et.replaceChild(kt,Dt.copy(removeRange(Dt.content,dt-Tt-1,$t-Tt-1)))}function insertInto(et,dt,$t,kt){let{index:Tt,offset:Dt}=et.findIndex(dt),Ft=et.maybeChild(Tt);if(Dt==dt||Ft.isText)return kt&&!kt.canReplace(Tt,Tt,$t)?null:et.cut(0,dt).append($t).append(et.cut(dt));let Ut=insertInto(Ft.content,dt-Dt-1,$t,Ft);return Ut&&et.replaceChild(Tt,Ft.copy(Ut))}function replace(et,dt,$t){if($t.openStart>et.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(et.depth-$t.openStart!=dt.depth-$t.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(et,dt,$t,0)}function replaceOuter(et,dt,$t,kt){let Tt=et.index(kt),Dt=et.node(kt);if(Tt==dt.index(kt)&&kt<et.depth-$t.openStart){let Ft=replaceOuter(et,dt,$t,kt+1);return Dt.copy(Dt.content.replaceChild(Tt,Ft))}else if($t.content.size)if(!$t.openStart&&!$t.openEnd&&et.depth==kt&&dt.depth==kt){let Ft=et.parent,Ut=Ft.content;return close(Ft,Ut.cut(0,et.parentOffset).append($t.content).append(Ut.cut(dt.parentOffset)))}else{let{start:Ft,end:Ut}=prepareSliceForReplace($t,et);return close(Dt,replaceThreeWay(et,Ft,Ut,dt,kt))}else return close(Dt,replaceTwoWay(et,dt,kt))}function checkJoin(et,dt){if(!dt.type.compatibleContent(et.type))throw new ReplaceError("Cannot join "+dt.type.name+" onto "+et.type.name)}function joinable$1(et,dt,$t){let kt=et.node($t);return checkJoin(kt,dt.node($t)),kt}function addNode(et,dt){let $t=dt.length-1;$t>=0&&et.isText&&et.sameMarkup(dt[$t])?dt[$t]=et.withText(dt[$t].text+et.text):dt.push(et)}function addRange(et,dt,$t,kt){let Tt=(dt||et).node($t),Dt=0,Ft=dt?dt.index($t):Tt.childCount;et&&(Dt=et.index($t),et.depth>$t?Dt++:et.textOffset&&(addNode(et.nodeAfter,kt),Dt++));for(let Ut=Dt;Ut<Ft;Ut++)addNode(Tt.child(Ut),kt);dt&&dt.depth==$t&&dt.textOffset&&addNode(dt.nodeBefore,kt)}function close(et,dt){return et.type.checkContent(dt),et.copy(dt)}function replaceThreeWay(et,dt,$t,kt,Tt){let Dt=et.depth>Tt&&joinable$1(et,dt,Tt+1),Ft=kt.depth>Tt&&joinable$1($t,kt,Tt+1),Ut=[];return addRange(null,et,Tt,Ut),Dt&&Ft&&dt.index(Tt)==$t.index(Tt)?(checkJoin(Dt,Ft),addNode(close(Dt,replaceThreeWay(et,dt,$t,kt,Tt+1)),Ut)):(Dt&&addNode(close(Dt,replaceTwoWay(et,dt,Tt+1)),Ut),addRange(dt,$t,Tt,Ut),Ft&&addNode(close(Ft,replaceTwoWay($t,kt,Tt+1)),Ut)),addRange(kt,null,Tt,Ut),new Fragment(Ut)}function replaceTwoWay(et,dt,$t){let kt=[];if(addRange(null,et,$t,kt),et.depth>$t){let Tt=joinable$1(et,dt,$t+1);addNode(close(Tt,replaceTwoWay(et,dt,$t+1)),kt)}return addRange(dt,null,$t,kt),new Fragment(kt)}function prepareSliceForReplace(et,dt){let $t=dt.depth-et.openStart,Tt=dt.node($t).copy(et.content);for(let Dt=$t-1;Dt>=0;Dt--)Tt=dt.node(Dt).copy(Fragment.from(Tt));return{start:Tt.resolveNoCache(et.openStart+$t),end:Tt.resolveNoCache(Tt.content.size-et.openEnd-$t)}}class ResolvedPos{constructor(dt,$t,kt){this.pos=dt,this.path=$t,this.parentOffset=kt,this.depth=$t.length/3-1}resolveDepth(dt){return dt==null?this.depth:dt<0?this.depth+dt:dt}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(dt){return this.path[this.resolveDepth(dt)*3]}index(dt){return this.path[this.resolveDepth(dt)*3+1]}indexAfter(dt){return dt=this.resolveDepth(dt),this.index(dt)+(dt==this.depth&&!this.textOffset?0:1)}start(dt){return dt=this.resolveDepth(dt),dt==0?0:this.path[dt*3-1]+1}end(dt){return dt=this.resolveDepth(dt),this.start(dt)+this.node(dt).content.size}before(dt){if(dt=this.resolveDepth(dt),!dt)throw new RangeError("There is no position before the top-level node");return dt==this.depth+1?this.pos:this.path[dt*3-1]}after(dt){if(dt=this.resolveDepth(dt),!dt)throw new RangeError("There is no position after the top-level node");return dt==this.depth+1?this.pos:this.path[dt*3-1]+this.path[dt*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let dt=this.parent,$t=this.index(this.depth);if($t==dt.childCount)return null;let kt=this.pos-this.path[this.path.length-1],Tt=dt.child($t);return kt?dt.child($t).cut(kt):Tt}get nodeBefore(){let dt=this.index(this.depth),$t=this.pos-this.path[this.path.length-1];return $t?this.parent.child(dt).cut(0,$t):dt==0?null:this.parent.child(dt-1)}posAtIndex(dt,$t){$t=this.resolveDepth($t);let kt=this.path[$t*3],Tt=$t==0?0:this.path[$t*3-1]+1;for(let Dt=0;Dt<dt;Dt++)Tt+=kt.child(Dt).nodeSize;return Tt}marks(){let dt=this.parent,$t=this.index();if(dt.content.size==0)return Mark$1.none;if(this.textOffset)return dt.child($t).marks;let kt=dt.maybeChild($t-1),Tt=dt.maybeChild($t);if(!kt){let Ut=kt;kt=Tt,Tt=Ut}let Dt=kt.marks;for(var Ft=0;Ft<Dt.length;Ft++)Dt[Ft].type.spec.inclusive===!1&&(!Tt||!Dt[Ft].isInSet(Tt.marks))&&(Dt=Dt[Ft--].removeFromSet(Dt));return Dt}marksAcross(dt){let $t=this.parent.maybeChild(this.index());if(!$t||!$t.isInline)return null;let kt=$t.marks,Tt=dt.parent.maybeChild(dt.index());for(var Dt=0;Dt<kt.length;Dt++)kt[Dt].type.spec.inclusive===!1&&(!Tt||!kt[Dt].isInSet(Tt.marks))&&(kt=kt[Dt--].removeFromSet(kt));return kt}sharedDepth(dt){for(let $t=this.depth;$t>0;$t--)if(this.start($t)<=dt&&this.end($t)>=dt)return $t;return 0}blockRange(dt=this,$t){if(dt.pos<this.pos)return dt.blockRange(this);for(let kt=this.depth-(this.parent.inlineContent||this.pos==dt.pos?1:0);kt>=0;kt--)if(dt.pos<=this.end(kt)&&(!$t||$t(this.node(kt))))return new NodeRange(this,dt,kt);return null}sameParent(dt){return this.pos-this.parentOffset==dt.pos-dt.parentOffset}max(dt){return dt.pos>this.pos?dt:this}min(dt){return dt.pos<this.pos?dt:this}toString(){let dt="";for(let $t=1;$t<=this.depth;$t++)dt+=(dt?"/":"")+this.node($t).type.name+"_"+this.index($t-1);return dt+":"+this.parentOffset}static resolve(dt,$t){if(!($t>=0&&$t<=dt.content.size))throw new RangeError("Position "+$t+" out of range");let kt=[],Tt=0,Dt=$t;for(let Ft=dt;;){let{index:Ut,offset:Ht}=Ft.content.findIndex(Dt),Kt=Dt-Ht;if(kt.push(Ft,Ut,Tt+Ht),!Kt||(Ft=Ft.child(Ut),Ft.isText))break;Dt=Kt-1,Tt+=Ht+1}return new ResolvedPos($t,kt,Dt)}static resolveCached(dt,$t){let kt=resolveCache.get(dt);if(kt)for(let Dt=0;Dt<kt.elts.length;Dt++){let Ft=kt.elts[Dt];if(Ft.pos==$t)return Ft}else resolveCache.set(dt,kt=new ResolveCache);let Tt=kt.elts[kt.i]=ResolvedPos.resolve(dt,$t);return kt.i=(kt.i+1)%resolveCacheSize,Tt}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(dt,$t,kt){this.$from=dt,this.$to=$t,this.depth=kt}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class W2{constructor(dt,$t,kt,Tt=Mark$1.none){this.type=dt,this.attrs=$t,this.marks=Tt,this.content=kt||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(dt){return this.content.child(dt)}maybeChild(dt){return this.content.maybeChild(dt)}forEach(dt){this.content.forEach(dt)}nodesBetween(dt,$t,kt,Tt=0){this.content.nodesBetween(dt,$t,kt,Tt,this)}descendants(dt){this.nodesBetween(0,this.content.size,dt)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(dt,$t,kt,Tt){return this.content.textBetween(dt,$t,kt,Tt)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(dt){return this==dt||this.sameMarkup(dt)&&this.content.eq(dt.content)}sameMarkup(dt){return this.hasMarkup(dt.type,dt.attrs,dt.marks)}hasMarkup(dt,$t,kt){return this.type==dt&&compareDeep(this.attrs,$t||dt.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,kt||Mark$1.none)}copy(dt=null){return dt==this.content?this:new W2(this.type,this.attrs,dt,this.marks)}mark(dt){return dt==this.marks?this:new W2(this.type,this.attrs,this.content,dt)}cut(dt,$t=this.content.size){return dt==0&&$t==this.content.size?this:this.copy(this.content.cut(dt,$t))}slice(dt,$t=this.content.size,kt=!1){if(dt==$t)return Slice.empty;let Tt=this.resolve(dt),Dt=this.resolve($t),Ft=kt?0:Tt.sharedDepth($t),Ut=Tt.start(Ft),Kt=Tt.node(Ft).content.cut(Tt.pos-Ut,Dt.pos-Ut);return new Slice(Kt,Tt.depth-Ft,Dt.depth-Ft)}replace(dt,$t,kt){return replace(this.resolve(dt),this.resolve($t),kt)}nodeAt(dt){for(let $t=this;;){let{index:kt,offset:Tt}=$t.content.findIndex(dt);if($t=$t.maybeChild(kt),!$t)return null;if(Tt==dt||$t.isText)return $t;dt-=Tt+1}}childAfter(dt){let{index:$t,offset:kt}=this.content.findIndex(dt);return{node:this.content.maybeChild($t),index:$t,offset:kt}}childBefore(dt){if(dt==0)return{node:null,index:0,offset:0};let{index:$t,offset:kt}=this.content.findIndex(dt);if(kt<dt)return{node:this.content.child($t),index:$t,offset:kt};let Tt=this.content.child($t-1);return{node:Tt,index:$t-1,offset:kt-Tt.nodeSize}}resolve(dt){return ResolvedPos.resolveCached(this,dt)}resolveNoCache(dt){return ResolvedPos.resolve(this,dt)}rangeHasMark(dt,$t,kt){let Tt=!1;return $t>dt&&this.nodesBetween(dt,$t,Dt=>(kt.isInSet(Dt.marks)&&(Tt=!0),!Tt)),Tt}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let dt=this.type.name;return this.content.size&&(dt+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,dt)}contentMatchAt(dt){let $t=this.type.contentMatch.matchFragment(this.content,0,dt);if(!$t)throw new Error("Called contentMatchAt on a node with invalid content");return $t}canReplace(dt,$t,kt=Fragment.empty,Tt=0,Dt=kt.childCount){let Ft=this.contentMatchAt(dt).matchFragment(kt,Tt,Dt),Ut=Ft&&Ft.matchFragment(this.content,$t);if(!Ut||!Ut.validEnd)return!1;for(let Ht=Tt;Ht<Dt;Ht++)if(!this.type.allowsMarks(kt.child(Ht).marks))return!1;return!0}canReplaceWith(dt,$t,kt,Tt){if(Tt&&!this.type.allowsMarks(Tt))return!1;let Dt=this.contentMatchAt(dt).matchType(kt),Ft=Dt&&Dt.matchFragment(this.content,$t);return Ft?Ft.validEnd:!1}canAppend(dt){return dt.content.size?this.canReplace(this.childCount,this.childCount,dt.content):this.type.compatibleContent(dt.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let dt=Mark$1.none;for(let $t=0;$t<this.marks.length;$t++){let kt=this.marks[$t];kt.type.checkAttrs(kt.attrs),dt=kt.addToSet(dt)}if(!Mark$1.sameSet(dt,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map($t=>$t.type.name)}`);this.content.forEach($t=>$t.check())}toJSON(){let dt={type:this.type.name};for(let $t in this.attrs){dt.attrs=this.attrs;break}return this.content.size&&(dt.content=this.content.toJSON()),this.marks.length&&(dt.marks=this.marks.map($t=>$t.toJSON())),dt}static fromJSON(dt,$t){if(!$t)throw new RangeError("Invalid input for Node.fromJSON");let kt;if($t.marks){if(!Array.isArray($t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");kt=$t.marks.map(dt.markFromJSON)}if($t.type=="text"){if(typeof $t.text!="string")throw new RangeError("Invalid text node in JSON");return dt.text($t.text,kt)}let Tt=Fragment.fromJSON(dt,$t.content),Dt=dt.nodeType($t.type).create($t.attrs,Tt,kt);return Dt.type.checkAttrs(Dt.attrs),Dt}};Node$1.prototype.text=void 0;class TextNode extends Node$1{constructor(dt,$t,kt,Tt){if(super(dt,$t,null,Tt),!kt)throw new RangeError("Empty text nodes are not allowed");this.text=kt}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(dt,$t){return this.text.slice(dt,$t)}get nodeSize(){return this.text.length}mark(dt){return dt==this.marks?this:new TextNode(this.type,this.attrs,this.text,dt)}withText(dt){return dt==this.text?this:new TextNode(this.type,this.attrs,dt,this.marks)}cut(dt=0,$t=this.text.length){return dt==0&&$t==this.text.length?this:this.withText(this.text.slice(dt,$t))}eq(dt){return this.sameMarkup(dt)&&this.text==dt.text}toJSON(){let dt=super.toJSON();return dt.text=this.text,dt}}function wrapMarks(et,dt){for(let $t=et.length-1;$t>=0;$t--)dt=et[$t].type.name+"("+dt+")";return dt}class ContentMatch{constructor(dt){this.validEnd=dt,this.next=[],this.wrapCache=[]}static parse(dt,$t){let kt=new TokenStream(dt,$t);if(kt.next==null)return ContentMatch.empty;let Tt=parseExpr(kt);kt.next&&kt.err("Unexpected trailing text");let Dt=dfa(nfa(Tt));return checkForDeadEnds(Dt,kt),Dt}matchType(dt){for(let $t=0;$t<this.next.length;$t++)if(this.next[$t].type==dt)return this.next[$t].next;return null}matchFragment(dt,$t=0,kt=dt.childCount){let Tt=this;for(let Dt=$t;Tt&&Dt<kt;Dt++)Tt=Tt.matchType(dt.child(Dt).type);return Tt}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let dt=0;dt<this.next.length;dt++){let{type:$t}=this.next[dt];if(!($t.isText||$t.hasRequiredAttrs()))return $t}return null}compatible(dt){for(let $t=0;$t<this.next.length;$t++)for(let kt=0;kt<dt.next.length;kt++)if(this.next[$t].type==dt.next[kt].type)return!0;return!1}fillBefore(dt,$t=!1,kt=0){let Tt=[this];function Dt(Ft,Ut){let Ht=Ft.matchFragment(dt,kt);if(Ht&&(!$t||Ht.validEnd))return Fragment.from(Ut.map(Kt=>Kt.createAndFill()));for(let Kt=0;Kt<Ft.next.length;Kt++){let{type:Yt,next:Jt}=Ft.next[Kt];if(!(Yt.isText||Yt.hasRequiredAttrs())&&Tt.indexOf(Jt)==-1){Tt.push(Jt);let Zt=Dt(Jt,Ut.concat(Yt));if(Zt)return Zt}}return null}return Dt(this,[])}findWrapping(dt){for(let kt=0;kt<this.wrapCache.length;kt+=2)if(this.wrapCache[kt]==dt)return this.wrapCache[kt+1];let $t=this.computeWrapping(dt);return this.wrapCache.push(dt,$t),$t}computeWrapping(dt){let $t=Object.create(null),kt=[{match:this,type:null,via:null}];for(;kt.length;){let Tt=kt.shift(),Dt=Tt.match;if(Dt.matchType(dt)){let Ft=[];for(let Ut=Tt;Ut.type;Ut=Ut.via)Ft.push(Ut.type);return Ft.reverse()}for(let Ft=0;Ft<Dt.next.length;Ft++){let{type:Ut,next:Ht}=Dt.next[Ft];!Ut.isLeaf&&!Ut.hasRequiredAttrs()&&!(Ut.name in $t)&&(!Tt.type||Ht.validEnd)&&(kt.push({match:Ut.contentMatch,type:Ut,via:Tt}),$t[Ut.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(dt){if(dt>=this.next.length)throw new RangeError(`There's no ${dt}th edge in this content match`);return this.next[dt]}toString(){let dt=[];function $t(kt){dt.push(kt);for(let Tt=0;Tt<kt.next.length;Tt++)dt.indexOf(kt.next[Tt].next)==-1&&$t(kt.next[Tt].next)}return $t(this),dt.map((kt,Tt)=>{let Dt=Tt+(kt.validEnd?"*":" ")+" ";for(let Ft=0;Ft<kt.next.length;Ft++)Dt+=(Ft?", ":"")+kt.next[Ft].type.name+"->"+dt.indexOf(kt.next[Ft].next);return Dt}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(dt,$t){this.string=dt,this.nodeTypes=$t,this.inline=null,this.pos=0,this.tokens=dt.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(dt){return this.next==dt&&(this.pos++||!0)}err(dt){throw new SyntaxError(dt+" (in content expression '"+this.string+"')")}}function parseExpr(et){let dt=[];do dt.push(parseExprSeq(et));while(et.eat("|"));return dt.length==1?dt[0]:{type:"choice",exprs:dt}}function parseExprSeq(et){let dt=[];do dt.push(parseExprSubscript(et));while(et.next&&et.next!=")"&&et.next!="|");return dt.length==1?dt[0]:{type:"seq",exprs:dt}}function parseExprSubscript(et){let dt=parseExprAtom(et);for(;;)if(et.eat("+"))dt={type:"plus",expr:dt};else if(et.eat("*"))dt={type:"star",expr:dt};else if(et.eat("?"))dt={type:"opt",expr:dt};else if(et.eat("{"))dt=parseExprRange(et,dt);else break;return dt}function parseNum(et){/\D/.test(et.next)&&et.err("Expected number, got '"+et.next+"'");let dt=Number(et.next);return et.pos++,dt}function parseExprRange(et,dt){let $t=parseNum(et),kt=$t;return et.eat(",")&&(et.next!="}"?kt=parseNum(et):kt=-1),et.eat("}")||et.err("Unclosed braced range"),{type:"range",min:$t,max:kt,expr:dt}}function resolveName(et,dt){let $t=et.nodeTypes,kt=$t[dt];if(kt)return[kt];let Tt=[];for(let Dt in $t){let Ft=$t[Dt];Ft.isInGroup(dt)&&Tt.push(Ft)}return Tt.length==0&&et.err("No node type or group '"+dt+"' found"),Tt}function parseExprAtom(et){if(et.eat("(")){let dt=parseExpr(et);return et.eat(")")||et.err("Missing closing paren"),dt}else if(/\W/.test(et.next))et.err("Unexpected token '"+et.next+"'");else{let dt=resolveName(et,et.next).map($t=>(et.inline==null?et.inline=$t.isInline:et.inline!=$t.isInline&&et.err("Mixing inline and block content"),{type:"name",value:$t}));return et.pos++,dt.length==1?dt[0]:{type:"choice",exprs:dt}}}function nfa(et){let dt=[[]];return Tt(Dt(et,0),$t()),dt;function $t(){return dt.push([])-1}function kt(Ft,Ut,Ht){let Kt={term:Ht,to:Ut};return dt[Ft].push(Kt),Kt}function Tt(Ft,Ut){Ft.forEach(Ht=>Ht.to=Ut)}function Dt(Ft,Ut){if(Ft.type=="choice")return Ft.exprs.reduce((Ht,Kt)=>Ht.concat(Dt(Kt,Ut)),[]);if(Ft.type=="seq")for(let Ht=0;;Ht++){let Kt=Dt(Ft.exprs[Ht],Ut);if(Ht==Ft.exprs.length-1)return Kt;Tt(Kt,Ut=$t())}else if(Ft.type=="star"){let Ht=$t();return kt(Ut,Ht),Tt(Dt(Ft.expr,Ht),Ht),[kt(Ht)]}else if(Ft.type=="plus"){let Ht=$t();return Tt(Dt(Ft.expr,Ut),Ht),Tt(Dt(Ft.expr,Ht),Ht),[kt(Ht)]}else{if(Ft.type=="opt")return[kt(Ut)].concat(Dt(Ft.expr,Ut));if(Ft.type=="range"){let Ht=Ut;for(let Kt=0;Kt<Ft.min;Kt++){let Yt=$t();Tt(Dt(Ft.expr,Ht),Yt),Ht=Yt}if(Ft.max==-1)Tt(Dt(Ft.expr,Ht),Ht);else for(let Kt=Ft.min;Kt<Ft.max;Kt++){let Yt=$t();kt(Ht,Yt),Tt(Dt(Ft.expr,Ht),Yt),Ht=Yt}return[kt(Ht)]}else{if(Ft.type=="name")return[kt(Ut,void 0,Ft.value)];throw new Error("Unknown expr type")}}}}function cmp(et,dt){return dt-et}function nullFrom(et,dt){let $t=[];return kt(dt),$t.sort(cmp);function kt(Tt){let Dt=et[Tt];if(Dt.length==1&&!Dt[0].term)return kt(Dt[0].to);$t.push(Tt);for(let Ft=0;Ft<Dt.length;Ft++){let{term:Ut,to:Ht}=Dt[Ft];!Ut&&$t.indexOf(Ht)==-1&&kt(Ht)}}}function dfa(et){let dt=Object.create(null);return $t(nullFrom(et,0));function $t(kt){let Tt=[];kt.forEach(Ft=>{et[Ft].forEach(({term:Ut,to:Ht})=>{if(!Ut)return;let Kt;for(let Yt=0;Yt<Tt.length;Yt++)Tt[Yt][0]==Ut&&(Kt=Tt[Yt][1]);nullFrom(et,Ht).forEach(Yt=>{Kt||Tt.push([Ut,Kt=[]]),Kt.indexOf(Yt)==-1&&Kt.push(Yt)})})});let Dt=dt[kt.join(",")]=new ContentMatch(kt.indexOf(et.length-1)>-1);for(let Ft=0;Ft<Tt.length;Ft++){let Ut=Tt[Ft][1].sort(cmp);Dt.next.push({type:Tt[Ft][0],next:dt[Ut.join(",")]||$t(Ut)})}return Dt}}function checkForDeadEnds(et,dt){for(let $t=0,kt=[et];$t<kt.length;$t++){let Tt=kt[$t],Dt=!Tt.validEnd,Ft=[];for(let Ut=0;Ut<Tt.next.length;Ut++){let{type:Ht,next:Kt}=Tt.next[Ut];Ft.push(Ht.name),Dt&&!(Ht.isText||Ht.hasRequiredAttrs())&&(Dt=!1),kt.indexOf(Kt)==-1&&kt.push(Kt)}Dt&&dt.err("Only non-generatable nodes ("+Ft.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(et){let dt=Object.create(null);for(let $t in et){let kt=et[$t];if(!kt.hasDefault)return null;dt[$t]=kt.default}return dt}function computeAttrs(et,dt){let $t=Object.create(null);for(let kt in et){let Tt=dt&&dt[kt];if(Tt===void 0){let Dt=et[kt];if(Dt.hasDefault)Tt=Dt.default;else throw new RangeError("No value supplied for attribute "+kt)}$t[kt]=Tt}return $t}function checkAttrs(et,dt,$t,kt){for(let Tt in dt)if(!(Tt in et))throw new RangeError(`Unsupported attribute ${Tt} for ${$t} of type ${Tt}`);for(let Tt in et){let Dt=et[Tt];Dt.validate&&Dt.validate(dt[Tt])}}function initAttrs(et,dt){let $t=Object.create(null);if(dt)for(let kt in dt)$t[kt]=new Attribute(et,kt,dt[kt]);return $t}let NodeType$1=class nS{constructor(dt,$t,kt){this.name=dt,this.schema=$t,this.spec=kt,this.markSet=null,this.groups=kt.group?kt.group.split(" "):[],this.attrs=initAttrs(dt,kt.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(kt.inline||dt=="text"),this.isText=dt=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(dt){return this.groups.indexOf(dt)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let dt in this.attrs)if(this.attrs[dt].isRequired)return!0;return!1}compatibleContent(dt){return this==dt||this.contentMatch.compatible(dt.contentMatch)}computeAttrs(dt){return!dt&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,dt)}create(dt=null,$t,kt){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(dt),Fragment.from($t),Mark$1.setFrom(kt))}createChecked(dt=null,$t,kt){return $t=Fragment.from($t),this.checkContent($t),new Node$1(this,this.computeAttrs(dt),$t,Mark$1.setFrom(kt))}createAndFill(dt=null,$t,kt){if(dt=this.computeAttrs(dt),$t=Fragment.from($t),$t.size){let Ft=this.contentMatch.fillBefore($t);if(!Ft)return null;$t=Ft.append($t)}let Tt=this.contentMatch.matchFragment($t),Dt=Tt&&Tt.fillBefore(Fragment.empty,!0);return Dt?new Node$1(this,dt,$t.append(Dt),Mark$1.setFrom(kt)):null}validContent(dt){let $t=this.contentMatch.matchFragment(dt);if(!$t||!$t.validEnd)return!1;for(let kt=0;kt<dt.childCount;kt++)if(!this.allowsMarks(dt.child(kt).marks))return!1;return!0}checkContent(dt){if(!this.validContent(dt))throw new RangeError(`Invalid content for node ${this.name}: ${dt.toString().slice(0,50)}`)}checkAttrs(dt){checkAttrs(this.attrs,dt,"node",this.name)}allowsMarkType(dt){return this.markSet==null||this.markSet.indexOf(dt)>-1}allowsMarks(dt){if(this.markSet==null)return!0;for(let $t=0;$t<dt.length;$t++)if(!this.allowsMarkType(dt[$t].type))return!1;return!0}allowedMarks(dt){if(this.markSet==null)return dt;let $t;for(let kt=0;kt<dt.length;kt++)this.allowsMarkType(dt[kt].type)?$t&&$t.push(dt[kt]):$t||($t=dt.slice(0,kt));return $t?$t.length?$t:Mark$1.none:dt}static compile(dt,$t){let kt=Object.create(null);dt.forEach((Dt,Ft)=>kt[Dt]=new nS(Dt,$t,Ft));let Tt=$t.spec.topNode||"doc";if(!kt[Tt])throw new RangeError("Schema is missing its top node type ('"+Tt+"')");if(!kt.text)throw new RangeError("Every schema needs a 'text' type");for(let Dt in kt.text.attrs)throw new RangeError("The text node type should not have attributes");return kt}};function validateType(et,dt,$t){let kt=$t.split("|");return Tt=>{let Dt=Tt===null?"null":typeof Tt;if(kt.indexOf(Dt)<0)throw new RangeError(`Expected value of type ${kt} for attribute ${dt} on type ${et}, got ${Dt}`)}}class Attribute{constructor(dt,$t,kt){this.hasDefault=Object.prototype.hasOwnProperty.call(kt,"default"),this.default=kt.default,this.validate=typeof kt.validate=="string"?validateType(dt,$t,kt.validate):kt.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(dt,$t,kt,Tt){this.name=dt,this.rank=$t,this.schema=kt,this.spec=Tt,this.attrs=initAttrs(dt,Tt.attrs),this.excluded=null;let Dt=defaultAttrs(this.attrs);this.instance=Dt?new Mark$1(this,Dt):null}create(dt=null){return!dt&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,dt))}static compile(dt,$t){let kt=Object.create(null),Tt=0;return dt.forEach((Dt,Ft)=>kt[Dt]=new MarkType(Dt,Tt++,$t,Ft)),kt}removeFromSet(dt){for(var $t=0;$t<dt.length;$t++)dt[$t].type==this&&(dt=dt.slice(0,$t).concat(dt.slice($t+1)),$t--);return dt}isInSet(dt){for(let $t=0;$t<dt.length;$t++)if(dt[$t].type==this)return dt[$t]}checkAttrs(dt){checkAttrs(this.attrs,dt,"mark",this.name)}excludes(dt){return this.excluded.indexOf(dt)>-1}}class Schema{constructor(dt){this.linebreakReplacement=null,this.cached=Object.create(null);let $t=this.spec={};for(let Tt in dt)$t[Tt]=dt[Tt];$t.nodes=OrderedMap.from(dt.nodes),$t.marks=OrderedMap.from(dt.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let kt=Object.create(null);for(let Tt in this.nodes){if(Tt in this.marks)throw new RangeError(Tt+" can not be both a node and a mark");let Dt=this.nodes[Tt],Ft=Dt.spec.content||"",Ut=Dt.spec.marks;if(Dt.contentMatch=kt[Ft]||(kt[Ft]=ContentMatch.parse(Ft,this.nodes)),Dt.inlineContent=Dt.contentMatch.inlineContent,Dt.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!Dt.isInline||!Dt.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=Dt}Dt.markSet=Ut=="_"?null:Ut?gatherMarks(this,Ut.split(" ")):Ut==""||!Dt.inlineContent?[]:null}for(let Tt in this.marks){let Dt=this.marks[Tt],Ft=Dt.spec.excludes;Dt.excluded=Ft==null?[Dt]:Ft==""?[]:gatherMarks(this,Ft.split(" "))}this.nodeFromJSON=Tt=>Node$1.fromJSON(this,Tt),this.markFromJSON=Tt=>Mark$1.fromJSON(this,Tt),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(dt,$t=null,kt,Tt){if(typeof dt=="string")dt=this.nodeType(dt);else if(dt instanceof NodeType$1){if(dt.schema!=this)throw new RangeError("Node type from different schema used ("+dt.name+")")}else throw new RangeError("Invalid node type: "+dt);return dt.createChecked($t,kt,Tt)}text(dt,$t){let kt=this.nodes.text;return new TextNode(kt,kt.defaultAttrs,dt,Mark$1.setFrom($t))}mark(dt,$t){return typeof dt=="string"&&(dt=this.marks[dt]),dt.create($t)}nodeType(dt){let $t=this.nodes[dt];if(!$t)throw new RangeError("Unknown node type: "+dt);return $t}}function gatherMarks(et,dt){let $t=[];for(let kt=0;kt<dt.length;kt++){let Tt=dt[kt],Dt=et.marks[Tt],Ft=Dt;if(Dt)$t.push(Dt);else for(let Ut in et.marks){let Ht=et.marks[Ut];(Tt=="_"||Ht.spec.group&&Ht.spec.group.split(" ").indexOf(Tt)>-1)&&$t.push(Ft=Ht)}if(!Ft)throw new SyntaxError("Unknown mark type: '"+dt[kt]+"'")}return $t}function isTagRule(et){return et.tag!=null}function isStyleRule(et){return et.style!=null}class DOMParser{constructor(dt,$t){this.schema=dt,this.rules=$t,this.tags=[],this.styles=[];let kt=this.matchedStyles=[];$t.forEach(Tt=>{if(isTagRule(Tt))this.tags.push(Tt);else if(isStyleRule(Tt)){let Dt=/[^=]*/.exec(Tt.style)[0];kt.indexOf(Dt)<0&&kt.push(Dt),this.styles.push(Tt)}}),this.normalizeLists=!this.tags.some(Tt=>{if(!/^(ul|ol)\b/.test(Tt.tag)||!Tt.node)return!1;let Dt=dt.nodes[Tt.node];return Dt.contentMatch.matchType(Dt)})}parse(dt,$t={}){let kt=new ParseContext(this,$t,!1);return kt.addAll(dt,Mark$1.none,$t.from,$t.to),kt.finish()}parseSlice(dt,$t={}){let kt=new ParseContext(this,$t,!0);return kt.addAll(dt,Mark$1.none,$t.from,$t.to),Slice.maxOpen(kt.finish())}matchTag(dt,$t,kt){for(let Tt=kt?this.tags.indexOf(kt)+1:0;Tt<this.tags.length;Tt++){let Dt=this.tags[Tt];if(matches(dt,Dt.tag)&&(Dt.namespace===void 0||dt.namespaceURI==Dt.namespace)&&(!Dt.context||$t.matchesContext(Dt.context))){if(Dt.getAttrs){let Ft=Dt.getAttrs(dt);if(Ft===!1)continue;Dt.attrs=Ft||void 0}return Dt}}}matchStyle(dt,$t,kt,Tt){for(let Dt=Tt?this.styles.indexOf(Tt)+1:0;Dt<this.styles.length;Dt++){let Ft=this.styles[Dt],Ut=Ft.style;if(!(Ut.indexOf(dt)!=0||Ft.context&&!kt.matchesContext(Ft.context)||Ut.length>dt.length&&(Ut.charCodeAt(dt.length)!=61||Ut.slice(dt.length+1)!=$t))){if(Ft.getAttrs){let Ht=Ft.getAttrs($t);if(Ht===!1)continue;Ft.attrs=Ht||void 0}return Ft}}}static schemaRules(dt){let $t=[];function kt(Tt){let Dt=Tt.priority==null?50:Tt.priority,Ft=0;for(;Ft<$t.length;Ft++){let Ut=$t[Ft];if((Ut.priority==null?50:Ut.priority)<Dt)break}$t.splice(Ft,0,Tt)}for(let Tt in dt.marks){let Dt=dt.marks[Tt].spec.parseDOM;Dt&&Dt.forEach(Ft=>{kt(Ft=copy$1(Ft)),Ft.mark||Ft.ignore||Ft.clearMark||(Ft.mark=Tt)})}for(let Tt in dt.nodes){let Dt=dt.nodes[Tt].spec.parseDOM;Dt&&Dt.forEach(Ft=>{kt(Ft=copy$1(Ft)),Ft.node||Ft.ignore||Ft.mark||(Ft.node=Tt)})}return $t}static fromSchema(dt){return dt.cached.domParser||(dt.cached.domParser=new DOMParser(dt,DOMParser.schemaRules(dt)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(et,dt,$t){return dt!=null?(dt?OPT_PRESERVE_WS:0)|(dt==="full"?OPT_PRESERVE_WS_FULL:0):et&&et.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:$t&~OPT_OPEN_LEFT}class NodeContext{constructor(dt,$t,kt,Tt,Dt,Ft){this.type=dt,this.attrs=$t,this.marks=kt,this.solid=Tt,this.options=Ft,this.content=[],this.activeMarks=Mark$1.none,this.match=Dt||(Ft&OPT_OPEN_LEFT?null:dt.contentMatch)}findWrapping(dt){if(!this.match){if(!this.type)return[];let $t=this.type.contentMatch.fillBefore(Fragment.from(dt));if($t)this.match=this.type.contentMatch.matchFragment($t);else{let kt=this.type.contentMatch,Tt;return(Tt=kt.findWrapping(dt.type))?(this.match=kt,Tt):null}}return this.match.findWrapping(dt.type)}finish(dt){if(!(this.options&OPT_PRESERVE_WS)){let kt=this.content[this.content.length-1],Tt;if(kt&&kt.isText&&(Tt=/[ \t\r\n\u000c]+$/.exec(kt.text))){let Dt=kt;kt.text.length==Tt[0].length?this.content.pop():this.content[this.content.length-1]=Dt.withText(Dt.text.slice(0,Dt.text.length-Tt[0].length))}}let $t=Fragment.from(this.content);return!dt&&this.match&&($t=$t.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,$t,this.marks):$t}inlineContext(dt){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:dt.parentNode&&!blockTags.hasOwnProperty(dt.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(dt,$t,kt){this.parser=dt,this.options=$t,this.isOpen=kt,this.open=0,this.localPreserveWS=!1;let Tt=$t.topNode,Dt,Ft=wsOptionsFor(null,$t.preserveWhitespace,0)|(kt?OPT_OPEN_LEFT:0);Tt?Dt=new NodeContext(Tt.type,Tt.attrs,Mark$1.none,!0,$t.topMatch||Tt.type.contentMatch,Ft):kt?Dt=new NodeContext(null,null,Mark$1.none,!0,null,Ft):Dt=new NodeContext(dt.schema.topNodeType,null,Mark$1.none,!0,null,Ft),this.nodes=[Dt],this.find=$t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(dt,$t){dt.nodeType==3?this.addTextNode(dt,$t):dt.nodeType==1&&this.addElement(dt,$t)}addTextNode(dt,$t){let kt=dt.nodeValue,Tt=this.top,Dt=Tt.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(Tt.options&OPT_PRESERVE_WS)>0;if(Dt==="full"||Tt.inlineContext(dt)||/[^ \t\r\n\u000c]/.test(kt)){if(Dt)Dt!=="full"?kt=kt.replace(/\r?\n|\r/g," "):kt=kt.replace(/\r\n?/g,`
`);else if(kt=kt.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(kt)&&this.open==this.nodes.length-1){let Ft=Tt.content[Tt.content.length-1],Ut=dt.previousSibling;(!Ft||Ut&&Ut.nodeName=="BR"||Ft.isText&&/[ \t\r\n\u000c]$/.test(Ft.text))&&(kt=kt.slice(1))}kt&&this.insertNode(this.parser.schema.text(kt),$t,!/\S/.test(kt)),this.findInText(dt)}else this.findInside(dt)}addElement(dt,$t,kt){let Tt=this.localPreserveWS,Dt=this.top;(dt.tagName=="PRE"||/pre/.test(dt.style&&dt.style.whiteSpace))&&(this.localPreserveWS=!0);let Ft=dt.nodeName.toLowerCase(),Ut;listTags.hasOwnProperty(Ft)&&this.parser.normalizeLists&&normalizeList(dt);let Ht=this.options.ruleFromNode&&this.options.ruleFromNode(dt)||(Ut=this.parser.matchTag(dt,this,kt));e:if(Ht?Ht.ignore:ignoreTags.hasOwnProperty(Ft))this.findInside(dt),this.ignoreFallback(dt,$t);else if(!Ht||Ht.skip||Ht.closeParent){Ht&&Ht.closeParent?this.open=Math.max(0,this.open-1):Ht&&Ht.skip.nodeType&&(dt=Ht.skip);let Kt,Yt=this.needsBlock;if(blockTags.hasOwnProperty(Ft))Dt.content.length&&Dt.content[0].isInline&&this.open&&(this.open--,Dt=this.top),Kt=!0,Dt.type||(this.needsBlock=!0);else if(!dt.firstChild){this.leafFallback(dt,$t);break e}let Jt=Ht&&Ht.skip?$t:this.readStyles(dt,$t);Jt&&this.addAll(dt,Jt),Kt&&this.sync(Dt),this.needsBlock=Yt}else{let Kt=this.readStyles(dt,$t);Kt&&this.addElementByRule(dt,Ht,Kt,Ht.consuming===!1?Ut:void 0)}this.localPreserveWS=Tt}leafFallback(dt,$t){dt.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(dt.ownerDocument.createTextNode(`
`),$t)}ignoreFallback(dt,$t){dt.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),$t,!0)}readStyles(dt,$t){let kt=dt.style;if(kt&&kt.length)for(let Tt=0;Tt<this.parser.matchedStyles.length;Tt++){let Dt=this.parser.matchedStyles[Tt],Ft=kt.getPropertyValue(Dt);if(Ft)for(let Ut=void 0;;){let Ht=this.parser.matchStyle(Dt,Ft,this,Ut);if(!Ht)break;if(Ht.ignore)return null;if(Ht.clearMark?$t=$t.filter(Kt=>!Ht.clearMark(Kt)):$t=$t.concat(this.parser.schema.marks[Ht.mark].create(Ht.attrs)),Ht.consuming===!1)Ut=Ht;else break}}return $t}addElementByRule(dt,$t,kt,Tt){let Dt,Ft;if($t.node)if(Ft=this.parser.schema.nodes[$t.node],Ft.isLeaf)this.insertNode(Ft.create($t.attrs),kt,dt.nodeName=="BR")||this.leafFallback(dt,kt);else{let Ht=this.enter(Ft,$t.attrs||null,kt,$t.preserveWhitespace);Ht&&(Dt=!0,kt=Ht)}else{let Ht=this.parser.schema.marks[$t.mark];kt=kt.concat(Ht.create($t.attrs))}let Ut=this.top;if(Ft&&Ft.isLeaf)this.findInside(dt);else if(Tt)this.addElement(dt,kt,Tt);else if($t.getContent)this.findInside(dt),$t.getContent(dt,this.parser.schema).forEach(Ht=>this.insertNode(Ht,kt,!1));else{let Ht=dt;typeof $t.contentElement=="string"?Ht=dt.querySelector($t.contentElement):typeof $t.contentElement=="function"?Ht=$t.contentElement(dt):$t.contentElement&&(Ht=$t.contentElement),this.findAround(dt,Ht,!0),this.addAll(Ht,kt),this.findAround(dt,Ht,!1)}Dt&&this.sync(Ut)&&this.open--}addAll(dt,$t,kt,Tt){let Dt=kt||0;for(let Ft=kt?dt.childNodes[kt]:dt.firstChild,Ut=Tt==null?null:dt.childNodes[Tt];Ft!=Ut;Ft=Ft.nextSibling,++Dt)this.findAtPoint(dt,Dt),this.addDOM(Ft,$t);this.findAtPoint(dt,Dt)}findPlace(dt,$t,kt){let Tt,Dt;for(let Ft=this.open,Ut=0;Ft>=0;Ft--){let Ht=this.nodes[Ft],Kt=Ht.findWrapping(dt);if(Kt&&(!Tt||Tt.length>Kt.length+Ut)&&(Tt=Kt,Dt=Ht,!Kt.length))break;if(Ht.solid){if(kt)break;Ut+=2}}if(!Tt)return null;this.sync(Dt);for(let Ft=0;Ft<Tt.length;Ft++)$t=this.enterInner(Tt[Ft],null,$t,!1);return $t}insertNode(dt,$t,kt){if(dt.isInline&&this.needsBlock&&!this.top.type){let Dt=this.textblockFromContext();Dt&&($t=this.enterInner(Dt,null,$t))}let Tt=this.findPlace(dt,$t,kt);if(Tt){this.closeExtra();let Dt=this.top;Dt.match&&(Dt.match=Dt.match.matchType(dt.type));let Ft=Mark$1.none;for(let Ut of Tt.concat(dt.marks))(Dt.type?Dt.type.allowsMarkType(Ut.type):markMayApply(Ut.type,dt.type))&&(Ft=Ut.addToSet(Ft));return Dt.content.push(dt.mark(Ft)),!0}return!1}enter(dt,$t,kt,Tt){let Dt=this.findPlace(dt.create($t),kt,!1);return Dt&&(Dt=this.enterInner(dt,$t,kt,!0,Tt)),Dt}enterInner(dt,$t,kt,Tt=!1,Dt){this.closeExtra();let Ft=this.top;Ft.match=Ft.match&&Ft.match.matchType(dt);let Ut=wsOptionsFor(dt,Dt,Ft.options);Ft.options&OPT_OPEN_LEFT&&Ft.content.length==0&&(Ut|=OPT_OPEN_LEFT);let Ht=Mark$1.none;return kt=kt.filter(Kt=>(Ft.type?Ft.type.allowsMarkType(Kt.type):markMayApply(Kt.type,dt))?(Ht=Kt.addToSet(Ht),!1):!0),this.nodes.push(new NodeContext(dt,$t,Ht,Tt,null,Ut)),this.open++,kt}closeExtra(dt=!1){let $t=this.nodes.length-1;if($t>this.open){for(;$t>this.open;$t--)this.nodes[$t-1].content.push(this.nodes[$t].finish(dt));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(dt){for(let $t=this.open;$t>=0;$t--){if(this.nodes[$t]==dt)return this.open=$t,!0;this.localPreserveWS&&(this.nodes[$t].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let dt=0;for(let $t=this.open;$t>=0;$t--){let kt=this.nodes[$t].content;for(let Tt=kt.length-1;Tt>=0;Tt--)dt+=kt[Tt].nodeSize;$t&&dt++}return dt}findAtPoint(dt,$t){if(this.find)for(let kt=0;kt<this.find.length;kt++)this.find[kt].node==dt&&this.find[kt].offset==$t&&(this.find[kt].pos=this.currentPos)}findInside(dt){if(this.find)for(let $t=0;$t<this.find.length;$t++)this.find[$t].pos==null&&dt.nodeType==1&&dt.contains(this.find[$t].node)&&(this.find[$t].pos=this.currentPos)}findAround(dt,$t,kt){if(dt!=$t&&this.find)for(let Tt=0;Tt<this.find.length;Tt++)this.find[Tt].pos==null&&dt.nodeType==1&&dt.contains(this.find[Tt].node)&&$t.compareDocumentPosition(this.find[Tt].node)&(kt?2:4)&&(this.find[Tt].pos=this.currentPos)}findInText(dt){if(this.find)for(let $t=0;$t<this.find.length;$t++)this.find[$t].node==dt&&(this.find[$t].pos=this.currentPos-(dt.nodeValue.length-this.find[$t].offset))}matchesContext(dt){if(dt.indexOf("|")>-1)return dt.split(/\s*\|\s*/).some(this.matchesContext,this);let $t=dt.split("/"),kt=this.options.context,Tt=!this.isOpen&&(!kt||kt.parent.type==this.nodes[0].type),Dt=-(kt?kt.depth+1:0)+(Tt?0:1),Ft=(Ut,Ht)=>{for(;Ut>=0;Ut--){let Kt=$t[Ut];if(Kt==""){if(Ut==$t.length-1||Ut==0)continue;for(;Ht>=Dt;Ht--)if(Ft(Ut-1,Ht))return!0;return!1}else{let Yt=Ht>0||Ht==0&&Tt?this.nodes[Ht].type:kt&&Ht>=Dt?kt.node(Ht-Dt).type:null;if(!Yt||Yt.name!=Kt&&!Yt.isInGroup(Kt))return!1;Ht--}}return!0};return Ft($t.length-1,this.open)}textblockFromContext(){let dt=this.options.context;if(dt)for(let $t=dt.depth;$t>=0;$t--){let kt=dt.node($t).contentMatchAt(dt.indexAfter($t)).defaultType;if(kt&&kt.isTextblock&&kt.defaultAttrs)return kt}for(let $t in this.parser.schema.nodes){let kt=this.parser.schema.nodes[$t];if(kt.isTextblock&&kt.defaultAttrs)return kt}}}function normalizeList(et){for(let dt=et.firstChild,$t=null;dt;dt=dt.nextSibling){let kt=dt.nodeType==1?dt.nodeName.toLowerCase():null;kt&&listTags.hasOwnProperty(kt)&&$t?($t.appendChild(dt),dt=$t):kt=="li"?$t=dt:kt&&($t=null)}}function matches(et,dt){return(et.matches||et.msMatchesSelector||et.webkitMatchesSelector||et.mozMatchesSelector).call(et,dt)}function copy$1(et){let dt={};for(let $t in et)dt[$t]=et[$t];return dt}function markMayApply(et,dt){let $t=dt.schema.nodes;for(let kt in $t){let Tt=$t[kt];if(!Tt.allowsMarkType(et))continue;let Dt=[],Ft=Ut=>{Dt.push(Ut);for(let Ht=0;Ht<Ut.edgeCount;Ht++){let{type:Kt,next:Yt}=Ut.edge(Ht);if(Kt==dt||Dt.indexOf(Yt)<0&&Ft(Yt))return!0}};if(Ft(Tt.contentMatch))return!0}}class DOMSerializer{constructor(dt,$t){this.nodes=dt,this.marks=$t}serializeFragment(dt,$t={},kt){kt||(kt=doc$1($t).createDocumentFragment());let Tt=kt,Dt=[];return dt.forEach(Ft=>{if(Dt.length||Ft.marks.length){let Ut=0,Ht=0;for(;Ut<Dt.length&&Ht<Ft.marks.length;){let Kt=Ft.marks[Ht];if(!this.marks[Kt.type.name]){Ht++;continue}if(!Kt.eq(Dt[Ut][0])||Kt.type.spec.spanning===!1)break;Ut++,Ht++}for(;Ut<Dt.length;)Tt=Dt.pop()[1];for(;Ht<Ft.marks.length;){let Kt=Ft.marks[Ht++],Yt=this.serializeMark(Kt,Ft.isInline,$t);Yt&&(Dt.push([Kt,Tt]),Tt.appendChild(Yt.dom),Tt=Yt.contentDOM||Yt.dom)}}Tt.appendChild(this.serializeNodeInner(Ft,$t))}),kt}serializeNodeInner(dt,$t){let{dom:kt,contentDOM:Tt}=renderSpec(doc$1($t),this.nodes[dt.type.name](dt),null,dt.attrs);if(Tt){if(dt.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(dt.content,$t,Tt)}return kt}serializeNode(dt,$t={}){let kt=this.serializeNodeInner(dt,$t);for(let Tt=dt.marks.length-1;Tt>=0;Tt--){let Dt=this.serializeMark(dt.marks[Tt],dt.isInline,$t);Dt&&((Dt.contentDOM||Dt.dom).appendChild(kt),kt=Dt.dom)}return kt}serializeMark(dt,$t,kt={}){let Tt=this.marks[dt.type.name];return Tt&&renderSpec(doc$1(kt),Tt(dt,$t),null,dt.attrs)}static renderSpec(dt,$t,kt=null,Tt){return renderSpec(dt,$t,kt,Tt)}static fromSchema(dt){return dt.cached.domSerializer||(dt.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(dt),this.marksFromSchema(dt)))}static nodesFromSchema(dt){let $t=gatherToDOM(dt.nodes);return $t.text||($t.text=kt=>kt.text),$t}static marksFromSchema(dt){return gatherToDOM(dt.marks)}}function gatherToDOM(et){let dt={};for(let $t in et){let kt=et[$t].spec.toDOM;kt&&(dt[$t]=kt)}return dt}function doc$1(et){return et.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(et){let dt=suspiciousAttributeCache.get(et);return dt===void 0&&suspiciousAttributeCache.set(et,dt=suspiciousAttributesInner(et)),dt}function suspiciousAttributesInner(et){let dt=null;function $t(kt){if(kt&&typeof kt=="object")if(Array.isArray(kt))if(typeof kt[0]=="string")dt||(dt=[]),dt.push(kt);else for(let Tt=0;Tt<kt.length;Tt++)$t(kt[Tt]);else for(let Tt in kt)$t(kt[Tt])}return $t(et),dt}function renderSpec(et,dt,$t,kt){if(typeof dt=="string")return{dom:et.createTextNode(dt)};if(dt.nodeType!=null)return{dom:dt};if(dt.dom&&dt.dom.nodeType!=null)return dt;let Tt=dt[0],Dt;if(typeof Tt!="string")throw new RangeError("Invalid array passed to renderSpec");if(kt&&(Dt=suspiciousAttributes(kt))&&Dt.indexOf(dt)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let Ft=Tt.indexOf(" ");Ft>0&&($t=Tt.slice(0,Ft),Tt=Tt.slice(Ft+1));let Ut,Ht=$t?et.createElementNS($t,Tt):et.createElement(Tt),Kt=dt[1],Yt=1;if(Kt&&typeof Kt=="object"&&Kt.nodeType==null&&!Array.isArray(Kt)){Yt=2;for(let Jt in Kt)if(Kt[Jt]!=null){let Zt=Jt.indexOf(" ");Zt>0?Ht.setAttributeNS(Jt.slice(0,Zt),Jt.slice(Zt+1),Kt[Jt]):Jt=="style"&&Ht.style?Ht.style.cssText=Kt[Jt]:Ht.setAttribute(Jt,Kt[Jt])}}for(let Jt=Yt;Jt<dt.length;Jt++){let Zt=dt[Jt];if(Zt===0){if(Jt<dt.length-1||Jt>Yt)throw new RangeError("Content hole must be the only child of its parent node");return{dom:Ht,contentDOM:Ht}}else{let{dom:er,contentDOM:rr}=renderSpec(et,Zt,$t,kt);if(Ht.appendChild(er),rr){if(Ut)throw new RangeError("Multiple content holes");Ut=rr}}}return{dom:Ht,contentDOM:Ut}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(et,dt){return et+dt*factor16}function recoverIndex(et){return et&lower16}function recoverOffset(et){return(et-(et&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(dt,$t,kt){this.pos=dt,this.delInfo=$t,this.recover=kt}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(dt,$t=!1){if(this.ranges=dt,this.inverted=$t,!dt.length&&StepMap.empty)return StepMap.empty}recover(dt){let $t=0,kt=recoverIndex(dt);if(!this.inverted)for(let Tt=0;Tt<kt;Tt++)$t+=this.ranges[Tt*3+2]-this.ranges[Tt*3+1];return this.ranges[kt*3]+$t+recoverOffset(dt)}mapResult(dt,$t=1){return this._map(dt,$t,!1)}map(dt,$t=1){return this._map(dt,$t,!0)}_map(dt,$t,kt){let Tt=0,Dt=this.inverted?2:1,Ft=this.inverted?1:2;for(let Ut=0;Ut<this.ranges.length;Ut+=3){let Ht=this.ranges[Ut]-(this.inverted?Tt:0);if(Ht>dt)break;let Kt=this.ranges[Ut+Dt],Yt=this.ranges[Ut+Ft],Jt=Ht+Kt;if(dt<=Jt){let Zt=Kt?dt==Ht?-1:dt==Jt?1:$t:$t,er=Ht+Tt+(Zt<0?0:Yt);if(kt)return er;let rr=dt==($t<0?Ht:Jt)?null:makeRecover(Ut/3,dt-Ht),sr=dt==Ht?DEL_AFTER:dt==Jt?DEL_BEFORE:DEL_ACROSS;return($t<0?dt!=Ht:dt!=Jt)&&(sr|=DEL_SIDE),new MapResult(er,sr,rr)}Tt+=Yt-Kt}return kt?dt+Tt:new MapResult(dt+Tt,0,null)}touches(dt,$t){let kt=0,Tt=recoverIndex($t),Dt=this.inverted?2:1,Ft=this.inverted?1:2;for(let Ut=0;Ut<this.ranges.length;Ut+=3){let Ht=this.ranges[Ut]-(this.inverted?kt:0);if(Ht>dt)break;let Kt=this.ranges[Ut+Dt],Yt=Ht+Kt;if(dt<=Yt&&Ut==Tt*3)return!0;kt+=this.ranges[Ut+Ft]-Kt}return!1}forEach(dt){let $t=this.inverted?2:1,kt=this.inverted?1:2;for(let Tt=0,Dt=0;Tt<this.ranges.length;Tt+=3){let Ft=this.ranges[Tt],Ut=Ft-(this.inverted?Dt:0),Ht=Ft+(this.inverted?0:Dt),Kt=this.ranges[Tt+$t],Yt=this.ranges[Tt+kt];dt(Ut,Ut+Kt,Ht,Ht+Yt),Dt+=Yt-Kt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(dt){return dt==0?StepMap.empty:new StepMap(dt<0?[0,-dt,0]:[0,0,dt])}}StepMap.empty=new StepMap([]);class Mapping{constructor(dt,$t,kt=0,Tt=dt?dt.length:0){this.mirror=$t,this.from=kt,this.to=Tt,this._maps=dt||[],this.ownData=!(dt||$t)}get maps(){return this._maps}slice(dt=0,$t=this.maps.length){return new Mapping(this._maps,this.mirror,dt,$t)}appendMap(dt,$t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(dt),$t!=null&&this.setMirror(this._maps.length-1,$t)}appendMapping(dt){for(let $t=0,kt=this._maps.length;$t<dt._maps.length;$t++){let Tt=dt.getMirror($t);this.appendMap(dt._maps[$t],Tt!=null&&Tt<$t?kt+Tt:void 0)}}getMirror(dt){if(this.mirror){for(let $t=0;$t<this.mirror.length;$t++)if(this.mirror[$t]==dt)return this.mirror[$t+($t%2?-1:1)]}}setMirror(dt,$t){this.mirror||(this.mirror=[]),this.mirror.push(dt,$t)}appendMappingInverted(dt){for(let $t=dt.maps.length-1,kt=this._maps.length+dt._maps.length;$t>=0;$t--){let Tt=dt.getMirror($t);this.appendMap(dt._maps[$t].invert(),Tt!=null&&Tt>$t?kt-Tt-1:void 0)}}invert(){let dt=new Mapping;return dt.appendMappingInverted(this),dt}map(dt,$t=1){if(this.mirror)return this._map(dt,$t,!0);for(let kt=this.from;kt<this.to;kt++)dt=this._maps[kt].map(dt,$t);return dt}mapResult(dt,$t=1){return this._map(dt,$t,!1)}_map(dt,$t,kt){let Tt=0;for(let Dt=this.from;Dt<this.to;Dt++){let Ft=this._maps[Dt],Ut=Ft.mapResult(dt,$t);if(Ut.recover!=null){let Ht=this.getMirror(Dt);if(Ht!=null&&Ht>Dt&&Ht<this.to){Dt=Ht,dt=this._maps[Ht].recover(Ut.recover);continue}}Tt|=Ut.delInfo,dt=Ut.pos}return kt?dt:new MapResult(dt,Tt,null)}}const stepsByID=Object.create(null);let Step$1=class{getMap(){return StepMap.empty}merge(dt){return null}static fromJSON(dt,$t){if(!$t||!$t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let kt=stepsByID[$t.stepType];if(!kt)throw new RangeError(`No step type ${$t.stepType} defined`);return kt.fromJSON(dt,$t)}static jsonID(dt,$t){if(dt in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+dt);return stepsByID[dt]=$t,$t.prototype.jsonID=dt,$t}};class StepResult{constructor(dt,$t){this.doc=dt,this.failed=$t}static ok(dt){return new StepResult(dt,null)}static fail(dt){return new StepResult(null,dt)}static fromReplace(dt,$t,kt,Tt){try{return StepResult.ok(dt.replace($t,kt,Tt))}catch(Dt){if(Dt instanceof ReplaceError)return StepResult.fail(Dt.message);throw Dt}}}function mapFragment(et,dt,$t){let kt=[];for(let Tt=0;Tt<et.childCount;Tt++){let Dt=et.child(Tt);Dt.content.size&&(Dt=Dt.copy(mapFragment(Dt.content,dt,Dt))),Dt.isInline&&(Dt=dt(Dt,$t,Tt)),kt.push(Dt)}return Fragment.fromArray(kt)}class AddMarkStep extends Step$1{constructor(dt,$t,kt){super(),this.from=dt,this.to=$t,this.mark=kt}apply(dt){let $t=dt.slice(this.from,this.to),kt=dt.resolve(this.from),Tt=kt.node(kt.sharedDepth(this.to)),Dt=new Slice(mapFragment($t.content,(Ft,Ut)=>!Ft.isAtom||!Ut.type.allowsMarkType(this.mark.type)?Ft:Ft.mark(this.mark.addToSet(Ft.marks)),Tt),$t.openStart,$t.openEnd);return StepResult.fromReplace(dt,this.from,this.to,Dt)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(dt){let $t=dt.mapResult(this.from,1),kt=dt.mapResult(this.to,-1);return $t.deleted&&kt.deleted||$t.pos>=kt.pos?null:new AddMarkStep($t.pos,kt.pos,this.mark)}merge(dt){return dt instanceof AddMarkStep&&dt.mark.eq(this.mark)&&this.from<=dt.to&&this.to>=dt.from?new AddMarkStep(Math.min(this.from,dt.from),Math.max(this.to,dt.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(dt,$t){if(typeof $t.from!="number"||typeof $t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep($t.from,$t.to,dt.markFromJSON($t.mark))}}Step$1.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step$1{constructor(dt,$t,kt){super(),this.from=dt,this.to=$t,this.mark=kt}apply(dt){let $t=dt.slice(this.from,this.to),kt=new Slice(mapFragment($t.content,Tt=>Tt.mark(this.mark.removeFromSet(Tt.marks)),dt),$t.openStart,$t.openEnd);return StepResult.fromReplace(dt,this.from,this.to,kt)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(dt){let $t=dt.mapResult(this.from,1),kt=dt.mapResult(this.to,-1);return $t.deleted&&kt.deleted||$t.pos>=kt.pos?null:new RemoveMarkStep($t.pos,kt.pos,this.mark)}merge(dt){return dt instanceof RemoveMarkStep&&dt.mark.eq(this.mark)&&this.from<=dt.to&&this.to>=dt.from?new RemoveMarkStep(Math.min(this.from,dt.from),Math.max(this.to,dt.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(dt,$t){if(typeof $t.from!="number"||typeof $t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep($t.from,$t.to,dt.markFromJSON($t.mark))}}Step$1.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step$1{constructor(dt,$t){super(),this.pos=dt,this.mark=$t}apply(dt){let $t=dt.nodeAt(this.pos);if(!$t)return StepResult.fail("No node at mark step's position");let kt=$t.type.create($t.attrs,null,this.mark.addToSet($t.marks));return StepResult.fromReplace(dt,this.pos,this.pos+1,new Slice(Fragment.from(kt),0,$t.isLeaf?0:1))}invert(dt){let $t=dt.nodeAt(this.pos);if($t){let kt=this.mark.addToSet($t.marks);if(kt.length==$t.marks.length){for(let Tt=0;Tt<$t.marks.length;Tt++)if(!$t.marks[Tt].isInSet(kt))return new AddNodeMarkStep(this.pos,$t.marks[Tt]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(dt){let $t=dt.mapResult(this.pos,1);return $t.deletedAfter?null:new AddNodeMarkStep($t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(dt,$t){if(typeof $t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep($t.pos,dt.markFromJSON($t.mark))}}Step$1.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step$1{constructor(dt,$t){super(),this.pos=dt,this.mark=$t}apply(dt){let $t=dt.nodeAt(this.pos);if(!$t)return StepResult.fail("No node at mark step's position");let kt=$t.type.create($t.attrs,null,this.mark.removeFromSet($t.marks));return StepResult.fromReplace(dt,this.pos,this.pos+1,new Slice(Fragment.from(kt),0,$t.isLeaf?0:1))}invert(dt){let $t=dt.nodeAt(this.pos);return!$t||!this.mark.isInSet($t.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(dt){let $t=dt.mapResult(this.pos,1);return $t.deletedAfter?null:new RemoveNodeMarkStep($t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(dt,$t){if(typeof $t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep($t.pos,dt.markFromJSON($t.mark))}}Step$1.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step$1{constructor(dt,$t,kt,Tt=!1){super(),this.from=dt,this.to=$t,this.slice=kt,this.structure=Tt}apply(dt){return this.structure&&contentBetween(dt,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(dt,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(dt){return new ReplaceStep(this.from,this.from+this.slice.size,dt.slice(this.from,this.to))}map(dt){let $t=dt.mapResult(this.from,1),kt=dt.mapResult(this.to,-1);return $t.deletedAcross&&kt.deletedAcross?null:new ReplaceStep($t.pos,Math.max($t.pos,kt.pos),this.slice,this.structure)}merge(dt){if(!(dt instanceof ReplaceStep)||dt.structure||this.structure)return null;if(this.from+this.slice.size==dt.from&&!this.slice.openEnd&&!dt.slice.openStart){let $t=this.slice.size+dt.slice.size==0?Slice.empty:new Slice(this.slice.content.append(dt.slice.content),this.slice.openStart,dt.slice.openEnd);return new ReplaceStep(this.from,this.to+(dt.to-dt.from),$t,this.structure)}else if(dt.to==this.from&&!this.slice.openStart&&!dt.slice.openEnd){let $t=this.slice.size+dt.slice.size==0?Slice.empty:new Slice(dt.slice.content.append(this.slice.content),dt.slice.openStart,this.slice.openEnd);return new ReplaceStep(dt.from,this.to,$t,this.structure)}else return null}toJSON(){let dt={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(dt.slice=this.slice.toJSON()),this.structure&&(dt.structure=!0),dt}static fromJSON(dt,$t){if(typeof $t.from!="number"||typeof $t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep($t.from,$t.to,Slice.fromJSON(dt,$t.slice),!!$t.structure)}}Step$1.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step$1{constructor(dt,$t,kt,Tt,Dt,Ft,Ut=!1){super(),this.from=dt,this.to=$t,this.gapFrom=kt,this.gapTo=Tt,this.slice=Dt,this.insert=Ft,this.structure=Ut}apply(dt){if(this.structure&&(contentBetween(dt,this.from,this.gapFrom)||contentBetween(dt,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let $t=dt.slice(this.gapFrom,this.gapTo);if($t.openStart||$t.openEnd)return StepResult.fail("Gap is not a flat range");let kt=this.slice.insertAt(this.insert,$t.content);return kt?StepResult.fromReplace(dt,this.from,this.to,kt):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(dt){let $t=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+$t,this.from+this.insert,this.from+this.insert+$t,dt.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(dt){let $t=dt.mapResult(this.from,1),kt=dt.mapResult(this.to,-1),Tt=this.from==this.gapFrom?$t.pos:dt.map(this.gapFrom,-1),Dt=this.to==this.gapTo?kt.pos:dt.map(this.gapTo,1);return $t.deletedAcross&&kt.deletedAcross||Tt<$t.pos||Dt>kt.pos?null:new ReplaceAroundStep($t.pos,kt.pos,Tt,Dt,this.slice,this.insert,this.structure)}toJSON(){let dt={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(dt.slice=this.slice.toJSON()),this.structure&&(dt.structure=!0),dt}static fromJSON(dt,$t){if(typeof $t.from!="number"||typeof $t.to!="number"||typeof $t.gapFrom!="number"||typeof $t.gapTo!="number"||typeof $t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep($t.from,$t.to,$t.gapFrom,$t.gapTo,Slice.fromJSON(dt,$t.slice),$t.insert,!!$t.structure)}}Step$1.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(et,dt,$t){let kt=et.resolve(dt),Tt=$t-dt,Dt=kt.depth;for(;Tt>0&&Dt>0&&kt.indexAfter(Dt)==kt.node(Dt).childCount;)Dt--,Tt--;if(Tt>0){let Ft=kt.node(Dt).maybeChild(kt.indexAfter(Dt));for(;Tt>0;){if(!Ft||Ft.isLeaf)return!0;Ft=Ft.firstChild,Tt--}}return!1}function addMark(et,dt,$t,kt){let Tt=[],Dt=[],Ft,Ut;et.doc.nodesBetween(dt,$t,(Ht,Kt,Yt)=>{if(!Ht.isInline)return;let Jt=Ht.marks;if(!kt.isInSet(Jt)&&Yt.type.allowsMarkType(kt.type)){let Zt=Math.max(Kt,dt),er=Math.min(Kt+Ht.nodeSize,$t),rr=kt.addToSet(Jt);for(let sr=0;sr<Jt.length;sr++)Jt[sr].isInSet(rr)||(Ft&&Ft.to==Zt&&Ft.mark.eq(Jt[sr])?Ft.to=er:Tt.push(Ft=new RemoveMarkStep(Zt,er,Jt[sr])));Ut&&Ut.to==Zt?Ut.to=er:Dt.push(Ut=new AddMarkStep(Zt,er,kt))}}),Tt.forEach(Ht=>et.step(Ht)),Dt.forEach(Ht=>et.step(Ht))}function removeMark(et,dt,$t,kt){let Tt=[],Dt=0;et.doc.nodesBetween(dt,$t,(Ft,Ut)=>{if(!Ft.isInline)return;Dt++;let Ht=null;if(kt instanceof MarkType){let Kt=Ft.marks,Yt;for(;Yt=kt.isInSet(Kt);)(Ht||(Ht=[])).push(Yt),Kt=Yt.removeFromSet(Kt)}else kt?kt.isInSet(Ft.marks)&&(Ht=[kt]):Ht=Ft.marks;if(Ht&&Ht.length){let Kt=Math.min(Ut+Ft.nodeSize,$t);for(let Yt=0;Yt<Ht.length;Yt++){let Jt=Ht[Yt],Zt;for(let er=0;er<Tt.length;er++){let rr=Tt[er];rr.step==Dt-1&&Jt.eq(Tt[er].style)&&(Zt=rr)}Zt?(Zt.to=Kt,Zt.step=Dt):Tt.push({style:Jt,from:Math.max(Ut,dt),to:Kt,step:Dt})}}}),Tt.forEach(Ft=>et.step(new RemoveMarkStep(Ft.from,Ft.to,Ft.style)))}function clearIncompatible(et,dt,$t,kt=$t.contentMatch,Tt=!0){let Dt=et.doc.nodeAt(dt),Ft=[],Ut=dt+1;for(let Ht=0;Ht<Dt.childCount;Ht++){let Kt=Dt.child(Ht),Yt=Ut+Kt.nodeSize,Jt=kt.matchType(Kt.type);if(!Jt)Ft.push(new ReplaceStep(Ut,Yt,Slice.empty));else{kt=Jt;for(let Zt=0;Zt<Kt.marks.length;Zt++)$t.allowsMarkType(Kt.marks[Zt].type)||et.step(new RemoveMarkStep(Ut,Yt,Kt.marks[Zt]));if(Tt&&Kt.isText&&$t.whitespace!="pre"){let Zt,er=/\r?\n|\r/g,rr;for(;Zt=er.exec(Kt.text);)rr||(rr=new Slice(Fragment.from($t.schema.text(" ",$t.allowedMarks(Kt.marks))),0,0)),Ft.push(new ReplaceStep(Ut+Zt.index,Ut+Zt.index+Zt[0].length,rr))}}Ut=Yt}if(!kt.validEnd){let Ht=kt.fillBefore(Fragment.empty,!0);et.replace(Ut,Ut,new Slice(Ht,0,0))}for(let Ht=Ft.length-1;Ht>=0;Ht--)et.step(Ft[Ht])}function canCut(et,dt,$t){return(dt==0||et.canReplace(dt,et.childCount))&&($t==et.childCount||et.canReplace(0,$t))}function liftTarget(et){let $t=et.parent.content.cutByIndex(et.startIndex,et.endIndex);for(let kt=et.depth;;--kt){let Tt=et.$from.node(kt),Dt=et.$from.index(kt),Ft=et.$to.indexAfter(kt);if(kt<et.depth&&Tt.canReplace(Dt,Ft,$t))return kt;if(kt==0||Tt.type.spec.isolating||!canCut(Tt,Dt,Ft))break}return null}function lift$2(et,dt,$t){let{$from:kt,$to:Tt,depth:Dt}=dt,Ft=kt.before(Dt+1),Ut=Tt.after(Dt+1),Ht=Ft,Kt=Ut,Yt=Fragment.empty,Jt=0;for(let rr=Dt,sr=!1;rr>$t;rr--)sr||kt.index(rr)>0?(sr=!0,Yt=Fragment.from(kt.node(rr).copy(Yt)),Jt++):Ht--;let Zt=Fragment.empty,er=0;for(let rr=Dt,sr=!1;rr>$t;rr--)sr||Tt.after(rr+1)<Tt.end(rr)?(sr=!0,Zt=Fragment.from(Tt.node(rr).copy(Zt)),er++):Kt++;et.step(new ReplaceAroundStep(Ht,Kt,Ft,Ut,new Slice(Yt.append(Zt),Jt,er),Yt.size-Jt,!0))}function findWrapping(et,dt,$t=null,kt=et){let Tt=findWrappingOutside(et,dt),Dt=Tt&&findWrappingInside(kt,dt);return Dt?Tt.map(withAttrs).concat({type:dt,attrs:$t}).concat(Dt.map(withAttrs)):null}function withAttrs(et){return{type:et,attrs:null}}function findWrappingOutside(et,dt){let{parent:$t,startIndex:kt,endIndex:Tt}=et,Dt=$t.contentMatchAt(kt).findWrapping(dt);if(!Dt)return null;let Ft=Dt.length?Dt[0]:dt;return $t.canReplaceWith(kt,Tt,Ft)?Dt:null}function findWrappingInside(et,dt){let{parent:$t,startIndex:kt,endIndex:Tt}=et,Dt=$t.child(kt),Ft=dt.contentMatch.findWrapping(Dt.type);if(!Ft)return null;let Ht=(Ft.length?Ft[Ft.length-1]:dt).contentMatch;for(let Kt=kt;Ht&&Kt<Tt;Kt++)Ht=Ht.matchType($t.child(Kt).type);return!Ht||!Ht.validEnd?null:Ft}function wrap(et,dt,$t){let kt=Fragment.empty;for(let Ft=$t.length-1;Ft>=0;Ft--){if(kt.size){let Ut=$t[Ft].type.contentMatch.matchFragment(kt);if(!Ut||!Ut.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}kt=Fragment.from($t[Ft].type.create($t[Ft].attrs,kt))}let Tt=dt.start,Dt=dt.end;et.step(new ReplaceAroundStep(Tt,Dt,Tt,Dt,new Slice(kt,0,0),$t.length,!0))}function setBlockType$1(et,dt,$t,kt,Tt){if(!kt.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let Dt=et.steps.length;et.doc.nodesBetween(dt,$t,(Ft,Ut)=>{let Ht=typeof Tt=="function"?Tt(Ft):Tt;if(Ft.isTextblock&&!Ft.hasMarkup(kt,Ht)&&canChangeType(et.doc,et.mapping.slice(Dt).map(Ut),kt)){let Kt=null;if(kt.schema.linebreakReplacement){let er=kt.whitespace=="pre",rr=!!kt.contentMatch.matchType(kt.schema.linebreakReplacement);er&&!rr?Kt=!1:!er&&rr&&(Kt=!0)}Kt===!1&&replaceLinebreaks(et,Ft,Ut,Dt),clearIncompatible(et,et.mapping.slice(Dt).map(Ut,1),kt,void 0,Kt===null);let Yt=et.mapping.slice(Dt),Jt=Yt.map(Ut,1),Zt=Yt.map(Ut+Ft.nodeSize,1);return et.step(new ReplaceAroundStep(Jt,Zt,Jt+1,Zt-1,new Slice(Fragment.from(kt.create(Ht,null,Ft.marks)),0,0),1,!0)),Kt===!0&&replaceNewlines(et,Ft,Ut,Dt),!1}})}function replaceNewlines(et,dt,$t,kt){dt.forEach((Tt,Dt)=>{if(Tt.isText){let Ft,Ut=/\r?\n|\r/g;for(;Ft=Ut.exec(Tt.text);){let Ht=et.mapping.slice(kt).map($t+1+Dt+Ft.index);et.replaceWith(Ht,Ht+1,dt.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(et,dt,$t,kt){dt.forEach((Tt,Dt)=>{if(Tt.type==Tt.type.schema.linebreakReplacement){let Ft=et.mapping.slice(kt).map($t+1+Dt);et.replaceWith(Ft,Ft+1,dt.type.schema.text(`
`))}})}function canChangeType(et,dt,$t){let kt=et.resolve(dt),Tt=kt.index();return kt.parent.canReplaceWith(Tt,Tt+1,$t)}function setNodeMarkup(et,dt,$t,kt,Tt){let Dt=et.doc.nodeAt(dt);if(!Dt)throw new RangeError("No node at given position");$t||($t=Dt.type);let Ft=$t.create(kt,null,Tt||Dt.marks);if(Dt.isLeaf)return et.replaceWith(dt,dt+Dt.nodeSize,Ft);if(!$t.validContent(Dt.content))throw new RangeError("Invalid content for node type "+$t.name);et.step(new ReplaceAroundStep(dt,dt+Dt.nodeSize,dt+1,dt+Dt.nodeSize-1,new Slice(Fragment.from(Ft),0,0),1,!0))}function canSplit(et,dt,$t=1,kt){let Tt=et.resolve(dt),Dt=Tt.depth-$t,Ft=kt&&kt[kt.length-1]||Tt.parent;if(Dt<0||Tt.parent.type.spec.isolating||!Tt.parent.canReplace(Tt.index(),Tt.parent.childCount)||!Ft.type.validContent(Tt.parent.content.cutByIndex(Tt.index(),Tt.parent.childCount)))return!1;for(let Kt=Tt.depth-1,Yt=$t-2;Kt>Dt;Kt--,Yt--){let Jt=Tt.node(Kt),Zt=Tt.index(Kt);if(Jt.type.spec.isolating)return!1;let er=Jt.content.cutByIndex(Zt,Jt.childCount),rr=kt&&kt[Yt+1];rr&&(er=er.replaceChild(0,rr.type.create(rr.attrs)));let sr=kt&&kt[Yt]||Jt;if(!Jt.canReplace(Zt+1,Jt.childCount)||!sr.type.validContent(er))return!1}let Ut=Tt.indexAfter(Dt),Ht=kt&&kt[0];return Tt.node(Dt).canReplaceWith(Ut,Ut,Ht?Ht.type:Tt.node(Dt+1).type)}function split(et,dt,$t=1,kt){let Tt=et.doc.resolve(dt),Dt=Fragment.empty,Ft=Fragment.empty;for(let Ut=Tt.depth,Ht=Tt.depth-$t,Kt=$t-1;Ut>Ht;Ut--,Kt--){Dt=Fragment.from(Tt.node(Ut).copy(Dt));let Yt=kt&&kt[Kt];Ft=Fragment.from(Yt?Yt.type.create(Yt.attrs,Ft):Tt.node(Ut).copy(Ft))}et.step(new ReplaceStep(dt,dt,new Slice(Dt.append(Ft),$t,$t),!0))}function canJoin(et,dt){let $t=et.resolve(dt),kt=$t.index();return joinable($t.nodeBefore,$t.nodeAfter)&&$t.parent.canReplace(kt,kt+1)}function canAppendWithSubstitutedLinebreaks(et,dt){dt.content.size||et.type.compatibleContent(dt.type);let $t=et.contentMatchAt(et.childCount),{linebreakReplacement:kt}=et.type.schema;for(let Tt=0;Tt<dt.childCount;Tt++){let Dt=dt.child(Tt),Ft=Dt.type==kt?et.type.schema.nodes.text:Dt.type;if($t=$t.matchType(Ft),!$t||!et.type.allowsMarks(Dt.marks))return!1}return $t.validEnd}function joinable(et,dt){return!!(et&&dt&&!et.isLeaf&&canAppendWithSubstitutedLinebreaks(et,dt))}function joinPoint(et,dt,$t=-1){let kt=et.resolve(dt);for(let Tt=kt.depth;;Tt--){let Dt,Ft,Ut=kt.index(Tt);if(Tt==kt.depth?(Dt=kt.nodeBefore,Ft=kt.nodeAfter):$t>0?(Dt=kt.node(Tt+1),Ut++,Ft=kt.node(Tt).maybeChild(Ut)):(Dt=kt.node(Tt).maybeChild(Ut-1),Ft=kt.node(Tt+1)),Dt&&!Dt.isTextblock&&joinable(Dt,Ft)&&kt.node(Tt).canReplace(Ut,Ut+1))return dt;if(Tt==0)break;dt=$t<0?kt.before(Tt):kt.after(Tt)}}function join(et,dt,$t){let kt=null,{linebreakReplacement:Tt}=et.doc.type.schema,Dt=et.doc.resolve(dt-$t),Ft=Dt.node().type;if(Tt&&Ft.inlineContent){let Yt=Ft.whitespace=="pre",Jt=!!Ft.contentMatch.matchType(Tt);Yt&&!Jt?kt=!1:!Yt&&Jt&&(kt=!0)}let Ut=et.steps.length;if(kt===!1){let Yt=et.doc.resolve(dt+$t);replaceLinebreaks(et,Yt.node(),Yt.before(),Ut)}Ft.inlineContent&&clearIncompatible(et,dt+$t-1,Ft,Dt.node().contentMatchAt(Dt.index()),kt==null);let Ht=et.mapping.slice(Ut),Kt=Ht.map(dt-$t);if(et.step(new ReplaceStep(Kt,Ht.map(dt+$t,-1),Slice.empty,!0)),kt===!0){let Yt=et.doc.resolve(Kt);replaceNewlines(et,Yt.node(),Yt.before(),et.steps.length)}return et}function insertPoint(et,dt,$t){let kt=et.resolve(dt);if(kt.parent.canReplaceWith(kt.index(),kt.index(),$t))return dt;if(kt.parentOffset==0)for(let Tt=kt.depth-1;Tt>=0;Tt--){let Dt=kt.index(Tt);if(kt.node(Tt).canReplaceWith(Dt,Dt,$t))return kt.before(Tt+1);if(Dt>0)return null}if(kt.parentOffset==kt.parent.content.size)for(let Tt=kt.depth-1;Tt>=0;Tt--){let Dt=kt.indexAfter(Tt);if(kt.node(Tt).canReplaceWith(Dt,Dt,$t))return kt.after(Tt+1);if(Dt<kt.node(Tt).childCount)return null}return null}function dropPoint(et,dt,$t){let kt=et.resolve(dt);if(!$t.content.size)return dt;let Tt=$t.content;for(let Dt=0;Dt<$t.openStart;Dt++)Tt=Tt.firstChild.content;for(let Dt=1;Dt<=($t.openStart==0&&$t.size?2:1);Dt++)for(let Ft=kt.depth;Ft>=0;Ft--){let Ut=Ft==kt.depth?0:kt.pos<=(kt.start(Ft+1)+kt.end(Ft+1))/2?-1:1,Ht=kt.index(Ft)+(Ut>0?1:0),Kt=kt.node(Ft),Yt=!1;if(Dt==1)Yt=Kt.canReplace(Ht,Ht,Tt);else{let Jt=Kt.contentMatchAt(Ht).findWrapping(Tt.firstChild.type);Yt=Jt&&Kt.canReplaceWith(Ht,Ht,Jt[0])}if(Yt)return Ut==0?kt.pos:Ut<0?kt.before(Ft+1):kt.after(Ft+1)}return null}function replaceStep(et,dt,$t=dt,kt=Slice.empty){if(dt==$t&&!kt.size)return null;let Tt=et.resolve(dt),Dt=et.resolve($t);return fitsTrivially(Tt,Dt,kt)?new ReplaceStep(dt,$t,kt):new Fitter(Tt,Dt,kt).fit()}function fitsTrivially(et,dt,$t){return!$t.openStart&&!$t.openEnd&&et.start()==dt.start()&&et.parent.canReplace(et.index(),dt.index(),$t.content)}class Fitter{constructor(dt,$t,kt){this.$from=dt,this.$to=$t,this.unplaced=kt,this.frontier=[],this.placed=Fragment.empty;for(let Tt=0;Tt<=dt.depth;Tt++){let Dt=dt.node(Tt);this.frontier.push({type:Dt.type,match:Dt.contentMatchAt(dt.indexAfter(Tt))})}for(let Tt=dt.depth;Tt>0;Tt--)this.placed=Fragment.from(dt.node(Tt).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let Kt=this.findFittable();Kt?this.placeNodes(Kt):this.openMore()||this.dropNode()}let dt=this.mustMoveInline(),$t=this.placed.size-this.depth-this.$from.depth,kt=this.$from,Tt=this.close(dt<0?this.$to:kt.doc.resolve(dt));if(!Tt)return null;let Dt=this.placed,Ft=kt.depth,Ut=Tt.depth;for(;Ft&&Ut&&Dt.childCount==1;)Dt=Dt.firstChild.content,Ft--,Ut--;let Ht=new Slice(Dt,Ft,Ut);return dt>-1?new ReplaceAroundStep(kt.pos,dt,this.$to.pos,this.$to.end(),Ht,$t):Ht.size||kt.pos!=this.$to.pos?new ReplaceStep(kt.pos,Tt.pos,Ht):null}findFittable(){let dt=this.unplaced.openStart;for(let $t=this.unplaced.content,kt=0,Tt=this.unplaced.openEnd;kt<dt;kt++){let Dt=$t.firstChild;if($t.childCount>1&&(Tt=0),Dt.type.spec.isolating&&Tt<=kt){dt=kt;break}$t=Dt.content}for(let $t=1;$t<=2;$t++)for(let kt=$t==1?dt:this.unplaced.openStart;kt>=0;kt--){let Tt,Dt=null;kt?(Dt=contentAt(this.unplaced.content,kt-1).firstChild,Tt=Dt.content):Tt=this.unplaced.content;let Ft=Tt.firstChild;for(let Ut=this.depth;Ut>=0;Ut--){let{type:Ht,match:Kt}=this.frontier[Ut],Yt,Jt=null;if($t==1&&(Ft?Kt.matchType(Ft.type)||(Jt=Kt.fillBefore(Fragment.from(Ft),!1)):Dt&&Ht.compatibleContent(Dt.type)))return{sliceDepth:kt,frontierDepth:Ut,parent:Dt,inject:Jt};if($t==2&&Ft&&(Yt=Kt.findWrapping(Ft.type)))return{sliceDepth:kt,frontierDepth:Ut,parent:Dt,wrap:Yt};if(Dt&&Kt.matchType(Dt.type))break}}}openMore(){let{content:dt,openStart:$t,openEnd:kt}=this.unplaced,Tt=contentAt(dt,$t);return!Tt.childCount||Tt.firstChild.isLeaf?!1:(this.unplaced=new Slice(dt,$t+1,Math.max(kt,Tt.size+$t>=dt.size-kt?$t+1:0)),!0)}dropNode(){let{content:dt,openStart:$t,openEnd:kt}=this.unplaced,Tt=contentAt(dt,$t);if(Tt.childCount<=1&&$t>0){let Dt=dt.size-$t<=$t+Tt.size;this.unplaced=new Slice(dropFromFragment(dt,$t-1,1),$t-1,Dt?$t-1:kt)}else this.unplaced=new Slice(dropFromFragment(dt,$t,1),$t,kt)}placeNodes({sliceDepth:dt,frontierDepth:$t,parent:kt,inject:Tt,wrap:Dt}){for(;this.depth>$t;)this.closeFrontierNode();if(Dt)for(let sr=0;sr<Dt.length;sr++)this.openFrontierNode(Dt[sr]);let Ft=this.unplaced,Ut=kt?kt.content:Ft.content,Ht=Ft.openStart-dt,Kt=0,Yt=[],{match:Jt,type:Zt}=this.frontier[$t];if(Tt){for(let sr=0;sr<Tt.childCount;sr++)Yt.push(Tt.child(sr));Jt=Jt.matchFragment(Tt)}let er=Ut.size+dt-(Ft.content.size-Ft.openEnd);for(;Kt<Ut.childCount;){let sr=Ut.child(Kt),nr=Jt.matchType(sr.type);if(!nr)break;Kt++,(Kt>1||Ht==0||sr.content.size)&&(Jt=nr,Yt.push(closeNodeStart(sr.mark(Zt.allowedMarks(sr.marks)),Kt==1?Ht:0,Kt==Ut.childCount?er:-1)))}let rr=Kt==Ut.childCount;rr||(er=-1),this.placed=addToFragment(this.placed,$t,Fragment.from(Yt)),this.frontier[$t].match=Jt,rr&&er<0&&kt&&kt.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let sr=0,nr=Ut;sr<er;sr++){let ir=nr.lastChild;this.frontier.push({type:ir.type,match:ir.contentMatchAt(ir.childCount)}),nr=ir.content}this.unplaced=rr?dt==0?Slice.empty:new Slice(dropFromFragment(Ft.content,dt-1,1),dt-1,er<0?Ft.openEnd:dt-1):new Slice(dropFromFragment(Ft.content,dt,Kt),Ft.openStart,Ft.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let dt=this.frontier[this.depth],$t;if(!dt.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,dt.type,dt.match,!1)||this.$to.depth==this.depth&&($t=this.findCloseLevel(this.$to))&&$t.depth==this.depth)return-1;let{depth:kt}=this.$to,Tt=this.$to.after(kt);for(;kt>1&&Tt==this.$to.end(--kt);)++Tt;return Tt}findCloseLevel(dt){e:for(let $t=Math.min(this.depth,dt.depth);$t>=0;$t--){let{match:kt,type:Tt}=this.frontier[$t],Dt=$t<dt.depth&&dt.end($t+1)==dt.pos+(dt.depth-($t+1)),Ft=contentAfterFits(dt,$t,Tt,kt,Dt);if(Ft){for(let Ut=$t-1;Ut>=0;Ut--){let{match:Ht,type:Kt}=this.frontier[Ut],Yt=contentAfterFits(dt,Ut,Kt,Ht,!0);if(!Yt||Yt.childCount)continue e}return{depth:$t,fit:Ft,move:Dt?dt.doc.resolve(dt.after($t+1)):dt}}}}close(dt){let $t=this.findCloseLevel(dt);if(!$t)return null;for(;this.depth>$t.depth;)this.closeFrontierNode();$t.fit.childCount&&(this.placed=addToFragment(this.placed,$t.depth,$t.fit)),dt=$t.move;for(let kt=$t.depth+1;kt<=dt.depth;kt++){let Tt=dt.node(kt),Dt=Tt.type.contentMatch.fillBefore(Tt.content,!0,dt.index(kt));this.openFrontierNode(Tt.type,Tt.attrs,Dt)}return dt}openFrontierNode(dt,$t=null,kt){let Tt=this.frontier[this.depth];Tt.match=Tt.match.matchType(dt),this.placed=addToFragment(this.placed,this.depth,Fragment.from(dt.create($t,kt))),this.frontier.push({type:dt,match:dt.contentMatch})}closeFrontierNode(){let $t=this.frontier.pop().match.fillBefore(Fragment.empty,!0);$t.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,$t))}}function dropFromFragment(et,dt,$t){return dt==0?et.cutByIndex($t,et.childCount):et.replaceChild(0,et.firstChild.copy(dropFromFragment(et.firstChild.content,dt-1,$t)))}function addToFragment(et,dt,$t){return dt==0?et.append($t):et.replaceChild(et.childCount-1,et.lastChild.copy(addToFragment(et.lastChild.content,dt-1,$t)))}function contentAt(et,dt){for(let $t=0;$t<dt;$t++)et=et.firstChild.content;return et}function closeNodeStart(et,dt,$t){if(dt<=0)return et;let kt=et.content;return dt>1&&(kt=kt.replaceChild(0,closeNodeStart(kt.firstChild,dt-1,kt.childCount==1?$t-1:0))),dt>0&&(kt=et.type.contentMatch.fillBefore(kt).append(kt),$t<=0&&(kt=kt.append(et.type.contentMatch.matchFragment(kt).fillBefore(Fragment.empty,!0)))),et.copy(kt)}function contentAfterFits(et,dt,$t,kt,Tt){let Dt=et.node(dt),Ft=Tt?et.indexAfter(dt):et.index(dt);if(Ft==Dt.childCount&&!$t.compatibleContent(Dt.type))return null;let Ut=kt.fillBefore(Dt.content,!0,Ft);return Ut&&!invalidMarks($t,Dt.content,Ft)?Ut:null}function invalidMarks(et,dt,$t){for(let kt=$t;kt<dt.childCount;kt++)if(!et.allowsMarks(dt.child(kt).marks))return!0;return!1}function definesContent(et){return et.spec.defining||et.spec.definingForContent}function replaceRange(et,dt,$t,kt){if(!kt.size)return et.deleteRange(dt,$t);let Tt=et.doc.resolve(dt),Dt=et.doc.resolve($t);if(fitsTrivially(Tt,Dt,kt))return et.step(new ReplaceStep(dt,$t,kt));let Ft=coveredDepths(Tt,et.doc.resolve($t));Ft[Ft.length-1]==0&&Ft.pop();let Ut=-(Tt.depth+1);Ft.unshift(Ut);for(let Zt=Tt.depth,er=Tt.pos-1;Zt>0;Zt--,er--){let rr=Tt.node(Zt).type.spec;if(rr.defining||rr.definingAsContext||rr.isolating)break;Ft.indexOf(Zt)>-1?Ut=Zt:Tt.before(Zt)==er&&Ft.splice(1,0,-Zt)}let Ht=Ft.indexOf(Ut),Kt=[],Yt=kt.openStart;for(let Zt=kt.content,er=0;;er++){let rr=Zt.firstChild;if(Kt.push(rr),er==kt.openStart)break;Zt=rr.content}for(let Zt=Yt-1;Zt>=0;Zt--){let er=Kt[Zt],rr=definesContent(er.type);if(rr&&!er.sameMarkup(Tt.node(Math.abs(Ut)-1)))Yt=Zt;else if(rr||!er.type.isTextblock)break}for(let Zt=kt.openStart;Zt>=0;Zt--){let er=(Zt+Yt+1)%(kt.openStart+1),rr=Kt[er];if(rr)for(let sr=0;sr<Ft.length;sr++){let nr=Ft[(sr+Ht)%Ft.length],ir=!0;nr<0&&(ir=!1,nr=-nr);let or=Tt.node(nr-1),lr=Tt.index(nr-1);if(or.canReplaceWith(lr,lr,rr.type,rr.marks))return et.replace(Tt.before(nr),ir?Dt.after(nr):$t,new Slice(closeFragment(kt.content,0,kt.openStart,er),er,kt.openEnd))}}let Jt=et.steps.length;for(let Zt=Ft.length-1;Zt>=0&&(et.replace(dt,$t,kt),!(et.steps.length>Jt));Zt--){let er=Ft[Zt];er<0||(dt=Tt.before(er),$t=Dt.after(er))}}function closeFragment(et,dt,$t,kt,Tt){if(dt<$t){let Dt=et.firstChild;et=et.replaceChild(0,Dt.copy(closeFragment(Dt.content,dt+1,$t,kt,Dt)))}if(dt>kt){let Dt=Tt.contentMatchAt(0),Ft=Dt.fillBefore(et).append(et);et=Ft.append(Dt.matchFragment(Ft).fillBefore(Fragment.empty,!0))}return et}function replaceRangeWith(et,dt,$t,kt){if(!kt.isInline&&dt==$t&&et.doc.resolve(dt).parent.content.size){let Tt=insertPoint(et.doc,dt,kt.type);Tt!=null&&(dt=$t=Tt)}et.replaceRange(dt,$t,new Slice(Fragment.from(kt),0,0))}function deleteRange$1(et,dt,$t){let kt=et.doc.resolve(dt),Tt=et.doc.resolve($t),Dt=coveredDepths(kt,Tt);for(let Ft=0;Ft<Dt.length;Ft++){let Ut=Dt[Ft],Ht=Ft==Dt.length-1;if(Ht&&Ut==0||kt.node(Ut).type.contentMatch.validEnd)return et.delete(kt.start(Ut),Tt.end(Ut));if(Ut>0&&(Ht||kt.node(Ut-1).canReplace(kt.index(Ut-1),Tt.indexAfter(Ut-1))))return et.delete(kt.before(Ut),Tt.after(Ut))}for(let Ft=1;Ft<=kt.depth&&Ft<=Tt.depth;Ft++)if(dt-kt.start(Ft)==kt.depth-Ft&&$t>kt.end(Ft)&&Tt.end(Ft)-$t!=Tt.depth-Ft&&kt.start(Ft-1)==Tt.start(Ft-1)&&kt.node(Ft-1).canReplace(kt.index(Ft-1),Tt.index(Ft-1)))return et.delete(kt.before(Ft),$t);et.delete(dt,$t)}function coveredDepths(et,dt){let $t=[],kt=Math.min(et.depth,dt.depth);for(let Tt=kt;Tt>=0;Tt--){let Dt=et.start(Tt);if(Dt<et.pos-(et.depth-Tt)||dt.end(Tt)>dt.pos+(dt.depth-Tt)||et.node(Tt).type.spec.isolating||dt.node(Tt).type.spec.isolating)break;(Dt==dt.start(Tt)||Tt==et.depth&&Tt==dt.depth&&et.parent.inlineContent&&dt.parent.inlineContent&&Tt&&dt.start(Tt-1)==Dt-1)&&$t.push(Tt)}return $t}class AttrStep extends Step$1{constructor(dt,$t,kt){super(),this.pos=dt,this.attr=$t,this.value=kt}apply(dt){let $t=dt.nodeAt(this.pos);if(!$t)return StepResult.fail("No node at attribute step's position");let kt=Object.create(null);for(let Dt in $t.attrs)kt[Dt]=$t.attrs[Dt];kt[this.attr]=this.value;let Tt=$t.type.create(kt,null,$t.marks);return StepResult.fromReplace(dt,this.pos,this.pos+1,new Slice(Fragment.from(Tt),0,$t.isLeaf?0:1))}getMap(){return StepMap.empty}invert(dt){return new AttrStep(this.pos,this.attr,dt.nodeAt(this.pos).attrs[this.attr])}map(dt){let $t=dt.mapResult(this.pos,1);return $t.deletedAfter?null:new AttrStep($t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(dt,$t){if(typeof $t.pos!="number"||typeof $t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep($t.pos,$t.attr,$t.value)}}Step$1.jsonID("attr",AttrStep);class DocAttrStep extends Step$1{constructor(dt,$t){super(),this.attr=dt,this.value=$t}apply(dt){let $t=Object.create(null);for(let Tt in dt.attrs)$t[Tt]=dt.attrs[Tt];$t[this.attr]=this.value;let kt=dt.type.create($t,dt.content,dt.marks);return StepResult.ok(kt)}getMap(){return StepMap.empty}invert(dt){return new DocAttrStep(this.attr,dt.attrs[this.attr])}map(dt){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(dt,$t){if(typeof $t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep($t.attr,$t.value)}}Step$1.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function et(dt){let $t=Error.call(this,dt);return $t.__proto__=et.prototype,$t};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(dt){this.doc=dt,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(dt){let $t=this.maybeStep(dt);if($t.failed)throw new TransformError($t.failed);return this}maybeStep(dt){let $t=dt.apply(this.doc);return $t.failed||this.addStep(dt,$t.doc),$t}get docChanged(){return this.steps.length>0}addStep(dt,$t){this.docs.push(this.doc),this.steps.push(dt),this.mapping.appendMap(dt.getMap()),this.doc=$t}replace(dt,$t=dt,kt=Slice.empty){let Tt=replaceStep(this.doc,dt,$t,kt);return Tt&&this.step(Tt),this}replaceWith(dt,$t,kt){return this.replace(dt,$t,new Slice(Fragment.from(kt),0,0))}delete(dt,$t){return this.replace(dt,$t,Slice.empty)}insert(dt,$t){return this.replaceWith(dt,dt,$t)}replaceRange(dt,$t,kt){return replaceRange(this,dt,$t,kt),this}replaceRangeWith(dt,$t,kt){return replaceRangeWith(this,dt,$t,kt),this}deleteRange(dt,$t){return deleteRange$1(this,dt,$t),this}lift(dt,$t){return lift$2(this,dt,$t),this}join(dt,$t=1){return join(this,dt,$t),this}wrap(dt,$t){return wrap(this,dt,$t),this}setBlockType(dt,$t=dt,kt,Tt=null){return setBlockType$1(this,dt,$t,kt,Tt),this}setNodeMarkup(dt,$t,kt=null,Tt){return setNodeMarkup(this,dt,$t,kt,Tt),this}setNodeAttribute(dt,$t,kt){return this.step(new AttrStep(dt,$t,kt)),this}setDocAttribute(dt,$t){return this.step(new DocAttrStep(dt,$t)),this}addNodeMark(dt,$t){return this.step(new AddNodeMarkStep(dt,$t)),this}removeNodeMark(dt,$t){let kt=this.doc.nodeAt(dt);if(!kt)throw new RangeError("No node at position "+dt);if($t instanceof Mark$1)$t.isInSet(kt.marks)&&this.step(new RemoveNodeMarkStep(dt,$t));else{let Tt=kt.marks,Dt,Ft=[];for(;Dt=$t.isInSet(Tt);)Ft.push(new RemoveNodeMarkStep(dt,Dt)),Tt=Dt.removeFromSet(Tt);for(let Ut=Ft.length-1;Ut>=0;Ut--)this.step(Ft[Ut])}return this}split(dt,$t=1,kt){return split(this,dt,$t,kt),this}addMark(dt,$t,kt){return addMark(this,dt,$t,kt),this}removeMark(dt,$t,kt){return removeMark(this,dt,$t,kt),this}clearIncompatible(dt,$t,kt){return clearIncompatible(this,dt,$t,kt),this}}const classesById=Object.create(null);class Selection{constructor(dt,$t,kt){this.$anchor=dt,this.$head=$t,this.ranges=kt||[new SelectionRange(dt.min($t),dt.max($t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let dt=this.ranges;for(let $t=0;$t<dt.length;$t++)if(dt[$t].$from.pos!=dt[$t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(dt,$t=Slice.empty){let kt=$t.content.lastChild,Tt=null;for(let Ut=0;Ut<$t.openEnd;Ut++)Tt=kt,kt=kt.lastChild;let Dt=dt.steps.length,Ft=this.ranges;for(let Ut=0;Ut<Ft.length;Ut++){let{$from:Ht,$to:Kt}=Ft[Ut],Yt=dt.mapping.slice(Dt);dt.replaceRange(Yt.map(Ht.pos),Yt.map(Kt.pos),Ut?Slice.empty:$t),Ut==0&&selectionToInsertionEnd$1(dt,Dt,(kt?kt.isInline:Tt&&Tt.isTextblock)?-1:1)}}replaceWith(dt,$t){let kt=dt.steps.length,Tt=this.ranges;for(let Dt=0;Dt<Tt.length;Dt++){let{$from:Ft,$to:Ut}=Tt[Dt],Ht=dt.mapping.slice(kt),Kt=Ht.map(Ft.pos),Yt=Ht.map(Ut.pos);Dt?dt.deleteRange(Kt,Yt):(dt.replaceRangeWith(Kt,Yt,$t),selectionToInsertionEnd$1(dt,kt,$t.isInline?-1:1))}}static findFrom(dt,$t,kt=!1){let Tt=dt.parent.inlineContent?new TextSelection(dt):findSelectionIn(dt.node(0),dt.parent,dt.pos,dt.index(),$t,kt);if(Tt)return Tt;for(let Dt=dt.depth-1;Dt>=0;Dt--){let Ft=$t<0?findSelectionIn(dt.node(0),dt.node(Dt),dt.before(Dt+1),dt.index(Dt),$t,kt):findSelectionIn(dt.node(0),dt.node(Dt),dt.after(Dt+1),dt.index(Dt)+1,$t,kt);if(Ft)return Ft}return null}static near(dt,$t=1){return this.findFrom(dt,$t)||this.findFrom(dt,-$t)||new AllSelection(dt.node(0))}static atStart(dt){return findSelectionIn(dt,dt,0,0,1)||new AllSelection(dt)}static atEnd(dt){return findSelectionIn(dt,dt,dt.content.size,dt.childCount,-1)||new AllSelection(dt)}static fromJSON(dt,$t){if(!$t||!$t.type)throw new RangeError("Invalid input for Selection.fromJSON");let kt=classesById[$t.type];if(!kt)throw new RangeError(`No selection type ${$t.type} defined`);return kt.fromJSON(dt,$t)}static jsonID(dt,$t){if(dt in classesById)throw new RangeError("Duplicate use of selection JSON ID "+dt);return classesById[dt]=$t,$t.prototype.jsonID=dt,$t}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(dt,$t){this.$from=dt,this.$to=$t}}let warnedAboutTextSelection=!1;function checkTextSelection(et){!warnedAboutTextSelection&&!et.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+et.parent.type.name+")"))}class TextSelection extends Selection{constructor(dt,$t=dt){checkTextSelection(dt),checkTextSelection($t),super(dt,$t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(dt,$t){let kt=dt.resolve($t.map(this.head));if(!kt.parent.inlineContent)return Selection.near(kt);let Tt=dt.resolve($t.map(this.anchor));return new TextSelection(Tt.parent.inlineContent?Tt:kt,kt)}replace(dt,$t=Slice.empty){if(super.replace(dt,$t),$t==Slice.empty){let kt=this.$from.marksAcross(this.$to);kt&&dt.ensureMarks(kt)}}eq(dt){return dt instanceof TextSelection&&dt.anchor==this.anchor&&dt.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(dt,$t){if(typeof $t.anchor!="number"||typeof $t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(dt.resolve($t.anchor),dt.resolve($t.head))}static create(dt,$t,kt=$t){let Tt=dt.resolve($t);return new this(Tt,kt==$t?Tt:dt.resolve(kt))}static between(dt,$t,kt){let Tt=dt.pos-$t.pos;if((!kt||Tt)&&(kt=Tt>=0?1:-1),!$t.parent.inlineContent){let Dt=Selection.findFrom($t,kt,!0)||Selection.findFrom($t,-kt,!0);if(Dt)$t=Dt.$head;else return Selection.near($t,kt)}return dt.parent.inlineContent||(Tt==0?dt=$t:(dt=(Selection.findFrom(dt,-kt,!0)||Selection.findFrom(dt,kt,!0)).$anchor,dt.pos<$t.pos!=Tt<0&&(dt=$t))),new TextSelection(dt,$t)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(dt,$t){this.anchor=dt,this.head=$t}map(dt){return new TextBookmark(dt.map(this.anchor),dt.map(this.head))}resolve(dt){return TextSelection.between(dt.resolve(this.anchor),dt.resolve(this.head))}}class NodeSelection extends Selection{constructor(dt){let $t=dt.nodeAfter,kt=dt.node(0).resolve(dt.pos+$t.nodeSize);super(dt,kt),this.node=$t}map(dt,$t){let{deleted:kt,pos:Tt}=$t.mapResult(this.anchor),Dt=dt.resolve(Tt);return kt?Selection.near(Dt):new NodeSelection(Dt)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(dt){return dt instanceof NodeSelection&&dt.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(dt,$t){if(typeof $t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(dt.resolve($t.anchor))}static create(dt,$t){return new NodeSelection(dt.resolve($t))}static isSelectable(dt){return!dt.isText&&dt.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(dt){this.anchor=dt}map(dt){let{deleted:$t,pos:kt}=dt.mapResult(this.anchor);return $t?new TextBookmark(kt,kt):new NodeBookmark(kt)}resolve(dt){let $t=dt.resolve(this.anchor),kt=$t.nodeAfter;return kt&&NodeSelection.isSelectable(kt)?new NodeSelection($t):Selection.near($t)}}class AllSelection extends Selection{constructor(dt){super(dt.resolve(0),dt.resolve(dt.content.size))}replace(dt,$t=Slice.empty){if($t==Slice.empty){dt.delete(0,dt.doc.content.size);let kt=Selection.atStart(dt.doc);kt.eq(dt.selection)||dt.setSelection(kt)}else super.replace(dt,$t)}toJSON(){return{type:"all"}}static fromJSON(dt){return new AllSelection(dt)}map(dt){return new AllSelection(dt)}eq(dt){return dt instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(et){return new AllSelection(et)}};function findSelectionIn(et,dt,$t,kt,Tt,Dt=!1){if(dt.inlineContent)return TextSelection.create(et,$t);for(let Ft=kt-(Tt>0?0:1);Tt>0?Ft<dt.childCount:Ft>=0;Ft+=Tt){let Ut=dt.child(Ft);if(Ut.isAtom){if(!Dt&&NodeSelection.isSelectable(Ut))return NodeSelection.create(et,$t-(Tt<0?Ut.nodeSize:0))}else{let Ht=findSelectionIn(et,Ut,$t+Tt,Tt<0?Ut.childCount:0,Tt,Dt);if(Ht)return Ht}$t+=Ut.nodeSize*Tt}return null}function selectionToInsertionEnd$1(et,dt,$t){let kt=et.steps.length-1;if(kt<dt)return;let Tt=et.steps[kt];if(!(Tt instanceof ReplaceStep||Tt instanceof ReplaceAroundStep))return;let Dt=et.mapping.maps[kt],Ft;Dt.forEach((Ut,Ht,Kt,Yt)=>{Ft==null&&(Ft=Yt)}),et.setSelection(Selection.near(et.doc.resolve(Ft),$t))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(dt){super(dt.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=dt.selection,this.storedMarks=dt.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(dt){if(dt.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=dt,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(dt){return this.storedMarks=dt,this.updated|=UPDATED_MARKS,this}ensureMarks(dt){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),dt)||this.setStoredMarks(dt),this}addStoredMark(dt){return this.ensureMarks(dt.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(dt){return this.ensureMarks(dt.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(dt,$t){super.addStep(dt,$t),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(dt){return this.time=dt,this}replaceSelection(dt){return this.selection.replace(this,dt),this}replaceSelectionWith(dt,$t=!0){let kt=this.selection;return $t&&(dt=dt.mark(this.storedMarks||(kt.empty?kt.$from.marks():kt.$from.marksAcross(kt.$to)||Mark$1.none))),kt.replaceWith(this,dt),this}deleteSelection(){return this.selection.replace(this),this}insertText(dt,$t,kt){let Tt=this.doc.type.schema;if($t==null)return dt?this.replaceSelectionWith(Tt.text(dt),!0):this.deleteSelection();{if(kt==null&&(kt=$t),kt=kt??$t,!dt)return this.deleteRange($t,kt);let Dt=this.storedMarks;if(!Dt){let Ft=this.doc.resolve($t);Dt=kt==$t?Ft.marks():Ft.marksAcross(this.doc.resolve(kt))}return this.replaceRangeWith($t,kt,Tt.text(dt,Dt)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(dt,$t){return this.meta[typeof dt=="string"?dt:dt.key]=$t,this}getMeta(dt){return this.meta[typeof dt=="string"?dt:dt.key]}get isGeneric(){for(let dt in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(et,dt){return!dt||!et?et:et.bind(dt)}class FieldDesc{constructor(dt,$t,kt){this.name=dt,this.init=bind($t.init,kt),this.apply=bind($t.apply,kt)}}const baseFields=[new FieldDesc("doc",{init(et){return et.doc||et.schema.topNodeType.createAndFill()},apply(et){return et.doc}}),new FieldDesc("selection",{init(et,dt){return et.selection||Selection.atStart(dt.doc)},apply(et){return et.selection}}),new FieldDesc("storedMarks",{init(et){return et.storedMarks||null},apply(et,dt,$t,kt){return kt.selection.$cursor?et.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(et,dt){return et.scrolledIntoView?dt+1:dt}})];class Configuration{constructor(dt,$t){this.schema=dt,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),$t&&$t.forEach(kt=>{if(this.pluginsByKey[kt.key])throw new RangeError("Adding different instances of a keyed plugin ("+kt.key+")");this.plugins.push(kt),this.pluginsByKey[kt.key]=kt,kt.spec.state&&this.fields.push(new FieldDesc(kt.key,kt.spec.state,kt))})}}class EditorState{constructor(dt){this.config=dt}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(dt){return this.applyTransaction(dt).state}filterTransaction(dt,$t=-1){for(let kt=0;kt<this.config.plugins.length;kt++)if(kt!=$t){let Tt=this.config.plugins[kt];if(Tt.spec.filterTransaction&&!Tt.spec.filterTransaction.call(Tt,dt,this))return!1}return!0}applyTransaction(dt){if(!this.filterTransaction(dt))return{state:this,transactions:[]};let $t=[dt],kt=this.applyInner(dt),Tt=null;for(;;){let Dt=!1;for(let Ft=0;Ft<this.config.plugins.length;Ft++){let Ut=this.config.plugins[Ft];if(Ut.spec.appendTransaction){let Ht=Tt?Tt[Ft].n:0,Kt=Tt?Tt[Ft].state:this,Yt=Ht<$t.length&&Ut.spec.appendTransaction.call(Ut,Ht?$t.slice(Ht):$t,Kt,kt);if(Yt&&kt.filterTransaction(Yt,Ft)){if(Yt.setMeta("appendedTransaction",dt),!Tt){Tt=[];for(let Jt=0;Jt<this.config.plugins.length;Jt++)Tt.push(Jt<Ft?{state:kt,n:$t.length}:{state:this,n:0})}$t.push(Yt),kt=kt.applyInner(Yt),Dt=!0}Tt&&(Tt[Ft]={state:kt,n:$t.length})}}if(!Dt)return{state:kt,transactions:$t}}}applyInner(dt){if(!dt.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let $t=new EditorState(this.config),kt=this.config.fields;for(let Tt=0;Tt<kt.length;Tt++){let Dt=kt[Tt];$t[Dt.name]=Dt.apply(dt,this[Dt.name],this,$t)}return $t}get tr(){return new Transaction(this)}static create(dt){let $t=new Configuration(dt.doc?dt.doc.type.schema:dt.schema,dt.plugins),kt=new EditorState($t);for(let Tt=0;Tt<$t.fields.length;Tt++)kt[$t.fields[Tt].name]=$t.fields[Tt].init(dt,kt);return kt}reconfigure(dt){let $t=new Configuration(this.schema,dt.plugins),kt=$t.fields,Tt=new EditorState($t);for(let Dt=0;Dt<kt.length;Dt++){let Ft=kt[Dt].name;Tt[Ft]=this.hasOwnProperty(Ft)?this[Ft]:kt[Dt].init(dt,Tt)}return Tt}toJSON(dt){let $t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&($t.storedMarks=this.storedMarks.map(kt=>kt.toJSON())),dt&&typeof dt=="object")for(let kt in dt){if(kt=="doc"||kt=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let Tt=dt[kt],Dt=Tt.spec.state;Dt&&Dt.toJSON&&($t[kt]=Dt.toJSON.call(Tt,this[Tt.key]))}return $t}static fromJSON(dt,$t,kt){if(!$t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!dt.schema)throw new RangeError("Required config field 'schema' missing");let Tt=new Configuration(dt.schema,dt.plugins),Dt=new EditorState(Tt);return Tt.fields.forEach(Ft=>{if(Ft.name=="doc")Dt.doc=Node$1.fromJSON(dt.schema,$t.doc);else if(Ft.name=="selection")Dt.selection=Selection.fromJSON(Dt.doc,$t.selection);else if(Ft.name=="storedMarks")$t.storedMarks&&(Dt.storedMarks=$t.storedMarks.map(dt.schema.markFromJSON));else{if(kt)for(let Ut in kt){let Ht=kt[Ut],Kt=Ht.spec.state;if(Ht.key==Ft.name&&Kt&&Kt.fromJSON&&Object.prototype.hasOwnProperty.call($t,Ut)){Dt[Ft.name]=Kt.fromJSON.call(Ht,dt,$t[Ut],Dt);return}}Dt[Ft.name]=Ft.init(dt,Dt)}}),Dt}}function bindProps(et,dt,$t){for(let kt in et){let Tt=et[kt];Tt instanceof Function?Tt=Tt.bind(dt):kt=="handleDOMEvents"&&(Tt=bindProps(Tt,dt,{})),$t[kt]=Tt}return $t}class Plugin{constructor(dt){this.spec=dt,this.props={},dt.props&&bindProps(dt.props,this,this.props),this.key=dt.key?dt.key.key:createKey("plugin")}getState(dt){return dt[this.key]}}const keys$6=Object.create(null);function createKey(et){return et in keys$6?et+"$"+ ++keys$6[et]:(keys$6[et]=0,et+"$")}class PluginKey{constructor(dt="key"){this.key=createKey(dt)}get(dt){return dt.config.pluginsByKey[this.key]}getState(dt){return dt[this.key]}}const deleteSelection$1=(et,dt)=>et.selection.empty?!1:(dt&&dt(et.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(et,dt){let{$cursor:$t}=et.selection;return!$t||(dt?!dt.endOfTextblock("backward",et):$t.parentOffset>0)?null:$t}const joinBackward$1=(et,dt,$t)=>{let kt=atBlockStart(et,$t);if(!kt)return!1;let Tt=findCutBefore(kt);if(!Tt){let Ft=kt.blockRange(),Ut=Ft&&liftTarget(Ft);return Ut==null?!1:(dt&&dt(et.tr.lift(Ft,Ut).scrollIntoView()),!0)}let Dt=Tt.nodeBefore;if(deleteBarrier(et,Tt,dt,-1))return!0;if(kt.parent.content.size==0&&(textblockAt(Dt,"end")||NodeSelection.isSelectable(Dt)))for(let Ft=kt.depth;;Ft--){let Ut=replaceStep(et.doc,kt.before(Ft),kt.after(Ft),Slice.empty);if(Ut&&Ut.slice.size<Ut.to-Ut.from){if(dt){let Ht=et.tr.step(Ut);Ht.setSelection(textblockAt(Dt,"end")?Selection.findFrom(Ht.doc.resolve(Ht.mapping.map(Tt.pos,-1)),-1):NodeSelection.create(Ht.doc,Tt.pos-Dt.nodeSize)),dt(Ht.scrollIntoView())}return!0}if(Ft==1||kt.node(Ft-1).childCount>1)break}return Dt.isAtom&&Tt.depth==kt.depth-1?(dt&&dt(et.tr.delete(Tt.pos-Dt.nodeSize,Tt.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(et,dt,$t)=>{let kt=atBlockStart(et,$t);if(!kt)return!1;let Tt=findCutBefore(kt);return Tt?joinTextblocksAround(et,Tt,dt):!1},joinTextblockForward$1=(et,dt,$t)=>{let kt=atBlockEnd(et,$t);if(!kt)return!1;let Tt=findCutAfter(kt);return Tt?joinTextblocksAround(et,Tt,dt):!1};function joinTextblocksAround(et,dt,$t){let kt=dt.nodeBefore,Tt=kt,Dt=dt.pos-1;for(;!Tt.isTextblock;Dt--){if(Tt.type.spec.isolating)return!1;let Yt=Tt.lastChild;if(!Yt)return!1;Tt=Yt}let Ft=dt.nodeAfter,Ut=Ft,Ht=dt.pos+1;for(;!Ut.isTextblock;Ht++){if(Ut.type.spec.isolating)return!1;let Yt=Ut.firstChild;if(!Yt)return!1;Ut=Yt}let Kt=replaceStep(et.doc,Dt,Ht,Slice.empty);if(!Kt||Kt.from!=Dt||Kt instanceof ReplaceStep&&Kt.slice.size>=Ht-Dt)return!1;if($t){let Yt=et.tr.step(Kt);Yt.setSelection(TextSelection.create(Yt.doc,Dt)),$t(Yt.scrollIntoView())}return!0}function textblockAt(et,dt,$t=!1){for(let kt=et;kt;kt=dt=="start"?kt.firstChild:kt.lastChild){if(kt.isTextblock)return!0;if($t&&kt.childCount!=1)return!1}return!1}const selectNodeBackward$1=(et,dt,$t)=>{let{$head:kt,empty:Tt}=et.selection,Dt=kt;if(!Tt)return!1;if(kt.parent.isTextblock){if($t?!$t.endOfTextblock("backward",et):kt.parentOffset>0)return!1;Dt=findCutBefore(kt)}let Ft=Dt&&Dt.nodeBefore;return!Ft||!NodeSelection.isSelectable(Ft)?!1:(dt&&dt(et.tr.setSelection(NodeSelection.create(et.doc,Dt.pos-Ft.nodeSize)).scrollIntoView()),!0)};function findCutBefore(et){if(!et.parent.type.spec.isolating)for(let dt=et.depth-1;dt>=0;dt--){if(et.index(dt)>0)return et.doc.resolve(et.before(dt+1));if(et.node(dt).type.spec.isolating)break}return null}function atBlockEnd(et,dt){let{$cursor:$t}=et.selection;return!$t||(dt?!dt.endOfTextblock("forward",et):$t.parentOffset<$t.parent.content.size)?null:$t}const joinForward$1=(et,dt,$t)=>{let kt=atBlockEnd(et,$t);if(!kt)return!1;let Tt=findCutAfter(kt);if(!Tt)return!1;let Dt=Tt.nodeAfter;if(deleteBarrier(et,Tt,dt,1))return!0;if(kt.parent.content.size==0&&(textblockAt(Dt,"start")||NodeSelection.isSelectable(Dt))){let Ft=replaceStep(et.doc,kt.before(),kt.after(),Slice.empty);if(Ft&&Ft.slice.size<Ft.to-Ft.from){if(dt){let Ut=et.tr.step(Ft);Ut.setSelection(textblockAt(Dt,"start")?Selection.findFrom(Ut.doc.resolve(Ut.mapping.map(Tt.pos)),1):NodeSelection.create(Ut.doc,Ut.mapping.map(Tt.pos))),dt(Ut.scrollIntoView())}return!0}}return Dt.isAtom&&Tt.depth==kt.depth-1?(dt&&dt(et.tr.delete(Tt.pos,Tt.pos+Dt.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(et,dt,$t)=>{let{$head:kt,empty:Tt}=et.selection,Dt=kt;if(!Tt)return!1;if(kt.parent.isTextblock){if($t?!$t.endOfTextblock("forward",et):kt.parentOffset<kt.parent.content.size)return!1;Dt=findCutAfter(kt)}let Ft=Dt&&Dt.nodeAfter;return!Ft||!NodeSelection.isSelectable(Ft)?!1:(dt&&dt(et.tr.setSelection(NodeSelection.create(et.doc,Dt.pos)).scrollIntoView()),!0)};function findCutAfter(et){if(!et.parent.type.spec.isolating)for(let dt=et.depth-1;dt>=0;dt--){let $t=et.node(dt);if(et.index(dt)+1<$t.childCount)return et.doc.resolve(et.after(dt+1));if($t.type.spec.isolating)break}return null}const joinUp$1=(et,dt)=>{let $t=et.selection,kt=$t instanceof NodeSelection,Tt;if(kt){if($t.node.isTextblock||!canJoin(et.doc,$t.from))return!1;Tt=$t.from}else if(Tt=joinPoint(et.doc,$t.from,-1),Tt==null)return!1;if(dt){let Dt=et.tr.join(Tt);kt&&Dt.setSelection(NodeSelection.create(Dt.doc,Tt-et.doc.resolve(Tt).nodeBefore.nodeSize)),dt(Dt.scrollIntoView())}return!0},joinDown$1=(et,dt)=>{let $t=et.selection,kt;if($t instanceof NodeSelection){if($t.node.isTextblock||!canJoin(et.doc,$t.to))return!1;kt=$t.to}else if(kt=joinPoint(et.doc,$t.to,1),kt==null)return!1;return dt&&dt(et.tr.join(kt).scrollIntoView()),!0},lift$1=(et,dt)=>{let{$from:$t,$to:kt}=et.selection,Tt=$t.blockRange(kt),Dt=Tt&&liftTarget(Tt);return Dt==null?!1:(dt&&dt(et.tr.lift(Tt,Dt).scrollIntoView()),!0)},newlineInCode$1=(et,dt)=>{let{$head:$t,$anchor:kt}=et.selection;return!$t.parent.type.spec.code||!$t.sameParent(kt)?!1:(dt&&dt(et.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(et){for(let dt=0;dt<et.edgeCount;dt++){let{type:$t}=et.edge(dt);if($t.isTextblock&&!$t.hasRequiredAttrs())return $t}return null}const exitCode$1=(et,dt)=>{let{$head:$t,$anchor:kt}=et.selection;if(!$t.parent.type.spec.code||!$t.sameParent(kt))return!1;let Tt=$t.node(-1),Dt=$t.indexAfter(-1),Ft=defaultBlockAt$1(Tt.contentMatchAt(Dt));if(!Ft||!Tt.canReplaceWith(Dt,Dt,Ft))return!1;if(dt){let Ut=$t.after(),Ht=et.tr.replaceWith(Ut,Ut,Ft.createAndFill());Ht.setSelection(Selection.near(Ht.doc.resolve(Ut),1)),dt(Ht.scrollIntoView())}return!0},createParagraphNear$1=(et,dt)=>{let $t=et.selection,{$from:kt,$to:Tt}=$t;if($t instanceof AllSelection||kt.parent.inlineContent||Tt.parent.inlineContent)return!1;let Dt=defaultBlockAt$1(Tt.parent.contentMatchAt(Tt.indexAfter()));if(!Dt||!Dt.isTextblock)return!1;if(dt){let Ft=(!kt.parentOffset&&Tt.index()<Tt.parent.childCount?kt:Tt).pos,Ut=et.tr.insert(Ft,Dt.createAndFill());Ut.setSelection(TextSelection.create(Ut.doc,Ft+1)),dt(Ut.scrollIntoView())}return!0},liftEmptyBlock$1=(et,dt)=>{let{$cursor:$t}=et.selection;if(!$t||$t.parent.content.size)return!1;if($t.depth>1&&$t.after()!=$t.end(-1)){let Dt=$t.before();if(canSplit(et.doc,Dt))return dt&&dt(et.tr.split(Dt).scrollIntoView()),!0}let kt=$t.blockRange(),Tt=kt&&liftTarget(kt);return Tt==null?!1:(dt&&dt(et.tr.lift(kt,Tt).scrollIntoView()),!0)},selectParentNode$1=(et,dt)=>{let{$from:$t,to:kt}=et.selection,Tt,Dt=$t.sharedDepth(kt);return Dt==0?!1:(Tt=$t.before(Dt),dt&&dt(et.tr.setSelection(NodeSelection.create(et.doc,Tt))),!0)};function joinMaybeClear(et,dt,$t){let kt=dt.nodeBefore,Tt=dt.nodeAfter,Dt=dt.index();return!kt||!Tt||!kt.type.compatibleContent(Tt.type)?!1:!kt.content.size&&dt.parent.canReplace(Dt-1,Dt)?($t&&$t(et.tr.delete(dt.pos-kt.nodeSize,dt.pos).scrollIntoView()),!0):!dt.parent.canReplace(Dt,Dt+1)||!(Tt.isTextblock||canJoin(et.doc,dt.pos))?!1:($t&&$t(et.tr.join(dt.pos).scrollIntoView()),!0)}function deleteBarrier(et,dt,$t,kt){let Tt=dt.nodeBefore,Dt=dt.nodeAfter,Ft,Ut,Ht=Tt.type.spec.isolating||Dt.type.spec.isolating;if(!Ht&&joinMaybeClear(et,dt,$t))return!0;let Kt=!Ht&&dt.parent.canReplace(dt.index(),dt.index()+1);if(Kt&&(Ft=(Ut=Tt.contentMatchAt(Tt.childCount)).findWrapping(Dt.type))&&Ut.matchType(Ft[0]||Dt.type).validEnd){if($t){let er=dt.pos+Dt.nodeSize,rr=Fragment.empty;for(let ir=Ft.length-1;ir>=0;ir--)rr=Fragment.from(Ft[ir].create(null,rr));rr=Fragment.from(Tt.copy(rr));let sr=et.tr.step(new ReplaceAroundStep(dt.pos-1,er,dt.pos,er,new Slice(rr,1,0),Ft.length,!0)),nr=sr.doc.resolve(er+2*Ft.length);nr.nodeAfter&&nr.nodeAfter.type==Tt.type&&canJoin(sr.doc,nr.pos)&&sr.join(nr.pos),$t(sr.scrollIntoView())}return!0}let Yt=Dt.type.spec.isolating||kt>0&&Ht?null:Selection.findFrom(dt,1),Jt=Yt&&Yt.$from.blockRange(Yt.$to),Zt=Jt&&liftTarget(Jt);if(Zt!=null&&Zt>=dt.depth)return $t&&$t(et.tr.lift(Jt,Zt).scrollIntoView()),!0;if(Kt&&textblockAt(Dt,"start",!0)&&textblockAt(Tt,"end")){let er=Tt,rr=[];for(;rr.push(er),!er.isTextblock;)er=er.lastChild;let sr=Dt,nr=1;for(;!sr.isTextblock;sr=sr.firstChild)nr++;if(er.canReplace(er.childCount,er.childCount,sr.content)){if($t){let ir=Fragment.empty;for(let lr=rr.length-1;lr>=0;lr--)ir=Fragment.from(rr[lr].copy(ir));let or=et.tr.step(new ReplaceAroundStep(dt.pos-rr.length,dt.pos+Dt.nodeSize,dt.pos+nr,dt.pos+Dt.nodeSize-nr,new Slice(ir,rr.length,0),0,!0));$t(or.scrollIntoView())}return!0}}return!1}function selectTextblockSide(et){return function(dt,$t){let kt=dt.selection,Tt=et<0?kt.$from:kt.$to,Dt=Tt.depth;for(;Tt.node(Dt).isInline;){if(!Dt)return!1;Dt--}return Tt.node(Dt).isTextblock?($t&&$t(dt.tr.setSelection(TextSelection.create(dt.doc,et<0?Tt.start(Dt):Tt.end(Dt)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(et,dt=null){return function($t,kt){let{$from:Tt,$to:Dt}=$t.selection,Ft=Tt.blockRange(Dt),Ut=Ft&&findWrapping(Ft,et,dt);return Ut?(kt&&kt($t.tr.wrap(Ft,Ut).scrollIntoView()),!0):!1}}function setBlockType(et,dt=null){return function($t,kt){let Tt=!1;for(let Dt=0;Dt<$t.selection.ranges.length&&!Tt;Dt++){let{$from:{pos:Ft},$to:{pos:Ut}}=$t.selection.ranges[Dt];$t.doc.nodesBetween(Ft,Ut,(Ht,Kt)=>{if(Tt)return!1;if(!(!Ht.isTextblock||Ht.hasMarkup(et,dt)))if(Ht.type==et)Tt=!0;else{let Yt=$t.doc.resolve(Kt),Jt=Yt.index();Tt=Yt.parent.canReplaceWith(Jt,Jt+1,et)}})}if(!Tt)return!1;if(kt){let Dt=$t.tr;for(let Ft=0;Ft<$t.selection.ranges.length;Ft++){let{$from:{pos:Ut},$to:{pos:Ht}}=$t.selection.ranges[Ft];Dt.setBlockType(Ut,Ht,et,dt)}kt(Dt.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(et,dt=null){return function($t,kt){let{$from:Tt,$to:Dt}=$t.selection,Ft=Tt.blockRange(Dt);if(!Ft)return!1;let Ut=kt?$t.tr:null;return wrapRangeInList(Ut,Ft,et,dt)?(kt&&kt(Ut.scrollIntoView()),!0):!1}}function wrapRangeInList(et,dt,$t,kt=null){let Tt=!1,Dt=dt,Ft=dt.$from.doc;if(dt.depth>=2&&dt.$from.node(dt.depth-1).type.compatibleContent($t)&&dt.startIndex==0){if(dt.$from.index(dt.depth-1)==0)return!1;let Ht=Ft.resolve(dt.start-2);Dt=new NodeRange(Ht,Ht,dt.depth),dt.endIndex<dt.parent.childCount&&(dt=new NodeRange(dt.$from,Ft.resolve(dt.$to.end(dt.depth)),dt.depth)),Tt=!0}let Ut=findWrapping(Dt,$t,kt,dt);return Ut?(et&&doWrapInList(et,dt,Ut,Tt,$t),!0):!1}function doWrapInList(et,dt,$t,kt,Tt){let Dt=Fragment.empty;for(let Yt=$t.length-1;Yt>=0;Yt--)Dt=Fragment.from($t[Yt].type.create($t[Yt].attrs,Dt));et.step(new ReplaceAroundStep(dt.start-(kt?2:0),dt.end,dt.start,dt.end,new Slice(Dt,0,0),$t.length,!0));let Ft=0;for(let Yt=0;Yt<$t.length;Yt++)$t[Yt].type==Tt&&(Ft=Yt+1);let Ut=$t.length-Ft,Ht=dt.start+$t.length-(kt?2:0),Kt=dt.parent;for(let Yt=dt.startIndex,Jt=dt.endIndex,Zt=!0;Yt<Jt;Yt++,Zt=!1)!Zt&&canSplit(et.doc,Ht,Ut)&&(et.split(Ht,Ut),Ht+=2*Ut),Ht+=Kt.child(Yt).nodeSize;return et}function liftListItem$1(et){return function(dt,$t){let{$from:kt,$to:Tt}=dt.selection,Dt=kt.blockRange(Tt,Ft=>Ft.childCount>0&&Ft.firstChild.type==et);return Dt?$t?kt.node(Dt.depth-1).type==et?liftToOuterList(dt,$t,et,Dt):liftOutOfList(dt,$t,Dt):!0:!1}}function liftToOuterList(et,dt,$t,kt){let Tt=et.tr,Dt=kt.end,Ft=kt.$to.end(kt.depth);Dt<Ft&&(Tt.step(new ReplaceAroundStep(Dt-1,Ft,Dt,Ft,new Slice(Fragment.from($t.create(null,kt.parent.copy())),1,0),1,!0)),kt=new NodeRange(Tt.doc.resolve(kt.$from.pos),Tt.doc.resolve(Ft),kt.depth));const Ut=liftTarget(kt);if(Ut==null)return!1;Tt.lift(kt,Ut);let Ht=Tt.doc.resolve(Tt.mapping.map(Dt,-1)-1);return canJoin(Tt.doc,Ht.pos)&&Ht.nodeBefore.type==Ht.nodeAfter.type&&Tt.join(Ht.pos),dt(Tt.scrollIntoView()),!0}function liftOutOfList(et,dt,$t){let kt=et.tr,Tt=$t.parent;for(let er=$t.end,rr=$t.endIndex-1,sr=$t.startIndex;rr>sr;rr--)er-=Tt.child(rr).nodeSize,kt.delete(er-1,er+1);let Dt=kt.doc.resolve($t.start),Ft=Dt.nodeAfter;if(kt.mapping.map($t.end)!=$t.start+Dt.nodeAfter.nodeSize)return!1;let Ut=$t.startIndex==0,Ht=$t.endIndex==Tt.childCount,Kt=Dt.node(-1),Yt=Dt.index(-1);if(!Kt.canReplace(Yt+(Ut?0:1),Yt+1,Ft.content.append(Ht?Fragment.empty:Fragment.from(Tt))))return!1;let Jt=Dt.pos,Zt=Jt+Ft.nodeSize;return kt.step(new ReplaceAroundStep(Jt-(Ut?1:0),Zt+(Ht?1:0),Jt+1,Zt-1,new Slice((Ut?Fragment.empty:Fragment.from(Tt.copy(Fragment.empty))).append(Ht?Fragment.empty:Fragment.from(Tt.copy(Fragment.empty))),Ut?0:1,Ht?0:1),Ut?0:1)),dt(kt.scrollIntoView()),!0}function sinkListItem$1(et){return function(dt,$t){let{$from:kt,$to:Tt}=dt.selection,Dt=kt.blockRange(Tt,Kt=>Kt.childCount>0&&Kt.firstChild.type==et);if(!Dt)return!1;let Ft=Dt.startIndex;if(Ft==0)return!1;let Ut=Dt.parent,Ht=Ut.child(Ft-1);if(Ht.type!=et)return!1;if($t){let Kt=Ht.lastChild&&Ht.lastChild.type==Ut.type,Yt=Fragment.from(Kt?et.create():null),Jt=new Slice(Fragment.from(et.create(null,Fragment.from(Ut.type.create(null,Yt)))),Kt?3:1,0),Zt=Dt.start,er=Dt.end;$t(dt.tr.step(new ReplaceAroundStep(Zt-(Kt?3:1),er,Zt,er,Jt,1,!0)).scrollIntoView())}return!0}}const domIndex=function(et){for(var dt=0;;dt++)if(et=et.previousSibling,!et)return dt},parentNode=function(et){let dt=et.assignedSlot||et.parentNode;return dt&&dt.nodeType==11?dt.host:dt};let reusedRange=null;const textRange=function(et,dt,$t){let kt=reusedRange||(reusedRange=document.createRange());return kt.setEnd(et,$t??et.nodeValue.length),kt.setStart(et,dt||0),kt},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(et,dt,$t,kt){return $t&&(scanFor(et,dt,$t,kt,-1)||scanFor(et,dt,$t,kt,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(et,dt,$t,kt,Tt){for(var Dt;;){if(et==$t&&dt==kt)return!0;if(dt==(Tt<0?0:nodeSize(et))){let Ft=et.parentNode;if(!Ft||Ft.nodeType!=1||hasBlockDesc(et)||atomElements.test(et.nodeName)||et.contentEditable=="false")return!1;dt=domIndex(et)+(Tt<0?0:1),et=Ft}else if(et.nodeType==1){let Ft=et.childNodes[dt+(Tt<0?-1:0)];if(Ft.nodeType==1&&Ft.contentEditable=="false")if(!((Dt=Ft.pmViewDesc)===null||Dt===void 0)&&Dt.ignoreForSelection)dt+=Tt;else return!1;else et=Ft,dt=Tt<0?nodeSize(et):0}else return!1}}function nodeSize(et){return et.nodeType==3?et.nodeValue.length:et.childNodes.length}function textNodeBefore$1(et,dt){for(;;){if(et.nodeType==3&&dt)return et;if(et.nodeType==1&&dt>0){if(et.contentEditable=="false")return null;et=et.childNodes[dt-1],dt=nodeSize(et)}else if(et.parentNode&&!hasBlockDesc(et))dt=domIndex(et),et=et.parentNode;else return null}}function textNodeAfter$1(et,dt){for(;;){if(et.nodeType==3&&dt<et.nodeValue.length)return et;if(et.nodeType==1&&dt<et.childNodes.length){if(et.contentEditable=="false")return null;et=et.childNodes[dt],dt=0}else if(et.parentNode&&!hasBlockDesc(et))dt=domIndex(et)+1,et=et.parentNode;else return null}}function isOnEdge(et,dt,$t){for(let kt=dt==0,Tt=dt==nodeSize(et);kt||Tt;){if(et==$t)return!0;let Dt=domIndex(et);if(et=et.parentNode,!et)return!1;kt=kt&&Dt==0,Tt=Tt&&Dt==nodeSize(et)}}function hasBlockDesc(et){let dt;for(let $t=et;$t&&!(dt=$t.pmViewDesc);$t=$t.parentNode);return dt&&dt.node&&dt.node.isBlock&&(dt.dom==et||dt.contentDOM==et)}const selectionCollapsed=function(et){return et.focusNode&&isEquivalentPosition(et.focusNode,et.focusOffset,et.anchorNode,et.anchorOffset)};function keyEvent(et,dt){let $t=document.createEvent("Event");return $t.initEvent("keydown",!0,!0),$t.keyCode=et,$t.key=$t.code=dt,$t}function deepActiveElement(et){let dt=et.activeElement;for(;dt&&dt.shadowRoot;)dt=dt.shadowRoot.activeElement;return dt}function caretFromPoint(et,dt,$t){if(et.caretPositionFromPoint)try{let kt=et.caretPositionFromPoint(dt,$t);if(kt)return{node:kt.offsetNode,offset:Math.min(nodeSize(kt.offsetNode),kt.offset)}}catch{}if(et.caretRangeFromPoint){let kt=et.caretRangeFromPoint(dt,$t);if(kt)return{node:kt.startContainer,offset:Math.min(nodeSize(kt.startContainer),kt.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$2=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$2&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome$1=!ie$2&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome$1,chrome_version=_chrome$1?+_chrome$1[1]:0,safari=!ie$2&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(et){let dt=et.defaultView&&et.defaultView.visualViewport;return dt?{left:0,right:dt.width,top:0,bottom:dt.height}:{left:0,right:et.documentElement.clientWidth,top:0,bottom:et.documentElement.clientHeight}}function getSide(et,dt){return typeof et=="number"?et:et[dt]}function clientRect(et){let dt=et.getBoundingClientRect(),$t=dt.width/et.offsetWidth||1,kt=dt.height/et.offsetHeight||1;return{left:dt.left,right:dt.left+et.clientWidth*$t,top:dt.top,bottom:dt.top+et.clientHeight*kt}}function scrollRectIntoView(et,dt,$t){let kt=et.someProp("scrollThreshold")||0,Tt=et.someProp("scrollMargin")||5,Dt=et.dom.ownerDocument;for(let Ft=$t||et.dom;Ft;){if(Ft.nodeType!=1){Ft=parentNode(Ft);continue}let Ut=Ft,Ht=Ut==Dt.body,Kt=Ht?windowRect(Dt):clientRect(Ut),Yt=0,Jt=0;if(dt.top<Kt.top+getSide(kt,"top")?Jt=-(Kt.top-dt.top+getSide(Tt,"top")):dt.bottom>Kt.bottom-getSide(kt,"bottom")&&(Jt=dt.bottom-dt.top>Kt.bottom-Kt.top?dt.top+getSide(Tt,"top")-Kt.top:dt.bottom-Kt.bottom+getSide(Tt,"bottom")),dt.left<Kt.left+getSide(kt,"left")?Yt=-(Kt.left-dt.left+getSide(Tt,"left")):dt.right>Kt.right-getSide(kt,"right")&&(Yt=dt.right-Kt.right+getSide(Tt,"right")),Yt||Jt)if(Ht)Dt.defaultView.scrollBy(Yt,Jt);else{let er=Ut.scrollLeft,rr=Ut.scrollTop;Jt&&(Ut.scrollTop+=Jt),Yt&&(Ut.scrollLeft+=Yt);let sr=Ut.scrollLeft-er,nr=Ut.scrollTop-rr;dt={left:dt.left-sr,top:dt.top-nr,right:dt.right-sr,bottom:dt.bottom-nr}}let Zt=Ht?"fixed":getComputedStyle(Ft).position;if(/^(fixed|sticky)$/.test(Zt))break;Ft=Zt=="absolute"?Ft.offsetParent:parentNode(Ft)}}function storeScrollPos(et){let dt=et.dom.getBoundingClientRect(),$t=Math.max(0,dt.top),kt,Tt;for(let Dt=(dt.left+dt.right)/2,Ft=$t+1;Ft<Math.min(innerHeight,dt.bottom);Ft+=5){let Ut=et.root.elementFromPoint(Dt,Ft);if(!Ut||Ut==et.dom||!et.dom.contains(Ut))continue;let Ht=Ut.getBoundingClientRect();if(Ht.top>=$t-20){kt=Ut,Tt=Ht.top;break}}return{refDOM:kt,refTop:Tt,stack:scrollStack(et.dom)}}function scrollStack(et){let dt=[],$t=et.ownerDocument;for(let kt=et;kt&&(dt.push({dom:kt,top:kt.scrollTop,left:kt.scrollLeft}),et!=$t);kt=parentNode(kt));return dt}function resetScrollPos({refDOM:et,refTop:dt,stack:$t}){let kt=et?et.getBoundingClientRect().top:0;restoreScrollStack($t,kt==0?0:kt-dt)}function restoreScrollStack(et,dt){for(let $t=0;$t<et.length;$t++){let{dom:kt,top:Tt,left:Dt}=et[$t];kt.scrollTop!=Tt+dt&&(kt.scrollTop=Tt+dt),kt.scrollLeft!=Dt&&(kt.scrollLeft=Dt)}}let preventScrollSupported=null;function focusPreventScroll(et){if(et.setActive)return et.setActive();if(preventScrollSupported)return et.focus(preventScrollSupported);let dt=scrollStack(et);et.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(dt,0))}function findOffsetInNode(et,dt){let $t,kt=2e8,Tt,Dt=0,Ft=dt.top,Ut=dt.top,Ht,Kt;for(let Yt=et.firstChild,Jt=0;Yt;Yt=Yt.nextSibling,Jt++){let Zt;if(Yt.nodeType==1)Zt=Yt.getClientRects();else if(Yt.nodeType==3)Zt=textRange(Yt).getClientRects();else continue;for(let er=0;er<Zt.length;er++){let rr=Zt[er];if(rr.top<=Ft&&rr.bottom>=Ut){Ft=Math.max(rr.bottom,Ft),Ut=Math.min(rr.top,Ut);let sr=rr.left>dt.left?rr.left-dt.left:rr.right<dt.left?dt.left-rr.right:0;if(sr<kt){$t=Yt,kt=sr,Tt=sr&&$t.nodeType==3?{left:rr.right<dt.left?rr.right:rr.left,top:dt.top}:dt,Yt.nodeType==1&&sr&&(Dt=Jt+(dt.left>=(rr.left+rr.right)/2?1:0));continue}}else rr.top>dt.top&&!Ht&&rr.left<=dt.left&&rr.right>=dt.left&&(Ht=Yt,Kt={left:Math.max(rr.left,Math.min(rr.right,dt.left)),top:rr.top});!$t&&(dt.left>=rr.right&&dt.top>=rr.top||dt.left>=rr.left&&dt.top>=rr.bottom)&&(Dt=Jt+1)}}return!$t&&Ht&&($t=Ht,Tt=Kt,kt=0),$t&&$t.nodeType==3?findOffsetInText($t,Tt):!$t||kt&&$t.nodeType==1?{node:et,offset:Dt}:findOffsetInNode($t,Tt)}function findOffsetInText(et,dt){let $t=et.nodeValue.length,kt=document.createRange();for(let Tt=0;Tt<$t;Tt++){kt.setEnd(et,Tt+1),kt.setStart(et,Tt);let Dt=singleRect(kt,1);if(Dt.top!=Dt.bottom&&inRect(dt,Dt))return{node:et,offset:Tt+(dt.left>=(Dt.left+Dt.right)/2?1:0)}}return{node:et,offset:0}}function inRect(et,dt){return et.left>=dt.left-1&&et.left<=dt.right+1&&et.top>=dt.top-1&&et.top<=dt.bottom+1}function targetKludge(et,dt){let $t=et.parentNode;return $t&&/^li$/i.test($t.nodeName)&&dt.left<et.getBoundingClientRect().left?$t:et}function posFromElement(et,dt,$t){let{node:kt,offset:Tt}=findOffsetInNode(dt,$t),Dt=-1;if(kt.nodeType==1&&!kt.firstChild){let Ft=kt.getBoundingClientRect();Dt=Ft.left!=Ft.right&&$t.left>(Ft.left+Ft.right)/2?1:-1}return et.docView.posFromDOM(kt,Tt,Dt)}function posFromCaret(et,dt,$t,kt){let Tt=-1;for(let Dt=dt,Ft=!1;Dt!=et.dom;){let Ut=et.docView.nearestDesc(Dt,!0),Ht;if(!Ut)return null;if(Ut.dom.nodeType==1&&(Ut.node.isBlock&&Ut.parent||!Ut.contentDOM)&&((Ht=Ut.dom.getBoundingClientRect()).width||Ht.height)&&(Ut.node.isBlock&&Ut.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(Ut.dom.nodeName)&&(!Ft&&Ht.left>kt.left||Ht.top>kt.top?Tt=Ut.posBefore:(!Ft&&Ht.right<kt.left||Ht.bottom<kt.top)&&(Tt=Ut.posAfter),Ft=!0),!Ut.contentDOM&&Tt<0&&!Ut.node.isText))return(Ut.node.isBlock?kt.top<(Ht.top+Ht.bottom)/2:kt.left<(Ht.left+Ht.right)/2)?Ut.posBefore:Ut.posAfter;Dt=Ut.dom.parentNode}return Tt>-1?Tt:et.docView.posFromDOM(dt,$t,-1)}function elementFromPoint(et,dt,$t){let kt=et.childNodes.length;if(kt&&$t.top<$t.bottom)for(let Tt=Math.max(0,Math.min(kt-1,Math.floor(kt*(dt.top-$t.top)/($t.bottom-$t.top))-2)),Dt=Tt;;){let Ft=et.childNodes[Dt];if(Ft.nodeType==1){let Ut=Ft.getClientRects();for(let Ht=0;Ht<Ut.length;Ht++){let Kt=Ut[Ht];if(inRect(dt,Kt))return elementFromPoint(Ft,dt,Kt)}}if((Dt=(Dt+1)%kt)==Tt)break}return et}function posAtCoords(et,dt){let $t=et.dom.ownerDocument,kt,Tt=0,Dt=caretFromPoint($t,dt.left,dt.top);Dt&&({node:kt,offset:Tt}=Dt);let Ft=(et.root.elementFromPoint?et.root:$t).elementFromPoint(dt.left,dt.top),Ut;if(!Ft||!et.dom.contains(Ft.nodeType!=1?Ft.parentNode:Ft)){let Kt=et.dom.getBoundingClientRect();if(!inRect(dt,Kt)||(Ft=elementFromPoint(et.dom,dt,Kt),!Ft))return null}if(safari)for(let Kt=Ft;kt&&Kt;Kt=parentNode(Kt))Kt.draggable&&(kt=void 0);if(Ft=targetKludge(Ft,dt),kt){if(gecko&&kt.nodeType==1&&(Tt=Math.min(Tt,kt.childNodes.length),Tt<kt.childNodes.length)){let Yt=kt.childNodes[Tt],Jt;Yt.nodeName=="IMG"&&(Jt=Yt.getBoundingClientRect()).right<=dt.left&&Jt.bottom>dt.top&&Tt++}let Kt;webkit&&Tt&&kt.nodeType==1&&(Kt=kt.childNodes[Tt-1]).nodeType==1&&Kt.contentEditable=="false"&&Kt.getBoundingClientRect().top>=dt.top&&Tt--,kt==et.dom&&Tt==kt.childNodes.length-1&&kt.lastChild.nodeType==1&&dt.top>kt.lastChild.getBoundingClientRect().bottom?Ut=et.state.doc.content.size:(Tt==0||kt.nodeType!=1||kt.childNodes[Tt-1].nodeName!="BR")&&(Ut=posFromCaret(et,kt,Tt,dt))}Ut==null&&(Ut=posFromElement(et,Ft,dt));let Ht=et.docView.nearestDesc(Ft,!0);return{pos:Ut,inside:Ht?Ht.posAtStart-Ht.border:-1}}function nonZero(et){return et.top<et.bottom||et.left<et.right}function singleRect(et,dt){let $t=et.getClientRects();if($t.length){let kt=$t[dt<0?0:$t.length-1];if(nonZero(kt))return kt}return Array.prototype.find.call($t,nonZero)||et.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(et,dt,$t){let{node:kt,offset:Tt,atom:Dt}=et.docView.domFromPos(dt,$t<0?-1:1),Ft=webkit||gecko;if(kt.nodeType==3)if(Ft&&(BIDI.test(kt.nodeValue)||($t<0?!Tt:Tt==kt.nodeValue.length))){let Ht=singleRect(textRange(kt,Tt,Tt),$t);if(gecko&&Tt&&/\s/.test(kt.nodeValue[Tt-1])&&Tt<kt.nodeValue.length){let Kt=singleRect(textRange(kt,Tt-1,Tt-1),-1);if(Kt.top==Ht.top){let Yt=singleRect(textRange(kt,Tt,Tt+1),-1);if(Yt.top!=Ht.top)return flattenV(Yt,Yt.left<Kt.left)}}return Ht}else{let Ht=Tt,Kt=Tt,Yt=$t<0?1:-1;return $t<0&&!Tt?(Kt++,Yt=-1):$t>=0&&Tt==kt.nodeValue.length?(Ht--,Yt=1):$t<0?Ht--:Kt++,flattenV(singleRect(textRange(kt,Ht,Kt),Yt),Yt<0)}if(!et.state.doc.resolve(dt-(Dt||0)).parent.inlineContent){if(Dt==null&&Tt&&($t<0||Tt==nodeSize(kt))){let Ht=kt.childNodes[Tt-1];if(Ht.nodeType==1)return flattenH(Ht.getBoundingClientRect(),!1)}if(Dt==null&&Tt<nodeSize(kt)){let Ht=kt.childNodes[Tt];if(Ht.nodeType==1)return flattenH(Ht.getBoundingClientRect(),!0)}return flattenH(kt.getBoundingClientRect(),$t>=0)}if(Dt==null&&Tt&&($t<0||Tt==nodeSize(kt))){let Ht=kt.childNodes[Tt-1],Kt=Ht.nodeType==3?textRange(Ht,nodeSize(Ht)-(Ft?0:1)):Ht.nodeType==1&&(Ht.nodeName!="BR"||!Ht.nextSibling)?Ht:null;if(Kt)return flattenV(singleRect(Kt,1),!1)}if(Dt==null&&Tt<nodeSize(kt)){let Ht=kt.childNodes[Tt];for(;Ht.pmViewDesc&&Ht.pmViewDesc.ignoreForCoords;)Ht=Ht.nextSibling;let Kt=Ht?Ht.nodeType==3?textRange(Ht,0,Ft?0:1):Ht.nodeType==1?Ht:null:null;if(Kt)return flattenV(singleRect(Kt,-1),!0)}return flattenV(singleRect(kt.nodeType==3?textRange(kt):kt,-$t),$t>=0)}function flattenV(et,dt){if(et.width==0)return et;let $t=dt?et.left:et.right;return{top:et.top,bottom:et.bottom,left:$t,right:$t}}function flattenH(et,dt){if(et.height==0)return et;let $t=dt?et.top:et.bottom;return{top:$t,bottom:$t,left:et.left,right:et.right}}function withFlushedState(et,dt,$t){let kt=et.state,Tt=et.root.activeElement;kt!=dt&&et.updateState(dt),Tt!=et.dom&&et.focus();try{return $t()}finally{kt!=dt&&et.updateState(kt),Tt!=et.dom&&Tt&&Tt.focus()}}function endOfTextblockVertical(et,dt,$t){let kt=dt.selection,Tt=$t=="up"?kt.$from:kt.$to;return withFlushedState(et,dt,()=>{let{node:Dt}=et.docView.domFromPos(Tt.pos,$t=="up"?-1:1);for(;;){let Ut=et.docView.nearestDesc(Dt,!0);if(!Ut)break;if(Ut.node.isBlock){Dt=Ut.contentDOM||Ut.dom;break}Dt=Ut.dom.parentNode}let Ft=coordsAtPos(et,Tt.pos,1);for(let Ut=Dt.firstChild;Ut;Ut=Ut.nextSibling){let Ht;if(Ut.nodeType==1)Ht=Ut.getClientRects();else if(Ut.nodeType==3)Ht=textRange(Ut,0,Ut.nodeValue.length).getClientRects();else continue;for(let Kt=0;Kt<Ht.length;Kt++){let Yt=Ht[Kt];if(Yt.bottom>Yt.top+1&&($t=="up"?Ft.top-Yt.top>(Yt.bottom-Ft.top)*2:Yt.bottom-Ft.bottom>(Ft.bottom-Yt.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(et,dt,$t){let{$head:kt}=dt.selection;if(!kt.parent.isTextblock)return!1;let Tt=kt.parentOffset,Dt=!Tt,Ft=Tt==kt.parent.content.size,Ut=et.domSelection();return Ut?!maybeRTL.test(kt.parent.textContent)||!Ut.modify?$t=="left"||$t=="backward"?Dt:Ft:withFlushedState(et,dt,()=>{let{focusNode:Ht,focusOffset:Kt,anchorNode:Yt,anchorOffset:Jt}=et.domSelectionRange(),Zt=Ut.caretBidiLevel;Ut.modify("move",$t,"character");let er=kt.depth?et.docView.domAfterPos(kt.before()):et.dom,{focusNode:rr,focusOffset:sr}=et.domSelectionRange(),nr=rr&&!er.contains(rr.nodeType==1?rr:rr.parentNode)||Ht==rr&&Kt==sr;try{Ut.collapse(Yt,Jt),Ht&&(Ht!=Yt||Kt!=Jt)&&Ut.extend&&Ut.extend(Ht,Kt)}catch{}return Zt!=null&&(Ut.caretBidiLevel=Zt),nr}):kt.pos==kt.start()||kt.pos==kt.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(et,dt,$t){return cachedState==dt&&cachedDir==$t?cachedResult:(cachedState=dt,cachedDir=$t,cachedResult=$t=="up"||$t=="down"?endOfTextblockVertical(et,dt,$t):endOfTextblockHorizontal(et,dt,$t))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(dt,$t,kt,Tt){this.parent=dt,this.children=$t,this.dom=kt,this.contentDOM=Tt,this.dirty=NOT_DIRTY,kt.pmViewDesc=this}matchesWidget(dt){return!1}matchesMark(dt){return!1}matchesNode(dt,$t,kt){return!1}matchesHack(dt){return!1}parseRule(){return null}stopEvent(dt){return!1}get size(){let dt=0;for(let $t=0;$t<this.children.length;$t++)dt+=this.children[$t].size;return dt}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let dt=0;dt<this.children.length;dt++)this.children[dt].destroy()}posBeforeChild(dt){for(let $t=0,kt=this.posAtStart;;$t++){let Tt=this.children[$t];if(Tt==dt)return kt;kt+=Tt.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(dt,$t,kt){if(this.contentDOM&&this.contentDOM.contains(dt.nodeType==1?dt:dt.parentNode))if(kt<0){let Dt,Ft;if(dt==this.contentDOM)Dt=dt.childNodes[$t-1];else{for(;dt.parentNode!=this.contentDOM;)dt=dt.parentNode;Dt=dt.previousSibling}for(;Dt&&!((Ft=Dt.pmViewDesc)&&Ft.parent==this);)Dt=Dt.previousSibling;return Dt?this.posBeforeChild(Ft)+Ft.size:this.posAtStart}else{let Dt,Ft;if(dt==this.contentDOM)Dt=dt.childNodes[$t];else{for(;dt.parentNode!=this.contentDOM;)dt=dt.parentNode;Dt=dt.nextSibling}for(;Dt&&!((Ft=Dt.pmViewDesc)&&Ft.parent==this);)Dt=Dt.nextSibling;return Dt?this.posBeforeChild(Ft):this.posAtEnd}let Tt;if(dt==this.dom&&this.contentDOM)Tt=$t>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))Tt=dt.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if($t==0)for(let Dt=dt;;Dt=Dt.parentNode){if(Dt==this.dom){Tt=!1;break}if(Dt.previousSibling)break}if(Tt==null&&$t==dt.childNodes.length)for(let Dt=dt;;Dt=Dt.parentNode){if(Dt==this.dom){Tt=!0;break}if(Dt.nextSibling)break}}return Tt??kt>0?this.posAtEnd:this.posAtStart}nearestDesc(dt,$t=!1){for(let kt=!0,Tt=dt;Tt;Tt=Tt.parentNode){let Dt=this.getDesc(Tt),Ft;if(Dt&&(!$t||Dt.node))if(kt&&(Ft=Dt.nodeDOM)&&!(Ft.nodeType==1?Ft.contains(dt.nodeType==1?dt:dt.parentNode):Ft==dt))kt=!1;else return Dt}}getDesc(dt){let $t=dt.pmViewDesc;for(let kt=$t;kt;kt=kt.parent)if(kt==this)return $t}posFromDOM(dt,$t,kt){for(let Tt=dt;Tt;Tt=Tt.parentNode){let Dt=this.getDesc(Tt);if(Dt)return Dt.localPosFromDOM(dt,$t,kt)}return-1}descAt(dt){for(let $t=0,kt=0;$t<this.children.length;$t++){let Tt=this.children[$t],Dt=kt+Tt.size;if(kt==dt&&Dt!=kt){for(;!Tt.border&&Tt.children.length;)for(let Ft=0;Ft<Tt.children.length;Ft++){let Ut=Tt.children[Ft];if(Ut.size){Tt=Ut;break}}return Tt}if(dt<Dt)return Tt.descAt(dt-kt-Tt.border);kt=Dt}}domFromPos(dt,$t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:dt+1};let kt=0,Tt=0;for(let Dt=0;kt<this.children.length;kt++){let Ft=this.children[kt],Ut=Dt+Ft.size;if(Ut>dt||Ft instanceof TrailingHackViewDesc){Tt=dt-Dt;break}Dt=Ut}if(Tt)return this.children[kt].domFromPos(Tt-this.children[kt].border,$t);for(let Dt;kt&&!(Dt=this.children[kt-1]).size&&Dt instanceof WidgetViewDesc&&Dt.side>=0;kt--);if($t<=0){let Dt,Ft=!0;for(;Dt=kt?this.children[kt-1]:null,!(!Dt||Dt.dom.parentNode==this.contentDOM);kt--,Ft=!1);return Dt&&$t&&Ft&&!Dt.border&&!Dt.domAtom?Dt.domFromPos(Dt.size,$t):{node:this.contentDOM,offset:Dt?domIndex(Dt.dom)+1:0}}else{let Dt,Ft=!0;for(;Dt=kt<this.children.length?this.children[kt]:null,!(!Dt||Dt.dom.parentNode==this.contentDOM);kt++,Ft=!1);return Dt&&Ft&&!Dt.border&&!Dt.domAtom?Dt.domFromPos(0,$t):{node:this.contentDOM,offset:Dt?domIndex(Dt.dom):this.contentDOM.childNodes.length}}}parseRange(dt,$t,kt=0){if(this.children.length==0)return{node:this.contentDOM,from:dt,to:$t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let Tt=-1,Dt=-1;for(let Ft=kt,Ut=0;;Ut++){let Ht=this.children[Ut],Kt=Ft+Ht.size;if(Tt==-1&&dt<=Kt){let Yt=Ft+Ht.border;if(dt>=Yt&&$t<=Kt-Ht.border&&Ht.node&&Ht.contentDOM&&this.contentDOM.contains(Ht.contentDOM))return Ht.parseRange(dt,$t,Yt);dt=Ft;for(let Jt=Ut;Jt>0;Jt--){let Zt=this.children[Jt-1];if(Zt.size&&Zt.dom.parentNode==this.contentDOM&&!Zt.emptyChildAt(1)){Tt=domIndex(Zt.dom)+1;break}dt-=Zt.size}Tt==-1&&(Tt=0)}if(Tt>-1&&(Kt>$t||Ut==this.children.length-1)){$t=Kt;for(let Yt=Ut+1;Yt<this.children.length;Yt++){let Jt=this.children[Yt];if(Jt.size&&Jt.dom.parentNode==this.contentDOM&&!Jt.emptyChildAt(-1)){Dt=domIndex(Jt.dom);break}$t+=Jt.size}Dt==-1&&(Dt=this.contentDOM.childNodes.length);break}Ft=Kt}return{node:this.contentDOM,from:dt,to:$t,fromOffset:Tt,toOffset:Dt}}emptyChildAt(dt){if(this.border||!this.contentDOM||!this.children.length)return!1;let $t=this.children[dt<0?0:this.children.length-1];return $t.size==0||$t.emptyChildAt(dt)}domAfterPos(dt){let{node:$t,offset:kt}=this.domFromPos(dt,0);if($t.nodeType!=1||kt==$t.childNodes.length)throw new RangeError("No node after pos "+dt);return $t.childNodes[kt]}setSelection(dt,$t,kt,Tt=!1){let Dt=Math.min(dt,$t),Ft=Math.max(dt,$t);for(let er=0,rr=0;er<this.children.length;er++){let sr=this.children[er],nr=rr+sr.size;if(Dt>rr&&Ft<nr)return sr.setSelection(dt-rr-sr.border,$t-rr-sr.border,kt,Tt);rr=nr}let Ut=this.domFromPos(dt,dt?-1:1),Ht=$t==dt?Ut:this.domFromPos($t,$t?-1:1),Kt=kt.root.getSelection(),Yt=kt.domSelectionRange(),Jt=!1;if((gecko||safari)&&dt==$t){let{node:er,offset:rr}=Ut;if(er.nodeType==3){if(Jt=!!(rr&&er.nodeValue[rr-1]==`
`),Jt&&rr==er.nodeValue.length)for(let sr=er,nr;sr;sr=sr.parentNode){if(nr=sr.nextSibling){nr.nodeName=="BR"&&(Ut=Ht={node:nr.parentNode,offset:domIndex(nr)+1});break}let ir=sr.pmViewDesc;if(ir&&ir.node&&ir.node.isBlock)break}}else{let sr=er.childNodes[rr-1];Jt=sr&&(sr.nodeName=="BR"||sr.contentEditable=="false")}}if(gecko&&Yt.focusNode&&Yt.focusNode!=Ht.node&&Yt.focusNode.nodeType==1){let er=Yt.focusNode.childNodes[Yt.focusOffset];er&&er.contentEditable=="false"&&(Tt=!0)}if(!(Tt||Jt&&safari)&&isEquivalentPosition(Ut.node,Ut.offset,Yt.anchorNode,Yt.anchorOffset)&&isEquivalentPosition(Ht.node,Ht.offset,Yt.focusNode,Yt.focusOffset))return;let Zt=!1;if((Kt.extend||dt==$t)&&!(Jt&&gecko)){Kt.collapse(Ut.node,Ut.offset);try{dt!=$t&&Kt.extend(Ht.node,Ht.offset),Zt=!0}catch{}}if(!Zt){if(dt>$t){let rr=Ut;Ut=Ht,Ht=rr}let er=document.createRange();er.setEnd(Ht.node,Ht.offset),er.setStart(Ut.node,Ut.offset),Kt.removeAllRanges(),Kt.addRange(er)}}ignoreMutation(dt){return!this.contentDOM&&dt.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(dt,$t){for(let kt=0,Tt=0;Tt<this.children.length;Tt++){let Dt=this.children[Tt],Ft=kt+Dt.size;if(kt==Ft?dt<=Ft&&$t>=kt:dt<Ft&&$t>kt){let Ut=kt+Dt.border,Ht=Ft-Dt.border;if(dt>=Ut&&$t<=Ht){this.dirty=dt==kt||$t==Ft?CONTENT_DIRTY:CHILD_DIRTY,dt==Ut&&$t==Ht&&(Dt.contentLost||Dt.dom.parentNode!=this.contentDOM)?Dt.dirty=NODE_DIRTY:Dt.markDirty(dt-Ut,$t-Ut);return}else Dt.dirty=Dt.dom==Dt.contentDOM&&Dt.dom.parentNode==this.contentDOM&&!Dt.children.length?CONTENT_DIRTY:NODE_DIRTY}kt=Ft}this.dirty=CONTENT_DIRTY}markParentsDirty(){let dt=1;for(let $t=this.parent;$t;$t=$t.parent,dt++){let kt=dt==1?CONTENT_DIRTY:CHILD_DIRTY;$t.dirty<kt&&($t.dirty=kt)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(dt){return!1}}class WidgetViewDesc extends ViewDesc{constructor(dt,$t,kt,Tt){let Dt,Ft=$t.type.toDOM;if(typeof Ft=="function"&&(Ft=Ft(kt,()=>{if(!Dt)return Tt;if(Dt.parent)return Dt.parent.posBeforeChild(Dt)})),!$t.type.spec.raw){if(Ft.nodeType!=1){let Ut=document.createElement("span");Ut.appendChild(Ft),Ft=Ut}Ft.contentEditable="false",Ft.classList.add("ProseMirror-widget")}super(dt,[],Ft,null),this.widget=$t,this.widget=$t,Dt=this}matchesWidget(dt){return this.dirty==NOT_DIRTY&&dt.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(dt){let $t=this.widget.spec.stopEvent;return $t?$t(dt):!1}ignoreMutation(dt){return dt.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(dt,$t,kt,Tt){super(dt,[],$t,null),this.textDOM=kt,this.text=Tt}get size(){return this.text.length}localPosFromDOM(dt,$t){return dt!=this.textDOM?this.posAtStart+($t?this.size:0):this.posAtStart+$t}domFromPos(dt){return{node:this.textDOM,offset:dt}}ignoreMutation(dt){return dt.type==="characterData"&&dt.target.nodeValue==dt.oldValue}}class MarkViewDesc extends ViewDesc{constructor(dt,$t,kt,Tt,Dt){super(dt,[],kt,Tt),this.mark=$t,this.spec=Dt}static create(dt,$t,kt,Tt){let Dt=Tt.nodeViews[$t.type.name],Ft=Dt&&Dt($t,Tt,kt);return(!Ft||!Ft.dom)&&(Ft=DOMSerializer.renderSpec(document,$t.type.spec.toDOM($t,kt),null,$t.attrs)),new MarkViewDesc(dt,$t,Ft.dom,Ft.contentDOM||Ft.dom,Ft)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(dt){return this.dirty!=NODE_DIRTY&&this.mark.eq(dt)}markDirty(dt,$t){if(super.markDirty(dt,$t),this.dirty!=NOT_DIRTY){let kt=this.parent;for(;!kt.node;)kt=kt.parent;kt.dirty<this.dirty&&(kt.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(dt,$t,kt){let Tt=MarkViewDesc.create(this.parent,this.mark,!0,kt),Dt=this.children,Ft=this.size;$t<Ft&&(Dt=replaceNodes(Dt,$t,Ft,kt)),dt>0&&(Dt=replaceNodes(Dt,0,dt,kt));for(let Ut=0;Ut<Dt.length;Ut++)Dt[Ut].parent=Tt;return Tt.children=Dt,Tt}ignoreMutation(dt){return this.spec.ignoreMutation?this.spec.ignoreMutation(dt):super.ignoreMutation(dt)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt){super(dt,[],Dt,Ft),this.node=$t,this.outerDeco=kt,this.innerDeco=Tt,this.nodeDOM=Ut}static create(dt,$t,kt,Tt,Dt,Ft){let Ut=Dt.nodeViews[$t.type.name],Ht,Kt=Ut&&Ut($t,Dt,()=>{if(!Ht)return Ft;if(Ht.parent)return Ht.parent.posBeforeChild(Ht)},kt,Tt),Yt=Kt&&Kt.dom,Jt=Kt&&Kt.contentDOM;if($t.isText){if(!Yt)Yt=document.createTextNode($t.text);else if(Yt.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else Yt||({dom:Yt,contentDOM:Jt}=DOMSerializer.renderSpec(document,$t.type.spec.toDOM($t),null,$t.attrs));!Jt&&!$t.isText&&Yt.nodeName!="BR"&&(Yt.hasAttribute("contenteditable")||(Yt.contentEditable="false"),$t.type.spec.draggable&&(Yt.draggable=!0));let Zt=Yt;return Yt=applyOuterDeco(Yt,kt,$t),Kt?Ht=new CustomNodeViewDesc(dt,$t,kt,Tt,Yt,Jt||null,Zt,Kt,Dt,Ft+1):$t.isText?new TextViewDesc(dt,$t,kt,Tt,Yt,Zt,Dt):new NodeViewDesc(dt,$t,kt,Tt,Yt,Jt||null,Zt,Dt,Ft+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let dt={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(dt.preserveWhitespace="full"),!this.contentDOM)dt.getContent=()=>this.node.content;else if(!this.contentLost)dt.contentElement=this.contentDOM;else{for(let $t=this.children.length-1;$t>=0;$t--){let kt=this.children[$t];if(this.dom.contains(kt.dom.parentNode)){dt.contentElement=kt.dom.parentNode;break}}dt.contentElement||(dt.getContent=()=>Fragment.empty)}return dt}matchesNode(dt,$t,kt){return this.dirty==NOT_DIRTY&&dt.eq(this.node)&&sameOuterDeco($t,this.outerDeco)&&kt.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(dt,$t){let kt=this.node.inlineContent,Tt=$t,Dt=dt.composing?this.localCompositionInfo(dt,$t):null,Ft=Dt&&Dt.pos>-1?Dt:null,Ut=Dt&&Dt.pos<0,Ht=new ViewTreeUpdater(this,Ft&&Ft.node,dt);iterDeco(this.node,this.innerDeco,(Kt,Yt,Jt)=>{Kt.spec.marks?Ht.syncToMarks(Kt.spec.marks,kt,dt):Kt.type.side>=0&&!Jt&&Ht.syncToMarks(Yt==this.node.childCount?Mark$1.none:this.node.child(Yt).marks,kt,dt),Ht.placeWidget(Kt,dt,Tt)},(Kt,Yt,Jt,Zt)=>{Ht.syncToMarks(Kt.marks,kt,dt);let er;Ht.findNodeMatch(Kt,Yt,Jt,Zt)||Ut&&dt.state.selection.from>Tt&&dt.state.selection.to<Tt+Kt.nodeSize&&(er=Ht.findIndexWithChild(Dt.node))>-1&&Ht.updateNodeAt(Kt,Yt,Jt,er,dt)||Ht.updateNextNode(Kt,Yt,Jt,dt,Zt,Tt)||Ht.addNode(Kt,Yt,Jt,dt,Tt),Tt+=Kt.nodeSize}),Ht.syncToMarks([],kt,dt),this.node.isTextblock&&Ht.addTextblockHacks(),Ht.destroyRest(),(Ht.changed||this.dirty==CONTENT_DIRTY)&&(Ft&&this.protectLocalComposition(dt,Ft),renderDescs(this.contentDOM,this.children,dt),ios&&iosHacks(this.dom))}localCompositionInfo(dt,$t){let{from:kt,to:Tt}=dt.state.selection;if(!(dt.state.selection instanceof TextSelection)||kt<$t||Tt>$t+this.node.content.size)return null;let Dt=dt.input.compositionNode;if(!Dt||!this.dom.contains(Dt.parentNode))return null;if(this.node.inlineContent){let Ft=Dt.nodeValue,Ut=findTextInFragment(this.node.content,Ft,kt-$t,Tt-$t);return Ut<0?null:{node:Dt,pos:Ut,text:Ft}}else return{node:Dt,pos:-1,text:""}}protectLocalComposition(dt,{node:$t,pos:kt,text:Tt}){if(this.getDesc($t))return;let Dt=$t;for(;Dt.parentNode!=this.contentDOM;Dt=Dt.parentNode){for(;Dt.previousSibling;)Dt.parentNode.removeChild(Dt.previousSibling);for(;Dt.nextSibling;)Dt.parentNode.removeChild(Dt.nextSibling);Dt.pmViewDesc&&(Dt.pmViewDesc=void 0)}let Ft=new CompositionViewDesc(this,Dt,$t,Tt);dt.input.compositionNodes.push(Ft),this.children=replaceNodes(this.children,kt,kt+Tt.length,dt,Ft)}update(dt,$t,kt,Tt){return this.dirty==NODE_DIRTY||!dt.sameMarkup(this.node)?!1:(this.updateInner(dt,$t,kt,Tt),!0)}updateInner(dt,$t,kt,Tt){this.updateOuterDeco($t),this.node=dt,this.innerDeco=kt,this.contentDOM&&this.updateChildren(Tt,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(dt){if(sameOuterDeco(dt,this.outerDeco))return;let $t=this.nodeDOM.nodeType!=1,kt=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,$t),computeOuterDeco(dt,this.node,$t)),this.dom!=kt&&(kt.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=dt}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(et,dt,$t,kt,Tt){applyOuterDeco(kt,dt,et);let Dt=new NodeViewDesc(void 0,et,dt,$t,kt,kt,kt,Tt,0);return Dt.contentDOM&&Dt.updateChildren(Tt,0),Dt}class TextViewDesc extends NodeViewDesc{constructor(dt,$t,kt,Tt,Dt,Ft,Ut){super(dt,$t,kt,Tt,Dt,null,Ft,Ut,0)}parseRule(){let dt=this.nodeDOM.parentNode;for(;dt&&dt!=this.dom&&!dt.pmIsDeco;)dt=dt.parentNode;return{skip:dt||!0}}update(dt,$t,kt,Tt){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!dt.sameMarkup(this.node)?!1:(this.updateOuterDeco($t),(this.dirty!=NOT_DIRTY||dt.text!=this.node.text)&&dt.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=dt.text,Tt.trackWrites==this.nodeDOM&&(Tt.trackWrites=null)),this.node=dt,this.dirty=NOT_DIRTY,!0)}inParent(){let dt=this.parent.contentDOM;for(let $t=this.nodeDOM;$t;$t=$t.parentNode)if($t==dt)return!0;return!1}domFromPos(dt){return{node:this.nodeDOM,offset:dt}}localPosFromDOM(dt,$t,kt){return dt==this.nodeDOM?this.posAtStart+Math.min($t,this.node.text.length):super.localPosFromDOM(dt,$t,kt)}ignoreMutation(dt){return dt.type!="characterData"&&dt.type!="selection"}slice(dt,$t,kt){let Tt=this.node.cut(dt,$t),Dt=document.createTextNode(Tt.text);return new TextViewDesc(this.parent,Tt,this.outerDeco,this.innerDeco,Dt,Dt,kt)}markDirty(dt,$t){super.markDirty(dt,$t),this.dom!=this.nodeDOM&&(dt==0||$t==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(dt){return this.node.text==dt}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(dt){return this.dirty==NOT_DIRTY&&this.dom.nodeName==dt}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt,Yt){super(dt,$t,kt,Tt,Dt,Ft,Ut,Kt,Yt),this.spec=Ht}update(dt,$t,kt,Tt){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==dt.type||this.spec.multiType)){let Dt=this.spec.update(dt,$t,kt);return Dt&&this.updateInner(dt,$t,kt,Tt),Dt}else return!this.contentDOM&&!dt.isLeaf?!1:super.update(dt,$t,kt,Tt)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(dt,$t,kt,Tt){this.spec.setSelection?this.spec.setSelection(dt,$t,kt.root):super.setSelection(dt,$t,kt,Tt)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(dt){return this.spec.stopEvent?this.spec.stopEvent(dt):!1}ignoreMutation(dt){return this.spec.ignoreMutation?this.spec.ignoreMutation(dt):super.ignoreMutation(dt)}}function renderDescs(et,dt,$t){let kt=et.firstChild,Tt=!1;for(let Dt=0;Dt<dt.length;Dt++){let Ft=dt[Dt],Ut=Ft.dom;if(Ut.parentNode==et){for(;Ut!=kt;)kt=rm(kt),Tt=!0;kt=kt.nextSibling}else Tt=!0,et.insertBefore(Ut,kt);if(Ft instanceof MarkViewDesc){let Ht=kt?kt.previousSibling:et.lastChild;renderDescs(Ft.contentDOM,Ft.children,$t),kt=Ht?Ht.nextSibling:et.firstChild}}for(;kt;)kt=rm(kt),Tt=!0;Tt&&$t.trackWrites==et&&($t.trackWrites=null)}const OuterDecoLevel=function(et){et&&(this.nodeName=et)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(et,dt,$t){if(et.length==0)return noDeco;let kt=$t?noDeco[0]:new OuterDecoLevel,Tt=[kt];for(let Dt=0;Dt<et.length;Dt++){let Ft=et[Dt].type.attrs;if(Ft){Ft.nodeName&&Tt.push(kt=new OuterDecoLevel(Ft.nodeName));for(let Ut in Ft){let Ht=Ft[Ut];Ht!=null&&($t&&Tt.length==1&&Tt.push(kt=new OuterDecoLevel(dt.isInline?"span":"div")),Ut=="class"?kt.class=(kt.class?kt.class+" ":"")+Ht:Ut=="style"?kt.style=(kt.style?kt.style+";":"")+Ht:Ut!="nodeName"&&(kt[Ut]=Ht))}}}return Tt}function patchOuterDeco(et,dt,$t,kt){if($t==noDeco&&kt==noDeco)return dt;let Tt=dt;for(let Dt=0;Dt<kt.length;Dt++){let Ft=kt[Dt],Ut=$t[Dt];if(Dt){let Ht;Ut&&Ut.nodeName==Ft.nodeName&&Tt!=et&&(Ht=Tt.parentNode)&&Ht.nodeName.toLowerCase()==Ft.nodeName||(Ht=document.createElement(Ft.nodeName),Ht.pmIsDeco=!0,Ht.appendChild(Tt),Ut=noDeco[0]),Tt=Ht}patchAttributes(Tt,Ut||noDeco[0],Ft)}return Tt}function patchAttributes(et,dt,$t){for(let kt in dt)kt!="class"&&kt!="style"&&kt!="nodeName"&&!(kt in $t)&&et.removeAttribute(kt);for(let kt in $t)kt!="class"&&kt!="style"&&kt!="nodeName"&&$t[kt]!=dt[kt]&&et.setAttribute(kt,$t[kt]);if(dt.class!=$t.class){let kt=dt.class?dt.class.split(" ").filter(Boolean):[],Tt=$t.class?$t.class.split(" ").filter(Boolean):[];for(let Dt=0;Dt<kt.length;Dt++)Tt.indexOf(kt[Dt])==-1&&et.classList.remove(kt[Dt]);for(let Dt=0;Dt<Tt.length;Dt++)kt.indexOf(Tt[Dt])==-1&&et.classList.add(Tt[Dt]);et.classList.length==0&&et.removeAttribute("class")}if(dt.style!=$t.style){if(dt.style){let kt=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,Tt;for(;Tt=kt.exec(dt.style);)et.style.removeProperty(Tt[1])}$t.style&&(et.style.cssText+=$t.style)}}function applyOuterDeco(et,dt,$t){return patchOuterDeco(et,et,noDeco,computeOuterDeco(dt,$t,et.nodeType!=1))}function sameOuterDeco(et,dt){if(et.length!=dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(!et[$t].type.eq(dt[$t].type))return!1;return!0}function rm(et){let dt=et.nextSibling;return et.parentNode.removeChild(et),dt}class ViewTreeUpdater{constructor(dt,$t,kt){this.lock=$t,this.view=kt,this.index=0,this.stack=[],this.changed=!1,this.top=dt,this.preMatch=preMatch(dt.node.content,dt)}destroyBetween(dt,$t){if(dt!=$t){for(let kt=dt;kt<$t;kt++)this.top.children[kt].destroy();this.top.children.splice(dt,$t-dt),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(dt,$t,kt){let Tt=0,Dt=this.stack.length>>1,Ft=Math.min(Dt,dt.length);for(;Tt<Ft&&(Tt==Dt-1?this.top:this.stack[Tt+1<<1]).matchesMark(dt[Tt])&&dt[Tt].type.spec.spanning!==!1;)Tt++;for(;Tt<Dt;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),Dt--;for(;Dt<dt.length;){this.stack.push(this.top,this.index+1);let Ut=-1;for(let Ht=this.index;Ht<Math.min(this.index+3,this.top.children.length);Ht++){let Kt=this.top.children[Ht];if(Kt.matchesMark(dt[Dt])&&!this.isLocked(Kt.dom)){Ut=Ht;break}}if(Ut>-1)Ut>this.index&&(this.changed=!0,this.destroyBetween(this.index,Ut)),this.top=this.top.children[this.index];else{let Ht=MarkViewDesc.create(this.top,dt[Dt],$t,kt);this.top.children.splice(this.index,0,Ht),this.top=Ht,this.changed=!0}this.index=0,Dt++}}findNodeMatch(dt,$t,kt,Tt){let Dt=-1,Ft;if(Tt>=this.preMatch.index&&(Ft=this.preMatch.matches[Tt-this.preMatch.index]).parent==this.top&&Ft.matchesNode(dt,$t,kt))Dt=this.top.children.indexOf(Ft,this.index);else for(let Ut=this.index,Ht=Math.min(this.top.children.length,Ut+5);Ut<Ht;Ut++){let Kt=this.top.children[Ut];if(Kt.matchesNode(dt,$t,kt)&&!this.preMatch.matched.has(Kt)){Dt=Ut;break}}return Dt<0?!1:(this.destroyBetween(this.index,Dt),this.index++,!0)}updateNodeAt(dt,$t,kt,Tt,Dt){let Ft=this.top.children[Tt];return Ft.dirty==NODE_DIRTY&&Ft.dom==Ft.contentDOM&&(Ft.dirty=CONTENT_DIRTY),Ft.update(dt,$t,kt,Dt)?(this.destroyBetween(this.index,Tt),this.index++,!0):!1}findIndexWithChild(dt){for(;;){let $t=dt.parentNode;if(!$t)return-1;if($t==this.top.contentDOM){let kt=dt.pmViewDesc;if(kt){for(let Tt=this.index;Tt<this.top.children.length;Tt++)if(this.top.children[Tt]==kt)return Tt}return-1}dt=$t}}updateNextNode(dt,$t,kt,Tt,Dt,Ft){for(let Ut=this.index;Ut<this.top.children.length;Ut++){let Ht=this.top.children[Ut];if(Ht instanceof NodeViewDesc){let Kt=this.preMatch.matched.get(Ht);if(Kt!=null&&Kt!=Dt)return!1;let Yt=Ht.dom,Jt,Zt=this.isLocked(Yt)&&!(dt.isText&&Ht.node&&Ht.node.isText&&Ht.nodeDOM.nodeValue==dt.text&&Ht.dirty!=NODE_DIRTY&&sameOuterDeco($t,Ht.outerDeco));if(!Zt&&Ht.update(dt,$t,kt,Tt))return this.destroyBetween(this.index,Ut),Ht.dom!=Yt&&(this.changed=!0),this.index++,!0;if(!Zt&&(Jt=this.recreateWrapper(Ht,dt,$t,kt,Tt,Ft)))return this.destroyBetween(this.index,Ut),this.top.children[this.index]=Jt,Jt.contentDOM&&(Jt.dirty=CONTENT_DIRTY,Jt.updateChildren(Tt,Ft+1),Jt.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(dt,$t,kt,Tt,Dt,Ft){if(dt.dirty||$t.isAtom||!dt.children.length||!dt.node.content.eq($t.content)||!sameOuterDeco(kt,dt.outerDeco)||!Tt.eq(dt.innerDeco))return null;let Ut=NodeViewDesc.create(this.top,$t,kt,Tt,Dt,Ft);if(Ut.contentDOM){Ut.children=dt.children,dt.children=[];for(let Ht of Ut.children)Ht.parent=Ut}return dt.destroy(),Ut}addNode(dt,$t,kt,Tt,Dt){let Ft=NodeViewDesc.create(this.top,dt,$t,kt,Tt,Dt);Ft.contentDOM&&Ft.updateChildren(Tt,Dt+1),this.top.children.splice(this.index++,0,Ft),this.changed=!0}placeWidget(dt,$t,kt){let Tt=this.index<this.top.children.length?this.top.children[this.index]:null;if(Tt&&Tt.matchesWidget(dt)&&(dt==Tt.widget||!Tt.widget.type.toDOM.parentNode))this.index++;else{let Dt=new WidgetViewDesc(this.top,dt,$t,kt);this.top.children.splice(this.index++,0,Dt),this.changed=!0}}addTextblockHacks(){let dt=this.top.children[this.index-1],$t=this.top;for(;dt instanceof MarkViewDesc;)$t=dt,dt=$t.children[$t.children.length-1];(!dt||!(dt instanceof TextViewDesc)||/\n$/.test(dt.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(dt.node.text))&&((safari||chrome)&&dt&&dt.dom.contentEditable=="false"&&this.addHackNode("IMG",$t),this.addHackNode("BR",this.top))}addHackNode(dt,$t){if($t==this.top&&this.index<$t.children.length&&$t.children[this.index].matchesHack(dt))this.index++;else{let kt=document.createElement(dt);dt=="IMG"&&(kt.className="ProseMirror-separator",kt.alt=""),dt=="BR"&&(kt.className="ProseMirror-trailingBreak");let Tt=new TrailingHackViewDesc(this.top,[],kt,null);$t!=this.top?$t.children.push(Tt):$t.children.splice(this.index++,0,Tt),this.changed=!0}}isLocked(dt){return this.lock&&(dt==this.lock||dt.nodeType==1&&dt.contains(this.lock.parentNode))}}function preMatch(et,dt){let $t=dt,kt=$t.children.length,Tt=et.childCount,Dt=new Map,Ft=[];e:for(;Tt>0;){let Ut;for(;;)if(kt){let Kt=$t.children[kt-1];if(Kt instanceof MarkViewDesc)$t=Kt,kt=Kt.children.length;else{Ut=Kt,kt--;break}}else{if($t==dt)break e;kt=$t.parent.children.indexOf($t),$t=$t.parent}let Ht=Ut.node;if(Ht){if(Ht!=et.child(Tt-1))break;--Tt,Dt.set(Ut,Tt),Ft.push(Ut)}}return{index:Tt,matched:Dt,matches:Ft.reverse()}}function compareSide(et,dt){return et.type.side-dt.type.side}function iterDeco(et,dt,$t,kt){let Tt=dt.locals(et),Dt=0;if(Tt.length==0){for(let Kt=0;Kt<et.childCount;Kt++){let Yt=et.child(Kt);kt(Yt,Tt,dt.forChild(Dt,Yt),Kt),Dt+=Yt.nodeSize}return}let Ft=0,Ut=[],Ht=null;for(let Kt=0;;){let Yt,Jt;for(;Ft<Tt.length&&Tt[Ft].to==Dt;){let nr=Tt[Ft++];nr.widget&&(Yt?(Jt||(Jt=[Yt])).push(nr):Yt=nr)}if(Yt)if(Jt){Jt.sort(compareSide);for(let nr=0;nr<Jt.length;nr++)$t(Jt[nr],Kt,!!Ht)}else $t(Yt,Kt,!!Ht);let Zt,er;if(Ht)er=-1,Zt=Ht,Ht=null;else if(Kt<et.childCount)er=Kt,Zt=et.child(Kt++);else break;for(let nr=0;nr<Ut.length;nr++)Ut[nr].to<=Dt&&Ut.splice(nr--,1);for(;Ft<Tt.length&&Tt[Ft].from<=Dt&&Tt[Ft].to>Dt;)Ut.push(Tt[Ft++]);let rr=Dt+Zt.nodeSize;if(Zt.isText){let nr=rr;Ft<Tt.length&&Tt[Ft].from<nr&&(nr=Tt[Ft].from);for(let ir=0;ir<Ut.length;ir++)Ut[ir].to<nr&&(nr=Ut[ir].to);nr<rr&&(Ht=Zt.cut(nr-Dt),Zt=Zt.cut(0,nr-Dt),rr=nr,er=-1)}else for(;Ft<Tt.length&&Tt[Ft].to<rr;)Ft++;let sr=Zt.isInline&&!Zt.isLeaf?Ut.filter(nr=>!nr.inline):Ut.slice();kt(Zt,sr,dt.forChild(Dt,Zt),er),Dt=rr}}function iosHacks(et){if(et.nodeName=="UL"||et.nodeName=="OL"){let dt=et.style.cssText;et.style.cssText=dt+"; list-style: square !important",window.getComputedStyle(et).listStyle,et.style.cssText=dt}}function findTextInFragment(et,dt,$t,kt){for(let Tt=0,Dt=0;Tt<et.childCount&&Dt<=kt;){let Ft=et.child(Tt++),Ut=Dt;if(Dt+=Ft.nodeSize,!Ft.isText)continue;let Ht=Ft.text;for(;Tt<et.childCount;){let Kt=et.child(Tt++);if(Dt+=Kt.nodeSize,!Kt.isText)break;Ht+=Kt.text}if(Dt>=$t){if(Dt>=kt&&Ht.slice(kt-dt.length-Ut,kt-Ut)==dt)return kt-dt.length;let Kt=Ut<kt?Ht.lastIndexOf(dt,kt-Ut-1):-1;if(Kt>=0&&Kt+dt.length+Ut>=$t)return Ut+Kt;if($t==kt&&Ht.length>=kt+dt.length-Ut&&Ht.slice(kt-Ut,kt-Ut+dt.length)==dt)return kt}}return-1}function replaceNodes(et,dt,$t,kt,Tt){let Dt=[];for(let Ft=0,Ut=0;Ft<et.length;Ft++){let Ht=et[Ft],Kt=Ut,Yt=Ut+=Ht.size;Kt>=$t||Yt<=dt?Dt.push(Ht):(Kt<dt&&Dt.push(Ht.slice(0,dt-Kt,kt)),Tt&&(Dt.push(Tt),Tt=void 0),Yt>$t&&Dt.push(Ht.slice($t-Kt,Ht.size,kt)))}return Dt}function selectionFromDOM(et,dt=null){let $t=et.domSelectionRange(),kt=et.state.doc;if(!$t.focusNode)return null;let Tt=et.docView.nearestDesc($t.focusNode),Dt=Tt&&Tt.size==0,Ft=et.docView.posFromDOM($t.focusNode,$t.focusOffset,1);if(Ft<0)return null;let Ut=kt.resolve(Ft),Ht,Kt;if(selectionCollapsed($t)){for(Ht=Ft;Tt&&!Tt.node;)Tt=Tt.parent;let Jt=Tt.node;if(Tt&&Jt.isAtom&&NodeSelection.isSelectable(Jt)&&Tt.parent&&!(Jt.isInline&&isOnEdge($t.focusNode,$t.focusOffset,Tt.dom))){let Zt=Tt.posBefore;Kt=new NodeSelection(Ft==Zt?Ut:kt.resolve(Zt))}}else{if($t instanceof et.dom.ownerDocument.defaultView.Selection&&$t.rangeCount>1){let Jt=Ft,Zt=Ft;for(let er=0;er<$t.rangeCount;er++){let rr=$t.getRangeAt(er);Jt=Math.min(Jt,et.docView.posFromDOM(rr.startContainer,rr.startOffset,1)),Zt=Math.max(Zt,et.docView.posFromDOM(rr.endContainer,rr.endOffset,-1))}if(Jt<0)return null;[Ht,Ft]=Zt==et.state.selection.anchor?[Zt,Jt]:[Jt,Zt],Ut=kt.resolve(Ft)}else Ht=et.docView.posFromDOM($t.anchorNode,$t.anchorOffset,1);if(Ht<0)return null}let Yt=kt.resolve(Ht);if(!Kt){let Jt=dt=="pointer"||et.state.selection.head<Ut.pos&&!Dt?1:-1;Kt=selectionBetween(et,Yt,Ut,Jt)}return Kt}function editorOwnsSelection(et){return et.editable?et.hasFocus():hasSelection(et)&&document.activeElement&&document.activeElement.contains(et.dom)}function selectionToDOM(et,dt=!1){let $t=et.state.selection;if(syncNodeSelection(et,$t),!!editorOwnsSelection(et)){if(!dt&&et.input.mouseDown&&et.input.mouseDown.allowDefault&&chrome){let kt=et.domSelectionRange(),Tt=et.domObserver.currentSelection;if(kt.anchorNode&&Tt.anchorNode&&isEquivalentPosition(kt.anchorNode,kt.anchorOffset,Tt.anchorNode,Tt.anchorOffset)){et.input.mouseDown.delayedSelectionSync=!0,et.domObserver.setCurSelection();return}}if(et.domObserver.disconnectSelection(),et.cursorWrapper)selectCursorWrapper(et);else{let{anchor:kt,head:Tt}=$t,Dt,Ft;brokenSelectBetweenUneditable&&!($t instanceof TextSelection)&&($t.$from.parent.inlineContent||(Dt=temporarilyEditableNear(et,$t.from)),!$t.empty&&!$t.$from.parent.inlineContent&&(Ft=temporarilyEditableNear(et,$t.to))),et.docView.setSelection(kt,Tt,et,dt),brokenSelectBetweenUneditable&&(Dt&&resetEditable(Dt),Ft&&resetEditable(Ft)),$t.visible?et.dom.classList.remove("ProseMirror-hideselection"):(et.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(et))}et.domObserver.setCurSelection(),et.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(et,dt){let{node:$t,offset:kt}=et.docView.domFromPos(dt,0),Tt=kt<$t.childNodes.length?$t.childNodes[kt]:null,Dt=kt?$t.childNodes[kt-1]:null;if(safari&&Tt&&Tt.contentEditable=="false")return setEditable(Tt);if((!Tt||Tt.contentEditable=="false")&&(!Dt||Dt.contentEditable=="false")){if(Tt)return setEditable(Tt);if(Dt)return setEditable(Dt)}}function setEditable(et){return et.contentEditable="true",safari&&et.draggable&&(et.draggable=!1,et.wasDraggable=!0),et}function resetEditable(et){et.contentEditable="false",et.wasDraggable&&(et.draggable=!0,et.wasDraggable=null)}function removeClassOnSelectionChange(et){let dt=et.dom.ownerDocument;dt.removeEventListener("selectionchange",et.input.hideSelectionGuard);let $t=et.domSelectionRange(),kt=$t.anchorNode,Tt=$t.anchorOffset;dt.addEventListener("selectionchange",et.input.hideSelectionGuard=()=>{($t.anchorNode!=kt||$t.anchorOffset!=Tt)&&(dt.removeEventListener("selectionchange",et.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(et)||et.state.selection.visible)&&et.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(et){let dt=et.domSelection();if(!dt)return;let $t=et.cursorWrapper.dom,kt=$t.nodeName=="IMG";kt?dt.collapse($t.parentNode,domIndex($t)+1):dt.collapse($t,0),!kt&&!et.state.selection.visible&&ie$2&&ie_version<=11&&($t.disabled=!0,$t.disabled=!1)}function syncNodeSelection(et,dt){if(dt instanceof NodeSelection){let $t=et.docView.descAt(dt.from);$t!=et.lastSelectedViewDesc&&(clearNodeSelection(et),$t&&$t.selectNode(),et.lastSelectedViewDesc=$t)}else clearNodeSelection(et)}function clearNodeSelection(et){et.lastSelectedViewDesc&&(et.lastSelectedViewDesc.parent&&et.lastSelectedViewDesc.deselectNode(),et.lastSelectedViewDesc=void 0)}function selectionBetween(et,dt,$t,kt){return et.someProp("createSelectionBetween",Tt=>Tt(et,dt,$t))||TextSelection.between(dt,$t,kt)}function hasFocusAndSelection(et){return et.editable&&!et.hasFocus()?!1:hasSelection(et)}function hasSelection(et){let dt=et.domSelectionRange();if(!dt.anchorNode)return!1;try{return et.dom.contains(dt.anchorNode.nodeType==3?dt.anchorNode.parentNode:dt.anchorNode)&&(et.editable||et.dom.contains(dt.focusNode.nodeType==3?dt.focusNode.parentNode:dt.focusNode))}catch{return!1}}function anchorInRightPlace(et){let dt=et.docView.domFromPos(et.state.selection.anchor,0),$t=et.domSelectionRange();return isEquivalentPosition(dt.node,dt.offset,$t.anchorNode,$t.anchorOffset)}function moveSelectionBlock(et,dt){let{$anchor:$t,$head:kt}=et.selection,Tt=dt>0?$t.max(kt):$t.min(kt),Dt=Tt.parent.inlineContent?Tt.depth?et.doc.resolve(dt>0?Tt.after():Tt.before()):null:Tt;return Dt&&Selection.findFrom(Dt,dt)}function apply$2(et,dt){return et.dispatch(et.state.tr.setSelection(dt).scrollIntoView()),!0}function selectHorizontally(et,dt,$t){let kt=et.state.selection;if(kt instanceof TextSelection)if($t.indexOf("s")>-1){let{$head:Tt}=kt,Dt=Tt.textOffset?null:dt<0?Tt.nodeBefore:Tt.nodeAfter;if(!Dt||Dt.isText||!Dt.isLeaf)return!1;let Ft=et.state.doc.resolve(Tt.pos+Dt.nodeSize*(dt<0?-1:1));return apply$2(et,new TextSelection(kt.$anchor,Ft))}else if(kt.empty){if(et.endOfTextblock(dt>0?"forward":"backward")){let Tt=moveSelectionBlock(et.state,dt);return Tt&&Tt instanceof NodeSelection?apply$2(et,Tt):!1}else if(!(mac$2&&$t.indexOf("m")>-1)){let Tt=kt.$head,Dt=Tt.textOffset?null:dt<0?Tt.nodeBefore:Tt.nodeAfter,Ft;if(!Dt||Dt.isText)return!1;let Ut=dt<0?Tt.pos-Dt.nodeSize:Tt.pos;return Dt.isAtom||(Ft=et.docView.descAt(Ut))&&!Ft.contentDOM?NodeSelection.isSelectable(Dt)?apply$2(et,new NodeSelection(dt<0?et.state.doc.resolve(Tt.pos-Dt.nodeSize):Tt)):webkit?apply$2(et,new TextSelection(et.state.doc.resolve(dt<0?Ut:Ut+Dt.nodeSize))):!1:!1}}else return!1;else{if(kt instanceof NodeSelection&&kt.node.isInline)return apply$2(et,new TextSelection(dt>0?kt.$to:kt.$from));{let Tt=moveSelectionBlock(et.state,dt);return Tt?apply$2(et,Tt):!1}}}function nodeLen(et){return et.nodeType==3?et.nodeValue.length:et.childNodes.length}function isIgnorable(et,dt){let $t=et.pmViewDesc;return $t&&$t.size==0&&(dt<0||et.nextSibling||et.nodeName!="BR")}function skipIgnoredNodes(et,dt){return dt<0?skipIgnoredNodesBefore(et):skipIgnoredNodesAfter(et)}function skipIgnoredNodesBefore(et){let dt=et.domSelectionRange(),$t=dt.focusNode,kt=dt.focusOffset;if(!$t)return;let Tt,Dt,Ft=!1;for(gecko&&$t.nodeType==1&&kt<nodeLen($t)&&isIgnorable($t.childNodes[kt],-1)&&(Ft=!0);;)if(kt>0){if($t.nodeType!=1)break;{let Ut=$t.childNodes[kt-1];if(isIgnorable(Ut,-1))Tt=$t,Dt=--kt;else if(Ut.nodeType==3)$t=Ut,kt=$t.nodeValue.length;else break}}else{if(isBlockNode($t))break;{let Ut=$t.previousSibling;for(;Ut&&isIgnorable(Ut,-1);)Tt=$t.parentNode,Dt=domIndex(Ut),Ut=Ut.previousSibling;if(Ut)$t=Ut,kt=nodeLen($t);else{if($t=$t.parentNode,$t==et.dom)break;kt=0}}}Ft?setSelFocus(et,$t,kt):Tt&&setSelFocus(et,Tt,Dt)}function skipIgnoredNodesAfter(et){let dt=et.domSelectionRange(),$t=dt.focusNode,kt=dt.focusOffset;if(!$t)return;let Tt=nodeLen($t),Dt,Ft;for(;;)if(kt<Tt){if($t.nodeType!=1)break;let Ut=$t.childNodes[kt];if(isIgnorable(Ut,1))Dt=$t,Ft=++kt;else break}else{if(isBlockNode($t))break;{let Ut=$t.nextSibling;for(;Ut&&isIgnorable(Ut,1);)Dt=Ut.parentNode,Ft=domIndex(Ut)+1,Ut=Ut.nextSibling;if(Ut)$t=Ut,kt=0,Tt=nodeLen($t);else{if($t=$t.parentNode,$t==et.dom)break;kt=Tt=0}}}Dt&&setSelFocus(et,Dt,Ft)}function isBlockNode(et){let dt=et.pmViewDesc;return dt&&dt.node&&dt.node.isBlock}function textNodeAfter(et,dt){for(;et&&dt==et.childNodes.length&&!hasBlockDesc(et);)dt=domIndex(et)+1,et=et.parentNode;for(;et&&dt<et.childNodes.length;){let $t=et.childNodes[dt];if($t.nodeType==3)return $t;if($t.nodeType==1&&$t.contentEditable=="false")break;et=$t,dt=0}}function textNodeBefore(et,dt){for(;et&&!dt&&!hasBlockDesc(et);)dt=domIndex(et),et=et.parentNode;for(;et&&dt;){let $t=et.childNodes[dt-1];if($t.nodeType==3)return $t;if($t.nodeType==1&&$t.contentEditable=="false")break;et=$t,dt=et.childNodes.length}}function setSelFocus(et,dt,$t){if(dt.nodeType!=3){let Dt,Ft;(Ft=textNodeAfter(dt,$t))?(dt=Ft,$t=0):(Dt=textNodeBefore(dt,$t))&&(dt=Dt,$t=Dt.nodeValue.length)}let kt=et.domSelection();if(!kt)return;if(selectionCollapsed(kt)){let Dt=document.createRange();Dt.setEnd(dt,$t),Dt.setStart(dt,$t),kt.removeAllRanges(),kt.addRange(Dt)}else kt.extend&&kt.extend(dt,$t);et.domObserver.setCurSelection();let{state:Tt}=et;setTimeout(()=>{et.state==Tt&&selectionToDOM(et)},50)}function findDirection(et,dt){let $t=et.state.doc.resolve(dt);if(!(chrome||windows$1)&&$t.parent.inlineContent){let Tt=et.coordsAtPos(dt);if(dt>$t.start()){let Dt=et.coordsAtPos(dt-1),Ft=(Dt.top+Dt.bottom)/2;if(Ft>Tt.top&&Ft<Tt.bottom&&Math.abs(Dt.left-Tt.left)>1)return Dt.left<Tt.left?"ltr":"rtl"}if(dt<$t.end()){let Dt=et.coordsAtPos(dt+1),Ft=(Dt.top+Dt.bottom)/2;if(Ft>Tt.top&&Ft<Tt.bottom&&Math.abs(Dt.left-Tt.left)>1)return Dt.left>Tt.left?"ltr":"rtl"}}return getComputedStyle(et.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(et,dt,$t){let kt=et.state.selection;if(kt instanceof TextSelection&&!kt.empty||$t.indexOf("s")>-1||mac$2&&$t.indexOf("m")>-1)return!1;let{$from:Tt,$to:Dt}=kt;if(!Tt.parent.inlineContent||et.endOfTextblock(dt<0?"up":"down")){let Ft=moveSelectionBlock(et.state,dt);if(Ft&&Ft instanceof NodeSelection)return apply$2(et,Ft)}if(!Tt.parent.inlineContent){let Ft=dt<0?Tt:Dt,Ut=kt instanceof AllSelection?Selection.near(Ft,dt):Selection.findFrom(Ft,dt);return Ut?apply$2(et,Ut):!1}return!1}function stopNativeHorizontalDelete(et,dt){if(!(et.state.selection instanceof TextSelection))return!0;let{$head:$t,$anchor:kt,empty:Tt}=et.state.selection;if(!$t.sameParent(kt))return!0;if(!Tt)return!1;if(et.endOfTextblock(dt>0?"forward":"backward"))return!0;let Dt=!$t.textOffset&&(dt<0?$t.nodeBefore:$t.nodeAfter);if(Dt&&!Dt.isText){let Ft=et.state.tr;return dt<0?Ft.delete($t.pos-Dt.nodeSize,$t.pos):Ft.delete($t.pos,$t.pos+Dt.nodeSize),et.dispatch(Ft),!0}return!1}function switchEditable(et,dt,$t){et.domObserver.stop(),dt.contentEditable=$t,et.domObserver.start()}function safariDownArrowBug(et){if(!safari||et.state.selection.$head.parentOffset>0)return!1;let{focusNode:dt,focusOffset:$t}=et.domSelectionRange();if(dt&&dt.nodeType==1&&$t==0&&dt.firstChild&&dt.firstChild.contentEditable=="false"){let kt=dt.firstChild;switchEditable(et,kt,"true"),setTimeout(()=>switchEditable(et,kt,"false"),20)}return!1}function getMods(et){let dt="";return et.ctrlKey&&(dt+="c"),et.metaKey&&(dt+="m"),et.altKey&&(dt+="a"),et.shiftKey&&(dt+="s"),dt}function captureKeyDown(et,dt){let $t=dt.keyCode,kt=getMods(dt);if($t==8||mac$2&&$t==72&&kt=="c")return stopNativeHorizontalDelete(et,-1)||skipIgnoredNodes(et,-1);if($t==46&&!dt.shiftKey||mac$2&&$t==68&&kt=="c")return stopNativeHorizontalDelete(et,1)||skipIgnoredNodes(et,1);if($t==13||$t==27)return!0;if($t==37||mac$2&&$t==66&&kt=="c"){let Tt=$t==37?findDirection(et,et.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(et,Tt,kt)||skipIgnoredNodes(et,Tt)}else if($t==39||mac$2&&$t==70&&kt=="c"){let Tt=$t==39?findDirection(et,et.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(et,Tt,kt)||skipIgnoredNodes(et,Tt)}else{if($t==38||mac$2&&$t==80&&kt=="c")return selectVertically(et,-1,kt)||skipIgnoredNodes(et,-1);if($t==40||mac$2&&$t==78&&kt=="c")return safariDownArrowBug(et)||selectVertically(et,1,kt)||skipIgnoredNodes(et,1);if(kt==(mac$2?"m":"c")&&($t==66||$t==73||$t==89||$t==90))return!0}return!1}function serializeForClipboard(et,dt){et.someProp("transformCopied",er=>{dt=er(dt,et)});let $t=[],{content:kt,openStart:Tt,openEnd:Dt}=dt;for(;Tt>1&&Dt>1&&kt.childCount==1&&kt.firstChild.childCount==1;){Tt--,Dt--;let er=kt.firstChild;$t.push(er.type.name,er.attrs!=er.type.defaultAttrs?er.attrs:null),kt=er.content}let Ft=et.someProp("clipboardSerializer")||DOMSerializer.fromSchema(et.state.schema),Ut=detachedDoc(),Ht=Ut.createElement("div");Ht.appendChild(Ft.serializeFragment(kt,{document:Ut}));let Kt=Ht.firstChild,Yt,Jt=0;for(;Kt&&Kt.nodeType==1&&(Yt=wrapMap[Kt.nodeName.toLowerCase()]);){for(let er=Yt.length-1;er>=0;er--){let rr=Ut.createElement(Yt[er]);for(;Ht.firstChild;)rr.appendChild(Ht.firstChild);Ht.appendChild(rr),Jt++}Kt=Ht.firstChild}Kt&&Kt.nodeType==1&&Kt.setAttribute("data-pm-slice",`${Tt} ${Dt}${Jt?` -${Jt}`:""} ${JSON.stringify($t)}`);let Zt=et.someProp("clipboardTextSerializer",er=>er(dt,et))||dt.content.textBetween(0,dt.content.size,`

`);return{dom:Ht,text:Zt,slice:dt}}function parseFromClipboard(et,dt,$t,kt,Tt){let Dt=Tt.parent.type.spec.code,Ft,Ut;if(!$t&&!dt)return null;let Ht=!!dt&&(kt||Dt||!$t);if(Ht){if(et.someProp("transformPastedText",Zt=>{dt=Zt(dt,Dt||kt,et)}),Dt)return Ut=new Slice(Fragment.from(et.state.schema.text(dt.replace(/\r\n?/g,`
`))),0,0),et.someProp("transformPasted",Zt=>{Ut=Zt(Ut,et,!0)}),Ut;let Jt=et.someProp("clipboardTextParser",Zt=>Zt(dt,Tt,kt,et));if(Jt)Ut=Jt;else{let Zt=Tt.marks(),{schema:er}=et.state,rr=DOMSerializer.fromSchema(er);Ft=document.createElement("div"),dt.split(/(?:\r\n?|\n)+/).forEach(sr=>{let nr=Ft.appendChild(document.createElement("p"));sr&&nr.appendChild(rr.serializeNode(er.text(sr,Zt)))})}}else et.someProp("transformPastedHTML",Jt=>{$t=Jt($t,et)}),Ft=readHTML($t),webkit&&restoreReplacedSpaces(Ft);let Kt=Ft&&Ft.querySelector("[data-pm-slice]"),Yt=Kt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(Kt.getAttribute("data-pm-slice")||"");if(Yt&&Yt[3])for(let Jt=+Yt[3];Jt>0;Jt--){let Zt=Ft.firstChild;for(;Zt&&Zt.nodeType!=1;)Zt=Zt.nextSibling;if(!Zt)break;Ft=Zt}if(Ut||(Ut=(et.someProp("clipboardParser")||et.someProp("domParser")||DOMParser.fromSchema(et.state.schema)).parseSlice(Ft,{preserveWhitespace:!!(Ht||Yt),context:Tt,ruleFromNode(Zt){return Zt.nodeName=="BR"&&!Zt.nextSibling&&Zt.parentNode&&!inlineParents.test(Zt.parentNode.nodeName)?{ignore:!0}:null}})),Yt)Ut=addContext(closeSlice(Ut,+Yt[1],+Yt[2]),Yt[4]);else if(Ut=Slice.maxOpen(normalizeSiblings(Ut.content,Tt),!0),Ut.openStart||Ut.openEnd){let Jt=0,Zt=0;for(let er=Ut.content.firstChild;Jt<Ut.openStart&&!er.type.spec.isolating;Jt++,er=er.firstChild);for(let er=Ut.content.lastChild;Zt<Ut.openEnd&&!er.type.spec.isolating;Zt++,er=er.lastChild);Ut=closeSlice(Ut,Jt,Zt)}return et.someProp("transformPasted",Jt=>{Ut=Jt(Ut,et,Ht)}),Ut}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(et,dt){if(et.childCount<2)return et;for(let $t=dt.depth;$t>=0;$t--){let Tt=dt.node($t).contentMatchAt(dt.index($t)),Dt,Ft=[];if(et.forEach(Ut=>{if(!Ft)return;let Ht=Tt.findWrapping(Ut.type),Kt;if(!Ht)return Ft=null;if(Kt=Ft.length&&Dt.length&&addToSibling(Ht,Dt,Ut,Ft[Ft.length-1],0))Ft[Ft.length-1]=Kt;else{Ft.length&&(Ft[Ft.length-1]=closeRight(Ft[Ft.length-1],Dt.length));let Yt=withWrappers(Ut,Ht);Ft.push(Yt),Tt=Tt.matchType(Yt.type),Dt=Ht}}),Ft)return Fragment.from(Ft)}return et}function withWrappers(et,dt,$t=0){for(let kt=dt.length-1;kt>=$t;kt--)et=dt[kt].create(null,Fragment.from(et));return et}function addToSibling(et,dt,$t,kt,Tt){if(Tt<et.length&&Tt<dt.length&&et[Tt]==dt[Tt]){let Dt=addToSibling(et,dt,$t,kt.lastChild,Tt+1);if(Dt)return kt.copy(kt.content.replaceChild(kt.childCount-1,Dt));if(kt.contentMatchAt(kt.childCount).matchType(Tt==et.length-1?$t.type:et[Tt+1]))return kt.copy(kt.content.append(Fragment.from(withWrappers($t,et,Tt+1))))}}function closeRight(et,dt){if(dt==0)return et;let $t=et.content.replaceChild(et.childCount-1,closeRight(et.lastChild,dt-1)),kt=et.contentMatchAt(et.childCount).fillBefore(Fragment.empty,!0);return et.copy($t.append(kt))}function closeRange(et,dt,$t,kt,Tt,Dt){let Ft=dt<0?et.firstChild:et.lastChild,Ut=Ft.content;return et.childCount>1&&(Dt=0),Tt<kt-1&&(Ut=closeRange(Ut,dt,$t,kt,Tt+1,Dt)),Tt>=$t&&(Ut=dt<0?Ft.contentMatchAt(0).fillBefore(Ut,Dt<=Tt).append(Ut):Ut.append(Ft.contentMatchAt(Ft.childCount).fillBefore(Fragment.empty,!0))),et.replaceChild(dt<0?0:et.childCount-1,Ft.copy(Ut))}function closeSlice(et,dt,$t){return dt<et.openStart&&(et=new Slice(closeRange(et.content,-1,dt,et.openStart,0,et.openEnd),dt,et.openEnd)),$t<et.openEnd&&(et=new Slice(closeRange(et.content,1,$t,et.openEnd,0,0),et.openStart,$t)),et}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(et){let dt=window.trustedTypes;return dt?(_policy||(_policy=dt.defaultPolicy||dt.createPolicy("ProseMirrorClipboard",{createHTML:$t=>$t})),_policy.createHTML(et)):et}function readHTML(et){let dt=/^(\s*<meta [^>]*>)*/.exec(et);dt&&(et=et.slice(dt[0].length));let $t=detachedDoc().createElement("div"),kt=/<([a-z][^>\s]+)/i.exec(et),Tt;if((Tt=kt&&wrapMap[kt[1].toLowerCase()])&&(et=Tt.map(Dt=>"<"+Dt+">").join("")+et+Tt.map(Dt=>"</"+Dt+">").reverse().join("")),$t.innerHTML=maybeWrapTrusted(et),Tt)for(let Dt=0;Dt<Tt.length;Dt++)$t=$t.querySelector(Tt[Dt])||$t;return $t}function restoreReplacedSpaces(et){let dt=et.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let $t=0;$t<dt.length;$t++){let kt=dt[$t];kt.childNodes.length==1&&kt.textContent==""&&kt.parentNode&&kt.parentNode.replaceChild(et.ownerDocument.createTextNode(" "),kt)}}function addContext(et,dt){if(!et.size)return et;let $t=et.content.firstChild.type.schema,kt;try{kt=JSON.parse(dt)}catch{return et}let{content:Tt,openStart:Dt,openEnd:Ft}=et;for(let Ut=kt.length-2;Ut>=0;Ut-=2){let Ht=$t.nodes[kt[Ut]];if(!Ht||Ht.hasRequiredAttrs())break;Tt=Fragment.from(Ht.create(kt[Ut+1],Tt)),Dt++,Ft++}return new Slice(Tt,Dt,Ft)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(et){for(let dt in handlers){let $t=handlers[dt];et.dom.addEventListener(dt,et.input.eventHandlers[dt]=kt=>{eventBelongsToView(et,kt)&&!runCustomHandler(et,kt)&&(et.editable||!(kt.type in editHandlers))&&$t(et,kt)},passiveHandlers[dt]?{passive:!0}:void 0)}safari&&et.dom.addEventListener("input",()=>null),ensureListeners(et)}function setSelectionOrigin(et,dt){et.input.lastSelectionOrigin=dt,et.input.lastSelectionTime=Date.now()}function destroyInput(et){et.domObserver.stop();for(let dt in et.input.eventHandlers)et.dom.removeEventListener(dt,et.input.eventHandlers[dt]);clearTimeout(et.input.composingTimeout),clearTimeout(et.input.lastIOSEnterFallbackTimeout)}function ensureListeners(et){et.someProp("handleDOMEvents",dt=>{for(let $t in dt)et.input.eventHandlers[$t]||et.dom.addEventListener($t,et.input.eventHandlers[$t]=kt=>runCustomHandler(et,kt))})}function runCustomHandler(et,dt){return et.someProp("handleDOMEvents",$t=>{let kt=$t[dt.type];return kt?kt(et,dt)||dt.defaultPrevented:!1})}function eventBelongsToView(et,dt){if(!dt.bubbles)return!0;if(dt.defaultPrevented)return!1;for(let $t=dt.target;$t!=et.dom;$t=$t.parentNode)if(!$t||$t.nodeType==11||$t.pmViewDesc&&$t.pmViewDesc.stopEvent(dt))return!1;return!0}function dispatchEvent(et,dt){!runCustomHandler(et,dt)&&handlers[dt.type]&&(et.editable||!(dt.type in editHandlers))&&handlers[dt.type](et,dt)}editHandlers.keydown=(et,dt)=>{let $t=dt;if(et.input.shiftKey=$t.keyCode==16||$t.shiftKey,!inOrNearComposition(et,$t)&&(et.input.lastKeyCode=$t.keyCode,et.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&$t.keyCode==13)))if($t.keyCode!=229&&et.domObserver.forceFlush(),ios&&$t.keyCode==13&&!$t.ctrlKey&&!$t.altKey&&!$t.metaKey){let kt=Date.now();et.input.lastIOSEnter=kt,et.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{et.input.lastIOSEnter==kt&&(et.someProp("handleKeyDown",Tt=>Tt(et,keyEvent(13,"Enter"))),et.input.lastIOSEnter=0)},200)}else et.someProp("handleKeyDown",kt=>kt(et,$t))||captureKeyDown(et,$t)?$t.preventDefault():setSelectionOrigin(et,"key")};editHandlers.keyup=(et,dt)=>{dt.keyCode==16&&(et.input.shiftKey=!1)};editHandlers.keypress=(et,dt)=>{let $t=dt;if(inOrNearComposition(et,$t)||!$t.charCode||$t.ctrlKey&&!$t.altKey||mac$2&&$t.metaKey)return;if(et.someProp("handleKeyPress",Tt=>Tt(et,$t))){$t.preventDefault();return}let kt=et.state.selection;if(!(kt instanceof TextSelection)||!kt.$from.sameParent(kt.$to)){let Tt=String.fromCharCode($t.charCode),Dt=()=>et.state.tr.insertText(Tt).scrollIntoView();!/[\r\n]/.test(Tt)&&!et.someProp("handleTextInput",Ft=>Ft(et,kt.$from.pos,kt.$to.pos,Tt,Dt))&&et.dispatch(Dt()),$t.preventDefault()}};function eventCoords(et){return{left:et.clientX,top:et.clientY}}function isNear(et,dt){let $t=dt.x-et.clientX,kt=dt.y-et.clientY;return $t*$t+kt*kt<100}function runHandlerOnContext(et,dt,$t,kt,Tt){if(kt==-1)return!1;let Dt=et.state.doc.resolve(kt);for(let Ft=Dt.depth+1;Ft>0;Ft--)if(et.someProp(dt,Ut=>Ft>Dt.depth?Ut(et,$t,Dt.nodeAfter,Dt.before(Ft),Tt,!0):Ut(et,$t,Dt.node(Ft),Dt.before(Ft),Tt,!1)))return!0;return!1}function updateSelection(et,dt,$t){if(et.focused||et.focus(),et.state.selection.eq(dt))return;let kt=et.state.tr.setSelection(dt);$t=="pointer"&&kt.setMeta("pointer",!0),et.dispatch(kt)}function selectClickedLeaf(et,dt){if(dt==-1)return!1;let $t=et.state.doc.resolve(dt),kt=$t.nodeAfter;return kt&&kt.isAtom&&NodeSelection.isSelectable(kt)?(updateSelection(et,new NodeSelection($t),"pointer"),!0):!1}function selectClickedNode(et,dt){if(dt==-1)return!1;let $t=et.state.selection,kt,Tt;$t instanceof NodeSelection&&(kt=$t.node);let Dt=et.state.doc.resolve(dt);for(let Ft=Dt.depth+1;Ft>0;Ft--){let Ut=Ft>Dt.depth?Dt.nodeAfter:Dt.node(Ft);if(NodeSelection.isSelectable(Ut)){kt&&$t.$from.depth>0&&Ft>=$t.$from.depth&&Dt.before($t.$from.depth+1)==$t.$from.pos?Tt=Dt.before($t.$from.depth):Tt=Dt.before(Ft);break}}return Tt!=null?(updateSelection(et,NodeSelection.create(et.state.doc,Tt),"pointer"),!0):!1}function handleSingleClick(et,dt,$t,kt,Tt){return runHandlerOnContext(et,"handleClickOn",dt,$t,kt)||et.someProp("handleClick",Dt=>Dt(et,dt,kt))||(Tt?selectClickedNode(et,$t):selectClickedLeaf(et,$t))}function handleDoubleClick(et,dt,$t,kt){return runHandlerOnContext(et,"handleDoubleClickOn",dt,$t,kt)||et.someProp("handleDoubleClick",Tt=>Tt(et,dt,kt))}function handleTripleClick(et,dt,$t,kt){return runHandlerOnContext(et,"handleTripleClickOn",dt,$t,kt)||et.someProp("handleTripleClick",Tt=>Tt(et,dt,kt))||defaultTripleClick(et,$t,kt)}function defaultTripleClick(et,dt,$t){if($t.button!=0)return!1;let kt=et.state.doc;if(dt==-1)return kt.inlineContent?(updateSelection(et,TextSelection.create(kt,0,kt.content.size),"pointer"),!0):!1;let Tt=kt.resolve(dt);for(let Dt=Tt.depth+1;Dt>0;Dt--){let Ft=Dt>Tt.depth?Tt.nodeAfter:Tt.node(Dt),Ut=Tt.before(Dt);if(Ft.inlineContent)updateSelection(et,TextSelection.create(kt,Ut+1,Ut+1+Ft.content.size),"pointer");else if(NodeSelection.isSelectable(Ft))updateSelection(et,NodeSelection.create(kt,Ut),"pointer");else continue;return!0}}function forceDOMFlush(et){return endComposition(et)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(et,dt)=>{let $t=dt;et.input.shiftKey=$t.shiftKey;let kt=forceDOMFlush(et),Tt=Date.now(),Dt="singleClick";Tt-et.input.lastClick.time<500&&isNear($t,et.input.lastClick)&&!$t[selectNodeModifier]&&et.input.lastClick.button==$t.button&&(et.input.lastClick.type=="singleClick"?Dt="doubleClick":et.input.lastClick.type=="doubleClick"&&(Dt="tripleClick")),et.input.lastClick={time:Tt,x:$t.clientX,y:$t.clientY,type:Dt,button:$t.button};let Ft=et.posAtCoords(eventCoords($t));Ft&&(Dt=="singleClick"?(et.input.mouseDown&&et.input.mouseDown.done(),et.input.mouseDown=new MouseDown(et,Ft,$t,!!kt)):(Dt=="doubleClick"?handleDoubleClick:handleTripleClick)(et,Ft.pos,Ft.inside,$t)?$t.preventDefault():setSelectionOrigin(et,"pointer"))};class MouseDown{constructor(dt,$t,kt,Tt){this.view=dt,this.pos=$t,this.event=kt,this.flushed=Tt,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=dt.state.doc,this.selectNode=!!kt[selectNodeModifier],this.allowDefault=kt.shiftKey;let Dt,Ft;if($t.inside>-1)Dt=dt.state.doc.nodeAt($t.inside),Ft=$t.inside;else{let Yt=dt.state.doc.resolve($t.pos);Dt=Yt.parent,Ft=Yt.depth?Yt.before():0}const Ut=Tt?null:kt.target,Ht=Ut?dt.docView.nearestDesc(Ut,!0):null;this.target=Ht&&Ht.nodeDOM.nodeType==1?Ht.nodeDOM:null;let{selection:Kt}=dt.state;(kt.button==0&&Dt.type.spec.draggable&&Dt.type.spec.selectable!==!1||Kt instanceof NodeSelection&&Kt.from<=Ft&&Kt.to>Ft)&&(this.mightDrag={node:Dt,pos:Ft,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),dt.root.addEventListener("mouseup",this.up=this.up.bind(this)),dt.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(dt,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(dt){if(this.done(),!this.view.dom.contains(dt.target))return;let $t=this.pos;this.view.state.doc!=this.startDoc&&($t=this.view.posAtCoords(eventCoords(dt))),this.updateAllowDefault(dt),this.allowDefault||!$t?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,$t.pos,$t.inside,dt,this.selectNode)?dt.preventDefault():dt.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs($t.pos-this.view.state.selection.from),Math.abs($t.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve($t.pos)),"pointer"),dt.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(dt){this.updateAllowDefault(dt),setSelectionOrigin(this.view,"pointer"),dt.buttons==0&&this.done()}updateAllowDefault(dt){!this.allowDefault&&(Math.abs(this.event.x-dt.clientX)>4||Math.abs(this.event.y-dt.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=et=>{et.input.lastTouch=Date.now(),forceDOMFlush(et),setSelectionOrigin(et,"pointer")};handlers.touchmove=et=>{et.input.lastTouch=Date.now(),setSelectionOrigin(et,"pointer")};handlers.contextmenu=et=>forceDOMFlush(et);function inOrNearComposition(et,dt){return et.composing?!0:safari&&Math.abs(dt.timeStamp-et.input.compositionEndedAt)<500?(et.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=et=>{if(!et.composing){et.domObserver.flush();let{state:dt}=et,$t=dt.selection.$to;if(dt.selection instanceof TextSelection&&(dt.storedMarks||!$t.textOffset&&$t.parentOffset&&$t.nodeBefore.marks.some(kt=>kt.type.spec.inclusive===!1)))et.markCursor=et.state.storedMarks||$t.marks(),endComposition(et,!0),et.markCursor=null;else if(endComposition(et,!dt.selection.empty),gecko&&dt.selection.empty&&$t.parentOffset&&!$t.textOffset&&$t.nodeBefore.marks.length){let kt=et.domSelectionRange();for(let Tt=kt.focusNode,Dt=kt.focusOffset;Tt&&Tt.nodeType==1&&Dt!=0;){let Ft=Dt<0?Tt.lastChild:Tt.childNodes[Dt-1];if(!Ft)break;if(Ft.nodeType==3){let Ut=et.domSelection();Ut&&Ut.collapse(Ft,Ft.nodeValue.length);break}else Tt=Ft,Dt=-1}}et.input.composing=!0}scheduleComposeEnd(et,timeoutComposition)};editHandlers.compositionend=(et,dt)=>{et.composing&&(et.input.composing=!1,et.input.compositionEndedAt=dt.timeStamp,et.input.compositionPendingChanges=et.domObserver.pendingRecords().length?et.input.compositionID:0,et.input.compositionNode=null,et.input.compositionPendingChanges&&Promise.resolve().then(()=>et.domObserver.flush()),et.input.compositionID++,scheduleComposeEnd(et,20))};function scheduleComposeEnd(et,dt){clearTimeout(et.input.composingTimeout),dt>-1&&(et.input.composingTimeout=setTimeout(()=>endComposition(et),dt))}function clearComposition(et){for(et.composing&&(et.input.composing=!1,et.input.compositionEndedAt=timestampFromCustomEvent());et.input.compositionNodes.length>0;)et.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(et){let dt=et.domSelectionRange();if(!dt.focusNode)return null;let $t=textNodeBefore$1(dt.focusNode,dt.focusOffset),kt=textNodeAfter$1(dt.focusNode,dt.focusOffset);if($t&&kt&&$t!=kt){let Tt=kt.pmViewDesc,Dt=et.domObserver.lastChangedTextNode;if($t==Dt||kt==Dt)return Dt;if(!Tt||!Tt.isText(kt.nodeValue))return kt;if(et.input.compositionNode==kt){let Ft=$t.pmViewDesc;if(!(!Ft||!Ft.isText($t.nodeValue)))return kt}}return $t||kt}function timestampFromCustomEvent(){let et=document.createEvent("Event");return et.initEvent("event",!0,!0),et.timeStamp}function endComposition(et,dt=!1){if(!(android&&et.domObserver.flushingSoon>=0)){if(et.domObserver.forceFlush(),clearComposition(et),dt||et.docView&&et.docView.dirty){let $t=selectionFromDOM(et),kt=et.state.selection;return $t&&!$t.eq(kt)?et.dispatch(et.state.tr.setSelection($t)):(et.markCursor||dt)&&!kt.$from.node(kt.$from.sharedDepth(kt.to)).inlineContent?et.dispatch(et.state.tr.deleteSelection()):et.updateState(et.state),!0}return!1}}function captureCopy(et,dt){if(!et.dom.parentNode)return;let $t=et.dom.parentNode.appendChild(document.createElement("div"));$t.appendChild(dt),$t.style.cssText="position: fixed; left: -10000px; top: 10px";let kt=getSelection(),Tt=document.createRange();Tt.selectNodeContents(dt),et.dom.blur(),kt.removeAllRanges(),kt.addRange(Tt),setTimeout(()=>{$t.parentNode&&$t.parentNode.removeChild($t),et.focus()},50)}const brokenClipboardAPI=ie$2&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(et,dt)=>{let $t=dt,kt=et.state.selection,Tt=$t.type=="cut";if(kt.empty)return;let Dt=brokenClipboardAPI?null:$t.clipboardData,Ft=kt.content(),{dom:Ut,text:Ht}=serializeForClipboard(et,Ft);Dt?($t.preventDefault(),Dt.clearData(),Dt.setData("text/html",Ut.innerHTML),Dt.setData("text/plain",Ht)):captureCopy(et,Ut),Tt&&et.dispatch(et.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(et){return et.openStart==0&&et.openEnd==0&&et.content.childCount==1?et.content.firstChild:null}function capturePaste(et,dt){if(!et.dom.parentNode)return;let $t=et.input.shiftKey||et.state.selection.$from.parent.type.spec.code,kt=et.dom.parentNode.appendChild(document.createElement($t?"textarea":"div"));$t||(kt.contentEditable="true"),kt.style.cssText="position: fixed; left: -10000px; top: 10px",kt.focus();let Tt=et.input.shiftKey&&et.input.lastKeyCode!=45;setTimeout(()=>{et.focus(),kt.parentNode&&kt.parentNode.removeChild(kt),$t?doPaste(et,kt.value,null,Tt,dt):doPaste(et,kt.textContent,kt.innerHTML,Tt,dt)},50)}function doPaste(et,dt,$t,kt,Tt){let Dt=parseFromClipboard(et,dt,$t,kt,et.state.selection.$from);if(et.someProp("handlePaste",Ht=>Ht(et,Tt,Dt||Slice.empty)))return!0;if(!Dt)return!1;let Ft=sliceSingleNode(Dt),Ut=Ft?et.state.tr.replaceSelectionWith(Ft,kt):et.state.tr.replaceSelection(Dt);return et.dispatch(Ut.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(et){let dt=et.getData("text/plain")||et.getData("Text");if(dt)return dt;let $t=et.getData("text/uri-list");return $t?$t.replace(/\r?\n/g," "):""}editHandlers.paste=(et,dt)=>{let $t=dt;if(et.composing&&!android)return;let kt=brokenClipboardAPI?null:$t.clipboardData,Tt=et.input.shiftKey&&et.input.lastKeyCode!=45;kt&&doPaste(et,getText$1(kt),kt.getData("text/html"),Tt,$t)?$t.preventDefault():capturePaste(et,$t)};class Dragging{constructor(dt,$t,kt){this.slice=dt,this.move=$t,this.node=kt}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(et,dt){let $t=et.someProp("dragCopies",kt=>!kt(dt));return $t??!dt[dragCopyModifier]}handlers.dragstart=(et,dt)=>{let $t=dt,kt=et.input.mouseDown;if(kt&&kt.done(),!$t.dataTransfer)return;let Tt=et.state.selection,Dt=Tt.empty?null:et.posAtCoords(eventCoords($t)),Ft;if(!(Dt&&Dt.pos>=Tt.from&&Dt.pos<=(Tt instanceof NodeSelection?Tt.to-1:Tt.to))){if(kt&&kt.mightDrag)Ft=NodeSelection.create(et.state.doc,kt.mightDrag.pos);else if($t.target&&$t.target.nodeType==1){let Jt=et.docView.nearestDesc($t.target,!0);Jt&&Jt.node.type.spec.draggable&&Jt!=et.docView&&(Ft=NodeSelection.create(et.state.doc,Jt.posBefore))}}let Ut=(Ft||et.state.selection).content(),{dom:Ht,text:Kt,slice:Yt}=serializeForClipboard(et,Ut);(!$t.dataTransfer.files.length||!chrome||chrome_version>120)&&$t.dataTransfer.clearData(),$t.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",Ht.innerHTML),$t.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||$t.dataTransfer.setData("text/plain",Kt),et.dragging=new Dragging(Yt,dragMoves(et,$t),Ft)};handlers.dragend=et=>{let dt=et.dragging;window.setTimeout(()=>{et.dragging==dt&&(et.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(et,dt)=>dt.preventDefault();editHandlers.drop=(et,dt)=>{let $t=dt,kt=et.dragging;if(et.dragging=null,!$t.dataTransfer)return;let Tt=et.posAtCoords(eventCoords($t));if(!Tt)return;let Dt=et.state.doc.resolve(Tt.pos),Ft=kt&&kt.slice;Ft?et.someProp("transformPasted",rr=>{Ft=rr(Ft,et,!1)}):Ft=parseFromClipboard(et,getText$1($t.dataTransfer),brokenClipboardAPI?null:$t.dataTransfer.getData("text/html"),!1,Dt);let Ut=!!(kt&&dragMoves(et,$t));if(et.someProp("handleDrop",rr=>rr(et,$t,Ft||Slice.empty,Ut))){$t.preventDefault();return}if(!Ft)return;$t.preventDefault();let Ht=Ft?dropPoint(et.state.doc,Dt.pos,Ft):Dt.pos;Ht==null&&(Ht=Dt.pos);let Kt=et.state.tr;if(Ut){let{node:rr}=kt;rr?rr.replace(Kt):Kt.deleteSelection()}let Yt=Kt.mapping.map(Ht),Jt=Ft.openStart==0&&Ft.openEnd==0&&Ft.content.childCount==1,Zt=Kt.doc;if(Jt?Kt.replaceRangeWith(Yt,Yt,Ft.content.firstChild):Kt.replaceRange(Yt,Yt,Ft),Kt.doc.eq(Zt))return;let er=Kt.doc.resolve(Yt);if(Jt&&NodeSelection.isSelectable(Ft.content.firstChild)&&er.nodeAfter&&er.nodeAfter.sameMarkup(Ft.content.firstChild))Kt.setSelection(new NodeSelection(er));else{let rr=Kt.mapping.map(Ht);Kt.mapping.maps[Kt.mapping.maps.length-1].forEach((sr,nr,ir,or)=>rr=or),Kt.setSelection(selectionBetween(et,er,Kt.doc.resolve(rr)))}et.focus(),et.dispatch(Kt.setMeta("uiEvent","drop"))};handlers.focus=et=>{et.input.lastFocus=Date.now(),et.focused||(et.domObserver.stop(),et.dom.classList.add("ProseMirror-focused"),et.domObserver.start(),et.focused=!0,setTimeout(()=>{et.docView&&et.hasFocus()&&!et.domObserver.currentSelection.eq(et.domSelectionRange())&&selectionToDOM(et)},20))};handlers.blur=(et,dt)=>{let $t=dt;et.focused&&(et.domObserver.stop(),et.dom.classList.remove("ProseMirror-focused"),et.domObserver.start(),$t.relatedTarget&&et.dom.contains($t.relatedTarget)&&et.domObserver.currentSelection.clear(),et.focused=!1)};handlers.beforeinput=(et,dt)=>{if(chrome&&android&&dt.inputType=="deleteContentBackward"){et.domObserver.flushSoon();let{domChangeCount:kt}=et.input;setTimeout(()=>{if(et.input.domChangeCount!=kt||(et.dom.blur(),et.focus(),et.someProp("handleKeyDown",Dt=>Dt(et,keyEvent(8,"Backspace")))))return;let{$cursor:Tt}=et.state.selection;Tt&&Tt.pos>0&&et.dispatch(et.state.tr.delete(Tt.pos-1,Tt.pos).scrollIntoView())},50)}};for(let et in editHandlers)handlers[et]=editHandlers[et];function compareObjs(et,dt){if(et==dt)return!0;for(let $t in et)if(et[$t]!==dt[$t])return!1;for(let $t in dt)if(!($t in et))return!1;return!0}class WidgetType{constructor(dt,$t){this.toDOM=dt,this.spec=$t||noSpec,this.side=this.spec.side||0}map(dt,$t,kt,Tt){let{pos:Dt,deleted:Ft}=dt.mapResult($t.from+Tt,this.side<0?-1:1);return Ft?null:new Decoration(Dt-kt,Dt-kt,this)}valid(){return!0}eq(dt){return this==dt||dt instanceof WidgetType&&(this.spec.key&&this.spec.key==dt.spec.key||this.toDOM==dt.toDOM&&compareObjs(this.spec,dt.spec))}destroy(dt){this.spec.destroy&&this.spec.destroy(dt)}}class InlineType{constructor(dt,$t){this.attrs=dt,this.spec=$t||noSpec}map(dt,$t,kt,Tt){let Dt=dt.map($t.from+Tt,this.spec.inclusiveStart?-1:1)-kt,Ft=dt.map($t.to+Tt,this.spec.inclusiveEnd?1:-1)-kt;return Dt>=Ft?null:new Decoration(Dt,Ft,this)}valid(dt,$t){return $t.from<$t.to}eq(dt){return this==dt||dt instanceof InlineType&&compareObjs(this.attrs,dt.attrs)&&compareObjs(this.spec,dt.spec)}static is(dt){return dt.type instanceof InlineType}destroy(){}}class NodeType{constructor(dt,$t){this.attrs=dt,this.spec=$t||noSpec}map(dt,$t,kt,Tt){let Dt=dt.mapResult($t.from+Tt,1);if(Dt.deleted)return null;let Ft=dt.mapResult($t.to+Tt,-1);return Ft.deleted||Ft.pos<=Dt.pos?null:new Decoration(Dt.pos-kt,Ft.pos-kt,this)}valid(dt,$t){let{index:kt,offset:Tt}=dt.content.findIndex($t.from),Dt;return Tt==$t.from&&!(Dt=dt.child(kt)).isText&&Tt+Dt.nodeSize==$t.to}eq(dt){return this==dt||dt instanceof NodeType&&compareObjs(this.attrs,dt.attrs)&&compareObjs(this.spec,dt.spec)}destroy(){}}class Decoration{constructor(dt,$t,kt){this.from=dt,this.to=$t,this.type=kt}copy(dt,$t){return new Decoration(dt,$t,this.type)}eq(dt,$t=0){return this.type.eq(dt.type)&&this.from+$t==dt.from&&this.to+$t==dt.to}map(dt,$t,kt){return this.type.map(dt,this,$t,kt)}static widget(dt,$t,kt){return new Decoration(dt,dt,new WidgetType($t,kt))}static inline(dt,$t,kt,Tt){return new Decoration(dt,$t,new InlineType(kt,Tt))}static node(dt,$t,kt,Tt){return new Decoration(dt,$t,new NodeType(kt,Tt))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(dt,$t){this.local=dt.length?dt:none,this.children=$t.length?$t:none}static create(dt,$t){return $t.length?buildTree($t,dt,0,noSpec):empty}find(dt,$t,kt){let Tt=[];return this.findInner(dt??0,$t??1e9,Tt,0,kt),Tt}findInner(dt,$t,kt,Tt,Dt){for(let Ft=0;Ft<this.local.length;Ft++){let Ut=this.local[Ft];Ut.from<=$t&&Ut.to>=dt&&(!Dt||Dt(Ut.spec))&&kt.push(Ut.copy(Ut.from+Tt,Ut.to+Tt))}for(let Ft=0;Ft<this.children.length;Ft+=3)if(this.children[Ft]<$t&&this.children[Ft+1]>dt){let Ut=this.children[Ft]+1;this.children[Ft+2].findInner(dt-Ut,$t-Ut,kt,Tt+Ut,Dt)}}map(dt,$t,kt){return this==empty||dt.maps.length==0?this:this.mapInner(dt,$t,0,0,kt||noSpec)}mapInner(dt,$t,kt,Tt,Dt){let Ft;for(let Ut=0;Ut<this.local.length;Ut++){let Ht=this.local[Ut].map(dt,kt,Tt);Ht&&Ht.type.valid($t,Ht)?(Ft||(Ft=[])).push(Ht):Dt.onRemove&&Dt.onRemove(this.local[Ut].spec)}return this.children.length?mapChildren(this.children,Ft||[],dt,$t,kt,Tt,Dt):Ft?new DecorationSet(Ft.sort(byPos),none):empty}add(dt,$t){return $t.length?this==empty?DecorationSet.create(dt,$t):this.addInner(dt,$t,0):this}addInner(dt,$t,kt){let Tt,Dt=0;dt.forEach((Ut,Ht)=>{let Kt=Ht+kt,Yt;if(Yt=takeSpansForNode($t,Ut,Kt)){for(Tt||(Tt=this.children.slice());Dt<Tt.length&&Tt[Dt]<Ht;)Dt+=3;Tt[Dt]==Ht?Tt[Dt+2]=Tt[Dt+2].addInner(Ut,Yt,Kt+1):Tt.splice(Dt,0,Ht,Ht+Ut.nodeSize,buildTree(Yt,Ut,Kt+1,noSpec)),Dt+=3}});let Ft=moveSpans(Dt?withoutNulls($t):$t,-kt);for(let Ut=0;Ut<Ft.length;Ut++)Ft[Ut].type.valid(dt,Ft[Ut])||Ft.splice(Ut--,1);return new DecorationSet(Ft.length?this.local.concat(Ft).sort(byPos):this.local,Tt||this.children)}remove(dt){return dt.length==0||this==empty?this:this.removeInner(dt,0)}removeInner(dt,$t){let kt=this.children,Tt=this.local;for(let Dt=0;Dt<kt.length;Dt+=3){let Ft,Ut=kt[Dt]+$t,Ht=kt[Dt+1]+$t;for(let Yt=0,Jt;Yt<dt.length;Yt++)(Jt=dt[Yt])&&Jt.from>Ut&&Jt.to<Ht&&(dt[Yt]=null,(Ft||(Ft=[])).push(Jt));if(!Ft)continue;kt==this.children&&(kt=this.children.slice());let Kt=kt[Dt+2].removeInner(Ft,Ut+1);Kt!=empty?kt[Dt+2]=Kt:(kt.splice(Dt,3),Dt-=3)}if(Tt.length){for(let Dt=0,Ft;Dt<dt.length;Dt++)if(Ft=dt[Dt])for(let Ut=0;Ut<Tt.length;Ut++)Tt[Ut].eq(Ft,$t)&&(Tt==this.local&&(Tt=this.local.slice()),Tt.splice(Ut--,1))}return kt==this.children&&Tt==this.local?this:Tt.length||kt.length?new DecorationSet(Tt,kt):empty}forChild(dt,$t){if(this==empty)return this;if($t.isLeaf)return DecorationSet.empty;let kt,Tt;for(let Ut=0;Ut<this.children.length;Ut+=3)if(this.children[Ut]>=dt){this.children[Ut]==dt&&(kt=this.children[Ut+2]);break}let Dt=dt+1,Ft=Dt+$t.content.size;for(let Ut=0;Ut<this.local.length;Ut++){let Ht=this.local[Ut];if(Ht.from<Ft&&Ht.to>Dt&&Ht.type instanceof InlineType){let Kt=Math.max(Dt,Ht.from)-Dt,Yt=Math.min(Ft,Ht.to)-Dt;Kt<Yt&&(Tt||(Tt=[])).push(Ht.copy(Kt,Yt))}}if(Tt){let Ut=new DecorationSet(Tt.sort(byPos),none);return kt?new DecorationGroup([Ut,kt]):Ut}return kt||empty}eq(dt){if(this==dt)return!0;if(!(dt instanceof DecorationSet)||this.local.length!=dt.local.length||this.children.length!=dt.children.length)return!1;for(let $t=0;$t<this.local.length;$t++)if(!this.local[$t].eq(dt.local[$t]))return!1;for(let $t=0;$t<this.children.length;$t+=3)if(this.children[$t]!=dt.children[$t]||this.children[$t+1]!=dt.children[$t+1]||!this.children[$t+2].eq(dt.children[$t+2]))return!1;return!0}locals(dt){return removeOverlap(this.localsInner(dt))}localsInner(dt){if(this==empty)return none;if(dt.inlineContent||!this.local.some(InlineType.is))return this.local;let $t=[];for(let kt=0;kt<this.local.length;kt++)this.local[kt].type instanceof InlineType||$t.push(this.local[kt]);return $t}forEachSet(dt){dt(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(dt){this.members=dt}map(dt,$t){const kt=this.members.map(Tt=>Tt.map(dt,$t,noSpec));return DecorationGroup.from(kt)}forChild(dt,$t){if($t.isLeaf)return DecorationSet.empty;let kt=[];for(let Tt=0;Tt<this.members.length;Tt++){let Dt=this.members[Tt].forChild(dt,$t);Dt!=empty&&(Dt instanceof DecorationGroup?kt=kt.concat(Dt.members):kt.push(Dt))}return DecorationGroup.from(kt)}eq(dt){if(!(dt instanceof DecorationGroup)||dt.members.length!=this.members.length)return!1;for(let $t=0;$t<this.members.length;$t++)if(!this.members[$t].eq(dt.members[$t]))return!1;return!0}locals(dt){let $t,kt=!0;for(let Tt=0;Tt<this.members.length;Tt++){let Dt=this.members[Tt].localsInner(dt);if(Dt.length)if(!$t)$t=Dt;else{kt&&($t=$t.slice(),kt=!1);for(let Ft=0;Ft<Dt.length;Ft++)$t.push(Dt[Ft])}}return $t?removeOverlap(kt?$t:$t.sort(byPos)):none}static from(dt){switch(dt.length){case 0:return empty;case 1:return dt[0];default:return new DecorationGroup(dt.every($t=>$t instanceof DecorationSet)?dt:dt.reduce(($t,kt)=>$t.concat(kt instanceof DecorationSet?kt:kt.members),[]))}}forEachSet(dt){for(let $t=0;$t<this.members.length;$t++)this.members[$t].forEachSet(dt)}}function mapChildren(et,dt,$t,kt,Tt,Dt,Ft){let Ut=et.slice();for(let Kt=0,Yt=Dt;Kt<$t.maps.length;Kt++){let Jt=0;$t.maps[Kt].forEach((Zt,er,rr,sr)=>{let nr=sr-rr-(er-Zt);for(let ir=0;ir<Ut.length;ir+=3){let or=Ut[ir+1];if(or<0||Zt>or+Yt-Jt)continue;let lr=Ut[ir]+Yt-Jt;er>=lr?Ut[ir+1]=Zt<=lr?-2:-1:Zt>=Yt&&nr&&(Ut[ir]+=nr,Ut[ir+1]+=nr)}Jt+=nr}),Yt=$t.maps[Kt].map(Yt,-1)}let Ht=!1;for(let Kt=0;Kt<Ut.length;Kt+=3)if(Ut[Kt+1]<0){if(Ut[Kt+1]==-2){Ht=!0,Ut[Kt+1]=-1;continue}let Yt=$t.map(et[Kt]+Dt),Jt=Yt-Tt;if(Jt<0||Jt>=kt.content.size){Ht=!0;continue}let Zt=$t.map(et[Kt+1]+Dt,-1),er=Zt-Tt,{index:rr,offset:sr}=kt.content.findIndex(Jt),nr=kt.maybeChild(rr);if(nr&&sr==Jt&&sr+nr.nodeSize==er){let ir=Ut[Kt+2].mapInner($t,nr,Yt+1,et[Kt]+Dt+1,Ft);ir!=empty?(Ut[Kt]=Jt,Ut[Kt+1]=er,Ut[Kt+2]=ir):(Ut[Kt+1]=-2,Ht=!0)}else Ht=!0}if(Ht){let Kt=mapAndGatherRemainingDecorations(Ut,et,dt,$t,Tt,Dt,Ft),Yt=buildTree(Kt,kt,0,Ft);dt=Yt.local;for(let Jt=0;Jt<Ut.length;Jt+=3)Ut[Jt+1]<0&&(Ut.splice(Jt,3),Jt-=3);for(let Jt=0,Zt=0;Jt<Yt.children.length;Jt+=3){let er=Yt.children[Jt];for(;Zt<Ut.length&&Ut[Zt]<er;)Zt+=3;Ut.splice(Zt,0,Yt.children[Jt],Yt.children[Jt+1],Yt.children[Jt+2])}}return new DecorationSet(dt.sort(byPos),Ut)}function moveSpans(et,dt){if(!dt||!et.length)return et;let $t=[];for(let kt=0;kt<et.length;kt++){let Tt=et[kt];$t.push(new Decoration(Tt.from+dt,Tt.to+dt,Tt.type))}return $t}function mapAndGatherRemainingDecorations(et,dt,$t,kt,Tt,Dt,Ft){function Ut(Ht,Kt){for(let Yt=0;Yt<Ht.local.length;Yt++){let Jt=Ht.local[Yt].map(kt,Tt,Kt);Jt?$t.push(Jt):Ft.onRemove&&Ft.onRemove(Ht.local[Yt].spec)}for(let Yt=0;Yt<Ht.children.length;Yt+=3)Ut(Ht.children[Yt+2],Ht.children[Yt]+Kt+1)}for(let Ht=0;Ht<et.length;Ht+=3)et[Ht+1]==-1&&Ut(et[Ht+2],dt[Ht]+Dt+1);return $t}function takeSpansForNode(et,dt,$t){if(dt.isLeaf)return null;let kt=$t+dt.nodeSize,Tt=null;for(let Dt=0,Ft;Dt<et.length;Dt++)(Ft=et[Dt])&&Ft.from>$t&&Ft.to<kt&&((Tt||(Tt=[])).push(Ft),et[Dt]=null);return Tt}function withoutNulls(et){let dt=[];for(let $t=0;$t<et.length;$t++)et[$t]!=null&&dt.push(et[$t]);return dt}function buildTree(et,dt,$t,kt){let Tt=[],Dt=!1;dt.forEach((Ut,Ht)=>{let Kt=takeSpansForNode(et,Ut,Ht+$t);if(Kt){Dt=!0;let Yt=buildTree(Kt,Ut,$t+Ht+1,kt);Yt!=empty&&Tt.push(Ht,Ht+Ut.nodeSize,Yt)}});let Ft=moveSpans(Dt?withoutNulls(et):et,-$t).sort(byPos);for(let Ut=0;Ut<Ft.length;Ut++)Ft[Ut].type.valid(dt,Ft[Ut])||(kt.onRemove&&kt.onRemove(Ft[Ut].spec),Ft.splice(Ut--,1));return Ft.length||Tt.length?new DecorationSet(Ft,Tt):empty}function byPos(et,dt){return et.from-dt.from||et.to-dt.to}function removeOverlap(et){let dt=et;for(let $t=0;$t<dt.length-1;$t++){let kt=dt[$t];if(kt.from!=kt.to)for(let Tt=$t+1;Tt<dt.length;Tt++){let Dt=dt[Tt];if(Dt.from==kt.from){Dt.to!=kt.to&&(dt==et&&(dt=et.slice()),dt[Tt]=Dt.copy(Dt.from,kt.to),insertAhead(dt,Tt+1,Dt.copy(kt.to,Dt.to)));continue}else{Dt.from<kt.to&&(dt==et&&(dt=et.slice()),dt[$t]=kt.copy(kt.from,Dt.from),insertAhead(dt,Tt,kt.copy(Dt.from,kt.to)));break}}}return dt}function insertAhead(et,dt,$t){for(;dt<et.length&&byPos($t,et[dt])>0;)dt++;et.splice(dt,0,$t)}function viewDecorations(et){let dt=[];return et.someProp("decorations",$t=>{let kt=$t(et.state);kt&&kt!=empty&&dt.push(kt)}),et.cursorWrapper&&dt.push(DecorationSet.create(et.state.doc,[et.cursorWrapper.deco])),DecorationGroup.from(dt)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$2&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(dt){this.anchorNode=dt.anchorNode,this.anchorOffset=dt.anchorOffset,this.focusNode=dt.focusNode,this.focusOffset=dt.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(dt){return dt.anchorNode==this.anchorNode&&dt.anchorOffset==this.anchorOffset&&dt.focusNode==this.focusNode&&dt.focusOffset==this.focusOffset}}class DOMObserver{constructor(dt,$t){this.view=dt,this.handleDOMChange=$t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(kt=>{for(let Tt=0;Tt<kt.length;Tt++)this.queue.push(kt[Tt]);ie$2&&ie_version<=11&&kt.some(Tt=>Tt.type=="childList"&&Tt.removedNodes.length||Tt.type=="characterData"&&Tt.oldValue.length>Tt.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=kt=>{this.queue.push({target:kt.target,type:"characterData",oldValue:kt.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let dt=this.observer.takeRecords();if(dt.length){for(let $t=0;$t<dt.length;$t++)this.queue.push(dt[$t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$2&&ie_version<=11&&!this.view.state.selection.empty){let dt=this.view.domSelectionRange();if(dt.focusNode&&isEquivalentPosition(dt.focusNode,dt.focusOffset,dt.anchorNode,dt.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(dt){if(!dt.focusNode)return!0;let $t=new Set,kt;for(let Dt=dt.focusNode;Dt;Dt=parentNode(Dt))$t.add(Dt);for(let Dt=dt.anchorNode;Dt;Dt=parentNode(Dt))if($t.has(Dt)){kt=Dt;break}let Tt=kt&&this.view.docView.nearestDesc(kt);if(Tt&&Tt.ignoreMutation({type:"selection",target:kt.nodeType==3?kt.parentNode:kt}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let dt of this.observer.takeRecords())this.queue.push(dt);return this.queue}flush(){let{view:dt}=this;if(!dt.docView||this.flushingSoon>-1)return;let $t=this.pendingRecords();$t.length&&(this.queue=[]);let kt=dt.domSelectionRange(),Tt=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(kt)&&hasFocusAndSelection(dt)&&!this.ignoreSelectionChange(kt),Dt=-1,Ft=-1,Ut=!1,Ht=[];if(dt.editable)for(let Yt=0;Yt<$t.length;Yt++){let Jt=this.registerMutation($t[Yt],Ht);Jt&&(Dt=Dt<0?Jt.from:Math.min(Jt.from,Dt),Ft=Ft<0?Jt.to:Math.max(Jt.to,Ft),Jt.typeOver&&(Ut=!0))}if(gecko&&Ht.length){let Yt=Ht.filter(Jt=>Jt.nodeName=="BR");if(Yt.length==2){let[Jt,Zt]=Yt;Jt.parentNode&&Jt.parentNode.parentNode==Zt.parentNode?Zt.remove():Jt.remove()}else{let{focusNode:Jt}=this.currentSelection;for(let Zt of Yt){let er=Zt.parentNode;er&&er.nodeName=="LI"&&(!Jt||blockParent(dt,Jt)!=er)&&Zt.remove()}}}let Kt=null;Dt<0&&Tt&&dt.input.lastFocus>Date.now()-200&&Math.max(dt.input.lastTouch,dt.input.lastClick.time)<Date.now()-300&&selectionCollapsed(kt)&&(Kt=selectionFromDOM(dt))&&Kt.eq(Selection.near(dt.state.doc.resolve(0),1))?(dt.input.lastFocus=0,selectionToDOM(dt),this.currentSelection.set(kt),dt.scrollToSelection()):(Dt>-1||Tt)&&(Dt>-1&&(dt.docView.markDirty(Dt,Ft),checkCSS(dt)),this.handleDOMChange(Dt,Ft,Ut,Ht),dt.docView&&dt.docView.dirty?dt.updateState(dt.state):this.currentSelection.eq(kt)||selectionToDOM(dt),this.currentSelection.set(kt))}registerMutation(dt,$t){if($t.indexOf(dt.target)>-1)return null;let kt=this.view.docView.nearestDesc(dt.target);if(dt.type=="attributes"&&(kt==this.view.docView||dt.attributeName=="contenteditable"||dt.attributeName=="style"&&!dt.oldValue&&!dt.target.getAttribute("style"))||!kt||kt.ignoreMutation(dt))return null;if(dt.type=="childList"){for(let Yt=0;Yt<dt.addedNodes.length;Yt++){let Jt=dt.addedNodes[Yt];$t.push(Jt),Jt.nodeType==3&&(this.lastChangedTextNode=Jt)}if(kt.contentDOM&&kt.contentDOM!=kt.dom&&!kt.contentDOM.contains(dt.target))return{from:kt.posBefore,to:kt.posAfter};let Tt=dt.previousSibling,Dt=dt.nextSibling;if(ie$2&&ie_version<=11&&dt.addedNodes.length)for(let Yt=0;Yt<dt.addedNodes.length;Yt++){let{previousSibling:Jt,nextSibling:Zt}=dt.addedNodes[Yt];(!Jt||Array.prototype.indexOf.call(dt.addedNodes,Jt)<0)&&(Tt=Jt),(!Zt||Array.prototype.indexOf.call(dt.addedNodes,Zt)<0)&&(Dt=Zt)}let Ft=Tt&&Tt.parentNode==dt.target?domIndex(Tt)+1:0,Ut=kt.localPosFromDOM(dt.target,Ft,-1),Ht=Dt&&Dt.parentNode==dt.target?domIndex(Dt):dt.target.childNodes.length,Kt=kt.localPosFromDOM(dt.target,Ht,1);return{from:Ut,to:Kt}}else return dt.type=="attributes"?{from:kt.posAtStart-kt.border,to:kt.posAtEnd+kt.border}:(this.lastChangedTextNode=dt.target,{from:kt.posAtStart,to:kt.posAtEnd,typeOver:dt.target.nodeValue==dt.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(et){if(!cssChecked.has(et)&&(cssChecked.set(et,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(et.dom).whiteSpace)!==-1)){if(et.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(et,dt){let $t=dt.startContainer,kt=dt.startOffset,Tt=dt.endContainer,Dt=dt.endOffset,Ft=et.domAtPos(et.state.selection.anchor);return isEquivalentPosition(Ft.node,Ft.offset,Tt,Dt)&&([$t,kt,Tt,Dt]=[Tt,Dt,$t,kt]),{anchorNode:$t,anchorOffset:kt,focusNode:Tt,focusOffset:Dt}}function safariShadowSelectionRange(et,dt){if(dt.getComposedRanges){let Tt=dt.getComposedRanges(et.root)[0];if(Tt)return rangeToSelectionRange(et,Tt)}let $t;function kt(Tt){Tt.preventDefault(),Tt.stopImmediatePropagation(),$t=Tt.getTargetRanges()[0]}return et.dom.addEventListener("beforeinput",kt,!0),document.execCommand("indent"),et.dom.removeEventListener("beforeinput",kt,!0),$t?rangeToSelectionRange(et,$t):null}function blockParent(et,dt){for(let $t=dt.parentNode;$t&&$t!=et.dom;$t=$t.parentNode){let kt=et.docView.nearestDesc($t,!0);if(kt&&kt.node.isBlock)return $t}return null}function parseBetween(et,dt,$t){let{node:kt,fromOffset:Tt,toOffset:Dt,from:Ft,to:Ut}=et.docView.parseRange(dt,$t),Ht=et.domSelectionRange(),Kt,Yt=Ht.anchorNode;if(Yt&&et.dom.contains(Yt.nodeType==1?Yt:Yt.parentNode)&&(Kt=[{node:Yt,offset:Ht.anchorOffset}],selectionCollapsed(Ht)||Kt.push({node:Ht.focusNode,offset:Ht.focusOffset})),chrome&&et.input.lastKeyCode===8)for(let nr=Dt;nr>Tt;nr--){let ir=kt.childNodes[nr-1],or=ir.pmViewDesc;if(ir.nodeName=="BR"&&!or){Dt=nr;break}if(!or||or.size)break}let Jt=et.state.doc,Zt=et.someProp("domParser")||DOMParser.fromSchema(et.state.schema),er=Jt.resolve(Ft),rr=null,sr=Zt.parse(kt,{topNode:er.parent,topMatch:er.parent.contentMatchAt(er.index()),topOpen:!0,from:Tt,to:Dt,preserveWhitespace:er.parent.type.whitespace=="pre"?"full":!0,findPositions:Kt,ruleFromNode,context:er});if(Kt&&Kt[0].pos!=null){let nr=Kt[0].pos,ir=Kt[1]&&Kt[1].pos;ir==null&&(ir=nr),rr={anchor:nr+Ft,head:ir+Ft}}return{doc:sr,sel:rr,from:Ft,to:Ut}}function ruleFromNode(et){let dt=et.pmViewDesc;if(dt)return dt.parseRule();if(et.nodeName=="BR"&&et.parentNode){if(safari&&/^(ul|ol)$/i.test(et.parentNode.nodeName)){let $t=document.createElement("div");return $t.appendChild(document.createElement("li")),{skip:$t}}else if(et.parentNode.lastChild==et||safari&&/^(tr|table)$/i.test(et.parentNode.nodeName))return{ignore:!0}}else if(et.nodeName=="IMG"&&et.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(et,dt,$t,kt,Tt){let Dt=et.input.compositionPendingChanges||(et.composing?et.input.compositionID:0);if(et.input.compositionPendingChanges=0,dt<0){let pr=et.input.lastSelectionTime>Date.now()-50?et.input.lastSelectionOrigin:null,mr=selectionFromDOM(et,pr);if(mr&&!et.state.selection.eq(mr)){if(chrome&&android&&et.input.lastKeyCode===13&&Date.now()-100<et.input.lastKeyCodeTime&&et.someProp("handleKeyDown",Rr=>Rr(et,keyEvent(13,"Enter"))))return;let jr=et.state.tr.setSelection(mr);pr=="pointer"?jr.setMeta("pointer",!0):pr=="key"&&jr.scrollIntoView(),Dt&&jr.setMeta("composition",Dt),et.dispatch(jr)}return}let Ft=et.state.doc.resolve(dt),Ut=Ft.sharedDepth($t);dt=Ft.before(Ut+1),$t=et.state.doc.resolve($t).after(Ut+1);let Ht=et.state.selection,Kt=parseBetween(et,dt,$t),Yt=et.state.doc,Jt=Yt.slice(Kt.from,Kt.to),Zt,er;et.input.lastKeyCode===8&&Date.now()-100<et.input.lastKeyCodeTime?(Zt=et.state.selection.to,er="end"):(Zt=et.state.selection.from,er="start"),et.input.lastKeyCode=null;let rr=findDiff(Jt.content,Kt.doc.content,Kt.from,Zt,er);if(rr&&et.input.domChangeCount++,(ios&&et.input.lastIOSEnter>Date.now()-225||android)&&Tt.some(pr=>pr.nodeType==1&&!isInline.test(pr.nodeName))&&(!rr||rr.endA>=rr.endB)&&et.someProp("handleKeyDown",pr=>pr(et,keyEvent(13,"Enter")))){et.input.lastIOSEnter=0;return}if(!rr)if(kt&&Ht instanceof TextSelection&&!Ht.empty&&Ht.$head.sameParent(Ht.$anchor)&&!et.composing&&!(Kt.sel&&Kt.sel.anchor!=Kt.sel.head))rr={start:Ht.from,endA:Ht.to,endB:Ht.to};else{if(Kt.sel){let pr=resolveSelection(et,et.state.doc,Kt.sel);if(pr&&!pr.eq(et.state.selection)){let mr=et.state.tr.setSelection(pr);Dt&&mr.setMeta("composition",Dt),et.dispatch(mr)}}return}et.state.selection.from<et.state.selection.to&&rr.start==rr.endB&&et.state.selection instanceof TextSelection&&(rr.start>et.state.selection.from&&rr.start<=et.state.selection.from+2&&et.state.selection.from>=Kt.from?rr.start=et.state.selection.from:rr.endA<et.state.selection.to&&rr.endA>=et.state.selection.to-2&&et.state.selection.to<=Kt.to&&(rr.endB+=et.state.selection.to-rr.endA,rr.endA=et.state.selection.to)),ie$2&&ie_version<=11&&rr.endB==rr.start+1&&rr.endA==rr.start&&rr.start>Kt.from&&Kt.doc.textBetween(rr.start-Kt.from-1,rr.start-Kt.from+1)==" "&&(rr.start--,rr.endA--,rr.endB--);let sr=Kt.doc.resolveNoCache(rr.start-Kt.from),nr=Kt.doc.resolveNoCache(rr.endB-Kt.from),ir=Yt.resolve(rr.start),or=sr.sameParent(nr)&&sr.parent.inlineContent&&ir.end()>=rr.endA;if((ios&&et.input.lastIOSEnter>Date.now()-225&&(!or||Tt.some(pr=>pr.nodeName=="DIV"||pr.nodeName=="P"))||!or&&sr.pos<Kt.doc.content.size&&(!sr.sameParent(nr)||!sr.parent.inlineContent)&&sr.pos<nr.pos&&!/\S/.test(Kt.doc.textBetween(sr.pos,nr.pos,"","")))&&et.someProp("handleKeyDown",pr=>pr(et,keyEvent(13,"Enter")))){et.input.lastIOSEnter=0;return}if(et.state.selection.anchor>rr.start&&looksLikeBackspace(Yt,rr.start,rr.endA,sr,nr)&&et.someProp("handleKeyDown",pr=>pr(et,keyEvent(8,"Backspace")))){android&&chrome&&et.domObserver.suppressSelectionUpdates();return}chrome&&rr.endB==rr.start&&(et.input.lastChromeDelete=Date.now()),android&&!or&&sr.start()!=nr.start()&&nr.parentOffset==0&&sr.depth==nr.depth&&Kt.sel&&Kt.sel.anchor==Kt.sel.head&&Kt.sel.head==rr.endA&&(rr.endB-=2,nr=Kt.doc.resolveNoCache(rr.endB-Kt.from),setTimeout(()=>{et.someProp("handleKeyDown",function(pr){return pr(et,keyEvent(13,"Enter"))})},20));let lr=rr.start,cr=rr.endA,dr=pr=>{let mr=pr||et.state.tr.replace(lr,cr,Kt.doc.slice(rr.start-Kt.from,rr.endB-Kt.from));if(Kt.sel){let jr=resolveSelection(et,mr.doc,Kt.sel);jr&&!(chrome&&et.composing&&jr.empty&&(rr.start!=rr.endB||et.input.lastChromeDelete<Date.now()-100)&&(jr.head==lr||jr.head==mr.mapping.map(cr)-1)||ie$2&&jr.empty&&jr.head==lr)&&mr.setSelection(jr)}return Dt&&mr.setMeta("composition",Dt),mr.scrollIntoView()},ur;if(or)if(sr.pos==nr.pos){ie$2&&ie_version<=11&&sr.parentOffset==0&&(et.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(et),20));let pr=dr(et.state.tr.delete(lr,cr)),mr=Yt.resolve(rr.start).marksAcross(Yt.resolve(rr.endA));mr&&pr.ensureMarks(mr),et.dispatch(pr)}else if(rr.endA==rr.endB&&(ur=isMarkChange(sr.parent.content.cut(sr.parentOffset,nr.parentOffset),ir.parent.content.cut(ir.parentOffset,rr.endA-ir.start())))){let pr=dr(et.state.tr);ur.type=="add"?pr.addMark(lr,cr,ur.mark):pr.removeMark(lr,cr,ur.mark),et.dispatch(pr)}else if(sr.parent.child(sr.index()).isText&&sr.index()==nr.index()-(nr.textOffset?0:1)){let pr=sr.parent.textBetween(sr.parentOffset,nr.parentOffset),mr=()=>dr(et.state.tr.insertText(pr,lr,cr));et.someProp("handleTextInput",jr=>jr(et,lr,cr,pr,mr))||et.dispatch(mr())}else et.dispatch(dr());else et.dispatch(dr())}function resolveSelection(et,dt,$t){return Math.max($t.anchor,$t.head)>dt.content.size?null:selectionBetween(et,dt.resolve($t.anchor),dt.resolve($t.head))}function isMarkChange(et,dt){let $t=et.firstChild.marks,kt=dt.firstChild.marks,Tt=$t,Dt=kt,Ft,Ut,Ht;for(let Yt=0;Yt<kt.length;Yt++)Tt=kt[Yt].removeFromSet(Tt);for(let Yt=0;Yt<$t.length;Yt++)Dt=$t[Yt].removeFromSet(Dt);if(Tt.length==1&&Dt.length==0)Ut=Tt[0],Ft="add",Ht=Yt=>Yt.mark(Ut.addToSet(Yt.marks));else if(Tt.length==0&&Dt.length==1)Ut=Dt[0],Ft="remove",Ht=Yt=>Yt.mark(Ut.removeFromSet(Yt.marks));else return null;let Kt=[];for(let Yt=0;Yt<dt.childCount;Yt++)Kt.push(Ht(dt.child(Yt)));if(Fragment.from(Kt).eq(et))return{mark:Ut,type:Ft}}function looksLikeBackspace(et,dt,$t,kt,Tt){if($t-dt<=Tt.pos-kt.pos||skipClosingAndOpening(kt,!0,!1)<Tt.pos)return!1;let Dt=et.resolve(dt);if(!kt.parent.isTextblock){let Ut=Dt.nodeAfter;return Ut!=null&&$t==dt+Ut.nodeSize}if(Dt.parentOffset<Dt.parent.content.size||!Dt.parent.isTextblock)return!1;let Ft=et.resolve(skipClosingAndOpening(Dt,!0,!0));return!Ft.parent.isTextblock||Ft.pos>$t||skipClosingAndOpening(Ft,!0,!1)<$t?!1:kt.parent.content.cut(kt.parentOffset).eq(Ft.parent.content)}function skipClosingAndOpening(et,dt,$t){let kt=et.depth,Tt=dt?et.end():et.pos;for(;kt>0&&(dt||et.indexAfter(kt)==et.node(kt).childCount);)kt--,Tt++,dt=!1;if($t){let Dt=et.node(kt).maybeChild(et.indexAfter(kt));for(;Dt&&!Dt.isLeaf;)Dt=Dt.firstChild,Tt++}return Tt}function findDiff(et,dt,$t,kt,Tt){let Dt=et.findDiffStart(dt,$t);if(Dt==null)return null;let{a:Ft,b:Ut}=et.findDiffEnd(dt,$t+et.size,$t+dt.size);if(Tt=="end"){let Ht=Math.max(0,Dt-Math.min(Ft,Ut));kt-=Ft+Ht-Dt}if(Ft<Dt&&et.size<dt.size){let Ht=kt<=Dt&&kt>=Ft?Dt-kt:0;Dt-=Ht,Dt&&Dt<dt.size&&isSurrogatePair(dt.textBetween(Dt-1,Dt+1))&&(Dt+=Ht?1:-1),Ut=Dt+(Ut-Ft),Ft=Dt}else if(Ut<Dt){let Ht=kt<=Dt&&kt>=Ut?Dt-kt:0;Dt-=Ht,Dt&&Dt<et.size&&isSurrogatePair(et.textBetween(Dt-1,Dt+1))&&(Dt+=Ht?1:-1),Ft=Dt+(Ft-Ut),Ut=Dt}return{start:Dt,endA:Ft,endB:Ut}}function isSurrogatePair(et){if(et.length!=2)return!1;let dt=et.charCodeAt(0),$t=et.charCodeAt(1);return dt>=56320&&dt<=57343&&$t>=55296&&$t<=56319}class EditorView{constructor(dt,$t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=$t,this.state=$t.state,this.directPlugins=$t.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=dt&&dt.mount||document.createElement("div"),dt&&(dt.appendChild?dt.appendChild(this.dom):typeof dt=="function"?dt(this.dom):dt.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(kt,Tt,Dt,Ft)=>readDOMChange(this,kt,Tt,Dt,Ft)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let dt=this._props;this._props={};for(let $t in dt)this._props[$t]=dt[$t];this._props.state=this.state}return this._props}update(dt){dt.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let $t=this._props;this._props=dt,dt.plugins&&(dt.plugins.forEach(checkStateComponent),this.directPlugins=dt.plugins),this.updateStateInner(dt.state,$t)}setProps(dt){let $t={};for(let kt in this._props)$t[kt]=this._props[kt];$t.state=this.state;for(let kt in dt)$t[kt]=dt[kt];this.update($t)}updateState(dt){this.updateStateInner(dt,this._props)}updateStateInner(dt,$t){var kt;let Tt=this.state,Dt=!1,Ft=!1;dt.storedMarks&&this.composing&&(clearComposition(this),Ft=!0),this.state=dt;let Ut=Tt.plugins!=dt.plugins||this._props.plugins!=$t.plugins;if(Ut||this._props.plugins!=$t.plugins||this._props.nodeViews!=$t.nodeViews){let er=buildNodeViews(this);changedNodeViews(er,this.nodeViews)&&(this.nodeViews=er,Dt=!0)}(Ut||$t.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let Ht=viewDecorations(this),Kt=computeDocDeco(this),Yt=Tt.plugins!=dt.plugins&&!Tt.doc.eq(dt.doc)?"reset":dt.scrollToSelection>Tt.scrollToSelection?"to selection":"preserve",Jt=Dt||!this.docView.matchesNode(dt.doc,Kt,Ht);(Jt||!dt.selection.eq(Tt.selection))&&(Ft=!0);let Zt=Yt=="preserve"&&Ft&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(Ft){this.domObserver.stop();let er=Jt&&(ie$2||chrome)&&!this.composing&&!Tt.selection.empty&&!dt.selection.empty&&selectionContextChanged(Tt.selection,dt.selection);if(Jt){let rr=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(Dt||!this.docView.update(dt.doc,Kt,Ht,this))&&(this.docView.updateOuterDeco(Kt),this.docView.destroy(),this.docView=docViewDesc(dt.doc,Kt,Ht,this.dom,this)),rr&&!this.trackWrites&&(er=!0)}er||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,er):(syncNodeSelection(this,dt.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(Tt),!((kt=this.dragging)===null||kt===void 0)&&kt.node&&!Tt.doc.eq(dt.doc)&&this.updateDraggedNode(this.dragging,Tt),Yt=="reset"?this.dom.scrollTop=0:Yt=="to selection"?this.scrollToSelection():Zt&&resetScrollPos(Zt)}scrollToSelection(){let dt=this.domSelectionRange().focusNode;if(!(!dt||!this.dom.contains(dt.nodeType==1?dt:dt.parentNode))){if(!this.someProp("handleScrollToSelection",$t=>$t(this)))if(this.state.selection instanceof NodeSelection){let $t=this.docView.domAfterPos(this.state.selection.from);$t.nodeType==1&&scrollRectIntoView(this,$t.getBoundingClientRect(),dt)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),dt)}}destroyPluginViews(){let dt;for(;dt=this.pluginViews.pop();)dt.destroy&&dt.destroy()}updatePluginViews(dt){if(!dt||dt.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let $t=0;$t<this.directPlugins.length;$t++){let kt=this.directPlugins[$t];kt.spec.view&&this.pluginViews.push(kt.spec.view(this))}for(let $t=0;$t<this.state.plugins.length;$t++){let kt=this.state.plugins[$t];kt.spec.view&&this.pluginViews.push(kt.spec.view(this))}}else for(let $t=0;$t<this.pluginViews.length;$t++){let kt=this.pluginViews[$t];kt.update&&kt.update(this,dt)}}updateDraggedNode(dt,$t){let kt=dt.node,Tt=-1;if(this.state.doc.nodeAt(kt.from)==kt.node)Tt=kt.from;else{let Dt=kt.from+(this.state.doc.content.size-$t.doc.content.size);(Dt>0&&this.state.doc.nodeAt(Dt))==kt.node&&(Tt=Dt)}this.dragging=new Dragging(dt.slice,dt.move,Tt<0?void 0:NodeSelection.create(this.state.doc,Tt))}someProp(dt,$t){let kt=this._props&&this._props[dt],Tt;if(kt!=null&&(Tt=$t?$t(kt):kt))return Tt;for(let Ft=0;Ft<this.directPlugins.length;Ft++){let Ut=this.directPlugins[Ft].props[dt];if(Ut!=null&&(Tt=$t?$t(Ut):Ut))return Tt}let Dt=this.state.plugins;if(Dt)for(let Ft=0;Ft<Dt.length;Ft++){let Ut=Dt[Ft].props[dt];if(Ut!=null&&(Tt=$t?$t(Ut):Ut))return Tt}}hasFocus(){if(ie$2){let dt=this.root.activeElement;if(dt==this.dom)return!0;if(!dt||!this.dom.contains(dt))return!1;for(;dt&&this.dom!=dt&&this.dom.contains(dt);){if(dt.contentEditable=="false")return!1;dt=dt.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let dt=this._root;if(dt==null){for(let $t=this.dom.parentNode;$t;$t=$t.parentNode)if($t.nodeType==9||$t.nodeType==11&&$t.host)return $t.getSelection||(Object.getPrototypeOf($t).getSelection=()=>$t.ownerDocument.getSelection()),this._root=$t}return dt||document}updateRoot(){this._root=null}posAtCoords(dt){return posAtCoords(this,dt)}coordsAtPos(dt,$t=1){return coordsAtPos(this,dt,$t)}domAtPos(dt,$t=0){return this.docView.domFromPos(dt,$t)}nodeDOM(dt){let $t=this.docView.descAt(dt);return $t?$t.nodeDOM:null}posAtDOM(dt,$t,kt=-1){let Tt=this.docView.posFromDOM(dt,$t,kt);if(Tt==null)throw new RangeError("DOM position not inside the editor");return Tt}endOfTextblock(dt,$t){return endOfTextblock(this,$t||this.state,dt)}pasteHTML(dt,$t){return doPaste(this,"",dt,!1,$t||new ClipboardEvent("paste"))}pasteText(dt,$t){return doPaste(this,dt,null,!0,$t||new ClipboardEvent("paste"))}serializeForClipboard(dt){return serializeForClipboard(this,dt)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(dt){return dispatchEvent(this,dt)}domSelectionRange(){let dt=this.domSelection();return dt?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,dt)||dt:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}EditorView.prototype.dispatch=function(et){let dt=this._props.dispatchTransaction;dt?dt.call(this,et):this.updateState(this.state.apply(et))};function computeDocDeco(et){let dt=Object.create(null);return dt.class="ProseMirror",dt.contenteditable=String(et.editable),et.someProp("attributes",$t=>{if(typeof $t=="function"&&($t=$t(et.state)),$t)for(let kt in $t)kt=="class"?dt.class+=" "+$t[kt]:kt=="style"?dt.style=(dt.style?dt.style+";":"")+$t[kt]:!dt[kt]&&kt!="contenteditable"&&kt!="nodeName"&&(dt[kt]=String($t[kt]))}),dt.translate||(dt.translate="no"),[Decoration.node(0,et.state.doc.content.size,dt)]}function updateCursorWrapper(et){if(et.markCursor){let dt=document.createElement("img");dt.className="ProseMirror-separator",dt.setAttribute("mark-placeholder","true"),dt.setAttribute("alt",""),et.cursorWrapper={dom:dt,deco:Decoration.widget(et.state.selection.from,dt,{raw:!0,marks:et.markCursor})}}else et.cursorWrapper=null}function getEditable(et){return!et.someProp("editable",dt=>dt(et.state)===!1)}function selectionContextChanged(et,dt){let $t=Math.min(et.$anchor.sharedDepth(et.head),dt.$anchor.sharedDepth(dt.head));return et.$anchor.start($t)!=dt.$anchor.start($t)}function buildNodeViews(et){let dt=Object.create(null);function $t(kt){for(let Tt in kt)Object.prototype.hasOwnProperty.call(dt,Tt)||(dt[Tt]=kt[Tt])}return et.someProp("nodeViews",$t),et.someProp("markViews",$t),dt}function changedNodeViews(et,dt){let $t=0,kt=0;for(let Tt in et){if(et[Tt]!=dt[Tt])return!0;$t++}for(let Tt in dt)kt++;return $t!=kt}function checkStateComponent(et){if(et.spec.state||et.spec.filterTransaction||et.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$4=0;i$4<10;i$4++)base[48+i$4]=base[96+i$4]=String(i$4);for(var i$4=1;i$4<=24;i$4++)base[i$4+111]="F"+i$4;for(var i$4=65;i$4<=90;i$4++)base[i$4]=String.fromCharCode(i$4+32),shift[i$4]=String.fromCharCode(i$4);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(et){var dt=mac$1&&et.metaKey&&et.shiftKey&&!et.ctrlKey&&!et.altKey||ie$1&&et.shiftKey&&et.key&&et.key.length==1||et.key=="Unidentified",$t=!dt&&et.key||(et.shiftKey?shift:base)[et.keyCode]||et.key||"Unidentified";return $t=="Esc"&&($t="Escape"),$t=="Del"&&($t="Delete"),$t=="Left"&&($t="ArrowLeft"),$t=="Up"&&($t="ArrowUp"),$t=="Right"&&($t="ArrowRight"),$t=="Down"&&($t="ArrowDown"),$t}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(et){let dt=et.split(/-(?!$)/),$t=dt[dt.length-1];$t=="Space"&&($t=" ");let kt,Tt,Dt,Ft;for(let Ut=0;Ut<dt.length-1;Ut++){let Ht=dt[Ut];if(/^(cmd|meta|m)$/i.test(Ht))Ft=!0;else if(/^a(lt)?$/i.test(Ht))kt=!0;else if(/^(c|ctrl|control)$/i.test(Ht))Tt=!0;else if(/^s(hift)?$/i.test(Ht))Dt=!0;else if(/^mod$/i.test(Ht))mac?Ft=!0:Tt=!0;else throw new Error("Unrecognized modifier name: "+Ht)}return kt&&($t="Alt-"+$t),Tt&&($t="Ctrl-"+$t),Ft&&($t="Meta-"+$t),Dt&&($t="Shift-"+$t),$t}function normalize$1(et){let dt=Object.create(null);for(let $t in et)dt[normalizeKeyName$1($t)]=et[$t];return dt}function modifiers(et,dt,$t=!0){return dt.altKey&&(et="Alt-"+et),dt.ctrlKey&&(et="Ctrl-"+et),dt.metaKey&&(et="Meta-"+et),$t&&dt.shiftKey&&(et="Shift-"+et),et}function keymap(et){return new Plugin({props:{handleKeyDown:keydownHandler(et)}})}function keydownHandler(et){let dt=normalize$1(et);return function($t,kt){let Tt=keyName(kt),Dt,Ft=dt[modifiers(Tt,kt)];if(Ft&&Ft($t.state,$t.dispatch,$t))return!0;if(Tt.length==1&&Tt!=" "){if(kt.shiftKey){let Ut=dt[modifiers(Tt,kt,!1)];if(Ut&&Ut($t.state,$t.dispatch,$t))return!0}if((kt.altKey||kt.metaKey||kt.ctrlKey)&&!(windows&&kt.ctrlKey&&kt.altKey)&&(Dt=base[kt.keyCode])&&Dt!=Tt){let Ut=dt[modifiers(Dt,kt)];if(Ut&&Ut($t.state,$t.dispatch,$t))return!0}}return!1}}var __defProp$7=Object.defineProperty,__export$7=(et,dt)=>{for(var $t in dt)__defProp$7(et,$t,{get:dt[$t],enumerable:!0})};function createChainableState(et){const{state:dt,transaction:$t}=et;let{selection:kt}=$t,{doc:Tt}=$t,{storedMarks:Dt}=$t;return{...dt,apply:dt.apply.bind(dt),applyTransaction:dt.applyTransaction.bind(dt),plugins:dt.plugins,schema:dt.schema,reconfigure:dt.reconfigure.bind(dt),toJSON:dt.toJSON.bind(dt),get storedMarks(){return Dt},get selection(){return kt},get doc(){return Tt},get tr(){return kt=$t.selection,Tt=$t.doc,Dt=$t.storedMarks,$t}}}var CommandManager$1=class{constructor(dt){this.editor=dt.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=dt.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:dt,editor:$t,state:kt}=this,{view:Tt}=$t,{tr:Dt}=kt,Ft=this.buildProps(Dt);return Object.fromEntries(Object.entries(dt).map(([Ut,Ht])=>[Ut,(...Yt)=>{const Jt=Ht(...Yt)(Ft);return!Dt.getMeta("preventDispatch")&&!this.hasCustomState&&Tt.dispatch(Dt),Jt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(dt,$t=!0){const{rawCommands:kt,editor:Tt,state:Dt}=this,{view:Ft}=Tt,Ut=[],Ht=!!dt,Kt=dt||Dt.tr,Yt=()=>(!Ht&&$t&&!Kt.getMeta("preventDispatch")&&!this.hasCustomState&&Ft.dispatch(Kt),Ut.every(Zt=>Zt===!0)),Jt={...Object.fromEntries(Object.entries(kt).map(([Zt,er])=>[Zt,(...sr)=>{const nr=this.buildProps(Kt,$t),ir=er(...sr)(nr);return Ut.push(ir),Jt}])),run:Yt};return Jt}createCan(dt){const{rawCommands:$t,state:kt}=this,Tt=!1,Dt=dt||kt.tr,Ft=this.buildProps(Dt,Tt);return{...Object.fromEntries(Object.entries($t).map(([Ht,Kt])=>[Ht,(...Yt)=>Kt(...Yt)({...Ft,dispatch:void 0})])),chain:()=>this.createChain(Dt,Tt)}}buildProps(dt,$t=!0){const{rawCommands:kt,editor:Tt,state:Dt}=this,{view:Ft}=Tt,Ut={tr:dt,editor:Tt,view:Ft,state:createChainableState({state:Dt,transaction:dt}),dispatch:$t?()=>{}:void 0,chain:()=>this.createChain(dt,$t),can:()=>this.createCan(dt),get commands(){return Object.fromEntries(Object.entries(kt).map(([Ht,Kt])=>[Ht,(...Yt)=>Kt(...Yt)(Ut)]))}};return Ut}},commands_exports={};__export$7(commands_exports,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextDirection:()=>setTextDirection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,unsetTextDirection:()=>unsetTextDirection,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:et,view:dt})=>(requestAnimationFrame(()=>{var $t;et.isDestroyed||(dt.dom.blur(),($t=window==null?void 0:window.getSelection())==null||$t.removeAllRanges())}),!0),clearContent=(et=!0)=>({commands:dt})=>dt.setContent("",{emitUpdate:et}),clearNodes=()=>({state:et,tr:dt,dispatch:$t})=>{const{selection:kt}=dt,{ranges:Tt}=kt;return $t&&Tt.forEach(({$from:Dt,$to:Ft})=>{et.doc.nodesBetween(Dt.pos,Ft.pos,(Ut,Ht)=>{if(Ut.type.isText)return;const{doc:Kt,mapping:Yt}=dt,Jt=Kt.resolve(Yt.map(Ht)),Zt=Kt.resolve(Yt.map(Ht+Ut.nodeSize)),er=Jt.blockRange(Zt);if(!er)return;const rr=liftTarget(er);if(Ut.type.isTextblock){const{defaultType:sr}=Jt.parent.contentMatchAt(Jt.index());dt.setNodeMarkup(er.start,sr)}(rr||rr===0)&&dt.lift(er,rr)})}),!0},command=et=>dt=>et(dt),createParagraphNear=()=>({state:et,dispatch:dt})=>createParagraphNear$1(et,dt),cut=(et,dt)=>({editor:$t,tr:kt})=>{const{state:Tt}=$t,Dt=Tt.doc.slice(et.from,et.to);kt.deleteRange(et.from,et.to);const Ft=kt.mapping.map(dt);return kt.insert(Ft,Dt.content),kt.setSelection(new TextSelection(kt.doc.resolve(Math.max(Ft-1,0)))),!0},deleteCurrentNode=()=>({tr:et,dispatch:dt})=>{const{selection:$t}=et,kt=$t.$anchor.node();if(kt.content.size>0)return!1;const Tt=et.selection.$anchor;for(let Dt=Tt.depth;Dt>0;Dt-=1)if(Tt.node(Dt).type===kt.type){if(dt){const Ut=Tt.before(Dt),Ht=Tt.after(Dt);et.delete(Ut,Ht).scrollIntoView()}return!0}return!1};function getNodeType(et,dt){if(typeof et=="string"){if(!dt.nodes[et])throw Error(`There is no node type named '${et}'. Maybe you forgot to add the extension?`);return dt.nodes[et]}return et}var deleteNode=et=>({tr:dt,state:$t,dispatch:kt})=>{const Tt=getNodeType(et,$t.schema),Dt=dt.selection.$anchor;for(let Ft=Dt.depth;Ft>0;Ft-=1)if(Dt.node(Ft).type===Tt){if(kt){const Ht=Dt.before(Ft),Kt=Dt.after(Ft);dt.delete(Ht,Kt).scrollIntoView()}return!0}return!1},deleteRange=et=>({tr:dt,dispatch:$t})=>{const{from:kt,to:Tt}=et;return $t&&dt.delete(kt,Tt),!0},deleteSelection=()=>({state:et,dispatch:dt})=>deleteSelection$1(et,dt),enter=()=>({commands:et})=>et.keyboardShortcut("Enter"),exitCode=()=>({state:et,dispatch:dt})=>exitCode$1(et,dt);function isRegExp(et){return Object.prototype.toString.call(et)==="[object RegExp]"}function objectIncludes(et,dt,$t={strict:!0}){const kt=Object.keys(dt);return kt.length?kt.every(Tt=>$t.strict?dt[Tt]===et[Tt]:isRegExp(dt[Tt])?dt[Tt].test(et[Tt]):dt[Tt]===et[Tt]):!0}function findMarkInSet(et,dt,$t={}){return et.find(kt=>kt.type===dt&&objectIncludes(Object.fromEntries(Object.keys($t).map(Tt=>[Tt,kt.attrs[Tt]])),$t))}function isMarkInSet(et,dt,$t={}){return!!findMarkInSet(et,dt,$t)}function getMarkRange(et,dt,$t){var kt;if(!et||!dt)return;let Tt=et.parent.childAfter(et.parentOffset);if((!Tt.node||!Tt.node.marks.some(Yt=>Yt.type===dt))&&(Tt=et.parent.childBefore(et.parentOffset)),!Tt.node||!Tt.node.marks.some(Yt=>Yt.type===dt)||($t=$t||((kt=Tt.node.marks[0])==null?void 0:kt.attrs),!findMarkInSet([...Tt.node.marks],dt,$t)))return;let Ft=Tt.index,Ut=et.start()+Tt.offset,Ht=Ft+1,Kt=Ut+Tt.node.nodeSize;for(;Ft>0&&isMarkInSet([...et.parent.child(Ft-1).marks],dt,$t);)Ft-=1,Ut-=et.parent.child(Ft).nodeSize;for(;Ht<et.parent.childCount&&isMarkInSet([...et.parent.child(Ht).marks],dt,$t);)Kt+=et.parent.child(Ht).nodeSize,Ht+=1;return{from:Ut,to:Kt}}function getMarkType(et,dt){if(typeof et=="string"){if(!dt.marks[et])throw Error(`There is no mark type named '${et}'. Maybe you forgot to add the extension?`);return dt.marks[et]}return et}var extendMarkRange=(et,dt={})=>({tr:$t,state:kt,dispatch:Tt})=>{const Dt=getMarkType(et,kt.schema),{doc:Ft,selection:Ut}=$t,{$from:Ht,from:Kt,to:Yt}=Ut;if(Tt){const Jt=getMarkRange(Ht,Dt,dt);if(Jt&&Jt.from<=Kt&&Jt.to>=Yt){const Zt=TextSelection.create(Ft,Jt.from,Jt.to);$t.setSelection(Zt)}}return!0},first=et=>dt=>{const $t=typeof et=="function"?et(dt):et;for(let kt=0;kt<$t.length;kt+=1)if($t[kt](dt))return!0;return!1};function isTextSelection(et){return et instanceof TextSelection}function minMax(et=0,dt=0,$t=0){return Math.min(Math.max(et,dt),$t)}function resolveFocusPosition(et,dt=null){if(!dt)return null;const $t=Selection.atStart(et),kt=Selection.atEnd(et);if(dt==="start"||dt===!0)return $t;if(dt==="end")return kt;const Tt=$t.from,Dt=kt.to;return dt==="all"?TextSelection.create(et,minMax(0,Tt,Dt),minMax(et.content.size,Tt,Dt)):TextSelection.create(et,minMax(dt,Tt,Dt),minMax(dt,Tt,Dt))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function isSafari(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var focus=(et=null,dt={})=>({editor:$t,view:kt,tr:Tt,dispatch:Dt})=>{dt={scrollIntoView:!0,...dt};const Ft=()=>{(isiOS()||isAndroid())&&kt.dom.focus(),isSafari()&&!isiOS()&&!isAndroid()&&kt.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{$t.isDestroyed||(kt.focus(),dt!=null&&dt.scrollIntoView&&$t.commands.scrollIntoView())})};if(kt.hasFocus()&&et===null||et===!1)return!0;if(Dt&&et===null&&!isTextSelection($t.state.selection))return Ft(),!0;const Ut=resolveFocusPosition(Tt.doc,et)||$t.state.selection,Ht=$t.state.selection.eq(Ut);return Dt&&(Ht||Tt.setSelection(Ut),Ht&&Tt.storedMarks&&Tt.setStoredMarks(Tt.storedMarks),Ft()),!0},forEach=(et,dt)=>$t=>et.every((kt,Tt)=>dt(kt,{...$t,index:Tt})),insertContent=(et,dt)=>({tr:$t,commands:kt})=>kt.insertContentAt({from:$t.selection.from,to:$t.selection.to},et,dt),removeWhitespaces=et=>{const dt=et.childNodes;for(let $t=dt.length-1;$t>=0;$t-=1){const kt=dt[$t];kt.nodeType===3&&kt.nodeValue&&/^(\n\s\s|\n)$/.test(kt.nodeValue)?et.removeChild(kt):kt.nodeType===1&&removeWhitespaces(kt)}return et};function elementFromString(et){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const dt=`<body>${et}</body>`,$t=new window.DOMParser().parseFromString(dt,"text/html").body;return removeWhitespaces($t)}function createNodeFromContent(et,dt,$t){if(et instanceof Node$1||et instanceof Fragment)return et;$t={slice:!0,parseOptions:{},...$t};const kt=typeof et=="object"&&et!==null,Tt=typeof et=="string";if(kt)try{if(Array.isArray(et)&&et.length>0)return Fragment.fromArray(et.map(Ut=>dt.nodeFromJSON(Ut)));const Ft=dt.nodeFromJSON(et);return $t.errorOnInvalidContent&&Ft.check(),Ft}catch(Dt){if($t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:Dt});return console.warn("[tiptap warn]: Invalid content.","Passed value:",et,"Error:",Dt),createNodeFromContent("",dt,$t)}if(Tt){if($t.errorOnInvalidContent){let Ft=!1,Ut="";const Ht=new Schema({topNode:dt.spec.topNode,marks:dt.spec.marks,nodes:dt.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:Kt=>(Ft=!0,Ut=typeof Kt=="string"?Kt:Kt.outerHTML,null)}]}})});if($t.slice?DOMParser.fromSchema(Ht).parseSlice(elementFromString(et),$t.parseOptions):DOMParser.fromSchema(Ht).parse(elementFromString(et),$t.parseOptions),$t.errorOnInvalidContent&&Ft)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${Ut}`)})}const Dt=DOMParser.fromSchema(dt);return $t.slice?Dt.parseSlice(elementFromString(et),$t.parseOptions).content:Dt.parse(elementFromString(et),$t.parseOptions)}return createNodeFromContent("",dt,$t)}function selectionToInsertionEnd(et,dt,$t){const kt=et.steps.length-1;if(kt<dt)return;const Tt=et.steps[kt];if(!(Tt instanceof ReplaceStep||Tt instanceof ReplaceAroundStep))return;const Dt=et.mapping.maps[kt];let Ft=0;Dt.forEach((Ut,Ht,Kt,Yt)=>{Ft===0&&(Ft=Yt)}),et.setSelection(Selection.near(et.doc.resolve(Ft),$t))}var isFragment=et=>!("type"in et),insertContentAt=(et,dt,$t)=>({tr:kt,dispatch:Tt,editor:Dt})=>{var Ft;if(Tt){$t={parseOptions:Dt.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...$t};let Ut;const Ht=nr=>{Dt.emit("contentError",{editor:Dt,error:nr,disableCollaboration:()=>{"collaboration"in Dt.storage&&typeof Dt.storage.collaboration=="object"&&Dt.storage.collaboration&&(Dt.storage.collaboration.isDisabled=!0)}})},Kt={preserveWhitespace:"full",...$t.parseOptions};if(!$t.errorOnInvalidContent&&!Dt.options.enableContentCheck&&Dt.options.emitContentError)try{createNodeFromContent(dt,Dt.schema,{parseOptions:Kt,errorOnInvalidContent:!0})}catch(nr){Ht(nr)}try{Ut=createNodeFromContent(dt,Dt.schema,{parseOptions:Kt,errorOnInvalidContent:(Ft=$t.errorOnInvalidContent)!=null?Ft:Dt.options.enableContentCheck})}catch(nr){return Ht(nr),!1}let{from:Yt,to:Jt}=typeof et=="number"?{from:et,to:et}:{from:et.from,to:et.to},Zt=!0,er=!0;if((isFragment(Ut)?Ut:[Ut]).forEach(nr=>{nr.check(),Zt=Zt?nr.isText&&nr.marks.length===0:!1,er=er?nr.isBlock:!1}),Yt===Jt&&er){const{parent:nr}=kt.doc.resolve(Yt);nr.isTextblock&&!nr.type.spec.code&&!nr.childCount&&(Yt-=1,Jt+=1)}let sr;if(Zt){if(Array.isArray(dt))sr=dt.map(nr=>nr.text||"").join("");else if(dt instanceof Fragment){let nr="";dt.forEach(ir=>{ir.text&&(nr+=ir.text)}),sr=nr}else typeof dt=="object"&&dt&&dt.text?sr=dt.text:sr=dt;kt.insertText(sr,Yt,Jt)}else{sr=Ut;const nr=kt.doc.resolve(Yt),ir=nr.node(),or=nr.parentOffset===0,lr=ir.isText||ir.isTextblock,cr=ir.content.size>0;or&&lr&&cr&&(Yt=Math.max(0,Yt-1)),kt.replaceWith(Yt,Jt,sr)}$t.updateSelection&&selectionToInsertionEnd(kt,kt.steps.length-1,-1),$t.applyInputRules&&kt.setMeta("applyInputRules",{from:Yt,text:sr}),$t.applyPasteRules&&kt.setMeta("applyPasteRules",{from:Yt,text:sr})}return!0},joinUp=()=>({state:et,dispatch:dt})=>joinUp$1(et,dt),joinDown=()=>({state:et,dispatch:dt})=>joinDown$1(et,dt),joinBackward=()=>({state:et,dispatch:dt})=>joinBackward$1(et,dt),joinForward=()=>({state:et,dispatch:dt})=>joinForward$1(et,dt),joinItemBackward=()=>({state:et,dispatch:dt,tr:$t})=>{try{const kt=joinPoint(et.doc,et.selection.$from.pos,-1);return kt==null?!1:($t.join(kt,2),dt&&dt($t),!0)}catch{return!1}},joinItemForward=()=>({state:et,dispatch:dt,tr:$t})=>{try{const kt=joinPoint(et.doc,et.selection.$from.pos,1);return kt==null?!1:($t.join(kt,2),dt&&dt($t),!0)}catch{return!1}},joinTextblockBackward=()=>({state:et,dispatch:dt})=>joinTextblockBackward$1(et,dt),joinTextblockForward=()=>({state:et,dispatch:dt})=>joinTextblockForward$1(et,dt);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(et){const dt=et.split(/-(?!$)/);let $t=dt[dt.length-1];$t==="Space"&&($t=" ");let kt,Tt,Dt,Ft;for(let Ut=0;Ut<dt.length-1;Ut+=1){const Ht=dt[Ut];if(/^(cmd|meta|m)$/i.test(Ht))Ft=!0;else if(/^a(lt)?$/i.test(Ht))kt=!0;else if(/^(c|ctrl|control)$/i.test(Ht))Tt=!0;else if(/^s(hift)?$/i.test(Ht))Dt=!0;else if(/^mod$/i.test(Ht))isiOS()||isMacOS()?Ft=!0:Tt=!0;else throw new Error(`Unrecognized modifier name: ${Ht}`)}return kt&&($t=`Alt-${$t}`),Tt&&($t=`Ctrl-${$t}`),Ft&&($t=`Meta-${$t}`),Dt&&($t=`Shift-${$t}`),$t}var keyboardShortcut=et=>({editor:dt,view:$t,tr:kt,dispatch:Tt})=>{const Dt=normalizeKeyName(et).split(/-(?!$)/),Ft=Dt.find(Kt=>!["Alt","Ctrl","Meta","Shift"].includes(Kt)),Ut=new KeyboardEvent("keydown",{key:Ft==="Space"?" ":Ft,altKey:Dt.includes("Alt"),ctrlKey:Dt.includes("Ctrl"),metaKey:Dt.includes("Meta"),shiftKey:Dt.includes("Shift"),bubbles:!0,cancelable:!0}),Ht=dt.captureTransaction(()=>{$t.someProp("handleKeyDown",Kt=>Kt($t,Ut))});return Ht==null||Ht.steps.forEach(Kt=>{const Yt=Kt.map(kt.mapping);Yt&&Tt&&kt.maybeStep(Yt)}),!0};function isNodeActive(et,dt,$t={}){const{from:kt,to:Tt,empty:Dt}=et.selection,Ft=dt?getNodeType(dt,et.schema):null,Ut=[];et.doc.nodesBetween(kt,Tt,(Jt,Zt)=>{if(Jt.isText)return;const er=Math.max(kt,Zt),rr=Math.min(Tt,Zt+Jt.nodeSize);Ut.push({node:Jt,from:er,to:rr})});const Ht=Tt-kt,Kt=Ut.filter(Jt=>Ft?Ft.name===Jt.node.type.name:!0).filter(Jt=>objectIncludes(Jt.node.attrs,$t,{strict:!1}));return Dt?!!Kt.length:Kt.reduce((Jt,Zt)=>Jt+Zt.to-Zt.from,0)>=Ht}var lift=(et,dt={})=>({state:$t,dispatch:kt})=>{const Tt=getNodeType(et,$t.schema);return isNodeActive($t,Tt,dt)?lift$1($t,kt):!1},liftEmptyBlock=()=>({state:et,dispatch:dt})=>liftEmptyBlock$1(et,dt),liftListItem=et=>({state:dt,dispatch:$t})=>{const kt=getNodeType(et,dt.schema);return liftListItem$1(kt)(dt,$t)},newlineInCode=()=>({state:et,dispatch:dt})=>newlineInCode$1(et,dt);function getSchemaTypeNameByName(et,dt){return dt.nodes[et]?"node":dt.marks[et]?"mark":null}function deleteProps(et,dt){const $t=typeof dt=="string"?[dt]:dt;return Object.keys(et).reduce((kt,Tt)=>($t.includes(Tt)||(kt[Tt]=et[Tt]),kt),{})}var resetAttributes=(et,dt)=>({tr:$t,state:kt,dispatch:Tt})=>{let Dt=null,Ft=null;const Ut=getSchemaTypeNameByName(typeof et=="string"?et:et.name,kt.schema);if(!Ut)return!1;Ut==="node"&&(Dt=getNodeType(et,kt.schema)),Ut==="mark"&&(Ft=getMarkType(et,kt.schema));let Ht=!1;return $t.selection.ranges.forEach(Kt=>{kt.doc.nodesBetween(Kt.$from.pos,Kt.$to.pos,(Yt,Jt)=>{Dt&&Dt===Yt.type&&(Ht=!0,Tt&&$t.setNodeMarkup(Jt,void 0,deleteProps(Yt.attrs,dt))),Ft&&Yt.marks.length&&Yt.marks.forEach(Zt=>{Ft===Zt.type&&(Ht=!0,Tt&&$t.addMark(Jt,Jt+Yt.nodeSize,Ft.create(deleteProps(Zt.attrs,dt))))})})}),Ht},scrollIntoView=()=>({tr:et,dispatch:dt})=>(dt&&et.scrollIntoView(),!0),selectAll=()=>({tr:et,dispatch:dt})=>{if(dt){const $t=new AllSelection(et.doc);et.setSelection($t)}return!0},selectNodeBackward=()=>({state:et,dispatch:dt})=>selectNodeBackward$1(et,dt),selectNodeForward=()=>({state:et,dispatch:dt})=>selectNodeForward$1(et,dt),selectParentNode=()=>({state:et,dispatch:dt})=>selectParentNode$1(et,dt),selectTextblockEnd=()=>({state:et,dispatch:dt})=>selectTextblockEnd$1(et,dt),selectTextblockStart=()=>({state:et,dispatch:dt})=>selectTextblockStart$1(et,dt);function createDocument(et,dt,$t={},kt={}){return createNodeFromContent(et,dt,{slice:!1,parseOptions:$t,errorOnInvalidContent:kt.errorOnInvalidContent})}var setContent=(et,{errorOnInvalidContent:dt,emitUpdate:$t=!0,parseOptions:kt={}}={})=>({editor:Tt,tr:Dt,dispatch:Ft,commands:Ut})=>{const{doc:Ht}=Dt;if(kt.preserveWhitespace!=="full"){const Kt=createDocument(et,Tt.schema,kt,{errorOnInvalidContent:dt??Tt.options.enableContentCheck});return Ft&&Dt.replaceWith(0,Ht.content.size,Kt).setMeta("preventUpdate",!$t),!0}return Ft&&Dt.setMeta("preventUpdate",!$t),Ut.insertContentAt({from:0,to:Ht.content.size},et,{parseOptions:kt,errorOnInvalidContent:dt??Tt.options.enableContentCheck})};function getMarkAttributes(et,dt){const $t=getMarkType(dt,et.schema),{from:kt,to:Tt,empty:Dt}=et.selection,Ft=[];Dt?(et.storedMarks&&Ft.push(...et.storedMarks),Ft.push(...et.selection.$head.marks())):et.doc.nodesBetween(kt,Tt,Ht=>{Ft.push(...Ht.marks)});const Ut=Ft.find(Ht=>Ht.type.name===$t.name);return Ut?{...Ut.attrs}:{}}function combineTransactionSteps(et,dt){const $t=new Transform(et);return dt.forEach(kt=>{kt.steps.forEach(Tt=>{$t.step(Tt)})}),$t}function defaultBlockAt(et){for(let dt=0;dt<et.edgeCount;dt+=1){const{type:$t}=et.edge(dt);if($t.isTextblock&&!$t.hasRequiredAttrs())return $t}return null}function findChildrenInRange(et,dt,$t){const kt=[];return et.nodesBetween(dt.from,dt.to,(Tt,Dt)=>{$t(Tt)&&kt.push({node:Tt,pos:Dt})}),kt}function findParentNodeClosestToPos(et,dt){for(let $t=et.depth;$t>0;$t-=1){const kt=et.node($t);if(dt(kt))return{pos:$t>0?et.before($t):0,start:et.start($t),depth:$t,node:kt}}}function findParentNode(et){return dt=>findParentNodeClosestToPos(dt.$from,et)}function getExtensionField(et,dt,$t){return et.config[dt]===void 0&&et.parent?getExtensionField(et.parent,dt,$t):typeof et.config[dt]=="function"?et.config[dt].bind({...$t,parent:et.parent?getExtensionField(et.parent,dt,$t):null}):et.config[dt]}function flattenExtensions(et){return et.map(dt=>{const $t={name:dt.name,options:dt.options,storage:dt.storage},kt=getExtensionField(dt,"addExtensions",$t);return kt?[dt,...flattenExtensions(kt())]:dt}).flat(10)}function getHTMLFromFragment(et,dt){const $t=DOMSerializer.fromSchema(dt).serializeFragment(et),Tt=document.implementation.createHTMLDocument().createElement("div");return Tt.appendChild($t),Tt.innerHTML}function isFunction$4(et){return typeof et=="function"}function callOrReturn(et,dt=void 0,...$t){return isFunction$4(et)?dt?et.bind(dt)(...$t):et(...$t):et}function isEmptyObject(et={}){return Object.keys(et).length===0&&et.constructor===Object}function splitExtensions(et){const dt=et.filter(Tt=>Tt.type==="extension"),$t=et.filter(Tt=>Tt.type==="node"),kt=et.filter(Tt=>Tt.type==="mark");return{baseExtensions:dt,nodeExtensions:$t,markExtensions:kt}}function getAttributesFromExtensions(et){const dt=[],{nodeExtensions:$t,markExtensions:kt}=splitExtensions(et),Tt=[...$t,...kt],Dt={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return et.forEach(Ft=>{const Ut={name:Ft.name,options:Ft.options,storage:Ft.storage,extensions:Tt},Ht=getExtensionField(Ft,"addGlobalAttributes",Ut);if(!Ht)return;Ht().forEach(Yt=>{Yt.types.forEach(Jt=>{Object.entries(Yt.attributes).forEach(([Zt,er])=>{dt.push({type:Jt,name:Zt,attribute:{...Dt,...er}})})})})}),Tt.forEach(Ft=>{const Ut={name:Ft.name,options:Ft.options,storage:Ft.storage},Ht=getExtensionField(Ft,"addAttributes",Ut);if(!Ht)return;const Kt=Ht();Object.entries(Kt).forEach(([Yt,Jt])=>{const Zt={...Dt,...Jt};typeof(Zt==null?void 0:Zt.default)=="function"&&(Zt.default=Zt.default()),Zt!=null&&Zt.isRequired&&(Zt==null?void 0:Zt.default)===void 0&&delete Zt.default,dt.push({type:Ft.name,name:Yt,attribute:Zt})})}),dt}function mergeAttributes(...et){return et.filter(dt=>!!dt).reduce((dt,$t)=>{const kt={...dt};return Object.entries($t).forEach(([Tt,Dt])=>{if(!kt[Tt]){kt[Tt]=Dt;return}if(Tt==="class"){const Ut=Dt?String(Dt).split(" "):[],Ht=kt[Tt]?kt[Tt].split(" "):[],Kt=Ut.filter(Yt=>!Ht.includes(Yt));kt[Tt]=[...Ht,...Kt].join(" ")}else if(Tt==="style"){const Ut=Dt?Dt.split(";").map(Yt=>Yt.trim()).filter(Boolean):[],Ht=kt[Tt]?kt[Tt].split(";").map(Yt=>Yt.trim()).filter(Boolean):[],Kt=new Map;Ht.forEach(Yt=>{const[Jt,Zt]=Yt.split(":").map(er=>er.trim());Kt.set(Jt,Zt)}),Ut.forEach(Yt=>{const[Jt,Zt]=Yt.split(":").map(er=>er.trim());Kt.set(Jt,Zt)}),kt[Tt]=Array.from(Kt.entries()).map(([Yt,Jt])=>`${Yt}: ${Jt}`).join("; ")}else kt[Tt]=Dt}),kt},{})}function getRenderedAttributes(et,dt){return dt.filter($t=>$t.type===et.type.name).filter($t=>$t.attribute.rendered).map($t=>$t.attribute.renderHTML?$t.attribute.renderHTML(et.attrs)||{}:{[$t.name]:et.attrs[$t.name]}).reduce(($t,kt)=>mergeAttributes($t,kt),{})}function fromString(et){return typeof et!="string"?et:et.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(et):et==="true"?!0:et==="false"?!1:et}function injectExtensionAttributesToParseRule(et,dt){return"style"in et?et:{...et,getAttrs:$t=>{const kt=et.getAttrs?et.getAttrs($t):et.attrs;if(kt===!1)return!1;const Tt=dt.reduce((Dt,Ft)=>{const Ut=Ft.attribute.parseHTML?Ft.attribute.parseHTML($t):fromString($t.getAttribute(Ft.name));return Ut==null?Dt:{...Dt,[Ft.name]:Ut}},{});return{...kt,...Tt}}}}function cleanUpSchemaItem(et){return Object.fromEntries(Object.entries(et).filter(([dt,$t])=>dt==="attrs"&&isEmptyObject($t)?!1:$t!=null))}function buildAttributeSpec(et){var dt,$t;const kt={};return!((dt=et==null?void 0:et.attribute)!=null&&dt.isRequired)&&"default"in((et==null?void 0:et.attribute)||{})&&(kt.default=et.attribute.default),(($t=et==null?void 0:et.attribute)==null?void 0:$t.validate)!==void 0&&(kt.validate=et.attribute.validate),[et.name,kt]}function getSchemaByResolvedExtensions(et,dt){var $t;const kt=getAttributesFromExtensions(et),{nodeExtensions:Tt,markExtensions:Dt}=splitExtensions(et),Ft=($t=Tt.find(Kt=>getExtensionField(Kt,"topNode")))==null?void 0:$t.name,Ut=Object.fromEntries(Tt.map(Kt=>{const Yt=kt.filter(ir=>ir.type===Kt.name),Jt={name:Kt.name,options:Kt.options,storage:Kt.storage,editor:dt},Zt=et.reduce((ir,or)=>{const lr=getExtensionField(or,"extendNodeSchema",Jt);return{...ir,...lr?lr(Kt):{}}},{}),er=cleanUpSchemaItem({...Zt,content:callOrReturn(getExtensionField(Kt,"content",Jt)),marks:callOrReturn(getExtensionField(Kt,"marks",Jt)),group:callOrReturn(getExtensionField(Kt,"group",Jt)),inline:callOrReturn(getExtensionField(Kt,"inline",Jt)),atom:callOrReturn(getExtensionField(Kt,"atom",Jt)),selectable:callOrReturn(getExtensionField(Kt,"selectable",Jt)),draggable:callOrReturn(getExtensionField(Kt,"draggable",Jt)),code:callOrReturn(getExtensionField(Kt,"code",Jt)),whitespace:callOrReturn(getExtensionField(Kt,"whitespace",Jt)),linebreakReplacement:callOrReturn(getExtensionField(Kt,"linebreakReplacement",Jt)),defining:callOrReturn(getExtensionField(Kt,"defining",Jt)),isolating:callOrReturn(getExtensionField(Kt,"isolating",Jt)),attrs:Object.fromEntries(Yt.map(buildAttributeSpec))}),rr=callOrReturn(getExtensionField(Kt,"parseHTML",Jt));rr&&(er.parseDOM=rr.map(ir=>injectExtensionAttributesToParseRule(ir,Yt)));const sr=getExtensionField(Kt,"renderHTML",Jt);sr&&(er.toDOM=ir=>sr({node:ir,HTMLAttributes:getRenderedAttributes(ir,Yt)}));const nr=getExtensionField(Kt,"renderText",Jt);return nr&&(er.toText=nr),[Kt.name,er]})),Ht=Object.fromEntries(Dt.map(Kt=>{const Yt=kt.filter(nr=>nr.type===Kt.name),Jt={name:Kt.name,options:Kt.options,storage:Kt.storage,editor:dt},Zt=et.reduce((nr,ir)=>{const or=getExtensionField(ir,"extendMarkSchema",Jt);return{...nr,...or?or(Kt):{}}},{}),er=cleanUpSchemaItem({...Zt,inclusive:callOrReturn(getExtensionField(Kt,"inclusive",Jt)),excludes:callOrReturn(getExtensionField(Kt,"excludes",Jt)),group:callOrReturn(getExtensionField(Kt,"group",Jt)),spanning:callOrReturn(getExtensionField(Kt,"spanning",Jt)),code:callOrReturn(getExtensionField(Kt,"code",Jt)),attrs:Object.fromEntries(Yt.map(buildAttributeSpec))}),rr=callOrReturn(getExtensionField(Kt,"parseHTML",Jt));rr&&(er.parseDOM=rr.map(nr=>injectExtensionAttributesToParseRule(nr,Yt)));const sr=getExtensionField(Kt,"renderHTML",Jt);return sr&&(er.toDOM=nr=>sr({mark:nr,HTMLAttributes:getRenderedAttributes(nr,Yt)})),[Kt.name,er]}));return new Schema({topNode:Ft,nodes:Ut,marks:Ht})}function findDuplicates(et){const dt=et.filter(($t,kt)=>et.indexOf($t)!==kt);return Array.from(new Set(dt))}function sortExtensions(et){return et.sort(($t,kt)=>{const Tt=getExtensionField($t,"priority")||100,Dt=getExtensionField(kt,"priority")||100;return Tt>Dt?-1:Tt<Dt?1:0})}function resolveExtensions(et){const dt=sortExtensions(flattenExtensions(et)),$t=findDuplicates(dt.map(kt=>kt.name));return $t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${$t.map(kt=>`'${kt}'`).join(", ")}]. This can lead to issues.`),dt}function getTextBetween(et,dt,$t){const{from:kt,to:Tt}=dt,{blockSeparator:Dt=`

`,textSerializers:Ft={}}=$t||{};let Ut="";return et.nodesBetween(kt,Tt,(Ht,Kt,Yt,Jt)=>{var Zt;Ht.isBlock&&Kt>kt&&(Ut+=Dt);const er=Ft==null?void 0:Ft[Ht.type.name];if(er)return Yt&&(Ut+=er({node:Ht,pos:Kt,parent:Yt,index:Jt,range:dt})),!1;Ht.isText&&(Ut+=(Zt=Ht==null?void 0:Ht.text)==null?void 0:Zt.slice(Math.max(kt,Kt)-Kt,Tt-Kt))}),Ut}function getText(et,dt){const $t={from:0,to:et.content.size};return getTextBetween(et,$t,dt)}function getTextSerializersFromSchema(et){return Object.fromEntries(Object.entries(et.nodes).filter(([,dt])=>dt.spec.toText).map(([dt,$t])=>[dt,$t.spec.toText]))}function getNodeAttributes(et,dt){const $t=getNodeType(dt,et.schema),{from:kt,to:Tt}=et.selection,Dt=[];et.doc.nodesBetween(kt,Tt,Ut=>{Dt.push(Ut)});const Ft=Dt.reverse().find(Ut=>Ut.type.name===$t.name);return Ft?{...Ft.attrs}:{}}function getAttributes$1(et,dt){const $t=getSchemaTypeNameByName(typeof dt=="string"?dt:dt.name,et.schema);return $t==="node"?getNodeAttributes(et,dt):$t==="mark"?getMarkAttributes(et,dt):{}}function removeDuplicates(et,dt=JSON.stringify){const $t={};return et.filter(kt=>{const Tt=dt(kt);return Object.prototype.hasOwnProperty.call($t,Tt)?!1:$t[Tt]=!0})}function simplifyChangedRanges(et){const dt=removeDuplicates(et);return dt.length===1?dt:dt.filter(($t,kt)=>!dt.filter((Dt,Ft)=>Ft!==kt).some(Dt=>$t.oldRange.from>=Dt.oldRange.from&&$t.oldRange.to<=Dt.oldRange.to&&$t.newRange.from>=Dt.newRange.from&&$t.newRange.to<=Dt.newRange.to))}function getChangedRanges(et){const{mapping:dt,steps:$t}=et,kt=[];return dt.maps.forEach((Tt,Dt)=>{const Ft=[];if(Tt.ranges.length)Tt.forEach((Ut,Ht)=>{Ft.push({from:Ut,to:Ht})});else{const{from:Ut,to:Ht}=$t[Dt];if(Ut===void 0||Ht===void 0)return;Ft.push({from:Ut,to:Ht})}Ft.forEach(({from:Ut,to:Ht})=>{const Kt=dt.slice(Dt).map(Ut,-1),Yt=dt.slice(Dt).map(Ht),Jt=dt.invert().map(Kt,-1),Zt=dt.invert().map(Yt);kt.push({oldRange:{from:Jt,to:Zt},newRange:{from:Kt,to:Yt}})})}),simplifyChangedRanges(kt)}function getMarksBetween(et,dt,$t){const kt=[];return et===dt?$t.resolve(et).marks().forEach(Tt=>{const Dt=$t.resolve(et),Ft=getMarkRange(Dt,Tt.type);Ft&&kt.push({mark:Tt,...Ft})}):$t.nodesBetween(et,dt,(Tt,Dt)=>{!Tt||(Tt==null?void 0:Tt.nodeSize)===void 0||kt.push(...Tt.marks.map(Ft=>({from:Dt,to:Dt+Tt.nodeSize,mark:Ft})))}),kt}var getNodeAtPosition=(et,dt,$t,kt=20)=>{const Tt=et.doc.resolve($t);let Dt=kt,Ft=null;for(;Dt>0&&Ft===null;){const Ut=Tt.node(Dt);(Ut==null?void 0:Ut.type.name)===dt?Ft=Ut:Dt-=1}return[Ft,Dt]};function getSchemaTypeByName(et,dt){return dt.nodes[et]||dt.marks[et]||null}function getSplittedAttributes(et,dt,$t){return Object.fromEntries(Object.entries($t).filter(([kt])=>{const Tt=et.find(Dt=>Dt.type===dt&&Dt.name===kt);return Tt?Tt.attribute.keepOnSplit:!1}))}var getTextContentFromNodes=(et,dt=500)=>{let $t="";const kt=et.parentOffset;return et.parent.nodesBetween(Math.max(0,kt-dt),kt,(Tt,Dt,Ft,Ut)=>{var Ht,Kt;const Yt=((Kt=(Ht=Tt.type.spec).toText)==null?void 0:Kt.call(Ht,{node:Tt,pos:Dt,parent:Ft,index:Ut}))||Tt.textContent||"%leaf%";$t+=Tt.isAtom&&!Tt.isText?Yt:Yt.slice(0,Math.max(0,kt-Dt))}),$t};function isMarkActive(et,dt,$t={}){const{empty:kt,ranges:Tt}=et.selection,Dt=dt?getMarkType(dt,et.schema):null;if(kt)return!!(et.storedMarks||et.selection.$from.marks()).filter(Jt=>Dt?Dt.name===Jt.type.name:!0).find(Jt=>objectIncludes(Jt.attrs,$t,{strict:!1}));let Ft=0;const Ut=[];if(Tt.forEach(({$from:Jt,$to:Zt})=>{const er=Jt.pos,rr=Zt.pos;et.doc.nodesBetween(er,rr,(sr,nr)=>{if(!sr.isText&&!sr.marks.length)return;const ir=Math.max(er,nr),or=Math.min(rr,nr+sr.nodeSize),lr=or-ir;Ft+=lr,Ut.push(...sr.marks.map(cr=>({mark:cr,from:ir,to:or})))})}),Ft===0)return!1;const Ht=Ut.filter(Jt=>Dt?Dt.name===Jt.mark.type.name:!0).filter(Jt=>objectIncludes(Jt.mark.attrs,$t,{strict:!1})).reduce((Jt,Zt)=>Jt+Zt.to-Zt.from,0),Kt=Ut.filter(Jt=>Dt?Jt.mark.type!==Dt&&Jt.mark.type.excludes(Dt):!0).reduce((Jt,Zt)=>Jt+Zt.to-Zt.from,0);return(Ht>0?Ht+Kt:Ht)>=Ft}function isActive(et,dt,$t={}){if(!dt)return isNodeActive(et,null,$t)||isMarkActive(et,null,$t);const kt=getSchemaTypeNameByName(dt,et.schema);return kt==="node"?isNodeActive(et,dt,$t):kt==="mark"?isMarkActive(et,dt,$t):!1}var isAtEndOfNode=(et,dt)=>{const{$from:$t,$to:kt,$anchor:Tt}=et.selection;if(dt){const Dt=findParentNode(Ut=>Ut.type.name===dt)(et.selection);if(!Dt)return!1;const Ft=et.doc.resolve(Dt.pos+1);return Tt.pos+1===Ft.end()}return!(kt.parentOffset<kt.parent.nodeSize-2||$t.pos!==kt.pos)},isAtStartOfNode=et=>{const{$from:dt,$to:$t}=et.selection;return!(dt.parentOffset>0||dt.pos!==$t.pos)};function isExtensionRulesEnabled(et,dt){return Array.isArray(dt)?dt.some($t=>(typeof $t=="string"?$t:$t.name)===et.name):dt}function isList(et,dt){const{nodeExtensions:$t}=splitExtensions(dt),kt=$t.find(Ft=>Ft.name===et);if(!kt)return!1;const Tt={name:kt.name,options:kt.options,storage:kt.storage},Dt=callOrReturn(getExtensionField(kt,"group",Tt));return typeof Dt!="string"?!1:Dt.split(" ").includes("list")}function isNodeEmpty(et,{checkChildren:dt=!0,ignoreWhitespace:$t=!1}={}){var kt;if($t){if(et.type.name==="hardBreak")return!0;if(et.isText)return/^\s*$/m.test((kt=et.text)!=null?kt:"")}if(et.isText)return!et.text;if(et.isAtom||et.isLeaf)return!1;if(et.content.childCount===0)return!0;if(dt){let Tt=!0;return et.content.forEach(Dt=>{Tt!==!1&&(isNodeEmpty(Dt,{ignoreWhitespace:$t,checkChildren:dt})||(Tt=!1))}),Tt}return!1}function isNodeSelection(et){return et instanceof NodeSelection}var MappablePosition=class iS{constructor(dt){this.position=dt}static fromJSON(dt){return new iS(dt.position)}toJSON(){return{position:this.position}}};function getUpdatedPosition(et,dt){const $t=dt.mapping.mapResult(et.position);return{position:new MappablePosition($t.pos),mapResult:$t}}function createMappablePosition(et){return new MappablePosition(et)}function canSetMark(et,dt,$t){var kt;const{selection:Tt}=dt;let Dt=null;if(isTextSelection(Tt)&&(Dt=Tt.$cursor),Dt){const Ut=(kt=et.storedMarks)!=null?kt:Dt.marks();return Dt.parent.type.allowsMarkType($t)&&(!!$t.isInSet(Ut)||!Ut.some(Kt=>Kt.type.excludes($t)))}const{ranges:Ft}=Tt;return Ft.some(({$from:Ut,$to:Ht})=>{let Kt=Ut.depth===0?et.doc.inlineContent&&et.doc.type.allowsMarkType($t):!1;return et.doc.nodesBetween(Ut.pos,Ht.pos,(Yt,Jt,Zt)=>{if(Kt)return!1;if(Yt.isInline){const er=!Zt||Zt.type.allowsMarkType($t),rr=!!$t.isInSet(Yt.marks)||!Yt.marks.some(sr=>sr.type.excludes($t));Kt=er&&rr}return!Kt}),Kt})}var setMark=(et,dt={})=>({tr:$t,state:kt,dispatch:Tt})=>{const{selection:Dt}=$t,{empty:Ft,ranges:Ut}=Dt,Ht=getMarkType(et,kt.schema);if(Tt)if(Ft){const Kt=getMarkAttributes(kt,Ht);$t.addStoredMark(Ht.create({...Kt,...dt}))}else Ut.forEach(Kt=>{const Yt=Kt.$from.pos,Jt=Kt.$to.pos;kt.doc.nodesBetween(Yt,Jt,(Zt,er)=>{const rr=Math.max(er,Yt),sr=Math.min(er+Zt.nodeSize,Jt);Zt.marks.find(ir=>ir.type===Ht)?Zt.marks.forEach(ir=>{Ht===ir.type&&$t.addMark(rr,sr,Ht.create({...ir.attrs,...dt}))}):$t.addMark(rr,sr,Ht.create(dt))})});return canSetMark(kt,$t,Ht)},setMeta=(et,dt)=>({tr:$t})=>($t.setMeta(et,dt),!0),setNode=(et,dt={})=>({state:$t,dispatch:kt,chain:Tt})=>{const Dt=getNodeType(et,$t.schema);let Ft;return $t.selection.$anchor.sameParent($t.selection.$head)&&(Ft=$t.selection.$anchor.parent.attrs),Dt.isTextblock?Tt().command(({commands:Ut})=>setBlockType(Dt,{...Ft,...dt})($t)?!0:Ut.clearNodes()).command(({state:Ut})=>setBlockType(Dt,{...Ft,...dt})(Ut,kt)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=et=>({tr:dt,dispatch:$t})=>{if($t){const{doc:kt}=dt,Tt=minMax(et,0,kt.content.size),Dt=NodeSelection.create(kt,Tt);dt.setSelection(Dt)}return!0},setTextDirection=(et,dt)=>({tr:$t,state:kt,dispatch:Tt})=>{const{selection:Dt}=kt;let Ft,Ut;return typeof dt=="number"?(Ft=dt,Ut=dt):dt&&"from"in dt&&"to"in dt?(Ft=dt.from,Ut=dt.to):(Ft=Dt.from,Ut=Dt.to),Tt&&$t.doc.nodesBetween(Ft,Ut,(Ht,Kt)=>{Ht.isText||$t.setNodeMarkup(Kt,void 0,{...Ht.attrs,dir:et})}),!0},setTextSelection=et=>({tr:dt,dispatch:$t})=>{if($t){const{doc:kt}=dt,{from:Tt,to:Dt}=typeof et=="number"?{from:et,to:et}:et,Ft=TextSelection.atStart(kt).from,Ut=TextSelection.atEnd(kt).to,Ht=minMax(Tt,Ft,Ut),Kt=minMax(Dt,Ft,Ut),Yt=TextSelection.create(kt,Ht,Kt);dt.setSelection(Yt)}return!0},sinkListItem=et=>({state:dt,dispatch:$t})=>{const kt=getNodeType(et,dt.schema);return sinkListItem$1(kt)(dt,$t)};function ensureMarks(et,dt){const $t=et.storedMarks||et.selection.$to.parentOffset&&et.selection.$from.marks();if($t){const kt=$t.filter(Tt=>dt==null?void 0:dt.includes(Tt.type.name));et.tr.ensureMarks(kt)}}var splitBlock=({keepMarks:et=!0}={})=>({tr:dt,state:$t,dispatch:kt,editor:Tt})=>{const{selection:Dt,doc:Ft}=dt,{$from:Ut,$to:Ht}=Dt,Kt=Tt.extensionManager.attributes,Yt=getSplittedAttributes(Kt,Ut.node().type.name,Ut.node().attrs);if(Dt instanceof NodeSelection&&Dt.node.isBlock)return!Ut.parentOffset||!canSplit(Ft,Ut.pos)?!1:(kt&&(et&&ensureMarks($t,Tt.extensionManager.splittableMarks),dt.split(Ut.pos).scrollIntoView()),!0);if(!Ut.parent.isBlock)return!1;const Jt=Ht.parentOffset===Ht.parent.content.size,Zt=Ut.depth===0?void 0:defaultBlockAt(Ut.node(-1).contentMatchAt(Ut.indexAfter(-1)));let er=Jt&&Zt?[{type:Zt,attrs:Yt}]:void 0,rr=canSplit(dt.doc,dt.mapping.map(Ut.pos),1,er);if(!er&&!rr&&canSplit(dt.doc,dt.mapping.map(Ut.pos),1,Zt?[{type:Zt}]:void 0)&&(rr=!0,er=Zt?[{type:Zt,attrs:Yt}]:void 0),kt){if(rr&&(Dt instanceof TextSelection&&dt.deleteSelection(),dt.split(dt.mapping.map(Ut.pos),1,er),Zt&&!Jt&&!Ut.parentOffset&&Ut.parent.type!==Zt)){const sr=dt.mapping.map(Ut.before()),nr=dt.doc.resolve(sr);Ut.node(-1).canReplaceWith(nr.index(),nr.index()+1,Zt)&&dt.setNodeMarkup(dt.mapping.map(Ut.before()),Zt)}et&&ensureMarks($t,Tt.extensionManager.splittableMarks),dt.scrollIntoView()}return rr},splitListItem=(et,dt={})=>({tr:$t,state:kt,dispatch:Tt,editor:Dt})=>{var Ft;const Ut=getNodeType(et,kt.schema),{$from:Ht,$to:Kt}=kt.selection,Yt=kt.selection.node;if(Yt&&Yt.isBlock||Ht.depth<2||!Ht.sameParent(Kt))return!1;const Jt=Ht.node(-1);if(Jt.type!==Ut)return!1;const Zt=Dt.extensionManager.attributes;if(Ht.parent.content.size===0&&Ht.node(-1).childCount===Ht.indexAfter(-1)){if(Ht.depth===2||Ht.node(-3).type!==Ut||Ht.index(-2)!==Ht.node(-2).childCount-1)return!1;if(Tt){let ir=Fragment.empty;const or=Ht.index(-1)?1:Ht.index(-2)?2:3;for(let mr=Ht.depth-or;mr>=Ht.depth-3;mr-=1)ir=Fragment.from(Ht.node(mr).copy(ir));const lr=Ht.indexAfter(-1)<Ht.node(-2).childCount?1:Ht.indexAfter(-2)<Ht.node(-3).childCount?2:3,cr={...getSplittedAttributes(Zt,Ht.node().type.name,Ht.node().attrs),...dt},dr=((Ft=Ut.contentMatch.defaultType)==null?void 0:Ft.createAndFill(cr))||void 0;ir=ir.append(Fragment.from(Ut.createAndFill(null,dr)||void 0));const ur=Ht.before(Ht.depth-(or-1));$t.replace(ur,Ht.after(-lr),new Slice(ir,4-or,0));let pr=-1;$t.doc.nodesBetween(ur,$t.doc.content.size,(mr,jr)=>{if(pr>-1)return!1;mr.isTextblock&&mr.content.size===0&&(pr=jr+1)}),pr>-1&&$t.setSelection(TextSelection.near($t.doc.resolve(pr))),$t.scrollIntoView()}return!0}const er=Kt.pos===Ht.end()?Jt.contentMatchAt(0).defaultType:null,rr={...getSplittedAttributes(Zt,Jt.type.name,Jt.attrs),...dt},sr={...getSplittedAttributes(Zt,Ht.node().type.name,Ht.node().attrs),...dt};$t.delete(Ht.pos,Kt.pos);const nr=er?[{type:Ut,attrs:rr},{type:er,attrs:sr}]:[{type:Ut,attrs:rr}];if(!canSplit($t.doc,Ht.pos,2))return!1;if(Tt){const{selection:ir,storedMarks:or}=kt,{splittableMarks:lr}=Dt.extensionManager,cr=or||ir.$to.parentOffset&&ir.$from.marks();if($t.split(Ht.pos,2,nr).scrollIntoView(),!cr||!Tt)return!0;const dr=cr.filter(ur=>lr.includes(ur.type.name));$t.ensureMarks(dr)}return!0},joinListBackwards=(et,dt)=>{const $t=findParentNode(Ft=>Ft.type===dt)(et.selection);if(!$t)return!0;const kt=et.doc.resolve(Math.max(0,$t.pos-1)).before($t.depth);if(kt===void 0)return!0;const Tt=et.doc.nodeAt(kt);return $t.node.type===(Tt==null?void 0:Tt.type)&&canJoin(et.doc,$t.pos)&&et.join($t.pos),!0},joinListForwards=(et,dt)=>{const $t=findParentNode(Ft=>Ft.type===dt)(et.selection);if(!$t)return!0;const kt=et.doc.resolve($t.start).after($t.depth);if(kt===void 0)return!0;const Tt=et.doc.nodeAt(kt);return $t.node.type===(Tt==null?void 0:Tt.type)&&canJoin(et.doc,kt)&&et.join(kt),!0},toggleList=(et,dt,$t,kt={})=>({editor:Tt,tr:Dt,state:Ft,dispatch:Ut,chain:Ht,commands:Kt,can:Yt})=>{const{extensions:Jt,splittableMarks:Zt}=Tt.extensionManager,er=getNodeType(et,Ft.schema),rr=getNodeType(dt,Ft.schema),{selection:sr,storedMarks:nr}=Ft,{$from:ir,$to:or}=sr,lr=ir.blockRange(or),cr=nr||sr.$to.parentOffset&&sr.$from.marks();if(!lr)return!1;const dr=findParentNode(ur=>isList(ur.type.name,Jt))(sr);if(lr.depth>=1&&dr&&lr.depth-dr.depth<=1){if(dr.node.type===er)return Kt.liftListItem(rr);if(isList(dr.node.type.name,Jt)&&er.validContent(dr.node.content)&&Ut)return Ht().command(()=>(Dt.setNodeMarkup(dr.pos,er),!0)).command(()=>joinListBackwards(Dt,er)).command(()=>joinListForwards(Dt,er)).run()}return!$t||!cr||!Ut?Ht().command(()=>Yt().wrapInList(er,kt)?!0:Kt.clearNodes()).wrapInList(er,kt).command(()=>joinListBackwards(Dt,er)).command(()=>joinListForwards(Dt,er)).run():Ht().command(()=>{const ur=Yt().wrapInList(er,kt),pr=cr.filter(mr=>Zt.includes(mr.type.name));return Dt.ensureMarks(pr),ur?!0:Kt.clearNodes()}).wrapInList(er,kt).command(()=>joinListBackwards(Dt,er)).command(()=>joinListForwards(Dt,er)).run()},toggleMark=(et,dt={},$t={})=>({state:kt,commands:Tt})=>{const{extendEmptyMarkRange:Dt=!1}=$t,Ft=getMarkType(et,kt.schema);return isMarkActive(kt,Ft,dt)?Tt.unsetMark(Ft,{extendEmptyMarkRange:Dt}):Tt.setMark(Ft,dt)},toggleNode=(et,dt,$t={})=>({state:kt,commands:Tt})=>{const Dt=getNodeType(et,kt.schema),Ft=getNodeType(dt,kt.schema),Ut=isNodeActive(kt,Dt,$t);let Ht;return kt.selection.$anchor.sameParent(kt.selection.$head)&&(Ht=kt.selection.$anchor.parent.attrs),Ut?Tt.setNode(Ft,Ht):Tt.setNode(Dt,{...Ht,...$t})},toggleWrap=(et,dt={})=>({state:$t,commands:kt})=>{const Tt=getNodeType(et,$t.schema);return isNodeActive($t,Tt,dt)?kt.lift(Tt):kt.wrapIn(Tt,dt)},undoInputRule=()=>({state:et,dispatch:dt})=>{const $t=et.plugins;for(let kt=0;kt<$t.length;kt+=1){const Tt=$t[kt];let Dt;if(Tt.spec.isInputRules&&(Dt=Tt.getState(et))){if(dt){const Ft=et.tr,Ut=Dt.transform;for(let Ht=Ut.steps.length-1;Ht>=0;Ht-=1)Ft.step(Ut.steps[Ht].invert(Ut.docs[Ht]));if(Dt.text){const Ht=Ft.doc.resolve(Dt.from).marks();Ft.replaceWith(Dt.from,Dt.to,et.schema.text(Dt.text,Ht))}else Ft.delete(Dt.from,Dt.to)}return!0}}return!1},unsetAllMarks=()=>({tr:et,dispatch:dt})=>{const{selection:$t}=et,{empty:kt,ranges:Tt}=$t;return kt||dt&&Tt.forEach(Dt=>{et.removeMark(Dt.$from.pos,Dt.$to.pos)}),!0},unsetMark=(et,dt={})=>({tr:$t,state:kt,dispatch:Tt})=>{var Dt;const{extendEmptyMarkRange:Ft=!1}=dt,{selection:Ut}=$t,Ht=getMarkType(et,kt.schema),{$from:Kt,empty:Yt,ranges:Jt}=Ut;if(!Tt)return!0;if(Yt&&Ft){let{from:Zt,to:er}=Ut;const rr=(Dt=Kt.marks().find(nr=>nr.type===Ht))==null?void 0:Dt.attrs,sr=getMarkRange(Kt,Ht,rr);sr&&(Zt=sr.from,er=sr.to),$t.removeMark(Zt,er,Ht)}else Jt.forEach(Zt=>{$t.removeMark(Zt.$from.pos,Zt.$to.pos,Ht)});return $t.removeStoredMark(Ht),!0},unsetTextDirection=et=>({tr:dt,state:$t,dispatch:kt})=>{const{selection:Tt}=$t;let Dt,Ft;return typeof et=="number"?(Dt=et,Ft=et):et&&"from"in et&&"to"in et?(Dt=et.from,Ft=et.to):(Dt=Tt.from,Ft=Tt.to),kt&&dt.doc.nodesBetween(Dt,Ft,(Ut,Ht)=>{if(Ut.isText)return;const Kt={...Ut.attrs};delete Kt.dir,dt.setNodeMarkup(Ht,void 0,Kt)}),!0},updateAttributes=(et,dt={})=>({tr:$t,state:kt,dispatch:Tt})=>{let Dt=null,Ft=null;const Ut=getSchemaTypeNameByName(typeof et=="string"?et:et.name,kt.schema);if(!Ut)return!1;Ut==="node"&&(Dt=getNodeType(et,kt.schema)),Ut==="mark"&&(Ft=getMarkType(et,kt.schema));let Ht=!1;return $t.selection.ranges.forEach(Kt=>{const Yt=Kt.$from.pos,Jt=Kt.$to.pos;let Zt,er,rr,sr;$t.selection.empty?kt.doc.nodesBetween(Yt,Jt,(nr,ir)=>{Dt&&Dt===nr.type&&(Ht=!0,rr=Math.max(ir,Yt),sr=Math.min(ir+nr.nodeSize,Jt),Zt=ir,er=nr)}):kt.doc.nodesBetween(Yt,Jt,(nr,ir)=>{ir<Yt&&Dt&&Dt===nr.type&&(Ht=!0,rr=Math.max(ir,Yt),sr=Math.min(ir+nr.nodeSize,Jt),Zt=ir,er=nr),ir>=Yt&&ir<=Jt&&(Dt&&Dt===nr.type&&(Ht=!0,Tt&&$t.setNodeMarkup(ir,void 0,{...nr.attrs,...dt})),Ft&&nr.marks.length&&nr.marks.forEach(or=>{if(Ft===or.type&&(Ht=!0,Tt)){const lr=Math.max(ir,Yt),cr=Math.min(ir+nr.nodeSize,Jt);$t.addMark(lr,cr,Ft.create({...or.attrs,...dt}))}}))}),er&&(Zt!==void 0&&Tt&&$t.setNodeMarkup(Zt,void 0,{...er.attrs,...dt}),Ft&&er.marks.length&&er.marks.forEach(nr=>{Ft===nr.type&&Tt&&$t.addMark(rr,sr,Ft.create({...nr.attrs,...dt}))}))}),Ht},wrapIn=(et,dt={})=>({state:$t,dispatch:kt})=>{const Tt=getNodeType(et,$t.schema);return wrapIn$1(Tt,dt)($t,kt)},wrapInList=(et,dt={})=>({state:$t,dispatch:kt})=>{const Tt=getNodeType(et,$t.schema);return wrapInList$1(Tt,dt)($t,kt)},EventEmitter=class{constructor(){this.callbacks={}}on(et,dt){return this.callbacks[et]||(this.callbacks[et]=[]),this.callbacks[et].push(dt),this}emit(et,...dt){const $t=this.callbacks[et];return $t&&$t.forEach(kt=>kt.apply(this,dt)),this}off(et,dt){const $t=this.callbacks[et];return $t&&(dt?this.callbacks[et]=$t.filter(kt=>kt!==dt):delete this.callbacks[et]),this}once(et,dt){const $t=(...kt)=>{this.off(et,$t),dt.apply(this,kt)};return this.on(et,$t)}removeAllListeners(){this.callbacks={}}},InputRule=class{constructor(et){var dt;this.find=et.find,this.handler=et.handler,this.undoable=(dt=et.undoable)!=null?dt:!0}},inputRuleMatcherHandler=(et,dt)=>{if(isRegExp(dt))return dt.exec(et);const $t=dt(et);if(!$t)return null;const kt=[$t.text];return kt.index=$t.index,kt.input=et,kt.data=$t.data,$t.replaceWith&&($t.text.includes($t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),kt.push($t.replaceWith)),kt};function run$2(et){var dt;const{editor:$t,from:kt,to:Tt,text:Dt,rules:Ft,plugin:Ut}=et,{view:Ht}=$t;if(Ht.composing)return!1;const Kt=Ht.state.doc.resolve(kt);if(Kt.parent.type.spec.code||(dt=Kt.nodeBefore||Kt.nodeAfter)!=null&&dt.marks.find(Zt=>Zt.type.spec.code))return!1;let Yt=!1;const Jt=getTextContentFromNodes(Kt)+Dt;return Ft.forEach(Zt=>{if(Yt)return;const er=inputRuleMatcherHandler(Jt,Zt.find);if(!er)return;const rr=Ht.state.tr,sr=createChainableState({state:Ht.state,transaction:rr}),nr={from:kt-(er[0].length-Dt.length),to:Tt},{commands:ir,chain:or,can:lr}=new CommandManager$1({editor:$t,state:sr});Zt.handler({state:sr,range:nr,match:er,commands:ir,chain:or,can:lr})===null||!rr.steps.length||(Zt.undoable&&rr.setMeta(Ut,{transform:rr,from:kt,to:Tt,text:Dt}),Ht.dispatch(rr),Yt=!0)}),Yt}function inputRulesPlugin(et){const{editor:dt,rules:$t}=et,kt=new Plugin({state:{init(){return null},apply(Tt,Dt,Ft){const Ut=Tt.getMeta(kt);if(Ut)return Ut;const Ht=Tt.getMeta("applyInputRules");return!!Ht&&setTimeout(()=>{let{text:Yt}=Ht;typeof Yt=="string"?Yt=Yt:Yt=getHTMLFromFragment(Fragment.from(Yt),Ft.schema);const{from:Jt}=Ht,Zt=Jt+Yt.length;run$2({editor:dt,from:Jt,to:Zt,text:Yt,rules:$t,plugin:kt})}),Tt.selectionSet||Tt.docChanged?null:Dt}},props:{handleTextInput(Tt,Dt,Ft,Ut){return run$2({editor:dt,from:Dt,to:Ft,text:Ut,rules:$t,plugin:kt})},handleDOMEvents:{compositionend:Tt=>(setTimeout(()=>{const{$cursor:Dt}=Tt.state.selection;Dt&&run$2({editor:dt,from:Dt.pos,to:Dt.pos,text:"",rules:$t,plugin:kt})}),!1)},handleKeyDown(Tt,Dt){if(Dt.key!=="Enter")return!1;const{$cursor:Ft}=Tt.state.selection;return Ft?run$2({editor:dt,from:Ft.pos,to:Ft.pos,text:`
`,rules:$t,plugin:kt}):!1}},isInputRules:!0});return kt}function getType(et){return Object.prototype.toString.call(et).slice(8,-1)}function isPlainObject$3(et){return getType(et)!=="Object"?!1:et.constructor===Object&&Object.getPrototypeOf(et)===Object.prototype}function mergeDeep(et,dt){const $t={...et};return isPlainObject$3(et)&&isPlainObject$3(dt)&&Object.keys(dt).forEach(kt=>{isPlainObject$3(dt[kt])&&isPlainObject$3(et[kt])?$t[kt]=mergeDeep(et[kt],dt[kt]):$t[kt]=dt[kt]}),$t}var Extendable=class{constructor(et={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...et},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(et={}){const dt=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,et)});return dt.name=this.name,dt.parent=this.parent,dt}extend(et={}){const dt=new this.constructor({...this.config,...et});return dt.parent=this,this.child=dt,dt.name="name"in et?et.name:dt.parent.name,dt}},Mark=class aS extends Extendable{constructor(){super(...arguments),this.type="mark"}static create(dt={}){const $t=typeof dt=="function"?dt():dt;return new aS($t)}static handleExit({editor:dt,mark:$t}){const{tr:kt}=dt.state,Tt=dt.state.selection.$from;if(Tt.pos===Tt.end()){const Ft=Tt.marks();if(!!!Ft.find(Kt=>(Kt==null?void 0:Kt.type.name)===$t.name))return!1;const Ht=Ft.find(Kt=>(Kt==null?void 0:Kt.type.name)===$t.name);return Ht&&kt.removeStoredMark(Ht),kt.insertText(" ",Tt.pos),dt.view.dispatch(kt),!0}return!1}configure(dt){return super.configure(dt)}extend(dt){const $t=typeof dt=="function"?dt():dt;return super.extend($t)}};function isNumber$1(et){return typeof et=="number"}var PasteRule=class{constructor(et){this.find=et.find,this.handler=et.handler}},pasteRuleMatcherHandler=(et,dt,$t)=>{if(isRegExp(dt))return[...et.matchAll(dt)];const kt=dt(et,$t);return kt?kt.map(Tt=>{const Dt=[Tt.text];return Dt.index=Tt.index,Dt.input=et,Dt.data=Tt.data,Tt.replaceWith&&(Tt.text.includes(Tt.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),Dt.push(Tt.replaceWith)),Dt}):[]};function run2(et){const{editor:dt,state:$t,from:kt,to:Tt,rule:Dt,pasteEvent:Ft,dropEvent:Ut}=et,{commands:Ht,chain:Kt,can:Yt}=new CommandManager$1({editor:dt,state:$t}),Jt=[];return $t.doc.nodesBetween(kt,Tt,(er,rr)=>{var sr,nr,ir,or,lr;if((nr=(sr=er.type)==null?void 0:sr.spec)!=null&&nr.code||!(er.isText||er.isTextblock||er.isInline))return;const cr=(lr=(or=(ir=er.content)==null?void 0:ir.size)!=null?or:er.nodeSize)!=null?lr:0,dr=Math.max(kt,rr),ur=Math.min(Tt,rr+cr);if(dr>=ur)return;const pr=er.isText?er.text||"":er.textBetween(dr-rr,ur-rr,void 0,"");pasteRuleMatcherHandler(pr,Dt.find,Ft).forEach(jr=>{if(jr.index===void 0)return;const Rr=dr+jr.index+1,xr=Rr+jr[0].length,kr={from:$t.tr.mapping.map(Rr),to:$t.tr.mapping.map(xr)},Mr=Dt.handler({state:$t,range:kr,match:jr,commands:Ht,chain:Kt,can:Yt,pasteEvent:Ft,dropEvent:Ut});Jt.push(Mr)})}),Jt.every(er=>er!==null)}var tiptapDragFromOtherEditor=null,createClipboardPasteEvent=et=>{var dt;const $t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(dt=$t.clipboardData)==null||dt.setData("text/html",et),$t};function pasteRulesPlugin(et){const{editor:dt,rules:$t}=et;let kt=null,Tt=!1,Dt=!1,Ft=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Ut;try{Ut=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{Ut=null}const Ht=({state:Yt,from:Jt,to:Zt,rule:er,pasteEvt:rr})=>{const sr=Yt.tr,nr=createChainableState({state:Yt,transaction:sr});if(!(!run2({editor:dt,state:nr,from:Math.max(Jt-1,0),to:Zt.b-1,rule:er,pasteEvent:rr,dropEvent:Ut})||!sr.steps.length)){try{Ut=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{Ut=null}return Ft=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,sr}};return $t.map(Yt=>new Plugin({view(Jt){const Zt=rr=>{var sr;kt=(sr=Jt.dom.parentElement)!=null&&sr.contains(rr.target)?Jt.dom.parentElement:null,kt&&(tiptapDragFromOtherEditor=dt)},er=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",Zt),window.addEventListener("dragend",er),{destroy(){window.removeEventListener("dragstart",Zt),window.removeEventListener("dragend",er)}}},props:{handleDOMEvents:{drop:(Jt,Zt)=>{if(Dt=kt===Jt.dom.parentElement,Ut=Zt,!Dt){const er=tiptapDragFromOtherEditor;er!=null&&er.isEditable&&setTimeout(()=>{const rr=er.state.selection;rr&&er.commands.deleteRange({from:rr.from,to:rr.to})},10)}return!1},paste:(Jt,Zt)=>{var er;const rr=(er=Zt.clipboardData)==null?void 0:er.getData("text/html");return Ft=Zt,Tt=!!(rr!=null&&rr.includes("data-pm-slice")),!1}}},appendTransaction:(Jt,Zt,er)=>{const rr=Jt[0],sr=rr.getMeta("uiEvent")==="paste"&&!Tt,nr=rr.getMeta("uiEvent")==="drop"&&!Dt,ir=rr.getMeta("applyPasteRules"),or=!!ir;if(!sr&&!nr&&!or)return;if(or){let{text:dr}=ir;typeof dr=="string"?dr=dr:dr=getHTMLFromFragment(Fragment.from(dr),er.schema);const{from:ur}=ir,pr=ur+dr.length,mr=createClipboardPasteEvent(dr);return Ht({rule:Yt,state:er,from:ur,to:{b:pr},pasteEvt:mr})}const lr=Zt.doc.content.findDiffStart(er.doc.content),cr=Zt.doc.content.findDiffEnd(er.doc.content);if(!(!isNumber$1(lr)||!cr||lr===cr.b))return Ht({rule:Yt,state:er,from:lr,to:cr,pasteEvt:Ft})}}))}var ExtensionManager=class{constructor(et,dt){this.splittableMarks=[],this.editor=dt,this.baseExtensions=et,this.extensions=resolveExtensions(et),this.schema=getSchemaByResolvedExtensions(this.extensions,dt),this.setupExtensions()}get commands(){return this.extensions.reduce((et,dt)=>{const $t={name:dt.name,options:dt.options,storage:this.editor.extensionStorage[dt.name],editor:this.editor,type:getSchemaTypeByName(dt.name,this.schema)},kt=getExtensionField(dt,"addCommands",$t);return kt?{...et,...kt()}:et},{})}get plugins(){const{editor:et}=this;return sortExtensions([...this.extensions].reverse()).flatMap(kt=>{const Tt={name:kt.name,options:kt.options,storage:this.editor.extensionStorage[kt.name],editor:et,type:getSchemaTypeByName(kt.name,this.schema)},Dt=[],Ft=getExtensionField(kt,"addKeyboardShortcuts",Tt);let Ut={};if(kt.type==="mark"&&getExtensionField(kt,"exitable",Tt)&&(Ut.ArrowRight=()=>Mark.handleExit({editor:et,mark:kt})),Ft){const Zt=Object.fromEntries(Object.entries(Ft()).map(([er,rr])=>[er,()=>rr({editor:et})]));Ut={...Ut,...Zt}}const Ht=keymap(Ut);Dt.push(Ht);const Kt=getExtensionField(kt,"addInputRules",Tt);if(isExtensionRulesEnabled(kt,et.options.enableInputRules)&&Kt){const Zt=Kt();if(Zt&&Zt.length){const er=inputRulesPlugin({editor:et,rules:Zt}),rr=Array.isArray(er)?er:[er];Dt.push(...rr)}}const Yt=getExtensionField(kt,"addPasteRules",Tt);if(isExtensionRulesEnabled(kt,et.options.enablePasteRules)&&Yt){const Zt=Yt();if(Zt&&Zt.length){const er=pasteRulesPlugin({editor:et,rules:Zt});Dt.push(...er)}}const Jt=getExtensionField(kt,"addProseMirrorPlugins",Tt);if(Jt){const Zt=Jt();Dt.push(...Zt)}return Dt})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:et}=this,{nodeExtensions:dt}=splitExtensions(this.extensions);return Object.fromEntries(dt.filter($t=>!!getExtensionField($t,"addNodeView")).map($t=>{const kt=this.attributes.filter(Ht=>Ht.type===$t.name),Tt={name:$t.name,options:$t.options,storage:this.editor.extensionStorage[$t.name],editor:et,type:getNodeType($t.name,this.schema)},Dt=getExtensionField($t,"addNodeView",Tt);if(!Dt)return[];const Ft=Dt();if(!Ft)return[];const Ut=(Ht,Kt,Yt,Jt,Zt)=>{const er=getRenderedAttributes(Ht,kt);return Ft({node:Ht,view:Kt,getPos:Yt,decorations:Jt,innerDecorations:Zt,editor:et,extension:$t,HTMLAttributes:er})};return[$t.name,Ut]}))}dispatchTransaction(et){const{editor:dt}=this;return sortExtensions([...this.extensions].reverse()).reduceRight((kt,Tt)=>{const Dt={name:Tt.name,options:Tt.options,storage:this.editor.extensionStorage[Tt.name],editor:dt,type:getSchemaTypeByName(Tt.name,this.schema)},Ft=getExtensionField(Tt,"dispatchTransaction",Dt);return Ft?Ut=>{Ft.call(Dt,{transaction:Ut,next:kt})}:kt},et)}get markViews(){const{editor:et}=this,{markExtensions:dt}=splitExtensions(this.extensions);return Object.fromEntries(dt.filter($t=>!!getExtensionField($t,"addMarkView")).map($t=>{const kt=this.attributes.filter(Ut=>Ut.type===$t.name),Tt={name:$t.name,options:$t.options,storage:this.editor.extensionStorage[$t.name],editor:et,type:getMarkType($t.name,this.schema)},Dt=getExtensionField($t,"addMarkView",Tt);if(!Dt)return[];const Ft=(Ut,Ht,Kt)=>{const Yt=getRenderedAttributes(Ut,kt);return Dt()({mark:Ut,view:Ht,inline:Kt,editor:et,extension:$t,HTMLAttributes:Yt,updateAttributes:Jt=>{updateMarkViewAttributes(Ut,et,Jt)}})};return[$t.name,Ft]}))}setupExtensions(){const et=this.extensions;this.editor.extensionStorage=Object.fromEntries(et.map(dt=>[dt.name,dt.storage])),et.forEach(dt=>{var $t;const kt={name:dt.name,options:dt.options,storage:this.editor.extensionStorage[dt.name],editor:this.editor,type:getSchemaTypeByName(dt.name,this.schema)};dt.type==="mark"&&(($t=callOrReturn(getExtensionField(dt,"keepOnSplit",kt)))==null||$t)&&this.splittableMarks.push(dt.name);const Tt=getExtensionField(dt,"onBeforeCreate",kt),Dt=getExtensionField(dt,"onCreate",kt),Ft=getExtensionField(dt,"onUpdate",kt),Ut=getExtensionField(dt,"onSelectionUpdate",kt),Ht=getExtensionField(dt,"onTransaction",kt),Kt=getExtensionField(dt,"onFocus",kt),Yt=getExtensionField(dt,"onBlur",kt),Jt=getExtensionField(dt,"onDestroy",kt);Tt&&this.editor.on("beforeCreate",Tt),Dt&&this.editor.on("create",Dt),Ft&&this.editor.on("update",Ft),Ut&&this.editor.on("selectionUpdate",Ut),Ht&&this.editor.on("transaction",Ht),Kt&&this.editor.on("focus",Kt),Yt&&this.editor.on("blur",Yt),Jt&&this.editor.on("destroy",Jt)})}};ExtensionManager.resolve=resolveExtensions;ExtensionManager.sort=sortExtensions;ExtensionManager.flatten=flattenExtensions;var extensions_exports={};__export$7(extensions_exports,{ClipboardTextSerializer:()=>ClipboardTextSerializer,Commands:()=>Commands,Delete:()=>Delete,Drop:()=>Drop,Editable:()=>Editable,FocusEvents:()=>FocusEvents,Keymap:()=>Keymap,Paste:()=>Paste,Tabindex:()=>Tabindex,TextDirection:()=>TextDirection,focusEventsPluginKey:()=>focusEventsPluginKey});var Extension=class oS extends Extendable{constructor(){super(...arguments),this.type="extension"}static create(dt={}){const $t=typeof dt=="function"?dt():dt;return new oS($t)}configure(dt){return super.configure(dt)}extend(dt){const $t=typeof dt=="function"?dt():dt;return super.extend($t)}},ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:et}=this,{state:dt,schema:$t}=et,{doc:kt,selection:Tt}=dt,{ranges:Dt}=Tt,Ft=Math.min(...Dt.map(Yt=>Yt.$from.pos)),Ut=Math.max(...Dt.map(Yt=>Yt.$to.pos)),Ht=getTextSerializersFromSchema($t);return getTextBetween(kt,{from:Ft,to:Ut},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:Ht})}}})]}}),Commands=Extension.create({name:"commands",addCommands(){return{...commands_exports}}}),Delete=Extension.create({name:"delete",onUpdate({transaction:et,appendedTransactions:dt}){var $t,kt,Tt;const Dt=()=>{var Ft,Ut,Ht,Kt;if((Kt=(Ht=(Ut=(Ft=this.editor.options.coreExtensionOptions)==null?void 0:Ft.delete)==null?void 0:Ut.filterTransaction)==null?void 0:Ht.call(Ut,et))!=null?Kt:et.getMeta("y-sync$"))return;const Yt=combineTransactionSteps(et.before,[et,...dt]);getChangedRanges(Yt).forEach(er=>{Yt.mapping.mapResult(er.oldRange.from).deletedAfter&&Yt.mapping.mapResult(er.oldRange.to).deletedBefore&&Yt.before.nodesBetween(er.oldRange.from,er.oldRange.to,(rr,sr)=>{const nr=sr+rr.nodeSize-2,ir=er.oldRange.from<=sr&&nr<=er.oldRange.to;this.editor.emit("delete",{type:"node",node:rr,from:sr,to:nr,newFrom:Yt.mapping.map(sr),newTo:Yt.mapping.map(nr),deletedRange:er.oldRange,newRange:er.newRange,partial:!ir,editor:this.editor,transaction:et,combinedTransform:Yt})})});const Zt=Yt.mapping;Yt.steps.forEach((er,rr)=>{var sr,nr;if(er instanceof RemoveMarkStep){const ir=Zt.slice(rr).map(er.from,-1),or=Zt.slice(rr).map(er.to),lr=Zt.invert().map(ir,-1),cr=Zt.invert().map(or),dr=(sr=Yt.doc.nodeAt(ir-1))==null?void 0:sr.marks.some(pr=>pr.eq(er.mark)),ur=(nr=Yt.doc.nodeAt(or))==null?void 0:nr.marks.some(pr=>pr.eq(er.mark));this.editor.emit("delete",{type:"mark",mark:er.mark,from:er.from,to:er.to,deletedRange:{from:lr,to:cr},newRange:{from:ir,to:or},partial:!!(ur||dr),editor:this.editor,transaction:et,combinedTransform:Yt})}})};(Tt=(kt=($t=this.editor.options.coreExtensionOptions)==null?void 0:$t.delete)==null?void 0:kt.async)==null||Tt?setTimeout(Dt,0):Dt()}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(et,dt,$t,kt)=>{this.editor.emit("drop",{editor:this.editor,event:dt,slice:$t,moved:kt})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:et}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(dt,$t)=>{et.isFocused=!0;const kt=et.state.tr.setMeta("focus",{event:$t}).setMeta("addToHistory",!1);return dt.dispatch(kt),!1},blur:(dt,$t)=>{et.isFocused=!1;const kt=et.state.tr.setMeta("blur",{event:$t}).setMeta("addToHistory",!1);return dt.dispatch(kt),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const et=()=>this.editor.commands.first(({commands:Ft})=>[()=>Ft.undoInputRule(),()=>Ft.command(({tr:Ut})=>{const{selection:Ht,doc:Kt}=Ut,{empty:Yt,$anchor:Jt}=Ht,{pos:Zt,parent:er}=Jt,rr=Jt.parent.isTextblock&&Zt>0?Ut.doc.resolve(Zt-1):Jt,sr=rr.parent.type.spec.isolating,nr=Jt.pos-Jt.parentOffset,ir=sr&&rr.parent.childCount===1?nr===Jt.pos:Selection.atStart(Kt).from===Zt;return!Yt||!er.type.isTextblock||er.textContent.length||!ir||ir&&Jt.parent.type.name==="paragraph"?!1:Ft.clearNodes()}),()=>Ft.deleteSelection(),()=>Ft.joinBackward(),()=>Ft.selectNodeBackward()]),dt=()=>this.editor.commands.first(({commands:Ft})=>[()=>Ft.deleteSelection(),()=>Ft.deleteCurrentNode(),()=>Ft.joinForward(),()=>Ft.selectNodeForward()]),kt={Enter:()=>this.editor.commands.first(({commands:Ft})=>[()=>Ft.newlineInCode(),()=>Ft.createParagraphNear(),()=>Ft.liftEmptyBlock(),()=>Ft.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:et,"Mod-Backspace":et,"Shift-Backspace":et,Delete:dt,"Mod-Delete":dt,"Mod-a":()=>this.editor.commands.selectAll()},Tt={...kt},Dt={...kt,"Ctrl-h":et,"Alt-Backspace":et,"Ctrl-d":dt,"Ctrl-Alt-Backspace":dt,"Alt-Delete":dt,"Alt-d":dt,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?Dt:Tt},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(et,dt,$t)=>{if(et.some(sr=>sr.getMeta("composition")))return;const kt=et.some(sr=>sr.docChanged)&&!dt.doc.eq($t.doc),Tt=et.some(sr=>sr.getMeta("preventClearDocument"));if(!kt||Tt)return;const{empty:Dt,from:Ft,to:Ut}=dt.selection,Ht=Selection.atStart(dt.doc).from,Kt=Selection.atEnd(dt.doc).to;if(Dt||!(Ft===Ht&&Ut===Kt)||!isNodeEmpty($t.doc))return;const Zt=$t.tr,er=createChainableState({state:$t,transaction:Zt}),{commands:rr}=new CommandManager$1({editor:this.editor,state:er});if(rr.clearNodes(),!!Zt.steps.length)return Zt}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(et,dt,$t)=>{this.editor.emit("paste",{editor:this.editor,event:dt,slice:$t})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),TextDirection=Extension.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:et}=splitExtensions(this.extensions);return[{types:et.filter(dt=>dt.name!=="text").map(dt=>dt.name),attributes:{dir:{default:this.options.direction,parseHTML:dt=>{const $t=dt.getAttribute("dir");return $t&&($t==="ltr"||$t==="rtl"||$t==="auto")?$t:this.options.direction},renderHTML:dt=>dt.dir?{dir:dt.dir}:{}}}}]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("textDirection"),props:{attributes:()=>{const et=this.options.direction;return et?{dir:et}:{}}}})]}}),NodePos=class c0{constructor(dt,$t,kt=!1,Tt=null){this.currentNode=null,this.actualDepth=null,this.isBlock=kt,this.resolvedPos=dt,this.editor=$t,this.currentNode=Tt}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var dt;return(dt=this.actualDepth)!=null?dt:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(dt){let $t=this.from,kt=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}$t=this.from+1,kt=this.to-1}this.editor.commands.insertContentAt({from:$t,to:kt},dt)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const dt=this.resolvedPos.start(this.resolvedPos.depth-1),$t=this.resolvedPos.doc.resolve(dt);return new c0($t,this.editor)}get before(){let dt=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return dt.depth!==this.depth&&(dt=this.resolvedPos.doc.resolve(this.from-3)),new c0(dt,this.editor)}get after(){let dt=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return dt.depth!==this.depth&&(dt=this.resolvedPos.doc.resolve(this.to+3)),new c0(dt,this.editor)}get children(){const dt=[];return this.node.content.forEach(($t,kt)=>{const Tt=$t.isBlock&&!$t.isTextblock,Dt=$t.isAtom&&!$t.isText,Ft=this.pos+kt+(Dt?0:1);if(Ft<0||Ft>this.resolvedPos.doc.nodeSize-2)return;const Ut=this.resolvedPos.doc.resolve(Ft);if(!Tt&&Ut.depth<=this.depth)return;const Ht=new c0(Ut,this.editor,Tt,Tt?$t:null);Tt&&(Ht.actualDepth=this.depth+1),dt.push(new c0(Ut,this.editor,Tt,Tt?$t:null))}),dt}get firstChild(){return this.children[0]||null}get lastChild(){const dt=this.children;return dt[dt.length-1]||null}closest(dt,$t={}){let kt=null,Tt=this.parent;for(;Tt&&!kt;){if(Tt.node.type.name===dt)if(Object.keys($t).length>0){const Dt=Tt.node.attrs,Ft=Object.keys($t);for(let Ut=0;Ut<Ft.length;Ut+=1){const Ht=Ft[Ut];if(Dt[Ht]!==$t[Ht])break}}else kt=Tt;Tt=Tt.parent}return kt}querySelector(dt,$t={}){return this.querySelectorAll(dt,$t,!0)[0]||null}querySelectorAll(dt,$t={},kt=!1){let Tt=[];if(!this.children||this.children.length===0)return Tt;const Dt=Object.keys($t);return this.children.forEach(Ft=>{kt&&Tt.length>0||(Ft.node.type.name===dt&&Dt.every(Ht=>$t[Ht]===Ft.node.attrs[Ht])&&Tt.push(Ft),!(kt&&Tt.length>0)&&(Tt=Tt.concat(Ft.querySelectorAll(dt,$t,kt))))}),Tt}setAttribute(dt){const{tr:$t}=this.editor.state;$t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...dt}),this.editor.view.dispatch($t)}},style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function createStyleTag(et,dt,$t){const kt=document.querySelector(`style[data-tiptap-style${$t?`-${$t}`:""}]`);if(kt!==null)return kt;const Tt=document.createElement("style");return dt&&Tt.setAttribute("nonce",dt),Tt.setAttribute(`data-tiptap-style${$t?`-${$t}`:""}`,""),Tt.innerHTML=et,document.getElementsByTagName("head")[0].appendChild(Tt),Tt}var Editor=class extends EventEmitter{constructor(et={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:kt})=>{throw kt},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition,createMappablePosition},this.setOptions(et),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:kt,slice:Tt,moved:Dt})=>this.options.onDrop(kt,Tt,Dt)),this.on("paste",({event:kt,slice:Tt})=>this.options.onPaste(kt,Tt)),this.on("delete",this.options.onDelete);const dt=this.createDoc(),$t=resolveFocusPosition(dt,this.options.autofocus);this.editorState=EditorState.create({doc:dt,schema:this.schema,selection:$t||void 0}),this.options.element&&this.mount(this.options.element)}mount(et){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(et),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const et=this.editorView.dom;et!=null&&et.editor&&delete et.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(et){console.warn("Failed to remove CSS element:",et)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(et={}){this.options={...this.options,...et},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(et,dt=!0){this.setOptions({editable:et}),dt&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:et=>{this.editorState=et},dispatch:et=>{this.dispatchTransaction(et)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(et,dt)=>{if(this.editorView)return this.editorView[dt];if(dt==="state")return this.editorState;if(dt in et)return Reflect.get(et,dt);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${dt}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(et,dt){const $t=isFunction$4(dt)?dt(et,[...this.state.plugins]):[...this.state.plugins,et],kt=this.state.reconfigure({plugins:$t});return this.view.updateState(kt),kt}unregisterPlugin(et){if(this.isDestroyed)return;const dt=this.state.plugins;let $t=dt;if([].concat(et).forEach(Tt=>{const Dt=typeof Tt=="string"?`${Tt}$`:Tt.key;$t=$t.filter(Ft=>!Ft.key.startsWith(Dt))}),dt.length===$t.length)return;const kt=this.state.reconfigure({plugins:$t});return this.view.updateState(kt),kt}createExtensionManager(){var et,dt;const kt=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(dt=(et=this.options.coreExtensionOptions)==null?void 0:et.clipboardTextSerializer)==null?void 0:dt.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste,Delete,TextDirection.configure({direction:this.options.textDirection})].filter(Tt=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[Tt.name]!==!1:!0):[],...this.options.extensions].filter(Tt=>["extension","node","mark"].includes(Tt==null?void 0:Tt.type));this.extensionManager=new ExtensionManager(kt,this)}createCommandManager(){this.commandManager=new CommandManager$1({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let et;try{et=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(dt){if(!(dt instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(dt.message))throw dt;this.emit("contentError",{editor:this,error:dt,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter($t=>$t.name!=="collaboration"),this.createExtensionManager()}}),et=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return et}createView(et){const{editorProps:dt,enableExtensionDispatchTransaction:$t}=this.options,kt=dt.dispatchTransaction||this.dispatchTransaction.bind(this),Tt=$t?this.extensionManager.dispatchTransaction(kt):kt;this.editorView=new EditorView(et,{...dt,attributes:{role:"textbox",...dt==null?void 0:dt.attributes},dispatchTransaction:Tt,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const Dt=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(Dt),this.prependClass(),this.injectCSS();const Ft=this.view.dom;Ft.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(et){this.isCapturingTransaction=!0,et(),this.isCapturingTransaction=!1;const dt=this.capturedTransaction;return this.capturedTransaction=null,dt}dispatchTransaction(et){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=et;return}et.steps.forEach(Kt=>{var Yt;return(Yt=this.capturedTransaction)==null?void 0:Yt.step(Kt)});return}const{state:dt,transactions:$t}=this.state.applyTransaction(et),kt=!this.state.selection.eq(dt.selection),Tt=$t.includes(et),Dt=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:et,nextState:dt}),!Tt)return;this.view.updateState(dt),this.emit("transaction",{editor:this,transaction:et,appendedTransactions:$t.slice(1)}),kt&&this.emit("selectionUpdate",{editor:this,transaction:et});const Ft=$t.findLast(Kt=>Kt.getMeta("focus")||Kt.getMeta("blur")),Ut=Ft==null?void 0:Ft.getMeta("focus"),Ht=Ft==null?void 0:Ft.getMeta("blur");Ut&&this.emit("focus",{editor:this,event:Ut.event,transaction:Ft}),Ht&&this.emit("blur",{editor:this,event:Ht.event,transaction:Ft}),!(et.getMeta("preventUpdate")||!$t.some(Kt=>Kt.docChanged)||Dt.doc.eq(dt.doc))&&this.emit("update",{editor:this,transaction:et,appendedTransactions:$t.slice(1)})}getAttributes(et){return getAttributes$1(this.state,et)}isActive(et,dt){const $t=typeof et=="string"?et:null,kt=typeof et=="string"?dt:et;return isActive(this.state,$t,kt)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(et){const{blockSeparator:dt=`

`,textSerializers:$t={}}=et||{};return getText(this.state.doc,{blockSeparator:dt,textSerializers:{...getTextSerializersFromSchema(this.schema),...$t}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var et,dt;return(dt=(et=this.editorView)==null?void 0:et.isDestroyed)!=null?dt:!0}$node(et,dt){var $t;return(($t=this.$doc)==null?void 0:$t.querySelector(et,dt))||null}$nodes(et,dt){var $t;return(($t=this.$doc)==null?void 0:$t.querySelectorAll(et,dt))||null}$pos(et){const dt=this.state.doc.resolve(et);return new NodePos(dt,this)}get $doc(){return this.$pos(0)}};function markInputRule(et){return new InputRule({find:et.find,handler:({state:dt,range:$t,match:kt})=>{const Tt=callOrReturn(et.getAttributes,void 0,kt);if(Tt===!1||Tt===null)return null;const{tr:Dt}=dt,Ft=kt[kt.length-1],Ut=kt[0];if(Ft){const Ht=Ut.search(/\S/),Kt=$t.from+Ut.indexOf(Ft),Yt=Kt+Ft.length;if(getMarksBetween($t.from,$t.to,dt.doc).filter(er=>er.mark.type.excluded.find(sr=>sr===et.type&&sr!==er.mark.type)).filter(er=>er.to>Kt).length)return null;Yt<$t.to&&Dt.delete(Yt,$t.to),Kt>$t.from&&Dt.delete($t.from+Ht,Kt);const Zt=$t.from+Ht+Ft.length;Dt.addMark($t.from+Ht,Zt,et.type.create(Tt||{})),Dt.removeStoredMark(et.type)}},undoable:et.undoable})}function nodeInputRule(et){return new InputRule({find:et.find,handler:({state:dt,range:$t,match:kt})=>{const Tt=callOrReturn(et.getAttributes,void 0,kt)||{},{tr:Dt}=dt,Ft=$t.from;let Ut=$t.to;const Ht=et.type.create(Tt);if(kt[1]){const Kt=kt[0].lastIndexOf(kt[1]);let Yt=Ft+Kt;Yt>Ut?Yt=Ut:Ut=Yt+kt[1].length;const Jt=kt[0][kt[0].length-1];Dt.insertText(Jt,Ft+kt[0].length-1),Dt.replaceWith(Yt,Ut,Ht)}else if(kt[0]){const Kt=et.type.isInline?Ft:Ft-1;Dt.insert(Kt,et.type.create(Tt)).delete(Dt.mapping.map(Ft),Dt.mapping.map(Ut))}Dt.scrollIntoView()},undoable:et.undoable})}function textblockTypeInputRule(et){return new InputRule({find:et.find,handler:({state:dt,range:$t,match:kt})=>{const Tt=dt.doc.resolve($t.from),Dt=callOrReturn(et.getAttributes,void 0,kt)||{};if(!Tt.node(-1).canReplaceWith(Tt.index(-1),Tt.indexAfter(-1),et.type))return null;dt.tr.delete($t.from,$t.to).setBlockType($t.from,$t.from,et.type,Dt)},undoable:et.undoable})}function wrappingInputRule(et){return new InputRule({find:et.find,handler:({state:dt,range:$t,match:kt,chain:Tt})=>{const Dt=callOrReturn(et.getAttributes,void 0,kt)||{},Ft=dt.tr.delete($t.from,$t.to),Ht=Ft.doc.resolve($t.from).blockRange(),Kt=Ht&&findWrapping(Ht,et.type,Dt);if(!Kt)return null;if(Ft.wrap(Ht,Kt),et.keepMarks&&et.editor){const{selection:Jt,storedMarks:Zt}=dt,{splittableMarks:er}=et.editor.extensionManager,rr=Zt||Jt.$to.parentOffset&&Jt.$from.marks();if(rr){const sr=rr.filter(nr=>er.includes(nr.type.name));Ft.ensureMarks(sr)}}if(et.keepAttributes){const Jt=et.type.name==="bulletList"||et.type.name==="orderedList"?"listItem":"taskList";Tt().updateAttributes(Jt,Dt).run()}const Yt=Ft.doc.resolve($t.from-1).nodeBefore;Yt&&Yt.type===et.type&&canJoin(Ft.doc,$t.from-1)&&(!et.joinPredicate||et.joinPredicate(kt,Yt))&&Ft.join($t.from-1)},undoable:et.undoable})}var isTouchEvent$1=et=>"touches"in et,ResizableNodeView=class{constructor(et){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=Ut=>{if(!this.isResizing||!this.activeHandle)return;const Ht=Ut.clientX-this.startX,Kt=Ut.clientY-this.startY;this.handleResize(Ht,Kt)},this.handleTouchMove=Ut=>{if(!this.isResizing||!this.activeHandle)return;const Ht=Ut.touches[0];if(!Ht)return;const Kt=Ht.clientX-this.startX,Yt=Ht.clientY-this.startY;this.handleResize(Kt,Yt)},this.handleMouseUp=()=>{if(!this.isResizing)return;const Ut=this.element.offsetWidth,Ht=this.element.offsetHeight;this.onCommit(Ut,Ht),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=Ut=>{Ut.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=Ut=>{Ut.key==="Shift"&&(this.isShiftKeyPressed=!1)};var dt,$t,kt,Tt,Dt,Ft;this.node=et.node,this.editor=et.editor,this.element=et.element,this.contentElement=et.contentElement,this.getPos=et.getPos,this.onResize=et.onResize,this.onCommit=et.onCommit,this.onUpdate=et.onUpdate,(dt=et.options)!=null&&dt.min&&(this.minSize={...this.minSize,...et.options.min}),($t=et.options)!=null&&$t.max&&(this.maxSize=et.options.max),(kt=et==null?void 0:et.options)!=null&&kt.directions&&(this.directions=et.options.directions),(Tt=et.options)!=null&&Tt.preserveAspectRatio&&(this.preserveAspectRatio=et.options.preserveAspectRatio),(Dt=et.options)!=null&&Dt.className&&(this.classNames={container:et.options.className.container||"",wrapper:et.options.className.wrapper||"",handle:et.options.className.handle||"",resizing:et.options.className.resizing||""}),(Ft=et.options)!=null&&Ft.createCustomHandle&&(this.createCustomHandle=et.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const et=this.editor.isEditable;et!==this.lastEditableState&&(this.lastEditableState=et,et?et&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(et,dt,$t){return et.type!==this.node.type?!1:(this.node=et,this.onUpdate?this.onUpdate(et,dt,$t):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const et=document.createElement("div");return et.dataset.resizeContainer="",et.dataset.node=this.node.type.name,et.style.display="flex",this.classNames.container&&(et.className=this.classNames.container),et.appendChild(this.wrapper),et}createWrapper(){const et=document.createElement("div");return et.style.position="relative",et.style.display="block",et.dataset.resizeWrapper="",this.classNames.wrapper&&(et.className=this.classNames.wrapper),et.appendChild(this.element),et}createHandle(et){const dt=document.createElement("div");return dt.dataset.resizeHandle=et,dt.style.position="absolute",this.classNames.handle&&(dt.className=this.classNames.handle),dt}positionHandle(et,dt){const $t=dt.includes("top"),kt=dt.includes("bottom"),Tt=dt.includes("left"),Dt=dt.includes("right");$t&&(et.style.top="0"),kt&&(et.style.bottom="0"),Tt&&(et.style.left="0"),Dt&&(et.style.right="0"),(dt==="top"||dt==="bottom")&&(et.style.left="0",et.style.right="0"),(dt==="left"||dt==="right")&&(et.style.top="0",et.style.bottom="0")}attachHandles(){this.directions.forEach(et=>{let dt;this.createCustomHandle?dt=this.createCustomHandle(et):dt=this.createHandle(et),dt instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${et}") did not return an HTMLElement. Falling back to default handle.`),dt=this.createHandle(et)),this.createCustomHandle||this.positionHandle(dt,et),dt.addEventListener("mousedown",$t=>this.handleResizeStart($t,et)),dt.addEventListener("touchstart",$t=>this.handleResizeStart($t,et)),this.handleMap.set(et,dt),this.wrapper.appendChild(dt)})}removeHandles(){this.handleMap.forEach(et=>et.remove()),this.handleMap.clear()}applyInitialSize(){const et=this.node.attrs.width,dt=this.node.attrs.height;et?(this.element.style.width=`${et}px`,this.initialWidth=et):this.initialWidth=this.element.offsetWidth,dt?(this.element.style.height=`${dt}px`,this.initialHeight=dt):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(et,dt){et.preventDefault(),et.stopPropagation(),this.isResizing=!0,this.activeHandle=dt,isTouchEvent$1(et)?(this.startX=et.touches[0].clientX,this.startY=et.touches[0].clientY):(this.startX=et.clientX,this.startY=et.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(et,dt){if(!this.activeHandle)return;const $t=this.preserveAspectRatio||this.isShiftKeyPressed,{width:kt,height:Tt}=this.calculateNewDimensions(this.activeHandle,et,dt),Dt=this.applyConstraints(kt,Tt,$t);this.element.style.width=`${Dt.width}px`,this.element.style.height=`${Dt.height}px`,this.onResize&&this.onResize(Dt.width,Dt.height)}calculateNewDimensions(et,dt,$t){let kt=this.startWidth,Tt=this.startHeight;const Dt=et.includes("right"),Ft=et.includes("left"),Ut=et.includes("bottom"),Ht=et.includes("top");return Dt?kt=this.startWidth+dt:Ft&&(kt=this.startWidth-dt),Ut?Tt=this.startHeight+$t:Ht&&(Tt=this.startHeight-$t),(et==="right"||et==="left")&&(kt=this.startWidth+(Dt?dt:-dt)),(et==="top"||et==="bottom")&&(Tt=this.startHeight+(Ut?$t:-$t)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(kt,Tt,et):{width:kt,height:Tt}}applyConstraints(et,dt,$t){var kt,Tt,Dt,Ft;if(!$t){let Kt=Math.max(this.minSize.width,et),Yt=Math.max(this.minSize.height,dt);return(kt=this.maxSize)!=null&&kt.width&&(Kt=Math.min(this.maxSize.width,Kt)),(Tt=this.maxSize)!=null&&Tt.height&&(Yt=Math.min(this.maxSize.height,Yt)),{width:Kt,height:Yt}}let Ut=et,Ht=dt;return Ut<this.minSize.width&&(Ut=this.minSize.width,Ht=Ut/this.aspectRatio),Ht<this.minSize.height&&(Ht=this.minSize.height,Ut=Ht*this.aspectRatio),(Dt=this.maxSize)!=null&&Dt.width&&Ut>this.maxSize.width&&(Ut=this.maxSize.width,Ht=Ut/this.aspectRatio),(Ft=this.maxSize)!=null&&Ft.height&&Ht>this.maxSize.height&&(Ht=this.maxSize.height,Ut=Ht*this.aspectRatio),{width:Ut,height:Ht}}applyAspectRatio(et,dt,$t){const kt=$t==="left"||$t==="right",Tt=$t==="top"||$t==="bottom";return kt?{width:et,height:et/this.aspectRatio}:Tt?{width:dt*this.aspectRatio,height:dt}:{width:et,height:et/this.aspectRatio}}};function canInsertNode(et,dt){const{selection:$t}=et,{$from:kt}=$t;if($t instanceof NodeSelection){const Dt=kt.index();return kt.parent.canReplaceWith(Dt,Dt+1,dt)}let Tt=kt.depth;for(;Tt>=0;){const Dt=kt.index(Tt);if(kt.node(Tt).contentMatchAt(Dt).matchType(dt))return!0;Tt-=1}return!1}var markdown_exports={};__export$7(markdown_exports,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});function parseAttributes(et){if(!(et!=null&&et.trim()))return{};const dt={},$t=[],kt=et.replace(/["']([^"']*)["']/g,Kt=>($t.push(Kt),`__QUOTED_${$t.length-1}__`)),Tt=kt.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(Tt){const Kt=Tt.map(Yt=>Yt.trim().slice(1));dt.class=Kt.join(" ")}const Dt=kt.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);Dt&&(dt.id=Dt[1]);const Ft=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(kt.matchAll(Ft)).forEach(([,Kt,Yt])=>{var Jt;const Zt=parseInt(((Jt=Yt.match(/__QUOTED_(\d+)__/))==null?void 0:Jt[1])||"0",10),er=$t[Zt];er&&(dt[Kt]=er.slice(1,-1))});const Ht=kt.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return Ht&&Ht.split(/\s+/).filter(Boolean).forEach(Yt=>{Yt.match(/^[a-zA-Z][\w-]*$/)&&(dt[Yt]=!0)}),dt}function serializeAttributes(et){if(!et||Object.keys(et).length===0)return"";const dt=[];return et.class&&String(et.class).split(/\s+/).filter(Boolean).forEach(kt=>dt.push(`.${kt}`)),et.id&&dt.push(`#${et.id}`),Object.entries(et).forEach(([$t,kt])=>{$t==="class"||$t==="id"||(kt===!0?dt.push($t):kt!==!1&&kt!=null&&dt.push(`${$t}="${String(kt)}"`))}),dt.join(" ")}function createAtomBlockMarkdownSpec(et){const{nodeName:dt,name:$t,parseAttributes:kt=parseAttributes,serializeAttributes:Tt=serializeAttributes,defaultAttributes:Dt={},requiredAttributes:Ft=[],allowedAttributes:Ut}=et,Ht=$t||dt,Kt=Yt=>{if(!Ut)return Yt;const Jt={};return Ut.forEach(Zt=>{Zt in Yt&&(Jt[Zt]=Yt[Zt])}),Jt};return{parseMarkdown:(Yt,Jt)=>{const Zt={...Dt,...Yt.attributes};return Jt.createNode(dt,Zt,[])},markdownTokenizer:{name:dt,level:"block",start(Yt){var Jt;const Zt=new RegExp(`^:::${Ht}(?:\\s|$)`,"m"),er=(Jt=Yt.match(Zt))==null?void 0:Jt.index;return er!==void 0?er:-1},tokenize(Yt,Jt,Zt){const er=new RegExp(`^:::${Ht}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),rr=Yt.match(er);if(!rr)return;const sr=rr[1]||"",nr=kt(sr);if(!Ft.find(or=>!(or in nr)))return{type:dt,raw:rr[0],attributes:nr}}},renderMarkdown:Yt=>{const Jt=Kt(Yt.attrs||{}),Zt=Tt(Jt),er=Zt?` {${Zt}}`:"";return`:::${Ht}${er} :::`}}}function createBlockMarkdownSpec(et){const{nodeName:dt,name:$t,getContent:kt,parseAttributes:Tt=parseAttributes,serializeAttributes:Dt=serializeAttributes,defaultAttributes:Ft={},content:Ut="block",allowedAttributes:Ht}=et,Kt=$t||dt,Yt=Jt=>{if(!Ht)return Jt;const Zt={};return Ht.forEach(er=>{er in Jt&&(Zt[er]=Jt[er])}),Zt};return{parseMarkdown:(Jt,Zt)=>{let er;if(kt){const sr=kt(Jt);er=typeof sr=="string"?[{type:"text",text:sr}]:sr}else Ut==="block"?er=Zt.parseChildren(Jt.tokens||[]):er=Zt.parseInline(Jt.tokens||[]);const rr={...Ft,...Jt.attributes};return Zt.createNode(dt,rr,er)},markdownTokenizer:{name:dt,level:"block",start(Jt){var Zt;const er=new RegExp(`^:::${Kt}`,"m"),rr=(Zt=Jt.match(er))==null?void 0:Zt.index;return rr!==void 0?rr:-1},tokenize(Jt,Zt,er){var rr;const sr=new RegExp(`^:::${Kt}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),nr=Jt.match(sr);if(!nr)return;const[ir,or=""]=nr,lr=Tt(or);let cr=1;const dr=ir.length;let ur="";const pr=/^:::([\w-]*)(\s.*)?/gm,mr=Jt.slice(dr);for(pr.lastIndex=0;;){const jr=pr.exec(mr);if(jr===null)break;const Rr=jr.index,xr=jr[1];if(!((rr=jr[2])!=null&&rr.endsWith(":::"))){if(xr)cr+=1;else if(cr-=1,cr===0){const kr=mr.slice(0,Rr);ur=kr.trim();const Mr=Jt.slice(0,dr+Rr+jr[0].length);let Tr=[];if(ur)if(Ut==="block")for(Tr=er.blockTokens(kr),Tr.forEach(Or=>{Or.text&&(!Or.tokens||Or.tokens.length===0)&&(Or.tokens=er.inlineTokens(Or.text))});Tr.length>0;){const Or=Tr[Tr.length-1];if(Or.type==="paragraph"&&(!Or.text||Or.text.trim()===""))Tr.pop();else break}else Tr=er.inlineTokens(ur);return{type:dt,raw:Mr,attributes:lr,content:ur,tokens:Tr}}}}}},renderMarkdown:(Jt,Zt)=>{const er=Yt(Jt.attrs||{}),rr=Dt(er),sr=rr?` {${rr}}`:"",nr=Zt.renderChildren(Jt.content||[],`

`);return`:::${Kt}${sr}

${nr}

:::`}}}function parseShortcodeAttributes(et){if(!et.trim())return{};const dt={},$t=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let kt=$t.exec(et);for(;kt!==null;){const[,Tt,Dt,Ft]=kt;dt[Tt]=Dt||Ft,kt=$t.exec(et)}return dt}function serializeShortcodeAttributes(et){return Object.entries(et).filter(([,dt])=>dt!=null).map(([dt,$t])=>`${dt}="${$t}"`).join(" ")}function createInlineMarkdownSpec(et){const{nodeName:dt,name:$t,getContent:kt,parseAttributes:Tt=parseShortcodeAttributes,serializeAttributes:Dt=serializeShortcodeAttributes,defaultAttributes:Ft={},selfClosing:Ut=!1,allowedAttributes:Ht}=et,Kt=$t||dt,Yt=Zt=>{if(!Ht)return Zt;const er={};return Ht.forEach(rr=>{const sr=typeof rr=="string"?rr:rr.name,nr=typeof rr=="string"?void 0:rr.skipIfDefault;if(sr in Zt){const ir=Zt[sr];if(nr!==void 0&&ir===nr)return;er[sr]=ir}}),er},Jt=Kt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(Zt,er)=>{const rr={...Ft,...Zt.attributes};if(Ut)return er.createNode(dt,rr);const sr=kt?kt(Zt):Zt.content||"";return sr?er.createNode(dt,rr,[er.createTextNode(sr)]):er.createNode(dt,rr,[])},markdownTokenizer:{name:dt,level:"inline",start(Zt){const er=Ut?new RegExp(`\\[${Jt}\\s*[^\\]]*\\]`):new RegExp(`\\[${Jt}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${Jt}\\]`),rr=Zt.match(er),sr=rr==null?void 0:rr.index;return sr!==void 0?sr:-1},tokenize(Zt,er,rr){const sr=Ut?new RegExp(`^\\[${Jt}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${Jt}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${Jt}\\]`),nr=Zt.match(sr);if(!nr)return;let ir="",or="";if(Ut){const[,cr]=nr;or=cr}else{const[,cr,dr]=nr;or=cr,ir=dr||""}const lr=Tt(or.trim());return{type:dt,raw:nr[0],content:ir.trim(),attributes:lr}}},renderMarkdown:Zt=>{let er="";kt?er=kt(Zt):Zt.content&&Zt.content.length>0&&(er=Zt.content.filter(ir=>ir.type==="text").map(ir=>ir.text).join(""));const rr=Yt(Zt.attrs||{}),sr=Dt(rr),nr=sr?` ${sr}`:"";return Ut?`[${Kt}${nr}]`:`[${Kt}${nr}]${er}[/${Kt}]`}}}function parseIndentedBlocks(et,dt,$t){var kt,Tt,Dt,Ft;const Ut=et.split(`
`),Ht=[];let Kt="",Yt=0;const Jt=dt.baseIndentSize||2;for(;Yt<Ut.length;){const Zt=Ut[Yt],er=Zt.match(dt.itemPattern);if(!er){if(Ht.length>0)break;if(Zt.trim()===""){Yt+=1,Kt=`${Kt}${Zt}
`;continue}else return}const rr=dt.extractItemData(er),{indentLevel:sr,mainContent:nr}=rr;Kt=`${Kt}${Zt}
`;const ir=[nr];for(Yt+=1;Yt<Ut.length;){const dr=Ut[Yt];if(dr.trim()===""){const pr=Ut.slice(Yt+1).findIndex(Rr=>Rr.trim()!=="");if(pr===-1)break;if((((Tt=(kt=Ut[Yt+1+pr].match(/^(\s*)/))==null?void 0:kt[1])==null?void 0:Tt.length)||0)>sr){ir.push(dr),Kt=`${Kt}${dr}
`,Yt+=1;continue}else break}if((((Ft=(Dt=dr.match(/^(\s*)/))==null?void 0:Dt[1])==null?void 0:Ft.length)||0)>sr)ir.push(dr),Kt=`${Kt}${dr}
`,Yt+=1;else break}let or;const lr=ir.slice(1);if(lr.length>0){const dr=lr.map(ur=>ur.slice(sr+Jt)).join(`
`);dr.trim()&&(dt.customNestedParser?or=dt.customNestedParser(dr):or=$t.blockTokens(dr))}const cr=dt.createToken(rr,or);Ht.push(cr)}if(Ht.length!==0)return{items:Ht,raw:Kt}}function renderNestedMarkdownContent(et,dt,$t,kt){if(!et||!Array.isArray(et.content))return"";const Tt=typeof $t=="function"?$t(kt):$t,[Dt,...Ft]=et.content,Ut=dt.renderChildren([Dt]),Ht=[`${Tt}${Ut}`];return Ft&&Ft.length>0&&Ft.forEach(Kt=>{const Yt=dt.renderChildren([Kt]);if(Yt){const Jt=Yt.split(`
`).map(Zt=>Zt?dt.indent(Zt):"").join(`
`);Ht.push(Jt)}}),Ht.join(`
`)}function updateMarkViewAttributes(et,dt,$t={}){const{state:kt}=dt,{doc:Tt,tr:Dt}=kt,Ft=et;Tt.descendants((Ut,Ht)=>{const Kt=Dt.mapping.map(Ht),Yt=Dt.mapping.map(Ht)+Ut.nodeSize;let Jt=null;if(Ut.marks.forEach(er=>{if(er!==Ft)return!1;Jt=er}),!Jt)return;let Zt=!1;if(Object.keys($t).forEach(er=>{$t[er]!==Jt.attrs[er]&&(Zt=!0)}),Zt){const er=et.type.create({...et.attrs,...$t});Dt.removeMark(Kt,Yt,et.type),Dt.addMark(Kt,Yt,er)}}),Dt.docChanged&&dt.view.dispatch(Dt)}var Node3=class lS extends Extendable{constructor(){super(...arguments),this.type="node"}static create(dt={}){const $t=typeof dt=="function"?dt():dt;return new lS($t)}configure(dt){return super.configure(dt)}extend(dt){const $t=typeof dt=="function"?dt():dt;return super.extend($t)}};function markPasteRule(et){return new PasteRule({find:et.find,handler:({state:dt,range:$t,match:kt,pasteEvent:Tt})=>{const Dt=callOrReturn(et.getAttributes,void 0,kt,Tt);if(Dt===!1||Dt===null)return null;const{tr:Ft}=dt,Ut=kt[kt.length-1],Ht=kt[0];let Kt=$t.to;if(Ut){const Yt=Ht.search(/\S/),Jt=$t.from+Ht.indexOf(Ut),Zt=Jt+Ut.length;if(getMarksBetween($t.from,$t.to,dt.doc).filter(rr=>rr.mark.type.excluded.find(nr=>nr===et.type&&nr!==rr.mark.type)).filter(rr=>rr.to>Jt).length)return null;Zt<$t.to&&Ft.delete(Zt,$t.to),Jt>$t.from&&Ft.delete($t.from+Yt,Jt),Kt=$t.from+Yt+Ut.length,Ft.addMark($t.from+Yt,Kt,et.type.create(Dt||{})),Ft.removeStoredMark(et.type)}}})}function nodePasteRule(et){return new PasteRule({find:et.find,handler({match:dt,chain:$t,range:kt,pasteEvent:Tt}){const Dt=callOrReturn(et.getAttributes,void 0,dt,Tt),Ft=callOrReturn(et.getContent,void 0,Dt);if(Dt===!1||Dt===null)return null;const Ut={type:et.type.name,attrs:Dt};Ft&&(Ut.content=Ft),dt.input&&$t().deleteRange(kt).insertContentAt(kt.from,Ut)}})}var react=function et(dt,$t){if(dt===$t)return!0;if(dt&&$t&&typeof dt=="object"&&typeof $t=="object"){if(dt.constructor!==$t.constructor)return!1;var kt,Tt,Dt;if(Array.isArray(dt)){if(kt=dt.length,kt!=$t.length)return!1;for(Tt=kt;Tt--!==0;)if(!et(dt[Tt],$t[Tt]))return!1;return!0}if(dt instanceof Map&&$t instanceof Map){if(dt.size!==$t.size)return!1;for(Tt of dt.entries())if(!$t.has(Tt[0]))return!1;for(Tt of dt.entries())if(!et(Tt[1],$t.get(Tt[0])))return!1;return!0}if(dt instanceof Set&&$t instanceof Set){if(dt.size!==$t.size)return!1;for(Tt of dt.entries())if(!$t.has(Tt[0]))return!1;return!0}if(ArrayBuffer.isView(dt)&&ArrayBuffer.isView($t)){if(kt=dt.length,kt!=$t.length)return!1;for(Tt=kt;Tt--!==0;)if(dt[Tt]!==$t[Tt])return!1;return!0}if(dt.constructor===RegExp)return dt.source===$t.source&&dt.flags===$t.flags;if(dt.valueOf!==Object.prototype.valueOf)return dt.valueOf()===$t.valueOf();if(dt.toString!==Object.prototype.toString)return dt.toString()===$t.toString();if(Dt=Object.keys(dt),kt=Dt.length,kt!==Object.keys($t).length)return!1;for(Tt=kt;Tt--!==0;)if(!Object.prototype.hasOwnProperty.call($t,Dt[Tt]))return!1;for(Tt=kt;Tt--!==0;){var Ft=Dt[Tt];if(!(Ft==="_owner"&&dt.$$typeof)&&!et(dt[Ft],$t[Ft]))return!1}return!0}return dt!==dt&&$t!==$t};const deepEqual=getDefaultExportFromCjs(react);var withSelector={exports:{}},withSelector_production={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is$6(et,dt){return et===dt&&(et!==0||1/et===1/dt)||et!==et&&dt!==dt}var objectIs=typeof Object.is=="function"?Object.is:is$6,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(et,dt,$t,kt,Tt){var Dt=useRef(null);if(Dt.current===null){var Ft={hasValue:!1,value:null};Dt.current=Ft}else Ft=Dt.current;Dt=useMemo(function(){function Ht(er){if(!Kt){if(Kt=!0,Yt=er,er=kt(er),Tt!==void 0&&Ft.hasValue){var rr=Ft.value;if(Tt(rr,er))return Jt=rr}return Jt=er}if(rr=Jt,objectIs(Yt,er))return rr;var sr=kt(er);return Tt!==void 0&&Tt(rr,sr)?(Yt=er,rr):(Yt=er,Jt=sr)}var Kt=!1,Yt,Jt,Zt=$t===void 0?null:$t;return[function(){return Ht(dt())},Zt===null?void 0:function(){return Ht(Zt())}]},[dt,$t,kt,Tt]);var Ut=useSyncExternalStore(et,Dt[0],Dt[1]);return useEffect(function(){Ft.hasValue=!0,Ft.value=Ut},[Ut]),useDebugValue(Ut),Ut};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports,mergeRefs$1=(...et)=>dt=>{et.forEach($t=>{typeof $t=="function"?$t(dt):$t&&($t.current=dt)})},Portals=({contentComponent:et})=>{const dt=shimExports.useSyncExternalStore(et.subscribe,et.getSnapshot,et.getServerSnapshot);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Object.values(dt)})};function getInstance(){const et=new Set;let dt={};return{subscribe($t){return et.add($t),()=>{et.delete($t)}},getSnapshot(){return dt},getServerSnapshot(){return dt},setRenderer($t,kt){dt={...dt,[$t]:ReactDOM.createPortal(kt.reactElement,kt.element,$t)},et.forEach(Tt=>Tt())},removeRenderer($t){const kt={...dt};delete kt[$t],dt=kt,et.forEach(Tt=>Tt())}}}var PureEditorContent=class extends React$2.Component{constructor(et){var dt;super(et),this.editorContentRef=React$2.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((dt=et.editor)!=null&&dt.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const et=this.props.editor;if(et&&!et.isDestroyed&&et.options.element){if(et.contentComponent)return;const dt=this.editorContentRef.current;dt.append(et.view.dom),et.setOptions({element:dt}),et.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=et.contentComponent.subscribe(()=>{this.setState($t=>$t.hasContentComponentInitialized?$t:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),et.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var et;const dt=this.props.editor;if(dt){this.initialized=!1,dt.isDestroyed||dt.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),dt.contentComponent=null;try{if(!((et=dt.view.dom)!=null&&et.firstChild))return;const $t=document.createElement("div");$t.append(dt.view.dom),dt.setOptions({element:$t})}catch{}}}render(){const{editor:et,innerRef:dt,...$t}=this.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:mergeRefs$1(dt,this.editorContentRef),...$t}),(et==null?void 0:et.contentComponent)&&jsxRuntimeExports.jsx(Portals,{contentComponent:et.contentComponent})]})}},EditorContentWithKey=reactExports.forwardRef((et,dt)=>{const $t=React$2.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[et.editor]);return React$2.createElement(PureEditorContent,{key:$t,innerRef:dt,...et})}),EditorContent=React$2.memo(EditorContentWithKey),useIsomorphicLayoutEffect$7=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,EditorStateManager=class{constructor(et){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=et,this.lastSnapshot={editor:et,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(et){return this.subscribers.add(et),()=>{this.subscribers.delete(et)}}watch(et){if(this.editor=et,this.editor){const dt=()=>{this.transactionNumber+=1,this.subscribers.forEach(kt=>kt())},$t=this.editor;return $t.on("transaction",dt),()=>{$t.off("transaction",dt)}}}};function useEditorState(et){var dt;const[$t]=reactExports.useState(()=>new EditorStateManager(et.editor)),kt=withSelectorExports.useSyncExternalStoreWithSelector($t.subscribe,$t.getSnapshot,$t.getServerSnapshot,et.selector,(dt=et.equalityFn)!=null?dt:deepEqual);return useIsomorphicLayoutEffect$7(()=>$t.watch(et.editor),[et.editor,$t]),reactExports.useDebugValue(kt),kt}var isDev=!1,isSSR$6=typeof window>"u",isNext=isSSR$6||!!(typeof window<"u"&&window.next),EditorInstanceManager=class cS{constructor(dt){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=dt,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(dt){this.editor=dt,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach($t=>$t())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR$6||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR$6&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const dt={...this.options.current,onBeforeCreate:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onBeforeCreate)==null?void 0:Dt.call(Tt,...kt)},onBlur:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onBlur)==null?void 0:Dt.call(Tt,...kt)},onCreate:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onCreate)==null?void 0:Dt.call(Tt,...kt)},onDestroy:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onDestroy)==null?void 0:Dt.call(Tt,...kt)},onFocus:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onFocus)==null?void 0:Dt.call(Tt,...kt)},onSelectionUpdate:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onSelectionUpdate)==null?void 0:Dt.call(Tt,...kt)},onTransaction:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onTransaction)==null?void 0:Dt.call(Tt,...kt)},onUpdate:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onUpdate)==null?void 0:Dt.call(Tt,...kt)},onContentError:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onContentError)==null?void 0:Dt.call(Tt,...kt)},onDrop:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onDrop)==null?void 0:Dt.call(Tt,...kt)},onPaste:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onPaste)==null?void 0:Dt.call(Tt,...kt)},onDelete:(...kt)=>{var Tt,Dt;return(Dt=(Tt=this.options.current).onDelete)==null?void 0:Dt.call(Tt,...kt)}};return new Editor(dt)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(dt){return this.subscriptions.add(dt),()=>{this.subscriptions.delete(dt)}}static compareOptions(dt,$t){return Object.keys(dt).every(kt=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(kt)?!0:kt==="extensions"&&dt.extensions&&$t.extensions?dt.extensions.length!==$t.extensions.length?!1:dt.extensions.every((Tt,Dt)=>{var Ft;return Tt===((Ft=$t.extensions)==null?void 0:Ft[Dt])}):dt[kt]===$t[kt])}onRender(dt){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&dt.length===0?cS.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(dt),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(dt){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=dt;return}if(this.previousDeps.length===dt.length&&this.previousDeps.every((kt,Tt)=>kt===dt[Tt]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=dt}scheduleDestroy(){const dt=this.instanceId,$t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===dt){$t&&$t.setOptions(this.options.current);return}$t&&!$t.isDestroyed&&($t.destroy(),this.instanceId===dt&&this.setEditor(null))},1)}};function useEditor(et={},dt=[]){const $t=reactExports.useRef(et);$t.current=et;const[kt]=reactExports.useState(()=>new EditorInstanceManager($t)),Tt=shimExports.useSyncExternalStore(kt.subscribe,kt.getEditor,kt.getServerSnapshot);return reactExports.useDebugValue(Tt),reactExports.useEffect(kt.onRender(dt)),useEditorState({editor:Tt,selector:({transactionNumber:Dt})=>et.shouldRerenderOnTransaction===!1||et.shouldRerenderOnTransaction===void 0?null:et.immediatelyRender&&Dt===0?0:Dt+1}),Tt}var EditorContext=reactExports.createContext({editor:null});EditorContext.Consumer;var ReactNodeViewContext=reactExports.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React$2.forwardRef((et,dt)=>{const{onDragStart:$t}=useReactNodeView(),kt=et.as||"div";return jsxRuntimeExports.jsx(kt,{...et,ref:dt,"data-node-view-wrapper":"",onDragStart:$t,style:{whiteSpace:"normal",...et.style}})});React$2.createContext({markViewContentRef:()=>{}});var h$1=(et,dt)=>{if(et==="slot")return 0;if(et instanceof Function)return et(dt);const{children:$t,...kt}=dt??{};if(et==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[et,kt,$t]},inputRegex$5=/^\s*>\s$/,Blockquote=Node3.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:et}){return h$1("blockquote",{...mergeAttributes(this.options.HTMLAttributes,et),children:h$1("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:et})=>et.wrapIn(this.name),toggleBlockquote:()=>({commands:et})=>et.toggleWrap(this.name),unsetBlockquote:()=>({commands:et})=>et.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$5,type:this.type})]}}),index_default$d=Blockquote,starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:et=>et.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:et=>et.type.name===this.name},{style:"font-weight",getAttrs:et=>/^(bold(er)?|[5-9]\d{2,})$/.test(et)&&null}]},renderHTML({HTMLAttributes:et}){return h$1("strong",{...mergeAttributes(this.options.HTMLAttributes,et),children:h$1("slot",{})})},addCommands(){return{setBold:()=>({commands:et})=>et.setMark(this.name),toggleBold:()=>({commands:et})=>et.toggleMark(this.name),unsetBold:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),inputRegex$4=/(^|[^`])`([^`]+)`(?!`)$/,pasteRegex$2=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:et}){return["code",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setCode:()=>({commands:et})=>et.setMark(this.name),toggleCode:()=>({commands:et})=>et.toggleMark(this.name),unsetCode:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$4,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),DEFAULT_TAB_SIZE=4,backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node3.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:DEFAULT_TAB_SIZE,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:et=>{var dt;const{languageClassPrefix:$t}=this.options;if(!$t)return null;const Dt=[...((dt=et.firstElementChild)==null?void 0:dt.classList)||[]].filter(Ft=>Ft.startsWith($t)).map(Ft=>Ft.replace($t,""))[0];return Dt||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:et,HTMLAttributes:dt}){return["pre",mergeAttributes(this.options.HTMLAttributes,dt),["code",{class:et.attrs.language?this.options.languageClassPrefix+et.attrs.language:null},0]]},addCommands(){return{setCodeBlock:et=>({commands:dt})=>dt.setNode(this.name,et),toggleCodeBlock:et=>({commands:dt})=>dt.toggleNode(this.name,"paragraph",et)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:et,$anchor:dt}=this.editor.state.selection,$t=dt.pos===1;return!et||dt.parent.type.name!==this.name?!1:$t||!dt.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:et})=>{var dt;if(!this.options.enableTabIndentation)return!1;const $t=(dt=this.options.tabSize)!=null?dt:DEFAULT_TAB_SIZE,{state:kt}=et,{selection:Tt}=kt,{$from:Dt,empty:Ft}=Tt;if(Dt.parent.type!==this.type)return!1;const Ut=" ".repeat($t);return Ft?et.commands.insertContent(Ut):et.commands.command(({tr:Ht})=>{const{from:Kt,to:Yt}=Tt,er=kt.doc.textBetween(Kt,Yt,`
`,`
`).split(`
`).map(rr=>Ut+rr).join(`
`);return Ht.replaceWith(Kt,Yt,kt.schema.text(er)),!0})},"Shift-Tab":({editor:et})=>{var dt;if(!this.options.enableTabIndentation)return!1;const $t=(dt=this.options.tabSize)!=null?dt:DEFAULT_TAB_SIZE,{state:kt}=et,{selection:Tt}=kt,{$from:Dt,empty:Ft}=Tt;return Dt.parent.type!==this.type?!1:Ft?et.commands.command(({tr:Ut})=>{var Ht;const{pos:Kt}=Dt,Yt=Dt.start(),Jt=Dt.end(),er=kt.doc.textBetween(Yt,Jt,`
`,`
`).split(`
`);let rr=0,sr=0;const nr=Kt-Yt;for(let ur=0;ur<er.length;ur+=1){if(sr+er[ur].length>=nr){rr=ur;break}sr+=er[ur].length+1}const or=((Ht=er[rr].match(/^ */))==null?void 0:Ht[0])||"",lr=Math.min(or.length,$t);if(lr===0)return!0;let cr=Yt;for(let ur=0;ur<rr;ur+=1)cr+=er[ur].length+1;return Ut.delete(cr,cr+lr),Kt-cr<=lr&&Ut.setSelection(TextSelection.create(Ut.doc,cr)),!0}):et.commands.command(({tr:Ut})=>{const{from:Ht,to:Kt}=Tt,Zt=kt.doc.textBetween(Ht,Kt,`
`,`
`).split(`
`).map(er=>{var rr;const sr=((rr=er.match(/^ */))==null?void 0:rr[0])||"",nr=Math.min(sr.length,$t);return er.slice(nr)}).join(`
`);return Ut.replaceWith(Ht,Kt,kt.schema.text(Zt)),!0})},Enter:({editor:et})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:dt}=et,{selection:$t}=dt,{$from:kt,empty:Tt}=$t;if(!Tt||kt.parent.type!==this.type)return!1;const Dt=kt.parentOffset===kt.parent.nodeSize-2,Ft=kt.parent.textContent.endsWith(`

`);return!Dt||!Ft?!1:et.chain().command(({tr:Ut})=>(Ut.delete(kt.pos-2,kt.pos),!0)).exitCode().run()},ArrowDown:({editor:et})=>{if(!this.options.exitOnArrowDown)return!1;const{state:dt}=et,{selection:$t,doc:kt}=dt,{$from:Tt,empty:Dt}=$t;if(!Dt||Tt.parent.type!==this.type||!(Tt.parentOffset===Tt.parent.nodeSize-2))return!1;const Ut=Tt.after();return Ut===void 0?!1:kt.nodeAt(Ut)?et.commands.command(({tr:Kt})=>(Kt.setSelection(Selection.near(kt.resolve(Ut))),!0)):et.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:et=>({language:et[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:et=>({language:et[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(et,dt)=>{if(!dt.clipboardData||this.editor.isActive(this.type.name))return!1;const $t=dt.clipboardData.getData("text/plain"),kt=dt.clipboardData.getData("vscode-editor-data"),Tt=kt?JSON.parse(kt):void 0,Dt=Tt==null?void 0:Tt.mode;if(!$t||!Dt)return!1;const{tr:Ft,schema:Ut}=et.state,Ht=Ut.text($t.replace(/\r\n?/g,`
`));return Ft.replaceSelectionWith(this.type.create({language:Dt},Ht)),Ft.selection.$from.parent.type!==this.type&&Ft.setSelection(TextSelection.near(Ft.doc.resolve(Math.max(0,Ft.selection.from-2)))),Ft.setMeta("paste",!0),et.dispatch(Ft),!0}}})]}}),Document$2=Node3.create({name:"doc",topNode:!0,content:"block+"}),HardBreak=Node3.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:et}){return["br",mergeAttributes(this.options.HTMLAttributes,et)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:et,chain:dt,state:$t,editor:kt})=>et.first([()=>et.exitCode(),()=>et.command(()=>{const{selection:Tt,storedMarks:Dt}=$t;if(Tt.$from.parent.type.spec.isolating)return!1;const{keepMarks:Ft}=this.options,{splittableMarks:Ut}=kt.extensionManager,Ht=Dt||Tt.$to.parentOffset&&Tt.$from.marks();return dt().insertContent({type:this.name}).command(({tr:Kt,dispatch:Yt})=>{if(Yt&&Ht&&Ft){const Jt=Ht.filter(Zt=>Ut.includes(Zt.type.name));Kt.ensureMarks(Jt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node3.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(et=>({tag:`h${et}`,attrs:{level:et}}))},renderHTML({node:et,HTMLAttributes:dt}){return[`h${this.options.levels.includes(et.attrs.level)?et.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,dt),0]},addCommands(){return{setHeading:et=>({commands:dt})=>this.options.levels.includes(et.level)?dt.setNode(this.name,et):!1,toggleHeading:et=>({commands:dt})=>this.options.levels.includes(et.level)?dt.toggleNode(this.name,"paragraph",et):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((et,dt)=>({...et,[`Mod-Alt-${dt}`]:()=>this.editor.commands.toggleHeading({level:dt})}),{})},addInputRules(){return this.options.levels.map(et=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${et}})\\s$`),type:this.type,getAttributes:{level:et}}))}}),HorizontalRule=Node3.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:et}){return["hr",mergeAttributes(this.options.HTMLAttributes,et)]},addCommands(){return{setHorizontalRule:()=>({chain:et,state:dt})=>{if(!canInsertNode(dt,dt.schema.nodes[this.name]))return!1;const{selection:$t}=dt,{$to:kt}=$t,Tt=et();return isNodeSelection($t)?Tt.insertContentAt(kt.pos,{type:this.name}):Tt.insertContent({type:this.name}),Tt.command(({state:Dt,tr:Ft,dispatch:Ut})=>{if(Ut){const{$to:Ht}=Ft.selection,Kt=Ht.end();if(Ht.nodeAfter)Ht.nodeAfter.isTextblock?Ft.setSelection(TextSelection.create(Ft.doc,Ht.pos+1)):Ht.nodeAfter.isBlock?Ft.setSelection(NodeSelection.create(Ft.doc,Ht.pos)):Ft.setSelection(TextSelection.create(Ft.doc,Ht.pos));else{const Yt=Dt.schema.nodes[this.options.nextNodeType]||Ht.parent.type.contentMatch.defaultType,Jt=Yt==null?void 0:Yt.create();Jt&&(Ft.insert(Kt,Jt),Ft.setSelection(TextSelection.create(Ft.doc,Kt+1)))}Ft.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),index_default$c=HorizontalRule,starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:et=>et.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:et=>et.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:et}){return["em",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setItalic:()=>({commands:et})=>et.setMark(this.name),toggleItalic:()=>({commands:et})=>et.toggleMark(this.name),unsetItalic:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}});const encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme$r="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(et,dt){return et in dt||(dt[et]=[]),dt[et]}function addToGroups(et,dt,$t){dt[numeric]&&(dt[asciinumeric]=!0,dt[alphanumeric]=!0),dt[ascii]&&(dt[asciinumeric]=!0,dt[alpha]=!0),dt[asciinumeric]&&(dt[alphanumeric]=!0),dt[alpha]&&(dt[alphanumeric]=!0),dt[alphanumeric]&&(dt[domain]=!0),dt[emoji]&&(dt[domain]=!0);for(const kt in dt){const Tt=registerGroup(kt,$t);Tt.indexOf(et)<0&&Tt.push(et)}}function flagsForToken(et,dt){const $t={};for(const kt in dt)dt[kt].indexOf(et)>=0&&($t[kt]=!0);return $t}function State(et=null){this.j={},this.jr=[],this.jd=null,this.t=et}State.groups={};State.prototype={accepts(){return!!this.t},go(et){const dt=this,$t=dt.j[et];if($t)return $t;for(let kt=0;kt<dt.jr.length;kt++){const Tt=dt.jr[kt][0],Dt=dt.jr[kt][1];if(Dt&&Tt.test(et))return Dt}return dt.jd},has(et,dt=!1){return dt?et in this.j:!!this.go(et)},ta(et,dt,$t,kt){for(let Tt=0;Tt<et.length;Tt++)this.tt(et[Tt],dt,$t,kt)},tr(et,dt,$t,kt){kt=kt||State.groups;let Tt;return dt&&dt.j?Tt=dt:(Tt=new State(dt),$t&&kt&&addToGroups(dt,$t,kt)),this.jr.push([et,Tt]),Tt},ts(et,dt,$t,kt){let Tt=this;const Dt=et.length;if(!Dt)return Tt;for(let Ft=0;Ft<Dt-1;Ft++)Tt=Tt.tt(et[Ft]);return Tt.tt(et[Dt-1],dt,$t,kt)},tt(et,dt,$t,kt){kt=kt||State.groups;const Tt=this;if(dt&&dt.j)return Tt.j[et]=dt,dt;const Dt=dt;let Ft,Ut=Tt.go(et);if(Ut?(Ft=new State,Object.assign(Ft.j,Ut.j),Ft.jr.push.apply(Ft.jr,Ut.jr),Ft.jd=Ut.jd,Ft.t=Ut.t):Ft=new State,Dt){if(kt)if(Ft.t&&typeof Ft.t=="string"){const Ht=Object.assign(flagsForToken(Ft.t,kt),$t);addToGroups(Dt,Ht,kt)}else $t&&addToGroups(Dt,$t,kt);Ft.t=Dt}return Tt.j[et]=Ft,Ft}};const ta=(et,dt,$t,kt,Tt)=>et.ta(dt,$t,kt,Tt),tr=(et,dt,$t,kt,Tt)=>et.tr(dt,$t,kt,Tt),ts$6=(et,dt,$t,kt,Tt)=>et.ts(dt,$t,kt,Tt),tt$1=(et,dt,$t,kt,Tt)=>et.tt(dt,$t,kt,Tt),WORD="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD,WS});const ASCII_LETTER=/[a-z]/,LETTER=/\p{L}/u,EMOJI=/\p{Emoji}/u,DIGIT=/\d/,SPACE=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="",EMOJI_JOINER="",OBJECT_REPLACEMENT="";let tlds=null,utlds=null;function init$2(et=[]){const dt={};State.groups=dt;const $t=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt$1($t,"'",APOSTROPHE),tt$1($t,"{",OPENBRACE),tt$1($t,"}",CLOSEBRACE),tt$1($t,"[",OPENBRACKET),tt$1($t,"]",CLOSEBRACKET),tt$1($t,"(",OPENPAREN),tt$1($t,")",CLOSEPAREN),tt$1($t,"<",OPENANGLEBRACKET),tt$1($t,">",CLOSEANGLEBRACKET),tt$1($t,"",FULLWIDTHLEFTPAREN),tt$1($t,"",FULLWIDTHRIGHTPAREN),tt$1($t,"",LEFTCORNERBRACKET),tt$1($t,"",RIGHTCORNERBRACKET),tt$1($t,"",LEFTWHITECORNERBRACKET),tt$1($t,"",RIGHTWHITECORNERBRACKET),tt$1($t,"",FULLWIDTHLESSTHAN),tt$1($t,"",FULLWIDTHGREATERTHAN),tt$1($t,"&",AMPERSAND),tt$1($t,"*",ASTERISK),tt$1($t,"@",AT),tt$1($t,"`",BACKTICK),tt$1($t,"^",CARET),tt$1($t,":",COLON),tt$1($t,",",COMMA),tt$1($t,"$",DOLLAR),tt$1($t,".",DOT),tt$1($t,"=",EQUALS),tt$1($t,"!",EXCLAMATION),tt$1($t,"-",HYPHEN),tt$1($t,"%",PERCENT),tt$1($t,"|",PIPE),tt$1($t,"+",PLUS),tt$1($t,"#",POUND),tt$1($t,"?",QUERY),tt$1($t,'"',QUOTE),tt$1($t,"/",SLASH),tt$1($t,";",SEMI),tt$1($t,"~",TILDE),tt$1($t,"_",UNDERSCORE),tt$1($t,"\\",BACKSLASH),tt$1($t,"",FULLWIDTHMIDDLEDOT);const kt=tr($t,DIGIT,NUM,{[numeric]:!0});tr(kt,DIGIT,kt);const Tt=tr(kt,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),Dt=tr(kt,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),Ft=tr($t,ASCII_LETTER,WORD,{[ascii]:!0});tr(Ft,DIGIT,Tt),tr(Ft,ASCII_LETTER,Ft),tr(Tt,DIGIT,Tt),tr(Tt,ASCII_LETTER,Tt);const Ut=tr($t,LETTER,UWORD,{[alpha]:!0});tr(Ut,ASCII_LETTER),tr(Ut,DIGIT,Dt),tr(Ut,LETTER,Ut),tr(Dt,DIGIT,Dt),tr(Dt,ASCII_LETTER),tr(Dt,LETTER,Dt);const Ht=tt$1($t,LF,NL,{[whitespace]:!0}),Kt=tt$1($t,CR,WS,{[whitespace]:!0}),Yt=tr($t,SPACE,WS,{[whitespace]:!0});tt$1($t,OBJECT_REPLACEMENT,Yt),tt$1(Kt,LF,Ht),tt$1(Kt,OBJECT_REPLACEMENT,Yt),tr(Kt,SPACE,Yt),tt$1(Yt,CR),tt$1(Yt,LF),tr(Yt,SPACE,Yt),tt$1(Yt,OBJECT_REPLACEMENT,Yt);const Jt=tr($t,EMOJI,EMOJI$1,{[emoji]:!0});tt$1(Jt,"#"),tr(Jt,EMOJI,Jt),tt$1(Jt,EMOJI_VARIATION,Jt);const Zt=tt$1(Jt,EMOJI_JOINER);tt$1(Zt,"#"),tr(Zt,EMOJI,Jt);const er=[[ASCII_LETTER,Ft],[DIGIT,Tt]],rr=[[ASCII_LETTER,null],[LETTER,Ut],[DIGIT,Dt]];for(let sr=0;sr<tlds.length;sr++)fastts($t,tlds[sr],TLD,WORD,er);for(let sr=0;sr<utlds.length;sr++)fastts($t,utlds[sr],UTLD,UWORD,rr);addToGroups(TLD,{tld:!0,ascii:!0},dt),addToGroups(UTLD,{utld:!0,alpha:!0},dt),fastts($t,"file",SCHEME,WORD,er),fastts($t,"mailto",SCHEME,WORD,er),fastts($t,"http",SLASH_SCHEME,WORD,er),fastts($t,"https",SLASH_SCHEME,WORD,er),fastts($t,"ftp",SLASH_SCHEME,WORD,er),fastts($t,"ftps",SLASH_SCHEME,WORD,er),addToGroups(SCHEME,{scheme:!0,ascii:!0},dt),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},dt),et=et.sort((sr,nr)=>sr[0]>nr[0]?1:-1);for(let sr=0;sr<et.length;sr++){const nr=et[sr][0],or=et[sr][1]?{[scheme$r]:!0}:{[slashscheme]:!0};nr.indexOf("-")>=0?or[domain]=!0:ASCII_LETTER.test(nr)?DIGIT.test(nr)?or[asciinumeric]=!0:or[ascii]=!0:or[numeric]=!0,ts$6($t,nr,nr,or)}return ts$6($t,"localhost",LOCALHOST,{ascii:!0}),$t.jd=new State(SYM),{start:$t,tokens:Object.assign({groups:dt},tk)}}function run$1(et,dt){const $t=stringToArray$1(dt.replace(/[A-Z]/g,Ut=>Ut.toLowerCase())),kt=$t.length,Tt=[];let Dt=0,Ft=0;for(;Ft<kt;){let Ut=et,Ht=null,Kt=0,Yt=null,Jt=-1,Zt=-1;for(;Ft<kt&&(Ht=Ut.go($t[Ft]));)Ut=Ht,Ut.accepts()?(Jt=0,Zt=0,Yt=Ut):Jt>=0&&(Jt+=$t[Ft].length,Zt++),Kt+=$t[Ft].length,Dt+=$t[Ft].length,Ft++;Dt-=Jt,Ft-=Zt,Kt-=Jt,Tt.push({t:Yt.t,v:dt.slice(Dt-Kt,Dt),s:Dt-Kt,e:Dt})}return Tt}function stringToArray$1(et){const dt=[],$t=et.length;let kt=0;for(;kt<$t;){let Tt=et.charCodeAt(kt),Dt,Ft=Tt<55296||Tt>56319||kt+1===$t||(Dt=et.charCodeAt(kt+1))<56320||Dt>57343?et[kt]:et.slice(kt,kt+2);dt.push(Ft),kt+=Ft.length}return dt}function fastts(et,dt,$t,kt,Tt){let Dt;const Ft=dt.length;for(let Ut=0;Ut<Ft-1;Ut++){const Ht=dt[Ut];et.j[Ht]?Dt=et.j[Ht]:(Dt=new State(kt),Dt.jr=Tt.slice(),et.j[Ht]=Dt),et=Dt}return Dt=new State($t),Dt.jr=Tt.slice(),et.j[dt[Ft-1]]=Dt,Dt}function decodeTlds(et){const dt=[],$t=[];let kt=0,Tt="0123456789";for(;kt<et.length;){let Dt=0;for(;Tt.indexOf(et[kt+Dt])>=0;)Dt++;if(Dt>0){dt.push($t.join(""));for(let Ft=parseInt(et.substring(kt,kt+Dt),10);Ft>0;Ft--)$t.pop();kt+=Dt}else $t.push(et[kt]),kt++}return dt}const defaults$5={defaultProtocol:"http",events:null,format:noop$a,formatHref:noop$a,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(et,dt=null){let $t=Object.assign({},defaults$5);et&&($t=Object.assign($t,et instanceof Options?et.o:et));const kt=$t.ignoreTags,Tt=[];for(let Dt=0;Dt<kt.length;Dt++)Tt.push(kt[Dt].toUpperCase());this.o=$t,dt&&(this.defaultRender=dt),this.ignoreTags=Tt}Options.prototype={o:defaults$5,ignoreTags:[],defaultRender(et){return et},check(et){return this.get("validate",et.toString(),et)},get(et,dt,$t){const kt=dt!=null;let Tt=this.o[et];return Tt&&(typeof Tt=="object"?(Tt=$t.t in Tt?Tt[$t.t]:defaults$5[et],typeof Tt=="function"&&kt&&(Tt=Tt(dt,$t))):typeof Tt=="function"&&kt&&(Tt=Tt(dt,$t.t,$t)),Tt)},getObj(et,dt,$t){let kt=this.o[et];return typeof kt=="function"&&dt!=null&&(kt=kt(dt,$t.t,$t)),kt},render(et){const dt=et.render(this);return(this.get("render",null,et)||this.defaultRender)(dt,et.t,et)}};function noop$a(et){return et}function MultiToken(et,dt){this.t="token",this.v=et,this.tk=dt}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(et){return this.toString()},toFormattedString(et){const dt=this.toString(),$t=et.get("truncate",dt,this),kt=et.get("format",dt,this);return $t&&kt.length>$t?kt.substring(0,$t)+"":kt},toFormattedHref(et){return et.get("formatHref",this.toHref(et.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(et=defaults$5.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(et),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(et){return{type:this.t,value:this.toFormattedString(et),isLink:this.isLink,href:this.toFormattedHref(et),start:this.startIndex(),end:this.endIndex()}},validate(et){return et.get("validate",this.toString(),this)},render(et){const dt=this,$t=this.toHref(et.get("defaultProtocol")),kt=et.get("formatHref",$t,this),Tt=et.get("tagName",$t,dt),Dt=this.toFormattedString(et),Ft={},Ut=et.get("className",$t,dt),Ht=et.get("target",$t,dt),Kt=et.get("rel",$t,dt),Yt=et.getObj("attributes",$t,dt),Jt=et.getObj("events",$t,dt);return Ft.href=kt,Ut&&(Ft.class=Ut),Ht&&(Ft.target=Ht),Kt&&(Ft.rel=Kt),Yt&&Object.assign(Ft,Yt),{tagName:Tt,attributes:Ft,content:Dt,eventListeners:Jt}}};function createTokenClass(et,dt){class $t extends MultiToken{constructor(Tt,Dt){super(Tt,Dt),this.t=et}}for(const kt in dt)$t.prototype[kt]=dt[kt];return $t.t=et,$t}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$1=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(et=defaults$5.defaultProtocol){return this.hasProtocol()?this.v:`${et}://${this.v}`},hasProtocol(){const et=this.tk;return et.length>=2&&et[0].t!==LOCALHOST&&et[1].t===COLON}}),makeState=et=>new State(et);function init$1({groups:et}){const dt=et.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),$t=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],kt=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],Tt=makeState(),Dt=tt$1(Tt,TILDE);ta(Dt,kt,Dt),ta(Dt,et.domain,Dt);const Ft=makeState(),Ut=makeState(),Ht=makeState();ta(Tt,et.domain,Ft),ta(Tt,et.scheme,Ut),ta(Tt,et.slashscheme,Ht),ta(Ft,kt,Dt),ta(Ft,et.domain,Ft);const Kt=tt$1(Ft,AT);tt$1(Dt,AT,Kt),tt$1(Ut,AT,Kt),tt$1(Ht,AT,Kt);const Yt=tt$1(Dt,DOT);ta(Yt,kt,Dt),ta(Yt,et.domain,Dt);const Jt=makeState();ta(Kt,et.domain,Jt),ta(Jt,et.domain,Jt);const Zt=tt$1(Jt,DOT);ta(Zt,et.domain,Jt);const er=makeState(Email);ta(Zt,et.tld,er),ta(Zt,et.utld,er),tt$1(Kt,LOCALHOST,er);const rr=tt$1(Jt,HYPHEN);tt$1(rr,HYPHEN,rr),ta(rr,et.domain,Jt),ta(er,et.domain,Jt),tt$1(er,DOT,Zt),tt$1(er,HYPHEN,rr);const sr=tt$1(er,COLON);ta(sr,et.numeric,Email);const nr=tt$1(Ft,HYPHEN),ir=tt$1(Ft,DOT);tt$1(nr,HYPHEN,nr),ta(nr,et.domain,Ft),ta(ir,kt,Dt),ta(ir,et.domain,Ft);const or=makeState(Url);ta(ir,et.tld,or),ta(ir,et.utld,or),ta(or,et.domain,Ft),ta(or,kt,Dt),tt$1(or,DOT,ir),tt$1(or,HYPHEN,nr),tt$1(or,AT,Kt);const lr=tt$1(or,COLON),cr=makeState(Url);ta(lr,et.numeric,cr);const dr=makeState(Url),ur=makeState();ta(dr,dt,dr),ta(dr,$t,ur),ta(ur,dt,dr),ta(ur,$t,ur),tt$1(or,SLASH,dr),tt$1(cr,SLASH,dr);const pr=tt$1(Ut,COLON),mr=tt$1(Ht,COLON),jr=tt$1(mr,SLASH),Rr=tt$1(jr,SLASH);ta(Ut,et.domain,Ft),tt$1(Ut,DOT,ir),tt$1(Ut,HYPHEN,nr),ta(Ht,et.domain,Ft),tt$1(Ht,DOT,ir),tt$1(Ht,HYPHEN,nr),ta(pr,et.domain,dr),tt$1(pr,SLASH,dr),tt$1(pr,QUERY,dr),ta(Rr,et.domain,dr),ta(Rr,dt,dr),tt$1(Rr,SLASH,dr);const xr=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let kr=0;kr<xr.length;kr++){const[Mr,Tr]=xr[kr],Or=tt$1(dr,Mr);tt$1(ur,Mr,Or),tt$1(Or,Tr,dr);const _r=makeState(Url);ta(Or,dt,_r);const Pr=makeState();ta(Or,$t),ta(_r,dt,_r),ta(_r,$t,Pr),ta(Pr,dt,_r),ta(Pr,$t,Pr),tt$1(_r,Tr,dr),tt$1(Pr,Tr,dr)}return tt$1(Tt,LOCALHOST,or),tt$1(Tt,NL,Nl),{start:Tt,tokens:tk}}function run(et,dt,$t){let kt=$t.length,Tt=0,Dt=[],Ft=[];for(;Tt<kt;){let Ut=et,Ht=null,Kt=null,Yt=0,Jt=null,Zt=-1;for(;Tt<kt&&!(Ht=Ut.go($t[Tt].t));)Ft.push($t[Tt++]);for(;Tt<kt&&(Kt=Ht||Ut.go($t[Tt].t));)Ht=null,Ut=Kt,Ut.accepts()?(Zt=0,Jt=Ut):Zt>=0&&Zt++,Tt++,Yt++;if(Zt<0)Tt-=Yt,Tt<kt&&(Ft.push($t[Tt]),Tt++);else{Ft.length>0&&(Dt.push(initMultiToken(Text$1,dt,Ft)),Ft=[]),Tt-=Zt,Yt-=Zt;const er=Jt.t,rr=$t.slice(Tt-Yt,Tt);Dt.push(initMultiToken(er,dt,rr))}}return Ft.length>0&&Dt.push(initMultiToken(Text$1,dt,Ft)),Dt}function initMultiToken(et,dt,$t){const kt=$t[0].s,Tt=$t[$t.length-1].e,Dt=dt.slice(kt,Tt);return new et(Dt,$t)}const warn$1=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(et,dt=!1){if(INIT.initialized&&warn$1(`linkifyjs: already initialized - will not register custom scheme "${et}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(et))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([et,dt])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let et=0;et<INIT.tokenQueue.length;et++)INIT.tokenQueue[et][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let et=0;et<INIT.pluginQueue.length;et++)INIT.pluginQueue[et][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(et){return INIT.initialized||init(),run(INIT.parser.start,et,run$1(INIT.scanner.start,et))}tokenize.scan=run$1;function find$1(et,dt=null,$t=null){if(dt&&typeof dt=="object"){if($t)throw Error(`linkifyjs: Invalid link type ${dt}; must be a string`);$t=dt,dt=null}const kt=new Options($t),Tt=tokenize(et),Dt=[];for(let Ft=0;Ft<Tt.length;Ft++){const Ut=Tt[Ft];Ut.isLink&&(!dt||Ut.t===dt)&&kt.check(Ut)&&Dt.push(Ut.toFormattedObject(kt))}return Dt}var UNICODE_WHITESPACE_PATTERN="[\0- -\u2029]",UNICODE_WHITESPACE_REGEX=new RegExp(UNICODE_WHITESPACE_PATTERN),UNICODE_WHITESPACE_REGEX_END=new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`),UNICODE_WHITESPACE_REGEX_GLOBAL=new RegExp(UNICODE_WHITESPACE_PATTERN,"g");function isValidLinkStructure(et){return et.length===1?et[0].isLink:et.length===3&&et[1].isLink?["()","[]"].includes(et[0].value+et[2].value):!1}function autolink(et){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(dt,$t,kt)=>{const Tt=dt.some(Kt=>Kt.docChanged)&&!$t.doc.eq(kt.doc),Dt=dt.some(Kt=>Kt.getMeta("preventAutolink"));if(!Tt||Dt)return;const{tr:Ft}=kt,Ut=combineTransactionSteps($t.doc,[...dt]);if(getChangedRanges(Ut).forEach(({newRange:Kt})=>{const Yt=findChildrenInRange(kt.doc,Kt,er=>er.isTextblock);let Jt,Zt;if(Yt.length>1)Jt=Yt[0],Zt=kt.doc.textBetween(Jt.pos,Jt.pos+Jt.node.nodeSize,void 0," ");else if(Yt.length){const er=kt.doc.textBetween(Kt.from,Kt.to," "," ");if(!UNICODE_WHITESPACE_REGEX_END.test(er))return;Jt=Yt[0],Zt=kt.doc.textBetween(Jt.pos,Kt.to,void 0," ")}if(Jt&&Zt){const er=Zt.split(UNICODE_WHITESPACE_REGEX).filter(Boolean);if(er.length<=0)return!1;const rr=er[er.length-1],sr=Jt.pos+Zt.lastIndexOf(rr);if(!rr)return!1;const nr=tokenize(rr).map(ir=>ir.toObject(et.defaultProtocol));if(!isValidLinkStructure(nr))return!1;nr.filter(ir=>ir.isLink).map(ir=>({...ir,from:sr+ir.start+1,to:sr+ir.end+1})).filter(ir=>kt.schema.marks.code?!kt.doc.rangeHasMark(ir.from,ir.to,kt.schema.marks.code):!0).filter(ir=>et.validate(ir.value)).filter(ir=>et.shouldAutoLink(ir.value)).forEach(ir=>{getMarksBetween(ir.from,ir.to,kt.doc).some(or=>or.mark.type===et.type)||Ft.addMark(ir.from,ir.to,et.type.create({href:ir.href}))})}}),!!Ft.steps.length)return Ft}})}function clickHandler(et){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(dt,$t,kt)=>{var Tt,Dt;if(kt.button!==0||!dt.editable)return!1;let Ft=null;if(kt.target instanceof HTMLAnchorElement)Ft=kt.target;else{let Yt=kt.target;const Jt=[];for(;Yt.nodeName!=="DIV";)Jt.push(Yt),Yt=Yt.parentNode;Ft=Jt.find(Zt=>Zt.nodeName==="A")}if(!Ft)return!1;const Ut=getAttributes$1(dt.state,et.type.name),Ht=(Tt=Ft==null?void 0:Ft.href)!=null?Tt:Ut.href,Kt=(Dt=Ft==null?void 0:Ft.target)!=null?Dt:Ut.target;return et.enableClickSelection&&et.editor.commands.extendMarkRange(et.type.name),Ft&&Ht?(window.open(Ht,Kt),!0):!1}}})}function pasteHandler(et){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(dt,$t,kt)=>{const{state:Tt}=dt,{selection:Dt}=Tt,{empty:Ft}=Dt;if(Ft)return!1;let Ut="";kt.content.forEach(Kt=>{Ut+=Kt.textContent});const Ht=find$1(Ut,{defaultProtocol:et.defaultProtocol}).find(Kt=>Kt.isLink&&Kt.value===Ut);return!Ut||!Ht?!1:et.editor.commands.setMark(et.type,{href:Ht.href})}}})}function isAllowedUri(et,dt){const $t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return dt&&dt.forEach(kt=>{const Tt=typeof kt=="string"?kt:kt.scheme;Tt&&$t.push(Tt)}),!et||et.replace(UNICODE_WHITESPACE_REGEX_GLOBAL,"").match(new RegExp(`^(?:(?:${$t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(et=>{if(typeof et=="string"){registerCustomProtocol(et);return}registerCustomProtocol(et.scheme,et.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(et,dt)=>!!isAllowedUri(et,dt.protocols),validate:et=>!!et,shouldAutoLink:et=>!!et}},addAttributes(){return{href:{default:null,parseHTML(et){return et.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:et=>{const dt=et.getAttribute("href");return!dt||!this.options.isAllowedUri(dt,{defaultValidate:$t=>!!isAllowedUri($t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:et}){return this.options.isAllowedUri(et.href,{defaultValidate:dt=>!!isAllowedUri(dt,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,et),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...et,href:""}),0]},addCommands(){return{setLink:et=>({chain:dt})=>{const{href:$t}=et;return this.options.isAllowedUri($t,{defaultValidate:kt=>!!isAllowedUri(kt,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?dt().setMark(this.name,et).setMeta("preventAutolink",!0).run():!1},toggleLink:et=>({chain:dt})=>{const{href:$t}=et||{};return $t&&!this.options.isAllowedUri($t,{defaultValidate:kt=>!!isAllowedUri(kt,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:dt().toggleMark(this.name,et,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:et})=>et().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:et=>{const dt=[];if(et){const{protocols:$t,defaultProtocol:kt}=this.options,Tt=find$1(et).filter(Dt=>Dt.isLink&&this.options.isAllowedUri(Dt.value,{defaultValidate:Ft=>!!isAllowedUri(Ft,$t),protocols:$t,defaultProtocol:kt}));Tt.length&&Tt.forEach(Dt=>dt.push({text:Dt.value,data:{href:Dt.href},index:Dt.start}))}return dt},type:this.type,getAttributes:et=>{var dt;return{href:(dt=et.data)==null?void 0:dt.href}}})]},addProseMirrorPlugins(){const et=[],{protocols:dt,defaultProtocol:$t}=this.options;return this.options.autolink&&et.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:kt=>this.options.isAllowedUri(kt,{defaultValidate:Tt=>!!isAllowedUri(Tt,dt),protocols:dt,defaultProtocol:$t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&et.push(clickHandler({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&et.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),et}}),index_default$b=Link,__defProp$6=Object.defineProperty,__export$6=(et,dt)=>{for(var $t in dt)__defProp$6(et,$t,{get:dt[$t],enumerable:!0})},ListItemName="listItem",TextStyleName="textStyle",bulletListInputRegex=/^\s*([-+*])\s$/,BulletList=Node3.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:et}){return["ul",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{toggleBulletList:()=>({commands:et,chain:dt})=>this.options.keepAttributes?dt().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():et.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let et=wrappingInputRule({find:bulletListInputRegex,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(et=wrappingInputRule({find:bulletListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName),editor:this.editor})),[et]}}),ListItem=Node3.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:et}){return["li",mergeAttributes(this.options.HTMLAttributes,et),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),listHelpers_exports={};__export$6(listHelpers_exports,{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(et,dt)=>{const{$from:$t}=dt.selection,kt=getNodeType(et,dt.schema);let Tt=null,Dt=$t.depth,Ft=$t.pos,Ut=null;for(;Dt>0&&Ut===null;)Tt=$t.node(Dt),Tt.type===kt?Ut=Dt:(Dt-=1,Ft-=1);return Ut===null?null:{$pos:dt.doc.resolve(Ft),depth:Ut}},getNextListDepth=(et,dt)=>{const $t=findListItemPos(et,dt);if(!$t)return!1;const[,kt]=getNodeAtPosition(dt,et,$t.$pos.pos+4);return kt},hasListBefore=(et,dt,$t)=>{const{$anchor:kt}=et.selection,Tt=Math.max(0,kt.pos-2),Dt=et.doc.resolve(Tt).node();return!(!Dt||!$t.includes(Dt.type.name))},hasListItemBefore=(et,dt)=>{var $t;const{$anchor:kt}=dt.selection,Tt=dt.doc.resolve(kt.pos-2);return!(Tt.index()===0||(($t=Tt.nodeBefore)==null?void 0:$t.type.name)!==et)},listItemHasSubList=(et,dt,$t)=>{if(!$t)return!1;const kt=getNodeType(et,dt.schema);let Tt=!1;return $t.descendants(Dt=>{Dt.type===kt&&(Tt=!0)}),Tt},handleBackspace=(et,dt,$t)=>{if(et.commands.undoInputRule())return!0;if(et.state.selection.from!==et.state.selection.to)return!1;if(!isNodeActive(et.state,dt)&&hasListBefore(et.state,dt,$t)){const{$anchor:Ut}=et.state.selection,Ht=et.state.doc.resolve(Ut.before()-1),Kt=[];Ht.node().descendants((Zt,er)=>{Zt.type.name===dt&&Kt.push({node:Zt,pos:er})});const Yt=Kt.at(-1);if(!Yt)return!1;const Jt=et.state.doc.resolve(Ht.start()+Yt.pos+1);return et.chain().cut({from:Ut.start()-1,to:Ut.end()+1},Jt.end()).joinForward().run()}if(!isNodeActive(et.state,dt)||!isAtStartOfNode(et.state))return!1;const kt=findListItemPos(dt,et.state);if(!kt)return!1;const Dt=et.state.doc.resolve(kt.$pos.pos-2).node(kt.depth),Ft=listItemHasSubList(dt,et.state,Dt);return hasListItemBefore(dt,et.state)&&!Ft?et.commands.joinItemBackward():et.chain().liftListItem(dt).run()},nextListIsDeeper=(et,dt)=>{const $t=getNextListDepth(et,dt),kt=findListItemPos(et,dt);return!kt||!$t?!1:$t>kt.depth},nextListIsHigher=(et,dt)=>{const $t=getNextListDepth(et,dt),kt=findListItemPos(et,dt);return!kt||!$t?!1:$t<kt.depth},handleDelete=(et,dt)=>{if(!isNodeActive(et.state,dt)||!isAtEndOfNode(et.state,dt))return!1;const{selection:$t}=et.state,{$from:kt,$to:Tt}=$t;return!$t.empty&&kt.sameParent(Tt)?!1:nextListIsDeeper(dt,et.state)?et.chain().focus(et.state.selection.from+4).lift(dt).joinBackward().run():nextListIsHigher(dt,et.state)?et.chain().joinForward().joinBackward().run():et.commands.joinItemForward()},hasListItemAfter=(et,dt)=>{var $t;const{$anchor:kt}=dt.selection,Tt=dt.doc.resolve(kt.pos-kt.parentOffset-2);return!(Tt.index()===Tt.parent.childCount-1||(($t=Tt.nodeAfter)==null?void 0:$t.type.name)!==et)},ListKeymap=Extension.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:et})=>{let dt=!1;return this.options.listTypes.forEach(({itemName:$t})=>{et.state.schema.nodes[$t]!==void 0&&handleDelete(et,$t)&&(dt=!0)}),dt},"Mod-Delete":({editor:et})=>{let dt=!1;return this.options.listTypes.forEach(({itemName:$t})=>{et.state.schema.nodes[$t]!==void 0&&handleDelete(et,$t)&&(dt=!0)}),dt},Backspace:({editor:et})=>{let dt=!1;return this.options.listTypes.forEach(({itemName:$t,wrapperNames:kt})=>{et.state.schema.nodes[$t]!==void 0&&handleBackspace(et,$t,kt)&&(dt=!0)}),dt},"Mod-Backspace":({editor:et})=>{let dt=!1;return this.options.listTypes.forEach(({itemName:$t,wrapperNames:kt})=>{et.state.schema.nodes[$t]!==void 0&&handleBackspace(et,$t,kt)&&(dt=!0)}),dt}}}}),ListItemName2="listItem",TextStyleName2="textStyle",orderedListInputRegex=/^(\d+)\.\s$/,OrderedList=Node3.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:et=>et.hasAttribute("start")?parseInt(et.getAttribute("start")||"",10):1},type:{default:null,parseHTML:et=>et.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:et}){const{start:dt,...$t}=et;return dt===1?["ol",mergeAttributes(this.options.HTMLAttributes,$t),0]:["ol",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{toggleOrderedList:()=>({commands:et,chain:dt})=>this.options.keepAttributes?dt().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName2,this.editor.getAttributes(TextStyleName2)).run():et.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let et=wrappingInputRule({find:orderedListInputRegex,type:this.type,getAttributes:dt=>({start:+dt[1]}),joinPredicate:(dt,$t)=>$t.childCount+$t.attrs.start===+dt[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(et=wrappingInputRule({find:orderedListInputRegex,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:dt=>({start:+dt[1],...this.editor.getAttributes(TextStyleName2)}),joinPredicate:(dt,$t)=>$t.childCount+$t.attrs.start===+dt[1],editor:this.editor})),[et]}}),inputRegex$3=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node3.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:et=>{const dt=et.getAttribute("data-checked");return dt===""||dt==="true"},renderHTML:et=>({"data-checked":et.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:et,HTMLAttributes:dt}){return["li",mergeAttributes(this.options.HTMLAttributes,dt,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:et.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const et={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...et,Tab:()=>this.editor.commands.sinkListItem(this.name)}:et},addNodeView(){return({node:et,HTMLAttributes:dt,getPos:$t,editor:kt})=>{const Tt=document.createElement("li"),Dt=document.createElement("label"),Ft=document.createElement("span"),Ut=document.createElement("input"),Ht=document.createElement("div"),Kt=Yt=>{var Jt,Zt;Ut.ariaLabel=((Zt=(Jt=this.options.a11y)==null?void 0:Jt.checkboxLabel)==null?void 0:Zt.call(Jt,Yt,Ut.checked))||`Task item checkbox for ${Yt.textContent||"empty task item"}`};return Kt(et),Dt.contentEditable="false",Ut.type="checkbox",Ut.addEventListener("mousedown",Yt=>Yt.preventDefault()),Ut.addEventListener("change",Yt=>{if(!kt.isEditable&&!this.options.onReadOnlyChecked){Ut.checked=!Ut.checked;return}const{checked:Jt}=Yt.target;kt.isEditable&&typeof $t=="function"&&kt.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:Zt})=>{const er=$t();if(typeof er!="number")return!1;const rr=Zt.doc.nodeAt(er);return Zt.setNodeMarkup(er,void 0,{...rr==null?void 0:rr.attrs,checked:Jt}),!0}).run(),!kt.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(et,Jt)||(Ut.checked=!Ut.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([Yt,Jt])=>{Tt.setAttribute(Yt,Jt)}),Tt.dataset.checked=et.attrs.checked,Ut.checked=et.attrs.checked,Dt.append(Ut,Ft),Tt.append(Dt,Ht),Object.entries(dt).forEach(([Yt,Jt])=>{Tt.setAttribute(Yt,Jt)}),{dom:Tt,contentDOM:Ht,update:Yt=>Yt.type!==this.type?!1:(Tt.dataset.checked=Yt.attrs.checked,Ut.checked=Yt.attrs.checked,Kt(Yt),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$3,type:this.type,getAttributes:et=>({checked:et[et.length-1]==="x"})})]}}),TaskList=Node3.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:et}){return["ul",mergeAttributes(this.options.HTMLAttributes,et,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:et})=>et.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Extension.create({name:"listKit",addExtensions(){const et=[];return this.options.bulletList!==!1&&et.push(BulletList.configure(this.options.bulletList)),this.options.listItem!==!1&&et.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&et.push(ListKeymap.configure(this.options.listKeymap)),this.options.orderedList!==!1&&et.push(OrderedList.configure(this.options.orderedList)),this.options.taskItem!==!1&&et.push(TaskItem.configure(this.options.taskItem)),this.options.taskList!==!1&&et.push(TaskList.configure(this.options.taskList)),et}});var Paragraph=Node3.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:et}){return["p",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setParagraph:()=>({commands:et})=>et.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$2=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:et=>et.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:et}){return["s",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setStrike:()=>({commands:et})=>et.setMark(this.name),toggleStrike:()=>({commands:et})=>et.toggleMark(this.name),unsetStrike:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text=Node3.create({name:"text",group:"inline"}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:et=>et.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:et}){return["u",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{setUnderline:()=>({commands:et})=>et.setMark(this.name),toggleUnderline:()=>({commands:et})=>et.toggleMark(this.name),unsetUnderline:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),index_default$a=Underline;function dropCursor(et={}){return new Plugin({view(dt){return new DropCursorView(dt,et)}})}class DropCursorView{constructor(dt,$t){var kt;this.editorView=dt,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(kt=$t.width)!==null&&kt!==void 0?kt:1,this.color=$t.color===!1?void 0:$t.color||"black",this.class=$t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(Tt=>{let Dt=Ft=>{this[Tt](Ft)};return dt.dom.addEventListener(Tt,Dt),{name:Tt,handler:Dt}})}destroy(){this.handlers.forEach(({name:dt,handler:$t})=>this.editorView.dom.removeEventListener(dt,$t))}update(dt,$t){this.cursorPos!=null&&$t.doc!=dt.state.doc&&(this.cursorPos>dt.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(dt){dt!=this.cursorPos&&(this.cursorPos=dt,dt==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let dt=this.editorView.state.doc.resolve(this.cursorPos),$t=!dt.parent.inlineContent,kt,Tt=this.editorView.dom,Dt=Tt.getBoundingClientRect(),Ft=Dt.width/Tt.offsetWidth,Ut=Dt.height/Tt.offsetHeight;if($t){let Jt=dt.nodeBefore,Zt=dt.nodeAfter;if(Jt||Zt){let er=this.editorView.nodeDOM(this.cursorPos-(Jt?Jt.nodeSize:0));if(er){let rr=er.getBoundingClientRect(),sr=Jt?rr.bottom:rr.top;Jt&&Zt&&(sr=(sr+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let nr=this.width/2*Ut;kt={left:rr.left,right:rr.right,top:sr-nr,bottom:sr+nr}}}}if(!kt){let Jt=this.editorView.coordsAtPos(this.cursorPos),Zt=this.width/2*Ft;kt={left:Jt.left-Zt,right:Jt.left+Zt,top:Jt.top,bottom:Jt.bottom}}let Ht=this.editorView.dom.offsetParent;this.element||(this.element=Ht.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",$t),this.element.classList.toggle("prosemirror-dropcursor-inline",!$t);let Kt,Yt;if(!Ht||Ht==document.body&&getComputedStyle(Ht).position=="static")Kt=-pageXOffset,Yt=-pageYOffset;else{let Jt=Ht.getBoundingClientRect(),Zt=Jt.width/Ht.offsetWidth,er=Jt.height/Ht.offsetHeight;Kt=Jt.left-Ht.scrollLeft*Zt,Yt=Jt.top-Ht.scrollTop*er}this.element.style.left=(kt.left-Kt)/Ft+"px",this.element.style.top=(kt.top-Yt)/Ut+"px",this.element.style.width=(kt.right-kt.left)/Ft+"px",this.element.style.height=(kt.bottom-kt.top)/Ut+"px"}scheduleRemoval(dt){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),dt)}dragover(dt){if(!this.editorView.editable)return;let $t=this.editorView.posAtCoords({left:dt.clientX,top:dt.clientY}),kt=$t&&$t.inside>=0&&this.editorView.state.doc.nodeAt($t.inside),Tt=kt&&kt.type.spec.disableDropCursor,Dt=typeof Tt=="function"?Tt(this.editorView,$t,dt):Tt;if($t&&!Dt){let Ft=$t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let Ut=dropPoint(this.editorView.state.doc,Ft,this.editorView.dragging.slice);Ut!=null&&(Ft=Ut)}this.setCursor(Ft),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(dt){this.editorView.dom.contains(dt.relatedTarget)||this.setCursor(null)}}class GapCursor extends Selection{constructor(dt){super(dt,dt)}map(dt,$t){let kt=dt.resolve($t.map(this.head));return GapCursor.valid(kt)?new GapCursor(kt):Selection.near(kt)}content(){return Slice.empty}eq(dt){return dt instanceof GapCursor&&dt.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(dt,$t){if(typeof $t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(dt.resolve($t.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(dt){let $t=dt.parent;if($t.isTextblock||!closedBefore(dt)||!closedAfter(dt))return!1;let kt=$t.type.spec.allowGapCursor;if(kt!=null)return kt;let Tt=$t.contentMatchAt(dt.index()).defaultType;return Tt&&Tt.isTextblock}static findGapCursorFrom(dt,$t,kt=!1){e:for(;;){if(!kt&&GapCursor.valid(dt))return dt;let Tt=dt.pos,Dt=null;for(let Ft=dt.depth;;Ft--){let Ut=dt.node(Ft);if($t>0?dt.indexAfter(Ft)<Ut.childCount:dt.index(Ft)>0){Dt=Ut.child($t>0?dt.indexAfter(Ft):dt.index(Ft)-1);break}else if(Ft==0)return null;Tt+=$t;let Ht=dt.doc.resolve(Tt);if(GapCursor.valid(Ht))return Ht}for(;;){let Ft=$t>0?Dt.firstChild:Dt.lastChild;if(!Ft){if(Dt.isAtom&&!Dt.isText&&!NodeSelection.isSelectable(Dt)){dt=dt.doc.resolve(Tt+Dt.nodeSize*$t),kt=!1;continue e}break}Dt=Ft,Tt+=$t;let Ut=dt.doc.resolve(Tt);if(GapCursor.valid(Ut))return Ut}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(dt){this.pos=dt}map(dt){return new GapBookmark(dt.map(this.pos))}resolve(dt){let $t=dt.resolve(this.pos);return GapCursor.valid($t)?new GapCursor($t):Selection.near($t)}}function closedBefore(et){for(let dt=et.depth;dt>=0;dt--){let $t=et.index(dt),kt=et.node(dt);if($t==0){if(kt.type.spec.isolating)return!0;continue}for(let Tt=kt.child($t-1);;Tt=Tt.lastChild){if(Tt.childCount==0&&!Tt.inlineContent||Tt.isAtom||Tt.type.spec.isolating)return!0;if(Tt.inlineContent)return!1}}return!0}function closedAfter(et){for(let dt=et.depth;dt>=0;dt--){let $t=et.indexAfter(dt),kt=et.node(dt);if($t==kt.childCount){if(kt.type.spec.isolating)return!0;continue}for(let Tt=kt.child($t);;Tt=Tt.firstChild){if(Tt.childCount==0&&!Tt.inlineContent||Tt.isAtom||Tt.type.spec.isolating)return!0;if(Tt.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(et,dt,$t){return dt.pos==$t.pos&&GapCursor.valid($t)?new GapCursor($t):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(et,dt){const $t=et=="vert"?dt>0?"down":"up":dt>0?"right":"left";return function(kt,Tt,Dt){let Ft=kt.selection,Ut=dt>0?Ft.$to:Ft.$from,Ht=Ft.empty;if(Ft instanceof TextSelection){if(!Dt.endOfTextblock($t)||Ut.depth==0)return!1;Ht=!1,Ut=kt.doc.resolve(dt>0?Ut.after():Ut.before())}let Kt=GapCursor.findGapCursorFrom(Ut,dt,Ht);return Kt?(Tt&&Tt(kt.tr.setSelection(new GapCursor(Kt))),!0):!1}}function handleClick(et,dt,$t){if(!et||!et.editable)return!1;let kt=et.state.doc.resolve(dt);if(!GapCursor.valid(kt))return!1;let Tt=et.posAtCoords({left:$t.clientX,top:$t.clientY});return Tt&&Tt.inside>-1&&NodeSelection.isSelectable(et.state.doc.nodeAt(Tt.inside))?!1:(et.dispatch(et.state.tr.setSelection(new GapCursor(kt))),!0)}function beforeinput(et,dt){if(dt.inputType!="insertCompositionText"||!(et.state.selection instanceof GapCursor))return!1;let{$from:$t}=et.state.selection,kt=$t.parent.contentMatchAt($t.index()).findWrapping(et.state.schema.nodes.text);if(!kt)return!1;let Tt=Fragment.empty;for(let Ft=kt.length-1;Ft>=0;Ft--)Tt=Fragment.from(kt[Ft].createAndFill(null,Tt));let Dt=et.state.tr.replace($t.pos,$t.pos,new Slice(Tt,0,0));return Dt.setSelection(TextSelection.near(Dt.doc.resolve($t.pos+1))),et.dispatch(Dt),!1}function drawGapCursor(et){if(!(et.selection instanceof GapCursor))return null;let dt=document.createElement("div");return dt.className="ProseMirror-gapcursor",DecorationSet.create(et.doc,[Decoration.widget(et.selection.head,dt,{key:"gapcursor"})])}var GOOD_LEAF_SIZE=200,RopeSequence=function et(){};RopeSequence.prototype.append=function et(dt){return dt.length?(dt=RopeSequence.from(dt),!this.length&&dt||dt.length<GOOD_LEAF_SIZE&&this.leafAppend(dt)||this.length<GOOD_LEAF_SIZE&&dt.leafPrepend(this)||this.appendInner(dt)):this};RopeSequence.prototype.prepend=function et(dt){return dt.length?RopeSequence.from(dt).append(this):this};RopeSequence.prototype.appendInner=function et(dt){return new Append(this,dt)};RopeSequence.prototype.slice=function et(dt,$t){return dt===void 0&&(dt=0),$t===void 0&&($t=this.length),dt>=$t?RopeSequence.empty:this.sliceInner(Math.max(0,dt),Math.min(this.length,$t))};RopeSequence.prototype.get=function et(dt){if(!(dt<0||dt>=this.length))return this.getInner(dt)};RopeSequence.prototype.forEach=function et(dt,$t,kt){$t===void 0&&($t=0),kt===void 0&&(kt=this.length),$t<=kt?this.forEachInner(dt,$t,kt,0):this.forEachInvertedInner(dt,$t,kt,0)};RopeSequence.prototype.map=function et(dt,$t,kt){$t===void 0&&($t=0),kt===void 0&&(kt=this.length);var Tt=[];return this.forEach(function(Dt,Ft){return Tt.push(dt(Dt,Ft))},$t,kt),Tt};RopeSequence.from=function et(dt){return dt instanceof RopeSequence?dt:dt&&dt.length?new Leaf(dt):RopeSequence.empty};var Leaf=function(et){function dt(kt){et.call(this),this.values=kt}et&&(dt.__proto__=et),dt.prototype=Object.create(et&&et.prototype),dt.prototype.constructor=dt;var $t={length:{configurable:!0},depth:{configurable:!0}};return dt.prototype.flatten=function(){return this.values},dt.prototype.sliceInner=function(Tt,Dt){return Tt==0&&Dt==this.length?this:new dt(this.values.slice(Tt,Dt))},dt.prototype.getInner=function(Tt){return this.values[Tt]},dt.prototype.forEachInner=function(Tt,Dt,Ft,Ut){for(var Ht=Dt;Ht<Ft;Ht++)if(Tt(this.values[Ht],Ut+Ht)===!1)return!1},dt.prototype.forEachInvertedInner=function(Tt,Dt,Ft,Ut){for(var Ht=Dt-1;Ht>=Ft;Ht--)if(Tt(this.values[Ht],Ut+Ht)===!1)return!1},dt.prototype.leafAppend=function(Tt){if(this.length+Tt.length<=GOOD_LEAF_SIZE)return new dt(this.values.concat(Tt.flatten()))},dt.prototype.leafPrepend=function(Tt){if(this.length+Tt.length<=GOOD_LEAF_SIZE)return new dt(Tt.flatten().concat(this.values))},$t.length.get=function(){return this.values.length},$t.depth.get=function(){return 0},Object.defineProperties(dt.prototype,$t),dt}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(et){function dt($t,kt){et.call(this),this.left=$t,this.right=kt,this.length=$t.length+kt.length,this.depth=Math.max($t.depth,kt.depth)+1}return et&&(dt.__proto__=et),dt.prototype=Object.create(et&&et.prototype),dt.prototype.constructor=dt,dt.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},dt.prototype.getInner=function(kt){return kt<this.left.length?this.left.get(kt):this.right.get(kt-this.left.length)},dt.prototype.forEachInner=function(kt,Tt,Dt,Ft){var Ut=this.left.length;if(Tt<Ut&&this.left.forEachInner(kt,Tt,Math.min(Dt,Ut),Ft)===!1||Dt>Ut&&this.right.forEachInner(kt,Math.max(Tt-Ut,0),Math.min(this.length,Dt)-Ut,Ft+Ut)===!1)return!1},dt.prototype.forEachInvertedInner=function(kt,Tt,Dt,Ft){var Ut=this.left.length;if(Tt>Ut&&this.right.forEachInvertedInner(kt,Tt-Ut,Math.max(Dt,Ut)-Ut,Ft+Ut)===!1||Dt<Ut&&this.left.forEachInvertedInner(kt,Math.min(Tt,Ut),Dt,Ft)===!1)return!1},dt.prototype.sliceInner=function(kt,Tt){if(kt==0&&Tt==this.length)return this;var Dt=this.left.length;return Tt<=Dt?this.left.slice(kt,Tt):kt>=Dt?this.right.slice(kt-Dt,Tt-Dt):this.left.slice(kt,Dt).append(this.right.slice(0,Tt-Dt))},dt.prototype.leafAppend=function(kt){var Tt=this.right.leafAppend(kt);if(Tt)return new dt(this.left,Tt)},dt.prototype.leafPrepend=function(kt){var Tt=this.left.leafPrepend(kt);if(Tt)return new dt(Tt,this.right)},dt.prototype.appendInner=function(kt){return this.left.depth>=Math.max(this.right.depth,kt.depth)+1?new dt(this.left,new dt(this.right,kt)):new dt(this,kt)},dt}(RopeSequence);const max_empty_items=500;class Branch{constructor(dt,$t){this.items=dt,this.eventCount=$t}popEvent(dt,$t){if(this.eventCount==0)return null;let kt=this.items.length;for(;;kt--)if(this.items.get(kt-1).selection){--kt;break}let Tt,Dt;$t&&(Tt=this.remapping(kt,this.items.length),Dt=Tt.maps.length);let Ft=dt.tr,Ut,Ht,Kt=[],Yt=[];return this.items.forEach((Jt,Zt)=>{if(!Jt.step){Tt||(Tt=this.remapping(kt,Zt+1),Dt=Tt.maps.length),Dt--,Yt.push(Jt);return}if(Tt){Yt.push(new Item(Jt.map));let er=Jt.step.map(Tt.slice(Dt)),rr;er&&Ft.maybeStep(er).doc&&(rr=Ft.mapping.maps[Ft.mapping.maps.length-1],Kt.push(new Item(rr,void 0,void 0,Kt.length+Yt.length))),Dt--,rr&&Tt.appendMap(rr,Dt)}else Ft.maybeStep(Jt.step);if(Jt.selection)return Ut=Tt?Jt.selection.map(Tt.slice(Dt)):Jt.selection,Ht=new Branch(this.items.slice(0,kt).append(Yt.reverse().concat(Kt)),this.eventCount-1),!1},this.items.length,0),{remaining:Ht,transform:Ft,selection:Ut}}addTransform(dt,$t,kt,Tt){let Dt=[],Ft=this.eventCount,Ut=this.items,Ht=!Tt&&Ut.length?Ut.get(Ut.length-1):null;for(let Yt=0;Yt<dt.steps.length;Yt++){let Jt=dt.steps[Yt].invert(dt.docs[Yt]),Zt=new Item(dt.mapping.maps[Yt],Jt,$t),er;(er=Ht&&Ht.merge(Zt))&&(Zt=er,Yt?Dt.pop():Ut=Ut.slice(0,Ut.length-1)),Dt.push(Zt),$t&&(Ft++,$t=void 0),Tt||(Ht=Zt)}let Kt=Ft-kt.depth;return Kt>DEPTH_OVERFLOW&&(Ut=cutOffEvents(Ut,Kt),Ft-=Kt),new Branch(Ut.append(Dt),Ft)}remapping(dt,$t){let kt=new Mapping;return this.items.forEach((Tt,Dt)=>{let Ft=Tt.mirrorOffset!=null&&Dt-Tt.mirrorOffset>=dt?kt.maps.length-Tt.mirrorOffset:void 0;kt.appendMap(Tt.map,Ft)},dt,$t),kt}addMaps(dt){return this.eventCount==0?this:new Branch(this.items.append(dt.map($t=>new Item($t))),this.eventCount)}rebased(dt,$t){if(!this.eventCount)return this;let kt=[],Tt=Math.max(0,this.items.length-$t),Dt=dt.mapping,Ft=dt.steps.length,Ut=this.eventCount;this.items.forEach(Zt=>{Zt.selection&&Ut--},Tt);let Ht=$t;this.items.forEach(Zt=>{let er=Dt.getMirror(--Ht);if(er==null)return;Ft=Math.min(Ft,er);let rr=Dt.maps[er];if(Zt.step){let sr=dt.steps[er].invert(dt.docs[er]),nr=Zt.selection&&Zt.selection.map(Dt.slice(Ht+1,er));nr&&Ut++,kt.push(new Item(rr,sr,nr))}else kt.push(new Item(rr))},Tt);let Kt=[];for(let Zt=$t;Zt<Ft;Zt++)Kt.push(new Item(Dt.maps[Zt]));let Yt=this.items.slice(0,Tt).append(Kt).append(kt),Jt=new Branch(Yt,Ut);return Jt.emptyItemCount()>max_empty_items&&(Jt=Jt.compress(this.items.length-kt.length)),Jt}emptyItemCount(){let dt=0;return this.items.forEach($t=>{$t.step||dt++}),dt}compress(dt=this.items.length){let $t=this.remapping(0,dt),kt=$t.maps.length,Tt=[],Dt=0;return this.items.forEach((Ft,Ut)=>{if(Ut>=dt)Tt.push(Ft),Ft.selection&&Dt++;else if(Ft.step){let Ht=Ft.step.map($t.slice(kt)),Kt=Ht&&Ht.getMap();if(kt--,Kt&&$t.appendMap(Kt,kt),Ht){let Yt=Ft.selection&&Ft.selection.map($t.slice(kt));Yt&&Dt++;let Jt=new Item(Kt.invert(),Ht,Yt),Zt,er=Tt.length-1;(Zt=Tt.length&&Tt[er].merge(Jt))?Tt[er]=Zt:Tt.push(Jt)}}else Ft.map&&kt--},this.items.length,0),new Branch(RopeSequence.from(Tt.reverse()),Dt)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(et,dt){let $t;return et.forEach((kt,Tt)=>{if(kt.selection&&dt--==0)return $t=Tt,!1}),et.slice($t)}class Item{constructor(dt,$t,kt,Tt){this.map=dt,this.step=$t,this.selection=kt,this.mirrorOffset=Tt}merge(dt){if(this.step&&dt.step&&!dt.selection){let $t=dt.step.merge(this.step);if($t)return new Item($t.getMap().invert(),$t,this.selection)}}}class HistoryState{constructor(dt,$t,kt,Tt,Dt){this.done=dt,this.undone=$t,this.prevRanges=kt,this.prevTime=Tt,this.prevComposition=Dt}}const DEPTH_OVERFLOW=20;function applyTransaction(et,dt,$t,kt){let Tt=$t.getMeta(historyKey),Dt;if(Tt)return Tt.historyState;$t.getMeta(closeHistoryKey)&&(et=new HistoryState(et.done,et.undone,null,0,-1));let Ft=$t.getMeta("appendedTransaction");if($t.steps.length==0)return et;if(Ft&&Ft.getMeta(historyKey))return Ft.getMeta(historyKey).redo?new HistoryState(et.done.addTransform($t,void 0,kt,mustPreserveItems(dt)),et.undone,rangesFor($t.mapping.maps),et.prevTime,et.prevComposition):new HistoryState(et.done,et.undone.addTransform($t,void 0,kt,mustPreserveItems(dt)),null,et.prevTime,et.prevComposition);if($t.getMeta("addToHistory")!==!1&&!(Ft&&Ft.getMeta("addToHistory")===!1)){let Ut=$t.getMeta("composition"),Ht=et.prevTime==0||!Ft&&et.prevComposition!=Ut&&(et.prevTime<($t.time||0)-kt.newGroupDelay||!isAdjacentTo($t,et.prevRanges)),Kt=Ft?mapRanges(et.prevRanges,$t.mapping):rangesFor($t.mapping.maps);return new HistoryState(et.done.addTransform($t,Ht?dt.selection.getBookmark():void 0,kt,mustPreserveItems(dt)),Branch.empty,Kt,$t.time,Ut??et.prevComposition)}else return(Dt=$t.getMeta("rebased"))?new HistoryState(et.done.rebased($t,Dt),et.undone.rebased($t,Dt),mapRanges(et.prevRanges,$t.mapping),et.prevTime,et.prevComposition):new HistoryState(et.done.addMaps($t.mapping.maps),et.undone.addMaps($t.mapping.maps),mapRanges(et.prevRanges,$t.mapping),et.prevTime,et.prevComposition)}function isAdjacentTo(et,dt){if(!dt)return!1;if(!et.docChanged)return!0;let $t=!1;return et.mapping.maps[0].forEach((kt,Tt)=>{for(let Dt=0;Dt<dt.length;Dt+=2)kt<=dt[Dt+1]&&Tt>=dt[Dt]&&($t=!0)}),$t}function rangesFor(et){let dt=[];for(let $t=et.length-1;$t>=0&&dt.length==0;$t--)et[$t].forEach((kt,Tt,Dt,Ft)=>dt.push(Dt,Ft));return dt}function mapRanges(et,dt){if(!et)return null;let $t=[];for(let kt=0;kt<et.length;kt+=2){let Tt=dt.map(et[kt],1),Dt=dt.map(et[kt+1],-1);Tt<=Dt&&$t.push(Tt,Dt)}return $t}function histTransaction(et,dt,$t){let kt=mustPreserveItems(dt),Tt=historyKey.get(dt).spec.config,Dt=($t?et.undone:et.done).popEvent(dt,kt);if(!Dt)return null;let Ft=Dt.selection.resolve(Dt.transform.doc),Ut=($t?et.done:et.undone).addTransform(Dt.transform,dt.selection.getBookmark(),Tt,kt),Ht=new HistoryState($t?Ut:Dt.remaining,$t?Dt.remaining:Ut,null,0,-1);return Dt.transform.setSelection(Ft).setMeta(historyKey,{redo:$t,historyState:Ht})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(et){let dt=et.plugins;if(cachedPreserveItemsPlugins!=dt){cachedPreserveItems=!1,cachedPreserveItemsPlugins=dt;for(let $t=0;$t<dt.length;$t++)if(dt[$t].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(et={}){return et={depth:et.depth||100,newGroupDelay:et.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(dt,$t,kt){return applyTransaction($t,kt,dt,et)}},config:et,props:{handleDOMEvents:{beforeinput(dt,$t){let kt=$t.inputType,Tt=kt=="historyUndo"?undo:kt=="historyRedo"?redo:null;return Tt?($t.preventDefault(),Tt(dt.state,dt.dispatch)):!1}}}})}function buildCommand(et,dt){return($t,kt)=>{let Tt=historyKey.getState($t);if(!Tt||(et?Tt.undone:Tt.done).eventCount==0)return!1;if(kt){let Dt=histTransaction(Tt,$t,et);Dt&&kt(dt?Dt.scrollIntoView():Dt)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0);Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:et=>et.length,wordCounter:et=>et.split(" ").filter(dt=>dt!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=et=>{const dt=(et==null?void 0:et.node)||this.editor.state.doc;if(((et==null?void 0:et.mode)||this.options.mode)==="textSize"){const kt=dt.textBetween(0,dt.content.size,void 0," ");return this.options.textCounter(kt)}return dt.nodeSize},this.storage.words=et=>{const dt=(et==null?void 0:et.node)||this.editor.state.doc,$t=dt.textBetween(0,dt.content.size," "," ");return this.options.wordCounter($t)}},addProseMirrorPlugins(){let et=!1;return[new Plugin({key:new PluginKey("characterCount"),appendTransaction:(dt,$t,kt)=>{if(et)return;const Tt=this.options.limit;if(Tt==null||Tt===0){et=!0;return}const Dt=this.storage.characters({node:kt.doc});if(Dt>Tt){const Ft=Dt-Tt,Ut=0,Ht=Ft;console.warn(`[CharacterCount] Initial content exceeded limit of ${Tt} characters. Content was automatically trimmed.`);const Kt=kt.tr.deleteRange(Ut,Ht);return et=!0,Kt}et=!0},filterTransaction:(dt,$t)=>{const kt=this.options.limit;if(!dt.docChanged||kt===0||kt===null||kt===void 0)return!0;const Tt=this.storage.characters({node:$t.doc}),Dt=this.storage.characters({node:dt.doc});if(Dt<=kt||Tt>kt&&Dt>kt&&Dt<=Tt)return!0;if(Tt>kt&&Dt>kt&&Dt>Tt||!dt.getMeta("paste"))return!1;const Ut=dt.selection.$head.pos,Ht=Dt-kt,Kt=Ut-Ht,Yt=Ut;return dt.deleteRange(Kt,Yt),!(this.storage.characters({node:dt.doc})>kt)}})]}});var Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:et,selection:dt})=>{const{isEditable:$t,isFocused:kt}=this.editor,{anchor:Tt}=dt,Dt=[];if(!$t||!kt)return DecorationSet.create(et,[]);let Ft=0;this.options.mode==="deepest"&&et.descendants((Ht,Kt)=>{if(Ht.isText)return;if(!(Tt>=Kt&&Tt<=Kt+Ht.nodeSize-1))return!1;Ft+=1});let Ut=0;return et.descendants((Ht,Kt)=>{if(Ht.isText||!(Tt>=Kt&&Tt<=Kt+Ht.nodeSize-1))return!1;if(Ut+=1,this.options.mode==="deepest"&&Ft-Ut>0||this.options.mode==="shallowest"&&Ut>1)return this.options.mode==="deepest";Dt.push(Decoration.node(Kt,Kt+Ht.nodeSize,{class:this.options.className}))}),DecorationSet.create(et,Dt)}}})]}});var Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(et){var dt;const $t={name:et.name,options:et.options,storage:et.storage};return{allowGapCursor:(dt=callOrReturn(getExtensionField(et,"allowGapCursor",$t)))!=null?dt:null}}}),Placeholder=Extension.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("placeholder"),props:{decorations:({doc:et,selection:dt})=>{const $t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:kt}=dt,Tt=[];if(!$t)return null;const Dt=this.editor.isEmpty;return et.descendants((Ft,Ut)=>{const Ht=kt>=Ut&&kt<=Ut+Ft.nodeSize,Kt=!Ft.isLeaf&&isNodeEmpty(Ft);if((Ht||!this.options.showOnlyCurrent)&&Kt){const Yt=[this.options.emptyNodeClass];Dt&&Yt.push(this.options.emptyEditorClass);const Jt=Decoration.node(Ut,Ut+Ft.nodeSize,{class:Yt.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:Ft,pos:Ut,hasAnchor:Ht}):this.options.placeholder});Tt.push(Jt)}return this.options.includeChildren}),DecorationSet.create(et,Tt)}}})]}});Extension.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:et,options:dt}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations($t){return $t.selection.empty||et.isFocused||!et.isEditable||isNodeSelection($t.selection)||et.view.dragging?null:DecorationSet.create($t.doc,[Decoration.inline($t.selection.from,$t.selection.to,{class:dt.className})])}}})]}});function nodeEqualsType({types:et,node:dt}){return dt&&Array.isArray(et)&&et.includes(dt.type)||(dt==null?void 0:dt.type)===et}var TrailingNode=Extension.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const et=new PluginKey(this.name),dt=Object.entries(this.editor.schema.nodes).map(([,$t])=>$t).filter($t=>(this.options.notAfter||[]).concat(this.options.node).includes($t.name));return[new Plugin({key:et,appendTransaction:($t,kt,Tt)=>{const{doc:Dt,tr:Ft,schema:Ut}=Tt,Ht=et.getState(Tt),Kt=Dt.content.size,Yt=Ut.nodes[this.options.node];if(Ht)return Ft.insert(Kt,Yt.create())},state:{init:($t,kt)=>{const Tt=kt.tr.doc.lastChild;return!nodeEqualsType({node:Tt,types:dt})},apply:($t,kt)=>{if(!$t.docChanged)return kt;const Tt=$t.doc.lastChild;return!nodeEqualsType({node:Tt,types:dt})}}})]}}),UndoRedo=Extension.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:et,dispatch:dt})=>undo(et,dt),redo:()=>({state:et,dispatch:dt})=>redo(et,dt)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var et,dt,$t,kt;const Tt=[];return this.options.bold!==!1&&Tt.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&Tt.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&Tt.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&Tt.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&Tt.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&Tt.push(Document$2.configure(this.options.document)),this.options.dropcursor!==!1&&Tt.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&Tt.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&Tt.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&Tt.push(Heading.configure(this.options.heading)),this.options.undoRedo!==!1&&Tt.push(UndoRedo.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&Tt.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&Tt.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&Tt.push(ListItem.configure(this.options.listItem)),this.options.listKeymap!==!1&&Tt.push(ListKeymap.configure((et=this.options)==null?void 0:et.listKeymap)),this.options.link!==!1&&Tt.push(Link.configure((dt=this.options)==null?void 0:dt.link)),this.options.orderedList!==!1&&Tt.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&Tt.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&Tt.push(Strike.configure(this.options.strike)),this.options.text!==!1&&Tt.push(Text.configure(this.options.text)),this.options.underline!==!1&&Tt.push(Underline.configure(($t=this.options)==null?void 0:$t.underline)),this.options.trailingNode!==!1&&Tt.push(TrailingNode.configure((kt=this.options)==null?void 0:kt.trailingNode)),Tt}}),index_default$9=StarterKit,index_default$8=ListItem,index_default$7=BulletList,index_default$6=OrderedList,inputRegex$1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:et=>et.getAttribute("data-color")||et.style.backgroundColor,renderHTML:et=>et.color?{"data-color":et.color,style:`background-color: ${et.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:et}){return["mark",mergeAttributes(this.options.HTMLAttributes,et),0]},renderMarkdown:(et,dt)=>`==${dt.renderChildren(et)}==`,parseMarkdown:(et,dt)=>dt.applyMark("highlight",dt.parseInline(et.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:et=>et.indexOf("=="),tokenize(et,dt,$t){const Tt=/^(==)([^=]+)(==)/.exec(et);if(Tt){const Dt=Tt[2].trim(),Ft=$t.inlineTokens(Dt);return{type:"highlight",raw:Tt[0],text:Dt,tokens:Ft}}}},addCommands(){return{setHighlight:et=>({commands:dt})=>dt.setMark(this.name,et),toggleHighlight:et=>({commands:dt})=>dt.toggleMark(this.name,et),unsetHighlight:()=>({commands:et})=>et.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),index_default$5=Highlight,TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:et=>{const dt=et.style.textAlign;return this.options.alignments.includes(dt)?dt:this.options.defaultAlignment},renderHTML:et=>et.textAlign?{style:`text-align: ${et.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:et=>({commands:dt})=>this.options.alignments.includes(et)?this.options.types.map($t=>dt.updateAttributes($t,{textAlign:et})).every($t=>$t):!1,unsetTextAlign:()=>({commands:et})=>this.options.types.map(dt=>et.resetAttributes(dt,"textAlign")).every(dt=>dt),toggleTextAlign:et=>({editor:dt,commands:$t})=>this.options.alignments.includes(et)?dt.isActive({textAlign:et})?$t.unsetTextAlign():$t.setTextAlign(et):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),index_default$4=TextAlign,index_default$3=Placeholder,MAX_FIND_CHILD_SPAN_DEPTH=20,findChildSpans=(et,dt=0)=>{const $t=[];return!et.children.length||dt>MAX_FIND_CHILD_SPAN_DEPTH||Array.from(et.children).forEach(kt=>{kt.tagName==="SPAN"?$t.push(kt):kt.children.length&&$t.push(...findChildSpans(kt,dt+1))}),$t},mergeNestedSpanStyles=et=>{if(!et.children.length)return;const dt=findChildSpans(et);dt&&dt.forEach($t=>{var kt,Tt;const Dt=$t.getAttribute("style"),Ft=(Tt=(kt=$t.parentElement)==null?void 0:kt.closest("span"))==null?void 0:Tt.getAttribute("style");$t.setAttribute("style",`${Ft};${Dt}`)})},TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:et=>et.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&mergeNestedSpanStyles(et),{}):!1}]},renderHTML({HTMLAttributes:et}){return["span",mergeAttributes(this.options.HTMLAttributes,et),0]},addCommands(){return{toggleTextStyle:et=>({commands:dt})=>dt.toggleMark(this.name,et),removeEmptyTextStyle:()=>({tr:et})=>{const{selection:dt}=et;return et.doc.nodesBetween(dt.from,dt.to,($t,kt)=>{if($t.isTextblock)return!0;$t.marks.filter(Tt=>Tt.type===this.type).some(Tt=>Object.values(Tt.attrs).some(Dt=>!!Dt))||et.removeMark(kt,kt+$t.nodeSize,this.type)}),!0}}}}),BackgroundColor=Extension.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:et=>{var dt;const $t=et.getAttribute("style");if($t){const kt=$t.split(";").map(Tt=>Tt.trim()).filter(Boolean);for(let Tt=kt.length-1;Tt>=0;Tt-=1){const Dt=kt[Tt].split(":");if(Dt.length>=2){const Ft=Dt[0].trim().toLowerCase(),Ut=Dt.slice(1).join(":").trim();if(Ft==="background-color")return Ut.replace(/['"]+/g,"")}}}return(dt=et.style.backgroundColor)==null?void 0:dt.replace(/['"]+/g,"")},renderHTML:et=>et.backgroundColor?{style:`background-color: ${et.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:et=>({chain:dt})=>dt().setMark("textStyle",{backgroundColor:et}).run(),unsetBackgroundColor:()=>({chain:et})=>et().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Color$1=Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:et=>{var dt;const $t=et.getAttribute("style");if($t){const kt=$t.split(";").map(Tt=>Tt.trim()).filter(Boolean);for(let Tt=kt.length-1;Tt>=0;Tt-=1){const Dt=kt[Tt].split(":");if(Dt.length>=2){const Ft=Dt[0].trim().toLowerCase(),Ut=Dt.slice(1).join(":").trim();if(Ft==="color")return Ut.replace(/['"]+/g,"")}}}return(dt=et.style.color)==null?void 0:dt.replace(/['"]+/g,"")},renderHTML:et=>et.color?{style:`color: ${et.color}`}:{}}}}]},addCommands(){return{setColor:et=>({chain:dt})=>dt().setMark("textStyle",{color:et}).run(),unsetColor:()=>({chain:et})=>et().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),FontFamily=Extension.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:et=>et.style.fontFamily,renderHTML:et=>et.fontFamily?{style:`font-family: ${et.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:et=>({chain:dt})=>dt().setMark("textStyle",{fontFamily:et}).run(),unsetFontFamily:()=>({chain:et})=>et().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),FontSize=Extension.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:et=>et.style.fontSize,renderHTML:et=>et.fontSize?{style:`font-size: ${et.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:et=>({chain:dt})=>dt().setMark("textStyle",{fontSize:et}).run(),unsetFontSize:()=>({chain:et})=>et().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),LineHeight=Extension.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:et=>et.style.lineHeight,renderHTML:et=>et.lineHeight?{style:`line-height: ${et.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:et=>({chain:dt})=>dt().setMark("textStyle",{lineHeight:et}).run(),unsetLineHeight:()=>({chain:et})=>et().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Extension.create({name:"textStyleKit",addExtensions(){const et=[];return this.options.backgroundColor!==!1&&et.push(BackgroundColor.configure(this.options.backgroundColor)),this.options.color!==!1&&et.push(Color$1.configure(this.options.color)),this.options.fontFamily!==!1&&et.push(FontFamily.configure(this.options.fontFamily)),this.options.fontSize!==!1&&et.push(FontSize.configure(this.options.fontSize)),this.options.lineHeight!==!1&&et.push(LineHeight.configure(this.options.lineHeight)),this.options.textStyle!==!1&&et.push(TextStyle.configure(this.options.textStyle)),et}});var index_default$2=Color$1;const githubDark="";function Tooltip({text:et}){const[dt,$t]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(null),Dt=reactExports.useRef(null);reactExports.useEffect(()=>{function Ut(Ht){Ht.target.closest(".tooltip-root")||$t(!1)}return document.addEventListener("click",Ut),()=>document.removeEventListener("click",Ut)},[]);function Ft(Ut){Ut.stopPropagation();const Ht=Dt.current.getBoundingClientRect();Tt({top:Ht.bottom+8,left:Ht.left+Ht.width/2}),$t(Kt=>!Kt)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{ref:Dt,type:"button",onClick:Ft,className:"tooltip-root ml-1 text-gray-400 hover:text-green focus:outline-none",children:jsxRuntimeExports.jsx(Info,{size:14,className:"text-current"})}),dt&&kt&&reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{style:{top:kt.top,left:kt.left,transform:"translateX(-50%)"},className:`
              fixed z-[9999]
              w-64
              bg-gray-900
              border border-gray-700
              text-xs text-gray-200
              rounded-lg
              p-3
              shadow-2xl
              normal-case
            `,children:et}),document.body)]})}function debounce(et,dt){let $t;const kt=(...Tt)=>{clearTimeout($t),$t=setTimeout(()=>et(...Tt),dt)};return kt.cancel=()=>clearTimeout($t),kt}function BookEditor({bookId:et,content:dt,setContent:$t}){const kt=et?`book-editor-draft-${et}`:null,[Tt,Dt]=reactExports.useState(!1),[Ft,Ut]=reactExports.useState(null),[Ht,Kt]=reactExports.useState("dark"),Yt=reactExports.useRef(!1),[Jt,Zt]=reactExports.useState([]),[er,rr]=reactExports.useState(!1),sr=Ht==="dark",nr=sr?"bg-[#111] border-gray-800":"bg-gray-100 border-gray-300",ir=sr?"text-gray-300 hover:text-white":"text-gray-800 hover:text-black",or="h-9 flex items-center gap-2 px-3 rounded-md text-sm leading-none",lr=reactExports.useMemo(()=>debounce(({editor:ur})=>{const pr=ur.getHTML();Dt(!0),$t(pr),kt&&localStorage.setItem(kt,pr),setTimeout(()=>Dt(!1),400)},300),[et]);reactExports.useEffect(()=>()=>{lr.cancel()},[lr]);const cr=useEditor({extensions:[TextStyle,index_default$2,index_default$d,index_default$8,index_default$7.configure({keepMarks:!0,keepAttributes:!0}),index_default$6.configure({keepMarks:!0,keepAttributes:!0}),index_default$9.configure({history:!0,bulletList:!1,orderedList:!1,blockquote:!1}),index_default$a,index_default$5,index_default$b.configure({openOnClick:!1}),index_default$4.configure({types:["heading","paragraph","listItem"]}),index_default$3.configure({placeholder:"Start writing your book..."})],editorProps:{attributes:{spellcheck:"true",autocorrect:"on",autocomplete:"on",class:"focus:outline-none prose prose-lg max-w-none leading-relaxed"}},onUpdate:lr});reactExports.useEffect(()=>{!cr||Yt.current||(dt&&cr.commands.setContent(dt,!1),Yt.current=!0)},[cr]);const dr=async ur=>{await axiosInstance.post("/dictionary/add",{word:ur}),Zt(pr=>{const mr=pr.filter(jr=>jr.word!==ur);return mr.length===0&&rr(!1),mr})};return reactExports.useEffect(()=>{if(!cr||Jt.length===0)return;const ur=cr.getText().toLowerCase();Zt(pr=>{const mr=pr.filter(jr=>ur.includes(jr.word.toLowerCase()));return mr.length===0&&rr(!1),mr})},[cr==null?void 0:cr.getText()]),cr&&(window.__EDITOR=cr),cr?jsxRuntimeExports.jsxs("div",{className:`rounded-xl border overflow-hidden
    ${sr?"border-gray-800 bg-[#0b0b0b]":"border-gray-300 bg-white"}
  `,children:[jsxRuntimeExports.jsxs("div",{className:`flex justify-between items-center px-4 py-3 border-b
    ${sr?"bg-[#0b0b0b] border-gray-800":"bg-gray-100 border-gray-300"}
  `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Draft"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:async()=>{if(!cr)return;const ur=cr.getHTML(),pr=cr.getText();Dt(!0),$t(ur),localStorage.setItem(kt,ur),await axiosInstance.post("/books/draft",{bookId:et,draftText:ur});try{const jr=(await axiosInstance.post("/books/spellcheck",{text:pr})).data.issues;jr.length>0?Zt(jr):Zt([])}catch(mr){console.warn("Spellcheck failed, save still succeeded",mr)}Dt(!1),Ut(Date.now())},className:"px-3 py-1 text-xs rounded bg-green text-black",children:"Save"}),Ft&&jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Saved just now"}),jsxRuntimeExports.jsx(Tooltip,{text:'Text wrapped in quotes "like this" or brackets [like this] will be preserved and never rewritten by AI.'})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Kt(sr?"light":"dark"),className:`
      h-8 px-3 rounded-md text-xs font-medium border transition
      ${sr?"border-gray-600 text-white hover:bg-white/10":"border-gray-400 text-gray-900 hover:bg-black/5"}
    `,children:sr?"Light Mode":"Dark Mode"})]}),Jt.length>0&&jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 border-b border-gray-800 bg-[#0b0b0b]",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>rr(ur=>!ur),className:"flex items-center gap-1 text-xs text-yellow-400 hover:underline",children:[" ",Jt.length," issue",Jt.length>1?"s":""]}),er&&jsxRuntimeExports.jsxs("div",{className:"mt-2 w-full rounded-none border border-gray-700 bg-[#111] px-4 py-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs uppercase text-gray-400",children:"Spelling issues"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>rr(!1),className:"text-xs text-gray-400 hover:text-white",children:"Close"})]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:Jt.map((ur,pr)=>jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-white",children:ur.word}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dr(ur.word),className:"text-xs text-green hover:underline",children:"Add to dictionary"})]},pr))})]})]}),jsxRuntimeExports.jsx("div",{className:`sticky top-0 z-10 ${nr}
  px-4 py-3
  border-b
  flex flex-wrap items-center gap-x-6 gap-y-3`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-3 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3 items-center whitespace-nowrap",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().toggleBold().run(),className:`px-2 py-1 rounded-md font-semibold text-lg transition-colors ${cr.isActive("bold")?"text-green/90 bg-green/10":`${ir} ${sr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:"B"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().toggleItalic().run(),className:`px-2 py-1 rounded-md font-semibold text-lg transition-colors ${cr.isActive("italic")?"text-green/90 bg-green/10":`${ir} ${sr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:"I"}),jsxRuntimeExports.jsx("button",{type:"button",className:`px-2 py-1 rounded-md font-semibold text-lg transition-colors ${cr.isActive("underline")?"text-green/90 bg-green/10":`${ir} ${sr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:"U"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().toggleHighlight().run(),className:`px-2 py-1 rounded-md text-sm font-medium transition-colors ${cr.isActive("highlight")?"bg-yellow/80 text-black":`${ir} ${sr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:"HL"})]}),jsxRuntimeExports.jsxs("div",{className:`flex gap-4 items-center pl-6 border-l ${sr?"border-gray-700":"border-gray-300"}`,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().toggleBulletList().run(),className:`p-2 rounded-md ${cr.isActive("bulletList")?"bg-downloadGreen text-black":`${ir} ${sr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Bullet List",children:jsxRuntimeExports.jsx(List,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().toggleOrderedList().run(),className:`p-2 rounded-md ${cr.isActive("orderedList")?"bg-downloadGreen text-black":`${ir} ${sr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Numbered List",children:jsxRuntimeExports.jsx(ListOrdered,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().toggleBlockquote().run(),className:`px-2 py-1 rounded-md font-medium transition-colors ${cr.isActive("blockquote")?"text-green/90 bg-green/10":`${ir} ${sr?"hover:bg-white/5":"hover:bg-black/5"}`}`,children:" Quote"})]}),cr.state.selection.from!==cr.state.selection.to&&jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-3 pl-6 border-l ${sr?"border-gray-700":"border-gray-300"}`,children:[jsxRuntimeExports.jsx("input",{type:"color",onChange:ur=>cr.chain().focus().setColor(ur.target.value).run(),value:cr.getAttributes("textStyle").color||"#ffffff",className:"w-8 h-8 cursor-pointer bg-transparent",title:"Text color"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().unsetColor().run(),className:"text-sm text-gray-400 hover:text-white",children:"Clear"})]}),jsxRuntimeExports.jsxs("div",{className:`flex gap-2 items-center pl-6 border-l ${sr?"border-gray-700":"border-gray-300"}`,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().setTextAlign("left").run(),className:`p-2 rounded-md ${cr.isActive({textAlign:"left"})?"bg-green-500/20 text-green-400":`${ir} ${sr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Align Left",children:jsxRuntimeExports.jsx(TextAlignStart,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().setTextAlign("center").run(),className:`p-2 rounded-md ${cr.isActive({textAlign:"center"})?"bg-green-500/20 text-green-400":`${ir} ${sr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Align Center",children:jsxRuntimeExports.jsx(TextAlignCenter,{size:18})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cr.chain().focus().setTextAlign("right").run(),className:`p-2 rounded-md ${cr.isActive({textAlign:"right"})?"bg-green-500/20 text-green-400":`${ir} ${sr?"hover:bg-gray-700/60":"hover:bg-gray-200"}`}`,title:"Align Right",children:jsxRuntimeExports.jsx(TextAlignEnd,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:`
            flex gap-4 items-center
            w-full sm:w-auto
            sm:ml-auto
            pt-3 sm:pt-0
            mt-3 sm:mt-0
            border-t sm:border-t-0
            ${sr?"border-gray-700":"border-gray-300"}
          `,children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>cr.chain().focus().undo().run(),className:`${or} ${ir}`,children:[jsxRuntimeExports.jsx("span",{className:"text-base",children:""}),jsxRuntimeExports.jsx("span",{children:"Undo"})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>cr.chain().focus().redo().run(),className:`${or} ${ir}`,children:[jsxRuntimeExports.jsx("span",{className:"text-base",children:""}),jsxRuntimeExports.jsx("span",{children:"Redo"})]})]})]})}),jsxRuntimeExports.jsx(EditorContent,{editor:cr,className:`
    prose max-w-none
    ${sr?"prose-invert bg-[#0f0f0f] [&_*]:text-white":"bg-white text-gray-900"}
    type-text
    min-h-[70vh] max-h-[90vh]
    resize-y overflow-auto
    p-8
    focus:outline-none focus:ring-2 focus:ring-green-500/50
  `})]}):null}function FontSelector({fontName:et,setFontName:dt,setFontFile:$t,isFreePlan:kt=!1}){var rr,sr;const Tt=fontThemes.map(nr=>({...nr,locked:kt&&!["Montserrat","AdobeArabic","Bebas Neue"].includes(nr.name)})),[Dt,Ft]=reactExports.useState(et||((rr=Tt==null?void 0:Tt[0])==null?void 0:rr.name)||""),[Ut,Ht]=reactExports.useState(Dt),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(!1);reactExports.useEffect(()=>{const nr=Tt.find(lr=>lr.name===Ut);if(!(nr!=null&&nr.file))return;const ir=nr.file.startsWith("http")?nr.file:`${window.location.origin}${nr.file}`;new FontFace(nr.name,`url(${ir})`).load().then(lr=>{document.fonts.add(lr),Zt(!0)}).catch(()=>Zt(!1))},[Ut]);const er=nr=>{Ft(nr.name),dt(nr.name),$t(nr.file),Ht(nr.name),Yt(!1)};return jsxRuntimeExports.jsxs("div",{className:`
      w-full relative mt-4
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light
      dark:border-dashboard-border-dark
      rounded-xl
      p-5
      shadow-inner
    `,children:[jsxRuntimeExports.jsxs("h3",{className:`
        flex items-center gap-2 text-lg font-semibold pb-6
        text-dashboard-text-light
        dark:text-dashboard-text-dark
`,children:[jsxRuntimeExports.jsx(Type,{size:18,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"}),"Font Style",jsxRuntimeExports.jsx(Tooltip,{text:"Choose how your book text appears. You can change fonts anytime before exporting or publishing."})]}),jsxRuntimeExports.jsx("div",{className:`
  mb-4 p-4 rounded-xl text-center
  bg-dashboard-hover-light
  dark:bg-dashboard-hover-dark
  border border-dashboard-border-light
  dark:border-dashboard-border-dark
`,style:{fontFamily:Jt?Ut:"sans-serif",transition:"all 0.3s ease"},children:jsxRuntimeExports.jsx("p",{className:`
          font-medium
          text-dashboard-text-light
          dark:text-dashboard-text-dark`,style:{fontSize:Ut==="AdobeArabic"?"24px":"20px",lineHeight:Ut==="AdobeArabic"?"1.2":"1.5"},children:"AaBbCc  The quick brown fox jumps over the lazy dog."})}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Yt(!Kt),className:`
        w-full flex items-center justify-between
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        text-base rounded-lg p-2.5
        hover:bg-dashboard-hover-light
        dark:hover:bg-dashboard-hover-dark
        transition
        `,style:{fontFamily:Jt?Dt:"sans-serif"},children:[jsxRuntimeExports.jsx("span",{children:((sr=Tt.find(nr=>nr.name===Dt))==null?void 0:sr.label)||Dt}),Kt?jsxRuntimeExports.jsx(ChevronUp,{size:18}):jsxRuntimeExports.jsx(ChevronDown,{size:18})]}),Kt&&jsxRuntimeExports.jsx("div",{className:`
          absolute z-20 mt-2 w-full max-h-[260px] overflow-y-auto
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          rounded-lg shadow-lg
          scrollbar-thin
          scrollbar-thumb-dashboard-border-light
          dark:scrollbar-thumb-dashboard-border-dark
          scrollbar-track-transparent
        `,children:Tt.map(nr=>jsxRuntimeExports.jsxs("div",{onMouseEnter:()=>!nr.locked&&Ht(nr.name),onClick:()=>!nr.locked&&er(nr),className:`px-4 py-2 transition-all duration-150 cursor-pointer ${nr.locked?"text-dashboard-muted-light dark:text-dashboard-muted-dark cursor-not-allowed opacity-60 grayscale":"text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"} ${Dt===nr.name?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark":""}`,style:{fontFamily:nr.name},children:[nr.label,nr.locked&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-yellow-500",children:""})]},nr.name))}),kt&&jsxRuntimeExports.jsx("p",{className:"text-xs text-yellow-400 mt-2 text-center",children:"Upgrade to unlock all fonts."}),jsxRuntimeExports.jsx("p",{className:`
        text-xs mt-3 text-center
        text-dashboard-muted-light
        dark:text-dashboard-muted-dark
      `,children:"Hover to preview, click to select."})]})}function SectionSelector({sections:et,activeSectionId:dt,setActiveSectionId:$t,text:kt,setText:Tt,setSections:Dt,autoSaveDraft:Ft}){const Ut=reactExports.useRef(null),[Ht,Kt]=reactExports.useState(!1);reactExports.useEffect(()=>{function Zt(er){Ut.current&&!Ut.current.contains(er.target)&&Kt(!1)}return Ht&&document.addEventListener("mousedown",Zt),()=>{document.removeEventListener("mousedown",Zt)}},[Ht]);const Yt=et.find(Zt=>Zt.id===dt);function Jt(Zt){Dt(er=>er.map(rr=>rr.id===dt?{...rr,content:kt}:rr)),$t(Zt.id),Tt(Zt.content||""),Kt(!1),Ft==null||Ft()}return jsxRuntimeExports.jsxs("div",{ref:Ut,className:"relative w-full sm:w-auto sm:min-w-[220px]",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Kt(Zt=>!Zt),className:`
          w-full flex items-center justify-between
          rounded-lg px-4 py-2 text-sm transition
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          hover:bg-dashboard-hover-light
          dark:hover:bg-dashboard-hover-dark
        `,children:[jsxRuntimeExports.jsx("span",{className:"truncate",children:(Yt==null?void 0:Yt.title)||"Untitled Section"}),Ht?jsxRuntimeExports.jsx(ChevronUp,{size:16,className:"opacity-80"}):jsxRuntimeExports.jsx(ChevronDown,{size:16,className:"opacity-80"})]}),Ht&&jsxRuntimeExports.jsx("div",{className:`
            absolute z-30 mt-2 w-full
            rounded-lg shadow-lg
            max-h-[260px] overflow-y-auto
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
          `,children:et.map(Zt=>{const er=Zt.id===dt;return jsxRuntimeExports.jsx("div",{onClick:()=>Jt(Zt),className:`
                  px-4 py-2 cursor-pointer text-sm transition
                  ${er?`
                        bg-dashboard-hover-light
                        dark:bg-dashboard-hover-dark
                        text-dashboard-text-light
                        dark:text-dashboard-text-dark
                      `:`
                        text-dashboard-text-light/70
                        dark:text-dashboard-text-dark/70
                        hover:bg-dashboard-hover-light
                        dark:hover:bg-dashboard-hover-dark
                      `}
                `,children:Zt.title||"Untitled Section"},Zt.id)})})]})}function BookPromptForm({text:et,setText:dt,pageCount:$t,setPageCount:kt,link:Tt,setLink:Dt,cover:Ft,setCover:Ut,title:Ht,setTitle:Kt,authorName:Yt,bookName:Jt,setBookName:Zt,bookType:er,setBookType:rr,loading:sr,bookId:nr,partLocked:ir,partNumber:or,onClose:lr,setShowGenerating:cr,fontName:dr,setFontName:ur,fontFile:pr,setFontFile:mr}){const[Rr,xr]=reactExports.useState(!1),[kr,Mr]=reactExports.useState(!1),[Tr,Or]=reactExports.useState(null);useAuth();const[_r,Pr]=reactExports.useState(sessionStorage.getItem("shownDraftBanner")==="true"),[br,wr]=reactExports.useState(Yt||""),[zr,Hr]=reactExports.useState(!1),[Yr,es]=reactExports.useState(!1),[rs,Wr]=reactExports.useState(!1),[Xr,ns]=reactExports.useState(""),[gs,us]=reactExports.useState(""),[ps,cs]=reactExports.useState(null),ss=reactExports.useRef(""),fs=reactExports.useRef(!1),[hs,$s]=reactExports.useState(!1),[ks,Ds]=reactExports.useState(!0),[_s,As]=reactExports.useState([{id:"section-1",title:"Section 1",content:""}]),[Ns,Is]=reactExports.useState("section-1"),[zs,Gs]=reactExports.useState(null),[Ws,Qs]=reactExports.useState(""),qs=_s.find(ls=>ls.id===Ns),Bs=qs?xs(qs.content):0,Js=_s.reduce((ls,ys)=>ls+xs(ys.content),0),Ys=!!nr&&(fs.current||Yr);reactExports.useEffect(()=>{_s.length===1&&_s[0].id==="section-1"&&!_s[0].content&&(et!=null&&et.trim())&&As(ls=>[{...ls[0],content:et}])},[et]);async function ln(ls){const ys=ls.target.files[0];if(ys){Hr(!0);try{const ws=ys.name.split(".").pop().toLowerCase();let Ss="";if(ws==="txt")Ss=await ys.text();else if(ws==="docx"){const vs=await __vitePreload(()=>import("./index-81c96219.js").then(Rs=>Rs.i),[]),as=await ys.arrayBuffer();Ss=(await vs.extractRawText({arrayBuffer:as})).value||""}else{y$4.error("Unsupported file. Please upload .txt or .docx");return}const Fs=xs(Ss);if(Fs>3e3){y$4.error(`This file contains ${Fs.toLocaleString()} words. 
The maximum allowed per chapter is ${3e3.toLocaleString()}. 
Please split the file into multiple chapters.`);return}dt(Ss),y$4.success(`Imported ${Fs.toLocaleString()} words successfully`)}catch(ws){console.error("Upload failed:",ws),y$4.error("Failed to import file.")}finally{Hr(!1),ls.target.value=""}}}reactExports.useEffect(()=>{dt(""),Kt(""),As([{id:"section-1",title:"Section 1",content:""}]),Is("section-1"),es(!1),Or(null),wr(Yt||""),Mr(!1),$s(!1),ss.current="",fs.current=!1,Ds(!0)},[nr]),reactExports.useEffect(()=>{async function ls(){var ys,ws,Ss;if(!nr){Ds(!1);return}try{const Fs=or>1?`/books/${nr}/part/${or}/draft`:`/books/draft/${nr}`,vs=await axiosInstance.get(Fs);if((ys=vs.data)!=null&&ys.sections_json){const js=(Array.isArray(vs.data.sections_json)?vs.data.sections_json:JSON.parse(vs.data.sections_json)).filter(Rs=>Rs.source==="gpt");if(js.length){es(!0),As(js),Is(js[0].id),dt(js[0].content||""),vs.data.book_name&&Zt(vs.data.book_name),vs.data.link&&Dt(vs.data.link),vs.data.author_name&&wr(vs.data.author_name),vs.data.book_type&&rr(vs.data.book_type),vs.data.title&&Kt(vs.data.title),fs.current=!0;return}}if((ws=vs.data)!=null&&ws.draft_text){if(es(!1),vs.data.sections_json){const as=Array.isArray(vs.data.sections_json)?vs.data.sections_json:JSON.parse(vs.data.sections_json);as.length&&(As(as),Is(as[0].id),dt(as[0].content||"")),fs.current=!0}else dt(vs.data.draft_text||"");vs.data.book_name&&Zt(vs.data.book_name),vs.data.link&&Dt(vs.data.link),vs.data.last_saved_at&&Or(vs.data.last_saved_at),vs.data.author_name&&wr(vs.data.author_name),vs.data.book_type&&rr(vs.data.book_type),vs.data.title&&Kt(vs.data.title),_r||(Mr(!0),y$4.info("Loaded saved draft "),setTimeout(()=>Mr(!1),4e3),sessionStorage.setItem("shownDraftBanner","true"),Pr(!0));return}}catch(Fs){((Ss=Fs.response)==null?void 0:Ss.status)!==404&&console.error("Failed to load draft:",Fs)}finally{Ds(!1)}}ls()},[nr,or]),reactExports.useEffect(()=>{if(!nr||!_s.length||Rr||!fs.current)return;const ls=JSON.stringify(_s);if(ls===ss.current)return;const ys=setTimeout(()=>{Qn(),ss.current=ls},1500);return()=>clearTimeout(ys)},[_s]),reactExports.useEffect(()=>{if(!nr)return;const ls=()=>{const ys=or>1?`/books/${nr}/part/${or}/draft`:"/books/draft";navigator.sendBeacon(ys,JSON.stringify({bookId:nr,sections:_s,bookName:Jt,link:Tt,author_name:br||Yt,book_type:er,font_name:dr,font_file:pr}))};return window.addEventListener("beforeunload",ls),()=>window.removeEventListener("beforeunload",ls)},[nr,or,_s,Jt,Tt,br,Yt,er,dr,pr]);const[,Pn]=reactExports.useState(0);reactExports.useEffect(()=>{const ls=setInterval(()=>{Pn(ys=>ys+1)},6e4);return()=>clearInterval(ls)},[]);async function Qn(){try{xr(!0),await axiosInstance.post(or>1?`/books/${nr}/part/${or}/draft`:"/books/draft",{bookId:nr,draftText:et,sections:_s,bookName:Jt,link:Tt,author_name:br||Yt,book_type:er,font_name:dr,font_file:pr}),Or(new Date().toISOString()),$s(!0),setTimeout(()=>{$s(!1)},4e3)}catch(ls){console.error("Auto-save failed",ls)}finally{xr(!1)}}async function xo(){if(!(et!=null&&et.trim())){y$4.warn("Write something before saving!");return}xr(!0);try{await axiosInstance.post(`/books/${nr}/part/${or}/draft`,{draftText:et,sections:_s,title:chapterTitle}),y$4.success("Draft saved successfully ")}catch(ls){console.error("Save draft failed:",ls),y$4.error("Failed to save draft")}finally{xr(!1)}}async function Os(ls){ls.preventDefault();const ys=_s.reduce((vs,as)=>as.id===Ns?vs+xs(et):vs+xs(as.content),0);if(ys>3e3){y$4.error(`This chapter has ${ys.toLocaleString()} words. The maximum allowed is ${3e3.toLocaleString()}. Please split this into another chapter.`);return}As(vs=>vs.map(as=>as.id===Ns?{...as,content:et}:as));const ws=_s.map(vs=>vs.id===Ns?{...vs,content:et}:vs),Ss=ws.map((vs,as)=>`Section ${as+1}: ${vs.title||"Untitled"}
${vs.content||""}`).join(`

`),Fs={bookId:nr,prompt:Ss||et,sections:ws,pages:$t,link:Tt,coverImage:Ft,bookName:Jt,authorName:Yt,bookType:er,title:Ht,font_name:dr,font_file:pr,partNumber:or,isEditing:Yr===!0};try{cr(!0),lr(),axiosInstance.post("/books/prompt",Fs),y$4.success("Your chapter is being generated "),localStorage.removeItem("bookDraftLocal")}catch(vs){console.error("Generation failed to start:",vs),y$4.error("Failed to start generation"),cr(!1)}}function ds(ls){if(!ls)return null;const ys=new Date(ls),ws=Date.now()-ys.getTime(),Ss=Math.floor(ws/6e4);if(Ss<1)return"just now";if(Ss<60)return`${Ss} minute${Ss!==1?"s":""} ago`;const Fs=Math.floor(Ss/60);if(Fs<24)return`${Fs} hour${Fs!==1?"s":""} ago`;const vs=Math.floor(Fs/24);return`${vs} day${vs!==1?"s":""} ago`}function Gr(ls){if(!ls)return"";const ys=Date.now()-new Date(ls).getTime(),ws=Math.floor(ys/6e4);if(ws<1)return"";if(ws===1)return"Saved 1 minute ago";if(ws<60)return`Saved ${ws} minutes ago`;const Ss=Math.floor(ws/60);return`Saved ${Ss} hour${Ss!==1?"s":""} ago`}function bs(){if(!Xr.trim()){y$4.warn("Enter text to find");return}const ls=new RegExp(Xr,"gi"),ys=et.replace(ls,gs);dt(ys),y$4.success("Replaced!"),Wr(!1)}function xs(ls=""){const ys=ls.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();return ys?ys.split(" ").length:0}function ms(ls){const ys=_s.find(Fs=>Fs.id===ls);if(!ys)return;const ws=_s.filter(Fs=>Fs.id!==ls);As(ws);const Ss=ws[0];Ss?(Is(Ss.id),dt(Ss.content||"")):(Is(null),dt("")),cs(ys),y$4(Fs=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-white",children:"Section deleted"}),jsxRuntimeExports.jsx("button",{onClick:()=>{As(vs=>[...vs,ys]),Is(ys.id),dt(ys.content||""),cs(null),y$4.dismiss(Fs.id)},className:"text-sm px-2 py-1 rounded bg-green text-black font-medium",children:"Undo"})]}),{duration:5e3}),setTimeout(()=>{cs(null)},5e3)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[kr&&jsxRuntimeExports.jsxs("div",{className:"mb-4 text-center py-2 px-4 bg-green/20 border border-green text-green rounded-lg animate-fadeIn transition-all duration-500 ease-out transform",children:[" Restored your last saved draft"," ",Tr&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["(saved ",ds(Tr),")"]})]}),jsxRuntimeExports.jsx("form",{onSubmit:Os,children:jsxRuntimeExports.jsxs("div",{className:`
          bg-dashboard-bg-light
          dark:bg-dashboard-bg-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          rounded-2xl
          shadow-2xl
          px-8 py-8
          space-y-6
        `,children:[jsxRuntimeExports.jsxs("div",{className:`
            rounded-xl
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            px-6 py-6
            space-y-5
          `,children:[jsxRuntimeExports.jsx("div",{className:`
              text-xs uppercase tracking-wide
              text-dashboard-text-muted-light
              dark:text-dashboard-text-muted-dark
            `,children:"Book Details"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-1 mb-2 font-medium
      text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:["Book Name",jsxRuntimeExports.jsx(Tooltip,{text:"You can change the book name anytime. It wont affect your content or progress."})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Shining",value:Jt,onChange:ls=>Zt(ls.target.value),className:`w-full px-4 py-3 rounded-lg
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                text-dashboard-text-light dark:text-dashboard-text-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
                placeholder-dashboard-muted-light dark:placeholder-dashboard-muted-dark`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-1 text-dashboard-muted-light
              dark:text-dashboard-muted-dark mb-2 font-medium`,children:["Author Name",jsxRuntimeExports.jsx(Lock,{size:14,className:"text-gray-500"}),jsxRuntimeExports.jsx(Tooltip,{text:"The author name is set when the book is first created and cant be changed."})]}),jsxRuntimeExports.jsx("input",{type:"text",value:br||Yt||"",readOnly:!0,className:`w-full px-4 py-3 rounded-lg bg-dashboard-bg-light
                dark:bg-dashboard-bg-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                placeholder-dashboard-muted-light
                dark:placeholder-dashboard-muted-dark`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-1 text-dashboard-muted-light
                dark:text-dashboard-muted-dark mb-2 font-medium`,children:["Book Type",jsxRuntimeExports.jsx(Lock,{size:14,className:"text-gray-500"}),jsxRuntimeExports.jsx(Tooltip,{text:"Book type is chosen before setup and cant be changed"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:er?er.charAt(0).toUpperCase()+er.slice(1):"",readOnly:!0,className:`w-full px-4 py-3 rounded-lg bg-dashboard-bg-light
                dark:bg-dashboard-bg-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                placeholder-dashboard-muted-light
                dark:placeholder-dashboard-muted-dark`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`block text-dashboard-muted-light
              dark:text-dashboard-muted-dark mb-2 font-medium`,children:["Chapter Title",jsxRuntimeExports.jsx(Tooltip,{text:"Each section can have its own chapter title. This helps organize longer books."})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Black Widow",value:Ht,onChange:ls=>Kt(ls.target.value),className:`w-full px-4 py-3 rounded-lg bg-dashboard-bg-light
                dark:bg-dashboard-bg-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                placeholder-dashboard-muted-light
                dark:placeholder-dashboard-muted-dark`})]})]}),jsxRuntimeExports.jsxs("div",{className:`
            rounded-xl
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            px-6 py-5
            space-y-4
          `,children:[jsxRuntimeExports.jsxs("div",{className:"text-xs uppercase tracking-wide text-gray-400",children:["Import & Tools",jsxRuntimeExports.jsx(Tooltip,{text:"Import text from a PDF, DOC, or TXT file. Nothing is published automatically. Use Find & Replace to refine content before finalizing your chapter."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:".txt,.doc,.docx",id:"bookUpload",onChange:ln,className:"hidden"}),jsxRuntimeExports.jsxs("label",{htmlFor:"bookUpload",className:`
                cursor-pointer
                px-5 py-3
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                rounded-lg
                transition
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                flex items-center gap-2
  `,children:[jsxRuntimeExports.jsx(CloudUpload,{size:18}),"Upload File"]}),zr&&jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"Processing"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Wr(!0),className:`
                cursor-pointer
                px-5 py-3
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                rounded-lg
                transition
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                flex items-center gap-2
  `,children:[jsxRuntimeExports.jsx(Replace,{size:18}),"Find & Replace"]})]})]}),jsxRuntimeExports.jsxs("div",{className:`
            rounded-xl
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            px-6 py-5
            space-y-4
          `,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs uppercase tracking-wide text-gray-500",children:["Section",jsxRuntimeExports.jsx(Tooltip,{text:"Sections let you break your chapter into parts. Switching sections saves your work automatically. You can add, rename, or delete sections anytime. Each chapter can contain up to 3,000 total words across all sections. If you exceed the limit, split your content into another chapter or part."})]}),jsxRuntimeExports.jsx(SectionSelector,{sections:_s,activeSectionId:Ns,setActiveSectionId:Is,text:et,setText:dt,setSections:As,autoSaveDraft:Qn}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const ls=`section-${_s.length+1}`,ys={id:ls,title:`Section ${_s.length+1}`,content:""};As(ws=>[...ws,ys]),Is(ls),dt("")},className:`
                sm:ml-auto
                w-full sm:w-auto
                px-4 py-2
                bg-gray-800 hover:bg-gray-700
                rounded-lg
                text-sm text-white
              `,children:"+ Add Section"})]}),qs&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:zs===Ns?jsxRuntimeExports.jsxs("div",{className:"max-w-md space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Rename section"}),jsxRuntimeExports.jsx("input",{autoFocus:!0,value:Ws,onChange:ls=>Qs(ls.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-lg px-3 py-2 text-white"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Gs(null),Qs("")},className:"px-3 py-1 text-sm bg-gray-700 rounded text-white",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{As(ls=>ls.map(ys=>ys.id===Ns?{...ys,title:Ws.trim()||ys.title}:ys)),Gs(null)},className:"px-3 py-1 text-sm bg-green rounded text-black font-medium",children:"Save"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold text-white cursor-pointer hover:opacity-80",onClick:()=>{Gs(Ns),Qs(qs.title||"")},children:[" ",qs.title||"Untitled Section"]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400",children:["Section, ",Bs.toLocaleString()," ","words"]}),jsxRuntimeExports.jsxs("div",{className:`text-xs ${Js>3e3?"text-red-400":"text-gray-400"}`,children:["Chapter total,"," ",Js.toLocaleString()," /"," ",3e3.toLocaleString()," words"]})]})]}),_s.length>1&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ms(Ns),className:"text-xs px-3 py-1 rounded-lg bg-red-900/30 text-red-400 hover:bg-red-900/50 transition",children:"Delete"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs text-green mb-2",children:[jsxRuntimeExports.jsx("div",{className:"h-4 text-xs text-green",children:jsxRuntimeExports.jsx("span",{className:`transition-opacity duration-300 ${hs||Tr?"opacity-100":"opacity-0"}`,children:hs?"Saved just now":Tr?Gr(Tr):""})}),Rr&&jsxRuntimeExports.jsx("span",{className:"text-gray-500 italic",children:"Saving"})]}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-700 bg-black/30 rounded-xl",children:[Js>3e3*.9&&jsxRuntimeExports.jsx("div",{className:"mb-2 text-xs text-yellow-400",children:"Youre approaching the chapter word limit. Consider splitting into a new chapter."}),ks?jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-gray-400 italic",children:"Loading your draft"}):jsxRuntimeExports.jsx(BookEditor,{bookId:nr,content:et,setContent:ls=>{dt(ls),As(ys=>ys.map(ws=>ws.id===Ns?{...ws,content:ls}:ws))}},`${nr}-${or}`)]}),jsxRuntimeExports.jsx(FontSelector,{fontName:dr,setFontName:ur,fontFile:pr,setFontFile:mr}),jsxRuntimeExports.jsx(CoverUpload,{cover:Ft,setCover:Ut}),er!=="non-fiction"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:`block text-dashboard-muted-light
dark:text-dashboard-muted-dark mb-2 font-medium`,children:"Number of Pages"}),jsxRuntimeExports.jsx("div",{className:"relative w-full max-w-xs",children:jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:"10",value:$t??"",onChange:ls=>kt(Number(ls.target.value)),className:"w-full py-3 pr-20 pl-4 rounded-lg bg-gray-800 text-white border border-gray-600 text-lg"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-2 text-dashboard-muted-light
            dark:text-dashboard-muted-dark mb-2 font-medium`,children:[jsxRuntimeExports.jsx(Link$1,{size:16,className:"text-gray-400"}),"Optional Website or Author Link"]}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://yourwebsite.com",value:Tt,onChange:ls=>Dt(ls.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:`
            mt-8
            pt-6
            border-t border-gray-700
            flex flex-col sm:flex-row gap-3
          `,children:[!ir&&jsxRuntimeExports.jsx("button",{type:"button",onClick:xo,disabled:Rr||!Ys,className:`flex-1 px-6 py-3 rounded-xl font-semibold text-lg shadow-lg transition ${Rr||!Ys?"bg-gray-700 opacity-50 cursor-not-allowed":"bg-gray-700 hover:bg-green hover:text-black"}`,children:Rr?"Saving...":Ys?"Save Draft":"Create chapter first"}),!sr&&jsxRuntimeExports.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 rounded-xl bg-bookBtnColor text-black font-semibold text-lg shadow-lg hover:opacity-90 transition flex items-center justify-center gap-2",children:Yr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookOpenCheck,{size:18,className:"text-black"}),"Commit Final Chapter"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Rocket,{size:18,className:"text-black"}),"Generate Chapter"]})}),rs&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-6 rounded-xl w-full max-w-md",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl text-white mb-4 font-semibold",children:"Find & Replace"}),jsxRuntimeExports.jsx("label",{className:`text-dashboard-muted-light
                  dark:text-dashboard-muted-dark text-sm`,children:"Find"}),jsxRuntimeExports.jsx("input",{type:"text",value:Xr,onChange:ls=>ns(ls.target.value),className:"w-full px-4 py-2 mb-3 rounded-lg bg-gray-800 text-white border border-gray-600"}),jsxRuntimeExports.jsx("label",{className:`text-dashboard-muted-light
                  dark:text-dashboard-muted-dark text-sm`,children:"Replace With"}),jsxRuntimeExports.jsx("input",{type:"text",value:gs,onChange:ls=>us(ls.target.value),className:"w-full px-4 py-2 mb-4 rounded-lg bg-gray-800 text-white border border-gray-600"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Wr(!1),className:"px-4 py-2 bg-gray-700 rounded-lg text-sm",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:bs,className:"px-4 py-2 bg-green text-black font-semibold rounded-lg text-sm",children:"Replace"})]})]})})]})]})})]})}function BookPromptModal({isOpen:et,onClose:dt,bookId:$t,partNumber:kt=1,onSubmitted:Tt,onCompleted:Dt,setShowGenerating:Ft,initialBookData:Ut}){const[Ht,Kt]=reactExports.useState(""),[Yt,Jt]=reactExports.useState(10),[Zt,er]=reactExports.useState(""),[rr,sr]=reactExports.useState(null),[nr,ir]=reactExports.useState(""),[or,lr]=reactExports.useState(!1),[cr,dr]=reactExports.useState(!1),[ur,pr]=reactExports.useState(!1),[mr,jr]=reactExports.useState((Ut==null?void 0:Ut.bookName)||""),[Rr,xr]=reactExports.useState((Ut==null?void 0:Ut.authorName)||""),[kr,Mr]=reactExports.useState((Ut==null?void 0:Ut.bookType)||"fiction"),[Tr,Or]=reactExports.useState("Classic AdobeArabic"),[_r,Pr]=reactExports.useState("/fonts/AdobeArabic-Regular.ttf");reactExports.useEffect(()=>{Ut&&(jr(Ut.bookName||""),xr(Ut.authorName||""),Mr(Ut.bookType||"fiction"))},[Ut]),reactExports.useEffect(()=>{et||(Kt(""),Jt(10),er(""),sr(null),ir(""),xr(""))},[et]);async function br(wr){var zr,Hr;if(wr.preventDefault(),!Ht.trim()){y$4.error("Please enter your book idea or prompt first.");return}dt(),Ft(!0);try{axiosInstance.post("/books/prompt",{bookId:$t,prompt:Ht,sections,pages:Yt,link:Zt,coverImage:rr,title:nr,authorName:Rr,bookName:mr,partNumber:kt,bookType:kr}),y$4.success(" Book section generated successfully!"),typeof Dt=="function"&&Dt(),typeof Tt=="function"&&Tt($t,Ht)}catch(Yr){Ft(!1),y$4.error(((Hr=(zr=Yr.response)==null?void 0:zr.data)==null?void 0:Hr.message)||"Book generation failed. Try again."),console.error(" Book generation error:",Yr)}finally{lr(!1)}}return et?jsxRuntimeExports.jsxs("div",{className:`
        fixed inset-0 z-50
        flex flex-col overflow-hidden
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
      `,children:[jsxRuntimeExports.jsxs("div",{className:`
    relative flex items-center justify-center
    px-6 py-5
    border-b border-dashboard-border-light
    dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light
    dark:bg-dashboard-sidebar-dark
  `,children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold text-center text-dashboard-text-light dark:text-dashboard-text-dark",children:[" Build Your Novel  Part ",kt]}),jsxRuntimeExports.jsx("button",{onClick:dt,className:`
            absolute left-6 md:left-36
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
            hover:text-dashboard-text-light
            dark:hover:text-dashboard-text-dark
            transition
            text-lg
          `,children:" Back"})]}),jsxRuntimeExports.jsx("div",{className:`
        flex-1 overflow-y-auto
        p-8
        max-w-5xl mx-auto w-full
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
      `,children:jsxRuntimeExports.jsx(BookPromptForm,{text:Ht,setText:Kt,pageCount:Yt,setPageCount:Jt,link:Zt,setLink:er,cover:rr,setCover:sr,title:nr,setTitle:ir,authorName:Rr,setAuthorName:xr,bookName:mr,setBookName:jr,bookType:kr,setBookType:Mr,onSubmit:br,loading:or,showPreview:cr,setShowPreview:dr,setShowGenerating:Ft,bookId:$t,setBookId:()=>{},partLocked:ur,partNumber:kt,onClose:dt,fontName:Tr,setFontName:Or,fontFile:_r,setFontFile:Pr},`${$t}-${kt}`)})]}):null}const isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(et){Number.isInteger(et)&&(verbosity=et)}function getVerbosityLevel(){return verbosity}function info(et){verbosity>=VerbosityLevel.INFOS&&console.info(`Info: ${et}`)}function warn(et){verbosity>=VerbosityLevel.WARNINGS&&console.warn(`Warning: ${et}`)}function unreachable(et){throw new Error(et)}function assert(et,dt){et||unreachable(dt)}function _isValidProtocol(et){switch(et==null?void 0:et.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(et,dt=null,$t=null){if(!et)return null;if($t&&typeof et=="string"){if($t.addDefaultProtocol&&et.startsWith("www.")){const Tt=et.match(/\./g);(Tt==null?void 0:Tt.length)>=2&&(et=`http://${et}`)}if($t.tryConvertEncoding)try{et=stringToUTF8String(et)}catch{}}const kt=dt?URL.parse(et,dt):URL.parse(et);return _isValidProtocol(kt)?kt:null}function updateUrlHash(et,dt,$t=!1){const kt=URL.parse(et);return kt?(kt.hash=dt,kt.href):$t&&createValidAbsoluteUrl(et,"http://example.com")?et.split("#",1)[0]+`${dt?`#${dt}`:""}`:""}function shadow(et,dt,$t,kt=!1){return Object.defineProperty(et,dt,{value:$t,enumerable:!kt,configurable:!0,writable:!1}),$t}const BaseException=function et(){function dt($t,kt){this.message=$t,this.name=kt}return dt.prototype=new Error,dt.constructor=dt,dt}();class PasswordException extends BaseException{constructor(dt,$t){super(dt,"PasswordException"),this.code=$t}}class UnknownErrorException extends BaseException{constructor(dt,$t){super(dt,"UnknownErrorException"),this.details=$t}}class InvalidPDFException extends BaseException{constructor(dt){super(dt,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(dt,$t,kt){super(dt,"ResponseException"),this.status=$t,this.missing=kt}}class FormatError extends BaseException{constructor(dt){super(dt,"FormatError")}}class AbortException extends BaseException{constructor(dt){super(dt,"AbortException")}}function bytesToString(et){(typeof et!="object"||(et==null?void 0:et.length)===void 0)&&unreachable("Invalid argument for bytesToString");const dt=et.length,$t=8192;if(dt<$t)return String.fromCharCode.apply(null,et);const kt=[];for(let Tt=0;Tt<dt;Tt+=$t){const Dt=Math.min(Tt+$t,dt),Ft=et.subarray(Tt,Dt);kt.push(String.fromCharCode.apply(null,Ft))}return kt.join("")}function stringToBytes(et){typeof et!="string"&&unreachable("Invalid argument for stringToBytes");const dt=et.length,$t=new Uint8Array(dt);for(let kt=0;kt<dt;++kt)$t[kt]=et.charCodeAt(kt)&255;return $t}function string32(et){return String.fromCharCode(et>>24&255,et>>16&255,et>>8&255,et&255)}function isLittleEndian(){const et=new Uint8Array(4);return et[0]=1,new Uint32Array(et.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:dt,userAgent:$t}=navigator;return shadow(this,"platform",{isAndroid:$t.includes("Android"),isLinux:dt.includes("Linux"),isMac:dt.includes("Mac"),isWindows:dt.includes("Win"),isFirefox:$t.includes("Firefox")})}static get isCSSRoundSupported(){var dt,$t;return shadow(this,"isCSSRoundSupported",($t=(dt=globalThis.CSS)==null?void 0:dt.supports)==null?void 0:$t.call(dt,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),et=>et.toString(16).padStart(2,"0"));var v0,gw,Vv,q2;class Util{static makeHexColor(dt,$t,kt){return`#${hexNumbers[dt]}${hexNumbers[$t]}${hexNumbers[kt]}`}static domMatrixToTransform(dt){return[dt.a,dt.b,dt.c,dt.d,dt.e,dt.f]}static scaleMinMax(dt,$t){let kt;dt[0]?(dt[0]<0&&(kt=$t[0],$t[0]=$t[2],$t[2]=kt),$t[0]*=dt[0],$t[2]*=dt[0],dt[3]<0&&(kt=$t[1],$t[1]=$t[3],$t[3]=kt),$t[1]*=dt[3],$t[3]*=dt[3]):(kt=$t[0],$t[0]=$t[1],$t[1]=kt,kt=$t[2],$t[2]=$t[3],$t[3]=kt,dt[1]<0&&(kt=$t[1],$t[1]=$t[3],$t[3]=kt),$t[1]*=dt[1],$t[3]*=dt[1],dt[2]<0&&(kt=$t[0],$t[0]=$t[2],$t[2]=kt),$t[0]*=dt[2],$t[2]*=dt[2]),$t[0]+=dt[4],$t[1]+=dt[5],$t[2]+=dt[4],$t[3]+=dt[5]}static transform(dt,$t){return[dt[0]*$t[0]+dt[2]*$t[1],dt[1]*$t[0]+dt[3]*$t[1],dt[0]*$t[2]+dt[2]*$t[3],dt[1]*$t[2]+dt[3]*$t[3],dt[0]*$t[4]+dt[2]*$t[5]+dt[4],dt[1]*$t[4]+dt[3]*$t[5]+dt[5]]}static multiplyByDOMMatrix(dt,$t){return[dt[0]*$t.a+dt[2]*$t.b,dt[1]*$t.a+dt[3]*$t.b,dt[0]*$t.c+dt[2]*$t.d,dt[1]*$t.c+dt[3]*$t.d,dt[0]*$t.e+dt[2]*$t.f+dt[4],dt[1]*$t.e+dt[3]*$t.f+dt[5]]}static applyTransform(dt,$t,kt=0){const Tt=dt[kt],Dt=dt[kt+1];dt[kt]=Tt*$t[0]+Dt*$t[2]+$t[4],dt[kt+1]=Tt*$t[1]+Dt*$t[3]+$t[5]}static applyTransformToBezier(dt,$t,kt=0){const Tt=$t[0],Dt=$t[1],Ft=$t[2],Ut=$t[3],Ht=$t[4],Kt=$t[5];for(let Yt=0;Yt<6;Yt+=2){const Jt=dt[kt+Yt],Zt=dt[kt+Yt+1];dt[kt+Yt]=Jt*Tt+Zt*Ft+Ht,dt[kt+Yt+1]=Jt*Dt+Zt*Ut+Kt}}static applyInverseTransform(dt,$t){const kt=dt[0],Tt=dt[1],Dt=$t[0]*$t[3]-$t[1]*$t[2];dt[0]=(kt*$t[3]-Tt*$t[2]+$t[2]*$t[5]-$t[4]*$t[3])/Dt,dt[1]=(-kt*$t[1]+Tt*$t[0]+$t[4]*$t[1]-$t[5]*$t[0])/Dt}static axialAlignedBoundingBox(dt,$t,kt){const Tt=$t[0],Dt=$t[1],Ft=$t[2],Ut=$t[3],Ht=$t[4],Kt=$t[5],Yt=dt[0],Jt=dt[1],Zt=dt[2],er=dt[3];let rr=Tt*Yt+Ht,sr=rr,nr=Tt*Zt+Ht,ir=nr,or=Ut*Jt+Kt,lr=or,cr=Ut*er+Kt,dr=cr;if(Dt!==0||Ft!==0){const ur=Dt*Yt,pr=Dt*Zt,mr=Ft*Jt,jr=Ft*er;rr+=mr,ir+=mr,nr+=jr,sr+=jr,or+=ur,dr+=ur,cr+=pr,lr+=pr}kt[0]=Math.min(kt[0],rr,nr,sr,ir),kt[1]=Math.min(kt[1],or,cr,lr,dr),kt[2]=Math.max(kt[2],rr,nr,sr,ir),kt[3]=Math.max(kt[3],or,cr,lr,dr)}static inverseTransform(dt){const $t=dt[0]*dt[3]-dt[1]*dt[2];return[dt[3]/$t,-dt[1]/$t,-dt[2]/$t,dt[0]/$t,(dt[2]*dt[5]-dt[4]*dt[3])/$t,(dt[4]*dt[1]-dt[5]*dt[0])/$t]}static singularValueDecompose2dScale(dt,$t){const kt=dt[0],Tt=dt[1],Dt=dt[2],Ft=dt[3],Ut=kt**2+Tt**2,Ht=kt*Dt+Tt*Ft,Kt=Dt**2+Ft**2,Yt=(Ut+Kt)/2,Jt=Math.sqrt(Yt**2-(Ut*Kt-Ht**2));$t[0]=Math.sqrt(Yt+Jt||1),$t[1]=Math.sqrt(Yt-Jt||1)}static normalizeRect(dt){const $t=dt.slice(0);return dt[0]>dt[2]&&($t[0]=dt[2],$t[2]=dt[0]),dt[1]>dt[3]&&($t[1]=dt[3],$t[3]=dt[1]),$t}static intersect(dt,$t){const kt=Math.max(Math.min(dt[0],dt[2]),Math.min($t[0],$t[2])),Tt=Math.min(Math.max(dt[0],dt[2]),Math.max($t[0],$t[2]));if(kt>Tt)return null;const Dt=Math.max(Math.min(dt[1],dt[3]),Math.min($t[1],$t[3])),Ft=Math.min(Math.max(dt[1],dt[3]),Math.max($t[1],$t[3]));return Dt>Ft?null:[kt,Dt,Tt,Ft]}static pointBoundingBox(dt,$t,kt){kt[0]=Math.min(kt[0],dt),kt[1]=Math.min(kt[1],$t),kt[2]=Math.max(kt[2],dt),kt[3]=Math.max(kt[3],$t)}static rectBoundingBox(dt,$t,kt,Tt,Dt){Dt[0]=Math.min(Dt[0],dt,kt),Dt[1]=Math.min(Dt[1],$t,Tt),Dt[2]=Math.max(Dt[2],dt,kt),Dt[3]=Math.max(Dt[3],$t,Tt)}static bezierBoundingBox(dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt){Kt[0]=Math.min(Kt[0],dt,Ut),Kt[1]=Math.min(Kt[1],$t,Ht),Kt[2]=Math.max(Kt[2],dt,Ut),Kt[3]=Math.max(Kt[3],$t,Ht),Br(this,Vv,q2).call(this,dt,kt,Dt,Ut,$t,Tt,Ft,Ht,3*(-dt+3*(kt-Dt)+Ut),6*(dt-2*kt+Dt),3*(kt-dt),Kt),Br(this,Vv,q2).call(this,dt,kt,Dt,Ut,$t,Tt,Ft,Ht,3*(-$t+3*(Tt-Ft)+Ht),6*($t-2*Tt+Ft),3*(Tt-$t),Kt)}}v0=new WeakSet,gw=function(dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt,Yt){if(Kt<=0||Kt>=1)return;const Jt=1-Kt,Zt=Kt*Kt,er=Zt*Kt,rr=Jt*(Jt*(Jt*dt+3*Kt*$t)+3*Zt*kt)+er*Tt,sr=Jt*(Jt*(Jt*Dt+3*Kt*Ft)+3*Zt*Ut)+er*Ht;Yt[0]=Math.min(Yt[0],rr),Yt[1]=Math.min(Yt[1],sr),Yt[2]=Math.max(Yt[2],rr),Yt[3]=Math.max(Yt[3],sr)},Vv=new WeakSet,q2=function(dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt,Zt){if(Math.abs(Kt)<1e-12){Math.abs(Yt)>=1e-12&&Br(this,v0,gw).call(this,dt,$t,kt,Tt,Dt,Ft,Ut,Ht,-Jt/Yt,Zt);return}const er=Yt**2-4*Jt*Kt;if(er<0)return;const rr=Math.sqrt(er),sr=2*Kt;Br(this,v0,gw).call(this,dt,$t,kt,Tt,Dt,Ft,Ut,Ht,(-Yt+rr)/sr,Zt),Br(this,v0,gw).call(this,dt,$t,kt,Tt,Dt,Ft,Ut,Ht,(-Yt-rr)/sr,Zt)},yr(Util,v0),yr(Util,Vv);function stringToUTF8String(et){return decodeURIComponent(escape(et))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(et){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["","t"]])),et.replaceAll(NormalizeRegex,(dt,$t,kt)=>$t?$t.normalize("NFKC"):NormalizationMap.get(kt))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const et=new Uint8Array(32);return crypto.getRandomValues(et),bytesToString(et)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(et,dt,$t){if(!Array.isArray($t)||$t.length<2)return!1;const[kt,Tt,...Dt]=$t;if(!et(kt)&&!Number.isInteger(kt)||!dt(Tt))return!1;const Ft=Dt.length;let Ut=!0;switch(Tt.name){case"XYZ":if(Ft<2||Ft>3)return!1;break;case"Fit":case"FitB":return Ft===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(Ft>1)return!1;break;case"FitR":if(Ft!==4)return!1;Ut=!1;break;default:return!1}for(const Ht of Dt)if(!(typeof Ht=="number"||Ut&&Ht===null))return!1;return!0}function MathClamp(et,dt,$t){return Math.min(Math.max(et,dt),$t)}function toBase64Util(et){return Uint8Array.prototype.toBase64?et.toBase64():btoa(bytesToString(et))}function fromBase64Util(et){return Uint8Array.fromBase64?Uint8Array.fromBase64(et):stringToBytes(atob(et))}typeof Promise.try!="function"&&(Promise.try=function(et,...dt){return new Promise($t=>{$t(et(...dt))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(et){return et.reduce((dt,$t)=>dt+$t,0)});class XfaText{static textContent(dt){const $t=[],kt={items:$t,styles:Object.create(null)};function Tt(Dt){var Ht;if(!Dt)return;let Ft=null;const Ut=Dt.name;if(Ut==="#text")Ft=Dt.value;else if(XfaText.shouldBuildText(Ut))(Ht=Dt==null?void 0:Dt.attributes)!=null&&Ht.textContent?Ft=Dt.attributes.textContent:Dt.value&&(Ft=Dt.value);else return;if(Ft!==null&&$t.push({str:Ft}),!!Dt.children)for(const Kt of Dt.children)Tt(Kt)}return Tt(dt),kt}static shouldBuildText(dt){return!(dt==="textarea"||dt==="input"||dt==="option"||dt==="select")}}class XfaLayer{static setupStorage(dt,$t,kt,Tt,Dt){const Ft=Tt.getValue($t,{value:null});switch(kt.name){case"textarea":if(Ft.value!==null&&(dt.textContent=Ft.value),Dt==="print")break;dt.addEventListener("input",Ut=>{Tt.setValue($t,{value:Ut.target.value})});break;case"input":if(kt.attributes.type==="radio"||kt.attributes.type==="checkbox"){if(Ft.value===kt.attributes.xfaOn?dt.setAttribute("checked",!0):Ft.value===kt.attributes.xfaOff&&dt.removeAttribute("checked"),Dt==="print")break;dt.addEventListener("change",Ut=>{Tt.setValue($t,{value:Ut.target.checked?Ut.target.getAttribute("xfaOn"):Ut.target.getAttribute("xfaOff")})})}else{if(Ft.value!==null&&dt.setAttribute("value",Ft.value),Dt==="print")break;dt.addEventListener("input",Ut=>{Tt.setValue($t,{value:Ut.target.value})})}break;case"select":if(Ft.value!==null){dt.setAttribute("value",Ft.value);for(const Ut of kt.children)Ut.attributes.value===Ft.value?Ut.attributes.selected=!0:Ut.attributes.hasOwnProperty("selected")&&delete Ut.attributes.selected}dt.addEventListener("input",Ut=>{const Ht=Ut.target.options,Kt=Ht.selectedIndex===-1?"":Ht[Ht.selectedIndex].value;Tt.setValue($t,{value:Kt})});break}}static setAttributes({html:dt,element:$t,storage:kt=null,intent:Tt,linkService:Dt}){const{attributes:Ft}=$t,Ut=dt instanceof HTMLAnchorElement;Ft.type==="radio"&&(Ft.name=`${Ft.name}-${Tt}`);for(const[Ht,Kt]of Object.entries(Ft))if(Kt!=null)switch(Ht){case"class":Kt.length&&dt.setAttribute(Ht,Kt.join(" "));break;case"dataId":break;case"id":dt.setAttribute("data-element-id",Kt);break;case"style":Object.assign(dt.style,Kt);break;case"textContent":dt.textContent=Kt;break;default:(!Ut||Ht!=="href"&&Ht!=="newWindow")&&dt.setAttribute(Ht,Kt)}Ut&&Dt.addLinkAttributes(dt,Ft.href,Ft.newWindow),kt&&Ft.dataId&&this.setupStorage(dt,Ft.dataId,$t,kt)}static render(dt){var Jt,Zt;const $t=dt.annotationStorage,kt=dt.linkService,Tt=dt.xfaHtml,Dt=dt.intent||"display",Ft=document.createElement(Tt.name);Tt.attributes&&this.setAttributes({html:Ft,element:Tt,intent:Dt,linkService:kt});const Ut=Dt!=="richText",Ht=dt.div;if(Ht.append(Ft),dt.viewport){const er=`matrix(${dt.viewport.transform.join(",")})`;Ht.style.transform=er}Ut&&Ht.setAttribute("class","xfaLayer xfaFont");const Kt=[];if(Tt.children.length===0){if(Tt.value){const er=document.createTextNode(Tt.value);Ft.append(er),Ut&&XfaText.shouldBuildText(Tt.name)&&Kt.push(er)}return{textDivs:Kt}}const Yt=[[Tt,-1,Ft]];for(;Yt.length>0;){const[er,rr,sr]=Yt.at(-1);if(rr+1===er.children.length){Yt.pop();continue}const nr=er.children[++Yt.at(-1)[1]];if(nr===null)continue;const{name:ir}=nr;if(ir==="#text"){const lr=document.createTextNode(nr.value);Kt.push(lr),sr.append(lr);continue}const or=(Jt=nr==null?void 0:nr.attributes)!=null&&Jt.xmlns?document.createElementNS(nr.attributes.xmlns,ir):document.createElement(ir);if(sr.append(or),nr.attributes&&this.setAttributes({html:or,element:nr,storage:$t,intent:Dt,linkService:kt}),((Zt=nr.children)==null?void 0:Zt.length)>0)Yt.push([nr,-1,or]);else if(nr.value){const lr=document.createTextNode(nr.value);Ut&&XfaText.shouldBuildText(ir)&&Kt.push(lr),or.append(lr)}}for(const er of Ht.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))er.setAttribute("readOnly",!0);return{textDivs:Kt}}static update(dt){const $t=`matrix(${dt.viewport.transform.join(",")})`;dt.div.style.transform=$t,dt.div.hidden=!1}}const SVG_NS="http://www.w3.org/2000/svg",Am=class Am{};Es(Am,"CSS",96),Es(Am,"PDF",72),Es(Am,"PDF_TO_CSS_UNITS",Am.CSS/Am.PDF);let PixelsPerInch=Am;async function fetchData(et,dt="text"){if(isValidFetchUrl(et,document.baseURI)){const $t=await fetch(et);if(!$t.ok)throw new Error($t.statusText);switch(dt){case"arraybuffer":return $t.arrayBuffer();case"blob":return $t.blob();case"json":return $t.json()}return $t.text()}return new Promise(($t,kt)=>{const Tt=new XMLHttpRequest;Tt.open("GET",et,!0),Tt.responseType=dt,Tt.onreadystatechange=()=>{if(Tt.readyState===XMLHttpRequest.DONE){if(Tt.status===200||Tt.status===0){switch(dt){case"arraybuffer":case"blob":case"json":$t(Tt.response);return}$t(Tt.responseText);return}kt(new Error(Tt.statusText))}},Tt.send(null)})}class PageViewport{constructor({viewBox:dt,userUnit:$t,scale:kt,rotation:Tt,offsetX:Dt=0,offsetY:Ft=0,dontFlip:Ut=!1}){this.viewBox=dt,this.userUnit=$t,this.scale=kt,this.rotation=Tt,this.offsetX=Dt,this.offsetY=Ft,kt*=$t;const Ht=(dt[2]+dt[0])/2,Kt=(dt[3]+dt[1])/2;let Yt,Jt,Zt,er;switch(Tt%=360,Tt<0&&(Tt+=360),Tt){case 180:Yt=-1,Jt=0,Zt=0,er=1;break;case 90:Yt=0,Jt=1,Zt=1,er=0;break;case 270:Yt=0,Jt=-1,Zt=-1,er=0;break;case 0:Yt=1,Jt=0,Zt=0,er=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ut&&(Zt=-Zt,er=-er);let rr,sr,nr,ir;Yt===0?(rr=Math.abs(Kt-dt[1])*kt+Dt,sr=Math.abs(Ht-dt[0])*kt+Ft,nr=(dt[3]-dt[1])*kt,ir=(dt[2]-dt[0])*kt):(rr=Math.abs(Ht-dt[0])*kt+Dt,sr=Math.abs(Kt-dt[1])*kt+Ft,nr=(dt[2]-dt[0])*kt,ir=(dt[3]-dt[1])*kt),this.transform=[Yt*kt,Jt*kt,Zt*kt,er*kt,rr-Yt*kt*Ht-Zt*kt*Kt,sr-Jt*kt*Ht-er*kt*Kt],this.width=nr,this.height=ir}get rawDims(){const dt=this.viewBox;return shadow(this,"rawDims",{pageWidth:dt[2]-dt[0],pageHeight:dt[3]-dt[1],pageX:dt[0],pageY:dt[1]})}clone({scale:dt=this.scale,rotation:$t=this.rotation,offsetX:kt=this.offsetX,offsetY:Tt=this.offsetY,dontFlip:Dt=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:dt,rotation:$t,offsetX:kt,offsetY:Tt,dontFlip:Dt})}convertToViewportPoint(dt,$t){const kt=[dt,$t];return Util.applyTransform(kt,this.transform),kt}convertToViewportRectangle(dt){const $t=[dt[0],dt[1]];Util.applyTransform($t,this.transform);const kt=[dt[2],dt[3]];return Util.applyTransform(kt,this.transform),[$t[0],$t[1],kt[0],kt[1]]}convertToPdfPoint(dt,$t){const kt=[dt,$t];return Util.applyInverseTransform(kt,this.transform),kt}}class RenderingCancelledException extends BaseException{constructor(dt,$t=0){super(dt,"RenderingCancelledException"),this.extraDelay=$t}}function isDataScheme(et){const dt=et.length;let $t=0;for(;$t<dt&&et[$t].trim()==="";)$t++;return et.substring($t,$t+5).toLowerCase()==="data:"}function isPdfFile(et){return typeof et=="string"&&/\.pdf$/i.test(et)}function getFilenameFromUrl(et){return[et]=et.split(/[#?]/,1),et.substring(et.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(et,dt="document.pdf"){if(typeof et!="string")return dt;if(isDataScheme(et))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),dt;const kt=(Ut=>{try{return new URL(Ut)}catch{try{return new URL(decodeURIComponent(Ut))}catch{try{return new URL(Ut,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(Ut),"https://foo.bar")}catch{return null}}}}})(et);if(!kt)return dt;const Tt=Ut=>{try{let Ht=decodeURIComponent(Ut);return Ht.includes("/")?(Ht=Ht.split("/").at(-1),Ht.test(/^\.pdf$/i)?Ht:Ut):Ht}catch{return Ut}},Dt=/\.pdf$/i,Ft=kt.pathname.split("/").at(-1);if(Dt.test(Ft))return Tt(Ft);if(kt.searchParams.size>0){const Ut=Array.from(kt.searchParams.values()).reverse();for(const Kt of Ut)if(Dt.test(Kt))return Tt(Kt);const Ht=Array.from(kt.searchParams.keys()).reverse();for(const Kt of Ht)if(Dt.test(Kt))return Tt(Kt)}if(kt.hash){const Ht=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(kt.hash);if(Ht)return Tt(Ht[0])}return dt}class StatTimer{constructor(){Es(this,"started",Object.create(null));Es(this,"times",[])}time(dt){dt in this.started&&warn(`Timer is already running for ${dt}`),this.started[dt]=Date.now()}timeEnd(dt){dt in this.started||warn(`Timer has not been started for ${dt}`),this.times.push({name:dt,start:this.started[dt],end:Date.now()}),delete this.started[dt]}toString(){const dt=[];let $t=0;for(const{name:kt}of this.times)$t=Math.max(kt.length,$t);for(const{name:kt,start:Tt,end:Dt}of this.times)dt.push(`${kt.padEnd($t)} ${Dt-Tt}ms
`);return dt.join("")}}function isValidFetchUrl(et,dt){const $t=dt?URL.parse(et,dt):URL.parse(et);return($t==null?void 0:$t.protocol)==="http:"||($t==null?void 0:$t.protocol)==="https:"}function noContextMenu(et){et.preventDefault()}function stopEvent(et){et.preventDefault(),et.stopPropagation()}function deprecated(et){console.log("Deprecated API usage: "+et)}var zv;class PDFDateString{static toDateObject(dt){if(dt instanceof Date)return dt;if(!dt||typeof dt!="string")return null;ar(this,zv)||vr(this,zv,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const $t=ar(this,zv).exec(dt);if(!$t)return null;const kt=parseInt($t[1],10);let Tt=parseInt($t[2],10);Tt=Tt>=1&&Tt<=12?Tt-1:0;let Dt=parseInt($t[3],10);Dt=Dt>=1&&Dt<=31?Dt:1;let Ft=parseInt($t[4],10);Ft=Ft>=0&&Ft<=23?Ft:0;let Ut=parseInt($t[5],10);Ut=Ut>=0&&Ut<=59?Ut:0;let Ht=parseInt($t[6],10);Ht=Ht>=0&&Ht<=59?Ht:0;const Kt=$t[7]||"Z";let Yt=parseInt($t[8],10);Yt=Yt>=0&&Yt<=23?Yt:0;let Jt=parseInt($t[9],10)||0;return Jt=Jt>=0&&Jt<=59?Jt:0,Kt==="-"?(Ft+=Yt,Ut+=Jt):Kt==="+"&&(Ft-=Yt,Ut-=Jt),new Date(Date.UTC(kt,Tt,Dt,Ft,Ut,Ht))}}zv=new WeakMap,yr(PDFDateString,zv,void 0);function getXfaPageViewport(et,{scale:dt=1,rotation:$t=0}){const{width:kt,height:Tt}=et.attributes.style,Dt=[0,0,parseInt(kt),parseInt(Tt)];return new PageViewport({viewBox:Dt,userUnit:1,scale:dt,rotation:$t})}function getRGB(et){if(et.startsWith("#")){const dt=parseInt(et.slice(1),16);return[(dt&16711680)>>16,(dt&65280)>>8,dt&255]}return et.startsWith("rgb(")?et.slice(4,-1).split(",").map(dt=>parseInt(dt)):et.startsWith("rgba(")?et.slice(5,-1).split(",").map(dt=>parseInt(dt)).slice(0,3):(warn(`Not a valid color format: "${et}"`),[0,0,0])}function getColorValues(et){const dt=document.createElement("span");dt.style.visibility="hidden",dt.style.colorScheme="only light",document.body.append(dt);for(const $t of et.keys()){dt.style.color=$t;const kt=window.getComputedStyle(dt).color;et.set($t,getRGB(kt))}dt.remove()}function getCurrentTransform(et){const{a:dt,b:$t,c:kt,d:Tt,e:Dt,f:Ft}=et.getTransform();return[dt,$t,kt,Tt,Dt,Ft]}function getCurrentTransformInverse(et){const{a:dt,b:$t,c:kt,d:Tt,e:Dt,f:Ft}=et.getTransform().invertSelf();return[dt,$t,kt,Tt,Dt,Ft]}function setLayerDimensions(et,dt,$t=!1,kt=!0){if(dt instanceof PageViewport){const{pageWidth:Tt,pageHeight:Dt}=dt.rawDims,{style:Ft}=et,Ut=util_FeatureTest.isCSSRoundSupported,Ht=`var(--total-scale-factor) * ${Tt}px`,Kt=`var(--total-scale-factor) * ${Dt}px`,Yt=Ut?`round(down, ${Ht}, var(--scale-round-x))`:`calc(${Ht})`,Jt=Ut?`round(down, ${Kt}, var(--scale-round-y))`:`calc(${Kt})`;!$t||dt.rotation%180===0?(Ft.width=Yt,Ft.height=Jt):(Ft.width=Jt,Ft.height=Yt)}kt&&et.setAttribute("data-main-rotation",dt.rotation)}class OutputScale{constructor(){const{pixelRatio:dt}=OutputScale;this.sx=dt,this.sy=dt}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(dt,$t,kt,Tt,Dt=-1){let Ft=1/0,Ut=1/0,Ht=1/0;kt=OutputScale.capPixels(kt,Dt),kt>0&&(Ft=Math.sqrt(kt/(dt*$t))),Tt!==-1&&(Ut=Tt/dt,Ht=Tt/$t);const Kt=Math.min(Ft,Ut,Ht);return this.sx>Kt||this.sy>Kt?(this.sx=Kt,this.sy=Kt,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(dt,$t){if($t>=0){const kt=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+$t/100));return dt>0?Math.min(dt,kt):kt}return dt}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ColorScheme{static get isDarkMode(){var dt;return shadow(this,"isDarkMode",!!((dt=window==null?void 0:window.matchMedia)!=null&&dt.call(window,"(prefers-color-scheme: dark)").matches))}}class CSSConstants{static get commentForegroundColor(){const dt=document.createElement("span");dt.classList.add("comment","sidebar");const{style:$t}=dt;$t.width=$t.height="0",$t.display="none",$t.color="var(--comment-fg-color)",document.body.append(dt);const{color:kt}=window.getComputedStyle(dt);return dt.remove(),shadow(this,"commentForegroundColor",getRGB(kt))}}function applyOpacity(et,dt,$t,kt){kt=Math.min(Math.max(kt??1,0),1);const Tt=255*(1-kt);return et=Math.round(et*kt+Tt),dt=Math.round(dt*kt+Tt),$t=Math.round($t*kt+Tt),[et,dt,$t]}function RGBToHSL(et,dt){const $t=et[0]/255,kt=et[1]/255,Tt=et[2]/255,Dt=Math.max($t,kt,Tt),Ft=Math.min($t,kt,Tt),Ut=(Dt+Ft)/2;if(Dt===Ft)dt[0]=dt[1]=0;else{const Ht=Dt-Ft;switch(dt[1]=Ut<.5?Ht/(Dt+Ft):Ht/(2-Dt-Ft),Dt){case $t:dt[0]=((kt-Tt)/Ht+(kt<Tt?6:0))*60;break;case kt:dt[0]=((Tt-$t)/Ht+2)*60;break;case Tt:dt[0]=(($t-kt)/Ht+4)*60;break}}dt[2]=Ut}function HSLToRGB(et,dt){const $t=et[0],kt=et[1],Tt=et[2],Dt=(1-Math.abs(2*Tt-1))*kt,Ft=Dt*(1-Math.abs($t/60%2-1)),Ut=Tt-Dt/2;switch(Math.floor($t/60)){case 0:dt[0]=Dt+Ut,dt[1]=Ft+Ut,dt[2]=Ut;break;case 1:dt[0]=Ft+Ut,dt[1]=Dt+Ut,dt[2]=Ut;break;case 2:dt[0]=Ut,dt[1]=Dt+Ut,dt[2]=Ft+Ut;break;case 3:dt[0]=Ut,dt[1]=Ft+Ut,dt[2]=Dt+Ut;break;case 4:dt[0]=Ft+Ut,dt[1]=Ut,dt[2]=Dt+Ut;break;case 5:case 6:dt[0]=Dt+Ut,dt[1]=Ut,dt[2]=Ft+Ut;break}}function computeLuminance(et){return et<=.03928?et/12.92:((et+.055)/1.055)**2.4}function contrastRatio(et,dt,$t){HSLToRGB(et,$t),$t.map(computeLuminance);const kt=.2126*$t[0]+.7152*$t[1]+.0722*$t[2];HSLToRGB(dt,$t),$t.map(computeLuminance);const Tt=.2126*$t[0]+.7152*$t[1]+.0722*$t[2];return kt>Tt?(kt+.05)/(Tt+.05):(Tt+.05)/(kt+.05)}const contrastCache=new Map;function findContrastColor(et,dt){const $t=et[0]+et[1]*256+et[2]*65536+dt[0]*16777216+dt[1]*4294967296+dt[2]*1099511627776;let kt=contrastCache.get($t);if(kt)return kt;const Tt=new Float32Array(9),Dt=Tt.subarray(0,3),Ft=Tt.subarray(3,6);RGBToHSL(et,Ft);const Ut=Tt.subarray(6,9);RGBToHSL(dt,Ut);const Ht=Ut[2]<.5,Kt=Ht?12:4.5;if(Ft[2]=Ht?Math.sqrt(Ft[2]):1-Math.sqrt(1-Ft[2]),contrastRatio(Ft,Ut,Dt)<Kt){let Yt,Jt;Ht?(Yt=Ft[2],Jt=1):(Yt=0,Jt=Ft[2]);const Zt=.005;for(;Jt-Yt>Zt;){const er=Ft[2]=(Yt+Jt)/2;Ht===contrastRatio(Ft,Ut,Dt)<Kt?Yt=er:Jt=er}Ft[2]=Ht?Jt:Yt}return HSLToRGB(Ft,Dt),kt=Util.makeHexColor(Math.round(Dt[0]*255),Math.round(Dt[1]*255),Math.round(Dt[2]*255)),contrastCache.set($t,kt),kt}function renderRichText({html:et,dir:dt,className:$t},kt){const Tt=document.createDocumentFragment();if(typeof et=="string"){const Dt=document.createElement("p");Dt.dir=dt||"auto";const Ft=et.split(/(?:\r\n?|\n)/);for(let Ut=0,Ht=Ft.length;Ut<Ht;++Ut){const Kt=Ft[Ut];Dt.append(document.createTextNode(Kt)),Ut<Ht-1&&Dt.append(document.createElement("br"))}Tt.append(Dt)}else XfaLayer.render({xfaHtml:et,div:Tt,intent:"richText"});Tt.firstChild.classList.add("richText",$t),kt.append(Tt)}var Rp,$p,Il,Dl,Uv,kp,E0,j0,Hv,Xw,dS,Qw,uS,Jw,hS,Sp,d0,Pm,jv;const Fu=class Fu{constructor(dt){yr(this,Qw);yr(this,Jw);yr(this,Sp);yr(this,Pm);yr(this,Rp,null);yr(this,$p,null);yr(this,Il,void 0);yr(this,Dl,null);yr(this,Uv,null);yr(this,kp,null);yr(this,E0,null);yr(this,j0,null);vr(this,Il,dt),ar(Fu,Hv)||vr(Fu,Hv,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const dt=vr(this,Rp,document.createElement("div"));dt.classList.add("editToolbar","hidden"),dt.setAttribute("role","toolbar");const $t=ar(this,Il)._uiManager._signal;$t instanceof AbortSignal&&!$t.aborted&&(dt.addEventListener("contextmenu",noContextMenu,{signal:$t}),dt.addEventListener("pointerdown",Br(Fu,Xw,dS),{signal:$t}));const kt=vr(this,Dl,document.createElement("div"));kt.className="buttons",dt.append(kt);const Tt=ar(this,Il).toolbarPosition;if(Tt){const{style:Dt}=dt,Ft=ar(this,Il)._uiManager.direction==="ltr"?1-Tt[0]:Tt[0];Dt.insetInlineEnd=`${100*Ft}%`,Dt.top=`calc(${100*Tt[1]}% + var(--editor-toolbar-vert-offset))`}return dt}get div(){return ar(this,Rp)}hide(){var dt;ar(this,Rp).classList.add("hidden"),(dt=ar(this,$p))==null||dt.hideDropdown()}show(){var dt,$t;ar(this,Rp).classList.remove("hidden"),(dt=ar(this,Uv))==null||dt.shown(),($t=ar(this,kp))==null||$t.shown()}addDeleteButton(){const{editorType:dt,_uiManager:$t}=ar(this,Il),kt=document.createElement("button");kt.classList.add("basic","deleteButton"),kt.tabIndex=0,kt.setAttribute("data-l10n-id",ar(Fu,Hv)[dt]),Br(this,Sp,d0).call(this,kt)&&kt.addEventListener("click",Tt=>{$t.delete()},{signal:$t._signal}),ar(this,Dl).append(kt)}async addAltText(dt){const $t=await dt.render();Br(this,Sp,d0).call(this,$t),ar(this,Dl).append($t,ar(this,Pm,jv)),vr(this,Uv,dt)}addComment(dt,$t=null){if(ar(this,kp))return;const kt=dt.renderForToolbar();if(!kt)return;Br(this,Sp,d0).call(this,kt);const Tt=vr(this,E0,ar(this,Pm,jv));$t?(ar(this,Dl).insertBefore(kt,$t),ar(this,Dl).insertBefore(Tt,$t)):ar(this,Dl).append(kt,Tt),vr(this,kp,dt),dt.toolbar=this}addColorPicker(dt){if(ar(this,$p))return;vr(this,$p,dt);const $t=dt.renderButton();Br(this,Sp,d0).call(this,$t),ar(this,Dl).append($t,ar(this,Pm,jv))}async addEditSignatureButton(dt){const $t=vr(this,j0,await dt.renderEditButton(ar(this,Il)));Br(this,Sp,d0).call(this,$t),ar(this,Dl).append($t,ar(this,Pm,jv))}removeButton(dt){var $t,kt;switch(dt){case"comment":($t=ar(this,kp))==null||$t.removeToolbarCommentButton(),vr(this,kp,null),(kt=ar(this,E0))==null||kt.remove(),vr(this,E0,null);break}}async addButton(dt,$t){switch(dt){case"colorPicker":this.addColorPicker($t);break;case"altText":await this.addAltText($t);break;case"editSignature":await this.addEditSignatureButton($t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment($t);break}}async addButtonBefore(dt,$t,kt){const Tt=ar(this,Dl).querySelector(kt);Tt&&dt==="comment"&&this.addComment($t,Tt)}updateEditSignatureButton(dt){ar(this,j0)&&(ar(this,j0).title=dt)}remove(){var dt;ar(this,Rp).remove(),(dt=ar(this,$p))==null||dt.destroy(),vr(this,$p,null)}};Rp=new WeakMap,$p=new WeakMap,Il=new WeakMap,Dl=new WeakMap,Uv=new WeakMap,kp=new WeakMap,E0=new WeakMap,j0=new WeakMap,Hv=new WeakMap,Xw=new WeakSet,dS=function(dt){dt.stopPropagation()},Qw=new WeakSet,uS=function(dt){ar(this,Il)._focusEventsAllowed=!1,stopEvent(dt)},Jw=new WeakSet,hS=function(dt){ar(this,Il)._focusEventsAllowed=!0,stopEvent(dt)},Sp=new WeakSet,d0=function(dt){const $t=ar(this,Il)._uiManager._signal;return!($t instanceof AbortSignal)||$t.aborted?!1:(dt.addEventListener("focusin",Br(this,Qw,uS).bind(this),{capture:!0,signal:$t}),dt.addEventListener("focusout",Br(this,Jw,hS).bind(this),{capture:!0,signal:$t}),dt.addEventListener("contextmenu",noContextMenu,{signal:$t}),!0)},Pm=new WeakSet,jv=function(){const dt=document.createElement("div");return dt.className="divider",dt},yr(Fu,Xw),yr(Fu,Hv,null);let EditorToolbar=Fu;var Gv,Mm,Ou,Zw,pS,eR,fS,Wv,K2;class FloatingToolbar{constructor(dt){yr(this,Zw);yr(this,eR);yr(this,Wv);yr(this,Gv,null);yr(this,Mm,null);yr(this,Ou,void 0);vr(this,Ou,dt)}show(dt,$t,kt){const[Tt,Dt]=Br(this,eR,fS).call(this,$t,kt),{style:Ft}=ar(this,Mm)||vr(this,Mm,Br(this,Zw,pS).call(this));dt.append(ar(this,Mm)),Ft.insetInlineEnd=`${100*Tt}%`,Ft.top=`calc(${100*Dt}% + var(--editor-toolbar-vert-offset))`}hide(){ar(this,Mm).remove()}}Gv=new WeakMap,Mm=new WeakMap,Ou=new WeakMap,Zw=new WeakSet,pS=function(){const dt=vr(this,Mm,document.createElement("div"));dt.className="editToolbar",dt.setAttribute("role","toolbar");const $t=ar(this,Ou)._signal;$t instanceof AbortSignal&&!$t.aborted&&dt.addEventListener("contextmenu",noContextMenu,{signal:$t});const kt=vr(this,Gv,document.createElement("div"));return kt.className="buttons",dt.append(kt),ar(this,Ou).hasCommentManager()&&Br(this,Wv,K2).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{ar(this,Ou).commentSelection("floating_button")}),Br(this,Wv,K2).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{ar(this,Ou).highlightSelection("floating_button")}),dt},eR=new WeakSet,fS=function(dt,$t){let kt=0,Tt=0;for(const Dt of dt){const Ft=Dt.y+Dt.height;if(Ft<kt)continue;const Ut=Dt.x+($t?Dt.width:0);if(Ft>kt){Tt=Ut,kt=Ft;continue}$t?Ut>Tt&&(Tt=Ut):Ut<Tt&&(Tt=Ut)}return[$t?1-Tt:Tt,kt]},Wv=new WeakSet,K2=function(dt,$t,kt,Tt){const Dt=document.createElement("button");Dt.classList.add("basic",dt),Dt.tabIndex=0,Dt.setAttribute("data-l10n-id",$t);const Ft=document.createElement("span");Dt.append(Ft),Ft.className="visuallyHidden",Ft.setAttribute("data-l10n-id",kt);const Ut=ar(this,Ou)._signal;Ut instanceof AbortSignal&&!Ut.aborted&&(Dt.addEventListener("contextmenu",noContextMenu,{signal:Ut}),Dt.addEventListener("click",Tt,{signal:Ut})),ar(this,Gv).append(Dt)};function bindEvents(et,dt,$t){for(const kt of $t)dt.addEventListener(kt,et[kt].bind(et))}var tR;class IdManager{constructor(){yr(this,tR,0)}get id(){return`${AnnotationEditorPrefix}${ga(this,tR)._++}`}}tR=new WeakMap;var w0,qv,So,R0,bw;const X$=class X${constructor(){yr(this,R0);yr(this,w0,getUuid());yr(this,qv,0);yr(this,So,null)}static get _isSVGFittingCanvas(){const dt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',kt=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),Tt=new Image;Tt.src=dt;const Dt=Tt.decode().then(()=>(kt.drawImage(Tt,0,0,1,1,0,0,1,3),new Uint32Array(kt.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",Dt)}async getFromFile(dt){const{lastModified:$t,name:kt,size:Tt,type:Dt}=dt;return Br(this,R0,bw).call(this,`${$t}_${kt}_${Tt}_${Dt}`,dt)}async getFromUrl(dt){return Br(this,R0,bw).call(this,dt,dt)}async getFromBlob(dt,$t){const kt=await $t;return Br(this,R0,bw).call(this,dt,kt)}async getFromId(dt){ar(this,So)||vr(this,So,new Map);const $t=ar(this,So).get(dt);if(!$t)return null;if($t.bitmap)return $t.refCounter+=1,$t;if($t.file)return this.getFromFile($t.file);if($t.blobPromise){const{blobPromise:kt}=$t;return delete $t.blobPromise,this.getFromBlob($t.id,kt)}return this.getFromUrl($t.url)}getFromCanvas(dt,$t){ar(this,So)||vr(this,So,new Map);let kt=ar(this,So).get(dt);if(kt!=null&&kt.bitmap)return kt.refCounter+=1,kt;const Tt=new OffscreenCanvas($t.width,$t.height);return Tt.getContext("2d").drawImage($t,0,0),kt={bitmap:Tt.transferToImageBitmap(),id:`image_${ar(this,w0)}_${ga(this,qv)._++}`,refCounter:1,isSvg:!1},ar(this,So).set(dt,kt),ar(this,So).set(kt.id,kt),kt}getSvgUrl(dt){const $t=ar(this,So).get(dt);return $t!=null&&$t.isSvg?$t.svgUrl:null}deleteId(dt){var Tt;ar(this,So)||vr(this,So,new Map);const $t=ar(this,So).get(dt);if(!$t||($t.refCounter-=1,$t.refCounter!==0))return;const{bitmap:kt}=$t;if(!$t.url&&!$t.file){const Dt=new OffscreenCanvas(kt.width,kt.height);Dt.getContext("bitmaprenderer").transferFromImageBitmap(kt),$t.blobPromise=Dt.convertToBlob()}(Tt=kt.close)==null||Tt.call(kt),$t.bitmap=null}isValidId(dt){return dt.startsWith(`image_${ar(this,w0)}_`)}};w0=new WeakMap,qv=new WeakMap,So=new WeakMap,R0=new WeakSet,bw=async function(dt,$t){ar(this,So)||vr(this,So,new Map);let kt=ar(this,So).get(dt);if(kt===null)return null;if(kt!=null&&kt.bitmap)return kt.refCounter+=1,kt;try{kt||(kt={bitmap:null,id:`image_${ar(this,w0)}_${ga(this,qv)._++}`,refCounter:0,isSvg:!1});let Tt;if(typeof $t=="string"?(kt.url=$t,Tt=await fetchData($t,"blob")):$t instanceof File?Tt=kt.file=$t:$t instanceof Blob&&(Tt=$t),Tt.type==="image/svg+xml"){const Dt=X$._isSVGFittingCanvas,Ft=new FileReader,Ut=new Image,Ht=new Promise((Kt,Yt)=>{Ut.onload=()=>{kt.bitmap=Ut,kt.isSvg=!0,Kt()},Ft.onload=async()=>{const Jt=kt.svgUrl=Ft.result;Ut.src=await Dt?`${Jt}#svgView(preserveAspectRatio(none))`:Jt},Ut.onerror=Ft.onerror=Yt});Ft.readAsDataURL(Tt),await Ht}else kt.bitmap=await createImageBitmap(Tt);kt.refCounter=1}catch(Tt){warn(Tt),kt=null}return ar(this,So).set(dt,kt),kt&&ar(this,So).set(kt.id,kt),kt};let ImageManager=X$;var Jn,_p,Kv,qn;class CommandManager{constructor(dt=128){yr(this,Jn,[]);yr(this,_p,!1);yr(this,Kv,void 0);yr(this,qn,-1);vr(this,Kv,dt)}add({cmd:dt,undo:$t,post:kt,mustExec:Tt,type:Dt=NaN,overwriteIfSameType:Ft=!1,keepUndo:Ut=!1}){if(Tt&&dt(),ar(this,_p))return;const Ht={cmd:dt,undo:$t,post:kt,type:Dt};if(ar(this,qn)===-1){ar(this,Jn).length>0&&(ar(this,Jn).length=0),vr(this,qn,0),ar(this,Jn).push(Ht);return}if(Ft&&ar(this,Jn)[ar(this,qn)].type===Dt){Ut&&(Ht.undo=ar(this,Jn)[ar(this,qn)].undo),ar(this,Jn)[ar(this,qn)]=Ht;return}const Kt=ar(this,qn)+1;Kt===ar(this,Kv)?ar(this,Jn).splice(0,1):(vr(this,qn,Kt),Kt<ar(this,Jn).length&&ar(this,Jn).splice(Kt)),ar(this,Jn).push(Ht)}undo(){if(ar(this,qn)===-1)return;vr(this,_p,!0);const{undo:dt,post:$t}=ar(this,Jn)[ar(this,qn)];dt(),$t==null||$t(),vr(this,_p,!1),vr(this,qn,ar(this,qn)-1)}redo(){if(ar(this,qn)<ar(this,Jn).length-1){vr(this,qn,ar(this,qn)+1),vr(this,_p,!0);const{cmd:dt,post:$t}=ar(this,Jn)[ar(this,qn)];dt(),$t==null||$t(),vr(this,_p,!1)}}hasSomethingToUndo(){return ar(this,qn)!==-1}hasSomethingToRedo(){return ar(this,qn)<ar(this,Jn).length-1}cleanType(dt){if(ar(this,qn)!==-1){for(let $t=ar(this,qn);$t>=0;$t--)if(ar(this,Jn)[$t].type!==dt){ar(this,Jn).splice($t+1,ar(this,qn)-$t),vr(this,qn,$t);return}ar(this,Jn).length=0,vr(this,qn,-1)}}destroy(){vr(this,Jn,null)}}Jn=new WeakMap,_p=new WeakMap,Kv=new WeakMap,qn=new WeakMap;var rR,mS;class KeyboardManager{constructor(dt){yr(this,rR);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:$t}=util_FeatureTest.platform;for(const[kt,Tt,Dt={}]of dt)for(const Ft of kt){const Ut=Ft.startsWith("mac+");$t&&Ut?(this.callbacks.set(Ft.slice(4),{callback:Tt,options:Dt}),this.allKeys.add(Ft.split("+").at(-1))):!$t&&!Ut&&(this.callbacks.set(Ft,{callback:Tt,options:Dt}),this.allKeys.add(Ft.split("+").at(-1)))}}exec(dt,$t){if(!this.allKeys.has($t.key))return;const kt=this.callbacks.get(Br(this,rR,mS).call(this,$t));if(!kt)return;const{callback:Tt,options:{bubbles:Dt=!1,args:Ft=[],checker:Ut=null}}=kt;Ut&&!Ut(dt,$t)||(Tt.bind(dt,...Ft,$t)(),Dt||stopEvent($t))}}rR=new WeakSet,mS=function(dt){dt.altKey&&this.buffer.push("alt"),dt.ctrlKey&&this.buffer.push("ctrl"),dt.metaKey&&this.buffer.push("meta"),dt.shiftKey&&this.buffer.push("shift"),this.buffer.push(dt.key);const $t=this.buffer.join("+");return this.buffer.length=0,$t};const sR=class sR{get _colors(){const dt=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(dt),shadow(this,"_colors",dt)}convert(dt){const $t=getRGB(dt);if(!window.matchMedia("(forced-colors: active)").matches)return $t;for(const[kt,Tt]of this._colors)if(Tt.every((Dt,Ft)=>Dt===$t[Ft]))return sR._colorsMapping.get(kt);return $t}getHexCode(dt){const $t=this._colors.get(dt);return $t?Util.makeHexColor(...$t):dt}};Es(sR,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=sR;var $0,Yo,k0,Kn,$a,S0,Fl,_0,Ll,Co,Cp,Ap,C0,Tp,du,Ol,Im,Yv,Xv,A0,Qv,uu,Np,T0,Pp,hu,nR,Mp,N0,Jv,Ip,Dm,P0,Dp,Zv,xa,jn,Bu,Fp,Lp,e1,M0,r1,Op,pu,Vu,s1,n1,Bl,I0,yw,i1,Y2,iR,xS,aR,gS,Fm,wv,oR,bS,lR,yS,cR,vS,a1,X2,dR,ES,o1,Q2,l1,J2,uR,jS,yo,Mo,Ql,Iu,hR,wS,pR,RS,d1,Z2,fR,$S,Lm,Rv,u1,e$;const x0=class x0{constructor(dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt,Zt,er,rr,sr,nr){yr(this,I0);yr(this,i1);yr(this,iR);yr(this,aR);yr(this,Fm);yr(this,oR);yr(this,lR);yr(this,cR);yr(this,a1);yr(this,dR);yr(this,o1);yr(this,l1);yr(this,uR);yr(this,yo);yr(this,Ql);yr(this,hR);yr(this,pR);yr(this,d1);yr(this,fR);yr(this,Lm);yr(this,u1);yr(this,$0,new AbortController);yr(this,Yo,null);yr(this,k0,null);yr(this,Kn,new Map);yr(this,$a,new Map);yr(this,S0,null);yr(this,Fl,null);yr(this,_0,null);yr(this,Ll,new CommandManager);yr(this,Co,null);yr(this,Cp,null);yr(this,Ap,null);yr(this,C0,0);yr(this,Tp,new Set);yr(this,du,null);yr(this,Ol,null);yr(this,Im,new Set);Es(this,"_editorUndoBar",null);yr(this,Yv,!1);yr(this,Xv,!1);yr(this,A0,!1);yr(this,Qv,null);yr(this,uu,null);yr(this,Np,null);yr(this,T0,null);yr(this,Pp,!1);yr(this,hu,null);yr(this,nR,new IdManager);yr(this,Mp,!1);yr(this,N0,!1);yr(this,Jv,!1);yr(this,Ip,null);yr(this,Dm,null);yr(this,P0,null);yr(this,Dp,null);yr(this,Zv,null);yr(this,xa,AnnotationEditorType.NONE);yr(this,jn,new Set);yr(this,Bu,null);yr(this,Fp,null);yr(this,Lp,null);yr(this,e1,null);yr(this,M0,null);yr(this,r1,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});yr(this,Op,[0,0]);yr(this,pu,null);yr(this,Vu,null);yr(this,s1,null);yr(this,n1,null);yr(this,Bl,null);const ir=this._signal=ar(this,$0).signal;vr(this,Vu,dt),vr(this,s1,$t),vr(this,n1,kt),vr(this,S0,Tt),vr(this,Co,Dt),vr(this,Fp,Ft),vr(this,M0,Ht),this._eventBus=Ut,Ut._on("editingaction",this.onEditingAction.bind(this),{signal:ir}),Ut._on("pagechanging",this.onPageChanging.bind(this),{signal:ir}),Ut._on("scalechanging",this.onScaleChanging.bind(this),{signal:ir}),Ut._on("rotationchanging",this.onRotationChanging.bind(this),{signal:ir}),Ut._on("setpreference",this.onSetPreference.bind(this),{signal:ir}),Ut._on("switchannotationeditorparams",or=>this.updateParams(or.type,or.value),{signal:ir}),window.addEventListener("pointerdown",()=>{vr(this,N0,!0)},{capture:!0,signal:ir}),window.addEventListener("pointerup",()=>{vr(this,N0,!1)},{capture:!0,signal:ir}),Br(this,oR,bS).call(this),Br(this,uR,jS).call(this),Br(this,a1,X2).call(this),vr(this,Fl,Ht.annotationStorage),vr(this,Qv,Ht.filterFactory),vr(this,Lp,Kt),vr(this,T0,Yt||null),vr(this,Yv,Jt),vr(this,Xv,Zt),vr(this,A0,er),vr(this,Zv,rr||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=sr||null,this._supportsPinchToZoom=nr!==!1,Dt==null||Dt.setSidebarUiManager(this)}static get _keyboardManager(){const dt=x0.prototype,$t=Ft=>ar(Ft,Vu).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&Ft.hasSomethingToControl(),kt=(Ft,{target:Ut})=>{if(Ut instanceof HTMLInputElement){const{type:Ht}=Ut;return Ht!=="text"&&Ht!=="number"}return!0},Tt=this.TRANSLATE_SMALL,Dt=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],dt.selectAll,{checker:kt}],[["ctrl+z","mac+meta+z"],dt.undo,{checker:kt}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],dt.redo,{checker:kt}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],dt.delete,{checker:kt}],[["Enter","mac+Enter"],dt.addNewEditorFromKeyboard,{checker:(Ft,{target:Ut})=>!(Ut instanceof HTMLButtonElement)&&ar(Ft,Vu).contains(Ut)&&!Ft.isEnterHandled}],[[" ","mac+ "],dt.addNewEditorFromKeyboard,{checker:(Ft,{target:Ut})=>!(Ut instanceof HTMLButtonElement)&&ar(Ft,Vu).contains(document.activeElement)}],[["Escape","mac+Escape"],dt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],dt.translateSelectedEditors,{args:[-Tt,0],checker:$t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],dt.translateSelectedEditors,{args:[-Dt,0],checker:$t}],[["ArrowRight","mac+ArrowRight"],dt.translateSelectedEditors,{args:[Tt,0],checker:$t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],dt.translateSelectedEditors,{args:[Dt,0],checker:$t}],[["ArrowUp","mac+ArrowUp"],dt.translateSelectedEditors,{args:[0,-Tt],checker:$t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],dt.translateSelectedEditors,{args:[0,-Dt],checker:$t}],[["ArrowDown","mac+ArrowDown"],dt.translateSelectedEditors,{args:[0,Tt],checker:$t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],dt.translateSelectedEditors,{args:[0,Dt],checker:$t}]]))}destroy(){var dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt;(dt=ar(this,Bl))==null||dt.resolve(),vr(this,Bl,null),($t=ar(this,$0))==null||$t.abort(),vr(this,$0,null),this._signal=null;for(const Yt of ar(this,$a).values())Yt.destroy();ar(this,$a).clear(),ar(this,Kn).clear(),ar(this,Im).clear(),(kt=ar(this,Dp))==null||kt.clear(),vr(this,Yo,null),ar(this,jn).clear(),ar(this,Ll).destroy(),(Tt=ar(this,S0))==null||Tt.destroy(),(Dt=ar(this,Co))==null||Dt.destroy(),(Ft=ar(this,Fp))==null||Ft.destroy(),(Ut=ar(this,hu))==null||Ut.hide(),vr(this,hu,null),(Ht=ar(this,P0))==null||Ht.destroy(),vr(this,P0,null),vr(this,k0,null),ar(this,uu)&&(clearTimeout(ar(this,uu)),vr(this,uu,null)),ar(this,pu)&&(clearTimeout(ar(this,pu)),vr(this,pu,null)),(Kt=this._editorUndoBar)==null||Kt.destroy(),vr(this,M0,null)}combinedSignal(dt){return AbortSignal.any([this._signal,dt.signal])}get mlManager(){return ar(this,Zv)}get useNewAltTextFlow(){return ar(this,Xv)}get useNewAltTextWhenAddingImage(){return ar(this,A0)}get hcmFilter(){return shadow(this,"hcmFilter",ar(this,Lp)?ar(this,Qv).addHCMFilter(ar(this,Lp).foreground,ar(this,Lp).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(ar(this,Vu)).direction)}get _highlightColors(){return shadow(this,"_highlightColors",ar(this,T0)?new Map(ar(this,T0).split(",").map(dt=>(dt=dt.split("=").map($t=>$t.trim()),dt[1]=dt[1].toUpperCase(),dt))):null)}get highlightColors(){const{_highlightColors:dt}=this;if(!dt)return shadow(this,"highlightColors",null);const $t=new Map,kt=!!ar(this,Lp);for(const[Tt,Dt]of dt){const Ft=Tt.endsWith("_HCM");if(kt&&Ft){$t.set(Tt.replace("_HCM",""),Dt);continue}!kt&&!Ft&&$t.set(Tt,Dt)}return shadow(this,"highlightColors",$t)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,dt=>dt.reverse())):null)}getNonHCMColor(dt){if(!this._highlightColors)return dt;const $t=this.highlightColorNames.get(dt);return this._highlightColors.get($t)||dt}getNonHCMColorName(dt){return this.highlightColorNames.get(dt)||dt}setCurrentDrawingSession(dt){dt?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),vr(this,Ap,dt)}setMainHighlightColorPicker(dt){vr(this,P0,dt)}editAltText(dt,$t=!1){var kt;(kt=ar(this,S0))==null||kt.editAltText(this,dt,$t)}hasCommentManager(){return!!ar(this,Co)}editComment(dt,$t,kt,Tt){var Dt;(Dt=ar(this,Co))==null||Dt.showDialog(this,dt,$t,kt,Tt)}selectComment(dt,$t){const kt=ar(this,$a).get(dt),Tt=kt==null?void 0:kt.getEditorByUID($t);Tt==null||Tt.toggleComment(!0,!0)}updateComment(dt){var $t;($t=ar(this,Co))==null||$t.updateComment(dt.getData())}updatePopupColor(dt){var $t;($t=ar(this,Co))==null||$t.updatePopupColor(dt)}removeComment(dt){var $t;($t=ar(this,Co))==null||$t.removeComments([dt.uid])}toggleComment(dt,$t,kt=void 0){var Tt;(Tt=ar(this,Co))==null||Tt.toggleCommentPopup(dt,$t,kt)}makeCommentColor(dt,$t){var kt;return dt&&((kt=ar(this,Co))==null?void 0:kt.makeCommentColor(dt,$t))||null}getCommentDialogElement(){var dt;return((dt=ar(this,Co))==null?void 0:dt.dialogElement)||null}async waitForEditorsRendered(dt){if(ar(this,$a).has(dt-1))return;const{resolve:$t,promise:kt}=Promise.withResolvers(),Tt=Dt=>{Dt.pageNumber===dt&&(this._eventBus._off("editorsrendered",Tt),$t())};this._eventBus.on("editorsrendered",Tt),await kt}getSignature(dt){var $t;($t=ar(this,Fp))==null||$t.getSignature({uiManager:this,editor:dt})}get signatureManager(){return ar(this,Fp)}switchToMode(dt,$t){this._eventBus.on("annotationeditormodechanged",$t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:dt})}setPreference(dt,$t){this._eventBus.dispatch("setpreference",{source:this,name:dt,value:$t})}onSetPreference({name:dt,value:$t}){switch(dt){case"enableNewAltTextWhenAddingImage":vr(this,A0,$t);break}}onPageChanging({pageNumber:dt}){vr(this,C0,dt-1)}focusMainContainer(){ar(this,Vu).focus()}findParent(dt,$t){for(const kt of ar(this,$a).values()){const{x:Tt,y:Dt,width:Ft,height:Ut}=kt.div.getBoundingClientRect();if(dt>=Tt&&dt<=Tt+Ft&&$t>=Dt&&$t<=Dt+Ut)return kt}return null}disableUserSelect(dt=!1){ar(this,s1).classList.toggle("noUserSelect",dt)}addShouldRescale(dt){ar(this,Im).add(dt)}removeShouldRescale(dt){ar(this,Im).delete(dt)}onScaleChanging({scale:dt}){var $t;this.commitOrRemove(),this.viewParameters.realScale=dt*PixelsPerInch.PDF_TO_CSS_UNITS;for(const kt of ar(this,Im))kt.onScaleChanging();($t=ar(this,Ap))==null||$t.onScaleChanging()}onRotationChanging({pagesRotation:dt}){this.commitOrRemove(),this.viewParameters.rotation=dt}highlightSelection(dt="",$t=!1){const kt=document.getSelection();if(!kt||kt.isCollapsed)return;const{anchorNode:Tt,anchorOffset:Dt,focusNode:Ft,focusOffset:Ut}=kt,Ht=kt.toString(),Yt=Br(this,I0,yw).call(this,kt).closest(".textLayer"),Jt=this.getSelectionBoxes(Yt);if(!Jt)return;kt.empty();const Zt=Br(this,i1,Y2).call(this,Yt),er=ar(this,xa)===AnnotationEditorType.NONE,rr=()=>{const sr=Zt==null?void 0:Zt.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:dt,boxes:Jt,anchorNode:Tt,anchorOffset:Dt,focusNode:Ft,focusOffset:Ut,text:Ht});er&&this.showAllEditors("highlight",!0,!0),$t&&(sr==null||sr.editComment())};if(er){this.switchToMode(AnnotationEditorType.HIGHLIGHT,rr);return}rr()}commentSelection(dt=""){this.highlightSelection(dt,!0)}getAndRemoveDataFromAnnotationStorage(dt){if(!ar(this,Fl))return null;const $t=`${AnnotationEditorPrefix}${dt}`,kt=ar(this,Fl).getRawValue($t);return kt&&ar(this,Fl).remove($t),kt}addToAnnotationStorage(dt){!dt.isEmpty()&&ar(this,Fl)&&!ar(this,Fl).has(dt.id)&&ar(this,Fl).setValue(dt.id,dt)}a11yAlert(dt,$t=null){const kt=ar(this,n1);kt&&(kt.setAttribute("data-l10n-id",dt),$t?kt.setAttribute("data-l10n-args",JSON.stringify($t)):kt.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,ar(this,Pp)&&(vr(this,Pp,!1),Br(this,Fm,wv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:dt}=document;for(const $t of ar(this,jn))if($t.div.contains(dt)){vr(this,Dm,[$t,dt]),$t._focusEventsAllowed=!1;break}}focus(){if(!ar(this,Dm))return;const[dt,$t]=ar(this,Dm);vr(this,Dm,null),$t.addEventListener("focusin",()=>{dt._focusEventsAllowed=!0},{once:!0,signal:this._signal}),$t.focus()}addEditListeners(){Br(this,a1,X2).call(this),Br(this,o1,Q2).call(this)}removeEditListeners(){Br(this,dR,ES).call(this),Br(this,l1,J2).call(this)}dragOver(dt){for(const{type:$t}of dt.dataTransfer.items)for(const kt of ar(this,Ol))if(kt.isHandlingMimeForPasting($t)){dt.dataTransfer.dropEffect="copy",dt.preventDefault();return}}drop(dt){for(const $t of dt.dataTransfer.items)for(const kt of ar(this,Ol))if(kt.isHandlingMimeForPasting($t.type)){kt.paste($t,this.currentLayer),dt.preventDefault();return}}copy(dt){var kt;if(dt.preventDefault(),(kt=ar(this,Yo))==null||kt.commitOrRemove(),!this.hasSelection)return;const $t=[];for(const Tt of ar(this,jn)){const Dt=Tt.serialize(!0);Dt&&$t.push(Dt)}$t.length!==0&&dt.clipboardData.setData("application/pdfjs",JSON.stringify($t))}cut(dt){this.copy(dt),this.delete()}async paste(dt){dt.preventDefault();const{clipboardData:$t}=dt;for(const Dt of $t.items)for(const Ft of ar(this,Ol))if(Ft.isHandlingMimeForPasting(Dt.type)){Ft.paste(Dt,this.currentLayer);return}let kt=$t.getData("application/pdfjs");if(!kt)return;try{kt=JSON.parse(kt)}catch(Dt){warn(`paste: "${Dt.message}".`);return}if(!Array.isArray(kt))return;this.unselectAll();const Tt=this.currentLayer;try{const Dt=[];for(const Ht of kt){const Kt=await Tt.deserialize(Ht);if(!Kt)return;Dt.push(Kt)}const Ft=()=>{for(const Ht of Dt)Br(this,d1,Z2).call(this,Ht);Br(this,u1,e$).call(this,Dt)},Ut=()=>{for(const Ht of Dt)Ht.remove()};this.addCommands({cmd:Ft,undo:Ut,mustExec:!0})}catch(Dt){warn(`paste: "${Dt.message}".`)}}keydown(dt){!this.isShiftKeyDown&&dt.key==="Shift"&&(this.isShiftKeyDown=!0),ar(this,xa)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&x0._keyboardManager.exec(this,dt)}keyup(dt){this.isShiftKeyDown&&dt.key==="Shift"&&(this.isShiftKeyDown=!1,ar(this,Pp)&&(vr(this,Pp,!1),Br(this,Fm,wv).call(this,"main_toolbar")))}onEditingAction({name:dt}){switch(dt){case"undo":case"redo":case"delete":case"selectAll":this[dt]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(dt){dt?(Br(this,lR,yS).call(this),Br(this,o1,Q2).call(this),Br(this,yo,Mo).call(this,{isEditing:ar(this,xa)!==AnnotationEditorType.NONE,isEmpty:Br(this,Lm,Rv).call(this),hasSomethingToUndo:ar(this,Ll).hasSomethingToUndo(),hasSomethingToRedo:ar(this,Ll).hasSomethingToRedo(),hasSelectedEditor:!1})):(Br(this,cR,vS).call(this),Br(this,l1,J2).call(this),Br(this,yo,Mo).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(dt){if(!ar(this,Ol)){vr(this,Ol,dt);for(const $t of ar(this,Ol))Br(this,Ql,Iu).call(this,$t.defaultPropertiesToUpdate)}}getId(){return ar(this,nR).id}get currentLayer(){return ar(this,$a).get(ar(this,C0))}getLayer(dt){return ar(this,$a).get(dt)}get currentPageIndex(){return ar(this,C0)}addLayer(dt){ar(this,$a).set(dt.pageIndex,dt),ar(this,Mp)?dt.enable():dt.disable()}removeLayer(dt){ar(this,$a).delete(dt.pageIndex)}async updateMode(dt,$t=null,kt=!1,Tt=!1,Dt=!1){var Ft,Ut,Ht,Kt,Yt,Jt;if(ar(this,xa)!==dt&&!(ar(this,Bl)&&(await ar(this,Bl).promise,!ar(this,Bl)))){if(vr(this,Bl,Promise.withResolvers()),(Ft=ar(this,Ap))==null||Ft.commitOrRemove(),ar(this,xa)===AnnotationEditorType.POPUP&&((Ut=ar(this,Co))==null||Ut.hideSidebar()),(Ht=ar(this,Co))==null||Ht.destroyPopup(),vr(this,xa,dt),dt===AnnotationEditorType.NONE){this.setEditingState(!1),Br(this,pR,RS).call(this);for(const Zt of ar(this,Kn).values())Zt.hideStandaloneCommentButton();(Kt=this._editorUndoBar)==null||Kt.hide(),this.toggleComment(null),ar(this,Bl).resolve();return}for(const Zt of ar(this,Kn).values())Zt.addStandaloneCommentButton();dt===AnnotationEditorType.SIGNATURE&&await((Yt=ar(this,Fp))==null?void 0:Yt.loadSignatures()),this.setEditingState(!0),await Br(this,hR,wS).call(this),this.unselectAll();for(const Zt of ar(this,$a).values())Zt.updateMode(dt);if(dt===AnnotationEditorType.POPUP){ar(this,k0)||vr(this,k0,await ar(this,M0).getAnnotationsByType(new Set(ar(this,Ol).map(rr=>rr._editorType))));const Zt=new Set,er=[];for(const rr of ar(this,Kn).values()){const{annotationElementId:sr,hasComment:nr,deleted:ir}=rr;sr&&Zt.add(sr),nr&&!ir&&er.push(rr.getData())}for(const rr of ar(this,k0)){const{id:sr,popupRef:nr,contentsObj:ir}=rr;nr&&(ir!=null&&ir.str)&&!Zt.has(sr)&&!ar(this,Tp).has(sr)&&er.push(rr)}(Jt=ar(this,Co))==null||Jt.showSidebar(er)}if(!$t){kt&&this.addNewEditorFromKeyboard(),ar(this,Bl).resolve();return}for(const Zt of ar(this,Kn).values())Zt.uid===$t?(this.setSelected(Zt),Dt?Zt.editComment():Tt?Zt.enterInEditMode():Zt.focus()):Zt.unselect();ar(this,Bl).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(dt){dt.mode!==ar(this,xa)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...dt})}updateParams(dt,$t){if(ar(this,Ol)){switch(dt){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor($t);return;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(ar(this,e1)||vr(this,e1,new Map)).set(dt,$t),this.showAllEditors("highlight",$t);break}if(this.hasSelection)for(const kt of ar(this,jn))kt.updateParams(dt,$t);else for(const kt of ar(this,Ol))kt.updateDefaultParams(dt,$t)}}showAllEditors(dt,$t,kt=!1){var Dt;for(const Ft of ar(this,Kn).values())Ft.editorType===dt&&Ft.show($t);(((Dt=ar(this,e1))==null?void 0:Dt.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==$t&&Br(this,Ql,Iu).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,$t]])}enableWaiting(dt=!1){if(ar(this,Jv)!==dt){vr(this,Jv,dt);for(const $t of ar(this,$a).values())dt?$t.disableClick():$t.enableClick(),$t.div.classList.toggle("waiting",dt)}}*getEditors(dt){for(const $t of ar(this,Kn).values())$t.pageIndex===dt&&(yield $t)}getEditor(dt){return ar(this,Kn).get(dt)}addEditor(dt){ar(this,Kn).set(dt.id,dt)}removeEditor(dt){var $t,kt;dt.div.contains(document.activeElement)&&(ar(this,uu)&&clearTimeout(ar(this,uu)),vr(this,uu,setTimeout(()=>{this.focusMainContainer(),vr(this,uu,null)},0))),ar(this,Kn).delete(dt.id),dt.annotationElementId&&(($t=ar(this,Dp))==null||$t.delete(dt.annotationElementId)),this.unselect(dt),(!dt.annotationElementId||!ar(this,Tp).has(dt.annotationElementId))&&((kt=ar(this,Fl))==null||kt.remove(dt.id))}addDeletedAnnotationElement(dt){ar(this,Tp).add(dt.annotationElementId),this.addChangedExistingAnnotation(dt),dt.deleted=!0}isDeletedAnnotationElement(dt){return ar(this,Tp).has(dt)}removeDeletedAnnotationElement(dt){ar(this,Tp).delete(dt.annotationElementId),this.removeChangedExistingAnnotation(dt),dt.deleted=!1}setActiveEditor(dt){ar(this,Yo)!==dt&&(vr(this,Yo,dt),dt&&Br(this,Ql,Iu).call(this,dt.propertiesToUpdate))}updateUI(dt){ar(this,fR,$S)===dt&&Br(this,Ql,Iu).call(this,dt.propertiesToUpdate)}updateUIForDefaultProperties(dt){Br(this,Ql,Iu).call(this,dt.defaultPropertiesToUpdate)}toggleSelected(dt){if(ar(this,jn).has(dt)){ar(this,jn).delete(dt),dt.unselect(),Br(this,yo,Mo).call(this,{hasSelectedEditor:this.hasSelection});return}ar(this,jn).add(dt),dt.select(),Br(this,Ql,Iu).call(this,dt.propertiesToUpdate),Br(this,yo,Mo).call(this,{hasSelectedEditor:!0})}setSelected(dt){var $t;this.updateToolbar({mode:dt.mode,editId:dt.id}),($t=ar(this,Ap))==null||$t.commitOrRemove();for(const kt of ar(this,jn))kt!==dt&&kt.unselect();ar(this,jn).clear(),ar(this,jn).add(dt),dt.select(),Br(this,Ql,Iu).call(this,dt.propertiesToUpdate),Br(this,yo,Mo).call(this,{hasSelectedEditor:!0})}isSelected(dt){return ar(this,jn).has(dt)}get firstSelectedEditor(){return ar(this,jn).values().next().value}unselect(dt){dt.unselect(),ar(this,jn).delete(dt),Br(this,yo,Mo).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ar(this,jn).size!==0}get isEnterHandled(){return ar(this,jn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var dt;ar(this,Ll).undo(),Br(this,yo,Mo).call(this,{hasSomethingToUndo:ar(this,Ll).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Br(this,Lm,Rv).call(this)}),(dt=this._editorUndoBar)==null||dt.hide()}redo(){ar(this,Ll).redo(),Br(this,yo,Mo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ar(this,Ll).hasSomethingToRedo(),isEmpty:Br(this,Lm,Rv).call(this)})}addCommands(dt){ar(this,Ll).add(dt),Br(this,yo,Mo).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Br(this,Lm,Rv).call(this)})}cleanUndoStack(dt){ar(this,Ll).cleanType(dt)}delete(){var Dt;this.commitOrRemove();const dt=(Dt=this.currentLayer)==null?void 0:Dt.endDrawingSession(!0);if(!this.hasSelection&&!dt)return;const $t=dt?[dt]:[...ar(this,jn)],kt=()=>{var Ft;(Ft=this._editorUndoBar)==null||Ft.show(Tt,$t.length===1?$t[0].editorType:$t.length);for(const Ut of $t)Ut.remove()},Tt=()=>{for(const Ft of $t)Br(this,d1,Z2).call(this,Ft)};this.addCommands({cmd:kt,undo:Tt,mustExec:!0})}commitOrRemove(){var dt;(dt=ar(this,Yo))==null||dt.commitOrRemove()}hasSomethingToControl(){return ar(this,Yo)||this.hasSelection}selectAll(){for(const dt of ar(this,jn))dt.commit();Br(this,u1,e$).call(this,ar(this,Kn).values())}unselectAll(){var dt;if(!(ar(this,Yo)&&(ar(this,Yo).commitOrRemove(),ar(this,xa)!==AnnotationEditorType.NONE))&&!((dt=ar(this,Ap))!=null&&dt.commitOrRemove())&&this.hasSelection){for(const $t of ar(this,jn))$t.unselect();ar(this,jn).clear(),Br(this,yo,Mo).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(dt,$t,kt=!1){if(kt||this.commitOrRemove(),!this.hasSelection)return;ar(this,Op)[0]+=dt,ar(this,Op)[1]+=$t;const[Tt,Dt]=ar(this,Op),Ft=[...ar(this,jn)],Ut=1e3;ar(this,pu)&&clearTimeout(ar(this,pu)),vr(this,pu,setTimeout(()=>{vr(this,pu,null),ar(this,Op)[0]=ar(this,Op)[1]=0,this.addCommands({cmd:()=>{for(const Ht of Ft)ar(this,Kn).has(Ht.id)&&(Ht.translateInPage(Tt,Dt),Ht.translationDone())},undo:()=>{for(const Ht of Ft)ar(this,Kn).has(Ht.id)&&(Ht.translateInPage(-Tt,-Dt),Ht.translationDone())},mustExec:!1})},Ut));for(const Ht of Ft)Ht.translateInPage(dt,$t),Ht.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),vr(this,du,new Map);for(const dt of ar(this,jn))ar(this,du).set(dt,{savedX:dt.x,savedY:dt.y,savedPageIndex:dt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!ar(this,du))return!1;this.disableUserSelect(!1);const dt=ar(this,du);vr(this,du,null);let $t=!1;for(const[{x:Tt,y:Dt,pageIndex:Ft},Ut]of dt)Ut.newX=Tt,Ut.newY=Dt,Ut.newPageIndex=Ft,$t||($t=Tt!==Ut.savedX||Dt!==Ut.savedY||Ft!==Ut.savedPageIndex);if(!$t)return!1;const kt=(Tt,Dt,Ft,Ut)=>{if(ar(this,Kn).has(Tt.id)){const Ht=ar(this,$a).get(Ut);Ht?Tt._setParentAndPosition(Ht,Dt,Ft):(Tt.pageIndex=Ut,Tt.x=Dt,Tt.y=Ft)}};return this.addCommands({cmd:()=>{for(const[Tt,{newX:Dt,newY:Ft,newPageIndex:Ut}]of dt)kt(Tt,Dt,Ft,Ut)},undo:()=>{for(const[Tt,{savedX:Dt,savedY:Ft,savedPageIndex:Ut}]of dt)kt(Tt,Dt,Ft,Ut)},mustExec:!0}),!0}dragSelectedEditors(dt,$t){if(ar(this,du))for(const kt of ar(this,du).keys())kt.drag(dt,$t)}rebuild(dt){if(dt.parent===null){const $t=this.getLayer(dt.pageIndex);$t?($t.changeParent(dt),$t.addOrRebuild(dt)):(this.addEditor(dt),this.addToAnnotationStorage(dt),dt.rebuild())}else dt.parent.addOrRebuild(dt)}get isEditorHandlingKeyboard(){var dt;return((dt=this.getActive())==null?void 0:dt.shouldGetKeyboardEvents())||ar(this,jn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(dt){return ar(this,Yo)===dt}getActive(){return ar(this,Yo)}getMode(){return ar(this,xa)}isEditingMode(){return ar(this,xa)!==AnnotationEditorType.NONE}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(dt){if(!dt)return null;const $t=document.getSelection();for(let Kt=0,Yt=$t.rangeCount;Kt<Yt;Kt++)if(!dt.contains($t.getRangeAt(Kt).commonAncestorContainer))return null;const{x:kt,y:Tt,width:Dt,height:Ft}=dt.getBoundingClientRect();let Ut;switch(dt.getAttribute("data-main-rotation")){case"90":Ut=(Kt,Yt,Jt,Zt)=>({x:(Yt-Tt)/Ft,y:1-(Kt+Jt-kt)/Dt,width:Zt/Ft,height:Jt/Dt});break;case"180":Ut=(Kt,Yt,Jt,Zt)=>({x:1-(Kt+Jt-kt)/Dt,y:1-(Yt+Zt-Tt)/Ft,width:Jt/Dt,height:Zt/Ft});break;case"270":Ut=(Kt,Yt,Jt,Zt)=>({x:1-(Yt+Zt-Tt)/Ft,y:(Kt-kt)/Dt,width:Zt/Ft,height:Jt/Dt});break;default:Ut=(Kt,Yt,Jt,Zt)=>({x:(Kt-kt)/Dt,y:(Yt-Tt)/Ft,width:Jt/Dt,height:Zt/Ft});break}const Ht=[];for(let Kt=0,Yt=$t.rangeCount;Kt<Yt;Kt++){const Jt=$t.getRangeAt(Kt);if(!Jt.collapsed)for(const{x:Zt,y:er,width:rr,height:sr}of Jt.getClientRects())rr===0||sr===0||Ht.push(Ut(Zt,er,rr,sr))}return Ht.length===0?null:Ht}addChangedExistingAnnotation({annotationElementId:dt,id:$t}){(ar(this,_0)||vr(this,_0,new Map)).set(dt,$t)}removeChangedExistingAnnotation({annotationElementId:dt}){var $t;($t=ar(this,_0))==null||$t.delete(dt)}renderAnnotationElement(dt){var Tt;const $t=(Tt=ar(this,_0))==null?void 0:Tt.get(dt.data.id);if(!$t)return;const kt=ar(this,Fl).getRawValue($t);kt&&(ar(this,xa)===AnnotationEditorType.NONE&&!kt.hasBeenModified||kt.renderAnnotationElement(dt))}setMissingCanvas(dt,$t,kt){var Dt;const Tt=(Dt=ar(this,Dp))==null?void 0:Dt.get(dt);Tt&&(Tt.setCanvas($t,kt),ar(this,Dp).delete(dt))}addMissingCanvas(dt,$t){(ar(this,Dp)||vr(this,Dp,new Map)).set(dt,$t)}};$0=new WeakMap,Yo=new WeakMap,k0=new WeakMap,Kn=new WeakMap,$a=new WeakMap,S0=new WeakMap,Fl=new WeakMap,_0=new WeakMap,Ll=new WeakMap,Co=new WeakMap,Cp=new WeakMap,Ap=new WeakMap,C0=new WeakMap,Tp=new WeakMap,du=new WeakMap,Ol=new WeakMap,Im=new WeakMap,Yv=new WeakMap,Xv=new WeakMap,A0=new WeakMap,Qv=new WeakMap,uu=new WeakMap,Np=new WeakMap,T0=new WeakMap,Pp=new WeakMap,hu=new WeakMap,nR=new WeakMap,Mp=new WeakMap,N0=new WeakMap,Jv=new WeakMap,Ip=new WeakMap,Dm=new WeakMap,P0=new WeakMap,Dp=new WeakMap,Zv=new WeakMap,xa=new WeakMap,jn=new WeakMap,Bu=new WeakMap,Fp=new WeakMap,Lp=new WeakMap,e1=new WeakMap,M0=new WeakMap,r1=new WeakMap,Op=new WeakMap,pu=new WeakMap,Vu=new WeakMap,s1=new WeakMap,n1=new WeakMap,Bl=new WeakMap,I0=new WeakSet,yw=function({anchorNode:dt}){return dt.nodeType===Node.TEXT_NODE?dt.parentElement:dt},i1=new WeakSet,Y2=function(dt){const{currentLayer:$t}=this;if($t.hasTextLayer(dt))return $t;for(const kt of ar(this,$a).values())if(kt.hasTextLayer(dt))return kt;return null},iR=new WeakSet,xS=function(){const dt=document.getSelection();if(!dt||dt.isCollapsed)return;const kt=Br(this,I0,yw).call(this,dt).closest(".textLayer"),Tt=this.getSelectionBoxes(kt);Tt&&(ar(this,hu)||vr(this,hu,new FloatingToolbar(this)),ar(this,hu).show(kt,Tt,this.direction==="ltr"))},aR=new WeakSet,gS=function(){var Dt,Ft,Ut;const dt=document.getSelection();if(!dt||dt.isCollapsed){ar(this,Bu)&&((Dt=ar(this,hu))==null||Dt.hide(),vr(this,Bu,null),Br(this,yo,Mo).call(this,{hasSelectedText:!1}));return}const{anchorNode:$t}=dt;if($t===ar(this,Bu))return;const Tt=Br(this,I0,yw).call(this,dt).closest(".textLayer");if(!Tt){ar(this,Bu)&&((Ft=ar(this,hu))==null||Ft.hide(),vr(this,Bu,null),Br(this,yo,Mo).call(this,{hasSelectedText:!1}));return}if((Ut=ar(this,hu))==null||Ut.hide(),vr(this,Bu,$t),Br(this,yo,Mo).call(this,{hasSelectedText:!0}),!(ar(this,xa)!==AnnotationEditorType.HIGHLIGHT&&ar(this,xa)!==AnnotationEditorType.NONE)&&(ar(this,xa)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),vr(this,Pp,this.isShiftKeyDown),!this.isShiftKeyDown)){const Ht=ar(this,xa)===AnnotationEditorType.HIGHLIGHT?Br(this,i1,Y2).call(this,Tt):null;if(Ht==null||Ht.toggleDrawing(),ar(this,N0)){const Kt=new AbortController,Yt=this.combinedSignal(Kt),Jt=Zt=>{Zt.type==="pointerup"&&Zt.button!==0||(Kt.abort(),Ht==null||Ht.toggleDrawing(!0),Zt.type==="pointerup"&&Br(this,Fm,wv).call(this,"main_toolbar"))};window.addEventListener("pointerup",Jt,{signal:Yt}),window.addEventListener("blur",Jt,{signal:Yt})}else Ht==null||Ht.toggleDrawing(!0),Br(this,Fm,wv).call(this,"main_toolbar")}},Fm=new WeakSet,wv=function(dt=""){ar(this,xa)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(dt):ar(this,Yv)&&Br(this,iR,xS).call(this)},oR=new WeakSet,bS=function(){document.addEventListener("selectionchange",Br(this,aR,gS).bind(this),{signal:this._signal})},lR=new WeakSet,yS=function(){if(ar(this,Np))return;vr(this,Np,new AbortController);const dt=this.combinedSignal(ar(this,Np));window.addEventListener("focus",this.focus.bind(this),{signal:dt}),window.addEventListener("blur",this.blur.bind(this),{signal:dt})},cR=new WeakSet,vS=function(){var dt;(dt=ar(this,Np))==null||dt.abort(),vr(this,Np,null)},a1=new WeakSet,X2=function(){if(ar(this,Ip))return;vr(this,Ip,new AbortController);const dt=this.combinedSignal(ar(this,Ip));window.addEventListener("keydown",this.keydown.bind(this),{signal:dt}),window.addEventListener("keyup",this.keyup.bind(this),{signal:dt})},dR=new WeakSet,ES=function(){var dt;(dt=ar(this,Ip))==null||dt.abort(),vr(this,Ip,null)},o1=new WeakSet,Q2=function(){if(ar(this,Cp))return;vr(this,Cp,new AbortController);const dt=this.combinedSignal(ar(this,Cp));document.addEventListener("copy",this.copy.bind(this),{signal:dt}),document.addEventListener("cut",this.cut.bind(this),{signal:dt}),document.addEventListener("paste",this.paste.bind(this),{signal:dt})},l1=new WeakSet,J2=function(){var dt;(dt=ar(this,Cp))==null||dt.abort(),vr(this,Cp,null)},uR=new WeakSet,jS=function(){const dt=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:dt}),document.addEventListener("drop",this.drop.bind(this),{signal:dt})},yo=new WeakSet,Mo=function(dt){Object.entries(dt).some(([kt,Tt])=>ar(this,r1)[kt]!==Tt)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ar(this,r1),dt)}),ar(this,xa)===AnnotationEditorType.HIGHLIGHT&&dt.hasSelectedEditor===!1&&Br(this,Ql,Iu).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},Ql=new WeakSet,Iu=function(dt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:dt})},hR=new WeakSet,wS=async function(){if(!ar(this,Mp)){vr(this,Mp,!0);const dt=[];for(const $t of ar(this,$a).values())dt.push($t.enable());await Promise.all(dt);for(const $t of ar(this,Kn).values())$t.enable()}},pR=new WeakSet,RS=function(){if(this.unselectAll(),ar(this,Mp)){vr(this,Mp,!1);for(const dt of ar(this,$a).values())dt.disable();for(const dt of ar(this,Kn).values())dt.disable()}},d1=new WeakSet,Z2=function(dt){const $t=ar(this,$a).get(dt.pageIndex);$t?$t.addOrRebuild(dt):(this.addEditor(dt),this.addToAnnotationStorage(dt))},fR=new WeakSet,$S=function(){let dt=null;for(dt of ar(this,jn));return dt},Lm=new WeakSet,Rv=function(){if(ar(this,Kn).size===0)return!0;if(ar(this,Kn).size===1)for(const dt of ar(this,Kn).values())return dt.isEmpty();return!1},u1=new WeakSet,e$=function(dt){for(const $t of ar(this,jn))$t.unselect();ar(this,jn).clear();for(const $t of dt)$t.isEmpty()||(ar(this,jn).add($t),$t.select());Br(this,yo,Mo).call(this,{hasSelectedEditor:this.hasSelection})},Es(x0,"TRANSLATE_SMALL",1),Es(x0,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=x0;var eo,fu,Jl,D0,mu,Xo,F0,xu,Bo,zu,Om,gu,Bp,Bm,$v,L0,Ew;const Io=class Io{constructor(dt){yr(this,Bm);yr(this,L0);yr(this,eo,null);yr(this,fu,!1);yr(this,Jl,null);yr(this,D0,null);yr(this,mu,null);yr(this,Xo,null);yr(this,F0,!1);yr(this,xu,null);yr(this,Bo,null);yr(this,zu,null);yr(this,Om,null);yr(this,gu,!1);vr(this,Bo,dt),vr(this,gu,dt._uiManager.useNewAltTextFlow),ar(Io,Bp)||vr(Io,Bp,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(dt){Io._l10n??(Io._l10n=dt)}async render(){const dt=vr(this,Jl,document.createElement("button"));dt.className="altText",dt.tabIndex="0";const $t=vr(this,D0,document.createElement("span"));dt.append($t),ar(this,gu)?(dt.classList.add("new"),dt.setAttribute("data-l10n-id",ar(Io,Bp).missing),$t.setAttribute("data-l10n-id",ar(Io,Bp)["missing-label"])):(dt.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),$t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const kt=ar(this,Bo)._uiManager._signal;dt.addEventListener("contextmenu",noContextMenu,{signal:kt}),dt.addEventListener("pointerdown",Dt=>Dt.stopPropagation(),{signal:kt});const Tt=Dt=>{Dt.preventDefault(),ar(this,Bo)._uiManager.editAltText(ar(this,Bo)),ar(this,gu)&&ar(this,Bo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:ar(this,Bm,$v)}})};return dt.addEventListener("click",Tt,{capture:!0,signal:kt}),dt.addEventListener("keydown",Dt=>{Dt.target===dt&&Dt.key==="Enter"&&(vr(this,F0,!0),Tt(Dt))},{signal:kt}),await Br(this,L0,Ew).call(this),dt}finish(){ar(this,Jl)&&(ar(this,Jl).focus({focusVisible:ar(this,F0)}),vr(this,F0,!1))}isEmpty(){return ar(this,gu)?ar(this,eo)===null:!ar(this,eo)&&!ar(this,fu)}hasData(){return ar(this,gu)?ar(this,eo)!==null||!!ar(this,zu):this.isEmpty()}get guessedText(){return ar(this,zu)}async setGuessedText(dt){ar(this,eo)===null&&(vr(this,zu,dt),vr(this,Om,await Io._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:dt})),Br(this,L0,Ew).call(this))}toggleAltTextBadge(dt=!1){var $t;if(!ar(this,gu)||ar(this,eo)){($t=ar(this,xu))==null||$t.remove(),vr(this,xu,null);return}if(!ar(this,xu)){const kt=vr(this,xu,document.createElement("div"));kt.className="noAltTextBadge",ar(this,Bo).div.append(kt)}ar(this,xu).classList.toggle("hidden",!dt)}serialize(dt){let $t=ar(this,eo);return!dt&&ar(this,zu)===$t&&($t=ar(this,Om)),{altText:$t,decorative:ar(this,fu),guessedText:ar(this,zu),textWithDisclaimer:ar(this,Om)}}get data(){return{altText:ar(this,eo),decorative:ar(this,fu)}}set data({altText:dt,decorative:$t,guessedText:kt,textWithDisclaimer:Tt,cancel:Dt=!1}){kt&&(vr(this,zu,kt),vr(this,Om,Tt)),!(ar(this,eo)===dt&&ar(this,fu)===$t)&&(Dt||(vr(this,eo,dt),vr(this,fu,$t)),Br(this,L0,Ew).call(this))}toggle(dt=!1){ar(this,Jl)&&(!dt&&ar(this,Xo)&&(clearTimeout(ar(this,Xo)),vr(this,Xo,null)),ar(this,Jl).disabled=!dt)}shown(){ar(this,Bo)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:ar(this,Bm,$v)}})}destroy(){var dt,$t;(dt=ar(this,Jl))==null||dt.remove(),vr(this,Jl,null),vr(this,D0,null),vr(this,mu,null),($t=ar(this,xu))==null||$t.remove(),vr(this,xu,null)}};eo=new WeakMap,fu=new WeakMap,Jl=new WeakMap,D0=new WeakMap,mu=new WeakMap,Xo=new WeakMap,F0=new WeakMap,xu=new WeakMap,Bo=new WeakMap,zu=new WeakMap,Om=new WeakMap,gu=new WeakMap,Bp=new WeakMap,Bm=new WeakSet,$v=function(){return ar(this,eo)&&"added"||ar(this,eo)===null&&this.guessedText&&"review"||"missing"},L0=new WeakSet,Ew=async function(){var Tt,Dt,Ft;const dt=ar(this,Jl);if(!dt)return;if(ar(this,gu)){if(dt.classList.toggle("done",!!ar(this,eo)),dt.setAttribute("data-l10n-id",ar(Io,Bp)[ar(this,Bm,$v)]),(Tt=ar(this,D0))==null||Tt.setAttribute("data-l10n-id",ar(Io,Bp)[`${ar(this,Bm,$v)}-label`]),!ar(this,eo)){(Dt=ar(this,mu))==null||Dt.remove();return}}else{if(!ar(this,eo)&&!ar(this,fu)){dt.classList.remove("done"),(Ft=ar(this,mu))==null||Ft.remove();return}dt.classList.add("done"),dt.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let $t=ar(this,mu);if(!$t){vr(this,mu,$t=document.createElement("span")),$t.className="tooltip",$t.setAttribute("role","tooltip"),$t.id=`alt-text-tooltip-${ar(this,Bo).id}`;const Ut=100,Ht=ar(this,Bo)._uiManager._signal;Ht.addEventListener("abort",()=>{clearTimeout(ar(this,Xo)),vr(this,Xo,null)},{once:!0}),dt.addEventListener("mouseenter",()=>{vr(this,Xo,setTimeout(()=>{vr(this,Xo,null),ar(this,mu).classList.add("show"),ar(this,Bo)._reportTelemetry({action:"alt_text_tooltip"})},Ut))},{signal:Ht}),dt.addEventListener("mouseleave",()=>{var Kt;ar(this,Xo)&&(clearTimeout(ar(this,Xo)),vr(this,Xo,null)),(Kt=ar(this,mu))==null||Kt.classList.remove("show")},{signal:Ht})}ar(this,fu)?$t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):($t.removeAttribute("data-l10n-id"),$t.textContent=ar(this,eo)),$t.parentNode||dt.append($t);const kt=ar(this,Bo).getElementForAltText();kt==null||kt.setAttribute("aria-describedby",$t.id)},yr(Io,Bp,null),Es(Io,"_l10n",null);let AltText=Io;var vo,Vl,Vm,Ln,h1,zm,Zl,Um,Hm,Gm,p1,t$;class Comment{constructor(dt){yr(this,p1);yr(this,vo,null);yr(this,Vl,null);yr(this,Vm,!1);yr(this,Ln,null);yr(this,h1,null);yr(this,zm,null);yr(this,Zl,null);yr(this,Um,null);yr(this,Hm,!1);yr(this,Gm,null);vr(this,Ln,dt)}renderForToolbar(){const dt=vr(this,Vl,document.createElement("button"));return dt.className="comment",Br(this,p1,t$).call(this,dt,!1)}renderForStandalone(){const dt=vr(this,vo,document.createElement("button"));dt.className="annotationCommentButton";const $t=ar(this,Ln).commentButtonPosition;if($t){const{style:kt}=dt;kt.insetInlineEnd=`calc(${100*(ar(this,Ln)._uiManager.direction==="ltr"?1-$t[0]:$t[0])}% - var(--comment-button-dim))`,kt.top=`calc(${100*$t[1]}% - var(--comment-button-dim))`;const Tt=ar(this,Ln).commentButtonColor;Tt&&(kt.backgroundColor=Tt)}return Br(this,p1,t$).call(this,dt,!0)}focusButton(){setTimeout(()=>{var dt;(dt=ar(this,vo)??ar(this,Vl))==null||dt.focus()},0)}onUpdatedColor(){if(!ar(this,vo))return;const dt=ar(this,Ln).commentButtonColor;dt&&(ar(this,vo).style.backgroundColor=dt),ar(this,Ln)._uiManager.updatePopupColor(ar(this,Ln))}get commentButtonWidth(){var dt;return(((dt=ar(this,vo))==null?void 0:dt.getBoundingClientRect().width)??0)/ar(this,Ln).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(ar(this,Gm))return ar(this,Gm);if(!ar(this,vo))return null;const{x:dt,y:$t,height:kt}=ar(this,vo).getBoundingClientRect(),{x:Tt,y:Dt,width:Ft,height:Ut}=ar(this,Ln).parent.boundingClientRect;return[(dt-Tt)/Ft,($t+kt-Dt)/Ut]}set commentPopupPositionInLayer(dt){vr(this,Gm,dt)}hasDefaultPopupPosition(){return ar(this,Gm)===null}removeStandaloneCommentButton(){var dt;(dt=ar(this,vo))==null||dt.remove(),vr(this,vo,null)}removeToolbarCommentButton(){var dt;(dt=ar(this,Vl))==null||dt.remove(),vr(this,Vl,null)}setCommentButtonStates({selected:dt,hasPopup:$t}){ar(this,vo)&&(ar(this,vo).classList.toggle("selected",dt),ar(this,vo).ariaExpanded=$t)}edit(dt){const $t=this.commentPopupPositionInLayer;let kt,Tt;if($t)[kt,Tt]=$t;else{[kt,Tt]=ar(this,Ln).commentButtonPosition;const{width:Yt,height:Jt,x:Zt,y:er}=ar(this,Ln);kt=Zt+kt*Yt,Tt=er+Tt*Jt}const Dt=ar(this,Ln).parent.boundingClientRect,{x:Ft,y:Ut,width:Ht,height:Kt}=Dt;ar(this,Ln)._uiManager.editComment(ar(this,Ln),Ft+kt*Ht,Ut+Tt*Kt,{...dt,parentDimensions:Dt})}finish(){ar(this,Vl)&&(ar(this,Vl).focus({focusVisible:ar(this,Vm)}),vr(this,Vm,!1))}isDeleted(){return ar(this,Hm)||ar(this,Zl)===""}isEmpty(){return ar(this,Zl)===null}hasBeenEdited(){return this.isDeleted()||ar(this,Zl)!==ar(this,h1)}serialize(){return this.data}get data(){return{text:ar(this,Zl),richText:ar(this,zm),date:ar(this,Um),deleted:this.isDeleted()}}set data(dt){if(dt!==ar(this,Zl)&&vr(this,zm,null),dt===null){vr(this,Zl,""),vr(this,Hm,!0);return}vr(this,Zl,dt),vr(this,Um,new Date),vr(this,Hm,!1)}setInitialText(dt,$t=null){vr(this,h1,dt),this.data=dt,vr(this,Um,null),vr(this,zm,$t)}shown(){}destroy(){var dt,$t;(dt=ar(this,Vl))==null||dt.remove(),vr(this,Vl,null),($t=ar(this,vo))==null||$t.remove(),vr(this,vo,null),vr(this,Zl,""),vr(this,zm,null),vr(this,Um,null),vr(this,Ln,null),vr(this,Vm,!1),vr(this,Hm,!1)}}vo=new WeakMap,Vl=new WeakMap,Vm=new WeakMap,Ln=new WeakMap,h1=new WeakMap,zm=new WeakMap,Zl=new WeakMap,Um=new WeakMap,Hm=new WeakMap,Gm=new WeakMap,p1=new WeakSet,t$=function(dt,$t){if(!ar(this,Ln)._uiManager.hasCommentManager())return null;dt.tabIndex="0",dt.ariaHasPopup="dialog",$t?(dt.ariaControls="commentPopup",dt.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(dt.ariaControlsElements=[ar(this,Ln)._uiManager.getCommentDialogElement()],dt.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const kt=ar(this,Ln)._uiManager._signal;if(!(kt instanceof AbortSignal)||kt.aborted)return dt;dt.addEventListener("contextmenu",noContextMenu,{signal:kt}),$t&&(dt.addEventListener("focusin",Dt=>{ar(this,Ln)._focusEventsAllowed=!1,stopEvent(Dt)},{capture:!0,signal:kt}),dt.addEventListener("focusout",Dt=>{ar(this,Ln)._focusEventsAllowed=!0,stopEvent(Dt)},{capture:!0,signal:kt})),dt.addEventListener("pointerdown",Dt=>Dt.stopPropagation(),{signal:kt});const Tt=Dt=>{Dt.preventDefault(),dt===ar(this,Vl)?this.edit():ar(this,Ln).toggleComment(!0)};return dt.addEventListener("click",Tt,{capture:!0,signal:kt}),dt.addEventListener("keydown",Dt=>{Dt.target===dt&&Dt.key==="Enter"&&(vr(this,Vm,!0),Tt(Dt))},{signal:kt}),dt.addEventListener("pointerenter",()=>{ar(this,Ln).toggleComment(!1,!0)},{signal:kt}),dt.addEventListener("pointerleave",()=>{ar(this,Ln).toggleComment(!1,!1)},{signal:kt}),dt};var O0,Wm,f1,m1,x1,g1,b1,Uu,qm,Hu,Km,Gu,mR,kS,xR,SS,gR,_S;const Q$=class Q${constructor({container:dt,isPinchingDisabled:$t=null,isPinchingStopped:kt=null,onPinchStart:Tt=null,onPinching:Dt=null,onPinchEnd:Ft=null,signal:Ut}){yr(this,mR);yr(this,xR);yr(this,gR);yr(this,O0,void 0);yr(this,Wm,!1);yr(this,f1,null);yr(this,m1,void 0);yr(this,x1,void 0);yr(this,g1,void 0);yr(this,b1,void 0);yr(this,Uu,null);yr(this,qm,void 0);yr(this,Hu,null);yr(this,Km,void 0);yr(this,Gu,null);vr(this,O0,dt),vr(this,f1,kt),vr(this,m1,$t),vr(this,x1,Tt),vr(this,g1,Dt),vr(this,b1,Ft),vr(this,Km,new AbortController),vr(this,qm,AbortSignal.any([Ut,ar(this,Km).signal])),dt.addEventListener("touchstart",Br(this,mR,kS).bind(this),{passive:!1,signal:ar(this,qm)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var dt,$t;(dt=ar(this,Km))==null||dt.abort(),vr(this,Km,null),($t=ar(this,Uu))==null||$t.abort(),vr(this,Uu,null)}};O0=new WeakMap,Wm=new WeakMap,f1=new WeakMap,m1=new WeakMap,x1=new WeakMap,g1=new WeakMap,b1=new WeakMap,Uu=new WeakMap,qm=new WeakMap,Hu=new WeakMap,Km=new WeakMap,Gu=new WeakMap,mR=new WeakSet,kS=function(dt){var Tt,Dt,Ft;if((Tt=ar(this,m1))!=null&&Tt.call(this))return;if(dt.touches.length===1){if(ar(this,Uu))return;const Ut=vr(this,Uu,new AbortController),Ht=AbortSignal.any([ar(this,qm),Ut.signal]),Kt=ar(this,O0),Yt={capture:!0,signal:Ht,passive:!1},Jt=Zt=>{var er;Zt.pointerType==="touch"&&((er=ar(this,Uu))==null||er.abort(),vr(this,Uu,null))};Kt.addEventListener("pointerdown",Zt=>{Zt.pointerType==="touch"&&(stopEvent(Zt),Jt(Zt))},Yt),Kt.addEventListener("pointerup",Jt,Yt),Kt.addEventListener("pointercancel",Jt,Yt);return}if(!ar(this,Gu)){vr(this,Gu,new AbortController);const Ut=AbortSignal.any([ar(this,qm),ar(this,Gu).signal]),Ht=ar(this,O0),Kt={signal:Ut,capture:!1,passive:!1};Ht.addEventListener("touchmove",Br(this,xR,SS).bind(this),Kt);const Yt=Br(this,gR,_S).bind(this);Ht.addEventListener("touchend",Yt,Kt),Ht.addEventListener("touchcancel",Yt,Kt),Kt.capture=!0,Ht.addEventListener("pointerdown",stopEvent,Kt),Ht.addEventListener("pointermove",stopEvent,Kt),Ht.addEventListener("pointercancel",stopEvent,Kt),Ht.addEventListener("pointerup",stopEvent,Kt),(Dt=ar(this,x1))==null||Dt.call(this)}if(stopEvent(dt),dt.touches.length!==2||(Ft=ar(this,f1))!=null&&Ft.call(this)){vr(this,Hu,null);return}let[$t,kt]=dt.touches;$t.identifier>kt.identifier&&([$t,kt]=[kt,$t]),vr(this,Hu,{touch0X:$t.screenX,touch0Y:$t.screenY,touch1X:kt.screenX,touch1Y:kt.screenY})},xR=new WeakSet,SS=function(dt){var cr;if(!ar(this,Hu)||dt.touches.length!==2)return;stopEvent(dt);let[$t,kt]=dt.touches;$t.identifier>kt.identifier&&([$t,kt]=[kt,$t]);const{screenX:Tt,screenY:Dt}=$t,{screenX:Ft,screenY:Ut}=kt,Ht=ar(this,Hu),{touch0X:Kt,touch0Y:Yt,touch1X:Jt,touch1Y:Zt}=Ht,er=Jt-Kt,rr=Zt-Yt,sr=Ft-Tt,nr=Ut-Dt,ir=Math.hypot(sr,nr)||1,or=Math.hypot(er,rr)||1;if(!ar(this,Wm)&&Math.abs(or-ir)<=Q$.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(Ht.touch0X=Tt,Ht.touch0Y=Dt,Ht.touch1X=Ft,Ht.touch1Y=Ut,!ar(this,Wm)){vr(this,Wm,!0);return}const lr=[(Tt+Ft)/2,(Dt+Ut)/2];(cr=ar(this,g1))==null||cr.call(this,lr,or,ir)},gR=new WeakSet,_S=function(dt){var $t;dt.touches.length>=2||(ar(this,Gu)&&(ar(this,Gu).abort(),vr(this,Gu,null),($t=ar(this,b1))==null||$t.call(this)),ar(this,Hu)&&(stopEvent(dt),vr(this,Hu,null),vr(this,Wm,!1)))};let TouchManager=Q$;var Ym,_c,Hn,In,Wu,B0,Vp,y1,Eo,Xm,qu,bu,zp,v1,Qm,Qo,E1,Jm,Ku,yu,V0,z0,zl,Zm,j1,bR,w1,r$,R1,s$,U0,jw,yR,CS,vR,AS,$1,n$,H0,ww,k1,i$,ER,TS,jR,NS,wR,PS,S1,a$,RR,MS,_1,o$,$R,IS,kR,DS,SR,FS,C1,l$,ex,kv;const Us=class Us{constructor(dt){yr(this,w1);yr(this,U0);yr(this,yR);yr(this,vR);yr(this,$1);yr(this,H0);yr(this,k1);yr(this,ER);yr(this,jR);yr(this,wR);yr(this,S1);yr(this,RR);yr(this,_1);yr(this,$R);yr(this,kR);yr(this,SR);yr(this,C1);yr(this,ex);yr(this,Ym,null);yr(this,_c,null);yr(this,Hn,null);yr(this,In,null);yr(this,Wu,null);yr(this,B0,!1);yr(this,Vp,null);yr(this,y1,"");yr(this,Eo,null);yr(this,Xm,null);yr(this,qu,null);yr(this,bu,null);yr(this,zp,null);yr(this,v1,"");yr(this,Qm,!1);yr(this,Qo,null);yr(this,E1,!1);yr(this,Jm,!1);yr(this,Ku,!1);yr(this,yu,null);yr(this,V0,0);yr(this,z0,0);yr(this,zl,null);yr(this,Zm,null);Es(this,"isSelected",!1);Es(this,"_isCopy",!1);Es(this,"_editToolbar",null);Es(this,"_initialOptions",Object.create(null));Es(this,"_initialData",null);Es(this,"_isVisible",!0);Es(this,"_uiManager",null);Es(this,"_focusEventsAllowed",!0);yr(this,j1,!1);yr(this,bR,Us._zIndex++);this.parent=dt.parent,this.id=dt.id,this.width=this.height=null,this.pageIndex=dt.parent.pageIndex,this.name=dt.name,this.div=null,this._uiManager=dt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=dt.isCentered,this._structTreeParentId=null,this.annotationElementId=dt.annotationElementId||null,this.creationDate=dt.creationDate||new Date,this.modificationDate=dt.modificationDate||null;const{rotation:$t,rawDims:{pageWidth:kt,pageHeight:Tt,pageX:Dt,pageY:Ft}}=this.parent.viewport;this.rotation=$t,this.pageRotation=(360+$t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[kt,Tt],this.pageTranslation=[Dt,Ft];const[Ut,Ht]=this.parentDimensions;this.x=dt.x/Ut,this.y=dt.y/Ht,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const dt=Us.prototype._resizeWithKeyboard,$t=AnnotationEditorUIManager.TRANSLATE_SMALL,kt=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],dt,{args:[-$t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],dt,{args:[-kt,0]}],[["ArrowRight","mac+ArrowRight"],dt,{args:[$t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],dt,{args:[kt,0]}],[["ArrowUp","mac+ArrowUp"],dt,{args:[0,-$t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],dt,{args:[0,-kt]}],[["ArrowDown","mac+ArrowDown"],dt,{args:[0,$t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],dt,{args:[0,kt]}],[["Escape","mac+Escape"],Us.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(dt){const $t=new FakeEditor({id:dt.parent.getNextId(),parent:dt.parent,uiManager:dt._uiManager});$t.annotationElementId=dt.annotationElementId,$t.deleted=!0,$t._uiManager.addToAnnotationStorage($t)}static initialize(dt,$t){if(Us._l10n??(Us._l10n=dt),Us._l10nResizer||(Us._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Us._borderLineWidth!==-1)return;const kt=getComputedStyle(document.documentElement);Us._borderLineWidth=parseFloat(kt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(dt,$t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(dt){return!1}static paste(dt,$t){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return ar(this,j1)}set _isDraggable(dt){var $t;vr(this,j1,dt),($t=this.div)==null||$t.classList.toggle("draggable",dt)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[dt,$t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*$t/(dt*2),this.y+=this.width*dt/($t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*$t/(dt*2),this.y-=this.width*dt/($t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(dt){this._uiManager.addCommands(dt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ar(this,bR)}setParent(dt){var $t;dt!==null?(this.pageIndex=dt.pageIndex,this.pageDimensions=dt.pageDimensions):(Br(this,ex,kv).call(this),($t=ar(this,bu))==null||$t.remove(),vr(this,bu,null)),this.parent=dt}focusin(dt){this._focusEventsAllowed&&(ar(this,Qm)?vr(this,Qm,!1):this.parent.setSelected(this))}focusout(dt){var kt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const $t=dt.relatedTarget;$t!=null&&$t.closest(`#${this.id}`)||(dt.preventDefault(),(kt=this.parent)!=null&&kt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(dt,$t,kt,Tt){const[Dt,Ft]=this.parentDimensions;[kt,Tt]=this.screenToPageTranslation(kt,Tt),this.x=(dt+kt)/Dt,this.y=($t+Tt)/Ft,this.fixAndSetPosition()}_moveAfterPaste(dt,$t){const[kt,Tt]=this.parentDimensions;this.setAt(dt*kt,$t*Tt,this.width*kt,this.height*Tt),this._onTranslated()}translate(dt,$t){Br(this,w1,r$).call(this,this.parentDimensions,dt,$t)}translateInPage(dt,$t){ar(this,Qo)||vr(this,Qo,[this.x,this.y,this.width,this.height]),Br(this,w1,r$).call(this,this.pageDimensions,dt,$t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(dt,$t){ar(this,Qo)||vr(this,Qo,[this.x,this.y,this.width,this.height]);const{div:kt,parentDimensions:[Tt,Dt]}=this;if(this.x+=dt/Tt,this.y+=$t/Dt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Jt,y:Zt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Jt,Zt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Ft,y:Ut}=this;const[Ht,Kt]=this.getBaseTranslation();Ft+=Ht,Ut+=Kt;const{style:Yt}=kt;Yt.left=`${(100*Ft).toFixed(2)}%`,Yt.top=`${(100*Ut).toFixed(2)}%`,this._onTranslating(Ft,Ut),kt.scrollIntoView({block:"nearest"})}_onTranslating(dt,$t){}_onTranslated(dt,$t){}get _hasBeenMoved(){return!!ar(this,Qo)&&(ar(this,Qo)[0]!==this.x||ar(this,Qo)[1]!==this.y)}get _hasBeenResized(){return!!ar(this,Qo)&&(ar(this,Qo)[2]!==this.width||ar(this,Qo)[3]!==this.height)}getBaseTranslation(){const[dt,$t]=this.parentDimensions,{_borderLineWidth:kt}=Us,Tt=kt/dt,Dt=kt/$t;switch(this.rotation){case 90:return[-Tt,Dt];case 180:return[Tt,Dt];case 270:return[Tt,-Dt];default:return[-Tt,-Dt]}}get _mustFixPosition(){return!0}fixAndSetPosition(dt=this.rotation){const{div:{style:$t},pageDimensions:[kt,Tt]}=this;let{x:Dt,y:Ft,width:Ut,height:Ht}=this;if(Ut*=kt,Ht*=Tt,Dt*=kt,Ft*=Tt,this._mustFixPosition)switch(dt){case 0:Dt=MathClamp(Dt,0,kt-Ut),Ft=MathClamp(Ft,0,Tt-Ht);break;case 90:Dt=MathClamp(Dt,0,kt-Ht),Ft=MathClamp(Ft,Ut,Tt);break;case 180:Dt=MathClamp(Dt,Ut,kt),Ft=MathClamp(Ft,Ht,Tt);break;case 270:Dt=MathClamp(Dt,Ht,kt),Ft=MathClamp(Ft,0,Tt-Ut);break}this.x=Dt/=kt,this.y=Ft/=Tt;const[Kt,Yt]=this.getBaseTranslation();Dt+=Kt,Ft+=Yt,$t.left=`${(100*Dt).toFixed(2)}%`,$t.top=`${(100*Ft).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(dt,$t){var kt;return Br(kt=Us,R1,s$).call(kt,dt,$t,this.parentRotation)}pageTranslationToScreen(dt,$t){var kt;return Br(kt=Us,R1,s$).call(kt,dt,$t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:dt,pageDimensions:[$t,kt]}=this;return[$t*dt,kt*dt]}setDims(){const{div:{style:dt},width:$t,height:kt}=this;dt.width=`${(100*$t).toFixed(2)}%`,dt.height=`${(100*kt).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(dt){return Math.round(dt*1e4)/1e4}_onResizing(){}altTextFinish(){var dt;(dt=ar(this,Hn))==null||dt.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||ar(this,Jm))return this._editToolbar;this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render());const{toolbarButtons:dt}=this;if(dt)for(const[$t,kt]of dt)await this._editToolbar.addButton($t,kt);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var dt;(dt=this._editToolbar)==null||dt.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var dt;(dt=this._editToolbar)==null||dt.removeButton("comment")}removeEditToolbar(){var dt,$t;(dt=this._editToolbar)==null||dt.remove(),this._editToolbar=null,($t=ar(this,Hn))==null||$t.destroy()}addContainer(dt){var kt;const $t=(kt=this._editToolbar)==null?void 0:kt.div;$t?$t.before(dt):this.div.append(dt)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return ar(this,Hn)||(AltText.initialize(Us._l10n),vr(this,Hn,new AltText(this)),ar(this,Ym)&&(ar(this,Hn).data=ar(this,Ym),vr(this,Ym,null))),ar(this,Hn)}get altTextData(){var dt;return(dt=ar(this,Hn))==null?void 0:dt.data}set altTextData(dt){ar(this,Hn)&&(ar(this,Hn).data=dt)}get guessedAltText(){var dt;return(dt=ar(this,Hn))==null?void 0:dt.guessedText}async setGuessedAltText(dt){var $t;await(($t=ar(this,Hn))==null?void 0:$t.setGuessedText(dt))}serializeAltText(dt){var $t;return($t=ar(this,Hn))==null?void 0:$t.serialize(dt)}hasAltText(){return!!ar(this,Hn)&&!ar(this,Hn).isEmpty()}hasAltTextData(){var dt;return((dt=ar(this,Hn))==null?void 0:dt.hasData())??!1}focusCommentButton(){var dt;(dt=ar(this,In))==null||dt.focusButton()}addCommentButton(){return ar(this,In)||vr(this,In,new Comment(this))}addStandaloneCommentButton(){if(ar(this,Wu)){this._uiManager.isEditingMode()&&ar(this,Wu).classList.remove("hidden");return}this.hasComment&&(vr(this,Wu,ar(this,In).renderForStandalone()),this.div.append(ar(this,Wu)))}removeStandaloneCommentButton(){ar(this,In).removeStandaloneCommentButton(),vr(this,Wu,null)}hideStandaloneCommentButton(){var dt;(dt=ar(this,Wu))==null||dt.classList.add("hidden")}get comment(){const{data:{richText:dt,text:$t,date:kt,deleted:Tt}}=ar(this,In);return{text:$t,richText:dt,date:kt,deleted:Tt,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(dt){ar(this,In)||vr(this,In,new Comment(this)),ar(this,In).data=dt,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:dt,popupRef:$t,richText:kt}){if(!$t||(ar(this,In)||vr(this,In,new Comment(this)),ar(this,In).setInitialText(dt,kt),!this.annotationElementId))return;const Tt=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);Tt&&this.updateFromAnnotationLayer(Tt)}get hasEditedComment(){var dt;return(dt=ar(this,In))==null?void 0:dt.hasBeenEdited()}get hasDeletedComment(){var dt;return(dt=ar(this,In))==null?void 0:dt.isDeleted()}get hasComment(){return!!ar(this,In)&&!ar(this,In).isEmpty()&&!ar(this,In).isDeleted()}async editComment(dt){ar(this,In)||vr(this,In,new Comment(this)),ar(this,In).edit(dt)}toggleComment(dt,$t=void 0){this.hasComment&&this._uiManager.toggleComment(this,dt,$t)}setSelectedCommentButton(dt){ar(this,In).setSelectedButton(dt)}addComment(dt){if(this.hasEditedComment){const[,,,Tt]=dt.rect,[Dt]=this.pageDimensions,[Ft]=this.pageTranslation,Ut=Ft+Dt+1,Ht=Tt-100,Kt=Ut+180;dt.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[Ut,Ht,Kt,Tt]}}}updateFromAnnotationLayer({popup:{contents:dt,deleted:$t}}){ar(this,In).data=$t?null:dt}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var Ft;const dt=this.div=document.createElement("div");dt.setAttribute("data-editor-rotation",(360-this.rotation)%360),dt.className=this.name,dt.setAttribute("id",this.id),dt.tabIndex=ar(this,B0)?-1:0,dt.setAttribute("role","application"),this.defaultL10nId&&dt.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||dt.classList.add("hidden"),this.setInForeground(),Br(this,_1,o$).call(this);const[$t,kt]=this.parentDimensions;this.parentRotation%180!==0&&(dt.style.maxWidth=`${(100*kt/$t).toFixed(2)}%`,dt.style.maxHeight=`${(100*$t/kt).toFixed(2)}%`);const[Tt,Dt]=this.getInitialTranslation();return this.translate(Tt,Dt),bindEvents(this,dt,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(ar(this,Zm)||vr(this,Zm,new TouchManager({container:dt,isPinchingDisabled:()=>!this.isSelected,onPinchStart:Br(this,ER,TS).bind(this),onPinching:Br(this,jR,NS).bind(this),onPinchEnd:Br(this,wR,PS).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(Ft=this._uiManager._editorUndoBar)==null||Ft.hide(),dt}pointerdown(dt){const{isMac:$t}=util_FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&$t){dt.preventDefault();return}if(vr(this,Qm,!0),this._isDraggable){Br(this,RR,MS).call(this,dt);return}Br(this,S1,a$).call(this,dt)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){ar(this,yu)&&clearTimeout(ar(this,yu)),vr(this,yu,setTimeout(()=>{var dt;vr(this,yu,null),(dt=this.parent)==null||dt.moveEditorInDOM(this)},0))}_setParentAndPosition(dt,$t,kt){dt.changeParent(this),this.x=$t,this.y=kt,this.fixAndSetPosition(),this._onTranslated()}getRect(dt,$t,kt=this.rotation){const Tt=this.parentScale,[Dt,Ft]=this.pageDimensions,[Ut,Ht]=this.pageTranslation,Kt=dt/Tt,Yt=$t/Tt,Jt=this.x*Dt,Zt=this.y*Ft,er=this.width*Dt,rr=this.height*Ft;switch(kt){case 0:return[Jt+Kt+Ut,Ft-Zt-Yt-rr+Ht,Jt+Kt+er+Ut,Ft-Zt-Yt+Ht];case 90:return[Jt+Yt+Ut,Ft-Zt+Kt+Ht,Jt+Yt+rr+Ut,Ft-Zt+Kt+er+Ht];case 180:return[Jt-Kt-er+Ut,Ft-Zt+Yt+Ht,Jt-Kt+Ut,Ft-Zt+Yt+rr+Ht];case 270:return[Jt-Yt-rr+Ut,Ft-Zt-Kt-er+Ht,Jt-Yt+Ut,Ft-Zt-Kt+Ht];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(dt,$t){const[kt,Tt,Dt,Ft]=dt,Ut=Dt-kt,Ht=Ft-Tt;switch(this.rotation){case 0:return[kt,$t-Ft,Ut,Ht];case 90:return[kt,$t-Tt,Ht,Ut];case 180:return[Dt,$t-Tt,Ut,Ht];case 270:return[Dt,$t-Ft,Ht,Ut];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Us._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var dt;(dt=ar(this,In))==null||dt.onUpdatedColor()}getData(){const{comment:{text:dt,color:$t,date:kt,opacity:Tt,deleted:Dt,richText:Ft},uid:Ut,pageIndex:Ht,creationDate:Kt,modificationDate:Yt}=this;return{id:Ut,pageIndex:Ht,rect:this.getPDFRect(),richText:Ft,contentsObj:{str:dt},creationDate:Kt,modificationDate:kt||Yt,popupRef:!Dt,color:$t,opacity:Tt}}onceAdded(dt){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),vr(this,Jm,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),vr(this,Jm,!1),!0):!1}isInEditMode(){return ar(this,Jm)}shouldGetKeyboardEvents(){return ar(this,Ku)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:dt,left:$t,bottom:kt,right:Tt}=this.getClientDimensions(),{innerHeight:Dt,innerWidth:Ft}=window;return $t<Ft&&Tt>0&&dt<Dt&&kt>0}rebuild(){Br(this,_1,o$).call(this)}rotate(dt){}resize(){}serializeDeleted(){var dt;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((dt=this._initialData)==null?void 0:dt.popupRef)||""}}serialize(dt=!1,$t=null){var kt;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((kt=this._initialData)==null?void 0:kt.popupRef)||""}}static async deserialize(dt,$t,kt){const Tt=new this.prototype.constructor({parent:$t,id:$t.getNextId(),uiManager:kt,annotationElementId:dt.annotationElementId,creationDate:dt.creationDate,modificationDate:dt.modificationDate});Tt.rotation=dt.rotation,vr(Tt,Ym,dt.accessibilityData),Tt._isCopy=dt.isCopy||!1;const[Dt,Ft]=Tt.pageDimensions,[Ut,Ht,Kt,Yt]=Tt.getRectInCurrentCoords(dt.rect,Ft);return Tt.x=Ut/Dt,Tt.y=Ht/Ft,Tt.width=Kt/Dt,Tt.height=Yt/Ft,Tt}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var dt,$t;if((dt=ar(this,zp))==null||dt.abort(),vr(this,zp,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),ar(this,yu)&&(clearTimeout(ar(this,yu)),vr(this,yu,null)),Br(this,ex,kv).call(this),this.removeEditToolbar(),ar(this,zl)){for(const kt of ar(this,zl).values())clearTimeout(kt);vr(this,zl,null)}this.parent=null,($t=ar(this,Zm))==null||$t.destroy(),vr(this,Zm,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Br(this,yR,CS).call(this),ar(this,Eo).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[dt,$t]}=this,[kt,Tt,Dt,Ft]=this.getPDFRect();return[Us._round(kt+(Dt-kt)*dt),Us._round(Tt+(Ft-Tt)*(1-$t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return ar(this,In).commentPopupPositionInLayer}set commentPopupPosition(dt){ar(this,In).commentPopupPositionInLayer=dt}hasDefaultPopupPosition(){return ar(this,In).hasDefaultPopupPosition()}get commentButtonWidth(){return ar(this,In).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(dt){ar(this,In).setCommentButtonStates(dt)}keydown(dt){if(!this.isResizable||dt.target!==this.div||dt.key!=="Enter")return;this._uiManager.setSelected(this),vr(this,qu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const $t=ar(this,Eo).children;if(!ar(this,_c)){vr(this,_c,Array.from($t));const Ft=Br(this,$R,IS).bind(this),Ut=Br(this,kR,DS).bind(this),Ht=this._uiManager._signal;for(const Kt of ar(this,_c)){const Yt=Kt.getAttribute("data-resizer-name");Kt.setAttribute("role","spinbutton"),Kt.addEventListener("keydown",Ft,{signal:Ht}),Kt.addEventListener("blur",Ut,{signal:Ht}),Kt.addEventListener("focus",Br(this,SR,FS).bind(this,Yt),{signal:Ht}),Kt.setAttribute("data-l10n-id",Us._l10nResizer[Yt])}}const kt=ar(this,_c)[0];let Tt=0;for(const Ft of $t){if(Ft===kt)break;Tt++}const Dt=(360-this.rotation+this.parentRotation)%360/90*(ar(this,_c).length/4);if(Dt!==Tt){if(Dt<Tt)for(let Ut=0;Ut<Tt-Dt;Ut++)ar(this,Eo).append(ar(this,Eo).firstChild);else if(Dt>Tt)for(let Ut=0;Ut<Dt-Tt;Ut++)ar(this,Eo).firstChild.before(ar(this,Eo).lastChild);let Ft=0;for(const Ut of $t){const Kt=ar(this,_c)[Ft++].getAttribute("data-resizer-name");Ut.setAttribute("data-l10n-id",Us._l10nResizer[Kt])}}Br(this,C1,l$).call(this,0),vr(this,Ku,!0),ar(this,Eo).firstChild.focus({focusVisible:!0}),dt.preventDefault(),dt.stopImmediatePropagation()}_resizeWithKeyboard(dt,$t){ar(this,Ku)&&Br(this,k1,i$).call(this,ar(this,v1),{deltaX:dt,deltaY:$t,fromKeyboard:!0})}_stopResizingWithKeyboard(){Br(this,ex,kv).call(this),this.div.focus()}select(){var dt,$t,kt;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(dt=this.div)==null||dt.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var Tt,Dt;(Tt=this.div)!=null&&Tt.classList.contains("selectedEditor")&&((Dt=this._editToolbar)==null||Dt.show())});return}($t=this._editToolbar)==null||$t.show(),(kt=ar(this,Hn))==null||kt.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var dt;return(dt=this.div)==null?void 0:dt.focus({preventScroll:!0})},0)}unselect(){var dt,$t,kt,Tt,Dt;this.isSelected&&(this.isSelected=!1,(dt=ar(this,Eo))==null||dt.classList.add("hidden"),($t=this.div)==null||$t.classList.remove("selectedEditor"),(kt=this.div)!=null&&kt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(Tt=this._editToolbar)==null||Tt.hide(),(Dt=ar(this,Hn))==null||Dt.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(dt,$t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(dt){dt.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return ar(this,E1)}set isEditing(dt){vr(this,E1,dt),this.parent&&(dt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(dt,$t=!1){if($t){ar(this,zl)||vr(this,zl,new Map);const{action:kt}=dt;let Tt=ar(this,zl).get(kt);Tt&&clearTimeout(Tt),Tt=setTimeout(()=>{this._reportTelemetry(dt),ar(this,zl).delete(kt),ar(this,zl).size===0&&vr(this,zl,null)},Us._telemetryTimeout),ar(this,zl).set(kt,Tt);return}dt.type||(dt.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:dt}})}show(dt=this._isVisible){this.div.classList.toggle("hidden",!dt),this._isVisible=dt}enable(){this.div&&(this.div.tabIndex=0),vr(this,B0,!1)}disable(){this.div&&(this.div.tabIndex=-1),vr(this,B0,!0)}updateFakeAnnotationElement(dt){if(!ar(this,bu)&&!this.deleted){vr(this,bu,dt.addFakeAnnotation(this));return}if(this.deleted){ar(this,bu).remove(),vr(this,bu,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&ar(this,bu).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(dt){if(this.deleted)return dt.hide(),null;let $t=dt.container.querySelector(".annotationContent");if(!$t)$t=document.createElement("div"),$t.classList.add("annotationContent",this.editorType),dt.container.prepend($t);else if($t.nodeName==="CANVAS"){const kt=$t;$t=document.createElement("div"),$t.classList.add("annotationContent",this.editorType),kt.before($t)}return $t}resetAnnotationElement(dt){const{firstChild:$t}=dt.container;($t==null?void 0:$t.nodeName)==="DIV"&&$t.classList.contains("annotationContent")&&$t.remove()}};Ym=new WeakMap,_c=new WeakMap,Hn=new WeakMap,In=new WeakMap,Wu=new WeakMap,B0=new WeakMap,Vp=new WeakMap,y1=new WeakMap,Eo=new WeakMap,Xm=new WeakMap,qu=new WeakMap,bu=new WeakMap,zp=new WeakMap,v1=new WeakMap,Qm=new WeakMap,Qo=new WeakMap,E1=new WeakMap,Jm=new WeakMap,Ku=new WeakMap,yu=new WeakMap,V0=new WeakMap,z0=new WeakMap,zl=new WeakMap,Zm=new WeakMap,j1=new WeakMap,bR=new WeakMap,w1=new WeakSet,r$=function([dt,$t],kt,Tt){[kt,Tt]=this.screenToPageTranslation(kt,Tt),this.x+=kt/dt,this.y+=Tt/$t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},R1=new WeakSet,s$=function(dt,$t,kt){switch(kt){case 90:return[$t,-dt];case 180:return[-dt,-$t];case 270:return[-$t,dt];default:return[dt,$t]}},U0=new WeakSet,jw=function(dt){switch(dt){case 90:{const[$t,kt]=this.pageDimensions;return[0,-$t/kt,kt/$t,0]}case 180:return[-1,0,0,-1];case 270:{const[$t,kt]=this.pageDimensions;return[0,$t/kt,-kt/$t,0]}default:return[1,0,0,1]}},yR=new WeakSet,CS=function(){if(ar(this,Eo))return;vr(this,Eo,document.createElement("div")),ar(this,Eo).classList.add("resizers");const dt=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],$t=this._uiManager._signal;for(const kt of dt){const Tt=document.createElement("div");ar(this,Eo).append(Tt),Tt.classList.add("resizer",kt),Tt.setAttribute("data-resizer-name",kt),Tt.addEventListener("pointerdown",Br(this,vR,AS).bind(this,kt),{signal:$t}),Tt.addEventListener("contextmenu",noContextMenu,{signal:$t}),Tt.tabIndex=-1}this.div.prepend(ar(this,Eo))},vR=new WeakSet,AS=function(dt,$t){var Yt;$t.preventDefault();const{isMac:kt}=util_FeatureTest.platform;if($t.button!==0||$t.ctrlKey&&kt)return;(Yt=ar(this,Hn))==null||Yt.toggle(!1);const Tt=this._isDraggable;this._isDraggable=!1,vr(this,Xm,[$t.screenX,$t.screenY]);const Dt=new AbortController,Ft=this._uiManager.combinedSignal(Dt);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Br(this,k1,i$).bind(this,dt),{passive:!0,capture:!0,signal:Ft}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:Ft}),window.addEventListener("contextmenu",noContextMenu,{signal:Ft}),vr(this,qu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const Ut=this.parent.div.style.cursor,Ht=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle($t.target).cursor;const Kt=()=>{var Jt;Dt.abort(),this.parent.togglePointerEvents(!0),(Jt=ar(this,Hn))==null||Jt.toggle(!0),this._isDraggable=Tt,this.parent.div.style.cursor=Ut,this.div.style.cursor=Ht,Br(this,H0,ww).call(this)};window.addEventListener("pointerup",Kt,{signal:Ft}),window.addEventListener("blur",Kt,{signal:Ft})},$1=new WeakSet,n$=function(dt,$t,kt,Tt){this.width=kt,this.height=Tt,this.x=dt,this.y=$t,this.setDims(),this.fixAndSetPosition(),this._onResized()},H0=new WeakSet,ww=function(){if(!ar(this,qu))return;const{savedX:dt,savedY:$t,savedWidth:kt,savedHeight:Tt}=ar(this,qu);vr(this,qu,null);const Dt=this.x,Ft=this.y,Ut=this.width,Ht=this.height;Dt===dt&&Ft===$t&&Ut===kt&&Ht===Tt||this.addCommands({cmd:Br(this,$1,n$).bind(this,Dt,Ft,Ut,Ht),undo:Br(this,$1,n$).bind(this,dt,$t,kt,Tt),mustExec:!0})},k1=new WeakSet,i$=function(dt,$t){const[kt,Tt]=this.parentDimensions,Dt=this.x,Ft=this.y,Ut=this.width,Ht=this.height,Kt=Us.MIN_SIZE/kt,Yt=Us.MIN_SIZE/Tt,Jt=Br(this,U0,jw).call(this,this.rotation),Zt=(_r,Pr)=>[Jt[0]*_r+Jt[2]*Pr,Jt[1]*_r+Jt[3]*Pr],er=Br(this,U0,jw).call(this,360-this.rotation),rr=(_r,Pr)=>[er[0]*_r+er[2]*Pr,er[1]*_r+er[3]*Pr];let sr,nr,ir=!1,or=!1;switch(dt){case"topLeft":ir=!0,sr=(_r,Pr)=>[0,0],nr=(_r,Pr)=>[_r,Pr];break;case"topMiddle":sr=(_r,Pr)=>[_r/2,0],nr=(_r,Pr)=>[_r/2,Pr];break;case"topRight":ir=!0,sr=(_r,Pr)=>[_r,0],nr=(_r,Pr)=>[0,Pr];break;case"middleRight":or=!0,sr=(_r,Pr)=>[_r,Pr/2],nr=(_r,Pr)=>[0,Pr/2];break;case"bottomRight":ir=!0,sr=(_r,Pr)=>[_r,Pr],nr=(_r,Pr)=>[0,0];break;case"bottomMiddle":sr=(_r,Pr)=>[_r/2,Pr],nr=(_r,Pr)=>[_r/2,0];break;case"bottomLeft":ir=!0,sr=(_r,Pr)=>[0,Pr],nr=(_r,Pr)=>[_r,0];break;case"middleLeft":or=!0,sr=(_r,Pr)=>[0,Pr/2],nr=(_r,Pr)=>[_r,Pr/2];break}const lr=sr(Ut,Ht),cr=nr(Ut,Ht);let dr=Zt(...cr);const ur=Us._round(Dt+dr[0]),pr=Us._round(Ft+dr[1]);let mr=1,jr=1,Rr,xr;if($t.fromKeyboard)({deltaX:Rr,deltaY:xr}=$t);else{const{screenX:_r,screenY:Pr}=$t,[br,wr]=ar(this,Xm);[Rr,xr]=this.screenToPageTranslation(_r-br,Pr-wr),ar(this,Xm)[0]=_r,ar(this,Xm)[1]=Pr}if([Rr,xr]=rr(Rr/kt,xr/Tt),ir){const _r=Math.hypot(Ut,Ht);mr=jr=Math.max(Math.min(Math.hypot(cr[0]-lr[0]-Rr,cr[1]-lr[1]-xr)/_r,1/Ut,1/Ht),Kt/Ut,Yt/Ht)}else or?mr=MathClamp(Math.abs(cr[0]-lr[0]-Rr),Kt,1)/Ut:jr=MathClamp(Math.abs(cr[1]-lr[1]-xr),Yt,1)/Ht;const kr=Us._round(Ut*mr),Mr=Us._round(Ht*jr);dr=Zt(...nr(kr,Mr));const Tr=ur-dr[0],Or=pr-dr[1];ar(this,Qo)||vr(this,Qo,[this.x,this.y,this.width,this.height]),this.width=kr,this.height=Mr,this.x=Tr,this.y=Or,this.setDims(),this.fixAndSetPosition(),this._onResizing()},ER=new WeakSet,TS=function(){var dt;vr(this,qu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(dt=ar(this,Hn))==null||dt.toggle(!1),this.parent.togglePointerEvents(!1)},jR=new WeakSet,NS=function(dt,$t,kt){let Dt=.7*(kt/$t)+1-.7;if(Dt===1)return;const Ft=Br(this,U0,jw).call(this,this.rotation),Ut=(ur,pr)=>[Ft[0]*ur+Ft[2]*pr,Ft[1]*ur+Ft[3]*pr],[Ht,Kt]=this.parentDimensions,Yt=this.x,Jt=this.y,Zt=this.width,er=this.height,rr=Us.MIN_SIZE/Ht,sr=Us.MIN_SIZE/Kt;Dt=Math.max(Math.min(Dt,1/Zt,1/er),rr/Zt,sr/er);const nr=Us._round(Zt*Dt),ir=Us._round(er*Dt);if(nr===Zt&&ir===er)return;ar(this,Qo)||vr(this,Qo,[Yt,Jt,Zt,er]);const or=Ut(Zt/2,er/2),lr=Us._round(Yt+or[0]),cr=Us._round(Jt+or[1]),dr=Ut(nr/2,ir/2);this.x=lr-dr[0],this.y=cr-dr[1],this.width=nr,this.height=ir,this.setDims(),this.fixAndSetPosition(),this._onResizing()},wR=new WeakSet,PS=function(){var dt;(dt=ar(this,Hn))==null||dt.toggle(!0),this.parent.togglePointerEvents(!0),Br(this,H0,ww).call(this)},S1=new WeakSet,a$=function(dt){const{isMac:$t}=util_FeatureTest.platform;dt.ctrlKey&&!$t||dt.shiftKey||dt.metaKey&&$t?this.parent.toggleSelected(this):this.parent.setSelected(this)},RR=new WeakSet,MS=function(dt){const{isSelected:$t}=this;this._uiManager.setUpDragSession();let kt=!1;const Tt=new AbortController,Dt=this._uiManager.combinedSignal(Tt),Ft={capture:!0,passive:!1,signal:Dt},Ut=Kt=>{Tt.abort(),vr(this,Vp,null),vr(this,Qm,!1),this._uiManager.endDragSession()||Br(this,S1,a$).call(this,Kt),kt&&this._onStopDragging()};$t&&(vr(this,V0,dt.clientX),vr(this,z0,dt.clientY),vr(this,Vp,dt.pointerId),vr(this,y1,dt.pointerType),window.addEventListener("pointermove",Kt=>{kt||(kt=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:Yt,clientY:Jt,pointerId:Zt}=Kt;if(Zt!==ar(this,Vp)){stopEvent(Kt);return}const[er,rr]=this.screenToPageTranslation(Yt-ar(this,V0),Jt-ar(this,z0));vr(this,V0,Yt),vr(this,z0,Jt),this._uiManager.dragSelectedEditors(er,rr)},Ft),window.addEventListener("touchmove",stopEvent,Ft),window.addEventListener("pointerdown",Kt=>{Kt.pointerType===ar(this,y1)&&(ar(this,Zm)||Kt.isPrimary)&&Ut(Kt),stopEvent(Kt)},Ft));const Ht=Kt=>{if(!ar(this,Vp)||ar(this,Vp)===Kt.pointerId){Ut(Kt);return}stopEvent(Kt)};window.addEventListener("pointerup",Ht,{signal:Dt}),window.addEventListener("blur",Ht,{signal:Dt})},_1=new WeakSet,o$=function(){if(ar(this,zp)||!this.div)return;vr(this,zp,new AbortController);const dt=this._uiManager.combinedSignal(ar(this,zp));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:dt}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:dt})},$R=new WeakSet,IS=function(dt){Us._resizerKeyboardManager.exec(this,dt)},kR=new WeakSet,DS=function(dt){var $t;ar(this,Ku)&&(($t=dt.relatedTarget)==null?void 0:$t.parentNode)!==ar(this,Eo)&&Br(this,ex,kv).call(this)},SR=new WeakSet,FS=function(dt){vr(this,v1,ar(this,Ku)?dt:"")},C1=new WeakSet,l$=function(dt){if(ar(this,_c))for(const $t of ar(this,_c))$t.tabIndex=dt},ex=new WeakSet,kv=function(){vr(this,Ku,!1),Br(this,C1,l$).call(this,-1),Br(this,H0,ww).call(this)},yr(Us,R1),Es(Us,"_l10n",null),Es(Us,"_l10nResizer",null),Es(Us,"_borderLineWidth",-1),Es(Us,"_colorManager",new ColorManager),Es(Us,"_zIndex",1),Es(Us,"_telemetryTimeout",1e3);let AnnotationEditor=Us;class FakeEditor extends AnnotationEditor{constructor(dt){super(dt),this.annotationElementId=dt.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(dt){this.h1=dt?dt&4294967295:SEED,this.h2=dt?dt&4294967295:SEED}update(dt){let $t,kt;if(typeof dt=="string"){$t=new Uint8Array(dt.length*2),kt=0;for(let sr=0,nr=dt.length;sr<nr;sr++){const ir=dt.charCodeAt(sr);ir<=255?$t[kt++]=ir:($t[kt++]=ir>>>8,$t[kt++]=ir&255)}}else if(ArrayBuffer.isView(dt))$t=dt.slice(),kt=$t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const Tt=kt>>2,Dt=kt-Tt*4,Ft=new Uint32Array($t.buffer,0,Tt);let Ut=0,Ht=0,Kt=this.h1,Yt=this.h2;const Jt=3432918353,Zt=461845907,er=Jt&MASK_LOW,rr=Zt&MASK_LOW;for(let sr=0;sr<Tt;sr++)sr&1?(Ut=Ft[sr],Ut=Ut*Jt&MASK_HIGH|Ut*er&MASK_LOW,Ut=Ut<<15|Ut>>>17,Ut=Ut*Zt&MASK_HIGH|Ut*rr&MASK_LOW,Kt^=Ut,Kt=Kt<<13|Kt>>>19,Kt=Kt*5+3864292196):(Ht=Ft[sr],Ht=Ht*Jt&MASK_HIGH|Ht*er&MASK_LOW,Ht=Ht<<15|Ht>>>17,Ht=Ht*Zt&MASK_HIGH|Ht*rr&MASK_LOW,Yt^=Ht,Yt=Yt<<13|Yt>>>19,Yt=Yt*5+3864292196);switch(Ut=0,Dt){case 3:Ut^=$t[Tt*4+2]<<16;case 2:Ut^=$t[Tt*4+1]<<8;case 1:Ut^=$t[Tt*4],Ut=Ut*Jt&MASK_HIGH|Ut*er&MASK_LOW,Ut=Ut<<15|Ut>>>17,Ut=Ut*Zt&MASK_HIGH|Ut*rr&MASK_LOW,Tt&1?Kt^=Ut:Yt^=Ut}this.h1=Kt,this.h2=Yt}hexdigest(){let dt=this.h1,$t=this.h2;return dt^=$t>>>1,dt=dt*3981806797&MASK_HIGH|dt*36045&MASK_LOW,$t=$t*4283543511&MASK_HIGH|(($t<<16|dt>>>16)*2950163797&MASK_HIGH)>>>16,dt^=$t>>>1,dt=dt*444984403&MASK_HIGH|dt*60499&MASK_LOW,$t=$t*3301882366&MASK_HIGH|(($t<<16|dt>>>16)*3120437893&MASK_HIGH)>>>16,dt^=$t>>>1,(dt>>>0).toString(16).padStart(8,"0")+($t>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var tx,rx,Yu,jo,_R,LS;class AnnotationStorage{constructor(){yr(this,_R);yr(this,tx,!1);yr(this,rx,null);yr(this,Yu,null);yr(this,jo,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(dt,$t){const kt=ar(this,jo).get(dt);return kt===void 0?$t:Object.assign($t,kt)}getRawValue(dt){return ar(this,jo).get(dt)}remove(dt){const $t=ar(this,jo).get(dt);if($t!==void 0&&($t instanceof AnnotationEditor&&ar(this,Yu).delete($t.annotationElementId),ar(this,jo).delete(dt),ar(this,jo).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const kt of ar(this,jo).values())if(kt instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(dt,$t){const kt=ar(this,jo).get(dt);let Tt=!1;if(kt!==void 0)for(const[Dt,Ft]of Object.entries($t))kt[Dt]!==Ft&&(Tt=!0,kt[Dt]=Ft);else Tt=!0,ar(this,jo).set(dt,$t);Tt&&Br(this,_R,LS).call(this),$t instanceof AnnotationEditor&&((ar(this,Yu)||vr(this,Yu,new Map)).set($t.annotationElementId,$t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor($t.constructor._type))}has(dt){return ar(this,jo).has(dt)}get size(){return ar(this,jo).size}resetModified(){ar(this,tx)&&(vr(this,tx,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(ar(this,jo).size===0)return SerializableEmpty;const dt=new Map,$t=new MurmurHash3_64,kt=[],Tt=Object.create(null);let Dt=!1;for(const[Ft,Ut]of ar(this,jo)){const Ht=Ut instanceof AnnotationEditor?Ut.serialize(!1,Tt):Ut;Ht&&(dt.set(Ft,Ht),$t.update(`${Ft}:${JSON.stringify(Ht)}`),Dt||(Dt=!!Ht.bitmap))}if(Dt)for(const Ft of dt.values())Ft.bitmap&&kt.push(Ft.bitmap);return dt.size>0?{map:dt,hash:$t.hexdigest(),transfer:kt}:SerializableEmpty}get editorStats(){let dt=null;const $t=new Map;let kt=0,Tt=0;for(const Dt of ar(this,jo).values()){if(!(Dt instanceof AnnotationEditor)){Dt.popup&&(Dt.popup.deleted?Tt+=1:kt+=1);continue}Dt.isCommentDeleted?Tt+=1:Dt.hasEditedComment&&(kt+=1);const Ft=Dt.telemetryFinalData;if(!Ft)continue;const{type:Ut}=Ft;$t.has(Ut)||$t.set(Ut,Object.getPrototypeOf(Dt).constructor),dt||(dt=Object.create(null));const Ht=dt[Ut]||(dt[Ut]=new Map);for(const[Kt,Yt]of Object.entries(Ft)){if(Kt==="type")continue;let Jt=Ht.get(Kt);Jt||(Jt=new Map,Ht.set(Kt,Jt));const Zt=Jt.get(Yt)??0;Jt.set(Yt,Zt+1)}}if((Tt>0||kt>0)&&(dt||(dt=Object.create(null)),dt.comments={deleted:Tt,edited:kt}),!dt)return null;for(const[Dt,Ft]of $t)dt[Dt]=Ft.computeTelemetryFinalData(dt[Dt]);return dt}resetModifiedIds(){vr(this,rx,null)}updateEditor(dt,$t){var Tt;const kt=(Tt=ar(this,Yu))==null?void 0:Tt.get(dt);return kt?(kt.updateFromAnnotationLayer($t),!0):!1}getEditor(dt){var $t;return(($t=ar(this,Yu))==null?void 0:$t.get(dt))||null}get modifiedIds(){if(ar(this,rx))return ar(this,rx);const dt=[];if(ar(this,Yu))for(const $t of ar(this,Yu).values())$t.serialize()&&dt.push($t.annotationElementId);return vr(this,rx,{ids:new Set(dt),hash:dt.join(",")})}[Symbol.iterator](){return ar(this,jo).entries()}}tx=new WeakMap,rx=new WeakMap,Yu=new WeakMap,jo=new WeakMap,_R=new WeakSet,LS=function(){ar(this,tx)||(vr(this,tx,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var A1;class PrintAnnotationStorage extends AnnotationStorage{constructor($t){super();yr(this,A1,void 0);const{map:kt,hash:Tt,transfer:Dt}=$t.serializable,Ft=structuredClone(kt,Dt?{transfer:Dt}:null);vr(this,A1,{map:Ft,hash:Tt,transfer:Dt})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return ar(this,A1)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}A1=new WeakMap;var G0;class FontLoader{constructor({ownerDocument:dt=globalThis.document,styleElement:$t=null}){yr(this,G0,new Set);this._document=dt,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(dt){this.nativeFontFaces.add(dt),this._document.fonts.add(dt)}removeNativeFontFace(dt){this.nativeFontFaces.delete(dt),this._document.fonts.delete(dt)}insertRule(dt){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const $t=this.styleElement.sheet;$t.insertRule(dt,$t.cssRules.length)}clear(){for(const dt of this.nativeFontFaces)this._document.fonts.delete(dt);this.nativeFontFaces.clear(),ar(this,G0).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:dt,disableFontFace:$t,_inspectFont:kt}){if(!(!dt||ar(this,G0).has(dt.loadedName))){if(assert(!$t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:Tt,src:Dt,style:Ft}=dt,Ut=new FontFace(Tt,Dt,Ft);this.addNativeFontFace(Ut);try{await Ut.load(),ar(this,G0).add(Tt),kt==null||kt(dt)}catch{warn(`Cannot load system font: ${dt.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(Ut)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(dt){if(dt.attached||dt.missingFile&&!dt.systemFontInfo)return;if(dt.attached=!0,dt.systemFontInfo){await this.loadSystemFont(dt);return}if(this.isFontLoadingAPISupported){const kt=dt.createNativeFontFace();if(kt){this.addNativeFontFace(kt);try{await kt.loaded}catch(Tt){throw warn(`Failed to load font '${kt.family}': '${Tt}'.`),dt.disableFontFace=!0,Tt}}return}const $t=dt.createFontFaceRule();if($t){if(this.insertRule($t),this.isSyncFontLoadingSupported)return;await new Promise(kt=>{const Tt=this._queueLoadingCallback(kt);this._prepareFontLoadEvent(dt,Tt)})}}get isFontLoadingAPISupported(){var $t;const dt=!!(($t=this._document)!=null&&$t.fonts);return shadow(this,"isFontLoadingAPISupported",dt)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(dt){function $t(){for(assert(!Tt.done,"completeRequest() cannot be called twice."),Tt.done=!0;kt.length>0&&kt[0].done;){const Dt=kt.shift();setTimeout(Dt.callback,0)}}const{loadingRequests:kt}=this,Tt={done:!1,complete:$t,callback:dt};return kt.push(Tt),Tt}get _loadTestFont(){const dt=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",dt)}_prepareFontLoadEvent(dt,$t){function kt(cr,dr){return cr.charCodeAt(dr)<<24|cr.charCodeAt(dr+1)<<16|cr.charCodeAt(dr+2)<<8|cr.charCodeAt(dr+3)&255}function Tt(cr,dr,ur,pr){const mr=cr.substring(0,dr),jr=cr.substring(dr+ur);return mr+pr+jr}let Dt,Ft;const Ut=this._document.createElement("canvas");Ut.width=1,Ut.height=1;const Ht=Ut.getContext("2d");let Kt=0;function Yt(cr,dr){if(++Kt>30){warn("Load test font never loaded."),dr();return}if(Ht.font="30px "+cr,Ht.fillText(".",0,20),Ht.getImageData(0,0,1,1).data[3]>0){dr();return}setTimeout(Yt.bind(null,cr,dr))}const Jt=`lt${Date.now()}${this.loadTestFontId++}`;let Zt=this._loadTestFont;Zt=Tt(Zt,976,Jt.length,Jt);const rr=16,sr=1482184792;let nr=kt(Zt,rr);for(Dt=0,Ft=Jt.length-3;Dt<Ft;Dt+=4)nr=nr-sr+kt(Jt,Dt)|0;Dt<Jt.length&&(nr=nr-sr+kt(Jt+"XXX",Dt)|0),Zt=Tt(Zt,rr,4,string32(nr));const ir=`url(data:font/opentype;base64,${btoa(Zt)});`,or=`@font-face {font-family:"${Jt}";src:${ir}}`;this.insertRule(or);const lr=this._document.createElement("div");lr.style.visibility="hidden",lr.style.width=lr.style.height="10px",lr.style.position="absolute",lr.style.top=lr.style.left="0px";for(const cr of[dt.loadedName,Jt]){const dr=this._document.createElement("span");dr.textContent="Hi",dr.style.fontFamily=cr,lr.append(dr)}this._document.body.append(lr),Yt(Jt,()=>{lr.remove(),$t.complete()})}}G0=new WeakMap;var _n;class FontFaceObject{constructor(dt,$t=null,kt,Tt){yr(this,_n,void 0);this.compiledGlyphs=Object.create(null),vr(this,_n,dt),this._inspectFont=$t,kt&&Object.assign(this,kt),Tt&&(this.charProcOperatorList=Tt)}createNativeFontFace(){var $t;if(!this.data||this.disableFontFace)return null;let dt;if(!this.cssFontInfo)dt=new FontFace(this.loadedName,this.data,{});else{const kt={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(kt.style=`oblique ${this.cssFontInfo.italicAngle}deg`),dt=new FontFace(this.cssFontInfo.fontFamily,this.data,kt)}return($t=this._inspectFont)==null||$t.call(this,this),dt}createFontFaceRule(){var kt;if(!this.data||this.disableFontFace)return null;const dt=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let $t;if(!this.cssFontInfo)$t=`@font-face {font-family:"${this.loadedName}";src:${dt}}`;else{let Tt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Tt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),$t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Tt}src:${dt}}`}return(kt=this._inspectFont)==null||kt.call(this,this,dt),$t}getPathGenerator(dt,$t){if(this.compiledGlyphs[$t]!==void 0)return this.compiledGlyphs[$t];const kt=this.loadedName+"_path_"+$t;let Tt;try{Tt=dt.get(kt)}catch(Ft){warn(`getPathGenerator - ignoring character: "${Ft}".`)}const Dt=new Path2D(Tt||"");return this.fontExtraProperties||dt.delete(kt),this.compiledGlyphs[$t]=Dt}get black(){return ar(this,_n).black}get bold(){return ar(this,_n).bold}get disableFontFace(){return ar(this,_n).disableFontFace??!1}get fontExtraProperties(){return ar(this,_n).fontExtraProperties??!1}get isInvalidPDFjsFont(){return ar(this,_n).isInvalidPDFjsFont}get isType3Font(){return ar(this,_n).isType3Font}get italic(){return ar(this,_n).italic}get missingFile(){return ar(this,_n).missingFile}get remeasure(){return ar(this,_n).remeasure}get vertical(){return ar(this,_n).vertical}get ascent(){return ar(this,_n).ascent}get defaultWidth(){return ar(this,_n).defaultWidth}get descent(){return ar(this,_n).descent}get bbox(){return ar(this,_n).bbox}get fontMatrix(){return ar(this,_n).fontMatrix}get fallbackName(){return ar(this,_n).fallbackName}get loadedName(){return ar(this,_n).loadedName}get mimetype(){return ar(this,_n).mimetype}get name(){return ar(this,_n).name}get data(){return ar(this,_n).data}clearData(){ar(this,_n).clearData()}get cssFontInfo(){return ar(this,_n).cssFontInfo}get systemFontInfo(){return ar(this,_n).systemFontInfo}get defaultVMetrics(){return ar(this,_n).defaultVMetrics}}_n=new WeakMap;function getUrlProp(et){if(et instanceof URL)return et.href;if(typeof et=="string"){if(isNodeJS)return et;const dt=URL.parse(et,window.location);if(dt)return dt.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(et){if(isNodeJS&&typeof Buffer<"u"&&et instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(et instanceof Uint8Array&&et.byteLength===et.buffer.byteLength)return et;if(typeof et=="string")return stringToBytes(et);if(et instanceof ArrayBuffer||ArrayBuffer.isView(et)||typeof et=="object"&&!isNaN(et==null?void 0:et.length))return new Uint8Array(et);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(et){if(typeof et!="string")return null;if(et.endsWith("/"))return et;throw new Error(`Invalid factory url: "${et}" must include trailing slash.`)}const isRefProxy=et=>typeof et=="object"&&Number.isInteger(et==null?void 0:et.num)&&et.num>=0&&Number.isInteger(et==null?void 0:et.gen)&&et.gen>=0,isNameProxy=et=>typeof et=="object"&&typeof(et==null?void 0:et.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var Xu,AR;class LoopbackPort{constructor(){yr(this,Xu,new Map);yr(this,AR,Promise.resolve())}postMessage(dt,$t){const kt={data:structuredClone(dt,$t?{transfer:$t}:null)};ar(this,AR).then(()=>{for(const[Tt]of ar(this,Xu))Tt.call(this,kt)})}addEventListener(dt,$t,kt=null){let Tt=null;if((kt==null?void 0:kt.signal)instanceof AbortSignal){const{signal:Dt}=kt;if(Dt.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const Ft=()=>this.removeEventListener(dt,$t);Tt=()=>Dt.removeEventListener("abort",Ft),Dt.addEventListener("abort",Ft)}ar(this,Xu).set($t,Tt)}removeEventListener(dt,$t){const kt=ar(this,Xu).get($t);kt==null||kt(),ar(this,Xu).delete($t)}terminate(){for(const[,dt]of ar(this,Xu))dt==null||dt();ar(this,Xu).clear()}}Xu=new WeakMap,AR=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(et){if(et instanceof AbortException||et instanceof InvalidPDFException||et instanceof PasswordException||et instanceof ResponseException||et instanceof UnknownErrorException)return et;switch(et instanceof Error||typeof et=="object"&&et!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),et.name){case"AbortException":return new AbortException(et.message);case"InvalidPDFException":return new InvalidPDFException(et.message);case"PasswordException":return new PasswordException(et.message,et.code);case"ResponseException":return new ResponseException(et.message,et.status,et.missing);case"UnknownErrorException":return new UnknownErrorException(et.message,et.details)}return new UnknownErrorException(et.message,et.toString())}var W0,TR,OS,NR,BS,PR,VS,q0,Rw;class MessageHandler{constructor(dt,$t,kt){yr(this,TR);yr(this,NR);yr(this,PR);yr(this,q0);yr(this,W0,new AbortController);this.sourceName=dt,this.targetName=$t,this.comObj=kt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),kt.addEventListener("message",Br(this,TR,OS).bind(this),{signal:ar(this,W0).signal})}on(dt,$t){const kt=this.actionHandler;if(kt[dt])throw new Error(`There is already an actionName called "${dt}"`);kt[dt]=$t}send(dt,$t,kt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:dt,data:$t},kt)}sendWithPromise(dt,$t,kt){const Tt=this.callbackId++,Dt=Promise.withResolvers();this.callbackCapabilities[Tt]=Dt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:dt,callbackId:Tt,data:$t},kt)}catch(Ft){Dt.reject(Ft)}return Dt.promise}sendWithStream(dt,$t,kt,Tt){const Dt=this.streamId++,Ft=this.sourceName,Ut=this.targetName,Ht=this.comObj;return new ReadableStream({start:Kt=>{const Yt=Promise.withResolvers();return this.streamControllers[Dt]={controller:Kt,startCall:Yt,pullCall:null,cancelCall:null,isClosed:!1},Ht.postMessage({sourceName:Ft,targetName:Ut,action:dt,streamId:Dt,data:$t,desiredSize:Kt.desiredSize},Tt),Yt.promise},pull:Kt=>{const Yt=Promise.withResolvers();return this.streamControllers[Dt].pullCall=Yt,Ht.postMessage({sourceName:Ft,targetName:Ut,stream:StreamKind.PULL,streamId:Dt,desiredSize:Kt.desiredSize}),Yt.promise},cancel:Kt=>{assert(Kt instanceof Error,"cancel must have a valid reason");const Yt=Promise.withResolvers();return this.streamControllers[Dt].cancelCall=Yt,this.streamControllers[Dt].isClosed=!0,Ht.postMessage({sourceName:Ft,targetName:Ut,stream:StreamKind.CANCEL,streamId:Dt,reason:wrapReason(Kt)}),Yt.promise}},kt)}destroy(){var dt;(dt=ar(this,W0))==null||dt.abort(),vr(this,W0,null)}}W0=new WeakMap,TR=new WeakSet,OS=function({data:dt}){if(dt.targetName!==this.sourceName)return;if(dt.stream){Br(this,PR,VS).call(this,dt);return}if(dt.callback){const kt=dt.callbackId,Tt=this.callbackCapabilities[kt];if(!Tt)throw new Error(`Cannot resolve callback ${kt}`);if(delete this.callbackCapabilities[kt],dt.callback===CallbackKind.DATA)Tt.resolve(dt.data);else if(dt.callback===CallbackKind.ERROR)Tt.reject(wrapReason(dt.reason));else throw new Error("Unexpected callback case");return}const $t=this.actionHandler[dt.action];if(!$t)throw new Error(`Unknown action from worker: ${dt.action}`);if(dt.callbackId){const kt=this.sourceName,Tt=dt.sourceName,Dt=this.comObj;Promise.try($t,dt.data).then(function(Ft){Dt.postMessage({sourceName:kt,targetName:Tt,callback:CallbackKind.DATA,callbackId:dt.callbackId,data:Ft})},function(Ft){Dt.postMessage({sourceName:kt,targetName:Tt,callback:CallbackKind.ERROR,callbackId:dt.callbackId,reason:wrapReason(Ft)})});return}if(dt.streamId){Br(this,NR,BS).call(this,dt);return}$t(dt.data)},NR=new WeakSet,BS=function(dt){const $t=dt.streamId,kt=this.sourceName,Tt=dt.sourceName,Dt=this.comObj,Ft=this,Ut=this.actionHandler[dt.action],Ht={enqueue(Kt,Yt=1,Jt){if(this.isCancelled)return;const Zt=this.desiredSize;this.desiredSize-=Yt,Zt>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.ENQUEUE,streamId:$t,chunk:Kt},Jt)},close(){this.isCancelled||(this.isCancelled=!0,Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.CLOSE,streamId:$t}),delete Ft.streamSinks[$t])},error(Kt){assert(Kt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.ERROR,streamId:$t,reason:wrapReason(Kt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:dt.desiredSize,ready:null};Ht.sinkCapability.resolve(),Ht.ready=Ht.sinkCapability.promise,this.streamSinks[$t]=Ht,Promise.try(Ut,dt.data,Ht).then(function(){Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.START_COMPLETE,streamId:$t,success:!0})},function(Kt){Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.START_COMPLETE,streamId:$t,reason:wrapReason(Kt)})})},PR=new WeakSet,VS=function(dt){const $t=dt.streamId,kt=this.sourceName,Tt=dt.sourceName,Dt=this.comObj,Ft=this.streamControllers[$t],Ut=this.streamSinks[$t];switch(dt.stream){case StreamKind.START_COMPLETE:dt.success?Ft.startCall.resolve():Ft.startCall.reject(wrapReason(dt.reason));break;case StreamKind.PULL_COMPLETE:dt.success?Ft.pullCall.resolve():Ft.pullCall.reject(wrapReason(dt.reason));break;case StreamKind.PULL:if(!Ut){Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.PULL_COMPLETE,streamId:$t,success:!0});break}Ut.desiredSize<=0&&dt.desiredSize>0&&Ut.sinkCapability.resolve(),Ut.desiredSize=dt.desiredSize,Promise.try(Ut.onPull||onFn).then(function(){Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.PULL_COMPLETE,streamId:$t,success:!0})},function(Kt){Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.PULL_COMPLETE,streamId:$t,reason:wrapReason(Kt)})});break;case StreamKind.ENQUEUE:if(assert(Ft,"enqueue should have stream controller"),Ft.isClosed)break;Ft.controller.enqueue(dt.chunk);break;case StreamKind.CLOSE:if(assert(Ft,"close should have stream controller"),Ft.isClosed)break;Ft.isClosed=!0,Ft.controller.close(),Br(this,q0,Rw).call(this,Ft,$t);break;case StreamKind.ERROR:assert(Ft,"error should have stream controller"),Ft.controller.error(wrapReason(dt.reason)),Br(this,q0,Rw).call(this,Ft,$t);break;case StreamKind.CANCEL_COMPLETE:dt.success?Ft.cancelCall.resolve():Ft.cancelCall.reject(wrapReason(dt.reason)),Br(this,q0,Rw).call(this,Ft,$t);break;case StreamKind.CANCEL:if(!Ut)break;const Ht=wrapReason(dt.reason);Promise.try(Ut.onCancel||onFn,Ht).then(function(){Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.CANCEL_COMPLETE,streamId:$t,success:!0})},function(Kt){Dt.postMessage({sourceName:kt,targetName:Tt,stream:StreamKind.CANCEL_COMPLETE,streamId:$t,reason:wrapReason(Kt)})}),Ut.sinkCapability.reject(Ht),Ut.isCancelled=!0,delete this.streamSinks[$t];break;default:throw new Error("Unexpected stream case")}},q0=new WeakSet,Rw=async function(dt,$t){var kt,Tt,Dt;await Promise.allSettled([(kt=dt.startCall)==null?void 0:kt.promise,(Tt=dt.pullCall)==null?void 0:Tt.promise,(Dt=dt.cancelCall)==null?void 0:Dt.promise]),delete this.streamControllers[$t]};var T1;class BaseCanvasFactory{constructor({enableHWA:dt=!1}){yr(this,T1,!1);vr(this,T1,dt)}create(dt,$t){if(dt<=0||$t<=0)throw new Error("Invalid canvas size");const kt=this._createCanvas(dt,$t);return{canvas:kt,context:kt.getContext("2d",{willReadFrequently:!ar(this,T1)})}}reset(dt,$t,kt){if(!dt.canvas)throw new Error("Canvas is not specified");if($t<=0||kt<=0)throw new Error("Invalid canvas size");dt.canvas.width=$t,dt.canvas.height=kt}destroy(dt){if(!dt.canvas)throw new Error("Canvas is not specified");dt.canvas.width=0,dt.canvas.height=0,dt.canvas=null,dt.context=null}_createCanvas(dt,$t){unreachable("Abstract method `_createCanvas` called.")}}T1=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:dt=globalThis.document,enableHWA:$t=!1}){super({enableHWA:$t}),this._document=dt}_createCanvas(dt,$t){const kt=this._document.createElement("canvas");return kt.width=dt,kt.height=$t,kt}}class BaseCMapReaderFactory{constructor({baseUrl:dt=null,isCompressed:$t=!0}){this.baseUrl=dt,this.isCompressed=$t}async fetch({name:dt}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!dt)throw new Error("CMap name must be specified.");const $t=this.baseUrl+dt+(this.isCompressed?".bcmap":"");return this._fetch($t).then(kt=>({cMapData:kt,isCompressed:this.isCompressed})).catch(kt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${$t}`)})}async _fetch(dt){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(dt){const $t=await fetchData(dt,this.isCompressed?"arraybuffer":"text");return $t instanceof ArrayBuffer?new Uint8Array($t):stringToBytes($t)}}class BaseFilterFactory{addFilter(dt){return"none"}addHCMFilter(dt,$t){return"none"}addAlphaFilter(dt){return"none"}addLuminosityFilter(dt){return"none"}addHighlightHCMFilter(dt,$t,kt,Tt,Dt){return"none"}destroy(dt=!1){}}var sx,K0,Qu,Ju,Ao,nx,ix,oo,ko,ax,Sv,Up,u0,Y0,$w,Hp,h0,MR,zS,N1,c$,Gp,p0,ox,_v,lx,Cv,P1,d$,cx,Av;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:$t,ownerDocument:kt=globalThis.document}){super();yr(this,oo);yr(this,ax);yr(this,Up);yr(this,Y0);yr(this,Hp);yr(this,MR);yr(this,N1);yr(this,Gp);yr(this,ox);yr(this,lx);yr(this,P1);yr(this,cx);yr(this,sx,void 0);yr(this,K0,void 0);yr(this,Qu,void 0);yr(this,Ju,void 0);yr(this,Ao,void 0);yr(this,nx,void 0);yr(this,ix,0);vr(this,Ju,$t),vr(this,Ao,kt)}addFilter($t){if(!$t)return"none";let kt=ar(this,oo,ko).get($t);if(kt)return kt;const[Tt,Dt,Ft]=Br(this,Y0,$w).call(this,$t),Ut=$t.length===1?Tt:`${Tt}${Dt}${Ft}`;if(kt=ar(this,oo,ko).get(Ut),kt)return ar(this,oo,ko).set($t,kt),kt;const Ht=`g_${ar(this,Ju)}_transfer_map_${ga(this,ix)._++}`,Kt=Br(this,Hp,h0).call(this,Ht);ar(this,oo,ko).set($t,Kt),ar(this,oo,ko).set(Ut,Kt);const Yt=Br(this,Gp,p0).call(this,Ht);return Br(this,lx,Cv).call(this,Tt,Dt,Ft,Yt),Kt}addHCMFilter($t,kt){var rr;const Tt=`${$t}-${kt}`,Dt="base";let Ft=ar(this,ax,Sv).get(Dt);if((Ft==null?void 0:Ft.key)===Tt||(Ft?((rr=Ft.filter)==null||rr.remove(),Ft.key=Tt,Ft.url="none",Ft.filter=null):(Ft={key:Tt,url:"none",filter:null},ar(this,ax,Sv).set(Dt,Ft)),!$t||!kt))return Ft.url;const Ut=Br(this,cx,Av).call(this,$t);$t=Util.makeHexColor(...Ut);const Ht=Br(this,cx,Av).call(this,kt);if(kt=Util.makeHexColor(...Ht),ar(this,Up,u0).style.color="",$t==="#000000"&&kt==="#ffffff"||$t===kt)return Ft.url;const Kt=new Array(256);for(let sr=0;sr<=255;sr++){const nr=sr/255;Kt[sr]=nr<=.03928?nr/12.92:((nr+.055)/1.055)**2.4}const Yt=Kt.join(","),Jt=`g_${ar(this,Ju)}_hcm_filter`,Zt=Ft.filter=Br(this,Gp,p0).call(this,Jt);Br(this,lx,Cv).call(this,Yt,Yt,Yt,Zt),Br(this,N1,c$).call(this,Zt);const er=(sr,nr)=>{const ir=Ut[sr]/255,or=Ht[sr]/255,lr=new Array(nr+1);for(let cr=0;cr<=nr;cr++)lr[cr]=ir+cr/nr*(or-ir);return lr.join(",")};return Br(this,lx,Cv).call(this,er(0,5),er(1,5),er(2,5),Zt),Ft.url=Br(this,Hp,h0).call(this,Jt),Ft.url}addAlphaFilter($t){let kt=ar(this,oo,ko).get($t);if(kt)return kt;const[Tt]=Br(this,Y0,$w).call(this,[$t]),Dt=`alpha_${Tt}`;if(kt=ar(this,oo,ko).get(Dt),kt)return ar(this,oo,ko).set($t,kt),kt;const Ft=`g_${ar(this,Ju)}_alpha_map_${ga(this,ix)._++}`,Ut=Br(this,Hp,h0).call(this,Ft);ar(this,oo,ko).set($t,Ut),ar(this,oo,ko).set(Dt,Ut);const Ht=Br(this,Gp,p0).call(this,Ft);return Br(this,P1,d$).call(this,Tt,Ht),Ut}addLuminosityFilter($t){let kt=ar(this,oo,ko).get($t||"luminosity");if(kt)return kt;let Tt,Dt;if($t?([Tt]=Br(this,Y0,$w).call(this,[$t]),Dt=`luminosity_${Tt}`):Dt="luminosity",kt=ar(this,oo,ko).get(Dt),kt)return ar(this,oo,ko).set($t,kt),kt;const Ft=`g_${ar(this,Ju)}_luminosity_map_${ga(this,ix)._++}`,Ut=Br(this,Hp,h0).call(this,Ft);ar(this,oo,ko).set($t,Ut),ar(this,oo,ko).set(Dt,Ut);const Ht=Br(this,Gp,p0).call(this,Ft);return Br(this,MR,zS).call(this,Ht),$t&&Br(this,P1,d$).call(this,Tt,Ht),Ut}addHighlightHCMFilter($t,kt,Tt,Dt,Ft){var or;const Ut=`${kt}-${Tt}-${Dt}-${Ft}`;let Ht=ar(this,ax,Sv).get($t);if((Ht==null?void 0:Ht.key)===Ut||(Ht?((or=Ht.filter)==null||or.remove(),Ht.key=Ut,Ht.url="none",Ht.filter=null):(Ht={key:Ut,url:"none",filter:null},ar(this,ax,Sv).set($t,Ht)),!kt||!Tt))return Ht.url;const[Kt,Yt]=[kt,Tt].map(Br(this,cx,Av).bind(this));let Jt=Math.round(.2126*Kt[0]+.7152*Kt[1]+.0722*Kt[2]),Zt=Math.round(.2126*Yt[0]+.7152*Yt[1]+.0722*Yt[2]),[er,rr]=[Dt,Ft].map(Br(this,cx,Av).bind(this));Zt<Jt&&([Jt,Zt,er,rr]=[Zt,Jt,rr,er]),ar(this,Up,u0).style.color="";const sr=(lr,cr,dr)=>{const ur=new Array(256),pr=(Zt-Jt)/dr,mr=lr/255,jr=(cr-lr)/(255*dr);let Rr=0;for(let xr=0;xr<=dr;xr++){const kr=Math.round(Jt+xr*pr),Mr=mr+xr*jr;for(let Tr=Rr;Tr<=kr;Tr++)ur[Tr]=Mr;Rr=kr+1}for(let xr=Rr;xr<256;xr++)ur[xr]=ur[Rr-1];return ur.join(",")},nr=`g_${ar(this,Ju)}_hcm_${$t}_filter`,ir=Ht.filter=Br(this,Gp,p0).call(this,nr);return Br(this,N1,c$).call(this,ir),Br(this,lx,Cv).call(this,sr(er[0],rr[0],5),sr(er[1],rr[1],5),sr(er[2],rr[2],5),ir),Ht.url=Br(this,Hp,h0).call(this,nr),Ht.url}destroy($t=!1){var kt,Tt,Dt,Ft;$t&&((kt=ar(this,nx))!=null&&kt.size)||((Tt=ar(this,Qu))==null||Tt.parentNode.parentNode.remove(),vr(this,Qu,null),(Dt=ar(this,K0))==null||Dt.clear(),vr(this,K0,null),(Ft=ar(this,nx))==null||Ft.clear(),vr(this,nx,null),vr(this,ix,0))}}sx=new WeakMap,K0=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Ao=new WeakMap,nx=new WeakMap,ix=new WeakMap,oo=new WeakSet,ko=function(){return ar(this,K0)||vr(this,K0,new Map)},ax=new WeakSet,Sv=function(){return ar(this,nx)||vr(this,nx,new Map)},Up=new WeakSet,u0=function(){if(!ar(this,Qu)){const $t=ar(this,Ao).createElement("div"),{style:kt}=$t;kt.visibility="hidden",kt.contain="strict",kt.width=kt.height=0,kt.position="absolute",kt.top=kt.left=0,kt.zIndex=-1;const Tt=ar(this,Ao).createElementNS(SVG_NS,"svg");Tt.setAttribute("width",0),Tt.setAttribute("height",0),vr(this,Qu,ar(this,Ao).createElementNS(SVG_NS,"defs")),$t.append(Tt),Tt.append(ar(this,Qu)),ar(this,Ao).body.append($t)}return ar(this,Qu)},Y0=new WeakSet,$w=function($t){if($t.length===1){const Kt=$t[0],Yt=new Array(256);for(let Zt=0;Zt<256;Zt++)Yt[Zt]=Kt[Zt]/255;const Jt=Yt.join(",");return[Jt,Jt,Jt]}const[kt,Tt,Dt]=$t,Ft=new Array(256),Ut=new Array(256),Ht=new Array(256);for(let Kt=0;Kt<256;Kt++)Ft[Kt]=kt[Kt]/255,Ut[Kt]=Tt[Kt]/255,Ht[Kt]=Dt[Kt]/255;return[Ft.join(","),Ut.join(","),Ht.join(",")]},Hp=new WeakSet,h0=function($t){if(ar(this,sx)===void 0){vr(this,sx,"");const kt=ar(this,Ao).URL;kt!==ar(this,Ao).baseURI&&(isDataScheme(kt)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):vr(this,sx,updateUrlHash(kt,"")))}return`url(${ar(this,sx)}#${$t})`},MR=new WeakSet,zS=function($t){const kt=ar(this,Ao).createElementNS(SVG_NS,"feColorMatrix");kt.setAttribute("type","matrix"),kt.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),$t.append(kt)},N1=new WeakSet,c$=function($t){const kt=ar(this,Ao).createElementNS(SVG_NS,"feColorMatrix");kt.setAttribute("type","matrix"),kt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),$t.append(kt)},Gp=new WeakSet,p0=function($t){const kt=ar(this,Ao).createElementNS(SVG_NS,"filter");return kt.setAttribute("color-interpolation-filters","sRGB"),kt.setAttribute("id",$t),ar(this,Up,u0).append(kt),kt},ox=new WeakSet,_v=function($t,kt,Tt){const Dt=ar(this,Ao).createElementNS(SVG_NS,kt);Dt.setAttribute("type","discrete"),Dt.setAttribute("tableValues",Tt),$t.append(Dt)},lx=new WeakSet,Cv=function($t,kt,Tt,Dt){const Ft=ar(this,Ao).createElementNS(SVG_NS,"feComponentTransfer");Dt.append(Ft),Br(this,ox,_v).call(this,Ft,"feFuncR",$t),Br(this,ox,_v).call(this,Ft,"feFuncG",kt),Br(this,ox,_v).call(this,Ft,"feFuncB",Tt)},P1=new WeakSet,d$=function($t,kt){const Tt=ar(this,Ao).createElementNS(SVG_NS,"feComponentTransfer");kt.append(Tt),Br(this,ox,_v).call(this,Tt,"feFuncA",$t)},cx=new WeakSet,Av=function($t){return ar(this,Up,u0).style.color=$t,getRGB(getComputedStyle(ar(this,Up,u0)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:dt=null}){this.baseUrl=dt}async fetch({filename:dt}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!dt)throw new Error("Font filename must be specified.");const $t=`${this.baseUrl}${dt}`;return this._fetch($t).catch(kt=>{throw new Error(`Unable to load font data at: ${$t}`)})}async _fetch(dt){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(dt){const $t=await fetchData(dt,"arraybuffer");return new Uint8Array($t)}}class BaseWasmFactory{constructor({baseUrl:dt=null}){this.baseUrl=dt}async fetch({filename:dt}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!dt)throw new Error("Wasm filename must be specified.");const $t=`${this.baseUrl}${dt}`;return this._fetch($t).catch(kt=>{throw new Error(`Unable to load wasm data at: ${$t}`)})}async _fetch(dt){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(dt){const $t=await fetchData(dt,"arraybuffer");return new Uint8Array($t)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(et){const $t=await process.getBuiltinModule("fs").promises.readFile(et);return new Uint8Array($t)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(dt,$t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(dt,$t)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(dt){return node_utils_fetchData(dt)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(dt){return node_utils_fetchData(dt)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(dt){return node_utils_fetchData(dt)}}const FORCED_DEPENDENCY_LABEL="__forcedDependency",{floor,ceil}=Math;function expandBBox(et,dt,$t,kt,Tt,Dt){et[dt*4+0]=Math.min(et[dt*4+0],$t),et[dt*4+1]=Math.min(et[dt*4+1],kt),et[dt*4+2]=Math.max(et[dt*4+2],Tt),et[dt*4+3]=Math.max(et[dt*4+3],Dt)}const EMPTY_BBOX=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var X0,Wp;class BBoxReader{constructor(dt,$t){yr(this,X0,void 0);yr(this,Wp,void 0);vr(this,X0,dt),vr(this,Wp,$t)}get length(){return ar(this,X0).length}isEmpty(dt){return ar(this,X0)[dt]===EMPTY_BBOX}minX(dt){return ar(this,Wp)[dt*4+0]/256}minY(dt){return ar(this,Wp)[dt*4+1]/256}maxX(dt){return(ar(this,Wp)[dt*4+2]+1)/256}maxY(dt){return(ar(this,Wp)[dt*4+3]+1)/256}}X0=new WeakMap,Wp=new WeakMap;const ensureDebugMetadata=(et,dt)=>{if(!et)return;let $t=et.get(dt);return $t||($t={dependencies:new Set,isRenderingOperation:!1},et.set(dt,$t)),$t};var Vo,zo,dx,_d,ux,Zu,$n,An,_h,Uo,M1,Q0,hx,fx,ep,To,vu,I1,u$;class CanvasDependencyTracker{constructor(dt,$t,kt=!1){yr(this,I1);yr(this,Vo,{__proto__:null});yr(this,zo,{__proto__:null,transform:[],moveText:[],sameLineText:[],[FORCED_DEPENDENCY_LABEL]:[]});yr(this,dx,new Map);yr(this,_d,[]);yr(this,ux,[]);yr(this,Zu,[[1,0,0,1,0,0]]);yr(this,$n,[-1/0,-1/0,1/0,1/0]);yr(this,An,new Float64Array([1/0,1/0,-1/0,-1/0]));yr(this,_h,-1);yr(this,Uo,new Set);yr(this,M1,new Map);yr(this,Q0,new Map);yr(this,hx,void 0);yr(this,fx,void 0);yr(this,ep,void 0);yr(this,To,void 0);yr(this,vu,void 0);vr(this,hx,dt.width),vr(this,fx,dt.height),Br(this,I1,u$).call(this,$t),kt&&vr(this,vu,new Map)}growOperationsCount(dt){dt>=ar(this,To).length&&Br(this,I1,u$).call(this,dt,ar(this,To))}save(dt){return vr(this,Vo,{__proto__:ar(this,Vo)}),vr(this,zo,{__proto__:ar(this,zo),transform:{__proto__:ar(this,zo).transform},moveText:{__proto__:ar(this,zo).moveText},sameLineText:{__proto__:ar(this,zo).sameLineText},[FORCED_DEPENDENCY_LABEL]:{__proto__:ar(this,zo)[FORCED_DEPENDENCY_LABEL]}}),vr(this,$n,{__proto__:ar(this,$n)}),ar(this,_d).push(dt),this}restore(dt){var Tt;const $t=Object.getPrototypeOf(ar(this,Vo));if($t===null)return this;vr(this,Vo,$t),vr(this,zo,Object.getPrototypeOf(ar(this,zo))),vr(this,$n,Object.getPrototypeOf(ar(this,$n)));const kt=ar(this,_d).pop();return kt!==void 0&&((Tt=ensureDebugMetadata(ar(this,vu),dt))==null||Tt.dependencies.add(kt),ar(this,To)[dt]=ar(this,To)[kt]),this}recordOpenMarker(dt){return ar(this,_d).push(dt),this}getOpenMarker(){return ar(this,_d).length===0?null:ar(this,_d).at(-1)}recordCloseMarker(dt){var kt;const $t=ar(this,_d).pop();return $t!==void 0&&((kt=ensureDebugMetadata(ar(this,vu),dt))==null||kt.dependencies.add($t),ar(this,To)[dt]=ar(this,To)[$t]),this}beginMarkedContent(dt){return ar(this,ux).push(dt),this}endMarkedContent(dt){var kt;const $t=ar(this,ux).pop();return $t!==void 0&&((kt=ensureDebugMetadata(ar(this,vu),dt))==null||kt.dependencies.add($t),ar(this,To)[dt]=ar(this,To)[$t]),this}pushBaseTransform(dt){return ar(this,Zu).push(Util.multiplyByDOMMatrix(ar(this,Zu).at(-1),dt.getTransform())),this}popBaseTransform(){return ar(this,Zu).length>1&&ar(this,Zu).pop(),this}recordSimpleData(dt,$t){return ar(this,Vo)[dt]=$t,this}recordIncrementalData(dt,$t){return ar(this,zo)[dt].push($t),this}resetIncrementalData(dt,$t){return ar(this,zo)[dt].length=0,this}recordNamedData(dt,$t){return ar(this,dx).set(dt,$t),this}recordSimpleDataFromNamed(dt,$t,kt){ar(this,Vo)[dt]=ar(this,dx).get($t)??kt}recordFutureForcedDependency(dt,$t){return this.recordIncrementalData(FORCED_DEPENDENCY_LABEL,$t),this}inheritSimpleDataAsFutureForcedDependencies(dt){for(const $t of dt)$t in ar(this,Vo)&&this.recordFutureForcedDependency($t,ar(this,Vo)[$t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const dt of ar(this,Uo))this.recordFutureForcedDependency(FORCED_DEPENDENCY_LABEL,dt);return this}resetBBox(dt){return ar(this,_h)!==dt&&(vr(this,_h,dt),ar(this,An)[0]=1/0,ar(this,An)[1]=1/0,ar(this,An)[2]=-1/0,ar(this,An)[3]=-1/0),this}recordClipBox(dt,$t,kt,Tt,Dt,Ft){const Ut=Util.multiplyByDOMMatrix(ar(this,Zu).at(-1),$t.getTransform()),Ht=[1/0,1/0,-1/0,-1/0];Util.axialAlignedBoundingBox([kt,Dt,Tt,Ft],Ut,Ht);const Kt=Util.intersect(ar(this,$n),Ht);return Kt?(ar(this,$n)[0]=Kt[0],ar(this,$n)[1]=Kt[1],ar(this,$n)[2]=Kt[2],ar(this,$n)[3]=Kt[3]):(ar(this,$n)[0]=ar(this,$n)[1]=1/0,ar(this,$n)[2]=ar(this,$n)[3]=-1/0),this}recordBBox(dt,$t,kt,Tt,Dt,Ft){const Ut=ar(this,$n);if(Ut[0]===1/0)return this;const Ht=Util.multiplyByDOMMatrix(ar(this,Zu).at(-1),$t.getTransform());if(Ut[0]===-1/0)return Util.axialAlignedBoundingBox([kt,Dt,Tt,Ft],Ht,ar(this,An)),this;const Kt=[1/0,1/0,-1/0,-1/0];return Util.axialAlignedBoundingBox([kt,Dt,Tt,Ft],Ht,Kt),ar(this,An)[0]=Math.min(ar(this,An)[0],Math.max(Kt[0],Ut[0])),ar(this,An)[1]=Math.min(ar(this,An)[1],Math.max(Kt[1],Ut[1])),ar(this,An)[2]=Math.max(ar(this,An)[2],Math.min(Kt[2],Ut[2])),ar(this,An)[3]=Math.max(ar(this,An)[3],Math.min(Kt[3],Ut[3])),this}recordCharacterBBox(dt,$t,kt,Tt=1,Dt=0,Ft=0,Ut){const Ht=kt.bbox;let Kt,Yt;if(Ht&&(Kt=Ht[2]!==Ht[0]&&Ht[3]!==Ht[1]&&ar(this,Q0).get(kt),Kt!==!1&&(Yt=[0,0,0,0],Util.axialAlignedBoundingBox(Ht,kt.fontMatrix,Yt),(Tt!==1||Dt!==0||Ft!==0)&&Util.scaleMinMax([Tt,0,0,-Tt,Dt,Ft],Yt),Kt)))return this.recordBBox(dt,$t,Yt[0],Yt[2],Yt[1],Yt[3]);if(!Ut)return this.recordFullPageBBox(dt);const Jt=Ut();return Ht&&Yt&&Kt===void 0&&(Kt=Yt[0]<=Dt-Jt.actualBoundingBoxLeft&&Yt[2]>=Dt+Jt.actualBoundingBoxRight&&Yt[1]<=Ft-Jt.actualBoundingBoxAscent&&Yt[3]>=Ft+Jt.actualBoundingBoxDescent,ar(this,Q0).set(kt,Kt),Kt)?this.recordBBox(dt,$t,Yt[0],Yt[2],Yt[1],Yt[3]):this.recordBBox(dt,$t,Dt-Jt.actualBoundingBoxLeft,Dt+Jt.actualBoundingBoxRight,Ft-Jt.actualBoundingBoxAscent,Ft+Jt.actualBoundingBoxDescent)}recordFullPageBBox(dt){return ar(this,An)[0]=Math.max(0,ar(this,$n)[0]),ar(this,An)[1]=Math.max(0,ar(this,$n)[1]),ar(this,An)[2]=Math.min(ar(this,hx),ar(this,$n)[2]),ar(this,An)[3]=Math.min(ar(this,fx),ar(this,$n)[3]),this}getSimpleIndex(dt){return ar(this,Vo)[dt]}recordDependencies(dt,$t){const kt=ar(this,Uo),Tt=ar(this,Vo),Dt=ar(this,zo);for(const Ft of $t)Ft in ar(this,Vo)?kt.add(Tt[Ft]):Ft in Dt&&Dt[Ft].forEach(kt.add,kt);return this}recordNamedDependency(dt,$t){return ar(this,dx).has($t)&&ar(this,Uo).add(ar(this,dx).get($t)),this}recordOperation(dt,$t=!1){if(this.recordDependencies(dt,[FORCED_DEPENDENCY_LABEL]),ar(this,vu)){const kt=ensureDebugMetadata(ar(this,vu),dt),{dependencies:Tt}=kt;ar(this,Uo).forEach(Tt.add,Tt),ar(this,_d).forEach(Tt.add,Tt),ar(this,ux).forEach(Tt.add,Tt),Tt.delete(dt),kt.isRenderingOperation=!0}if(ar(this,_h)===dt){const kt=floor(ar(this,An)[0]*256/ar(this,hx)),Tt=floor(ar(this,An)[1]*256/ar(this,fx)),Dt=ceil(ar(this,An)[2]*256/ar(this,hx)),Ft=ceil(ar(this,An)[3]*256/ar(this,fx));expandBBox(ar(this,ep),dt,kt,Tt,Dt,Ft);for(const Ut of ar(this,Uo))Ut!==dt&&expandBBox(ar(this,ep),Ut,kt,Tt,Dt,Ft);for(const Ut of ar(this,_d))Ut!==dt&&expandBBox(ar(this,ep),Ut,kt,Tt,Dt,Ft);for(const Ut of ar(this,ux))Ut!==dt&&expandBBox(ar(this,ep),Ut,kt,Tt,Dt,Ft);$t||(ar(this,Uo).clear(),vr(this,_h,-1))}return this}recordShowTextOperation(dt,$t=!1){const kt=Array.from(ar(this,Uo));this.recordOperation(dt,$t),this.recordIncrementalData("sameLineText",dt);for(const Tt of kt)this.recordIncrementalData("sameLineText",Tt);return this}bboxToClipBoxDropOperation(dt,$t=!1){return ar(this,_h)===dt&&(vr(this,_h,-1),ar(this,$n)[0]=Math.max(ar(this,$n)[0],ar(this,An)[0]),ar(this,$n)[1]=Math.max(ar(this,$n)[1],ar(this,An)[1]),ar(this,$n)[2]=Math.min(ar(this,$n)[2],ar(this,An)[2]),ar(this,$n)[3]=Math.min(ar(this,$n)[3],ar(this,An)[3]),$t||ar(this,Uo).clear()),this}_takePendingDependencies(){const dt=ar(this,Uo);return vr(this,Uo,new Set),dt}_extractOperation(dt){const $t=ar(this,M1).get(dt);return ar(this,M1).delete(dt),$t}_pushPendingDependencies(dt){for(const $t of dt)ar(this,Uo).add($t)}take(){return ar(this,Q0).clear(),new BBoxReader(ar(this,To),ar(this,ep))}takeDebugMetadata(){return ar(this,vu)}}Vo=new WeakMap,zo=new WeakMap,dx=new WeakMap,_d=new WeakMap,ux=new WeakMap,Zu=new WeakMap,$n=new WeakMap,An=new WeakMap,_h=new WeakMap,Uo=new WeakMap,M1=new WeakMap,Q0=new WeakMap,hx=new WeakMap,fx=new WeakMap,ep=new WeakMap,To=new WeakMap,vu=new WeakMap,I1=new WeakSet,u$=function(dt,$t){const kt=new ArrayBuffer(dt*4);vr(this,ep,new Uint8ClampedArray(kt)),vr(this,To,new Uint32Array(kt)),$t&&$t.length>0?(ar(this,To).set($t),ar(this,To).fill(EMPTY_BBOX,$t.length)):ar(this,To).fill(EMPTY_BBOX)};var Dn,Yn,eu,J0,Z0;const J$=class J${constructor(dt,$t,kt){yr(this,Dn,void 0);yr(this,Yn,void 0);yr(this,eu,void 0);yr(this,J0,0);yr(this,Z0,0);if(dt instanceof J$&&ar(dt,eu)===!!kt)return dt;vr(this,Dn,dt),vr(this,Yn,$t),vr(this,eu,!!kt)}growOperationsCount(){throw new Error("Unreachable")}save(dt){return ga(this,Z0)._++,ar(this,Dn).save(ar(this,Yn)),this}restore(dt){return ar(this,Z0)>0&&(ar(this,Dn).restore(ar(this,Yn)),ga(this,Z0)._--),this}recordOpenMarker(dt){return ga(this,J0)._++,this}getOpenMarker(){return ar(this,J0)>0?ar(this,Yn):ar(this,Dn).getOpenMarker()}recordCloseMarker(dt){return ga(this,J0)._--,this}beginMarkedContent(dt){return this}endMarkedContent(dt){return this}pushBaseTransform(dt){return ar(this,Dn).pushBaseTransform(dt),this}popBaseTransform(){return ar(this,Dn).popBaseTransform(),this}recordSimpleData(dt,$t){return ar(this,Dn).recordSimpleData(dt,ar(this,Yn)),this}recordIncrementalData(dt,$t){return ar(this,Dn).recordIncrementalData(dt,ar(this,Yn)),this}resetIncrementalData(dt,$t){return ar(this,Dn).resetIncrementalData(dt,ar(this,Yn)),this}recordNamedData(dt,$t){return this}recordSimpleDataFromNamed(dt,$t,kt){return ar(this,Dn).recordSimpleDataFromNamed(dt,$t,ar(this,Yn)),this}recordFutureForcedDependency(dt,$t){return ar(this,Dn).recordFutureForcedDependency(dt,ar(this,Yn)),this}inheritSimpleDataAsFutureForcedDependencies(dt){return ar(this,Dn).inheritSimpleDataAsFutureForcedDependencies(dt),this}inheritPendingDependenciesAsFutureForcedDependencies(){return ar(this,Dn).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(dt){return ar(this,eu)||ar(this,Dn).resetBBox(ar(this,Yn)),this}recordClipBox(dt,$t,kt,Tt,Dt,Ft){return ar(this,eu)||ar(this,Dn).recordClipBox(ar(this,Yn),$t,kt,Tt,Dt,Ft),this}recordBBox(dt,$t,kt,Tt,Dt,Ft){return ar(this,eu)||ar(this,Dn).recordBBox(ar(this,Yn),$t,kt,Tt,Dt,Ft),this}recordCharacterBBox(dt,$t,kt,Tt,Dt,Ft,Ut){return ar(this,eu)||ar(this,Dn).recordCharacterBBox(ar(this,Yn),$t,kt,Tt,Dt,Ft,Ut),this}recordFullPageBBox(dt){return ar(this,eu)||ar(this,Dn).recordFullPageBBox(ar(this,Yn)),this}getSimpleIndex(dt){return ar(this,Dn).getSimpleIndex(dt)}recordDependencies(dt,$t){return ar(this,Dn).recordDependencies(ar(this,Yn),$t),this}recordNamedDependency(dt,$t){return ar(this,Dn).recordNamedDependency(ar(this,Yn),$t),this}recordOperation(dt){return ar(this,Dn).recordOperation(ar(this,Yn),!0),this}recordShowTextOperation(dt){return ar(this,Dn).recordShowTextOperation(ar(this,Yn),!0),this}bboxToClipBoxDropOperation(dt){return ar(this,eu)||ar(this,Dn).bboxToClipBoxDropOperation(ar(this,Yn),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Dn=new WeakMap,Yn=new WeakMap,eu=new WeakMap,J0=new WeakMap,Z0=new WeakMap;let CanvasNestedDependencyTracker=J$;const Dependencies={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(et,dt){if(!dt)return;const $t=dt[2]-dt[0],kt=dt[3]-dt[1],Tt=new Path2D;Tt.rect(dt[0],dt[1],$t,kt),et.clip(Tt)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(dt){super(),this._type=dt[1],this._bbox=dt[2],this._colorStops=dt[3],this._p0=dt[4],this._p1=dt[5],this._r0=dt[6],this._r1=dt[7],this.matrix=null}_createGradient(dt){let $t;this._type==="axial"?$t=dt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&($t=dt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const kt of this._colorStops)$t.addColorStop(kt[0],kt[1]);return $t}getPattern(dt,$t,kt,Tt){let Dt;if(Tt===PathType.STROKE||Tt===PathType.FILL){const Ft=$t.current.getClippedPathBoundingBox(Tt,getCurrentTransform(dt))||[0,0,0,0],Ut=Math.ceil(Ft[2]-Ft[0])||1,Ht=Math.ceil(Ft[3]-Ft[1])||1,Kt=$t.cachedCanvases.getCanvas("pattern",Ut,Ht),Yt=Kt.context;Yt.clearRect(0,0,Yt.canvas.width,Yt.canvas.height),Yt.beginPath(),Yt.rect(0,0,Yt.canvas.width,Yt.canvas.height),Yt.translate(-Ft[0],-Ft[1]),kt=Util.transform(kt,[1,0,0,1,Ft[0],Ft[1]]),Yt.transform(...$t.baseTransform),this.matrix&&Yt.transform(...this.matrix),applyBoundingBox(Yt,this._bbox),Yt.fillStyle=this._createGradient(Yt),Yt.fill(),Dt=dt.createPattern(Kt.canvas,"no-repeat");const Jt=new DOMMatrix(kt);Dt.setTransform(Jt)}else applyBoundingBox(dt,this._bbox),Dt=this._createGradient(dt);return Dt}}function drawTriangle(et,dt,$t,kt,Tt,Dt,Ft,Ut){const Ht=dt.coords,Kt=dt.colors,Yt=et.data,Jt=et.width*4;let Zt;Ht[$t+1]>Ht[kt+1]&&(Zt=$t,$t=kt,kt=Zt,Zt=Dt,Dt=Ft,Ft=Zt),Ht[kt+1]>Ht[Tt+1]&&(Zt=kt,kt=Tt,Tt=Zt,Zt=Ft,Ft=Ut,Ut=Zt),Ht[$t+1]>Ht[kt+1]&&(Zt=$t,$t=kt,kt=Zt,Zt=Dt,Dt=Ft,Ft=Zt);const er=(Ht[$t]+dt.offsetX)*dt.scaleX,rr=(Ht[$t+1]+dt.offsetY)*dt.scaleY,sr=(Ht[kt]+dt.offsetX)*dt.scaleX,nr=(Ht[kt+1]+dt.offsetY)*dt.scaleY,ir=(Ht[Tt]+dt.offsetX)*dt.scaleX,or=(Ht[Tt+1]+dt.offsetY)*dt.scaleY;if(rr>=or)return;const lr=Kt[Dt],cr=Kt[Dt+1],dr=Kt[Dt+2],ur=Kt[Ft],pr=Kt[Ft+1],mr=Kt[Ft+2],jr=Kt[Ut],Rr=Kt[Ut+1],xr=Kt[Ut+2],kr=Math.round(rr),Mr=Math.round(or);let Tr,Or,_r,Pr,br,wr,zr,Hr;for(let Yr=kr;Yr<=Mr;Yr++){if(Yr<nr){const ns=Yr<rr?0:(rr-Yr)/(rr-nr);Tr=er-(er-sr)*ns,Or=lr-(lr-ur)*ns,_r=cr-(cr-pr)*ns,Pr=dr-(dr-mr)*ns}else{let ns;Yr>or?ns=1:nr===or?ns=0:ns=(nr-Yr)/(nr-or),Tr=sr-(sr-ir)*ns,Or=ur-(ur-jr)*ns,_r=pr-(pr-Rr)*ns,Pr=mr-(mr-xr)*ns}let es;Yr<rr?es=0:Yr>or?es=1:es=(rr-Yr)/(rr-or),br=er-(er-ir)*es,wr=lr-(lr-jr)*es,zr=cr-(cr-Rr)*es,Hr=dr-(dr-xr)*es;const rs=Math.round(Math.min(Tr,br)),Wr=Math.round(Math.max(Tr,br));let Xr=Jt*Yr+rs*4;for(let ns=rs;ns<=Wr;ns++)es=(Tr-ns)/(Tr-br),es<0?es=0:es>1&&(es=1),Yt[Xr++]=Or-(Or-wr)*es|0,Yt[Xr++]=_r-(_r-zr)*es|0,Yt[Xr++]=Pr-(Pr-Hr)*es|0,Yt[Xr++]=255}}function drawFigure(et,dt,$t){const kt=dt.coords,Tt=dt.colors;let Dt,Ft;switch(dt.type){case"lattice":const Ut=dt.verticesPerRow,Ht=Math.floor(kt.length/Ut)-1,Kt=Ut-1;for(Dt=0;Dt<Ht;Dt++){let Yt=Dt*Ut;for(let Jt=0;Jt<Kt;Jt++,Yt++)drawTriangle(et,$t,kt[Yt],kt[Yt+1],kt[Yt+Ut],Tt[Yt],Tt[Yt+1],Tt[Yt+Ut]),drawTriangle(et,$t,kt[Yt+Ut+1],kt[Yt+1],kt[Yt+Ut],Tt[Yt+Ut+1],Tt[Yt+1],Tt[Yt+Ut])}break;case"triangles":for(Dt=0,Ft=kt.length;Dt<Ft;Dt+=3)drawTriangle(et,$t,kt[Dt],kt[Dt+1],kt[Dt+2],Tt[Dt],Tt[Dt+1],Tt[Dt+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(dt){super(),this._coords=dt[2],this._colors=dt[3],this._figures=dt[4],this._bounds=dt[5],this._bbox=dt[6],this._background=dt[7],this.matrix=null}_createMeshCanvas(dt,$t,kt){const Ut=Math.floor(this._bounds[0]),Ht=Math.floor(this._bounds[1]),Kt=Math.ceil(this._bounds[2])-Ut,Yt=Math.ceil(this._bounds[3])-Ht,Jt=Math.min(Math.ceil(Math.abs(Kt*dt[0]*1.1)),3e3),Zt=Math.min(Math.ceil(Math.abs(Yt*dt[1]*1.1)),3e3),er=Kt/Jt,rr=Yt/Zt,sr={coords:this._coords,colors:this._colors,offsetX:-Ut,offsetY:-Ht,scaleX:1/er,scaleY:1/rr},nr=Jt+2*2,ir=Zt+2*2,or=kt.getCanvas("mesh",nr,ir),lr=or.context,cr=lr.createImageData(Jt,Zt);if($t){const ur=cr.data;for(let pr=0,mr=ur.length;pr<mr;pr+=4)ur[pr]=$t[0],ur[pr+1]=$t[1],ur[pr+2]=$t[2],ur[pr+3]=255}for(const ur of this._figures)drawFigure(cr,ur,sr);return lr.putImageData(cr,2,2),{canvas:or.canvas,offsetX:Ut-2*er,offsetY:Ht-2*rr,scaleX:er,scaleY:rr}}isModifyingCurrentTransform(){return!0}getPattern(dt,$t,kt,Tt){applyBoundingBox(dt,this._bbox);const Dt=new Float32Array(2);if(Tt===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(dt),Dt);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,Dt);const[Ut,Ht]=Dt;Util.singularValueDecompose2dScale($t.baseTransform,Dt),Dt[0]*=Ut,Dt[1]*=Ht}else Util.singularValueDecompose2dScale($t.baseTransform,Dt);const Ft=this._createMeshCanvas(Dt,Tt===PathType.SHADING?null:this._background,$t.cachedCanvases);return Tt!==PathType.SHADING&&(dt.setTransform(...$t.baseTransform),this.matrix&&dt.transform(...this.matrix)),dt.translate(Ft.offsetX,Ft.offsetY),dt.scale(Ft.scaleX,Ft.scaleY),dt.createPattern(Ft.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(et){switch(et[0]){case"RadialAxial":return new RadialAxialShadingPattern(et);case"Mesh":return new MeshShadingPattern(et);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${et[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},IR=class IR{constructor(dt,$t,kt,Tt){this.color=dt[1],this.operatorList=dt[2],this.matrix=dt[3],this.bbox=dt[4],this.xstep=dt[5],this.ystep=dt[6],this.paintType=dt[7],this.tilingType=dt[8],this.ctx=$t,this.canvasGraphicsFactory=kt,this.baseTransform=Tt}createPatternCanvas(dt,$t){var wr,zr;const{bbox:kt,operatorList:Tt,paintType:Dt,tilingType:Ft,color:Ut,canvasGraphicsFactory:Ht}=this;let{xstep:Kt,ystep:Yt}=this;Kt=Math.abs(Kt),Yt=Math.abs(Yt),info("TilingType: "+Ft);const Jt=kt[0],Zt=kt[1],er=kt[2],rr=kt[3],sr=er-Jt,nr=rr-Zt,ir=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,ir);const[or,lr]=ir;Util.singularValueDecompose2dScale(this.baseTransform,ir);const cr=or*ir[0],dr=lr*ir[1];let ur=sr,pr=nr,mr=!1,jr=!1;const Rr=Math.ceil(Kt*cr),xr=Math.ceil(Yt*dr),kr=Math.ceil(sr*cr),Mr=Math.ceil(nr*dr);Rr>=kr?ur=Kt:mr=!0,xr>=Mr?pr=Yt:jr=!0;const Tr=this.getSizeAndScale(ur,this.ctx.canvas.width,cr),Or=this.getSizeAndScale(pr,this.ctx.canvas.height,dr),_r=dt.cachedCanvases.getCanvas("pattern",Tr.size,Or.size),Pr=_r.context,br=Ht.createCanvasGraphics(Pr,$t);if(br.groupLevel=dt.groupLevel,this.setFillAndStrokeStyleToContext(br,Dt,Ut),Pr.translate(-Tr.scale*Jt,-Or.scale*Zt),br.transform(0,Tr.scale,0,0,Or.scale,0,0),Pr.save(),(wr=br.dependencyTracker)==null||wr.save(),this.clipBbox(br,Jt,Zt,er,rr),br.baseTransform=getCurrentTransform(br.ctx),br.executeOperatorList(Tt),br.endDrawing(),(zr=br.dependencyTracker)==null||zr.restore(),Pr.restore(),mr||jr){const Hr=_r.canvas;mr&&(ur=Kt),jr&&(pr=Yt);const Yr=this.getSizeAndScale(ur,this.ctx.canvas.width,cr),es=this.getSizeAndScale(pr,this.ctx.canvas.height,dr),rs=Yr.size,Wr=es.size,Xr=dt.cachedCanvases.getCanvas("pattern-workaround",rs,Wr),ns=Xr.context,gs=mr?Math.floor(sr/Kt):0,us=jr?Math.floor(nr/Yt):0;for(let ps=0;ps<=gs;ps++)for(let cs=0;cs<=us;cs++)ns.drawImage(Hr,rs*ps,Wr*cs,rs,Wr,0,0,rs,Wr);return{canvas:Xr.canvas,scaleX:Yr.scale,scaleY:es.scale,offsetX:Jt,offsetY:Zt}}return{canvas:_r.canvas,scaleX:Tr.scale,scaleY:Or.scale,offsetX:Jt,offsetY:Zt}}getSizeAndScale(dt,$t,kt){const Tt=Math.max(IR.MAX_PATTERN_SIZE,$t);let Dt=Math.ceil(dt*kt);return Dt>=Tt?Dt=Tt:kt=Dt/dt,{scale:kt,size:Dt}}clipBbox(dt,$t,kt,Tt,Dt){const Ft=Tt-$t,Ut=Dt-kt;dt.ctx.rect($t,kt,Ft,Ut),Util.axialAlignedBoundingBox([$t,kt,Tt,Dt],getCurrentTransform(dt.ctx),dt.current.minMax),dt.clip(),dt.endPath()}setFillAndStrokeStyleToContext(dt,$t,kt){const Tt=dt.ctx,Dt=dt.current;switch($t){case PaintType.COLORED:const{fillStyle:Ft,strokeStyle:Ut}=this.ctx;Tt.fillStyle=Dt.fillColor=Ft,Tt.strokeStyle=Dt.strokeColor=Ut;break;case PaintType.UNCOLORED:Tt.fillStyle=Tt.strokeStyle=kt,Dt.fillColor=Dt.strokeColor=kt;break;default:throw new FormatError(`Unsupported paint type: ${$t}`)}}isModifyingCurrentTransform(){return!1}getPattern(dt,$t,kt,Tt,Dt){let Ft=kt;Tt!==PathType.SHADING&&(Ft=Util.transform(Ft,$t.baseTransform),this.matrix&&(Ft=Util.transform(Ft,this.matrix)));const Ut=this.createPatternCanvas($t,Dt);let Ht=new DOMMatrix(Ft);Ht=Ht.translate(Ut.offsetX,Ut.offsetY),Ht=Ht.scale(1/Ut.scaleX,1/Ut.scaleY);const Kt=dt.createPattern(Ut.canvas,"repeat");return Kt.setTransform(Ht),Kt}};Es(IR,"MAX_PATTERN_SIZE",3e3);let TilingPattern=IR;function convertBlackAndWhiteToRGBA({src:et,srcPos:dt=0,dest:$t,width:kt,height:Tt,nonBlackColor:Dt=4294967295,inverseDecode:Ft=!1}){const Ut=util_FeatureTest.isLittleEndian?4278190080:255,[Ht,Kt]=Ft?[Dt,Ut]:[Ut,Dt],Yt=kt>>3,Jt=kt&7,Zt=et.length;$t=new Uint32Array($t.buffer);let er=0;for(let rr=0;rr<Tt;rr++){for(const nr=dt+Yt;dt<nr;dt++){const ir=dt<Zt?et[dt]:255;$t[er++]=ir&128?Kt:Ht,$t[er++]=ir&64?Kt:Ht,$t[er++]=ir&32?Kt:Ht,$t[er++]=ir&16?Kt:Ht,$t[er++]=ir&8?Kt:Ht,$t[er++]=ir&4?Kt:Ht,$t[er++]=ir&2?Kt:Ht,$t[er++]=ir&1?Kt:Ht}if(Jt===0)continue;const sr=dt<Zt?et[dt++]:255;for(let nr=0;nr<Jt;nr++)$t[er++]=sr&1<<7-nr?Kt:Ht}return{srcPos:dt,destPos:er}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(et,dt){if(et._removeMirroring)throw new Error("Context is already forwarding operations.");et.__originalSave=et.save,et.__originalRestore=et.restore,et.__originalRotate=et.rotate,et.__originalScale=et.scale,et.__originalTranslate=et.translate,et.__originalTransform=et.transform,et.__originalSetTransform=et.setTransform,et.__originalResetTransform=et.resetTransform,et.__originalClip=et.clip,et.__originalMoveTo=et.moveTo,et.__originalLineTo=et.lineTo,et.__originalBezierCurveTo=et.bezierCurveTo,et.__originalRect=et.rect,et.__originalClosePath=et.closePath,et.__originalBeginPath=et.beginPath,et._removeMirroring=()=>{et.save=et.__originalSave,et.restore=et.__originalRestore,et.rotate=et.__originalRotate,et.scale=et.__originalScale,et.translate=et.__originalTranslate,et.transform=et.__originalTransform,et.setTransform=et.__originalSetTransform,et.resetTransform=et.__originalResetTransform,et.clip=et.__originalClip,et.moveTo=et.__originalMoveTo,et.lineTo=et.__originalLineTo,et.bezierCurveTo=et.__originalBezierCurveTo,et.rect=et.__originalRect,et.closePath=et.__originalClosePath,et.beginPath=et.__originalBeginPath,delete et._removeMirroring},et.save=function(){dt.save(),this.__originalSave()},et.restore=function(){dt.restore(),this.__originalRestore()},et.translate=function($t,kt){dt.translate($t,kt),this.__originalTranslate($t,kt)},et.scale=function($t,kt){dt.scale($t,kt),this.__originalScale($t,kt)},et.transform=function($t,kt,Tt,Dt,Ft,Ut){dt.transform($t,kt,Tt,Dt,Ft,Ut),this.__originalTransform($t,kt,Tt,Dt,Ft,Ut)},et.setTransform=function($t,kt,Tt,Dt,Ft,Ut){dt.setTransform($t,kt,Tt,Dt,Ft,Ut),this.__originalSetTransform($t,kt,Tt,Dt,Ft,Ut)},et.resetTransform=function(){dt.resetTransform(),this.__originalResetTransform()},et.rotate=function($t){dt.rotate($t),this.__originalRotate($t)},et.clip=function($t){dt.clip($t),this.__originalClip($t)},et.moveTo=function($t,kt){dt.moveTo($t,kt),this.__originalMoveTo($t,kt)},et.lineTo=function($t,kt){dt.lineTo($t,kt),this.__originalLineTo($t,kt)},et.bezierCurveTo=function($t,kt,Tt,Dt,Ft,Ut){dt.bezierCurveTo($t,kt,Tt,Dt,Ft,Ut),this.__originalBezierCurveTo($t,kt,Tt,Dt,Ft,Ut)},et.rect=function($t,kt,Tt,Dt){dt.rect($t,kt,Tt,Dt),this.__originalRect($t,kt,Tt,Dt)},et.closePath=function(){dt.closePath(),this.__originalClosePath()},et.beginPath=function(){dt.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(dt){this.canvasFactory=dt,this.cache=Object.create(null)}getCanvas(dt,$t,kt){let Tt;return this.cache[dt]!==void 0?(Tt=this.cache[dt],this.canvasFactory.reset(Tt,$t,kt)):(Tt=this.canvasFactory.create($t,kt),this.cache[dt]=Tt),Tt}delete(dt){delete this.cache[dt]}clear(){for(const dt in this.cache){const $t=this.cache[dt];this.canvasFactory.destroy($t),delete this.cache[dt]}}}function drawImageAtIntegerCoords(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt){const[Yt,Jt,Zt,er,rr,sr]=getCurrentTransform(et);if(Jt===0&&Zt===0){const or=Ft*Yt+rr,lr=Math.round(or),cr=Ut*er+sr,dr=Math.round(cr),ur=(Ft+Ht)*Yt+rr,pr=Math.abs(Math.round(ur)-lr)||1,mr=(Ut+Kt)*er+sr,jr=Math.abs(Math.round(mr)-dr)||1;return et.setTransform(Math.sign(Yt),0,0,Math.sign(er),lr,dr),et.drawImage(dt,$t,kt,Tt,Dt,0,0,pr,jr),et.setTransform(Yt,Jt,Zt,er,rr,sr),[pr,jr]}if(Yt===0&&er===0){const or=Ut*Zt+rr,lr=Math.round(or),cr=Ft*Jt+sr,dr=Math.round(cr),ur=(Ut+Kt)*Zt+rr,pr=Math.abs(Math.round(ur)-lr)||1,mr=(Ft+Ht)*Jt+sr,jr=Math.abs(Math.round(mr)-dr)||1;return et.setTransform(0,Math.sign(Jt),Math.sign(Zt),0,lr,dr),et.drawImage(dt,$t,kt,Tt,Dt,0,0,jr,pr),et.setTransform(Yt,Jt,Zt,er,rr,sr),[jr,pr]}et.drawImage(dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt);const nr=Math.hypot(Yt,Jt),ir=Math.hypot(Zt,er);return[nr*Ht,ir*Kt]}class CanvasExtraState{constructor(dt,$t,kt){Es(this,"alphaIsShape",!1);Es(this,"fontSize",0);Es(this,"fontSizeScale",1);Es(this,"textMatrix",null);Es(this,"textMatrixScale",1);Es(this,"fontMatrix",FONT_IDENTITY_MATRIX);Es(this,"leading",0);Es(this,"x",0);Es(this,"y",0);Es(this,"lineX",0);Es(this,"lineY",0);Es(this,"charSpacing",0);Es(this,"wordSpacing",0);Es(this,"textHScale",1);Es(this,"textRenderingMode",TextRenderingMode.FILL);Es(this,"textRise",0);Es(this,"fillColor","#000000");Es(this,"strokeColor","#000000");Es(this,"patternFill",!1);Es(this,"patternStroke",!1);Es(this,"fillAlpha",1);Es(this,"strokeAlpha",1);Es(this,"lineWidth",1);Es(this,"activeSMask",null);Es(this,"transferMaps","none");kt==null||kt(this),this.clipBox=new Float32Array([0,0,dt,$t]),this.minMax=MIN_MAX_INIT.slice()}clone(){const dt=Object.create(this);return dt.clipBox=this.clipBox.slice(),dt.minMax=this.minMax.slice(),dt}getPathBoundingBox(dt=PathType.FILL,$t=null){const kt=this.minMax.slice();if(dt===PathType.STROKE){$t||unreachable("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale($t,XY);const Tt=XY[0]*this.lineWidth/2,Dt=XY[1]*this.lineWidth/2;kt[0]-=Tt,kt[1]-=Dt,kt[2]+=Tt,kt[3]+=Dt}return kt}updateClipFromPath(){const dt=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(dt||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(dt){this.clipBox.set(dt,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(dt=PathType.FILL,$t=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(dt,$t))}}function putBinaryImageData(et,dt){if(dt instanceof ImageData){et.putImageData(dt,0,0);return}const $t=dt.height,kt=dt.width,Tt=$t%FULL_CHUNK_HEIGHT,Dt=($t-Tt)/FULL_CHUNK_HEIGHT,Ft=Tt===0?Dt:Dt+1,Ut=et.createImageData(kt,FULL_CHUNK_HEIGHT);let Ht=0,Kt;const Yt=dt.data,Jt=Ut.data;let Zt,er,rr,sr;if(dt.kind===util_ImageKind.GRAYSCALE_1BPP){const nr=Yt.byteLength,ir=new Uint32Array(Jt.buffer,0,Jt.byteLength>>2),or=ir.length,lr=kt+7>>3,cr=4294967295,dr=util_FeatureTest.isLittleEndian?4278190080:255;for(Zt=0;Zt<Ft;Zt++){for(rr=Zt<Dt?FULL_CHUNK_HEIGHT:Tt,Kt=0,er=0;er<rr;er++){const ur=nr-Ht;let pr=0;const mr=ur>lr?kt:ur*8-7,jr=mr&-8;let Rr=0,xr=0;for(;pr<jr;pr+=8)xr=Yt[Ht++],ir[Kt++]=xr&128?cr:dr,ir[Kt++]=xr&64?cr:dr,ir[Kt++]=xr&32?cr:dr,ir[Kt++]=xr&16?cr:dr,ir[Kt++]=xr&8?cr:dr,ir[Kt++]=xr&4?cr:dr,ir[Kt++]=xr&2?cr:dr,ir[Kt++]=xr&1?cr:dr;for(;pr<mr;pr++)Rr===0&&(xr=Yt[Ht++],Rr=128),ir[Kt++]=xr&Rr?cr:dr,Rr>>=1}for(;Kt<or;)ir[Kt++]=0;et.putImageData(Ut,0,Zt*FULL_CHUNK_HEIGHT)}}else if(dt.kind===util_ImageKind.RGBA_32BPP){for(er=0,sr=kt*FULL_CHUNK_HEIGHT*4,Zt=0;Zt<Dt;Zt++)Jt.set(Yt.subarray(Ht,Ht+sr)),Ht+=sr,et.putImageData(Ut,0,er),er+=FULL_CHUNK_HEIGHT;Zt<Ft&&(sr=kt*Tt*4,Jt.set(Yt.subarray(Ht,Ht+sr)),et.putImageData(Ut,0,er))}else if(dt.kind===util_ImageKind.RGB_24BPP)for(rr=FULL_CHUNK_HEIGHT,sr=kt*rr,Zt=0;Zt<Ft;Zt++){for(Zt>=Dt&&(rr=Tt,sr=kt*rr),Kt=0,er=sr;er--;)Jt[Kt++]=Yt[Ht++],Jt[Kt++]=Yt[Ht++],Jt[Kt++]=Yt[Ht++],Jt[Kt++]=255;et.putImageData(Ut,0,Zt*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${dt.kind}`)}function putBinaryImageMask(et,dt){if(dt.bitmap){et.drawImage(dt.bitmap,0,0);return}const $t=dt.height,kt=dt.width,Tt=$t%FULL_CHUNK_HEIGHT,Dt=($t-Tt)/FULL_CHUNK_HEIGHT,Ft=Tt===0?Dt:Dt+1,Ut=et.createImageData(kt,FULL_CHUNK_HEIGHT);let Ht=0;const Kt=dt.data,Yt=Ut.data;for(let Jt=0;Jt<Ft;Jt++){const Zt=Jt<Dt?FULL_CHUNK_HEIGHT:Tt;({srcPos:Ht}=convertBlackAndWhiteToRGBA({src:Kt,srcPos:Ht,dest:Yt,width:kt,height:Zt,nonBlackColor:0})),et.putImageData(Ut,0,Jt*FULL_CHUNK_HEIGHT)}}function copyCtxState(et,dt){const $t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const kt of $t)et[kt]!==void 0&&(dt[kt]=et[kt]);et.setLineDash!==void 0&&(dt.setLineDash(et.getLineDash()),dt.lineDashOffset=et.lineDashOffset)}function resetCtxToDefault(et){et.strokeStyle=et.fillStyle="#000000",et.fillRule="nonzero",et.globalAlpha=1,et.lineWidth=1,et.lineCap="butt",et.lineJoin="miter",et.miterLimit=10,et.globalCompositeOperation="source-over",et.font="10px sans-serif",et.setLineDash!==void 0&&(et.setLineDash([]),et.lineDashOffset=0);const{filter:dt}=et;dt!=="none"&&dt!==""&&(et.filter="none")}function getImageSmoothingEnabled(et,dt){if(dt)return!0;Util.singularValueDecompose2dScale(et,XY);const $t=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=$t&&XY[1]<=$t}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var D1,h$,F1,p$,L1,f$;const Z$=class Z${constructor(dt,$t,kt,Tt,Dt,{optionalContentConfig:Ft,markedContentStack:Ut=null},Ht,Kt,Yt){yr(this,D1);yr(this,F1);yr(this,L1);this.ctx=dt,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=$t,this.objs=kt,this.canvasFactory=Tt,this.filterFactory=Dt,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Ut||[],this.optionalContentConfig=Ft,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Ht,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Kt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=Yt??null}getObject(dt,$t,kt=null){var Tt;return typeof $t=="string"?((Tt=this.dependencyTracker)==null||Tt.recordNamedDependency(dt,$t),$t.startsWith("g_")?this.commonObjs.get($t):this.objs.get($t)):kt}beginDrawing({transform:dt,viewport:$t,transparency:kt=!1,background:Tt=null}){const Dt=this.ctx.canvas.width,Ft=this.ctx.canvas.height,Ut=this.ctx.fillStyle;if(this.ctx.fillStyle=Tt||"#ffffff",this.ctx.fillRect(0,0,Dt,Ft),this.ctx.fillStyle=Ut,kt){const Ht=this.cachedCanvases.getCanvas("transparent",Dt,Ft);this.compositeCtx=this.ctx,this.transparentCanvas=Ht.canvas,this.ctx=Ht.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),dt&&(this.ctx.transform(...dt),this.outputScaleX=dt[0],this.outputScaleY=dt[0]),this.ctx.transform(...$t.transform),this.viewportScale=$t.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(dt,$t,kt,Tt,Dt){var ir;const Ft=dt.argsArray,Ut=dt.fnArray;let Ht=$t||0;const Kt=Ft.length;if(Kt===Ht)return Ht;const Yt=Kt-Ht>EXECUTION_STEPS&&typeof kt=="function",Jt=Yt?Date.now()+EXECUTION_TIME:0;let Zt=0;const er=this.commonObjs,rr=this.objs;let sr,nr;for(;;){if(Tt!==void 0&&Ht===Tt.nextBreakPoint)return Tt.breakIt(Ht,kt),Ht;if(!Dt||Dt(Ht))if(sr=Ut[Ht],nr=Ft[Ht]??null,sr!==OPS.dependency)nr===null?this[sr](Ht):this[sr](Ht,...nr);else for(const or of nr){(ir=this.dependencyTracker)==null||ir.recordNamedData(or,Ht);const lr=or.startsWith("g_")?er:rr;if(!lr.has(or))return lr.get(or,kt),Ht}if(Ht++,Ht===Kt)return Ht;if(Yt&&++Zt>EXECUTION_STEPS){if(Date.now()>Jt)return kt(),Ht;Zt=0}}}endDrawing(){Br(this,D1,h$).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const dt of this._cachedBitmapsMap.values()){for(const $t of dt.values())typeof HTMLCanvasElement<"u"&&$t instanceof HTMLCanvasElement&&($t.width=$t.height=0);dt.clear()}this._cachedBitmapsMap.clear(),Br(this,F1,p$).call(this)}_scaleImage(dt,$t){const kt=dt.width??dt.displayWidth,Tt=dt.height??dt.displayHeight;let Dt=Math.max(Math.hypot($t[0],$t[1]),1),Ft=Math.max(Math.hypot($t[2],$t[3]),1),Ut=kt,Ht=Tt,Kt="prescale1",Yt,Jt;for(;Dt>2&&Ut>1||Ft>2&&Ht>1;){let Zt=Ut,er=Ht;Dt>2&&Ut>1&&(Zt=Ut>=16384?Math.floor(Ut/2)-1||1:Math.ceil(Ut/2),Dt/=Ut/Zt),Ft>2&&Ht>1&&(er=Ht>=16384?Math.floor(Ht/2)-1||1:Math.ceil(Ht)/2,Ft/=Ht/er),Yt=this.cachedCanvases.getCanvas(Kt,Zt,er),Jt=Yt.context,Jt.clearRect(0,0,Zt,er),Jt.drawImage(dt,0,0,Ut,Ht,0,0,Zt,er),dt=Yt.canvas,Ut=Zt,Ht=er,Kt=Kt==="prescale1"?"prescale2":"prescale1"}return{img:dt,paintWidth:Ut,paintHeight:Ht}}_createMaskCanvas(dt,$t){var Rr,xr;const kt=this.ctx,{width:Tt,height:Dt}=$t,Ft=this.current.fillColor,Ut=this.current.patternFill,Ht=getCurrentTransform(kt);let Kt,Yt,Jt,Zt;if(($t.bitmap||$t.data)&&$t.count>1){const kr=$t.bitmap||$t.data.buffer;Yt=JSON.stringify(Ut?Ht:[Ht.slice(0,4),Ft]),Kt=this._cachedBitmapsMap.get(kr),Kt||(Kt=new Map,this._cachedBitmapsMap.set(kr,Kt));const Mr=Kt.get(Yt);if(Mr&&!Ut){const Tr=Math.round(Math.min(Ht[0],Ht[2])+Ht[4]),Or=Math.round(Math.min(Ht[1],Ht[3])+Ht[5]);return(Rr=this.dependencyTracker)==null||Rr.recordDependencies(dt,Dependencies.transformAndFill),{canvas:Mr,offsetX:Tr,offsetY:Or}}Jt=Mr}Jt||(Zt=this.cachedCanvases.getCanvas("maskCanvas",Tt,Dt),putBinaryImageMask(Zt.context,$t));let er=Util.transform(Ht,[1/Tt,0,0,-1/Dt,0,0]);er=Util.transform(er,[1,0,0,1,0,-Dt]);const rr=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,Tt,Dt],er,rr);const[sr,nr,ir,or]=rr,lr=Math.round(ir-sr)||1,cr=Math.round(or-nr)||1,dr=this.cachedCanvases.getCanvas("fillCanvas",lr,cr),ur=dr.context,pr=sr,mr=nr;ur.translate(-pr,-mr),ur.transform(...er),Jt||(Jt=this._scaleImage(Zt.canvas,getCurrentTransformInverse(ur)),Jt=Jt.img,Kt&&Ut&&Kt.set(Yt,Jt)),ur.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(ur),$t.interpolate),drawImageAtIntegerCoords(ur,Jt,0,0,Jt.width,Jt.height,0,0,Tt,Dt),ur.globalCompositeOperation="source-in";const jr=Util.transform(getCurrentTransformInverse(ur),[1,0,0,1,-pr,-mr]);return ur.fillStyle=Ut?Ft.getPattern(kt,this,jr,PathType.FILL,dt):Ft,ur.fillRect(0,0,Tt,Dt),Kt&&!Ut&&(this.cachedCanvases.delete("fillCanvas"),Kt.set(Yt,dr.canvas)),(xr=this.dependencyTracker)==null||xr.recordDependencies(dt,Dependencies.transformAndFill),{canvas:dr.canvas,offsetX:Math.round(pr),offsetY:Math.round(mr)}}setLineWidth(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("lineWidth",dt),$t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=$t,this.ctx.lineWidth=$t}setLineCap(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("lineCap",dt),this.ctx.lineCap=LINE_CAP_STYLES[$t]}setLineJoin(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("lineJoin",dt),this.ctx.lineJoin=LINE_JOIN_STYLES[$t]}setMiterLimit(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("miterLimit",dt),this.ctx.miterLimit=$t}setDash(dt,$t,kt){var Dt;(Dt=this.dependencyTracker)==null||Dt.recordSimpleData("dash",dt);const Tt=this.ctx;Tt.setLineDash!==void 0&&(Tt.setLineDash($t),Tt.lineDashOffset=kt)}setRenderingIntent(dt,$t){}setFlatness(dt,$t){}setGState(dt,$t){var kt,Tt,Dt,Ft,Ut;for(const[Ht,Kt]of $t)switch(Ht){case"LW":this.setLineWidth(dt,Kt);break;case"LC":this.setLineCap(dt,Kt);break;case"LJ":this.setLineJoin(dt,Kt);break;case"ML":this.setMiterLimit(dt,Kt);break;case"D":this.setDash(dt,Kt[0],Kt[1]);break;case"RI":this.setRenderingIntent(dt,Kt);break;case"FL":this.setFlatness(dt,Kt);break;case"Font":this.setFont(dt,Kt[0],Kt[1]);break;case"CA":(kt=this.dependencyTracker)==null||kt.recordSimpleData("strokeAlpha",dt),this.current.strokeAlpha=Kt;break;case"ca":(Tt=this.dependencyTracker)==null||Tt.recordSimpleData("fillAlpha",dt),this.ctx.globalAlpha=this.current.fillAlpha=Kt;break;case"BM":(Dt=this.dependencyTracker)==null||Dt.recordSimpleData("globalCompositeOperation",dt),this.ctx.globalCompositeOperation=Kt;break;case"SMask":(Ft=this.dependencyTracker)==null||Ft.recordSimpleData("SMask",dt),this.current.activeSMask=Kt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(Ut=this.dependencyTracker)==null||Ut.recordSimpleData("filter",dt),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Kt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const dt=this.inSMaskMode;this.current.activeSMask&&!dt?this.beginSMaskMode():!this.current.activeSMask&&dt&&this.endSMaskMode()}beginSMaskMode(dt){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const $t=this.ctx.canvas.width,kt=this.ctx.canvas.height,Tt="smaskGroupAt"+this.groupLevel,Dt=this.cachedCanvases.getCanvas(Tt,$t,kt);this.suspendedCtx=this.ctx;const Ft=this.ctx=Dt.context;Ft.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,Ft),mirrorContextOperations(Ft,this.suspendedCtx),this.setGState(dt,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(dt){if(!this.current.activeSMask)return;dt?(dt[0]=Math.floor(dt[0]),dt[1]=Math.floor(dt[1]),dt[2]=Math.ceil(dt[2]),dt[3]=Math.ceil(dt[3])):dt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const $t=this.current.activeSMask,kt=this.suspendedCtx;this.composeSMask(kt,$t,this.ctx,dt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(dt,$t,kt,Tt){const Dt=Tt[0],Ft=Tt[1],Ut=Tt[2]-Dt,Ht=Tt[3]-Ft;Ut===0||Ht===0||(this.genericComposeSMask($t.context,kt,Ut,Ht,$t.subtype,$t.backdrop,$t.transferMap,Dt,Ft,$t.offsetX,$t.offsetY),dt.save(),dt.globalAlpha=1,dt.globalCompositeOperation="source-over",dt.setTransform(1,0,0,1,0,0),dt.drawImage(kt.canvas,0,0),dt.restore())}genericComposeSMask(dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt){let Zt=dt.canvas,er=Ht-Yt,rr=Kt-Jt;if(Ft)if(er<0||rr<0||er+kt>Zt.width||rr+Tt>Zt.height){const nr=this.cachedCanvases.getCanvas("maskExtension",kt,Tt),ir=nr.context;ir.drawImage(Zt,-er,-rr),ir.globalCompositeOperation="destination-atop",ir.fillStyle=Ft,ir.fillRect(0,0,kt,Tt),ir.globalCompositeOperation="source-over",Zt=nr.canvas,er=rr=0}else{dt.save(),dt.globalAlpha=1,dt.setTransform(1,0,0,1,0,0);const nr=new Path2D;nr.rect(er,rr,kt,Tt),dt.clip(nr),dt.globalCompositeOperation="destination-atop",dt.fillStyle=Ft,dt.fillRect(er,rr,kt,Tt),dt.restore()}$t.save(),$t.globalAlpha=1,$t.setTransform(1,0,0,1,0,0),Dt==="Alpha"&&Ut?$t.filter=this.filterFactory.addAlphaFilter(Ut):Dt==="Luminosity"&&($t.filter=this.filterFactory.addLuminosityFilter(Ut));const sr=new Path2D;sr.rect(Ht,Kt,kt,Tt),$t.clip(sr),$t.globalCompositeOperation="destination-in",$t.drawImage(Zt,er,rr,kt,Tt,Ht,Kt,kt,Tt),$t.restore()}save(dt){var kt;this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const $t=this.current;this.stateStack.push($t),this.current=$t.clone(),(kt=this.dependencyTracker)==null||kt.save(dt)}restore(dt){var $t;if(($t=this.dependencyTracker)==null||$t.restore(dt),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(dt,$t,kt,Tt,Dt,Ft,Ut){var Ht;(Ht=this.dependencyTracker)==null||Ht.recordIncrementalData("transform",dt),this.ctx.transform($t,kt,Tt,Dt,Ft,Ut),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(dt,$t,kt,Tt){let[Dt]=kt;if(!Tt){Dt||(Dt=kt[0]=new Path2D),this[$t](dt,Dt);return}if(this.dependencyTracker!==null){const Ft=$t===OPS.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(dt).recordBBox(dt,this.ctx,Tt[0]-Ft,Tt[2]+Ft,Tt[1]-Ft,Tt[3]+Ft).recordDependencies(dt,["transform"])}if(!(Dt instanceof Path2D)){const Ft=kt[0]=new Path2D;for(let Ut=0,Ht=Dt.length;Ut<Ht;)switch(Dt[Ut++]){case DrawOPS.moveTo:Ft.moveTo(Dt[Ut++],Dt[Ut++]);break;case DrawOPS.lineTo:Ft.lineTo(Dt[Ut++],Dt[Ut++]);break;case DrawOPS.curveTo:Ft.bezierCurveTo(Dt[Ut++],Dt[Ut++],Dt[Ut++],Dt[Ut++],Dt[Ut++],Dt[Ut++]);break;case DrawOPS.closePath:Ft.closePath();break;default:warn(`Unrecognized drawing path operator: ${Dt[Ut-1]}`);break}Dt=Ft}Util.axialAlignedBoundingBox(Tt,getCurrentTransform(this.ctx),this.current.minMax),this[$t](dt,Dt),this._pathStartIdx=dt}closePath(dt){this.ctx.closePath()}stroke(dt,$t,kt=!0){var Ft;const Tt=this.ctx,Dt=this.current.strokeColor;if(Tt.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof Dt=="object"&&(Dt!=null&&Dt.getPattern)){const Ut=Dt.isModifyingCurrentTransform()?Tt.getTransform():null;if(Tt.save(),Tt.strokeStyle=Dt.getPattern(Tt,this,getCurrentTransformInverse(Tt),PathType.STROKE,dt),Ut){const Ht=new Path2D;Ht.addPath($t,Tt.getTransform().invertSelf().multiplySelf(Ut)),$t=Ht}this.rescaleAndStroke($t,!1),Tt.restore()}else this.rescaleAndStroke($t,!0);(Ft=this.dependencyTracker)==null||Ft.recordDependencies(dt,Dependencies.stroke),kt&&this.consumePath(dt,$t,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),Tt.globalAlpha=this.current.fillAlpha}closeStroke(dt,$t){this.stroke(dt,$t)}fill(dt,$t,kt=!0){var Kt,Yt,Jt;const Tt=this.ctx,Dt=this.current.fillColor,Ft=this.current.patternFill;let Ut=!1;if(Ft){const Zt=Dt.isModifyingCurrentTransform()?Tt.getTransform():null;if((Kt=this.dependencyTracker)==null||Kt.save(dt),Tt.save(),Tt.fillStyle=Dt.getPattern(Tt,this,getCurrentTransformInverse(Tt),PathType.FILL,dt),Zt){const er=new Path2D;er.addPath($t,Tt.getTransform().invertSelf().multiplySelf(Zt)),$t=er}Ut=!0}const Ht=this.current.getClippedPathBoundingBox();this.contentVisible&&Ht!==null&&(this.pendingEOFill?(Tt.fill($t,"evenodd"),this.pendingEOFill=!1):Tt.fill($t)),(Yt=this.dependencyTracker)==null||Yt.recordDependencies(dt,Dependencies.fill),Ut&&(Tt.restore(),(Jt=this.dependencyTracker)==null||Jt.restore(dt)),kt&&this.consumePath(dt,$t,Ht)}eoFill(dt,$t){this.pendingEOFill=!0,this.fill(dt,$t)}fillStroke(dt,$t){this.fill(dt,$t,!1),this.stroke(dt,$t,!1),this.consumePath(dt,$t)}eoFillStroke(dt,$t){this.pendingEOFill=!0,this.fillStroke(dt,$t)}closeFillStroke(dt,$t){this.fillStroke(dt,$t)}closeEOFillStroke(dt,$t){this.pendingEOFill=!0,this.fillStroke(dt,$t)}endPath(dt,$t){this.consumePath(dt,$t)}rawFillPath(dt,$t){var kt;this.ctx.fill($t),(kt=this.dependencyTracker)==null||kt.recordDependencies(dt,Dependencies.rawFillPath).recordOperation(dt)}clip(dt){var $t;($t=this.dependencyTracker)==null||$t.recordFutureForcedDependency("clipMode",dt),this.pendingClip=NORMAL_CLIP}eoClip(dt){var $t;($t=this.dependencyTracker)==null||$t.recordFutureForcedDependency("clipMode",dt),this.pendingClip=EO_CLIP}beginText(dt){var $t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,($t=this.dependencyTracker)==null||$t.recordOpenMarker(dt).resetIncrementalData("sameLineText").resetIncrementalData("moveText",dt)}endText(dt){const $t=this.pendingTextPaths,kt=this.ctx;if(this.dependencyTracker){const{dependencyTracker:Tt}=this;$t!==void 0&&Tt.recordFutureForcedDependency("textClip",Tt.getOpenMarker()).recordFutureForcedDependency("textClip",dt),Tt.recordCloseMarker(dt)}if($t!==void 0){const Tt=new Path2D,Dt=kt.getTransform().invertSelf();for(const{transform:Ft,x:Ut,y:Ht,fontSize:Kt,path:Yt}of $t)Yt&&Tt.addPath(Yt,new DOMMatrix(Ft).preMultiplySelf(Dt).translate(Ut,Ht).scale(Kt,-Kt));kt.clip(Tt)}delete this.pendingTextPaths}setCharSpacing(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("charSpacing",dt),this.current.charSpacing=$t}setWordSpacing(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("wordSpacing",dt),this.current.wordSpacing=$t}setHScale(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("hScale",dt),this.current.textHScale=$t/100}setLeading(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("leading",dt),this.current.leading=-$t}setFont(dt,$t,kt){var Jt,Zt;(Jt=this.dependencyTracker)==null||Jt.recordSimpleData("font",dt).recordSimpleDataFromNamed("fontObj",$t,dt);const Tt=this.commonObjs.get($t),Dt=this.current;if(!Tt)throw new Error(`Can't find font for ${$t}`);if(Dt.fontMatrix=Tt.fontMatrix||FONT_IDENTITY_MATRIX,(Dt.fontMatrix[0]===0||Dt.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+$t),kt<0?(kt=-kt,Dt.fontDirection=-1):Dt.fontDirection=1,this.current.font=Tt,this.current.fontSize=kt,Tt.isType3Font)return;const Ft=Tt.loadedName||"sans-serif",Ut=((Zt=Tt.systemFontInfo)==null?void 0:Zt.css)||`"${Ft}", ${Tt.fallbackName}`;let Ht="normal";Tt.black?Ht="900":Tt.bold&&(Ht="bold");const Kt=Tt.italic?"italic":"normal";let Yt=kt;kt<MIN_FONT_SIZE?Yt=MIN_FONT_SIZE:kt>MAX_FONT_SIZE&&(Yt=MAX_FONT_SIZE),this.current.fontSizeScale=kt/Yt,this.ctx.font=`${Kt} ${Ht} ${Yt}px ${Ut}`}setTextRenderingMode(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("textRenderingMode",dt),this.current.textRenderingMode=$t}setTextRise(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("textRise",dt),this.current.textRise=$t}moveText(dt,$t,kt){var Tt;(Tt=this.dependencyTracker)==null||Tt.resetIncrementalData("sameLineText").recordIncrementalData("moveText",dt),this.current.x=this.current.lineX+=$t,this.current.y=this.current.lineY+=kt}setLeadingMoveText(dt,$t,kt){this.setLeading(dt,-kt),this.moveText(dt,$t,kt)}setTextMatrix(dt,$t){var Tt;(Tt=this.dependencyTracker)==null||Tt.recordSimpleData("textMatrix",dt);const{current:kt}=this;kt.textMatrix=$t,kt.textMatrixScale=Math.hypot($t[0],$t[1]),kt.x=kt.lineX=0,kt.y=kt.lineY=0}nextLine(dt){var $t;this.moveText(dt,0,this.current.leading),($t=this.dependencyTracker)==null||$t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??dt)}paintChar(dt,$t,kt,Tt,Dt,Ft){var ir,or,lr,cr;const Ut=this.ctx,Ht=this.current,Kt=Ht.font,Yt=Ht.textRenderingMode,Jt=Ht.fontSize/Ht.fontSizeScale,Zt=Yt&TextRenderingMode.FILL_STROKE_MASK,er=!!(Yt&TextRenderingMode.ADD_TO_PATH_FLAG),rr=Ht.patternFill&&!Kt.missingFile,sr=Ht.patternStroke&&!Kt.missingFile;let nr;if((Kt.disableFontFace||er||rr||sr)&&!Kt.missingFile&&(nr=Kt.getPathGenerator(this.commonObjs,$t)),nr&&(Kt.disableFontFace||rr||sr)){Ut.save(),Ut.translate(kt,Tt),Ut.scale(Jt,-Jt),(ir=this.dependencyTracker)==null||ir.recordCharacterBBox(dt,Ut,Kt);let dr;if(Zt===TextRenderingMode.FILL||Zt===TextRenderingMode.FILL_STROKE)if(Dt){dr=Ut.getTransform(),Ut.setTransform(...Dt);const ur=Br(this,L1,f$).call(this,nr,dr,Dt);Ut.fill(ur)}else Ut.fill(nr);if(Zt===TextRenderingMode.STROKE||Zt===TextRenderingMode.FILL_STROKE)if(Ft){dr||(dr=Ut.getTransform()),Ut.setTransform(...Ft);const{a:ur,b:pr,c:mr,d:jr}=dr,Rr=Util.inverseTransform(Ft),xr=Util.transform([ur,pr,mr,jr,0,0],Rr);Util.singularValueDecompose2dScale(xr,XY),Ut.lineWidth*=Math.max(XY[0],XY[1])/Jt,Ut.stroke(Br(this,L1,f$).call(this,nr,dr,Ft))}else Ut.lineWidth/=Jt,Ut.stroke(nr);Ut.restore()}else(Zt===TextRenderingMode.FILL||Zt===TextRenderingMode.FILL_STROKE)&&(Ut.fillText($t,kt,Tt),(or=this.dependencyTracker)==null||or.recordCharacterBBox(dt,Ut,Kt,Jt,kt,Tt,()=>Ut.measureText($t))),(Zt===TextRenderingMode.STROKE||Zt===TextRenderingMode.FILL_STROKE)&&(this.dependencyTracker&&((lr=this.dependencyTracker)==null||lr.recordCharacterBBox(dt,Ut,Kt,Jt,kt,Tt,()=>Ut.measureText($t)).recordDependencies(dt,Dependencies.stroke)),Ut.strokeText($t,kt,Tt));er&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(Ut),x:kt,y:Tt,fontSize:Jt,path:nr}),(cr=this.dependencyTracker)==null||cr.recordCharacterBBox(dt,Ut,Kt,Jt,kt,Tt))}get isFontSubpixelAAEnabled(){const{context:dt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);dt.scale(1.5,1),dt.fillText("I",0,10);const $t=dt.getImageData(0,0,10,10).data;let kt=!1;for(let Tt=3;Tt<$t.length;Tt+=4)if($t[Tt]>0&&$t[Tt]<255){kt=!0;break}return shadow(this,"isFontSubpixelAAEnabled",kt)}showText(dt,$t){var mr,jr,Rr,xr;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(dt,Dependencies.showText).resetBBox(dt),this.current.textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",dt).inheritPendingDependenciesAsFutureForcedDependencies());const kt=this.current,Tt=kt.font;if(Tt.isType3Font){this.showType3Text(dt,$t),(mr=this.dependencyTracker)==null||mr.recordShowTextOperation(dt);return}const Dt=kt.fontSize;if(Dt===0){(jr=this.dependencyTracker)==null||jr.recordOperation(dt);return}const Ft=this.ctx,Ut=kt.fontSizeScale,Ht=kt.charSpacing,Kt=kt.wordSpacing,Yt=kt.fontDirection,Jt=kt.textHScale*Yt,Zt=$t.length,er=Tt.vertical,rr=er?1:-1,sr=Tt.defaultVMetrics,nr=Dt*kt.fontMatrix[0],ir=kt.textRenderingMode===TextRenderingMode.FILL&&!Tt.disableFontFace&&!kt.patternFill;Ft.save(),kt.textMatrix&&Ft.transform(...kt.textMatrix),Ft.translate(kt.x,kt.y+kt.textRise),Yt>0?Ft.scale(Jt,-1):Ft.scale(Jt,1);let or,lr;if(kt.patternFill){Ft.save();const kr=kt.fillColor.getPattern(Ft,this,getCurrentTransformInverse(Ft),PathType.FILL,dt);or=getCurrentTransform(Ft),Ft.restore(),Ft.fillStyle=kr}if(kt.patternStroke){Ft.save();const kr=kt.strokeColor.getPattern(Ft,this,getCurrentTransformInverse(Ft),PathType.STROKE,dt);lr=getCurrentTransform(Ft),Ft.restore(),Ft.strokeStyle=kr}let cr=kt.lineWidth;const dr=kt.textMatrixScale;if(dr===0||cr===0){const kr=kt.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(kr===TextRenderingMode.STROKE||kr===TextRenderingMode.FILL_STROKE)&&(cr=this.getSinglePixelWidth())}else cr/=dr;if(Ut!==1&&(Ft.scale(Ut,Ut),cr/=Ut),Ft.lineWidth=cr,Tt.isInvalidPDFjsFont){const kr=[];let Mr=0;for(const Or of $t)kr.push(Or.unicode),Mr+=Or.width;const Tr=kr.join("");if(Ft.fillText(Tr,0,0),this.dependencyTracker!==null){const Or=Ft.measureText(Tr);this.dependencyTracker.recordBBox(dt,this.ctx,-Or.actualBoundingBoxLeft,Or.actualBoundingBoxRight,-Or.actualBoundingBoxAscent,Or.actualBoundingBoxDescent).recordShowTextOperation(dt)}kt.x+=Mr*nr*Jt,Ft.restore(),this.compose();return}let ur=0,pr;for(pr=0;pr<Zt;++pr){const kr=$t[pr];if(typeof kr=="number"){ur+=rr*kr*Dt/1e3;continue}let Mr=!1;const Tr=(kr.isSpace?Kt:0)+Ht,Or=kr.fontChar,_r=kr.accent;let Pr,br,wr=kr.width;if(er){const Yr=kr.vmetric||sr,es=-(kr.vmetric?Yr[1]:wr*.5)*nr,rs=Yr[2]*nr;wr=Yr?-Yr[0]:wr,Pr=es/Ut,br=(ur+rs)/Ut}else Pr=ur/Ut,br=0;let zr;if(Tt.remeasure&&wr>0){zr=Ft.measureText(Or);const Yr=zr.width*1e3/Dt*Ut;if(wr<Yr&&this.isFontSubpixelAAEnabled){const es=wr/Yr;Mr=!0,Ft.save(),Ft.scale(es,1),Pr/=es}else wr!==Yr&&(Pr+=(wr-Yr)/2e3*Dt/Ut)}if(this.contentVisible&&(kr.isInFont||Tt.missingFile)){if(ir&&!_r)Ft.fillText(Or,Pr,br),(Rr=this.dependencyTracker)==null||Rr.recordCharacterBBox(dt,Ft,zr?{bbox:null}:Tt,Dt/Ut,Pr,br,()=>zr??Ft.measureText(Or));else if(this.paintChar(dt,Or,Pr,br,or,lr),_r){const Yr=Pr+Dt*_r.offset.x/Ut,es=br-Dt*_r.offset.y/Ut;this.paintChar(dt,_r.fontChar,Yr,es,or,lr)}}const Hr=er?wr*nr-Tr*Yt:wr*nr+Tr*Yt;ur+=Hr,Mr&&Ft.restore()}er?kt.y-=ur:kt.x+=ur*Jt,Ft.restore(),this.compose(),(xr=this.dependencyTracker)==null||xr.recordShowTextOperation(dt)}showType3Text(dt,$t){const kt=this.ctx,Tt=this.current,Dt=Tt.font,Ft=Tt.fontSize,Ut=Tt.fontDirection,Ht=Dt.vertical?1:-1,Kt=Tt.charSpacing,Yt=Tt.wordSpacing,Jt=Tt.textHScale*Ut,Zt=Tt.fontMatrix||FONT_IDENTITY_MATRIX,er=$t.length,rr=Tt.textRenderingMode===TextRenderingMode.INVISIBLE;let sr,nr,ir,or;if(rr||Ft===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,kt.save(),Tt.textMatrix&&kt.transform(...Tt.textMatrix),kt.translate(Tt.x,Tt.y+Tt.textRise),kt.scale(Jt,Ut);const lr=this.dependencyTracker;for(this.dependencyTracker=lr?new CanvasNestedDependencyTracker(lr,dt):null,sr=0;sr<er;++sr){if(nr=$t[sr],typeof nr=="number"){or=Ht*nr*Ft/1e3,this.ctx.translate(or,0),Tt.x+=or*Jt;continue}const cr=(nr.isSpace?Yt:0)+Kt,dr=Dt.charProcOperatorList[nr.operatorListId];dr?this.contentVisible&&(this.save(),kt.scale(Ft,Ft),kt.transform(...Zt),this.executeOperatorList(dr),this.restore()):warn(`Type3 character "${nr.operatorListId}" is not available.`);const ur=[nr.width,0];Util.applyTransform(ur,Zt),ir=ur[0]*Ft+cr,kt.translate(ir,0),Tt.x+=ir*Jt}kt.restore(),lr&&(this.dependencyTracker=lr)}setCharWidth(dt,$t,kt){}setCharWidthAndBounds(dt,$t,kt,Tt,Dt,Ft,Ut){var Kt;const Ht=new Path2D;Ht.rect(Tt,Dt,Ft-Tt,Ut-Dt),this.ctx.clip(Ht),(Kt=this.dependencyTracker)==null||Kt.recordBBox(dt,this.ctx,Tt,Ft,Dt,Ut).recordClipBox(dt,this.ctx,Tt,Ft,Dt,Ut),this.endPath(dt)}getColorN_Pattern(dt,$t){let kt;if($t[0]==="TilingPattern"){const Tt=this.baseTransform||getCurrentTransform(this.ctx),Dt={createCanvasGraphics:(Ft,Ut)=>new Z$(Ft,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new CanvasNestedDependencyTracker(this.dependencyTracker,Ut,!0):null)};kt=new TilingPattern($t,this.ctx,Dt,Tt)}else kt=this._getPattern(dt,$t[1],$t[2]);return kt}setStrokeColorN(dt,...$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("strokeColor",dt),this.current.strokeColor=this.getColorN_Pattern(dt,$t),this.current.patternStroke=!0}setFillColorN(dt,...$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("fillColor",dt),this.current.fillColor=this.getColorN_Pattern(dt,$t),this.current.patternFill=!0}setStrokeRGBColor(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("strokeColor",dt),this.ctx.strokeStyle=this.current.strokeColor=$t,this.current.patternStroke=!1}setStrokeTransparent(dt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("strokeColor",dt),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.recordSimpleData("fillColor",dt),this.ctx.fillStyle=this.current.fillColor=$t,this.current.patternFill=!1}setFillTransparent(dt){var $t;($t=this.dependencyTracker)==null||$t.recordSimpleData("fillColor",dt),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(dt,$t,kt=null){let Tt;return this.cachedPatterns.has($t)?Tt=this.cachedPatterns.get($t):(Tt=getShadingPattern(this.getObject(dt,$t)),this.cachedPatterns.set($t,Tt)),kt&&(Tt.matrix=kt),Tt}shadingFill(dt,$t){var Ft;if(!this.contentVisible)return;const kt=this.ctx;this.save(dt);const Tt=this._getPattern(dt,$t);kt.fillStyle=Tt.getPattern(kt,this,getCurrentTransformInverse(kt),PathType.SHADING,dt);const Dt=getCurrentTransformInverse(kt);if(Dt){const{width:Ut,height:Ht}=kt.canvas,Kt=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,Ut,Ht],Dt,Kt);const[Yt,Jt,Zt,er]=Kt;this.ctx.fillRect(Yt,Jt,Zt-Yt,er-Jt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(Ft=this.dependencyTracker)==null||Ft.resetBBox(dt).recordFullPageBBox(dt).recordDependencies(dt,Dependencies.transform).recordDependencies(dt,Dependencies.fill).recordOperation(dt),this.compose(this.current.getClippedPathBoundingBox()),this.restore(dt)}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(dt,$t,kt){var Tt;if(this.contentVisible&&(this.save(dt),this.baseTransformStack.push(this.baseTransform),$t&&this.transform(dt,...$t),this.baseTransform=getCurrentTransform(this.ctx),kt)){Util.axialAlignedBoundingBox(kt,this.baseTransform,this.current.minMax);const[Dt,Ft,Ut,Ht]=kt,Kt=new Path2D;Kt.rect(Dt,Ft,Ut-Dt,Ht-Ft),this.ctx.clip(Kt),(Tt=this.dependencyTracker)==null||Tt.recordClipBox(dt,this.ctx,Dt,Ut,Ft,Ht),this.endPath(dt)}}paintFormXObjectEnd(dt){this.contentVisible&&(this.restore(dt),this.baseTransform=this.baseTransformStack.pop())}beginGroup(dt,$t){var lr;if(!this.contentVisible)return;this.save(dt),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const kt=this.ctx;$t.isolated||info("TODO: Support non-isolated groups."),$t.knockout&&warn("Knockout groups not supported.");const Tt=getCurrentTransform(kt);if($t.matrix&&kt.transform(...$t.matrix),!$t.bbox)throw new Error("Bounding box is required.");let Dt=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox($t.bbox,getCurrentTransform(kt),Dt);const Ft=[0,0,kt.canvas.width,kt.canvas.height];Dt=Util.intersect(Dt,Ft)||[0,0,0,0];const Ut=Math.floor(Dt[0]),Ht=Math.floor(Dt[1]),Kt=Math.max(Math.ceil(Dt[2])-Ut,1),Yt=Math.max(Math.ceil(Dt[3])-Ht,1);this.current.startNewPathAndClipBox([0,0,Kt,Yt]);let Jt="groupAt"+this.groupLevel;$t.smask&&(Jt+="_smask_"+this.smaskCounter++%2);const Zt=this.cachedCanvases.getCanvas(Jt,Kt,Yt),er=Zt.context;er.translate(-Ut,-Ht),er.transform(...Tt);let rr=new Path2D;const[sr,nr,ir,or]=$t.bbox;if(rr.rect(sr,nr,ir-sr,or-nr),$t.matrix){const cr=new Path2D;cr.addPath(rr,new DOMMatrix($t.matrix)),rr=cr}er.clip(rr),$t.smask&&this.smaskStack.push({canvas:Zt.canvas,context:er,offsetX:Ut,offsetY:Ht,subtype:$t.smask.subtype,backdrop:$t.smask.backdrop,transferMap:$t.smask.transferMap||null,startTransformInverse:null}),(!$t.smask||this.dependencyTracker)&&(kt.setTransform(1,0,0,1,0,0),kt.translate(Ut,Ht),kt.save()),copyCtxState(kt,er),this.ctx=er,(lr=this.dependencyTracker)==null||lr.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(kt),this.setGState(dt,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(kt),this.groupLevel++}endGroup(dt,$t){var Dt;if(!this.contentVisible)return;this.groupLevel--;const kt=this.ctx,Tt=this.groupStack.pop();if(this.ctx=Tt,this.ctx.imageSmoothingEnabled=!1,(Dt=this.dependencyTracker)==null||Dt.popBaseTransform(),$t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(dt),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const Ft=getCurrentTransform(this.ctx);this.restore(dt),this.ctx.save(),this.ctx.setTransform(...Ft);const Ut=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,kt.canvas.width,kt.canvas.height],Ft,Ut),this.ctx.drawImage(kt.canvas,0,0),this.ctx.restore(),this.compose(Ut)}}beginAnnotation(dt,$t,kt,Tt,Dt,Ft){if(Br(this,D1,h$).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(dt),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),kt){const Ut=kt[2]-kt[0],Ht=kt[3]-kt[1];if(Ft&&this.annotationCanvasMap){Tt=Tt.slice(),Tt[4]-=kt[0],Tt[5]-=kt[1],kt=kt.slice(),kt[0]=kt[1]=0,kt[2]=Ut,kt[3]=Ht,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:Kt}=this,Yt=Math.ceil(Ut*this.outputScaleX*Kt),Jt=Math.ceil(Ht*this.outputScaleY*Kt);this.annotationCanvas=this.canvasFactory.create(Yt,Jt);const{canvas:Zt,context:er}=this.annotationCanvas;this.annotationCanvasMap.set($t,Zt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=er,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,Ht*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath(dt);const Kt=new Path2D;Kt.rect(kt[0],kt[1],Ut,Ht),this.ctx.clip(Kt)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(dt,...Tt),this.transform(dt,...Dt)}endAnnotation(dt){this.annotationCanvas&&(this.ctx.restore(),Br(this,F1,p$).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(dt,$t){var Ut;if(!this.contentVisible)return;const kt=$t.count;$t=this.getObject(dt,$t.data,$t),$t.count=kt;const Tt=this.ctx,Dt=this._createMaskCanvas(dt,$t),Ft=Dt.canvas;Tt.save(),Tt.setTransform(1,0,0,1,0,0),Tt.drawImage(Ft,Dt.offsetX,Dt.offsetY),(Ut=this.dependencyTracker)==null||Ut.resetBBox(dt).recordBBox(dt,this.ctx,Dt.offsetX,Dt.offsetX+Ft.width,Dt.offsetY,Dt.offsetY+Ft.height).recordOperation(dt),Tt.restore(),this.compose()}paintImageMaskXObjectRepeat(dt,$t,kt,Tt=0,Dt=0,Ft,Ut){var Jt,Zt,er;if(!this.contentVisible)return;$t=this.getObject(dt,$t.data,$t);const Ht=this.ctx;Ht.save();const Kt=getCurrentTransform(Ht);Ht.transform(kt,Tt,Dt,Ft,0,0);const Yt=this._createMaskCanvas(dt,$t);Ht.setTransform(1,0,0,1,Yt.offsetX-Kt[4],Yt.offsetY-Kt[5]),(Jt=this.dependencyTracker)==null||Jt.resetBBox(dt);for(let rr=0,sr=Ut.length;rr<sr;rr+=2){const nr=Util.transform(Kt,[kt,Tt,Dt,Ft,Ut[rr],Ut[rr+1]]);Ht.drawImage(Yt.canvas,nr[4],nr[5]),(Zt=this.dependencyTracker)==null||Zt.recordBBox(dt,this.ctx,nr[4],nr[4]+Yt.canvas.width,nr[5],nr[5]+Yt.canvas.height)}Ht.restore(),this.compose(),(er=this.dependencyTracker)==null||er.recordOperation(dt)}paintImageMaskXObjectGroup(dt,$t){var Ft,Ut,Ht;if(!this.contentVisible)return;const kt=this.ctx,Tt=this.current.fillColor,Dt=this.current.patternFill;(Ft=this.dependencyTracker)==null||Ft.resetBBox(dt).recordDependencies(dt,Dependencies.transformAndFill);for(const Kt of $t){const{data:Yt,width:Jt,height:Zt,transform:er}=Kt,rr=this.cachedCanvases.getCanvas("maskCanvas",Jt,Zt),sr=rr.context;sr.save();const nr=this.getObject(dt,Yt,Kt);putBinaryImageMask(sr,nr),sr.globalCompositeOperation="source-in",sr.fillStyle=Dt?Tt.getPattern(sr,this,getCurrentTransformInverse(kt),PathType.FILL,dt):Tt,sr.fillRect(0,0,Jt,Zt),sr.restore(),kt.save(),kt.transform(...er),kt.scale(1,-1),drawImageAtIntegerCoords(kt,rr.canvas,0,0,Jt,Zt,0,-1,1,1),(Ut=this.dependencyTracker)==null||Ut.recordBBox(dt,kt,0,Jt,0,Zt),kt.restore()}this.compose(),(Ht=this.dependencyTracker)==null||Ht.recordOperation(dt)}paintImageXObject(dt,$t){if(!this.contentVisible)return;const kt=this.getObject(dt,$t);if(!kt){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(dt,kt)}paintImageXObjectRepeat(dt,$t,kt,Tt,Dt){if(!this.contentVisible)return;const Ft=this.getObject(dt,$t);if(!Ft){warn("Dependent image isn't ready yet");return}const Ut=Ft.width,Ht=Ft.height,Kt=[];for(let Yt=0,Jt=Dt.length;Yt<Jt;Yt+=2)Kt.push({transform:[kt,0,0,Tt,Dt[Yt],Dt[Yt+1]],x:0,y:0,w:Ut,h:Ht});this.paintInlineImageXObjectGroup(dt,Ft,Kt)}applyTransferMapsToCanvas(dt){return this.current.transferMaps!=="none"&&(dt.filter=this.current.transferMaps,dt.drawImage(dt.canvas,0,0),dt.filter="none"),dt.canvas}applyTransferMapsToBitmap(dt){if(this.current.transferMaps==="none")return dt.bitmap;const{bitmap:$t,width:kt,height:Tt}=dt,Dt=this.cachedCanvases.getCanvas("inlineImage",kt,Tt),Ft=Dt.context;return Ft.filter=this.current.transferMaps,Ft.drawImage($t,0,0),Ft.filter="none",Dt.canvas}paintInlineImageXObject(dt,$t){var Kt;if(!this.contentVisible)return;const kt=$t.width,Tt=$t.height,Dt=this.ctx;this.save(dt);const{filter:Ft}=Dt;Ft!=="none"&&Ft!==""&&(Dt.filter="none"),Dt.scale(1/kt,-1/Tt);let Ut;if($t.bitmap)Ut=this.applyTransferMapsToBitmap($t);else if(typeof HTMLElement=="function"&&$t instanceof HTMLElement||!$t.data)Ut=$t;else{const Jt=this.cachedCanvases.getCanvas("inlineImage",kt,Tt).context;putBinaryImageData(Jt,$t),Ut=this.applyTransferMapsToCanvas(Jt)}const Ht=this._scaleImage(Ut,getCurrentTransformInverse(Dt));Dt.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(Dt),$t.interpolate),(Kt=this.dependencyTracker)==null||Kt.resetBBox(dt).recordBBox(dt,Dt,0,kt,-Tt,0).recordDependencies(dt,Dependencies.imageXObject).recordOperation(dt),drawImageAtIntegerCoords(Dt,Ht.img,0,0,Ht.paintWidth,Ht.paintHeight,0,-Tt,kt,Tt),this.compose(),this.restore(dt)}paintInlineImageXObjectGroup(dt,$t,kt){var Ft,Ut,Ht;if(!this.contentVisible)return;const Tt=this.ctx;let Dt;if($t.bitmap)Dt=$t.bitmap;else{const Kt=$t.width,Yt=$t.height,Zt=this.cachedCanvases.getCanvas("inlineImage",Kt,Yt).context;putBinaryImageData(Zt,$t),Dt=this.applyTransferMapsToCanvas(Zt)}(Ft=this.dependencyTracker)==null||Ft.resetBBox(dt);for(const Kt of kt)Tt.save(),Tt.transform(...Kt.transform),Tt.scale(1,-1),drawImageAtIntegerCoords(Tt,Dt,Kt.x,Kt.y,Kt.w,Kt.h,0,-1,1,1),(Ut=this.dependencyTracker)==null||Ut.recordBBox(dt,Tt,0,1,-1,0),Tt.restore();(Ht=this.dependencyTracker)==null||Ht.recordOperation(dt),this.compose()}paintSolidColorImageMask(dt){var $t;this.contentVisible&&(($t=this.dependencyTracker)==null||$t.resetBBox(dt).recordBBox(dt,this.ctx,0,1,0,1).recordDependencies(dt,Dependencies.fill).recordOperation(dt),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(dt,$t){}markPointProps(dt,$t,kt){}beginMarkedContent(dt,$t){var kt;(kt=this.dependencyTracker)==null||kt.beginMarkedContent(dt),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(dt,$t,kt){var Tt;(Tt=this.dependencyTracker)==null||Tt.beginMarkedContent(dt),$t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(kt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(dt){var $t;($t=this.dependencyTracker)==null||$t.endMarkedContent(dt),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(dt){}endCompat(dt){}consumePath(dt,$t,kt){var Ft,Ut;const Tt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(kt);const Dt=this.ctx;this.pendingClip?(Tt||(this.pendingClip===EO_CLIP?Dt.clip($t,"evenodd"):Dt.clip($t)),this.pendingClip=null,(Ft=this.dependencyTracker)==null||Ft.bboxToClipBoxDropOperation(dt).recordFutureForcedDependency("clipPath",dt)):(Ut=this.dependencyTracker)==null||Ut.recordOperation(dt),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const dt=getCurrentTransform(this.ctx);if(dt[1]===0&&dt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(dt[0]),Math.abs(dt[3]));else{const $t=Math.abs(dt[0]*dt[3]-dt[2]*dt[1]),kt=Math.hypot(dt[0],dt[2]),Tt=Math.hypot(dt[1],dt[3]);this._cachedGetSinglePixelWidth=Math.max(kt,Tt)/$t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:dt}=this.current,{a:$t,b:kt,c:Tt,d:Dt}=this.ctx.getTransform();let Ft,Ut;if(kt===0&&Tt===0){const Ht=Math.abs($t),Kt=Math.abs(Dt);if(Ht===Kt)if(dt===0)Ft=Ut=1/Ht;else{const Yt=Ht*dt;Ft=Ut=Yt<1?1/Yt:1}else if(dt===0)Ft=1/Ht,Ut=1/Kt;else{const Yt=Ht*dt,Jt=Kt*dt;Ft=Yt<1?1/Yt:1,Ut=Jt<1?1/Jt:1}}else{const Ht=Math.abs($t*Dt-kt*Tt),Kt=Math.hypot($t,kt),Yt=Math.hypot(Tt,Dt);if(dt===0)Ft=Yt/Ht,Ut=Kt/Ht;else{const Jt=dt*Ht;Ft=Yt>Jt?Yt/Jt:1,Ut=Kt>Jt?Kt/Jt:1}}this._cachedScaleForStroking[0]=Ft,this._cachedScaleForStroking[1]=Ut}return this._cachedScaleForStroking}rescaleAndStroke(dt,$t){const{ctx:kt,current:{lineWidth:Tt}}=this,[Dt,Ft]=this.getScaleForStroking();if(Dt===Ft){kt.lineWidth=(Tt||1)*Dt,kt.stroke(dt);return}const Ut=kt.getLineDash();$t&&kt.save(),kt.scale(Dt,Ft),SCALE_MATRIX.a=1/Dt,SCALE_MATRIX.d=1/Ft;const Ht=new Path2D;if(Ht.addPath(dt,SCALE_MATRIX),Ut.length>0){const Kt=Math.max(Dt,Ft);kt.setLineDash(Ut.map(Yt=>Yt/Kt)),kt.lineDashOffset/=Kt}kt.lineWidth=Tt||1,kt.stroke(Ht),$t&&kt.restore()}isContentVisible(){for(let dt=this.markedContentStack.length-1;dt>=0;dt--)if(!this.markedContentStack[dt].visible)return!1;return!0}};D1=new WeakSet,h$=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},F1=new WeakSet,p$=function(){if(this.pageColors){const dt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(dt!=="none"){const $t=this.ctx.filter;this.ctx.filter=dt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=$t}}},L1=new WeakSet,f$=function(dt,$t,kt){const Tt=new Path2D;return Tt.addPath(dt,new DOMMatrix(kt).invertSelf().multiplySelf($t)),Tt};let CanvasGraphics=Z$;for(const et in OPS)CanvasGraphics.prototype[et]!==void 0&&(CanvasGraphics.prototype[OPS[et]]=CanvasGraphics.prototype[et]);var _b,ey,O1,ty,kw;const g0=class g0{constructor(dt){yr(this,ty);yr(this,_b,void 0);yr(this,ey,void 0);yr(this,O1,void 0);vr(this,_b,dt),vr(this,ey,new DataView(ar(this,_b))),vr(this,O1,new TextDecoder)}static write(dt){const $t=new TextEncoder,kt={};let Tt=0;for(const Kt of g0.strings){const Yt=$t.encode(dt[Kt]);kt[Kt]=Yt,Tt+=4+Yt.length}const Dt=new ArrayBuffer(Tt),Ft=new Uint8Array(Dt),Ut=new DataView(Dt);let Ht=0;for(const Kt of g0.strings){const Yt=kt[Kt],Jt=Yt.length;Ut.setUint32(Ht,Jt),Ft.set(Yt,Ht+4),Ht+=4+Jt}return assert(Ht===Dt.byteLength,"CssFontInfo.write: Buffer overflow"),Dt}get fontFamily(){return Br(this,ty,kw).call(this,0)}get fontWeight(){return Br(this,ty,kw).call(this,1)}get italicAngle(){return Br(this,ty,kw).call(this,2)}};_b=new WeakMap,ey=new WeakMap,O1=new WeakMap,ty=new WeakSet,kw=function(dt){assert(dt<g0.strings.length,"Invalid string index");let $t=0;for(let Tt=0;Tt<dt;Tt++)$t+=ar(this,ey).getUint32($t)+4;const kt=ar(this,ey).getUint32($t);return ar(this,O1).decode(new Uint8Array(ar(this,_b),$t+4,kt))},Es(g0,"strings",["fontFamily","fontWeight","italicAngle"]);let CssFontInfo=g0;var qp,Eu,mx,xx,Tv;const b0=class b0{constructor(dt){yr(this,xx);yr(this,qp,void 0);yr(this,Eu,void 0);yr(this,mx,void 0);vr(this,qp,dt),vr(this,Eu,new DataView(ar(this,qp))),vr(this,mx,new TextDecoder)}static write(dt){const $t=new TextEncoder,kt={};let Tt=0;for(const Zt of b0.strings){const er=$t.encode(dt[Zt]);kt[Zt]=er,Tt+=4+er.length}Tt+=4;let Dt,Ft,Ut=1+Tt;dt.style&&(Dt=$t.encode(dt.style.style),Ft=$t.encode(dt.style.weight),Ut+=4+Dt.length+4+Ft.length);const Ht=new ArrayBuffer(Ut),Kt=new Uint8Array(Ht),Yt=new DataView(Ht);let Jt=0;Yt.setUint8(Jt++,dt.guessFallback?1:0),Yt.setUint32(Jt,0),Jt+=4,Tt=0;for(const Zt of b0.strings){const er=kt[Zt],rr=er.length;Tt+=4+rr,Yt.setUint32(Jt,rr),Kt.set(er,Jt+4),Jt+=4+rr}return Yt.setUint32(Jt-Tt-4,Tt),dt.style&&(Yt.setUint32(Jt,Dt.length),Kt.set(Dt,Jt+4),Jt+=4+Dt.length,Yt.setUint32(Jt,Ft.length),Kt.set(Ft,Jt+4),Jt+=4+Ft.length),assert(Jt<=Ht.byteLength,"SubstitionInfo.write: Buffer overflow"),Ht.transferToFixedLength(Jt)}get guessFallback(){return ar(this,Eu).getUint8(0)!==0}get css(){return Br(this,xx,Tv).call(this,0)}get loadedName(){return Br(this,xx,Tv).call(this,1)}get baseFontName(){return Br(this,xx,Tv).call(this,2)}get src(){return Br(this,xx,Tv).call(this,3)}get style(){let dt=1;dt+=4+ar(this,Eu).getUint32(dt);const $t=ar(this,Eu).getUint32(dt),kt=ar(this,mx).decode(new Uint8Array(ar(this,qp),dt+4,$t));dt+=4+$t;const Tt=ar(this,Eu).getUint32(dt),Dt=ar(this,mx).decode(new Uint8Array(ar(this,qp),dt+4,Tt));return{style:kt,weight:Dt}}};qp=new WeakMap,Eu=new WeakMap,mx=new WeakMap,xx=new WeakSet,Tv=function(dt){assert(dt<b0.strings.length,"Invalid string index");let $t=5;for(let Tt=0;Tt<dt;Tt++)$t+=ar(this,Eu).getUint32($t)+4;const kt=ar(this,Eu).getUint32($t);return ar(this,mx).decode(new Uint8Array(ar(this,qp),$t+4,kt))},Es(b0,"strings",["css","loadedName","baseFontName","src"]);let SystemFontInfo=b0;var ry,sy,ny,iy,Jo,ju,B1,Tn,Zo,Yl,ay,Sw,gx,Nv;const Hs=class Hs{constructor({data:dt,extra:$t}){yr(this,Zo);yr(this,ay);yr(this,gx);yr(this,ju,void 0);yr(this,B1,void 0);yr(this,Tn,void 0);vr(this,ju,dt),vr(this,B1,new TextDecoder),vr(this,Tn,new DataView(ar(this,ju))),$t&&Object.assign(this,$t)}get black(){return Br(this,Zo,Yl).call(this,0)}get bold(){return Br(this,Zo,Yl).call(this,1)}get disableFontFace(){return Br(this,Zo,Yl).call(this,2)}get fontExtraProperties(){return Br(this,Zo,Yl).call(this,3)}get isInvalidPDFjsFont(){return Br(this,Zo,Yl).call(this,4)}get isType3Font(){return Br(this,Zo,Yl).call(this,5)}get italic(){return Br(this,Zo,Yl).call(this,6)}get missingFile(){return Br(this,Zo,Yl).call(this,7)}get remeasure(){return Br(this,Zo,Yl).call(this,8)}get vertical(){return Br(this,Zo,Yl).call(this,9)}get ascent(){return Br(this,ay,Sw).call(this,0)}get defaultWidth(){return Br(this,ay,Sw).call(this,1)}get descent(){return Br(this,ay,Sw).call(this,2)}get bbox(){let dt=ar(Hs,sy);if(ar(this,Tn).getUint8(dt)===0)return;dt+=1;const kt=[];for(let Tt=0;Tt<4;Tt++)kt.push(ar(this,Tn).getInt16(dt,!0)),dt+=2;return kt}get fontMatrix(){let dt=ar(Hs,ny);if(ar(this,Tn).getUint8(dt)===0)return;dt+=1;const kt=[];for(let Tt=0;Tt<6;Tt++)kt.push(ar(this,Tn).getFloat64(dt,!0)),dt+=8;return kt}get defaultVMetrics(){let dt=ar(Hs,iy);if(ar(this,Tn).getUint8(dt)===0)return;dt+=1;const kt=[];for(let Tt=0;Tt<3;Tt++)kt.push(ar(this,Tn).getInt16(dt,!0)),dt+=2;return kt}get fallbackName(){return Br(this,gx,Nv).call(this,0)}get loadedName(){return Br(this,gx,Nv).call(this,1)}get mimetype(){return Br(this,gx,Nv).call(this,2)}get name(){return Br(this,gx,Nv).call(this,3)}get data(){let dt=ar(Hs,Jo);const $t=ar(this,Tn).getUint32(dt);dt+=4+$t;const kt=ar(this,Tn).getUint32(dt);dt+=4+kt;const Tt=ar(this,Tn).getUint32(dt);dt+=4+Tt;const Dt=ar(this,Tn).getUint32(dt);if(Dt!==0)return new Uint8Array(ar(this,ju),dt+4,Dt)}clearData(){let dt=ar(Hs,Jo);const $t=ar(this,Tn).getUint32(dt);dt+=4+$t;const kt=ar(this,Tn).getUint32(dt);dt+=4+kt;const Tt=ar(this,Tn).getUint32(dt);dt+=4+Tt;const Dt=ar(this,Tn).getUint32(dt);new Uint8Array(ar(this,ju),dt+4,Dt).fill(0),ar(this,Tn).setUint32(dt,0)}get cssFontInfo(){let dt=ar(Hs,Jo);const $t=ar(this,Tn).getUint32(dt);dt+=4+$t;const kt=ar(this,Tn).getUint32(dt);dt+=4+kt;const Tt=ar(this,Tn).getUint32(dt);if(Tt===0)return null;const Dt=new Uint8Array(Tt);return Dt.set(new Uint8Array(ar(this,ju),dt+4,Tt)),new CssFontInfo(Dt.buffer)}get systemFontInfo(){let dt=ar(Hs,Jo);const $t=ar(this,Tn).getUint32(dt);dt+=4+$t;const kt=ar(this,Tn).getUint32(dt);if(kt===0)return null;const Tt=new Uint8Array(kt);return Tt.set(new Uint8Array(ar(this,ju),dt+4,kt)),new SystemFontInfo(Tt.buffer)}static write(dt){const $t=dt.systemFontInfo?SystemFontInfo.write(dt.systemFontInfo):null,kt=dt.cssFontInfo?CssFontInfo.write(dt.cssFontInfo):null,Tt=new TextEncoder,Dt={};let Ft=0;for(const sr of Hs.strings)Dt[sr]=Tt.encode(dt[sr]),Ft+=4+Dt[sr].length;const Ut=ar(Hs,Jo)+4+Ft+4+($t?$t.byteLength:0)+4+(kt?kt.byteLength:0)+4+(dt.data?dt.data.length:0),Ht=new ArrayBuffer(Ut),Kt=new Uint8Array(Ht),Yt=new DataView(Ht);let Jt=0;const Zt=Hs.bools.length;let er=0,rr=0;for(let sr=0;sr<Zt;sr++){const nr=dt[Hs.bools[sr]];er|=(nr===void 0?0:nr?2:1)<<rr,rr+=2,(rr===8||sr===Zt-1)&&(Yt.setUint8(Jt++,er),er=0,rr=0)}assert(Jt===ar(Hs,ry),"FontInfo.write: Boolean properties offset mismatch");for(const sr of Hs.numbers)Yt.setFloat64(Jt,dt[sr]),Jt+=8;if(assert(Jt===ar(Hs,sy),"FontInfo.write: Number properties offset mismatch"),dt.bbox){Yt.setUint8(Jt++,4);for(const sr of dt.bbox)Yt.setInt16(Jt,sr,!0),Jt+=2}else Yt.setUint8(Jt++,0),Jt+=2*4;if(assert(Jt===ar(Hs,ny),"FontInfo.write: BBox properties offset mismatch"),dt.fontMatrix){Yt.setUint8(Jt++,6);for(const sr of dt.fontMatrix)Yt.setFloat64(Jt,sr,!0),Jt+=8}else Yt.setUint8(Jt++,0),Jt+=8*6;if(assert(Jt===ar(Hs,iy),"FontInfo.write: FontMatrix properties offset mismatch"),dt.defaultVMetrics){Yt.setUint8(Jt++,1);for(const sr of dt.defaultVMetrics)Yt.setInt16(Jt,sr,!0),Jt+=2}else Yt.setUint8(Jt++,0),Jt+=3*2;assert(Jt===ar(Hs,Jo),"FontInfo.write: DefaultVMetrics properties offset mismatch"),Yt.setUint32(ar(Hs,Jo),0),Jt+=4;for(const sr of Hs.strings){const nr=Dt[sr],ir=nr.length;Yt.setUint32(Jt,ir),Kt.set(nr,Jt+4),Jt+=4+ir}if(Yt.setUint32(ar(Hs,Jo),Jt-ar(Hs,Jo)-4),!$t)Yt.setUint32(Jt,0),Jt+=4;else{const sr=$t.byteLength;Yt.setUint32(Jt,sr),assert(Jt+4+sr<=Ht.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),Kt.set(new Uint8Array($t),Jt+4),Jt+=4+sr}if(!kt)Yt.setUint32(Jt,0),Jt+=4;else{const sr=kt.byteLength;Yt.setUint32(Jt,sr),assert(Jt+4+sr<=Ht.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),Kt.set(new Uint8Array(kt),Jt+4),Jt+=4+sr}return dt.data===void 0?(Yt.setUint32(Jt,0),Jt+=4):(Yt.setUint32(Jt,dt.data.length),Kt.set(dt.data,Jt+4),Jt+=4+dt.data.length),assert(Jt<=Ht.byteLength,"FontInfo.write: Buffer overflow"),Ht.transferToFixedLength(Jt)}};ry=new WeakMap,sy=new WeakMap,ny=new WeakMap,iy=new WeakMap,Jo=new WeakMap,ju=new WeakMap,B1=new WeakMap,Tn=new WeakMap,Zo=new WeakSet,Yl=function(dt){assert(dt<Hs.bools.length,"Invalid boolean index");const $t=Math.floor(dt/4),kt=dt*2%8,Tt=ar(this,Tn).getUint8($t)>>kt&3;return Tt===0?void 0:Tt===2},ay=new WeakSet,Sw=function(dt){return assert(dt<Hs.numbers.length,"Invalid number index"),ar(this,Tn).getFloat64(ar(Hs,ry)+dt*8)},gx=new WeakSet,Nv=function(dt){assert(dt<Hs.strings.length,"Invalid string index");let $t=ar(Hs,Jo)+4;for(let Dt=0;Dt<dt;Dt++)$t+=ar(this,Tn).getUint32($t)+4;const kt=ar(this,Tn).getUint32($t),Tt=new Uint8Array(kt);return Tt.set(new Uint8Array(ar(this,ju),$t+4,kt)),ar(this,B1).decode(Tt)},Es(Hs,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Es(Hs,"numbers",["ascent","defaultWidth","descent"]),Es(Hs,"strings",["fallbackName","loadedName","mimetype","name"]),yr(Hs,ry,Math.ceil(Hs.bools.length*2/8)),yr(Hs,sy,ar(Hs,ry)+Hs.numbers.length*8),yr(Hs,ny,ar(Hs,sy)+1+2*4),yr(Hs,iy,ar(Hs,ny)+1+8*6),yr(Hs,Jo,ar(Hs,iy)+1+2*3);let FontInfo=Hs;var V1,z1;class GlobalWorkerOptions{static get workerPort(){return ar(this,V1)}static set workerPort(dt){if(!(typeof Worker<"u"&&dt instanceof Worker)&&dt!==null)throw new Error("Invalid `workerPort` type.");vr(this,V1,dt)}static get workerSrc(){return ar(this,z1)}static set workerSrc(dt){if(typeof dt!="string")throw new Error("Invalid `workerSrc` type.");vr(this,z1,dt)}}V1=new WeakMap,z1=new WeakMap,yr(GlobalWorkerOptions,V1,null),yr(GlobalWorkerOptions,z1,"");var oy,U1;class Metadata{constructor({parsedData:dt,rawData:$t}){yr(this,oy,void 0);yr(this,U1,void 0);vr(this,oy,dt),vr(this,U1,$t)}getRaw(){return ar(this,U1)}get(dt){return ar(this,oy).get(dt)??null}[Symbol.iterator](){return ar(this,oy).entries()}}oy=new WeakMap,U1=new WeakMap;const INTERNAL=Symbol("INTERNAL");var H1,G1,W1,ly;class OptionalContentGroup{constructor(dt,{name:$t,intent:kt,usage:Tt,rbGroups:Dt}){yr(this,H1,!1);yr(this,G1,!1);yr(this,W1,!1);yr(this,ly,!0);vr(this,H1,!!(dt&RenderingIntentFlag.DISPLAY)),vr(this,G1,!!(dt&RenderingIntentFlag.PRINT)),this.name=$t,this.intent=kt,this.usage=Tt,this.rbGroups=Dt}get visible(){if(ar(this,W1))return ar(this,ly);if(!ar(this,ly))return!1;const{print:dt,view:$t}=this.usage;return ar(this,H1)?($t==null?void 0:$t.viewState)!=="OFF":ar(this,G1)?(dt==null?void 0:dt.printState)!=="OFF":!0}_setVisible(dt,$t,kt=!1){dt!==INTERNAL&&unreachable("Internal method `_setVisible` called."),vr(this,W1,kt),vr(this,ly,$t)}}H1=new WeakMap,G1=new WeakMap,W1=new WeakMap,ly=new WeakMap;var Kp,Nn,cy,dy,q1,m$;class OptionalContentConfig{constructor(dt,$t=RenderingIntentFlag.DISPLAY){yr(this,q1);yr(this,Kp,null);yr(this,Nn,new Map);yr(this,cy,null);yr(this,dy,null);if(this.renderingIntent=$t,this.name=null,this.creator=null,dt!==null){this.name=dt.name,this.creator=dt.creator,vr(this,dy,dt.order);for(const kt of dt.groups)ar(this,Nn).set(kt.id,new OptionalContentGroup($t,kt));if(dt.baseState==="OFF")for(const kt of ar(this,Nn).values())kt._setVisible(INTERNAL,!1);for(const kt of dt.on)ar(this,Nn).get(kt)._setVisible(INTERNAL,!0);for(const kt of dt.off)ar(this,Nn).get(kt)._setVisible(INTERNAL,!1);vr(this,cy,this.getHash())}}isVisible(dt){if(ar(this,Nn).size===0)return!0;if(!dt)return info("Optional content group not defined."),!0;if(dt.type==="OCG")return ar(this,Nn).has(dt.id)?ar(this,Nn).get(dt.id).visible:(warn(`Optional content group not found: ${dt.id}`),!0);if(dt.type==="OCMD"){if(dt.expression)return Br(this,q1,m$).call(this,dt.expression);if(!dt.policy||dt.policy==="AnyOn"){for(const $t of dt.ids){if(!ar(this,Nn).has($t))return warn(`Optional content group not found: ${$t}`),!0;if(ar(this,Nn).get($t).visible)return!0}return!1}else if(dt.policy==="AllOn"){for(const $t of dt.ids){if(!ar(this,Nn).has($t))return warn(`Optional content group not found: ${$t}`),!0;if(!ar(this,Nn).get($t).visible)return!1}return!0}else if(dt.policy==="AnyOff"){for(const $t of dt.ids){if(!ar(this,Nn).has($t))return warn(`Optional content group not found: ${$t}`),!0;if(!ar(this,Nn).get($t).visible)return!0}return!1}else if(dt.policy==="AllOff"){for(const $t of dt.ids){if(!ar(this,Nn).has($t))return warn(`Optional content group not found: ${$t}`),!0;if(ar(this,Nn).get($t).visible)return!1}return!0}return warn(`Unknown optional content policy ${dt.policy}.`),!0}return warn(`Unknown group type ${dt.type}.`),!0}setVisibility(dt,$t=!0,kt=!0){var Dt;const Tt=ar(this,Nn).get(dt);if(!Tt){warn(`Optional content group not found: ${dt}`);return}if(kt&&$t&&Tt.rbGroups.length)for(const Ft of Tt.rbGroups)for(const Ut of Ft)Ut!==dt&&((Dt=ar(this,Nn).get(Ut))==null||Dt._setVisible(INTERNAL,!1,!0));Tt._setVisible(INTERNAL,!!$t,!0),vr(this,Kp,null)}setOCGState({state:dt,preserveRB:$t}){let kt;for(const Tt of dt){switch(Tt){case"ON":case"OFF":case"Toggle":kt=Tt;continue}const Dt=ar(this,Nn).get(Tt);if(Dt)switch(kt){case"ON":this.setVisibility(Tt,!0,$t);break;case"OFF":this.setVisibility(Tt,!1,$t);break;case"Toggle":this.setVisibility(Tt,!Dt.visible,$t);break}}vr(this,Kp,null)}get hasInitialVisibility(){return ar(this,cy)===null||this.getHash()===ar(this,cy)}getOrder(){return ar(this,Nn).size?ar(this,dy)?ar(this,dy).slice():[...ar(this,Nn).keys()]:null}getGroup(dt){return ar(this,Nn).get(dt)||null}getHash(){if(ar(this,Kp)!==null)return ar(this,Kp);const dt=new MurmurHash3_64;for(const[$t,kt]of ar(this,Nn))dt.update(`${$t}:${kt.visible}`);return vr(this,Kp,dt.hexdigest())}[Symbol.iterator](){return ar(this,Nn).entries()}}Kp=new WeakMap,Nn=new WeakMap,cy=new WeakMap,dy=new WeakMap,q1=new WeakSet,m$=function(dt){const $t=dt.length;if($t<2)return!0;const kt=dt[0];for(let Tt=1;Tt<$t;Tt++){const Dt=dt[Tt];let Ft;if(Array.isArray(Dt))Ft=Br(this,q1,m$).call(this,Dt);else if(ar(this,Nn).has(Dt))Ft=ar(this,Nn).get(Dt).visible;else return warn(`Optional content group not found: ${Dt}`),!0;switch(kt){case"And":if(!Ft)return!1;break;case"Or":if(Ft)return!0;break;case"Not":return!Ft;default:return!0}}return kt==="And"};class PDFDataTransportStream{constructor(dt,{disableRange:$t=!1,disableStream:kt=!1}){assert(dt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:Tt,initialData:Dt,progressiveDone:Ft,contentDispositionFilename:Ut}=dt;if(this._queuedChunks=[],this._progressiveDone=Ft,this._contentDispositionFilename=Ut,(Dt==null?void 0:Dt.length)>0){const Ht=Dt instanceof Uint8Array&&Dt.byteLength===Dt.buffer.byteLength?Dt.buffer:new Uint8Array(Dt).buffer;this._queuedChunks.push(Ht)}this._pdfDataRangeTransport=dt,this._isStreamingSupported=!kt,this._isRangeSupported=!$t,this._contentLength=Tt,this._fullRequestReader=null,this._rangeReaders=[],dt.addRangeListener((Ht,Kt)=>{this._onReceiveData({begin:Ht,chunk:Kt})}),dt.addProgressListener((Ht,Kt)=>{this._onProgress({loaded:Ht,total:Kt})}),dt.addProgressiveReadListener(Ht=>{this._onReceiveData({chunk:Ht})}),dt.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),dt.transportReady()}_onReceiveData({begin:dt,chunk:$t}){const kt=$t instanceof Uint8Array&&$t.byteLength===$t.buffer.byteLength?$t.buffer:new Uint8Array($t).buffer;if(dt===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(kt):this._queuedChunks.push(kt);else{const Tt=this._rangeReaders.some(function(Dt){return Dt._begin!==dt?!1:(Dt._enqueue(kt),!0)});assert(Tt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}_onProgress(dt){var $t,kt,Tt,Dt;dt.total===void 0?(kt=($t=this._rangeReaders[0])==null?void 0:$t.onProgress)==null||kt.call($t,{loaded:dt.loaded}):(Dt=(Tt=this._fullRequestReader)==null?void 0:Tt.onProgress)==null||Dt.call(Tt,{loaded:dt.loaded,total:dt.total})}_onProgressiveDone(){var dt;(dt=this._fullRequestReader)==null||dt.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(dt){const $t=this._rangeReaders.indexOf(dt);$t>=0&&this._rangeReaders.splice($t,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const dt=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,dt,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(dt,$t){if($t<=this._progressiveDataLength)return null;const kt=new PDFDataTransportStreamRangeReader(this,dt,$t);return this._pdfDataRangeTransport.requestDataRange(dt,$t),this._rangeReaders.push(kt),kt}cancelAllRequests(dt){var $t;($t=this._fullRequestReader)==null||$t.cancel(dt);for(const kt of this._rangeReaders.slice(0))kt.cancel(dt);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(dt,$t,kt=!1,Tt=null){this._stream=dt,this._done=kt||!1,this._filename=isPdfFile(Tt)?Tt:null,this._queuedChunks=$t||[],this._loaded=0;for(const Dt of this._queuedChunks)this._loaded+=Dt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),dt._fullRequestReader=this,this.onProgress=null}_enqueue(dt){this._done||(this._requests.length>0?this._requests.shift().resolve({value:dt,done:!1}):this._queuedChunks.push(dt),this._loaded+=dt.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const dt=Promise.withResolvers();return this._requests.push(dt),dt.promise}cancel(dt){this._done=!0;for(const $t of this._requests)$t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(dt,$t,kt){this._stream=dt,this._begin=$t,this._end=kt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(dt){if(!this._done){if(this._requests.length===0)this._queuedChunk=dt;else{this._requests.shift().resolve({value:dt,done:!1});for(const kt of this._requests)kt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const $t=this._queuedChunk;return this._queuedChunk=null,{value:$t,done:!1}}if(this._done)return{value:void 0,done:!0};const dt=Promise.withResolvers();return this._requests.push(dt),dt.promise}cancel(dt){this._done=!0;for(const $t of this._requests)$t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(et){let dt=!0,$t=kt("filename\\*","i").exec(et);if($t){$t=$t[1];let Yt=Ut($t);return Yt=unescape(Yt),Yt=Ht(Yt),Yt=Kt(Yt),Dt(Yt)}if($t=Ft(et),$t){const Yt=Kt($t);return Dt(Yt)}if($t=kt("filename","i").exec(et),$t){$t=$t[1];let Yt=Ut($t);return Yt=Kt(Yt),Dt(Yt)}function kt(Yt,Jt){return new RegExp("(?:^|;)\\s*"+Yt+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Jt)}function Tt(Yt,Jt){if(Yt){if(!/^[\x00-\xFF]+$/.test(Jt))return Jt;try{const Zt=new TextDecoder(Yt,{fatal:!0}),er=stringToBytes(Jt);Jt=Zt.decode(er),dt=!1}catch{}}return Jt}function Dt(Yt){return dt&&/[\x80-\xff]/.test(Yt)&&(Yt=Tt("utf-8",Yt),dt&&(Yt=Tt("iso-8859-1",Yt))),Yt}function Ft(Yt){const Jt=[];let Zt;const er=kt("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Zt=er.exec(Yt))!==null;){let[,sr,nr,ir]=Zt;if(sr=parseInt(sr,10),sr in Jt){if(sr===0)break;continue}Jt[sr]=[nr,ir]}const rr=[];for(let sr=0;sr<Jt.length&&sr in Jt;++sr){let[nr,ir]=Jt[sr];ir=Ut(ir),nr&&(ir=unescape(ir),sr===0&&(ir=Ht(ir))),rr.push(ir)}return rr.join("")}function Ut(Yt){if(Yt.startsWith('"')){const Jt=Yt.slice(1).split('\\"');for(let Zt=0;Zt<Jt.length;++Zt){const er=Jt[Zt].indexOf('"');er!==-1&&(Jt[Zt]=Jt[Zt].slice(0,er),Jt.length=Zt+1),Jt[Zt]=Jt[Zt].replaceAll(/\\(.)/g,"$1")}Yt=Jt.join('"')}return Yt}function Ht(Yt){const Jt=Yt.indexOf("'");if(Jt===-1)return Yt;const Zt=Yt.slice(0,Jt),rr=Yt.slice(Jt+1).replace(/^[^']*'/,"");return Tt(Zt,rr)}function Kt(Yt){return!Yt.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Yt)?Yt:Yt.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Jt,Zt,er,rr){if(er==="q"||er==="Q")return rr=rr.replaceAll("_"," "),rr=rr.replaceAll(/=([0-9a-fA-F]{2})/g,function(sr,nr){return String.fromCharCode(parseInt(nr,16))}),Tt(Zt,rr);try{rr=atob(rr)}catch{}return Tt(Zt,rr)})}return""}function createHeaders(et,dt){const $t=new Headers;if(!et||!dt||typeof dt!="object")return $t;for(const kt in dt){const Tt=dt[kt];Tt!==void 0&&$t.append(kt,Tt)}return $t}function getResponseOrigin(et){var dt;return((dt=URL.parse(et))==null?void 0:dt.origin)??null}function validateRangeRequestCapabilities({responseHeaders:et,isHttp:dt,rangeChunkSize:$t,disableRange:kt}){const Tt={allowRangeRequests:!1,suggestedLength:void 0},Dt=parseInt(et.get("Content-Length"),10);return!Number.isInteger(Dt)||(Tt.suggestedLength=Dt,Dt<=2*$t)||kt||!dt||et.get("Accept-Ranges")!=="bytes"||(et.get("Content-Encoding")||"identity")!=="identity"||(Tt.allowRangeRequests=!0),Tt}function extractFilenameFromHeader(et){const dt=et.get("Content-Disposition");if(dt){let $t=getFilenameFromContentDispositionHeader(dt);if($t.includes("%"))try{$t=decodeURIComponent($t)}catch{}if(isPdfFile($t))return $t}return null}function createResponseError(et,dt){return new ResponseException(`Unexpected server response (${et}) while retrieving PDF "${dt}".`,et,et===404||et===0&&dt.startsWith("file:"))}function validateResponseStatus(et){return et===200||et===206}function createFetchOptions(et,dt,$t){return{method:"GET",headers:et,signal:$t.signal,mode:"cors",credentials:dt?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(et){return et instanceof Uint8Array?et.buffer:et instanceof ArrayBuffer?et:(warn(`getArrayBuffer - unexpected data format: ${et}`),new Uint8Array(et).buffer)}class PDFFetchStream{constructor(dt){Es(this,"_responseOrigin",null);this.source=dt,this.isHttp=/^https?:/i.test(dt.url),this.headers=createHeaders(this.isHttp,dt.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(dt,$t){if($t<=this._progressiveDataLength)return null;const kt=new PDFFetchStreamRangeReader(this,dt,$t);return this._rangeRequestReaders.push(kt),kt}cancelAllRequests(dt){var $t;($t=this._fullRequestReader)==null||$t.cancel(dt);for(const kt of this._rangeRequestReaders.slice(0))kt.cancel(dt)}}class PDFFetchStreamReader{constructor(dt){this._stream=dt,this._reader=null,this._loaded=0,this._filename=null;const $t=dt.source;this._withCredentials=$t.withCredentials||!1,this._contentLength=$t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=$t.disableRange||!1,this._rangeChunkSize=$t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!$t.disableStream,this._isRangeSupported=!$t.disableRange;const kt=new Headers(dt.headers),Tt=$t.url;fetch(Tt,createFetchOptions(kt,this._withCredentials,this._abortController)).then(Dt=>{if(dt._responseOrigin=getResponseOrigin(Dt.url),!validateResponseStatus(Dt.status))throw createResponseError(Dt.status,Tt);this._reader=Dt.body.getReader(),this._headersCapability.resolve();const Ft=Dt.headers,{allowRangeRequests:Ut,suggestedLength:Ht}=validateRangeRequestCapabilities({responseHeaders:Ft,isHttp:dt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Ut,this._contentLength=Ht||this._contentLength,this._filename=extractFilenameFromHeader(Ft),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var kt;await this._headersCapability.promise;const{value:dt,done:$t}=await this._reader.read();return $t?{value:dt,done:$t}:(this._loaded+=dt.byteLength,(kt=this.onProgress)==null||kt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(dt),done:!1})}cancel(dt){var $t;($t=this._reader)==null||$t.cancel(dt),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(dt,$t,kt){this._stream=dt,this._reader=null,this._loaded=0;const Tt=dt.source;this._withCredentials=Tt.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!Tt.disableStream,this._abortController=new AbortController;const Dt=new Headers(dt.headers);Dt.append("Range",`bytes=${$t}-${kt-1}`);const Ft=Tt.url;fetch(Ft,createFetchOptions(Dt,this._withCredentials,this._abortController)).then(Ut=>{const Ht=getResponseOrigin(Ut.url);if(Ht!==dt._responseOrigin)throw new Error(`Expected range response-origin "${Ht}" to match "${dt._responseOrigin}".`);if(!validateResponseStatus(Ut.status))throw createResponseError(Ut.status,Ft);this._readCapability.resolve(),this._reader=Ut.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var kt;await this._readCapability.promise;const{value:dt,done:$t}=await this._reader.read();return $t?{value:dt,done:$t}:(this._loaded+=dt.byteLength,(kt=this.onProgress)==null||kt.call(this,{loaded:this._loaded}),{value:getArrayBuffer(dt),done:!1})}cancel(dt){var $t;($t=this._reader)==null||$t.cancel(dt),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(et){const dt=et.response;return typeof dt!="string"?dt:stringToBytes(dt).buffer}class NetworkManager{constructor({url:dt,httpHeaders:$t,withCredentials:kt}){Es(this,"_responseOrigin",null);this.url=dt,this.isHttp=/^https?:/i.test(dt),this.headers=createHeaders(this.isHttp,$t),this.withCredentials=kt||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(dt){const $t=new XMLHttpRequest,kt=this.currXhrId++,Tt=this.pendingRequests[kt]={xhr:$t};$t.open("GET",this.url),$t.withCredentials=this.withCredentials;for(const[Dt,Ft]of this.headers)$t.setRequestHeader(Dt,Ft);return this.isHttp&&"begin"in dt&&"end"in dt?($t.setRequestHeader("Range",`bytes=${dt.begin}-${dt.end-1}`),Tt.expectedStatus=PARTIAL_CONTENT_RESPONSE):Tt.expectedStatus=OK_RESPONSE,$t.responseType="arraybuffer",assert(dt.onError,"Expected `onError` callback to be provided."),$t.onerror=()=>{dt.onError($t.status)},$t.onreadystatechange=this.onStateChange.bind(this,kt),$t.onprogress=this.onProgress.bind(this,kt),Tt.onHeadersReceived=dt.onHeadersReceived,Tt.onDone=dt.onDone,Tt.onError=dt.onError,Tt.onProgress=dt.onProgress,$t.send(null),kt}onProgress(dt,$t){var Tt;const kt=this.pendingRequests[dt];kt&&((Tt=kt.onProgress)==null||Tt.call(kt,$t))}onStateChange(dt,$t){const kt=this.pendingRequests[dt];if(!kt)return;const Tt=kt.xhr;if(Tt.readyState>=2&&kt.onHeadersReceived&&(kt.onHeadersReceived(),delete kt.onHeadersReceived),Tt.readyState!==4||!(dt in this.pendingRequests))return;if(delete this.pendingRequests[dt],Tt.status===0&&this.isHttp){kt.onError(Tt.status);return}const Dt=Tt.status||OK_RESPONSE;if(!(Dt===OK_RESPONSE&&kt.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&Dt!==kt.expectedStatus){kt.onError(Tt.status);return}const Ut=network_getArrayBuffer(Tt);if(Dt===PARTIAL_CONTENT_RESPONSE){const Ht=Tt.getResponseHeader("Content-Range"),Kt=/bytes (\d+)-(\d+)\/(\d+)/.exec(Ht);Kt?kt.onDone({begin:parseInt(Kt[1],10),chunk:Ut}):(warn('Missing or invalid "Content-Range" header.'),kt.onError(0))}else Ut?kt.onDone({begin:0,chunk:Ut}):kt.onError(Tt.status)}getRequestXhr(dt){return this.pendingRequests[dt].xhr}isPendingRequest(dt){return dt in this.pendingRequests}abortRequest(dt){const $t=this.pendingRequests[dt].xhr;delete this.pendingRequests[dt],$t.abort()}}class PDFNetworkStream{constructor(dt){this._source=dt,this._manager=new NetworkManager(dt),this._rangeChunkSize=dt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(dt){const $t=this._rangeRequestReaders.indexOf(dt);$t>=0&&this._rangeRequestReaders.splice($t,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(dt,$t){const kt=new PDFNetworkStreamRangeRequestReader(this._manager,dt,$t);return kt.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(kt),kt}cancelAllRequests(dt){var $t;($t=this._fullRequestReader)==null||$t.cancel(dt);for(const kt of this._rangeRequestReaders.slice(0))kt.cancel(dt)}}class PDFNetworkStreamFullRequestReader{constructor(dt,$t){this._manager=dt,this._url=$t.url,this._fullRequestId=dt.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=$t.disableRange||!1,this._contentLength=$t.length,this._rangeChunkSize=$t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const dt=this._fullRequestId,$t=this._manager.getRequestXhr(dt);this._manager._responseOrigin=getResponseOrigin($t.responseURL);const kt=$t.getAllResponseHeaders(),Tt=new Headers(kt?kt.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(Ut=>{const[Ht,...Kt]=Ut.split(": ");return[Ht,Kt.join(": ")]}):[]),{allowRangeRequests:Dt,suggestedLength:Ft}=validateRangeRequestCapabilities({responseHeaders:Tt,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Dt&&(this._isRangeSupported=!0),this._contentLength=Ft||this._contentLength,this._filename=extractFilenameFromHeader(Tt),this._isRangeSupported&&this._manager.abortRequest(dt),this._headersCapability.resolve()}_onDone(dt){if(dt&&(this._requests.length>0?this._requests.shift().resolve({value:dt.chunk,done:!1}):this._cachedChunks.push(dt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const $t of this._requests)$t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(dt){this._storedError=createResponseError(dt,this._url),this._headersCapability.reject(this._storedError);for(const $t of this._requests)$t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(dt){var $t;($t=this.onProgress)==null||$t.call(this,{loaded:dt.loaded,total:dt.lengthComputable?dt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const dt=Promise.withResolvers();return this._requests.push(dt),dt.promise}cancel(dt){this._done=!0,this._headersCapability.reject(dt);for(const $t of this._requests)$t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(dt,$t,kt){this._manager=dt,this._url=dt.url,this._requestId=dt.request({begin:$t,end:kt,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var $t;const dt=getResponseOrigin(($t=this._manager.getRequestXhr(this._requestId))==null?void 0:$t.responseURL);dt!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${dt}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var dt;(dt=this.onClosed)==null||dt.call(this,this)}_onDone(dt){const $t=dt.chunk;this._requests.length>0?this._requests.shift().resolve({value:$t,done:!1}):this._queuedChunk=$t,this._done=!0;for(const kt of this._requests)kt.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(dt){this._storedError??(this._storedError=createResponseError(dt,this._url));for(const $t of this._requests)$t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(dt){var $t;this.isStreamingSupported||($t=this.onProgress)==null||$t.call(this,{loaded:dt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const $t=this._queuedChunk;return this._queuedChunk=null,{value:$t,done:!1}}if(this._done)return{value:void 0,done:!0};const dt=Promise.withResolvers();return this._requests.push(dt),dt.promise}cancel(dt){this._done=!0;for(const $t of this._requests)$t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(et){if(urlRegex.test(et))return new URL(et);const dt=process.getBuiltinModule("url");return new URL(dt.pathToFileURL(et))}class PDFNodeStream{constructor(dt){this.source=dt,this.url=parseUrlOrPath(dt.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dt;return((dt=this._fullRequestReader)==null?void 0:dt._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(dt,$t){if($t<=this._progressiveDataLength)return null;const kt=new PDFNodeStreamFsRangeReader(this,dt,$t);return this._rangeRequestReaders.push(kt),kt}cancelAllRequests(dt){var $t;($t=this._fullRequestReader)==null||$t.cancel(dt);for(const kt of this._rangeRequestReaders.slice(0))kt.cancel(dt)}}class PDFNodeStreamFsFullReader{constructor(dt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null;const $t=dt.source;this._contentLength=$t.length,this._loaded=0,this._filename=null,this._disableRange=$t.disableRange||!1,this._rangeChunkSize=$t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!$t.disableStream,this._isRangeSupported=!$t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const kt=process.getBuiltinModule("fs");kt.promises.lstat(this._url).then(Tt=>{this._contentLength=Tt.size,this._setReadableStream(kt.createReadStream(this._url)),this._headersCapability.resolve()},Tt=>{Tt.code==="ENOENT"&&(Tt=createResponseError(0,this._url.href)),this._storedError=Tt,this._headersCapability.reject(Tt)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var kt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=dt.length,(kt=this.onProgress)==null||kt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",$t=>{this._error($t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(dt,$t,kt){this._url=dt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const Tt=dt.source;this._isStreamingSupported=!Tt.disableStream;const Dt=process.getBuiltinModule("fs");this._setReadableStream(Dt.createReadStream(this._url,{start:$t,end:kt-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var kt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const dt=this._readableStream.read();return dt===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=dt.length,(kt=this.onProgress)==null||kt.call(this,{loaded:this._loaded}),{value:new Uint8Array(dt).buffer,done:!1})}cancel(dt){if(!this._readableStream){this._error(dt);return}this._readableStream.destroy(dt)}_error(dt){this._storedError=dt,this._readCapability.resolve()}_setReadableStream(dt){this._readableStream=dt,dt.on("readable",()=>{this._readCapability.resolve()}),dt.on("end",()=>{dt.destroy(),this._done=!0,this._readCapability.resolve()}),dt.on("error",$t=>{this._error($t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var xl,K1,x$;class PDFObjects{constructor(){yr(this,K1);yr(this,xl,Object.create(null))}get(dt,$t=null){if($t){const Tt=Br(this,K1,x$).call(this,dt);return Tt.promise.then(()=>$t(Tt.data)),null}const kt=ar(this,xl)[dt];if(!kt||kt.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${dt}.`);return kt.data}has(dt){const $t=ar(this,xl)[dt];return!!$t&&$t.data!==INITIAL_DATA}delete(dt){const $t=ar(this,xl)[dt];return!$t||$t.data===INITIAL_DATA?!1:(delete ar(this,xl)[dt],!0)}resolve(dt,$t=null){const kt=Br(this,K1,x$).call(this,dt);kt.data=$t,kt.resolve()}clear(){var dt;for(const $t in ar(this,xl)){const{data:kt}=ar(this,xl)[$t];(dt=kt==null?void 0:kt.bitmap)==null||dt.close()}vr(this,xl,Object.create(null))}*[Symbol.iterator](){for(const dt in ar(this,xl)){const{data:$t}=ar(this,xl)[dt];$t!==INITIAL_DATA&&(yield[dt,$t])}}}xl=new WeakMap,K1=new WeakSet,x$=function(dt){var $t;return($t=ar(this,xl))[dt]||($t[dt]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var rS,Yp,Ho,Y1,X1,bx,tp,Q1,J1,yx,uy,hy,Xp,py,Z1,fy,vx,eE,tE,Wn,my,Ex,rE,Qp,xy,DR,US,FR,HS,sE,g$,gy,_w,nE,b$,LR,GS,OR,qS;let TextLayer$1=(Wn=class{constructor({textContentSource:dt,container:$t,viewport:kt}){yr(this,DR);yr(this,FR);yr(this,sE);yr(this,Yp,Promise.withResolvers());yr(this,Ho,null);yr(this,Y1,!1);yr(this,X1,!!((rS=globalThis.FontInspector)!=null&&rS.enabled));yr(this,bx,null);yr(this,tp,null);yr(this,Q1,0);yr(this,J1,0);yr(this,yx,null);yr(this,uy,null);yr(this,hy,0);yr(this,Xp,0);yr(this,py,Object.create(null));yr(this,Z1,[]);yr(this,fy,null);yr(this,vx,[]);yr(this,eE,new WeakMap);yr(this,tE,null);var Ht;if(dt instanceof ReadableStream)vr(this,fy,dt);else if(typeof dt=="object")vr(this,fy,new ReadableStream({start(Kt){Kt.enqueue(dt),Kt.close()}}));else throw new Error('No "textContentSource" parameter specified.');vr(this,Ho,vr(this,uy,$t)),vr(this,Xp,kt.scale*OutputScale.pixelRatio),vr(this,hy,kt.rotation),vr(this,tp,{div:null,properties:null,ctx:null});const{pageWidth:Tt,pageHeight:Dt,pageX:Ft,pageY:Ut}=kt.rawDims;vr(this,tE,[1,0,0,-1,-Ft,Ut+Dt]),vr(this,J1,Tt),vr(this,Q1,Dt),Br(Ht=Wn,LR,GS).call(Ht),setLayerDimensions($t,kt),ar(this,Yp).promise.finally(()=>{ar(Wn,xy).delete(this),vr(this,tp,null),vr(this,py,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:dt,isFirefox:$t}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${dt&&$t?"Calibri, ":""}sans-serif`],["monospace",`${dt&&$t?"Lucida Console, ":""}monospace`]]))}render(){const dt=()=>{ar(this,yx).read().then(({value:$t,done:kt})=>{if(kt){ar(this,Yp).resolve();return}ar(this,bx)??vr(this,bx,$t.lang),Object.assign(ar(this,py),$t.styles),Br(this,DR,US).call(this,$t.items),dt()},ar(this,Yp).reject)};return vr(this,yx,ar(this,fy).getReader()),ar(Wn,xy).add(this),dt(),ar(this,Yp).promise}update({viewport:dt,onBefore:$t=null}){var Dt;const kt=dt.scale*OutputScale.pixelRatio,Tt=dt.rotation;if(Tt!==ar(this,hy)&&($t==null||$t(),vr(this,hy,Tt),setLayerDimensions(ar(this,uy),{rotation:Tt})),kt!==ar(this,Xp)){$t==null||$t(),vr(this,Xp,kt);const Ft={div:null,properties:null,ctx:Br(Dt=Wn,gy,_w).call(Dt,ar(this,bx))};for(const Ut of ar(this,vx))Ft.properties=ar(this,eE).get(Ut),Ft.div=Ut,Br(this,sE,g$).call(this,Ft)}}cancel(){var $t;const dt=new AbortException("TextLayer task cancelled.");($t=ar(this,yx))==null||$t.cancel(dt).catch(()=>{}),vr(this,yx,null),ar(this,Yp).reject(dt)}get textDivs(){return ar(this,vx)}get textContentItemsStr(){return ar(this,Z1)}static cleanup(){if(!(ar(this,xy).size>0)){ar(this,my).clear();for(const{canvas:dt}of ar(this,Ex).values())dt.remove();ar(this,Ex).clear()}}},Yp=new WeakMap,Ho=new WeakMap,Y1=new WeakMap,X1=new WeakMap,bx=new WeakMap,tp=new WeakMap,Q1=new WeakMap,J1=new WeakMap,yx=new WeakMap,uy=new WeakMap,hy=new WeakMap,Xp=new WeakMap,py=new WeakMap,Z1=new WeakMap,fy=new WeakMap,vx=new WeakMap,eE=new WeakMap,tE=new WeakMap,my=new WeakMap,Ex=new WeakMap,rE=new WeakMap,Qp=new WeakMap,xy=new WeakMap,DR=new WeakSet,US=function(dt){var Tt,Dt;if(ar(this,Y1))return;(Dt=ar(this,tp)).ctx??(Dt.ctx=Br(Tt=Wn,gy,_w).call(Tt,ar(this,bx)));const $t=ar(this,vx),kt=ar(this,Z1);for(const Ft of dt){if($t.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),vr(this,Y1,!0);return}if(Ft.str===void 0){if(Ft.type==="beginMarkedContentProps"||Ft.type==="beginMarkedContent"){const Ut=ar(this,Ho);vr(this,Ho,document.createElement("span")),ar(this,Ho).classList.add("markedContent"),Ft.id&&ar(this,Ho).setAttribute("id",`${Ft.id}`),Ut.append(ar(this,Ho))}else Ft.type==="endMarkedContent"&&vr(this,Ho,ar(this,Ho).parentNode);continue}kt.push(Ft.str),Br(this,FR,HS).call(this,Ft)}},FR=new WeakSet,HS=function(dt){var sr;const $t=document.createElement("span"),kt={angle:0,canvasWidth:0,hasText:dt.str!=="",hasEOL:dt.hasEOL,fontSize:0};ar(this,vx).push($t);const Tt=Util.transform(ar(this,tE),dt.transform);let Dt=Math.atan2(Tt[1],Tt[0]);const Ft=ar(this,py)[dt.fontName];Ft.vertical&&(Dt+=Math.PI/2);let Ut=ar(this,X1)&&Ft.fontSubstitution||Ft.fontFamily;Ut=Wn.fontFamilyMap.get(Ut)||Ut;const Ht=Math.hypot(Tt[2],Tt[3]),Kt=Ht*Br(sr=Wn,OR,qS).call(sr,Ut,Ft,ar(this,bx));let Yt,Jt;Dt===0?(Yt=Tt[4],Jt=Tt[5]-Kt):(Yt=Tt[4]+Kt*Math.sin(Dt),Jt=Tt[5]-Kt*Math.cos(Dt));const Zt="calc(var(--total-scale-factor) *",er=$t.style;ar(this,Ho)===ar(this,uy)?(er.left=`${(100*Yt/ar(this,J1)).toFixed(2)}%`,er.top=`${(100*Jt/ar(this,Q1)).toFixed(2)}%`):(er.left=`${Zt}${Yt.toFixed(2)}px)`,er.top=`${Zt}${Jt.toFixed(2)}px)`),er.fontSize=`${Zt}${(ar(Wn,Qp)*Ht).toFixed(2)}px)`,er.fontFamily=Ut,kt.fontSize=Ht,$t.setAttribute("role","presentation"),$t.textContent=dt.str,$t.dir=dt.dir,ar(this,X1)&&($t.dataset.fontName=Ft.fontSubstitutionLoadedName||dt.fontName),Dt!==0&&(kt.angle=Dt*(180/Math.PI));let rr=!1;if(dt.str.length>1)rr=!0;else if(dt.str!==" "&&dt.transform[0]!==dt.transform[3]){const nr=Math.abs(dt.transform[0]),ir=Math.abs(dt.transform[3]);nr!==ir&&Math.max(nr,ir)/Math.min(nr,ir)>1.5&&(rr=!0)}if(rr&&(kt.canvasWidth=Ft.vertical?dt.height:dt.width),ar(this,eE).set($t,kt),ar(this,tp).div=$t,ar(this,tp).properties=kt,Br(this,sE,g$).call(this,ar(this,tp)),kt.hasText&&ar(this,Ho).append($t),kt.hasEOL){const nr=document.createElement("br");nr.setAttribute("role","presentation"),ar(this,Ho).append(nr)}},sE=new WeakSet,g$=function(dt){var Ut;const{div:$t,properties:kt,ctx:Tt}=dt,{style:Dt}=$t;let Ft="";if(ar(Wn,Qp)>1&&(Ft=`scale(${1/ar(Wn,Qp)})`),kt.canvasWidth!==0&&kt.hasText){const{fontFamily:Ht}=Dt,{canvasWidth:Kt,fontSize:Yt}=kt;Br(Ut=Wn,nE,b$).call(Ut,Tt,Yt*ar(this,Xp),Ht);const{width:Jt}=Tt.measureText($t.textContent);Jt>0&&(Ft=`scaleX(${Kt*ar(this,Xp)/Jt}) ${Ft}`)}kt.angle!==0&&(Ft=`rotate(${kt.angle}deg) ${Ft}`),Ft.length>0&&(Dt.transform=Ft)},gy=new WeakSet,_w=function(dt=null){let $t=ar(this,Ex).get(dt||(dt=""));if(!$t){const kt=document.createElement("canvas");kt.className="hiddenCanvasElement",kt.lang=dt,document.body.append(kt),$t=kt.getContext("2d",{alpha:!1,willReadFrequently:!0}),ar(this,Ex).set(dt,$t),ar(this,rE).set($t,{size:0,family:""})}return $t},nE=new WeakSet,b$=function(dt,$t,kt){const Tt=ar(this,rE).get(dt);$t===Tt.size&&kt===Tt.family||(dt.font=`${$t}px ${kt}`,Tt.size=$t,Tt.family=kt)},LR=new WeakSet,GS=function(){if(ar(this,Qp)!==null)return;const dt=document.createElement("div");dt.style.opacity=0,dt.style.lineHeight=1,dt.style.fontSize="1px",dt.style.position="absolute",dt.textContent="X",document.body.append(dt),vr(this,Qp,dt.getBoundingClientRect().height),dt.remove()},OR=new WeakSet,qS=function(dt,$t,kt){const Tt=ar(this,my).get(dt);if(Tt)return Tt;const Dt=Br(this,gy,_w).call(this,kt);Dt.canvas.width=Dt.canvas.height=DEFAULT_FONT_SIZE,Br(this,nE,b$).call(this,Dt,DEFAULT_FONT_SIZE,dt);const Ft=Dt.measureText(""),Ut=Ft.fontBoundingBoxAscent,Ht=Math.abs(Ft.fontBoundingBoxDescent);Dt.canvas.width=Dt.canvas.height=0;let Kt=.8;return Ut?Kt=Ut/(Ut+Ht):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),$t.ascent?Kt=$t.ascent:$t.descent&&(Kt=1+$t.descent)),ar(this,my).set(dt,Kt),Kt},yr(Wn,gy),yr(Wn,nE),yr(Wn,LR),yr(Wn,OR),yr(Wn,my,new Map),yr(Wn,Ex,new Map),yr(Wn,rE,new WeakMap),yr(Wn,Qp,null),yr(Wn,xy,new Set),Wn);const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(et={}){typeof et=="string"||et instanceof URL?et={url:et}:(et instanceof ArrayBuffer||ArrayBuffer.isView(et))&&(et={data:et});const dt=new PDFDocumentLoadingTask,{docId:$t}=dt,kt=et.url?getUrlProp(et.url):null,Tt=et.data?getDataProp(et.data):null,Dt=et.httpHeaders||null,Ft=et.withCredentials===!0,Ut=et.password??null,Ht=et.range instanceof PDFDataRangeTransport$1?et.range:null,Kt=Number.isInteger(et.rangeChunkSize)&&et.rangeChunkSize>0?et.rangeChunkSize:2**16;let Yt=et.worker instanceof PDFWorker?et.worker:null;const Jt=et.verbosity,Zt=typeof et.docBaseUrl=="string"&&!isDataScheme(et.docBaseUrl)?et.docBaseUrl:null,er=getFactoryUrlProp(et.cMapUrl),rr=et.cMapPacked!==!1,sr=et.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),nr=getFactoryUrlProp(et.iccUrl),ir=getFactoryUrlProp(et.standardFontDataUrl),or=et.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),lr=getFactoryUrlProp(et.wasmUrl),cr=et.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),dr=et.stopAtErrors!==!0,ur=Number.isInteger(et.maxImageSize)&&et.maxImageSize>-1?et.maxImageSize:-1,pr=et.isEvalSupported!==!1,mr=typeof et.isOffscreenCanvasSupported=="boolean"?et.isOffscreenCanvasSupported:!isNodeJS,jr=typeof et.isImageDecoderSupported=="boolean"?et.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),Rr=Number.isInteger(et.canvasMaxAreaInBytes)?et.canvasMaxAreaInBytes:-1,xr=typeof et.disableFontFace=="boolean"?et.disableFontFace:isNodeJS,kr=et.fontExtraProperties===!0,Mr=et.enableXfa===!0,Tr=et.ownerDocument||globalThis.document,Or=et.disableRange===!0,_r=et.disableStream===!0,Pr=et.disableAutoFetch===!0,br=et.pdfBug===!0,wr=et.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),zr=et.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),Hr=et.enableHWA===!0,Yr=et.useWasm!==!1,es=Ht?Ht.length:et.length??NaN,rs=typeof et.useSystemFonts=="boolean"?et.useSystemFonts:!isNodeJS&&!xr,Wr=typeof et.useWorkerFetch=="boolean"?et.useWorkerFetch:!!(sr===DOMCMapReaderFactory&&or===DOMStandardFontDataFactory&&cr===DOMWasmFactory&&er&&ir&&lr&&isValidFetchUrl(er,document.baseURI)&&isValidFetchUrl(ir,document.baseURI)&&isValidFetchUrl(lr,document.baseURI)),Xr=null;setVerbosityLevel(Jt);const ns={canvasFactory:new wr({ownerDocument:Tr,enableHWA:Hr}),filterFactory:new zr({docId:$t,ownerDocument:Tr}),cMapReaderFactory:Wr?null:new sr({baseUrl:er,isCompressed:rr}),standardFontDataFactory:Wr?null:new or({baseUrl:ir}),wasmFactory:Wr?null:new cr({baseUrl:lr})};Yt||(Yt=PDFWorker.create({verbosity:Jt,port:GlobalWorkerOptions.workerPort}),dt._worker=Yt);const gs={docId:$t,apiVersion:"5.4.296",data:Tt,password:Ut,disableAutoFetch:Pr,rangeChunkSize:Kt,length:es,docBaseUrl:Zt,enableXfa:Mr,evaluatorOptions:{maxImageSize:ur,disableFontFace:xr,ignoreErrors:dr,isEvalSupported:pr,isOffscreenCanvasSupported:mr,isImageDecoderSupported:jr,canvasMaxAreaInBytes:Rr,fontExtraProperties:kr,useSystemFonts:rs,useWasm:Yr,useWorkerFetch:Wr,cMapUrl:er,iccUrl:nr,standardFontDataUrl:ir,wasmUrl:lr}},us={ownerDocument:Tr,pdfBug:br,styleElement:Xr,loadingParams:{disableAutoFetch:Pr,enableXfa:Mr}};return Yt.promise.then(function(){if(dt.destroyed)throw new Error("Loading aborted");if(Yt.destroyed)throw new Error("Worker was destroyed");const ps=Yt.messageHandler.sendWithPromise("GetDocRequest",gs,Tt?[Tt.buffer]:null);let cs;if(Ht)cs=new PDFDataTransportStream(Ht,{disableRange:Or,disableStream:_r});else if(!Tt){if(!kt)throw new Error("getDocument - no `url` parameter provided.");const ss=isValidFetchUrl(kt)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;cs=new ss({url:kt,length:es,httpHeaders:Dt,withCredentials:Ft,rangeChunkSize:Kt,disableRange:Or,disableStream:_r})}return ps.then(ss=>{if(dt.destroyed)throw new Error("Loading aborted");if(Yt.destroyed)throw new Error("Worker was destroyed");const fs=new MessageHandler($t,ss,Yt.port),hs=new WorkerTransport(fs,dt,cs,us,ns,Hr);dt._transport=hs,fs.send("Ready",null)})}).catch(dt._capability.reject),dt}var BR;const VR=class VR{constructor(){Es(this,"_capability",Promise.withResolvers());Es(this,"_transport",null);Es(this,"_worker",null);Es(this,"docId",`d${ga(VR,BR)._++}`);Es(this,"destroyed",!1);Es(this,"onPassword",null);Es(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var dt,$t,kt,Tt;this.destroyed=!0;try{(dt=this._worker)!=null&&dt.port&&(this._worker._pendingDestroy=!0),await(($t=this._transport)==null?void 0:$t.destroy())}catch(Dt){throw(kt=this._worker)!=null&&kt.port&&delete this._worker._pendingDestroy,Dt}this._transport=null,(Tt=this._worker)==null||Tt.destroy(),this._worker=null}async getData(){return this._transport.getData()}};BR=new WeakMap,yr(VR,BR,0);let PDFDocumentLoadingTask=VR;var jx,iE,aE,oE,lE,sS;let PDFDataRangeTransport$1=(sS=class{constructor(dt,$t,kt=!1,Tt=null){yr(this,jx,Promise.withResolvers());yr(this,iE,[]);yr(this,aE,[]);yr(this,oE,[]);yr(this,lE,[]);this.length=dt,this.initialData=$t,this.progressiveDone=kt,this.contentDispositionFilename=Tt}addRangeListener(dt){ar(this,lE).push(dt)}addProgressListener(dt){ar(this,oE).push(dt)}addProgressiveReadListener(dt){ar(this,aE).push(dt)}addProgressiveDoneListener(dt){ar(this,iE).push(dt)}onDataRange(dt,$t){for(const kt of ar(this,lE))kt(dt,$t)}onDataProgress(dt,$t){ar(this,jx).promise.then(()=>{for(const kt of ar(this,oE))kt(dt,$t)})}onDataProgressiveRead(dt){ar(this,jx).promise.then(()=>{for(const $t of ar(this,aE))$t(dt)})}onDataProgressiveDone(){ar(this,jx).promise.then(()=>{for(const dt of ar(this,iE))dt()})}transportReady(){ar(this,jx).resolve()}requestDataRange(dt,$t){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},jx=new WeakMap,iE=new WeakMap,aE=new WeakMap,oE=new WeakMap,lE=new WeakMap,sS);class PDFDocumentProxy{constructor(dt,$t){this._pdfInfo=dt,this._transport=$t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(dt){return this._transport.getPage(dt)}getPageIndex(dt){return this._transport.getPageIndex(dt)}getDestinations(){return this._transport.getDestinations()}getDestination(dt){return this._transport.getDestination(dt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(dt,$t){return this._transport.getAnnotationsByType(dt,$t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:dt="display"}={}){const{renderingIntent:$t}=this._transport.getRenderingIntent(dt);return this._transport.getOptionalContentConfig($t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(dt=!1){return this._transport.startCleanup(dt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(dt){return this._transport.cachedPageNumber(dt)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var rp,wx,Pv;class PDFPageProxy{constructor(dt,$t,kt,Tt=!1){yr(this,wx);yr(this,rp,!1);this._pageIndex=dt,this._pageInfo=$t,this._transport=kt,this._stats=Tt?new StatTimer:null,this._pdfBug=Tt,this.commonObjs=kt.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:dt,rotation:$t=this.rotate,offsetX:kt=0,offsetY:Tt=0,dontFlip:Dt=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:dt,rotation:$t,offsetX:kt,offsetY:Tt,dontFlip:Dt})}getAnnotations({intent:dt="display"}={}){const{renderingIntent:$t}=this._transport.getRenderingIntent(dt);return this._transport.getAnnotations(this._pageIndex,$t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var dt;return((dt=this._transport._htmlForXfa)==null?void 0:dt.children[this._pageIndex])||null}render({canvasContext:dt,canvas:$t=dt.canvas,viewport:kt,intent:Tt="display",annotationMode:Dt=AnnotationMode.ENABLE,transform:Ft=null,background:Ut=null,optionalContentConfigPromise:Ht=null,annotationCanvasMap:Kt=null,pageColors:Yt=null,printAnnotationStorage:Jt=null,isEditing:Zt=!1,recordOperations:er=!1,operationsFilter:rr=null}){var jr,Rr,xr;(jr=this._stats)==null||jr.time("Overall");const sr=this._transport.getRenderingIntent(Tt,Dt,Jt,Zt),{renderingIntent:nr,cacheKey:ir}=sr;vr(this,rp,!1),Ht||(Ht=this._transport.getOptionalContentConfig(nr));let or=this._intentStates.get(ir);or||(or=Object.create(null),this._intentStates.set(ir,or)),or.streamReaderCancelTimeout&&(clearTimeout(or.streamReaderCancelTimeout),or.streamReaderCancelTimeout=null);const lr=!!(nr&RenderingIntentFlag.PRINT);or.displayReadyCapability||(or.displayReadyCapability=Promise.withResolvers(),or.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Rr=this._stats)==null||Rr.time("Page Request"),this._pumpOperatorList(sr));const cr=!!(this._pdfBug&&((xr=globalThis.StepperManager)!=null&&xr.enabled)),dr=!this.recordedBBoxes&&(er||cr),ur=kr=>{var Mr,Tr;if(or.renderTasks.delete(pr),dr){const Or=(Mr=pr.gfx)==null?void 0:Mr.dependencyTracker.take();Or&&(pr.stepper&&pr.stepper.setOperatorBBoxes(Or,pr.gfx.dependencyTracker.takeDebugMetadata()),er&&(this.recordedBBoxes=Or))}lr&&vr(this,rp,!0),Br(this,wx,Pv).call(this),kr?(pr.capability.reject(kr),this._abortOperatorList({intentState:or,reason:kr instanceof Error?kr:new Error(kr)})):pr.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Tr=globalThis.Stats)!=null&&Tr.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},pr=new InternalRenderTask({callback:ur,params:{canvas:$t,canvasContext:dt,dependencyTracker:dr?new CanvasDependencyTracker($t,or.operatorList.length,cr):null,viewport:kt,transform:Ft,background:Ut},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Kt,operatorList:or.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!lr,pdfBug:this._pdfBug,pageColors:Yt,enableHWA:this._transport.enableHWA,operationsFilter:rr});(or.renderTasks||(or.renderTasks=new Set)).add(pr);const mr=pr.task;return Promise.all([or.displayReadyCapability.promise,Ht]).then(([kr,Mr])=>{var Tr;if(this.destroyed){ur();return}if((Tr=this._stats)==null||Tr.time("Rendering"),!(Mr.renderingIntent&nr))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");pr.initializeGraphics({transparency:kr,optionalContentConfig:Mr}),pr.operatorListChanged()}).catch(ur),mr}getOperatorList({intent:dt="display",annotationMode:$t=AnnotationMode.ENABLE,printAnnotationStorage:kt=null,isEditing:Tt=!1}={}){var Kt;function Dt(){Ut.operatorList.lastChunk&&(Ut.opListReadCapability.resolve(Ut.operatorList),Ut.renderTasks.delete(Ht))}const Ft=this._transport.getRenderingIntent(dt,$t,kt,Tt,!0);let Ut=this._intentStates.get(Ft.cacheKey);Ut||(Ut=Object.create(null),this._intentStates.set(Ft.cacheKey,Ut));let Ht;return Ut.opListReadCapability||(Ht=Object.create(null),Ht.operatorListChanged=Dt,Ut.opListReadCapability=Promise.withResolvers(),(Ut.renderTasks||(Ut.renderTasks=new Set)).add(Ht),Ut.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Kt=this._stats)==null||Kt.time("Page Request"),this._pumpOperatorList(Ft)),Ut.opListReadCapability.promise}streamTextContent({includeMarkedContent:dt=!1,disableNormalization:$t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:dt===!0,disableNormalization:$t===!0},{highWaterMark:100,size(Tt){return Tt.items.length}})}getTextContent(dt={}){if(this._transport._htmlForXfa)return this.getXfa().then(kt=>XfaText.textContent(kt));const $t=this.streamTextContent(dt);return new Promise(function(kt,Tt){function Dt(){Ft.read().then(function({value:Ht,done:Kt}){if(Kt){kt(Ut);return}Ut.lang??(Ut.lang=Ht.lang),Object.assign(Ut.styles,Ht.styles),Ut.items.push(...Ht.items),Dt()},Tt)}const Ft=$t.getReader(),Ut={items:[],styles:Object.create(null),lang:null};Dt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const dt=[];for(const $t of this._intentStates.values())if(this._abortOperatorList({intentState:$t,reason:new Error("Page was destroyed."),force:!0}),!$t.opListReadCapability)for(const kt of $t.renderTasks)dt.push(kt.completed),kt.cancel();return this.objs.clear(),vr(this,rp,!1),Promise.all(dt)}cleanup(dt=!1){vr(this,rp,!0);const $t=Br(this,wx,Pv).call(this);return dt&&$t&&this._stats&&(this._stats=new StatTimer),$t}_startRenderPage(dt,$t){var Tt,Dt;const kt=this._intentStates.get($t);kt&&((Tt=this._stats)==null||Tt.timeEnd("Page Request"),(Dt=kt.displayReadyCapability)==null||Dt.resolve(dt))}_renderPageChunk(dt,$t){for(let kt=0,Tt=dt.length;kt<Tt;kt++)$t.operatorList.fnArray.push(dt.fnArray[kt]),$t.operatorList.argsArray.push(dt.argsArray[kt]);$t.operatorList.lastChunk=dt.lastChunk,$t.operatorList.separateAnnots=dt.separateAnnots;for(const kt of $t.renderTasks)kt.operatorListChanged();dt.lastChunk&&Br(this,wx,Pv).call(this)}_pumpOperatorList({renderingIntent:dt,cacheKey:$t,annotationStorageSerializable:kt,modifiedIds:Tt}){const{map:Dt,transfer:Ft}=kt,Ht=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:dt,cacheKey:$t,annotationStorage:Dt,modifiedIds:Tt},Ft).getReader(),Kt=this._intentStates.get($t);Kt.streamReader=Ht;const Yt=()=>{Ht.read().then(({value:Jt,done:Zt})=>{if(Zt){Kt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Jt,Kt),Yt())},Jt=>{if(Kt.streamReader=null,!this._transport.destroyed){if(Kt.operatorList){Kt.operatorList.lastChunk=!0;for(const Zt of Kt.renderTasks)Zt.operatorListChanged();Br(this,wx,Pv).call(this)}if(Kt.displayReadyCapability)Kt.displayReadyCapability.reject(Jt);else if(Kt.opListReadCapability)Kt.opListReadCapability.reject(Jt);else throw Jt}})};Yt()}_abortOperatorList({intentState:dt,reason:$t,force:kt=!1}){if(dt.streamReader){if(dt.streamReaderCancelTimeout&&(clearTimeout(dt.streamReaderCancelTimeout),dt.streamReaderCancelTimeout=null),!kt){if(dt.renderTasks.size>0)return;if($t instanceof RenderingCancelledException){let Tt=RENDERING_CANCELLED_TIMEOUT;$t.extraDelay>0&&$t.extraDelay<1e3&&(Tt+=$t.extraDelay),dt.streamReaderCancelTimeout=setTimeout(()=>{dt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:dt,reason:$t,force:!0})},Tt);return}}if(dt.streamReader.cancel(new AbortException($t.message)).catch(()=>{}),dt.streamReader=null,!this._transport.destroyed){for(const[Tt,Dt]of this._intentStates)if(Dt===dt){this._intentStates.delete(Tt);break}this.cleanup()}}}get stats(){return this._stats}}rp=new WeakMap,wx=new WeakSet,Pv=function(){if(!ar(this,rp)||this.destroyed)return!1;for(const{renderTasks:dt,operatorList:$t}of this._intentStates.values())if(dt.size>0||!$t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),vr(this,rp,!1),!0};var Jp,tu,sp,Rx,zR,$x,kx,by,Cw,UR,KS,HR,YS,Sx,Mv,yy,Aw;const Un=class Un{constructor({name:dt=null,port:$t=null,verbosity:kt=getVerbosityLevel()}={}){yr(this,by);yr(this,UR);yr(this,HR);yr(this,Sx);yr(this,Jp,Promise.withResolvers());yr(this,tu,null);yr(this,sp,null);yr(this,Rx,null);if(this.name=dt,this.destroyed=!1,this.verbosity=kt,$t){if(ar(Un,kx).has($t))throw new Error("Cannot use more than one PDFWorker per port.");ar(Un,kx).set($t,this),Br(this,UR,KS).call(this,$t)}else Br(this,HR,YS).call(this)}get promise(){return ar(this,Jp).promise}get port(){return ar(this,sp)}get messageHandler(){return ar(this,tu)}destroy(){var dt,$t;this.destroyed=!0,(dt=ar(this,Rx))==null||dt.terminate(),vr(this,Rx,null),ar(Un,kx).delete(ar(this,sp)),vr(this,sp,null),($t=ar(this,tu))==null||$t.destroy(),vr(this,tu,null)}static create(dt){const $t=ar(this,kx).get(dt==null?void 0:dt.port);if($t){if($t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return $t}return new Un(dt)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>ar(this,yy,Aw)?ar(this,yy,Aw):(await __vitePreload(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};Jp=new WeakMap,tu=new WeakMap,sp=new WeakMap,Rx=new WeakMap,zR=new WeakMap,$x=new WeakMap,kx=new WeakMap,by=new WeakSet,Cw=function(){ar(this,Jp).resolve(),ar(this,tu).send("configure",{verbosity:this.verbosity})},UR=new WeakSet,KS=function(dt){vr(this,sp,dt),vr(this,tu,new MessageHandler("main","worker",dt)),ar(this,tu).on("ready",()=>{}),Br(this,by,Cw).call(this)},HR=new WeakSet,YS=function(){if(ar(Un,$x)||ar(Un,yy,Aw)){Br(this,Sx,Mv).call(this);return}let{workerSrc:dt}=Un;try{Un._isSameOrigin(window.location,dt)||(dt=Un._createCDNWrapper(new URL(dt,window.location).href));const $t=new Worker(dt,{type:"module"}),kt=new MessageHandler("main","worker",$t),Tt=()=>{Dt.abort(),kt.destroy(),$t.terminate(),this.destroyed?ar(this,Jp).reject(new Error("Worker was destroyed")):Br(this,Sx,Mv).call(this)},Dt=new AbortController;$t.addEventListener("error",()=>{ar(this,Rx)||Tt()},{signal:Dt.signal}),kt.on("test",Ut=>{if(Dt.abort(),this.destroyed||!Ut){Tt();return}vr(this,tu,kt),vr(this,sp,$t),vr(this,Rx,$t),Br(this,by,Cw).call(this)}),kt.on("ready",Ut=>{if(Dt.abort(),this.destroyed){Tt();return}try{Ft()}catch{Br(this,Sx,Mv).call(this)}});const Ft=()=>{const Ut=new Uint8Array;kt.send("test",Ut,[Ut.buffer])};Ft();return}catch{info("The worker has been disabled.")}Br(this,Sx,Mv).call(this)},Sx=new WeakSet,Mv=function(){ar(Un,$x)||(warn("Setting up fake worker."),vr(Un,$x,!0)),Un._setupFakeWorkerGlobal.then(dt=>{if(this.destroyed){ar(this,Jp).reject(new Error("Worker was destroyed"));return}const $t=new LoopbackPort;vr(this,sp,$t);const kt=`fake${ga(Un,zR)._++}`,Tt=new MessageHandler(kt+"_worker",kt,$t);dt.setup(Tt,$t),vr(this,tu,new MessageHandler(kt,kt+"_worker",$t)),Br(this,by,Cw).call(this)}).catch(dt=>{ar(this,Jp).reject(new Error(`Setting up fake worker failed: "${dt.message}".`))})},yy=new WeakSet,Aw=function(){var dt;try{return((dt=globalThis.pdfjsWorker)==null?void 0:dt.WorkerMessageHandler)||null}catch{return null}},yr(Un,yy),yr(Un,zR,0),yr(Un,$x,!1),yr(Un,kx,new WeakMap),isNodeJS&&(vr(Un,$x,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),Un._isSameOrigin=(dt,$t)=>{const kt=URL.parse(dt);if(!(kt!=null&&kt.origin)||kt.origin==="null")return!1;const Tt=new URL($t,kt);return kt.origin===Tt.origin},Un._createCDNWrapper=dt=>{const $t=`await import("${dt}");`;return URL.createObjectURL(new Blob([$t],{type:"text/javascript"}))},Un.fromPort=dt=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(dt!=null&&dt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Un.create(dt)};let PDFWorker=Un;var np,wu,vy,Ey,ap,_x,Iv;class WorkerTransport{constructor(dt,$t,kt,Tt,Dt,Ft){yr(this,_x);yr(this,np,new Map);yr(this,wu,new Map);yr(this,vy,new Map);yr(this,Ey,new Map);yr(this,ap,null);this.messageHandler=dt,this.loadingTask=$t,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:Tt.ownerDocument,styleElement:Tt.styleElement}),this.loadingParams=Tt.loadingParams,this._params=Tt,this.canvasFactory=Dt.canvasFactory,this.filterFactory=Dt.filterFactory,this.cMapReaderFactory=Dt.cMapReaderFactory,this.standardFontDataFactory=Dt.standardFontDataFactory,this.wasmFactory=Dt.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=kt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=Ft,this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(dt,$t=AnnotationMode.ENABLE,kt=null,Tt=!1,Dt=!1){let Ft=RenderingIntentFlag.DISPLAY,Ut=SerializableEmpty;switch(dt){case"any":Ft=RenderingIntentFlag.ANY;break;case"display":break;case"print":Ft=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${dt}`)}const Ht=Ft&RenderingIntentFlag.PRINT&&kt instanceof PrintAnnotationStorage?kt:this.annotationStorage;switch($t){case AnnotationMode.DISABLE:Ft+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:Ft+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:Ft+=RenderingIntentFlag.ANNOTATIONS_STORAGE,Ut=Ht.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${$t}`)}Tt&&(Ft+=RenderingIntentFlag.IS_EDITING),Dt&&(Ft+=RenderingIntentFlag.OPLIST);const{ids:Kt,hash:Yt}=Ht.modifiedIds,Jt=[Ft,Ut.hash,Yt];return{renderingIntent:Ft,cacheKey:Jt.join("_"),annotationStorageSerializable:Ut,modifiedIds:Kt}}destroy(){var kt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(kt=ar(this,ap))==null||kt.reject(new Error("Worker was destroyed during onPassword callback"));const dt=[];for(const Tt of ar(this,wu).values())dt.push(Tt._destroy());ar(this,wu).clear(),ar(this,vy).clear(),ar(this,Ey).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const $t=this.messageHandler.sendWithPromise("Terminate",null);return dt.push($t),Promise.all(dt).then(()=>{var Tt,Dt;this.commonObjs.clear(),this.fontLoader.clear(),ar(this,np).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(Tt=this._networkStream)==null||Tt.cancelAllRequests(new AbortException("Worker was terminated.")),(Dt=this.messageHandler)==null||Dt.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:dt,loadingTask:$t}=this;dt.on("GetReader",(kt,Tt)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Dt=>{this._lastProgress={loaded:Dt.loaded,total:Dt.total}},Tt.onPull=()=>{this._fullReader.read().then(function({value:Dt,done:Ft}){if(Ft){Tt.close();return}assert(Dt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Tt.enqueue(new Uint8Array(Dt),1,[Dt])}).catch(Dt=>{Tt.error(Dt)})},Tt.onCancel=Dt=>{this._fullReader.cancel(Dt),Tt.ready.catch(Ft=>{if(!this.destroyed)throw Ft})}}),dt.on("ReaderHeadersReady",async kt=>{var Ut;await this._fullReader.headersReady;const{isStreamingSupported:Tt,isRangeSupported:Dt,contentLength:Ft}=this._fullReader;return(!Tt||!Dt)&&(this._lastProgress&&((Ut=$t.onProgress)==null||Ut.call($t,this._lastProgress)),this._fullReader.onProgress=Ht=>{var Kt;(Kt=$t.onProgress)==null||Kt.call($t,{loaded:Ht.loaded,total:Ht.total})}),{isStreamingSupported:Tt,isRangeSupported:Dt,contentLength:Ft}}),dt.on("GetRangeReader",(kt,Tt)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Dt=this._networkStream.getRangeReader(kt.begin,kt.end);if(!Dt){Tt.close();return}Tt.onPull=()=>{Dt.read().then(function({value:Ft,done:Ut}){if(Ut){Tt.close();return}assert(Ft instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Tt.enqueue(new Uint8Array(Ft),1,[Ft])}).catch(Ft=>{Tt.error(Ft)})},Tt.onCancel=Ft=>{Dt.cancel(Ft),Tt.ready.catch(Ut=>{if(!this.destroyed)throw Ut})}}),dt.on("GetDoc",({pdfInfo:kt})=>{this._numPages=kt.numPages,this._htmlForXfa=kt.htmlForXfa,delete kt.htmlForXfa,$t._capability.resolve(new PDFDocumentProxy(kt,this))}),dt.on("DocException",kt=>{$t._capability.reject(wrapReason(kt))}),dt.on("PasswordRequest",kt=>{vr(this,ap,Promise.withResolvers());try{if(!$t.onPassword)throw wrapReason(kt);const Tt=Dt=>{Dt instanceof Error?ar(this,ap).reject(Dt):ar(this,ap).resolve({password:Dt})};$t.onPassword(Tt,kt.code)}catch(Tt){ar(this,ap).reject(Tt)}return ar(this,ap).promise}),dt.on("DataLoaded",kt=>{var Tt;(Tt=$t.onProgress)==null||Tt.call($t,{loaded:kt.length,total:kt.length}),this.downloadInfoCapability.resolve(kt)}),dt.on("StartRenderPage",kt=>{if(this.destroyed)return;ar(this,wu).get(kt.pageIndex)._startRenderPage(kt.transparency,kt.cacheKey)}),dt.on("commonobj",([kt,Tt,Dt])=>{var Ft;if(this.destroyed||this.commonObjs.has(kt))return null;switch(Tt){case"Font":if("error"in Dt){const Jt=Dt.error;warn(`Error during font loading: ${Jt}`),this.commonObjs.resolve(kt,Jt);break}const Ut=new FontInfo(Dt),Ht=this._params.pdfBug&&((Ft=globalThis.FontInspector)!=null&&Ft.enabled)?(Jt,Zt)=>globalThis.FontInspector.fontAdded(Jt,Zt):null,Kt=new FontFaceObject(Ut,Ht,Dt.extra,Dt.charProcOperatorList);this.fontLoader.bind(Kt).catch(()=>dt.sendWithPromise("FontFallback",{id:kt})).finally(()=>{!Kt.fontExtraProperties&&Kt.data&&Kt.clearData(),this.commonObjs.resolve(kt,Kt)});break;case"CopyLocalImage":const{imageRef:Yt}=Dt;assert(Yt,"The imageRef must be defined.");for(const Jt of ar(this,wu).values())for(const[,Zt]of Jt.objs)if((Zt==null?void 0:Zt.ref)===Yt)return Zt.dataLen?(this.commonObjs.resolve(kt,structuredClone(Zt)),Zt.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(kt,Dt);break;default:throw new Error(`Got unknown common object type ${Tt}`)}return null}),dt.on("obj",([kt,Tt,Dt,Ft])=>{var Ht;if(this.destroyed)return;const Ut=ar(this,wu).get(Tt);if(!Ut.objs.has(kt)){if(Ut._intentStates.size===0){(Ht=Ft==null?void 0:Ft.bitmap)==null||Ht.close();return}switch(Dt){case"Image":case"Pattern":Ut.objs.resolve(kt,Ft);break;default:throw new Error(`Got unknown object type ${Dt}`)}}}),dt.on("DocProgress",kt=>{var Tt;this.destroyed||(Tt=$t.onProgress)==null||Tt.call($t,{loaded:kt.loaded,total:kt.total})}),dt.on("FetchBinaryData",async kt=>{if(this.destroyed)throw new Error("Worker was destroyed.");const Tt=this[kt.type];if(!Tt)throw new Error(`${kt.type} not initialized, see the \`useWorkerFetch\` parameter.`);return Tt.fetch(kt)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var kt;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:dt,transfer:$t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:dt,filename:((kt=this._fullReader)==null?void 0:kt.filename)??null},$t).finally(()=>{this.annotationStorage.resetModified()})}getPage(dt){if(!Number.isInteger(dt)||dt<=0||dt>this._numPages)return Promise.reject(new Error("Invalid page request."));const $t=dt-1,kt=ar(this,vy).get($t);if(kt)return kt;const Tt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:$t}).then(Dt=>{if(this.destroyed)throw new Error("Transport destroyed");Dt.refStr&&ar(this,Ey).set(Dt.refStr,dt);const Ft=new PDFPageProxy($t,Dt,this,this._params.pdfBug);return ar(this,wu).set($t,Ft),Ft});return ar(this,vy).set($t,Tt),Tt}getPageIndex(dt){return isRefProxy(dt)?this.messageHandler.sendWithPromise("GetPageIndex",{num:dt.num,gen:dt.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(dt,$t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:dt,intent:$t})}getFieldObjects(){return Br(this,_x,Iv).call(this,"GetFieldObjects")}hasJSActions(){return Br(this,_x,Iv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(dt){return typeof dt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:dt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(dt,$t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:dt,pageIndexesToSkip:$t})}getDocJSActions(){return Br(this,_x,Iv).call(this,"GetDocJSActions")}getPageJSActions(dt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:dt})}getStructTree(dt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:dt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(dt){return Br(this,_x,Iv).call(this,"GetOptionalContentConfig").then($t=>new OptionalContentConfig($t,dt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const dt="GetMetadata",$t=ar(this,np).get(dt);if($t)return $t;const kt=this.messageHandler.sendWithPromise(dt,null).then(Tt=>{var Dt,Ft;return{info:Tt[0],metadata:Tt[1]?new Metadata(Tt[1]):null,contentDispositionFilename:((Dt=this._fullReader)==null?void 0:Dt.filename)??null,contentLength:((Ft=this._fullReader)==null?void 0:Ft.contentLength)??null}});return ar(this,np).set(dt,kt),kt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(dt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const $t of ar(this,wu).values())if(!$t.cleanup())throw new Error(`startCleanup: Page ${$t.pageNumber} is currently rendering.`);this.commonObjs.clear(),dt||this.fontLoader.clear(),ar(this,np).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(dt){if(!isRefProxy(dt))return null;const $t=dt.gen===0?`${dt.num}R`:`${dt.num}R${dt.gen}`;return ar(this,Ey).get($t)??null}}np=new WeakMap,wu=new WeakMap,vy=new WeakMap,Ey=new WeakMap,ap=new WeakMap,_x=new WeakSet,Iv=function(dt,$t=null){const kt=ar(this,np).get(dt);if(kt)return kt;const Tt=this.messageHandler.sendWithPromise(dt,$t);return ar(this,np).set(dt,Tt),Tt};var Zp;class RenderTask{constructor(dt){yr(this,Zp,null);Es(this,"onContinue",null);Es(this,"onError",null);vr(this,Zp,dt)}get promise(){return ar(this,Zp).capability.promise}cancel(dt=0){ar(this,Zp).cancel(null,dt)}get separateAnnots(){const{separateAnnots:dt}=ar(this,Zp).operatorList;if(!dt)return!1;const{annotationCanvasMap:$t}=ar(this,Zp);return dt.form||dt.canvas&&($t==null?void 0:$t.size)>0}}Zp=new WeakMap;var _f,Cx;const Tm=class Tm{constructor({callback:dt,params:$t,objs:kt,commonObjs:Tt,annotationCanvasMap:Dt,operatorList:Ft,pageIndex:Ut,canvasFactory:Ht,filterFactory:Kt,useRequestAnimationFrame:Yt=!1,pdfBug:Jt=!1,pageColors:Zt=null,enableHWA:er=!1,operationsFilter:rr=null}){yr(this,_f,null);this.callback=dt,this.params=$t,this.objs=kt,this.commonObjs=Tt,this.annotationCanvasMap=Dt,this.operatorListIdx=null,this.operatorList=Ft,this._pageIndex=Ut,this.canvasFactory=Ht,this.filterFactory=Kt,this._pdfBug=Jt,this.pageColors=Zt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Yt===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=$t.canvas,this._canvasContext=$t.canvas?null:$t.canvasContext,this._enableHWA=er,this._dependencyTracker=$t.dependencyTracker,this._operationsFilter=rr}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:dt=!1,optionalContentConfig:$t}){var Ht,Kt;if(this.cancelled)return;if(this._canvas){if(ar(Tm,Cx).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ar(Tm,Cx).add(this._canvas)}this._pdfBug&&((Ht=globalThis.StepperManager)!=null&&Ht.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:kt,transform:Tt,background:Dt,dependencyTracker:Ft}=this.params,Ut=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CanvasGraphics(Ut,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:$t},this.annotationCanvasMap,this.pageColors,Ft),this.gfx.beginDrawing({transform:Tt,viewport:kt,transparency:dt,background:Dt}),this.operatorListIdx=0,this.graphicsReady=!0,(Kt=this.graphicsReadyCallback)==null||Kt.call(this)}cancel(dt=null,$t=0){var kt,Tt,Dt;this.running=!1,this.cancelled=!0,(kt=this.gfx)==null||kt.endDrawing(),ar(this,_f)&&(window.cancelAnimationFrame(ar(this,_f)),vr(this,_f,null)),ar(Tm,Cx).delete(this._canvas),dt||(dt=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,$t)),this.callback(dt),(Dt=(Tt=this.task).onError)==null||Dt.call(Tt,dt)}operatorListChanged(){var dt,$t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(dt=this.gfx.dependencyTracker)==null||dt.growOperationsCount(this.operatorList.fnArray.length),($t=this.stepper)==null||$t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?vr(this,_f,window.requestAnimationFrame(()=>{vr(this,_f,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ar(Tm,Cx).delete(this._canvas),this.callback())))}};_f=new WeakMap,Cx=new WeakMap,yr(Tm,Cx,new WeakSet);let InternalRenderTask=Tm;const version="5.4.296",build="f56dc8601";var yl,Ax,jy,_a,cE,wy,lp,dE,em,ru,uE,hE,y$,pE,v$,fE,E$,cp,Sm,GR,XS,Ru,wp;const Oo=class Oo{constructor({editor:dt=null,uiManager:$t=null}){yr(this,hE);yr(this,pE);yr(this,fE);yr(this,cp);yr(this,GR);yr(this,Ru);yr(this,yl,null);yr(this,Ax,null);yr(this,jy,void 0);yr(this,_a,null);yr(this,cE,!1);yr(this,wy,!1);yr(this,lp,null);yr(this,dE,void 0);yr(this,em,null);yr(this,ru,null);var kt,Tt;dt?(vr(this,wy,!1),vr(this,lp,dt)):vr(this,wy,!0),vr(this,ru,(dt==null?void 0:dt._uiManager)||$t),vr(this,dE,ar(this,ru)._eventBus),vr(this,jy,((kt=dt==null?void 0:dt.color)==null?void 0:kt.toUpperCase())||((Tt=ar(this,ru))==null?void 0:Tt.highlightColors.values().next().value)||"#FFFF98"),ar(Oo,uE)||vr(Oo,uE,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],Oo.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Oo.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Oo.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Oo.prototype._moveToPrevious],[["Home","mac+Home"],Oo.prototype._moveToBeginning],[["End","mac+End"],Oo.prototype._moveToEnd]]))}renderButton(){const dt=vr(this,yl,document.createElement("button"));dt.className="colorPicker",dt.tabIndex="0",dt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),dt.ariaHasPopup="true",ar(this,lp)&&(dt.ariaControls=`${ar(this,lp).id}_colorpicker_dropdown`);const $t=ar(this,ru)._signal;dt.addEventListener("click",Br(this,cp,Sm).bind(this),{signal:$t}),dt.addEventListener("keydown",Br(this,fE,E$).bind(this),{signal:$t});const kt=vr(this,Ax,document.createElement("span"));return kt.className="swatch",kt.ariaHidden="true",kt.style.backgroundColor=ar(this,jy),dt.append(kt),dt}renderMainDropdown(){const dt=vr(this,_a,Br(this,hE,y$).call(this));return dt.ariaOrientation="horizontal",dt.ariaLabelledBy="highlightColorPickerLabel",dt}_colorSelectFromKeyboard(dt){if(dt.target===ar(this,yl)){Br(this,cp,Sm).call(this,dt);return}const $t=dt.target.getAttribute("data-color");$t&&Br(this,pE,v$).call(this,$t,dt)}_moveToNext(dt){var $t,kt;if(!ar(this,Ru,wp)){Br(this,cp,Sm).call(this,dt);return}if(dt.target===ar(this,yl)){($t=ar(this,_a).firstChild)==null||$t.focus();return}(kt=dt.target.nextSibling)==null||kt.focus()}_moveToPrevious(dt){var $t,kt;if(dt.target===(($t=ar(this,_a))==null?void 0:$t.firstChild)||dt.target===ar(this,yl)){ar(this,Ru,wp)&&this._hideDropdownFromKeyboard();return}ar(this,Ru,wp)||Br(this,cp,Sm).call(this,dt),(kt=dt.target.previousSibling)==null||kt.focus()}_moveToBeginning(dt){var $t;if(!ar(this,Ru,wp)){Br(this,cp,Sm).call(this,dt);return}($t=ar(this,_a).firstChild)==null||$t.focus()}_moveToEnd(dt){var $t;if(!ar(this,Ru,wp)){Br(this,cp,Sm).call(this,dt);return}($t=ar(this,_a).lastChild)==null||$t.focus()}hideDropdown(){var dt,$t;(dt=ar(this,_a))==null||dt.classList.add("hidden"),ar(this,yl).ariaExpanded="false",($t=ar(this,em))==null||$t.abort(),vr(this,em,null)}_hideDropdownFromKeyboard(){var dt;if(!ar(this,wy)){if(!ar(this,Ru,wp)){(dt=ar(this,lp))==null||dt.unselect();return}this.hideDropdown(),ar(this,yl).focus({preventScroll:!0,focusVisible:ar(this,cE)})}}updateColor(dt){if(ar(this,Ax)&&(ar(this,Ax).style.backgroundColor=dt),!ar(this,_a))return;const $t=ar(this,ru).highlightColors.values();for(const kt of ar(this,_a).children)kt.ariaSelected=$t.next().value===dt.toUpperCase()}destroy(){var dt,$t;(dt=ar(this,yl))==null||dt.remove(),vr(this,yl,null),vr(this,Ax,null),($t=ar(this,_a))==null||$t.remove(),vr(this,_a,null)}};yl=new WeakMap,Ax=new WeakMap,jy=new WeakMap,_a=new WeakMap,cE=new WeakMap,wy=new WeakMap,lp=new WeakMap,dE=new WeakMap,em=new WeakMap,ru=new WeakMap,uE=new WeakMap,hE=new WeakSet,y$=function(){const dt=document.createElement("div"),$t=ar(this,ru)._signal;dt.addEventListener("contextmenu",noContextMenu,{signal:$t}),dt.className="dropdown",dt.role="listbox",dt.ariaMultiSelectable="false",dt.ariaOrientation="vertical",dt.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),ar(this,lp)&&(dt.id=`${ar(this,lp).id}_colorpicker_dropdown`);for(const[kt,Tt]of ar(this,ru).highlightColors){const Dt=document.createElement("button");Dt.tabIndex="0",Dt.role="option",Dt.setAttribute("data-color",Tt),Dt.title=kt,Dt.setAttribute("data-l10n-id",ar(Oo,uE)[kt]);const Ft=document.createElement("span");Dt.append(Ft),Ft.className="swatch",Ft.style.backgroundColor=Tt,Dt.ariaSelected=Tt===ar(this,jy),Dt.addEventListener("click",Br(this,pE,v$).bind(this,Tt),{signal:$t}),dt.append(Dt)}return dt.addEventListener("keydown",Br(this,fE,E$).bind(this),{signal:$t}),dt},pE=new WeakSet,v$=function(dt,$t){$t.stopPropagation(),ar(this,dE).dispatch("switchannotationeditorparams",{source:this,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,value:dt}),this.updateColor(dt)},fE=new WeakSet,E$=function(dt){Oo._keyboardManager.exec(this,dt)},cp=new WeakSet,Sm=function(dt){if(ar(this,Ru,wp)){this.hideDropdown();return}if(vr(this,cE,dt.detail===0),ar(this,em)||(vr(this,em,new AbortController),window.addEventListener("pointerdown",Br(this,GR,XS).bind(this),{signal:ar(this,ru).combinedSignal(ar(this,em))})),ar(this,yl).ariaExpanded="true",ar(this,_a)){ar(this,_a).classList.remove("hidden");return}const $t=vr(this,_a,Br(this,hE,y$).call(this));ar(this,yl).append($t)},GR=new WeakSet,XS=function(dt){var $t;($t=ar(this,_a))!=null&&$t.contains(dt.target)||this.hideDropdown()},Ru=new WeakSet,wp=function(){return ar(this,_a)&&!ar(this,_a).classList.contains("hidden")},yr(Oo,uE,null);let ColorPicker=Oo;var $u,mE,Ry,xE;const Nm=class Nm{constructor(dt){yr(this,$u,null);yr(this,mE,null);yr(this,Ry,null);vr(this,mE,dt),vr(this,Ry,dt._uiManager),ar(Nm,xE)||vr(Nm,xE,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(ar(this,$u))return ar(this,$u);const{editorType:dt,colorType:$t,colorValue:kt}=ar(this,mE),Tt=vr(this,$u,document.createElement("input"));return Tt.type="color",Tt.value=kt||"#000000",Tt.className="basicColorPicker",Tt.tabIndex=0,Tt.setAttribute("data-l10n-id",ar(Nm,xE)[dt]),Tt.addEventListener("input",()=>{ar(this,Ry).updateParams($t,Tt.value)},{signal:ar(this,Ry)._signal}),Tt}update(dt){ar(this,$u)&&(ar(this,$u).value=dt)}destroy(){var dt;(dt=ar(this,$u))==null||dt.remove(),vr(this,$u,null)}hideDropdown(){}};$u=new WeakMap,mE=new WeakMap,Ry=new WeakMap,xE=new WeakMap,yr(Nm,xE,null);let BasicColorPicker=Nm;function makeColorComp(et){return Math.floor(Math.max(0,Math.min(1,et))*255).toString(16).padStart(2,"0")}function scaleAndClamp(et){return Math.max(0,Math.min(255,255*et))}class ColorConverters{static CMYK_G([dt,$t,kt,Tt]){return["G",1-Math.min(1,.3*dt+.59*kt+.11*$t+Tt)]}static G_CMYK([dt]){return["CMYK",0,0,0,1-dt]}static G_RGB([dt]){return["RGB",dt,dt,dt]}static G_rgb([dt]){return dt=scaleAndClamp(dt),[dt,dt,dt]}static G_HTML([dt]){const $t=makeColorComp(dt);return`#${$t}${$t}${$t}`}static RGB_G([dt,$t,kt]){return["G",.3*dt+.59*$t+.11*kt]}static RGB_rgb(dt){return dt.map(scaleAndClamp)}static RGB_HTML(dt){return`#${dt.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([dt,$t,kt,Tt]){return["RGB",1-Math.min(1,dt+Tt),1-Math.min(1,kt+Tt),1-Math.min(1,$t+Tt)]}static CMYK_rgb([dt,$t,kt,Tt]){return[scaleAndClamp(1-Math.min(1,dt+Tt)),scaleAndClamp(1-Math.min(1,kt+Tt)),scaleAndClamp(1-Math.min(1,$t+Tt))]}static CMYK_HTML(dt){const $t=this.CMYK_RGB(dt).slice(1);return this.RGB_HTML($t)}static RGB_CMYK([dt,$t,kt]){const Tt=1-dt,Dt=1-$t,Ft=1-kt,Ut=Math.min(Tt,Dt,Ft);return["CMYK",Tt,Dt,Ft,Ut]}}class BaseSVGFactory{create(dt,$t,kt=!1){if(dt<=0||$t<=0)throw new Error("Invalid SVG dimensions");const Tt=this._createSVG("svg:svg");return Tt.setAttribute("version","1.1"),kt||(Tt.setAttribute("width",`${dt}px`),Tt.setAttribute("height",`${$t}px`)),Tt.setAttribute("preserveAspectRatio","none"),Tt.setAttribute("viewBox",`0 0 ${dt} ${$t}`),Tt}createElement(dt){if(typeof dt!="string")throw new Error("Invalid SVG element type");return this._createSVG(dt)}_createSVG(dt){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(dt){return document.createElementNS(SVG_NS,dt)}}const annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet,TIMEZONE_OFFSET=new Date().getTimezoneOffset()*60*1e3;class AnnotationElementFactory{static create(dt){switch(dt.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(dt);case AnnotationType.TEXT:return new TextAnnotationElement(dt);case AnnotationType.WIDGET:switch(dt.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(dt);case"Btn":return dt.data.radioButton?new RadioButtonWidgetAnnotationElement(dt):dt.data.checkBox?new CheckboxWidgetAnnotationElement(dt):new PushButtonWidgetAnnotationElement(dt);case"Ch":return new ChoiceWidgetAnnotationElement(dt);case"Sig":return new SignatureWidgetAnnotationElement(dt)}return new WidgetAnnotationElement(dt);case AnnotationType.POPUP:return new PopupAnnotationElement(dt);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(dt);case AnnotationType.LINE:return new LineAnnotationElement(dt);case AnnotationType.SQUARE:return new SquareAnnotationElement(dt);case AnnotationType.CIRCLE:return new CircleAnnotationElement(dt);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(dt);case AnnotationType.CARET:return new CaretAnnotationElement(dt);case AnnotationType.INK:return new InkAnnotationElement(dt);case AnnotationType.POLYGON:return new PolygonAnnotationElement(dt);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(dt);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(dt);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(dt);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(dt);case AnnotationType.STAMP:return new StampAnnotationElement(dt);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(dt);default:return new AnnotationElement(dt)}}}var Tx,$y,Ul,gE,j$;const _k=class _k{constructor(dt,{isRenderable:$t=!1,ignoreBorder:kt=!1,createQuadrilaterals:Tt=!1}={}){yr(this,gE);yr(this,Tx,null);yr(this,$y,!1);yr(this,Ul,null);this.isRenderable=$t,this.data=dt.data,this.layer=dt.layer,this.linkService=dt.linkService,this.downloadManager=dt.downloadManager,this.imageResourcesPath=dt.imageResourcesPath,this.renderForms=dt.renderForms,this.svgFactory=dt.svgFactory,this.annotationStorage=dt.annotationStorage,this.enableComment=dt.enableComment,this.enableScripting=dt.enableScripting,this.hasJSActions=dt.hasJSActions,this._fieldObjects=dt.fieldObjects,this.parent=dt.parent,$t&&(this.container=this._createContainer(kt)),Tt&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:dt,richText:$t}){return!!(dt!=null&&dt.str||$t!=null&&$t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return _k._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var kt;const{data:dt}=this,$t=(kt=this.annotationStorage)==null?void 0:kt.getEditor(dt.id);return $t?$t.getData():dt}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var Ut;const dt=(Ut=this.annotationStorage)==null?void 0:Ut.getEditor(this.data.id);if(dt)return dt.commentButtonPositionInPage;const{quadPoints:$t,inkLists:kt,rect:Tt}=this.data;let Dt=-1/0,Ft=-1/0;if(($t==null?void 0:$t.length)>=8){for(let Ht=0;Ht<$t.length;Ht+=8)$t[Ht+1]>Ft?(Ft=$t[Ht+1],Dt=$t[Ht+2]):$t[Ht+1]===Ft&&(Dt=Math.max(Dt,$t[Ht+2]));return[Dt,Ft]}if((kt==null?void 0:kt.length)>=1){for(const Ht of kt)for(let Kt=0,Yt=Ht.length;Kt<Yt;Kt+=2)Ht[Kt+1]>Ft?(Ft=Ht[Kt+1],Dt=Ht[Kt]):Ht[Kt+1]===Ft&&(Dt=Math.max(Dt,Ht[Kt]));if(Dt!==1/0)return[Dt,Ft]}return Tt?[Tt[2],Tt[3]]:null}_normalizePoint(dt){const{page:{view:$t},viewport:{rawDims:{pageWidth:kt,pageHeight:Tt,pageX:Dt,pageY:Ft}}}=this.parent;return dt[1]=$t[3]-dt[1]+$t[1],dt[0]=100*(dt[0]-Dt)/kt,dt[1]=100*(dt[1]-Ft)/Tt,dt}get commentText(){var $t,kt,Tt;const{data:dt}=this;return((kt=($t=this.annotationStorage.getRawValue(`${AnnotationEditorPrefix}${dt.id}`))==null?void 0:$t.popup)==null?void 0:kt.contents)||((Tt=dt.contentsObj)==null?void 0:Tt.str)||""}set commentText(dt){const{data:$t}=this,kt={deleted:!dt,contents:dt||""};this.annotationStorage.updateEditor($t.id,{popup:kt})||this.annotationStorage.setValue(`${AnnotationEditorPrefix}${$t.id}`,{id:$t.id,annotationType:$t.annotationType,pageIndex:this.parent.page._pageIndex,popup:kt,popupRef:$t.popupRef,modificationDate:new Date}),dt||this.removePopup()}removePopup(){var dt,$t;($t=((dt=ar(this,Ul))==null?void 0:dt.popup)||this.popup)==null||$t.remove(),vr(this,Ul,this.popup=null)}updateEdited(dt){var Dt;if(!this.container)return;dt.rect&&(ar(this,Tx)||vr(this,Tx,{rect:this.data.rect.slice(0)}));const{rect:$t,popup:kt}=dt;$t&&Br(this,gE,j$).call(this,$t);let Tt=((Dt=ar(this,Ul))==null?void 0:Dt.popup)||this.popup;!Tt&&(kt!=null&&kt.text)&&(this._createPopup(kt),Tt=ar(this,Ul).popup),Tt&&(Tt.updateEdited(dt),kt!=null&&kt.deleted&&(Tt.remove(),vr(this,Ul,null),this.popup=null))}resetEdited(){var dt;ar(this,Tx)&&(Br(this,gE,j$).call(this,ar(this,Tx).rect),(dt=ar(this,Ul))==null||dt.popup.resetEdited(),vr(this,Tx,null))}_createContainer(dt){const{data:$t,parent:{page:kt,viewport:Tt}}=this,Dt=document.createElement("section");Dt.setAttribute("data-annotation-id",$t.id),!(this instanceof WidgetAnnotationElement)&&!(this instanceof LinkAnnotationElement)&&(Dt.tabIndex=0);const{style:Ft}=Dt;if(Ft.zIndex=this.parent.zIndex,this.parent.zIndex+=2,$t.alternativeText&&(Dt.title=$t.alternativeText),$t.noRotate&&Dt.classList.add("norotate"),!$t.rect||this instanceof PopupAnnotationElement){const{rotation:sr}=$t;return!$t.hasOwnCanvas&&sr!==0&&this.setRotation(sr,Dt),Dt}const{width:Ut,height:Ht}=this;if(!dt&&$t.borderStyle.width>0){Ft.borderWidth=`${$t.borderStyle.width}px`;const sr=$t.borderStyle.horizontalCornerRadius,nr=$t.borderStyle.verticalCornerRadius;if(sr>0||nr>0){const or=`calc(${sr}px * var(--total-scale-factor)) / calc(${nr}px * var(--total-scale-factor))`;Ft.borderRadius=or}else if(this instanceof RadioButtonWidgetAnnotationElement){const or=`calc(${Ut}px * var(--total-scale-factor)) / calc(${Ht}px * var(--total-scale-factor))`;Ft.borderRadius=or}switch($t.borderStyle.style){case AnnotationBorderStyleType.SOLID:Ft.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:Ft.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:Ft.borderBottomStyle="solid";break}const ir=$t.borderColor||null;ir?(vr(this,$y,!0),Ft.borderColor=Util.makeHexColor(ir[0]|0,ir[1]|0,ir[2]|0)):Ft.borderWidth=0}const Kt=Util.normalizeRect([$t.rect[0],kt.view[3]-$t.rect[1]+kt.view[1],$t.rect[2],kt.view[3]-$t.rect[3]+kt.view[1]]),{pageWidth:Yt,pageHeight:Jt,pageX:Zt,pageY:er}=Tt.rawDims;Ft.left=`${100*(Kt[0]-Zt)/Yt}%`,Ft.top=`${100*(Kt[1]-er)/Jt}%`;const{rotation:rr}=$t;return $t.hasOwnCanvas||rr===0?(Ft.width=`${100*Ut/Yt}%`,Ft.height=`${100*Ht/Jt}%`):this.setRotation(rr,Dt),Dt}setRotation(dt,$t=this.container){if(!this.data.rect)return;const{pageWidth:kt,pageHeight:Tt}=this.parent.viewport.rawDims;let{width:Dt,height:Ft}=this;dt%180!==0&&([Dt,Ft]=[Ft,Dt]),$t.style.width=`${100*Dt/kt}%`,$t.style.height=`${100*Ft/Tt}%`,$t.setAttribute("data-main-rotation",(360-dt)%360)}get _commonActions(){const dt=($t,kt,Tt)=>{const Dt=Tt.detail[$t],Ft=Dt[0],Ut=Dt.slice(1);Tt.target.style[kt]=ColorConverters[`${Ft}_HTML`](Ut),this.annotationStorage.setValue(this.data.id,{[kt]:ColorConverters[`${Ft}_rgb`](Ut)})};return shadow(this,"_commonActions",{display:$t=>{const{display:kt}=$t.detail,Tt=kt%2===1;this.container.style.visibility=Tt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Tt,noPrint:kt===1||kt===2})},print:$t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!$t.detail.print})},hidden:$t=>{const{hidden:kt}=$t.detail;this.container.style.visibility=kt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:kt,noView:kt})},focus:$t=>{setTimeout(()=>$t.target.focus({preventScroll:!1}),0)},userName:$t=>{$t.target.title=$t.detail.userName},readonly:$t=>{$t.target.disabled=$t.detail.readonly},required:$t=>{this._setRequired($t.target,$t.detail.required)},bgColor:$t=>{dt("bgColor","backgroundColor",$t)},fillColor:$t=>{dt("fillColor","backgroundColor",$t)},fgColor:$t=>{dt("fgColor","color",$t)},textColor:$t=>{dt("textColor","color",$t)},borderColor:$t=>{dt("borderColor","borderColor",$t)},strokeColor:$t=>{dt("strokeColor","borderColor",$t)},rotation:$t=>{const kt=$t.detail.rotation;this.setRotation(kt),this.annotationStorage.setValue(this.data.id,{rotation:kt})}})}_dispatchEventFromSandbox(dt,$t){const kt=this._commonActions;for(const Tt of Object.keys($t.detail)){const Dt=dt[Tt]||kt[Tt];Dt==null||Dt($t)}}_setDefaultPropertiesFromJS(dt){if(!this.enableScripting)return;const $t=this.annotationStorage.getRawValue(this.data.id);if(!$t)return;const kt=this._commonActions;for(const[Tt,Dt]of Object.entries($t)){const Ft=kt[Tt];if(Ft){const Ut={detail:{[Tt]:Dt},target:dt};Ft(Ut),delete $t[Tt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:dt}=this.data;if(!dt)return;const[$t,kt,Tt,Dt]=this.data.rect.map(sr=>Math.fround(sr));if(dt.length===8){const[sr,nr,ir,or]=dt.subarray(2,6);if(Tt===sr&&Dt===nr&&$t===ir&&kt===or)return}const{style:Ft}=this.container;let Ut;if(ar(this,$y)){const{borderColor:sr,borderWidth:nr}=Ft;Ft.borderWidth=0,Ut=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${sr}" stroke-width="${nr}">`],this.container.classList.add("hasBorder")}const Ht=Tt-$t,Kt=Dt-kt,{svgFactory:Yt}=this,Jt=Yt.createElement("svg");Jt.classList.add("quadrilateralsContainer"),Jt.setAttribute("width",0),Jt.setAttribute("height",0),Jt.role="none";const Zt=Yt.createElement("defs");Jt.append(Zt);const er=Yt.createElement("clipPath"),rr=`clippath_${this.data.id}`;er.setAttribute("id",rr),er.setAttribute("clipPathUnits","objectBoundingBox"),Zt.append(er);for(let sr=2,nr=dt.length;sr<nr;sr+=8){const ir=dt[sr],or=dt[sr+1],lr=dt[sr+2],cr=dt[sr+3],dr=Yt.createElement("rect"),ur=(lr-$t)/Ht,pr=(Dt-or)/Kt,mr=(ir-lr)/Ht,jr=(or-cr)/Kt;dr.setAttribute("x",ur),dr.setAttribute("y",pr),dr.setAttribute("width",mr),dr.setAttribute("height",jr),er.append(dr),Ut==null||Ut.push(`<rect vector-effect="non-scaling-stroke" x="${ur}" y="${pr}" width="${mr}" height="${jr}"/>`)}ar(this,$y)&&(Ut.push("</g></svg>')"),Ft.backgroundImage=Ut.join("")),this.container.append(Jt),this.container.style.clipPath=`url(#${rr})`}_createPopup(dt=null){const{data:$t}=this;let kt,Tt;dt?(kt={str:dt.text},Tt=dt.date):(kt=$t.contentsObj,Tt=$t.modificationDate);const Dt=vr(this,Ul,new PopupAnnotationElement({data:{color:$t.color,titleObj:$t.titleObj,modificationDate:Tt,contentsObj:kt,richText:$t.richText,parentRect:$t.rect,borderStyle:0,id:`popup_${$t.id}`,rotation:$t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(Dt.render())}get hasPopupElement(){return!!(ar(this,Ul)||this.popup||this.data.popupRef)}get extraPopupElement(){return ar(this,Ul)}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(dt,$t=null){const kt=[];if(this._fieldObjects){const Tt=this._fieldObjects[dt];if(Tt)for(const{page:Dt,id:Ft,exportValues:Ut}of Tt){if(Dt===-1||Ft===$t)continue;const Ht=typeof Ut=="string"?Ut:null,Kt=document.querySelector(`[data-element-id="${Ft}"]`);if(Kt&&!GetElementsByNameSet.has(Kt)){warn(`_getElementsByName - element not allowed: ${Ft}`);continue}kt.push({id:Ft,exportValue:Ht,domElement:Kt})}return kt}for(const Tt of document.getElementsByName(dt)){const{exportValue:Dt}=Tt,Ft=Tt.getAttribute("data-element-id");Ft!==$t&&GetElementsByNameSet.has(Tt)&&kt.push({id:Ft,exportValue:Dt,domElement:Tt})}return kt}show(){var dt;this.container&&(this.container.hidden=!1),(dt=this.popup)==null||dt.maybeShow()}hide(){var dt;this.container&&(this.container.hidden=!0),(dt=this.popup)==null||dt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const dt=this.getElementsToTriggerPopup();if(Array.isArray(dt))for(const $t of dt)$t.classList.add("highlightArea");else dt.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:dt,data:{id:$t}}=this;this.container.addEventListener("dblclick",()=>{var kt;(kt=this.linkService.eventBus)==null||kt.dispatch("switchannotationeditormode",{source:this,mode:dt,editId:$t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Tx=new WeakMap,$y=new WeakMap,Ul=new WeakMap,gE=new WeakSet,j$=function(dt){const{container:{style:$t},data:{rect:kt,rotation:Tt},parent:{viewport:{rawDims:{pageWidth:Dt,pageHeight:Ft,pageX:Ut,pageY:Ht}}}}=this;kt==null||kt.splice(0,4,...dt),$t.left=`${100*(dt[0]-Ut)/Dt}%`,$t.top=`${100*(Ft-dt[3]+Ht)/Ft}%`,Tt===0?($t.width=`${100*(dt[2]-dt[0])/Dt}%`,$t.height=`${100*(dt[3]-dt[1])/Ft}%`):this.setRotation(Tt)};let AnnotationElement=_k;class EditorAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0}),this.editor=dt.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:dt}=this;dt.hasComment&&(this._createPopup(dt.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(dt){this.editor.comment=dt,dt||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var dp,_m,WR,QS,qR,JS;class LinkAnnotationElement extends AnnotationElement{constructor($t,kt=null){super($t,{isRenderable:!0,ignoreBorder:!!(kt!=null&&kt.ignoreBorder),createQuadrilaterals:!0});yr(this,dp);yr(this,WR);yr(this,qR);this.isTooltipOnly=$t.data.isTooltipOnly}render(){const{data:$t,linkService:kt}=this,Tt=document.createElement("a");Tt.setAttribute("data-element-id",$t.id);let Dt=!1;return $t.url?(kt.addLinkAttributes(Tt,$t.url,$t.newWindow),Dt=!0):$t.action?(this._bindNamedAction(Tt,$t.action,$t.overlaidText),Dt=!0):$t.attachment?(Br(this,WR,QS).call(this,Tt,$t.attachment,$t.overlaidText,$t.attachmentDest),Dt=!0):$t.setOCGState?(Br(this,qR,JS).call(this,Tt,$t.setOCGState,$t.overlaidText),Dt=!0):$t.dest?(this._bindLink(Tt,$t.dest,$t.overlaidText),Dt=!0):($t.actions&&($t.actions.Action||$t.actions["Mouse Up"]||$t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Tt,$t),Dt=!0),$t.resetForm?(this._bindResetFormAction(Tt,$t.resetForm),Dt=!0):this.isTooltipOnly&&!Dt&&(this._bindLink(Tt,""),Dt=!0)),this.container.classList.add("linkAnnotation"),Dt&&this.container.append(Tt),this.container}_bindLink($t,kt,Tt=""){$t.href=this.linkService.getDestinationHash(kt),$t.onclick=()=>(kt&&this.linkService.goToDestination(kt),!1),(kt||kt==="")&&Br(this,dp,_m).call(this),Tt&&($t.title=Tt)}_bindNamedAction($t,kt,Tt=""){$t.href=this.linkService.getAnchorUrl(""),$t.onclick=()=>(this.linkService.executeNamedAction(kt),!1),Tt&&($t.title=Tt),Br(this,dp,_m).call(this)}_bindJSAction($t,kt){$t.href=this.linkService.getAnchorUrl("");const Tt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Dt of Object.keys(kt.actions)){const Ft=Tt.get(Dt);Ft&&($t[Ft]=()=>{var Ut;return(Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt.id,name:Dt}}),!1})}kt.overlaidText&&($t.title=kt.overlaidText),$t.onclick||($t.onclick=()=>!1),Br(this,dp,_m).call(this)}_bindResetFormAction($t,kt){const Tt=$t.onclick;if(Tt||($t.href=this.linkService.getAnchorUrl("")),Br(this,dp,_m).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Tt||($t.onclick=()=>!1);return}$t.onclick=()=>{var Jt;Tt==null||Tt();const{fields:Dt,refs:Ft,include:Ut}=kt,Ht=[];if(Dt.length!==0||Ft.length!==0){const Zt=new Set(Ft);for(const er of Dt){const rr=this._fieldObjects[er]||[];for(const{id:sr}of rr)Zt.add(sr)}for(const er of Object.values(this._fieldObjects))for(const rr of er)Zt.has(rr.id)===Ut&&Ht.push(rr)}else for(const Zt of Object.values(this._fieldObjects))Ht.push(...Zt);const Kt=this.annotationStorage,Yt=[];for(const Zt of Ht){const{id:er}=Zt;switch(Yt.push(er),Zt.type){case"text":{const sr=Zt.defaultValue||"";Kt.setValue(er,{value:sr});break}case"checkbox":case"radiobutton":{const sr=Zt.defaultValue===Zt.exportValues;Kt.setValue(er,{value:sr});break}case"combobox":case"listbox":{const sr=Zt.defaultValue||"";Kt.setValue(er,{value:sr});break}default:continue}const rr=document.querySelector(`[data-element-id="${er}"]`);if(rr){if(!GetElementsByNameSet.has(rr)){warn(`_bindResetFormAction - element not allowed: ${er}`);continue}}else continue;rr.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Yt,name:"ResetForm"}})),!1}}}dp=new WeakSet,_m=function(){this.container.setAttribute("data-internal-link","")},WR=new WeakSet,QS=function($t,kt,Tt="",Dt=null){$t.href=this.linkService.getAnchorUrl(""),kt.description?$t.title=kt.description:Tt&&($t.title=Tt),$t.onclick=()=>{var Ft;return(Ft=this.downloadManager)==null||Ft.openOrDownloadData(kt.content,kt.filename,Dt),!1},Br(this,dp,_m).call(this)},qR=new WeakSet,JS=function($t,kt,Tt=""){$t.href=this.linkService.getAnchorUrl(""),$t.onclick=()=>(this.linkService.executeSetOCGState(kt),!1),Tt&&($t.title=Tt),Br(this,dp,_m).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const dt=document.createElement("img");return dt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",dt.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),dt.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(dt),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(dt){var $t;this.data.hasOwnCanvas&&((($t=dt.previousSibling)==null?void 0:$t.nodeName)==="CANVAS"&&(dt.previousSibling.hidden=!0),dt.hidden=!1)}_getKeyModifier(dt){return util_FeatureTest.platform.isMac?dt.metaKey:dt.ctrlKey}_setEventListener(dt,$t,kt,Tt,Dt){kt.includes("mouse")?dt.addEventListener(kt,Ft=>{var Ut;(Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Tt,value:Dt(Ft),shift:Ft.shiftKey,modifier:this._getKeyModifier(Ft)}})}):dt.addEventListener(kt,Ft=>{var Ut;if(kt==="blur"){if(!$t.focused||!Ft.relatedTarget)return;$t.focused=!1}else if(kt==="focus"){if($t.focused)return;$t.focused=!0}Dt&&((Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Tt,value:Dt(Ft)}}))})}_setEventListeners(dt,$t,kt,Tt){var Dt,Ft,Ut;for(const[Ht,Kt]of kt)(Kt==="Action"||(Dt=this.data.actions)!=null&&Dt[Kt])&&((Kt==="Focus"||Kt==="Blur")&&($t||($t={focused:!1})),this._setEventListener(dt,$t,Ht,Kt,Tt),Kt==="Focus"&&!((Ft=this.data.actions)!=null&&Ft.Blur)?this._setEventListener(dt,$t,"blur","Blur",null):Kt==="Blur"&&!((Ut=this.data.actions)!=null&&Ut.Focus)&&this._setEventListener(dt,$t,"focus","Focus",null))}_setBackgroundColor(dt){const $t=this.data.backgroundColor||null;dt.style.backgroundColor=$t===null?"transparent":Util.makeHexColor($t[0],$t[1],$t[2])}_setTextStyle(dt){const $t=["left","center","right"],{fontColor:kt}=this.data.defaultAppearanceData,Tt=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,Dt=dt.style;let Ft;const Ut=2,Ht=Kt=>Math.round(10*Kt)/10;if(this.data.multiLine){const Kt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ut),Yt=Math.round(Kt/(LINE_FACTOR*Tt))||1,Jt=Kt/Yt;Ft=Math.min(Tt,Ht(Jt/LINE_FACTOR))}else{const Kt=Math.abs(this.data.rect[3]-this.data.rect[1]-Ut);Ft=Math.min(Tt,Ht(Kt/LINE_FACTOR))}Dt.fontSize=`calc(${Ft}px * var(--total-scale-factor))`,Dt.color=Util.makeHexColor(kt[0],kt[1],kt[2]),this.data.textAlignment!==null&&(Dt.textAlign=$t[this.data.textAlignment])}_setRequired(dt,$t){$t?dt.setAttribute("required",!0):dt.removeAttribute("required"),dt.setAttribute("aria-required",$t)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){const $t=dt.renderForms||dt.data.hasOwnCanvas||!dt.data.hasAppearance&&!!dt.data.fieldValue;super(dt,{isRenderable:$t})}setPropertyOnSiblings(dt,$t,kt,Tt){const Dt=this.annotationStorage;for(const Ft of this._getElementsByName(dt.name,dt.id))Ft.domElement&&(Ft.domElement[$t]=kt),Dt.setValue(Ft.id,{[Tt]:kt})}render(){var Tt,Dt;const dt=this.annotationStorage,$t=this.data.id;this.container.classList.add("textWidgetAnnotation");let kt=null;if(this.renderForms){const Ft=dt.getValue($t,{value:this.data.fieldValue});let Ut=Ft.value||"";const Ht=dt.getValue($t,{charLimit:this.data.maxLen}).charLimit;Ht&&Ut.length>Ht&&(Ut=Ut.slice(0,Ht));let Kt=Ft.formattedValue||((Tt=this.data.textContent)==null?void 0:Tt.join(`
`))||null;Kt&&this.data.comb&&(Kt=Kt.replaceAll(/\s+/g,""));const Yt={userValue:Ut,formattedValue:Kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(kt=document.createElement("textarea"),kt.textContent=Kt??Ut,this.data.doNotScroll&&(kt.style.overflowY="hidden")):(kt=document.createElement("input"),kt.type=this.data.password?"password":"text",kt.setAttribute("value",Kt??Ut),this.data.doNotScroll&&(kt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(kt.hidden=!0),GetElementsByNameSet.add(kt),kt.setAttribute("data-element-id",$t),kt.disabled=this.data.readOnly,kt.name=this.data.fieldName,kt.tabIndex=0;const{datetimeFormat:Jt,datetimeType:Zt,timeStep:er}=this.data,rr=!!Zt&&this.enableScripting;Jt&&(kt.title=Jt),this._setRequired(kt,this.data.required),Ht&&(kt.maxLength=Ht),kt.addEventListener("input",nr=>{dt.setValue($t,{value:nr.target.value}),this.setPropertyOnSiblings(kt,"value",nr.target.value,"value"),Yt.formattedValue=null}),kt.addEventListener("resetform",nr=>{const ir=this.data.defaultFieldValue??"";kt.value=Yt.userValue=ir,Yt.formattedValue=null});let sr=nr=>{const{formattedValue:ir}=Yt;ir!=null&&(nr.target.value=ir),nr.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){kt.addEventListener("focus",ir=>{var lr;if(Yt.focused)return;const{target:or}=ir;if(rr&&(or.type=Zt,er&&(or.step=er)),Yt.userValue){const cr=Yt.userValue;if(rr)if(Zt==="time"){const dr=new Date(cr),ur=[dr.getHours(),dr.getMinutes(),dr.getSeconds()];or.value=ur.map(pr=>pr.toString().padStart(2,"0")).join(":")}else or.value=new Date(cr-TIMEZONE_OFFSET).toISOString().split(Zt==="date"?"T":".",1)[0];else or.value=cr}Yt.lastCommittedValue=or.value,Yt.commitKey=1,(lr=this.data.actions)!=null&&lr.Focus||(Yt.focused=!0)}),kt.addEventListener("updatefromsandbox",ir=>{this.showElementAndHideCanvas(ir.target);const or={value(lr){Yt.userValue=lr.detail.value??"",rr||dt.setValue($t,{value:Yt.userValue.toString()}),lr.target.value=Yt.userValue},formattedValue(lr){const{formattedValue:cr}=lr.detail;Yt.formattedValue=cr,cr!=null&&lr.target!==document.activeElement&&(lr.target.value=cr);const dr={formattedValue:cr};rr&&(dr.value=cr),dt.setValue($t,dr)},selRange(lr){lr.target.setSelectionRange(...lr.detail.selRange)},charLimit:lr=>{var pr;const{charLimit:cr}=lr.detail,{target:dr}=lr;if(cr===0){dr.removeAttribute("maxLength");return}dr.setAttribute("maxLength",cr);let ur=Yt.userValue;!ur||ur.length<=cr||(ur=ur.slice(0,cr),dr.value=Yt.userValue=ur,dt.setValue($t,{value:ur}),(pr=this.linkService.eventBus)==null||pr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$t,name:"Keystroke",value:ur,willCommit:!0,commitKey:1,selStart:dr.selectionStart,selEnd:dr.selectionEnd}}))}};this._dispatchEventFromSandbox(or,ir)}),kt.addEventListener("keydown",ir=>{var cr;Yt.commitKey=1;let or=-1;if(ir.key==="Escape"?or=0:ir.key==="Enter"&&!this.data.multiLine?or=2:ir.key==="Tab"&&(Yt.commitKey=3),or===-1)return;const{value:lr}=ir.target;Yt.lastCommittedValue!==lr&&(Yt.lastCommittedValue=lr,Yt.userValue=lr,(cr=this.linkService.eventBus)==null||cr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$t,name:"Keystroke",value:lr,willCommit:!0,commitKey:or,selStart:ir.target.selectionStart,selEnd:ir.target.selectionEnd}}))});const nr=sr;sr=null,kt.addEventListener("blur",ir=>{var cr,dr;if(!Yt.focused||!ir.relatedTarget)return;(cr=this.data.actions)!=null&&cr.Blur||(Yt.focused=!1);const{target:or}=ir;let{value:lr}=or;if(rr){if(lr&&Zt==="time"){const ur=lr.split(":").map(pr=>parseInt(pr,10));lr=new Date(2e3,0,1,ur[0],ur[1],ur[2]||0).valueOf(),or.step=""}else lr.includes("T")||(lr=`${lr}T00:00`),lr=new Date(lr).valueOf();or.type="text"}Yt.userValue=lr,Yt.lastCommittedValue!==lr&&((dr=this.linkService.eventBus)==null||dr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$t,name:"Keystroke",value:lr,willCommit:!0,commitKey:Yt.commitKey,selStart:ir.target.selectionStart,selEnd:ir.target.selectionEnd}})),nr(ir)}),(Dt=this.data.actions)!=null&&Dt.Keystroke&&kt.addEventListener("beforeinput",ir=>{var jr;Yt.lastCommittedValue=null;const{data:or,target:lr}=ir,{value:cr,selectionStart:dr,selectionEnd:ur}=lr;let pr=dr,mr=ur;switch(ir.inputType){case"deleteWordBackward":{const Rr=cr.substring(0,dr).match(/\w*[^\w]*$/);Rr&&(pr-=Rr[0].length);break}case"deleteWordForward":{const Rr=cr.substring(dr).match(/^[^\w]*\w*/);Rr&&(mr+=Rr[0].length);break}case"deleteContentBackward":dr===ur&&(pr-=1);break;case"deleteContentForward":dr===ur&&(mr+=1);break}ir.preventDefault(),(jr=this.linkService.eventBus)==null||jr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$t,name:"Keystroke",value:cr,change:or||"",willCommit:!1,selStart:pr,selEnd:mr}})}),this._setEventListeners(kt,Yt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ir=>ir.target.value)}if(sr&&kt.addEventListener("blur",sr),this.data.comb){const ir=(this.data.rect[2]-this.data.rect[0])/Ht;kt.classList.add("comb"),kt.style.letterSpacing=`calc(${ir}px * var(--total-scale-factor) - 1ch)`}}else kt=document.createElement("div"),kt.textContent=this.data.fieldValue,kt.style.verticalAlign="middle",kt.style.display="table-cell",this.data.hasOwnCanvas&&(kt.hidden=!0);return this._setTextStyle(kt),this._setBackgroundColor(kt),this._setDefaultPropertiesFromJS(kt),this.container.append(kt),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){super(dt,{isRenderable:!!dt.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){const dt=this.annotationStorage,$t=this.data,kt=$t.id;let Tt=dt.getValue(kt,{value:$t.exportValue===$t.fieldValue}).value;typeof Tt=="string"&&(Tt=Tt!=="Off",dt.setValue(kt,{value:Tt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Dt=document.createElement("input");return GetElementsByNameSet.add(Dt),Dt.setAttribute("data-element-id",kt),Dt.disabled=$t.readOnly,this._setRequired(Dt,this.data.required),Dt.type="checkbox",Dt.name=$t.fieldName,Tt&&Dt.setAttribute("checked",!0),Dt.setAttribute("exportValue",$t.exportValue),Dt.tabIndex=0,Dt.addEventListener("change",Ft=>{const{name:Ut,checked:Ht}=Ft.target;for(const Kt of this._getElementsByName(Ut,kt)){const Yt=Ht&&Kt.exportValue===$t.exportValue;Kt.domElement&&(Kt.domElement.checked=Yt),dt.setValue(Kt.id,{value:Yt})}dt.setValue(kt,{value:Ht})}),Dt.addEventListener("resetform",Ft=>{const Ut=$t.defaultFieldValue||"Off";Ft.target.checked=Ut===$t.exportValue}),this.enableScripting&&this.hasJSActions&&(Dt.addEventListener("updatefromsandbox",Ft=>{const Ut={value(Ht){Ht.target.checked=Ht.detail.value!=="Off",dt.setValue(kt,{value:Ht.target.checked})}};this._dispatchEventFromSandbox(Ut,Ft)}),this._setEventListeners(Dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ft=>Ft.target.checked)),this._setBackgroundColor(Dt),this._setDefaultPropertiesFromJS(Dt),this.container.append(Dt),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const dt=this.annotationStorage,$t=this.data,kt=$t.id;let Tt=dt.getValue(kt,{value:$t.fieldValue===$t.buttonValue}).value;if(typeof Tt=="string"&&(Tt=Tt!==$t.buttonValue,dt.setValue(kt,{value:Tt})),Tt)for(const Ft of this._getElementsByName($t.fieldName,kt))dt.setValue(Ft.id,{value:!1});const Dt=document.createElement("input");if(GetElementsByNameSet.add(Dt),Dt.setAttribute("data-element-id",kt),Dt.disabled=$t.readOnly,this._setRequired(Dt,this.data.required),Dt.type="radio",Dt.name=$t.fieldName,Tt&&Dt.setAttribute("checked",!0),Dt.tabIndex=0,Dt.addEventListener("change",Ft=>{const{name:Ut,checked:Ht}=Ft.target;for(const Kt of this._getElementsByName(Ut,kt))dt.setValue(Kt.id,{value:!1});dt.setValue(kt,{value:Ht})}),Dt.addEventListener("resetform",Ft=>{const Ut=$t.defaultFieldValue;Ft.target.checked=Ut!=null&&Ut===$t.buttonValue}),this.enableScripting&&this.hasJSActions){const Ft=$t.buttonValue;Dt.addEventListener("updatefromsandbox",Ut=>{const Ht={value:Kt=>{const Yt=Ft===Kt.detail.value;for(const Jt of this._getElementsByName(Kt.target.name)){const Zt=Yt&&Jt.id===kt;Jt.domElement&&(Jt.domElement.checked=Zt),dt.setValue(Jt.id,{value:Zt})}}};this._dispatchEventFromSandbox(Ht,Ut)}),this._setEventListeners(Dt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ut=>Ut.target.checked)}return this._setBackgroundColor(Dt),this._setDefaultPropertiesFromJS(Dt),this.container.append(Dt),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(dt){super(dt,{ignoreBorder:dt.data.hasAppearance})}render(){const dt=super.render();dt.classList.add("buttonWidgetAnnotation","pushButton");const $t=dt.lastChild;return this.enableScripting&&this.hasJSActions&&$t&&(this._setDefaultPropertiesFromJS($t),$t.addEventListener("updatefromsandbox",kt=>{this._dispatchEventFromSandbox({},kt)})),dt}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(dt){super(dt,{isRenderable:dt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const dt=this.annotationStorage,$t=this.data.id,kt=dt.getValue($t,{value:this.data.fieldValue}),Tt=document.createElement("select");GetElementsByNameSet.add(Tt),Tt.setAttribute("data-element-id",$t),Tt.disabled=this.data.readOnly,this._setRequired(Tt,this.data.required),Tt.name=this.data.fieldName,Tt.tabIndex=0;let Dt=this.data.combo&&this.data.options.length>0;this.data.combo||(Tt.size=this.data.options.length,this.data.multiSelect&&(Tt.multiple=!0)),Tt.addEventListener("resetform",Yt=>{const Jt=this.data.defaultFieldValue;for(const Zt of Tt.options)Zt.selected=Zt.value===Jt});for(const Yt of this.data.options){const Jt=document.createElement("option");Jt.textContent=Yt.displayValue,Jt.value=Yt.exportValue,kt.value.includes(Yt.exportValue)&&(Jt.setAttribute("selected",!0),Dt=!1),Tt.append(Jt)}let Ft=null;if(Dt){const Yt=document.createElement("option");Yt.value=" ",Yt.setAttribute("hidden",!0),Yt.setAttribute("selected",!0),Tt.prepend(Yt),Ft=()=>{Yt.remove(),Tt.removeEventListener("input",Ft),Ft=null},Tt.addEventListener("input",Ft)}const Ut=Yt=>{const Jt=Yt?"value":"textContent",{options:Zt,multiple:er}=Tt;return er?Array.prototype.filter.call(Zt,rr=>rr.selected).map(rr=>rr[Jt]):Zt.selectedIndex===-1?null:Zt[Zt.selectedIndex][Jt]};let Ht=Ut(!1);const Kt=Yt=>{const Jt=Yt.target.options;return Array.prototype.map.call(Jt,Zt=>({displayValue:Zt.textContent,exportValue:Zt.value}))};return this.enableScripting&&this.hasJSActions?(Tt.addEventListener("updatefromsandbox",Yt=>{const Jt={value(Zt){Ft==null||Ft();const er=Zt.detail.value,rr=new Set(Array.isArray(er)?er:[er]);for(const sr of Tt.options)sr.selected=rr.has(sr.value);dt.setValue($t,{value:Ut(!0)}),Ht=Ut(!1)},multipleSelection(Zt){Tt.multiple=!0},remove(Zt){const er=Tt.options,rr=Zt.detail.remove;er[rr].selected=!1,Tt.remove(rr),er.length>0&&Array.prototype.findIndex.call(er,nr=>nr.selected)===-1&&(er[0].selected=!0),dt.setValue($t,{value:Ut(!0),items:Kt(Zt)}),Ht=Ut(!1)},clear(Zt){for(;Tt.length!==0;)Tt.remove(0);dt.setValue($t,{value:null,items:[]}),Ht=Ut(!1)},insert(Zt){const{index:er,displayValue:rr,exportValue:sr}=Zt.detail.insert,nr=Tt.children[er],ir=document.createElement("option");ir.textContent=rr,ir.value=sr,nr?nr.before(ir):Tt.append(ir),dt.setValue($t,{value:Ut(!0),items:Kt(Zt)}),Ht=Ut(!1)},items(Zt){const{items:er}=Zt.detail;for(;Tt.length!==0;)Tt.remove(0);for(const rr of er){const{displayValue:sr,exportValue:nr}=rr,ir=document.createElement("option");ir.textContent=sr,ir.value=nr,Tt.append(ir)}Tt.options.length>0&&(Tt.options[0].selected=!0),dt.setValue($t,{value:Ut(!0),items:Kt(Zt)}),Ht=Ut(!1)},indices(Zt){const er=new Set(Zt.detail.indices);for(const rr of Zt.target.options)rr.selected=er.has(rr.index);dt.setValue($t,{value:Ut(!0)}),Ht=Ut(!1)},editable(Zt){Zt.target.disabled=!Zt.detail.editable}};this._dispatchEventFromSandbox(Jt,Yt)}),Tt.addEventListener("input",Yt=>{var er;const Jt=Ut(!0),Zt=Ut(!1);dt.setValue($t,{value:Jt}),Yt.preventDefault(),(er=this.linkService.eventBus)==null||er.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$t,name:"Keystroke",value:Ht,change:Zt,changeEx:Jt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Tt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Yt=>Yt.target.value)):Tt.addEventListener("input",function(Yt){dt.setValue($t,{value:Ut(!0)})}),this.data.combo&&this._setTextStyle(Tt),this._setBackgroundColor(Tt),this._setDefaultPropertiesFromJS(Tt),this.container.append(Tt),this.container}}var bE,w$;class PopupAnnotationElement extends AnnotationElement{constructor($t){const{data:kt,elements:Tt,parent:Dt}=$t,Ft=!!Dt._commentManager;super($t,{isRenderable:!Ft&&AnnotationElement._hasPopupData(kt)});yr(this,bE);if(this.elements=Tt,Ft&&AnnotationElement._hasPopupData(kt)){const Ut=this.popup=Br(this,bE,w$).call(this);for(const Ht of Tt)Ht.popup=Ut}else this.popup=null}render(){const{container:$t}=this;$t.classList.add("popupAnnotation"),$t.role="comment";const kt=this.popup=Br(this,bE,w$).call(this),Tt=[];for(const Dt of this.elements)Dt.popup=kt,Dt.container.ariaHasPopup="dialog",Tt.push(Dt.data.id),Dt.addHighlightArea();return this.container.setAttribute("aria-controls",Tt.map(Dt=>`${AnnotationPrefix}${Dt}`).join(",")),this.container}}bE=new WeakSet,w$=function(){return new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var El,tm,KR,YR,ky,Sy,Xn,ku,sm,Nx,_y,Cy,Su,wl,up,hp,co,pp,im,yE,fp,Ay,Px,am,No,om,Ty,Tw,vE,R$,EE,$$,jE,k$,Ny,Nw,wE,S$,XR,ZS,QR,e_,JR,t_,ZR,r_,Py,Pw,My,Mw,RE,_$;class PopupElement{constructor({container:dt,color:$t,elements:kt,titleObj:Tt,modificationDate:Dt,contentsObj:Ft,richText:Ut,parent:Ht,rect:Kt,parentRect:Yt,open:Jt,commentManager:Zt=null}){yr(this,Ty);yr(this,vE);yr(this,EE);yr(this,jE);yr(this,Ny);yr(this,wE);yr(this,XR);yr(this,QR);yr(this,JR);yr(this,ZR);yr(this,Py);yr(this,My);yr(this,RE);yr(this,El,null);yr(this,tm,Br(this,JR,t_).bind(this));yr(this,KR,Br(this,RE,_$).bind(this));yr(this,YR,Br(this,My,Mw).bind(this));yr(this,ky,Br(this,Py,Pw).bind(this));yr(this,Sy,null);yr(this,Xn,null);yr(this,ku,null);yr(this,sm,null);yr(this,Nx,null);yr(this,_y,null);yr(this,Cy,null);yr(this,Su,!1);yr(this,wl,null);yr(this,up,null);yr(this,hp,null);yr(this,co,null);yr(this,pp,null);yr(this,im,null);yr(this,yE,null);yr(this,fp,null);yr(this,Ay,null);yr(this,Px,null);yr(this,am,!1);yr(this,No,null);yr(this,om,null);vr(this,Xn,dt),vr(this,Ay,Tt),vr(this,ku,Ft),vr(this,fp,Ut),vr(this,_y,Ht),vr(this,Sy,$t),vr(this,yE,Kt),vr(this,Cy,Yt),vr(this,Nx,kt),vr(this,El,Zt),vr(this,No,kt[0]),vr(this,sm,PDFDateString.toDateObject(Dt)),this.trigger=kt.flatMap(er=>er.getElementsToTriggerPopup()),Zt?this.renderCommentButton():(Br(this,Ty,Tw).call(this),ar(this,Xn).hidden=!0,Jt&&Br(this,Py,Pw).call(this))}renderCommentButton(){if(ar(this,co)||(ar(this,pp)||Br(this,vE,R$).call(this),!ar(this,pp)))return;const{signal:dt}=vr(this,up,new AbortController),$t=!!ar(this,No).extraPopupElement,kt=()=>{ar(this,El).toggleCommentPopup(this,!0,void 0,!$t)},Tt=()=>{ar(this,El).toggleCommentPopup(this,!1,!0,!$t)},Dt=()=>{ar(this,El).toggleCommentPopup(this,!1,!1)};if($t){vr(this,co,ar(this,No).container);for(const Ft of this.trigger)Ft.ariaHasPopup="dialog",Ft.ariaControls="commentPopup",Ft.addEventListener("keydown",ar(this,tm),{signal:dt}),Ft.addEventListener("click",kt,{signal:dt}),Ft.addEventListener("pointerenter",Tt,{signal:dt}),Ft.addEventListener("pointerleave",Dt,{signal:dt}),Ft.classList.add("popupTriggerArea")}else{const Ft=vr(this,co,document.createElement("button"));Ft.className="annotationCommentButton";const Ut=ar(this,No).container;Ft.style.zIndex=Ut.style.zIndex+1,Ft.tabIndex=0,Ft.ariaHasPopup="dialog",Ft.ariaControls="commentPopup",Ft.setAttribute("data-l10n-id","pdfjs-show-comment-button"),Br(this,jE,k$).call(this),Br(this,EE,$$).call(this),Ft.addEventListener("keydown",ar(this,tm),{signal:dt}),Ft.addEventListener("click",kt,{signal:dt}),Ft.addEventListener("pointerenter",Tt,{signal:dt}),Ft.addEventListener("pointerleave",Dt,{signal:dt}),Ut.after(Ft)}}get commentButtonColor(){const{color:dt,opacity:$t}=ar(this,No).commentData;return dt?ar(this,_y)._commentManager.makeCommentColor(dt,$t):null}focusCommentButton(){setTimeout(()=>{var dt;(dt=ar(this,co))==null||dt.focus()},0)}getData(){const{richText:dt,color:$t,opacity:kt,creationDate:Tt,modificationDate:Dt}=ar(this,No).commentData;return{contentsObj:{str:this.comment},richText:dt,color:$t,opacity:kt,creationDate:Tt,modificationDate:Dt}}get elementBeforePopup(){return ar(this,co)}get comment(){return ar(this,om)||vr(this,om,ar(this,No).commentText),ar(this,om)}set comment(dt){dt!==this.comment&&(ar(this,No).commentText=vr(this,om,dt))}get parentBoundingClientRect(){return ar(this,No).layer.getBoundingClientRect()}setCommentButtonStates({selected:dt,hasPopup:$t}){ar(this,co)&&(ar(this,co).classList.toggle("selected",dt),ar(this,co).ariaExpanded=$t)}setSelectedCommentButton(dt){ar(this,co).classList.toggle("selected",dt)}get commentPopupPosition(){if(ar(this,im))return ar(this,im);const{x:dt,y:$t,height:kt}=ar(this,co).getBoundingClientRect(),{x:Tt,y:Dt,width:Ft,height:Ut}=ar(this,No).layer.getBoundingClientRect();return[(dt-Tt)/Ft,($t+kt-Dt)/Ut]}set commentPopupPosition(dt){vr(this,im,dt)}hasDefaultPopupPosition(){return ar(this,im)===null}get commentButtonPosition(){return ar(this,pp)}get commentButtonWidth(){return ar(this,co).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(dt){const[$t,kt]=ar(this,im)||this.commentButtonPosition.map(Kt=>Kt/100),Tt=this.parentBoundingClientRect,{x:Dt,y:Ft,width:Ut,height:Ht}=Tt;ar(this,El).showDialog(null,this,Dt+$t*Ut,Ft+kt*Ht,{...dt,parentDimensions:Tt})}render(){var kt,Tt;if(ar(this,wl))return;const dt=vr(this,wl,document.createElement("div"));if(dt.className="popup",ar(this,Sy)){const Dt=dt.style.outlineColor=Util.makeHexColor(...ar(this,Sy));dt.style.backgroundColor=`color-mix(in srgb, ${Dt} 30%, white)`}const $t=document.createElement("span");if($t.className="header",(kt=ar(this,Ay))!=null&&kt.str){const Dt=document.createElement("span");Dt.className="title",$t.append(Dt),{dir:Dt.dir,str:Dt.textContent}=ar(this,Ay)}if(dt.append($t),ar(this,sm)){const Dt=document.createElement("time");Dt.className="popupDate",Dt.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),Dt.setAttribute("data-l10n-args",JSON.stringify({dateObj:ar(this,sm).valueOf()})),Dt.dateTime=ar(this,sm).toISOString(),$t.append(Dt)}renderRichText({html:ar(this,Ny,Nw)||ar(this,ku).str,dir:(Tt=ar(this,ku))==null?void 0:Tt.dir,className:"popupContent"},dt),ar(this,Xn).append(dt)}updateEdited({rect:dt,popup:$t,deleted:kt}){var Tt;if(ar(this,El)){kt?(this.remove(),vr(this,om,null)):$t&&($t.deleted?this.remove():(Br(this,jE,k$).call(this),vr(this,om,$t.text))),dt&&(vr(this,pp,null),Br(this,vE,R$).call(this),Br(this,EE,$$).call(this));return}if(kt||$t!=null&&$t.deleted){this.remove();return}Br(this,Ty,Tw).call(this),ar(this,Px)||vr(this,Px,{contentsObj:ar(this,ku),richText:ar(this,fp)}),dt&&vr(this,hp,null),$t&&$t.text&&(vr(this,fp,Br(this,QR,e_).call(this,$t.text)),vr(this,sm,PDFDateString.toDateObject($t.date)),vr(this,ku,null)),(Tt=ar(this,wl))==null||Tt.remove(),vr(this,wl,null)}resetEdited(){var dt;ar(this,Px)&&({contentsObj:ga(this,ku)._,richText:ga(this,fp)._}=ar(this,Px),vr(this,Px,null),(dt=ar(this,wl))==null||dt.remove(),vr(this,wl,null),vr(this,hp,null))}remove(){var dt,$t,kt;if((dt=ar(this,up))==null||dt.abort(),vr(this,up,null),($t=ar(this,wl))==null||$t.remove(),vr(this,wl,null),vr(this,am,!1),vr(this,Su,!1),(kt=ar(this,co))==null||kt.remove(),vr(this,co,null),this.trigger)for(const Tt of this.trigger)Tt.classList.remove("popupTriggerArea")}forceHide(){vr(this,am,this.isVisible),ar(this,am)&&(ar(this,Xn).hidden=!0)}maybeShow(){ar(this,El)||(Br(this,Ty,Tw).call(this),ar(this,am)&&(ar(this,wl)||Br(this,My,Mw).call(this),vr(this,am,!1),ar(this,Xn).hidden=!1))}get isVisible(){return ar(this,El)?!1:ar(this,Xn).hidden===!1}}El=new WeakMap,tm=new WeakMap,KR=new WeakMap,YR=new WeakMap,ky=new WeakMap,Sy=new WeakMap,Xn=new WeakMap,ku=new WeakMap,sm=new WeakMap,Nx=new WeakMap,_y=new WeakMap,Cy=new WeakMap,Su=new WeakMap,wl=new WeakMap,up=new WeakMap,hp=new WeakMap,co=new WeakMap,pp=new WeakMap,im=new WeakMap,yE=new WeakMap,fp=new WeakMap,Ay=new WeakMap,Px=new WeakMap,am=new WeakMap,No=new WeakMap,om=new WeakMap,Ty=new WeakSet,Tw=function(){var $t;if(ar(this,up))return;vr(this,up,new AbortController);const{signal:dt}=ar(this,up);for(const kt of this.trigger)kt.addEventListener("click",ar(this,ky),{signal:dt}),kt.addEventListener("pointerenter",ar(this,YR),{signal:dt}),kt.addEventListener("pointerleave",ar(this,KR),{signal:dt}),kt.classList.add("popupTriggerArea");for(const kt of ar(this,Nx))($t=kt.container)==null||$t.addEventListener("keydown",ar(this,tm),{signal:dt})},vE=new WeakSet,R$=function(){const dt=ar(this,Nx).find($t=>$t.hasCommentButton);dt&&vr(this,pp,dt._normalizePoint(dt.commentButtonPosition))},EE=new WeakSet,$$=function(){if(ar(this,No).extraPopupElement&&!ar(this,No).editor)return;this.renderCommentButton();const[dt,$t]=ar(this,pp),{style:kt}=ar(this,co);kt.left=`calc(${dt}%)`,kt.top=`calc(${$t}% - var(--comment-button-dim))`},jE=new WeakSet,k$=function(){ar(this,No).extraPopupElement||(this.renderCommentButton(),ar(this,co).style.backgroundColor=this.commentButtonColor||"")},Ny=new WeakSet,Nw=function(){const dt=ar(this,fp),$t=ar(this,ku);return dt!=null&&dt.str&&(!($t!=null&&$t.str)||$t.str===dt.str)&&ar(this,fp).html||null},wE=new WeakSet,S$=function(){var dt,$t,kt;return((kt=($t=(dt=ar(this,Ny,Nw))==null?void 0:dt.attributes)==null?void 0:$t.style)==null?void 0:kt.fontSize)||0},XR=new WeakSet,ZS=function(){var dt,$t,kt;return((kt=($t=(dt=ar(this,Ny,Nw))==null?void 0:dt.attributes)==null?void 0:$t.style)==null?void 0:kt.color)||null},QR=new WeakSet,e_=function(dt){const $t=[],kt={str:dt,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:$t}]}},Tt={style:{color:ar(this,XR,ZS),fontSize:ar(this,wE,S$)?`calc(${ar(this,wE,S$)}px * var(--total-scale-factor))`:""}};for(const Dt of dt.split(`
`))$t.push({name:"span",value:Dt,attributes:Tt});return kt},JR=new WeakSet,t_=function(dt){dt.altKey||dt.shiftKey||dt.ctrlKey||dt.metaKey||(dt.key==="Enter"||dt.key==="Escape"&&ar(this,Su))&&Br(this,Py,Pw).call(this)},ZR=new WeakSet,r_=function(){if(ar(this,hp)!==null)return;const{page:{view:dt},viewport:{rawDims:{pageWidth:$t,pageHeight:kt,pageX:Tt,pageY:Dt}}}=ar(this,_y);let Ft=!!ar(this,Cy),Ut=Ft?ar(this,Cy):ar(this,yE);for(const rr of ar(this,Nx))if(!Ut||Util.intersect(rr.data.rect,Ut)!==null){Ut=rr.data.rect,Ft=!0;break}const Ht=Util.normalizeRect([Ut[0],dt[3]-Ut[1]+dt[1],Ut[2],dt[3]-Ut[3]+dt[1]]),Kt=5,Yt=Ft?Ut[2]-Ut[0]+Kt:0,Jt=Ht[0]+Yt,Zt=Ht[1];vr(this,hp,[100*(Jt-Tt)/$t,100*(Zt-Dt)/kt]);const{style:er}=ar(this,Xn);er.left=`${ar(this,hp)[0]}%`,er.top=`${ar(this,hp)[1]}%`},Py=new WeakSet,Pw=function(){if(ar(this,El)){ar(this,El).toggleCommentPopup(this,!1);return}vr(this,Su,!ar(this,Su)),ar(this,Su)?(Br(this,My,Mw).call(this),ar(this,Xn).addEventListener("click",ar(this,ky)),ar(this,Xn).addEventListener("keydown",ar(this,tm))):(Br(this,RE,_$).call(this),ar(this,Xn).removeEventListener("click",ar(this,ky)),ar(this,Xn).removeEventListener("keydown",ar(this,tm)))},My=new WeakSet,Mw=function(){ar(this,wl)||this.render(),this.isVisible?ar(this,Su)&&ar(this,Xn).classList.add("focused"):(Br(this,ZR,r_).call(this),ar(this,Xn).hidden=!1,ar(this,Xn).style.zIndex=parseInt(ar(this,Xn).style.zIndex)+1e3)},RE=new WeakSet,_$=function(){ar(this,Xn).classList.remove("focused"),!(ar(this,Su)||!this.isVisible)&&(ar(this,Xn).hidden=!0,ar(this,Xn).style.zIndex=parseInt(ar(this,Xn).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=dt.data.textContent,this.textPosition=dt.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const dt=document.createElement("div");dt.classList.add("annotationTextContent"),dt.setAttribute("role","comment");for(const $t of this.textContent){const kt=document.createElement("span");kt.textContent=$t,dt.append(kt)}this.container.append(dt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $E;class LineAnnotationElement extends AnnotationElement{constructor($t){super($t,{isRenderable:!0,ignoreBorder:!0});yr(this,$E,null)}render(){this.container.classList.add("lineAnnotation");const{data:$t,width:kt,height:Tt}=this,Dt=this.svgFactory.create(kt,Tt,!0),Ft=vr(this,$E,this.svgFactory.createElement("svg:line"));return Ft.setAttribute("x1",$t.rect[2]-$t.lineCoordinates[0]),Ft.setAttribute("y1",$t.rect[3]-$t.lineCoordinates[1]),Ft.setAttribute("x2",$t.rect[2]-$t.lineCoordinates[2]),Ft.setAttribute("y2",$t.rect[3]-$t.lineCoordinates[3]),Ft.setAttribute("stroke-width",$t.borderStyle.width||1),Ft.setAttribute("stroke","transparent"),Ft.setAttribute("fill","transparent"),Dt.append(Ft),this.container.append(Dt),!$t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ar(this,$E)}addHighlightArea(){this.container.classList.add("highlightArea")}}$E=new WeakMap;var kE;class SquareAnnotationElement extends AnnotationElement{constructor($t){super($t,{isRenderable:!0,ignoreBorder:!0});yr(this,kE,null)}render(){this.container.classList.add("squareAnnotation");const{data:$t,width:kt,height:Tt}=this,Dt=this.svgFactory.create(kt,Tt,!0),Ft=$t.borderStyle.width,Ut=vr(this,kE,this.svgFactory.createElement("svg:rect"));return Ut.setAttribute("x",Ft/2),Ut.setAttribute("y",Ft/2),Ut.setAttribute("width",kt-Ft),Ut.setAttribute("height",Tt-Ft),Ut.setAttribute("stroke-width",Ft||1),Ut.setAttribute("stroke","transparent"),Ut.setAttribute("fill","transparent"),Dt.append(Ut),this.container.append(Dt),!$t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ar(this,kE)}addHighlightArea(){this.container.classList.add("highlightArea")}}kE=new WeakMap;var SE;class CircleAnnotationElement extends AnnotationElement{constructor($t){super($t,{isRenderable:!0,ignoreBorder:!0});yr(this,SE,null)}render(){this.container.classList.add("circleAnnotation");const{data:$t,width:kt,height:Tt}=this,Dt=this.svgFactory.create(kt,Tt,!0),Ft=$t.borderStyle.width,Ut=vr(this,SE,this.svgFactory.createElement("svg:ellipse"));return Ut.setAttribute("cx",kt/2),Ut.setAttribute("cy",Tt/2),Ut.setAttribute("rx",kt/2-Ft/2),Ut.setAttribute("ry",Tt/2-Ft/2),Ut.setAttribute("stroke-width",Ft||1),Ut.setAttribute("stroke","transparent"),Ut.setAttribute("fill","transparent"),Dt.append(Ut),this.container.append(Dt),!$t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ar(this,SE)}addHighlightArea(){this.container.classList.add("highlightArea")}}SE=new WeakMap;var _E;class PolylineAnnotationElement extends AnnotationElement{constructor($t){super($t,{isRenderable:!0,ignoreBorder:!0});yr(this,_E,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:$t,vertices:kt,borderStyle:Tt,popupRef:Dt},width:Ft,height:Ut}=this;if(!kt)return this.container;const Ht=this.svgFactory.create(Ft,Ut,!0);let Kt=[];for(let Jt=0,Zt=kt.length;Jt<Zt;Jt+=2){const er=kt[Jt]-$t[0],rr=$t[3]-kt[Jt+1];Kt.push(`${er},${rr}`)}Kt=Kt.join(" ");const Yt=vr(this,_E,this.svgFactory.createElement(this.svgElementName));return Yt.setAttribute("points",Kt),Yt.setAttribute("stroke-width",Tt.width||1),Yt.setAttribute("stroke","transparent"),Yt.setAttribute("fill","transparent"),Ht.append(Yt),this.container.append(Ht),!Dt&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ar(this,_E)}addHighlightArea(){this.container.classList.add("highlightArea")}}_E=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(dt){super(dt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var CE,Mx,AE,C$;class InkAnnotationElement extends AnnotationElement{constructor($t){super($t,{isRenderable:!0,ignoreBorder:!0});yr(this,AE);yr(this,CE,null);yr(this,Mx,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:$t,rotation:kt,inkLists:Tt,borderStyle:Dt,popupRef:Ft}}=this,{transform:Ut,width:Ht,height:Kt}=Br(this,AE,C$).call(this,kt,$t),Yt=this.svgFactory.create(Ht,Kt,!0),Jt=vr(this,CE,this.svgFactory.createElement("svg:g"));Yt.append(Jt),Jt.setAttribute("stroke-width",Dt.width||1),Jt.setAttribute("stroke-linecap","round"),Jt.setAttribute("stroke-linejoin","round"),Jt.setAttribute("stroke-miterlimit",10),Jt.setAttribute("stroke","transparent"),Jt.setAttribute("fill","transparent"),Jt.setAttribute("transform",Ut);for(let Zt=0,er=Tt.length;Zt<er;Zt++){const rr=this.svgFactory.createElement(this.svgElementName);ar(this,Mx).push(rr),rr.setAttribute("points",Tt[Zt].join(",")),Jt.append(rr)}return!Ft&&this.hasPopupData&&this._createPopup(),this.container.append(Yt),this._editOnDoubleClick(),this.container}updateEdited($t){super.updateEdited($t);const{thickness:kt,points:Tt,rect:Dt}=$t,Ft=ar(this,CE);if(kt>=0&&Ft.setAttribute("stroke-width",kt||1),Tt)for(let Ut=0,Ht=ar(this,Mx).length;Ut<Ht;Ut++)ar(this,Mx)[Ut].setAttribute("points",Tt[Ut].join(","));if(Dt){const{transform:Ut,width:Ht,height:Kt}=Br(this,AE,C$).call(this,this.data.rotation,Dt);Ft.parentElement.setAttribute("viewBox",`0 0 ${Ht} ${Kt}`),Ft.setAttribute("transform",Ut)}}getElementsToTriggerPopup(){return ar(this,Mx)}addHighlightArea(){this.container.classList.add("highlightArea")}}CE=new WeakMap,Mx=new WeakMap,AE=new WeakSet,C$=function($t,kt){switch($t){case 90:return{transform:`rotate(90) translate(${-kt[0]},${kt[1]}) scale(1,-1)`,width:kt[3]-kt[1],height:kt[2]-kt[0]};case 180:return{transform:`rotate(180) translate(${-kt[2]},${kt[1]}) scale(1,-1)`,width:kt[2]-kt[0],height:kt[3]-kt[1]};case 270:return{transform:`rotate(270) translate(${-kt[2]},${kt[3]}) scale(1,-1)`,width:kt[3]-kt[1],height:kt[2]-kt[0]};default:return{transform:`translate(${-kt[0]},${kt[3]}) scale(1,-1)`,width:kt[2]-kt[0],height:kt[3]-kt[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){const{data:{overlaidText:dt,popupRef:$t}}=this;if(!$t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),dt){const kt=document.createElement("mark");kt.classList.add("overlaidText"),kt.textContent=dt,this.container.append(kt)}return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:dt,popupRef:$t}}=this;if(!$t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),dt){const kt=document.createElement("u");kt.classList.add("overlaidText"),kt.textContent=dt,this.container.append(kt)}return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:dt,popupRef:$t}}=this;if(!$t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),dt){const kt=document.createElement("u");kt.classList.add("overlaidText"),kt.textContent=dt,this.container.append(kt)}return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:dt,popupRef:$t}}=this;if(!$t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),dt){const kt=document.createElement("s");kt.classList.add("overlaidText"),kt.textContent=dt,this.container.append(kt)}return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(dt){super(dt,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var TE,NE,A$;class FileAttachmentAnnotationElement extends AnnotationElement{constructor($t){var Tt;super($t,{isRenderable:!0});yr(this,NE);yr(this,TE,null);const{file:kt}=this.data;this.filename=kt.filename,this.content=kt.content,(Tt=this.linkService.eventBus)==null||Tt.dispatch("fileattachmentannotation",{source:this,...kt})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:$t,data:kt}=this;let Tt;kt.hasAppearance||kt.fillAlpha===0?Tt=document.createElement("div"):(Tt=document.createElement("img"),Tt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(kt.name)?"paperclip":"pushpin"}.svg`,kt.fillAlpha&&kt.fillAlpha<1&&(Tt.style=`filter: opacity(${Math.round(kt.fillAlpha*100)}%);`)),Tt.addEventListener("dblclick",Br(this,NE,A$).bind(this)),vr(this,TE,Tt);const{isMac:Dt}=util_FeatureTest.platform;return $t.addEventListener("keydown",Ft=>{Ft.key==="Enter"&&(Dt?Ft.metaKey:Ft.ctrlKey)&&Br(this,NE,A$).call(this)}),!kt.popupRef&&this.hasPopupData?this._createPopup():Tt.classList.add("popupTriggerArea"),$t.append(Tt),$t}getElementsToTriggerPopup(){return ar(this,TE)}addHighlightArea(){this.container.classList.add("highlightArea")}}TE=new WeakMap,NE=new WeakSet,A$=function(){var $t;($t=this.downloadManager)==null||$t.openOrDownloadData(this.content,this.filename)};var Iy,Ix,Dy,lm,PE,Dx,ME,T$,IE,N$,DE;let AnnotationLayer$1=(DE=class{constructor({div:dt,accessibilityManager:$t,annotationCanvasMap:kt,annotationEditorUIManager:Tt,page:Dt,viewport:Ft,structTreeLayer:Ut,commentManager:Ht,linkService:Kt,annotationStorage:Yt}){yr(this,ME);yr(this,IE);yr(this,Iy,null);yr(this,Ix,null);yr(this,Dy,null);yr(this,lm,new Map);yr(this,PE,null);yr(this,Dx,null);this.div=dt,vr(this,Iy,$t),vr(this,Ix,kt),vr(this,PE,Ut||null),vr(this,Dx,Kt||null),vr(this,Dy,Yt||new AnnotationStorage),this.page=Dt,this.viewport=Ft,this.zIndex=0,this._annotationEditorUIManager=Tt,this._commentManager=Ht||null}hasEditableAnnotations(){return ar(this,lm).size>0}async render(dt){var Ft,Ut,Ht;const{annotations:$t}=dt,kt=this.div;setLayerDimensions(kt,this.viewport);const Tt=new Map,Dt={data:null,layer:kt,linkService:ar(this,Dx),downloadManager:dt.downloadManager,imageResourcesPath:dt.imageResourcesPath||"",renderForms:dt.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:ar(this,Dy),enableComment:dt.enableComment===!0,enableScripting:dt.enableScripting===!0,hasJSActions:dt.hasJSActions,fieldObjects:dt.fieldObjects,parent:this,elements:null};for(const Kt of $t){if(Kt.noHTML)continue;const Yt=Kt.annotationType===AnnotationType.POPUP;if(Yt){const er=Tt.get(Kt.id);if(!er)continue;Dt.elements=er}else if(Kt.rect[2]===Kt.rect[0]||Kt.rect[3]===Kt.rect[1])continue;Dt.data=Kt;const Jt=AnnotationElementFactory.create(Dt);if(!Jt.isRenderable)continue;if(!Yt&&Kt.popupRef){const er=Tt.get(Kt.popupRef);er?er.push(Jt):Tt.set(Kt.popupRef,[Jt])}const Zt=Jt.render();Kt.hidden&&(Zt.style.visibility="hidden"),await Br(this,ME,T$).call(this,Zt,Kt.id,Dt.elements),(Ut=(Ft=Jt.extraPopupElement)==null?void 0:Ft.popup)==null||Ut.renderCommentButton(),Jt._isEditable&&(ar(this,lm).set(Jt.data.id,Jt),(Ht=this._annotationEditorUIManager)==null||Ht.renderAnnotationElement(Jt))}Br(this,IE,N$).call(this)}async addLinkAnnotations(dt){const $t={data:null,layer:this.div,linkService:ar(this,Dx),svgFactory:new DOMSVGFactory,parent:this};for(const kt of dt){kt.borderStyle||(kt.borderStyle=DE._defaultBorderStyle),$t.data=kt;const Tt=AnnotationElementFactory.create($t);if(!Tt.isRenderable)continue;const Dt=Tt.render();await Br(this,ME,T$).call(this,Dt,kt.id,null)}}update({viewport:dt}){const $t=this.div;this.viewport=dt,setLayerDimensions($t,{rotation:dt.rotation}),Br(this,IE,N$).call(this),$t.hidden=!1}getEditableAnnotations(){return Array.from(ar(this,lm).values())}getEditableAnnotation(dt){return ar(this,lm).get(dt)}addFakeAnnotation(dt){var Ut;const{div:$t}=this,{id:kt,rotation:Tt}=dt,Dt=new EditorAnnotationElement({data:{id:kt,rect:dt.getPDFRect(),rotation:Tt},editor:dt,layer:$t,parent:this,enableComment:!!this._commentManager,linkService:ar(this,Dx),annotationStorage:ar(this,Dy)}),Ft=Dt.render();return $t.append(Ft),(Ut=ar(this,Iy))==null||Ut.moveElementInDOM($t,Ft,Ft,!1),Dt.createOrUpdatePopup(),Dt}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Iy=new WeakMap,Ix=new WeakMap,Dy=new WeakMap,lm=new WeakMap,PE=new WeakMap,Dx=new WeakMap,ME=new WeakSet,T$=async function(dt,$t,kt){var Ut,Ht;const Tt=dt.firstChild||dt,Dt=Tt.id=`${AnnotationPrefix}${$t}`,Ft=await((Ut=ar(this,PE))==null?void 0:Ut.getAriaAttributes(Dt));if(Ft)for(const[Kt,Yt]of Ft)Tt.setAttribute(Kt,Yt);kt?kt.at(-1).container.after(dt):(this.div.append(dt),(Ht=ar(this,Iy))==null||Ht.moveElementInDOM(this.div,dt,Tt,!1))},IE=new WeakSet,N$=function(){var $t;if(!ar(this,Ix))return;const dt=this.div;for(const[kt,Tt]of ar(this,Ix)){const Dt=dt.querySelector(`[data-annotation-id="${kt}"]`);if(!Dt)continue;Tt.className="annotationContent";const{firstChild:Ft}=Dt;Ft?Ft.nodeName==="CANVAS"?Ft.replaceWith(Tt):Ft.classList.contains("annotationContent")?Ft.after(Tt):Ft.before(Tt):Dt.append(Tt);const Ut=ar(this,lm).get(kt);Ut&&(Ut._hasNoCanvas?(($t=this._annotationEditorUIManager)==null||$t.setMissingCanvas(kt,Dt.id,Tt),Ut._hasNoCanvas=!1):Ut.canvas=Tt)}ar(this,Ix).clear()},DE);const EOL_PATTERN=/\r\n?|\n/g;var Rl,FE,Fx,$l,t2,s_,r2,n_,s2,i_,Fy,Iw,Ly,Dw,Oy,Fw,n2,a_,LE,P$,i2,o_;const Fn=class Fn extends AnnotationEditor{constructor($t){super({...$t,name:"freeTextEditor"});yr(this,t2);yr(this,r2);yr(this,s2);yr(this,Fy);yr(this,Oy);yr(this,n2);yr(this,i2);yr(this,Rl,"");yr(this,FE,`${this.id}-editor`);yr(this,Fx,null);yr(this,$l,void 0);Es(this,"_colorPicker",null);this.color=$t.color||Fn._defaultColor||AnnotationEditor._defaultLineColor,vr(this,$l,$t.fontSize||Fn._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const $t=Fn.prototype,kt=Ft=>Ft.isEmpty(),Tt=AnnotationEditorUIManager.TRANSLATE_SMALL,Dt=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],$t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],$t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],$t._translateEmpty,{args:[-Tt,0],checker:kt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],$t._translateEmpty,{args:[-Dt,0],checker:kt}],[["ArrowRight","mac+ArrowRight"],$t._translateEmpty,{args:[Tt,0],checker:kt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],$t._translateEmpty,{args:[Dt,0],checker:kt}],[["ArrowUp","mac+ArrowUp"],$t._translateEmpty,{args:[0,-Tt],checker:kt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],$t._translateEmpty,{args:[0,-Dt],checker:kt}],[["ArrowDown","mac+ArrowDown"],$t._translateEmpty,{args:[0,Tt],checker:kt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],$t._translateEmpty,{args:[0,Dt],checker:kt}]]))}static initialize($t,kt){AnnotationEditor.initialize($t,kt);const Tt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Tt.getPropertyValue("--freetext-padding"))}static updateDefaultParams($t,kt){switch($t){case AnnotationEditorParamsType.FREETEXT_SIZE:Fn._defaultFontSize=kt;break;case AnnotationEditorParamsType.FREETEXT_COLOR:Fn._defaultColor=kt;break}}updateParams($t,kt){switch($t){case AnnotationEditorParamsType.FREETEXT_SIZE:Br(this,t2,s_).call(this,kt);break;case AnnotationEditorParamsType.FREETEXT_COLOR:Br(this,r2,n_).call(this,kt);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Fn._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,Fn._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,ar(this,$l)],[AnnotationEditorParamsType.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.FREETEXT_COLOR}onUpdatedColor(){var $t;this.editorDiv.style.color=this.color,($t=this._colorPicker)==null||$t.update(this.color),super.onUpdatedColor()}_translateEmpty($t,kt){this._uiManager.translateSelectedEditors($t,kt,!0)}getInitialTranslation(){const $t=this.parentScale;return[-Fn._internalPadding*$t,-(Fn._internalPadding+ar(this,$l))*$t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),vr(this,Fx,new AbortController);const $t=this._uiManager.combinedSignal(ar(this,Fx));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:$t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:$t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:$t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:$t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:$t}),!0}disableEditMode(){var $t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",ar(this,FE)),this._isDraggable=!0,($t=ar(this,Fx))==null||$t.abort(),vr(this,Fx,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin($t){this._focusEventsAllowed&&(super.focusin($t),$t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded($t){var kt;this.width||(this.enableEditMode(),$t&&this.editorDiv.focus(),(kt=this._initialOptions)!=null&&kt.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const $t=ar(this,Rl),kt=vr(this,Rl,Br(this,s2,i_).call(this).trimEnd());if($t===kt)return;const Tt=Dt=>{if(vr(this,Rl,Dt),!Dt){this.remove();return}Br(this,Oy,Fw).call(this),this._uiManager.rebuild(this),Br(this,Fy,Iw).call(this)};this.addCommands({cmd:()=>{Tt(kt)},undo:()=>{Tt($t)},mustExec:!1}),Br(this,Fy,Iw).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown($t){$t.target===this.div&&$t.key==="Enter"&&(this.enterInEditMode(),$t.preventDefault())}editorDivKeydown($t){Fn._keyboardManager.exec(this,$t)}editorDivFocus($t){this.isEditing=!0}editorDivBlur($t){this.isEditing=!1}editorDivInput($t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let $t,kt;(this._isCopy||this.annotationElementId)&&($t=this.x,kt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",ar(this,FE)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:Tt}=this.editorDiv;if(Tt.fontSize=`calc(${ar(this,$l)}px * var(--total-scale-factor))`,Tt.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[Dt,Ft]=this.parentDimensions;if(this.annotationElementId){const{position:Ut}=this._initialData;let[Ht,Kt]=this.getInitialTranslation();[Ht,Kt]=this.pageTranslationToScreen(Ht,Kt);const[Yt,Jt]=this.pageDimensions,[Zt,er]=this.pageTranslation;let rr,sr;switch(this.rotation){case 0:rr=$t+(Ut[0]-Zt)/Yt,sr=kt+this.height-(Ut[1]-er)/Jt;break;case 90:rr=$t+(Ut[0]-Zt)/Yt,sr=kt-(Ut[1]-er)/Jt,[Ht,Kt]=[Kt,-Ht];break;case 180:rr=$t-this.width+(Ut[0]-Zt)/Yt,sr=kt-(Ut[1]-er)/Jt,[Ht,Kt]=[-Ht,-Kt];break;case 270:rr=$t+(Ut[0]-Zt-this.height*Jt)/Yt,sr=kt+(Ut[1]-er-this.width*Yt)/Jt,[Ht,Kt]=[-Kt,Ht];break}this.setAt(rr*Dt,sr*Ft,Ht,Kt)}else this._moveAfterPaste($t,kt);Br(this,Oy,Fw).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste($t){var rr,sr,nr;const kt=$t.clipboardData||window.clipboardData,{types:Tt}=kt;if(Tt.length===1&&Tt[0]==="text/plain")return;$t.preventDefault();const Dt=Br(rr=Fn,LE,P$).call(rr,kt.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!Dt)return;const Ft=window.getSelection();if(!Ft.rangeCount)return;this.editorDiv.normalize(),Ft.deleteFromDocument();const Ut=Ft.getRangeAt(0);if(!Dt.includes(`
`)){Ut.insertNode(document.createTextNode(Dt)),this.editorDiv.normalize(),Ft.collapseToStart();return}const{startContainer:Ht,startOffset:Kt}=Ut,Yt=[],Jt=[];if(Ht.nodeType===Node.TEXT_NODE){const ir=Ht.parentElement;if(Jt.push(Ht.nodeValue.slice(Kt).replaceAll(EOL_PATTERN,"")),ir!==this.editorDiv){let or=Yt;for(const lr of this.editorDiv.childNodes){if(lr===ir){or=Jt;continue}or.push(Br(sr=Fn,Ly,Dw).call(sr,lr))}}Yt.push(Ht.nodeValue.slice(0,Kt).replaceAll(EOL_PATTERN,""))}else if(Ht===this.editorDiv){let ir=Yt,or=0;for(const lr of this.editorDiv.childNodes)or++===Kt&&(ir=Jt),ir.push(Br(nr=Fn,Ly,Dw).call(nr,lr))}vr(this,Rl,`${Yt.join(`
`)}${Dt}${Jt.join(`
`)}`),Br(this,Oy,Fw).call(this);const Zt=new Range;let er=Math.sumPrecise(Yt.map(ir=>ir.length));for(const{firstChild:ir}of this.editorDiv.childNodes)if(ir.nodeType===Node.TEXT_NODE){const or=ir.nodeValue.length;if(er<=or){Zt.setStart(ir,er),Zt.setEnd(ir,er);break}er-=or}Ft.removeAllRanges(),Ft.addRange(Zt)}get contentDiv(){return this.editorDiv}getPDFRect(){const $t=Fn._internalPadding*this.parentScale;return this.getRect($t,$t)}static async deserialize($t,kt,Tt){var Ut;let Dt=null;if($t instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ht,fontColor:Kt},rect:Yt,rotation:Jt,id:Zt,popupRef:er,richText:rr,contentsObj:sr,creationDate:nr,modificationDate:ir},textContent:or,textPosition:lr,parent:{page:{pageNumber:cr}}}=$t;if(!or||or.length===0)return null;Dt=$t={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(Kt),fontSize:Ht,value:or.join(`
`),position:lr,pageIndex:cr-1,rect:Yt.slice(0),rotation:Jt,annotationElementId:Zt,id:Zt,deleted:!1,popupRef:er,comment:(sr==null?void 0:sr.str)||null,richText:rr,creationDate:nr,modificationDate:ir}}const Ft=await super.deserialize($t,kt,Tt);return vr(Ft,$l,$t.fontSize),Ft.color=Util.makeHexColor(...$t.color),vr(Ft,Rl,Br(Ut=Fn,LE,P$).call(Ut,$t.value)),Ft._initialData=Dt,$t.comment&&Ft.setCommentData($t),Ft}serialize($t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const kt=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),Tt=Object.assign(super.serialize($t),{color:kt,fontSize:ar(this,$l),value:Br(this,n2,a_).call(this)});return this.addComment(Tt),$t?(Tt.isCopy=!0,Tt):this.annotationElementId&&!Br(this,i2,o_).call(this,Tt)?null:(Tt.id=this.annotationElementId,Tt)}renderAnnotationElement($t){const kt=super.renderAnnotationElement($t);if(!kt)return null;const{style:Tt}=kt;Tt.fontSize=`calc(${ar(this,$l)}px * var(--total-scale-factor))`,Tt.color=this.color,kt.replaceChildren();for(const Dt of ar(this,Rl).split(`
`)){const Ft=document.createElement("div");Ft.append(Dt?document.createTextNode(Dt):document.createElement("br")),kt.append(Ft)}return $t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:ar(this,Rl)}}),kt}resetAnnotationElement($t){super.resetAnnotationElement($t),$t.resetEdited()}};Rl=new WeakMap,FE=new WeakMap,Fx=new WeakMap,$l=new WeakMap,t2=new WeakSet,s_=function($t){const kt=Dt=>{this.editorDiv.style.fontSize=`calc(${Dt}px * var(--total-scale-factor))`,this.translate(0,-(Dt-ar(this,$l))*this.parentScale),vr(this,$l,Dt),Br(this,Fy,Iw).call(this)},Tt=ar(this,$l);this.addCommands({cmd:kt.bind(this,$t),undo:kt.bind(this,Tt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},r2=new WeakSet,n_=function($t){const kt=Dt=>{this.color=Dt,this.onUpdatedColor()},Tt=this.color;this.addCommands({cmd:kt.bind(this,$t),undo:kt.bind(this,Tt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},s2=new WeakSet,i_=function(){var Tt;const $t=[];this.editorDiv.normalize();let kt=null;for(const Dt of this.editorDiv.childNodes)(kt==null?void 0:kt.nodeType)===Node.TEXT_NODE&&Dt.nodeName==="BR"||($t.push(Br(Tt=Fn,Ly,Dw).call(Tt,Dt)),kt=Dt);return $t.join(`
`)},Fy=new WeakSet,Iw=function(){const[$t,kt]=this.parentDimensions;let Tt;if(this.isAttachedToDOM)Tt=this.div.getBoundingClientRect();else{const{currentLayer:Dt,div:Ft}=this,Ut=Ft.style.display,Ht=Ft.classList.contains("hidden");Ft.classList.remove("hidden"),Ft.style.display="hidden",Dt.div.append(this.div),Tt=Ft.getBoundingClientRect(),Ft.remove(),Ft.style.display=Ut,Ft.classList.toggle("hidden",Ht)}this.rotation%180===this.parentRotation%180?(this.width=Tt.width/$t,this.height=Tt.height/kt):(this.width=Tt.height/$t,this.height=Tt.width/kt),this.fixAndSetPosition()},Ly=new WeakSet,Dw=function($t){return($t.nodeType===Node.TEXT_NODE?$t.nodeValue:$t.innerText).replaceAll(EOL_PATTERN,"")},Oy=new WeakSet,Fw=function(){if(this.editorDiv.replaceChildren(),!!ar(this,Rl))for(const $t of ar(this,Rl).split(`
`)){const kt=document.createElement("div");kt.append($t?document.createTextNode($t):document.createElement("br")),this.editorDiv.append(kt)}},n2=new WeakSet,a_=function(){return ar(this,Rl).replaceAll(""," ")},LE=new WeakSet,P$=function($t){return $t.replaceAll(" ","")},i2=new WeakSet,o_=function($t){const{value:kt,fontSize:Tt,color:Dt,pageIndex:Ft}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||$t.value!==kt||$t.fontSize!==Tt||$t.color.some((Ut,Ht)=>Ut!==Dt[Ht])||$t.pageIndex!==Ft},yr(Fn,Ly),yr(Fn,LE),Es(Fn,"_freeTextDefaultContent",""),Es(Fn,"_internalPadding",0),Es(Fn,"_defaultColor",null),Es(Fn,"_defaultFontSize",10),Es(Fn,"_type","freetext"),Es(Fn,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=Fn;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(dt,$t){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(dt,$t,kt,Tt,Dt,Ft){Ft||(Ft=new Float32Array(dt.length));for(let Ut=0,Ht=dt.length;Ut<Ht;Ut+=2)Ft[Ut]=$t+dt[Ut]*Tt,Ft[Ut+1]=kt+dt[Ut+1]*Dt;return Ft}static _rescaleAndSwap(dt,$t,kt,Tt,Dt,Ft){Ft||(Ft=new Float32Array(dt.length));for(let Ut=0,Ht=dt.length;Ut<Ht;Ut+=2)Ft[Ut]=$t+dt[Ut+1]*Tt,Ft[Ut+1]=kt+dt[Ut]*Dt;return Ft}static _translate(dt,$t,kt,Tt){Tt||(Tt=new Float32Array(dt.length));for(let Dt=0,Ft=dt.length;Dt<Ft;Dt+=2)Tt[Dt]=$t+dt[Dt],Tt[Dt+1]=kt+dt[Dt+1];return Tt}static svgRound(dt){return Math.round(dt*1e4)}static _normalizePoint(dt,$t,kt,Tt,Dt){switch(Dt){case 90:return[1-$t/kt,dt/Tt];case 180:return[1-dt/kt,1-$t/Tt];case 270:return[$t/kt,1-dt/Tt];default:return[dt/kt,$t/Tt]}}static _normalizePagePoint(dt,$t,kt){switch(kt){case 90:return[1-$t,dt];case 180:return[1-dt,1-$t];case 270:return[$t,1-dt];default:return[dt,$t]}}static createBezierPoints(dt,$t,kt,Tt,Dt,Ft){return[(dt+5*kt)/6,($t+5*Tt)/6,(5*kt+Dt)/6,(5*Tt+Ft)/6,(kt+Dt)/2,(Tt+Ft)/2]}}Es(Outline,"PRECISION",1e-4);var Sl,su,By,Vy,_u,Xs,Lx,Ox,OE,BE,zy,Uy,cm,VE,a2,o2,Bx,Dv,l2,l_,d2,c_,u2,d_,h2,u_,p2,h_,f2,p_;const Lu=class Lu{constructor({x:dt,y:$t},kt,Tt,Dt,Ft,Ut=0){yr(this,Bx);yr(this,l2);yr(this,d2);yr(this,u2);yr(this,h2);yr(this,p2);yr(this,f2);yr(this,Sl,void 0);yr(this,su,[]);yr(this,By,void 0);yr(this,Vy,void 0);yr(this,_u,[]);yr(this,Xs,new Float32Array(18));yr(this,Lx,void 0);yr(this,Ox,void 0);yr(this,OE,void 0);yr(this,BE,void 0);yr(this,zy,void 0);yr(this,Uy,void 0);yr(this,cm,[]);vr(this,Sl,kt),vr(this,Uy,Dt*Tt),vr(this,Vy,Ft),ar(this,Xs).set([NaN,NaN,NaN,NaN,dt,$t],6),vr(this,By,Ut),vr(this,BE,ar(Lu,VE)*Tt),vr(this,OE,ar(Lu,o2)*Tt),vr(this,zy,Tt),ar(this,cm).push(dt,$t)}isEmpty(){return isNaN(ar(this,Xs)[8])}add({x:dt,y:$t}){var jr;vr(this,Lx,dt),vr(this,Ox,$t);const[kt,Tt,Dt,Ft]=ar(this,Sl);let[Ut,Ht,Kt,Yt]=ar(this,Xs).subarray(8,12);const Jt=dt-Kt,Zt=$t-Yt,er=Math.hypot(Jt,Zt);if(er<ar(this,OE))return!1;const rr=er-ar(this,BE),sr=rr/er,nr=sr*Jt,ir=sr*Zt;let or=Ut,lr=Ht;Ut=Kt,Ht=Yt,Kt+=nr,Yt+=ir,(jr=ar(this,cm))==null||jr.push(dt,$t);const cr=-ir/rr,dr=nr/rr,ur=cr*ar(this,Uy),pr=dr*ar(this,Uy);return ar(this,Xs).set(ar(this,Xs).subarray(2,8),0),ar(this,Xs).set([Kt+ur,Yt+pr],4),ar(this,Xs).set(ar(this,Xs).subarray(14,18),12),ar(this,Xs).set([Kt-ur,Yt-pr],16),isNaN(ar(this,Xs)[6])?(ar(this,_u).length===0&&(ar(this,Xs).set([Ut+ur,Ht+pr],2),ar(this,_u).push(NaN,NaN,NaN,NaN,(Ut+ur-kt)/Dt,(Ht+pr-Tt)/Ft),ar(this,Xs).set([Ut-ur,Ht-pr],14),ar(this,su).push(NaN,NaN,NaN,NaN,(Ut-ur-kt)/Dt,(Ht-pr-Tt)/Ft)),ar(this,Xs).set([or,lr,Ut,Ht,Kt,Yt],6),!this.isEmpty()):(ar(this,Xs).set([or,lr,Ut,Ht,Kt,Yt],6),Math.abs(Math.atan2(lr-Ht,or-Ut)-Math.atan2(ir,nr))<Math.PI/2?([Ut,Ht,Kt,Yt]=ar(this,Xs).subarray(2,6),ar(this,_u).push(NaN,NaN,NaN,NaN,((Ut+Kt)/2-kt)/Dt,((Ht+Yt)/2-Tt)/Ft),[Ut,Ht,or,lr]=ar(this,Xs).subarray(14,18),ar(this,su).push(NaN,NaN,NaN,NaN,((or+Ut)/2-kt)/Dt,((lr+Ht)/2-Tt)/Ft),!0):([or,lr,Ut,Ht,Kt,Yt]=ar(this,Xs).subarray(0,6),ar(this,_u).push(((or+5*Ut)/6-kt)/Dt,((lr+5*Ht)/6-Tt)/Ft,((5*Ut+Kt)/6-kt)/Dt,((5*Ht+Yt)/6-Tt)/Ft,((Ut+Kt)/2-kt)/Dt,((Ht+Yt)/2-Tt)/Ft),[Kt,Yt,Ut,Ht,or,lr]=ar(this,Xs).subarray(12,18),ar(this,su).push(((or+5*Ut)/6-kt)/Dt,((lr+5*Ht)/6-Tt)/Ft,((5*Ut+Kt)/6-kt)/Dt,((5*Ht+Yt)/6-Tt)/Ft,((Ut+Kt)/2-kt)/Dt,((Ht+Yt)/2-Tt)/Ft),!0))}toSVGPath(){if(this.isEmpty())return"";const dt=ar(this,_u),$t=ar(this,su);if(isNaN(ar(this,Xs)[6])&&!this.isEmpty())return Br(this,l2,l_).call(this);const kt=[];kt.push(`M${dt[4]} ${dt[5]}`);for(let Tt=6;Tt<dt.length;Tt+=6)isNaN(dt[Tt])?kt.push(`L${dt[Tt+4]} ${dt[Tt+5]}`):kt.push(`C${dt[Tt]} ${dt[Tt+1]} ${dt[Tt+2]} ${dt[Tt+3]} ${dt[Tt+4]} ${dt[Tt+5]}`);Br(this,u2,d_).call(this,kt);for(let Tt=$t.length-6;Tt>=6;Tt-=6)isNaN($t[Tt])?kt.push(`L${$t[Tt+4]} ${$t[Tt+5]}`):kt.push(`C${$t[Tt]} ${$t[Tt+1]} ${$t[Tt+2]} ${$t[Tt+3]} ${$t[Tt+4]} ${$t[Tt+5]}`);return Br(this,d2,c_).call(this,kt),kt.join(" ")}newFreeDrawOutline(dt,$t,kt,Tt,Dt,Ft){return new FreeDrawOutline(dt,$t,kt,Tt,Dt,Ft)}getOutlines(){var Jt;const dt=ar(this,_u),$t=ar(this,su),kt=ar(this,Xs),[Tt,Dt,Ft,Ut]=ar(this,Sl),Ht=new Float32Array((((Jt=ar(this,cm))==null?void 0:Jt.length)??0)+2);for(let Zt=0,er=Ht.length-2;Zt<er;Zt+=2)Ht[Zt]=(ar(this,cm)[Zt]-Tt)/Ft,Ht[Zt+1]=(ar(this,cm)[Zt+1]-Dt)/Ut;if(Ht[Ht.length-2]=(ar(this,Lx)-Tt)/Ft,Ht[Ht.length-1]=(ar(this,Ox)-Dt)/Ut,isNaN(kt[6])&&!this.isEmpty())return Br(this,h2,u_).call(this,Ht);const Kt=new Float32Array(ar(this,_u).length+24+ar(this,su).length);let Yt=dt.length;for(let Zt=0;Zt<Yt;Zt+=2){if(isNaN(dt[Zt])){Kt[Zt]=Kt[Zt+1]=NaN;continue}Kt[Zt]=dt[Zt],Kt[Zt+1]=dt[Zt+1]}Yt=Br(this,f2,p_).call(this,Kt,Yt);for(let Zt=$t.length-6;Zt>=6;Zt-=6)for(let er=0;er<6;er+=2){if(isNaN($t[Zt+er])){Kt[Yt]=Kt[Yt+1]=NaN,Yt+=2;continue}Kt[Yt]=$t[Zt+er],Kt[Yt+1]=$t[Zt+er+1],Yt+=2}return Br(this,p2,h_).call(this,Kt,Yt),this.newFreeDrawOutline(Kt,Ht,ar(this,Sl),ar(this,zy),ar(this,By),ar(this,Vy))}};Sl=new WeakMap,su=new WeakMap,By=new WeakMap,Vy=new WeakMap,_u=new WeakMap,Xs=new WeakMap,Lx=new WeakMap,Ox=new WeakMap,OE=new WeakMap,BE=new WeakMap,zy=new WeakMap,Uy=new WeakMap,cm=new WeakMap,VE=new WeakMap,a2=new WeakMap,o2=new WeakMap,Bx=new WeakSet,Dv=function(){const dt=ar(this,Xs).subarray(4,6),$t=ar(this,Xs).subarray(16,18),[kt,Tt,Dt,Ft]=ar(this,Sl);return[(ar(this,Lx)+(dt[0]-$t[0])/2-kt)/Dt,(ar(this,Ox)+(dt[1]-$t[1])/2-Tt)/Ft,(ar(this,Lx)+($t[0]-dt[0])/2-kt)/Dt,(ar(this,Ox)+($t[1]-dt[1])/2-Tt)/Ft]},l2=new WeakSet,l_=function(){const[dt,$t,kt,Tt]=ar(this,Sl),[Dt,Ft,Ut,Ht]=Br(this,Bx,Dv).call(this);return`M${(ar(this,Xs)[2]-dt)/kt} ${(ar(this,Xs)[3]-$t)/Tt} L${(ar(this,Xs)[4]-dt)/kt} ${(ar(this,Xs)[5]-$t)/Tt} L${Dt} ${Ft} L${Ut} ${Ht} L${(ar(this,Xs)[16]-dt)/kt} ${(ar(this,Xs)[17]-$t)/Tt} L${(ar(this,Xs)[14]-dt)/kt} ${(ar(this,Xs)[15]-$t)/Tt} Z`},d2=new WeakSet,c_=function(dt){const $t=ar(this,su);dt.push(`L${$t[4]} ${$t[5]} Z`)},u2=new WeakSet,d_=function(dt){const[$t,kt,Tt,Dt]=ar(this,Sl),Ft=ar(this,Xs).subarray(4,6),Ut=ar(this,Xs).subarray(16,18),[Ht,Kt,Yt,Jt]=Br(this,Bx,Dv).call(this);dt.push(`L${(Ft[0]-$t)/Tt} ${(Ft[1]-kt)/Dt} L${Ht} ${Kt} L${Yt} ${Jt} L${(Ut[0]-$t)/Tt} ${(Ut[1]-kt)/Dt}`)},h2=new WeakSet,u_=function(dt){const $t=ar(this,Xs),[kt,Tt,Dt,Ft]=ar(this,Sl),[Ut,Ht,Kt,Yt]=Br(this,Bx,Dv).call(this),Jt=new Float32Array(36);return Jt.set([NaN,NaN,NaN,NaN,($t[2]-kt)/Dt,($t[3]-Tt)/Ft,NaN,NaN,NaN,NaN,($t[4]-kt)/Dt,($t[5]-Tt)/Ft,NaN,NaN,NaN,NaN,Ut,Ht,NaN,NaN,NaN,NaN,Kt,Yt,NaN,NaN,NaN,NaN,($t[16]-kt)/Dt,($t[17]-Tt)/Ft,NaN,NaN,NaN,NaN,($t[14]-kt)/Dt,($t[15]-Tt)/Ft],0),this.newFreeDrawOutline(Jt,dt,ar(this,Sl),ar(this,zy),ar(this,By),ar(this,Vy))},p2=new WeakSet,h_=function(dt,$t){const kt=ar(this,su);return dt.set([NaN,NaN,NaN,NaN,kt[4],kt[5]],$t),$t+=6},f2=new WeakSet,p_=function(dt,$t){const kt=ar(this,Xs).subarray(4,6),Tt=ar(this,Xs).subarray(16,18),[Dt,Ft,Ut,Ht]=ar(this,Sl),[Kt,Yt,Jt,Zt]=Br(this,Bx,Dv).call(this);return dt.set([NaN,NaN,NaN,NaN,(kt[0]-Dt)/Ut,(kt[1]-Ft)/Ht,NaN,NaN,NaN,NaN,Kt,Yt,NaN,NaN,NaN,NaN,Jt,Zt,NaN,NaN,NaN,NaN,(Tt[0]-Dt)/Ut,(Tt[1]-Ft)/Ht],$t),$t+=24},yr(Lu,VE,8),yr(Lu,a2,2),yr(Lu,o2,ar(Lu,VE)+ar(Lu,a2));let FreeDrawOutliner=Lu;var Hy,Vx,mp,zE,_l,UE,Zn,m2,f_;class FreeDrawOutline extends Outline{constructor($t,kt,Tt,Dt,Ft,Ut){super();yr(this,m2);yr(this,Hy,void 0);yr(this,Vx,new Float32Array(4));yr(this,mp,void 0);yr(this,zE,void 0);yr(this,_l,void 0);yr(this,UE,void 0);yr(this,Zn,void 0);vr(this,Zn,$t),vr(this,_l,kt),vr(this,Hy,Tt),vr(this,UE,Dt),vr(this,mp,Ft),vr(this,zE,Ut),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],Br(this,m2,f_).call(this,Ut);const[Ht,Kt,Yt,Jt]=ar(this,Vx);for(let Zt=0,er=$t.length;Zt<er;Zt+=2)$t[Zt]=($t[Zt]-Ht)/Yt,$t[Zt+1]=($t[Zt+1]-Kt)/Jt;for(let Zt=0,er=kt.length;Zt<er;Zt+=2)kt[Zt]=(kt[Zt]-Ht)/Yt,kt[Zt+1]=(kt[Zt+1]-Kt)/Jt}toSVGPath(){const $t=[`M${ar(this,Zn)[4]} ${ar(this,Zn)[5]}`];for(let kt=6,Tt=ar(this,Zn).length;kt<Tt;kt+=6){if(isNaN(ar(this,Zn)[kt])){$t.push(`L${ar(this,Zn)[kt+4]} ${ar(this,Zn)[kt+5]}`);continue}$t.push(`C${ar(this,Zn)[kt]} ${ar(this,Zn)[kt+1]} ${ar(this,Zn)[kt+2]} ${ar(this,Zn)[kt+3]} ${ar(this,Zn)[kt+4]} ${ar(this,Zn)[kt+5]}`)}return $t.push("Z"),$t.join(" ")}serialize([$t,kt,Tt,Dt],Ft){const Ut=Tt-$t,Ht=Dt-kt;let Kt,Yt;switch(Ft){case 0:Kt=Outline._rescale(ar(this,Zn),$t,Dt,Ut,-Ht),Yt=Outline._rescale(ar(this,_l),$t,Dt,Ut,-Ht);break;case 90:Kt=Outline._rescaleAndSwap(ar(this,Zn),$t,kt,Ut,Ht),Yt=Outline._rescaleAndSwap(ar(this,_l),$t,kt,Ut,Ht);break;case 180:Kt=Outline._rescale(ar(this,Zn),Tt,kt,-Ut,Ht),Yt=Outline._rescale(ar(this,_l),Tt,kt,-Ut,Ht);break;case 270:Kt=Outline._rescaleAndSwap(ar(this,Zn),Tt,Dt,-Ut,-Ht),Yt=Outline._rescaleAndSwap(ar(this,_l),Tt,Dt,-Ut,-Ht);break}return{outline:Array.from(Kt),points:[Array.from(Yt)]}}get box(){return ar(this,Vx)}newOutliner($t,kt,Tt,Dt,Ft,Ut=0){return new FreeDrawOutliner($t,kt,Tt,Dt,Ft,Ut)}getNewOutline($t,kt){const[Tt,Dt,Ft,Ut]=ar(this,Vx),[Ht,Kt,Yt,Jt]=ar(this,Hy),Zt=Ft*Yt,er=Ut*Jt,rr=Tt*Yt+Ht,sr=Dt*Jt+Kt,nr=this.newOutliner({x:ar(this,_l)[0]*Zt+rr,y:ar(this,_l)[1]*er+sr},ar(this,Hy),ar(this,UE),$t,ar(this,zE),kt??ar(this,mp));for(let ir=2;ir<ar(this,_l).length;ir+=2)nr.add({x:ar(this,_l)[ir]*Zt+rr,y:ar(this,_l)[ir+1]*er+sr});return nr.getOutlines()}}Hy=new WeakMap,Vx=new WeakMap,mp=new WeakMap,zE=new WeakMap,_l=new WeakMap,UE=new WeakMap,Zn=new WeakMap,m2=new WeakSet,f_=function($t){const kt=ar(this,Zn);let Tt=kt[4],Dt=kt[5];const Ft=[Tt,Dt,Tt,Dt];let Ut=Tt,Ht=Dt,Kt=Tt,Yt=Dt;const Jt=$t?Math.max:Math.min,Zt=new Float32Array(4);for(let rr=6,sr=kt.length;rr<sr;rr+=6){const nr=kt[rr+4],ir=kt[rr+5];isNaN(kt[rr])?(Util.pointBoundingBox(nr,ir,Ft),Ht>ir?(Ut=nr,Ht=ir):Ht===ir&&(Ut=Jt(Ut,nr)),Yt<ir?(Kt=nr,Yt=ir):Yt===ir&&(Kt=Jt(Kt,nr))):(Zt[0]=Zt[1]=1/0,Zt[2]=Zt[3]=-1/0,Util.bezierBoundingBox(Tt,Dt,...kt.slice(rr,rr+6),Zt),Util.rectBoundingBox(Zt[0],Zt[1],Zt[2],Zt[3],Ft),Ht>Zt[1]?(Ut=Zt[0],Ht=Zt[1]):Ht===Zt[1]&&(Ut=Jt(Ut,Zt[0])),Yt<Zt[3]?(Kt=Zt[2],Yt=Zt[3]):Yt===Zt[3]&&(Kt=Jt(Kt,Zt[2]))),Tt=nr,Dt=ir}const er=ar(this,Vx);er[0]=Ft[0]-ar(this,mp),er[1]=Ft[1]-ar(this,mp),er[2]=Ft[2]-Ft[0]+2*ar(this,mp),er[3]=Ft[3]-Ft[1]+2*ar(this,mp),this.firstPoint=[Ut,Ht],this.lastPoint=[Kt,Yt]};var HE,GE,WE,dm,nu,x2,m_,Gy,Lw,g2,x_,b2,g_,qE,M$;class HighlightOutliner{constructor(dt,$t=0,kt=0,Tt=!0){yr(this,x2);yr(this,Gy);yr(this,g2);yr(this,b2);yr(this,qE);yr(this,HE,void 0);yr(this,GE,void 0);yr(this,WE,void 0);yr(this,dm,[]);yr(this,nu,[]);const Dt=[1/0,1/0,-1/0,-1/0],Ut=10**-4;for(const{x:nr,y:ir,width:or,height:lr}of dt){const cr=Math.floor((nr-$t)/Ut)*Ut,dr=Math.ceil((nr+or+$t)/Ut)*Ut,ur=Math.floor((ir-$t)/Ut)*Ut,pr=Math.ceil((ir+lr+$t)/Ut)*Ut,mr=[cr,ur,pr,!0],jr=[dr,ur,pr,!1];ar(this,dm).push(mr,jr),Util.rectBoundingBox(cr,ur,dr,pr,Dt)}const Ht=Dt[2]-Dt[0]+2*kt,Kt=Dt[3]-Dt[1]+2*kt,Yt=Dt[0]-kt,Jt=Dt[1]-kt;let Zt=Tt?-1/0:1/0,er=1/0;const rr=ar(this,dm).at(Tt?-1:-2),sr=[rr[0],rr[2]];for(const nr of ar(this,dm)){const[ir,or,lr,cr]=nr;!cr&&Tt?or<er?(er=or,Zt=ir):or===er&&(Zt=Math.max(Zt,ir)):cr&&!Tt&&(or<er?(er=or,Zt=ir):or===er&&(Zt=Math.min(Zt,ir))),nr[0]=(ir-Yt)/Ht,nr[1]=(or-Jt)/Kt,nr[2]=(lr-Jt)/Kt}vr(this,HE,new Float32Array([Yt,Jt,Ht,Kt])),vr(this,GE,[Zt,er]),vr(this,WE,sr)}getOutlines(){ar(this,dm).sort(($t,kt)=>$t[0]-kt[0]||$t[1]-kt[1]||$t[2]-kt[2]);const dt=[];for(const $t of ar(this,dm))$t[3]?(dt.push(...Br(this,qE,M$).call(this,$t)),Br(this,g2,x_).call(this,$t)):(Br(this,b2,g_).call(this,$t),dt.push(...Br(this,qE,M$).call(this,$t)));return Br(this,x2,m_).call(this,dt)}}HE=new WeakMap,GE=new WeakMap,WE=new WeakMap,dm=new WeakMap,nu=new WeakMap,x2=new WeakSet,m_=function(dt){const $t=[],kt=new Set;for(const Ft of dt){const[Ut,Ht,Kt]=Ft;$t.push([Ut,Ht,Ft],[Ut,Kt,Ft])}$t.sort((Ft,Ut)=>Ft[1]-Ut[1]||Ft[0]-Ut[0]);for(let Ft=0,Ut=$t.length;Ft<Ut;Ft+=2){const Ht=$t[Ft][2],Kt=$t[Ft+1][2];Ht.push(Kt),Kt.push(Ht),kt.add(Ht),kt.add(Kt)}const Tt=[];let Dt;for(;kt.size>0;){const Ft=kt.values().next().value;let[Ut,Ht,Kt,Yt,Jt]=Ft;kt.delete(Ft);let Zt=Ut,er=Ht;for(Dt=[Ut,Kt],Tt.push(Dt);;){let rr;if(kt.has(Yt))rr=Yt;else if(kt.has(Jt))rr=Jt;else break;kt.delete(rr),[Ut,Ht,Kt,Yt,Jt]=rr,Zt!==Ut&&(Dt.push(Zt,er,Ut,er===Ht?Ht:Kt),Zt=Ut),er=er===Ht?Kt:Ht}Dt.push(Zt,er)}return new HighlightOutline(Tt,ar(this,HE),ar(this,GE),ar(this,WE))},Gy=new WeakSet,Lw=function(dt){const $t=ar(this,nu);let kt=0,Tt=$t.length-1;for(;kt<=Tt;){const Dt=kt+Tt>>1,Ft=$t[Dt][0];if(Ft===dt)return Dt;Ft<dt?kt=Dt+1:Tt=Dt-1}return Tt+1},g2=new WeakSet,x_=function([,dt,$t]){const kt=Br(this,Gy,Lw).call(this,dt);ar(this,nu).splice(kt,0,[dt,$t])},b2=new WeakSet,g_=function([,dt,$t]){const kt=Br(this,Gy,Lw).call(this,dt);for(let Tt=kt;Tt<ar(this,nu).length;Tt++){const[Dt,Ft]=ar(this,nu)[Tt];if(Dt!==dt)break;if(Dt===dt&&Ft===$t){ar(this,nu).splice(Tt,1);return}}for(let Tt=kt-1;Tt>=0;Tt--){const[Dt,Ft]=ar(this,nu)[Tt];if(Dt!==dt)break;if(Dt===dt&&Ft===$t){ar(this,nu).splice(Tt,1);return}}},qE=new WeakSet,M$=function(dt){const[$t,kt,Tt]=dt,Dt=[[$t,kt,Tt]],Ft=Br(this,Gy,Lw).call(this,Tt);for(let Ut=0;Ut<Ft;Ut++){const[Ht,Kt]=ar(this,nu)[Ut];for(let Yt=0,Jt=Dt.length;Yt<Jt;Yt++){const[,Zt,er]=Dt[Yt];if(!(Kt<=Zt||er<=Ht)){if(Zt>=Ht){if(er>Kt)Dt[Yt][1]=Kt;else{if(Jt===1)return[];Dt.splice(Yt,1),Yt--,Jt--}continue}Dt[Yt][2]=Ht,er>Kt&&Dt.push([$t,Kt,er])}}}return Dt};var KE,Wy;class HighlightOutline extends Outline{constructor($t,kt,Tt,Dt){super();yr(this,KE,void 0);yr(this,Wy,void 0);vr(this,Wy,$t),vr(this,KE,kt),this.firstPoint=Tt,this.lastPoint=Dt}toSVGPath(){const $t=[];for(const kt of ar(this,Wy)){let[Tt,Dt]=kt;$t.push(`M${Tt} ${Dt}`);for(let Ft=2;Ft<kt.length;Ft+=2){const Ut=kt[Ft],Ht=kt[Ft+1];Ut===Tt?($t.push(`V${Ht}`),Dt=Ht):Ht===Dt&&($t.push(`H${Ut}`),Tt=Ut)}$t.push("Z")}return $t.join(" ")}serialize([$t,kt,Tt,Dt],Ft){const Ut=[],Ht=Tt-$t,Kt=Dt-kt;for(const Yt of ar(this,Wy)){const Jt=new Array(Yt.length);for(let Zt=0;Zt<Yt.length;Zt+=2)Jt[Zt]=$t+Yt[Zt]*Ht,Jt[Zt+1]=Dt-Yt[Zt+1]*Kt;Ut.push(Jt)}return Ut}get box(){return ar(this,KE)}get classNamesForOutlining(){return["highlightOutline"]}}KE=new WeakMap,Wy=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(dt,$t,kt,Tt,Dt,Ft){return new FreeHighlightOutline(dt,$t,kt,Tt,Dt,Ft)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(dt,$t,kt,Tt,Dt,Ft=0){return new FreeHighlightOutliner(dt,$t,kt,Tt,Dt,Ft)}}var qy,YE,xp,zx,XE,Go,QE,JE,Ux,Cl,Al,wo,Ky,Yy,Po,Xy,Hl,ZE,$j,I$,Qy,Ow,y2,b_,v2,y_,E2,v_,_j,D$,gp,Cm,um,f0,j2,E_,Jy,Bw,Zy,Vw,w2,j_,R2,w_,$2,R_,k2,$_,S2,k_;const tn=class tn extends AnnotationEditor{constructor($t){super({...$t,name:"highlightEditor"});yr(this,$j);yr(this,Qy);yr(this,y2);yr(this,v2);yr(this,E2);yr(this,_j);yr(this,gp);yr(this,j2);yr(this,Jy);yr(this,Zy);yr(this,w2);yr(this,R2);yr(this,S2);yr(this,qy,null);yr(this,YE,0);yr(this,xp,void 0);yr(this,zx,null);yr(this,XE,null);yr(this,Go,null);yr(this,QE,null);yr(this,JE,0);yr(this,Ux,null);yr(this,Cl,null);yr(this,Al,null);yr(this,wo,!1);yr(this,Ky,null);yr(this,Yy,null);yr(this,Po,null);yr(this,Xy,"");yr(this,Hl,void 0);yr(this,ZE,"");this.color=$t.color||tn._defaultColor,vr(this,Hl,$t.thickness||tn._defaultThickness),this.opacity=$t.opacity||tn._defaultOpacity,vr(this,xp,$t.boxes||null),vr(this,ZE,$t.methodOfCreation||""),vr(this,Xy,$t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",$t.highlightId>-1?(vr(this,wo,!0),Br(this,Qy,Ow).call(this,$t),Br(this,gp,Cm).call(this)):ar(this,xp)&&(vr(this,qy,$t.anchorNode),vr(this,YE,$t.anchorOffset),vr(this,QE,$t.focusNode),vr(this,JE,$t.focusOffset),Br(this,$j,I$).call(this),Br(this,gp,Cm).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const $t=tn.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],$t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],$t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],$t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],$t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:ar(this,wo)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:ar(this,Hl),methodOfCreation:ar(this,ZE)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData($t){return{numberOfColors:$t.get("color").size}}static initialize($t,kt){var Tt;AnnotationEditor.initialize($t,kt),tn._defaultColor||(tn._defaultColor=((Tt=kt.highlightColors)==null?void 0:Tt.values().next().value)||"#fff066")}static updateDefaultParams($t,kt){switch($t){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:tn._defaultColor=kt;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:tn._defaultThickness=kt;break}}translateInPage($t,kt){}get toolbarPosition(){return ar(this,Yy)}get commentButtonPosition(){return ar(this,Ky)}updateParams($t,kt){switch($t){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:Br(this,y2,b_).call(this,kt);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:Br(this,v2,y_).call(this,kt);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,tn._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,tn._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||tn._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,ar(this,Hl)||tn._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,ar(this,wo)]]}onUpdatedColor(){var $t,kt;($t=this.parent)==null||$t.drawLayer.updateProperties(ar(this,Al),{root:{fill:this.color,"fill-opacity":this.opacity}}),(kt=ar(this,XE))==null||kt.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",vr(this,XE,new ColorPicker({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Br(this,Zy,Vw).call(this))}getBaseTranslation(){return[0,0]}getRect($t,kt){return super.getRect($t,kt,Br(this,Zy,Vw).call(this))}onceAdded($t){this.annotationElementId||this.parent.addUndoableEditor(this),$t&&this.div.focus()}remove(){Br(this,_j,D$).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Br(this,gp,Cm).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent($t){var Tt;let kt=!1;this.parent&&!$t?Br(this,_j,D$).call(this):$t&&(Br(this,gp,Cm).call(this,$t),kt=!this.parent&&((Tt=this.div)==null?void 0:Tt.classList.contains("selectedEditor"))),super.setParent($t),this.show(this._isVisible),kt&&this.select()}rotate($t){var Dt,Ft,Ut;const{drawLayer:kt}=this.parent;let Tt;ar(this,wo)?($t=($t-this.rotation+360)%360,Tt=Br(Dt=tn,um,f0).call(Dt,ar(this,Cl).box,$t)):Tt=Br(Ft=tn,um,f0).call(Ft,[this.x,this.y,this.width,this.height],$t),kt.updateProperties(ar(this,Al),{bbox:Tt,root:{"data-main-rotation":$t}}),kt.updateProperties(ar(this,Po),{bbox:Br(Ut=tn,um,f0).call(Ut,ar(this,Go).box,$t),root:{"data-main-rotation":$t}})}render(){if(this.div)return this.div;const $t=super.render();ar(this,Xy)&&($t.setAttribute("aria-label",ar(this,Xy)),$t.setAttribute("role","mark")),ar(this,wo)?$t.classList.add("free"):this.div.addEventListener("keydown",Br(this,j2,E_).bind(this),{signal:this._uiManager._signal});const kt=vr(this,Ux,document.createElement("div"));return $t.append(kt),kt.setAttribute("aria-hidden","true"),kt.className="internal",kt.style.clipPath=ar(this,zx),this.setDims(this.width,this.height),bindEvents(this,ar(this,Ux),["pointerover","pointerleave"]),this.enableEditing(),$t}pointerover(){var $t;this.isSelected||($t=this.parent)==null||$t.drawLayer.updateProperties(ar(this,Po),{rootClass:{hovered:!0}})}pointerleave(){var $t;this.isSelected||($t=this.parent)==null||$t.drawLayer.updateProperties(ar(this,Po),{rootClass:{hovered:!1}})}_moveCaret($t){switch(this.parent.unselect(this),$t){case 0:case 2:Br(this,Jy,Bw).call(this,!0);break;case 1:case 3:Br(this,Jy,Bw).call(this,!1);break}}select(){var $t;super.select(),ar(this,Po)&&(($t=this.parent)==null||$t.drawLayer.updateProperties(ar(this,Po),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var $t;super.unselect(),ar(this,Po)&&(($t=this.parent)==null||$t.drawLayer.updateProperties(ar(this,Po),{rootClass:{selected:!1}}),ar(this,wo)||Br(this,Jy,Bw).call(this,!1))}get _mustFixPosition(){return!ar(this,wo)}show($t=this._isVisible){super.show($t),this.parent&&(this.parent.drawLayer.updateProperties(ar(this,Al),{rootClass:{hidden:!$t}}),this.parent.drawLayer.updateProperties(ar(this,Po),{rootClass:{hidden:!$t}}))}static startHighlighting($t,kt,{target:Tt,x:Dt,y:Ft}){const{x:Ut,y:Ht,width:Kt,height:Yt}=Tt.getBoundingClientRect(),Jt=new AbortController,Zt=$t.combinedSignal(Jt),er=rr=>{Jt.abort(),Br(this,k2,$_).call(this,$t,rr)};window.addEventListener("blur",er,{signal:Zt}),window.addEventListener("pointerup",er,{signal:Zt}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:Zt}),window.addEventListener("contextmenu",noContextMenu,{signal:Zt}),Tt.addEventListener("pointermove",Br(this,$2,R_).bind(this,$t),{signal:Zt}),this._freeHighlight=new FreeHighlightOutliner({x:Dt,y:Ft},[Ut,Ht,Kt,Yt],$t.scale,this._defaultThickness/2,kt,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=$t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize($t,kt,Tt){var sr,nr,ir,or;let Dt=null;if($t instanceof HighlightAnnotationElement){const{data:{quadPoints:lr,rect:cr,rotation:dr,id:ur,color:pr,opacity:mr,popupRef:jr,richText:Rr,contentsObj:xr,creationDate:kr,modificationDate:Mr},parent:{page:{pageNumber:Tr}}}=$t;Dt=$t={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(pr),opacity:mr,quadPoints:lr,boxes:null,pageIndex:Tr-1,rect:cr.slice(0),rotation:dr,annotationElementId:ur,id:ur,deleted:!1,popupRef:jr,richText:Rr,comment:(xr==null?void 0:xr.str)||null,creationDate:kr,modificationDate:Mr}}else if($t instanceof InkAnnotationElement){const{data:{inkLists:lr,rect:cr,rotation:dr,id:ur,color:pr,borderStyle:{rawWidth:mr},popupRef:jr,richText:Rr,contentsObj:xr,creationDate:kr,modificationDate:Mr},parent:{page:{pageNumber:Tr}}}=$t;Dt=$t={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(pr),thickness:mr,inkLists:lr,boxes:null,pageIndex:Tr-1,rect:cr.slice(0),rotation:dr,annotationElementId:ur,id:ur,deleted:!1,popupRef:jr,richText:Rr,comment:(xr==null?void 0:xr.str)||null,creationDate:kr,modificationDate:Mr}}const{color:Ft,quadPoints:Ut,inkLists:Ht,opacity:Kt}=$t,Yt=await super.deserialize($t,kt,Tt);Yt.color=Util.makeHexColor(...Ft),Yt.opacity=Kt||1,Ht&&vr(Yt,Hl,$t.thickness),Yt._initialData=Dt,$t.comment&&Yt.setCommentData($t);const[Jt,Zt]=Yt.pageDimensions,[er,rr]=Yt.pageTranslation;if(Ut){const lr=vr(Yt,xp,[]);for(let cr=0;cr<Ut.length;cr+=8)lr.push({x:(Ut[cr]-er)/Jt,y:1-(Ut[cr+1]-rr)/Zt,width:(Ut[cr+2]-Ut[cr])/Jt,height:(Ut[cr+1]-Ut[cr+5])/Zt});Br(sr=Yt,$j,I$).call(sr),Br(nr=Yt,gp,Cm).call(nr),Yt.rotate(Yt.rotation)}else if(Ht){vr(Yt,wo,!0);const lr=Ht[0],cr={x:lr[0]-er,y:Zt-(lr[1]-rr)},dr=new FreeHighlightOutliner(cr,[0,0,Jt,Zt],1,ar(Yt,Hl)/2,!0,.001);for(let mr=0,jr=lr.length;mr<jr;mr+=2)cr.x=lr[mr]-er,cr.y=Zt-(lr[mr+1]-rr),dr.add(cr);const{id:ur,clipPathId:pr}=kt.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:Yt.color,"fill-opacity":Yt._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:dr.toSVGPath()}},!0,!0);Br(ir=Yt,Qy,Ow).call(ir,{highlightOutlines:dr.getOutlines(),highlightId:ur,clipPathId:pr}),Br(or=Yt,gp,Cm).call(or),Yt.rotate(Yt.parentRotation)}return Yt}serialize($t=!1){if(this.isEmpty()||$t)return null;if(this.deleted)return this.serializeDeleted();const kt=AnnotationEditor._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),Tt=super.serialize($t);return Object.assign(Tt,{color:kt,opacity:this.opacity,thickness:ar(this,Hl),quadPoints:Br(this,w2,j_).call(this),outlines:Br(this,R2,w_).call(this,Tt.rect)}),this.addComment(Tt),this.annotationElementId&&!Br(this,S2,k_).call(this,Tt)?null:(Tt.id=this.annotationElementId,Tt)}renderAnnotationElement($t){return this.deleted?($t.hide(),null):($t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};qy=new WeakMap,YE=new WeakMap,xp=new WeakMap,zx=new WeakMap,XE=new WeakMap,Go=new WeakMap,QE=new WeakMap,JE=new WeakMap,Ux=new WeakMap,Cl=new WeakMap,Al=new WeakMap,wo=new WeakMap,Ky=new WeakMap,Yy=new WeakMap,Po=new WeakMap,Xy=new WeakMap,Hl=new WeakMap,ZE=new WeakMap,$j=new WeakSet,I$=function(){const $t=new HighlightOutliner(ar(this,xp),.001);vr(this,Cl,$t.getOutlines()),[this.x,this.y,this.width,this.height]=ar(this,Cl).box;const kt=new HighlightOutliner(ar(this,xp),.0025,.001,this._uiManager.direction==="ltr");vr(this,Go,kt.getOutlines());const{firstPoint:Tt}=ar(this,Cl);vr(this,Ky,[(Tt[0]-this.x)/this.width,(Tt[1]-this.y)/this.height]);const{lastPoint:Dt}=ar(this,Go);vr(this,Yy,[(Dt[0]-this.x)/this.width,(Dt[1]-this.y)/this.height])},Qy=new WeakSet,Ow=function({highlightOutlines:$t,highlightId:kt,clipPathId:Tt}){var Zt,er;vr(this,Cl,$t);const Dt=1.5;if(vr(this,Go,$t.getNewOutline(ar(this,Hl)/2+Dt,.0025)),kt>=0)vr(this,Al,kt),vr(this,zx,Tt),this.parent.drawLayer.finalizeDraw(kt,{bbox:$t.box,path:{d:$t.toSVGPath()}}),vr(this,Po,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:ar(this,Go).box,path:{d:ar(this,Go).toSVGPath()}},!0));else if(this.parent){const rr=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(ar(this,Al),{bbox:Br(Zt=tn,um,f0).call(Zt,ar(this,Cl).box,(rr-this.rotation+360)%360),path:{d:$t.toSVGPath()}}),this.parent.drawLayer.updateProperties(ar(this,Po),{bbox:Br(er=tn,um,f0).call(er,ar(this,Go).box,rr),path:{d:ar(this,Go).toSVGPath()}})}const[Ft,Ut,Ht,Kt]=$t.box;switch(this.rotation){case 0:this.x=Ft,this.y=Ut,this.width=Ht,this.height=Kt;break;case 90:{const[rr,sr]=this.parentDimensions;this.x=Ut,this.y=1-Ft,this.width=Ht*sr/rr,this.height=Kt*rr/sr;break}case 180:this.x=1-Ft,this.y=1-Ut,this.width=Ht,this.height=Kt;break;case 270:{const[rr,sr]=this.parentDimensions;this.x=1-Ut,this.y=Ft,this.width=Ht*sr/rr,this.height=Kt*rr/sr;break}}const{firstPoint:Yt}=$t;vr(this,Ky,[(Yt[0]-Ft)/Ht,(Yt[1]-Ut)/Kt]);const{lastPoint:Jt}=ar(this,Go);vr(this,Yy,[(Jt[0]-Ft)/Ht,(Jt[1]-Ut)/Kt])},y2=new WeakSet,b_=function($t){const kt=(Ft,Ut)=>{this.color=Ft,this.opacity=Ut,this.onUpdatedColor()},Tt=this.color,Dt=this.opacity;this.addCommands({cmd:kt.bind(this,$t,tn._defaultOpacity),undo:kt.bind(this,Tt,Dt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName($t)},!0)},v2=new WeakSet,y_=function($t){const kt=ar(this,Hl),Tt=Dt=>{vr(this,Hl,Dt),Br(this,E2,v_).call(this,Dt)};this.addCommands({cmd:Tt.bind(this,$t),undo:Tt.bind(this,kt),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:$t},!0)},E2=new WeakSet,v_=function($t){ar(this,wo)&&(Br(this,Qy,Ow).call(this,{highlightOutlines:ar(this,Cl).getNewOutline($t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},_j=new WeakSet,D$=function(){ar(this,Al)===null||!this.parent||(this.parent.drawLayer.remove(ar(this,Al)),vr(this,Al,null),this.parent.drawLayer.remove(ar(this,Po)),vr(this,Po,null))},gp=new WeakSet,Cm=function($t=this.parent){ar(this,Al)===null&&({id:ga(this,Al)._,clipPathId:ga(this,zx)._}=$t.drawLayer.draw({bbox:ar(this,Cl).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:ar(this,wo)},path:{d:ar(this,Cl).toSVGPath()}},!1,!0),vr(this,Po,$t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:ar(this,wo)},bbox:ar(this,Go).box,path:{d:ar(this,Go).toSVGPath()}},ar(this,wo))),ar(this,Ux)&&(ar(this,Ux).style.clipPath=ar(this,zx)))},um=new WeakSet,f0=function([$t,kt,Tt,Dt],Ft){switch(Ft){case 90:return[1-kt-Dt,$t,Dt,Tt];case 180:return[1-$t-Tt,1-kt-Dt,Tt,Dt];case 270:return[kt,1-$t-Tt,Dt,Tt]}return[$t,kt,Tt,Dt]},j2=new WeakSet,E_=function($t){tn._keyboardManager.exec(this,$t)},Jy=new WeakSet,Bw=function($t){if(!ar(this,qy))return;const kt=window.getSelection();$t?kt.setPosition(ar(this,qy),ar(this,YE)):kt.setPosition(ar(this,QE),ar(this,JE))},Zy=new WeakSet,Vw=function(){return ar(this,wo)?this.rotation:0},w2=new WeakSet,j_=function(){if(ar(this,wo))return null;const[$t,kt]=this.pageDimensions,[Tt,Dt]=this.pageTranslation,Ft=ar(this,xp),Ut=new Float32Array(Ft.length*8);let Ht=0;for(const{x:Kt,y:Yt,width:Jt,height:Zt}of Ft){const er=Kt*$t+Tt,rr=(1-Yt)*kt+Dt;Ut[Ht]=Ut[Ht+4]=er,Ut[Ht+1]=Ut[Ht+3]=rr,Ut[Ht+2]=Ut[Ht+6]=er+Jt*$t,Ut[Ht+5]=Ut[Ht+7]=rr-Zt*kt,Ht+=8}return Ut},R2=new WeakSet,w_=function($t){return ar(this,Cl).serialize($t,Br(this,Zy,Vw).call(this))},$2=new WeakSet,R_=function($t,kt){this._freeHighlight.add(kt)&&$t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},k2=new WeakSet,$_=function($t,kt){this._freeHighlight.isEmpty()?$t.drawLayer.remove(this._freeHighlightId):$t.createAndAddNewEditor(kt,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},S2=new WeakSet,k_=function($t){const{color:kt}=this._initialData;return this.hasEditedComment||$t.color.some((Tt,Dt)=>Tt!==kt[Dt])},yr(tn,um),yr(tn,$2),yr(tn,k2),Es(tn,"_defaultColor",null),Es(tn,"_defaultOpacity",1),Es(tn,"_defaultThickness",12),Es(tn,"_type","highlight"),Es(tn,"_editorType",AnnotationEditorType.HIGHLIGHT),Es(tn,"_freeHighlightId",-1),Es(tn,"_freeHighlight",null),Es(tn,"_freeHighlightClipId","");let HighlightEditor=tn;var Hx;class DrawingOptions{constructor(){yr(this,Hx,Object.create(null))}updateProperty(dt,$t){this[dt]=$t,this.updateSVGProperty(dt,$t)}updateProperties(dt){if(dt)for(const[$t,kt]of Object.entries(dt))$t.startsWith("_")||this.updateProperty($t,kt)}updateSVGProperty(dt,$t){ar(this,Hx)[dt]=$t}toSVGProperties(){const dt=ar(this,Hx);return vr(this,Hx,Object.create(null)),{root:dt}}reset(){vr(this,Hx,Object.create(null))}updateAll(dt=this){this.updateProperties(dt)}clone(){unreachable("Not implemented")}}Hx=new WeakMap;var Tl,ev,uo,Gx,Wx,hm,pm,fm,qx,ew,F$,tw,L$,rw,O$,Kx,Fv,_2,S_,tv,zw,Yx,Lv,mm,m0;const Cs=class Cs extends AnnotationEditor{constructor($t){super($t);yr(this,ew);yr(this,tw);yr(this,rw);yr(this,Kx);yr(this,_2);yr(this,tv);yr(this,Yx);yr(this,mm);yr(this,Tl,null);yr(this,ev,void 0);Es(this,"_colorPicker",null);Es(this,"_drawId",null);vr(this,ev,$t.mustBeCommitted||!1),this._addOutlines($t)}onUpdatedColor(){var $t;($t=this._colorPicker)==null||$t.update(this.color),super.onUpdatedColor()}_addOutlines($t){$t.drawOutlines&&(Br(this,ew,F$).call(this,$t),Br(this,Kx,Fv).call(this))}static _mergeSVGProperties($t,kt){const Tt=new Set(Object.keys($t));for(const[Dt,Ft]of Object.entries(kt))Tt.has(Dt)?Object.assign($t[Dt],Ft):$t[Dt]=Ft;return $t}static getDefaultDrawingOptions($t){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams($t,kt){const Tt=this.typesMap.get($t);Tt&&this._defaultDrawingOptions.updateProperty(Tt,kt),this._currentParent&&(ar(Cs,uo).updateProperty(Tt,kt),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams($t,kt){const Tt=this.constructor.typesMap.get($t);Tt&&this._updateProperty($t,Tt,kt)}static get defaultPropertiesToUpdate(){const $t=[],kt=this._defaultDrawingOptions;for(const[Tt,Dt]of this.typesMap)$t.push([Tt,kt[Dt]]);return $t}get propertiesToUpdate(){const $t=[],{_drawingOptions:kt}=this;for(const[Tt,Dt]of this.constructor.typesMap)$t.push([Tt,kt[Dt]]);return $t}_updateProperty($t,kt,Tt){const Dt=this._drawingOptions,Ft=Dt[kt],Ut=Ht=>{var Yt;Dt.updateProperty(kt,Ht);const Kt=ar(this,Tl).updateProperty(kt,Ht);Kt&&Br(this,Yx,Lv).call(this,Kt),(Yt=this.parent)==null||Yt.drawLayer.updateProperties(this._drawId,Dt.toSVGProperties()),$t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:Ut.bind(this,Tt),undo:Ut.bind(this,Ft),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var $t;($t=this.parent)==null||$t.drawLayer.updateProperties(this._drawId,Cs._mergeSVGProperties(ar(this,Tl).getPathResizingSVGProperties(Br(this,tv,zw).call(this)),{bbox:Br(this,mm,m0).call(this)}))}_onResized(){var $t;($t=this.parent)==null||$t.drawLayer.updateProperties(this._drawId,Cs._mergeSVGProperties(ar(this,Tl).getPathResizedSVGProperties(Br(this,tv,zw).call(this)),{bbox:Br(this,mm,m0).call(this)}))}_onTranslating($t,kt){var Tt;(Tt=this.parent)==null||Tt.drawLayer.updateProperties(this._drawId,{bbox:Br(this,mm,m0).call(this)})}_onTranslated(){var $t;($t=this.parent)==null||$t.drawLayer.updateProperties(this._drawId,Cs._mergeSVGProperties(ar(this,Tl).getPathTranslatedSVGProperties(Br(this,tv,zw).call(this),this.parentDimensions),{bbox:Br(this,mm,m0).call(this)}))}_onStartDragging(){var $t;($t=this.parent)==null||$t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var $t;($t=this.parent)==null||$t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded($t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,ar(this,ev)&&(vr(this,ev,!1),this.commit(),this.parent.setSelected(this),$t&&this.isOnScreen&&this.div.focus())}remove(){Br(this,rw,O$).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(Br(this,Kx,Fv).call(this),Br(this,Yx,Lv).call(this,ar(this,Tl).box),this.isAttachedToDOM||this.parent.add(this)))}setParent($t){var Tt;let kt=!1;this.parent&&!$t?(this._uiManager.removeShouldRescale(this),Br(this,rw,O$).call(this)):$t&&(this._uiManager.addShouldRescale(this),Br(this,Kx,Fv).call(this,$t),kt=!this.parent&&((Tt=this.div)==null?void 0:Tt.classList.contains("selectedEditor"))),super.setParent($t),kt&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Cs._mergeSVGProperties({bbox:Br(this,mm,m0).call(this)},ar(this,Tl).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&Br(this,Yx,Lv).call(this,ar(this,Tl).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let $t,kt;this._isCopy&&($t=this.x,kt=this.y);const Tt=super.render();Tt.classList.add("draw");const Dt=document.createElement("div");return Tt.append(Dt),Dt.setAttribute("aria-hidden","true"),Dt.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste($t,kt),Tt}static createDrawerInstance($t,kt,Tt,Dt,Ft){unreachable("Not implemented")}static startDrawing($t,kt,Tt,Dt){var nr;const{target:Ft,offsetX:Ut,offsetY:Ht,pointerId:Kt,pointerType:Yt}=Dt;if(ar(Cs,pm)&&ar(Cs,pm)!==Yt)return;const{viewport:{rotation:Jt}}=$t,{width:Zt,height:er}=Ft.getBoundingClientRect(),rr=vr(Cs,Gx,new AbortController),sr=$t.combinedSignal(rr);if(ar(Cs,hm)||vr(Cs,hm,Kt),ar(Cs,pm)??vr(Cs,pm,Yt),window.addEventListener("pointerup",ir=>{var or;ar(Cs,hm)===ir.pointerId?this._endDraw(ir):(or=ar(Cs,fm))==null||or.delete(ir.pointerId)},{signal:sr}),window.addEventListener("pointercancel",ir=>{var or;ar(Cs,hm)===ir.pointerId?this._currentParent.endDrawingSession():(or=ar(Cs,fm))==null||or.delete(ir.pointerId)},{signal:sr}),window.addEventListener("pointerdown",ir=>{ar(Cs,pm)===ir.pointerType&&((ar(Cs,fm)||vr(Cs,fm,new Set)).add(ir.pointerId),ar(Cs,uo).isCancellable()&&(ar(Cs,uo).removeLastElement(),ar(Cs,uo).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:sr}),window.addEventListener("contextmenu",noContextMenu,{signal:sr}),Ft.addEventListener("pointermove",this._drawMove.bind(this),{signal:sr}),Ft.addEventListener("touchmove",ir=>{ir.timeStamp===ar(Cs,qx)&&stopEvent(ir)},{signal:sr}),$t.toggleDrawing(),(nr=kt._editorUndoBar)==null||nr.hide(),ar(Cs,uo)){$t.drawLayer.updateProperties(this._currentDrawId,ar(Cs,uo).startNew(Ut,Ht,Zt,er,Jt));return}kt.updateUIForDefaultProperties(this),vr(Cs,uo,this.createDrawerInstance(Ut,Ht,Zt,er,Jt)),vr(Cs,Wx,this.getDefaultDrawingOptions()),this._currentParent=$t,{id:this._currentDrawId}=$t.drawLayer.draw(this._mergeSVGProperties(ar(Cs,Wx).toSVGProperties(),ar(Cs,uo).defaultSVGProperties),!0,!1)}static _drawMove($t){var Ft;if(vr(Cs,qx,-1),!ar(Cs,uo))return;const{offsetX:kt,offsetY:Tt,pointerId:Dt}=$t;if(ar(Cs,hm)===Dt){if(((Ft=ar(Cs,fm))==null?void 0:Ft.size)>=1){this._endDraw($t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ar(Cs,uo).add(kt,Tt)),vr(Cs,qx,$t.timeStamp),stopEvent($t)}}static _cleanup($t){$t&&(this._currentDrawId=-1,this._currentParent=null,vr(Cs,uo,null),vr(Cs,Wx,null),vr(Cs,pm,null),vr(Cs,qx,NaN)),ar(Cs,Gx)&&(ar(Cs,Gx).abort(),vr(Cs,Gx,null),vr(Cs,hm,NaN),vr(Cs,fm,null))}static _endDraw($t){const kt=this._currentParent;if(kt){if(kt.toggleDrawing(!0),this._cleanup(!1),($t==null?void 0:$t.target)===kt.div&&kt.drawLayer.updateProperties(this._currentDrawId,ar(Cs,uo).end($t.offsetX,$t.offsetY)),this.supportMultipleDrawings){const Tt=ar(Cs,uo),Dt=this._currentDrawId,Ft=Tt.getLastElement();kt.addCommands({cmd:()=>{kt.drawLayer.updateProperties(Dt,Tt.setLastElement(Ft))},undo:()=>{kt.drawLayer.updateProperties(Dt,Tt.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing($t){const kt=this._currentParent;if(!kt)return null;if(kt.toggleDrawing(!0),kt.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!ar(Cs,uo).isEmpty()){const{pageDimensions:[Tt,Dt],scale:Ft}=kt,Ut=kt.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ar(Cs,uo).getOutlines(Tt*Ft,Dt*Ft,Ft,this._INNER_MARGIN),drawingOptions:ar(Cs,Wx),mustBeCommitted:!$t});return this._cleanup(!0),Ut}return kt.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions($t){}static deserializeDraw($t,kt,Tt,Dt,Ft,Ut){unreachable("Not implemented")}static async deserialize($t,kt,Tt){var Jt,Zt;const{rawDims:{pageWidth:Dt,pageHeight:Ft,pageX:Ut,pageY:Ht}}=kt.viewport,Kt=this.deserializeDraw(Ut,Ht,Dt,Ft,this._INNER_MARGIN,$t),Yt=await super.deserialize($t,kt,Tt);return Yt.createDrawingOptions($t),Br(Jt=Yt,ew,F$).call(Jt,{drawOutlines:Kt}),Br(Zt=Yt,Kx,Fv).call(Zt),Yt.onScaleChanging(),Yt.rotate(),Yt}serializeDraw($t){const[kt,Tt]=this.pageTranslation,[Dt,Ft]=this.pageDimensions;return ar(this,Tl).serialize([kt,Tt,Dt,Ft],$t)}renderAnnotationElement($t){return $t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Tl=new WeakMap,ev=new WeakMap,uo=new WeakMap,Gx=new WeakMap,Wx=new WeakMap,hm=new WeakMap,pm=new WeakMap,fm=new WeakMap,qx=new WeakMap,ew=new WeakSet,F$=function({drawOutlines:$t,drawId:kt,drawingOptions:Tt}){vr(this,Tl,$t),this._drawingOptions||(this._drawingOptions=Tt),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),kt>=0?(this._drawId=kt,this.parent.drawLayer.finalizeDraw(kt,$t.defaultProperties)):this._drawId=Br(this,tw,L$).call(this,$t,this.parent),Br(this,Yx,Lv).call(this,$t.box)},tw=new WeakSet,L$=function($t,kt){const{id:Tt}=kt.drawLayer.draw(Cs._mergeSVGProperties(this._drawingOptions.toSVGProperties(),$t.defaultSVGProperties),!1,!1);return Tt},rw=new WeakSet,O$=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Kx=new WeakSet,Fv=function($t=this.parent){if(!(this._drawId!==null&&this.parent===$t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,$t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=Br(this,tw,L$).call(this,ar(this,Tl),$t)}},_2=new WeakSet,S_=function([$t,kt,Tt,Dt]){const{parentDimensions:[Ft,Ut],rotation:Ht}=this;switch(Ht){case 90:return[kt,1-$t,Tt*(Ut/Ft),Dt*(Ft/Ut)];case 180:return[1-$t,1-kt,Tt,Dt];case 270:return[1-kt,$t,Tt*(Ut/Ft),Dt*(Ft/Ut)];default:return[$t,kt,Tt,Dt]}},tv=new WeakSet,zw=function(){const{x:$t,y:kt,width:Tt,height:Dt,parentDimensions:[Ft,Ut],rotation:Ht}=this;switch(Ht){case 90:return[1-kt,$t,Tt*(Ft/Ut),Dt*(Ut/Ft)];case 180:return[1-$t,1-kt,Tt,Dt];case 270:return[kt,1-$t,Tt*(Ft/Ut),Dt*(Ut/Ft)];default:return[$t,kt,Tt,Dt]}},Yx=new WeakSet,Lv=function($t){[this.x,this.y,this.width,this.height]=Br(this,_2,S_).call(this,$t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},mm=new WeakSet,m0=function(){const{x:$t,y:kt,width:Tt,height:Dt,rotation:Ft,parentRotation:Ut,parentDimensions:[Ht,Kt]}=this;switch((Ft*4+Ut)/90){case 1:return[1-kt-Dt,$t,Dt,Tt];case 2:return[1-$t-Tt,1-kt-Dt,Tt,Dt];case 3:return[kt,1-$t-Tt,Dt,Tt];case 4:return[$t,kt-Tt*(Ht/Kt),Dt*(Kt/Ht),Tt*(Ht/Kt)];case 5:return[1-kt,$t,Tt*(Ht/Kt),Dt*(Kt/Ht)];case 6:return[1-$t-Dt*(Kt/Ht),1-kt,Dt*(Kt/Ht),Tt*(Ht/Kt)];case 7:return[kt-Tt*(Ht/Kt),1-$t-Dt*(Kt/Ht),Tt*(Ht/Kt),Dt*(Kt/Ht)];case 8:return[$t-Tt,kt-Dt,Tt,Dt];case 9:return[1-kt,$t-Tt,Dt,Tt];case 10:return[1-$t,1-kt,Tt,Dt];case 11:return[kt-Dt,1-$t,Dt,Tt];case 12:return[$t-Dt*(Kt/Ht),kt,Dt*(Kt/Ht),Tt*(Ht/Kt)];case 13:return[1-kt-Tt*(Ht/Kt),$t-Dt*(Kt/Ht),Tt*(Ht/Kt),Dt*(Kt/Ht)];case 14:return[1-$t,1-kt-Tt*(Ht/Kt),Dt*(Kt/Ht),Tt*(Ht/Kt)];case 15:return[kt,1-$t,Tt*(Ht/Kt),Dt*(Kt/Ht)];default:return[$t,kt,Tt,Dt]}},Es(Cs,"_currentDrawId",-1),Es(Cs,"_currentParent",null),yr(Cs,uo,null),yr(Cs,Gx,null),yr(Cs,Wx,null),yr(Cs,hm,NaN),yr(Cs,pm,null),yr(Cs,fm,null),yr(Cs,qx,NaN),Es(Cs,"_INNER_MARGIN",3);let DrawingEditor=Cs;var Cu,ho,po,Xx,rv,Do,Ro,Gl,Qx,Jx,Zx,sv,Uw;class InkDrawOutliner{constructor(dt,$t,kt,Tt,Dt,Ft){yr(this,sv);yr(this,Cu,new Float64Array(6));yr(this,ho,void 0);yr(this,po,void 0);yr(this,Xx,void 0);yr(this,rv,void 0);yr(this,Do,void 0);yr(this,Ro,"");yr(this,Gl,0);yr(this,Qx,new InkDrawOutline);yr(this,Jx,void 0);yr(this,Zx,void 0);vr(this,Jx,kt),vr(this,Zx,Tt),vr(this,Xx,Dt),vr(this,rv,Ft),[dt,$t]=Br(this,sv,Uw).call(this,dt,$t);const Ut=vr(this,ho,[NaN,NaN,NaN,NaN,dt,$t]);vr(this,Do,[dt,$t]),vr(this,po,[{line:Ut,points:ar(this,Do)}]),ar(this,Cu).set(Ut,0)}updateProperty(dt,$t){dt==="stroke-width"&&vr(this,rv,$t)}isEmpty(){return!ar(this,po)||ar(this,po).length===0}isCancellable(){return ar(this,Do).length<=10}add(dt,$t){[dt,$t]=Br(this,sv,Uw).call(this,dt,$t);const[kt,Tt,Dt,Ft]=ar(this,Cu).subarray(2,6),Ut=dt-Dt,Ht=$t-Ft;return Math.hypot(ar(this,Jx)*Ut,ar(this,Zx)*Ht)<=2?null:(ar(this,Do).push(dt,$t),isNaN(kt)?(ar(this,Cu).set([Dt,Ft,dt,$t],2),ar(this,ho).push(NaN,NaN,NaN,NaN,dt,$t),{path:{d:this.toSVGPath()}}):(isNaN(ar(this,Cu)[0])&&ar(this,ho).splice(6,6),ar(this,Cu).set([kt,Tt,Dt,Ft,dt,$t],0),ar(this,ho).push(...Outline.createBezierPoints(kt,Tt,Dt,Ft,dt,$t)),{path:{d:this.toSVGPath()}}))}end(dt,$t){const kt=this.add(dt,$t);return kt||(ar(this,Do).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(dt,$t,kt,Tt,Dt){vr(this,Jx,kt),vr(this,Zx,Tt),vr(this,Xx,Dt),[dt,$t]=Br(this,sv,Uw).call(this,dt,$t);const Ft=vr(this,ho,[NaN,NaN,NaN,NaN,dt,$t]);vr(this,Do,[dt,$t]);const Ut=ar(this,po).at(-1);return Ut&&(Ut.line=new Float32Array(Ut.line),Ut.points=new Float32Array(Ut.points)),ar(this,po).push({line:Ft,points:ar(this,Do)}),ar(this,Cu).set(Ft,0),vr(this,Gl,0),this.toSVGPath(),null}getLastElement(){return ar(this,po).at(-1)}setLastElement(dt){return ar(this,po)?(ar(this,po).push(dt),vr(this,ho,dt.line),vr(this,Do,dt.points),vr(this,Gl,0),{path:{d:this.toSVGPath()}}):ar(this,Qx).setLastElement(dt)}removeLastElement(){if(!ar(this,po))return ar(this,Qx).removeLastElement();ar(this,po).pop(),vr(this,Ro,"");for(let dt=0,$t=ar(this,po).length;dt<$t;dt++){const{line:kt,points:Tt}=ar(this,po)[dt];vr(this,ho,kt),vr(this,Do,Tt),vr(this,Gl,0),this.toSVGPath()}return{path:{d:ar(this,Ro)}}}toSVGPath(){const dt=Outline.svgRound(ar(this,ho)[4]),$t=Outline.svgRound(ar(this,ho)[5]);if(ar(this,Do).length===2)return vr(this,Ro,`${ar(this,Ro)} M ${dt} ${$t} Z`),ar(this,Ro);if(ar(this,Do).length<=6){const Tt=ar(this,Ro).lastIndexOf("M");vr(this,Ro,`${ar(this,Ro).slice(0,Tt)} M ${dt} ${$t}`),vr(this,Gl,6)}if(ar(this,Do).length===4){const Tt=Outline.svgRound(ar(this,ho)[10]),Dt=Outline.svgRound(ar(this,ho)[11]);return vr(this,Ro,`${ar(this,Ro)} L ${Tt} ${Dt}`),vr(this,Gl,12),ar(this,Ro)}const kt=[];ar(this,Gl)===0&&(kt.push(`M ${dt} ${$t}`),vr(this,Gl,6));for(let Tt=ar(this,Gl),Dt=ar(this,ho).length;Tt<Dt;Tt+=6){const[Ft,Ut,Ht,Kt,Yt,Jt]=ar(this,ho).slice(Tt,Tt+6).map(Outline.svgRound);kt.push(`C${Ft} ${Ut} ${Ht} ${Kt} ${Yt} ${Jt}`)}return vr(this,Ro,ar(this,Ro)+kt.join(" ")),vr(this,Gl,ar(this,ho).length),ar(this,Ro)}getOutlines(dt,$t,kt,Tt){const Dt=ar(this,po).at(-1);return Dt.line=new Float32Array(Dt.line),Dt.points=new Float32Array(Dt.points),ar(this,Qx).build(ar(this,po),dt,$t,kt,ar(this,Xx),ar(this,rv),Tt),vr(this,Cu,null),vr(this,ho,null),vr(this,po,null),vr(this,Ro,null),ar(this,Qx)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Cu=new WeakMap,ho=new WeakMap,po=new WeakMap,Xx=new WeakMap,rv=new WeakMap,Do=new WeakMap,Ro=new WeakMap,Gl=new WeakMap,Qx=new WeakMap,Jx=new WeakMap,Zx=new WeakMap,sv=new WeakSet,Uw=function(dt,$t){return Outline._normalizePoint(dt,$t,ar(this,Jx),ar(this,Zx),ar(this,Xx))};var Fo,sw,nw,Pl,Au,Tu,nv,iv,_g,iu,Du,C2,__,A2,C_,T2,A_;class InkDrawOutline extends Outline{constructor(){super(...arguments);yr(this,iu);yr(this,C2);yr(this,A2);yr(this,T2);yr(this,Fo,void 0);yr(this,sw,0);yr(this,nw,void 0);yr(this,Pl,void 0);yr(this,Au,void 0);yr(this,Tu,void 0);yr(this,nv,void 0);yr(this,iv,void 0);yr(this,_g,void 0)}build($t,kt,Tt,Dt,Ft,Ut,Ht){vr(this,Au,kt),vr(this,Tu,Tt),vr(this,nv,Dt),vr(this,iv,Ft),vr(this,_g,Ut),vr(this,nw,Ht??0),vr(this,Pl,$t),Br(this,A2,C_).call(this)}get thickness(){return ar(this,_g)}setLastElement($t){return ar(this,Pl).push($t),{path:{d:this.toSVGPath()}}}removeLastElement(){return ar(this,Pl).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const $t=[];for(const{line:kt}of ar(this,Pl)){if($t.push(`M${Outline.svgRound(kt[4])} ${Outline.svgRound(kt[5])}`),kt.length===6){$t.push("Z");continue}if(kt.length===12&&isNaN(kt[6])){$t.push(`L${Outline.svgRound(kt[10])} ${Outline.svgRound(kt[11])}`);continue}for(let Tt=6,Dt=kt.length;Tt<Dt;Tt+=6){const[Ft,Ut,Ht,Kt,Yt,Jt]=kt.subarray(Tt,Tt+6).map(Outline.svgRound);$t.push(`C${Ft} ${Ut} ${Ht} ${Kt} ${Yt} ${Jt}`)}}return $t.join("")}serialize([$t,kt,Tt,Dt],Ft){const Ut=[],Ht=[],[Kt,Yt,Jt,Zt]=Br(this,C2,__).call(this);let er,rr,sr,nr,ir,or,lr,cr,dr;switch(ar(this,iv)){case 0:dr=Outline._rescale,er=$t,rr=kt+Dt,sr=Tt,nr=-Dt,ir=$t+Kt*Tt,or=kt+(1-Yt-Zt)*Dt,lr=$t+(Kt+Jt)*Tt,cr=kt+(1-Yt)*Dt;break;case 90:dr=Outline._rescaleAndSwap,er=$t,rr=kt,sr=Tt,nr=Dt,ir=$t+Yt*Tt,or=kt+Kt*Dt,lr=$t+(Yt+Zt)*Tt,cr=kt+(Kt+Jt)*Dt;break;case 180:dr=Outline._rescale,er=$t+Tt,rr=kt,sr=-Tt,nr=Dt,ir=$t+(1-Kt-Jt)*Tt,or=kt+Yt*Dt,lr=$t+(1-Kt)*Tt,cr=kt+(Yt+Zt)*Dt;break;case 270:dr=Outline._rescaleAndSwap,er=$t+Tt,rr=kt+Dt,sr=-Tt,nr=-Dt,ir=$t+(1-Yt-Zt)*Tt,or=kt+(1-Kt-Jt)*Dt,lr=$t+(1-Yt)*Tt,cr=kt+(1-Kt)*Dt;break}for(const{line:ur,points:pr}of ar(this,Pl))Ut.push(dr(ur,er,rr,sr,nr,Ft?new Array(ur.length):null)),Ht.push(dr(pr,er,rr,sr,nr,Ft?new Array(pr.length):null));return{lines:Ut,points:Ht,rect:[ir,or,lr,cr]}}static deserialize($t,kt,Tt,Dt,Ft,{paths:{lines:Ut,points:Ht},rotation:Kt,thickness:Yt}){const Jt=[];let Zt,er,rr,sr,nr;switch(Kt){case 0:nr=Outline._rescale,Zt=-$t/Tt,er=kt/Dt+1,rr=1/Tt,sr=-1/Dt;break;case 90:nr=Outline._rescaleAndSwap,Zt=-kt/Dt,er=-$t/Tt,rr=1/Dt,sr=1/Tt;break;case 180:nr=Outline._rescale,Zt=$t/Tt+1,er=-kt/Dt,rr=-1/Tt,sr=1/Dt;break;case 270:nr=Outline._rescaleAndSwap,Zt=kt/Dt+1,er=$t/Tt+1,rr=-1/Dt,sr=-1/Tt;break}if(!Ut){Ut=[];for(const or of Ht){const lr=or.length;if(lr===2){Ut.push(new Float32Array([NaN,NaN,NaN,NaN,or[0],or[1]]));continue}if(lr===4){Ut.push(new Float32Array([NaN,NaN,NaN,NaN,or[0],or[1],NaN,NaN,NaN,NaN,or[2],or[3]]));continue}const cr=new Float32Array(3*(lr-2));Ut.push(cr);let[dr,ur,pr,mr]=or.subarray(0,4);cr.set([NaN,NaN,NaN,NaN,dr,ur],0);for(let jr=4;jr<lr;jr+=2){const Rr=or[jr],xr=or[jr+1];cr.set(Outline.createBezierPoints(dr,ur,pr,mr,Rr,xr),(jr-2)*3),[dr,ur,pr,mr]=[pr,mr,Rr,xr]}}}for(let or=0,lr=Ut.length;or<lr;or++)Jt.push({line:nr(Ut[or].map(cr=>cr??NaN),Zt,er,rr,sr),points:nr(Ht[or].map(cr=>cr??NaN),Zt,er,rr,sr)});const ir=new this.prototype.constructor;return ir.build(Jt,Tt,Dt,1,Kt,Yt,Ft),ir}get box(){return ar(this,Fo)}updateProperty($t,kt){return $t==="stroke-width"?Br(this,T2,A_).call(this,kt):null}updateParentDimensions([$t,kt],Tt){const[Dt,Ft]=Br(this,iu,Du).call(this);vr(this,Au,$t),vr(this,Tu,kt),vr(this,nv,Tt);const[Ut,Ht]=Br(this,iu,Du).call(this),Kt=Ut-Dt,Yt=Ht-Ft,Jt=ar(this,Fo);return Jt[0]-=Kt,Jt[1]-=Yt,Jt[2]+=2*Kt,Jt[3]+=2*Yt,Jt}updateRotation($t){return vr(this,sw,$t),{path:{transform:this.rotationTransform}}}get viewBox(){return ar(this,Fo).map(Outline.svgRound).join(" ")}get defaultProperties(){const[$t,kt]=ar(this,Fo);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound($t)} ${Outline.svgRound(kt)}`}}}get rotationTransform(){const[,,$t,kt]=ar(this,Fo);let Tt=0,Dt=0,Ft=0,Ut=0,Ht=0,Kt=0;switch(ar(this,sw)){case 90:Dt=kt/$t,Ft=-$t/kt,Ht=$t;break;case 180:Tt=-1,Ut=-1,Ht=$t,Kt=kt;break;case 270:Dt=-kt/$t,Ft=$t/kt,Kt=kt;break;default:return""}return`matrix(${Tt} ${Dt} ${Ft} ${Ut} ${Outline.svgRound(Ht)} ${Outline.svgRound(Kt)})`}getPathResizingSVGProperties([$t,kt,Tt,Dt]){const[Ft,Ut]=Br(this,iu,Du).call(this),[Ht,Kt,Yt,Jt]=ar(this,Fo);if(Math.abs(Yt-Ft)<=Outline.PRECISION||Math.abs(Jt-Ut)<=Outline.PRECISION){const nr=$t+Tt/2-(Ht+Yt/2),ir=kt+Dt/2-(Kt+Jt/2);return{path:{"transform-origin":`${Outline.svgRound($t)} ${Outline.svgRound(kt)}`,transform:`${this.rotationTransform} translate(${nr} ${ir})`}}}const Zt=(Tt-2*Ft)/(Yt-2*Ft),er=(Dt-2*Ut)/(Jt-2*Ut),rr=Yt/Tt,sr=Jt/Dt;return{path:{"transform-origin":`${Outline.svgRound(Ht)} ${Outline.svgRound(Kt)}`,transform:`${this.rotationTransform} scale(${rr} ${sr}) translate(${Outline.svgRound(Ft)} ${Outline.svgRound(Ut)}) scale(${Zt} ${er}) translate(${Outline.svgRound(-Ft)} ${Outline.svgRound(-Ut)})`}}}getPathResizedSVGProperties([$t,kt,Tt,Dt]){const[Ft,Ut]=Br(this,iu,Du).call(this),Ht=ar(this,Fo),[Kt,Yt,Jt,Zt]=Ht;if(Ht[0]=$t,Ht[1]=kt,Ht[2]=Tt,Ht[3]=Dt,Math.abs(Jt-Ft)<=Outline.PRECISION||Math.abs(Zt-Ut)<=Outline.PRECISION){const ir=$t+Tt/2-(Kt+Jt/2),or=kt+Dt/2-(Yt+Zt/2);for(const{line:lr,points:cr}of ar(this,Pl))Outline._translate(lr,ir,or,lr),Outline._translate(cr,ir,or,cr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound($t)} ${Outline.svgRound(kt)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const er=(Tt-2*Ft)/(Jt-2*Ft),rr=(Dt-2*Ut)/(Zt-2*Ut),sr=-er*(Kt+Ft)+$t+Ft,nr=-rr*(Yt+Ut)+kt+Ut;if(er!==1||rr!==1||sr!==0||nr!==0)for(const{line:ir,points:or}of ar(this,Pl))Outline._rescale(ir,sr,nr,er,rr,ir),Outline._rescale(or,sr,nr,er,rr,or);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound($t)} ${Outline.svgRound(kt)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([$t,kt],Tt){const[Dt,Ft]=Tt,Ut=ar(this,Fo),Ht=$t-Ut[0],Kt=kt-Ut[1];if(ar(this,Au)===Dt&&ar(this,Tu)===Ft)for(const{line:Yt,points:Jt}of ar(this,Pl))Outline._translate(Yt,Ht,Kt,Yt),Outline._translate(Jt,Ht,Kt,Jt);else{const Yt=ar(this,Au)/Dt,Jt=ar(this,Tu)/Ft;vr(this,Au,Dt),vr(this,Tu,Ft);for(const{line:Zt,points:er}of ar(this,Pl))Outline._rescale(Zt,Ht,Kt,Yt,Jt,Zt),Outline._rescale(er,Ht,Kt,Yt,Jt,er);Ut[2]*=Yt,Ut[3]*=Jt}return Ut[0]=$t,Ut[1]=kt,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound($t)} ${Outline.svgRound(kt)}`}}}get defaultSVGProperties(){const $t=ar(this,Fo);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound($t[0])} ${Outline.svgRound($t[1])}`,transform:this.rotationTransform||null},bbox:$t}}}Fo=new WeakMap,sw=new WeakMap,nw=new WeakMap,Pl=new WeakMap,Au=new WeakMap,Tu=new WeakMap,nv=new WeakMap,iv=new WeakMap,_g=new WeakMap,iu=new WeakSet,Du=function($t=ar(this,_g)){const kt=ar(this,nw)+$t/2*ar(this,nv);return ar(this,iv)%180===0?[kt/ar(this,Au),kt/ar(this,Tu)]:[kt/ar(this,Tu),kt/ar(this,Au)]},C2=new WeakSet,__=function(){const[$t,kt,Tt,Dt]=ar(this,Fo),[Ft,Ut]=Br(this,iu,Du).call(this,0);return[$t+Ft,kt+Ut,Tt-2*Ft,Dt-2*Ut]},A2=new WeakSet,C_=function(){const $t=vr(this,Fo,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:Dt}of ar(this,Pl)){if(Dt.length<=12){for(let Ht=4,Kt=Dt.length;Ht<Kt;Ht+=6)Util.pointBoundingBox(Dt[Ht],Dt[Ht+1],$t);continue}let Ft=Dt[4],Ut=Dt[5];for(let Ht=6,Kt=Dt.length;Ht<Kt;Ht+=6){const[Yt,Jt,Zt,er,rr,sr]=Dt.subarray(Ht,Ht+6);Util.bezierBoundingBox(Ft,Ut,Yt,Jt,Zt,er,rr,sr,$t),Ft=rr,Ut=sr}}const[kt,Tt]=Br(this,iu,Du).call(this);$t[0]=MathClamp($t[0]-kt,0,1),$t[1]=MathClamp($t[1]-Tt,0,1),$t[2]=MathClamp($t[2]+kt,0,1),$t[3]=MathClamp($t[3]+Tt,0,1),$t[2]-=$t[0],$t[3]-=$t[1]},T2=new WeakSet,A_=function($t){const[kt,Tt]=Br(this,iu,Du).call(this);vr(this,_g,$t);const[Dt,Ft]=Br(this,iu,Du).call(this),[Ut,Ht]=[Dt-kt,Ft-Tt],Kt=ar(this,Fo);return Kt[0]-=Ut,Kt[1]-=Ht,Kt[2]+=2*Ut,Kt[3]+=2*Ht,Kt};class InkDrawingOptions extends DrawingOptions{constructor(dt){super(),this._viewParameters=dt,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(dt,$t){dt==="stroke-width"&&($t??($t=this["stroke-width"]),$t*=this._viewParameters.realScale),super.updateSVGProperty(dt,$t)}clone(){const dt=new InkDrawingOptions(this._viewParameters);return dt.updateAll(this),dt}}var N2,T_;const y0=class y0 extends DrawingEditor{constructor($t){super({...$t,name:"inkEditor"});yr(this,N2);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize($t,kt){AnnotationEditor.initialize($t,kt),this._defaultDrawingOptions=new InkDrawingOptions(kt.viewParameters)}static getDefaultDrawingOptions($t){const kt=this._defaultDrawingOptions.clone();return kt.updateProperties($t),kt}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance($t,kt,Tt,Dt,Ft){return new InkDrawOutliner($t,kt,Tt,Dt,Ft,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw($t,kt,Tt,Dt,Ft,Ut){return InkDrawOutline.deserialize($t,kt,Tt,Dt,Ft,Ut)}static async deserialize($t,kt,Tt){let Dt=null;if($t instanceof InkAnnotationElement){const{data:{inkLists:Ut,rect:Ht,rotation:Kt,id:Yt,color:Jt,opacity:Zt,borderStyle:{rawWidth:er},popupRef:rr,richText:sr,contentsObj:nr,creationDate:ir,modificationDate:or},parent:{page:{pageNumber:lr}}}=$t;Dt=$t={annotationType:AnnotationEditorType.INK,color:Array.from(Jt),thickness:er,opacity:Zt,paths:{points:Ut},boxes:null,pageIndex:lr-1,rect:Ht.slice(0),rotation:Kt,annotationElementId:Yt,id:Yt,deleted:!1,popupRef:rr,richText:sr,comment:(nr==null?void 0:nr.str)||null,creationDate:ir,modificationDate:or}}const Ft=await super.deserialize($t,kt,Tt);return Ft._initialData=Dt,$t.comment&&Ft.setCommentData($t),Ft}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new BasicColorPicker(this)),[["colorPicker",this._colorPicker]]}get colorType(){return AnnotationEditorParamsType.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:$t,_drawingOptions:kt,parent:Tt}=this;kt.updateSVGProperty("stroke-width"),Tt.drawLayer.updateProperties($t,kt.toSVGProperties())}static onScaleChangingWhenDrawing(){const $t=this._currentParent;$t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),$t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:$t,thickness:kt,opacity:Tt}){this._drawingOptions=y0.getDefaultDrawingOptions({stroke:Util.makeHexColor(...$t),"stroke-width":kt,"stroke-opacity":Tt})}serialize($t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:kt,points:Tt}=this.serializeDraw($t),{_drawingOptions:{stroke:Dt,"stroke-opacity":Ft,"stroke-width":Ut}}=this,Ht=Object.assign(super.serialize($t),{color:AnnotationEditor._colorManager.convert(Dt),opacity:Ft,thickness:Ut,paths:{lines:kt,points:Tt}});return this.addComment(Ht),$t?(Ht.isCopy=!0,Ht):this.annotationElementId&&!Br(this,N2,T_).call(this,Ht)?null:(Ht.id=this.annotationElementId,Ht)}renderAnnotationElement($t){if(this.deleted)return $t.hide(),null;const{points:kt,rect:Tt}=this.serializeDraw(!1);return $t.updateEdited({rect:Tt,thickness:this._drawingOptions["stroke-width"],points:kt,popup:this.comment}),null}};N2=new WeakSet,T_=function($t){const{color:kt,thickness:Tt,opacity:Dt,pageIndex:Ft}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||$t.color.some((Ut,Ht)=>Ut!==kt[Ht])||$t.thickness!==Tt||$t.opacity!==Dt||$t.pageIndex!==Ft},Es(y0,"_type","ink"),Es(y0,"_editorType",AnnotationEditorType.INK),Es(y0,"_defaultDrawingOptions",null);let InkEditor=y0;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let dt=super.toSVGPath();return dt.endsWith("Z")||(dt+="Z"),dt}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var e0,iw,B$,au,P2,N_,M2,P_,aw,V$,av,Hw,I2,M_,D2,I_,F2,D_,ow,z$,lw,U$,L2,F_;class SignatureExtractor{static extractContoursFromText(dt,{fontFamily:$t,fontStyle:kt,fontWeight:Tt},Dt,Ft,Ut,Ht){let Kt=new OffscreenCanvas(1,1),Yt=Kt.getContext("2d",{alpha:!1});const Jt=200,Zt=Yt.font=`${kt} ${Tt} ${Jt}px ${$t}`,{actualBoundingBoxLeft:er,actualBoundingBoxRight:rr,actualBoundingBoxAscent:sr,actualBoundingBoxDescent:nr,fontBoundingBoxAscent:ir,fontBoundingBoxDescent:or,width:lr}=Yt.measureText(dt),cr=1.5,dr=Math.ceil(Math.max(Math.abs(er)+Math.abs(rr)||0,lr)*cr),ur=Math.ceil(Math.max(Math.abs(sr)+Math.abs(nr)||Jt,Math.abs(ir)+Math.abs(or)||Jt)*cr);Kt=new OffscreenCanvas(dr,ur),Yt=Kt.getContext("2d",{alpha:!0,willReadFrequently:!0}),Yt.font=Zt,Yt.filter="grayscale(1)",Yt.fillStyle="white",Yt.fillRect(0,0,dr,ur),Yt.fillStyle="black",Yt.fillText(dt,dr*(cr-1)/2,ur*(3-cr)/2);const pr=Br(this,ow,z$).call(this,Yt.getImageData(0,0,dr,ur).data),mr=Br(this,F2,D_).call(this,pr),jr=Br(this,lw,U$).call(this,mr),Rr=Br(this,aw,V$).call(this,pr,dr,ur,jr);return this.processDrawnLines({lines:{curves:Rr,width:dr,height:ur},pageWidth:Dt,pageHeight:Ft,rotation:Ut,innerMargin:Ht,mustSmooth:!0,areContours:!0})}static process(dt,$t,kt,Tt,Dt){const[Ft,Ut,Ht]=Br(this,L2,F_).call(this,dt),[Kt,Yt]=Br(this,D2,I_).call(this,Ft,Ut,Ht,Math.hypot(Ut,Ht)*ar(this,e0).sigmaSFactor,ar(this,e0).sigmaR,ar(this,e0).kernelSize),Jt=Br(this,lw,U$).call(this,Yt),Zt=Br(this,aw,V$).call(this,Kt,Ut,Ht,Jt);return this.processDrawnLines({lines:{curves:Zt,width:Ut,height:Ht},pageWidth:$t,pageHeight:kt,rotation:Tt,innerMargin:Dt,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:dt,pageWidth:$t,pageHeight:kt,rotation:Tt,innerMargin:Dt,mustSmooth:Ft,areContours:Ut}){Tt%180!==0&&([$t,kt]=[kt,$t]);const{curves:Ht,width:Kt,height:Yt}=dt,Jt=dt.thickness??0,Zt=[],er=Math.min($t/Kt,kt/Yt),rr=er/$t,sr=er/kt,nr=[];for(const{points:or}of Ht){const lr=Ft?Br(this,I2,M_).call(this,or):or;if(!lr)continue;nr.push(lr);const cr=lr.length,dr=new Float32Array(cr),ur=new Float32Array(3*(cr===2?2:cr-2));if(Zt.push({line:ur,points:dr}),cr===2){dr[0]=lr[0]*rr,dr[1]=lr[1]*sr,ur.set([NaN,NaN,NaN,NaN,dr[0],dr[1]],0);continue}let[pr,mr,jr,Rr]=lr;pr*=rr,mr*=sr,jr*=rr,Rr*=sr,dr.set([pr,mr,jr,Rr],0),ur.set([NaN,NaN,NaN,NaN,pr,mr],0);for(let xr=4;xr<cr;xr+=2){const kr=dr[xr]=lr[xr]*rr,Mr=dr[xr+1]=lr[xr+1]*sr;ur.set(Outline.createBezierPoints(pr,mr,jr,Rr,kr,Mr),(xr-2)*3),[pr,mr,jr,Rr]=[jr,Rr,kr,Mr]}}if(Zt.length===0)return null;const ir=Ut?new ContourDrawOutline:new InkDrawOutline;return ir.build(Zt,$t,kt,1,Tt,Ut?0:Jt,Dt),{outline:ir,newCurves:nr,areContours:Ut,thickness:Jt,width:Kt,height:Yt}}static async compressSignature({outlines:dt,areContours:$t,thickness:kt,width:Tt,height:Dt}){let Ft=1/0,Ut=-1/0,Ht=0;for(const lr of dt){Ht+=lr.length;for(let cr=2,dr=lr.length;cr<dr;cr++){const ur=lr[cr]-lr[cr-2];Ft=Math.min(Ft,ur),Ut=Math.max(Ut,ur)}}let Kt;Ft>=-128&&Ut<=127?Kt=Int8Array:Ft>=-32768&&Ut<=32767?Kt=Int16Array:Kt=Int32Array;const Yt=dt.length,Jt=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*Yt,Zt=new Uint32Array(Jt);let er=0;Zt[er++]=Jt*Uint32Array.BYTES_PER_ELEMENT+(Ht-2*Yt)*Kt.BYTES_PER_ELEMENT,Zt[er++]=0,Zt[er++]=Tt,Zt[er++]=Dt,Zt[er++]=$t?0:1,Zt[er++]=Math.max(0,Math.floor(kt??0)),Zt[er++]=Yt,Zt[er++]=Kt.BYTES_PER_ELEMENT;for(const lr of dt)Zt[er++]=lr.length-2,Zt[er++]=lr[0],Zt[er++]=lr[1];const rr=new CompressionStream("deflate-raw"),sr=rr.writable.getWriter();await sr.ready,sr.write(Zt);const nr=Kt.prototype.constructor;for(const lr of dt){const cr=new nr(lr.length-2);for(let dr=2,ur=lr.length;dr<ur;dr++)cr[dr-2]=lr[dr]-lr[dr-2];sr.write(cr)}sr.close();const ir=await new Response(rr.readable).arrayBuffer(),or=new Uint8Array(ir);return toBase64Util(or)}static async decompressSignature(dt){try{const $t=fromBase64Util(dt),{readable:kt,writable:Tt}=new DecompressionStream("deflate-raw"),Dt=Tt.getWriter();await Dt.ready,Dt.write($t).then(async()=>{await Dt.ready,await Dt.close()}).catch(()=>{});let Ft=null,Ut=0;for await(const lr of kt)Ft||(Ft=new Uint8Array(new Uint32Array(lr.buffer,0,4)[0])),Ft.set(lr,Ut),Ut+=lr.length;const Ht=new Uint32Array(Ft.buffer,0,Ft.length>>2),Kt=Ht[1];if(Kt!==0)throw new Error(`Invalid version: ${Kt}`);const Yt=Ht[2],Jt=Ht[3],Zt=Ht[4]===0,er=Ht[5],rr=Ht[6],sr=Ht[7],nr=[],ir=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*rr)*Uint32Array.BYTES_PER_ELEMENT;let or;switch(sr){case Int8Array.BYTES_PER_ELEMENT:or=new Int8Array(Ft.buffer,ir);break;case Int16Array.BYTES_PER_ELEMENT:or=new Int16Array(Ft.buffer,ir);break;case Int32Array.BYTES_PER_ELEMENT:or=new Int32Array(Ft.buffer,ir);break}Ut=0;for(let lr=0;lr<rr;lr++){const cr=Ht[POINTS_PROPERTIES_NUMBER*lr+BASE_HEADER_LENGTH],dr=new Float32Array(cr+2);nr.push(dr);for(let ur=0;ur<POINTS_PROPERTIES_NUMBER-1;ur++)dr[ur]=Ht[POINTS_PROPERTIES_NUMBER*lr+BASE_HEADER_LENGTH+ur+1];for(let ur=0;ur<cr;ur++)dr[ur+2]=dr[ur]+or[Ut++]}return{areContours:Zt,thickness:er,outlines:nr,width:Yt,height:Jt}}catch($t){return warn(`decompressSignature: ${$t}`),null}}}e0=new WeakMap,iw=new WeakSet,B$=function(dt,$t,kt,Tt){return kt-=dt,Tt-=$t,kt===0?Tt>0?0:4:kt===1?Tt+6:2-Tt},au=new WeakMap,P2=new WeakSet,N_=function(dt,$t,kt,Tt,Dt,Ft,Ut){const Ht=Br(this,iw,B$).call(this,kt,Tt,Dt,Ft);for(let Kt=0;Kt<8;Kt++){const Yt=(-Kt+Ht-Ut+16)%8,Jt=ar(this,au)[2*Yt],Zt=ar(this,au)[2*Yt+1];if(dt[(kt+Jt)*$t+(Tt+Zt)]!==0)return Yt}return-1},M2=new WeakSet,P_=function(dt,$t,kt,Tt,Dt,Ft,Ut){const Ht=Br(this,iw,B$).call(this,kt,Tt,Dt,Ft);for(let Kt=0;Kt<8;Kt++){const Yt=(Kt+Ht+Ut+16)%8,Jt=ar(this,au)[2*Yt],Zt=ar(this,au)[2*Yt+1];if(dt[(kt+Jt)*$t+(Tt+Zt)]!==0)return Yt}return-1},aw=new WeakSet,V$=function(dt,$t,kt,Tt){const Dt=dt.length,Ft=new Int32Array(Dt);for(let Yt=0;Yt<Dt;Yt++)Ft[Yt]=dt[Yt]<=Tt?1:0;for(let Yt=1;Yt<kt-1;Yt++)Ft[Yt*$t]=Ft[Yt*$t+$t-1]=0;for(let Yt=0;Yt<$t;Yt++)Ft[Yt]=Ft[$t*kt-1-Yt]=0;let Ut=1,Ht;const Kt=[];for(let Yt=1;Yt<kt-1;Yt++){Ht=1;for(let Jt=1;Jt<$t-1;Jt++){const Zt=Yt*$t+Jt,er=Ft[Zt];if(er===0)continue;let rr=Yt,sr=Jt;if(er===1&&Ft[Zt-1]===0)Ut+=1,sr-=1;else if(er>=1&&Ft[Zt+1]===0)Ut+=1,sr+=1,er>1&&(Ht=er);else{er!==1&&(Ht=Math.abs(er));continue}const nr=[Jt,Yt],ir=sr===Jt+1,or={isHole:ir,points:nr,id:Ut,parent:0};Kt.push(or);let lr;for(const xr of Kt)if(xr.id===Ht){lr=xr;break}lr?lr.isHole?or.parent=ir?lr.parent:Ht:or.parent=ir?Ht:lr.parent:or.parent=ir?Ht:0;const cr=Br(this,P2,N_).call(this,Ft,$t,Yt,Jt,rr,sr,0);if(cr===-1){Ft[Zt]=-Ut,Ft[Zt]!==1&&(Ht=Math.abs(Ft[Zt]));continue}let dr=ar(this,au)[2*cr],ur=ar(this,au)[2*cr+1];const pr=Yt+dr,mr=Jt+ur;rr=pr,sr=mr;let jr=Yt,Rr=Jt;for(;;){const xr=Br(this,M2,P_).call(this,Ft,$t,jr,Rr,rr,sr,1);dr=ar(this,au)[2*xr],ur=ar(this,au)[2*xr+1];const kr=jr+dr,Mr=Rr+ur;nr.push(Mr,kr);const Tr=jr*$t+Rr;if(Ft[Tr+1]===0?Ft[Tr]=-Ut:Ft[Tr]===1&&(Ft[Tr]=Ut),kr===Yt&&Mr===Jt&&jr===pr&&Rr===mr){Ft[Zt]!==1&&(Ht=Math.abs(Ft[Zt]));break}else rr=jr,sr=Rr,jr=kr,Rr=Mr}}}return Kt},av=new WeakSet,Hw=function(dt,$t,kt,Tt){if(kt-$t<=4){for(let pr=$t;pr<kt-2;pr+=2)Tt.push(dt[pr],dt[pr+1]);return}const Dt=dt[$t],Ft=dt[$t+1],Ut=dt[kt-4]-Dt,Ht=dt[kt-3]-Ft,Kt=Math.hypot(Ut,Ht),Yt=Ut/Kt,Jt=Ht/Kt,Zt=Yt*Ft-Jt*Dt,er=Ht/Ut,rr=1/Kt,sr=Math.atan(er),nr=Math.cos(sr),ir=Math.sin(sr),or=rr*(Math.abs(nr)+Math.abs(ir)),lr=rr*(1-or+or**2),cr=Math.max(Math.atan(Math.abs(ir+nr)*lr),Math.atan(Math.abs(ir-nr)*lr));let dr=0,ur=$t;for(let pr=$t+2;pr<kt-2;pr+=2){const mr=Math.abs(Zt-Yt*dt[pr+1]+Jt*dt[pr]);mr>dr&&(ur=pr,dr=mr)}dr>(Kt*cr)**2?(Br(this,av,Hw).call(this,dt,$t,ur+2,Tt),Br(this,av,Hw).call(this,dt,ur,kt,Tt)):Tt.push(Dt,Ft)},I2=new WeakSet,M_=function(dt){const $t=[],kt=dt.length;return Br(this,av,Hw).call(this,dt,0,kt,$t),$t.push(dt[kt-2],dt[kt-1]),$t.length<=4?null:$t},D2=new WeakSet,I_=function(dt,$t,kt,Tt,Dt,Ft){const Ut=new Float32Array(Ft**2),Ht=-2*Tt**2,Kt=Ft>>1;for(let sr=0;sr<Ft;sr++){const nr=(sr-Kt)**2;for(let ir=0;ir<Ft;ir++)Ut[sr*Ft+ir]=Math.exp((nr+(ir-Kt)**2)/Ht)}const Yt=new Float32Array(256),Jt=-2*Dt**2;for(let sr=0;sr<256;sr++)Yt[sr]=Math.exp(sr**2/Jt);const Zt=dt.length,er=new Uint8Array(Zt),rr=new Uint32Array(256);for(let sr=0;sr<kt;sr++)for(let nr=0;nr<$t;nr++){const ir=sr*$t+nr,or=dt[ir];let lr=0,cr=0;for(let ur=0;ur<Ft;ur++){const pr=sr+ur-Kt;if(!(pr<0||pr>=kt))for(let mr=0;mr<Ft;mr++){const jr=nr+mr-Kt;if(jr<0||jr>=$t)continue;const Rr=dt[pr*$t+jr],xr=Ut[ur*Ft+mr]*Yt[Math.abs(Rr-or)];lr+=Rr*xr,cr+=xr}}const dr=er[ir]=Math.round(lr/cr);rr[dr]++}return[er,rr]},F2=new WeakSet,D_=function(dt){const $t=new Uint32Array(256);for(const kt of dt)$t[kt]++;return $t},ow=new WeakSet,z$=function(dt){const $t=dt.length,kt=new Uint8ClampedArray($t>>2);let Tt=-1/0,Dt=1/0;for(let Ut=0,Ht=kt.length;Ut<Ht;Ut++){const Kt=kt[Ut]=dt[Ut<<2];Tt=Math.max(Tt,Kt),Dt=Math.min(Dt,Kt)}const Ft=255/(Tt-Dt);for(let Ut=0,Ht=kt.length;Ut<Ht;Ut++)kt[Ut]=(kt[Ut]-Dt)*Ft;return kt},lw=new WeakSet,U$=function(dt){let $t,kt=-1/0,Tt=-1/0;const Dt=dt.findIndex(Ht=>Ht!==0);let Ft=Dt,Ut=Dt;for($t=Dt;$t<256;$t++){const Ht=dt[$t];Ht>kt&&($t-Ft>Tt&&(Tt=$t-Ft,Ut=$t-1),kt=Ht,Ft=$t)}for($t=Ut-1;$t>=0&&!(dt[$t]>dt[$t+1]);$t--);return $t},L2=new WeakSet,F_=function(dt){const $t=dt,{width:kt,height:Tt}=dt,{maxDim:Dt}=ar(this,e0);let Ft=kt,Ut=Tt;if(kt>Dt||Tt>Dt){let Zt=kt,er=Tt,rr=Math.log2(Math.max(kt,Tt)/Dt);const sr=Math.floor(rr);rr=rr===sr?sr-1:sr;for(let ir=0;ir<rr;ir++){Ft=Math.ceil(Zt/2),Ut=Math.ceil(er/2);const or=new OffscreenCanvas(Ft,Ut);or.getContext("2d").drawImage(dt,0,0,Zt,er,0,0,Ft,Ut),Zt=Ft,er=Ut,dt!==$t&&dt.close(),dt=or.transferToImageBitmap()}const nr=Math.min(Dt/Ft,Dt/Ut);Ft=Math.round(Ft*nr),Ut=Math.round(Ut*nr)}const Kt=new OffscreenCanvas(Ft,Ut).getContext("2d",{willReadFrequently:!0});Kt.fillStyle="white",Kt.fillRect(0,0,Ft,Ut),Kt.filter="grayscale(1)",Kt.drawImage(dt,0,0,dt.width,dt.height,0,0,Ft,Ut);const Yt=Kt.getImageData(0,0,Ft,Ut).data;return[Br(this,ow,z$).call(this,Yt),Ft,Ut]},yr(SignatureExtractor,iw),yr(SignatureExtractor,P2),yr(SignatureExtractor,M2),yr(SignatureExtractor,aw),yr(SignatureExtractor,av),yr(SignatureExtractor,I2),yr(SignatureExtractor,D2),yr(SignatureExtractor,F2),yr(SignatureExtractor,ow),yr(SignatureExtractor,lw),yr(SignatureExtractor,L2),yr(SignatureExtractor,e0,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),yr(SignatureExtractor,au,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const dt=new SignatureOptions;return dt.updateAll(this),dt}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(dt){super(dt),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const dt=new DrawnSignatureOptions(this._viewParameters);return dt.updateAll(this),dt}}var xm,Nu,gm,r0;const Ko=class Ko extends DrawingEditor{constructor($t){super({...$t,mustBeCommitted:!0,name:"signatureEditor"});yr(this,xm,!1);yr(this,Nu,null);yr(this,gm,null);yr(this,r0,null);this._willKeepAspectRatio=!0,vr(this,gm,$t.signatureData||null),vr(this,Nu,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize($t,kt){AnnotationEditor.initialize($t,kt),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(kt.viewParameters)}static getDefaultDrawingOptions($t){const kt=this._defaultDrawingOptions.clone();return kt.updateProperties($t),kt}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!ar(this,Nu)}}static computeTelemetryFinalData($t){const kt=$t.get("hasDescription");return{hasAltText:kt.get(!0)??0,hasNoAltText:kt.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let $t,kt;const{_isCopy:Tt}=this;if(Tt&&(this._isCopy=!1,$t=this.x,kt=this.y),super.render(),this._drawId===null)if(ar(this,gm)){const{lines:Dt,mustSmooth:Ft,areContours:Ut,description:Ht,uuid:Kt,heightInPage:Yt}=ar(this,gm),{rawDims:{pageWidth:Jt,pageHeight:Zt},rotation:er}=this.parent.viewport,rr=SignatureExtractor.processDrawnLines({lines:Dt,pageWidth:Jt,pageHeight:Zt,rotation:er,innerMargin:Ko._INNER_MARGIN,mustSmooth:Ft,areContours:Ut});this.addSignature(rr,Yt,Ht,Kt)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:ar(this,Nu)||""}));return Tt&&(this._isCopy=!0,this._moveAfterPaste($t,kt)),this.div}setUuid($t){vr(this,r0,$t),this.addEditToolbar()}getUuid(){return ar(this,r0)}get description(){return ar(this,Nu)}set description($t){vr(this,Nu,$t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:$t})),super.addEditToolbar().then(kt=>{kt==null||kt.updateEditSignatureButton($t)}))}getSignaturePreview(){const{newCurves:$t,areContours:kt,thickness:Tt,width:Dt,height:Ft}=ar(this,gm),Ut=Math.max(Dt,Ft),Ht=SignatureExtractor.processDrawnLines({lines:{curves:$t.map(Kt=>({points:Kt})),thickness:Tt,width:Dt,height:Ft},pageWidth:Ut,pageHeight:Ut,rotation:0,innerMargin:0,mustSmooth:!1,areContours:kt});return{areContours:kt,outline:Ht.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature($t,kt,Tt,Dt){const{x:Ft,y:Ut}=this,{outline:Ht}=vr(this,gm,$t);vr(this,xm,Ht instanceof ContourDrawOutline),this.description=Tt;let Kt;ar(this,xm)?Kt=Ko.getDefaultDrawingOptions():(Kt=Ko._defaultDrawnSignatureOptions.clone(),Kt.updateProperties({"stroke-width":Ht.thickness})),this._addOutlines({drawOutlines:Ht,drawingOptions:Kt});const[,Yt]=this.pageDimensions;let Jt=kt/Yt;Jt=Jt>=1?.5:Jt,this.width*=Jt/this.height,this.width>=1&&(Jt*=.9/this.width,this.width=.9),this.height=Jt,this.setDims(),this.x=Ft,this.y=Ut,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(Dt),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!Dt,hasDescription:!!Tt}}),this.div.hidden=!1}getFromImage($t){const{rawDims:{pageWidth:kt,pageHeight:Tt},rotation:Dt}=this.parent.viewport;return SignatureExtractor.process($t,kt,Tt,Dt,Ko._INNER_MARGIN)}getFromText($t,kt){const{rawDims:{pageWidth:Tt,pageHeight:Dt},rotation:Ft}=this.parent.viewport;return SignatureExtractor.extractContoursFromText($t,kt,Tt,Dt,Ft,Ko._INNER_MARGIN)}getDrawnSignature($t){const{rawDims:{pageWidth:kt,pageHeight:Tt},rotation:Dt}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:$t,pageWidth:kt,pageHeight:Tt,rotation:Dt,innerMargin:Ko._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:$t,thickness:kt}){$t?this._drawingOptions=Ko.getDefaultDrawingOptions():(this._drawingOptions=Ko._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":kt}))}serialize($t=!1){if(this.isEmpty())return null;const{lines:kt,points:Tt}=this.serializeDraw($t),{_drawingOptions:{"stroke-width":Dt}}=this,Ft=Object.assign(super.serialize($t),{isSignature:!0,areContours:ar(this,xm),color:[0,0,0],thickness:ar(this,xm)?0:Dt});return this.addComment(Ft),$t?(Ft.paths={lines:kt,points:Tt},Ft.uuid=ar(this,r0),Ft.isCopy=!0):Ft.lines=kt,ar(this,Nu)&&(Ft.accessibilityData={type:"Figure",alt:ar(this,Nu)}),Ft}static deserializeDraw($t,kt,Tt,Dt,Ft,Ut){return Ut.areContours?ContourDrawOutline.deserialize($t,kt,Tt,Dt,Ft,Ut):InkDrawOutline.deserialize($t,kt,Tt,Dt,Ft,Ut)}static async deserialize($t,kt,Tt){var Ft;const Dt=await super.deserialize($t,kt,Tt);return vr(Dt,xm,$t.areContours),Dt.description=((Ft=$t.accessibilityData)==null?void 0:Ft.alt)||"",vr(Dt,r0,$t.uuid),Dt}};xm=new WeakMap,Nu=new WeakMap,gm=new WeakMap,r0=new WeakMap,Es(Ko,"_type","signature"),Es(Ko,"_editorType",AnnotationEditorType.SIGNATURE),Es(Ko,"_defaultDrawingOptions",null);let SignatureEditor=Ko;var Gn,fo,bm,bp,ym,ov,yp,s0,Pu,Ml,lv,n0,Ov,i0,Bv,cv,Gw,dv,Ww,uv,qw,cw,H$,hv,Kw,O2,L_;class StampEditor extends AnnotationEditor{constructor($t){super({...$t,name:"stampEditor"});yr(this,n0);yr(this,i0);yr(this,cv);yr(this,dv);yr(this,uv);yr(this,cw);yr(this,hv);yr(this,O2);yr(this,Gn,null);yr(this,fo,null);yr(this,bm,null);yr(this,bp,null);yr(this,ym,null);yr(this,ov,"");yr(this,yp,null);yr(this,s0,!1);yr(this,Pu,null);yr(this,Ml,!1);yr(this,lv,!1);vr(this,bp,$t.bitmapUrl),vr(this,ym,$t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize($t,kt){AnnotationEditor.initialize($t,kt)}static isHandlingMimeForPasting($t){return SupportedImageMimeTypes.includes($t)}static paste($t,kt){kt.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:$t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var $t;return{type:"stamp",hasAltText:!!(($t=this.altTextData)!=null&&$t.altText)}}static computeTelemetryFinalData($t){const kt=$t.get("hasAltText");return{hasAltText:kt.get(!0)??0,hasNoAltText:kt.get(!1)??0}}async mlGuessAltText($t=null,kt=!0){if(this.hasAltTextData())return null;const{mlManager:Tt}=this._uiManager;if(!Tt)throw new Error("No ML.");if(!await Tt.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:Dt,width:Ft,height:Ut}=$t||this.copyCanvas(null,null,!0).imageData,Ht=await Tt.guess({name:"altText",request:{data:Dt,width:Ft,height:Ut,channels:Dt.length/(Ft*Ut)}});if(!Ht)throw new Error("No response from the AI service.");if(Ht.error)throw new Error("Error from the AI service.");if(Ht.cancel)return null;if(!Ht.output)throw new Error("No valid response from the AI service.");const Kt=Ht.output;return await this.setGuessedAltText(Kt),kt&&!this.hasAltTextData()&&(this.altTextData={alt:Kt,decorative:!1}),Kt}remove(){var $t;ar(this,fo)&&(vr(this,Gn,null),this._uiManager.imageManager.deleteId(ar(this,fo)),($t=ar(this,yp))==null||$t.remove(),vr(this,yp,null),ar(this,Pu)&&(clearTimeout(ar(this,Pu)),vr(this,Pu,null))),super.remove()}rebuild(){if(!this.parent){ar(this,fo)&&Br(this,cv,Gw).call(this);return}super.rebuild(),this.div!==null&&(ar(this,fo)&&ar(this,yp)===null&&Br(this,cv,Gw).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded($t){this._isDraggable=!0,$t&&this.div.focus()}isEmpty(){return!(ar(this,bm)||ar(this,Gn)||ar(this,bp)||ar(this,ym)||ar(this,fo)||ar(this,s0))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let $t,kt;return this._isCopy&&($t=this.x,kt=this.y),super.render(),this.div.hidden=!0,this.createAltText(),ar(this,s0)||(ar(this,Gn)?Br(this,dv,Ww).call(this):Br(this,cv,Gw).call(this)),this._isCopy&&this._moveAfterPaste($t,kt),this._uiManager.addShouldRescale(this),this.div}setCanvas($t,kt){const{id:Tt,bitmap:Dt}=this._uiManager.imageManager.getFromCanvas($t,kt);kt.remove(),Tt&&this._uiManager.imageManager.isValidId(Tt)&&(vr(this,fo,Tt),Dt&&vr(this,Gn,Dt),vr(this,s0,!1),Br(this,dv,Ww).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;ar(this,Pu)!==null&&clearTimeout(ar(this,Pu)),vr(this,Pu,setTimeout(()=>{vr(this,Pu,null),Br(this,cw,H$).call(this)},200))}copyCanvas($t,kt,Tt=!1){$t||($t=224);const{width:Dt,height:Ft}=ar(this,Gn),Ut=new OutputScale;let Ht=ar(this,Gn),Kt=Dt,Yt=Ft,Jt=null;if(kt){if(Dt>kt||Ft>kt){const pr=Math.min(kt/Dt,kt/Ft);Kt=Math.floor(Dt*pr),Yt=Math.floor(Ft*pr)}Jt=document.createElement("canvas");const er=Jt.width=Math.ceil(Kt*Ut.sx),rr=Jt.height=Math.ceil(Yt*Ut.sy);ar(this,Ml)||(Ht=Br(this,uv,qw).call(this,er,rr));const sr=Jt.getContext("2d");sr.filter=this._uiManager.hcmFilter;let nr="white",ir="#cfcfd8";this._uiManager.hcmFilter!=="none"?ir="black":ColorScheme.isDarkMode&&(nr="#8f8f9d",ir="#42414d");const or=15,lr=or*Ut.sx,cr=or*Ut.sy,dr=new OffscreenCanvas(lr*2,cr*2),ur=dr.getContext("2d");ur.fillStyle=nr,ur.fillRect(0,0,lr*2,cr*2),ur.fillStyle=ir,ur.fillRect(0,0,lr,cr),ur.fillRect(lr,cr,lr,cr),sr.fillStyle=sr.createPattern(dr,"repeat"),sr.fillRect(0,0,er,rr),sr.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,er,rr)}let Zt=null;if(Tt){let er,rr;if(Ut.symmetric&&Ht.width<$t&&Ht.height<$t)er=Ht.width,rr=Ht.height;else if(Ht=ar(this,Gn),Dt>$t||Ft>$t){const ir=Math.min($t/Dt,$t/Ft);er=Math.floor(Dt*ir),rr=Math.floor(Ft*ir),ar(this,Ml)||(Ht=Br(this,uv,qw).call(this,er,rr))}const nr=new OffscreenCanvas(er,rr).getContext("2d",{willReadFrequently:!0});nr.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,er,rr),Zt={width:er,height:rr,data:nr.getImageData(0,0,er,rr).data}}return{canvas:Jt,width:Kt,height:Yt,imageData:Zt}}static async deserialize($t,kt,Tt){var nr;let Dt=null,Ft=!1;if($t instanceof StampAnnotationElement){const{data:{rect:ir,rotation:or,id:lr,structParent:cr,popupRef:dr,richText:ur,contentsObj:pr,creationDate:mr,modificationDate:jr},container:Rr,parent:{page:{pageNumber:xr}},canvas:kr}=$t;let Mr,Tr;kr?(delete $t.canvas,{id:Mr,bitmap:Tr}=Tt.imageManager.getFromCanvas(Rr.id,kr),kr.remove()):(Ft=!0,$t._hasNoCanvas=!0);const Or=((nr=await kt._structTree.getAriaAttributes(`${AnnotationPrefix}${lr}`))==null?void 0:nr.get("aria-label"))||"";Dt=$t={annotationType:AnnotationEditorType.STAMP,bitmapId:Mr,bitmap:Tr,pageIndex:xr-1,rect:ir.slice(0),rotation:or,annotationElementId:lr,id:lr,deleted:!1,accessibilityData:{decorative:!1,altText:Or},isSvg:!1,structParent:cr,popupRef:dr,richText:ur,comment:(pr==null?void 0:pr.str)||null,creationDate:mr,modificationDate:jr}}const Ut=await super.deserialize($t,kt,Tt),{rect:Ht,bitmap:Kt,bitmapUrl:Yt,bitmapId:Jt,isSvg:Zt,accessibilityData:er}=$t;Ft?(Tt.addMissingCanvas($t.id,Ut),vr(Ut,s0,!0)):Jt&&Tt.imageManager.isValidId(Jt)?(vr(Ut,fo,Jt),Kt&&vr(Ut,Gn,Kt)):vr(Ut,bp,Yt),vr(Ut,Ml,Zt);const[rr,sr]=Ut.pageDimensions;return Ut.width=(Ht[2]-Ht[0])/rr,Ut.height=(Ht[3]-Ht[1])/sr,er&&(Ut.altTextData=er),Ut._initialData=Dt,$t.comment&&Ut.setCommentData($t),vr(Ut,lv,!!Dt),Ut}serialize($t=!1,kt=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const Tt=Object.assign(super.serialize($t),{bitmapId:ar(this,fo),isSvg:ar(this,Ml)});if(this.addComment(Tt),$t)return Tt.bitmapUrl=Br(this,hv,Kw).call(this,!0),Tt.accessibilityData=this.serializeAltText(!0),Tt.isCopy=!0,Tt;const{decorative:Dt,altText:Ft}=this.serializeAltText(!1);if(!Dt&&Ft&&(Tt.accessibilityData={type:"Figure",alt:Ft}),this.annotationElementId){const Ht=Br(this,O2,L_).call(this,Tt);return Ht.isSame?null:(Ht.isSameAltText?delete Tt.accessibilityData:Tt.accessibilityData.structParent=this._initialData.structParent??-1,Tt.id=this.annotationElementId,delete Tt.bitmapId,Tt)}if(kt===null)return Tt;kt.stamps||(kt.stamps=new Map);const Ut=ar(this,Ml)?(Tt.rect[2]-Tt.rect[0])*(Tt.rect[3]-Tt.rect[1]):null;if(!kt.stamps.has(ar(this,fo)))kt.stamps.set(ar(this,fo),{area:Ut,serialized:Tt}),Tt.bitmap=Br(this,hv,Kw).call(this,!1);else if(ar(this,Ml)){const Ht=kt.stamps.get(ar(this,fo));Ut>Ht.area&&(Ht.area=Ut,Ht.serialized.bitmap.close(),Ht.serialized.bitmap=Br(this,hv,Kw).call(this,!1))}return Tt}renderAnnotationElement($t){return this.deleted?($t.hide(),null):($t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Gn=new WeakMap,fo=new WeakMap,bm=new WeakMap,bp=new WeakMap,ym=new WeakMap,ov=new WeakMap,yp=new WeakMap,s0=new WeakMap,Pu=new WeakMap,Ml=new WeakMap,lv=new WeakMap,n0=new WeakSet,Ov=function($t,kt=!1){if(!$t){this.remove();return}vr(this,Gn,$t.bitmap),kt||(vr(this,fo,$t.id),vr(this,Ml,$t.isSvg)),$t.file&&vr(this,ov,$t.file.name),Br(this,dv,Ww).call(this)},i0=new WeakSet,Bv=function(){if(vr(this,bm,null),this._uiManager.enableWaiting(!1),!!ar(this,yp)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&ar(this,Gn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&ar(this,Gn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},cv=new WeakSet,Gw=function(){if(ar(this,fo)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(ar(this,fo)).then(Tt=>Br(this,n0,Ov).call(this,Tt,!0)).finally(()=>Br(this,i0,Bv).call(this));return}if(ar(this,bp)){const Tt=ar(this,bp);vr(this,bp,null),this._uiManager.enableWaiting(!0),vr(this,bm,this._uiManager.imageManager.getFromUrl(Tt).then(Dt=>Br(this,n0,Ov).call(this,Dt)).finally(()=>Br(this,i0,Bv).call(this)));return}if(ar(this,ym)){const Tt=ar(this,ym);vr(this,ym,null),this._uiManager.enableWaiting(!0),vr(this,bm,this._uiManager.imageManager.getFromFile(Tt).then(Dt=>Br(this,n0,Ov).call(this,Dt)).finally(()=>Br(this,i0,Bv).call(this)));return}const $t=document.createElement("input");$t.type="file",$t.accept=SupportedImageMimeTypes.join(",");const kt=this._uiManager._signal;vr(this,bm,new Promise(Tt=>{$t.addEventListener("change",async()=>{if(!$t.files||$t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Dt=await this._uiManager.imageManager.getFromFile($t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Br(this,n0,Ov).call(this,Dt)}Tt()},{signal:kt}),$t.addEventListener("cancel",()=>{this.remove(),Tt()},{signal:kt})}).finally(()=>Br(this,i0,Bv).call(this))),$t.click()},dv=new WeakSet,Ww=function(){var Kt;const{div:$t}=this;let{width:kt,height:Tt}=ar(this,Gn);const[Dt,Ft]=this.pageDimensions,Ut=.75;if(this.width)kt=this.width*Dt,Tt=this.height*Ft;else if(kt>Ut*Dt||Tt>Ut*Ft){const Yt=Math.min(Ut*Dt/kt,Ut*Ft/Tt);kt*=Yt,Tt*=Yt}this._uiManager.enableWaiting(!1);const Ht=vr(this,yp,document.createElement("canvas"));Ht.setAttribute("role","img"),this.addContainer(Ht),this.width=kt/Dt,this.height=Tt/Ft,this.setDims(),(Kt=this._initialOptions)!=null&&Kt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&($t.hidden=!1),Br(this,cw,H$).call(this),ar(this,lv)||(this.parent.addUndoableEditor(this),vr(this,lv,!0)),this._reportTelemetry({action:"inserted_image"}),ar(this,ov)&&this.div.setAttribute("aria-description",ar(this,ov)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},uv=new WeakSet,qw=function($t,kt){const{width:Tt,height:Dt}=ar(this,Gn);let Ft=Tt,Ut=Dt,Ht=ar(this,Gn);for(;Ft>2*$t||Ut>2*kt;){const Kt=Ft,Yt=Ut;Ft>2*$t&&(Ft=Ft>=16384?Math.floor(Ft/2)-1:Math.ceil(Ft/2)),Ut>2*kt&&(Ut=Ut>=16384?Math.floor(Ut/2)-1:Math.ceil(Ut/2));const Jt=new OffscreenCanvas(Ft,Ut);Jt.getContext("2d").drawImage(Ht,0,0,Kt,Yt,0,0,Ft,Ut),Ht=Jt.transferToImageBitmap()}return Ht},cw=new WeakSet,H$=function(){const[$t,kt]=this.parentDimensions,{width:Tt,height:Dt}=this,Ft=new OutputScale,Ut=Math.ceil(Tt*$t*Ft.sx),Ht=Math.ceil(Dt*kt*Ft.sy),Kt=ar(this,yp);if(!Kt||Kt.width===Ut&&Kt.height===Ht)return;Kt.width=Ut,Kt.height=Ht;const Yt=ar(this,Ml)?ar(this,Gn):Br(this,uv,qw).call(this,Ut,Ht),Jt=Kt.getContext("2d");Jt.filter=this._uiManager.hcmFilter,Jt.drawImage(Yt,0,0,Yt.width,Yt.height,0,0,Ut,Ht)},hv=new WeakSet,Kw=function($t){if($t){if(ar(this,Ml)){const Dt=this._uiManager.imageManager.getSvgUrl(ar(this,fo));if(Dt)return Dt}const kt=document.createElement("canvas");return{width:kt.width,height:kt.height}=ar(this,Gn),kt.getContext("2d").drawImage(ar(this,Gn),0,0),kt.toDataURL()}if(ar(this,Ml)){const[kt,Tt]=this.pageDimensions,Dt=Math.round(this.width*kt*PixelsPerInch.PDF_TO_CSS_UNITS),Ft=Math.round(this.height*Tt*PixelsPerInch.PDF_TO_CSS_UNITS),Ut=new OffscreenCanvas(Dt,Ft);return Ut.getContext("2d").drawImage(ar(this,Gn),0,0,ar(this,Gn).width,ar(this,Gn).height,0,0,Dt,Ft),Ut.transferToImageBitmap()}return structuredClone(ar(this,Gn))},O2=new WeakSet,L_=function($t){var Ut;const{pageIndex:kt,accessibilityData:{altText:Tt}}=this._initialData,Dt=$t.pageIndex===kt,Ft=(((Ut=$t.accessibilityData)==null?void 0:Ut.alt)||"")===Tt;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&Dt&&Ft,isSameAltText:Ft}},Es(StampEditor,"_type","stamp"),Es(StampEditor,"_editorType",AnnotationEditorType.STAMP);var a0,pv,vm,Em,vp,Wo,jm,fv,mv,ou,Ep,mo,jp,wm,xv,Ps,Rm,dw,G$,B2,O_,Wl,cu,uw,W$,hw,q$,gv,Yw;const Xl=class Xl{constructor({uiManager:dt,pageIndex:$t,div:kt,structTreeLayer:Tt,accessibilityManager:Dt,annotationLayer:Ft,drawLayer:Ut,textLayer:Ht,viewport:Kt,l10n:Yt}){yr(this,dw);yr(this,B2);yr(this,Wl);yr(this,uw);yr(this,hw);yr(this,gv);yr(this,a0,void 0);yr(this,pv,!1);yr(this,vm,null);yr(this,Em,null);yr(this,vp,null);yr(this,Wo,new Map);yr(this,jm,!1);yr(this,fv,!1);yr(this,mv,!1);yr(this,ou,null);yr(this,Ep,null);yr(this,mo,null);yr(this,jp,null);yr(this,wm,null);yr(this,xv,-1);yr(this,Ps,void 0);const Jt=[...ar(Xl,Rm).values()];if(!Xl._initialized){Xl._initialized=!0;for(const Zt of Jt)Zt.initialize(Yt,dt)}dt.registerEditorTypes(Jt),vr(this,Ps,dt),this.pageIndex=$t,this.div=kt,vr(this,a0,Dt),vr(this,vm,Ft),this.viewport=Kt,vr(this,mo,Ht),this.drawLayer=Ut,this._structTree=Tt,ar(this,Ps).addLayer(this)}get isEmpty(){return ar(this,Wo).size===0}get isInvisible(){return this.isEmpty&&ar(this,Ps).getMode()===AnnotationEditorType.NONE}updateToolbar(dt){ar(this,Ps).updateToolbar(dt)}updateMode(dt=ar(this,Ps).getMode()){switch(Br(this,gv,Yw).call(this),dt){case AnnotationEditorType.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:$t}=this.div;if($t.toggle("nonEditing",!1),dt===AnnotationEditorType.POPUP)$t.toggle("commentEditing",!0);else{$t.toggle("commentEditing",!1);for(const kt of ar(Xl,Rm).values())$t.toggle(`${kt._type}Editing`,dt===kt._editorType)}this.div.hidden=!1}hasTextLayer(dt){var $t;return dt===(($t=ar(this,mo))==null?void 0:$t.div)}setEditingState(dt){ar(this,Ps).setEditingState(dt)}addCommands(dt){ar(this,Ps).addCommands(dt)}cleanUndoStack(dt){ar(this,Ps).cleanUndoStack(dt)}toggleDrawing(dt=!1){this.div.classList.toggle("drawing",!dt)}togglePointerEvents(dt=!1){this.div.classList.toggle("disabled",!dt)}toggleAnnotationLayerPointerEvents(dt=!1){var $t;($t=ar(this,vm))==null||$t.div.classList.toggle("disabled",!dt)}async enable(){var kt;vr(this,mv,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(kt=ar(this,wm))==null||kt.abort(),vr(this,wm,null);const dt=new Set;for(const Tt of ar(this,dw,G$))Tt.enableEditing(),Tt.show(!0),Tt.annotationElementId&&(ar(this,Ps).removeChangedExistingAnnotation(Tt),dt.add(Tt.annotationElementId));const $t=ar(this,vm);if($t)for(const Tt of $t.getEditableAnnotations()){if(Tt.hide(),ar(this,Ps).isDeletedAnnotationElement(Tt.data.id)||dt.has(Tt.data.id))continue;const Dt=await this.deserialize(Tt);Dt&&(this.addOrRebuild(Dt),Dt.enableEditing())}vr(this,mv,!1),ar(this,Ps)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var kt;if(vr(this,fv,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),ar(this,mo)&&!ar(this,wm)){vr(this,wm,new AbortController);const Tt=ar(this,Ps).combinedSignal(ar(this,wm));ar(this,mo).div.addEventListener("pointerdown",Dt=>{const{clientX:Ut,clientY:Ht,timeStamp:Kt}=Dt,Yt=ar(this,xv);if(Kt-Yt>500){vr(this,xv,Kt);return}vr(this,xv,-1);const{classList:Jt}=this.div;Jt.toggle("getElements",!0);const Zt=document.elementsFromPoint(Ut,Ht);if(Jt.toggle("getElements",!1),!this.div.contains(Zt[0]))return;let er;const rr=new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);for(const nr of Zt)if(rr.test(nr.id)){er=nr.id;break}if(!er)return;const sr=ar(this,Wo).get(er);(sr==null?void 0:sr.annotationElementId)===null&&(Dt.stopPropagation(),Dt.preventDefault(),sr.dblclick(Dt))},{signal:Tt,capture:!0})}const dt=ar(this,vm);if(dt){const Tt=new Map,Dt=new Map;for(const Ut of ar(this,dw,G$)){if(Ut.disableEditing(),!Ut.annotationElementId){Ut.updateFakeAnnotationElement(dt);continue}if(Ut.serialize()!==null){Tt.set(Ut.annotationElementId,Ut);continue}else Dt.set(Ut.annotationElementId,Ut);(kt=this.getEditableAnnotation(Ut.annotationElementId))==null||kt.show(),Ut.remove()}const Ft=dt.getEditableAnnotations();for(const Ut of Ft){const{id:Ht}=Ut.data;if(ar(this,Ps).isDeletedAnnotationElement(Ht)){Ut.updateEdited({deleted:!0});continue}let Kt=Dt.get(Ht);if(Kt){Kt.resetAnnotationElement(Ut),Kt.show(!1),Ut.show();continue}Kt=Tt.get(Ht),Kt&&(ar(this,Ps).addChangedExistingAnnotation(Kt),Kt.renderAnnotationElement(Ut)&&Kt.show(!1)),Ut.show()}}Br(this,gv,Yw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:$t}=this.div;for(const Tt of ar(Xl,Rm).values())$t.remove(`${Tt._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),vr(this,fv,!1)}getEditableAnnotation(dt){var $t;return(($t=ar(this,vm))==null?void 0:$t.getEditableAnnotation(dt))||null}setActiveEditor(dt){ar(this,Ps).getActive()!==dt&&ar(this,Ps).setActiveEditor(dt)}enableTextSelection(){var dt;if(this.div.tabIndex=-1,(dt=ar(this,mo))!=null&&dt.div&&!ar(this,jp)){vr(this,jp,new AbortController);const $t=ar(this,Ps).combinedSignal(ar(this,jp));ar(this,mo).div.addEventListener("pointerdown",Br(this,B2,O_).bind(this),{signal:$t}),ar(this,mo).div.classList.add("highlighting")}}disableTextSelection(){var dt;this.div.tabIndex=0,(dt=ar(this,mo))!=null&&dt.div&&ar(this,jp)&&(ar(this,jp).abort(),vr(this,jp,null),ar(this,mo).div.classList.remove("highlighting"))}enableClick(){if(ar(this,Em))return;vr(this,Em,new AbortController);const dt=ar(this,Ps).combinedSignal(ar(this,Em));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:dt});const $t=this.pointerup.bind(this);this.div.addEventListener("pointerup",$t,{signal:dt}),this.div.addEventListener("pointercancel",$t,{signal:dt})}disableClick(){var dt;(dt=ar(this,Em))==null||dt.abort(),vr(this,Em,null)}attach(dt){ar(this,Wo).set(dt.id,dt);const{annotationElementId:$t}=dt;$t&&ar(this,Ps).isDeletedAnnotationElement($t)&&ar(this,Ps).removeDeletedAnnotationElement(dt)}detach(dt){var $t;ar(this,Wo).delete(dt.id),($t=ar(this,a0))==null||$t.removePointerInTextLayer(dt.contentDiv),!ar(this,fv)&&dt.annotationElementId&&ar(this,Ps).addDeletedAnnotationElement(dt)}remove(dt){this.detach(dt),ar(this,Ps).removeEditor(dt),dt.div.remove(),dt.isAttachedToDOM=!1}changeParent(dt){var $t;dt.parent!==this&&(dt.parent&&dt.annotationElementId&&(ar(this,Ps).addDeletedAnnotationElement(dt.annotationElementId),AnnotationEditor.deleteAnnotationElement(dt),dt.annotationElementId=null),this.attach(dt),($t=dt.parent)==null||$t.detach(dt),dt.setParent(this),dt.div&&dt.isAttachedToDOM&&(dt.div.remove(),this.div.append(dt.div)))}add(dt){if(!(dt.parent===this&&dt.isAttachedToDOM)){if(this.changeParent(dt),ar(this,Ps).addEditor(dt),this.attach(dt),!dt.isAttachedToDOM){const $t=dt.render();this.div.append($t),dt.isAttachedToDOM=!0}dt.fixAndSetPosition(),dt.onceAdded(!ar(this,mv)),ar(this,Ps).addToAnnotationStorage(dt),dt._reportTelemetry(dt.telemetryInitialData)}}moveEditorInDOM(dt){var kt;if(!dt.isAttachedToDOM)return;const{activeElement:$t}=document;dt.div.contains($t)&&!ar(this,vp)&&(dt._focusEventsAllowed=!1,vr(this,vp,setTimeout(()=>{vr(this,vp,null),dt.div.contains(document.activeElement)?dt._focusEventsAllowed=!0:(dt.div.addEventListener("focusin",()=>{dt._focusEventsAllowed=!0},{once:!0,signal:ar(this,Ps)._signal}),$t.focus())},0))),dt._structTreeParentId=(kt=ar(this,a0))==null?void 0:kt.moveElementInDOM(this.div,dt.div,dt.contentDiv,!0)}addOrRebuild(dt){dt.needsToBeRebuilt()?(dt.parent||(dt.parent=this),dt.rebuild(),dt.show()):this.add(dt)}addUndoableEditor(dt){const $t=()=>dt._uiManager.rebuild(dt),kt=()=>{dt.remove()};this.addCommands({cmd:$t,undo:kt,mustExec:!1})}getEditorByUID(dt){for(const $t of ar(this,Wo).values())if($t.uid===dt)return $t;return null}getNextId(){return ar(this,Ps).getId()}combinedSignal(dt){return ar(this,Ps).combinedSignal(dt)}canCreateNewEmptyEditor(){var dt;return(dt=ar(this,Wl,cu))==null?void 0:dt.canCreateNewEmptyEditor()}async pasteEditor(dt,$t){this.updateToolbar(dt),await ar(this,Ps).updateMode(dt.mode);const{offsetX:kt,offsetY:Tt}=Br(this,hw,q$).call(this),Dt=this.getNextId(),Ft=Br(this,uw,W$).call(this,{parent:this,id:Dt,x:kt,y:Tt,uiManager:ar(this,Ps),isCentered:!0,...$t});Ft&&this.add(Ft)}async deserialize(dt){var $t;return await(($t=ar(Xl,Rm).get(dt.annotationType??dt.annotationEditorType))==null?void 0:$t.deserialize(dt,this,ar(this,Ps)))||null}createAndAddNewEditor(dt,$t,kt={}){const Tt=this.getNextId(),Dt=Br(this,uw,W$).call(this,{parent:this,id:Tt,x:dt.offsetX,y:dt.offsetY,uiManager:ar(this,Ps),isCentered:$t,...kt});return Dt&&this.add(Dt),Dt}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(dt={}){this.createAndAddNewEditor(Br(this,hw,q$).call(this),!0,dt)}setSelected(dt){ar(this,Ps).setSelected(dt)}toggleSelected(dt){ar(this,Ps).toggleSelected(dt)}unselect(dt){ar(this,Ps).unselect(dt)}pointerup(dt){var Tt;const{isMac:$t}=util_FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&$t||dt.target!==this.div||!ar(this,jm)||(vr(this,jm,!1),(Tt=ar(this,Wl,cu))!=null&&Tt.isDrawer&&ar(this,Wl,cu).supportMultipleDrawings))return;if(!ar(this,pv)){vr(this,pv,!0);return}const kt=ar(this,Ps).getMode();if(kt===AnnotationEditorType.STAMP||kt===AnnotationEditorType.SIGNATURE){ar(this,Ps).unselectAll();return}this.createAndAddNewEditor(dt,!1)}pointerdown(dt){var Tt;if(ar(this,Ps).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),ar(this,jm)){vr(this,jm,!1);return}const{isMac:$t}=util_FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&$t||dt.target!==this.div)return;if(vr(this,jm,!0),(Tt=ar(this,Wl,cu))!=null&&Tt.isDrawer){this.startDrawingSession(dt);return}const kt=ar(this,Ps).getActive();vr(this,pv,!kt||kt.isEmpty())}startDrawingSession(dt){if(this.div.focus({preventScroll:!0}),ar(this,ou)){ar(this,Wl,cu).startDrawing(this,ar(this,Ps),!1,dt);return}ar(this,Ps).setCurrentDrawingSession(this),vr(this,ou,new AbortController);const $t=ar(this,Ps).combinedSignal(ar(this,ou));this.div.addEventListener("blur",({relatedTarget:kt})=>{kt&&!this.div.contains(kt)&&(vr(this,Ep,null),this.commitOrRemove())},{signal:$t}),ar(this,Wl,cu).startDrawing(this,ar(this,Ps),!1,dt)}pause(dt){if(dt){const{activeElement:$t}=document;this.div.contains($t)&&vr(this,Ep,$t);return}ar(this,Ep)&&setTimeout(()=>{var $t;($t=ar(this,Ep))==null||$t.focus(),vr(this,Ep,null)},0)}endDrawingSession(dt=!1){return ar(this,ou)?(ar(this,Ps).setCurrentDrawingSession(null),ar(this,ou).abort(),vr(this,ou,null),vr(this,Ep,null),ar(this,Wl,cu).endDrawing(dt)):null}findNewParent(dt,$t,kt){const Tt=ar(this,Ps).findParent($t,kt);return Tt===null||Tt===this?!1:(Tt.changeParent(dt),!0)}commitOrRemove(){return ar(this,ou)?(this.endDrawingSession(),!0):!1}onScaleChanging(){ar(this,ou)&&ar(this,Wl,cu).onScaleChangingWhenDrawing(this)}destroy(){var dt,$t;this.commitOrRemove(),((dt=ar(this,Ps).getActive())==null?void 0:dt.parent)===this&&(ar(this,Ps).commitOrRemove(),ar(this,Ps).setActiveEditor(null)),ar(this,vp)&&(clearTimeout(ar(this,vp)),vr(this,vp,null));for(const kt of ar(this,Wo).values())($t=ar(this,a0))==null||$t.removePointerInTextLayer(kt.contentDiv),kt.setParent(null),kt.isAttachedToDOM=!1,kt.div.remove();this.div=null,ar(this,Wo).clear(),ar(this,Ps).removeLayer(this)}render({viewport:dt}){this.viewport=dt,setLayerDimensions(this.div,dt);for(const $t of ar(this,Ps).getEditors(this.pageIndex))this.add($t),$t.rebuild();this.updateMode()}update({viewport:dt}){ar(this,Ps).commitOrRemove(),Br(this,gv,Yw).call(this);const $t=this.viewport.rotation,kt=dt.rotation;if(this.viewport=dt,setLayerDimensions(this.div,{rotation:kt}),$t!==kt)for(const Tt of ar(this,Wo).values())Tt.rotate(kt)}get pageDimensions(){const{pageWidth:dt,pageHeight:$t}=this.viewport.rawDims;return[dt,$t]}get scale(){return ar(this,Ps).viewParameters.realScale}};a0=new WeakMap,pv=new WeakMap,vm=new WeakMap,Em=new WeakMap,vp=new WeakMap,Wo=new WeakMap,jm=new WeakMap,fv=new WeakMap,mv=new WeakMap,ou=new WeakMap,Ep=new WeakMap,mo=new WeakMap,jp=new WeakMap,wm=new WeakMap,xv=new WeakMap,Ps=new WeakMap,Rm=new WeakMap,dw=new WeakSet,G$=function(){return ar(this,Wo).size!==0?ar(this,Wo).values():ar(this,Ps).getEditors(this.pageIndex)},B2=new WeakSet,O_=function(dt){ar(this,Ps).unselectAll();const{target:$t}=dt;if($t===ar(this,mo).div||($t.getAttribute("role")==="img"||$t.classList.contains("endOfContent"))&&ar(this,mo).div.contains($t)){const{isMac:kt}=util_FeatureTest.platform;if(dt.button!==0||dt.ctrlKey&&kt)return;ar(this,Ps).showAllEditors("highlight",!0,!0),ar(this,mo).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,ar(this,Ps).direction==="ltr",{target:ar(this,mo).div,x:dt.x,y:dt.y}),ar(this,mo).div.addEventListener("pointerup",()=>{ar(this,mo).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:ar(this,Ps)._signal}),dt.preventDefault()}},Wl=new WeakSet,cu=function(){return ar(Xl,Rm).get(ar(this,Ps).getMode())},uw=new WeakSet,W$=function(dt){const $t=ar(this,Wl,cu);return $t?new $t.prototype.constructor(dt):null},hw=new WeakSet,q$=function(){const{x:dt,y:$t,width:kt,height:Tt}=this.boundingClientRect,Dt=Math.max(0,dt),Ft=Math.max(0,$t),Ut=Math.min(window.innerWidth,dt+kt),Ht=Math.min(window.innerHeight,$t+Tt),Kt=(Dt+Ut)/2-dt,Yt=(Ft+Ht)/2-$t,[Jt,Zt]=this.viewport.rotation%180===0?[Kt,Yt]:[Yt,Kt];return{offsetX:Jt,offsetY:Zt}},gv=new WeakSet,Yw=function(){for(const dt of ar(this,Wo).values())dt.isEmpty()&&dt.remove()},Es(Xl,"_initialized",!1),yr(Xl,Rm,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(dt=>[dt._editorType,dt])));let AnnotationEditorLayer=Xl;var lu,Lo,o0,pw,V2,B_,fw,K$,z2,V_,mw,Y$;const ba=class ba{constructor({pageIndex:dt}){yr(this,fw);yr(this,z2);yr(this,mw);yr(this,lu,null);yr(this,Lo,new Map);yr(this,o0,new Map);this.pageIndex=dt}setParent(dt){if(!ar(this,lu)){vr(this,lu,dt);return}if(ar(this,lu)!==dt){if(ar(this,Lo).size>0)for(const $t of ar(this,Lo).values())$t.remove(),dt.append($t);vr(this,lu,dt)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(dt,$t=!1,kt=!1){const Tt=ga(ba,pw)._++,Dt=Br(this,fw,K$).call(this),Ft=ba._svgFactory.createElement("defs");Dt.append(Ft);const Ut=ba._svgFactory.createElement("path");Ft.append(Ut);const Ht=`path_p${this.pageIndex}_${Tt}`;Ut.setAttribute("id",Ht),Ut.setAttribute("vector-effect","non-scaling-stroke"),$t&&ar(this,o0).set(Tt,Ut);const Kt=kt?Br(this,z2,V_).call(this,Ft,Ht):null,Yt=ba._svgFactory.createElement("use");return Dt.append(Yt),Yt.setAttribute("href",`#${Ht}`),this.updateProperties(Dt,dt),ar(this,Lo).set(Tt,Dt),{id:Tt,clipPathId:`url(#${Kt})`}}drawOutline(dt,$t){const kt=ga(ba,pw)._++,Tt=Br(this,fw,K$).call(this),Dt=ba._svgFactory.createElement("defs");Tt.append(Dt);const Ft=ba._svgFactory.createElement("path");Dt.append(Ft);const Ut=`path_p${this.pageIndex}_${kt}`;Ft.setAttribute("id",Ut),Ft.setAttribute("vector-effect","non-scaling-stroke");let Ht;if($t){const Jt=ba._svgFactory.createElement("mask");Dt.append(Jt),Ht=`mask_p${this.pageIndex}_${kt}`,Jt.setAttribute("id",Ht),Jt.setAttribute("maskUnits","objectBoundingBox");const Zt=ba._svgFactory.createElement("rect");Jt.append(Zt),Zt.setAttribute("width","1"),Zt.setAttribute("height","1"),Zt.setAttribute("fill","white");const er=ba._svgFactory.createElement("use");Jt.append(er),er.setAttribute("href",`#${Ut}`),er.setAttribute("stroke","none"),er.setAttribute("fill","black"),er.setAttribute("fill-rule","nonzero"),er.classList.add("mask")}const Kt=ba._svgFactory.createElement("use");Tt.append(Kt),Kt.setAttribute("href",`#${Ut}`),Ht&&Kt.setAttribute("mask",`url(#${Ht})`);const Yt=Kt.cloneNode();return Tt.append(Yt),Kt.classList.add("mainOutline"),Yt.classList.add("secondaryOutline"),this.updateProperties(Tt,dt),ar(this,Lo).set(kt,Tt),kt}finalizeDraw(dt,$t){ar(this,o0).delete(dt),this.updateProperties(dt,$t)}updateProperties(dt,$t){var Ht;if(!$t)return;const{root:kt,bbox:Tt,rootClass:Dt,path:Ft}=$t,Ut=typeof dt=="number"?ar(this,Lo).get(dt):dt;if(Ut){if(kt&&Br(this,mw,Y$).call(this,Ut,kt),Tt&&Br(Ht=ba,V2,B_).call(Ht,Ut,Tt),Dt){const{classList:Kt}=Ut;for(const[Yt,Jt]of Object.entries(Dt))Kt.toggle(Yt,Jt)}if(Ft){const Yt=Ut.firstChild.firstChild;Br(this,mw,Y$).call(this,Yt,Ft)}}}updateParent(dt,$t){if($t===this)return;const kt=ar(this,Lo).get(dt);kt&&(ar($t,lu).append(kt),ar(this,Lo).delete(dt),ar($t,Lo).set(dt,kt))}remove(dt){ar(this,o0).delete(dt),ar(this,lu)!==null&&(ar(this,Lo).get(dt).remove(),ar(this,Lo).delete(dt))}destroy(){vr(this,lu,null);for(const dt of ar(this,Lo).values())dt.remove();ar(this,Lo).clear(),ar(this,o0).clear()}};lu=new WeakMap,Lo=new WeakMap,o0=new WeakMap,pw=new WeakMap,V2=new WeakSet,B_=function(dt,[$t,kt,Tt,Dt]){const{style:Ft}=dt;Ft.top=`${100*kt}%`,Ft.left=`${100*$t}%`,Ft.width=`${100*Tt}%`,Ft.height=`${100*Dt}%`},fw=new WeakSet,K$=function(){const dt=ba._svgFactory.create(1,1,!0);return ar(this,lu).append(dt),dt.setAttribute("aria-hidden",!0),dt},z2=new WeakSet,V_=function(dt,$t){const kt=ba._svgFactory.createElement("clipPath");dt.append(kt);const Tt=`clip_${$t}`;kt.setAttribute("id",Tt),kt.setAttribute("clipPathUnits","objectBoundingBox");const Dt=ba._svgFactory.createElement("use");return kt.append(Dt),Dt.setAttribute("href",`#${$t}`),Dt.classList.add("clip"),Tt},mw=new WeakSet,Y$=function(dt,$t){for(const[kt,Tt]of Object.entries($t))Tt===null?dt.removeAttribute(kt):dt.setAttribute(kt,Tt)},yr(ba,V2),yr(ba,pw,0);let DrawLayer=ba;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,applyOpacity,build,ColorPicker,createValidAbsoluteUrl,CSSConstants,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$2,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,renderRichText,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,CSSConstants,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$2,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util,VerbosityLevel,XfaLayer,applyOpacity,build,createValidAbsoluteUrl,fetchData,findContrastColor,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getRGB,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,renderRichText,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"}));var has=Object.prototype.hasOwnProperty;function find(et,dt,$t){for($t of et.keys())if(dequal($t,dt))return $t}function dequal(et,dt){var $t,kt,Tt;if(et===dt)return!0;if(et&&dt&&($t=et.constructor)===dt.constructor){if($t===Date)return et.getTime()===dt.getTime();if($t===RegExp)return et.toString()===dt.toString();if($t===Array){if((kt=et.length)===dt.length)for(;kt--&&dequal(et[kt],dt[kt]););return kt===-1}if($t===Set){if(et.size!==dt.size)return!1;for(kt of et)if(Tt=kt,Tt&&typeof Tt=="object"&&(Tt=find(dt,Tt),!Tt)||!dt.has(Tt))return!1;return!0}if($t===Map){if(et.size!==dt.size)return!1;for(kt of et)if(Tt=kt[0],Tt&&typeof Tt=="object"&&(Tt=find(dt,Tt),!Tt)||!dequal(kt[1],dt.get(Tt)))return!1;return!0}if($t===ArrayBuffer)et=new Uint8Array(et),dt=new Uint8Array(dt);else if($t===DataView){if((kt=et.byteLength)===dt.byteLength)for(;kt--&&et.getInt8(kt)===dt.getInt8(kt););return kt===-1}if(ArrayBuffer.isView(et)){if((kt=et.byteLength)===dt.byteLength)for(;kt--&&et[kt]===dt[kt];);return kt===-1}if(!$t||typeof et=="object"){kt=0;for($t in et)if(has.call(et,$t)&&++kt&&!has.call(dt,$t)||!($t in dt)||!dequal(et[$t],dt[$t]))return!1;return Object.keys(dt).length===kt}}return et!==et&&dt!==dt}function makeCancellablePromise(et){let dt=!1;return{promise:new Promise((kt,Tt)=>{et.then(Dt=>!dt&&kt(Dt)).catch(Dt=>!dt&&Tt(Dt))}),cancel(){dt=!0}}}const clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(et,dt){const $t={};for(const kt of allEvents){const Tt=et[kt];Tt&&(dt?$t[kt]=Dt=>Tt(Dt,dt(kt)):$t[kt]=Tt)}return $t}var isProduction=!0,prefix$6="Invariant failed";function invariant(et,dt){if(!et){if(isProduction)throw new Error(prefix$6);var $t=typeof dt=="function"?dt():dt,kt=$t?"".concat(prefix$6,": ").concat($t):prefix$6;throw new Error(kt)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),documentContext=reactExports.createContext(null),DocumentContext=documentContext,DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(dt){this.pdfDocument=dt}setViewer(dt){this.pdfViewer=dt}setExternalLinkRel(dt){this.externalLinkRel=dt}setExternalLinkTarget(dt){this.externalLinkTarget=dt}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(dt){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=dt}get rotation(){return 0}set rotation(dt){}addLinkAttributes(dt,$t,kt){dt.href=$t,dt.rel=this.externalLinkRel||DEFAULT_LINK_REL,dt.target=kt?"_blank":this.externalLinkTarget||""}goToDestination(dt){return new Promise($t=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(dt,"Destination is not specified."),typeof dt=="string"?this.pdfDocument.getDestination(dt).then($t):Array.isArray(dt)?$t(dt):dt.then($t)}).then($t=>{invariant(Array.isArray($t),`"${$t}" is not a valid destination array.`);const kt=$t[0];new Promise(Tt=>{invariant(this.pdfDocument,"PDF document not loaded."),kt instanceof Object?this.pdfDocument.getPageIndex(kt).then(Dt=>{Tt(Dt)}).catch(()=>{invariant(!1,`"${kt}" is not a valid page reference.`)}):typeof kt=="number"?Tt(kt):invariant(!1,`"${kt}" is not a valid destination reference.`)}).then(Tt=>{const Dt=Tt+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(Dt>=1&&Dt<=this.pagesCount,`"${Dt}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:$t,pageIndex:Tt,pageNumber:Dt})})})}goToPage(dt){const $t=dt-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(dt>=1&&dt<=this.pagesCount,`"${dt}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:$t,pageNumber:dt})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(dt){this.goToDestination(dt)}}function Message({children:et,type:dt}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${dt}`,children:et})}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses;function reducer$1(et,dt){switch(dt.type){case"RESOLVE":return{value:dt.value,error:void 0};case"REJECT":return{value:!1,error:dt.error};case"RESET":return{value:void 0,error:void 0};default:return et}}function useResolver(){return reactExports.useReducer(reducer$1,{value:void 0,error:void 0})}const isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(et){return typeof et<"u"}function isProvided(et){return isDefined(et)&&et!==null}function isString$1(et){return typeof et=="string"}function isArrayBuffer(et){return et instanceof ArrayBuffer}function isBlob(et){return invariant(isBrowser,"isBlob can only be used in a browser environment"),et instanceof Blob}function isDataURI(et){return isString$1(et)&&/^data:/.test(et)}function dataURItoByteString(et){invariant(isDataURI(et),"Invalid data URI.");const[dt="",$t=""]=et.split(",");return dt.split(";").indexOf("base64")!==-1?atob($t):unescape($t)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(et){et!=null&&et.cancel&&et.cancel()}function makePageCallback(et,dt){return Object.defineProperty(et,"width",{get(){return this.view[2]*dt},configurable:!0}),Object.defineProperty(et,"height",{get(){return this.view[3]*dt},configurable:!0}),Object.defineProperty(et,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(et,"originalHeight",{get(){return this.view[3]},configurable:!0}),et}function isCancelException(et){return et.name==="RenderingCancelledException"}function loadFromFile(et){return new Promise((dt,$t)=>{const kt=new FileReader;kt.onload=()=>{if(!kt.result)return $t(new Error("Error while reading a file."));dt(kt.result)},kt.onerror=Tt=>{if(!Tt.target)return $t(new Error("Error while reading a file."));const{error:Dt}=Tt.target;if(!Dt)return $t(new Error("Error while reading a file."));switch(Dt.code){case Dt.NOT_FOUND_ERR:return $t(new Error("Error while reading a file: File not found."));case Dt.SECURITY_ERR:return $t(new Error("Error while reading a file: Security error."));case Dt.ABORT_ERR:return $t(new Error("Error while reading a file: Aborted."));default:return $t(new Error("Error while reading a file."))}},kt.readAsArrayBuffer(et)})}const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(et,dt)=>{switch(dt){case PasswordResponses$1.NEED_PASSWORD:{const $t=prompt("Enter the password to open this PDF file.");et($t);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const $t=prompt("Invalid password. Please try again.");et($t);break}}};function isParameterObject(et){return typeof et=="object"&&et!==null&&("data"in et||"range"in et||"url"in et)}const Document=reactExports.forwardRef(function et({children:dt,className:$t,error:kt="Failed to load PDF file.",externalLinkRel:Tt,externalLinkTarget:Dt,file:Ft,inputRef:Ut,imageResourcesPath:Ht,loading:Kt="Loading PDF",noData:Yt="No PDF file specified.",onItemClick:Jt,onLoadError:Zt,onLoadProgress:er,onLoadSuccess:rr,onPassword:sr=defaultOnPassword,onSourceError:nr,onSourceSuccess:ir,options:or,renderMode:lr,rotate:cr,scale:dr,...ur},pr){const[mr,jr]=useResolver(),{value:Rr,error:xr}=mr,[kr,Mr]=useResolver(),{value:Tr,error:Or}=kr,_r=reactExports.useRef(new LinkService),Pr=reactExports.useRef([]),br=reactExports.useRef(void 0),wr=reactExports.useRef(void 0);Ft&&Ft!==br.current&&isParameterObject(Ft)&&(warning$1(!dequal(Ft,br.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),br.current=Ft),or&&or!==wr.current&&(warning$1(!dequal(or,wr.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),wr.current=or);const zr=reactExports.useRef({scrollPageIntoView:fs=>{const{dest:hs,pageNumber:$s,pageIndex:ks=$s-1}=fs;if(Jt){Jt({dest:hs,pageIndex:ks,pageNumber:$s});return}const Ds=Pr.current[ks];if(Ds){Ds.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${$s} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(pr,()=>({linkService:_r,pages:Pr,viewer:zr}),[]);function Hr(){ir&&ir()}function Yr(){xr&&(warning$1(!1,xr.toString()),nr&&nr(xr))}function es(){jr({type:"RESET"})}reactExports.useEffect(es,[Ft,jr]);const rs=reactExports.useCallback(async()=>{if(!Ft)return null;if(typeof Ft=="string")return isDataURI(Ft)?{data:dataURItoByteString(Ft)}:(displayCORSWarning(),{url:Ft});if(Ft instanceof PDFDataRangeTransport)return{range:Ft};if(isArrayBuffer(Ft))return{data:Ft};if(isBrowser&&isBlob(Ft))return{data:await loadFromFile(Ft)};if(invariant(typeof Ft=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(Ft),"Invalid parameter object: need either .data, .range or .url"),"url"in Ft&&typeof Ft.url=="string"){if(isDataURI(Ft.url)){const{url:fs,...hs}=Ft;return{data:dataURItoByteString(fs),...hs}}displayCORSWarning()}return Ft},[Ft]);reactExports.useEffect(()=>{const fs=makeCancellablePromise(rs());return fs.promise.then(hs=>{jr({type:"RESOLVE",value:hs})}).catch(hs=>{jr({type:"REJECT",error:hs})}),()=>{cancelRunningTask(fs)}},[rs,jr]),reactExports.useEffect(()=>{if(!(typeof Rr>"u")){if(Rr===!1){Yr();return}Hr()}},[Rr]);function Wr(){Tr&&(rr&&rr(Tr),Pr.current=new Array(Tr.numPages),_r.current.setDocument(Tr))}function Xr(){Or&&(warning$1(!1,Or.toString()),Zt&&Zt(Or))}reactExports.useEffect(function(){Mr({type:"RESET"})},[Mr,Rr]),reactExports.useEffect(function(){if(!Rr)return;const hs=or?{...Rr,...or}:Rr,$s=getDocument(hs);er&&($s.onProgress=er),sr&&($s.onPassword=sr);const ks=$s,Ds=ks.promise.then(_s=>{Mr({type:"RESOLVE",value:_s})}).catch(_s=>{ks.destroyed||Mr({type:"REJECT",error:_s})});return()=>{Ds.finally(()=>ks.destroy())}},[or,Mr,Rr]),reactExports.useEffect(()=>{if(!(typeof Tr>"u")){if(Tr===!1){Xr();return}Wr()}},[Tr]),reactExports.useEffect(function(){_r.current.setViewer(zr.current),_r.current.setExternalLinkRel(Tt),_r.current.setExternalLinkTarget(Dt)},[Tt,Dt]);const ns=reactExports.useCallback((fs,hs)=>{Pr.current[fs]=hs},[]),gs=reactExports.useCallback(fs=>{delete Pr.current[fs]},[]),us=reactExports.useMemo(()=>({imageResourcesPath:Ht,linkService:_r.current,onItemClick:Jt,pdf:Tr,registerPage:ns,renderMode:lr,rotate:cr,scale:dr,unregisterPage:gs}),[Ht,Jt,Tr,ns,lr,cr,dr,gs]),ps=reactExports.useMemo(()=>makeEventProps(ur,()=>Tr),[ur,Tr]);function cs(){function fs($s){return!!($s!=null&&$s.pdf)}if(!fs(us))throw new Error("pdf is undefined");const hs=typeof dt=="function"?dt(us):dt;return jsxRuntimeExports.jsx(DocumentContext.Provider,{value:us,children:hs})}function ss(){return Ft?Tr==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof Kt=="function"?Kt():Kt}):Tr===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof kt=="function"?kt():kt}):cs():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof Yt=="function"?Yt():Yt})}return jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Document",$t),ref:Ut,...ps,children:ss()})}),Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var et=[],dt=0;dt<arguments.length;dt++)et[dt]=arguments[dt];var $t=et.filter(Boolean);if($t.length<=1){var kt=$t[0];return kt||null}return function(Dt){for(var Ft=0,Ut=$t;Ft<Ut.length;Ft++){var Ht=Ut[Ft];typeof Ht=="function"?Ht(Dt):Ht&&(Ht.current=Dt)}}}const pageContext=reactExports.createContext(null),PageContext=pageContext;function usePageContext(){return reactExports.useContext(PageContext)}function AnnotationLayer(){const et=useDocumentContext(),dt=usePageContext();invariant(dt,"Unable to find Page context.");const $t={...et,...dt},{imageResourcesPath:kt,linkService:Tt,onGetAnnotationsError:Dt,onGetAnnotationsSuccess:Ft,onRenderAnnotationLayerError:Ut,onRenderAnnotationLayerSuccess:Ht,page:Kt,pdf:Yt,renderForms:Jt,rotate:Zt,scale:er=1}=$t;invariant(Yt,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(Kt,"Attempted to load page annotations, but no page was specified."),invariant(Tt,"Attempted to load page annotations, but no linkService was specified.");const[rr,sr]=useResolver(),{value:nr,error:ir}=rr,or=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function lr(){nr&&Ft&&Ft(nr)}function cr(){ir&&(warning$1(!1,ir.toString()),Dt&&Dt(ir))}reactExports.useEffect(function(){sr({type:"RESET"})},[sr,Kt]),reactExports.useEffect(function(){if(!Kt)return;const jr=makeCancellablePromise(Kt.getAnnotations()),Rr=jr;return jr.promise.then(xr=>{sr({type:"RESOLVE",value:xr})}).catch(xr=>{sr({type:"REJECT",error:xr})}),()=>{cancelRunningTask(Rr)}},[sr,Kt]),reactExports.useEffect(()=>{if(nr!==void 0){if(nr===!1){cr();return}lr()}},[nr]);function dr(){Ht&&Ht()}function ur(mr){warning$1(!1,`${mr}`),Ut&&Ut(mr)}const pr=reactExports.useMemo(()=>Kt.getViewport({scale:er,rotation:Zt}),[Kt,Zt,er]);return reactExports.useEffect(function(){if(!Yt||!Kt||!Tt||!nr)return;const{current:jr}=or;if(!jr)return;const Rr=pr.clone({dontFlip:!0}),xr={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:Yt.annotationStorage,commentManager:null,div:jr,l10n:null,linkService:Tt,page:Kt,structTreeLayer:null,viewport:Rr},kr={annotations:nr,annotationStorage:Yt.annotationStorage,div:jr,imageResourcesPath:kt,linkService:Tt,page:Kt,renderForms:Jt,viewport:Rr};jr.innerHTML="";try{new AnnotationLayer$1(xr).render(kr),dr()}catch(Mr){ur(Mr)}return()=>{}},[nr,kt,Tt,Kt,Yt,Jt,pr]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:or})}const PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(et){return et in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(et){return"children"in et}function isStructTreeNodeWithOnlyContentChild(et){return isStructTreeNode(et)?et.children.length===1&&0 in et.children&&"id"in et.children[0]:!1}function getRoleAttributes(et){const dt={};if(isStructTreeNode(et)){const{role:$t}=et,kt=$t.match(HEADING_PATTERN);if(kt)dt.role="heading",dt["aria-level"]=Number(kt[1]);else if(isPdfRole($t)){const Tt=PDF_ROLE_TO_HTML_ROLE[$t];Tt&&(dt.role=Tt)}}return dt}function getBaseAttributes(et){const dt={};if(isStructTreeNode(et)){if(et.alt!==void 0&&(dt["aria-label"]=et.alt),et.lang!==void 0&&(dt.lang=et.lang),isStructTreeNodeWithOnlyContentChild(et)){const[$t]=et.children;if($t){const kt=getBaseAttributes($t);return{...dt,...kt}}}}else"id"in et&&(dt["aria-owns"]=et.id);return dt}function getAttributes(et){return et?{...getRoleAttributes(et),...getBaseAttributes(et)}:null}function StructTreeItem({className:et,node:dt}){const $t=reactExports.useMemo(()=>getAttributes(dt),[dt]),kt=reactExports.useMemo(()=>!isStructTreeNode(dt)||isStructTreeNodeWithOnlyContentChild(dt)?null:dt.children.map((Tt,Dt)=>jsxRuntimeExports.jsx(StructTreeItem,{node:Tt},Dt)),[dt]);return jsxRuntimeExports.jsx("span",{className:et,...$t,children:kt})}function StructTree(){const et=usePageContext();invariant(et,"Unable to find Page context.");const{onGetStructTreeError:dt,onGetStructTreeSuccess:$t}=et,[kt,Tt]=useResolver(),{value:Dt,error:Ft}=kt,{customTextRenderer:Ut,page:Ht}=et;function Kt(){Dt&&$t&&$t(Dt)}function Yt(){Ft&&(warning$1(!1,Ft.toString()),dt&&dt(Ft))}return reactExports.useEffect(function(){Tt({type:"RESET"})},[Tt,Ht]),reactExports.useEffect(function(){if(Ut||!Ht)return;const Zt=makeCancellablePromise(Ht.getStructTree()),er=Zt;return Zt.promise.then(rr=>{Tt({type:"RESOLVE",value:rr})}).catch(rr=>{Tt({type:"REJECT",error:rr})}),()=>cancelRunningTask(er)},[Ut,Ht,Tt]),reactExports.useEffect(()=>{if(Dt!==void 0){if(Dt===!1){Yt();return}Kt()}},[Dt]),Dt?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:Dt}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas(et){const dt=usePageContext();invariant(dt,"Unable to find Page context.");const $t={...dt,...et},{_className:kt,canvasBackground:Tt,devicePixelRatio:Dt=getDevicePixelRatio(),onRenderError:Ft,onRenderSuccess:Ut,page:Ht,renderForms:Kt,renderTextLayer:Yt,rotate:Jt,scale:Zt}=$t,{canvasRef:er}=et;invariant(Ht,"Attempted to render page canvas, but no page was specified.");const rr=reactExports.useRef(null);function sr(){Ht&&Ut&&Ut(makePageCallback(Ht,Zt))}function nr(cr){isCancelException(cr)||(warning$1(!1,cr.toString()),Ft&&Ft(cr))}const ir=reactExports.useMemo(()=>Ht.getViewport({scale:Zt*Dt,rotation:Jt}),[Dt,Ht,Jt,Zt]),or=reactExports.useMemo(()=>Ht.getViewport({scale:Zt,rotation:Jt}),[Ht,Jt,Zt]);reactExports.useEffect(function(){if(!Ht)return;Ht.cleanup();const{current:dr}=rr;if(!dr)return;dr.width=ir.width,dr.height=ir.height,dr.style.width=`${Math.floor(or.width)}px`,dr.style.height=`${Math.floor(or.height)}px`,dr.style.visibility="hidden";const ur={annotationMode:Kt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvas:dr,canvasContext:dr.getContext("2d",{alpha:!1}),viewport:ir};Tt&&(ur.background=Tt);const pr=Ht.render(ur),mr=pr;return pr.promise.then(()=>{dr.style.visibility="",sr()}).catch(nr),()=>cancelRunningTask(mr)},[Tt,Ht,Kt,ir,or]);const lr=reactExports.useCallback(()=>{const{current:cr}=rr;cr&&(cr.width=0,cr.height=0)},[]);return reactExports.useEffect(()=>lr,[lr]),jsxRuntimeExports.jsx("canvas",{className:`${kt}__canvas`,dir:"ltr",ref:mergeRefs(er,rr),style:{display:"block",userSelect:"none"},children:Yt?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(et){return"str"in et}function TextLayer(){const et=usePageContext();invariant(et,"Unable to find Page context.");const{customTextRenderer:dt,onGetTextError:$t,onGetTextSuccess:kt,onRenderTextLayerError:Tt,onRenderTextLayerSuccess:Dt,page:Ft,pageIndex:Ut,pageNumber:Ht,rotate:Kt,scale:Yt}=et;invariant(Ft,"Attempted to load page text content, but no page was specified.");const[Jt,Zt]=useResolver(),{value:er,error:rr}=Jt,sr=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function nr(){er&&kt&&kt(er)}function ir(){rr&&(warning$1(!1,rr.toString()),$t&&$t(rr))}reactExports.useEffect(function(){Zt({type:"RESET"})},[Ft,Zt]),reactExports.useEffect(function(){if(!Ft)return;const mr=makeCancellablePromise(Ft.getTextContent()),jr=mr;return mr.promise.then(Rr=>{Zt({type:"RESOLVE",value:Rr})}).catch(Rr=>{Zt({type:"REJECT",error:Rr})}),()=>cancelRunningTask(jr)},[Ft,Zt]),reactExports.useEffect(()=>{if(er!==void 0){if(er===!1){ir();return}nr()}},[er]);const or=reactExports.useCallback(()=>{Dt&&Dt()},[Dt]),lr=reactExports.useCallback(pr=>{warning$1(!1,pr.toString()),Tt&&Tt(pr)},[Tt]);function cr(){const pr=sr.current;pr&&pr.classList.add("selecting")}function dr(){const pr=sr.current;pr&&pr.classList.remove("selecting")}const ur=reactExports.useMemo(()=>Ft.getViewport({scale:Yt,rotation:Kt}),[Ft,Kt,Yt]);return reactExports.useLayoutEffect(function(){if(!Ft||!er)return;const{current:mr}=sr;if(!mr)return;mr.innerHTML="";const jr=Ft.streamTextContent({includeMarkedContent:!0}),Rr={container:mr,textContentSource:jr,viewport:ur},xr=new TextLayer$1(Rr),kr=xr;return xr.render().then(()=>{const Mr=document.createElement("div");Mr.className="endOfContent",mr.append(Mr);const Tr=mr.querySelectorAll('[role="presentation"]');if(dt){let Or=0;er.items.forEach((_r,Pr)=>{if(!isTextItem(_r))return;const br=Tr[Or];if(!br)return;const wr=dt({pageIndex:Ut,pageNumber:Ht,itemIndex:Pr,..._r});br.innerHTML=wr,Or+=_r.str&&_r.hasEOL?2:1})}or()}).catch(lr),()=>cancelRunningTask(kr)},[dt,lr,or,Ft,Ut,Ht,er,ur]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:dr,onMouseDown:cr,ref:sr})}const defaultScale=1;function Page(et){const $t={...useDocumentContext(),...et},{_className:kt="react-pdf__Page",_enableRegisterUnregisterPage:Tt=!0,canvasBackground:Dt,canvasRef:Ft,children:Ut,className:Ht,customRenderer:Kt,customTextRenderer:Yt,devicePixelRatio:Jt,error:Zt="Failed to load the page.",height:er,inputRef:rr,loading:sr="Loading page",noData:nr="No page specified.",onGetAnnotationsError:ir,onGetAnnotationsSuccess:or,onGetStructTreeError:lr,onGetStructTreeSuccess:cr,onGetTextError:dr,onGetTextSuccess:ur,onLoadError:pr,onLoadSuccess:mr,onRenderAnnotationLayerError:jr,onRenderAnnotationLayerSuccess:Rr,onRenderError:xr,onRenderSuccess:kr,onRenderTextLayerError:Mr,onRenderTextLayerSuccess:Tr,pageIndex:Or,pageNumber:_r,pdf:Pr,registerPage:br,renderAnnotationLayer:wr=!0,renderForms:zr=!1,renderMode:Hr="canvas",renderTextLayer:Yr=!0,rotate:es,scale:rs=defaultScale,unregisterPage:Wr,width:Xr,...ns}=$t,[gs,us]=useResolver(),{value:ps,error:cs}=gs,ss=reactExports.useRef(null);invariant(Pr,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const fs=isProvided(_r)?_r-1:Or??null,hs=_r??(isProvided(Or)?Or+1:null),$s=es??(ps?ps.rotate:null),ks=reactExports.useMemo(()=>{if(!ps)return null;let Bs=1;const Js=rs??defaultScale;if(Xr||er){const Ys=ps.getViewport({scale:1,rotation:$s});Xr?Bs=Xr/Ys.width:er&&(Bs=er/Ys.height)}return Js*Bs},[er,ps,$s,rs,Xr]);reactExports.useEffect(function(){return()=>{isProvided(fs)&&Tt&&Wr&&Wr(fs)}},[Tt,Pr,fs,Wr]);function Ds(){if(mr){if(!ps||!ks)return;mr(makePageCallback(ps,ks))}if(Tt&&br){if(!isProvided(fs)||!ss.current)return;br(fs,ss.current)}}function _s(){cs&&(warning$1(!1,cs.toString()),pr&&pr(cs))}reactExports.useEffect(function(){us({type:"RESET"})},[us,Pr,fs]),reactExports.useEffect(function(){if(!Pr||!hs)return;const Js=makeCancellablePromise(Pr.getPage(hs)),Ys=Js;return Js.promise.then(ln=>{us({type:"RESOLVE",value:ln})}).catch(ln=>{us({type:"REJECT",error:ln})}),()=>cancelRunningTask(Ys)},[us,Pr,hs]),reactExports.useEffect(()=>{if(ps!==void 0){if(ps===!1){_s();return}Ds()}},[ps,ks]);const As=reactExports.useMemo(()=>isProvided(fs)&&hs&&isProvided($s)&&isProvided(ks)?{_className:kt,canvasBackground:Dt,customTextRenderer:Yt,devicePixelRatio:Jt,onGetAnnotationsError:ir,onGetAnnotationsSuccess:or,onGetStructTreeError:lr,onGetStructTreeSuccess:cr,onGetTextError:dr,onGetTextSuccess:ur,onRenderAnnotationLayerError:jr,onRenderAnnotationLayerSuccess:Rr,onRenderError:xr,onRenderSuccess:kr,onRenderTextLayerError:Mr,onRenderTextLayerSuccess:Tr,page:ps,pageIndex:fs,pageNumber:hs,renderForms:zr,renderTextLayer:Yr,rotate:$s,scale:ks}:null,[kt,Dt,Yt,Jt,ir,or,lr,cr,dr,ur,jr,Rr,xr,kr,Mr,Tr,ps,fs,hs,zr,Yr,$s,ks]),Ns=reactExports.useMemo(()=>makeEventProps(ns,()=>ps&&(ks?makePageCallback(ps,ks):void 0)),[ns,ps,ks]),Is=`${fs}@${ks}/${$s}`;function zs(){switch(Hr){case"custom":return invariant(Kt,'renderMode was set to "custom", but no customRenderer was passed.'),jsxRuntimeExports.jsx(Kt,{},`${Is}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:Ft},`${Is}_canvas`)}}function Gs(){return Yr?jsxRuntimeExports.jsx(TextLayer,{},`${Is}_text`):null}function Ws(){return wr?jsxRuntimeExports.jsx(AnnotationLayer,{},`${Is}_annotations`):null}function Qs(){function Bs(Ys){return!!(Ys!=null&&Ys.page)}if(!Bs(As))throw new Error("page is undefined");const Js=typeof Ut=="function"?Ut(As):Ut;return jsxRuntimeExports.jsxs(PageContext.Provider,{value:As,children:[zs(),Gs(),Ws(),Js]})}function qs(){return hs?Pr===null||ps===void 0||ps===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof sr=="function"?sr():sr}):Pr===!1||ps===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof Zt=="function"?Zt():Zt}):Qs():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof nr=="function"?nr():nr})}return jsxRuntimeExports.jsx("div",{className:clsx(kt,Ht),"data-page-number":hs,ref:mergeRefs(rr,ss),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ks}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:Dt||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ns,children:qs()})}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";function DownloadLockWarningModal({open:et,onCancel:dt,onConfirm:$t}){return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[999] px-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0b0f19] border border-gray-800 rounded-2xl p-8 max-w-md w-full shadow-xl text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:" Final Download Warning"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-sm leading-relaxed mb-6",children:["Downloading this book will permanently lock editing for this document.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"You will still be able to view and download it again, but you wont be able to make any further changes."]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-gray-800 border border-gray-700 text-gray-300 px-5 py-2.5 rounded-lg hover:bg-gray-700 transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:$t,className:"bg-red-600 text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-red-600/90 transition",children:"Download & Lock"})]})]})}):null}GlobalWorkerOptions.workerSrc=new URL("/pdf.worker.min.js",window.location.origin).toString();function PDFPreviewModal({fileUrl:et,fileTitle:dt,partNumber:$t,sourceType:kt="magnet",magnetId:Tt,onClose:Dt}){const{user:Ft}=useAuth(),[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState(1.2),[Jt,Zt]=reactExports.useState(!1),[er,rr]=reactExports.useState(!1),[sr,nr]=reactExports.useState(null),[ir,or]=reactExports.useState(!1),[lr,cr]=reactExports.useState(!1),[dr,ur]=reactExports.useState(!1),pr=kt==="magnet",mr=reactExports.useMemo(()=>Math.min(window.innerWidth-40,900),[]),jr=reactExports.useMemo(()=>et?{url:`https://themessyattic.com/api/pdf/proxy?url=${encodeURIComponent(et)}&preview=1`}:null,[et]);if(!et)return null;reactExports.useEffect(()=>{if(!et)return;let xr,kr=0;const Mr=async()=>{if(!Jt)try{const Or=(await axiosInstance.head(jr.url)).headers["content-type"];if(Or!=null&&Or.includes("pdf")){Zt(!0);return}kr<10?(kr++,xr=setTimeout(Mr,1500)):nr("PDF is still being finalized. Try again in a few seconds.")}catch{kr<10?(kr++,xr=setTimeout(Mr,1500)):nr("PDF is still being finalized. Try again shortly.")}};return Mr(),()=>clearTimeout(xr)},[et,jr.url,Jt]);const Rr=async()=>{if((Ft==null?void 0:Ft.has_free_magnet)===1&&(Ft==null?void 0:Ft.magnet_slots)===1){or(!0);return}try{rr(!0);const kr=(dt||"Cre8tly_Download").replace(/[^\w\s-]/g,"").trim().replace(/\s+/g,"_"),Mr=`https://themessyattic.com/api/pdf/proxy?url=${encodeURIComponent(et)}&title=${encodeURIComponent(kr)}${kt==="magnet"&&Tt?`&magnetId=${Tt}`:""}`,Tr=await fetch(Mr);if(!Tr.ok)throw new Error(`Failed: ${Tr.status} ${Tr.statusText}`);const Or=await Tr.blob(),_r=URL.createObjectURL(Or),Pr=document.createElement("a");Pr.href=_r,Pr.download=`${kr}.pdf`,document.body.appendChild(Pr),Pr.click(),document.body.removeChild(Pr),URL.revokeObjectURL(_r),await new Promise(br=>setTimeout(br,2e3))}catch(kr){console.error("Download error:",kr),alert(" Download failed. Please try again.")}finally{rr(!1)}};return reactExports.useEffect(()=>{if(!et){Zt(!1),nr(null),rr(!1),Ht(null),Yt(1.2);return}Zt(!1),nr(null),rr(!1),Ht(null),Yt(1.2)},[et]),reactExports.useEffect(()=>{const xr=()=>Yt(kr=>window.innerWidth<640?Math.min(kr,.8):kr);return window.addEventListener("resize",xr),xr(),()=>window.removeEventListener("resize",xr)},[]),jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-md z-50 flex flex-col items-center justify-center p-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-5xl flex items-center justify-between mb-4 bg-[#111]/80 border border-gray-800 rounded-xl px-5 py-3 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 text-white/80 font-semibold text-lg tracking-wide",children:" PDF Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Yt(Kt+.2),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom In",children:jsxRuntimeExports.jsx(ZoomIn,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>Yt(Math.max(Kt-.2,.6)),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-300 transition",title:"Zoom Out",children:jsxRuntimeExports.jsx(ZoomOut,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>{pr?cr(!0):Rr()},disabled:er,className:`p-2 rounded-lg transition text-white ${er?"bg-green cursor-wait":"bg-green/90 hover:bg-green/80"}`,title:"Download",children:er?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"white",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),"Downloading"]}):jsxRuntimeExports.jsx(Download,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:Dt,className:"p-2 rounded-lg hover:bg-red-600/90 bg-red-600 text-white transition",title:"Close",children:jsxRuntimeExports.jsx(X$5,{size:20})})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-5xl max-h-[85vh] overflow-y-auto bg-[#121212] border border-gray-800 rounded-xl shadow-lg flex justify-center p-2 sm:p-6",children:[!Jt&&!sr&&jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-8 w-8 text-[#00e0ff] mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium animate-pulse",children:" Finalizing your PDF  just a few more seconds..."}),jsxRuntimeExports.jsx("div",{className:"w-64 h-2 bg-gray-800 rounded-full overflow-hidden mt-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-[#00e0ff] via-[#00e07a] to-[#00e0ff] animate-progress"})})]}),sr&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-red-400 z-20 bg-black/70 backdrop-blur-sm rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-center px-6 text-sm",children:sr})}),jsxRuntimeExports.jsx("div",{className:`w-full flex justify-center transition-opacity duration-500 ${Jt?"opacity-100":"opacity-0"}`,children:Jt&&!sr&&jsxRuntimeExports.jsx(Document$1,{file:jr,onLoadSuccess:({numPages:xr})=>{Ht(xr),ur(!0)},onLoadError:xr=>{console.error("PDF load error:",xr),nr("Failed to load PDF file.")},loading:jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading PDF"}),children:jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center w-full",children:Array.from(new Array(Ut||0),(xr,kr)=>jsxRuntimeExports.jsx(Page,{pageNumber:kr+1,scale:Kt,renderTextLayer:!1,renderAnnotationLayer:!1,className:"mb-4",width:mr},`page_${kr+1}`))})})})]}),ir&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/90 flex flex-col items-center justify-center z-[999] px-6 text-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0b0f19] border border-gray-800 rounded-2xl p-8 max-w-md w-full shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white mb-3",children:" Upgrade Required"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-6 leading-relaxed",children:"Downloads are available for Pro users only. Upgrade your plan to unlock high-quality PDF exports, full lead magnet access, and more."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.location.href="/plans",className:"bg-green text-black px-5 py-2.5 rounded-lg font-semibold hover:opacity-90 transition",children:"Upgrade Now"}),jsxRuntimeExports.jsx("button",{onClick:()=>or(!1),className:"bg-gray-800 border border-gray-700 text-gray-300 px-5 py-2.5 rounded-lg hover:bg-gray-700 transition",children:"Maybe Later"})]})]})}),pr&&jsxRuntimeExports.jsx(DownloadLockWarningModal,{open:lr,onCancel:()=>cr(!1),onConfirm:async()=>{cr(!1),await Rr()}})]})}function BookPartsModal({bookId:et,onEditChapter:dt,onClose:$t}){const[kt,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(null),[er,rr]=reactExports.useState(null),[sr,nr]=reactExports.useState(null),[ir,or]=reactExports.useState(!1),[lr,cr]=reactExports.useState(!1),dr=sr!==null;reactExports.useEffect(()=>{async function jr(){try{const Rr=await axiosInstance.get(`/books/${et}/parts`);Tt(Rr.data)}catch(Rr){console.error(" Failed to load book parts:",Rr)}finally{Ft(!1)}}jr()},[et]),reactExports.useEffect(()=>{async function jr(){try{const Rr=await axiosInstance.get(`/books/${et}`);rr(Rr.data.epub_url||null),nr(!!Rr.data.is_complete)}catch(Rr){console.error(" Failed to load book metadata:",Rr)}}jr()},[et]);const ur=kt.length>0&&kt.every(jr=>jr.file_url);async function pr(){var jr,Rr;Yt(!0),Zt(null);try{const xr=await axiosInstance.post(`/books/${et}/epub/generate`);rr(xr.data.epubUrl)}catch(xr){console.error(" EPUB publish failed:",xr),Zt(((Rr=(jr=xr==null?void 0:xr.response)==null?void 0:jr.data)==null?void 0:Rr.error)||"Failed to generate EPUB")}finally{Yt(!1)}}async function mr(){var jr,Rr;cr(!0);try{await axiosInstance.post(`/books/${et}/finalize`),nr(!0),or(!1)}catch(xr){console.error(" Finalize failed:",xr),alert(((Rr=(jr=xr==null?void 0:xr.response)==null?void 0:jr.data)==null?void 0:Rr.error)||"Failed to finalize book")}finally{cr(!1)}}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0b0b0b] border border-gray-700 rounded-2xl w-full max-w-3xl p-6 relative",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:" Book Parts"}),Dt?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"Loading parts..."}):kt.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-center",children:"No parts found yet."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:kt.map(jr=>jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between border-b border-gray-700 pb-3",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0 pr-6",children:[jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold break-words leading-snug",children:["Part ",jr.part_number,": ",jr.title||"Untitled"]}),jsxRuntimeExports.jsxs("p",{className:"text-white",children:["Total pages: ",jr.pages]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:new Date(jr.created_at).toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ht({url:jr.file_url,title:jr.title,partNumber:jr.part_number}),className:"px-3 py-1 bg-bookBtnColor rounded text-sm text-black font-semibold hover:opacity-90 transition",children:"Open PDF"}),jsxRuntimeExports.jsx("button",{onClick:()=>{$t(),dt(et,jr.part_number)},disabled:sr,className:`px-3 py-1 rounded text-sm font-semibold transition
                      ${sr?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-gray-900 border border-gray-700 text-white hover:bg-gray-700"}`,children:"Edit Chapter"})]})]},jr.id))}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold text-lg mb-2",children:"Book Status"}),dr&&(sr?jsxRuntimeExports.jsx("p",{className:"text-green font-medium",children:" This book has been finalized"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"When you finalize this book, all chapters will be locked and the book can be published as a full EPUB."}),jsxRuntimeExports.jsx("button",{onClick:()=>or(!0),className:"w-full py-3 rounded-xl font-semibold bg-yellow hover:bg-yellow/80 text-black transition",children:"Finalize Book"})]}))]}),sr&&jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-6 flex flex-col items-center gap-3",children:[Jt&&jsxRuntimeExports.jsx("p",{className:"text-red-400 text-sm text-center",children:Jt}),jsxRuntimeExports.jsx("button",{onClick:pr,disabled:!ur||Kt,className:`w-full py-3 rounded-xl font-semibold transition
        ${ur?"bg-white hover:bg-green text-black":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:Kt?"Publishing EPUB...":"Publish Full Book as EPUB"}),!ur&&jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-xs text-center",children:"All chapters must be completed before publishing"}),er&&jsxRuntimeExports.jsx("a",{href:er,target:"_blank",rel:"noopener noreferrer",className:"w-full text-center py-3 rounded-xl font-semibold bg-blue hover:bg-blue/80 text-white transition",children:"Download EPUB"})]}),jsxRuntimeExports.jsx("button",{onClick:$t,className:"absolute top-3 right-3 text-white text-xl hover:text-red-400 transition",children:""})]})}),ir&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0b0b0b] border border-gray-700 rounded-2xl w-full max-w-md p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-3 text-center",children:"Finalize Book?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-sm text-center mb-6",children:[jsxRuntimeExports.jsx("strong",{children:"This action cannot be undone."}),jsxRuntimeExports.jsx("br",{})," Once finalized, chapters can no longer be edited ",jsxRuntimeExports.jsx("br",{}),"and the book will be prepared for EPUB publishing."]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>or(!1),className:"flex-1 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-700 transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:mr,className:"flex-1 py-2 rounded-lg bg-red-600 hover:bg-red-500 text-white font-semibold transition",disabled:lr,children:lr?"Finalizing...":"Yes, Finalize"})]})]})}),Ut&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:Ut.url,fileTitle:Ut.title,partNumber:Ut.partNumber,sourceType:"book",onClose:()=>Ht(null)})]})}function BookCardList({books:et=[],onAddPrompt:dt,onGenerateNext:$t,onArchiveBook:kt}){const[Tt,Dt]=reactExports.useState(!1),[Ft,Ut]=reactExports.useState(null),{accessToken:Ht}=useAuth();function Kt(Yt){Ut(Yt),Dt(!0)}return!Array.isArray(et)||et.length===0?null:jsxRuntimeExports.jsxs("div",{className:"md:hidden flex flex-col gap-4 p-4",children:[et.map(Yt=>{const Zt=!(Yt.is_complete===1)&&Yt.pages<750,er=Yt.is_draft===1||Yt.draft_text&&Yt.draft_text.trim().length>0;return jsxRuntimeExports.jsxs(motion.div,{whileTap:{scale:.98},className:`
            relative group
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            rounded-xl p-4
            transition-all
          `,children:[jsxRuntimeExports.jsx("h3",{className:"text-dashboard-text-light dark:text-dashboard-text-dark text-sm font-semibold truncate mb-1",children:Yt.book_name||"Untitled Book"}),jsxRuntimeExports.jsx("div",{className:`text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark
              flex justify-between mb-2`,children:jsxRuntimeExports.jsxs("span",{children:["Part ",Yt.part_number||1]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-3",children:[jsxRuntimeExports.jsx("div",{className:`w-full rounded-full h-2
              bg-dashboard-border-light
              dark:bg-dashboard-border-dark`,children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(Yt.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("p",{className:`text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark
`,children:[Yt.pages||0,"/750 pages used"]}),jsxRuntimeExports.jsx(Tooltip,{text:"Pages are counted across the entire book. You can write, edit, and export PDFs freely until you reach 750 total pages. Downloads do not lock your book."})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:Yt.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):Yt.status==="failed"?jsxRuntimeExports.jsx("span",{className:"bg-red-500 text-white px-3 py-[3px] rounded-full",children:"Failed"}):Yt.is_complete===1?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Finalized"}):Yt.pages>0?jsxRuntimeExports.jsx("span",{className:"bg-blue text-white px-3 py-[3px] rounded-full",children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:"bg-gray-600 text-white px-3 py-[3px] rounded-full",children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:Yt.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:`text-dashboard-muted-light dark:text-dashboard-muted-dark
`})}),jsxRuntimeExports.jsx("div",{className:`text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark
              text-center mt-2 flex items-center justify-center gap-1`,children:Yt.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{children:[new Date(Yt.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(Yt.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}),jsxRuntimeExports.jsx(Tooltip,{text:"This is the date and time this chapter was generated. Purchase dates are shown in Settings."})]}):jsxRuntimeExports.jsx("span",{className:`italic text-dashboard-muted-light dark:text-dashboard-muted-dark
`,children:"Not generated yet"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-stretch gap-2 mt-3 w-full",children:[er&&!Yt.prompt&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt(Yt.id,Yt.part_number||1),className:`
                    w-full
                    bg-blue
                    text-white
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:opacity-90
                    transition
                    flex items-center justify-center gap-2
                  `,title:"Continue Draft",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:"shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),!er&&!Yt.prompt&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt(Yt.id,Yt.part_number||1),className:`
                    w-full
                    bg-dashboard-hover-light
                    dark:bg-dashboard-hover-dark
                    text-dashboard-text-light
                    dark:text-dashboard-text-dark
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:bg-green hover:text-black
                    transition
                    flex items-center justify-center gap-2
                  `,title:"Create Chapter",children:[jsxRuntimeExports.jsx(Plus,{size:16,className:"shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]}),Yt.pdf_url&&jsxRuntimeExports.jsxs("button",{onClick:()=>Kt(Yt.id),className:`w-full bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  hover:opacity-90 rounded-lg py-2 text-sm flex items-center justify-center gap-2 transition`,children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]}),Yt.prompt&&Zt&&jsxRuntimeExports.jsxs("button",{onClick:()=>Yt.pages>=750?Kt(Yt.id):$t(Yt.id,(Yt.part_number||1)+1),className:"w-full bg-royalPurple text-white rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2 mt-3",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:Yt.pages>=750?"Finish Book":`Continue Story (Part ${(Yt.part_number||1)+1})`})]}),!Yt.is_complete&&Yt.status!=="pending"&&jsxRuntimeExports.jsx("button",{onClick:()=>kt(Yt.id),className:`
                    w-full
                    border border-red-500/40
                    text-red-400
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:bg-red-500/10
                    transition
                  `,title:"Archive Book",children:"Archive Book"})]})]},Yt.id)}),Tt&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:Ft,accessToken:Ht,onClose:()=>Dt(!1)})]})}function NewBookModal({onCreate:et,onClose:dt}){const[$t,kt]=reactExports.useState(""),[Tt,Dt]=reactExports.useState(""),[Ft,Ut]=reactExports.useState(""),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(!1);function Zt(){if(!($t!=null&&$t.trim())){y$4.error("Please enter a book name");return}if(!(Tt!=null&&Tt.trim())){y$4.error("Please enter an author name");return}if(!Ft){y$4.error("Please select a book type before continuing");return}Jt(!0)}return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 sm:p-0",children:[jsxRuntimeExports.jsxs("div",{className:`
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        p-4 sm:p-6
        rounded-xl
        w-full max-w-2xl
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        shadow-lg
        max-h-[90vh] overflow-y-auto
      `,children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-center text-dashboard-text-light dark:text-dashboard-text-dark",children:"Set Up Your Book"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Book Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. The Burning City",value:$t,onChange:er=>kt(er.target.value),className:`
            w-full p-2 rounded
            bg-dashboard-bg-light
            dark:bg-dashboard-bg-dark
            text-dashboard-text-light
            dark:text-dashboard-text-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            focus:outline-none
            focus:ring-2 focus:ring-green
          `})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-1",children:"Author Name"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g. Dean Koontz",value:Tt,onChange:er=>Dt(er.target.value),className:`
            w-full p-2 rounded
            bg-dashboard-bg-light
            dark:bg-dashboard-bg-dark
            text-dashboard-text-light
            dark:text-dashboard-text-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            focus:outline-none
            focus:ring-2 focus:ring-green
          `})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-silver mb-3",children:"Select Book Type"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg p-3 border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              hover:opacity-90
              transition`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:"fiction",checked:Ft==="fiction",onChange:er=>Ut(er.target.value),className:"mt-1 accent-royalPurple"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-dashboard-text-light dark:text-dashboard-text-dark font-medium",children:"Fiction"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark leading-relaxed",children:"For novels, short stories, and narrative driven work. This mode collaborates with you to develop characters, expand scenes, and shape a cinematic narrative arc. It may introduce supporting characters and story elements while staying aligned with your vision, tone, and story world."})]})]}),jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg p-3 border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              hover:opacity-90
              transition `,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:"non-fiction",checked:Ft==="non-fiction",onChange:er=>Ut(er.target.value),className:"mt-1 accent-royalPurple"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-dashboard-text-light dark:text-dashboard-text-dark font-medium",children:"Non-Fiction"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark leading-relaxed",children:"For true stories, memoirs, and personal histories. Non Fiction mode does not invent or add details. It works strictly with your words, refining clarity, structure, pacing, and voice while keeping every fact, event, and meaning intact."})]})]}),jsxRuntimeExports.jsxs("label",{className:`flex items-start gap-3 cursor-pointer rounded-lg p-3 border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              hover:opacity-90
              transition`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"bookType",value:"educational",checked:Ft==="educational",onChange:er=>Ut(er.target.value),className:"mt-1 accent-royalPurple"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-dashboard-text-light dark:text-dashboard-text-dark font-medium",children:"Educational"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark leading-relaxed",children:"For guides, courses, workbooks, and instructional material. Educational mode acts as a strict editor, improving clarity and readability without adding, removing, or restructuring content. Your instructional logic and sequencing remain fully intact."})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-4",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:` px-4 py-2 rounded font-semibold transition bg-dashboard-hover-light
            dark:bg-dashboard-hover-dark
            text-dashboard-text-light
            dark:text-dashboard-text-dark
            hover:opacity-90`,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Zt,disabled:Ht,className:"bg-bookBtnColor px-4 py-2 rounded text-black font-semibold hover:opacity-90 transition",children:Ht?"Saving...":"Continue"})]})]}),Yt&&jsxRuntimeExports.jsx("div",{className:`
      fixed inset-0 
      backdrop-blur-md 
      bg-black/60 
      flex items-center justify-center 
      z-[9999] 
      animate-fadeIn
    `,children:jsxRuntimeExports.jsxs("div",{className:`
        bg-black/90 
        border border-white/10 
        shadow-[0_0_30px_rgba(0,0,0,0.6)] 
        rounded-2xl 
        px-6 py-5 
        w-[90%] max-w-sm 
        text-center 
        animate-slideDown
      `,children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-[#7bed9f] drop-shadow-sm",children:"Confirm Action"}),jsxRuntimeExports.jsxs("p",{className:"text-dashboard-muted-light dark:text-gray-300 text-sm leading-relaxed mt-3",children:["You will ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:"NOT"})," be able to change the book type or author name after continuing."]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 pt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Jt(!1),className:`
            px-4 py-2 
            rounded-lg 
            bg-gray-700 
            text-gray-300 
            hover:bg-gray-600 
            transition
          `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{Kt(!0);const er=await axiosInstance.post("/books/create-book",{bookName:$t,authorName:Tt,bookType:Ft});Jt(!1),et({bookId:er.data.id,bookName:$t,authorName:Tt,bookType:Ft})}catch(er){console.error("Failed to create book:",er),y$4.error("Failed to create book")}finally{Kt(!1)}},className:`
            px-5 py-2 
            rounded-lg 
            bg-[#7bed9f] 
            text-black 
            font-semibold 
            hover:bg-[#63e28b] 
            transition 
            shadow-[0_0_12px_rgba(123,237,159,0.6)]
          `,children:"Continue"})]})]})})]})}const SIDEBAR_SECTIONS=[{section:"Community",items:[{key:"community",label:"Community",icon:MessagesSquare,badge:"communityCount",isParent:!0},{key:"community-topics",label:"Home",path:"/community",icon:House,allowCommunity:!0,isSubItem:!0},{key:"posts",label:"My Posts",path:"/community/posts",icon:FileText,allowCommunity:!0,isSubItem:!0},{key:"my-fragments",label:"My Fragments",path:"/community/my-fragments",icon:Feather,allowCommunity:!0,isSubItem:!0},{key:"saved",label:"Saved",path:"/community/bookmarks",icon:Bookmark,allowCommunity:!0,isSubItem:!0},{key:"notifications",label:"Notifications",path:"/community-alerts",icon:BellRing,badge:"communityCount",allowCommunity:!0,isSubItem:!0},{key:"subscriptions",label:"Subscriptions",path:"/community/subscriptions",icon:Mail,allowCommunity:!0,isSubItem:!0},{key:"my subscriptions",label:"My Subscriptions",path:"/community/my-subscriptions",icon:Star,allowCommunity:!0,isSubItem:!0},{key:"profile",label:"Profile",path:"/community/profile",icon:User,allowCommunity:!0,isSubItem:!0},{key:"profile-settings",label:"Profile Settings",path:"/community/settings",icon:Cog,allowCommunity:!0,isSubItem:!0},{key:"subscriber-templates",label:"Email Templates",path:"/community/email-templates",icon:MailCheck,allowCommunity:!0,isSubItem:!0}]},{section:"Tools",items:[{key:"assistant",label:"Assistant",path:"/books",icon:BookOpen,access:"books"}]},{section:"Growth",access:"pro",items:[{key:"landing",label:"Landing Pages",path:"/landing-page-builder",icon:LayoutTemplate,access:"pro"},{key:"analytics",label:"Analytics",path:"/landing-analytics",icon:ChartNoAxesColumn,access:"pro"},{key:"seller",label:"Seller Dashboard",path:"/seller-dashboard",icon:Landmark,access:"seller"}]},{section:"Account",items:[{key:"inbox",label:"Inbox",path:"/notifications",icon:Inbox$1,badge:"unreadCount",allowCommunity:!0},{key:"settings",label:"Settings",path:"/settings",icon:Settings,indicator:"brandConfigured",allowCommunity:!0},{key:"docs",label:"Help",path:"/docs",icon:CircleQuestionMark,allowCommunity:!0}]}];function SidebarToggleIcon({size:et=18,stroke:dt="currentColor"}){return jsxRuntimeExports.jsxs("svg",{width:et,height:et,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("rect",{x:"3",y:"4",width:"14",height:"2",rx:"1",fill:dt}),jsxRuntimeExports.jsx("rect",{x:"3",y:"9",width:"10",height:"2",rx:"1",fill:dt}),jsxRuntimeExports.jsx("rect",{x:"3",y:"14",width:"12",height:"2",rx:"1",fill:dt})]})}function UpgradeRequiredModal({open:et,onClose:dt}){const $t=useNavigate();return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-md rounded-xl p-6 shadow-xl
        bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Upgrade Required!"}),jsxRuntimeExports.jsx("p",{className:"text-sm mb-6 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"You cant use this feature on your current plan. Upgrade to unlock it and continue."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:`
            px-4 py-2 rounded-lg text-sm transition
            bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            text-dashboard-text-light dark:text-dashboard-text-dark
            hover:opacity-90
          `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{dt(),$t("/plans")},className:`
            px-4 py-2 rounded-lg text-sm font-medium transition
            bg-green text-black hover:opacity-90
          `,children:"View Plans"})]})]})}):null}const SIDEBAR_COLLAPSE_KEY="cre8tly_sidebar_collapsed";function useIsDesktop(){const[et,dt]=reactExports.useState(()=>window.matchMedia("(min-width: 1024px)").matches);return reactExports.useEffect(()=>{const $t=window.matchMedia("(min-width: 1024px)"),kt=Tt=>dt(Tt.matches);return $t.addEventListener("change",kt),()=>$t.removeEventListener("change",kt)},[]),et}function DashboardLayout({children:et}){const dt=useNavigate(),$t=reactExports.useRef(null),kt=useLocation(),Tt=["/","/community"],Dt=window.history.length>1&&!Tt.includes(kt.pathname),{user:Ft,logout:Ut,updateTheme:Ht}=useAuth(),Kt=260,Yt=72,[Jt,Zt]=reactExports.useState(0),[er,rr]=reactExports.useState(0),[sr,nr]=reactExports.useState(!1),[ir,or]=reactExports.useState(()=>{try{return localStorage.getItem(SIDEBAR_COLLAPSE_KEY)==="true"}catch{return!1}}),[lr,cr]=reactExports.useState(()=>typeof window>"u"?!1:localStorage.getItem("communityOpen")==="true"),dr=(Ft==null?void 0:Ft.has_free_magnet)===1&&(Ft==null?void 0:Ft.magnet_slots)===1,ur=!!(Ft!=null&&Ft.authors_assistant_override)||(Ft==null?void 0:Ft.subscription_status)==="active"&&(Ft==null?void 0:Ft.has_book)===1,pr=(Ft==null?void 0:Ft.is_member)===1&&!ur&&!(Ft!=null&&Ft.free_trial_expires_at),mr=useIsDesktop(),[jr,Rr]=reactExports.useState(!1);reactExports.useEffect(()=>{if(!(Ft!=null&&Ft.id))return;const Mr=async()=>{try{const Or=await axiosInstance.get("/messages/user/count");Zt(Or.data.count||0)}catch(Or){console.error("Failed to fetch unread count:",Or)}};Mr();const Tr=setInterval(Mr,3e4);return()=>clearInterval(Tr)},[Ft==null?void 0:Ft.id]),reactExports.useEffect(()=>{mr&&localStorage.setItem("communityOpen",String(lr))},[lr,mr]),reactExports.useEffect(()=>{mr||cr(!1)},[kt.pathname,mr]),reactExports.useEffect(()=>{if(!(Ft!=null&&Ft.id))return;const Mr=async()=>{try{const Or=await axiosInstance.get("/notifications/count");rr(Or.data.count||0)}catch(Or){console.error("Failed to fetch community notifications:",Or)}};Mr();const Tr=setInterval(Mr,3e4);return()=>clearInterval(Tr)},[Ft==null?void 0:Ft.id]),reactExports.useEffect(()=>{try{localStorage.setItem(SIDEBAR_COLLAPSE_KEY,String(ir))}catch{}},[ir]),reactExports.useEffect(()=>{var Mr;(Mr=document.scrollingElement)==null||Mr.scrollTo({top:0,behavior:"auto"})},[kt.pathname]);function xr(Mr){return Mr.access==="books"?ur:!(Mr.access==="pro"&&dr||Mr.access==="seller"&&!(Ft!=null&&Ft.stripe_connect_account_id))}function kr(Mr){const Tr=kt.pathname===Mr.path,Or=Mr.icon||null,_r=pr&&!ur&&!Mr.allowCommunity,Pr=Mr.isSubItem,br=Mr.isParent;return jsxRuntimeExports.jsxs("button",{onClick:()=>{if(br){cr(wr=>!wr);return}if(_r){nr(!0);return}dt(Mr.path)},className:`w-full flex items-center rounded-lg transition
${ir?"justify-center px-3 py-3":`gap-3 px-4 py-3 text-left ${Pr?"pl-10 text-sm opacity-80":""}`}
${Tr?ir?"bg-green/20 text-green":"bg-green/10 text-green border border-green/30":"text-dashboard-muted-light dark:text-dashboard-muted-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
${_r?"opacity-50 cursor-pointer":""}
`,children:[Or&&jsxRuntimeExports.jsx(Or,{size:18}),!ir&&jsxRuntimeExports.jsxs("div",{className:"flex items-center flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"font-medium leading-tight",children:Mr.label}),jsxRuntimeExports.jsx("span",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Mr.description})]}),Mr.isParent&&jsxRuntimeExports.jsx(ChevronDown,{size:16,className:`ml-auto transition-transform ${lr?"rotate-180":""}`})]}),Mr.badge==="unreadCount"&&Jt>0&&jsxRuntimeExports.jsx("span",{className:"ml-auto bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:Jt>9?"9+":Jt}),Mr.badge==="communityCount"&&er>0&&jsxRuntimeExports.jsx("span",{className:"ml-auto bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-sm",children:er>9?"9+":er}),Mr.indicator==="brandConfigured"&&(Ft==null?void 0:Ft.brand_identity_file)&&jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-green animate-pulse"})]},Mr.key)}return jsxRuntimeExports.jsxs("div",{className:`dashboard relative min-h-screen 
  bg-dashboard-bg-light
  dark:bg-dashboard-bg-dark
  text-dashboard-text-light
  dark:text-dashboard-text-dark`,children:[mr&&jsxRuntimeExports.jsxs("aside",{className:`fixed top-0 left-0 h-full overflow-hidden
        bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
        border-r border-dashboard-border-light dark:border-dashboard-border-dark
        flex flex-col transform transition-all duration-300 z-[60]
       lg:translate-x-0`,style:{width:ir?`${Yt}px`:`${Kt}px`},children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:`flex items-center ${ir?"justify-center":"justify-start gap-3"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>or(!ir),className:`w-9 h-9 flex items-center justify-center rounded-md transition
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark`,title:ir?"Expand sidebar":"Collapse sidebar",children:jsxRuntimeExports.jsx(SidebarToggleIcon,{size:18})}),!ir&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute w-[90%] h-[90%] rounded-full bg-green-400/25 blur-lg animate-pulse"}),jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col leading-tight",children:[jsxRuntimeExports.jsx("span",{className:"logoText text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark.  ",children:"The Messy"}),jsxRuntimeExports.jsx("span",{className:"logoText text-dashboard-text-light dark:text-dashboard-text-dark",children:"Attic"})]})]})]})}),jsxRuntimeExports.jsx("nav",{className:`flex-1 overflow-y-auto pb-6 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent ${ir?"px-2":"px-6"}`,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-5 mt-2",children:SIDEBAR_SECTIONS.map(Mr=>jsxRuntimeExports.jsxs("div",{children:[!ir&&jsxRuntimeExports.jsx("p",{className:`px-4 mb-2 text-xs uppercase tracking-wide
text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:Mr.section}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-1",children:Mr.items.filter(xr).filter(Tr=>!(Tr.isSubItem&&!lr)).map(kr)})]},Mr.section))})}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-dashboard-border-light dark:border-dashboard-border-dark space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center ${ir?"justify-center":"gap-3 px-2"}`,children:[jsxRuntimeExports.jsx("img",{src:(Ft==null?void 0:Ft.profile_image)||defaultImage,alt:"Profile",className:"w-9 h-9 rounded-full object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}),!ir&&jsxRuntimeExports.jsx("span",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark truncate",children:(Ft==null?void 0:Ft.name)||"Account"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ht((Ft==null?void 0:Ft.theme)==="dark"?"light":"dark"),className:`
    w-full flex items-center rounded-lg transition
    ${ir?"justify-center px-3 py-3":"gap-3 px-4 py-3"}
    text-dashboard-muted-light dark:text-dashboard-muted-dark
    hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
  `,children:[(Ft==null?void 0:Ft.theme)==="dark"?jsxRuntimeExports.jsx(Sun,{size:18}):jsxRuntimeExports.jsx(Moon,{size:18}),!ir&&jsxRuntimeExports.jsx("span",{className:"font-medium",children:(Ft==null?void 0:Ft.theme)==="dark"?"Light mode":"Dark mode"})]}),jsxRuntimeExports.jsxs("button",{onClick:Ut,className:`w-full flex items-center rounded-lg transition ${ir?"justify-center px-3 py-3":"gap-3 px-4 py-3"} text-red-500 hover:bg-red-600/10`,children:[jsxRuntimeExports.jsx(LogOut,{size:20}),!ir&&jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),!mr&&jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-40 bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"h-14 px-3 flex items-center justify-between",children:[Dt?jsxRuntimeExports.jsx("button",{onClick:()=>dt(-1),className:`
            w-10 h-10
            flex items-center justify-center
            rounded-lg
             bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            hover:bg-dashboard-hover-light
            dark:hover:bg-dashboard-hover-dark
            transition
          `,"aria-label":"Back",children:jsxRuntimeExports.jsx(ChevronLeft,{size:22})}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10"}),jsxRuntimeExports.jsx("button",{onClick:()=>Rr(!0),className:`
          w-10 h-10
          flex items-center justify-center
          rounded-lg
          hover:bg-dashboard-hover-light
          dark:hover:bg-dashboard-hover-dark
          transition
        `,"aria-label":"Menu",children:jsxRuntimeExports.jsx(Menu,{size:22})})]})}),!mr&&jr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-dashboard-bg-light dark:bg-dashboard-bg-dark overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold",children:"Menu"}),jsxRuntimeExports.jsx("button",{onClick:()=>Rr(!1),children:jsxRuntimeExports.jsx(X$5,{size:22})})]}),SIDEBAR_SECTIONS.map(Mr=>jsxRuntimeExports.jsxs("div",{className:"space-y-3 pb-4 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Mr.section}),Mr.items.filter(xr).filter(Tr=>!Tr.isSubItem||lr).map(Tr=>jsxRuntimeExports.jsx("button",{onClick:()=>{if(Tr.isParent){cr(Or=>!Or);return}if(pr&&!Tr.allowCommunity){nr(!0);return}dt(Tr.path),Rr(!1)},className:`
                      w-full
                      px-4 py-4
                      rounded-xl
                      text-left
                      text-dashboard-text-light dark:text-dashboard-text-dark
                      flex
                      border
                      transition
                      shadow-sm
                      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                      border-dashboard-border-light dark:border-dashboard-border-dark
                      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
                      active:scale-[0.98]
                      ${Tr.isSubItem?"opacity-90":""}
                    `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center w-full gap-3",children:[Tr.isSubItem&&jsxRuntimeExports.jsx("span",{className:"w-1 h-6 rounded-full bg-green/40"}),Tr.icon&&jsxRuntimeExports.jsx(Tr.icon,{size:18,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"}),jsxRuntimeExports.jsx("span",{className:`font-medium ${Tr.isSubItem?"text-sm opacity-90":""}`,children:Tr.label}),Tr.badge==="unreadCount"&&Jt>0&&jsxRuntimeExports.jsx("span",{className:"ml-auto mr-2 bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:Jt>9?"9+":Jt}),Tr.badge==="communityCount"&&er>0&&jsxRuntimeExports.jsx("span",{className:"ml-auto mr-2 bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full",children:er>9?"9+":er}),Tr.isParent&&jsxRuntimeExports.jsx(ChevronDown,{size:18,className:`ml-auto transition-transform ${lr?"rotate-180":""}`})]})},Tr.key))]},Mr.section)),jsxRuntimeExports.jsxs("div",{className:"pt-4 mt-4 border-t border-dashboard-border-light dark:border-dashboard-border-dark space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 px-2",children:[jsxRuntimeExports.jsx("img",{src:(Ft==null?void 0:Ft.profile_image)||defaultImage,alt:"Profile",className:"w-9 h-9 rounded-full object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark truncate",children:(Ft==null?void 0:Ft.name)||"Account"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ht((Ft==null?void 0:Ft.theme)==="dark"?"light":"dark"),Rr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl
      text-dashboard-muted-light dark:text-dashboard-muted-dark
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light dark:border-dashboard-border-dark
      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
      transition`,children:[(Ft==null?void 0:Ft.theme)==="dark"?jsxRuntimeExports.jsx(Sun,{size:18}):jsxRuntimeExports.jsx(Moon,{size:18}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:(Ft==null?void 0:Ft.theme)==="dark"?"Light mode":"Dark mode"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ut(),Rr(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl
                text-red-500
                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
                hover:bg-red-600/10
                transition`,children:[jsxRuntimeExports.jsx(LogOut,{size:20}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}),jsxRuntimeExports.jsx("main",{ref:$t,className:`
    flex-1
    ${mr?ir?"ml-[72px]":"ml-[260px]":""}
    px-4 pb-24
  `,children:et}),jsxRuntimeExports.jsx(UpgradeRequiredModal,{open:sr,onClose:()=>nr(!1)})]})}function OnboardingGuide({steps:et=[],onFinish:dt}){const[$t,kt]=reactExports.useState(0),[Tt,Dt]=reactExports.useState(null);reactExports.useEffect(()=>{if(et.length>0&&et[$t]){const Kt=document.querySelector(et[$t].target);if(Kt){const Yt=Kt.getBoundingClientRect();Dt(Yt)}}},[$t,et]);function Ft(){$t<et.length-1?kt($t+1):dt==null||dt()}function Ut(){$t>0&&kt($t-1)}if(!et.length||!Tt)return null;const Ht=et[$t];return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{className:"fixed inset-0 bg-black/70 z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute border-4 border-emerald-400 rounded-xl shadow-[0_0_25px_5px_rgba(16,185,129,0.6)] pointer-events-none",style:{top:Tt.top-8,left:Tt.left-8,width:Tt.width+16,height:Tt.height+16},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}}),jsxRuntimeExports.jsxs(motion.div,{className:"absolute bg-[#111827] text-white rounded-xl shadow-lg border border-emerald-500/30 p-4 w-72",style:{top:Tt.bottom+12,left:Tt.left},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[jsxRuntimeExports.jsx("p",{className:"text-sm mb-4 leading-relaxed",children:Ht.content}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("button",{onClick:Ut,disabled:$t===0,className:`px-3 py-1 rounded-lg border border-gray-600 hover:bg-gray-800 transition ${$t===0&&"opacity-50 cursor-not-allowed"}`,children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:Ft,className:"px-3 py-1 bg-emerald-500 hover:bg-emerald-600 text-black font-semibold rounded-lg transition",children:$t===et.length-1?"Finish":"Next"})]})]})]},"overlay")})}function BookGrid({books:et=[],onAddPrompt:dt,onGenerateNext:$t,onArchiveBook:kt}){const[Tt,Dt]=reactExports.useState(null),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(null),[Yt,Jt]=reactExports.useState(!1),{user:Zt,refreshUser:er}=useAuth(),rr=[{target:".book-title",content:"This displays the title of your book project."},{target:".pages-progress",content:"Displays how many pages youve used so far. Each book slot includes up to 750 total pages."},{target:".book-status",content:"Indicates your books current status."},{target:".book-actions",content:"Use these buttons to add chapters, preview, or continue your book."}];reactExports.useEffect(()=>{if(et.length>0&&Zt&&!Zt.has_completed_book_onboarding){const nr=setTimeout(()=>Jt(!0),800);return()=>clearTimeout(nr)}},[et,Zt]);function sr(nr){Kt(nr),Ut(!0)}return!Array.isArray(et)||et.length===0?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:et.map(nr=>{const or=!(nr.is_complete===1)&&nr.pages<750,lr=nr.is_draft===1||nr.draft_text&&nr.draft_text.trim().length>0;return jsxRuntimeExports.jsxs(motion.div,{transition:{type:"spring",stiffness:200,damping:20},className:`
              relative group
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              rounded-2xl p-4
              transition-all
              hover:border-green
              hover:shadow-[0_0_15px_rgba(0,255,150,0.25)]
            `,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"absolute -top-1/2 -left-1/2 w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent rotate-[25deg] opacity-0 group-hover:opacity-100 animate-glimmer"})}),jsxRuntimeExports.jsx("h3",{className:`book-title text-dashboard-text-light
dark:text-dashboard-text-dark text-sm font-semibold truncate mb-2`,children:nr.book_name||"Untitled Book"}),jsxRuntimeExports.jsx("div",{className:`flex items-center justify-between text-[11px] text-dashboard-muted-light
dark:text-dashboard-muted-dark
 mb-2`,children:jsxRuntimeExports.jsxs("span",{children:["Part ",nr.part_number||1]})}),jsxRuntimeExports.jsxs("div",{className:"pages-progress flex flex-col items-center my-3",children:[jsxRuntimeExports.jsx("div",{className:`
                  w-full rounded-full h-2
                  bg-dashboard-border-light
                  dark:bg-dashboard-border-dark
`,children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-green to-royalPurple h-2",style:{width:`${Math.min(nr.pages/750*100,100)}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[jsxRuntimeExports.jsxs("p",{className:`text-xs text-dashboard-muted-light
dark:text-dashboard-muted-dark
`,children:[nr.pages||0,"/750 pages used"]}),jsxRuntimeExports.jsx(Tooltip,{text:"Pages are counted across the entire book. You can write, edit, and export PDFs freely until you reach 750 total pages. Downloads do not lock your book."})]})]}),jsxRuntimeExports.jsx("div",{className:"book-status text-xs font-semibold text-center mt-3",children:nr.status==="pending"?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow italic",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 text-yellow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Generating"]}):nr.status==="failed"?jsxRuntimeExports.jsx("span",{className:`bg-red-500 text-dashboard-text-light
dark:text-dashboard-text-dark px-3 py-[3px] rounded-full`,children:"Failed"}):nr.is_complete===1?jsxRuntimeExports.jsx("span",{className:"bg-green text-black px-3 py-[3px] rounded-full",children:"Finalized"}):nr.pages>0?jsxRuntimeExports.jsx("span",{className:`bg-blue text-dashboard-text-light
dark:text-dashboard-text-dark px-3 py-[3px] rounded-full`,children:"In Progress"}):jsxRuntimeExports.jsx("span",{className:`
                  bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  px-3 py-[3px] rounded-full
                `,children:"Idle"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-3",children:nr.prompt?jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"text-headerGreen"}):jsxRuntimeExports.jsx(Timer,{size:18,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"})}),jsxRuntimeExports.jsx("div",{className:`text-[11px] text-dashboard-muted-light
dark:text-dashboard-muted-dark
 text-center mt-2 flex items-center justify-center gap-1`,children:nr.created_at_prompt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("span",{children:[new Date(nr.created_at_prompt).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," ",new Date(nr.created_at_prompt).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}),jsxRuntimeExports.jsx(Tooltip,{text:"This is the date and time this chapter was generated. Purchase dates are shown in Settings."})]}):jsxRuntimeExports.jsx("span",{className:"italic text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Not generated yet"})}),jsxRuntimeExports.jsxs("div",{className:"book-actions flex flex-col items-stretch gap-2 mt-4 w-full",children:[lr&&!nr.prompt&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt(nr.id,nr.part_number||1),className:`
                    w-full
                    bg-blue
                    text-white
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:opacity-90
                    transition
                    flex items-center justify-center gap-2
                  `,title:"Continue Draft",children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:"shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Continue Draft"})]}),!lr&&!nr.prompt&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt(nr.id,nr.part_number||1),className:`
                    w-full
                    bg-dashboard-hover-light
                    dark:bg-dashboard-hover-dark
                    text-dashboard-text-light
                    dark:text-dashboard-text-dark
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:bg-green hover:text-black
                    transition
                    flex items-center justify-center gap-2
                  `,title:"Create Chapter",children:[jsxRuntimeExports.jsx(Plus,{size:16,className:"shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Add Chapter"})]}),nr.pdf_url&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("button",{onClick:()=>sr(nr.id),className:`
                      w-full
                      bg-dashboard-hover-light
                      dark:bg-dashboard-hover-dark
                      text-dashboard-text-light
                      dark:text-dashboard-text-dark
                      rounded-lg py-2 text-sm
                      flex items-center justify-center gap-2
                      hover:opacity-90
                      transition
                    `,title:"View All Parts",children:[jsxRuntimeExports.jsx(Layers,{size:16}),jsxRuntimeExports.jsx("span",{children:"View All Parts"})]})}),nr.prompt&&or&&jsxRuntimeExports.jsxs("button",{onClick:()=>nr.pages>=750?sr(nr.id):$t(nr.id,(nr.part_number||1)+1),className:"w-full bg-bookBtnColor text-black rounded-lg py-2 text-sm font-semibold hover:opacity-90 transition-all flex items-center justify-center gap-2",title:"Continue Story",children:[jsxRuntimeExports.jsx(Rocket,{size:16}),jsxRuntimeExports.jsx("span",{children:nr.pages>=750?"Finish Book":`Continue Story (Part ${(nr.part_number||1)+1})`})]}),!nr.is_complete&&nr.status!=="pending"&&jsxRuntimeExports.jsx("button",{onClick:()=>kt(nr.id),className:`
                    w-full
                    border border-red-500/40
                    text-red-400
                    rounded-lg
                    py-2
                    text-sm
                    font-semibold
                    hover:bg-red-500/10
                    transition
                  `,title:"Archive Book",children:"Archive Book"})]})]},nr.id)})}),Tt&&jsxRuntimeExports.jsx(PDFPreviewModal,{fileUrl:Tt.url,fileTitle:Tt.title,partNumber:Tt.partNumber,sourceType:"book",onClose:()=>Dt(null)}),Ft&&jsxRuntimeExports.jsx(BookPartsModal,{bookId:Ht,onEditChapter:dt,onClose:()=>Ut(!1)}),Yt&&jsxRuntimeExports.jsx(OnboardingGuide,{steps:rr,onFinish:async()=>{try{localStorage.setItem("bookOnboardingComplete","true"),Jt(!1),await axiosInstance.post("/books/book-complete",{userId:Zt==null?void 0:Zt.id}),await er()}catch(nr){console.error(" Failed to save onboarding status:",nr)}}})]})}function BooksDashboardHeader({availableSlots:et,onCheckout:dt,onCreateBook:$t}){var Tt;const{user:kt}=useAuth();return kt?jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:`
            text-3xl font-bold normal-case
            text-dashboard-text-light
            dark:text-dashboard-text-dark
`,children:"My Books"}),jsxRuntimeExports.jsxs("div",{className:`
            text-sm mt-1
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
          `,children:["Welcome,"," ",jsxRuntimeExports.jsx("span",{className:`
              font-semibold
              text-dashboard-text-light
              dark:text-dashboard-text-dark
            `,children:((Tt=kt==null?void 0:kt.name)==null?void 0:Tt.split(" ")[0])||"Author"})]}),jsxRuntimeExports.jsxs("p",{className:`
            mt-2
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
          `,children:["You currently have ",et," book slots remaining."]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col w-full md:w-auto md:flex-row items-stretch md:items-start gap-3",children:[et>0&&jsxRuntimeExports.jsx("button",{onClick:$t,className:`
              w-full md:w-auto
              px-4 py-2.5
              rounded-lg
              bg-green text-black font-semibold
              hover:opacity-90 transition
            `,children:"New Book"}),jsxRuntimeExports.jsxs(Link$2,{to:"/docs/authors-assistant",className:`
            inline-flex items-center justify-center gap-2
            w-full md:w-auto
            rounded-lg px-4 py-3 text-sm transition
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            bg-dashboard-hover-light
            dark:bg-dashboard-hover-dark
            text-black dark:text-green
            hover:opacity-90
          `,children:[jsxRuntimeExports.jsx(FilePen,{className:"w-4 h-4 text-black dark:text-green"}),"Docs",jsxRuntimeExports.jsx(ExternalLink,{className:"w-3.5 h-3.5"})]})]})]}),et===0&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-6 py-3 rounded-lg bg-gradient-to-r from-green to-royalPurple text-white font-semibold hover:opacity-90 transition shadow-lg",children:"Purchase More Slots"})})]}):null}function BooksDashboard(){const{accessToken:et,authLoading:dt,user:$t,refreshUser:kt}=useAuth(),{books:Tt,setBooks:Dt,fetchBooks:Ft,loading:Ut}=useBooks(),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(null),[Zt,er]=reactExports.useState(!1),[rr,sr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(1),[or,lr]=reactExports.useState(!1),[cr,dr]=reactExports.useState(null),ur=useNavigate(),pr=12,mr=[...Tt].sort((Yr,es)=>new Date(es.created_at)-new Date(Yr.created_at)),jr=Math.ceil(mr.length/pr),Rr=(nr-1)*pr,xr=mr.slice(Rr,Rr+pr);async function kr(Yr,es=1){let rs=Tt.find(gs=>gs.id===Yr);try{const gs=await axiosInstance.get(`/books/${Yr}`);gs.data&&(rs={...rs,...gs.data})}catch(gs){console.error(" Failed to fetch book by ID:",gs),y$4.error("Could not refresh book info  using cached version")}if(!rs)return;const Wr=rs.book_name||rs.title||"",Xr=!rs.author_name||rs.author_name.trim()==="",ns=!Wr||Wr.trim()===""||Wr==="Untitled"||Wr==="Untitled Book";if((Xr||ns)&&!rs.is_draft){Jt({id:Yr,part_number:es}),lr(!0);return}Jt({id:rs.id,part_number:es,book_name:Wr,author_name:rs.author_name||"",book_type:rs.bookType||rs.book_type||"fiction"}),Kt(!0)}function Mr(Yr,es){Dt(rs=>rs.map(Wr=>Wr.id===Yr?{...Wr,prompt:es,status:"pending"}:Wr)),setTimeout(Ft,3e3)}function Tr({bookId:Yr,bookName:es,authorName:rs,bookType:Wr}){dr({bookName:es,authorName:rs,bookType:Wr}),Jt({id:Yr,part_number:1,book_name:es,author_name:rs,book_type:Wr}),lr(!1),Kt(!0)}async function Or(){var Yr;try{const es=await axiosInstance.post("/books/get-new-book");await Ft()}catch(es){if(((Yr=es.response)==null?void 0:Yr.status)===400){sr(!0);return}console.error("Failed to create new book",es),y$4.error("Could not create a new book")}}async function _r(){try{const Yr=await kt();Yr&&(setSubscriptionStatus(Yr.subscription_status),await Ft())}catch(Yr){console.error("Failed to refresh slots:",Yr)}}async function Pr(Yr){try{await axiosInstance.post(`/books/${Yr}/archive`),Dt(es=>es.filter(rs=>rs.id!==Yr)),await _r()}catch(es){console.error("Failed to archive book",es),y$4.error("Failed to archive book")}}if(dt||!$t)return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LoadingState,{label:"Checking subscription"})});if(!(!!($t!=null&&$t.authors_assistant_override)||($t==null?void 0:$t.subscription_status)==="active"&&($t==null?void 0:$t.has_book)===1))return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(EmptyState,{type:"subscription",onCheckout:()=>ur("/plans"),title:"Authors Assistant is not active",description:"Upgrade or activate Authors Assistant to continue writing."})});const wr=3,zr=Tt.filter(Yr=>Yr.is_complete===0&&!Yr.deleted_at).length,Hr=Math.max(wr-zr,0);return jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:`
    flex flex-col min-h-screen
    px-4 lg:px-8 py-6
    bg-dashboard-bg-light
    dark:bg-dashboard-bg-dark
  `,children:[jsxRuntimeExports.jsx(BooksDashboardHeader,{activeBookCount:zr,availableSlots:Hr,onCheckout:()=>ur("/plans"),onCreateBook:Or}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:Ut?jsxRuntimeExports.jsx(LoadingState,{label:"Loading your books..."}):Tt.length===0?jsxRuntimeExports.jsx(EmptyState,{onCheckout:()=>ur("/plans"),type:"book"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BookGrid,{books:xr,onAddPrompt:(Yr,es)=>kr(Yr,es),onGenerateNext:(Yr,es)=>kr(Yr,es),onArchiveBook:Pr}),jsxRuntimeExports.jsx(BookCardList,{books:xr,onAddPrompt:(Yr,es)=>kr(Yr,es),onGenerateNext:(Yr,es)=>kr(Yr,es),onArchiveBook:Pr})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-auto pt-6",children:[jsxRuntimeExports.jsx(PaginationControls,{currentPage:nr,totalPages:jr,onPageChange:ir}),jsxRuntimeExports.jsx(SupportTab,{})]}),or&&Yt&&jsxRuntimeExports.jsx(NewBookModal,{accessToken:et,onCreate:Tr,onClose:()=>lr(!1)}),Yt&&jsxRuntimeExports.jsx(BookPromptModal,{isOpen:Ht,onClose:()=>Kt(!1),bookId:Yt.id,partNumber:Yt.part_number,accessToken:et,setShowGenerating:er,onSubmitted:Mr,onCompleted:()=>{Ft(),er(!1)},initialBookData:{bookName:(cr==null?void 0:cr.bookName)||Yt.book_name||Yt.title||"",authorName:(cr==null?void 0:cr.authorName)||Yt.author_name||"",bookType:(cr==null?void 0:cr.bookType)||Yt.book_type||"fiction"}}),jsxRuntimeExports.jsx(OutOfSlotsModal,{open:rr,onClose:()=>sr(!1),onRefresh:_r,context:"books"}),jsxRuntimeExports.jsx(GenerationOverlay,{visible:Zt,type:"book",onClose:()=>er(!1)})]})})}var lib={},propTypes$2={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function et(kt,Tt,Dt,Ft,Ut,Ht){if(Ht!==ReactPropTypesSecret){var Kt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Kt.name="Invariant Violation",Kt}}et.isRequired=et;function dt(){return et}var $t={array:et,bigint:et,bool:et,func:et,number:et,object:et,string:et,symbol:et,any:et,arrayOf:dt,element:et,elementType:et,instanceOf:dt,node:et,objectOf:dt,oneOf:dt,oneOfType:dt,shape:dt,exact:dt,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return $t.PropTypes=$t,$t};propTypes$2.exports=factoryWithThrowingShims();var propTypesExports=propTypes$2.exports,ErrorCorrectLevel={L:1,M:0,Q:3,H:2},mode$1={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},mode=mode$1;function QR8bitByte(et){this.mode=mode.MODE_8BIT_BYTE,this.data=et}QR8bitByte.prototype={getLength:function(et){return this.data.length},write:function(et){for(var dt=0;dt<this.data.length;dt++)et.put(this.data.charCodeAt(dt),8)}};var _8BitByte=QR8bitByte,ECL=ErrorCorrectLevel;function QRRSBlock(et,dt){this.totalCount=et,this.dataCount=dt}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(et,dt){var $t=QRRSBlock.getRsBlockTable(et,dt);if($t==null)throw new Error("bad rs block @ typeNumber:"+et+"/errorCorrectLevel:"+dt);for(var kt=$t.length/3,Tt=new Array,Dt=0;Dt<kt;Dt++)for(var Ft=$t[Dt*3+0],Ut=$t[Dt*3+1],Ht=$t[Dt*3+2],Kt=0;Kt<Ft;Kt++)Tt.push(new QRRSBlock(Ut,Ht));return Tt};QRRSBlock.getRsBlockTable=function(et,dt){switch(dt){case ECL.L:return QRRSBlock.RS_BLOCK_TABLE[(et-1)*4+0];case ECL.M:return QRRSBlock.RS_BLOCK_TABLE[(et-1)*4+1];case ECL.Q:return QRRSBlock.RS_BLOCK_TABLE[(et-1)*4+2];case ECL.H:return QRRSBlock.RS_BLOCK_TABLE[(et-1)*4+3];default:return}};var RSBlock$1=QRRSBlock;function QRBitBuffer(){this.buffer=new Array,this.length=0}QRBitBuffer.prototype={get:function(et){var dt=Math.floor(et/8);return(this.buffer[dt]>>>7-et%8&1)==1},put:function(et,dt){for(var $t=0;$t<dt;$t++)this.putBit((et>>>dt-$t-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(et){var dt=Math.floor(this.length/8);this.buffer.length<=dt&&this.buffer.push(0),et&&(this.buffer[dt]|=128>>>this.length%8),this.length++}};var BitBuffer$1=QRBitBuffer,QRMath={glog:function(et){if(et<1)throw new Error("glog("+et+")");return QRMath.LOG_TABLE[et]},gexp:function(et){for(;et<0;)et+=255;for(;et>=256;)et-=255;return QRMath.EXP_TABLE[et]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i$3=0;i$3<8;i$3++)QRMath.EXP_TABLE[i$3]=1<<i$3;for(var i$3=8;i$3<256;i$3++)QRMath.EXP_TABLE[i$3]=QRMath.EXP_TABLE[i$3-4]^QRMath.EXP_TABLE[i$3-5]^QRMath.EXP_TABLE[i$3-6]^QRMath.EXP_TABLE[i$3-8];for(var i$3=0;i$3<255;i$3++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i$3]]=i$3;var math$2=QRMath,math$1=math$2;function QRPolynomial(et,dt){if(et.length==null)throw new Error(et.length+"/"+dt);for(var $t=0;$t<et.length&&et[$t]==0;)$t++;this.num=new Array(et.length-$t+dt);for(var kt=0;kt<et.length-$t;kt++)this.num[kt]=et[kt+$t]}QRPolynomial.prototype={get:function(et){return this.num[et]},getLength:function(){return this.num.length},multiply:function(et){for(var dt=new Array(this.getLength()+et.getLength()-1),$t=0;$t<this.getLength();$t++)for(var kt=0;kt<et.getLength();kt++)dt[$t+kt]^=math$1.gexp(math$1.glog(this.get($t))+math$1.glog(et.get(kt)));return new QRPolynomial(dt,0)},mod:function(et){if(this.getLength()-et.getLength()<0)return this;for(var dt=math$1.glog(this.get(0))-math$1.glog(et.get(0)),$t=new Array(this.getLength()),kt=0;kt<this.getLength();kt++)$t[kt]=this.get(kt);for(var kt=0;kt<et.getLength();kt++)$t[kt]^=math$1.gexp(math$1.glog(et.get(kt))+dt);return new QRPolynomial($t,0).mod(et)}};var Polynomial$2=QRPolynomial,Mode=mode$1,Polynomial$1=Polynomial$2,math=math$2,QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(et){for(var dt=et<<10;QRUtil.getBCHDigit(dt)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)dt^=QRUtil.G15<<QRUtil.getBCHDigit(dt)-QRUtil.getBCHDigit(QRUtil.G15);return(et<<10|dt)^QRUtil.G15_MASK},getBCHTypeNumber:function(et){for(var dt=et<<12;QRUtil.getBCHDigit(dt)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)dt^=QRUtil.G18<<QRUtil.getBCHDigit(dt)-QRUtil.getBCHDigit(QRUtil.G18);return et<<12|dt},getBCHDigit:function(et){for(var dt=0;et!=0;)dt++,et>>>=1;return dt},getPatternPosition:function(et){return QRUtil.PATTERN_POSITION_TABLE[et-1]},getMask:function(et,dt,$t){switch(et){case QRMaskPattern.PATTERN000:return(dt+$t)%2==0;case QRMaskPattern.PATTERN001:return dt%2==0;case QRMaskPattern.PATTERN010:return $t%3==0;case QRMaskPattern.PATTERN011:return(dt+$t)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(dt/2)+Math.floor($t/3))%2==0;case QRMaskPattern.PATTERN101:return dt*$t%2+dt*$t%3==0;case QRMaskPattern.PATTERN110:return(dt*$t%2+dt*$t%3)%2==0;case QRMaskPattern.PATTERN111:return(dt*$t%3+(dt+$t)%2)%2==0;default:throw new Error("bad maskPattern:"+et)}},getErrorCorrectPolynomial:function(et){for(var dt=new Polynomial$1([1],0),$t=0;$t<et;$t++)dt=dt.multiply(new Polynomial$1([1,math.gexp($t)],0));return dt},getLengthInBits:function(et,dt){if(1<=dt&&dt<10)switch(et){case Mode.MODE_NUMBER:return 10;case Mode.MODE_ALPHA_NUM:return 9;case Mode.MODE_8BIT_BYTE:return 8;case Mode.MODE_KANJI:return 8;default:throw new Error("mode:"+et)}else if(dt<27)switch(et){case Mode.MODE_NUMBER:return 12;case Mode.MODE_ALPHA_NUM:return 11;case Mode.MODE_8BIT_BYTE:return 16;case Mode.MODE_KANJI:return 10;default:throw new Error("mode:"+et)}else if(dt<41)switch(et){case Mode.MODE_NUMBER:return 14;case Mode.MODE_ALPHA_NUM:return 13;case Mode.MODE_8BIT_BYTE:return 16;case Mode.MODE_KANJI:return 12;default:throw new Error("mode:"+et)}else throw new Error("type:"+dt)},getLostPoint:function(et){for(var dt=et.getModuleCount(),$t=0,kt=0;kt<dt;kt++)for(var Tt=0;Tt<dt;Tt++){for(var Dt=0,Ft=et.isDark(kt,Tt),Ut=-1;Ut<=1;Ut++)if(!(kt+Ut<0||dt<=kt+Ut))for(var Ht=-1;Ht<=1;Ht++)Tt+Ht<0||dt<=Tt+Ht||Ut==0&&Ht==0||Ft==et.isDark(kt+Ut,Tt+Ht)&&Dt++;Dt>5&&($t+=3+Dt-5)}for(var kt=0;kt<dt-1;kt++)for(var Tt=0;Tt<dt-1;Tt++){var Kt=0;et.isDark(kt,Tt)&&Kt++,et.isDark(kt+1,Tt)&&Kt++,et.isDark(kt,Tt+1)&&Kt++,et.isDark(kt+1,Tt+1)&&Kt++,(Kt==0||Kt==4)&&($t+=3)}for(var kt=0;kt<dt;kt++)for(var Tt=0;Tt<dt-6;Tt++)et.isDark(kt,Tt)&&!et.isDark(kt,Tt+1)&&et.isDark(kt,Tt+2)&&et.isDark(kt,Tt+3)&&et.isDark(kt,Tt+4)&&!et.isDark(kt,Tt+5)&&et.isDark(kt,Tt+6)&&($t+=40);for(var Tt=0;Tt<dt;Tt++)for(var kt=0;kt<dt-6;kt++)et.isDark(kt,Tt)&&!et.isDark(kt+1,Tt)&&et.isDark(kt+2,Tt)&&et.isDark(kt+3,Tt)&&et.isDark(kt+4,Tt)&&!et.isDark(kt+5,Tt)&&et.isDark(kt+6,Tt)&&($t+=40);for(var Yt=0,Tt=0;Tt<dt;Tt++)for(var kt=0;kt<dt;kt++)et.isDark(kt,Tt)&&Yt++;var Jt=Math.abs(100*Yt/dt/dt-50)/5;return $t+=Jt*10,$t}},util$1=QRUtil,BitByte=_8BitByte,RSBlock=RSBlock$1,BitBuffer=BitBuffer$1,util=util$1,Polynomial=Polynomial$2;function QRCode$1(et,dt){this.typeNumber=et,this.errorCorrectLevel=dt,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var proto=QRCode$1.prototype;proto.addData=function(et){var dt=new BitByte(et);this.dataList.push(dt),this.dataCache=null};proto.isDark=function(et,dt){if(et<0||this.moduleCount<=et||dt<0||this.moduleCount<=dt)throw new Error(et+","+dt);return this.modules[et][dt]};proto.getModuleCount=function(){return this.moduleCount};proto.make=function(){if(this.typeNumber<1){var et=1;for(et=1;et<40;et++){for(var dt=RSBlock.getRSBlocks(et,this.errorCorrectLevel),$t=new BitBuffer,kt=0,Tt=0;Tt<dt.length;Tt++)kt+=dt[Tt].dataCount;for(var Tt=0;Tt<this.dataList.length;Tt++){var Dt=this.dataList[Tt];$t.put(Dt.mode,4),$t.put(Dt.getLength(),util.getLengthInBits(Dt.mode,et)),Dt.write($t)}if($t.getLengthInBits()<=kt*8)break}this.typeNumber=et}this.makeImpl(!1,this.getBestMaskPattern())};proto.makeImpl=function(et,dt){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var $t=0;$t<this.moduleCount;$t++){this.modules[$t]=new Array(this.moduleCount);for(var kt=0;kt<this.moduleCount;kt++)this.modules[$t][kt]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(et,dt),this.typeNumber>=7&&this.setupTypeNumber(et),this.dataCache==null&&(this.dataCache=QRCode$1.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,dt)};proto.setupPositionProbePattern=function(et,dt){for(var $t=-1;$t<=7;$t++)if(!(et+$t<=-1||this.moduleCount<=et+$t))for(var kt=-1;kt<=7;kt++)dt+kt<=-1||this.moduleCount<=dt+kt||(0<=$t&&$t<=6&&(kt==0||kt==6)||0<=kt&&kt<=6&&($t==0||$t==6)||2<=$t&&$t<=4&&2<=kt&&kt<=4?this.modules[et+$t][dt+kt]=!0:this.modules[et+$t][dt+kt]=!1)};proto.getBestMaskPattern=function(){for(var et=0,dt=0,$t=0;$t<8;$t++){this.makeImpl(!0,$t);var kt=util.getLostPoint(this);($t==0||et>kt)&&(et=kt,dt=$t)}return dt};proto.createMovieClip=function(et,dt,$t){var kt=et.createEmptyMovieClip(dt,$t),Tt=1;this.make();for(var Dt=0;Dt<this.modules.length;Dt++)for(var Ft=Dt*Tt,Ut=0;Ut<this.modules[Dt].length;Ut++){var Ht=Ut*Tt,Kt=this.modules[Dt][Ut];Kt&&(kt.beginFill(0,100),kt.moveTo(Ht,Ft),kt.lineTo(Ht+Tt,Ft),kt.lineTo(Ht+Tt,Ft+Tt),kt.lineTo(Ht,Ft+Tt),kt.endFill())}return kt};proto.setupTimingPattern=function(){for(var et=8;et<this.moduleCount-8;et++)this.modules[et][6]==null&&(this.modules[et][6]=et%2==0);for(var dt=8;dt<this.moduleCount-8;dt++)this.modules[6][dt]==null&&(this.modules[6][dt]=dt%2==0)};proto.setupPositionAdjustPattern=function(){for(var et=util.getPatternPosition(this.typeNumber),dt=0;dt<et.length;dt++)for(var $t=0;$t<et.length;$t++){var kt=et[dt],Tt=et[$t];if(this.modules[kt][Tt]==null)for(var Dt=-2;Dt<=2;Dt++)for(var Ft=-2;Ft<=2;Ft++)Dt==-2||Dt==2||Ft==-2||Ft==2||Dt==0&&Ft==0?this.modules[kt+Dt][Tt+Ft]=!0:this.modules[kt+Dt][Tt+Ft]=!1}};proto.setupTypeNumber=function(et){for(var dt=util.getBCHTypeNumber(this.typeNumber),$t=0;$t<18;$t++){var kt=!et&&(dt>>$t&1)==1;this.modules[Math.floor($t/3)][$t%3+this.moduleCount-8-3]=kt}for(var $t=0;$t<18;$t++){var kt=!et&&(dt>>$t&1)==1;this.modules[$t%3+this.moduleCount-8-3][Math.floor($t/3)]=kt}};proto.setupTypeInfo=function(et,dt){for(var $t=this.errorCorrectLevel<<3|dt,kt=util.getBCHTypeInfo($t),Tt=0;Tt<15;Tt++){var Dt=!et&&(kt>>Tt&1)==1;Tt<6?this.modules[Tt][8]=Dt:Tt<8?this.modules[Tt+1][8]=Dt:this.modules[this.moduleCount-15+Tt][8]=Dt}for(var Tt=0;Tt<15;Tt++){var Dt=!et&&(kt>>Tt&1)==1;Tt<8?this.modules[8][this.moduleCount-Tt-1]=Dt:Tt<9?this.modules[8][15-Tt-1+1]=Dt:this.modules[8][15-Tt-1]=Dt}this.modules[this.moduleCount-8][8]=!et};proto.mapData=function(et,dt){for(var $t=-1,kt=this.moduleCount-1,Tt=7,Dt=0,Ft=this.moduleCount-1;Ft>0;Ft-=2)for(Ft==6&&Ft--;;){for(var Ut=0;Ut<2;Ut++)if(this.modules[kt][Ft-Ut]==null){var Ht=!1;Dt<et.length&&(Ht=(et[Dt]>>>Tt&1)==1);var Kt=util.getMask(dt,kt,Ft-Ut);Kt&&(Ht=!Ht),this.modules[kt][Ft-Ut]=Ht,Tt--,Tt==-1&&(Dt++,Tt=7)}if(kt+=$t,kt<0||this.moduleCount<=kt){kt-=$t,$t=-$t;break}}};QRCode$1.PAD0=236;QRCode$1.PAD1=17;QRCode$1.createData=function(et,dt,$t){for(var kt=RSBlock.getRSBlocks(et,dt),Tt=new BitBuffer,Dt=0;Dt<$t.length;Dt++){var Ft=$t[Dt];Tt.put(Ft.mode,4),Tt.put(Ft.getLength(),util.getLengthInBits(Ft.mode,et)),Ft.write(Tt)}for(var Ut=0,Dt=0;Dt<kt.length;Dt++)Ut+=kt[Dt].dataCount;if(Tt.getLengthInBits()>Ut*8)throw new Error("code length overflow. ("+Tt.getLengthInBits()+">"+Ut*8+")");for(Tt.getLengthInBits()+4<=Ut*8&&Tt.put(0,4);Tt.getLengthInBits()%8!=0;)Tt.putBit(!1);for(;!(Tt.getLengthInBits()>=Ut*8||(Tt.put(QRCode$1.PAD0,8),Tt.getLengthInBits()>=Ut*8));)Tt.put(QRCode$1.PAD1,8);return QRCode$1.createBytes(Tt,kt)};QRCode$1.createBytes=function(et,dt){for(var $t=0,kt=0,Tt=0,Dt=new Array(dt.length),Ft=new Array(dt.length),Ut=0;Ut<dt.length;Ut++){var Ht=dt[Ut].dataCount,Kt=dt[Ut].totalCount-Ht;kt=Math.max(kt,Ht),Tt=Math.max(Tt,Kt),Dt[Ut]=new Array(Ht);for(var Yt=0;Yt<Dt[Ut].length;Yt++)Dt[Ut][Yt]=255&et.buffer[Yt+$t];$t+=Ht;var Jt=util.getErrorCorrectPolynomial(Kt),Zt=new Polynomial(Dt[Ut],Jt.getLength()-1),er=Zt.mod(Jt);Ft[Ut]=new Array(Jt.getLength()-1);for(var Yt=0;Yt<Ft[Ut].length;Yt++){var rr=Yt+er.getLength()-Ft[Ut].length;Ft[Ut][Yt]=rr>=0?er.get(rr):0}}for(var sr=0,Yt=0;Yt<dt.length;Yt++)sr+=dt[Yt].totalCount;for(var nr=new Array(sr),ir=0,Yt=0;Yt<kt;Yt++)for(var Ut=0;Ut<dt.length;Ut++)Yt<Dt[Ut].length&&(nr[ir++]=Dt[Ut][Yt]);for(var Yt=0;Yt<Tt;Yt++)for(var Ut=0;Ut<dt.length;Ut++)Yt<Ft[Ut].length&&(nr[ir++]=Ft[Ut][Yt]);return nr};var QRCode_1=QRCode$1,QRCodeSvg$1={};Object.defineProperty(QRCodeSvg$1,"__esModule",{value:!0});var _extends$1=Object.assign||function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)Object.prototype.hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},_propTypes$1=propTypesExports,_propTypes2$1=_interopRequireDefault$1(_propTypes$1),_react$1=reactExports,_react2$1=_interopRequireDefault$1(_react$1);function _interopRequireDefault$1(et){return et&&et.__esModule?et:{default:et}}function _objectWithoutProperties$1(et,dt){var $t={};for(var kt in et)dt.indexOf(kt)>=0||Object.prototype.hasOwnProperty.call(et,kt)&&($t[kt]=et[kt]);return $t}var propTypes$1={bgColor:_propTypes2$1.default.oneOfType([_propTypes2$1.default.object,_propTypes2$1.default.string]).isRequired,bgD:_propTypes2$1.default.string.isRequired,fgColor:_propTypes2$1.default.oneOfType([_propTypes2$1.default.object,_propTypes2$1.default.string]).isRequired,fgD:_propTypes2$1.default.string.isRequired,size:_propTypes2$1.default.number.isRequired,title:_propTypes2$1.default.string,viewBoxSize:_propTypes2$1.default.number.isRequired,xmlns:_propTypes2$1.default.string},QRCodeSvg=(0,_react$1.forwardRef)(function(et,dt){var $t=et.bgColor,kt=et.bgD,Tt=et.fgD,Dt=et.fgColor,Ft=et.size,Ut=et.title,Ht=et.viewBoxSize,Kt=et.xmlns,Yt=Kt===void 0?"http://www.w3.org/2000/svg":Kt,Jt=_objectWithoutProperties$1(et,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return _react2$1.default.createElement("svg",_extends$1({},Jt,{height:Ft,ref:dt,viewBox:"0 0 "+Ht+" "+Ht,width:Ft,xmlns:Yt}),Ut?_react2$1.default.createElement("title",null,Ut):null,_react2$1.default.createElement("path",{d:kt,fill:$t}),_react2$1.default.createElement("path",{d:Tt,fill:Dt}))});QRCodeSvg.displayName="QRCodeSvg";QRCodeSvg.propTypes=propTypes$1;QRCodeSvg$1.default=QRCodeSvg;Object.defineProperty(lib,"__esModule",{value:!0});lib.QRCode=void 0;var _extends=Object.assign||function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)Object.prototype.hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},_propTypes=propTypesExports,_propTypes2=_interopRequireDefault(_propTypes),_ErrorCorrectLevel=ErrorCorrectLevel,_ErrorCorrectLevel2=_interopRequireDefault(_ErrorCorrectLevel),_QRCode=QRCode_1,_QRCode2=_interopRequireDefault(_QRCode),_react=reactExports,_react2=_interopRequireDefault(_react),_QRCodeSvg=QRCodeSvg$1,_QRCodeSvg2=_interopRequireDefault(_QRCodeSvg);function _interopRequireDefault(et){return et&&et.__esModule?et:{default:et}}function _objectWithoutProperties(et,dt){var $t={};for(var kt in et)dt.indexOf(kt)>=0||Object.prototype.hasOwnProperty.call(et,kt)&&($t[kt]=et[kt]);return $t}var propTypes={bgColor:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.string]),fgColor:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.string]),level:_propTypes2.default.string,size:_propTypes2.default.number,value:_propTypes2.default.string.isRequired},QRCode=(0,_react.forwardRef)(function(et,dt){var $t=et.bgColor,kt=$t===void 0?"#FFFFFF":$t,Tt=et.fgColor,Dt=Tt===void 0?"#000000":Tt,Ft=et.level,Ut=Ft===void 0?"L":Ft,Ht=et.size,Kt=Ht===void 0?256:Ht,Yt=et.value,Jt=_objectWithoutProperties(et,["bgColor","fgColor","level","size","value"]),Zt=new _QRCode2.default(-1,_ErrorCorrectLevel2.default[Ut]);Zt.addData(Yt),Zt.make();var er=Zt.modules;return _react2.default.createElement(_QRCodeSvg2.default,_extends({},Jt,{bgColor:kt,bgD:er.map(function(rr,sr){return rr.map(function(nr,ir){return nr?"":"M "+ir+" "+sr+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:Dt,fgD:er.map(function(rr,sr){return rr.map(function(nr,ir){return nr?"M "+ir+" "+sr+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:dt,size:Kt,viewBoxSize:er.length}))});lib.QRCode=QRCode;QRCode.displayName="QRCode";QRCode.propTypes=propTypes;var _default=lib.default=QRCode;function _typeof(et){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(dt){return typeof dt}:function(dt){return dt&&typeof Symbol=="function"&&dt.constructor===Symbol&&dt!==Symbol.prototype?"symbol":typeof dt},_typeof(et)}function toPrimitive(et,dt){if(_typeof(et)!="object"||!et)return et;var $t=et[Symbol.toPrimitive];if($t!==void 0){var kt=$t.call(et,dt||"default");if(_typeof(kt)!="object")return kt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(dt==="string"?String:Number)(et)}function toPropertyKey(et){var dt=toPrimitive(et,"string");return _typeof(dt)=="symbol"?dt:dt+""}function _defineProperty$1(et,dt,$t){return(dt=toPropertyKey(dt))in et?Object.defineProperty(et,dt,{value:$t,enumerable:!0,configurable:!0,writable:!0}):et[dt]=$t,et}function _objectWithoutPropertiesLoose(et,dt){if(et==null)return{};var $t={};for(var kt in et)if({}.hasOwnProperty.call(et,kt)){if(dt.includes(kt))continue;$t[kt]=et[kt]}return $t}var imagePromiseFactory=function(et){var dt=et.decode,$t=dt===void 0?!0:dt,kt=et.crossOrigin,Tt=kt===void 0?"":kt;return function(Dt){return new Promise(function(Ft,Ut){var Ht=new Image;Tt&&(Ht.crossOrigin=Tt),Ht.onload=function(){$t&&Ht.decode?Ht.decode().then(Ft).catch(Ut):Ft()},Ht.onerror=Ut,Ht.src=Dt})}};function ownKeys$1(et,dt){var $t=Object.keys(et);if(Object.getOwnPropertySymbols){var kt=Object.getOwnPropertySymbols(et);dt&&(kt=kt.filter(function(Tt){return Object.getOwnPropertyDescriptor(et,Tt).enumerable})),$t.push.apply($t,kt)}return $t}function _objectSpread$1(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt]!=null?arguments[dt]:{};dt%2?ownKeys$1(Object($t),!0).forEach(function(kt){_defineProperty$1(et,kt,$t[kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors($t)):ownKeys$1(Object($t)).forEach(function(kt){Object.defineProperty(et,kt,Object.getOwnPropertyDescriptor($t,kt))})}return et}var removeBlankArrayElements=function et(dt){return dt.filter(function($t){return $t})},stringToArray=function et(dt){return Array.isArray(dt)?dt:[dt]},cache={},promiseFind=function et(dt,$t){var kt=!1;return new Promise(function(Tt,Dt){var Ft=function(Ht){return $t(Ht).then(function(){kt=!0,Tt(Ht)})};dt.reduce(function(Ut,Ht){return Ut.catch(function(){if(!kt)return Ft(Ht)})},Ft(dt.shift())).catch(Dt)})};function useImage(et){var dt=et.srcList,$t=et.imgPromise,kt=$t===void 0?imagePromiseFactory({decode:!0}):$t,Tt=et.useSuspense,Dt=Tt===void 0?!0:Tt,Ft=reactExports.useState(!1),Ut=Ft[1],Ht=removeBlankArrayElements(stringToArray(dt)),Kt=Ht.join("");if(cache[Kt]||(cache[Kt]={promise:promiseFind(Ht,kt),cache:"pending",error:null}),cache[Kt].cache==="resolved")return{src:cache[Kt].src,isLoading:!1,error:null};if(cache[Kt].cache==="rejected"){if(Dt)throw cache[Kt].error;return{isLoading:!1,error:cache[Kt].error,src:void 0}}if(cache[Kt].promise.then(function(Yt){cache[Kt]=_objectSpread$1(_objectSpread$1({},cache[Kt]),{},{cache:"resolved",src:Yt}),Dt||Ut(Kt)}).catch(function(Yt){cache[Kt]=_objectSpread$1(_objectSpread$1({},cache[Kt]),{},{cache:"rejected",error:Yt}),Dt||Ut(Kt)}),Dt)throw cache[Kt].promise;return{isLoading:!0,src:void 0,error:null}}var _excluded=["decode","src","loader","unloader","container","loaderContainer","unloaderContainer","imgPromise","crossorigin","useSuspense"];function ownKeys(et,dt){var $t=Object.keys(et);if(Object.getOwnPropertySymbols){var kt=Object.getOwnPropertySymbols(et);dt&&(kt=kt.filter(function(Tt){return Object.getOwnPropertyDescriptor(et,Tt).enumerable})),$t.push.apply($t,kt)}return $t}function _objectSpread(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt]!=null?arguments[dt]:{};dt%2?ownKeys(Object($t),!0).forEach(function(kt){_defineProperty$1(et,kt,$t[kt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors($t)):ownKeys(Object($t)).forEach(function(kt){Object.defineProperty(et,kt,Object.getOwnPropertyDescriptor($t,kt))})}return et}var passthroughContainer=function et(dt){return dt};function Img(et){var dt=et.decode,$t=dt===void 0?!0:dt,kt=et.src,Tt=kt===void 0?[]:kt,Dt=et.loader,Ft=Dt===void 0?null:Dt,Ut=et.unloader,Ht=Ut===void 0?null:Ut,Kt=et.container,Yt=Kt===void 0?passthroughContainer:Kt,Jt=et.loaderContainer,Zt=Jt===void 0?passthroughContainer:Jt,er=et.unloaderContainer,rr=er===void 0?passthroughContainer:er,sr=et.imgPromise,nr=et.crossorigin,ir=et.useSuspense,or=ir===void 0?!1:ir,lr=_objectWithoutPropertiesLoose(et,_excluded);sr=sr||imagePromiseFactory({decode:$t,crossOrigin:nr});var cr=useImage({srcList:Tt,imgPromise:sr,useSuspense:or}),dr=cr.src,ur=cr.isLoading;return dr?Yt(React$2.createElement("img",_objectSpread({src:dr},lr))):!or&&ur?Zt(Ft):!or&&Ht?rr(Ht):null}var extendStatics=function(et,dt){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($t,kt){$t.__proto__=kt}||function($t,kt){for(var Tt in kt)Object.prototype.hasOwnProperty.call(kt,Tt)&&($t[Tt]=kt[Tt])},extendStatics(et,dt)};function __extends(et,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");extendStatics(et,dt);function $t(){this.constructor=et}et.prototype=dt===null?Object.create(dt):($t.prototype=dt.prototype,new $t)}var __assign=function(){return __assign=Object.assign||function(dt){for(var $t,kt=1,Tt=arguments.length;kt<Tt;kt++){$t=arguments[kt];for(var Dt in $t)Object.prototype.hasOwnProperty.call($t,Dt)&&(dt[Dt]=$t[Dt])}return dt},__assign.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;var _populated=!1,_ie,_firefox,_opera,_webkit,_chrome,_ie_real_version,_osx,_windows,_linux,_android,_win64,_iphone,_ipad,_native,_mobile;function _populate(){if(!_populated){_populated=!0;var et=navigator.userAgent,dt=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(et),$t=/(Mac OS X)|(Windows)|(Linux)/.exec(et);if(_iphone=/\b(iPhone|iP[ao]d)/.exec(et),_ipad=/\b(iP[ao]d)/.exec(et),_android=/Android/i.exec(et),_native=/FBAN\/\w+;/i.exec(et),_mobile=/Mobile/i.exec(et),_win64=!!/Win64/.exec(et),dt){_ie=dt[1]?parseFloat(dt[1]):dt[5]?parseFloat(dt[5]):NaN,_ie&&document&&document.documentMode&&(_ie=document.documentMode);var kt=/(?:Trident\/(\d+.\d+))/.exec(et);_ie_real_version=kt?parseFloat(kt[1])+4:_ie,_firefox=dt[2]?parseFloat(dt[2]):NaN,_opera=dt[3]?parseFloat(dt[3]):NaN,_webkit=dt[4]?parseFloat(dt[4]):NaN,_webkit?(dt=/(?:Chrome\/(\d+\.\d+))/.exec(et),_chrome=dt&&dt[1]?parseFloat(dt[1]):NaN):_chrome=NaN}else _ie=_firefox=_opera=_chrome=_webkit=NaN;if($t){if($t[1]){var Tt=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(et);_osx=Tt?parseFloat(Tt[1].replace("_",".")):!0}else _osx=!1;_windows=!!$t[2],_linux=!!$t[3]}else _osx=_windows=_linux=!1}}var UserAgent_DEPRECATED$1={ie:function(){return _populate()||_ie},ieCompatibilityMode:function(){return _populate()||_ie_real_version>_ie},ie64:function(){return UserAgent_DEPRECATED$1.ie()&&_win64},firefox:function(){return _populate()||_firefox},opera:function(){return _populate()||_opera},webkit:function(){return _populate()||_webkit},safari:function(){return UserAgent_DEPRECATED$1.webkit()},chrome:function(){return _populate()||_chrome},windows:function(){return _populate()||_windows},osx:function(){return _populate()||_osx},linux:function(){return _populate()||_linux},iphone:function(){return _populate()||_iphone},mobile:function(){return _populate()||_iphone||_ipad||_android||_mobile},nativeApp:function(){return _populate()||_native},android:function(){return _populate()||_android},ipad:function(){return _populate()||_ipad}},UserAgent_DEPRECATED_1=UserAgent_DEPRECATED$1,canUseDOM$1=!!(typeof window<"u"&&window.document&&window.document.createElement),ExecutionEnvironment$1={canUseDOM:canUseDOM$1,canUseWorkers:typeof Worker<"u",canUseEventListeners:canUseDOM$1&&!!(window.addEventListener||window.attachEvent),canUseViewport:canUseDOM$1&&!!window.screen,isInWorker:!canUseDOM$1},ExecutionEnvironment_1=ExecutionEnvironment$1,ExecutionEnvironment=ExecutionEnvironment_1,useHasFeature;ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function isEventSupported$1(et,dt){if(!ExecutionEnvironment.canUseDOM||dt&&!("addEventListener"in document))return!1;var $t="on"+et,kt=$t in document;if(!kt){var Tt=document.createElement("div");Tt.setAttribute($t,"return;"),kt=typeof Tt[$t]=="function"}return!kt&&useHasFeature&&et==="wheel"&&(kt=document.implementation.hasFeature("Events.wheel","3.0")),kt}var isEventSupported_1=isEventSupported$1,UserAgent_DEPRECATED=UserAgent_DEPRECATED_1,isEventSupported=isEventSupported_1,PIXEL_STEP=10,LINE_HEIGHT=40,PAGE_HEIGHT=800;function normalizeWheel$2(et){var dt=0,$t=0,kt=0,Tt=0;return"detail"in et&&($t=et.detail),"wheelDelta"in et&&($t=-et.wheelDelta/120),"wheelDeltaY"in et&&($t=-et.wheelDeltaY/120),"wheelDeltaX"in et&&(dt=-et.wheelDeltaX/120),"axis"in et&&et.axis===et.HORIZONTAL_AXIS&&(dt=$t,$t=0),kt=dt*PIXEL_STEP,Tt=$t*PIXEL_STEP,"deltaY"in et&&(Tt=et.deltaY),"deltaX"in et&&(kt=et.deltaX),(kt||Tt)&&et.deltaMode&&(et.deltaMode==1?(kt*=LINE_HEIGHT,Tt*=LINE_HEIGHT):(kt*=PAGE_HEIGHT,Tt*=PAGE_HEIGHT)),kt&&!dt&&(dt=kt<1?-1:1),Tt&&!$t&&($t=Tt<1?-1:1),{spinX:dt,spinY:$t,pixelX:kt,pixelY:Tt}}normalizeWheel$2.getEventType=function(){return UserAgent_DEPRECATED.firefox()?"DOMMouseScroll":isEventSupported("wheel")?"wheel":"mousewheel"};var normalizeWheel_1=normalizeWheel$2,normalizeWheel=normalizeWheel_1;const normalizeWheel$1=getDefaultExportFromCjs(normalizeWheel);function getCropSize(et,dt,$t,kt,Tt,Dt){Dt===void 0&&(Dt=0);var Ft=rotateSize(et,dt,Dt),Ut=Ft.width,Ht=Ft.height,Kt=Math.min(Ut,$t),Yt=Math.min(Ht,kt);return Kt>Yt*Tt?{width:Yt*Tt,height:Yt}:{width:Kt,height:Kt/Tt}}function getMediaZoom(et){return et.width>et.height?et.width/et.naturalWidth:et.height/et.naturalHeight}function restrictPosition(et,dt,$t,kt,Tt){Tt===void 0&&(Tt=0);var Dt=rotateSize(dt.width,dt.height,Tt),Ft=Dt.width,Ut=Dt.height;return{x:restrictPositionCoord(et.x,Ft,$t.width,kt),y:restrictPositionCoord(et.y,Ut,$t.height,kt)}}function restrictPositionCoord(et,dt,$t,kt){var Tt=dt*kt/2-$t/2;return clamp$5(et,-Tt,Tt)}function getDistanceBetweenPoints(et,dt){return Math.sqrt(Math.pow(et.y-dt.y,2)+Math.pow(et.x-dt.x,2))}function getRotationBetweenPoints(et,dt){return Math.atan2(dt.y-et.y,dt.x-et.x)*180/Math.PI}function computeCroppedArea(et,dt,$t,kt,Tt,Dt,Ft){Dt===void 0&&(Dt=0),Ft===void 0&&(Ft=!0);var Ut=Ft?limitArea:noOp,Ht=rotateSize(dt.width,dt.height,Dt),Kt=rotateSize(dt.naturalWidth,dt.naturalHeight,Dt),Yt={x:Ut(100,((Ht.width-$t.width/Tt)/2-et.x/Tt)/Ht.width*100),y:Ut(100,((Ht.height-$t.height/Tt)/2-et.y/Tt)/Ht.height*100),width:Ut(100,$t.width/Ht.width*100/Tt),height:Ut(100,$t.height/Ht.height*100/Tt)},Jt=Math.round(Ut(Kt.width,Yt.width*Kt.width/100)),Zt=Math.round(Ut(Kt.height,Yt.height*Kt.height/100)),er=Kt.width>=Kt.height*kt,rr=er?{width:Math.round(Zt*kt),height:Zt}:{width:Jt,height:Math.round(Jt/kt)},sr=__assign(__assign({},rr),{x:Math.round(Ut(Kt.width-rr.width,Yt.x*Kt.width/100)),y:Math.round(Ut(Kt.height-rr.height,Yt.y*Kt.height/100))});return{croppedAreaPercentages:Yt,croppedAreaPixels:sr}}function limitArea(et,dt){return Math.min(et,Math.max(0,dt))}function noOp(et,dt){return dt}function getInitialCropFromCroppedAreaPercentages(et,dt,$t,kt,Tt,Dt){var Ft=rotateSize(dt.width,dt.height,$t),Ut=clamp$5(kt.width/Ft.width*(100/et.width),Tt,Dt),Ht={x:Ut*Ft.width/2-kt.width/2-Ft.width*Ut*(et.x/100),y:Ut*Ft.height/2-kt.height/2-Ft.height*Ut*(et.y/100)};return{crop:Ht,zoom:Ut}}function getZoomFromCroppedAreaPixels(et,dt,$t){var kt=getMediaZoom(dt);return $t.height>$t.width?$t.height/(et.height*kt):$t.width/(et.width*kt)}function getInitialCropFromCroppedAreaPixels(et,dt,$t,kt,Tt,Dt){$t===void 0&&($t=0);var Ft=rotateSize(dt.naturalWidth,dt.naturalHeight,$t),Ut=clamp$5(getZoomFromCroppedAreaPixels(et,dt,kt),Tt,Dt),Ht=kt.height>kt.width?kt.height/et.height:kt.width/et.width,Kt={x:((Ft.width-et.width)/2-et.x)*Ht,y:((Ft.height-et.height)/2-et.y)*Ht};return{crop:Kt,zoom:Ut}}function getCenter(et,dt){return{x:(dt.x+et.x)/2,y:(dt.y+et.y)/2}}function getRadianAngle(et){return et*Math.PI/180}function rotateSize(et,dt,$t){var kt=getRadianAngle($t);return{width:Math.abs(Math.cos(kt)*et)+Math.abs(Math.sin(kt)*dt),height:Math.abs(Math.sin(kt)*et)+Math.abs(Math.cos(kt)*dt)}}function clamp$5(et,dt,$t){return Math.min(Math.max(et,dt),$t)}function classNames(){for(var et=[],dt=0;dt<arguments.length;dt++)et[dt]=arguments[dt];return et.filter(function($t){return typeof $t=="string"&&$t.length>0}).join(" ").trim()}var css_248z=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,MIN_ZOOM=1,MAX_ZOOM=3,KEYBOARD_STEP=1,Cropper=function(et){__extends(dt,et);function dt(){var $t=et!==null&&et.apply(this,arguments)||this;return $t.cropperRef=reactExports.createRef(),$t.imageRef=reactExports.createRef(),$t.videoRef=reactExports.createRef(),$t.containerPosition={x:0,y:0},$t.containerRef=null,$t.styleRef=null,$t.containerRect=null,$t.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},$t.dragStartPosition={x:0,y:0},$t.dragStartCrop={x:0,y:0},$t.gestureZoomStart=0,$t.gestureRotationStart=0,$t.isTouching=!1,$t.lastPinchDistance=0,$t.lastPinchRotation=0,$t.rafDragTimeout=null,$t.rafPinchTimeout=null,$t.wheelTimer=null,$t.currentDoc=typeof document<"u"?document:null,$t.currentWindow=typeof window<"u"?window:null,$t.resizeObserver=null,$t.previousCropSize=null,$t.isInitialized=!1,$t.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},$t.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!$t.containerRef)){var kt=!0;$t.resizeObserver=new window.ResizeObserver(function(Tt){if(kt){kt=!1;return}$t.computeSizes()}),$t.resizeObserver.observe($t.containerRef)}},$t.preventZoomSafari=function(kt){return kt.preventDefault()},$t.cleanEvents=function(){$t.currentDoc&&($t.currentDoc.removeEventListener("mousemove",$t.onMouseMove),$t.currentDoc.removeEventListener("mouseup",$t.onDragStopped),$t.currentDoc.removeEventListener("touchmove",$t.onTouchMove),$t.currentDoc.removeEventListener("touchend",$t.onDragStopped),$t.currentDoc.removeEventListener("gesturechange",$t.onGestureChange),$t.currentDoc.removeEventListener("gestureend",$t.onGestureEnd),$t.currentDoc.removeEventListener("scroll",$t.onScroll))},$t.clearScrollEvent=function(){$t.containerRef&&$t.containerRef.removeEventListener("wheel",$t.onWheel),$t.wheelTimer&&clearTimeout($t.wheelTimer)},$t.onMediaLoad=function(){var kt=$t.computeSizes();kt&&($t.previousCropSize=kt,$t.emitCropData(),$t.setInitialCrop(kt),$t.isInitialized=!0),$t.props.onMediaLoaded&&$t.props.onMediaLoaded($t.mediaSize)},$t.setInitialCrop=function(kt){if($t.props.initialCroppedAreaPercentages){var Tt=getInitialCropFromCroppedAreaPercentages($t.props.initialCroppedAreaPercentages,$t.mediaSize,$t.props.rotation,kt,$t.props.minZoom,$t.props.maxZoom),Dt=Tt.crop,Ft=Tt.zoom;$t.props.onCropChange(Dt),$t.props.onZoomChange&&$t.props.onZoomChange(Ft)}else if($t.props.initialCroppedAreaPixels){var Ut=getInitialCropFromCroppedAreaPixels($t.props.initialCroppedAreaPixels,$t.mediaSize,$t.props.rotation,kt,$t.props.minZoom,$t.props.maxZoom),Dt=Ut.crop,Ft=Ut.zoom;$t.props.onCropChange(Dt),$t.props.onZoomChange&&$t.props.onZoomChange(Ft)}},$t.computeSizes=function(){var kt,Tt,Dt,Ft,Ut,Ht,Kt=$t.imageRef.current||$t.videoRef.current;if(Kt&&$t.containerRef){$t.containerRect=$t.containerRef.getBoundingClientRect(),$t.saveContainerPosition();var Yt=$t.containerRect.width/$t.containerRect.height,Jt=((kt=$t.imageRef.current)===null||kt===void 0?void 0:kt.naturalWidth)||((Tt=$t.videoRef.current)===null||Tt===void 0?void 0:Tt.videoWidth)||0,Zt=((Dt=$t.imageRef.current)===null||Dt===void 0?void 0:Dt.naturalHeight)||((Ft=$t.videoRef.current)===null||Ft===void 0?void 0:Ft.videoHeight)||0,er=Kt.offsetWidth<Jt||Kt.offsetHeight<Zt,rr=Jt/Zt,sr=void 0;if(er)switch($t.state.mediaObjectFit){default:case"contain":sr=Yt>rr?{width:$t.containerRect.height*rr,height:$t.containerRect.height}:{width:$t.containerRect.width,height:$t.containerRect.width/rr};break;case"horizontal-cover":sr={width:$t.containerRect.width,height:$t.containerRect.width/rr};break;case"vertical-cover":sr={width:$t.containerRect.height*rr,height:$t.containerRect.height};break}else sr={width:Kt.offsetWidth,height:Kt.offsetHeight};$t.mediaSize=__assign(__assign({},sr),{naturalWidth:Jt,naturalHeight:Zt}),$t.props.setMediaSize&&$t.props.setMediaSize($t.mediaSize);var nr=$t.props.cropSize?$t.props.cropSize:getCropSize($t.mediaSize.width,$t.mediaSize.height,$t.containerRect.width,$t.containerRect.height,$t.props.aspect,$t.props.rotation);return(((Ut=$t.state.cropSize)===null||Ut===void 0?void 0:Ut.height)!==nr.height||((Ht=$t.state.cropSize)===null||Ht===void 0?void 0:Ht.width)!==nr.width)&&$t.props.onCropSizeChange&&$t.props.onCropSizeChange(nr),$t.setState({cropSize:nr},$t.recomputeCropPosition),$t.props.setCropSize&&$t.props.setCropSize(nr),nr}},$t.saveContainerPosition=function(){if($t.containerRef){var kt=$t.containerRef.getBoundingClientRect();$t.containerPosition={x:kt.left,y:kt.top}}},$t.onMouseDown=function(kt){$t.currentDoc&&(kt.preventDefault(),$t.currentDoc.addEventListener("mousemove",$t.onMouseMove),$t.currentDoc.addEventListener("mouseup",$t.onDragStopped),$t.saveContainerPosition(),$t.onDragStart(dt.getMousePoint(kt)))},$t.onMouseMove=function(kt){return $t.onDrag(dt.getMousePoint(kt))},$t.onScroll=function(kt){$t.currentDoc&&(kt.preventDefault(),$t.saveContainerPosition())},$t.onTouchStart=function(kt){$t.currentDoc&&($t.isTouching=!0,!($t.props.onTouchRequest&&!$t.props.onTouchRequest(kt))&&($t.currentDoc.addEventListener("touchmove",$t.onTouchMove,{passive:!1}),$t.currentDoc.addEventListener("touchend",$t.onDragStopped),$t.saveContainerPosition(),kt.touches.length===2?$t.onPinchStart(kt):kt.touches.length===1&&$t.onDragStart(dt.getTouchPoint(kt.touches[0]))))},$t.onTouchMove=function(kt){kt.preventDefault(),kt.touches.length===2?$t.onPinchMove(kt):kt.touches.length===1&&$t.onDrag(dt.getTouchPoint(kt.touches[0]))},$t.onGestureStart=function(kt){$t.currentDoc&&(kt.preventDefault(),$t.currentDoc.addEventListener("gesturechange",$t.onGestureChange),$t.currentDoc.addEventListener("gestureend",$t.onGestureEnd),$t.gestureZoomStart=$t.props.zoom,$t.gestureRotationStart=$t.props.rotation)},$t.onGestureChange=function(kt){if(kt.preventDefault(),!$t.isTouching){var Tt=dt.getMousePoint(kt),Dt=$t.gestureZoomStart-1+kt.scale;if($t.setNewZoom(Dt,Tt,{shouldUpdatePosition:!0}),$t.props.onRotationChange){var Ft=$t.gestureRotationStart+kt.rotation;$t.props.onRotationChange(Ft)}}},$t.onGestureEnd=function(kt){$t.cleanEvents()},$t.onDragStart=function(kt){var Tt,Dt,Ft=kt.x,Ut=kt.y;$t.dragStartPosition={x:Ft,y:Ut},$t.dragStartCrop=__assign({},$t.props.crop),(Dt=(Tt=$t.props).onInteractionStart)===null||Dt===void 0||Dt.call(Tt)},$t.onDrag=function(kt){var Tt=kt.x,Dt=kt.y;$t.currentWindow&&($t.rafDragTimeout&&$t.currentWindow.cancelAnimationFrame($t.rafDragTimeout),$t.rafDragTimeout=$t.currentWindow.requestAnimationFrame(function(){if($t.state.cropSize&&!(Tt===void 0||Dt===void 0)){var Ft=Tt-$t.dragStartPosition.x,Ut=Dt-$t.dragStartPosition.y,Ht={x:$t.dragStartCrop.x+Ft,y:$t.dragStartCrop.y+Ut},Kt=$t.props.restrictPosition?restrictPosition(Ht,$t.mediaSize,$t.state.cropSize,$t.props.zoom,$t.props.rotation):Ht;$t.props.onCropChange(Kt)}}))},$t.onDragStopped=function(){var kt,Tt;$t.isTouching=!1,$t.cleanEvents(),$t.emitCropData(),(Tt=(kt=$t.props).onInteractionEnd)===null||Tt===void 0||Tt.call(kt)},$t.onWheel=function(kt){if($t.currentWindow&&!($t.props.onWheelRequest&&!$t.props.onWheelRequest(kt))){kt.preventDefault();var Tt=dt.getMousePoint(kt),Dt=normalizeWheel$1(kt).pixelY,Ft=$t.props.zoom-Dt*$t.props.zoomSpeed/200;$t.setNewZoom(Ft,Tt,{shouldUpdatePosition:!0}),$t.state.hasWheelJustStarted||$t.setState({hasWheelJustStarted:!0},function(){var Ut,Ht;return(Ht=(Ut=$t.props).onInteractionStart)===null||Ht===void 0?void 0:Ht.call(Ut)}),$t.wheelTimer&&clearTimeout($t.wheelTimer),$t.wheelTimer=$t.currentWindow.setTimeout(function(){return $t.setState({hasWheelJustStarted:!1},function(){var Ut,Ht;return(Ht=(Ut=$t.props).onInteractionEnd)===null||Ht===void 0?void 0:Ht.call(Ut)})},250)}},$t.getPointOnContainer=function(kt,Tt){var Dt=kt.x,Ft=kt.y;if(!$t.containerRect)throw new Error("The Cropper is not mounted");return{x:$t.containerRect.width/2-(Dt-Tt.x),y:$t.containerRect.height/2-(Ft-Tt.y)}},$t.getPointOnMedia=function(kt){var Tt=kt.x,Dt=kt.y,Ft=$t.props,Ut=Ft.crop,Ht=Ft.zoom;return{x:(Tt+Ut.x)/Ht,y:(Dt+Ut.y)/Ht}},$t.setNewZoom=function(kt,Tt,Dt){var Ft=Dt===void 0?{}:Dt,Ut=Ft.shouldUpdatePosition,Ht=Ut===void 0?!0:Ut;if(!(!$t.state.cropSize||!$t.props.onZoomChange)){var Kt=clamp$5(kt,$t.props.minZoom,$t.props.maxZoom);if(Ht){var Yt=$t.getPointOnContainer(Tt,$t.containerPosition),Jt=$t.getPointOnMedia(Yt),Zt={x:Jt.x*Kt-Yt.x,y:Jt.y*Kt-Yt.y},er=$t.props.restrictPosition?restrictPosition(Zt,$t.mediaSize,$t.state.cropSize,Kt,$t.props.rotation):Zt;$t.props.onCropChange(er)}$t.props.onZoomChange(Kt)}},$t.getCropData=function(){if(!$t.state.cropSize)return null;var kt=$t.props.restrictPosition?restrictPosition($t.props.crop,$t.mediaSize,$t.state.cropSize,$t.props.zoom,$t.props.rotation):$t.props.crop;return computeCroppedArea(kt,$t.mediaSize,$t.state.cropSize,$t.getAspect(),$t.props.zoom,$t.props.rotation,$t.props.restrictPosition)},$t.emitCropData=function(){var kt=$t.getCropData();if(kt){var Tt=kt.croppedAreaPercentages,Dt=kt.croppedAreaPixels;$t.props.onCropComplete&&$t.props.onCropComplete(Tt,Dt),$t.props.onCropAreaChange&&$t.props.onCropAreaChange(Tt,Dt)}},$t.emitCropAreaChange=function(){var kt=$t.getCropData();if(kt){var Tt=kt.croppedAreaPercentages,Dt=kt.croppedAreaPixels;$t.props.onCropAreaChange&&$t.props.onCropAreaChange(Tt,Dt)}},$t.recomputeCropPosition=function(){var kt,Tt;if($t.state.cropSize){var Dt=$t.props.crop;if($t.isInitialized&&(!((kt=$t.previousCropSize)===null||kt===void 0)&&kt.width)&&(!((Tt=$t.previousCropSize)===null||Tt===void 0)&&Tt.height)){var Ft=Math.abs($t.previousCropSize.width-$t.state.cropSize.width)>1e-6||Math.abs($t.previousCropSize.height-$t.state.cropSize.height)>1e-6;if(Ft){var Ut=$t.state.cropSize.width/$t.previousCropSize.width,Ht=$t.state.cropSize.height/$t.previousCropSize.height;Dt={x:$t.props.crop.x*Ut,y:$t.props.crop.y*Ht}}}var Kt=$t.props.restrictPosition?restrictPosition(Dt,$t.mediaSize,$t.state.cropSize,$t.props.zoom,$t.props.rotation):Dt;$t.previousCropSize=$t.state.cropSize,$t.props.onCropChange(Kt),$t.emitCropData()}},$t.onKeyDown=function(kt){var Tt,Dt,Ft=$t.props,Ut=Ft.crop,Ht=Ft.onCropChange,Kt=Ft.keyboardStep,Yt=Ft.zoom,Jt=Ft.rotation,Zt=Kt;if($t.state.cropSize){kt.shiftKey&&(Zt*=.2);var er=__assign({},Ut);switch(kt.key){case"ArrowUp":er.y-=Zt,kt.preventDefault();break;case"ArrowDown":er.y+=Zt,kt.preventDefault();break;case"ArrowLeft":er.x-=Zt,kt.preventDefault();break;case"ArrowRight":er.x+=Zt,kt.preventDefault();break;default:return}$t.props.restrictPosition&&(er=restrictPosition(er,$t.mediaSize,$t.state.cropSize,Yt,Jt)),kt.repeat||(Dt=(Tt=$t.props).onInteractionStart)===null||Dt===void 0||Dt.call(Tt),Ht(er)}},$t.onKeyUp=function(kt){var Tt,Dt;switch(kt.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":kt.preventDefault();break;default:return}$t.emitCropData(),(Dt=(Tt=$t.props).onInteractionEnd)===null||Dt===void 0||Dt.call(Tt)},$t}return dt.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=css_248z,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},dt.prototype.componentWillUnmount=function(){var $t,kt;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),($t=this.resizeObserver)===null||$t===void 0||$t.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((kt=this.styleRef.parentNode)===null||kt===void 0||kt.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},dt.prototype.componentDidUpdate=function($t){var kt,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt;$t.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):$t.aspect!==this.props.aspect?this.computeSizes():$t.objectFit!==this.props.objectFit?this.computeSizes():$t.zoom!==this.props.zoom?this.recomputeCropPosition():((kt=$t.cropSize)===null||kt===void 0?void 0:kt.height)!==((Tt=this.props.cropSize)===null||Tt===void 0?void 0:Tt.height)||((Dt=$t.cropSize)===null||Dt===void 0?void 0:Dt.width)!==((Ft=this.props.cropSize)===null||Ft===void 0?void 0:Ft.width)?this.computeSizes():(((Ut=$t.crop)===null||Ut===void 0?void 0:Ut.x)!==((Ht=this.props.crop)===null||Ht===void 0?void 0:Ht.x)||((Kt=$t.crop)===null||Kt===void 0?void 0:Kt.y)!==((Yt=this.props.crop)===null||Yt===void 0?void 0:Yt.y))&&this.emitCropAreaChange(),$t.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),$t.video!==this.props.video&&((Jt=this.videoRef.current)===null||Jt===void 0||Jt.load());var Zt=this.getObjectFit();Zt!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:Zt},this.computeSizes)},dt.prototype.getAspect=function(){var $t=this.props,kt=$t.cropSize,Tt=$t.aspect;return kt?kt.width/kt.height:Tt},dt.prototype.getObjectFit=function(){var $t,kt,Tt,Dt;if(this.props.objectFit==="cover"){var Ft=this.imageRef.current||this.videoRef.current;if(Ft&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var Ut=this.containerRect.width/this.containerRect.height,Ht=(($t=this.imageRef.current)===null||$t===void 0?void 0:$t.naturalWidth)||((kt=this.videoRef.current)===null||kt===void 0?void 0:kt.videoWidth)||0,Kt=((Tt=this.imageRef.current)===null||Tt===void 0?void 0:Tt.naturalHeight)||((Dt=this.videoRef.current)===null||Dt===void 0?void 0:Dt.videoHeight)||0,Yt=Ht/Kt;return Yt<Ut?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},dt.prototype.onPinchStart=function($t){var kt=dt.getTouchPoint($t.touches[0]),Tt=dt.getTouchPoint($t.touches[1]);this.lastPinchDistance=getDistanceBetweenPoints(kt,Tt),this.lastPinchRotation=getRotationBetweenPoints(kt,Tt),this.onDragStart(getCenter(kt,Tt))},dt.prototype.onPinchMove=function($t){var kt=this;if(!(!this.currentDoc||!this.currentWindow)){var Tt=dt.getTouchPoint($t.touches[0]),Dt=dt.getTouchPoint($t.touches[1]),Ft=getCenter(Tt,Dt);this.onDrag(Ft),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var Ut=getDistanceBetweenPoints(Tt,Dt),Ht=kt.props.zoom*(Ut/kt.lastPinchDistance);kt.setNewZoom(Ht,Ft,{shouldUpdatePosition:!1}),kt.lastPinchDistance=Ut;var Kt=getRotationBetweenPoints(Tt,Dt),Yt=kt.props.rotation+(Kt-kt.lastPinchRotation);kt.props.onRotationChange&&kt.props.onRotationChange(Yt),kt.lastPinchRotation=Kt})}},dt.prototype.render=function(){var $t=this,kt,Tt=this.props,Dt=Tt.image,Ft=Tt.video,Ut=Tt.mediaProps,Ht=Tt.cropperProps,Kt=Tt.transform,Yt=Tt.crop,Jt=Yt.x,Zt=Yt.y,er=Tt.rotation,rr=Tt.zoom,sr=Tt.cropShape,nr=Tt.showGrid,ir=Tt.roundCropAreaPixels,or=Tt.style,lr=or.containerStyle,cr=or.cropAreaStyle,dr=or.mediaStyle,ur=Tt.classes,pr=ur.containerClassName,mr=ur.cropAreaClassName,jr=ur.mediaClassName,Rr=(kt=this.state.mediaObjectFit)!==null&&kt!==void 0?kt:this.getObjectFit();return reactExports.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(kr){return $t.containerRef=kr},"data-testid":"container",style:lr,className:classNames("reactEasyCrop_Container",pr)},Dt?reactExports.createElement("img",__assign({alt:"",className:classNames("reactEasyCrop_Image",Rr==="contain"&&"reactEasyCrop_Contain",Rr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Rr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",jr)},Ut,{src:Dt,ref:this.imageRef,style:__assign(__assign({},dr),{transform:Kt||"translate(".concat(Jt,"px, ").concat(Zt,"px) rotate(").concat(er,"deg) scale(").concat(rr,")")}),onLoad:this.onMediaLoad})):Ft&&reactExports.createElement("video",__assign({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:classNames("reactEasyCrop_Video",Rr==="contain"&&"reactEasyCrop_Contain",Rr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Rr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",jr)},Ut,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:__assign(__assign({},dr),{transform:Kt||"translate(".concat(Jt,"px, ").concat(Zt,"px) rotate(").concat(er,"deg) scale(").concat(rr,")")}),controls:!1}),(Array.isArray(Ft)?Ft:[{src:Ft}]).map(function(xr){return reactExports.createElement("source",__assign({key:xr.src},xr))})),this.state.cropSize&&reactExports.createElement("div",__assign({ref:this.cropperRef,style:__assign(__assign({},cr),{width:ir?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:ir?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:classNames("reactEasyCrop_CropArea",sr==="round"&&"reactEasyCrop_CropAreaRound",nr&&"reactEasyCrop_CropAreaGrid",mr)},Ht)))},dt.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:MAX_ZOOM,minZoom:MIN_ZOOM,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:KEYBOARD_STEP},dt.getMousePoint=function($t){return{x:Number($t.clientX),y:Number($t.clientY)}},dt.getTouchPoint=function($t){return{x:Number($t.clientX),y:Number($t.clientY)}},dt}(reactExports.Component);function DashboardSettings(){const{user:et,setUser:dt,refreshUser:$t}=useAuth(),kt=useLocation(),Tt=useNavigate(),[Dt,Ft]=reactExports.useState(null),[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState((et==null?void 0:et.twofa_enabled)===1),[er,rr]=reactExports.useState(null),[sr,nr]=reactExports.useState(null),[ir,or]=reactExports.useState(""),[lr,cr]=reactExports.useState(!1),[dr,ur]=reactExports.useState(null),[pr,mr]=reactExports.useState({x:0,y:0}),[jr,Rr]=reactExports.useState(1),[xr,kr]=reactExports.useState(null),[Mr,Tr]=reactExports.useState(!1);function Or(Wr){let Xr;if(Wr instanceof ArrayBuffer)Xr=new Uint8Array(Wr);else if(ArrayBuffer.isView(Wr))Xr=new Uint8Array(Wr.buffer);else throw new Error("Invalid buffer type passed to bufferToBase64URL");let ns="";for(let gs=0;gs<Xr.length;gs++)ns+=String.fromCharCode(Xr[gs]);return btoa(ns).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const _r=async()=>{try{const Wr=await axiosInstance.post("/auth/user/enable-2fa");rr(Wr.data.qr),nr(Wr.data.secret),y$4.info("Scan the QR code with Google Authenticator or Authy.")}catch(Wr){console.error("2FA setup error:",Wr),y$4.error("Failed to start 2FA setup.")}},Pr=async()=>{if(!ir.trim())return y$4.warning("Enter the 6-digit code");cr(!0);try{const Wr=await axiosInstance.post("/auth/user/verify-login-2fa",{token:ir});Wr.data.success||Wr.data.verified?(Zt(!0),rr(null),nr(null),or(""),dt({...et,twofa_enabled:1}),localStorage.setItem("user",JSON.stringify({...et,twofa_enabled:1})),y$4.success(" Two-Factor Authentication enabled!")):y$4.error("Invalid 2FA code. Try again.")}catch(Wr){console.error("2FA verify error:",Wr),y$4.error("Invalid or expired code.")}finally{cr(!1)}},br=async()=>{var Wr,Xr,ns,gs;try{let us=function(As){const Ns=new Uint8Array(As);let Is="";for(let zs=0;zs<Ns.byteLength;zs++)Is+=String.fromCharCode(Ns[zs]);return btoa(Is).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};const{data:ps}=await axiosInstance.post("/auth/webauthn/register-options",{email:et.email}),cs=ps.challenge||((Wr=ps.publicKey)==null?void 0:Wr.challenge);if(!cs)throw new Error("Missing challenge from server response");const ss=Uint8Array.from(atob(cs.replace(/-/g,"+").replace(/_/g,"/")),As=>As.charCodeAt(0)),fs=((Xr=ps.user)==null?void 0:Xr.id)||((gs=(ns=ps.publicKey)==null?void 0:ns.user)==null?void 0:gs.id)||"",hs=Uint8Array.from(fs,As=>As.charCodeAt(0)),$s=await navigator.credentials.create({publicKey:{...ps,challenge:ss,user:{...ps.user,id:hs}}}),ks=us($s.rawId),Ds={id:ks,rawId:ks,type:$s.type,response:{attestationObject:Or($s.response.attestationObject),clientDataJSON:Or($s.response.clientDataJSON)}},{data:_s}=await axiosInstance.post("/auth/webauthn/register-verify",{email:et.email,attResp:Ds});_s.success?(y$4.success(" Passkey registered successfully!"),dt({...et,has_passkey:1}),localStorage.setItem("user",JSON.stringify({...et,has_passkey:1}))):y$4.error("Passkey registration failed.")}catch(us){console.error(" Passkey registration error:",us),y$4.error("Passkey registration failed. Try again.")}},wr=async()=>{try{(await axiosInstance.post("/auth/webauthn/remove-passkey")).data.success?(y$4.info(" Passkey removed successfully."),dt({...et,has_passkey:0}),localStorage.setItem("user",JSON.stringify({...et,has_passkey:0}))):y$4.warning("Failed to remove passkey. Try again.")}catch(Wr){console.error(" Passkey removal error:",Wr),y$4.error("Error removing passkey.")}};function zr(Wr,Xr,ns){const gs=Wr.getImageData(0,0,Xr,ns).data;for(let us=3;us<gs.length;us+=4)if(gs[us]<255)return!0;return!1}reactExports.useEffect(()=>{if(kt.search.includes("connected=true")){$t(),y$4.success(" Stripe account connected successfully!");const Wr=new URL(window.location);Wr.searchParams.delete("connected"),window.history.replaceState({},"",Wr)}},[kt.search]),reactExports.useEffect(()=>{if(!(et!=null&&et.id))return;(async()=>{try{const Xr=await axiosInstance.get(`/upload-data/user/settings/${et.id}`);Ft(Xr.data.settings)}catch(Xr){console.error("Failed to load settings:",Xr),y$4.error("Failed to load brand settings.")}})()},[et==null?void 0:et.id]);const Hr=async()=>{if(!Ut)return y$4.warning("Crop and select an image first");try{Yt(!0);const Wr=new FileReader;Wr.onloadend=async()=>{const Xr=await axiosInstance.post("/upload-data/upload-avatar",{userId:et.id,profileImage:Wr.result});if(Xr.data.profileImage){const ns={...et,profile_image:Xr.data.profileImage,profile_image_url:Xr.data.profileImage};dt(ns),localStorage.setItem("user",JSON.stringify(ns)),URL.revokeObjectURL(dr),y$4.success("Profile image updated!"),Ht(null)}},Wr.readAsDataURL(Ut)}catch{y$4.error("Upload failed")}finally{Yt(!1)}},es=(()=>{const Wr=[];return et.plan==="business_builder_pack"&&et.billing_type==="monthly"&&et.pro_status==="active"?Wr.push({title:"Business Builder",planKey:"business_builder_pack_monthly",billing:"monthly",description:"Monthly plan with 15 lead magnet slots and full premium tools.",remainingSlots:et.magnet_slots}):et.plan==="business_builder_pack"&&et.billing_type==="annual"&&et.pro_status==="active"&&Wr.push({title:"Business Builder",planKey:"business_builder_pack_annual",billing:"annual",description:"Annual plan with 15 lead magnet slots and full premium tools.",remainingSlots:et.magnet_slots}),et.plan==="business_basic_builder"&&et.basic_annual===1&&Wr.push({title:"Business Basic",planKey:"business_basic_builder",billing:"annual",description:"Annual basic plan with 7 lead magnet slots and core selling tools.",remainingSlots:et.magnet_slots}),!et.plan&&et.has_free_magnet===1&&Wr.push({title:"Free Trial",planKey:"free",billing:"trial",description:"Your Free Trial includes 1 lead magnet slot and 7 day access.",expires:et.free_trial_expires_at,remainingSlots:et.magnet_slots}),et.has_book===1&&Wr.push({title:"Authors Assistant",planKey:"assistant",billing:"one_time",description:"Create up to 750 pages with the AI Book Builder.",remainingPages:et.book_slots}),Wr})(),rs=(et==null?void 0:et.pro_status)==="active"&&(et==null?void 0:et.plan)==="business_builder_pack";return jsxRuntimeExports.jsxs("div",{className:`
      flex justify-center w-full min-h-screen
      bg-dashboard-bg-light
      dark:bg-dashboard-bg-dark
      text-dashboard-text-light
      dark:text-dashboard-text-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-5",children:[jsxRuntimeExports.jsxs("div",{className:`
          mb-10 pb-6 border-b
          border-dashboard-border-light
          dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsx("h1",{className:`
            text-3xl font-bold design-text normal-case
            text-dashboard-text-light
            dark:text-dashboard-text-dark
  `,children:"Brand Settings"}),jsxRuntimeExports.jsx("p",{className:`
            mt-2
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:"Manage your brand tone and upload a reference file for AI generation."})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-2xl p-8 mb-10 shadow-lg`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h2",{className:`text-xl font-semibold text-dashboard-text-light
            dark:text-dashboard-text-dark
`,children:"Your Plan"}),jsxRuntimeExports.jsxs("span",{className:`text-sm text-dashboard-muted-light
            dark:text-dashboard-muted-dark
`,children:[new Date().toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})," "]})]}),es.length>0?jsxRuntimeExports.jsx("div",{className:`grid gap-6 ${es.length===1?"grid-cols-1 place-items-center":"grid-cols-1 sm:grid-cols-2"}`,children:es.map((Wr,Xr)=>{let ns="Active",gs="text-green bg-green/10";return(Wr.planKey==="free"||Wr.billing==="trial")&&(ns="Free Trial",gs="text-amber-400 bg-amber-500/10"),Wr.planKey==="business_basic_builder"&&(ns="Basic",gs="text-emerald-400 bg-emerald-500/10"),Wr.billing==="trial"&&Wr.expires&&new Date(Wr.expires)<new Date&&(ns="Expired",gs="text-red-400 bg-red-400/10"),jsxRuntimeExports.jsxs("div",{className:`
                    relative flex flex-col justify-between transition-all
                    rounded-xl p-5 border shadow-inner
                    bg-dashboard-sidebar-light
                    dark:bg-dashboard-hover-dark
                    border-dashboard-border-light
                    dark:border-dashboard-border-dark
                    hover:shadow-[0_0_20px_rgba(0,255,170,0.15)]
`,children:[jsxRuntimeExports.jsx("span",{className:`text-xs font-semibold uppercase tracking-wide px-2 py-1 rounded-md mb-2 self-start ${gs}`,children:ns}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Wr.planKey==="assistant"&&jsxRuntimeExports.jsxs("svg",{className:"w-6 h-6 text-hotPink",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20l9-5-9-5-9 5 9 5z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12l9-5-9-5-9 5 9 5z"})]}),Wr.planKey.startsWith("business_builder_pack")&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h11M9 21V3m12 7h-5a2 2 0 00-2 2v9"})}),Wr.planKey==="business_basic_builder"&&jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-emerald-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m9-9H3"})}),jsxRuntimeExports.jsx("h3",{className:`text-lg font-semibold text-dashboard-text-light
                        dark:text-dashboard-text-dark
`,children:Wr.title})]}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
                      leading-relaxed`,children:Wr.description}),jsxRuntimeExports.jsxs("p",{className:`text-xs mt-2 text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
`,children:[Wr.billing==="monthly"&&"Billed Monthly",Wr.billing==="annual"&&"Billed Annually",Wr.billing==="trial"&&`Trial Ends: ${new Date(Wr.expires).toLocaleDateString()}`,Wr.billing==="one_time"&&"One-Time Purchase"]}),Wr.planKey==="free"&&jsxRuntimeExports.jsx("button",{onClick:()=>window.location.href="/plans",className:`mt-4 px-5 py-2.5 bg-royalPurple 
                      text-dashboard-text-light
                        dark:text-dashboard-text-dark
                        font-semibold rounded-lg shadow-md hover:opacity-90 transition`,children:"Upgrade Plan"})]},Xr)})}):jsxRuntimeExports.jsx("p",{className:`text-dashboard-muted-light
            dark:text-dashboard-muted-dark
              text-sm text-center py-4`,children:"No active plan detected. Please contact support if this seems incorrect."})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg mt-8`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Profile Avatar"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[jsxRuntimeExports.jsx(Img,{src:et==null?void 0:et.profile_image,loader:jsxRuntimeExports.jsx("div",{className:`
                  w-20 h-20 rounded-full animate-pulse object-cover
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  transition-opacity duration-300
`}),unloader:jsxRuntimeExports.jsx("img",{src:defaultImage,className:`
                  w-20 h-20 rounded-full object-cover
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
`,alt:"avatar"}),decode:!0,alt:"avatar",className:"w-20 h-20 rounded-full object-cover border border-gray-700 transition-opacity duration-300"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Wr=>{const Xr=Wr.target.files[0];Xr&&ur(URL.createObjectURL(Xr))},className:`w-full text-sm text-dashboard-text-light
              dark:text-dashboard-text-dark file:mr-3 file:py-2 file:px-4 
                   file:rounded-lg file:border-0 file:text-sm file:bg-white 
                   file:font-semibold hover:file:opacity-90`}),dr&&jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("div",{className:"relative w-full h-[260px] rounded-lg overflow-hidden bg-black/40",children:jsxRuntimeExports.jsx(Cropper,{image:dr,crop:pr,zoom:jr,aspect:1,cropShape:"round",showGrid:!1,onCropChange:mr,onZoomChange:Rr,onCropComplete:(Wr,Xr)=>kr(Xr)})}),jsxRuntimeExports.jsx("input",{type:"range",min:1,max:3,step:.01,value:jr,onChange:Wr=>Rr(Number(Wr.target.value)),className:"w-full mt-4"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-4",children:[jsxRuntimeExports.jsx("button",{disabled:Kt,className:"px-4 py-2 bg-green text-dashboard-bg-dark rounded font-semibold",onClick:async()=>{if(!xr)return;const Wr=document.createElement("canvas"),Xr=Wr.getContext("2d"),ns=new Image;ns.crossOrigin="anonymous",ns.src=dr,await new Promise(ks=>ns.onload=ks);const{width:gs,height:us,x:ps,y:cs}=xr;Wr.width=gs,Wr.height=us,Xr.clearRect(0,0,gs,us),Xr.drawImage(ns,ps,cs,gs,us,0,0,gs,us);const ss=zr(Xr,gs,us),fs=ss?"image/png":"image/jpeg",hs=ss?void 0:.9,$s=await new Promise(ks=>Wr.toBlob(ks,fs,hs));Ht($s),ur(null),mr({x:0,y:0}),Rr(1)},children:"Use Image"}),jsxRuntimeExports.jsx("button",{className:`
                      px-4 py-2 rounded
                      bg-dashboard-hover-light
                      dark:bg-dashboard-hover-dark
                      text-dashboard-text-light
                      dark:text-dashboard-text-dark
`,onClick:()=>{URL.revokeObjectURL(dr),ur(null)},children:"Cancel"})]})]}),jsxRuntimeExports.jsx("button",{onClick:Hr,disabled:Kt,className:`mt-3 px-5 py-2 rounded-lg bg-green text-dashboard-bg-dark font-semibold 
                   hover:opacity-90 disabled:opacity-50 transition`,children:Kt?"Uploading...":"Upload Avatar"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 space-y-4 shadow-lg mt-8`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Two-Factor Authentication"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
          dark:text-dashboard-muted-dark
`,children:"Add an extra layer of security to your Messy Attic account."}),Jt?jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:" 2FA is enabled"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                dark:text-dashboard-muted-dark
`,children:"Your account is protected with two-factor authentication."})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{(await axiosInstance.post("/auth/user/disable-2fa")).data.success?(Zt(!1),dt({...et,twofa_enabled:0}),localStorage.setItem("user",JSON.stringify({...et,twofa_enabled:0})),y$4.info("2FA has been disabled.")):y$4.error("Failed to disable 2FA. Try again.")}catch(Wr){console.error("Disable 2FA error:",Wr),y$4.error("Server error disabling 2FA.")}},className:`
                px-5 py-2
                bg-red-600 hover:bg-red-700
                text-white
                dark:text-dashboard-text-dark
                rounded-lg font-semibold transition
              `,children:"Disable 2FA"})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:er?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx(_default,{value:er,size:160,bgColor:"#0B0F19",fgColor:"#00ffae"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                    text-center`,children:"Scan this code with your Authenticator app, then enter the 6-digit code below."}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter 6-digit code",value:ir,onChange:Wr=>or(Wr.target.value),className:`w-40 text-center py-2 px-3 rounded-md bg-dashboard-hover-light dark:bg-dashboard-hover-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-dashboard-text-light
                  dark:text-dashboard-text-dark
                    focus:ring-2 focus:ring-green outline-none placeholder-dashboard-muted-light
  dark:placeholder-dashboard-muted-dark`}),jsxRuntimeExports.jsx("button",{onClick:Pr,disabled:lr,className:`px-5 py-2 rounded-lg font-semibold transition-all ${lr?"opacity-60 cursor-not-allowed bg-green-700":"bg-green text-dashboard-bg-dark hover:opacity-90"}`,children:lr?"Verifying...":"Verify 2FA Code"})]}):jsxRuntimeExports.jsx("button",{onClick:_r,className:"mt-2 px-6 py-2.5 bg-green text-dashboard-bg-dark font-semibold rounded-lg hover:opacity-90 transition",children:"Enable 2FA"})})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 space-y-4  shadow-lg mt-8`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Passkey Authentication"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
          dark:text-dashboard-muted-dark
`,children:"Securely sign in using Face ID, Touch ID, or your devices security key."}),et!=null&&et.has_passkey?jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:" Passkey Registered"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                dark:text-dashboard-muted-dark
`,children:"You can now use Sign in with Passkey on the login screen."})]}),jsxRuntimeExports.jsx("button",{onClick:wr,className:`
                px-5 py-2
                bg-red-600 hover:bg-red-700
                text-white
                rounded-lg font-semibold transition
  `,children:"Remove Passkey"})]}):jsxRuntimeExports.jsx("button",{onClick:br,className:`px-6 py-2.5 bg-blue text-white
            dark:text-dashboard-text-dark
            font-semibold rounded-lg hover:opacity-90 transition`,children:"Register Passkey"})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg mt-8`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Seller Payouts (Stripe Connect)"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
          dark:text-dashboard-muted-dark mb-4`,children:"Connect Stripe to receive tips and future payouts."}),et!=null&&et.stripe_connected?jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:" Connected"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
`,children:"Your Stripe account is active and ready for payouts."})]}),jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://dashboard.stripe.com/express","_blank"),className:`
                    px-5 py-2
                    bg-blue hover:bg-blue/80
                    text-white
                    rounded-lg font-semibold transition
`,children:"Open Stripe Dashboard"})]}):et!=null&&et.stripe_connect_account_id?jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-yellow-400 font-semibold",children:" Pending Setup"}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
`,children:"Your Stripe account was created but not completed."})]}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{const{data:Wr}=await axiosInstance.post("/seller/create-account-link");Wr.url&&(window.location.href=Wr.url)}catch(Wr){console.error("Stripe connect error:",Wr),y$4.error("Failed to resume Stripe onboarding. Try again.")}},className:`px-6 py-2.5 bg-amber-500 text-dashboard-text-light
                    dark:text-dashboard-text-dark
                    font-semibold rounded-lg hover:opacity-90 transition`,children:"Complete Setup"})]}):jsxRuntimeExports.jsx("button",{onClick:async Wr=>{try{const{data:Xr}=await axiosInstance.post("/seller/create-account-link");Xr.url&&(window.location.href=Xr.url)}catch(Xr){console.error("Stripe connect error:",Xr),y$4.error("Failed to start Stripe onboarding. Try again.")}},className:`
                  px-6 py-2.5
                  font-semibold
                  rounded-lg
                  transition
                  bg-royalPurple
                  hover:opacity-90
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                `,children:"Connect with Stripe"})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg mt-8 relative overflow-hidden`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
          dark:text-dashboard-text-dark
`,children:"Custom Domains"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
          dark:text-dashboard-muted-dark mb-4`,children:"Connect your own domain to host landing pages on your brand."}),rs?jsxRuntimeExports.jsx("button",{onClick:()=>Tt("/settings/domains"),className:`px-6 py-2.5 bg-royalPurple text-white
            dark:text-dashboard-text-dark
            font-semibold rounded-lg hover:opacity-90 transition`,children:"Manage Custom Domains "}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center text-center px-6",children:[jsxRuntimeExports.jsxs("p",{className:`
                  text-sm mb-4 max-w-[360px]
                  text-dashboard-text-dark
                  dark:text-dashboard-text-dark
  `,children:["available on the"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Business Builder"})," ","plan only."]}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt("/plans"),className:`px-6 py-2.5 bg-royalPurple text-dashboard-text-dark
                  dark:text-dashboard-text-dark
                  font-semibold rounded-lg hover:opacity-90 transition`,children:"Upgrade to Unlock"})]})})]}),jsxRuntimeExports.jsx("div",{className:`
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          rounded-xl p-6 space-y-4 shadow-lg mt-8
  `,children:et!=null&&et.has_book?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                rounded-xl p-6 shadow-lg mt-8
`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
                dark:text-dashboard-text-dark
                mb-2`,children:"Guided Tour"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  mb-4`,children:"Replay the Book Builder onboarding walkthrough to revisit all key features."}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.post("/books/onboarding/replay",{},{headers:{Authorization:`Bearer ${et==null?void 0:et.accessToken}`}}),y$4.success(" Tour reset! It will replay next time you open Book Builder.")}catch(Wr){console.error(" Failed to reset onboarding:",Wr),y$4.error("Could not reset tour. Please try again.")}},className:`
                  px-5 py-2.5 rounded-lg
                  bg-bookBtnColor
                  text-black
                  font-semibold
                  hover:opacity-90
                  transition
                `,children:"Replay Book Tour"})]}),jsxRuntimeExports.jsxs("div",{className:`
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                rounded-xl p-6 shadow-lg mt-8
`,children:[jsxRuntimeExports.jsx("h2",{className:`text-lg font-semibold text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  mb-2`,children:"ISBN Assistance"}),jsxRuntimeExports.jsx("p",{className:`text-sm text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  mb-4 leading-relaxed`,children:"Need an ISBN for your book? The Messy Attic can guide you through the process. An ISBN (International Standard Book Number) identifies your book worldwide and is required for publishing on major retailers like Amazon, Apple Books, and Barnes & Noble."}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>window.open("https://www.myidentifiers.com/","_blank"),className:"flex-1 bg-green text-dashboard-bg-dark font-semibold py-2.5 rounded-lg shadow-md hover:opacity-90 transition text-center",children:"Get ISBN from Bowker"}),jsxRuntimeExports.jsx("button",{onClick:()=>y$4.info("Our team will soon offer a Pro ISBN Concierge service directly inside The Messy Attic!"),className:"flex-1 bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-text-light dark:text-dashboard-text-dark font-semibold py-2.5 rounded-lg border border-dashboard-border-light dark:border-dashboard-border-dark hover:border-green hover:text-green transition",children:"Coming Soon: ISBN Concierge"})]}),jsxRuntimeExports.jsx("p",{className:`text-xs text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  italic mt-3`,children:"Available for Assistant Plan users. Stay tuned for automated ISBN requests inside the dashboard."})]})]}):null})]}),jsxRuntimeExports.jsx(UpgradeRequiredModal,{open:Mr,onClose:()=>Tr(!1)})]})}function Inbox(){const[et,dt]=reactExports.useState([]),[$t,kt]=reactExports.useState(null),[Tt,Dt]=reactExports.useState(!0),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(!1);reactExports.useEffect(()=>{Yt()},[]);async function Yt(){try{const rr=await axiosInstance.get("/messages/user/");dt(rr.data||[])}catch(rr){console.error("Failed to load messages:",rr),y$4.error("Failed to load inbox.")}finally{Dt(!1)}}async function Jt(rr){if(kt(rr),!rr.read_status)try{Ut(!0),await axiosInstance.post(`/messages/user/${rr.id}/read`),dt(sr=>sr.map(nr=>nr.id===rr.id?{...nr,read_status:1}:nr))}catch(sr){console.error("Failed to mark message as read:",sr)}finally{Ut(!1)}}async function Zt(rr){y$4.dismiss(),y$4(({closeToast:sr})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Are you sure you want to delete this message?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{try{Kt(!0),await axiosInstance.delete(`/messages/user/user/${rr}`),dt(nr=>nr.filter(ir=>ir.id!==rr)),kt(null),y$4.success("Message deleted successfully.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(nr){console.error("Failed to delete message:",nr),y$4.error("Failed to delete message.",{position:"top-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{Kt(!1),sr()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:sr,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"top-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}function er(){kt(null)}return jsxRuntimeExports.jsxs("div",{className:`
      w-full min-h-screen flex flex-col lg:flex-row
      bg-dashboard-bg-light
      dark:bg-dashboard-bg-dark
      text-dashboard-text-light
      dark:text-dashboard-text-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:`
        flex-1 lg:max-w-[380px] h-screen overflow-y-auto p-6
        border-r border-dashboard-border-light
        dark:border-dashboard-border-dark
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:`
          border-b pb-4 mb-6 flex items-center justify-between
          border-dashboard-border-light
          dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold design-text normal-case",children:"Inbox"}),jsxRuntimeExports.jsx(Bell,{size:18,className:`
          text-dashboard-muted-light
          dark:text-green
  `})]}),Tt?jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm",children:"Loading messages..."}):et.length===0?jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm",children:"No messages found."}):jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:et.map(rr=>jsxRuntimeExports.jsxs("li",{onClick:()=>Jt(rr),className:`cursor-pointer p-4 rounded-lg border transition-all duration-200 ${rr.id===($t==null?void 0:$t.id)?`
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              border-dashboard-border-light
              dark:border-dashboard-border-dark
            `:rr.read_status?`
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border-dashboard-border-light
                dark:border-dashboard-border-dark
              `:`
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border-green
              `}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsx("h3",{className:`font-semibold truncate ${rr.read_status?"text-dashboard-muted-light dark:text-dashboard-muted-dark":"text-dashboard-text-light dark:text-dashboard-text-dark"}`,children:rr.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:new Date(rr.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),jsxRuntimeExports.jsx("p",{className:`text-xs truncate ${rr.read_status?"text-dashboard-muted-light dark:text-dashboard-muted-dark":"text-dashboard-text-light dark:text-dashboard-text-dark"}`,children:rr.message}),!rr.read_status&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-green font-semibold",children:[jsxRuntimeExports.jsx(CircleCheckBig,{size:12})," New"]})]},rr.id))})]}),jsxRuntimeExports.jsx("div",{className:`
        flex-1 p-6 overflow-y-auto h-screen
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
  `,children:$t?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-center mb-6",children:jsxRuntimeExports.jsxs("button",{onClick:er,className:`
                flex items-center gap-2 text-sm
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                hover:text-dashboard-text-light
                dark:hover:text-dashboard-text-dark
`,children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16})," Back to Inbox"]})}),jsxRuntimeExports.jsxs("div",{className:`
              rounded-2xl p-6 shadow-lg
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:`
                flex flex-col sm:flex-row sm:items-center sm:justify-between
                border-b border-dashboard-border-light
                dark:border-dashboard-border-dark
                pb-4 mb-4`,children:[jsxRuntimeExports.jsx("h2",{className:`text-2xl font-bold leading-tight
                text-dashboard-text-light
                dark:text-dashboard-text-dark
`,children:$t.title}),jsxRuntimeExports.jsxs("div",{className:`
                  flex items-center gap-2 text-sm mt-2 sm:mt-0
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
  `,children:[jsxRuntimeExports.jsx(Calendar,{size:14,className:"opacity-75 relative top-[1px]"}),new Date($t.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]})]}),jsxRuntimeExports.jsx("p",{className:`
                text-sm leading-relaxed whitespace-pre-line
                text-dashboard-text-light
                dark:text-dashboard-text-dark
  `,children:$t.message}),jsxRuntimeExports.jsxs("div",{className:`
                mt-6 pt-4 flex items-center justify-between text-xs
                border-t border-dashboard-border-light
                dark:border-dashboard-border-dark
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
  `,children:[jsxRuntimeExports.jsxs("p",{children:["Sent by"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Cre8tly Support"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Zt($t.id),disabled:Ht,className:`flex items-center gap-2 text-sm px-3 py-1.5 rounded-md font-semibold transition-all ${Ht?"bg-red-900 text-dashboard-muted-dark opacity-60 cursor-not-allowed":"bg-red-600 hover:bg-red-700 text-white"}`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),Ht?"Deleting...":"Delete"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:`
            flex flex-col items-center justify-center h-full text-center
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:[jsxRuntimeExports.jsx(Mail,{size:40,className:`
              mb-4
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
  `}),jsxRuntimeExports.jsx("p",{children:"Select a message to read"})]})})]})}function useMaintenance(){const[et,dt]=reactExports.useState(!1),[$t,kt]=reactExports.useState(!0);return reactExports.useEffect(()=>{async function Tt(){try{const{data:Dt}=await axiosInstance.get("/admin/settings/maintenance");dt(Dt.maintenance)}catch{dt(!1)}finally{kt(!1)}}Tt()},[]),{maintenance:et,loading:$t}}function MaintenanceScreen(){return jsxRuntimeExports.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-[#0f0f10] text-white text-center px-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4",children:" Down for Maintenance"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-gray-400 max-w-md mb-8",children:["The Messy Attic is"," ",jsxRuntimeExports.jsx("span",{className:"text-yellow",children:"temporarily offline"})," while we make improvements.",jsxRuntimeExports.jsx("br",{}),"Well be back shortly, thank you for your patience."]}),jsxRuntimeExports.jsx("a",{href:"/",className:"px-6 py-3 bg-green hover:bg-emerald-600 text-black font-semibold rounded-lg shadow-md transition-all duration-200",children:"Return Home"}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-sm text-gray-600",children:jsxRuntimeExports.jsxs("p",{children:[" ",new Date().getFullYear()," The Messy Attic"]})})]})}function adjustForLandingOverlay(et,dt="rgba(255,255,255,0.04)"){if(!et)return"#000";if(et.includes("linear-gradient"))return et;const $t=et.replace("#","");if($t.length!==6)return et;const kt=parseInt($t.substring(0,2),16),Tt=parseInt($t.substring(2,4),16),Dt=parseInt($t.substring(4,6),16),Ft=dt.match(/rgba?\(([^)]+)\)/);if(!Ft)return et;const[Ut,Ht,Kt,Yt=1]=Ft[1].split(",").map(sr=>parseFloat(sr.trim())),Jt=Yt||.04,Zt=Math.round(Ut*Jt+kt*(1-Jt)),er=Math.round(Ht*Jt+Tt*(1-Jt)),rr=Math.round(Kt*Jt+Dt*(1-Jt));return`rgb(${Zt}, ${er}, ${rr})`}function HeadingBlock({block:et,index:dt,updateBlock:$t,openAIModal:kt,updateChildBlock:Tt,containerIndex:Dt}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"font-semibold text-sm mb-1",children:et.type==="heading"?"Heading (H1)":et.type==="subheading"?"Subheading (H2)":"Sub-Subheading (H3)"}),jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt({blockType:et.type,blockIndex:dt,containerIndex:Dt,updateChildBlock:Tt,currentText:et.text,role:et.aiRole||"body"}),onPointerDown:Ft=>Ft.stopPropagation(),className:`
      text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white
      hover:bg-royalPurple/80
      transition
    `,title:"Use AI to write or improve this copy",children:"AI"})}),jsxRuntimeExports.jsx("textarea",{rows:2,placeholder:et.type==="heading"?"Enter your main headline":et.type==="subheading"?"Enter your subheading":"Enter your supporting header",value:et.text,onChange:Ft=>{const Ut=Ft.target.value;Ft.target.style.height="auto",Ft.target.style.height=`${Ft.target.scrollHeight}px`,Tt?Tt(dt,"text",Ut):$t(dt,"text",Ut)},onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),onKeyDown:Ft=>Ft.stopPropagation(),className:`w-full mt-1 p-2 border border-gray-600 rounded-lg bg-black text-white 
                   focus:ring-2 focus:ring-green focus:border-gray-400 
                   placeholder-gray-400 leading-snug resize-none transition-all duration-200`,style:{minHeight:"3.5rem",lineHeight:"1.4"}}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-3",children:["left","center","right"].map(Ft=>jsxRuntimeExports.jsx("button",{type:"button",onClick:Ut=>{Ut.stopPropagation(),$t(dt,"alignment",Ft)},className:`px-3 py-1 text-xs rounded border transition-all
              ${et.alignment===Ft?"bg-green-600/20 border-green-500 text-green-400":"border-gray-600 text-gray-400 hover:border-gray-400"}
            `,children:Ft.charAt(0).toUpperCase()+Ft.slice(1)},Ft))})]})}function ListHeadingBlock({block:et,index:dt,updateBlock:$t,updateChildBlock:kt,openAIModal:Tt,containerIndex:Dt}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"font-semibold text-sm mb-1",children:"List Heading (bold line above bullet list)"}),jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Tt({blockType:"list_heading",blockIndex:dt,updateChildBlock:kt,containerIndex:Dt,currentText:et.text,role:et.aiRole||"body"}),onPointerDown:Ft=>Ft.stopPropagation(),className:`
      text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white
      hover:bg-royalPurple/80
      transition
    `,title:"Use AI to write or improve this copy",children:"AI"})}),jsxRuntimeExports.jsx("textarea",{rows:2,placeholder:"e.g. LABEL FOR YOUR BULLETED LISTS",value:et.text,onChange:Ft=>{Ft.target.style.height="auto",Ft.target.style.height=`${Ft.target.scrollHeight}px`,$t(dt,"text",Ft.target.value)},onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),onKeyDown:Ft=>Ft.stopPropagation(),className:`w-full mt-1 p-2 border border-gray-600 rounded-lg bg-black text-white 
                   focus:ring-2 focus:ring-green focus:border-gray-400 
                   placeholder-gray-400 leading-snug resize-none transition-all duration-200`,style:{minHeight:"3.5rem",lineHeight:"1.4"}}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-3",children:["left","center","right"].map(Ft=>jsxRuntimeExports.jsx("button",{type:"button",onClick:Ut=>{Ut.stopPropagation(),$t(dt,"alignment",Ft)},className:`px-3 py-1 text-xs rounded border transition-all
              ${et.alignment===Ft?"bg-green-600/20 border-green-500 text-green-400":"border-gray-600 text-gray-400 hover:border-gray-400"}
            `,children:Ft.charAt(0).toUpperCase()+Ft.slice(1)},Ft))})]})}function ParagraphBlock({block:et,index:dt,updateBlock:$t,updateChildBlock:kt,openAIModal:Tt,containerIndex:Dt}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-1",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Paragraph"})}),jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Tt({blockType:"paragraph",blockIndex:dt,updateChildBlock:kt,containerIndex:Dt,currentText:et.text,role:et.aiRole||"body"}),onPointerDown:Ft=>Ft.stopPropagation(),className:`
      text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white
      hover:bg-royalPurple/80
      transition
    `,title:"Use AI to write or improve this copy",children:"AI"})}),jsxRuntimeExports.jsx("textarea",{value:et.text,onChange:Ft=>$t(dt,"text",Ft.target.value),onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),onKeyDown:Ft=>Ft.stopPropagation(),className:"w-full mt-1 p-2 border rounded h-24 bg-black text-white border-gray-600",placeholder:et.bulleted?"Enter list items, one per line":"Enter your paragraph text"}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[jsxRuntimeExports.jsxs("select",{value:et.alignment||"left",onChange:Ft=>$t(dt,"alignment",Ft.target.value),onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),className:`appearance-none bg-black text-white border border-gray-600 rounded-md px-3 py-2 pr-8 
                     text-sm focus:ring-2 focus:ring-silver focus:outline-none cursor-pointer w-fit`,children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-400",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.bulleted||!1,onChange:Ft=>$t(dt,"bulleted",Ft.target.checked),onFocus:Ft=>Ft.stopPropagation(),onPointerDown:Ft=>Ft.stopPropagation(),className:"w-4 h-4 accent-green-500"}),"Bullet List"]})]})]})}function normalizeVideoUrl(et){if(!et)return"";const dt=et.trim();return dt.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${dt.split("watch?v=")[1].split(/[?&]/)[0]}?rel=0&modestbranding=1`:dt.includes("youtube.com/shorts/")?`https://www.youtube.com/embed/${dt.split("shorts/")[1].split(/[?&]/)[0]}?rel=0&modestbranding=1`:dt.includes("youtu.be/")?`https://www.youtube.com/embed/${dt.split("youtu.be/")[1].split(/[?&]/)[0]}?rel=0&modestbranding=1`:dt.includes("vimeo.com")&&!dt.includes("player.vimeo.com")?`https://player.vimeo.com/video/${dt.split("vimeo.com/")[1].split(/[?&]/)[0]}`:dt}function VideoBlock({block:et,index:dt,updateBlock:$t}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-1",children:"Video URL (YouTube or Vimeo)"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://www.youtube.com/watch?v=xxxx",value:et.url||"",onChange:kt=>$t(dt,"url",kt.target.value),className:"w-full mb-3 p-2 rounded-md bg-[#0F172A] border border-gray-700 text-gray-100"}),jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-1",children:"Caption (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter caption text",value:et.caption||"",onChange:kt=>$t(dt,"caption",kt.target.value),className:"w-full mb-4 p-2 rounded-md bg-[#0F172A] border border-gray-700 text-gray-100"}),et.url&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("iframe",{src:normalizeVideoUrl(et.url),title:"Video Preview",className:"w-full aspect-video rounded-lg border border-gray-700 shadow-md",allow:"autoplay; fullscreen"})})]})}function DividerBlock({block:et,index:dt,updateBlock:$t}){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[jsxRuntimeExports.jsx("label",{children:"Height (px)"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.height||40,onChange:kt=>$t(dt,"height",parseInt(kt.target.value)),className:"w-24 bg-gray-800 border border-gray-600 rounded px-2 py-1 text-white"}),jsxRuntimeExports.jsx("label",{children:"Line Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.color||"#FFFFFF",onChange:kt=>$t(dt,"color",kt.target.value)}),jsxRuntimeExports.jsx("label",{children:"Style"}),jsxRuntimeExports.jsxs("select",{value:et.style||"line",onChange:kt=>$t(dt,"style",kt.target.value),className:"bg-gray-800 border border-gray-600 rounded px-2 py-1 text-white",children:[jsxRuntimeExports.jsx("option",{value:"line",children:"Line Divider"}),jsxRuntimeExports.jsx("option",{value:"space",children:"Spacer Only"})]})]})}const getLabelContrast=et=>{if(!et)return"#1f2937";const dt=et.replace("#",""),$t=parseInt(dt.substring(0,2),16),kt=parseInt(dt.substring(2,4),16),Tt=parseInt(dt.substring(4,6),16);return($t*299+kt*587+Tt*114)/1e3>160?"#1f2937":"#f3f4f6"};function OfferBannerBlock({block:et,index:dt,updateBlock:$t,bgTheme:kt}){return jsxRuntimeExports.jsx("div",{className:"rounded-xl p-6 mt-3 border border-gray-700 bg-[#0b0f19]",children:jsxRuntimeExports.jsxs("div",{className:"rounded-lg p-6 mb-8",style:{background:kt,outline:"1px dashed rgba(255,255,255,0.15)"},children:[jsxRuntimeExports.jsxs("div",{className:"mt-20 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold mb-4",style:{color:et.text_color||"#000000"},children:et.text||" Limited Time Offer! Get your free eBook today!"}),et.button_text&&jsxRuntimeExports.jsx("button",{className:"inline-block px-6 py-3 rounded-lg font-semibold shadow-lg transition-transform transform hover:scale-105",style:{background:et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#F285C3"}, ${et.gradient_end||"#7bed9f"})`:et.bg_color||"#F285C3",color:et.button_text_color||et.text_color||"#ffffff",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},children:et.button_text})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||kt)},children:"Banner Message"}),jsxRuntimeExports.jsx("textarea",{placeholder:" Limited Time Offer! Get your free eBook today!",value:et.text||"",onChange:Tt=>$t(dt,"text",Tt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1 resize-none h-20"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||kt)},children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#000000",onChange:Tt=>$t(dt,"text_color",Tt.target.value),className:"w-10 h-10 rounded cursor-pointer color-circle"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color||"#ffffff"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||kt)},children:"Use Gradient Button"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:Tt=>$t(dt,"use_gradient",Tt.target.checked)})]}),et.use_gradient?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-400",children:"Start Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#F285C3",onChange:Tt=>$t(dt,"gradient_start",Tt.target.value),className:"w-full h-10 rounded cursor-pointer color-circle"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-400",children:"End Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#7bed9f",onChange:Tt=>$t(dt,"gradient_end",Tt.target.value),className:"w-full h-10 rounded cursor-pointer color-circle"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-400",children:"Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:Tt=>$t(dt,"gradient_direction",Tt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold mt-3",style:{color:getLabelContrast(et.bg_color||kt)},children:"Solid Button Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#F285C3",onChange:Tt=>$t(dt,"bg_color",Tt.target.value),className:"color-circle"}),jsxRuntimeExports.jsx("div",{className:"w-24",children:jsxRuntimeExports.jsx("input",{type:"text",value:(et.bg_color||"#F285C3").toUpperCase(),onChange:Tt=>{const Dt=Tt.target.value.toUpperCase();$t(dt,"bg_color",Dt)},className:"w-full text-xs bg-black border border-gray-700 rounded px-2 py-1 text-gray-300",placeholder:"#F285C3"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||kt)},children:"Button Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_text_color||"#ffffff",onChange:Tt=>$t(dt,"button_text_color",Tt.target.value),className:"w-10 h-10 rounded cursor-pointer color-circle"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.button_text_color})]}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Claim Offer",value:et.button_text||"",onChange:Tt=>$t(dt,"button_text",Tt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsxs("div",{className:"mt-5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:getLabelContrast(et.bg_color||kt)},children:"Offer Type"}),jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsxs("select",{value:et.offer_type||"free",onChange:Tt=>$t(dt,"offer_type",Tt.target.value),className:"w-full p-2 pr-10 border border-gray-600 rounded bg-black text-white appearance-none",children:[jsxRuntimeExports.jsx("option",{value:"free",children:"Email Download"}),jsxRuntimeExports.jsx("option",{value:"paid",children:"Stripe Checkout"})]}),jsxRuntimeExports.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-300",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-4 h-4",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})})]})]})]})})}function CalendlyBlock({block:et,index:dt,updateBlock:$t}){return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 shadow-inner bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Calendly URL"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://calendly.com/yourname/meeting",value:et.calendly_url||"",onChange:kt=>$t(dt,"calendly_url",kt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4",children:"Section Title"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Book a Call",value:et.title||"",onChange:kt=>$t(dt,"title",kt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Title Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.title_color||"#FFFFFF",onChange:kt=>$t(dt,"title_color",kt.target.value),className:"w-10 h-10 rounded cursor-pointer color-circle"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.title_color||"#FFFFFF"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4",children:"Embed Height (px)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"400",max:"1200",step:"10",placeholder:"700",value:et.height||700,onChange:kt=>$t(dt,"height",parseInt(kt.target.value,10)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"})]})}function SocialLinksBlock({block:et,index:dt,updateBlock:$t}){const kt=!!et.show_borders,Tt=["instagram","threads","twitter","youtube","linkedin","facebook","tiktok","pinterest","substack"],Dt={instagram:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg",threads:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/threads.svg",twitter:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/x.svg",youtube:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg",linkedin:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg",facebook:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg",tiktok:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg",pinterest:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/pinterest.svg",substack:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/substack.svg"};return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#1f2937] border border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Social Links Row"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Tt.map(Ft=>{var Ut;return jsxRuntimeExports.jsx("input",{type:"url",placeholder:`${Ft.charAt(0).toUpperCase()+Ft.slice(1)} URL`,value:((Ut=et.links)==null?void 0:Ut[Ft])||"",onChange:Ht=>$t(dt,"links",{...et.links,[Ft]:Ht.target.value}),className:"w-full p-2 rounded bg-black text-white text-sm border border-gray-700 placeholder-gray-400"},Ft)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"center",onChange:Ft=>$t(dt,"alignment",Ft.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Icon Style"}),jsxRuntimeExports.jsxs("select",{value:et.icon_style||"color",onChange:Ft=>{const Ut=Ft.target.value;$t(dt,"icon_style",Ut),Ut!=="mono"&&$t(dt,"show_borders",!1)},className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"color",children:"Full Color"}),jsxRuntimeExports.jsx("option",{value:"mono",children:"Monochrome"})]})]}),et.icon_style==="mono"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Icon Borders"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t(dt,"show_borders",!kt),className:`px-4 py-2 rounded-md text-sm border transition
        ${kt?"bg-white text-black border-white":"bg-black text-white border-gray-700"}`,children:kt?"On":"Off"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 w-32",children:"Icon Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.icon_color||"#ffffff",onChange:Ft=>$t(dt,"icon_color",Ft.target.value),className:"w-10 h-10 rounded border border-gray-600 cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.icon_color||"#ffffff",onChange:Ft=>{const Ut=Ft.target.value;/^#([0-9A-Fa-f]{0,6})$/.test(Ut)&&$t(dt,"icon_color",Ut)},placeholder:"#ffffff",className:"w-24 p-2 rounded bg-black text-white text-sm border border-gray-700 placeholder-gray-500"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400 mb-2 tracking-wide",children:"Live Preview"}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-white/10 bg-black/20 px-6 py-5",children:jsxRuntimeExports.jsx("div",{className:"flex items-center gap-4 flex-wrap",style:{justifyContent:et.alignment==="center"?"center":et.alignment==="right"?"flex-end":"flex-start"},children:Object.entries(et.links||{}).filter(([Ft,Ut])=>Ut).map(([Ft],Ut)=>{const Ht=et.icon_style==="mono"?"rgba(255,255,255,0.75)":et.icon_color||"#ffffff";return jsxRuntimeExports.jsx("div",{title:Ft,className:"flex items-center justify-center cursor-pointer transition-all duration-200 hover:scale-110 hover:opacity-90 hover:shadow-[0_0_12px_rgba(255,255,255,0.35)]",style:{width:kt?34:26,height:kt?34:26,borderRadius:kt?10:0,border:kt?`1.25px solid ${Ht}`:"none"},children:jsxRuntimeExports.jsx("div",{style:{width:20,height:20,WebkitMask:`url(${Dt[Ft]}) no-repeat center / contain`,mask:`url(${Dt[Ft]}) no-repeat center / contain`,backgroundColor:Ht}})},Ft)})})})]})]})}function VerifiedReviewsBlock({block:et,index:dt,updateBlock:$t}){return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"Verified Reviews"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Show Reviews Section"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.enabled!==!1,onChange:kt=>$t(dt,"enabled",kt.target.checked)})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 rounded bg-black/40 text-xs text-gray-400",children:"This section automatically displays verified customer reviews. Styling and layout are managed by the system. This will not show in preview panel."}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300",children:["Reviews Text Color",jsxRuntimeExports.jsx("span",{className:"block text-xs font-normal text-gray-400 mt-1",children:"Used only for the reviews section on the live page"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.reviews_text_color||"#000000",onChange:kt=>$t(dt,"reviews_text_color",kt.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.reviews_text_color||"",onChange:kt=>{const Tt=kt.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Tt)&&$t(dt,"reviews_text_color",Tt.startsWith("#")?Tt:`#${Tt}`)},placeholder:"#000000",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]})]})]})}function CountdownTimerPreview({targetDate:et,variant:dt="minimal",bgTheme:$t,glowColor:kt,textColor:Tt}){const[Dt,Ft]=reactExports.useState("");reactExports.useEffect(()=>{if(!et)return;const er=setInterval(()=>{const rr=new Date,nr=new Date(et)-rr;if(nr<=0){Ft("00:00:00:00"),clearInterval(er);return}const ir=Math.floor(nr/(1e3*60*60*24)),or=Math.floor(nr/(1e3*60*60)%24),lr=Math.floor(nr/(1e3*60)%60),cr=Math.floor(nr/1e3%60);Ft(`${String(ir).padStart(2,"0")}:${String(or).padStart(2,"0")}:${String(lr).padStart(2,"0")}:${String(cr).padStart(2,"0")}`)},1e3);return()=>clearInterval(er)},[et]);const Ht=(()=>!$t||$t.includes("emerald")?"#10b981":$t.includes("royal")||$t.includes("purple")?"#8b5cf6":$t.includes("pink")||$t.includes("rose")?"#ec4899":$t.includes("yellow")||$t.includes("amber")?"#facc15":$t.includes("blue")?"#3b82f6":$t.includes("red")?"#ef4444":"#10b981")(),Kt=Tt,Yt=kt||Ht,Jt="font-mono tracking-widest transition-all duration-500 inline-block",Zt={minimal:"text-3xl",boxed:"text-3xl bg-[#0f172a] border border-gray-700 px-6 py-3 rounded-lg shadow-md",glow:"text-3xl animate-pulse"};return jsxRuntimeExports.jsx("div",{className:`${Jt} ${Zt[dt]||Zt.minimal}`,style:{color:Kt,...dt==="glow"?{textShadow:`
          0 0 6px ${Yt},
          0 0 14px ${Yt},
          0 0 28px ${Yt}
        `}:{}},children:Dt||"00:00:00:00"})}function CountdownBlock({block:et,index:dt,updateBlock:$t}){const kt={minimal:"border-gray-700 bg-transparent",boxed:"bg-black/60 border border-gray-600 shadow-md",glow:"bg-black/70 border border-green/50 shadow-[0_0_20px_rgba(34,197,94,0.35)]"};return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"Countdown Timer Settings"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Headline Text"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Offer Ends In:",value:et.text||"",onChange:Tt=>$t(dt,"text",Tt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#FFFFFF",onChange:Tt=>$t(dt,"text_color",Tt.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.text_color||"",onChange:Tt=>{const Dt=Tt.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Dt)&&$t(dt,"text_color",Dt.startsWith("#")?Dt:`#${Dt}`)},placeholder:"#ffffff",className:"w-24 flex-none px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),et.style_variant==="glow"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Glow Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.glow_color||"#10b981",onChange:Tt=>$t(dt,"glow_color",Tt.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.glow_color||"",onChange:Tt=>{const Dt=Tt.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Dt)&&$t(dt,"glow_color",Dt.startsWith("#")?Dt:`#${Dt}`)},placeholder:"#10b981",className:"w-24 flex-none px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Target Date & Time"}),jsxRuntimeExports.jsx("input",{type:"datetime-local",value:et.target_date?new Date(et.target_date).toISOString().slice(0,16):"",onChange:Tt=>{const Dt=new Date(Tt.target.value).toISOString();$t(dt,"target_date",Dt)},onFocus:Tt=>Tt.stopPropagation(),onPointerDown:Tt=>Tt.stopPropagation(),onClick:Tt=>{var Dt,Ft;Tt.stopPropagation(),(Ft=(Dt=Tt.currentTarget).showPicker)==null||Ft.call(Dt)},className:"w-full mt-1 p-2 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"center",onChange:Tt=>$t(dt,"alignment",Tt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Style"}),jsxRuntimeExports.jsxs("select",{value:et.style_variant||"minimal",onChange:Tt=>$t(dt,"style_variant",Tt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"minimal",children:"Minimal"}),jsxRuntimeExports.jsx("option",{value:"boxed",children:"Boxed"}),jsxRuntimeExports.jsx("option",{value:"glow",children:"Neon Glow"})]})]}),jsxRuntimeExports.jsxs("div",{className:`
    mt-6
    p-4
    rounded-lg
    text-center
    transition-all
    duration-300
    ${kt[et.style_variant||"minimal"]}
  `,style:{color:et.text_color||"#FFFFFF"},children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-2",children:et.text}),jsxRuntimeExports.jsx(CountdownTimerPreview,{targetDate:et.target_date,variant:et.style_variant,textColor:et.text_color||"#FFFFFF",glowColor:et.glow_color})]})]})}function StripeCheckoutBlock({block:et,index:dt,updateBlock:$t,pdfList:kt,bgTheme:Tt,landing:Dt}){const[Ft,Ut]=reactExports.useState(!1),Ht=et.product_source||"internal",Kt=!!et.pdf_url||!!et.external_file_url;return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"Stripe Checkout Button"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 mb-12 p-6 text-center border border-gray-700 rounded-lg",style:{textAlign:et.alignment,background:et.match_main_bg?adjustForLandingOverlay(Tt):Tt||"#0F172A"},children:[jsxRuntimeExports.jsx("button",{disabled:!Kt,style:{pointerEvents:Kt?"auto":"none",background:et.button_color||"#10b981",color:et.text_color||"#000000"},className:`px-6 py-3 rounded-lg font-semibold shadow-lg transition-transform
    ${Kt?"hover:scale-105":"opacity-50 cursor-not-allowed"}
  `,children:et.button_text||"Buy & Download Book"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-2",children:Kt?`$${Number(et.price)>0?Number(et.price).toFixed(2):"10.00"}`:"Select a product to enable checkout"})]}),et.external_file_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Uploaded File:",jsxRuntimeExports.jsx("a",{href:et.external_file_url,target:"_blank",rel:"noopener noreferrer",className:"text-green underline ml-1",children:"Preview File"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Product Source"}),jsxRuntimeExports.jsxs("select",{value:Ht,onChange:Yt=>{const Jt=Yt.target.value;$t(dt,"product_source",Jt),Jt==="internal"&&($t(dt,"external_file_url",""),$t(dt,"external_file_name","")),Jt==="external"&&$t(dt,"pdf_url","")},className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1",children:[jsxRuntimeExports.jsx("option",{value:"",disabled:!0,children:"Select product source"}),jsxRuntimeExports.jsx("option",{value:"internal",children:"The Messy Attic Product"}),jsxRuntimeExports.jsx("option",{value:"external",children:"Upload Existing Product"})]}),et.product_source==="internal"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Select Book to Sell"}),jsxRuntimeExports.jsxs("select",{value:et.pdf_url||"",onChange:Yt=>$t(dt,"pdf_url",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Select a Completed Book --"}),kt==null?void 0:kt.filter(Yt=>Yt.status==="completed"&&Yt.pdf_url).map(Yt=>jsxRuntimeExports.jsxs("option",{value:Yt.pdf_url,children:[Yt.title||"Untitled Book","  (Ready)"]},Yt.id))]})]}),et.product_source==="external"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4",children:"Upload Your Product"}),jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf,.zip",onChange:async Yt=>{var Zt,er,rr,sr;const Jt=(Zt=Yt.target.files)==null?void 0:Zt[0];if(Jt&&!Ft){Ut(!0);try{if(!["application/pdf","application/zip"].includes(Jt.type)){alert("Only Book or ZIP files are allowed");return}const nr=new FormData;nr.append("file",Jt),nr.append("landingId",Dt.id),nr.append("blockId",et.id);const or=(await axiosInstance.post("/landing/upload-product",nr,{headers:{"Content-Type":"multipart/form-data"}})).data;if(!(or!=null&&or.success)){console.error(" Upload failed:",or),alert((or==null?void 0:or.message)||"Upload failed");return}$t(dt,"product_source","external"),$t(dt,"external_file_url",or.url),$t(dt,"external_file_name",or.file_name||Jt.name),Yt.target.value=""}catch(nr){console.error(" Upload error:",((er=nr.response)==null?void 0:er.data)||nr.message),alert(((sr=(rr=nr.response)==null?void 0:rr.data)==null?void 0:sr.message)||"Upload failed")}finally{Ut(!1)}}},disabled:Ft,className:`w-full p-2 bg-black border border-gray-700 rounded text-white
    ${Ft?"opacity-50 cursor-not-allowed":""}
  `}),et.external_file_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green mt-2",children:["Uploaded: ",et.external_file_name]})]}),et.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Selected File:",jsxRuntimeExports.jsx("a",{href:et.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"text-green underline ml-1",children:"Preview Book"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Button Label"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buy & Download Book",value:et.button_text||"",onChange:Yt=>$t(dt,"button_text",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Price (USD)"}),jsxRuntimeExports.jsx("input",{type:"text",inputMode:"decimal",value:et.price??"",onChange:Yt=>$t(dt,"price",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-8 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Background"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_color||"#10b981",onChange:Yt=>$t(dt,"button_color",Yt.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter hex",value:et.button_color||"",onChange:Yt=>$t(dt,"button_color",Yt.target.value),className:"flex-1 p-2 rounded bg-black text-white border border-gray-700 text-sm"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.button_color})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-3 sm:mt-0",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#000000",onChange:Yt=>$t(dt,"text_color",Yt.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Enter hex",value:et.text_color||"",onChange:Yt=>$t(dt,"text_color",Yt.target.value),className:"flex-1 p-2 rounded bg-black text-white border border-gray-700 text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"center",onChange:Yt=>$t(dt,"alignment",Yt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]})]})]})}function ReferralButtonBlock({block:et,index:dt,updateBlock:$t}){return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"Referral Signup Button"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Label"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Sign Up Now",value:et.button_text||"",onChange:kt=>{const Tt=kt.target.value;$t(dt,"button_text",Tt),$t(dt,"text",Tt)},className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-8 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Background"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_color||"#10b981",onChange:kt=>$t(dt,"button_color",kt.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.button_color||"#10b981"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-3 sm:mt-0",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#000000",onChange:kt=>$t(dt,"text_color",kt.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color||"#000000"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"center",onChange:kt=>$t(dt,"alignment",kt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-6 text-center border border-gray-700 rounded-lg",style:{textAlign:et.alignment},children:[jsxRuntimeExports.jsx("button",{className:"px-6 py-3 rounded-lg font-semibold shadow-lg transition-transform hover:scale-105",style:{background:et.button_color||"#10b981",color:et.text_color||"#000000"},children:et.button_text||"Sign Up Now"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3 italic",children:"This button will automatically track new signups under your referral."})]})]})}function useCombinedRefs(){for(var et=arguments.length,dt=new Array(et),$t=0;$t<et;$t++)dt[$t]=arguments[$t];return reactExports.useMemo(()=>kt=>{dt.forEach(Tt=>Tt(kt))},dt)}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(et){const dt=Object.prototype.toString.call(et);return dt==="[object Window]"||dt==="[object global]"}function isNode(et){return"nodeType"in et}function getWindow(et){var dt,$t;return et?isWindow(et)?et:isNode(et)&&(dt=($t=et.ownerDocument)==null?void 0:$t.defaultView)!=null?dt:window:window}function isDocument(et){const{Document:dt}=getWindow(et);return et instanceof dt}function isHTMLElement(et){return isWindow(et)?!1:et instanceof getWindow(et).HTMLElement}function isSVGElement(et){return et instanceof getWindow(et).SVGElement}function getOwnerDocument(et){return et?isWindow(et)?et.document:isNode(et)?isDocument(et)?et:isHTMLElement(et)||isSVGElement(et)?et.ownerDocument:document:document:document}const useIsomorphicLayoutEffect$6=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(et){const dt=reactExports.useRef(et);return useIsomorphicLayoutEffect$6(()=>{dt.current=et}),reactExports.useCallback(function(){for(var $t=arguments.length,kt=new Array($t),Tt=0;Tt<$t;Tt++)kt[Tt]=arguments[Tt];return dt.current==null?void 0:dt.current(...kt)},[])}function useInterval(){const et=reactExports.useRef(null),dt=reactExports.useCallback((kt,Tt)=>{et.current=setInterval(kt,Tt)},[]),$t=reactExports.useCallback(()=>{et.current!==null&&(clearInterval(et.current),et.current=null)},[]);return[dt,$t]}function useLatestValue(et,dt){dt===void 0&&(dt=[et]);const $t=reactExports.useRef(et);return useIsomorphicLayoutEffect$6(()=>{$t.current!==et&&($t.current=et)},dt),$t}function useLazyMemo(et,dt){const $t=reactExports.useRef();return reactExports.useMemo(()=>{const kt=et($t.current);return $t.current=kt,kt},[...dt])}function useNodeRef(et){const dt=useEvent(et),$t=reactExports.useRef(null),kt=reactExports.useCallback(Tt=>{Tt!==$t.current&&(dt==null||dt(Tt,$t.current)),$t.current=Tt},[]);return[$t,kt]}function usePrevious(et){const dt=reactExports.useRef();return reactExports.useEffect(()=>{dt.current=et},[et]),dt.current}let ids={};function useUniqueId(et,dt){return reactExports.useMemo(()=>{if(dt)return dt;const $t=ids[et]==null?0:ids[et]+1;return ids[et]=$t,et+"-"+$t},[et,dt])}function createAdjustmentFn(et){return function(dt){for(var $t=arguments.length,kt=new Array($t>1?$t-1:0),Tt=1;Tt<$t;Tt++)kt[Tt-1]=arguments[Tt];return kt.reduce((Dt,Ft)=>{const Ut=Object.entries(Ft);for(const[Ht,Kt]of Ut){const Yt=Dt[Ht];Yt!=null&&(Dt[Ht]=Yt+et*Kt)}return Dt},{...dt})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(et){return"clientX"in et&&"clientY"in et}function isKeyboardEvent(et){if(!et)return!1;const{KeyboardEvent:dt}=getWindow(et.target);return dt&&et instanceof dt}function isTouchEvent(et){if(!et)return!1;const{TouchEvent:dt}=getWindow(et.target);return dt&&et instanceof dt}function getEventCoordinates(et){if(isTouchEvent(et)){if(et.touches&&et.touches.length){const{clientX:dt,clientY:$t}=et.touches[0];return{x:dt,y:$t}}else if(et.changedTouches&&et.changedTouches.length){const{clientX:dt,clientY:$t}=et.changedTouches[0];return{x:dt,y:$t}}}return hasViewportRelativeCoordinates(et)?{x:et.clientX,y:et.clientY}:null}const CSS=Object.freeze({Translate:{toString(et){if(!et)return;const{x:dt,y:$t}=et;return"translate3d("+(dt?Math.round(dt):0)+"px, "+($t?Math.round($t):0)+"px, 0)"}},Scale:{toString(et){if(!et)return;const{scaleX:dt,scaleY:$t}=et;return"scaleX("+dt+") scaleY("+$t+")"}},Transform:{toString(et){if(et)return[CSS.Translate.toString(et),CSS.Scale.toString(et)].join(" ")}},Transition:{toString(et){let{property:dt,duration:$t,easing:kt}=et;return dt+" "+$t+"ms "+kt}}}),SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(et){return et.matches(SELECTOR)?et:et.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(et){let{id:dt,value:$t}=et;return React$2.createElement("div",{id:dt,style:hiddenStyles},$t)}function LiveRegion(et){let{id:dt,announcement:$t,ariaLiveType:kt="assertive"}=et;const Tt={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React$2.createElement("div",{id:dt,style:Tt,role:"status","aria-live":kt,"aria-atomic":!0},$t)}function useAnnouncement(){const[et,dt]=reactExports.useState("");return{announce:reactExports.useCallback(kt=>{kt!=null&&dt(kt)},[]),announcement:et}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(et){const dt=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!dt)throw new Error("useDndMonitor must be used within a children of <DndContext>");return dt(et)},[et,dt])}function useDndMonitorProvider(){const[et]=reactExports.useState(()=>new Set),dt=reactExports.useCallback(kt=>(et.add(kt),()=>et.delete(kt)),[et]);return[reactExports.useCallback(kt=>{let{type:Tt,event:Dt}=kt;et.forEach(Ft=>{var Ut;return(Ut=Ft[Tt])==null?void 0:Ut.call(Ft,Dt)})},[et]),dt]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(et){let{active:dt}=et;return"Picked up draggable item "+dt.id+"."},onDragOver(et){let{active:dt,over:$t}=et;return $t?"Draggable item "+dt.id+" was moved over droppable area "+$t.id+".":"Draggable item "+dt.id+" is no longer over a droppable area."},onDragEnd(et){let{active:dt,over:$t}=et;return $t?"Draggable item "+dt.id+" was dropped over droppable area "+$t.id:"Draggable item "+dt.id+" was dropped."},onDragCancel(et){let{active:dt}=et;return"Dragging was cancelled. Draggable item "+dt.id+" was dropped."}};function Accessibility(et){let{announcements:dt=defaultAnnouncements,container:$t,hiddenTextDescribedById:kt,screenReaderInstructions:Tt=defaultScreenReaderInstructions}=et;const{announce:Dt,announcement:Ft}=useAnnouncement(),Ut=useUniqueId("DndLiveRegion"),[Ht,Kt]=reactExports.useState(!1);if(reactExports.useEffect(()=>{Kt(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(Jt){let{active:Zt}=Jt;Dt(dt.onDragStart({active:Zt}))},onDragMove(Jt){let{active:Zt,over:er}=Jt;dt.onDragMove&&Dt(dt.onDragMove({active:Zt,over:er}))},onDragOver(Jt){let{active:Zt,over:er}=Jt;Dt(dt.onDragOver({active:Zt,over:er}))},onDragEnd(Jt){let{active:Zt,over:er}=Jt;Dt(dt.onDragEnd({active:Zt,over:er}))},onDragCancel(Jt){let{active:Zt,over:er}=Jt;Dt(dt.onDragCancel({active:Zt,over:er}))}}),[Dt,dt])),!Ht)return null;const Yt=React$2.createElement(React$2.Fragment,null,React$2.createElement(HiddenText,{id:kt,value:Tt.draggable}),React$2.createElement(LiveRegion,{id:Ut,announcement:Ft}));return $t?reactDomExports.createPortal(Yt,$t):Yt}var Action;(function(et){et.DragStart="dragStart",et.DragMove="dragMove",et.DragEnd="dragEnd",et.DragCancel="dragCancel",et.DragOver="dragOver",et.RegisterDroppable="registerDroppable",et.SetDroppableDisabled="setDroppableDisabled",et.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop$9(){}function useSensor(et,dt){return reactExports.useMemo(()=>({sensor:et,options:dt??{}}),[et,dt])}function useSensors(){for(var et=arguments.length,dt=new Array(et),$t=0;$t<et;$t++)dt[$t]=arguments[$t];return reactExports.useMemo(()=>[...dt].filter(kt=>kt!=null),[...dt])}const defaultCoordinates=Object.freeze({x:0,y:0});function distanceBetween(et,dt){return Math.sqrt(Math.pow(et.x-dt.x,2)+Math.pow(et.y-dt.y,2))}function sortCollisionsAsc(et,dt){let{data:{value:$t}}=et,{data:{value:kt}}=dt;return $t-kt}function sortCollisionsDesc(et,dt){let{data:{value:$t}}=et,{data:{value:kt}}=dt;return kt-$t}function getFirstCollision(et,dt){if(!et||et.length===0)return null;const[$t]=et;return dt?$t[dt]:$t}function centerOfRectangle(et,dt,$t){return dt===void 0&&(dt=et.left),$t===void 0&&($t=et.top),{x:dt+et.width*.5,y:$t+et.height*.5}}const closestCenter=et=>{let{collisionRect:dt,droppableRects:$t,droppableContainers:kt}=et;const Tt=centerOfRectangle(dt,dt.left,dt.top),Dt=[];for(const Ft of kt){const{id:Ut}=Ft,Ht=$t.get(Ut);if(Ht){const Kt=distanceBetween(centerOfRectangle(Ht),Tt);Dt.push({id:Ut,data:{droppableContainer:Ft,value:Kt}})}}return Dt.sort(sortCollisionsAsc)};function getIntersectionRatio(et,dt){const $t=Math.max(dt.top,et.top),kt=Math.max(dt.left,et.left),Tt=Math.min(dt.left+dt.width,et.left+et.width),Dt=Math.min(dt.top+dt.height,et.top+et.height),Ft=Tt-kt,Ut=Dt-$t;if(kt<Tt&&$t<Dt){const Ht=dt.width*dt.height,Kt=et.width*et.height,Yt=Ft*Ut,Jt=Yt/(Ht+Kt-Yt);return Number(Jt.toFixed(4))}return 0}const rectIntersection=et=>{let{collisionRect:dt,droppableRects:$t,droppableContainers:kt}=et;const Tt=[];for(const Dt of kt){const{id:Ft}=Dt,Ut=$t.get(Ft);if(Ut){const Ht=getIntersectionRatio(Ut,dt);Ht>0&&Tt.push({id:Ft,data:{droppableContainer:Dt,value:Ht}})}}return Tt.sort(sortCollisionsDesc)};function adjustScale(et,dt,$t){return{...et,scaleX:dt&&$t?dt.width/$t.width:1,scaleY:dt&&$t?dt.height/$t.height:1}}function getRectDelta(et,dt){return et&&dt?{x:et.left-dt.left,y:et.top-dt.top}:defaultCoordinates}function createRectAdjustmentFn(et){return function($t){for(var kt=arguments.length,Tt=new Array(kt>1?kt-1:0),Dt=1;Dt<kt;Dt++)Tt[Dt-1]=arguments[Dt];return Tt.reduce((Ft,Ut)=>({...Ft,top:Ft.top+et*Ut.y,bottom:Ft.bottom+et*Ut.y,left:Ft.left+et*Ut.x,right:Ft.right+et*Ut.x}),{...$t})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(et){if(et.startsWith("matrix3d(")){const dt=et.slice(9,-1).split(/, /);return{x:+dt[12],y:+dt[13],scaleX:+dt[0],scaleY:+dt[5]}}else if(et.startsWith("matrix(")){const dt=et.slice(7,-1).split(/, /);return{x:+dt[4],y:+dt[5],scaleX:+dt[0],scaleY:+dt[3]}}return null}function inverseTransform(et,dt,$t){const kt=parseTransform(dt);if(!kt)return et;const{scaleX:Tt,scaleY:Dt,x:Ft,y:Ut}=kt,Ht=et.left-Ft-(1-Tt)*parseFloat($t),Kt=et.top-Ut-(1-Dt)*parseFloat($t.slice($t.indexOf(" ")+1)),Yt=Tt?et.width/Tt:et.width,Jt=Dt?et.height/Dt:et.height;return{width:Yt,height:Jt,top:Kt,right:Ht+Yt,bottom:Kt+Jt,left:Ht}}const defaultOptions={ignoreTransform:!1};function getClientRect(et,dt){dt===void 0&&(dt=defaultOptions);let $t=et.getBoundingClientRect();if(dt.ignoreTransform){const{transform:Kt,transformOrigin:Yt}=getWindow(et).getComputedStyle(et);Kt&&($t=inverseTransform($t,Kt,Yt))}const{top:kt,left:Tt,width:Dt,height:Ft,bottom:Ut,right:Ht}=$t;return{top:kt,left:Tt,width:Dt,height:Ft,bottom:Ut,right:Ht}}function getTransformAgnosticClientRect(et){return getClientRect(et,{ignoreTransform:!0})}function getWindowClientRect(et){const dt=et.innerWidth,$t=et.innerHeight;return{top:0,left:0,right:dt,bottom:$t,width:dt,height:$t}}function isFixed(et,dt){return dt===void 0&&(dt=getWindow(et).getComputedStyle(et)),dt.position==="fixed"}function isScrollable(et,dt){dt===void 0&&(dt=getWindow(et).getComputedStyle(et));const $t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(Tt=>{const Dt=dt[Tt];return typeof Dt=="string"?$t.test(Dt):!1})}function getScrollableAncestors(et,dt){const $t=[];function kt(Tt){if(dt!=null&&$t.length>=dt||!Tt)return $t;if(isDocument(Tt)&&Tt.scrollingElement!=null&&!$t.includes(Tt.scrollingElement))return $t.push(Tt.scrollingElement),$t;if(!isHTMLElement(Tt)||isSVGElement(Tt)||$t.includes(Tt))return $t;const Dt=getWindow(et).getComputedStyle(Tt);return Tt!==et&&isScrollable(Tt,Dt)&&$t.push(Tt),isFixed(Tt,Dt)?$t:kt(Tt.parentNode)}return et?kt(et):$t}function getFirstScrollableAncestor(et){const[dt]=getScrollableAncestors(et,1);return dt??null}function getScrollableElement(et){return!canUseDOM||!et?null:isWindow(et)?et:isNode(et)?isDocument(et)||et===getOwnerDocument(et).scrollingElement?window:isHTMLElement(et)?et:null:null}function getScrollXCoordinate(et){return isWindow(et)?et.scrollX:et.scrollLeft}function getScrollYCoordinate(et){return isWindow(et)?et.scrollY:et.scrollTop}function getScrollCoordinates(et){return{x:getScrollXCoordinate(et),y:getScrollYCoordinate(et)}}var Direction;(function(et){et[et.Forward=1]="Forward",et[et.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(et){return!canUseDOM||!et?!1:et===document.scrollingElement}function getScrollPosition(et){const dt={x:0,y:0},$t=isDocumentScrollingElement(et)?{height:window.innerHeight,width:window.innerWidth}:{height:et.clientHeight,width:et.clientWidth},kt={x:et.scrollWidth-$t.width,y:et.scrollHeight-$t.height},Tt=et.scrollTop<=dt.y,Dt=et.scrollLeft<=dt.x,Ft=et.scrollTop>=kt.y,Ut=et.scrollLeft>=kt.x;return{isTop:Tt,isLeft:Dt,isBottom:Ft,isRight:Ut,maxScroll:kt,minScroll:dt}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(et,dt,$t,kt,Tt){let{top:Dt,left:Ft,right:Ut,bottom:Ht}=$t;kt===void 0&&(kt=10),Tt===void 0&&(Tt=defaultThreshold);const{isTop:Kt,isBottom:Yt,isLeft:Jt,isRight:Zt}=getScrollPosition(et),er={x:0,y:0},rr={x:0,y:0},sr={height:dt.height*Tt.y,width:dt.width*Tt.x};return!Kt&&Dt<=dt.top+sr.height?(er.y=Direction.Backward,rr.y=kt*Math.abs((dt.top+sr.height-Dt)/sr.height)):!Yt&&Ht>=dt.bottom-sr.height&&(er.y=Direction.Forward,rr.y=kt*Math.abs((dt.bottom-sr.height-Ht)/sr.height)),!Zt&&Ut>=dt.right-sr.width?(er.x=Direction.Forward,rr.x=kt*Math.abs((dt.right-sr.width-Ut)/sr.width)):!Jt&&Ft<=dt.left+sr.width&&(er.x=Direction.Backward,rr.x=kt*Math.abs((dt.left+sr.width-Ft)/sr.width)),{direction:er,speed:rr}}function getScrollElementRect(et){if(et===document.scrollingElement){const{innerWidth:Dt,innerHeight:Ft}=window;return{top:0,left:0,right:Dt,bottom:Ft,width:Dt,height:Ft}}const{top:dt,left:$t,right:kt,bottom:Tt}=et.getBoundingClientRect();return{top:dt,left:$t,right:kt,bottom:Tt,width:et.clientWidth,height:et.clientHeight}}function getScrollOffsets(et){return et.reduce((dt,$t)=>add(dt,getScrollCoordinates($t)),defaultCoordinates)}function getScrollXOffset(et){return et.reduce((dt,$t)=>dt+getScrollXCoordinate($t),0)}function getScrollYOffset(et){return et.reduce((dt,$t)=>dt+getScrollYCoordinate($t),0)}function scrollIntoViewIfNeeded(et,dt){if(dt===void 0&&(dt=getClientRect),!et)return;const{top:$t,left:kt,bottom:Tt,right:Dt}=dt(et);getFirstScrollableAncestor(et)&&(Tt<=0||Dt<=0||$t>=window.innerHeight||kt>=window.innerWidth)&&et.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(dt,$t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const kt=getScrollableAncestors($t),Tt=getScrollOffsets(kt);this.rect={...dt},this.width=dt.width,this.height=dt.height;for(const[Dt,Ft,Ut]of properties)for(const Ht of Ft)Object.defineProperty(this,Ht,{get:()=>{const Kt=Ut(kt),Yt=Tt[Dt]-Kt;return this.rect[Ht]+Yt},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(dt){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach($t=>{var kt;return(kt=this.target)==null?void 0:kt.removeEventListener(...$t)})},this.target=dt}add(dt,$t,kt){var Tt;(Tt=this.target)==null||Tt.addEventListener(dt,$t,kt),this.listeners.push([dt,$t,kt])}}function getEventListenerTarget(et){const{EventTarget:dt}=getWindow(et);return et instanceof dt?et:getOwnerDocument(et)}function hasExceededDistance(et,dt){const $t=Math.abs(et.x),kt=Math.abs(et.y);return typeof dt=="number"?Math.sqrt($t**2+kt**2)>dt:"x"in dt&&"y"in dt?$t>dt.x&&kt>dt.y:"x"in dt?$t>dt.x:"y"in dt?kt>dt.y:!1}var EventName;(function(et){et.Click="click",et.DragStart="dragstart",et.Keydown="keydown",et.ContextMenu="contextmenu",et.Resize="resize",et.SelectionChange="selectionchange",et.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(et){et.preventDefault()}function stopPropagation(et){et.stopPropagation()}var KeyboardCode;(function(et){et.Space="Space",et.Down="ArrowDown",et.Right="ArrowRight",et.Left="ArrowLeft",et.Up="ArrowUp",et.Esc="Escape",et.Enter="Enter",et.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(et,dt)=>{let{currentCoordinates:$t}=dt;switch(et.code){case KeyboardCode.Right:return{...$t,x:$t.x+25};case KeyboardCode.Left:return{...$t,x:$t.x-25};case KeyboardCode.Down:return{...$t,y:$t.y+25};case KeyboardCode.Up:return{...$t,y:$t.y-25}}};class KeyboardSensor{constructor(dt){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=dt;const{event:{target:$t}}=dt;this.props=dt,this.listeners=new Listeners(getOwnerDocument($t)),this.windowListeners=new Listeners(getWindow($t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:dt,onStart:$t}=this.props,kt=dt.node.current;kt&&scrollIntoViewIfNeeded(kt),$t(defaultCoordinates)}handleKeyDown(dt){if(isKeyboardEvent(dt)){const{active:$t,context:kt,options:Tt}=this.props,{keyboardCodes:Dt=defaultKeyboardCodes,coordinateGetter:Ft=defaultKeyboardCoordinateGetter,scrollBehavior:Ut="smooth"}=Tt,{code:Ht}=dt;if(Dt.end.includes(Ht)){this.handleEnd(dt);return}if(Dt.cancel.includes(Ht)){this.handleCancel(dt);return}const{collisionRect:Kt}=kt.current,Yt=Kt?{x:Kt.left,y:Kt.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=Yt);const Jt=Ft(dt,{active:$t,context:kt.current,currentCoordinates:Yt});if(Jt){const Zt=subtract(Jt,Yt),er={x:0,y:0},{scrollableAncestors:rr}=kt.current;for(const sr of rr){const nr=dt.code,{isTop:ir,isRight:or,isLeft:lr,isBottom:cr,maxScroll:dr,minScroll:ur}=getScrollPosition(sr),pr=getScrollElementRect(sr),mr={x:Math.min(nr===KeyboardCode.Right?pr.right-pr.width/2:pr.right,Math.max(nr===KeyboardCode.Right?pr.left:pr.left+pr.width/2,Jt.x)),y:Math.min(nr===KeyboardCode.Down?pr.bottom-pr.height/2:pr.bottom,Math.max(nr===KeyboardCode.Down?pr.top:pr.top+pr.height/2,Jt.y))},jr=nr===KeyboardCode.Right&&!or||nr===KeyboardCode.Left&&!lr,Rr=nr===KeyboardCode.Down&&!cr||nr===KeyboardCode.Up&&!ir;if(jr&&mr.x!==Jt.x){const xr=sr.scrollLeft+Zt.x,kr=nr===KeyboardCode.Right&&xr<=dr.x||nr===KeyboardCode.Left&&xr>=ur.x;if(kr&&!Zt.y){sr.scrollTo({left:xr,behavior:Ut});return}kr?er.x=sr.scrollLeft-xr:er.x=nr===KeyboardCode.Right?sr.scrollLeft-dr.x:sr.scrollLeft-ur.x,er.x&&sr.scrollBy({left:-er.x,behavior:Ut});break}else if(Rr&&mr.y!==Jt.y){const xr=sr.scrollTop+Zt.y,kr=nr===KeyboardCode.Down&&xr<=dr.y||nr===KeyboardCode.Up&&xr>=ur.y;if(kr&&!Zt.x){sr.scrollTo({top:xr,behavior:Ut});return}kr?er.y=sr.scrollTop-xr:er.y=nr===KeyboardCode.Down?sr.scrollTop-dr.y:sr.scrollTop-ur.y,er.y&&sr.scrollBy({top:-er.y,behavior:Ut});break}}this.handleMove(dt,add(subtract(Jt,this.referenceCoordinates),er))}}}handleMove(dt,$t){const{onMove:kt}=this.props;dt.preventDefault(),kt($t)}handleEnd(dt){const{onEnd:$t}=this.props;dt.preventDefault(),this.detach(),$t()}handleCancel(dt){const{onCancel:$t}=this.props;dt.preventDefault(),this.detach(),$t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(et,dt,$t)=>{let{keyboardCodes:kt=defaultKeyboardCodes,onActivation:Tt}=dt,{active:Dt}=$t;const{code:Ft}=et.nativeEvent;if(kt.start.includes(Ft)){const Ut=Dt.activatorNode.current;return Ut&&et.target!==Ut?!1:(et.preventDefault(),Tt==null||Tt({event:et.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(et){return!!(et&&"distance"in et)}function isDelayConstraint(et){return!!(et&&"delay"in et)}class AbstractPointerSensor{constructor(dt,$t,kt){var Tt;kt===void 0&&(kt=getEventListenerTarget(dt.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=dt,this.events=$t;const{event:Dt}=dt,{target:Ft}=Dt;this.props=dt,this.events=$t,this.document=getOwnerDocument(Ft),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(kt),this.windowListeners=new Listeners(getWindow(Ft)),this.initialCoordinates=(Tt=getEventCoordinates(Dt))!=null?Tt:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:dt,props:{options:{activationConstraint:$t,bypassActivationConstraint:kt}}}=this;if(this.listeners.add(dt.move.name,this.handleMove,{passive:!1}),this.listeners.add(dt.end.name,this.handleEnd),dt.cancel&&this.listeners.add(dt.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),$t){if(kt!=null&&kt({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint($t)){this.timeoutId=setTimeout(this.handleStart,$t.delay),this.handlePending($t);return}if(isDistanceConstraint($t)){this.handlePending($t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(dt,$t){const{active:kt,onPending:Tt}=this.props;Tt(kt,dt,this.initialCoordinates,$t)}handleStart(){const{initialCoordinates:dt}=this,{onStart:$t}=this.props;dt&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),$t(dt))}handleMove(dt){var $t;const{activated:kt,initialCoordinates:Tt,props:Dt}=this,{onMove:Ft,options:{activationConstraint:Ut}}=Dt;if(!Tt)return;const Ht=($t=getEventCoordinates(dt))!=null?$t:defaultCoordinates,Kt=subtract(Tt,Ht);if(!kt&&Ut){if(isDistanceConstraint(Ut)){if(Ut.tolerance!=null&&hasExceededDistance(Kt,Ut.tolerance))return this.handleCancel();if(hasExceededDistance(Kt,Ut.distance))return this.handleStart()}if(isDelayConstraint(Ut)&&hasExceededDistance(Kt,Ut.tolerance))return this.handleCancel();this.handlePending(Ut,Kt);return}dt.cancelable&&dt.preventDefault(),Ft(Ht)}handleEnd(){const{onAbort:dt,onEnd:$t}=this.props;this.detach(),this.activated||dt(this.props.active),$t()}handleCancel(){const{onAbort:dt,onCancel:$t}=this.props;this.detach(),this.activated||dt(this.props.active),$t()}handleKeydown(dt){dt.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var dt;(dt=this.document.getSelection())==null||dt.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(dt){const{event:$t}=dt,kt=getOwnerDocument($t.target);super(dt,events,kt)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(et,dt)=>{let{nativeEvent:$t}=et,{onActivation:kt}=dt;return!$t.isPrimary||$t.button!==0?!1:(kt==null||kt({event:$t}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(et){et[et.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(dt){super(dt,events$1,getOwnerDocument(dt.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(et,dt)=>{let{nativeEvent:$t}=et,{onActivation:kt}=dt;return $t.button===MouseButton.RightClick?!1:(kt==null||kt({event:$t}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(dt){super(dt,events$2)}static setup(){return window.addEventListener(events$2.move.name,dt,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,dt)};function dt(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(et,dt)=>{let{nativeEvent:$t}=et,{onActivation:kt}=dt;const{touches:Tt}=$t;return Tt.length>1?!1:(kt==null||kt({event:$t}),!0)}}];var AutoScrollActivator;(function(et){et[et.Pointer=0]="Pointer",et[et.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(et){et[et.TreeOrder=0]="TreeOrder",et[et.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(et){let{acceleration:dt,activator:$t=AutoScrollActivator.Pointer,canScroll:kt,draggingRect:Tt,enabled:Dt,interval:Ft=5,order:Ut=TraversalOrder.TreeOrder,pointerCoordinates:Ht,scrollableAncestors:Kt,scrollableAncestorRects:Yt,delta:Jt,threshold:Zt}=et;const er=useScrollIntent({delta:Jt,disabled:!Dt}),[rr,sr]=useInterval(),nr=reactExports.useRef({x:0,y:0}),ir=reactExports.useRef({x:0,y:0}),or=reactExports.useMemo(()=>{switch($t){case AutoScrollActivator.Pointer:return Ht?{top:Ht.y,bottom:Ht.y,left:Ht.x,right:Ht.x}:null;case AutoScrollActivator.DraggableRect:return Tt}},[$t,Tt,Ht]),lr=reactExports.useRef(null),cr=reactExports.useCallback(()=>{const ur=lr.current;if(!ur)return;const pr=nr.current.x*ir.current.x,mr=nr.current.y*ir.current.y;ur.scrollBy(pr,mr)},[]),dr=reactExports.useMemo(()=>Ut===TraversalOrder.TreeOrder?[...Kt].reverse():Kt,[Ut,Kt]);reactExports.useEffect(()=>{if(!Dt||!Kt.length||!or){sr();return}for(const ur of dr){if((kt==null?void 0:kt(ur))===!1)continue;const pr=Kt.indexOf(ur),mr=Yt[pr];if(!mr)continue;const{direction:jr,speed:Rr}=getScrollDirectionAndSpeed(ur,mr,or,dt,Zt);for(const xr of["x","y"])er[xr][jr[xr]]||(Rr[xr]=0,jr[xr]=0);if(Rr.x>0||Rr.y>0){sr(),lr.current=ur,rr(cr,Ft),nr.current=Rr,ir.current=jr;return}}nr.current={x:0,y:0},ir.current={x:0,y:0},sr()},[dt,cr,kt,sr,Dt,Ft,JSON.stringify(or),JSON.stringify(er),rr,Kt,dr,Yt,JSON.stringify(Zt)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(et){let{delta:dt,disabled:$t}=et;const kt=usePrevious(dt);return useLazyMemo(Tt=>{if($t||!kt||!Tt)return defaultScrollIntent;const Dt={x:Math.sign(dt.x-kt.x),y:Math.sign(dt.y-kt.y)};return{x:{[Direction.Backward]:Tt.x[Direction.Backward]||Dt.x===-1,[Direction.Forward]:Tt.x[Direction.Forward]||Dt.x===1},y:{[Direction.Backward]:Tt.y[Direction.Backward]||Dt.y===-1,[Direction.Forward]:Tt.y[Direction.Forward]||Dt.y===1}}},[$t,dt,kt])}function useCachedNode(et,dt){const $t=dt!=null?et.get(dt):void 0,kt=$t?$t.node.current:null;return useLazyMemo(Tt=>{var Dt;return dt==null?null:(Dt=kt??Tt)!=null?Dt:null},[kt,dt])}function useCombineActivators(et,dt){return reactExports.useMemo(()=>et.reduce(($t,kt)=>{const{sensor:Tt}=kt,Dt=Tt.activators.map(Ft=>({eventName:Ft.eventName,handler:dt(Ft.handler,kt)}));return[...$t,...Dt]},[]),[et,dt])}var MeasuringStrategy;(function(et){et[et.Always=0]="Always",et[et.BeforeDragging=1]="BeforeDragging",et[et.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(et){et.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(et,dt){let{dragging:$t,dependencies:kt,config:Tt}=dt;const[Dt,Ft]=reactExports.useState(null),{frequency:Ut,measure:Ht,strategy:Kt}=Tt,Yt=reactExports.useRef(et),Jt=nr(),Zt=useLatestValue(Jt),er=reactExports.useCallback(function(ir){ir===void 0&&(ir=[]),!Zt.current&&Ft(or=>or===null?ir:or.concat(ir.filter(lr=>!or.includes(lr))))},[Zt]),rr=reactExports.useRef(null),sr=useLazyMemo(ir=>{if(Jt&&!$t)return defaultValue;if(!ir||ir===defaultValue||Yt.current!==et||Dt!=null){const or=new Map;for(let lr of et){if(!lr)continue;if(Dt&&Dt.length>0&&!Dt.includes(lr.id)&&lr.rect.current){or.set(lr.id,lr.rect.current);continue}const cr=lr.node.current,dr=cr?new Rect(Ht(cr),cr):null;lr.rect.current=dr,dr&&or.set(lr.id,dr)}return or}return ir},[et,Dt,$t,Jt,Ht]);return reactExports.useEffect(()=>{Yt.current=et},[et]),reactExports.useEffect(()=>{Jt||er()},[$t,Jt]),reactExports.useEffect(()=>{Dt&&Dt.length>0&&Ft(null)},[JSON.stringify(Dt)]),reactExports.useEffect(()=>{Jt||typeof Ut!="number"||rr.current!==null||(rr.current=setTimeout(()=>{er(),rr.current=null},Ut))},[Ut,Jt,er,...kt]),{droppableRects:sr,measureDroppableContainers:er,measuringScheduled:Dt!=null};function nr(){switch(Kt){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return $t;default:return!$t}}}function useInitialValue(et,dt){return useLazyMemo($t=>et?$t||(typeof dt=="function"?dt(et):et):null,[dt,et])}function useInitialRect(et,dt){return useInitialValue(et,dt)}function useMutationObserver(et){let{callback:dt,disabled:$t}=et;const kt=useEvent(dt),Tt=reactExports.useMemo(()=>{if($t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:Dt}=window;return new Dt(kt)},[kt,$t]);return reactExports.useEffect(()=>()=>Tt==null?void 0:Tt.disconnect(),[Tt]),Tt}function useResizeObserver(et){let{callback:dt,disabled:$t}=et;const kt=useEvent(dt),Tt=reactExports.useMemo(()=>{if($t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:Dt}=window;return new Dt(kt)},[$t]);return reactExports.useEffect(()=>()=>Tt==null?void 0:Tt.disconnect(),[Tt]),Tt}function defaultMeasure(et){return new Rect(getClientRect(et),et)}function useRect(et,dt,$t){dt===void 0&&(dt=defaultMeasure);const[kt,Tt]=reactExports.useState(null);function Dt(){Tt(Ht=>{if(!et)return null;if(et.isConnected===!1){var Kt;return(Kt=Ht??$t)!=null?Kt:null}const Yt=dt(et);return JSON.stringify(Ht)===JSON.stringify(Yt)?Ht:Yt})}const Ft=useMutationObserver({callback(Ht){if(et)for(const Kt of Ht){const{type:Yt,target:Jt}=Kt;if(Yt==="childList"&&Jt instanceof HTMLElement&&Jt.contains(et)){Dt();break}}}}),Ut=useResizeObserver({callback:Dt});return useIsomorphicLayoutEffect$6(()=>{Dt(),et?(Ut==null||Ut.observe(et),Ft==null||Ft.observe(document.body,{childList:!0,subtree:!0})):(Ut==null||Ut.disconnect(),Ft==null||Ft.disconnect())},[et]),kt}function useRectDelta(et){const dt=useInitialValue(et);return getRectDelta(et,dt)}const defaultValue$1=[];function useScrollableAncestors(et){const dt=reactExports.useRef(et),$t=useLazyMemo(kt=>et?kt&&kt!==defaultValue$1&&et&&dt.current&&et.parentNode===dt.current.parentNode?kt:getScrollableAncestors(et):defaultValue$1,[et]);return reactExports.useEffect(()=>{dt.current=et},[et]),$t}function useScrollOffsets(et){const[dt,$t]=reactExports.useState(null),kt=reactExports.useRef(et),Tt=reactExports.useCallback(Dt=>{const Ft=getScrollableElement(Dt.target);Ft&&$t(Ut=>Ut?(Ut.set(Ft,getScrollCoordinates(Ft)),new Map(Ut)):null)},[]);return reactExports.useEffect(()=>{const Dt=kt.current;if(et!==Dt){Ft(Dt);const Ut=et.map(Ht=>{const Kt=getScrollableElement(Ht);return Kt?(Kt.addEventListener("scroll",Tt,{passive:!0}),[Kt,getScrollCoordinates(Kt)]):null}).filter(Ht=>Ht!=null);$t(Ut.length?new Map(Ut):null),kt.current=et}return()=>{Ft(et),Ft(Dt)};function Ft(Ut){Ut.forEach(Ht=>{const Kt=getScrollableElement(Ht);Kt==null||Kt.removeEventListener("scroll",Tt)})}},[Tt,et]),reactExports.useMemo(()=>et.length?dt?Array.from(dt.values()).reduce((Dt,Ft)=>add(Dt,Ft),defaultCoordinates):getScrollOffsets(et):defaultCoordinates,[et,dt])}function useScrollOffsetsDelta(et,dt){dt===void 0&&(dt=[]);const $t=reactExports.useRef(null);return reactExports.useEffect(()=>{$t.current=null},dt),reactExports.useEffect(()=>{const kt=et!==defaultCoordinates;kt&&!$t.current&&($t.current=et),!kt&&$t.current&&($t.current=null)},[et]),$t.current?subtract(et,$t.current):defaultCoordinates}function useSensorSetup(et){reactExports.useEffect(()=>{if(!canUseDOM)return;const dt=et.map($t=>{let{sensor:kt}=$t;return kt.setup==null?void 0:kt.setup()});return()=>{for(const $t of dt)$t==null||$t()}},et.map(dt=>{let{sensor:$t}=dt;return $t}))}function useSyntheticListeners(et,dt){return reactExports.useMemo(()=>et.reduce(($t,kt)=>{let{eventName:Tt,handler:Dt}=kt;return $t[Tt]=Ft=>{Dt(Ft,dt)},$t},{}),[et,dt])}function useWindowRect(et){return reactExports.useMemo(()=>et?getWindowClientRect(et):null,[et])}const defaultValue$2=[];function useRects(et,dt){dt===void 0&&(dt=getClientRect);const[$t]=et,kt=useWindowRect($t?getWindow($t):null),[Tt,Dt]=reactExports.useState(defaultValue$2);function Ft(){Dt(()=>et.length?et.map(Ht=>isDocumentScrollingElement(Ht)?kt:new Rect(dt(Ht),Ht)):defaultValue$2)}const Ut=useResizeObserver({callback:Ft});return useIsomorphicLayoutEffect$6(()=>{Ut==null||Ut.disconnect(),Ft(),et.forEach(Ht=>Ut==null?void 0:Ut.observe(Ht))},[et]),Tt}function getMeasurableNode(et){if(!et)return null;if(et.children.length>1)return et;const dt=et.children[0];return isHTMLElement(dt)?dt:et}function useDragOverlayMeasuring(et){let{measure:dt}=et;const[$t,kt]=reactExports.useState(null),Tt=reactExports.useCallback(Kt=>{for(const{target:Yt}of Kt)if(isHTMLElement(Yt)){kt(Jt=>{const Zt=dt(Yt);return Jt?{...Jt,width:Zt.width,height:Zt.height}:Zt});break}},[dt]),Dt=useResizeObserver({callback:Tt}),Ft=reactExports.useCallback(Kt=>{const Yt=getMeasurableNode(Kt);Dt==null||Dt.disconnect(),Yt&&(Dt==null||Dt.observe(Yt)),kt(Yt?dt(Yt):null)},[dt,Dt]),[Ut,Ht]=useNodeRef(Ft);return reactExports.useMemo(()=>({nodeRef:Ut,rect:$t,setRef:Ht}),[$t,Ut,Ht])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(dt){var $t;return dt!=null&&($t=super.get(dt))!=null?$t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(dt=>{let{disabled:$t}=dt;return!$t})}getNodeFor(dt){var $t,kt;return($t=(kt=this.get(dt))==null?void 0:kt.node.current)!=null?$t:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop$9},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop$9,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop$9,draggableNodes:new Map,over:null,measureDroppableContainers:noop$9},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(et,dt){switch(dt.type){case Action.DragStart:return{...et,draggable:{...et.draggable,initialCoordinates:dt.initialCoordinates,active:dt.active}};case Action.DragMove:return et.draggable.active==null?et:{...et,draggable:{...et.draggable,translate:{x:dt.coordinates.x-et.draggable.initialCoordinates.x,y:dt.coordinates.y-et.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...et,draggable:{...et.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:$t}=dt,{id:kt}=$t,Tt=new DroppableContainersMap(et.droppable.containers);return Tt.set(kt,$t),{...et,droppable:{...et.droppable,containers:Tt}}}case Action.SetDroppableDisabled:{const{id:$t,key:kt,disabled:Tt}=dt,Dt=et.droppable.containers.get($t);if(!Dt||kt!==Dt.key)return et;const Ft=new DroppableContainersMap(et.droppable.containers);return Ft.set($t,{...Dt,disabled:Tt}),{...et,droppable:{...et.droppable,containers:Ft}}}case Action.UnregisterDroppable:{const{id:$t,key:kt}=dt,Tt=et.droppable.containers.get($t);if(!Tt||kt!==Tt.key)return et;const Dt=new DroppableContainersMap(et.droppable.containers);return Dt.delete($t),{...et,droppable:{...et.droppable,containers:Dt}}}default:return et}}function RestoreFocus(et){let{disabled:dt}=et;const{active:$t,activatorEvent:kt,draggableNodes:Tt}=reactExports.useContext(InternalContext),Dt=usePrevious(kt),Ft=usePrevious($t==null?void 0:$t.id);return reactExports.useEffect(()=>{if(!dt&&!kt&&Dt&&Ft!=null){if(!isKeyboardEvent(Dt)||document.activeElement===Dt.target)return;const Ut=Tt.get(Ft);if(!Ut)return;const{activatorNode:Ht,node:Kt}=Ut;if(!Ht.current&&!Kt.current)return;requestAnimationFrame(()=>{for(const Yt of[Ht.current,Kt.current]){if(!Yt)continue;const Jt=findFirstFocusableNode(Yt);if(Jt){Jt.focus();break}}})}},[kt,dt,Tt,Ft,Dt]),null}function applyModifiers(et,dt){let{transform:$t,...kt}=dt;return et!=null&&et.length?et.reduce((Tt,Dt)=>Dt({transform:Tt,...kt}),$t):$t}function useMeasuringConfiguration(et){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...et==null?void 0:et.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...et==null?void 0:et.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...et==null?void 0:et.dragOverlay}}),[et==null?void 0:et.draggable,et==null?void 0:et.droppable,et==null?void 0:et.dragOverlay])}function useLayoutShiftScrollCompensation(et){let{activeNode:dt,measure:$t,initialRect:kt,config:Tt=!0}=et;const Dt=reactExports.useRef(!1),{x:Ft,y:Ut}=typeof Tt=="boolean"?{x:Tt,y:Tt}:Tt;useIsomorphicLayoutEffect$6(()=>{if(!Ft&&!Ut||!dt){Dt.current=!1;return}if(Dt.current||!kt)return;const Kt=dt==null?void 0:dt.node.current;if(!Kt||Kt.isConnected===!1)return;const Yt=$t(Kt),Jt=getRectDelta(Yt,kt);if(Ft||(Jt.x=0),Ut||(Jt.y=0),Dt.current=!0,Math.abs(Jt.x)>0||Math.abs(Jt.y)>0){const Zt=getFirstScrollableAncestor(Kt);Zt&&Zt.scrollBy({top:Jt.y,left:Jt.x})}},[dt,Ft,Ut,kt,$t])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(et){et[et.Uninitialized=0]="Uninitialized",et[et.Initializing=1]="Initializing",et[et.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function et(dt){var $t,kt,Tt,Dt;let{id:Ft,accessibility:Ut,autoScroll:Ht=!0,children:Kt,sensors:Yt=defaultSensors,collisionDetection:Jt=rectIntersection,measuring:Zt,modifiers:er,...rr}=dt;const sr=reactExports.useReducer(reducer,void 0,getInitialState),[nr,ir]=sr,[or,lr]=useDndMonitorProvider(),[cr,dr]=reactExports.useState(Status.Uninitialized),ur=cr===Status.Initialized,{draggable:{active:pr,nodes:mr,translate:jr},droppable:{containers:Rr}}=nr,xr=pr!=null?mr.get(pr):null,kr=reactExports.useRef({initial:null,translated:null}),Mr=reactExports.useMemo(()=>{var ws;return pr!=null?{id:pr,data:(ws=xr==null?void 0:xr.data)!=null?ws:defaultData,rect:kr}:null},[pr,xr]),Tr=reactExports.useRef(null),[Or,_r]=reactExports.useState(null),[Pr,br]=reactExports.useState(null),wr=useLatestValue(rr,Object.values(rr)),zr=useUniqueId("DndDescribedBy",Ft),Hr=reactExports.useMemo(()=>Rr.getEnabled(),[Rr]),Yr=useMeasuringConfiguration(Zt),{droppableRects:es,measureDroppableContainers:rs,measuringScheduled:Wr}=useDroppableMeasuring(Hr,{dragging:ur,dependencies:[jr.x,jr.y],config:Yr.droppable}),Xr=useCachedNode(mr,pr),ns=reactExports.useMemo(()=>Pr?getEventCoordinates(Pr):null,[Pr]),gs=ys(),us=useInitialRect(Xr,Yr.draggable.measure);useLayoutShiftScrollCompensation({activeNode:pr!=null?mr.get(pr):null,config:gs.layoutShiftCompensation,initialRect:us,measure:Yr.draggable.measure});const ps=useRect(Xr,Yr.draggable.measure,us),cs=useRect(Xr?Xr.parentElement:null),ss=reactExports.useRef({activatorEvent:null,active:null,activeNode:Xr,collisionRect:null,collisions:null,droppableRects:es,draggableNodes:mr,draggingNode:null,draggingNodeRect:null,droppableContainers:Rr,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),fs=Rr.getNodeFor(($t=ss.current.over)==null?void 0:$t.id),hs=useDragOverlayMeasuring({measure:Yr.dragOverlay.measure}),$s=(kt=hs.nodeRef.current)!=null?kt:Xr,ks=ur?(Tt=hs.rect)!=null?Tt:ps:null,Ds=!!(hs.nodeRef.current&&hs.rect),_s=useRectDelta(Ds?null:ps),As=useWindowRect($s?getWindow($s):null),Ns=useScrollableAncestors(ur?fs??Xr:null),Is=useRects(Ns),zs=applyModifiers(er,{transform:{x:jr.x-_s.x,y:jr.y-_s.y,scaleX:1,scaleY:1},activatorEvent:Pr,active:Mr,activeNodeRect:ps,containerNodeRect:cs,draggingNodeRect:ks,over:ss.current.over,overlayNodeRect:hs.rect,scrollableAncestors:Ns,scrollableAncestorRects:Is,windowRect:As}),Gs=ns?add(ns,jr):null,Ws=useScrollOffsets(Ns),Qs=useScrollOffsetsDelta(Ws),qs=useScrollOffsetsDelta(Ws,[ps]),Bs=add(zs,Qs),Js=ks?getAdjustedRect(ks,zs):null,Ys=Mr&&Js?Jt({active:Mr,collisionRect:Js,droppableRects:es,droppableContainers:Hr,pointerCoordinates:Gs}):null,ln=getFirstCollision(Ys,"id"),[Pn,Qn]=reactExports.useState(null),xo=Ds?zs:add(zs,qs),Os=adjustScale(xo,(Dt=Pn==null?void 0:Pn.rect)!=null?Dt:null,ps),ds=reactExports.useRef(null),Gr=reactExports.useCallback((ws,Ss)=>{let{sensor:Fs,options:vs}=Ss;if(Tr.current==null)return;const as=mr.get(Tr.current);if(!as)return;const js=ws.nativeEvent,Rs=new Fs({active:Tr.current,activeNode:as,event:js,options:vs,context:ss,onAbort(Ts){if(!mr.get(Ts))return;const{onDragAbort:Ks}=wr.current,yn={id:Ts};Ks==null||Ks(yn),or({type:"onDragAbort",event:yn})},onPending(Ts,Vs,Ks,yn){if(!mr.get(Ts))return;const{onDragPending:go}=wr.current,_i={id:Ts,constraint:Vs,initialCoordinates:Ks,offset:yn};go==null||go(_i),or({type:"onDragPending",event:_i})},onStart(Ts){const Vs=Tr.current;if(Vs==null)return;const Ks=mr.get(Vs);if(!Ks)return;const{onDragStart:yn}=wr.current,Vn={activatorEvent:js,active:{id:Vs,data:Ks.data,rect:kr}};reactDomExports.unstable_batchedUpdates(()=>{yn==null||yn(Vn),dr(Status.Initializing),ir({type:Action.DragStart,initialCoordinates:Ts,active:Vs}),or({type:"onDragStart",event:Vn}),_r(ds.current),br(js)})},onMove(Ts){ir({type:Action.DragMove,coordinates:Ts})},onEnd:Ms(Action.DragEnd),onCancel:Ms(Action.DragCancel)});ds.current=Rs;function Ms(Ts){return async function(){const{active:Ks,collisions:yn,over:Vn,scrollAdjustedTranslate:go}=ss.current;let _i=null;if(Ks&&go){const{cancelDrop:bo}=wr.current;_i={activatorEvent:js,active:Ks,collisions:yn,delta:go,over:Vn},Ts===Action.DragEnd&&typeof bo=="function"&&await Promise.resolve(bo(_i))&&(Ts=Action.DragCancel)}Tr.current=null,reactDomExports.unstable_batchedUpdates(()=>{ir({type:Ts}),dr(Status.Uninitialized),Qn(null),_r(null),br(null),ds.current=null;const bo=Ts===Action.DragEnd?"onDragEnd":"onDragCancel";if(_i){const qo=wr.current[bo];qo==null||qo(_i),or({type:bo,event:_i})}})}}},[mr]),bs=reactExports.useCallback((ws,Ss)=>(Fs,vs)=>{const as=Fs.nativeEvent,js=mr.get(vs);if(Tr.current!==null||!js||as.dndKit||as.defaultPrevented)return;const Rs={active:js};ws(Fs,Ss.options,Rs)===!0&&(as.dndKit={capturedBy:Ss.sensor},Tr.current=vs,Gr(Fs,Ss))},[mr,Gr]),xs=useCombineActivators(Yt,bs);useSensorSetup(Yt),useIsomorphicLayoutEffect$6(()=>{ps&&cr===Status.Initializing&&dr(Status.Initialized)},[ps,cr]),reactExports.useEffect(()=>{const{onDragMove:ws}=wr.current,{active:Ss,activatorEvent:Fs,collisions:vs,over:as}=ss.current;if(!Ss||!Fs)return;const js={active:Ss,activatorEvent:Fs,collisions:vs,delta:{x:Bs.x,y:Bs.y},over:as};reactDomExports.unstable_batchedUpdates(()=>{ws==null||ws(js),or({type:"onDragMove",event:js})})},[Bs.x,Bs.y]),reactExports.useEffect(()=>{const{active:ws,activatorEvent:Ss,collisions:Fs,droppableContainers:vs,scrollAdjustedTranslate:as}=ss.current;if(!ws||Tr.current==null||!Ss||!as)return;const{onDragOver:js}=wr.current,Rs=vs.get(ln),Ms=Rs&&Rs.rect.current?{id:Rs.id,rect:Rs.rect.current,data:Rs.data,disabled:Rs.disabled}:null,Ts={active:ws,activatorEvent:Ss,collisions:Fs,delta:{x:as.x,y:as.y},over:Ms};reactDomExports.unstable_batchedUpdates(()=>{Qn(Ms),js==null||js(Ts),or({type:"onDragOver",event:Ts})})},[ln]),useIsomorphicLayoutEffect$6(()=>{ss.current={activatorEvent:Pr,active:Mr,activeNode:Xr,collisionRect:Js,collisions:Ys,droppableRects:es,draggableNodes:mr,draggingNode:$s,draggingNodeRect:ks,droppableContainers:Rr,over:Pn,scrollableAncestors:Ns,scrollAdjustedTranslate:Bs},kr.current={initial:ks,translated:Js}},[Mr,Xr,Ys,Js,mr,$s,ks,es,Rr,Pn,Ns,Bs]),useAutoScroller({...gs,delta:jr,draggingRect:Js,pointerCoordinates:Gs,scrollableAncestors:Ns,scrollableAncestorRects:Is});const ms=reactExports.useMemo(()=>({active:Mr,activeNode:Xr,activeNodeRect:ps,activatorEvent:Pr,collisions:Ys,containerNodeRect:cs,dragOverlay:hs,draggableNodes:mr,droppableContainers:Rr,droppableRects:es,over:Pn,measureDroppableContainers:rs,scrollableAncestors:Ns,scrollableAncestorRects:Is,measuringConfiguration:Yr,measuringScheduled:Wr,windowRect:As}),[Mr,Xr,ps,Pr,Ys,cs,hs,mr,Rr,es,Pn,rs,Ns,Is,Yr,Wr,As]),ls=reactExports.useMemo(()=>({activatorEvent:Pr,activators:xs,active:Mr,activeNodeRect:ps,ariaDescribedById:{draggable:zr},dispatch:ir,draggableNodes:mr,over:Pn,measureDroppableContainers:rs}),[Pr,xs,Mr,ps,ir,zr,mr,Pn,rs]);return React$2.createElement(DndMonitorContext.Provider,{value:lr},React$2.createElement(InternalContext.Provider,{value:ls},React$2.createElement(PublicContext.Provider,{value:ms},React$2.createElement(ActiveDraggableContext.Provider,{value:Os},Kt)),React$2.createElement(RestoreFocus,{disabled:(Ut==null?void 0:Ut.restoreFocus)===!1})),React$2.createElement(Accessibility,{...Ut,hiddenTextDescribedById:zr}));function ys(){const ws=(Or==null?void 0:Or.autoScrollEnabled)===!1,Ss=typeof Ht=="object"?Ht.enabled===!1:Ht===!1,Fs=ur&&!ws&&!Ss;return typeof Ht=="object"?{...Ht,enabled:Fs}:{enabled:Fs}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX$1="Draggable";function useDraggable(et){let{id:dt,data:$t,disabled:kt=!1,attributes:Tt}=et;const Dt=useUniqueId(ID_PREFIX$1),{activators:Ft,activatorEvent:Ut,active:Ht,activeNodeRect:Kt,ariaDescribedById:Yt,draggableNodes:Jt,over:Zt}=reactExports.useContext(InternalContext),{role:er=defaultRole,roleDescription:rr="draggable",tabIndex:sr=0}=Tt??{},nr=(Ht==null?void 0:Ht.id)===dt,ir=reactExports.useContext(nr?ActiveDraggableContext:NullContext),[or,lr]=useNodeRef(),[cr,dr]=useNodeRef(),ur=useSyntheticListeners(Ft,dt),pr=useLatestValue($t);useIsomorphicLayoutEffect$6(()=>(Jt.set(dt,{id:dt,key:Dt,node:or,activatorNode:cr,data:pr}),()=>{const jr=Jt.get(dt);jr&&jr.key===Dt&&Jt.delete(dt)}),[Jt,dt]);const mr=reactExports.useMemo(()=>({role:er,tabIndex:sr,"aria-disabled":kt,"aria-pressed":nr&&er===defaultRole?!0:void 0,"aria-roledescription":rr,"aria-describedby":Yt.draggable}),[kt,er,sr,nr,rr,Yt.draggable]);return{active:Ht,activatorEvent:Ut,activeNodeRect:Kt,attributes:mr,isDragging:nr,listeners:kt?void 0:ur,node:or,over:Zt,setNodeRef:lr,setActivatorNodeRef:dr,transform:ir}}function useDndContext(){return reactExports.useContext(PublicContext)}const ID_PREFIX$1$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(et){let{data:dt,disabled:$t=!1,id:kt,resizeObserverConfig:Tt}=et;const Dt=useUniqueId(ID_PREFIX$1$1),{active:Ft,dispatch:Ut,over:Ht,measureDroppableContainers:Kt}=reactExports.useContext(InternalContext),Yt=reactExports.useRef({disabled:$t}),Jt=reactExports.useRef(!1),Zt=reactExports.useRef(null),er=reactExports.useRef(null),{disabled:rr,updateMeasurementsFor:sr,timeout:nr}={...defaultResizeObserverConfig,...Tt},ir=useLatestValue(sr??kt),or=reactExports.useCallback(()=>{if(!Jt.current){Jt.current=!0;return}er.current!=null&&clearTimeout(er.current),er.current=setTimeout(()=>{Kt(Array.isArray(ir.current)?ir.current:[ir.current]),er.current=null},nr)},[nr]),lr=useResizeObserver({callback:or,disabled:rr||!Ft}),cr=reactExports.useCallback((mr,jr)=>{lr&&(jr&&(lr.unobserve(jr),Jt.current=!1),mr&&lr.observe(mr))},[lr]),[dr,ur]=useNodeRef(cr),pr=useLatestValue(dt);return reactExports.useEffect(()=>{!lr||!dr.current||(lr.disconnect(),Jt.current=!1,lr.observe(dr.current))},[dr,lr]),reactExports.useEffect(()=>(Ut({type:Action.RegisterDroppable,element:{id:kt,key:Dt,disabled:$t,node:dr,rect:Zt,data:pr}}),()=>Ut({type:Action.UnregisterDroppable,key:Dt,id:kt})),[kt]),reactExports.useEffect(()=>{$t!==Yt.current.disabled&&(Ut({type:Action.SetDroppableDisabled,id:kt,key:Dt,disabled:$t}),Yt.current.disabled=$t)},[kt,Dt,$t,Ut]),{active:Ft,rect:Zt,isOver:(Ht==null?void 0:Ht.id)===kt,node:dr,over:Ht,setNodeRef:ur}}function arrayMove(et,dt,$t){const kt=et.slice();return kt.splice($t<0?kt.length+$t:$t,0,kt.splice(dt,1)[0]),kt}function getSortedRects(et,dt){return et.reduce(($t,kt,Tt)=>{const Dt=dt.get(kt);return Dt&&($t[Tt]=Dt),$t},Array(et.length))}function isValidIndex(et){return et!==null&&et>=0}function itemsEqual(et,dt){if(et===dt)return!0;if(et.length!==dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(et[$t]!==dt[$t])return!1;return!0}function normalizeDisabled(et){return typeof et=="boolean"?{draggable:et,droppable:et}:et}const rectSortingStrategy=et=>{let{rects:dt,activeIndex:$t,overIndex:kt,index:Tt}=et;const Dt=arrayMove(dt,kt,$t),Ft=dt[Tt],Ut=Dt[Tt];return!Ut||!Ft?null:{x:Ut.left-Ft.left,y:Ut.top-Ft.top,scaleX:Ut.width/Ft.width,scaleY:Ut.height/Ft.height}},defaultScale$1={scaleX:1,scaleY:1},verticalListSortingStrategy=et=>{var dt;let{activeIndex:$t,activeNodeRect:kt,index:Tt,rects:Dt,overIndex:Ft}=et;const Ut=(dt=Dt[$t])!=null?dt:kt;if(!Ut)return null;if(Tt===$t){const Kt=Dt[Ft];return Kt?{x:0,y:$t<Ft?Kt.top+Kt.height-(Ut.top+Ut.height):Kt.top-Ut.top,...defaultScale$1}:null}const Ht=getItemGap$1(Dt,Tt,$t);return Tt>$t&&Tt<=Ft?{x:0,y:-Ut.height-Ht,...defaultScale$1}:Tt<$t&&Tt>=Ft?{x:0,y:Ut.height+Ht,...defaultScale$1}:{x:0,y:0,...defaultScale$1}};function getItemGap$1(et,dt,$t){const kt=et[dt],Tt=et[dt-1],Dt=et[dt+1];return kt?$t<dt?Tt?kt.top-(Tt.top+Tt.height):Dt?Dt.top-(kt.top+kt.height):0:Dt?Dt.top-(kt.top+kt.height):Tt?kt.top-(Tt.top+Tt.height):0:0}const ID_PREFIX="Sortable",Context=React$2.createContext({activeIndex:-1,containerId:ID_PREFIX,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rectSortingStrategy,disabled:{draggable:!1,droppable:!1}});function SortableContext(et){let{children:dt,id:$t,items:kt,strategy:Tt=rectSortingStrategy,disabled:Dt=!1}=et;const{active:Ft,dragOverlay:Ut,droppableRects:Ht,over:Kt,measureDroppableContainers:Yt}=useDndContext(),Jt=useUniqueId(ID_PREFIX,$t),Zt=Ut.rect!==null,er=reactExports.useMemo(()=>kt.map(ur=>typeof ur=="object"&&"id"in ur?ur.id:ur),[kt]),rr=Ft!=null,sr=Ft?er.indexOf(Ft.id):-1,nr=Kt?er.indexOf(Kt.id):-1,ir=reactExports.useRef(er),or=!itemsEqual(er,ir.current),lr=nr!==-1&&sr===-1||or,cr=normalizeDisabled(Dt);useIsomorphicLayoutEffect$6(()=>{or&&rr&&Yt(er)},[or,er,rr,Yt]),reactExports.useEffect(()=>{ir.current=er},[er]);const dr=reactExports.useMemo(()=>({activeIndex:sr,containerId:Jt,disabled:cr,disableTransforms:lr,items:er,overIndex:nr,useDragOverlay:Zt,sortedRects:getSortedRects(er,Ht),strategy:Tt}),[sr,Jt,cr.draggable,cr.droppable,lr,er,nr,Ht,Zt,Tt]);return React$2.createElement(Context.Provider,{value:dr},dt)}const defaultNewIndexGetter=et=>{let{id:dt,items:$t,activeIndex:kt,overIndex:Tt}=et;return arrayMove($t,kt,Tt).indexOf(dt)},defaultAnimateLayoutChanges=et=>{let{containerId:dt,isSorting:$t,wasDragging:kt,index:Tt,items:Dt,newIndex:Ft,previousItems:Ut,previousContainerId:Ht,transition:Kt}=et;return!Kt||!kt||Ut!==Dt&&Tt===Ft?!1:$t?!0:Ft!==Tt&&dt===Ht},defaultTransition={duration:200,easing:"ease"},transitionProperty="transform",disabledTransition=CSS.Transition.toString({property:transitionProperty,duration:0,easing:"linear"}),defaultAttributes={roleDescription:"sortable"};function useDerivedTransform(et){let{disabled:dt,index:$t,node:kt,rect:Tt}=et;const[Dt,Ft]=reactExports.useState(null),Ut=reactExports.useRef($t);return useIsomorphicLayoutEffect$6(()=>{if(!dt&&$t!==Ut.current&&kt.current){const Ht=Tt.current;if(Ht){const Kt=getClientRect(kt.current,{ignoreTransform:!0}),Yt={x:Ht.left-Kt.left,y:Ht.top-Kt.top,scaleX:Ht.width/Kt.width,scaleY:Ht.height/Kt.height};(Yt.x||Yt.y)&&Ft(Yt)}}$t!==Ut.current&&(Ut.current=$t)},[dt,$t,kt,Tt]),reactExports.useEffect(()=>{Dt&&Ft(null)},[Dt]),Dt}function useSortable(et){let{animateLayoutChanges:dt=defaultAnimateLayoutChanges,attributes:$t,disabled:kt,data:Tt,getNewIndex:Dt=defaultNewIndexGetter,id:Ft,strategy:Ut,resizeObserverConfig:Ht,transition:Kt=defaultTransition}=et;const{items:Yt,containerId:Jt,activeIndex:Zt,disabled:er,disableTransforms:rr,sortedRects:sr,overIndex:nr,useDragOverlay:ir,strategy:or}=reactExports.useContext(Context),lr=normalizeLocalDisabled(kt,er),cr=Yt.indexOf(Ft),dr=reactExports.useMemo(()=>({sortable:{containerId:Jt,index:cr,items:Yt},...Tt}),[Jt,Tt,cr,Yt]),ur=reactExports.useMemo(()=>Yt.slice(Yt.indexOf(Ft)),[Yt,Ft]),{rect:pr,node:mr,isOver:jr,setNodeRef:Rr}=useDroppable({id:Ft,data:dr,disabled:lr.droppable,resizeObserverConfig:{updateMeasurementsFor:ur,...Ht}}),{active:xr,activatorEvent:kr,activeNodeRect:Mr,attributes:Tr,setNodeRef:Or,listeners:_r,isDragging:Pr,over:br,setActivatorNodeRef:wr,transform:zr}=useDraggable({id:Ft,data:dr,attributes:{...defaultAttributes,...$t},disabled:lr.draggable}),Hr=useCombinedRefs(Rr,Or),Yr=!!xr,es=Yr&&!rr&&isValidIndex(Zt)&&isValidIndex(nr),rs=!ir&&Pr,Wr=rs&&es?zr:null,ns=es?Wr??(Ut??or)({rects:sr,activeNodeRect:Mr,activeIndex:Zt,overIndex:nr,index:cr}):null,gs=isValidIndex(Zt)&&isValidIndex(nr)?Dt({id:Ft,items:Yt,activeIndex:Zt,overIndex:nr}):cr,us=xr==null?void 0:xr.id,ps=reactExports.useRef({activeId:us,items:Yt,newIndex:gs,containerId:Jt}),cs=Yt!==ps.current.items,ss=dt({active:xr,containerId:Jt,isDragging:Pr,isSorting:Yr,id:Ft,index:cr,items:Yt,newIndex:ps.current.newIndex,previousItems:ps.current.items,previousContainerId:ps.current.containerId,transition:Kt,wasDragging:ps.current.activeId!=null}),fs=useDerivedTransform({disabled:!ss,index:cr,node:mr,rect:pr});return reactExports.useEffect(()=>{Yr&&ps.current.newIndex!==gs&&(ps.current.newIndex=gs),Jt!==ps.current.containerId&&(ps.current.containerId=Jt),Yt!==ps.current.items&&(ps.current.items=Yt)},[Yr,gs,Jt,Yt]),reactExports.useEffect(()=>{if(us===ps.current.activeId)return;if(us!=null&&ps.current.activeId==null){ps.current.activeId=us;return}const $s=setTimeout(()=>{ps.current.activeId=us},50);return()=>clearTimeout($s)},[us]),{active:xr,activeIndex:Zt,attributes:Tr,data:dr,rect:pr,index:cr,newIndex:gs,items:Yt,isOver:jr,isSorting:Yr,isDragging:Pr,listeners:_r,node:mr,overIndex:nr,over:br,setNodeRef:Hr,setActivatorNodeRef:wr,setDroppableNodeRef:Rr,setDraggableNodeRef:Or,transform:fs??ns,transition:hs()};function hs(){if(fs||cs&&ps.current.newIndex===cr)return disabledTransition;if(!(rs&&!isKeyboardEvent(kr)||!Kt)&&(Yr||ss))return CSS.Transition.toString({...Kt,property:transitionProperty})}}function normalizeLocalDisabled(et,dt){var $t,kt;return typeof et=="boolean"?{draggable:et,droppable:!1}:{draggable:($t=et==null?void 0:et.draggable)!=null?$t:dt.draggable,droppable:(kt=et==null?void 0:et.droppable)!=null?kt:dt.droppable}}KeyboardCode.Down,KeyboardCode.Right,KeyboardCode.Up,KeyboardCode.Left;function FAQBlock({block:et,index:dt,updateBlock:$t,updateChildBlock:kt,openAIModal:Tt,containerIndex:Dt}){const Ft=React$2.useRef(!1);reactExports.useEffect(()=>{if(Ft.current||!et.items)return;if(!et.items.some(Zt=>!Zt.id)){Ft.current=!0;return}const Jt=et.items.map(Zt=>({...Zt,id:Zt.id||crypto.randomUUID()}));Ft.current=!0,$t(dt,"items",Jt)},[]);const Ut=useSensors(useSensor(PointerSensor,{activationConstraint:{distance:5}}));function Ht(Yt){const{active:Jt,over:Zt}=Yt;if(Zt&&Jt.id!==Zt.id){const er=et.items||[],rr=er.findIndex(ir=>ir.id===Jt.id),sr=er.findIndex(ir=>ir.id===Zt.id),nr=arrayMove(er,rr,sr);$t(dt,"items",nr)}}function Kt({id:Yt}){const{attributes:Jt,listeners:Zt,setNodeRef:er,transform:rr,transition:sr}=useSortable({id:Yt}),nr={transform:CSS.Transform.toString(rr),transition:sr};return jsxRuntimeExports.jsx("div",{ref:er,style:nr,...Jt,...Zt,className:"cursor-grab active:cursor-grabbing text-gray-400 mr-3 select-none text-xl",children:""})}return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 bg-[#0F172A]/60 border border-gray-700 transition-all duration-300",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-silver mb-4",children:"FAQ Section"}),jsxRuntimeExports.jsx("div",{className:"pb-2",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Tt({blockType:"faq",blockIndex:dt,updateChildBlock:kt,containerIndex:Dt,currentText:(et.items||[]).map(Yt=>`Q: ${Yt.q}
A: ${Yt.a}`).join(`

`),role:"faq"}),onPointerDown:Yt=>Yt.stopPropagation(),className:`
      text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white
      hover:bg-royalPurple/80
      transition
    `,title:"Generate or improve FAQs with AI",children:"AI"})}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-6",children:"Section Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title||"",onPointerDown:Yt=>Yt.stopPropagation(),onChange:Yt=>$t(dt,"title",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#ffffff",onChange:Yt=>$t(dt,"text_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Background"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#000000",onChange:Yt=>$t(dt,"bg_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.bg_color})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Match Page Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg||!1,onChange:Yt=>$t(dt,"match_main_bg",Yt.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Gradient"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:Yt=>$t(dt,"use_gradient",Yt.target.checked)})]}),et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#F285C3",onChange:Yt=>$t(dt,"gradient_start",Yt.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"End"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#7bed9f",onChange:Yt=>$t(dt,"gradient_end",Yt.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:Yt=>$t(dt,"gradient_direction",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left to Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top to Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal"}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"No Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_no_bg||!1,onChange:Yt=>$t(dt,"use_no_bg",Yt.target.checked)})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Alignment"}),jsxRuntimeExports.jsxs("select",{value:et.alignment||"left",onChange:Yt=>$t(dt,"alignment",Yt.target.value),className:"p-2 bg-black border border-gray-700 rounded text-white text-sm w-full",children:[jsxRuntimeExports.jsx("option",{value:"left",children:"Left"}),jsxRuntimeExports.jsx("option",{value:"center",children:"Center"}),jsxRuntimeExports.jsx("option",{value:"right",children:"Right"})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 space-y-4",children:jsxRuntimeExports.jsx(DndContext,{sensors:Ut,collisionDetection:closestCenter,onDragEnd:Ht,children:jsxRuntimeExports.jsx(SortableContext,{items:(et.items||[]).map(Yt=>Yt.id),strategy:verticalListSortingStrategy,children:(et.items||[]).map(Yt=>jsxRuntimeExports.jsxs("div",{className:"bg-[#1f2937]/60 p-4 rounded-lg border border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Kt,{id:Yt.id}),jsxRuntimeExports.jsx("input",{type:"text",value:Yt.q,onChange:Jt=>{const Zt=et.items.map(er=>er.id===Yt.id?{...er,q:Jt.target.value}:er);$t(dt,"items",Zt)},className:"w-full bg-black border border-gray-600 rounded text-white p-2"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const Jt=et.items.map(Zt=>Zt.id===Yt.id?{...Zt,open:!Zt.open}:Zt);$t(dt,"items",Jt)},className:"ml-3 text-gray-300 text-xl",children:Yt.open?"":"+"})]}),jsxRuntimeExports.jsx("div",{className:`overflow-hidden transition-all duration-300 ${Yt.open?"max-h-40 mt-3":"max-h-0"}`,children:jsxRuntimeExports.jsx("textarea",{value:Yt.a,onChange:Jt=>{const Zt=et.items.map(er=>er.id===Yt.id?{...er,a:Jt.target.value}:er);$t(dt,"items",Zt)},className:"w-full bg-black border border-gray-600 rounded text-white p-2 h-20"})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const Jt=et.items.filter(Zt=>Zt.id!==Yt.id);$t(dt,"items",Jt)},className:"text-red-400 text-xs mt-3 hover:underline",children:"Remove Question"})]},Yt.id))})})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t(dt,"items",[...et.items||[],{id:crypto.randomUUID(),q:"New Question",a:"Your answer...",open:!1}]),className:"mt-4 bg-green text-black rounded-lg px-4 py-2 text-sm font-semibold hover:bg-green/80",children:"Add FAQ Item"})]})}function ImageBlock({block:et,index:dt,updateBlock:$t,bgTheme:kt,getLabelContrast:Tt,adjustForLandingOverlay:Dt,landing:Ft}){return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 border border-gray-700 transition-all duration-300 bg-[#0F172A]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Image Upload"}),jsxRuntimeExports.jsx("span",{className:"text-xs bg-[#1E293B] text-gray-300 px-2 py-1 rounded-full border border-gray-600",children:"Max 5 MB"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Background"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#000000",onChange:Ut=>$t(dt,"bg_color",Ut.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.bg_color||"#000000"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Match Page Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg||!1,onChange:Ut=>$t(dt,"match_main_bg",Ut.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Use Gradient"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:Ut=>$t(dt,"use_gradient",Ut.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"No Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_no_bg||!1,onChange:Ut=>$t(dt,"use_no_bg",Ut.target.checked)})]})]}),et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#F285C3",onChange:Ut=>$t(dt,"gradient_start",Ut.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"End"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#7bed9f",onChange:Ut=>$t(dt,"gradient_end",Ut.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:Ut=>$t(dt,"gradient_direction",Ut.target.value),className:"w-full p-2 bg-black border border-gray-700 rounded text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-gray-700 p-6 mt-4",style:{background:et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#F285C3"}, ${et.gradient_end||"#7bed9f"})`:et.match_main_bg?Dt(kt):et.bg_color||"transparent"},children:et.image_url?jsxRuntimeExports.jsxs("div",{children:[(()=>{const Ut=!!et.has_alpha;return jsxRuntimeExports.jsx("div",{style:{background:Ut?"repeating-conic-gradient(#e0e0e0 0% 25%, #ffffff 0% 50%) 50% / 20px 20px":"transparent",padding:Ut?"10px":"0px",borderRadius:`${et.radius||0}px`},children:jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:"rounded-lg mx-auto",style:{maxWidth:et.full_width?"100%":et.width?`${et.width}%`:"100%",width:"100%",padding:`${et.padding||0}px`,borderRadius:`${et.radius||0}px`,boxShadow:et.shadow?(()=>{const Ht=(et.shadow_angle||135)*Math.PI/180,Kt=Math.round(Math.cos(Ht)*(et.shadow_offset||10)),Yt=Math.round(Math.sin(Ht)*(et.shadow_offset||10));return`${Kt}px ${Yt}px ${et.shadow_depth||25}px ${et.shadow_color||"rgba(0,0,0,0.5)"}`})():"none"}})})})(),jsxRuntimeExports.jsx("button",{type:"button",className:"text-red-400 text-xs mt-3 hover:underline mx-auto block text-center",onClick:Ut=>{Ut.stopPropagation(),$t(dt,"image_url","")},children:"Remove Image"})]}):jsxRuntimeExports.jsxs("label",{htmlFor:`imageUpload-${et.id}`,className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-600 hover:border-green rounded-xl py-10 px-6 cursor-pointer transition-all group",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-500 group-hover:text-green transition",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-6-9l-3-3m0 0l-3 3m3-3V15"})}),jsxRuntimeExports.jsxs("p",{className:"mt-3 text-sm text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-medium",children:"Click to upload"})," or drag image"]}),jsxRuntimeExports.jsx("input",{id:`imageUpload-${et.id}`,type:"file",accept:"image/*",onChange:async Ut=>{const Ht=Ut.target.files[0];if(!Ht)return;const Kt=URL.createObjectURL(Ht);$t(dt,"image_url",Kt);const Yt=new FormData;Yt.append("image",Ht),Yt.append("landingId",Ft.id),Yt.append("blockId",et.id);try{const Jt=await axiosInstance.post("/landing/upload-media-block",Yt,{headers:{"Content-Type":"multipart/form-data"}});Jt.data.success?($t(dt,"image_url",Jt.data.url),$t(dt,"has_alpha",Jt.data.has_alpha),y$4.success("Image uploaded!")):y$4.error("Upload failed")}catch(Jt){console.error(Jt),y$4.error("Upload error")}finally{URL.revokeObjectURL(Kt)}},className:"hidden"})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Padding (px)"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.padding||0,onChange:Ut=>$t(dt,"padding",Number(Ut.target.value)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Image Width (%)"}),jsxRuntimeExports.jsx("input",{type:"range",min:"10",max:"100",value:et.width||100,onChange:Ut=>$t(dt,"width",Number(Ut.target.value)),className:"w-full mt-2"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[et.width||100,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Rounded Corners (px)"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",value:et.radius||0,onChange:Ut=>$t(dt,"radius",Number(Ut.target.value)),className:"w-full mt-2"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[et.radius||0,"px"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Shadow Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.shadow_color||"#000000",onChange:Ut=>$t(dt,"shadow_color",Ut.target.value),className:"w-full h-10 rounded cursor-pointer border border-gray-600 mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Shadow Depth"}),jsxRuntimeExports.jsx("input",{type:"range",min:"5",max:"60",value:et.shadow_depth||25,onChange:Ut=>$t(dt,"shadow_depth",Number(Ut.target.value)),className:"w-full mt-3"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Shadow Angle ()"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"360",value:et.shadow_angle||135,onChange:Ut=>$t(dt,"shadow_angle",Number(Ut.target.value)),className:"w-full mt-3"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Shadow Offset"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"50",value:et.shadow_offset||10,onChange:Ut=>$t(dt,"shadow_offset",Number(Ut.target.value)),className:"w-full mt-3"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Caption"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.caption||"",placeholder:"Optional caption",onChange:Ut=>$t(dt,"caption",Ut.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white mt-1"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Enable Shadow"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.shadow||!1,onChange:Ut=>$t(dt,"shadow",Ut.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(et.bg_color||kt)},children:"Full Width"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.full_width||!1,onChange:Ut=>$t(dt,"full_width",Ut.target.checked)})]})]})}function SecureCheckoutBlock({block:et,index:dt,updateBlock:$t}){var kt;return jsxRuntimeExports.jsxs("div",{className:"mt-3 transition-all duration-300",children:[jsxRuntimeExports.jsxs("div",{className:"bg-[#0F172A]/60 border border-gray-700 p-6 rounded-xl mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-silver mb-4",children:"Secure Checkout Settings"}),jsxRuntimeExports.jsx("label",{className:"block text-sm text-gray-300 font-semibold mb-1",children:"Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title||"",onChange:Tt=>$t(dt,"title",Tt.target.value),placeholder:"Secure Checkout",className:"w-full mb-4 p-2 bg-black border border-gray-600 rounded text-white"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Subtext"}),jsxRuntimeExports.jsx("textarea",{value:et.subtext||"",onChange:Tt=>$t(dt,"subtext",Tt.target.value),placeholder:"Your information is protected by industry-leading encryption and secure payment processing.",className:"w-full mt-1 p-2 h-20 bg-black border border-gray-600 rounded text-white"}),jsxRuntimeExports.jsx("label",{className:"block mt-4 text-sm text-gray-300 font-semibold",children:"Trust Badges List"}),(et.trust_items||[]).map((Tt,Dt)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:Tt,onChange:Ft=>{const Ut=[...et.trust_items];Ut[Dt]=Ft.target.value,$t(dt,"trust_items",Ut)},className:"flex-1 p-2 bg-black border border-gray-600 rounded text-white"}),jsxRuntimeExports.jsx("button",{className:"text-red-400 text-xs",onClick:()=>{const Ft=et.trust_items.filter((Ut,Ht)=>Ht!==Dt);$t(dt,"trust_items",Ft)},children:"Remove"})]},Dt)),jsxRuntimeExports.jsx("button",{onClick:()=>$t(dt,"trust_items",[...et.trust_items||[],"Secure SSL Encryption"]),className:"mt-3 text-sm px-3 py-2 rounded bg-green text-black font-semibold hover:bg-green/80",children:"Add Trust Item"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 rounded-lg border border-gray-700 bg-[#1a2537]/60",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Guarantee Message"}),jsxRuntimeExports.jsx("textarea",{value:et.guarantee||"",onChange:Tt=>$t(dt,"guarantee",Tt.target.value),placeholder:"30 day money back guarantee on all purchases",className:"w-full mt-1 p-2 bg-black border border-gray-600 rounded text-white h-20"})]}),jsxRuntimeExports.jsx("label",{className:"block mt-6 text-sm text-gray-300 font-semibold",children:"Payment Badge URL"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.payment_badge||"",onChange:Tt=>$t(dt,"payment_badge",Tt.target.value),placeholder:"https://your-image.com/stripebadge.png",className:"w-full p-2 bg-black border border-gray-600 rounded text-white"}),et.payment_badge&&jsxRuntimeExports.jsx("img",{src:et.payment_badge,alt:"Payment Badge",className:"w-40 mt-4 opacity-90 mx-auto"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("h2",{className:"text-[1.25rem] font-extrabold text-white flex items-center justify-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Lock,{className:"w-4 h-4 text-white"}),et.title||"Secure Checkout"]}),et.subtext&&jsxRuntimeExports.jsx("p",{className:"text-gray-300 max-w-xl mx-auto mb-4",children:et.subtext}),((kt=et.trust_items)==null?void 0:kt.length)>0&&jsxRuntimeExports.jsx("ul",{className:"flex flex-col items-center gap-1 mb-4",children:et.trust_items.map((Tt,Dt)=>jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2 text-white text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-green font-bold",children:""})," ",Tt]},Dt))}),et.guarantee&&jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm mb-4",children:et.guarantee}),et.payment_badge&&jsxRuntimeExports.jsx("img",{src:et.payment_badge,className:"w-40 opacity-80 mx-auto mt-2"})]})]})}function AudioPlayerBlock({block:et,index:dt,updateBlock:$t,landing:kt,bgTheme:Tt}){var Rr;const Ft=reactExports.useRef(null),Ut=reactExports.useRef(!1),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState(0),[Zt,er]=reactExports.useState(0),[rr,sr]=reactExports.useState(0),[nr,ir]=reactExports.useState(!1),or=xr=>{if(!xr)return"#f3f4f6";const kr=xr.replace("#","");if(kr.length!==6)return"#f3f4f6";const Mr=parseInt(kr.substring(0,2),16),Tr=parseInt(kr.substring(2,4),16),Or=parseInt(kr.substring(4,6),16);return(Mr*299+Tr*587+Or*114)/1e3>160?"#1f2937":"#f3f4f6"};function lr(xr){if(!xr||isNaN(xr))return"00:00";const kr=Math.floor(xr/60),Mr=Math.floor(xr%60);return`${String(kr).padStart(2,"0")}:${String(Mr).padStart(2,"0")}`}const cr=xr=>{$t(dt,"audio_url",xr.audio_url),$t(dt,"title",xr.title),$t(dt,"cover_url",xr.cover_url||""),$t(dt,"audio_name",xr.title||"Track"),Jt(0),er(0),sr(0),Kt(!1),Ut.current=!1},dr=()=>{const xr=Ft.current;xr&&(xr.paused?xr.play().catch(()=>{}):xr.pause())};reactExports.useEffect(()=>{const xr=Ft.current;if(!xr)return;const kr=()=>Kt(!0),Mr=()=>Kt(!1),Tr=()=>{er(xr.duration||0)},Or=()=>{const Pr=xr.currentTime||0,br=xr.duration||1;if(et.preview_enabled&&et.preview_duration>0&&Pr>=Math.min(et.preview_duration,br)){Ut.current||(Ut.current=!0,y$4.info("Preview ended. Purchase to unlock the full track.")),xr.pause(),xr.currentTime=0,Jt(0),sr(0);return}Jt(Pr),sr(Pr/br*100)},_r=()=>{Kt(!1);const Pr=et.playlist||[],br=Pr.findIndex(zr=>zr.audio_url===et.audio_url),wr=Pr[br+1];wr&&cr(wr)};return xr.addEventListener("play",kr),xr.addEventListener("pause",Mr),xr.addEventListener("loadedmetadata",Tr),xr.addEventListener("timeupdate",Or),xr.addEventListener("ended",_r),()=>{xr.removeEventListener("play",kr),xr.removeEventListener("pause",Mr),xr.removeEventListener("loadedmetadata",Tr),xr.removeEventListener("timeupdate",Or),xr.removeEventListener("ended",_r)}},[et.audio_url,et.preview_enabled,et.preview_duration,et.playlist]);async function ur(xr,kr,Mr){const Tr=await axiosInstance.post("/seller-checkout/create-audio-checkout",{audio_type:"single",landingPageId:Mr.id,blockId:kr.id,sellerId:Mr.user_id,audio_urls:[xr.audio_url],product_name:xr.title||"Audio Track",price_in_cents:Math.round((xr.price||kr.single_price)*100),cover_url:xr.cover_url||kr.cover_url||""});Tr.data.url&&(window.location.href=Tr.data.url)}async function pr(xr,kr){var Tr,Or,_r;const Mr=await axiosInstance.post("/seller-checkout/create-audio-checkout",{audio_type:"album",landingPageId:kr.id,blockId:xr.id,sellerId:kr.user_id,audio_urls:xr.playlist.map(Pr=>Pr.audio_url),product_name:((Tr=xr.album_button_text)==null?void 0:Tr.trim())||"Buy Album",price_in_cents:Math.round(xr.album_price*100),cover_url:xr.cover_url||((_r=(Or=xr.playlist)==null?void 0:Or[0])==null?void 0:_r.cover_url)||""});Mr.data.url&&(window.location.href=Mr.data.url)}function mr(xr){const kr=Math.min(xr,1800),Mr=[];for(let Tr=10;Tr<=kr;Tr+=30){const Or=Math.floor(Tr/60),_r=Tr%60,Pr=Or>0?`${Or}m ${_r>0?_r+"s":""}`:`${_r}s`;Mr.push({value:Tr,label:Pr})}return Mr}function jr(xr){return new Promise((kr,Mr)=>{const Tr=document.createElement("audio");Tr.preload="metadata",Tr.onloadedmetadata=()=>{URL.revokeObjectURL(Tr.src),Tr.duration>10800?Mr(new Error("Audio exceeds the 3 hour maximum length")):kr()},Tr.onerror=()=>{Mr(new Error("Unable to read audio metadata"))},Tr.src=URL.createObjectURL(xr)})}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative rounded-xl p-6 mt-3 border border-gray-700 transition-all",style:{background:et.match_main_bg?Tt:et.use_gradient?`linear-gradient(${et.gradient_direction}, ${et.gradient_start}, ${et.gradient_end})`:et.bg_color||"transparent"},children:[nr&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 z-50 rounded-xl",children:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 border-4 border-t-transparent border-green rounded-full animate-spin"})}),jsxRuntimeExports.jsx("audio",{ref:Ft,src:et.audio_url||"",preload:"metadata"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[et.show_cover&&et.cover_url&&jsxRuntimeExports.jsx("img",{src:et.cover_url,className:"w-[70px] h-[70px] object-cover rounded-lg"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-left",children:[et.show_title&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 mb-2",children:jsxRuntimeExports.jsx("span",{className:"font-semibold",style:{color:et.text_color},children:et.title})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-[38px] h-[38px] rounded-lg bg-[#1e293b] flex items-center justify-center cursor-pointer",onClick:()=>{const xr=Ft.current;xr&&(xr.currentTime=Math.max(0,xr.currentTime-10))},children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",fill:et.progress_color,children:jsxRuntimeExports.jsx("path",{d:"M12 16V4L4 10l8 6z"})})}),jsxRuntimeExports.jsx("div",{onClick:dr,className:"w-[45px] h-[45px] rounded-full flex items-center justify-center cursor-pointer shadow-lg",style:{background:et.progress_color},children:Ht?jsxRuntimeExports.jsx("svg",{width:"26",height:"26",fill:"#000",children:jsxRuntimeExports.jsx("path",{d:"M8 4h4v16H8zm6 0h4v16h-4z"})}):jsxRuntimeExports.jsx("svg",{width:"26",height:"26",fill:"#000",children:jsxRuntimeExports.jsx("path",{d:"M8 4v16l12-8z"})})}),jsxRuntimeExports.jsx("div",{className:"w-[38px] h-[38px] rounded-lg bg-[#1e293b] flex items-center justify-center cursor-pointer",onClick:()=>{const xr=Ft.current;if(!xr)return;const kr=xr.duration||1/0;xr.currentTime=Math.min(kr,xr.currentTime+10)},children:jsxRuntimeExports.jsx("svg",{width:"16",height:"16",fill:et.progress_color,children:jsxRuntimeExports.jsx("path",{d:"M8 4v12l8-6-8-6z"})})}),jsxRuntimeExports.jsx("div",{className:"w-[120px] h-[6px] bg-[#1f2937] rounded-lg overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full",style:{width:"70%",background:et.progress_color}})})]}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:100,value:rr,onChange:xr=>{const kr=Ft.current;if(!kr)return;const Mr=Number(xr.target.value),Tr=kr.duration||1;let Or=Mr/100*Tr;const _r=et.preview_enabled&&et.preview_duration>0?Math.min(et.preview_duration,Tr):null;if(_r!==null&&Or>=_r){Or=_r,sr(_r/Tr*100),Jt(_r),kr.currentTime=_r;return}kr.currentTime=Or,sr(Mr),Jt(Or)},className:"w-full mt-4 accent-green cursor-pointer"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-gray-400 text-sm mt-1",children:[jsxRuntimeExports.jsx("span",{children:lr(Yt)}),jsxRuntimeExports.jsx("span",{children:lr(Zt)})]})]})]}),((Rr=et.playlist)==null?void 0:Rr.length)>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("h4",{className:"text-silver mb-2 font-semibold",children:"Playlist"}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:et.playlist.map((xr,kr)=>{const Mr=et.audio_url===xr.audio_url;return jsxRuntimeExports.jsx("li",{className:`p-3 rounded border cursor-pointer 
    ${Mr?"bg-green/20 border-green":"bg-[#1E293B] border-gray-700 hover:bg-[#2A3A4F]"}
  `,onClick:()=>cr(xr),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 w-full",children:[xr.cover_url&&jsxRuntimeExports.jsx("img",{src:xr.cover_url,className:"w-10 h-10 object-cover rounded"}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-white truncate",children:xr.title}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm mr-3",children:xr.duration||"--:--"}),et.sell_singles&&jsxRuntimeExports.jsx("button",{type:"button",onClick:Tr=>{Tr.stopPropagation(),ur(xr,et,kt)},className:"px-3 py-1 rounded bg-green text-black font-semibold text-sm",children:et.single_button_text||"Buy"})]})},kr)})})]}),et.sell_album&&et.playlist.length>0&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>pr(et,kt),className:"mt-4 w-full py-3 bg-green text-black font-semibold rounded-lg",children:et.album_button_text||"Buy Album"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 space-y-6 p-4 rounded-lg bg-[#111]/40 border border-gray-800",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Playback Appearance"}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mb-1 block",children:"Progress Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.progress_color,onChange:xr=>$t(dt,"progress_color",xr.target.value),className:"w-10 h-10 rounded-full cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.progress_color,onChange:xr=>$t(dt,"progress_color",xr.target.value),onBlur:xr=>{const kr=xr.target.value.startsWith("#")?xr.target.value:`#${xr.target.value}`;$t(dt,"progress_color",kr)},className:"w-24 p-1 bg-black border border-gray-700 rounded text-white text-sm",placeholder:"#22c55e"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:or(et.bg_color)},children:"Match Section Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg,onChange:xr=>$t(dt,"match_main_bg",xr.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:or(et.bg_color)},children:"Use Gradient Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient,onChange:xr=>$t(dt,"use_gradient",xr.target.checked)})]}),et.use_gradient?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Gradient Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start,onChange:xr=>$t(dt,"gradient_start",xr.target.value),className:"w-full h-10 rounded mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Gradient End"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end,onChange:xr=>$t(dt,"gradient_end",xr.target.value),className:"w-full h-10 rounded mt-1"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Gradient Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction,onChange:xr=>$t(dt,"gradient_direction",xr.target.value),className:"w-full p-2 rounded bg-black border border-gray-700 text-white mt-1",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Background Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color,onChange:xr=>$t(dt,"bg_color",xr.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.bg_color,onChange:xr=>$t(dt,"bg_color",xr.target.value),className:"w-24 p-1 bg-black border border-gray-700 rounded text-white text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Title Text Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color,onChange:xr=>$t(dt,"text_color",xr.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.text_color,onChange:xr=>$t(dt,"text_color",xr.target.value),className:"w-24 p-1 bg-black border border-gray-700 rounded text-white text-sm"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-[#111]/40 border border-gray-800 rounded-lg space-y-4 mt-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Track Title"}),jsxRuntimeExports.jsx("input",{value:et.title||"",onChange:xr=>$t(dt,"title",xr.target.value),className:"w-full p-2 rounded bg-black border border-gray-700 text-white"}),jsxRuntimeExports.jsx("input",{id:`audioUpload-${et.id}`,type:"file",accept:"audio/*",className:"hidden",onChange:async xr=>{var Mr;const kr=xr.target.files[0];if(kr){ir(!0);try{await jr(kr);const Tr=await axiosInstance.post("/landing/sign-upload",{fileName:kr.name,mimeType:kr.type,landingId:kt.id,blockId:et.id});if(!((Mr=Tr.data)!=null&&Mr.success))throw new Error("Failed to get upload URL");const{uploadUrl:Or,publicUrl:_r}=Tr.data;await fetch(Or,{method:"PUT",body:kr,headers:{"Content-Type":kr.type,"x-amz-acl":"public-read"}});const Pr={title:kr.name.replace(/\.[^/.]+$/,""),audio_url:_r,cover_url:et.cover_url||"",price:et.single_price||"",stripe_product_id:"",stripe_price_id:""},br=[...et.playlist||[],Pr];$t(dt,"playlist",br),$t(dt,"audio_url",Pr.audio_url),$t(dt,"audio_name",Pr.title),$t(dt,"title",Pr.title),y$4.success("Audio uploaded successfully")}catch(Tr){console.error(Tr),y$4.error(Tr.message||"Upload failed")}finally{ir(!1),xr.target.value=""}}}}),jsxRuntimeExports.jsx("label",{htmlFor:`audioUpload-${et.id}`,className:"px-4 py-2 bg-blue rounded cursor-pointer text-white inline-block mt-2",children:"Upload Audio"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{$t(dt,"audio_url",""),$t(dt,"audio_name",""),$t(dt,"title",""),Jt(0),er(0),sr(0),Kt(!1);const xr=(et.playlist||[]).filter(kr=>kr.audio_url!==et.audio_url);$t(dt,"playlist",xr),y$4.success("Audio removed.")},className:"ml-3 px-4 py-2 bg-red-600 hover:bg-red-700 rounded text-white inline-block mt-2",children:"Remove Audio"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 block",children:"Audio File"}),jsxRuntimeExports.jsx("input",{value:et.audio_name||"No audio uploaded",readOnly:!0,className:"w-full p-2 rounded bg-black border border-gray-700 text-white",placeholder:"No audio uploaded"}),jsxRuntimeExports.jsx("input",{id:`coverUpload-${et.id}`,type:"file",accept:"image/*",onChange:async xr=>{const kr=xr.target.files[0];if(!kr)return;const Mr=new FormData;Mr.append("image",kr),Mr.append("landingId",kt.id),Mr.append("blockId",et.id),ir(!0);try{const Tr=await axiosInstance.post("/landing/upload-media-block",Mr,{headers:{"Content-Type":"multipart/form-data"}});if(Tr.data.success){const Or=Tr.data.url,_r=(et.playlist||[]).map(Pr=>Pr.audio_url===et.audio_url?{...Pr,cover_url:Or}:Pr);$t(dt,"playlist",_r),$t(dt,"cover_url",Or),$t(dt,"cover_name",Tr.data.originalName),y$4.success("Cover updated!")}else y$4.error("Upload failed")}catch(Tr){console.error(Tr),y$4.error("Upload error")}finally{ir(!1)}},className:"hidden"}),jsxRuntimeExports.jsx("label",{htmlFor:`coverUpload-${et.id}`,className:"px-4 py-2 bg-royalPurple rounded cursor-pointer text-white inline-block mt-2",children:"Upload Cover"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{$t(dt,"cover_url",""),$t(dt,"cover_name","");const xr=(et.playlist||[]).map(kr=>kr.audio_url===et.audio_url?{...kr,cover_url:""}:kr);$t(dt,"playlist",xr),y$4.success("Cover removed.")},className:"ml-3 px-4 py-2 bg-red-600 hover:bg-red-700 rounded text-white inline-block mt-2",children:"Remove Cover"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 block",children:"Cover Image URL"}),jsxRuntimeExports.jsx("input",{value:et.cover_name||"No cover uploaded",readOnly:!0,className:"w-full p-2 rounded bg-black border border-gray-700 text-white"}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-[#111]/40 border border-gray-800 rounded-lg space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-silver font-semibold text-lg",children:"Selling Options"}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-300",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.sell_singles,onChange:xr=>$t(dt,"sell_singles",xr.target.checked)}),"Sell Individual Tracks"]}),et.sell_singles&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Default Single Price"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-black border border-gray-700 text-white",value:et.single_price,onChange:xr=>$t(dt,"single_price",xr.target.value),placeholder:"0.00"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-300",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.sell_album,onChange:xr=>$t(dt,"sell_album",xr.target.checked)}),"Sell Full Album"]}),et.sell_album&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Album Price"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-black border border-gray-700 text-white",value:et.album_price,onChange:xr=>$t(dt,"album_price",xr.target.value),placeholder:"9.99"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Album Button Text"}),jsxRuntimeExports.jsx("input",{className:"w-full p-2 rounded bg-black border border-gray-700 text-white",value:et.album_button_text,onChange:xr=>$t(dt,"album_button_text",xr.target.value)})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-gray-300",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.preview_enabled,onChange:xr=>{$t(dt,"preview_enabled",xr.target.checked),xr.target.checked&&!et.preview_duration&&$t(dt,"preview_duration",10)}}),"Limit Playback to Preview Only"]}),et.preview_enabled&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300",children:"Preview Duration"}),jsxRuntimeExports.jsx("select",{className:"w-full p-2 rounded bg-black border border-gray-700 text-white mt-1",value:et.preview_duration,onChange:xr=>$t(dt,"preview_duration",Number(xr.target.value)),children:mr(Zt).map(xr=>jsxRuntimeExports.jsx("option",{value:xr.value,children:xr.label},xr.value))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Choose up to 30 minutes based on the audio length."})]})]})]})]})}function SortableContainerBlock({block:et,index:dt,updateBlock:$t,removeBlock:kt,moveBlockUp:Tt,moveBlockDown:Dt,activeChild:Ft,setActiveChild:Ut,bgTheme:Ht,pdfList:Kt,landing:Yt,openAIModal:Jt}){var rr;const Zt=(sr,nr,ir)=>{$t(dt,"children",(or=[])=>{const lr=[...or];return lr[sr]={...lr[sr],[nr]:ir},lr})},er=(sr,nr,ir)=>{Zt(sr,nr,ir)};return jsxRuntimeExports.jsxs("div",{"data-drop-id":dt,"data-parent-id":null,onClick:sr=>{sr.stopPropagation(),Ut(null)},className:`
        mb-4 sm:mb-6
        rounded-xl
        p-2 sm:p-4
        bg-dashboard-bg-light/70 dark:bg-dashboard-bg-dark/70
        transition-all duration-200
        border
        border-dashboard-border-light dark:border-dashboard-border-dark
        hover:border-dashed
        hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-dashboard-muted-light dark:text-green font-bold text-lg mr-auto",children:et.title||"Untitled Section"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:sr=>{sr.stopPropagation(),Tt(et.id)},className:`
            px-2 py-1 text-xs rounded
            bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            hover:text-dashboard-text-light dark:hover:text-dashboard-text-dark
          `,children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:sr=>{sr.stopPropagation(),Dt(et.id)},className:`
            px-2 py-1 text-xs rounded
            bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            hover:text-dashboard-text-light dark:hover:text-dashboard-text-dark
          `,children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:sr=>{sr.stopPropagation(),$t(dt,"collapsed",!et.collapsed)},className:`
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            hover:text-dashboard-text-light dark:hover:text-dashboard-text-dark
          `,children:""})]}),!et.collapsed&&jsxRuntimeExports.jsx("input",{value:et.title||"",onClick:sr=>sr.stopPropagation(),onChange:sr=>$t(dt,"title",sr.target.value),className:`
            mb-3 w-full
            rounded px-3 py-2 text-sm
            bg-dashboard-bg-light dark:bg-dashboard-bg-dark
            text-dashboard-text-light dark:text-dashboard-text-dark
            border
            border-dashboard-border-light dark:border-dashboard-border-dark
          `}),!et.collapsed&&jsxRuntimeExports.jsx("div",{className:"rounded-md p-0.5 sm:p-1 transition-colors",children:jsxRuntimeExports.jsx(SortableContext,{items:(et.children||[]).map(sr=>sr.id),strategy:verticalListSortingStrategy,children:(rr=et.children)==null?void 0:rr.map((sr,nr)=>jsxRuntimeExports.jsx(React$2.Fragment,{children:jsxRuntimeExports.jsx(MemoizedSortableBlock,{id:sr.id,block:sr,index:nr,updateChildBlock:Zt,containerIndex:dt,updateBlock:er,activeChild:Ft,setActiveChild:Ut,removeBlock:ir=>{$t(dt,"children",et.children.filter((or,lr)=>lr!==ir))},bgTheme:Ht,pdfList:Kt,landing:Yt,openAIModal:Jt},sr.id)},sr.id))})}),jsxRuntimeExports.jsx("button",{onClick:sr=>{sr.stopPropagation(),kt(dt)},className:"mt-4 text-red-400 text-sm",children:"Remove Section"})]})}function ButtonBlock({block:et,index:dt,updateBlock:$t,bgTheme:kt,landing:Tt}){const Dt=et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#22c55e"}, ${et.gradient_end||"#3b82f6"})`:et.bg_color||"#22c55e",Ft=kt||(Tt!=null&&Tt.bg_theme&&Tt.bg_theme!==""?Tt.bg_theme:null)||"#0b1220",Ut=typeof et.shadow_opacity=="number"?et.shadow_opacity/100:.35,Ht=`${et.shadow_offset_x??0}px ${et.shadow_offset_y??8}px ${et.shadow_blur??20}px rgba(0,0,0,${Ut})`,Kt=Yt=>/^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(Yt);return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 shadow-inner bg-[#0F172A]/60 border border-gray-700 transition-all duration-300 space-y-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Text"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Click Here",value:et.text||"",onChange:Yt=>$t(dt,"text",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button URL"}),jsxRuntimeExports.jsx("input",{type:"url",placeholder:"https://example.com",value:et.url||"",onChange:Yt=>$t(dt,"url",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.open_new_tab??!0,onChange:Yt=>$t(dt,"open_new_tab",Yt.target.checked)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-300",children:"Open in new tab"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Width (px)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"80",max:"600",value:et.width||220,onChange:Yt=>$t(dt,"width",parseInt(Yt.target.value,10)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Height (px)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"32",max:"100",value:et.height||48,onChange:Yt=>$t(dt,"height",parseInt(Yt.target.value,10)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"})]})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Corner Radius"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"40",value:et.radius||8,onChange:Yt=>$t(dt,"radius",parseInt(Yt.target.value,10)),className:"w-full"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Stroke Width"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",max:"6",value:et.stroke_width||0,onChange:Yt=>$t(dt,"stroke_width",parseInt(Yt.target.value,10)),className:"w-full p-2 border border-gray-600 rounded bg-black text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Stroke Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.stroke_color||"#000000",onChange:Yt=>$t(dt,"stroke_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.stroke_color||"#000000",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&$t(dt,"stroke_color",Jt)},placeholder:"#000000",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-gray-300",children:"Shadow"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Offset X"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-40",max:"40",value:et.shadow_offset_x||0,onChange:Yt=>$t(dt,"shadow_offset_x",parseInt(Yt.target.value,10)),className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Offset Y"}),jsxRuntimeExports.jsx("input",{type:"range",min:"-40",max:"40",value:et.shadow_offset_y||8,onChange:Yt=>$t(dt,"shadow_offset_y",parseInt(Yt.target.value,10)),className:"w-full"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Blur"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"60",value:et.shadow_blur||20,onChange:Yt=>$t(dt,"shadow_blur",parseInt(Yt.target.value,10)),className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Opacity"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"100",value:et.shadow_opacity??35,onChange:Yt=>$t(dt,"shadow_opacity",parseInt(Yt.target.value,10)),className:"w-full"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Shadow Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.shadow_color||"#000000",onChange:Yt=>$t(dt,"shadow_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.shadow_color||"#000000",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&$t(dt,"shadow_color",Jt)},placeholder:"#000000",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:Yt=>$t(dt,"use_gradient",Yt.target.checked)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-300",children:"Use Gradient"})]}),!et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Background Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#22c55e",onChange:Yt=>$t(dt,"bg_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.bg_color||"#22c55e",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&$t(dt,"bg_color",Jt)},placeholder:"#22c55e",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]}),et.use_gradient&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Start"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#22c55e",onChange:Yt=>$t(dt,"gradient_start",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.gradient_start||"#22c55e",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&$t(dt,"gradient_start",Jt)},placeholder:"#22c55e",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient End"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#3b82f6",onChange:Yt=>$t(dt,"gradient_end",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.gradient_end||"#3b82f6",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&$t(dt,"gradient_end",Jt)},placeholder:"#3b82f6",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:Yt=>$t(dt,"gradient_direction",Yt.target.value),className:"w-full p-2 border border-gray-600 rounded bg-black text-white",children:[jsxRuntimeExports.jsx("option",{value:"0deg",children:"Top to Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal"}),jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left to Right"}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Reverse Diagonal"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Bottom to Top"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#000000",onChange:Yt=>$t(dt,"text_color",Yt.target.value),className:"w-10 h-10 rounded cursor-pointer"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.text_color||"#000000",onChange:Yt=>{const Jt=Yt.target.value;Kt(Jt)&&$t(dt,"text_color",Jt)},placeholder:"#000000",className:"w-24 px-2 py-1 bg-black border border-gray-600 rounded text-white text-xs uppercase"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400 mb-3",children:"Preview (Live Background)"}),jsxRuntimeExports.jsx("div",{style:{background:Ft,padding:"48px 24px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.08)"},children:jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:`${et.width??220}px`,height:`${et.height??48}px`,padding:`${et.padding_y??12}px ${et.padding_x??24}px`,background:Dt,color:et.text_color||"#000000",fontSize:`${et.font_size??16}px`,fontWeight:et.font_weight??600,borderRadius:`${et.radius??8}px`,border:`${et.stroke_width??0}px solid ${et.stroke_color||"#000"}`,boxShadow:Ht,userSelect:"none",pointerEvents:"none"},children:et.text||"Click Here"})})}),et.url&&jsxRuntimeExports.jsxs("p",{className:"mt-2 text-xs text-gray-400 text-center break-all",children:[" ",et.url]})]})]})}function SingleOfferBlock({block:et,index:dt,updateBlock:$t,bgTheme:kt,landing:Tt,pdfList:Dt,updateChildBlock:Ft,openAIModal:Ut,containerIndex:Ht}){const[Kt,Yt]=React$2.useState(""),[Jt,Zt]=React$2.useState(!1),er=reactExports.useMemo(()=>(Dt==null?void 0:Dt.filter(or=>or.status==="completed"&&or.pdf_url))||[],[Dt]),rr=(or,lr)=>{$t(dt,or,lr)},sr=async or=>{const lr=URL.createObjectURL(or);rr("image_url",lr);try{const cr=new FormData;cr.append("image",or),cr.append("landingId",Tt==null?void 0:Tt.id),cr.append("blockId",et.id);const dr=await axiosInstance.post("/landing/upload-media-block",cr,{headers:{"Content-Type":"multipart/form-data"}});dr.data.url&&(rr("image_url",dr.data.url),rr("use_pdf_cover",!1),y$4.success("Image uploaded!"))}catch{y$4.error("Upload failed")}finally{URL.revokeObjectURL(lr)}},nr=et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#F285C3"}, ${et.gradient_end||"#7bed9f"})`:et.match_main_bg?kt:et.bg_color||"#111827",ir=et.text_color||"#ffffff";return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-6 border border-gray-700 transition-all duration-300",style:{background:nr,maxHeight:"80vh",overflowY:"auto"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-green mb-6",children:"Single Offer"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Background Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.bg_color||"#000000",onChange:or=>rr("bg_color",or.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-700"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.bg_color})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Match Page Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg||!1,onChange:or=>rr("match_main_bg",or.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Gradient"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:or=>rr("use_gradient",or.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"No Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_no_bg||!1,onChange:or=>rr("use_no_bg",or.target.checked)})]})]}),et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_start||"#F285C3",onChange:or=>rr("gradient_start",or.target.value),className:"w-full h-10 border border-gray-700 rounded mt-1 bg-black"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient End"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.gradient_end||"#7bed9f",onChange:or=>rr("gradient_end",or.target.value),className:"w-full h-10 border border-gray-700 rounded mt-1 bg-black"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:or=>rr("gradient_direction",or.target.value),className:"w-full p-2 mt-1 bg-black border border-gray-700 rounded text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Button Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_text_color||"#000000",onChange:or=>rr("button_text_color",or.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-700"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.button_text_color})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300",children:["Card Width (",et.card_width||360,"px)"]}),jsxRuntimeExports.jsx("input",{type:"range",min:260,max:520,step:10,value:et.card_width||360,onChange:or=>rr("card_width",Number(or.target.value)),className:"w-full mt-2"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Card Height"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.card_height==="auto",onChange:or=>rr("card_height",or.target.checked?"auto":420)}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"Auto height"})]}),et.card_height!=="auto"&&jsxRuntimeExports.jsx("input",{type:"range",min:300,max:700,step:10,value:et.card_height||420,onChange:or=>rr("card_height",Number(or.target.value)),className:"w-full mt-2"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:(()=>{var lr;const or=Kt||et.cover_url||et.image_url||"";return jsxRuntimeExports.jsxs("div",{className:"border border-gray-700 rounded-xl p-4 bg-black/40 backdrop-blur-md shadow-lg",style:{color:ir,width:et.card_width?`${et.card_width}px`:"360px",height:et.card_height==="auto"?"auto":`${et.card_height}px`,display:"flex",flexDirection:"column",overflow:et.card_height==="auto"?"visible":"auto"},children:[jsxRuntimeExports.jsx("div",{className:"mt-3 relative",children:Jt?jsxRuntimeExports.jsxs("div",{className:"w-full h-56 flex flex-col items-center justify-center rounded-lg bg-black/40 border border-gray-700",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 border-4 border-gray-500 border-t-green rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Loading Book cover"})]}):or?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:or,className:"rounded-lg w-full mb-3",alt:""}),!et.use_pdf_cover&&jsxRuntimeExports.jsx("button",{type:"button",className:"text-red-400 text-xs hover:underline",onClick:()=>{rr("image_url",""),rr("cover_url",""),Yt("")},children:"Remove"})]}):jsxRuntimeExports.jsxs("label",{className:"block border border-gray-600 border-dashed rounded-xl p-6 text-center cursor-pointer",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300 text-sm",children:"Upload Image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:cr=>sr(cr.target.files[0])})]})}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Choose Book"}),jsxRuntimeExports.jsxs("select",{value:et.pdf_url||"",onChange:async cr=>{var pr;const dr=cr.target.value;if(rr("pdf_url",dr),rr("pdf_name",""),Yt(""),Zt(!0),!dr){rr("cover_url",""),rr("image_url",""),rr("use_pdf_cover",!1),Zt(!1);return}const ur=er.find(mr=>mr.pdf_url===dr);ur&&rr("pdf_name",ur.title||"Book");try{const mr=await axiosInstance.get(`/landing/lead-magnets/cover?pdfUrl=${encodeURIComponent(dr)}`);(pr=mr.data)!=null&&pr.cover_image&&(Yt(mr.data.cover_image),rr("cover_url",mr.data.cover_image),rr("image_url",mr.data.cover_image),rr("use_pdf_cover",!0))}catch(mr){console.error(" Error loading Book cover:",mr)}finally{Zt(!1)}},className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Choose Book --"}),er.map(cr=>jsxRuntimeExports.jsx("option",{value:cr.pdf_url,children:cr.title||"Book"},cr.id))]}),et.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Selected Book:"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:et.pdf_name||"Book"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Book Cover Image"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_pdf_cover||!1,onChange:cr=>{const dr=cr.target.checked;rr("use_pdf_cover",dr),dr&&et.cover_url&&rr("image_url",et.cover_url),dr||rr("image_url","")}})]}),et.pdf_url&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:jsxRuntimeExports.jsx("a",{href:et.pdf_url,target:"_blank",className:"text-green underline",rel:"noopener noreferrer",children:"Preview Book"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.text_color||"#ffffff",onChange:cr=>rr("text_color",cr.target.value),className:"w-8 h-8 rounded cursor-pointer border border-gray-700"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:et.text_color})]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Offer Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title||"",maxLength:60,onChange:cr=>rr("title",cr.target.value),className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",placeholder:"Offer Title"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[((lr=et.title)==null?void 0:lr.length)||0,"/60"]}),!et.use_long_description&&jsxRuntimeExports.jsx("textarea",{value:et.text,onChange:cr=>rr("text",cr.target.value),className:"w-full p-3 bg-black text-white placeholder-gray-500 border mt-3 resize-y min-h-[120px]",rows:6,placeholder:"Short description"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Long Description"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_long_description||!1,onChange:cr=>{const dr=cr.target.checked;rr("use_long_description",dr),dr&&rr("text","")}})]}),et.use_long_description&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 block mb-1",children:"Description Type"}),jsxRuntimeExports.jsxs("select",{value:et.description_type||"text",onChange:cr=>rr("description_type",cr.target.value),className:"w-full p-2 bg-black text-white border border-gray-600 rounded",children:[jsxRuntimeExports.jsx("option",{value:"text",children:"Rich Text"}),jsxRuntimeExports.jsx("option",{value:"bullets",children:"Bullet Points"})]})]}),et.use_long_description&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Long Description"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ut({blockType:"offer_long_description",blockIndex:dt,updateChildBlock:Ft,containerIndex:Ht,currentText:et.long_text||"",role:"sales"}),onPointerDown:cr=>cr.stopPropagation(),className:`
                    text-xs font-semibold px-3 py-1 rounded-md
                    bg-royalPurple text-white
                    hover:bg-royalPurple/80
                    transition
                  `,children:"AI"})]}),et.use_long_description&&jsxRuntimeExports.jsx("textarea",{value:et.long_text||"",onChange:cr=>{const dr=cr.target.value;Ht!==void 0&&Ft?Ft(dt,"long_text",dr):$t(dt,"long_text",dr)},rows:8,placeholder:et.description_type==="bullets"?` Benefit one
 Benefit two
 Benefit three`:"Write a detailed sales description...",className:`w-full p-3 text-white mt-2 bg-black border border-gray-600 rounded
resize-y min-h-[180px] flex-shrink-0`}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Price"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.price,onChange:cr=>rr("price",Number(cr.target.value)||0),className:"w-full p-2 bg-black text-white border mt-1"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Label"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.button_text,onChange:cr=>rr("button_text",cr.target.value),className:"w-full p-2 bg-black border mt-1",style:{color:"#000000"}}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Background"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_color,onChange:cr=>rr("button_color",cr.target.value),className:"w-8 h-8 mt-1 border border-gray-600 rounded"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:et.button_text_color||"#000000",onChange:cr=>rr("button_text_color",cr.target.value),className:"w-8 h-8 mt-1 border border-gray-600 rounded"}),jsxRuntimeExports.jsx("div",{style:{marginTop:"auto"},children:jsxRuntimeExports.jsx("button",{style:{backgroundColor:et.button_color,color:et.button_text_color||"#000000"},className:"w-full mt-4 py-2 rounded-lg font-semibold transition",children:et.button_text})})]})})()})]})}function MiniOfferAdvanced({block:et,updateField:dt,landing:$t,openAIModal:kt}){var Jt,Zt,er,rr,sr;const Ut={enabled:((Jt=et.offer_page)==null?void 0:Jt.enabled)??!1,blocks:Array.isArray((Zt=et.offer_page)==null?void 0:Zt.blocks)?et.offer_page.blocks:[],bullets:Array.isArray((er=et.offer_page)==null?void 0:er.bullets)?et.offer_page.bullets:[],trust_items:Array.isArray((rr=et.offer_page)==null?void 0:rr.trust_items)?et.offer_page.trust_items:[]},Ht=nr=>{dt("offer_page",{...Ut,...nr})},Kt=(sr=Ut.blocks)==null?void 0:sr[Ut.blocks.length-1],Yt=Ut.blocks.length<6&&(!Kt||Kt.text||Kt.image_url);return jsxRuntimeExports.jsxs("div",{className:"mt-6 ",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Ht({enabled:!Ut.enabled}),className:"w-full flex justify-between items-center py-3 border-b border-gray-800",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-white tracking-wide",children:"Advanced Offer Page"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:Ut.enabled?"Hide":"Show"})]}),Ut.enabled?jsxRuntimeExports.jsxs("div",{className:"pt-6 space-y-10",children:[(!Ut.blocks||Ut.blocks.length===0)&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"No paragraph blocks yet."}),(Ut.blocks||[]).map((nr,ir)=>{var or;return jsxRuntimeExports.jsxs("div",{className:"space-y-3 pb-6 border-b border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-semibold text-gray-400",children:"Paragraph Content"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>kt({blockType:"offer_paragraph",currentText:nr.text||"",onApply:lr=>{const cr=[...Ut.blocks];cr[ir]={...nr,text:lr},Ht({blocks:cr})},role:"sales"}),className:`text-xs font-semibold px-3 py-1 rounded-md
      bg-royalPurple text-white hover:bg-royalPurple/80 transition`,children:"AI"})]}),jsxRuntimeExports.jsx("textarea",{value:nr.text||"",maxLength:800,onChange:lr=>{const cr=[...Ut.blocks];cr[ir]={...nr,text:lr.target.value},Ht({blocks:cr})},rows:4,className:"w-full bg-black text-white border border-gray-700 rounded-lg p-4 focus:border-green focus:ring-0",placeholder:"Write paragraph content"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 text-right",children:[((or=nr.text)==null?void 0:or.length)||0,"/800"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-semibold text-gray-400",children:"Optional image"}),nr.image_url?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:nr.image_url,className:"w-full max-h-48 object-cover rounded-md border border-gray-700",alt:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:lr=>{const cr=[...Ut.blocks];cr[ir]={...cr[ir],image_url:""},Ht({blocks:cr}),lr.target.value=""},className:"absolute top-2 right-2 bg-black/70 text-red-400 text-xs px-2 py-1 rounded hover:bg-black",children:"Remove"})]}):jsxRuntimeExports.jsxs("label",{className:"flex items-center justify-center h-28 border border-dashed border-gray-600 rounded cursor-pointer text-sm text-gray-400 hover:border-gray-400",children:["Upload image",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async lr=>{var ur,pr;const cr=(ur=lr.target.files)==null?void 0:ur[0];if(!cr)return;const dr=new FormData;dr.append("image",cr),dr.append("landingId",$t.id),dr.append("blockId",et.id),dr.append("offerBlockId",nr.id);try{const mr=await axiosInstance.post("/landing/upload-media-block",dr,{headers:{"Content-Type":"multipart/form-data"}});if((pr=mr.data)!=null&&pr.url){const jr=[...Ut.blocks];jr[ir]={...jr[ir],image_url:mr.data.url},Ht({blocks:jr})}}catch(mr){console.error(mr),y$4.error("Image upload failed")}}})]})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ht({blocks:Ut.blocks.filter((lr,cr)=>cr!==ir)}),className:"text-xs text-red-400 hover:text-red-300",children:"Remove paragraph block"})]},nr.id)}),jsxRuntimeExports.jsxs("button",{type:"button",disabled:!Yt,onClick:()=>Ht({blocks:[...Ut.blocks||[],{id:crypto.randomUUID(),type:"paragraph",text:"",image_url:""}]}),className:`text-sm font-medium flex items-center gap-2 transition
  ${Yt?"text-green hover:text-green-400":"text-gray-500 cursor-not-allowed"}
`,children:[jsxRuntimeExports.jsx(Plus,{size:14}),"Add paragraph block"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 block mb-2",children:"Bullet Points"}),jsxRuntimeExports.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["Max ",5," bullets. Keep them short and benefit focused."]}),Ut.bullets.map((nr,ir)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-2",children:[jsxRuntimeExports.jsx("input",{type:"text",maxLength:120,value:nr,onChange:or=>{const lr=[...Ut.bullets];lr[ir]=or.target.value,Ht({bullets:lr})},className:"flex-1 bg-black text-white border border-gray-600 rounded px-3 py-2",placeholder:"Bullet text"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Ht({bullets:Ut.bullets.filter((or,lr)=>lr!==ir)})},className:"text-red-400 hover:text-red-300",children:jsxRuntimeExports.jsx(Trash,{size:16})})]},ir)),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Ut.bullets.length>=5,onClick:()=>Ht({bullets:[...Ut.bullets,""]}),className:`text-xs font-semibold flex items-center gap-1 mt-1
    ${Ut.bullets.length>=5?"text-gray-500 cursor-not-allowed":"text-green hover:text-green-400"}
  `,children:[jsxRuntimeExports.jsx(Plus,{size:14}),Ut.bullets.length>=5?"Max bullets reached":"Add bullet"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 block mb-2",children:"Trust Items"}),jsxRuntimeExports.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["Max ",3,". Keep trust signals short and recognizable."]}),Ut.trust_items.map((nr,ir)=>jsxRuntimeExports.jsxs("div",{className:"space-y-2 pb-4 border-b border-gray-800 mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Icon"}),jsxRuntimeExports.jsx("select",{value:nr.icon||"check",onChange:or=>{const lr=[...Ut.trust_items];lr[ir]={...lr[ir],icon:or.target.value},Ht({trust_items:lr})},className:"w-full bg-black text-white border border-gray-600 rounded px-2 py-1",children:TRUST_ICONS.map(or=>jsxRuntimeExports.jsxs("option",{value:or.key,children:[or.icon," ",or.label]},or.key))})]}),jsxRuntimeExports.jsx("input",{type:"text",value:nr.label||"",onChange:or=>{const lr=[...Ut.trust_items];lr[ir]={...lr[ir],label:or.target.value},Ht({trust_items:lr})},className:"w-full bg-black text-white border border-gray-600 rounded px-3 py-2",placeholder:"Secure checkout"}),jsxRuntimeExports.jsx("input",{type:"text",value:nr.subtext||"",onChange:or=>{const lr=[...Ut.trust_items];lr[ir]={...lr[ir],subtext:or.target.value},Ht({trust_items:lr})},className:"w-full bg-black text-white border border-gray-600 rounded px-3 py-2 text-sm opacity-90",placeholder:"Powered by Stripe"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ht({trust_items:Ut.trust_items.filter((or,lr)=>lr!==ir)}),className:"text-xs text-red-400 hover:text-red-300",children:"Remove"})]},ir)),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Ut.trust_items.length>=3,onClick:()=>Ht({trust_items:[...Ut.trust_items,{icon:"check",label:"",subtext:""}]}),className:`mt-2 text-xs font-semibold flex items-center gap-1
    ${Ut.trust_items.length>=3?"text-gray-500 cursor-not-allowed":"text-green hover:text-green-400"}
  `,children:[jsxRuntimeExports.jsx(Plus,{size:14}),Ut.trust_items.length>=3?"Max trust items reached":"Add trust item"]})]})]}):null]})}function MiniOfferBlock({block:et,index:dt,updateBlock:$t,bgTheme:kt,landing:Tt,pdfList:Dt,updateChildBlock:Ft,openAIModal:Ut,containerIndex:Ht}){var mr,jr,Rr;const Kt=et.product_source||"internal",Yt=!!et.pdf_url||!!et.external_file_url,[Jt,Zt]=React$2.useState(!1),er=reactExports.useMemo(()=>(Dt==null?void 0:Dt.filter(xr=>xr.status==="completed"&&xr.pdf_url))||[],[Dt]),rr=(xr,kr)=>{Ht!==void 0&&Ft?Ft(dt,xr,kr):$t(dt,xr,kr)};reactExports.useEffect(()=>{et.offer_page||rr("offer_page",{enabled:!1,blocks:[],bullets:[],trust_items:[]})},[]);const sr=(xr,kr="#000000")=>xr&&xr.startsWith("#")&&xr.length===7?xr:kr,nr=async xr=>{const kr=URL.createObjectURL(xr);rr("image_url",kr);try{const Mr=new FormData;Mr.append("image",xr),Mr.append("landingId",Tt==null?void 0:Tt.id),Mr.append("blockId",et.id);const Tr=await axiosInstance.post("/landing/upload-media-block",Mr,{headers:{"Content-Type":"multipart/form-data"}});Tr.data.url&&(rr("image_url",Tr.data.url),rr("use_pdf_cover",!1),y$4.success("Image uploaded!"))}catch{y$4.error("Upload failed")}finally{URL.revokeObjectURL(kr)}},ir=et.match_main_bg?kt:"#000000",or=et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"135deg"},
        ${et.gradient_start||"#a855f7"},
        ${et.gradient_end||"#ec4899"})`:et.bg_color||"#111827",lr=(((Rr=(jr=(mr=et.offer_page)==null?void 0:mr.blocks)==null?void 0:jr.map(xr=>xr.text))==null?void 0:Rr.join(" "))||"").replace(//g,""),cr=lr.trim().length>0,dr=cr&&lr.trim().split(/\s+/).length>20,ur=Number(et.price||0),pr=et.text_color||"#ffffff";return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-6 border border-gray-700 transition-all duration-300",style:{background:"#0b1220",maxHeight:"80vh",overflowY:"auto"},children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Background Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.bg_color,"#111827"),onChange:xr=>rr("bg_color",xr.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.bg_color||"",onChange:xr=>{const kr=xr.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(kr)&&rr("bg_color",kr.startsWith("#")?kr:`#${kr}`)},placeholder:"#111827",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Match Page Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.match_main_bg||!1,onChange:xr=>rr("match_main_bg",xr.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Gradient"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_gradient||!1,onChange:xr=>rr("use_gradient",xr.target.checked)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"No Background"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:et.use_no_bg||!1,onChange:xr=>rr("use_no_bg",xr.target.checked)})]})]}),et.use_gradient&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Start"}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.gradient_start)||"#F285C3",onChange:xr=>rr("gradient_start",xr.target.value),className:"w-full h-10 border border-gray-700 rounded mt-1 bg-black"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient End"}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.gradient_end)||"#7bed9f",onChange:xr=>rr("gradient_end",xr.target.value),className:"w-full h-10 border border-gray-700 rounded mt-1 bg-black"})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Gradient Direction"}),jsxRuntimeExports.jsxs("select",{value:et.gradient_direction||"90deg",onChange:xr=>rr("gradient_direction",xr.target.value),className:"w-full p-2 mt-1 bg-black border border-gray-700 rounded text-white",children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Main Text Color"}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.text_color,"#ffffff"),onChange:xr=>rr("text_color",xr.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.text_color||"",onChange:xr=>{const kr=xr.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(kr)&&rr("text_color",kr.startsWith("#")?kr:`#${kr}`)},placeholder:"#ffffff",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300",children:["Secondary Text Color",jsxRuntimeExports.jsx("span",{className:"block text-xs font-normal text-gray-400 mt-1",children:"Used on the offer preview page for Title and Sub-title text"})]}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.secondary_text_color,"#9ca3af"),onChange:xr=>rr("secondary_text_color",xr.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.secondary_text_color||"",onChange:xr=>{const kr=xr.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(kr)&&rr("secondary_text_color",kr.startsWith("#")?kr:`#${kr}`)},placeholder:"#9ca3af",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold text-gray-300",children:["Utility Text Color",jsxRuntimeExports.jsx("span",{className:"block text-xs font-normal text-gray-400 mt-1",children:"Used on the offer preview page for links and navigation text"})]}),jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.utility_text_color,"#60a5fa"),onChange:xr=>rr("utility_text_color",xr.target.value),className:"w-8 h-8 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.utility_text_color||"",onChange:xr=>{const kr=xr.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(kr)&&rr("utility_text_color",kr.startsWith("#")?kr:`#${kr}`)},placeholder:"#60a5fa",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:(()=>{var kr;const xr=et.use_pdf_cover?et.cover_url:et.image_url||"";return jsxRuntimeExports.jsxs("div",{className:"border border-gray-700 rounded-2xl overflow-hidden shadow-2xl flex flex-col",style:{color:pr,width:"100%",maxWidth:"980px",minHeight:"420px"},children:[jsxRuntimeExports.jsx("div",{className:"relative bg-black w-full overflow-hidden rounded-xl",style:{height:"320px",maxHeight:"340px"},children:Jt?jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/70",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 border-4 border-gray-500 border-t-green rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"Loading Book cover"})]}):xr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{background:ir},children:cr||et.title||ur>0?jsxRuntimeExports.jsxs("div",{style:{display:"flex",width:"90%",maxWidth:"480px",height:"200px",borderRadius:"16px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.12)",boxShadow:"0 20px 45px rgba(0,0,0,0.45)",background:et.use_gradient?`linear-gradient(${et.gradient_direction||"135deg"},
              ${et.gradient_start||"#a855f7"},
              ${et.gradient_end||"#ec4899"})`:et.bg_color||"#111827"},children:[et.use_pdf_cover&&et.cover_url||et.image_url?jsxRuntimeExports.jsx("div",{style:{flex:"0 0 30%",background:"#000",borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px",overflow:"hidden"},children:jsxRuntimeExports.jsx("img",{src:et.use_pdf_cover?et.cover_url:et.image_url,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px",borderTopRightRadius:0,borderBottomRightRadius:0}})}):null,jsxRuntimeExports.jsxs("div",{style:{flex:1,padding:"16px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",color:et.text_color||"#ffffff",background:or},children:[jsxRuntimeExports.jsx("h3",{style:{fontSize:"0.95rem",fontWeight:800,marginBottom:"6px"},children:et.title||"Offer Title"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.8rem",lineHeight:1.4,opacity:.9,maxWidth:"420px",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("span",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:lr}),dr&&jsxRuntimeExports.jsx("span",{style:{display:"block",marginTop:"6px",fontWeight:700,textDecoration:"underline",cursor:"pointer",fontSize:"0.75rem",opacity:.95},children:"See more"})]}),jsxRuntimeExports.jsx("button",{style:{marginTop:"auto",width:"100%",maxWidth:"180px",padding:"8px",borderRadius:"8px",fontWeight:700,border:"none",background:et.button_color||"#22c55e",color:et.button_text_color||"#000000",fontSize:"0.8rem",opacity:Yt?1:.6},children:et.button_text||"Buy Now"}),ur>0&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"6px",fontSize:"0.85rem",opacity:.85},children:["$",ur.toFixed(2)]})]})]}):jsxRuntimeExports.jsx("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.85rem",textAlign:"center",padding:"20px"},children:"Fill in the fields to see your card preview"})}),(et.image_url||et.cover_url)&&jsxRuntimeExports.jsx("button",{type:"button",className:"absolute top-3 right-3 bg-black/70 text-red-400 text-xs px-3 py-1 rounded hover:bg-black",onClick:()=>{et.use_pdf_cover?rr("use_pdf_cover",!1):rr("image_url","")},children:"Remove"})]}):jsxRuntimeExports.jsxs("label",{className:"flex items-center justify-center h-full border border-dashed border-gray-600 cursor-pointer",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Upload Image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Mr=>nr(Mr.target.files[0])})]})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col p-8 gap-4",style:{background:"#0f172a",color:et.text_color||"#ffffff"},children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-6 block",children:"Product Source"}),jsxRuntimeExports.jsxs("select",{value:Kt,onChange:Mr=>{const Tr=Mr.target.value;rr("product_source",Tr),Tr==="internal"&&(rr("external_file_url",""),rr("external_file_name","")),Tr==="external"&&(rr("pdf_url",""),rr("pdf_name",""),rr("cover_url",""),rr("use_pdf_cover",!1))},className:"w-full p-2 bg-black border border-gray-600 rounded text-white mt-1",children:[jsxRuntimeExports.jsx("option",{value:"internal",children:"The Messy Attic Book"}),jsxRuntimeExports.jsx("option",{value:"external",children:"Upload Existing Product"})]}),Kt==="external"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-4 block",children:"Upload Your Product"}),jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf,.zip",onChange:async Mr=>{var Or,_r;const Tr=(Or=Mr.target.files)==null?void 0:Or[0];if(Tr)try{const Pr=new FormData;Pr.append("file",Tr),Pr.append("landingId",Tt.id),Pr.append("blockId",et.id);const br=await axiosInstance.post("/landing/upload-product",Pr,{headers:{"Content-Type":"multipart/form-data"}});if(!((_r=br.data)!=null&&_r.success)){y$4.error("Upload failed");return}rr("external_file_url",br.data.url),rr("external_file_name",br.data.file_name||Tr.name),rr("product_source","external"),y$4.success("Product uploaded!"),Mr.target.value=""}catch{y$4.error("Upload failed")}},className:"w-full p-2 bg-black border border-gray-700 rounded text-white"}),et.external_file_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green mt-2",children:["Uploaded: ",et.external_file_name]})]}),Kt==="internal"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Choose Book"}),jsxRuntimeExports.jsxs("select",{value:et.pdf_url||"",onChange:async Mr=>{var _r;const Tr=Mr.target.value;if(!Tr){rr("pdf_url",""),rr("pdf_name",""),rr("cover_url",""),rr("image_url",""),rr("use_pdf_cover",!1),rr("page_count",null),Zt(!1);return}const Or=er.find(Pr=>Pr.pdf_url===Tr);if(!Or){Zt(!1);return}rr("pdf_url",Or.pdf_url),rr("pdf_name",Or.title||"Book"),rr("product_source","internal"),rr("use_pdf_cover",!0),rr("image_url",""),rr("page_count",Or.page_count||null),Zt(!0);try{const Pr=await axiosInstance.get(`/landing/lead-magnets/cover?pdfUrl=${encodeURIComponent(Or.pdf_url)}`);(_r=Pr.data)!=null&&_r.cover_image&&rr("cover_url",Pr.data.cover_image)}catch(Pr){console.error(" Error loading Book cover:",Pr)}finally{Zt(!1)}},className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Choose Book --"}),er.map(Mr=>jsxRuntimeExports.jsx("option",{value:Mr.pdf_url,children:Mr.title||"Book"},Mr.id))]})]}),et.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Selected Book:"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-semibold",children:et.pdf_name||"Book"}),et.page_count&&jsxRuntimeExports.jsxs("span",{className:"ml-2 opacity-80",children:[" ",et.page_count," pages"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Use Book Cover Image"}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!et.use_pdf_cover,disabled:!et.cover_url,onChange:Mr=>{rr("use_pdf_cover",Mr.target.checked)}})]}),et.pdf_url&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:jsxRuntimeExports.jsx("a",{href:et.pdf_url,target:"_blank",className:"text-green underline",rel:"noopener noreferrer",children:"Preview Book"})}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Offer Title"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.title||"",maxLength:60,onChange:Mr=>rr("title",Mr.target.value),className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",placeholder:"Offer Title"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-right",children:[((kr=et.title)==null?void 0:kr.length)||0,"/60"]}),jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold text-gray-300 mt-3 block",children:"Product Name (Checkout)"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.product_name||"",maxLength:80,onChange:Mr=>rr("product_name",Mr.target.value),className:"w-full p-2 bg-black text-white border border-gray-600 rounded mt-1",placeholder:"What buyers will see on checkout"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This appears on Stripe checkout and receipts"}),jsxRuntimeExports.jsx(MiniOfferAdvanced,{block:et,updateField:rr,landing:Tt,openAIModal:Ut}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Price"}),jsxRuntimeExports.jsx("input",{type:"number",value:et.price,onChange:Mr=>rr("price",Number(Mr.target.value)||0),className:"w-full p-2 bg-black text-white border mt-1"}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Label"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.button_text,onChange:Mr=>rr("button_text",Mr.target.value),className:"w-full p-2 bg-black border mt-1",style:{color:"#000000"}}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Background"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.button_color)||"#000000",onChange:Mr=>rr("button_color",Mr.target.value),className:"w-8 h-8 p-0 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.button_color||"",onChange:Mr=>{const Tr=Mr.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Tr)&&rr("button_color",Tr.startsWith("#")?Tr:`#${Tr}`)},placeholder:"#000000",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-300 mt-3 block",children:"Button Text Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("input",{type:"color",value:sr(et.button_text_color)||"#000000",onChange:Mr=>rr("button_text_color",Mr.target.value),className:"w-8 h-8 p-0 border border-gray-600 rounded cursor-pointer bg-transparent"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.button_text_color||"",onChange:Mr=>{const Tr=Mr.target.value;/^#?[0-9A-Fa-f]{0,6}$/.test(Tr)&&rr("button_text_color",Tr.startsWith("#")?Tr:`#${Tr}`)},placeholder:"#ffffff",className:"w-24 px-2 py-1 text-xs bg-black text-white border border-gray-600 rounded"})]}),jsxRuntimeExports.jsx("div",{style:{marginTop:"auto"},children:jsxRuntimeExports.jsx("button",{style:{backgroundColor:et.button_color,color:et.button_text_color||"#000000"},className:"w-full mt-4 py-2 rounded-lg font-semibold transition",children:et.button_text})})]})]})})()})]})}function ProfileCardBlock({block:et,index:dt,updateBlock:$t,bgTheme:kt,getLabelContrast:Tt,adjustForLandingOverlay:Dt,landing:Ft}){const[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState({x:0,y:0}),[Jt,Zt]=reactExports.useState(1),[er,rr]=reactExports.useState(null),[sr,nr]=reactExports.useState(!1);function ir(lr,cr,dr){const ur=lr.getImageData(0,0,cr,dr).data;for(let pr=3;pr<ur.length;pr+=4)if(ur[pr]<255)return!0;return!1}const or=Dt(kt);return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 border border-gray-700 bg-[#0F172A] transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",style:{color:Tt(kt)},children:"Profile Card"}),jsxRuntimeExports.jsx("span",{className:"text-xs bg-[#1E293B] text-gray-300 px-2 py-1 rounded-full border border-gray-600",children:"Image + Contact"})]}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-gray-700 p-6",style:{background:Dt(kt)},children:et.image_url?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto",style:{width:`${et.image_size||120}px`,height:`${et.image_size||120}px`,borderRadius:`${et.image_radius||999}px`,border:`${et.image_border_width||1}px solid ${et.image_border_color||"#e5e7eb"}`,overflow:"hidden",background:"transparent"},children:jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",style:{width:"100%",height:"100%",objectFit:"contain",display:"block"}})}),jsxRuntimeExports.jsx("button",{className:"text-xs text-red-400 mt-3 hover:underline",onClick:()=>$t(dt,"image_url",""),children:"Remove image"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("label",{htmlFor:`profileImage-${et.id}`,className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-600 rounded-xl py-10 cursor-pointer hover:border-green transition",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:jsxRuntimeExports.jsx("span",{className:"text-green font-medium",children:"Upload profile image"})}),jsxRuntimeExports.jsx("input",{id:`profileImage-${et.id}`,type:"file",accept:"image/*",className:"hidden",onChange:lr=>{const cr=lr.target.files[0];if(!cr)return;const dr=URL.createObjectURL(cr);Ht(dr)}})]}),Ut&&jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("div",{className:"relative w-full h-[260px] rounded-lg overflow-hidden",style:{background:or,boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.08)"},children:jsxRuntimeExports.jsx(Cropper,{image:Ut,crop:Kt,zoom:Jt,aspect:1,cropShape:"round",showGrid:!1,onCropChange:Yt,onZoomChange:Zt,onCropComplete:(lr,cr)=>rr(cr)})}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400",children:"Zoom"}),jsxRuntimeExports.jsx("input",{type:"range",min:1,max:3,step:.01,value:Jt,onChange:lr=>Zt(Number(lr.target.value)),className:"w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-4",children:[jsxRuntimeExports.jsx("button",{disabled:sr,className:"px-4 py-2 rounded bg-green text-black text-sm",onClick:async()=>{if(!er)return;const lr=document.createElement("canvas"),cr=lr.getContext("2d"),dr=new Image;dr.crossOrigin="anonymous",dr.src=Ut,await new Promise(br=>dr.onload=br);const{width:ur,height:pr,x:mr,y:jr}=er;lr.width=ur,lr.height=pr,cr.clearRect(0,0,ur,pr),cr.drawImage(dr,mr,jr,ur,pr,0,0,ur,pr);const Rr=ir(cr,ur,pr),xr=Rr?"image/png":"image/jpeg",kr=Rr?"profile.png":"profile.jpg",Mr=Rr?void 0:.9,Tr=await new Promise(br=>lr.toBlob(br,xr,Mr)),Or=URL.createObjectURL(Tr);$t(dt,"image_url",Or);const _r=new FormData;_r.append("image",Tr,kr),_r.append("landingId",Ft.id),_r.append("blockId",et.id);const Pr=await axiosInstance.post("/landing/upload-media-block",_r,{headers:{"Content-Type":"multipart/form-data"}});Pr.data.success&&($t(dt,"image_url",Pr.data.url),y$4.success("Profile image saved")),URL.revokeObjectURL(Ut),URL.revokeObjectURL(Or),Ht(null),Yt({x:0,y:0}),Zt(1)},children:"Save Image"}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded bg-gray-700 text-white text-sm",onClick:()=>{URL.revokeObjectURL(Ut),Ht(null)},children:"Cancel"})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Image Size"}),jsxRuntimeExports.jsx("input",{type:"range",min:"60",max:"200",value:et.image_size||120,onChange:lr=>$t(dt,"image_size",Number(lr.target.value)),className:"w-full mt-2"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Tagline"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.tagline||"",placeholder:"Welcome to my page",onChange:lr=>$t(dt,"tagline",lr.target.value),className:"w-full p-2 mt-1 border border-gray-600 rounded bg-black text-white"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.tagline_color||"#FFFFFF",onChange:lr=>$t(dt,"tagline_color",lr.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.tagline_color||"#FFFFFF",onChange:lr=>$t(dt,"tagline_color",lr.target.value),className:"flex-1 p-2 border border-gray-600 rounded bg-black text-white uppercase",placeholder:"#FFFFFF"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Contact Type"}),jsxRuntimeExports.jsxs("select",{value:et.contact_type||"email",onChange:lr=>$t(dt,"contact_type",lr.target.value),className:"w-full p-2 mt-1 bg-black border border-gray-700 rounded text-white",children:[jsxRuntimeExports.jsx("option",{value:"email",children:"Email"}),jsxRuntimeExports.jsx("option",{value:"phone",children:"Phone"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Contact Value"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.contact_value||"",placeholder:et.contact_type==="phone"?"555 123 4567":"hello@example.com",onChange:lr=>$t(dt,"contact_value",lr.target.value),className:"w-full p-2 mt-1 border border-gray-600 rounded bg-black text-white"})]})]})]})}function ScrollArrowBlock({block:et,index:dt,updateBlock:$t,bgTheme:kt,getLabelContrast:Tt}){const Dt=SCROLL_ARROW_STYLES[et.arrow_style||"single"];return jsxRuntimeExports.jsxs("div",{className:"rounded-xl p-6 mt-3 border border-gray-700 bg-[#0F172A] transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",style:{color:Tt(kt)},children:"Scroll Arrow"}),jsxRuntimeExports.jsx("span",{className:"text-xs bg-[#1E293B] text-gray-300 px-2 py-1 rounded-full border border-gray-600",children:"Call to Action"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mb-6",style:{justifyContent:et.alignment==="left"?"flex-start":et.alignment==="right"?"flex-end":"center"},children:jsxRuntimeExports.jsx("div",{style:{width:et.size||36,cursor:"pointer",touchAction:"manipulation","--arrow-speed":`${et.animation_speed||1.2}s`,display:"flex",flexDirection:"column",alignItems:"center"},children:Array.from({length:Dt.count}).map((Ft,Ut)=>jsxRuntimeExports.jsx("svg",{className:`scroll-arrow-item ${et.animation_type||"bounce"}`,viewBox:"0 0 24 24",fill:"none",stroke:et.color||"#ffffff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",width:"100%",height:"100%",style:{display:"block",marginTop:Ut===0?0:"-10px",animationDelay:`${Ut*(et.stagger??Dt.stagger)}s`,animationDuration:`${et.animation_speed||1.2}s`},children:jsxRuntimeExports.jsx("path",{d:"M19 12l-7 7-7-7"})},Ut))})}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Alignment"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-2",children:["left","center","right"].map(Ft=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t(dt,"alignment",Ft),className:`px-3 py-1 text-xs rounded border transition-all
                ${et.alignment===Ft?"bg-green-600/20 border-green-500 text-green-400":"border-gray-600 text-gray-400 hover:border-gray-400"}
              `,children:Ft},Ft))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Arrow Style"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(SCROLL_ARROW_STYLES).map(([Ft,Ut])=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t(dt,"arrow_style",Ft),className:`px-3 py-1 text-xs rounded border transition-all
          ${(et.arrow_style||"single")===Ft?"bg-green/80 border-green/70 text-green":"border-gray-600 text-gray-400 hover:border-gray-400"}
        `,children:Ut.label},Ft))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Animation"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-2",children:["bounce","float","pulse"].map(Ft=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t(dt,"animation_type",Ft),className:`px-3 py-1 text-xs rounded border transition-all
          ${et.animation_type===Ft?"bg-green-600/20 border-green-500 text-green-400":"border-gray-600 text-gray-400 hover:border-gray-400"}
        `,children:Ft},Ft))})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Animation Speed"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.6",max:"3",step:"0.1",value:et.animation_speed||1.2,onChange:Ft=>$t(dt,"animation_speed",Number(Ft.target.value)),className:"w-full mt-2"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[et.animation_speed||1.2,"s"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Arrow Stagger"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.05",value:et.stagger??Dt.stagger,onChange:Ft=>$t(dt,"stagger",Number(Ft.target.value)),className:"w-full mt-2"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[et.stagger??Dt.stagger,"s delay"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-semibold",style:{color:Tt(kt)},children:"Arrow Color"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:et.color||"#ffffff",onChange:Ft=>$t(dt,"color",Ft.target.value),className:"w-10 h-10 rounded cursor-pointer border border-gray-600"}),jsxRuntimeExports.jsx("input",{type:"text",value:et.color||"#ffffff",onChange:Ft=>$t(dt,"color",Ft.target.value),className:"flex-1 p-2 border border-gray-600 rounded bg-black text-white uppercase",placeholder:"#FFFFFF"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm font-semibold flex justify-between items-center",style:{color:Tt(kt)},children:[jsxRuntimeExports.jsx("span",{children:"Arrow Size"}),jsxRuntimeExports.jsxs("span",{className:"text-xs opacity-80",children:[et.size||36,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("input",{type:"range",min:"10",max:"150",step:"1",value:et.size||36,onChange:Ft=>$t(dt,"size",Number(Ft.target.value)),className:"flex-1"}),jsxRuntimeExports.jsx("input",{type:"number",min:"10",max:"150",value:et.size||36,onChange:Ft=>$t(dt,"size",Number(Ft.target.value)),className:"w-20 bg-[#0F172A] border border-gray-700 rounded-md px-2 py-1 text-sm text-white"})]})]})]})}function SortableBlock({id:et,block:dt,index:$t,updateBlock:kt,removeBlock:Tt,moveBlockUp:Dt,moveBlockDown:Ft,activeChild:Ut,setActiveChild:Ht,setActiveRoot:Kt,activeRoot:Yt,bgTheme:Jt,pdfList:Zt,landing:er,updateChildBlock:rr,openAIModal:sr,containerIndex:nr}){var pr,mr,jr;const ir=(Rr,xr,kr)=>{Number.isInteger(nr)&&rr?rr(Rr,xr,kr):kt(Rr,xr,kr)},or=Number.isInteger(nr)&&(Ut==null?void 0:Ut.childId)===dt.id||nr==null&&(Yt==null?void 0:Yt.blockId)===dt.id,lr=Rr=>{if(!Rr)return"#1f2937";const xr=Rr.replace("#",""),kr=parseInt(xr.substring(0,2),16),Mr=parseInt(xr.substring(2,4),16),Tr=parseInt(xr.substring(4,6),16);return(kr*299+Mr*587+Tr*114)/1e3>160?"#1f2937":"#f3f4f6"};function cr(Rr){var xr,kr,Mr,Tr,Or,_r,Pr,br,wr,zr,Hr;switch(Rr.type){case"container":return`${Rr.title||"Untitled Section"}  ${(Rr.children||[]).length} blocks`;case"heading":case"subheading":case"subsubheading":case"list_heading":return((xr=Rr.text)==null?void 0:xr.slice(0,30))||"(empty heading)";case"paragraph":return((kr=Rr.text)==null?void 0:kr.slice(0,30))||"(empty paragraph)";case"offer_banner":return((Mr=Rr.button_text)==null?void 0:Mr.slice(0,30))||"(no button text)";case"divider":return Rr.style==="space"?`space  ${Rr.height||40}px`:`line  ${Rr.color||"#fff"}  ${Rr.height||40}px`;case"image":return Rr.image_url?Rr.image_url.split("/").pop().slice(0,30):"(no image)";case"profile_card":return Rr.tagline?Rr.tagline.split("/").pop().slice(0,30):"(no image)";case"social_links":return`${Object.values(Rr.links||{}).filter(Boolean).length} links`;case"video":return((Tr=Rr.url)==null?void 0:Tr.slice(0,30))||"(no video URL)";case"faq":return`${((Or=Rr.items)==null?void 0:Or.length)||0} questions`;case"stripe_checkout":return`$${Rr.price||10}  checkout`;case"calendly":return((_r=Rr.calendly_url)==null?void 0:_r.slice(0,30))||"(no url)";case"verified_reviews":return((Pr=Rr.title)==null?void 0:Pr.slice(0,30))||"(reviews section)";case"countdown":return((br=Rr.text)==null?void 0:br.slice(0,30))||"(countdown timer)";case"referral_button":return((wr=Rr.text)==null?void 0:wr.slice(0,30))||"(referral button)";case"button_url":return Rr.text||"Button";case"single_offer":return Rr.title?Rr.title.slice(0,30):"Single Offer";case"mini_offer":return Rr.title?Rr.title.slice(0,30):"Mini Offer";case"secure_checkout":return((zr=Rr.title)==null?void 0:zr.slice(0,30))||"Secure Checkout";case"audio_player":return((Hr=Rr.title)==null?void 0:Hr.slice(0,30))||"Audio Player";case"scroll_arrow":return`Arrow  ${Rr.color||"#FFFFFF"}`;default:return""}}function dr({value:Rr,disabled:xr}){const kr=BLOCK_TYPE_TO_LABEL[Rr]||Rr,Mr=BLOCK_PILL_STYLES[kr]||"bg-white/10 text-gray-300 border-white/20";return jsxRuntimeExports.jsx("span",{className:`
        text-[13px]
        font-semibold
        uppercase
        tracking-wide
        px-2.5
        py-0.5
        rounded-full
        border
        leading-none
        whitespace-nowrap
        transition-all
        ${xr?"opacity-40 grayscale":Mr}
      `,children:kr})}const ur=((pr=er==null?void 0:er.motion_settings)==null?void 0:pr.enabled)===!0&&dt.enabled!==!1;return dt.type==="container"?jsxRuntimeExports.jsx(SortableContainerBlock,{id:et,block:dt,index:$t,updateBlock:kt,removeBlock:Tt,moveBlockUp:Dt,moveBlockDown:Ft,activeChild:Ut,setActiveChild:Ht,bgTheme:Jt,pdfList:Zt,landing:er,openAIModal:sr}):jsxRuntimeExports.jsxs("div",{"data-drop-id":$t,"data-parent-id":null,onClick:Rr=>{Rr.stopPropagation(),Number.isInteger(nr)?(Ht({containerIndex:nr,childIndex:$t,childId:dt.id}),Kt(null)):(Kt({blockId:dt.id,blockIndex:$t}),Ht(null))},className:`
      mb-4 sm:mb-6
      rounded-lg sm:rounded-xl
      p-3 sm:p-5
      relative shadow-inner
      transition-all duration-300
      bg-dashboard-bg-light/70 dark:bg-dashboard-bg-dark/70
      border
      ${dt.enabled!==!1?"border-dashboard-border-light dark:border-dashboard-border-dark hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark":"border-dashboard-border-light dark:border-dashboard-border-dark opacity-50 grayscale"}
      ${or?"ring-2 ring-green":""}
    `,children:[jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 z-20 flex flex-col gap-1",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Rr=>{Rr.stopPropagation(),ir($t,"enabled",dt.enabled===!1)},className:`
            inline-flex h-4 w-8 items-center rounded-full transition-colors duration-200 shadow-md
            ${dt.enabled!==!1?"bg-green/80":"bg-dashboard-muted-light dark:bg-dashboard-muted-dark"}
          `,children:jsxRuntimeExports.jsx("span",{className:`
          h-3
          w-3
          rounded-full
          bg-white
          transition-transform
          duration-200
          ${dt.enabled!==!1?"translate-x-4":"translate-x-1"}
        `})}),jsxRuntimeExports.jsx(dr,{value:dt.type,disabled:dt.enabled===!1}),dt.enabled===!1&&jsxRuntimeExports.jsx("span",{className:"text-[11px] italic text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"disabled"})]})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-end mb-2 sm:mb-3 cursor-pointer",onClick:Rr=>{Rr.stopPropagation(),ir($t,"collapsed",!dt.collapsed)},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[ur&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 shrink-0 opacity-80 hover:opacity-100 transition",onClick:Rr=>Rr.stopPropagation(),children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Animate"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{var Rr;return ir($t,"motion",{...dt.motion,disabled:!((Rr=dt.motion)!=null&&Rr.disabled)})},className:`
          relative inline-flex
          h-4 w-7
          items-center
          rounded-full
          transition-colors duration-200
          ${(mr=dt.motion)!=null&&mr.disabled?"bg-dashboard-muted-light dark:bg-dashboard-muted-dark":"bg-royalPurple"}
        `,children:jsxRuntimeExports.jsx("span",{className:`
            h-3 w-3
            rounded-full
            bg-white
            transition-transform duration-200
            ${(jr=dt.motion)!=null&&jr.disabled?"translate-x-1":"translate-x-3"}
          `})})]}),jsxRuntimeExports.jsx("span",{className:`
            text-sm transition-transform duration-300
            text-dashboard-muted-light dark:text-dashboard-muted-dark
            ${dt.collapsed?"rotate-0":"rotate-180"}
          `,children:""})]})}),jsxRuntimeExports.jsx("div",{className:"text-xs leading-snug mt-0.5 ml-[36px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:cr(dt)}),jsxRuntimeExports.jsxs("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${dt.collapsed?"max-h-0 opacity-0":"max-h-[2000px] opacity-100"}`,children:[jsxRuntimeExports.jsxs("div",{className:`transform transition-transform duration-500 ${dt.collapsed?"scale-y-95":"scale-y-100"}`,children:[["heading","subheading","subsubheading"].includes(dt.type)&&jsxRuntimeExports.jsx(HeadingBlock,{block:dt,index:$t,updateChildBlock:rr,containerIndex:nr,updateBlock:ir,openAIModal:sr}),dt.type==="list_heading"&&jsxRuntimeExports.jsx(ListHeadingBlock,{block:dt,index:$t,updateChildBlock:rr,containerIndex:nr,updateBlock:ir,openAIModal:sr}),dt.type==="paragraph"&&jsxRuntimeExports.jsx(ParagraphBlock,{block:dt,index:$t,updateChildBlock:rr,containerIndex:nr,updateBlock:ir,openAIModal:sr}),dt.type==="video"&&jsxRuntimeExports.jsx(VideoBlock,{block:dt,index:$t,updateBlock:ir}),dt.type==="divider"&&jsxRuntimeExports.jsx(DividerBlock,{block:dt,index:$t,updateBlock:ir}),dt.type==="offer_banner"&&jsxRuntimeExports.jsx(OfferBannerBlock,{block:dt,index:$t,updateBlock:ir,bgTheme:Jt,openAIModal:sr}),dt.type==="calendly"&&jsxRuntimeExports.jsx(CalendlyBlock,{block:dt,index:$t,updateBlock:ir}),dt.type==="social_links"&&jsxRuntimeExports.jsx(SocialLinksBlock,{block:dt,index:$t,updateBlock:ir}),dt.type==="verified_reviews"&&jsxRuntimeExports.jsx(VerifiedReviewsBlock,{block:dt,index:$t,updateBlock:kt}),dt.type==="countdown"&&jsxRuntimeExports.jsx(CountdownBlock,{block:dt,index:$t,updateBlock:ir}),dt.type==="stripe_checkout"&&jsxRuntimeExports.jsx(StripeCheckoutBlock,{block:dt,index:$t,updateBlock:ir,pdfList:Zt,bgTheme:Jt,landing:er}),dt.type==="referral_button"&&jsxRuntimeExports.jsx(ReferralButtonBlock,{block:dt,index:$t,updateBlock:ir}),dt.type==="faq"&&jsxRuntimeExports.jsx(FAQBlock,{block:dt,index:$t,updateChildBlock:rr,containerIndex:nr,updateBlock:ir,openAIModal:sr}),dt.type==="image"&&jsxRuntimeExports.jsx(ImageBlock,{block:dt,index:$t,updateBlock:ir,bgTheme:Jt,getLabelContrast:lr,adjustForLandingOverlay,landing:er}),dt.type==="single_offer"&&jsxRuntimeExports.jsx(SingleOfferBlock,{block:dt,index:$t,containerIndex:nr,updateBlock:ir,updateChildBlock:rr,bgTheme:Jt,landing:er,pdfList:Zt,openAIModal:sr}),dt.type==="mini_offer"&&jsxRuntimeExports.jsx(MiniOfferBlock,{block:dt,index:$t,containerIndex:nr,updateBlock:ir,updateChildBlock:rr,bgTheme:Jt,landing:er,pdfList:Zt,openAIModal:sr}),dt.type==="secure_checkout"&&jsxRuntimeExports.jsx(SecureCheckoutBlock,{block:dt,index:$t,updateBlock:ir}),dt.type==="audio_player"&&jsxRuntimeExports.jsx(AudioPlayerBlock,{block:dt,index:$t,bgTheme:Jt,updateBlock:ir,landing:er}),dt.type==="button_url"&&jsxRuntimeExports.jsx(ButtonBlock,{block:dt,index:$t,bgTheme:Jt,updateBlock:ir,landing:er}),dt.type==="profile_card"&&jsxRuntimeExports.jsx(ProfileCardBlock,{block:dt,index:$t,updateBlock:ir,bgTheme:Jt,getLabelContrast:lr,adjustForLandingOverlay,landing:er}),dt.type==="scroll_arrow"&&jsxRuntimeExports.jsx(ScrollArrowBlock,{block:dt,index:$t,updateBlock:ir,bgTheme:Jt,getLabelContrast:lr,adjustForLandingOverlay,landing:er})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:Rr=>{Rr.stopPropagation(),Tt($t)},className:"mt-4 flex items-center gap-2 text-red-400 hover:text-red-300 text-sm font-semibold transition-all",children:[jsxRuntimeExports.jsx(Trash2,{size:16,className:"opacity-80"}),jsxRuntimeExports.jsx("span",{children:"Remove"})]})]})]})}const MemoizedSortableBlock=React$2.memo(SortableBlock),BLOCK_LIMITS={stripe_checkout:10,audio_player:1,calendly:1,verified_reviews:1,referral_button:1,offer_banner:1,social_links:2,video:10,faq:2,countdown:2,single_offer:5,mini_offer:20,button_url:10,profile_card:1,scroll_arrow:5},PRO_ONLY_BLOCKS=["audio_player","calendly","verified_reviews","countdown","secure_checkout","mini_offer","scroll_arrow"];function AddSectionButton({addBlock:et,canAddBlock:dt}){const[$t,kt]=reactExports.useState(!1),{user:Tt}=useAuth(),Dt=(Tt==null?void 0:Tt.plan)==="business_builder_pack"&&(Tt==null?void 0:Tt.pro_status)==="active",Ft=Kt=>typeof dt=="function"&&!dt(Kt),Ut=Kt=>PRO_ONLY_BLOCKS.includes(Kt)&&!Dt;reactExports.useEffect(()=>{const Kt=Yt=>{Yt.target.closest(".add-section-dropdown")||kt(!1)};return document.addEventListener("click",Kt),()=>document.removeEventListener("click",Kt)},[]),reactExports.useEffect(()=>($t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[$t]);const Ht=[{label:"Section Container",value:"container"},{label:"Divider",value:"divider"},{label:"Heading (H1)",value:"heading"},{label:"Subheading (H2)",value:"subheading"},{label:"Sub-Subheading (H3)",value:"subsubheading"},{label:"List Heading",value:"list_heading"},{label:"Paragraph",value:"paragraph"},{label:"FAQ",value:"faq"},{label:"Video",value:"video"},{label:"Audio Player",value:"audio_player"},{label:"Pro Image",value:"image"},{label:"Profile Card",value:"profile_card"},{label:"Single Offer",value:"single_offer"},{label:"Scroll Arrow",value:"scroll_arrow"},{label:"Mini Offer",value:"mini_offer"},{label:"Verified Reviews",value:"verified_reviews"},{label:"Stripe Checkout",value:"stripe_checkout"},{label:"Offer Banner",value:"offer_banner"},{label:"Secure Checkout",value:"secure_checkout"},{label:"Button Url",value:"button_url"},{label:"Social Links Row",value:"social_links"},{label:"Countdown Timer",value:"countdown"},{label:"Calendly",value:"calendly"}];return(Tt==null?void 0:Tt.is_admin_employee)===1&&Ht.push({label:"Referral Button",value:"referral_button"}),jsxRuntimeExports.jsxs("div",{className:"add-section-dropdown relative inline-block text-left",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Kt=>{Kt.stopPropagation(),kt(Yt=>!Yt)},className:`p-3 rounded-full bg-blue text-white shadow-lg hover:bg-green hover:text-black 
                   transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green`,title:"Add Section",children:jsxRuntimeExports.jsx(Plus,{size:22})}),$t&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 mt-3 w-64 sm:w-56 bg-[#0F172A] border border-gray-700 rounded-xl shadow-xl overflow-y-auto max-h-[60vh] sm:max-h-[480px] pb-2 z-50",children:Ht.map(Kt=>{const Yt=Ft(Kt.value),Jt=Ut(Kt.value);return jsxRuntimeExports.jsx("button",{type:"button",disabled:Yt,onClick:Zt=>{if(Zt.stopPropagation(),Jt){y$4.error("This is a Pro feature. Upgrade to Pro to unlock it.");return}Yt||(et(Kt.value),kt(!1))},className:`block w-full text-left px-5 py-3 transition-all
  ${Yt?"text-gray-500 cursor-not-allowed opacity-40":"text-gray-200 hover:bg-white/5"}
`,title:Ut(Kt.value)?"Upgrade to Pro to unlock this block":Yt?"Block limit reached":"",children:jsxRuntimeExports.jsx("span",{className:"flex items-center justify-between w-full gap-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:`
                      text-[10px]
                      uppercase
                      px-2
                      py-0.5
                      whitespace-nowrap
                      border
                      rounded-md
        ${BLOCK_PILL_STYLES[Kt.label]||"bg-white/5 text-white-400 border-white/20"}
      `,children:Kt.label}),Ut(Kt.value)&&jsxRuntimeExports.jsx("span",{className:"text-[10px] px-2 py-0.5 text-royalPurple uppercase",children:"PRO"})]})})},Kt.value)})})]})}function blendColors(et,dt="rgba(255,255,255,0.04)"){const $t=et.replace("#",""),kt=parseInt($t.substring(0,2),16),Tt=parseInt($t.substring(2,4),16),Dt=parseInt($t.substring(4,6),16),Ft=dt.match(/rgba?\(([^)]+)\)/);if(!Ft)return et;const[Ut,Ht,Kt,Yt=1]=Ft[1].split(",").map(sr=>parseFloat(sr.trim())),Jt=Yt||.04,Zt=Math.round(Ut*Jt+kt*(1-Jt)),er=Math.round(Ht*Jt+Tt*(1-Jt)),rr=Math.round(Kt*Jt+Dt*(1-Jt));return`rgb(${Zt}, ${er}, ${rr})`}async function saveTemplate(et,dt,$t,kt=null){try{return kt?(await axiosInstance.put(`/landing/update-template/${kt}`,{name:dt,snapshot:$t})).data:(await axiosInstance.post(`/landing/save-template/${et}`,{name:dt,snapshot:$t})).data}catch(Tt){return console.error(" saveTemplate error:",Tt),{success:!1}}}async function loadTemplateVersions(et){try{return(await axiosInstance.get(`/landing/templates/${et}`)).data}catch(dt){return console.error(" loadTemplateVersions error:",dt),{success:!1,templates:[]}}}async function fetchTemplateSnapshot(et){try{return(await axiosInstance.get(`/landing/load-template/${et}`)).data}catch(dt){return console.error(" fetchTemplateSnapshot error:",dt),{success:!1}}}async function restoreTemplate(et,dt){try{return(await axiosInstance.put(`/landing/restore-template/${et}`,{snapshot:dt})).data}catch($t){return console.error(" restoreTemplate error:",$t),{success:!1}}}async function deleteTemplate(et){try{return(await axiosInstance.delete(`/landing/delete-template/${et}`)).data}catch(dt){return console.error(" deleteTemplate error:",dt),{success:!1}}}function SaveVersionModal({isOpen:et,name:dt,setName:$t,onCancel:kt,onConfirm:Tt}){return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[500]",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#111827] border border-gray-700 rounded-xl shadow-2xl p-8 w-full max-w-md",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-silver mb-4 text-center",children:"Save Template Version"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-6 text-center",children:"Give this version a name so you can restore it later."}),jsxRuntimeExports.jsx("input",{type:"text",value:dt,onChange:Dt=>$t(Dt.target.value),placeholder:"e.g. Gradient Header Update",className:`w-full px-4 py-2 bg-gray-800 text-white rounded-lg border border-gray-700 
                     focus:ring-2 focus:ring-green focus:outline-none`}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:kt,className:"px-4 py-2 rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Tt,className:"px-6 py-2 rounded-lg bg-green text-black font-semibold shadow hover:bg-green transition",children:"Save Version"})]})]})}):null}function VersionControls({versions:et,selectedVersion:dt,setSelectedVersion:$t,appliedVersion:kt,handleLoadVersion:Tt,handleApplyVersion:Dt,handleDeleteVersion:Ft}){const Ut=!dt||dt===kt,[Ht,Kt]=reactExports.useState(!1),Yt=reactExports.useRef(null);reactExports.useEffect(()=>{function er(rr){Yt.current&&!Yt.current.contains(rr.target)&&Kt(!1)}return Ht&&document.addEventListener("mousedown",er),()=>{document.removeEventListener("mousedown",er)}},[Ht]);const Jt=et.find(er=>er.id===dt);function Zt(er){$t(er),Tt({target:{value:er}}),Kt(!1)}return jsxRuntimeExports.jsxs("div",{className:`
        w-full
        bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        rounded-lg sm:rounded-xl
        p-3 sm:p-5
        mb-10
        shadow-inner
        pb-6 sm:pb-12
      `,children:[jsxRuntimeExports.jsxs("div",{ref:Yt,className:"relative w-full mb-4 sm:mb-6",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Kt(er=>!er),className:`
            w-full flex items-center justify-between
            rounded-lg px-4 py-2 text-sm transition
            bg-dashboard-bg-light dark:bg-dashboard-bg-dark
            text-dashboard-text-light dark:text-dashboard-text-dark
            border border-dashboard-border-light dark:border-dashboard-border-dark
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
            focus:outline-none focus:ring-2 focus:ring-green/60
          `,children:[jsxRuntimeExports.jsx("span",{className:"truncate",children:Jt?`${Jt.name} (${new Date(Jt.updated_at||Jt.created_at).toLocaleString()})`:"Load saved version"}),Ht?jsxRuntimeExports.jsx(ChevronUp,{size:16,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"}):jsxRuntimeExports.jsx(ChevronDown,{size:16,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"})]}),Ht&&jsxRuntimeExports.jsxs("div",{className:`
              absolute z-30 mt-2 w-full
              rounded-lg shadow-lg
              max-h-[260px] overflow-y-auto overscroll-contain
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
            `,children:[et.length===0&&jsxRuntimeExports.jsx("div",{className:`
                  px-4 py-2 text-sm
                  text-dashboard-muted-light dark:text-dashboard-muted-dark
                `,children:"No saved versions"}),et.map(er=>{const rr=er.id===dt,sr=er.updated_at||er.created_at;return jsxRuntimeExports.jsxs("div",{onClick:()=>Zt(er.id),className:`
                    px-4 py-2 cursor-pointer text-sm transition
                    ${rr?`
                          bg-dashboard-hover-light
                          dark:bg-dashboard-hover-dark
                          text-dashboard-text-light
                          dark:text-dashboard-text-dark
                        `:`
                          text-dashboard-text-light/70
                          dark:text-dashboard-text-dark/70
                          hover:bg-dashboard-hover-light
                          dark:hover:bg-dashboard-hover-dark
                        `}
                  `,children:[jsxRuntimeExports.jsx("div",{className:"truncate",children:er.name}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-60",children:new Date(sr).toLocaleString()})]},er.id)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-4",children:[jsxRuntimeExports.jsx("button",{disabled:Ut,onClick:Ut?void 0:Dt,className:`
            font-semibold px-6 py-2 rounded-lg shadow text-sm transition
            ${Ut?`
                  bg-dashboard-bg-light
                  dark:bg-dashboard-bg-dark
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  cursor-not-allowed
                `:"bg-green text-black hover:bg-green/90"}
          `,children:"Apply"}),dt&&jsxRuntimeExports.jsx("button",{type:"button",onClick:Ft,className:`
              px-6 py-2 rounded-lg
              bg-red-500/10
              border border-red-500/30
              text-red-500
              hover:bg-red-500/20
              transition text-sm font-semibold
            `,children:"Delete"}),dt&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t(""),className:`
              px-6 py-2 rounded-lg
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-muted-light dark:text-dashboard-muted-dark
              hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
              transition text-sm font-semibold
            `,children:"Cancel"})]})]})}function LogoUploader({landing:et,setLanding:dt,showLogoSection:$t,setShowLogoSection:kt}){return jsxRuntimeExports.jsxs("div",{className:`
      mt-12
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light dark:border-dashboard-border-dark
      rounded-2xl
      shadow-inner
      p-6
      transition-all
      hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark
    `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-5 cursor-pointer",onClick:()=>kt(Tt=>!Tt),children:[jsxRuntimeExports.jsx("label",{className:`text-lg font-semibold tracking-wide
        text-dashboard-text-light dark:text-dashboard-text-dark`,children:"Brand Logo"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:`text-xs italic hidden sm:block
            text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:"Recommended: PNG or SVG  200200px+"}),jsxRuntimeExports.jsx("span",{className:`text-sm transition-transform duration-300
            text-dashboard-muted-light dark:text-dashboard-muted-dark ${$t?"rotate-180":"rotate-0"}`,children:""})]})]}),jsxRuntimeExports.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${$t?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:et.logo_url?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx("p",{className:`text-sm mb-3
text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:"Current Logo:"}),jsxRuntimeExports.jsx("div",{className:`
            relative
            bg-dashboard-bg-light dark:bg-dashboard-bg-dark
            border border-dashboard-border-light dark:border-dashboard-border-dark
            rounded-lg
            shadow-md
            p-3
            w-fit
            mx-auto
          `,children:jsxRuntimeExports.jsx("img",{src:et.logo_url,alt:"Uploaded Logo",className:"h-24 object-contain rounded-md mx-auto"})}),jsxRuntimeExports.jsx("button",{type:"button",className:`text-xs mt-4
              text-red-500 hover:underline`,onClick:()=>dt({...et,logo_url:""}),children:"Remove Logo"})]}):jsxRuntimeExports.jsxs("label",{htmlFor:"logoUpload",className:`
            flex flex-col items-center justify-center
            border-2 border-dashed
            border-dashboard-border-light dark:border-dashboard-border-dark
            hover:border-green
            rounded-xl
            py-10 px-6
            cursor-pointer
            transition-all duration-300
            group
          `,children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`
              h-10 w-10
              text-dashboard-muted-light dark:text-dashboard-muted-dark
              group-hover:text-green
              transition
            `,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-6-9l-3-3m0 0l-3 3m3-3V15"})}),jsxRuntimeExports.jsxs("p",{className:`mt-3 text-sm
              text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:[jsxRuntimeExports.jsx("span",{className:"text-green font-medium",children:"Click to upload"})," or drag your logo"]}),jsxRuntimeExports.jsx("input",{id:"logoUpload",type:"file",accept:"image/*",onChange:async Tt=>{const Dt=Tt.target.files[0];if(!Dt)return;const Ft=URL.createObjectURL(Dt);dt({...et,logo_url:Ft});const Ut=new FormData;Ut.append("logo",Dt),Ut.append("landingId",et.id);try{const Ht=await axiosInstance.post("/landing/upload-logo",Ut,{headers:{"Content-Type":"multipart/form-data"}});if(Ht.data.success)dt({...et,logo_url:Ht.data.logo_url}),URL.revokeObjectURL(Ft),y$4.success("Logo uploaded successfully!");else throw new Error(Ht.data.message)}catch{y$4.error("Error uploading logo"),dt({...et,logo_url:""})}},className:"hidden"})]})})]})}function getReadableTextColor(et){if(!et||et.includes("gradient"))return"text-white";const dt=et.replace("#",""),$t=parseInt(dt.substring(0,2),16),kt=parseInt(dt.substring(2,4),16),Tt=parseInt(dt.substring(4,6),16);return(.299*$t+.587*kt+.114*Tt)/255>.6?"text-black":"text-white"}function ColorThemeChooser({bgTheme:et,setBgTheme:dt,includeGradients:$t=!0,isPro:kt=!1}){const[Tt,Dt]=reactExports.useState(()=>localStorage.getItem("showThemes")==="true"),[Ft,Ut]=reactExports.useState("#111827"),[Ht,Kt]=reactExports.useState(!1),[Yt,Jt]=reactExports.useState("#0ea5e9"),[Zt,er]=reactExports.useState("#22c55e"),[rr,sr]=reactExports.useState("90deg"),nr=mr=>/^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$/.test(mr);reactExports.useEffect(()=>{localStorage.setItem("showThemes",Tt)},[Tt]);const ir=colorThemes,or=gradientThemes,lr=reactExports.useMemo(()=>$t?[...ir,...or]:ir,[$t]),cr=mr=>{var Rr;(Rr=mr.preview)!=null&&Rr.includes("gradient")&&!kt||dt(mr.preview)},dr=()=>{Kt(!1),dt(Ft)},ur=()=>{if(!kt)return;const mr=`linear-gradient(${rr}, ${Yt}, ${Zt})`;dt(mr)};reactExports.useEffect(()=>{if(et){if(et.startsWith("#")){Ut(et),Kt(!1);return}if(et.startsWith("linear-gradient")){Kt(!0);const mr=et.match(/linear-gradient\(([^,]+),\s*([^,]+),\s*([^)]+)\)/);if(mr){const[,jr,Rr,xr]=mr;sr(jr.trim()),Jt(Rr.trim()),er(xr.trim())}}}},[et]);const pr=(et==null?void 0:et.toLowerCase())===Ft.toLowerCase()&&nr(Ft);return jsxRuntimeExports.jsxs("div",{className:`
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light
      dark:border-dashboard-border-dark
      rounded-2xl
      shadow-inner
    `,children:[jsxRuntimeExports.jsxs("div",{onClick:()=>Dt(mr=>!mr),className:"flex items-center justify-between px-6 py-5 cursor-pointer select-none",children:[jsxRuntimeExports.jsx("h3",{className:`text-lg font-semibold
text-dashboard-text-light
dark:text-dashboard-text-dark`,children:"Background Theme"}),jsxRuntimeExports.jsx("span",{className:`transition-transform
text-dashboard-muted-light
dark:text-dashboard-muted-dark ${Tt?"rotate-180":""}`,children:""})]}),jsxRuntimeExports.jsx("div",{className:`overflow-hidden transition-all duration-500 ${Tt?"max-h-[900px] opacity-100":"max-h-0 opacity-0"}`,children:jsxRuntimeExports.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[jsxRuntimeExports.jsx("div",{className:`
  h-14 rounded-lg
  border border-dashboard-border-light
  dark:border-dashboard-border-dark
`,style:{background:et||"linear-gradient(to right, #000, #333)"}}),jsxRuntimeExports.jsx("div",{className:`
            grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-3
            overflow-y-auto
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            rounded-lg p-2
`,style:{maxHeight:"240px"},children:lr.map(mr=>{var xr;const Rr=((xr=mr.preview)==null?void 0:xr.includes("gradient"))&&!kt;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>cr(mr),disabled:Rr,className:`relative h-12 rounded-lg border transition-all
        ${et===mr.preview?"border-green ring-2 ring-green/50":"border-dashboard-border-light dark:border-dashboard-border-dark hover:border-green/60"}
        ${Rr?"opacity-50 cursor-not-allowed":""}
      `,style:{background:mr.preview},children:[jsxRuntimeExports.jsx("span",{className:`
                    absolute inset-0 flex items-center justify-center
                    text-[10px] font-semibold uppercase
                    ${getReadableTextColor(mr.preview)}
                  `,children:mr.label}),Rr&&jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 text-[9px] px-1.5 py-0.5 rounded bg-purple-600 text-white font-semibold",children:"PRO"})]},mr.name)})}),!kt&&jsxRuntimeExports.jsx("p",{className:"text-xs text-purple-400 mt-2 text-center",children:"Unlock custom colors and gradients with Pro for complete brand control."}),kt&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-semibold mb-3 text-center
              text-dashboard-text-light
              dark:text-dashboard-text-dark`,children:"Custom Solid Color"}),jsxRuntimeExports.jsxs("div",{className:`mx-auto
                flex flex-col sm:flex-row items-center justify-center
                gap-3
                max-w-[520px]
                rounded-lg
                p-3
                transition-all
                ${pr?"ring-2 ring-green-500/70 border border-green-400":""}
              `,children:[jsxRuntimeExports.jsx("input",{type:"color",value:Ft,onChange:mr=>Ut(mr.target.value),className:`
                  w-10
                  h-10
                  aspect-square
                  rounded-full
                  border
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  cursor-pointer
                  appearance-none
                  p-0
                `}),jsxRuntimeExports.jsx("input",{type:"text",value:Ft,onChange:mr=>Ut(mr.target.value),placeholder:"#111827",className:`
                  w-full
                  max-w-[420px]
                  px-4
                  py-2.5
                  rounded-lg
                  bg-dashboard-bg-light
                  dark:bg-dashboard-bg-dark
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  placeholder-dashboard-muted-light
                  dark:placeholder-dashboard-muted-dark
                  text-sm
                  uppercase
                `}),jsxRuntimeExports.jsx("button",{type:"button",onClick:dr,disabled:!nr(Ft)||pr,className:`px-4 py-2 border rounded text-sm
          ${nr(Ft)?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-green hover:border-green":"text-dashboard-muted-light dark:text-dashboard-muted-dark opacity-60 cursor-not-allowed"}
        `,children:pr?"Active":"Apply"})]})]}),$t&&kt&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-semibold mb-2
              text-dashboard-text-light
              dark:text-dashboard-text-dark`,children:"Custom Gradient"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:Yt,onChange:mr=>Jt(mr.target.value),className:`
                    w-10
                    h-10
                    aspect-square
                    rounded-full
                    border
                    border-dashboard-border-light
                  dark:border-dashboard-border-dark
                    cursor-pointer
                    appearance-none
                    p-0
                  `}),jsxRuntimeExports.jsx("input",{type:"text",value:Yt,onChange:mr=>Jt(mr.target.value),placeholder:"#0ea5e9",className:`
                    w-full
                    max-w-[240px]
                    px-4
                    py-2.5
                    rounded-lg
                   bg-dashboard-bg-light
                  dark:bg-dashboard-bg-dark
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  text-dashboard-text-light
                  dark:text-dashboard-text-dark
                  placeholder-dashboard-muted-light
                  dark:placeholder-dashboard-muted-dark
                    text-sm
                    uppercase
                  `})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"color",value:Zt,onChange:mr=>er(mr.target.value),className:`
                    w-10
                    h-10
                    aspect-square
                    rounded-full
                    border
                    border-gray-600
                    cursor-pointer
                    appearance-none
                    p-0
                  `}),jsxRuntimeExports.jsx("input",{type:"text",value:Zt,onChange:mr=>er(mr.target.value),placeholder:"#22c55e",className:`
                    w-full
                    max-w-[240px]
                    px-4
                    py-2.5
                    bg-dashboard-bg-light
                    dark:bg-dashboard-bg-dark
                    border border-dashboard-border-light
                    dark:border-dashboard-border-dark
                    text-dashboard-text-light
                    dark:text-dashboard-text-dark
                    placeholder-dashboard-muted-light
                    dark:placeholder-dashboard-muted-dark
                    rounded-lg         
                    text-sm
                    uppercase
                  `})]})]}),jsxRuntimeExports.jsxs("select",{value:rr,onChange:mr=>sr(mr.target.value),className:`
                mt-3
                w-full
                max-w-[520px]
                p-2.5
              bg-dashboard-bg-light
              dark:bg-dashboard-bg-dark
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              text-dashboard-text-light
              dark:text-dashboard-text-dark
                rounded-lg

              `,children:[jsxRuntimeExports.jsx("option",{value:"90deg",children:"Left  Right"}),jsxRuntimeExports.jsx("option",{value:"180deg",children:"Top  Bottom"}),jsxRuntimeExports.jsx("option",{value:"45deg",children:"Diagonal "}),jsxRuntimeExports.jsx("option",{value:"135deg",children:"Diagonal "})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:ur,disabled:!nr(Yt)||!nr(Zt),className:`mt-3 w-full px-4 py-2 border rounded
        ${nr(Yt)&&nr(Zt)?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-green hover:border-green":"text-dashboard-muted-light dark:text-dashboard-muted-dark opacity-60 cursor-not-allowed"}
      `,children:"Apply Gradient"})]}),jsxRuntimeExports.jsx("p",{className:`text-xs text-center
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark`,children:"Presets or custom colors all save the same way."})]})})]})}function ThemeAndFontControls({landing:et,setLanding:dt,bgTheme:$t,setBgTheme:kt,fontName:Tt,setFontName:Dt,fontFile:Ft,setFontFile:Ut,isPro:Ht}){const Kt=[...colorThemes,...gradientThemes];function Yt(Jt){const Zt=Kt.find(er=>er.name===Jt);return(Zt==null?void 0:Zt.preview)||Jt}return jsxRuntimeExports.jsxs("div",{className:"mb-12",children:[jsxRuntimeExports.jsx(ColorThemeChooser,{bgTheme:$t,setBgTheme:Jt=>{const Zt=Yt(Jt);kt(Zt),dt({...et,bg_theme:Zt})},colorThemes:Kt,includeGradients:!0,isPro:Ht}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(FontSelector,{fontName:Tt,setFontName:Jt=>{Dt(Jt),dt({...et,font:Jt})},fontFile:Ft,setFontFile:Jt=>{Ut(Jt),dt({...et,font_file:Jt})}})})]})}function TextColorControls({landing:et,setLanding:dt}){const $t=[{key:"font_color_h1",label:"Heading 1"},{key:"font_color_h2",label:"Heading 2"},{key:"font_color_h3",label:"Heading 3"},{key:"font_color_p",label:"Paragraph"}],kt=(Tt,Dt)=>{dt({...et,[Tt]:Dt.toUpperCase()})};return jsxRuntimeExports.jsxs("div",{className:`
      relative z-[10]
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      rounded-xl
      p-6
      shadow-inner
      border border-dashboard-border-light dark:border-dashboard-border-dark
    `,children:[jsxRuntimeExports.jsx("h3",{className:`
        text-lg font-semibold mb-4
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:"Text Colors"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-6",children:$t.map(({key:Tt,label:Dt})=>jsxRuntimeExports.jsxs("div",{className:`
            flex flex-col items-center justify-center
            bg-dashboard-bg-light dark:bg-dashboard-bg-dark
            rounded-lg
            p-4
            border border-dashboard-border-light dark:border-dashboard-border-dark
            hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark
            transition-all duration-200
          `,children:[jsxRuntimeExports.jsx("label",{className:`
              text-sm font-semibold mb-2
              text-dashboard-text-light dark:text-dashboard-text-dark
            `,children:Dt}),jsxRuntimeExports.jsx("input",{type:"color",value:et[Tt]||"#FFFFFF",onChange:Ft=>kt(Tt,Ft.target.value),className:`
              w-14 h-14 p-0
              rounded-lg
              cursor-pointer
              border border-dashboard-border-light dark:border-dashboard-border-dark
              hover:scale-105 transition-transform
            `}),jsxRuntimeExports.jsx("input",{type:"text",value:et[Tt]||"#FFFFFF",onChange:Ft=>kt(Tt,Ft.target.value),className:`
              mt-3 w-full px-2 py-1 text-xs text-center uppercase
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              rounded
              text-dashboard-text-light dark:text-dashboard-text-dark
              focus:outline-none focus:ring-1 focus:ring-green
            `,placeholder:"#FFFFFF"}),jsxRuntimeExports.jsx("span",{className:`
              text-xs mt-2 tracking-wider
              text-dashboard-muted-light dark:text-dashboard-muted-dark
            `,children:et[Tt]||"#FFFFFF"})]},Tt))})]})}const MOTION_PRESETS=[{value:"fade",label:"Fade In"},{value:"fade-up",label:"Fade Up"},{value:"fade-down",label:"Fade Down"},{value:"fade-left",label:"Fade Left"},{value:"fade-right",label:"Fade Right"},{value:"slide-up",label:"Slide Up"},{value:"slide-down",label:"Slide Down"},{value:"slide-left",label:"Slide Left"},{value:"slide-right",label:"Slide Right"},{value:"scale-up",label:"Scale Up"},{value:"scale-down",label:"Scale Down"},{value:"blur-in",label:"Blur In"},{value:"rotate-in",label:"Rotate In"},{value:"flip-up",label:"Flip Up"},{value:"flip-left",label:"Flip Left"},{value:"pop",label:"Pop"},{value:"bounce",label:"Bounce"}],PRESET_VARIANTS={fade:{opacity:0},"fade-up":{opacity:0,y:30},"fade-down":{opacity:0,y:-30},"fade-left":{opacity:0,x:30},"fade-right":{opacity:0,x:-30},"slide-up":{y:60},"slide-down":{y:-60},"slide-left":{x:-60},"slide-right":{x:60},"scale-up":{scale:.9,opacity:0},"scale-down":{scale:1.1,opacity:0},"blur-in":{opacity:0,filter:"blur(10px)",y:20},"rotate-in":{opacity:0,rotate:-8,scale:.95},"flip-up":{rotateX:-90,opacity:0},"flip-left":{rotateY:-90,opacity:0},pop:{scale:.8,opacity:0},bounce:{y:-20,opacity:0}};function MotionWrapper({children:et,index:dt,motionSettings:$t,blockMotion:kt}){if(!et)return null;if(!(($t==null?void 0:$t.enabled)===!0&&(kt==null?void 0:kt.disabled)!==!0))return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:et});const Dt=(kt==null?void 0:kt.preset)||($t==null?void 0:$t.preset)||"fade-up",Ut={hidden:PRESET_VARIANTS[Dt]||{opacity:0},visible:{opacity:1,x:0,y:0,scale:1,rotate:0,rotateX:0,rotateY:0,filter:"blur(0px)",transition:{duration:$t.duration??.5,delay:($t.delay??0)+dt*($t.stagger??.12),ease:$t.easing??"easeOut",type:Dt==="bounce"?"spring":"tween",bounce:Dt==="bounce"?.35:0}}};return jsxRuntimeExports.jsx(motion.div,{variants:Ut,initial:"hidden",whileInView:"visible",viewport:{once:$t.viewport_once??!0},children:et})}function renderPreviewBlock(et,dt,$t){var Kt,Yt,Jt;if(et.enabled===!1)return null;const{landing:kt,bgTheme:Tt,user:Dt,updateBlock:Ft,adjustForLandingOverlay:Ut}=$t,Ht={margin:"0 auto 24px",maxWidth:"700px",textAlign:"center"};switch(et.type){case"heading":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};return jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold leading-snug normal-case",style:{...Ht,...nr,maxWidth:700,textAlign:sr,color:kt.font_color_h1||"#FFFFFF"},children:et.text||"Heading Example"},dt)}case"subheading":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};return jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold leading-snug",style:{...Ht,...nr,maxWidth:700,textAlign:sr,color:kt.font_color_h2||"#E5E5E5"},children:et.text||"Subheading Example"},dt)}case"subsubheading":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};return jsxRuntimeExports.jsx("h3",{className:"text-xl font-medium leading-snug",style:{...Ht,...nr,maxWidth:700,textAlign:sr,color:kt.font_color_h3||"#CCCCCC"},children:et.text||"Supporting Header"},dt)}case"list_heading":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};return jsxRuntimeExports.jsx("p",{style:{...Ht,...nr,maxWidth:700,marginBottom:10,fontWeight:700,fontSize:"1.15rem",textAlign:sr,color:kt.font_color_p||"#FFFFFF"},children:et.text||" List Heading Example"},dt)}case"paragraph":{const sr=et.alignment||"left",nr=sr==="right"?{marginLeft:"auto",marginRight:0}:{marginLeft:"auto",marginRight:"auto"};if(et.bulleted){const ir=(et.text||"").split(/\n/).filter(Boolean);return jsxRuntimeExports.jsx("div",{style:{...nr,maxWidth:700,marginBottom:24,lineHeight:"1.8"},children:jsxRuntimeExports.jsx("ul",{style:{listStyle:"disc",paddingLeft:"1.25rem",margin:0,textAlign:"left",color:kt.font_color_p||"rgba(255,255,255,0.92)"},children:ir.map((or,lr)=>jsxRuntimeExports.jsx("li",{style:{marginBottom:"0.35rem"},children:or.replace(/^\s*/,"")},lr))})},dt)}return jsxRuntimeExports.jsx("p",{className:"text-lg leading-relaxed",style:{...nr,maxWidth:700,marginBottom:24,textAlign:sr,color:kt.font_color_p||"rgba(255,255,255,0.92)",whiteSpace:"pre-line"},children:et.text||"Your paragraph will appear here."},dt)}case"video":if(!et.url)return null;let Zt=et.url.trim();return Zt.includes("watch?v=")?Zt=Zt.replace("watch?v=","embed/"):Zt.includes("youtu.be/")&&(Zt=`https://www.youtube.com/embed/${Zt.split("youtu.be/")[1].split(/[?&]/)[0]}`),Zt.includes("vimeo.com")&&!Zt.includes("player.vimeo.com")&&(Zt=`https://player.vimeo.com/video/${Zt.split("vimeo.com/")[1].split(/[?&]/)[0]}`),jsxRuntimeExports.jsxs("div",{style:{margin:"40px auto",maxWidth:"800px",textAlign:"center"},children:[jsxRuntimeExports.jsx("iframe",{src:Zt,title:"Embedded Video",style:{width:"100%",aspectRatio:"16 / 9",border:"none",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.35)"},allow:"autoplay; fullscreen",allowFullScreen:!0}),et.caption&&jsxRuntimeExports.jsx("p",{style:{marginTop:"12px",fontSize:"0.95rem",color:kt.font_color_p||"#DDD",fontStyle:"italic"},children:et.caption})]},dt);case"divider":return et.style==="space"?jsxRuntimeExports.jsx("div",{style:{height:`${et.height||40}px`}},dt):jsxRuntimeExports.jsx("hr",{style:{border:"none",borderTop:`1px solid ${et.color||"rgba(255,255,255,0.2)"}`,width:"60%",margin:`${(et.height||40)/2}px auto`,opacity:.7}},dt);case"spacer":return et.style==="space"?jsxRuntimeExports.jsx("div",{style:{height:`${et.height||40}px`}},dt):jsxRuntimeExports.jsx("hr",{style:{border:"none",borderTop:`1px solid ${et.color||"rgba(255,255,255,0.2)"}`,width:et.width||"60%",margin:`${(et.height||40)/2}px auto`,opacity:.7}},dt);case"calendly":return et.calendly_url?jsxRuntimeExports.jsx("div",{style:{margin:"40px auto",maxWidth:"900px",textAlign:"center"},children:jsxRuntimeExports.jsx("iframe",{src:et.calendly_url,style:{width:"100%",height:`${et.height||650}px`,border:"none",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.35)"},title:"Calendly Scheduler"})},dt):null;case"social_links":{const sr=et.alignment||"center",nr=et.icon_style||"color";et.icon_color;const ir=!!et.show_borders&&nr==="mono",or=et.links||{},lr={instagram:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg",threads:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/threads.svg",twitter:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/x.svg",youtube:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg",linkedin:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/linkedin.svg",facebook:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg",tiktok:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg",pinterest:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/pinterest.svg",substack:"https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/substack.svg"};return jsxRuntimeExports.jsx("div",{style:{margin:"40px 0",display:"flex",justifyContent:sr==="center"?"center":sr==="right"?"flex-end":"flex-start",gap:"20px",flexWrap:"wrap"},children:Object.entries(or).filter(([cr,dr])=>dr&&lr[cr]).map(([cr,dr])=>{const ur=et.icon_style==="mono"?"rgba(255,255,255,0.75)":et.icon_color||"#ffffff";return jsxRuntimeExports.jsx("a",{href:dr,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:ir?"34px":"26px",height:ir?"34px":"26px",borderRadius:ir?"10px":"0",border:ir?`1.25px solid ${ur}`:"none",transition:"transform 0.25s ease, opacity 0.2s ease, box-shadow 0.2s ease",textDecoration:"none"},onMouseEnter:pr=>{pr.currentTarget.style.transform="scale(1.1)",pr.currentTarget.style.opacity="0.9",pr.currentTarget.style.boxShadow="0 0 12px rgba(255,255,255,0.35)"},onMouseLeave:pr=>{pr.currentTarget.style.transform="scale(1)",pr.currentTarget.style.opacity="1",pr.currentTarget.style.boxShadow="none"},children:jsxRuntimeExports.jsx("div",{style:{width:"20px",height:"20px",WebkitMask:`url(${lr[cr]}) no-repeat center / contain`,mask:`url(${lr[cr]}) no-repeat center / contain`,backgroundColor:ur}})},cr)})},dt)}case"countdown":{const sr=et.text||"Offer Ends In:",nr=et.style_variant||"minimal",ir=et.text_color||"#fff",lr=(()=>{const ur=Tt||"";return ur.includes("emerald")?"#10b981":ur.includes("purple")||ur.includes("royal")?"#8b5cf6":ur.includes("pink")||ur.includes("rose")?"#ec4899":ur.includes("yellow")||ur.includes("amber")?"#facc15":ur.includes("blue")?"#3b82f6":ur.includes("red")?"#ef4444":"#10b981"})(),cr=et.glow_color||lr,dr={minimal:{fontSize:"2rem",fontFamily:"monospace",letterSpacing:"2px",color:ir},boxed:{display:"inline-block",background:"rgba(15,23,42,0.85)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"12px",padding:"12px 24px",fontSize:"2rem",fontFamily:"monospace",letterSpacing:"2px",color:ir},glow:{fontSize:"2rem",fontFamily:"monospace",letterSpacing:"2px",color:ir,textShadow:`
        0 0 6px ${cr},
        0 0 14px ${cr},
        0 0 28px ${cr}
      `}};return jsxRuntimeExports.jsxs("div",{style:{textAlign:"center",padding:"50px 0"},children:[jsxRuntimeExports.jsx("p",{style:{fontWeight:700,fontSize:"1.3rem",marginBottom:"10px",color:ir},children:sr}),jsxRuntimeExports.jsx("div",{style:dr[nr]||dr.minimal,children:"12:34:56:78"}),jsxRuntimeExports.jsx("div",{style:{color:ir,fontSize:"0.9rem",marginTop:"8px",letterSpacing:"1px"},children:"DAYS|HRS|MIN|SEC"})]},dt)}case"stripe_checkout":return jsxRuntimeExports.jsxs("div",{style:{textAlign:et.alignment||"center",margin:"40px auto"},children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{var sr;if(!et.pdf_url){y$4.warn("Please select a Book to sell first.");return}try{const nr=await axiosInstance.post("/seller-checkout/create-checkout-session",{landingPageId:kt.id,sellerId:Dt==null?void 0:Dt.id,pdfUrl:et.pdf_url,price_in_cents:Math.round((et.price||10)*100)});(sr=nr.data)!=null&&sr.url?window.location.href=nr.data.url:y$4.error("Unable to start checkout. Please try again.")}catch(nr){console.error("Stripe Checkout Error:",nr),y$4.error("Error connecting to Stripe. Try again later.")}},className:"transition-transform hover:scale-105",style:{background:et.button_color||"#7bed9f",color:et.text_color||"#000",padding:"14px 36px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:et.button_text||"Buy & Download Book"}),jsxRuntimeExports.jsxs("p",{style:{marginTop:"8px",color:"#aaa"},children:["$",Number(et.price)>0?Number(et.price).toFixed(2):"10.00"," ","USD"]}),et.pdf_url&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Selling:",jsxRuntimeExports.jsx("a",{href:et.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"text-green font-medium ml-1 underline hover:text-green transition",children:"Preview Book"})]})]},dt);case"referral_button":if((Dt==null?void 0:Dt.is_admin_employee)!==1)return jsxRuntimeExports.jsx("p",{style:{color:"#999",fontSize:"0.9rem",textAlign:"center",marginTop:"20px"},children:"(Referral buttons are available to admin employees only)"},dt);const er=Dt!=null&&Dt.referral_slug?`https://themessyattic.com/r/${Dt.referral_slug}`:"https://themessyattic.com/sign-up";return jsxRuntimeExports.jsxs("div",{style:{textAlign:et.alignment||"center",margin:"40px auto"},children:[jsxRuntimeExports.jsx("a",{href:er,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",background:et.button_color||"#7bed9f",color:et.text_color||"#000000",padding:"14px 36px",borderRadius:"8px",fontWeight:700,textDecoration:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"transform 0.2s ease, box-shadow 0.3s ease"},onMouseOver:sr=>sr.currentTarget.style.transform="scale(1.05)",onMouseOut:sr=>sr.currentTarget.style.transform="scale(1)",children:et.button_text||et.text||"Sign Up with My Referral"}),jsxRuntimeExports.jsx("p",{style:{color:"#aaa",fontSize:"0.8rem",marginTop:"10px",wordBreak:"break-all"},children:`Referral link: ${er}`}),jsxRuntimeExports.jsxs("p",{style:{color:"#aaa",fontSize:"0.75rem",marginTop:"6px"},children:["Referral link is shown here for preview only",jsxRuntimeExports.jsx("br",{})," and is not visible on the live page."]})]},dt);case"faq":return jsxRuntimeExports.jsxs("div",{style:{background:et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#F285C3"}, ${et.gradient_end||"#7bed9f"})`:et.match_main_bg?Ut(Tt):et.bg_color||Tt||"rgba(0,0,0,0.3)",color:et.text_color||"#FFFFFF",padding:"40px",borderRadius:et.use_no_bg?"0px":"20px",marginTop:"40px",textAlign:et.alignment||"left",maxWidth:"700px",marginLeft:"auto",marginRight:"auto"},children:[jsxRuntimeExports.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:700,marginBottom:"20px"},children:et.title||"Frequently Asked Questions"}),et.items.map((sr,nr)=>jsxRuntimeExports.jsxs("div",{style:{marginBottom:"20px",borderBottom:et.use_no_bg?"1px solid rgba(255,255,255,0.2)":"1px solid rgba(255,255,255,0.15)",paddingBottom:"16px",cursor:"pointer"},onClick:()=>{const ir=[...et.items],or=document.getElementById(`faq-prev-${dt}-${nr}`);or&&(ir[nr]._height=or.scrollHeight+"px"),ir[nr].open=!ir[nr].open,Ft(dt,"items",ir)},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:700,fontSize:"1.1rem"},children:[jsxRuntimeExports.jsx("span",{children:sr.q}),jsxRuntimeExports.jsx("span",{children:sr.open?"":"+"})]}),jsxRuntimeExports.jsx("div",{id:`faq-prev-${dt}-${nr}`,style:{height:sr.open?sr._height||"auto":"0px",overflow:"hidden",transition:"height 0.35s ease"},children:jsxRuntimeExports.jsx("p",{style:{color:et.text_color?et.text_color+"CC":"#CCCCCC",fontSize:"0.95rem",marginTop:"12px"},children:sr.a})})]},nr))]},dt);case"image":return jsxRuntimeExports.jsxs("div",{style:{textAlign:et.alignment||"center",padding:et.padding?`min(${et.padding}px, 12px)`:"0px",margin:"12px 0",overflow:"visible"},children:[jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:"rounded-lg",style:{maxWidth:et.full_width?"100%":et.width?`${et.width}%`:"100%",width:"100%",height:"auto",objectFit:"contain",display:"block",margin:"0 auto",padding:et.padding?`min(${et.padding}px, 12px)`:"0px",borderRadius:et.radius?`${et.radius}px`:"0px",boxShadow:et.shadow?(()=>{const sr=(et.shadow_angle||135)*Math.PI/180,nr=Math.round(Math.cos(sr)*(et.shadow_offset||10)),ir=Math.round(Math.sin(sr)*(et.shadow_offset||10));return`${nr}px ${ir}px ${et.shadow_depth||25}px ${et.shadow_color||"rgba(0,0,0,0.5)"}`})():"none"}}),et.caption&&jsxRuntimeExports.jsx("p",{className:"mt-2 sm:mt-3 text-gray-300 text-sm italic",style:{textAlign:et.alignment||"center"},children:et.caption})]},dt);case"profile_card":return jsxRuntimeExports.jsxs("div",{style:{textAlign:et.alignment||"center",margin:"24px 0",padding:"16px"},children:[et.image_url&&jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",style:{width:`${et.image_size||120}px`,height:`${et.image_size||120}px`,objectFit:"cover",borderRadius:`${et.image_radius||999}px`,border:`${et.image_border_width||1}px solid ${et.image_border_color||"#e5e7eb"}`,display:"block",margin:"0 auto"}}),et.tagline&&jsxRuntimeExports.jsx("p",{style:{marginTop:"14px",fontSize:"1rem",fontWeight:600,color:et.tagline_color||"#111827",textAlign:et.alignment||"center"},children:et.tagline}),et.contact_value&&jsxRuntimeExports.jsx("p",{style:{marginTop:"6px",fontSize:"0.9rem",color:et.subtext_color||"#6b7280",textAlign:et.alignment||"center"},children:et.contact_type==="phone"?jsxRuntimeExports.jsx("a",{href:`tel:${et.contact_value}`,style:{color:"inherit",textDecoration:"none"},children:et.contact_value}):jsxRuntimeExports.jsx("a",{href:`mailto:${et.contact_value}`,style:{color:"inherit",textDecoration:"none"},children:et.contact_value})})]},dt);case"single_offer":{const sr=et.text_color||"#ffffff",nr=et.use_pdf_cover?et.cover_url||et.image_url||null:et.image_url||et.cover_url||null;return jsxRuntimeExports.jsx("div",{style:{background:"transparent",padding:"40px 20px",borderRadius:et.use_no_bg?"0px":"20px",marginTop:"40px",maxWidth:"1100px",minHeight:"200px",marginLeft:"auto",marginRight:"auto",transition:"all 0.25s ease"},children:jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:"center"},children:jsxRuntimeExports.jsxs("div",{style:{background:"rgba(0,0,0,0.45)",border:"1px solid rgba(255,255,255,0.12)",borderRadius:"16px",padding:"28px",textAlign:"center",color:sr,display:"flex",flexDirection:"column",width:et.card_width?`${et.card_width}px`:"100%",height:et.card_height==="auto"?"auto":et.card_height?`${et.card_height}px`:"auto",overflow:et.card_height==="auto"?"visible":"auto"},children:[nr?jsxRuntimeExports.jsx("div",{style:{marginBottom:"16px"},children:jsxRuntimeExports.jsx("img",{src:nr,alt:"",style:{width:"100%",display:"block"}})}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"160px",borderRadius:"12px",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem"},children:"No Image"}),jsxRuntimeExports.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:700,marginBottom:"8px"},children:et.title||"Offer Title"}),et.text&&jsxRuntimeExports.jsx("p",{style:{opacity:.8,fontSize:"0.95rem",marginBottom:"12px"},children:et.text}),et.use_long_description&&et.long_text&&(et.description_type==="bullets"?jsxRuntimeExports.jsx("ul",{style:{paddingLeft:"18px",marginBottom:"14px"},children:et.long_text.split(`
`).map((ir,or)=>jsxRuntimeExports.jsx("li",{style:{marginBottom:"6px"},children:ir.replace(/^\s*/,"")},or))}):jsxRuntimeExports.jsx("div",{style:{fontSize:"0.9rem",textAlign:"left",opacity:.85,marginBottom:"14px"},children:et.long_text})),et.price?jsxRuntimeExports.jsxs("p",{style:{fontWeight:800,fontSize:"1.3rem",marginBottom:"16px"},children:["$",Number(et.price).toFixed(2)]}):null,jsxRuntimeExports.jsx("button",{style:{marginTop:"auto",width:"100%",padding:"12px",borderRadius:"8px",fontWeight:700,border:"none",cursor:"pointer",background:et.button_color||"#22c55e",color:et.button_text_color||"#000000",fontSize:"1rem"},children:et.button_text||"Buy Now"})]})})},dt)}case"mini_offer":{const sr=et.text_color||"#ffffff",nr=et.use_pdf_cover?et.cover_url||et.image_url||null:et.image_url||et.cover_url||null,ir=et.use_gradient?`linear-gradient(${et.gradient_direction||"135deg"},
        ${et.gradient_start||"#a855f7"},
        ${et.gradient_end||"#ec4899"})`:et.bg_color||"#111827",or=et.use_no_bg?"transparent":et.use_gradient?`linear-gradient(${et.gradient_direction||"135deg"},
        ${et.gradient_start||"#a855f7"},
        ${et.gradient_end||"#ec4899"})`:et.bg_color||"#111827",lr=(((Jt=(Yt=(Kt=et.offer_page)==null?void 0:Kt.blocks)==null?void 0:Yt.map(ur=>ur.text))==null?void 0:Jt.join(" "))||"").replace(//g,""),cr=lr.trim().length>0,dr=cr&&lr.trim().split(/\s+/).length>20;return jsxRuntimeExports.jsx("div",{style:{padding:"40px 20px",marginTop:"40px",maxWidth:"1100px",marginLeft:"auto",marginRight:"auto"},children:jsxRuntimeExports.jsxs("div",{style:{display:"flex",width:"100%",maxWidth:"700px",height:"300px",margin:"0 auto",borderRadius:"20px",overflow:"hidden",border:"1px solid rgba(255,255,255,0.12)",boxShadow:"0 25px 60px rgba(0,0,0,0.45)",background:ir},children:[jsxRuntimeExports.jsx("div",{style:{flex:"0 0 30%",background:"#000",borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px",overflow:"hidden"},children:nr?jsxRuntimeExports.jsx("img",{src:nr,alt:"",style:{width:"100%",height:"100%",objectFit:"cover",display:"block",borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px",borderTopRightRadius:0,borderBottomRightRadius:0}}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",minHeight:"180px",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem"},children:"No Image"})}),jsxRuntimeExports.jsxs("div",{style:{flex:1,padding:"28px 32px",color:sr,display:"flex",flexDirection:"column",justifyContent:"center",boxSizing:"border-box",background:or},children:[jsxRuntimeExports.jsx("h1",{className:"normal-case",style:{fontSize:"1.2rem",lineHeight:1.5,marginBottom:"10px"},children:et.title||"Offer Title"}),jsxRuntimeExports.jsxs("div",{style:{fontSize:"1rem",lineHeight:1.5,marginBottom:"14px",maxWidth:"420px"},children:[jsxRuntimeExports.jsx("span",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:lr}),dr&&jsxRuntimeExports.jsx("span",{style:{display:"block",marginTop:"6px",fontWeight:700,textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"See more"})]}),jsxRuntimeExports.jsxs("div",{style:{marginTop:"16px"},children:[et.price?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"10px",fontSize:"1.05rem",fontWeight:300},children:["$",Number(et.price).toFixed(2)]}):null,jsxRuntimeExports.jsx("button",{style:{width:"100%",maxWidth:"260px",padding:"14px",borderRadius:"10px",fontWeight:700,border:"none",fontSize:"1.05rem",background:et.button_color||"#22c55e",color:et.button_text_color||"#000000",cursor:cr?"pointer":"not-allowed",opacity:cr?1:.6},children:et.button_text||"Buy Now"}),!cr&&jsxRuntimeExports.jsx("div",{style:{marginTop:"6px",fontSize:"0.85rem",opacity:.7},children:"Preview unavailable"})]})]})]})},dt)}case"secure_checkout":return jsxRuntimeExports.jsxs("div",{style:{width:"100%",textAlign:"center",marginTop:"40px",marginBottom:"20px",color:et.text_color||"#ffffff"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"8px"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"1rem",color:"#f1c40f",fontWeight:800,display:"flex",alignItems:"center"},children:""}),jsxRuntimeExports.jsx("h2",{style:{fontSize:"1rem",fontWeight:700,margin:0,color:"#ffffff"},children:et.title||"Secure Checkout"})]}),et.subtext&&jsxRuntimeExports.jsx("p",{style:{color:"rgba(255,255,255,0.75)",margin:"8px auto 14px auto",fontSize:"1rem",maxWidth:"600px",lineHeight:1.5},children:et.subtext}),Array.isArray(et.trust_items)&&et.trust_items.length>0&&jsxRuntimeExports.jsx("ul",{style:{margin:"10px auto 16px auto",padding:0,listStyle:"none",maxWidth:"400px"},children:et.trust_items.map((sr,nr)=>jsxRuntimeExports.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"6px",color:"rgba(255,255,255,0.9)",fontSize:"1rem"},children:[jsxRuntimeExports.jsx("span",{style:{color:"#22c55e",fontWeight:900},children:""}),sr]},nr))}),et.guarantee&&jsxRuntimeExports.jsx("p",{style:{marginTop:"8px",fontSize:"0.9rem",color:"rgba(255,255,255,0.7)"},children:et.guarantee}),et.payment_badge&&jsxRuntimeExports.jsx("div",{style:{marginTop:"14px"},children:jsxRuntimeExports.jsx("img",{src:et.payment_badge,alt:"Secure Payments",style:{width:"150px",opacity:.85,borderRadius:"8px"}})})]},dt);case"audio_player":return jsxRuntimeExports.jsxs("div",{style:{background:et.match_main_bg?(kt==null?void 0:kt.bg_theme)||"#0d1117":et.use_gradient?`linear-gradient(${et.gradient_direction}, ${et.gradient_start}, ${et.gradient_end})`:et.bg_color||"#0d1117",border:"1px solid #1f2937",padding:et.padding?`${et.padding}px`:"20px",borderRadius:"16px",maxWidth:"700px",margin:"45px auto",color:et.text_color||"#ffffff",fontFamily:"Inter, sans-serif",boxShadow:"0 0 25px rgba(0,0,0,0.35)",textAlign:et.alignment||"center"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"22px"},children:[et.show_cover!==!1&&et.cover_url&&jsxRuntimeExports.jsx("img",{src:et.cover_url,alt:"",style:{width:"70px",height:"70px",objectFit:"cover",borderRadius:"8px"}}),jsxRuntimeExports.jsxs("div",{style:{flex:1,textAlign:"left"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"6px"},children:[et.show_title!==!1&&et.title&&jsxRuntimeExports.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:et.text_color||"#ffffff"},children:et.title}),jsxRuntimeExports.jsxs("div",{style:{width:"16px",height:"12px",display:"flex",alignItems:"flex-end",gap:"2px"},children:[jsxRuntimeExports.jsx("span",{style:{width:"3px",height:"3px",background:et.progress_color||"#22c55e",opacity:.5}}),jsxRuntimeExports.jsx("span",{style:{width:"3px",height:"6px",background:et.progress_color||"#22c55e",opacity:.5}}),jsxRuntimeExports.jsx("span",{style:{width:"3px",height:"10px",background:et.progress_color||"#22c55e",opacity:.5}})]})]}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"18px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#1e293b",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:et.progress_color||"#22c55e",children:jsxRuntimeExports.jsx("path",{d:"M15 18V6l-9 6 9 6z"})})}),jsxRuntimeExports.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",background:et.progress_color||"#22c55e",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 10px rgba(0,0,0,0.3)"},children:jsxRuntimeExports.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"#000",children:jsxRuntimeExports.jsx("path",{d:"M8 5v14l11-7z"})})}),jsxRuntimeExports.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",background:"#1e293b",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:et.progress_color||"#22c55e",children:jsxRuntimeExports.jsx("path",{d:"M9 6v12l9-6-9-6z"})})}),jsxRuntimeExports.jsx("div",{style:{width:"110px"},children:jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"6px",borderRadius:"4px",background:"#1f2937",overflow:"hidden"},children:jsxRuntimeExports.jsx("div",{style:{width:"80%",height:"100%",background:et.progress_color||"#22c55e"}})})})]}),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"8px",background:"#1f2937",borderRadius:"6px",overflow:"hidden",marginTop:"12px"},children:jsxRuntimeExports.jsx("div",{style:{width:"20%",height:"100%",background:et.progress_color||"#22c55e"}})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"6px",fontSize:"0.85rem",color:"#94a3b8"},children:[jsxRuntimeExports.jsx("span",{children:"00:00"}),jsxRuntimeExports.jsx("span",{children:"03:30"})]})]})]}),jsxRuntimeExports.jsx("div",{style:{marginTop:"18px",height:"30px",width:"100%",background:"#000",borderRadius:"4px",overflow:"hidden",position:"relative"},children:jsxRuntimeExports.jsx("div",{style:{position:"absolute",inset:0,background:`repeating-linear-gradient(
              to right,
              ${et.waveform_color||"#7bed9f"} 0px,
              ${et.waveform_color||"#7bed9f"} 2px,
              transparent 2px,
              transparent 6px
            )`,opacity:.9}})})]},dt);case"container":let rr="transparent";return et.use_gradient?rr=`linear-gradient(${et.gradient_direction}, ${et.gradient_start}, ${et.gradient_end})`:et.bg_color?rr=et.bg_color:et.match_main_bg&&(rr=Ut(Tt)),jsxRuntimeExports.jsx("div",{style:{background:rr,padding:`${et.padding||20}px`,borderRadius:et.radius?`${et.radius}px`:"16px",margin:"40px auto",maxWidth:et.max_width||"100%"},children:(et.children||[]).filter(sr=>sr.enabled!==!1).map((sr,nr)=>renderPreviewBlock(sr,nr,$t))},et.id||dt);case"button_url":{const sr=et.use_gradient?`linear-gradient(${et.gradient_direction||"90deg"}, ${et.gradient_start||"#22c55e"}, ${et.gradient_end||"#3b82f6"})`:et.bg_color||"#22c55e",nr=typeof et.shadow_opacity=="number"?et.shadow_opacity/100:.35,ir=`${et.shadow_offset_x??0}px ${et.shadow_offset_y??8}px ${et.shadow_blur??20}px rgba(0,0,0,${nr})`;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"40px auto"},children:[jsxRuntimeExports.jsx("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:`${et.width??220}px`,height:`${et.height??48}px`,padding:`${et.padding_y??12}px ${et.padding_x??24}px`,background:sr,color:et.text_color||"#000000",fontSize:`${et.font_size??16}px`,fontWeight:et.font_weight??600,borderRadius:`${et.radius??8}px`,border:`${et.stroke_width??0}px solid ${et.stroke_color||"#000"}`,boxShadow:ir,userSelect:"none",pointerEvents:"none"},children:et.text||"Click Here"}),et.url&&jsxRuntimeExports.jsxs("p",{style:{marginTop:"8px",fontSize:"0.75rem",color:"#94a3b8",wordBreak:"break-all"},children:[" ",et.url]})]},dt)}case"scroll_arrow":{const sr=["bounce","float","pulse"].includes(et.animation_type)?et.animation_type:"bounce",nr=et.arrow_style||"single",or={single:1,double:2,triple:3}[nr]||1,lr=et.stagger||0;return jsxRuntimeExports.jsx("div",{style:{display:"flex",justifyContent:et.alignment==="left"?"flex-start":et.alignment==="right"?"flex-end":"center",margin:"32px 0",userSelect:"none"},children:jsxRuntimeExports.jsx("div",{style:{width:et.size||36,display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",touchAction:"manipulation","--arrow-speed":`${et.animation_speed||1.2}s`},children:Array.from({length:or}).map((cr,dr)=>jsxRuntimeExports.jsx("svg",{className:`scroll-arrow-item ${sr}`,viewBox:"0 0 24 24",fill:"none",stroke:et.color||"#ffffff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",width:"100%",height:"100%",style:{display:"block",marginTop:dr===0?0:"-10px",animationDelay:`${dr*lr}s`,animationDuration:`${et.animation_speed||1.2}s`},"aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{d:"M19 12l-7 7-7-7"})},dr))})})}default:return null}}function PreviewPanel({showPreviewSection:et,setShowPreviewSection:dt,landing:$t,selectedTheme:kt,fontName:Tt,bgTheme:Dt,user:Ft,updateBlock:Ut,adjustForLandingOverlay:Ht,blendColors:Kt}){var Jt;function Yt(Zt=[]){let er=[];for(const rr of Zt)rr.type==="offer_banner"&&rr.enabled!==!1&&er.push(rr),rr.type==="container"&&Array.isArray(rr.children)&&(er=er.concat(Yt(rr.children)));return er}return jsxRuntimeExports.jsxs("div",{className:`
      mt-6 sm:mt-12
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light dark:border-dashboard-border-dark
      rounded-xl sm:rounded-2xl
      shadow-inner
      p-3 sm:p-6
      transition-all
      hover:border-dashboard-muted-light dark:hover:border-dashboard-muted-dark
    `,children:[jsxRuntimeExports.jsxs("div",{onClick:()=>dt(!et),className:"flex items-center justify-between px-3 py-3 sm:px-6 sm:py-5 cursor-pointer select-none",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h3",{className:`
            text-lg font-semibold tracking-wide
            text-dashboard-text-light dark:text-dashboard-text-dark
          `,children:"Landing Page Preview"}),jsxRuntimeExports.jsx("p",{className:`
            mt-1 text-sm italic leading-relaxed max-w-xl
            text-dashboard-muted-light dark:text-dashboard-muted-dark
          `,children:"Your live page may appear slightly different due to device, screen size, or browser rendering."})]}),jsxRuntimeExports.jsx("span",{className:`
          text-dashboard-muted-light dark:text-dashboard-muted-dark
          text-sm
          transform transition-transform duration-300
          ${et?"rotate-180":"rotate-0"}
        `,children:""})]}),jsxRuntimeExports.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${et?"max-h-[9999px] opacity-100":"max-h-0 opacity-0"}`,children:jsxRuntimeExports.jsxs("div",{className:`
          mt-4 sm:mt-8
          p-4 sm:p-10
          rounded-xl
          text-center
          shadow-lg
          transition-all duration-500
          bg-dashboard-bg-light dark:bg-dashboard-bg-dark
        `,style:{background:Ht(kt),fontFamily:Tt},children:[Yt($t.content_blocks).map((Zt,er)=>jsxRuntimeExports.jsxs("div",{className:"relative shadow-lg",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:Zt.text_color||"#fff",textAlign:"center",padding:`${Zt.padding?Math.min(Zt.padding,28):28}px 16px`,fontWeight:600,fontSize:"1.2rem",lineHeight:"1.5",margin:"0 0 40px",borderRadius:"24px 24px 0 0",boxShadow:"none"},children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0 0 22px",textAlign:"center"},children:Zt.text||" Limited Time Offer! Get your free eBook today!"}),jsxRuntimeExports.jsx("button",{style:{display:"block",background:Zt.use_gradient?`linear-gradient(${Zt.gradient_direction||"90deg"}, ${Zt.gradient_start||"#F285C3"}, ${Zt.gradient_end||"#7bed9f"})`:Zt.button_color||Zt.bg_color||"#F285C3",color:Zt.button_text_color||Zt.text_color||"#fff",padding:"22px 36px",borderRadius:"8px",fontWeight:700,fontSize:"1rem",cursor:"pointer",border:"none",width:"100%",maxWidth:"340px",margin:"16px auto 0 auto",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",transition:"transform 0.25s ease"},onMouseOver:rr=>{rr.currentTarget.style.transform="scale(1.05)"},onMouseOut:rr=>{rr.currentTarget.style.transform="scale(1)"},children:Zt.button_text||"Claim Offer"})]},er)),$t.cover_image_url&&jsxRuntimeExports.jsx("img",{src:$t.cover_image_url,alt:"Book Cover",className:"mx-auto mb-4 sm:mb-8 rounded-xl shadow-lg",style:{width:"100%",maxWidth:"480px",height:"auto",aspectRatio:"unset",objectFit:"cover",border:"2px solid var(--dashboard-border-light)",background:"#000",boxShadow:"0 15px 35px rgba(0, 0, 0, 0.25), 0 6px 20px rgba(0, 0, 0, 0.15)",borderRadius:"12px",transition:"transform 0.3s ease, box-shadow 0.3s ease"}}),(Jt=$t.content_blocks)!=null&&Jt.length?$t.content_blocks.filter(Zt=>Zt.type!=="offer_banner"&&Zt.enabled!==!1).map((Zt,er)=>jsxRuntimeExports.jsx(MotionWrapper,{index:er,motionSettings:{...$t.motion_settings,enabled:!1},blockMotion:Zt.motion,children:renderPreviewBlock(Zt,er,{landing:$t,selectedTheme:kt,fontName:Tt,bgTheme:Dt,user:Ft,updateBlock:Ut,adjustForLandingOverlay:Ht,blendColors:Kt})},Zt.id||er)):jsxRuntimeExports.jsx("p",{className:`
              italic
              text-dashboard-muted-light dark:text-dashboard-muted-dark
            `,children:"Start adding sections to preview your landing page..."})]})})]})}function BottomActionsBar({landing:et,user:dt,handleSaveTemplate:$t}){const[kt,Tt]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:`
      flex flex-col sm:flex-row sm:items-center sm:justify-between
      mt-16 pt-8
      border-t
      border-dashboard-border-light dark:border-dashboard-border-dark
    `,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-center sm:items-start",children:[jsxRuntimeExports.jsx("button",{type:"submit",name:"save-landing",className:"bg-green text-black px-6 py-3 rounded-lg shadow hover:bg-green transition",children:"Save Changes"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:$t,className:`
          bg-dashboard-hover-light dark:bg-dashboard-hover-dark
          text-dashboard-text-light dark:text-dashboard-text-dark
          px-6 py-3
          rounded-lg
          shadow
          border
          border-dashboard-border-light dark:border-dashboard-border-dark
          hover:bg-dashboard-bg-light dark:hover:bg-dashboard-bg-dark
          transition
        `,children:"Save Version"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center sm:items-end mt-6 sm:mt-0 gap-2",children:[jsxRuntimeExports.jsxs("a",{href:et.username?`https://${et.username}.themessyattic.com?owner_preview=${encodeURIComponent((dt==null?void 0:dt.id)||"")}`:void 0,target:"_blank",rel:"noopener noreferrer",className:`
      inline-flex items-center gap-2
      px-4 py-1.5
      rounded-full
      text-xs font-semibold
      border
      transition-all
      ${et.username?`
                bg-green/10
                text-dashboard-muted-light dark:text-dashboard-muted-dark
                border-green/30
                hover:bg-green/20
                hover:text-blue
              `:`
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                text-dashboard-muted-light dark:text-dashboard-muted-dark
                border-dashboard-border-light dark:border-dashboard-border-dark
                cursor-not-allowed
              `}
        `,onClick:Dt=>{et.username||Dt.preventDefault()},children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-current"}),et.username?"View Live Page":"Set username to view page"]}),jsxRuntimeExports.jsxs("p",{className:`
          text-xs
          text-dashboard-muted-light dark:text-dashboard-muted-dark
          flex items-center gap-2
        `,children:["Copy Live URL:",et.username?jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`https://${et.username}.themessyattic.com`),Tt(!0),setTimeout(()=>Tt(!1),1500)},className:"text-silver font-medium hover:opacity-80",children:kt?"Copied!":`https://${et.username}.themessyattic.com`}):jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Not set"})]})]})]})}function AICopyModal({aiContext:et,onApply:dt,onClose:$t}){const[kt,Tt]=reactExports.useState(!1),[Dt,Ft]=reactExports.useState(""),[Ut,Ht]=reactExports.useState("");reactExports.useEffect(()=>{Ht("")},[Dt]),reactExports.useEffect(()=>{et!=null&&et.currentText&&Ft(et.currentText)},[et]);const Kt=async()=>{if(Dt.trim()){Tt(!0);try{const Zt=await axiosInstance.post("/landing/generate-copy",{prompt:Dt,blockType:et.blockType});Ht(Zt.data.text)}catch(Zt){console.error(Zt)}finally{Tt(!1)}}},Yt=()=>{et!=null&&et.currentText&&Ft(`Rewrite the following text to be clearer and more engaging:

${et.currentText}`)},Jt=async()=>{const Zt=Ut||(et==null?void 0:et.currentText);if(Zt){Tt(!0);try{const er=await axiosInstance.post("/landing/generate-copy",{prompt:`Rewrite the following copy to be clearer, more engaging, and more effective:

${Zt}`,blockType:et.blockType});Ht(er.data.text)}catch(er){console.error(er)}finally{Tt(!1)}}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-lg bg-[#0B0F19] border border-gray-800 rounded-2xl shadow-xl p-5 relative",children:[jsxRuntimeExports.jsx("button",{onClick:$t,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:jsxRuntimeExports.jsx(X$5,{size:18})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Sparkles,{className:"text-green w-5 h-5"}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-white",children:"AI Assistant"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["Editing"," ",jsxRuntimeExports.jsx("span",{className:"text-gray-200 font-semibold",children:et.blockType})," ","block"]}),(et==null?void 0:et.currentText)&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:Yt,className:"flex items-center gap-2 text-xs mb-3 px-3 py-1.5 rounded-md bg-gray-800 text-gray-200 hover:bg-gray-700 transition",children:[jsxRuntimeExports.jsx(RotateCcw,{size:14}),"Rewrite existing text"]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"What is this block about?"}),jsxRuntimeExports.jsx("textarea",{value:Dt,onChange:Zt=>Ft(Zt.target.value),placeholder:"Describe what this section should say. You can paste text from your PDF here.",className:"w-full h-28 p-3 bg-black border border-gray-700 rounded-md text-sm text-white resize-none"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"AI generated copy"}),jsxRuntimeExports.jsx("textarea",{value:Ut,onChange:Zt=>Ht(Zt.target.value),placeholder:"AI output will appear here",className:"w-full h-32 p-3 bg-black border border-gray-700 rounded-md text-sm text-white resize-none"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:Kt,disabled:kt||!Dt.trim(),className:`
        px-4 py-2 rounded-md text-sm font-bold transition
        ${kt||!Dt.trim()?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-green text-black hover:bg-emerald-500"}
      `,children:kt?"Writing...":"Generate"}),jsxRuntimeExports.jsx("button",{onClick:Jt,disabled:kt||!Ut&&!(et!=null&&et.currentText),className:`
        px-4 py-2 rounded-md text-sm font-bold transition
        ${kt||!Ut&&!(et!=null&&et.currentText)?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-500"}
      `,children:"Rewrite"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:$t,className:"text-sm text-gray-400 hover:text-white",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>dt(Ut),disabled:!Ut,className:`
        px-4 py-2 rounded-md text-sm font-bold transition
        ${Ut?"bg-blue text-white hover:bg-blue/80":"bg-gray-700 text-gray-400 cursor-not-allowed"}
      `,children:"Apply"})]})]})]})})}function MotionPreview({preset:et,duration:dt,easing:$t,stagger:kt=0,delay:Tt=0}){const[Dt,Ft]=reactExports.useState(0),Ut=PRESET_VARIANTS[et]||PRESET_VARIANTS.fade;return jsxRuntimeExports.jsxs("div",{className:"mt-4 rounded-md border border-gray-700 bg-black/40 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Preview"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ft(Ht=>Ht+1),className:"text-xs rounded px-2 py-2 text-white bg-royalPurple hover:text-white transition",children:"Replay"})]}),jsxRuntimeExports.jsx(motion.div,{initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{delayChildren:Tt,staggerChildren:kt}}},className:"flex flex-col gap-2 items-center h-32 overflow-hidden",children:[0,1,2].map(Ht=>jsxRuntimeExports.jsx(motion.div,{variants:{hidden:Ut,visible:{opacity:1,x:0,y:0,scale:1,rotate:0,rotateX:0,rotateY:0,filter:"blur(0px)",transition:{duration:dt,ease:$t}}},className:"w-16 h-6 rounded-md bg-royalPurple shadow-md"},Ht))},`${et}-${dt}-${$t}-${kt}-${Tt}-${Dt}`)]})}function AnimationSettingsPanel({landing:et,setLanding:dt}){const $t={enabled:!1,preset:"fade-up",duration:.5,delay:0,stagger:.12,easing:[0,0,.2,1],panel_open:!1},kt={...$t,...et.motion_settings||{}},Tt={linear:"linear",easeOut:[0,0,.2,1],easeIn:[.4,0,1,1],easeInOut:[.4,0,.2,1]};function Dt(Ft){const Ut=["linear","cubic-bezier(0, 0, 0.2, 1)","cubic-bezier(0.4, 0, 1, 1)","cubic-bezier(0.4, 0, 0.2, 1)"];dt(Ht=>{const Kt={...$t,...Ht.motion_settings||{},...Ft};return Ut.includes(Kt.easing)||(Kt.easing=$t.easing),{...Ht,motion_settings:Kt}})}return jsxRuntimeExports.jsxs("div",{className:"border border-dashboard-border-light dark:border-dashboard-border-dark rounded-lg px-4 py-1 bg-dashboard-bg-light dark:bg-dashboard-bg-dark mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center mb-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:"Animate page sections"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Dt({enabled:!kt.enabled,panel_open:kt.enabled?kt.panel_open:!0}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors duration-200 ${kt.enabled?"bg-green":"bg-dashboard-border-light dark:bg-dashboard-border-dark"}`,children:jsxRuntimeExports.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full shadow transition-transform duration-200
  bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
  ${kt.enabled?"translate-x-4":"translate-x-1"}
`})})]}),kt.enabled&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Dt({panel_open:!kt.panel_open}),className:`absolute right-0 top-1/2 -translate-y-1/2
text-dashboard-muted-light dark:text-dashboard-muted-dark
hover:text-dashboard-text-light dark:hover:text-dashboard-text-dark
transition`,children:jsxRuntimeExports.jsx("span",{className:`inline-block transition-transform duration-200 ${kt.panel_open?"rotate-180":"rotate-0"}`,children:""})})]}),kt.enabled&&kt.panel_open&&jsxRuntimeExports.jsxs("div",{className:`space-y-4 max-w-md pb-6 pt-6
`,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-semibold text-dashboard-muted-light dark:text-dashboard-muted-dark mb-4",children:"Animation preset"}),jsxRuntimeExports.jsx("select",{value:kt.preset,onChange:Ft=>Dt({preset:Ft.target.value}),className:`w-full rounded-md
bg-dashboard-bg-light dark:bg-dashboard-bg-dark
border border-dashboard-border-light dark:border-dashboard-border-dark
text-dashboard-text-light dark:text-dashboard-text-dark
text-sm px-3 py-2`,children:MOTION_PRESETS.map(Ft=>jsxRuntimeExports.jsx("option",{value:Ft.value,children:Ft.label},Ft.value))})]}),jsxRuntimeExports.jsx(Range$1,{label:"Animation speed (seconds)",value:kt.duration,min:.2,max:2,step:.1,onChange:Ft=>Dt({duration:Ft})}),jsxRuntimeExports.jsx(Range$1,{label:"Stagger delay between sections",value:kt.stagger,min:0,max:.5,step:.02,onChange:Ft=>Dt({stagger:Ft})}),jsxRuntimeExports.jsx(Range$1,{label:"Initial page delay",value:kt.delay,min:0,max:1,step:.05,onChange:Ft=>Dt({delay:Ft})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Animation easing"}),jsxRuntimeExports.jsxs("select",{value:kt.easing,onChange:Ft=>Dt({easing:Tt[Ft.target.value]}),className:`w-full rounded-md
bg-dashboard-bg-light dark:bg-dashboard-bg-dark
border border-dashboard-border-light dark:border-dashboard-border-dark
text-dashboard-text-light dark:text-dashboard-text-dark
px-3 py-2 text-sm`,children:[jsxRuntimeExports.jsx("option",{value:"easeOut",children:"Ease out"}),jsxRuntimeExports.jsx("option",{value:"easeIn",children:"Ease in"}),jsxRuntimeExports.jsx("option",{value:"easeInOut",children:"Ease in out"}),jsxRuntimeExports.jsx("option",{value:"linear",children:"Linear"}),jsxRuntimeExports.jsx("option",{value:"cubic-bezier(0.4, 0, 0.2, 1)",children:"Material smooth"})]}),jsxRuntimeExports.jsx(MotionPreview,{preset:kt.preset,duration:kt.duration,easing:kt.easing,stagger:kt.stagger,delay:kt.delay})]})]})]})}function Range$1({label:et,value:dt,min:$t,max:kt,step:Tt,onChange:Dt}){const Ft=(dt-$t)/(kt-$t)*100;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:et}),jsxRuntimeExports.jsx("input",{type:"range",min:$t,max:kt,step:Tt,value:dt,onChange:Ut=>Dt(Number(Ut.target.value)),className:"custom-range",style:{background:`linear-gradient(
            to right,
            #670fe7 ${Ft}%,
            var(--dashboard-border-light) ${Ft}%
          )`}}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1",children:[dt,"s"]})]})}function PageUrlUsernameField({landing:et,setLanding:dt}){var Tt,Dt,Ft;const $t=!!((Tt=et==null?void 0:et.domain)!=null&&Tt.hasPrimaryDomain&&((Dt=et==null?void 0:et.domain)!=null&&Dt.primaryDomain)),kt=(Ft=et==null?void 0:et.domain)==null?void 0:Ft.primaryDomain;return reactExports.useEffect(()=>{$t&&et.username&&dt(Ut=>({...Ut,username:Ut.username}))},[$t]),jsxRuntimeExports.jsxs("div",{className:"w-full pb-10",children:[jsxRuntimeExports.jsx("label",{className:`
        block font-semibold mb-1
        text-dashboard-text-light
        dark:text-dashboard-text-dark
      `,children:"Page Url Username"}),jsxRuntimeExports.jsx("input",{type:"text",maxLength:30,value:et.username||"",disabled:$t,onChange:Ut=>{$t||dt({...et,username:Ut.target.value})},onBlur:async()=>{var Ut,Ht,Kt,Yt;if(!$t&&((Ht=(Ut=et.username)==null?void 0:Ut.trim())==null?void 0:Ht.length)>=3)try{const Jt=await axiosInstance.get(`/landing/check-username/${et.username.trim()}`);y$4[Jt.data.available?"success":"error"](Jt.data.message)}catch(Jt){const Zt=((Yt=(Kt=Jt==null?void 0:Jt.response)==null?void 0:Kt.data)==null?void 0:Yt.message)||"Error checking username";y$4.error(Zt)}},placeholder:$t?"Custom domain connected":"e.g. cre8tlydesigns",className:`
        w-75
        rounded-lg px-4 py-2
        border
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        placeholder-dashboard-muted-light
        dark:placeholder-dashboard-muted-dark
        border-dashboard-border-light
        dark:border-dashboard-border-dark
        ${$t?"bg-dashboard-disabled-light dark:bg-dashboard-disabled-dark cursor-not-allowed opacity-60":"bg-dashboard-bg-light dark:bg-dashboard-bg-dark"}
      `}),jsxRuntimeExports.jsx("p",{className:`
        text-xs mt-1 mb-10
        text-dashboard-muted-light
        dark:text-dashboard-muted-dark
      `,children:$t?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Your page is live at"," ",jsxRuntimeExports.jsxs("span",{className:"block text-blue break-all",children:["https://",kt]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"block mt-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Subdomain is disabled while a custom domain is active."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["This will be used for your page URL"," ",jsxRuntimeExports.jsx("span",{className:"block text-dashboard-muted-light dark:text-dashboard-muted-dark break-all",children:et.username?`https://${et.username}.themessyattic.com`:"https://yourname.themessyattic.com"})]})})]})}function LandingPageBuilder(){var xo,Os;const{user:et}=useAuth(),dt=useNavigate(),[$t,kt]=reactExports.useState(null),[Tt,Dt]=reactExports.useState(!0),[Ft,Ut]=reactExports.useState(""),[Ht,Kt]=reactExports.useState(""),[Yt,Jt]=reactExports.useState("default"),[Zt,er]=reactExports.useState(""),[rr,sr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(!1),[or,lr]=reactExports.useState(null),[cr,dr]=reactExports.useState(null),[ur,pr]=reactExports.useState(!1),[mr,jr]=reactExports.useState(!1),[Rr,xr]=reactExports.useState([]),[kr,Mr]=reactExports.useState(""),[Tr,Or]=reactExports.useState(""),[_r,Pr]=reactExports.useState(!1),[br,wr]=reactExports.useState(""),[zr,Hr]=reactExports.useState(!1),[Yr,es]=reactExports.useState(!1),[rs,Wr]=reactExports.useState(null),Xr=cr&&((xo=$t.content_blocks[cr.blockIndex])==null?void 0:xo.id)===cr.blockId,ns=ds=>{Wr(ds)},gs=ds=>{kt(Gr=>{const bs=Gr.content_blocks,xs=hs(bs,ds);if(!xs)return Gr;const ms=xs.index-1;if(ms<0)return Gr;const{removed:ls,next:ys}=$s(bs,xs),ws=ks(ys,{parentId:xs.parentId,index:ms},ls);return{...Gr,content_blocks:ws}})},us=ds=>{kt(Gr=>{var Fs;const bs=Gr.content_blocks,xs=hs(bs,ds);if(!xs)return Gr;const ms=xs.parentId===null?bs:((Fs=bs.find(vs=>vs.id===xs.parentId))==null?void 0:Fs.children)||[],ls=xs.index+1;if(ls>=ms.length)return Gr;const{removed:ys,next:ws}=$s(bs,xs),Ss=ks(ws,{parentId:xs.parentId,index:ls},ys);return{...Gr,content_blocks:Ss}})},ps=(ds,Gr)=>{kt(bs=>{const xs=[...bs.content_blocks],ms=xs[ds];if(!(ms!=null&&ms.children))return bs;const ls=ms.children.findIndex(Ss=>Ss.id===Gr);if(ls<=0)return bs;const ys=[...ms.children],[ws]=ys.splice(ls,1);return ys.splice(ls-1,0,ws),xs[ds]={...ms,children:ys},{...bs,content_blocks:xs}})},cs=(ds,Gr)=>{kt(bs=>{const xs=[...bs.content_blocks],ms=xs[ds];if(!(ms!=null&&ms.children))return bs;const ls=ms.children.findIndex(Ss=>Ss.id===Gr);if(ls===-1||ls>=ms.children.length-1)return bs;const ys=[...ms.children],[ws]=ys.splice(ls,1);return ys.splice(ls+1,0,ws),xs[ds]={...ms,children:ys},{...bs,content_blocks:xs}})},ss=(ds,Gr)=>{kt(bs=>{const xs=[...bs.content_blocks],ms=xs[ds];if(!ms||!Array.isArray(ms.children))return bs;const ls=ms.children.findIndex(Ss=>Ss.id===Gr);if(ls===-1)return bs;const ys=ms.children[ls],ws=ms.children.filter((Ss,Fs)=>Fs!==ls);return xs[ds]={...ms,children:ws},xs.splice(ds+1,0,ys),{...bs,content_blocks:xs}})},fs=(ds,Gr)=>{kt(bs=>{const xs=[...bs.content_blocks],ms=xs[ds];if(!ms)return bs;xs.splice(ds,1);const ls=ds<Gr?Gr-1:Gr,ys=xs[ls];return!ys||ys.type!=="container"?bs:(xs[ls]={...ys,children:[...ys.children||[],ms]},{...bs,content_blocks:xs})})},hs=(ds,Gr)=>{const bs=ds.findIndex(xs=>xs.id===Gr);if(bs!==-1)return{parentId:null,index:bs,block:ds[bs]};for(const xs of ds){if(xs.type!=="container")continue;const ms=(xs.children||[]).findIndex(ls=>ls.id===Gr);if(ms!==-1)return{parentId:xs.id,index:ms,block:xs.children[ms]}}return null},$s=(ds,Gr)=>{let bs;return Gr.parentId===null?(bs=ds[Gr.index],{removed:bs,next:ds.filter((xs,ms)=>ms!==Gr.index)}):{removed:ds.find(xs=>xs.id===Gr.parentId).children[Gr.index],next:ds.map(xs=>xs.id!==Gr.parentId?xs:{...xs,children:xs.children.filter((ms,ls)=>ls!==Gr.index)})}},ks=(ds,Gr,bs)=>{if(Gr.parentId===null){const xs=[...ds];return xs.splice(Gr.index,0,bs),xs}return ds.map(xs=>xs.id!==Gr.parentId?xs:{...xs,children:[...(xs.children||[]).slice(0,Gr.index),bs,...(xs.children||[]).slice(Gr.index)]})},Ds=(et==null?void 0:et.plan)==="business_builder_pack"&&(et==null?void 0:et.pro_status)==="active",_s=React$2.useCallback(ds=>{const Gr={},bs=xs=>{var ms;for(const ls of xs)Gr[ls.type]=(Gr[ls.type]||0)+1,ls.type==="container"&&((ms=ls.children)!=null&&ms.length)&&bs(ls.children)};return bs(ds||[]),Gr},[]),As=React$2.useCallback(ds=>{const Gr=BLOCK_LIMITS[ds];return Gr?(_s(($t==null?void 0:$t.content_blocks)||[])[ds]||0)<Gr:!0},[$t==null?void 0:$t.content_blocks,_s]),Ns=React$2.useCallback((ds,Gr,bs)=>{kt(xs=>{const ms=xs.content_blocks.map((ls,ys)=>{if(ys!==ds)return ls;const ws=typeof bs=="function"?bs(ls[Gr]):bs;return{...ls,[Gr]:ws}});return{...xs,content_blocks:ms}})},[]),Is=ds=>{if(!ds)return;if(!Ds&&PRO_ONLY_BLOCKS.includes(ds)){y$4.error("This block is a Pro feature. Upgrade to Pro to unlock Audio, Calendly, and Reviews.");return}if(!As(ds)){y$4.error(`You can only add ${BLOCK_LIMITS[ds]} ${BLOCK_LABELS[ds]||ds} block`);return}let Gr={id:crypto.randomUUID(),type:ds,enabled:!0,padding:20,alignment:"left",bulleted:!1,collapsed:!0,motion:{disabled:!1,preset:null}};ds==="container"&&(Gr={id:crypto.randomUUID(),type:"container",title:"New Section",collapsed:!1,enabled:!0,children:[]}),["heading","subheading","subsubheading","paragraph","list_heading"].includes(ds)&&(Gr.text=""),ds==="video"&&(Gr.url="",Gr.caption="",Gr.autoplay=!1,Gr.loop=!1,Gr.muted=!1),(ds==="divider"||ds==="spacer")&&(Gr.height=40,Gr.style="line",Gr.color="rgba(255,255,255,0.2)",Gr.width="60%"),ds==="offer_banner"&&(Gr.text=" Limited Time Offer!",Gr.text_color="#000000",Gr.alignment="center",Gr.padding=20,Gr.use_gradient=!0,Gr.gradient_start="#F285C3",Gr.gradient_end="#7bed9f",Gr.gradient_direction="90deg",Gr.bg_color="#F285C3",Gr.offer_type="free",Gr.button_text="Claim Offer"),ds==="calendly"&&(Gr.calendly_url="",Gr.height=650),ds==="social_links"&&(Gr.alignment="center",Gr.icon_style="color",Gr.show_borders=!1,Gr.links={instagram:"",twitter:"",youtube:"",linkedin:"",facebook:"",tiktok:""}),ds==="countdown"&&(Gr.text="Offer Ends In:",Gr.text_color="#FFFFFF",Gr.target_date=new Date(Date.now()+7*24*60*60*1e3).toISOString(),Gr.alignment="center",Gr.style_variant="minimal"),ds==="stripe_checkout"&&(Gr.price=10,Gr.button_text="Buy & Download PDF",Gr.button_color="#7bed9f",Gr.alignment="center",Gr.collapsed=!1,Gr.product_source="internal",Gr.external_file_url="",Gr.external_file_name=""),ds==="referral_button"&&(Gr.text="Join The Messy Attic",Gr.button_color="#7bed9f",Gr.text_color="#000000",Gr.alignment="center",Gr.collapsed=!1),ds==="verified_reviews"&&(Gr.enabled=!0,Gr.collapsed=!1,Gr.reviews_text_color),ds==="faq"&&(Gr.title="Frequently Asked Questions",Gr.items=[{q:"What is included?",a:"Everything you need to get started."}],Gr.text_color="#FFFFFF",Gr.bg_color="rgba(0,0,0,0.3)",Gr.alignment="left"),ds==="image"&&(Gr.image_url="",Gr.caption="",Gr.padding=0,Gr.full_width=!1,Gr.alignment="center",Gr.radius=0,Gr.width=100,Gr.shadow=!1,Gr.shadow_color="rgba(0,0,0,0.5)",Gr.shadow_depth=25,Gr.shadow_offset=10,Gr.shadow_angle=135,Gr.match_main_bg=!1,Gr.use_no_bg=!1,Gr.use_gradient=!1,Gr.gradient_start="#F285C3",Gr.gradient_end="#7bed9f",Gr.gradient_direction="90deg",Gr.bg_color="#000000"),ds==="single_offer"&&(Gr.price=10,Gr.product_source="internal",Gr.external_file_url="",Gr.external_file_name="",Gr.image_url="",Gr.cover_url="",Gr.title="Offer One",Gr.text="Short description of this offer.",Gr.long_text="",Gr.use_long_description=!1,Gr.description_type="text",Gr.button_text="Buy Now",Gr.button_color="#22c55e",Gr.button_text_color="#000000",Gr.use_pdf_cover=!1,Gr.bg_color="rgba(0,0,0,0.4)",Gr.use_gradient=!1,Gr.text_color="#ffffff",Gr.card_width=360,Gr.card_height="auto"),ds==="mini_offer"&&(Gr.price=10,Gr.product_source="internal",Gr.product_name,Gr.page_count=null,Gr.external_file_url="",Gr.external_file_name="",Gr.image_url="",Gr.cover_url="",Gr.title="Offer One",Gr.text="Short description of this offer.",Gr.long_text="",Gr.use_long_description=!1,Gr.description_type="text",Gr.button_text="Buy Now",Gr.button_color="#22c55e",Gr.button_text_color="#000000",Gr.use_pdf_cover=!1,Gr.bg_color="rgba(0,0,0,0.4)",Gr.use_gradient=!1,Gr.text_color="#ffffff",Gr.secondary_text_color="#ffffff",Gr.utility_text_color="#ffffff",Gr.card_width=360,Gr.card_height="auto",Gr.offer_page={enabled:!1,blocks:[{id:"uuid",type:"paragraph",text:"",image_url:""}],bullets:[],trust_items:[]}),ds==="secure_checkout"&&(Gr.title="Secure Checkout",Gr.subtext="Your information is protected by industry leading encryption and secure payment processing.",Gr.trust_items=["Secure SSL Encryption","Protected Checkout Page","Safe Payment Processing"],Gr.guarantee="30 day money back guarantee on all purchases",Gr.payment_badge="",Gr.text_color="#FFFFFF",Gr.alignment="center",Gr.padding=0,Gr.bg_color="transparent",Gr.collapsed=!1),ds==="audio_player"&&(Gr.audio_url="",Gr.cover_url="",Gr.title="Untitled Track",Gr.progress_color="#22c55e",Gr.playlist=[],Gr.show_cover=!0,Gr.show_title=!0,Gr.alignment="center",Gr.match_main_bg=!1,Gr.use_gradient=!1,Gr.bg_color="#0F172A",Gr.gradient_start="#7bed9f",Gr.gradient_end="#22c55e",Gr.gradient_direction="90deg",Gr.text_color="#ffffff",Gr.sell_singles=!1,Gr.sell_album=!1,Gr.album_price="",Gr.single_price="",Gr.album_button_text="Buy Album",Gr.single_button_text="Buy Now",Gr.preview_enabled=!1,Gr.preview_duration=30,Gr.collapsed=!1),ds==="button_url"&&(Gr.text="Click Here",Gr.url="",Gr.open_new_tab=!0,Gr.alignment="center",Gr.width=220,Gr.height=48,Gr.padding_x=24,Gr.padding_y=12,Gr.radius=8,Gr.stroke_width=0,Gr.stroke_color="#000000",Gr.use_gradient=!1,Gr.bg_color="#22c55e",Gr.gradient_start="#22c55e",Gr.gradient_end="#3b82f6",Gr.gradient_direction="90deg",Gr.text_color="#000000",Gr.font_size=16,Gr.font_weight=600,Gr.shadow_offset_x=0,Gr.shadow_offset_y=8,Gr.shadow_blur=20,Gr.shadow_opacity=35,Gr.shadow_color="#000000"),ds==="profile_card"&&(Gr.alignment="center",Gr.image_url="",Gr.image_alt="",Gr.image_size=120,Gr.image_radius=999,Gr.image_border_width=1,Gr.image_border_color="#e5e7eb",Gr.tagline="Welcome",Gr.contact_type="email",Gr.contact_value="",Gr.tagline_color="#111827",Gr.subtext_color="#6b7280",Gr.show_image=!0,Gr.show_tagline=!0,Gr.show_contact=!0),ds==="scroll_arrow"&&(Gr.alignment="center",Gr.color="#FFFFFF",Gr.size=36,Gr.animated=!0,Gr.animation_type="bounce",Gr.animation_speed=1.2,Gr.arrow_style="single",Gr.stagger=.15),kt(bs=>({...bs,content_blocks:[...bs.content_blocks||[],Gr]})),es(!1)},zs=ds=>{const Gr=$t.content_blocks.filter((bs,xs)=>xs!==ds);kt({...$t,content_blocks:Gr})};async function Gs(){if(!($t!=null&&$t.id))return;const ds=await loadTemplateVersions($t.id);ds.success&&xr(ds.templates)}const Ws=async ds=>{const Gr=ds.target.value;if(Mr(Gr),!Gr)return;const bs=await fetchTemplateSnapshot(Gr);if(!bs.success){y$4.error("Could not load version");return}const xs=structuredClone(bs.snapshot);let ms=[];try{ms=Array.isArray(xs.content_blocks)?xs.content_blocks:JSON.parse(xs.content_blocks||"[]")}catch{ms=[]}ms=ms.map(ls=>({collapsed:ls.collapsed??!0,...ls})),xs.content_blocks=ms,kt({...xs,motion_settings:{...$t.motion_settings,...xs.motion_settings}}),y$4.success("Version loaded! (not yet applied)")},Qs=async()=>{try{const Gr=(await axiosInstance.get(`/landing/builder/${et.id}`)).data.landingPage;let bs=[];try{bs=typeof Gr.content_blocks=="string"?JSON.parse(Gr.content_blocks):Gr.content_blocks||[]}catch{bs=[]}bs=bs.map(xs=>({collapsed:xs.collapsed??!0,...xs})),kt({...Gr,content_blocks:bs,motion_settings:{...$t.motion_settings,...Gr.motion_settings}})}catch(ds){console.error(ds),y$4.error("Failed to refresh landing")}},qs=async()=>{if(!kr){y$4.error("Select a version first.");return}const ds=await fetchTemplateSnapshot(kr);if(!ds.success){y$4.error("Could not fetch snapshot.");return}(await restoreTemplate($t.id,ds.snapshot)).success?(y$4.success("Template restored successfully!"),Or(kr),Qs()):y$4.error("Failed to apply template")};async function Bs(){y$4.dismiss(),y$4(({closeToast:ds})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-100",children:"Delete this saved version?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:async()=>{try{(await deleteTemplate(kr)).success?(y$4.success("Version deleted.",{position:"bottom-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}}),Mr(""),Gs()):y$4.error("Failed to delete version.",{position:"bottom-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}catch(Gr){console.error("Delete error:",Gr),y$4.error("Error deleting version.",{position:"bottom-right",style:{background:"#0B0F19",color:"#E5E7EB",border:"1px solid #1F2937",borderRadius:"0.5rem"}})}finally{ds()}},className:"px-4 py-2 bg-red-600 text-white rounded-md text-xs font-semibold hover:bg-red-700 transition",children:"Delete"}),jsxRuntimeExports.jsx("button",{onClick:ds,className:"px-4 py-2 bg-gray-700 text-gray-200 rounded-md text-xs font-semibold hover:bg-gray-600 transition",children:"Cancel"})]})]}),{position:"bottom-right",autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,closeButton:!1,style:{background:"#0B0F19",border:"1px solid #1F2937",color:"#E5E7EB",borderRadius:"0.75rem",padding:"14px 18px",width:"340px",textAlign:"center",marginTop:"80px"}})}if(reactExports.useEffect(()=>{Gs()},[$t==null?void 0:$t.id]),reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),reactExports.useEffect(()=>{if(!(et!=null&&et.id))return;(async()=>{var Gr,bs,xs,ms,ls,ys,ws,Ss;try{const[Fs]=await Promise.all([axiosInstance.get(`/landing/builder/${et.id}`)]),vs=Fs.data.landingPage;let as=[];try{as=typeof vs.content_blocks=="string"?JSON.parse(vs.content_blocks):vs.content_blocks||[]}catch{as=[]}as=as.map(Rs=>({...Rs,collapsed:Rs.collapsed??!0,motion:Rs.motion??{disabled:!1,preset:null}}));const js={enabled:((Gr=vs.motion_settings)==null?void 0:Gr.enabled)??!1,preset:((bs=vs.motion_settings)==null?void 0:bs.preset)??"fade-up",duration:((xs=vs.motion_settings)==null?void 0:xs.duration)??.5,delay:((ms=vs.motion_settings)==null?void 0:ms.delay)??0,stagger:((ls=vs.motion_settings)==null?void 0:ls.stagger)??.12,easing:((ys=vs.motion_settings)==null?void 0:ys.easing)??"ease-out",viewport_once:((ws=vs.motion_settings)==null?void 0:ws.viewport_once)??!0,panel_open:((Ss=vs.motion_settings)==null?void 0:Ss.panel_open)??!1};kt({...vs,motion_settings:js,content_blocks:as}),Ut(vs.font||"Montserrat"),Kt(vs.font_file||""),typeof vs.show_download_button=="boolean"&&ir(vs.show_download_button),vs.cover_image_url&&er(vs.cover_image_url),Jt(vs.bg_theme||"linear-gradient(to bottom, #ffffff, #F285C3)")}catch(Fs){console.error(Fs),y$4.error("Failed to load landing data")}finally{Dt(!1)}})()},[et]),reactExports.useEffect(()=>{const ds=Gr=>{Gr.target.closest(".add-section-dropdown")||es(!1)};return document.addEventListener("click",ds),()=>document.removeEventListener("click",ds)},[]),Tt)return jsxRuntimeExports.jsxs("div",{className:`
      flex flex-col items-center justify-center min-h-screen 
      bg-dashboard-bg-light dark:bg-dashboard-bg-dark
      text-dashboard-text-light dark:text-dashboard-text-dark
    `,children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:`
          absolute inset-0 rounded-full
          bg-dashboard-muted-light/20 dark:bg-dashboard-muted-dark/20
          blur-2xl animate-ping
        `}),jsxRuntimeExports.jsx("div",{className:`
          w-16 h-16
          border-4
          border-dashboard-border-light dark:border-dashboard-border-dark
          border-t-green
          rounded-full
          animate-spin
        `})]}),jsxRuntimeExports.jsx("p",{className:`
        mt-6 text-lg font-semibold tracking-wide animate-pulse
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:"Building your page..."}),jsxRuntimeExports.jsx("p",{className:`
        text-sm mt-2
        text-dashboard-muted-light dark:text-dashboard-muted-dark
      `,children:"The Messy Attic is fetching your latest content blocks."})]});if(!Tt&&(et==null?void 0:et.pro_status)!=="active")return jsxRuntimeExports.jsxs("div",{className:"text-center mt-20 text-gray-400",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"Upgrade Required"}),jsxRuntimeExports.jsxs("p",{className:"mt-2",children:["This feature is available only for PRO members.",jsxRuntimeExports.jsx("a",{href:"/plans",className:"text-[#F285C3] underline ml-1 hover:text-[#e070ad]",children:"Upgrade now"})]})]});if(!$t)return jsxRuntimeExports.jsxs("div",{className:"text-center mt-20 text-gray-400",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"No Landing Page Found"}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:"We couldnt load your landing page data."})]});const Js=ds=>{if(!ds)return!0;const Gr=/^(https?:\/\/)?(www\.)?(youtube\.com\/(watch\?v=|embed\/|shorts\/)|youtu\.be\/)[\w-]{11}($|[?&])/,bs=/^(https?:\/\/)?(www\.)?(vimeo\.com\/(\d{6,12}|video\/\d{6,12}))($|[?&])/;return Gr.test(ds)||bs.test(ds)},Ys=async ds=>{var bs;const Gr=(bs=ds==null?void 0:ds.nativeEvent)==null?void 0:bs.submitter;if(!Gr||Gr.name!=="save-landing"){ds.preventDefault();return}ds.preventDefault();try{let xs=$t.content_blocks;if(typeof xs=="string")try{xs=JSON.parse(xs)}catch{console.warn("Invalid content_blocks string, resetting to []"),xs=[]}const ms=xs.filter(ls=>ls.type==="video"&&ls.url&&!Js(ls.url)).map((ls,ys)=>`Video Block ${ys+1}`);if(ms.length>0){y$4.error(`Invalid video URLs in: ${ms.join(", ")}. Please use YouTube or Vimeo links.`);return}xs=xs.map(ls=>ls.type==="video"?{...ls,url:normalizeVideoUrl(ls.url)}:ls),await axiosInstance.put(`https://themessyattic.com/api/landing/update/${$t.id}`,{...$t,font:Ft,font_file:Ht,content_blocks:xs,pdf_url:$t.pdf_url,cover_image_url:$t.cover_image_url,logo_url:$t.logo_url,show_download_button:nr,motion_settings:$t.motion_settings}),y$4.success("Landing page saved successfully!")}catch(xs){console.error(xs),y$4.error("Error saving landing page")}},ln=()=>{if(kr){const ds=Rr.find(Gr=>Gr.id===kr);ds&&wr(ds.name)}else wr(`Version ${Rr.length+1}`);Pr(!0)},Pn=async()=>{const ds=br.trim();if(!ds){y$4.error("Please enter a name");return}const Gr=Ds?30:10;if(!kr&&Rr.length>=Gr){y$4.error(Ds?"Youve reached the maximum of 30 saved versions.":"Free accounts can save up to 10 versions. Upgrade to Pro to save more.");return}const bs=Rr.find(ms=>ms.name===ds);let xs;bs?xs=await saveTemplate($t.id,ds,$t,bs.id):xs=await saveTemplate($t.id,ds,$t),xs.success?(y$4.success(bs?"Version updated!":"New version saved!",{position:"bottom-right"}),Gs(),Pr(!1),wr("")):y$4.error("Could not save version.",{position:"bottom-right"})},Qn=Yt!=null&&Yt.includes("gradient")||Yt!=null&&Yt.startsWith("#")?Yt:((Os=[...colorThemes,...gradientThemes].find(ds=>ds.name===Yt))==null?void 0:Os.preview)||"linear-gradient(to bottom, #ffffff, #F285C3)";return jsxRuntimeExports.jsxs("div",{className:`
    min-h-screen
    p-1 sm:p-6 md:p-10
    overflow-y-scroll
    bg-dashboard-bg-light dark:bg-dashboard-bg-dark
    text-dashboard-text-light dark:text-dashboard-text-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:`
    max-w-4xl mx-auto
    rounded-2xl
    p-3 sm:p-8
    shadow-lg
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    border border-dashboard-border-light dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsxs("h1",{className:`
    text-2xl font-extrabold text-center mb-8
    flex items-center justify-center gap-3
    text-dashboard-text-light dark:text-dashboard-text-dark
  `,children:[jsxRuntimeExports.jsx(WandSparkles,{className:"w-6 h-6 text-dashboard-accent-light dark:text-dashboard-accent-dark"}),"Landing Page Builder"]}),jsxRuntimeExports.jsxs("form",{onSubmit:Ys,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageUrlUsernameField,{landing:$t,setLanding:kt}),jsxRuntimeExports.jsx(VersionControls,{versions:Rr,selectedVersion:kr,setSelectedVersion:Mr,appliedVersion:Tr,handleLoadVersion:Ws,handleApplyVersion:qs,handleDeleteVersion:Bs}),jsxRuntimeExports.jsx("h1",{className:`
              text-2xl font-extrabold text-center mb-8
              text-dashboard-text-light dark:text-dashboard-text-dark
              flex items-center justify-center gap-3
            `,children:"Page Builder"}),jsxRuntimeExports.jsx("div",{className:"flex justify-end mb-6",children:jsxRuntimeExports.jsx(AddSectionButton,{addBlock:Is,canAddBlock:As})}),Ds?jsxRuntimeExports.jsx(AnimationSettingsPanel,{landing:$t,setLanding:kt}):jsxRuntimeExports.jsxs("div",{className:`
                relative mb-4 rounded-lg
                border border-dashboard-border-light dark:border-dashboard-border-dark
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                min-h-[160px]
              `,children:[jsxRuntimeExports.jsx("div",{className:"pointer-events-none blur-sm opacity-60",children:jsxRuntimeExports.jsx(AnimationSettingsPanel,{landing:$t,setLanding:kt})}),jsxRuntimeExports.jsx("div",{className:`
                    absolute inset-0
                    flex items-center justify-center
                    rounded-lg
                    bg-dashboard-bg-light/80 dark:bg-dashboard-bg-dark/80
                    py-8
                  `,children:jsxRuntimeExports.jsxs("div",{className:"max-w-sm text-center px-6",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold mb-2 text-dashboard-text-light dark:text-dashboard-text-dark",children:"Animation Settings"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Animate blocks on scroll, control motion presets, delays, stagger effects, and easing."}),jsxRuntimeExports.jsx("button",{onClick:()=>dt("/plans"),className:"px-5 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700 font-semibold text-sm",children:"Unlock with Pro"})]})})]}),jsxRuntimeExports.jsxs("div",{onClick:()=>Hr(!zr),className:`
              cursor-pointer
              px-4 py-3 mb-4
              rounded-lg
              flex justify-between items-center
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
            `,children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:zr?"Open All Blocks":"Hide All Blocks"}),jsxRuntimeExports.jsx("span",{className:`transform transition-transform ${zr?"rotate-0":"rotate-180"}`,children:""})]}),!zr&&jsxRuntimeExports.jsx("div",{className:`
                space-y-4 mb-12 w-full
                rounded-xl p-5 shadow-inner
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
              `,children:$t.content_blocks.filter(ds=>ds&&ds.type).map((ds,Gr)=>jsxRuntimeExports.jsx(React$2.Fragment,{children:jsxRuntimeExports.jsx(MemoizedSortableBlock,{id:ds.id,block:ds,index:Gr,updateBlock:Ns,removeBlock:zs,moveBlockUp:gs,moveBlockDown:us,moveChildUp:ps,moveChildDown:cs,activeChild:or,setActiveChild:lr,setActiveRoot:dr,activeRoot:cr,removeFromContainer:ss,bgTheme:Yt,landing:$t,openAIModal:ns,offerContext:$t==null?void 0:$t.offer_context})},ds.id))})]}),Ds?jsxRuntimeExports.jsx(LogoUploader,{landing:$t,setLanding:kt,showLogoSection:mr,setShowLogoSection:jr}):jsxRuntimeExports.jsxs("div",{className:`
              mt-6 p-4 rounded-xl text-center
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
            `,children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:["Custom branding is a"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Pro"})," feature"]}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Upgrade to Pro to upload and display your brand logo."}),jsxRuntimeExports.jsx("a",{href:"/plans",className:"inline-block mt-3 text-sm px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition",children:"Upgrade to Pro"})]}),jsxRuntimeExports.jsx(ThemeAndFontControls,{landing:$t,setLanding:kt,bgTheme:Yt,setBgTheme:Jt,fontName:Ft,setFontName:Ut,fontFile:Ht,setFontFile:Kt,isPro:Ds}),jsxRuntimeExports.jsx(TextColorControls,{landing:$t,setLanding:kt}),jsxRuntimeExports.jsx(PreviewPanel,{showPreviewSection:rr,setShowPreviewSection:sr,landing:$t,selectedTheme:Qn,fontName:Ft,bgTheme:Yt,user:et,updateBlock:Ns,adjustForLandingOverlay,blendColors}),jsxRuntimeExports.jsx(BottomActionsBar,{landing:$t,user:et,handleSaveTemplate:ln})]})]}),jsxRuntimeExports.jsx(SaveVersionModal,{isOpen:_r,name:br,setName:wr,onCancel:()=>{Pr(!1),wr("")},onConfirm:Pn}),rs&&jsxRuntimeExports.jsx(AICopyModal,{aiContext:rs,onApply:ds=>{if(!(ds!=null&&ds.trim()))return;const{blockType:Gr,blockIndex:bs,containerIndex:xs,updateChildBlock:ms}=rs;if(Gr==="faq"){const ls=ds.split(/\n\s*\n/).map(ys=>{const ws=ys.match(/Q:\s*(.+)/i),Ss=ys.match(/A:\s*(.+)/i);return!ws||!Ss?null:{q:ws[1].trim(),a:Ss[1].trim(),open:!1}}).filter(Boolean);xs!==void 0?ms(bs,"items",ls):Ns(bs,"items",ls)}else Gr==="offer_long_description"?xs!==void 0?(ms(bs,"long_text",ds),ms(bs,"use_long_description",!0)):(Ns(bs,"long_text",ds),Ns(bs,"use_long_description",!0)):xs!==void 0&&typeof ms=="function"?ms(bs,"text",ds):Ns(bs,"text",ds);Wr(null)},onClose:()=>Wr(null)}),or&&jsxRuntimeExports.jsxs("div",{className:`
      fixed bottom-4 left-1/2 -translate-x-1/2 z-50
      flex gap-4 bg-green/90 px-4 py-3 rounded-full
      shadow-xl
    `,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ps(or.containerIndex,or.childId),className:"text-black text-xl px-3",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>cs(or.containerIndex,or.childId),className:"text-black text-xl px-3",children:""}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{ss(or.containerIndex,or.childId),lr(null)},className:"text-black text-sm px-3",children:"Remove"})]}),Xr&&jsxRuntimeExports.jsxs("div",{className:`
      fixed bottom-4 left-1/2 -translate-x-1/2 z-50
      flex gap-3 bg-green/90 px-4 py-3 rounded-full
      shadow-xl
    `,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>pr(!0),className:"text-black text-sm px-3",children:"Move into section"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dr(null),className:"text-black text-sm px-3",children:"Cancel"})]}),ur&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0f1624] rounded-xl p-5 w-80",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Move into section"}),$t.content_blocks.filter(ds=>ds.type==="container").map((ds,Gr)=>jsxRuntimeExports.jsx("button",{onClick:()=>{pr(!1),fs(cr.blockIndex,Gr),dr(null)},className:"w-full text-left px-3 py-2 rounded hover:bg-white/10 text-white text-sm",children:ds.title||"Untitled Section"},ds.id)),jsxRuntimeExports.jsx("button",{onClick:()=>pr(!1),className:"mt-3 text-sm text-gray-400",children:"Cancel"})]})})]})}var updateQueue$5=makeQueue$5(),raf$5=et=>schedule$5(et,updateQueue$5),writeQueue$5=makeQueue$5();raf$5.write=et=>schedule$5(et,writeQueue$5);var onStartQueue$5=makeQueue$5();raf$5.onStart=et=>schedule$5(et,onStartQueue$5);var onFrameQueue$5=makeQueue$5();raf$5.onFrame=et=>schedule$5(et,onFrameQueue$5);var onFinishQueue$5=makeQueue$5();raf$5.onFinish=et=>schedule$5(et,onFinishQueue$5);var timeouts$5=[];raf$5.setTimeout=(et,dt)=>{const $t=raf$5.now()+dt,kt=()=>{const Dt=timeouts$5.findIndex(Ft=>Ft.cancel==kt);~Dt&&timeouts$5.splice(Dt,1),pendingCount$5-=~Dt?1:0},Tt={time:$t,handler:et,cancel:kt};return timeouts$5.splice(findTimeout$5($t),0,Tt),pendingCount$5+=1,start$5(),Tt};var findTimeout$5=et=>~(~timeouts$5.findIndex(dt=>dt.time>et)||~timeouts$5.length);raf$5.cancel=et=>{onStartQueue$5.delete(et),onFrameQueue$5.delete(et),onFinishQueue$5.delete(et),updateQueue$5.delete(et),writeQueue$5.delete(et)};raf$5.sync=et=>{sync$5=!0,raf$5.batchedUpdates(et),sync$5=!1};raf$5.throttle=et=>{let dt;function $t(){try{et(...dt)}finally{dt=null}}function kt(...Tt){dt=Tt,raf$5.onStart($t)}return kt.handler=et,kt.cancel=()=>{onStartQueue$5.delete($t),dt=null},kt};var nativeRaf$5=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$5.use=et=>nativeRaf$5=et;raf$5.now=typeof performance<"u"?()=>performance.now():Date.now;raf$5.batchedUpdates=et=>et();raf$5.catch=console.error;raf$5.frameLoop="always";raf$5.advance=()=>{raf$5.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$5()};var ts$5=-1,pendingCount$5=0,sync$5=!1;function schedule$5(et,dt){sync$5?(dt.delete(et),et(0)):(dt.add(et),start$5())}function start$5(){ts$5<0&&(ts$5=0,raf$5.frameLoop!=="demand"&&nativeRaf$5(loop$5))}function stop$5(){ts$5=-1}function loop$5(){~ts$5&&(nativeRaf$5(loop$5),raf$5.batchedUpdates(update$5))}function update$5(){const et=ts$5;ts$5=raf$5.now();const dt=findTimeout$5(ts$5);if(dt&&(eachSafely$5(timeouts$5.splice(0,dt),$t=>$t.handler()),pendingCount$5-=dt),!pendingCount$5){stop$5();return}onStartQueue$5.flush(),updateQueue$5.flush(et?Math.min(64,ts$5-et):16.667),onFrameQueue$5.flush(),writeQueue$5.flush(),onFinishQueue$5.flush()}function makeQueue$5(){let et=new Set,dt=et;return{add($t){pendingCount$5+=dt==et&&!et.has($t)?1:0,et.add($t)},delete($t){return pendingCount$5-=dt==et&&et.has($t)?1:0,et.delete($t)},flush($t){dt.size&&(et=new Set,pendingCount$5-=dt.size,eachSafely$5(dt,kt=>kt($t)&&et.add(kt)),pendingCount$5+=et.size,dt=et)}}}function eachSafely$5(et,dt){et.forEach($t=>{try{dt($t)}catch(kt){raf$5.catch(kt)}})}var __defProp$5=Object.defineProperty,__export$5=(et,dt)=>{for(var $t in dt)__defProp$5(et,$t,{get:dt[$t],enumerable:!0})},globals_exports$5={};__export$5(globals_exports$5,{assign:()=>assign$5,colors:()=>colors$6,createStringInterpolator:()=>createStringInterpolator$5,skipAnimation:()=>skipAnimation$5,to:()=>to$7,willAdvance:()=>willAdvance$5});function noop$8(){}var defineHidden$5=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),is$5={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$6(et,dt){if(is$5.arr(et)){if(!is$5.arr(dt)||et.length!==dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(et[$t]!==dt[$t])return!1;return!0}return et===dt}var each$5=(et,dt)=>et.forEach(dt);function eachProp$5(et,dt,$t){if(is$5.arr(et)){for(let kt=0;kt<et.length;kt++)dt.call($t,et[kt],`${kt}`);return}for(const kt in et)et.hasOwnProperty(kt)&&dt.call($t,et[kt],kt)}var toArray$5=et=>is$5.und(et)?[]:is$5.arr(et)?et:[et];function flush$4(et,dt){if(et.size){const $t=Array.from(et);et.clear(),each$5($t,dt)}}var flushCalls$4=(et,...dt)=>flush$4(et,$t=>$t(...dt)),isSSR$5=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$5,to$7,colors$6=null,skipAnimation$5=!1,willAdvance$5=noop$8,assign$5=et=>{et.to&&(to$7=et.to),et.now&&(raf$5.now=et.now),et.colors!==void 0&&(colors$6=et.colors),et.skipAnimation!=null&&(skipAnimation$5=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$5=et.createStringInterpolator),et.requestAnimationFrame&&raf$5.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$5.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$5=et.willAdvance),et.frameLoop&&(raf$5.frameLoop=et.frameLoop)},startQueue$5=new Set,currentFrame$5=[],prevFrame$5=[],priority$5=0,frameLoop$5={get idle(){return!startQueue$5.size&&!currentFrame$5.length},start(et){priority$5>et.priority?(startQueue$5.add(et),raf$5.onStart(flushStartQueue$5)):(startSafely$5(et),raf$5(advance$5))},advance:advance$5,sort(et){if(priority$5)raf$5.onFrame(()=>frameLoop$5.sort(et));else{const dt=currentFrame$5.indexOf(et);~dt&&(currentFrame$5.splice(dt,1),startUnsafely$5(et))}},clear(){currentFrame$5=[],startQueue$5.clear()}};function flushStartQueue$5(){startQueue$5.forEach(startSafely$5),startQueue$5.clear(),raf$5(advance$5)}function startSafely$5(et){currentFrame$5.includes(et)||startUnsafely$5(et)}function startUnsafely$5(et){currentFrame$5.splice(findIndex$5(currentFrame$5,dt=>dt.priority>et.priority),0,et)}function advance$5(et){const dt=prevFrame$5;for(let $t=0;$t<currentFrame$5.length;$t++){const kt=currentFrame$5[$t];priority$5=kt.priority,kt.idle||(willAdvance$5(kt),kt.advance(et),kt.idle||dt.push(kt))}return priority$5=0,prevFrame$5=currentFrame$5,prevFrame$5.length=0,currentFrame$5=dt,currentFrame$5.length>0}function findIndex$5(et,dt){const $t=et.findIndex(dt);return $t<0?et.length:$t}var clamp$4=(et,dt,$t)=>Math.min(Math.max($t,et),dt),colors2$5={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$5="[-+]?\\d*\\.?\\d+",PERCENTAGE$5=NUMBER$5+"%";function call$5(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$7=new RegExp("rgb"+call$5(NUMBER$5,NUMBER$5,NUMBER$5)),rgba$6=new RegExp("rgba"+call$5(NUMBER$5,NUMBER$5,NUMBER$5,NUMBER$5)),hsl$6=new RegExp("hsl"+call$5(NUMBER$5,PERCENTAGE$5,PERCENTAGE$5)),hsla$6=new RegExp("hsla"+call$5(NUMBER$5,PERCENTAGE$5,PERCENTAGE$5,NUMBER$5)),hex3$5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$5=/^#([0-9a-fA-F]{6})$/,hex8$5=/^#([0-9a-fA-F]{8})$/;function normalizeColor$5(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$5.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$6&&colors$6[et]!==void 0?colors$6[et]:(dt=rgb$7.exec(et))?(parse255$5(dt[1])<<24|parse255$5(dt[2])<<16|parse255$5(dt[3])<<8|255)>>>0:(dt=rgba$6.exec(et))?(parse255$5(dt[1])<<24|parse255$5(dt[2])<<16|parse255$5(dt[3])<<8|parse1$5(dt[4]))>>>0:(dt=hex3$5.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$5.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$5.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$6.exec(et))?(hslToRgb$5(parse360$5(dt[1]),parsePercentage$5(dt[2]),parsePercentage$5(dt[3]))|255)>>>0:(dt=hsla$6.exec(et))?(hslToRgb$5(parse360$5(dt[1]),parsePercentage$5(dt[2]),parsePercentage$5(dt[3]))|parse1$5(dt[4]))>>>0:null}function hue2rgb$5(et,dt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?et+(dt-et)*6*$t:$t<1/2?dt:$t<2/3?et+(dt-et)*(2/3-$t)*6:et}function hslToRgb$5(et,dt,$t){const kt=$t<.5?$t*(1+dt):$t+dt-$t*dt,Tt=2*$t-kt,Dt=hue2rgb$5(Tt,kt,et+1/3),Ft=hue2rgb$5(Tt,kt,et),Ut=hue2rgb$5(Tt,kt,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$5(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$5(et){return(parseFloat(et)%360+360)%360/360}function parse1$5(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$5(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$5(et){let dt=normalizeColor$5(et);if(dt===null)return et;dt=dt||0;const $t=(dt&4278190080)>>>24,kt=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${$t}, ${kt}, ${Tt}, ${Dt})`}var createInterpolator$5=(et,dt,$t)=>{if(is$5.fun(et))return et;if(is$5.arr(et))return createInterpolator$5({range:et,output:dt,extrapolate:$t});if(is$5.str(et.output[0]))return createStringInterpolator$5(et);const kt=et,Tt=kt.output,Dt=kt.range||[0,1],Ft=kt.extrapolateLeft||kt.extrapolate||"extend",Ut=kt.extrapolateRight||kt.extrapolate||"extend",Ht=kt.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$5(Kt,Dt);return interpolate$6(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,kt.map)}};function interpolate$6(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>$t){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=$t)}return kt===Tt?kt:dt===$t?et<=dt?kt:Tt:(dt===-1/0?Kt=-Kt:$t===1/0?Kt=Kt-dt:Kt=(Kt-dt)/($t-dt),Kt=Dt(Kt),kt===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+kt:Kt=Kt*(Tt-kt)+kt,Kt)}function findRange$5(et,dt){for(var $t=1;$t<dt.length-1&&!(dt[$t]>=et);++$t);return $t-1}var steps$4=(et,dt="end")=>$t=>{$t=dt==="end"?Math.min($t,.999):Math.max($t,.001);const kt=$t*et,Tt=dt==="end"?Math.floor(kt):Math.ceil(kt);return clamp$4(0,1,Tt/et)},c1$4=1.70158,c2$4=c1$4*1.525,c3$4=c1$4+1,c4$4=2*Math.PI/3,c5$4=2*Math.PI/4.5,bounceOut$4=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings$4={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3$4*et*et*et-c1$4*et*et,easeOutBack:et=>1+c3$4*Math.pow(et-1,3)+c1$4*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2$4+1)*2*et-c2$4)/2:(Math.pow(2*et-2,2)*((c2$4+1)*(et*2-2)+c2$4)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4$4),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4$4)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5$4))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5$4)/2+1,easeInBounce:et=>1-bounceOut$4(1-et),easeOutBounce:bounceOut$4,easeInOutBounce:et=>et<.5?(1-bounceOut$4(1-2*et))/2:(1+bounceOut$4(2*et-1))/2,steps:steps$4},$get$5=Symbol.for("FluidValue.get"),$observers$5=Symbol.for("FluidValue.observers"),hasFluidValue$5=et=>!!(et&&et[$get$5]),getFluidValue$5=et=>et&&et[$get$5]?et[$get$5]():et,getFluidObservers$4=et=>et[$observers$5]||null;function callFluidObserver$5(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$5(et,dt){const $t=et[$observers$5];$t&&$t.forEach(kt=>{callFluidObserver$5(kt,dt)})}var FluidValue$5=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$5(this,dt)}},setFluidGetter$5=(et,dt)=>setHidden$5(et,$get$5,dt);function addFluidObserver$5(et,dt){if(et[$get$5]){let $t=et[$observers$5];$t||setHidden$5(et,$observers$5,$t=new Set),$t.has(dt)||($t.add(dt),et.observerAdded&&et.observerAdded($t.size,dt))}return dt}function removeFluidObserver$5(et,dt){const $t=et[$observers$5];if($t&&$t.has(dt)){const kt=$t.size-1;kt?$t.delete(dt):et[$observers$5]=null,et.observerRemoved&&et.observerRemoved(kt,dt)}}var setHidden$5=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),numberRegex$5=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$5=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$5=new RegExp(`(${numberRegex$5.source})(%|[a-z]+)`,"i"),rgbaRegex$5=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$5=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$5=et=>{const[dt,$t]=parseCSSVariable$5(et);if(!dt||isSSR$5())return et;const kt=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if(kt)return kt.trim();if($t&&$t.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue($t);return Tt||et}else{if($t&&cssVariableRegex$5.test($t))return variableToRgba$5($t);if($t)return $t}return et},parseCSSVariable$5=et=>{const dt=cssVariableRegex$5.exec(et);if(!dt)return[,];const[,$t,kt]=dt;return[$t,kt]},namedColorRegex$5,rgbaRound$5=(et,dt,$t,kt,Tt)=>`rgba(${Math.round(dt)}, ${Math.round($t)}, ${Math.round(kt)}, ${Tt})`,createStringInterpolator2$5=et=>{namedColorRegex$5||(namedColorRegex$5=colors$6?new RegExp(`(${Object.keys(colors$6).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$5(Dt).replace(cssVariableRegex$5,variableToRgba$5).replace(colorRegex$5,colorToRgba$5).replace(namedColorRegex$5,colorToRgba$5)),$t=dt.map(Dt=>Dt.match(numberRegex$5).map(Number)),Tt=$t[0].map((Dt,Ft)=>$t.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$5({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$5.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$5.test(Kt)))==null?void 0:Ht.replace(numberRegex$5,""));let Ut=0;return dt[0].replace(numberRegex$5,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$5,rgbaRound$5)}},prefix$5="react-spring: ",once$5=et=>{const dt=et;let $t=!1;if(typeof dt!="function")throw new TypeError(`${prefix$5}once requires a function parameter`);return(...kt)=>{$t||(dt(...kt),$t=!0)}},warnInterpolate$5=once$5(console.warn);function deprecateInterpolate$5(){warnInterpolate$5(`${prefix$5}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall$4=once$5(console.warn);function deprecateDirectCall$4(){warnDirectCall$4(`${prefix$5}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString$5(et){return is$5.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$5()&&cssVariableRegex$5.test(et)||et in(colors$6||{}))}var useIsomorphicLayoutEffect$5=isSSR$5()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$5=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$5(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$5(){const et=reactExports.useState()[1],dt=useIsMounted$5();return()=>{dt.current&&et(Math.random())}}var useOnce$5=et=>reactExports.useEffect(et,emptyDeps$5),emptyDeps$5=[];function usePrev$4(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node$5=Symbol.for("Animated:node"),isAnimated$5=et=>!!et&&et[$node$5]===et,getAnimated$5=et=>et&&et[$node$5],setAnimated$5=(et,dt)=>defineHidden$5(et,$node$5,dt),getPayload$5=et=>et&&et[$node$5]&&et[$node$5].getPayload(),Animated$5=class{constructor(){setAnimated$5(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$5=class z_ extends Animated$5{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$5.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new z_(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,$t){return is$5.num(dt)&&(this.lastPosition=dt,$t&&(dt=Math.round(dt/$t)*$t,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$5.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$5=class U_ extends AnimatedValue$5{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$5({output:[dt,dt]})}static create(dt){return new U_(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$5.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$5({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$5={dependencies:null},AnimatedObject$5=class extends Animated$5{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const $t={};return eachProp$5(this.source,(kt,Tt)=>{isAnimated$5(kt)?$t[Tt]=kt.getValue(dt):hasFluidValue$5(kt)?$t[Tt]=getFluidValue$5(kt):dt||($t[Tt]=kt)}),$t}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$5(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const $t=new Set;return eachProp$5(dt,this._addToPayload,$t),Array.from($t)}}_addToPayload(dt){TreeContext$5.dependencies&&hasFluidValue$5(dt)&&TreeContext$5.dependencies.add(dt);const $t=getPayload$5(dt);$t&&each$5($t,kt=>this.add(kt))}},AnimatedArray$5=class H_ extends AnimatedObject$5{constructor(dt){super(dt)}static create(dt){return new H_(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const $t=this.getPayload();return dt.length==$t.length?$t.map((kt,Tt)=>kt.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$5)),!0)}};function makeAnimated$5(et){return(isAnimatedString$5(et)?AnimatedString$5:AnimatedValue$5).create(et)}function getAnimatedType$5(et){const dt=getAnimated$5(et);return dt?dt.constructor:is$5.arr(et)?AnimatedArray$5:isAnimatedString$5(et)?AnimatedString$5:AnimatedValue$5}var withAnimated$5=(et,dt)=>{const $t=!is$5.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef((kt,Tt)=>{const Dt=reactExports.useRef(null),Ft=$t&&reactExports.useCallback(rr=>{Dt.current=updateRef$5(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$5(kt,dt),Kt=useForceUpdate$5(),Yt=()=>{const rr=Dt.current;if($t&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$5(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$5(()=>(Zt.current=Jt,each$5(Ht,rr=>addFluidObserver$5(rr,Jt)),()=>{Zt.current&&(each$5(Zt.current.deps,rr=>removeFluidObserver$5(rr,Zt.current)),raf$5.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$5(()=>()=>{const rr=Zt.current;each$5(rr.deps,sr=>removeFluidObserver$5(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$5=class{constructor(dt,$t){this.update=dt,this.deps=$t}eventObserved(dt){dt.type=="change"&&raf$5.write(this.update)}};function getAnimatedState$5(et,dt){const $t=new Set;return TreeContext$5.dependencies=$t,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$5(et),TreeContext$5.dependencies=null,[et,$t]}function updateRef$5(et,dt){return et&&(is$5.fun(et)?et(dt):et.current=dt),dt}var cacheKey$5=Symbol.for("AnimatedComponent"),createHost$5=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:$t=Tt=>new AnimatedObject$5(Tt),getComponentProps:kt=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:$t,getComponentProps:kt},Dt=Ft=>{const Ut=getDisplayName$5(Ft)||"Anonymous";return is$5.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$5(Ft,Tt)):Ft=Ft[cacheKey$5]||(Ft[cacheKey$5]=withAnimated$5(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$5(et,(Ft,Ut)=>{is$5.arr(et)&&(Ut=getDisplayName$5(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$5=et=>is$5.str(et)?et:et&&is$5.str(et.displayName)?et.displayName:is$5.fun(et)&&et.name||null;function callProp$4(et,...dt){return is$5.fun(et)?et(...dt):et}var matchProp$4=(et,dt)=>et===!0||!!(dt&&et&&(is$5.fun(et)?et(dt):toArray$5(et).includes(dt))),resolveProp$4=(et,dt)=>is$5.obj(et)?dt&&et[dt]:et,getDefaultProp$4=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform$4=et=>et,getDefaultProps$4=(et,dt=noopTransform$4)=>{let $t=DEFAULT_PROPS$4;et.default&&et.default!==!0&&(et=et.default,$t=Object.keys(et));const kt={};for(const Tt of $t){const Dt=dt(et[Tt],Tt);is$5.und(Dt)||(kt[Tt]=Dt)}return kt},DEFAULT_PROPS$4=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$4={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps$4(et){const dt={};let $t=0;if(eachProp$5(et,(kt,Tt)=>{RESERVED_PROPS$4[Tt]||(dt[Tt]=kt,$t++)}),$t)return dt}function inferTo$4(et){const dt=getForwardProps$4(et);if(dt){const $t={to:dt};return eachProp$5(et,(kt,Tt)=>Tt in dt||($t[Tt]=kt)),$t}return{...et}}function computeGoal$4(et){return et=getFluidValue$5(et),is$5.arr(et)?et.map(computeGoal$4):isAnimatedString$5(et)?globals_exports$5.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps$4(et){for(const dt in et)return!0;return!1}function isAsyncTo$4(et){return is$5.fun(et)||is$5.arr(et)&&is$5.obj(et[0])}function detachRefs$4(et,dt){var $t;($t=et.ref)==null||$t.delete(et),dt==null||dt.delete(et)}function replaceRef$4(et,dt){var $t;dt&&et.ref!==dt&&(($t=et.ref)==null||$t.delete(et),dt.add(et),et.ref=dt)}var config$4={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults$4={...config$4.default,mass:1,damping:1,easing:easings$4.linear,clamp:!1},AnimationConfig$4=class{constructor(){this.velocity=0,Object.assign(this,defaults$4)}};function mergeConfig$4(et,dt,$t){$t&&($t={...$t},sanitizeConfig$4($t,dt),dt={...$t,...dt}),sanitizeConfig$4(et,dt),Object.assign(et,dt);for(const Ft in defaults$4)et[Ft]==null&&(et[Ft]=defaults$4[Ft]);let{frequency:kt,damping:Tt}=et;const{mass:Dt}=et;return is$5.und(kt)||(kt<.01&&(kt=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/kt,2)*Dt,et.friction=4*Math.PI*Tt*Dt/kt),et}function sanitizeConfig$4(et,dt){if(!is$5.und(dt.decay))et.duration=void 0;else{const $t=!is$5.und(dt.tension)||!is$5.und(dt.friction);($t||!is$5.und(dt.frequency)||!is$5.und(dt.damping)||!is$5.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),$t&&(et.frequency=void 0)}}var emptyArray$4=[],Animation$4=class{constructor(){this.changed=!1,this.values=emptyArray$4,this.toValues=null,this.fromValues=emptyArray$4,this.config=new AnimationConfig$4,this.immediate=!1}};function scheduleProps$4(et,{key:dt,props:$t,defaultProps:kt,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp$4($t.cancel??(kt==null?void 0:kt.cancel),dt);if(Yt)er();else{is$5.und($t.pause)||(Tt.paused=matchProp$4($t.pause,dt));let rr=kt==null?void 0:kt.pause;rr!==!0&&(rr=Tt.paused||matchProp$4(rr,dt)),Ht=callProp$4($t.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf$5.now()}function Zt(){Ht>0&&!globals_exports$5.skipAnimation?(Tt.delayed=!0,Kt=raf$5.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...$t,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult$4=(et,dt)=>dt.length==1?dt[0]:dt.some($t=>$t.cancelled)?getCancelledResult$4(et.get()):dt.every($t=>$t.noop)?getNoopResult$4(et.get()):getFinishedResult$4(et.get(),dt.every($t=>$t.finished)),getNoopResult$4=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult$4=(et,dt,$t=!1)=>({value:et,finished:dt,cancelled:$t}),getCancelledResult$4=et=>({value:et,cancelled:!0,finished:!1});function runAsync$4(et,dt,$t,kt){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=$t;return!Dt&&et===Ut&&!dt.reset?Ht:$t.promise=(async()=>{$t.asyncId=Tt,$t.asyncTo=et;const Kt=getDefaultProps$4(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=($t.cancelId||0)&&getCancelledResult$4(kt)||Tt!==$t.asyncId&&getFinishedResult$4(kt,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const or=new BailSignal$4,lr=new SkipAnimationSignal$4;return(async()=>{if(globals_exports$5.skipAnimation)throw stopAsync$4($t),lr.result=getFinishedResult$4(kt,!1),Jt(lr),lr;er(or);const cr=is$5.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp$5(Kt,(ur,pr)=>{is$5.und(cr[pr])&&(cr[pr]=ur)});const dr=await kt.start(cr);return er(or),$t.paused&&await new Promise(ur=>{$t.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports$5.skipAnimation)return stopAsync$4($t),getFinishedResult$4(kt,!1);try{let nr;is$5.arr(et)?nr=(async ir=>{for(const or of ir)await rr(or)})(et):nr=Promise.resolve(et(rr,kt.stop.bind(kt))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult$4(kt.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal$4)sr=nr.result;else if(nr instanceof SkipAnimationSignal$4)sr=nr.result;else throw nr}finally{Tt==$t.asyncId&&($t.asyncId=Dt,$t.asyncTo=Dt?Ut:void 0,$t.promise=Dt?Ht:void 0)}return is$5.fun(Ft)&&raf$5.batchedUpdates(()=>{Ft(sr,kt,kt.item)}),sr})()}function stopAsync$4(et,dt){flush$4(et.timeouts,$t=>$t.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal$4=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal$4=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue$5=et=>et instanceof FrameValue$5,nextId$5=1,FrameValue$5=class extends FluidValue$5{constructor(){super(...arguments),this.id=nextId$5++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$5(this);return dt&&dt.getValue()}to(...dt){return globals_exports$5.to(this,dt)}interpolate(...dt){return deprecateInterpolate$5(),globals_exports$5.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,$t=!1){callFluidObservers$5(this,{type:"change",parent:this,value:dt,idle:$t})}_onPriorityChange(dt){this.idle||frameLoop$5.sort(this),callFluidObservers$5(this,{type:"priority",parent:this,priority:dt})}},$P$4=Symbol.for("SpringPhase"),HAS_ANIMATED$4=1,IS_ANIMATING$4=2,IS_PAUSED$4=4,hasAnimated$4=et=>(et[$P$4]&HAS_ANIMATED$4)>0,isAnimating$4=et=>(et[$P$4]&IS_ANIMATING$4)>0,isPaused$4=et=>(et[$P$4]&IS_PAUSED$4)>0,setActiveBit$4=(et,dt)=>dt?et[$P$4]|=IS_ANIMATING$4|HAS_ANIMATED$4:et[$P$4]&=~IS_ANIMATING$4,setPausedBit$4=(et,dt)=>dt?et[$P$4]|=IS_PAUSED$4:et[$P$4]&=~IS_PAUSED$4,SpringValue$4=class extends FrameValue$5{constructor(dt,$t){if(super(),this.animation=new Animation$4,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$5.und(dt)||!is$5.und($t)){const kt=is$5.obj(dt)?{...dt}:{...$t,from:dt};is$5.und(kt.default)&&(kt.default=!0),this.start(kt)}}get idle(){return!(isAnimating$4(this)||this._state.asyncTo)||isPaused$4(this)}get goal(){return getFluidValue$5(this.animation.to)}get velocity(){const dt=getAnimated$5(this);return dt instanceof AnimatedValue$5?dt.lastVelocity||0:dt.getPayload().map($t=>$t.lastVelocity||0)}get hasAnimated(){return hasAnimated$4(this)}get isAnimating(){return isAnimating$4(this)}get isPaused(){return isPaused$4(this)}get isDelayed(){return this._state.delayed}advance(dt){let $t=!0,kt=!1;const Tt=this.animation;let{toValues:Dt}=Tt;const{config:Ft}=Tt,Ut=getPayload$5(Tt.to);!Ut&&hasFluidValue$5(Tt.to)&&(Dt=toArray$5(getFluidValue$5(Tt.to))),Tt.values.forEach((Yt,Jt)=>{if(Yt.done)return;const Zt=Yt.constructor==AnimatedString$5?1:Ut?Ut[Jt].lastPosition:Dt[Jt];let er=Tt.immediate,rr=Zt;if(!er){if(rr=Yt.lastPosition,Ft.tension<=0){Yt.done=!0;return}let sr=Yt.elapsedTime+=dt;const nr=Tt.fromValues[Jt],ir=Yt.v0!=null?Yt.v0:Yt.v0=is$5.arr(Ft.velocity)?Ft.velocity[Jt]:Ft.velocity;let or;const lr=Ft.precision||(nr==Zt?.005:Math.min(1,Math.abs(Zt-nr)*.001));if(is$5.und(Ft.duration))if(Ft.decay){const cr=Ft.decay===!0?.998:Ft.decay,dr=Math.exp(-(1-cr)*sr);rr=nr+ir/(1-cr)*(1-dr),er=Math.abs(Yt.lastPosition-rr)<=lr,or=ir*dr}else{or=Yt.lastVelocity==null?ir:Yt.lastVelocity;const cr=Ft.restVelocity||lr/10,dr=Ft.clamp?0:Ft.bounce,ur=!is$5.und(dr),pr=nr==Zt?Yt.v0>0:nr<Zt;let mr,jr=!1;const Rr=1,xr=Math.ceil(dt/Rr);for(let kr=0;kr<xr&&(mr=Math.abs(or)>cr,!(!mr&&(er=Math.abs(Zt-rr)<=lr,er)));++kr){ur&&(jr=rr==Zt||rr>Zt==pr,jr&&(or=-or*dr,rr=Zt));const Mr=-Ft.tension*1e-6*(rr-Zt),Tr=-Ft.friction*.001*or,Or=(Mr+Tr)/Ft.mass;or=or+Or*Rr,rr=rr+or*Rr}}else{let cr=1;Ft.duration>0&&(this._memoizedDuration!==Ft.duration&&(this._memoizedDuration=Ft.duration,Yt.durationProgress>0&&(Yt.elapsedTime=Ft.duration*Yt.durationProgress,sr=Yt.elapsedTime+=dt)),cr=(Ft.progress||0)+sr/this._memoizedDuration,cr=cr>1?1:cr<0?0:cr,Yt.durationProgress=cr),rr=nr+Ft.easing(cr)*(Zt-nr),or=(rr-Yt.lastPosition)/dt,er=cr==1}Yt.lastVelocity=or,Number.isNaN(rr)&&(console.warn("Got NaN while animating:",this),er=!0)}Ut&&!Ut[Jt].done&&(er=!1),er?Yt.done=!0:$t=!1,Yt.setValue(rr,Ft.round)&&(kt=!0)});const Ht=getAnimated$5(this),Kt=Ht.getValue();if($t){const Yt=getFluidValue$5(Tt.to);(Kt!==Yt||kt)&&!Ft.decay?(Ht.setValue(Yt),this._onChange(Yt)):kt&&Ft.decay&&this._onChange(Kt),this._stop()}else kt&&this._onChange(Kt)}set(dt){return raf$5.batchedUpdates(()=>{this._stop(),this._focus(dt),this._set(dt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$4(this)){const{to:dt,config:$t}=this.animation;raf$5.batchedUpdates(()=>{this._onStart(),$t.decay||this._set(dt,!1),this._stop()})}return this}update(dt){return(this.queue||(this.queue=[])).push(dt),this}start(dt,$t){let kt;return is$5.und(dt)?(kt=this.queue||[],this.queue=[]):kt=[is$5.obj(dt)?dt:{...$t,to:dt}],Promise.all(kt.map(Tt=>this._update(Tt))).then(Tt=>getCombinedResult$4(this,Tt))}stop(dt){const{to:$t}=this.animation;return this._focus(this.get()),stopAsync$4(this._state,dt&&this._lastCallId),raf$5.batchedUpdates(()=>this._stop($t,dt)),this}reset(){this._update({reset:!0})}eventObserved(dt){dt.type=="change"?this._start():dt.type=="priority"&&(this.priority=dt.priority+1)}_prepareNode(dt){const $t=this.key||"";let{to:kt,from:Tt}=dt;kt=is$5.obj(kt)?kt[$t]:kt,(kt==null||isAsyncTo$4(kt))&&(kt=void 0),Tt=is$5.obj(Tt)?Tt[$t]:Tt,Tt==null&&(Tt=void 0);const Dt={to:kt,from:Tt};return hasAnimated$4(this)||(dt.reverse&&([kt,Tt]=[Tt,kt]),Tt=getFluidValue$5(Tt),is$5.und(Tt)?getAnimated$5(this)||this._set(kt):this._set(Tt)),Dt}_update({...dt},$t){const{key:kt,defaultProps:Tt}=this;dt.default&&Object.assign(Tt,getDefaultProps$4(dt,(Ut,Ht)=>/^on/.test(Ht)?resolveProp$4(Ut,kt):Ut)),mergeActiveFn$4(this,dt,"onProps"),sendEvent$4(this,"onProps",dt,this);const Dt=this._prepareNode(dt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Ft=this._state;return scheduleProps$4(++this._lastCallId,{key:kt,props:dt,defaultProps:Tt,state:Ft,actions:{pause:()=>{isPaused$4(this)||(setPausedBit$4(this,!0),flushCalls$4(Ft.pauseQueue),sendEvent$4(this,"onPause",getFinishedResult$4(this,checkFinished$4(this,this.animation.to)),this))},resume:()=>{isPaused$4(this)&&(setPausedBit$4(this,!1),isAnimating$4(this)&&this._resume(),flushCalls$4(Ft.resumeQueue),sendEvent$4(this,"onResume",getFinishedResult$4(this,checkFinished$4(this,this.animation.to)),this))},start:this._merge.bind(this,Dt)}}).then(Ut=>{if(dt.loop&&Ut.finished&&!($t&&Ut.noop)){const Ht=createLoopUpdate$4(dt);if(Ht)return this._update(Ht,!0)}return Ut})}_merge(dt,$t,kt){if($t.cancel)return this.stop(!0),kt(getCancelledResult$4(this));const Tt=!is$5.und(dt.to),Dt=!is$5.und(dt.from);if(Tt||Dt)if($t.callId>this._lastToId)this._lastToId=$t.callId;else return kt(getCancelledResult$4(this));const{key:Ft,defaultProps:Ut,animation:Ht}=this,{to:Kt,from:Yt}=Ht;let{to:Jt=Kt,from:Zt=Yt}=dt;Dt&&!Tt&&(!$t.default||is$5.und(Jt))&&(Jt=Zt),$t.reverse&&([Jt,Zt]=[Zt,Jt]);const er=!isEqual$6(Zt,Yt);er&&(Ht.from=Zt),Zt=getFluidValue$5(Zt);const rr=!isEqual$6(Jt,Kt);rr&&this._focus(Jt);const sr=isAsyncTo$4($t.to),{config:nr}=Ht,{decay:ir,velocity:or}=nr;(Tt||Dt)&&(nr.velocity=0),$t.config&&!sr&&mergeConfig$4(nr,callProp$4($t.config,Ft),$t.config!==Ut.config?callProp$4(Ut.config,Ft):void 0);let lr=getAnimated$5(this);if(!lr||is$5.und(Jt))return kt(getFinishedResult$4(this,!0));const cr=is$5.und($t.reset)?Dt&&!$t.default:!is$5.und(Zt)&&matchProp$4($t.reset,Ft),dr=cr?Zt:this.get(),ur=computeGoal$4(Jt),pr=is$5.num(ur)||is$5.arr(ur)||isAnimatedString$5(ur),mr=!sr&&(!pr||matchProp$4(Ut.immediate||$t.immediate,Ft));if(rr){const kr=getAnimatedType$5(Jt);if(kr!==lr.constructor)if(mr)lr=this._set(ur);else throw Error(`Cannot animate between ${lr.constructor.name} and ${kr.name}, as the "to" prop suggests`)}const jr=lr.constructor;let Rr=hasFluidValue$5(Jt),xr=!1;if(!Rr){const kr=cr||!hasAnimated$4(this)&&er;(rr||kr)&&(xr=isEqual$6(computeGoal$4(dr),ur),Rr=!xr),(!isEqual$6(Ht.immediate,mr)&&!mr||!isEqual$6(nr.decay,ir)||!isEqual$6(nr.velocity,or))&&(Rr=!0)}if(xr&&isAnimating$4(this)&&(Ht.changed&&!cr?Rr=!0:Rr||this._stop(Kt)),!sr&&((Rr||hasFluidValue$5(Kt))&&(Ht.values=lr.getPayload(),Ht.toValues=hasFluidValue$5(Jt)?null:jr==AnimatedString$5?[1]:toArray$5(ur)),Ht.immediate!=mr&&(Ht.immediate=mr,!mr&&!cr&&this._set(Kt)),Rr)){const{onRest:kr}=Ht;each$5(ACTIVE_EVENTS$4,Tr=>mergeActiveFn$4(this,$t,Tr));const Mr=getFinishedResult$4(this,checkFinished$4(this,Kt));flushCalls$4(this._pendingCalls,Mr),this._pendingCalls.add(kt),Ht.changed&&raf$5.batchedUpdates(()=>{var Tr;Ht.changed=!cr,kr==null||kr(Mr,this),cr?callProp$4(Ut.onRest,Mr):(Tr=Ht.onStart)==null||Tr.call(Ht,Mr,this)})}cr&&this._set(dr),sr?kt(runAsync$4($t.to,$t,this._state,this)):Rr?this._start():isAnimating$4(this)&&!rr?this._pendingCalls.add(kt):kt(getNoopResult$4(dr))}_focus(dt){const $t=this.animation;dt!==$t.to&&(getFluidObservers$4(this)&&this._detach(),$t.to=dt,getFluidObservers$4(this)&&this._attach())}_attach(){let dt=0;const{to:$t}=this.animation;hasFluidValue$5($t)&&(addFluidObserver$5($t,this),isFrameValue$5($t)&&(dt=$t.priority+1)),this.priority=dt}_detach(){const{to:dt}=this.animation;hasFluidValue$5(dt)&&removeFluidObserver$5(dt,this)}_set(dt,$t=!0){const kt=getFluidValue$5(dt);if(!is$5.und(kt)){const Tt=getAnimated$5(this);if(!Tt||!isEqual$6(kt,Tt.getValue())){const Dt=getAnimatedType$5(kt);!Tt||Tt.constructor!=Dt?setAnimated$5(this,Dt.create(kt)):Tt.setValue(kt),Tt&&raf$5.batchedUpdates(()=>{this._onChange(kt,$t)})}}return getAnimated$5(this)}_onStart(){const dt=this.animation;dt.changed||(dt.changed=!0,sendEvent$4(this,"onStart",getFinishedResult$4(this,checkFinished$4(this,dt.to)),this))}_onChange(dt,$t){$t||(this._onStart(),callProp$4(this.animation.onChange,dt,this)),callProp$4(this.defaultProps.onChange,dt,this),super._onChange(dt,$t)}_start(){const dt=this.animation;getAnimated$5(this).reset(getFluidValue$5(dt.to)),dt.immediate||(dt.fromValues=dt.values.map($t=>$t.lastPosition)),isAnimating$4(this)||(setActiveBit$4(this,!0),isPaused$4(this)||this._resume())}_resume(){globals_exports$5.skipAnimation?this.finish():frameLoop$5.start(this)}_stop(dt,$t){if(isAnimating$4(this)){setActiveBit$4(this,!1);const kt=this.animation;each$5(kt.values,Dt=>{Dt.done=!0}),kt.toValues&&(kt.onChange=kt.onPause=kt.onResume=void 0),callFluidObservers$5(this,{type:"idle",parent:this});const Tt=$t?getCancelledResult$4(this.get()):getFinishedResult$4(this.get(),checkFinished$4(this,dt??kt.to));flushCalls$4(this._pendingCalls,Tt),kt.changed&&(kt.changed=!1,sendEvent$4(this,"onRest",Tt,this))}}};function checkFinished$4(et,dt){const $t=computeGoal$4(dt),kt=computeGoal$4(et.get());return isEqual$6(kt,$t)}function createLoopUpdate$4(et,dt=et.loop,$t=et.to){const kt=callProp$4(dt);if(kt){const Tt=kt!==!0&&inferTo$4(kt),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate$4({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo$4($t)?$t:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate$4(et){const{to:dt,from:$t}=et=inferTo$4(et),kt=new Set;return is$5.obj(dt)&&findDefined$4(dt,kt),is$5.obj($t)&&findDefined$4($t,kt),et.keys=kt.size?Array.from(kt):null,et}function declareUpdate$3(et){const dt=createUpdate$4(et);return is$5.und(dt.default)&&(dt.default=getDefaultProps$4(dt)),dt}function findDefined$4(et,dt){eachProp$5(et,($t,kt)=>$t!=null&&dt.add(kt))}var ACTIVE_EVENTS$4=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn$4(et,dt,$t){et.animation[$t]=dt[$t]!==getDefaultProp$4(dt,$t)?resolveProp$4(dt[$t],et.key):void 0}function sendEvent$4(et,dt,...$t){var kt,Tt,Dt,Ft;(Tt=(kt=et.animation)[dt])==null||Tt.call(kt,...$t),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...$t)}var BATCHED_EVENTS$4=["onStart","onChange","onRest"],nextId2$4=1,Controller$4=class{constructor(dt,$t){this.id=nextId2$4++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),$t&&(this._flush=$t),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){const dt={};return this.each(($t,kt)=>dt[kt]=$t.get()),dt}set(dt){for(const $t in dt){const kt=dt[$t];is$5.und(kt)||this.springs[$t].set(kt)}}update(dt){return dt&&this.queue.push(createUpdate$4(dt)),this}start(dt){let{queue:$t}=this;return dt?$t=toArray$5(dt).map(createUpdate$4):this.queue=[],this._flush?this._flush(this,$t):(prepareKeys$4(this,$t),flushUpdateQueue$4(this,$t))}stop(dt,$t){if(dt!==!!dt&&($t=dt),$t){const kt=this.springs;each$5(toArray$5($t),Tt=>kt[Tt].stop(!!dt))}else stopAsync$4(this._state,this._lastAsyncId),this.each(kt=>kt.stop(!!dt));return this}pause(dt){if(is$5.und(dt))this.start({pause:!0});else{const $t=this.springs;each$5(toArray$5(dt),kt=>$t[kt].pause())}return this}resume(dt){if(is$5.und(dt))this.start({pause:!1});else{const $t=this.springs;each$5(toArray$5(dt),kt=>$t[kt].resume())}return this}each(dt){eachProp$5(this.springs,dt)}_onFrame(){const{onStart:dt,onChange:$t,onRest:kt}=this._events,Tt=this._active.size>0,Dt=this._changed.size>0;(Tt&&!this._started||Dt&&!this._started)&&(this._started=!0,flush$4(dt,([Ht,Kt])=>{Kt.value=this.get(),Ht(Kt,this,this._item)}));const Ft=!Tt&&this._started,Ut=Dt||Ft&&kt.size?this.get():null;Dt&&$t.size&&flush$4($t,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}),Ft&&(this._started=!1,flush$4(kt,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;raf$5.onFrame(this._onFrame)}};function flushUpdateQueue$4(et,dt){return Promise.all(dt.map($t=>flushUpdate$4(et,$t))).then($t=>getCombinedResult$4(et,$t))}async function flushUpdate$4(et,dt,$t){const{keys:kt,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is$5.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is$5.arr(Tt)||is$5.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each$5(BATCHED_EVENTS$4,sr=>{const nr=dt[sr];if(is$5.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:or,cancelled:lr})=>{const cr=ir.get(nr);cr?(or||(cr.finished=!1),lr&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:or||!1,cancelled:lr||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls$4(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=(kt||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp$4(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps$4(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop$8,resume:noop$8,start(sr,nr){er?(stopAsync$4(Jt,et._lastAsyncId),nr(getCancelledResult$4(et))):(sr.onRest=Ut,nr(runAsync$4(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult$4(et,await Promise.all(Zt));if(Ft&&rr.finished&&!($t&&rr.noop)){const sr=createLoopUpdate$4(dt,Ft,Tt);if(sr)return prepareKeys$4(et,[sr]),flushUpdate$4(et,sr,!0)}return Ht&&raf$5.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings$4(et,dt){const $t={...et.springs};return dt&&each$5(toArray$5(dt),kt=>{is$5.und(kt.keys)&&(kt=createUpdate$4(kt)),is$5.obj(kt.to)||(kt={...kt,to:void 0}),prepareSprings$4($t,kt,Tt=>createSpring$4(Tt))}),setSprings$4(et,$t),$t}function setSprings$4(et,dt){eachProp$5(dt,($t,kt)=>{et.springs[kt]||(et.springs[kt]=$t,addFluidObserver$5($t,et))})}function createSpring$4(et,dt){const $t=new SpringValue$4;return $t.key=et,dt&&addFluidObserver$5($t,dt),$t}function prepareSprings$4(et,dt,$t){dt.keys&&each$5(dt.keys,kt=>{(et[kt]||(et[kt]=$t(kt)))._prepareNode(dt)})}function prepareKeys$4(et,dt){each$5(dt,$t=>{prepareSprings$4(et.springs,$t,kt=>createSpring$4(kt,et))})}var SpringContext$4=reactExports.createContext({pause:!1,immediate:!1}),SpringRef$4=()=>{const et=[],dt=function(kt){deprecateDirectCall$4();const Tt=[];return each$5(et,(Dt,Ft)=>{if(is$5.und(kt))Tt.push(Dt.start());else{const Ut=$t(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function(kt){et.includes(kt)||et.push(kt)},dt.delete=function(kt){const Tt=et.indexOf(kt);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each$5(et,kt=>kt.pause(...arguments)),this},dt.resume=function(){return each$5(et,kt=>kt.resume(...arguments)),this},dt.set=function(kt){each$5(et,(Tt,Dt)=>{const Ft=is$5.fun(kt)?kt(Dt,Tt):kt;Ft&&Tt.set(Ft)})},dt.start=function(kt){const Tt=[];return each$5(et,(Dt,Ft)=>{if(is$5.und(kt))Tt.push(Dt.start());else{const Ut=this._getProps(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each$5(et,kt=>kt.stop(...arguments)),this},dt.update=function(kt){return each$5(et,(Tt,Dt)=>Tt.update(this._getProps(kt,Tt,Dt))),this};const $t=function(kt,Tt,Dt){return is$5.fun(kt)?kt(Dt,Tt):kt};return dt._getProps=$t,dt};function useSprings$3(et,dt,$t){const kt=is$5.fun(dt)&&dt;kt&&!$t&&($t=[]);const Tt=reactExports.useMemo(()=>kt||arguments.length==3?SpringRef$4():void 0,[]),Dt=reactExports.useRef(0),Ft=useForceUpdate$5(),Ut=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(ir,or){const lr=getSprings$4(ir,or);return Dt.current>0&&!Ut.queue.length&&!Object.keys(lr).some(dr=>!ir.springs[dr])?flushUpdateQueue$4(ir,or):new Promise(dr=>{setSprings$4(ir,lr),Ut.queue.push(()=>{dr(flushUpdateQueue$4(ir,or))}),Ft()})}}),[]),Ht=reactExports.useRef([...Ut.ctrls]),Kt=reactExports.useRef([]),Yt=usePrev$4(et)||0;reactExports.useMemo(()=>{each$5(Ht.current.slice(et,Yt),ir=>{detachRefs$4(ir,Tt),ir.stop(!0)}),Ht.current.length=et,Jt(Yt,et)},[et]),reactExports.useMemo(()=>{Jt(0,Math.min(Yt,et))},$t);function Jt(ir,or){for(let lr=ir;lr<or;lr++){const cr=Ht.current[lr]||(Ht.current[lr]=new Controller$4(null,Ut.flush)),dr=kt?kt(lr,cr):dt[lr];dr&&(Kt.current[lr]=declareUpdate$3(dr))}}const Zt=Ht.current.map((ir,or)=>getSprings$4(ir,Kt.current[or])),er=reactExports.useContext(SpringContext$4),rr=usePrev$4(er),sr=er!==rr&&hasProps$4(er);useIsomorphicLayoutEffect$5(()=>{Dt.current++,Ut.ctrls=Ht.current;const{queue:ir}=Ut;ir.length&&(Ut.queue=[],each$5(ir,or=>or())),each$5(Ht.current,(or,lr)=>{Tt==null||Tt.add(or),sr&&or.start({default:er});const cr=Kt.current[lr];cr&&(replaceRef$4(or,cr.ref),or.ref?or.queue.push(cr):or.start(cr))})}),useOnce$5(()=>()=>{each$5(Ut.ctrls,ir=>ir.stop(!0))});const nr=Zt.map(ir=>({...ir}));return Tt?[nr,Tt]:nr}function useSpring$3(et,dt){const $t=is$5.fun(et),[[kt],Tt]=useSprings$3(1,$t?et:[et],$t?dt||[]:dt);return $t||arguments.length==2?[kt,Tt]:kt}var Interpolation$5=class extends FrameValue$5{constructor(dt,$t){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$5(...$t);const kt=this._get(),Tt=getAnimatedType$5(kt);setAnimated$5(this,Tt.create(kt))}advance(dt){const $t=this._get(),kt=this.get();isEqual$6($t,kt)||(getAnimated$5(this).setValue($t),this._onChange($t,this.idle)),!this.idle&&checkIdle$5(this._active)&&becomeIdle$5(this)}_get(){const dt=is$5.arr(this.source)?this.source.map(getFluidValue$5):toArray$5(getFluidValue$5(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$5(this._active)&&(this.idle=!1,each$5(getPayload$5(this),dt=>{dt.done=!1}),globals_exports$5.skipAnimation?(raf$5.batchedUpdates(()=>this.advance()),becomeIdle$5(this)):frameLoop$5.start(this))}_attach(){let dt=1;each$5(toArray$5(this.source),$t=>{hasFluidValue$5($t)&&addFluidObserver$5($t,this),isFrameValue$5($t)&&($t.idle||this._active.add($t),dt=Math.max(dt,$t.priority+1))}),this.priority=dt,this._start()}_detach(){each$5(toArray$5(this.source),dt=>{hasFluidValue$5(dt)&&removeFluidObserver$5(dt,this)}),this._active.clear(),becomeIdle$5(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$5(this.source).reduce(($t,kt)=>Math.max($t,(isFrameValue$5(kt)?kt.priority:0)+1),0))}};function isIdle$5(et){return et.idle!==!1}function checkIdle$5(et){return!et.size||Array.from(et).every(isIdle$5)}function becomeIdle$5(et){et.idle||(et.idle=!0,each$5(getPayload$5(et),dt=>{dt.done=!0}),callFluidObservers$5(et,{type:"idle",parent:et}))}globals_exports$5.assign({createStringInterpolator:createStringInterpolator2$5,to:(et,dt)=>new Interpolation$5(et,dt)});var isCustomPropRE$5=/^--/;function dangerousStyleValue$5(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$5.test(et)&&!(isUnitlessNumber$5.hasOwnProperty(et)&&isUnitlessNumber$5[et])?dt+"px":(""+dt).trim()}var attributeCache$5={};function applyAnimatedValues$5(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const $t=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:kt,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>$t||et.hasAttribute(Zt)?Zt:attributeCache$5[Zt]||(attributeCache$5[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$5(Zt,Tt[Zt]);isCustomPropRE$5.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),kt!==void 0&&(et.className=kt),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$5={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$5=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$6=["Webkit","Ms","Moz","O"];isUnitlessNumber$5=Object.keys(isUnitlessNumber$5).reduce((et,dt)=>(prefixes$6.forEach($t=>et[prefixKey$5($t,dt)]=et[dt]),et),isUnitlessNumber$5);var domTransforms$5=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$5=/^(translate)/,degTransforms$5=/^(rotate|skew)/,addUnit$5=(et,dt)=>is$5.num(et)&&et!==0?et+dt:et,isValueIdentity$5=(et,dt)=>is$5.arr(et)?et.every($t=>isValueIdentity$5($t,dt)):is$5.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$5=class extends AnimatedObject$5{constructor({x:dt,y:$t,z:kt,...Tt}){const Dt=[],Ft=[];(dt||$t||kt)&&(Dt.push([dt||0,$t||0,kt||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$5(Ht,"px")).join(",")})`,isValueIdentity$5(Ut,0)])),eachProp$5(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$5.test(Ht)){if(delete Tt[Ht],is$5.und(Ut))return;const Kt=pxTransforms$5.test(Ht)?"px":degTransforms$5.test(Ht)?"deg":"";Dt.push(toArray$5(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$5(er,Kt)})`,isValueIdentity$5(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$5(Jt,Kt)).join(",")})`,isValueIdentity$5(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$5(Dt,Ft)),super(Tt)}},FluidTransform$5=class extends FluidValue$5{constructor(dt,$t){super(),this.inputs=dt,this.transforms=$t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",$t=!0;return each$5(this.inputs,(kt,Tt)=>{const Dt=getFluidValue$5(kt[0]),[Ft,Ut]=this.transforms[Tt](is$5.arr(Dt)?Dt:kt.map(getFluidValue$5));dt+=" "+Ft,$t=$t&&Ut}),$t?"none":dt}observerAdded(dt){dt==1&&each$5(this.inputs,$t=>each$5($t,kt=>hasFluidValue$5(kt)&&addFluidObserver$5(kt,this)))}observerRemoved(dt){dt==0&&each$5(this.inputs,$t=>each$5($t,kt=>hasFluidValue$5(kt)&&removeFluidObserver$5(kt,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$5(this,dt)}},primitives$5=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$5.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$5,colors:colors2$5});var host$5=createHost$5(primitives$5,{applyAnimatedValues:applyAnimatedValues$5,createAnimatedStyle:et=>new AnimatedStyle$5(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...$t})=>$t}),animated$5=host$5.animated;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$5(et,dt){return et===dt||et!==et&&dt!==dt}var eq_1=eq$5,eq$4=eq_1;function assocIndexOf$4(et,dt){for(var $t=et.length;$t--;)if(eq$4(et[$t][0],dt))return $t;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(et){var dt=this.__data__,$t=assocIndexOf$3(dt,et);if($t<0)return!1;var kt=dt.length-1;return $t==kt?dt.pop():splice.call(dt,$t,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(et){var dt=this.__data__,$t=assocIndexOf$2(dt,et);return $t<0?void 0:dt[$t][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(et){return assocIndexOf$1(this.__data__,et)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(et,dt){var $t=this.__data__,kt=assocIndexOf($t,et);return kt<0?(++this.size,$t.push([et,dt])):$t[kt][1]=dt,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(et){var dt=-1,$t=et==null?0:et.length;for(this.clear();++dt<$t;){var kt=et[dt];this.set(kt[0],kt[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(et){var dt=this.__data__,$t=dt.delete(et);return this.size=dt.size,$t}var _stackDelete=stackDelete$1;function stackGet$1(et){return this.__data__.get(et)}var _stackGet=stackGet$1;function stackHas$1(et){return this.__data__.has(et)}var _stackHas=stackHas$1,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$7=root$8.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(et){var dt=hasOwnProperty$c.call(et,symToStringTag$1),$t=et[symToStringTag$1];try{et[symToStringTag$1]=void 0;var kt=!0}catch{}var Tt=nativeObjectToString$1.call(et);return kt&&(dt?et[symToStringTag$1]=$t:delete et[symToStringTag$1]),Tt}var _getRawTag=getRawTag$1,objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(et){return nativeObjectToString.call(et)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$8(et){return et==null?et===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(et)?getRawTag(et):objectToString(et)}var _baseGetTag=baseGetTag$8;function isObject$a(et){var dt=typeof et;return et!=null&&(dt=="object"||dt=="function")}var isObject_1=isObject$a,baseGetTag$7=_baseGetTag,isObject$9=isObject_1,asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(et){if(!isObject$9(et))return!1;var dt=baseGetTag$7(et);return dt==funcTag$2||dt==genTag$1||dt==asyncTag||dt==proxyTag}var isFunction_1=isFunction$3;const Cr=getDefaultExportFromCjs(isFunction_1);var root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var et=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return et?"Symbol(src)_1."+et:""}();function isMasked$1(et){return!!maskSrcKey&&maskSrcKey in et}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(et){if(et!=null){try{return funcToString$2.call(et)}catch{}try{return et+""}catch{}}return""}var _toSource=toSource$2,isFunction$2=isFunction_1,isMasked=_isMasked,isObject$8=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$b=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$b).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(et){if(!isObject$8(et)||isMasked(et))return!1;var dt=isFunction$2(et)?reIsNative:reIsHostCtor;return dt.test(toSource$1(et))}var _baseIsNative=baseIsNative$1;function getValue$1(et,dt){return et==null?void 0:et[dt]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(et,dt){var $t=getValue(et,dt);return baseIsNative($t)?$t:void 0}var _getNative=getNative$7,getNative$6=_getNative,root$6=_root,Map$4=getNative$6(root$6,"Map"),_Map=Map$4,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(et){var dt=this.has(et)&&delete this.__data__[et];return this.size-=dt?1:0,dt}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function hashGet$1(et){var dt=this.__data__;if(nativeCreate$2){var $t=dt[et];return $t===HASH_UNDEFINED$2?void 0:$t}return hasOwnProperty$a.call(dt,et)?dt[et]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashHas$1(et){var dt=this.__data__;return nativeCreate$1?dt[et]!==void 0:hasOwnProperty$9.call(dt,et)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(et,dt){var $t=this.__data__;return this.size+=this.has(et)?0:1,$t[et]=nativeCreate&&dt===void 0?HASH_UNDEFINED$1:dt,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(et){var dt=-1,$t=et==null?0:et.length;for(this.clear();++dt<$t;){var kt=et[dt];this.set(kt[0],kt[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(et){var dt=typeof et;return dt=="string"||dt=="number"||dt=="symbol"||dt=="boolean"?et!=="__proto__":et===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(et,dt){var $t=et.__data__;return isKeyable(dt)?$t[typeof dt=="string"?"string":"hash"]:$t.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(et){var dt=getMapData$3(this,et).delete(et);return this.size-=dt?1:0,dt}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(et){return getMapData$2(this,et).get(et)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(et){return getMapData$1(this,et).has(et)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(et,dt){var $t=getMapData(this,et),kt=$t.size;return $t.set(et,dt),this.size+=$t.size==kt?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(et){var dt=-1,$t=et==null?0:et.length;for(this.clear();++dt<$t;){var kt=et[dt];this.set(kt[0],kt[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,ListCache$1=_ListCache,Map$2=_Map,MapCache$2=_MapCache,LARGE_ARRAY_SIZE$2=200;function stackSet$1(et,dt){var $t=this.__data__;if($t instanceof ListCache$1){var kt=$t.__data__;if(!Map$2||kt.length<LARGE_ARRAY_SIZE$2-1)return kt.push([et,dt]),this.size=++$t.size,this;$t=this.__data__=new MapCache$2(kt)}return $t.set(et,dt),this.size=$t.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$4(et){var dt=this.__data__=new ListCache(et);this.size=dt.size}Stack$4.prototype.clear=stackClear;Stack$4.prototype.delete=stackDelete;Stack$4.prototype.get=stackGet;Stack$4.prototype.has=stackHas;Stack$4.prototype.set=stackSet;var _Stack=Stack$4,getNative$4=_getNative,defineProperty$2=function(){try{var et=getNative$4(Object,"defineProperty");return et({},"",{}),et}catch{}}(),_defineProperty=defineProperty$2,defineProperty$1=_defineProperty;function baseAssignValue$3(et,dt,$t){dt=="__proto__"&&defineProperty$1?defineProperty$1(et,dt,{configurable:!0,enumerable:!0,value:$t,writable:!0}):et[dt]=$t}var _baseAssignValue=baseAssignValue$3,baseAssignValue$2=_baseAssignValue,eq$3=eq_1;function assignMergeValue$2(et,dt,$t){($t!==void 0&&!eq$3(et[dt],$t)||$t===void 0&&!(dt in et))&&baseAssignValue$2(et,dt,$t)}var _assignMergeValue=assignMergeValue$2;function createBaseFor$1(et){return function(dt,$t,kt){for(var Tt=-1,Dt=Object(dt),Ft=kt(dt),Ut=Ft.length;Ut--;){var Ht=Ft[et?Ut:++Tt];if($t(Dt[Ht],Ht,Dt)===!1)break}return dt}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$2=createBaseFor(),_baseFor=baseFor$2,_cloneBuffer={exports:{}};_cloneBuffer.exports;(function(et,dt){var $t=_root,kt=dt&&!dt.nodeType&&dt,Tt=kt&&!0&&et&&!et.nodeType&&et,Dt=Tt&&Tt.exports===kt,Ft=Dt?$t.Buffer:void 0,Ut=Ft?Ft.allocUnsafe:void 0;function Ht(Kt,Yt){if(Yt)return Kt.slice();var Jt=Kt.length,Zt=Ut?Ut(Jt):new Kt.constructor(Jt);return Kt.copy(Zt),Zt}et.exports=Ht})(_cloneBuffer,_cloneBuffer.exports);var _cloneBufferExports=_cloneBuffer.exports,root$5=_root,Uint8Array$3=root$5.Uint8Array,_Uint8Array=Uint8Array$3,Uint8Array$2=_Uint8Array;function cloneArrayBuffer$3(et){var dt=new et.constructor(et.byteLength);return new Uint8Array$2(dt).set(new Uint8Array$2(et)),dt}var _cloneArrayBuffer=cloneArrayBuffer$3,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneTypedArray$2(et,dt){var $t=dt?cloneArrayBuffer$2(et.buffer):et.buffer;return new et.constructor($t,et.byteOffset,et.length)}var _cloneTypedArray=cloneTypedArray$2;function copyArray$2(et,dt){var $t=-1,kt=et.length;for(dt||(dt=Array(kt));++$t<kt;)dt[$t]=et[$t];return dt}var _copyArray=copyArray$2,isObject$7=isObject_1,objectCreate=Object.create,baseCreate$1=function(){function et(){}return function(dt){if(!isObject$7(dt))return{};if(objectCreate)return objectCreate(dt);et.prototype=dt;var $t=new et;return et.prototype=void 0,$t}}(),_baseCreate=baseCreate$1;function overArg$2(et,dt){return function($t){return et(dt($t))}}var _overArg=overArg$2,overArg$1=_overArg,getPrototype$3=overArg$1(Object.getPrototypeOf,Object),_getPrototype=getPrototype$3,objectProto$a=Object.prototype;function isPrototype$3(et){var dt=et&&et.constructor,$t=typeof dt=="function"&&dt.prototype||objectProto$a;return et===$t}var _isPrototype=isPrototype$3,baseCreate=_baseCreate,getPrototype$2=_getPrototype,isPrototype$2=_isPrototype;function initCloneObject$2(et){return typeof et.constructor=="function"&&!isPrototype$2(et)?baseCreate(getPrototype$2(et)):{}}var _initCloneObject=initCloneObject$2;function isObjectLike$b(et){return et!=null&&typeof et=="object"}var isObjectLike_1=isObjectLike$b,baseGetTag$6=_baseGetTag,isObjectLike$a=isObjectLike_1,argsTag$3="[object Arguments]";function baseIsArguments$1(et){return isObjectLike$a(et)&&baseGetTag$6(et)==argsTag$3}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$9=isObjectLike_1,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,isArguments$4=baseIsArguments(function(){return arguments}())?baseIsArguments:function(et){return isObjectLike$9(et)&&hasOwnProperty$8.call(et,"callee")&&!propertyIsEnumerable$1.call(et,"callee")},isArguments_1=isArguments$4,isArray$e=Array.isArray,isArray_1=isArray$e,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$3(et){return typeof et=="number"&&et>-1&&et%1==0&&et<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$3,isFunction$1=isFunction_1,isLength$2=isLength_1;function isArrayLike$6(et){return et!=null&&isLength$2(et.length)&&!isFunction$1(et)}var isArrayLike_1=isArrayLike$6,isArrayLike$5=isArrayLike_1,isObjectLike$8=isObjectLike_1;function isArrayLikeObject$2(et){return isObjectLike$8(et)&&isArrayLike$5(et)}var isArrayLikeObject_1=isArrayLikeObject$2,isBuffer$4={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$4.exports;(function(et,dt){var $t=_root,kt=stubFalse_1,Tt=dt&&!dt.nodeType&&dt,Dt=Tt&&!0&&et&&!et.nodeType&&et,Ft=Dt&&Dt.exports===Tt,Ut=Ft?$t.Buffer:void 0,Ht=Ut?Ut.isBuffer:void 0,Kt=Ht||kt;et.exports=Kt})(isBuffer$4,isBuffer$4.exports);var isBufferExports=isBuffer$4.exports,baseGetTag$5=_baseGetTag,getPrototype$1=_getPrototype,isObjectLike$7=isObjectLike_1,objectTag$4="[object Object]",funcProto=Function.prototype,objectProto$8=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$8.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$2(et){if(!isObjectLike$7(et)||baseGetTag$5(et)!=objectTag$4)return!1;var dt=getPrototype$1(et);if(dt===null)return!0;var $t=hasOwnProperty$7.call(dt,"constructor")&&dt.constructor;return typeof $t=="function"&&$t instanceof $t&&funcToString.call($t)==objectCtorString}var isPlainObject_1=isPlainObject$2;const je=getDefaultExportFromCjs(isPlainObject_1);var baseGetTag$4=_baseGetTag,isLength$1=isLength_1,isObjectLike$6=isObjectLike_1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$4="[object Number]",objectTag$3="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$4]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray$1(et){return isObjectLike$6(et)&&isLength$1(et.length)&&!!typedArrayTags[baseGetTag$4(et)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$5(et){return function(dt){return et(dt)}}var _baseUnary=baseUnary$5,_nodeUtil={exports:{}};_nodeUtil.exports;(function(et,dt){var $t=_freeGlobal,kt=dt&&!dt.nodeType&&dt,Tt=kt&&!0&&et&&!et.nodeType&&et,Dt=Tt&&Tt.exports===kt,Ft=Dt&&$t.process,Ut=function(){try{var Ht=Tt&&Tt.require&&Tt.require("util").types;return Ht||Ft&&Ft.binding&&Ft.binding("util")}catch{}}();et.exports=Ut})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$4=_baseUnary,nodeUtil$3=_nodeUtilExports,nodeIsTypedArray=nodeUtil$3&&nodeUtil$3.isTypedArray,isTypedArray$3=nodeIsTypedArray?baseUnary$4(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$3;function safeGet$2(et,dt){if(!(dt==="constructor"&&typeof et[dt]=="function")&&dt!="__proto__")return et[dt]}var _safeGet=safeGet$2,baseAssignValue$1=_baseAssignValue,eq$2=eq_1,objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function assignValue$3(et,dt,$t){var kt=et[dt];(!(hasOwnProperty$6.call(et,dt)&&eq$2(kt,$t))||$t===void 0&&!(dt in et))&&baseAssignValue$1(et,dt,$t)}var _assignValue=assignValue$3,assignValue$2=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$6(et,dt,$t,kt){var Tt=!$t;$t||($t={});for(var Dt=-1,Ft=dt.length;++Dt<Ft;){var Ut=dt[Dt],Ht=kt?kt($t[Ut],et[Ut],Ut,$t,et):void 0;Ht===void 0&&(Ht=et[Ut]),Tt?baseAssignValue($t,Ut,Ht):assignValue$2($t,Ut,Ht)}return $t}var _copyObject=copyObject$6;function baseTimes$1(et,dt){for(var $t=-1,kt=Array(et);++$t<et;)kt[$t]=dt($t);return kt}var _baseTimes=baseTimes$1,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$4(et,dt){var $t=typeof et;return dt=dt??MAX_SAFE_INTEGER,!!dt&&($t=="number"||$t!="symbol"&&reIsUint.test(et))&&et>-1&&et%1==0&&et<dt}var _isIndex=isIndex$4,baseTimes=_baseTimes,isArguments$3=isArguments_1,isArray$d=isArray_1,isBuffer$3=isBufferExports,isIndex$3=_isIndex,isTypedArray$2=isTypedArray_1,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys$2(et,dt){var $t=isArray$d(et),kt=!$t&&isArguments$3(et),Tt=!$t&&!kt&&isBuffer$3(et),Dt=!$t&&!kt&&!Tt&&isTypedArray$2(et),Ft=$t||kt||Tt||Dt,Ut=Ft?baseTimes(et.length,String):[],Ht=Ut.length;for(var Kt in et)(dt||hasOwnProperty$5.call(et,Kt))&&!(Ft&&(Kt=="length"||Tt&&(Kt=="offset"||Kt=="parent")||Dt&&(Kt=="buffer"||Kt=="byteLength"||Kt=="byteOffset")||isIndex$3(Kt,Ht)))&&Ut.push(Kt);return Ut}var _arrayLikeKeys=arrayLikeKeys$2;function nativeKeysIn$1(et){var dt=[];if(et!=null)for(var $t in Object(et))dt.push($t);return dt}var _nativeKeysIn=nativeKeysIn$1,isObject$6=isObject_1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeysIn$1(et){if(!isObject$6(et))return nativeKeysIn(et);var dt=isPrototype$1(et),$t=[];for(var kt in et)kt=="constructor"&&(dt||!hasOwnProperty$4.call(et,kt))||$t.push(kt);return $t}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys$1=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike$4=isArrayLike_1;function keysIn$5(et){return isArrayLike$4(et)?arrayLikeKeys$1(et,!0):baseKeysIn(et)}var keysIn_1=keysIn$5,copyObject$5=_copyObject,keysIn$4=keysIn_1;function toPlainObject$1(et){return copyObject$5(et,keysIn$4(et))}var toPlainObject_1=toPlainObject$1,assignMergeValue$1=_assignMergeValue,cloneBuffer$1=_cloneBufferExports,cloneTypedArray$1=_cloneTypedArray,copyArray$1=_copyArray,initCloneObject$1=_initCloneObject,isArguments$2=isArguments_1,isArray$c=isArray_1,isArrayLikeObject$1=isArrayLikeObject_1,isBuffer$2=isBufferExports,isFunction=isFunction_1,isObject$5=isObject_1,isPlainObject$1=isPlainObject_1,isTypedArray$1=isTypedArray_1,safeGet$1=_safeGet,toPlainObject=toPlainObject_1;function baseMergeDeep$1(et,dt,$t,kt,Tt,Dt,Ft){var Ut=safeGet$1(et,$t),Ht=safeGet$1(dt,$t),Kt=Ft.get(Ht);if(Kt){assignMergeValue$1(et,$t,Kt);return}var Yt=Dt?Dt(Ut,Ht,$t+"",et,dt,Ft):void 0,Jt=Yt===void 0;if(Jt){var Zt=isArray$c(Ht),er=!Zt&&isBuffer$2(Ht),rr=!Zt&&!er&&isTypedArray$1(Ht);Yt=Ht,Zt||er||rr?isArray$c(Ut)?Yt=Ut:isArrayLikeObject$1(Ut)?Yt=copyArray$1(Ut):er?(Jt=!1,Yt=cloneBuffer$1(Ht,!0)):rr?(Jt=!1,Yt=cloneTypedArray$1(Ht,!0)):Yt=[]:isPlainObject$1(Ht)||isArguments$2(Ht)?(Yt=Ut,isArguments$2(Ut)?Yt=toPlainObject(Ut):(!isObject$5(Ut)||isFunction(Ut))&&(Yt=initCloneObject$1(Ht))):Jt=!1}Jt&&(Ft.set(Ht,Yt),Tt(Yt,Ht,kt,Dt,Ft),Ft.delete(Ht)),assignMergeValue$1(et,$t,Yt)}var _baseMergeDeep=baseMergeDeep$1,Stack$3=_Stack,assignMergeValue=_assignMergeValue,baseFor$1=_baseFor,baseMergeDeep=_baseMergeDeep,isObject$4=isObject_1,keysIn$3=keysIn_1,safeGet=_safeGet;function baseMerge$1(et,dt,$t,kt,Tt){et!==dt&&baseFor$1(dt,function(Dt,Ft){if(Tt||(Tt=new Stack$3),isObject$4(Dt))baseMergeDeep(et,dt,Ft,$t,baseMerge$1,kt,Tt);else{var Ut=kt?kt(safeGet(et,Ft),Dt,Ft+"",et,dt,Tt):void 0;Ut===void 0&&(Ut=Dt),assignMergeValue(et,Ft,Ut)}},keysIn$3)}var _baseMerge=baseMerge$1;function identity$6(et){return et}var identity_1=identity$6;function apply$1(et,dt,$t){switch($t.length){case 0:return et.call(dt);case 1:return et.call(dt,$t[0]);case 2:return et.call(dt,$t[0],$t[1]);case 3:return et.call(dt,$t[0],$t[1],$t[2])}return et.apply(dt,$t)}var _apply=apply$1,apply=_apply,nativeMax=Math.max;function overRest$2(et,dt,$t){return dt=nativeMax(dt===void 0?et.length-1:dt,0),function(){for(var kt=arguments,Tt=-1,Dt=nativeMax(kt.length-dt,0),Ft=Array(Dt);++Tt<Dt;)Ft[Tt]=kt[dt+Tt];Tt=-1;for(var Ut=Array(dt+1);++Tt<dt;)Ut[Tt]=kt[Tt];return Ut[dt]=$t(Ft),apply(et,this,Ut)}}var _overRest=overRest$2;function constant$3(et){return function(){return et}}var constant_1=constant$3,constant$2=constant_1,defineProperty=_defineProperty,identity$5=identity_1,baseSetToString$1=defineProperty?function(et,dt){return defineProperty(et,"toString",{configurable:!0,enumerable:!1,value:constant$2(dt),writable:!0})}:identity$5,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(et){var dt=0,$t=0;return function(){var kt=nativeNow(),Tt=HOT_SPAN-(kt-$t);if($t=kt,Tt>0){if(++dt>=HOT_COUNT)return arguments[0]}else dt=0;return et.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$2=shortOut(baseSetToString),_setToString=setToString$2,identity$4=identity_1,overRest$1=_overRest,setToString$1=_setToString;function baseRest$3(et,dt){return setToString$1(overRest$1(et,dt,identity$4),et+"")}var _baseRest=baseRest$3,eq$1=eq_1,isArrayLike$3=isArrayLike_1,isIndex$2=_isIndex,isObject$3=isObject_1;function isIterateeCall$2(et,dt,$t){if(!isObject$3($t))return!1;var kt=typeof dt;return(kt=="number"?isArrayLike$3($t)&&isIndex$2(dt,$t.length):kt=="string"&&dt in $t)?eq$1($t[dt],et):!1}var _isIterateeCall=isIterateeCall$2,baseRest$2=_baseRest,isIterateeCall$1=_isIterateeCall;function createAssigner$1(et){return baseRest$2(function(dt,$t){var kt=-1,Tt=$t.length,Dt=Tt>1?$t[Tt-1]:void 0,Ft=Tt>2?$t[2]:void 0;for(Dt=et.length>3&&typeof Dt=="function"?(Tt--,Dt):void 0,Ft&&isIterateeCall$1($t[0],$t[1],Ft)&&(Dt=Tt<3?void 0:Dt,Tt=1),dt=Object(dt);++kt<Tt;){var Ut=$t[kt];Ut&&et(dt,Ut,kt,Dt)}return dt})}var _createAssigner=createAssigner$1,baseMerge=_baseMerge,createAssigner=_createAssigner,merge=createAssigner(function(et,dt,$t){baseMerge(et,dt,$t)}),merge_1=merge;const i$2=getDefaultExportFromCjs(merge_1);var baseGetTag$3=_baseGetTag,isObjectLike$5=isObjectLike_1,symbolTag$3="[object Symbol]";function isSymbol$4(et){return typeof et=="symbol"||isObjectLike$5(et)&&baseGetTag$3(et)==symbolTag$3}var isSymbol_1=isSymbol$4,isArray$b=isArray_1,isSymbol$3=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$3(et,dt){if(isArray$b(et))return!1;var $t=typeof et;return $t=="number"||$t=="symbol"||$t=="boolean"||et==null||isSymbol$3(et)?!0:reIsPlainProp.test(et)||!reIsDeepProp.test(et)||dt!=null&&et in Object(dt)}var _isKey=isKey$3,MapCache$1=_MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize$1(et,dt){if(typeof et!="function"||dt!=null&&typeof dt!="function")throw new TypeError(FUNC_ERROR_TEXT);var $t=function(){var kt=arguments,Tt=dt?dt.apply(this,kt):kt[0],Dt=$t.cache;if(Dt.has(Tt))return Dt.get(Tt);var Ft=et.apply(this,kt);return $t.cache=Dt.set(Tt,Ft)||Dt,Ft};return $t.cache=new(memoize$1.Cache||MapCache$1),$t}memoize$1.Cache=MapCache$1;var memoize_1=memoize$1,memoize=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(et){var dt=memoize(et,function(kt){return $t.size===MAX_MEMOIZE_SIZE&&$t.clear(),kt}),$t=dt.cache;return dt}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(et){var dt=[];return et.charCodeAt(0)===46&&dt.push(""),et.replace(rePropName,function($t,kt,Tt,Dt){dt.push(Tt?Dt.replace(reEscapeChar,"$1"):kt||$t)}),dt}),_stringToPath=stringToPath$1;function arrayMap$4(et,dt){for(var $t=-1,kt=et==null?0:et.length,Tt=Array(kt);++$t<kt;)Tt[$t]=dt(et[$t],$t,et);return Tt}var _arrayMap=arrayMap$4,Symbol$4=_Symbol,arrayMap$3=_arrayMap,isArray$a=isArray_1,isSymbol$2=isSymbol_1,INFINITY$2=1/0,symbolProto$2=Symbol$4?Symbol$4.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString$1(et){if(typeof et=="string")return et;if(isArray$a(et))return arrayMap$3(et,baseToString$1)+"";if(isSymbol$2(et))return symbolToString?symbolToString.call(et):"";var dt=et+"";return dt=="0"&&1/et==-INFINITY$2?"-0":dt}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$1(et){return et==null?"":baseToString(et)}var toString_1=toString$1,isArray$9=isArray_1,isKey$2=_isKey,stringToPath=_stringToPath,toString=toString_1;function castPath$6(et,dt){return isArray$9(et)?et:isKey$2(et,dt)?[et]:stringToPath(toString(et))}var _castPath=castPath$6,isSymbol$1=isSymbol_1,INFINITY$1=1/0;function toKey$6(et){if(typeof et=="string"||isSymbol$1(et))return et;var dt=et+"";return dt=="0"&&1/et==-INFINITY$1?"-0":dt}var _toKey=toKey$6,castPath$5=_castPath,toKey$5=_toKey;function baseGet$5(et,dt){dt=castPath$5(dt,et);for(var $t=0,kt=dt.length;et!=null&&$t<kt;)et=et[toKey$5(dt[$t++])];return $t&&$t==kt?et:void 0}var _baseGet=baseGet$5,baseGet$4=_baseGet;function get$1(et,dt,$t){var kt=et==null?void 0:baseGet$4(et,dt);return kt===void 0?$t:kt}var get_1=get$1;const ke$1=getDefaultExportFromCjs(get_1);var assignValue$1=_assignValue,castPath$4=_castPath,isIndex$1=_isIndex,isObject$2=isObject_1,toKey$4=_toKey;function baseSet$2(et,dt,$t,kt){if(!isObject$2(et))return et;dt=castPath$4(dt,et);for(var Tt=-1,Dt=dt.length,Ft=Dt-1,Ut=et;Ut!=null&&++Tt<Dt;){var Ht=toKey$4(dt[Tt]),Kt=$t;if(Ht==="__proto__"||Ht==="constructor"||Ht==="prototype")return et;if(Tt!=Ft){var Yt=Ut[Ht];Kt=kt?kt(Yt,Ht,Ut):void 0,Kt===void 0&&(Kt=isObject$2(Yt)?Yt:isIndex$1(dt[Tt+1])?[]:{})}assignValue$1(Ut,Ht,Kt),Ut=Ut[Ht]}return et}var _baseSet=baseSet$2,baseSet$1=_baseSet;function set(et,dt,$t){return et==null?et:baseSet$1(et,dt,$t)}var set_1=set;const Lr=getDefaultExportFromCjs(set_1);function u$2(){return u$2=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},u$2.apply(null,arguments)}function d$1(et,dt){if(et==null)return{};var $t={};for(var kt in et)if({}.hasOwnProperty.call(et,kt)){if(dt.indexOf(kt)!==-1)continue;$t[kt]=et[kt]}return $t}var s$1=["outlineWidth","outlineColor","outlineOpacity"],b$5=function(et){return et.outlineWidth,et.outlineColor,et.outlineOpacity,d$1(et,s$1)},y$2=["axis.ticks.text","axis.legend.text","legends.title.text","legends.text","legends.ticks.text","legends.title.text","labels.text","dots.text","markers.text","annotations.text"],W$6=function(et,dt){return u$2({},dt,et)},O$5=function(et,dt){var $t=i$2({},et,dt);return y$2.forEach(function(kt){Lr($t,kt,W$6(ke$1($t,kt),$t.text))}),$t},R$2=function(et,dt){return dt?i$2({},et,dt):et},C$5={background:"transparent",text:{fontFamily:"sans-serif",fontSize:11,fill:"#333333",outlineWidth:0,outlineColor:"#ffffff",outlineOpacity:1},axis:{domain:{line:{stroke:"transparent",strokeWidth:1}},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{}},legend:{text:{fontSize:12}}},grid:{line:{stroke:"#dddddd",strokeWidth:1}},legends:{hidden:{symbol:{fill:"#333333",opacity:.6},text:{fill:"#333333",opacity:.6}},text:{},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{fontSize:10}},title:{text:{}}},labels:{text:{}},markers:{lineColor:"#000000",lineStrokeWidth:1,text:{}},dots:{text:{}},tooltip:{container:{background:"white",color:"inherit",fontSize:"inherit",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.25)",padding:"5px 9px"},basic:{whiteSpace:"pre",display:"flex",alignItems:"center"},chip:{marginRight:7},table:{},tableCell:{padding:"3px 5px"},tableCellValue:{fontWeight:"bold"}},crosshair:{line:{stroke:"#000000",strokeWidth:1,strokeOpacity:.75,strokeDasharray:"6 6"}},annotations:{text:{fontSize:13,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},link:{stroke:"#000000",strokeWidth:1,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},outline:{fill:"none",stroke:"#000000",strokeWidth:2,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},symbol:{fill:"#000000",outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1}}},L$5=function(et){return reactExports.useMemo(function(){return O$5(C$5,et)},[et])},w$5=function(et,dt){return reactExports.useMemo(function(){return R$2(et,dt)},[et,dt])},S$3=reactExports.createContext(null),j$5={},z$5=function(et){var dt=et.theme,$t=dt===void 0?j$5:dt,kt=et.children,Tt=L$5($t);return jsxRuntimeExports.jsx(S$3.Provider,{value:Tt,children:kt})},M$3=function(){var et=reactExports.useContext(S$3);if(et===null)throw new Error("Unable to find the theme, did you forget to wrap your component with ThemeProvider?");return et};function v$3(){return v$3=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},v$3.apply(null,arguments)}var x=["basic","chip","container","table","tableCell","tableCellValue"],m$1={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0},b$4=function(et,dt){return"translate("+et+"px, "+dt+"px)"},g$2=reactExports.memo(function(et){var dt,$t=et.position,kt=et.anchor,Tt=et.children,Dt=M$3(),Ft=Dr(),Ut=Ft.animate,Ht=Ft.config,Kt=sn$1(),Yt=Kt[0],Jt=Kt[1],Zt=reactExports.useRef(!1),er=void 0,rr=!1,sr=Jt.width>0&&Jt.height>0,nr=Math.round($t[0]),ir=Math.round($t[1]);sr&&(kt==="top"?(nr-=Jt.width/2,ir-=Jt.height+14):kt==="right"?(nr+=14,ir-=Jt.height/2):kt==="bottom"?(nr-=Jt.width/2,ir+=14):kt==="left"?(nr-=Jt.width+14,ir-=Jt.height/2):kt==="center"&&(nr-=Jt.width/2,ir-=Jt.height/2),er={transform:b$4(nr,ir)},Zt.current||(rr=!0),Zt.current=[nr,ir]);var or=useSpring$3({to:er,config:Ht,immediate:!Ut||rr}),lr=Dt.tooltip;lr.basic,lr.chip,lr.container,lr.table,lr.tableCell,lr.tableCellValue;var cr=function(ur,pr){if(ur==null)return{};var mr={};for(var jr in ur)if({}.hasOwnProperty.call(ur,jr)){if(pr.indexOf(jr)!==-1)continue;mr[jr]=ur[jr]}return mr}(lr,x),dr=v$3({},m$1,cr,{transform:(dt=or.transform)!=null?dt:b$4(nr,ir),opacity:or.transform?1:0});return jsxRuntimeExports.jsx(animated$5.div,{ref:Yt,style:dr,children:Tt})});g$2.displayName="TooltipWrapper";var w$4=reactExports.memo(function(et){var dt=et.size,$t=dt===void 0?12:dt,kt=et.color,Tt=et.style;return jsxRuntimeExports.jsx("span",{style:v$3({display:"block",width:$t,height:$t,background:kt},Tt===void 0?{}:Tt)})}),T$3=reactExports.memo(function(et){var dt,$t=et.id,kt=et.value,Tt=et.format,Dt=et.enableChip,Ft=Dt!==void 0&&Dt,Ut=et.color,Ht=et.renderContent,Kt=M$3(),Yt=hn(Tt);if(typeof Ht=="function")dt=Ht();else{var Jt=kt;Yt!==void 0&&Jt!==void 0&&(Jt=Yt(Jt)),dt=jsxRuntimeExports.jsxs("div",{style:Kt.tooltip.basic,children:[Ft&&jsxRuntimeExports.jsx(w$4,{color:Ut,style:Kt.tooltip.chip}),Jt!==void 0?jsxRuntimeExports.jsxs("span",{children:[$t,": ",jsxRuntimeExports.jsx("strong",{children:""+Jt})]}):$t]})}return jsxRuntimeExports.jsx("div",{style:Kt.tooltip.container,role:"tooltip",children:dt})}),C$4={width:"100%",borderCollapse:"collapse"},E$6=reactExports.memo(function(et){var dt,$t=et.title,kt=et.rows,Tt=kt===void 0?[]:kt,Dt=et.renderContent,Ft=M$3();return Tt.length?(dt=typeof Dt=="function"?Dt():jsxRuntimeExports.jsxs("div",{children:[$t&&$t,jsxRuntimeExports.jsx("table",{style:v$3({},C$4,Ft.tooltip.table),children:jsxRuntimeExports.jsx("tbody",{children:Tt.map(function(Ut,Ht){return jsxRuntimeExports.jsx("tr",{children:Ut.map(function(Kt,Yt){return jsxRuntimeExports.jsx("td",{style:Ft.tooltip.tableCell,children:Kt},Yt)})},Ht)})})})]}),jsxRuntimeExports.jsx("div",{style:Ft.tooltip.container,children:dt})):null});E$6.displayName="TableTooltip";var P$3=reactExports.memo(function(et){var dt=et.x0,$t=et.x1,kt=et.y0,Tt=et.y1,Dt=M$3(),Ft=Dr(),Ut=Ft.animate,Ht=Ft.config,Kt=reactExports.useMemo(function(){return v$3({},Dt.crosshair.line,{pointerEvents:"none"})},[Dt.crosshair.line]),Yt=useSpring$3({x1:dt,x2:$t,y1:kt,y2:Tt,config:Ht,immediate:!Ut});return jsxRuntimeExports.jsx(animated$5.line,v$3({},Yt,{fill:"none",style:Kt}))});P$3.displayName="CrosshairLine";var V$1=reactExports.memo(function(et){var dt,$t,kt=et.width,Tt=et.height,Dt=et.type,Ft=et.x,Ut=et.y;return Dt==="cross"?(dt={x0:Ft,x1:Ft,y0:0,y1:Tt},$t={x0:0,x1:kt,y0:Ut,y1:Ut}):Dt==="top-left"?(dt={x0:Ft,x1:Ft,y0:0,y1:Ut},$t={x0:0,x1:Ft,y0:Ut,y1:Ut}):Dt==="top"?dt={x0:Ft,x1:Ft,y0:0,y1:Ut}:Dt==="top-right"?(dt={x0:Ft,x1:Ft,y0:0,y1:Ut},$t={x0:Ft,x1:kt,y0:Ut,y1:Ut}):Dt==="right"?$t={x0:Ft,x1:kt,y0:Ut,y1:Ut}:Dt==="bottom-right"?(dt={x0:Ft,x1:Ft,y0:Ut,y1:Tt},$t={x0:Ft,x1:kt,y0:Ut,y1:Ut}):Dt==="bottom"?dt={x0:Ft,x1:Ft,y0:Ut,y1:Tt}:Dt==="bottom-left"?(dt={x0:Ft,x1:Ft,y0:Ut,y1:Tt},$t={x0:0,x1:Ft,y0:Ut,y1:Ut}):Dt==="left"?$t={x0:0,x1:Ft,y0:Ut,y1:Ut}:Dt==="x"?dt={x0:Ft,x1:Ft,y0:0,y1:Tt}:Dt==="y"&&($t={x0:0,x1:kt,y0:Ut,y1:Ut}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[dt&&jsxRuntimeExports.jsx(P$3,{x0:dt.x0,x1:dt.x1,y0:dt.y0,y1:dt.y1}),$t&&jsxRuntimeExports.jsx(P$3,{x0:$t.x0,x1:$t.x1,y0:$t.y0,y1:$t.y1})]})});V$1.displayName="Crosshair";var O$4=reactExports.createContext({showTooltipAt:function(){},showTooltipFromEvent:function(){},hideTooltip:function(){}}),N$1={isVisible:!1,position:[null,null],content:null,anchor:null},j$4=reactExports.createContext(N$1),k$4=function(et){var dt=reactExports.useState(N$1),$t=dt[0],kt=dt[1],Tt=reactExports.useCallback(function(Ut,Ht,Kt){var Yt=Ht[0],Jt=Ht[1];Kt===void 0&&(Kt="top"),kt({isVisible:!0,position:[Yt,Jt],anchor:Kt,content:Ut})},[kt]),Dt=reactExports.useCallback(function(Ut,Ht,Kt){Kt===void 0&&(Kt="top");var Yt=et.current.getBoundingClientRect(),Jt=et.current.offsetWidth,Zt=Jt===Yt.width?1:Jt/Yt.width,er="touches"in Ht?Ht.touches[0]:Ht,rr=er.clientX,sr=er.clientY,nr=(rr-Yt.left)*Zt,ir=(sr-Yt.top)*Zt;Kt!=="left"&&Kt!=="right"||(Kt=nr<Yt.width/2?"right":"left"),kt({isVisible:!0,position:[nr,ir],anchor:Kt,content:Ut})},[et,kt]),Ft=reactExports.useCallback(function(){kt(N$1)},[kt]);return{actions:reactExports.useMemo(function(){return{showTooltipAt:Tt,showTooltipFromEvent:Dt,hideTooltip:Ft}},[Tt,Dt,Ft]),state:$t}},z$4=function(){var et=reactExports.useContext(O$4);if(et===void 0)throw new Error("useTooltip must be used within a TooltipProvider");return et},A$5=function(){var et=reactExports.useContext(j$4);if(et===void 0)throw new Error("useTooltipState must be used within a TooltipProvider");return et},F$1=function(et){return et.isVisible},M$2=function(){var et=A$5();return F$1(et)?jsxRuntimeExports.jsx(g$2,{position:et.position,anchor:et.anchor,children:et.content}):null},W$5=function(et){var dt=et.container,$t=et.children,kt=k$4(dt),Tt=kt.actions,Dt=kt.state;return jsxRuntimeExports.jsx(O$4.Provider,{value:Tt,children:jsxRuntimeExports.jsx(j$4.Provider,{value:Dt,children:$t})})},baseGetTag$2=_baseGetTag,isArray$8=isArray_1,isObjectLike$4=isObjectLike_1,stringTag$3="[object String]";function isString(et){return typeof et=="string"||!isArray$8(et)&&isObjectLike$4(et)&&baseGetTag$2(et)==stringTag$3}var isString_1=isString;const _$3=getDefaultExportFromCjs(isString_1);var updateQueue$4=makeQueue$4(),raf$4=et=>schedule$4(et,updateQueue$4),writeQueue$4=makeQueue$4();raf$4.write=et=>schedule$4(et,writeQueue$4);var onStartQueue$4=makeQueue$4();raf$4.onStart=et=>schedule$4(et,onStartQueue$4);var onFrameQueue$4=makeQueue$4();raf$4.onFrame=et=>schedule$4(et,onFrameQueue$4);var onFinishQueue$4=makeQueue$4();raf$4.onFinish=et=>schedule$4(et,onFinishQueue$4);var timeouts$4=[];raf$4.setTimeout=(et,dt)=>{const $t=raf$4.now()+dt,kt=()=>{const Dt=timeouts$4.findIndex(Ft=>Ft.cancel==kt);~Dt&&timeouts$4.splice(Dt,1),pendingCount$4-=~Dt?1:0},Tt={time:$t,handler:et,cancel:kt};return timeouts$4.splice(findTimeout$4($t),0,Tt),pendingCount$4+=1,start$4(),Tt};var findTimeout$4=et=>~(~timeouts$4.findIndex(dt=>dt.time>et)||~timeouts$4.length);raf$4.cancel=et=>{onStartQueue$4.delete(et),onFrameQueue$4.delete(et),onFinishQueue$4.delete(et),updateQueue$4.delete(et),writeQueue$4.delete(et)};raf$4.sync=et=>{sync$4=!0,raf$4.batchedUpdates(et),sync$4=!1};raf$4.throttle=et=>{let dt;function $t(){try{et(...dt)}finally{dt=null}}function kt(...Tt){dt=Tt,raf$4.onStart($t)}return kt.handler=et,kt.cancel=()=>{onStartQueue$4.delete($t),dt=null},kt};var nativeRaf$4=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$4.use=et=>nativeRaf$4=et;raf$4.now=typeof performance<"u"?()=>performance.now():Date.now;raf$4.batchedUpdates=et=>et();raf$4.catch=console.error;raf$4.frameLoop="always";raf$4.advance=()=>{raf$4.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$4()};var ts$4=-1,pendingCount$4=0,sync$4=!1;function schedule$4(et,dt){sync$4?(dt.delete(et),et(0)):(dt.add(et),start$4())}function start$4(){ts$4<0&&(ts$4=0,raf$4.frameLoop!=="demand"&&nativeRaf$4(loop$4))}function stop$4(){ts$4=-1}function loop$4(){~ts$4&&(nativeRaf$4(loop$4),raf$4.batchedUpdates(update$4))}function update$4(){const et=ts$4;ts$4=raf$4.now();const dt=findTimeout$4(ts$4);if(dt&&(eachSafely$4(timeouts$4.splice(0,dt),$t=>$t.handler()),pendingCount$4-=dt),!pendingCount$4){stop$4();return}onStartQueue$4.flush(),updateQueue$4.flush(et?Math.min(64,ts$4-et):16.667),onFrameQueue$4.flush(),writeQueue$4.flush(),onFinishQueue$4.flush()}function makeQueue$4(){let et=new Set,dt=et;return{add($t){pendingCount$4+=dt==et&&!et.has($t)?1:0,et.add($t)},delete($t){return pendingCount$4-=dt==et&&et.has($t)?1:0,et.delete($t)},flush($t){dt.size&&(et=new Set,pendingCount$4-=dt.size,eachSafely$4(dt,kt=>kt($t)&&et.add(kt)),pendingCount$4+=et.size,dt=et)}}}function eachSafely$4(et,dt){et.forEach($t=>{try{dt($t)}catch(kt){raf$4.catch(kt)}})}var __defProp$4=Object.defineProperty,__export$4=(et,dt)=>{for(var $t in dt)__defProp$4(et,$t,{get:dt[$t],enumerable:!0})},globals_exports$4={};__export$4(globals_exports$4,{assign:()=>assign$4,colors:()=>colors$5,createStringInterpolator:()=>createStringInterpolator$4,skipAnimation:()=>skipAnimation$4,to:()=>to$6,willAdvance:()=>willAdvance$4});function noop$7(){}var defineHidden$4=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),is$4={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$5(et,dt){if(is$4.arr(et)){if(!is$4.arr(dt)||et.length!==dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(et[$t]!==dt[$t])return!1;return!0}return et===dt}var each$4=(et,dt)=>et.forEach(dt);function eachProp$4(et,dt,$t){if(is$4.arr(et)){for(let kt=0;kt<et.length;kt++)dt.call($t,et[kt],`${kt}`);return}for(const kt in et)et.hasOwnProperty(kt)&&dt.call($t,et[kt],kt)}var toArray$4=et=>is$4.und(et)?[]:is$4.arr(et)?et:[et];function flush$3(et,dt){if(et.size){const $t=Array.from(et);et.clear(),each$4($t,dt)}}var flushCalls$3=(et,...dt)=>flush$3(et,$t=>$t(...dt)),isSSR$4=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$4,to$6,colors$5=null,skipAnimation$4=!1,willAdvance$4=noop$7,assign$4=et=>{et.to&&(to$6=et.to),et.now&&(raf$4.now=et.now),et.colors!==void 0&&(colors$5=et.colors),et.skipAnimation!=null&&(skipAnimation$4=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$4=et.createStringInterpolator),et.requestAnimationFrame&&raf$4.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$4.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$4=et.willAdvance),et.frameLoop&&(raf$4.frameLoop=et.frameLoop)},startQueue$4=new Set,currentFrame$4=[],prevFrame$4=[],priority$4=0,frameLoop$4={get idle(){return!startQueue$4.size&&!currentFrame$4.length},start(et){priority$4>et.priority?(startQueue$4.add(et),raf$4.onStart(flushStartQueue$4)):(startSafely$4(et),raf$4(advance$4))},advance:advance$4,sort(et){if(priority$4)raf$4.onFrame(()=>frameLoop$4.sort(et));else{const dt=currentFrame$4.indexOf(et);~dt&&(currentFrame$4.splice(dt,1),startUnsafely$4(et))}},clear(){currentFrame$4=[],startQueue$4.clear()}};function flushStartQueue$4(){startQueue$4.forEach(startSafely$4),startQueue$4.clear(),raf$4(advance$4)}function startSafely$4(et){currentFrame$4.includes(et)||startUnsafely$4(et)}function startUnsafely$4(et){currentFrame$4.splice(findIndex$4(currentFrame$4,dt=>dt.priority>et.priority),0,et)}function advance$4(et){const dt=prevFrame$4;for(let $t=0;$t<currentFrame$4.length;$t++){const kt=currentFrame$4[$t];priority$4=kt.priority,kt.idle||(willAdvance$4(kt),kt.advance(et),kt.idle||dt.push(kt))}return priority$4=0,prevFrame$4=currentFrame$4,prevFrame$4.length=0,currentFrame$4=dt,currentFrame$4.length>0}function findIndex$4(et,dt){const $t=et.findIndex(dt);return $t<0?et.length:$t}var clamp$3=(et,dt,$t)=>Math.min(Math.max($t,et),dt),colors2$4={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$4="[-+]?\\d*\\.?\\d+",PERCENTAGE$4=NUMBER$4+"%";function call$4(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$6=new RegExp("rgb"+call$4(NUMBER$4,NUMBER$4,NUMBER$4)),rgba$5=new RegExp("rgba"+call$4(NUMBER$4,NUMBER$4,NUMBER$4,NUMBER$4)),hsl$5=new RegExp("hsl"+call$4(NUMBER$4,PERCENTAGE$4,PERCENTAGE$4)),hsla$5=new RegExp("hsla"+call$4(NUMBER$4,PERCENTAGE$4,PERCENTAGE$4,NUMBER$4)),hex3$4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$4=/^#([0-9a-fA-F]{6})$/,hex8$4=/^#([0-9a-fA-F]{8})$/;function normalizeColor$4(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$4.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$5&&colors$5[et]!==void 0?colors$5[et]:(dt=rgb$6.exec(et))?(parse255$4(dt[1])<<24|parse255$4(dt[2])<<16|parse255$4(dt[3])<<8|255)>>>0:(dt=rgba$5.exec(et))?(parse255$4(dt[1])<<24|parse255$4(dt[2])<<16|parse255$4(dt[3])<<8|parse1$4(dt[4]))>>>0:(dt=hex3$4.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$4.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$4.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$5.exec(et))?(hslToRgb$4(parse360$4(dt[1]),parsePercentage$4(dt[2]),parsePercentage$4(dt[3]))|255)>>>0:(dt=hsla$5.exec(et))?(hslToRgb$4(parse360$4(dt[1]),parsePercentage$4(dt[2]),parsePercentage$4(dt[3]))|parse1$4(dt[4]))>>>0:null}function hue2rgb$4(et,dt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?et+(dt-et)*6*$t:$t<1/2?dt:$t<2/3?et+(dt-et)*(2/3-$t)*6:et}function hslToRgb$4(et,dt,$t){const kt=$t<.5?$t*(1+dt):$t+dt-$t*dt,Tt=2*$t-kt,Dt=hue2rgb$4(Tt,kt,et+1/3),Ft=hue2rgb$4(Tt,kt,et),Ut=hue2rgb$4(Tt,kt,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$4(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$4(et){return(parseFloat(et)%360+360)%360/360}function parse1$4(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$4(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$4(et){let dt=normalizeColor$4(et);if(dt===null)return et;dt=dt||0;const $t=(dt&4278190080)>>>24,kt=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${$t}, ${kt}, ${Tt}, ${Dt})`}var createInterpolator$4=(et,dt,$t)=>{if(is$4.fun(et))return et;if(is$4.arr(et))return createInterpolator$4({range:et,output:dt,extrapolate:$t});if(is$4.str(et.output[0]))return createStringInterpolator$4(et);const kt=et,Tt=kt.output,Dt=kt.range||[0,1],Ft=kt.extrapolateLeft||kt.extrapolate||"extend",Ut=kt.extrapolateRight||kt.extrapolate||"extend",Ht=kt.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$4(Kt,Dt);return interpolate$5(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,kt.map)}};function interpolate$5(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>$t){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=$t)}return kt===Tt?kt:dt===$t?et<=dt?kt:Tt:(dt===-1/0?Kt=-Kt:$t===1/0?Kt=Kt-dt:Kt=(Kt-dt)/($t-dt),Kt=Dt(Kt),kt===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+kt:Kt=Kt*(Tt-kt)+kt,Kt)}function findRange$4(et,dt){for(var $t=1;$t<dt.length-1&&!(dt[$t]>=et);++$t);return $t-1}var steps$3=(et,dt="end")=>$t=>{$t=dt==="end"?Math.min($t,.999):Math.max($t,.001);const kt=$t*et,Tt=dt==="end"?Math.floor(kt):Math.ceil(kt);return clamp$3(0,1,Tt/et)},c1$3=1.70158,c2$3=c1$3*1.525,c3$3=c1$3+1,c4$3=2*Math.PI/3,c5$3=2*Math.PI/4.5,bounceOut$3=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings$3={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3$3*et*et*et-c1$3*et*et,easeOutBack:et=>1+c3$3*Math.pow(et-1,3)+c1$3*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2$3+1)*2*et-c2$3)/2:(Math.pow(2*et-2,2)*((c2$3+1)*(et*2-2)+c2$3)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4$3),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4$3)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5$3))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5$3)/2+1,easeInBounce:et=>1-bounceOut$3(1-et),easeOutBounce:bounceOut$3,easeInOutBounce:et=>et<.5?(1-bounceOut$3(1-2*et))/2:(1+bounceOut$3(2*et-1))/2,steps:steps$3},$get$4=Symbol.for("FluidValue.get"),$observers$4=Symbol.for("FluidValue.observers"),hasFluidValue$4=et=>!!(et&&et[$get$4]),getFluidValue$4=et=>et&&et[$get$4]?et[$get$4]():et,getFluidObservers$3=et=>et[$observers$4]||null;function callFluidObserver$4(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$4(et,dt){const $t=et[$observers$4];$t&&$t.forEach(kt=>{callFluidObserver$4(kt,dt)})}var FluidValue$4=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$4(this,dt)}},setFluidGetter$4=(et,dt)=>setHidden$4(et,$get$4,dt);function addFluidObserver$4(et,dt){if(et[$get$4]){let $t=et[$observers$4];$t||setHidden$4(et,$observers$4,$t=new Set),$t.has(dt)||($t.add(dt),et.observerAdded&&et.observerAdded($t.size,dt))}return dt}function removeFluidObserver$4(et,dt){const $t=et[$observers$4];if($t&&$t.has(dt)){const kt=$t.size-1;kt?$t.delete(dt):et[$observers$4]=null,et.observerRemoved&&et.observerRemoved(kt,dt)}}var setHidden$4=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),numberRegex$4=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$4=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$4=new RegExp(`(${numberRegex$4.source})(%|[a-z]+)`,"i"),rgbaRegex$4=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$4=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$4=et=>{const[dt,$t]=parseCSSVariable$4(et);if(!dt||isSSR$4())return et;const kt=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if(kt)return kt.trim();if($t&&$t.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue($t);return Tt||et}else{if($t&&cssVariableRegex$4.test($t))return variableToRgba$4($t);if($t)return $t}return et},parseCSSVariable$4=et=>{const dt=cssVariableRegex$4.exec(et);if(!dt)return[,];const[,$t,kt]=dt;return[$t,kt]},namedColorRegex$4,rgbaRound$4=(et,dt,$t,kt,Tt)=>`rgba(${Math.round(dt)}, ${Math.round($t)}, ${Math.round(kt)}, ${Tt})`,createStringInterpolator2$4=et=>{namedColorRegex$4||(namedColorRegex$4=colors$5?new RegExp(`(${Object.keys(colors$5).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$4(Dt).replace(cssVariableRegex$4,variableToRgba$4).replace(colorRegex$4,colorToRgba$4).replace(namedColorRegex$4,colorToRgba$4)),$t=dt.map(Dt=>Dt.match(numberRegex$4).map(Number)),Tt=$t[0].map((Dt,Ft)=>$t.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$4({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$4.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$4.test(Kt)))==null?void 0:Ht.replace(numberRegex$4,""));let Ut=0;return dt[0].replace(numberRegex$4,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$4,rgbaRound$4)}},prefix$4="react-spring: ",once$4=et=>{const dt=et;let $t=!1;if(typeof dt!="function")throw new TypeError(`${prefix$4}once requires a function parameter`);return(...kt)=>{$t||(dt(...kt),$t=!0)}},warnInterpolate$4=once$4(console.warn);function deprecateInterpolate$4(){warnInterpolate$4(`${prefix$4}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall$3=once$4(console.warn);function deprecateDirectCall$3(){warnDirectCall$3(`${prefix$4}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString$4(et){return is$4.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$4()&&cssVariableRegex$4.test(et)||et in(colors$5||{}))}var useIsomorphicLayoutEffect$4=isSSR$4()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$4=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$4(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$4(){const et=reactExports.useState()[1],dt=useIsMounted$4();return()=>{dt.current&&et(Math.random())}}var useOnce$4=et=>reactExports.useEffect(et,emptyDeps$4),emptyDeps$4=[];function usePrev$3(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node$4=Symbol.for("Animated:node"),isAnimated$4=et=>!!et&&et[$node$4]===et,getAnimated$4=et=>et&&et[$node$4],setAnimated$4=(et,dt)=>defineHidden$4(et,$node$4,dt),getPayload$4=et=>et&&et[$node$4]&&et[$node$4].getPayload(),Animated$4=class{constructor(){setAnimated$4(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$4=class G_ extends Animated$4{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$4.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new G_(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,$t){return is$4.num(dt)&&(this.lastPosition=dt,$t&&(dt=Math.round(dt/$t)*$t,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$4.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$4=class W_ extends AnimatedValue$4{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$4({output:[dt,dt]})}static create(dt){return new W_(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$4.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$4({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$4={dependencies:null},AnimatedObject$4=class extends Animated$4{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const $t={};return eachProp$4(this.source,(kt,Tt)=>{isAnimated$4(kt)?$t[Tt]=kt.getValue(dt):hasFluidValue$4(kt)?$t[Tt]=getFluidValue$4(kt):dt||($t[Tt]=kt)}),$t}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$4(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const $t=new Set;return eachProp$4(dt,this._addToPayload,$t),Array.from($t)}}_addToPayload(dt){TreeContext$4.dependencies&&hasFluidValue$4(dt)&&TreeContext$4.dependencies.add(dt);const $t=getPayload$4(dt);$t&&each$4($t,kt=>this.add(kt))}},AnimatedArray$4=class q_ extends AnimatedObject$4{constructor(dt){super(dt)}static create(dt){return new q_(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const $t=this.getPayload();return dt.length==$t.length?$t.map((kt,Tt)=>kt.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$4)),!0)}};function makeAnimated$4(et){return(isAnimatedString$4(et)?AnimatedString$4:AnimatedValue$4).create(et)}function getAnimatedType$4(et){const dt=getAnimated$4(et);return dt?dt.constructor:is$4.arr(et)?AnimatedArray$4:isAnimatedString$4(et)?AnimatedString$4:AnimatedValue$4}var withAnimated$4=(et,dt)=>{const $t=!is$4.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef((kt,Tt)=>{const Dt=reactExports.useRef(null),Ft=$t&&reactExports.useCallback(rr=>{Dt.current=updateRef$4(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$4(kt,dt),Kt=useForceUpdate$4(),Yt=()=>{const rr=Dt.current;if($t&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$4(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$4(()=>(Zt.current=Jt,each$4(Ht,rr=>addFluidObserver$4(rr,Jt)),()=>{Zt.current&&(each$4(Zt.current.deps,rr=>removeFluidObserver$4(rr,Zt.current)),raf$4.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$4(()=>()=>{const rr=Zt.current;each$4(rr.deps,sr=>removeFluidObserver$4(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$4=class{constructor(dt,$t){this.update=dt,this.deps=$t}eventObserved(dt){dt.type=="change"&&raf$4.write(this.update)}};function getAnimatedState$4(et,dt){const $t=new Set;return TreeContext$4.dependencies=$t,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$4(et),TreeContext$4.dependencies=null,[et,$t]}function updateRef$4(et,dt){return et&&(is$4.fun(et)?et(dt):et.current=dt),dt}var cacheKey$4=Symbol.for("AnimatedComponent"),createHost$4=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:$t=Tt=>new AnimatedObject$4(Tt),getComponentProps:kt=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:$t,getComponentProps:kt},Dt=Ft=>{const Ut=getDisplayName$4(Ft)||"Anonymous";return is$4.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$4(Ft,Tt)):Ft=Ft[cacheKey$4]||(Ft[cacheKey$4]=withAnimated$4(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$4(et,(Ft,Ut)=>{is$4.arr(et)&&(Ut=getDisplayName$4(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$4=et=>is$4.str(et)?et:et&&is$4.str(et.displayName)?et.displayName:is$4.fun(et)&&et.name||null;function callProp$3(et,...dt){return is$4.fun(et)?et(...dt):et}var matchProp$3=(et,dt)=>et===!0||!!(dt&&et&&(is$4.fun(et)?et(dt):toArray$4(et).includes(dt))),resolveProp$3=(et,dt)=>is$4.obj(et)?dt&&et[dt]:et,getDefaultProp$3=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform$3=et=>et,getDefaultProps$3=(et,dt=noopTransform$3)=>{let $t=DEFAULT_PROPS$3;et.default&&et.default!==!0&&(et=et.default,$t=Object.keys(et));const kt={};for(const Tt of $t){const Dt=dt(et[Tt],Tt);is$4.und(Dt)||(kt[Tt]=Dt)}return kt},DEFAULT_PROPS$3=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$3={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps$3(et){const dt={};let $t=0;if(eachProp$4(et,(kt,Tt)=>{RESERVED_PROPS$3[Tt]||(dt[Tt]=kt,$t++)}),$t)return dt}function inferTo$3(et){const dt=getForwardProps$3(et);if(dt){const $t={to:dt};return eachProp$4(et,(kt,Tt)=>Tt in dt||($t[Tt]=kt)),$t}return{...et}}function computeGoal$3(et){return et=getFluidValue$4(et),is$4.arr(et)?et.map(computeGoal$3):isAnimatedString$4(et)?globals_exports$4.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps$3(et){for(const dt in et)return!0;return!1}function isAsyncTo$3(et){return is$4.fun(et)||is$4.arr(et)&&is$4.obj(et[0])}function detachRefs$3(et,dt){var $t;($t=et.ref)==null||$t.delete(et),dt==null||dt.delete(et)}function replaceRef$3(et,dt){var $t;dt&&et.ref!==dt&&(($t=et.ref)==null||$t.delete(et),dt.add(et),et.ref=dt)}var config$3={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults$3={...config$3.default,mass:1,damping:1,easing:easings$3.linear,clamp:!1},AnimationConfig$3=class{constructor(){this.velocity=0,Object.assign(this,defaults$3)}};function mergeConfig$3(et,dt,$t){$t&&($t={...$t},sanitizeConfig$3($t,dt),dt={...$t,...dt}),sanitizeConfig$3(et,dt),Object.assign(et,dt);for(const Ft in defaults$3)et[Ft]==null&&(et[Ft]=defaults$3[Ft]);let{frequency:kt,damping:Tt}=et;const{mass:Dt}=et;return is$4.und(kt)||(kt<.01&&(kt=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/kt,2)*Dt,et.friction=4*Math.PI*Tt*Dt/kt),et}function sanitizeConfig$3(et,dt){if(!is$4.und(dt.decay))et.duration=void 0;else{const $t=!is$4.und(dt.tension)||!is$4.und(dt.friction);($t||!is$4.und(dt.frequency)||!is$4.und(dt.damping)||!is$4.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),$t&&(et.frequency=void 0)}}var emptyArray$3=[],Animation$3=class{constructor(){this.changed=!1,this.values=emptyArray$3,this.toValues=null,this.fromValues=emptyArray$3,this.config=new AnimationConfig$3,this.immediate=!1}};function scheduleProps$3(et,{key:dt,props:$t,defaultProps:kt,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp$3($t.cancel??(kt==null?void 0:kt.cancel),dt);if(Yt)er();else{is$4.und($t.pause)||(Tt.paused=matchProp$3($t.pause,dt));let rr=kt==null?void 0:kt.pause;rr!==!0&&(rr=Tt.paused||matchProp$3(rr,dt)),Ht=callProp$3($t.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf$4.now()}function Zt(){Ht>0&&!globals_exports$4.skipAnimation?(Tt.delayed=!0,Kt=raf$4.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...$t,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult$3=(et,dt)=>dt.length==1?dt[0]:dt.some($t=>$t.cancelled)?getCancelledResult$3(et.get()):dt.every($t=>$t.noop)?getNoopResult$3(et.get()):getFinishedResult$3(et.get(),dt.every($t=>$t.finished)),getNoopResult$3=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult$3=(et,dt,$t=!1)=>({value:et,finished:dt,cancelled:$t}),getCancelledResult$3=et=>({value:et,cancelled:!0,finished:!1});function runAsync$3(et,dt,$t,kt){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=$t;return!Dt&&et===Ut&&!dt.reset?Ht:$t.promise=(async()=>{$t.asyncId=Tt,$t.asyncTo=et;const Kt=getDefaultProps$3(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=($t.cancelId||0)&&getCancelledResult$3(kt)||Tt!==$t.asyncId&&getFinishedResult$3(kt,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const or=new BailSignal$3,lr=new SkipAnimationSignal$3;return(async()=>{if(globals_exports$4.skipAnimation)throw stopAsync$3($t),lr.result=getFinishedResult$3(kt,!1),Jt(lr),lr;er(or);const cr=is$4.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp$4(Kt,(ur,pr)=>{is$4.und(cr[pr])&&(cr[pr]=ur)});const dr=await kt.start(cr);return er(or),$t.paused&&await new Promise(ur=>{$t.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports$4.skipAnimation)return stopAsync$3($t),getFinishedResult$3(kt,!1);try{let nr;is$4.arr(et)?nr=(async ir=>{for(const or of ir)await rr(or)})(et):nr=Promise.resolve(et(rr,kt.stop.bind(kt))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult$3(kt.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal$3)sr=nr.result;else if(nr instanceof SkipAnimationSignal$3)sr=nr.result;else throw nr}finally{Tt==$t.asyncId&&($t.asyncId=Dt,$t.asyncTo=Dt?Ut:void 0,$t.promise=Dt?Ht:void 0)}return is$4.fun(Ft)&&raf$4.batchedUpdates(()=>{Ft(sr,kt,kt.item)}),sr})()}function stopAsync$3(et,dt){flush$3(et.timeouts,$t=>$t.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal$3=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal$3=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue$4=et=>et instanceof FrameValue$4,nextId$4=1,FrameValue$4=class extends FluidValue$4{constructor(){super(...arguments),this.id=nextId$4++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$4(this);return dt&&dt.getValue()}to(...dt){return globals_exports$4.to(this,dt)}interpolate(...dt){return deprecateInterpolate$4(),globals_exports$4.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,$t=!1){callFluidObservers$4(this,{type:"change",parent:this,value:dt,idle:$t})}_onPriorityChange(dt){this.idle||frameLoop$4.sort(this),callFluidObservers$4(this,{type:"priority",parent:this,priority:dt})}},$P$3=Symbol.for("SpringPhase"),HAS_ANIMATED$3=1,IS_ANIMATING$3=2,IS_PAUSED$3=4,hasAnimated$3=et=>(et[$P$3]&HAS_ANIMATED$3)>0,isAnimating$3=et=>(et[$P$3]&IS_ANIMATING$3)>0,isPaused$3=et=>(et[$P$3]&IS_PAUSED$3)>0,setActiveBit$3=(et,dt)=>dt?et[$P$3]|=IS_ANIMATING$3|HAS_ANIMATED$3:et[$P$3]&=~IS_ANIMATING$3,setPausedBit$3=(et,dt)=>dt?et[$P$3]|=IS_PAUSED$3:et[$P$3]&=~IS_PAUSED$3,SpringValue$3=class extends FrameValue$4{constructor(dt,$t){if(super(),this.animation=new Animation$3,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$4.und(dt)||!is$4.und($t)){const kt=is$4.obj(dt)?{...dt}:{...$t,from:dt};is$4.und(kt.default)&&(kt.default=!0),this.start(kt)}}get idle(){return!(isAnimating$3(this)||this._state.asyncTo)||isPaused$3(this)}get goal(){return getFluidValue$4(this.animation.to)}get velocity(){const dt=getAnimated$4(this);return dt instanceof AnimatedValue$4?dt.lastVelocity||0:dt.getPayload().map($t=>$t.lastVelocity||0)}get hasAnimated(){return hasAnimated$3(this)}get isAnimating(){return isAnimating$3(this)}get isPaused(){return isPaused$3(this)}get isDelayed(){return this._state.delayed}advance(dt){let $t=!0,kt=!1;const Tt=this.animation;let{toValues:Dt}=Tt;const{config:Ft}=Tt,Ut=getPayload$4(Tt.to);!Ut&&hasFluidValue$4(Tt.to)&&(Dt=toArray$4(getFluidValue$4(Tt.to))),Tt.values.forEach((Yt,Jt)=>{if(Yt.done)return;const Zt=Yt.constructor==AnimatedString$4?1:Ut?Ut[Jt].lastPosition:Dt[Jt];let er=Tt.immediate,rr=Zt;if(!er){if(rr=Yt.lastPosition,Ft.tension<=0){Yt.done=!0;return}let sr=Yt.elapsedTime+=dt;const nr=Tt.fromValues[Jt],ir=Yt.v0!=null?Yt.v0:Yt.v0=is$4.arr(Ft.velocity)?Ft.velocity[Jt]:Ft.velocity;let or;const lr=Ft.precision||(nr==Zt?.005:Math.min(1,Math.abs(Zt-nr)*.001));if(is$4.und(Ft.duration))if(Ft.decay){const cr=Ft.decay===!0?.998:Ft.decay,dr=Math.exp(-(1-cr)*sr);rr=nr+ir/(1-cr)*(1-dr),er=Math.abs(Yt.lastPosition-rr)<=lr,or=ir*dr}else{or=Yt.lastVelocity==null?ir:Yt.lastVelocity;const cr=Ft.restVelocity||lr/10,dr=Ft.clamp?0:Ft.bounce,ur=!is$4.und(dr),pr=nr==Zt?Yt.v0>0:nr<Zt;let mr,jr=!1;const Rr=1,xr=Math.ceil(dt/Rr);for(let kr=0;kr<xr&&(mr=Math.abs(or)>cr,!(!mr&&(er=Math.abs(Zt-rr)<=lr,er)));++kr){ur&&(jr=rr==Zt||rr>Zt==pr,jr&&(or=-or*dr,rr=Zt));const Mr=-Ft.tension*1e-6*(rr-Zt),Tr=-Ft.friction*.001*or,Or=(Mr+Tr)/Ft.mass;or=or+Or*Rr,rr=rr+or*Rr}}else{let cr=1;Ft.duration>0&&(this._memoizedDuration!==Ft.duration&&(this._memoizedDuration=Ft.duration,Yt.durationProgress>0&&(Yt.elapsedTime=Ft.duration*Yt.durationProgress,sr=Yt.elapsedTime+=dt)),cr=(Ft.progress||0)+sr/this._memoizedDuration,cr=cr>1?1:cr<0?0:cr,Yt.durationProgress=cr),rr=nr+Ft.easing(cr)*(Zt-nr),or=(rr-Yt.lastPosition)/dt,er=cr==1}Yt.lastVelocity=or,Number.isNaN(rr)&&(console.warn("Got NaN while animating:",this),er=!0)}Ut&&!Ut[Jt].done&&(er=!1),er?Yt.done=!0:$t=!1,Yt.setValue(rr,Ft.round)&&(kt=!0)});const Ht=getAnimated$4(this),Kt=Ht.getValue();if($t){const Yt=getFluidValue$4(Tt.to);(Kt!==Yt||kt)&&!Ft.decay?(Ht.setValue(Yt),this._onChange(Yt)):kt&&Ft.decay&&this._onChange(Kt),this._stop()}else kt&&this._onChange(Kt)}set(dt){return raf$4.batchedUpdates(()=>{this._stop(),this._focus(dt),this._set(dt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$3(this)){const{to:dt,config:$t}=this.animation;raf$4.batchedUpdates(()=>{this._onStart(),$t.decay||this._set(dt,!1),this._stop()})}return this}update(dt){return(this.queue||(this.queue=[])).push(dt),this}start(dt,$t){let kt;return is$4.und(dt)?(kt=this.queue||[],this.queue=[]):kt=[is$4.obj(dt)?dt:{...$t,to:dt}],Promise.all(kt.map(Tt=>this._update(Tt))).then(Tt=>getCombinedResult$3(this,Tt))}stop(dt){const{to:$t}=this.animation;return this._focus(this.get()),stopAsync$3(this._state,dt&&this._lastCallId),raf$4.batchedUpdates(()=>this._stop($t,dt)),this}reset(){this._update({reset:!0})}eventObserved(dt){dt.type=="change"?this._start():dt.type=="priority"&&(this.priority=dt.priority+1)}_prepareNode(dt){const $t=this.key||"";let{to:kt,from:Tt}=dt;kt=is$4.obj(kt)?kt[$t]:kt,(kt==null||isAsyncTo$3(kt))&&(kt=void 0),Tt=is$4.obj(Tt)?Tt[$t]:Tt,Tt==null&&(Tt=void 0);const Dt={to:kt,from:Tt};return hasAnimated$3(this)||(dt.reverse&&([kt,Tt]=[Tt,kt]),Tt=getFluidValue$4(Tt),is$4.und(Tt)?getAnimated$4(this)||this._set(kt):this._set(Tt)),Dt}_update({...dt},$t){const{key:kt,defaultProps:Tt}=this;dt.default&&Object.assign(Tt,getDefaultProps$3(dt,(Ut,Ht)=>/^on/.test(Ht)?resolveProp$3(Ut,kt):Ut)),mergeActiveFn$3(this,dt,"onProps"),sendEvent$3(this,"onProps",dt,this);const Dt=this._prepareNode(dt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Ft=this._state;return scheduleProps$3(++this._lastCallId,{key:kt,props:dt,defaultProps:Tt,state:Ft,actions:{pause:()=>{isPaused$3(this)||(setPausedBit$3(this,!0),flushCalls$3(Ft.pauseQueue),sendEvent$3(this,"onPause",getFinishedResult$3(this,checkFinished$3(this,this.animation.to)),this))},resume:()=>{isPaused$3(this)&&(setPausedBit$3(this,!1),isAnimating$3(this)&&this._resume(),flushCalls$3(Ft.resumeQueue),sendEvent$3(this,"onResume",getFinishedResult$3(this,checkFinished$3(this,this.animation.to)),this))},start:this._merge.bind(this,Dt)}}).then(Ut=>{if(dt.loop&&Ut.finished&&!($t&&Ut.noop)){const Ht=createLoopUpdate$3(dt);if(Ht)return this._update(Ht,!0)}return Ut})}_merge(dt,$t,kt){if($t.cancel)return this.stop(!0),kt(getCancelledResult$3(this));const Tt=!is$4.und(dt.to),Dt=!is$4.und(dt.from);if(Tt||Dt)if($t.callId>this._lastToId)this._lastToId=$t.callId;else return kt(getCancelledResult$3(this));const{key:Ft,defaultProps:Ut,animation:Ht}=this,{to:Kt,from:Yt}=Ht;let{to:Jt=Kt,from:Zt=Yt}=dt;Dt&&!Tt&&(!$t.default||is$4.und(Jt))&&(Jt=Zt),$t.reverse&&([Jt,Zt]=[Zt,Jt]);const er=!isEqual$5(Zt,Yt);er&&(Ht.from=Zt),Zt=getFluidValue$4(Zt);const rr=!isEqual$5(Jt,Kt);rr&&this._focus(Jt);const sr=isAsyncTo$3($t.to),{config:nr}=Ht,{decay:ir,velocity:or}=nr;(Tt||Dt)&&(nr.velocity=0),$t.config&&!sr&&mergeConfig$3(nr,callProp$3($t.config,Ft),$t.config!==Ut.config?callProp$3(Ut.config,Ft):void 0);let lr=getAnimated$4(this);if(!lr||is$4.und(Jt))return kt(getFinishedResult$3(this,!0));const cr=is$4.und($t.reset)?Dt&&!$t.default:!is$4.und(Zt)&&matchProp$3($t.reset,Ft),dr=cr?Zt:this.get(),ur=computeGoal$3(Jt),pr=is$4.num(ur)||is$4.arr(ur)||isAnimatedString$4(ur),mr=!sr&&(!pr||matchProp$3(Ut.immediate||$t.immediate,Ft));if(rr){const kr=getAnimatedType$4(Jt);if(kr!==lr.constructor)if(mr)lr=this._set(ur);else throw Error(`Cannot animate between ${lr.constructor.name} and ${kr.name}, as the "to" prop suggests`)}const jr=lr.constructor;let Rr=hasFluidValue$4(Jt),xr=!1;if(!Rr){const kr=cr||!hasAnimated$3(this)&&er;(rr||kr)&&(xr=isEqual$5(computeGoal$3(dr),ur),Rr=!xr),(!isEqual$5(Ht.immediate,mr)&&!mr||!isEqual$5(nr.decay,ir)||!isEqual$5(nr.velocity,or))&&(Rr=!0)}if(xr&&isAnimating$3(this)&&(Ht.changed&&!cr?Rr=!0:Rr||this._stop(Kt)),!sr&&((Rr||hasFluidValue$4(Kt))&&(Ht.values=lr.getPayload(),Ht.toValues=hasFluidValue$4(Jt)?null:jr==AnimatedString$4?[1]:toArray$4(ur)),Ht.immediate!=mr&&(Ht.immediate=mr,!mr&&!cr&&this._set(Kt)),Rr)){const{onRest:kr}=Ht;each$4(ACTIVE_EVENTS$3,Tr=>mergeActiveFn$3(this,$t,Tr));const Mr=getFinishedResult$3(this,checkFinished$3(this,Kt));flushCalls$3(this._pendingCalls,Mr),this._pendingCalls.add(kt),Ht.changed&&raf$4.batchedUpdates(()=>{var Tr;Ht.changed=!cr,kr==null||kr(Mr,this),cr?callProp$3(Ut.onRest,Mr):(Tr=Ht.onStart)==null||Tr.call(Ht,Mr,this)})}cr&&this._set(dr),sr?kt(runAsync$3($t.to,$t,this._state,this)):Rr?this._start():isAnimating$3(this)&&!rr?this._pendingCalls.add(kt):kt(getNoopResult$3(dr))}_focus(dt){const $t=this.animation;dt!==$t.to&&(getFluidObservers$3(this)&&this._detach(),$t.to=dt,getFluidObservers$3(this)&&this._attach())}_attach(){let dt=0;const{to:$t}=this.animation;hasFluidValue$4($t)&&(addFluidObserver$4($t,this),isFrameValue$4($t)&&(dt=$t.priority+1)),this.priority=dt}_detach(){const{to:dt}=this.animation;hasFluidValue$4(dt)&&removeFluidObserver$4(dt,this)}_set(dt,$t=!0){const kt=getFluidValue$4(dt);if(!is$4.und(kt)){const Tt=getAnimated$4(this);if(!Tt||!isEqual$5(kt,Tt.getValue())){const Dt=getAnimatedType$4(kt);!Tt||Tt.constructor!=Dt?setAnimated$4(this,Dt.create(kt)):Tt.setValue(kt),Tt&&raf$4.batchedUpdates(()=>{this._onChange(kt,$t)})}}return getAnimated$4(this)}_onStart(){const dt=this.animation;dt.changed||(dt.changed=!0,sendEvent$3(this,"onStart",getFinishedResult$3(this,checkFinished$3(this,dt.to)),this))}_onChange(dt,$t){$t||(this._onStart(),callProp$3(this.animation.onChange,dt,this)),callProp$3(this.defaultProps.onChange,dt,this),super._onChange(dt,$t)}_start(){const dt=this.animation;getAnimated$4(this).reset(getFluidValue$4(dt.to)),dt.immediate||(dt.fromValues=dt.values.map($t=>$t.lastPosition)),isAnimating$3(this)||(setActiveBit$3(this,!0),isPaused$3(this)||this._resume())}_resume(){globals_exports$4.skipAnimation?this.finish():frameLoop$4.start(this)}_stop(dt,$t){if(isAnimating$3(this)){setActiveBit$3(this,!1);const kt=this.animation;each$4(kt.values,Dt=>{Dt.done=!0}),kt.toValues&&(kt.onChange=kt.onPause=kt.onResume=void 0),callFluidObservers$4(this,{type:"idle",parent:this});const Tt=$t?getCancelledResult$3(this.get()):getFinishedResult$3(this.get(),checkFinished$3(this,dt??kt.to));flushCalls$3(this._pendingCalls,Tt),kt.changed&&(kt.changed=!1,sendEvent$3(this,"onRest",Tt,this))}}};function checkFinished$3(et,dt){const $t=computeGoal$3(dt),kt=computeGoal$3(et.get());return isEqual$5(kt,$t)}function createLoopUpdate$3(et,dt=et.loop,$t=et.to){const kt=callProp$3(dt);if(kt){const Tt=kt!==!0&&inferTo$3(kt),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate$3({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo$3($t)?$t:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate$3(et){const{to:dt,from:$t}=et=inferTo$3(et),kt=new Set;return is$4.obj(dt)&&findDefined$3(dt,kt),is$4.obj($t)&&findDefined$3($t,kt),et.keys=kt.size?Array.from(kt):null,et}function declareUpdate$2(et){const dt=createUpdate$3(et);return is$4.und(dt.default)&&(dt.default=getDefaultProps$3(dt)),dt}function findDefined$3(et,dt){eachProp$4(et,($t,kt)=>$t!=null&&dt.add(kt))}var ACTIVE_EVENTS$3=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn$3(et,dt,$t){et.animation[$t]=dt[$t]!==getDefaultProp$3(dt,$t)?resolveProp$3(dt[$t],et.key):void 0}function sendEvent$3(et,dt,...$t){var kt,Tt,Dt,Ft;(Tt=(kt=et.animation)[dt])==null||Tt.call(kt,...$t),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...$t)}var BATCHED_EVENTS$3=["onStart","onChange","onRest"],nextId2$3=1,Controller$3=class{constructor(dt,$t){this.id=nextId2$3++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),$t&&(this._flush=$t),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){const dt={};return this.each(($t,kt)=>dt[kt]=$t.get()),dt}set(dt){for(const $t in dt){const kt=dt[$t];is$4.und(kt)||this.springs[$t].set(kt)}}update(dt){return dt&&this.queue.push(createUpdate$3(dt)),this}start(dt){let{queue:$t}=this;return dt?$t=toArray$4(dt).map(createUpdate$3):this.queue=[],this._flush?this._flush(this,$t):(prepareKeys$3(this,$t),flushUpdateQueue$3(this,$t))}stop(dt,$t){if(dt!==!!dt&&($t=dt),$t){const kt=this.springs;each$4(toArray$4($t),Tt=>kt[Tt].stop(!!dt))}else stopAsync$3(this._state,this._lastAsyncId),this.each(kt=>kt.stop(!!dt));return this}pause(dt){if(is$4.und(dt))this.start({pause:!0});else{const $t=this.springs;each$4(toArray$4(dt),kt=>$t[kt].pause())}return this}resume(dt){if(is$4.und(dt))this.start({pause:!1});else{const $t=this.springs;each$4(toArray$4(dt),kt=>$t[kt].resume())}return this}each(dt){eachProp$4(this.springs,dt)}_onFrame(){const{onStart:dt,onChange:$t,onRest:kt}=this._events,Tt=this._active.size>0,Dt=this._changed.size>0;(Tt&&!this._started||Dt&&!this._started)&&(this._started=!0,flush$3(dt,([Ht,Kt])=>{Kt.value=this.get(),Ht(Kt,this,this._item)}));const Ft=!Tt&&this._started,Ut=Dt||Ft&&kt.size?this.get():null;Dt&&$t.size&&flush$3($t,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}),Ft&&(this._started=!1,flush$3(kt,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;raf$4.onFrame(this._onFrame)}};function flushUpdateQueue$3(et,dt){return Promise.all(dt.map($t=>flushUpdate$3(et,$t))).then($t=>getCombinedResult$3(et,$t))}async function flushUpdate$3(et,dt,$t){const{keys:kt,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is$4.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is$4.arr(Tt)||is$4.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each$4(BATCHED_EVENTS$3,sr=>{const nr=dt[sr];if(is$4.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:or,cancelled:lr})=>{const cr=ir.get(nr);cr?(or||(cr.finished=!1),lr&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:or||!1,cancelled:lr||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls$3(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=(kt||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp$3(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps$3(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop$7,resume:noop$7,start(sr,nr){er?(stopAsync$3(Jt,et._lastAsyncId),nr(getCancelledResult$3(et))):(sr.onRest=Ut,nr(runAsync$3(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult$3(et,await Promise.all(Zt));if(Ft&&rr.finished&&!($t&&rr.noop)){const sr=createLoopUpdate$3(dt,Ft,Tt);if(sr)return prepareKeys$3(et,[sr]),flushUpdate$3(et,sr,!0)}return Ht&&raf$4.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings$3(et,dt){const $t={...et.springs};return dt&&each$4(toArray$4(dt),kt=>{is$4.und(kt.keys)&&(kt=createUpdate$3(kt)),is$4.obj(kt.to)||(kt={...kt,to:void 0}),prepareSprings$3($t,kt,Tt=>createSpring$3(Tt))}),setSprings$3(et,$t),$t}function setSprings$3(et,dt){eachProp$4(dt,($t,kt)=>{et.springs[kt]||(et.springs[kt]=$t,addFluidObserver$4($t,et))})}function createSpring$3(et,dt){const $t=new SpringValue$3;return $t.key=et,dt&&addFluidObserver$4($t,dt),$t}function prepareSprings$3(et,dt,$t){dt.keys&&each$4(dt.keys,kt=>{(et[kt]||(et[kt]=$t(kt)))._prepareNode(dt)})}function prepareKeys$3(et,dt){each$4(dt,$t=>{prepareSprings$3(et.springs,$t,kt=>createSpring$3(kt,et))})}var SpringContext$3=reactExports.createContext({pause:!1,immediate:!1}),SpringRef$3=()=>{const et=[],dt=function(kt){deprecateDirectCall$3();const Tt=[];return each$4(et,(Dt,Ft)=>{if(is$4.und(kt))Tt.push(Dt.start());else{const Ut=$t(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function(kt){et.includes(kt)||et.push(kt)},dt.delete=function(kt){const Tt=et.indexOf(kt);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each$4(et,kt=>kt.pause(...arguments)),this},dt.resume=function(){return each$4(et,kt=>kt.resume(...arguments)),this},dt.set=function(kt){each$4(et,(Tt,Dt)=>{const Ft=is$4.fun(kt)?kt(Dt,Tt):kt;Ft&&Tt.set(Ft)})},dt.start=function(kt){const Tt=[];return each$4(et,(Dt,Ft)=>{if(is$4.und(kt))Tt.push(Dt.start());else{const Ut=this._getProps(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each$4(et,kt=>kt.stop(...arguments)),this},dt.update=function(kt){return each$4(et,(Tt,Dt)=>Tt.update(this._getProps(kt,Tt,Dt))),this};const $t=function(kt,Tt,Dt){return is$4.fun(kt)?kt(Dt,Tt):kt};return dt._getProps=$t,dt};function useSprings$2(et,dt,$t){const kt=is$4.fun(dt)&&dt;kt&&!$t&&($t=[]);const Tt=reactExports.useMemo(()=>kt||arguments.length==3?SpringRef$3():void 0,[]),Dt=reactExports.useRef(0),Ft=useForceUpdate$4(),Ut=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(ir,or){const lr=getSprings$3(ir,or);return Dt.current>0&&!Ut.queue.length&&!Object.keys(lr).some(dr=>!ir.springs[dr])?flushUpdateQueue$3(ir,or):new Promise(dr=>{setSprings$3(ir,lr),Ut.queue.push(()=>{dr(flushUpdateQueue$3(ir,or))}),Ft()})}}),[]),Ht=reactExports.useRef([...Ut.ctrls]),Kt=reactExports.useRef([]),Yt=usePrev$3(et)||0;reactExports.useMemo(()=>{each$4(Ht.current.slice(et,Yt),ir=>{detachRefs$3(ir,Tt),ir.stop(!0)}),Ht.current.length=et,Jt(Yt,et)},[et]),reactExports.useMemo(()=>{Jt(0,Math.min(Yt,et))},$t);function Jt(ir,or){for(let lr=ir;lr<or;lr++){const cr=Ht.current[lr]||(Ht.current[lr]=new Controller$3(null,Ut.flush)),dr=kt?kt(lr,cr):dt[lr];dr&&(Kt.current[lr]=declareUpdate$2(dr))}}const Zt=Ht.current.map((ir,or)=>getSprings$3(ir,Kt.current[or])),er=reactExports.useContext(SpringContext$3),rr=usePrev$3(er),sr=er!==rr&&hasProps$3(er);useIsomorphicLayoutEffect$4(()=>{Dt.current++,Ut.ctrls=Ht.current;const{queue:ir}=Ut;ir.length&&(Ut.queue=[],each$4(ir,or=>or())),each$4(Ht.current,(or,lr)=>{Tt==null||Tt.add(or),sr&&or.start({default:er});const cr=Kt.current[lr];cr&&(replaceRef$3(or,cr.ref),or.ref?or.queue.push(cr):or.start(cr))})}),useOnce$4(()=>()=>{each$4(Ut.ctrls,ir=>ir.stop(!0))});const nr=Zt.map(ir=>({...ir}));return Tt?[nr,Tt]:nr}function useSpring$2(et,dt){const $t=is$4.fun(et),[[kt],Tt]=useSprings$2(1,$t?et:[et],$t?dt||[]:dt);return $t||arguments.length==2?[kt,Tt]:kt}var Interpolation$4=class extends FrameValue$4{constructor(dt,$t){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$4(...$t);const kt=this._get(),Tt=getAnimatedType$4(kt);setAnimated$4(this,Tt.create(kt))}advance(dt){const $t=this._get(),kt=this.get();isEqual$5($t,kt)||(getAnimated$4(this).setValue($t),this._onChange($t,this.idle)),!this.idle&&checkIdle$4(this._active)&&becomeIdle$4(this)}_get(){const dt=is$4.arr(this.source)?this.source.map(getFluidValue$4):toArray$4(getFluidValue$4(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$4(this._active)&&(this.idle=!1,each$4(getPayload$4(this),dt=>{dt.done=!1}),globals_exports$4.skipAnimation?(raf$4.batchedUpdates(()=>this.advance()),becomeIdle$4(this)):frameLoop$4.start(this))}_attach(){let dt=1;each$4(toArray$4(this.source),$t=>{hasFluidValue$4($t)&&addFluidObserver$4($t,this),isFrameValue$4($t)&&($t.idle||this._active.add($t),dt=Math.max(dt,$t.priority+1))}),this.priority=dt,this._start()}_detach(){each$4(toArray$4(this.source),dt=>{hasFluidValue$4(dt)&&removeFluidObserver$4(dt,this)}),this._active.clear(),becomeIdle$4(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$4(this.source).reduce(($t,kt)=>Math.max($t,(isFrameValue$4(kt)?kt.priority:0)+1),0))}};function isIdle$4(et){return et.idle!==!1}function checkIdle$4(et){return!et.size||Array.from(et).every(isIdle$4)}function becomeIdle$4(et){et.idle||(et.idle=!0,each$4(getPayload$4(et),dt=>{dt.done=!0}),callFluidObservers$4(et,{type:"idle",parent:et}))}var to$5=(et,...dt)=>new Interpolation$4(et,dt);globals_exports$4.assign({createStringInterpolator:createStringInterpolator2$4,to:(et,dt)=>new Interpolation$4(et,dt)});var isCustomPropRE$4=/^--/;function dangerousStyleValue$4(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$4.test(et)&&!(isUnitlessNumber$4.hasOwnProperty(et)&&isUnitlessNumber$4[et])?dt+"px":(""+dt).trim()}var attributeCache$4={};function applyAnimatedValues$4(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const $t=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:kt,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>$t||et.hasAttribute(Zt)?Zt:attributeCache$4[Zt]||(attributeCache$4[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$4(Zt,Tt[Zt]);isCustomPropRE$4.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),kt!==void 0&&(et.className=kt),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$4={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$4=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$5=["Webkit","Ms","Moz","O"];isUnitlessNumber$4=Object.keys(isUnitlessNumber$4).reduce((et,dt)=>(prefixes$5.forEach($t=>et[prefixKey$4($t,dt)]=et[dt]),et),isUnitlessNumber$4);var domTransforms$4=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$4=/^(translate)/,degTransforms$4=/^(rotate|skew)/,addUnit$4=(et,dt)=>is$4.num(et)&&et!==0?et+dt:et,isValueIdentity$4=(et,dt)=>is$4.arr(et)?et.every($t=>isValueIdentity$4($t,dt)):is$4.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$4=class extends AnimatedObject$4{constructor({x:dt,y:$t,z:kt,...Tt}){const Dt=[],Ft=[];(dt||$t||kt)&&(Dt.push([dt||0,$t||0,kt||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$4(Ht,"px")).join(",")})`,isValueIdentity$4(Ut,0)])),eachProp$4(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$4.test(Ht)){if(delete Tt[Ht],is$4.und(Ut))return;const Kt=pxTransforms$4.test(Ht)?"px":degTransforms$4.test(Ht)?"deg":"";Dt.push(toArray$4(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$4(er,Kt)})`,isValueIdentity$4(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$4(Jt,Kt)).join(",")})`,isValueIdentity$4(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$4(Dt,Ft)),super(Tt)}},FluidTransform$4=class extends FluidValue$4{constructor(dt,$t){super(),this.inputs=dt,this.transforms=$t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",$t=!0;return each$4(this.inputs,(kt,Tt)=>{const Dt=getFluidValue$4(kt[0]),[Ft,Ut]=this.transforms[Tt](is$4.arr(Dt)?Dt:kt.map(getFluidValue$4));dt+=" "+Ft,$t=$t&&Ut}),$t?"none":dt}observerAdded(dt){dt==1&&each$4(this.inputs,$t=>each$4($t,kt=>hasFluidValue$4(kt)&&addFluidObserver$4(kt,this)))}observerRemoved(dt){dt==0&&each$4(this.inputs,$t=>each$4($t,kt=>hasFluidValue$4(kt)&&removeFluidObserver$4(kt,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$4(this,dt)}},primitives$4=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$4.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$4,colors:colors2$4});var host$4=createHost$4(primitives$4,{applyAnimatedValues:applyAnimatedValues$4,createAnimatedStyle:et=>new AnimatedStyle$4(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...$t})=>$t}),animated$4=host$4.animated;let windowObject;typeof window<"u"?windowObject=window:typeof self<"u"?windowObject=self:windowObject=global;let cancelFrame=null,requestFrame=null;const TIMEOUT_DURATION=20,clearTimeoutFn=windowObject.clearTimeout,setTimeoutFn=windowObject.setTimeout,cancelAnimationFrameFn=windowObject.cancelAnimationFrame||windowObject.mozCancelAnimationFrame||windowObject.webkitCancelAnimationFrame,requestAnimationFrameFn=windowObject.requestAnimationFrame||windowObject.mozRequestAnimationFrame||windowObject.webkitRequestAnimationFrame;cancelAnimationFrameFn==null||requestAnimationFrameFn==null?(cancelFrame=clearTimeoutFn,requestFrame=function(dt){return setTimeoutFn(dt,TIMEOUT_DURATION)}):(cancelFrame=function([dt,$t]){cancelAnimationFrameFn(dt),clearTimeoutFn($t)},requestFrame=function(dt){const $t=requestAnimationFrameFn(function(){clearTimeoutFn(kt),dt()}),kt=setTimeoutFn(function(){cancelAnimationFrameFn($t),dt()},TIMEOUT_DURATION);return[$t,kt]});function createDetectElementResize(et){let dt,$t,kt,Tt,Dt,Ft,Ut;const Ht=typeof document<"u"&&document.attachEvent;if(!Ht){Ft=function(ir){const or=ir.__resizeTriggers__,lr=or.firstElementChild,cr=or.lastElementChild,dr=lr.firstElementChild;cr.scrollLeft=cr.scrollWidth,cr.scrollTop=cr.scrollHeight,dr.style.width=lr.offsetWidth+1+"px",dr.style.height=lr.offsetHeight+1+"px",lr.scrollLeft=lr.scrollWidth,lr.scrollTop=lr.scrollHeight},Dt=function(ir){return ir.offsetWidth!==ir.__resizeLast__.width||ir.offsetHeight!==ir.__resizeLast__.height},Ut=function(ir){if(ir.target.className&&typeof ir.target.className.indexOf=="function"&&ir.target.className.indexOf("contract-trigger")<0&&ir.target.className.indexOf("expand-trigger")<0)return;const or=this;Ft(this),this.__resizeRAF__&&cancelFrame(this.__resizeRAF__),this.__resizeRAF__=requestFrame(function(){Dt(or)&&(or.__resizeLast__.width=or.offsetWidth,or.__resizeLast__.height=or.offsetHeight,or.__resizeListeners__.forEach(function(dr){dr.call(or,ir)}))})};let Zt=!1,er="";kt="animationstart";const rr="Webkit Moz O ms".split(" ");let sr="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),nr="";{const ir=document.createElement("fakeelement");if(ir.style.animationName!==void 0&&(Zt=!0),Zt===!1){for(let or=0;or<rr.length;or++)if(ir.style[rr[or]+"AnimationName"]!==void 0){nr=rr[or],er="-"+nr.toLowerCase()+"-",kt=sr[or],Zt=!0;break}}}$t="resizeanim",dt="@"+er+"keyframes "+$t+" { from { opacity: 0; } to { opacity: 0; } } ",Tt=er+"animation: 1ms "+$t+"; "}const Kt=function(Zt){if(!Zt.getElementById("detectElementResize")){const er=(dt||"")+".resize-triggers { "+(Tt||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',rr=Zt.head||Zt.getElementsByTagName("head")[0],sr=Zt.createElement("style");sr.id="detectElementResize",sr.type="text/css",et!=null&&sr.setAttribute("nonce",et),sr.styleSheet?sr.styleSheet.cssText=er:sr.appendChild(Zt.createTextNode(er)),rr.appendChild(sr)}};return{addResizeListener:function(Zt,er){if(Ht)Zt.attachEvent("onresize",er);else{if(!Zt.__resizeTriggers__){const rr=Zt.ownerDocument,sr=windowObject.getComputedStyle(Zt);sr&&sr.position==="static"&&(Zt.style.position="relative"),Kt(rr),Zt.__resizeLast__={},Zt.__resizeListeners__=[],(Zt.__resizeTriggers__=rr.createElement("div")).className="resize-triggers";const nr=rr.createElement("div");nr.className="expand-trigger",nr.appendChild(rr.createElement("div"));const ir=rr.createElement("div");ir.className="contract-trigger",Zt.__resizeTriggers__.appendChild(nr),Zt.__resizeTriggers__.appendChild(ir),Zt.appendChild(Zt.__resizeTriggers__),Ft(Zt),Zt.addEventListener("scroll",Ut,!0),kt&&(Zt.__resizeTriggers__.__animationListener__=function(lr){lr.animationName===$t&&Ft(Zt)},Zt.__resizeTriggers__.addEventListener(kt,Zt.__resizeTriggers__.__animationListener__))}Zt.__resizeListeners__.push(er)}},removeResizeListener:function(Zt,er){if(Ht)Zt.detachEvent("onresize",er);else if(Zt.__resizeListeners__.splice(Zt.__resizeListeners__.indexOf(er),1),!Zt.__resizeListeners__.length){Zt.removeEventListener("scroll",Ut,!0),Zt.__resizeTriggers__.__animationListener__&&(Zt.__resizeTriggers__.removeEventListener(kt,Zt.__resizeTriggers__.__animationListener__),Zt.__resizeTriggers__.__animationListener__=null);try{Zt.__resizeTriggers__=!Zt.removeChild(Zt.__resizeTriggers__)}catch{}}}}}class AutoSizer extends reactExports.Component{constructor(...dt){super(...dt),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:$t,disableWidth:kt,onResize:Tt}=this.props;if(this._parentNode){const Dt=window.getComputedStyle(this._parentNode)||{},Ft=parseFloat(Dt.paddingLeft||"0"),Ut=parseFloat(Dt.paddingRight||"0"),Ht=parseFloat(Dt.paddingTop||"0"),Kt=parseFloat(Dt.paddingBottom||"0"),Yt=this._parentNode.getBoundingClientRect(),Jt=Yt.height-Ht-Kt,Zt=Yt.width-Ft-Ut;if(!$t&&this.state.height!==Jt||!kt&&this.state.width!==Zt){this.setState({height:Jt,width:Zt});const er=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};typeof Tt=="function"&&Tt({height:Jt,width:Zt,get scaledHeight(){return er(),Jt},get scaledWidth(){return er(),Zt}})}}},this._setRef=$t=>{this._autoSizer=$t}}componentDidMount(){const{nonce:dt}=this.props,$t=this._autoSizer?this._autoSizer.parentNode:null;if($t!=null&&$t.ownerDocument&&$t.ownerDocument.defaultView&&$t instanceof $t.ownerDocument.defaultView.HTMLElement){this._parentNode=$t;const kt=$t.ownerDocument.defaultView.ResizeObserver;kt!=null?(this._resizeObserver=new kt(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe($t)):(this._detectElementResize=createDetectElementResize(dt),this._detectElementResize.addResizeListener($t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:dt,defaultHeight:$t,defaultWidth:kt,disableHeight:Tt=!1,disableWidth:Dt=!1,doNotBailOutOnEmptyChildren:Ft=!1,nonce:Ut,onResize:Ht,style:Kt={},tagName:Yt="div",...Jt}=this.props,{height:Zt,width:er}=this.state,rr={overflow:"visible"},sr={};let nr=!1;return Tt||(Zt===0&&(nr=!0),rr.height=0,sr.height=Zt,sr.scaledHeight=Zt),Dt||(er===0&&(nr=!0),rr.width=0,sr.width=er,sr.scaledWidth=er),Ft&&(nr=!1),reactExports.createElement(Yt,{ref:this._setRef,style:{...rr,...Kt},...Jt},!nr&&dt(sr))}}function c$3(et,dt,$t,kt){var Tt=this,Dt=reactExports.useRef(null),Ft=reactExports.useRef(0),Ut=reactExports.useRef(0),Ht=reactExports.useRef(null),Kt=reactExports.useRef([]),Yt=reactExports.useRef(),Jt=reactExports.useRef(),Zt=reactExports.useRef(et),er=reactExports.useRef(!0);Zt.current=et;var rr=typeof window<"u",sr=!dt&&dt!==0&&rr;if(typeof et!="function")throw new TypeError("Expected a function");dt=+dt||0;var nr=!!($t=$t||{}).leading,ir=!("trailing"in $t)||!!$t.trailing,or="maxWait"in $t,lr="debounceOnServer"in $t&&!!$t.debounceOnServer,cr=or?Math.max(+$t.maxWait||0,dt):null;reactExports.useEffect(function(){return er.current=!0,function(){er.current=!1}},[]);var dr=reactExports.useMemo(function(){var ur=function(Mr){var Tr=Kt.current,Or=Yt.current;return Kt.current=Yt.current=null,Ft.current=Mr,Ut.current=Ut.current||Mr,Jt.current=Zt.current.apply(Or,Tr)},pr=function(Mr,Tr){sr&&cancelAnimationFrame(Ht.current),Ht.current=sr?requestAnimationFrame(Mr):setTimeout(Mr,Tr)},mr=function(Mr){if(!er.current)return!1;var Tr=Mr-Dt.current;return!Dt.current||Tr>=dt||Tr<0||or&&Mr-Ft.current>=cr},jr=function(Mr){return Ht.current=null,ir&&Kt.current?ur(Mr):(Kt.current=Yt.current=null,Jt.current)},Rr=function Mr(){var Tr=Date.now();if(nr&&Ut.current===Ft.current&&xr(),mr(Tr))return jr(Tr);if(er.current){var Or=dt-(Tr-Dt.current),_r=or?Math.min(Or,cr-(Tr-Ft.current)):Or;pr(Mr,_r)}},xr=function(){kt&&kt({})},kr=function(){if(rr||lr){var Mr=Date.now(),Tr=mr(Mr);if(Kt.current=[].slice.call(arguments),Yt.current=Tt,Dt.current=Mr,Tr){if(!Ht.current&&er.current)return Ft.current=Dt.current,pr(Rr,dt),nr?ur(Dt.current):Jt.current;if(or)return pr(Rr,dt),ur(Dt.current)}return Ht.current||pr(Rr,dt),Jt.current}};return kr.cancel=function(){var Mr=Ht.current;Mr&&(sr?cancelAnimationFrame(Ht.current):clearTimeout(Ht.current)),Ft.current=0,Kt.current=Dt.current=Yt.current=Ht.current=null,Mr&&kt&&kt({})},kr.isPending=function(){return!!Ht.current},kr.flush=function(){return Ht.current?jr(Date.now()):Jt.current},kr},[nr,or,dt,cr,ir,sr,rr,lr,kt]);return dr}function i$1(et,dt){return et===dt}function a$3(et,dt,$t){var kt=$t&&$t.equalityFn||i$1,Tt=reactExports.useRef(et),Dt=reactExports.useState({})[1],Ft=c$3(reactExports.useCallback(function(Ht){Tt.current=Ht,Dt({})},[Dt]),dt,$t,Dt),Ut=reactExports.useRef(et);return kt(Ut.current,et)||(Ft(et),Ut.current=et),[Tt.current,Ft]}function define(et,dt,$t){et.prototype=dt.prototype=$t,$t.constructor=et}function extend(et,dt){var $t=Object.create(et.prototype);for(var kt in dt)$t[kt]=dt[kt];return $t}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(et){return Object.assign(new this.constructor,this,et)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(et){var dt,$t;return et=(et+"").trim().toLowerCase(),(dt=reHex.exec(et))?($t=dt[1].length,dt=parseInt(dt[1],16),$t===6?rgbn(dt):$t===3?new Rgb(dt>>8&15|dt>>4&240,dt>>4&15|dt&240,(dt&15)<<4|dt&15,1):$t===8?rgba$4(dt>>24&255,dt>>16&255,dt>>8&255,(dt&255)/255):$t===4?rgba$4(dt>>12&15|dt>>8&240,dt>>8&15|dt>>4&240,dt>>4&15|dt&240,((dt&15)<<4|dt&15)/255):null):(dt=reRgbInteger.exec(et))?new Rgb(dt[1],dt[2],dt[3],1):(dt=reRgbPercent.exec(et))?new Rgb(dt[1]*255/100,dt[2]*255/100,dt[3]*255/100,1):(dt=reRgbaInteger.exec(et))?rgba$4(dt[1],dt[2],dt[3],dt[4]):(dt=reRgbaPercent.exec(et))?rgba$4(dt[1]*255/100,dt[2]*255/100,dt[3]*255/100,dt[4]):(dt=reHslPercent.exec(et))?hsla$4(dt[1],dt[2]/100,dt[3]/100,1):(dt=reHslaPercent.exec(et))?hsla$4(dt[1],dt[2]/100,dt[3]/100,dt[4]):named.hasOwnProperty(et)?rgbn(named[et]):et==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(et){return new Rgb(et>>16&255,et>>8&255,et&255,1)}function rgba$4(et,dt,$t,kt){return kt<=0&&(et=dt=$t=NaN),new Rgb(et,dt,$t,kt)}function rgbConvert(et){return et instanceof Color||(et=color(et)),et?(et=et.rgb(),new Rgb(et.r,et.g,et.b,et.opacity)):new Rgb}function rgb$5(et,dt,$t,kt){return arguments.length===1?rgbConvert(et):new Rgb(et,dt,$t,kt??1)}function Rgb(et,dt,$t,kt){this.r=+et,this.g=+dt,this.b=+$t,this.opacity=+kt}define(Rgb,rgb$5,extend(Color,{brighter(et){return et=et==null?brighter:Math.pow(brighter,et),new Rgb(this.r*et,this.g*et,this.b*et,this.opacity)},darker(et){return et=et==null?darker:Math.pow(darker,et),new Rgb(this.r*et,this.g*et,this.b*et,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const et=clampa(this.opacity);return`${et===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${et===1?")":`, ${et})`}`}function clampa(et){return isNaN(et)?1:Math.max(0,Math.min(1,et))}function clampi(et){return Math.max(0,Math.min(255,Math.round(et)||0))}function hex(et){return et=clampi(et),(et<16?"0":"")+et.toString(16)}function hsla$4(et,dt,$t,kt){return kt<=0?et=dt=$t=NaN:$t<=0||$t>=1?et=dt=NaN:dt<=0&&(et=NaN),new Hsl(et,dt,$t,kt)}function hslConvert(et){if(et instanceof Hsl)return new Hsl(et.h,et.s,et.l,et.opacity);if(et instanceof Color||(et=color(et)),!et)return new Hsl;if(et instanceof Hsl)return et;et=et.rgb();var dt=et.r/255,$t=et.g/255,kt=et.b/255,Tt=Math.min(dt,$t,kt),Dt=Math.max(dt,$t,kt),Ft=NaN,Ut=Dt-Tt,Ht=(Dt+Tt)/2;return Ut?(dt===Dt?Ft=($t-kt)/Ut+($t<kt)*6:$t===Dt?Ft=(kt-dt)/Ut+2:Ft=(dt-$t)/Ut+4,Ut/=Ht<.5?Dt+Tt:2-Dt-Tt,Ft*=60):Ut=Ht>0&&Ht<1?0:Ft,new Hsl(Ft,Ut,Ht,et.opacity)}function hsl$4(et,dt,$t,kt){return arguments.length===1?hslConvert(et):new Hsl(et,dt,$t,kt??1)}function Hsl(et,dt,$t,kt){this.h=+et,this.s=+dt,this.l=+$t,this.opacity=+kt}define(Hsl,hsl$4,extend(Color,{brighter(et){return et=et==null?brighter:Math.pow(brighter,et),new Hsl(this.h,this.s,this.l*et,this.opacity)},darker(et){return et=et==null?darker:Math.pow(darker,et),new Hsl(this.h,this.s,this.l*et,this.opacity)},rgb(){var et=this.h%360+(this.h<0)*360,dt=isNaN(et)||isNaN(this.s)?0:this.s,$t=this.l,kt=$t+($t<.5?$t:1-$t)*dt,Tt=2*$t-kt;return new Rgb(hsl2rgb(et>=240?et-240:et+120,Tt,kt),hsl2rgb(et,Tt,kt),hsl2rgb(et<120?et+240:et-120,Tt,kt),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const et=clampa(this.opacity);return`${et===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${et===1?")":`, ${et})`}`}}));function clamph(et){return et=(et||0)%360,et<0?et+360:et}function clampt(et){return Math.max(0,Math.min(1,et||0))}function hsl2rgb(et,dt,$t){return(et<60?dt+($t-dt)*et/60:et<180?$t:et<240?dt+($t-dt)*(240-et)/60:dt)*255}const radians=Math.PI/180,degrees=180/Math.PI;var A$4=-.14861,B$3=1.78277,C$3=-.29227,D$3=-.90649,E$5=1.97294,ED=E$5*D$3,EB=E$5*B$3,BC_DA=B$3*C$3-D$3*A$4;function cubehelixConvert(et){if(et instanceof Cubehelix)return new Cubehelix(et.h,et.s,et.l,et.opacity);et instanceof Rgb||(et=rgbConvert(et));var dt=et.r/255,$t=et.g/255,kt=et.b/255,Tt=(BC_DA*kt+ED*dt-EB*$t)/(BC_DA+ED-EB),Dt=kt-Tt,Ft=(E$5*($t-Tt)-C$3*Dt)/D$3,Ut=Math.sqrt(Ft*Ft+Dt*Dt)/(E$5*Tt*(1-Tt)),Ht=Ut?Math.atan2(Ft,Dt)*degrees-120:NaN;return new Cubehelix(Ht<0?Ht+360:Ht,Ut,Tt,et.opacity)}function cubehelix$1(et,dt,$t,kt){return arguments.length===1?cubehelixConvert(et):new Cubehelix(et,dt,$t,kt??1)}function Cubehelix(et,dt,$t,kt){this.h=+et,this.s=+dt,this.l=+$t,this.opacity=+kt}define(Cubehelix,cubehelix$1,extend(Color,{brighter(et){return et=et==null?brighter:Math.pow(brighter,et),new Cubehelix(this.h,this.s,this.l*et,this.opacity)},darker(et){return et=et==null?darker:Math.pow(darker,et),new Cubehelix(this.h,this.s,this.l*et,this.opacity)},rgb(){var et=isNaN(this.h)?0:(this.h+120)*radians,dt=+this.l,$t=isNaN(this.s)?0:this.s*dt*(1-dt),kt=Math.cos(et),Tt=Math.sin(et);return new Rgb(255*(dt+$t*(A$4*kt+B$3*Tt)),255*(dt+$t*(C$3*kt+D$3*Tt)),255*(dt+$t*(E$5*kt)),this.opacity)}}));function basis(et,dt,$t,kt,Tt){var Dt=et*et,Ft=Dt*et;return((1-3*et+3*Dt-Ft)*dt+(4-6*Dt+3*Ft)*$t+(1+3*et+3*Dt-3*Ft)*kt+Ft*Tt)/6}function basis$1(et){var dt=et.length-1;return function($t){var kt=$t<=0?$t=0:$t>=1?($t=1,dt-1):Math.floor($t*dt),Tt=et[kt],Dt=et[kt+1],Ft=kt>0?et[kt-1]:2*Tt-Dt,Ut=kt<dt-1?et[kt+2]:2*Dt-Tt;return basis(($t-kt/dt)*dt,Ft,Tt,Dt,Ut)}}const constant$1=et=>()=>et;function linear$1(et,dt){return function($t){return et+$t*dt}}function exponential(et,dt,$t){return et=Math.pow(et,$t),dt=Math.pow(dt,$t)-et,$t=1/$t,function(kt){return Math.pow(et+kt*dt,$t)}}function hue(et,dt){var $t=dt-et;return $t?linear$1(et,$t>180||$t<-180?$t-360*Math.round($t/360):$t):constant$1(isNaN(et)?dt:et)}function gamma(et){return(et=+et)==1?nogamma:function(dt,$t){return $t-dt?exponential(dt,$t,et):constant$1(isNaN(dt)?$t:dt)}}function nogamma(et,dt){var $t=dt-et;return $t?linear$1(et,$t):constant$1(isNaN(et)?dt:et)}const rgb$4=function et(dt){var $t=gamma(dt);function kt(Tt,Dt){var Ft=$t((Tt=rgb$5(Tt)).r,(Dt=rgb$5(Dt)).r),Ut=$t(Tt.g,Dt.g),Ht=$t(Tt.b,Dt.b),Kt=nogamma(Tt.opacity,Dt.opacity);return function(Yt){return Tt.r=Ft(Yt),Tt.g=Ut(Yt),Tt.b=Ht(Yt),Tt.opacity=Kt(Yt),Tt+""}}return kt.gamma=et,kt}(1);function rgbSpline(et){return function(dt){var $t=dt.length,kt=new Array($t),Tt=new Array($t),Dt=new Array($t),Ft,Ut;for(Ft=0;Ft<$t;++Ft)Ut=rgb$5(dt[Ft]),kt[Ft]=Ut.r||0,Tt[Ft]=Ut.g||0,Dt[Ft]=Ut.b||0;return kt=et(kt),Tt=et(Tt),Dt=et(Dt),Ut.opacity=1,function(Ht){return Ut.r=kt(Ht),Ut.g=Tt(Ht),Ut.b=Dt(Ht),Ut+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(et,dt){dt||(dt=[]);var $t=et?Math.min(dt.length,et.length):0,kt=dt.slice(),Tt;return function(Dt){for(Tt=0;Tt<$t;++Tt)kt[Tt]=et[Tt]*(1-Dt)+dt[Tt]*Dt;return kt}}function isNumberArray(et){return ArrayBuffer.isView(et)&&!(et instanceof DataView)}function genericArray(et,dt){var $t=dt?dt.length:0,kt=et?Math.min($t,et.length):0,Tt=new Array(kt),Dt=new Array($t),Ft;for(Ft=0;Ft<kt;++Ft)Tt[Ft]=interpolate$4(et[Ft],dt[Ft]);for(;Ft<$t;++Ft)Dt[Ft]=dt[Ft];return function(Ut){for(Ft=0;Ft<kt;++Ft)Dt[Ft]=Tt[Ft](Ut);return Dt}}function date$1(et,dt){var $t=new Date;return et=+et,dt=+dt,function(kt){return $t.setTime(et*(1-kt)+dt*kt),$t}}function p$2(et,dt){return et=+et,dt=+dt,function($t){return et*(1-$t)+dt*$t}}function object(et,dt){var $t={},kt={},Tt;(et===null||typeof et!="object")&&(et={}),(dt===null||typeof dt!="object")&&(dt={});for(Tt in dt)Tt in et?$t[Tt]=interpolate$4(et[Tt],dt[Tt]):kt[Tt]=dt[Tt];return function(Dt){for(Tt in $t)kt[Tt]=$t[Tt](Dt);return kt}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero$1(et){return function(){return et}}function one(et){return function(dt){return et(dt)+""}}function B$2(et,dt){var $t=reA.lastIndex=reB.lastIndex=0,kt,Tt,Dt,Ft=-1,Ut=[],Ht=[];for(et=et+"",dt=dt+"";(kt=reA.exec(et))&&(Tt=reB.exec(dt));)(Dt=Tt.index)>$t&&(Dt=dt.slice($t,Dt),Ut[Ft]?Ut[Ft]+=Dt:Ut[++Ft]=Dt),(kt=kt[0])===(Tt=Tt[0])?Ut[Ft]?Ut[Ft]+=Tt:Ut[++Ft]=Tt:(Ut[++Ft]=null,Ht.push({i:Ft,x:p$2(kt,Tt)})),$t=reB.lastIndex;return $t<dt.length&&(Dt=dt.slice($t),Ut[Ft]?Ut[Ft]+=Dt:Ut[++Ft]=Dt),Ut.length<2?Ht[0]?one(Ht[0].x):zero$1(dt):(dt=Ht.length,function(Kt){for(var Yt=0,Jt;Yt<dt;++Yt)Ut[(Jt=Ht[Yt]).i]=Jt.x(Kt);return Ut.join("")})}function interpolate$4(et,dt){var $t=typeof dt,kt;return dt==null||$t==="boolean"?constant$1(dt):($t==="number"?p$2:$t==="string"?(kt=color(dt))?(dt=kt,rgb$4):B$2:dt instanceof color?rgb$4:dt instanceof Date?date$1:isNumberArray(dt)?numberArray:Array.isArray(dt)?genericArray:typeof dt.valueOf!="function"&&typeof dt.toString!="function"||isNaN(dt)?object:p$2)(et,dt)}function v$2(et,dt){return et=+et,dt=+dt,function($t){return Math.round(et*(1-$t)+dt*$t)}}function cubehelix(et){return function dt($t){$t=+$t;function kt(Tt,Dt){var Ft=et((Tt=cubehelix$1(Tt)).h,(Dt=cubehelix$1(Dt)).h),Ut=nogamma(Tt.s,Dt.s),Ht=nogamma(Tt.l,Dt.l),Kt=nogamma(Tt.opacity,Dt.opacity);return function(Yt){return Tt.h=Ft(Yt),Tt.s=Ut(Yt),Tt.l=Ht(Math.pow(Yt,$t)),Tt.opacity=Kt(Yt),Tt+""}}return kt.gamma=dt,kt}(1)}cubehelix(hue);var cubehelixLong=cubehelix(nogamma),HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(et){return this.__data__.set(et,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(et){return this.__data__.has(et)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$3(et){var dt=-1,$t=et==null?0:et.length;for(this.__data__=new MapCache;++dt<$t;)this.add(et[dt])}SetCache$3.prototype.add=SetCache$3.prototype.push=setCacheAdd;SetCache$3.prototype.has=setCacheHas;var _SetCache=SetCache$3;function baseFindIndex$1(et,dt,$t,kt){for(var Tt=et.length,Dt=$t+(kt?1:-1);kt?Dt--:++Dt<Tt;)if(dt(et[Dt],Dt,et))return Dt;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(et){return et!==et}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(et,dt,$t){for(var kt=$t-1,Tt=et.length;++kt<Tt;)if(et[kt]===dt)return kt;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(et,dt,$t){return dt===dt?strictIndexOf(et,dt,$t):baseFindIndex(et,baseIsNaN,$t)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$2(et,dt){var $t=et==null?0:et.length;return!!$t&&baseIndexOf(et,dt,0)>-1}var _arrayIncludes=arrayIncludes$2;function arrayIncludesWith$2(et,dt,$t){for(var kt=-1,Tt=et==null?0:et.length;++kt<Tt;)if($t(dt,et[kt]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$2;function cacheHas$3(et,dt){return et.has(dt)}var _cacheHas=cacheHas$3,SetCache$2=_SetCache,arrayIncludes$1=_arrayIncludes,arrayIncludesWith$1=_arrayIncludesWith,arrayMap$2=_arrayMap,baseUnary$3=_baseUnary,cacheHas$2=_cacheHas,LARGE_ARRAY_SIZE$1=200;function baseDifference$1(et,dt,$t,kt){var Tt=-1,Dt=arrayIncludes$1,Ft=!0,Ut=et.length,Ht=[],Kt=dt.length;if(!Ut)return Ht;$t&&(dt=arrayMap$2(dt,baseUnary$3($t))),kt?(Dt=arrayIncludesWith$1,Ft=!1):dt.length>=LARGE_ARRAY_SIZE$1&&(Dt=cacheHas$2,Ft=!1,dt=new SetCache$2(dt));e:for(;++Tt<Ut;){var Yt=et[Tt],Jt=$t==null?Yt:$t(Yt);if(Yt=kt||Yt!==0?Yt:0,Ft&&Jt===Jt){for(var Zt=Kt;Zt--;)if(dt[Zt]===Jt)continue e;Ht.push(Yt)}else Dt(dt,Jt,kt)||Ht.push(Yt)}return Ht}var _baseDifference=baseDifference$1,baseDifference=_baseDifference,baseRest$1=_baseRest,isArrayLikeObject=isArrayLikeObject_1,without=baseRest$1(function(et,dt){return isArrayLikeObject(et)?baseDifference(et,dt):[]}),without_1=without;const P$2=getDefaultExportFromCjs(without_1);function constant(et){return function(){return et}}const epsilon=1e-12;function array(et){return typeof et=="object"&&"length"in et?et:Array.from(et)}function Linear(et){this._context=et}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;default:this._context.lineTo(et,dt);break}}};function U$1(et){return new Linear(et)}function noop$6(){}function point$4(et,dt,$t){et._context.bezierCurveTo((2*et._x0+et._x1)/3,(2*et._y0+et._y1)/3,(et._x0+2*et._x1)/3,(et._y0+2*et._y1)/3,(et._x0+4*et._x1+dt)/6,(et._y0+4*et._y1+$t)/6)}function Basis(et){this._context=et}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$4(this,et,dt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=dt}};function W$4(et){return new Basis(et)}function BasisClosed(et){this._context=et}BasisClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._x2=et,this._y2=dt;break;case 1:this._point=2,this._x3=et,this._y3=dt;break;case 2:this._point=3,this._x4=et,this._y4=dt,this._context.moveTo((this._x0+4*this._x1+et)/6,(this._y0+4*this._y1+dt)/6);break;default:point$4(this,et,dt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=dt}};function G$1(et){return new BasisClosed(et)}function BasisOpen(et){this._context=et}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var $t=(this._x0+4*this._x1+et)/6,kt=(this._y0+4*this._y1+dt)/6;this._line?this._context.lineTo($t,kt):this._context.moveTo($t,kt);break;case 3:this._point=4;default:point$4(this,et,dt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=dt}};function I$2(et){return new BasisOpen(et)}function Bundle(et,dt){this._basis=new Basis(et),this._beta=dt}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var et=this._x,dt=this._y,$t=et.length-1;if($t>0)for(var kt=et[0],Tt=dt[0],Dt=et[$t]-kt,Ft=dt[$t]-Tt,Ut=-1,Ht;++Ut<=$t;)Ht=Ut/$t,this._basis.point(this._beta*et[Ut]+(1-this._beta)*(kt+Ht*Dt),this._beta*dt[Ut]+(1-this._beta)*(Tt+Ht*Ft));this._x=this._y=null,this._basis.lineEnd()},point:function(et,dt){this._x.push(+et),this._y.push(+dt)}};const A$3=function et(dt){function $t(kt){return dt===1?new Basis(kt):new Bundle(kt,dt)}return $t.beta=function(kt){return et(+kt)},$t}(.85);function point$3(et,dt,$t){et._context.bezierCurveTo(et._x1+et._k*(et._x2-et._x0),et._y1+et._k*(et._y2-et._y0),et._x2+et._k*(et._x1-dt),et._y2+et._k*(et._y1-$t),et._x2,et._y2)}function Cardinal(et,dt){this._context=et,this._k=(1-dt)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2,this._x1=et,this._y1=dt;break;case 2:this._point=3;default:point$3(this,et,dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const L$4=function et(dt){function $t(kt){return new Cardinal(kt,dt)}return $t.tension=function(kt){return et(+kt)},$t}(0);function CardinalClosed(et,dt){this._context=et,this._k=(1-dt)/6}CardinalClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._x3=et,this._y3=dt;break;case 1:this._point=2,this._context.moveTo(this._x4=et,this._y4=dt);break;case 2:this._point=3,this._x5=et,this._y5=dt;break;default:point$3(this,et,dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const S$2=function et(dt){function $t(kt){return new CardinalClosed(kt,dt)}return $t.tension=function(kt){return et(+kt)},$t}(0);function CardinalOpen(et,dt){this._context=et,this._k=(1-dt)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$3(this,et,dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const Y$3=function et(dt){function $t(kt){return new CardinalOpen(kt,dt)}return $t.tension=function(kt){return et(+kt)},$t}(0);function point$2(et,dt,$t){var kt=et._x1,Tt=et._y1,Dt=et._x2,Ft=et._y2;if(et._l01_a>epsilon){var Ut=2*et._l01_2a+3*et._l01_a*et._l12_a+et._l12_2a,Ht=3*et._l01_a*(et._l01_a+et._l12_a);kt=(kt*Ut-et._x0*et._l12_2a+et._x2*et._l01_2a)/Ht,Tt=(Tt*Ut-et._y0*et._l12_2a+et._y2*et._l01_2a)/Ht}if(et._l23_a>epsilon){var Kt=2*et._l23_2a+3*et._l23_a*et._l12_a+et._l12_2a,Yt=3*et._l23_a*(et._l23_a+et._l12_a);Dt=(Dt*Kt+et._x1*et._l23_2a-dt*et._l12_2a)/Yt,Ft=(Ft*Kt+et._y1*et._l23_2a-$t*et._l12_2a)/Yt}et._context.bezierCurveTo(kt,Tt,Dt,Ft,et._x2,et._y2)}function CatmullRom(et,dt){this._context=et,this._alpha=dt}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){if(et=+et,dt=+dt,this._point){var $t=this._x2-et,kt=this._y2-dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow($t*$t+kt*kt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;break;case 2:this._point=3;default:point$2(this,et,dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const q$3=function et(dt){function $t(kt){return dt?new CatmullRom(kt,dt):new Cardinal(kt,0)}return $t.alpha=function(kt){return et(+kt)},$t}(.5);function CatmullRomClosed(et,dt){this._context=et,this._alpha=dt}CatmullRomClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(et,dt){if(et=+et,dt=+dt,this._point){var $t=this._x2-et,kt=this._y2-dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow($t*$t+kt*kt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=et,this._y3=dt;break;case 1:this._point=2,this._context.moveTo(this._x4=et,this._y4=dt);break;case 2:this._point=3,this._x5=et,this._y5=dt;break;default:point$2(this,et,dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const D$2=function et(dt){function $t(kt){return dt?new CatmullRomClosed(kt,dt):new CardinalClosed(kt,0)}return $t.alpha=function(kt){return et(+kt)},$t}(.5);function CatmullRomOpen(et,dt){this._context=et,this._alpha=dt}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){if(et=+et,dt=+dt,this._point){var $t=this._x2-et,kt=this._y2-dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow($t*$t+kt*kt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,et,dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=dt}};const E$4=function et(dt){function $t(kt){return dt?new CatmullRomOpen(kt,dt):new CardinalOpen(kt,0)}return $t.alpha=function(kt){return et(+kt)},$t}(.5);function LinearClosed(et){this._context=et}LinearClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(et,dt){et=+et,dt=+dt,this._point?this._context.lineTo(et,dt):(this._point=1,this._context.moveTo(et,dt))}};function F(et){return new LinearClosed(et)}function sign(et){return et<0?-1:1}function slope3(et,dt,$t){var kt=et._x1-et._x0,Tt=dt-et._x1,Dt=(et._y1-et._y0)/(kt||Tt<0&&-0),Ft=($t-et._y1)/(Tt||kt<0&&-0),Ut=(Dt*Tt+Ft*kt)/(kt+Tt);return(sign(Dt)+sign(Ft))*Math.min(Math.abs(Dt),Math.abs(Ft),.5*Math.abs(Ut))||0}function slope2(et,dt){var $t=et._x1-et._x0;return $t?(3*(et._y1-et._y0)/$t-dt)/2:dt}function point$1(et,dt,$t){var kt=et._x0,Tt=et._y0,Dt=et._x1,Ft=et._y1,Ut=(Dt-kt)/3;et._context.bezierCurveTo(kt+Ut,Tt+Ut*dt,Dt-Ut,Ft-Ut*$t,Dt,Ft)}function MonotoneX(et){this._context=et}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,dt){var $t=NaN;if(et=+et,dt=+dt,!(et===this._x1&&dt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,$t=slope3(this,et,dt)),$t);break;default:point$1(this,this._t0,$t=slope3(this,et,dt));break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=dt,this._t0=$t}}};function MonotoneY(et){this._context=new ReflectContext(et)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(et,dt){MonotoneX.prototype.point.call(this,dt,et)};function ReflectContext(et){this._context=et}ReflectContext.prototype={moveTo:function(et,dt){this._context.moveTo(dt,et)},closePath:function(){this._context.closePath()},lineTo:function(et,dt){this._context.lineTo(dt,et)},bezierCurveTo:function(et,dt,$t,kt,Tt,Dt){this._context.bezierCurveTo(dt,et,kt,$t,Dt,Tt)}};function monotoneX(et){return new MonotoneX(et)}function monotoneY(et){return new MonotoneY(et)}function Natural(et){this._context=et}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var et=this._x,dt=this._y,$t=et.length;if($t)if(this._line?this._context.lineTo(et[0],dt[0]):this._context.moveTo(et[0],dt[0]),$t===2)this._context.lineTo(et[1],dt[1]);else for(var kt=controlPoints(et),Tt=controlPoints(dt),Dt=0,Ft=1;Ft<$t;++Dt,++Ft)this._context.bezierCurveTo(kt[0][Dt],Tt[0][Dt],kt[1][Dt],Tt[1][Dt],et[Ft],dt[Ft]);(this._line||this._line!==0&&$t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(et,dt){this._x.push(+et),this._y.push(+dt)}};function controlPoints(et){var dt,$t=et.length-1,kt,Tt=new Array($t),Dt=new Array($t),Ft=new Array($t);for(Tt[0]=0,Dt[0]=2,Ft[0]=et[0]+2*et[1],dt=1;dt<$t-1;++dt)Tt[dt]=1,Dt[dt]=4,Ft[dt]=4*et[dt]+2*et[dt+1];for(Tt[$t-1]=2,Dt[$t-1]=7,Ft[$t-1]=8*et[$t-1]+et[$t],dt=1;dt<$t;++dt)kt=Tt[dt]/Dt[dt-1],Dt[dt]-=kt,Ft[dt]-=kt*Ft[dt-1];for(Tt[$t-1]=Ft[$t-1]/Dt[$t-1],dt=$t-2;dt>=0;--dt)Tt[dt]=(Ft[dt]-Tt[dt+1])/Dt[dt];for(Dt[$t-1]=(et[$t]+Tt[$t-1])/2,dt=0;dt<$t-1;++dt)Dt[dt]=2*et[dt+1]-Tt[dt+1];return[Tt,Dt]}function X$3(et){return new Natural(et)}function Step(et,dt){this._context=et,this._t=dt}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(et,dt){switch(et=+et,dt=+dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,dt):this._context.moveTo(et,dt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,dt),this._context.lineTo(et,dt);else{var $t=this._x*(1-this._t)+et*this._t;this._context.lineTo($t,this._y),this._context.lineTo($t,dt)}break}}this._x=et,this._y=dt}};function K$1(et){return new Step(et,.5)}function stepBefore(et){return new Step(et,0)}function stepAfter(et){return new Step(et,1)}function ne$1(et,dt){if((Ft=et.length)>1)for(var $t=1,kt,Tt,Dt=et[dt[0]],Ft,Ut=Dt.length;$t<Ft;++$t)for(Tt=Dt,Dt=et[dt[$t]],kt=0;kt<Ut;++kt)Dt[kt][1]+=Dt[kt][0]=isNaN(Tt[kt][1])?Tt[kt][0]:Tt[kt][1]}function Z$3(et){for(var dt=et.length,$t=new Array(dt);--dt>=0;)$t[dt]=dt;return $t}function stackValue(et,dt){return et[dt]}function stackSeries(et){const dt=[];return dt.key=et,dt}function _$2(){var et=constant([]),dt=Z$3,$t=ne$1,kt=stackValue;function Tt(Dt){var Ft=Array.from(et.apply(this,arguments),stackSeries),Ut,Ht=Ft.length,Kt=-1,Yt;for(const Jt of Dt)for(Ut=0,++Kt;Ut<Ht;++Ut)(Ft[Ut][Kt]=[0,+kt(Jt,Ft[Ut].key,Kt,Dt)]).data=Jt;for(Ut=0,Yt=array(dt(Ft));Ut<Ht;++Ut)Ft[Yt[Ut]].index=Ut;return $t(Ft,Yt),Ft}return Tt.keys=function(Dt){return arguments.length?(et=typeof Dt=="function"?Dt:constant(Array.from(Dt)),Tt):et},Tt.value=function(Dt){return arguments.length?(kt=typeof Dt=="function"?Dt:constant(+Dt),Tt):kt},Tt.order=function(Dt){return arguments.length?(dt=Dt==null?Z$3:typeof Dt=="function"?Dt:constant(Array.from(Dt)),Tt):dt},Tt.offset=function(Dt){return arguments.length?($t=Dt??ne$1,Tt):$t},Tt}function q$2(et,dt){if((Ht=et.length)>0)for(var $t,kt=0,Tt,Dt,Ft,Ut,Ht,Kt=et[dt[0]].length;kt<Kt;++kt)for(Ft=Ut=0,$t=0;$t<Ht;++$t)(Dt=(Tt=et[dt[$t]][kt])[1]-Tt[0])>0?(Tt[0]=Ft,Tt[1]=Ft+=Dt):Dt<0?(Tt[1]=Ut,Tt[0]=Ut+=Dt):(Tt[0]=0,Tt[1]=Dt)}function ascending(et,dt){return et==null||dt==null?NaN:et<dt?-1:et>dt?1:et>=dt?0:NaN}function descending(et,dt){return et==null||dt==null?NaN:dt<et?-1:dt>et?1:dt>=et?0:NaN}function bisector(et){let dt,$t,kt;et.length!==2?(dt=ascending,$t=(Ut,Ht)=>ascending(et(Ut),Ht),kt=(Ut,Ht)=>et(Ut)-Ht):(dt=et===ascending||et===descending?et:zero,$t=et,kt=et);function Tt(Ut,Ht,Kt=0,Yt=Ut.length){if(Kt<Yt){if(dt(Ht,Ht)!==0)return Yt;do{const Jt=Kt+Yt>>>1;$t(Ut[Jt],Ht)<0?Kt=Jt+1:Yt=Jt}while(Kt<Yt)}return Kt}function Dt(Ut,Ht,Kt=0,Yt=Ut.length){if(Kt<Yt){if(dt(Ht,Ht)!==0)return Yt;do{const Jt=Kt+Yt>>>1;$t(Ut[Jt],Ht)<=0?Kt=Jt+1:Yt=Jt}while(Kt<Yt)}return Kt}function Ft(Ut,Ht,Kt=0,Yt=Ut.length){const Jt=Tt(Ut,Ht,Kt,Yt-1);return Jt>Kt&&kt(Ut[Jt-1],Ht)>-kt(Ut[Jt],Ht)?Jt-1:Jt}return{left:Tt,center:Ft,right:Dt}}function zero(){return 0}function number$2(et){return et===null?NaN:+et}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;const bisect=bisectRight;class InternMap extends Map{constructor(dt,$t=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:$t}}),dt!=null)for(const[kt,Tt]of dt)this.set(kt,Tt)}get(dt){return super.get(intern_get(this,dt))}has(dt){return super.has(intern_get(this,dt))}set(dt,$t){return super.set(intern_set(this,dt),$t)}delete(dt){return super.delete(intern_delete(this,dt))}}function intern_get({_intern:et,_key:dt},$t){const kt=dt($t);return et.has(kt)?et.get(kt):$t}function intern_set({_intern:et,_key:dt},$t){const kt=dt($t);return et.has(kt)?et.get(kt):(et.set(kt,$t),$t)}function intern_delete({_intern:et,_key:dt},$t){const kt=dt($t);return et.has(kt)&&($t=et.get(kt),et.delete(kt)),$t}function keyof(et){return et!==null&&typeof et=="object"?et.valueOf():et}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(et,dt,$t){const kt=(dt-et)/Math.max(0,$t),Tt=Math.floor(Math.log10(kt)),Dt=kt/Math.pow(10,Tt),Ft=Dt>=e10?10:Dt>=e5?5:Dt>=e2?2:1;let Ut,Ht,Kt;return Tt<0?(Kt=Math.pow(10,-Tt)/Ft,Ut=Math.round(et*Kt),Ht=Math.round(dt*Kt),Ut/Kt<et&&++Ut,Ht/Kt>dt&&--Ht,Kt=-Kt):(Kt=Math.pow(10,Tt)*Ft,Ut=Math.round(et/Kt),Ht=Math.round(dt/Kt),Ut*Kt<et&&++Ut,Ht*Kt>dt&&--Ht),Ht<Ut&&.5<=$t&&$t<2?tickSpec(et,dt,$t*2):[Ut,Ht,Kt]}function ticks(et,dt,$t){if(dt=+dt,et=+et,$t=+$t,!($t>0))return[];if(et===dt)return[et];const kt=dt<et,[Tt,Dt,Ft]=kt?tickSpec(dt,et,$t):tickSpec(et,dt,$t);if(!(Dt>=Tt))return[];const Ut=Dt-Tt+1,Ht=new Array(Ut);if(kt)if(Ft<0)for(let Kt=0;Kt<Ut;++Kt)Ht[Kt]=(Dt-Kt)/-Ft;else for(let Kt=0;Kt<Ut;++Kt)Ht[Kt]=(Dt-Kt)*Ft;else if(Ft<0)for(let Kt=0;Kt<Ut;++Kt)Ht[Kt]=(Tt+Kt)/-Ft;else for(let Kt=0;Kt<Ut;++Kt)Ht[Kt]=(Tt+Kt)*Ft;return Ht}function tickIncrement(et,dt,$t){return dt=+dt,et=+et,$t=+$t,tickSpec(et,dt,$t)[2]}function tickStep(et,dt,$t){dt=+dt,et=+et,$t=+$t;const kt=dt<et,Tt=kt?tickIncrement(dt,et,$t):tickIncrement(et,dt,$t);return(kt?-1:1)*(Tt<0?1/-Tt:Tt)}function range(et,dt,$t){et=+et,dt=+dt,$t=(Tt=arguments.length)<2?(dt=et,et=0,1):Tt<3?1:+$t;for(var kt=-1,Tt=Math.max(0,Math.ceil((dt-et)/$t))|0,Dt=new Array(Tt);++kt<Tt;)Dt[kt]=et+kt*$t;return Dt}function initRange(et,dt){switch(arguments.length){case 0:break;case 1:this.range(et);break;default:this.range(dt).domain(et);break}return this}const implicit=Symbol("implicit");function ordinal(){var et=new InternMap,dt=[],$t=[],kt=implicit;function Tt(Dt){let Ft=et.get(Dt);if(Ft===void 0){if(kt!==implicit)return kt;et.set(Dt,Ft=dt.push(Dt)-1)}return $t[Ft%$t.length]}return Tt.domain=function(Dt){if(!arguments.length)return dt.slice();dt=[],et=new InternMap;for(const Ft of Dt)et.has(Ft)||et.set(Ft,dt.push(Ft)-1);return Tt},Tt.range=function(Dt){return arguments.length?($t=Array.from(Dt),Tt):$t.slice()},Tt.unknown=function(Dt){return arguments.length?(kt=Dt,Tt):kt},Tt.copy=function(){return ordinal(dt,$t).unknown(kt)},initRange.apply(Tt,arguments),Tt}function band(){var et=ordinal().unknown(void 0),dt=et.domain,$t=et.range,kt=0,Tt=1,Dt,Ft,Ut=!1,Ht=0,Kt=0,Yt=.5;delete et.unknown;function Jt(){var Zt=dt().length,er=Tt<kt,rr=er?Tt:kt,sr=er?kt:Tt;Dt=(sr-rr)/Math.max(1,Zt-Ht+Kt*2),Ut&&(Dt=Math.floor(Dt)),rr+=(sr-rr-Dt*(Zt-Ht))*Yt,Ft=Dt*(1-Ht),Ut&&(rr=Math.round(rr),Ft=Math.round(Ft));var nr=range(Zt).map(function(ir){return rr+Dt*ir});return $t(er?nr.reverse():nr)}return et.domain=function(Zt){return arguments.length?(dt(Zt),Jt()):dt()},et.range=function(Zt){return arguments.length?([kt,Tt]=Zt,kt=+kt,Tt=+Tt,Jt()):[kt,Tt]},et.rangeRound=function(Zt){return[kt,Tt]=Zt,kt=+kt,Tt=+Tt,Ut=!0,Jt()},et.bandwidth=function(){return Ft},et.step=function(){return Dt},et.round=function(Zt){return arguments.length?(Ut=!!Zt,Jt()):Ut},et.padding=function(Zt){return arguments.length?(Ht=Math.min(1,Kt=+Zt),Jt()):Ht},et.paddingInner=function(Zt){return arguments.length?(Ht=Math.min(1,Zt),Jt()):Ht},et.paddingOuter=function(Zt){return arguments.length?(Kt=+Zt,Jt()):Kt},et.align=function(Zt){return arguments.length?(Yt=Math.max(0,Math.min(1,Zt)),Jt()):Yt},et.copy=function(){return band(dt(),[kt,Tt]).round(Ut).paddingInner(Ht).paddingOuter(Kt).align(Yt)},initRange.apply(Jt(),arguments)}function pointish(et){var dt=et.copy;return et.padding=et.paddingOuter,delete et.paddingInner,delete et.paddingOuter,et.copy=function(){return pointish(dt())},et}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(et){return function(){return et}}function number$1(et){return+et}var unit=[0,1];function identity$3(et){return et}function normalize(et,dt){return(dt-=et=+et)?function($t){return($t-et)/dt}:constants(isNaN(dt)?NaN:.5)}function clamper(et,dt){var $t;return et>dt&&($t=et,et=dt,dt=$t),function(kt){return Math.max(et,Math.min(dt,kt))}}function bimap(et,dt,$t){var kt=et[0],Tt=et[1],Dt=dt[0],Ft=dt[1];return Tt<kt?(kt=normalize(Tt,kt),Dt=$t(Ft,Dt)):(kt=normalize(kt,Tt),Dt=$t(Dt,Ft)),function(Ut){return Dt(kt(Ut))}}function polymap(et,dt,$t){var kt=Math.min(et.length,dt.length)-1,Tt=new Array(kt),Dt=new Array(kt),Ft=-1;for(et[kt]<et[0]&&(et=et.slice().reverse(),dt=dt.slice().reverse());++Ft<kt;)Tt[Ft]=normalize(et[Ft],et[Ft+1]),Dt[Ft]=$t(dt[Ft],dt[Ft+1]);return function(Ut){var Ht=bisect(et,Ut,1,kt)-1;return Dt[Ht](Tt[Ht](Ut))}}function copy(et,dt){return dt.domain(et.domain()).range(et.range()).interpolate(et.interpolate()).clamp(et.clamp()).unknown(et.unknown())}function transformer(){var et=unit,dt=unit,$t=interpolate$4,kt,Tt,Dt,Ft=identity$3,Ut,Ht,Kt;function Yt(){var Zt=Math.min(et.length,dt.length);return Ft!==identity$3&&(Ft=clamper(et[0],et[Zt-1])),Ut=Zt>2?polymap:bimap,Ht=Kt=null,Jt}function Jt(Zt){return Zt==null||isNaN(Zt=+Zt)?Dt:(Ht||(Ht=Ut(et.map(kt),dt,$t)))(kt(Ft(Zt)))}return Jt.invert=function(Zt){return Ft(Tt((Kt||(Kt=Ut(dt,et.map(kt),p$2)))(Zt)))},Jt.domain=function(Zt){return arguments.length?(et=Array.from(Zt,number$1),Yt()):et.slice()},Jt.range=function(Zt){return arguments.length?(dt=Array.from(Zt),Yt()):dt.slice()},Jt.rangeRound=function(Zt){return dt=Array.from(Zt),$t=v$2,Yt()},Jt.clamp=function(Zt){return arguments.length?(Ft=Zt?!0:identity$3,Yt()):Ft!==identity$3},Jt.interpolate=function(Zt){return arguments.length?($t=Zt,Yt()):$t},Jt.unknown=function(Zt){return arguments.length?(Dt=Zt,Jt):Dt},function(Zt,er){return kt=Zt,Tt=er,Yt()}}function continuous(){return transformer()(identity$3,identity$3)}function formatDecimal(et){return Math.abs(et=Math.round(et))>=1e21?et.toLocaleString("en").replace(/,/g,""):et.toString(10)}function formatDecimalParts(et,dt){if(($t=(et=dt?et.toExponential(dt-1):et.toExponential()).indexOf("e"))<0)return null;var $t,kt=et.slice(0,$t);return[kt.length>1?kt[0]+kt.slice(2):kt,+et.slice($t+1)]}function exponent(et){return et=formatDecimalParts(Math.abs(et)),et?et[1]:NaN}function formatGroup(et,dt){return function($t,kt){for(var Tt=$t.length,Dt=[],Ft=0,Ut=et[0],Ht=0;Tt>0&&Ut>0&&(Ht+Ut+1>kt&&(Ut=Math.max(1,kt-Ht)),Dt.push($t.substring(Tt-=Ut,Tt+Ut)),!((Ht+=Ut+1)>kt));)Ut=et[Ft=(Ft+1)%et.length];return Dt.reverse().join(dt)}}function formatNumerals(et){return function(dt){return dt.replace(/[0-9]/g,function($t){return et[+$t]})}}var re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(et){if(!(dt=re$1.exec(et)))throw new Error("invalid format: "+et);var dt;return new FormatSpecifier({fill:dt[1],align:dt[2],sign:dt[3],symbol:dt[4],zero:dt[5],width:dt[6],comma:dt[7],precision:dt[8]&&dt[8].slice(1),trim:dt[9],type:dt[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(et){this.fill=et.fill===void 0?" ":et.fill+"",this.align=et.align===void 0?">":et.align+"",this.sign=et.sign===void 0?"-":et.sign+"",this.symbol=et.symbol===void 0?"":et.symbol+"",this.zero=!!et.zero,this.width=et.width===void 0?void 0:+et.width,this.comma=!!et.comma,this.precision=et.precision===void 0?void 0:+et.precision,this.trim=!!et.trim,this.type=et.type===void 0?"":et.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(et){e:for(var dt=et.length,$t=1,kt=-1,Tt;$t<dt;++$t)switch(et[$t]){case".":kt=Tt=$t;break;case"0":kt===0&&(kt=$t),Tt=$t;break;default:if(!+et[$t])break e;kt>0&&(kt=0);break}return kt>0?et.slice(0,kt)+et.slice(Tt+1):et}var prefixExponent;function formatPrefixAuto(et,dt){var $t=formatDecimalParts(et,dt);if(!$t)return et+"";var kt=$t[0],Tt=$t[1],Dt=Tt-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(Tt/3)))*3)+1,Ft=kt.length;return Dt===Ft?kt:Dt>Ft?kt+new Array(Dt-Ft+1).join("0"):Dt>0?kt.slice(0,Dt)+"."+kt.slice(Dt):"0."+new Array(1-Dt).join("0")+formatDecimalParts(et,Math.max(0,dt+Dt-1))[0]}function formatRounded(et,dt){var $t=formatDecimalParts(et,dt);if(!$t)return et+"";var kt=$t[0],Tt=$t[1];return Tt<0?"0."+new Array(-Tt).join("0")+kt:kt.length>Tt+1?kt.slice(0,Tt+1)+"."+kt.slice(Tt+1):kt+new Array(Tt-kt.length+2).join("0")}const formatTypes={"%":function(et,dt){return(et*100).toFixed(dt)},b:function(et){return Math.round(et).toString(2)},c:function(et){return et+""},d:formatDecimal,e:function(et,dt){return et.toExponential(dt)},f:function(et,dt){return et.toFixed(dt)},g:function(et,dt){return et.toPrecision(dt)},o:function(et){return Math.round(et).toString(8)},p:function(et,dt){return formatRounded(et*100,dt)},r:formatRounded,s:formatPrefixAuto,X:function(et){return Math.round(et).toString(16).toUpperCase()},x:function(et){return Math.round(et).toString(16)}};function identity$2(et){return et}var map=Array.prototype.map,prefixes$4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(et){var dt=et.grouping===void 0||et.thousands===void 0?identity$2:formatGroup(map.call(et.grouping,Number),et.thousands+""),$t=et.currency===void 0?"":et.currency[0]+"",kt=et.currency===void 0?"":et.currency[1]+"",Tt=et.decimal===void 0?".":et.decimal+"",Dt=et.numerals===void 0?identity$2:formatNumerals(map.call(et.numerals,String)),Ft=et.percent===void 0?"%":et.percent+"",Ut=et.minus===void 0?"-":et.minus+"",Ht=et.nan===void 0?"NaN":et.nan+"";function Kt(Jt){Jt=formatSpecifier(Jt);var Zt=Jt.fill,er=Jt.align,rr=Jt.sign,sr=Jt.symbol,nr=Jt.zero,ir=Jt.width,or=Jt.comma,lr=Jt.precision,cr=Jt.trim,dr=Jt.type;dr==="n"?(or=!0,dr="g"):formatTypes[dr]||(lr===void 0&&(lr=12),cr=!0,dr="g"),(nr||Zt==="0"&&er==="=")&&(nr=!0,Zt="0",er="=");var ur=sr==="$"?$t:sr==="#"&&/[boxX]/.test(dr)?"0"+dr.toLowerCase():"",pr=sr==="$"?kt:/[%p]/.test(dr)?Ft:"",mr=formatTypes[dr],jr=/[defgprs%]/.test(dr);lr=lr===void 0?6:/[gprs]/.test(dr)?Math.max(1,Math.min(21,lr)):Math.max(0,Math.min(20,lr));function Rr(xr){var kr=ur,Mr=pr,Tr,Or,_r;if(dr==="c")Mr=mr(xr)+Mr,xr="";else{xr=+xr;var Pr=xr<0||1/xr<0;if(xr=isNaN(xr)?Ht:mr(Math.abs(xr),lr),cr&&(xr=formatTrim(xr)),Pr&&+xr==0&&rr!=="+"&&(Pr=!1),kr=(Pr?rr==="("?rr:Ut:rr==="-"||rr==="("?"":rr)+kr,Mr=(dr==="s"?prefixes$4[8+prefixExponent/3]:"")+Mr+(Pr&&rr==="("?")":""),jr){for(Tr=-1,Or=xr.length;++Tr<Or;)if(_r=xr.charCodeAt(Tr),48>_r||_r>57){Mr=(_r===46?Tt+xr.slice(Tr+1):xr.slice(Tr))+Mr,xr=xr.slice(0,Tr);break}}}or&&!nr&&(xr=dt(xr,1/0));var br=kr.length+xr.length+Mr.length,wr=br<ir?new Array(ir-br+1).join(Zt):"";switch(or&&nr&&(xr=dt(wr+xr,wr.length?ir-Mr.length:1/0),wr=""),er){case"<":xr=kr+xr+Mr+wr;break;case"=":xr=kr+wr+xr+Mr;break;case"^":xr=wr.slice(0,br=wr.length>>1)+kr+xr+Mr+wr.slice(br);break;default:xr=wr+kr+xr+Mr;break}return Dt(xr)}return Rr.toString=function(){return Jt+""},Rr}function Yt(Jt,Zt){var er=Kt((Jt=formatSpecifier(Jt),Jt.type="f",Jt)),rr=Math.max(-8,Math.min(8,Math.floor(exponent(Zt)/3)))*3,sr=Math.pow(10,-rr),nr=prefixes$4[8+rr/3];return function(ir){return er(sr*ir)+nr}}return{format:Kt,formatPrefix:Yt}}var locale$1,format,formatPrefix;defaultLocale$1({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function defaultLocale$1(et){return locale$1=formatLocale$1(et),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(et){return Math.max(0,-exponent(Math.abs(et)))}function precisionPrefix(et,dt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(dt)/3)))*3-exponent(Math.abs(et)))}function precisionRound(et,dt){return et=Math.abs(et),dt=Math.abs(dt)-et,Math.max(0,exponent(dt)-exponent(et))+1}function tickFormat(et,dt,$t,kt){var Tt=tickStep(et,dt,$t),Dt;switch(kt=formatSpecifier(kt??",f"),kt.type){case"s":{var Ft=Math.max(Math.abs(et),Math.abs(dt));return kt.precision==null&&!isNaN(Dt=precisionPrefix(Tt,Ft))&&(kt.precision=Dt),formatPrefix(kt,Ft)}case"":case"e":case"g":case"p":case"r":{kt.precision==null&&!isNaN(Dt=precisionRound(Tt,Math.max(Math.abs(et),Math.abs(dt))))&&(kt.precision=Dt-(kt.type==="e"));break}case"f":case"%":{kt.precision==null&&!isNaN(Dt=precisionFixed(Tt))&&(kt.precision=Dt-(kt.type==="%")*2);break}}return format(kt)}function linearish(et){var dt=et.domain;return et.ticks=function($t){var kt=dt();return ticks(kt[0],kt[kt.length-1],$t??10)},et.tickFormat=function($t,kt){var Tt=dt();return tickFormat(Tt[0],Tt[Tt.length-1],$t??10,kt)},et.nice=function($t){$t==null&&($t=10);var kt=dt(),Tt=0,Dt=kt.length-1,Ft=kt[Tt],Ut=kt[Dt],Ht,Kt,Yt=10;for(Ut<Ft&&(Kt=Ft,Ft=Ut,Ut=Kt,Kt=Tt,Tt=Dt,Dt=Kt);Yt-- >0;){if(Kt=tickIncrement(Ft,Ut,$t),Kt===Ht)return kt[Tt]=Ft,kt[Dt]=Ut,dt(kt);if(Kt>0)Ft=Math.floor(Ft/Kt)*Kt,Ut=Math.ceil(Ut/Kt)*Kt;else if(Kt<0)Ft=Math.ceil(Ft*Kt)/Kt,Ut=Math.floor(Ut*Kt)/Kt;else break;Ht=Kt}return et},et}function linear(){var et=continuous();return et.copy=function(){return copy(et,linear())},initRange.apply(et,arguments),linearish(et)}function nice(et,dt){et=et.slice();var $t=0,kt=et.length-1,Tt=et[$t],Dt=et[kt],Ft;return Dt<Tt&&(Ft=$t,$t=kt,kt=Ft,Ft=Tt,Tt=Dt,Dt=Ft),et[$t]=dt.floor(Tt),et[kt]=dt.ceil(Dt),et}function transformLog(et){return Math.log(et)}function transformExp(et){return Math.exp(et)}function transformLogn(et){return-Math.log(-et)}function transformExpn(et){return-Math.exp(-et)}function pow10(et){return isFinite(et)?+("1e"+et):et<0?0:et}function powp(et){return et===10?pow10:et===Math.E?Math.exp:dt=>Math.pow(et,dt)}function logp(et){return et===Math.E?Math.log:et===10&&Math.log10||et===2&&Math.log2||(et=Math.log(et),dt=>Math.log(dt)/et)}function reflect(et){return(dt,$t)=>-et(-dt,$t)}function loggish(et){const dt=et(transformLog,transformExp),$t=dt.domain;let kt=10,Tt,Dt;function Ft(){return Tt=logp(kt),Dt=powp(kt),$t()[0]<0?(Tt=reflect(Tt),Dt=reflect(Dt),et(transformLogn,transformExpn)):et(transformLog,transformExp),dt}return dt.base=function(Ut){return arguments.length?(kt=+Ut,Ft()):kt},dt.domain=function(Ut){return arguments.length?($t(Ut),Ft()):$t()},dt.ticks=Ut=>{const Ht=$t();let Kt=Ht[0],Yt=Ht[Ht.length-1];const Jt=Yt<Kt;Jt&&([Kt,Yt]=[Yt,Kt]);let Zt=Tt(Kt),er=Tt(Yt),rr,sr;const nr=Ut==null?10:+Ut;let ir=[];if(!(kt%1)&&er-Zt<nr){if(Zt=Math.floor(Zt),er=Math.ceil(er),Kt>0){for(;Zt<=er;++Zt)for(rr=1;rr<kt;++rr)if(sr=Zt<0?rr/Dt(-Zt):rr*Dt(Zt),!(sr<Kt)){if(sr>Yt)break;ir.push(sr)}}else for(;Zt<=er;++Zt)for(rr=kt-1;rr>=1;--rr)if(sr=Zt>0?rr/Dt(-Zt):rr*Dt(Zt),!(sr<Kt)){if(sr>Yt)break;ir.push(sr)}ir.length*2<nr&&(ir=ticks(Kt,Yt,nr))}else ir=ticks(Zt,er,Math.min(er-Zt,nr)).map(Dt);return Jt?ir.reverse():ir},dt.tickFormat=(Ut,Ht)=>{if(Ut==null&&(Ut=10),Ht==null&&(Ht=kt===10?"s":","),typeof Ht!="function"&&(!(kt%1)&&(Ht=formatSpecifier(Ht)).precision==null&&(Ht.trim=!0),Ht=format(Ht)),Ut===1/0)return Ht;const Kt=Math.max(1,kt*Ut/dt.ticks().length);return Yt=>{let Jt=Yt/Dt(Math.round(Tt(Yt)));return Jt*kt<kt-.5&&(Jt*=kt),Jt<=Kt?Ht(Yt):""}},dt.nice=()=>$t(nice($t(),{floor:Ut=>Dt(Math.floor(Tt(Ut))),ceil:Ut=>Dt(Math.ceil(Tt(Ut)))})),dt}function log(){const et=loggish(transformer()).domain([1,10]);return et.copy=()=>copy(et,log()).base(et.base()),initRange.apply(et,arguments),et}function transformSymlog(et){return function(dt){return Math.sign(dt)*Math.log1p(Math.abs(dt/et))}}function transformSymexp(et){return function(dt){return Math.sign(dt)*Math.expm1(Math.abs(dt))*et}}function symlogish(et){var dt=1,$t=et(transformSymlog(dt),transformSymexp(dt));return $t.constant=function(kt){return arguments.length?et(transformSymlog(dt=+kt),transformSymexp(dt)):dt},linearish($t)}function symlog(){var et=symlogish(transformer());return et.copy=function(){return copy(et,symlog()).constant(et.constant())},initRange.apply(et,arguments)}const t0$1=new Date,t1$1=new Date;function timeInterval(et,dt,$t,kt){function Tt(Dt){return et(Dt=arguments.length===0?new Date:new Date(+Dt)),Dt}return Tt.floor=Dt=>(et(Dt=new Date(+Dt)),Dt),Tt.ceil=Dt=>(et(Dt=new Date(Dt-1)),dt(Dt,1),et(Dt),Dt),Tt.round=Dt=>{const Ft=Tt(Dt),Ut=Tt.ceil(Dt);return Dt-Ft<Ut-Dt?Ft:Ut},Tt.offset=(Dt,Ft)=>(dt(Dt=new Date(+Dt),Ft==null?1:Math.floor(Ft)),Dt),Tt.range=(Dt,Ft,Ut)=>{const Ht=[];if(Dt=Tt.ceil(Dt),Ut=Ut==null?1:Math.floor(Ut),!(Dt<Ft)||!(Ut>0))return Ht;let Kt;do Ht.push(Kt=new Date(+Dt)),dt(Dt,Ut),et(Dt);while(Kt<Dt&&Dt<Ft);return Ht},Tt.filter=Dt=>timeInterval(Ft=>{if(Ft>=Ft)for(;et(Ft),!Dt(Ft);)Ft.setTime(Ft-1)},(Ft,Ut)=>{if(Ft>=Ft)if(Ut<0)for(;++Ut<=0;)for(;dt(Ft,-1),!Dt(Ft););else for(;--Ut>=0;)for(;dt(Ft,1),!Dt(Ft););}),$t&&(Tt.count=(Dt,Ft)=>(t0$1.setTime(+Dt),t1$1.setTime(+Ft),et(t0$1),et(t1$1),Math.floor($t(t0$1,t1$1))),Tt.every=Dt=>(Dt=Math.floor(Dt),!isFinite(Dt)||!(Dt>0)?null:Dt>1?Tt.filter(kt?Ft=>kt(Ft)%Dt===0:Ft=>Tt.count(0,Ft)%Dt===0):Tt)),Tt}const millisecond$1=timeInterval(()=>{},(et,dt)=>{et.setTime(+et+dt)},(et,dt)=>dt-et);millisecond$1.every=et=>(et=Math.floor(et),!isFinite(et)||!(et>0)?null:et>1?timeInterval(dt=>{dt.setTime(Math.floor(dt/et)*et)},(dt,$t)=>{dt.setTime(+dt+$t*et)},(dt,$t)=>($t-dt)/et):millisecond$1);millisecond$1.range;const durationSecond$1=1e3,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth=durationDay$1*30,durationYear=durationDay$1*365,second$1=timeInterval(et=>{et.setTime(et-et.getMilliseconds())},(et,dt)=>{et.setTime(+et+dt*durationSecond$1)},(et,dt)=>(dt-et)/durationSecond$1,et=>et.getUTCSeconds());second$1.range;const timeMinute=timeInterval(et=>{et.setTime(et-et.getMilliseconds()-et.getSeconds()*durationSecond$1)},(et,dt)=>{et.setTime(+et+dt*durationMinute$1)},(et,dt)=>(dt-et)/durationMinute$1,et=>et.getMinutes());timeMinute.range;const utcMinute$1=timeInterval(et=>{et.setUTCSeconds(0,0)},(et,dt)=>{et.setTime(+et+dt*durationMinute$1)},(et,dt)=>(dt-et)/durationMinute$1,et=>et.getUTCMinutes());utcMinute$1.range;const timeHour=timeInterval(et=>{et.setTime(et-et.getMilliseconds()-et.getSeconds()*durationSecond$1-et.getMinutes()*durationMinute$1)},(et,dt)=>{et.setTime(+et+dt*durationHour$1)},(et,dt)=>(dt-et)/durationHour$1,et=>et.getHours());timeHour.range;const utcHour$1=timeInterval(et=>{et.setUTCMinutes(0,0,0)},(et,dt)=>{et.setTime(+et+dt*durationHour$1)},(et,dt)=>(dt-et)/durationHour$1,et=>et.getUTCHours());utcHour$1.range;const timeDay$1=timeInterval(et=>et.setHours(0,0,0,0),(et,dt)=>et.setDate(et.getDate()+dt),(et,dt)=>(dt-et-(dt.getTimezoneOffset()-et.getTimezoneOffset())*durationMinute$1)/durationDay$1,et=>et.getDate()-1);timeDay$1.range;const utcDay$2=timeInterval(et=>{et.setUTCHours(0,0,0,0)},(et,dt)=>{et.setUTCDate(et.getUTCDate()+dt)},(et,dt)=>(dt-et)/durationDay$1,et=>et.getUTCDate()-1);utcDay$2.range;const unixDay=timeInterval(et=>{et.setUTCHours(0,0,0,0)},(et,dt)=>{et.setUTCDate(et.getUTCDate()+dt)},(et,dt)=>(dt-et)/durationDay$1,et=>Math.floor(et/durationDay$1));unixDay.range;function timeWeekday(et){return timeInterval(dt=>{dt.setDate(dt.getDate()-(dt.getDay()+7-et)%7),dt.setHours(0,0,0,0)},(dt,$t)=>{dt.setDate(dt.getDate()+$t*7)},(dt,$t)=>($t-dt-($t.getTimezoneOffset()-dt.getTimezoneOffset())*durationMinute$1)/durationWeek$1)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday$1(et){return timeInterval(dt=>{dt.setUTCDate(dt.getUTCDate()-(dt.getUTCDay()+7-et)%7),dt.setUTCHours(0,0,0,0)},(dt,$t)=>{dt.setUTCDate(dt.getUTCDate()+$t*7)},(dt,$t)=>($t-dt)/durationWeek$1)}const utcSunday$1=utcWeekday$1(0),utcMonday$1=utcWeekday$1(1),utcTuesday$1=utcWeekday$1(2),utcWednesday$1=utcWeekday$1(3),utcThursday$1=utcWeekday$1(4),utcFriday$1=utcWeekday$1(5),utcSaturday$1=utcWeekday$1(6);utcSunday$1.range;utcMonday$1.range;utcTuesday$1.range;utcWednesday$1.range;utcThursday$1.range;utcFriday$1.range;utcSaturday$1.range;const timeMonth=timeInterval(et=>{et.setDate(1),et.setHours(0,0,0,0)},(et,dt)=>{et.setMonth(et.getMonth()+dt)},(et,dt)=>dt.getMonth()-et.getMonth()+(dt.getFullYear()-et.getFullYear())*12,et=>et.getMonth());timeMonth.range;const utcMonth$1=timeInterval(et=>{et.setUTCDate(1),et.setUTCHours(0,0,0,0)},(et,dt)=>{et.setUTCMonth(et.getUTCMonth()+dt)},(et,dt)=>dt.getUTCMonth()-et.getUTCMonth()+(dt.getUTCFullYear()-et.getUTCFullYear())*12,et=>et.getUTCMonth());utcMonth$1.range;const timeYear=timeInterval(et=>{et.setMonth(0,1),et.setHours(0,0,0,0)},(et,dt)=>{et.setFullYear(et.getFullYear()+dt)},(et,dt)=>dt.getFullYear()-et.getFullYear(),et=>et.getFullYear());timeYear.every=et=>!isFinite(et=Math.floor(et))||!(et>0)?null:timeInterval(dt=>{dt.setFullYear(Math.floor(dt.getFullYear()/et)*et),dt.setMonth(0,1),dt.setHours(0,0,0,0)},(dt,$t)=>{dt.setFullYear(dt.getFullYear()+$t*et)});timeYear.range;const utcYear$1=timeInterval(et=>{et.setUTCMonth(0,1),et.setUTCHours(0,0,0,0)},(et,dt)=>{et.setUTCFullYear(et.getUTCFullYear()+dt)},(et,dt)=>dt.getUTCFullYear()-et.getUTCFullYear(),et=>et.getUTCFullYear());utcYear$1.every=et=>!isFinite(et=Math.floor(et))||!(et>0)?null:timeInterval(dt=>{dt.setUTCFullYear(Math.floor(dt.getUTCFullYear()/et)*et),dt.setUTCMonth(0,1),dt.setUTCHours(0,0,0,0)},(dt,$t)=>{dt.setUTCFullYear(dt.getUTCFullYear()+$t*et)});utcYear$1.range;function ticker(et,dt,$t,kt,Tt,Dt){const Ft=[[second$1,1,durationSecond$1],[second$1,5,5*durationSecond$1],[second$1,15,15*durationSecond$1],[second$1,30,30*durationSecond$1],[Dt,1,durationMinute$1],[Dt,5,5*durationMinute$1],[Dt,15,15*durationMinute$1],[Dt,30,30*durationMinute$1],[Tt,1,durationHour$1],[Tt,3,3*durationHour$1],[Tt,6,6*durationHour$1],[Tt,12,12*durationHour$1],[kt,1,durationDay$1],[kt,2,2*durationDay$1],[$t,1,durationWeek$1],[dt,1,durationMonth],[dt,3,3*durationMonth],[et,1,durationYear]];function Ut(Kt,Yt,Jt){const Zt=Yt<Kt;Zt&&([Kt,Yt]=[Yt,Kt]);const er=Jt&&typeof Jt.range=="function"?Jt:Ht(Kt,Yt,Jt),rr=er?er.range(Kt,+Yt+1):[];return Zt?rr.reverse():rr}function Ht(Kt,Yt,Jt){const Zt=Math.abs(Yt-Kt)/Jt,er=bisector(([,,nr])=>nr).right(Ft,Zt);if(er===Ft.length)return et.every(tickStep(Kt/durationYear,Yt/durationYear,Jt));if(er===0)return millisecond$1.every(Math.max(tickStep(Kt,Yt,Jt),1));const[rr,sr]=Ft[Zt/Ft[er-1][2]<Ft[er][2]/Zt?er-1:er];return rr.every(sr)}return[Ut,Ht]}const[utcTicks,utcTickInterval]=ticker(utcYear$1,utcMonth$1,utcSunday$1,unixDay,utcHour$1,utcMinute$1),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay$1,timeHour,timeMinute);var t0=new Date,t1=new Date;function newInterval(et,dt,$t,kt){function Tt(Dt){return et(Dt=arguments.length===0?new Date:new Date(+Dt)),Dt}return Tt.floor=function(Dt){return et(Dt=new Date(+Dt)),Dt},Tt.ceil=function(Dt){return et(Dt=new Date(Dt-1)),dt(Dt,1),et(Dt),Dt},Tt.round=function(Dt){var Ft=Tt(Dt),Ut=Tt.ceil(Dt);return Dt-Ft<Ut-Dt?Ft:Ut},Tt.offset=function(Dt,Ft){return dt(Dt=new Date(+Dt),Ft==null?1:Math.floor(Ft)),Dt},Tt.range=function(Dt,Ft,Ut){var Ht=[],Kt;if(Dt=Tt.ceil(Dt),Ut=Ut==null?1:Math.floor(Ut),!(Dt<Ft)||!(Ut>0))return Ht;do Ht.push(Kt=new Date(+Dt)),dt(Dt,Ut),et(Dt);while(Kt<Dt&&Dt<Ft);return Ht},Tt.filter=function(Dt){return newInterval(function(Ft){if(Ft>=Ft)for(;et(Ft),!Dt(Ft);)Ft.setTime(Ft-1)},function(Ft,Ut){if(Ft>=Ft)if(Ut<0)for(;++Ut<=0;)for(;dt(Ft,-1),!Dt(Ft););else for(;--Ut>=0;)for(;dt(Ft,1),!Dt(Ft););})},$t&&(Tt.count=function(Dt,Ft){return t0.setTime(+Dt),t1.setTime(+Ft),et(t0),et(t1),Math.floor($t(t0,t1))},Tt.every=function(Dt){return Dt=Math.floor(Dt),!isFinite(Dt)||!(Dt>0)?null:Dt>1?Tt.filter(kt?function(Ft){return kt(Ft)%Dt===0}:function(Ft){return Tt.count(0,Ft)%Dt===0}):Tt}),Tt}var millisecond=newInterval(function(){},function(et,dt){et.setTime(+et+dt)},function(et,dt){return dt-et});millisecond.every=function(et){return et=Math.floor(et),!isFinite(et)||!(et>0)?null:et>1?newInterval(function(dt){dt.setTime(Math.floor(dt/et)*et)},function(dt,$t){dt.setTime(+dt+$t*et)},function(dt,$t){return($t-dt)/et}):millisecond};const g$1=millisecond;millisecond.range;var durationSecond=1e3,durationMinute=6e4,durationHour=36e5,durationDay=864e5,durationWeek=6048e5,second=newInterval(function(et){et.setTime(et-et.getMilliseconds())},function(et,dt){et.setTime(+et+dt*durationSecond)},function(et,dt){return(dt-et)/durationSecond},function(et){return et.getUTCSeconds()});const k$3=second;second.range;var minute=newInterval(function(et){et.setTime(et-et.getMilliseconds()-et.getSeconds()*durationSecond)},function(et,dt){et.setTime(+et+dt*durationMinute)},function(et,dt){return(dt-et)/durationMinute},function(et){return et.getMinutes()});const T$2=minute;minute.range;var hour=newInterval(function(et){et.setTime(et-et.getMilliseconds()-et.getSeconds()*durationSecond-et.getMinutes()*durationMinute)},function(et,dt){et.setTime(+et+dt*durationHour)},function(et,dt){return(dt-et)/durationHour},function(et){return et.getHours()});const M$1=hour;hour.range;var day=newInterval(function(et){et.setHours(0,0,0,0)},function(et,dt){et.setDate(et.getDate()+dt)},function(et,dt){return(dt-et-(dt.getTimezoneOffset()-et.getTimezoneOffset())*durationMinute)/durationDay},function(et){return et.getDate()-1});const timeDay=day;day.range;function weekday(et){return newInterval(function(dt){dt.setDate(dt.getDate()-(dt.getDay()+7-et)%7),dt.setHours(0,0,0,0)},function(dt,$t){dt.setDate(dt.getDate()+$t*7)},function(dt,$t){return($t-dt-($t.getTimezoneOffset()-dt.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6);sunday.range;monday.range;tuesday.range;wednesday.range;thursday.range;friday.range;saturday.range;var month=newInterval(function(et){et.setDate(1),et.setHours(0,0,0,0)},function(et,dt){et.setMonth(et.getMonth()+dt)},function(et,dt){return dt.getMonth()-et.getMonth()+(dt.getFullYear()-et.getFullYear())*12},function(et){return et.getMonth()});const I$1=month;month.range;var year=newInterval(function(et){et.setMonth(0,1),et.setHours(0,0,0,0)},function(et,dt){et.setFullYear(et.getFullYear()+dt)},function(et,dt){return dt.getFullYear()-et.getFullYear()},function(et){return et.getFullYear()});year.every=function(et){return!isFinite(et=Math.floor(et))||!(et>0)?null:newInterval(function(dt){dt.setFullYear(Math.floor(dt.getFullYear()/et)*et),dt.setMonth(0,1),dt.setHours(0,0,0,0)},function(dt,$t){dt.setFullYear(dt.getFullYear()+$t*et)})};const $$1=year;year.range;var utcMinute=newInterval(function(et){et.setUTCSeconds(0,0)},function(et,dt){et.setTime(+et+dt*durationMinute)},function(et,dt){return(dt-et)/durationMinute},function(et){return et.getUTCMinutes()});const b$3=utcMinute;utcMinute.range;var utcHour=newInterval(function(et){et.setUTCMinutes(0,0,0)},function(et,dt){et.setTime(+et+dt*durationHour)},function(et,dt){return(dt-et)/durationHour},function(et){return et.getUTCHours()});const w$3=utcHour;utcHour.range;var utcDay=newInterval(function(et){et.setUTCHours(0,0,0,0)},function(et,dt){et.setUTCDate(et.getUTCDate()+dt)},function(et,dt){return(dt-et)/durationDay},function(et){return et.getUTCDate()-1});const utcDay$1=utcDay;utcDay.range;function utcWeekday(et){return newInterval(function(dt){dt.setUTCDate(dt.getUTCDate()-(dt.getUTCDay()+7-et)%7),dt.setUTCHours(0,0,0,0)},function(dt,$t){dt.setUTCDate(dt.getUTCDate()+$t*7)},function(dt,$t){return($t-dt)/durationWeek})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;var utcMonth=newInterval(function(et){et.setUTCDate(1),et.setUTCHours(0,0,0,0)},function(et,dt){et.setUTCMonth(et.getUTCMonth()+dt)},function(et,dt){return dt.getUTCMonth()-et.getUTCMonth()+(dt.getUTCFullYear()-et.getUTCFullYear())*12},function(et){return et.getUTCMonth()});const P$1=utcMonth;utcMonth.range;var utcYear=newInterval(function(et){et.setUTCMonth(0,1),et.setUTCHours(0,0,0,0)},function(et,dt){et.setUTCFullYear(et.getUTCFullYear()+dt)},function(et,dt){return dt.getUTCFullYear()-et.getUTCFullYear()},function(et){return et.getUTCFullYear()});utcYear.every=function(et){return!isFinite(et=Math.floor(et))||!(et>0)?null:newInterval(function(dt){dt.setUTCFullYear(Math.floor(dt.getUTCFullYear()/et)*et),dt.setUTCMonth(0,1),dt.setUTCHours(0,0,0,0)},function(dt,$t){dt.setUTCFullYear(dt.getUTCFullYear()+$t*et)})};const G=utcYear;utcYear.range;function localDate(et){if(0<=et.y&&et.y<100){var dt=new Date(-1,et.m,et.d,et.H,et.M,et.S,et.L);return dt.setFullYear(et.y),dt}return new Date(et.y,et.m,et.d,et.H,et.M,et.S,et.L)}function utcDate(et){if(0<=et.y&&et.y<100){var dt=new Date(Date.UTC(-1,et.m,et.d,et.H,et.M,et.S,et.L));return dt.setUTCFullYear(et.y),dt}return new Date(Date.UTC(et.y,et.m,et.d,et.H,et.M,et.S,et.L))}function newDate(et,dt,$t){return{y:et,m:dt,d:$t,H:0,M:0,S:0,L:0}}function formatLocale(et){var dt=et.dateTime,$t=et.date,kt=et.time,Tt=et.periods,Dt=et.days,Ft=et.shortDays,Ut=et.months,Ht=et.shortMonths,Kt=formatRe(Tt),Yt=formatLookup(Tt),Jt=formatRe(Dt),Zt=formatLookup(Dt),er=formatRe(Ft),rr=formatLookup(Ft),sr=formatRe(Ut),nr=formatLookup(Ut),ir=formatRe(Ht),or=formatLookup(Ht),lr={a:Pr,A:br,b:wr,B:zr,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:Hr,q:Yr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},cr={a:es,A:rs,b:Wr,B:Xr,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:ns,q:gs,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},dr={a:Rr,A:xr,b:kr,B:Mr,c:Tr,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:jr,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:Or,X:_r,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};lr.x=ur($t,lr),lr.X=ur(kt,lr),lr.c=ur(dt,lr),cr.x=ur($t,cr),cr.X=ur(kt,cr),cr.c=ur(dt,cr);function ur(us,ps){return function(cs){var ss=[],fs=-1,hs=0,$s=us.length,ks,Ds,_s;for(cs instanceof Date||(cs=new Date(+cs));++fs<$s;)us.charCodeAt(fs)===37&&(ss.push(us.slice(hs,fs)),(Ds=pads[ks=us.charAt(++fs)])!=null?ks=us.charAt(++fs):Ds=ks==="e"?" ":"0",(_s=ps[ks])&&(ks=_s(cs,Ds)),ss.push(ks),hs=fs+1);return ss.push(us.slice(hs,fs)),ss.join("")}}function pr(us,ps){return function(cs){var ss=newDate(1900,void 0,1),fs=mr(ss,us,cs+="",0),hs,$s;if(fs!=cs.length)return null;if("Q"in ss)return new Date(ss.Q);if("s"in ss)return new Date(ss.s*1e3+("L"in ss?ss.L:0));if(ps&&!("Z"in ss)&&(ss.Z=0),"p"in ss&&(ss.H=ss.H%12+ss.p*12),ss.m===void 0&&(ss.m="q"in ss?ss.q:0),"V"in ss){if(ss.V<1||ss.V>53)return null;"w"in ss||(ss.w=1),"Z"in ss?(hs=utcDate(newDate(ss.y,0,1)),$s=hs.getUTCDay(),hs=$s>4||$s===0?utcMonday.ceil(hs):utcMonday(hs),hs=utcDay$1.offset(hs,(ss.V-1)*7),ss.y=hs.getUTCFullYear(),ss.m=hs.getUTCMonth(),ss.d=hs.getUTCDate()+(ss.w+6)%7):(hs=localDate(newDate(ss.y,0,1)),$s=hs.getDay(),hs=$s>4||$s===0?monday.ceil(hs):monday(hs),hs=timeDay.offset(hs,(ss.V-1)*7),ss.y=hs.getFullYear(),ss.m=hs.getMonth(),ss.d=hs.getDate()+(ss.w+6)%7)}else("W"in ss||"U"in ss)&&("w"in ss||(ss.w="u"in ss?ss.u%7:"W"in ss?1:0),$s="Z"in ss?utcDate(newDate(ss.y,0,1)).getUTCDay():localDate(newDate(ss.y,0,1)).getDay(),ss.m=0,ss.d="W"in ss?(ss.w+6)%7+ss.W*7-($s+5)%7:ss.w+ss.U*7-($s+6)%7);return"Z"in ss?(ss.H+=ss.Z/100|0,ss.M+=ss.Z%100,utcDate(ss)):localDate(ss)}}function mr(us,ps,cs,ss){for(var fs=0,hs=ps.length,$s=cs.length,ks,Ds;fs<hs;){if(ss>=$s)return-1;if(ks=ps.charCodeAt(fs++),ks===37){if(ks=ps.charAt(fs++),Ds=dr[ks in pads?ps.charAt(fs++):ks],!Ds||(ss=Ds(us,cs,ss))<0)return-1}else if(ks!=cs.charCodeAt(ss++))return-1}return ss}function jr(us,ps,cs){var ss=Kt.exec(ps.slice(cs));return ss?(us.p=Yt.get(ss[0].toLowerCase()),cs+ss[0].length):-1}function Rr(us,ps,cs){var ss=er.exec(ps.slice(cs));return ss?(us.w=rr.get(ss[0].toLowerCase()),cs+ss[0].length):-1}function xr(us,ps,cs){var ss=Jt.exec(ps.slice(cs));return ss?(us.w=Zt.get(ss[0].toLowerCase()),cs+ss[0].length):-1}function kr(us,ps,cs){var ss=ir.exec(ps.slice(cs));return ss?(us.m=or.get(ss[0].toLowerCase()),cs+ss[0].length):-1}function Mr(us,ps,cs){var ss=sr.exec(ps.slice(cs));return ss?(us.m=nr.get(ss[0].toLowerCase()),cs+ss[0].length):-1}function Tr(us,ps,cs){return mr(us,dt,ps,cs)}function Or(us,ps,cs){return mr(us,$t,ps,cs)}function _r(us,ps,cs){return mr(us,kt,ps,cs)}function Pr(us){return Ft[us.getDay()]}function br(us){return Dt[us.getDay()]}function wr(us){return Ht[us.getMonth()]}function zr(us){return Ut[us.getMonth()]}function Hr(us){return Tt[+(us.getHours()>=12)]}function Yr(us){return 1+~~(us.getMonth()/3)}function es(us){return Ft[us.getUTCDay()]}function rs(us){return Dt[us.getUTCDay()]}function Wr(us){return Ht[us.getUTCMonth()]}function Xr(us){return Ut[us.getUTCMonth()]}function ns(us){return Tt[+(us.getUTCHours()>=12)]}function gs(us){return 1+~~(us.getUTCMonth()/3)}return{format:function(us){var ps=ur(us+="",lr);return ps.toString=function(){return us},ps},parse:function(us){var ps=pr(us+="",!1);return ps.toString=function(){return us},ps},utcFormat:function(us){var ps=ur(us+="",cr);return ps.toString=function(){return us},ps},utcParse:function(us){var ps=pr(us+="",!0);return ps.toString=function(){return us},ps}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(et,dt,$t){var kt=et<0?"-":"",Tt=(kt?-et:et)+"",Dt=Tt.length;return kt+(Dt<$t?new Array($t-Dt+1).join(dt)+Tt:Tt)}function requote(et){return et.replace(requoteRe,"\\$&")}function formatRe(et){return new RegExp("^(?:"+et.map(requote).join("|")+")","i")}function formatLookup(et){return new Map(et.map((dt,$t)=>[dt.toLowerCase(),$t]))}function parseWeekdayNumberSunday(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+1));return kt?(et.w=+kt[0],$t+kt[0].length):-1}function parseWeekdayNumberMonday(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+1));return kt?(et.u=+kt[0],$t+kt[0].length):-1}function parseWeekNumberSunday(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.U=+kt[0],$t+kt[0].length):-1}function parseWeekNumberISO(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.V=+kt[0],$t+kt[0].length):-1}function parseWeekNumberMonday(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.W=+kt[0],$t+kt[0].length):-1}function parseFullYear(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+4));return kt?(et.y=+kt[0],$t+kt[0].length):-1}function parseYear(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.y=+kt[0]+(+kt[0]>68?1900:2e3),$t+kt[0].length):-1}function parseZone(et,dt,$t){var kt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(dt.slice($t,$t+6));return kt?(et.Z=kt[1]?0:-(kt[2]+(kt[3]||"00")),$t+kt[0].length):-1}function parseQuarter(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+1));return kt?(et.q=kt[0]*3-3,$t+kt[0].length):-1}function parseMonthNumber(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.m=kt[0]-1,$t+kt[0].length):-1}function parseDayOfMonth(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.d=+kt[0],$t+kt[0].length):-1}function parseDayOfYear(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+3));return kt?(et.m=0,et.d=+kt[0],$t+kt[0].length):-1}function parseHour24(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.H=+kt[0],$t+kt[0].length):-1}function parseMinutes(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.M=+kt[0],$t+kt[0].length):-1}function parseSeconds(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+2));return kt?(et.S=+kt[0],$t+kt[0].length):-1}function parseMilliseconds(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+3));return kt?(et.L=+kt[0],$t+kt[0].length):-1}function parseMicroseconds(et,dt,$t){var kt=numberRe.exec(dt.slice($t,$t+6));return kt?(et.L=Math.floor(kt[0]/1e3),$t+kt[0].length):-1}function parseLiteralPercent(et,dt,$t){var kt=percentRe.exec(dt.slice($t,$t+1));return kt?$t+kt[0].length:-1}function parseUnixTimestamp(et,dt,$t){var kt=numberRe.exec(dt.slice($t));return kt?(et.Q=+kt[0],$t+kt[0].length):-1}function parseUnixTimestampSeconds(et,dt,$t){var kt=numberRe.exec(dt.slice($t));return kt?(et.s=+kt[0],$t+kt[0].length):-1}function formatDayOfMonth(et,dt){return pad(et.getDate(),dt,2)}function formatHour24(et,dt){return pad(et.getHours(),dt,2)}function formatHour12(et,dt){return pad(et.getHours()%12||12,dt,2)}function formatDayOfYear(et,dt){return pad(1+timeDay.count($$1(et),et),dt,3)}function formatMilliseconds(et,dt){return pad(et.getMilliseconds(),dt,3)}function formatMicroseconds(et,dt){return formatMilliseconds(et,dt)+"000"}function formatMonthNumber(et,dt){return pad(et.getMonth()+1,dt,2)}function formatMinutes(et,dt){return pad(et.getMinutes(),dt,2)}function formatSeconds(et,dt){return pad(et.getSeconds(),dt,2)}function formatWeekdayNumberMonday(et){var dt=et.getDay();return dt===0?7:dt}function formatWeekNumberSunday(et,dt){return pad(sunday.count($$1(et)-1,et),dt,2)}function dISO(et){var dt=et.getDay();return dt>=4||dt===0?thursday(et):thursday.ceil(et)}function formatWeekNumberISO(et,dt){return et=dISO(et),pad(thursday.count($$1(et),et)+($$1(et).getDay()===4),dt,2)}function formatWeekdayNumberSunday(et){return et.getDay()}function formatWeekNumberMonday(et,dt){return pad(monday.count($$1(et)-1,et),dt,2)}function formatYear(et,dt){return pad(et.getFullYear()%100,dt,2)}function formatYearISO(et,dt){return et=dISO(et),pad(et.getFullYear()%100,dt,2)}function formatFullYear(et,dt){return pad(et.getFullYear()%1e4,dt,4)}function formatFullYearISO(et,dt){var $t=et.getDay();return et=$t>=4||$t===0?thursday(et):thursday.ceil(et),pad(et.getFullYear()%1e4,dt,4)}function formatZone(et){var dt=et.getTimezoneOffset();return(dt>0?"-":(dt*=-1,"+"))+pad(dt/60|0,"0",2)+pad(dt%60,"0",2)}function formatUTCDayOfMonth(et,dt){return pad(et.getUTCDate(),dt,2)}function formatUTCHour24(et,dt){return pad(et.getUTCHours(),dt,2)}function formatUTCHour12(et,dt){return pad(et.getUTCHours()%12||12,dt,2)}function formatUTCDayOfYear(et,dt){return pad(1+utcDay$1.count(G(et),et),dt,3)}function formatUTCMilliseconds(et,dt){return pad(et.getUTCMilliseconds(),dt,3)}function formatUTCMicroseconds(et,dt){return formatUTCMilliseconds(et,dt)+"000"}function formatUTCMonthNumber(et,dt){return pad(et.getUTCMonth()+1,dt,2)}function formatUTCMinutes(et,dt){return pad(et.getUTCMinutes(),dt,2)}function formatUTCSeconds(et,dt){return pad(et.getUTCSeconds(),dt,2)}function formatUTCWeekdayNumberMonday(et){var dt=et.getUTCDay();return dt===0?7:dt}function formatUTCWeekNumberSunday(et,dt){return pad(utcSunday.count(G(et)-1,et),dt,2)}function UTCdISO(et){var dt=et.getUTCDay();return dt>=4||dt===0?utcThursday(et):utcThursday.ceil(et)}function formatUTCWeekNumberISO(et,dt){return et=UTCdISO(et),pad(utcThursday.count(G(et),et)+(G(et).getUTCDay()===4),dt,2)}function formatUTCWeekdayNumberSunday(et){return et.getUTCDay()}function formatUTCWeekNumberMonday(et,dt){return pad(utcMonday.count(G(et)-1,et),dt,2)}function formatUTCYear(et,dt){return pad(et.getUTCFullYear()%100,dt,2)}function formatUTCYearISO(et,dt){return et=UTCdISO(et),pad(et.getUTCFullYear()%100,dt,2)}function formatUTCFullYear(et,dt){return pad(et.getUTCFullYear()%1e4,dt,4)}function formatUTCFullYearISO(et,dt){var $t=et.getUTCDay();return et=$t>=4||$t===0?utcThursday(et):utcThursday.ceil(et),pad(et.getUTCFullYear()%1e4,dt,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(et){return+et}function formatUnixTimestampSeconds(et){return Math.floor(+et/1e3)}var locale,timeFormat,timeParse,utcFormat,utcParse;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(et){return locale=formatLocale(et),timeFormat=locale.format,timeParse=locale.parse,utcFormat=locale.utcFormat,utcParse=locale.utcParse,locale}function date(et){return new Date(et)}function number(et){return et instanceof Date?+et:+new Date(+et)}function calendar(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt){var Yt=continuous(),Jt=Yt.invert,Zt=Yt.domain,er=Kt(".%L"),rr=Kt(":%S"),sr=Kt("%I:%M"),nr=Kt("%I %p"),ir=Kt("%a %d"),or=Kt("%b %d"),lr=Kt("%B"),cr=Kt("%Y");function dr(ur){return(Ht(ur)<ur?er:Ut(ur)<ur?rr:Ft(ur)<ur?sr:Dt(ur)<ur?nr:kt(ur)<ur?Tt(ur)<ur?ir:or:$t(ur)<ur?lr:cr)(ur)}return Yt.invert=function(ur){return new Date(Jt(ur))},Yt.domain=function(ur){return arguments.length?Zt(Array.from(ur,number)):Zt().map(date)},Yt.ticks=function(ur){var pr=Zt();return et(pr[0],pr[pr.length-1],ur??10)},Yt.tickFormat=function(ur,pr){return pr==null?dr:Kt(pr)},Yt.nice=function(ur){var pr=Zt();return(!ur||typeof ur.range!="function")&&(ur=dt(pr[0],pr[pr.length-1],ur??10)),ur?Zt(nice(pr,ur)):Yt},Yt.copy=function(){return copy(Yt,calendar(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt))},Yt}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay$1,timeHour,timeMinute,second$1,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear$1,utcMonth$1,utcSunday$1,utcDay$2,utcHour$1,utcMinute$1,second$1,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function colors$4(et){for(var dt=et.length/6|0,$t=new Array(dt),kt=0;kt<dt;)$t[kt]="#"+et.slice(kt*6,++kt*6);return $t}const e$1=colors$4("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),r$1=colors$4("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),n=colors$4("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),t=colors$4("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),o$2=colors$4("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),i=colors$4("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),u$1=colors$4("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),l=colors$4("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),a$2=colors$4("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),c$2=colors$4("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp$1=et=>rgbBasis(et[et.length-1]);var scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors$4);const y$1=ramp$1(scheme$q);var scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors$4);const _$1=ramp$1(scheme$p);var scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors$4);const w$2=ramp$1(scheme$o);var scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors$4);const k$2=ramp$1(scheme$n);var scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors$4);const j$3=ramp$1(scheme$m);var scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors$4);const z$3=ramp$1(scheme$l);var scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors$4);const A$2=ramp$1(scheme$k);var scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors$4);const E$3=ramp$1(scheme$j);var scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors$4);const O$3=ramp$1(scheme$i);var scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors$4);const le$1=ramp$1(scheme$h);var scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors$4);const ae$1=ramp$1(scheme$g);var scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors$4);const ce$1=ramp$1(scheme$f);var scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors$4);const se$1=ramp$1(scheme$e);var scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors$4);const fe$1=ramp$1(scheme$d);var scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors$4);const pe$1=ramp$1(scheme$c);var scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors$4);const de$1=ramp$1(scheme$b);var scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors$4);const me$1=ramp$1(scheme$a);var scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors$4);const ge$1=ramp$1(scheme$9);var scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors$4);const he$1=ramp$1(scheme$8);var scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors$4);const be$1=ramp$1(scheme$7);var scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors$4);const ve$1=ramp$1(scheme$6);var scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors$4);const K=ramp$1(scheme$5);var scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors$4);const L$3=ramp$1(scheme$4);var scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors$4);const N=ramp$1(scheme$3);var scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors$4);const W$3=ramp$1(scheme$2);var scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors$4);const X$2=ramp$1(scheme$1);var scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors$4);const Q$2=ramp$1(scheme);function te$1(et){return et=Math.max(0,Math.min(1,et)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-et*(35.34-et*(2381.73-et*(6402.7-et*(7024.72-et*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+et*(170.73+et*(52.82-et*(131.46-et*(176.58-et*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+et*(442.36-et*(2482.43-et*(6167.24-et*(6614.94-et*2475.67)))))))+")"}const ue$1=cubehelixLong(cubehelix$1(300,.5,0),cubehelix$1(-240,.5,1));var warm=cubehelixLong(cubehelix$1(-100,.75,.35),cubehelix$1(80,1.5,.8)),cool=cubehelixLong(cubehelix$1(260,.75,.35),cubehelix$1(80,1.5,.8)),c$1=cubehelix$1();function ye$1(et){(et<0||et>1)&&(et-=Math.floor(et));var dt=Math.abs(et-.5);return c$1.h=360*et-100,c$1.s=1.5-1.5*dt,c$1.l=.8-.9*dt,c$1+""}var c=rgb$5(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function _e(et){var dt;return et=(.5-et)*Math.PI,c.r=255*(dt=Math.sin(et))*dt,c.g=255*(dt=Math.sin(et+pi_1_3))*dt,c.b=255*(dt=Math.sin(et+pi_2_3))*dt,c+""}function Y$2(et){return et=Math.max(0,Math.min(1,et)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+et*(1172.33-et*(10793.56-et*(33300.12-et*(38394.49-et*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+et*(557.33+et*(1225.33-et*(3574.96-et*(1073.77+et*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+et*(3211.1-et*(15327.97-et*(27814-et*(22569.18-et*6838.66)))))))+")"}function ramp(et){var dt=et.length;return function($t){return et[Math.max(0,Math.min(dt-1,Math.floor($t*dt)))]}}const Z$2=ramp(colors$4("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors$4("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors$4("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors$4("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function last$1(et){var dt=et==null?0:et.length;return dt?et[dt-1]:void 0}var last_1=last$1;const r=getDefaultExportFromCjs(last_1);var baseGet$3=_baseGet,baseSet=_baseSet,castPath$3=_castPath;function basePickBy$1(et,dt,$t){for(var kt=-1,Tt=dt.length,Dt={};++kt<Tt;){var Ft=dt[kt],Ut=baseGet$3(et,Ft);$t(Ut,Ft)&&baseSet(Dt,castPath$3(Ft,et),Ut)}return Dt}var _basePickBy=basePickBy$1;function baseHasIn$1(et,dt){return et!=null&&dt in Object(et)}var _baseHasIn=baseHasIn$1,castPath$2=_castPath,isArguments$1=isArguments_1,isArray$7=isArray_1,isIndex=_isIndex,isLength=isLength_1,toKey$3=_toKey;function hasPath$1(et,dt,$t){dt=castPath$2(dt,et);for(var kt=-1,Tt=dt.length,Dt=!1;++kt<Tt;){var Ft=toKey$3(dt[kt]);if(!(Dt=et!=null&&$t(et,Ft)))break;et=et[Ft]}return Dt||++kt!=Tt?Dt:(Tt=et==null?0:et.length,!!Tt&&isLength(Tt)&&isIndex(Ft,Tt)&&(isArray$7(et)||isArguments$1(et)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$2(et,dt){return et!=null&&hasPath(et,dt,baseHasIn)}var hasIn_1=hasIn$2,basePickBy=_basePickBy,hasIn$1=hasIn_1;function basePick$1(et,dt){return basePickBy(et,dt,function($t,kt){return hasIn$1(et,kt)})}var _basePick=basePick$1;function arrayPush$3(et,dt){for(var $t=-1,kt=dt.length,Tt=et.length;++$t<kt;)et[Tt+$t]=dt[$t];return et}var _arrayPush=arrayPush$3,Symbol$3=_Symbol,isArguments=isArguments_1,isArray$6=isArray_1,spreadableSymbol=Symbol$3?Symbol$3.isConcatSpreadable:void 0;function isFlattenable$1(et){return isArray$6(et)||isArguments(et)||!!(spreadableSymbol&&et&&et[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush$2=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$2(et,dt,$t,kt,Tt){var Dt=-1,Ft=et.length;for($t||($t=isFlattenable),Tt||(Tt=[]);++Dt<Ft;){var Ut=et[Dt];dt>0&&$t(Ut)?dt>1?baseFlatten$2(Ut,dt-1,$t,kt,Tt):arrayPush$2(Tt,Ut):kt||(Tt[Tt.length]=Ut)}return Tt}var _baseFlatten=baseFlatten$2,baseFlatten$1=_baseFlatten;function flatten$1(et){var dt=et==null?0:et.length;return dt?baseFlatten$1(et,1):[]}var flatten_1=flatten$1,flatten=flatten_1,overRest=_overRest,setToString=_setToString;function flatRest$2(et){return setToString(overRest(et,void 0,flatten),et+"")}var _flatRest=flatRest$2,basePick=_basePick,flatRest$1=_flatRest,pick=flatRest$1(function(et,dt){return et==null?{}:basePick(et,dt)}),pick_1=pick;const Ir=getDefaultExportFromCjs(pick_1);function arraySome$1(et,dt){for(var $t=-1,kt=et==null?0:et.length;++$t<kt;)if(dt(et[$t],$t,et))return!0;return!1}var _arraySome=arraySome$1,SetCache$1=_SetCache,arraySome=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(et,dt,$t,kt,Tt,Dt){var Ft=$t&COMPARE_PARTIAL_FLAG$5,Ut=et.length,Ht=dt.length;if(Ut!=Ht&&!(Ft&&Ht>Ut))return!1;var Kt=Dt.get(et),Yt=Dt.get(dt);if(Kt&&Yt)return Kt==dt&&Yt==et;var Jt=-1,Zt=!0,er=$t&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(Dt.set(et,dt),Dt.set(dt,et);++Jt<Ut;){var rr=et[Jt],sr=dt[Jt];if(kt)var nr=Ft?kt(sr,rr,Jt,dt,et,Dt):kt(rr,sr,Jt,et,dt,Dt);if(nr!==void 0){if(nr)continue;Zt=!1;break}if(er){if(!arraySome(dt,function(ir,or){if(!cacheHas$1(er,or)&&(rr===ir||Tt(rr,ir,$t,kt,Dt)))return er.push(or)})){Zt=!1;break}}else if(!(rr===sr||Tt(rr,sr,$t,kt,Dt))){Zt=!1;break}}return Dt.delete(et),Dt.delete(dt),Zt}var _equalArrays=equalArrays$2;function mapToArray$1(et){var dt=-1,$t=Array(et.size);return et.forEach(function(kt,Tt){$t[++dt]=[Tt,kt]}),$t}var _mapToArray=mapToArray$1;function setToArray$3(et){var dt=-1,$t=Array(et.size);return et.forEach(function(kt){$t[++dt]=kt}),$t}var _setToArray=setToArray$3,Symbol$2=_Symbol,Uint8Array$1=_Uint8Array,eq=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",mapTag$4="[object Map]",numberTag$3="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function equalByTag$1(et,dt,$t,kt,Tt,Dt,Ft){switch($t){case dataViewTag$3:if(et.byteLength!=dt.byteLength||et.byteOffset!=dt.byteOffset)return!1;et=et.buffer,dt=dt.buffer;case arrayBufferTag$2:return!(et.byteLength!=dt.byteLength||!Dt(new Uint8Array$1(et),new Uint8Array$1(dt)));case boolTag$2:case dateTag$2:case numberTag$3:return eq(+et,+dt);case errorTag$1:return et.name==dt.name&&et.message==dt.message;case regexpTag$2:case stringTag$2:return et==dt+"";case mapTag$4:var Ut=mapToArray;case setTag$4:var Ht=kt&COMPARE_PARTIAL_FLAG$4;if(Ut||(Ut=setToArray$2),et.size!=dt.size&&!Ht)return!1;var Kt=Ft.get(et);if(Kt)return Kt==dt;kt|=COMPARE_UNORDERED_FLAG$2,Ft.set(et,dt);var Yt=equalArrays$1(Ut(et),Ut(dt),kt,Tt,Dt,Ft);return Ft.delete(et),Yt;case symbolTag$2:if(symbolValueOf$1)return symbolValueOf$1.call(et)==symbolValueOf$1.call(dt)}return!1}var _equalByTag=equalByTag$1,arrayPush$1=_arrayPush,isArray$5=isArray_1;function baseGetAllKeys$2(et,dt,$t){var kt=dt(et);return isArray$5(et)?kt:arrayPush$1(kt,$t(et))}var _baseGetAllKeys=baseGetAllKeys$2;function arrayFilter$2(et,dt){for(var $t=-1,kt=et==null?0:et.length,Tt=0,Dt=[];++$t<kt;){var Ft=et[$t];dt(Ft,$t,et)&&(Dt[Tt++]=Ft)}return Dt}var _arrayFilter=arrayFilter$2;function stubArray$2(){return[]}var stubArray_1=stubArray$2,arrayFilter$1=_arrayFilter,stubArray$1=stubArray_1,objectProto$4=Object.prototype,propertyIsEnumerable=objectProto$4.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1?function(et){return et==null?[]:(et=Object(et),arrayFilter$1(nativeGetSymbols$1(et),function(dt){return propertyIsEnumerable.call(et,dt)}))}:stubArray$1,_getSymbols=getSymbols$3,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseKeys$1(et){if(!isPrototype(et))return nativeKeys(et);var dt=[];for(var $t in Object(et))hasOwnProperty$3.call(et,$t)&&$t!="constructor"&&dt.push($t);return dt}var _baseKeys=baseKeys$1,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$2=isArrayLike_1;function keys$5(et){return isArrayLike$2(et)?arrayLikeKeys(et):baseKeys(et)}var keys_1=keys$5,baseGetAllKeys$1=_baseGetAllKeys,getSymbols$2=_getSymbols,keys$4=keys_1;function getAllKeys$2(et){return baseGetAllKeys$1(et,keys$4,getSymbols$2)}var _getAllKeys=getAllKeys$2,getAllKeys$1=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function equalObjects$1(et,dt,$t,kt,Tt,Dt){var Ft=$t&COMPARE_PARTIAL_FLAG$3,Ut=getAllKeys$1(et),Ht=Ut.length,Kt=getAllKeys$1(dt),Yt=Kt.length;if(Ht!=Yt&&!Ft)return!1;for(var Jt=Ht;Jt--;){var Zt=Ut[Jt];if(!(Ft?Zt in dt:hasOwnProperty$2.call(dt,Zt)))return!1}var er=Dt.get(et),rr=Dt.get(dt);if(er&&rr)return er==dt&&rr==et;var sr=!0;Dt.set(et,dt),Dt.set(dt,et);for(var nr=Ft;++Jt<Ht;){Zt=Ut[Jt];var ir=et[Zt],or=dt[Zt];if(kt)var lr=Ft?kt(or,ir,Zt,dt,et,Dt):kt(ir,or,Zt,et,dt,Dt);if(!(lr===void 0?ir===or||Tt(ir,or,$t,kt,Dt):lr)){sr=!1;break}nr||(nr=Zt=="constructor")}if(sr&&!nr){var cr=et.constructor,dr=dt.constructor;cr!=dr&&"constructor"in et&&"constructor"in dt&&!(typeof cr=="function"&&cr instanceof cr&&typeof dr=="function"&&dr instanceof dr)&&(sr=!1)}return Dt.delete(et),Dt.delete(dt),sr}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$4=_root,DataView$2=getNative$3(root$4,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$3=_root,Promise$2=getNative$2(root$3,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$2=_root,Set$3=getNative$1(root$2,"Set"),_Set=Set$3,getNative=_getNative,root$1=_root,WeakMap$2=getNative(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$1=_baseGetTag,toSource=_toSource,mapTag$3="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$4=baseGetTag$1;(DataView$1&&getTag$4(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag$4(new Map$1)!=mapTag$3||Promise$1&&getTag$4(Promise$1.resolve())!=promiseTag||Set$2&&getTag$4(new Set$2)!=setTag$3||WeakMap$1&&getTag$4(new WeakMap$1)!=weakMapTag$1)&&(getTag$4=function(et){var dt=baseGetTag$1(et),$t=dt==objectTag$2?et.constructor:void 0,kt=$t?toSource($t):"";if(kt)switch(kt){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return dt});var _getTag=getTag$4,Stack$2=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$3=_getTag,isArray$4=isArray_1,isBuffer$1=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",objectTag$1="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseIsEqualDeep$1(et,dt,$t,kt,Tt,Dt){var Ft=isArray$4(et),Ut=isArray$4(dt),Ht=Ft?arrayTag$1:getTag$3(et),Kt=Ut?arrayTag$1:getTag$3(dt);Ht=Ht==argsTag$1?objectTag$1:Ht,Kt=Kt==argsTag$1?objectTag$1:Kt;var Yt=Ht==objectTag$1,Jt=Kt==objectTag$1,Zt=Ht==Kt;if(Zt&&isBuffer$1(et)){if(!isBuffer$1(dt))return!1;Ft=!0,Yt=!1}if(Zt&&!Yt)return Dt||(Dt=new Stack$2),Ft||isTypedArray(et)?equalArrays(et,dt,$t,kt,Tt,Dt):equalByTag(et,dt,Ht,$t,kt,Tt,Dt);if(!($t&COMPARE_PARTIAL_FLAG$2)){var er=Yt&&hasOwnProperty$1.call(et,"__wrapped__"),rr=Jt&&hasOwnProperty$1.call(dt,"__wrapped__");if(er||rr){var sr=er?et.value():et,nr=rr?dt.value():dt;return Dt||(Dt=new Stack$2),Tt(sr,nr,$t,kt,Dt)}}return Zt?(Dt||(Dt=new Stack$2),equalObjects(et,dt,$t,kt,Tt,Dt)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$3=isObjectLike_1;function baseIsEqual$3(et,dt,$t,kt,Tt){return et===dt?!0:et==null||dt==null||!isObjectLike$3(et)&&!isObjectLike$3(dt)?et!==et&&dt!==dt:baseIsEqualDeep(et,dt,$t,kt,baseIsEqual$3,Tt)}var _baseIsEqual=baseIsEqual$3,baseIsEqual$2=_baseIsEqual;function isEqual$4(et,dt){return baseIsEqual$2(et,dt)}var isEqual_1=isEqual$4;const Ar=getDefaultExportFromCjs(isEqual_1);var Sr=reactExports.createContext(),qr=function(et){var dt=et.children,$t=et.animate,kt=$t===void 0||$t,Tt=et.config,Dt=Tt===void 0?"default":Tt,Ft=reactExports.useMemo(function(){var Ut=_$3(Dt)?config$3[Dt]:Dt;return{animate:kt,config:Ut}},[kt,Dt]);return jsxRuntimeExports.jsx(Sr.Provider,{value:Ft,children:dt})},Dr=function(){return reactExports.useContext(Sr)},Er=function(et){var dt=et.children,$t=et.condition,kt=et.wrapper;return $t?reactExports.cloneElement(kt,{},dt):dt},Ur={position:"relative"},Fr=function(et){var dt=et.children,$t=et.theme,kt=et.renderWrapper,Tt=kt===void 0||kt,Dt=et.isInteractive,Ft=Dt===void 0||Dt,Ut=et.animate,Ht=et.motionConfig,Kt=reactExports.useRef(null);return jsxRuntimeExports.jsx(z$5,{theme:$t,children:jsxRuntimeExports.jsx(qr,{animate:Ut,config:Ht,children:jsxRuntimeExports.jsx(W$5,{container:Kt,children:jsxRuntimeExports.jsxs(Er,{condition:Tt,wrapper:jsxRuntimeExports.jsx("div",{style:Ur,ref:Kt}),children:[dt,Ft&&jsxRuntimeExports.jsx(M$2,{})]})})})})},Kr=function(et,dt){return et.width===dt.width&&et.height===dt.height},Nr=function(et){var dt=et.children,$t=et.width,kt=et.height,Tt=et.onResize,Dt=et.debounceResize,Ft=a$3({width:$t,height:kt},Dt,{equalityFn:Kr})[0];return reactExports.useEffect(function(){Tt==null||Tt(Ft)},[Ft,Tt]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:dt(Ft)})},$r=function(et){var dt=et.children,$t=et.defaultWidth,kt=et.defaultHeight,Tt=et.onResize,Dt=et.debounceResize,Ft=Dt===void 0?0:Dt;return jsxRuntimeExports.jsx(AutoSizer,{defaultWidth:$t,defaultHeight:kt,children:function(Ut){var Ht=Ut.width,Kt=Ut.height;return jsxRuntimeExports.jsx(Nr,{width:Ht,height:Kt,onResize:Tt,debounceResize:Ft,children:dt})}})};function Jr(et,dt){(dt==null||dt>et.length)&&(dt=et.length);for(var $t=0,kt=Array(dt);$t<dt;$t++)kt[$t]=et[$t];return kt}function Qr(et,dt){var $t=typeof Symbol<"u"&&et[Symbol.iterator]||et["@@iterator"];if($t)return($t=$t.call(et)).next.bind($t);if(Array.isArray(et)||($t=function(Tt,Dt){if(Tt){if(typeof Tt=="string")return Jr(Tt,Dt);var Ft={}.toString.call(Tt).slice(8,-1);return Ft==="Object"&&Tt.constructor&&(Ft=Tt.constructor.name),Ft==="Map"||Ft==="Set"?Array.from(Tt):Ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ft)?Jr(Tt,Dt):void 0}}(et))||dt&&et&&typeof et.length=="number"){$t&&(et=$t);var kt=0;return function(){return kt>=et.length?{done:!0}:{done:!1,value:et[kt++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vr(){return Vr=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},Vr.apply(null,arguments)}function Zr(et,dt){if(et==null)return{};var $t={};for(var kt in et)if({}.hasOwnProperty.call(et,kt)){if(dt.indexOf(kt)!==-1)continue;$t[kt]=et[kt]}return $t}var rt=["id","colors"],tt=function(et){var dt=et.id,$t=et.colors,kt=Zr(et,rt);return jsxRuntimeExports.jsx("linearGradient",Vr({id:dt,x1:0,x2:0,y1:0,y2:1},kt,{children:$t.map(function(Tt){var Dt=Tt.offset,Ft=Tt.color,Ut=Tt.opacity;return jsxRuntimeExports.jsx("stop",{offset:Dt+"%",stopColor:Ft,stopOpacity:Ut!==void 0?Ut:1},Dt)})}))},ot={linearGradient:tt},it={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1},at=reactExports.memo(function(et){var dt=et.id,$t=et.background,kt=$t===void 0?it.background:$t,Tt=et.color,Dt=Tt===void 0?it.color:Tt,Ft=et.size,Ut=Ft===void 0?it.size:Ft,Ht=et.padding,Kt=Ht===void 0?it.padding:Ht,Yt=et.stagger,Jt=Yt===void 0?it.stagger:Yt,Zt=Ut+Kt,er=Ut/2,rr=Kt/2;return Jt===!0&&(Zt=2*Ut+2*Kt),jsxRuntimeExports.jsxs("pattern",{id:dt,width:Zt,height:Zt,patternUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("rect",{width:Zt,height:Zt,fill:kt}),jsxRuntimeExports.jsx("circle",{cx:rr+er,cy:rr+er,r:er,fill:Dt}),Jt&&jsxRuntimeExports.jsx("circle",{cx:1.5*Kt+Ut+er,cy:1.5*Kt+Ut+er,r:er,fill:Dt})]})}),ut=function(et){return et*Math.PI/180},ct=function(et){return 180*et/Math.PI},ft=function(et,dt){return{x:Math.cos(et)*dt,y:Math.sin(et)*dt}},ht=function(et){var dt=et%360;return dt<0&&(dt+=360),dt},gt={svg:{align:{left:"start",center:"middle",right:"end",start:"start",middle:"middle",end:"end"},baseline:{top:"text-before-edge",center:"central",bottom:"alphabetic"}},canvas:{align:{left:"left",center:"center",right:"right",start:"left",middle:"center",end:"right"},baseline:{top:"top",center:"middle",bottom:"bottom"}}},mt={spacing:5,rotation:0,background:"#000000",color:"#ffffff",lineWidth:2},vt=reactExports.memo(function(et){var dt=et.id,$t=et.spacing,kt=$t===void 0?mt.spacing:$t,Tt=et.rotation,Dt=Tt===void 0?mt.rotation:Tt,Ft=et.background,Ut=Ft===void 0?mt.background:Ft,Ht=et.color,Kt=Ht===void 0?mt.color:Ht,Yt=et.lineWidth,Jt=Yt===void 0?mt.lineWidth:Yt,Zt=Math.round(Dt)%360,er=Math.abs(kt);Zt>180?Zt-=360:Zt>90?Zt-=180:Zt<-180?Zt+=360:Zt<-90&&(Zt+=180);var rr,sr=er,nr=er;return Zt===0?rr=`
                M 0 0 L `+sr+` 0
                M 0 `+nr+" L "+sr+" "+nr+`
            `:Zt===90?rr=`
                M 0 0 L 0 `+nr+`
                M `+sr+" 0 L "+sr+" "+nr+`
            `:(sr=Math.abs(er/Math.sin(ut(Zt))),nr=er/Math.sin(ut(90-Zt)),rr=Zt>0?`
                    M 0 `+-nr+" L "+2*sr+" "+nr+`
                    M `+-sr+" "+-nr+" L "+sr+" "+nr+`
                    M `+-sr+" 0 L "+sr+" "+2*nr+`
                `:`
                    M `+-sr+" "+nr+" L "+sr+" "+-nr+`
                    M `+-sr+" "+2*nr+" L "+2*sr+" "+-nr+`
                    M 0 `+2*nr+" L "+2*sr+` 0
                `),jsxRuntimeExports.jsxs("pattern",{id:dt,width:sr,height:nr,patternUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("rect",{width:sr,height:nr,fill:Ut,stroke:"rgba(255, 0, 0, 0.1)",strokeWidth:0}),jsxRuntimeExports.jsx("path",{d:rr,strokeWidth:Jt,stroke:Kt,strokeLinecap:"square"})]})}),_t={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1},wt=reactExports.memo(function(et){var dt=et.id,$t=et.color,kt=$t===void 0?_t.color:$t,Tt=et.background,Dt=Tt===void 0?_t.background:Tt,Ft=et.size,Ut=Ft===void 0?_t.size:Ft,Ht=et.padding,Kt=Ht===void 0?_t.padding:Ht,Yt=et.stagger,Jt=Yt===void 0?_t.stagger:Yt,Zt=Ut+Kt,er=Kt/2;return Jt===!0&&(Zt=2*Ut+2*Kt),jsxRuntimeExports.jsxs("pattern",{id:dt,width:Zt,height:Zt,patternUnits:"userSpaceOnUse",children:[jsxRuntimeExports.jsx("rect",{width:Zt,height:Zt,fill:Dt}),jsxRuntimeExports.jsx("rect",{x:er,y:er,width:Ut,height:Ut,fill:kt}),Jt&&jsxRuntimeExports.jsx("rect",{x:1.5*Kt+Ut,y:1.5*Kt+Ut,width:Ut,height:Ut,fill:kt})]})}),xt={patternDots:at,patternLines:vt,patternSquares:wt},Ot=["type"],zt=Vr({},ot,xt),Mt=reactExports.memo(function(et){var dt=et.defs;return!dt||dt.length<1?null:jsxRuntimeExports.jsx("defs",{"aria-hidden":!0,children:dt.map(function($t){var kt=$t.type,Tt=Zr($t,Ot);return zt[kt]?reactExports.createElement(zt[kt],Vr({key:Tt.id},Tt)):null})})}),Rt=reactExports.forwardRef(function(et,dt){var $t=et.width,kt=et.height,Tt=et.margin,Dt=et.defs,Ft=et.children,Ut=et.role,Ht=et.ariaLabel,Kt=et.ariaLabelledBy,Yt=et.ariaDescribedBy,Jt=et.isFocusable,Zt=M$3();return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:$t,height:kt,role:Ut,"aria-label":Ht,"aria-labelledby":Kt,"aria-describedby":Yt,focusable:Jt,tabIndex:Jt?0:void 0,ref:dt,children:[jsxRuntimeExports.jsx(Mt,{defs:Dt}),jsxRuntimeExports.jsx("rect",{width:$t,height:kt,fill:Zt.background}),jsxRuntimeExports.jsx("g",{transform:"translate("+Tt.left+","+Tt.top+")",children:Ft})]})}),jt=reactExports.memo(function(et){var dt=et.size,$t=et.color,kt=et.borderWidth,Tt=et.borderColor;return jsxRuntimeExports.jsx("circle",{r:dt/2,fill:$t,stroke:Tt,strokeWidth:kt,style:{pointerEvents:"none"}})});reactExports.memo(function(et){var dt=et.x,$t=et.y,kt=et.symbol,Tt=kt===void 0?jt:kt,Dt=et.size,Ft=et.datum,Ut=et.color,Ht=et.borderWidth,Kt=et.borderColor,Yt=et.label,Jt=et.labelTextAnchor,Zt=Jt===void 0?"middle":Jt,er=et.labelYOffset,rr=er===void 0?-12:er,sr=et.ariaLabel,nr=et.ariaLabelledBy,ir=et.ariaDescribedBy,or=et.ariaHidden,lr=et.ariaDisabled,cr=et.isFocusable,dr=cr!==void 0&&cr,ur=et.tabIndex,pr=ur===void 0?0:ur,mr=et.onFocus,jr=et.onBlur,Rr=et.testId,xr=M$3(),kr=Dr(),Mr=kr.animate,Tr=kr.config,Or=useSpring$2({transform:"translate("+dt+", "+$t+")",config:Tr,immediate:!Mr}),_r=reactExports.useCallback(function(br){mr==null||mr(Ft,br)},[mr,Ft]),Pr=reactExports.useCallback(function(br){jr==null||jr(Ft,br)},[jr,Ft]);return jsxRuntimeExports.jsxs(animated$4.g,{transform:Or.transform,style:{pointerEvents:"none"},focusable:dr,tabIndex:dr?pr:void 0,"aria-label":sr,"aria-labelledby":nr,"aria-describedby":ir,"aria-disabled":lr,"aria-hidden":or,onFocus:dr&&mr?_r:void 0,onBlur:dr&&jr?Pr:void 0,"data-testid":Rr,children:[reactExports.createElement(Tt,{size:Dt,color:Ut,datum:Ft,borderWidth:Ht,borderColor:Kt}),Yt&&jsxRuntimeExports.jsx("text",{textAnchor:Zt,y:rr,style:b$5(xr.dots.text),children:Yt})]})});var Bt=reactExports.memo(function(et){var dt=et.width,$t=et.height,kt=et.axis,Tt=et.scale,Dt=et.value,Ft=et.lineStyle,Ut=et.textStyle,Ht=et.legend,Kt=et.legendNode,Yt=et.legendPosition,Jt=Yt===void 0?"top-right":Yt,Zt=et.legendOffsetX,er=Zt===void 0?14:Zt,rr=et.legendOffsetY,sr=rr===void 0?14:rr,nr=et.legendOrientation,ir=nr===void 0?"horizontal":nr,or=M$3(),lr=0,cr=0,dr=0,ur=0;if(kt==="y"?(dr=Tt(Dt),cr=dt):(lr=Tt(Dt),ur=$t),Ht&&!Kt){var pr=function(mr){var jr=mr.axis,Rr=mr.width,xr=mr.height,kr=mr.position,Mr=mr.offsetX,Tr=mr.offsetY,Or=mr.orientation,_r=0,Pr=0,br=Or==="vertical"?-90:0,wr="start";if(jr==="x")switch(kr){case"top-left":_r=-Mr,Pr=Tr,wr="end";break;case"top":Pr=-Tr,wr=Or==="horizontal"?"middle":"start";break;case"top-right":_r=Mr,Pr=Tr,wr=Or==="horizontal"?"start":"end";break;case"right":_r=Mr,Pr=xr/2,wr=Or==="horizontal"?"start":"middle";break;case"bottom-right":_r=Mr,Pr=xr-Tr,wr="start";break;case"bottom":Pr=xr+Tr,wr=Or==="horizontal"?"middle":"end";break;case"bottom-left":Pr=xr-Tr,_r=-Mr,wr=Or==="horizontal"?"end":"start";break;case"left":_r=-Mr,Pr=xr/2,wr=Or==="horizontal"?"end":"middle"}else switch(kr){case"top-left":_r=Mr,Pr=-Tr,wr="start";break;case"top":_r=Rr/2,Pr=-Tr,wr=Or==="horizontal"?"middle":"start";break;case"top-right":_r=Rr-Mr,Pr=-Tr,wr=Or==="horizontal"?"end":"start";break;case"right":_r=Rr+Mr,wr=Or==="horizontal"?"start":"middle";break;case"bottom-right":_r=Rr-Mr,Pr=Tr,wr="end";break;case"bottom":_r=Rr/2,Pr=Tr,wr=Or==="horizontal"?"middle":"end";break;case"bottom-left":_r=Mr,Pr=Tr,wr=Or==="horizontal"?"start":"end";break;case"left":_r=-Mr,wr=Or==="horizontal"?"end":"middle"}return{x:_r,y:Pr,rotation:br,textAnchor:wr}}({axis:kt,width:dt,height:$t,position:Jt,offsetX:er,offsetY:sr,orientation:ir});Kt=jsxRuntimeExports.jsx("text",{transform:"translate("+pr.x+", "+pr.y+") rotate("+pr.rotation+")",textAnchor:pr.textAnchor,dominantBaseline:"central",style:Ut,children:Ht})}return jsxRuntimeExports.jsxs("g",{transform:"translate("+lr+", "+dr+")",children:[jsxRuntimeExports.jsx("line",{x1:0,x2:cr,y1:0,y2:ur,stroke:or.markers.lineColor,strokeWidth:or.markers.lineStrokeWidth,style:Ft}),Kt]})}),Pt=reactExports.memo(function(et){var dt=et.markers,$t=et.width,kt=et.height,Tt=et.xScale,Dt=et.yScale;return dt&&dt.length!==0?dt.map(function(Ft,Ut){return jsxRuntimeExports.jsx(Bt,Vr({},Ft,{width:$t,height:kt,scale:Ft.axis==="y"?Dt:Tt}),Ut)}):null}),It=function(et){var dt=Dr(),$t=dt.animate,kt=dt.config,Tt=function(Ut){var Ht=reactExports.useRef();return reactExports.useEffect(function(){Ht.current=Ut},[Ut]),Ht.current}(et),Dt=reactExports.useMemo(function(){return B$2(Tt,et)},[Tt,et]),Ft=useSpring$2({from:{value:0},to:{value:1},reset:!0,config:kt,immediate:!$t}).value;return to$5(Ft,Dt)};reactExports.createContext(void 0);var Lt={basis:W$4,basisClosed:G$1,basisOpen:I$2,bundle:A$3,cardinal:L$4,cardinalClosed:S$2,cardinalOpen:Y$3,catmullRom:q$3,catmullRomClosed:D$2,catmullRomOpen:E$4,linear:U$1,linearClosed:F,monotoneX,monotoneY,natural:X$3,step:K$1,stepAfter,stepBefore},St=Object.keys(Lt);St.filter(function(et){return et.endsWith("Closed")});P$2(St,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");P$2(St,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");r(scheme$q),r(scheme$p),r(scheme$o),r(scheme$n),r(scheme$m),r(scheme$l),r(scheme$k),r(scheme$j),r(scheme$i),r(scheme$5),r(scheme$4),r(scheme$3),r(scheme),r(scheme$2),r(scheme$1),r(scheme$h),r(scheme$g),r(scheme$f),r(scheme$e),r(scheme$d),r(scheme$c),r(scheme$b),r(scheme$a),r(scheme$9),r(scheme$8),r(scheme$7),r(scheme$6);r(scheme$q),r(scheme$p),r(scheme$o),r(scheme$n),r(scheme$m),r(scheme$l),r(scheme$k),r(scheme$j),r(scheme$i),r(scheme$5),r(scheme$4),r(scheme$3),r(scheme),r(scheme$2),r(scheme$1),r(scheme$h),r(scheme$g),r(scheme$f),r(scheme$e),r(scheme$d),r(scheme$c),r(scheme$b),r(scheme$a),r(scheme$9),r(scheme$8),r(scheme$7),r(scheme$6);ordinal(a$2);var un$1={top:0,right:0,bottom:0,left:0},cn$1=function(et,dt,$t){return $t===void 0&&($t={}),reactExports.useMemo(function(){var kt=Vr({},un$1,$t);return{margin:kt,innerWidth:et-kt.left-kt.right,innerHeight:dt-kt.top-kt.bottom,outerWidth:et,outerHeight:dt}},[et,dt,$t])},sn$1=function(){var et=reactExports.useRef(null),dt=reactExports.useState({left:0,top:0,width:0,height:0}),$t=dt[0],kt=dt[1],Tt=reactExports.useState(function(){return typeof ResizeObserver>"u"?null:new ResizeObserver(function(Dt){var Ft=Dt[0];return kt(Ft.contentRect)})})[0];return reactExports.useEffect(function(){return et.current&&Tt!==null&&Tt.observe(et.current),function(){Tt!==null&&Tt.disconnect()}},[Tt]),[et,$t]},fn=function(et){return typeof et=="function"?et:typeof et=="string"?et.indexOf("time:")===0?timeFormat(et.slice("5")):format(et):function(dt){return""+dt}},hn=function(et){return reactExports.useMemo(function(){return fn(et)},[et])},gn=function(et){return Cr(et)?et:function(dt){return ke$1(dt,et)}},bn=function(et){return reactExports.useMemo(function(){return gn(et)},[et])},wn$1=function(et,dt,$t,kt,Tt,Dt){return et<=Tt&&Tt<=et+$t&&dt<=Dt&&Dt<=dt+kt},kn=function(et,dt){var $t,kt="touches"in dt?dt.touches[0]:dt,Tt=kt.clientX,Dt=kt.clientY,Ft=et.getBoundingClientRect(),Ut=($t=et.getBBox!==void 0?et.getBBox():{width:et.offsetWidth||0,height:et.offsetHeight||0}).width===Ft.width?1:$t.width/Ft.width;return[(Tt-Ft.left)*Ut,(Dt-Ft.top)*Ut]},xn=Object.keys(ot),On=Object.keys(xt),zn=function(et,dt,$t){if(et==="*")return!0;if(Cr(et))return et(dt);if(je(et)){var kt=$t?ke$1(dt,$t):dt;return Ar(Ir(kt,Object.keys(et)),et)}return!1},Mn$1=function(et,dt,$t,kt){var Tt=kt===void 0?{}:kt,Dt=Tt.dataKey,Ft=Tt.colorKey,Ut=Ft===void 0?"color":Ft,Ht=Tt.targetKey,Kt=Ht===void 0?"fill":Ht,Yt=[],Jt={};return et.length&&dt.length&&(Yt=[].concat(et),dt.forEach(function(Zt){for(var er,rr=function(){var nr=er.value,ir=nr.id,or=nr.match;if(zn(or,Zt,Dt)){var lr=et.find(function(xr){return xr.id===ir});if(lr){if(On.includes(lr.type))if(lr.background==="inherit"||lr.color==="inherit"){var cr=ke$1(Zt,Ut),dr=lr.background,ur=lr.color,pr=ir;lr.background==="inherit"&&(pr=pr+".bg."+cr,dr=cr),lr.color==="inherit"&&(pr=pr+".fg."+cr,ur=cr),Lr(Zt,Kt,"url(#"+pr+")"),Jt[pr]||(Yt.push(Vr({},lr,{id:pr,background:dr,color:ur})),Jt[pr]=1)}else Lr(Zt,Kt,"url(#"+ir+")");else if(xn.includes(lr.type))if(lr.colors.map(function(xr){return xr.color}).includes("inherit")){var mr=ke$1(Zt,Ut),jr=ir,Rr=Vr({},lr,{colors:lr.colors.map(function(xr,kr){return xr.color!=="inherit"?xr:(jr=jr+"."+kr+"."+mr,Vr({},xr,{color:xr.color==="inherit"?mr:xr.color}))})});Rr.id=jr,Lr(Zt,Kt,"url(#"+jr+")"),Jt[jr]||(Yt.push(Rr),Jt[jr]=1)}else Lr(Zt,Kt,"url(#"+ir+")")}return 1}},sr=Qr($t);!(er=sr()).done&&!rr(););})),Yt};function Rn(){for(var et=arguments.length,dt=new Array(et),$t=0;$t<et;$t++)dt[$t]=arguments[$t];return function(kt){for(var Tt=0,Dt=dt;Tt<Dt.length;Tt++){var Ft=Dt[Tt];typeof Ft=="function"?Ft(kt):Ft!=null&&(Ft.current=kt)}}}var updateQueue$3=makeQueue$3(),raf$3=et=>schedule$3(et,updateQueue$3),writeQueue$3=makeQueue$3();raf$3.write=et=>schedule$3(et,writeQueue$3);var onStartQueue$3=makeQueue$3();raf$3.onStart=et=>schedule$3(et,onStartQueue$3);var onFrameQueue$3=makeQueue$3();raf$3.onFrame=et=>schedule$3(et,onFrameQueue$3);var onFinishQueue$3=makeQueue$3();raf$3.onFinish=et=>schedule$3(et,onFinishQueue$3);var timeouts$3=[];raf$3.setTimeout=(et,dt)=>{const $t=raf$3.now()+dt,kt=()=>{const Dt=timeouts$3.findIndex(Ft=>Ft.cancel==kt);~Dt&&timeouts$3.splice(Dt,1),pendingCount$3-=~Dt?1:0},Tt={time:$t,handler:et,cancel:kt};return timeouts$3.splice(findTimeout$3($t),0,Tt),pendingCount$3+=1,start$3(),Tt};var findTimeout$3=et=>~(~timeouts$3.findIndex(dt=>dt.time>et)||~timeouts$3.length);raf$3.cancel=et=>{onStartQueue$3.delete(et),onFrameQueue$3.delete(et),onFinishQueue$3.delete(et),updateQueue$3.delete(et),writeQueue$3.delete(et)};raf$3.sync=et=>{sync$3=!0,raf$3.batchedUpdates(et),sync$3=!1};raf$3.throttle=et=>{let dt;function $t(){try{et(...dt)}finally{dt=null}}function kt(...Tt){dt=Tt,raf$3.onStart($t)}return kt.handler=et,kt.cancel=()=>{onStartQueue$3.delete($t),dt=null},kt};var nativeRaf$3=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$3.use=et=>nativeRaf$3=et;raf$3.now=typeof performance<"u"?()=>performance.now():Date.now;raf$3.batchedUpdates=et=>et();raf$3.catch=console.error;raf$3.frameLoop="always";raf$3.advance=()=>{raf$3.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$3()};var ts$3=-1,pendingCount$3=0,sync$3=!1;function schedule$3(et,dt){sync$3?(dt.delete(et),et(0)):(dt.add(et),start$3())}function start$3(){ts$3<0&&(ts$3=0,raf$3.frameLoop!=="demand"&&nativeRaf$3(loop$3))}function stop$3(){ts$3=-1}function loop$3(){~ts$3&&(nativeRaf$3(loop$3),raf$3.batchedUpdates(update$3))}function update$3(){const et=ts$3;ts$3=raf$3.now();const dt=findTimeout$3(ts$3);if(dt&&(eachSafely$3(timeouts$3.splice(0,dt),$t=>$t.handler()),pendingCount$3-=dt),!pendingCount$3){stop$3();return}onStartQueue$3.flush(),updateQueue$3.flush(et?Math.min(64,ts$3-et):16.667),onFrameQueue$3.flush(),writeQueue$3.flush(),onFinishQueue$3.flush()}function makeQueue$3(){let et=new Set,dt=et;return{add($t){pendingCount$3+=dt==et&&!et.has($t)?1:0,et.add($t)},delete($t){return pendingCount$3-=dt==et&&et.has($t)?1:0,et.delete($t)},flush($t){dt.size&&(et=new Set,pendingCount$3-=dt.size,eachSafely$3(dt,kt=>kt($t)&&et.add(kt)),pendingCount$3+=et.size,dt=et)}}}function eachSafely$3(et,dt){et.forEach($t=>{try{dt($t)}catch(kt){raf$3.catch(kt)}})}var __defProp$3=Object.defineProperty,__export$3=(et,dt)=>{for(var $t in dt)__defProp$3(et,$t,{get:dt[$t],enumerable:!0})},globals_exports$3={};__export$3(globals_exports$3,{assign:()=>assign$3,colors:()=>colors$3,createStringInterpolator:()=>createStringInterpolator$3,skipAnimation:()=>skipAnimation$3,to:()=>to$4,willAdvance:()=>willAdvance$3});function noop$5(){}var defineHidden$3=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),is$3={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$3(et,dt){if(is$3.arr(et)){if(!is$3.arr(dt)||et.length!==dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(et[$t]!==dt[$t])return!1;return!0}return et===dt}var each$3=(et,dt)=>et.forEach(dt);function eachProp$3(et,dt,$t){if(is$3.arr(et)){for(let kt=0;kt<et.length;kt++)dt.call($t,et[kt],`${kt}`);return}for(const kt in et)et.hasOwnProperty(kt)&&dt.call($t,et[kt],kt)}var toArray$3=et=>is$3.und(et)?[]:is$3.arr(et)?et:[et],isSSR$3=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$3,to$4,colors$3=null,skipAnimation$3=!1,willAdvance$3=noop$5,assign$3=et=>{et.to&&(to$4=et.to),et.now&&(raf$3.now=et.now),et.colors!==void 0&&(colors$3=et.colors),et.skipAnimation!=null&&(skipAnimation$3=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$3=et.createStringInterpolator),et.requestAnimationFrame&&raf$3.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$3.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$3=et.willAdvance),et.frameLoop&&(raf$3.frameLoop=et.frameLoop)},startQueue$3=new Set,currentFrame$3=[],prevFrame$3=[],priority$3=0,frameLoop$3={get idle(){return!startQueue$3.size&&!currentFrame$3.length},start(et){priority$3>et.priority?(startQueue$3.add(et),raf$3.onStart(flushStartQueue$3)):(startSafely$3(et),raf$3(advance$3))},advance:advance$3,sort(et){if(priority$3)raf$3.onFrame(()=>frameLoop$3.sort(et));else{const dt=currentFrame$3.indexOf(et);~dt&&(currentFrame$3.splice(dt,1),startUnsafely$3(et))}},clear(){currentFrame$3=[],startQueue$3.clear()}};function flushStartQueue$3(){startQueue$3.forEach(startSafely$3),startQueue$3.clear(),raf$3(advance$3)}function startSafely$3(et){currentFrame$3.includes(et)||startUnsafely$3(et)}function startUnsafely$3(et){currentFrame$3.splice(findIndex$3(currentFrame$3,dt=>dt.priority>et.priority),0,et)}function advance$3(et){const dt=prevFrame$3;for(let $t=0;$t<currentFrame$3.length;$t++){const kt=currentFrame$3[$t];priority$3=kt.priority,kt.idle||(willAdvance$3(kt),kt.advance(et),kt.idle||dt.push(kt))}return priority$3=0,prevFrame$3=currentFrame$3,prevFrame$3.length=0,currentFrame$3=dt,currentFrame$3.length>0}function findIndex$3(et,dt){const $t=et.findIndex(dt);return $t<0?et.length:$t}var colors2$3={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$3="[-+]?\\d*\\.?\\d+",PERCENTAGE$3=NUMBER$3+"%";function call$3(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$3=new RegExp("rgb"+call$3(NUMBER$3,NUMBER$3,NUMBER$3)),rgba$3=new RegExp("rgba"+call$3(NUMBER$3,NUMBER$3,NUMBER$3,NUMBER$3)),hsl$3=new RegExp("hsl"+call$3(NUMBER$3,PERCENTAGE$3,PERCENTAGE$3)),hsla$3=new RegExp("hsla"+call$3(NUMBER$3,PERCENTAGE$3,PERCENTAGE$3,NUMBER$3)),hex3$3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$3=/^#([0-9a-fA-F]{6})$/,hex8$3=/^#([0-9a-fA-F]{8})$/;function normalizeColor$3(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$3.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$3&&colors$3[et]!==void 0?colors$3[et]:(dt=rgb$3.exec(et))?(parse255$3(dt[1])<<24|parse255$3(dt[2])<<16|parse255$3(dt[3])<<8|255)>>>0:(dt=rgba$3.exec(et))?(parse255$3(dt[1])<<24|parse255$3(dt[2])<<16|parse255$3(dt[3])<<8|parse1$3(dt[4]))>>>0:(dt=hex3$3.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$3.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$3.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$3.exec(et))?(hslToRgb$3(parse360$3(dt[1]),parsePercentage$3(dt[2]),parsePercentage$3(dt[3]))|255)>>>0:(dt=hsla$3.exec(et))?(hslToRgb$3(parse360$3(dt[1]),parsePercentage$3(dt[2]),parsePercentage$3(dt[3]))|parse1$3(dt[4]))>>>0:null}function hue2rgb$3(et,dt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?et+(dt-et)*6*$t:$t<1/2?dt:$t<2/3?et+(dt-et)*(2/3-$t)*6:et}function hslToRgb$3(et,dt,$t){const kt=$t<.5?$t*(1+dt):$t+dt-$t*dt,Tt=2*$t-kt,Dt=hue2rgb$3(Tt,kt,et+1/3),Ft=hue2rgb$3(Tt,kt,et),Ut=hue2rgb$3(Tt,kt,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$3(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$3(et){return(parseFloat(et)%360+360)%360/360}function parse1$3(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$3(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$3(et){let dt=normalizeColor$3(et);if(dt===null)return et;dt=dt||0;const $t=(dt&4278190080)>>>24,kt=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${$t}, ${kt}, ${Tt}, ${Dt})`}var createInterpolator$3=(et,dt,$t)=>{if(is$3.fun(et))return et;if(is$3.arr(et))return createInterpolator$3({range:et,output:dt,extrapolate:$t});if(is$3.str(et.output[0]))return createStringInterpolator$3(et);const kt=et,Tt=kt.output,Dt=kt.range||[0,1],Ft=kt.extrapolateLeft||kt.extrapolate||"extend",Ut=kt.extrapolateRight||kt.extrapolate||"extend",Ht=kt.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$3(Kt,Dt);return interpolate$3(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,kt.map)}};function interpolate$3(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>$t){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=$t)}return kt===Tt?kt:dt===$t?et<=dt?kt:Tt:(dt===-1/0?Kt=-Kt:$t===1/0?Kt=Kt-dt:Kt=(Kt-dt)/($t-dt),Kt=Dt(Kt),kt===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+kt:Kt=Kt*(Tt-kt)+kt,Kt)}function findRange$3(et,dt){for(var $t=1;$t<dt.length-1&&!(dt[$t]>=et);++$t);return $t-1}var $get$3=Symbol.for("FluidValue.get"),$observers$3=Symbol.for("FluidValue.observers"),hasFluidValue$3=et=>!!(et&&et[$get$3]),getFluidValue$3=et=>et&&et[$get$3]?et[$get$3]():et;function callFluidObserver$3(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$3(et,dt){const $t=et[$observers$3];$t&&$t.forEach(kt=>{callFluidObserver$3(kt,dt)})}var FluidValue$3=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$3(this,dt)}},setFluidGetter$3=(et,dt)=>setHidden$3(et,$get$3,dt);function addFluidObserver$3(et,dt){if(et[$get$3]){let $t=et[$observers$3];$t||setHidden$3(et,$observers$3,$t=new Set),$t.has(dt)||($t.add(dt),et.observerAdded&&et.observerAdded($t.size,dt))}return dt}function removeFluidObserver$3(et,dt){const $t=et[$observers$3];if($t&&$t.has(dt)){const kt=$t.size-1;kt?$t.delete(dt):et[$observers$3]=null,et.observerRemoved&&et.observerRemoved(kt,dt)}}var setHidden$3=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),numberRegex$3=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$3=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$3=new RegExp(`(${numberRegex$3.source})(%|[a-z]+)`,"i"),rgbaRegex$3=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$3=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$3=et=>{const[dt,$t]=parseCSSVariable$3(et);if(!dt||isSSR$3())return et;const kt=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if(kt)return kt.trim();if($t&&$t.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue($t);return Tt||et}else{if($t&&cssVariableRegex$3.test($t))return variableToRgba$3($t);if($t)return $t}return et},parseCSSVariable$3=et=>{const dt=cssVariableRegex$3.exec(et);if(!dt)return[,];const[,$t,kt]=dt;return[$t,kt]},namedColorRegex$3,rgbaRound$3=(et,dt,$t,kt,Tt)=>`rgba(${Math.round(dt)}, ${Math.round($t)}, ${Math.round(kt)}, ${Tt})`,createStringInterpolator2$3=et=>{namedColorRegex$3||(namedColorRegex$3=colors$3?new RegExp(`(${Object.keys(colors$3).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$3(Dt).replace(cssVariableRegex$3,variableToRgba$3).replace(colorRegex$3,colorToRgba$3).replace(namedColorRegex$3,colorToRgba$3)),$t=dt.map(Dt=>Dt.match(numberRegex$3).map(Number)),Tt=$t[0].map((Dt,Ft)=>$t.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$3({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$3.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$3.test(Kt)))==null?void 0:Ht.replace(numberRegex$3,""));let Ut=0;return dt[0].replace(numberRegex$3,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$3,rgbaRound$3)}},prefix$3="react-spring: ",once$3=et=>{const dt=et;let $t=!1;if(typeof dt!="function")throw new TypeError(`${prefix$3}once requires a function parameter`);return(...kt)=>{$t||(dt(...kt),$t=!0)}},warnInterpolate$3=once$3(console.warn);function deprecateInterpolate$3(){warnInterpolate$3(`${prefix$3}The "interpolate" function is deprecated in v9 (use "to" instead)`)}once$3(console.warn);function isAnimatedString$3(et){return is$3.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$3()&&cssVariableRegex$3.test(et)||et in(colors$3||{}))}var useIsomorphicLayoutEffect$3=isSSR$3()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$3=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$3(){const et=reactExports.useState()[1],dt=useIsMounted$3();return()=>{dt.current&&et(Math.random())}}var useOnce$3=et=>reactExports.useEffect(et,emptyDeps$3),emptyDeps$3=[],$node$3=Symbol.for("Animated:node"),isAnimated$3=et=>!!et&&et[$node$3]===et,getAnimated$3=et=>et&&et[$node$3],setAnimated$3=(et,dt)=>defineHidden$3(et,$node$3,dt),getPayload$3=et=>et&&et[$node$3]&&et[$node$3].getPayload(),Animated$3=class{constructor(){setAnimated$3(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$3=class K_ extends Animated$3{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$3.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new K_(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,$t){return is$3.num(dt)&&(this.lastPosition=dt,$t&&(dt=Math.round(dt/$t)*$t,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$3.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$3=class Y_ extends AnimatedValue$3{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$3({output:[dt,dt]})}static create(dt){return new Y_(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$3.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$3({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$3={dependencies:null},AnimatedObject$3=class extends Animated$3{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const $t={};return eachProp$3(this.source,(kt,Tt)=>{isAnimated$3(kt)?$t[Tt]=kt.getValue(dt):hasFluidValue$3(kt)?$t[Tt]=getFluidValue$3(kt):dt||($t[Tt]=kt)}),$t}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$3(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const $t=new Set;return eachProp$3(dt,this._addToPayload,$t),Array.from($t)}}_addToPayload(dt){TreeContext$3.dependencies&&hasFluidValue$3(dt)&&TreeContext$3.dependencies.add(dt);const $t=getPayload$3(dt);$t&&each$3($t,kt=>this.add(kt))}},AnimatedArray$3=class X_ extends AnimatedObject$3{constructor(dt){super(dt)}static create(dt){return new X_(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const $t=this.getPayload();return dt.length==$t.length?$t.map((kt,Tt)=>kt.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$3)),!0)}};function makeAnimated$3(et){return(isAnimatedString$3(et)?AnimatedString$3:AnimatedValue$3).create(et)}function getAnimatedType$3(et){const dt=getAnimated$3(et);return dt?dt.constructor:is$3.arr(et)?AnimatedArray$3:isAnimatedString$3(et)?AnimatedString$3:AnimatedValue$3}var withAnimated$3=(et,dt)=>{const $t=!is$3.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef((kt,Tt)=>{const Dt=reactExports.useRef(null),Ft=$t&&reactExports.useCallback(rr=>{Dt.current=updateRef$3(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$3(kt,dt),Kt=useForceUpdate$3(),Yt=()=>{const rr=Dt.current;if($t&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$3(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$3(()=>(Zt.current=Jt,each$3(Ht,rr=>addFluidObserver$3(rr,Jt)),()=>{Zt.current&&(each$3(Zt.current.deps,rr=>removeFluidObserver$3(rr,Zt.current)),raf$3.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$3(()=>()=>{const rr=Zt.current;each$3(rr.deps,sr=>removeFluidObserver$3(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$3=class{constructor(dt,$t){this.update=dt,this.deps=$t}eventObserved(dt){dt.type=="change"&&raf$3.write(this.update)}};function getAnimatedState$3(et,dt){const $t=new Set;return TreeContext$3.dependencies=$t,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$3(et),TreeContext$3.dependencies=null,[et,$t]}function updateRef$3(et,dt){return et&&(is$3.fun(et)?et(dt):et.current=dt),dt}var cacheKey$3=Symbol.for("AnimatedComponent"),createHost$3=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:$t=Tt=>new AnimatedObject$3(Tt),getComponentProps:kt=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:$t,getComponentProps:kt},Dt=Ft=>{const Ut=getDisplayName$3(Ft)||"Anonymous";return is$3.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$3(Ft,Tt)):Ft=Ft[cacheKey$3]||(Ft[cacheKey$3]=withAnimated$3(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$3(et,(Ft,Ut)=>{is$3.arr(et)&&(Ut=getDisplayName$3(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$3=et=>is$3.str(et)?et:et&&is$3.str(et.displayName)?et.displayName:is$3.fun(et)&&et.name||null,isFrameValue$3=et=>et instanceof FrameValue$3,nextId$3=1,FrameValue$3=class extends FluidValue$3{constructor(){super(...arguments),this.id=nextId$3++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$3(this);return dt&&dt.getValue()}to(...dt){return globals_exports$3.to(this,dt)}interpolate(...dt){return deprecateInterpolate$3(),globals_exports$3.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,$t=!1){callFluidObservers$3(this,{type:"change",parent:this,value:dt,idle:$t})}_onPriorityChange(dt){this.idle||frameLoop$3.sort(this),callFluidObservers$3(this,{type:"priority",parent:this,priority:dt})}};reactExports.createContext({pause:!1,immediate:!1});var Interpolation$3=class extends FrameValue$3{constructor(dt,$t){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$3(...$t);const kt=this._get(),Tt=getAnimatedType$3(kt);setAnimated$3(this,Tt.create(kt))}advance(dt){const $t=this._get(),kt=this.get();isEqual$3($t,kt)||(getAnimated$3(this).setValue($t),this._onChange($t,this.idle)),!this.idle&&checkIdle$3(this._active)&&becomeIdle$3(this)}_get(){const dt=is$3.arr(this.source)?this.source.map(getFluidValue$3):toArray$3(getFluidValue$3(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$3(this._active)&&(this.idle=!1,each$3(getPayload$3(this),dt=>{dt.done=!1}),globals_exports$3.skipAnimation?(raf$3.batchedUpdates(()=>this.advance()),becomeIdle$3(this)):frameLoop$3.start(this))}_attach(){let dt=1;each$3(toArray$3(this.source),$t=>{hasFluidValue$3($t)&&addFluidObserver$3($t,this),isFrameValue$3($t)&&($t.idle||this._active.add($t),dt=Math.max(dt,$t.priority+1))}),this.priority=dt,this._start()}_detach(){each$3(toArray$3(this.source),dt=>{hasFluidValue$3(dt)&&removeFluidObserver$3(dt,this)}),this._active.clear(),becomeIdle$3(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$3(this.source).reduce(($t,kt)=>Math.max($t,(isFrameValue$3(kt)?kt.priority:0)+1),0))}};function isIdle$3(et){return et.idle!==!1}function checkIdle$3(et){return!et.size||Array.from(et).every(isIdle$3)}function becomeIdle$3(et){et.idle||(et.idle=!0,each$3(getPayload$3(et),dt=>{dt.done=!0}),callFluidObservers$3(et,{type:"idle",parent:et}))}globals_exports$3.assign({createStringInterpolator:createStringInterpolator2$3,to:(et,dt)=>new Interpolation$3(et,dt)});var isCustomPropRE$3=/^--/;function dangerousStyleValue$3(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$3.test(et)&&!(isUnitlessNumber$3.hasOwnProperty(et)&&isUnitlessNumber$3[et])?dt+"px":(""+dt).trim()}var attributeCache$3={};function applyAnimatedValues$3(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const $t=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:kt,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>$t||et.hasAttribute(Zt)?Zt:attributeCache$3[Zt]||(attributeCache$3[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$3(Zt,Tt[Zt]);isCustomPropRE$3.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),kt!==void 0&&(et.className=kt),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$3={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$3=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$3=["Webkit","Ms","Moz","O"];isUnitlessNumber$3=Object.keys(isUnitlessNumber$3).reduce((et,dt)=>(prefixes$3.forEach($t=>et[prefixKey$3($t,dt)]=et[dt]),et),isUnitlessNumber$3);var domTransforms$3=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$3=/^(translate)/,degTransforms$3=/^(rotate|skew)/,addUnit$3=(et,dt)=>is$3.num(et)&&et!==0?et+dt:et,isValueIdentity$3=(et,dt)=>is$3.arr(et)?et.every($t=>isValueIdentity$3($t,dt)):is$3.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$3=class extends AnimatedObject$3{constructor({x:dt,y:$t,z:kt,...Tt}){const Dt=[],Ft=[];(dt||$t||kt)&&(Dt.push([dt||0,$t||0,kt||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$3(Ht,"px")).join(",")})`,isValueIdentity$3(Ut,0)])),eachProp$3(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$3.test(Ht)){if(delete Tt[Ht],is$3.und(Ut))return;const Kt=pxTransforms$3.test(Ht)?"px":degTransforms$3.test(Ht)?"deg":"";Dt.push(toArray$3(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$3(er,Kt)})`,isValueIdentity$3(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$3(Jt,Kt)).join(",")})`,isValueIdentity$3(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$3(Dt,Ft)),super(Tt)}},FluidTransform$3=class extends FluidValue$3{constructor(dt,$t){super(),this.inputs=dt,this.transforms=$t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",$t=!0;return each$3(this.inputs,(kt,Tt)=>{const Dt=getFluidValue$3(kt[0]),[Ft,Ut]=this.transforms[Tt](is$3.arr(Dt)?Dt:kt.map(getFluidValue$3));dt+=" "+Ft,$t=$t&&Ut}),$t?"none":dt}observerAdded(dt){dt==1&&each$3(this.inputs,$t=>each$3($t,kt=>hasFluidValue$3(kt)&&addFluidObserver$3(kt,this)))}observerRemoved(dt){dt==0&&each$3(this.inputs,$t=>each$3($t,kt=>hasFluidValue$3(kt)&&removeFluidObserver$3(kt,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$3(this,dt)}},primitives$3=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$3.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$3,colors:colors2$3});var host$3=createHost$3(primitives$3,{applyAnimatedValues:applyAnimatedValues$3,createAnimatedStyle:et=>new AnimatedStyle$3(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...$t})=>$t}),animated$3=host$3.animated,a$1=function(et,dt){et.font=(dt.fontWeight?dt.fontWeight+" ":"")+dt.fontSize+"px "+dt.fontFamily},d=function(et,dt,$t,kt,Tt){kt===void 0&&(kt=0),Tt===void 0&&(Tt=0),dt.outlineWidth>0&&(et.strokeStyle=dt.outlineColor,et.lineWidth=2*dt.outlineWidth,et.lineJoin="round",et.strokeText($t,kt,Tt)),et.fillStyle=dt.fill,et.fillText($t,kt,Tt)};function p$1(){return p$1=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},p$1.apply(null,arguments)}function s(et,dt){if(et==null)return{};var $t={};for(var kt in et)if({}.hasOwnProperty.call(et,kt)){if(dt.indexOf(kt)!==-1)continue;$t[kt]=et[kt]}return $t}var h=["style","children"],m=["outlineWidth","outlineColor","outlineOpacity"],b$2=function(et){var dt=et.style,$t=et.children,kt=s(et,h),Tt=dt.outlineWidth,Dt=dt.outlineColor,Ft=dt.outlineOpacity,Ut=s(dt,m);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Tt>0&&jsxRuntimeExports.jsx(animated$3.text,p$1({},kt,{style:p$1({},Ut,{strokeWidth:2*Tt,stroke:Dt,strokeOpacity:Ft,strokeLinejoin:"round"}),children:$t})),jsxRuntimeExports.jsx(animated$3.text,p$1({},kt,{style:Ut,children:$t}))]})},updateQueue$2=makeQueue$2(),raf$2=et=>schedule$2(et,updateQueue$2),writeQueue$2=makeQueue$2();raf$2.write=et=>schedule$2(et,writeQueue$2);var onStartQueue$2=makeQueue$2();raf$2.onStart=et=>schedule$2(et,onStartQueue$2);var onFrameQueue$2=makeQueue$2();raf$2.onFrame=et=>schedule$2(et,onFrameQueue$2);var onFinishQueue$2=makeQueue$2();raf$2.onFinish=et=>schedule$2(et,onFinishQueue$2);var timeouts$2=[];raf$2.setTimeout=(et,dt)=>{const $t=raf$2.now()+dt,kt=()=>{const Dt=timeouts$2.findIndex(Ft=>Ft.cancel==kt);~Dt&&timeouts$2.splice(Dt,1),pendingCount$2-=~Dt?1:0},Tt={time:$t,handler:et,cancel:kt};return timeouts$2.splice(findTimeout$2($t),0,Tt),pendingCount$2+=1,start$2(),Tt};var findTimeout$2=et=>~(~timeouts$2.findIndex(dt=>dt.time>et)||~timeouts$2.length);raf$2.cancel=et=>{onStartQueue$2.delete(et),onFrameQueue$2.delete(et),onFinishQueue$2.delete(et),updateQueue$2.delete(et),writeQueue$2.delete(et)};raf$2.sync=et=>{sync$2=!0,raf$2.batchedUpdates(et),sync$2=!1};raf$2.throttle=et=>{let dt;function $t(){try{et(...dt)}finally{dt=null}}function kt(...Tt){dt=Tt,raf$2.onStart($t)}return kt.handler=et,kt.cancel=()=>{onStartQueue$2.delete($t),dt=null},kt};var nativeRaf$2=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$2.use=et=>nativeRaf$2=et;raf$2.now=typeof performance<"u"?()=>performance.now():Date.now;raf$2.batchedUpdates=et=>et();raf$2.catch=console.error;raf$2.frameLoop="always";raf$2.advance=()=>{raf$2.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$2()};var ts$2=-1,pendingCount$2=0,sync$2=!1;function schedule$2(et,dt){sync$2?(dt.delete(et),et(0)):(dt.add(et),start$2())}function start$2(){ts$2<0&&(ts$2=0,raf$2.frameLoop!=="demand"&&nativeRaf$2(loop$2))}function stop$2(){ts$2=-1}function loop$2(){~ts$2&&(nativeRaf$2(loop$2),raf$2.batchedUpdates(update$2))}function update$2(){const et=ts$2;ts$2=raf$2.now();const dt=findTimeout$2(ts$2);if(dt&&(eachSafely$2(timeouts$2.splice(0,dt),$t=>$t.handler()),pendingCount$2-=dt),!pendingCount$2){stop$2();return}onStartQueue$2.flush(),updateQueue$2.flush(et?Math.min(64,ts$2-et):16.667),onFrameQueue$2.flush(),writeQueue$2.flush(),onFinishQueue$2.flush()}function makeQueue$2(){let et=new Set,dt=et;return{add($t){pendingCount$2+=dt==et&&!et.has($t)?1:0,et.add($t)},delete($t){return pendingCount$2-=dt==et&&et.has($t)?1:0,et.delete($t)},flush($t){dt.size&&(et=new Set,pendingCount$2-=dt.size,eachSafely$2(dt,kt=>kt($t)&&et.add(kt)),pendingCount$2+=et.size,dt=et)}}}function eachSafely$2(et,dt){et.forEach($t=>{try{dt($t)}catch(kt){raf$2.catch(kt)}})}var __defProp$2=Object.defineProperty,__export$2=(et,dt)=>{for(var $t in dt)__defProp$2(et,$t,{get:dt[$t],enumerable:!0})},globals_exports$2={};__export$2(globals_exports$2,{assign:()=>assign$2,colors:()=>colors$2,createStringInterpolator:()=>createStringInterpolator$2,skipAnimation:()=>skipAnimation$2,to:()=>to$3,willAdvance:()=>willAdvance$2});function noop$4(){}var defineHidden$2=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),is$2={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$2(et,dt){if(is$2.arr(et)){if(!is$2.arr(dt)||et.length!==dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(et[$t]!==dt[$t])return!1;return!0}return et===dt}var each$2=(et,dt)=>et.forEach(dt);function eachProp$2(et,dt,$t){if(is$2.arr(et)){for(let kt=0;kt<et.length;kt++)dt.call($t,et[kt],`${kt}`);return}for(const kt in et)et.hasOwnProperty(kt)&&dt.call($t,et[kt],kt)}var toArray$2=et=>is$2.und(et)?[]:is$2.arr(et)?et:[et];function flush$2(et,dt){if(et.size){const $t=Array.from(et);et.clear(),each$2($t,dt)}}var flushCalls$2=(et,...dt)=>flush$2(et,$t=>$t(...dt)),isSSR$2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$2,to$3,colors$2=null,skipAnimation$2=!1,willAdvance$2=noop$4,assign$2=et=>{et.to&&(to$3=et.to),et.now&&(raf$2.now=et.now),et.colors!==void 0&&(colors$2=et.colors),et.skipAnimation!=null&&(skipAnimation$2=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$2=et.createStringInterpolator),et.requestAnimationFrame&&raf$2.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$2.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$2=et.willAdvance),et.frameLoop&&(raf$2.frameLoop=et.frameLoop)},startQueue$2=new Set,currentFrame$2=[],prevFrame$2=[],priority$2=0,frameLoop$2={get idle(){return!startQueue$2.size&&!currentFrame$2.length},start(et){priority$2>et.priority?(startQueue$2.add(et),raf$2.onStart(flushStartQueue$2)):(startSafely$2(et),raf$2(advance$2))},advance:advance$2,sort(et){if(priority$2)raf$2.onFrame(()=>frameLoop$2.sort(et));else{const dt=currentFrame$2.indexOf(et);~dt&&(currentFrame$2.splice(dt,1),startUnsafely$2(et))}},clear(){currentFrame$2=[],startQueue$2.clear()}};function flushStartQueue$2(){startQueue$2.forEach(startSafely$2),startQueue$2.clear(),raf$2(advance$2)}function startSafely$2(et){currentFrame$2.includes(et)||startUnsafely$2(et)}function startUnsafely$2(et){currentFrame$2.splice(findIndex$2(currentFrame$2,dt=>dt.priority>et.priority),0,et)}function advance$2(et){const dt=prevFrame$2;for(let $t=0;$t<currentFrame$2.length;$t++){const kt=currentFrame$2[$t];priority$2=kt.priority,kt.idle||(willAdvance$2(kt),kt.advance(et),kt.idle||dt.push(kt))}return priority$2=0,prevFrame$2=currentFrame$2,prevFrame$2.length=0,currentFrame$2=dt,currentFrame$2.length>0}function findIndex$2(et,dt){const $t=et.findIndex(dt);return $t<0?et.length:$t}var clamp$2=(et,dt,$t)=>Math.min(Math.max($t,et),dt),colors2$2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$2="[-+]?\\d*\\.?\\d+",PERCENTAGE$2=NUMBER$2+"%";function call$2(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$2=new RegExp("rgb"+call$2(NUMBER$2,NUMBER$2,NUMBER$2)),rgba$2=new RegExp("rgba"+call$2(NUMBER$2,NUMBER$2,NUMBER$2,NUMBER$2)),hsl$2=new RegExp("hsl"+call$2(NUMBER$2,PERCENTAGE$2,PERCENTAGE$2)),hsla$2=new RegExp("hsla"+call$2(NUMBER$2,PERCENTAGE$2,PERCENTAGE$2,NUMBER$2)),hex3$2=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$2=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$2=/^#([0-9a-fA-F]{6})$/,hex8$2=/^#([0-9a-fA-F]{8})$/;function normalizeColor$2(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$2.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$2&&colors$2[et]!==void 0?colors$2[et]:(dt=rgb$2.exec(et))?(parse255$2(dt[1])<<24|parse255$2(dt[2])<<16|parse255$2(dt[3])<<8|255)>>>0:(dt=rgba$2.exec(et))?(parse255$2(dt[1])<<24|parse255$2(dt[2])<<16|parse255$2(dt[3])<<8|parse1$2(dt[4]))>>>0:(dt=hex3$2.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$2.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$2.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$2.exec(et))?(hslToRgb$2(parse360$2(dt[1]),parsePercentage$2(dt[2]),parsePercentage$2(dt[3]))|255)>>>0:(dt=hsla$2.exec(et))?(hslToRgb$2(parse360$2(dt[1]),parsePercentage$2(dt[2]),parsePercentage$2(dt[3]))|parse1$2(dt[4]))>>>0:null}function hue2rgb$2(et,dt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?et+(dt-et)*6*$t:$t<1/2?dt:$t<2/3?et+(dt-et)*(2/3-$t)*6:et}function hslToRgb$2(et,dt,$t){const kt=$t<.5?$t*(1+dt):$t+dt-$t*dt,Tt=2*$t-kt,Dt=hue2rgb$2(Tt,kt,et+1/3),Ft=hue2rgb$2(Tt,kt,et),Ut=hue2rgb$2(Tt,kt,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$2(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$2(et){return(parseFloat(et)%360+360)%360/360}function parse1$2(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$2(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$2(et){let dt=normalizeColor$2(et);if(dt===null)return et;dt=dt||0;const $t=(dt&4278190080)>>>24,kt=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${$t}, ${kt}, ${Tt}, ${Dt})`}var createInterpolator$2=(et,dt,$t)=>{if(is$2.fun(et))return et;if(is$2.arr(et))return createInterpolator$2({range:et,output:dt,extrapolate:$t});if(is$2.str(et.output[0]))return createStringInterpolator$2(et);const kt=et,Tt=kt.output,Dt=kt.range||[0,1],Ft=kt.extrapolateLeft||kt.extrapolate||"extend",Ut=kt.extrapolateRight||kt.extrapolate||"extend",Ht=kt.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$2(Kt,Dt);return interpolate$2(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,kt.map)}};function interpolate$2(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>$t){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=$t)}return kt===Tt?kt:dt===$t?et<=dt?kt:Tt:(dt===-1/0?Kt=-Kt:$t===1/0?Kt=Kt-dt:Kt=(Kt-dt)/($t-dt),Kt=Dt(Kt),kt===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+kt:Kt=Kt*(Tt-kt)+kt,Kt)}function findRange$2(et,dt){for(var $t=1;$t<dt.length-1&&!(dt[$t]>=et);++$t);return $t-1}var steps$2=(et,dt="end")=>$t=>{$t=dt==="end"?Math.min($t,.999):Math.max($t,.001);const kt=$t*et,Tt=dt==="end"?Math.floor(kt):Math.ceil(kt);return clamp$2(0,1,Tt/et)},c1$2=1.70158,c2$2=c1$2*1.525,c3$2=c1$2+1,c4$2=2*Math.PI/3,c5$2=2*Math.PI/4.5,bounceOut$2=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings$2={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3$2*et*et*et-c1$2*et*et,easeOutBack:et=>1+c3$2*Math.pow(et-1,3)+c1$2*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2$2+1)*2*et-c2$2)/2:(Math.pow(2*et-2,2)*((c2$2+1)*(et*2-2)+c2$2)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4$2),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4$2)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5$2))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5$2)/2+1,easeInBounce:et=>1-bounceOut$2(1-et),easeOutBounce:bounceOut$2,easeInOutBounce:et=>et<.5?(1-bounceOut$2(1-2*et))/2:(1+bounceOut$2(2*et-1))/2,steps:steps$2},$get$2=Symbol.for("FluidValue.get"),$observers$2=Symbol.for("FluidValue.observers"),hasFluidValue$2=et=>!!(et&&et[$get$2]),getFluidValue$2=et=>et&&et[$get$2]?et[$get$2]():et,getFluidObservers$2=et=>et[$observers$2]||null;function callFluidObserver$2(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$2(et,dt){const $t=et[$observers$2];$t&&$t.forEach(kt=>{callFluidObserver$2(kt,dt)})}var FluidValue$2=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$2(this,dt)}},setFluidGetter$2=(et,dt)=>setHidden$2(et,$get$2,dt);function addFluidObserver$2(et,dt){if(et[$get$2]){let $t=et[$observers$2];$t||setHidden$2(et,$observers$2,$t=new Set),$t.has(dt)||($t.add(dt),et.observerAdded&&et.observerAdded($t.size,dt))}return dt}function removeFluidObserver$2(et,dt){const $t=et[$observers$2];if($t&&$t.has(dt)){const kt=$t.size-1;kt?$t.delete(dt):et[$observers$2]=null,et.observerRemoved&&et.observerRemoved(kt,dt)}}var setHidden$2=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),numberRegex$2=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$2=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$2=new RegExp(`(${numberRegex$2.source})(%|[a-z]+)`,"i"),rgbaRegex$2=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$2=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$2=et=>{const[dt,$t]=parseCSSVariable$2(et);if(!dt||isSSR$2())return et;const kt=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if(kt)return kt.trim();if($t&&$t.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue($t);return Tt||et}else{if($t&&cssVariableRegex$2.test($t))return variableToRgba$2($t);if($t)return $t}return et},parseCSSVariable$2=et=>{const dt=cssVariableRegex$2.exec(et);if(!dt)return[,];const[,$t,kt]=dt;return[$t,kt]},namedColorRegex$2,rgbaRound$2=(et,dt,$t,kt,Tt)=>`rgba(${Math.round(dt)}, ${Math.round($t)}, ${Math.round(kt)}, ${Tt})`,createStringInterpolator2$2=et=>{namedColorRegex$2||(namedColorRegex$2=colors$2?new RegExp(`(${Object.keys(colors$2).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$2(Dt).replace(cssVariableRegex$2,variableToRgba$2).replace(colorRegex$2,colorToRgba$2).replace(namedColorRegex$2,colorToRgba$2)),$t=dt.map(Dt=>Dt.match(numberRegex$2).map(Number)),Tt=$t[0].map((Dt,Ft)=>$t.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$2({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$2.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$2.test(Kt)))==null?void 0:Ht.replace(numberRegex$2,""));let Ut=0;return dt[0].replace(numberRegex$2,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$2,rgbaRound$2)}},prefix$2="react-spring: ",once$2=et=>{const dt=et;let $t=!1;if(typeof dt!="function")throw new TypeError(`${prefix$2}once requires a function parameter`);return(...kt)=>{$t||(dt(...kt),$t=!0)}},warnInterpolate$2=once$2(console.warn);function deprecateInterpolate$2(){warnInterpolate$2(`${prefix$2}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall$2=once$2(console.warn);function deprecateDirectCall$2(){warnDirectCall$2(`${prefix$2}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString$2(et){return is$2.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$2()&&cssVariableRegex$2.test(et)||et in(colors$2||{}))}var useIsomorphicLayoutEffect$2=isSSR$2()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$2=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$2(){const et=reactExports.useState()[1],dt=useIsMounted$2();return()=>{dt.current&&et(Math.random())}}var useOnce$2=et=>reactExports.useEffect(et,emptyDeps$2),emptyDeps$2=[];function usePrev$2(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node$2=Symbol.for("Animated:node"),isAnimated$2=et=>!!et&&et[$node$2]===et,getAnimated$2=et=>et&&et[$node$2],setAnimated$2=(et,dt)=>defineHidden$2(et,$node$2,dt),getPayload$2=et=>et&&et[$node$2]&&et[$node$2].getPayload(),Animated$2=class{constructor(){setAnimated$2(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$2=class Q_ extends Animated$2{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$2.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new Q_(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,$t){return is$2.num(dt)&&(this.lastPosition=dt,$t&&(dt=Math.round(dt/$t)*$t,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$2.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$2=class J_ extends AnimatedValue$2{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$2({output:[dt,dt]})}static create(dt){return new J_(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$2.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$2({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$2={dependencies:null},AnimatedObject$2=class extends Animated$2{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const $t={};return eachProp$2(this.source,(kt,Tt)=>{isAnimated$2(kt)?$t[Tt]=kt.getValue(dt):hasFluidValue$2(kt)?$t[Tt]=getFluidValue$2(kt):dt||($t[Tt]=kt)}),$t}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$2(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const $t=new Set;return eachProp$2(dt,this._addToPayload,$t),Array.from($t)}}_addToPayload(dt){TreeContext$2.dependencies&&hasFluidValue$2(dt)&&TreeContext$2.dependencies.add(dt);const $t=getPayload$2(dt);$t&&each$2($t,kt=>this.add(kt))}},AnimatedArray$2=class Z_ extends AnimatedObject$2{constructor(dt){super(dt)}static create(dt){return new Z_(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const $t=this.getPayload();return dt.length==$t.length?$t.map((kt,Tt)=>kt.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$2)),!0)}};function makeAnimated$2(et){return(isAnimatedString$2(et)?AnimatedString$2:AnimatedValue$2).create(et)}function getAnimatedType$2(et){const dt=getAnimated$2(et);return dt?dt.constructor:is$2.arr(et)?AnimatedArray$2:isAnimatedString$2(et)?AnimatedString$2:AnimatedValue$2}var withAnimated$2=(et,dt)=>{const $t=!is$2.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef((kt,Tt)=>{const Dt=reactExports.useRef(null),Ft=$t&&reactExports.useCallback(rr=>{Dt.current=updateRef$2(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$2(kt,dt),Kt=useForceUpdate$2(),Yt=()=>{const rr=Dt.current;if($t&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$2(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$2(()=>(Zt.current=Jt,each$2(Ht,rr=>addFluidObserver$2(rr,Jt)),()=>{Zt.current&&(each$2(Zt.current.deps,rr=>removeFluidObserver$2(rr,Zt.current)),raf$2.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$2(()=>()=>{const rr=Zt.current;each$2(rr.deps,sr=>removeFluidObserver$2(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$2=class{constructor(dt,$t){this.update=dt,this.deps=$t}eventObserved(dt){dt.type=="change"&&raf$2.write(this.update)}};function getAnimatedState$2(et,dt){const $t=new Set;return TreeContext$2.dependencies=$t,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$2(et),TreeContext$2.dependencies=null,[et,$t]}function updateRef$2(et,dt){return et&&(is$2.fun(et)?et(dt):et.current=dt),dt}var cacheKey$2=Symbol.for("AnimatedComponent"),createHost$2=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:$t=Tt=>new AnimatedObject$2(Tt),getComponentProps:kt=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:$t,getComponentProps:kt},Dt=Ft=>{const Ut=getDisplayName$2(Ft)||"Anonymous";return is$2.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$2(Ft,Tt)):Ft=Ft[cacheKey$2]||(Ft[cacheKey$2]=withAnimated$2(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$2(et,(Ft,Ut)=>{is$2.arr(et)&&(Ut=getDisplayName$2(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$2=et=>is$2.str(et)?et:et&&is$2.str(et.displayName)?et.displayName:is$2.fun(et)&&et.name||null;function callProp$2(et,...dt){return is$2.fun(et)?et(...dt):et}var matchProp$2=(et,dt)=>et===!0||!!(dt&&et&&(is$2.fun(et)?et(dt):toArray$2(et).includes(dt))),resolveProp$2=(et,dt)=>is$2.obj(et)?dt&&et[dt]:et,getDefaultProp$2=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform$2=et=>et,getDefaultProps$2=(et,dt=noopTransform$2)=>{let $t=DEFAULT_PROPS$2;et.default&&et.default!==!0&&(et=et.default,$t=Object.keys(et));const kt={};for(const Tt of $t){const Dt=dt(et[Tt],Tt);is$2.und(Dt)||(kt[Tt]=Dt)}return kt},DEFAULT_PROPS$2=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$2={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps$2(et){const dt={};let $t=0;if(eachProp$2(et,(kt,Tt)=>{RESERVED_PROPS$2[Tt]||(dt[Tt]=kt,$t++)}),$t)return dt}function inferTo$2(et){const dt=getForwardProps$2(et);if(dt){const $t={to:dt};return eachProp$2(et,(kt,Tt)=>Tt in dt||($t[Tt]=kt)),$t}return{...et}}function computeGoal$2(et){return et=getFluidValue$2(et),is$2.arr(et)?et.map(computeGoal$2):isAnimatedString$2(et)?globals_exports$2.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps$2(et){for(const dt in et)return!0;return!1}function isAsyncTo$2(et){return is$2.fun(et)||is$2.arr(et)&&is$2.obj(et[0])}function detachRefs$2(et,dt){var $t;($t=et.ref)==null||$t.delete(et),dt==null||dt.delete(et)}function replaceRef$2(et,dt){var $t;dt&&et.ref!==dt&&(($t=et.ref)==null||$t.delete(et),dt.add(et),et.ref=dt)}var config$2={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults$2={...config$2.default,mass:1,damping:1,easing:easings$2.linear,clamp:!1},AnimationConfig$2=class{constructor(){this.velocity=0,Object.assign(this,defaults$2)}};function mergeConfig$2(et,dt,$t){$t&&($t={...$t},sanitizeConfig$2($t,dt),dt={...$t,...dt}),sanitizeConfig$2(et,dt),Object.assign(et,dt);for(const Ft in defaults$2)et[Ft]==null&&(et[Ft]=defaults$2[Ft]);let{frequency:kt,damping:Tt}=et;const{mass:Dt}=et;return is$2.und(kt)||(kt<.01&&(kt=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/kt,2)*Dt,et.friction=4*Math.PI*Tt*Dt/kt),et}function sanitizeConfig$2(et,dt){if(!is$2.und(dt.decay))et.duration=void 0;else{const $t=!is$2.und(dt.tension)||!is$2.und(dt.friction);($t||!is$2.und(dt.frequency)||!is$2.und(dt.damping)||!is$2.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),$t&&(et.frequency=void 0)}}var emptyArray$2=[],Animation$2=class{constructor(){this.changed=!1,this.values=emptyArray$2,this.toValues=null,this.fromValues=emptyArray$2,this.config=new AnimationConfig$2,this.immediate=!1}};function scheduleProps$2(et,{key:dt,props:$t,defaultProps:kt,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp$2($t.cancel??(kt==null?void 0:kt.cancel),dt);if(Yt)er();else{is$2.und($t.pause)||(Tt.paused=matchProp$2($t.pause,dt));let rr=kt==null?void 0:kt.pause;rr!==!0&&(rr=Tt.paused||matchProp$2(rr,dt)),Ht=callProp$2($t.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf$2.now()}function Zt(){Ht>0&&!globals_exports$2.skipAnimation?(Tt.delayed=!0,Kt=raf$2.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...$t,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult$2=(et,dt)=>dt.length==1?dt[0]:dt.some($t=>$t.cancelled)?getCancelledResult$2(et.get()):dt.every($t=>$t.noop)?getNoopResult$2(et.get()):getFinishedResult$2(et.get(),dt.every($t=>$t.finished)),getNoopResult$2=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult$2=(et,dt,$t=!1)=>({value:et,finished:dt,cancelled:$t}),getCancelledResult$2=et=>({value:et,cancelled:!0,finished:!1});function runAsync$2(et,dt,$t,kt){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=$t;return!Dt&&et===Ut&&!dt.reset?Ht:$t.promise=(async()=>{$t.asyncId=Tt,$t.asyncTo=et;const Kt=getDefaultProps$2(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=($t.cancelId||0)&&getCancelledResult$2(kt)||Tt!==$t.asyncId&&getFinishedResult$2(kt,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const or=new BailSignal$2,lr=new SkipAnimationSignal$2;return(async()=>{if(globals_exports$2.skipAnimation)throw stopAsync$2($t),lr.result=getFinishedResult$2(kt,!1),Jt(lr),lr;er(or);const cr=is$2.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp$2(Kt,(ur,pr)=>{is$2.und(cr[pr])&&(cr[pr]=ur)});const dr=await kt.start(cr);return er(or),$t.paused&&await new Promise(ur=>{$t.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports$2.skipAnimation)return stopAsync$2($t),getFinishedResult$2(kt,!1);try{let nr;is$2.arr(et)?nr=(async ir=>{for(const or of ir)await rr(or)})(et):nr=Promise.resolve(et(rr,kt.stop.bind(kt))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult$2(kt.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal$2)sr=nr.result;else if(nr instanceof SkipAnimationSignal$2)sr=nr.result;else throw nr}finally{Tt==$t.asyncId&&($t.asyncId=Dt,$t.asyncTo=Dt?Ut:void 0,$t.promise=Dt?Ht:void 0)}return is$2.fun(Ft)&&raf$2.batchedUpdates(()=>{Ft(sr,kt,kt.item)}),sr})()}function stopAsync$2(et,dt){flush$2(et.timeouts,$t=>$t.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal$2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal$2=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue$2=et=>et instanceof FrameValue$2,nextId$2=1,FrameValue$2=class extends FluidValue$2{constructor(){super(...arguments),this.id=nextId$2++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$2(this);return dt&&dt.getValue()}to(...dt){return globals_exports$2.to(this,dt)}interpolate(...dt){return deprecateInterpolate$2(),globals_exports$2.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,$t=!1){callFluidObservers$2(this,{type:"change",parent:this,value:dt,idle:$t})}_onPriorityChange(dt){this.idle||frameLoop$2.sort(this),callFluidObservers$2(this,{type:"priority",parent:this,priority:dt})}},$P$2=Symbol.for("SpringPhase"),HAS_ANIMATED$2=1,IS_ANIMATING$2=2,IS_PAUSED$2=4,hasAnimated$2=et=>(et[$P$2]&HAS_ANIMATED$2)>0,isAnimating$2=et=>(et[$P$2]&IS_ANIMATING$2)>0,isPaused$2=et=>(et[$P$2]&IS_PAUSED$2)>0,setActiveBit$2=(et,dt)=>dt?et[$P$2]|=IS_ANIMATING$2|HAS_ANIMATED$2:et[$P$2]&=~IS_ANIMATING$2,setPausedBit$2=(et,dt)=>dt?et[$P$2]|=IS_PAUSED$2:et[$P$2]&=~IS_PAUSED$2,SpringValue$2=class extends FrameValue$2{constructor(dt,$t){if(super(),this.animation=new Animation$2,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$2.und(dt)||!is$2.und($t)){const kt=is$2.obj(dt)?{...dt}:{...$t,from:dt};is$2.und(kt.default)&&(kt.default=!0),this.start(kt)}}get idle(){return!(isAnimating$2(this)||this._state.asyncTo)||isPaused$2(this)}get goal(){return getFluidValue$2(this.animation.to)}get velocity(){const dt=getAnimated$2(this);return dt instanceof AnimatedValue$2?dt.lastVelocity||0:dt.getPayload().map($t=>$t.lastVelocity||0)}get hasAnimated(){return hasAnimated$2(this)}get isAnimating(){return isAnimating$2(this)}get isPaused(){return isPaused$2(this)}get isDelayed(){return this._state.delayed}advance(dt){let $t=!0,kt=!1;const Tt=this.animation;let{toValues:Dt}=Tt;const{config:Ft}=Tt,Ut=getPayload$2(Tt.to);!Ut&&hasFluidValue$2(Tt.to)&&(Dt=toArray$2(getFluidValue$2(Tt.to))),Tt.values.forEach((Yt,Jt)=>{if(Yt.done)return;const Zt=Yt.constructor==AnimatedString$2?1:Ut?Ut[Jt].lastPosition:Dt[Jt];let er=Tt.immediate,rr=Zt;if(!er){if(rr=Yt.lastPosition,Ft.tension<=0){Yt.done=!0;return}let sr=Yt.elapsedTime+=dt;const nr=Tt.fromValues[Jt],ir=Yt.v0!=null?Yt.v0:Yt.v0=is$2.arr(Ft.velocity)?Ft.velocity[Jt]:Ft.velocity;let or;const lr=Ft.precision||(nr==Zt?.005:Math.min(1,Math.abs(Zt-nr)*.001));if(is$2.und(Ft.duration))if(Ft.decay){const cr=Ft.decay===!0?.998:Ft.decay,dr=Math.exp(-(1-cr)*sr);rr=nr+ir/(1-cr)*(1-dr),er=Math.abs(Yt.lastPosition-rr)<=lr,or=ir*dr}else{or=Yt.lastVelocity==null?ir:Yt.lastVelocity;const cr=Ft.restVelocity||lr/10,dr=Ft.clamp?0:Ft.bounce,ur=!is$2.und(dr),pr=nr==Zt?Yt.v0>0:nr<Zt;let mr,jr=!1;const Rr=1,xr=Math.ceil(dt/Rr);for(let kr=0;kr<xr&&(mr=Math.abs(or)>cr,!(!mr&&(er=Math.abs(Zt-rr)<=lr,er)));++kr){ur&&(jr=rr==Zt||rr>Zt==pr,jr&&(or=-or*dr,rr=Zt));const Mr=-Ft.tension*1e-6*(rr-Zt),Tr=-Ft.friction*.001*or,Or=(Mr+Tr)/Ft.mass;or=or+Or*Rr,rr=rr+or*Rr}}else{let cr=1;Ft.duration>0&&(this._memoizedDuration!==Ft.duration&&(this._memoizedDuration=Ft.duration,Yt.durationProgress>0&&(Yt.elapsedTime=Ft.duration*Yt.durationProgress,sr=Yt.elapsedTime+=dt)),cr=(Ft.progress||0)+sr/this._memoizedDuration,cr=cr>1?1:cr<0?0:cr,Yt.durationProgress=cr),rr=nr+Ft.easing(cr)*(Zt-nr),or=(rr-Yt.lastPosition)/dt,er=cr==1}Yt.lastVelocity=or,Number.isNaN(rr)&&(console.warn("Got NaN while animating:",this),er=!0)}Ut&&!Ut[Jt].done&&(er=!1),er?Yt.done=!0:$t=!1,Yt.setValue(rr,Ft.round)&&(kt=!0)});const Ht=getAnimated$2(this),Kt=Ht.getValue();if($t){const Yt=getFluidValue$2(Tt.to);(Kt!==Yt||kt)&&!Ft.decay?(Ht.setValue(Yt),this._onChange(Yt)):kt&&Ft.decay&&this._onChange(Kt),this._stop()}else kt&&this._onChange(Kt)}set(dt){return raf$2.batchedUpdates(()=>{this._stop(),this._focus(dt),this._set(dt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$2(this)){const{to:dt,config:$t}=this.animation;raf$2.batchedUpdates(()=>{this._onStart(),$t.decay||this._set(dt,!1),this._stop()})}return this}update(dt){return(this.queue||(this.queue=[])).push(dt),this}start(dt,$t){let kt;return is$2.und(dt)?(kt=this.queue||[],this.queue=[]):kt=[is$2.obj(dt)?dt:{...$t,to:dt}],Promise.all(kt.map(Tt=>this._update(Tt))).then(Tt=>getCombinedResult$2(this,Tt))}stop(dt){const{to:$t}=this.animation;return this._focus(this.get()),stopAsync$2(this._state,dt&&this._lastCallId),raf$2.batchedUpdates(()=>this._stop($t,dt)),this}reset(){this._update({reset:!0})}eventObserved(dt){dt.type=="change"?this._start():dt.type=="priority"&&(this.priority=dt.priority+1)}_prepareNode(dt){const $t=this.key||"";let{to:kt,from:Tt}=dt;kt=is$2.obj(kt)?kt[$t]:kt,(kt==null||isAsyncTo$2(kt))&&(kt=void 0),Tt=is$2.obj(Tt)?Tt[$t]:Tt,Tt==null&&(Tt=void 0);const Dt={to:kt,from:Tt};return hasAnimated$2(this)||(dt.reverse&&([kt,Tt]=[Tt,kt]),Tt=getFluidValue$2(Tt),is$2.und(Tt)?getAnimated$2(this)||this._set(kt):this._set(Tt)),Dt}_update({...dt},$t){const{key:kt,defaultProps:Tt}=this;dt.default&&Object.assign(Tt,getDefaultProps$2(dt,(Ut,Ht)=>/^on/.test(Ht)?resolveProp$2(Ut,kt):Ut)),mergeActiveFn$2(this,dt,"onProps"),sendEvent$2(this,"onProps",dt,this);const Dt=this._prepareNode(dt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Ft=this._state;return scheduleProps$2(++this._lastCallId,{key:kt,props:dt,defaultProps:Tt,state:Ft,actions:{pause:()=>{isPaused$2(this)||(setPausedBit$2(this,!0),flushCalls$2(Ft.pauseQueue),sendEvent$2(this,"onPause",getFinishedResult$2(this,checkFinished$2(this,this.animation.to)),this))},resume:()=>{isPaused$2(this)&&(setPausedBit$2(this,!1),isAnimating$2(this)&&this._resume(),flushCalls$2(Ft.resumeQueue),sendEvent$2(this,"onResume",getFinishedResult$2(this,checkFinished$2(this,this.animation.to)),this))},start:this._merge.bind(this,Dt)}}).then(Ut=>{if(dt.loop&&Ut.finished&&!($t&&Ut.noop)){const Ht=createLoopUpdate$2(dt);if(Ht)return this._update(Ht,!0)}return Ut})}_merge(dt,$t,kt){if($t.cancel)return this.stop(!0),kt(getCancelledResult$2(this));const Tt=!is$2.und(dt.to),Dt=!is$2.und(dt.from);if(Tt||Dt)if($t.callId>this._lastToId)this._lastToId=$t.callId;else return kt(getCancelledResult$2(this));const{key:Ft,defaultProps:Ut,animation:Ht}=this,{to:Kt,from:Yt}=Ht;let{to:Jt=Kt,from:Zt=Yt}=dt;Dt&&!Tt&&(!$t.default||is$2.und(Jt))&&(Jt=Zt),$t.reverse&&([Jt,Zt]=[Zt,Jt]);const er=!isEqual$2(Zt,Yt);er&&(Ht.from=Zt),Zt=getFluidValue$2(Zt);const rr=!isEqual$2(Jt,Kt);rr&&this._focus(Jt);const sr=isAsyncTo$2($t.to),{config:nr}=Ht,{decay:ir,velocity:or}=nr;(Tt||Dt)&&(nr.velocity=0),$t.config&&!sr&&mergeConfig$2(nr,callProp$2($t.config,Ft),$t.config!==Ut.config?callProp$2(Ut.config,Ft):void 0);let lr=getAnimated$2(this);if(!lr||is$2.und(Jt))return kt(getFinishedResult$2(this,!0));const cr=is$2.und($t.reset)?Dt&&!$t.default:!is$2.und(Zt)&&matchProp$2($t.reset,Ft),dr=cr?Zt:this.get(),ur=computeGoal$2(Jt),pr=is$2.num(ur)||is$2.arr(ur)||isAnimatedString$2(ur),mr=!sr&&(!pr||matchProp$2(Ut.immediate||$t.immediate,Ft));if(rr){const kr=getAnimatedType$2(Jt);if(kr!==lr.constructor)if(mr)lr=this._set(ur);else throw Error(`Cannot animate between ${lr.constructor.name} and ${kr.name}, as the "to" prop suggests`)}const jr=lr.constructor;let Rr=hasFluidValue$2(Jt),xr=!1;if(!Rr){const kr=cr||!hasAnimated$2(this)&&er;(rr||kr)&&(xr=isEqual$2(computeGoal$2(dr),ur),Rr=!xr),(!isEqual$2(Ht.immediate,mr)&&!mr||!isEqual$2(nr.decay,ir)||!isEqual$2(nr.velocity,or))&&(Rr=!0)}if(xr&&isAnimating$2(this)&&(Ht.changed&&!cr?Rr=!0:Rr||this._stop(Kt)),!sr&&((Rr||hasFluidValue$2(Kt))&&(Ht.values=lr.getPayload(),Ht.toValues=hasFluidValue$2(Jt)?null:jr==AnimatedString$2?[1]:toArray$2(ur)),Ht.immediate!=mr&&(Ht.immediate=mr,!mr&&!cr&&this._set(Kt)),Rr)){const{onRest:kr}=Ht;each$2(ACTIVE_EVENTS$2,Tr=>mergeActiveFn$2(this,$t,Tr));const Mr=getFinishedResult$2(this,checkFinished$2(this,Kt));flushCalls$2(this._pendingCalls,Mr),this._pendingCalls.add(kt),Ht.changed&&raf$2.batchedUpdates(()=>{var Tr;Ht.changed=!cr,kr==null||kr(Mr,this),cr?callProp$2(Ut.onRest,Mr):(Tr=Ht.onStart)==null||Tr.call(Ht,Mr,this)})}cr&&this._set(dr),sr?kt(runAsync$2($t.to,$t,this._state,this)):Rr?this._start():isAnimating$2(this)&&!rr?this._pendingCalls.add(kt):kt(getNoopResult$2(dr))}_focus(dt){const $t=this.animation;dt!==$t.to&&(getFluidObservers$2(this)&&this._detach(),$t.to=dt,getFluidObservers$2(this)&&this._attach())}_attach(){let dt=0;const{to:$t}=this.animation;hasFluidValue$2($t)&&(addFluidObserver$2($t,this),isFrameValue$2($t)&&(dt=$t.priority+1)),this.priority=dt}_detach(){const{to:dt}=this.animation;hasFluidValue$2(dt)&&removeFluidObserver$2(dt,this)}_set(dt,$t=!0){const kt=getFluidValue$2(dt);if(!is$2.und(kt)){const Tt=getAnimated$2(this);if(!Tt||!isEqual$2(kt,Tt.getValue())){const Dt=getAnimatedType$2(kt);!Tt||Tt.constructor!=Dt?setAnimated$2(this,Dt.create(kt)):Tt.setValue(kt),Tt&&raf$2.batchedUpdates(()=>{this._onChange(kt,$t)})}}return getAnimated$2(this)}_onStart(){const dt=this.animation;dt.changed||(dt.changed=!0,sendEvent$2(this,"onStart",getFinishedResult$2(this,checkFinished$2(this,dt.to)),this))}_onChange(dt,$t){$t||(this._onStart(),callProp$2(this.animation.onChange,dt,this)),callProp$2(this.defaultProps.onChange,dt,this),super._onChange(dt,$t)}_start(){const dt=this.animation;getAnimated$2(this).reset(getFluidValue$2(dt.to)),dt.immediate||(dt.fromValues=dt.values.map($t=>$t.lastPosition)),isAnimating$2(this)||(setActiveBit$2(this,!0),isPaused$2(this)||this._resume())}_resume(){globals_exports$2.skipAnimation?this.finish():frameLoop$2.start(this)}_stop(dt,$t){if(isAnimating$2(this)){setActiveBit$2(this,!1);const kt=this.animation;each$2(kt.values,Dt=>{Dt.done=!0}),kt.toValues&&(kt.onChange=kt.onPause=kt.onResume=void 0),callFluidObservers$2(this,{type:"idle",parent:this});const Tt=$t?getCancelledResult$2(this.get()):getFinishedResult$2(this.get(),checkFinished$2(this,dt??kt.to));flushCalls$2(this._pendingCalls,Tt),kt.changed&&(kt.changed=!1,sendEvent$2(this,"onRest",Tt,this))}}};function checkFinished$2(et,dt){const $t=computeGoal$2(dt),kt=computeGoal$2(et.get());return isEqual$2(kt,$t)}function createLoopUpdate$2(et,dt=et.loop,$t=et.to){const kt=callProp$2(dt);if(kt){const Tt=kt!==!0&&inferTo$2(kt),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate$2({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo$2($t)?$t:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate$2(et){const{to:dt,from:$t}=et=inferTo$2(et),kt=new Set;return is$2.obj(dt)&&findDefined$2(dt,kt),is$2.obj($t)&&findDefined$2($t,kt),et.keys=kt.size?Array.from(kt):null,et}function declareUpdate$1(et){const dt=createUpdate$2(et);return is$2.und(dt.default)&&(dt.default=getDefaultProps$2(dt)),dt}function findDefined$2(et,dt){eachProp$2(et,($t,kt)=>$t!=null&&dt.add(kt))}var ACTIVE_EVENTS$2=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn$2(et,dt,$t){et.animation[$t]=dt[$t]!==getDefaultProp$2(dt,$t)?resolveProp$2(dt[$t],et.key):void 0}function sendEvent$2(et,dt,...$t){var kt,Tt,Dt,Ft;(Tt=(kt=et.animation)[dt])==null||Tt.call(kt,...$t),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...$t)}var BATCHED_EVENTS$2=["onStart","onChange","onRest"],nextId2$2=1,Controller$2=class{constructor(dt,$t){this.id=nextId2$2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),$t&&(this._flush=$t),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){const dt={};return this.each(($t,kt)=>dt[kt]=$t.get()),dt}set(dt){for(const $t in dt){const kt=dt[$t];is$2.und(kt)||this.springs[$t].set(kt)}}update(dt){return dt&&this.queue.push(createUpdate$2(dt)),this}start(dt){let{queue:$t}=this;return dt?$t=toArray$2(dt).map(createUpdate$2):this.queue=[],this._flush?this._flush(this,$t):(prepareKeys$2(this,$t),flushUpdateQueue$2(this,$t))}stop(dt,$t){if(dt!==!!dt&&($t=dt),$t){const kt=this.springs;each$2(toArray$2($t),Tt=>kt[Tt].stop(!!dt))}else stopAsync$2(this._state,this._lastAsyncId),this.each(kt=>kt.stop(!!dt));return this}pause(dt){if(is$2.und(dt))this.start({pause:!0});else{const $t=this.springs;each$2(toArray$2(dt),kt=>$t[kt].pause())}return this}resume(dt){if(is$2.und(dt))this.start({pause:!1});else{const $t=this.springs;each$2(toArray$2(dt),kt=>$t[kt].resume())}return this}each(dt){eachProp$2(this.springs,dt)}_onFrame(){const{onStart:dt,onChange:$t,onRest:kt}=this._events,Tt=this._active.size>0,Dt=this._changed.size>0;(Tt&&!this._started||Dt&&!this._started)&&(this._started=!0,flush$2(dt,([Ht,Kt])=>{Kt.value=this.get(),Ht(Kt,this,this._item)}));const Ft=!Tt&&this._started,Ut=Dt||Ft&&kt.size?this.get():null;Dt&&$t.size&&flush$2($t,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}),Ft&&(this._started=!1,flush$2(kt,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;raf$2.onFrame(this._onFrame)}};function flushUpdateQueue$2(et,dt){return Promise.all(dt.map($t=>flushUpdate$2(et,$t))).then($t=>getCombinedResult$2(et,$t))}async function flushUpdate$2(et,dt,$t){const{keys:kt,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is$2.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is$2.arr(Tt)||is$2.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each$2(BATCHED_EVENTS$2,sr=>{const nr=dt[sr];if(is$2.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:or,cancelled:lr})=>{const cr=ir.get(nr);cr?(or||(cr.finished=!1),lr&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:or||!1,cancelled:lr||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls$2(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=(kt||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp$2(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps$2(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop$4,resume:noop$4,start(sr,nr){er?(stopAsync$2(Jt,et._lastAsyncId),nr(getCancelledResult$2(et))):(sr.onRest=Ut,nr(runAsync$2(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult$2(et,await Promise.all(Zt));if(Ft&&rr.finished&&!($t&&rr.noop)){const sr=createLoopUpdate$2(dt,Ft,Tt);if(sr)return prepareKeys$2(et,[sr]),flushUpdate$2(et,sr,!0)}return Ht&&raf$2.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings$2(et,dt){const $t={...et.springs};return dt&&each$2(toArray$2(dt),kt=>{is$2.und(kt.keys)&&(kt=createUpdate$2(kt)),is$2.obj(kt.to)||(kt={...kt,to:void 0}),prepareSprings$2($t,kt,Tt=>createSpring$2(Tt))}),setSprings$2(et,$t),$t}function setSprings$2(et,dt){eachProp$2(dt,($t,kt)=>{et.springs[kt]||(et.springs[kt]=$t,addFluidObserver$2($t,et))})}function createSpring$2(et,dt){const $t=new SpringValue$2;return $t.key=et,dt&&addFluidObserver$2($t,dt),$t}function prepareSprings$2(et,dt,$t){dt.keys&&each$2(dt.keys,kt=>{(et[kt]||(et[kt]=$t(kt)))._prepareNode(dt)})}function prepareKeys$2(et,dt){each$2(dt,$t=>{prepareSprings$2(et.springs,$t,kt=>createSpring$2(kt,et))})}var SpringContext$2=reactExports.createContext({pause:!1,immediate:!1}),SpringRef$2=()=>{const et=[],dt=function(kt){deprecateDirectCall$2();const Tt=[];return each$2(et,(Dt,Ft)=>{if(is$2.und(kt))Tt.push(Dt.start());else{const Ut=$t(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function(kt){et.includes(kt)||et.push(kt)},dt.delete=function(kt){const Tt=et.indexOf(kt);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each$2(et,kt=>kt.pause(...arguments)),this},dt.resume=function(){return each$2(et,kt=>kt.resume(...arguments)),this},dt.set=function(kt){each$2(et,(Tt,Dt)=>{const Ft=is$2.fun(kt)?kt(Dt,Tt):kt;Ft&&Tt.set(Ft)})},dt.start=function(kt){const Tt=[];return each$2(et,(Dt,Ft)=>{if(is$2.und(kt))Tt.push(Dt.start());else{const Ut=this._getProps(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each$2(et,kt=>kt.stop(...arguments)),this},dt.update=function(kt){return each$2(et,(Tt,Dt)=>Tt.update(this._getProps(kt,Tt,Dt))),this};const $t=function(kt,Tt,Dt){return is$2.fun(kt)?kt(Dt,Tt):kt};return dt._getProps=$t,dt};function useSprings$1(et,dt,$t){const kt=is$2.fun(dt)&&dt;kt&&!$t&&($t=[]);const Tt=reactExports.useMemo(()=>kt||arguments.length==3?SpringRef$2():void 0,[]),Dt=reactExports.useRef(0),Ft=useForceUpdate$2(),Ut=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(ir,or){const lr=getSprings$2(ir,or);return Dt.current>0&&!Ut.queue.length&&!Object.keys(lr).some(dr=>!ir.springs[dr])?flushUpdateQueue$2(ir,or):new Promise(dr=>{setSprings$2(ir,lr),Ut.queue.push(()=>{dr(flushUpdateQueue$2(ir,or))}),Ft()})}}),[]),Ht=reactExports.useRef([...Ut.ctrls]),Kt=reactExports.useRef([]),Yt=usePrev$2(et)||0;reactExports.useMemo(()=>{each$2(Ht.current.slice(et,Yt),ir=>{detachRefs$2(ir,Tt),ir.stop(!0)}),Ht.current.length=et,Jt(Yt,et)},[et]),reactExports.useMemo(()=>{Jt(0,Math.min(Yt,et))},$t);function Jt(ir,or){for(let lr=ir;lr<or;lr++){const cr=Ht.current[lr]||(Ht.current[lr]=new Controller$2(null,Ut.flush)),dr=kt?kt(lr,cr):dt[lr];dr&&(Kt.current[lr]=declareUpdate$1(dr))}}const Zt=Ht.current.map((ir,or)=>getSprings$2(ir,Kt.current[or])),er=reactExports.useContext(SpringContext$2),rr=usePrev$2(er),sr=er!==rr&&hasProps$2(er);useIsomorphicLayoutEffect$2(()=>{Dt.current++,Ut.ctrls=Ht.current;const{queue:ir}=Ut;ir.length&&(Ut.queue=[],each$2(ir,or=>or())),each$2(Ht.current,(or,lr)=>{Tt==null||Tt.add(or),sr&&or.start({default:er});const cr=Kt.current[lr];cr&&(replaceRef$2(or,cr.ref),or.ref?or.queue.push(cr):or.start(cr))})}),useOnce$2(()=>()=>{each$2(Ut.ctrls,ir=>ir.stop(!0))});const nr=Zt.map(ir=>({...ir}));return Tt?[nr,Tt]:nr}function useSpring$1(et,dt){const $t=is$2.fun(et),[[kt],Tt]=useSprings$1(1,$t?et:[et],$t?dt||[]:dt);return $t||arguments.length==2?[kt,Tt]:kt}function useTransition$1(et,dt,$t){const kt=is$2.fun(dt)&&dt,{reset:Tt,sort:Dt,trail:Ft=0,expires:Ut=!0,exitBeforeEnter:Ht=!1,onDestroyed:Kt,ref:Yt,config:Jt}=kt?kt():dt,Zt=reactExports.useMemo(()=>kt||arguments.length==3?SpringRef$2():void 0,[]),er=toArray$2(et),rr=[],sr=reactExports.useRef(null),nr=Tt?null:sr.current;useIsomorphicLayoutEffect$2(()=>{sr.current=rr}),useOnce$2(()=>(each$2(rr,Tr=>{Zt==null||Zt.add(Tr.ctrl),Tr.ctrl.ref=Zt}),()=>{each$2(sr.current,Tr=>{Tr.expired&&clearTimeout(Tr.expirationId),detachRefs$2(Tr.ctrl,Zt),Tr.ctrl.stop(!0)})}));const ir=getKeys$1(er,kt?kt():dt,nr),or=Tt&&sr.current||[];useIsomorphicLayoutEffect$2(()=>each$2(or,({ctrl:Tr,item:Or,key:_r})=>{detachRefs$2(Tr,Zt),callProp$2(Kt,Or,_r)}));const lr=[];if(nr&&each$2(nr,(Tr,Or)=>{Tr.expired?(clearTimeout(Tr.expirationId),or.push(Tr)):(Or=lr[Or]=ir.indexOf(Tr.key),~Or&&(rr[Or]=Tr))}),each$2(er,(Tr,Or)=>{rr[Or]||(rr[Or]={key:ir[Or],item:Tr,phase:"mount",ctrl:new Controller$2},rr[Or].ctrl.item=Tr)}),lr.length){let Tr=-1;const{leave:Or}=kt?kt():dt;each$2(lr,(_r,Pr)=>{const br=nr[Pr];~_r?(Tr=rr.indexOf(br),rr[Tr]={...br,item:er[_r]}):Or&&rr.splice(++Tr,0,br)})}is$2.fun(Dt)&&rr.sort((Tr,Or)=>Dt(Tr.item,Or.item));let cr=-Ft;const dr=useForceUpdate$2(),ur=getDefaultProps$2(dt),pr=new Map,mr=reactExports.useRef(new Map),jr=reactExports.useRef(!1);each$2(rr,(Tr,Or)=>{const _r=Tr.key,Pr=Tr.phase,br=kt?kt():dt;let wr,zr;const Hr=callProp$2(br.delay||0,_r);if(Pr=="mount")wr=br.enter,zr="enter";else{const Wr=ir.indexOf(_r)<0;if(Pr!="leave")if(Wr)wr=br.leave,zr="leave";else if(wr=br.update)zr="update";else return;else if(!Wr)wr=br.enter,zr="enter";else return}if(wr=callProp$2(wr,Tr.item,Or),wr=is$2.obj(wr)?inferTo$2(wr):{to:wr},!wr.config){const Wr=Jt||ur.config;wr.config=callProp$2(Wr,Tr.item,Or,zr)}cr+=Ft;const Yr={...ur,delay:Hr+cr,ref:Yt,immediate:br.immediate,reset:!1,...wr};if(zr=="enter"&&is$2.und(Yr.from)){const Wr=kt?kt():dt,Xr=is$2.und(Wr.initial)||nr?Wr.from:Wr.initial;Yr.from=callProp$2(Xr,Tr.item,Or)}const{onResolve:es}=Yr;Yr.onResolve=Wr=>{callProp$2(es,Wr);const Xr=sr.current,ns=Xr.find(gs=>gs.key===_r);if(ns&&!(Wr.cancelled&&ns.phase!="update")&&ns.ctrl.idle){const gs=Xr.every(us=>us.ctrl.idle);if(ns.phase=="leave"){const us=callProp$2(Ut,ns.item);if(us!==!1){const ps=us===!0?0:us;if(ns.expired=!0,!gs&&ps>0){ps<=2147483647&&(ns.expirationId=setTimeout(dr,ps));return}}}gs&&Xr.some(us=>us.expired)&&(mr.current.delete(ns),Ht&&(jr.current=!0),dr())}};const rs=getSprings$2(Tr.ctrl,Yr);zr==="leave"&&Ht?mr.current.set(Tr,{phase:zr,springs:rs,payload:Yr}):pr.set(Tr,{phase:zr,springs:rs,payload:Yr})});const Rr=reactExports.useContext(SpringContext$2),xr=usePrev$2(Rr),kr=Rr!==xr&&hasProps$2(Rr);useIsomorphicLayoutEffect$2(()=>{kr&&each$2(rr,Tr=>{Tr.ctrl.start({default:Rr})})},[Rr]),each$2(pr,(Tr,Or)=>{if(mr.current.size){const _r=rr.findIndex(Pr=>Pr.key===Or.key);rr.splice(_r,1)}}),useIsomorphicLayoutEffect$2(()=>{each$2(mr.current.size?mr.current:pr,({phase:Tr,payload:Or},_r)=>{const{ctrl:Pr}=_r;_r.phase=Tr,Zt==null||Zt.add(Pr),kr&&Tr=="enter"&&Pr.start({default:Rr}),Or&&(replaceRef$2(Pr,Or.ref),(Pr.ref||Zt)&&!jr.current?Pr.update(Or):(Pr.start(Or),jr.current&&(jr.current=!1)))})},Tt?void 0:$t);const Mr=Tr=>reactExports.createElement(reactExports.Fragment,null,rr.map((Or,_r)=>{const{springs:Pr}=pr.get(Or)||Or.ctrl,br=Tr({...Pr},Or.item,Or,_r),wr=is$2.str(Or.key)||is$2.num(Or.key)?Or.key:Or.ctrl.id,zr=reactExports.version<"19.0.0",Hr=(br==null?void 0:br.props)??{},Yr=zr?br==null?void 0:br.ref:Hr==null?void 0:Hr.ref;return br&&br.type?reactExports.createElement(br.type,{...Hr,key:wr,ref:Yr}):br}));return Zt?[Mr,Zt]:Mr}var nextKey$1=1;function getKeys$1(et,{key:dt,keys:$t=dt},kt){if($t===null){const Tt=new Set;return et.map(Dt=>{const Ft=kt&&kt.find(Ut=>Ut.item===Dt&&Ut.phase!=="leave"&&!Tt.has(Ut));return Ft?(Tt.add(Ft),Ft.key):nextKey$1++})}return is$2.und($t)?et:is$2.fun($t)?et.map($t):toArray$2($t)}var Interpolation$2=class extends FrameValue$2{constructor(dt,$t){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$2(...$t);const kt=this._get(),Tt=getAnimatedType$2(kt);setAnimated$2(this,Tt.create(kt))}advance(dt){const $t=this._get(),kt=this.get();isEqual$2($t,kt)||(getAnimated$2(this).setValue($t),this._onChange($t,this.idle)),!this.idle&&checkIdle$2(this._active)&&becomeIdle$2(this)}_get(){const dt=is$2.arr(this.source)?this.source.map(getFluidValue$2):toArray$2(getFluidValue$2(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$2(this._active)&&(this.idle=!1,each$2(getPayload$2(this),dt=>{dt.done=!1}),globals_exports$2.skipAnimation?(raf$2.batchedUpdates(()=>this.advance()),becomeIdle$2(this)):frameLoop$2.start(this))}_attach(){let dt=1;each$2(toArray$2(this.source),$t=>{hasFluidValue$2($t)&&addFluidObserver$2($t,this),isFrameValue$2($t)&&($t.idle||this._active.add($t),dt=Math.max(dt,$t.priority+1))}),this.priority=dt,this._start()}_detach(){each$2(toArray$2(this.source),dt=>{hasFluidValue$2(dt)&&removeFluidObserver$2(dt,this)}),this._active.clear(),becomeIdle$2(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$2(this.source).reduce(($t,kt)=>Math.max($t,(isFrameValue$2(kt)?kt.priority:0)+1),0))}};function isIdle$2(et){return et.idle!==!1}function checkIdle$2(et){return!et.size||Array.from(et).every(isIdle$2)}function becomeIdle$2(et){et.idle||(et.idle=!0,each$2(getPayload$2(et),dt=>{dt.done=!0}),callFluidObservers$2(et,{type:"idle",parent:et}))}globals_exports$2.assign({createStringInterpolator:createStringInterpolator2$2,to:(et,dt)=>new Interpolation$2(et,dt)});var isCustomPropRE$2=/^--/;function dangerousStyleValue$2(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$2.test(et)&&!(isUnitlessNumber$2.hasOwnProperty(et)&&isUnitlessNumber$2[et])?dt+"px":(""+dt).trim()}var attributeCache$2={};function applyAnimatedValues$2(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const $t=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:kt,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>$t||et.hasAttribute(Zt)?Zt:attributeCache$2[Zt]||(attributeCache$2[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$2(Zt,Tt[Zt]);isCustomPropRE$2.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),kt!==void 0&&(et.className=kt),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$2={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$2=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$2=["Webkit","Ms","Moz","O"];isUnitlessNumber$2=Object.keys(isUnitlessNumber$2).reduce((et,dt)=>(prefixes$2.forEach($t=>et[prefixKey$2($t,dt)]=et[dt]),et),isUnitlessNumber$2);var domTransforms$2=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$2=/^(translate)/,degTransforms$2=/^(rotate|skew)/,addUnit$2=(et,dt)=>is$2.num(et)&&et!==0?et+dt:et,isValueIdentity$2=(et,dt)=>is$2.arr(et)?et.every($t=>isValueIdentity$2($t,dt)):is$2.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$2=class extends AnimatedObject$2{constructor({x:dt,y:$t,z:kt,...Tt}){const Dt=[],Ft=[];(dt||$t||kt)&&(Dt.push([dt||0,$t||0,kt||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$2(Ht,"px")).join(",")})`,isValueIdentity$2(Ut,0)])),eachProp$2(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$2.test(Ht)){if(delete Tt[Ht],is$2.und(Ut))return;const Kt=pxTransforms$2.test(Ht)?"px":degTransforms$2.test(Ht)?"deg":"";Dt.push(toArray$2(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$2(er,Kt)})`,isValueIdentity$2(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$2(Jt,Kt)).join(",")})`,isValueIdentity$2(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$2(Dt,Ft)),super(Tt)}},FluidTransform$2=class extends FluidValue$2{constructor(dt,$t){super(),this.inputs=dt,this.transforms=$t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",$t=!0;return each$2(this.inputs,(kt,Tt)=>{const Dt=getFluidValue$2(kt[0]),[Ft,Ut]=this.transforms[Tt](is$2.arr(Dt)?Dt:kt.map(getFluidValue$2));dt+=" "+Ft,$t=$t&&Ut}),$t?"none":dt}observerAdded(dt){dt==1&&each$2(this.inputs,$t=>each$2($t,kt=>hasFluidValue$2(kt)&&addFluidObserver$2(kt,this)))}observerRemoved(dt){dt==0&&each$2(this.inputs,$t=>each$2($t,kt=>hasFluidValue$2(kt)&&removeFluidObserver$2(kt,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$2(this,dt)}},primitives$2=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$2.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$2,colors:colors2$2});var host$2=createHost$2(primitives$2,{applyAnimatedValues:applyAnimatedValues$2,createAnimatedStyle:et=>new AnimatedStyle$2(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...$t})=>$t}),animated$2=host$2.animated;function noop$3(){}var noop_1=noop$3,Set$1=_Set,noop$2=noop_1,setToArray$1=_setToArray,INFINITY=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY?function(et){return new Set$1(et)}:noop$2,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$1(et,dt,$t){var kt=-1,Tt=arrayIncludes,Dt=et.length,Ft=!0,Ut=[],Ht=Ut;if($t)Ft=!1,Tt=arrayIncludesWith;else if(Dt>=LARGE_ARRAY_SIZE){var Kt=dt?null:createSet(et);if(Kt)return setToArray(Kt);Ft=!1,Tt=cacheHas,Ht=new SetCache}else Ht=dt?[]:Ut;e:for(;++kt<Dt;){var Yt=et[kt],Jt=dt?dt(Yt):Yt;if(Yt=$t||Yt!==0?Yt:0,Ft&&Jt===Jt){for(var Zt=Ht.length;Zt--;)if(Ht[Zt]===Jt)continue e;dt&&Ht.push(Jt),Ut.push(Yt)}else Tt(Ht,Jt,$t)||(Ht!==Ut&&Ht.push(Jt),Ut.push(Yt))}return Ut}var _baseUniq=baseUniq$1,Stack$1=_Stack,baseIsEqual$1=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(et,dt,$t,kt){var Tt=$t.length,Dt=Tt,Ft=!kt;if(et==null)return!Dt;for(et=Object(et);Tt--;){var Ut=$t[Tt];if(Ft&&Ut[2]?Ut[1]!==et[Ut[0]]:!(Ut[0]in et))return!1}for(;++Tt<Dt;){Ut=$t[Tt];var Ht=Ut[0],Kt=et[Ht],Yt=Ut[1];if(Ft&&Ut[2]){if(Kt===void 0&&!(Ht in et))return!1}else{var Jt=new Stack$1;if(kt)var Zt=kt(Kt,Yt,Ht,et,dt,Jt);if(!(Zt===void 0?baseIsEqual$1(Yt,Kt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,kt,Jt):Zt))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$1=isObject_1;function isStrictComparable$2(et){return et===et&&!isObject$1(et)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$3=keys_1;function getMatchData$1(et){for(var dt=keys$3(et),$t=dt.length;$t--;){var kt=dt[$t],Tt=et[kt];dt[$t]=[kt,Tt,isStrictComparable$1(Tt)]}return dt}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(et,dt){return function($t){return $t==null?!1:$t[et]===dt&&(dt!==void 0||et in Object($t))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(et){var dt=getMatchData(et);return dt.length==1&&dt[0][2]?matchesStrictComparable$1(dt[0][0],dt[0][1]):function($t){return $t===et||baseIsMatch($t,et,dt)}}var _baseMatches=baseMatches$1,baseIsEqual=_baseIsEqual,get=get_1,hasIn=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$2=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(et,dt){return isKey$1(et)&&isStrictComparable(dt)?matchesStrictComparable(toKey$2(et),dt):function($t){var kt=get($t,et);return kt===void 0&&kt===dt?hasIn($t,et):baseIsEqual(dt,kt,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function baseProperty$1(et){return function(dt){return dt==null?void 0:dt[et]}}var _baseProperty=baseProperty$1,baseGet$2=_baseGet;function basePropertyDeep$1(et){return function(dt){return baseGet$2(dt,et)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey$1=_toKey;function property$1(et){return isKey(et)?baseProperty(toKey$1(et)):basePropertyDeep(et)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$1=identity_1,isArray$3=isArray_1,property=property_1;function baseIteratee$3(et){return typeof et=="function"?et:et==null?identity$1:typeof et=="object"?isArray$3(et)?baseMatchesProperty(et[0],et[1]):baseMatches(et):property(et)}var _baseIteratee=baseIteratee$3,baseIteratee$2=_baseIteratee,baseUniq=_baseUniq;function uniqBy(et,dt){return et&&et.length?baseUniq(et,baseIteratee$2(dt)):[]}var uniqBy_1=uniqBy;const J$1=getDefaultExportFromCjs(uniqBy_1);var baseFor=_baseFor,keys$2=keys_1;function baseForOwn$1(et,dt){return et&&baseFor(et,dt,keys$2)}var _baseForOwn=baseForOwn$1,isArrayLike$1=isArrayLike_1;function createBaseEach$1(et,dt){return function($t,kt){if($t==null)return $t;if(!isArrayLike$1($t))return et($t,kt);for(var Tt=$t.length,Dt=dt?Tt:-1,Ft=Object($t);(dt?Dt--:++Dt<Tt)&&kt(Ft[Dt],Dt,Ft)!==!1;);return $t}}var _createBaseEach=createBaseEach$1,baseForOwn=_baseForOwn,createBaseEach=_createBaseEach,baseEach$2=createBaseEach(baseForOwn),_baseEach=baseEach$2,baseEach$1=_baseEach,isArrayLike=isArrayLike_1;function baseMap$1(et,dt){var $t=-1,kt=isArrayLike(et)?Array(et.length):[];return baseEach$1(et,function(Tt,Dt,Ft){kt[++$t]=dt(Tt,Dt,Ft)}),kt}var _baseMap=baseMap$1;function baseSortBy$1(et,dt){var $t=et.length;for(et.sort(dt);$t--;)et[$t]=et[$t].value;return et}var _baseSortBy=baseSortBy$1,isSymbol=isSymbol_1;function compareAscending$1(et,dt){if(et!==dt){var $t=et!==void 0,kt=et===null,Tt=et===et,Dt=isSymbol(et),Ft=dt!==void 0,Ut=dt===null,Ht=dt===dt,Kt=isSymbol(dt);if(!Ut&&!Kt&&!Dt&&et>dt||Dt&&Ft&&Ht&&!Ut&&!Kt||kt&&Ft&&Ht||!$t&&Ht||!Tt)return 1;if(!kt&&!Dt&&!Kt&&et<dt||Kt&&$t&&Tt&&!kt&&!Dt||Ut&&$t&&Tt||!Ft&&Tt||!Ht)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(et,dt,$t){for(var kt=-1,Tt=et.criteria,Dt=dt.criteria,Ft=Tt.length,Ut=$t.length;++kt<Ft;){var Ht=compareAscending(Tt[kt],Dt[kt]);if(Ht){if(kt>=Ut)return Ht;var Kt=$t[kt];return Ht*(Kt=="desc"?-1:1)}}return et.index-dt.index}var _compareMultiple=compareMultiple$1,arrayMap$1=_arrayMap,baseGet$1=_baseGet,baseIteratee$1=_baseIteratee,baseMap=_baseMap,baseSortBy=_baseSortBy,baseUnary$2=_baseUnary,compareMultiple=_compareMultiple,identity=identity_1,isArray$2=isArray_1;function baseOrderBy$1(et,dt,$t){dt.length?dt=arrayMap$1(dt,function(Dt){return isArray$2(Dt)?function(Ft){return baseGet$1(Ft,Dt.length===1?Dt[0]:Dt)}:Dt}):dt=[identity];var kt=-1;dt=arrayMap$1(dt,baseUnary$2(baseIteratee$1));var Tt=baseMap(et,function(Dt,Ft,Ut){var Ht=arrayMap$1(dt,function(Kt){return Kt(Dt)});return{criteria:Ht,index:++kt,value:Dt}});return baseSortBy(Tt,function(Dt,Ft){return compareMultiple(Dt,Ft,$t)})}var _baseOrderBy=baseOrderBy$1,baseFlatten=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest=_baseRest,isIterateeCall=_isIterateeCall;baseRest(function(et,dt){if(et==null)return[];var $t=dt.length;return $t>1&&isIterateeCall(et,dt[0],dt[1])?dt=[]:$t>2&&isIterateeCall(dt[0],dt[1],dt[2])&&(dt=[dt[0]]),baseOrderBy(et,baseFlatten(dt,1),[])});var nodeUtil$2=_nodeUtilExports;nodeUtil$2&&nodeUtil$2.isDate;var L$2=[function(et){return et.setMilliseconds(0)},function(et){return et.setSeconds(0)},function(et){return et.setMinutes(0)},function(et){return et.setHours(0)},function(et){return et.setDate(1)},function(et){return et.setMonth(0)}],Q$1={millisecond:[],second:L$2.slice(0,1),minute:L$2.slice(0,2),hour:L$2.slice(0,3),day:L$2.slice(0,4),month:L$2.slice(0,5),year:L$2.slice(0,6)},W$2=function(et){return function(dt){return Q$1[et].forEach(function($t){$t(dt)}),dt}},X$1=function(et){var dt=et.format,$t=dt===void 0?"native":dt,kt=et.precision,Tt=kt===void 0?"millisecond":kt,Dt=et.useUTC,Ft=Dt===void 0||Dt,Ut=W$2(Tt);return function(Ht){if(Ht===void 0)return Ht;if($t==="native"||Ht instanceof Date)return Ut(Ht);var Kt=Ft?utcParse($t):timeParse($t);return Ut(Kt(Ht))}},Y$1={type:"linear",min:0,max:"auto",stacked:!1,reverse:!1,clamp:!1,nice:!0,round:!1},Z$1=function(et,dt,$t,kt){var Tt,Dt,Ft,Ut,Ht=et.min,Kt=Ht===void 0?Y$1.min:Ht,Yt=et.max,Jt=Yt===void 0?Y$1.max:Yt,Zt=et.stacked,er=Zt===void 0?Y$1.stacked:Zt,rr=et.reverse,sr=rr===void 0?Y$1.reverse:rr,nr=et.clamp,ir=nr===void 0?Y$1.clamp:nr,or=et.nice,lr=or===void 0?Y$1.nice:or,cr=et.round,dr=cr===void 0?Y$1.round:cr;Kt==="auto"?Tt=er===!0?(Dt=dt.minStacked)!=null?Dt:0:dt.min:Tt=Kt,Jt==="auto"?Ft=er===!0?(Ut=dt.maxStacked)!=null?Ut:0:dt.max:Ft=Jt;var ur=linear().range(kt==="x"?[0,$t]:[$t,0]).interpolate(dr?v$2:p$2).domain(sr?[Ft,Tt]:[Tt,Ft]).clamp(ir);return lr===!0?ur.nice():typeof lr=="number"&&ur.nice(lr),_(ur,er)},_=function(et,dt){dt===void 0&&(dt=!1);var $t=et;return $t.type="linear",$t.stacked=dt,$t},nn=function(et,dt,$t){var kt=point().range([0,$t]).domain(dt.all);return kt.type="point",kt},en={type:"band",round:!1},rn=function(et,dt,$t,kt){var Tt=et.round,Dt=Tt===void 0?en.round:Tt,Ft=band().range(kt==="x"?[0,$t]:[$t,0]).domain(dt.all).round(Dt);return an(Ft)},an=function(et){var dt=et;return dt.type="band",dt},on={type:"time",format:"native",precision:"millisecond",min:"auto",max:"auto",useUTC:!0,nice:!1},un=function(et,dt,$t){var kt,Tt,Dt=et.format,Ft=Dt===void 0?on.format:Dt,Ut=et.precision,Ht=Ut===void 0?on.precision:Ut,Kt=et.min,Yt=Kt===void 0?on.min:Kt,Jt=et.max,Zt=Jt===void 0?on.max:Jt,er=et.useUTC,rr=er===void 0?on.useUTC:er,sr=et.nice,nr=sr===void 0?on.nice:sr,ir=X$1({format:Ft,precision:Ht,useUTC:rr});kt=Yt==="auto"?ir(dt.min):Ft!=="native"?ir(Yt):Yt,Tt=Zt==="auto"?ir(dt.max):Ft!=="native"?ir(Zt):Zt;var or=rr?utcTime():time();or.range([0,$t]),kt&&Tt&&or.domain([kt,Tt]),nr===!0?or.nice():typeof nr!="object"&&typeof nr!="number"||or.nice(nr);var lr=or;return lr.type="time",lr.useUTC=rr,lr},cn={type:"log",base:10,min:"auto",max:"auto",round:!1,reverse:!1,nice:!0},sn=function(et,dt,$t,kt){var Tt,Dt=et.base,Ft=Dt===void 0?cn.base:Dt,Ut=et.min,Ht=Ut===void 0?cn.min:Ut,Kt=et.max,Yt=Kt===void 0?cn.max:Kt,Jt=et.round,Zt=Jt===void 0?cn.round:Jt,er=et.reverse,rr=er===void 0?cn.reverse:er,sr=et.nice,nr=sr===void 0?cn.nice:sr;if(dt.all.some(function(pr){return pr===0}))throw new Error("a log scale domain must not include or cross zero");var ir,or,lr=!1;if(dt.all.filter(function(pr){return pr!=null}).forEach(function(pr){lr||(Tt===void 0?Tt=Math.sign(pr):Math.sign(pr)!==Tt&&(lr=!0))}),lr)throw new Error("a log scale domain must be strictly-positive or strictly-negative");ir=Ht==="auto"?dt.min:Ht,or=Yt==="auto"?dt.max:Yt;var cr=log().base(Ft),dr=kt==="x"?[0,$t]:[$t,0];Zt===!0?cr.rangeRound(dr):cr.range(dr),rr===!0?cr.domain([or,ir]):cr.domain([ir,or]),nr===!0?cr.nice():typeof nr=="number"&&cr.nice(nr);var ur=cr;return ur.type="log",ur},dn={type:"symlog",constant:1,min:"auto",max:"auto",round:!1,reverse:!1,nice:!0},mn=function(et,dt,$t,kt){var Tt,Dt,Ft=et.constant,Ut=Ft===void 0?dn.constant:Ft,Ht=et.min,Kt=Ht===void 0?dn.min:Ht,Yt=et.max,Jt=Yt===void 0?dn.max:Yt,Zt=et.round,er=Zt===void 0?dn.round:Zt,rr=et.reverse,sr=rr===void 0?dn.reverse:rr,nr=et.nice,ir=nr===void 0?dn.nice:nr;Tt=Kt==="auto"?dt.min:Kt,Dt=Jt==="auto"?dt.max:Jt;var or=symlog().constant(Ut),lr=kt==="x"?[0,$t]:[$t,0];er===!0?or.rangeRound(lr):or.range(lr),sr===!0?or.domain([Dt,Tt]):or.domain([Tt,Dt]),ir===!0?or.nice():typeof ir=="number"&&or.nice(ir);var cr=or;return cr.type="symlog",cr};function pn(et,dt,$t,kt){switch(et.type){case"linear":return Z$1(et,dt,$t,kt);case"point":return nn(0,dt,$t);case"band":return rn(et,dt,$t,kt);case"time":return un(et,dt,$t);case"log":return sn(et,dt,$t,kt);case"symlog":return mn(et,dt,$t,kt);default:throw new Error("invalid scale spec")}}var Mn=function(et){var dt=et.bandwidth();if(dt===0)return et;var $t=dt/2;return et.round()&&($t=Math.round($t)),function(kt){var Tt;return((Tt=et(kt))!=null?Tt:0)+$t}},wn={millisecond:[g$1,g$1],second:[k$3,k$3],minute:[T$2,b$3],hour:[M$1,w$3],day:[newInterval(function(et){return et.setHours(0,0,0,0)},function(et,dt){return et.setDate(et.getDate()+dt)},function(et,dt){return(dt.getTime()-et.getTime())/864e5},function(et){return Math.floor(et.getTime()/864e5)}),newInterval(function(et){return et.setUTCHours(0,0,0,0)},function(et,dt){return et.setUTCDate(et.getUTCDate()+dt)},function(et,dt){return(dt.getTime()-et.getTime())/864e5},function(et){return Math.floor(et.getTime()/864e5)})],week:[sunday,utcSunday],sunday:[sunday,utcSunday],monday:[monday,utcMonday],tuesday:[tuesday,utcTuesday],wednesday:[wednesday,utcWednesday],thursday:[thursday,utcThursday],friday:[friday,utcFriday],saturday:[saturday,utcSaturday],month:[I$1,P$1],year:[$$1,G]},En=Object.keys(wn),Sn=new RegExp("^every\\s*(\\d+)?\\s*("+En.join("|")+")s?$","i"),Cn=function(et,dt){if(Array.isArray(dt))return dt;if(typeof dt=="string"&&"useUTC"in et){var $t=dt.match(Sn);if($t){var kt=$t[1],Tt=$t[2],Dt=wn[Tt][et.useUTC?1:0];if(Tt==="day"){var Ft,Ut,Ht=et.domain(),Kt=Ht[0],Yt=Ht[1],Jt=new Date(Yt);return Jt.setDate(Jt.getDate()+1),(Ft=(Ut=Dt.every(Number(kt??1)))==null?void 0:Ut.range(Kt,Jt))!=null?Ft:[]}if(kt===void 0)return et.ticks(Dt);var Zt=Dt.every(Number(kt));if(Zt)return et.ticks(Zt)}throw new Error("Invalid tickValues: "+dt)}if("ticks"in et){if(dt===void 0)return et.ticks();if(typeof(er=dt)=="number"&&isFinite(er)&&Math.floor(er)===er)return et.ticks(dt)}var er;return et.domain()};function A$1(){return A$1=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},A$1.apply(null,arguments)}var T$1=function(et){var dt,$t=et.axis,kt=et.scale,Tt=et.ticksPosition,Dt=et.tickValues,Ft=et.tickSize,Ut=et.tickPadding,Ht=et.tickRotation,Kt=et.truncateTickAt,Yt=et.engine,Jt=Yt===void 0?"svg":Yt,Zt=Cn(kt,Dt),er=gt[Jt],rr="bandwidth"in kt?Mn(kt):kt,sr={lineX:0,lineY:0},nr={textX:0,textY:0},ir=typeof document=="object"&&document.dir==="rtl",or=er.align.center,lr=er.baseline.center;return $t==="x"?(dt=function(cr){var dr;return{x:(dr=rr(cr))!=null?dr:0,y:0}},sr.lineY=Ft*(Tt==="after"?1:-1),nr.textY=(Ft+Ut)*(Tt==="after"?1:-1),lr=Tt==="after"?er.baseline.top:er.baseline.bottom,Ht===0?or=er.align.center:Tt==="after"&&Ht<0||Tt==="before"&&Ht>0?(or=er.align[ir?"left":"right"],lr=er.baseline.center):(Tt==="after"&&Ht>0||Tt==="before"&&Ht<0)&&(or=er.align[ir?"right":"left"],lr=er.baseline.center)):(dt=function(cr){var dr;return{x:0,y:(dr=rr(cr))!=null?dr:0}},sr.lineX=Ft*(Tt==="after"?1:-1),nr.textX=(Ft+Ut)*(Tt==="after"?1:-1),or=Tt==="after"?er.align.left:er.align.right),{ticks:Zt.map(function(cr){var dr=typeof cr=="string"?function(ur){var pr=String(ur).length;return Kt&&Kt>0&&pr>Kt?""+String(ur).slice(0,Kt).concat("..."):""+ur}(cr):cr;return A$1({key:cr instanceof Date?""+cr.valueOf():""+cr,value:dr},dt(cr),sr,nr)}),textAlign:or,textBaseline:lr}},w$1=function(et,dt){if(et===void 0||typeof et=="function")return et;if(dt.type==="time"){var $t=timeFormat(et);return function(kt){return $t(kt instanceof Date?kt:new Date(kt))}}return format(et)},O$2=function(et){var dt,$t=et.width,kt=et.height,Tt=et.scale,Dt=et.axis,Ft=et.values,Ut=(dt=Ft,(Array.isArray(dt)?Ft:void 0)||Cn(Tt,Ft)),Ht="bandwidth"in Tt?Mn(Tt):Tt,Kt=Dt==="x"?Ut.map(function(Yt){var Jt,Zt;return{key:Yt instanceof Date?""+Yt.valueOf():""+Yt,x1:(Jt=Ht(Yt))!=null?Jt:0,x2:(Zt=Ht(Yt))!=null?Zt:0,y1:0,y2:kt}}):Ut.map(function(Yt){var Jt,Zt;return{key:Yt instanceof Date?""+Yt.valueOf():""+Yt,x1:0,x2:$t,y1:(Jt=Ht(Yt))!=null?Jt:0,y2:(Zt=Ht(Yt))!=null?Zt:0}});return Kt},X=reactExports.memo(function(et){var dt,$t=et.value,kt=et.format,Tt=et.lineX,Dt=et.lineY,Ft=et.onClick,Ut=et.textBaseline,Ht=et.textAnchor,Kt=et.theme,Yt=et.animatedProps,Jt=(dt=kt==null?void 0:kt($t))!=null?dt:$t,Zt=reactExports.useMemo(function(){var er={opacity:Yt.opacity};return Ft?{style:A$1({},er,{cursor:"pointer"}),onClick:function(rr){return Ft(rr,Jt)}}:{style:er}},[Yt.opacity,Ft,Jt]);return jsxRuntimeExports.jsxs(animated$2.g,A$1({transform:Yt.transform},Zt,{children:[jsxRuntimeExports.jsx("line",{x1:0,x2:Tt,y1:0,y2:Dt,style:Kt.line}),jsxRuntimeExports.jsx(b$2,{dominantBaseline:Ut,textAnchor:Ht,transform:Yt.textTransform,style:Kt.text,children:""+Jt})]}))}),Y={tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:0},B$1=function(et){var dt=et.axis,$t=et.scale,kt=et.x,Tt=kt===void 0?0:kt,Dt=et.y,Ft=Dt===void 0?0:Dt,Ut=et.length,Ht=et.ticksPosition,Kt=et.tickValues,Yt=et.tickSize,Jt=Yt===void 0?Y.tickSize:Yt,Zt=et.tickPadding,er=Zt===void 0?Y.tickPadding:Zt,rr=et.tickRotation,sr=rr===void 0?Y.tickRotation:rr,nr=et.format,ir=et.renderTick,or=ir===void 0?X:ir,lr=et.truncateTickAt,cr=et.legend,dr=et.legendPosition,ur=dr===void 0?Y.legendPosition:dr,pr=et.legendOffset,mr=pr===void 0?Y.legendOffset:pr,jr=et.style,Rr=et.onClick,xr=et.ariaHidden,kr=M$3(),Mr=w$5(kr.axis,jr),Tr=reactExports.useMemo(function(){return w$1(nr,$t)},[nr,$t]),Or=T$1({axis:dt,scale:$t,ticksPosition:Ht,tickValues:Kt,tickSize:Jt,tickPadding:er,tickRotation:sr,truncateTickAt:lr}),_r=Or.ticks,Pr=Or.textAlign,br=Or.textBaseline,wr=null;if(cr!==void 0){var zr,Hr=0,Yr=0,es=0;dt==="y"?(es=-90,Hr=mr,ur==="start"?(zr="start",Yr=Ut):ur==="middle"?(zr="middle",Yr=Ut/2):ur==="end"&&(zr="end")):(Yr=mr,ur==="start"?zr="start":ur==="middle"?(zr="middle",Hr=Ut/2):ur==="end"&&(zr="end",Hr=Ut)),wr=jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(b$2,{transform:"translate("+Hr+", "+Yr+") rotate("+es+")",textAnchor:zr,style:A$1({},Mr.legend.text,{dominantBaseline:"central"}),children:cr})})}var rs=Dr(),Wr=rs.animate,Xr=rs.config,ns=useSpring$1({transform:"translate("+Tt+","+Ft+")",lineX2:dt==="x"?Ut:0,lineY2:dt==="x"?0:Ut,config:Xr,immediate:!Wr}),gs=reactExports.useCallback(function(cs){return{opacity:1,transform:"translate("+cs.x+","+cs.y+")",textTransform:"translate("+cs.textX+","+cs.textY+") rotate("+sr+")"}},[sr]),us=reactExports.useCallback(function(cs){return{opacity:0,transform:"translate("+cs.x+","+cs.y+")",textTransform:"translate("+cs.textX+","+cs.textY+") rotate("+sr+")"}},[sr]),ps=useTransition$1(_r,{keys:function(cs){return cs.key},initial:gs,from:us,enter:gs,update:gs,leave:{opacity:0},config:Xr,immediate:!Wr});return jsxRuntimeExports.jsxs(animated$2.g,{transform:ns.transform,"aria-hidden":xr,children:[ps(function(cs,ss,fs,hs){return reactExports.createElement(or,A$1({tickIndex:hs,format:Tr,rotate:sr,textBaseline:br,textAnchor:Pr,truncateTickAt:lr,animatedProps:cs,theme:Mr.ticks},ss,Rr?{onClick:Rr}:{}))}),jsxRuntimeExports.jsx(animated$2.line,{style:Mr.domain.line,x1:0,x2:ns.lineX2,y1:0,y2:ns.lineY2}),wr]})},z$2=reactExports.memo(B$1),R$1=["top","right","bottom","left"],V=reactExports.memo(function(et){var dt=et.xScale,$t=et.yScale,kt=et.width,Tt=et.height,Dt={top:et.top,right:et.right,bottom:et.bottom,left:et.left};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:R$1.map(function(Ft){var Ut=Dt[Ft];if(!Ut)return null;var Ht=Ft==="top"||Ft==="bottom";return jsxRuntimeExports.jsx(z$2,A$1({},Ut,{axis:Ht?"x":"y",x:Ft==="right"?kt:0,y:Ft==="bottom"?Tt:0,scale:Ht?dt:$t,length:Ht?kt:Tt,ticksPosition:Ft==="top"||Ft==="left"?"before":"after",truncateTickAt:Ut.truncateTickAt}),Ft)})})}),C$2=reactExports.memo(function(et){var dt=et.animatedProps,$t=M$3();return jsxRuntimeExports.jsx(animated$2.line,A$1({},dt,$t.grid.line))}),D$1=reactExports.memo(function(et){var dt=et.lines,$t=Dr(),kt=$t.animate,Tt=$t.config,Dt=useTransition$1(dt,{keys:function(Ft){return Ft.key},initial:function(Ft){return{opacity:1,x1:Ft.x1,x2:Ft.x2,y1:Ft.y1,y2:Ft.y2}},from:function(Ft){return{opacity:0,x1:Ft.x1,x2:Ft.x2,y1:Ft.y1,y2:Ft.y2}},enter:function(Ft){return{opacity:1,x1:Ft.x1,x2:Ft.x2,y1:Ft.y1,y2:Ft.y2}},update:function(Ft){return{opacity:1,x1:Ft.x1,x2:Ft.x2,y1:Ft.y1,y2:Ft.y2}},leave:{opacity:0},config:Tt,immediate:!kt});return jsxRuntimeExports.jsx("g",{children:Dt(function(Ft,Ut){return reactExports.createElement(C$2,A$1({},Ut,{key:Ut.key,animatedProps:Ft}))})})}),j$2=reactExports.memo(function(et){var dt=et.width,$t=et.height,kt=et.xScale,Tt=et.yScale,Dt=et.xValues,Ft=et.yValues,Ut=reactExports.useMemo(function(){return!!kt&&O$2({width:dt,height:$t,scale:kt,axis:"x",values:Dt})},[kt,Dt,dt,$t]),Ht=reactExports.useMemo(function(){return!!Tt&&O$2({width:dt,height:$t,scale:Tt,axis:"y",values:Ft})},[$t,dt,Tt,Ft]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ut&&jsxRuntimeExports.jsx(D$1,{lines:Ut}),Ht&&jsxRuntimeExports.jsx(D$1,{lines:Ht})]})}),E$2=function(et,dt){var $t,kt,Tt=dt.axis,Dt=dt.scale,Ft=dt.x,Ut=Ft===void 0?0:Ft,Ht=dt.y,Kt=Ht===void 0?0:Ht,Yt=dt.length,Jt=dt.ticksPosition,Zt=dt.tickValues,er=dt.tickSize,rr=er===void 0?Y.tickSize:er,sr=dt.tickPadding,nr=sr===void 0?Y.tickPadding:sr,ir=dt.tickRotation,or=ir===void 0?Y.tickRotation:ir,lr=dt.format,cr=dt.legend,dr=dt.legendPosition,ur=dr===void 0?Y.legendPosition:dr,pr=dt.legendOffset,mr=pr===void 0?Y.legendOffset:pr,jr=dt.theme,Rr=dt.style,xr=T$1({axis:Tt,scale:Dt,ticksPosition:Jt,tickValues:Zt,tickSize:rr,tickPadding:nr,tickRotation:or,engine:"canvas"}),kr=xr.ticks,Mr=xr.textAlign,Tr=xr.textBaseline;et.save(),et.translate(Ut,Kt);var Or=R$2(jr.axis,Rr);et.textAlign=Mr,et.textBaseline=Tr,a$1(et,Or.ticks.text);var _r=($t=Or.domain.line.strokeWidth)!=null?$t:0;typeof _r!="string"&&_r>0&&(et.lineWidth=_r,et.lineCap="square",Or.domain.line.stroke&&(et.strokeStyle=Or.domain.line.stroke),et.beginPath(),et.moveTo(0,0),et.lineTo(Tt==="x"?Yt:0,Tt==="x"?0:Yt),et.stroke());var Pr=typeof lr=="function"?lr:function(rs){return""+rs},br=(kt=Or.ticks.line.strokeWidth)!=null?kt:0,wr=typeof br!="string"&&br>0;if(kr.forEach(function(rs){wr&&(et.lineWidth=br,et.lineCap="square",Or.ticks.line.stroke&&(et.strokeStyle=Or.ticks.line.stroke),et.beginPath(),et.moveTo(rs.x,rs.y),et.lineTo(rs.x+rs.lineX,rs.y+rs.lineY),et.stroke());var Wr=Pr(rs.value);et.save(),et.translate(rs.x+rs.textX,rs.y+rs.textY),et.rotate(ut(or)),d(et,Or.ticks.text,""+Wr),et.fillText(""+Wr,0,0),et.restore()}),cr!==void 0){var zr=0,Hr=0,Yr=0,es="center";Tt==="y"?(Yr=-90,zr=mr,ur==="start"?(es="start",Hr=Yt):ur==="middle"?(es="center",Hr=Yt/2):ur==="end"&&(es="end")):(Hr=mr,ur==="start"?es="start":ur==="middle"?(es="center",zr=Yt/2):ur==="end"&&(es="end",zr=Yt)),et.translate(zr,Hr),et.rotate(ut(Yr)),a$1(et,Or.legend.text),Or.legend.text.fill&&(et.fillStyle=Or.legend.text.fill),et.textAlign=es,et.textBaseline="middle",d(et,Or.legend.text,cr)}et.restore()},W$1=function(et,dt){var $t=dt.xScale,kt=dt.yScale,Tt=dt.width,Dt=dt.height,Ft=dt.top,Ut=dt.right,Ht=dt.bottom,Kt=dt.left,Yt=dt.theme,Jt={top:Ft,right:Ut,bottom:Ht,left:Kt};R$1.forEach(function(Zt){var er=Jt[Zt];if(!er)return null;var rr=Zt==="top"||Zt==="bottom",sr=Zt==="top"||Zt==="left"?"before":"after",nr=rr?$t:kt,ir=w$1(er.format,nr);E$2(et,A$1({},er,{axis:rr?"x":"y",x:Zt==="right"?Tt:0,y:Zt==="bottom"?Dt:0,scale:nr,format:ir,length:rr?Tt:Dt,ticksPosition:sr,theme:Yt}))})},q$1=function(et,dt){var $t=dt.width,kt=dt.height,Tt=dt.scale,Dt=dt.axis,Ft=dt.values;O$2({width:$t,height:kt,scale:Tt,axis:Dt,values:Ft}).forEach(function(Ut){et.beginPath(),et.moveTo(Ut.x1,Ut.y1),et.lineTo(Ut.x2,Ut.y2),et.stroke()})},updateQueue$1=makeQueue$1(),raf$1=et=>schedule$1(et,updateQueue$1),writeQueue$1=makeQueue$1();raf$1.write=et=>schedule$1(et,writeQueue$1);var onStartQueue$1=makeQueue$1();raf$1.onStart=et=>schedule$1(et,onStartQueue$1);var onFrameQueue$1=makeQueue$1();raf$1.onFrame=et=>schedule$1(et,onFrameQueue$1);var onFinishQueue$1=makeQueue$1();raf$1.onFinish=et=>schedule$1(et,onFinishQueue$1);var timeouts$1=[];raf$1.setTimeout=(et,dt)=>{const $t=raf$1.now()+dt,kt=()=>{const Dt=timeouts$1.findIndex(Ft=>Ft.cancel==kt);~Dt&&timeouts$1.splice(Dt,1),pendingCount$1-=~Dt?1:0},Tt={time:$t,handler:et,cancel:kt};return timeouts$1.splice(findTimeout$1($t),0,Tt),pendingCount$1+=1,start$1(),Tt};var findTimeout$1=et=>~(~timeouts$1.findIndex(dt=>dt.time>et)||~timeouts$1.length);raf$1.cancel=et=>{onStartQueue$1.delete(et),onFrameQueue$1.delete(et),onFinishQueue$1.delete(et),updateQueue$1.delete(et),writeQueue$1.delete(et)};raf$1.sync=et=>{sync$1=!0,raf$1.batchedUpdates(et),sync$1=!1};raf$1.throttle=et=>{let dt;function $t(){try{et(...dt)}finally{dt=null}}function kt(...Tt){dt=Tt,raf$1.onStart($t)}return kt.handler=et,kt.cancel=()=>{onStartQueue$1.delete($t),dt=null},kt};var nativeRaf$1=typeof window<"u"?window.requestAnimationFrame:()=>{};raf$1.use=et=>nativeRaf$1=et;raf$1.now=typeof performance<"u"?()=>performance.now():Date.now;raf$1.batchedUpdates=et=>et();raf$1.catch=console.error;raf$1.frameLoop="always";raf$1.advance=()=>{raf$1.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$1()};var ts$1=-1,pendingCount$1=0,sync$1=!1;function schedule$1(et,dt){sync$1?(dt.delete(et),et(0)):(dt.add(et),start$1())}function start$1(){ts$1<0&&(ts$1=0,raf$1.frameLoop!=="demand"&&nativeRaf$1(loop$1))}function stop$1(){ts$1=-1}function loop$1(){~ts$1&&(nativeRaf$1(loop$1),raf$1.batchedUpdates(update$1))}function update$1(){const et=ts$1;ts$1=raf$1.now();const dt=findTimeout$1(ts$1);if(dt&&(eachSafely$1(timeouts$1.splice(0,dt),$t=>$t.handler()),pendingCount$1-=dt),!pendingCount$1){stop$1();return}onStartQueue$1.flush(),updateQueue$1.flush(et?Math.min(64,ts$1-et):16.667),onFrameQueue$1.flush(),writeQueue$1.flush(),onFinishQueue$1.flush()}function makeQueue$1(){let et=new Set,dt=et;return{add($t){pendingCount$1+=dt==et&&!et.has($t)?1:0,et.add($t)},delete($t){return pendingCount$1-=dt==et&&et.has($t)?1:0,et.delete($t)},flush($t){dt.size&&(et=new Set,pendingCount$1-=dt.size,eachSafely$1(dt,kt=>kt($t)&&et.add(kt)),pendingCount$1+=et.size,dt=et)}}}function eachSafely$1(et,dt){et.forEach($t=>{try{dt($t)}catch(kt){raf$1.catch(kt)}})}var __defProp$1=Object.defineProperty,__export$1=(et,dt)=>{for(var $t in dt)__defProp$1(et,$t,{get:dt[$t],enumerable:!0})},globals_exports$1={};__export$1(globals_exports$1,{assign:()=>assign$1,colors:()=>colors$1,createStringInterpolator:()=>createStringInterpolator$1,skipAnimation:()=>skipAnimation$1,to:()=>to$2,willAdvance:()=>willAdvance$1});function noop$1(){}var defineHidden$1=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),is$1={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual$1(et,dt){if(is$1.arr(et)){if(!is$1.arr(dt)||et.length!==dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(et[$t]!==dt[$t])return!1;return!0}return et===dt}var each$1=(et,dt)=>et.forEach(dt);function eachProp$1(et,dt,$t){if(is$1.arr(et)){for(let kt=0;kt<et.length;kt++)dt.call($t,et[kt],`${kt}`);return}for(const kt in et)et.hasOwnProperty(kt)&&dt.call($t,et[kt],kt)}var toArray$1=et=>is$1.und(et)?[]:is$1.arr(et)?et:[et];function flush$1(et,dt){if(et.size){const $t=Array.from(et);et.clear(),each$1($t,dt)}}var flushCalls$1=(et,...dt)=>flush$1(et,$t=>$t(...dt)),isSSR$1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator$1,to$2,colors$1=null,skipAnimation$1=!1,willAdvance$1=noop$1,assign$1=et=>{et.to&&(to$2=et.to),et.now&&(raf$1.now=et.now),et.colors!==void 0&&(colors$1=et.colors),et.skipAnimation!=null&&(skipAnimation$1=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator$1=et.createStringInterpolator),et.requestAnimationFrame&&raf$1.use(et.requestAnimationFrame),et.batchedUpdates&&(raf$1.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance$1=et.willAdvance),et.frameLoop&&(raf$1.frameLoop=et.frameLoop)},startQueue$1=new Set,currentFrame$1=[],prevFrame$1=[],priority$1=0,frameLoop$1={get idle(){return!startQueue$1.size&&!currentFrame$1.length},start(et){priority$1>et.priority?(startQueue$1.add(et),raf$1.onStart(flushStartQueue$1)):(startSafely$1(et),raf$1(advance$1))},advance:advance$1,sort(et){if(priority$1)raf$1.onFrame(()=>frameLoop$1.sort(et));else{const dt=currentFrame$1.indexOf(et);~dt&&(currentFrame$1.splice(dt,1),startUnsafely$1(et))}},clear(){currentFrame$1=[],startQueue$1.clear()}};function flushStartQueue$1(){startQueue$1.forEach(startSafely$1),startQueue$1.clear(),raf$1(advance$1)}function startSafely$1(et){currentFrame$1.includes(et)||startUnsafely$1(et)}function startUnsafely$1(et){currentFrame$1.splice(findIndex$1(currentFrame$1,dt=>dt.priority>et.priority),0,et)}function advance$1(et){const dt=prevFrame$1;for(let $t=0;$t<currentFrame$1.length;$t++){const kt=currentFrame$1[$t];priority$1=kt.priority,kt.idle||(willAdvance$1(kt),kt.advance(et),kt.idle||dt.push(kt))}return priority$1=0,prevFrame$1=currentFrame$1,prevFrame$1.length=0,currentFrame$1=dt,currentFrame$1.length>0}function findIndex$1(et,dt){const $t=et.findIndex(dt);return $t<0?et.length:$t}var clamp$1=(et,dt,$t)=>Math.min(Math.max($t,et),dt),colors2$1={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER$1="[-+]?\\d*\\.?\\d+",PERCENTAGE$1=NUMBER$1+"%";function call$1(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb$1=new RegExp("rgb"+call$1(NUMBER$1,NUMBER$1,NUMBER$1)),rgba$1=new RegExp("rgba"+call$1(NUMBER$1,NUMBER$1,NUMBER$1,NUMBER$1)),hsl$1=new RegExp("hsl"+call$1(NUMBER$1,PERCENTAGE$1,PERCENTAGE$1)),hsla$1=new RegExp("hsla"+call$1(NUMBER$1,PERCENTAGE$1,PERCENTAGE$1,NUMBER$1)),hex3$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6$1=/^#([0-9a-fA-F]{6})$/,hex8$1=/^#([0-9a-fA-F]{8})$/;function normalizeColor$1(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6$1.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors$1&&colors$1[et]!==void 0?colors$1[et]:(dt=rgb$1.exec(et))?(parse255$1(dt[1])<<24|parse255$1(dt[2])<<16|parse255$1(dt[3])<<8|255)>>>0:(dt=rgba$1.exec(et))?(parse255$1(dt[1])<<24|parse255$1(dt[2])<<16|parse255$1(dt[3])<<8|parse1$1(dt[4]))>>>0:(dt=hex3$1.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8$1.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4$1.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl$1.exec(et))?(hslToRgb$1(parse360$1(dt[1]),parsePercentage$1(dt[2]),parsePercentage$1(dt[3]))|255)>>>0:(dt=hsla$1.exec(et))?(hslToRgb$1(parse360$1(dt[1]),parsePercentage$1(dt[2]),parsePercentage$1(dt[3]))|parse1$1(dt[4]))>>>0:null}function hue2rgb$1(et,dt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?et+(dt-et)*6*$t:$t<1/2?dt:$t<2/3?et+(dt-et)*(2/3-$t)*6:et}function hslToRgb$1(et,dt,$t){const kt=$t<.5?$t*(1+dt):$t+dt-$t*dt,Tt=2*$t-kt,Dt=hue2rgb$1(Tt,kt,et+1/3),Ft=hue2rgb$1(Tt,kt,et),Ut=hue2rgb$1(Tt,kt,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255$1(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360$1(et){return(parseFloat(et)%360+360)%360/360}function parse1$1(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage$1(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba$1(et){let dt=normalizeColor$1(et);if(dt===null)return et;dt=dt||0;const $t=(dt&4278190080)>>>24,kt=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${$t}, ${kt}, ${Tt}, ${Dt})`}var createInterpolator$1=(et,dt,$t)=>{if(is$1.fun(et))return et;if(is$1.arr(et))return createInterpolator$1({range:et,output:dt,extrapolate:$t});if(is$1.str(et.output[0]))return createStringInterpolator$1(et);const kt=et,Tt=kt.output,Dt=kt.range||[0,1],Ft=kt.extrapolateLeft||kt.extrapolate||"extend",Ut=kt.extrapolateRight||kt.extrapolate||"extend",Ht=kt.easing||(Kt=>Kt);return Kt=>{const Yt=findRange$1(Kt,Dt);return interpolate$1(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,kt.map)}};function interpolate$1(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>$t){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=$t)}return kt===Tt?kt:dt===$t?et<=dt?kt:Tt:(dt===-1/0?Kt=-Kt:$t===1/0?Kt=Kt-dt:Kt=(Kt-dt)/($t-dt),Kt=Dt(Kt),kt===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+kt:Kt=Kt*(Tt-kt)+kt,Kt)}function findRange$1(et,dt){for(var $t=1;$t<dt.length-1&&!(dt[$t]>=et);++$t);return $t-1}var steps$1=(et,dt="end")=>$t=>{$t=dt==="end"?Math.min($t,.999):Math.max($t,.001);const kt=$t*et,Tt=dt==="end"?Math.floor(kt):Math.ceil(kt);return clamp$1(0,1,Tt/et)},c1$1=1.70158,c2$1=c1$1*1.525,c3$1=c1$1+1,c4$1=2*Math.PI/3,c5$1=2*Math.PI/4.5,bounceOut$1=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings$1={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3$1*et*et*et-c1$1*et*et,easeOutBack:et=>1+c3$1*Math.pow(et-1,3)+c1$1*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2$1+1)*2*et-c2$1)/2:(Math.pow(2*et-2,2)*((c2$1+1)*(et*2-2)+c2$1)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4$1),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4$1)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5$1))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5$1)/2+1,easeInBounce:et=>1-bounceOut$1(1-et),easeOutBounce:bounceOut$1,easeInOutBounce:et=>et<.5?(1-bounceOut$1(1-2*et))/2:(1+bounceOut$1(2*et-1))/2,steps:steps$1},$get$1=Symbol.for("FluidValue.get"),$observers$1=Symbol.for("FluidValue.observers"),hasFluidValue$1=et=>!!(et&&et[$get$1]),getFluidValue$1=et=>et&&et[$get$1]?et[$get$1]():et,getFluidObservers$1=et=>et[$observers$1]||null;function callFluidObserver$1(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers$1(et,dt){const $t=et[$observers$1];$t&&$t.forEach(kt=>{callFluidObserver$1(kt,dt)})}var FluidValue$1=class{constructor(dt){if(!dt&&!(dt=this.get))throw Error("Unknown getter");setFluidGetter$1(this,dt)}},setFluidGetter$1=(et,dt)=>setHidden$1(et,$get$1,dt);function addFluidObserver$1(et,dt){if(et[$get$1]){let $t=et[$observers$1];$t||setHidden$1(et,$observers$1,$t=new Set),$t.has(dt)||($t.add(dt),et.observerAdded&&et.observerAdded($t.size,dt))}return dt}function removeFluidObserver$1(et,dt){const $t=et[$observers$1];if($t&&$t.has(dt)){const kt=$t.size-1;kt?$t.delete(dt):et[$observers$1]=null,et.observerRemoved&&et.observerRemoved(kt,dt)}}var setHidden$1=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),numberRegex$1=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex$1=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex$1=new RegExp(`(${numberRegex$1.source})(%|[a-z]+)`,"i"),rgbaRegex$1=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex$1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba$1=et=>{const[dt,$t]=parseCSSVariable$1(et);if(!dt||isSSR$1())return et;const kt=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if(kt)return kt.trim();if($t&&$t.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue($t);return Tt||et}else{if($t&&cssVariableRegex$1.test($t))return variableToRgba$1($t);if($t)return $t}return et},parseCSSVariable$1=et=>{const dt=cssVariableRegex$1.exec(et);if(!dt)return[,];const[,$t,kt]=dt;return[$t,kt]},namedColorRegex$1,rgbaRound$1=(et,dt,$t,kt,Tt)=>`rgba(${Math.round(dt)}, ${Math.round($t)}, ${Math.round(kt)}, ${Tt})`,createStringInterpolator2$1=et=>{namedColorRegex$1||(namedColorRegex$1=colors$1?new RegExp(`(${Object.keys(colors$1).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue$1(Dt).replace(cssVariableRegex$1,variableToRgba$1).replace(colorRegex$1,colorToRgba$1).replace(namedColorRegex$1,colorToRgba$1)),$t=dt.map(Dt=>Dt.match(numberRegex$1).map(Number)),Tt=$t[0].map((Dt,Ft)=>$t.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator$1({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex$1.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex$1.test(Kt)))==null?void 0:Ht.replace(numberRegex$1,""));let Ut=0;return dt[0].replace(numberRegex$1,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex$1,rgbaRound$1)}},prefix$1="react-spring: ",once$1=et=>{const dt=et;let $t=!1;if(typeof dt!="function")throw new TypeError(`${prefix$1}once requires a function parameter`);return(...kt)=>{$t||(dt(...kt),$t=!0)}},warnInterpolate$1=once$1(console.warn);function deprecateInterpolate$1(){warnInterpolate$1(`${prefix$1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall$1=once$1(console.warn);function deprecateDirectCall$1(){warnDirectCall$1(`${prefix$1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString$1(et){return is$1.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR$1()&&cssVariableRegex$1.test(et)||et in(colors$1||{}))}var useIsomorphicLayoutEffect$1=isSSR$1()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted$1=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate$1(){const et=reactExports.useState()[1],dt=useIsMounted$1();return()=>{dt.current&&et(Math.random())}}var useOnce$1=et=>reactExports.useEffect(et,emptyDeps$1),emptyDeps$1=[];function usePrev$1(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node$1=Symbol.for("Animated:node"),isAnimated$1=et=>!!et&&et[$node$1]===et,getAnimated$1=et=>et&&et[$node$1],setAnimated$1=(et,dt)=>defineHidden$1(et,$node$1,dt),getPayload$1=et=>et&&et[$node$1]&&et[$node$1].getPayload(),Animated$1=class{constructor(){setAnimated$1(this,this)}getPayload(){return this.payload||[]}},AnimatedValue$1=class eC extends Animated$1{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is$1.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new eC(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,$t){return is$1.num(dt)&&(this.lastPosition=dt,$t&&(dt=Math.round(dt/$t)*$t,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is$1.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString$1=class tC extends AnimatedValue$1{constructor(dt){super(0),this._string=null,this._toString=createInterpolator$1({output:[dt,dt]})}static create(dt){return new tC(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is$1.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator$1({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext$1={dependencies:null},AnimatedObject$1=class extends Animated$1{constructor(dt){super(),this.source=dt,this.setValue(dt)}getValue(dt){const $t={};return eachProp$1(this.source,(kt,Tt)=>{isAnimated$1(kt)?$t[Tt]=kt.getValue(dt):hasFluidValue$1(kt)?$t[Tt]=getFluidValue$1(kt):dt||($t[Tt]=kt)}),$t}setValue(dt){this.source=dt,this.payload=this._makePayload(dt)}reset(){this.payload&&each$1(this.payload,dt=>dt.reset())}_makePayload(dt){if(dt){const $t=new Set;return eachProp$1(dt,this._addToPayload,$t),Array.from($t)}}_addToPayload(dt){TreeContext$1.dependencies&&hasFluidValue$1(dt)&&TreeContext$1.dependencies.add(dt);const $t=getPayload$1(dt);$t&&each$1($t,kt=>this.add(kt))}},AnimatedArray$1=class rC extends AnimatedObject$1{constructor(dt){super(dt)}static create(dt){return new rC(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const $t=this.getPayload();return dt.length==$t.length?$t.map((kt,Tt)=>kt.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated$1)),!0)}};function makeAnimated$1(et){return(isAnimatedString$1(et)?AnimatedString$1:AnimatedValue$1).create(et)}function getAnimatedType$1(et){const dt=getAnimated$1(et);return dt?dt.constructor:is$1.arr(et)?AnimatedArray$1:isAnimatedString$1(et)?AnimatedString$1:AnimatedValue$1}var withAnimated$1=(et,dt)=>{const $t=!is$1.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef((kt,Tt)=>{const Dt=reactExports.useRef(null),Ft=$t&&reactExports.useCallback(rr=>{Dt.current=updateRef$1(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState$1(kt,dt),Kt=useForceUpdate$1(),Yt=()=>{const rr=Dt.current;if($t&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver$1(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect$1(()=>(Zt.current=Jt,each$1(Ht,rr=>addFluidObserver$1(rr,Jt)),()=>{Zt.current&&(each$1(Zt.current.deps,rr=>removeFluidObserver$1(rr,Zt.current)),raf$1.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce$1(()=>()=>{const rr=Zt.current;each$1(rr.deps,sr=>removeFluidObserver$1(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver$1=class{constructor(dt,$t){this.update=dt,this.deps=$t}eventObserved(dt){dt.type=="change"&&raf$1.write(this.update)}};function getAnimatedState$1(et,dt){const $t=new Set;return TreeContext$1.dependencies=$t,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject$1(et),TreeContext$1.dependencies=null,[et,$t]}function updateRef$1(et,dt){return et&&(is$1.fun(et)?et(dt):et.current=dt),dt}var cacheKey$1=Symbol.for("AnimatedComponent"),createHost$1=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:$t=Tt=>new AnimatedObject$1(Tt),getComponentProps:kt=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:$t,getComponentProps:kt},Dt=Ft=>{const Ut=getDisplayName$1(Ft)||"Anonymous";return is$1.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated$1(Ft,Tt)):Ft=Ft[cacheKey$1]||(Ft[cacheKey$1]=withAnimated$1(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp$1(et,(Ft,Ut)=>{is$1.arr(et)&&(Ut=getDisplayName$1(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName$1=et=>is$1.str(et)?et:et&&is$1.str(et.displayName)?et.displayName:is$1.fun(et)&&et.name||null;function callProp$1(et,...dt){return is$1.fun(et)?et(...dt):et}var matchProp$1=(et,dt)=>et===!0||!!(dt&&et&&(is$1.fun(et)?et(dt):toArray$1(et).includes(dt))),resolveProp$1=(et,dt)=>is$1.obj(et)?dt&&et[dt]:et,getDefaultProp$1=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform$1=et=>et,getDefaultProps$1=(et,dt=noopTransform$1)=>{let $t=DEFAULT_PROPS$1;et.default&&et.default!==!0&&(et=et.default,$t=Object.keys(et));const kt={};for(const Tt of $t){const Dt=dt(et[Tt],Tt);is$1.und(Dt)||(kt[Tt]=Dt)}return kt},DEFAULT_PROPS$1=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$1={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps$1(et){const dt={};let $t=0;if(eachProp$1(et,(kt,Tt)=>{RESERVED_PROPS$1[Tt]||(dt[Tt]=kt,$t++)}),$t)return dt}function inferTo$1(et){const dt=getForwardProps$1(et);if(dt){const $t={to:dt};return eachProp$1(et,(kt,Tt)=>Tt in dt||($t[Tt]=kt)),$t}return{...et}}function computeGoal$1(et){return et=getFluidValue$1(et),is$1.arr(et)?et.map(computeGoal$1):isAnimatedString$1(et)?globals_exports$1.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps$1(et){for(const dt in et)return!0;return!1}function isAsyncTo$1(et){return is$1.fun(et)||is$1.arr(et)&&is$1.obj(et[0])}function detachRefs$1(et,dt){var $t;($t=et.ref)==null||$t.delete(et),dt==null||dt.delete(et)}function replaceRef$1(et,dt){var $t;dt&&et.ref!==dt&&(($t=et.ref)==null||$t.delete(et),dt.add(et),et.ref=dt)}var config$1={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults$1={...config$1.default,mass:1,damping:1,easing:easings$1.linear,clamp:!1},AnimationConfig$1=class{constructor(){this.velocity=0,Object.assign(this,defaults$1)}};function mergeConfig$1(et,dt,$t){$t&&($t={...$t},sanitizeConfig$1($t,dt),dt={...$t,...dt}),sanitizeConfig$1(et,dt),Object.assign(et,dt);for(const Ft in defaults$1)et[Ft]==null&&(et[Ft]=defaults$1[Ft]);let{frequency:kt,damping:Tt}=et;const{mass:Dt}=et;return is$1.und(kt)||(kt<.01&&(kt=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/kt,2)*Dt,et.friction=4*Math.PI*Tt*Dt/kt),et}function sanitizeConfig$1(et,dt){if(!is$1.und(dt.decay))et.duration=void 0;else{const $t=!is$1.und(dt.tension)||!is$1.und(dt.friction);($t||!is$1.und(dt.frequency)||!is$1.und(dt.damping)||!is$1.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),$t&&(et.frequency=void 0)}}var emptyArray$1=[],Animation$1=class{constructor(){this.changed=!1,this.values=emptyArray$1,this.toValues=null,this.fromValues=emptyArray$1,this.config=new AnimationConfig$1,this.immediate=!1}};function scheduleProps$1(et,{key:dt,props:$t,defaultProps:kt,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp$1($t.cancel??(kt==null?void 0:kt.cancel),dt);if(Yt)er();else{is$1.und($t.pause)||(Tt.paused=matchProp$1($t.pause,dt));let rr=kt==null?void 0:kt.pause;rr!==!0&&(rr=Tt.paused||matchProp$1(rr,dt)),Ht=callProp$1($t.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf$1.now()}function Zt(){Ht>0&&!globals_exports$1.skipAnimation?(Tt.delayed=!0,Kt=raf$1.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...$t,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult$1=(et,dt)=>dt.length==1?dt[0]:dt.some($t=>$t.cancelled)?getCancelledResult$1(et.get()):dt.every($t=>$t.noop)?getNoopResult$1(et.get()):getFinishedResult$1(et.get(),dt.every($t=>$t.finished)),getNoopResult$1=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult$1=(et,dt,$t=!1)=>({value:et,finished:dt,cancelled:$t}),getCancelledResult$1=et=>({value:et,cancelled:!0,finished:!1});function runAsync$1(et,dt,$t,kt){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=$t;return!Dt&&et===Ut&&!dt.reset?Ht:$t.promise=(async()=>{$t.asyncId=Tt,$t.asyncTo=et;const Kt=getDefaultProps$1(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=($t.cancelId||0)&&getCancelledResult$1(kt)||Tt!==$t.asyncId&&getFinishedResult$1(kt,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const or=new BailSignal$1,lr=new SkipAnimationSignal$1;return(async()=>{if(globals_exports$1.skipAnimation)throw stopAsync$1($t),lr.result=getFinishedResult$1(kt,!1),Jt(lr),lr;er(or);const cr=is$1.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp$1(Kt,(ur,pr)=>{is$1.und(cr[pr])&&(cr[pr]=ur)});const dr=await kt.start(cr);return er(or),$t.paused&&await new Promise(ur=>{$t.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports$1.skipAnimation)return stopAsync$1($t),getFinishedResult$1(kt,!1);try{let nr;is$1.arr(et)?nr=(async ir=>{for(const or of ir)await rr(or)})(et):nr=Promise.resolve(et(rr,kt.stop.bind(kt))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult$1(kt.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal$1)sr=nr.result;else if(nr instanceof SkipAnimationSignal$1)sr=nr.result;else throw nr}finally{Tt==$t.asyncId&&($t.asyncId=Dt,$t.asyncTo=Dt?Ut:void 0,$t.promise=Dt?Ht:void 0)}return is$1.fun(Ft)&&raf$1.batchedUpdates(()=>{Ft(sr,kt,kt.item)}),sr})()}function stopAsync$1(et,dt){flush$1(et.timeouts,$t=>$t.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal$1=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal$1=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue$1=et=>et instanceof FrameValue$1,nextId$1=1,FrameValue$1=class extends FluidValue$1{constructor(){super(...arguments),this.id=nextId$1++,this._priority=0}get priority(){return this._priority}set priority(dt){this._priority!=dt&&(this._priority=dt,this._onPriorityChange(dt))}get(){const dt=getAnimated$1(this);return dt&&dt.getValue()}to(...dt){return globals_exports$1.to(this,dt)}interpolate(...dt){return deprecateInterpolate$1(),globals_exports$1.to(this,dt)}toJSON(){return this.get()}observerAdded(dt){dt==1&&this._attach()}observerRemoved(dt){dt==0&&this._detach()}_attach(){}_detach(){}_onChange(dt,$t=!1){callFluidObservers$1(this,{type:"change",parent:this,value:dt,idle:$t})}_onPriorityChange(dt){this.idle||frameLoop$1.sort(this),callFluidObservers$1(this,{type:"priority",parent:this,priority:dt})}},$P$1=Symbol.for("SpringPhase"),HAS_ANIMATED$1=1,IS_ANIMATING$1=2,IS_PAUSED$1=4,hasAnimated$1=et=>(et[$P$1]&HAS_ANIMATED$1)>0,isAnimating$1=et=>(et[$P$1]&IS_ANIMATING$1)>0,isPaused$1=et=>(et[$P$1]&IS_PAUSED$1)>0,setActiveBit$1=(et,dt)=>dt?et[$P$1]|=IS_ANIMATING$1|HAS_ANIMATED$1:et[$P$1]&=~IS_ANIMATING$1,setPausedBit$1=(et,dt)=>dt?et[$P$1]|=IS_PAUSED$1:et[$P$1]&=~IS_PAUSED$1,SpringValue$1=class extends FrameValue$1{constructor(dt,$t){if(super(),this.animation=new Animation$1,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$1.und(dt)||!is$1.und($t)){const kt=is$1.obj(dt)?{...dt}:{...$t,from:dt};is$1.und(kt.default)&&(kt.default=!0),this.start(kt)}}get idle(){return!(isAnimating$1(this)||this._state.asyncTo)||isPaused$1(this)}get goal(){return getFluidValue$1(this.animation.to)}get velocity(){const dt=getAnimated$1(this);return dt instanceof AnimatedValue$1?dt.lastVelocity||0:dt.getPayload().map($t=>$t.lastVelocity||0)}get hasAnimated(){return hasAnimated$1(this)}get isAnimating(){return isAnimating$1(this)}get isPaused(){return isPaused$1(this)}get isDelayed(){return this._state.delayed}advance(dt){let $t=!0,kt=!1;const Tt=this.animation;let{toValues:Dt}=Tt;const{config:Ft}=Tt,Ut=getPayload$1(Tt.to);!Ut&&hasFluidValue$1(Tt.to)&&(Dt=toArray$1(getFluidValue$1(Tt.to))),Tt.values.forEach((Yt,Jt)=>{if(Yt.done)return;const Zt=Yt.constructor==AnimatedString$1?1:Ut?Ut[Jt].lastPosition:Dt[Jt];let er=Tt.immediate,rr=Zt;if(!er){if(rr=Yt.lastPosition,Ft.tension<=0){Yt.done=!0;return}let sr=Yt.elapsedTime+=dt;const nr=Tt.fromValues[Jt],ir=Yt.v0!=null?Yt.v0:Yt.v0=is$1.arr(Ft.velocity)?Ft.velocity[Jt]:Ft.velocity;let or;const lr=Ft.precision||(nr==Zt?.005:Math.min(1,Math.abs(Zt-nr)*.001));if(is$1.und(Ft.duration))if(Ft.decay){const cr=Ft.decay===!0?.998:Ft.decay,dr=Math.exp(-(1-cr)*sr);rr=nr+ir/(1-cr)*(1-dr),er=Math.abs(Yt.lastPosition-rr)<=lr,or=ir*dr}else{or=Yt.lastVelocity==null?ir:Yt.lastVelocity;const cr=Ft.restVelocity||lr/10,dr=Ft.clamp?0:Ft.bounce,ur=!is$1.und(dr),pr=nr==Zt?Yt.v0>0:nr<Zt;let mr,jr=!1;const Rr=1,xr=Math.ceil(dt/Rr);for(let kr=0;kr<xr&&(mr=Math.abs(or)>cr,!(!mr&&(er=Math.abs(Zt-rr)<=lr,er)));++kr){ur&&(jr=rr==Zt||rr>Zt==pr,jr&&(or=-or*dr,rr=Zt));const Mr=-Ft.tension*1e-6*(rr-Zt),Tr=-Ft.friction*.001*or,Or=(Mr+Tr)/Ft.mass;or=or+Or*Rr,rr=rr+or*Rr}}else{let cr=1;Ft.duration>0&&(this._memoizedDuration!==Ft.duration&&(this._memoizedDuration=Ft.duration,Yt.durationProgress>0&&(Yt.elapsedTime=Ft.duration*Yt.durationProgress,sr=Yt.elapsedTime+=dt)),cr=(Ft.progress||0)+sr/this._memoizedDuration,cr=cr>1?1:cr<0?0:cr,Yt.durationProgress=cr),rr=nr+Ft.easing(cr)*(Zt-nr),or=(rr-Yt.lastPosition)/dt,er=cr==1}Yt.lastVelocity=or,Number.isNaN(rr)&&(console.warn("Got NaN while animating:",this),er=!0)}Ut&&!Ut[Jt].done&&(er=!1),er?Yt.done=!0:$t=!1,Yt.setValue(rr,Ft.round)&&(kt=!0)});const Ht=getAnimated$1(this),Kt=Ht.getValue();if($t){const Yt=getFluidValue$1(Tt.to);(Kt!==Yt||kt)&&!Ft.decay?(Ht.setValue(Yt),this._onChange(Yt)):kt&&Ft.decay&&this._onChange(Kt),this._stop()}else kt&&this._onChange(Kt)}set(dt){return raf$1.batchedUpdates(()=>{this._stop(),this._focus(dt),this._set(dt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating$1(this)){const{to:dt,config:$t}=this.animation;raf$1.batchedUpdates(()=>{this._onStart(),$t.decay||this._set(dt,!1),this._stop()})}return this}update(dt){return(this.queue||(this.queue=[])).push(dt),this}start(dt,$t){let kt;return is$1.und(dt)?(kt=this.queue||[],this.queue=[]):kt=[is$1.obj(dt)?dt:{...$t,to:dt}],Promise.all(kt.map(Tt=>this._update(Tt))).then(Tt=>getCombinedResult$1(this,Tt))}stop(dt){const{to:$t}=this.animation;return this._focus(this.get()),stopAsync$1(this._state,dt&&this._lastCallId),raf$1.batchedUpdates(()=>this._stop($t,dt)),this}reset(){this._update({reset:!0})}eventObserved(dt){dt.type=="change"?this._start():dt.type=="priority"&&(this.priority=dt.priority+1)}_prepareNode(dt){const $t=this.key||"";let{to:kt,from:Tt}=dt;kt=is$1.obj(kt)?kt[$t]:kt,(kt==null||isAsyncTo$1(kt))&&(kt=void 0),Tt=is$1.obj(Tt)?Tt[$t]:Tt,Tt==null&&(Tt=void 0);const Dt={to:kt,from:Tt};return hasAnimated$1(this)||(dt.reverse&&([kt,Tt]=[Tt,kt]),Tt=getFluidValue$1(Tt),is$1.und(Tt)?getAnimated$1(this)||this._set(kt):this._set(Tt)),Dt}_update({...dt},$t){const{key:kt,defaultProps:Tt}=this;dt.default&&Object.assign(Tt,getDefaultProps$1(dt,(Ut,Ht)=>/^on/.test(Ht)?resolveProp$1(Ut,kt):Ut)),mergeActiveFn$1(this,dt,"onProps"),sendEvent$1(this,"onProps",dt,this);const Dt=this._prepareNode(dt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Ft=this._state;return scheduleProps$1(++this._lastCallId,{key:kt,props:dt,defaultProps:Tt,state:Ft,actions:{pause:()=>{isPaused$1(this)||(setPausedBit$1(this,!0),flushCalls$1(Ft.pauseQueue),sendEvent$1(this,"onPause",getFinishedResult$1(this,checkFinished$1(this,this.animation.to)),this))},resume:()=>{isPaused$1(this)&&(setPausedBit$1(this,!1),isAnimating$1(this)&&this._resume(),flushCalls$1(Ft.resumeQueue),sendEvent$1(this,"onResume",getFinishedResult$1(this,checkFinished$1(this,this.animation.to)),this))},start:this._merge.bind(this,Dt)}}).then(Ut=>{if(dt.loop&&Ut.finished&&!($t&&Ut.noop)){const Ht=createLoopUpdate$1(dt);if(Ht)return this._update(Ht,!0)}return Ut})}_merge(dt,$t,kt){if($t.cancel)return this.stop(!0),kt(getCancelledResult$1(this));const Tt=!is$1.und(dt.to),Dt=!is$1.und(dt.from);if(Tt||Dt)if($t.callId>this._lastToId)this._lastToId=$t.callId;else return kt(getCancelledResult$1(this));const{key:Ft,defaultProps:Ut,animation:Ht}=this,{to:Kt,from:Yt}=Ht;let{to:Jt=Kt,from:Zt=Yt}=dt;Dt&&!Tt&&(!$t.default||is$1.und(Jt))&&(Jt=Zt),$t.reverse&&([Jt,Zt]=[Zt,Jt]);const er=!isEqual$1(Zt,Yt);er&&(Ht.from=Zt),Zt=getFluidValue$1(Zt);const rr=!isEqual$1(Jt,Kt);rr&&this._focus(Jt);const sr=isAsyncTo$1($t.to),{config:nr}=Ht,{decay:ir,velocity:or}=nr;(Tt||Dt)&&(nr.velocity=0),$t.config&&!sr&&mergeConfig$1(nr,callProp$1($t.config,Ft),$t.config!==Ut.config?callProp$1(Ut.config,Ft):void 0);let lr=getAnimated$1(this);if(!lr||is$1.und(Jt))return kt(getFinishedResult$1(this,!0));const cr=is$1.und($t.reset)?Dt&&!$t.default:!is$1.und(Zt)&&matchProp$1($t.reset,Ft),dr=cr?Zt:this.get(),ur=computeGoal$1(Jt),pr=is$1.num(ur)||is$1.arr(ur)||isAnimatedString$1(ur),mr=!sr&&(!pr||matchProp$1(Ut.immediate||$t.immediate,Ft));if(rr){const kr=getAnimatedType$1(Jt);if(kr!==lr.constructor)if(mr)lr=this._set(ur);else throw Error(`Cannot animate between ${lr.constructor.name} and ${kr.name}, as the "to" prop suggests`)}const jr=lr.constructor;let Rr=hasFluidValue$1(Jt),xr=!1;if(!Rr){const kr=cr||!hasAnimated$1(this)&&er;(rr||kr)&&(xr=isEqual$1(computeGoal$1(dr),ur),Rr=!xr),(!isEqual$1(Ht.immediate,mr)&&!mr||!isEqual$1(nr.decay,ir)||!isEqual$1(nr.velocity,or))&&(Rr=!0)}if(xr&&isAnimating$1(this)&&(Ht.changed&&!cr?Rr=!0:Rr||this._stop(Kt)),!sr&&((Rr||hasFluidValue$1(Kt))&&(Ht.values=lr.getPayload(),Ht.toValues=hasFluidValue$1(Jt)?null:jr==AnimatedString$1?[1]:toArray$1(ur)),Ht.immediate!=mr&&(Ht.immediate=mr,!mr&&!cr&&this._set(Kt)),Rr)){const{onRest:kr}=Ht;each$1(ACTIVE_EVENTS$1,Tr=>mergeActiveFn$1(this,$t,Tr));const Mr=getFinishedResult$1(this,checkFinished$1(this,Kt));flushCalls$1(this._pendingCalls,Mr),this._pendingCalls.add(kt),Ht.changed&&raf$1.batchedUpdates(()=>{var Tr;Ht.changed=!cr,kr==null||kr(Mr,this),cr?callProp$1(Ut.onRest,Mr):(Tr=Ht.onStart)==null||Tr.call(Ht,Mr,this)})}cr&&this._set(dr),sr?kt(runAsync$1($t.to,$t,this._state,this)):Rr?this._start():isAnimating$1(this)&&!rr?this._pendingCalls.add(kt):kt(getNoopResult$1(dr))}_focus(dt){const $t=this.animation;dt!==$t.to&&(getFluidObservers$1(this)&&this._detach(),$t.to=dt,getFluidObservers$1(this)&&this._attach())}_attach(){let dt=0;const{to:$t}=this.animation;hasFluidValue$1($t)&&(addFluidObserver$1($t,this),isFrameValue$1($t)&&(dt=$t.priority+1)),this.priority=dt}_detach(){const{to:dt}=this.animation;hasFluidValue$1(dt)&&removeFluidObserver$1(dt,this)}_set(dt,$t=!0){const kt=getFluidValue$1(dt);if(!is$1.und(kt)){const Tt=getAnimated$1(this);if(!Tt||!isEqual$1(kt,Tt.getValue())){const Dt=getAnimatedType$1(kt);!Tt||Tt.constructor!=Dt?setAnimated$1(this,Dt.create(kt)):Tt.setValue(kt),Tt&&raf$1.batchedUpdates(()=>{this._onChange(kt,$t)})}}return getAnimated$1(this)}_onStart(){const dt=this.animation;dt.changed||(dt.changed=!0,sendEvent$1(this,"onStart",getFinishedResult$1(this,checkFinished$1(this,dt.to)),this))}_onChange(dt,$t){$t||(this._onStart(),callProp$1(this.animation.onChange,dt,this)),callProp$1(this.defaultProps.onChange,dt,this),super._onChange(dt,$t)}_start(){const dt=this.animation;getAnimated$1(this).reset(getFluidValue$1(dt.to)),dt.immediate||(dt.fromValues=dt.values.map($t=>$t.lastPosition)),isAnimating$1(this)||(setActiveBit$1(this,!0),isPaused$1(this)||this._resume())}_resume(){globals_exports$1.skipAnimation?this.finish():frameLoop$1.start(this)}_stop(dt,$t){if(isAnimating$1(this)){setActiveBit$1(this,!1);const kt=this.animation;each$1(kt.values,Dt=>{Dt.done=!0}),kt.toValues&&(kt.onChange=kt.onPause=kt.onResume=void 0),callFluidObservers$1(this,{type:"idle",parent:this});const Tt=$t?getCancelledResult$1(this.get()):getFinishedResult$1(this.get(),checkFinished$1(this,dt??kt.to));flushCalls$1(this._pendingCalls,Tt),kt.changed&&(kt.changed=!1,sendEvent$1(this,"onRest",Tt,this))}}};function checkFinished$1(et,dt){const $t=computeGoal$1(dt),kt=computeGoal$1(et.get());return isEqual$1(kt,$t)}function createLoopUpdate$1(et,dt=et.loop,$t=et.to){const kt=callProp$1(dt);if(kt){const Tt=kt!==!0&&inferTo$1(kt),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate$1({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo$1($t)?$t:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate$1(et){const{to:dt,from:$t}=et=inferTo$1(et),kt=new Set;return is$1.obj(dt)&&findDefined$1(dt,kt),is$1.obj($t)&&findDefined$1($t,kt),et.keys=kt.size?Array.from(kt):null,et}function findDefined$1(et,dt){eachProp$1(et,($t,kt)=>$t!=null&&dt.add(kt))}var ACTIVE_EVENTS$1=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn$1(et,dt,$t){et.animation[$t]=dt[$t]!==getDefaultProp$1(dt,$t)?resolveProp$1(dt[$t],et.key):void 0}function sendEvent$1(et,dt,...$t){var kt,Tt,Dt,Ft;(Tt=(kt=et.animation)[dt])==null||Tt.call(kt,...$t),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...$t)}var BATCHED_EVENTS$1=["onStart","onChange","onRest"],nextId2$1=1,Controller$1=class{constructor(dt,$t){this.id=nextId2$1++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),$t&&(this._flush=$t),dt&&this.start({default:!0,...dt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(dt=>dt.idle&&!dt.isDelayed&&!dt.isPaused)}get item(){return this._item}set item(dt){this._item=dt}get(){const dt={};return this.each(($t,kt)=>dt[kt]=$t.get()),dt}set(dt){for(const $t in dt){const kt=dt[$t];is$1.und(kt)||this.springs[$t].set(kt)}}update(dt){return dt&&this.queue.push(createUpdate$1(dt)),this}start(dt){let{queue:$t}=this;return dt?$t=toArray$1(dt).map(createUpdate$1):this.queue=[],this._flush?this._flush(this,$t):(prepareKeys$1(this,$t),flushUpdateQueue$1(this,$t))}stop(dt,$t){if(dt!==!!dt&&($t=dt),$t){const kt=this.springs;each$1(toArray$1($t),Tt=>kt[Tt].stop(!!dt))}else stopAsync$1(this._state,this._lastAsyncId),this.each(kt=>kt.stop(!!dt));return this}pause(dt){if(is$1.und(dt))this.start({pause:!0});else{const $t=this.springs;each$1(toArray$1(dt),kt=>$t[kt].pause())}return this}resume(dt){if(is$1.und(dt))this.start({pause:!1});else{const $t=this.springs;each$1(toArray$1(dt),kt=>$t[kt].resume())}return this}each(dt){eachProp$1(this.springs,dt)}_onFrame(){const{onStart:dt,onChange:$t,onRest:kt}=this._events,Tt=this._active.size>0,Dt=this._changed.size>0;(Tt&&!this._started||Dt&&!this._started)&&(this._started=!0,flush$1(dt,([Ht,Kt])=>{Kt.value=this.get(),Ht(Kt,this,this._item)}));const Ft=!Tt&&this._started,Ut=Dt||Ft&&kt.size?this.get():null;Dt&&$t.size&&flush$1($t,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}),Ft&&(this._started=!1,flush$1(kt,([Ht,Kt])=>{Kt.value=Ut,Ht(Kt,this,this._item)}))}eventObserved(dt){if(dt.type=="change")this._changed.add(dt.parent),dt.idle||this._active.add(dt.parent);else if(dt.type=="idle")this._active.delete(dt.parent);else return;raf$1.onFrame(this._onFrame)}};function flushUpdateQueue$1(et,dt){return Promise.all(dt.map($t=>flushUpdate$1(et,$t))).then($t=>getCombinedResult$1(et,$t))}async function flushUpdate$1(et,dt,$t){const{keys:kt,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is$1.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is$1.arr(Tt)||is$1.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each$1(BATCHED_EVENTS$1,sr=>{const nr=dt[sr];if(is$1.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:or,cancelled:lr})=>{const cr=ir.get(nr);cr?(or||(cr.finished=!1),lr&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:or||!1,cancelled:lr||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls$1(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=(kt||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp$1(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps$1(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop$1,resume:noop$1,start(sr,nr){er?(stopAsync$1(Jt,et._lastAsyncId),nr(getCancelledResult$1(et))):(sr.onRest=Ut,nr(runAsync$1(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult$1(et,await Promise.all(Zt));if(Ft&&rr.finished&&!($t&&rr.noop)){const sr=createLoopUpdate$1(dt,Ft,Tt);if(sr)return prepareKeys$1(et,[sr]),flushUpdate$1(et,sr,!0)}return Ht&&raf$1.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings$1(et,dt){const $t={...et.springs};return dt&&each$1(toArray$1(dt),kt=>{is$1.und(kt.keys)&&(kt=createUpdate$1(kt)),is$1.obj(kt.to)||(kt={...kt,to:void 0}),prepareSprings$1($t,kt,Tt=>createSpring$1(Tt))}),setSprings$1(et,$t),$t}function setSprings$1(et,dt){eachProp$1(dt,($t,kt)=>{et.springs[kt]||(et.springs[kt]=$t,addFluidObserver$1($t,et))})}function createSpring$1(et,dt){const $t=new SpringValue$1;return $t.key=et,dt&&addFluidObserver$1($t,dt),$t}function prepareSprings$1(et,dt,$t){dt.keys&&each$1(dt.keys,kt=>{(et[kt]||(et[kt]=$t(kt)))._prepareNode(dt)})}function prepareKeys$1(et,dt){each$1(dt,$t=>{prepareSprings$1(et.springs,$t,kt=>createSpring$1(kt,et))})}var SpringContext$1=reactExports.createContext({pause:!1,immediate:!1}),SpringRef$1=()=>{const et=[],dt=function(kt){deprecateDirectCall$1();const Tt=[];return each$1(et,(Dt,Ft)=>{if(is$1.und(kt))Tt.push(Dt.start());else{const Ut=$t(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function(kt){et.includes(kt)||et.push(kt)},dt.delete=function(kt){const Tt=et.indexOf(kt);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each$1(et,kt=>kt.pause(...arguments)),this},dt.resume=function(){return each$1(et,kt=>kt.resume(...arguments)),this},dt.set=function(kt){each$1(et,(Tt,Dt)=>{const Ft=is$1.fun(kt)?kt(Dt,Tt):kt;Ft&&Tt.set(Ft)})},dt.start=function(kt){const Tt=[];return each$1(et,(Dt,Ft)=>{if(is$1.und(kt))Tt.push(Dt.start());else{const Ut=this._getProps(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each$1(et,kt=>kt.stop(...arguments)),this},dt.update=function(kt){return each$1(et,(Tt,Dt)=>Tt.update(this._getProps(kt,Tt,Dt))),this};const $t=function(kt,Tt,Dt){return is$1.fun(kt)?kt(Dt,Tt):kt};return dt._getProps=$t,dt};function useTransition(et,dt,$t){const kt=is$1.fun(dt)&&dt,{reset:Tt,sort:Dt,trail:Ft=0,expires:Ut=!0,exitBeforeEnter:Ht=!1,onDestroyed:Kt,ref:Yt,config:Jt}=kt?kt():dt,Zt=reactExports.useMemo(()=>kt||arguments.length==3?SpringRef$1():void 0,[]),er=toArray$1(et),rr=[],sr=reactExports.useRef(null),nr=Tt?null:sr.current;useIsomorphicLayoutEffect$1(()=>{sr.current=rr}),useOnce$1(()=>(each$1(rr,Tr=>{Zt==null||Zt.add(Tr.ctrl),Tr.ctrl.ref=Zt}),()=>{each$1(sr.current,Tr=>{Tr.expired&&clearTimeout(Tr.expirationId),detachRefs$1(Tr.ctrl,Zt),Tr.ctrl.stop(!0)})}));const ir=getKeys(er,kt?kt():dt,nr),or=Tt&&sr.current||[];useIsomorphicLayoutEffect$1(()=>each$1(or,({ctrl:Tr,item:Or,key:_r})=>{detachRefs$1(Tr,Zt),callProp$1(Kt,Or,_r)}));const lr=[];if(nr&&each$1(nr,(Tr,Or)=>{Tr.expired?(clearTimeout(Tr.expirationId),or.push(Tr)):(Or=lr[Or]=ir.indexOf(Tr.key),~Or&&(rr[Or]=Tr))}),each$1(er,(Tr,Or)=>{rr[Or]||(rr[Or]={key:ir[Or],item:Tr,phase:"mount",ctrl:new Controller$1},rr[Or].ctrl.item=Tr)}),lr.length){let Tr=-1;const{leave:Or}=kt?kt():dt;each$1(lr,(_r,Pr)=>{const br=nr[Pr];~_r?(Tr=rr.indexOf(br),rr[Tr]={...br,item:er[_r]}):Or&&rr.splice(++Tr,0,br)})}is$1.fun(Dt)&&rr.sort((Tr,Or)=>Dt(Tr.item,Or.item));let cr=-Ft;const dr=useForceUpdate$1(),ur=getDefaultProps$1(dt),pr=new Map,mr=reactExports.useRef(new Map),jr=reactExports.useRef(!1);each$1(rr,(Tr,Or)=>{const _r=Tr.key,Pr=Tr.phase,br=kt?kt():dt;let wr,zr;const Hr=callProp$1(br.delay||0,_r);if(Pr=="mount")wr=br.enter,zr="enter";else{const Wr=ir.indexOf(_r)<0;if(Pr!="leave")if(Wr)wr=br.leave,zr="leave";else if(wr=br.update)zr="update";else return;else if(!Wr)wr=br.enter,zr="enter";else return}if(wr=callProp$1(wr,Tr.item,Or),wr=is$1.obj(wr)?inferTo$1(wr):{to:wr},!wr.config){const Wr=Jt||ur.config;wr.config=callProp$1(Wr,Tr.item,Or,zr)}cr+=Ft;const Yr={...ur,delay:Hr+cr,ref:Yt,immediate:br.immediate,reset:!1,...wr};if(zr=="enter"&&is$1.und(Yr.from)){const Wr=kt?kt():dt,Xr=is$1.und(Wr.initial)||nr?Wr.from:Wr.initial;Yr.from=callProp$1(Xr,Tr.item,Or)}const{onResolve:es}=Yr;Yr.onResolve=Wr=>{callProp$1(es,Wr);const Xr=sr.current,ns=Xr.find(gs=>gs.key===_r);if(ns&&!(Wr.cancelled&&ns.phase!="update")&&ns.ctrl.idle){const gs=Xr.every(us=>us.ctrl.idle);if(ns.phase=="leave"){const us=callProp$1(Ut,ns.item);if(us!==!1){const ps=us===!0?0:us;if(ns.expired=!0,!gs&&ps>0){ps<=2147483647&&(ns.expirationId=setTimeout(dr,ps));return}}}gs&&Xr.some(us=>us.expired)&&(mr.current.delete(ns),Ht&&(jr.current=!0),dr())}};const rs=getSprings$1(Tr.ctrl,Yr);zr==="leave"&&Ht?mr.current.set(Tr,{phase:zr,springs:rs,payload:Yr}):pr.set(Tr,{phase:zr,springs:rs,payload:Yr})});const Rr=reactExports.useContext(SpringContext$1),xr=usePrev$1(Rr),kr=Rr!==xr&&hasProps$1(Rr);useIsomorphicLayoutEffect$1(()=>{kr&&each$1(rr,Tr=>{Tr.ctrl.start({default:Rr})})},[Rr]),each$1(pr,(Tr,Or)=>{if(mr.current.size){const _r=rr.findIndex(Pr=>Pr.key===Or.key);rr.splice(_r,1)}}),useIsomorphicLayoutEffect$1(()=>{each$1(mr.current.size?mr.current:pr,({phase:Tr,payload:Or},_r)=>{const{ctrl:Pr}=_r;_r.phase=Tr,Zt==null||Zt.add(Pr),kr&&Tr=="enter"&&Pr.start({default:Rr}),Or&&(replaceRef$1(Pr,Or.ref),(Pr.ref||Zt)&&!jr.current?Pr.update(Or):(Pr.start(Or),jr.current&&(jr.current=!1)))})},Tt?void 0:$t);const Mr=Tr=>reactExports.createElement(reactExports.Fragment,null,rr.map((Or,_r)=>{const{springs:Pr}=pr.get(Or)||Or.ctrl,br=Tr({...Pr},Or.item,Or,_r),wr=is$1.str(Or.key)||is$1.num(Or.key)?Or.key:Or.ctrl.id,zr=reactExports.version<"19.0.0",Hr=(br==null?void 0:br.props)??{},Yr=zr?br==null?void 0:br.ref:Hr==null?void 0:Hr.ref;return br&&br.type?reactExports.createElement(br.type,{...Hr,key:wr,ref:Yr}):br}));return Zt?[Mr,Zt]:Mr}var nextKey=1;function getKeys(et,{key:dt,keys:$t=dt},kt){if($t===null){const Tt=new Set;return et.map(Dt=>{const Ft=kt&&kt.find(Ut=>Ut.item===Dt&&Ut.phase!=="leave"&&!Tt.has(Ut));return Ft?(Tt.add(Ft),Ft.key):nextKey++})}return is$1.und($t)?et:is$1.fun($t)?et.map($t):toArray$1($t)}var Interpolation$1=class extends FrameValue$1{constructor(dt,$t){super(),this.source=dt,this.idle=!0,this._active=new Set,this.calc=createInterpolator$1(...$t);const kt=this._get(),Tt=getAnimatedType$1(kt);setAnimated$1(this,Tt.create(kt))}advance(dt){const $t=this._get(),kt=this.get();isEqual$1($t,kt)||(getAnimated$1(this).setValue($t),this._onChange($t,this.idle)),!this.idle&&checkIdle$1(this._active)&&becomeIdle$1(this)}_get(){const dt=is$1.arr(this.source)?this.source.map(getFluidValue$1):toArray$1(getFluidValue$1(this.source));return this.calc(...dt)}_start(){this.idle&&!checkIdle$1(this._active)&&(this.idle=!1,each$1(getPayload$1(this),dt=>{dt.done=!1}),globals_exports$1.skipAnimation?(raf$1.batchedUpdates(()=>this.advance()),becomeIdle$1(this)):frameLoop$1.start(this))}_attach(){let dt=1;each$1(toArray$1(this.source),$t=>{hasFluidValue$1($t)&&addFluidObserver$1($t,this),isFrameValue$1($t)&&($t.idle||this._active.add($t),dt=Math.max(dt,$t.priority+1))}),this.priority=dt,this._start()}_detach(){each$1(toArray$1(this.source),dt=>{hasFluidValue$1(dt)&&removeFluidObserver$1(dt,this)}),this._active.clear(),becomeIdle$1(this)}eventObserved(dt){dt.type=="change"?dt.idle?this.advance():(this._active.add(dt.parent),this._start()):dt.type=="idle"?this._active.delete(dt.parent):dt.type=="priority"&&(this.priority=toArray$1(this.source).reduce(($t,kt)=>Math.max($t,(isFrameValue$1(kt)?kt.priority:0)+1),0))}};function isIdle$1(et){return et.idle!==!1}function checkIdle$1(et){return!et.size||Array.from(et).every(isIdle$1)}function becomeIdle$1(et){et.idle||(et.idle=!0,each$1(getPayload$1(et),dt=>{dt.done=!0}),callFluidObservers$1(et,{type:"idle",parent:et}))}var to$1=(et,...dt)=>new Interpolation$1(et,dt);globals_exports$1.assign({createStringInterpolator:createStringInterpolator2$1,to:(et,dt)=>new Interpolation$1(et,dt)});var isCustomPropRE$1=/^--/;function dangerousStyleValue$1(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE$1.test(et)&&!(isUnitlessNumber$1.hasOwnProperty(et)&&isUnitlessNumber$1[et])?dt+"px":(""+dt).trim()}var attributeCache$1={};function applyAnimatedValues$1(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const $t=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:kt,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>$t||et.hasAttribute(Zt)?Zt:attributeCache$1[Zt]||(attributeCache$1[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue$1(Zt,Tt[Zt]);isCustomPropRE$1.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),kt!==void 0&&(et.className=kt),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber$1={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey$1=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes$1=["Webkit","Ms","Moz","O"];isUnitlessNumber$1=Object.keys(isUnitlessNumber$1).reduce((et,dt)=>(prefixes$1.forEach($t=>et[prefixKey$1($t,dt)]=et[dt]),et),isUnitlessNumber$1);var domTransforms$1=/^(matrix|translate|scale|rotate|skew)/,pxTransforms$1=/^(translate)/,degTransforms$1=/^(rotate|skew)/,addUnit$1=(et,dt)=>is$1.num(et)&&et!==0?et+dt:et,isValueIdentity$1=(et,dt)=>is$1.arr(et)?et.every($t=>isValueIdentity$1($t,dt)):is$1.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle$1=class extends AnimatedObject$1{constructor({x:dt,y:$t,z:kt,...Tt}){const Dt=[],Ft=[];(dt||$t||kt)&&(Dt.push([dt||0,$t||0,kt||0]),Ft.push(Ut=>[`translate3d(${Ut.map(Ht=>addUnit$1(Ht,"px")).join(",")})`,isValueIdentity$1(Ut,0)])),eachProp$1(Tt,(Ut,Ht)=>{if(Ht==="transform")Dt.push([Ut||""]),Ft.push(Kt=>[Kt,Kt===""]);else if(domTransforms$1.test(Ht)){if(delete Tt[Ht],is$1.und(Ut))return;const Kt=pxTransforms$1.test(Ht)?"px":degTransforms$1.test(Ht)?"deg":"";Dt.push(toArray$1(Ut)),Ft.push(Ht==="rotate3d"?([Yt,Jt,Zt,er])=>[`rotate3d(${Yt},${Jt},${Zt},${addUnit$1(er,Kt)})`,isValueIdentity$1(er,0)]:Yt=>[`${Ht}(${Yt.map(Jt=>addUnit$1(Jt,Kt)).join(",")})`,isValueIdentity$1(Yt,Ht.startsWith("scale")?1:0)])}}),Dt.length&&(Tt.transform=new FluidTransform$1(Dt,Ft)),super(Tt)}},FluidTransform$1=class extends FluidValue$1{constructor(dt,$t){super(),this.inputs=dt,this.transforms=$t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let dt="",$t=!0;return each$1(this.inputs,(kt,Tt)=>{const Dt=getFluidValue$1(kt[0]),[Ft,Ut]=this.transforms[Tt](is$1.arr(Dt)?Dt:kt.map(getFluidValue$1));dt+=" "+Ft,$t=$t&&Ut}),$t?"none":dt}observerAdded(dt){dt==1&&each$1(this.inputs,$t=>each$1($t,kt=>hasFluidValue$1(kt)&&addFluidObserver$1(kt,this)))}observerRemoved(dt){dt==0&&each$1(this.inputs,$t=>each$1($t,kt=>hasFluidValue$1(kt)&&removeFluidObserver$1(kt,this)))}eventObserved(dt){dt.type=="change"&&(this._value=null),callFluidObservers$1(this,dt)}},primitives$1=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports$1.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2$1,colors:colors2$1});var host$1=createHost$1(primitives$1,{applyAnimatedValues:applyAnimatedValues$1,createAnimatedStyle:et=>new AnimatedStyle$1(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...$t})=>$t}),animated$1=host$1.animated,baseEach=_baseEach;function baseFilter$1(et,dt){var $t=[];return baseEach(et,function(kt,Tt,Dt){dt(kt,Tt,Dt)&&$t.push(kt)}),$t}var _baseFilter=baseFilter$1,arrayFilter=_arrayFilter,baseFilter=_baseFilter,baseIteratee=_baseIteratee,isArray$1=isArray_1;function filter(et,dt){var $t=isArray$1(et)?arrayFilter:baseFilter;return $t(et,baseIteratee(dt))}var filter_1=filter;const o$1=getDefaultExportFromCjs(filter_1);var baseGetTag=_baseGetTag,isObjectLike$2=isObjectLike_1,numberTag$2="[object Number]";function isNumber(et){return typeof et=="number"||isObjectLike$2(et)&&baseGetTag(et)==numberTag$2}var isNumber_1=isNumber;const e=getDefaultExportFromCjs(isNumber_1);function arrayEach$1(et,dt){for(var $t=-1,kt=et==null?0:et.length;++$t<kt&&dt(et[$t],$t,et)!==!1;);return et}var _arrayEach=arrayEach$1,copyObject$4=_copyObject,keys$1=keys_1;function baseAssign$1(et,dt){return et&&copyObject$4(dt,keys$1(dt),et)}var _baseAssign=baseAssign$1,copyObject$3=_copyObject,keysIn$2=keysIn_1;function baseAssignIn$1(et,dt){return et&&copyObject$3(dt,keysIn$2(dt),et)}var _baseAssignIn=baseAssignIn$1,copyObject$2=_copyObject,getSymbols$1=_getSymbols;function copySymbols$1(et,dt){return copyObject$2(et,getSymbols$1(et),dt)}var _copySymbols=copySymbols$1,arrayPush=_arrayPush,getPrototype=_getPrototype,getSymbols=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols?function(et){for(var dt=[];et;)arrayPush(dt,getSymbols(et)),et=getPrototype(et);return dt}:stubArray,_getSymbolsIn=getSymbolsIn$2,copyObject$1=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(et,dt){return copyObject$1(et,getSymbolsIn$1(et),dt)}var _copySymbolsIn=copySymbolsIn$1,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$1=keysIn_1;function getAllKeysIn$2(et){return baseGetAllKeys(et,keysIn$1,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$2,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray$1(et){var dt=et.length,$t=new et.constructor(dt);return dt&&typeof et[0]=="string"&&hasOwnProperty.call(et,"index")&&($t.index=et.index,$t.input=et.input),$t}var _initCloneArray=initCloneArray$1,cloneArrayBuffer$1=_cloneArrayBuffer;function cloneDataView$1(et,dt){var $t=dt?cloneArrayBuffer$1(et.buffer):et.buffer;return new et.constructor($t,et.byteOffset,et.byteLength)}var _cloneDataView=cloneDataView$1,reFlags=/\w*$/;function cloneRegExp$1(et){var dt=new et.constructor(et.source,reFlags.exec(et));return dt.lastIndex=et.lastIndex,dt}var _cloneRegExp=cloneRegExp$1,Symbol$1=_Symbol,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol$1(et){return symbolValueOf?Object(symbolValueOf.call(et)):{}}var _cloneSymbol=cloneSymbol$1,cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray=_cloneTypedArray,boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag$1(et,dt,$t){var kt=et.constructor;switch(dt){case arrayBufferTag$1:return cloneArrayBuffer(et);case boolTag$1:case dateTag$1:return new kt(+et);case dataViewTag$1:return cloneDataView(et,$t);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(et,$t);case mapTag$2:return new kt;case numberTag$1:case stringTag$1:return new kt(et);case regexpTag$1:return cloneRegExp(et);case setTag$2:return new kt;case symbolTag$1:return cloneSymbol(et)}}var _initCloneByTag=initCloneByTag$1,getTag$2=_getTag,isObjectLike$1=isObjectLike_1,mapTag$1="[object Map]";function baseIsMap$1(et){return isObjectLike$1(et)&&getTag$2(et)==mapTag$1}var _baseIsMap=baseIsMap$1,baseIsMap=_baseIsMap,baseUnary$1=_baseUnary,nodeUtil$1=_nodeUtilExports,nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap?baseUnary$1(nodeIsMap):baseIsMap,isMap_1=isMap$1,getTag$1=_getTag,isObjectLike=isObjectLike_1,setTag$1="[object Set]";function baseIsSet$1(et){return isObjectLike(et)&&getTag$1(et)==setTag$1}var _baseIsSet=baseIsSet$1,baseIsSet=_baseIsSet,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet_1=isSet$1,Stack=_Stack,arrayEach=_arrayEach,assignValue=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer=_cloneBufferExports,copyArray=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys=_getAllKeys,getAllKeysIn$1=_getAllKeysIn,getTag=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject=_initCloneObject,isArray=isArray_1,isBuffer=isBufferExports,isMap=isMap_1,isObject=isObject_1,isSet=isSet_1,keys=keys_1,keysIn=keysIn_1,CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$1=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone$1(et,dt,$t,kt,Tt,Dt){var Ft,Ut=dt&CLONE_DEEP_FLAG$1,Ht=dt&CLONE_FLAT_FLAG$1,Kt=dt&CLONE_SYMBOLS_FLAG$1;if($t&&(Ft=Tt?$t(et,kt,Tt,Dt):$t(et)),Ft!==void 0)return Ft;if(!isObject(et))return et;var Yt=isArray(et);if(Yt){if(Ft=initCloneArray(et),!Ut)return copyArray(et,Ft)}else{var Jt=getTag(et),Zt=Jt==funcTag||Jt==genTag;if(isBuffer(et))return cloneBuffer(et,Ut);if(Jt==objectTag||Jt==argsTag||Zt&&!Tt){if(Ft=Ht||Zt?{}:initCloneObject(et),!Ut)return Ht?copySymbolsIn(et,baseAssignIn(Ft,et)):copySymbols(et,baseAssign(Ft,et))}else{if(!cloneableTags[Jt])return Tt?et:{};Ft=initCloneByTag(et,Jt,Ut)}}Dt||(Dt=new Stack);var er=Dt.get(et);if(er)return er;Dt.set(et,Ft),isSet(et)?et.forEach(function(nr){Ft.add(baseClone$1(nr,dt,$t,nr,et,Dt))}):isMap(et)&&et.forEach(function(nr,ir){Ft.set(ir,baseClone$1(nr,dt,$t,ir,et,Dt))});var rr=Kt?Ht?getAllKeysIn$1:getAllKeys:Ht?keysIn:keys,sr=Yt?void 0:rr(et);return arrayEach(sr||et,function(nr,ir){sr&&(ir=nr,nr=et[ir]),assignValue(Ft,ir,baseClone$1(nr,dt,$t,ir,et,Dt))}),Ft}var _baseClone=baseClone$1;function baseSlice$1(et,dt,$t){var kt=-1,Tt=et.length;dt<0&&(dt=-dt>Tt?0:Tt+dt),$t=$t>Tt?Tt:$t,$t<0&&($t+=Tt),Tt=dt>$t?0:$t-dt>>>0,dt>>>=0;for(var Dt=Array(Tt);++kt<Tt;)Dt[kt]=et[kt+dt];return Dt}var _baseSlice=baseSlice$1,baseGet=_baseGet,baseSlice=_baseSlice;function parent$1(et,dt){return dt.length<2?et:baseGet(et,baseSlice(dt,0,-1))}var _parent=parent$1,castPath$1=_castPath,last=last_1,parent=_parent,toKey=_toKey;function baseUnset$1(et,dt){return dt=castPath$1(dt,et),et=parent(et,dt),et==null||delete et[toKey(last(dt))]}var _baseUnset=baseUnset$1,isPlainObject=isPlainObject_1;function customOmitClone$1(et){return isPlainObject(et)?void 0:et}var _customOmitClone=customOmitClone$1,arrayMap=_arrayMap,baseClone=_baseClone,baseUnset=_baseUnset,castPath=_castPath,copyObject=_copyObject,customOmitClone=_customOmitClone,flatRest=_flatRest,getAllKeysIn=_getAllKeysIn,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(et,dt){var $t={};if(et==null)return $t;var kt=!1;dt=arrayMap(dt,function(Dt){return Dt=castPath(Dt,et),kt||(kt=Dt.length>1),Dt}),copyObject(et,getAllKeysIn(et),$t),kt&&($t=baseClone($t,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var Tt=dt.length;Tt--;)baseUnset($t,dt[Tt]);return $t}),omit_1=omit;const a=getDefaultExportFromCjs(omit_1);var updateQueue=makeQueue(),raf=et=>schedule(et,updateQueue),writeQueue=makeQueue();raf.write=et=>schedule(et,writeQueue);var onStartQueue=makeQueue();raf.onStart=et=>schedule(et,onStartQueue);var onFrameQueue=makeQueue();raf.onFrame=et=>schedule(et,onFrameQueue);var onFinishQueue=makeQueue();raf.onFinish=et=>schedule(et,onFinishQueue);var timeouts=[];raf.setTimeout=(et,dt)=>{const $t=raf.now()+dt,kt=()=>{const Dt=timeouts.findIndex(Ft=>Ft.cancel==kt);~Dt&&timeouts.splice(Dt,1),pendingCount-=~Dt?1:0},Tt={time:$t,handler:et,cancel:kt};return timeouts.splice(findTimeout($t),0,Tt),pendingCount+=1,start(),Tt};var findTimeout=et=>~(~timeouts.findIndex(dt=>dt.time>et)||~timeouts.length);raf.cancel=et=>{onStartQueue.delete(et),onFrameQueue.delete(et),onFinishQueue.delete(et),updateQueue.delete(et),writeQueue.delete(et)};raf.sync=et=>{sync=!0,raf.batchedUpdates(et),sync=!1};raf.throttle=et=>{let dt;function $t(){try{et(...dt)}finally{dt=null}}function kt(...Tt){dt=Tt,raf.onStart($t)}return kt.handler=et,kt.cancel=()=>{onStartQueue.delete($t),dt=null},kt};var nativeRaf=typeof window<"u"?window.requestAnimationFrame:()=>{};raf.use=et=>nativeRaf=et;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=et=>et();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update()};var ts=-1,pendingCount=0,sync=!1;function schedule(et,dt){sync?(dt.delete(et),et(0)):(dt.add(et),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop))}function stop(){ts=-1}function loop(){~ts&&(nativeRaf(loop),raf.batchedUpdates(update))}function update(){const et=ts;ts=raf.now();const dt=findTimeout(ts);if(dt&&(eachSafely(timeouts.splice(0,dt),$t=>$t.handler()),pendingCount-=dt),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush(et?Math.min(64,ts-et):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let et=new Set,dt=et;return{add($t){pendingCount+=dt==et&&!et.has($t)?1:0,et.add($t)},delete($t){return pendingCount-=dt==et&&et.has($t)?1:0,et.delete($t)},flush($t){dt.size&&(et=new Set,pendingCount-=dt.size,eachSafely(dt,kt=>kt($t)&&et.add(kt)),pendingCount+=et.size,dt=et)}}}function eachSafely(et,dt){et.forEach($t=>{try{dt($t)}catch(kt){raf.catch(kt)}})}var __defProp=Object.defineProperty,__export=(et,dt)=>{for(var $t in dt)__defProp(et,$t,{get:dt[$t],enumerable:!0})},globals_exports={};__export(globals_exports,{assign:()=>assign,colors:()=>colors,createStringInterpolator:()=>createStringInterpolator,skipAnimation:()=>skipAnimation,to:()=>to,willAdvance:()=>willAdvance});function noop(){}var defineHidden=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),is={arr:Array.isArray,obj:et=>!!et&&et.constructor.name==="Object",fun:et=>typeof et=="function",str:et=>typeof et=="string",num:et=>typeof et=="number",und:et=>et===void 0};function isEqual(et,dt){if(is.arr(et)){if(!is.arr(dt)||et.length!==dt.length)return!1;for(let $t=0;$t<et.length;$t++)if(et[$t]!==dt[$t])return!1;return!0}return et===dt}var each=(et,dt)=>et.forEach(dt);function eachProp(et,dt,$t){if(is.arr(et)){for(let kt=0;kt<et.length;kt++)dt.call($t,et[kt],`${kt}`);return}for(const kt in et)et.hasOwnProperty(kt)&&dt.call($t,et[kt],kt)}var toArray=et=>is.und(et)?[]:is.arr(et)?et:[et];function flush(et,dt){if(et.size){const $t=Array.from(et);et.clear(),each($t,dt)}}var flushCalls=(et,...dt)=>flush(et,$t=>$t(...dt)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator,to,colors=null,skipAnimation=!1,willAdvance=noop,assign=et=>{et.to&&(to=et.to),et.now&&(raf.now=et.now),et.colors!==void 0&&(colors=et.colors),et.skipAnimation!=null&&(skipAnimation=et.skipAnimation),et.createStringInterpolator&&(createStringInterpolator=et.createStringInterpolator),et.requestAnimationFrame&&raf.use(et.requestAnimationFrame),et.batchedUpdates&&(raf.batchedUpdates=et.batchedUpdates),et.willAdvance&&(willAdvance=et.willAdvance),et.frameLoop&&(raf.frameLoop=et.frameLoop)},startQueue=new Set,currentFrame=[],prevFrame=[],priority=0,frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start(et){priority>et.priority?(startQueue.add(et),raf.onStart(flushStartQueue)):(startSafely(et),raf(advance))},advance,sort(et){if(priority)raf.onFrame(()=>frameLoop.sort(et));else{const dt=currentFrame.indexOf(et);~dt&&(currentFrame.splice(dt,1),startUnsafely(et))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance)}function startSafely(et){currentFrame.includes(et)||startUnsafely(et)}function startUnsafely(et){currentFrame.splice(findIndex(currentFrame,dt=>dt.priority>et.priority),0,et)}function advance(et){const dt=prevFrame;for(let $t=0;$t<currentFrame.length;$t++){const kt=currentFrame[$t];priority=kt.priority,kt.idle||(willAdvance(kt),kt.advance(et),kt.idle||dt.push(kt))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=dt,currentFrame.length>0}function findIndex(et,dt){const $t=et.findIndex(dt);return $t<0?et.length:$t}var clamp=(et,dt,$t)=>Math.min(Math.max($t,et),dt),colors2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...et){return"\\(\\s*("+et.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb=new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba=new RegExp("rgba"+call(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor(et){let dt;return typeof et=="number"?et>>>0===et&&et>=0&&et<=4294967295?et:null:(dt=hex6.exec(et))?parseInt(dt[1]+"ff",16)>>>0:colors&&colors[et]!==void 0?colors[et]:(dt=rgb.exec(et))?(parse255(dt[1])<<24|parse255(dt[2])<<16|parse255(dt[3])<<8|255)>>>0:(dt=rgba.exec(et))?(parse255(dt[1])<<24|parse255(dt[2])<<16|parse255(dt[3])<<8|parse1(dt[4]))>>>0:(dt=hex3.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+"ff",16)>>>0:(dt=hex8.exec(et))?parseInt(dt[1],16)>>>0:(dt=hex4.exec(et))?parseInt(dt[1]+dt[1]+dt[2]+dt[2]+dt[3]+dt[3]+dt[4]+dt[4],16)>>>0:(dt=hsl.exec(et))?(hslToRgb(parse360(dt[1]),parsePercentage(dt[2]),parsePercentage(dt[3]))|255)>>>0:(dt=hsla.exec(et))?(hslToRgb(parse360(dt[1]),parsePercentage(dt[2]),parsePercentage(dt[3]))|parse1(dt[4]))>>>0:null}function hue2rgb(et,dt,$t){return $t<0&&($t+=1),$t>1&&($t-=1),$t<1/6?et+(dt-et)*6*$t:$t<1/2?dt:$t<2/3?et+(dt-et)*(2/3-$t)*6:et}function hslToRgb(et,dt,$t){const kt=$t<.5?$t*(1+dt):$t+dt-$t*dt,Tt=2*$t-kt,Dt=hue2rgb(Tt,kt,et+1/3),Ft=hue2rgb(Tt,kt,et),Ut=hue2rgb(Tt,kt,et-1/3);return Math.round(Dt*255)<<24|Math.round(Ft*255)<<16|Math.round(Ut*255)<<8}function parse255(et){const dt=parseInt(et,10);return dt<0?0:dt>255?255:dt}function parse360(et){return(parseFloat(et)%360+360)%360/360}function parse1(et){const dt=parseFloat(et);return dt<0?0:dt>1?255:Math.round(dt*255)}function parsePercentage(et){const dt=parseFloat(et);return dt<0?0:dt>100?1:dt/100}function colorToRgba(et){let dt=normalizeColor(et);if(dt===null)return et;dt=dt||0;const $t=(dt&4278190080)>>>24,kt=(dt&16711680)>>>16,Tt=(dt&65280)>>>8,Dt=(dt&255)/255;return`rgba(${$t}, ${kt}, ${Tt}, ${Dt})`}var createInterpolator=(et,dt,$t)=>{if(is.fun(et))return et;if(is.arr(et))return createInterpolator({range:et,output:dt,extrapolate:$t});if(is.str(et.output[0]))return createStringInterpolator(et);const kt=et,Tt=kt.output,Dt=kt.range||[0,1],Ft=kt.extrapolateLeft||kt.extrapolate||"extend",Ut=kt.extrapolateRight||kt.extrapolate||"extend",Ht=kt.easing||(Kt=>Kt);return Kt=>{const Yt=findRange(Kt,Dt);return interpolate(Kt,Dt[Yt],Dt[Yt+1],Tt[Yt],Tt[Yt+1],Ht,Ft,Ut,kt.map)}};function interpolate(et,dt,$t,kt,Tt,Dt,Ft,Ut,Ht){let Kt=Ht?Ht(et):et;if(Kt<dt){if(Ft==="identity")return Kt;Ft==="clamp"&&(Kt=dt)}if(Kt>$t){if(Ut==="identity")return Kt;Ut==="clamp"&&(Kt=$t)}return kt===Tt?kt:dt===$t?et<=dt?kt:Tt:(dt===-1/0?Kt=-Kt:$t===1/0?Kt=Kt-dt:Kt=(Kt-dt)/($t-dt),Kt=Dt(Kt),kt===-1/0?Kt=-Kt:Tt===1/0?Kt=Kt+kt:Kt=Kt*(Tt-kt)+kt,Kt)}function findRange(et,dt){for(var $t=1;$t<dt.length-1&&!(dt[$t]>=et);++$t);return $t-1}var steps=(et,dt="end")=>$t=>{$t=dt==="end"?Math.min($t,.999):Math.max($t,.001);const kt=$t*et,Tt=dt==="end"?Math.floor(kt):Math.ceil(kt);return clamp(0,1,Tt/et)},c1=1.70158,c2=c1*1.525,c3=c1+1,c4=2*Math.PI/3,c5=2*Math.PI/4.5,bounceOut=et=>et<1/2.75?7.5625*et*et:et<2/2.75?7.5625*(et-=1.5/2.75)*et+.75:et<2.5/2.75?7.5625*(et-=2.25/2.75)*et+.9375:7.5625*(et-=2.625/2.75)*et+.984375,easings={linear:et=>et,easeInQuad:et=>et*et,easeOutQuad:et=>1-(1-et)*(1-et),easeInOutQuad:et=>et<.5?2*et*et:1-Math.pow(-2*et+2,2)/2,easeInCubic:et=>et*et*et,easeOutCubic:et=>1-Math.pow(1-et,3),easeInOutCubic:et=>et<.5?4*et*et*et:1-Math.pow(-2*et+2,3)/2,easeInQuart:et=>et*et*et*et,easeOutQuart:et=>1-Math.pow(1-et,4),easeInOutQuart:et=>et<.5?8*et*et*et*et:1-Math.pow(-2*et+2,4)/2,easeInQuint:et=>et*et*et*et*et,easeOutQuint:et=>1-Math.pow(1-et,5),easeInOutQuint:et=>et<.5?16*et*et*et*et*et:1-Math.pow(-2*et+2,5)/2,easeInSine:et=>1-Math.cos(et*Math.PI/2),easeOutSine:et=>Math.sin(et*Math.PI/2),easeInOutSine:et=>-(Math.cos(Math.PI*et)-1)/2,easeInExpo:et=>et===0?0:Math.pow(2,10*et-10),easeOutExpo:et=>et===1?1:1-Math.pow(2,-10*et),easeInOutExpo:et=>et===0?0:et===1?1:et<.5?Math.pow(2,20*et-10)/2:(2-Math.pow(2,-20*et+10))/2,easeInCirc:et=>1-Math.sqrt(1-Math.pow(et,2)),easeOutCirc:et=>Math.sqrt(1-Math.pow(et-1,2)),easeInOutCirc:et=>et<.5?(1-Math.sqrt(1-Math.pow(2*et,2)))/2:(Math.sqrt(1-Math.pow(-2*et+2,2))+1)/2,easeInBack:et=>c3*et*et*et-c1*et*et,easeOutBack:et=>1+c3*Math.pow(et-1,3)+c1*Math.pow(et-1,2),easeInOutBack:et=>et<.5?Math.pow(2*et,2)*((c2+1)*2*et-c2)/2:(Math.pow(2*et-2,2)*((c2+1)*(et*2-2)+c2)+2)/2,easeInElastic:et=>et===0?0:et===1?1:-Math.pow(2,10*et-10)*Math.sin((et*10-10.75)*c4),easeOutElastic:et=>et===0?0:et===1?1:Math.pow(2,-10*et)*Math.sin((et*10-.75)*c4)+1,easeInOutElastic:et=>et===0?0:et===1?1:et<.5?-(Math.pow(2,20*et-10)*Math.sin((20*et-11.125)*c5))/2:Math.pow(2,-20*et+10)*Math.sin((20*et-11.125)*c5)/2+1,easeInBounce:et=>1-bounceOut(1-et),easeOutBounce:bounceOut,easeInOutBounce:et=>et<.5?(1-bounceOut(1-2*et))/2:(1+bounceOut(2*et-1))/2,steps},$get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=et=>!!(et&&et[$get]),getFluidValue=et=>et&&et[$get]?et[$get]():et,getFluidObservers=et=>et[$observers]||null;function callFluidObserver(et,dt){et.eventObserved?et.eventObserved(dt):et(dt)}function callFluidObservers(et,dt){const $t=et[$observers];$t&&$t.forEach(kt=>{callFluidObserver(kt,dt)})}var FluidValue=class{constructor(et){if(!et&&!(et=this.get))throw Error("Unknown getter");setFluidGetter(this,et)}},setFluidGetter=(et,dt)=>setHidden(et,$get,dt);function addFluidObserver(et,dt){if(et[$get]){let $t=et[$observers];$t||setHidden(et,$observers,$t=new Set),$t.has(dt)||($t.add(dt),et.observerAdded&&et.observerAdded($t.size,dt))}return dt}function removeFluidObserver(et,dt){const $t=et[$observers];if($t&&$t.has(dt)){const kt=$t.size-1;kt?$t.delete(dt):et[$observers]=null,et.observerRemoved&&et.observerRemoved(kt,dt)}}var setHidden=(et,dt,$t)=>Object.defineProperty(et,dt,{value:$t,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=et=>{const[dt,$t]=parseCSSVariable(et);if(!dt||isSSR())return et;const kt=window.getComputedStyle(document.documentElement).getPropertyValue(dt);if(kt)return kt.trim();if($t&&$t.startsWith("--")){const Tt=window.getComputedStyle(document.documentElement).getPropertyValue($t);return Tt||et}else{if($t&&cssVariableRegex.test($t))return variableToRgba($t);if($t)return $t}return et},parseCSSVariable=et=>{const dt=cssVariableRegex.exec(et);if(!dt)return[,];const[,$t,kt]=dt;return[$t,kt]},namedColorRegex,rgbaRound=(et,dt,$t,kt,Tt)=>`rgba(${Math.round(dt)}, ${Math.round($t)}, ${Math.round(kt)}, ${Tt})`,createStringInterpolator2=et=>{namedColorRegex||(namedColorRegex=colors?new RegExp(`(${Object.keys(colors).join("|")})(?!\\w)`,"g"):/^\b$/);const dt=et.output.map(Dt=>getFluidValue(Dt).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),$t=dt.map(Dt=>Dt.match(numberRegex).map(Number)),Tt=$t[0].map((Dt,Ft)=>$t.map(Ut=>{if(!(Ft in Ut))throw Error('The arity of each "output" value must be equal');return Ut[Ft]})).map(Dt=>createInterpolator({...et,output:Dt}));return Dt=>{var Ht;const Ft=!unitRegex.test(dt[0])&&((Ht=dt.find(Kt=>unitRegex.test(Kt)))==null?void 0:Ht.replace(numberRegex,""));let Ut=0;return dt[0].replace(numberRegex,()=>`${Tt[Ut++](Dt)}${Ft||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=et=>{const dt=et;let $t=!1;if(typeof dt!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...kt)=>{$t||(dt(...kt),$t=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString(et){return is.str(et)&&(et[0]=="#"||/\d/.test(et)||!isSSR()&&cssVariableRegex.test(et)||et in(colors||{}))}var useIsomorphicLayoutEffect=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const et=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(et.current=!0,()=>{et.current=!1}),[]),et};function useForceUpdate(){const et=reactExports.useState()[1],dt=useIsMounted();return()=>{dt.current&&et(Math.random())}}var useOnce=et=>reactExports.useEffect(et,emptyDeps),emptyDeps=[];function usePrev(et){const dt=reactExports.useRef(void 0);return reactExports.useEffect(()=>{dt.current=et}),dt.current}var $node=Symbol.for("Animated:node"),isAnimated=et=>!!et&&et[$node]===et,getAnimated=et=>et&&et[$node],setAnimated=(et,dt)=>defineHidden(et,$node,dt),getPayload=et=>et&&et[$node]&&et[$node].getPayload(),Animated=class{constructor(){setAnimated(this,this)}getPayload(){return this.payload||[]}},AnimatedValue=class sC extends Animated{constructor(dt){super(),this._value=dt,this.done=!0,this.durationProgress=0,is.num(this._value)&&(this.lastPosition=this._value)}static create(dt){return new sC(dt)}getPayload(){return[this]}getValue(){return this._value}setValue(dt,$t){return is.num(dt)&&(this.lastPosition=dt,$t&&(dt=Math.round(dt/$t)*$t,this.done&&(this.lastPosition=dt))),this._value===dt?!1:(this._value=dt,!0)}reset(){const{done:dt}=this;this.done=!1,is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,dt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString=class nC extends AnimatedValue{constructor(dt){super(0),this._string=null,this._toString=createInterpolator({output:[dt,dt]})}static create(dt){return new nC(dt)}getValue(){const dt=this._string;return dt??(this._string=this._toString(this._value))}setValue(dt){if(is.str(dt)){if(dt==this._string)return!1;this._string=dt,this._value=1}else if(super.setValue(dt))this._string=null;else return!1;return!0}reset(dt){dt&&(this._toString=createInterpolator({output:[this.getValue(),dt]})),this._value=0,super.reset()}},TreeContext={dependencies:null},AnimatedObject=class extends Animated{constructor(et){super(),this.source=et,this.setValue(et)}getValue(et){const dt={};return eachProp(this.source,($t,kt)=>{isAnimated($t)?dt[kt]=$t.getValue(et):hasFluidValue($t)?dt[kt]=getFluidValue($t):et||(dt[kt]=$t)}),dt}setValue(et){this.source=et,this.payload=this._makePayload(et)}reset(){this.payload&&each(this.payload,et=>et.reset())}_makePayload(et){if(et){const dt=new Set;return eachProp(et,this._addToPayload,dt),Array.from(dt)}}_addToPayload(et){TreeContext.dependencies&&hasFluidValue(et)&&TreeContext.dependencies.add(et);const dt=getPayload(et);dt&&each(dt,$t=>this.add($t))}},AnimatedArray=class iC extends AnimatedObject{constructor(dt){super(dt)}static create(dt){return new iC(dt)}getValue(){return this.source.map(dt=>dt.getValue())}setValue(dt){const $t=this.getPayload();return dt.length==$t.length?$t.map((kt,Tt)=>kt.setValue(dt[Tt])).some(Boolean):(super.setValue(dt.map(makeAnimated)),!0)}};function makeAnimated(et){return(isAnimatedString(et)?AnimatedString:AnimatedValue).create(et)}function getAnimatedType(et){const dt=getAnimated(et);return dt?dt.constructor:is.arr(et)?AnimatedArray:isAnimatedString(et)?AnimatedString:AnimatedValue}var withAnimated=(et,dt)=>{const $t=!is.fun(et)||et.prototype&&et.prototype.isReactComponent;return reactExports.forwardRef((kt,Tt)=>{const Dt=reactExports.useRef(null),Ft=$t&&reactExports.useCallback(rr=>{Dt.current=updateRef(Tt,rr)},[Tt]),[Ut,Ht]=getAnimatedState(kt,dt),Kt=useForceUpdate(),Yt=()=>{const rr=Dt.current;if($t&&!rr)return;(rr?dt.applyAnimatedValues(rr,Ut.getValue(!0)):!1)===!1&&Kt()},Jt=new PropsObserver(Yt,Ht),Zt=reactExports.useRef(void 0);useIsomorphicLayoutEffect(()=>(Zt.current=Jt,each(Ht,rr=>addFluidObserver(rr,Jt)),()=>{Zt.current&&(each(Zt.current.deps,rr=>removeFluidObserver(rr,Zt.current)),raf.cancel(Zt.current.update))})),reactExports.useEffect(Yt,[]),useOnce(()=>()=>{const rr=Zt.current;each(rr.deps,sr=>removeFluidObserver(sr,rr))});const er=dt.getComponentProps(Ut.getValue());return reactExports.createElement(et,{...er,ref:Ft})})},PropsObserver=class{constructor(et,dt){this.update=et,this.deps=dt}eventObserved(et){et.type=="change"&&raf.write(this.update)}};function getAnimatedState(et,dt){const $t=new Set;return TreeContext.dependencies=$t,et.style&&(et={...et,style:dt.createAnimatedStyle(et.style)}),et=new AnimatedObject(et),TreeContext.dependencies=null,[et,$t]}function updateRef(et,dt){return et&&(is.fun(et)?et(dt):et.current=dt),dt}var cacheKey=Symbol.for("AnimatedComponent"),createHost=(et,{applyAnimatedValues:dt=()=>!1,createAnimatedStyle:$t=Tt=>new AnimatedObject(Tt),getComponentProps:kt=Tt=>Tt}={})=>{const Tt={applyAnimatedValues:dt,createAnimatedStyle:$t,getComponentProps:kt},Dt=Ft=>{const Ut=getDisplayName(Ft)||"Anonymous";return is.str(Ft)?Ft=Dt[Ft]||(Dt[Ft]=withAnimated(Ft,Tt)):Ft=Ft[cacheKey]||(Ft[cacheKey]=withAnimated(Ft,Tt)),Ft.displayName=`Animated(${Ut})`,Ft};return eachProp(et,(Ft,Ut)=>{is.arr(et)&&(Ut=getDisplayName(Ft)),Dt[Ut]=Dt(Ft)}),{animated:Dt}},getDisplayName=et=>is.str(et)?et:et&&is.str(et.displayName)?et.displayName:is.fun(et)&&et.name||null;function callProp(et,...dt){return is.fun(et)?et(...dt):et}var matchProp=(et,dt)=>et===!0||!!(dt&&et&&(is.fun(et)?et(dt):toArray(et).includes(dt))),resolveProp=(et,dt)=>is.obj(et)?dt&&et[dt]:et,getDefaultProp=(et,dt)=>et.default===!0?et[dt]:et.default?et.default[dt]:void 0,noopTransform=et=>et,getDefaultProps=(et,dt=noopTransform)=>{let $t=DEFAULT_PROPS;et.default&&et.default!==!0&&(et=et.default,$t=Object.keys(et));const kt={};for(const Tt of $t){const Dt=dt(et[Tt],Tt);is.und(Dt)||(kt[Tt]=Dt)}return kt},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps(et){const dt={};let $t=0;if(eachProp(et,(kt,Tt)=>{RESERVED_PROPS[Tt]||(dt[Tt]=kt,$t++)}),$t)return dt}function inferTo(et){const dt=getForwardProps(et);if(dt){const $t={to:dt};return eachProp(et,(kt,Tt)=>Tt in dt||($t[Tt]=kt)),$t}return{...et}}function computeGoal(et){return et=getFluidValue(et),is.arr(et)?et.map(computeGoal):isAnimatedString(et)?globals_exports.createStringInterpolator({range:[0,1],output:[et,et]})(1):et}function hasProps(et){for(const dt in et)return!0;return!1}function isAsyncTo(et){return is.fun(et)||is.arr(et)&&is.obj(et[0])}function detachRefs(et,dt){var $t;($t=et.ref)==null||$t.delete(et),dt==null||dt.delete(et)}function replaceRef(et,dt){var $t;dt&&et.ref!==dt&&(($t=et.ref)==null||$t.delete(et),dt.add(et),et.ref=dt)}var config={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults={...config.default,mass:1,damping:1,easing:easings.linear,clamp:!1},AnimationConfig=class{constructor(){this.velocity=0,Object.assign(this,defaults)}};function mergeConfig(et,dt,$t){$t&&($t={...$t},sanitizeConfig($t,dt),dt={...$t,...dt}),sanitizeConfig(et,dt),Object.assign(et,dt);for(const Ft in defaults)et[Ft]==null&&(et[Ft]=defaults[Ft]);let{frequency:kt,damping:Tt}=et;const{mass:Dt}=et;return is.und(kt)||(kt<.01&&(kt=.01),Tt<0&&(Tt=0),et.tension=Math.pow(2*Math.PI/kt,2)*Dt,et.friction=4*Math.PI*Tt*Dt/kt),et}function sanitizeConfig(et,dt){if(!is.und(dt.decay))et.duration=void 0;else{const $t=!is.und(dt.tension)||!is.und(dt.friction);($t||!is.und(dt.frequency)||!is.und(dt.damping)||!is.und(dt.mass))&&(et.duration=void 0,et.decay=void 0),$t&&(et.frequency=void 0)}}var emptyArray=[],Animation=class{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.config=new AnimationConfig,this.immediate=!1}};function scheduleProps(et,{key:dt,props:$t,defaultProps:kt,state:Tt,actions:Dt}){return new Promise((Ft,Ut)=>{let Ht,Kt,Yt=matchProp($t.cancel??(kt==null?void 0:kt.cancel),dt);if(Yt)er();else{is.und($t.pause)||(Tt.paused=matchProp($t.pause,dt));let rr=kt==null?void 0:kt.pause;rr!==!0&&(rr=Tt.paused||matchProp(rr,dt)),Ht=callProp($t.delay||0,dt),rr?(Tt.resumeQueue.add(Zt),Dt.pause()):(Dt.resume(),Zt())}function Jt(){Tt.resumeQueue.add(Zt),Tt.timeouts.delete(Kt),Kt.cancel(),Ht=Kt.time-raf.now()}function Zt(){Ht>0&&!globals_exports.skipAnimation?(Tt.delayed=!0,Kt=raf.setTimeout(er,Ht),Tt.pauseQueue.add(Jt),Tt.timeouts.add(Kt)):er()}function er(){Tt.delayed&&(Tt.delayed=!1),Tt.pauseQueue.delete(Jt),Tt.timeouts.delete(Kt),et<=(Tt.cancelId||0)&&(Yt=!0);try{Dt.start({...$t,callId:et,cancel:Yt},Ft)}catch(rr){Ut(rr)}}})}var getCombinedResult=(et,dt)=>dt.length==1?dt[0]:dt.some($t=>$t.cancelled)?getCancelledResult(et.get()):dt.every($t=>$t.noop)?getNoopResult(et.get()):getFinishedResult(et.get(),dt.every($t=>$t.finished)),getNoopResult=et=>({value:et,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=(et,dt,$t=!1)=>({value:et,finished:dt,cancelled:$t}),getCancelledResult=et=>({value:et,cancelled:!0,finished:!1});function runAsync(et,dt,$t,kt){const{callId:Tt,parentId:Dt,onRest:Ft}=dt,{asyncTo:Ut,promise:Ht}=$t;return!Dt&&et===Ut&&!dt.reset?Ht:$t.promise=(async()=>{$t.asyncId=Tt,$t.asyncTo=et;const Kt=getDefaultProps(dt,(nr,ir)=>ir==="onRest"?void 0:nr);let Yt,Jt;const Zt=new Promise((nr,ir)=>(Yt=nr,Jt=ir)),er=nr=>{const ir=Tt<=($t.cancelId||0)&&getCancelledResult(kt)||Tt!==$t.asyncId&&getFinishedResult(kt,!1);if(ir)throw nr.result=ir,Jt(nr),nr},rr=(nr,ir)=>{const or=new BailSignal,lr=new SkipAnimationSignal;return(async()=>{if(globals_exports.skipAnimation)throw stopAsync($t),lr.result=getFinishedResult(kt,!1),Jt(lr),lr;er(or);const cr=is.obj(nr)?{...nr}:{...ir,to:nr};cr.parentId=Tt,eachProp(Kt,(ur,pr)=>{is.und(cr[pr])&&(cr[pr]=ur)});const dr=await kt.start(cr);return er(or),$t.paused&&await new Promise(ur=>{$t.resumeQueue.add(ur)}),dr})()};let sr;if(globals_exports.skipAnimation)return stopAsync($t),getFinishedResult(kt,!1);try{let nr;is.arr(et)?nr=(async ir=>{for(const or of ir)await rr(or)})(et):nr=Promise.resolve(et(rr,kt.stop.bind(kt))),await Promise.all([nr.then(Yt),Zt]),sr=getFinishedResult(kt.get(),!0,!1)}catch(nr){if(nr instanceof BailSignal)sr=nr.result;else if(nr instanceof SkipAnimationSignal)sr=nr.result;else throw nr}finally{Tt==$t.asyncId&&($t.asyncId=Dt,$t.asyncTo=Dt?Ut:void 0,$t.promise=Dt?Ht:void 0)}return is.fun(Ft)&&raf.batchedUpdates(()=>{Ft(sr,kt,kt.item)}),sr})()}function stopAsync(et,dt){flush(et.timeouts,$t=>$t.cancel()),et.pauseQueue.clear(),et.resumeQueue.clear(),et.asyncId=et.asyncTo=et.promise=void 0,dt&&(et.cancelId=dt)}var BailSignal=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue=et=>et instanceof FrameValue,nextId=1,FrameValue=class extends FluidValue{constructor(){super(...arguments),this.id=nextId++,this._priority=0}get priority(){return this._priority}set priority(et){this._priority!=et&&(this._priority=et,this._onPriorityChange(et))}get(){const et=getAnimated(this);return et&&et.getValue()}to(...et){return globals_exports.to(this,et)}interpolate(...et){return deprecateInterpolate(),globals_exports.to(this,et)}toJSON(){return this.get()}observerAdded(et){et==1&&this._attach()}observerRemoved(et){et==0&&this._detach()}_attach(){}_detach(){}_onChange(et,dt=!1){callFluidObservers(this,{type:"change",parent:this,value:et,idle:dt})}_onPriorityChange(et){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:et})}},$P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=et=>(et[$P]&HAS_ANIMATED)>0,isAnimating=et=>(et[$P]&IS_ANIMATING)>0,isPaused=et=>(et[$P]&IS_PAUSED)>0,setActiveBit=(et,dt)=>dt?et[$P]|=IS_ANIMATING|HAS_ANIMATED:et[$P]&=~IS_ANIMATING,setPausedBit=(et,dt)=>dt?et[$P]|=IS_PAUSED:et[$P]&=~IS_PAUSED,SpringValue=class extends FrameValue{constructor(et,dt){if(super(),this.animation=new Animation,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is.und(et)||!is.und(dt)){const $t=is.obj(et)?{...et}:{...dt,from:et};is.und($t.default)&&($t.default=!0),this.start($t)}}get idle(){return!(isAnimating(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const et=getAnimated(this);return et instanceof AnimatedValue?et.lastVelocity||0:et.getPayload().map(dt=>dt.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance(et){let dt=!0,$t=!1;const kt=this.animation;let{toValues:Tt}=kt;const{config:Dt}=kt,Ft=getPayload(kt.to);!Ft&&hasFluidValue(kt.to)&&(Tt=toArray(getFluidValue(kt.to))),kt.values.forEach((Kt,Yt)=>{if(Kt.done)return;const Jt=Kt.constructor==AnimatedString?1:Ft?Ft[Yt].lastPosition:Tt[Yt];let Zt=kt.immediate,er=Jt;if(!Zt){if(er=Kt.lastPosition,Dt.tension<=0){Kt.done=!0;return}let rr=Kt.elapsedTime+=et;const sr=kt.fromValues[Yt],nr=Kt.v0!=null?Kt.v0:Kt.v0=is.arr(Dt.velocity)?Dt.velocity[Yt]:Dt.velocity;let ir;const or=Dt.precision||(sr==Jt?.005:Math.min(1,Math.abs(Jt-sr)*.001));if(is.und(Dt.duration))if(Dt.decay){const lr=Dt.decay===!0?.998:Dt.decay,cr=Math.exp(-(1-lr)*rr);er=sr+nr/(1-lr)*(1-cr),Zt=Math.abs(Kt.lastPosition-er)<=or,ir=nr*cr}else{ir=Kt.lastVelocity==null?nr:Kt.lastVelocity;const lr=Dt.restVelocity||or/10,cr=Dt.clamp?0:Dt.bounce,dr=!is.und(cr),ur=sr==Jt?Kt.v0>0:sr<Jt;let pr,mr=!1;const jr=1,Rr=Math.ceil(et/jr);for(let xr=0;xr<Rr&&(pr=Math.abs(ir)>lr,!(!pr&&(Zt=Math.abs(Jt-er)<=or,Zt)));++xr){dr&&(mr=er==Jt||er>Jt==ur,mr&&(ir=-ir*cr,er=Jt));const kr=-Dt.tension*1e-6*(er-Jt),Mr=-Dt.friction*.001*ir,Tr=(kr+Mr)/Dt.mass;ir=ir+Tr*jr,er=er+ir*jr}}else{let lr=1;Dt.duration>0&&(this._memoizedDuration!==Dt.duration&&(this._memoizedDuration=Dt.duration,Kt.durationProgress>0&&(Kt.elapsedTime=Dt.duration*Kt.durationProgress,rr=Kt.elapsedTime+=et)),lr=(Dt.progress||0)+rr/this._memoizedDuration,lr=lr>1?1:lr<0?0:lr,Kt.durationProgress=lr),er=sr+Dt.easing(lr)*(Jt-sr),ir=(er-Kt.lastPosition)/et,Zt=lr==1}Kt.lastVelocity=ir,Number.isNaN(er)&&(console.warn("Got NaN while animating:",this),Zt=!0)}Ft&&!Ft[Yt].done&&(Zt=!1),Zt?Kt.done=!0:dt=!1,Kt.setValue(er,Dt.round)&&($t=!0)});const Ut=getAnimated(this),Ht=Ut.getValue();if(dt){const Kt=getFluidValue(kt.to);(Ht!==Kt||$t)&&!Dt.decay?(Ut.setValue(Kt),this._onChange(Kt)):$t&&Dt.decay&&this._onChange(Ht),this._stop()}else $t&&this._onChange(Ht)}set(et){return raf.batchedUpdates(()=>{this._stop(),this._focus(et),this._set(et)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating(this)){const{to:et,config:dt}=this.animation;raf.batchedUpdates(()=>{this._onStart(),dt.decay||this._set(et,!1),this._stop()})}return this}update(et){return(this.queue||(this.queue=[])).push(et),this}start(et,dt){let $t;return is.und(et)?($t=this.queue||[],this.queue=[]):$t=[is.obj(et)?et:{...dt,to:et}],Promise.all($t.map(kt=>this._update(kt))).then(kt=>getCombinedResult(this,kt))}stop(et){const{to:dt}=this.animation;return this._focus(this.get()),stopAsync(this._state,et&&this._lastCallId),raf.batchedUpdates(()=>this._stop(dt,et)),this}reset(){this._update({reset:!0})}eventObserved(et){et.type=="change"?this._start():et.type=="priority"&&(this.priority=et.priority+1)}_prepareNode(et){const dt=this.key||"";let{to:$t,from:kt}=et;$t=is.obj($t)?$t[dt]:$t,($t==null||isAsyncTo($t))&&($t=void 0),kt=is.obj(kt)?kt[dt]:kt,kt==null&&(kt=void 0);const Tt={to:$t,from:kt};return hasAnimated(this)||(et.reverse&&([$t,kt]=[kt,$t]),kt=getFluidValue(kt),is.und(kt)?getAnimated(this)||this._set($t):this._set(kt)),Tt}_update({...et},dt){const{key:$t,defaultProps:kt}=this;et.default&&Object.assign(kt,getDefaultProps(et,(Ft,Ut)=>/^on/.test(Ut)?resolveProp(Ft,$t):Ft)),mergeActiveFn(this,et,"onProps"),sendEvent(this,"onProps",et,this);const Tt=this._prepareNode(et);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const Dt=this._state;return scheduleProps(++this._lastCallId,{key:$t,props:et,defaultProps:kt,state:Dt,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(Dt.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating(this)&&this._resume(),flushCalls(Dt.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,Tt)}}).then(Ft=>{if(et.loop&&Ft.finished&&!(dt&&Ft.noop)){const Ut=createLoopUpdate(et);if(Ut)return this._update(Ut,!0)}return Ft})}_merge(et,dt,$t){if(dt.cancel)return this.stop(!0),$t(getCancelledResult(this));const kt=!is.und(et.to),Tt=!is.und(et.from);if(kt||Tt)if(dt.callId>this._lastToId)this._lastToId=dt.callId;else return $t(getCancelledResult(this));const{key:Dt,defaultProps:Ft,animation:Ut}=this,{to:Ht,from:Kt}=Ut;let{to:Yt=Ht,from:Jt=Kt}=et;Tt&&!kt&&(!dt.default||is.und(Yt))&&(Yt=Jt),dt.reverse&&([Yt,Jt]=[Jt,Yt]);const Zt=!isEqual(Jt,Kt);Zt&&(Ut.from=Jt),Jt=getFluidValue(Jt);const er=!isEqual(Yt,Ht);er&&this._focus(Yt);const rr=isAsyncTo(dt.to),{config:sr}=Ut,{decay:nr,velocity:ir}=sr;(kt||Tt)&&(sr.velocity=0),dt.config&&!rr&&mergeConfig(sr,callProp(dt.config,Dt),dt.config!==Ft.config?callProp(Ft.config,Dt):void 0);let or=getAnimated(this);if(!or||is.und(Yt))return $t(getFinishedResult(this,!0));const lr=is.und(dt.reset)?Tt&&!dt.default:!is.und(Jt)&&matchProp(dt.reset,Dt),cr=lr?Jt:this.get(),dr=computeGoal(Yt),ur=is.num(dr)||is.arr(dr)||isAnimatedString(dr),pr=!rr&&(!ur||matchProp(Ft.immediate||dt.immediate,Dt));if(er){const xr=getAnimatedType(Yt);if(xr!==or.constructor)if(pr)or=this._set(dr);else throw Error(`Cannot animate between ${or.constructor.name} and ${xr.name}, as the "to" prop suggests`)}const mr=or.constructor;let jr=hasFluidValue(Yt),Rr=!1;if(!jr){const xr=lr||!hasAnimated(this)&&Zt;(er||xr)&&(Rr=isEqual(computeGoal(cr),dr),jr=!Rr),(!isEqual(Ut.immediate,pr)&&!pr||!isEqual(sr.decay,nr)||!isEqual(sr.velocity,ir))&&(jr=!0)}if(Rr&&isAnimating(this)&&(Ut.changed&&!lr?jr=!0:jr||this._stop(Ht)),!rr&&((jr||hasFluidValue(Ht))&&(Ut.values=or.getPayload(),Ut.toValues=hasFluidValue(Yt)?null:mr==AnimatedString?[1]:toArray(dr)),Ut.immediate!=pr&&(Ut.immediate=pr,!pr&&!lr&&this._set(Ht)),jr)){const{onRest:xr}=Ut;each(ACTIVE_EVENTS,Mr=>mergeActiveFn(this,dt,Mr));const kr=getFinishedResult(this,checkFinished(this,Ht));flushCalls(this._pendingCalls,kr),this._pendingCalls.add($t),Ut.changed&&raf.batchedUpdates(()=>{var Mr;Ut.changed=!lr,xr==null||xr(kr,this),lr?callProp(Ft.onRest,kr):(Mr=Ut.onStart)==null||Mr.call(Ut,kr,this)})}lr&&this._set(cr),rr?$t(runAsync(dt.to,dt,this._state,this)):jr?this._start():isAnimating(this)&&!er?this._pendingCalls.add($t):$t(getNoopResult(cr))}_focus(et){const dt=this.animation;et!==dt.to&&(getFluidObservers(this)&&this._detach(),dt.to=et,getFluidObservers(this)&&this._attach())}_attach(){let et=0;const{to:dt}=this.animation;hasFluidValue(dt)&&(addFluidObserver(dt,this),isFrameValue(dt)&&(et=dt.priority+1)),this.priority=et}_detach(){const{to:et}=this.animation;hasFluidValue(et)&&removeFluidObserver(et,this)}_set(et,dt=!0){const $t=getFluidValue(et);if(!is.und($t)){const kt=getAnimated(this);if(!kt||!isEqual($t,kt.getValue())){const Tt=getAnimatedType($t);!kt||kt.constructor!=Tt?setAnimated(this,Tt.create($t)):kt.setValue($t),kt&&raf.batchedUpdates(()=>{this._onChange($t,dt)})}}return getAnimated(this)}_onStart(){const et=this.animation;et.changed||(et.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,et.to)),this))}_onChange(et,dt){dt||(this._onStart(),callProp(this.animation.onChange,et,this)),callProp(this.defaultProps.onChange,et,this),super._onChange(et,dt)}_start(){const et=this.animation;getAnimated(this).reset(getFluidValue(et.to)),et.immediate||(et.fromValues=et.values.map(dt=>dt.lastPosition)),isAnimating(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals_exports.skipAnimation?this.finish():frameLoop.start(this)}_stop(et,dt){if(isAnimating(this)){setActiveBit(this,!1);const $t=this.animation;each($t.values,Tt=>{Tt.done=!0}),$t.toValues&&($t.onChange=$t.onPause=$t.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const kt=dt?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,et??$t.to));flushCalls(this._pendingCalls,kt),$t.changed&&($t.changed=!1,sendEvent(this,"onRest",kt,this))}}};function checkFinished(et,dt){const $t=computeGoal(dt),kt=computeGoal(et.get());return isEqual(kt,$t)}function createLoopUpdate(et,dt=et.loop,$t=et.to){const kt=callProp(dt);if(kt){const Tt=kt!==!0&&inferTo(kt),Dt=(Tt||et).reverse,Ft=!Tt||Tt.reset;return createUpdate({...et,loop:dt,default:!1,pause:void 0,to:!Dt||isAsyncTo($t)?$t:void 0,from:Ft?et.from:void 0,reset:Ft,...Tt})}}function createUpdate(et){const{to:dt,from:$t}=et=inferTo(et),kt=new Set;return is.obj(dt)&&findDefined(dt,kt),is.obj($t)&&findDefined($t,kt),et.keys=kt.size?Array.from(kt):null,et}function declareUpdate(et){const dt=createUpdate(et);return is.und(dt.default)&&(dt.default=getDefaultProps(dt)),dt}function findDefined(et,dt){eachProp(et,($t,kt)=>$t!=null&&dt.add(kt))}var ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn(et,dt,$t){et.animation[$t]=dt[$t]!==getDefaultProp(dt,$t)?resolveProp(dt[$t],et.key):void 0}function sendEvent(et,dt,...$t){var kt,Tt,Dt,Ft;(Tt=(kt=et.animation)[dt])==null||Tt.call(kt,...$t),(Ft=(Dt=et.defaultProps)[dt])==null||Ft.call(Dt,...$t)}var BATCHED_EVENTS=["onStart","onChange","onRest"],nextId2=1,Controller=class{constructor(et,dt){this.id=nextId2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),dt&&(this._flush=dt),et&&this.start({default:!0,...et})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(et=>et.idle&&!et.isDelayed&&!et.isPaused)}get item(){return this._item}set item(et){this._item=et}get(){const et={};return this.each((dt,$t)=>et[$t]=dt.get()),et}set(et){for(const dt in et){const $t=et[dt];is.und($t)||this.springs[dt].set($t)}}update(et){return et&&this.queue.push(createUpdate(et)),this}start(et){let{queue:dt}=this;return et?dt=toArray(et).map(createUpdate):this.queue=[],this._flush?this._flush(this,dt):(prepareKeys(this,dt),flushUpdateQueue(this,dt))}stop(et,dt){if(et!==!!et&&(dt=et),dt){const $t=this.springs;each(toArray(dt),kt=>$t[kt].stop(!!et))}else stopAsync(this._state,this._lastAsyncId),this.each($t=>$t.stop(!!et));return this}pause(et){if(is.und(et))this.start({pause:!0});else{const dt=this.springs;each(toArray(et),$t=>dt[$t].pause())}return this}resume(et){if(is.und(et))this.start({pause:!1});else{const dt=this.springs;each(toArray(et),$t=>dt[$t].resume())}return this}each(et){eachProp(this.springs,et)}_onFrame(){const{onStart:et,onChange:dt,onRest:$t}=this._events,kt=this._active.size>0,Tt=this._changed.size>0;(kt&&!this._started||Tt&&!this._started)&&(this._started=!0,flush(et,([Ut,Ht])=>{Ht.value=this.get(),Ut(Ht,this,this._item)}));const Dt=!kt&&this._started,Ft=Tt||Dt&&$t.size?this.get():null;Tt&&dt.size&&flush(dt,([Ut,Ht])=>{Ht.value=Ft,Ut(Ht,this,this._item)}),Dt&&(this._started=!1,flush($t,([Ut,Ht])=>{Ht.value=Ft,Ut(Ht,this,this._item)}))}eventObserved(et){if(et.type=="change")this._changed.add(et.parent),et.idle||this._active.add(et.parent);else if(et.type=="idle")this._active.delete(et.parent);else return;raf.onFrame(this._onFrame)}};function flushUpdateQueue(et,dt){return Promise.all(dt.map($t=>flushUpdate(et,$t))).then($t=>getCombinedResult(et,$t))}async function flushUpdate(et,dt,$t){const{keys:kt,to:Tt,from:Dt,loop:Ft,onRest:Ut,onResolve:Ht}=dt,Kt=is.obj(dt.default)&&dt.default;Ft&&(dt.loop=!1),Tt===!1&&(dt.to=null),Dt===!1&&(dt.from=null);const Yt=is.arr(Tt)||is.fun(Tt)?Tt:void 0;Yt?(dt.to=void 0,dt.onRest=void 0,Kt&&(Kt.onRest=void 0)):each(BATCHED_EVENTS,sr=>{const nr=dt[sr];if(is.fun(nr)){const ir=et._events[sr];dt[sr]=({finished:or,cancelled:lr})=>{const cr=ir.get(nr);cr?(or||(cr.finished=!1),lr&&(cr.cancelled=!0)):ir.set(nr,{value:null,finished:or||!1,cancelled:lr||!1})},Kt&&(Kt[sr]=dt[sr])}});const Jt=et._state;dt.pause===!Jt.paused?(Jt.paused=dt.pause,flushCalls(dt.pause?Jt.pauseQueue:Jt.resumeQueue)):Jt.paused&&(dt.pause=!0);const Zt=(kt||Object.keys(et.springs)).map(sr=>et.springs[sr].start(dt)),er=dt.cancel===!0||getDefaultProp(dt,"cancel")===!0;(Yt||er&&Jt.asyncId)&&Zt.push(scheduleProps(++et._lastAsyncId,{props:dt,state:Jt,actions:{pause:noop,resume:noop,start(sr,nr){er?(stopAsync(Jt,et._lastAsyncId),nr(getCancelledResult(et))):(sr.onRest=Ut,nr(runAsync(Yt,sr,Jt,et)))}}})),Jt.paused&&await new Promise(sr=>{Jt.resumeQueue.add(sr)});const rr=getCombinedResult(et,await Promise.all(Zt));if(Ft&&rr.finished&&!($t&&rr.noop)){const sr=createLoopUpdate(dt,Ft,Tt);if(sr)return prepareKeys(et,[sr]),flushUpdate(et,sr,!0)}return Ht&&raf.batchedUpdates(()=>Ht(rr,et,et.item)),rr}function getSprings(et,dt){const $t={...et.springs};return dt&&each(toArray(dt),kt=>{is.und(kt.keys)&&(kt=createUpdate(kt)),is.obj(kt.to)||(kt={...kt,to:void 0}),prepareSprings($t,kt,Tt=>createSpring(Tt))}),setSprings(et,$t),$t}function setSprings(et,dt){eachProp(dt,($t,kt)=>{et.springs[kt]||(et.springs[kt]=$t,addFluidObserver($t,et))})}function createSpring(et,dt){const $t=new SpringValue;return $t.key=et,dt&&addFluidObserver($t,dt),$t}function prepareSprings(et,dt,$t){dt.keys&&each(dt.keys,kt=>{(et[kt]||(et[kt]=$t(kt)))._prepareNode(dt)})}function prepareKeys(et,dt){each(dt,$t=>{prepareSprings(et.springs,$t,kt=>createSpring(kt,et))})}var SpringContext=reactExports.createContext({pause:!1,immediate:!1}),SpringRef=()=>{const et=[],dt=function(kt){deprecateDirectCall();const Tt=[];return each(et,(Dt,Ft)=>{if(is.und(kt))Tt.push(Dt.start());else{const Ut=$t(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt};dt.current=et,dt.add=function(kt){et.includes(kt)||et.push(kt)},dt.delete=function(kt){const Tt=et.indexOf(kt);~Tt&&et.splice(Tt,1)},dt.pause=function(){return each(et,kt=>kt.pause(...arguments)),this},dt.resume=function(){return each(et,kt=>kt.resume(...arguments)),this},dt.set=function(kt){each(et,(Tt,Dt)=>{const Ft=is.fun(kt)?kt(Dt,Tt):kt;Ft&&Tt.set(Ft)})},dt.start=function(kt){const Tt=[];return each(et,(Dt,Ft)=>{if(is.und(kt))Tt.push(Dt.start());else{const Ut=this._getProps(kt,Dt,Ft);Ut&&Tt.push(Dt.start(Ut))}}),Tt},dt.stop=function(){return each(et,kt=>kt.stop(...arguments)),this},dt.update=function(kt){return each(et,(Tt,Dt)=>Tt.update(this._getProps(kt,Tt,Dt))),this};const $t=function(kt,Tt,Dt){return is.fun(kt)?kt(Dt,Tt):kt};return dt._getProps=$t,dt};function useSprings(et,dt,$t){const kt=is.fun(dt)&&dt;kt&&!$t&&($t=[]);const Tt=reactExports.useMemo(()=>kt||arguments.length==3?SpringRef():void 0,[]),Dt=reactExports.useRef(0),Ft=useForceUpdate(),Ut=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(ir,or){const lr=getSprings(ir,or);return Dt.current>0&&!Ut.queue.length&&!Object.keys(lr).some(dr=>!ir.springs[dr])?flushUpdateQueue(ir,or):new Promise(dr=>{setSprings(ir,lr),Ut.queue.push(()=>{dr(flushUpdateQueue(ir,or))}),Ft()})}}),[]),Ht=reactExports.useRef([...Ut.ctrls]),Kt=reactExports.useRef([]),Yt=usePrev(et)||0;reactExports.useMemo(()=>{each(Ht.current.slice(et,Yt),ir=>{detachRefs(ir,Tt),ir.stop(!0)}),Ht.current.length=et,Jt(Yt,et)},[et]),reactExports.useMemo(()=>{Jt(0,Math.min(Yt,et))},$t);function Jt(ir,or){for(let lr=ir;lr<or;lr++){const cr=Ht.current[lr]||(Ht.current[lr]=new Controller(null,Ut.flush)),dr=kt?kt(lr,cr):dt[lr];dr&&(Kt.current[lr]=declareUpdate(dr))}}const Zt=Ht.current.map((ir,or)=>getSprings(ir,Kt.current[or])),er=reactExports.useContext(SpringContext),rr=usePrev(er),sr=er!==rr&&hasProps(er);useIsomorphicLayoutEffect(()=>{Dt.current++,Ut.ctrls=Ht.current;const{queue:ir}=Ut;ir.length&&(Ut.queue=[],each(ir,or=>or())),each(Ht.current,(or,lr)=>{Tt==null||Tt.add(or),sr&&or.start({default:er});const cr=Kt.current[lr];cr&&(replaceRef(or,cr.ref),or.ref?or.queue.push(cr):or.start(cr))})}),useOnce(()=>()=>{each(Ut.ctrls,ir=>ir.stop(!0))});const nr=Zt.map(ir=>({...ir}));return Tt?[nr,Tt]:nr}function useSpring(et,dt){const $t=is.fun(et),[[kt],Tt]=useSprings(1,$t?et:[et],$t?dt||[]:dt);return $t||arguments.length==2?[kt,Tt]:kt}var Interpolation=class extends FrameValue{constructor(et,dt){super(),this.source=et,this.idle=!0,this._active=new Set,this.calc=createInterpolator(...dt);const $t=this._get(),kt=getAnimatedType($t);setAnimated(this,kt.create($t))}advance(et){const dt=this._get(),$t=this.get();isEqual(dt,$t)||(getAnimated(this).setValue(dt),this._onChange(dt,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const et=is.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(...et)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),et=>{et.done=!1}),globals_exports.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let et=1;each(toArray(this.source),dt=>{hasFluidValue(dt)&&addFluidObserver(dt,this),isFrameValue(dt)&&(dt.idle||this._active.add(dt),et=Math.max(et,dt.priority+1))}),this.priority=et,this._start()}_detach(){each(toArray(this.source),et=>{hasFluidValue(et)&&removeFluidObserver(et,this)}),this._active.clear(),becomeIdle(this)}eventObserved(et){et.type=="change"?et.idle?this.advance():(this._active.add(et.parent),this._start()):et.type=="idle"?this._active.delete(et.parent):et.type=="priority"&&(this.priority=toArray(this.source).reduce((dt,$t)=>Math.max(dt,(isFrameValue($t)?$t.priority:0)+1),0))}};function isIdle(et){return et.idle!==!1}function checkIdle(et){return!et.size||Array.from(et).every(isIdle)}function becomeIdle(et){et.idle||(et.idle=!0,each(getPayload(et),dt=>{dt.done=!0}),callFluidObservers(et,{type:"idle",parent:et}))}globals_exports.assign({createStringInterpolator:createStringInterpolator2,to:(et,dt)=>new Interpolation(et,dt)});var isCustomPropRE=/^--/;function dangerousStyleValue(et,dt){return dt==null||typeof dt=="boolean"||dt===""?"":typeof dt=="number"&&dt!==0&&!isCustomPropRE.test(et)&&!(isUnitlessNumber.hasOwnProperty(et)&&isUnitlessNumber[et])?dt+"px":(""+dt).trim()}var attributeCache={};function applyAnimatedValues(et,dt){if(!et.nodeType||!et.setAttribute)return!1;const $t=et.nodeName==="filter"||et.parentNode&&et.parentNode.nodeName==="filter",{className:kt,style:Tt,children:Dt,scrollTop:Ft,scrollLeft:Ut,viewBox:Ht,...Kt}=dt,Yt=Object.values(Kt),Jt=Object.keys(Kt).map(Zt=>$t||et.hasAttribute(Zt)?Zt:attributeCache[Zt]||(attributeCache[Zt]=Zt.replace(/([A-Z])/g,er=>"-"+er.toLowerCase())));Dt!==void 0&&(et.textContent=Dt);for(const Zt in Tt)if(Tt.hasOwnProperty(Zt)){const er=dangerousStyleValue(Zt,Tt[Zt]);isCustomPropRE.test(Zt)?et.style.setProperty(Zt,er):et.style[Zt]=er}Jt.forEach((Zt,er)=>{et.setAttribute(Zt,Yt[er])}),kt!==void 0&&(et.className=kt),Ft!==void 0&&(et.scrollTop=Ft),Ut!==void 0&&(et.scrollLeft=Ut),Ht!==void 0&&et.setAttribute("viewBox",Ht)}var isUnitlessNumber={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey=(et,dt)=>et+dt.charAt(0).toUpperCase()+dt.substring(1),prefixes=["Webkit","Ms","Moz","O"];isUnitlessNumber=Object.keys(isUnitlessNumber).reduce((et,dt)=>(prefixes.forEach($t=>et[prefixKey($t,dt)]=et[dt]),et),isUnitlessNumber);var domTransforms=/^(matrix|translate|scale|rotate|skew)/,pxTransforms=/^(translate)/,degTransforms=/^(rotate|skew)/,addUnit=(et,dt)=>is.num(et)&&et!==0?et+dt:et,isValueIdentity=(et,dt)=>is.arr(et)?et.every($t=>isValueIdentity($t,dt)):is.num(et)?et===dt:parseFloat(et)===dt,AnimatedStyle=class extends AnimatedObject{constructor({x:et,y:dt,z:$t,...kt}){const Tt=[],Dt=[];(et||dt||$t)&&(Tt.push([et||0,dt||0,$t||0]),Dt.push(Ft=>[`translate3d(${Ft.map(Ut=>addUnit(Ut,"px")).join(",")})`,isValueIdentity(Ft,0)])),eachProp(kt,(Ft,Ut)=>{if(Ut==="transform")Tt.push([Ft||""]),Dt.push(Ht=>[Ht,Ht===""]);else if(domTransforms.test(Ut)){if(delete kt[Ut],is.und(Ft))return;const Ht=pxTransforms.test(Ut)?"px":degTransforms.test(Ut)?"deg":"";Tt.push(toArray(Ft)),Dt.push(Ut==="rotate3d"?([Kt,Yt,Jt,Zt])=>[`rotate3d(${Kt},${Yt},${Jt},${addUnit(Zt,Ht)})`,isValueIdentity(Zt,0)]:Kt=>[`${Ut}(${Kt.map(Yt=>addUnit(Yt,Ht)).join(",")})`,isValueIdentity(Kt,Ut.startsWith("scale")?1:0)])}}),Tt.length&&(kt.transform=new FluidTransform(Tt,Dt)),super(kt)}},FluidTransform=class extends FluidValue{constructor(et,dt){super(),this.inputs=et,this.transforms=dt,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let et="",dt=!0;return each(this.inputs,($t,kt)=>{const Tt=getFluidValue($t[0]),[Dt,Ft]=this.transforms[kt](is.arr(Tt)?Tt:$t.map(getFluidValue));et+=" "+Dt,dt=dt&&Ft}),dt?"none":et}observerAdded(et){et==1&&each(this.inputs,dt=>each(dt,$t=>hasFluidValue($t)&&addFluidObserver($t,this)))}observerRemoved(et){et==0&&each(this.inputs,dt=>each(dt,$t=>hasFluidValue($t)&&removeFluidObserver($t,this)))}eventObserved(et){et.type=="change"&&(this._value=null),callFluidObservers(this,et)}},primitives=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2,colors:colors2});var host=createHost(primitives,{applyAnimatedValues,createAnimatedStyle:et=>new AnimatedStyle(et),getComponentProps:({scrollTop:et,scrollLeft:dt,...$t})=>$t}),animated=host.animated;function g(){return g=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},g.apply(null,arguments)}var k$1={dotSize:4,noteWidth:120,noteTextOffset:8,animate:!0},W=function(et){var dt=typeof et;return reactExports.isValidElement(et)||dt==="string"||dt==="function"||dt==="object"},v$1=function(et){var dt=typeof et;return dt==="string"||dt==="function"},b$1=function(et){return et.type==="circle"},w=function(et){return et.type==="dot"},z$1=function(et){return et.type==="rect"},P=function(et){var dt=et.data,$t=et.annotations,kt=et.getPosition,Tt=et.getDimensions;return $t.reduce(function(Dt,Ft){var Ut=Ft.offset||0;return[].concat(Dt,o$1(dt,Ft.match).map(function(Ht){var Kt=kt(Ht),Yt=Tt(Ht);return(b$1(Ft)||z$1(Ft))&&(Yt.size=Yt.size+2*Ut,Yt.width=Yt.width+2*Ut,Yt.height=Yt.height+2*Ut),g({},a(Ft,["match","offset"]),Kt,Yt,{size:Ft.size||Yt.size,datum:Ht})}))},[])},C$1=function(et,dt,$t,kt){var Tt=Math.atan2(kt-dt,$t-et);return ht(ct(Tt))},S$1=function(et){var dt,$t,kt=et.x,Tt=et.y,Dt=et.noteX,Ft=et.noteY,Ut=et.noteWidth,Ht=Ut===void 0?k$1.noteWidth:Ut,Kt=et.noteTextOffset,Yt=Kt===void 0?k$1.noteTextOffset:Kt;if(e(Dt))dt=kt+Dt;else{if(Dt.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");dt=Dt.abs}if(e(Ft))$t=Tt+Ft;else{if(Ft.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");$t=Ft.abs}var Jt=kt,Zt=Tt,er=C$1(kt,Tt,dt,$t);if(b$1(et)){var rr=ft(ut(er),et.size/2);Jt+=rr.x,Zt+=rr.y}if(z$1(et)){var sr=Math.round((er+90)/45)%8;sr===0&&(Zt-=et.height/2),sr===1&&(Jt+=et.width/2,Zt-=et.height/2),sr===2&&(Jt+=et.width/2),sr===3&&(Jt+=et.width/2,Zt+=et.height/2),sr===4&&(Zt+=et.height/2),sr===5&&(Jt-=et.width/2,Zt+=et.height/2),sr===6&&(Jt-=et.width/2),sr===7&&(Jt-=et.width/2,Zt-=et.height/2)}var nr=dt,ir=dt;return(er+90)%360>180?(nr-=Ht,ir-=Ht):ir+=Ht,{points:[[Jt,Zt],[dt,$t],[ir,$t]],text:[nr,$t-Yt],angle:er+90}},O$1=function(et){var dt=et.data,$t=et.annotations,kt=et.getPosition,Tt=et.getDimensions;return reactExports.useMemo(function(){return P({data:dt,annotations:$t,getPosition:kt,getDimensions:Tt})},[dt,$t,kt,Tt])},j$1=function(et){var dt=et.annotations;return reactExports.useMemo(function(){return dt.map(function($t){return g({},$t,{computed:S$1(g({},$t))})})},[dt])},M=function(et){return reactExports.useMemo(function(){return S$1(et)},[et])},T=function(et){var dt=et.datum,$t=et.x,kt=et.y,Tt=et.note,Dt=M$3(),Ft=Dr(),Ut=Ft.animate,Ht=Ft.config,Kt=useSpring({x:$t,y:kt,config:Ht,immediate:!Ut});return typeof Tt=="function"?reactExports.createElement(Tt,{x:$t,y:kt,datum:dt}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Dt.annotations.text.outlineWidth>0&&jsxRuntimeExports.jsx(animated.text,{x:Kt.x,y:Kt.y,style:g({},Dt.annotations.text,{strokeLinejoin:"round",strokeWidth:2*Dt.annotations.text.outlineWidth,stroke:Dt.annotations.text.outlineColor}),children:Tt}),jsxRuntimeExports.jsx(animated.text,{x:Kt.x,y:Kt.y,style:a(Dt.annotations.text,["outlineWidth","outlineColor"]),children:Tt})]})},E$1=function(et){var dt=et.points,$t=et.isOutline,kt=$t!==void 0&&$t,Tt=M$3(),Dt=reactExports.useMemo(function(){var Ht=dt[0];return dt.slice(1).reduce(function(Kt,Yt){return Kt+" L"+Yt[0]+","+Yt[1]},"M"+Ht[0]+","+Ht[1])},[dt]),Ft=It(Dt);if(kt&&Tt.annotations.link.outlineWidth<=0)return null;var Ut=g({},Tt.annotations.link);return kt&&(Ut.strokeLinecap="square",Ut.strokeWidth=Tt.annotations.link.strokeWidth+2*Tt.annotations.link.outlineWidth,Ut.stroke=Tt.annotations.link.outlineColor,Ut.opacity=Tt.annotations.link.outlineOpacity),jsxRuntimeExports.jsx(animated.path,{fill:"none",d:Ft,style:Ut})},I=function(et){var dt=et.x,$t=et.y,kt=et.size,Tt=M$3(),Dt=Dr(),Ft=Dt.animate,Ut=Dt.config,Ht=useSpring({x:dt,y:$t,radius:kt/2,config:Ut,immediate:!Ft});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Tt.annotations.outline.outlineWidth>0&&jsxRuntimeExports.jsx(animated.circle,{cx:Ht.x,cy:Ht.y,r:Ht.radius,style:g({},Tt.annotations.outline,{fill:"none",strokeWidth:Tt.annotations.outline.strokeWidth+2*Tt.annotations.outline.outlineWidth,stroke:Tt.annotations.outline.outlineColor,opacity:Tt.annotations.outline.outlineOpacity})}),jsxRuntimeExports.jsx(animated.circle,{cx:Ht.x,cy:Ht.y,r:Ht.radius,style:Tt.annotations.outline})]})},D=function(et){var dt=et.x,$t=et.y,kt=et.size,Tt=kt===void 0?k$1.dotSize:kt,Dt=M$3(),Ft=Dr(),Ut=Ft.animate,Ht=Ft.config,Kt=useSpring({x:dt,y:$t,radius:Tt/2,config:Ht,immediate:!Ut});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Dt.annotations.outline.outlineWidth>0&&jsxRuntimeExports.jsx(animated.circle,{cx:Kt.x,cy:Kt.y,r:Kt.radius,style:g({},Dt.annotations.outline,{fill:"none",strokeWidth:2*Dt.annotations.outline.outlineWidth,stroke:Dt.annotations.outline.outlineColor,opacity:Dt.annotations.outline.outlineOpacity})}),jsxRuntimeExports.jsx(animated.circle,{cx:Kt.x,cy:Kt.y,r:Kt.radius,style:Dt.annotations.symbol})]})},L$1=function(et){var dt=et.x,$t=et.y,kt=et.width,Tt=et.height,Dt=et.borderRadius,Ft=Dt===void 0?6:Dt,Ut=M$3(),Ht=Dr(),Kt=Ht.animate,Yt=Ht.config,Jt=useSpring({x:dt-kt/2,y:$t-Tt/2,width:kt,height:Tt,config:Yt,immediate:!Kt});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ut.annotations.outline.outlineWidth>0&&jsxRuntimeExports.jsx(animated.rect,{x:Jt.x,y:Jt.y,rx:Ft,ry:Ft,width:Jt.width,height:Jt.height,style:g({},Ut.annotations.outline,{fill:"none",strokeWidth:Ut.annotations.outline.strokeWidth+2*Ut.annotations.outline.outlineWidth,stroke:Ut.annotations.outline.outlineColor,opacity:Ut.annotations.outline.outlineOpacity})}),jsxRuntimeExports.jsx(animated.rect,{x:Jt.x,y:Jt.y,rx:Ft,ry:Ft,width:Jt.width,height:Jt.height,style:Ut.annotations.outline})]})},R=function(et){var dt=et.datum,$t=et.x,kt=et.y,Tt=et.note,Dt=M(et);if(!W(Tt))throw new Error("note should be a valid react element");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(E$1,{points:Dt.points,isOutline:!0}),b$1(et)&&jsxRuntimeExports.jsx(I,{x:$t,y:kt,size:et.size}),w(et)&&jsxRuntimeExports.jsx(D,{x:$t,y:kt,size:et.size}),z$1(et)&&jsxRuntimeExports.jsx(L$1,{x:$t,y:kt,width:et.width,height:et.height,borderRadius:et.borderRadius}),jsxRuntimeExports.jsx(E$1,{points:Dt.points}),jsxRuntimeExports.jsx(T,{datum:dt,x:Dt.text[0],y:Dt.text[1],note:Tt})]})},q=function(et,dt){dt.forEach(function($t,kt){var Tt=$t[0],Dt=$t[1];kt===0?et.moveTo(Tt,Dt):et.lineTo(Tt,Dt)})},J=function(et,dt){var $t=dt.annotations,kt=dt.theme;$t.length!==0&&(et.save(),$t.forEach(function(Tt){if(!v$1(Tt.note))throw new Error("note is invalid for canvas implementation");kt.annotations.link.outlineWidth>0&&(et.lineCap="square",et.strokeStyle=kt.annotations.link.outlineColor,et.lineWidth=kt.annotations.link.strokeWidth+2*kt.annotations.link.outlineWidth,et.beginPath(),q(et,Tt.computed.points),et.stroke(),et.lineCap="butt"),b$1(Tt)&&kt.annotations.outline.outlineWidth>0&&(et.strokeStyle=kt.annotations.outline.outlineColor,et.lineWidth=kt.annotations.outline.strokeWidth+2*kt.annotations.outline.outlineWidth,et.beginPath(),et.arc(Tt.x,Tt.y,Tt.size/2,0,2*Math.PI),et.stroke()),w(Tt)&&kt.annotations.symbol.outlineWidth>0&&(et.strokeStyle=kt.annotations.symbol.outlineColor,et.lineWidth=2*kt.annotations.symbol.outlineWidth,et.beginPath(),et.arc(Tt.x,Tt.y,Tt.size/2,0,2*Math.PI),et.stroke()),z$1(Tt)&&kt.annotations.outline.outlineWidth>0&&(et.strokeStyle=kt.annotations.outline.outlineColor,et.lineWidth=kt.annotations.outline.strokeWidth+2*kt.annotations.outline.outlineWidth,et.beginPath(),et.rect(Tt.x-Tt.width/2,Tt.y-Tt.height/2,Tt.width,Tt.height),et.stroke()),et.strokeStyle=kt.annotations.link.stroke,et.lineWidth=kt.annotations.link.strokeWidth,et.beginPath(),q(et,Tt.computed.points),et.stroke(),b$1(Tt)&&(et.strokeStyle=kt.annotations.outline.stroke,et.lineWidth=kt.annotations.outline.strokeWidth,et.beginPath(),et.arc(Tt.x,Tt.y,Tt.size/2,0,2*Math.PI),et.stroke()),w(Tt)&&(et.fillStyle=kt.annotations.symbol.fill,et.beginPath(),et.arc(Tt.x,Tt.y,Tt.size/2,0,2*Math.PI),et.fill()),z$1(Tt)&&(et.strokeStyle=kt.annotations.outline.stroke,et.lineWidth=kt.annotations.outline.strokeWidth,et.beginPath(),et.rect(Tt.x-Tt.width/2,Tt.y-Tt.height/2,Tt.width,Tt.height),et.stroke()),typeof Tt.note=="function"?Tt.note(et,{datum:Tt.datum,x:Tt.computed.text[0],y:Tt.computed.text[1],theme:kt}):(et.font=kt.annotations.text.fontSize+"px "+kt.annotations.text.fontFamily,et.textAlign="left",et.textBaseline="alphabetic",et.fillStyle=kt.annotations.text.fill,et.strokeStyle=kt.annotations.text.outlineColor,et.lineWidth=2*kt.annotations.text.outlineWidth,kt.annotations.text.outlineWidth>0&&(et.lineJoin="round",et.strokeText(Tt.note,Tt.computed.text[0],Tt.computed.text[1]),et.lineJoin="miter"),et.fillText(Tt.note,Tt.computed.text[0],Tt.computed.text[1]))}),et.restore())};function Se$1(et,dt){(dt==null||dt>et.length)&&(dt=et.length);for(var $t=0,kt=Array(dt);$t<dt;$t++)kt[$t]=et[$t];return kt}function qe(et,dt){var $t=typeof Symbol<"u"&&et[Symbol.iterator]||et["@@iterator"];if($t)return($t=$t.call(et)).next.bind($t);if(Array.isArray(et)||($t=function(Tt,Dt){if(Tt){if(typeof Tt=="string")return Se$1(Tt,Dt);var Ft={}.toString.call(Tt).slice(8,-1);return Ft==="Object"&&Tt.constructor&&(Ft=Tt.constructor.name),Ft==="Map"||Ft==="Set"?Array.from(Tt):Ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ft)?Se$1(Tt,Dt):void 0}}(et))||dt&&et&&typeof et.length=="number"){$t&&(et=$t);var kt=0;return function(){return kt>=et.length?{done:!0}:{done:!1,value:et[kt++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce$1(){return Ce$1=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},Ce$1.apply(null,arguments)}var Ge={nivo:["#e8c1a0","#f47560","#f1e15b","#e8a838","#61cdbb","#97e3d5"],category10:e$1,accent:r$1,dark2:n,paired:t,pastel1:o$2,pastel2:i,set1:u$1,set2:l,set3:a$2,tableau10:c$2},Ve$1=Object.keys(Ge),Pe$1={brown_blueGreen:scheme$q,purpleRed_green:scheme$p,pink_yellowGreen:scheme$o,purple_orange:scheme$n,red_blue:scheme$m,red_grey:scheme$l,red_yellow_blue:scheme$k,red_yellow_green:scheme$j,spectral:scheme$i},Re$1=Object.keys(Pe$1),Ue={brown_blueGreen:y$1,purpleRed_green:_$1,pink_yellowGreen:w$2,purple_orange:k$2,red_blue:j$3,red_grey:z$3,red_yellow_blue:A$2,red_yellow_green:E$3,spectral:O$3},De$1={blues:scheme$5,greens:scheme$4,greys:scheme$3,oranges:scheme,purples:scheme$2,reds:scheme$1,blue_green:scheme$h,blue_purple:scheme$g,green_blue:scheme$f,orange_red:scheme$e,purple_blue_green:scheme$d,purple_blue:scheme$c,purple_red:scheme$b,red_purple:scheme$a,yellow_green_blue:scheme$9,yellow_green:scheme$8,yellow_orange_brown:scheme$7,yellow_orange_red:scheme$6},Me$1=Object.keys(De$1),Te$1={blues:K,greens:L$3,greys:N,oranges:Q$2,purples:W$3,reds:X$2,turbo:Y$2,viridis:Z$2,inferno,magma,plasma,cividis:te$1,warm,cool,cubehelixDefault:ue$1,blue_green:le$1,blue_purple:ae$1,green_blue:ce$1,orange_red:se$1,purple_blue_green:fe$1,purple_blue:pe$1,purple_red:de$1,red_purple:me$1,yellow_green_blue:ge$1,yellow_green:he$1,yellow_orange_brown:be$1,yellow_orange_red:ve$1},$e=Ce$1({},Ge,Pe$1,De$1),Fe$1=function(et){return Ve$1.includes(et)},He$1=function(et){return Re$1.includes(et)},Je=function(et){return Me$1.includes(et)},Ke={rainbow:ye$1,sinebow:_e};Ce$1({},Ue,Te$1,Ke);var Qe=function(et){return et.theme!==void 0},We$1=function(et){return et.from!==void 0},Xe$1=function(et,dt){if(typeof et=="function")return et;if(je(et)){if(Qe(et)){if(dt===void 0)throw new Error("Unable to use color from theme as no theme was provided");var $t=ke$1(dt,et.theme);if($t===void 0)throw new Error("Color from theme is undefined at path: '"+et.theme+"'");return function(){return $t}}if(We$1(et)){var kt=function(Ht){return ke$1(Ht,et.from)};if(Array.isArray(et.modifiers)){for(var Tt,Dt=[],Ft=function(){var Ht=Tt.value,Kt=Ht[0],Yt=Ht[1];if(Kt==="brighter")Dt.push(function(Jt){return Jt.brighter(Yt)});else if(Kt==="darker")Dt.push(function(Jt){return Jt.darker(Yt)});else{if(Kt!=="opacity")throw new Error("Invalid color modifier: '"+Kt+"', must be one of: 'brighter', 'darker', 'opacity'");Dt.push(function(Jt){return Jt.opacity=Yt,Jt})}},Ut=qe(et.modifiers);!(Tt=Ut()).done;)Ft();return Dt.length===0?kt:function(Ht){return Dt.reduce(function(Kt,Yt){return Yt(Kt)},rgb$5(kt(Ht))).toString()}}return kt}throw new Error("Invalid color spec, you should either specify 'theme' or 'from' when using a config object")}return function(){return et}},Ye$1=function(et,dt){return reactExports.useMemo(function(){return Xe$1(et,dt)},[et,dt])},gr=function(et,dt){if(typeof et=="function")return et;var $t=typeof dt=="function"?dt:function(Jt){return ke$1(Jt,dt)};if(Array.isArray(et)){var kt=ordinal(et),Tt=function(Jt){return kt($t(Jt))};return Tt.scale=kt,Tt}if(je(et)){if(function(Jt){return Jt.datum!==void 0}(et))return function(Jt){return ke$1(Jt,et.datum)};if(function(Jt){return Jt.scheme!==void 0}(et)){if(Fe$1(et.scheme)){var Dt=ordinal($e[et.scheme]),Ft=function(Jt){return Dt($t(Jt))};return Ft.scale=Dt,Ft}if(He$1(et.scheme)){if(et.size!==void 0&&(et.size<3||et.size>11))throw new Error("Invalid size '"+et.size+"' for diverging color scheme '"+et.scheme+"', must be between 3~11");var Ut=ordinal($e[et.scheme][et.size||11]),Ht=function(Jt){return Ut($t(Jt))};return Ht.scale=Ut,Ht}if(Je(et.scheme)){if(et.size!==void 0&&(et.size<3||et.size>9))throw new Error("Invalid size '"+et.size+"' for sequential color scheme '"+et.scheme+"', must be between 3~9");var Kt=ordinal($e[et.scheme][et.size||9]),Yt=function(Jt){return Kt($t(Jt))};return Yt.scale=Kt,Yt}}throw new Error("Invalid colors, when using an object, you should either pass a 'datum' or a 'scheme' property")}return function(){return et}},hr=function(et,dt){return reactExports.useMemo(function(){return gr(et,dt)},[et,dt])},v=function(et){var dt=et.x,$t=et.y,kt=et.size,Tt=et.fill,Dt=et.opacity,Ft=Dt===void 0?1:Dt,Ut=et.borderWidth,Ht=Ut===void 0?0:Ut,Kt=et.borderColor;return jsxRuntimeExports.jsx("circle",{r:kt/2,cx:dt+kt/2,cy:$t+kt/2,fill:Tt,opacity:Ft,strokeWidth:Ht,stroke:Kt===void 0?"transparent":Kt,style:{pointerEvents:"none"}})},u=function(et){var dt=et.x,$t=et.y,kt=et.size,Tt=et.fill,Dt=et.opacity,Ft=Dt===void 0?1:Dt,Ut=et.borderWidth,Ht=Ut===void 0?0:Ut,Kt=et.borderColor;return jsxRuntimeExports.jsx("g",{transform:"translate("+dt+","+$t+")",children:jsxRuntimeExports.jsx("path",{d:`
                    M`+kt/2+` 0
                    L`+.8*kt+" "+kt/2+`
                    L`+kt/2+" "+kt+`
                    L`+.2*kt+" "+kt/2+`
                    L`+kt/2+` 0
                `,fill:Tt,opacity:Ft,strokeWidth:Ht,stroke:Kt===void 0?"transparent":Kt,style:{pointerEvents:"none"}})})},p=function(et){var dt=et.x,$t=et.y,kt=et.size,Tt=et.fill,Dt=et.opacity,Ft=Dt===void 0?1:Dt,Ut=et.borderWidth,Ht=Ut===void 0?0:Ut,Kt=et.borderColor;return jsxRuntimeExports.jsx("rect",{x:dt,y:$t,fill:Tt,opacity:Ft,strokeWidth:Ht,stroke:Kt===void 0?"transparent":Kt,width:kt,height:kt,style:{pointerEvents:"none"}})},y=function(et){var dt=et.x,$t=et.y,kt=et.size,Tt=et.fill,Dt=et.opacity,Ft=Dt===void 0?1:Dt,Ut=et.borderWidth,Ht=Ut===void 0?0:Ut,Kt=et.borderColor;return jsxRuntimeExports.jsx("g",{transform:"translate("+dt+","+$t+")",children:jsxRuntimeExports.jsx("path",{d:`
                M`+kt/2+` 0
                L`+kt+" "+kt+`
                L0 `+kt+`
                L`+kt/2+` 0
            `,fill:Tt,opacity:Ft,strokeWidth:Ht,stroke:Kt===void 0?"transparent":Kt,style:{pointerEvents:"none"}})})};function b(){return b=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},b.apply(null,arguments)}var k={translateX:0,translateY:0,padding:0,itemsSpacing:0,itemDirection:"left-to-right",justify:!1,symbolShape:"square",symbolSize:16,symbolSpacing:8},S={top:0,right:0,bottom:0,left:0},A=function(et){var dt,$t=et.direction,kt=et.itemsSpacing,Tt=et.padding,Dt=et.itemCount,Ft=et.itemWidth,Ut=et.itemHeight;if(typeof Tt!="number"&&(typeof(dt=Tt)!="object"||Array.isArray(dt)||dt===null))throw new Error("Invalid property padding, must be one of: number, object");var Ht=typeof Tt=="number"?{top:Tt,right:Tt,bottom:Tt,left:Tt}:b({},S,Tt),Kt=Ht.left+Ht.right,Yt=Ht.top+Ht.bottom,Jt=Ft+Kt,Zt=Ut+Yt,er=(Dt-1)*kt;return $t==="row"?Jt=Ft*Dt+er+Kt:$t==="column"&&(Zt=Ut*Dt+er+Yt),{width:Jt,height:Zt,padding:Ht}},C=function(et){var dt=et.anchor,$t=et.translateX,kt=et.translateY,Tt=et.containerWidth,Dt=et.containerHeight,Ft=et.width,Ut=et.height,Ht=$t,Kt=kt;switch(dt){case"top":Ht+=(Tt-Ft)/2;break;case"top-right":Ht+=Tt-Ft;break;case"right":Ht+=Tt-Ft,Kt+=(Dt-Ut)/2;break;case"bottom-right":Ht+=Tt-Ft,Kt+=Dt-Ut;break;case"bottom":Ht+=(Tt-Ft)/2,Kt+=Dt-Ut;break;case"bottom-left":Kt+=Dt-Ut;break;case"left":Kt+=(Dt-Ut)/2;break;case"center":Ht+=(Tt-Ft)/2,Kt+=(Dt-Ut)/2}return{x:Ht,y:Kt}},z=function(et){var dt,$t,kt,Tt,Dt,Ft,Ut=et.direction,Ht=et.justify,Kt=et.symbolSize,Yt=et.symbolSpacing,Jt=et.width,Zt=et.height;switch(Ut){case"left-to-right":dt=0,$t=(Zt-Kt)/2,Tt=Zt/2,Ft="central",Ht?(kt=Jt,Dt="end"):(kt=Kt+Yt,Dt="start");break;case"right-to-left":dt=Jt-Kt,$t=(Zt-Kt)/2,Tt=Zt/2,Ft="central",Ht?(kt=0,Dt="start"):(kt=Jt-Kt-Yt,Dt="end");break;case"top-to-bottom":dt=(Jt-Kt)/2,$t=0,kt=Jt/2,Dt="middle",Ht?(Tt=Zt,Ft="alphabetic"):(Tt=Kt+Yt,Ft="text-before-edge");break;case"bottom-to-top":dt=(Jt-Kt)/2,$t=Zt-Kt,kt=Jt/2,Dt="middle",Ht?(Tt=0,Ft="text-before-edge"):(Tt=Zt-Kt-Yt,Ft="alphabetic")}return{symbolX:dt,symbolY:$t,labelX:kt,labelY:Tt,labelAnchor:Dt,labelAlignment:Ft}},O={circle:v,diamond:u,square:p,triangle:y},B=function(et){var dt,$t,kt,Tt,Dt,Ft,Ut,Ht,Kt,Yt,Jt,Zt=et.x,er=et.y,rr=et.width,sr=et.height,nr=et.data,ir=et.direction,or=ir===void 0?k.itemDirection:ir,lr=et.justify,cr=lr===void 0?k.justify:lr,dr=et.textColor,ur=et.background,pr=ur===void 0?"transparent":ur,mr=et.opacity,jr=mr===void 0?1:mr,Rr=et.symbolShape,xr=Rr===void 0?k.symbolShape:Rr,kr=et.symbolSize,Mr=kr===void 0?k.symbolSize:kr,Tr=et.symbolSpacing,Or=Tr===void 0?k.symbolSpacing:Tr,_r=et.symbolBorderWidth,Pr=_r===void 0?0:_r,br=et.symbolBorderColor,wr=br===void 0?"transparent":br,zr=et.onClick,Hr=et.onMouseEnter,Yr=et.onMouseLeave,es=et.toggleSerie,rs=et.effects,Wr=reactExports.useState({}),Xr=Wr[0],ns=Wr[1],gs=M$3(),us=reactExports.useCallback(function(Ns){if(rs){var Is=rs.filter(function(zs){return zs.on==="hover"}).reduce(function(zs,Gs){return b({},zs,Gs.style)},{});ns(Is)}Hr==null||Hr(nr,Ns)},[Hr,nr,rs]),ps=reactExports.useCallback(function(Ns){if(rs){var Is=rs.filter(function(zs){return zs.on!=="hover"}).reduce(function(zs,Gs){return b({},zs,Gs.style)},{});ns(Is)}Yr==null||Yr(nr,Ns)},[Yr,nr,rs]),cs=z({direction:or,justify:cr,symbolSize:(dt=Xr.symbolSize)!=null?dt:Mr,symbolSpacing:Or,width:rr,height:sr}),ss=cs.symbolX,fs=cs.symbolY,hs=cs.labelX,$s=cs.labelY,ks=cs.labelAnchor,Ds=cs.labelAlignment,_s=[zr,Hr,Yr,es].some(function(Ns){return Ns!==void 0}),As=typeof xr=="function"?xr:O[xr];return jsxRuntimeExports.jsxs("g",{transform:"translate("+Zt+","+er+")",style:{opacity:($t=Xr.itemOpacity)!=null?$t:jr},children:[jsxRuntimeExports.jsx("rect",{width:rr,height:sr,fill:(kt=Xr.itemBackground)!=null?kt:pr,style:{cursor:_s?"pointer":"auto"},onClick:function(Ns){zr==null||zr(nr,Ns),es==null||es(nr.id)},onMouseEnter:us,onMouseLeave:ps}),reactExports.createElement(As,b({id:nr.id,x:ss,y:fs,size:(Tt=Xr.symbolSize)!=null?Tt:Mr,fill:(Dt=(Ft=nr.fill)!=null?Ft:nr.color)!=null?Dt:"black",borderWidth:(Ut=Xr.symbolBorderWidth)!=null?Ut:Pr,borderColor:(Ht=Xr.symbolBorderColor)!=null?Ht:wr},nr.hidden?gs.legends.hidden.symbol:void 0)),jsxRuntimeExports.jsx(b$2,{textAnchor:ks,style:b({},gs.legends.text,{fill:(Kt=(Yt=(Jt=Xr.itemTextColor)!=null?Jt:dr)!=null?Yt:gs.legends.text.fill)!=null?Kt:"black",dominantBaseline:Ds,pointerEvents:"none",userSelect:"none"},nr.hidden?gs.legends.hidden.text:void 0),x:hs,y:$s,children:nr.label})]})},H=function(et){var dt=et.data,$t=et.x,kt=et.y,Tt=et.direction,Dt=et.padding,Ft=Dt===void 0?k.padding:Dt,Ut=et.justify,Ht=et.effects,Kt=et.itemWidth,Yt=et.itemHeight,Jt=et.itemDirection,Zt=Jt===void 0?k.itemDirection:Jt,er=et.itemsSpacing,rr=er===void 0?k.itemsSpacing:er,sr=et.itemTextColor,nr=et.itemBackground,ir=nr===void 0?"transparent":nr,or=et.itemOpacity,lr=or===void 0?1:or,cr=et.symbolShape,dr=et.symbolSize,ur=et.symbolSpacing,pr=et.symbolBorderWidth,mr=et.symbolBorderColor,jr=et.onClick,Rr=et.onMouseEnter,xr=et.onMouseLeave,kr=et.toggleSerie,Mr=A({itemCount:dt.length,itemWidth:Kt,itemHeight:Yt,itemsSpacing:rr,direction:Tt,padding:Ft}).padding,Tr=Tt==="row"?Kt+rr:0,Or=Tt==="column"?Yt+rr:0;return jsxRuntimeExports.jsx("g",{transform:"translate("+$t+","+kt+")",children:dt.map(function(_r,Pr){return jsxRuntimeExports.jsx(B,{data:_r,x:Pr*Tr+Mr.left,y:Pr*Or+Mr.top,width:Kt,height:Yt,direction:Zt,justify:Ut,effects:Ht,textColor:sr,background:ir,opacity:lr,symbolShape:cr,symbolSize:dr,symbolSpacing:ur,symbolBorderWidth:pr,symbolBorderColor:mr,onClick:jr,onMouseEnter:Rr,onMouseLeave:xr,toggleSerie:kr},Pr)})})},E=function(et){var dt=et.data,$t=et.containerWidth,kt=et.containerHeight,Tt=et.translateX,Dt=Tt===void 0?k.translateX:Tt,Ft=et.translateY,Ut=Ft===void 0?k.translateY:Ft,Ht=et.anchor,Kt=et.direction,Yt=et.padding,Jt=Yt===void 0?k.padding:Yt,Zt=et.justify,er=et.itemsSpacing,rr=er===void 0?k.itemsSpacing:er,sr=et.itemWidth,nr=et.itemHeight,ir=et.itemDirection,or=et.itemTextColor,lr=et.itemBackground,cr=et.itemOpacity,dr=et.symbolShape,ur=et.symbolSize,pr=et.symbolSpacing,mr=et.symbolBorderWidth,jr=et.symbolBorderColor,Rr=et.onClick,xr=et.onMouseEnter,kr=et.onMouseLeave,Mr=et.toggleSerie,Tr=et.effects,Or=A({itemCount:dt.length,itemsSpacing:rr,itemWidth:sr,itemHeight:nr,direction:Kt,padding:Jt}),_r=Or.width,Pr=Or.height,br=C({anchor:Ht,translateX:Dt,translateY:Ut,containerWidth:$t,containerHeight:kt,width:_r,height:Pr}),wr=br.x,zr=br.y;return jsxRuntimeExports.jsx(H,{data:dt,x:wr,y:zr,direction:Kt,padding:Jt,justify:Zt,effects:Tr,itemsSpacing:rr,itemWidth:sr,itemHeight:nr,itemDirection:ir,itemTextColor:or,itemBackground:lr,itemOpacity:cr,symbolShape:dr,symbolSize:ur,symbolSpacing:pr,symbolBorderWidth:mr,symbolBorderColor:jr,onClick:Rr,onMouseEnter:xr,onMouseLeave:kr,toggleSerie:typeof Mr=="boolean"?void 0:Mr})},j={start:"left",middle:"center",end:"right"},L=function(et,dt){var $t=dt.data,kt=dt.containerWidth,Tt=dt.containerHeight,Dt=dt.translateX,Ft=Dt===void 0?0:Dt,Ut=dt.translateY,Ht=Ut===void 0?0:Ut,Kt=dt.anchor,Yt=dt.direction,Jt=dt.padding,Zt=Jt===void 0?0:Jt,er=dt.justify,rr=er!==void 0&&er,sr=dt.itemsSpacing,nr=sr===void 0?0:sr,ir=dt.itemWidth,or=dt.itemHeight,lr=dt.itemDirection,cr=lr===void 0?"left-to-right":lr,dr=dt.itemTextColor,ur=dt.symbolSize,pr=ur===void 0?16:ur,mr=dt.symbolSpacing,jr=mr===void 0?8:mr,Rr=dt.theme,xr=A({itemCount:$t.length,itemWidth:ir,itemHeight:or,itemsSpacing:nr,direction:Yt,padding:Zt}),kr=xr.width,Mr=xr.height,Tr=xr.padding,Or=C({anchor:Kt,translateX:Ft,translateY:Ht,containerWidth:kt,containerHeight:Tt,width:kr,height:Mr}),_r=Or.x,Pr=Or.y,br=Yt==="row"?ir+nr:0,wr=Yt==="column"?or+nr:0;et.save(),et.translate(_r,Pr),a$1(et,Rr.legends.text),$t.forEach(function(zr,Hr){var Yr,es=Hr*br+Tr.left,rs=Hr*wr+Tr.top,Wr=z({direction:cr,justify:rr,symbolSize:pr,symbolSpacing:jr,width:ir,height:or}),Xr=Wr.symbolX,ns=Wr.symbolY,gs=Wr.labelX,us=Wr.labelY,ps=Wr.labelAnchor,cs=Wr.labelAlignment;et.fillStyle=(Yr=zr.color)!=null?Yr:"black",et.fillRect(es+Xr,rs+ns,pr,pr),et.textAlign=j[ps],cs==="central"&&(et.textBaseline="middle"),d(et,b({},Rr.legends.text,{fill:dr??Rr.legends.text.fill}),String(zr.label),es+gs,rs+us)}),et.restore()},o=function(et,dt,$t,kt,Tt,Dt){Dt>0?(et.moveTo(dt+Dt,$t),et.lineTo(dt+kt-Dt,$t),et.quadraticCurveTo(dt+kt,$t,dt+kt,$t+Dt),et.lineTo(dt+kt,$t+Tt-Dt),et.quadraticCurveTo(dt+kt,$t+Tt,dt+kt-Dt,$t+Tt),et.lineTo(dt+Dt,$t+Tt),et.quadraticCurveTo(dt,$t+Tt,dt,$t+Tt-Dt),et.lineTo(dt,$t+Dt),et.quadraticCurveTo(dt,$t,dt+Dt,$t),et.closePath()):et.rect(dt,$t,kt,Tt)};function Q(){return Q=Object.assign?Object.assign.bind():function(et){for(var dt=1;dt<arguments.length;dt++){var $t=arguments[dt];for(var kt in $t)({}).hasOwnProperty.call($t,kt)&&(et[kt]=$t[kt])}return et},Q.apply(null,arguments)}function U(et,dt){if(et==null)return{};var $t={};for(var kt in et)if({}.hasOwnProperty.call(et,kt)){if(dt.indexOf(kt)!==-1)continue;$t[kt]=et[kt]}return $t}var Z,$=function(et){var dt=et.bars,$t=et.annotations,kt=O$1({data:dt,annotations:$t,getPosition:function(Tt){return{x:Tt.x+Tt.width/2,y:Tt.y+Tt.height/2}},getDimensions:function(Tt){var Dt=Tt.height,Ft=Tt.width;return{width:Ft,height:Dt,size:Math.max(Ft,Dt)}}});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:kt.map(function(Tt,Dt){return jsxRuntimeExports.jsx(R,Q({},Tt),Dt)})})},ee=function(et){var dt=et.width,$t=et.height,kt=et.legends,Tt=et.toggleSerie;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:kt.map(function(Dt,Ft){var Ut,Ht=Dt[0],Kt=Dt[1];return jsxRuntimeExports.jsx(E,Q({},Ht,{containerWidth:dt,containerHeight:$t,data:(Ut=Ht.data)!=null?Ut:Kt,toggleSerie:Ht.toggleSerie&&Ht.dataFrom==="keys"?Tt:void 0}),Ft)})})},te=["data"],ae=function(et){var dt,$t=et.bar,kt=$t.data,Tt=U($t,te),Dt=et.style,Ft=Dt.borderColor,Ut=Dt.color,Ht=Dt.height,Kt=Dt.labelColor,Yt=Dt.labelOpacity,Jt=Dt.labelX,Zt=Dt.labelY,er=Dt.transform,rr=Dt.width,sr=Dt.textAnchor,nr=et.borderRadius,ir=et.borderWidth,or=et.label,lr=et.shouldRenderLabel,cr=et.isInteractive,dr=et.onClick,ur=et.onMouseEnter,pr=et.onMouseLeave,mr=et.tooltip,jr=et.isFocusable,Rr=et.ariaLabel,xr=et.ariaLabelledBy,kr=et.ariaDescribedBy,Mr=et.ariaDisabled,Tr=et.ariaHidden,Or=M$3(),_r=z$4(),Pr=_r.showTooltipFromEvent,br=_r.showTooltipAt,wr=_r.hideTooltip,zr=reactExports.useMemo(function(){return function(){return reactExports.createElement(mr,Q({},Tt,kt))}},[mr,Tt,kt]),Hr=reactExports.useCallback(function(ns){dr==null||dr(Q({color:Tt.color},kt),ns)},[Tt,kt,dr]),Yr=reactExports.useCallback(function(ns){return Pr(zr(),ns)},[Pr,zr]),es=reactExports.useCallback(function(ns){ur==null||ur(kt,ns),Pr(zr(),ns)},[kt,ur,Pr,zr]),rs=reactExports.useCallback(function(ns){pr==null||pr(kt,ns),wr()},[kt,wr,pr]),Wr=reactExports.useCallback(function(){br(zr(),[Tt.absX+Tt.width/2,Tt.absY])},[br,zr,Tt]),Xr=reactExports.useCallback(function(){wr()},[wr]);return jsxRuntimeExports.jsxs(animated$1.g,{transform:er,children:[jsxRuntimeExports.jsx(animated$1.rect,{width:to$1(rr,function(ns){return Math.max(ns,0)}),height:to$1(Ht,function(ns){return Math.max(ns,0)}),rx:nr,ry:nr,fill:(dt=kt.fill)!=null?dt:Ut,strokeWidth:ir,stroke:Ft,focusable:jr,tabIndex:jr?0:void 0,"aria-label":Rr?Rr(kt):void 0,"aria-labelledby":xr?xr(kt):void 0,"aria-describedby":kr?kr(kt):void 0,"aria-disabled":Mr?Mr(kt):void 0,"aria-hidden":Tr?Tr(kt):void 0,onMouseEnter:cr?es:void 0,onMouseMove:cr?Yr:void 0,onMouseLeave:cr?rs:void 0,onClick:cr?Hr:void 0,onFocus:cr&&jr?Wr:void 0,onBlur:cr&&jr?Xr:void 0,"data-testid":"bar.item."+kt.id+"."+kt.index}),lr&&jsxRuntimeExports.jsx(b$2,{x:Jt,y:Zt,textAnchor:sr,dominantBaseline:"central",fillOpacity:Yt,style:Q({},Or.labels.text,{pointerEvents:"none",fill:Kt}),children:or})]})},ie=["color","label"],ne=function(et){var dt=et.color,$t=et.label,kt=U(et,ie);return jsxRuntimeExports.jsx(T$3,{id:$t,value:kt.formattedValue,enableChip:!0,color:dt})},le={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",valueScale:{type:"linear",nice:!0,round:!1},indexScale:{type:"band",round:!1},padding:.1,innerPadding:0,enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:ne,tooltipLabel:function(et){return et.id+" - "+et.indexValue},legends:[],initialHiddenIds:[],annotations:[],enableTotals:!1,totalsOffset:10},re=Q({},le,{layers:["grid","axes","bars","totals","markers","legends","annotations"],axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},barComponent:ae,defs:[],fill:[],markers:[],animate:!0,animateOnMount:!1,motionConfig:"default",role:"img",isFocusable:!1}),oe=Q({},le,{layers:["grid","axes","bars","totals","legends","annotations"],axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},renderBar:function(et,dt){var $t=dt.bar,kt=$t.color,Tt=$t.height,Dt=$t.width,Ft=$t.x,Ut=$t.y,Ht=dt.borderColor,Kt=dt.borderRadius,Yt=dt.borderWidth,Jt=dt.label,Zt=dt.shouldRenderLabel,er=dt.labelStyle,rr=dt.labelX,sr=dt.labelY,nr=dt.textAnchor;et.fillStyle=kt,Yt>0&&(et.strokeStyle=Ht,et.lineWidth=Yt),et.beginPath(),o(et,Ft,Ut,Dt,Tt,Math.min(Kt,Tt)),et.fill(),Yt>0&&et.stroke(),Zt&&(et.textBaseline="middle",et.textAlign=nr==="middle"?"center":nr,d(et,er,Jt,Ft+rr,Ut+sr))},pixelRatio:typeof window<"u"&&(Z=window.devicePixelRatio)!=null?Z:1}),de=function(et,dt,$t,kt,Tt,Dt){return pn(kt,{all:et.map(dt),min:0,max:0},Tt,Dt).padding($t)},ue=function(et,dt){return et.map(function($t){return Q({},dt.reduce(function(kt,Tt){return kt[Tt]=null,kt},{}),$t)})},se=function(et){return Object.keys(et).reduce(function(dt,$t){return et[$t]&&(dt[$t]=et[$t]),dt},{})},ce=function(et){return[et,Number(et)]};function he(et,dt,$t,kt){return et===void 0&&(et=le.layout),$t===void 0&&($t=le.labelPosition),kt===void 0&&(kt=le.labelOffset),function(Tt,Dt){var Ft=kt*(dt?-1:1);if(et==="horizontal"){var Ut=Tt/2;return $t==="start"?Ut=dt?Tt:0:$t==="end"&&(Ut=dt?0:Tt),{labelX:Ut+Ft,labelY:Dt/2,textAnchor:$t==="middle"?"middle":dt?"end":"start"}}var Ht=Dt/2;return $t==="start"?Ht=dt?0:Dt:$t==="end"&&(Ht=dt?Dt:0),{labelX:Tt/2,labelY:Ht-Ft,textAnchor:"middle"}}}var fe=["layout","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],be=function(et,dt){return et>dt},ge=function(et,dt){return et<dt},ve=function(et,dt){return Array.from(" ".repeat(dt-et),function($t,kt){return et+kt})},me=function(et){return be(et,0)?0:et},pe=function(et,dt,$t,kt){var Tt=et.data,Dt=et.formatValue,Ft=et.getColor,Ut=et.getIndex,Ht=et.getTooltipLabel,Kt=et.innerPadding,Yt=Kt===void 0?0:Kt,Jt=et.keys,Zt=et.xScale,er=et.yScale,rr=et.margin,sr=$t?ge:be,nr=Tt.map(se),ir=[];return Jt.forEach(function(or,lr){return ve(0,Zt.domain().length).forEach(function(cr){var dr,ur,pr,mr=ce(Tt[cr][or]),jr=mr[0],Rr=mr[1],xr=Ut(Tt[cr]),kr=((dr=Zt(xr))!=null?dr:0)+dt*lr+Yt*lr,Mr=sr(ur=Rr,0)?(pr=er(ur))!=null?pr:0:kt,Tr=function(_r,Pr){var br;return sr(_r,0)?kt-Pr:((br=er(_r))!=null?br:0)-kt}(Rr,Mr),Or={id:or,value:jr===null?jr:Rr,formattedValue:Dt(Rr),hidden:!1,index:cr,indexValue:xr,data:nr[cr]};ir.push({key:or+"."+Or.indexValue,index:ir.length,data:Or,x:kr,y:Mr,absX:rr.left+kr,absY:rr.top+Mr,width:dt,height:Tr,color:Ft(Or),label:Ht(Or)})})}),ir},ye=function(et,dt,$t,kt){var Tt=et.data,Dt=et.formatValue,Ft=et.getIndex,Ut=et.getColor,Ht=et.getTooltipLabel,Kt=et.keys,Yt=et.innerPadding,Jt=Yt===void 0?0:Yt,Zt=et.xScale,er=et.yScale,rr=et.margin,sr=$t?ge:be,nr=Tt.map(se),ir=[];return Kt.forEach(function(or,lr){return ve(0,er.domain().length).forEach(function(cr){var dr,ur,pr,mr=ce(Tt[cr][or]),jr=mr[0],Rr=mr[1],xr=Ft(Tt[cr]),kr=sr(ur=Rr,0)?kt:(pr=Zt(ur))!=null?pr:0,Mr=((dr=er(xr))!=null?dr:0)+dt*lr+Jt*lr,Tr=function(_r,Pr){var br;return sr(_r,0)?((br=Zt(_r))!=null?br:0)-kt:kt-Pr}(Rr,kr),Or={id:or,value:jr===null?jr:Rr,formattedValue:Dt(Rr),hidden:!1,index:cr,indexValue:xr,data:nr[cr]};ir.push({key:or+"."+Or.indexValue,index:ir.length,data:Or,x:kr,y:Mr,absX:rr.left+kr,absY:rr.top+Mr,width:Tr,height:dt,color:Ut(Or),label:Ht(Or)})})}),ir},xe=function(et){var dt,$t,kt,Tt=et.layout,Dt=et.width,Ft=et.height,Ut=et.padding,Ht=Ut===void 0?0:Ut,Kt=et.innerPadding,Yt=Kt===void 0?0:Kt,Jt=et.valueScale,Zt=et.indexScale,er=et.hiddenIds,rr=er===void 0?[]:er,sr=U(et,fe),nr=sr.keys.filter(function(Pr){return!rr.includes(Pr)}),ir=ue(sr.data,nr),or=Tt==="vertical"?["y","x",Dt]:["x","y",Ft],lr=or[0],cr=or[1],dr=or[2],ur=de(ir,sr.getIndex,Ht,Zt,dr,cr),pr=Jt.min==="auto"?me:function(Pr){return Pr},mr=ir.reduce(function(Pr,br){return[].concat(Pr,nr.map(function(wr){return br[wr]}))},[]).filter(Boolean),jr=pr(Math.min.apply(Math,mr)),Rr=(kt=Math.max.apply(Math,mr),isFinite(kt)?kt:0),xr=pn(Jt,{all:mr,min:jr,max:Rr},lr==="x"?Dt:Ft,lr),kr=Tt==="vertical"?[ur,xr]:[xr,ur],Mr=kr[0],Tr=kr[1],Or=(ur.bandwidth()-Yt*(nr.length-1))/nr.length,_r=[Q({},sr,{data:ir,keys:nr,innerPadding:Yt,xScale:Mr,yScale:Tr}),Or,(dt=Jt.reverse)!=null&&dt,($t=xr(0))!=null?$t:0];return{xScale:Mr,yScale:Tr,bars:Or>0?Tt==="vertical"?pe.apply(void 0,_r):ye.apply(void 0,_r):[]}},Se=["data","layout","width","height","padding","valueScale","indexScale","hiddenIds"],ke=function(et){var dt;return et.some(Array.isArray)?ke((dt=[]).concat.apply(dt,et)):et},we=function(et,dt,$t){var kt=et.formatValue,Tt=et.getColor,Dt=et.getIndex,Ft=et.getTooltipLabel,Ut=et.innerPadding,Ht=et.stackedData,Kt=et.xScale,Yt=et.yScale,Jt=et.margin,Zt=[];return Ht.forEach(function(er){return Kt.domain().forEach(function(rr,sr){var nr,ir,or=er[sr],lr=(nr=Kt(Dt(or.data)))!=null?nr:0,cr=((ir=function(Rr){return Yt(Rr[$t?0:1])}(or))!=null?ir:0)+.5*Ut,dr=function(Rr,xr){var kr;return((kr=Yt(Rr[$t?1:0]))!=null?kr:0)-xr}(or,cr)-Ut,ur=ce(or.data[er.key]),pr=ur[0],mr=ur[1],jr={id:er.key,value:pr===null?pr:mr,formattedValue:kt(mr),hidden:!1,index:sr,indexValue:rr,data:se(or.data)};Zt.push({key:er.key+"."+rr,index:Zt.length,data:jr,x:lr,y:cr,absX:Jt.left+lr,absY:Jt.top+cr,width:dt,height:dr,color:Tt(jr),label:Ft(jr)})})}),Zt},Le=function(et,dt,$t){var kt=et.formatValue,Tt=et.getColor,Dt=et.getIndex,Ft=et.getTooltipLabel,Ut=et.innerPadding,Ht=et.stackedData,Kt=et.xScale,Yt=et.yScale,Jt=et.margin,Zt=[];return Ht.forEach(function(er){return Yt.domain().forEach(function(rr,sr){var nr,ir,or=er[sr],lr=(nr=Yt(Dt(or.data)))!=null?nr:0,cr=((ir=function(Rr){return Kt(Rr[$t?1:0])}(or))!=null?ir:0)+.5*Ut,dr=function(Rr,xr){var kr;return((kr=Kt(Rr[$t?0:1]))!=null?kr:0)-xr}(or,cr)-Ut,ur=ce(or.data[er.key]),pr=ur[0],mr=ur[1],jr={id:er.key,value:pr===null?pr:mr,formattedValue:kt(mr),hidden:!1,index:sr,indexValue:rr,data:se(or.data)};Zt.push({key:er.key+"."+rr,index:Zt.length,data:jr,x:cr,y:lr,absX:Jt.left+cr,absY:Jt.top+lr,width:dr,height:dt,color:Tt(jr),label:Ft(jr)})})}),Zt},Ce=function(et){var dt,$t,kt=et.data,Tt=et.layout,Dt=et.width,Ft=et.height,Ut=et.padding,Ht=Ut===void 0?0:Ut,Kt=et.valueScale,Yt=et.indexScale,Jt=et.hiddenIds,Zt=Jt===void 0?[]:Jt,er=U(et,Se),rr=er.keys.filter(function(Or){return!Zt.includes(Or)}),sr=_$2().keys(rr).offset(q$2)(ue(kt,rr)),nr=Tt==="vertical"?["y","x",Dt]:["x","y",Ft],ir=nr[0],or=nr[1],lr=nr[2],cr=de(kt,er.getIndex,Ht,Yt,lr,or),dr=($t=ke(sr),Kt.type==="log"?$t.filter(function(Or){return Or!==0}):$t),ur=Math.min.apply(Math,dr),pr=Math.max.apply(Math,dr),mr=pn(Kt,{all:dr,min:ur,max:pr},ir==="x"?Dt:Ft,ir),jr=Tt==="vertical"?[cr,mr]:[mr,cr],Rr=jr[0],xr=jr[1],kr=er.innerPadding>0?er.innerPadding:0,Mr=cr.bandwidth(),Tr=[Q({},er,{innerPadding:kr,stackedData:sr,xScale:Rr,yScale:xr}),Mr,(dt=Kt.reverse)!=null&&dt];return{xScale:Rr,yScale:xr,bars:Mr>0?Tt==="vertical"?we.apply(void 0,Tr):Le.apply(void 0,Tr):[]}},We=function(et){var dt=et.bars,$t=et.direction,kt=et.from,Tt=et.groupMode,Dt=et.layout,Ft=et.legendLabel,Ut=et.reverse,Ht=gn(Ft??(kt==="indexes"?"indexValue":"id"));return kt==="indexes"?function(Kt,Yt,Jt){var Zt=J$1(Kt.map(function(er){var rr,sr;return{id:(rr=er.data.indexValue)!=null?rr:"",label:Jt(er.data),hidden:er.data.hidden,color:(sr=er.color)!=null?sr:"#000"}}),function(er){return er.id});return Yt==="horizontal"&&Zt.reverse(),Zt}(dt,Dt,Ht):function(Kt,Yt,Jt,Zt,er,rr){var sr=J$1(Kt.map(function(nr){var ir;return{id:nr.data.id,label:rr(nr.data),hidden:nr.data.hidden,color:(ir=nr.color)!=null?ir:"#000"}}),function(nr){return nr.id});return(Yt==="vertical"&&Zt==="stacked"&&Jt==="column"&&er!==!0||Yt==="horizontal"&&Zt==="stacked"&&er===!0)&&sr.reverse(),sr}(dt,Dt,$t,Tt,Ut,Ht)},Me=function(et,dt,$t){var kt=et.get(dt)||0;et.set(dt,kt+$t)},Be=function(et,dt,$t){var kt=et.get(dt)||0;et.set(dt,kt+($t>0?$t:0))},Re=function(et,dt,$t){var kt=et.get(dt)||0;et.set(dt,Math.max(kt,Number($t)))},Oe=function(et,dt){var $t=et.get(dt)||0;et.set(dt,$t+1)},Ie=function(et){var dt,$t=et.indexBy,kt=$t===void 0?le.indexBy:$t,Tt=et.keys,Dt=Tt===void 0?le.keys:Tt,Ft=et.label,Ut=Ft===void 0?le.label:Ft,Ht=et.tooltipLabel,Kt=Ht===void 0?le.tooltipLabel:Ht,Yt=et.valueFormat,Jt=et.colors,Zt=Jt===void 0?le.colors:Jt,er=et.colorBy,rr=er===void 0?le.colorBy:er,sr=et.borderColor,nr=sr===void 0?le.borderColor:sr,ir=et.labelTextColor,or=ir===void 0?le.labelTextColor:ir,lr=et.groupMode,cr=lr===void 0?le.groupMode:lr,dr=et.layout,ur=dr===void 0?le.layout:dr,pr=et.data,mr=et.margin,jr=et.width,Rr=et.height,xr=et.padding,kr=xr===void 0?le.padding:xr,Mr=et.innerPadding,Tr=Mr===void 0?le.innerPadding:Mr,Or=et.valueScale,_r=Or===void 0?le.valueScale:Or,Pr=et.indexScale,br=Pr===void 0?le.indexScale:Pr,wr=et.initialHiddenIds,zr=wr===void 0?le.initialHiddenIds:wr,Hr=et.enableLabel,Yr=Hr===void 0?le.enableLabel:Hr,es=et.labelSkipWidth,rs=es===void 0?le.labelSkipWidth:es,Wr=et.labelSkipHeight,Xr=Wr===void 0?le.labelSkipHeight:Wr,ns=et.legends,gs=ns===void 0?le.legends:ns,us=et.legendLabel,ps=et.totalsOffset,cs=ps===void 0?le.totalsOffset:ps,ss=reactExports.useState(zr??[]),fs=ss[0],hs=ss[1],$s=reactExports.useCallback(function(Os){hs(function(ds){return ds.indexOf(Os)>-1?ds.filter(function(Gr){return Gr!==Os}):[].concat(ds,[Os])})},[]),ks=bn(kt),Ds=bn(Ut),_s=bn(Kt),As=hn(Yt),Ns=M$3(),Is=hr(Zt,rr),zs=Ye$1(nr,Ns),Gs=Ye$1(or,Ns),Ws=(cr==="grouped"?xe:Ce)({layout:ur,data:pr,getIndex:ks,keys:Dt,width:jr,height:Rr,getColor:Is,padding:kr,innerPadding:Tr,valueScale:_r,indexScale:br,hiddenIds:fs,formatValue:As,getTooltipLabel:_s,margin:mr}),Qs=Ws.bars,qs=Ws.xScale,Bs=Ws.yScale,Js=reactExports.useMemo(function(){return Qs.filter(function(Os){return Os.data.value!==null}).map(function(Os,ds){return Q({},Os,{index:ds})})},[Qs]),Ys=reactExports.useCallback(function(Os){var ds=Os.width,Gr=Os.height;return!!Yr&&!(rs>0&&ds<rs)&&!(Xr>0&&Gr<Xr)},[Yr,rs,Xr]),ln=reactExports.useMemo(function(){return Dt.map(function(Os){var ds=Qs.find(function(Gr){return Gr.data.id===Os});return Q({},ds,{data:Q({id:Os},ds==null?void 0:ds.data,{hidden:fs.includes(Os)})})})},[fs,Dt,Qs]),Pn=(dt=_r.reverse)!=null&&dt,Qn=reactExports.useMemo(function(){return gs.map(function(Os){return[Os,We({bars:Os.dataFrom==="keys"?ln:Qs,direction:Os.direction,from:Os.dataFrom,groupMode:cr,layout:ur,legendLabel:us,reverse:Pn})]})},[gs,ln,Qs,cr,ur,us,Pn]),xo=reactExports.useMemo(function(){return function(Os,ds,Gr,bs,xs,ms,ls){bs===void 0&&(bs=le.layout),xs===void 0&&(xs=le.groupMode);var ys=[];if(Os.length===0)return ys;var ws=new Map,Ss=Os[0].width,Fs=Os[0].height;if(xs==="stacked"){var vs=new Map;Os.forEach(function(Rs){var Ms=Rs.data,Ts=Ms.indexValue,Vs=Ms.value;Me(ws,Ts,Number(Vs)),Be(vs,Ts,Number(Vs))}),vs.forEach(function(Rs,Ms){var Ts,Vs,Ks,yn=ws.get(Ms)||0;bs==="vertical"?(Ts=ds(Ms),Vs=Gr(Rs),Ks=Gr(Rs/2)):(Ts=ds(Rs),Vs=Gr(Ms),Ks=ds(Rs/2)),Ts+=bs==="vertical"?Ss/2:ms,Vs+=bs==="vertical"?-ms:Fs/2,ys.push({key:"total_"+Ms,x:Ts,y:Vs,value:yn,formattedValue:ls(yn),animationOffset:Ks})})}else if(xs==="grouped"){var as=new Map,js=new Map;Os.forEach(function(Rs){var Ms=Rs.data,Ts=Ms.indexValue,Vs=Ms.value;Me(ws,Ts,Number(Vs)),Re(as,Ts,Number(Vs)),Oe(js,Ts)}),as.forEach(function(Rs,Ms){var Ts,Vs,Ks,yn=ws.get(Ms)||0,Vn=js.get(Ms);bs==="vertical"?(Ts=ds(Ms),Vs=Gr(Rs),Ks=Gr(Rs/2)):(Ts=ds(Rs),Vs=Gr(Ms),Ks=ds(Rs/2)),Ts+=bs==="vertical"?Vn*Ss/2:ms,Vs+=bs==="vertical"?-ms:Vn*Fs/2,ys.push({key:"total_"+Ms,x:Ts,y:Vs,value:yn,formattedValue:ls(yn),animationOffset:Ks})})}return ys}(Qs,qs,Bs,ur,cr,cs,As)},[Qs,qs,Bs,ur,cr,cs,As]);return{bars:Qs,barsWithValue:Js,xScale:qs,yScale:Bs,getIndex:ks,getLabel:Ds,getTooltipLabel:_s,formatValue:As,getColor:Is,getBorderColor:zs,getLabelColor:Gs,shouldRenderBarLabel:Ys,hiddenIds:fs,toggleSerie:$s,legendsWithData:Qn,barTotals:xo}},Ve=function(et){var dt=et.data,$t=et.springConfig,kt=et.animate,Tt=et.layout,Dt=Tt===void 0?re.layout:Tt,Ft=M$3();return useTransition(dt,{keys:function(Ut){return Ut.key},from:function(Ut){return{x:Dt==="vertical"?Ut.x:Ut.animationOffset,y:Dt==="vertical"?Ut.animationOffset:Ut.y,labelOpacity:0}},enter:function(Ut){return{x:Ut.x,y:Ut.y,labelOpacity:1}},update:function(Ut){return{x:Ut.x,y:Ut.y,labelOpacity:1}},leave:function(Ut){return{x:Dt==="vertical"?Ut.x:Ut.animationOffset,y:Dt==="vertical"?Ut.animationOffset:Ut.y,labelOpacity:0}},config:$t,immediate:!kt,initial:kt?void 0:null})(function(Ut,Ht){return jsxRuntimeExports.jsx(animated$1.text,{x:Ut.x,y:Ut.y,fillOpacity:Ut.labelOpacity,style:Q({},Ft.labels.text,{pointerEvents:"none"}),fontWeight:"bold",fontSize:Ft.labels.text.fontSize,fontFamily:Ft.labels.text.fontFamily,textAnchor:Dt==="vertical"?"middle":"start",alignmentBaseline:Dt==="vertical"?"alphabetic":"middle",children:Ht.formattedValue},Ht.key)})},Te=["isInteractive","animate","motionConfig","theme","renderWrapper"],He=function(et){var dt,$t=et.data,kt=et.indexBy,Tt=et.keys,Dt=et.margin,Ft=et.width,Ut=et.height,Ht=et.groupMode,Kt=et.layout,Yt=et.valueScale,Jt=et.indexScale,Zt=et.padding,er=et.innerPadding,rr=et.axisTop,sr=et.axisRight,nr=et.axisBottom,ir=nr===void 0?re.axisBottom:nr,or=et.axisLeft,lr=or===void 0?re.axisLeft:or,cr=et.enableGridX,dr=cr===void 0?re.enableGridX:cr,ur=et.enableGridY,pr=ur===void 0?re.enableGridY:ur,mr=et.gridXValues,jr=et.gridYValues,Rr=et.layers,xr=Rr===void 0?re.layers:Rr,kr=et.barComponent,Mr=kr===void 0?re.barComponent:kr,Tr=et.enableLabel,Or=Tr===void 0?re.enableLabel:Tr,_r=et.label,Pr=et.labelSkipWidth,br=Pr===void 0?re.labelSkipWidth:Pr,wr=et.labelSkipHeight,zr=wr===void 0?re.labelSkipHeight:wr,Hr=et.labelTextColor,Yr=et.labelPosition,es=Yr===void 0?re.labelPosition:Yr,rs=et.labelOffset,Wr=rs===void 0?re.labelOffset:rs,Xr=et.markers,ns=Xr===void 0?re.markers:Xr,gs=et.colorBy,us=et.colors,ps=et.defs,cs=ps===void 0?re.defs:ps,ss=et.fill,fs=ss===void 0?re.fill:ss,hs=et.borderRadius,$s=hs===void 0?re.borderRadius:hs,ks=et.borderWidth,Ds=ks===void 0?re.borderWidth:ks,_s=et.borderColor,As=et.annotations,Ns=As===void 0?re.annotations:As,Is=et.legendLabel,zs=et.tooltipLabel,Gs=et.valueFormat,Ws=et.isInteractive,Qs=Ws===void 0?re.isInteractive:Ws,qs=et.tooltip,Bs=qs===void 0?re.tooltip:qs,Js=et.onClick,Ys=et.onMouseEnter,ln=et.onMouseLeave,Pn=et.legends,Qn=et.role,xo=Qn===void 0?re.role:Qn,Os=et.ariaLabel,ds=et.ariaLabelledBy,Gr=et.ariaDescribedBy,bs=et.isFocusable,xs=bs===void 0?re.isFocusable:bs,ms=et.barAriaLabel,ls=et.barAriaLabelledBy,ys=et.barAriaDescribedBy,ws=et.barAriaHidden,Ss=et.barAriaDisabled,Fs=et.initialHiddenIds,vs=et.enableTotals,as=vs===void 0?re.enableTotals:vs,js=et.totalsOffset,Rs=js===void 0?re.totalsOffset:js,Ms=et.forwardedRef,Ts=Dr(),Vs=Ts.animate,Ks=Ts.config,yn=cn$1(Ft,Ut,Dt),Vn=yn.outerWidth,go=yn.outerHeight,_i=yn.margin,bo=yn.innerWidth,qo=yn.innerHeight,$o=Ie({indexBy:kt,label:_r,tooltipLabel:zs,valueFormat:Gs,colors:us,colorBy:gs,borderColor:_s,labelTextColor:Hr,groupMode:Ht,layout:Kt,data:$t,keys:Tt,margin:_i,width:bo,height:qo,padding:Zt,innerPadding:er,valueScale:Yt,indexScale:Jt,enableLabel:Or,labelSkipWidth:br,labelSkipHeight:zr,legends:Pn,legendLabel:Is,initialHiddenIds:Fs,totalsOffset:Rs}),bv=$o.bars,xw=$o.barsWithValue,$m=$o.xScale,l0=$o.yScale,U2=$o.getLabel,Zs=$o.getTooltipLabel,Bn=$o.getBorderColor,vn=$o.getLabelColor,Kl=$o.shouldRenderBarLabel,na=$o.toggleSerie,km=$o.legendsWithData,yv=$o.barTotals,aC=$o.getColor,vv=he(Kt,(dt=Yt==null?void 0:Yt.reverse)!=null&&dt,es,Wr),oC=useTransition(xw,{keys:function(Ls){return Ls.key},from:function(Ls){return Q({borderColor:Bn(Ls),color:Ls.color,height:0,labelColor:vn(Ls),labelOpacity:0},vv(Ls.width,Ls.height),{transform:"translate("+Ls.x+", "+(Ls.y+Ls.height)+")",width:Ls.width},Kt==="vertical"?{}:{height:Ls.height,transform:"translate("+Ls.x+", "+Ls.y+")",width:0})},enter:function(Ls){return Q({borderColor:Bn(Ls),color:Ls.color,height:Ls.height,labelColor:vn(Ls),labelOpacity:1},vv(Ls.width,Ls.height),{transform:"translate("+Ls.x+", "+Ls.y+")",width:Ls.width})},update:function(Ls){return Q({borderColor:Bn(Ls),color:Ls.color,height:Ls.height,labelColor:vn(Ls),labelOpacity:1},vv(Ls.width,Ls.height),{transform:"translate("+Ls.x+", "+Ls.y+")",width:Ls.width})},leave:function(Ls){return Q({borderColor:Bn(Ls),color:Ls.color,height:0,labelColor:vn(Ls),labelOpacity:0},vv(Ls.width,Ls.height),{labelY:0,transform:"translate("+Ls.x+", "+(Ls.y+Ls.height)+")",width:Ls.width},Kt==="vertical"?{}:Q({},vv(Ls.width,Ls.height),{labelX:0,height:Ls.height,transform:"translate("+Ls.x+", "+Ls.y+")",width:0}))},config:Ks,immediate:!Vs,initial:Vs?void 0:null}),eS=reactExports.useMemo(function(){return{borderRadius:$s,borderWidth:Ds,enableLabel:Or,isInteractive:Qs,labelSkipWidth:br,labelSkipHeight:zr,onClick:Js,onMouseEnter:Ys,onMouseLeave:ln,getTooltipLabel:Zs,tooltip:Bs,isFocusable:xs,ariaLabel:ms,ariaLabelledBy:ls,ariaDescribedBy:ys,ariaHidden:ws,ariaDisabled:Ss}},[$s,Ds,Or,Zs,Qs,zr,br,Js,Ys,ln,Bs,xs,ms,ls,ys,ws,Ss]),lC=Mn$1(cs,bv,fs,{dataKey:"data",targetKey:"data.fill"}),Mu={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};xr.includes("annotations")&&(Mu.annotations=jsxRuntimeExports.jsx($,{bars:bv,annotations:Ns},"annotations")),xr.includes("axes")&&(Mu.axes=jsxRuntimeExports.jsx(V,{xScale:$m,yScale:l0,width:bo,height:qo,top:rr,right:sr,bottom:ir,left:lr},"axes")),xr.includes("bars")&&(Mu.bars=jsxRuntimeExports.jsx(reactExports.Fragment,{children:oC(function(Ls,Ev){return reactExports.createElement(Mr,Q({},eS,{bar:Ev,style:Ls,shouldRenderLabel:Kl(Ev),label:U2(Ev.data)}))})},"bars")),xr.includes("grid")&&(Mu.grid=jsxRuntimeExports.jsx(j$2,{width:bo,height:qo,xScale:dr?$m:null,yScale:pr?l0:null,xValues:mr,yValues:jr},"grid")),xr.includes("legends")&&(Mu.legends=jsxRuntimeExports.jsx(ee,{width:bo,height:qo,legends:km,toggleSerie:na},"legends")),xr.includes("markers")&&(Mu.markers=jsxRuntimeExports.jsx(Pt,{markers:ns,width:bo,height:qo,xScale:$m,yScale:l0},"markers")),xr.includes("totals")&&as&&(Mu.totals=jsxRuntimeExports.jsx(Ve,{data:yv,springConfig:Ks,animate:Vs,layout:Kt},"totals"));var cC=Q({},eS,{margin:_i,width:Ft,height:Ut,innerWidth:bo,innerHeight:qo,bars:bv,legendData:km,enableLabel:Or,xScale:$m,yScale:l0,tooltip:Bs,getTooltipLabel:Zs,onClick:Js,onMouseEnter:Ys,onMouseLeave:ln,getColor:aC});return jsxRuntimeExports.jsx(Rt,{width:Vn,height:go,margin:_i,defs:lC,role:xo,ariaLabel:Os,ariaLabelledBy:ds,ariaDescribedBy:Gr,isFocusable:xs,ref:Ms,children:xr.map(function(Ls,Ev){var tS;return typeof Ls=="function"?jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.createElement(Ls,cC)},Ev):(tS=Mu==null?void 0:Mu[Ls])!=null?tS:null})})},Pe=reactExports.forwardRef(function(et,dt){var $t=et.isInteractive,kt=$t===void 0?re.isInteractive:$t,Tt=et.animate,Dt=Tt===void 0?re.animate:Tt,Ft=et.motionConfig,Ut=Ft===void 0?re.motionConfig:Ft,Ht=et.theme,Kt=et.renderWrapper,Yt=U(et,Te);return jsxRuntimeExports.jsx(Fr,{animate:Dt,isInteractive:kt,motionConfig:Ut,renderWrapper:Kt,theme:Ht,children:jsxRuntimeExports.jsx(He,Q({},Yt,{isInteractive:kt,forwardedRef:dt}))})}),Ee=["isInteractive","renderWrapper","theme"],Fe=function(et,dt,$t,kt){return et.find(function(Tt){return wn$1(Tt.x+dt.left,Tt.y+dt.top,Tt.width,Tt.height,$t,kt)})},ze=function(et){var dt,$t=et.data,kt=et.indexBy,Tt=et.keys,Dt=et.margin,Ft=et.width,Ut=et.height,Ht=et.groupMode,Kt=et.layout,Yt=et.valueScale,Jt=et.indexScale,Zt=et.padding,er=et.innerPadding,rr=et.axisTop,sr=et.axisRight,nr=et.axisBottom,ir=nr===void 0?oe.axisBottom:nr,or=et.axisLeft,lr=or===void 0?oe.axisLeft:or,cr=et.enableGridX,dr=cr===void 0?oe.enableGridX:cr,ur=et.enableGridY,pr=ur===void 0?oe.enableGridY:ur,mr=et.gridXValues,jr=et.gridYValues,Rr=et.labelPosition,xr=Rr===void 0?oe.labelPosition:Rr,kr=et.labelOffset,Mr=kr===void 0?oe.labelOffset:kr,Tr=et.layers,Or=Tr===void 0?oe.layers:Tr,_r=et.renderBar,Pr=_r===void 0?oe.renderBar:_r,br=et.enableLabel,wr=br===void 0?oe.enableLabel:br,zr=et.label,Hr=et.labelSkipWidth,Yr=Hr===void 0?oe.labelSkipWidth:Hr,es=et.labelSkipHeight,rs=es===void 0?oe.labelSkipHeight:es,Wr=et.labelTextColor,Xr=et.colorBy,ns=et.colors,gs=et.borderRadius,us=gs===void 0?oe.borderRadius:gs,ps=et.borderWidth,cs=ps===void 0?oe.borderWidth:ps,ss=et.borderColor,fs=et.annotations,hs=fs===void 0?oe.annotations:fs,$s=et.legendLabel,ks=et.tooltipLabel,Ds=et.valueFormat,_s=et.isInteractive,As=_s===void 0?oe.isInteractive:_s,Ns=et.tooltip,Is=Ns===void 0?oe.tooltip:Ns,zs=et.onClick,Gs=et.onMouseEnter,Ws=et.onMouseLeave,Qs=et.legends,qs=et.pixelRatio,Bs=qs===void 0?oe.pixelRatio:qs,Js=et.role,Ys=et.forwardedRef,ln=et.enableTotals,Pn=ln===void 0?oe.enableTotals:ln,Qn=et.totalsOffset,xo=Qn===void 0?oe.totalsOffset:Qn,Os=reactExports.useRef(null),ds=M$3(),Gr=cn$1(Ft,Ut,Dt),bs=Gr.margin,xs=Gr.innerWidth,ms=Gr.innerHeight,ls=Gr.outerWidth,ys=Gr.outerHeight,ws=Ie({indexBy:kt,label:zr,tooltipLabel:ks,valueFormat:Ds,colors:ns,colorBy:Xr,borderColor:ss,labelTextColor:Wr,groupMode:Ht,layout:Kt,data:$t,keys:Tt,margin:bs,width:xs,height:ms,padding:Zt,innerPadding:er,valueScale:Yt,indexScale:Jt,enableLabel:wr,labelSkipWidth:Yr,labelSkipHeight:rs,legends:Qs,legendLabel:$s,totalsOffset:xo}),Ss=ws.bars,Fs=ws.barsWithValue,vs=ws.xScale,as=ws.yScale,js=ws.getLabel,Rs=ws.getTooltipLabel,Ms=ws.getBorderColor,Ts=ws.getLabelColor,Vs=ws.shouldRenderBarLabel,Ks=ws.legendsWithData,yn=ws.barTotals,Vn=ws.getColor,go=z$4(),_i=go.showTooltipFromEvent,bo=go.hideTooltip,qo=j$1({annotations:O$1({data:Ss,annotations:hs,getPosition:function(Zs){return{x:Zs.x,y:Zs.y}},getDimensions:function(Zs){var Bn=Zs.width,vn=Zs.height;return{width:Bn,height:vn,size:Math.max(Bn,vn)}}})}),$o=reactExports.useMemo(function(){return{borderRadius:us,borderWidth:cs,isInteractive:As,isFocusable:!1,labelSkipWidth:Yr,labelSkipHeight:rs,margin:bs,width:Ft,height:Ut,innerWidth:xs,innerHeight:ms,bars:Ss,legendData:Ks,enableLabel:wr,xScale:vs,yScale:as,tooltip:Is,getTooltipLabel:Rs,onClick:zs,onMouseEnter:Gs,onMouseLeave:Ws,getColor:Vn}},[us,cs,As,Yr,rs,bs,Ft,Ut,xs,ms,Ss,Ks,wr,vs,as,Is,Rs,zs,Gs,Ws,Vn]),bv=hn(Ds),xw=he(Kt,(dt=Yt==null?void 0:Yt.reverse)!=null&&dt,xr,Mr);reactExports.useEffect(function(){if(Os.current){Os.current.width=ls*Bs,Os.current.height=ys*Bs;var Zs=Os.current.getContext("2d");Zs.scale(Bs,Bs),Zs.fillStyle=ds.background,Zs.fillRect(0,0,ls,ys),Zs.translate(bs.left,bs.top),Or.forEach(function(Bn){Bn==="grid"?typeof ds.grid.line.strokeWidth=="number"&&ds.grid.line.strokeWidth>0&&(Zs.lineWidth=ds.grid.line.strokeWidth,Zs.strokeStyle=ds.grid.line.stroke,dr&&q$1(Zs,{width:xs,height:ms,scale:vs,axis:"x",values:mr}),pr&&q$1(Zs,{width:xs,height:ms,scale:as,axis:"y",values:jr})):Bn==="axes"?W$1(Zs,{xScale:vs,yScale:as,width:xs,height:ms,top:rr,right:sr,bottom:ir,left:lr,theme:ds}):Bn==="bars"?(a$1(Zs,ds.text),Fs.forEach(function(vn){Pr(Zs,Q({bar:vn,borderColor:Ms(vn),borderRadius:us,borderWidth:cs,label:js(vn.data),shouldRenderLabel:Vs(vn),labelStyle:Q({},ds.labels.text,{fill:Ts(vn)})},xw(vn.width,vn.height)))})):Bn==="legends"?Ks.forEach(function(vn){var Kl=vn[0],na=vn[1];L(Zs,Q({},Kl,{data:na,containerWidth:xs,containerHeight:ms,theme:ds}))}):Bn==="annotations"?J(Zs,{annotations:qo,theme:ds}):Bn==="totals"&&Pn?function(vn,Kl,na,km){km===void 0&&(km=oe.layout),a$1(vn,na.labels.text),vn.textBaseline=km==="vertical"?"alphabetic":"middle",vn.textAlign=km==="vertical"?"center":"start",Kl.forEach(function(yv){d(vn,na.labels.text,yv.formattedValue,yv.x,yv.y)})}(Zs,yn,ds,Kt):typeof Bn=="function"&&Bn(Zs,$o)}),Zs.save()}},[ir,lr,sr,rr,Fs,us,cs,qo,dr,pr,Ms,js,Ts,mr,jr,Ht,Ut,ms,xs,$o,Or,Kt,Ks,bs.left,bs.top,ys,ls,Bs,Pr,vs,as,Vs,ds,Ft,yn,Pn,bv,xw]);var $m=reactExports.useCallback(function(Zs){if(Ss&&Os.current){var Bn=kn(Os.current,Zs),vn=Bn[0],Kl=Bn[1],na=Fe(Ss,bs,vn,Kl);na!==void 0?(_i(reactExports.createElement(Is,Q({},na.data,{color:na.color,label:na.label,value:Number(na.data.value)})),Zs),Zs.type==="mouseenter"&&(Gs==null||Gs(na.data,Zs))):bo()}},[bo,bs,Gs,Ss,_i,Is]),l0=reactExports.useCallback(function(Zs){if(Ss&&Os.current){bo();var Bn=kn(Os.current,Zs),vn=Bn[0],Kl=Bn[1],na=Fe(Ss,bs,vn,Kl);na&&(Ws==null||Ws(na.data,Zs))}},[bo,bs,Ws,Ss]),U2=reactExports.useCallback(function(Zs){if(Ss&&Os.current){var Bn=kn(Os.current,Zs),vn=Bn[0],Kl=Bn[1],na=Fe(Ss,bs,vn,Kl);na!==void 0&&(zs==null||zs(Q({},na.data,{color:na.color}),Zs))}},[bs,zs,Ss]);return jsxRuntimeExports.jsx("canvas",{ref:Rn(Os,Ys),width:ls*Bs,height:ys*Bs,style:{width:ls,height:ys,cursor:As?"auto":"normal"},onMouseEnter:As?$m:void 0,onMouseMove:As?$m:void 0,onMouseLeave:As?l0:void 0,onClick:As?U2:void 0,role:Js})},De=reactExports.forwardRef(function(et,dt){var $t=et.isInteractive,kt=et.renderWrapper,Tt=et.theme,Dt=U(et,Ee);return jsxRuntimeExports.jsx(Fr,{isInteractive:$t,renderWrapper:kt,theme:Tt,animate:!1,children:jsxRuntimeExports.jsx(ze,Q({},Dt,{isInteractive:$t,forwardedRef:dt}))})}),Ae=["defaultWidth","defaultHeight","onResize","debounceResize"],Xe=reactExports.forwardRef(function(et,dt){var $t=et.defaultWidth,kt=et.defaultHeight,Tt=et.onResize,Dt=et.debounceResize,Ft=U(et,Ae);return jsxRuntimeExports.jsx($r,{defaultWidth:$t,defaultHeight:kt,onResize:Tt,debounceResize:Dt,children:function(Ut){var Ht=Ut.width,Kt=Ut.height;return jsxRuntimeExports.jsx(Pe,Q({},Ft,{width:Ht,height:Kt,ref:dt}))}})}),Ye=["defaultWidth","defaultHeight","onResize","debounceResize"];reactExports.forwardRef(function(et,dt){var $t=et.defaultWidth,kt=et.defaultHeight,Tt=et.onResize,Dt=et.debounceResize,Ft=U(et,Ye);return jsxRuntimeExports.jsx($r,{defaultWidth:$t,defaultHeight:kt,onResize:Tt,debounceResize:Dt,children:function(Ut){var Ht=Ut.width,Kt=Ut.height;return jsxRuntimeExports.jsx(De,Q({},Ft,{width:Ht,height:Kt,ref:dt}))}})});function LandingAnalytics(){var Zt,er,rr;const{user:et}=useAuth(),[dt,$t]=reactExports.useState(null),[kt,Tt]=reactExports.useState("7"),[Dt,Ft]=reactExports.useState(null),[Ut,Ht]=reactExports.useState(!0);reactExports.useEffect(()=>{async function sr(){const nr=await axiosInstance.get(`https://themessyattic.com/api/landing-analytics/id/by-user/${et.id}`);$t(nr.data.id)}et!=null&&et.id&&sr()},[et==null?void 0:et.id]),reactExports.useEffect(()=>{dt&&Kt(kt)},[kt,dt]);async function Kt(sr){if(dt){Ht(!0);try{const nr=await axiosInstance.get(`https://themessyattic.com/api/landing-analytics/summary/${dt}?days=${sr}`);nr.data&&nr.data.success?Ft({views:nr.data.views||[],clicks:nr.data.clicks||[],downloads:nr.data.downloads||[]}):(console.warn(" Unexpected response shape:",nr.data),Ft({views:[],clicks:[],downloads:[]}))}catch(nr){console.error(" Error fetching analytics:",nr)}finally{Ht(!1)}}}const Yt=[{key:"views",color:"#1f2937",label:"Views"},{key:"clicks",color:"#7bed9f",label:"Clicks"},{key:"downloads",color:"#670fe7",label:"Downloads"}],Jt=(()=>{if(!Dt)return[];const sr=parseInt(kt,10)||7,nr=new Date,ir=Array.from({length:sr},(lr,cr)=>{const dr=new Date(nr);return dr.setDate(nr.getDate()-(sr-1-cr)),dr.toISOString().slice(0,10)}),or=(lr,cr)=>{var dr;return((dr=lr==null?void 0:lr.find(ur=>ur.date.slice(0,10)===cr))==null?void 0:dr.total)||0};return ir.map(lr=>({date:(()=>{const dr=(typeof lr=="string"?lr:new Date(lr).toISOString()).split("T")[0].split("-"),ur=Number(dr[0]),pr=Number(dr[1])-1,mr=Number(dr[2]);return new Date(ur,pr,mr).toLocaleDateString("en-US",{month:"short",day:"numeric"})})(),Views:or(Dt.views,lr),Clicks:or(Dt.clicks,lr),Downloads:or(Dt.downloads,lr)}))})();return jsxRuntimeExports.jsx("div",{className:`w-full min-h-screen px-4 py-8 pt-24
      text-dashboard-text-light
      dark:text-dashboard-text-dark
      bg-dashboard-bg-light
      dark:bg-dashboard-bg-dark`,children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h1",{className:`text-xl font-semibold normal-case
            text-dashboard-text-light
            dark:text-dashboard-text-dark`,children:"Views"}),jsxRuntimeExports.jsx(ChartNoAxesColumn,{size:22,className:`mt-[1px] sm:mt-0
            text-dashboard-text-light
            dark:text-dashboard-text-dark`})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["7","14","30","90"].map(sr=>jsxRuntimeExports.jsxs("button",{onClick:()=>Tt(sr),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${kt===sr?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-text-light dark:text-dashboard-text-dark":"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark text-dashboard-muted-light dark:text-dashboard-muted-dark border border-dashboard-border-light dark:border-dashboard-border-dark"}`,children:[sr," days"]},sr))})]}),Dt&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-3 sm:grid-cols-3 mb-6",children:Yt.map(sr=>{var nr;return jsxRuntimeExports.jsxs("div",{className:`flex flex-col items-center justify-center rounded-xl p-3 sm:p-4 shadow-md
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light
              dark:border-dashboard-border-dark`,children:[jsxRuntimeExports.jsx("p",{className:`text-sm
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark`,children:sr.label}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-semibold ${sr.key==="views"?"text-dashboard-metric-light dark:text-dashboard-metric-dark dark:drop-shadow-[0_0_10px_rgba(229,240,255,0.35)]":""}`,style:sr.key!=="views"?{color:sr.color}:void 0,children:((nr=Dt[sr.key])==null?void 0:nr.reduce((ir,or)=>ir+or.total,0))||0})]},sr.key)})}),Dt&&jsxRuntimeExports.jsxs("div",{className:`rounded-2xl py-8 text-center mb-6
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark`,children:[jsxRuntimeExports.jsx("p",{className:`text-sm uppercase tracking-wide mb-1
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:"Total Views"}),jsxRuntimeExports.jsx("h2",{className:`text-5xl font-bold mb-1
              text-dashboard-metric-light
              dark:text-dashboard-metric-dark`,children:Intl.NumberFormat("en-US",{notation:"compact"}).format(((Zt=Dt.views)==null?void 0:Zt.reduce((sr,nr)=>sr+nr.total,0))||0)}),Jt.length>0&&jsxRuntimeExports.jsxs("p",{className:`text-sm mt-1
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark`,children:[new Date(Jt[0].date).toLocaleDateString("en-US",{month:"short",day:"numeric"})," ",""," ",new Date(Jt[Jt.length-1].date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),jsxRuntimeExports.jsx("div",{className:`rounded-2xl p-4 h-[400px] shadow-inner mb-8
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark`,children:Ut?jsxRuntimeExports.jsx("p",{className:`text-center mt-20
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:"Loading analytics..."}):Dt?jsxRuntimeExports.jsx(Xe,{data:Jt,keys:["Views","Clicks","Downloads"],colors:({id:sr})=>sr==="Views"?"#1f2937":sr==="Clicks"?"#7bed9f":"#670fe7",indexBy:"date",margin:{top:20,right:20,bottom:40,left:50},padding:.25,borderRadius:[4,4,0,0],axisTop:null,axisRight:null,axisLeft:{tickSize:0,tickPadding:8,format:sr=>sr>=1e3?`${sr/1e3}K`:sr,legend:""},axisBottom:{tickSize:0,tickPadding:10,tickRotation:0,legend:"",tickValues:[(er=Jt[0])==null?void 0:er.date,(rr=Jt[Jt.length-1])==null?void 0:rr.date],format:sr=>new Date(sr).toLocaleDateString("en-US",{month:"short",day:"numeric"})},enableLabel:!1,enableGridX:!1,gridYValues:5,theme:{textColor:"#9ca3af",grid:{line:{stroke:"#1f1f1f",strokeWidth:1}},axis:{ticks:{text:{fill:"#9ca3af",fontSize:12}}},tooltip:{container:{background:"#111",color:"#fff",borderRadius:"8px",border:"1px solid #333",boxShadow:"0 2px 8px rgba(0,0,0,0.4)",padding:"8px 10px",fontSize:12}}},tooltip:({id:sr,value:nr,indexValue:ir,color:or})=>jsxRuntimeExports.jsxs("div",{className:`px-3 py-2 rounded-lg
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark`,children:[jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium",style:{color:or},children:[sr,": ",nr]}),jsxRuntimeExports.jsx("p",{className:`text-xs
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark`,children:ir})]}),groupMode:"grouped"}):jsxRuntimeExports.jsx("p",{className:`text-center
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark`,children:"No analytics data yet"})})]})})}function ThankYouModal({visible:et,message:dt,setMessage:$t,onClose:kt,loading:Tt,onMarkSent:Dt}){return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md z-[999] flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#0F1629] border border-gray-700 rounded-xl w-full max-w-3xl shadow-2xl p-0 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-[#1E293B] px-6 py-4 border-b border-gray-700",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-white",children:"Email Preview"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"This is what your thank-you email will look like"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-gray-400 text-xs uppercase tracking-wider",children:"Subject"}),jsxRuntimeExports.jsx("input",{type:"text",value:"Thank you for your purchase!",disabled:!0,className:"w-full mt-1 bg-gray-800 text-gray-200 border border-gray-700 rounded-lg p-2 text-sm opacity-80"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-gray-400 text-xs uppercase tracking-wider",children:"Email Body"}),Tt?jsxRuntimeExports.jsxs("div",{className:"w-full h-72 bg-gray-900 border border-gray-700 rounded-lg flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"w-3 h-3 bg-gray-400 rounded-full animate-bounce"}),jsxRuntimeExports.jsx("span",{className:"w-3 h-3 bg-gray-400 rounded-full animate-bounce [animation-delay:0.15s]"}),jsxRuntimeExports.jsx("span",{className:"w-3 h-3 bg-gray-400 rounded-full animate-bounce [animation-delay:0.3s]"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mt-4",children:"Writing your message..."})]}):jsxRuntimeExports.jsx("textarea",{value:dt,onChange:Ft=>$t(Ft.target.value),className:"w-full h-72 bg-gray-900 text-white border border-gray-700 rounded-lg p-4 text-sm leading-relaxed resize-none",style:{fontFamily:"ui-sans-serif, system-ui"}})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 bg-[#1E293B] flex justify-end items-center gap-3 border-t border-gray-700",children:[jsxRuntimeExports.jsx("button",{onClick:kt,className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-lg hover:bg-gray-600 transition",children:"Close"}),jsxRuntimeExports.jsx("a",{href:`mailto:?subject=Thank%20you!&body=${encodeURIComponent(dt)}`,className:"px-4 py-2 bg-green text-black font-semibold rounded-lg hover:bg-green/80 transition",children:"Open Email App"}),jsxRuntimeExports.jsx("button",{onClick:Dt,className:"px-4 py-2 bg-blue text-white font-semibold rounded-lg hover:bg-blue/80 transition",children:"Mark as Sent"})]})]})}):null}function SellerDashboard(){const{user:et}=useAuth(),[dt,$t]=reactExports.useState(null),[kt,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState([]),[Kt,Yt]=reactExports.useState(1),[Jt,Zt]=reactExports.useState(1),[er,rr]=reactExports.useState(""),[sr,nr]=reactExports.useState(!1),[ir,or]=reactExports.useState(!1),[lr,cr]=reactExports.useState(null);reactExports.useEffect(()=>{if(!(et!=null&&et.id))return;if(!(et!=null&&et.stripe_connect_account_id)){Ft(!1);return}(async()=>{try{const[jr,Rr,xr]=await Promise.all([axiosInstance.get(`/seller/balance/${et.stripe_connect_account_id}`),axiosInstance.get(`/seller/payouts/${et.stripe_connect_account_id}`),axiosInstance.get(`/seller/sales/${et.id}?page=${Kt}&limit=20`)]);$t(jr.data.balance),Tt(Rr.data.payouts||[]),Zt(xr.data.pages||1),Ht(xr.data.sales||[])}catch(jr){console.error(" Error fetching seller data:",jr),y$4.error("Failed to load seller info.")}finally{Ft(!1)}})()},[et==null?void 0:et.stripe_connect_account_id,Kt]);const dr=async()=>{try{const mr=await axiosInstance.post("/seller/stripe-dashboard",{accountId:et.stripe_connect_account_id});window.open(mr.data.url,"_blank")}catch(mr){console.error("Stripe Dashboard Error:",mr),y$4.error("Unable to open Stripe dashboard.")}},ur=async mr=>{try{or(!0),nr(!0),cr(mr.id);const jr=await axiosInstance.post("/seller/generate-thank-you",{saleId:mr.id,buyerEmail:mr.buyer_email,productName:mr.product_name});jr.data.success?rr(jr.data.message):rr("AI could not generate a message.")}catch(jr){console.error(jr),rr("AI generation failed.")}finally{or(!1)}},pr=async mr=>{try{(await axiosInstance.post("/seller/mark-thank-you-sent",{saleId:mr})).data.success?(Ht(Rr=>Rr.map(xr=>xr.id===mr?{...xr,thank_you_sent:1}:xr)),y$4.success("Thank-you marked as sent"),nr(!1)):y$4.error("Failed to update status")}catch(jr){console.error(" Error marking thank-you sent:",jr),y$4.error("Server error")}};return Dt?jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen text-gray-400",children:"Loading seller data..."})}):et!=null&&et.stripe_connect_account_id?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:`
      p-8
      text-dashboard-text-light
      dark:text-dashboard-text-dark
      bg-dashboard-bg-light
      dark:bg-dashboard-bg-dark
  `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold normal-case",children:"Seller Dashboard"}),jsxRuntimeExports.jsx(Landmark,{size:22,className:`
        text-dashboard-muted-light
        dark:text-green
  `})]}),dt?jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-10",children:[jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg`,children:[jsxRuntimeExports.jsx("h3",{className:`text-dashboard-muted-light
            dark:text-dashboard-muted-dark text-sm mb-1`,children:"Available Balance"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-green",children:["$",(dt.available/100||0).toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg`,children:[jsxRuntimeExports.jsx("h3",{className:`text-dashboard-muted-light
            dark:text-dashboard-muted-dark text-sm mb-1`,children:"Pending Balance"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:["$",(dt.pending/100||0).toFixed(2)]})]}),jsxRuntimeExports.jsx("div",{className:`bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg flex items-center justify-center`,children:jsxRuntimeExports.jsx("button",{onClick:dr,className:"px-6 py-2 bg-green text-black font-semibold rounded-lg hover:opacity-90 transition",children:"Open Stripe Dashboard"})})]}):jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark mb-6",children:"No balance data found for this account."}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light
      dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg`,children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-dashboard-text-light dark:text-dashboard-text-dark mb-4",children:"Recent Payouts"}),kt.length>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:`min-w-full text-sm text-left text-dashboard-text-light
                dark:text-dashboard-text-dark`,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:`border-b border-gray-700 text-dashboard-muted-light
                  dark:text-dashboard-muted-dark uppercase text-xs`,children:[jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Date"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Amount"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Arrival"})]})}),jsxRuntimeExports.jsx("tbody",{children:kt.map(mr=>jsxRuntimeExports.jsxs("tr",{className:`border-b border-gray-800 hover:bg-dashboard-hover-light
                      dark:hover:bg-dashboard-hover-dark`,children:[jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:new Date(mr.created*1e3).toLocaleDateString()}),jsxRuntimeExports.jsxs("td",{className:"py-2 px-3 font-semibold",children:["$",(mr.amount/100).toFixed(2)]}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-semibold ${mr.status==="paid"?"bg-green-500/10 text-green-400":"bg-yellow-500/10 text-yellow-400"}`,children:mr.status})}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:new Date(mr.arrival_date*1e3).toLocaleDateString()})]},mr.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden space-y-4",children:kt.map(mr=>jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                rounded-xl p-4 shadow-md`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Date"}),jsxRuntimeExports.jsx("span",{children:new Date(mr.created*1e3).toLocaleDateString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Amount"}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:["$",(mr.amount/100).toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Status"}),jsxRuntimeExports.jsx("span",{className:`text-xs px-2 py-1 rounded ${mr.status==="paid"?"bg-green-500/10 text-green-400":"bg-yellow-500/10 text-yellow-400"}`,children:mr.status})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Arrival"}),jsxRuntimeExports.jsx("span",{children:new Date(mr.arrival_date*1e3).toLocaleDateString()})]})]},mr.id))})]}):jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm",children:"No payouts have been made yet."})]}),jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border border-dashboard-border-light
      dark:border-dashboard-border-dark rounded-xl p-6 shadow-lg mt-10`,children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-dashboard-text-light dark:text-dashboard-text-dark mb-4",children:"Recent Sales"}),Ut.length>0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:`min-w-full text-sm text-left text-dashboard-text-light
                dark:text-dashboard-text-dark`,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:`border-b border-gray-700 text-dashboard-muted-light
                    dark:text-dashboard-muted-dark uppercase text-xs`,children:[jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Product"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Buyer Email"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Date"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-3",children:"Email Sent"})]})}),jsxRuntimeExports.jsx("tbody",{children:Ut.map(mr=>jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx("td",{className:"py-2 px-3 font-semibold",children:mr.product_name}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:mr.buyer_email}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:new Date(mr.delivered_at).toLocaleString()}),jsxRuntimeExports.jsx("td",{className:"py-2 px-3",children:mr.thank_you_sent?jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-green"}):jsxRuntimeExports.jsx("button",{onClick:()=>ur(mr),className:"text-green hover:text-green/70 underline",children:"Auto-Gen Thank You"})})]},mr.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden space-y-4",children:Ut.map(mr=>jsxRuntimeExports.jsxs("div",{className:`bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light
                dark:border-dashboard-border-dark rounded-xl p-4 shadow-md`,children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Product"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:mr.product_name})]}),jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Buyer"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-dashboard-text-light dark:text-dashboard-text-dark break-all",children:mr.buyer_email})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Date"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:new Date(mr.delivered_at).toLocaleString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Thank You"}),mr.thank_you_sent?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-green text-sm font-semibold",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4"}),"Sent"]}):jsxRuntimeExports.jsx("button",{onClick:()=>ur(mr),className:"text-green text-sm font-semibold hover:text-green/70 underline",children:"Auto-Gen"})]})]},mr.id))})]}):jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm",children:"No sales yet."})]}),Ut.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-6 mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Yt(mr=>Math.max(1,mr-1)),disabled:Kt===1,className:`px-4 py-2 rounded-lg ${Kt===1?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-muted-light dark:text-dashboard-muted-dark cursor-not-allowed":"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}`,children:"Prev"}),jsxRuntimeExports.jsxs("span",{className:"text-dashboard-text-light dark:text-dashboard-text-dark text-sm",children:["Page ",Kt," of ",Jt]}),jsxRuntimeExports.jsx("button",{onClick:()=>Yt(mr=>Math.min(Jt,mr+1)),disabled:Kt===Jt,className:`px-4 py-2 rounded-lg ${Kt===Jt?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-muted-light dark:text-dashboard-muted-dark cursor-not-allowed":"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark text-dashboard-text-light dark:text-dashboard-text-dark hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}`,children:"Next"})]}),jsxRuntimeExports.jsx(ThankYouModal,{visible:sr,message:er,setMessage:rr,onClose:()=>nr(!1),loading:ir,onMarkSent:()=>pr(lr)})]}):jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-dashboard-text-light dark:text-dashboard-text-dark",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-3",children:"No Stripe Account Connected"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-center mb-6 max-w-md",children:["You need to connect your Stripe account in"," ",jsxRuntimeExports.jsx("span",{className:"text-green font-semibold",children:"Settings"})," to view your seller dashboard and payouts."]}),jsxRuntimeExports.jsx("button",{onClick:()=>window.location.href="/settings",className:"px-6 py-3 rounded-lg bg-green text-black font-semibold hover:opacity-90 transition",children:"Go to Settings"})]})})}function CreateCommentBox({targetType:et="post",targetId:dt,onComment:$t}){const[kt,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState([]),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(""),er=async nr=>{const ir=nr.target.value;Tt(ir);try{const or=ir.match(/@([a-zA-Z0-9_]*)$/);if(!or){Yt(!1),Ht([]);return}const lr=or[1];if(Zt(lr),lr.length<1)return;const cr=await axiosInstance.get(`/community/users/search?query=${lr}`);Ht(cr.data.users||[]),Yt(!0)}catch(or){console.error(" mention search failed:",or),Yt(!1)}},rr=nr=>{try{Tt(ir=>ir.replace(/@([a-zA-Z0-9_]*)$/,`@${nr} `)),Yt(!1),Ht([]),Zt("")}catch(ir){console.error(" insertMention error:",ir)}},sr=async()=>{if(!(!kt.trim()||Dt)){Ft(!0);try{const ir=(await axiosInstance.post("/community/comments",{targetType:et,targetId:dt,body:kt})).data.comment;Tt(""),Yt(!1),Ht([]),Zt(""),$t&&ir&&$t(ir)}catch(nr){console.error("Failed to add comment:",nr)}finally{Ft(!1)}}};return jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("textarea",{value:kt,onChange:er,placeholder:"Write a comment...",className:`
        w-full
        min-h-[100px]
        p-3
        rounded-lg
        bg-dashboard-bg-light dark:bg-dashboard-bg-dark
        text-dashboard-text-light dark:text-dashboard-text-dark
        placeholder-dashboard-muted-light dark:placeholder-dashboard-muted-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        focus:outline-none
        focus:ring-1
        focus:ring-green
      `}),Kt&&Ut.length>0&&jsxRuntimeExports.jsx("div",{className:`
      absolute
      left-0
      bottom-full
      mb-2
      w-full
      max-h-56
      overflow-y-auto
      rounded-xl
      border
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      shadow-2xl
      z-50
    `,children:Ut.map(nr=>{var ir,or;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>rr(nr.username),className:`
    w-full
    flex
    items-center
    gap-3
    px-3
    py-2
    text-left
    hover:bg-dashboard-hover-light
    dark:hover:bg-dashboard-hover-dark
    transition
  `,children:[nr.profile_image_url?jsxRuntimeExports.jsx("img",{src:nr.profile_image_url,alt:nr.username,className:"w-7 h-7 rounded-full object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}):jsxRuntimeExports.jsx("div",{className:`
        w-7 h-7
        rounded-full
        flex
        items-center
        justify-center
        text-xs
        font-semibold
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        border
        border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-muted-light
        dark:text-dashboard-muted-dark
      `,children:(or=(ir=nr.username)==null?void 0:ir.charAt(0))==null?void 0:or.toUpperCase()}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:["@",nr.username]})})]},nr.id)})}),jsxRuntimeExports.jsx("button",{onClick:sr,disabled:Dt,className:`
    mt-6
    px-5 py-2
    rounded-lg
    transition
    border
    ${Dt?"opacity-50 cursor-not-allowed":"hover:bg-green hover:text-black"}
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    text-dashboard-text-light dark:text-dashboard-text-dark
    border-dashboard-border-light dark:border-dashboard-border-dark
  `,children:Dt?"Posting":"Post"})]})}function ButtonSpinner(){return jsxRuntimeExports.jsx("span",{className:`
        inline-block
        w-3 h-3
        border-2
        border-current
        border-t-transparent
        rounded-full
        animate-spin
      `})}function ReplyBox({parentComment:et,onReply:dt,onCancel:$t}){const[kt,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState([]),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(""),er=async nr=>{const ir=nr.target.value;Tt(ir);try{const or=ir.match(/@([a-zA-Z0-9_]*)$/);if(!or){Yt(!1),Ht([]);return}const lr=or[1];if(Zt(lr),lr.length<1)return;const cr=await axiosInstance.get(`/community/users/search?query=${lr}`);Ht(cr.data.users||[]),Yt(!0)}catch(or){console.error(" mention search failed:",or),Yt(!1)}},rr=nr=>{Tt(ir=>ir.replace(/@([a-zA-Z0-9_]*)$/,`@${nr} `)),Yt(!1),Ht([]),Zt("")},sr=async()=>{if(!kt.trim()||Dt)return;Ft(!0);const nr={body:kt};try{const ir=await axiosInstance.post(`/community/comments/${et.id}/reply`,nr);Tt(""),Yt(!1),Ht([]),Zt(""),dt(ir.data.reply)}catch(ir){console.error("Failed to submit reply:",ir)}finally{Ft(!1)}};return jsxRuntimeExports.jsxs("div",{className:"relative mt-4 -mx-3 -ml-4 sm:mx-0 sm:ml-0",children:[jsxRuntimeExports.jsx("textarea",{value:kt,onChange:er,className:`
          w-full
          min-h-[120px]
          resize-none
          rounded-xl
          p-4
          text-base
          bg-dashboard-bg-light
          dark:bg-dashboard-bg-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          placeholder-dashboard-muted-light
          dark:placeholder-dashboard-muted-dark
          focus:outline-none
          focus:ring-2
          focus:ring-green/40
        `,placeholder:"Write your reply"}),Kt&&Ut.length>0&&jsxRuntimeExports.jsx("div",{className:`
      absolute
      left-0
      bottom-full
      mb-2
      w-full
      max-h-56
      overflow-y-auto
      rounded-xl
      border
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      shadow-2xl
      z-50
    `,children:Ut.map(nr=>{var ir,or;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>rr(nr.username),className:`
          w-full
          flex
          items-center
          gap-3
          px-3
          py-2
          text-left
          hover:bg-dashboard-hover-light
          dark:hover:bg-dashboard-hover-dark
          transition
        `,children:[nr.profile_image_url?jsxRuntimeExports.jsx("img",{src:nr.profile_image_url,alt:nr.username,className:"w-7 h-7 rounded-full object-cover border"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-xs font-semibold",children:(or=(ir=nr.username)==null?void 0:ir.charAt(0))==null?void 0:or.toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:["@",nr.username]})]},nr.id)})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[jsxRuntimeExports.jsx("button",{onClick:$t,className:`
    px-4 py-2
    rounded-lg
    text-sm
    bg-dashboard-hover-light
    dark:bg-dashboard-hover-dark
    text-dashboard-text-light
    dark:text-dashboard-text-dark
    border
    border-dashboard-border-light
    dark:border-dashboard-border-dark
    transition
    hover:opacity-90
    focus:outline-none
    focus:ring-2
    focus:ring-dashboard-border-light
    dark:focus:ring-dashboard-border-dark
  `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:sr,disabled:Dt,className:`
    px-5 py-2
    rounded-lg
    bg-green
    text-black
    font-medium
    transition
    hover:bg-green/90
    disabled:opacity-60
    disabled:cursor-not-allowed
    flex items-center justify-center gap-2
  `,children:Dt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonSpinner,{size:"sm"}),jsxRuntimeExports.jsx("span",{children:"Posting"})]}):"Reply"})]})]})}function MentionCard({user:et,open:dt,onEnter:$t,onLeave:kt}){var Tt;return et?jsxRuntimeExports.jsx("div",{onMouseEnter:$t,onMouseLeave:kt,className:`
        absolute z-50 bottom-full mb-2 w-72
        rounded-xl
        border
        shadow-xl
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border-dashboard-border-light
        dark:border-dashboard-border-dark
        transition-all duration-150 ease-out
        opacity-0 translate-y-1 pointer-events-none
        ${dt?"opacity-100 translate-y-0 pointer-events-auto":""}
        p-3
      `,children:jsxRuntimeExports.jsxs("div",{className:et.author_has_profile?"":"opacity-60",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3 ",children:[et.profile_image_url?jsxRuntimeExports.jsx("img",{src:et.profile_image_url,className:"w-10 h-10 rounded-full object-cover self-start translate-y-[-14px]",alt:et.name}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-gray-300 dark:bg-gray-700 text-sm font-semibold",children:((Tt=et.name)==null?void 0:Tt.charAt(0))||"U"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-rows-[auto_auto]",children:[jsxRuntimeExports.jsxs("div",{className:"translate-y-[4px]",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold leading-none text-dashboard-text-light dark:text-dashboard-text-dark",children:et.name}),jsxRuntimeExports.jsxs("p",{className:" -mt-3 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:["@",et.username]})]}),et.bio&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-xs line-clamp-2 text-dashboard-text-light dark:text-dashboard-text-dark",children:et.bio})]})]}),!et.author_has_profile&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-[11px] text-dashboard-muted-light italic",children:"Profile coming soon"})]})}):null}function Mention({username:et}){const[dt,$t]=reactExports.useState(!1),[kt,Tt]=reactExports.useState(null),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),Jt=useNavigate(),Zt=async()=>{if(!(kt||Dt)){Ft(!0);try{const rr=await axiosInstance.get(`/community/users/preview/${et}`);Tt(rr.data.user)}catch{}finally{Ft(!1)}}},er=rr=>{rr.stopPropagation(),kt!=null&&kt.author_has_profile&&Jt(`/community/authors/${kt.id}`)};return reactExports.useEffect(()=>{!Ut&&!Kt&&$t(!1)},[Ut,Kt]),jsxRuntimeExports.jsxs("span",{className:"relative inline-block",children:[jsxRuntimeExports.jsxs("span",{onClick:er,onMouseEnter:()=>{Ht(!0),$t(!0),Zt()},onMouseLeave:()=>{Ht(!1)},className:`
        text-sky-400 font-medium
        ${kt&&!kt.author_has_profile?"cursor-default opacity-60":"cursor-pointer hover:underline"}
      `,children:["@",et]}),jsxRuntimeExports.jsx(MentionCard,{user:kt,open:dt,onEnter:()=>Yt(!0),onLeave:()=>Yt(!1)})]})}function renderTextWithLinks(et){try{if(!et)return null;const dt=/\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)/g,$t=/(https?:\/\/[^\s]+)/g,kt=/https?:\/\/(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/,Tt=/@([a-zA-Z0-9_]+)/g,Dt=[];let Ft=0;return et.replace(dt,(Ut,Ht,Kt,Yt)=>{Yt>Ft&&Dt.push(et.slice(Ft,Yt)),Dt.push(jsxRuntimeExports.jsx("a",{href:Kt,target:"_blank",rel:"noopener noreferrer",className:`
            underline
            text-dashboard-metric-light dark:text-dashboard-metric-dark
            hover:opacity-80
          `,children:Ht},`md-${Yt}-${Kt}`)),Ft=Yt+Ut.length}),Ft<et.length&&Dt.push(et.slice(Ft)),Dt.flatMap((Ut,Ht)=>typeof Ut!="string"?Ut:Ut.split($t).flatMap((Kt,Yt)=>{if(Kt.match($t)){const Jt=Kt.trim(),Zt=Jt.match(kt);return Zt?jsxRuntimeExports.jsx("div",{className:"my-6",children:jsxRuntimeExports.jsx("iframe",{className:`
                    w-full aspect-video rounded-xl
                    border border-dashboard-border-light
                    dark:border-dashboard-border-dark
                  `,src:`https://www.youtube.com/embed/${Zt[1]}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})},`yt-${Ht}-${Yt}`):jsxRuntimeExports.jsx("a",{href:Jt,target:"_blank",rel:"noopener noreferrer",className:`
                underline
                text-dashboard-metric-light dark:text-dashboard-metric-dark
                hover:opacity-80
              `,children:Jt},`url-${Ht}-${Yt}`)}return Kt.split(Tt).map((Jt,Zt)=>Zt%2===1?jsxRuntimeExports.jsx(Mention,{username:Jt},`mention-${Ht}-${Yt}-${Zt}`):jsxRuntimeExports.jsx("span",{className:"whitespace-pre-wrap",children:Jt},`text-${Ht}-${Yt}-${Zt}`))}))}catch(dt){return console.error(" renderTextWithLinks error:",dt),et}}function CommentThread({comment:et,postOwnerId:dt,depth:$t=0,loadReplies:kt,replies:Tt,setReplies:Dt,replyPages:Ft,timeAgo:Ut,toggleLike:Ht,setActiveReplyBox:Kt,activeReplyBox:Yt,editCommentId:Jt,editBody:Zt,setEditBody:er,setEditCommentId:rr,handleDelete:sr,onReplySubmit:nr,openReplies:ir,toggleReplyVisibility:or,expandedComments:lr,setExpandedComments:cr}){var Tr,Or,_r,Pr;const{user:dr}=useAuth(),ur=Tt[et.id]||[],pr=420,mr=(lr==null?void 0:lr[et.id])===!0,jr=et.body.length>pr,Rr=!mr&&jr?et.body.slice(0,pr).trim()+"":et.body,xr=et.reply_count??(Tt[et.id]?Tt[et.id].length:0),kr=$t>0?1:0,Mr=$t===0;return jsxRuntimeExports.jsxs("div",{id:`comment-${et.id}`,children:[jsxRuntimeExports.jsxs("div",{className:Mr?`
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    border border-dashboard-border-light dark:border-dashboard-border-dark
    rounded-lg
  `:`
    relative
    ml-2 sm:ml-4
    mt-3 sm:mt-4
  `,children:[!Mr&&jsxRuntimeExports.jsx("span",{className:`
      absolute
      left-[-1px]
      top-4
      w-2 h-2
      rounded-full
      bg-dashboard-border-light
      dark:bg-dashboard-border-dark
      z-10
    `}),!Mr&&jsxRuntimeExports.jsx("span",{className:`
      absolute
      left-0
      top-3
      bottom-3
      w-px
      bg-dashboard-border-light/40
      dark:bg-dashboard-border-dark/40
      z-0
    `}),jsxRuntimeExports.jsx("div",{className:Mr?"p-3":"pl-4 sm:pl-5 py-2 sm:py-3",children:Jt===et.id?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:Zt,onChange:br=>er(br.target.value),className:"w-full bg-gray-800 border border-gray-700 p-2 rounded text-gray-100 text-sm",rows:3}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>nr(et.id),className:"px-3 py-1 bg-blue text-white text-xs rounded hover:bg-blue/90",children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>{rr(null),er("")},className:"px-3 py-1 bg-gray-700 text-gray-300 text-xs rounded hover:bg-gray-600",children:"Cancel"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx("button",{title:et.author_has_profile?void 0:"Profile coming soon",onClick:()=>{if((dr==null?void 0:dr.id)!==et.user_id){if(!et.author_has_profile){y$4.info("This author hasnt set up their profile yet");return}navigate(`/community/authors/${et.user_id}`)}},className:`flex-shrink-0 ${!et.author_has_profile||et.author_role==="admin"?"cursor-default":"cursor-pointer"}`,children:et.author_image?jsxRuntimeExports.jsx(Img,{src:et.author_image,loader:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700/40 animate-pulse"}),unloader:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-xs font-semibold text-gray-300",children:((Or=(Tr=et.author)==null?void 0:Tr.charAt(0))==null?void 0:Or.toUpperCase())||"U"}),decode:!0,alt:"User avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-700 transition-opacity duration-300"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-xs font-semibold text-gray-300",children:((Pr=(_r=et.author)==null?void 0:_r.charAt(0))==null?void 0:Pr.toUpperCase())||"U"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px] text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:et.author}),et.author_role==="admin"&&jsxRuntimeExports.jsx("span",{className:"p-1",children:jsxRuntimeExports.jsx(ShieldCheck,{size:11,className:"text-green"})})]}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:Ut(et.created_at)}),et.updated_at&&new Date(et.updated_at)>new Date(et.created_at)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"text-[10px] opacity-60",children:"edited"})]})]})]}),et.reply_to_author&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:["Replying to"," ",jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["@",et.reply_to_author]})]}),jsxRuntimeExports.jsx("p",{className:`
            prose prose-sm max-w-none
             dark:prose-invert
             dark:prose-a:text-sky-400
             dark:prose-a:decoration-sky-400
            text-dashboard-text-light dark:text-dashboard-text-dark
             whitespace-pre-wrap mb-2
          `,children:renderTextWithLinks(Rr)}),!mr&&jr&&jsxRuntimeExports.jsx("button",{onClick:()=>cr(br=>({...br,[et.id]:!0})),className:"text-xs text-sky-400 mt-1 hover:underline",children:"See more"}),mr&&jr&&jsxRuntimeExports.jsx("button",{onClick:()=>cr(br=>({...br,[et.id]:!1})),className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1 hover:underline",children:"See less"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Ht(et,et.parent_id),className:`flex items-center gap-1 ${et.user_liked?"text-red-600":"text-gray-500"} hover:text-red-600/90 transition-transform ${et.user_liked?"scale-110":"scale-100"}`,children:[jsxRuntimeExports.jsx(Heart,{size:12,fill:et.user_liked?"currentColor":"transparent",className:et.user_liked?"animate-pingOnce":""}),et.like_count]}),jsxRuntimeExports.jsx("button",{onClick:()=>Kt(et.id),className:`text-dashboard-text-light dark:text-dashboard-text-dark
                hover:opacity-80
`,children:"Reply"}),dr&&et.user_id===dr.id&&jsxRuntimeExports.jsx("button",{onClick:()=>{rr(et.id),er(et.body)},className:`
                    text-dashboard-muted-light dark:text-dashboard-muted-dark
                    hover:opacity-80
`,children:"Edit"}),dr&&(et.user_id===dr.id||dt===dr.id)&&jsxRuntimeExports.jsx("button",{onClick:()=>sr(et.id,et.parent_id),className:"text-dashboard-muted-light dark:text-dashboard-muted-dark hover:opacity-80",children:"Delete"})]}),Yt===et.id&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(ReplyBox,{parentComment:et,onReply:async br=>{Kt(null);const wr=et.parent_id||et.id;Dt(zr=>({...zr,[wr]:[...zr[wr]||[],br]})),await kt(wr)},onCancel:()=>Kt(null)})})]})})]}),xr>0&&jsxRuntimeExports.jsx("button",{onClick:()=>or(et.id),className:`text-xs text-dashboard-text-light dark:text-dashboard-text-dark
    hover:opacity-80
    mt-2 ${kr===1?"ml-4 sm:ml-6":"ml-1"}`,children:ir[et.id]?"Hide replies":`View replies (${xr})`}),ir[et.id]&&ur.filter(br=>br&&br.id).map(br=>jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx(CommentThread,{comment:br,depth:1,postOwnerId:dt,loadReplies:kt,replies:Tt,replyPages:Ft,timeAgo:Ut,toggleLike:Ht,activeReplyBox:Yt,setActiveReplyBox:Kt,editCommentId:Jt,editBody:Zt,setEditBody:er,setEditCommentId:rr,handleDelete:sr,onReplySubmit:nr,openReplies:ir,toggleReplyVisibility:or},br.id)})),ir[et.id]&&Ft[et.id]&&jsxRuntimeExports.jsx("button",{onClick:()=>kt(et.id,Ft[et.id]),className:"text-xs text-blue hover:text-blue/80 ml-3 mt-1",children:"Show more replies"})]})}function formatPostDate(et){return new Date(et).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function confirmDelete({message:et="Delete this comment?",onConfirm:dt}){y$4(({closeToast:$t})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm",children:et}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-end",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{$t()},className:"px-3 py-1 text-xs rounded border border-gray-300 hover:bg-gray-100",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{$t(),dt()},className:"px-3 py-1 text-xs rounded bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]}),{autoClose:!1,closeOnClick:!1,closeButton:!1})}const MIN_TIP_DOLLARS=2;function TipModal({open:et,onTip:dt,onClose:$t,loading:kt}){const[Tt,Dt]=reactExports.useState("");if(!et)return null;const Ft=()=>{const Ut=parseFloat(Tt);isNaN(Ut)||Ut<MIN_TIP_DOLLARS||(dt(Math.round(Ut*100)),Dt(""))};return jsxRuntimeExports.jsx("div",{onClick:$t,className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{onClick:Ut=>Ut.stopPropagation(),className:`
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          rounded-2xl
          p-6
          w-full
          max-w-sm
          space-y-5
          shadow-2xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-1",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:"Support this writer"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"A small tip goes a long way and lets them know their words mattered."})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-3",children:[2,5,10].map(Ut=>jsxRuntimeExports.jsxs("button",{onClick:()=>dt(Ut*100),disabled:kt,className:`
                py-3
                rounded-xl
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                font-medium
                transition
                hover:bg-green/10
                hover:border-green/40
                disabled:opacity-60
                disabled:cursor-not-allowed
              `,children:["$",Ut]},Ut))}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Custom amount (minimum $2)"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"$"}),jsxRuntimeExports.jsx("input",{type:"number",min:MIN_TIP_DOLLARS,step:"0.01",placeholder:"2.00",value:Tt,onChange:Ut=>Dt(Ut.target.value),className:`
                w-full
                pl-7
                pr-3
                py-2.5
                rounded-lg
                bg-dashboard-bg-light
                dark:bg-dashboard-bg-dark
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                text-dashboard-text-light
                dark:text-dashboard-text-dark
                text-sm
                focus:outline-none
                focus:ring-2
                focus:ring-green/40
              `})]}),jsxRuntimeExports.jsx("button",{onClick:Ft,disabled:kt||!Tt||parseFloat(Tt)<MIN_TIP_DOLLARS,className:`
              px-4
              rounded-lg
              bg-green
              text-black
              font-medium
              text-sm
              transition
              hover:bg-green/90
              disabled:opacity-50
              disabled:cursor-not-allowed
            `,children:"Send"})]}),Number(Tt)>0&&Number(Tt)<MIN_TIP_DOLLARS&&jsxRuntimeExports.jsx("p",{className:"text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Minimum tip is $2"})]}),jsxRuntimeExports.jsx("button",{onClick:$t,className:`
            w-full
            text-xs
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
            hover:opacity-80
          `,children:"Maybe later"})]})})}function CommunityPost({targetType:et="post"}){var Ss,Fs,vs;const dt=et==="fragment",{user:$t,authLoading:kt}=useAuth(),{slug:Tt,id:Dt}=useParams(),Ft=dt?Dt:Tt,Ut=useNavigate(),[Ht,Kt]=reactExports.useState(null),[Yt,Jt]=reactExports.useState([]),[Zt,er]=reactExports.useState(1),[rr,sr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(!0),[or,lr]=reactExports.useState({}),[cr,dr]=reactExports.useState({}),[ur,pr]=reactExports.useState(!1),[mr,jr]=reactExports.useState(null),[Rr,xr]=reactExports.useState(""),[kr,Mr]=reactExports.useState(null),[Tr,Or]=reactExports.useState(!1),[_r,Pr]=reactExports.useState({}),br=useLocation(),wr=new URLSearchParams(br.search),zr=wr.get("comment"),[Hr,Yr]=reactExports.useState(!1),[es,rs]=reactExports.useState(!1),[Wr,Xr]=reactExports.useState(!1),[ns,gs]=reactExports.useState(!1),[us,ps]=reactExports.useState({}),[cs,ss]=reactExports.useState(!1),[fs,hs]=reactExports.useState(!1),$s=`
  post-body-frag
  max-w-none
  text-sm leading-relaxed
  text-dashboard-text-light dark:text-dashboard-text-dark
  whitespace-pre-wrap
`,ks=`
  post-body
  prose prose-md max-w-none
  prose-pre:bg-zinc-900 dark:prose-pre:bg-zinc-800
  prose-pre:text-gray-100
  prose-pre:overflow-x-auto
  prose-code:text-[#e5e7eb]
  dark:prose-invert
  text-dashboard-text-light dark:text-dashboard-text-dark
`,Ds={post:{fetch:as=>axiosInstance.get(`/community/posts/${as}`),fetchComments:(as,js,Rs)=>axiosInstance.get(`/community/posts/${as}/comments?page=${js}&limit=${Rs}`),idKey:"id",redirectBase:"/community/post"},fragment:{fetch:as=>axiosInstance.get(`/fragments/${as}`),fetchComments:(as,js,Rs)=>axiosInstance.get(`/community/comments?targetType=fragment&targetId=${as}&page=${js}&limit=${Rs}`),idKey:"id",redirectBase:"/community"}},_s=dt?"/community":`/community/post/${Ht==null?void 0:Ht.slug}`;reactExports.useEffect(()=>{Yt.length&&ps(as=>{const js={...as};return Yt.forEach(Rs=>{js[Rs.id]===void 0&&(js[Rs.id]=Rs.body.length<=420)}),js})},[Yt]);const As=()=>{if(!$t){Ut(`/signup-community?redirect=${_s}`);return}Xr(!0)},Ns=async as=>{var js,Rs;if(!ns){gs(!0);try{const Ms=await axiosInstance.post("/seller-checkout/create-checkout-session",{checkoutType:"tip",targetType:et,targetId:Ht.id,tipAmountInCents:as});window.location.href=Ms.data.url}catch(Ms){if(((Rs=(js=Ms.response)==null?void 0:js.data)==null?void 0:Rs.message)==="Recipient cannot receive tips"){y$4.info("This writer hasnt enabled tips yet. Youll be able to support them once they do."),gs(!1);return}y$4.error("Failed to start tip checkout"),console.error(Ms)}gs(!1)}};reactExports.useEffect(()=>{kt||Ht&&($t||Ut(`/signup-community?redirect=${_s}`,{replace:!0}))},[$t,kt,Ht,_s]),reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]);const Is=async()=>{var as;try{const js=await Ds[et].fetch(Ft),Rs=et==="fragment"?js.data.fragment:js.data.post;if(!Rs){console.error("Missing post data:",js.data);return}if(Kt(Rs),$t!=null&&$t.id&&(Rs!=null&&Rs.user_id)&&$t.id!==Rs.user_id)try{const Ts=await axiosInstance.get(`/community/subscriptions/${Rs.user_id}/status`);Yr(Ts.data.subscribed),hs(Ts.data.has_paid_subscription)}catch(Ts){console.error("Failed to load subscription status",Ts)}const Ms=await Ds[et].fetchComments(Rs.id,1,10);Jt(Ms.data.comments||[]),console.log(" COMMENTS FETCH RESULT",{targetType:et,targetId:Rs.id,count:(as=Ms.data.comments)==null?void 0:as.length,comments:Ms.data.comments}),er(Ms.data.nextPage||null),ir(!!Ms.data.nextPage)}catch(js){console.error("Failed to load:",js)}},zs=async()=>{if(!es){if(!$t){Ut(`/signup-community?redirect=${_s}`);return}if(Hr){rs(!0);try{await axiosInstance.delete(`/community/subscriptions/${Ht.user_id}/subscribe`),Yr(!1)}catch(as){console.error("Unsubscribe failed",as)}rs(!1);return}if(!fs){rs(!0);try{await axiosInstance.post(`/community/subscriptions/${Ht.user_id}/subscribe`),Yr(!0)}catch(as){console.error("Subscribe failed",as)}rs(!1);return}Ut(`/community/subscribe/${Ht.user_id}/choose`,{state:{from:_s}})}},Gs=async()=>{if(!$t){Ut(`/signup-community?redirect=${_s}`);return}const as={targetType:et,targetId:Ht.id};try{Ht.has_liked?(await axiosInstance.delete("/community/delete-like",{data:as}),Kt(js=>({...js,has_liked:0,like_count:Math.max(js.like_count-1,0)}))):(await axiosInstance.post("/community/likes",as),Kt(js=>({...js,has_liked:1,like_count:js.like_count+1})))}catch{y$4.error("Failed to update like")}},Ws=async()=>{if(!$t){Ut(`/signup-community?redirect=${_s}`);return}Kt(as=>{const js=as.is_bookmarked;return{...as,is_bookmarked:!js,save_count:Math.max((as.save_count||0)+(js?-1:1),0)}});try{const as=await axiosInstance.post(`/community/bookmark/${Ht.id}`);Kt(js=>({...js,is_bookmarked:as.data.bookmarked})),as.data.bookmarked&&(ss(!0),setTimeout(()=>ss(!1),1200))}catch(as){console.error("Bookmark toggle failed:",as),Kt(js=>{const Rs=js.is_bookmarked;return{...js,is_bookmarked:!Rs,save_count:Math.max((js.save_count||0)+(Rs?-1:1),0)}}),y$4.error("Failed to save bookmark")}};reactExports.useEffect(()=>{if(wr.get("tipped")==="1"){Or(!0);const as=new URL(window.location.href);as.searchParams.delete("tipped"),window.history.replaceState({},"",as.pathname),setTimeout(()=>{Or(!1)},1800)}},[]),reactExports.useEffect(()=>{Ft&&Is()},[Ft,$t]);const Qs=async()=>{if(!(!nr||rr)){sr(!0);try{const as=await Ds[et].fetchComments(Ht.id,Zt,10);Jt(js=>[...js,...as.data.comments||[]]),as.data.nextPage?er(as.data.nextPage):ir(!1)}catch(as){console.error("Load more failed:",as)}sr(!1)}},qs=reactExports.useRef();reactExports.useEffect(()=>{const as=new IntersectionObserver(js=>{js[0].isIntersecting&&Qs()},{threshold:1});return qs.current&&as.observe(qs.current),()=>as.disconnect()},[]);const Bs=async(as,js=1)=>{try{const Ms=await axiosInstance.get(`/community/comments/${as}/replies?page=${js}&limit=5`);let Ts=Ms.data.replies||[];Ts=Ts.filter(Ks=>Ks&&Ks.id);const Vs=[...Ts];dr(Ks=>({...Ks,[as]:js===1?[...Vs]:[...Ks[as]||[],...Vs]})),Pr(Ks=>({...Ks,[as]:Ms.data.nextPage}))}catch(Ms){console.error("Failed to load replies:",Ms)}},Js=as=>{lr(js=>({...js,[as]:!js[as]})),cr[as]||Bs(as)},Ys=async as=>{try{const js=await axiosInstance.put(`/community/comments/${as}`,{body:Rr}),{body:Rs,updated_at:Ms}=js.data.comment;Jt(Ts=>Ts.map(Vs=>Vs.id===as?{...Vs,body:Rs,updated_at:Ms}:Vs)),dr(Ts=>{const Vs={...Ts};return Object.keys(Vs).forEach(Ks=>{Vs[Ks]=Vs[Ks].map(yn=>yn.id===as?{...yn,body:Rs,updated_at:Ms}:yn)}),Vs}),jr(null),xr("")}catch(js){console.error("Failed to update comment:",js),y$4.error("Failed to save edit")}},ln=(as,js=null)=>{confirmDelete({message:"Delete this comment?",onConfirm:async()=>{try{js?dr(Rs=>({...Rs,[js]:(Rs[js]||[]).filter(Ms=>Ms.id!==as)})):(Jt(Rs=>Rs.filter(Ms=>Ms.id!==as)),Kt(Rs=>({...Rs,comment_count:Math.max((Rs.comment_count||1)-1,0)}))),await axiosInstance.delete(`/community/comments/${as}`),y$4.success("Comment deleted")}catch(Rs){console.error(" Delete failed:",Rs),y$4.error("Failed to delete comment")}}})},Pn=async(as,js=null)=>{try{as.user_liked?(await axiosInstance.delete(`/community/comments/${as.id}/like`),as.like_count-=1,as.user_liked=0):(await axiosInstance.post(`/community/comments/${as.id}/like`),as.like_count+=1,as.user_liked=1),js?dr(Rs=>({...Rs,[js]:[...Rs[js]]})):Jt([...Yt])}catch(Rs){console.error("Failed to toggle like:",Rs)}};reactExports.useEffect(()=>{zr&&setTimeout(()=>{const as=document.getElementById(`comment-${zr}`);as&&(as.scrollIntoView({behavior:"smooth",block:"center"}),as.classList.add("ring-2","ring-green","rounded-lg"),setTimeout(()=>{as.classList.remove("ring-2","ring-green")},3e3))},500)},[Yt,cr]);const Qn=((Ss=br.state)==null?void 0:Ss.returnTo)||(dt?"/community":Ht?`/community/topic/${Ht.topic_id}`:"/community");if(reactExports.useEffect(()=>{Qn&&window.history.replaceState({...window.history.state,backTo:Qn},"")},[Qn]),!Ht)return jsxRuntimeExports.jsx("div",{className:"p-10 text-center opacity-60",children:"Loading post"});const xo={PUBLIC:"public",PAID:"paid",PRIVATE:"private"},Os=Ht.comments_visibility===xo.PAID,ds=Ht.comments_visibility===xo.PRIVATE,Gr=(()=>($t==null?void 0:$t.id)===Ht.user_id?!1:!!(Ht.comments_locked===1||Os&&!fs||ds&&!Hr))(),bs=((vs=(Fs=Ht.author)==null?void 0:Fs.charAt(0))==null?void 0:vs.toUpperCase())??"U",xs=Ht.is_admin_post===1,ms=as=>{const js=new Date(as),Rs=Math.floor((Date.now()-js)/1e3);if(Rs<60)return"Just now";const Ms=Math.floor(Rs/60);if(Ms<60)return`${Ms}m ago`;const Ts=Math.floor(Ms/60);return Ts<24?`${Ts}h ago`:`${Math.floor(Ts/24)}d ago`},ls=Ht.author_role==="admin",ys=dt?`${window.location.origin}/community/fragments/${Ht.id}`:`${window.location.origin}/p/${Ht.slug}`,ws=async()=>{try{await navigator.clipboard.writeText(ys),pr(!0),setTimeout(()=>pr(!1),1500)}catch{y$4.error("Failed to copy link")}};return jsxRuntimeExports.jsxs("div",{className:`
      w-full flex justify-center items-start min-h-screen
      px-0 py-0
      sm:px-6 sm:py-0
      lg:py-0
    `,children:[jsxRuntimeExports.jsx("div",{className:`
    w-full max-w-4xl

    /* mobile */
    bg-transparent
    border-none
    rounded-none
    shadow-none
    p-0
    pt-14

    /* desktop */
    sm:bg-dashboard-sidebar-light
    sm:dark:bg-dashboard-sidebar-dark
    sm:border sm:border-dashboard-border-light sm:dark:border-dashboard-border-dark
    sm:rounded-xl
    sm:p-8
    lg:p-10
    sm:shadow-xl

    space-y-6 sm:space-y-8 lg:space-y-10
  `,children:jsxRuntimeExports.jsxs("div",{className:"w-full space-y-6 sm:space-y-8 lg:space-y-100",children:[jsxRuntimeExports.jsxs("div",{className:`
            bg-transparent
            border-none
            rounded-none
            shadow-none
            p-0

            sm:bg-dashboard-sidebar-light
            sm:dark:bg-dashboard-sidebar-dark
            sm:border sm:border-dashboard-border-light sm:dark:border-dashboard-border-dark
            sm:rounded-xl
            sm:p-8
            sm:shadow-lg
          `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4 mb-4 sm:mb-6",children:[jsxRuntimeExports.jsx("button",{title:Ht.author_has_profile?void 0:"Profile coming soon",onClick:()=>{if(($t==null?void 0:$t.id)!==Ht.user_id){if(!Ht.author_has_profile){y$4.info("This! author hasnt set up their profile yet");return}Ut(`/community/authors/${Ht.user_id}`)}},className:`group -mt-2.5 ${Ht.author_has_profile?"cursor-pointer":"cursor-default"}`,children:xs?jsxRuntimeExports.jsx("img",{src:headerLogo,className:"w-12 h-12 rounded-full object-cover",alt:"The Messy Attic"}):Ht.author_image?jsxRuntimeExports.jsx(Img,{src:Ht.author_image,loader:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700/40 animate-pulse"}),unloader:jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-full border flex items-center justify-center text-xl font-bold bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                      border-dashboard-border-light dark:border-dashboard-border-dark
                      text-dashboard-muted-light dark:text-dashboard-muted-dark`,children:bs}),decode:!0,alt:"User avatar",className:"w-12 h-12 rounded-full object-cover  shadow-xl transition-opacity duration-300"}):jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-green/90 border border-green flex items-center justify-center text-xl font-bold text-green",children:bs})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[1px]",children:[jsxRuntimeExports.jsx("p",{className:"text-dashboard-text-light dark:text-dashboard-text-dark text-lg font-semibold",children:Ht.author}),(xs||ls)&&jsxRuntimeExports.jsx("span",{className:`
                        flex items-center
                        text-dashboard-muted-light dark:text-dashboard-muted-dark
                        text-[10px]
                        px-0.5 py-0.5
                        rounded-full
                      `,children:jsxRuntimeExports.jsx(ShieldCheck,{size:15,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark"})})]}),!xs&&($t==null?void 0:$t.id)!==Ht.user_id&&jsxRuntimeExports.jsx("button",{onClick:zs,disabled:es,className:`
                      text-xs
                      px-2
                      py-1
                      min-w-[88px]
                      rounded-md
                      border
                      transition
                      flex
                      items-center
                      justify-center
                      gap-1

                      ${Hr?"bg-green/10 text-green border-green/30":"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark text-dashboard-text-light dark:text-dashboard-text-dark"}

                      ${es?"opacity-70 cursor-not-allowed":"hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
                    `,children:es?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonSpinner,{}),jsxRuntimeExports.jsx("span",{children:Hr?"Updating":"Subscribing"})]}):jsxRuntimeExports.jsx("span",{children:Hr?"Subscribed":"Subscribe"})})]}),jsxRuntimeExports.jsxs("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark text-sm mt-1 flex items-center flex-wrap gap-1",children:[jsxRuntimeExports.jsx("span",{children:formatPostDate(Ht.created_at)}),jsxRuntimeExports.jsx("span",{className:"mx-1",children:""}),jsxRuntimeExports.jsx("span",{className:"opacity-80",children:ms(Ht.created_at)}),jsxRuntimeExports.jsx("span",{className:"mx-1",children:""}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 opacity-80",children:[jsxRuntimeExports.jsx(Bookmark,{size:12,className:"text-dashboard-muted-light dark:text-dashboard-muted-dark stroke-[2]"}),Ht.save_count]})]}),jsxRuntimeExports.jsx("div",{className:`
                  sm:hidden
                  mt-2
                  w-full
                  flex items-center
                  justify-between
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm sm:text-xs",children:[jsxRuntimeExports.jsx(Eye,{size:18,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Ht.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:Gs,className:`
                      flex items-center gap-2
                      text-sm
                      active:scale-95
                      transition
                    `,children:[jsxRuntimeExports.jsx(Heart,{size:18,className:Ht.has_liked?"text-red-500 fill-red-500":"opacity-80"}),jsxRuntimeExports.jsx("span",{children:Ht.like_count??0})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{var as;return(as=document.getElementById("comments"))==null?void 0:as.scrollIntoView({behavior:"smooth"})},className:`
                      flex items-center gap-2
                      text-sm
                      active:scale-95
                      transition
                    `,children:[Gr?jsxRuntimeExports.jsx(MessageSquareLock,{size:15,className:"opacity-80"}):jsxRuntimeExports.jsx(MessageSquare,{size:15,className:"opacity-80"}),jsxRuntimeExports.jsx("span",{children:Ht.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:ws,className:`
                      flex items-center gap-2
                      text-sm
                      active:scale-95
                      transition
                    `,children:ur?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Check,{size:18,className:"text-green"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Share2,{size:18,className:"opacity-80"})})}),$t&&$t.id!==Ht.user_id&&(Tr?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-green",children:[jsxRuntimeExports.jsx(Check,{size:18}),jsxRuntimeExports.jsx("span",{children:"Sent"})]}):jsxRuntimeExports.jsxs("button",{onClick:As,className:`
                          flex items-center gap-2
                          text-sm
                          active:scale-95
                          transition
                        `,children:[jsxRuntimeExports.jsx(DollarSign,{size:18,className:"opacity-80"}),jsxRuntimeExports.jsx("span",{children:"Tip"})]}))]})}),jsxRuntimeExports.jsxs("div",{className:"hidden sm:flex items-center gap-6 mt-2 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[jsxRuntimeExports.jsx(Eye,{size:16}),jsxRuntimeExports.jsx("span",{children:Ht.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:Gs,className:`
                    flex items-center gap-[3px]
                    transition
                    ${Ht.has_liked?"text-red-500":"opacity-70 hover:opacity-100"}
                  `,children:[jsxRuntimeExports.jsx(Heart,{size:16,fill:Ht.has_liked?"currentColor":"transparent"}),jsxRuntimeExports.jsx("span",{children:Ht.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[Gr?jsxRuntimeExports.jsx(MessageSquareLock,{size:15,className:"opacity-80"}):jsxRuntimeExports.jsx(MessageSquare,{size:15,className:"opacity-80"}),jsxRuntimeExports.jsx("span",{children:Ht.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:ws,className:`
                    relative
                    flex items-center gap-1
                     hover:text-sky-400/80
                    transition
                  `,children:ur?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Check,{size:16,className:"text-green"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Share2,{size:16})})}),$t&&$t.id!==Ht.user_id&&(Tr?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-green text-xs",children:[jsxRuntimeExports.jsx(Check,{size:14}),jsxRuntimeExports.jsx("span",{children:"Tip sent!"})]}):jsxRuntimeExports.jsxs("button",{onClick:As,className:`
                        flex items-center gap-1
                        text-dashboard-muted-light
                        dark:text-dashboard-muted-dark
                        hover:text-green
                        transition
                      `,children:[jsxRuntimeExports.jsx(DollarSign,{size:16}),jsxRuntimeExports.jsx("span",{children:"Tip"})]}))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[!dt&&jsxRuntimeExports.jsx("h2",{className:`
                not-prose
                text-3xl sm:text-3xl
                font-bold
                tracking-tight
                leading-tight
                text-dashboard-text-light
                dark:text-dashboard-text-dark
              `,children:Ht.title}),!dt&&$t&&jsxRuntimeExports.jsx("button",{onClick:Ws,className:`
                  mt-1
                  p-2
                  rounded-lg
                  text-dashboard-muted-light
                  dark:text-dashboard-muted-dark
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                  active:scale-95
                  transition
                `,title:Ht.is_bookmarked?"Saved":"Save for later",children:cs?jsxRuntimeExports.jsx(Check,{size:18,className:"text-green"}):jsxRuntimeExports.jsx(Bookmark,{size:18,className:Ht.is_bookmarked?"text-green stroke-[2.2]":"opacity-80"})})]}),!dt&&Ht.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                text-base sm:text-lg
                font-normal
                leading-relaxed
                max-w-2xl
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
              `,children:Ht.subtitle}),Ht.image_url&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("img",{src:Ht.image_url,alt:"Post",className:`
                w-full
                max-h-[420px]
                object-cover
                rounded-xl
                mt-12
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
              `})}),jsxRuntimeExports.jsxs("div",{className:dt?$s:ks,children:[jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:typeof(Ht==null?void 0:Ht.body)=="string"?Ht.body:""}}),dt&&Ht.reshared_id&&jsxRuntimeExports.jsxs("div",{className:`
        mb-4
        rounded-lg
       border border-dashboard-border-light
      dark:border-dashboard-border-dark
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
        p-4
      `,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3",children:[Ht.reshared_author_image?jsxRuntimeExports.jsx("img",{src:Ht.reshared_author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-border-light dark:bg-dashboard-border-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:Ht.reshared_author}),Ht.reshared_author_is_verified===1&&jsxRuntimeExports.jsx(ShieldCheck,{size:14,className:"text-green"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:ms(Ht.reshared_created_at)})]})]}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",children:Ht.reshared_body})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:`text-xl font-semibold mb-5
            text-dashboard-text-light dark:text-dashboard-text-dark`,children:"Comments"}),Gr?jsxRuntimeExports.jsxs("div",{className:"mb-10 p-4 rounded-lg border border-dashboard-border-light dark:border-dashboard-border-dark text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageSquareLock,{size:16}),jsxRuntimeExports.jsx("span",{children:Os?"Comments are for paid subscribers only.":"Comments are private."}),Os&&($t==null?void 0:$t.id)!==Ht.user_id&&jsxRuntimeExports.jsx("button",{onClick:()=>Ut(`/community/subscribe/${Ht.user_id}/choose`,{state:{from:_s}}),className:`
                    text-green
                    text-sm
                    font-medium
                    w-fit
                    hover:underline
                  `,children:"Become a paid subscriber "})]}):Yt.length===0?jsxRuntimeExports.jsx("p",{className:"text-dashboard-muted-light dark:text-dashboard-muted-dark mb-6",children:"No comments yet."}):null,!Gr&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-10",children:[Yt.map(as=>{var yn;const js=((yn=as.author)==null?void 0:yn.charAt(0).toUpperCase())??"U",Rs=as.author_role==="admin",Ms=420,Ts=us[as.id]!==!1,Vs=as.body.length>Ms,Ks=!Ts&&Vs?as.body.slice(0,Ms).trim()+"":as.body;return jsxRuntimeExports.jsx("div",{className:`
                    /* mobile */
                    bg-transparent
                    border-b border-dashboard-border-light/50 dark:border-dashboard-border-dark/50
                    rounded-none
                    shadow-none
                    p-3

                    /* desktop */
                    sm:bg-dashboard-sidebar-light
                    sm:dark:bg-dashboard-sidebar-dark
                    sm:border sm:border-dashboard-border-light sm:dark:border-dashboard-border-dark
                    sm:rounded-lg
                    sm:p-5
                    lg:p-6
                    sm:shadow-inner
                  `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx("button",{title:as.author_has_profile?void 0:"Profile coming soon",onClick:()=>{if(($t==null?void 0:$t.id)!==as.user_id){if(!as.author_has_profile){y$4.info("This author hasnt set up their profile yet");return}Ut(`/community/authors/${as.user_id}`)}},className:`flex-shrink-0 ${as.author_has_profile?"cursor-pointer":"cursor-default"}`,children:as.author_image?jsxRuntimeExports.jsx(Img,{src:as.author_image,loader:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700/40 animate-pulse"}),unloader:jsxRuntimeExports.jsx("div",{className:`
                                w-10 h-10 rounded-full
                                flex items-center justify-center
                                text-sm font-semibold
                                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                                border border-dashboard-border-light dark:border-dashboard-border-dark
                                text-dashboard-muted-light dark:text-dashboard-muted-dark
                              `,children:js}),decode:!0,alt:"Comment avatar",className:"w-10 h-10 rounded-full object-cover border border-gray-700 transition-opacity duration-300"}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 border border-gray-700 flex items-center justify-center text-sm font-semibold text-gray-300",children:js})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-2 flex items-center gap-[4px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-0",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:as.author}),Rs&&jsxRuntimeExports.jsx("span",{className:"px-1",children:jsxRuntimeExports.jsx(ShieldCheck,{size:12,className:"text-dashboard-muted-light dark:text-green"})})]}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:ms(as.created_at)}),as.updated_at&&new Date(as.updated_at).getTime()>new Date(as.created_at).getTime()&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"text-[10px] opacity-60",children:"edited"})]})]}),mr!==as.id&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`
                              prose prose-sm max-w-none
                              my-1
                              text-dashboard-text-light dark:text-dashboard-text-dark
                              whitespace-pre-wrap
                              dark:prose-invert
                              dark:prose-a:text-sky-400
                              dark:prose-a:decoration-sky-400
                            `,children:renderTextWithLinks(Ks)}),!Ts&&Vs&&jsxRuntimeExports.jsx("button",{onClick:()=>ps(Vn=>({...Vn,[as.id]:!0})),className:"text-xs text-sky-400 mt-1 hover:underline",children:"See more"}),Ts&&Vs&&jsxRuntimeExports.jsx("button",{onClick:()=>ps(Vn=>({...Vn,[as.id]:!1})),className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1 hover:underline",children:"See less"})]}),mr===as.id&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("textarea",{value:Rr,onChange:Vn=>xr(Vn.target.value),className:`
                              w-full
                              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                              border border-dashboard-border-light dark:border-dashboard-border-dark
                              p-2 rounded
                              text-dashboard-text-light dark:text-dashboard-text-dark
                              text-sm
                            `,rows:3}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ys(as.id),className:"px-3 py-1 bg-blue text-white text-xs rounded hover:bg-blue/90",children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:()=>{jr(null),xr("")},className:`
                                px-3 py-1
                                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                                text-dashboard-muted-light dark:text-dashboard-muted-dark
                                border border-dashboard-border-light dark:border-dashboard-border-dark
                                text-xs rounded
                                hover:opacity-80
`,children:"Cancel"})]})]}),mr!==as.id&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Pn(as),className:`text-xs ${as.user_liked?"text-red-600":"text-dashboard-muted-light dark:text-dashboard-muted-dark"} hover:opacity-80`,children:[jsxRuntimeExports.jsx(Heart,{size:12,fill:as.user_liked?"currentColor":"transparent",className:"inline-block mr-1"}),as.like_count]}),!Gr&&jsxRuntimeExports.jsx("button",{onClick:()=>Mr(as.id),className:"text-xs text-dashboard-text-light dark:text-dashboard-text-dark hover:opacity-80",children:"Reply"}),as.reply_count>0&&jsxRuntimeExports.jsx("button",{onClick:()=>Js(as.id),className:"text-xs text-dashboard-text-light dark:text-dashboard-text-dark hover:opacity-80",children:or[as.id]?"Hide replies":`View replies (${as.reply_count})`}),!or[as.id]&&$t&&as.user_id===$t.id&&jsxRuntimeExports.jsx("button",{onClick:()=>{jr(as.id),xr(as.body)},className:"text-xs text-dashboard-text-light dark:text-dashboard-text-dark hover:opacity-80",children:"Edit"}),!or[as.id]&&$t&&(as.user_id===$t.id||Ht.user_id===$t.id)&&jsxRuntimeExports.jsx("button",{onClick:()=>ln(as.id),className:"text-xs text-dashboard-text-light dark:text-dashboard-text-dark hover:opacity-80",children:"Delete"})]}),kr===as.id&&jsxRuntimeExports.jsx("div",{className:"mt-3 ml-6",children:jsxRuntimeExports.jsx(ReplyBox,{parentComment:as,onReply:async Vn=>{dr(go=>({...go,[as.id]:[...go[as.id]||[],Vn]})),Jt(go=>go.map(_i=>_i.id===as.id?{..._i,reply_count:(_i.reply_count||0)+1}:_i)),lr(go=>({...go,[as.id]:!0})),setTimeout(()=>Mr(null),100)},onCancel:()=>Mr(null)})}),or[as.id]&&(cr[as.id]||[]).map(Vn=>jsxRuntimeExports.jsx(CommentThread,{postOwnerId:Ht.user_id,comment:Vn,depth:1,loadReplies:Bs,replies:cr,setReplies:dr,replyPages:_r,timeAgo:ms,toggleLike:Pn,activeReplyBox:kr,setActiveReplyBox:Mr,editCommentId:mr,editBody:Rr,setEditBody:xr,setEditCommentId:jr,handleDelete:ln,onReplySubmit:Ys,openReplies:or,toggleReplyVisibility:Js,expandedComments:us,setExpandedComments:ps},Vn.id))]})]})},as.id)}),jsxRuntimeExports.jsx("div",{ref:qs,className:"h-10"})]}),!Gr&&jsxRuntimeExports.jsx(CreateCommentBox,{targetType:et,targetId:Ht.id,onComment:as=>{Jt(js=>[as,...js]),Kt(js=>({...js,comment_count:(js.comment_count||0)+1}))}})]})]})}),jsxRuntimeExports.jsx(TipModal,{open:Wr,loading:ns,onTip:Ns,onClose:()=>Xr(!1)})]})}const timeAgo=et=>{const dt=new Date(et),$t=Math.floor((Date.now()-dt)/1e3);if($t<60)return"Just now";const kt=Math.floor($t/60);if(kt<60)return`${kt}m ago`;const Tt=Math.floor(kt/60);return Tt<24?`${Tt}h ago`:`${Math.floor(Tt/24)}d ago`},formatDate=et=>new Date(et).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});function MobilePostCard({post:et,onOpen:dt,onLike:$t,onShare:kt,isCommentsLocked:Tt,copiedPostId:Dt}){return jsxRuntimeExports.jsxs("div",{onClick:dt,className:`
        rounded-2xl
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        shadow-sm
        overflow-hidden
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 px-4 pt-4",children:[et.author_image?jsxRuntimeExports.jsx("img",{src:et.author_image,alt:"",className:`
              w-8 h-8 rounded-full object-cover
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
            `}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:et.author}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{children:formatDate(et.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:timeAgo(et.created_at)}),et.updated_at&&new Date(et.updated_at)>new Date(et.created_at)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"italic opacity-70",children:"edited"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 mx-4 rounded-xl overflow-hidden",children:[et.image_url?jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:"w-full h-60 object-cover",loading:"lazy"}):jsxRuntimeExports.jsx("div",{className:`
            w-full h-60
            bg-dashboard-hover-light
            dark:bg-dashboard-hover-dark
            flex items-center justify-center
          `,children:jsxRuntimeExports.jsx("span",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"No image uploaded"})}),jsxRuntimeExports.jsxs("div",{className:"relative bg-dashboard-sidebar-light dark:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx("div",{className:`
              absolute inset-x-0 -top-28 h-28
              bg-gradient-to-t
              from-dashboard-sidebar-light
              dark:from-dashboard-hover-dark
              to-transparent
              pointer-events-none
            `}),jsxRuntimeExports.jsxs("div",{className:"relative px-4 py-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-light dark:text-dashboard-text-dark line-clamp-2",children:et.title}),et.subtitle&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark line-clamp-1",children:et.subtitle}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark line-clamp-2",children:et.excerpt||et.body_preview||""}),jsxRuntimeExports.jsx("button",{className:`
              mt-4
              w-full
              rounded-lg
              bg-dashboard-border-light
              dark:bg-white/15
              text-dashboard-text-light
              dark:text-dashboard-text-dark
              font-semibold
              py-2.5
              text-sm
              hover:bg-dashboard-hover-light
              dark:hover:bg-white/25
              transition
            `,children:"Read"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:`
        mt-2
        px-6 sm:px-0
        flex items-center gap-6
        py-3
        text-sm sm:text-xs
        text-dashboard-muted-light
        dark:text-dashboard-muted-dark
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[2px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:$t,disabled:!$t,className:"flex items-center  gap-[2px] hover:opacity-80 transition disabled:opacity-60 disabled:cursor-default",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:et.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center  gap-[2px] opacity-70",children:[Tt?jsxRuntimeExports.jsx(MessageSquareLock,{size:16}):jsxRuntimeExports.jsx(MessageSquare,{size:16}),jsxRuntimeExports.jsx("span",{children:et.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:kt,disabled:!kt,className:"flex items-center  gap-[2px] hover:opacity-80 transition disabled:opacity-60 disabled:cursor-default",children:Dt===et.id?jsxRuntimeExports.jsx(Check,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(Share2,{size:16,className:"opacity-70"})})]})]})}function MobileCreateFAB({open:et,setOpen:dt,onCreatePost:$t,onCreateFragment:kt,containerRef:Tt,className:Dt=""}){return jsxRuntimeExports.jsxs("div",{ref:Tt,className:`
    md:hidden
    fixed bottom-6 right-6 z-50
    transition-all duration-200 ease-out
    ${Dt}
  `,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dt(Ft=>!Ft),className:`
          w-full
          px-3 py-3
          rounded-xl
          flex items-center justify-center
          bg-green
          text-black
          shadow-xl
          hover:opacity-90
          transition
        `,"aria-label":"Create",children:jsxRuntimeExports.jsx(Plus,{size:26,className:`transition-transform ${et?"rotate-45":""}`})}),et&&jsxRuntimeExports.jsxs("div",{className:`
            absolute bottom-full right-0 mb-3
            w-44
            rounded-xl
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            shadow-2xl
            overflow-hidden
          `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>{dt(!1),$t()},className:`
              w-full px-4 py-3 text-left text-sm
              hover:bg-dashboard-hover-light
              dark:hover:bg-dashboard-hover-dark
            `,children:"Post"}),jsxRuntimeExports.jsx("button",{onClick:()=>{dt(!1),kt()},className:`
              w-full px-4 py-3 text-left text-sm
              hover:bg-dashboard-hover-light
              dark:hover:bg-dashboard-hover-dark
            `,children:"Fragment"})]})]})}function CommunityTopic(){const{topicId:et}=useParams(),dt=useNavigate(),$t=useLocation(),[kt,Tt]=reactExports.useState(null),[Dt,Ft]=reactExports.useState([]),[Ut,Ht]=reactExports.useState(!1),Kt=reactExports.useRef(null),[Yt,Jt]=reactExports.useState(!0),Zt=reactExports.useRef(0);function er(sr){return sr.comments_locked===1||sr.comments_visibility==="paid"&&sr.has_paid_subscription!==1||sr.comments_visibility==="private"&&sr.is_subscribed!==1}const rr=async()=>{try{const sr=await axiosInstance.get(`/community/topics/${et}`);Tt(sr.data.topic),console.log("topic",kt);const nr=await axiosInstance.get(`/community/topics/${et}/posts`);Ft(nr.data.posts)}catch(sr){console.error("Failed to load topic:",sr)}};return reactExports.useEffect(()=>{rr()},[et]),reactExports.useEffect(()=>{Ht(!1)},[et]),reactExports.useEffect(()=>{function sr(){const nr=window.scrollY;nr>Zt.current&&nr>80&&Jt(!1),nr<Zt.current&&Jt(!0),Zt.current=nr}return window.addEventListener("scroll",sr,{passive:!0}),()=>{window.removeEventListener("scroll",sr)}},[]),reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),kt?jsxRuntimeExports.jsxs("div",{className:"sm:pt-16 px-0 sm:px-6 lg:px-6 max-w-4xl mx-auto pt-14",children:[jsxRuntimeExports.jsxs("div",{className:`
        flex items-start justify-between mb-6
        px-4             
        sm:px-0           
      `,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:`
        text-2xl font-semibold
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:kt.name}),kt.description&&jsxRuntimeExports.jsx("p",{className:`
          mt-1
          text-sm
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
          max-w-2xl
        `,children:kt.description})]}),Dt.length>0&&jsxRuntimeExports.jsxs("button",{onClick:()=>dt("/community/create-post",{state:{topicId:kt.id,topicName:kt.name}}),className:`
      hidden md:flex
      items-center gap-2
      px-3 py-1.5
      rounded-md text-sm
      border border-dashboard-border-light dark:border-dashboard-border-dark
      text-dashboard-text-light dark:text-dashboard-text-dark
      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
      transition
    `,children:[jsxRuntimeExports.jsx(Plus,{size:18}),"New Post"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Dt.length===0&&jsxRuntimeExports.jsxs("div",{className:`
        mt-16
        px-6
        py-12
        rounded-xl
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        text-center
      `,children:[jsxRuntimeExports.jsxs("h2",{className:`
          text-lg font-semibold
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          mb-2
        `,children:["This is the ",kt.name," room"]}),jsxRuntimeExports.jsxs("p",{className:`
          text-sm
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
          max-w-md
          mx-auto
          leading-relaxed
        `,children:["No one has started a conversation here yet. This space is for ideas, questions, and writing related to ",kt.name,". Be the first to set the tone."]}),jsxRuntimeExports.jsx("button",{onClick:()=>dt("/community/create-post",{state:{topicId:kt.id,topicName:kt.name}}),className:`
          mt-6
          px-5 py-2.5
          rounded-lg
          bg-green text-black
          font-medium
          hover:opacity-90
          transition
        `,children:"Write the first post"})]}),Dt.map(sr=>{const nr=async()=>{try{await axiosInstance.post(`/community/${et}/mark-viewed`)}catch{}dt(`/community/post/${sr.id}`,{state:{from:$t.pathname}})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx(MobilePostCard,{post:sr,onOpen:nr,onLike:()=>{},onShare:()=>{},isCommentsLocked:er(sr),copiedPostId:null})}),jsxRuntimeExports.jsx("div",{onClick:nr,className:`
                hidden md:block
                px-4 py-4 sm:px-6
                rounded-lg
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                transition
                cursor-pointer
              `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-6 items-start",children:[jsxRuntimeExports.jsx("div",{className:"min-w-0",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[32px_1fr] gap-3",children:[sr.author_image?jsxRuntimeExports.jsx("img",{src:sr.author_image,alt:"",className:`
                          w-8 h-8 rounded-full object-cover
                          border border-dashboard-border-light
                          dark:border-dashboard-border-dark
                        `}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:sr.author}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:timeAgo(sr.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:formatDate(sr.created_at)})]})]}),jsxRuntimeExports.jsx("h3",{className:`
                          text-base sm:text-lg font-semibold
                          line-clamp-2
                          text-dashboard-text-light
                          dark:text-dashboard-text-dark
                          mb-1
                        `,children:sr.title}),sr.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                            text-sm sm:text-base
                            line-clamp-2
                            text-dashboard-muted-light
                            dark:text-dashboard-muted-dark
                            mb-2
                          `,children:sr.subtitle}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm sm:text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:sr.views??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:sr.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[er(sr)?jsxRuntimeExports.jsx(MessageSquareLock,{size:16,className:"opacity-70"}):jsxRuntimeExports.jsx(MessageSquare,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:sr.comment_count??0})]})]})]})]})}),jsxRuntimeExports.jsx("div",{className:`
                  w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20
                  rounded-lg
                  flex-shrink-0
                  border border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  overflow-hidden
                  bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                `,children:sr.image_url?jsxRuntimeExports.jsx("img",{src:sr.image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs opacity-60",children:"No image"})})]})})]},sr.id)})]}),jsxRuntimeExports.jsx(MobileCreateFAB,{className:`
    transition-all duration-200 ease-out
    ${Yt?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}
  `,open:Ut,setOpen:Ht,containerRef:Kt,onCreatePost:()=>dt("/community/create-post",{state:{topicId:kt.id,topicName:kt.name}}),onCreateFragment:()=>dt("/community/fragments/create",{state:{topicId:kt.id,topicName:kt.name}})})]}):null}function FragmentItem({fragment:et,onOpen:dt,onToggleLike:$t}){const{body:kt,created_at:Tt,updated_at:Dt,views:Ft,like_count:Ut,has_liked:Ht,comment_count:Kt,reshare_count:Yt,author:Jt,author_image:Zt,author_is_verified:er,reshared_id:rr}=et,sr=useNavigate(),nr=er===1;return jsxRuntimeExports.jsx("div",{onClick:dt,className:`
    px-4 py-4
    sm:px-6
    rounded-lg
    border
    border-dashboard-border-light
    dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light
    dark:bg-dashboard-sidebar-dark
    hover:bg-dashboard-hover-light
    dark:hover:bg-dashboard-hover-dark
    transition
    cursor-pointer
  `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3",children:[Zt?jsxRuntimeExports.jsx("img",{src:Zt,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[2px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Jt}),nr&&jsxRuntimeExports.jsx(ShieldCheck,{size:12,className:"text-dashboard-muted-light dark:text-green"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:timeAgo(Tt)}),Dt&&new Date(Dt)>new Date(Tt)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"italic opacity-70",children:"edited"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",dangerouslySetInnerHTML:{__html:typeof kt=="string"?kt:""}}),rr&&jsxRuntimeExports.jsxs("div",{className:`
              mt-3
              rounded-lg
            border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              p-3
            `,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[32px_1fr] gap-3",children:[et.reshared_author_image?jsxRuntimeExports.jsx("img",{src:et.reshared_author_image,alt:"",className:"w-7 h-7 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full bg-dashboard-border-light dark:bg-dashboard-border-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:et.reshared_author}),et.reshared_author_is_verified===1&&jsxRuntimeExports.jsx(ShieldCheck,{size:12,className:"text-green"})]}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:timeAgo(et.reshared_created_at)})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",dangerouslySetInnerHTML:{__html:typeof et.reshared_body=="string"?et.reshared_body:""}})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex items-center gap-6 text-sm sm:text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Ft??0})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:ir=>{ir.stopPropagation(),$t(et.id,Ht)},className:"flex items-center gap-[4px] hover:opacity-80 transition",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:Ht?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Ut})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(MessageSquare,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Kt})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px] cursor-pointer",onClick:ir=>{ir.stopPropagation(),sr(`/community/fragments/create?reshare=${et.id}`)},children:[jsxRuntimeExports.jsx(Repeat,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.reshare_count})]})]})]})]})})}function CommunityHome(){var rs;const dt=reactExports.useRef(null),[$t,kt]=reactExports.useState([]),Tt=useNavigate(),[Dt,Ft]=reactExports.useState(new Set),[Ut,Ht]=reactExports.useState([]),[Kt,Yt]=reactExports.useState(0),[Jt,Zt]=reactExports.useState(!0),[er,rr]=reactExports.useState(!1),[sr,nr]=reactExports.useState("all"),[ir,or]=reactExports.useState(!1),lr=reactExports.useRef(null),[cr,dr]=reactExports.useState(!0),ur=reactExports.useRef(0),[pr,mr]=reactExports.useState(!1),jr=reactExports.useRef(null),[Rr,xr]=reactExports.useState(null),[kr,Mr]=reactExports.useState({hasActivity:!1,summary:{commentsOnYourPosts:0,repliesToYourComments:0,mentions:0}}),[Tr,Or]=reactExports.useState(!1);async function _r(Wr){try{await axiosInstance.post(`/community/posts/${Wr}/view`)}catch{}Tt(`/community/post/${Wr}`)}const Pr=reactExports.useCallback(async(Wr=!1)=>{if(!er&&!(!Wr&&!Jt))try{rr(!0),Wr&&(Yt(0),Zt(!0));const Xr=await axiosInstance.get("/community/feed",{params:{limit:20,offset:Wr?0:Kt}}),ns=Xr.data.items||[];Ht(gs=>Wr?ns:[...gs,...ns]),Yt(gs=>gs+ns.length),Xr.data.hasMore||Zt(!1)}catch(Xr){console.error("Failed to load feed:",Xr)}finally{rr(!1)}},[20,Kt,Jt,er]);function br(Wr){return Wr.is_owner===1?!1:Wr.comments_locked===1||Wr.comments_visibility==="paid"||Wr.comments_visibility==="private"&&Wr.is_subscribed!==1}reactExports.useEffect(()=>{function Wr(){const Xr=window.scrollY;Xr>ur.current&&Xr>80&&dr(!1),Xr<ur.current&&dr(!0),ur.current=Xr}return window.addEventListener("scroll",Wr,{passive:!0}),()=>{window.removeEventListener("scroll",Wr)}},[]),reactExports.useEffect(()=>{(async()=>{var Xr;try{const ns=await axiosInstance.get("/community/recap");(Xr=ns.data)!=null&&Xr.hasActivity&&Mr(ns.data)}catch(ns){console.error("Failed to fetch recap:",ns)}})()},[]),reactExports.useEffect(()=>{if(!dt.current)return;const Wr=new IntersectionObserver(Xr=>{Xr[0].isIntersecting&&Jt&&!er&&Pr()},{root:null,rootMargin:"200px",threshold:0});return Wr.observe(dt.current),()=>Wr.disconnect()},[Jt,er,Pr]);const wr=async()=>{Or(!0);try{await axiosInstance.post("/community/mark-seen")}catch{}};reactExports.useEffect(()=>{Pr(!0)},[]),reactExports.useEffect(()=>{function Wr(Xr){jr.current&&!jr.current.contains(Xr.target)&&mr(!1)}return document.addEventListener("mousedown",Wr),()=>{document.removeEventListener("mousedown",Wr)}},[]),reactExports.useEffect(()=>{function Wr(Xr){lr.current&&!lr.current.contains(Xr.target)&&or(!1)}return ir&&document.addEventListener("click",Wr),()=>{document.removeEventListener("click",Wr)}},[ir]);const zr=reactExports.useMemo(()=>{const Wr=Ut.filter(Xr=>Xr.type==="post").map(Xr=>Xr.data);return sr==="all"?Wr:Wr.filter(Xr=>Xr.topic_id===sr)},[Ut,sr]),Hr=async(Wr,Xr)=>{Wr.stopPropagation();const ns=`${window.location.origin}/p/${Xr.slug}`;try{await navigator.clipboard.writeText(ns),xr(Xr.id),setTimeout(()=>xr(null),1500)}catch{y$4.error("Failed to copy link")}},Yr=async(Wr,Xr)=>{if(Wr.stopPropagation(),!!(Xr!=null&&Xr.id))try{Xr.has_liked?await axiosInstance.delete("/community/delete-like",{data:{targetType:"post",targetId:Xr.id}}):await axiosInstance.post("/community/likes",{targetType:"post",targetId:Xr.id}),Ht(ns=>ns.map(gs=>gs.type==="post"&&gs.data.id===Xr.id?{...gs,data:{...gs.data,has_liked:Xr.has_liked?0:1,like_count:Math.max((gs.data.like_count||0)+(Xr.has_liked?-1:1),0)}}:gs))}catch(ns){console.error("Failed to toggle post like:",ns),y$4.error("Failed to update like")}},es=async Wr=>{try{Wr.has_liked?await axiosInstance.delete("/community/delete-like",{data:{targetType:"fragment",targetId:Wr.id}}):await axiosInstance.post("/community/likes",{targetType:"fragment",targetId:Wr.id}),Ht(Xr=>Xr.map(ns=>ns.type==="fragment"&&ns.data.id===Wr.id?{...ns,data:{...ns.data,has_liked:Wr.has_liked?0:1,like_count:(ns.data.like_count||0)+(Wr.has_liked?-1:1)}}:ns))}catch{y$4.error("Failed to update fragment like")}};return reactExports.useEffect(()=>{(async()=>{try{const Xr=await axiosInstance.get("/community/views");Ft(new Set(Xr.data.viewedTopics))}catch(Xr){console.error("Failed to load viewed topics:",Xr)}})()},[]),reactExports.useEffect(()=>{(async()=>{try{const Xr=await axiosInstance.get("/community/topics");kt(Xr.data.topics||[])}catch(Xr){console.error("Failed to load topics:",Xr)}})()},[]),jsxRuntimeExports.jsxs("div",{className:`
    w-full min-h-screen
    px-0 py-0
    bg-dashboard-bg-light
    dark:bg-dashboard-bg-dark
  `,children:[jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:`
          w-full max-w-5xl

          /* mobile */
          bg-transparent
          border-none
          rounded-none
          shadow-none
          p-0

          /* desktop */
          sm:bg-dashboard-sidebar-light
          sm:dark:bg-dashboard-sidebar-dark
          sm:border sm:border-dashboard-border-light sm:dark:border-dashboard-border-dark
          sm:rounded-xl
          sm:p-8
          lg:p-10
          sm:shadow-xl
          sm:backdrop-blur-sm
          flex flex-col
        `,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-center",children:jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"Messy Attic Logo",width:75,height:75,className:`
              block
              select-none
            `})}),jsxRuntimeExports.jsx("h1",{className:`
          text-3xl font-bold text-center normal-case
          text-dashboard-text-light
          dark:text-dashboard-text-dark mb-2
  `,children:"The Messy Attic"}),jsxRuntimeExports.jsxs("p",{className:`
            text-center text-sm sm:text-base
            max-w-xl mx-auto
            text-dashboard-muted-light
            dark:text-dashboard-muted-dark
            mb-8
          `,children:["where writers come together to share work, encourage one another,",jsxRuntimeExports.jsx("br",{}),"and grow through honest feedback and connection."]}),jsxRuntimeExports.jsxs("div",{ref:lr,className:"hidden md:flex justify-center mb-8 relative",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:Wr=>{Wr.stopPropagation(),or(Xr=>!Xr)},className:`
              w-full
              px-6 py-4
              rounded-xl

              sm:w-12 sm:h-12
              sm:px-0 sm:py-0
              sm:rounded-xl

              flex items-center justify-center
              font-semibold
              bg-green
              text-black
              hover:opacity-90
              transition
              shadow-sm
            `,"aria-label":"Create",children:jsxRuntimeExports.jsx(Plus,{size:22,className:`transition-transform ${ir?"rotate-45":""}`})}),ir&&jsxRuntimeExports.jsxs("div",{className:`
                absolute top-full mt-2
                w-40
                rounded-lg
                border border-dashboard-border-light
                dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                shadow-xl
                overflow-hidden
                z-50
              `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>{or(!1),Tt("/community/create-post")},className:`
                  w-full px-4 py-3 text-left text-sm
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                `,children:"Post"}),jsxRuntimeExports.jsx("button",{onClick:()=>{or(!1),Tt("/community/fragments/create")},className:`
                  w-full px-4 py-3 text-left text-sm
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                `,children:"Fragment"})]})]}),kr.hasActivity&&!Tr&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:`
                max-w-4xl mx-auto
                rounded-xl
                border border-dashboard-border-light dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                p-5
                shadow-sm
                flex flex-col gap-3
              `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:"Welcome back"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mt-1",children:"Heres whats happened since your last visit."})]}),jsxRuntimeExports.jsx("button",{onClick:wr,className:`
                    text-xs
                    text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
                    hover:opacity-80
                  `,children:"Dismiss"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[kr.summary.commentsOnYourPosts>0&&jsxRuntimeExports.jsxs("button",{onClick:wr,className:"block text-left hover:underline",children:[" ",kr.summary.commentsOnYourPosts," new comment",kr.summary.commentsOnYourPosts>1?"s":""," on your posts"]}),kr.summary.repliesToYourComments>0&&jsxRuntimeExports.jsxs("button",{onClick:wr,className:"block text-left hover:underline",children:[" ",kr.summary.repliesToYourComments," repl",kr.summary.repliesToYourComments>1?"ies":"y"," to your comments"]}),kr.summary.mentions>0&&jsxRuntimeExports.jsxs("button",{onClick:wr,className:"block text-left hover:underline",children:[" You were mentioned ",kr.summary.mentions," time",kr.summary.mentions>1?"s":""]})]})]})}),jsxRuntimeExports.jsxs("div",{ref:jr,className:"relative mb-6 flex-shrink-0 flex justify-center",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>mr(Wr=>!Wr),className:`
              w-full sm:w-64
              h-10
              px-4
              flex items-center justify-between
              rounded-lg
              border border-dashboard-border-light dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              text-sm font-medium
              text-dashboard-text-light dark:text-dashboard-text-dark
              hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
              transition
            `,children:[jsxRuntimeExports.jsx("span",{children:sr==="all"?"All topics":((rs=$t.find(Wr=>Wr.id===sr))==null?void 0:rs.name)||"Select topic"}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${pr?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.7a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),pr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>mr(!1)}),jsxRuntimeExports.jsxs("div",{className:`
                absolute z-50 mt-2 w-full sm:w-64
                rounded-lg
                border border-dashboard-border-light dark:border-dashboard-border-dark
                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                shadow-xl
                max-h-[400px] overflow-y-auto
              `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>{nr("all"),mr(!1)},className:`
                  w-full px-4 py-2 text-left text-sm
                  hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
                `,children:"All topics"}),$t.map(Wr=>jsxRuntimeExports.jsx("button",{onClick:()=>{nr(Wr.id),Tt(`/community/topic/${Wr.id}`),mr(!1)},className:`
                    w-full px-4 py-2 text-left text-sm
                    hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
                  `,children:Wr.name},Wr.id))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full mt-4",children:[jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto space-y-2 px-0 sm:px-6",children:(sr==="all"?Ut:zr.map(Wr=>({type:"post",data:Wr}))).map(Wr=>{if(Wr.type==="post"){const Xr=Wr.data;return jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx(MobilePostCard,{post:Xr,onOpen:()=>_r(Xr.id),onLike:ns=>Yr(ns,Xr),onShare:ns=>Hr(ns,Xr),isCommentsLocked:br(Xr),copiedPostId:Rr})}),jsxRuntimeExports.jsx("div",{className:`
    hidden md:block
    px-4 py-4 sm:px-6
    rounded-lg
    border border-dashboard-border-light
    dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light
    dark:bg-dashboard-sidebar-dark
    hover:bg-dashboard-hover-light
    dark:hover:bg-dashboard-hover-dark
    transition
    cursor-pointer
  `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-6 items-start",children:[jsxRuntimeExports.jsx("div",{onClick:()=>_r(Xr.id),className:"min-w-0 cursor-pointer",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[32px_1fr] gap-3",children:[Xr.author_image?jsxRuntimeExports.jsx("img",{src:Xr.author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:Xr.author}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:timeAgo(Xr.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:formatDate(Xr.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:Xr.topic_name})]})]}),jsxRuntimeExports.jsx("h3",{className:`
              text-base sm:text-lg font-semibold
              text-dashboard-text-light dark:text-dashboard-text-dark
              line-clamp-2
              mb-1
            `,children:Xr.title}),Xr.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                text-sm
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                line-clamp-2
                mb-2
              `,children:Xr.subtitle}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm  text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:14,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Xr.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:ns=>Yr(ns,Xr),className:"flex items-center gap-[4px] hover:opacity-80 transition",children:[jsxRuntimeExports.jsx(Heart,{size:14,className:Xr.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Xr.like_count??0})]}),jsxRuntimeExports.jsxs("button",{onClick:ns=>{ns.stopPropagation(),_r(Xr.id)},className:"flex items-center gap-[4px] hover:opacity-80 transition",children:[br(Xr)?jsxRuntimeExports.jsx(MessageSquareLock,{size:14,className:"opacity-70"}):jsxRuntimeExports.jsx(MessageSquare,{size:14,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:Xr.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:ns=>Hr(ns,Xr),className:"flex items-center gap-[4px] hover:opacity-80 transition",children:Rr===Xr.id?jsxRuntimeExports.jsx(Check,{size:14,className:"text-green"}):jsxRuntimeExports.jsx(Share2,{size:14,className:"opacity-70"})})]})]})]})}),jsxRuntimeExports.jsx("div",{className:`
        w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20
        rounded-lg
        flex-shrink-0
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        overflow-hidden
        bg-dashboard-hover-light
        dark:bg-dashboard-hover-dark
      `,children:Xr.image_url?jsxRuntimeExports.jsx("img",{src:Xr.image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"No image"})})})]})})]},Xr.id)}return Wr.type==="fragment"?jsxRuntimeExports.jsx(FragmentItem,{fragment:Wr.data,onOpen:()=>Tt(`/community/fragments/${Wr.data.id}`),onToggleLike:()=>es(Wr.data)},Wr.data.id):null})}),er&&Jt&&jsxRuntimeExports.jsx("div",{className:"py-4 text-center text-xs opacity-60 text-dashboard-text-light dark:text-dashboard-text-dark",children:"Loading more"}),jsxRuntimeExports.jsx("div",{ref:dt,className:"h-10"})]})]})}),jsxRuntimeExports.jsx(MobileCreateFAB,{className:`
    transition-all duration-200 ease-out
    ${cr?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}
  `,open:ir,setOpen:or,containerRef:lr,onCreatePost:()=>Tt("/community/create-post"),onCreateFragment:()=>Tt("/community/fragments/create")})]})}function Notifications(){const[et,dt]=reactExports.useState([]),$t=useNavigate();reactExports.useEffect(()=>{(async()=>{try{const Ft=await axiosInstance.get("/notifications");dt(Ft.data.notifications||[])}catch(Ft){console.error("Failed to load notifications",Ft)}})()},[]);const kt=async Dt=>{if(Dt.is_read||await Tt(Dt.id),Dt.type==="subscription"){$t(`/community/authors/${Dt.actor_id}`);return}if(Dt.target_type==="post"){if(Dt.type==="post_like"){$t(`/community/post/${Dt.target_id}`);return}$t(`/community/post/${Dt.target_id}${Dt.reference_id?`?highlight=${Dt.reference_id}`:""}`);return}if(Dt.target_type==="fragment"){$t(`/community/fragments/${Dt.target_id}${Dt.reference_id?`?highlight=${Dt.reference_id}`:""}`);return}console.warn("Unknown notification target:",Dt)},Tt=reactExports.useCallback(async Dt=>{try{await axiosInstance.post("/notifications/mark-read",{ids:[Dt]}),dt(Ft=>Ft.map(Ut=>Ut.id===Dt?{...Ut,is_read:1}:Ut))}catch(Ft){console.error("Failed to mark notification read",Ft)}},[]);return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"w-full flex justify-center items-start min-h-[80vh] px-0 sm:px-0 py-3 sm:py-3",children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-2xl

        /* mobile */
        p-4
        rounded-none
        border-none
        shadow-none
        bg-transparent

        /* desktop */
        sm:p-8
        sm:rounded-2xl
        sm:shadow-xl
        sm:bg-dashboard-sidebar-light
        sm:dark:bg-dashboard-sidebar-dark
        sm:border
        sm:border-dashboard-border-light
        sm:dark:border-dashboard-border-dark
      `,children:[jsxRuntimeExports.jsx("h1",{className:`
          text-2xl font-bold mb-6 text-center normal-case
          text-dashboard-text-light
          dark:text-dashboard-text-dark
  `,children:"Notifications "}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[et.length===0&&jsxRuntimeExports.jsx("p",{className:`
              text-center py-6
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
  `,children:"No notifications yet."}),et.map(Dt=>{var Ft,Ut,Ht,Kt;return jsxRuntimeExports.jsxs("button",{onClick:()=>kt(Dt),className:`
              relative
              w-full text-left p-4 sm:p-4 rounded-lg transition
              ${Dt.is_read?"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark opacity-80":"bg-green/10 dark:bg-green/20 border-green/40"}
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              hover:border-green
            `,children:[!Dt.is_read&&jsxRuntimeExports.jsx("span",{className:`
        absolute top-3 right-3
        w-2 h-2 rounded-full
        bg-green
      `}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[Dt.actor_image?jsxRuntimeExports.jsx(Img,{src:Dt.actor_image,loader:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full border border-dashboard-border-light dark:border-dashboard-border-dark animate-pulse"}),unloader:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-dashboard-text-light dark:text-dashboard-text-dark",children:((Ut=(Ft=Dt.actor_name)==null?void 0:Ft.charAt(0))==null?void 0:Ut.toUpperCase())||"U"}),decode:!0,alt:"User avatar",className:"w-10 h-10 rounded-full object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark text-dashboard-text-light dark:text-dashboard-text-dark",children:((Kt=(Ht=Dt.actor_name)==null?void 0:Ht.charAt(0))==null?void 0:Kt.toUpperCase())||"U"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-dashboard-text-light dark:text-dashboard-text-dark truncate",children:Dt.actor_name?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:Dt.actor_name})," ",Dt.message.replace("Someone","").trim()]}):Dt.message}),Dt.post_title&&jsxRuntimeExports.jsx("p",{className:`
                        text-xs mt-1 truncate
                        text-dashboard-muted-light
                        dark:text-dashboard-muted-dark
                      `,children:Dt.post_title}),jsxRuntimeExports.jsx("p",{className:"text-[11px] mt-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:new Date(Dt.created_at).toLocaleString([],{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})})]})]}),Dt.post_image&&jsxRuntimeExports.jsx("img",{src:Dt.post_image,alt:"",className:`
        w-12 h-12
        rounded-lg
        object-cover
        flex-shrink-0
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
      `})]})]},Dt.id)})]})]})})}function DocsIndexPage(){const[et,dt]=reactExports.useState(""),kt=[{id:"settings-page",title:"Settings Page",description:"Manage your profile, avatar, Two-Factor Authentication, Passkeys, Stripe payouts, brand identity file, and your default CTA message.",path:"/docs/settings"},{id:"landing-builder",title:"Landing Page Builder",description:"Create landing pages using blocks, templates, Stripe checkout, and custom branding.",path:"/docs/landing-page-builder"},{id:"seller-dashboard",title:"Seller Dashboard",description:"Track sales, payouts, customers, and AI emails with your Stripe-connected dashboard.",path:"/docs/seller-dashboard"},{id:"analytics",title:"Analytics",description:"Track views, clicks, analytics, sales, and sales across your entire system.",path:"/docs/analytics-docs"},{id:"custom-domains",title:"Custom Domains",description:"Connect your own domain to The Messy Attic, verify ownership, and host landing pages under your brand.",path:"/docs/custom-domain"},{id:"authors-assistant",title:"Authors Assistant",description:"Write, revise, finalize, and publish full-length books using a structured, section-based workflow built for serious authors.",path:"/docs/authors-assistant"}].filter(Tt=>Tt.title.toLowerCase().includes(et.toLowerCase())||Tt.description.toLowerCase().includes(et.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:`
      w-full max-w-4xl mx-auto
      py-10 px-6
      text-dashboard-text-light
      dark:text-dashboard-text-dark
    `,children:[jsxRuntimeExports.jsxs("header",{className:"mb-10",children:[jsxRuntimeExports.jsxs("h1",{className:`
          text-3xl font-bold flex items-center gap-3 mb-2 normal-case
          text-dashboard-text-light
          dark:text-dashboard-text-dark
        `,children:[jsxRuntimeExports.jsx(ShieldQuestionMark,{className:"w-8 h-8 text-green"}),"Documentation"]}),jsxRuntimeExports.jsx("p",{className:`
          text-sm
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
        `,children:"Search or browse through all Cre8tly Studio help guides, tutorials, and feature overviews."})]}),jsxRuntimeExports.jsxs("div",{className:"relative mb-8",children:[jsxRuntimeExports.jsx(Search,{className:`
          absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
        `}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search documentation...",value:et,onChange:Tt=>dt(Tt.target.value),style:{paddingLeft:"50px"},className:`
          w-full
          px-4 py-3 pl-14
          rounded-xl
          bg-dashboard-bg-light
          dark:bg-dashboard-bg-dark
          border border-dashboard-border-light
          dark:border-dashboard-border-dark
          text-dashboard-text-light
          dark:text-dashboard-text-dark
          placeholder-dashboard-muted-light
          dark:placeholder-dashboard-muted-dark
          focus:outline-none
          focus:ring-2 focus:ring-green
        `})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:kt.map(Tt=>jsxRuntimeExports.jsxs(Link$2,{to:Tt.path,className:`
            block p-5 rounded-xl transition shadow
            bg-dashboard-sidebar-light
            dark:bg-dashboard-sidebar-dark
            border border-dashboard-border-light
            dark:border-dashboard-border-dark
            hover:border-dashboard-muted-light
            dark:hover:border-dashboard-muted-dark
          `,children:[jsxRuntimeExports.jsx("h2",{className:`
              text-lg font-semibold mb-2
              text-dashboard-text-light
              dark:text-dashboard-text-dark
            `,children:Tt.title}),jsxRuntimeExports.jsx("p",{className:`
              text-sm leading-relaxed
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
            `,children:Tt.description})]},Tt.id))}),kt.length===0&&jsxRuntimeExports.jsx("p",{className:`
          text-center text-sm mt-10 italic
          text-dashboard-muted-light
          dark:text-dashboard-muted-dark
        `,children:"No documents found for your search."})]})}function SettingsDocs(){const et=[{id:"intro",label:"Introduction"},{id:"avatar",label:"Profile Avatar"},{id:"twofa",label:"Two-Factor Authentication"},{id:"passkeys",label:"Passkey Authentication"},{id:"stripe",label:"Stripe Payouts"},{id:"brand-file",label:"Brand Identity File"},{id:"cta",label:"Default Closing Message / CTA"}],dt=$t=>{const kt=document.getElementById($t);kt&&kt.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Settings,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Settings Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how to manage security, payouts, branding, and your default CTA."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map($t=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dt($t.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white transition text-gray-300 text-xs",children:$t.label})},$t.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(Settings,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Settings & Account Management"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Learn how to manage your profile, security, payouts, brand identity, and CTA message."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Time, 2 to 3 minutes"}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-3 h-3 text-green"}),"Best For, every Messy Attic user"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"The Settings page is where you control your account information, security features, payout connections, branding, and the default CTA that appears at the end of your lead magnets or documents."})]}),jsxRuntimeExports.jsxs("section",{id:"avatar",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. Profile Avatar"}),jsxRuntimeExports.jsx(Image$2,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Your avatar displays inside your dashboard and seller profile. Upload any image and it updates instantly."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Select an image file"}),jsxRuntimeExports.jsx("li",{children:"Click Upload Avatar"}),jsxRuntimeExports.jsx("li",{children:"Cre8tly updates your profile everywhere"})]})]}),jsxRuntimeExports.jsxs("section",{id:"twofa",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. Two-Factor Authentication (2FA)"}),jsxRuntimeExports.jsx(ShieldCheck,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"2FA adds a second layer of protection to your account by requiring a 6-digit code at login."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Click Enable 2FA"}),jsxRuntimeExports.jsx("li",{children:"Scan the QR code using Google Authenticator"}),jsxRuntimeExports.jsx("li",{children:"Enter your 6-digit code to activate"}),jsxRuntimeExports.jsx("li",{children:"You can disable 2FA at any time"})]})]}),jsxRuntimeExports.jsxs("section",{id:"passkeys",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"4. Passkey Authentication"}),jsxRuntimeExports.jsx(KeyRound,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Passkeys let you sign in using Face ID, Touch ID, Windows Hello, or hardware-based biometric authentication."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Register a passkey from your device"}),jsxRuntimeExports.jsx("li",{children:"Use Sign in with Passkey at login"}),jsxRuntimeExports.jsx("li",{children:"You may remove a passkey anytime"})]})]}),jsxRuntimeExports.jsxs("section",{id:"stripe",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"5. Stripe Payouts"}),jsxRuntimeExports.jsx(CreditCard,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"To receive payment through The Messy Attic, connect a Stripe Express account."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Start Stripe onboarding"}),jsxRuntimeExports.jsx("li",{children:"Complete ID verification"}),jsxRuntimeExports.jsx("li",{children:"Enable payouts"}),jsxRuntimeExports.jsx("li",{children:"If pending, resume setup anytime"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-3",children:"Free trial users must upgrade before connecting payouts."})]}),jsxRuntimeExports.jsxs("section",{id:"brand-file",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Brand Identity File"}),jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-green mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Brand Identity File helps the AI understand your tone, writing style, formatting preferences, examples, and personality."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Accepted files, PDF, DOCX, DOC, TXT."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Upload a new brand file anytime"}),jsxRuntimeExports.jsx("li",{children:"Remove your existing file to reset defaults"}),jsxRuntimeExports.jsx("li",{children:"Your brand file applies automatically to new projects"})]})]}),jsxRuntimeExports.jsxs("section",{id:"cta",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"7. Default Closing Message / CTA"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This CTA appears at the end of every lead magnet or pro document you create. Add your website, newsletter, signature, or next step."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Customize your closing message"}),jsxRuntimeExports.jsx("li",{children:"Save it once, it applies everywhere"}),jsxRuntimeExports.jsx("li",{children:"You can update it anytime"})]})]})]})})]})}function LandingBuilderDocs(){const et=[{id:"intro",label:"Introduction"},{id:"overview",label:"What the Landing Page Builder Does"},{id:"layout",label:"Layout and Interface"},{id:"blocks",label:"Block Basics"},{id:"hero-block",label:"Hero Sections"},{id:"feature-blocks",label:"Feature and Benefit Blocks"},{id:"testimonial-blocks",label:"Testimonials and Social Proof"},{id:"offer-pricing",label:"Offer and Pricing Blocks"},{id:"media-blocks",label:"Images and Video Blocks"},{id:"cta-buttons",label:"Buttons and Calls-to-Action"},{id:"branding",label:"Branding, Colors, and Backgrounds"},{id:"stripe",label:"Stripe Checkout Block"},{id:"seo",label:"SEO, URL, and Meta Settings"},{id:"mobile",label:"Mobile Layout and Responsiveness"},{id:"saving",label:"Saving, Previewing, and Publishing"},{id:"analytics",label:"Analytics and Tracking"},{id:"best-practices",label:"Best Practices"},{id:"troubleshooting",label:"Troubleshooting"}],dt=$t=>{const kt=document.getElementById($t);kt&&kt.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Landing Builder Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how to design, brand, and publish high-converting landing pages with The Messy Attic."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map($t=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>dt($t.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white transition text-gray-300 text-xs",children:$t.label})},$t.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(PanelsTopLeft,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Landing Page Builder"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"A block-based builder for creating branded, Stripe-ready landing pages that sell your digital products."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Time, 5 to 15 minutes per page"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:"Best For, lead magnets, sales pages, and digital product offers"})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"The Landing Page Builder is where you turn your lead magnets, books, and digital products into a live, shareable experience. It lets you stack pre-designed blocks, connect Stripe checkout, and ship a clean, on-brand page without touching raw HTML or CSS."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"Every landing page you create in The Messy Attic is built from reusable blocks. You can reorder them, change backgrounds, swap images, and customize copy while keeping the layout consistent and conversion-focused."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"The goal, move from I have a product to I have a page that can take payments and capture attention in a single working session."})]}),jsxRuntimeExports.jsxs("section",{id:"overview",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. What the Landing Page Builder Does"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The builder acts as a visual layer on top of your content and product data. It:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Lets you assemble pages using pre-built sections (blocks)"}),jsxRuntimeExports.jsx("li",{children:"Connects directly to Stripe so visitors can purchase without extra tools"}),jsxRuntimeExports.jsx("li",{children:"Applies your brand colors, gradients, and fonts from Settings"}),jsxRuntimeExports.jsx("li",{children:"Generates a public URL for each published landing page"}),jsxRuntimeExports.jsx("li",{children:"Works with templates so you can reuse proven layouts"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Think of it as your front door for each offer, controlled fully inside The Messy Attic."})]}),jsxRuntimeExports.jsxs("section",{id:"layout",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. Layout and Interface"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Landing Page Builder uses an expandable block system. Every block contains its own settings. All editing is done directly inside the block itself."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The interface is made up of three main parts:"}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Live Page Preview"}),"  the page is rendered exactly how visitors will see it while you build."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Expandable Blocks"}),"  each block (Image, h1, FAQs, Testimonials, Pricing, Stripe Checkout, etc.) contains its own controls. Click a block to expand it and reveal all editable fields for that section."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Block Actions"}),"  every block includes built-in tools such as:",jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside ml-5 mt-1 text-gray-400 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Move Up / Move Down"}),jsxRuntimeExports.jsx("li",{children:"Delete Block"}),jsxRuntimeExports.jsx("li",{children:"Collapse / Expand"})]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Instead of separating design controls into a right sidebar, the Cre8tly Builder keeps everything together inside the block you're working on. This keeps editing fast, simple, and intuitive without navigating between panels."})]}),jsxRuntimeExports.jsxs("section",{id:"blocks",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"4. Block Basics"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Everything on your page is a block. Blocks keep your design consistent while giving you room to customize copy and visuals."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Add new blocks from the Add Block or + controls"}),jsxRuntimeExports.jsx("li",{children:"Reorder blocks using drag handles or move up / move down"}),jsxRuntimeExports.jsx("li",{children:"Delete/Remove blocks you no longer need"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Different block types come with different fields, but they all follow the same principle, structured inputs that output a polished section."})]}),jsxRuntimeExports.jsxs("section",{id:"hero-block",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"5. Hero Sections"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The hero block is usually the first section on your landing page. It sets the tone, explains what the visitor is looking at, and gives them a clear next step."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Headline and subheadline"}),jsxRuntimeExports.jsx("li",{children:"Support text or bullet list"}),jsxRuntimeExports.jsx("li",{children:"Primary call-to-action button (e.g. Get Instant Access)"}),jsxRuntimeExports.jsx("li",{children:"Optional supporting image, mockup, or cover"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Use your hero to answer, What is this, who is it for, and why should I care right now?"})]}),jsxRuntimeExports.jsxs("section",{id:"feature-blocks",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Feature and Benefit Sections"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Feature sections help you break down what is inside your product or offer. These often appear under the hero section."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Typical fields include:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Section title (e.g. What You Will Get)"}),jsxRuntimeExports.jsx("li",{children:"Subtitle or one-line promise"}),jsxRuntimeExports.jsx("li",{children:"3 to 6 feature items with titles and descriptions"}),jsxRuntimeExports.jsx("li",{children:"Optional icons or checkmarks"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Focus each feature on outcomes, not just components. Instead of 12 videos, write 12 short lessons that you can finish in a weekend."})]}),jsxRuntimeExports.jsxs("section",{id:"testimonial-blocks",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"7. Testimonials and Social Proof"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Testimonial blocks are designed to showcase real results, trust, and proof. They are especially useful before or after your pricing section."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"You can usually configure:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Quote text or result summary"}),jsxRuntimeExports.jsx("li",{children:"Customer name and role"}),jsxRuntimeExports.jsx("li",{children:"Optional avatar or image"}),jsxRuntimeExports.jsx("li",{children:"Optional rating stars or badges"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Use testimonials that speak to the same pains and goals your heros headline introduces."})]}),jsxRuntimeExports.jsxs("section",{id:"offer-pricing",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"8. Offer and Pricing Blocks"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Offer blocks are where you clearly state the price, what is included, and what buyers receive when they pay."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Plan title (e.g. Business Builder Annual)"}),jsxRuntimeExports.jsx("li",{children:"Price and billing frequency"}),jsxRuntimeExports.jsx("li",{children:"Feature checklist or inclusions list"}),jsxRuntimeExports.jsx("li",{children:"Primary button that connects to Stripe Checkout"}),jsxRuntimeExports.jsx("li",{children:"Guarantee or reassurance text under the button"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Keep this section simple and direct. The only job of this block is to make the decision feel safe and obvious."})]}),jsxRuntimeExports.jsxs("section",{id:"media-blocks",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"9. Images and Video Blocks"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Media blocks are used to show screenshots, mockups, previews, or short embedded videos of your product in action."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Common uses,"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Showing the inside of a lead magnet"}),jsxRuntimeExports.jsx("li",{children:"Previewing the dashboard or builder"}),jsxRuntimeExports.jsx("li",{children:"Demonstrating a process visually"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Use clean, high-contrast visuals and avoid overloading this block with text. Let the image or video do the heavy lifting."})]}),jsxRuntimeExports.jsxs("section",{id:"cta-buttons",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"10. Buttons and Calls-to-Action"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"CTA buttons are the bridge between reading and taking action. Throughout your page, you will see buttons that either scroll to the Stripe section, open checkout, or jump to key content."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Best practices for CTAs in the builder:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Use action phrases, Get Instant Access or Start the Trial"}),jsxRuntimeExports.jsx("li",{children:"Match button color to your brands primary accent"}),jsxRuntimeExports.jsx("li",{children:"Repeat CTAs after major sections (story  proof  CTA)"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"In many blocks, the button can be linked to the Stripe Checkout Block."})]}),jsxRuntimeExports.jsxs("section",{id:"branding",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"11. Branding, Colors, and Backgrounds"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Every block in the Landing Page Builder controls its own colors, backgrounds, and visual styling. There is also global text color settings. Each block includes its own collapsible styling panel where you can customize exactly how that section looks."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Most blocks include a background and color panel with options like:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Use No Background"}),"Leaves the block completely transparent so it blends with the page."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Solid Color"}),"Pick a color with the built-in color picker or type a HEX code for an exact match."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Gradient Background"}),"Enable gradient mode and choose:",jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside ml-5 mt-1 text-gray-400 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Start color (picker or HEX input)"}),jsxRuntimeExports.jsx("li",{children:"End color (picker or HEX input)"}),jsxRuntimeExports.jsx("li",{children:"Gradient angle or direction"})]})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Match Main Background"}),"Uses the same color that the top hero or main theme block is using, giving you a consistent banded layout."]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Because each block controls its own styling independently, you can mix transparent sections, solid bands, and gradients on the same page while keeping full control over how every part of your landing page looks."})]}),jsxRuntimeExports.jsxs("section",{id:"stripe",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["12. Stripe Checkout Block",jsxRuntimeExports.jsx(CreditCard,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Stripe Checkout Block is what turns your landing page into a sales engine. Each block connects a single published PDF inside your The Messy Attic account to your Stripe Express account so you can sell digital products securely and instantly."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Messy Attic does not allow outside links, external files, or downloads. You can only sell PDFs you have created and published inside your Cre8tly account. This ensures clean delivery, proper analytics tracking, and secure fulfillment for buyers."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"When you add a Stripe Checkout Block, you choose one of your published PDFs as the product. Cre8tly automatically links it to your Stripe Express account and configures the checkout experience."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The setup includes:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Selecting which published PDF to sell"}),jsxRuntimeExports.jsx("li",{children:"Connecting the PDF to your Stripe Express account"}),jsxRuntimeExports.jsx("li",{children:"Choosing the payment type, one-time or subscription"}),jsxRuntimeExports.jsx("li",{children:"Customizing the checkout button label"}),jsxRuntimeExports.jsx("li",{children:"Setting success and cancellation redirects"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"You are not limited to one offer. You can add multiple Stripe Checkout Blocks to the same landing page to sell:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Different PDFs"}),jsxRuntimeExports.jsx("li",{children:"Different price points"}),jsxRuntimeExports.jsx("li",{children:"Different subscription tiers"}),jsxRuntimeExports.jsx("li",{children:"Bundles, upgrades, or add-ons"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Each Stripe block operates independently, so visitors can choose whichever offer they want. This gives you complete flexibility when designing funnels, upsells, cross-sells, or multi-product pages."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"After purchasing, customers complete payment through Stripes secure checkout and are automatically redirected to a dedicated Thank You page. Their purchased PDF is instantly available for download, and the revenue is deposited directly into your connected Stripe Express account."})]}),jsxRuntimeExports.jsxs("section",{id:"seo",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"13. URL and Public Link"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Each landing page in The Messy Attic is published on its own custom subdomain. Instead of managing slugs or manual meta tags, you choose a subdomain name and The Messy Attic handles the rest."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Custom Subdomain,"})," pick a unique name for your page, for example"," ",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"thedigitalstore"}),"."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Public URL,"})," your page is published at"," ",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"https://theblueprint.themessyattic.com"})," ","(using whatever subdomain you chose)."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Automatic Meta Handling,"})," ","The Messy Attic manages the basic metadata and structure behind the scenes so you can focus on your offer and design instead of SEO setup."]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Choose a clear, memorable subdomain that matches your offer or brand name, so when you share the link, people instantly recognize what the page is about."})]}),jsxRuntimeExports.jsxs("section",{id:"mobile",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"15. Mobile Layout and Responsiveness"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Most visitors will see your landing page on a phone. The builder is designed so blocks stack cleanly on smaller screens, with text sizes and spacing adjusted for readability."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Inside the editor, you may have options to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Preview how blocks collapse into a single column"}),jsxRuntimeExports.jsx("li",{children:"Check how long headlines look on narrow screens"}),jsxRuntimeExports.jsx("li",{children:"Ensure buttons stay large enough to tap easily"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Always review your page on mobile before publishing. A great desktop design still needs a frictionless mobile experience."})]}),jsxRuntimeExports.jsxs("section",{id:"saving",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"16. Saving, Previewing, and Version Management"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Messy Attic gives you full control over how your landing page evolves. You can update the live version instantly, or create separate versions to test new layouts, colors, or offers without affecting what your visitors see."}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Live Saving"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Clicking ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Save Changes"})," ","instantly updates the live landing page. Any edits you maketext, layout changes, block settings, colors, or Stripe buttonsbecome visible to the public immediately after saving."]}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Creating Page Versions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Versions let you experiment freely without touching your live design. This is ideal for A/B layouts, new designs, seasonal updates, or major revisions."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"First Time Saving a Version:"})," ","you are prompted to name it manually (for example:",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"Summer Redesign"}),")."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Each version after that"})," ","is automatically numbered, such as",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"Version 2"}),",",jsxRuntimeExports.jsx("span",{className:"font-mono text-gray-400",children:"Version 3"}),", etc."]}),jsxRuntimeExports.jsxs("li",{children:["Versions do ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"not"})," affect the live site until you apply them."]})]}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Applying and Managing Versions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The Versions Panel allows you to preview, apply, or delete any saved version."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Preview"})," a version without changing the live site."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Apply"})," a version to load it into the editor so you can continue editing or make it live."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Delete"})," a version if you no longer need it."]})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-400 font-semibold mb-4",children:[" Important, after applying a version you must click"," ",jsxRuntimeExports.jsx("span",{className:"underline",children:"Save Changes"})," for it to become the new live public site."]}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Preview Mode"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Preview mode opens your landing page in a clean, visitor-ready display without the editor UI. This is ideal for testing spacing, mobile layout, scrolling behavior, and the full customer flow."}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-2",children:"Publishing / Live Site Behavior"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300",children:["The Messy Attic does not require a separate publishing step. The live site is updated the moment you click"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Save Changes"}),". Applying a version does not go live until you save."]})]}),jsxRuntimeExports.jsxs("section",{id:"analytics",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"17. Analytics and Tracking"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Landing pages feed directly into your Seller Dashboard analytics. Over time, you will see:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Total views and unique visitors"}),jsxRuntimeExports.jsx("li",{children:"Clicks on key buttons and Stripe checkout"}),jsxRuntimeExports.jsx("li",{children:"Conversion insights connected to your products"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Use this data to test different headlines, offers, and layouts by duplicating pages and comparing performance."})]}),jsxRuntimeExports.jsxs("section",{id:"best-practices",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["18. Best Practices",jsxRuntimeExports.jsx(Settings,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Keep one main goal per page, download, buy, or book."}),jsxRuntimeExports.jsx("li",{children:"Use one clear CTA repeated multiple times."}),jsxRuntimeExports.jsx("li",{children:"Start with a template, then tweak copy to match your voice."}),jsxRuntimeExports.jsx("li",{children:"Use Testimonials and Proof near your pricing or Stripe section."}),jsxRuntimeExports.jsx("li",{children:"Ensure your hero, offer, and Stripe block all tell the same story."})]})]}),jsxRuntimeExports.jsxs("section",{id:"troubleshooting",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["19. Troubleshooting",jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My page is not loading the latest changes"}),jsxRuntimeExports.jsx("p",{children:"Make sure you saved and re-published the landing page. Then refresh the public URL or open it in a private browser tab to avoid cached content."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"Stripe button is not working"}),jsxRuntimeExports.jsx("p",{children:"Confirm your Stripe account is connected in Settings and that a valid price or product ID is configured inside the Stripe Checkout Block."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"Page looks broken on mobile"}),jsxRuntimeExports.jsx("p",{children:"Check for extremely long words, unbroken URLs, or oversized images in your hero or feature blocks. Shorten text and re-upload optimized images if needed."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My page is not showing in analytics yet"}),jsxRuntimeExports.jsx("p",{children:"Analytics update over time. If the page is brand new, visit it from another device or browser to generate initial data, then revisit the Seller Dashboard."})]})]})]})]})})]})}function SellerDashboardDocs(){const et=[{id:"intro",label:"Introduction"},{id:"overview",label:"Dashboard Overview"},{id:"earnings",label:"Earnings & Payouts"},{id:"orders",label:"Customer Orders"},{id:"emails",label:"AI Email Templates"},{id:"stripe",label:"Stripe Express Integration"},{id:"faq",label:"Troubleshooting"}],dt=$t=>{const kt=document.getElementById($t);kt&&kt.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Seller Dashboard Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how to track sales, payouts, customers, and send emails using your built-in Seller Dashboard."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map($t=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>dt($t.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white text-gray-300 text-xs transition",children:$t.label})},$t.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(FileText,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Seller Dashboard"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Track your sales, payouts, customers, and follow-up emails directly inside The Messy Attic."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Learning Time, under 2 minutes"}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 text-green"}),"Best For, creators selling digital products"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3 leading-relaxed",children:"The Seller Dashboard is where you manage your entire sales system. Any PDF purchased from your Cre8tly landing pages appears here instantly, including customer details, the product purchased, and payout information from Stripe Express."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"It mirrors key Stripe Express information while adding creator-specific tools like customer emails, PDF titles purchased, time and date of purchase, and AI-generated templates."})]}),jsxRuntimeExports.jsxs("section",{id:"overview",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. Dashboard Overview"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Your Seller Dashboard gives you a quick snapshot of your business performance, including:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Pending Balance"}),jsxRuntimeExports.jsx("li",{children:"Available Balance"}),jsxRuntimeExports.jsx("li",{children:"Total revenue earned"}),jsxRuntimeExports.jsx("li",{children:"Recent Payouts"}),jsxRuntimeExports.jsx("li",{children:"Most recent customer purchases"}),jsxRuntimeExports.jsx("li",{children:"Top-selling PDFs"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"Everything updates in real time based on purchases made through your landing pages."})]}),jsxRuntimeExports.jsxs("section",{id:"earnings",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["3. Earnings & Payouts"," ",jsxRuntimeExports.jsx(CreditCard,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"All revenue you earn is paid out through your Stripe Express account. Inside Cre8tly, you can view:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Total earnings"}),jsxRuntimeExports.jsx("li",{children:"Payouts already completed"}),jsxRuntimeExports.jsx("li",{children:"Upcoming payout amounts"}),jsxRuntimeExports.jsx("li",{children:"Estimated payout dates"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Tax documents, bank details, and payout history are fully managed inside Stripe Express."})]}),jsxRuntimeExports.jsxs("section",{id:"orders",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["4. Customer Orders ",jsxRuntimeExports.jsx(Users,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Every completed purchase through your Stripe Checkout Block appears in your Orders list. You can view:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Customer email address"}),jsxRuntimeExports.jsx("li",{children:"Which PDF they purchased"}),jsxRuntimeExports.jsx("li",{children:"Sale price"}),jsxRuntimeExports.jsx("li",{children:"Date of purchase"}),jsxRuntimeExports.jsx("li",{children:"Download status"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"This replaces the need to dig through Stripe manually, everything is visible right inside your dashboard."})]}),jsxRuntimeExports.jsxs("section",{id:"emails",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["5. AI Email Templates ",jsxRuntimeExports.jsx(Mail,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"You can send emails directly from the Seller Dashboard using AI-generated templates. These are automatically personalized using:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"The customers name (when available)"}),jsxRuntimeExports.jsx("li",{children:"The product they purchased"}),jsxRuntimeExports.jsx("li",{children:"Your saved CTA or brand tone"}),jsxRuntimeExports.jsx("li",{children:"Your next-step offer or resource"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"Perfect for thank-you messages, upsells, follow-ups, or support replies, all without leaving your dashboard."})]}),jsxRuntimeExports.jsxs("section",{id:"stripe",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Stripe Express Integration"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3 leading-relaxed",children:"Stripe Express powers your payouts. Cre8tly handles the delivery experience, customer details, and sales tracking, but Stripe handles:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Identity verification"}),jsxRuntimeExports.jsx("li",{children:"Bank transfers"}),jsxRuntimeExports.jsx("li",{children:"Payout scheduling"}),jsxRuntimeExports.jsx("li",{children:"Tax forms (1099, etc.)"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"After a successful purchase:"}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Stripe processes the payment"}),jsxRuntimeExports.jsx("li",{children:"You receive the revenue (minus Stripe and The Messy Attic Platform fees)"}),jsxRuntimeExports.jsx("li",{children:"The customer is redirected to your Thank You page"}),jsxRuntimeExports.jsx("li",{children:"The PDF is delivered instantly"}),jsxRuntimeExports.jsx("li",{children:"The order appears inside your dashboard"})]})]}),jsxRuntimeExports.jsxs("section",{id:"faq",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["7. Troubleshooting"," ",jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My payout is missing"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Check your Stripe Express dashboard, payout timing is fully controlled by Stripe."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"A customer didnt receive their PDF"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Contact support if your customer did not receive their download after purchase."})]})]})]})]})})]})}function LandingAnalyticsDocs(){const et=[{id:"intro",label:"Introduction"},{id:"overview",label:"What Analytics Track"},{id:"ranges",label:"7, 14, 30, 90 Day Filters"},{id:"unique",label:"Unique Visitors Explained"},{id:"exclusions",label:"Which Views Do NOT Count"},{id:"metrics",label:"Understanding Each Metric"},{id:"charts",label:"Graph & Data Visualization"},{id:"faq",label:"Troubleshooting"}],dt=$t=>{const kt=document.getElementById($t);kt&&kt.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Analytics Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how Cre8tly tracks views, clicks, downloads, and sales across your landing pages."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map($t=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>dt($t.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white text-gray-300 text-xs transition",children:$t.label})},$t.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(ChartNoAxesColumn,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Landing Page Analytics"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Track unique visitors, clicks, downloads, and sales over time."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Learning Time, under 2 minutes"}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 text-green"}),"Best For, creators optimizing page performance"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"The Analytics dashboard gives you a clear picture of how your landing page is performing. You can see how many people visit, how many click your CTA, how many download your lead magnet, and how many complete a purchase."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"This makes it easy to test designs, measure improvements, and understand how your audience moves through your funnel."})]}),jsxRuntimeExports.jsxs("section",{id:"overview",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. What Analytics Track"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Unique Visitors"}),", people who viewed your landing page"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Clicks"}),", taps or clicks on your main CTA or Stripe button"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Downloads"}),", how many times your PDF was downloaded"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Sales"}),", purchases completed through Stripe Checkout"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"ranges",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. 7, 14, 30, and 90-Day Filters"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"You can switch between different time periods to see how your page performs over short or long ranges:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"7 days"}),", perfect for new pages and quick tests"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"14 days"}),", wider snapshot of engagement"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"30 days"}),", a full month of performance"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"90 days"}),", long-term behavior and trends"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"unique",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"4. How Unique Visitors Are Counted"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Cre8tly tracks"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"unique visitors"})," by counting each device or browser session only once per day. This means:"]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"If the same person visits your page multiple times in one day, it counts as 1 view"}),jsxRuntimeExports.jsx("li",{children:"If they return the next day, it counts as another unique view"}),jsxRuntimeExports.jsx("li",{children:"This prevents inflated numbers and gives clean, accurate data"})]})]}),jsxRuntimeExports.jsxs("section",{id:"exclusions",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"5. Views That Are NOT Counted"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:["To keep your analytics accurate, Cre8tly automatically excludes your own visits when you click"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Visit Live URL"})," inside the Landing Page Builder."]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"This means:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Your own views do not count"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Your own CTA clicks do not count"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Your own downloads do not count"})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"Only real visitorsactual potential customersare included."})]}),jsxRuntimeExports.jsxs("section",{id:"metrics",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:"6. Understanding Each Metric"}),jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(Activity,{className:"w-4 h-4 text-gray-400"}),"Unique Views"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"How many individual people saw your landing page during the selected time range."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(MousePointerClick,{className:"w-4 h-4 text-gray-400"}),"Clicks"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Tracks clicks on your CTA button or Stripe Checkout button. This shows how many visitors engaged with your offer."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 text-gray-400"}),"Downloads"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Counts how many times your lead magnet or PDF was downloaded from your page."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-gray-200 flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(DollarSign,{className:"w-4 h-4 text-gray-400"}),"Sales"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"How many purchases were completed through Stripe Checkout."})]})]})]}),jsxRuntimeExports.jsxs("section",{id:"charts",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"7. Charts & Visual Data"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"The bar chart shows a daily breakdown of Views, Clicks, and Downloads across the selected date range. Missing days are automatically filled so the graph always displays a complete timeline."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Hover over any bar to see the exact numbers for that day."})]}),jsxRuntimeExports.jsxs("section",{id:"faq",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["8. Troubleshooting"," ",jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My analytics show zero views"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Remember that your own visits are not counted. Have someone else visit your page or share your link publicly to start generating real data."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"The chart has gaps or missing days"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"This is normal. Days with no activity are shown as zero so your timeline stays accurate."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My downloads increased but my sales didnt"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"High downloads but low sales often mean your CTA or offer needs clarification or a stronger headline."})]})]})]})]})})]})}function SiteLayout(){const et=useLocation();return reactExports.useEffect(()=>{window.scrollTo({top:0,behavior:"auto"})},[et.pathname]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white text-black",children:[jsxRuntimeExports.jsx(Nav,{}),jsxRuntimeExports.jsx("main",{className:"relative min-h-screen bg-white",children:jsxRuntimeExports.jsx(Outlet,{})}),jsxRuntimeExports.jsx(Footer,{})]})}function LandingInfoPage(){const et=Tt=>({hidden:{opacity:0,x:Tt?60:-60},visible:{opacity:1,x:0,transition:{duration:.6,ease:"easeOut"}}}),dt=Tt=>({hidden:{opacity:0,x:Tt?-60:60,scale:.96},visible:{opacity:1,x:0,scale:1,transition:{duration:.6,ease:"easeOut"}}}),$t={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},kt=[{title:"Build and Publish Landing Pages Instantly",description:"Create high-converting landing pages in minutes and publish them instantly with a free The Messy Attic subdomain you can share anywhere.",image:landing},{title:"Drag, Drop, and Design With Ease",description:"Use a flexible block based builder to structure your page exactly how you want, sections, content blocks, offers, and calls to action.",image:blocks},{title:"Sell Your Book Instantly",description:"Turn landing pages into revenue generators by selling your published books directly from your custom  landing pagepage.",image:downLoadFeature},{title:"Built In Checkout and Payments",description:"Accept payments through secure Stripe Express checkout and receive weekly payouts with no extra setup.",image:stripeCheckout},{title:"AI Powered Content Creation",description:"Generate headlines, descriptions, offers, buttons, and full landing page copy using built-in AI inside your landing page blocks.",image:aiCopy},{title:"Save Versions and Iterate Without Risk",description:"Automatically save versions of your landing page so you can experiment, refine, and improve without losing previous work.",image:versions},{title:"Stay Organized With Section Containers",description:"Group content into containers to keep your landing page clean, structured, and easy to manage as it grows.",image:containers},{title:"Offer Books Youve Already Created",description:"Attach any Book inside The Messy Attic directly to your landing page and turn it into a downloadable or sellable offer.",image:offer},{title:"Fully Custom Brand Control",description:"Apply your brand logo, background themes, font styles, and text colors so every landing page matches your identity perfectly.",image:customBranding},{title:"Real-Time Landing Page Preview",description:"Preview your landing page live as you build so you always know exactly how it will look before publishing.",image:landingPreview},{title:"Flexible Block-Based Builder",description:"Design pages using powerful content blocks including headings, text, images, videos, dividers, FAQs, testimonials, countdown timers, and more.",image:blockFeatures},{title:"Conversion-Focused Offer Blocks",description:"Highlight offers with banners, pricing grids, verified reviews, and feature sections designed to increase trust and conversions.",image:blockConversion},{title:"Secure Checkout and Payments",description:"Accept payments with secure Stripe checkout blocks so customers can purchase directly from your landing page with confidence.",image:secureCheckout},{title:"Built-In Media and Interactive Blocks",description:"Add videos, audio players, social links, calendars, and countdown timers to create engaging, interactive experiences.",image:audioPlayer},{title:"Referral and Growth Tools",description:"Use shareable links to encourage word-of-mouth growth and expand your reach organically.",image:freeSubDomain},{title:"One Dashboard, Everything Connected",description:"Design, publish, track, and update your landing pages from one dashboard without switching between multiple tools..",image:tools}];return jsxRuntimeExports.jsx("main",{className:"w-full bg-white pt-32 pb-32",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-1/2 top-8 bottom-8 w-px bg-gray-300 hidden lg:block"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-32",children:kt.map((Tt,Dt)=>{const Ft=Dt%2===1;return jsxRuntimeExports.jsxs(motion.div,{className:"relative grid grid-cols-1 lg:grid-cols-2 items-center gap-16",initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-120px"},children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.4,ease:"easeOut"},viewport:{once:!0},className:"absolute left-1/2 -translate-x-1/2 w-8 h-8 rounded-full bg-black text-white flex items-center justify-center text-sm font-semibold z-10 hidden lg:flex",children:Dt+1}),jsxRuntimeExports.jsxs(motion.div,{variants:et(Ft),className:`flex flex-col ${Ft?"lg:col-start-2":"lg:col-start-1"}`,children:[jsxRuntimeExports.jsx(motion.h2,{className:"text-3xl font-bold text-black mb-4",children:Tt.title}),jsxRuntimeExports.jsx(motion.p,{className:"text-lg text-gray-600 leading-relaxed max-w-xl",children:Tt.description})]}),jsxRuntimeExports.jsx(motion.div,{variants:dt(Ft),className:`w-full ${Ft?"lg:col-start-1":"lg:col-start-2"}`,children:jsxRuntimeExports.jsx("div",{className:"bg-gray-100 aspect-[16/9] rounded-3xl overflow-hidden shadow-xl",children:jsxRuntimeExports.jsx("img",{loading:"lazy",src:Tt.image,alt:Tt.title,className:"w-full h-full object-cover"})})})]},Dt)})}),jsxRuntimeExports.jsx(motion.section,{className:"mt-48",initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:$t,children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto px-6",children:jsxRuntimeExports.jsxs(motion.div,{variants:$t,className:`
              relative overflow-hidden
              rounded-3xl
              bg-gradient-to-br from-black via-gray-900 to-black
              px-10 py-16
              shadow-2xl
            `,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_top,rgba(255,255,255,0.12),transparent_60%)]"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx(motion.h2,{variants:$t,className:"text-4xl font-bold text-white mb-4",children:"Preview a Real Landing Page"}),jsxRuntimeExports.jsx(motion.p,{variants:$t,className:"text-lg text-gray-300 max-w-2xl mb-10",children:"Explore a fully built, live landing page created with Cre8tly Studio. See the design, flow, and conversion structure in action."}),jsxRuntimeExports.jsxs(motion.button,{variants:$t,type:"button",onClick:()=>window.open("https://theinspirecollective.themessyattic.com/","_blank","noopener,noreferrer"),className:`
                  group inline-flex items-center gap-3
                  rounded-full
                  bg-white text-black
                  px-10 py-5
                  text-lg font-semibold
                  shadow-xl
                  transition-all duration-300
                  hover:shadow-2xl
                  hover:-translate-y-0.5
                  focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black
                `,children:["View Live Landing Page",jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:translate-x-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),jsxRuntimeExports.jsx(motion.span,{variants:$t,className:"mt-4 text-sm text-gray-400",children:"Opens a live example in a new tab"})]})]})})})]})})}const reveal$1={hidden:{y:24},visible:{y:0,transition:{duration:.6,ease:"easeOut"}}},stagger$2={visible:{transition:{staggerChildren:.12}}},Pill=({children:et})=>jsxRuntimeExports.jsx("span",{className:"inline-flex items-center gap-1 rounded-full border border-gray-200 bg-gray-50 px-3 py-1 text-xs font-semibold tracking-wide text-gray-700",children:et}),Card$1=({className:et="",children:dt})=>jsxRuntimeExports.jsx("div",{className:["rounded-2xl border border-gray-200 bg-white shadow-sm",et].join(" "),children:dt}),RangeButton=({active:et,children:dt,onClick:$t})=>jsxRuntimeExports.jsx("button",{type:"button",onMouseDown:kt=>kt.preventDefault(),onClick:$t,className:["px-4 py-2 min-w-[88px] rounded-full text-sm font-semibold border transition select-none whitespace-nowrap",et?"bg-green text-gray-700 border-green":"bg-white text-gray-600 border-gray-300 hover:bg-gray-100"].join(" "),children:dt}),Stat=({icon:et,label:dt,value:$t,sub:kt,color:Tt})=>jsxRuntimeExports.jsxs(motion.div,{variants:reveal$1,whileHover:{y:-6},className:"rounded-2xl border border-gray-200 bg-white p-5 shadow-sm transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`h-10 w-10 rounded-xl flex items-center justify-center ${Tt}`,children:jsxRuntimeExports.jsx(et,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-500",children:dt}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-gray-900",children:$t})]})]}),kt&&jsxRuntimeExports.jsx("div",{className:"mt-3 text-sm text-gray-600",children:kt})]});function formatNumber(et){return new Intl.NumberFormat().format(et)}function AnalyticsFeaturePage(){const et=useNavigate(),dt=Ft=>{const Ut=localStorage.getItem("ref_slug");return et(Ut?`${Ft}?ref=${Ut}`:Ft)},$t=reactExports.useMemo(()=>[{key:"7",label:"7 days",mult:1},{key:"14",label:"14 days",mult:1.6},{key:"30",label:"30 days",mult:2.8},{key:"90",label:"90 days",mult:6.9}],[]),[kt,Tt]=reactExports.useState("30"),Dt=reactExports.useMemo(()=>{const Ht=$t.find(Zt=>Zt.key===kt)||$t[2],Kt=Math.round(1800*Ht.mult),Yt=Math.round(420*Ht.mult),Jt=Math.max(5,Math.min(40,Math.round(Yt/Kt*100)));return{clicks:Kt,downloads:Yt,conversion:Jt,trend:Ht.key==="7"?8:Ht.key==="14"?14:Ht.key==="30"?26:41}},[kt,$t]);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white text-gray-900 pt-24",children:[jsxRuntimeExports.jsxs("section",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pt-16 pb-14 sm:pt-20 sm:pb-20",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-green sm:rounded-xl"}),jsxRuntimeExports.jsxs(motion.div,{variants:stagger$2,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"relative grid gap-10 lg:grid-cols-2 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-5 text-center lg:text-left px-2 sm:px-0",children:[jsxRuntimeExports.jsxs(motion.div,{variants:reveal$1,className:"flex flex-wrap gap-2 justify-center lg:justify-start",children:[jsxRuntimeExports.jsxs(Pill,{children:[jsxRuntimeExports.jsx(ChartColumn,{className:"h-4 w-4"}),"Analytics"]}),jsxRuntimeExports.jsxs(Pill,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4"}),"Digital product tracking"]}),jsxRuntimeExports.jsxs(Pill,{children:[jsxRuntimeExports.jsx(ShieldCheck,{className:"h-4 w-4"}),"Business ready insights"]})]}),jsxRuntimeExports.jsxs(motion.h1,{variants:reveal$1,className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-gray-700",children:["Analytics help you",jsxRuntimeExports.jsx("span",{className:"block",children:"grow with confidence."})]}),jsxRuntimeExports.jsx(motion.p,{variants:reveal$1,className:"max-w-2xl mx-auto lg:mx-0 text-lg text-gray-700/80",children:"Track views, clicks, and downloads across 7, 14, 30, and 90 day windows so you always know what is working and what to improve."})]}),jsxRuntimeExports.jsx(motion.div,{variants:reveal$1,className:"flex justify-center lg:justify-end pt-2 sm:pt-0",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full bg-black/10 blur-xl"}),jsxRuntimeExports.jsx("div",{className:`
            relative
            flex items-center justify-center
            rounded-full
            bg-white/60
            border border-black/10
            h-28 w-28
            sm:h-36 sm:w-36
            lg:h-64 lg:w-64
          `,children:jsxRuntimeExports.jsx(ChartColumn,{className:"h-14 w-14 sm:h-18 sm:w-18 lg:h-32 lg:w-32 text-gray-700"})})]})})]})]}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 pb-20 pt-24",children:jsxRuntimeExports.jsx(Card$1,{className:"p-6 sm:p-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Performance snapshot"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Demo preview using sample data"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:$t.map(Ft=>jsxRuntimeExports.jsx(RangeButton,{active:kt===Ft.key,onClick:()=>Tt(Ft.key),children:Ft.label},Ft.key))})]}),jsxRuntimeExports.jsxs(motion.div,{variants:stagger$2,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-4 md:grid-cols-3",children:[jsxRuntimeExports.jsx(Stat,{icon:MousePointerClick,label:"Total clicks",value:formatNumber(Dt.clicks),sub:"All landing page interactions",color:"bg-black"}),jsxRuntimeExports.jsx(Stat,{icon:Download,label:"Total downloads",value:formatNumber(Dt.downloads),sub:"Assets delivered to users",color:"bg-downloadGreen"}),jsxRuntimeExports.jsxs(motion.div,{variants:reveal$1,whileHover:{y:-6},className:"rounded-2xl border border-gray-200 bg-white p-5 shadow-sm transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"h-10 w-10 rounded-xl bg-royalPurple flex items-center justify-center",children:jsxRuntimeExports.jsx(TrendingUp,{className:"h-5 w-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-500",children:"Conversion rate"}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[Dt.conversion,"%"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs font-semibold text-gray-500",children:[jsxRuntimeExports.jsx("span",{children:"Momentum"}),jsxRuntimeExports.jsxs("span",{children:["+",Dt.trend,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-gray-200",children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full bg-royalPurple",style:{width:`${Dt.trend}%`}})})]})]})]})]})})}),jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-6xl px-6 py-20",children:[jsxRuntimeExports.jsxs(motion.div,{variants:reveal$1,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"mb-12 max-w-2xl",children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-700",children:["Built for growth,",jsxRuntimeExports.jsx("span",{className:"block",children:"not guesswork."})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Analytics turn effort into strategy. When you know what users click and download, you can scale what works and fix what does not."})]}),jsxRuntimeExports.jsx(motion.div,{variants:stagger$2,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[Clock,MousePointerClick,Download,TrendingUp].map((Ft,Ut)=>jsxRuntimeExports.jsx(motion.div,{variants:reveal$1,children:jsxRuntimeExports.jsxs(Card$1,{className:"p-6 hover:-translate-y-1 transition",children:[jsxRuntimeExports.jsx(Ft,{className:"h-5 w-5 text-emerald-600"}),jsxRuntimeExports.jsx("div",{className:"mt-3 font-bold",children:["Time based insights","Track real intent","Clear performance signals","Scale with confidence"][Ut]}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Make smarter decisions with real performance data."})]})},Ut))})]}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 pb-24",children:jsxRuntimeExports.jsxs(Card$1,{className:"relative p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-green rounded-xl"}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"The Messy Attic Analytics"}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-3xl sm:text-4xl font-extrabold text-gray-700 leading-tight",children:"Know more. Convert more."}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-gray-800 max-w-xl",children:"Track performance across time, understand user behavior, and grow your digital products with clarity."})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-3",children:jsxRuntimeExports.jsx("button",{onClick:()=>dt("/plans"),className:"rounded-xl border border-black/40 px-6 py-3 text-sm font-bold text-gray-700 hover:bg-white/10 transition",children:"Get started for free"})})]})]})})]})}const Card=({className:et="",children:dt})=>jsxRuntimeExports.jsx("div",{className:["rounded-2xl border border-gray-200 bg-white shadow-sm",et].join(" "),children:dt}),reveal={hidden:{y:24},visible:{y:0,transition:{duration:.6,ease:"easeOut"}}},stagger$1={visible:{transition:{staggerChildren:.12}}};function CommunityFeaturePage(){const et=useNavigate(),dt=$t=>{const kt=localStorage.getItem("ref_slug");return et(kt?`${$t}?ref=${kt}`:$t)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white text-gray-900 pt-20",children:[jsxRuntimeExports.jsxs("section",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pt-16 pb-14 sm:pt-20 sm:pb-20 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black to-neutral-900 sm:rounded-xl"}),jsxRuntimeExports.jsxs(motion.div,{variants:stagger$1,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"relative grid gap-8 lg:grid-cols-2 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-5 text-center lg:text-left px-2 sm:px-0",children:[jsxRuntimeExports.jsx(motion.div,{variants:reveal,className:"text-sm font-medium tracking-wide text-white/70 uppercase",children:"WRITING-FIRST  SUBSCRIPTION-POWERED  NO ALGORITHMS"}),jsxRuntimeExports.jsx(motion.h1,{variants:reveal,className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-white",children:"A focused writing community built on real support."}),jsxRuntimeExports.jsx(motion.p,{variants:reveal,className:"max-w-2xl mx-auto lg:mx-0 text-lg text-white/90",children:"Write posts, fragments, and thoughts in a single shared feed. Invite readers who actually care, and build a paid community without followers, engagement tricks, or algorithms deciding who gets seen."})]}),jsxRuntimeExports.jsx(motion.div,{variants:reveal,className:"flex justify-center lg:justify-end pt-2 sm:pt-0",children:jsxRuntimeExports.jsx("div",{className:"relative flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:`
      flex items-center justify-center 
      rounded-full
      border border-white/10
      h-28 w-28
      sm:h-36 sm:w-36
      lg:h-64 lg:w-64
    `,children:jsxRuntimeExports.jsx(PenTool,{className:"h-14 w-14 sm:h-18 sm:w-18 lg:h-32 lg:w-32 text-neutral-200"})})})})]})]}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 pb-20 pt-20",children:jsxRuntimeExports.jsx(Card,{className:"p-6 sm:p-8",children:jsxRuntimeExports.jsx(motion.div,{variants:stagger$1,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-6 md:grid-cols-3",children:[{icon:Users,title:"Subscribe don't chase",desc:"People join because they want your writing, not because an algorithm pushed it in front of them."},{icon:FileText,title:"Posts and fragments in one feed",desc:"Long posts, short fragments, and real conversations all live together, exactly where your readers are."},{icon:Upload,title:"Bring your readers with you",desc:"Upload your list, send direct invites, and move your audience somewhere you actually own."}].map(({icon:$t,title:kt,desc:Tt,color:Dt})=>jsxRuntimeExports.jsxs(motion.div,{variants:reveal,whileHover:{y:-6},className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-md border border-gray-200 text-gray-700",children:jsxRuntimeExports.jsx($t,{className:"h-5 w-5 text-black"})}),jsxRuntimeExports.jsx("div",{className:"font-bold",children:kt})]}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-600",children:Tt})]},kt))})})}),jsxRuntimeExports.jsxs("section",{className:"mx-auto max-w-6xl px-6 py-20",children:[jsxRuntimeExports.jsxs(motion.div,{variants:reveal,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"mb-12 max-w-2xl",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl sm:text-4xl font-extrabold tracking-tight text-gray-800 leading-tight",children:["Built for writers",jsxRuntimeExports.jsx("span",{className:"block",children:"who care about the work"})]}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"The Messy Attic is designed for writers who want fewer distractions, deeper conversations, and a community that values the work, not the numbers."})]}),jsxRuntimeExports.jsx(motion.div,{variants:stagger$1,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[{icon:Users,title:"A home for your writing",color:"text-blue-600",desc:"Your profile becomes a central place for your work, your voice, and your community."},{icon:MessageSquare,title:"Real conversation",color:"text-purple-600",desc:"Readers respond, discuss, and engage thoughtfully, not just tap a like and scroll past."},{icon:Share2,title:"Share on your terms",color:"text-emerald-600",desc:"Every post has a clean link you can share anywhere without fighting platforms for visibility."},{icon:Lock,title:"Paid access",color:"text-pink-600",desc:"Attract people who are invested, supportive, and serious about being there."}].map(({icon:$t,title:kt,desc:Tt,color:Dt})=>jsxRuntimeExports.jsx(motion.div,{variants:reveal,children:jsxRuntimeExports.jsxs(Card,{className:"p-6 w-full max-w-none hover:-translate-y-1 transition",children:[jsxRuntimeExports.jsx($t,{className:`h-5 w-5 ${Dt}`}),jsxRuntimeExports.jsx("div",{className:"mt-3 font-bold",children:kt}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-600",children:Tt})]})},kt))})]}),jsxRuntimeExports.jsx("section",{className:"mx-auto max-w-6xl px-6 pb-24",children:jsxRuntimeExports.jsxs(Card,{className:"relative overflow-hidden p-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black to-neutral-900 sm:rounded-xl"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/20"}),jsxRuntimeExports.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-white/80",children:"The Messy Attic Community"}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-3xl sm:text-4xl font-extrabold text-white leading-tight",children:"Build a community that values your writing."}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-white/90 max-w-xl",children:"Write freely, publish consistently, and grow a paid community without algorithms, follower counts, or pressure to perform."})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>dt("/signup-community"),className:"rounded-xl bg-white px-6 py-3 text-sm font-bold text-gray-900 shadow-lg hover:bg-gray-100 transition",children:"Join the community"}),jsxRuntimeExports.jsx("button",{onClick:()=>dt("/plans"),className:"rounded-xl border border-white/40 px-6 py-3 text-sm font-semibold text-white hover:bg-white/10 transition",children:"Start free trial"})]})]})]})})]})}const fadeUp={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.7,ease:"easeOut"}}},stagger={visible:{transition:{staggerChildren:.12}}},floatSlow={animate:{y:[0,-12,0],transition:{duration:6,repeat:1/0,ease:"easeInOut"}}};function StripePayments(){const et=useNavigate(),dt=$t=>{const kt=localStorage.getItem("ref_slug");return et(kt?`${$t}?ref=${kt}`:$t)};return jsxRuntimeExports.jsxs("main",{className:"relative w-full min-h-screen bg-white pt-32 pb-32 px-6",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute -top-40 left-1/2 -translate-x-1/2 w-[1000px] h-[1000px] rounded-full bg-green/10 blur-3xl pointer-events-none",variants:floatSlow,animate:"animate"}),jsxRuntimeExports.jsxs(motion.section,{variants:stagger,initial:"hidden",animate:"visible",className:"max-w-6xl mx-auto text-center mb-32",children:[jsxRuntimeExports.jsx(motion.h1,{variants:fadeUp,className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold text-black design-text mb-6",children:"Accept payments instantly with Stripe"}),jsxRuntimeExports.jsx(motion.p,{variants:fadeUp,className:"max-w-2xl mx-auto text-black/80 text-lg mb-10",children:"The Messy Attic connects Stripe directly to your products so you can get paid without friction."}),jsxRuntimeExports.jsxs(motion.button,{onClick:()=>dt("/plans"),variants:fadeUp,whileHover:{scale:1.06},whileTap:{scale:.96},className:"inline-flex items-center gap-2 px-8 py-4 rounded-xl bg-black text-white font-semibold text-lg shadow-lg",children:["Start selling with Stripe",jsxRuntimeExports.jsx(ArrowRight,{className:"h-5 w-5"})]})]}),jsxRuntimeExports.jsxs("section",{className:"relative max-w-6xl mx-auto mb-40",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 -z-10 bg-gradient-to-br from-green/10 via-transparent to-transparent blur-3xl rounded-[40px]"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[{icon:jsxRuntimeExports.jsx(Zap,{}),title:"Launch faster",text:"Create an offer and start accepting payments the same day.",accent:"from-green to-emerald-400"},{icon:jsxRuntimeExports.jsx(CreditCard,{}),title:"Checkout that converts",text:"Stripe Checkout is trusted worldwide and optimized for sales.",accent:"from-indigo-500 to-purple-500"},{icon:jsxRuntimeExports.jsx(Banknote,{}),title:"Automatic payouts",text:"Funds are deposited directly into your bank account.",accent:"from-emerald-400 to-green"},{icon:jsxRuntimeExports.jsx(ShieldCheck,{}),title:"Enterprise security",text:"Fraud protection and compliance handled by Stripe.",accent:"from-slate-600 to-slate-800"},{icon:jsxRuntimeExports.jsx(Globe,{}),title:"Sell globally",text:"Accept payments worldwide without extra setup.",accent:"from-cyan-500 to-blue-600"},{icon:jsxRuntimeExports.jsx(Zap,{}),title:"Instant delivery",text:"Products are delivered automatically after purchase.",accent:"from-green to-lime-400"}].map(($t,kt)=>jsxRuntimeExports.jsxs(motion.div,{initial:"hidden",whileInView:"visible",variants:fadeUp,viewport:{once:!0},whileHover:{y:-10,scale:1.02},transition:{duration:.5},className:"group relative rounded-[28px] p-[1px] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${$t.accent} opacity-40 group-hover:opacity-100 transition`}),jsxRuntimeExports.jsxs("div",{className:"relative h-full rounded-[27px] bg-black text-white p-8 flex flex-col justify-between",children:[jsxRuntimeExports.jsx(motion.div,{className:"flex items-center justify-center h-14 w-14 rounded-2xl bg-white/10 text-green mb-6",animate:{rotate:[0,2,-2,0]},transition:{duration:6,repeat:1/0},children:$t.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold mb-3",children:$t.title}),jsxRuntimeExports.jsx("p",{className:"text-white/70 leading-relaxed",children:$t.text})]}),jsxRuntimeExports.jsx("div",{className:"mt-8 h-[2px] w-0 bg-green group-hover:w-full transition-all duration-500"})]})]},kt))})]}),jsxRuntimeExports.jsxs("section",{className:"relative max-w-6xl mx-auto mb-40",children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-24 left-1/2 -translate-x-1/2 w-[900px] h-[400px] bg-green/10 blur-3xl rounded-full -z-10"}),jsxRuntimeExports.jsxs(motion.div,{variants:stagger,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"text-center mb-20",children:[jsxRuntimeExports.jsx(motion.h2,{variants:fadeUp,className:"text-4xl sm:text-5xl font-extrabold text-black mb-4",children:"Create an offer. Connect Stripe. Get paid."}),jsxRuntimeExports.jsx(motion.p,{variants:fadeUp,className:"max-w-3xl mx-auto text-lg text-black/70",children:"Build your offer, add it to your landing page, connect Stripe Express, and start accepting payments in minutes."})]}),jsxRuntimeExports.jsx(motion.div,{variants:stagger,initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[{step:"01",title:"Create your offer",text:"Set pricing, upload content, and define what buyers receive."},{step:"02",title:"Add it to your page",text:"Drop the offer onto your landing page instantly."},{step:"03",title:"Connect Stripe Express",text:"Fast onboarding with secure identity and bank setup."},{step:"04",title:"Get paid automatically",text:"Stripe processes payments and deposits funds directly."}].map(($t,kt)=>jsxRuntimeExports.jsxs(motion.div,{variants:fadeUp,whileHover:{y:-8},className:"group relative rounded-3xl p-[1px] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green via-emerald-400 to-lime-300 opacity-30 group-hover:opacity-60 transition"}),jsxRuntimeExports.jsxs("div",{className:"relative h-full rounded-[22px] bg-white p-8 text-left shadow-md hover:shadow-xl transition",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm font-bold text-gray-400 mb-3",children:["STEP ",$t.step]}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-black mb-3",children:$t.title}),jsxRuntimeExports.jsx("p",{className:"text-black/70 leading-relaxed",children:$t.text})]})]},kt))}),jsxRuntimeExports.jsxs("div",{className:"mt-20 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-lg text-black/80 mb-4",children:"Your money never sits in The Messy Attic"}),jsxRuntimeExports.jsx("p",{className:"max-w-2xl mx-auto text-black/60",children:"Stripe handles payments and deposits funds directly to your bank. Standard payouts arrive in 2 to 3 business days."})]})]}),jsxRuntimeExports.jsx("section",{className:"max-w-6xl mx-auto text-center",children:jsxRuntimeExports.jsxs("div",{className:"rounded-3xl bg-black text-white px-10 py-20",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Ready to start getting paid"}),jsxRuntimeExports.jsx("p",{className:"max-w-xl mx-auto text-white/80 mb-10",children:"Connect Stripe once and sell every product you create inside Cre8tly Studio."}),jsxRuntimeExports.jsxs(motion.button,{onClick:()=>dt("/plans"),whileHover:{scale:1.07},whileTap:{scale:.95},animate:{boxShadow:["0 0 0 rgba(0,0,0,0)","0 0 30px rgba(34,197,94,0.6)","0 0 0 rgba(0,0,0,0)"]},transition:{duration:3,repeat:1/0},className:"inline-flex items-center gap-2 px-8 py-4 rounded-xl bg-green text-black font-semibold text-lg",children:["Get started for free",jsxRuntimeExports.jsx(ArrowRight,{className:"h-5 w-5"})]})]})})]})}function AuthorsAssistant(){const et=useNavigate(),dt=$t=>{const kt=localStorage.getItem("ref_slug");return et(kt?`${$t}?ref=${kt}`:$t)};return jsxRuntimeExports.jsx("section",{className:"w-full bg-white",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-28",children:[jsxRuntimeExports.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-20",children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-2 text-gray-500 text-sm font-medium mb-6 tracking-wide",children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4"}),"AI Writing Assistant"]}),jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-[56px] font-semibold text-gray-900 leading-[1.1] tracking-tight",children:"Write, Finalize, and Publish Books With Authors Assistant"}),jsxRuntimeExports.jsx("p",{className:"mt-6 text-[17px] text-gray-500 max-w-2xl mx-auto leading-relaxed",children:"Create, organize, and complete full-length books with an AI system built for serious authors. Authors Assistant structures your work into sections, preserves every revision, and gives you full control over when your book is finalized and published. It does not write books for you. It supports clear thinking, intentional editing, and real completion, so you can produce finished, publishable work without compromising your voice."})]}),jsxRuntimeExports.jsx("div",{className:"mt-20 w-full rounded-2xl bg-white overflow-hidden border border-gray-200",children:jsxRuntimeExports.jsx("div",{className:"aspect-[16/9] w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-lg font-medium",children:jsxRuntimeExports.jsx("img",{src:bookFeature,alt:"The Messy Attic platform preview",className:"w-full h-full object-cover shadow-sm"})})})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-8 pt-24",children:[jsxRuntimeExports.jsx(Feature,{icon:BookOpen,iconColor:"text-blue bg-blue/10",title:"Section Based Book Writing",text:"Write your book in structured sections instead of one long document, making complex ideas easier to manage."}),jsxRuntimeExports.jsx(Feature,{icon:PenTool,iconColor:"text-blue bg-blue/10",title:"Endless Editing and Revisions",text:"Rewrite, expand, shorten, or refine any section as many times as you want without starting over."}),jsxRuntimeExports.jsx(Feature,{icon:FileText,iconColor:"text-blue bg-blue/10",title:"Save Drafts Automatically",text:"Your progress is always saved. Come back anytime and continue writing exactly where you left off."}),jsxRuntimeExports.jsx(Feature,{icon:Upload,iconColor:"text-blue bg-blue/10",title:"Upload PDFs and Documents",text:"Import existing manuscripts, notes, outlines, or research from PDFs or text documents."}),jsxRuntimeExports.jsx(Feature,{icon:Sparkles,iconColor:"text-blue bg-blue/10",title:"AI Assisted Section Refinement",text:"Improve clarity, flow, and structure while keeping your original meaning and voice intact."}),jsxRuntimeExports.jsx(Feature,{icon:BookOpen,iconColor:"text-blue bg-blue/10",title:"Long Form Memory Per Project",text:"Authors Assistant understands your book as a whole, not just isolated prompts."}),jsxRuntimeExports.jsx(Feature,{icon:FileText,iconColor:"text-blue bg-blue/10",title:"Upload Your Own Book Cover",text:"Bring your own professionally designed cover and attach it to your book before export."}),jsxRuntimeExports.jsx(Feature,{icon:PenTool,iconColor:"text-blue bg-blue/10",title:"Built for Nonfiction and Fiction",text:"Works with real world material or storytelling without inventing facts or altering intent."}),jsxRuntimeExports.jsx(Feature,{icon:Download,iconColor:"text-blue bg-blue/10",title:"Export and Publish When You Are Ready",text:"Download individual chapters as PDFs during writing, then publish your completed book as a single EPUB when finished."}),jsxRuntimeExports.jsx(Feature,{icon:Lock,iconColor:"text-blue bg-blue/10",title:"Finalize and Lock Your Book",text:"Explicitly finalize your book when it is complete. Once finalized, chapters are locked to preserve a canonical version ready for publishing."}),jsxRuntimeExports.jsx(Feature,{icon:Book,iconColor:"text-blue bg-blue/10",title:"Publish a Complete EPUB Book",text:"Combine all finalized chapters into a single EPUB file, compatible with Kindle and major ebook platforms."}),jsxRuntimeExports.jsx(Feature,{icon:CircleCheckBig,iconColor:"text-blue bg-blue/10",title:"Structured Publishing Workflow",text:"Move from draft to finished book through a clear process: write, revise, finalize, and publish, without accidental changes or broken exports."})]}),jsxRuntimeExports.jsxs("div",{className:"mt-28 text-center border-t border-gray-200 pt-16",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-extrabold text-gray-900",children:"Turn Finished Manuscripts Into Publishable Books"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600 max-w-xl mx-auto",children:"Authors Assistant is more than a writing tool. It is a complete book creation and publishing workflow, designed to help serious authors finish what they start."}),jsxRuntimeExports.jsx("div",{className:"mt-8 flex justify-center gap-4",children:jsxRuntimeExports.jsx("button",{onClick:()=>dt("/plans"),className:"px-8 py-4 rounded-lg bg-blue text-white font-medium hover:bg-blue/90 transition",children:"Try Authors Assistant"})})]})]})})}function Feature({icon:et,title:dt,text:$t}){return jsxRuntimeExports.jsxs("div",{className:"group relative rounded-2xl border border-gray-200 bg-white p-6 transition-all duration-200 hover:border-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-x-0 top-0 h-[1px] bg-gradient-to-r from-transparent via-gray-200 to-transparent opacity-0 group-hover:opacity-100 transition"}),jsxRuntimeExports.jsx("div",{className:"mb-4 flex h-9 w-9 items-center justify-center rounded-lg bg-blue/10 text-blue",children:jsxRuntimeExports.jsx(et,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("h4",{className:"text-[15px] font-semibold text-gray-900 tracking-tight",children:dt}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-500 leading-relaxed",children:$t})]})}function SettingsDomains(){const[et,dt]=reactExports.useState([]),[$t,kt]=reactExports.useState(""),[Tt,Dt]=reactExports.useState(!1),[Ft,Ut]=reactExports.useState(null),Ht=useNavigate(),Kt=async()=>{try{const rr=await axiosInstance.get("/domains");dt(rr.data.domains||[])}catch(rr){console.error(rr),y$4.error("Failed to load domains")}};reactExports.useEffect(()=>{Kt()},[]);const Yt=async()=>{var rr,sr;if(!$t.trim()){y$4.warning("Enter a domain name");return}Dt(!0);try{await axiosInstance.post("/domains/add",{domain:$t.trim().toLowerCase()}),y$4.success("Domain added. Please verify ownership."),kt(""),Kt()}catch(nr){console.error(nr),y$4.error(((sr=(rr=nr==null?void 0:nr.response)==null?void 0:rr.data)==null?void 0:sr.message)||"Failed to add domain")}finally{Dt(!1)}},Jt=async rr=>{Ut(rr);try{(await axiosInstance.post("/domains/verify",{domain:rr})).data.verified?(y$4.success("Domain verified successfully!"),Kt()):y$4.info("Verification not found yet. Try again shortly.")}catch(sr){console.error(sr),y$4.error("Verification failed")}finally{Ut(null)}},Zt=async rr=>{if(window.confirm("Remove this domain?"))try{await axiosInstance.delete(`/domains/remove/${rr}`),y$4.info("Domain removed"),Kt()}catch(sr){console.error(sr),y$4.error("Failed to remove domain")}},er=async rr=>{try{await axiosInstance.post("/domains/set-primary",{domain:rr}),y$4.success("Primary domain updated"),Kt()}catch(sr){console.error(sr),y$4.error("Failed to set primary domain")}};return jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full min-h-screen bg-[#030712] text-white",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[900px] p-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-10",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ht("/settings"),className:"mb-4 px-4 py-2 rounded-lg bg-gray-800 text-gray-300 text-sm hover:bg-gray-700 hover:text-white transition",children:" Back to Settings"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Custom Domains"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 max-w-xl",children:"Connect your own domain to host landing pages under your brand. Domain ownership verification is required."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-xl p-6 shadow-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Add New Domain"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Enter a root domain you own, for example yourdomain.com"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"yourdomain.com",value:$t,onChange:rr=>kt(rr.target.value),className:"flex-1 px-4 py-2 rounded-lg bg-gray-900 border border-gray-700 text-white placeholder-gray-500 focus:ring-2 focus:ring-green outline-none"}),jsxRuntimeExports.jsx("button",{onClick:Yt,disabled:Tt,className:"px-6 py-2 rounded-lg bg-royalPurple text-white font-semibold hover:opacity-90 disabled:opacity-60 transition",children:Tt?"Adding...":"Add Domain"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Subdomains like www will be handled automatically."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-[#0B0F19] border border-gray-800 rounded-xl p-6 shadow-lg mt-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Your Domains"}),et.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"No domains connected yet."}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:et.map(rr=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-900/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-white",children:rr.domain}),rr.verified&&jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-1 rounded-md bg-green/10 text-green font-semibold",children:"Verified"}),rr.is_primary&&jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-1 rounded-md bg-blue/10 text-blue font-semibold",children:"Primary"})]}),!rr.verified&&jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-400 mt-2",children:"Add this TXT record to your DNS to verify ownership"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[!rr.verified&&jsxRuntimeExports.jsx("button",{onClick:()=>Jt(rr.domain),disabled:Ft===rr.domain,className:"px-4 py-1.5 text-sm rounded-md bg-amber-500 text-black font-semibold hover:opacity-90",children:Ft===rr.domain?"Verifying...":"Verify"}),rr.verified&&!rr.is_primary&&jsxRuntimeExports.jsx("button",{onClick:()=>er(rr.domain),className:"px-4 py-1.5 text-sm rounded-md bg-gray-800 text-gray-300 hover:border-green border border-gray-700",children:"Set Primary"}),jsxRuntimeExports.jsx("button",{onClick:()=>Zt(rr.domain),className:"px-4 py-1.5 text-sm rounded-md bg-red-600 text-white hover:bg-red-700",children:"Remove"})]})]}),!rr.verified&&jsxRuntimeExports.jsxs("div",{className:"mt-4 bg-black/60 border border-gray-700 rounded-lg p-3 text-xs font-mono text-gray-200",children:[jsxRuntimeExports.jsx("div",{children:"Type: TXT"}),jsxRuntimeExports.jsx("div",{children:"Host: @"}),jsxRuntimeExports.jsxs("div",{className:"break-all",children:["Value: cre8tly-domain-verification=",rr.verification_token]})]}),rr.verified&&!rr.is_primary&&jsxRuntimeExports.jsxs("div",{className:"mt-4 bg-[#0B1220] border border-gray-700 rounded-lg p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-white mb-2",children:"Step 2: Point your domain to Cre8tly"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Add ONE of the following DNS records with your domain provider"}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-green mb-1",children:"Option A (recommended)"}),jsxRuntimeExports.jsxs("div",{className:"bg-black/60 rounded-md p-3 text-xs font-mono text-gray-200 space-y-1",children:[jsxRuntimeExports.jsx("div",{children:"Type: CNAME"}),jsxRuntimeExports.jsx("div",{children:"Host: @"}),jsxRuntimeExports.jsx("div",{children:"Value: domains.themessyattic.com"}),jsxRuntimeExports.jsx("div",{children:"Proxy: ON (orange cloud)"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-semibold text-blue mb-1",children:"Option B (if @ is not allowed)"}),jsxRuntimeExports.jsxs("div",{className:"bg-black/60 rounded-md p-3 text-xs font-mono text-gray-200 space-y-1",children:[jsxRuntimeExports.jsx("div",{children:"Type: CNAME"}),jsxRuntimeExports.jsx("div",{children:"Host: www"}),jsxRuntimeExports.jsx("div",{children:"Value: domains.themessyattic.com"}),jsxRuntimeExports.jsx("div",{children:"Proxy: ON (orange cloud)"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"DNS changes may take a few minutes to propagate"})]})]},rr.domain))})]}),jsxRuntimeExports.jsx("div",{className:"bg-black/40 border border-gray-700 rounded-xl p-5 mt-10",children:jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"By connecting a domain, you confirm that you own or control this domain and have permission to use it. The Messy Attic reserves the right to suspend or remove domains used for impersonation, abuse, copyright infringement, or unlawful activity."})})]})})}function CustomDomainsDocs(){const et=[{id:"intro",label:"Introduction"},{id:"overview",label:"What Custom Domains Do"},{id:"add",label:"Adding a Domain"},{id:"verify",label:"Verifying Ownership"},{id:"point",label:"Pointing Your Domain"},{id:"primary",label:"Primary Domains"},{id:"propagation",label:"DNS Propagation"},{id:"faq",label:"Troubleshooting"}],dt=$t=>{const kt=document.getElementById($t);kt&&kt.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Custom Domains Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Learn how to connect and verify your own domain with The Messy Attic."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:et.map($t=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>dt($t.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white text-gray-300 text-xs transition",children:$t.label})},$t.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx(Globe,{className:"w-7 h-7 text-green"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Custom Domains"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Host your landing pages on your own branded domain."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700",children:"Estimated Learning Time, under 2 minutes"}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 rounded-full bg-gray-900 border border-gray-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 text-green"}),"Best For, creators building branded funnels"]})]})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-3",children:"Custom Domains allow you to publish your Cre8tly landing pages under your own domain instead of a Cre8tly subdomain."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"This builds trust, improves conversions, and gives your brand full control over how your pages appear to visitors."})]}),jsxRuntimeExports.jsxs("section",{id:"overview",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. What Custom Domains Do"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Host landing pages on your own domain"}),jsxRuntimeExports.jsx("li",{children:"Remove Cre8tly branding from page URLs"}),jsxRuntimeExports.jsx("li",{children:"Improve trust and professionalism"}),jsxRuntimeExports.jsx("li",{children:"Enable consistent branding across funnels"})]})]}),jsxRuntimeExports.jsxs("section",{id:"add",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. Adding a Domain"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["To add a domain, navigate to"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Settings  Domains"})," and enter the root domain you own."]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Enter only the root domain, example, yourdomain.com"}),jsxRuntimeExports.jsx("li",{children:"Do not include https or paths"}),jsxRuntimeExports.jsx("li",{children:"Subdomains like www are handled automatically"})]})]}),jsxRuntimeExports.jsxs("section",{id:"verify",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["4. Verifying Domain Ownership",jsxRuntimeExports.jsx(ShieldCheck,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"After adding a domain, Cre8tly generates a verification token. This ensures you actually own or control the domain."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"You must add a TXT record to your DNS provider:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Type, TXT"}),jsxRuntimeExports.jsx("li",{children:"Host, @"}),jsxRuntimeExports.jsx("li",{children:"Value, cre8tly-domain-verification=your-token"})]})]}),jsxRuntimeExports.jsxs("section",{id:"point",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["5. Pointing Your Domain",jsxRuntimeExports.jsx(Link$1,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Once verified, you must point your domain to Cre8tly using a CNAME record."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Type, CNAME"}),jsxRuntimeExports.jsx("li",{children:"Host, @ or www"}),jsxRuntimeExports.jsx("li",{children:"Value, domains.themessyattic.com"}),jsxRuntimeExports.jsx("li",{children:"Proxy must be ON if using Cloudflare"})]})]}),jsxRuntimeExports.jsxs("section",{id:"primary",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Primary Domains"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"If you connect multiple domains, you can set one as your primary domain. This is the default domain used when publishing landing pages."})]}),jsxRuntimeExports.jsxs("section",{id:"propagation",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["7. DNS Propagation",jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"DNS changes are not instant. Depending on your provider, it may take a few minutes up to 24 hours for changes to fully propagate."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"If verification fails immediately, wait a few minutes and try again."})]}),jsxRuntimeExports.jsxs("section",{id:"faq",className:"mb-10",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold mb-2 text-silver flex items-center gap-2",children:["8. Troubleshooting",jsxRuntimeExports.jsx(CircleQuestionMark,{className:"w-4 h-4 text-gray-400"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My domain will not verify"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Double-check that the TXT record is added correctly and wait for DNS propagation before retrying verification."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"My domain points correctly but pages do not load"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Ensure your CNAME record points to domains.themessyattic.com and that proxy mode is enabled if using Cloudflare."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-200 mb-1",children:"Can I remove a domain later"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Yes. Domains can be removed at any time from Settings. Any pages using that domain will stop resolving."})]})]})]})]})})]})}function AuthorsAssistantDocs(){const et=[{id:"intro",label:"Introduction"},{id:"what-it-is",label:"What Authors Assistant Is"},{id:"what-it-is-not",label:"What It Is Not"},{id:"projects",label:"Books and Projects"},{id:"sections",label:"Section-Based Writing"},{id:"editing",label:"Editing and Revisions"},{id:"uploads",label:"Uploading Existing Material"},{id:"memory",label:"Long-Form Memory"},{id:"drafts",label:"Draft Saving and Safety"},{id:"covers",label:"Book Covers"},{id:"finalizing",label:"Finalizing a Book"},{id:"exporting",label:"Exporting and Publishing"},{id:"workflow",label:"Recommended Workflow"},{id:"best-practices",label:"Best Practices"},{id:"troubleshooting",label:"Troubleshooting"}],dt=$t=>{const kt=document.getElementById($t);kt&&kt.scrollIntoView({behavior:"smooth",block:"start"})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-2 text-white relative",children:[jsxRuntimeExports.jsx("aside",{className:"hidden lg:block w-64 fixed left-[180px] top-[120px] z-20",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#020617] border border-gray-800 rounded-2xl p-4 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(FilePen,{className:"w-4 h-4 text-green"}),jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-gray-300",children:"Authors Assistant Docs"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Learn how to write, revise, finalize, and publish full-length books using a structured workflow built for serious authors."}),jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-xs",children:et.map($t=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>dt($t.id),className:"w-full text-left px-2 py-1.5 rounded-lg hover:bg-gray-900 hover:text-white transition text-gray-300",children:$t.label})},$t.id))})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto bg-black/70 rounded-2xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("main",{className:"pb-16",children:[jsxRuntimeExports.jsxs("header",{className:"mb-8 border-b border-gray-800 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[jsxRuntimeExports.jsx(FilePen,{className:"w-6 h-6 text-green"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-silver",children:"Authors Assistant"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 ml-9",children:"A structured writing and publishing system for completing real books without compromising your voice."})]}),jsxRuntimeExports.jsxs("section",{id:"intro",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Authors Assistant is a long-form writing and publishing system designed to help you finish real books. It is built for authors who value structure, revision control, and intentional completion."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Every book is treated as a project, every chapter as a deliberate section, and every revision as part of a clear process."})]}),jsxRuntimeExports.jsxs("section",{id:"what-it-is",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"2. What Authors Assistant Is"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1 mb-3",children:[jsxRuntimeExports.jsx("li",{children:"Section-based book writing"}),jsxRuntimeExports.jsx("li",{children:"Unlimited revisions per section"}),jsxRuntimeExports.jsx("li",{children:"Project-level long-form memory"}),jsxRuntimeExports.jsx("li",{children:"Draft preservation and safety"}),jsxRuntimeExports.jsx("li",{children:"Finalization and EPUB publishing"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"It supports clear thinking, deliberate editing, and real completion."})]}),jsxRuntimeExports.jsxs("section",{id:"what-it-is-not",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"3. What It Is Not"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Authors Assistant does not write books for you."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"It does not invent facts, overwrite intent, or replace your thinking. The AI exists to refine and support what you write, not to generate disposable content."})]}),jsxRuntimeExports.jsxs("section",{id:"projects",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"4. Books and Projects"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Each book is its own project with isolated memory and structure."}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Title and metadata"}),jsxRuntimeExports.jsx("li",{children:"Sections and chapters"}),jsxRuntimeExports.jsx("li",{children:"Uploaded reference material"}),jsxRuntimeExports.jsx("li",{children:"Finalization state"})]})]}),jsxRuntimeExports.jsxs("section",{id:"sections",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"5. Section-Based Writing"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Writing is broken into sections so you can focus deeply without being overwhelmed by a single document."})]}),jsxRuntimeExports.jsxs("section",{id:"editing",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"6. Editing and Revisions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Each section can be rewritten, expanded, shortened, or refined independently."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Revisions do not affect other sections, allowing safe, focused editing."})]}),jsxRuntimeExports.jsxs("section",{id:"uploads",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"7. Uploading Existing Material"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"PDF manuscripts"}),jsxRuntimeExports.jsx("li",{children:"Text documents"}),jsxRuntimeExports.jsx("li",{children:"Outlines and notes"})]})]}),jsxRuntimeExports.jsxs("section",{id:"memory",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"8. Long-Form Memory"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Authors Assistant maintains awareness of your entire book, not just isolated prompts."})]}),jsxRuntimeExports.jsxs("section",{id:"drafts",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"9. Draft Saving and Safety"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"All progress is saved automatically. You can leave and return at any time without losing work."})]}),jsxRuntimeExports.jsxs("section",{id:"covers",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"10. Book Covers"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Upload a custom cover to include it in your final EPUB export."})]}),jsxRuntimeExports.jsxs("section",{id:"finalizing",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"11. Finalizing a Book"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Finalizing locks all sections and creates a canonical version ready for publishing."})]}),jsxRuntimeExports.jsxs("section",{id:"exporting",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"12. Exporting and Publishing"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Export individual sections as PDFs during writing."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Once finalized, export a complete EPUB compatible with Kindle and major ebook platforms."})]}),jsxRuntimeExports.jsxs("section",{id:"workflow",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"13. Recommended Workflow"}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Create a book project"}),jsxRuntimeExports.jsx("li",{children:"Write sections"}),jsxRuntimeExports.jsx("li",{children:"Revise intentionally"}),jsxRuntimeExports.jsx("li",{children:"Upload a cover"}),jsxRuntimeExports.jsx("li",{children:"Finalize the book"}),jsxRuntimeExports.jsx("li",{children:"Export EPUB"})]})]}),jsxRuntimeExports.jsxs("section",{id:"best-practices",className:"mb-10",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"14. Best Practices"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Write one section at a time"}),jsxRuntimeExports.jsx("li",{children:"Finalize only when complete"}),jsxRuntimeExports.jsx("li",{children:"Use AI to refine, not replace"})]})]}),jsxRuntimeExports.jsxs("section",{id:"troubleshooting",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2 text-silver",children:"15. Troubleshooting"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"If a section cannot be edited, check whether the book has been finalized. Finalized books are locked by design."})]})]})})]})}function SignupCommunity(){const{login:et}=useAuth(),[dt,$t]=reactExports.useState(!1),kt=useNavigate(),[Tt,Dt]=reactExports.useState({name:"",username:"",email:"",password:""}),[Ft,Ut]=reactExports.useState(!1),[Ht,Kt]=reactExports.useState(""),[Yt]=useSearchParams(),Jt=Yt.get("ref");reactExports.useEffect(()=>{if(Ht){const rr=setTimeout(()=>Kt(""),5e3);return()=>clearTimeout(rr)}},[Ht]);const Zt=rr=>{const{name:sr,value:nr}=rr.target;Dt({...Tt,[sr]:sr==="username"?nr.toLowerCase():nr})},er=async rr=>{var sr,nr;rr.preventDefault(),Ut(!0),Kt("");try{const ir=Tt.username.trim();if(!/^[a-zA-Z0-9_]{3,20}$/.test(ir)){Kt("Username must be 320 characters and contain only letters, numbers, or underscores."),Ut(!1);return}const or={name:Tt.name,email:Tt.email,password:Tt.password,username:ir,...Jt&&{refSlug:Jt}},lr=await axios$1.post("https://themessyattic.com/api/auth/signup-community",or);lr.status===201?(await et(Tt.email,Tt.password),kt("/community")):Kt(lr.data.message||"Something went wrong")}catch(ir){(nr=(sr=ir.response)==null?void 0:sr.data)!=null&&nr.message?Kt(ir.response.data.message):Kt("Signup failed. Please try again later.")}finally{Ut(!1)}};return reactExports.useEffect(()=>(document.body.style.overflow="auto",document.body.style.position="",document.body.style.width="",()=>{document.body.style.overflow="auto",document.body.style.position="",document.body.style.width=""}),[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col bg-white",children:jsxRuntimeExports.jsx("section",{className:"flex flex-col justify-center items-center flex-grow px-6 py-20",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl border border-gray-200 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-5",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-12 w-12 object-contain"}),jsxRuntimeExports.jsx("div",{className:"flex flex-col leading-tight",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"The Messy Attic"})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Join the community"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"font-semibold hover:underline",children:"Log in"})]})]}),Ht&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3 mb-4 text-center",children:Ht}),jsxRuntimeExports.jsxs("form",{onSubmit:er,className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",name:"name",value:Tt.name,onChange:Zt,placeholder:"Full Name",required:!0,className:"w-full h-[48px] px-4 rounded-lg border border-gray-300"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",value:Tt.username,onChange:Zt,placeholder:"Username",required:!0,autoComplete:"username",className:"w-full h-[48px] px-4 rounded-lg border border-gray-300"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"320 characters, letters, numbers, underscores only"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Tt.email,onChange:Zt,placeholder:"Email Address",required:!0,className:"w-full h-[48px] px-4 rounded-lg border border-gray-300"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:dt?"text":"password",name:"password",value:Tt.password,onChange:Zt,placeholder:"Password",required:!0,className:"w-full h-[48px] px-4 pr-12 rounded-lg border border-gray-300"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t(!dt),className:"absolute inset-y-0 right-3 flex items-center text-gray-400",children:dt?jsxRuntimeExports.jsx(EyeOff,{size:18}):jsxRuntimeExports.jsx(Eye,{size:18})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ft,className:"w-full bg-black text-white font-semibold py-3 rounded-lg",children:Ft?"Joining Community...":"Join the Community"})]})]})})})}function MyPosts(){const et=useNavigate(),[dt,$t]=reactExports.useState([]),[kt,Tt]=reactExports.useState(null),[Dt,Ft]=reactExports.useState([]),{postId:Ut}=useParams(),Ht=!!Ut,[Kt,Yt]=reactExports.useState(Ht),[Jt,Zt]=reactExports.useState(""),[er,rr]=reactExports.useState(!1),sr=reactExports.useRef(null),[nr,ir]=reactExports.useState(!0),or=reactExports.useRef(0),[lr,cr]=reactExports.useState(!0),dr="w-full px-4 py-3 text-sm text-left flex items-center gap-3 transition-colors";reactExports.useEffect(()=>{pr(),ur()},[]),reactExports.useEffect(()=>{function xr(){Tt(null)}return window.addEventListener("click",xr),()=>window.removeEventListener("click",xr)},[]),reactExports.useEffect(()=>{if(!Ht)return;async function xr(){try{const Mr=(await axiosInstance.get(`/community/posts/${Ut}`)).data.post;setTitle(Mr.title||""),setSubtitle(Mr.subtitle||""),setBody(Mr.body||""),setImagePreview(Mr.image_url||null),setSelectedTopicId(Mr.topic_id||""),setRelatedTopicIds(Mr.related_topic_ids||[])}catch(kr){console.error("Failed to load post:",kr),et("/community/my-posts")}finally{Yt(!1)}}xr()},[Ut,Ht]);async function ur(){try{const xr=await axiosInstance.get("/community/topics");Ft(xr.data.topics||[])}catch(xr){console.error("Failed to fetch topics:",xr)}}async function pr(){try{cr(!0);const xr=await axiosInstance.get("/community/posts/user");$t(xr.data.posts||[])}catch(xr){console.error("Failed to fetch posts:",xr)}finally{cr(!1)}}reactExports.useEffect(()=>{function xr(kr){sr.current&&!sr.current.contains(kr.target)&&rr(!1)}return er&&document.addEventListener("click",xr),()=>{document.removeEventListener("click",xr)}},[er]),reactExports.useEffect(()=>{function xr(){const kr=window.scrollY;kr>or.current&&kr>80&&ir(!1),kr<or.current&&ir(!0),or.current=kr}return window.addEventListener("scroll",xr,{passive:!0}),()=>{window.removeEventListener("scroll",xr)}},[]);function mr(xr){const kr=y$4(({closeToast:Mr})=>jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Delete this post?"}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70",children:"This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[jsxRuntimeExports.jsx("button",{onClick:Mr,className:`
              px-3 py-1.5 text-xs rounded-md
              border border-dashboard-border-light
              hover:bg-dashboard-hover-light
            `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.delete(`/community/posts/${xr}`),$t(Tr=>Tr.filter(Or=>Or.id!==xr)),Tt(null),y$4.dismiss(kr),y$4.success("Post deleted")}catch(Tr){console.error("Failed to delete post:",Tr),y$4.error("Failed to delete post")}},className:`
              px-3 py-1.5 text-xs rounded-md
              bg-red-600 text-white
              hover:bg-red-700
            `,children:"Delete"})]})]}),{closeButton:!1,className:"rounded-xl"})}function jr(xr){const kr=`${window.location.origin}/p/${xr.slug}`;navigator.clipboard.writeText(kr).then(()=>y$4.success("Link copied to clipboard"),()=>y$4.error("Failed to copy link")),Tt(null)}const Rr=reactExports.useMemo(()=>{if(!Jt.trim())return dt;const xr=Jt.toLowerCase();return dt.filter(kr=>{var Mr,Tr;return((Mr=kr.title)==null?void 0:Mr.toLowerCase().includes(xr))||((Tr=kr.subtitle)==null?void 0:Tr.toLowerCase().includes(xr))})},[dt,Jt]);return Kt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading post"})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"My Posts"}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/community/create-post"),className:`
    hidden md:inline-flex
    px-3 py-2 rounded-lg text-sm font-medium
    bg-dashboard-text-light dark:bg-dashboard-text-dark
    text-dashboard-bg-light dark:text-dashboard-bg-dark
    hover:opacity-90
    transition
  `,children:"Create new"})]})}),jsxRuntimeExports.jsxs("div",{className:"px-4 py-4 pb-24 max-w-3xl mx-auto space-y-2",children:[lr&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading posts"}),!lr&&Rr.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:Jt?"No posts match your search.":"You havent posted anything yet."}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto",children:jsxRuntimeExports.jsx("input",{value:Jt,onChange:xr=>Zt(xr.target.value),placeholder:"Search your posts by title or subtitle",className:`
        w-full
        px-4 py-2.5
        rounded-lg
        text-sm
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        placeholder:text-dashboard-muted-light
        dark:placeholder:text-dashboard-muted-dark
        focus:outline-none
        focus:ring-2
        focus:ring-green
      `})}),Rr.map(xr=>jsxRuntimeExports.jsxs("div",{className:`
              flex items-center gap-4 p-4 rounded-xl
              border border-dashboard-border-light dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
            `,children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-md overflow-hidden bg-dashboard-hover-light dark:bg-dashboard-hover-dark flex-shrink-0",children:xr.image_url?jsxRuntimeExports.jsx("img",{src:xr.image_url,alt:"",loading:"lazy",decoding:"async",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-50",children:""})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold line-clamp-1",children:jsxRuntimeExports.jsx(Link$2,{to:`/community/post/${xr.id}`,className:`
                    hover:underline
                    text-dashboard-text-light
                    dark:text-dashboard-text-dark
                  `,children:xr.title})}),xr.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                    mt-0.5
                    text-xs
                    leading-snug
                    line-clamp-1
                    text-dashboard-muted-light
                    dark:text-dashboard-muted-dark
                  `,children:xr.subtitle}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs opacity-60",children:new Date(xr.created_at).toLocaleDateString()}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center gap-6 text-sm sm:text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:xr.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:xr.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(MessageCircle,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:xr.comment_count??0})]}),xr.is_pinned===1&&jsxRuntimeExports.jsx("span",{children:"Pinned"}),xr.is_locked===1&&jsxRuntimeExports.jsx("span",{children:"Locked"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:xr.views}),jsxRuntimeExports.jsx("span",{children:"views"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{onClick:kr=>{kr.stopPropagation(),Tt(kt===xr.id?null:xr.id)},className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:18})}),kt===xr.id&&jsxRuntimeExports.jsxs("div",{onClick:kr=>kr.stopPropagation(),className:`
                      absolute left-1/2 mt-2 -translate-x-1/2 z-30
                      w-56
                      rounded-xl
                      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                      border border-dashboard-border-light dark:border-dashboard-border-dark
                      shadow-xl
                      overflow-hidden
                    `,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>jr(xr),className:`${dr} hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark text-sm`,children:[jsxRuntimeExports.jsx(Link$1,{size:16,className:"opacity-80"}),"Copy link"]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dashboard-border-light dark:bg-dashboard-border-dark my-1"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Tt(null),et(`/community/edit-post/${xr.id}`)},className:`${dr} hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark text-sm`,children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:"opacity-80"}),"Edit"]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dashboard-border-light dark:bg-dashboard-border-dark my-1"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Tt(null),mr(xr.id)},className:`${dr} text-red-500 hover:bg-red-500/10 text-sm`,children:[jsxRuntimeExports.jsx(Trash2,{size:16}),"Delete"]})]})]})]})]})]},xr.id))]}),jsxRuntimeExports.jsx(MobileCreateFAB,{className:`
          md:hidden
          transition-all duration-200 ease-out
          ${nr?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}
        `,open:er,setOpen:rr,containerRef:sr,onCreatePost:()=>{rr(!1),et("/community/create-post")},onCreateFragment:()=>{rr(!1),et("/community/fragments/create")}})]})}function AddSubscribersModal({open:et,onClose:dt,onSuccess:$t}){const[kt,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(""),[Ut,Ht]=reactExports.useState(!1);if(!et)return null;function Kt(){const er=Dt.trim().toLowerCase();if(er){if(kt.includes(er)){y$4.info("Email already added");return}Tt(rr=>[...rr,er]),Ft("")}}function Yt(er){Tt(rr=>rr.filter(sr=>sr!==er))}function Jt(er){var nr;const rr=(nr=er.target.files)==null?void 0:nr[0];if(!rr)return;const sr=new FileReader;sr.onload=()=>{const or=sr.result.split(/\r?\n/).map(lr=>lr.trim()).filter(Boolean).map(lr=>{var cr;return(cr=lr.split(",")[0])==null?void 0:cr.trim().toLowerCase()}).filter(Boolean);Tt(lr=>[...new Set([...lr,...or])])},sr.readAsText(rr)}async function Zt(){if(!kt.length){y$4.error("Add at least one email");return}try{Ht(!0),await axiosInstance.post("/community/subscriptions/invites",{emails:kt}),y$4.success("Invites sent"),$t==null||$t(),dt()}catch{y$4.error("Failed to send invites")}finally{Ht(!1)}}return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-lg
        mx-4 sm:mx-6 md:mx-0
        rounded-2xl
        bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        p-6
      `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:"Add subscribers"}),jsxRuntimeExports.jsx("button",{onClick:dt,children:jsxRuntimeExports.jsx(X$5,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-3",children:[jsxRuntimeExports.jsx("input",{value:Dt,onChange:er=>Ft(er.target.value),placeholder:"email@example.com",autoComplete:"off",autoCorrect:"off",spellCheck:!1,className:"flex-1 rounded-lg px-3 py-2 text-sm border bg-dashboard-bg-light dark:bg-dashboard-bg-dark",onKeyDown:er=>{er.key==="Enter"&&(er.preventDefault(),Kt())}}),jsxRuntimeExports.jsx("button",{onClick:Kt,className:"px-3 rounded-lg bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Plus,{size:16})})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer opacity-80 hover:opacity-100 mb-4",children:[jsxRuntimeExports.jsx(Upload,{size:14}),"Upload CSV",jsxRuntimeExports.jsx("input",{type:"file",accept:".csv",onChange:Jt,className:"hidden"})]}),kt.length>0&&jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:kt.map(er=>jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:[er,jsxRuntimeExports.jsx("button",{onClick:()=>Yt(er),children:jsxRuntimeExports.jsx(X$5,{size:12})})]},er))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"text-sm px-4 py-2 rounded-lg border",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Zt,disabled:Ut,className:"text-sm px-4 py-2 rounded-lg bg-blue text-white disabled:opacity-50",children:Ut?"Sending":"Send invites"})]})]})})}function PendingInvites({refreshKey:et}){const[dt,$t]=reactExports.useState([]),[kt,Tt]=reactExports.useState(!0);async function Dt(){try{Tt(!0);const Ht=await axiosInstance.get("/community/subscriptions/invites");$t(Ht.data.invites||[])}catch{y$4.error("Failed to load invites")}finally{Tt(!1)}}reactExports.useEffect(()=>{Dt()},[et]);async function Ft(Ht){try{await axiosInstance.post(`/community/subscriptions/invites/${Ht}/resend`),y$4.success("Invite resent")}catch{y$4.error("Failed to resend invite")}}async function Ut(Ht){if(window.confirm("Cancel this invite?"))try{await axiosInstance.delete(`/community/subscriptions/invites/${Ht}`),$t(Kt=>Kt.filter(Yt=>Yt.id!==Ht)),y$4.success("Invite cancelled")}catch{y$4.error("Failed to cancel invite")}}return kt?jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading invites"}):dt.length?jsxRuntimeExports.jsxs("div",{className:"mt-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold mb-3",children:"Pending invites"}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border border-dashboard-border-light dark:border-dashboard-border-dark overflow-hidden",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"p-3 text-left",children:"Email"}),jsxRuntimeExports.jsx("th",{className:"p-3 text-left",children:"Sent"}),jsxRuntimeExports.jsx("th",{className:"p-3"})]})}),jsxRuntimeExports.jsx("tbody",{children:dt.map(Ht=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("td",{className:"p-3",children:Ht.email}),jsxRuntimeExports.jsx("td",{className:"p-3",children:new Date(Ht.created_at).toLocaleDateString()}),jsxRuntimeExports.jsxs("td",{className:"p-3 flex justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ft(Ht.id),className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",title:"Resend",children:jsxRuntimeExports.jsx(RotateCcw,{size:14})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ut(Ht.id),className:"p-2 rounded-md hover:bg-red-500/10 text-red-500",title:"Cancel",children:jsxRuntimeExports.jsx(Trash2,{size:14})})]})]},Ht.id))})]})})]}):null}const GRID_COLS$1="grid-cols-[48px_2.2fr_140px_160px_160px_120px_48px]";function Subscriptions(){const et=useNavigate(),[dt,$t]=reactExports.useState(null),[kt,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState([]),[Ut,Ht]=reactExports.useState(0),[Kt,Yt]=reactExports.useState(!0),[Jt,Zt]=reactExports.useState(!1),[er,rr]=reactExports.useState(0);function sr(mr){$t(jr=>jr===mr?null:mr)}function nr(mr){return new Date(mr).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}async function ir(){try{Yt(!0);const mr=await axiosInstance.get("/community/subscriptions/me");Ft(mr.data.subscribers||[]),Ht(mr.data.count||0)}catch(mr){console.error("Failed to fetch subscribers",mr)}finally{Yt(!1)}}reactExports.useEffect(()=>{ir()},[]);const or=Dt.filter(mr=>mr.email.toLowerCase().includes(kt.toLowerCase())),lr=Dt.reduce((mr,jr)=>jr.type==="monthly"?mr+(jr.revenue||0)*12:jr.type==="annual"||jr.type==="vip"?mr+(jr.revenue||0):mr,0),cr=lr/12;function dr(mr){navigator.clipboard.writeText(mr),y$4.success("Email copied"),$t(null)}function ur(mr){y$4.info(`Message flow for ${mr} (next step)`),$t(null)}async function pr(mr){try{await axiosInstance.delete(`/community/subscriptions/${mr}`),Ft(jr=>jr.filter(Rr=>Rr.id!==mr)),y$4.success("Subscriber removed")}catch{y$4.error("Failed to remove subscriber")}$t(null)}return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 border-b border-dashboard-border-light dark:border-dashboard-border-dark px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Subscribers"}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60",children:[Ut," subscribers"]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Zt(!0),className:"hidden md:inline-flex px-3 py-2 rounded-lg text-sm bg-blue text-white hover:opacity-90",children:"Add subscribers"})]})}),jsxRuntimeExports.jsx("div",{className:"px-4 pt-4 max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:`
          grid grid-cols-1 sm:grid-cols-2 gap-3
          rounded-xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
          bg-dashboard-sidebar-light
          dark:bg-dashboard-sidebar-dark
          p-4
        `,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide opacity-60",children:"Gross ARR"}),jsxRuntimeExports.jsxs("p",{className:"text-lg text-green font-semibold tabular-nums",children:["$",lr.toFixed(2)]}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-50 mt-1",children:"Annualized recurring revenue before fees"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs uppercase tracking-wide opacity-60",children:"Gross monthly"}),jsxRuntimeExports.jsxs("p",{className:"text-lg font-semibold tabular-nums",children:["$",cr.toFixed(2)]}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-50 mt-1",children:"Derived from active subscriptions"})]})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsx("button",{onClick:()=>Zt(!0),className:`
      w-full
      py-2.5
      rounded-lg
      text-sm
      font-medium
      bg-blue
      text-white
      hover:opacity-90
    `,children:"Add subscribers"})}),jsxRuntimeExports.jsx("div",{className:"px-4 py-4 max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-50"}),jsxRuntimeExports.jsx("input",{value:kt,onChange:mr=>Tt(mr.target.value),placeholder:"Search by name or email...",autoComplete:"off",autoCorrect:"off",spellCheck:!1,className:`
              w-full pl-9 pr-3 py-2 rounded-lg text-sm
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              outline-none
            `})]})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block px-4 max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:`
          grid ${GRID_COLS$1}
          items-center
          px-4 py-3
          text-xs
          font-medium
          text-white/50
          bg-dashboard-hover-light
          dark:bg-dashboard-hover-dark
          rounded-t-xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-white/30 bg-transparent accent-white/70"})}),jsxRuntimeExports.jsx("div",{children:"Subscriber"}),jsxRuntimeExports.jsx("div",{children:"Type"}),jsxRuntimeExports.jsx("div",{className:"text-center",children:"Activity"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:"Start date"}),jsxRuntimeExports.jsx("div",{className:"text-right",children:"Revenue"}),jsxRuntimeExports.jsx("div",{})]}),jsxRuntimeExports.jsx("div",{className:"space-y-1 mt-1",children:or.map(mr=>jsxRuntimeExports.jsxs("div",{className:`
              grid ${GRID_COLS$1}
              items-center
              px-4 py-3
              rounded-xl
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              border
              border-dashboard-border-light
              dark:border-dashboard-border-dark
              hover:bg-dashboard-hover-light
              dark:hover:bg-dashboard-hover-dark
              transition
            `,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-white/30 bg-transparent accent-white/70"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[jsxRuntimeExports.jsx("button",{onClick:jr=>{if(jr.stopPropagation(),!mr.has_profile){y$4.info("This author hasnt set up their profile yet");return}et(`/community/authors/${mr.id}`)},className:`
                  flex-shrink-0`,children:mr.profile_image_url?jsxRuntimeExports.jsx("img",{src:mr.profile_image_url,alt:mr.email,className:`
                      w-8 h-8
                      rounded-full
                      object-cover
                      border
                      border-dashboard-border-light
                      dark:border-dashboard-border-dark
                    `}):jsxRuntimeExports.jsx("div",{className:`
                      w-8 h-8
                      rounded-full
                      bg-dashboard-hover-light
                      dark:bg-dashboard-hover-dark
                      flex
                      items-center
                      justify-center
                      text-xs
                    `,children:mr.email.charAt(0).toUpperCase()})}),jsxRuntimeExports.jsx("span",{className:"text-sm truncate",children:mr.email})]}),jsxRuntimeExports.jsx("div",{children:mr.paid?jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${mr.type==="monthly"?"bg-green/20 text-green":mr.type==="annual"?"bg-blue/20 text-blue":mr.type==="vip"?"bg-purple/20 text-purple":"bg-gray-500/20"}`,children:mr.type==="monthly"?"Monthly Paid":mr.type==="annual"?"Annual Paid":mr.type==="vip"?"VIP":"Paid"}):jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-gray-500/20 text-gray-400",children:"Free"})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-0.5",children:[1,2,3,4,5].map(jr=>jsxRuntimeExports.jsx(Star,{size:10,className:jr<=mr.activity?"text-yellow fill-yellow":"opacity-30"},jr))}),jsxRuntimeExports.jsx("div",{className:"text-sm text-white/70",children:nr(mr.created_at)}),jsxRuntimeExports.jsxs("div",{className:"text-sm tabular-nums text-right text-white/70",children:["$",mr.revenue.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{onClick:jr=>jr.stopPropagation(),className:"relative flex justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>sr(mr.id),className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:16})}),dt===mr.id&&jsxRuntimeExports.jsxs("div",{className:`
                absolute
                top-10
                right-0
                w-44
                rounded-xl
                shadow-xl
                z-50
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                transition-all duration-150
              `,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>dr(mr.email),className:"w-full px-4 py-2 flex items-center gap-2 text-sm hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx(Copy,{size:14}),"Copy email"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ur(mr.email),className:"w-full px-4 py-2 flex items-center gap-2 text-sm hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx(MessageCircle,{size:14}),"Send message"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>pr(mr.id),className:"w-full px-4 py-2 flex items-center gap-2 text-sm text-red-500 hover:bg-red-500/10",children:[jsxRuntimeExports.jsx(Trash2,{size:14}),"Remove"]})]})]})]},mr.id))}),dt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>$t(null)})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-4 space-y-3",children:or.map(mr=>jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-xl border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:jr=>{if(jr.stopPropagation(),!mr.has_profile){y$4.info("This author hasnt set up their profile yet");return}et(`/community/authors/${mr.id}`)},className:`
                    flex-shrink-0`,children:mr.profile_image_url?jsxRuntimeExports.jsx("img",{src:mr.profile_image_url,alt:mr.email,className:`
                        w-8 h-8
                        rounded-full
                        object-cover
                        border
                        border-dashboard-border-light
                        dark:border-dashboard-border-dark
                      `}):jsxRuntimeExports.jsx("div",{className:`
                        w-8 h-8
                        rounded-full
                        bg-dashboard-hover-light
                        dark:bg-dashboard-hover-dark
                        flex
                        items-center
                        justify-center
                        text-xs
                      `,children:mr.email.charAt(0).toUpperCase()})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:mr.email}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60",children:["Started ",nr(mr.created_at)]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"mt-2 flex gap-0.5",children:[1,2,3,4,5].map(jr=>jsxRuntimeExports.jsx(Star,{size:10,className:jr<=mr.activity?"text-yellow fill-yellow":"opacity-30"},jr))}),jsxRuntimeExports.jsxs("p",{className:"mt-1 text-xs",children:["Revenue $",mr.revenue.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{onClick:jr=>jr.stopPropagation(),className:"mt-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>sr(mr.id),className:`
                w-full
                flex
                items-center
                justify-center
                gap-2
                py-2
                rounded-lg
                text-sm
                bg-dashboard-hover-light
                dark:bg-dashboard-hover-dark
                hover:opacity-90
                transition-all duration-150
              `,children:[jsxRuntimeExports.jsx(Ellipsis,{size:16}),"Options"]}),dt===mr.id&&jsxRuntimeExports.jsxs("div",{className:`
                  mt-2
                  w-full
                  rounded-xl
                  shadow-xl
                  bg-dashboard-sidebar-light
                  dark:bg-dashboard-sidebar-dark
                  border
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  overflow-hidden
                `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>dr(mr.email),className:"w-full px-4 py-3 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"Copy email"}),jsxRuntimeExports.jsx("button",{onClick:()=>ur(mr.email),className:"w-full px-4 py-3 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"Send message"}),jsxRuntimeExports.jsx("button",{onClick:()=>pr(mr.id),className:"w-full px-4 py-3 text-sm text-left text-red-500 hover:bg-red-500/10",children:"Remove"})]})]})]},mr.id))}),jsxRuntimeExports.jsx("div",{className:"px-4 max-w-6xl mx-auto mt-10",children:jsxRuntimeExports.jsx(PendingInvites,{refreshKey:er})}),jsxRuntimeExports.jsx(AddSubscribersModal,{open:Jt,onClose:()=>Zt(!1),onSuccess:()=>{ir(),rr(mr=>mr+1)}})]})}function PreviewSubscribeModal({open:et,onClose:dt,onConfirm:$t}){return et?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:dt}),jsxRuntimeExports.jsxs("div",{className:`
          relative
          w-full max-w-md
          rounded-2xl
          bg-white dark:bg-[#0f1216]
          p-6
          shadow-xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Preview subscription page?"}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-70 mb-5",children:"You have unsaved changes. The preview will show your last saved subscription settings, not your current edits."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:dt,className:`
              px-4 py-2
              rounded-lg
              text-sm
              border
              hover:bg-dashboard-hover-light
              dark:hover:bg-dashboard-hover-dark
            `,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:$t,className:`
              px-4 py-2
              rounded-lg
              text-sm
              bg-blue
              text-white
              hover:opacity-90
            `,children:"Preview anyway"})]})]})]}):null}const inputClass=`
  w-full rounded-xl px-4 py-3 text-sm
  bg-white dark:bg-[#0f1216]
  text-dashboard-text-light dark:text-dashboard-text-dark
  border border-dashboard-border-light dark:border-[#23272f]
  placeholder:text-dashboard-muted-light dark:placeholder:text-gray-500
  focus:outline-none focus:ring-2 focus:ring-blue/40
`;function ProfileSettings(){const et=reactExports.useRef(""),[dt,$t]=reactExports.useState(!0),[kt,Tt]=reactExports.useState(!1),[Dt,Ft]=reactExports.useState(""),[Ut,Ht]=reactExports.useState(""),[Kt,Yt]=reactExports.useState(""),[Jt,Zt]=reactExports.useState(""),[er,rr]=reactExports.useState([]),[sr,nr]=reactExports.useState([]),[ir,or]=reactExports.useState([]),[lr,cr]=reactExports.useState(""),[dr,ur]=reactExports.useState(""),[pr,mr]=reactExports.useState(""),[jr,Rr]=reactExports.useState(""),[xr,kr]=reactExports.useState(null),[Mr,Tr]=reactExports.useState({new_free_subscriber:!0,canceled_free_subscription:!0,post_comments:!0}),[Or,_r]=reactExports.useState(!1),[Pr,br]=reactExports.useState(!1),[wr,zr]=reactExports.useState(null),[Hr,Yr]=reactExports.useState(null),[es,rs]=reactExports.useState(""),[Wr,Xr]=reactExports.useState(""),[ns,gs]=reactExports.useState(!1),[us,ps]=reactExports.useState(""),[cs,ss]=reactExports.useState(""),[fs,hs]=reactExports.useState(""),[$s,ks]=reactExports.useState([]),[Ds,_s]=reactExports.useState(""),[As,Ns]=reactExports.useState(!1),[Is,zs]=reactExports.useState([]),[Gs,Ws]=reactExports.useState([]),[Qs,qs]=reactExports.useState(""),[Bs,Js]=reactExports.useState(""),[Ys,ln]=reactExports.useState(!1);function Pn(ms){Tr(ls=>({...ls,[ms]:!ls[ms]}))}reactExports.useEffect(()=>{Qn(),ds()},[]);async function Qn(){try{$t(!0);const ls=(await axiosInstance.get("/community/authors/me")).data.profile||{};gs(!!ls.subscriptions_enabled),Ft(ls.username||""),Ht(ls.bio||""),Yt(ls.about||""),Zt(ls.current_employment||""),rr(ls.interests||[]),nr(ls.services||[]),or(ls.media_links||[]),zr(ls),Yr(ls.publication_logo_url||null),rs(ls.publication_name||""),et.current=ls.publication_name||"",kr(ls.id),Ns(!!ls.stripe_connect_account_id),gs(!!ls.subscriptions_enabled),ps(typeof ls.monthly_price=="number"?ls.monthly_price.toFixed(2):""),ss(typeof ls.annual_price=="number"?ls.annual_price.toFixed(2):""),zs(ls.monthly_benefits||[]),Ws(ls.annual_benefits||[]),hs(typeof ls.vip_price=="number"?ls.vip_price.toFixed(2):""),ks(ls.vip_benefits||[])}catch{y$4.error("Failed to load profile")}finally{$t(!1)}}const xo=As||ns;async function Os(ms){if(!(!ms||!xr))try{const ls=new FileReader;ls.onloadend=async()=>{const ys=await axiosInstance.post("/upload-data/upload-avatar",{userId:xr,profileImage:ls.result,target:"publication"});Yr(ys.data.profileImage),y$4.success("Publication logo updated")},ls.readAsDataURL(ms)}catch(ls){console.error("Publication logo upload failed",ls),y$4.error("Failed to upload logo")}}async function ds(){try{const ms=await axiosInstance.get("/community/authors/me/notifications");Tr({new_free_subscriber:!!ms.data.preferences.new_free_subscriber,canceled_free_subscription:!!ms.data.preferences.canceled_free_subscription,post_comments:!!ms.data.preferences.post_comments}),_r(!0)}catch(ms){console.error("fetchNotificationPrefs error",ms),y$4.error("Failed to load notification preferences")}}async function Gr(){var ms,ls;try{if(Tt(!0),!/^[a-zA-Z0-9_]{3,20}$/.test(Dt)){y$4.error("Username must be 320 characters and contain only letters, numbers, or underscores.");return}await axiosInstance.post("/community/authors/me",{username:Dt,bio:Ut,about:Kt,current_employment:Jt,interests:er,services:sr,media_links:ir,publication_logo_url:Hr,publication_name:es,monthly_benefits:Is,annual_benefits:Gs,vip_benefits:$s}),await axiosInstance.post("/community/authors/me/subscription-pricing",{subscriptions_enabled:ns,monthly_price_cents:ns&&us?Math.round(Number(us)*100):void 0,annual_price_cents:ns&&cs?Math.round(Number(cs)*100):void 0,vip_price_cents:fs?Math.round(Number(fs)*100):void 0}),await axiosInstance.post("/community/authors/me/update-notifications",Mr),y$4.success("Profile updated"),Xr("")}catch(ys){const ws=((ls=(ms=ys==null?void 0:ys.response)==null?void 0:ms.data)==null?void 0:ls.message)||(ys==null?void 0:ys.message)||"Failed to save profile";y$4.error(ws)}finally{Tt(!1)}}function bs(){!pr||!jr||(or([...ir,{label:pr,url:jr}]),mr(""),Rr(""))}function xs(ms){or(ir.filter((ls,ys)=>ys!==ms))}return dt?jsxRuntimeExports.jsx("p",{className:"p-6 opacity-60",children:"Loading settings"}):jsxRuntimeExports.jsxs("div",{className:"h-screen flex flex-col bg-dashboard-bg-light dark:bg-dashboard-bg-dark overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 sticky top-3 z-20 border-b border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"px-3 sm:px-4 py-3 max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Author Settings"})}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex justify-end",children:jsxRuntimeExports.jsx("button",{onClick:Gr,disabled:kt||!Or,className:`
          px-4 py-2 rounded-lg text-sm font-medium
          bg-blue text-white
          hover:opacity-90 disabled:opacity-50
        `,children:kt?"Saving":"Save"})})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsx("button",{onClick:Gr,disabled:kt,className:`
      w-full
      py-3
      rounded-lg
      text-sm
      font-medium
      bg-blue
      text-white
      hover:opacity-90
      disabled:opacity-50
    `,children:kt?"Saving":"Save changes"})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"px-0 sm:px-4 py-4 sm:py-6 max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[jsxRuntimeExports.jsxs(Section$1,{title:"Username",description:"Your public @username. This will appear on your posts and profile.",children:[Pr&&jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 text-yellow-600",children:"Usernames cant be changed once set."}),jsxRuntimeExports.jsx("input",{value:Dt,onChange:ms=>Ft(ms.target.value.toLowerCase()),placeholder:"@username",disabled:Pr,className:`${inputClass} disabled:opacity-60`}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Letters, numbers, and underscores only"})]}),jsxRuntimeExports.jsxs(Section$1,{title:"Publication name",description:"This is the public name of your writing publication.",children:[jsxRuntimeExports.jsx("input",{value:es,onChange:ms=>{const ls=ms.target.value;rs(ls);const ys=ls.trim();if(!ys){Xr("");return}if(ys===et.current.trim()){Xr("");return}ys.length<3?Xr("Publication name must be at least 3 characters"):ys.length>120?Xr("Publication name cant exceed 120 characters"):Xr("Publication names must be unique and cant be shared with other writers")},placeholder:"The Messy Attic",maxLength:120,className:inputClass}),Wr?jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 text-yellow-600",children:Wr}):jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 opacity-60",children:"If left blank, your name will be used."})]}),jsxRuntimeExports.jsx(Section$1,{title:"Publication logo",description:"This image appears on your author page and publication header.",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:Hr||defaultBrandLogo,alt:"Publication logo",className:"w-20 h-20 rounded-xl object-cover border border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsxs("label",{className:"cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:ms=>{var ys;const ls=(ys=ms.target.files)==null?void 0:ys[0];ls&&Os(ls)}}),jsxRuntimeExports.jsx("span",{className:`
                  inline-flex items-center
                  px-4 py-2
                  rounded-lg
                  text-sm font-medium
                  bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                  border
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  hover:opacity-90
                  transition
                `,children:"Upload logo"})]})]})}),jsxRuntimeExports.jsx(Section$1,{title:"Bio",description:"Short one-line summary",children:jsxRuntimeExports.jsx("textarea",{value:Ut,onChange:ms=>Ht(ms.target.value),rows:5,className:`${inputClass} resize-none`})}),jsxRuntimeExports.jsx(Section$1,{title:"About",description:"Writer introduction",children:jsxRuntimeExports.jsx("textarea",{value:Kt,onChange:ms=>Yt(ms.target.value),rows:15,className:inputClass})}),jsxRuntimeExports.jsx(Section$1,{title:"Current Employment",children:jsxRuntimeExports.jsx("input",{value:Jt,onChange:ms=>Zt(ms.target.value),className:inputClass})}),jsxRuntimeExports.jsx(TagSection,{title:"Interests",value:lr,setValue:cr,list:er,setList:rr}),jsxRuntimeExports.jsx(TagSection,{title:"Services Provided",value:dr,setValue:ur,list:sr,setList:nr}),jsxRuntimeExports.jsxs(Section$1,{title:"Media Links",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-3",children:[jsxRuntimeExports.jsx("input",{placeholder:"Label",value:pr,onChange:ms=>mr(ms.target.value),className:inputClass}),jsxRuntimeExports.jsx("input",{placeholder:"URL",value:jr,onChange:ms=>Rr(ms.target.value),className:inputClass}),jsxRuntimeExports.jsx("button",{onClick:bs,className:`
                  px-4 rounded-xl
                  bg-dashboard-hover-light dark:bg-[#1b1f27]
                  border border-dashboard-border-light dark:border-[#2a2f38]
                `,children:jsxRuntimeExports.jsx(Plus,{size:16})})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:ir.map((ms,ls)=>jsxRuntimeExports.jsxs("div",{className:`
                    flex items-center justify-between
                    rounded-xl p-4
                    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                    border border-dashboard-border-light dark:border-dashboard-border-dark
                  `,children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:ms.label}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-60",children:ms.url})]}),jsxRuntimeExports.jsx("button",{onClick:()=>xs(ls),children:jsxRuntimeExports.jsx(X$5,{size:16})})]},ls))})]}),jsxRuntimeExports.jsxs(Section$1,{title:"Paid subscriptions",description:jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{children:"Let readers support you with a recurring subscription."}),!As&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-yellow-500",children:["Youll need to"," ",jsxRuntimeExports.jsx(Link$2,{to:"/settings",className:"underline hover:opacity-80",children:"set up billing"})," ","before enabling paid subscriptions."]})]}),children:[jsxRuntimeExports.jsx("div",{className:"w-full mb-6 sm:flex sm:justify-end",children:ns&&xr&&jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ln(!0),className:`
                  w-full
                  sm:w-auto
                  text-xs
                  px-4
                  py-3
                  sm:py-2
                  rounded-lg
                  border
                  text-center
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                  transition
                `,children:"Preview page"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 text-sm text-green",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",disabled:!xo,checked:ns,onChange:ms=>gs(ms.target.checked)}),"Enable paid subscriptions"]}),ns&&jsxRuntimeExports.jsxs("div",{className:`
                  rounded-xl
                  p-4
                  sm:p-5
                  bg-dashboard-hover-light
                  dark:bg-dashboard-hover-dark
                  border
                  border-dashboard-border-light
                  dark:border-dashboard-border-dark
                  space-y-5
                `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-blue/20 text-mediaBlue",children:"Standard"}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-60",children:"Monthly and annual subscriptions"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs opacity-60",children:"Monthly price (USD)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",step:"0.01",value:us,onChange:ms=>ps(ms.target.value),className:inputClass,placeholder:"7.50"})]}),jsxRuntimeExports.jsx(BenefitEditor,{title:"Monthly subscription benefits",benefits:Is,setBenefits:zs,newValue:Qs,setNewValue:qs})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs opacity-60",children:"Annual price (USD)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",step:"0.01",value:cs,onChange:ms=>ss(ms.target.value),className:inputClass,placeholder:"50.00"})]}),jsxRuntimeExports.jsx(BenefitEditor,{title:"Annual subscription benefits",benefits:Gs,setBenefits:Ws,newValue:Bs,setNewValue:Js})]})]}),ns&&jsxRuntimeExports.jsxs("div",{className:`
      rounded-xl
      p-4
      sm:p-5
      bg-dashboard-hover-light
      dark:bg-dashboard-hover-dark
      border
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      space-y-4
    `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-purple/20 text-purple",children:"VIP Founder"}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-60",children:"Premium, limited tier"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-50",children:"Annual only"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs opacity-60",children:"Price (USD / year)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",step:"0.01",value:fs,onChange:ms=>hs(ms.target.value),className:inputClass,placeholder:"240.00"})]}),jsxRuntimeExports.jsx(BenefitEditor,{title:"VIP Founder benefits",benefits:$s,setBenefits:ks,newValue:Ds,setNewValue:_s})]})]})]}),jsxRuntimeExports.jsx(Section$1,{title:"Unlock more tools",description:"Upgrade your plan to access premium writing and publishing features.",children:jsxRuntimeExports.jsxs("div",{className:`
              flex flex-col sm:flex-row
              items-start sm:items-center
              justify-between
              gap-4
              rounded-xl
              p-4
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              border
              border-dashboard-border-light
              dark:border-dashboard-border-dark
            `,children:[jsxRuntimeExports.jsx("p",{className:"text-sm opacity-80 max-w-xl",children:"Authors Assistant is available on paid plan."}),jsxRuntimeExports.jsx(Link$2,{to:"/plans",children:jsxRuntimeExports.jsx("button",{className:`
                  px-4 py-2
                  rounded-lg
                  text-sm font-medium
                  bg-blue
                  text-white
                  hover:opacity-90
                  whitespace-nowrap
                `,children:"View plans"})})]})}),jsxRuntimeExports.jsx(Section$1,{title:"Notifications",description:"Control which activity you want to be notified about",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(NotificationRow,{title:"New free subscriber",description:"When someone subscribes for free",enabled:Mr.new_free_subscriber,onToggle:()=>Pn("new_free_subscriber")}),jsxRuntimeExports.jsx(NotificationRow,{title:"Canceled free subscription",description:"When someone cancels a free subscription",enabled:Mr.canceled_free_subscription,onToggle:()=>Pn("canceled_free_subscription")})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsx(NotificationRow,{title:"Comments on your posts",description:"When someone comments on a post you published",enabled:Mr.post_comments,onToggle:()=>Pn("post_comments")})})]})})]})}),jsxRuntimeExports.jsx(PreviewSubscribeModal,{open:Ys,onClose:()=>ln(!1),onConfirm:()=>{ln(!1),window.open(`/community/subscribe/${xr}/choose?preview=1`,"_blank")}})]})}function Section$1({title:et,description:dt,children:$t}){return jsxRuntimeExports.jsxs("div",{className:`
        /* mobile */
        p-4
        rounded-none
        border-none
        shadow-none
        bg-transparent

        /* desktop */
        sm:p-6
        sm:rounded-2xl
        sm:bg-dashboard-sidebar-light
        sm:dark:bg-dashboard-sidebar-dark
        sm:border
        sm:border-dashboard-border-light
        sm:dark:border-dashboard-border-dark
        sm:shadow-sm
      `,children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold",children:et}),dt&&jsxRuntimeExports.jsx("div",{className:"text-xs opacity-60 mt-1",children:dt})]}),$t]})}function Toggle({enabled:et,onChange:dt}){return jsxRuntimeExports.jsx("button",{type:"button",onClick:dt,className:`
        relative inline-flex h-6 w-11 items-center rounded-full transition
        ${et?"bg-indigo-500":"bg-gray-400/40"}
      `,children:jsxRuntimeExports.jsx("span",{className:`
          inline-block h-5 w-5 transform rounded-full bg-white transition
          ${et?"translate-x-5":"translate-x-1"}
        `})})}function NotificationRow({title:et,description:dt,enabled:$t,onToggle:kt}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:et}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:dt})]}),jsxRuntimeExports.jsx(Toggle,{enabled:$t,onChange:kt})]})}function TagSection({title:et,value:dt,setValue:$t,list:kt,setList:Tt}){function Dt(){if(!dt.trim())return;const Ft=dt.split(",").map(Ut=>Ut.trim()).filter(Boolean).filter(Ut=>!kt.includes(Ut));Ft.length&&Tt([...kt,...Ft]),$t("")}return jsxRuntimeExports.jsxs(Section$1,{title:et,children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-3",children:[jsxRuntimeExports.jsx("input",{value:dt,onChange:Ft=>$t(Ft.target.value),onKeyDown:Ft=>{Ft.key==="Enter"&&(Ft.preventDefault(),Dt())},placeholder:"Type tags separated by commas",className:inputClass}),jsxRuntimeExports.jsx("button",{onClick:Dt,className:`
            px-4 rounded-xl
            bg-dashboard-hover-light dark:bg-[#1b1f27]
            border border-dashboard-border-light dark:border-[#2a2f38]
          `,children:jsxRuntimeExports.jsx(Plus,{size:16})})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:kt.map(Ft=>jsxRuntimeExports.jsxs("span",{className:`
              flex items-center gap-1
              px-3 py-1 rounded-full text-xs font-medium
              bg-dashboard-hover-light dark:bg-[#1b1f27]
              border border-dashboard-border-light dark:border-[#2a2f38]
            `,children:[Ft,jsxRuntimeExports.jsx("button",{onClick:()=>Tt(kt.filter(Ut=>Ut!==Ft)),children:jsxRuntimeExports.jsx(X$5,{size:12})})]},Ft))})]})}function BenefitEditor({title:et,benefits:dt,setBenefits:$t,newValue:kt,setNewValue:Tt}){const Ft=dt.length>=10,[Ut,Ht]=reactExports.useState(null);function Kt(Zt){Ht(Zt)}function Yt(Zt){Zt.preventDefault()}function Jt(Zt){if(Ut===null||Ut===Zt)return;const er=[...dt],[rr]=er.splice(Ut,1);er.splice(Zt,0,rr),$t(er),Ht(null)}return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:et}),jsxRuntimeExports.jsxs("span",{className:"text-xs opacity-60",children:[dt.length,"/",10]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{value:kt,onChange:Zt=>Tt(Zt.target.value),placeholder:Ft?"Maximum benefits reached":"Add a benefit",disabled:Ft,className:`${inputClass} ${Ft?"opacity-60":""}`}),jsxRuntimeExports.jsx("button",{disabled:Ft,onClick:()=>{!kt.trim()||Ft||($t([...dt,kt.trim()]),Tt(""))},className:`
            px-4 rounded-xl
            bg-dashboard-hover-light dark:bg-[#1b1f27]
            disabled:opacity-50
          `,children:jsxRuntimeExports.jsx(Plus,{size:16})})]}),Ft&&jsxRuntimeExports.jsx("p",{className:"text-xs text-yellow-500",children:"You can add up to 10 benefits per subscription tier."}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:dt.map((Zt,er)=>jsxRuntimeExports.jsxs("li",{draggable:!0,onDragStart:()=>Kt(er),onDragOver:Yt,onDrop:()=>Jt(er),className:`
              flex items-center justify-between gap-3
              rounded-xl p-3
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              cursor-move
            `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"opacity-50 cursor-grab",children:""}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:Zt})]}),jsxRuntimeExports.jsx("button",{onClick:()=>$t(dt.filter((rr,sr)=>sr!==er)),children:jsxRuntimeExports.jsx(X$5,{size:14})})]},er))})]})}function ProfilePostCarousel({posts:et}){return et!=null&&et.length?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold opacity-80",children:"More from this author"}),jsxRuntimeExports.jsx("div",{className:`
          flex gap-4 overflow-x-auto pb-2
          snap-x snap-mandatory
          no-scrollbar
        `,children:et.map(dt=>jsxRuntimeExports.jsxs(Link$2,{to:`/community/post/${dt.id}`,className:`
              min-w-[220px] max-w-[220px]
              snap-start
              rounded-xl
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-sidebar-light
              dark:bg-dashboard-sidebar-dark
              hover:opacity-90
              transition
            `,children:[jsxRuntimeExports.jsx("div",{className:"h-28 w-full rounded-t-xl overflow-hidden bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:dt.image_url?jsxRuntimeExports.jsx("img",{src:dt.image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-40",children:""})}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold line-clamp-2",children:dt.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 text-xs opacity-60",children:[jsxRuntimeExports.jsxs("span",{children:[dt.views," views"]}),jsxRuntimeExports.jsxs("span",{children:[dt.comment_count," comments"]})]})]})]},dt.id))})]}):null}const BADGE_DEFS={helpful:{label:"Helpful Creator",icon:HandHeart,color:"text-green",bg:"bg-green/10"},great_listener:{label:"Great Listener",icon:Ear,color:"text-blue",bg:"bg-blue/10"},posted_regularly:{label:"Posted Regularly",icon:PenLine,color:"text-royalPurple",bg:"bg-royalPurple/10"},quality_content:{label:"Quality Content",icon:Sparkles,color:"text-amber-500",bg:"bg-amber-500/10"}};function Profile(){var cr,dr,ur,pr,mr,jr;const[et,dt]=reactExports.useState(!0),[$t,kt]=reactExports.useState(null),{user:Tt}=useAuth(),{userId:Dt}=useParams(),Ft=useNavigate(),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState([]),[er,rr]=reactExports.useState(!1),sr=!Dt||(Tt==null?void 0:Tt.id)===Dt;reactExports.useEffect(()=>{$t!=null&&$t.id&&Tt&&(sr||nr())},[$t,Tt,sr]);async function nr(){try{const Rr=await axiosInstance.get(`/community/subscriptions/${$t.id}/status`);Ht(Rr.data.subscribed),rr(Rr.data.has_paid_subscription)}catch(Rr){console.error("Failed to load subscription status",Rr)}}reactExports.useEffect(()=>{ir(),or()},[Dt]);async function ir(){try{dt(!0);const Rr=await axiosInstance.get(Dt?`/community/authors/${Dt}`:"/community/authors/me");kt(Rr.data.profile)}catch{console.error("Failed to load author profile")}finally{dt(!1)}}async function or(){try{const Rr=sr||!Dt?"/badges/my-badges":`/badges/user-badges/${Dt}`,xr=await axiosInstance.get(Rr);Zt(xr.data.badges||[])}catch(Rr){console.error("Failed to load badges",Rr)}}async function lr(){if($t!=null&&$t.id){if(!Tt){Ft(`/signup-community?redirect=/community/authors/${$t.id}`);return}if(Ut){Yt(!0);try{await axiosInstance.delete(`/community/subscriptions/${$t.id}/subscribe`),Ht(!1)}catch{y$4.error("Failed to unsubscribe")}finally{Yt(!1)}return}if(!er){Yt(!0);try{await axiosInstance.post(`/community/subscriptions/${$t.id}/subscribe`),Ht(!0)}catch{y$4.error("Subscription failed")}finally{Yt(!1)}return}Ft(`/community/subscribe/${$t.id}/choose`,{state:{from:`/community/authors/${$t.id}`}})}}return et?jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"Loading profile"}):$t?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto px-4 py-2 sm:py-8",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"rounded-2xl p-6 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden mb-4 bg-dashboard-hover-light dark:bg-dashboard-hover-dark",children:$t.profile_image_url?jsxRuntimeExports.jsx("img",{src:$t.profile_image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl font-semibold opacity-40",children:(cr=$t.name)==null?void 0:cr.charAt(0)})}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:$t.name}),jsxRuntimeExports.jsxs("p",{children:["@",$t.username]}),!sr&&jsxRuntimeExports.jsx("button",{onClick:lr,disabled:Kt,className:`
    mt-4
    text-sm px-4 py-2 rounded-lg border transition
    flex items-center justify-center gap-2
    ${Ut?"bg-green/10 text-green border-green/30 hover:bg-green/20":"bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-dashboard-text-light dark:text-dashboard-text-dark border-dashboard-border-light dark:border-dashboard-border-dark hover:opacity-80"}
    disabled:opacity-50
  `,children:Kt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonSpinner,{size:14}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Please wait"})]}):Ut?"Subscribed":"Subscribe"}),$t.bio&&jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm opacity-70 leading-relaxed text-left",children:$t.bio}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Ft(sr?"/community/subscriptions/subscribers":`/community/authors/${$t.id}/subscribers`)},className:`
                  mt-4 w-full
                  flex items-center justify-center
                  rounded-lg
                  bg-dashboard-hover-light dark:bg-dashboard-hover-dark
                  px-4 py-2
                  text-sm
                  text-dashboard-text-light dark:text-dashboard-text-dark
                  hover:opacity-80
                  transition
                `,children:[jsxRuntimeExports.jsx("span",{children:$t.subscriber_count.toLocaleString()}),jsxRuntimeExports.jsxs("span",{className:"ml-1 opacity-70",children:["subscriber",$t.subscriber_count===1?"":"s"]})]}),Jt.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-4 w-full",children:jsxRuntimeExports.jsx("div",{className:`
                      grid grid-cols-3 gap-3 justify-items-center
                      sm:flex sm:flex-wrap sm:justify-center
                    `,children:Jt.map(Rr=>jsxRuntimeExports.jsx(ProfileBadge,{badge:Rr},Rr.key_name))})})]})}),((dr=$t.media_links)==null?void 0:dr.length)>0&&jsxRuntimeExports.jsxs("div",{className:"rounded-2xl p-5 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Links"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:$t.media_links.map((Rr,xr)=>jsxRuntimeExports.jsxs("a",{href:Rr.url,target:"_blank",rel:"noreferrer",className:`
                        flex items-center justify-between
                        px-3 py-2 rounded-lg text-sm
                        bg-dashboard-hover-light dark:bg-dashboard-hover-dark
                        hover:opacity-80 transition
                      `,children:[jsxRuntimeExports.jsx("span",{children:Rr.label}),jsxRuntimeExports.jsx(ExternalLink,{size:14})]},xr))})]}),((ur=$t.posts)==null?void 0:ur.length)>0&&jsxRuntimeExports.jsx("div",{className:"rounded-2xl p-5 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[$t.publication_logo_url&&jsxRuntimeExports.jsx("img",{src:$t.publication_logo_url,alt:$t.publication_name,className:"w-10 h-10 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"leading-tight",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold",children:$t.publication_name||"Publication"}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60",children:["Writing by ",$t.name]})]})]}),$t.publication_description&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-70 leading-relaxed",children:$t.publication_description}),jsxRuntimeExports.jsxs("button",{onClick:()=>Ft(`/community/authors/${$t.id}/publication`),className:`
          mt-1
          w-full
          flex items-center justify-between
          px-4 py-2
          rounded-lg
          bg-dashboard-hover-light dark:bg-dashboard-hover-dark
          text-sm
          text-dashboard-text-light dark:text-dashboard-text-dark
          hover:opacity-80
          transition
        `,children:[jsxRuntimeExports.jsxs("span",{children:["Read ",$t.publication_name||"publication"]}),jsxRuntimeExports.jsx(ChevronRight,{size:16,className:"mt-[1px]"})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 space-y-8",children:[$t.about&&jsxRuntimeExports.jsx(Section,{title:"About",children:jsxRuntimeExports.jsx("p",{className:"text-sm leading-relaxed opacity-80 whitespace-pre-wrap",children:$t.about})}),$t.current_employment&&jsxRuntimeExports.jsx(Section,{title:"Current Employment",children:jsxRuntimeExports.jsx("p",{className:"text-sm opacity-80",children:$t.current_employment})}),((pr=$t.interests)==null?void 0:pr.length)>0&&jsxRuntimeExports.jsx(Section,{title:"Interests",children:jsxRuntimeExports.jsx(TagGrid,{tags:$t.interests})}),((mr=$t.services)==null?void 0:mr.length)>0&&jsxRuntimeExports.jsx(Section,{title:"Services Provided",children:jsxRuntimeExports.jsx(TagGrid,{tags:$t.services})}),((jr=$t.posts)==null?void 0:jr.length)>0&&jsxRuntimeExports.jsx(Section,{title:"Posts",children:jsxRuntimeExports.jsx(ProfilePostCarousel,{posts:$t.posts})})]})]})})}):jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"Profile not found"})}function Section({title:et,children:dt}){return jsxRuntimeExports.jsxs("div",{className:"rounded-2xl p-6 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold mb-3",children:et}),dt]})}function ProfileBadge({badge:et}){const dt=BADGE_DEFS[et.key_name];if(!dt)return null;const $t=!!et.earned,kt=dt.icon;return jsxRuntimeExports.jsxs("div",{title:et.description,className:`
        flex flex-col items-center
        w-16
        text-center
        transition
        ${$t?"opacity-100":"opacity-40 grayscale"}
      `,children:[jsxRuntimeExports.jsx("div",{className:`
          w-10 h-10 rounded-full
          flex items-center justify-center
          border
          ${dt.bg}
          ${$t?dt.color:""}
          border-dashboard-border-light dark:border-dashboard-border-dark
        `,children:jsxRuntimeExports.jsx(kt,{size:18})}),jsxRuntimeExports.jsx("span",{className:"mt-1 text-[10px] leading-tight",children:dt.label})]})}function TagGrid({tags:et}){return jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:et.map(dt=>jsxRuntimeExports.jsx("span",{className:`
            px-2.5 py-0.5
            rounded-full
            text-[11px] font-medium tracking-wide
            bg-dashboard-hover-light/70
            dark:bg-[#1b1f27]/70
            border border-dashboard-border-light/60
            dark:border-[#2a2f38]/60
            opacity-80
          `,children:dt},dt))})}function InviteAccept(){const{token:et}=useParams(),dt=useNavigate(),{user:$t}=useAuth(),[kt,Tt]=reactExports.useState(!0),[Dt,Ft]=reactExports.useState(null);reactExports.useEffect(()=>{Ut()},[]);async function Ut(){try{const Kt=await axiosInstance.get(`/community/subscriptions/invites/${et}`);Ft(Kt.data.invite)}catch{y$4.error("Invite not found or expired")}finally{Tt(!1)}}async function Ht(){if(!$t){dt(`/signup-community?email=${encodeURIComponent(Dt.email)}&invite=${et}`);return}try{dt(`/signup-community?email=${encodeURIComponent(Dt.email)}&invite=${et}`),y$4.success("Subscription activated"),dt("/community")}catch{y$4.error("Failed to accept invite")}}return kt?jsxRuntimeExports.jsx("div",{className:"p-10 text-center",children:"Loading"}):Dt?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-white dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white dark:bg-dashboard-sidebar-dark border border-gray-200 dark:border-dashboard-border-dark shadow-xl p-8 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center mb-6",children:[jsxRuntimeExports.jsx("img",{src:headerLogo,alt:"The Messy Attic",className:"h-16 mb-2"}),jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold tracking-wide text-gray-700 dark:text-gray-300",children:"yThe Messy Attic Community"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border border-gray-200 shadow-sm",children:jsxRuntimeExports.jsx("img",{src:Dt.author_avatar||defaultImage,alt:Dt.author_name,className:"w-full h-full object-cover"})})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Youve been invited"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:Dt.author_name})," ","has invited you to join a private community for writers, authors, and readers."]}),jsxRuntimeExports.jsx("button",{onClick:Ht,className:"w-full py-3 rounded-xl bg-primary text-black font-semibold hover:opacity-90 transition",children:"Accept invitation"}),jsxRuntimeExports.jsx("p",{className:"mt-6 text-xs text-gray-400",children:"Youll be asked to sign in or create an account if needed."})]})}):jsxRuntimeExports.jsx("div",{className:"p-10 text-center opacity-60",children:"Invite not available"})}var inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$1=Node3.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:et}){return["img",mergeAttributes(this.options.HTMLAttributes,et)]},parseMarkdown:(et,dt)=>dt.createNode("image",{src:et.href,title:et.title,alt:et.text}),renderMarkdown:et=>{var dt,$t,kt,Tt,Dt,Ft;const Ut=($t=(dt=et.attrs)==null?void 0:dt.src)!=null?$t:"",Ht=(Tt=(kt=et.attrs)==null?void 0:kt.alt)!=null?Tt:"",Kt=(Ft=(Dt=et.attrs)==null?void 0:Dt.title)!=null?Ft:"";return Kt?`![${Ht}](${Ut} "${Kt}")`:`![${Ht}](${Ut})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:et,minWidth:dt,minHeight:$t,alwaysPreserveAspectRatio:kt}=this.options.resize;return({node:Tt,getPos:Dt,HTMLAttributes:Ft,editor:Ut})=>{const Ht=document.createElement("img");Object.entries(Ft).forEach(([Jt,Zt])=>{if(Zt!=null)switch(Jt){case"width":case"height":break;default:Ht.setAttribute(Jt,Zt);break}}),Ht.src=Ft.src;const Kt=new ResizableNodeView({element:Ht,editor:Ut,node:Tt,getPos:Dt,onResize:(Jt,Zt)=>{Ht.style.width=`${Jt}px`,Ht.style.height=`${Zt}px`},onCommit:(Jt,Zt)=>{const er=Dt();er!==void 0&&this.editor.chain().setNodeSelection(er).updateAttributes(this.name,{width:Jt,height:Zt}).run()},onUpdate:(Jt,Zt,er)=>Jt.type===Tt.type,options:{directions:et,min:{width:dt,height:$t},preserveAspectRatio:kt===!0}}),Yt=Kt.dom;return Yt.style.visibility="hidden",Yt.style.pointerEvents="none",Ht.onload=()=>{Yt.style.visibility="",Yt.style.pointerEvents=""},Kt}},addCommands(){return{setImage:et=>({commands:dt})=>dt.insertContent({type:this.name,attrs:et})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:et=>{const[,,dt,$t,kt]=et;return{src:$t,alt:dt,title:kt}}})]}}),index_default$1=Image$1,YOUTUBE_REGEX=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/,YOUTUBE_REGEX_GLOBAL=/^((?:https?:)?\/\/)?((?:www|m|music)\.)?((?:youtube\.com|youtu\.be|youtube-nocookie\.com))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,isValidYoutubeUrl=et=>et.match(YOUTUBE_REGEX),getYoutubeEmbedUrl=(et,dt)=>dt?"https://www.youtube-nocookie.com/embed/videoseries?list=":et?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",getEmbedUrlFromYoutubeUrl=et=>{const{url:dt,allowFullscreen:$t,autoplay:kt,ccLanguage:Tt,ccLoadPolicy:Dt,controls:Ft,disableKBcontrols:Ut,enableIFrameApi:Ht,endTime:Kt,interfaceLanguage:Yt,ivLoadPolicy:Jt,loop:Zt,modestBranding:er,nocookie:rr,origin:sr,playlist:nr,progressBarColor:ir,startAt:or,rel:lr}=et;if(!isValidYoutubeUrl(dt))return null;if(dt.includes("/embed/"))return dt;if(dt.includes("youtu.be")){const mr=dt.split("/").pop();return mr?`${getYoutubeEmbedUrl(rr)}${mr}`:null}const dr=/(?:(v|list)=|shorts\/)([-\w]+)/gm.exec(dt);if(!dr||!dr[2])return null;let ur=`${getYoutubeEmbedUrl(rr,dr[1]==="list")}${dr[2]}`;const pr=[];return $t===!1&&pr.push("fs=0"),kt&&pr.push("autoplay=1"),Tt&&pr.push(`cc_lang_pref=${Tt}`),Dt&&pr.push("cc_load_policy=1"),Ft||pr.push("controls=0"),Ut&&pr.push("disablekb=1"),Ht&&pr.push("enablejsapi=1"),Kt&&pr.push(`end=${Kt}`),Yt&&pr.push(`hl=${Yt}`),Jt&&pr.push(`iv_load_policy=${Jt}`),Zt&&pr.push("loop=1"),er&&pr.push("modestbranding=1"),sr&&pr.push(`origin=${sr}`),nr&&pr.push(`playlist=${nr}`),or&&pr.push(`start=${or}`),ir&&pr.push(`color=${ir}`),lr!==void 0&&pr.push(`rel=${lr}`),pr.length&&(ur+=`${dr[1]==="list"?"&":"?"}${pr.join("&")}`),ur},Youtube=Node3.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640,rel:1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:et=>({commands:dt})=>isValidYoutubeUrl(et.src)?dt.insertContent({type:this.name,attrs:et}):!1}},addPasteRules(){return this.options.addPasteHandler?[nodePasteRule({find:YOUTUBE_REGEX_GLOBAL,type:this.type,getAttributes:et=>({src:et.input})})]:[]},renderHTML({HTMLAttributes:et}){const dt=getEmbedUrlFromYoutubeUrl({url:et.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:et.start||0,rel:this.options.rel});return et.src=dt,["div",{"data-youtube-video":""},["iframe",mergeAttributes(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,rel:this.options.rel},et)]]},...createAtomBlockMarkdownSpec({nodeName:"youtube",allowedAttributes:["src","width","height","start"]})}),index_default=Youtube;function LinkModal({open:et,onClose:dt,onSubmit:$t}){const[kt,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState("click here");return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark p-6 rounded-xl w-full max-w-sm border border-dashboard-border-light dark:border-dashboard-border-dark shadow-xl",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4 text-dashboard-text-light dark:text-dashboard-text-dark",children:"Insert link"}),jsxRuntimeExports.jsx("input",{value:Dt,onChange:Ut=>Ft(Ut.target.value),placeholder:"Link text",className:"w-full mb-3 p-2 rounded border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark"}),jsxRuntimeExports.jsx("input",{value:kt,onChange:Ut=>Tt(Ut.target.value),placeholder:"https://...",className:"w-full mb-4 p-2 rounded border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"text-sm opacity-70",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{kt&&($t({url:kt,text:Dt}),Tt(""),Ft("click here"),dt())},className:"px-3 py-1 bg-green text-black rounded",children:"Insert"})]})]})}):null}function VideoModal({open:et,onClose:dt,onInsert:$t}){const[kt,Tt]=reactExports.useState("");return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md rounded-xl bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark border border-dashboard-border-light dark:border-dashboard-border-dark p-6 shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-light dark:text-dashboard-text-dark",children:"Insert YouTube Video"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"hover:opacity-80",children:jsxRuntimeExports.jsx(X$5,{size:20})})]}),jsxRuntimeExports.jsx("input",{placeholder:"https://youtube.com/watch?v=...",value:kt,onChange:Dt=>Tt(Dt.target.value),className:"w-full p-3 rounded-lg bg-dashboard-bg-light dark:bg-dashboard-bg-dark border border-dashboard-border-light dark:border-dashboard-border-dark"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:dt,className:"px-4 py-2 rounded-lg border",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{kt&&($t(kt),Tt(""),dt())},className:"px-4 py-2 rounded-lg bg-green text-black",children:"Insert"})]})]})}):null}const MentionMark=Mark.create({name:"mention",inclusive:!1,addAttributes(){return{username:{default:null}}},parseHTML(){return[{tag:"span[data-mention]"}]},renderHTML({HTMLAttributes:et}){return["span",mergeAttributes(et,{"data-mention":"",class:"mention-inline"}),0]}}),CommunityPostEditor=reactExports.forwardRef(({value:et,onChange:dt,onMention:$t},kt)=>{const Tt=reactExports.useRef(null),[Dt,Ft]=reactExports.useState(!1),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(0),er=useEditor({autofocus:!1,extensions:[index_default$9.configure({link:!1,underline:!1,blockquote:!1,heading:{levels:[1,2,3,4,5]},codeBlock:!0}),index_default$d,index_default$a,index_default$c,index_default$b.configure({openOnClick:!1,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer"}}),index_default$4.configure({types:["heading","paragraph"]}),index_default$1.configure({inline:!1,allowBase64:!1}),index_default.configure({controls:!0,nocookie:!0,modestBranding:!0}),index_default$3.configure({placeholder:"Write your post..."}),MentionMark],editorProps:{attributes:{class:"prose prose-lg max-w-none focus:outline-none text-dashboard-text-light dark:text-dashboard-text-dark"}},onUpdate({editor:nr}){const ir=nr.getHTML(),lr=nr.state.doc.textBetween(0,nr.state.doc.content.size," ").trim().split(/\s+/).filter(Boolean).length;if(Zt(lr),!ir||ir.trim()==="<p></p>"||ir===et)return;const{from:cr}=nr.state.selection,ur=nr.state.doc.textBetween(Math.max(0,cr-50),cr," ").match(/@([a-zA-Z0-9_]*)$/);ur&&ur[1].length>0?$t==null||$t(ur[1]):$t==null||$t(null),dt(ir)}}),rr=nr=>{if(!er)return;const{from:ir,to:or,empty:lr}=er.state.selection;if(lr)return;const cr=er.state.doc.textBetween(ir,or," ");er.chain().focus().deleteRange({from:ir,to:or}).insertContent({type:"heading",attrs:{level:nr},content:[{type:"text",text:cr}]}).run()},sr=()=>{er&&er.chain().focus().setParagraph().run()};return reactExports.useImperativeHandle(kt,()=>({insertImage:nr=>{er&&er.chain().focus().createParagraphNear().setImage({src:nr}).run()},insertMention:nr=>{if(!er)return;const{state:ir}=er,{from:or}=ir.selection,cr=ir.doc.textBetween(Math.max(0,or-50),or," ").match(/@([a-zA-Z0-9_]*)$/);if(!cr)return;const dr=or-cr[0].length;er.chain().focus().deleteRange({from:dr,to:or}).insertContent({type:"text",text:`@${nr}`,marks:[{type:"mention",attrs:{username:nr}}]}).insertContent(" ").run()}})),reactExports.useEffect(()=>{if(!Kt)return;const nr=ir=>{Tt.current&&(Tt.current.contains(ir.target)||Yt(!1))};return document.addEventListener("mousedown",nr),()=>document.removeEventListener("mousedown",nr)},[Kt]),reactExports.useEffect(()=>{!er||!et||!et.trim()||er.getHTML()===et||er.commands.setContent(et,!1)},[er,et]),er?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"rounded-xl border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsxs("div",{className:`
          flex items-center gap-2
          px-3 py-2
          border-b border-dashboard-border-light dark:border-dashboard-border-dark

          overflow-x-auto  
          overflow-y-visible
          whitespace-nowrap

          md:overflow-visible
          md:whitespace-normal
          no-scrollbar
        `,children:[jsxRuntimeExports.jsxs("div",{ref:Tt,className:"shrink-0 relative hidden md:block",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>Yt(nr=>!nr),className:`
              shrink-0
              flex items-center justify-between
              min-w-[140px]
              px-3 py-2
              rounded-md
              text-sm font-medium
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
              hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
            `,children:[jsxRuntimeExports.jsx("span",{children:"Body"}),jsxRuntimeExports.jsx(ChevronDown,{size:14,className:"opacity-70"})]}),Kt&&jsxRuntimeExports.jsxs("div",{className:`
                absolute left-0 mt-1 z-20
                w-44
                rounded-md
                bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
                shadow-lg
                overflow-hidden
              `,children:[jsxRuntimeExports.jsx("button",{onClick:sr,className:"w-full px-4 py-2 text-left text-sm hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"Body"}),jsxRuntimeExports.jsx("div",{className:"border-t border-dashboard-border-light dark:border-dashboard-border-dark"}),[1,2,3,4,5].map(nr=>jsxRuntimeExports.jsxs("button",{onClick:()=>rr(nr),className:"w-full px-4 py-2 text-left text-sm hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:["Heading H",nr]},nr))]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 shrink-0 md:hidden",children:[jsxRuntimeExports.jsx("button",{onClick:sr,className:`
      px-3 py-2 text-sm rounded
      border border-dashboard-border-light dark:border-dashboard-border-dark
      bg-dashboard-bg-light dark:bg-dashboard-bg-dark
      text-dashboard-text-light dark:text-dashboard-text-dark
      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
    `,children:"Body"}),[1,2,3,4,5,6].map(nr=>jsxRuntimeExports.jsxs("button",{onClick:()=>rr(nr),className:`
        px-3 py-2 text-sm rounded shrink-0
        border border-dashboard-border-light dark:border-dashboard-border-dark
        bg-dashboard-bg-light dark:bg-dashboard-bg-dark
        text-dashboard-text-light dark:text-dashboard-text-dark
        hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
      `,children:["H",nr]},nr))]}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().toggleBold().run(),className:`
              shrink-0
            p-2 rounded
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark 
            ${er.isActive("bold")?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark":""}
          `,children:jsxRuntimeExports.jsx(Bold$1,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().toggleItalic().run(),className:`
            shrink-0
            p-2 rounded
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
            ${er.isActive("italic")?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark":""}
          `,children:jsxRuntimeExports.jsx(Italic$1,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().toggleBlockquote().run(),className:`
            shrink-0
            p-2 rounded
            hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
            ${er.isActive("blockquote")?"bg-dashboard-hover-light dark:bg-dashboard-hover-dark":""}
          `,title:"Quote",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().setHorizontalRule().run(),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Minus,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ft(!0),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Link2,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().unsetLink().run(),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Unlink,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ht(!0),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(SquarePlay,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>er.chain().focus().toggleCodeBlock().run(),className:"shrink-0 p-2 rounded hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Code$1,{size:16})}),jsxRuntimeExports.jsxs("label",{className:"shrink-0 p-2 rounded cursor-pointer hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:[jsxRuntimeExports.jsx(Image$2,{size:16}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:async nr=>{var or,lr;const ir=(or=nr.target.files)==null?void 0:or[0];if(ir)try{const cr=new FormData;cr.append("image",ir);const ur=(lr=(await axiosInstance.post("/community/upload-image",cr,{headers:{"Content-Type":"multipart/form-data"}})).data)==null?void 0:lr.image_url;if(!ur)return;er.chain().focus().createParagraphNear().setImage({src:ur}).run()}catch(cr){console.error("Image upload failed:",cr)}finally{nr.target.value=""}}})]})]}),jsxRuntimeExports.jsx(EditorContent,{editor:er,className:`
          p-4
          min-h-[240px]
          max-h-[45vh]
          overflow-y-auto
          post-body
          prose prose-lg max-w-none

          prose-headings:mt-6 prose-headings:mb-2
          prose-p:my-3

          prose-strong:text-inherit
          prose-strong:font-semibold

          prose-a:underline
          prose-a:underline-offset-2
          prose-a:font-medium
          prose-a:text-blue
          prose-a:decoration-blue

          dark:prose-invert
          dark:prose-strong:text-inherit
          dark:prose-a:text-sky-400
          dark:prose-a:decoration-sky-400
        `}),jsxRuntimeExports.jsxs("div",{className:`
    flex justify-end
    px-4 py-2
    text-xs

    bg-dashboard-hover-light
    dark:bg-dashboard-hover-dark

    text-dashboard-muted-light
    dark:text-dashboard-muted-dark

    border-t
    border-dashboard-border-light
    dark:border-dashboard-border-dark

    rounded-b-xl
  `,children:[Jt," words"]})]}),jsxRuntimeExports.jsx(LinkModal,{open:Dt,onClose:()=>Ft(!1),onSubmit:({url:nr,text:ir})=>{if(!nr)return;const{empty:or}=er.state.selection;or?er.chain().focus().insertText(ir||"click here").setLink({href:nr,target:"_blank",rel:"noopener noreferrer"}).run():er.chain().focus().setLink({href:nr,target:"_blank",rel:"noopener noreferrer"}).run()}}),jsxRuntimeExports.jsx(VideoModal,{open:Ut,onClose:()=>Ht(!1),onInsert:nr=>{er.chain().focus().setYoutubeVideo({src:nr,width:640,height:360}).run()}})]}):null});function renderEmailPreview({subject:et,bodyHtml:dt},$t={}){let kt=et||"",Tt=dt||"";return Object.entries($t).forEach(([Dt,Ft])=>{const Ut=`{{${Dt}}}`;kt=kt.split(Ut).join(Ft??""),Tt=Tt.split(Ut).join(Ft??"")}),{subject:kt,html:Tt}}function EmailPreview({subject:et,bodyHtml:dt,creatorName:$t}){const[kt,Tt]=reactExports.useState("desktop"),Ft=renderEmailPreview({subject:et,bodyHtml:dt},{subscriber_name:"John Doe",author_name:$t});return jsxRuntimeExports.jsxs("div",{className:"sticky top-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-sm font-semibold text-gray-300",children:"Preview"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Tt("desktop"),className:`px-2 py-1 text-xs rounded ${kt==="desktop"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"}`,children:"Desktop"}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt("mobile"),className:`px-2 py-1 text-xs rounded ${kt==="mobile"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"}`,children:"Mobile"})]})]}),jsxRuntimeExports.jsxs("div",{className:`
    mx-auto rounded-lg
    border border-dashboard-border-light dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    text-dashboard-text-light dark:text-dashboard-text-dark
    ${kt==="desktop"?"max-w-xl":"max-w-sm"}
  `,children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark mb-1",children:"Subject"}),jsxRuntimeExports.jsx("p",{className:"font-medium",children:Ft.subject||"(No subject)"})]}),jsxRuntimeExports.jsx("div",{className:"px-4 py-4 prose prose-sm max-w-none post-body",dangerouslySetInnerHTML:{__html:Ft.html||"<p></p>"}})]})]})}function SendTestEmailModal({open:et,email:dt,onCancel:$t,onConfirm:kt}){return et?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:jsxRuntimeExports.jsxs("div",{className:`
        w-full max-w-sm rounded-xl
        bg-dashboard-bg-light dark:bg-dashboard-bg-dark
        border border-dashboard-border-light dark:border-dashboard-border-dark
        p-6
      `,children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Send test email?"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark mb-6",children:["This will send a test email to ",jsxRuntimeExports.jsx("strong",{children:dt}),"."]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:$t,className:"px-4 py-2 rounded-md border border-dashboard-border-light dark:border-dashboard-border-dark",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:kt,className:"px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-700",children:"Send"})]})]})}):null}const EMAIL_HTML_WARN_LIMIT=1e5,EMAIL_HTML_BLOCK_LIMIT=15e4;function EmailTemplates(){const{user:et}=useAuth(),[dt,$t]=reactExports.useState(""),[kt,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState(!1),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(!1),er=(kt==null?void 0:kt.length)||0,rr=er>EMAIL_HTML_BLOCK_LIMIT,sr=er>EMAIL_HTML_WARN_LIMIT,nr=Kt||!dt.trim()||!kt.trim()||rr;reactExports.useEffect(()=>{ir()},[]);async function ir(){var cr,dr,ur;try{const pr=await axiosInstance.get("/community/authors/me/email-templates/free_subscriber_welcome");(cr=pr==null?void 0:pr.data)!=null&&cr.template&&($t(pr.data.template.subject||""),Tt(pr.data.template.body_html||""))}catch(pr){console.error("Failed to load email template",(dr=pr==null?void 0:pr.response)==null?void 0:dr.status,((ur=pr==null?void 0:pr.response)==null?void 0:ur.data)||pr.message)}finally{Ft(!1)}}async function or(){try{Ht(!0),await axiosInstance.post("/community/authors/me/email-templates",{type:"free_subscriber_welcome",subject:dt,body_html:kt}),y$4.success("Template saved")}catch(cr){console.error("Failed to save email template",cr),y$4.error("Failed to save template")}finally{Ht(!1)}}async function lr(){var cr,dr;try{Yt(!0),await axiosInstance.post("/community/authors/test",{type:"free_subscriber_welcome"}),y$4.success("Test email sent")}catch(ur){if(((cr=ur==null?void 0:ur.response)==null?void 0:cr.status)===429){const pr=(dr=ur.response.data)==null?void 0:dr.retry_after_seconds,mr=pr?Math.ceil(pr/60):null;y$4.warning(mr?`Too many test emails. Try again in ${mr} minute${mr>1?"s":""}.`:"Too many test emails. Please try again later.")}else console.error("Failed to send test email",ur),y$4.error("Failed to send test email")}finally{Yt(!1)}}return Dt?jsxRuntimeExports.jsx("div",{className:"p-6 text-gray-400",children:"Loading email template"}):jsxRuntimeExports.jsx("div",{className:"h-full overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-4 sm:p-6 max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx(MailCheck,{className:"w-6 h-6 text-gray-300"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-semibold text-white",children:"Email Templates"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Customize the welcome email sent to new free subscribers."})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Subject"}),jsxRuntimeExports.jsx("input",{value:dt,onChange:cr=>$t(cr.target.value),placeholder:"Welcome {{subscriber_name}}",className:`
              w-full rounded-md px-4 py-2
              bg-[#0b1220] text-white
              border border-gray-700
              focus:outline-none focus:ring-2 focus:ring-indigo-500
            `}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Variables: ","{{subscriber_name}}",", ","{{author_name}}"]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Email Body"}),jsxRuntimeExports.jsx(CommunityPostEditor,{value:kt,onChange:Tt})]}),sr&&!rr&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-yellow-500",children:" This email is very long and may be truncated or rejected by some email clients."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:or,disabled:Ut,className:`
            px-4 py-2 rounded-md
            bg-indigo-600 text-white
            hover:bg-indigo-700
            disabled:opacity-50
          `,children:Ut?"Saving":"Save Template"}),jsxRuntimeExports.jsx("button",{onClick:()=>Zt(!0),disabled:nr,className:`
            px-4 py-2 rounded-md
            bg-gray-700 text-white
            hover:bg-gray-600
            disabled:opacity-50
          `,children:Kt?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Sending"]}):"Send Test"})]}),!Kt&&!dt.trim()&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Add a subject and email body to send a test."}),!Kt&&rr&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-2",children:"This email is too large to send."})]}),jsxRuntimeExports.jsx(EmailPreview,{subject:dt,bodyHtml:kt,creatorName:(et==null?void 0:et.name)||""}),jsxRuntimeExports.jsx(SendTestEmailModal,{open:Jt,email:et.email,onCancel:()=>Zt(!1),onConfirm:async()=>{Zt(!1),await lr()}})]})})}const OPTIONS=[{value:"public",label:"Public",description:"Anyone can comment",icon:Eye},{value:"private",label:"Subscribers",description:"Any subscriber (Free or Paid) can comment",icon:Users},{value:"paid",label:"Paid subscribers",description:"Paying subscribers only",icon:Lock}];function CommentVisibilityDropdown({value:et="public",onChange:dt}){const[$t,kt]=reactExports.useState(!1),Tt=reactExports.useRef(null),Dt=OPTIONS.find(Ft=>Ft.value===et)||OPTIONS[0];return reactExports.useEffect(()=>{function Ft(Ut){Tt.current&&!Tt.current.contains(Ut.target)&&kt(!1)}return document.addEventListener("mousedown",Ft),()=>document.removeEventListener("mousedown",Ft)},[]),jsxRuntimeExports.jsxs("div",{ref:Tt,className:"relative mt-6",children:[jsxRuntimeExports.jsx("label",{className:`
          block mb-1
          text-sm font-medium
          text-dashboard-text-light
          dark:text-dashboard-text-dark
        `,children:"Comment access"}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>kt(Ft=>!Ft),className:`
          w-full
          p-3
          rounded-lg
          flex items-center justify-between
          border
          bg-dashboard-bg-light dark:bg-dashboard-bg-dark
          border-dashboard-border-light dark:border-dashboard-border-dark
          text-dashboard-text-light dark:text-dashboard-text-dark
          hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
          focus:outline-none focus:ring-2 focus:ring-green
        `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Dt.icon,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:Dt.label}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-70",children:Dt.description})]})]}),jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${$t?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.7a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),$t&&jsxRuntimeExports.jsx("div",{className:`
            mt-2 w-full
            rounded-lg
            border
            bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
            border-dashboard-border-light dark:border-dashboard-border-dark
            shadow-xl
            overflow-hidden
          `,children:OPTIONS.map(Ft=>{const Ut=Ft.icon,Ht=Ft.value===et;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{dt(Ft.value),kt(!1)},className:`
                  w-full px-4 py-3 text-left
                  flex items-start gap-3
                  transition
                  ${Ht?"bg-green/10 text-green":"hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
                `,children:[jsxRuntimeExports.jsx(Ut,{size:16,className:"mt-0.5 opacity-80"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:Ft.label}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-70",children:Ft.description})]})]},Ft.value)})}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Subscribers can comment on subscriber-only posts. Paid posts require an active paid subscription."})]})}function CreatePostPage({post:et=null,topicId:dt}){var us,ps;const $t=useNavigate(),kt=reactExports.useRef(null),{postId:Tt}=useParams(),Dt=!!Tt,[Ft,Ut]=reactExports.useState((et==null?void 0:et.title)||""),[Ht,Kt]=reactExports.useState((et==null?void 0:et.subtitle)||""),[Yt,Jt]=reactExports.useState((et==null?void 0:et.body)||""),[Zt,er]=reactExports.useState([]),rr=useLocation(),sr=((us=rr.state)==null?void 0:us.topicId)||null,nr=((ps=rr.state)==null?void 0:ps.topicName)||null,[ir,or]=reactExports.useState(sr||""),[lr,cr]=reactExports.useState(""),[dr,ur]=reactExports.useState([]),[pr,mr]=reactExports.useState(!1),[jr,Rr]=reactExports.useState(null),[xr,kr]=reactExports.useState((et==null?void 0:et.image_url)||null),[Mr,Tr]=reactExports.useState(!1),Or=3,[_r,Pr]=reactExports.useState([]),[br,wr]=reactExports.useState((et==null?void 0:et.comments_visibility)||"public"),zr=reactExports.useMemo(()=>dt?Zt.find(cs=>cs.id===dt):ir?Zt.find(cs=>cs.id===ir):null,[dt,ir,Zt]),Hr=sr||dt||ir||null,Yr=reactExports.useMemo(()=>{var ss,fs;const cs=(fs=(ss=Yt==null?void 0:Yt.replace(/<[^>]*>/g," "))==null?void 0:ss.replace(/\s+/g," "))==null?void 0:fs.trim();return cs?cs.split(" ").length:0},[Yt]),es=501,rs=Yr<es,Wr=Yr>0,Xr=async()=>{var ss;if(!Ft.trim()){y$4.error("Title is required");return}if(!((ss=Yt==null?void 0:Yt.replace(/<[^>]*>/g,""))==null?void 0:ss.trim())){y$4.error("Post body cannot be empty");return}if(!Dt&&!dt&&!ir){y$4.error("Please select a topic");return}if(!Dt&&Yr<es){y$4.error(`Posts require at least ${es} words. This looks like a fragment.`);return}try{let fs=null;if(jr){Tr(!0);const hs=new FormData;hs.append("image",jr),fs=(await axiosInstance.post("/community/upload-image",hs,{headers:{"Content-Type":"multipart/form-data"}})).data.image_url}if(Dt){const hs={title:Ft,subtitle:Ht,body:Yt,comments_visibility:br};fs&&(hs.image_url=fs),await axiosInstance.put(`/community/posts/${Tt}`,hs)}else{const hs=sr||ir;await axiosInstance.post(`/community/topics/${hs}/posts`,{title:Ft,subtitle:Ht,body:Yt,image_url:fs,relatedTopicIds:_r,comments_visibility:br})}Dt?(y$4.success("Post updated"),$t("/community/posts")):(y$4.success("Post published"),$t("/community"))}catch(fs){console.error("Failed to create post:",fs)}finally{Tr(!1)}},ns=async cs=>{if(!cs){mr(!1),ur([]);return}try{const ss=await axiosInstance.get(`/community/users/search?query=${cs}`);ur(ss.data.users||[]),mr(!0)}catch(ss){console.error("mention search failed",ss)}},gs=cs=>{var ss;(ss=kt.current)==null||ss.insertMention(cs),mr(!1),ur([]),cr("")};return reactExports.useEffect(()=>{(async()=>{try{const ss=await axiosInstance.get("/community/topics");er(ss.data.topics||[])}catch(ss){console.error("Failed to load topics:",ss)}})()},[]),reactExports.useEffect(()=>{if(!Dt||!Tt)return;async function cs(){try{const fs=(await axiosInstance.get(`/community/posts/${Tt}`)).data.post;Ut(fs.title),Kt(fs.subtitle||""),Jt(fs.body),or(fs.topic_id),wr(fs.comments_visibility||"public"),Pr((fs.related_topic_ids||[]).filter(hs=>hs!==fs.topic_id)),fs.image_url&&kr(fs.image_url)}catch(ss){console.error("Failed to load post",ss)}}cs()},[Dt,Tt]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-dashboard-bg-light dark:bg-dashboard-bg-dark flex flex-col",children:[jsxRuntimeExports.jsxs("header",{className:`
    sticky top-0 z-20
    h-14
    px-4 sm:px-6
    flex items-center justify-between
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    border-b border-dashboard-border-light dark:border-dashboard-border-dark
  `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>$t(-1),className:"text-sm font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Cancel"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",children:Dt?"Edit Post":"Create Post"}),jsxRuntimeExports.jsx("button",{onClick:Xr,disabled:Mr||!Dt&&Wr&&rs,className:`
      px-3 py-1.5 rounded-md text-sm font-medium
      bg-green text-black
      disabled:opacity-50
    `,children:Mr?"Saving":Dt?"Save":"Post"})]}),jsxRuntimeExports.jsx("main",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-6",children:jsxRuntimeExports.jsxs("div",{className:"mx-auto w-full max-w-3xl space-y-6",children:[!Dt&&!sr&&Zt.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-1 mb-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Topic"}),jsxRuntimeExports.jsxs("select",{value:ir,onChange:cs=>or(cs.target.value),className:`
                w-full p-3 rounded-lg
                bg-dashboard-bg-light dark:bg-dashboard-bg-dark
                border border-dashboard-border-light dark:border-dashboard-border-dark
                text-dashboard-text-light dark:text-dashboard-text-dark
                focus:outline-none focus:ring-2
              `,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select a topic"}),Zt.filter(cs=>!cs.is_locked).map(cs=>jsxRuntimeExports.jsx("option",{value:cs.id,children:cs.name},cs.id))]})]}),(sr||Dt)&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("span",{className:"text-xs uppercase tracking-wide text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Posting in"}),jsxRuntimeExports.jsx("div",{className:`
        mt-1 inline-flex items-center px-3 py-1 rounded-full
        bg-dashboard-hover-light dark:bg-dashboard-hover-dark
        text-sm font-medium
        text-dashboard-text-light dark:text-dashboard-text-dark
      `,children:nr||(zr==null?void 0:zr.name)})]}),jsxRuntimeExports.jsx(CommentVisibilityDropdown,{value:br,onChange:wr}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:`
              text-sm font-medium
              text-dashboard-text-light
              dark:text-dashboard-text-dark
            `,children:"Title"}),jsxRuntimeExports.jsx("input",{value:Ft,onChange:cs=>Ut(cs.target.value),placeholder:"Give your post a clear title",className:`
              w-full p-3 rounded-lg
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
              placeholder:text-dashboard-muted-light
              dark:placeholder:text-dashboard-muted-dark
              focus:outline-none focus:ring-2 focus:ring-green
            `})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 mt-4",children:[jsxRuntimeExports.jsx("label",{className:`
              text-sm font-medium
              text-dashboard-text-light
              dark:text-dashboard-text-dark
            `,children:"Subtitle (optional)"}),jsxRuntimeExports.jsx("input",{value:Ht,onChange:cs=>Kt(cs.target.value),placeholder:"Add context or a short summary",className:`
              w-full p-3 rounded-lg
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
              placeholder:text-dashboard-muted-light
              dark:placeholder:text-dashboard-muted-dark
              focus:outline-none focus:ring-2 focus:ring-green
            `})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 md:mt-8",children:xr?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:xr,className:`
                w-full max-h-[240px] object-cover rounded-lg
                border border-dashboard-border-light dark:border-dashboard-border-dark
              `}),jsxRuntimeExports.jsx("button",{onClick:()=>{Rr(null),kr(null)},className:`
                absolute top-2 right-2
                px-2 py-1 text-xs rounded
                bg-black/60 text-white
                hover:opacity-80
              `,children:"Remove"})]}):jsxRuntimeExports.jsxs("label",{className:`
              flex flex-col items-center justify-center gap-2
              w-full p-6 cursor-pointer rounded-lg
              border border-dashed border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-muted-light dark:text-dashboard-muted-dark
              hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
              transition
            `,children:[jsxRuntimeExports.jsx(Image$2,{size:28,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Add Image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:cs=>{const ss=cs.target.files[0];ss&&(Rr(ss),kr(URL.createObjectURL(ss)))}})]})}),!Dt&&jsxRuntimeExports.jsxs("div",{className:`
              mb-3
              rounded-lg
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              px-4 py-3
              text-xs sm:text-sm
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
              space-y-2
            `,children:[jsxRuntimeExports.jsx("p",{children:"This community works best when people show up as themselves. Share something real, ask a genuine question, or offer a perspective that might help someone else."}),jsxRuntimeExports.jsx("p",{className:"opacity-80",children:"This isnt a place for quick promos or low-effort posts. Those may be removed so the space stays thoughtful and worth showing up for."})]}),jsxRuntimeExports.jsxs("div",{className:`
    -mt-2
    mb-2
    text-xs
    text-dashboard-muted-light
    dark:text-dashboard-muted-dark
    flex items-center gap-1
  `,children:[jsxRuntimeExports.jsx("span",{className:"opacity-80",children:"Tip, you can mention other writers by typing"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:"@username"})]}),jsxRuntimeExports.jsx(CommunityPostEditor,{ref:kt,value:Yt,onChange:Jt,onMention:ns}),pr&&dr.length>0&&jsxRuntimeExports.jsx("div",{className:`
      relative
      z-50
      mt-2
      w-full
      max-h-56
      overflow-y-auto
      rounded-xl
      border
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      shadow-2xl
    `,children:dr.map(cs=>{var ss,fs;return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>gs(cs.username),className:`
                  w-full
                  flex
                  items-center
                  gap-3
                  px-3
                  py-2
                  text-left
                  hover:bg-dashboard-hover-light
                  dark:hover:bg-dashboard-hover-dark
                  transition
                `,children:[cs.profile_image_url?jsxRuntimeExports.jsx("img",{src:cs.profile_image_url,alt:cs.username,className:"w-7 h-7 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-xs font-semibold",children:(fs=(ss=cs.username)==null?void 0:ss.charAt(0))==null?void 0:fs.toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:["@",cs.username]})]},cs.id)})}),!Dt&&Wr&&rs&&jsxRuntimeExports.jsxs("div",{className:`
              mt-3
              rounded-lg
              border border-dashboard-border-light
              dark:border-dashboard-border-dark
              bg-dashboard-hover-light
              dark:bg-dashboard-hover-dark
              px-4 py-3
              text-sm
              text-dashboard-muted-light
              dark:text-dashboard-muted-dark
            `,children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Keep going  longer posts work best here."}),jsxRuntimeExports.jsxs("p",{className:"mt-1 opacity-80",children:["Posts need at least ",es," words. Short pieces belong as fragments."]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>$t("/community/fragments/create"),className:"mt-2 text-green text-sm font-medium hover:underline",children:"Post a fragment "})]}),_r.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("span",{className:"text-xs uppercase tracking-wide text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Tags"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:_r.map(cs=>{const ss=Zt.find(fs=>fs.id===cs);return ss?jsxRuntimeExports.jsxs("span",{className:`
              inline-flex items-center gap-1
              px-2.5 py-1
              rounded-full
              text-xs font-medium
              bg-dashboard-hover-light dark:bg-dashboard-hover-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
            `,children:[ss.name,jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Pr(fs=>fs.filter(hs=>hs!==cs)),className:"opacity-60 hover:opacity-100",children:""})]},cs):null})})]}),!Dt&&Zt.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6 space-y-2",children:[jsxRuntimeExports.jsx("label",{className:`
                text-sm font-medium
                text-dashboard-text-light
                dark:text-dashboard-text-dark
              `,children:"Related topics (optional)"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:["Help readers find this post. Choose up to ",Or,"."]}),jsxRuntimeExports.jsx("p",{className:"text-[11px] italic text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Related topics are locked after publishing to keep discovery consistent."}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Zt.filter(cs=>!cs.is_locked&&cs.id!==Hr).map(cs=>{const ss=_r.includes(cs.id);return jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Pr(fs=>ss?fs.filter(hs=>hs!==cs.id):fs.length>=Or?(y$4.info(`You can select up to ${Or} related topics`),fs):[...fs,cs.id])},className:`
                         px-3 py-1.5 rounded-full text-xs font-medium transition
                        ${ss?"bg-green text-black":"border border-dashboard-border-light dark:border-dashboard-border-dark text-dashboard-text-light dark:text-dashboard-text-dark"}
                      `,children:cs.name},cs.id)})})]})]})})]})}function CommunitySubscribers(){const et=useNavigate(),{userId:dt}=useParams(),{user:$t}=useAuth(),kt=dt??$t.id,[Tt,Dt]=reactExports.useState(!0),[Ft,Ut]=reactExports.useState([]);reactExports.useEffect(()=>{Dt(!0),Ht()},[dt]);async function Ht(){try{const Kt=dt?`/community/subscriptions/authors/${kt}/subscribers`:"/community/subscriptions/all-user-subscribers",Yt=await axiosInstance.get(Kt);Ut(Yt.data.subscribers||[])}catch(Kt){console.error("Failed to load subscribers",Kt),y$4.error("Failed to load subscribers")}finally{Dt(!1)}}return Tt?jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"Loading subscribers"}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-0 py-14 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{et(dt?`/community/authors/${dt}`:"/community/profile")},className:"flex items-center gap-1 text-sm opacity-70 hover:opacity-100 transition",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),"Back"]}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Subscribers"})]}),Ft.length===0&&jsxRuntimeExports.jsx("div",{className:"opacity-60 text-sm",children:dt?"This author doesnt have any subscribers yet.":"You dont have any subscribers yet."}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Ft.map(Kt=>{var Yt;return jsxRuntimeExports.jsxs("button",{onClick:()=>{if(!Kt.has_profile){y$4.info("This user hasnt set up a profile yet");return}et(`/community/authors/${Kt.id}`)},className:`
                w-full
                flex items-center gap-4
                p-4
                rounded-xl
                text-left
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                transition
              `,children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-dashboard-hover-light dark:bg-dashboard-hover-dark flex items-center justify-center",children:Kt.profile_image_url?jsxRuntimeExports.jsx("img",{src:Kt.profile_image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold opacity-50",children:(Yt=Kt.name)==null?void 0:Yt.charAt(0)})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:Kt.name}),Kt.has_subscription===1&&jsxRuntimeExports.jsxs("span",{title:"Paid supporter",className:`
                      inline-flex items-center gap-1
                      px-2 py-0.5
                      rounded-full
                      text-[10px]
                      font-semibold
                      bg-green/10
                      text-green
                      border border-green/30
                      tracking-wide
                    `,children:[jsxRuntimeExports.jsx(Crown,{size:12}),"Paid"]})]}),Kt.username&&jsxRuntimeExports.jsxs("span",{className:"text-xs opacity-60",children:["@",Kt.username]})]})]},Kt.id)})})]})})}function getShareUrl(et,dt="post"){return dt==="fragment"?`${window.location.origin}/community/fragments/${et.id}`:`${window.location.origin}/p/${et.slug}`}function Saved(){const et=useNavigate(),[dt,$t]=reactExports.useState([]),[kt,Tt]=reactExports.useState(!0),[Dt,Ft]=reactExports.useState(1),[Ut,Ht]=reactExports.useState(!0),[Kt,Yt]=reactExports.useState(null);reactExports.useEffect(()=>{Jt()},[]);async function Jt(){if(Ut)try{Tt(!0);const nr=await axiosInstance.get(`/community/saved-user-bookmarks?page=${Dt}`);$t(ir=>[...ir,...nr.data.posts||[]]),nr.data.nextPage?Ft(nr.data.nextPage):Ht(!1)}catch(nr){console.error("Failed to load saved posts:",nr)}finally{Tt(!1)}}async function Zt(nr){try{await axiosInstance.post(`/community/posts/${nr}/view`)}catch{}et(`/community/post/${nr}`)}const er=async(nr,ir)=>{if(nr.preventDefault(),nr.stopPropagation(),!ir)return;const or=getShareUrl(ir,"post");try{await navigator.clipboard.writeText(or),Yt(ir.id),setTimeout(()=>Yt(null),1500)}catch{toast.error("Failed to copy link")}},rr=async(nr,ir)=>{nr.stopPropagation();try{ir.has_liked?(await axiosInstance.delete(`/community/${ir.id}/like`),$t(or=>or.map(lr=>lr.id===ir.id?{...lr,has_liked:0,like_count:Math.max((lr.like_count||1)-1,0)}:lr))):(await axiosInstance.post(`/community/${ir.id}/like`),$t(or=>or.map(lr=>lr.id===ir.id?{...lr,has_liked:1,like_count:(lr.like_count||0)+1}:lr)))}catch{toast.error("Failed to update like")}};function sr(nr){return nr.is_owner===1?!1:nr.comments_locked===1||nr.comments_visibility==="paid"||nr.comments_visibility==="private"&&nr.is_subscribed!==1}return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto",children:jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"Saved"})})}),jsxRuntimeExports.jsxs("div",{className:"px-0 py-4 pb-24 max-w-3xl mx-auto space-y-2",children:[kt&&dt.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading saved posts"}),!kt&&dt.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Posts you save to read later will show up here."}),dt.map(nr=>jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx(MobilePostCard,{post:nr,onOpen:()=>Zt(nr.id),onLike:ir=>rr(ir,nr),onShare:ir=>er(ir,nr),isCommentsLocked:sr(nr),copiedPostId:Kt})}),jsxRuntimeExports.jsx("div",{className:`
        hidden md:block
        px-4 py-4 sm:px-6
        rounded-lg
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        bg-dashboard-sidebar-light
        dark:bg-dashboard-sidebar-dark
        hover:bg-dashboard-hover-light
        dark:hover:bg-dashboard-hover-dark
        transition
        cursor-pointer
      `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-6 items-start",children:[jsxRuntimeExports.jsxs("div",{onClick:()=>Zt(nr.id),className:"min-w-0 cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[nr.author_image?jsxRuntimeExports.jsx("img",{src:nr.author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:nr.author}),jsxRuntimeExports.jsx("div",{className:"text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:timeAgo(nr.created_at)})]})]}),jsxRuntimeExports.jsx("h3",{className:`
              text-base sm:text-lg font-semibold
              text-dashboard-text-light dark:text-dashboard-text-dark
              line-clamp-2
              mb-1
            `,children:nr.title}),nr.subtitle&&jsxRuntimeExports.jsx("p",{className:`
                text-sm
                text-dashboard-muted-light
                dark:text-dashboard-muted-dark
                line-clamp-2
                mb-3
              `,children:nr.subtitle}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx(Eye,{size:14,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:nr.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:ir=>rr(ir,nr),className:"flex items-center gap-1.5 hover:opacity-80 transition",children:[jsxRuntimeExports.jsx(Heart,{size:14,className:nr.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:nr.like_count??0})]}),jsxRuntimeExports.jsxs("button",{onClick:ir=>{ir.stopPropagation(),Zt(nr.id)},className:"flex items-center gap-1.5 hover:opacity-80 transition",children:[sr(nr)?jsxRuntimeExports.jsx(MessageSquareLock,{size:14,className:"opacity-70"}):jsxRuntimeExports.jsx(MessageSquare,{size:14,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:nr.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:ir=>er(ir,nr),className:"flex items-center gap-1.5 hover:opacity-80 transition",children:Kt===nr.id?jsxRuntimeExports.jsx(Check,{size:14,className:"text-green-500"}):jsxRuntimeExports.jsx(Share2,{size:14,className:"opacity-70"})})]})]}),jsxRuntimeExports.jsx("div",{className:`
            w-16 h-16
            rounded-lg
            overflow-hidden
            flex-shrink-0
            bg-dashboard-hover-light
            dark:bg-dashboard-hover-dark
          `,children:nr.image_url?jsxRuntimeExports.jsx("img",{src:nr.image_url,alt:"",className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase opacity-70",children:"No image"})})})]})})]},nr.id)),Ut&&!kt&&jsxRuntimeExports.jsx("button",{onClick:Jt,className:"w-full py-3 text-sm opacity-60 hover:opacity-100 transition",children:"Load more"})]})]})}function CreateFragment(){const dt=reactExports.useRef(null),$t=useNavigate(),[kt]=useSearchParams(),Tt=kt.get("reshare"),[Dt,Ft]=reactExports.useState(""),[Ut,Ht]=reactExports.useState(null),[Kt,Yt]=reactExports.useState(null),[Jt,Zt]=reactExports.useState(!1),[er,rr]=reactExports.useState(null),[sr,nr]=reactExports.useState([]),[ir,or]=reactExports.useState(!1),[lr,cr]=reactExports.useState(""),{fragmentId:dr}=useParams(),ur=!!dr,pr=!!Tt&&!ur,mr=async()=>{const kr=Dt.trim();if(!kr&&!pr){y$4.error("Fragment cannot be empty");return}if(kr.length>500){y$4.error("Fragments must be 500 characters or less");return}try{Zt(!0);let Mr=null;if(Ut){const Tr=new FormData;Tr.append("image",Ut),Mr=(await axiosInstance.post("/community/upload-image",Tr,{headers:{"Content-Type":"multipart/form-data"}})).data.image_url}ur?await axiosInstance.put(`/fragments/${dr}`,{body:Dt,image_url:Mr}):await axiosInstance.post("/fragments",{body:Dt,image_url:Mr,reshareFragmentId:pr?Tt:null}),y$4.success("Fragment published"),$t("/community")}catch(Mr){console.error("Failed to create fragment:",Mr),y$4.error("Failed to publish fragment")}finally{Zt(!1)}};reactExports.useEffect(()=>{if(!pr)return;async function kr(){try{const Mr=await axiosInstance.get(`/fragments/${Tt}`);rr(Mr.data.fragment)}catch{y$4.error("Original fragment not found"),$t("/community")}}kr()},[pr,Tt]);const jr=()=>{$t(ur?"/community/my-fragments":"/community")};reactExports.useEffect(()=>{if(!ur)return;async function kr(){try{const Tr=(await axiosInstance.get(`/fragments/${dr}`)).data.fragment;if(Tr.reshared_id&&rr({id:Tr.reshared_id,body:Tr.reshared_body,created_at:Tr.reshared_created_at,author:Tr.reshared_author,author_image:Tr.reshared_author_image,author_is_verified:Tr.reshared_author_is_verified}),Ft(Tr.body||""),Yt(Tr.image_url||null),Tr.reshare_fragment_id){const Or=await axiosInstance.get(`/fragments/${Tr.reshare_fragment_id}`);rr(Or.data.fragment)}}catch(Mr){console.error("Failed to load fragment:",Mr),$t("/community/my-fragments")}}kr()},[dr,ur]);const Rr=async kr=>{const Mr=kr.target.value,Tr=kr.target.selectionStart;Mr.length<=500&&Ft(Mr);const _r=Mr.slice(Math.max(0,Tr-50),Tr).match(/@([a-zA-Z0-9_]*)$/);if(!_r){or(!1),nr([]);return}const Pr=_r[1];if(/\s/.test(Pr)){or(!1);return}if(cr(Pr),!(Pr.length<1))try{const br=await axiosInstance.get(`/community/users/search?query=${Pr}`);nr(br.data.users||[]),or(!0)}catch(br){console.error(" fragment mention search failed:",br),or(!1)}},xr=kr=>{const Mr=dt.current;if(!Mr)return;const Tr=Mr.selectionStart,_r=Dt.slice(0,Tr).match(/@([a-zA-Z0-9_]*)$/);if(!_r)return;const Pr=Tr-_r[0].length,br=Dt.slice(0,Pr),wr=Dt.slice(Tr),zr=`${br}@${kr} ${wr}`;Ft(zr),or(!1),nr([]),cr(""),requestAnimationFrame(()=>{const Hr=Pr+kr.length+2;Mr.setSelectionRange(Hr,Hr),Mr.focus()})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen w-full bg-dashboard-bg-light dark:bg-dashboard-bg-dark flex flex-col",children:[jsxRuntimeExports.jsxs("header",{className:`
          sticky top-0 z-20
          h-14
          px-4 sm:px-6
          flex items-center justify-between
          bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
          border-b border-dashboard-border-light dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:jr,className:"text-sm font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:"Cancel"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",children:ur?"Edit Fragment":pr?"Reshare Fragment":"Post Fragment"}),jsxRuntimeExports.jsx("button",{onClick:mr,disabled:Jt,className:`
    hidden sm:inline-flex
    px-3 py-1.5
    rounded-md
    text-sm font-medium
    bg-green text-black
    disabled:opacity-50
  `,children:Jt?"Saving":ur?"Save Changes":"Post Fragment"})]}),jsxRuntimeExports.jsxs("main",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-6",children:[jsxRuntimeExports.jsx("div",{className:"mx-auto w-full max-w-3xl space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("label",{className:`
                text-sm font-medium
                text-dashboard-text-light
                dark:text-dashboard-text-dark
              `,children:pr?"Add a thought (optional)":"Fragment"}),jsxRuntimeExports.jsx("textarea",{ref:dt,value:Dt,onChange:Rr,placeholder:"Write a thought, a line, or something unfinished use @ to mention other users in your fragment",rows:6,className:`
              w-full p-4 rounded-lg
              bg-dashboard-bg-light dark:bg-dashboard-bg-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              text-dashboard-text-light dark:text-dashboard-text-dark
              placeholder:text-dashboard-muted-light
              dark:placeholder:text-dashboard-muted-dark
              focus:outline-none focus:ring-2 focus:ring-green
              resize-y
            `}),ir&&sr.length>0&&jsxRuntimeExports.jsx("div",{className:`
      relative
      z-50
      mt-2
      w-full
      max-h-56
      overflow-y-auto
      rounded-xl
      border
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      border-dashboard-border-light
      dark:border-dashboard-border-dark
      shadow-2xl
    `,children:sr.map(kr=>{var Mr,Tr;return jsxRuntimeExports.jsxs("button",{type:"button",onMouseDown:Or=>{Or.preventDefault(),xr(kr.username)},onTouchStart:Or=>{Or.preventDefault(),xr(kr.username)},className:`
                    w-full
                    flex
                    items-center
                    gap-3
                    px-3
                    py-2
                    text-left
                    hover:bg-dashboard-hover-light
                    dark:hover:bg-dashboard-hover-dark
                    transition
                  `,children:[kr.profile_image_url?jsxRuntimeExports.jsx("img",{src:kr.profile_image_url,alt:kr.username,className:"w-7 h-7 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-xs font-semibold bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:(Tr=(Mr=kr.username)==null?void 0:Mr.charAt(0))==null?void 0:Tr.toUpperCase()}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium",children:["@",kr.username]})]},kr.id)})}),jsxRuntimeExports.jsxs("div",{className:`flex justify-end text-xs ${Dt.length>=500?"text-red-500":"text-dashboard-muted-light dark:text-dashboard-muted-dark"}`,children:[Dt.length,"/",500]}),er&&jsxRuntimeExports.jsxs("div",{className:`
      mt-4
      rounded-lg
      border border-dashboard-border-light
      dark:border-dashboard-border-dark
      bg-dashboard-sidebar-light
      dark:bg-dashboard-sidebar-dark
      p-4
    `,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3",children:[er.author_image?jsxRuntimeExports.jsx("img",{src:er.author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:er.author}),er.author_is_verified===1&&jsxRuntimeExports.jsx(ShieldCheck,{size:14,className:"text-green"})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:timeAgo(er.created_at)})]})]}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",children:er.body})]})]})}),jsxRuntimeExports.jsx("div",{className:`
    sm:hidden
    sticky bottom-0
    w-full
    border-t border-dashboard-border-light dark:border-dashboard-border-dark
    bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
    px-4 py-3
  `,children:jsxRuntimeExports.jsx("button",{onClick:mr,disabled:Jt,className:`
            w-full
            py-3
            rounded-lg
            text-sm font-semibold
            bg-green text-black
            disabled:opacity-50
          `,children:Jt?"Saving":ur?"Save Changes":"Post Fragment"})})]})]})}function MyFragments(){const et=useNavigate(),[dt,$t]=reactExports.useState([]),[kt,Tt]=reactExports.useState(null),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState(""),[Kt,Yt]=reactExports.useState(!1),Jt=reactExports.useRef(null),[Zt,er]=reactExports.useState(!0),rr=reactExports.useRef(0),sr="w-full px-4 py-3 text-sm text-left flex items-center gap-3 transition-colors";reactExports.useEffect(()=>{nr()},[]),reactExports.useEffect(()=>{function lr(){Tt(null)}return window.addEventListener("click",lr),()=>window.removeEventListener("click",lr)},[]);async function nr(){try{Ft(!0);const lr=await axiosInstance.get("/fragments/my-fragments");$t(lr.data.fragments||[])}catch(lr){console.error("Failed to fetch fragments:",lr)}finally{Ft(!1)}}function ir(lr){const cr=y$4(({closeToast:dr})=>jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Delete this fragment?"}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70",children:"This cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[jsxRuntimeExports.jsx("button",{onClick:dr,className:"px-3 py-1.5 text-xs rounded-md border",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:async()=>{try{await axiosInstance.delete(`/fragments/${lr}`),$t(ur=>ur.filter(pr=>pr.id!==lr)),y$4.dismiss(cr),y$4.success("Fragment deleted")}catch{y$4.error("Failed to delete fragment")}},className:"px-3 py-1.5 text-xs rounded-md bg-red-600 text-white",children:"Delete"})]})]}),{closeButton:!1,className:"rounded-xl"})}reactExports.useEffect(()=>{function lr(cr){Jt.current&&!Jt.current.contains(cr.target)&&Yt(!1)}return Kt&&document.addEventListener("click",lr),()=>{document.removeEventListener("click",lr)}},[Kt]),reactExports.useEffect(()=>{function lr(){const cr=window.scrollY;cr>rr.current&&cr>80&&er(!1),cr<rr.current&&er(!0),rr.current=cr}return window.addEventListener("scroll",lr,{passive:!0}),()=>{window.removeEventListener("scroll",lr)}},[]);const or=reactExports.useMemo(()=>{if(!Ut.trim())return dt;const lr=Ut.toLowerCase();return dt.filter(cr=>{var dr,ur;return((dr=cr.body)==null?void 0:dr.toLowerCase().includes(lr))||((ur=cr.author)==null?void 0:ur.toLowerCase().includes(lr))})},[dt,Ut]);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 px-4 py-3 border-b border-dashboard-border-light dark:border-dashboard-border-dark",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"My Fragments"}),jsxRuntimeExports.jsx("button",{onClick:()=>et("/community/fragments/create"),className:`
              hidden md:inline-flex
              px-3 py-2 rounded-lg text-sm font-medium
              bg-dashboard-text-light dark:bg-dashboard-text-dark
              text-dashboard-bg-light dark:text-dashboard-bg-dark
            `,children:"Write Fragment"})]})}),jsxRuntimeExports.jsxs("div",{className:"px-0 py-4 pb-24 max-w-3xl mx-auto space-y-2",children:[Dt&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:"Loading fragments"}),jsxRuntimeExports.jsx("div",{className:"max-w-3xl mx-auto",children:jsxRuntimeExports.jsx("input",{value:Ut,onChange:lr=>Ht(lr.target.value),placeholder:"Search your posts by title or subtitle",className:`
        w-full
        px-4 py-2.5
        rounded-lg
        text-sm
        bg-dashboard-bg-light
        dark:bg-dashboard-bg-dark
        border border-dashboard-border-light
        dark:border-dashboard-border-dark
        text-dashboard-text-light
        dark:text-dashboard-text-dark
        placeholder:text-dashboard-muted-light
        dark:placeholder:text-dashboard-muted-dark
        focus:outline-none
        focus:ring-2
        focus:ring-green
      `})}),!Dt&&or.length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60",children:Ut?"No fragments match your search.":"You havent posted anything yet."}),jsxRuntimeExports.jsx("div",{className:"px-4 py-3"}),or.map(lr=>{var cr,dr;return jsxRuntimeExports.jsx("div",{onClick:()=>et(`/community/fragments/${lr.id}`),className:`
      px-4 py-4 sm:px-6
      rounded-lg
      border border-dashboard-border-light dark:border-dashboard-border-dark
      bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
      hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark
      transition
      cursor-pointer
    `,children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[40px_1fr] gap-3",children:[lr.author_image?jsxRuntimeExports.jsx("img",{src:lr.author_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:`
            w-8 h-8 rounded-full
            bg-dashboard-hover-light dark:bg-dashboard-hover-dark
            flex items-center justify-center
            text-xs font-semibold
            text-dashboard-muted-light dark:text-dashboard-muted-dark
          `,children:(dr=(cr=lr.author)==null?void 0:cr.charAt(0))==null?void 0:dr.toUpperCase()}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-muted-light dark:text-dashboard-muted-dark",children:lr.author}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsx("span",{children:formatDate(lr.created_at)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:timeAgo(lr.created_at)}),lr.updated_at&&new Date(lr.updated_at).getTime()-new Date(lr.created_at).getTime()>6e4&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{className:"italic opacity-50",children:"edited"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:ur=>{ur.stopPropagation(),Tt(kt===lr.id?null:lr.id)},className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:18})}),kt===lr.id&&jsxRuntimeExports.jsxs("div",{onClick:ur=>ur.stopPropagation(),className:`
                  absolute right-0 mt-2 z-30
                  w-56
                  rounded-xl
                  bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
                  border border-dashboard-border-light dark:border-dashboard-border-dark
                  shadow-xl
                  overflow-hidden
                `,children:[jsxRuntimeExports.jsxs("button",{onClick:ur=>{ur.stopPropagation(),Tt(null),et(`/community/fragments/edit/${lr.id}`)},className:`${sr} hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark`,children:[jsxRuntimeExports.jsx(Pencil,{size:16,className:"opacity-80"}),"Edit"]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dashboard-border-light dark:bg-dashboard-border-dark my-1"}),jsxRuntimeExports.jsxs("button",{onClick:ur=>{ur.stopPropagation(),Tt(null),ir(lr.id)},className:`${sr} text-red-500 hover:bg-red-500/10`,children:[jsxRuntimeExports.jsx(Trash2,{size:16}),"Delete"]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-sm leading-relaxed line-clamp-3 text-dashboard-text-light dark:text-dashboard-text-dark",dangerouslySetInnerHTML:{__html:typeof(lr==null?void 0:lr.body)=="string"?lr.body:""}}),lr.reshared_id&&jsxRuntimeExports.jsxs("div",{className:`
                    mt-4
                    rounded-lg
                    border border-dashboard-border-light
                    dark:border-dashboard-border-dark
                    bg-dashboard-sidebar-light
                    dark:bg-dashboard-sidebar-dark
                    p-4
                  `,children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[32px_1fr] gap-3",children:[lr.reshared_author_image?jsxRuntimeExports.jsx("img",{src:lr.reshared_author_image,alt:"",className:"w-7 h-7 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-7 h-7 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[3px]",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-dashboard-text-light dark:text-dashboard-text-dark",children:lr.reshared_author}),lr.reshared_author_is_verified===1&&jsxRuntimeExports.jsx(ShieldCheck,{size:12,className:"text-green"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 text-[11px] text-dashboard-muted-light dark:text-dashboard-muted-dark",children:jsxRuntimeExports.jsx("span",{children:timeAgo(lr.reshared_created_at)})})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-sm leading-relaxed whitespace-pre-wrap text-dashboard-text-light dark:text-dashboard-text-dark",dangerouslySetInnerHTML:{__html:typeof(lr==null?void 0:lr.reshared_body)=="string"?lr.reshared_body:""}})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex items-center gap-6 text-sm sm:text-xs text-dashboard-muted-light dark:text-dashboard-muted-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:lr.views??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:lr.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:lr.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(MessageCircle,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:lr.comment_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Repeat,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:lr.reshare_count??0})]})]})]})]})},lr.id)})]}),jsxRuntimeExports.jsx(MobileCreateFAB,{className:`
    md:hidden
    transition-all duration-200 ease-out
    ${Zt?"opacity-100 translate-y-0":"opacity-0 translate-y-6 pointer-events-none"}
  `,open:Kt,setOpen:Yt,containerRef:Jt,onCreatePost:()=>{Yt(!1),et("/community/create-post")},onCreateFragment:()=>{Yt(!1),et("/community/fragments/create")}})]})}function SubscribeChoicePage(){var Rr,xr,kr,Mr;const{authorId:et}=useParams(),dt=useLocation(),[$t]=useSearchParams(),kt=$t.get("preview")==="1",Tt=useNavigate(),Dt=((Rr=dt.state)==null?void 0:Rr.from)||`/community/authors/${et}`,[Ft,Ut]=reactExports.useState(null),[Ht,Kt]=reactExports.useState(!0),[Yt,Jt]=reactExports.useState(!1),[Zt,er]=reactExports.useState(!1);reactExports.useEffect(()=>{rr()},[]);async function rr(){try{const[Tr,Or]=await Promise.all([axiosInstance.get(`/community/authors/${et}`),axiosInstance.get(`/community/subscriptions/${et}/status`)]);Ut(Tr.data.profile),er(Or.data.has_paid_subscription)}catch{y$4.error("Failed to load author"),Tt(Dt)}finally{Kt(!1)}}const sr=!!(Ft!=null&&Ft.monthly_price),nr=!!(Ft!=null&&Ft.annual_price),ir=typeof(Ft==null?void 0:Ft.vip_price)=="number",or=typeof(Ft==null?void 0:Ft.vip_price)=="number"?Ft.vip_price:null,lr=typeof(Ft==null?void 0:Ft.monthly_price)=="number"?Ft.monthly_price:null,cr=typeof(Ft==null?void 0:Ft.annual_price)=="number"?Ft.annual_price:null,dr=lr&&cr?cr/12:null,ur=lr&&cr?lr*12-cr:null,pr=ur!==null&&ur>0;async function mr(){if(!Yt){Jt(!0);try{await axiosInstance.post(`/community/subscriptions/${et}/subscribe`),y$4.success("Subscribed"),Tt(Dt)}catch{y$4.error("Failed to subscribe")}finally{Jt(!1)}}}async function jr(Tr){if(!Yt){Jt(!0);try{const Or=await axiosInstance.post("/seller-checkout/create-author-subscription-checkout",{authorUserId:et,billingInterval:Tr});window.location.href=Or.data.url}catch{y$4.error("Failed to start checkout"),Jt(!1)}}}return Ht?jsxRuntimeExports.jsx("div",{className:"p-10 text-center opacity-60",children:"Loading subscription options"}):Ft?jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-0 py-10 space-y-8",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>{if(kt){window.close();return}Tt(Dt)},className:"flex items-center gap-2 text-sm opacity-70 hover:opacity-100",children:[jsxRuntimeExports.jsx(ArrowLeft,{size:16}),kt?"Close preview":"Back"]}),jsxRuntimeExports.jsxs("div",{className:"text-center space-y-3",children:[jsxRuntimeExports.jsx("img",{src:Ft.profile_image_url||defaultImage,alt:Ft.name,className:"w-20 h-20 rounded-full mx-auto object-cover"}),jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-semibold",children:["Subscribe to ",Ft.name]}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-70 max-w-md mx-auto",children:"Choose how youd like to follow and support this writer."})]}),kt&&jsxRuntimeExports.jsx("div",{className:"rounded-lg border border-yellow-300 bg-yellow-50 text-yellow-800 px-4 py-2 text-sm text-center",children:"Youre previewing your subscription page as others see it."}),jsxRuntimeExports.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-6 space-y-4 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Free"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm space-y-2 opacity-80",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," New public post"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Comment and engage"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Send tips"]})]}),jsxRuntimeExports.jsx("button",{type:"button",disabled:Yt,onClick:mr,className:`
            w-full mt-4 py-3 rounded-lg
            border
            transition
            flex items-center justify-center gap-2
            ${Yt?"opacity-70 cursor-not-allowed":"hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark"}
          `,children:Yt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ButtonSpinner,{size:16}),"Subscribing"]}):"Subscribe for free"})]}),sr&&jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-6 space-y-4 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Monthly"}),jsxRuntimeExports.jsx("ul",{className:"text-sm space-y-2 opacity-80",children:((xr=Ft.monthly_benefits)==null?void 0:xr.length)>0?Ft.monthly_benefits.map((Tr,Or)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"mt-[2px] shrink-0"}),Tr]},Or)):jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Support the writer"]})}),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Yt,onClick:()=>jr("monthly"),className:`
              w-full mt-4 py-3 rounded-lg
              bg-blue text-white
              hover:opacity-90
              transition
            `,children:["Subscribe  $",Ft.monthly_price.toFixed(2)]})]}),nr&&jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-6 space-y-4 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["Annual",jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-green/10 text-green",children:"Best value"})]}),jsxRuntimeExports.jsx("ul",{className:"text-sm space-y-2 opacity-80",children:((kr=Ft.annual_benefits)==null?void 0:kr.length)>0?Ft.annual_benefits.map((Tr,Or)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"mt-[2px] shrink-0"}),Tr]},Or)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Everything in Monthly"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Save with annual billing"]})]})}),dr&&jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-70",children:["$",dr.toFixed(2),"/month, billed annually"]}),pr&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green",children:["Save $",ur.toFixed(2)," per year"]}),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Yt,onClick:()=>jr("annual"),className:`
              w-full mt-4 py-3 rounded-lg
              bg-blue/90 text-white
              hover:opacity-90
              transition
            `,children:["Subscribe  $",Ft.annual_price.toFixed(2)]})]}),ir&&jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-6 space-y-4 bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["VIP Founder",jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-500/10 text-brightPurple",children:"Limited"})]}),jsxRuntimeExports.jsx("ul",{className:"text-sm space-y-2 opacity-80",children:((Mr=Ft.vip_benefits)==null?void 0:Mr.length)>0?Ft.vip_benefits.map((Tr,Or)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14,className:"mt-[2px] shrink-0"}),Tr]},Or)):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Founder level access"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{size:14})," Direct support of the writer"]})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70",children:"Billed annually"}),jsxRuntimeExports.jsxs("button",{type:"button",disabled:Yt,onClick:()=>jr("vip"),className:`
        w-full mt-4 py-3 rounded-lg
        bg-brightPurple text-white
        hover:opacity-90
        transition
      `,children:["Subscribe  $",or.toFixed(2)]})]})]})]}):jsxRuntimeExports.jsx("div",{className:"p-10 text-center opacity-60",children:"Author not found"})}const GRID_COLS="grid-cols-[2.5fr_120px_160px_48px]";function MySubscriptions(){const et=useNavigate(),[dt,$t]=reactExports.useState(null),[kt,Tt]=reactExports.useState(""),[Dt,Ft]=reactExports.useState([]),[Ut,Ht]=reactExports.useState(!0),[Kt,Yt]=reactExports.useState(!1),[Jt,Zt]=reactExports.useState(null);function er(or){$t(lr=>lr===or?null:or)}function rr(or){return new Date(or).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}async function sr(){try{Ht(!0);const or=await axiosInstance.get("/community/subscriptions/my");Ft(or.data.subscriptions||[])}catch(or){console.error("Failed to fetch subscriptions",or),y$4.error("Failed to load subscriptions")}finally{Ht(!1)}}reactExports.useEffect(()=>{sr()},[]);const nr=Dt.filter(or=>or.author_name.toLowerCase().includes(kt.toLowerCase())||or.author_username.toLowerCase().includes(kt.toLowerCase()));function ir(or){et(`/subscriptions/${or.author_user_id}/cancel`,{state:or})}return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-20 border-b border-dashboard-border-light dark:border-dashboard-border-dark px-4 py-3",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold",children:"My Subscriptions"}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60",children:[Dt.length," active subscription",Dt.length!==1?"s":""]})]})}),jsxRuntimeExports.jsx("div",{className:"px-4 py-4 max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-50"}),jsxRuntimeExports.jsx("input",{value:kt,onChange:or=>Tt(or.target.value),placeholder:"Search by author...",autoComplete:"off",autoCorrect:"off",spellCheck:!1,className:`
              w-full pl-9 pr-3 py-2 rounded-lg text-sm
              bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
              border border-dashboard-border-light dark:border-dashboard-border-dark
              outline-none
            `})]})}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block px-4 max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:`
          grid ${GRID_COLS}
          items-center
          px-4 py-3
          text-xs font-medium
          text-white/50
          bg-dashboard-hover-light
          dark:bg-dashboard-hover-dark
          rounded-t-xl
          border
          border-dashboard-border-light
          dark:border-dashboard-border-dark
        `,children:[jsxRuntimeExports.jsx("div",{children:"Author"}),jsxRuntimeExports.jsx("div",{children:"Plan"}),jsxRuntimeExports.jsx("div",{children:"Renews"}),jsxRuntimeExports.jsx("div",{})]}),jsxRuntimeExports.jsx("div",{className:"space-y-1 mt-1",children:nr.map(or=>{const lr=or.paid_subscription===1;return jsxRuntimeExports.jsxs("div",{className:`
                grid ${GRID_COLS}
                items-center
                px-4 py-3
                rounded-xl
                bg-dashboard-sidebar-light
                dark:bg-dashboard-sidebar-dark
                border
                border-dashboard-border-light
                dark:border-dashboard-border-dark
                hover:bg-dashboard-hover-light
                dark:hover:bg-dashboard-hover-dark
                transition
              `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>et(`/community/authors/${or.author_user_id}`),className:"flex-shrink-0",children:or.author_image_url?jsxRuntimeExports.jsx("img",{src:or.author_image_url,alt:or.author_name,className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark flex items-center justify-center text-xs",children:or.author_name.charAt(0)})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium truncate",children:or.author_name}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-60 truncate",children:["@",or.author_username]})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${or.paid_subscription?or.type==="monthly"?"bg-green/20 text-green":or.type==="annual"?"bg-blue/20 text-blue":"bg-purple/20 text-purple":"bg-gray-500/20 text-gray-400"}`,children:or.paid_subscription?or.type==="monthly"?"Monthly":or.type==="annual"?"Annual":"VIP":"Free"})}),jsxRuntimeExports.jsx("div",{className:"text-sm opacity-70",children:or.paid_subscription?or.cancel_at_period_end?`Ends ${rr(or.current_period_end)}`:"Renews monthly":""}),jsxRuntimeExports.jsxs("div",{onClick:cr=>cr.stopPropagation(),className:"relative flex justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>er(or.id),className:"p-2 rounded-md hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:jsxRuntimeExports.jsx(Ellipsis,{size:16})}),dt===or.id&&jsxRuntimeExports.jsxs("div",{className:`
                    absolute right-0 top-10
                    w-44
                    rounded-xl
                    shadow-xl
                    z-50
                    bg-dashboard-sidebar-light
                    dark:bg-dashboard-sidebar-dark
                    border
                    border-dashboard-border-light
                    dark:border-dashboard-border-dark
                  `,children:[jsxRuntimeExports.jsx("button",{onClick:()=>{$t(null),et(`/community/authors/${or.author_user_id}`)},className:"w-full px-4 py-2 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"View author"}),lr&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("button",{onClick:()=>{$t(null),Zt(or),Yt(!0)},className:"w-full px-4 py-2 text-sm text-left text-red-500 hover:bg-red-500/10",children:"Cancel subscription"})})]})]})]},or.id)})}),dt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>$t(null)})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden px-4 space-y-3",children:nr.map(or=>{const lr=or.paid_subscription===1;return jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-xl border border-dashboard-border-light dark:border-dashboard-border-dark bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>et(`/community/authors/${or.author_user_id}`),children:or.author_image_url?jsxRuntimeExports.jsx("img",{src:or.author_image_url,alt:or.author_name,className:"w-8 h-8 rounded-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-dashboard-hover-light dark:bg-dashboard-hover-dark flex items-center justify-center text-xs",children:or.author_name.charAt(0)})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"font-medium truncate",children:or.author_name}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-60",children:or.paid_subscription?`${or.type==="monthly"?"Monthly":or.type==="annual"?"Annual":"VIP"}  ${or.cancel_at_period_end?`Ends ${rr(or.current_period_end)}`:"Renews monthly"}`:"Free"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>er(or.id),className:"w-full py-2 rounded-lg bg-dashboard-hover-light dark:bg-dashboard-hover-dark text-sm flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Ellipsis,{size:16}),"Options"]}),dt===or.id&&jsxRuntimeExports.jsxs("div",{className:"mt-2 rounded-xl overflow-hidden border border-dashboard-border-light dark:border-dashboard-border-dark",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{$t(null),et(`/community/authors/${or.author_user_id}`)},className:"w-full px-4 py-3 text-sm text-left hover:bg-dashboard-hover-light dark:hover:bg-dashboard-hover-dark",children:"View author"}),lr&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("button",{onClick:()=>{$t(null),Zt(or),Yt(!0)},className:"w-full px-4 py-2 text-sm text-left text-red-500 hover:bg-red-500/10",children:"Cancel subscription"})})]})]})]},or.id)})}),Ut&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-60 px-4 py-6",children:"Loading subscriptions"}),Kt&&Jt&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-sm rounded-xl bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:"Cancel subscription?"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm opacity-70",children:"Youll keep access until the end of the current billing period."}),jsxRuntimeExports.jsxs("div",{className:"mt-6 flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Yt(!1),className:"flex-1 py-2 rounded-lg border",children:"Keep subscription"}),jsxRuntimeExports.jsx("button",{onClick:()=>{ir(Jt),Yt(!1),Zt(null)},className:"flex-1 py-2 rounded-lg bg-red-600 text-white",children:"Cancel anyway"})]})]})})]})}function PublicationHeader({profile:et}){return et?jsxRuntimeExports.jsxs("div",{className:"mb-10 text-center sm:text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-center gap-3 sm:gap-4 pb-6",children:[et.publication_logo_url&&jsxRuntimeExports.jsx("img",{src:et.publication_logo_url,alt:"Publication logo",className:`
              w-12 h-12
              rounded-lg
              object-cover
              opacity-95
            `}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold leading-tight",children:et.publication_name||et.name})]}),et.publication_tagline&&jsxRuntimeExports.jsx("p",{className:"mt-2 opacity-70 max-w-xl mx-auto sm:mx-0",children:et.publication_tagline})]}):null}function PublicationListItem({post:et,authorName:dt,authorId:$t,onLike:kt,onShare:Tt,copiedPostId:Dt}){return jsxRuntimeExports.jsx(Link$2,{to:`/community/post/${et.id}`,state:{returnTo:`/community/authors/${$t}/publication`},className:"block hover:opacity-90 transition",children:jsxRuntimeExports.jsxs("article",{className:`
          rounded-2xl
          bg-dashboard-sidebar-light dark:bg-dashboard-sidebar-dark
          border border-dashboard-border-light dark:border-dashboard-border-dark
          p-4

          sm:border-none sm:bg-transparent sm:p-0 sm:rounded-none
        `,children:[jsxRuntimeExports.jsxs("div",{className:`
            flex flex-col gap-4

            sm:grid
            sm:grid-cols-[1fr_96px]
            sm:gap-6
            sm:items-start
          `,children:[et.image_url&&jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:`
                w-full
                h-[180px]
                rounded-xl
                object-cover

                sm:hidden
              `}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold leading-snug",children:et.title}),et.subtitle&&jsxRuntimeExports.jsx("p",{className:"text-sm opacity-70 mt-1 leading-relaxed",children:et.subtitle}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-50 mt-2",children:[new Date(et.created_at).toLocaleDateString(),"  ",dt]})]}),et.image_url?jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:`
                hidden sm:block
                w-[96px]
                h-[96px]
                rounded-xl
                object-cover
                justify-self-end
              `}):jsxRuntimeExports.jsx("div",{className:"hidden sm:block w-[96px]"})]}),jsxRuntimeExports.jsx("div",{className:`
    mt-3
    pt-3
    border-t
    border-dashboard-border-light
    dark:border-dashboard-border-dark

    flex items-center justify-between
    text-sm sm:text-xs
    text-dashboard-muted-light
    dark:text-dashboard-muted-dark

    sm:hidden
  `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:Ft=>{Ft.preventDefault(),Ft.stopPropagation(),kt(Ft,et)},className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:et.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(MessageSquare,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:Ft=>{Ft.preventDefault(),Ft.stopPropagation(),Tt(Ft,et)},className:"flex items-center gap-[4px]",children:Dt===et.id?jsxRuntimeExports.jsx(Check,{size:16,className:"text-green"}):jsxRuntimeExports.jsx(Share2,{size:16,className:"opacity-70"})})]})})]})})}function FeaturedPost({post:et,authorName:dt,authorId:$t,onLike:kt,onShare:Tt,copiedPostId:Dt}){const Ft=`/community/authors/${$t}/publication`;return jsxRuntimeExports.jsxs("article",{className:"space-y-5",children:[et.image_url&&jsxRuntimeExports.jsx(Link$2,{to:`/community/post/${et.id}`,state:{returnTo:Ft},className:"block group",children:jsxRuntimeExports.jsx("img",{src:et.image_url,alt:"",className:`
              w-full
              h-[220px] sm:h-[300px] lg:h-[420px]
              object-cover
              rounded-2xl
              transition
              group-hover:opacity-95
            `})}),jsxRuntimeExports.jsx(Link$2,{to:`/community/post/${et.id}`,state:{returnTo:Ft},className:"block w-fit",children:jsxRuntimeExports.jsx("h2",{className:`
            text-xl sm:text-2xl lg:text-3xl
            font-semibold
            leading-tight
            hover:underline
          `,children:et.title})}),et.subtitle&&jsxRuntimeExports.jsx("p",{className:"text-sm sm:text-base opacity-70",children:et.subtitle}),jsxRuntimeExports.jsxs("p",{className:"text-xs opacity-50",children:[new Date(et.created_at).toLocaleDateString(),"  ",dt]}),jsxRuntimeExports.jsx("div",{className:`
    pt-3
    border-t
    border-dashboard-border-light
    dark:border-dashboard-border-dark

    flex items-center justify-between
    text-sm sm:text-sm
    text-dashboard-muted-light
    dark:text-dashboard-muted-dark

    sm:hidden
  `,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Eye,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.views??0})]}),jsxRuntimeExports.jsxs("button",{onClick:Ut=>{Ut.preventDefault(),Ut.stopPropagation(),kt(Ut,et)},className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(Heart,{size:16,className:et.has_liked?"text-red-500 fill-red-500":"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.like_count??0})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-[4px]",children:[jsxRuntimeExports.jsx(MessageSquare,{size:16,className:"opacity-70"}),jsxRuntimeExports.jsx("span",{children:et.comment_count??0})]}),jsxRuntimeExports.jsx("button",{onClick:Ut=>{Ut.preventDefault(),Ut.stopPropagation(),Tt(Ut,et)},className:"flex items-center gap-[4px]",children:Dt===et.id?jsxRuntimeExports.jsx(Check,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(Share2,{size:16,className:"opacity-70"})})]})})]})}function MyPublication(){const{userId:et}=useParams(),[dt,$t]=reactExports.useState(null),[kt,Tt]=reactExports.useState([]),[Dt,Ft]=reactExports.useState(!0),[Ut,Ht]=reactExports.useState(null),Kt=10,[Yt,Jt]=reactExports.useState(0),[Zt,er]=reactExports.useState(!0),[rr,sr]=reactExports.useState(!1),nr=reactExports.useRef(null);reactExports.useEffect(()=>{Tt([]),Jt(0),er(!0),ir(!0)},[et]);async function ir(ur=!1){if(!(!Zt&&!ur)){ur?Ft(!0):sr(!0);try{const pr=await axiosInstance.get(`/community/authors/${et}/publication`,{params:{limit:Kt,offset:ur?0:Yt}});ur?($t(pr.data.profile),Tt(pr.data.posts||[]),Jt(pr.data.posts.length)):(Tt(mr=>[...mr,...pr.data.posts]),Jt(mr=>mr+pr.data.posts.length)),er(pr.data.hasMore)}catch{console.error("Failed to load publication")}finally{Ft(!1),sr(!1)}}}reactExports.useEffect(()=>{if(!Zt||rr)return;const ur=new IntersectionObserver(([pr])=>{pr.isIntersecting&&ir(!1)},{rootMargin:"200px"});return nr.current&&ur.observe(nr.current),()=>ur.disconnect()},[Zt,rr,Yt]);const or=async(ur,pr)=>{if(ur.preventDefault(),ur.stopPropagation(),!!(pr!=null&&pr.id))try{pr.has_liked?await axiosInstance.delete("/community/delete-like",{data:{targetType:"post",targetId:pr.id}}):await axiosInstance.post("/community/likes",{targetType:"post",targetId:pr.id}),Tt(mr=>mr.map(jr=>jr.id===pr.id?{...jr,has_liked:pr.has_liked?0:1,like_count:Math.max((jr.like_count||0)+(pr.has_liked?-1:1),0)}:jr))}catch(mr){console.error("Failed to toggle like:",mr),toast.error("Failed to update like")}},lr=async(ur,pr)=>{if(ur.preventDefault(),ur.stopPropagation(),!pr)return;const mr=getShareUrl(pr,"post");try{await navigator.clipboard.writeText(mr),Ht(pr.id),setTimeout(()=>Ht(null),1500)}catch{toast.error("Failed to copy link")}};if(Dt)return jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"Loading"});if(!kt.length)return jsxRuntimeExports.jsx("div",{className:"p-6 opacity-60",children:"No posts yet"});const cr=kt[0],dr=kt.slice(1);return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dashboard-bg-light dark:bg-dashboard-bg-dark",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[jsxRuntimeExports.jsx(PublicationHeader,{profile:dt}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[3fr_2fr] gap-10 sm:gap-12",children:[jsxRuntimeExports.jsx(FeaturedPost,{post:cr,authorName:dt==null?void 0:dt.name,authorId:dt.id,onLike:or,onShare:lr,copiedPostId:Ut}),jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[dr.map(ur=>jsxRuntimeExports.jsx(PublicationListItem,{post:ur,authorId:dt.id,authorName:dt==null?void 0:dt.name,onLike:or,onShare:lr,copiedPostId:Ut},ur.id)),Zt&&jsxRuntimeExports.jsx("div",{ref:nr,className:"h-10"}),rr&&jsxRuntimeExports.jsx("p",{className:"text-xs opacity-50 text-center",children:"Loading more articles"})]})]})]})})}const AnimatedRoutes=()=>{const et=useLocation(),dt=localStorage.getItem("theme")||"dark";return document.documentElement.classList.add(dt),jsxRuntimeExports.jsx(AnimatePresence,{mode:"sync",children:jsxRuntimeExports.jsxs(Routes,{location:et,children:[jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(SiteLayout,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(Landing,{})})}),jsxRuntimeExports.jsx(Route,{path:"contact",element:jsxRuntimeExports.jsx(Contact,{})}),jsxRuntimeExports.jsx(Route,{path:"terms",element:jsxRuntimeExports.jsx(Terms,{})}),jsxRuntimeExports.jsx(Route,{path:"privacy-policy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"refund-policy",element:jsxRuntimeExports.jsx(Refund,{})}),jsxRuntimeExports.jsx(Route,{path:"cookie-policy",element:jsxRuntimeExports.jsx(Cookie,{})}),jsxRuntimeExports.jsx(Route,{path:"landing",element:jsxRuntimeExports.jsx(LandingInfoPage,{})}),jsxRuntimeExports.jsx(Route,{path:"plans",element:jsxRuntimeExports.jsx(PlansPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/signup-community",element:jsxRuntimeExports.jsx(SignupCommunity,{})}),jsxRuntimeExports.jsx(Route,{path:"analytics",element:jsxRuntimeExports.jsx(AnalyticsFeaturePage,{})}),jsxRuntimeExports.jsx(Route,{path:"community-feature",element:jsxRuntimeExports.jsx(CommunityFeaturePage,{})}),jsxRuntimeExports.jsx(Route,{path:"stripe-payments",element:jsxRuntimeExports.jsx(StripePayments,{})}),jsxRuntimeExports.jsx(Route,{path:"authors-assistant",element:jsxRuntimeExports.jsx(AuthorsAssistant,{})}),jsxRuntimeExports.jsx(Route,{path:"sign-up",element:jsxRuntimeExports.jsx(SignupPage,{})}),jsxRuntimeExports.jsx(Route,{path:"login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"forgot-password",element:jsxRuntimeExports.jsx(ForgotPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"reset-password",element:jsxRuntimeExports.jsx(ResetPassword,{})}),jsxRuntimeExports.jsx(Route,{path:"/community/invites/:token",element:jsxRuntimeExports.jsx(InviteAccept,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DashboardSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/settings/domains",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SettingsDomains,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"books",element:jsxRuntimeExports.jsx(BooksDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"thank-you",element:jsxRuntimeExports.jsx(ThankYou,{})}),jsxRuntimeExports.jsx(Route,{path:"/community",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunityHome,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community-alerts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Notifications,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/topic/:topicId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunityTopic,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/post/:slug",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunityPost,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/subscriptions",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Subscriptions,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/my-subscriptions",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(MySubscriptions,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/subscriptions/subscribers",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunitySubscribers,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/subscribe/:authorId/choose",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SubscribeChoicePage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/authors/:userId/subscribers",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunitySubscribers,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(ProfileSettings,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/profile",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Profile,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/profile/:userId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Profile,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/authors/:userId/publication",element:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(MyPublication,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/bookmarks",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Saved,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/my-fragments",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(MyFragments,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/fragments/edit/:fragmentId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CreateFragment,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/fragments/create",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CreateFragment,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/fragments/:id",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CommunityPost,{targetType:"fragment"})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/authors/:userId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Profile,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/posts",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(MyPosts,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/email-templates",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(EmailTemplates,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/create-post",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CreatePostPage,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/community/edit-post/:postId",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CreatePostPage,{isEdit:!0})})})})}),jsxRuntimeExports.jsx(Route,{path:"/seller-dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["marketer","admin","customer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SellerDashboard,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/notifications",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(Inbox,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/landing-page-builder",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingPageBuilder,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/landing-analytics",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingAnalytics,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(DocsIndexPage,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/settings",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SettingsDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/landing-page-builder",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingBuilderDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/seller-dashboard",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(SellerDashboardDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/analytics-docs",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(LandingAnalyticsDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/custom-domain",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(CustomDomainsDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"/docs/authors-assistant",element:jsxRuntimeExports.jsx(PrivateRoute,{role:["customer","admin","marketer"],children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"min-h-screen bg-[#030712]",children:jsxRuntimeExports.jsx(DashboardLayout,{children:jsxRuntimeExports.jsx(AuthorsAssistantDocs,{})})})})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]},et.pathname)})},RootApp=()=>{const{maintenance:et,loading:dt}=useMaintenance();return dt?null:et?jsxRuntimeExports.jsx(MaintenanceScreen,{}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProviderWithRouter,{children:jsxRuntimeExports.jsxs(BookProvider,{children:[jsxRuntimeExports.jsx(Lt$1,{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"}),jsxRuntimeExports.jsx(AnimatedRoutes,{})]})})})},container=document.getElementById("root"),root=createRoot(container);root.render(jsxRuntimeExports.jsx(RootApp,{}));export{commonjsGlobal as c,getAugmentedNamespace as g};
